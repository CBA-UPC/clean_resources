/*

 Video.js 7.20.2 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/main/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/main/LICENSE>

 slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 Copyright (c) 2014 David Bj√∂rklund
 Available under the MIT license
 <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 Programatically add the following
 @name m3u8-parser @version 4.7.1 @license Apache-2.0  @name mpd-parser @version 0.21.1 @license Apache-2.0  @name @videojs/http-streaming @version 2.14.2 @license Apache-2.0  @name pkcs7 @version 1.0.4 @license Apache-2.0  @name aes-decrypter @version 3.1.3 @license Apache-2.0  @name videojs-overlay @version 2.1.4 @license Apache-2.0 */
)(this,function(){function m(n){var c="info",f;var e=tj(n,f);f.createLogger;f.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",
warn:"warn|error",error:"error",DEFAULT:c};f.level=function(b){if("string"===typeof b){if(!f.levels.hasOwnProperty(b))throw Error('"'+b+'" in not a valid log level');c=b}return c};f.history;f.history.filter;f.history.clear;f.history.disable;f.history.enable;f.error=
function(){for(var b=arguments.length,f=Array(b),y=0;y<b;y++)f[y]=arguments[y];return e("error",c,f)};f.warn=function(){for(var b=arguments.length,f=Array(b),y=0;y<b;y++)f[y]=arguments[y];return e("warn",c,f)};f.debug;return fnction E(n){for(var c=arguments.length,f=Array(1<c?c-1:0),e=1;e<c;e++)f[e-1]=arguments[e];if(Object.assign)return Qa.apply(void 0,[n].concat(f));f.forEach);return nunction R(n,c){if(!n||!c)return"";if("function"===typeof window.getComputedStyle){try{var f=window.getComputedStyle(n)}catch(e){return""}return f?
f.getPropertyValue(c)||f[c]:""}return""unction N(n){return q(n)&&1===n.nodeTypefunction L(n){return function(c,f){if("string"!==typeof c||!c.trim())return document[n](null);"string"===typeof f&&f.trim()&&(f=document.querySelector(f));f=N(f)?f:document;return f[n]&&f[n](c)}}function Q(n,
c,f,e){void 0===n&&(n="div");void 0===c&&(c={});void 0===f&&(f={});var b=document.createElement(n);Object.getOwnPropertyNames(c).forEach(function(e){var f=c[e];if(-1!==e.indexOf("aria-")||"role"===e||"type"===e)P.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+e+" to "+f+".")),b.setAttribute(e,f);else if("textContent"===e)ub(b,f);else if(b[e]!==f||"tabIndex"===e)b[e]=
f});Object.getOwnPropertyNames(f).forEach);e&&Dd(b,e);return bunction wb(n,c){Ra(c);return n.classList?n.classList.contains(c):(new RegExp("(^|\\s)"+c+"($|\\s)")).test(n.className)function Gb(n,
c){if(!n)return P.warn("removeClass was called with an element that doesn't exist"),null;n.classList?n.classList.remove(c):(Ra(c),n.className=n.className.split(/\s+/).filter).join(" "));return n}function Bf(n,c,f){var e=wb(n,c);"function"===typeof f&&(f=f(n,c));"boolean"!==typeof f&&(f=!e);if(f!==e)return f?ca(n,c):Gb(n,c),nfunction Va(n){var c={};if(n&&n.attributes&&0<n.attributes.length)for(var f=n.attributes,e=f.length-1;0<=e;e--){var b=f[e].name,t=f[e].value;if("boolean"===typeof n[b]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+b+","))t=null!==t?!0:!1;c[b]=t}return cunction Hb(n){if(n&&n.getBoundingClientRect&&n.parentNode){var c=
n.getBoundingClientRect(),f={};"bottom height left right top width".split(" ").forEach);f.height||(f.height=parseFloat(R(n,"height")));f.width||(f.width=parseFloat(R(n,"width")));return f}function Fc(n,
c){var f=0,e=0;if(sa)for(var b=n;b&&"html"!==b.nodeName.toLowerCase();){var t=R(b,"transform");/^matrix/.test(t)?(t=t.slice(7,-1).split(/,\s/).map(Number),f+=t[4],e+=t[5]):/^matrix3d/.test(t)&&(t=t.slice(9,-1).split(/,\s/).map(Number),f+=t[12],e+=t[13]);b=b.parentNode}b={};t=ac(c.target);n=ac(n);var y=n.width,p=n.height,a=c.offsetY-(n.top-t.top);t=c.offsetX-(n.left-t.left);c.changedTouches&&(t=c.changedTouches[0].pageX-n.left,a=c.changedTouches[0].pageY+n.top,sa&&(t-=f,a-=e));b.y=1-Math.max(0,Math.min(1,
a/p));b.x=Math.max(0,Math.min(1,t/y));return bunction Gf(n){"function"===typeof n&&(n=n());return(Array.isArray(n)?n:[n]).map(function(c){"function"===typeof c&&(c=c());if(N(c)||Ff(c))return c;if("string"===typeof c&&/\S/.test(c))return document.createTextNode(c)}).filter(function(c){return c})unction bc(n){return void 0===n.button&&void 0===n.buttons||0===n.button&&void 0===n.buttons||"mouseup"===n.type&&0===n.button&&0===n.buttons?!0:0!==n.button||1!==n.buttons?!1:!0unction Jf(n,c){if(Ca.has(n)){var f=Ca.get(n);0===f.handlers[c].length&&(delete f.handlers[c],n.removeEventListener?n.removeEventListener(c,f.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+
c,f.dispatcher));0>=Object.getOwnPropertyNames(f.handlers).length&&(delete f.handlers,delete f.dispatcher,delete f.disabled);if(0===Object.getOwnPropertyNames(f).length)Ca["delete"](n)}function Gc(n){function c(){return!0if(n.fixed_)return n;if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){var e=n||window.event;n={};for(var b in e)"layerX"!==b&&"layerY"!==b&&"keyLocation"!==b&&"webkitMovementX"!==b&&"webkitMovementY"!==
b&&"path"!==b&&("returnValue"===b&&e.preventDefault||(n[b]=e[b]));n.target||(n.target=n.srcElement||document);n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement);n.preventDefault;n.defaultPrevented=!1;n.stopPropagation;n.isPropagationStopped=f;n.stopImmediatePropagation=;n.isImmediatePropagationStopped=f;if(null!==n.clientX&&void 0!==n.clientX){b=document.documentElement;var t=document.body;n.pageX=n.clientX+(b&&b.scrollLeft||t&&t.scrollLeft||0)-(b&&b.clientLeft||t&&t.clientLeft||0);n.pageY=n.clientY+(b&&b.scrollTop||t&&t.scrollTop||0)-(b&&b.clientTop||t&&t.clientTop||0)}n.which=n.charCode||n.keyCode;null!==n.button&&void 0!==n.button&&(n.button=
n.button&1?0:n.button&4?1:n.button&2?2:0)}n.fixed_=!0;return n}function Da(n,c,f){if(Array.isArray(c))return Id(Da,n,c,f);Ca.has(n)||Ca.set(n,{});var e=Ca.get(n);e.handlers||(e.handlers={});e.handlers[c]||(e.handlers[c]=[]);f.guid||(f.guid=bb++);e.handlers[c].push(f);e.dispatcher||(e.disabled=!1,e.dispatcher=function(b,f){if(!e.disabled){b=Gc(b);var c=e.handlers[b.type];if(c){c=c.slice(0);for(var t=0,a=c.length;t<a&&!b.isImmediatePropagationStopped();t++)try{c[t].call(n,b,f)}catch(k){P.error(k)}}}});
1===e.handlers[c].length&&(n.addEventListener?(f=!1,wj()&&-1<xj.indexOf(c)&&(f={passive:!0}),n.addEventListener(c,e.dispatcher,f)):n.attachEvent&&n.attachEvent("on"+c,e.dispatcher))}function T(n,c,f){if(Ca.has(n)){var e=Ca.get(n);if(e.handlers){if(Array.isArray(c))return Id(T,n,c,f);if(void 0===c)for(var b in e.handlers)Object.prototype.hasOwnProperty.call(e.handlers||{},b)&&(c=n,f=b,e.handlers[f]=[],Jf(c,f));else if(b=e.handlers[c]){if(!f)e.handlers[c]=[];else if(f.guid)for(e=0;e<b.length;e++)b[e].guid===
f.guid&&b.splice(e--,1);Jf(n,c)}}}}function cb(n,c,f){var e=Ca.has(n)?Ca.get(n):{},b=n.parentNode||n.ownerDocument;"string"===typeof c?c={type:c,target:n}:c.target||(c.target=n);c=Gc(c);e.dispatcher&&e.dispatcher.call(n,c,f);if(b&&!c.isPropagationStopped()&&!0===c.bubbles)cb.call(null,b,c,f);else if(!b&&!c.defaultPrevented&&c.target&&c.target[c.type]&&(Ca.has(c.target)||Ca.set(c.target,{}),n=Ca.get(c.target),c.target[c.type])){n.disabled=!0;if("function"===typeof c.target[c.type])c.target[c.type]();
n.disabled=!1}return!c.defaultPreventedfunction Kf(n,c,f){var e;e.guid=f.guid=f.guid||bb++;Da(n,c,e)}function Jd(n,c){void 0===c&&(c={});if(c=c.eventBusKey){if(!n[c].nodeName)throw Error('The eventBusKey "'+c+'" does not refer to an element.');n.eventBusEl_=n[c]}else n.eventBusEl_=Q("span",{className:"vjs-event-bus"});
E(n,yj);n.eventedCallbacks&&n.eventedCallbacks.forEach(function(f){f()});n.on("dispose",function(){n.off();[n,n.el_,n.eventBusEl_].forEach(function(f){if(f&&Ca.has(f))Ca["delete"](f)});window.setTimeout,0)});return n}function Lf(n,c){E(n,zj);n.state=E({},n.state,c);if("function"===typeof n.handleStateChanged&&db(n))n.on("statechanged",n.handleStateChanged);return n}function U(){for(var n={},c=arguments.length,f=Array(c),e=0;e<c;e++)f[e]=arguments[e];f.forEach);return n}function Mf(n,c,f,e){var b=f.length-1;if("number"!==typeof e||0>e||e>b)throw Error("Failed to execute '"+n+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+b+").");return f[e][c]}function Kd(n){var c=void 0===n||0===n.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end}:{length:n.length,start:Mf.bind(null,
"start",0,n),end:Mf.bind(null,"end",1,n)};window.Symbol&&window.Symbol.iterator&&(c[window.Symbol.iterator]);return cfunction Nf(n,c){var f=0;if(!c)return 0;n&&n.length||(n=qb(0,0));for(var e=0;e<n.length;e++){var b=n.start(e);var t=n.end(e);t>c&&(t=c);f+=t-b}return f/c}function ta(n){if(n instanceof ta)return n;"number"===typeof n?this.code=n:"string"===typeof n?this.message=
n:q(n)&&("number"===typeof n.code&&(this.code=n.code),E(this,n));this.message||(this.message=ta.defaultMessages[this.code]||"")unction Aj(n){void 0===n&&(n="");return n.toLowerCase().split(";").reduce(function(c,f){f=f.split("\x3d");var e=f[1];return"charset"===f[0].trim()?e.trim():c},"utf-8")function Of(n,
c,f){var e=n;if(c){var b=Cj.call(c);b="[object Function]"===b||"function"===typeof c&&"[object RegExp]"!==b||"undefined"!==typeof window&&(c===window.setTimeout||c===window.alert||c===window.confirm||c===window.prompt)}else b=!1;b?(f=c,"string"===typeof n&&(e={uri:n})):e=Qa({},c,{uri:n});e.callback=f;return efunction Pf(n)function f(){if(!y){clearTimeout(g);var f=n.useXDR&&void 0===b.status?200:1223===b.status?204:b.status;var c=u,t=null;if(0!==f){if(b.response)c=b.response;else if(!(c=b.responseText))a:{try{if("document"===b.responseType){c=b.responseXML;break a}var d=b.responseXML&&"parsererror"===b.responseXML.documentElement.nodeName;if(""===b.responseType&&!d){c=b.responseXML;break a}}catch(Qf){}c=null}if(h)try{c=JSON.parse(c)}catch(Qf){}c={body:c,statusCode:f,method:a,headers:{},url:p,
rawRequest:b};b.getAllResponseHeaders&&(c.headers=Dj(b.getAllResponseHeaders()))}else t=Error("Internal XMLHttpRequest Error");f=c.body;e||(e=!0,n.callback(t,c,f))}}if("undefined"===typeof n.callback)throw Error("callback argument missing");var e=!1,b=n.xhr||null;b||(b=n.cors||n.useXDR?new Ea.XDomainRequest:new Ea.XMLHttpRequest);var t,y,p=b.url=n.uri||n.url,a=b.method=n.method||"GET",k=n.body||n.data,l=b.headers=n.headers||{},d=!!n.sync,h=!1,g,u={body:void 0,headers:{},statusCode:0,method:a,url:p,
rawRequest:b};"json"in n&&!1!==n.json&&(h=!0,l.accept||l.Accept||(l.Accept="application/json"),"GET"!==a&&"HEAD"!==a&&(l["content-type"]||l["Content-Type"]||(l["Content-Type"]="application/json"),k=JSON.stringify(!0===n.json?k:n.json)));b.onreadystatechange;b.onload=f;b.onerror=c;b.onprogress=function(){};b.onabort=function(){y=!0};b.ontimeout=c;b.open(a,p,!d,n.username,n.password);d||(b.withCredentials=!!n.withCredentials);!d&&0<n.timeout&&(g=setTimeout,n.timeout));if(b.setRequestHeader)for(t in l)l.hasOwnProperty(t)&&b.setRequestHeader(t,l[t]);else if(n.headers&&!Bj(n.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in n&&(b.responseType=n.responseType);"beforeSend"in n&&"function"===typeof n.beforeSend&&n.beforeSend(b);b.send(k||null);return b}function Ej(){function Ld(n){n=n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!n)return null;if(n[3]){var c=n[3].replace(":","");return 3600*(n[1]|0)+60*(n[2]|0)+(c|0)+(n[4]|0)/1E3}return 59<n[1]?3600*(n[1]|0)+60*(n[2]|0)+(n[4]|0)/1E3:60*(n[1]|0)+(n[2]|0)+(n[4]|0)/1E3unction Fj(n,c,f)ar t=n;b();c.startTime=e();b();if("--\x3e"!==n.substr(0,3))throw new ya(ya.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+t);n=n.substr(3);b();c.endTime=e();b();(function(b,e){var c=new dc;ec(b,function(b,e){switch(b){case "region":for(var t=f.length-1;0<=t;t--)if(f[t].id===e){c.set(b,f[t].region);break}break;case "vertical":c.alt(b,e,["rl","lr"]);break;
case "line":e=e.split(",");t=e[0];c.integer(b,t);c.percent(b,t)?c.set("snapToLines",!1):null;c.alt(b,t,["auto"]);2===e.length&&c.alt("lineAlign",e[1],["start","center","end"]);break;case "position":e=e.split(",");c.percent(b,e[0]);2===e.length&&c.alt("positionAlign",e[1],["start","center","end"]);break;case "size":c.percent(b,e);break;case "align":c.alt(b,e,["start","center","end","left","right"])}},/:/,/\s/);e.region=c.get("region",null);e.vertical=c.get("vertical","");try{e.line=c.get("line","auto")}catch(k){}e.lineAlign=
c.get("lineAlign","start");e.snapToLines=c.get("snapToLines",!0);e.size=c.get("size",100);try{e.align=c.get("align","center")}catch(k){e.align=c.get("align","middle")}try{e.position=c.get("position","auto")}catch(k){e.position=c.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},e.align)}e.positionAlign=c.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},e.align)})(n,c)}function Rf(n,c){function f(){if(!c)return null;var b=c.match(/^([^<]*)(<[^>]*>?)?/);
b=b[1]?b[1]:b[2];c=c.substr(b.length);return bfunction b(b,e){var f=Gj[b];if(!f)return null;f=n.document.createElement(f);(b=Hj[b])&&e&&(f[b]=e.trim());return f}for(var t=n.document.createElement("div"),y=t,p,a=[];null!==(p=f());)if("\x3c"===p[0])if("/"===p[1])a.length&&a[a.length-1]===p.substr(2).replace("\x3e","")&&(a.pop(),y=y.parentNode);else{var k=Ld(p.substr(1,p.length-2));if(k){var l=n.document.createProcessingInstruction("timestamp",
k);y.appendChild(l)}else if(p=p.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(l=b(p[1],p[3]))||Sf[l.localName]&&Sf[l.localName]!==y.localName||(p[2]&&(k=p[2].split("."),k.forEach(function(b){var e=/^bg_/.test(b);b=e?b.slice(3):b;Tf.hasOwnProperty(b)&&(l.style[e?"background-color":"color"]=Tf[b])}),l.className=k.join(" ")),a.push(p[1]),y.appendChild(l),y=l)}else y.appendChild(n.document.createTextNode(e(p)));return tfunction Jj(n)function f(b){if(!b||!b.length)return null;var e=b.pop(),t=e.textContent||e.innerText;if(t)return(e=t.match(/^.*(\n|\r)/))?(b.length=0,e[0]):t;if("ruby"===e.tagName)return f(b);if(e.childNodes)return c(b,e),f(b)}var e=[],b="";if(!n||!n.childNodes)return"ltr";for(c(e,n);b=f(e);)for(var t=0;t<b.length;t++)if(n=b.charCodeAt(t),Ij(n))return"rtl";return"ltr"}function Od(){}function Ic(n,
c,f){this.cue=c;this.cueDiv=Rf(n,c.text);var e={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===c.vertical?"horizontal-tb":"lr"===c.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(e,this.cueDiv);this.div=n.document.createElement("div");e={direction:Jj(this.cueDiv),writingMode:""===c.vertical?"horizontal-tb":"lr"===c.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",
textAlign:"middle"===c.align?"center":c.align,font:f.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(e);this.div.appendChild(this.cueDiv);n=0;switch(c.positionAlign){case "start":n=c.position;break;case "center":n=c.position-c.size/2;break;case "end":n=c.position-c.size}""===c.vertical?this.applyStyles({left:this.formatStyle(n,"%"),width:this.formatStyle(c.size,"%")}):this.applyStyles({top:this.formatStyle(n,"%"),height:this.formatStyle(c.size,"%")});this.move}function Fa(n){if(n.div){var c=n.div.offsetHeight;var f=n.div.offsetWidth;var e=n.div.offsetTop;var b=(b=n.div.childNodes)&&(b=b[0])&&b.getClientRects&&b.getClientRects();n=n.div.getBoundingClientRect();var t=b?Math.max(b[0]&&b[0].height||0,n.height/b.length):0}this.left=n.left;this.right=n.right;this.top=
n.top||e;this.height=n.height||c;this.bottom=n.bottom||e+(n.height||c);this.width=n.width||f;this.lineHeight=void 0!==t?t:n.lineHeight}function xb(){}function Pd(n){return"string"!==typeof n?!1:Kj[n.toLowerCase()]?n.toLowerCase():!1}function Vf(n,c,f){this.hasBeenReset=!1;var e="",b=!1,t=n,y=c,p=f,a=null,k="",l=!0,d="auto",h="start",g="auto",u="auto",z=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set},pauseOnExit:{enumerable:!0,get:function(){return b},
set},startTime:{enumerable:!0,get:function(){return t},set:function(b){if("number"!==typeof b)throw new TypeError("Start time must be set to a number.");t=b;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return y},set},text:{enumerable:!0,get:function(){return p},set},region:{enumerable:!0,get:function(){return a},
set},vertical:{enumerable:!0,get:function(){return k},set:function(b){b="string"!==typeof b?!1:Lj[b.toLowerCase()]?b.toLowerCase():!1;if(!1===b)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");k=b;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return l},set},line:{enumerable:!0,get:function(){return d},set},lineAlign:{enumerable:!0,get:function(){return h},set:function(b){(b=Pd(b))?(h=b,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(b){if(0>b||100<b)throw Error("Position must be between 0 and 100.");g=b;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return u},set},
size:{enumerable:!0,get:function(){return z},set},align:{enumerable:!0,get:function(){return v},set}});this.displayState=void 0}function fc(n){return"number"===typeof n&&0<=n&&100>=nunction Wf(n,c,f,e){void 0===e&&(e=null);var b="call"+da(f);b=n.reduce(Qd(b),e);c=(e=b===Jc)?null:c[f](b);for(b=n.length-1;0<=b;b--){var t=n[b];if(t[f])t[f](e,c)}return cfunction Oj(n,c){var f=Rd[n.id()],e=null;if(void 0===f||null===f)return e=c(n),Rd[n.id()]=[[c,e]],e;for(var b=0;b<f.length;b++){var t=f[b];t[0]===c&&(e=t[1])}null===e&&(e=c(n),f.push([c,e]));return e}function rb(n,
c,f,e,b,t){void 0===n&&(n={});void 0===c&&(c=[]);void 0===b&&(b=[]);void 0===t&&(t=!1);var y=c[0],p=c.slice(1);if("string"===typeof y)rb(n,sb[y],f,e,b,t);else if(y){var a=Oj(e,y);if(!a.setSource)return b.push(a),rb(n,p,f,e,b,t);a.setSource(E({},n))}else p.length?rb(n,p,f,e,b,t):t?f(n,b):rb(n,sb["*"],f,e,b,!0)function Sd(n,c){if(4===n.length)n=
n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(7===n.length)n=n.slice(1);else throw Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+c+")"unction w(n,c,f){var e=w.getPlayer(n);if(e)return c&&P.warn('Player "'+n+'" is already initialised. Options will not be applied.'),
f&&e.ready(f),e;var b="string"===typeof n?Na("#"+Zf(n)):n;if(!N(b))throw new TypeError("The element or ID supplied is not valid. (videojs)");b.ownerDocument.defaultView&&b.ownerDocument.body.contains(b)||P.warn("The element supplied is not included in the DOM");c=c||{};!0===c.restoreEl&&(c.restoreEl=(b.parentNode&&b.parentNode.hasAttribute("data-vjs-player")?b.parentNode:b).cloneNode(!0));fb("beforesetup").forEach);e=new (A.getComponent("Player"))(b,c,f);fb("setup").forEach(function(b){return b(e)});return e}function $f(n){n=window.atob?window.atob(n):Buffer.from(n,"base64").toString("binary");for(var c=new Uint8Array(n.length),f=0;f<n.length;f++)c[f]=n.charCodeAt(f);return cnction ag(n){if(!n)return[];n=n?n.split(/[\t\n\f\r ]+/).filter(Pj):
[];return Object.keys(n.reduce(Qj,{}))unction ua(n,c){var f=n.prototype;if(!(f instanceof c)){var e=function(){};e.prototype=c.prototype;e=new e;gc(f,e);n.prototype=f=e}f.constructor!=n&&("function"!=typeof n&&console.error("unknown Class:"+n),f.constructor=n)}function zb(n,c){if(c instanceof Error)var f=c;else f=this,Error.call(this,oa[n]),this.message=oa[n],Error.captureStackTrace&&Error.captureStackTrace(this,
zb);f.code=n;c&&(this.message=this.message+": "+c);return f}function La(){unction Mc(){function dg(n,c,f,e){e?c[cg(c,e)]=f:c[c.length++]=f;n&&(f.ownerElement=n,c=n.ownerDocument)&&(e&&(c&&c._inc++,e.namespaceURI===lb.XMLNS&&delete n._nsMap[e.prefix?
e.localName:""]),c&&c._inc++,f.namespaceURI===lb.XMLNS&&(n._nsMap[f.prefix?f.localName:""]=f.value))}function eg(n,c,f){var e=cg(c,f);if(0<=e){for(var b=c.length-1;e<b;)c[e]=c[++e];c.length=b;n&&(c=n.ownerDocument)&&(c&&c._inc++,f.namespaceURI===lb.XMLNS&&delete n._nsMap[f.prefix?f.localName:""],f.ownerElement=null)}else throw zb(Sj,Error(n.tagName+"@"+f));}function fg(){}function ja(){function hc(n,c){if(c(n))return!0;if(n=n.firstChild){do if(hc(n,c))return!0;while(n=n.nextSibling)}}function ic(){}function Vd(n,c,f){if(n&&n._inc)if(n._inc++,n=c.childNodes,f)n[n.length++]=f;else{c=c.firstChild;for(f=0;c;)n[f++]=c,c=c.nextSibling;n.length=f}function ig(n,c,f){var e=c.parentNode;e&&e.removeChild(c);if(c.nodeType===
mb){e=c.firstChild;if(null==e)return c;var b=c.lastChild}else e=b=c;var t=f?f.previousSibling:n.lastChild;e.previousSibling=t;b.nextSibling=f;t?t.nextSibling=e:n.firstChild=e;null==f?n.lastChild=b:f.previousSibling=b;do e.parentNode=n;while(e!==b&&(e=e.nextSibling));Vd(n.ownerDocument||n,n);c.nodeType==mb&&(c.firstChild=c.lastChild=null);return c}function tb(){this._nsMap={}}function Nc(){}function jc(){}function Wd(){}function Xd(){}function Yd(){}function Zd(){}function jg(){}function kg(){}function $d(){}
function Oc(){}function ae(){}function lg(n,c,f){c=n.prefix||"";n=n.namespaceURI;if(!n||"xml"===c&&n===lb.XML||n===lb.XMLNS)return!1;for(var e=f.length;e--;){var b=f[e];if(b.prefix===c)return b.namespace!==n}return!0function Ib(n,c,f,e,b){b||(b=[]);if(e)if(n=e(n)){if("string"==typeof n){c.push(n);return}}else return;switch(n.nodeType){case Ma:var t=n.attributes,y=t.length,p=n.firstChild,a=n.tagName;f=lb.isHTML(n.namespaceURI)||f;
var k=a;if(!f&&!n.prefix&&n.namespaceURI){for(var l,d=0;d<t.length;d++)if("xmlns"===t.item(d).name){l=t.item(d).value;break}if(!l)for(d=b.length-1;0<=d;d--){var h=b[d];if(""===h.prefix&&h.namespace===n.namespaceURI){l=h.namespace;break}}if(l!==n.namespaceURI)for(d=b.length-1;0<=d;d--)if(h=b[d],h.namespace===n.namespaceURI){h.prefix&&(k=h.prefix+":"+a);break}}c.push("\x3c",k);for(l=0;l<y;l++)d=t.item(l),"xmlns"==d.prefix?b.push({prefix:d.localName,namespace:d.value}):"xmlns"==d.nodeName&&b.push({prefix:"",
namespace:d.value});for(l=0;l<y;l++){d=t.item(l);if(lg(d,f,b)){h=d.prefix||"";var g=d.namespaceURI;be(c,h?"xmlns:"+h:"xmlns",g);b.push({prefix:h,namespace:g})}Ib(d,c,f,e,b)}a===k&&lg(n,f,b)&&(h=n.prefix||"",g=n.namespaceURI,be(c,h?"xmlns:"+h:"xmlns",g),b.push({prefix:h,namespace:g}));if(p||f&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){c.push("\x3e");if(f&&/^script$/i.test(a))for(;p;)p.data?c.push(p.data):Ib(p,c,f,e,b.slice()),p=p.nextSibling;else for(;p;)Ib(p,c,f,e,b.slice()),p=p.nextSibling;c.push("\x3c/",
k,"\x3e")}else c.push("/\x3e");break;case mg:case mb:for(p=n.firstChild;p;)Ib(p,c,f,e,b.slice()),p=p.nextSibling;break;case Ab:return be(c,n.name,n.value);case Pc:return c.push(n.data.replace(/[<&]/g,gg).replace(/]]\x3e/g,"]]\x26gt;"));case ng:return c.push("\x3c![CDATA[",n.data,"]]\x3e");case og:return c.push("\x3c!--",n.data,"--\x3e");case pg:f=n.publicId;e=n.systemId;c.push("\x3c!DOCTYPE ",n.name);f?(c.push(" PUBLIC ",f),e&&"."!=e&&c.push(" ",e),c.push("\x3e")):e&&"."!=e?c.push(" SYSTEM ",e,"\x3e"):
((n=n.internalSubset)&&c.push(" [",n,"]"),c.push("\x3e"));break;case qg:return c.push("\x3c?",n.target," ",n.data,"?\x3e");case rg:return c.push("\x26",n.nodeName,";");default:c.push("??",n.nodeName)}}function sg(n,c,f){switch(c.nodeType){case Ma:var e=c.cloneNode(!1);e.ownerDocument=n;case mb:break;case Ab:f=!0}e||(e=c.cloneNode(!1));e.ownerDocument=n;e.parentNode=null;if(f)for(c=c.firstChild;c;)e.appendChild(sg(n,c,f)),c=c.nextSibling;return e}function ce(n,c,f){var e=new c.constructor;for(t in c){var b=
c[t];"object"!=typeof b&&b!=e[t]&&(e[t]=b)}c.childNodes&&(e.childNodes=new La);e.ownerDocument=n;switch(e.nodeType){case Ma:var t=c.attributes;var y=e.attributes=new Mc;b=t.length;y._ownerElement=e;for(y=0;y<b;y++)e.setAttributeNode(ce(n,t.item(y),!0));break;case Ab:f=!0}if(f)for(c=c.firstChild;c;)e.appendChild(ce(n,c,f)),c=c.nextSibling;return eunction tg(){}function Tj(n,
c,f,e,b){function t(e){var c=e.slice(1,-1);if(c in f)return f[c];if("#"===c.charAt(0))return e=parseInt(c.substr(1).replace("x","0x")),65535<e?(e-=65536,e=String.fromCharCode(55296+(e>>10),56320+(e&1023))):e=String.fromCharCode(e),e;b.error("entity not found:"+e);return ear a=0,k=0,l=/.*(?:\r\n?|\n)|.*$/g,
d=e.locator;c=[{currentNSMap:c}];for(var h={},g=0;;){try{var u=n.indexOf("\x3c",g);if(0>u){if(!n.substr(g).match(/^\s*$/)){var z=e.doc,v=z.createTextNode(n.substr(g));z.appendChild(v);e.currentElement=v}break}u>g&&y(u);switch(n.charAt(u+1)){case "/":var m=n.indexOf("\x3e",u+3),J=n.substring(u+2,m).replace(/[ \t\n\r]+$/g,""),q=c.pop();0>m?(J=n.substring(u+2).replace(/[\s<].*/,""),b.error("end tag name: "+J+" is not complete:"+q.tagName),m=u+1+J.length):J.match(/\s</)&&(J=J.replace(/[\s<].*/,""),b.error("end tag name: "+
J+" maybe not complete"),m=u+1+J.length);var r=q.localNSMap,w=q.tagName==J;if(w||q.tagName&&q.tagName.toLowerCase()==J.toLowerCase()){e.endElement(q.uri,q.localName,J);if(r)for(var G in r)e.endPrefixMapping(G);w||b.fatalError("end tag name: "+J+" is not match the current start tagName:"+q.tagName)}else c.push(q);m++;break;case "?":d&&p(u);m=Vj(n,u,e);break;case "!":d&&p(u);m=Wj(n,u,e,b);break;default:d&&p(u);var H=new ug,x=c[c.length-1].currentNSMap;m=Xj(n,u,H,x,t,b);var kc=H.length;!H.closed&&Yj(n,
m,H.tagName,h)&&(H.closed=!0,f.nbsp||b.warning("unclosed xml attribute"));if(d&&kc){for(var A=wg(d,{}),C=0;C<kc;C++){var Qc=H[C];p(Qc.offset);Qc.locator=wg(d,{})}e.locator=A;xg(H,e,x)&&c.push(H);e.locator=d}else xg(H,e,x)&&c.push(H);lc.isHTML(H.uri)&&!H.closed?m=ak(n,m,H.tagName,t,e):m++}}catch(de){if(de instanceof Jb)throw de;b.error("element parse error: "+de);m=-1}m>g?g=m:y(Math.max(u,g)+1)}function Xj(n,c,f,e,b,
t)for(var p,a,k=++c,l=0;;){var d=n.charAt(k);switch(d){case "\x3d":if(1===l)p=n.slice(c,k),l=3;else if(2===l)l=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===l||1===l)if(1===l&&(t.warning('attribute value must after "\x3d"'),p=n.slice(c,k)),c=k+1,k=n.indexOf(d,c),0<k)a=n.slice(c,k).replace(/&#?\w+;/g,b),y(p,a,c-1),l=5;else throw Error("attribute value no end '"+
d+"' match");else if(4==l)a=n.slice(c,k).replace(/&#?\w+;/g,b),y(p,a,c),t.warning('attribute "'+p+'" missed start quot('+d+")!!"),c=k+1,l=5;else throw Error('attribute value must after "\x3d"');break;case "/":switch(l){case 0:f.setTagName(n.slice(c,k));case 5:case 6:case 7:l=7,f.closed=!0;case 4:case 1:case 2:break;default:throw Error("attribute invalid close char('/')");}break;case "":return t.error("unexpected end of input"),0==l&&f.setTagName(n.slice(c,k)),k;case "\x3e":switch(l){case 0:f.setTagName(n.slice(c,
k));case 5:case 6:case 7:break;case 4:case 1:a=n.slice(c,k),"/"===a.slice(-1)&&(f.closed=!0,a=a.slice(0,-1));case 2:2===l&&(a=p);4==l?(t.warning('attribute "'+a+'" missed quot(")!'),y(p,a.replace(/&#?\w+;/g,b),c)):(lc.isHTML(e[""])&&a.match(/^(?:disabled|checked|selected)$/i)||t.warning('attribute "'+a+'" missed value!! "'+a+'" instead!!'),y(a,a,c));break;case 3:throw Error("attribute value missed!!");}return k;case "\u0080":d=" ";default:if(" ">=d)switch(l){case 0:f.setTagName(n.slice(c,k));l=6;
break;case 1:p=n.slice(c,k);l=2;break;case 4:a=n.slice(c,k).replace(/&#?\w+;/g,b),t.warning('attribute "'+a+'" missed quot(")!!'),y(p,a,c);case 5:l=6}else switch(l){case 2:f.tagName;lc.isHTML(e[""])&&p.match(/^(?:disabled|checked|selected)$/i)||t.warning('attribute "'+p+'" missed value!! "'+p+'" instead2!!');y(p,p,c);c=k;l=1;break;case 5:t.warning('attribute space is required"'+p+'"!!');case 6:l=1;c=k;break;case 3:l=4;c=k;break;case 7:throw Error("elements closed character '/' and '\x3e' must be connected to");
}}k++}}function xg(n,c,f){for(var e=n.tagName,b=null,t=n.length;t--;){var y=n[t],p=y.qName,a=y.value,k=p.indexOf(":");if(0<k){var l=y.prefix=p.slice(0,k);k=p.slice(k+1);l="xmlns"===l&&k}else k=p,l="xmlns"===p&&"";y.localName=k;if(!1!==l){if(null==b){b={};k=void 0;p=f;var d=f={};for(k in p)d[k]=p[k]}f[l]=b[l]=a;y.uri=lc.XMLNS;c.startPrefixMapping(l,a)}}for(t=n.length;t--;)if(y=n[t],l=y.prefix)"xml"===l&&(y.uri=lc.XML),"xmlns"!==l&&(y.uri=f[l||""]);k=e.indexOf(":");0<k?(l=n.prefix=e.slice(0,k),k=n.localName=
e.slice(k+1)):(l=null,k=n.localName=e);t=n.uri=f[l||""];c.startElement(t,k,e,n);if(n.closed){if(c.endElement(t,k,e),b)for(l in b)c.endPrefixMapping(l)}else return n.currentNSMap=f,n.localNSMap=b,!0}function ak(n,c,f,e,b){if(/^(?:script|textarea)$/i.test(f)){var t=n.indexOf("\x3c/"+f+"\x3e",c);n=n.substring(c+1,t);if(/[&<]/.test(n)){if(/^script$/i.test(f))return b.characters(n,0,n.length),t;n=n.replace(/&#?\w+;/g,e);b.characters(n,0,n.length);return t}}return c+1}function Yj(n,c,f,e){var b=e[f];null==
b&&(b=n.lastIndexOf("\x3c/"+f+"\x3e"),b<c&&(b=n.lastIndexOf("\x3c/"+f)),e[f]=b);return b<c}function Wj(n,c,f,e){switch(n.charAt(c+2)){case "-":if("-"===n.charAt(c+3)){var b=n.indexOf("--\x3e",c+4);if(b>c)return f.comment(n,c+4,b-c-4),b+3;e.error("Unclosed comment")}break;default:if("CDATA["==n.substr(c+3,6))return b=n.indexOf("]]\x3e",c+9),f.startCDATA(),f.characters(n,c+9,b-c-9),f.endCDATA(),b+3;a:{e=[];b=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;b.lastIndex=c;for(b.exec(n);c=b.exec(n);)if(e.push(c),
c[1]){b=e;break a}b=void 0}var t=b.length;if(1<t&&/!doctype/i.test(b[0][0]))return n=b[1][0],e=c=!1,3<t&&(/^public$/i.test(b[2][0])?(c=b[3][0],e=4<t&&b[4][0]):/^system$/i.test(b[2][0])&&(e=b[3][0])),b=b[t-1],f.startDTD(n,c,e),f.endDTD(),b.index+b[0].length}return-1}function Vj(n,c,f){var e=n.indexOf("?\x3e",c);return e&&(n=n.substring(c,e).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(n[0].length,f.processingInstruction(n[1],n[2]),e+2):-1}function ug(){this.attributeNames={}function bk(n,c,f)if(!n){if(c instanceof Rc)return c;n=c}var b={},t=n instanceof Function;f=f||{};e("warning");e("error");e("fatalError");return btion nb(){}for(var ob={},fb,Ag=function(n,c){c=fb(n).indexOf(c);if(-1>=c)return!1;ob[n]=ob[n].slice();ob[n].splice(c,1);return!0},Ec={prefixed:!0},Tc=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),
"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror -moz-full-screen".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError -ms-fullscreen".split(" ")],Bg=Tc[0],mc,Uc=0;Uc<Tc.length;Uc++)if(Tc[Uc][1]in
document){mc=Tc[Uc];break}if(mc){for(var Vc=0;Vc<mc.length;Vc++)Ec[Bg[Vc]]=mc[Vc];Ec.prefixed=mc[0]!==Bg[0]}var Ba=[],tj=function(n,c){return function(f,e,b){e=c.levels[e];var t=new RegExp("^("+e+")$");"log"!==f&&b.unshift(f.toUpperCase()+":");b.unshift(n+":");if(Ba){Ba.push([].concat(b));var y=Ba.length-1E3;Ba.splice(0,0<y?y:0)}if(window.console&&((y=window.console[f])||"debug"!==f||(y=window.console.info||window.console.log),y&&e&&t.test(f)))y[Array.isArray(b)?"apply":"call"](window.console,b)}},
P=m("VIDEOJS"),Cg=P.createLogger,Wc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Qa=r(function(n){function c(){n.exports=c=Object.assign|;return c.apply(this,arguments)}n.exports=c}),uj=Object.prototype.toString,Af,pa=window.navigator&&window.navigator.userAgent||"",Dg=/AppleWebKit\/([\d.]+)/i.exec(pa),ck=Dg?parseFloat(Dg.pop()):null,Eg=/iPod/i.test(pa),dk(),gb=/Android/i.test(pa),fe(),Fg=gb&&5>fe&&537>ck,Gg=/Firefox/i.test(pa),nc=/Edg/i.test(pa),hb=!nc&&
(/Chrome/i.test(pa)||/CriOS/i.test(pa)),Hg(),oc=function(){var n=/MSIE\s(\d+)\.\d/.exec(pa);n=n&&parseFloat(n[1]);!n&&/Trident\/7.0/i.test(pa)&&/rv:11.0/.test(pa)&&(n=11);return n}(),ge=/Safari/i.test(pa)&&!hb&&!gb&&!nc,Ig=/Windows/i.test(pa),Lb=!(!C()||!("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),he=/iPad/i.test(pa)||ge&&Lb&&
!/iPhone/i.test(pa),ie=/iPhone/i.test(pa)&&!he,sa=ie||he||Eg,Xc=(ge||sa)&&!hb,ek=Object.freeze({__proto__:null,IS_IPOD:Eg,IOS_VERSION:dk,IS_ANDROID:gb,ANDROID_VERSION:fe,IS_NATIVE_ANDROID:Fg,IS_FIREFOX:Gg,IS_EDGE:nc,IS_CHROME:hb,CHROME_VERSION:Hg,IE_VERSION:oc,IS_SAFARI:ge,IS_WINDOWS:Ig,TOUCH_ENABLED:Lb,IS_IPAD:he,IS_IPHONE:ie,IS_IOS:sa,IS_ANY_SAFARI:Xc}),Na=L("querySelector"),Jg=L("querySelectorAll"),Kg=Object.freeze({__proto__:null,isReal:C,isEl:N,isInFrame:Fb,createEl:Q,textContent:ub,prependTo:vb,
hasClass:wb,addClass:ca,removeClass:Gb,toggleClass:Bf,setAttributes:Cf,getAttributes:Va,getAttribute:function(n,c){return n.getAttribute(c)},setAttribute,removeAttribute,blockTextSelection:Df,unblockTextSelection:Ef,getBoundingClientRect:Hb,findPosition:ac,getPointerPosition:Fc,isTextNode:Ff,emptyEl:Ed,normalizeContent:Gf,appendContent:Dd,insertContent:Hf,isSingleLeftClick:bc,$:Na,$$:Jg}),If=!1,Gd,vj=function(){if(!1!==Gd.options.autoSetup){var n=
Array.prototype.slice.call(document.getElementsByTagName("video")),c=Array.prototype.slice.call(document.getElementsByTagName("audio")),f=Array.prototype.slice.call(document.getElementsByTagName("video-js"));if((n=n.concat(c,f))&&0<n.length)for(c=0,f=n.length;c<f;c++){var e=n[c];if(e&&e.getAttribute)void 0===e.player&&null!==e.getAttribute("data-setup")&&Gd(e);else{Fd(1);break}}else If||Fd(1)}};C()&&("complete"===document.readyState?Hd():window.addEventListener("load",Hd));var Lg,Mg,bb=3,Ng;window.WeakMap||(Ng=function()var c=n.prototype;c.set=function(c,e){var b=c[this.vdata]||bb++;c[this.vdata]||(c[this.vdata]=b);this.data[b]=e;return this};c.get;c.has;c["delete"];return n}());var Ca=window.WeakMap?new WeakMap:new Ng,Yc,wj=function(){if("boolean"!==typeof Yc){Yc=!1;try{var n=Object.defineProperty({},"passive",{get:function(){Yc=!0}});window.addEventListener("test",null,n);window.removeEventListener("test",null,n)}catch(c){}}return Yc},xj=["touchstart","touchmove"],fk=Object.freeze({__proto__:null,fixEvent:Gc,on:Da,
off:T,trigger:cb,one:Hc,any:Kf}),S=function(n,c,f){c.guid||(c.guid=bb++);n=c.bind(n);n.guid=f?f+"_"+c.guid:c.guid;return n},ib,gk=function(n,c,f,e){void 0===e&&(e=window);var b,t=function(){var t=this,p=arguments,a;!b&&f&&n.apply(t,p);e.clearTimeout(b);b=e.setTimeout(a,c)};t.cancel;return t},
ka=function(){};ka.prototype.allowedEvents_={};ka.prototype.on=function(n,c){var f=this.addEventListener;this.addEventListener=function(){};Da(this,n,c);this.addEventListener=f};ka.prototype.addEventListener=ka.prototype.on;ka.prototype.off;ka.prototype.removeEventListener=ka.prototype.off;ka.prototype.one=function(n,c){var f=this.addEventListener;this.addEventListener=function(){};Hc(this,n,c);this.addEventListener=f};ka.prototype.any;ka.prototype.trigger=function(n){var c=n.type||n;"string"===typeof n&&(n={type:c});n=Gc(n);if(this.allowedEvents_[c]&&this["on"+c])this["on"+c](n);cb(this,n)};ka.prototype.dispatchEvent=ka.prototype.trigger;var pc;ka.prototype.queueTrigger=function(n){var c=this;pc||(pc=new Map);var f=n.type||n,e=pc.get(this);e||(e=new Map,pc.set(this,e));var b=e.get(f);e["delete"](f);window.clearTimeout(b);b=window.setTimeout(function(){0===
e.size&&(e=null,pc["delete"](c));c.trigger(n)},0);e.set(f,b)};var Zc,db,hk,je,$c,Og,Pg=function(n,c,f){if("function"!==typeof n)throw Error("Invalid listener for "+Zc(c)+"#"+f+"; must be a function.");},ke=function(n,c,f){var e=3>c.length||c[0]===n||c[0]===n.eventBusEl_;
if(e){var b=n.eventBusEl_;3<=c.length&&c.shift();var t=c[0];c=c[1]}else b=c[0],t=c[1],c=c[2];$c(b,n,f);Og(t,n,f);Pg(c,n,f);c=S(n,c);return{isTargetingSelf:e,target:b,type:t,listener:c}},Wa=function(n,c,f,e){$c(n,n,c);if(n.nodeName)fk[c](n,f,e);else n[c](f,e)},yj={on:function(){for(var n=this,c=arguments.length,f=Array(c),e=0;e<c;e++)f[e]=arguments[e];c=ke(this,f,"on");f=c.isTargetingSelf;var b=c.target,t=c.type,y=c.listener;Wa(b,"on",t,y);if(!f){var p;p.guid=y.guid;
c=function(){return n.off("dispose",p)};c.guid=y.guid;Wa(this,"on","dispose",p);Wa(b,"on","dispose",c)}},one:function(){for(var n=this,c=arguments.length,f=Array(c),e=0;e<c;e++)f[e]=arguments[e];c=ke(this,f,"one");var b=c.target,t=c.type,y=c.listener;c.isTargetingSelf?Wa(b,"one",t,y):(c=function a(){n.off(b,t,a);for(var e=arguments.length,c=Array(e),f=0;f<e;f++)c[f]=arguments[f];y.apply(null,c)},c.guid=y.guid,Wa(b,"one",t,c))},any:function(){for(var n=this,c=arguments.length,f=Array(c),e=0;e<c;e++)f[e]=
arguments[e];c=ke(this,f,"any");var b=c.target,t=c.type,y=c.listener;c.isTargetingSelf?Wa(b,"any",t,y):(c,c.guid=y.guid,Wa(b,"any",t,c))},off,trigger:function(n,c){$c(this.eventBusEl_,
this,"trigger");if(!je(n&&"string"!==typeof n?n.type:n)){var f="Invalid event type for "+Zc(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(n)(this.log||P).error(f);else throw Error(f);}return cb(this.eventBusEl_,n,c)}},zj={state:{},setState:function(n){var c=this;"function"===typeof n&&(n=n());var f;x(n,function(e,b){c.state[b]!==e&&(f=f||{},f[b]={from:c.state[b],to:e});c.state[b]=e});f&&db(this)&&this.trigger({changes:f,type:"statechanged"});
return f}},ad=function(n){return"string"!==typeof n?n:n.replace(/./,function(c){return c.toLowerCase()})},da=function(n){return"string"!==typeof n?n:n.replace(/./,function(c){return c.toUpperCase()})},ik,jk=function(){function n(){this.map_={}}var c=n.prototype;c.has=function(c){return c in this.map_};c["delete"]=function(c){var e=this.has(c);delete this.map_[c];return e};c.set;c.forEach;return n}(),kk=window.Map?window.Map:jk,lk=function(){function n(){this.set_={}}var c=n.prototype;c.has=function(c){return c in this.set_};c["delete"];c.add;c.forEach;return n}(),le=window.Set?window.Set:lk,M=r(function(n,c){function f(c){if(c&&"object"===typeof c){var f=c.which||c.keyCode||c.charCode;f&&(c=f)}if("number"===
typeof c)return t[c];c=String(c);if((f=e[c.toLowerCase()])||(f=b[c.toLowerCase()]))return f;if(1===c.length)return c.charCodeAt(0)}f.isEventKey=function(c,f){if(c&&"object"===typeof c){c=c.which||c.keyCode||c.charCode;if(null===c||void 0===c)return!1;if("string"===typeof f){var t=e[f.toLowerCase()];if(t||(t=b[f.toLowerCase()]))return t===c}else if("number"===typeof f)return f===c;return!1}};c=n.exports=f;var e=c.code=c.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,
esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"\x3d":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},b=c.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,
"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(n=97;123>n;n++)e[String.fromCharCode(n)]=n-32;for(n=48;58>n;n++)e[n-48]=n;for(n=1;13>n;n++)e["f"+n]=n+111;for(n=0;10>n;n++)e["numpad "+n]=n+96;var t=c.names=c.title={};for(n in e)t[e[n]]=n;for(var y in b)e[y]=b[y]});M.code;M.codes;M.aliases;M.names;M.title;var A=function(){function n(c,e,b){var f=this;this.player_=!c&&this.play?c=this:c;this.isDisposed_=!1;this.parentComponent_=null;this.options_=
U({},this.options_);e=this.options_=U(this.options_,e);this.id_=e.id||e.el&&e.el.id;this.id_||(this.id_=(c&&c.id&&c.id()||"no_player")+"_component_"+bb++);this.name_=e.name||null;e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl());e.className&&this.el_&&e.className.split(" ").forEach(function(b){return f.addClass(b)});!1!==e.evented&&(Jd(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange));
Lf(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=new le;this.setIntervalIds_=new le;this.rafIds_=new le;this.namedRafs_=new kk;this.clearingTimersOnDispose_=!1;!1!==e.initChildren&&this.initChildren();this.ready(b);!1!==e.reportTouchActivity&&this.enableTouchActivity()}var c=n.prototype;c.dispose=function(c){void 0===c&&(c={});if(!this.isDisposed_){this.readyQueue_&&(this.readyQueue_.length=0);this.trigger({type:"dispose",bubbles:!1});
this.isDisposed_=!0;if(this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&(c.restoreEl?this.el_.parentNode.replaceChild(c.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null);this.player_=null}};c.isDisposed;c.player=function(){return this.player_};c.options=function(c){return c?
this.options_=U(this.options_,c):this.options_};c.el=function(){return this.el_};c.createEl;c.localize=function(c,e,b){void 0===b&&(b=c);var f=this.player_.language&&this.player_.language(),y=this.player_.languages&&this.player_.languages(),p=y&&y[f];f=f&&f.split("-")[0];y=y&&y[f];p&&p[c]?b=p[c]:y&&y[c]&&(b=y[c]);e&&(b=b.replace(/\{(\d+)\}/g,function(b,c){var f=c=e[c-1];"undefined"===typeof c&&(f=b);return f}));return b};c.handleLanguagechange=function(){};c.contentEl=;c.id=function(){return this.id_};c.name=function(){return this.name_};c.children=function(){return this.children_};c.getChildById=function(c){return this.childIndex_[c]};c.getChild;c.getDescendant=function(){for(var c=arguments.length,e=Array(c),b=0;b<c;b++)e[b]=arguments[b];e=e.reduce(function(b,e){return b.concat(e)},[]);c=this;for(b=0;b<e.length;b++)if(c=c.getChild(e[b]),!c||!c.getChild)return;return c};
c.addChild=function(c,e,b){void 0===e&&(e={});void 0===b&&(b=this.children_.length);if("string"===typeof c){var f=da(c);c=e.componentClass||f;e.name=f;var y=n.getComponent(c);if(!y)throw Error("Component "+c+" does not exist");if("function"!==typeof y)return null;e=new y(this.player_||this,e)}else e=c;e.parentComponent_&&e.parentComponent_.removeChild(e);this.children_.splice(b,0,e);e.parentComponent_=this;"function"===typeof e.id&&(this.childIndex_[e.id()]=e);if(f=f||e.name&&da(e.name()))this.childNameIndex_[f]=
e,this.childNameIndex_[ad(f)]=e;"function"===typeof e.el&&e.el()&&(f=null,this.children_[b+1]&&(this.children_[b+1].el_?f=this.children_[b+1].el_:N(this.children_[b+1])&&(f=this.children_[b+1])),this.contentEl().insertBefore(e.el(),f));return e};c.removeChild=function(c){"string"===typeof c&&(c=this.getChild(c));if(c&&this.children_){for(var e=!1,b=this.children_.length-1;0<=b;b--)if(this.children_[b]===c){e=!0;this.children_.splice(b,1);break}e&&(c.parentComponent_=null,this.childIndex_[c.id()]=
null,this.childNameIndex_[da(c.name())]=null,this.childNameIndex_[ad(c.name())]=null,(e=c.el())&&e.parentNode===this.contentEl()&&this.contentEl().removeChild(c.el()))}};c.initChildren=function(){var c=this,e=this.options_.children;if(e){var b=this.options_,t=n.getComponent("Tech");var y=Array.isArray(e)?e:Object.keys(e);y.concat(Object.keys(this.options_).filter)).map(function(b){if("string"===typeof b){var f=b;b=
e[f]||c.options_[f]||{}}else f=b.name;return{name:f,opts:b}}).filter).forEach(function(e){var f=e.name;e=e.opts;void 0!==b[f]&&(e=b[f]);!1!==e&&(!0===e&&(e={}),e.playerOptions=c.options_.playerOptions,(e=c.addChild(f,e))&&(c[f]=e))})}};c.buildCSSClass=function(){return""};c.ready=function(c,e){void 0===e&&(e=!1);c&&(this.isReady_?e?c.call(this):this.setTimeout(c,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(c)))};
c.triggerReady;c.$=function(c,e){return Na(c,e||this.contentEl())};c.$$;c.hasClass;c.addClass=function(c){ca(this.el_,c)};c.removeClass=function(c){Gb(this.el_,c)};c.toggleClass;c.show=function(){this.removeClass("vjs-hidden")};
c.hide=function(){this.addClass("vjs-hidden")};c.lockShowing=function(){this.addClass("vjs-lock-showing")};c.unlockShowing=function(){this.removeClass("vjs-lock-showing")};c.getAttribute=function(c){return this.el_.getAttribute(c)};c.setAttribute;c.removeAttribute=function(c){this.el_.removeAttribute(c)};c.width=function(c,e){return this.dimension("width",c,e)};c.height;c.dimensions;c.dimension=function(c,e,b){if(void 0!==e){if(null===e||e!==e)e=0;-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[c]=e:this.el_.style[c]="auto"===e?"":e+"px";b||this.trigger("componentresize")}else{if(!this.el_)return 0;e=this.el_.style[c];b=e.indexOf("px");return-1!==b?parseInt(e.slice(0,b),10):parseInt(this.el_["offset"+da(c)],10)}};c.currentDimension=function(c){if("width"!==c&&"height"!==c)throw Error("currentDimension only accepts width or height value");
var e=R(this.el_,c);e=parseFloat(e);if(0===e||isNaN(e))c="offset"+da(c),e=this.el_[c];return e};c.currentDimensions;c.currentWidth=function(){return this.currentDimension("width")};c.currentHeight=function(){return this.currentDimension("height")};c.focus=function(){this.el_.focus()};c.blur=function(){this.el_.blur()};c.handleKeyDown;c.handleKeyPress;c.emitTapEvents=function(){var c=0,e=null,b;this.on("touchstart");this.on("touchmove");var t;this.on("touchleave",t);this.on("touchcancel",
t);this.on("touchend",function(f){e=null;!0===b&&200>window.performance.now()-c&&(f.preventDefault(),this.trigger("tap"))})};c.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var c=S(this.player(),this.player().reportUserActivity),e;this.on("touchstart",function(){c();this.clearInterval(e);e=this.setInterval(c,250)});var b=function(b){c();this.clearInterval(e)};this.on("touchmove",c);this.on("touchend",b);this.on("touchcancel",b)}};c.setTimeout=function(c,e){var b=
this;c=S(this,c);this.clearTimersOnDispose_();var f=window.setTimeout(function(){if(b.setTimeoutIds_.has(f))b.setTimeoutIds_["delete"](f);c()},e);this.setTimeoutIds_.add(f);return f};c.clearTimeout=function(c){this.setTimeoutIds_.has(c)&&(this.setTimeoutIds_["delete"](c),window.clearTimeout(c));return c};c.setInterval=function(c,e){c=S(this,c);this.clearTimersOnDispose_();c=window.setInterval(c,e);this.setIntervalIds_.add(c);return c};c.clearInterval=function(c){this.setIntervalIds_.has(c)&&(this.setIntervalIds_["delete"](c),
window.clearInterval(c));return c};c.requestAnimationFrame=function(c){var e=this;if(!this.supportsRaf_)return this.setTimeout(c,1E3/60);this.clearTimersOnDispose_();c=S(this,c);var b=window.requestAnimationFrame(function(){if(e.rafIds_.has(b))e.rafIds_["delete"](b);c()});this.rafIds_.add(b);return b};c.requestNamedAnimationFrame=function(c,e){var b=this;if(!this.namedRafs_.has(c)){this.clearTimersOnDispose_();e=S(this,e);var f=this.requestAnimationFrame(function(){e();if(b.namedRafs_.has(c))b.namedRafs_["delete"](c)});
this.namedRafs_.set(c,f);return c}};c.cancelNamedAnimationFrame;c.cancelAnimationFrame=function(c){if(!this.supportsRaf_)return this.clearTimeout(c);this.rafIds_.has(c)&&(this.rafIds_["delete"](c),window.cancelAnimationFrame(c));return c};c.clearTimersOnDispose_=function(){var c=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_",
"cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var b=e[1];c[e[0]].forEach(function(e,f){return c[b](f)})});c.clearingTimersOnDispose_=!1}))};n.registerComponent=function(c,e){if("string"!==typeof c||!c)throw Error('Illegal component name, "'+c+'"; must be a non-empty string.');var b=n.getComponent("Tech");b=b&&b.isTech(e);var f=n===e||n.prototype.isPrototypeOf(e.prototype);if(b||!f)throw Error('Illegal component, "'+
c+'"; '+(b?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");c=da(c);n.components_||(n.components_={});b=n.getComponent("Player");if("Player"===c&&b&&b.players){var y=b.players;b=Object.keys(y);if(y&&0<b.length&&b.map(function(b){return y[b]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}n.components_[c]=e;return n.components_[ad(c)]=e};n.getComponent;
return n}();A.prototype.supportsRaf_="function"===typeof window.requestAnimationFrame&&"function"===typeof window.cancelAnimationFrame;A.registerComponent("Component",A);var O,F=function(n,c){n.prototype=Object.create(c.prototype);n.prototype.constructor=n;n.__proto__=c};ta.prototype.code=0;ta.prototype.message="";ta.prototype.status=null;ta.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
ta.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Bb=0;Bb<ta.errorTypes.length;Bb++)ta[ta.errorTypes[Bb]]=
Bb,ta.prototype[ta.errorTypes[Bb]]=Bb;var me=function(n){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce,{cues:n.cues&&Array.prototype.map.call(n.cues,function(c){return{startTime:c.startTime,endTime:c.endTime,text:c.text,id:c.id}})})},Qg={textTracksToJson,jsonToTextTracks,trackToJson_:me},Nb=function(n){function c(c,b){var e=n.call(this,c,b)||this;e.handleKeyDown_=function(b){return e.handleKeyDown(b)};e.close_=function(b){return e.close(b)};e.opened_=e.hasBeenOpened_=
e.hasBeenFilled_=!1;e.closeable(!e.options_.uncloseable);e.content(e.options_.content);e.contentEl_=Q("div",{className:"vjs-modal-dialog-content"},{role:"document"});e.descEl_=Q("p",{className:"vjs-modal-dialog-description vjs-control-text",id:e.el().getAttribute("aria-describedby")});ub(e.descEl_,e.description());e.el_.appendChild(e.descEl_);e.el_.appendChild(e.contentEl_);return e}F(c,n);var f=c.prototype;f.createEl;f.dispose;f.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+n.prototype.buildCSSClass.call(this)};f.label;f.description;f.open;f.opened=function(c){if("boolean"===typeof c)this[c?"open":"close"]();return this.opened_};f.close;f.closeable=function(c){if("boolean"===typeof c){c=this.closeable_=!!c;var b=this.getChild("closeButton");if(c&&!b){var e=this.contentEl_;this.contentEl_=this.el_;b=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=e;this.on(b,"close",this.close_)}!c&&b&&(this.off(b,"close",this.close_),this.removeChild(b),b.dispose())}return this.closeable_};f.fill;
f.fillWith;f.empty;f.content=function(c){"undefined"!==typeof c&&(this.content_=c);return this.content_};f.conditionalFocus_=function(){var c=
document.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null;if(b.contains(c)||b===c)this.previouslyActiveEl_=c,this.focus()};f.conditionalBlur_;f.handleKeyDown=function(c){c.stopPropagation();if(M.isEventKey(c,"Escape")&&this.closeable())c.preventDefault(),this.close();else if(M.isEventKey(c,"Tab")){for(var b=this.focusableEls_(),e=this.el_.querySelector(":focus"),f,p=0;p<b.length;p++)if(e===
b[p]){f=p;break}document.activeElement===this.el_&&(f=0);c.shiftKey&&0===f?(b[b.length-1].focus(),c.preventDefault()):c.shiftKey||f!==b.length-1||(b[0].focus(),c.preventDefault())}};f.focusableEls_;return c}(A);Nb.prototype.options_={pauseOnOpen:!0,temporary:!0};A.registerComponent("ModalDialog",Nb);var Ob=function(n){function c(c){void 0===c&&(c=[]);var b=n.call(this)||this;b.tracks_=[];Object.defineProperty(O(b),
"length",{get:function(){return this.tracks_.length}});for(var e=0;e<c.length;e++)b.addTrack(c[e]);return b}F(c,n);var f=c.prototype;f.addTrack=function(c){var b=this,e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}});-1===this.tracks_.indexOf(c)&&(this.tracks_.push(c),this.trigger({track:c,type:"addtrack",target:this}));c.labelchange_;db(c)&&c.addEventListener("labelchange",c.labelchange_)};
f.removeTrack=function(c){for(var b,e=0,f=this.length;e<f;e++)if(this[e]===c){b=this[e];b.off&&b.off();this.tracks_.splice(e,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})};f.getTrackById=function(c){for(var b=null,e=0,f=this.length;e<f;e++){var p=this[e];if(p.id===c){b=p;break}}return b};return c}(ka);Ob.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var mk in Ob.prototype.allowedEvents_)Ob.prototype["on"+
mk]=null;var ne=function(n,c){for(var f=0;f<n.length;f++)Object.keys(n[f]).length&&c.id!==n[f].id&&(n[f].enabled=!1)},nk=function(n){function c(c){void 0===c&&(c=[]);for(var b=c.length-1;0<=b;b--)if(c[b].enabled){ne(c,c[b]);break}c=n.call(this,c)||this;c.changing_=!1;return c}F(c,n);var f=c.prototype;f.addTrack=function(c){var b=this;c.enabled&&ne(this,c);n.prototype.addTrack.call(this,c);c.addEventListener&&(c.enabledChange_=function(){b.changing_||(b.changing_=!0,ne(b,c),b.changing_=!1,b.trigger("change"))},
c.addEventListener("enabledchange",c.enabledChange_))};f.removeTrack=function(c){n.prototype.removeTrack.call(this,c);c.removeEventListener&&c.enabledChange_&&(c.removeEventListener("enabledchange",c.enabledChange_),c.enabledChange_=null)};return c}(Ob),oe,ok=function(n){function c(c){void 0===c&&(c=[]);for(var b=c.length-1;0<=b;b--)if(c[b].selected){oe(c,c[b]);break}c=n.call(this,c)||this;c.changing_=
!1;Object.defineProperty(O(c),"selectedIndex",{get,set:function(){}});return c}F(c,n);var f=c.prototype;f.addTrack=function(c){var b=this;c.selected&&oe(this,c);n.prototype.addTrack.call(this,c);c.addEventListener&&(c.selectedChange_,c.addEventListener("selectedchange",c.selectedChange_))};f.removeTrack=function(c){n.prototype.removeTrack.call(this,
c);c.removeEventListener&&c.selectedChange_&&(c.removeEventListener("selectedchange",c.selectedChange_),c.selectedChange_=null)};return c}(Ob),Rg=function(n){function c(){return n.apply(this,arguments)||this}F(c,n);var f=c.prototype;f.addTrack;f.removeTrack=function(c){n.prototype.removeTrack.call(this,c);c.removeEventListener&&(this.queueChange_&&c.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&c.removeEventListener("modechange",this.triggerSelectedlanguagechange_))};return c}(Ob),pk=function()var c=n.prototype;c.addTrackElement_;c.getTrackElementByTrack_;c.removeTrackElement_=function(c){for(var e=0,b=this.trackElements_.length;e<b;e++)if(c===this.trackElements_[e]){this.trackElements_[e].track&&"function"===typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off();"function"===typeof this.trackElements_[e].off&&this.trackElements_[e].off();this.trackElements_.splice(e,1);break}};return n}(),Sg=function()
var c=n.prototype;c.setCues_;c.getCueById;return n}(),qk={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},rk=
{alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},sk={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Tg={disabled:"disabled",hidden:"hidden",showing:"showing"},pe=function(n){function c(c){void 0===c&&(c={});var e=n.call(this)||this;var b={id:c.id||"vjs_track_"+bb++,kind:c.kind||"",language:c.language||""},f=c.label||"";c;for(var y in b)c(y);Object.defineProperty(O(e),"label",{get:function(){return f},set});return e}F(c,n);return c}(ka),qe=function(n){var c="protocol hostname port pathname search hash host".split(" "),f=document.createElement("a");f.href=n;n={};for(var e=0;e<c.length;e++)n[c[e]]=f[c[e]];"http:"===n.protocol&&(n.host=n.host.replace(/:80$/,""));"https:"===n.protocol&&(n.host=n.host.replace(/:443$/,
""));n.protocol||(n.protocol=window.location.protocol);n.host||(n.host=window.location.host);return n},Ug,re=function(n){return"string"===typeof n&&(n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n))?n.pop().toLowerCase():""},bd=function(n,c){void 0===c&&(c=window.location);n=qe(n);return(":"===n.protocol?c.protocol:n.protocol)+n.host!==c.protocol+c.host},tk=Object.freeze({__proto__:null,
parseUrl:qe,getAbsoluteURL:Ug,getFileExtension:re,isCrossOrigin:bd}),Sa="undefined"!==typeof window?window:"undefined"!==typeof Wc?Wc:"undefined"!==typeof self?self:{},Cj=Object.prototype.toString;Ea.httpHandler=function(n,c){void 0===c&&(c=!1);return function(f,e,b){if(f)n(f);else if(400<=e.statusCode&&599>=e.statusCode){f=b;if(c)if(Sa.TextDecoder){e=Aj(e.headers&&e.headers["content-type"]);try{f=(new TextDecoder(e)).decode(b)}catch(t){}}else f=String.fromCharCode.apply(null,new Uint8Array(b));n({cause:f})}else n(null,
b)}};var Dj=function(n){var c={};if(!n)return c;n.trim().split("\n").forEach(function(f){var e=f.indexOf(":"),b=f.slice(0,e).trim().toLowerCase();f=f.slice(e+1).trim();"undefined"===typeof c[b]?c[b]=f:Array.isArray(c[b])?c[b].push(f):c[b]=[c[b],f]});return c};Ea.XMLHttpRequest=Sa.XMLHttpRequest||Ej;Ea.XDomainRequest="withCredentials"in new Ea.XMLHttpRequest?Ea.XMLHttpRequest:Sa.XDomainRequest;)("get put post patch head delete".split(" "));Ea["default"]=Ea;var Vg,Wg=function(n,c){var f={uri:n};if(n=bd(n))f.cors=n;if(n="use-credentials"===c.tech_.crossOrigin())f.withCredentials=n;Ea(f,S(this,function(e,b,f){if(e)return P.error(e,b);c.loaded_=!0;"function"!==typeof window.WebVTT?c.tech_&&c.tech_.any(["vttjsloaded","vttjserror"],function(b){if("vttjserror"===b.type)P.error("vttjs failed to load, stopping trying to process "+c.src);else return Vg(f,c)}):Vg(f,c)}))},qc=function(n){function c(c){void 0===
c&&(c={});if(!c.tech)throw Error("A tech was not provided.");c=U(c,{kind:sk[c.kind]||"subtitles",language:c.language||c.srclang||""});var b=Tg[c.mode]||"disabled",e=c["default"];if("metadata"===c.kind||"chapters"===c.kind)b="hidden";var f=n.call(this,c)||this;f.tech_=c.tech;f.cues_=[];f.activeCues_=[];f.preload_=!1!==f.tech_.preloadTextTracks;var p=new Sg(f.cues_),a=new Sg(f.activeCues_),k=!1;f.timeupdateHandler=S(O(f));f.tech_.one("dispose",function(){f.stopTracking()});"disabled"!==b&&f.startTracking();Object.defineProperties(O(f),{"default":{get:function(){return e},set:function(){}},mode:{get:function(){return b},set},
cues:{get,set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return a;for(var b=this.tech_.currentTime(),c=[],e=0,f=this.cues.length;e<f;e++){var t=this.cues[e];t.startTime<=b&&t.endTime>=b?c.push(t):t.startTime===t.endTime&&t.startTime<=b&&t.startTime+.5>=b&&c.push(t)}k=!1;if(c.length!==this.activeCues_.length)k=!0;else for(b=0;b<c.length;b++)-1===this.activeCues_.indexOf(c[b])&&(k=!0);this.activeCues_=c;a.setCues_(this.activeCues_);
return a},set:function(){}}});c.src?(f.src=c.src,f.preload_||(f.loaded_=!0),(f.preload_||"subtitles"!==c.kind&&"captions"!==c.kind)&&Wg(f.src,O(f))):f.loaded_=!0;return f}F(c,n);var f=c.prototype;f.startTracking;f.stopTracking;f.addCue=function(c){var b=c;if(window.vttjs&&!(c instanceof window.vttjs.VTTCue)){b=new window.vttjs.VTTCue(c.startTime,
c.endTime,c.text);for(var e in c)e in b||(b[e]=c[e]);b.id=c.id;b.originalCue_=c}c=this.tech_.textTracks();for(e=0;e<c.length;e++)c[e]!==this&&c[e].removeCue(b);this.cues_.push(b);this.cues.setCues_(this.cues_)};f.removeCue;return c}(pe);qc.prototype.allowedEvents_={cuechange:"cuechange"};var Xg=function(n){function c(c){void 0===
c&&(c={});var e=U(c,{kind:rk[c.kind]||""});c=n.call(this,e)||this;var b=!1;Object.defineProperty(O(c),"enabled",{get:function(){return b},set:function(c){"boolean"===typeof c&&c!==b&&(b=c,this.trigger("enabledchange"))}});e.enabled&&(c.enabled=e.enabled);c.loaded_=!0;return c}F(c,n);return c}(pe),Yg=function(n){function c(c){void 0===c&&(c={});var e=U(c,{kind:qk[c.kind]||""});c=n.call(this,e)||this;var b=!1;Object.defineProperty(O(c),"selected",{get:function(){return b},set});e.selected&&(c.selected=e.selected);return c}F(c,n);return c}(pe),Pb=function(n){function c(c){void 0===c&&(c={});var e=n.call(this)||this;var b=new qc(c);e.kind=b.kind;e.src=b.src;e.srclang=b.language;e.label=b.label;e["default"]=b["default"];Object.defineProperties(O(e),{readyState:{get:function(){return f}},track:{get:function(){return b}}});var f=0;b.addEventListener("loadeddata",function(){f=2;e.trigger({type:"load",target:O(e)})});return e}
F(c,n);return c}(ka);Pb.prototype.allowedEvents_={load:"load"};Pb.NONE=0;Pb.LOADING=1;Pb.LOADED=2;Pb.ERROR=3;var Oa={audio:{ListClass:nk,TrackClass:Xg,capitalName:"Audio"},video:{ListClass:ok,TrackClass:Yg,capitalName:"Video"},text:{ListClass:Rg,TrackClass:qc,capitalName:"Text"}};Object.keys(Oa).forEach);var Qb={remoteText:{ListClass:Rg,TrackClass:qc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},
remoteTextEl:{ListClass:pk,TrackClass:Pb,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ga=Qa({},Oa,Qb);Qb.names=Object.keys(Qb);Oa.names=Object.keys(Oa);Ga.names=[].concat(Qb.names).concat(Oa.names);var uk={},Zg="undefined"!==typeof Wc?Wc:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var se=document;else(se=Zg["__GLOBAL_DOCUMENT_CACHE@4"])||(se=Zg["__GLOBAL_DOCUMENT_CACHE@4"]=uk);var $g=se,Md=Object.create||function()
return function(c){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");n.prototype=c;return new n}}();ya.prototype=Md(Error.prototype);ya.prototype.constructor=ya;ya.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};dc.prototype={set,get,has,alt,integer,percent};var Nd=$g.createElement&&$g.createElement("textarea"),Gj={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Tf={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",
yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Hj={v:"title",lang:"lang"},Sf={rt:"ruby"},Uf=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,
2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],
[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],
[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Od.prototype.applyStyles;Od.prototype.formatStyle;Ic.prototype=Md(Od.prototype);Ic.prototype.constructor=Ic;Fa.prototype.move=function(n,c){c=void 0!==c?c:this.lineHeight;switch(n){case "+x":this.left+=c;this.right+=c;break;case "-x":this.left-=c;this.right-=c;break;case "+y":this.top+=
c;this.bottom+=c;break;case "-y":this.top-=c,this.bottom-=c}};Fa.prototype.overlaps;Fa.prototype.overlapsAny;Fa.prototype.within;Fa.prototype.overlapsOppositeAxis;Fa.prototype.intersectPercentage;Fa.prototype.toCSSCompatValues;Fa.getSimpleBoxPosition;xb.StringDecoder=function(){return{decode:function(n){if(!n)return"";if("string"!==typeof n)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};
xb.convertCueToDOMTree;xb.processCues=function(n,c,f){if(!n||!c||!f)return null;for(;f.firstChild;)f.removeChild(f.firstChild);var e=n.document.createElement("div");e.style.position="absolute";e.style.left="0";e.style.right="0";e.style.top="0";e.style.bottom="0";e.style.margin="1.5%";f.appendChild(e);if(c)){var b=[],t=Fa.getSimpleBoxPosition(e),y={font:Math.round(5*
t.height)/100+"px sans-serif"};(function(){for(var f,a,k=0;k<c.length;k++){a=c[k];f=new Ic(n,a,y);e.appendChild(f.div);var l=void 0,d=void 0,h=f,g=t,u=b,z=new Fa(h),v=h.cue;if("number"===typeof v.line&&(v.snapToLines||0<=v.line&&100>=v.line))var m=v.line;else if(v.track&&v.track.textTrackList&&v.track.textTrackList.mediaElement){m=v.track;for(var J=m.textTrackList,q=0,r=0;r<J.length&&J[r]!==m;r++)"showing"===J[r].mode&&q++;m=-1*++q}else m=-1;J=[];if(v.snapToLines){switch(v.vertical){case "":J=["+y",
"-y"];d="height";break;case "rl":J=["+x","-x"];d="width";break;case "lr":J=["-x","+x"],d="width"}q=z.lineHeight;r=q*Math.round(m);d=g[d]+q;var w=J[0];Math.abs(r)>d&&(r=(0>r?-1:1)*Math.ceil(d/q)*q);0>m&&(r+=""===v.vertical?g.height:g.width,J=J.reverse());z.move(w,r)}else{z=z.lineHeight/g.height*100;switch(v.lineAlign){case "center":m-=z/2;break;case "end":m-=z}switch(v.vertical){case "":h.applyStyles({top:h.formatStyle(m,"%")});break;case "rl":h.applyStyles({left:h.formatStyle(m,"%")});break;case "lr":h.applyStyles({right:h.formatStyle(m,
"%")})}J=["+y","-x","+x","-y"];z=new Fa(h)}a:{v=z;z=J;d=new Fa(v);m=1;for(J=0;J<z.length;J++){for(;v.overlapsOppositeAxis(g,z[J])||v.within(g)&&v.overlapsAny(u);)v.move(z[J]);if(v.within(g)){l=v;break a}q=v.intersectPercentage(g);m>q&&(l=new Fa(v),m=q);v=new Fa(d)}l=l||d}h.move(l.toCSSCompatValues(g));a.displayState=f.div;b.push(Fa.getSimpleBoxPosition(f))}})()}else for(f=0;f<c.length;f++)e.appendChild(c[f].displayState)};xb.Parser;xb.Parser.prototype={reportOrThrowError,parse:function(n)function f(b){var c=new dc;ec(b,function(b,e){switch(b){case "id":c.set(b,e);break;case "width":c.percent(b,
e);break;case "lines":c.integer(b,e);break;case "regionanchor":case "viewportanchor":e=e.split(",");if(2!==e.length)break;var f=new dc;f.percent("x",e[0]);f.percent("y",e[1]);if(!f.has("x")||!f.has("y"))break;c.set(b+"X",f.get("x"));c.set(b+"Y",f.get("y"));break;case "scroll":c.alt(b,e,["up"])}},/=/,/\s/);c.has("id")&&(b=new (t.vttjs.VTTRegion||t.window.VTTRegion),b.width=c.get("width",100),b.lines=c.get("lines",3),b.regionAnchorX=c.get("regionanchorX",0),b.regionAnchorY=c.get("regionanchorY",100),
b.viewportAnchorX=c.get("viewportanchorX",0),b.viewportAnchorY=c.get("viewportanchorY",100),b.scroll=c.get("scroll",""),t.onregion&&t.onregion(b),t.regionList.push({id:c.get("id"),region:b}))ar t=this;n&&(t.buffer+=t.decoder.decode(n,{stream:!0}));try{if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var y=c();var p=y.match(/^WEBVTT([ \t].*)?$/);if(!p||!p[0])throw new ya(ya.Errors.BadSignature);t.state="HEADER"}for(n=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;n?n=!1:y=c();switch(t.state){case "HEADER":/:/.test(y)?b(y):y||(t.state="ID");continue;case "NOTE":y||(t.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(y)){t.state=
"NOTE";break}if(!y)continue;t.cue=new (t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(k){t.cue.align="middle"}t.state="CUE";if(-1===y.indexOf("--\x3e")){t.cue.id=y;continue}case "CUE":try{Fj(y,t.cue,t.regionList)}catch(k){t.reportOrThrowError(k);t.cue=null;t.state="BADCUE";continue}t.state="CUETEXT";continue;case "CUETEXT":var a=-1!==y.indexOf("--\x3e");if(!y||a&&(n=!0)){t.oncue&&t.oncue(t.cue);t.cue=null;t.state="ID";continue}t.cue.text&&(t.cue.text+="\n");t.cue.text+=y.replace(/\u2028/g,
"\n").replace(/u2029/g,"\n");continue;case "BADCUE":y||(t.state="ID")}}}catch(k){t.reportOrThrowError(k);if("CUETEXT"===t.state&&t.cue&&t.oncue)t.oncue(t.cue);t.cue=null;t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new ya(ya.Errors.BadSignature);}catch(n){this.reportOrThrowError(n)}this.onflush&&this.onflush();return this}};var Lj=
{"":1,lr:1,rl:1},Kj={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Vf.prototype.getCueAsHTML;var vk={"":!0,up:!0},wk=function(){var n=100,c=3,f=0,e=100,b=0,t=100,y="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(b){if(!fc(b))throw Error("Width must be between 0 and 100.");n=b}},lines:{enumerable:!0,get:function(){return c},set},regionAnchorY:{enumerable:!0,get:function(){return e},set:function(b){if(!fc(b))throw Error("RegionAnchorX must be between 0 and 100.");e=b}},regionAnchorX:{enumerable:!0,get:function(){return f},set:function(b){if(!fc(b))throw Error("RegionAnchorY must be between 0 and 100.");f=b}},viewportAnchorY:{enumerable:!0,get:function(){return t},set:function(b){if(!fc(b))throw Error("ViewportAnchorY must be between 0 and 100.");t=b}},viewportAnchorX:{enumerable:!0,get:function(){return b},set},scroll:{enumerable:!0,get:function(){return y},set:function(b){b="string"!==typeof b?!1:vk[b.toLowerCase()]?b.toLowerCase():!1;!1===b?console.warn("Scroll: an invalid or illegal string was specified."):y=b}}})},rc=r);rc.WebVTT;rc.VTTCue;
rc.VTTRegion;var W=function(n){function c(c,b){void 0===c&&(c={});void 0===b&&(b=function(){});c.reportTouchActivity=!1;var e=n.call(this,null,c,b)||this;e.onDurationChange_=function(b){return e.onDurationChange(b)};e.trackProgress_=function(b){return e.trackProgress(b)};e.trackCurrentTime_=function(b){return e.trackCurrentTime(b)};e.stopTrackingCurrentTime_=function(b){return e.stopTrackingCurrentTime(b)};e.disposeSourceHandler_=function(b){return e.disposeSourceHandler(b)};e.queuedHanders_=new Set;
e.hasStarted_=!1;e.on("playing",function(){this.hasStarted_=!0});e.on("loadstart",function(){this.hasStarted_=!1});Ga.names.forEach);e.featuresProgressEvents||e.manualProgressOn();e.featuresTimeupdateEvents||e.manualTimeUpdatesOn();["Text","Audio","Video"].forEach);if(!1===c.nativeCaptions||!1===c.nativeTextTracks)e.featuresNativeTextTracks=!1;else if(!0===
c.nativeCaptions||!0===c.nativeTextTracks)e.featuresNativeTextTracks=!0;e.featuresNativeTextTracks||e.emulateTextTracks();e.preloadTextTracks=!1!==c.preloadTextTracks;e.autoRemoteTextTracks_=new Ga.text.ListClass;e.initTrackListeners();c.nativeControlsForTouch||e.emitTapEvents();e.constructor&&(e.name_=e.constructor.name||"Unknown Tech");return e}F(c,n);var f=c.prototype;f.triggerSourceset=function(c){var b=this;if(!this.isReady_)this.one("ready");this.trigger({src:c,type:"sourceset"})};f.manualProgressOn;f.manualProgressOff;f.trackProgress;f.onDurationChange;f.buffered;f.bufferedPercent;f.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};f.manualTimeUpdatesOn;f.manualTimeUpdatesOff;f.trackCurrentTime;f.stopTrackingCurrentTime;f.dispose;f.clearTracks=function(c){var b=this;c=[].concat(c);c.forEach)};f.cleanupAutoTextTracks;f.reset=function(){};f.crossOrigin=function(){};f.setCrossOrigin=
function(){};f.error=function(c){void 0!==c&&(this.error_=new ta(c),this.trigger("error"));return this.error_};f.played;f.play=function(){};f.setScrubbing=function(){};f.scrubbing=function(){};f.setCurrentTime;f.initTrackListeners;f.addWebVttScript_=function(){var c=this;if(!window.WebVTT)if(document.body.contains(this.el()))if(!this.options_["vtt.js"]&&Z(rc)&&0<Object.keys(rc).length)this.trigger("vttjsloaded");else{var b=document.createElement("script");b.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";b.onload=function(){c.trigger("vttjsloaded")};
b.onerror=function(){c.trigger("vttjserror")};this.on("dispose");window.WebVTT=!0;this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)};f.emulateTextTracks;f.addTextTrack=
function(c,b,f){if(!c)throw Error("TextTrack kind is required but was not provided");var e=void 0;void 0===e&&(e={});var t=this.textTracks();e.kind=c;b&&(e.label=b);f&&(e.language=f);e.tech=this;c=new Ga.text.TrackClass(e);t.addTrack(c);return c};f.createRemoteTextTrack;f.addRemoteTextTrack=function(c,b){var e=this;void 0===c&&(c={});var f=this.createRemoteTextTrack(c);!0!==b&&!1!==b&&(P.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),
b=!0);this.remoteTextTrackEls().addTrackElement_(f);this.remoteTextTracks().addTrack(f.track);!0!==b&&this.ready);return f};f.removeRemoteTextTrack;f.getVideoPlaybackQuality;f.requestPictureInPicture;f.disablePictureInPicture;f.setDisablePictureInPicture=function(){};f.requestVideoFrameCallback=function(c){var b=this,e=bb++;this.paused()?(this.queuedHanders_.add(e),this.one("playing")):this.requestNamedAnimationFrame(e,c);return e};f.cancelVideoFrameCallback=function(c){if(this.queuedHanders_.has(c))this.queuedHanders_["delete"](c);else this.cancelNamedAnimationFrame(c)};
f.setPoster=function(){};f.playsinline=function(){};f.setPlaysinline=function(){};f.overrideNativeAudioTracks=function(){};f.overrideNativeVideoTracks=function(){};f.canPlayType=function(){return""};c.canPlayType=function(){return""};c.canPlaySource;c.isTech;c.registerTech=function(e,b){c.techs_||(c.techs_={});if(!c.isTech(b))throw Error("Tech "+e+" must be a Tech");if(!c.canPlayType)throw Error("Techs must have a static canPlayType method on them");
if(!c.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");e=da(e);c.techs_[e]=b;c.techs_[ad(e)]=b;"Tech"!==e&&c.defaultTechOrder_.push(e);return b};c.getTech=function(e){if(e){if(c.techs_&&c.techs_[e])return c.techs_[e];e=da(e);if(window&&window.videojs&&window.videojs[e])return P.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),window.videojs[e]}};return c}(A);Ga.names.forEach);W.prototype.featuresVolumeControl=!0;W.prototype.featuresMuteControl=!0;W.prototype.featuresFullscreenResize=!1;W.prototype.featuresPlaybackRate=!1;W.prototype.featuresProgressEvents=!1;W.prototype.featuresSourceset=!1;W.prototype.featuresTimeupdateEvents=!1;W.prototype.featuresNativeTextTracks=!1;W.prototype.featuresVideoFrameCallback=!1;W.withSourceHandlers=function(n){n.registerSourceHandler=;n.canPlayType;n.selectSourceHandler;n.canPlaySource;["seekable","seeking","duration"].forEach,n.prototype);n.prototype.setSource;n.prototype.disposeSourceHandler};A.registerComponent("Tech",W);W.registerTech("Tech",W);W.defaultTechOrder_=[];var sb={},Rd={},Jc={},xk={buffered:1,currentTime:1,
duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},yk={setCurrentTime:1,setMuted:1,setVolume:1},ah={play:1,pause:1},zk={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},
Kc=function(n){void 0===n&&(n="");n=re(n);return zk[n.toLowerCase()]||""},Ak=function(n,c){if(!c)return"";if(n.cache_.source.src===c&&n.cache_.source.type)return n.cache_.source.type;var f=n.cache_.sources.filter(function(b){return b.src===c});if(f.length)return f[0].type;n=n.$$("source");for(f=0;f<n.length;f++){var e=n[f];if(e.type&&e.src&&e.src===c)return e.type}return Kc(c)},Bk=function f(c){if(Array.isArray(c)){var e=[];c.forEach);
c=e}else c="string"===typeof c&&c.trim()?[Xf({src:c})]:q(c)&&"string"===typeof c.src&&c.src&&c.src.trim()?[Xf(c)]:[];return c},Ck=function(c){function f(e,b,f){var t=U({createEl:!1},b);f=c.call(this,e,t,f)||this;if(b.playerOptions.sources&&0!==b.playerOptions.sources.length)e.src(b.playerOptions.sources);else for(t=0,b=b.playerOptions.techOrder;t<b.length;t++){var p=da(b[t]),a=W.getTech(p);p||(a=A.getComponent(p));if(a&&a.isSupported()){e.loadTech_(p);break}}return f}F(f,c);return f}(A);A.registerComponent("MediaLoader",
Ck);var cd=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.options_.controlText&&f.controlText(f.options_.controlText);f.handleMouseOver_=function(b){return f.handleMouseOver(b)};f.handleMouseOut_=function(b){return f.handleMouseOut(b)};f.handleClick_=function(b){return f.handleClick(b)};f.handleKeyDown_=function(b){return f.handleKeyDown(b)};f.emitTapEvents();f.enable();return f}F(f,c);var e=f.prototype;e.createEl=function(b,c,e){void 0===b&&(b="div");void 0===c&&(c={});void 0===e&&(e=
{});c=E({className:this.buildCSSClass(),tabIndex:0},c);"button"===b&&P.error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead.");e=E({role:"button"},e);this.tabIndex_=c.tabIndex;b=Q(b,c,e);b.appendChild(Q("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0}));this.createControlTextEl(b);return b};e.dispose=function(){this.controlTextEl_=null;c.prototype.dispose.call(this)};e.createControlTextEl;e.controlText;e.buildCSSClass=function(){return"vjs-control vjs-button "+c.prototype.buildCSSClass.call(this)};e.enable;e.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off("mouseover",this.handleMouseOver_);this.off("mouseout",
this.handleMouseOut_);this.off(["tap","click"],this.handleClick_);this.off("keydown",this.handleKeyDown_)};e.handleLanguagechange;e.handleClick;e.handleKeyDown;return f}(A);A.registerComponent("ClickableComponent",
cd);var Dk=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.update();f.update_=function(b){return f.update(b)};b.on("posterchange",f.update_);return f}F(f,c);var e=f.prototype;e.dispose;e.createEl;e.update;e.setSrc;e.handleClick=function(b){this.player_.controls()&&(b=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(oc||nc)&&b||this.player_.tech(!0).focus(),this.player_.paused()?eb(this.player_.play()):this.player_.pause())};return f}(cd);A.registerComponent("PosterImage",Dk);var Ek={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',
monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Fk=function(c){function f(b,e,f){var t=c.call(this,b,e,f)||this;var a=function(b){return t.updateDisplay(b)};b.on("loadstart",function(b){return t.toggleDisplay(b)});b.on("texttrackchange",a);b.on("loadedmetadata",function(b){return t.preselectTrack(b)});
b.ready(S(O(t)));return t}F(f,c);var e=f.prototype;e.preselectTrack=function(){for(var b={captions:1,subtitles:1},
c=this.player_.textTracks(),e=this.player_.cache_.selectedLanguage,f,a,k,l=0;l<c.length;l++){var d=c[l];e&&e.enabled&&e.language&&e.language===d.language&&d.kind in b?d.kind===e.kind?k=d:k||(k=d):e&&!e.enabled?a=f=k=null:d["default"]&&("descriptions"!==d.kind||f?d.kind in b&&!a&&(a=d):f=d)}k?k.mode="showing":a?a.mode="showing":f&&(f.mode="showing")};e.toggleDisplay;e.createEl;e.clearDisplay;e.updateDisplay=function(){var b=this.player_.textTracks(),c=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(c){c=[];for(var e=0;e<b.length;++e){var f=b[e];"showing"===f.mode&&c.push(f)}this.updateForTrack(c)}else{e=c=null;for(f=b.length;f--;){var a=b[f];"showing"===a.mode&&
("descriptions"===a.kind?c=a:e=a)}e?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(e)):c&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(c))}};e.updateDisplayState=function(b){var c=this.player_.textTrackSettings.getValues();b=b.activeCues;for(var e=b.length;e--;){var f=b[e];if(f){f=f.displayState;c.color&&(f.firstChild.style.color=c.color);if(c.textOpacity){var a=Sd(c.color||"#fff",c.textOpacity);
try{f.firstChild.style.color=a}catch(k){}}c.backgroundColor&&(f.firstChild.style.backgroundColor=c.backgroundColor);if(c.backgroundOpacity){a=Sd(c.backgroundColor||"#000",c.backgroundOpacity);try{f.firstChild.style.backgroundColor=a}catch(k){}}if(c.windowColor)if(c.windowOpacity){a=Sd(c.windowColor,c.windowOpacity);try{f.style.backgroundColor=a}catch(k){}}else f.style.backgroundColor=c.windowColor;c.edgeStyle&&("dropshadow"===c.edgeStyle?f.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":
"raised"===c.edgeStyle?f.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===c.edgeStyle?f.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===c.edgeStyle&&(f.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));c.fontPercent&&1!==c.fontPercent&&(a=window.parseFloat(f.style.fontSize),f.style.fontSize=a*c.fontPercent+"px",f.style.height="auto",f.style.top="auto");c.fontFamily&&"default"!==
c.fontFamily&&("small-caps"===c.fontFamily?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=Ek[c.fontFamily])}}};e.updateForTrack=function(b){Array.isArray(b)||(b=[b]);if("function"===typeof window.WebVTT&&!b.every)){for(var c=[],e=0;e<b.length;++e)for(var f=b[e],a=0;a<f.activeCues.length;++a)c.push(f.activeCues[a]);window.WebVTT.processCues(window,c,this.el_);for(c=0;c<b.length;++c){e=b[c];for(f=0;f<e.activeCues.length;++f)a=e.activeCues[f].displayState,
ca(a,"vjs-text-track-cue"),ca(a,"vjs-text-track-cue-"+(e.language?e.language:c)),e.language&&a.setAttribute("lang",e.language);this.player_.textTrackSettings&&this.updateDisplayState(e)}}};return f}(A);A.registerComponent("TextTrackDisplay",Fk);var Gk=function(c){function f(){return c.apply(this,arguments)||this}F(f,c);f.prototype.createEl=function(){var e=this.player_.isAudio();e=this.localize(e?"Audio Player":"Video Player");e=Q("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",
[e])});var b=c.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});b.appendChild(e);return b};return f}(A);A.registerComponent("LoadingSpinner",Gk);var Xa=function(c){function f(){return c.apply(this,arguments)||this}F(f,c);var e=f.prototype;e.createEl=function(b,c,e){void 0===c&&(c={});void 0===e&&(e={});b="button";c=E({className:this.buildCSSClass()},c);e=E({type:"button"},e);b=Q(b,c,e);b.appendChild(Q("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0}));this.createControlTextEl(b);
return b};e.addChild=function(b,c){void 0===c&&(c={});P.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return A.prototype.addChild.call(this,b,c)};e.enable;e.disable;e.handleKeyDown;return f}(cd);A.registerComponent("Button",Xa);var bh=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.mouseused_=!1;f.on("mousedown",function(b){return f.handleMouseDown(b)});return f}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-big-play-button"};e.handleClick=function(b){var c=this.player_.play();if(this.mouseused_&&b.clientX&&b.clientY)b=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<
this.player_.eme.sessions.length,eb(c),!this.player_.tech(!0)||(oc||nc)&&b||this.player_.tech(!0).focus();else{var e=(b=this.player_.getChild("controlBar"))&&b.getChild("playToggle");e?(b=function(){return e.focus()},cc(c)?c.then(b,function(){}):this.setTimeout(b,1)):this.player_.tech(!0).focus()}};e.handleKeyDown;e.handleMouseDown;return f}(Xa);bh.prototype.controlText_="Play Video";A.registerComponent("BigPlayButton",
bh);var Hk=function(c){function f(b,e){b=c.call(this,b,e)||this;b.controlText(e&&e.controlText||b.localize("Close"));return b}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-close-button "+c.prototype.buildCSSClass.call(this)};e.handleClick;e.handleKeyDown;return f}(Xa);A.registerComponent("CloseButton",
Hk);var ch=function(c){function f(b,e){void 0===e&&(e={});var f=c.call(this,b,e)||this;e.replay=void 0===e.replay||e.replay;f.on(b,"play",function(b){return f.handlePlay(b)});f.on(b,"pause",function(b){return f.handlePause(b)});if(e.replay)f.on(b,"ended",function(b){return f.handleEnded(b)});return f}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-play-control "+c.prototype.buildCSSClass.call(this)};e.handleClick;
e.handleSeeked;e.handlePlay;e.handlePause;e.handleEnded;return f}(Xa);ch.prototype.controlText_="Play";A.registerComponent("PlayToggle",ch);var dh=function(c,f){c=0>c?0:c;var e=Math.floor(c%60),b=Math.floor(c/60%60),t=Math.floor(c/3600),y=Math.floor(f/60%60);f=Math.floor(f/3600);if(isNaN(c)||Infinity===c)t=b=e="-";t=0<t||0<f?t+":":"";return t+(((t||10<=y)&&10>b?"0"+b:b)+":")+(10>e?"0"+e:e)},Td=dh,Rb=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.on(b,["timeupdate","ended"],function(b){return f.updateContent(b)});
f.updateTextNode_();return f}F(f,c);var e=f.prototype;e.createEl;e.dispose=function(){this.textNode_=this.contentEl_=
null;c.prototype.dispose.call(this)};e.updateTextNode_=function(b){var c=this;void 0===b&&(b=0);b=yb(b);this.formattedTime_!==b&&(this.formattedTime_=b,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(c.contentEl_){var b=c.textNode_;b&&c.contentEl_.firstChild!==b&&(b=null,P.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead."));c.textNode_=document.createTextNode(c.formattedTime_);
c.textNode_&&(b?c.contentEl_.replaceChild(c.textNode_,b):c.contentEl_.appendChild(c.textNode_))}}))};e.updateContent=function(b){};return f}(A);Rb.prototype.labelText_="Time";Rb.prototype.controlText_="Time";A.registerComponent("TimeDisplay",Rb);var te=function(c){function f(){return c.apply(this,arguments)||this}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-current-time"};e.updateContent=function(b){b=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:
this.player_.currentTime();this.updateTextNode_(b)};return f}(Rb);te.prototype.labelText_="Current Time";te.prototype.controlText_="Current Time";A.registerComponent("CurrentTimeDisplay",te);var ue=function(c){function f(b,e){var f=c.call(this,b,e)||this;e=function(b){return f.updateContent(b)};f.on(b,"durationchange",e);f.on(b,"loadstart",e);f.on(b,"loadedmetadata",e);return f}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-duration"};e.updateContent=function(b){b=this.player_.duration();
this.updateTextNode_(b)};return f}(Rb);ue.prototype.labelText_="Duration";ue.prototype.controlText_="Duration";A.registerComponent("DurationDisplay",ue);var Ik=function(c){function f(){return c.apply(this,arguments)||this}F(f,c);f.prototype.createEl;return f}(A);A.registerComponent("TimeDivider",Ik);var ve=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.on(b,"durationchange",function(b){return f.updateContent(b)});return f}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-remaining-time"};e.createEl;e.updateContent=function(b){"number"===typeof this.player_.duration()&&
(b=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(b))};return f}(Rb);ve.prototype.labelText_="Remaining Time";ve.prototype.controlText_="Remaining Time";A.registerComponent("RemainingTimeDisplay",ve);var Jk=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.updateShowing();f.on(f.player(),"durationchange",function(b){return f.updateShowing(b)});return f}F(f,c);var e=f.prototype;e.createEl;e.dispose;e.updateShowing=function(b){Infinity===
this.player().duration()?this.show():this.hide()};return f}(A);A.registerComponent("LiveDisplay",Jk);var eh=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.updateLiveEdgeStatus();f.player_.liveTracker&&(f.updateLiveEdgeStatusHandler_=function(b){return f.updateLiveEdgeStatus(b)},f.on(f.player_.liveTracker,"liveedgechange",f.updateLiveEdgeStatusHandler_));return f}F(f,c);var e=f.prototype;e.createEl;e.updateLiveEdgeStatus;
e.handleClick;e.dispose;return f}(Xa);eh.prototype.controlText_="Seek to live, currently playing live";A.registerComponent("SeekToLive",eh);var Sb,we=function(c){function f(b,e){var f=c.call(this,b,e)||
this;f.handleMouseDown_=function(b){return f.handleMouseDown(b)};f.handleMouseUp_=function(b){return f.handleMouseUp(b)};f.handleKeyDown_=function(b){return f.handleKeyDown(b)};f.handleClick_=function(b){return f.handleClick(b)};f.handleMouseMove_=function(b){return f.handleMouseMove(b)};f.update_=function(b){return f.update(b)};f.bar=f.getChild(f.options_.barName);f.vertical(!!f.options_.vertical);f.enable();return f}F(f,c);var e=f.prototype;e.enabled=function(){return this.enabled_};e.enable=function(){if(!this.enabled()){this.on("mousedown",
this.handleMouseDown_);this.on("touchstart",this.handleMouseDown_);this.on("keydown",this.handleKeyDown_);this.on("click",this.handleClick_);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};e.disable;e.createEl=function(b,e,f){void 0===e&&(e={});
void 0===f&&(f={});e.className+=" vjs-slider";e=E({tabIndex:0},e);f=E({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},f);return c.prototype.createEl.call(this,b,e,f)};e.handleMouseDown;e.handleMouseMove;e.handleMouseUp;e.update;e.getProgress;e.calculateDistance;e.handleKeyDown;e.handleClick;e.vertical=function(b){if(void 0===b)return this.vertical_||!1;(this.vertical_=!!b)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return f}(A);A.registerComponent("Slider",we);var Kk=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.partEls_=
[];f.on(b,"progress",function(b){return f.update(b)});return f}F(f,c);var e=f.prototype;e.createEl;
e.dispose;e.update=function(b){var c=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var b=c.player_.liveTracker,e=c.player_.buffered(),f=b&&b.isLive()?b.seekableEnd():c.player_.duration(),t=c.player_.bufferedEnd();b=c.partEls_;f=Sb(t/f*100,0,100).toFixed(2)+"%";c.percent_!==f&&(c.el_.style.width=f,ub(c.percentageEl_,f),c.percent_=f);for(f=0;f<e.length;f++){var l=e.start(f),d=e.end(f),h=b[f];
h||(h=c.el_.appendChild(Q()),b[f]=h);if(h.dataset.start!==l||h.dataset.end!==d)h.dataset.start=l,h.dataset.end=d,h.style.left=Sb(l/t*100,0,100).toFixed(2)+"%",h.style.width=Sb((d-l)/t*100,0,100).toFixed(2)+"%"}for(t=b.length;t>e.length;t--)c.el_.removeChild(b[t-1]);b.length=e.length})};return f}(A);A.registerComponent("LoadProgressBar",Kk);var Lk=function(c){function f(b,e){b=c.call(this,b,e)||this;b.update=ib(S(O(b),b.update),30);return b}F(f,c);var e=f.prototype;e.createEl=function(){return c.prototype.createEl.call(this,
"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};e.update=function(b,c,e){var f=ac(this.el_),a=Hb(this.player_.el()),t=b.width*c;a&&f&&(c=b.left-a.left+t,b=b.width-t+(a.right-b.right),a=f.width/2,c<a?a+=a-c:b<a&&(a=b),0>a?a=0:a>f.width&&(a=f.width),a=Math.round(a),this.el_.style.right="-"+a+"px",this.write(e))};e.write=function(b){ub(this.el_,b)};e.updateTime=function(b,c,e,f){var a=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var t=a.player_.duration();if(a.player_.liveTracker&&
a.player_.liveTracker.isLive()){t=a.player_.liveTracker.liveWindow();var p=t-c*t;t=(1>p?"":"-")+yb(p,t)}else t=yb(e,t);a.update(b,c,t);f&&f()})};return f}(A);A.registerComponent("TimeTooltip",Lk);var xe=function(c){function f(b,e){b=c.call(this,b,e)||this;b.update=ib(S(O(b),b.update),30);return b}F(f,c);var e=f.prototype;e.createEl=function(){return c.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};e.update;return f}(A);xe.prototype.options_={children:[]};sa||gb||xe.prototype.options_.children.push("timeTooltip");A.registerComponent("PlayProgressBar",xe);var fh=function(c){function f(b,e){b=c.call(this,b,e)||this;b.update=ib(S(O(b),b.update),30);return b}F(f,c);var e=f.prototype;e.createEl=function(){return c.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};e.update=;return f}(A);fh.prototype.options_={children:["timeTooltip"]};A.registerComponent("MouseTimeDisplay",fh);var ye=function(c){function f(b,e){b=c.call(this,b,e)||this;b.setEventHandlers_();return b}F(f,c);var e=f.prototype;e.setEventHandlers_=function(){var b=this;this.update_=S(this,this.update);this.update=ib(this.update_,30);this.on(this.player_,["ended",
"durationchange","timeupdate"],this.update);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.enableIntervalHandler_=function(c){return b.enableInterval_(c)};this.disableIntervalHandler_=function(c){return b.disableInterval_(c)};this.on(this.player_,["playing"],this.enableIntervalHandler_);this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);if("hidden"in document&&"visibilityState"in document)this.on(document,
"visibilitychange",this.toggleVisibility_)};e.toggleVisibility_;e.enableInterval_;e.disableInterval_;e.createEl;e.update=function(b){var e=this;if("hidden"!==document.visibilityState){var f=c.prototype.update.call(this);this.requestNamedAnimationFrame("SeekBar#update",function(){var b=e.player_.ended()?e.player_.duration():e.getCurrentTime_(),c=e.player_.liveTracker,
t=e.player_.duration();c&&c.isLive()&&(t=e.player_.liveTracker.liveCurrentTime());e.percent_!==f&&(e.el_.setAttribute("aria-valuenow",(100*f).toFixed(2)),e.percent_=f);if(e.currentTime_!==b||e.duration_!==t)e.el_.setAttribute("aria-valuetext",e.localize("progress bar timing: currentTime\x3d{1} duration\x3d{2}",[yb(b,t),yb(t,t)],"{1} of {2}")),e.currentTime_=b,e.duration_=t;e.bar&&e.bar.update(Hb(e.el()),e.getProgress())});return f}};e.userSeek_;e.getCurrentTime_;e.getPercent=function(){var b=this.getCurrentTime_(),c=this.player_.liveTracker;c&&c.isLive()?(b=(b-c.seekableStart())/c.liveWindow(),c.atLiveEdge()&&(b=1)):b/=this.player_.duration();return b};e.handleMouseDown;e.handleMouseMove=function(b,c){void 0===c&&(c=!1);if(bc(b)){c||this.player_.scrubbing()||this.player_.scrubbing(!0);var e=this.calculateDistance(b);var f=this.player_.liveTracker;if(f&&f.isLive()){if(.99<=e){f.seekToLiveEdge();return}b=f.seekableStart();c=f.liveCurrentTime();e=b+e*f.liveWindow();e>=c&&(e=c);e<=b&&(e=b+.1);if(Infinity===e)return}else e*=this.player_.duration(),e===this.player_.duration()&&(e-=.1);this.userSeek_(e)}};e.enable=function(){c.prototype.enable.call(this);
var b=this.getChild("mouseTimeDisplay");b&&b.show()};e.disable;e.handleMouseUp;e.stepForward;e.stepBack;e.handleAction=function(b){this.player_.paused()?this.player_.play():this.player_.pause()};e.handleKeyDown=function(b){var e=this.player_.liveTracker;M.isEventKey(b,"Space")||M.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.handleAction(b)):M.isEventKey(b,"Home")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(0)):M.isEventKey(b,"End")?(b.preventDefault(),b.stopPropagation(),e&&e.isLive()?this.userSeek_(e.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(M(b))?
(b.preventDefault(),b.stopPropagation(),b=10*(M.codes[M(b)]-M.codes["0"])/100,e&&e.isLive()?this.userSeek_(e.seekableStart()+e.liveWindow()*b):this.userSeek_(this.player_.duration()*b)):M.isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):M.isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):c.prototype.handleKeyDown.call(this,b)};e.dispose;return f}(we);ye.prototype.options_={children:["loadProgressBar","playProgressBar"],
barName:"playProgressBar"};sa||gb||ye.prototype.options_.children.splice(1,0,"mouseTimeDisplay");A.registerComponent("SeekBar",ye);var gh=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.handleMouseMove=ib(S(O(f),f.handleMouseMove),30);f.throttledHandleMouseSeek=ib(S(O(f),f.handleMouseSeek),30);f.handleMouseUpHandler_=function(b){return f.handleMouseUp(b)};f.handleMouseDownHandler_=function(b){return f.handleMouseDown(b)};f.enable();return f}F(f,c);var e=f.prototype;e.createEl=function(){return c.prototype.createEl.call(this,
"div",{className:"vjs-progress-control vjs-control"})};e.handleMouseMove=function(b){var c=this.getChild("seekBar");if(c){var e=c.getChild("playProgressBar"),f=c.getChild("mouseTimeDisplay");if(e||f){var a=c.el(),k=ac(a);b=Fc(a,b).x;b=Sb(b,0,1);f&&f.update(k,b);e&&e.update(k,c.getProgress())}}};e.handleMouseSeek;e.enabled;e.disable=function(){this.children().forEach(function(b){return b.disable&&b.disable()});
if(this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var b=this.getChild("seekBar");this.player_.scrubbing(!1);b.videoWasPlaying&&eb(this.player_.play())}};e.enable;e.removeListenersAddedOnMousedownAndTouchstart;e.handleMouseDown;e.handleMouseUp;return f}(A);gh.prototype.options_={children:["seekBar"]};A.registerComponent("ProgressControl",gh);var hh=function(c){function f(b,e){var f=
c.call(this,b,e)||this;f.on(b,["enterpictureinpicture","leavepictureinpicture"],function(b){return f.handlePictureInPictureChange(b)});f.on(b,["disablepictureinpicturechanged","loadedmetadata"],function(b){return f.handlePictureInPictureEnabledChange(b)});f.on(b,["loadedmetadata","audioonlymodechange","audiopostermodechange"]);f.disable();
return f}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-picture-in-picture-control "+c.prototype.buildCSSClass.call(this)};e.handlePictureInPictureEnabledChange;e.handlePictureInPictureChange;
e.handleClick=function(b){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()};return f}(Xa);hh.prototype.controlText_="Picture-in-Picture";A.registerComponent("PictureInPictureToggle",hh);var ih=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.on(b,"fullscreenchange",function(b){return f.handleFullscreenChange(b)});!1===document[b.fsApi_.fullscreenEnabled]&&f.disable();return f}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-fullscreen-control "+
c.prototype.buildCSSClass.call(this)};e.handleFullscreenChange;e.handleClick;return f}(Xa);ih.prototype.controlText_="Fullscreen";A.registerComponent("FullscreenToggle",ih);var Mk=function(c,f){f.tech_&&!f.tech_.featuresVolumeControl&&c.addClass("vjs-hidden");c.on(f,"loadstart",function(){f.tech_.featuresVolumeControl?
c.removeClass("vjs-hidden"):c.addClass("vjs-hidden")})},Nk=function(c)F(f,c);f.prototype.createEl;return f}(A);A.registerComponent("VolumeLevel",Nk);var Ok=function(c){function f(b,e){b=c.call(this,b,e)||this;b.update=ib(S(O(b),b.update),30);return b}F(f,c);var e=f.prototype;
e.createEl;e.update=function(b,c,e,f){if(!e){e=Hb(this.el_);var a=Hb(this.player_.el()),t=b.width*c;if(!a||!e)return;c=b.left-a.left+t;b=b.width-t+(a.right-b.right);a=e.width/2;c<a?a+=a-c:b<a&&(a=b);0>a?a=0:a>e.width&&(a=e.width);this.el_.style.right="-"+a+"px"}this.write(f+"%")};e.write;e.updateVolume;return f}(A);A.registerComponent("VolumeLevelTooltip",Ok);var jh=function(c){function f(b,e){b=c.call(this,b,e)||this;b.update=ib(S(O(b),b.update),30);return b}F(f,c);var e=f.prototype;e.createEl;e.update;return f}(A);jh.prototype.options_={children:["volumeLevelTooltip"]};A.registerComponent("MouseVolumeLevelDisplay",jh);var dd=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.on("slideractive",function(b){return f.updateLastVolume_(b)});f.on(b,"volumechange",function(b){return f.updateARIAAttributes(b)});b.ready);return f}F(f,c);var e=f.prototype;e.createEl;e.handleMouseDown;e.handleMouseMove=function(b){var c=this.getChild("mouseVolumeLevelDisplay");if(c){var e=this.el(),f=Hb(e),a=this.vertical();e=Fc(e,b);e=a?e.y:e.x;e=Sb(e,0,1);c.update(f,e,a)}bc(b)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(b)))};e.checkMuted;e.getPercent;e.stepForward;e.stepBack;e.updateARIAAttributes;e.volumeAsPercentage_;e.updateLastVolume_;return f}(we);dd.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};sa||gb||dd.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");dd.prototype.playerEvent="volumechange";A.registerComponent("VolumeBar",dd);var kh=function(c){function f(b,e){void 0===e&&(e={});e.vertical=e.vertical||!1;if("undefined"===typeof e.volumeBar||Z(e.volumeBar))e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=
e.vertical;var f=c.call(this,b,e)||this;Mk(O(f),b);f.throttledHandleMouseMove=ib(S(O(f),f.handleMouseMove),30);f.handleMouseUpHandler_=function(b){return f.handleMouseUp(b)};f.on("mousedown",function(b){return f.handleMouseDown(b)});f.on("touchstart",function(b){return f.handleMouseDown(b)});f.on("mousemove",function(b){return f.handleMouseMove(b)});f.on(f.volumeBar,["focus","slideractive"],function(){f.volumeBar.addClass("vjs-slider-active");f.addClass("vjs-slider-active");f.trigger("slideractive")});
f.on(f.volumeBar,["blur","sliderinactive"]);return f}F(f,c);var e=f.prototype;e.createEl;e.handleMouseDown=function(b){b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseMove);
this.on(b,"touchmove",this.throttledHandleMouseMove);this.on(b,"mouseup",this.handleMouseUpHandler_);this.on(b,"touchend",this.handleMouseUpHandler_)};e.handleMouseUp;e.handleMouseMove;return f}(A);kh.prototype.options_=
{children:["volumeBar"]};A.registerComponent("VolumeControl",kh);var Pk,lh=function(c){function f(b,e){var f=c.call(this,b,e)||this;Pk(O(f),b);f.on(b,["loadstart","volumechange"],function(b){return f.update(b)});return f}F(f,c);var e=f.prototype;e.buildCSSClass;
e.handleClick=function(b){b=this.player_.volume();var c=this.player_.lastVolume_();0===b?(this.player_.volume(.1>c?.1:c),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};e.update;e.updateIcon_=function(){var b=this.player_.volume(),c=3;sa&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===b||this.player_.muted()?c=0:.33>b?c=1:.67>b&&(c=2);for(b=0;4>b;b++)Gb(this.el_,"vjs-vol-"+
b);ca(this.el_,"vjs-vol-"+c)};e.updateControlText_;return f}(Xa);lh.prototype.controlText_="Mute";A.registerComponent("MuteToggle",lh);var mh=function(c){function f(b,e){void 0===e&&(e={});e.inline="undefined"!==typeof e.inline?e.inline:!0;if("undefined"===typeof e.volumeControl||Z(e.volumeControl))e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline;var f=
c.call(this,b,e)||this;f.handleKeyPressHandler_=function(b){return f.handleKeyPress(b)};f.on(b,["loadstart"],function(b){return f.volumePanelState_(b)});f.on(f.muteToggle,"keyup",function(b){return f.handleKeyPress(b)});f.on(f.volumeControl,"keyup",function(b){return f.handleVolumeControlKeyUp(b)});f.on("keydown",function(b){return f.handleKeyPress(b)});f.on("mouseover",function(b){return f.handleMouseOver(b)});f.on("mouseout");f.on(f.volumeControl,["slideractive"],
f.sliderActive_);f.on(f.volumeControl,["sliderinactive"],f.sliderInactive_);return f}F(f,c);var e=f.prototype;e.sliderActive_=function(){this.addClass("vjs-slider-active")};e.sliderInactive_;e.volumePanelState_;
e.createEl;e.dispose;e.handleVolumeControlKeyUp;e.handleMouseOver=function(b){this.addClass("vjs-hover");Da(document,"keyup",this.handleKeyPressHandler_)};e.handleMouseOut;e.handleKeyPress;return f}(A);mh.prototype.options_={children:["muteToggle","volumeControl"]};A.registerComponent("VolumePanel",mh);var nh=function(c){function f(b,e){var f=c.call(this,b,e)||this;e&&(f.menuButton_=e.menuButton);f.focusedChild_=-1;f.on("keydown",function(b){return f.handleKeyDown(b)});f.boundHandleBlur_=function(b){return f.handleBlur(b)};f.boundHandleTapClick_=function(b){return f.handleTapClick(b)};
return f}F(f,c);var e=f.prototype;e.addEventListenerForItem=function(b){b instanceof A&&(this.on(b,"blur",this.boundHandleBlur_),this.on(b,["tap","click"],this.boundHandleTapClick_))};e.removeEventListenerForItem;e.removeChild=function(b){"string"===typeof b&&(b=this.getChild(b));this.removeEventListenerForItem(b);c.prototype.removeChild.call(this,b)};e.addItem=function(b){(b=
this.addChild(b))&&this.addEventListenerForItem(b)};e.createEl=function(){this.contentEl_=Q(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var b=c.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});b.appendChild(this.contentEl_);Da(b,"click",function(b){b.preventDefault();b.stopImmediatePropagation()});return b};e.dispose=function(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;c.prototype.dispose.call(this)};
e.handleBlur;e.handleTapClick=function(b){if(this.menuButton_){this.menuButton_.unpressButton();var c=this.children();Array.isArray(c)&&(c=c.filter)[0])&&"CaptionSettingsMenuItem"!==c.name()&&this.menuButton_.focus()}};e.handleKeyDown=function(b){if(M.isEventKey(b,"Left")||
M.isEventKey(b,"Down"))b.preventDefault(),b.stopPropagation(),this.stepForward();else if(M.isEventKey(b,"Right")||M.isEventKey(b,"Up"))b.preventDefault(),b.stopPropagation(),this.stepBack()};e.stepForward;e.stepBack;e.focus=function(b){void 0===b&&(b=0);var c=this.children().slice();c.length&&c[0].hasClass("vjs-menu-title")&&
c.shift();0<c.length&&(0>b?b=0:b>=c.length&&(b=c.length-1),this.focusedChild_=b,c[b].el_.focus())};return f}(A);A.registerComponent("Menu",nh);var ze=function(c){function f(b,e){void 0===e&&(e={});var f=c.call(this,b,e)||this;f.menuButton_=new Xa(b,e);f.menuButton_.controlText(f.controlText_);f.menuButton_.el_.setAttribute("aria-haspopup","true");b=Xa.prototype.buildCSSClass();f.menuButton_.el_.className=f.buildCSSClass()+" "+b;f.menuButton_.removeClass("vjs-control");f.addChild(f.menuButton_);f.update();
f.enabled_=!0;b=function(b){return f.handleClick(b)};f.handleMenuKeyUp_=function(b){return f.handleMenuKeyUp(b)};f.on(f.menuButton_,"tap",b);f.on(f.menuButton_,"click",b);f.on(f.menuButton_,"keydown",function(b){return f.handleKeyDown(b)});f.on(f.menuButton_,"mouseenter");f.on("mouseleave",function(b){return f.handleMouseLeave(b)});f.on("keydown",function(b){return f.handleSubmenuKeyDown(b)});return f}F(f,c);
var e=f.prototype;e.update=function(){var b=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));this.menu=b;this.addChild(b);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))};e.createMenu=function(){var b=new nh(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var c=
Q("li",{className:"vjs-menu-title",textContent:da(this.options_.title),tabIndex:-1});c=new A(this.player_,{el:c});b.addItem(c)}if(this.items=this.createItems())for(c=0;c<this.items.length;c++)b.addItem(this.items[c]);return b};e.createItems=function(){};e.createEl;e.buildWrapperCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";var e=Xa.prototype.buildCSSClass();
return"vjs-menu-button "+b+" "+e+" "+c.prototype.buildCSSClass.call(this)};e.buildCSSClass=function(){var b="vjs-menu-button";b=!0===this.options_.inline?b+"-inline":b+"-popup";return"vjs-menu-button "+b+" "+c.prototype.buildCSSClass.call(this)};e.controlText;e.dispose=function(){this.handleMouseLeave();c.prototype.dispose.call(this)};e.handleClick;
e.handleMouseLeave=function(b){this.removeClass("vjs-hover");T(document,"keyup",this.handleMenuKeyUp_)};e.focus=function(){this.menuButton_.focus()};e.blur=function(){this.menuButton_.blur()};e.handleKeyDown;e.handleMenuKeyUp=;e.handleSubmenuKeyPress=function(b){this.handleSubmenuKeyDown(b)};e.handleSubmenuKeyDown=function(b){if(M.isEventKey(b,"Esc")||M.isEventKey(b,"Tab"))this.buttonPressed_&&this.unpressButton(),M.isEventKey(b,"Tab")||(b.preventDefault(),this.menuButton_.focus())};e.pressButton;e.unpressButton;e.disable;e.enable;return f}(A);A.registerComponent("MenuButton",ze);var Ae=function(c){function f(e,
b){var f=b.tracks;e=c.call(this,e,b)||this;1>=e.items.length&&e.hide();if(!f)return O(e);var y=S(O(e),e.update);f.addEventListener("removetrack",y);f.addEventListener("addtrack",y);f.addEventListener("labelchange",y);e.player_.on("ready",y);e.player_.on("dispose",function(){f.removeEventListener("removetrack",y);f.removeEventListener("addtrack",y);f.removeEventListener("labelchange",y)});return e}F(f,c);return f}(ze);A.registerComponent("TrackButton",Ae);var Qk="Tab Esc Up Down Right Left".split(" "),
sc=function(c){function f(b,e){b=c.call(this,b,e)||this;b.selectable=e.selectable;b.isSelected_=e.selected||!1;b.multiSelectable=e.multiSelectable;b.selected(b.isSelected_);b.selectable?b.multiSelectable?b.el_.setAttribute("role","menuitemcheckbox"):b.el_.setAttribute("role","menuitemradio"):b.el_.setAttribute("role","menuitem");return b}F(f,c);var e=f.prototype;e.createEl=function(b,e,f){this.nonIconControl=!0;b=c.prototype.createEl.call(this,"li",E({className:"vjs-menu-item",tabIndex:-1},e),f);
b.replaceChild(Q("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),b.querySelector(".vjs-icon-placeholder"));return b};e.handleKeyDown;e.handleClick=function(b){this.selected(!0)};e.selected;return f}(cd);A.registerComponent("MenuItem",sc);var tc=function(c){function f(b,e){var f=e.track,p=b.textTracks();e.label=f.label||f.language||"Unknown";e.selected="showing"===f.mode;var a=c.call(this,b,e)||this;a.track=f;a.kinds=(e.kinds||[e.kind||a.track.kind]).filter(Boolean);var t=function(){for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];a.handleTracksChange.apply(O(a),c)},l=function(){for(var b=
arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];a.handleSelectedLanguageChange.apply(O(a),c)};b.on(["loadstart","texttrackchange"],t);p.addEventListener("change",t);p.addEventListener("selectedlanguagechange",l);a.on("dispose");if(void 0===p.onchange){var d;a.on(["tap","click"],function(){if("object"!==typeof window.Event)try{d=new window.Event("change")}catch(h){}d||
(d=document.createEvent("Event"),d.initEvent("change",!0,!0));p.dispatchEvent(d)})}a.handleTracksChange();return a}F(f,c);var e=f.prototype;e.handleClick=function(b){var e=this.track,f=this.player_.textTracks();c.prototype.handleClick.call(this,b);if(f)for(b=0;b<f.length;b++){var p=f[b];-1!==this.kinds.indexOf(p.kind)&&(p===e?"showing"!==p.mode&&(p.mode="showing"):"disabled"!==p.mode&&(p.mode="disabled"))}};e.handleTracksChange=function(b){b="showing"===this.track.mode;b!==this.isSelected_&&this.selected(b)};
e.handleSelectedLanguageChange;e.dispose=function(){this.track=null;c.prototype.dispose.call(this)};return f}(sc);A.registerComponent("TextTrackMenuItem",tc);var oh=function(c){function f(b,e){e.track={player:b,kind:e.kind,kinds:e.kinds,"default":!1,
mode:"disabled"};e.kinds||(e.kinds=[e.kind]);e.track.label=e.label?e.label:e.kinds.join(" and ")+" off";e.selectable=!0;e.multiSelectable=!1;return c.call(this,b,e)||this}F(f,c);var e=f.prototype;e.handleTracksChange=function(b){b=this.player().textTracks();for(var c=!0,e=0,f=b.length;e<f;e++){var a=b[e];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)};e.handleSelectedLanguageChange;return f}(tc);A.registerComponent("OffTextTrackMenuItem",oh);var Tb=function(c){function f(e,b){void 0===b&&(b={});b.tracks=e.textTracks();return c.call(this,e,b)||this}F(f,c);f.prototype.createItems=function(c,b){void 0===c&&(c=[]);void 0===b&&(b=tc);var e;this.label_&&(e=this.label_+" off");c.push(new oh(this.player_,
{kinds:this.kinds_,kind:this.kind_,label:e}));this.hideThreshold_+=1;e=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var f=0;f<e.length;f++){var p=e[f];if(-1<this.kinds_.indexOf(p.kind)){var a=new b(this.player_,{track:p,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+p.kind+"-menu-item");c.push(a)}}return c};return f}(Ae);A.registerComponent("TextTrackButton",Tb);var ph=function(c){function f(e,b){var f=b.track,y=b.cue,
p=e.currentTime();b.selectable=!0;b.multiSelectable=!1;b.label=y.text;b.selected=y.startTime<=p&&p<y.endTime;e=c.call(this,e,b)||this;e.track=f;e.cue=y;return e}F(f,c);f.prototype.handleClick=function(e){c.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime)};return f}(sc);A.registerComponent("ChaptersTrackMenuItem",ph);var Be=function(c){function f(b,e,f){var p=c.call(this,b,e,f)||this;p.selectCurrentItem_;return p}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-chapters-button "+c.prototype.buildCSSClass.call(this)};e.buildWrapperCSSClass=function(){return"vjs-chapters-button "+c.prototype.buildWrapperCSSClass.call(this)};e.update=function(b){b&&b.track&&"chapters"!==b.track.kind||(b=this.findChaptersTrack(),b!==this.track_?(this.setTrack(b),c.prototype.update.call(this)):(!this.items||b&&b.cues&&b.cues.length!==this.items.length)&&c.prototype.update.call(this))};e.setTrack=
function(b){if(this.track_!==b){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.removeEventListener("load",this.updateHandler_);this.track_.removeEventListener("cuechange",this.selectCurrentItem_);this.track_=null}if(this.track_=b)this.track_.mode="hidden",(b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&b.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",
this.selectCurrentItem_)}};e.findChaptersTrack;e.getMenuCaption;e.createMenu;e.createItems;return f}(Tb);Be.prototype.kind_="chapters";Be.prototype.controlText_="Chapters";A.registerComponent("ChaptersButton",Be);var Ce=function(c){function f(b,e,f){e=c.call(this,b,e,f)||this;var p=b.textTracks(),a=S(O(e),e.handleTracksChange);p.addEventListener("change",a);e.on("dispose",function(){p.removeEventListener("change",a)});return e}F(f,c);var e=f.prototype;e.handleTracksChange;e.buildCSSClass=function(){return"vjs-descriptions-button "+c.prototype.buildCSSClass.call(this)};e.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+c.prototype.buildWrapperCSSClass.call(this)};return f}(Tb);Ce.prototype.kind_="descriptions";Ce.prototype.controlText_="Descriptions";A.registerComponent("DescriptionsButton",Ce);var De=function(c){function f(b,
e,f){return c.call(this,b,e,f)||this}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-subtitles-button "+c.prototype.buildCSSClass.call(this)};e.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+c.prototype.buildWrapperCSSClass.call(this)};return f}(Tb);De.prototype.kind_="subtitles";De.prototype.controlText_="Subtitles";A.registerComponent("SubtitlesButton",De);var Ee=function(c){function f(e,b){b.track={player:e,kind:b.kind,label:b.kind+" settings",selectable:!1,"default":!1,
mode:"disabled"};b.selectable=!1;b.name="CaptionSettingsMenuItem";e=c.call(this,e,b)||this;e.addClass("vjs-texttrack-settings");e.controlText(", opens "+b.kind+" settings dialog");return e}F(f,c);f.prototype.handleClick;return f}(tc);A.registerComponent("CaptionSettingsMenuItem",Ee);var Fe=function(c)F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-captions-button "+c.prototype.buildCSSClass.call(this)};
e.buildWrapperCSSClass=function(){return"vjs-captions-button "+c.prototype.buildWrapperCSSClass.call(this)};e.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new Ee(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return c.prototype.createItems.call(this,b)};return f}(Tb);Fe.prototype.kind_="captions";Fe.prototype.controlText_="Captions";A.registerComponent("CaptionsButton",Fe);var qh=
function(c){function f(){return c.apply(this,arguments)||this}F(f,c);f.prototype.createEl=function(e,b,f){e=c.prototype.createEl.call(this,e,b,f);b=e.querySelector(".vjs-menu-item-text");"captions"===this.options_.track.kind&&(b.appendChild(Q("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),b.appendChild(Q("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")})));return e};return f}(tc);A.registerComponent("SubsCapsMenuItem",qh);var Ge=function(c){function f(b,
e){void 0===e&&(e={});b=c.call(this,b,e)||this;b.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(b.player_.language_)&&(b.label_="captions");b.menuButton_.controlText(da(b.label_));return b}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-subs-caps-button "+c.prototype.buildCSSClass.call(this)};e.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+c.prototype.buildWrapperCSSClass.call(this)};e.createItems=function(){var b=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||
!this.player().getChild("textTrackSettings")||(b.push(new Ee(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return b=c.prototype.createItems.call(this,b,qh)};return f}(Tb);Ge.prototype.kinds_=["captions","subtitles"];Ge.prototype.controlText_="Subtitles";A.registerComponent("SubsCapsButton",Ge);var rh=function(c){function f(b,e){var f=e.track,p=b.audioTracks();e.label=f.label||f.language||"Unknown";e.selected=f.enabled;var a=c.call(this,b,e)||this;a.track=f;a.addClass("vjs-"+f.kind+"-menu-item");
var k=function(){for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];a.handleTracksChange.apply(O(a),c)};p.addEventListener("change",k);a.on("dispose",function(){p.removeEventListener("change",k)});return a}F(f,c);var e=f.prototype;e.createEl=function(b,e,f){b=c.prototype.createEl.call(this,b,e,f);e=b.querySelector(".vjs-menu-item-text");"main-desc"===this.options_.track.kind&&(e.appendChild(Q("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),e.appendChild(Q("span",{className:"vjs-control-text",
textContent:" "+this.localize("Descriptions")})));return b};e.handleClick=function(b){c.prototype.handleClick.call(this,b);this.track.enabled=!0;if(this.player_.tech_.featuresNativeAudioTracks){b=this.player_.audioTracks();for(var e=0;e<b.length;e++){var f=b[e];f!==this.track&&(f.enabled=f===this.track)}}};e.handleTracksChange;return f}(sc);A.registerComponent("AudioTrackMenuItem",rh);var sh=function(c)F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-audio-button "+c.prototype.buildCSSClass.call(this)};e.buildWrapperCSSClass=function(){return"vjs-audio-button "+c.prototype.buildWrapperCSSClass.call(this)};e.createItems=function(b){void 0===b&&(b=[]);this.hideThreshold_=1;for(var c=this.player_.audioTracks(),e=0;e<c.length;e++)b.push(new rh(this.player_,{track:c[e],selectable:!0,multiSelectable:!1}));return b};return f}(Ae);sh.prototype.controlText_="Audio Track";
A.registerComponent("AudioTrackButton",sh);var He=function(c){function f(b,e){var f=e.rate,p=parseFloat(f,10);e.label=f;e.selected=p===b.playbackRate();e.selectable=!0;e.multiSelectable=!1;var a=c.call(this,b,e)||this;a.label=f;a.rate=p;a.on(b,"ratechange",function(b){return a.update(b)});return a}F(f,c);var e=f.prototype;e.handleClick;e.update;
return f}(sc);He.prototype.contentElType="button";A.registerComponent("PlaybackRateMenuItem",He);var th=function(c){function f(b,e){var f=c.call(this,b,e)||this;f.menuButton_.el_.setAttribute("aria-describedby",f.labelElId_);f.updateVisibility();f.updateLabel();f.on(b,"loadstart",function(b){return f.updateVisibility(b)});f.on(b,"ratechange",function(b){return f.updateLabel(b)});f.on(b,"playbackrateschange",function(b){return f.handlePlaybackRateschange(b)});return f}F(f,c);var e=f.prototype;e.createEl=;e.dispose=function(){this.labelEl_=null;c.prototype.dispose.call(this)};e.buildCSSClass=function(){return"vjs-playback-rate "+c.prototype.buildCSSClass.call(this)};e.buildWrapperCSSClass=function(){return"vjs-playback-rate "+c.prototype.buildWrapperCSSClass.call(this)};
e.createItems;e.updateARIAAttributes;e.handleClick=function(b){var c=this.player().playbackRate();b=this.playbackRates();c=(b.indexOf(c)+1)%b.length;this.player().playbackRate(b[c])};e.handlePlaybackRateschange;e.playbackRates;e.playbackRateSupported;e.updateVisibility;e.updateLabel;return f}(ze);th.prototype.controlText_="Playback Rate";A.registerComponent("PlaybackRateMenuButton",
th);var uh=function(c){function f(){return c.apply(this,arguments)||this}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-spacer "+c.prototype.buildCSSClass.call(this)};e.createEl;return f}(A);A.registerComponent("Spacer",uh);var Rk=function(c){function f(){return c.apply(this,arguments)||this}F(f,c);var e=f.prototype;
e.buildCSSClass=function(){return"vjs-custom-control-spacer "+c.prototype.buildCSSClass.call(this)};e.createEl;return f}(uh);A.registerComponent("CustomControlSpacer",Rk);var ed=function(c){function f(){return c.apply(this,arguments)||this}F(f,c);f.prototype.createEl;return f}(A);ed.prototype.options_=
{children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};"exitPictureInPicture"in document&&ed.prototype.options_.children.splice(ed.prototype.options_.children.length-1,0,"pictureInPictureToggle");A.registerComponent("ControlBar",ed);var vh=function(c){function f(b,e){var f=c.call(this,
b,e)||this;f.on(b,"error",function(b){return f.open(b)});return f}F(f,c);var e=f.prototype;e.buildCSSClass=function(){return"vjs-error-display "+c.prototype.buildCSSClass.call(this)};e.content;return f}(Nb);vh.prototype.options_=Qa({},Nb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});A.registerComponent("ErrorDisplay",vh);var wh=["#000","Black"],xh=["#00F","Blue"],yh=["#0FF","Cyan"],zh=["#0F0",
"Green"],Ah=["#F0F","Magenta"],Bh=["#F00","Red"],Ch=["#FFF","White"],Dh=["#FF0","Yellow"],Ie=["1","Opaque"],Je=["0.5","Semi-Transparent"],Eh=["0","Transparent"],Cb={backgroundColor:{selector:".vjs-bg-color \x3e select",id:"captions-background-color-%s",label:"Color",options:[wh,Ch,Bh,zh,xh,Dh,Ah,yh]},backgroundOpacity:{selector:".vjs-bg-opacity \x3e select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ie,Je,Eh]},color:{selector:".vjs-fg-color \x3e select",id:"captions-foreground-color-%s",
label:"Color",options:[Ch,wh,Bh,zh,xh,Dh,Ah,yh]},edgeStyle:{selector:".vjs-edge-style \x3e select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family \x3e select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],
["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent \x3e select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser},textOpacity:{selector:".vjs-text-opacity \x3e select",id:"captions-foreground-opacity-%s",
label:"Transparency",options:[Ie,Je]},windowColor:{selector:".vjs-window-color \x3e select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity \x3e select",id:"captions-window-opacity-%s",label:"Transparency",options:[Eh,Je,Ie]}};Cb.windowColor.options=Cb.backgroundColor.options;var Sk=function(c){function f(b,e){e.temporary=!1;var f=c.call(this,b,e)||this;f.updateDisplay=f.updateDisplay.bind(O(f));f.fill();f.hasBeenOpened_=f.hasBeenFilled_=!0;f.endDialog=Q("p",
{className:"vjs-control-text",textContent:f.localize("End of dialog window.")});f.el().appendChild(f.endDialog);f.setDefaults();void 0===e.persistTextTrackSettings&&(f.options_.persistTextTrackSettings=f.options_.playerOptions.persistTextTrackSettings);f.on(f.$(".vjs-done-button"),"click",function(){f.saveSettings();f.close()});f.on(f.$(".vjs-default-button"),"click");x(Cb);f.options_.persistTextTrackSettings&&
f.restoreSettings();return f}F(f,c);var e=f.prototype;e.dispose=function(){this.endDialog=null;c.prototype.dispose.call(this)};e.createElSelect_=function(b,c,e){var f=this;void 0===c&&(c="");void 0===e&&(e="label");b=Cb[b];var a=b.id.replace("%s",this.id_),k=[c,a].join(" ").trim();return["\x3c"+e+' id\x3d"'+a+'" class\x3d"'+("label"===e?"vjs-label":"")+'"\x3e',this.localize(b.label),"\x3c/"+e+"\x3e",'\x3cselect aria-labelledby\x3d"'+k+'"\x3e'].concat(b.options.map)).concat("\x3c/select\x3e").join("")};e.createElFgColor_=function(){var b="captions-text-legend-"+this.id_;return['\x3cfieldset class\x3d"vjs-fg-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+b+'"\x3e',this.localize("Text"),"\x3c/legend\x3e",this.createElSelect_("color",b),'\x3cspan class\x3d"vjs-text-opacity vjs-opacity"\x3e',this.createElSelect_("textOpacity",
b),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")};e.createElBgColor_=function(){var b="captions-background-"+this.id_;return['\x3cfieldset class\x3d"vjs-bg-color vjs-track-setting"\x3e','\x3clegend id\x3d"'+b+'"\x3e',this.localize("Background"),"\x3c/legend\x3e",this.createElSelect_("backgroundColor",b),'\x3cspan class\x3d"vjs-bg-opacity vjs-opacity"\x3e',this.createElSelect_("backgroundOpacity",b),"\x3c/span\x3e\x3c/fieldset\x3e"].join("")};e.createElWinColor_;e.createElColors_;
e.createElFont_;e.createElControls_=;e.content;e.label=function(){return this.localize("Caption Settings Dialog")};e.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};e.buildCSSClass;e.getValues=function(){var b=this;return D(Cb,function(c,e,f){var a=b.$(e.selector);e=Yf(a.options[a.options.selectedIndex].value,e.parser);void 0!==e&&(c[f]=e);return c},{})};e.setValues=
function(b){var c=this;x(Cb,function(e,f){var a=c.$(e.selector);f=b[f];e=e.parser;if(f)for(var p=0;p<a.options.length;p++)if(Yf(a.options[p].value,e)===f){a.selectedIndex=p;break}})};e.setDefaults;e.restoreSettings=function(){try{var b=JSON.parse(window.localStorage.getItem("vjs-text-track-settings"))}catch(t){P.warn(t)}b&&this.setValues(b)};e.saveSettings;e.updateDisplay;e.conditionalBlur_=function(){this.previouslyActiveEl_=null;var b=this.player_.controlBar,c=b&&b.subsCapsButton;b=b&&b.captionsButton;c?c.focus():b&&b.focus()};return f}(Nb);A.registerComponent("TextTrackSettings",
Sk);var Tk=function(c){function f(b,e){var f=e.ResizeObserver||window.ResizeObserver;null===e.ResizeObserver&&(f=!1);var p=U({createEl:!f,reportTouchActivity:!1},e);var a=c.call(this,b,p)||this;a.ResizeObserver=e.ResizeObserver||window.ResizeObserver;a.loadListener_=null;a.resizeObserver_=null;a.debouncedHandler_=gk(function(){a.resizeHandler()},100,!1,O(a));f?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(b.el())):(a.loadListener_,a.one("load",a.loadListener_));return a}F(f,c);var e=f.prototype;e.createEl;e.resizeHandler;
e.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;c.prototype.dispose.call(this)};return f}(A);A.registerComponent("ResizeManager",
Tk);var Uk={trackingThreshold:20,liveTolerance:15},Vk=function(c){function f(b,e){e=U(Uk,e,{createEl:!1});var f=c.call(this,b,e)||this;f.handleVisibilityChange_=function(b){return f.handleVisibilityChange(b)};f.trackLiveHandler_=function(){return f.trackLive_()};f.handlePlay_=function(b){return f.handlePlay(b)};f.handleFirstTimeupdate_=function(b){return f.handleFirstTimeupdate(b)};f.handleSeeked_=function(b){return f.handleSeeked(b)};f.seekToLiveEdge_=function(b){return f.seekToLiveEdge(b)};f.reset_();
f.on(f.player_,"durationchange",function(b){return f.handleDurationchange(b)});f.on(f.player_,"canplay",function(){return f.toggleTracking()});if(oc&&"hidden"in document&&"visibilityState"in document)f.on(document,"visibilitychange",f.handleVisibilityChange_);return f}F(f,c);var e=f.prototype;e.handleVisibilityChange=function(){Infinity===this.player_.duration()&&(document.hidden?this.stopTracking():this.startTracking())};e.trackLive_=function(){var b=this.player_.seekable();if(b&&b.length){b=Number(window.performance.now().toFixed(4));
var c=-1===this.lastTime_?0:(b-this.lastTime_)/1E3;this.lastTime_=b;this.pastSeekEnd_=this.pastSeekEnd()+c;b=this.liveCurrentTime();c=this.player_.currentTime();c=this.player_.paused()||this.seekedBehindLive_||Math.abs(b-c)>this.options_.liveTolerance;this.timeupdateSeen_&&Infinity!==b||(c=!1);c!==this.behindLiveEdge_&&(this.behindLiveEdge_=c,this.trigger("liveedgechange"))}};e.handleDurationchange=function(){this.toggleTracking()};e.toggleTracking=function(){Infinity===this.player_.duration()&&this.liveWindow()>=
this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())};e.startTracking=function(){if(!this.isTracking())if(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_)this.on(this.player_,"seeked",
this.handleSeeked_);else this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)};e.handleFirstTimeupdate;e.handleSeeked=function(){var b=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<b;this.nextSeekedFromUser_=!1;this.trackLive_()};e.handlePlay;
e.reset_=function(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=!0;this.nextSeekedFromUser_=this.seekedBehindLive_=this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLiveHandler_);this.off(this.player_,"seeked",this.handleSeeked_);this.off(this.player_,"play",this.handlePlay_);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_);this.off(this.player_,"timeupdate",
this.seekToLiveEdge_)};e.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0};e.stopTracking;e.seekableEnd=function(){for(var b=this.player_.seekable(),c=[],e=b?b.length:0;e--;)c.push(b.end(e));return c.length?c.sort()[c.length-1]:Infinity};e.seekableStart;e.liveWindow;e.isLive;e.atLiveEdge;e.liveCurrentTime;e.pastSeekEnd;e.behindLiveEdge=function(){return this.behindLiveEdge_};e.isTracking;
e.seekToLiveEdge=function(){this.seekedBehindLive_=!1;this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))};e.dispose;return f}(A);A.registerComponent("LiveTracker",Vk);var Ke=function(c){var f=c.el();if(f.hasAttribute("src"))return c.triggerSourceset(f.src),!0;f=c.$$("source");var e=[],b="";if(!f.length)return!1;for(var t=0;t<
f.length;t++){var y=f[t].src;y&&-1===e.indexOf(y)&&e.push(y)}if(!e.length)return!1;1===e.length&&(b=e[0]);c.triggerSourceset(b);return!0},Wk=Object.defineProperty({},"innerHTML",{get,set:function(c){var f=document.createElement(this.nodeName.toLowerCase());f.innerHTML=c;for(c=document.createDocumentFragment();f.childNodes.length;)c.appendChild(f.childNodes[0]);this.innerText="";window.Element.prototype.appendChild.call(this,c);return this.innerHTML}}),
Fh,Gh=function(c){var f=c.el();if(!f.resetSourceWatch_){var e={},b=Fh([c.el(),window.HTMLMediaElement.prototype,window.Element.prototype,Wk],"innerHTML"),t=function(b){return function(){for(var e=arguments.length,a=Array(e),k=0;k<e;k++)a[k]=arguments[k];e=b.apply(f,a);Ke(c);return e}};["append","appendChild","insertAdjacentHTML"].forEach);Object.defineProperty(f,"innerHTML",U(b,{set:t(b.set)}));f.resetSourceWatch_;c.one("sourceset",f.resetSourceWatch_)}},Xk=Object.defineProperty({},"src",{get,set}),Yk=
function(c){if(c.featuresSourceset){var f=c.el();if(!f.resetSourceset_){var e=Fh([c.el(),window.HTMLMediaElement.prototype,Xk],"src"),b=f.setAttribute,t=f.load;Object.defineProperty(f,"src",U(e,{set:function(b){b=e.set.call(f,b);c.triggerSourceset(f.src);return b}}));f.setAttribute=function(e,p){p=b.call(f,e,p);/src/i.test(e)&&c.triggerSourceset(f.src);return p};f.load=function(){var b=t.call(f);Ke(c)||(c.triggerSourceset(""),Gh(c));return b};f.currentSrc?c.triggerSourceset(f.currentSrc):Ke(c)||Gh(c);
f.resetSourceset_}}},Le,I=function(c){function f(b,e){e=c.call(this,b,e)||this;var f=b.source,p=!1;e.featuresVideoFrameCallback=
e.featuresVideoFrameCallback&&"VIDEO"===e.el_.tagName;f&&(e.el_.currentSrc!==f.src||b.tag&&3===b.tag.initNetworkState_)?e.setSource(f):e.handleLateInit_(e.el_);b.enableSourceset&&e.setupSourcesetHandling_();e.isScrubbing_=!1;if(e.el_.hasChildNodes()){var a=e.el_.childNodes,k=a.length;for(f=[];k--;){var l=a[k];"track"===l.nodeName.toLowerCase()&&(e.featuresNativeTextTracks?(e.remoteTextTrackEls().addTrackElement_(l),e.remoteTextTracks().addTrack(l.track),e.textTracks().addTrack(l.track),p||e.el_.hasAttribute("crossorigin")||
!bd(l.src)||(p=!0)):f.push(l))}for(a=0;a<f.length;a++)e.el_.removeChild(f[a])}e.proxyNativeTracks_();e.featuresNativeTextTracks&&p&&P.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");e.restoreMetadataTracksInIOSNativePlayer_();(Lb||ie||Fg)&&!0===b.nativeControlsForTouch&&e.setControls(!0);e.proxyWebkitFullscreen_();e.triggerReady();return e}F(f,c);var e=f.prototype;e.dispose;e.setupSourcesetHandling_;e.restoreMetadataTracksInIOSNativePlayer_=function(){var b=this.textTracks(),c,e;e();b.addEventListener("change",e);this.on("dispose",function(){return b.removeEventListener("change",e)});var f;this.on("webkitbeginfullscreen",function(){b.removeEventListener("change",e);b.removeEventListener("change",f);b.addEventListener("change",f)});this.on("webkitendfullscreen")};e.overrideNative_;e.overrideNativeAudioTracks=function(b){this.overrideNative_("Audio",b)};e.overrideNativeVideoTracks=function(b){this.overrideNative_("Video",b)};e.proxyNativeTracksForType_=function(b){var c=this,e=Oa[b],f=this.el()[e.getterName],
a=this[e.getterName]();if(this["featuresNative"+e.capitalName+"Tracks"]&&f&&f.addEventListener){var k={change:function(e){e={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(e);"text"===b&&c[Qb.remoteText.getterName]().trigger(e)},addtrack:function(b){a.addTrack(b.track)},removetrack},l;this[e.getterName+
"Listeners_"]=k;Object.keys(k).forEach);this.on("loadstart",l);this.on("dispose")}};e.proxyNativeTracks_;e.createEl=function(){var b=this.options_.tag;if(!b||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(b){var c=b.cloneNode(!0);b.parentNode&&b.parentNode.insertBefore(c,
b);f.disposeMediaElement(b);b=c}else b=document.createElement("video"),c=this.options_.tag&&Va(this.options_.tag),c=U({},c),Lb&&!0===this.options_.nativeControlsForTouch||delete c.controls,Cf(b,E(c,{id:this.options_.techId,"class":"vjs-tech"}));b.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&b.setAttribute("preload",this.options_.preload);void 0!==this.options_.disablePictureInPicture&&(b.disablePictureInPicture=this.options_.disablePictureInPicture);c=["loop","muted",
"playsinline","autoplay"];for(var e=0;e<c.length;e++){var p=c[e],a=this.options_[p];"undefined"!==typeof a&&(a?b.setAttribute(p,p):b.removeAttribute(p),b[p]=a)}return b};e.handleLateInit_=function(b){if(0!==b.networkState&&3!==b.networkState)if(0===b.readyState){var c=!1,e=function(){c=!0};this.on("loadstart",e);var f;this.on("loadedmetadata",f);this.ready)}else{var a=
["loadstart"];a.push("loadedmetadata");2<=b.readyState&&a.push("loadeddata");3<=b.readyState&&a.push("canplay");4<=b.readyState&&a.push("canplaythrough");this.ready)}};e.setScrubbing=function(b){this.isScrubbing_=b};e.scrubbing=function(){return this.isScrubbing_};e.setCurrentTime;e.duration=function(){var b=
this;return Infinity===this.el_.duration&&gb&&hb&&0===this.el_.currentTime?(this.on("timeupdate",function y(){0<b.el_.currentTime&&(Infinity===b.el_.duration&&b.trigger("durationchange"),b.off("timeupdate",y))}),NaN):this.el_.duration||NaN};e.width=function(){return this.el_.offsetWidth};e.height=function(){return this.el_.offsetHeight};e.proxyWebkitFullscreen_=function(){var b=this;if("webkitDisplayingFullscreen"in this.el_){var c,e;this.on("webkitbeginfullscreen",e);this.on("dispose",function(){b.off("webkitbeginfullscreen",e);b.off("webkitendfullscreen",c)})}};e.supportsFullScreen;e.enterFullScreen;e.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():
this.trigger("fullscreenerror",Error("The video is not fullscreen"))};e.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()};e.requestVideoFrameCallback;e.cancelVideoFrameCallback;e.src;e.reset;e.currentSrc;e.setControls;e.addTextTrack;e.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,
b);var e=document.createElement("track");b.kind&&(e.kind=b.kind);b.label&&(e.label=b.label);if(b.language||b.srclang)e.srclang=b.language||b.srclang;b["default"]&&(e["default"]=b["default"]);b.id&&(e.id=b.id);b.src&&(e.src=b.src);return e};e.addRemoteTextTrack=function(b,e){b=c.prototype.addRemoteTextTrack.call(this,b,e);this.featuresNativeTextTracks&&this.el().appendChild(b);return b};e.removeRemoteTextTrack;e.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var b={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(b.droppedVideoFrames=this.el().webkitDroppedFrameCount,b.totalVideoFrames=this.el().webkitDecodedFrameCount);window.performance&&"function"===typeof window.performance.now?
b.creationTime=window.performance.now():window.performance&&window.performance.timing&&"number"===typeof window.performance.timing.navigationStart&&(b.creationTime=window.Date.now()-window.performance.timing.navigationStart);return b};return f}(W);Le(I,"TEST_VID");I.isSupported;I.canPlayType=function(c){return I.TEST_VID.canPlayType(c)};I.canPlaySource=function(c,f){return I.canPlayType(c.type)};I.canControlVolume;I.canMuteVolume=function(){try{var c=I.TEST_VID.muted;I.TEST_VID.muted=!c;I.TEST_VID.muted?I.TEST_VID.setAttribute("muted",
"muted"):I.TEST_VID.removeAttribute("muted");return c!==I.TEST_VID.muted}catch(f){return!1}};I.canControlPlaybackRate=function(){if(gb&&hb&&58>Hg)return!1;try{var c=I.TEST_VID.playbackRate;I.TEST_VID.playbackRate=c/2+.1;return c!==I.TEST_VID.playbackRate}catch(f){return!1}};I.canOverrideAttributes;I.supportsNativeTextTracks;I.supportsNativeVideoTracks=function(){return!(!I.TEST_VID||!I.TEST_VID.videoTracks)};I.supportsNativeAudioTracks;I.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");
[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(c){var f=c[1];Le(I.prototype,c[0],function(){return I[f]()},!0)});I.prototype.featuresVolumeControl=I.canControlVolume();I.prototype.movingMediaElementInDOM=!sa;I.prototype.featuresFullscreenResize=
!0;I.prototype.featuresProgressEvents=!0;I.prototype.featuresTimeupdateEvents=!0;I.prototype.featuresVideoFrameCallback=!(!I.TEST_VID||!I.TEST_VID.requestVideoFrameCallback);var fd;I.patchCanPlayType=function(){4<=fe&&!Gg&&!hb&&(fd=I.TEST_VID&&I.TEST_VID.constructor.prototype.canPlayType,I.TEST_VID.constructor.prototype.canPlayType)};I.unpatchCanPlayType;I.patchCanPlayType();I.disposeMediaElement=function(c){if(c){for(c.parentNode&&c.parentNode.removeChild(c);c.hasChildNodes();)c.removeChild(c.firstChild);c.removeAttribute("src");if("function"===typeof c.load)try{c.load()}catch(f){}}};I.resetMediaElement=function(c){if(c){for(var f=c.querySelectorAll("source"),e=f.length;e--;)c.removeChild(f[e]);c.removeAttribute("src");if("function"===typeof c.load)try{c.load()}catch(b){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach);["muted","defaultMuted","autoplay","loop","playsinline"].forEach);"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate disablePictureInPicture played networkState readyState videoWidth videoHeight crossOrigin".split(" ").forEach);
"volume src poster preload playbackRate defaultPlaybackRate disablePictureInPicture crossOrigin".split(" ").forEach);["pause","load","play"].forEach);W.withSourceHandlers(I);I.nativeSourceHandler={};I.nativeSourceHandler.canPlayType;I.nativeSourceHandler.canHandleSource;I.nativeSourceHandler.handleSource;I.nativeSourceHandler.dispose=function(){};I.registerSourceHandler(I.nativeSourceHandler);W.registerTech("Html5",I);var Hh="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),Me={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ne="tiny xsmall small medium large xlarge huge".split(" "),
gd={};Ne.forEach);var Zk={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity},la=function(c){function f(b,e,y){b.id=b.id||e.id||"vjs_video_"+bb++;e=E(f.getTagSettings(b),e);e.initChildren=!1;e.createEl=!1;e.evented=!1;e.reportTouchActivity=!1;if(!e.language)if("function"===typeof b.closest){var p=b.closest("[lang]");p&&p.getAttribute&&(e.language=p.getAttribute("lang"))}else for(p=b;p&&1===
p.nodeType;){if(Va(p).hasOwnProperty("lang")){e.language=p.getAttribute("lang");break}p=p.parentNode}var a=c.call(this,null,e,y)||this;a.boundDocumentFullscreenChange_=function(b){return a.documentFullscreenChange_(b)};a.boundFullWindowOnEscKey_=function(b){return a.fullWindowOnEscKey(b)};a.boundUpdateStyleEl_=function(b){return a.updateStyleEl_(b)};a.boundApplyInitTime_=function(b){return a.applyInitTime_(b)};a.boundUpdateCurrentBreakpoint_=function(b){return a.updateCurrentBreakpoint_(b)};a.boundHandleTechClick_=
function(b){return a.handleTechClick_(b)};a.boundHandleTechDoubleClick_=function(b){return a.handleTechDoubleClick_(b)};a.boundHandleTechTouchStart_=function(b){return a.handleTechTouchStart_(b)};a.boundHandleTechTouchMove_=function(b){return a.handleTechTouchMove_(b)};a.boundHandleTechTouchEnd_=function(b){return a.handleTechTouchEnd_(b)};a.boundHandleTechTap_=function(b){return a.handleTechTap_(b)};a.isFullscreen_=!1;a.log=Cg(a.id_);a.fsApi_=Ec;a.isPosterFromTech_=!1;a.queuedCallbacks_=[];a.isReady_=
!1;a.hasStarted_=!1;a.userActive_=!1;a.debugEnabled_=!1;a.audioOnlyMode_=!1;a.audioPosterMode_=!1;a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]};if(!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");a.tag=b;a.tagAttributes=b&&Va(b);a.language(a.options_.language);if(e.languages){var k={};Object.getOwnPropertyNames(e.languages).forEach);a.languages_=k}else a.languages_=f.prototype.options_.languages;a.resetCache_();a.poster_=e.poster||"";a.controls_=!!e.controls;b.controls=!1;b.removeAttribute("controls");a.changingSrc_=!1;a.playCallbacks_=[];a.playTerminatedQueue_=[];b.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay);e.plugins&&Object.keys(e.plugins).forEach(function(b){if("function"!==typeof a[b])throw Error('plugin "'+b+'" does not exist');});a.scrubbing_=!1;a.el_=a.createEl();Jd(O(a),{eventBusKey:"el_"});
a.fsApi_.requestFullscreen&&(Da(document,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_));if(a.fluid_)a.on(["playerreset","resize"],a.boundUpdateStyleEl_);y=U(a.options_);e.plugins&&Object.keys(e.plugins).forEach);e.debug&&a.debug(!0);a.options_.playerOptions=y;a.middleware_=[];a.playbackRates(e.playbackRates);a.initChildren();a.isAudio("audio"===b.nodeName.toLowerCase());a.controls()?a.addClass("vjs-controls-enabled"):
a.addClass("vjs-controls-disabled");a.el_.setAttribute("role","region");a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player"));a.isAudio()&&a.addClass("vjs-audio");a.flexNotSupported_()&&a.addClass("vjs-no-flex");Lb&&a.addClass("vjs-touch-enabled");sa||a.addClass("vjs-workinghover");f.players[a.id_]=O(a);a.addClass("vjs-v7");a.userActive(!0);a.reportUserActivity();a.one("play",function(b){return a.listenForUserActivity_(b)});
a.on("stageclick",function(b){return a.handleStageClick_(b)});a.on("keydown",function(b){return a.handleKeyDown(b)});a.on("languagechange",function(b){return a.handleLanguagechange(b)});a.breakpoints(a.options_.breakpoints);a.responsive(a.options_.responsive);a.on("ready");return a}F(f,c);var e=f.prototype;e.dispose=function(){var b=this;this.trigger("dispose");this.off("dispose");T(document,this.fsApi_.fullscreenchange,
this.boundDocumentFullscreenChange_);T(document,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);f.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Rd[this.id()]=null;Ga.names.forEach(function(c){(c=
b[Ga[c].getterName]())&&c.off&&c.off()});c.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})};e.createEl=function(){var b=this.tag,e=this.playerElIngest_=b.parentNode&&b.parentNode.hasAttribute&&b.parentNode.hasAttribute("data-vjs-player"),f="video-js"===this.tag.tagName.toLowerCase();if(e)var p=this.el_=b.parentNode;else f||(p=this.el_=c.prototype.createEl.call(this,"div"));var a=Va(b);if(f){p=this.el_=b;for(b=this.tag=document.createElement("video");p.children.length;)b.appendChild(p.firstChild);
wb(p,"video-js")||ca(p,"video-js");p.appendChild(b);e=this.playerElIngest_=p;Object.keys(p).forEach)}b.setAttribute("tabindex","-1");a.tabindex="-1";if(oc||hb&&Ig)b.setAttribute("role","application"),a.role="application";b.removeAttribute("width");b.removeAttribute("height");"width"in a&&delete a.width;"height"in a&&delete a.height;Object.getOwnPropertyNames(a).forEach);b.playerId=b.id;
b.id+="_html5_api";b.className="vjs-tech";b.player=p.player=this;this.addClass("vjs-paused");if(!0!==window.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Lg("vjs-styles-dimensions");var k=Na(".vjs-styles-defaults"),l=Na("head");l.insertBefore(this.styleEl_,k?k.nextSibling:l.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||
this.options_.crossorigin);k=b.getElementsByTagName("a");for(l=0;l<k.length;l++){var d=k.item(l);ca(d,"vjs-hidden");d.setAttribute("hidden","hidden")}b.initNetworkState_=b.networkState;b.parentNode&&!e&&b.parentNode.insertBefore(p,b);vb(b,p);this.children_.unshift(b);this.el_.setAttribute("lang",this.language_);this.el_.setAttribute("translate","no");return this.el_=p};e.crossOrigin;e.width=function(b){return this.dimension("width",b)};e.height;e.dimension=function(b,c){var e=b+"_";if(void 0===c)return this[e]||0;if(""===c||"auto"===c)this[e]=void 0,this.updateStyleEl_();else{var f=parseFloat(c);isNaN(f)?P.error('Improper value "'+c+'" supplied for for '+b):(this[e]=f,this.updateStyleEl_())}};e.fluid=function(b){var c=this;if(void 0===b)return!!this.fluid_;this.fluid_=!!b;db(this)&&this.off(["playerreset",
"resize"],this.boundUpdateStyleEl_);b?(this.addClass("vjs-fluid"),this.fill(!1),hk(this)):this.removeClass("vjs-fluid");this.updateStyleEl_()};e.fill=function(b){if(void 0===b)return!!this.fill_;this.fill_=!!b;b?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")};e.aspectRatio=function(b){if(void 0===b)return this.aspectRatio_;if(!/^\d+:\d+$/.test(b))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
this.aspectRatio_=b;this.fluid(!0);this.updateStyleEl_()};e.updateStyleEl_=function(){if(!0===window.VIDEOJS_NO_DYNAMIC_STYLE){var b="number"===typeof this.width_?this.width_:this.options_.width,c="number"===typeof this.height_?this.height_:this.options_.height,e=this.tech_&&this.tech_.el();e&&(0<=b&&(e.width=b),0<=c&&(e.height=c))}else{b=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var f=
b[1]/b[0];b=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/f:this.videoWidth()||300;c=void 0!==this.height_?this.height_:b*f;e=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(e);Mg(this.styleEl_,"\n      ."+e+" {\n        width: "+b+"px;\n        height: "+c+"px;\n      }\n\n      ."+e+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*f+"%;\n      }\n    ")}};e.loadTech_=function(b,c){var e=this;this.tech_&&this.unloadTech_();
var f=da(b),a=b.charAt(0).toLowerCase()+b.slice(1);"Html5"!==f&&this.tag&&(W.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=f;this.isReady_=!1;var k=this.autoplay();if("string"===typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)k=!1;var l={source:c,autoplay:k,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,
loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ga.names.forEach);E(l,this.options_[f]);E(l,this.options_[a]);E(l,this.options_[b.toLowerCase()]);
this.tag&&(l.tag=this.tag);c&&c.src===this.cache_.src&&0<this.cache_.currentTime&&(l.startTime=this.cache_.currentTime);b=W.getTech(b);if(!b)throw Error("No Tech named '"+f+"' exists! '"+f+"' should be registered using videojs.registerTech()'");this.tech_=new b(l);this.tech_.ready(S(this,this.handleTechReady_),!0);Qg.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Hh.forEach);Object.keys(Me).forEach(function(b){e.on(e.tech_,
b,function(c){if(0===e.tech_.playbackRate()&&e.tech_.seeking())e.queuedCallbacks_.push({callback:e["handleTech"+Me[b]+"_"].bind(e),event:c});else e["handleTech"+Me[b]+"_"](c)})});this.on(this.tech_,"loadstart",function(b){return e.handleTechLoadStart_(b)});this.on(this.tech_,"sourceset",function(b){return e.handleTechSourceset_(b)});this.on(this.tech_,"waiting",function(b){return e.handleTechWaiting_(b)});this.on(this.tech_,"ended",function(b){return e.handleTechEnded_(b)});this.on(this.tech_,"seeking",
function(b){return e.handleTechSeeking_(b)});this.on(this.tech_,"play",function(b){return e.handleTechPlay_(b)});this.on(this.tech_,"firstplay",function(b){return e.handleTechFirstPlay_(b)});this.on(this.tech_,"pause",function(b){return e.handleTechPause_(b)});this.on(this.tech_,"durationchange",function(b){return e.handleTechDurationChange_(b)});this.on(this.tech_,"fullscreenchange",function(b,c){return e.handleTechFullscreenChange_(b,c)});this.on(this.tech_,"fullscreenerror");this.on(this.tech_,"enterpictureinpicture",function(b){return e.handleTechEnterPictureInPicture_(b)});this.on(this.tech_,"leavepictureinpicture",function(b){return e.handleTechLeavePictureInPicture_(b)});this.on(this.tech_,"error",function(b){return e.handleTechError_(b)});this.on(this.tech_,"posterchange",function(b){return e.handleTechPosterChange_(b)});this.on(this.tech_,"textdata",function(b){return e.handleTechTextData_(b)});this.on(this.tech_,"ratechange",function(b){return e.handleTechRateChange_(b)});
this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===f&&this.tag||vb(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};e.unloadTech_=function(){var b=this;Ga.names.forEach);this.textTracksJson_=Qg.textTracksToJson(this.tech_);this.isReady_=
!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};e.tech;e.addTechControlsListeners_;e.removeTechControlsListeners_;e.handleTechReady_;e.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();this.paused()?
(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())};e.manualAutoplay_=function(b){var c=this;if(this.tech_&&"string"===typeof b){var e=function(){var b=c.muted();c.muted(!0);var e=function(){c.muted(b)};c.playTerminatedQueue_.push(e);var f=c.play();if(cc(f))return f["catch"](function(b){e();throw Error("Rejection at manualAutoplay. Restoring muted value. "+
(b?b:""));})};if("any"!==b||this.muted())var f="muted"!==b||this.muted()?this.play():e();else f=this.play(),cc(f)&&(f=f["catch"](e));if(cc(f))return f.then(function(){c.trigger({type:"autoplay-success",autoplay:b})})["catch"](function(){c.trigger({type:"autoplay-failure",autoplay:b})})}};e.updateSourceCaches_=function(b){void 0===b&&(b="");var c=b,e="";"string"!==typeof c&&(c=b.src,e=b.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];c&&!e&&(e=Ak(this,c));
this.cache_.source=U({},b,{src:c,type:e});b=this.cache_.sources.filter);e=[];for(var f=this.$$("source"),a=[],k=0;k<f.length;k++){var l=Va(f[k]);e.push(l);l.src&&l.src===c&&a.push(l.src)}a.length&&!b.length?this.cache_.sources=e:b.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=c};e.handleTechSourceset_=function(b){var c=this;if(!this.changingSrc_){var e=function(b){return c.updateSourceCaches_(b)},f=this.currentSource().src,a=b.src;f&&!/^blob:/.test(f)&&
/^blob:/.test(a)&&(!this.lastSource_||this.lastSource_.tech!==a&&this.lastSource_.player!==f)&&(e=function(){});e(a);b.src||this.tech_.any(["sourceset","loadstart"])}this.lastSource_={player:this.currentSource().src,tech:b.src};this.trigger({src:b.src,type:"sourceset"})};e.hasStarted=function(b){if(void 0===b)return this.hasStarted_;b!==this.hasStarted_&&((this.hasStarted_=b)?(this.addClass("vjs-has-started"),
this.trigger("firstplay")):this.removeClass("vjs-has-started"))};e.handleTechPlay_;e.handleTechRateChange_;
e.handleTechWaiting_=function(){var b=this;this.addClass("vjs-waiting");this.trigger("waiting");var c=this.currentTime();this.on("timeupdate")};e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};e.handleTechPlaying_=function(){this.removeClass("vjs-waiting");this.trigger("playing")};
e.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};e.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};e.handleTechFirstPlay_;e.handleTechPause_;e.handleTechEnded_=function(){this.addClass("vjs-ended");this.removeClass("vjs-waiting");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};e.handleTechDurationChange_;e.handleTechClick_=function(b){!this.controls_||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||
(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.click?this.options_.userActions.click.call(this,b):this.paused()?eb(this.play()):this.pause())};e.handleTechDoubleClick_;e.handleTechTap_;e.handleTechTouchStart_;e.handleTechTouchMove_;e.handleTechTouchEnd_;e.handleStageClick_;e.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};e.documentFullscreenChange_=function(b){b=b.target.player;if(!b||b===this){b=this.el();var c=document[this.fsApi_.fullscreenElement]===b;!c&&b.matches?c=b.matches(":"+this.fsApi_.fullscreen):!c&&b.msMatchesSelector&&(c=b.msMatchesSelector(":"+this.fsApi_.fullscreen));this.isFullscreen(c)}};e.handleTechFullscreenChange_=;e.handleTechFullscreenError_;e.togglePictureInPictureClass_;e.handleTechEnterPictureInPicture_=function(b){this.isInPictureInPicture(!0)};
e.handleTechLeavePictureInPicture_;e.handleTechError_;e.handleTechTextData_;e.getCache=function(){return this.cache_};e.resetCache_;e.techCall_=function(b,c){this.ready(function(){if(b in yk)return this.tech_[b](this.middleware_.reduce(Qd(b),c));if(b in ah)return Wf(this.middleware_,this.tech_,b,c);try{if(this.tech_)this.tech_[b](c)}catch(y){throw P(y),y;}},!0)};e.techGet_=function(b){if(this.tech_&&this.tech_.isReady_){if(b in xk){var c=this.tech_;return this.middleware_.reduceRight(Qd(b),c[b]())}if(b in ah)return Wf(this.middleware_,this.tech_,b);try{return this.tech_[b]()}catch(y){if(void 0===
this.tech_[b])throw P("Video.js: "+b+" method not defined for "+this.techName_+" playback technology.",y),y;if("TypeError"===y.name)throw P("Video.js: "+b+" unavailable on "+this.techName_+" playback technology element.",y),this.tech_.isReady_=!1,y;P(y);throw y;}}};e.play;e.play_=function(b){var c=this;void 0===b&&(b=eb);this.playCallbacks_.push(b);b=!(this.changingSrc_||!this.src()&&
!this.currentSrc());this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&b?(b=this.techGet_("play"),null===b?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(b)):(this.waitToPlay_=function(b){c.play_()},this.one(["ready","loadstart"],this.waitToPlay_),b||!Xc&&!sa||this.load())};e.runPlayTerminatedQueue_;e.runPlayCallbacks_;e.pause=function(){this.techCall_("pause")};e.paused;e.played;e.scrubbing=function(b){if("undefined"===typeof b)return this.scrubbing_;this.scrubbing_=!!b;this.techCall_("setScrubbing",this.scrubbing_);b?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};e.currentTime=function(b){if("undefined"!==
typeof b)0>b&&(b=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",b),this.cache_.initTime=0):(this.cache_.initTime=b,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_));else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};e.applyInitTime_;e.duration=function(b){if(void 0===b)return void 0!==this.cache_.duration?this.cache_.duration:
NaN;b=parseFloat(b);0>b&&(b=Infinity);b!==this.cache_.duration&&(this.cache_.duration=b,Infinity===b?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(b)||this.trigger("durationchange"))};e.remainingTime;e.remainingTimeDisplay;e.buffered;e.bufferedPercent;e.bufferedEnd=function(){var b=this.buffered(),c=this.duration();b=b.end(b.length-1);b>c&&(b=c);return b};e.volume=function(b){if(void 0!==b)b=Math.max(0,Math.min(1,parseFloat(b))),this.cache_.volume=b,this.techCall_("setVolume",b),0<b&&this.lastVolume_(b);else return b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b};e.muted=function(b){if(void 0!==b)this.techCall_("setMuted",b);else return this.techGet_("muted")||!1};e.defaultMuted;e.lastVolume_=function(b){if(void 0!==b&&0!==b)this.cache_.lastVolume=b;else return this.cache_.lastVolume};e.supportsFullScreen;e.isFullscreen=function(b){if(void 0!==b){var c=this.isFullscreen_;this.isFullscreen_=!!b;this.isFullscreen_!==c&&this.fsApi_.prefixed&&this.trigger("fullscreenchange");this.toggleFullscreenClass_()}else return this.isFullscreen_};e.requestFullscreen=function(b){var c=this.options_.Promise||
window.Promise;if(c){var e=this;return new c(function(c,f){function a(){e.off("fullscreenerror",d);e.off("fullscreenchange",l)}function l(){a();c()}function d(b,c){a();f(c)}e.one("fullscreenchange",l);e.one("fullscreenerror",d);var h=e.requestFullscreenHelper_(b);h&&(h.then(a,a),h.then(c,f))})}return this.requestFullscreenHelper_()};e.requestFullscreenHelper_=function(b){var c=this;if(!this.fsApi_.prefixed){var e=this.options_.fullscreen&&this.options_.fullscreen.options||{};void 0!==b&&(e=b)}if(this.fsApi_.requestFullscreen)return(b=
this.el_[this.fsApi_.requestFullscreen](e))&&b.then(function(){return c.isFullscreen(!0)},function(){return c.isFullscreen(!1)}),b;this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()};e.exitFullscreen=function(){var b=this.options_.Promise||window.Promise;if(b){var c=this;return new b(function(b,e)one("fullscreenchange",
p);c.one("fullscreenerror",l);var d=c.exitFullscreenHelper_();d&&(d.then(f,f),d.then(b,e))})}return this.exitFullscreenHelper_()};e.exitFullscreenHelper_=function(){var b=this;if(this.fsApi_.requestFullscreen){var c=document[this.fsApi_.exitFullscreen]();c&&eb(c.then));return c}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()};e.enterFullWindow;e.fullWindowOnEscKey;e.exitFullWindow;e.disablePictureInPicture;e.isInPictureInPicture=function(b){if(void 0!==b)this.isInPictureInPicture_=!!b,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_};
e.requestPictureInPicture;e.exitPictureInPicture;e.handleKeyDown=function(b){var c=this.options_.userActions;if(c&&c.hotkeys){var e=this.el_.ownerDocument.activeElement;var f=e.tagName.toLowerCase();if(e.isContentEditable)e=!0;else{var a="button checkbox hidden radio reset submit".split(" ");
e="input"===f?-1===a.indexOf(e.type):-1!==["textarea"].indexOf(f)}e||("function"===typeof c.hotkeys?c.hotkeys.call(this,b):this.handleHotkeys(b))}};e.handleHotkeys=function(b){var c=this.options_.userActions?this.options_.userActions.hotkeys:{},e=c.fullscreenKey,f=c.muteKey;f=void 0===f?function(b){return M.isEventKey(b,"m")}:f;c=c.playPauseKey;c=void 0===c:c;(void 0===e:e).call(this,b)?(b.preventDefault(),
b.stopPropagation(),e=A.getComponent("FullscreenToggle"),!1!==document[this.fsApi_.fullscreenEnabled]&&e.prototype.handleClick.call(this,b)):f.call(this,b)?(b.preventDefault(),b.stopPropagation(),A.getComponent("MuteToggle").prototype.handleClick.call(this,b)):c.call(this,b)&&(b.preventDefault(),b.stopPropagation(),A.getComponent("PlayToggle").prototype.handleClick.call(this,b))};e.canPlayType=function(b){for(var c,e=0,f=this.options_.techOrder;e<f.length;e++){c=f[e];var a=W.getTech(c);a||(a=A.getComponent(c));
if(!a)P.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.');else if(a.isSupported()&&(c=a.canPlayType(b)))return c}return""};e.selectSource=function(b){var c=this,e=this.options_.techOrder.map).filter(function(b){var c=b[0];if(b=b[1])return b.isSupported();P.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.');return!1}),f,a,k;return(this.options_.sourceOrder?f(b,e,a(k)):f(e,b,k))||!1};e.handleSrc_=function(b,c){var e=this;if("undefined"===typeof b)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var f=Bk(b);if(f.length){if(this.changingSrc_=!0,c||(this.cache_.sources=f),this.updateSourceCaches_(f[0]),Mj(this,f[0],
function(b,a){e.middleware_=a;c||(e.cache_.sources=f);e.updateSourceCaches_(b);if(e.src_(b)){if(1<f.length)return e.handleSrc_(f.slice(1));e.changingSrc_=!1;e.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);e.triggerReady()}else Nj(a,e.tech_)}),this.options_.retryOnError&&1<f.length){var a,k;this.one("error",a);this.one("playing",k);this.resetRetryOnError_=function(){e.off("error",
a);e.off("playing",k)}}}else this.setTimeout,0)};e.src;e.src_=function(b){var c=this,e=this.selectSource([b]);if(!e)return!0;if(!ik(e.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(e.tech,e.source),this.tech_.ready),!1;this.ready,!0);return!1};e.load=function(){this.techCall_("load")};e.reset=function(){var b=this,c=this.options_.Promise||window.Promise;this.paused()||!c?this.doReset_():(c=this.play(),eb(c.then(function(){return b.doReset_()})))};e.doReset_;e.resetControlBarUI_=;e.resetProgressBar_=function(){this.currentTime(0);var b=this.controlBar||{},c=b.durationDisplay;b=b.remainingTimeDisplay;c&&c.updateContent();b&&b.updateContent()};e.resetPlaybackRate_;e.resetVolumeBar_;e.currentSources;e.currentSource;e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""};e.currentType;e.preload=function(b){if(void 0!==b)this.techCall_("setPreload",b),this.options_.preload=b;else return this.techGet_("preload")};e.autoplay=function(b){if(void 0===b)return this.options_.autoplay||!1;if("string"===typeof b&&/(any|play|muted)/.test(b)||
!0===b&&this.options_.normalizeAutoplay){this.options_.autoplay=b;this.manualAutoplay_("string"===typeof b?b:"play");var c=!1}else this.options_.autoplay=b?!0:!1;c="undefined"===typeof c?this.options_.autoplay:c;this.tech_&&this.techCall_("setAutoplay",c)};e.playsinline;e.loop=function(b){if(void 0!==b)this.techCall_("setLoop",b),this.options_.loop=b;else return this.techGet_("loop")};
e.poster=function(b){if(void 0===b)return this.poster_;b||(b="");b!==this.poster_&&(this.poster_=b,this.techCall_("setPoster",b),this.isPosterFromTech_=!1,this.trigger("posterchange"))};e.handleTechPosterChange_;e.controls;e.usingNativeControls=function(b){if(void 0===b)return!!this.usingNativeControls_;
b=!!b;this.usingNativeControls_!==b&&((this.usingNativeControls_=b)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};e.error=function(b){var c=this;if(void 0===b)return this.error_||null;fb("beforeerror").forEach(function(e){e=e(c,b);q(e)&&!Array.isArray(e)||"string"===typeof e||"number"===typeof e||null===e?b=e:c.log.error("please return a value that MediaError expects in beforeerror hooks")});
if(this.options_.suppressNotSupportedError&&b&&4===b.code){var e;this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],e);this.one("loadstart")}else null===b?(this.error_=b,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new ta(b),this.addClass("vjs-error"),P.error("(CODE:"+this.error_.code+" "+ta.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),
fb("error").forEach))};e.reportUserActivity=function(b){this.userActivity_=!0};e.userActive=function(b){if(void 0===b)return this.userActive_;b=!!b;if(b!==this.userActive_)if(this.userActive_=b)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(b){b.stopPropagation();b.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");
this.addClass("vjs-user-inactive");this.trigger("userinactive")}};e.listenForUserActivity_=function(){var b,c,e,f=S(this,this.reportUserActivity),a;this.on("mousedown");this.on("mousemove",function(b){if(b.screenX!==c||b.screenY!==e)c=b.screenX,e=b.screenY,f()});this.on("mouseup",a);this.on("mouseleave",a);!(a=this.getChild("controlBar"))||sa||gb||(a.on("mouseenter"),a.on("mouseleave"));this.on("keydown",f);this.on("keyup",f);var k;this.setInterval,250)};e.playbackRate=function(b){if(void 0!==b)this.techCall_("setPlaybackRate",b);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};e.defaultPlaybackRate;e.isAudio=function(b){if(void 0!==b)this.isAudio_=!!b;else return!!this.isAudio_};e.enableAudioOnlyUI_=function(){var b=
this;this.addClass("vjs-audio-only-mode");var c=this.children(),e=this.getChild("ControlBar"),f=e&&e.currentHeight();c.forEach);this.audioOnlyCache_.playerHeight=this.currentHeight();this.height(f);this.trigger("audioonlymodechange")};e.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode");this.audioOnlyCache_.hiddenChildren.forEach(function(b){return b.show()});this.height(this.audioOnlyCache_.playerHeight);
this.trigger("audioonlymodechange")};e.audioOnlyMode=function(b){var c=this;if("boolean"!==typeof b||b===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=b;var e=this.options_.Promise||window.Promise;if(e)return b?(b=[],this.isInPictureInPicture()&&b.push(this.exitPictureInPicture()),this.isFullscreen()&&b.push(this.exitFullscreen()),this.audioPosterMode()&&b.push(this.audioPosterMode(!1)),e.all(b).then(function(){return c.enableAudioOnlyUI_()})):e.resolve().then(function(){return c.disableAudioOnlyUI_()});
b?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()};e.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide();this.addClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange")};e.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show();this.removeClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange")};e.audioPosterMode=function(b){var c=this;if("boolean"!==
typeof b||b===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=b;var e=this.options_.Promise||window.Promise;if(e)return b?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){c.enablePosterModeUI_()}):e.resolve().then(function(){c.enablePosterModeUI_()}):e.resolve().then);b?(this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_()):this.disablePosterModeUI_()};e.addTextTrack;e.addRemoteTextTrack;e.removeRemoteTextTrack;e.getVideoPlaybackQuality;e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};e.videoHeight;e.language;e.languages;e.toJSON=function(){var b=U(this.options_),c=b.tracks;b.tracks=[];for(var e=0;e<c.length;e++){var f=c[e];f=U(f);f.player=void 0;b.tracks[e]=f}return b};e.createModal=function(b,c){var e=this;c=c||{};c.content=b||"";var f=new Nb(this,
c);this.addChild(f);f.on("dispose");f.open();return f};e.updateCurrentBreakpoint_=function(){if(this.responsive())for(var b=this.currentBreakpoint(),c=this.currentWidth(),e=0;e<Ne.length;e++){var f=Ne[e];if(c<=this.breakpoints_[f]){if(b===f)break;b&&this.removeClass(gd[b]);this.addClass(gd[f]);this.breakpoint_=f;break}}};e.removeCurrentBreakpoint_;e.breakpoints;e.responsive=function(b){if(void 0===b)return this.responsive_;b=!!b;if(b!==this.responsive_)return(this.responsive_=b)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),b};e.currentBreakpoint=function(){return this.breakpoint_};
e.currentBreakpointClass;e.loadMedia=function(b,c){var e=this;if(b&&"object"===typeof b){this.reset();this.cache_.media=U(b);b=this.cache_.media;var f=b.poster,a=b.src,k=b.textTracks;!b.artwork&&f&&(this.cache_.media.artwork=[{src:f,type:Kc(f)}]);a&&this.src(a);f&&this.poster(f);Array.isArray(k)&&k.forEach);this.ready(c)}};e.getMedia=function(){if(!this.cache_.media){var b=this.poster(),c=this.currentSources(),
e=Array.prototype.map.call(this.remoteTextTracks());c={src:c,textTracks:e};b&&(c.poster=b,c.artwork=[{src:c.poster,type:Kc(c.poster)}]);return c}return U(this.cache_.media)};f.getTagSettings=function(b){var c={sources:[],tracks:[]},e=Va(b),f=e["data-setup"];wb(b,"vjs-fill")&&(e.fill=!0);wb(b,"vjs-fluid")&&(e.fluid=!0);if(null!==f){var a=null;try{var k=JSON.parse(f||"{}",void 0)}catch(l){a=l}k=[a,k];f=k[0];k=k[1];f&&P.error(f);
E(e,k)}E(c,e);if(b.hasChildNodes())for(b=b.childNodes,e=0,f=b.length;e<f;e++)k=b[e],a=k.nodeName.toLowerCase(),"source"===a?c.sources.push(Va(k)):"track"===a&&c.tracks.push(Va(k));return c};e.flexNotSupported_;e.debug;e.playbackRates;return f}(A);Ga.names.forEach);la.prototype.crossorigin=la.prototype.crossOrigin;la.players={};var uc=window.navigator;la.prototype.options_={techOrder:W.defaultTechOrder_,html5:{},inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:uc&&(uc.languages&&uc.languages[0]||uc.userLanguage||
uc.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach);Hh.forEach);A.registerComponent("Player",la);var Ih=
r(function(c)c.exports=f}),$k,al=r(function(c){function f(e,b,t){$k()?c.exports=f=Reflect.construct:c.exports=f;return f.apply(null,arguments)}c.exports=f}),Ta={},hd,id,bl=function(c,f){var e=function(){id(this,{name:c,plugin:f,instance:null},!0);var b=f.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[c]=!0;id(this,{name:c,plugin:f,instance:b});return b};Object.keys(f).forEach);return e},Jh=function(c,f){f.prototype.name=c;return function(){id(this,{name:c,plugin:f,instance:null},!0);for(var e=arguments.length,b=Array(e),t=0;t<e;t++)b[t]=arguments[t];var m=al(f,[this].concat(b));this[c];id(this,m.getEventHash());return m}},Ya=function(){function c(e){if(this.constructor===c)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=e;this.log||(this.log=this.player.log.createLogger(this.name));Jd(this);delete this.trigger;
Lf(this,this.constructor.defaultState);var b=this.name;e.activePlugins_=e.activePlugins_||{};e.activePlugins_[b]=!0;this.dispose=this.dispose.bind(this);e.on("dispose",this.dispose)}var f=c.prototype;f.version;f.getEventHash;f.trigger;f.handleStateChanged=function(c){};f.dispose=;c.isBasic=function(e){e="string"===typeof e?hd(e):e;return"function"===typeof e&&!c.prototype.isPrototypeOf(e.prototype)};c.registerPlugin=function(e,b){if("string"!==typeof e)throw Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Ta.hasOwnProperty(e))P.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');
else if(la.prototype.hasOwnProperty(e))throw Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!==typeof b)throw Error('Illegal plugin for "'+e+'", must be a function, was '+typeof b+".");Ta[e]=b;"plugin"!==e&&(c.isBasic(b)?la.prototype[e]=bl(e,b):la.prototype[e]=Jh(e,b));return b};c.deregisterPlugin;c.getPlugins=
function(c){void 0===c&&(c=Object.keys(Ta));var b;c.forEach);return b};c.getPluginVersion;return c}();Ya.getPlugin=hd;Ya.BASE_PLUGIN_NAME="plugin";Ya.registerPlugin("plugin",Ya);la.prototype.usingPlugin;la.prototype.hasPlugin;var cl=function(c,f){if("function"!==typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function");
c.prototype=Object.create(f&&f.prototype,{constructor:{value:c,writable:!0,configurable:!0}});f&&Ih(c,f)},Zf;w.hooks_=ob;w.hooks=fb;w.hook;w.hookOnce;w.removeHook=Ag;if(!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&C()){var jd=Na(".vjs-styles-defaults");if(!jd){jd=Lg("vjs-styles-defaults");var Oe=Na("head");Oe&&Oe.insertBefore(jd,
Oe.firstChild);Mg(jd,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Fd(1,w);w.VERSION="7.20.2";w.options=la.prototype.options_;w.getPlayers;w.getPlayer=function(c){var f=la.players;if("string"===typeof c){c=Zf(c);var e=f[c];if(e)return e;c=Na("#"+c)}if(N(c)&&(e=c,c=e.player,e=e.playerId,c||f[e]))return c||f[e]};w.getAllPlayers;
w.players=la.players;w.getComponent=A.getComponent;w.registerComponent;w.getTech=W.getTech;w.registerTech=W.registerTech;w.use;Object.defineProperty(w,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(w.middleware,"TERMINATOR",{value:Jc,writeable:!1,
enumerable:!0});w.browser=ek;w.TOUCH_ENABLED=Lb;w.extend=function(c,f){void 0===f&&(f={});var e,b={};"object"===typeof f?(f.constructor!==Object.prototype.constructor&&(e=f.constructor),b=f):"function"===typeof f&&(e=f);cl(e,c);c&&(e.super_=c);for(var t in b)b.hasOwnProperty(t)&&(e.prototype[t]=b[t]);return e};w.mergeOptions=U;w.bind=S;w.registerPlugin=Ya.registerPlugin;w.deregisterPlugin=Ya.deregisterPlugin;w.plugin;w.getPlugins=Ya.getPlugins;w.getPlugin=Ya.getPlugin;w.getPluginVersion=Ya.getPluginVersion;w.addLanguage;w.log=P;w.createLogger=Cg;w.createTimeRange=w.createTimeRanges=qb;w.formatTime=yb;w.setFormatTime;w.resetFormatTime;w.parseUrl=qe;w.isCrossOrigin=bd;w.EventTarget=ka;w.on=Da;w.one=Hc;w.off=T;w.trigger=
cb;w.xhr=Ea;w.TextTrack=qc;w.AudioTrack=Xg;w.VideoTrack=Yg;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach);w.computedStyle=R;w.dom=Kg;w.url=tk;w.defineLazyProperty=Le;w.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Kh=r(function(c,f){)()}),xa=function(c,f){if(/^[a-z]+:/i.test(f))return f;/^data:/.test(c)&&(c=window.location&&window.location.href||"");var e="function"===typeof window.URL,b=/^\/\//.test(c),t=!window.location&&!/\/\//i.test(c);e?c=new window.URL(c,window.location||"http://example.com"):/\/\//i.test(c)||(c=Kh.buildAbsoluteURL(window.location&&window.location.href||"",c));return e?(c=new URL(f,c),t?c.href.slice(18):b?c.href.slice(c.protocol.length):c.href):Kh.buildAbsoluteURL(c,
f)},Pe=function(){function c(){this.listeners={}}var f=c.prototype;f.on=function(c,b){this.listeners[c]||(this.listeners[c]=[]);this.listeners[c].push(b)};f.off=function(c,b){if(!this.listeners[c])return!1;b=this.listeners[c].indexOf(b);this.listeners[c]=this.listeners[c].slice(0);this.listeners[c].splice(b,1);return-1<b};f.trigger=function(c){var b=this.listeners[c];if(b)if(2===arguments.length)for(var e=b.length,f=0;f<e;++f)b[f].call(this,arguments[1]);else{e=Array.prototype.slice.call(arguments,
1);f=b.length;for(var p=0;p<f;++p)b[p].apply(this,e)}};f.dispose=function(){this.listeners={}};f.pipe=function(c){this.on("data",function(b){c.push(b)})};return c}(),dl=function(c)F(f,c);f.prototype.push=function(c){this.buffer+=c;for(c=this.buffer.indexOf("\n");-1<c;c=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,c)),this.buffer=this.buffer.substring(c+1)};return f}(Pe),el=String.fromCharCode(9),Qe=function(c){c=
/([0-9.]*)?@?([0-9.]*)?/.exec(c||"");var f={};c[1]&&(f.length=parseInt(c[1],10));c[2]&&(f.offset=parseInt(c[2],10));return f},Pa=function(c){c=c.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);for(var f={},e=c.length,b;e--;)""!==c[e]&&(b=/([^=]*)=(.*)/.exec(c[e]).slice(1),b[0]=b[0].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^['"](.*)['"]$/g,"$1"),f[b[0]]=b[1]);return f},fl=function(c){function f(){var b=c.call(this)||this;b.customParsers=[];b.tagMappers=[];return b}
F(f,c);var e=f.prototype;e.push=function(b){var c=this,e,f;b=b.trim();0!==b.length&&("#"!==b[0]?this.trigger("data",{type:"uri",uri:b}):this.tagMappers.reduce,[b]).forEach(function(b){for(var a=0;a<c.customParsers.length;a++)if(c.customParsers[a].call(c,b))return;0!==b.indexOf("#EXT")?c.trigger("data",{type:"comment",text:b.slice(1)}):(b=b.replace("\r",""),(e=/^#EXTM3U/.exec(b))?c.trigger("data",{type:"tag",tagType:"m3u"}):(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(b))?
(f={type:"tag",tagType:"inf"},e[1]&&(f.duration=parseFloat(e[1])),e[2]&&(f.title=e[2]),c.trigger("data",f)):(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(b))?(f={type:"tag",tagType:"targetduration"},e[1]&&(f.duration=parseInt(e[1],10)),c.trigger("data",f)):(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(b))?(f={type:"tag",tagType:"version"},e[1]&&(f.version=parseInt(e[1],10)),c.trigger("data",f)):(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(b))?(f={type:"tag",tagType:"media-sequence"},e[1]&&(f.number=parseInt(e[1],
10)),c.trigger("data",f)):(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(b))?(f={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(f.number=parseInt(e[1],10)),c.trigger("data",f)):(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(b))?(f={type:"tag",tagType:"playlist-type"},e[1]&&(f.playlistType=e[1]),c.trigger("data",f)):(e=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(b))?(f=Qa(Qe(e[1]),{type:"tag",tagType:"byterange"}),c.trigger("data",f)):(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(b))?(f={type:"tag",tagType:"allow-cache"},
e[1]&&(f.allowed=!/NO/.test(e[1])),c.trigger("data",f)):(e=/^#EXT-X-MAP:?(.*)$/.exec(b))?(f={type:"tag",tagType:"map"},e[1]&&(b=Pa(e[1]),b.URI&&(f.uri=b.URI),b.BYTERANGE&&(f.byterange=Qe(b.BYTERANGE))),c.trigger("data",f)):(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(b))?(f={type:"tag",tagType:"stream-inf"},e[1]&&(f.attributes=Pa(e[1]),f.attributes.RESOLUTION&&(b=f.attributes.RESOLUTION.split("x"),a={},b[0]&&(a.width=parseInt(b[0],10)),b[1]&&(a.height=parseInt(b[1],10)),f.attributes.RESOLUTION=a),f.attributes.BANDWIDTH&&
(f.attributes.BANDWIDTH=parseInt(f.attributes.BANDWIDTH,10)),f.attributes["PROGRAM-ID"]&&(f.attributes["PROGRAM-ID"]=parseInt(f.attributes["PROGRAM-ID"],10))),c.trigger("data",f)):(e=/^#EXT-X-MEDIA:?(.*)$/.exec(b))?(f={type:"tag",tagType:"media"},e[1]&&(f.attributes=Pa(e[1])),c.trigger("data",f)):(e=/^#EXT-X-ENDLIST/.exec(b))?c.trigger("data",{type:"tag",tagType:"endlist"}):(e=/^#EXT-X-DISCONTINUITY/.exec(b))?c.trigger("data",{type:"tag",tagType:"discontinuity"}):(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(b))?
(f={type:"tag",tagType:"program-date-time"},e[1]&&(f.dateTimeString=e[1],f.dateTimeObject=new Date(e[1])),c.trigger("data",f)):(e=/^#EXT-X-KEY:?(.*)$/.exec(b))?(f={type:"tag",tagType:"key"},e[1]&&(f.attributes=Pa(e[1]),f.attributes.IV&&("0x"===f.attributes.IV.substring(0,2).toLowerCase()&&(f.attributes.IV=f.attributes.IV.substring(2)),f.attributes.IV=f.attributes.IV.match(/.{8}/g),f.attributes.IV[0]=parseInt(f.attributes.IV[0],16),f.attributes.IV[1]=parseInt(f.attributes.IV[1],16),f.attributes.IV[2]=
parseInt(f.attributes.IV[2],16),f.attributes.IV[3]=parseInt(f.attributes.IV[3],16),f.attributes.IV=new Uint32Array(f.attributes.IV))),c.trigger("data",f)):(e=/^#EXT-X-START:?(.*)$/.exec(b))?(f={type:"tag",tagType:"start"},e[1]&&(f.attributes=Pa(e[1]),f.attributes["TIME-OFFSET"]=parseFloat(f.attributes["TIME-OFFSET"]),f.attributes.PRECISE=/YES/.test(f.attributes.PRECISE)),c.trigger("data",f)):(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(b))?(f={type:"tag",tagType:"cue-out-cont"},f.data=e[1]?e[1]:"",c.trigger("data",
f)):(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(b))?(f={type:"tag",tagType:"cue-out"},f.data=e[1]?e[1]:"",c.trigger("data",f)):(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(b))?(f={type:"tag",tagType:"cue-in"},f.data=e[1]?e[1]:"",c.trigger("data",f)):(e=/^#EXT-X-SKIP:(.*)$/.exec(b))&&e[1]?(f={type:"tag",tagType:"skip"},f.attributes=Pa(e[1]),f.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(f.attributes["SKIPPED-SEGMENTS"]=parseInt(f.attributes["SKIPPED-SEGMENTS"],10)),f.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&
(f.attributes["RECENTLY-REMOVED-DATERANGES"]=f.attributes["RECENTLY-REMOVED-DATERANGES"].split(el)),c.trigger("data",f)):(e=/^#EXT-X-PART:(.*)$/.exec(b))&&e[1]?(f={type:"tag",tagType:"part"},f.attributes=Pa(e[1]),["DURATION"].forEach(function(b){f.attributes.hasOwnProperty(b)&&(f.attributes[b]=parseFloat(f.attributes[b]))}),["INDEPENDENT","GAP"].forEach(function(b){f.attributes.hasOwnProperty(b)&&(f.attributes[b]=/YES/.test(f.attributes[b]))}),f.attributes.hasOwnProperty("BYTERANGE")&&(f.attributes.byterange=
Qe(f.attributes.BYTERANGE)),c.trigger("data",f)):(e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(b))&&e[1]?(f={type:"tag",tagType:"server-control"},f.attributes=Pa(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(b){f.attributes.hasOwnProperty(b)&&(f.attributes[b]=parseFloat(f.attributes[b]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach),c.trigger("data",f)):(e=/^#EXT-X-PART-INF:(.*)$/.exec(b))&&
e[1]?(f={type:"tag",tagType:"part-inf"},f.attributes=Pa(e[1]),["PART-TARGET"].forEach),c.trigger("data",f)):(e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(b))&&e[1]?(f={type:"tag",tagType:"preload-hint"},f.attributes=Pa(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(b){f.attributes.hasOwnProperty(b)&&(f.attributes[b]=parseInt(f.attributes[b],10),f.attributes.byterange=f.attributes.byterange||{},f.attributes.byterange["BYTERANGE-LENGTH"===
b?"length":"offset"]=f.attributes[b],delete f.attributes[b])}),c.trigger("data",f)):(e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(b))&&e[1]?(f={type:"tag",tagType:"rendition-report"},f.attributes=Pa(e[1]),["LAST-MSN","LAST-PART"].forEach),c.trigger("data",f)):c.trigger("data",{type:"tag",data:b.slice(4)}))}))};e.addParser=function(b){var c=this,e=b.expression,f=b.customType,a=b.dataParser,k=b.segment;"function"!==
typeof a&&(a=function(b){return b});this.customParsers.push)};e.addTagMapper;return f}(Pe),gl,Ub,Re=function(c){var f=c.serverControl,
e=c.targetDuration;c=c.partTargetDuration;if(f){var b=e&&3*e,t=c&&2*c;e&&!f.hasOwnProperty("holdBack")&&(f.holdBack=b,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting HOLD-BACK to targetDuration * 3 ("+b+")."}));b&&f.holdBack<b&&(this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL clamping HOLD-BACK ("+f.holdBack+") to targetDuration * 3 ("+b+")"}),f.holdBack=b);c&&!f.hasOwnProperty("partHoldBack")&&(f.partHoldBack=3*c,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+
f.partHoldBack+")."}));c&&f.partHoldBack<t&&(this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL clamping PART-HOLD-BACK ("+f.partHoldBack+") to partTargetDuration * 2 ("+t+")."}),f.partHoldBack=t)}},hl=function(c){function f(){var b=c.call(this)||this;b.lineStream=new dl;b.parseStream=new fl;b.lineStream.pipe(b.parseStream);var e=O(b),f=[],p={},a,k,l=!1,d=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},g=0;b.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var u=0,
z=0;b.on("end");b.parseStream.on("data",function(b){var c,t;({tag:function(){({version,"allow-cache":function(){this.manifest.allowCache=b.allowed;"allowed"in b||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var c=
{};"length"in b&&(p.byterange=c,c.length=b.length,"offset"in b||(b.offset=u));"offset"in b&&(p.byterange=c,c.offset=b.offset);u=c.offset+c.length},endlist,inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<b.duration&&
(p.duration=b.duration);0===b.duration&&(p.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=f},key:function(){b.attributes?"NONE"===b.attributes.METHOD?k=null:b.attributes.URI?"com.apple.streamingkeydelivery"===b.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:b.attributes}):"com.microsoft.playready"===b.attributes.KEYFORMAT?
(this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:b.attributes.URI}):"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===b.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(b.attributes.METHOD)?this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===b.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),
"data:text/plain;base64,"!==b.attributes.URI.substring(0,23)?this.trigger("warn",{message:"invalid key URI provided for Widevine"}):b.attributes.KEYID&&"0x"===b.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:b.attributes.KEYFORMAT,keyId:b.attributes.KEYID.substring(2)},pssh:$f(b.attributes.URI.split(",")[1])}):this.trigger("warn",{message:"invalid key ID provided for Widevine"})):
(b.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),k={method:b.attributes.METHOD||"AES-128",uri:b.attributes.URI},"undefined"!==typeof b.attributes.IV&&(k.iv=b.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence","discontinuity-sequence":function(){isFinite(b.number)?g=this.manifest.discontinuitySequence=b.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+b.number})},"playlist-type",map,"stream-inf":function(){this.manifest.playlists=
f;this.manifest.mediaGroups=this.manifest.mediaGroups||h;b.attributes?(p.attributes||(p.attributes={}),Qa(p.attributes,b.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||h;if(b.attributes&&b.attributes.TYPE&&b.attributes["GROUP-ID"]&&b.attributes.NAME){var e=this.manifest.mediaGroups[b.attributes.TYPE];e[b.attributes["GROUP-ID"]]=e[b.attributes["GROUP-ID"]]||{};c=e[b.attributes["GROUP-ID"]];t=
{"default":/yes/i.test(b.attributes.DEFAULT)};t.autoselect=t["default"]?!0:/yes/i.test(b.attributes.AUTOSELECT);b.attributes.LANGUAGE&&(t.language=b.attributes.LANGUAGE);b.attributes.URI&&(t.uri=b.attributes.URI);b.attributes["INSTREAM-ID"]&&(t.instreamId=b.attributes["INSTREAM-ID"]);b.attributes.CHARACTERISTICS&&(t.characteristics=b.attributes.CHARACTERISTICS);b.attributes.FORCED&&(t.forced=/yes/i.test(b.attributes.FORCED));c[b.attributes.NAME]=t}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},
discontinuity,"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=b.dateTimeString,this.manifest.dateTimeObject=b.dateTimeObject);p.dateTimeString=b.dateTimeString;p.dateTimeObject=b.dateTimeObject},targetduration:function(){!isFinite(b.duration)||0>b.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+b.duration}):(this.manifest.targetDuration=
b.duration,Re.call(this,this.manifest))},start,"cue-out":function(){p.cueOut=b.data},"cue-out-cont":function(){p.cueOutCont=b.data},"cue-in",skip,part:function(){var c=this;l=!0;var e=this.manifest.segments.length,f=Ub(b.attributes);p.parts=p.parts||[];p.parts.push(f);f.byterange&&(f.byterange.hasOwnProperty("offset")||(f.byterange.offset=z),z=f.byterange.offset+f.byterange.length);this.warnOnMissingAttributes_("#EXT-X-PART #"+(p.parts.length-1)+" for segment #"+e,b.attributes,["URI","DURATION"]);this.manifest.renditionReports&&this.manifest.renditionReports.forEach)},"server-control":function(){var c=this.manifest.serverControl=Ub(b.attributes);c.hasOwnProperty("canBlockReload")||(c.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"}));Re.call(this,this.manifest);c.canSkipDateranges&&!c.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},
"preload-hint":function(){var c=this.manifest.segments.length,e=Ub(b.attributes),f=e.type&&"PART"===e.type;p.preloadHints=p.preloadHints||[];p.preloadHints.push(e);e.byterange&&!e.byterange.hasOwnProperty("offset")&&(e.byterange.offset=f?z:0,f&&(z=e.byterange.offset+e.byterange.length));f=p.preloadHints.length-1;this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+f+" for segment #"+c,b.attributes,["TYPE","URI"]);if(e.type)for(var d=0;d<p.preloadHints.length-1;d++){var a=p.preloadHints[d];a.type&&
a.type===e.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+f+" for segment #"+c+" has the same TYPE "+e.type+" as preload hint #"+d})}},"rendition-report":function(){var c=Ub(b.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[];this.manifest.renditionReports.push(c);c=this.manifest.renditionReports.length-1;var e=["LAST-MSN","URI"];l&&e.push("LAST-PART");this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+c,b.attributes,e)},"part-inf"}[b.tagType]||d).call(e)},uri:function(){p.uri=b.uri;f.push(p);!this.manifest.targetDuration||"duration"in p||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),p.duration=this.manifest.targetDuration);k&&(p.key=k);p.timeline=g;a&&(p.map=a);z=
0;p={}},comment:function(){},custom})[b.type].call(e)});return b}F(f,c);var e=f.prototype;e.warnOnMissingAttributes_;e.push=function(b){this.lineStream.push(b)};e.end=;e.addParser=function(b){this.parseStream.addParser(b)};e.addTagMapper=function(b){this.parseStream.addTagMapper(b)};return f}(Pe),Db={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,
muxerAudio:/^(mp4a)/,muxerText:/a^/},il=["video","audio","text"],Lh=["Video","Audio","Text"],Mh=function(c){return c?c.replace(/avc1\.(\d+)\.(\d+)/i,function(c,e,b){c=("00"+Number(e).toString(16)).slice(-2);b=("00"+Number(b).toString(16)).slice(-2);return"avc1."+c+"00"+b}):c},jb=function(c){void 0===c&&(c="");var f=[];c.split(",").forEach(function(c){c=c.trim();var b;il.forEach(function(e){var t=Db[e].exec(c.toLowerCase());if(t&&!(1>=t.length)){b=e;t=c.substring(0,t[1].length);var p=c.replace(t,"");
f.push({type:t,details:p,mediaType:e})}});b||f.push({type:c,details:"",mediaType:"unknown"})});return f},jl=function(c,f){if(!c.mediaGroups.AUDIO||!f)return null;c=c.mediaGroups.AUDIO[f];if(!c)return null;for(var e in c)if(f=c[e],f["default"]&&f.playlists)return jb(f.playlists[0].attributes.CODECS);return null},Nh=function(c){void 0===c&&(c="");return Db.audio.test(c.trim().toLowerCase())},kl,vc=function(c){if(c&&"string"===
typeof c){var f=c.toLowerCase().split(",").map),e="video";1===f.length&&Nh(f[0])?e="audio":1===f.length&&kl(f[0])&&(e="application");var b="mp4";f.every(function(b){return Db.mp4.test(b)})?b="mp4":f.every(function(b){return Db.webm.test(b)})?b="webm":f.every)&&(b="ogg");return e+"/"+b+';codecs\x3d"'+c+'"'}},kd,Se=function(c){void 0===c&&(c="");return c.toLowerCase().split(",").every)},ll=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,ml=/^application\/dash\+xml/i,Oh,Ph,K=function(c){if(c instanceof
Uint8Array)return c;Array.isArray(c)||Ph(c)||c instanceof ArrayBuffer||(c="number"!==typeof c||"number"===typeof c&&c!==c?0:[c]);return new Uint8Array(c&&c.buffer||c,c&&c.byteOffset||0,c&&c.byteLength||0)},X=window.BigInt||Number,Te=[X("0x1"),X("0x100"),X("0x10000"),X("0x1000000"),X("0x100000000"),X("0x10000000000"),X("0x1000000000000"),X("0x100000000000000"),X("0x10000000000000000")],nl=function(c,f){var e=void 0===f?{}:f;f=e.signed;f=void 0===f?!1:f;e=e.le;var b=void 0===e?!1:e;c=K(c);e=b?"reduce":
"reduceRight";e=(c[e]?c[e]:Array.prototype[e]).call(c,X(0));f&&(f=Te[c.length]/X(2)-X(1),e=X(e),e>f&&(e=e-f-f-X(2)));return Number(e)},ol=function(c,f){f=(void 0===f?{}:f).le;f=void 0===f?!1:f;if("bigint"!==typeof c&&"number"!==typeof c||"number"===typeof c&&c!==c)c=0;c=X(c);for(var e=Math.ceil(c.toString(2).length/8),b=new Uint8Array(new ArrayBuffer(e)),t=0;t<e;t++){var m=f?t:Math.abs(t+1-b.length);b[m]=Number(c/Te[t]&X(255));0>c&&
(b[m]=Math.abs(~b[m]),b[m]-=0===t?1:2)}return b},Qh=function(c,f){"string"!==typeof c&&c&&"function"===typeof c.toString&&(c=c.toString());if("string"!==typeof c)return new Uint8Array;f||(c=unescape(encodeURIComponent(c)));f=new Uint8Array(c.length);for(var e=0;e<c.length;e++)f[e]=c.charCodeAt(e);return f},pl=function(){for(var c=arguments.length,f=Array(c),e=0;e<c;e++)f[e]=arguments[e];f=f.filter);if(1>=f.length)return K(f[0]);
c=f.reduce,0);var b=new Uint8Array(c),t=0;f.forEach);return b},aa=function(c,f,e){e=void 0===e?{}:e;var b=e.offset,t=void 0===b?0:b;e=e.mask;var m=void 0===e?[]:e;c=K(c);f=K(f);e=f.every?f.every:Array.prototype.every;return f.length&&c.length-t>=f.length&&e.call(f)},ql,rl=Lc({HTML:"text/html",isHTML:function(c){return c===rl.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Rh=Lc({HTML:"http://www.w3.org/1999/xhtml",isHTML,SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),ld=Rh,lb=ld,Ha={},Ma=Ha.ELEMENT_NODE=1,Ab=Ha.ATTRIBUTE_NODE=2,Pc=Ha.TEXT_NODE=3,ng=Ha.CDATA_SECTION_NODE=
4,rg=Ha.ENTITY_REFERENCE_NODE=5,sl=Ha.ENTITY_NODE=6,qg=Ha.PROCESSING_INSTRUCTION_NODE=7,og=Ha.COMMENT_NODE=8,mg=Ha.DOCUMENT_NODE=9,pg=Ha.DOCUMENT_TYPE_NODE=10,mb=Ha.DOCUMENT_FRAGMENT_NODE=11,tl=Ha.NOTATION_NODE=12,za={},oa={};za.INDEX_SIZE_ERR=(oa[1]="Index size error",1);za.DOMSTRING_SIZE_ERR=(oa[2]="DOMString size error",2);var ul=za.HIERARCHY_REQUEST_ERR=(oa[3]="Hierarchy request error",3);za.WRONG_DOCUMENT_ERR=(oa[4]="Wrong document",4);za.INVALID_CHARACTER_ERR=(oa[5]="Invalid character",5);za.NO_DATA_ALLOWED_ERR=
(oa[6]="No data allowed",6);za.NO_MODIFICATION_ALLOWED_ERR=(oa[7]="No modification allowed",7);var Sj=za.NOT_FOUND_ERR=(oa[8]="Not found",8);za.NOT_SUPPORTED_ERR=(oa[9]="Not supported",9);var Sh=za.INUSE_ATTRIBUTE_ERR=(oa[10]="Attribute in use",10);za.INVALID_STATE_ERR=(oa[11]="Invalid state",11);za.SYNTAX_ERR=(oa[12]="Syntax error",12);za.INVALID_MODIFICATION_ERR=(oa[13]="Invalid modification",13);za.NAMESPACE_ERR=(oa[14]="Invalid namespace",14);za.INVALID_ACCESS_ERR=(oa[15]="Invalid access",15);
zb.prototype=Error.prototype;gc(za,zb);La.prototype={length:0,item,toString};kb.prototype.item;ua(kb,La);Mc.prototype={length:0,item:La.prototype.item,getNamedItem,setNamedItem:function(c){var f=c.ownerElement;if(f&&f!=this._ownerElement)throw new zb(Sh);f=this.getNamedItem(c.nodeName);
dg(this._ownerElement,this,c,f);return f},setNamedItemNS:function(c){var f=c.ownerElement;if(f&&f!=this._ownerElement)throw new zb(Sh);f=this.getNamedItemNS(c.namespaceURI,c.localName);dg(this._ownerElement,this,c,f);return f},removeNamedItem:function(c){c=this.getNamedItem(c);eg(this._ownerElement,this,c);return c},removeNamedItemNS:function(c,f){c=this.getNamedItemNS(c,f);eg(this._ownerElement,this,c);return c},getNamedItemNS};fg.prototype={hasFeature,createDocument:function(c,f,e){var b=new ic;b.implementation=this;b.childNodes=new La;b.doctype=e||null;e&&b.appendChild(e);f&&(c=b.createElementNS(c,f),b.appendChild(c));return b},createDocumentType};ja.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,
childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(c,f){return ig(this,c,f)},replaceChild,removeChild,appendChild,hasChildNodes,cloneNode,normalize,isSupported,hasAttributes,lookupPrefix,lookupNamespaceURI,isDefaultNamespace};gc(Ha,ja);gc(Ha,ja.prototype);ic.prototype={nodeName:"#document",nodeType:mg,doctype:null,documentElement:null,_inc:1,insertBefore,removeChild,importNode,getElementById:function(c){var f=null;hc(this.documentElement);return f},getElementsByClassName:function(c){var f=ag(c);return new kb(this,function(e){var b=[];0<f.length&&hc(e.documentElement,function(t){if(t!==e&&t.nodeType===Ma){var m=t.getAttribute("class");if(m){var p=c===m;p||(m=ag(m),p=f.every(Rj(m)));p&&b.push(t)}}});return b})},
createElement:function(c){var f=new tb;f.ownerDocument=this;f.nodeName=c;f.tagName=c;f.localName=c;f.childNodes=new La;return(f.attributes=new Mc)._ownerElement=f},createDocumentFragment,createTextNode:function(c){var f=new Wd;f.ownerDocument=this;f.appendData(c);return f},createComment:function(c){var f=new Xd;f.ownerDocument=this;f.appendData(c);return f},createCDATASection,createProcessingInstruction,createAttribute,createEntityReference,createElementNS:function(c,f){var e=new tb,b=f.split(":"),t=e.attributes=new Mc;e.childNodes=new La;e.ownerDocument=this;e.nodeName=f;e.tagName=f;e.namespaceURI=
c;2==b.length?(e.prefix=b[0],e.localName=b[1]):e.localName=f;return t._ownerElement=e},createAttributeNS:function(c,f){var e=new Nc,b=f.split(":");e.ownerDocument=this;e.nodeName=f;e.name=f;e.namespaceURI=c;e.specified=!0;2==b.length?(e.prefix=b[0],e.localName=b[1]):e.localName=f;return e}};ua(ic,ja);tb.prototype={nodeType:Ma,hasAttribute,getAttribute,getAttributeNode:function(c){return this.attributes.getNamedItem(c)},
setAttribute:function(c,f){c=this.ownerDocument.createAttribute(c);c.value=c.nodeValue=""+f;this.setAttributeNode(c)},removeAttribute,appendChild:function(c){if(c.nodeType===mb)return this.insertBefore(c,null);var f=c.parentNode;f&&f.removeChild(c);f=this.lastChild;c.parentNode=this;c.previousSibling=f;c.nextSibling=null;f?f.nextSibling=c:this.firstChild=c;this.lastChild=c;Vd(this.ownerDocument,this,c);return c},setAttributeNode:function(c){return this.attributes.setNamedItem(c)},
setAttributeNodeNS,removeAttributeNode,removeAttributeNS,hasAttributeNS,getAttributeNS,setAttributeNS:function(c,f,e){c=this.ownerDocument.createAttributeNS(c,f);c.value=c.nodeValue=
""+e;this.setAttributeNode(c)},getAttributeNodeNS,getElementsByTagName,getElementsByTagNameNS};ic.prototype.getElementsByTagName=tb.prototype.getElementsByTagName;
ic.prototype.getElementsByTagNameNS=tb.prototype.getElementsByTagNameNS;ua(tb,ja);Nc.prototype.nodeType=Ab;ua(Nc,ja);jc.prototype={data:"",substringData,appendData:function(c){this.nodeValue=this.data=c=this.data+c;this.length=c.length},insertData,appendChild,deleteData,replaceData:function(c,f,e){var b=this.data.substring(0,c);c=this.data.substring(c+
f);this.nodeValue=this.data=e=b+e+c;this.length=e.length}};ua(jc,ja);Wd.prototype={nodeName:"#text",nodeType:Pc,splitText:function(c){var f=this.data,e=f.substring(c);this.data=this.nodeValue=f=f.substring(0,c);this.length=f.length;c=this.ownerDocument.createTextNode(e);this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling);return c}};ua(Wd,jc);Xd.prototype={nodeName:"#comment",nodeType:og};ua(Xd,jc);Yd.prototype={nodeName:"#cdata-section",nodeType:ng};ua(Yd,jc);Zd.prototype.nodeType=pg;
ua(Zd,ja);jg.prototype.nodeType=tl;ua(jg,ja);kg.prototype.nodeType=sl;ua(kg,ja);$d.prototype.nodeType=rg;ua($d,ja);Oc.prototype.nodeName="#document-fragment";Oc.prototype.nodeType=mb;ua(Oc,ja);ae.prototype.nodeType=qg;ua(ae,ja);ja.prototype.toString=function(c,f){var e=[],b=9==this.nodeType&&this.documentElement||this,t=b.prefix,m=b.namespaceURI;if(m&&null==t&&(t=b.lookupPrefix(m),null==t))var p=[{namespace:m,prefix:null}];Ib(this,e,c,f,p);return e.join("")};try{if(Object.defineProperty){var vl;Object.defineProperty(kb.prototype,"length",{get});Object.defineProperty(ja.prototype,"textContent",{get,set:function(f){switch(this.nodeType){case Ma:case mb:for(;this.firstChild;)this.removeChild(this.firstChild);(f||String(f))&&this.appendChild(this.ownerDocument.createTextNode(f));break;default:this.nodeValue=
this.value=this.data=f}}});bg}}catch(c){}var wc=r(function(c,f){f.XML_ENTITIES=Lc({amp:"\x26",apos:"'",gt:"\x3e",lt:"\x3c",quot:'"'});f.HTML_ENTITIES=Lc({lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',apos:"'",Agrave:"\u00c0",Aacute:"\u00c1",Acirc:"\u00c2",Atilde:"\u00c3",Auml:"\u00c4",Aring:"\u00c5",AElig:"\u00c6",Ccedil:"\u00c7",Egrave:"\u00c8",Eacute:"\u00c9",Ecirc:"\u00ca",Euml:"\u00cb",Igrave:"\u00cc",Iacute:"\u00cd",Icirc:"\u00ce",Iuml:"\u00cf",ETH:"\u00d0",Ntilde:"\u00d1",
Ograve:"\u00d2",Oacute:"\u00d3",Ocirc:"\u00d4",Otilde:"\u00d5",Ouml:"\u00d6",Oslash:"\u00d8",Ugrave:"\u00d9",Uacute:"\u00da",Ucirc:"\u00db",Uuml:"\u00dc",Yacute:"\u00dd",THORN:"\u00de",szlig:"\u00df",agrave:"\u00e0",aacute:"\u00e1",acirc:"\u00e2",atilde:"\u00e3",auml:"\u00e4",aring:"\u00e5",aelig:"\u00e6",ccedil:"\u00e7",egrave:"\u00e8",eacute:"\u00e9",ecirc:"\u00ea",euml:"\u00eb",igrave:"\u00ec",iacute:"\u00ed",icirc:"\u00ee",iuml:"\u00ef",eth:"\u00f0",ntilde:"\u00f1",ograve:"\u00f2",oacute:"\u00f3",
ocirc:"\u00f4",otilde:"\u00f5",ouml:"\u00f6",oslash:"\u00f8",ugrave:"\u00f9",uacute:"\u00fa",ucirc:"\u00fb",uuml:"\u00fc",yacute:"\u00fd",thorn:"\u00fe",yuml:"\u00ff",nbsp:"\u00a0",iexcl:"\u00a1",cent:"\u00a2",pound:"\u00a3",curren:"\u00a4",yen:"\u00a5",brvbar:"\u00a6",sect:"\u00a7",uml:"\u00a8",copy:"\u00a9",ordf:"\u00aa",laquo:"\u00ab",not:"\u00ac",shy:"\u00ad\u00ad",reg:"\u00ae",macr:"\u00af",deg:"\u00b0",plusmn:"\u00b1",sup2:"\u00b2",sup3:"\u00b3",acute:"\u00b4",micro:"\u00b5",para:"\u00b6",middot:"\u00b7",
cedil:"\u00b8",sup1:"\u00b9",ordm:"\u00ba",raquo:"\u00bb",frac14:"\u00bc",frac12:"\u00bd",frac34:"\u00be",iquest:"\u00bf",times:"\u00d7",divide:"\u00f7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a","int":"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",
ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",
Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",
circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",
lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"});f.entityMap=f.HTML_ENTITIES});wc.XML_ENTITIES;wc.HTML_ENTITIES;wc.entityMap;var lc=ld,Ue=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Th=new RegExp("[\\-\\.0-9"+Ue.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Uh=new RegExp("^"+Ue.source+Th.source+
"*(?::"+Ue.source+Th.source+"*)?$");Jb.prototype=Error();Jb.prototype.name=Jb.name;tg.prototype={parse:function(c,f,e){var b=this.domBuilder;b.startDocument();var t=f,m=f={},p;for(p in t)m[p]=t[p];Tj(c,f,e,b,this.errorHandler);b.endDocument()}};ug.prototype={setTagName,addValue:function(c,f,e){if(!Uh.test(c))throw Error("invalid attribute:"+c);this.attributeNames[c]=this.length;this[this.length++]={qName:c,value:f,offset:e}},
length:0,getLocalName:function(c){return this[c].localName},getLocator:function(c){return this[c].locator},getQName:function(c){return this[c].qName},getURI:function(c){return this[c].uri},getValue};yg.prototype.parseFromString=function(c,f){var e=this.options,b=new tg,t=e.domBuilder||new Rc,m=e.errorHandler,p=e.locator,a=e.xmlns||{},k=(f=/\/x?html?$/.test(f))?wc.HTML_ENTITIES:wc.XML_ENTITIES;p&&t.setDocumentLocator(p);b.errorHandler=bk(m,t,p);b.domBuilder=e.domBuilder||
t;f&&(a[""]=ld.HTML);a.xml=a.xml||ld.XML;c&&"string"===typeof c?b.parse(c,a,k):b.errorHandler.error("invalid doc source");return t.doc};Rc.prototype={startDocument,startElement:function(c,f,e,b){var t=this.doc;f=t.createElementNS(c,e||f);var m=b.length;Sc(this,f);this.currentElement=f;this.locator&&Kb(this.locator,f);for(var p=0;p<m;p++){c=b.getURI(p);var a=b.getValue(p);e=b.getQName(p);
c=t.createAttributeNS(c,e);this.locator&&Kb(b.getLocator(p),c);c.value=c.nodeValue=a;f.setAttributeNode(c)}},endElement:function(c,f,e){c=this.currentElement;c.tagName;this.currentElement=c.parentNode},startPrefixMapping,endPrefixMapping:function(c){},processingInstruction:function(c,f){c=this.doc.createProcessingInstruction(c,f);this.locator&&Kb(this.locator,c);Sc(this,c)},ignorableWhitespace,characters:function(c,f,e){if(c=zg.apply(this,arguments)){var b=this.cdata?
this.doc.createCDATASection(c):this.doc.createTextNode(c);this.currentElement?this.currentElement.appendChild(b):/^\s*$/.test(c)&&this.doc.appendChild(b);this.locator&&Kb(this.locator,b)}},skippedEntity:function(c){},endDocument,setDocumentLocator:function(c){if(this.locator=c)c.lineNumber=0},comment,startCDATA:function(){this.cdata=!0},endCDATA,startDTD,warning:function(c){console.warn("[xmldom warning]\t"+c,ee(this.locator))},error,fatalError};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,);var Vh,Ia=function f(){for(var e=arguments.length,b=Array(e),t=0;t<e;t++)b[t]=arguments[t];return b.reduce(function(b,e){if("object"!==typeof e)return b;Object.keys(e).forEach);return b},{})},Wh,md,Xh,wl,Ve,xl,xc=function(f){var e=f.baseUrl,b=f.source;b=void 0===b?"":b;var t=f.range;t=void 0===t?"":t;f=f.indexRange;f=void 0===f?"":f;e=
{uri:b,resolvedUri:xa((void 0===e?"":e)||"",b)};if(t||f)t=(t?t:f).split("-"),b=window.BigInt?window.BigInt(t[0]):parseInt(t[0],10),t=window.BigInt?window.BigInt(t[1]):parseInt(t[1],10),b<Number.MAX_SAFE_INTEGER&&"bigint"===typeof b&&(b=Number(b)),t<Number.MAX_SAFE_INTEGER&&"bigint"===typeof t&&(t=Number(t)),t="bigint"===typeof t||"bigint"===typeof b?window.BigInt(t)-window.BigInt(b)+window.BigInt(1):t-b+1,"bigint"===typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),e.byterange={length:t,offset:b};
return e},Yh=function(f){f&&"number"!==typeof f&&(f=parseInt(f,10));return isNaN(f)?null:f},yl={"static":function(f){var e=f.duration,b=f.timescale,t=void 0===b?1:b;b=f.sourceDuration;var m=f.periodDuration;f=Yh(f.endNumber);e/=t;return"number"===typeof f?{start:0,end:f}:"number"===typeof m?{start:0,end:m/e}:{start:0,end:b/e}},dynamic:function(f){var e=f.NOW,b=f.clientOffset,t=f.availabilityStartTime,m=f.timescale;m=void 0===m?1:m;var p=f.duration,a=f.periodStart,k=void 0===a?0:a;a=f.minimumUpdatePeriod;
var l=void 0===a?0:a;a=f.timeShiftBufferDepth;a=void 0===a?Infinity:a;f=Yh(f.endNumber);e=(e+b)/1E3;t+=k;b=Math.ceil((e+l-t)*m/p);k=Math.floor((e-t)*m/p);return{start:Math.max(0,Math.floor((e-t-a)*m/p)),end:"number"===typeof f?f:Math.min(b,k)}}},zl=function(f){return function(e){var b=f.duration,t=f.timescale,m=f.startNumber;return{number:(void 0===m?1:m)+e,duration:b/(void 0===t?1:t),timeline:f.periodStart,time:e*b}}},We=function(f){var e=f.type,b=f.duration,t=f.timescale;t=void 0===t?1:t;var m=
f.periodDuration,p=f.sourceDuration,a=yl[e](f),k=a.end,l=[];for(a=a.start;a<k;a++)l.push(a);f=l.map(zl(f));"static"===e&&(e=f.length-1,f[e].duration=("number"===typeof m?m:p)-b/t*e);return f},Zh=function(f){var e=f.baseUrl,b=f.initialization,t=void 0===b?{}:b;b=f.sourceDuration;var m=f.indexRange,p=void 0===m?"":m;m=f.periodStart;var a=f.presentationTime,k=f.number;k=void 0===k?0:k;var l=f.duration;if(!e)throw Error("NO_BASE_URL");t=xc({baseUrl:e,source:t.sourceURL,range:t.range});e=xc({baseUrl:e,
source:e,indexRange:p});e.map=t;l?(f=We(f),f.length&&(e.duration=f[0].duration,e.timeline=f[0].timeline)):b&&(e.duration=b,e.timeline=m);e.presentationTime=a||m;e.number=k;return[e]},Xe=function(f,e,b){var t=f.sidx.map?f.sidx.map:null,m=f.sidx.duration,p=f.timeline||0,a=f.sidx.byterange,k=a.offset+a.length;a=e.timescale;var l=e.references.filter),d=[],h=f.endList?"static":"dynamic",g=f.sidx.timeline,u=g,z=f.mediaSequence||0;k="bigint"===typeof e.firstOffset?
window.BigInt(k)+e.firstOffset:k+e.firstOffset;for(var v=0;v<l.length;v++){var B=e.references[v],q=B.referencedSize;B=B.subsegmentDuration;var r=void 0;r="bigint"===typeof k?k+window.BigInt(q)-window.BigInt(1):k+q-1;r=Zh({baseUrl:b,timescale:a,timeline:p,periodStart:g,presentationTime:u,number:z,duration:B,sourceDuration:m,indexRange:k+"-"+r,type:h})[0];t&&(r.map=t);d.push(r);k="bigint"===typeof k?k+window.BigInt(q):k+q;u+=B/a;z++}f.segments=d;return f},Al=["AUDIO","SUBTITLES"],Bl=1/60,$h,Cl,ai,bi=function(f){var e=f.playlist;e.mediaSequence=f.mediaSequence;e.segments.forEach)},Dl=function(f){var e=f.oldPlaylists,b=f.timelineStarts;f.newPlaylists.forEach(function(f){f.discontinuitySequence=
Ve(b,function(b){return b.timeline===f.timeline});var t=Cl(e,f.attributes.NAME);if(t&&!f.sidx){var p=f.segments[0],a=Ve(t.segments);-1===a?(bi({playlist:f,mediaSequence:t.mediaSequence+t.segments.length}),f.segments[0].discontinuity=!0,f.discontinuityStarts.unshift(0),(!t.segments.length&&f.timeline>t.timeline||t.segments.length&&f.timeline>t.segments[t.segments.length-1].timeline)&&f.discontinuitySequence--):(t.segments[a].discontinuity&&
!p.discontinuity&&(p.discontinuity=!0,f.discontinuityStarts.unshift(0),f.discontinuitySequence--),bi({playlist:f,mediaSequence:t.segments[a].number}))}})},El=function(f){var e=f.oldManifest;f=f.newManifest;var b=e.playlists.concat(ai(e)),t=f.playlists.concat(ai(f));f.timelineStarts=$h([e.timelineStarts,f.timelineStarts]);Dl({oldPlaylists:b,newPlaylists:t,timelineStarts:f.timelineStarts});return f},nd=function(f){var e;if(e=f){e=f.uri+"-";f=f.byterange;var b="bigint"===typeof f.offset||"bigint"===
typeof f.length?window.BigInt(f.offset)+window.BigInt(f.length)-window.BigInt(1):f.offset+f.length-1;e+=f.offset+"-"+b}return e},Ye=function(f){return Wh(f.reduce(function(e,b){var f=b.attributes.id+(b.attributes.lang||"");if(e[f]){if(b.segments){var m;b.segments[0]&&(b.segments[0].discontinuity=!0);(m=e[f].segments).push.apply(m,b.segments)}b.attributes.contentProtection&&(e[f].attributes.contentProtection=b.attributes.contentProtection)}else e[f]=b,e[f].attributes.timelineStarts=[];e[f].attributes.timelineStarts.push({start:b.attributes.periodStart,
timeline:b.attributes.periodStart});return e},{})).map)},Ze=function(f,e){var b=nd(f.sidx);(e=b&&e[b]&&e[b].sidx)&&Xe(f,e,f.sidx.resolvedUri);return f},Fl,Gl=function(f){var e,b=f.attributes,t=f.segments,m=f.mediaSequence,p=f.discontinuityStarts;f=f.discontinuitySequence;"undefined"===typeof t&&(t=[{uri:b.baseUrl,
timeline:b.periodStart,resolvedUri:b.baseUrl||"",duration:b.sourceDuration,number:0}],b.duration=b.sourceDuration);var a=(e={NAME:b.id,BANDWIDTH:b.bandwidth},e["PROGRAM-ID"]=1,e);b.codecs&&(a.CODECS=b.codecs);return{attributes:a,uri:"",endList:"static"===b.type,timeline:b.periodStart,resolvedUri:b.baseUrl||"",targetDuration:b.duration,timelineStarts:b.timelineStarts,discontinuityStarts:p,discontinuitySequence:f,mediaSequence:m,segments:t}},Hl=function(f,e,b){void 0===e&&(e={});void 0===b&&(b=!1);
var t;f=f.reduce(function(f,a){var k=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"",d=a.attributes.label||"main";l&&!a.attributes.label&&(d=""+a.attributes.lang+(k?" ("+k+")":""));f[d]||(f[d]={language:l,autoselect:!0,"default":"main"===k,playlists:[],uri:""});l=b;var h,g=a.attributes,u=a.segments,p=a.sidx,m=a.mediaSequence,B=a.discontinuitySequence,q=a.discontinuityStarts;u={attributes:(h={NAME:g.id,BANDWIDTH:g.bandwidth,CODECS:g.codecs},h["PROGRAM-ID"]=1,h),uri:"",endList:"static"===
g.type,timeline:g.periodStart,resolvedUri:"",targetDuration:g.duration,discontinuitySequence:B,discontinuityStarts:q,timelineStarts:g.timelineStarts,mediaSequence:m,segments:u};g.contentProtection&&(u.contentProtection=g.contentProtection);p&&(u.sidx=p);l&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs");h=Ze(u,e);f[d].playlists.push(h);"undefined"===typeof t&&"main"===k&&(t=a,t["default"]=!0);return f},{});if(!t){var m=Object.keys(f)[0];f[m]["default"]=!0}return f},Il=function(f,e){void 0===
e&&(e={});return f.reduce(function(b,f){var t=f.attributes.lang||"text";b[t]||(b[t]={language:t,"default":!1,autoselect:!1,playlists:[],uri:""});b[t].playlists.push(Ze(Gl(f),e));return b},{})},Jl=function(f){return f.reduce(function(e,b){if(!b)return e;b.forEach(function(b){var f=b.language;e[f]={autoselect:!1,"default":!1,instreamId:b.channel,language:f};b.hasOwnProperty("aspectRatio")&&(e[f].aspectRatio=b.aspectRatio);b.hasOwnProperty("easyReader")&&(e[f].easyReader=b.easyReader);b.hasOwnProperty("3D")&&
(e[f]["3D"]=b["3D"])});return e},{})},Kl=function(f){var e,b=f.attributes,t=f.segments,m=f.sidx;f=f.discontinuityStarts;t={attributes:(e={NAME:b.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:b.width,height:b.height},CODECS:b.codecs,BANDWIDTH:b.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===b.type,timeline:b.periodStart,resolvedUri:"",targetDuration:b.duration,discontinuityStarts:f,timelineStarts:b.timelineStarts,segments:t};b.contentProtection&&(t.contentProtection=b.contentProtection);
m&&(t.sidx=m);return t},Ll=function(f){f=f.attributes;return"video/mp4"===f.mimeType||"video/webm"===f.mimeType||"video"===f.contentType},Ml=function(f){f=f.attributes;return"audio/mp4"===f.mimeType||"audio/webm"===f.mimeType||"audio"===f.contentType},Nl,Ol,ci=function(f){return f?Object.keys(f).reduce,[]):[]},Pl=function(f){var e,b=f.dashPlaylists,t=f.locations,m=f.sidxMapping;m=void 0===m?{}:m;f=f.previousManifest;if(!b.length)return{};var p=b[0].attributes,a=p.sourceDuration,k=p.type,l=p.suggestedPresentationDelay,d=p.minimumUpdatePeriod;p=Ye(b.filter(Ll)).map(Kl);var h=Ye(b.filter(Ml)),g=Ye(b.filter(Nl));b=b.map).filter(Boolean);a={allowCache:!0,
discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(e={AUDIO:{},VIDEO:{}},e["CLOSED-CAPTIONS"]={},e.SUBTITLES={},e),uri:"",duration:a,playlists:Fl(p,m)};0<=d&&(a.minimumUpdatePeriod=1E3*d);t&&(a.locations=t);"dynamic"===k&&(a.suggestedPresentationDelay=l);e=0===a.playlists.length;e=h.length?Hl(h,m,e):null;m=g.length?Il(g,m):null;t=p.concat(ci(e),ci(m));p=t.map);a.timelineStarts=$h(p);Ol(t,a.timelineStarts);e&&(a.mediaGroups.AUDIO.audio=e);m&&(a.mediaGroups.SUBTITLES.subs=
m);b.length&&(a.mediaGroups["CLOSED-CAPTIONS"].cc=Jl(b));return f?El({oldManifest:f,newManifest:a}):a},di=function(f,e){var b=f.type,t=f.minimumUpdatePeriod;t=void 0===t?0:t;var m=f.media;m=void 0===m?"":m;var p=f.sourceDuration,a=f.timescale;a=void 0===a?1:a;var k=f.startNumber;k=void 0===k?1:k;for(var l=f.periodStart,d=[],h=-1,g=0;g<e.length;g++){var u=e[g],z=u.d,v=u.r||0;u=u.t||0;0>h&&(h=u);u&&u>h&&(h=u);if(0>v)if(v=g+1,v===e.length)if("dynamic"===b&&0<t&&0<m.indexOf("$Number$")){v=f.timescale;
u=f.periodStart;var B=f.minimumUpdatePeriod;v=Math.ceil((((f.NOW+f.clientOffset)/1E3+(void 0===B?0:B)-(f.availabilityStartTime+(void 0===u?0:u)))*(void 0===v?1:v)-h)/z)}else v=(p*a-h)/z;else v=(e[v].t-h)/z;else v+=1;v=k+d.length+v;for(u=k+d.length;u<v;)d.push({number:u,duration:z/a,time:h,timeline:l}),h+=z,u++}return d},ei=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,fi=function(f){return function(e,b,t,m){if("$$"===e)return"$";if("undefined"===typeof f[b])return e;e=""+f[b];if("RepresentationID"===b)return e;
m=t?parseInt(m,10):1;return e.length>=m?e:""+Array(m-e.length+1).join("0")+e}},Ql,Rl=function(f,e){var b={RepresentationID:f.id,Bandwidth:f.bandwidth||0},t=f.initialization;t=void 0===t?{sourceURL:"",range:""}:t;var m=xc({baseUrl:f.baseUrl,source:t.sourceURL.replace(ei,fi(b)),range:t.range});return Ql(f,e).map(function(e){b.Number=e.number;b.Time=e.time;
var a=(f.media||"").replace(ei,fi(b)),k=f.periodStart+(e.time-(f.presentationTimeOffset||0))/(f.timescale||1);return{uri:a,timeline:e.timeline,duration:e.duration,resolvedUri:xa(f.baseUrl||"",a),map:m,number:e.number,presentationTime:k}})},Sl=function(f,e){var b=f.duration,t=f.segmentUrls;t=void 0===t?[]:t;var m=f.periodStart;if(!b&&!e||b&&e)throw Error("SEGMENT_TIME_UNSPECIFIED");var p=t.map(function(b){var e=f.baseUrl,d=f.initialization;d=void 0===d?{}:d;d=xc({baseUrl:e,source:d.sourceURL,range:d.range});
b=xc({baseUrl:e,source:b.media,range:b.mediaRange});b.map=d;return b}),a;b&&(a=We(f));e&&(a=di(f,e));return a.map(function(b,e){if(p[e]){e=p[e];var d=f.timescale||1,a=f.presentationTimeOffset||0;e.timeline=b.timeline;e.duration=b.duration;e.number=b.number;e.presentationTime=m+(b.time-a)/d;return e}}).filter(function(b){return b})},Tl=function(f){var e=f.attributes;f=f.segmentInfo;if(f.template){var b=Rl;var t=Ia(e,f.template)}else f.base?(b=Zh,t=Ia(e,f.base)):f.list&&(b=Sl,t=Ia(e,f.list));e={attributes:e};
if(!b)return e;b=b(t,f.segmentTimeline);if(t.duration){var m=t,p=m.timescale;t.duration=m.duration/(void 0===p?1:p)}else t.duration=b.length?b.reduce,0):0;e.attributes=t;e.segments=b;f.base&&t.indexRange&&(e.sidx=b[0],e.segments=[]);return e},fa,$e,Vb=function(f){f=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(f);
if(!f)return 0;f=f.slice(1);var e=f[1],b=f[2],t=f[3],m=f[4],p=f[5];return 31536E3*parseFloat(f[0]||0)+2592E3*parseFloat(e||0)+86400*parseFloat(b||0)+3600*parseFloat(t||0)+60*parseFloat(m||0)+parseFloat(p||0)},gi={mediaPresentationDuration:function(f){return Vb(f)},availabilityStartTime:function(f){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(f)&&(f+="Z");return Date.parse(f)/1E3},minimumUpdatePeriod:function(f){return Vb(f)},suggestedPresentationDelay:function(f){return Vb(f)},type:function(f){return f},
timeShiftBufferDepth:function(f){return Vb(f)},start:function(f){return Vb(f)},width:function(f){return parseInt(f,10)},height:function(f){return parseInt(f,10)},bandwidth:function(f){return parseInt(f,10)},startNumber:function(f){return parseInt(f,10)},timescale:function(f){return parseInt(f,10)},presentationTimeOffset:function(f){return parseInt(f,10)},duration,d:function(f){return parseInt(f,10)},t:function(f){return parseInt(f,10)},r,DEFAULT},qa=function(f){return f&&f.attributes?Xh(f.attributes).reduce(function(e,b){e[b.name]=(gi[b.name]||gi.DEFAULT)(b.value);return e},{}):{}},Ul={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},od,af=function(f){var e=fa(f,"SegmentTemplate")[0],b=fa(f,"SegmentList")[0],t=b&&fa(b,"SegmentURL").map);f=fa(f,"SegmentBase")[0];var m=b||e;m=m&&fa(m,"SegmentTimeline")[0];var p=b||f||e;p=p&&fa(p,"Initialization")[0];(e=e&&qa(e))&&p?e.initialization=p&&qa(p):e&&e.initialization&&(e.initialization={sourceURL:e.initialization});var a={template:e,segmentTimeline:m&&fa(m,"S").map),list:b&&Ia(qa(b),{segmentUrls:t,initialization:qa(p)}),
base:f&&Ia(qa(f),{initialization:qa(p)})};Object.keys(a).forEach);return a},Vl=function(f,e,b){return function(t){var m=fa(t,"BaseURL");m=od(e,m);var p=Ia(f,qa(t)),a=af(t);return m.map)}},Wl=function(f){return f.reduce(function(e,b){var f=qa(b);f.schemeIdUri&&(f.schemeIdUri=f.schemeIdUri.toLowerCase());var m=Ul[f.schemeIdUri];m&&(e[m]={attributes:f},b=fa(b,"cenc:pssh")[0])&&(b=$e(b),e[m].pssh=b&&$f(b));
return e},{})},Xl=function(f){if("urn:scte:dash:cc:cea-608:2015"===f.schemeIdUri)return("string"!==typeof f.value?[]:f.value.split(";")).map(function(e){var b=e;if(/^CC\d=/.test(e)){e=e.split("\x3d");var f=e[0];b=e[1]}else/^CC\d$/.test(e)&&(f=e);return{channel:f,language:b}});if("urn:scte:dash:cc:cea-708:2015"===f.schemeIdUri)return("string"!==typeof f.value?[]:f.value.split(";")).map(function(e){var b={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var f=e.split("\x3d"),
m=f[1];b.channel=f[0];b.language=e;(void 0===m?"":m).split(",").forEach(function(e){var f=e.split(":");e=f[0];f=f[1];"lang"===e?b.language=f:"er"===e?b.easyReader=Number(f):"war"===e?b.aspectRatio=Number(f):"3D"===e&&(b["3D"]=Number(f))})}else b.language=e;b.channel&&(b.channel="SERVICE"+b.channel);return b})},Yl=function(f,e,b){return function(m){var t=qa(m),p=od(e,fa(m,"BaseURL")),a=fa(m,"Role")[0];a={role:qa(a)};t=Ia(f,t,a);a=fa(m,"Accessibility")[0];(a=Xl(qa(a)))&&(t=Ia(t,{captionServices:a}));
(a=fa(m,"Label")[0])&&a.childNodes.length&&(a=a.childNodes[0].nodeValue.trim(),t=Ia(t,{label:a}));a=Wl(fa(m,"ContentProtection"));Object.keys(a).length&&(t=Ia(t,{contentProtection:a}));a=af(m);m=fa(m,"Representation");a=Ia(b,a);return md(m.map(Vl(t,p,a)))}},Zl=function(f,e){return function(b,m){m=od(e,fa(b.node,"BaseURL"));var t=Ia(f,{periodStart:b.attributes.start});"number"===typeof b.attributes.duration&&(t.periodDuration=b.attributes.duration);var p=fa(b.node,"AdaptationSet");b=af(b.node);return md(p.map(Yl(t,
m,b)))}},$l=function(f,e){void 0===e&&(e={});var b=e;e=b.manifestUri;e=void 0===e?"":e;var m=b.NOW;m=void 0===m?Date.now():m;b=b.clientOffset;b=void 0===b?0:b;var q=fa(f,"Period");if(!q.length)throw Error("INVALID_NUMBER_OF_PERIOD");var p=fa(f,"Location"),a=qa(f);f=od([e],fa(f,"BaseURL"));a.type=a.type||"static";a.sourceDuration=a.mediaPresentationDuration||0;a.NOW=m;a.clientOffset=b;p.length&&(a.locations=p.map($e));var k=[];q.forEach(function(b,e){var f=qa(b);e=(e=k[e-1])?e.attributes:null;var d=
a.type;f.start="number"===typeof f.start?f.start:e&&"number"===typeof e.start&&"number"===typeof e.duration?e.start+e.duration:e||"static"!==d?null:0;k.push({node:b,attributes:f})});return{locations:a.locations,representationInfo:md(k.map(Zl(a,f)))}},hi=function(f){if(""===f)throw Error("DASH_EMPTY_MANIFEST");var e=new yg,b;try{var m=(b=e.parseFromString(f,"application/xml"))&&"MPD"===b.documentElement.tagName?b.documentElement:null}catch(y){}if(!m||m&&0<m.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");
return m},am=function(f){f=fa(f,"UTCTiming")[0];if(!f)return null;f=qa(f);switch(f.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":f.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":f.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":f.method="DIRECT";f.value=Date.parse(f.value);
break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return f},bm=Math.pow(2,32),ii=function(f){f=new DataView(f.buffer,f.byteOffset,f.byteLength);return f.getBigUint64?(f=f.getBigUint64(0),f<Number.MAX_SAFE_INTEGER?Number(f):f):f.getUint32(0)*bm+f.getUint32(4)},cm=K([73,68,51]),yc=function t(e,b){void 0===b&&(b=0);e=K(e);if(10>e.length-b||!aa(e,cm,{offset:b}))return b;var m=b;var p=b;void 0===p&&(p=0);b=K(e);var a=b[p+6]<<21|b[p+7]<<14|b[p+8]<<7|b[p+9];b=(b[p+5]&16)>>4?a+20:a+10;return t(e,
m+b)},ji,dm=function(e){return Array.isArray(e)?e.map(function(b){return ji(b)}):[ji(e)]},em=function p(b,m,q){void 0===q&&(q=!1);m=dm(m);b=K(b);var a=[];if(!m.length)return a;for(var k=0;k<b.length;){var l=(b[k]<<24|b[k+1]<<16|b[k+2]<<8|b[k+3])>>>0,d=b.subarray(k+4,k+8);if(0===l)break;l=k+l;if(l>b.length){if(q)break;l=b.length}k=b.subarray(k+8,l);aa(d,m[0])&&(1===m.length?a.push(k):a.push.apply(a,p(k,m.slice(1),q)));k=l}return a},ki=K([26,69,223,163]),
li=K([66,130]);K([24,83,128,103]);K([21,73,169,102]);K([22,84,174,107]);K([174]);K([215]);K([35,227,131]);K([174]);K([131]);K([136]);K([134]);K([99,162]);K([224]);K([225]);K([31,67,182,117]);K([231]);K([42,215,177]);K([160]);K([155]);K([161]);K([163]);var bf=[128,64,32,16,8,4,2,1],pd=function(b,m,q,p){void 0===q&&(q=!0);void 0===p&&(p=!1);var a=1;for(var k=0;k<bf.length&&!(b[m]&bf[k]);k++)a++;k=b.subarray(m,m+a);q&&(k=Array.prototype.slice.call(b,m,m+a),k[0]^=bf[a-1]);return{length:a,value:nl(k,{signed:p}),
bytes:k}},mi,fm,gm,ni=function k(p,a){a=fm(a);p=K(p);var l=[];if(!a.length)return l;for(var d=0;d<p.length;){var h=pd(p,d,!1),g=pd(p,d+h.length),
u=d+h.length+g.length;127===g.value&&(g.value=gm(h,p,u),g.value!==p.length&&(g.value-=u));u=p.subarray(u,u+g.value>p.length?p.length:u+g.value);aa(a[0],h.bytes)&&(1===a.length?l.push(u):l=l.concat(k(u,a.slice(1))));d+=h.length+g.length+u.length}return l},hm=K([0,0,0,1]),im=K([0,0,1]),jm=K([0,0,3]),oi=function(p,a,k,l){void 0===l&&(l=Infinity);p=K(p);k=[].concat(k);for(var d=0,h,g=0;d<p.length&&(g<l||h);){var u=void 0;aa(p.subarray(d),hm)?u=4:aa(p.subarray(d),im)&&(u=3);if(u){g++;if(h){p=p.subarray(h,
d);a=[];for(k=1;k<p.length-2;)aa(p.subarray(k,k+3),jm)&&(a.push(k+2),k++),k++;if(0!==a.length){l=p.length-a.length;d=new Uint8Array(l);for(k=h=0;k<l;h++,k++)h===a[0]&&(h++,a.shift()),d[k]=p[h];p=d}return p}var m=void 0;"h264"===a?m=p[d+u]&31:"h265"===a&&(m=p[d+u]>>1&63);-1!==k.indexOf(m)&&(h=d+u);d+=u+("h264"===a?1:2)}else d++}return p.subarray(0,0)},ha={webm:K([119,101,98,109]),matroska:K([109,97,116,114,111,115,107,97]),flac:K([102,76,97,67]),ogg:K([79,103,103,83]),ac3:K([11,119]),riff:K([82,73,
70,70]),avi:K([65,86,73]),wav:K([87,65,86,69]),"3gp":K([102,116,121,112,51,103]),mp4:K([102,116,121,112]),fmp4:K([115,116,121,112]),mov:K([102,116,121,112,113,116]),moov:K([109,111,111,118]),moof:K([109,111,111,102])},Wb={aac:function(p){var a=yc(p);return aa(p,[255,16],{offset:a,mask:[255,22]})},mp3,webm:function(p){p=ni(p,[ki,li])[0];return aa(p,ha.webm)},mkv:function(p){p=ni(p,[ki,li])[0];return aa(p,ha.matroska)},mp4:function(p){if(Wb["3gp"](p)||
Wb.mov(p))return!1;if(aa(p,ha.mp4,{offset:4})||aa(p,ha.fmp4,{offset:4})||aa(p,ha.moof,{offset:4})||aa(p,ha.moov,{offset:4}))return!0},mov,"3gp",ac3:function(p){var a=yc(p);return aa(p,ha.ac3,{offset:a})},ts:function(p){if(189>p.length&&1<=p.length)return 71===p[0];for(var a=0;a+188<p.length&&188>a;){if(71===p[a]&&71===p[a+188])return!0;a+=1}return!1},flac,
ogg:function(p){return aa(p,ha.ogg)},avi:function(p){return aa(p,ha.riff)&&aa(p,ha.avi,{offset:8})},wav,h264,h265},cf=Object.keys(Wb).filter).concat(["ts","h264","h265"]);cf.forEach);var km=Wb,df,qd,Za,pb=1/30,$a=3*pb,pi,Xb,rd,lm=
function(p,a){var k=null,l=null,d=0,h=[],g=[];if(!(p&&p.length&&a&&a.length))return w.createTimeRange();for(var u=p.length;u--;)h.push({time:p.start(u),type:"start"}),h.push({time:p.end(u),type:"end"});for(u=a.length;u--;)h.push({time:a.start(u),type:"start"}),h.push({time:a.end(u),type:"end"});h.sort(function(d,a){return d.time-a.time});for(u=0;u<h.length;u++)"start"===h[u].type?(d++,2===d&&(k=h[u].time)):"end"===h[u].type&&(d--,1===d&&(l=h[u].time)),null!==k&&null!==l&&(g.push([k,l]),l=k=null);
return w.createTimeRanges(g)},qi,Eb,mm,ri,
ef=function(p,a){var k=0;if(!p||!p.length)return k;for(var l=0;l<p.length;l++){var d=p.start(l),h=p.end(l);a>h||(k=a>d&&a<=h?k+(h-a):k+(h-d))}return k},si=w.createTimeRange,ff,gf,ti=function(p){return(p=p.segments&&p.segments.length&&p.segments[p.segments.length-1])&&p.parts||[]},ui=function(p){var a=p.preloadSegment;if(a)return p=a.parts,a=(a.preloadHints||[]).reduce,0),a+=p&&p.length?p.length:0},vi,nm=function(p,a){var k=0;a-=p.mediaSequence;var l=p.segments[a];if(l){if("undefined"!==typeof l.start)return{result:l.start,precise:!0};if("undefined"!==typeof l.end)return{result:l.end-l.duration,precise:!0}}for(;a--;){l=p.segments[a];if("undefined"!==
typeof l.end)return{result:k+l.end,precise:!0};k+=ff(p,l);if("undefined"!==typeof l.start)return{result:k+l.start,precise:!0}}return{result:k,precise:!1}},wi=function(p,a,k){"undefined"===typeof a&&(a=p.mediaSequence+p.segments.length);if(a<p.mediaSequence)return 0;var l=nm(p,a);if(l.precise)return l.result;a:{var d=0;for(var h=a-p.mediaSequence;h<p.segments.length;h++){a=p.segments[h];if("undefined"!==typeof a.start){p=a.start-d;d=!0;break a}d+=ff(p,a);if("undefined"!==typeof a.end){p=a.end-d;d=
!0;break a}}p=-1;d=!1}return d?p:l.result+k},xi=function(p,a,k){if(!p)return 0;"number"!==typeof k&&(k=0);if("undefined"===typeof a){if(p.totalDuration)return p.totalDuration;if(!p.endList)return window.Infinity}return wi(p,a,k)},zc=function(p){var a=p.defaultDuration,k=p.durationList,l=p.startIndex,d=p.endIndex;p=0;l>d&&(d=[d,l],l=d[0],d=d[1]);if(0>l){for(;l<Math.min(0,d);l++)p+=a;l=0}for(a=l;a<d;a++)p+=k[a].duration;return p},yi=function(p,a,k,l){if(!p||!p.segments)return null;if(p.endList)return xi(p);
if(null===a)return null;a=wi(p,p.mediaSequence+p.segments.length,a||0);k&&(l="number"===typeof l?l:vi(null,p),a-=l);return Math.max(0,a)},zi,hf=function(p){return p.excludeUntil&&Infinity===p.excludeUntil},sd,Ai,jf=function(p,a){if(1===p.playlists.length)return!0;var k=a.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===p.playlists.filter).length},kf=function(p,a){return!p&&!a||!p&&a||p&&!a?!1:p===a||p.id&&a.id&&p.id===a.id||p.resolvedUri&&a.resolvedUri&&p.resolvedUri===a.resolvedUri||p.uri&&a.uri&&p.uri===a.uri?!0:!1},Bi=function(p,a){p=p&&p.mediaGroups&&p.mediaGroups.AUDIO||{};var k=!1,l;for(l in p){for(var d in p[l])if(k=a(p[l][d]))break;if(k)break}return!!k},Ac=function(p){if(!p||!p.playlists||!p.playlists.length)return Bi(p);for(var a=
function(d){var a=p.playlists[d];return(d=a.attributes&&a.attributes.CODECS)&&d.split(",").every(function(d){return Nh(d)})||Bi(p)?"continue":{v:!1}},k=0;k<p.playlists.length;k++){var l=a(k);if("continue"!==l&&"object"===typeof l)return l.v}return!0},Aa={liveEdgeDelay:vi,duration:xi,seekable:function(p,a,k){var l=a||0;p=yi(p,a,!0,k);return null===p?si():si(l,p)},getMediaInfoForTime:function(p){var a=p.playlist,k=p.currentTime,l=p.startingSegmentIndex,d=p.startingPartIndex,
h=p.startTime;p=p.experimentalExactManifestTimings;for(var g=k-h,u=gf(a),m=0,v=0;v<u.length;v++){var B=u[v];if(l===B.segmentIndex&&("number"!==typeof d||"number"!==typeof B.partIndex||d===B.partIndex)){m=v;break}}if(0>g){if(0<m)for(l=m-1;0<=l;l--){d=u[l];g+=d.duration;if(p){if(0>g)continue}else if(0>=g+pb)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:h-zc({defaultDuration:a.targetDuration,durationList:u,startIndex:m,endIndex:l})}}return{partIndex:u[0]&&u[0].partIndex||
null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:k}}if(0>m){for(;0>m;m++)if(g-=a.targetDuration,0>g)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:k};m=0}for(l=m;l<u.length;l++){d=u[l];g-=d.duration;if(p){if(0<g)continue}else if(0<=g-pb)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:h+zc({defaultDuration:a.targetDuration,durationList:u,startIndex:m,endIndex:l})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-
1].partIndex,startTime:k}},isEnabled:sd,isDisabled:function(p){return p.disabled},isBlacklisted:zi,isIncompatible:hf,playlistEnd:yi,isAes,hasAttribute:Ai,estimateSegmentRequestTime,isLowestEnabledRendition:jf,isAudioOnly:Ac,playlistMatch:kf,segmentDurationWithParts:ff},Ci=w.log,om=function(p){var a=p.onwarn,k=p.oninfo,
l=p.manifestString,d=p.customTagParsers;d=void 0===d?[]:d;var h=p.customTagMappers;h=void 0===h?[]:h;p=p.experimentalLLHLS;var g=new hl;if(a)g.on("warn",a);if(k)g.on("info",k);d.forEach(function(d){return g.addParser(d)});h.forEach(function(d){return g.addTagMapper(d)});g.push(l);g.end();var u=g.manifest;p||("preloadSegment skip serverControl renditionReports partInf partTargetDuration".split(" ").forEach(function(d){u.hasOwnProperty(d)&&delete u[d]}),u.segments&&u.segments.forEach));u.targetDuration||(k=10,u.segments&&u.segments.length&&(k=u.segments.reduce(function(d,a){return Math.max(d,a.duration)},0)),a&&a("manifest has no targetDuration defaulting to "+k),u.targetDuration=k);k=ti(u);k.length&&!u.partTargetDuration&&(k=k.reduce,0),a&&(a("manifest has no partTargetDuration defaulting to "+k),Ci.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),
u.partTargetDuration=k);return u},Bc,Di=function(p){var a=p.playlist,k=p.uri;a.id=p.id;a.playlistErrors_=0;k&&(a.uri=k);a.attributes=a.attributes||{}},pm=function(p){for(var a=p.playlists.length;a--;){var k=p.playlists[a];Di({playlist:k,id:a+"-"+k.uri});k.resolvedUri=xa(p.uri,k.uri);p.playlists[k.id]=k;p.playlists[k.uri]=
k;k.attributes.BANDWIDTH||Ci.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},qm,rm=function(p,a){p="0-"+a;var k={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window.location.href,resolvedUri:window.location.href,playlists:[{uri:a,id:p,resolvedUri:a,attributes:{}}]};k.playlists[p]=k.playlists[0];k.playlists[a]=k.playlists[0];return k},Ei=function(p,a){p.uri=a;for(a=0;a<p.playlists.length;a++)p.playlists[a].uri||
(p.playlists[a].uri="placeholder-uri-"+a);var k=Ac(p);Bc(p,function(a,d,h,g){var l="placeholder-uri-"+d+"-"+h+"-"+g;if(!a.playlists||!a.playlists.length){if(k&&"AUDIO"===d&&!a.uri)for(d=0;d<p.playlists.length;d++)if(g=p.playlists[d],g.attributes&&g.attributes.AUDIO&&g.attributes.AUDIO===h)return;a.playlists=[Qa({},a)]}a.playlists.forEach(function(d,a){var g=a+"-"+l;d.uri?d.resolvedUri=d.resolvedUri||xa(p.uri,d.uri):(d.uri=0===a?l:g,d.resolvedUri=d.uri);d.id=d.id||g;d.attributes=d.attributes||{};p.playlists[d.id]=
d;p.playlists[d.uri]=d})});pm(p);qm(p)},td=w.mergeOptions,sm=function(p,a){if(a.endList||!a.serverControl)return p;var k={};if(a.serverControl.canBlockReload){var l=a.preloadSegment,d=a.mediaSequence+a.segments.length;if(l){l=l.parts||[];var h=ui(a)-1;-1<h&&h!==l.length-1&&(k._HLS_part=h);(-1<h||l.length)&&d--}k._HLS_msn=d}a.serverControl&&a.serverControl.canSkipUntil&&(k._HLS_skip=a.serverControl.canSkipDateranges?"v2":"YES");if(Object.keys(k).length){var g=new window.URL(p);["_HLS_skip","_HLS_msn",
"_HLS_part"].forEach);p=g.toString()}return p},tm,um=function(p,a,k){p=p.slice();a=a.slice();k=k||0;for(var l=
[],d,h=0;h<a.length;h++){var g=p[h+k],u=a[h];g?(d=g.map||d,l.push(tm(g,u))):(d&&!u.map&&(u.map=d),l.push(u))}return l},Fi,Gi,Hi,lf=function(p,a,k){void 0===k&&(k=Hi);var l=td(p,{}),d=l.playlists[a.id];if(!d||k(d,a))return null;a.segments=Gi(a);var h=td(d,a);h.preloadSegment&&!a.preloadSegment&&delete h.preloadSegment;if(d.segments){if(a.skip)for(a.segments=a.segments||[],k=0;k<a.skip.skippedSegments;k++)a.segments.unshift({skipped:!0});h.segments=um(d.segments,a.segments,a.mediaSequence-d.mediaSequence)}h.segments.forEach(function(d){Fi(d,h.resolvedUri)});for(d=0;d<l.playlists.length;d++)l.playlists[d].id===
a.id&&(l.playlists[d]=h);l.playlists[a.id]=h;l.playlists[a.uri]=h;Bc(p,function(d,k,l,p){if(d.playlists)for(k=0;k<d.playlists.length;k++)a.id===d.playlists[k].id&&(d.playlists[k]=h)});return l},mf=function(p,a){var k=p.segments||[],l=(k=k[k.length-1])&&k.parts&&k.parts[k.parts.length-1];k=l&&l.duration||k&&k.duration;return a&&k?1E3*k:500*(p.partTargetDuration||p.targetDuration||10)},Yb=function(p){function a(a,d,h){void 0===h&&(h={});var g=p.call(this)||this;if(!a)throw Error("A non-empty playlist URL or object is required");
g.logger_=Za("PlaylistLoader");var k=h;h=k.withCredentials;k=k.handleManifestRedirects;g.src=a;g.vhs_=d;g.withCredentials=void 0===h?!1:h;g.handleManifestRedirects=void 0===k?!1:k;a=d.options_;g.customTagParsers=a&&a.customTagParsers||[];g.customTagMappers=a&&a.customTagMappers||[];g.experimentalLLHLS=a&&a.experimentalLLHLS||!1;w.browser.IE_VERSION&&(g.experimentalLLHLS=!1);g.state="HAVE_NOTHING";g.handleMediaupdatetimeout_=g.handleMediaupdatetimeout_.bind(O(g));g.on("mediaupdatetimeout",g.handleMediaupdatetimeout_);
return g}F(a,p);var k=a.prototype;k.handleMediaupdatetimeout_;
k.playlistRequestError=function(a,d,h){var g=d.uri;d=d.id;this.request=null;h&&(this.state=h);this.error={playlist:this.master.playlists[d],status:a.status,message:"HLS playlist request error at URL: "+g+".",responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")};k.parseManifest_=function(a){var d=this,h=a.url;return om({onwarn:function(a){return d.logger_("m3u8-parser warn for "+h+": "+a.message)},oninfo:function(a){return d.logger_("m3u8-parser info for "+h+": "+a.message)},manifestString:a.manifestString,
customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})};k.haveMetadata=function(a){var d=a.playlistString,h=a.playlistObject,g=a.url;a=a.id;this.request=null;this.state="HAVE_METADATA";d=h||this.parseManifest_({url:g,manifestString:d});d.lastRequest=Date.now();Di({playlist:d,uri:g,id:a});g=lf(this.master,d);this.targetDuration=d.partTargetDuration||d.targetDuration;this.pendingMedia_=null;g?(this.master=g,this.media_=this.master.playlists[a]):
this.trigger("playlistunchanged");this.updateMediaUpdateTimeout_(mf(this.media(),!!g));this.trigger("loadedplaylist")};k.dispose;k.stopRequest=function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}};k.media=function(a,d){var h=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+
this.state);if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}window.clearTimeout(this.finalRenditionTimeout);if(d)d=(a.partTargetDuration||a.targetDuration)/2*1E3||5E3,this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,a,!1),d);else{var g=this.state;d=!this.media_||a.id!==this.media_.id;var k=this.master.playlists[a.id];if(k&&k.endList||a.endList&&a.segments.length)this.request&&(this.request.onreadystatechange=
null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,d&&(this.trigger("mediachanging"),"HAVE_MASTER"===g?this.trigger("loadedmetadata"):this.trigger("mediachange"));else if(this.updateMediaUpdateTimeout_(mf(a,!0)),d){this.state="SWITCHING_MEDIA";if(this.request){if(a.resolvedUri===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.pendingMedia_=a;this.request=this.vhs_.xhr({uri:a.resolvedUri,
withCredentials:this.withCredentials})}}};k.pause=function(){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);this.stopRequest();"HAVE_NOTHING"===this.state&&
(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")};k.load=function(a){var d=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var h=this.media();a?this.mediaUpdateTimeout=window.setTimeout,h?(h.partTargetDuration||h.targetDuration)/2*1E3:5E3):this.started?h&&!h.endList?this.trigger("mediaupdatetimeout"):
this.trigger("loadedplaylist"):this.start()};k.updateMediaUpdateTimeout_=function(a){var d=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=window.setTimeout(function(){d.mediaUpdateTimeout=null;d.trigger("mediaupdatetimeout");d.updateMediaUpdateTimeout_(a)},a))};k.start=function(){var a=this;this.started=!0;"object"===typeof this.src?(this.src.uri||(this.src.uri=window.location.href),
this.src.resolvedUri=this.src.uri,setTimeout,0)):this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(d,h){if(a.request){a.request=null;if(d)return a.error={status:h.status,message:"HLS playlist request error at URL: "+a.src+".",responseText:h.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.src=qd(a.handleManifestRedirects,a.src,h);d=a.parseManifest_({manifestString:h.responseText,url:a.src});
a.setupInitialPlaylist(d)}})};k.srcUri;k.setupInitialPlaylist=function(a){this.state="HAVE_MASTER";if(a.playlists)this.master=a,Ei(this.master,this.srcUri()),a.playlists.forEach),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);else{var d=this.srcUri()||window.location.href;this.master=rm(a,d);this.haveMetadata({playlistObject:a,
url:d,id:this.master.playlists[0].id});this.trigger("loadedmetadata")}};return a}(w.EventTarget),vm=w.xhr,wm=w.mergeOptions,nf=function(p,a,k,l){var d="arraybuffer"===p.responseType?p.response:p.responseText;!a&&d&&(p.responseTime=Date.now(),p.roundTripTime=p.responseTime-p.requestTime,p.bytesReceived=d.byteLength||d.length,p.bandwidth||(p.bandwidth=Math.floor(p.bytesReceived/p.roundTripTime*8E3)));k.headers&&(p.responseHeaders=k.headers);a&&"ETIMEDOUT"===a.code&&(p.timedout=!0);a||p.aborted||200===
k.statusCode||206===k.statusCode||0===k.statusCode||(a=Error("XHR Failed with a response of: "+(p&&(d||p.responseText))));l(a,p)},Ii=function(){var p=function d(k,l){k=wm({timeout:45E3},k);var h=d.beforeRequest||w.Vhs.xhr.beforeRequest;h&&"function"===typeof h&&(h=h(k))&&(k=h);var g=(!0===w.Vhs.xhr.original?vm:w.Vhs.xhr)(k,function(d,h){return nf(g,d,h,l)}),u=g.abort;g.abort;g.uri=k.uri;g.requestTime=Date.now();return g};p.original=!0;return p},
of=function(p){var a={};if(p.byterange){var k=p.byterange;p=k.offset;k="bigint"===typeof k.offset||"bigint"===typeof k.length?window.BigInt(k.offset)+window.BigInt(k.length)-window.BigInt(1):k.offset+k.length-1;a.Range="bytes\x3d"+p+"-"+k}return a},xm=function(p,a){p=p.toString(16);return"00".substring(0,2-p.length)+p+(a%2?" ":"")},ym=function(p){return 32<=p&&126>p?String.fromCharCode(p):"."},Ji=function(p){var a={};Object.keys(p).forEach);return a},ud=function(p){var a=p.byterange||{length:Infinity,offset:0};return[a.length,a.offset,p.resolvedUri].join()},Ki=function(p){p=Array.prototype.slice.call(p);for(var a="",k,l,d=0;d<p.length/16;d++)k=p.slice(16*d,16*d+16).map(xm).join(""),l=p.slice(16*d,16*d+16).map(ym).join(""),a+=k+" "+l+"\n";return a},zm=Object.freeze({__proto__:null,createTransferableMessage:Ji,initSegmentId:ud,segmentKeyId:function(p){return p.resolvedUri},hexDump:Ki,tagDump,
textRanges:function(p){var a="",k;for(k=0;k<p.length;k++){var l=p;var d=k;l=l.start(d)+"-"+l.end(d);a+=l+" "}return a}}),Am=function(p,a){try{var k=new Date(p)}catch(g){return null}if(!a||!a.segments||0===a.segments.length)return null;p=a.segments[0];if(k<p.dateTimeObject)return null;for(var l=0;l<a.segments.length-1&&!(p=a.segments[l],k<a.segments[l+1].dateTimeObject);l++);l=a.segments[a.segments.length-1];var d=l.dateTimeObject;if(l.videoTimingInfo){var h=l.videoTimingInfo;h=h.transmuxedPresentationEnd-
h.transmuxedPresentationStart-h.transmuxerPrependedSeconds}else h=l.duration+.25*l.duration;h=new Date(d.getTime()+1E3*h);if(k>h)return null;k>d&&(p=l);return{segment:p,estimatedStart:p.videoTimingInfo?p.videoTimingInfo.transmuxedPresentationStart:Aa.duration(a,a.mediaSequence+a.segments.indexOf(p)),type:p.videoTimingInfo?"accurate":"estimate"}},Bm=function(p,a){if(!a||!a.segments||0===a.segments.length)return null;for(var k=0,l,d=0;d<a.segments.length&&!(l=a.segments[d],k=l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationEnd:
k+l.duration,p<=k);d++);a=a.segments[a.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<p)return null;if(p>k){if(p>k+.25*a.duration)return null;l=a}return{segment:l,estimatedStart:l.videoTimingInfo?l.videoTimingInfo.transmuxedPresentationStart:k-l.duration,type:l.videoTimingInfo?"accurate":"estimate"}},Cm=function(p,a){try{var k=new Date(p);var l=new Date(a)}catch(d){}p=k.getTime();return(l.getTime()-p)/1E3},Dm,Em=function(p){var a=p.playlist,k=p.time;k=void 0===k?void 0:k;p=p.callback;if(!p)throw Error("getProgramTime: callback must be provided");if(!a||void 0===k)return p({message:"getProgramTime: playlist and time must be provided"});var l=Bm(k,a);if(!l)return p({message:"valid programTime was not found"});if("estimate"===l.type)return p({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",
seekTime:l.estimatedStart});a={mediaSeconds:k};l=l.segment;l.dateTimeObject?(k-=l.videoTimingInfo.transmuxedPresentationStart+l.videoTimingInfo.transmuxerPrependedSeconds,k=new Date(l.dateTimeObject.getTime()+1E3*k)):k=null;k&&(a.programDateTime=k.toISOString());return p(null,a)},Fm=function k(a){var l=a.programTime,d=a.playlist,h=a.retryCount,g=void 0===h?2:h,u=a.seekTo;h=a.pauseAfterSeek;var m=void 0===h?!0:h,v=a.tech,B=a.callback;if(!B)throw Error("seekToProgramTime: callback must be provided");
if("undefined"===typeof l||!d||!u)return B({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!d.endList&&!v.hasStarted_)return B({message:"player must be playing a live stream to start buffering"});if(!Dm(d))return B({message:"programDateTime tags must be provided in the manifest "+d.resolvedUri});a=Am(l,d);if(!a)return B({message:l+" was not found in the stream"});h=a.segment;var q=Cm(h.dateTimeObject,l);if("estimate"===a.type){if(0===g)return B({message:l+" is not buffered yet. Try again"});
u(a.estimatedStart+q);v.one("seeked")}else a=h.start+q,v.one("seeked"),m&&v.pause(),u(a)},Li,Gm=function(a,k,l){var d=[],h,g=!1,u,m=function(a,k){if(!g){if(a)return u(a,k,"",d);var l=k.responseText.substring(d&&d.byteLength||0,k.responseText.length);d=pl(d,Qh(l,
!0));h=h||yc(d);if(10>d.length||h&&d.length<h+2)return Li(k,function(){return u(a,k,"",d)});l=df(d);return"ts"===l&&188>d.length||!l&&376>d.length?Li(k):u(null,k,l,d)}},v=k({uri:a,beforeSend});return v},Mi=w.mergeOptions,Ni=function(a,k){if(!Hi(a,k)||a.sidx&&k.sidx&&
(a.sidx.offset!==k.sidx.offset||a.sidx.length!==k.sidx.length)||!a.sidx&&k.sidx||a.sidx&&!k.sidx||a.segments&&!k.segments||!a.segments&&k.segments)return!1;if(!a.segments&&!k.segments)return!0;for(var l=0;l<a.segments.length;l++){var d=a.segments[l],h=k.segments[l];if(d.uri!==h.uri)return!1;if(d.byterange||h.byterange)if(d=d.byterange,h=h.byterange,d&&!h||!d&&h||d.offset!==h.offset||d.length!==h.length)return!1}return!0},Hm=function(a,k,l){for(var d=!0,h=Mi(a,{duration:k.duration,minimumUpdatePeriod:k.minimumUpdatePeriod,
timelineStarts:k.timelineStarts}),g=0;g<k.playlists.length;g++){var u=k.playlists[g];if(u.sidx){var m=nd(u.sidx);l&&l[m]&&l[m].sidx&&Xe(u,l[m].sidx,u.sidx.resolvedUri)}if(u=lf(h,u,Ni))h=u,d=!1}Bc(k,function(a,g,k,u){if(a.playlists&&a.playlists.length){var l=a.playlists[0].id;if(a=lf(h,a.playlists[0],Ni))h=a,h.mediaGroups[g][k][u].playlists[0]=h.playlists[l],d=!1}});k.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(d=!1);return d?null:h},Oi=function(a,k){var l={},d;for(d in a){var h=a[d].sidx;if(h){var g=
nd(h);if(!k[g])break;var u=k[g].sidxInfo;(!u.map&&!h.map||u.map&&h.map&&u.map.byterange.offset===h.map.byterange.offset&&u.map.byterange.length===h.map.byterange.length)&&u.uri===h.uri&&u.byterange.offset===h.byterange.offset&&u.byterange.length===h.byterange.length&&(l[g]=k[g])}}return l},Im=function(a,k){var l=Oi(a.playlists,k);Bc(a);return l},pf=function(a){function k(d,h,g,k){void 0===g&&(g={});var u=a.call(this)||
this;u.masterPlaylistLoader_=k||O(u);k||(u.isMaster_=!0);k=g;g=k.withCredentials;k=k.handleManifestRedirects;u.vhs_=h;u.withCredentials=void 0===g?!1:g;u.handleManifestRedirects=void 0===k?!1:k;if(!d)throw Error("A non-empty playlist URL or object is required");u.on("minimumUpdatePeriod",function(){u.refreshXml_()});u.on("mediaupdatetimeout");u.state="HAVE_NOTHING";u.loadedPlaylists_={};u.logger_=Za("DashPlaylistLoader");u.isMaster_?(u.masterPlaylistLoader_.srcUrl=
d,u.masterPlaylistLoader_.sidxMapping_={}):u.childPlaylist_=d;return u}F(k,a);var l=k.prototype;l.requestErrored_=function(a,h,g){if(!this.request)return!0;this.request=null;if(a)return this.error="object"!==typeof a||a instanceof Error?{status:h.status,message:"DASH request error at URL: "+h.uri,response:h.response,code:2}:a,g&&(this.state=g),this.trigger("error"),!0};l.addSidxSegments_=function(a,h,g){var d=this,k=a.sidx&&nd(a.sidx);if(a.sidx&&k&&!this.masterPlaylistLoader_.sidxMapping_[k]){var l=
qd(this.handleManifestRedirects,a.sidx.resolvedUri),m=function(u,l){if(!d.requestErrored_(u,l,h)){u=d.masterPlaylistLoader_.sidxMapping_;try{var m=K(l.response).subarray(8),z=new DataView(m.buffer,m.byteOffset,m.byteLength),v={version:m[0],flags:new Uint8Array(m.subarray(1,4)),references:[],referenceId:z.getUint32(4),timescale:z.getUint32(8)},B=12;0===v.version?(v.earliestPresentationTime=z.getUint32(B),v.firstOffset=z.getUint32(B+4),B+=8):(v.earliestPresentationTime=ii(m.subarray(B)),v.firstOffset=
ii(m.subarray(B+8)),B+=16);B+=2;var q=z.getUint16(B);for(B+=2;0<q;B+=12,q--)v.references.push({referenceType:(m[B]&128)>>>7,referencedSize:z.getUint32(B)&2147483647,subsegmentDuration:z.getUint32(B+4),startsWithSap:!!(m[B+8]&128),sapType:(m[B+8]&112)>>>4,sapDeltaTime:z.getUint32(B+8)&268435455});var r=v}catch(Zj){d.requestErrored_(Zj,l,h);return}u[k]={sidxInfo:a.sidx,sidx:r};Xe(a,r,a.sidx.resolvedUri);return g(!0)}};this.request=Gm(l,this.vhs_.xhr,function(g,h,k,u){if(g)return m(g,h);if(!k||"mp4"!==
k)return m({status:h.status,message:"Unsupported "+(k||"unknown")+" container type for sidx segment at URL: "+l,response:"",playlist:a,internal:!0,blacklistDuration:Infinity,code:2},h);var z=a.sidx.byterange;k=z.offset;z=z.length;if(u.length>=z+k)return m(g,{response:u.subarray(k,k+z),status:h.status,uri:h.uri});d.request=d.vhs_.xhr({uri:l,responseType:"arraybuffer",headers:of({byterange:a.sidx.byterange})},m)})}else this.mediaRequest_=window.setTimeout,0)};l.dispose=function(){this.trigger("dispose");
this.stopRequest();this.loadedPlaylists_={};window.clearTimeout(this.minimumUpdatePeriodTimeout_);window.clearTimeout(this.mediaRequest_);window.clearTimeout(this.mediaUpdateTimeout);this.minimumUpdatePeriodTimeout_=this.mediaRequest_=this.mediaUpdateTimeout=null;this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null);this.off()};l.hasPendingRequest=function(){return this.request||this.mediaRequest_};
l.stopRequest;l.media=function(a){var d=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var g=this.state;if("string"===typeof a){if(!this.masterPlaylistLoader_.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.masterPlaylistLoader_.master.playlists[a]}var k=!this.media_||a.id!==this.media_.id;k&&this.loadedPlaylists_[a.id]&&
this.loadedPlaylists_[a.id].endList?(this.state="HAVE_METADATA",this.media_=a,k&&(this.trigger("mediachanging"),this.trigger("mediachange"))):k&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(a,g))};l.haveMetadata=function(a){var d=a.startingState;a=a.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[a.id]=a;this.mediaRequest_=null;this.refreshMedia_(a.id);"HAVE_MASTER"===d?this.trigger("loadedmetadata"):this.trigger("mediachange")};
l.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null);this.stopRequest();window.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;this.isMaster_&&(window.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null);"HAVE_NOTHING"===this.state&&(this.started=!1)};l.load=function(a){var d=
this;window.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;var g=this.media();a?this.mediaUpdateTimeout=window.setTimeout(function(){return d.load()},g?g.targetDuration/2*1E3:5E3):this.started?g&&!g.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()};l.start;l.requestMaster_=function(a){var d=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(g,h){if(d.requestErrored_(g,h))"HAVE_NOTHING"===d.state&&(d.started=!1);else{var k=h.responseText!==d.masterPlaylistLoader_.masterXml_;d.masterPlaylistLoader_.masterXml_=
h.responseText;d.masterLoaded_=h.responseHeaders&&h.responseHeaders.date?Date.parse(h.responseHeaders.date):Date.now();d.masterPlaylistLoader_.srcUrl=qd(d.handleManifestRedirects,d.masterPlaylistLoader_.srcUrl,h);if(k)d.handleMaster_(),d.syncClientServerClock_(function(){return a(h,k)});else return a(h,k)}})};l.syncClientServerClock_=function(a){var d=this,g=am(hi(this.masterPlaylistLoader_.masterXml_));if(null===g)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),a();
if("DIRECT"===g.method)return this.masterPlaylistLoader_.clientOffset_=g.value-Date.now(),a();this.request=this.vhs_.xhr({uri:xa(this.masterPlaylistLoader_.srcUrl,g.value),method:g.method,withCredentials:this.withCredentials},function(h,k){if(d.request){if(h)return d.masterPlaylistLoader_.clientOffset_=d.masterLoaded_-Date.now(),a();h="HEAD"===g.method?k.responseHeaders&&k.responseHeaders.date?Date.parse(k.responseHeaders.date):d.masterLoaded_:Date.parse(k.responseText);d.masterPlaylistLoader_.clientOffset_=
h-Date.now();a()}})};l.haveMaster_;l.handleMaster_=function(){this.mediaRequest_=null;var a=this.masterPlaylistLoader_.master,h=this.masterPlaylistLoader_.masterXml_;var g=this.masterPlaylistLoader_.srcUrl;var k={manifestUri:g,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:a};void 0===k&&(k={});h=
$l(hi(h),k);var l=h.representationInfo.map(Tl);k=Pl({dashPlaylists:l,locations:h.locations,sidxMapping:k.sidxMapping,previousManifest:k.previousManifest});Ei(k,g);g=k;a&&(g=Hm(a,g,this.masterPlaylistLoader_.sidxMapping_));this.masterPlaylistLoader_.master=g?g:a;(k=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0])&&k!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=k);(!a||g&&g.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_();
return!!g};l.updateMinimumUpdatePeriodTimeout_=function(){var a=this.masterPlaylistLoader_;a.createMupOnMedia_&&(a.off("loadedmetadata",a.createMupOnMedia_),a.createMupOnMedia_=null);a.minimumUpdatePeriodTimeout_&&(window.clearTimeout(a.minimumUpdatePeriodTimeout_),a.minimumUpdatePeriodTimeout_=null);var h=a.master&&a.master.minimumUpdatePeriod;0===h&&(a.media()?h=1E3*a.media().targetDuration:(a.createMupOnMedia_=a.updateMinimumUpdatePeriodTimeout_,a.one("loadedmetadata",a.createMupOnMedia_)));"number"!==
typeof h||0>=h?0>h&&this.logger_("found invalid minimumUpdatePeriod of "+h+", not setting a timeout"):this.createMUPTimeout_(h)};l.createMUPTimeout_;l.refreshXml_;l.refreshMedia_=function(a){var d=this;if(!a)throw Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var g=this.masterPlaylistLoader_.master.playlists,k=!this.media_||this.media_!==g[a];k?this.media_=g[a]:this.trigger("playlistunchanged");this.mediaUpdateTimeout||function v(){d.media().endList||(d.mediaUpdateTimeout=
window.setTimeout,mf(d.media(),!!k)))}();this.trigger("loadedplaylist")};return k}(w.EventTarget),va={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Pi,Jm,Qi,Ri,Si,Mm=Ri(Si(function(){var a=function(){this.init=function(){var a={};this.on;this.off=function(d,g){if(!a[d])return!1;g=a[d].indexOf(g);a[d]=a[d].slice();a[d].splice(g,1);return-1<g};this.trigger=function(d){var g,h;if(g=a[d])if(2===arguments.length){var k=g.length;for(h=0;h<k;++h)g[h].call(this,arguments[1])}else{var l=[];for(h=1;h<arguments.length;++h)l.push(arguments[h]);
k=g.length;for(h=0;h<k;++h)g[h].apply(this,l)}};this.dispose}};a.prototype.pipe;a.prototype.push=function(a){this.trigger("data",a)};a.prototype.flush=function(a){this.trigger("done",a)};a.prototype.partialFlush=function(a){this.trigger("partialdone",
a)};a.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)};a.prototype.reset=function(a){this.trigger("reset",a)};var k=Math.pow(2,32),l=function(a){a=new DataView(a.buffer,a.byteOffset,a.byteLength);return a.getBigUint64?(a=a.getBigUint64(0),a<Number.MAX_SAFE_INTEGER?Number(a):a):a.getUint32(0)*k+a.getUint32(4)},d,h,g,u,m,v,B,q,r,w,x,G,H,vg,kc,A;(function(){var a;g={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],
mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in g)g.hasOwnProperty(a)&&(g[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);u=new Uint8Array([105,115,111,109]);v=new Uint8Array([97,118,99,49]);m=new Uint8Array([0,0,0,1]);B=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,
97,110,100,108,101,114,0]);q=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);r={video:B,audio:q};G=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);x=new Uint8Array([0,0,0,0,0,0,0,0]);vg=H=new Uint8Array([0,0,0,0,0,0,0,0]);kc=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);A=H;w=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var C=function(a){var d=[],g=0,h;for(h=1;h<arguments.length;h++)d.push(arguments[h]);for(h=
d.length;h--;)g+=d[h].byteLength;var k=new Uint8Array(g+8);(new DataView(k.buffer,k.byteOffset,k.byteLength)).setUint32(0,k.byteLength);k.set(a,4);h=0;for(g=8;h<d.length;h++)k.set(d[h],g),g+=d[h].byteLength;return k};var Qc;var L;var N;var D;var F=function(a){var d=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(d[12]=a.samplerate>>>24&255,d[13]=a.samplerate>>>16&255,d[14]=a.samplerate>>>8&255,d[15]=a.samplerate&255);return C(g.mdhd,d)};var Z;var Q;var I;var E;var K;var ub=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,
0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return C(g.mvhd,a)};var M=function(a){a=a.samples||[];var d=new Uint8Array(4+a.length),h;for(h=0;h<a.length;h++){var k=a[h].flags;d[h+4]=k.dependsOn<<4|k.isDependedOn<<2|k.hasRedundancy}return C(g.sdtp,d)};var O;(function(){d;var a=function(a){var d=a.sps||[],h=a.pps||[],k=[],l=[],u;for(u=0;u<d.length;u++)k.push((d[u].byteLength&65280)>>>8),k.push(d[u].byteLength&255),k=k.concat(Array.prototype.slice.call(d[u]));for(u=0;u<h.length;u++)l.push((h[u].byteLength&65280)>>>8),l.push(h[u].byteLength&255),l=l.concat(Array.prototype.slice.call(h[u]));d=[g.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,
0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),C(g.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([d.length],k,[h.length],l))),C(g.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];a.sarRatio&&(h=a.sarRatio[0],a=a.sarRatio[1],d.push(C(g.pasp,new Uint8Array([(h&4278190080)>>24,(h&16711680)>>16,(h&65280)>>8,h&255,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>
8,a&255]))));return C.apply(null,d)};var h})();var R=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,0,0,
0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return C(g.tkhd,a)};var Fb=function(a){var d=C(g.tfhd,new Uint8Array([0,0,0,58,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var l=Math.floor(a.baseMediaDecodeTime/k);var u=Math.floor(a.baseMediaDecodeTime%k);l=C(g.tfdt,new Uint8Array([1,0,0,0,l>>>24&255,l>>>16&255,l>>>
8&255,l&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255]));if("audio"===a.type)return a=h(a,92),C(g.traf,d,l,a);u=M(a);a=h(a,u.length+92);return C(g.traf,d,l,a,u)};var P;var Ra=function(a){var d=new Uint8Array([0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(d[d.length-1]=0);return C(g.trex,d)};(function(){var a=function(a,d){var g=0,h=0,k=0,l=0;a.length&&
(void 0!==a[0].duration&&(g=1),void 0!==a[0].size&&(h=2),void 0!==a[0].flags&&(k=4),void 0!==a[0].compositionTimeOffset&&(l=8));return[0,0,g|h|k|l,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(d&4278190080)>>>24,(d&16711680)>>>16,(d&65280)>>>8,d&255]};var d=function(d,h){var k;d=d.samples||[];h+=20+16*d.length;var l=a(d,h);h=new Uint8Array(l.length+16*d.length);h.set(l);l=l.length;for(k=0;k<d.length;k++){var u=d[k];h[l++]=(u.duration&4278190080)>>>24;h[l++]=
(u.duration&16711680)>>>16;h[l++]=(u.duration&65280)>>>8;h[l++]=u.duration&255;h[l++]=(u.size&4278190080)>>>24;h[l++]=(u.size&16711680)>>>16;h[l++]=(u.size&65280)>>>8;h[l++]=u.size&255;h[l++]=u.flags.isLeading<<2|u.flags.dependsOn;h[l++]=u.flags.isDependedOn<<6|u.flags.hasRedundancy<<4|u.flags.paddingValue<<1|u.flags.isNonSyncSample;h[l++]=u.flags.degradationPriority&61440;h[l++]=u.flags.degradationPriority&15;h[l++]=(u.compositionTimeOffset&4278190080)>>>24;h[l++]=(u.compositionTimeOffset&16711680)>>>
16;h[l++]=(u.compositionTimeOffset&65280)>>>8;h[l++]=u.compositionTimeOffset&255}return C(g.trun,h)};var k=function(d,h){var k;d=d.samples||[];h+=20+8*d.length;var l=a(d,h);h=new Uint8Array(l.length+8*d.length);h.set(l);l=l.length;for(k=0;k<d.length;k++){var u=d[k];h[l++]=(u.duration&4278190080)>>>24;h[l++]=(u.duration&16711680)>>>16;h[l++]=(u.duration&65280)>>>8;h[l++]=u.duration&255;h[l++]=(u.size&4278190080)>>>24;h[l++]=(u.size&16711680)>>>16;h[l++]=(u.size&65280)>>>8;h[l++]=u.size&255}return C(g.trun,
h)};h})();var vb={ftyp:N,mdat,moof,moov:E,initSegment:function(a){var d=N();a=E(a);var g=new Uint8Array(d.byteLength+a.byteLength);g.set(d);g.set(a,d.byteLength);return g}},W=function(a,d){var g={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};g.dataOffset=
d;g.compositionTimeOffset=a.pts-a.dts;g.duration=a.duration;g.size=4*a.length;g.size+=a.byteLength;a.keyFrame&&(g.flags.dependsOn=2,g.flags.isNonSyncSample=0);return g},U={groupNalsIntoFrames:function(a){var d,g=[],h=[];h.byteLength=0;h.nalCount=0;h.duration=0;for(d=g.byteLength=0;d<a.length;d++){var k=a[d];"access_unit_delimiter_rbsp"===k.nalUnitType?(g.length&&(g.duration=k.dts-g.dts,h.byteLength+=g.byteLength,h.nalCount+=g.length,h.duration+=g.duration,h.push(g)),g=[k],g.byteLength=k.data.byteLength,
g.pts=k.pts,g.dts=k.dts):("slice_layer_without_partitioning_rbsp_idr"===k.nalUnitType&&(g.keyFrame=!0),g.duration=k.dts-g.dts,g.byteLength+=k.data.byteLength,g.push(k))}h.length&&(!g.duration||0>=g.duration)&&(g.duration=h[h.length-1].duration);h.byteLength+=g.byteLength;h.nalCount+=g.length;h.duration+=g.duration;h.push(g);return h},groupFramesIntoGops:function(a){var d,g=[],h=[];g.byteLength=0;g.nalCount=0;g.duration=0;g.pts=a[0].pts;g.dts=a[0].dts;h.byteLength=0;h.nalCount=0;h.duration=0;h.pts=
a[0].pts;h.dts=a[0].dts;for(d=0;d<a.length;d++){var k=a[d];k.keyFrame?(g.length&&(h.push(g),h.byteLength+=g.byteLength,h.nalCount+=g.nalCount,h.duration+=g.duration),g=[k],g.nalCount=k.length,g.byteLength=k.byteLength,g.pts=k.pts,g.dts=k.dts,g.duration=k.duration):(g.duration+=k.duration,g.nalCount+=k.length,g.byteLength+=k.byteLength,g.push(k))}h.length&&0>=g.duration&&(g.duration=h[h.length-1].duration);h.byteLength+=g.byteLength;h.nalCount+=g.nalCount;h.duration+=g.duration;h.push(g);return h},
extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&1<a.length){var d=a.shift();a.byteLength-=d.byteLength;a.nalCount-=d.nalCount;a[0][0].dts=d.dts;a[0][0].pts=d.pts;a[0][0].duration+=d.duration}return a},generateSampleTable:function(a,d){var g,h=d||0,k=[];for(d=0;d<a.length;d++){var l=a[d];for(g=0;g<l.length;g++){var u=l[g];u=W(u,h);h+=u.size;k.push(u)}}return k},concatenateNalData:function(a){var d,g,h,k=0,l=new Uint8Array(a.byteLength+4*a.nalCount),u=new DataView(l.buffer);for(d=0;d<a.length;d++){var m=
a[d];for(g=0;g<m.length;g++){var z=m[g];for(h=0;h<z.length;h++){var v=z[h];u.setUint32(k,v.data.byteLength);k+=4;l.set(v.data,k);k+=v.data.byteLength}}}return l},generateSampleTableForFrame:function(a,d){var g=[];a=W(a,d||0);g.push(a);return g},concatenateNalDataForFrame:function(a){var d,g=0,h=new Uint8Array(a.byteLength+4*a.length),k=new DataView(h.buffer);for(d=0;d<a.length;d++){var l=a[d];k.setUint32(g,l.data.byteLength);g+=4;h.set(l.data,g);g+=l.data.byteLength}return h}},S=[33,16,5,32,164,27],
aa=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Y,wb,da;var fa;var la;var oa;var pa;var V={ONE_SECOND_IN_TS:9E4,secondsToVideoTs:fa,secondsToAudioTs:la,videoTsToSeconds:oa,audioTsToSeconds:pa,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds},ka={prefixWithSilence:function(a,d,g,h){var k,l=k=0;if(d.length){var u=V.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var m=Math.ceil(V.ONE_SECOND_IN_TS/(a.samplerate/1024));g&&h&&(k=u-Math.max(g,h),k=Math.floor(k/m),l=k*m);if(!(1>k||l>V.ONE_SECOND_IN_TS/2)){da||(g={96E3:[S,[227,64],Y(154),[56]],88200:[S,[231],Y(170),[56]],64E3:[S,[248,192],Y(240),[56]],48E3:[S,
[255,192],Y(268),[55,148,128],Y(54),[112]],44100:[S,[255,192],Y(268),[55,163,128],Y(84),[112]],32E3:[S,[255,192],Y(268),[55,234],Y(226),[112]],24E3:[S,[255,192],Y(268),[55,255,128],Y(268),[111,112],Y(126),[224]],16E3:[S,[255,192],Y(268),[55,255,128],Y(268),[111,255],Y(269),[223,108],Y(195),[1,192]],12E3:[aa,Y(268),[3,127,248],Y(268),[6,255,240],Y(268),[13,255,224],Y(268),[27,253,128],Y(259),[56]],11025:[aa,Y(268),[3,127,248],Y(268),[6,255,240],Y(268),[13,255,224],Y(268),[27,255,192],Y(268),[55,175,
128],Y(108),[112]],8E3:[aa,Y(268),[3,121,16],Y(47),[7]]},da=wb(g));g=da[a.samplerate];g||(g=d[0].data);for(h=0;h<k;h++)u=d[0],d.splice(0,0,{data:g,dts:u.dts-m,pts:u.pts-m});a.baseMediaDecodeTime-=Math.floor(V.videoTsToAudioTs(l,a.samplerate));return l}}},trimAdtsFramesByEarliestDts:function(a,d,g){if(d.minSegmentDts>=g)return a;d.minSegmentDts=Infinity;return a.filter)},generateSampleTable:function(a){var d,
g=[];for(d=0;d<a.length;d++){var h=a[d];g.push({size:h.data.byteLength,duration:1024})}return g},concatenateFrameData:function(a){var d,g=0;var h=Uint8Array;var k=0;for(d=0;d<a.length;d++){var l=a[d];k+=l.data.byteLength}l=new h(k);for(h=0;h<a.length;h++)d=a[h],l.set(d.data,g),g+=d.data.byteLength;return l}},va=V.ONE_SECOND_IN_TS,X={clearDtsInfo,calculateTrackBaseMediaDecodeTime:function(a,d){var g=
a.minSegmentDts;d||(g-=a.timelineStartInfo.dts);d=a.timelineStartInfo.baseMediaDecodeTime;d=Math.max(0,d+g);"audio"===a.type&&(a=a.samplerate/va,d=Math.floor(d*a));return d},collectDtsInfo:function(a,d){"number"===typeof d.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=d.pts),a.minSegmentPts=void 0===a.minSegmentPts?d.pts:Math.min(a.minSegmentPts,d.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?d.pts:Math.max(a.maxSegmentPts,d.pts));"number"===typeof d.dts&&(void 0===a.timelineStartInfo.dts&&
(a.timelineStartInfo.dts=d.dts),a.minSegmentDts=void 0===a.minSegmentDts?d.dts:Math.min(a.minSegmentDts,d.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?d.dts:Math.max(a.maxSegmentDts,d.dts))}},na={parseSei:function(a){for(var d=0,g={payloadType:-1,payloadSize:0},h=0,k=0;d<a.byteLength&&128!==a[d];){for(;255===a[d];)h+=255,d++;for(h+=a[d++];255===a[d];)k+=255,d++;k+=a[d++];if(!g.payload&&4===h)if("GA94"===String.fromCharCode(a[d+3],a[d+4],a[d+5],a[d+6])){g.payloadType=h;g.payloadSize=k;g.payload=a.subarray(d,
d+k);break}else g.payload=void 0;d+=k;k=h=0}return g},parseUserData,parseCaptionPackets:function(a,d){var g=[],h;if(!(d[0]&64))return g;var k=d[0]&31;for(h=0;h<k;h++){var l=3*h;var u={type:d[l+2]&3,pts:a};d[l+2]&4&&(u.ccData=d[l+3]<<8|d[l+4],g.push(u))}return g},discardEmulationPreventionBytes:function(a){for(var d=
a.byteLength,g=[],h=1,k;h<d-2;)0===a[h]&&0===a[h+1]&&3===a[h+2]?(g.push(h+2),h+=2):h++;if(0===g.length)return a;d-=g.length;k=new Uint8Array(d);var l=0;for(h=0;h<d;l++,h++)l===g[0]&&(l++,g.shift()),k[h]=a[l];return k},USER_DATA_REGISTERED_ITU_T_T35:4},T=function qf(a){a=a||{};qf.prototype.init.call(this);this.parse708captions_="boolean"===typeof a.parse708captions?a.parse708captions:!0;this.captionPackets_=[];this.ccStreams_=[new ma(0,0),new ma(0,1),new ma(1,0),new ma(1,1)];this.parse708captions_&&
(this.cc708Stream_=new ba({captionServices:a.captionServices}));this.reset();this.ccStreams_.forEach,this);this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};T.prototype=new a;
T.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var d=na.parseSei(a.escapedRBSP);d.payload&&d.payloadType===na.USER_DATA_REGISTERED_ITU_T_T35&&(d=na.parseUserData(d))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(d=na.parseCaptionPackets(a.pts,d),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,
this.latestDts_=a.dts))}};T.prototype.flushCCStreams;T.prototype.flushStream=function(a){this.captionPackets_.length&&(this.captionPackets_.forEach(function(a,d){a.presortIndex=d}),this.captionPackets_.sort(function(a,d){return a.pts===d.pts?a.presortIndex-d.presortIndex:a.pts-d.pts}),this.captionPackets_.forEach(function(a){2>a.type?this.dispatchCea608Packet(a):this.dispatchCea708Packet(a)},this),
this.captionPackets_.length=0);this.flushCCStreams(a)};T.prototype.flush=function(){return this.flushStream("flush")};T.prototype.partialFlush=function(){return this.flushStream("partialFlush")};T.prototype.reset;T.prototype.dispatchCea608Packet;T.prototype.setsChannel1Active=function(a){return 4096===(a.ccData&30720)};T.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};T.prototype.setsTextOrXDSActive=function(a){return 256===(a.ccData&28928)||4138===(a.ccData&30974)||6186===(a.ccData&30974)};T.prototype.dispatchCea708Packet=;var za={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},qa=function(a){return 32<=a&&127>=a||160<=a&&255>=a},ca;ca.prototype.reset=function(){this.clearText();this.pendingNewLine=
!1;this.winAttr={};this.penAttr={};this.penLoc={};this.penColor={};this.anchorPoint=this.anchorHorizontal=this.anchorVertical=this.relativePositioning=this.priority=this.columnLock=this.rowLock=this.visible=0;this.rowCount=1;this.virtualRowCount=this.rowCount+1;this.columnCount=41;this.penStyle=this.windowStyle=0};ca.prototype.getText;ca.prototype.clearText;ca.prototype.newLine=function(a){this.rows.length>=this.virtualRowCount&&
"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(a);0<this.rows.length&&(this.rows.push(""),this.rowIdx++);for(;this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--};ca.prototype.isEmpty=function(){return 0===this.rows.length?!0:1===this.rows.length?""===this.rows[0]:!1};ca.prototype.addText;ca.prototype.backspace;var sa=
function(a,d,g){this.serviceNum=a;this.text="";this.currentWindow=new ca(-1);this.windows=[];this.stream=g;"string"===typeof d&&this.createTextDecoder(d)};sa.prototype.init=function(a,d){this.startPts=a;for(a=0;8>a;a++)this.windows[a]=new ca(a),"function"===typeof d&&(this.windows[a].beforeRowOverflow=d)};sa.prototype.setCurrentWindow;sa.prototype.createTextDecoder;var ba=function Km(a){a=a||{};Km.prototype.init.call(this);var d=this,g=a.captionServices||{},h={},k;Object.keys(g).forEach);this.serviceEncodings=h;this.current708Packet=null;this.services={};this.push=
function(a){3===a.type?d.new708Packet():null===d.current708Packet&&d.new708Packet();d.add708Bytes(a)}};ba.prototype=new a;ba.prototype.new708Packet;ba.prototype.add708Bytes=function(a){var d=a.ccData,g=d>>>8;d&=255;this.current708Packet.ptsVals.push(a.pts);this.current708Packet.data.push(g);this.current708Packet.data.push(d)};ba.prototype.push708Packet=function(){var a=this.current708Packet,d=
a.data,g=0,h=d[g++];a.seq=h>>6;for(a.sizeCode=h&63;g<d.length;g++){h=d[g++];a=h>>5;var k=h&31;7===a&&0<k&&(a=h=d[g++]);this.pushServiceBlock(a,g,k);0<k&&(g+=k-1)}};ba.prototype.pushServiceBlock=function(a,d,g){var h=d,k=this.current708Packet.data,l=this.services[a];for(l||(l=this.initService(a,h));h<d+g&&h<k.length;h++)a=k[h],qa(a)?h=this.handleText(h,l):24===a?h=this.multiByteCharacter(h,l):16===a?h=this.extendedCommands(h,l):128<=a&&135>=a?h=this.setCurrentWindow(h,l):152<=a&&159>=a?h=this.defineWindow(h,
l):136===a?h=this.clearWindows(h,l):140===a?h=this.deleteWindows(h,l):137===a?h=this.displayWindows(h,l):138===a?h=this.hideWindows(h,l):139===a?h=this.toggleWindows(h,l):151===a?h=this.setWindowAttributes(h,l):144===a?h=this.setPenAttributes(h,l):145===a?h=this.setPenColor(h,l):146===a?h=this.setPenLocation(h,l):143===a?l=this.reset(h,l):8===a?l.currentWindow.backspace():12===a?l.currentWindow.clearText():13===a?l.currentWindow.pendingNewLine=!0:14===a?l.currentWindow.clearText():141===a&&h++};ba.prototype.extendedCommands=;ba.prototype.getPts;ba.prototype.initService=function(a,d){var g="SERVICE"+a,h=this,k;g in this.serviceEncodings&&(k=this.serviceEncodings[g]);this.services[a]=new sa(a,k,h);this.services[a].init(this.getPts(d));return this.services[a]};ba.prototype.handleText=function(a,d,g){var h=
g&&g.isExtended,k=g&&g.isMultiByte;g=this.current708Packet.data;var l=h?4096:0,u=g[a],m=g[a+1];g=d.currentWindow;d.textDecoder_&&!h?(k?(h=[u,m],a++):h=[u],d=d.textDecoder_.decode(new Uint8Array(h))):(d=l|u,h=za[d]||d,d=d&4096&&d===h?"":String.fromCharCode(h));g.pendingNewLine&&!g.isEmpty()&&g.newLine(this.getPts(a));g.pendingNewLine=!1;g.addText(d);return a};ba.prototype.multiByteCharacter=function(a,d){var g=this.current708Packet.data,h=g[a+2];qa(g[a+1])&&qa(h)&&(a=this.handleText(++a,d,{isMultiByte:!0}));
return a};ba.prototype.setCurrentWindow=function(a,d){d.setCurrentWindow(this.current708Packet.data[a]&7);return a};ba.prototype.defineWindow=function(a,d){var g=this.current708Packet.data,h=g[a];d.setCurrentWindow(h&7);d=d.currentWindow;h=g[++a];d.visible=(h&32)>>5;d.rowLock=(h&16)>>4;d.columnLock=(h&8)>>3;d.priority=h&7;h=g[++a];d.relativePositioning=(h&128)>>7;d.anchorVertical=h&127;h=g[++a];d.anchorHorizontal=h;h=g[++a];d.anchorPoint=(h&240)>>4;d.rowCount=h&15;h=g[++a];d.columnCount=h&63;h=g[++a];
d.windowStyle=(h&56)>>3;d.penStyle=h&7;d.virtualRowCount=d.rowCount+1;return a};ba.prototype.setWindowAttributes=function(a,d){var g=this.current708Packet.data,h=d.currentWindow.winAttr;d=g[++a];h.fillOpacity=(d&192)>>6;h.fillRed=(d&48)>>4;h.fillGreen=(d&12)>>2;h.fillBlue=d&3;d=g[++a];h.borderType=(d&192)>>6;h.borderRed=(d&48)>>4;h.borderGreen=(d&12)>>2;h.borderBlue=d&3;d=g[++a];h.borderType+=(d&128)>>5;h.wordWrap=(d&64)>>6;h.printDirection=(d&48)>>4;h.scrollDirection=(d&12)>>2;h.justify=d&3;d=g[++a];
h.effectSpeed=(d&240)>>4;h.effectDirection=(d&12)>>2;h.displayEffect=d&3;return a};ba.prototype.flushDisplayed=function(a,d){for(var g=[],h=0;8>h;h++)d.windows[h].visible&&!d.windows[h].isEmpty()&&g.push(d.windows[h].getText());d.endPts=a;d.text=g.join("\n\n");this.pushCaption(d);d.startPts=a};ba.prototype.pushCaption;ba.prototype.displayWindows=
function(a,d){var g=this.current708Packet.data[++a],h=this.getPts(a);this.flushDisplayed(h,d);for(h=0;8>h;h++)g&1<<h&&(d.windows[h].visible=1);return a};ba.prototype.hideWindows=function(a,d){var g=this.current708Packet.data[++a],h=this.getPts(a);this.flushDisplayed(h,d);for(h=0;8>h;h++)g&1<<h&&(d.windows[h].visible=0);return a};ba.prototype.toggleWindows=function(a,d){var g=this.current708Packet.data[++a],h=this.getPts(a);this.flushDisplayed(h,d);for(h=0;8>h;h++)g&1<<h&&(d.windows[h].visible^=1);
return a};ba.prototype.clearWindows=function(a,d){var g=this.current708Packet.data[++a],h=this.getPts(a);this.flushDisplayed(h,d);for(h=0;8>h;h++)g&1<<h&&d.windows[h].clearText();return a};ba.prototype.deleteWindows=function(a,d){var g=this.current708Packet.data[++a],h=this.getPts(a);this.flushDisplayed(h,d);for(h=0;8>h;h++)g&1<<h&&d.windows[h].reset();return a};ba.prototype.setPenAttributes=function(a,d){var g=this.current708Packet.data,h=d.currentWindow.penAttr;d=g[++a];h.textTag=(d&240)>>4;h.offset=
(d&12)>>2;h.penSize=d&3;d=g[++a];h.italics=(d&128)>>7;h.underline=(d&64)>>6;h.edgeType=(d&56)>>3;h.fontStyle=d&7;return a};ba.prototype.setPenColor=function(a,d){var g=this.current708Packet.data,h=d.currentWindow.penColor;d=g[++a];h.fgOpacity=(d&192)>>6;h.fgRed=(d&48)>>4;h.fgGreen=(d&12)>>2;h.fgBlue=d&3;d=g[++a];h.bgOpacity=(d&192)>>6;h.bgRed=(d&48)>>4;h.bgGreen=(d&12)>>2;h.bgBlue=d&3;d=g[++a];h.edgeRed=(d&48)>>4;h.edgeGreen=(d&12)>>2;h.edgeBlue=d&3;return a};ba.prototype.setPenLocation=function(a,
d){var g=this.current708Packet.data,h=d.currentWindow.penLoc;d.currentWindow.pendingNewLine=!0;d=g[++a];h.row=d&15;d=g[++a];h.column=d&63;return a};ba.prototype.reset;var Ca={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,
547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ta,Fa=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ja,ma=function rf(a,d){rf.prototype.init.call(this);this.field_=a||0;this.dataChannel_=d||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var d=a.ccData&32639;if(d===this.lastControlCode_)this.lastControlCode_=null;else{4096===(d&61440)?this.lastControlCode_=
d:d!==this.PADDING_&&(this.lastControlCode_=null);var g=d>>>8;var h=d&255;d!==this.PADDING_&&(d===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":d===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),h=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=h,this.startPts_=a.pts):d===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):d===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):d===this.ROLL_UP_4_ROWS_?
(this.rollUpRows_=4,this.setRollUp(a.pts)):d===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):d===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):d===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=ja()):d===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=ja():d===this.RESUME_DIRECT_CAPTIONING_?
("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=ja()),this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(g,h)?(d=ta((g&3)<<8|h),this[this.mode_](a.pts,d),this.column_++):this.isExtCharacter(g,h)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),d=ta((g&3)<<8|h),this[this.mode_](a.pts,d),this.column_++):this.isMidRowCode(g,h)?(this.clearFormatting(a.pts),
this[this.mode_](a.pts," "),this.column_++,14===(h&14)&&this.addFormatting(a.pts,["i"]),1===(h&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(g,h)?this.column_+=h&3:this.isPAC(g,h)?(g=Fa.indexOf(d&7968),"rollUp"===this.mode_&&(0>g-this.rollUpRows_+1&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),h&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(d&16)&&(this.column_=4*((d&14)>>1)),this.isColorPAC(h)&&
14===(h&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(g)&&(0===h&&(h=null),d=ta(g),d+=ta(h),this[this.mode_](a.pts,d),this.column_+=d.length))}}};ma.prototype=new a;ma.prototype.flushDisplayed;ma.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=ja();this.nonDisplayed_=ja();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};ma.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=
this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};ma.prototype.isSpecialCharacter=function(a,d){return a===this.EXT_&&48<=d&&63>=d};ma.prototype.isExtCharacter=function(a,
d){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=d&&63>=d};ma.prototype.isMidRowCode=function(a,d){return a===this.EXT_&&32<=d&&47>=d};ma.prototype.isOffsetControlCode=function(a,d){return a===this.OFFSET_&&33<=d&&35>=d};ma.prototype.isPAC=function(a,d){return a>=this.BASE_&&a<this.BASE_+8&&64<=d&&127>=d};ma.prototype.isColorPAC;ma.prototype.isNormalChar;ma.prototype.setRollUp=function(a,d){"rollUp"!==this.mode_&&(this.row_=
14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=ja(),this.displayed_=ja());if(void 0!==d&&d!==this.row_)for(a=0;a<this.rollUpRows_;a++)this.displayed_[d-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===d&&(d=this.row_);this.topRow_=d-this.rollUpRows_+1};ma.prototype.addFormatting;ma.prototype.clearFormatting;ma.prototype.popOn=function(a,d){this.nonDisplayed_[this.row_]+=d};ma.prototype.rollUp=function(a,d){this.displayed_[this.row_]+=d};ma.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};
ma.prototype.paintOn=function(a,d){this.displayed_[this.row_]+=d};var Ga=ma,Ia=ba,Ja={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},ha=function(a,d){var g=1;for(a>d&&(g=-1);4294967296<Math.abs(d-a);)a+=8589934592*g;return a},Ba=function rf(a){var d,g;rf.prototype.init.call(this);this.type_=a||"shared";this.push=function(a){if("shared"===this.type_||a.type===this.type_)void 0===g&&(g=a.dts),a.dts=ha(a.dts,g),a.pts=ha(a.pts,g),d=a.dts,this.trigger("data",a)};this.flush;this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity;this.reset=function(){this.discontinuity();this.trigger("reset")}};Ba.prototype=new a;var ua=function(a,d,g){for(var h="";d<g;d++)h+="%"+("00"+a[d].toString(16)).slice(-2);return h},xa=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Ha={TXXX:function(a){var d;if(3===a.data[0]){for(d=1;d<a.data.length;d++)if(0===a.data[d]){a.description=decodeURIComponent(ua(a.data,
1,d));a.value=decodeURIComponent(ua(a.data,d+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var d;if(3===a.data[0])for(d=1;d<a.data.length;d++)if(0===a.data[d]){a.description=decodeURIComponent(ua(a.data,1,d));a.url=decodeURIComponent(ua(a.data,d+1,a.data.length));break}},PRIV:function(a){var d;for(d=0;d<a.data.length;d++)if(0===a.data[d]){a.owner=unescape(ua(a.data,0,d));break}a.privateData=a.data.subarray(d+1);a.data=a.privateData}};var Aa=function(a){a=a&&a.descriptor;
var d=0,g=[],h=0,k;Aa.prototype.init.call(this);this.dispatchType=Ja.METADATA_STREAM_TYPE.toString(16);if(a)for(k=0;k<a.length;k++)this.dispatchType+=("00"+a[k].toString(16)).slice(-2);this.push=function(a){var k;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(h=0,g.length=0),0===g.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(g.push(a),h+=a.data.byteLength,1===g.length&&
(d=xa(a.data.subarray(6,10)),d+=10),!(h<d)){a={data:new Uint8Array(d),frames:[],pts:g[0].pts,dts:g[0].dts};for(k=0;k<d;)a.data.set(g[0].data.subarray(0,d-k),k),k+=g[0].data.byteLength,h-=g[0].data.byteLength,g.shift();k=10;a.data[5]&64&&(k=k+4+xa(a.data.subarray(10,14)),d-=xa(a.data.subarray(16,20)));do{var l=xa(a.data.subarray(k+4,k+8));if(1>l){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}var u=String.fromCharCode(a.data[k],a.data[k+
1],a.data[k+2],a.data[k+3]);u={id:u,data:a.data.subarray(k+10,k+l+10)};u.key=u.id;if(Ha[u.id]&&(Ha[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var m=u.data,z=(m[3]&1)<<30|m[4]<<22|m[5]<<14|m[6]<<6|m[7]>>>2;z*=4;z+=m[7]&3;u.timeStamp=z;void 0===a.pts&&void 0===a.dts&&(a.pts=u.timeStamp,a.dts=u.timeStamp);this.trigger("timestamp",u)}a.frames.push(u);k+=10;k+=l}while(k<d);this.trigger("data",a)}}};Aa.prototype=new a;var Da=function(){var a=new Uint8Array(188),d=0;Da.prototype.init.call(this);
this.push=function(g){var h=0,k=188;if(d){var l=new Uint8Array(g.byteLength+d);l.set(a.subarray(0,d));l.set(g,d);d=0}else l=g;for(;k<l.byteLength;)71===l[h]&&71===l[k]?(this.trigger("data",l.subarray(h,k)),h+=188,k+=188):(h++,k++);h<l.byteLength&&(a.set(l.subarray(h),0),d=l.byteLength-h)};this.flush=function(){188===d&&71===a[0]&&(this.trigger("data",a),d=0);this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.reset=function(){d=0;this.trigger("reset")}};
Da.prototype=new a;var ya=function(){ya.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var d;var g;var h=function(d,g){var h;if(d[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};var k=3+((d[1]&15)<<8|d[2])-
4;for(h=12+((d[10]&15)<<8|d[11]);h<k;){var l=d[h],u=(d[h+1]&31)<<8|d[h+2];l===Ja.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=u:l===Ja.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=u:l===Ja.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][u]=l);h+=((d[h+3]&15)<<8|d[h+4])+5}g.programMapTable=a.programMapTable}};this.push=function(a){var g={},h=4;g.payloadUnitStartIndicator=!!(a[1]&64);g.pid=a[1]&31;g.pid<<=8;g.pid|=a[2];1<(a[3]&48)>>>
4&&(h+=a[h]+1);if(0===g.pid)g.type="pat",d(a.subarray(h),g),this.trigger("data",g);else if(g.pid===this.pmtPid)for(g.type="pmt",d(a.subarray(h),g),this.trigger("data",g);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,h,g]):this.processPes_(a,h,g)};this.processPes_=function(a,d,g){g.streamType=g.pid===this.programMapTable.video?Ja.H264_STREAM_TYPE:g.pid===this.programMapTable.audio?
Ja.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][g.pid];g.type="pes";g.data=a.subarray(d);this.trigger("data",g)}};ya.prototype=new a;ya.STREAM_TYPES={h264:27,adts:15};var Ka=function(){var a=this,d=!1,g={data:[],size:0},h={data:[],size:0},k={data:[],size:0},l,u=function(d,g,h){var k=new Uint8Array(d.size),l={type:g},u,m=0;if(d.data.length&&!(9>d.size)){l.trackId=d.data[0].pid;for(u=0;u<d.data.length;u++){var z=d.data[u];k.set(z.data,m);m+=z.data.byteLength}u=k[0]<<16|k[1]<<8|k[2];l.data=
new Uint8Array;1===u&&(l.packetLength=6+(k[4]<<8|k[5]),l.dataAlignmentIndicator=0!==(k[6]&4),u=k[7],u&192&&(l.pts=(k[9]&14)<<27|(k[10]&255)<<20|(k[11]&254)<<12|(k[12]&255)<<5|(k[13]&254)>>>3,l.pts*=4,l.pts+=(k[13]&6)>>>1,l.dts=l.pts,u&64&&(l.dts=(k[14]&14)<<27|(k[15]&255)<<20|(k[16]&254)<<12|(k[17]&255)<<5|(k[18]&254)>>>3,l.dts*=4,l.dts+=(k[18]&6)>>>1)),l.data=k.subarray(9+k[8]));g="video"===g||l.packetLength<=d.size;if(h||g)d.size=0,d.data.length=0;g&&a.trigger("data",l)}};Ka.prototype.init.call(this);
this.push=function(m){({pat:function(){},pes:function(){switch(m.streamType){case Ja.H264_STREAM_TYPE:var a=g;var d="video";break;case Ja.ADTS_STREAM_TYPE:a=h;d="audio";break;case Ja.METADATA_STREAM_TYPE:a=k;d="timed-metadata";break;default:return}m.payloadUnitStartIndicator&&u(a,d,!0);a.data.push(m);a.size+=m.data.byteLength},pmt:function(){var g={type:"metadata",tracks:[]};l=m.programMapTable;null!==l.video&&g.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+l.video,codec:"avc",type:"video"});
null!==l.audio&&g.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+l.audio,codec:"adts",type:"audio"});d=!0;a.trigger("data",g)}})[m.type]()};this.reset;this.flushStreams_;this.flush};Ka.prototype=new a;var ia={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Da,TransportParseStream:ya,ElementaryStream:Ka,TimestampRolloverStream:Ba,CaptionStream:T,Cea608Stream:Ga,Cea708Stream:Ia,MetadataStream:Aa},Ea;for(Ea in Ja)Ja.hasOwnProperty(Ea)&&(ia[Ea]=Ja[Ea]);var Sa=V.ONE_SECOND_IN_TS,Oa=[96E3,88200,
64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Ma=function(a){var d,g=0;Ma.prototype.init.call(this);this.skipWarn_;this.push=function(h){var k=0;a||(g=0);if("audio"===h.type){if(d&&d.length){var l=d;d=new Uint8Array(l.byteLength+h.data.byteLength);d.set(l);d.set(h.data,l.byteLength)}else d=h.data;for(var u;k+7<d.length;)if(255!==d[k]||240!==(d[k+1]&246))"number"!==
typeof u&&(u=k),k++;else{"number"===typeof u&&(this.skipWarn_(u,k),u=null);var m=2*(~d[k+1]&1);l=(d[k+3]&3)<<11|d[k+4]<<3|(d[k+5]&224)>>5;var z=1024*((d[k+6]&3)+1);var v=z*Sa/Oa[(d[k+2]&60)>>>2];if(d.byteLength-k<l)break;this.trigger("data",{pts:h.pts+g*v,dts:h.dts+g*v,sampleCount:z,audioobjecttype:(d[k+2]>>>6&3)+1,channelcount:(d[k+2]&1)<<2|(d[k+3]&192)>>>6,samplerate:Oa[(d[k+2]&60)>>>2],samplingfrequencyindex:(d[k+2]&60)>>>2,samplesize:16,data:d.subarray(k+7+m,k+l)});g++;k+=l}"number"===typeof u&&
this.skipWarn_(u,k);d=d.subarray(k)}};this.flush;this.reset=function(){d=void 0;this.trigger("reset")};this.endTimeline};Ma.prototype=new a;var Xa=function(a){var d=a.byteLength,g=0,h=0;this.length;this.bitsAvailable;this.loadWord=function(){var k=a.byteLength-d,l=new Uint8Array(4),u=Math.min(4,d);if(0===u)throw Error("no bytes available");l.set(a.subarray(k,k+u));
g=(new DataView(l.buffer)).getUint32(0);h=8*u;d-=u};this.skipBits=function(a){if(!(h>a)){a-=h;var k=Math.floor(a/8);a-=8*k;d-=k;this.loadWord()}g<<=a;h-=a};this.readBits=function(a){var k=Math.min(h,a),l=g>>>32-k;h-=k;0<h?g<<=k:0<d&&this.loadWord();k=a-k;return 0<k?l<<k|this.readBits(k):l};this.skipLeadingZeros=function(){var a;for(a=0;a<h;++a)if(0!==(g&2147483648>>>a))return g<<=a,h-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};
this.skipExpGolomb;this.readUnsignedExpGolomb;this.readExpGolomb;this.readBoolean;this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var Pa=function(){var a=0,d,g;Pa.prototype.init.call(this);this.push=function(h){if(g){var k=new Uint8Array(g.byteLength+
h.data.byteLength);k.set(g);k.set(h.data,g.byteLength);g=k}else g=h.data;for(h=g.byteLength;a<h-3;a++)if(1===g[a+2]){d=a+5;break}for(;d<h;)switch(g[d]){case 0:if(0!==g[d-1]){d+=2;break}else if(0!==g[d-2]){d++;break}a+3!==d-2&&this.trigger("data",g.subarray(a+3,d-2));do d++;while(1!==g[d]&&d<h);a=d-2;d+=3;break;case 1:if(0!==g[d-1]||0!==g[d-2]){d+=3;break}this.trigger("data",g.subarray(a+3,d-2));a=d-2;d+=3;break;default:d+=3}g=g.subarray(a);d-=a;a=0};this.reset;
this.flush=function(){g&&3<g.byteLength&&this.trigger("data",g.subarray(a+3));g=null;a=0;this.trigger("done")};this.endTimeline};Pa.prototype=new a;var Za={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Qa=function(){var a=new Pa,d,g,h;Qa.prototype.init.call(this);var k=this;this.push;a.on("data",function(a){var l={trackId:d,pts:g,dts:h,
data:a,nalUnitTypeCode:a[0]&31};switch(l.nalUnitTypeCode){case 5:l.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:l.nalUnitType="sei_rbsp";l.escapedRBSP=u(a.subarray(1));break;case 7:l.nalUnitType="seq_parameter_set_rbsp";l.escapedRBSP=u(a.subarray(1));l.config=m(l.escapedRBSP);break;case 8:l.nalUnitType="pic_parameter_set_rbsp";break;case 9:l.nalUnitType="access_unit_delimiter_rbsp"}k.trigger("data",l)});a.on("done",function(){k.trigger("done")});a.on("partialdone",function(){k.trigger("partialdone")});
a.on("reset",function(){k.trigger("reset")});a.on("endedtimeline",function(){k.trigger("endedtimeline")});this.flush=function(){a.flush()};this.partialFlush=function(){a.partialFlush()};this.reset=function(){a.reset()};this.endTimeline=function(){a.endTimeline()};var l=function(a,d){var g=8,h=8,k;for(k=0;k<a;k++)0!==h&&(h=d.readExpGolomb(),h=(g+h+256)%256),g=0===h?g:h};var u=function(a){for(var d=a.byteLength,g=[],h=1,k;h<d-2;)0===a[h]&&0===a[h+1]&&3===a[h+2]?(g.push(h+2),h+=2):h++;if(0===g.length)return a;
d-=g.length;k=new Uint8Array(d);var l=0;for(h=0;h<d;l++,h++)l===g[0]&&(l++,g.shift()),k[h]=a[l];return k};var m=function(a){var d=0,g=0,h=0,k=0,u=[1,1];a=new Xa(a);var m=a.readUnsignedByte();var z=a.readUnsignedByte();var v=a.readUnsignedByte();a.skipUnsignedExpGolomb();if(Za[m]){var Ua=a.readUnsignedExpGolomb();3===Ua&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var B=3!==Ua?8:12;for(Ua=0;Ua<B;Ua++)a.readBoolean()&&(6>Ua?l(16,a):l(64,a))}}a.skipUnsignedExpGolomb();
Ua=a.readUnsignedExpGolomb();if(0===Ua)a.readUnsignedExpGolomb();else if(1===Ua)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),B=a.readUnsignedExpGolomb(),Ua=0;Ua<B;Ua++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);Ua=a.readUnsignedExpGolomb();B=a.readUnsignedExpGolomb();var q=a.readBits(1);0===q&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(d=a.readUnsignedExpGolomb(),g=a.readUnsignedExpGolomb(),h=a.readUnsignedExpGolomb(),k=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var r=
a.readUnsignedByte();switch(r){case 1:u=[1,1];break;case 2:u=[12,11];break;case 3:u=[10,11];break;case 4:u=[16,11];break;case 5:u=[40,33];break;case 6:u=[24,11];break;case 7:u=[20,11];break;case 8:u=[32,11];break;case 9:u=[80,33];break;case 10:u=[18,11];break;case 11:u=[15,11];break;case 12:u=[64,33];break;case 13:u=[160,99];break;case 14:u=[4,3];break;case 15:u=[3,2];break;case 16:u=[2,1];break;case 255:u=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}u&&
u[0]/u[1]}return{profileIdc:m,levelIdc:v,profileCompatibility:z,width:16*(Ua+1)-2*d-2*g,height:(2-q)*(B+1)*16-2*h-2*k,sarRatio:u}}};Qa.prototype=new a;var eb=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],Ya=function(a,d){var g=a[d+6]<<21|a[d+7]<<14|a[d+8]<<7|a[d+9];a=a[d+5];g=0<=g?g:0;return(a&16)>>4?g+20:g+10},jb=function Ti(a,d){if(10>a.length-d||73!==a[d]||68!==a[d+1]||51!==a[d+2])return d;d+=Ya(a,d);return Ti(a,d)},$a,
wa={isLikelyAacData:function(a){var d=jb(a,0);return a.length>=d+2&&255===(a[d]&255)&&240===(a[d+1]&240)&&16===(a[d+1]&22)},parseId3TagSize:Ya,parseAdtsSize:function(a,d){return a[d+3]&6144|a[d+4]<<3|(a[d+5]&224)>>5},parseType:function(a,d){return 73===a[d]&&68===a[d+1]&&51===a[d+2]?"timed-metadata":a[d]&1&&240===(a[d+1]&240)?"audio":null},parseSampleRate:function(a){for(var d=0;d+5<a.length;)if(255!==a[d]||240!==(a[d+1]&246))d++;else return eb[(a[d+2]&60)>>>2];return null},parseAacTimestamp:function(a){var d=
10;a[5]&64&&(d=d+4+$a(a.subarray(10,14)));do{var g=$a(a.subarray(d+4,d+8));if(1>g)break;var h=String.fromCharCode(a[d],a[d+1],a[d+2],a[d+3]);if("PRIV"===h){h=a.subarray(d+10,d+g+10);for(var k=0;k<h.byteLength;k++)if(0===h[k]){var l=unescape,u,m=h,z=k,v="";for(u=0;u<z;u++)v+="%"+("00"+m[u].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===l(v))return a=h.subarray(k+1),d=(a[3]&1)<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,d*=4,d+=a[7]&3;break}}d+=10;d+=g}while(d<a.byteLength);
return null}};var Va=function(){var a=new Uint8Array,d=0;Va.prototype.init.call(this);this.setTimestamp=function(a){d=a};this.push=function(g){var h=0;if(a.length){var k=a.length;a=new Uint8Array(g.byteLength+k);a.set(a.subarray(0,k));a.set(g,k)}else a=g;for(;3<=a.length-h;)if(73===a[h]&&68===a[h+1]&&51===a[h+2]){if(10>a.length-h)break;g=wa.parseId3TagSize(a,h);if(h+g>a.length)break;k={type:"timed-metadata",data:a.subarray(h,h+g)};this.trigger("data",k);h+=g}else if(255===(a[h]&255)&&240===(a[h+1]&
240)){if(7>a.length-h)break;g=wa.parseAdtsSize(a,h);if(h+g>a.length)break;k={type:"audio",data:a.subarray(h,h+g),pts:d,dts:d};this.trigger("data",k);h+=g}else h++;a=0<a.length-h?a.subarray(h):new Uint8Array};this.reset=function(){a=new Uint8Array;this.trigger("reset")};this.endTimeline};Va.prototype=new a;var bb=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],db="width height profileIdc levelIdc profileCompatibility sarRatio".split(" "),
mb=wa.isLikelyAacData,nb=V.ONE_SECOND_IN_TS,ob,gb=function(a,d){for(var g=Object.keys(d),h=0;h<g.length;h++){var k=g[h];if("headOfPipeline"!==k&&d[k].on)d[k].on("log",ob.bind(a,k))}},hb,ib;var Ta=function(a,d){var g=
[],h=0,k=0,l=Infinity;d=d||{};var u=d.firstSequenceNumber||0;Ta.prototype.init.call(this);this.push;this.setEarliestDts=function(a){h=a};this.setVideoBaseMediaDecodeTime=function(a){l=a};this.setAudioAppendStart=function(a){k=a};this.flush=function(){if(0!==g.length){var m=ka.trimAdtsFramesByEarliestDts(g,a,h);a.baseMediaDecodeTime=X.calculateTrackBaseMediaDecodeTime(a,d.keepOriginalTimestamps);var z=ka.prefixWithSilence(a,
m,k,l);a.samples=ka.generateSampleTable(m);var v=vb.mdat(ka.concatenateFrameData(m));g=[];var B=vb.moof(u,[a]);var q=new Uint8Array(B.byteLength+v.byteLength);u++;q.set(B);q.set(v,B.byteLength);X.clearDtsInfo(a);B=Math.ceil(1024*nb/a.samplerate);m.length&&(B*=m.length,this.trigger("segmentTimingInfo",ib(V.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),m[0].dts,m[0].pts,m[0].dts+B,m[0].pts+B,z||0)),this.trigger("timingInfo",{start:m[0].pts,end:m[0].pts+B}));this.trigger("data",{track:a,boxes:q})}this.trigger("done",
"AudioSegmentStream")};this.reset};Ta.prototype=new a;var ab=function(a,d){var g=[],h=[],k,l;d=d||{};var u=d.firstSequenceNumber||0;ab.prototype.init.call(this);delete a.minPTS;this.gopCache_=[];this.push=function(d){X.collectDtsInfo(a,d);"seq_parameter_set_rbsp"!==d.nalUnitType||k||(k=d.config,a.sps=[d.data],db.forEach(function(d){a[d]=k[d]},this));"pic_parameter_set_rbsp"!==d.nalUnitType||l||(l=d.data,a.pps=[d.data]);g.push(d)};this.flush=
function(){var k;var l=0;for(var m,z;g.length&&"access_unit_delimiter_rbsp"!==g[0].nalUnitType;)g.shift();if(0!==g.length){var v=U.groupNalsIntoFrames(g);v=U.groupFramesIntoGops(v);v[0][0].keyFrame||((k=this.getGopForFusion_(g[0],a))?(l=k.duration,v.unshift(k),v.byteLength+=k.byteLength,v.nalCount+=k.nalCount,v.pts=k.pts,v.dts=k.dts,v.duration+=k.duration):v=U.extendFirstKeyFrame(v));if(h.length){k=d.alignGopsAtEnd?this.alignGopsAtEnd_(v):this.alignGopsAtStart_(v);if(!k){this.gopCache_.unshift({gop:v.pop(),
pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);g=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}X.clearDtsInfo(a);v=k}X.collectDtsInfo(a,v);a.samples=U.generateSampleTable(v);k=vb.mdat(U.concatenateNalData(v));a.baseMediaDecodeTime=X.calculateTrackBaseMediaDecodeTime(a,d.keepOriginalTimestamps);this.trigger("processedGopsInfo",v.map));m=v[0];z=v[v.length-1];this.trigger("segmentTimingInfo",
ib(a.baseMediaDecodeTime,m.dts,m.pts,z.dts+z.duration,z.pts+z.duration,l));this.trigger("timingInfo",{start:v[0].pts,end:v[v.length-1].pts+v[v.length-1].duration});this.gopCache_.unshift({gop:v.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);g=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);l=vb.moof(u,[a]);v=new Uint8Array(l.byteLength+k.byteLength);u++;v.set(l);v.set(k,l.byteLength);this.trigger("data",
{track:a,boxes:v})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset;this.resetStream_=function(){X.clearDtsInfo(a);l=k=void 0};this.getGopForFusion_=function(d){var g=Infinity,h;for(h=0;h<this.gopCache_.length;h++){var k=this.gopCache_[h];var l=k.gop;if(a.pps&&hb(a.pps[0],k.pps[0])&&a.sps&&hb(a.sps[0],k.sps[0])&&!(l.dts<a.timelineStartInfo.dts)&&(l=d.dts-l.dts-l.duration,-1E4<=l&&
45E3>=l&&(!u||g>l))){var u=k;g=l}}return u?u.gop:null};this.alignGopsAtStart_=function(a){var d,g;var k=a.byteLength;var l=a.nalCount;var u=a.duration;for(d=g=0;d<h.length&&g<a.length;){var m=h[d];var v=a[g];if(m.pts===v.pts)break;v.pts>m.pts?d++:(g++,k-=v.byteLength,l-=v.nalCount,u-=v.duration)}if(0===g)return a;if(g===a.length)return null;a=a.slice(g);a.byteLength=k;a.duration=u;a.nalCount=l;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var d;var g=h.length-1;var k=a.length-
1;var l=null;for(d=!1;0<=g&&0<=k;){var u=h[g];var m=a[k];if(u.pts===m.pts){d=!0;break}u.pts>m.pts?g--:(g===h.length-1&&(l=k),k--)}if(!d&&null===l)return null;g=d?k:l;if(0===g)return a;a=a.slice(g);g=a.reduce,{byteLength:0,duration:0,nalCount:0});a.byteLength=g.byteLength;a.duration=g.duration;a.nalCount=g.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){h=a}};ab.prototype=
new a;var Na=function(a,d){this.numberOfTracks=0;this.metadataStream=d;a=a||{};this.remuxTracks="undefined"!==typeof a.remux?!!a.remux:!0;this.keepOriginalTimestamps="boolean"===typeof a.keepOriginalTimestamps?a.keepOriginalTimestamps:!1;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;Na.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);
this.pendingTracks.push(a.track);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes));"audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes))}};Na.prototype=new a;Na.prototype.flush=function(a){var d=0,g={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;
this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,db.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,bb.forEach,this));if(this.videoTrack||this.audioTrack){g.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=vb.initSegment(this.pendingTracks);
g.initSegment=new Uint8Array(a.byteLength);g.initSegment.set(a);g.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)g.data.set(this.pendingBoxes[a],d),d+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)d=this.pendingCaptions[a],d.startTime=V.metadataTsToSeconds(d.startPts,h,this.keepOriginalTimestamps),d.endTime=V.metadataTsToSeconds(d.endPts,h,this.keepOriginalTimestamps),g.captionStreams[d.stream]=!0,g.captions.push(d);for(a=0;a<this.pendingMetadata.length;a++)d=
this.pendingMetadata[a],d.cueTime=V.metadataTsToSeconds(d.pts,h,this.keepOriginalTimestamps),g.metadata.push(d);g.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",g);for(a=0;a<g.captions.length;a++)d=g.captions[a],this.trigger("caption",d);for(a=0;a<g.metadata.length;a++)d=g.metadata[a],this.trigger("id3Frame",d)}this.emittedTracks>=
this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};Na.prototype.setRemux;var fb=function(a){var d=this,g=!0,h,k;fb.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var g={};this.transmuxPipeline_=g;g.type="aac";g.metadataStream=new ia.MetadataStream;g.aacStream=new Va;g.audioTimestampRolloverStream=new ia.TimestampRolloverStream("audio");g.timedMetadataTimestampRolloverStream=
new ia.TimestampRolloverStream("timed-metadata");g.adtsStream=new Ma;g.coalesceStream=new Na(a,g.metadataStream);g.headOfPipeline=g.aacStream;g.aacStream.pipe(g.audioTimestampRolloverStream).pipe(g.adtsStream);g.aacStream.pipe(g.timedMetadataTimestampRolloverStream).pipe(g.metadataStream).pipe(g.coalesceStream);g.metadataStream.on("timestamp");g.aacStream.on("data");g.coalesceStream.on("data",this.trigger.bind(this,"data"));g.coalesceStream.on("done",
this.trigger.bind(this,"done"));gb(this,g)};this.setupTsPipeline=function(){var g={};this.transmuxPipeline_=g;g.type="ts";g.metadataStream=new ia.MetadataStream;g.packetStream=new ia.TransportPacketStream;g.parseStream=new ia.TransportParseStream;g.elementaryStream=new ia.ElementaryStream;g.timestampRolloverStream=new ia.TimestampRolloverStream;g.adtsStream=new Ma;g.h264Stream=new Qa;g.captionStream=new ia.CaptionStream(a);g.coalesceStream=new Na(a,g.metadataStream);g.headOfPipeline=g.packetStream;
g.packetStream.pipe(g.parseStream).pipe(g.elementaryStream).pipe(g.timestampRolloverStream);g.timestampRolloverStream.pipe(g.h264Stream);g.timestampRolloverStream.pipe(g.adtsStream);g.timestampRolloverStream.pipe(g.metadataStream).pipe(g.coalesceStream);g.h264Stream.pipe(g.captionStream).pipe(g.coalesceStream);g.elementaryStream.on("data",function(l){var u;if("metadata"===l.type){for(u=l.tracks.length;u--;)h||"video"!==l.tracks[u].type?k||"audio"!==l.tracks[u].type||(k=l.tracks[u],k.timelineStartInfo.baseMediaDecodeTime=
d.baseMediaDecodeTime):(h=l.tracks[u],h.timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime);h&&!g.videoSegmentStream&&(g.coalesceStream.numberOfTracks++,g.videoSegmentStream=new ab(h,a),g.videoSegmentStream.on("log",d.getLogTrigger_("videoSegmentStream")),g.videoSegmentStream.on("timelineStartInfo"),g.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,
"gopInfo")),g.videoSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"videoSegmentTimingInfo")),g.videoSegmentStream.on("baseMediaDecodeTime"),g.videoSegmentStream.on("timingInfo",d.trigger.bind(d,"videoTimingInfo")),g.h264Stream.pipe(g.videoSegmentStream).pipe(g.coalesceStream));k&&!g.audioSegmentStream&&(g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new Ta(k,a),g.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),
g.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),g.audioSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"audioSegmentTimingInfo")),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream));d.trigger("trackinfo",{hasAudio:!!k,hasVideo:!!h})}});g.coalesceStream.on("data",this.trigger.bind(this,"data"));g.coalesceStream.on("id3Frame");g.coalesceStream.on("caption",this.trigger.bind(this,
"caption"));g.coalesceStream.on("done",this.trigger.bind(this,"done"));gb(this,g)};this.setBaseMediaDecodeTime=function(d){var g=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=d);k&&(k.timelineStartInfo.dts=void 0,k.timelineStartInfo.pts=void 0,X.clearDtsInfo(k),g.audioTimestampRolloverStream&&g.audioTimestampRolloverStream.discontinuity());h&&(g.videoSegmentStream&&(g.videoSegmentStream.gopCache_=[]),h.timelineStartInfo.dts=void 0,h.timelineStartInfo.pts=void 0,X.clearDtsInfo(h),
g.captionStream.reset());g.timestampRolloverStream&&g.timestampRolloverStream.discontinuity()};this.setAudioAppendStart;this.setRemux;this.alignGopsWith;this.getLogTrigger_;this.push;this.flush;this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()};
this.resetCaptions};fb.prototype=new a;var La=function(a){var d=""+String.fromCharCode(a[0]);d+=String.fromCharCode(a[1]);d+=String.fromCharCode(a[2]);return d+=String.fromCharCode(a[3])},ea=function Lm(a,d){var g=[],h;if(!d.length)return null;for(h=0;h<a.byteLength;){var k=(a[h]<<24|a[h+1]<<16|a[h+2]<<8|a[h+3])>>>0;var l=La(a.subarray(h+4,h+8));k=1<k?h+k:a.byteLength;l===d[0]&&(1===d.length?g.push(a.subarray(h+
8,k)):(h=Lm(a.subarray(h+8,k),d.slice(1)),h.length&&(g=g.concat(h))));h=k}return g},pb=function(a){var d={version:a[0],flags:new Uint8Array(a.subarray(1,4))};d.baseMediaDecodeTime=1===d.version?l(a.subarray(4)):(a[4]<<24|a[5]<<16|a[6]<<8|a[7])>>>0;return d},Gb,qb=function(a){var d={version:a[0],flags:new Uint8Array(a.subarray(1,
4)),samples:[]},g=new DataView(a.buffer,a.byteOffset,a.byteLength),h=d.flags[2]&1,k=d.flags[2]&4,l=d.flags[1]&1,u=d.flags[1]&2,m=d.flags[1]&4,v=d.flags[1]&8,z=g.getUint32(4),B=8;h&&(d.dataOffset=g.getInt32(B),B+=4);k&&z&&(h={flags:Gb(a.subarray(B,B+4))},B+=4,l&&(h.duration=g.getUint32(B),B+=4),u&&(h.size=g.getUint32(B),B+=4),v&&(h.compositionTimeOffset=1===d.version?g.getInt32(B):g.getUint32(B),B+=4),d.samples.push(h),z--);for(;z--;)h={},l&&(h.duration=g.getUint32(B),B+=4),u&&(h.size=g.getUint32(B),
B+=4),m&&(h.flags=Gb(a.subarray(B,B+4)),B+=4),v&&(h.compositionTimeOffset=1===d.version?g.getInt32(B):g.getUint32(B),B+=4),d.samples.push(h);return d},rb=function(a){var d=new DataView(a.buffer,a.byteOffset,a.byteLength);a={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:d.getUint32(4)};var g=a.flags[2]&1,h=a.flags[2]&2,k=a.flags[2]&8,l=a.flags[2]&16,u=a.flags[2]&32,m=a.flags[0]&65536,v=a.flags[0]&131072;var z=8;g&&(z+=4,a.baseDataOffset=d.getUint32(12),z+=4);h&&(a.sampleDescriptionIndex=
d.getUint32(z),z+=4);k&&(a.defaultSampleDuration=d.getUint32(z),z+=4);l&&(a.defaultSampleSize=d.getUint32(z),z+=4);u&&(a.defaultSampleFlags=d.getUint32(z));m&&(a.durationIsEmpty=!0);!g&&v&&(a.baseDataOffsetIsMoof=!0);return a},sb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Wa="undefined"!==typeof window?window:"undefined"!==typeof sb?sb:"undefined"!==typeof self?self:{},Cb=na.discardEmulationPreventionBytes,
Db=function(a,d,g){var h=d,k=g.defaultSampleDuration||0,l=g.defaultSampleSize||0,u=g.trackId,m=[];a.forEach(function(a){a=qb(a).samples;a.forEach(function(a){void 0===a.duration&&(a.duration=k);void 0===a.size&&(a.size=l);a.trackId=u;a.dts=h;void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0);"bigint"===typeof h?(a.pts=h+Wa.BigInt(a.compositionTimeOffset),h+=Wa.BigInt(a.duration)):(a.pts=h+a.compositionTimeOffset,h+=a.duration)});m=m.concat(a)});return m},Eb=function(a,d){var g=ea(a,["moof",
"traf"]),h={},k=[];ea(a,["mdat"]).forEach);k.forEach(function(a){var g=a.mdat,k=a.traf;a=ea(k,["tfhd"]);var l=rb(a[0]);a=l.trackId;var u=ea(k,["tfdt"]);u=0<u.length?pb(u[0]).baseMediaDecodeTime:0;k=ea(k,["trun"]);if(d===a&&0<k.length){k=Db(k,u,l);l=new DataView(g.buffer,g.byteOffset,g.byteLength);u=[];var m=[],v;for(v=0;v+4<g.length;v+=z){var z=l.getUint32(v);v+=4;if(!(0>=z))switch(g[v]&31){case 6:var B=g.subarray(v+1,v+1+z);a:{var q=v;for(var r=0;r<k.length;r++){var J=
k[r];if(q<J.size){q=J;break a}q-=J.size}q=null}B={nalUnitType:"sei_rbsp",size:z,data:B,escapedRBSP:Cb(B),trackId:a};if(q){B.pts=q.pts;B.dts=q.dts;var G=q}else if(G)B.pts=G.pts,B.dts=G.dts;else{u.push({level:"warn",message:"We've encountered a nal unit without data at "+v+" for trackId "+a+". See mux.js#223."});break}m.push(B)}}h[a]||(h[a]={seiNals:[],logs:[]});h[a].seiNals=h[a].seiNals.concat(m);h[a].logs=h[a].logs.concat(u)}});return h},Hb=function(){var a=!1,d,g,h,k,l,u;this.isInitialized=function(){return a};
this.init=function(g){d=new T;a=!0;u=g?g.isPartial:!1;d.on("data");d.on("log")};this.isNewInit=function(a,d){return a&&0===a.length||d&&"object"===typeof d&&0===Object.keys(d).length?!1:h!==a[0]||k!==d[h]};this.parse=function(a,d,u){if(this.isInitialized()){if(!d||!u)return null;if(this.isNewInit(d,u))h=d[0],k=u[h];else if(null===h||!k)return g.push(a),null}else return null;
for(;0<g.length;){var m=g.shift();this.parse(m,d,u)}u=h;d=k;null===u?a=null:(a=Eb(a,u)[u]||{},a={seiNals:a.seiNals,logs:a.logs,timescale:d});a&&a.logs&&(l.logs=l.logs.concat(a.logs));if(null===a||!a.seiNals)return l.logs.length?{logs:l.logs,captions:[],captionStreams:[]}:null;this.pushNals(a.seiNals);this.flushStream();return l};this.pushNals;this.flushStream;this.clearParsedCaptions;this.resetCaptionStream;this.clearAllCaptions;this.reset=function(){g=[];k=h=null;l?this.clearParsedCaptions():l={captions:[],captionStreams:{},logs:[]};this.resetCaptionStream()};this.reset()},cb;var xb=function(a){var d=
0===a[0]?12:20;return(a[d]<<24|a[d+1]<<16|a[d+2]<<8|a[d+3])>>>0};var yb={findBox:ea,parseType:La,timescale:function(a){return ea(a,["moov","trak"]).reduce(function(a,d){var g=ea(d,["tkhd"])[0];if(!g)return null;var h=g[0];h=0===h?12:20;g=(g[h]<<24|g[h+1]<<16|g[h+2]<<8|g[h+3])>>>0;d=ea(d,["mdia","mdhd"])[0];if(!d)return null;h=d[0];h=0===h?12:20;a[g]=(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])>>>0;return a},{})},startTime:function(a,d){d=ea(d,["moof","traf"]).reduce(function(d,g){var h=ea(g,["tfhd"])[0];
h=a[(h[4]<<24|h[5]<<16|h[6]<<8|h[7])>>>0]||9E4;g=ea(g,["tfdt"])[0];var k=new DataView(g.buffer,g.byteOffset,g.byteLength);g=1===g[0]?l(g.subarray(4,12)):k.getUint32(4);var u;"bigint"===typeof g?u=g/Wa.BigInt(h):"number"!==typeof g||isNaN(g)||(u=g/h);u<Number.MAX_SAFE_INTEGER&&(u=Number(u));u<d&&(d=u);return d},Infinity);return"bigint"===typeof d||isFinite(d)?d:0},compositionStartTime:function(a,d){var g=ea(d,["moof","traf"]),h=d=0;if(g&&g.length){var k=ea(g[0],["tfhd"])[0],l=ea(g[0],["trun"])[0];
g=ea(g[0],["tfdt"])[0];if(k)var u=rb(k).trackId;g&&(d=pb(g).baseMediaDecodeTime);l&&(k=qb(l),k.samples&&k.samples.length&&(h=k.samples[0].compositionTimeOffset||0))}a=a[u]||9E4;"bigint"===typeof d&&(h=Wa.BigInt(h),a=Wa.BigInt(a));a=(d+h)/a;"bigint"===typeof a&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a));return a},videoTrackIds:function(a){var d=[];ea(a,["moov","trak"]).forEach(function(a){var g=ea(a,["mdia","hdlr"]),h=ea(a,["tkhd"]);g.forEach(function(a,g){a=La(a.subarray(8,12));g=h[g];"vide"===a&&(g=
new DataView(g.buffer,g.byteOffset,g.byteLength),a=g.getUint8(0),g=0===a?g.getUint32(12):g.getUint32(20),d.push(g))})});return d},tracks:function(a){var d=[];ea(a,["moov","trak"]).forEach(function(a){var g={},h=ea(a,["tkhd"])[0];if(h){h=new DataView(h.buffer,h.byteOffset,h.byteLength);var k=h.getUint8(0);g.id=0===k?h.getUint32(12):h.getUint32(20)}if(h=ea(a,["mdia","hdlr"])[0])h=La(h.subarray(8,12)),g.type="vide"===h?"video":"soun"===h?"audio":h;if(h=ea(a,["mdia","minf","stbl","stsd"])[0])if(h=h.subarray(8),
g.codec=La(h.subarray(4,8)),h=ea(h,[g.codec])[0])/^[asm]vc[1-9]$/i.test(g.codec)?(h=h.subarray(78),k=La(h.subarray(4,8)),"avcC"===k&&11<h.length?(g.codec+=".",g.codec+=cb(h[9]),g.codec+=cb(h[10]),g.codec+=cb(h[11])):g.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(g.codec)?(h=h.subarray(28),k=La(h.subarray(4,8)),"esds"===k&&20<h.length&&0!==h[19]?(g.codec+="."+cb(h[19]),g.codec+="."+cb(h[20]>>>2&63).replace(/^0/,"")):g.codec="mp4a.40.2"):g.codec=g.codec.toLowerCase();if(a=ea(a,["mdia","mdhd"])[0])g.timescale=
xb(a);d.push(g)});return d},getTimescaleFromMediaHeader:xb},zb=function(a){var d=a[1]&31;return d=d<<8|a[2]},kb,lb=function(a){var d=0;1<(a[3]&48)>>>4&&(d+=a[4]+1);return d},tb;var ra={parseType,parsePat:function(a){var d=kb(a),g=4+lb(a);d&&(g+=a[g]+1);return(a[g+10]&31)<<8|a[g+11]},parsePmt:function(a){var d={},g=kb(a),h=4+lb(a);g&&(h+=a[h]+1);if(a[h+5]&1){g=3+((a[h+1]&15)<<8|a[h+2])-4;for(var k=12+((a[h+10]&15)<<8|a[h+11]);k<g;){var l=h+k;d[(a[l+1]&31)<<8|a[l+2]]=a[l];k+=((a[l+3]&15)<<8|a[l+4])+5}return d}},parsePayloadUnitStartIndicator:kb,parsePesType:function(a,d){a=zb(a);switch(d[a]){case Ja.H264_STREAM_TYPE:return"video";case Ja.ADTS_STREAM_TYPE:return"audio";
case Ja.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(a){if(!kb(a))return null;var d=4+lb(a);if(d>=a.byteLength)return null;var g=null;var h=a[d+7];h&192&&(g={},g.pts=(a[d+9]&14)<<27|(a[d+10]&255)<<20|(a[d+11]&254)<<12|(a[d+12]&255)<<5|(a[d+13]&254)>>>3,g.pts*=4,g.pts+=(a[d+13]&6)>>>1,g.dts=g.pts,h&64&&(g.dts=(a[d+14]&14)<<27|(a[d+15]&255)<<20|(a[d+16]&254)<<12|(a[d+17]&255)<<5|(a[d+18]&254)>>>3,g.dts*=4,g.dts+=(a[d+18]&6)>>>1));return g},videoPacketContainsKeyFrame:function(a){var d=
4+lb(a);a=a.subarray(d);for(var g=d=0,h=!1;g<a.byteLength-3;g++)if(1===a[g+2]){d=g+5;break}for(;d<a.byteLength;)switch(a[d]){case 0:if(0!==a[d-1]){d+=2;break}else if(0!==a[d-2]){d++;break}g+3!==d-2&&(g=tb(a[g+3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(h=!0));do d++;while(1!==a[d]&&d<a.length);g=d-2;d+=3;break;case 1:if(0!==a[d-1]||0!==a[d-2]){d+=3;break}g=tb(a[g+3]&31);"slice_layer_without_partitioning_rbsp_idr"===g&&(h=!0);g=d-2;d+=3;break;default:d+=3}(a=a.subarray(g))&&3<a.byteLength&&
(g=tb(a[3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(h=!0));return h}};var Mb=V.ONE_SECOND_IN_TS,Ib=function(a,d){for(var g=0,h=188,k,l;h<a.byteLength;)if(71===a[g]&&71===a[h]){k=a.subarray(g,h);l=ra.parseType(k,d.pid);switch(l){case "pat":d.pid=ra.parsePat(k);break;case "pmt":var u=ra.parsePmt(k);d.table=d.table||{};Object.keys(u).forEach)}g+=188;h+=188}else g++,h++},Ab=function(a,d,g){for(var h=0,k=188,l,u,m,v=!1;k<=a.byteLength;)if(71!==a[h]||71!==a[k]&&
k!==a.byteLength)h++,k++;else{l=a.subarray(h,k);u=ra.parseType(l,d.pid);switch(u){case "pes":if(u=ra.parsePesType(l,d.table),m=ra.parsePayloadUnitStartIndicator(l),"audio"===u&&m&&(l=ra.parsePesTime(l)))l.type="audio",g.audio.push(l),v=!0}if(v)break;h+=188;k+=188}k=a.byteLength;h=k-188;for(v=!1;0<=h;)if(71!==a[h]||71!==a[k]&&k!==a.byteLength)h--,k--;else{l=a.subarray(h,k);u=ra.parseType(l,d.pid);switch(u){case "pes":if(u=ra.parsePesType(l,d.table),m=ra.parsePayloadUnitStartIndicator(l),"audio"===
u&&m&&(l=ra.parsePesTime(l)))l.type="audio",g.audio.push(l),v=!0}if(v)break;h-=188;k-=188}},Jb=function(a,d){if(a.audio&&a.audio.length){var g=d;if("undefined"===typeof g||isNaN(g))g=a.audio[0].dts;a.audio.forEach(function(a){a.dts=ha(a.dts,g);a.pts=ha(a.pts,g);a.dtsTime=a.dts/Mb;a.ptsTime=a.pts/Mb})}if(a.video&&a.video.length){var h=d;if("undefined"===typeof h||isNaN(h))h=a.video[0].dts;a.video.forEach);a.firstKeyFrame&&
(a=a.firstKeyFrame,a.dts=ha(a.dts,h),a.pts=ha(a.pts,h),a.dtsTime=a.dts/Mb,a.ptsTime=a.pts/Mb)}},Kb={inspect:function(a,d){if(wa.isLikelyAacData(a))a:{for(var g=!1,h=0,k=null,l=null,u,m=0,v;3<=a.length-m;){switch(wa.parseType(a,m)){case "timed-metadata":if(10>a.length-m){g=!0;break}u=wa.parseId3TagSize(a,m);if(u>a.length){g=!0;break}null===l&&(v=a.subarray(m,m+u),l=wa.parseAacTimestamp(v));m+=u;break;case "audio":if(7>a.length-m){g=!0;break}u=wa.parseAdtsSize(a,m);if(u>a.length){g=!0;break}null===
k&&(v=a.subarray(m,m+u),k=wa.parseSampleRate(v));h++;m+=u;break;default:m++}if(g){a=null;break a}}null===k||null===l?a=null:(a=Mb/k,a={audio:[{type:"audio",dts:l,pts:l},{type:"audio",dts:l+1024*h*a,pts:l+1024*h*a}]})}else{h={pid:null,table:null};l={};Ib(a,h);for(g in h.table)if(h.table.hasOwnProperty(g))switch(h.table[g]){case Ja.H264_STREAM_TYPE:l.video=[];var z;u=a;m=h;v=l;var B=0,q=188,r=!1,J=[];for(z=0;q<u.byteLength;)if(71===u[B]&&71===u[q]){k=u.subarray(B,q);var G=ra.parseType(k,m.pid);switch(G){case "pes":var w=
ra.parsePesType(k,m.table);G=ra.parsePayloadUnitStartIndicator(k);if("video"===w&&(G&&!r&&(w=ra.parsePesTime(k))&&(w.type="video",v.video.push(w),r=!0),!v.firstKeyFrame)){if(G&&0!==z){w=new Uint8Array(z);for(G=0;J.length;)z=J.shift(),w.set(z,G),G+=z.byteLength;ra.videoPacketContainsKeyFrame(w)&&((z=ra.parsePesTime(w))?(v.firstKeyFrame=z,v.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));
z=0}J.push(k);z+=k.byteLength}}if(r&&v.firstKeyFrame)break;B+=188;q+=188}else B++,q++;q=u.byteLength;B=q-188;for(r=!1;0<=B;)if(71===u[B]&&71===u[q]){k=u.subarray(B,q);G=ra.parseType(k,m.pid);switch(G){case "pes":if(w=ra.parsePesType(k,m.table),G=ra.parsePayloadUnitStartIndicator(k),"video"===w&&G&&(w=ra.parsePesTime(k)))w.type="video",v.video.push(w),r=!0}if(r)break;B-=188;q-=188}else B--,q--;0===l.video.length&&delete l.video;break;case Ja.ADTS_STREAM_TYPE:l.audio=[],Ab(a,h,l),0===l.audio.length&&
delete l.audio}a=l}if(!a||!a.audio&&!a.video)return null;Jb(a,d);return a},parseAudioPes_:Ab},Lb=function(a,d){d.on("data",function(d){var g=d.initSegment;d.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};g=d.data;d.data=g.buffer;a.postMessage({action:"data",segment:d,byteOffset:g.byteOffset,byteLength:g.byteLength},[d.data])});d.on("done");d.on("gopInfo",function(d){a.postMessage({action:"gopInfo",gopInfo:d})});d.on("videoSegmentTimingInfo",
function(d){var g={start:{decode:V.videoTsToSeconds(d.start.dts),presentation:V.videoTsToSeconds(d.start.pts)},end:{decode:V.videoTsToSeconds(d.end.dts),presentation:V.videoTsToSeconds(d.end.pts)},baseMediaDecodeTime:V.videoTsToSeconds(d.baseMediaDecodeTime)};d.prependedContentDuration&&(g.prependedContentDuration=V.videoTsToSeconds(d.prependedContentDuration));a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})});d.on("audioSegmentTimingInfo");d.on("id3Frame",function(d){a.postMessage({action:"id3Frame",id3Frame:d})});d.on("caption",function(d){a.postMessage({action:"caption",
caption:d})});d.on("trackinfo",function(d){a.postMessage({action:"trackinfo",trackInfo:d})});d.on("audioTimingInfo",function(d){a.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:V.videoTsToSeconds(d.start),end:V.videoTsToSeconds(d.end)}})});d.on("videoTimingInfo");d.on("log")},Bb=function()var d=a.prototype;d.init=function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new fb(this.options);Lb(this.self,this.transmuxer)};d.pushMp4Captions=function(a){this.captionParser||(this.captionParser=new Hb,this.captionParser.init());var d=new Uint8Array(a.data,a.byteOffset,a.byteLength);a=this.captionParser.parse(d,a.trackIds,a.timescales);this.self.postMessage({action:"mp4Captions",captions:a&&a.captions||[],logs:a&&a.logs||[],data:d.buffer},
[d.buffer])};d.probeMp4StartTime=function(a){var d=a.data;a=yb.startTime(a.timescales,d);this.self.postMessage({action:"probeMp4StartTime",startTime:a,data:d},[d.buffer])};d.probeMp4Tracks=function(a){a=a.data;var d=yb.tracks(a);this.self.postMessage({action:"probeMp4Tracks",tracks:d,data:a},[a.buffer])};d.probeTs=function(a){var d=a.data;a=a.baseStartTime;a="number"!==typeof a||isNaN(a)?void 0:a*V.ONE_SECOND_IN_TS;a=Kb.inspect(d,a);var g=null;a&&(g={hasVideo:a.video&&2===a.video.length||!1,hasAudio:a.audio&&
2===a.audio.length||!1},g.hasVideo&&(g.videoStart=a.video[0].ptsTime),g.hasAudio&&(g.audioStart=a.audio[0].ptsTime));this.self.postMessage({action:"probeTs",result:g,data:d},[d.buffer])};d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()};d.clearParsedMp4Captions;d.push;d.reset=function(){this.transmuxer.reset()};
d.setTimestampOffset=function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(V.secondsToVideoTs(a.timestampOffset||0)))};d.setAudioAppendStart;d.setRemux;d.flush;d.endTimeline;
d.alignGopsWith;return a}();self.onmessage=function(a){if("init"===a.data.action&&a.data.options)this.messageHandlers=new Bb(self,a.data.options);else if(this.messageHandlers||(this.messageHandlers=new Bb(self)),a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action])this.messageHandlers[a.data.action](a.data)}})),Nm=Qi(Mm),Vi=function(a){var k=a.transmuxer,l=a.bytes,d=a.audioAppendStart,h=a.gopsToAlignWith,
g=a.remux,u=a.onData,m=a.onTrackInfo,v=a.onAudioTimingInfo,B=a.onVideoTimingInfo,q=a.onVideoSegmentTimingInfo,r=a.onAudioSegmentTimingInfo,w=a.onId3,x=a.onCaptions,G=a.onDone,H=a.onEndedTimeline,C=a.onTransmuxerLog,A=a.isEndOfTimeline,L={buffer:[]},N=A;k.onmessage=function(d){if(k.currentTransmux===a){if("data"===d.data.action){var g=d.data.segment,h=g.type,l=g.initSegment,z=g.videoFrameDtsTime,J=g.videoFramePtsTime;L.buffer.push({captions:g.captions,captionStreams:g.captionStreams,metadata:g.metadata});
g=d.data.segment.boxes||{data:d.data.segment.data};h={type:h,data:new Uint8Array(g.data,g.data.byteOffset,g.data.byteLength),initSegment:new Uint8Array(l.data,l.byteOffset,l.byteLength)};"undefined"!==typeof z&&(h.videoFrameDtsTime=z);"undefined"!==typeof J&&(h.videoFramePtsTime=J);u(h)}"trackinfo"===d.data.action&&m(d.data.trackInfo);"gopInfo"===d.data.action&&(L.gopInfo=d.data.gopInfo);"audioTimingInfo"===d.data.action&&v(d.data.audioTimingInfo);"videoTimingInfo"===d.data.action&&B(d.data.videoTimingInfo);
"videoSegmentTimingInfo"===d.data.action&&q(d.data.videoSegmentTimingInfo);"audioSegmentTimingInfo"===d.data.action&&r(d.data.audioSegmentTimingInfo);"id3Frame"===d.data.action&&w([d.data.id3Frame],d.data.id3Frame.dispatchType);"caption"===d.data.action&&x(d.data.caption);"endedtimeline"===d.data.action&&(N=!1,H());"log"===d.data.action&&C(d.data.log);"transmuxed"!==d.data.type||N||(k.onmessage=null,L.buffer=[],G(L),Ui(k))}};d&&k.postMessage({action:"setAudioAppendStart",appendStart:d});Array.isArray(h)&&
k.postMessage({action:"alignGopsWith",gopsToAlignWith:h});"undefined"!==typeof g&&k.postMessage({action:"setRemux",remux:g});l.byteLength&&(d=l instanceof ArrayBuffer?l:l.buffer,k.postMessage({action:"push",data:d,byteOffset:l instanceof ArrayBuffer?0:l.byteOffset,byteLength:l.byteLength},[d]));A&&k.postMessage({action:"endTimeline"});k.postMessage({action:"flush"})},Ui=function(a){a.currentTransmux=null;a.transmuxQueue.length&&(a.currentTransmux=a.transmuxQueue.shift(),"function"===typeof a.currentTransmux?
a.currentTransmux():Vi(a.currentTransmux))},Wi,Xi=function(a,k){k.currentTransmux?k.transmuxQueue.push(Wi.bind(null,k,a)):(k.currentTransmux=a,Wi(k,a))},Yi=function(a){a.transmuxer.currentTransmux?a.transmuxer.transmuxQueue.push(a):(a.transmuxer.currentTransmux=a,Vi(a))},sf={reset:function(a){Xi("reset",a)},endTimeline,transmux:Yi,createTransmuxer},vd=function(a){var k=a.transmuxer,l=a.endAction||a.action,d=a.callback,h=Qa({},a,{endAction:null,transmuxer:null,callback:null});k.addEventListener("message");if(a.data){var g=a.data instanceof ArrayBuffer;h.byteOffset=g?0:a.data.byteOffset;h.byteLength=a.data.byteLength;k.postMessage(h,[g?a.data:a.data.buffer])}else k.postMessage(h)},tf,Om=function(a){var k=a.target;k=Date.now()-k.requestTime;k={bandwidth:Infinity,bytesReceived:0,roundTripTime:k||0};k.bytesReceived=a.loaded;k.bandwidth=Math.floor(k.bytesReceived/k.roundTripTime*8E3);return k},uf=function(a,k){return k.timedout?{status:k.status,
message:"HLS request timed-out at URL: "+k.uri,code:-101,xhr:k}:k.aborted?{status:k.status,message:"HLS request aborted at URL: "+k.uri,code:-102,xhr:k}:a?{status:k.status,message:"HLS request errored at URL: "+k.uri,code:2,xhr:k}:"arraybuffer"===k.responseType&&0===k.response.byteLength?{status:k.status,message:"Empty HLS response at URL: "+k.uri,code:2,xhr:k}:null},Zi=function(a,k,l){return function(d,h){var g=h.response;if(d=uf(d,h))return l(d,a);if(16!==g.byteLength)return l({status:h.status,
message:"Invalid HLS key at URL: "+h.uri,code:2,xhr:h},a);h=new DataView(g);h=new Uint32Array([h.getUint32(0),h.getUint32(4),h.getUint32(8),h.getUint32(12)]);for(g=0;g<k.length;g++)k[g].bytes=h;return l(null,a)}},$i=function(a,k){var l=df(a.map.bytes);if("mp4"!==l)return k({internal:!0,message:"Found unsupported "+(l||"unknown")+" container for initialization segment at URL: "+(a.map.resolvedUri||a.map.uri),code:2});vd({action:"probeMp4Tracks",data:a.map.bytes,transmuxer:a.transmuxer,callback:function(d){var h=
d.tracks;a.map.bytes=d.data;h.forEach(function(d){a.map.tracks=a.map.tracks||{};a.map.tracks[d.type]||(a.map.tracks[d.type]=d,"number"===typeof d.id&&d.timescale&&(a.map.timescales=a.map.timescales||{},a.map.timescales[d.id]=d.timescale))});return k(null)}})},Pm=function(a){var k=a.segment,l=a.finishProcessingFn;return function(a,h){if(a=uf(a,h))return l(a,k);a=new Uint8Array(h.response);if(k.map.key)return k.map.encryptedBytes=a,l(null,k);k.map.bytes=a;$i(k)}},Qm=function(a){var k=a.segment,l=a.finishProcessingFn,d=a.responseType;return function(a,g){if(a=uf(a,g))return l(a,k);if("arraybuffer"!==d&&g.responseText){a=g.responseText.substring(k.lastReachedChar||0);for(var h=new Uint8Array(new ArrayBuffer(a.length)),m=0;m<a.length;m++)h[m]=a.charCodeAt(m);a=h.buffer}else a=g.response;k.stats={bandwidth:g.bandwidth,bytesReceived:g.bytesReceived||0,roundTripTime:g.roundTripTime||0};k.key?k.encryptedBytes=new Uint8Array(a):k.bytes=
new Uint8Array(a);return l(null,k)}},Rm=function(a){var k=a.segment,l=a.bytes,d=a.trackInfoFn,h=a.timingInfoFn,g=a.videoSegmentTimingInfoFn,u=a.audioSegmentTimingInfoFn,m=a.id3Fn,v=a.captionsFn,B=a.isEndOfTimeline,q=a.endedTimelineFn,r=a.dataFn,w=a.doneFn,x=a.onTransmuxerLog;a=k.map&&k.map.tracks||{};var G=!(!a.audio||!a.video),H=h.bind(null,k,"audio","start"),C=h.bind(null,k,"audio","end"),A=h.bind(null,k,"video","start"),L=h.bind(null,k,"video","end"),N=function(){return Yi({bytes:l,transmuxer:k.transmuxer,
audioAppendStart:k.audioAppendStart,gopsToAlignWith:k.gopsToAlignWith,remux:G,onData,onTrackInfo,onAudioTimingInfo:function(a){H&&"undefined"!==typeof a.start&&(H(a.start),H=null);C&&"undefined"!==typeof a.end&&C(a.end)},onVideoTimingInfo:function(a){A&&"undefined"!==typeof a.start&&(A(a.start),A=null);L&&"undefined"!==typeof a.end&&L(a.end)},onVideoSegmentTimingInfo:function(a){g(a)},onAudioSegmentTimingInfo,
onId3,onCaptions,isEndOfTimeline:B,onEndedTimeline,onTransmuxerLog:x,onDone})};vd({action:"probeTs",transmuxer:k.transmuxer,data:l,baseStartTime:k.baseStartTime,callback:function(a){k.bytes=l=a.data;if(a=a.result)d(k,{hasAudio:a.hasAudio,hasVideo:a.hasVideo,isMuxed:G}),d=null,a.hasAudio&&!G&&H(a.audioStart),a.hasVideo&&A(a.videoStart),A=H=null;N()}})},aj=function(a){var k=
a.segment,l=a.bytes,d=a.trackInfoFn,h=a.timingInfoFn,g=a.videoSegmentTimingInfoFn,u=a.audioSegmentTimingInfoFn,m=a.id3Fn,v=a.captionsFn,B=a.isEndOfTimeline,q=a.endedTimelineFn,r=a.dataFn,x=a.doneFn,C=a.onTransmuxerLog,G=new Uint8Array(l);if(0<em(G,["moof"]).length){k.isFmp4=!0;var H=k.map.tracks,A={isFmp4:!0,hasVideo:!!H.video,hasAudio:!!H.audio};H.audio&&H.audio.codec&&"enca"!==H.audio.codec&&(A.audioCodec=H.audio.codec);H.video&&H.video.codec&&"encv"!==H.video.codec&&(A.videoCodec=H.video.codec);
H.video&&H.audio&&(A.isMuxed=!0);d(k,A);var L;vd({action:"probeMp4StartTime",timescales:k.map.timescales,data:G,transmuxer:k.transmuxer,callback:function(a){var d=a.data;a=a.startTime;l=d.buffer;k.bytes=G=d;A.hasAudio&&!A.isMuxed&&h(k,"audio","start",a);A.hasVideo&&h(k,"video","start",a);H.video&&d.byteLength&&k.transmuxer?vd({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:k.transmuxer,
data:G,timescales:k.map.timescales,trackIds:[H.video.id],callback}):L()}})}else k.transmuxer?("undefined"===typeof k.container&&(k.container=df(G)),"ts"!==k.container&&"aac"!==k.container?(d(k,{hasAudio:!1,hasVideo:!1}),x(null,k,{})):Rm({segment:k,bytes:l,trackInfoFn:d,timingInfoFn:h,videoSegmentTimingInfoFn:g,audioSegmentTimingInfoFn:u,id3Fn:m,captionsFn:v,isEndOfTimeline:B,
endedTimelineFn:q,dataFn:r,doneFn:x,onTransmuxerLog:C})):x(null,k,{})},bj=function(a,k){var l=a.id,d=a.key,h=a.encryptedBytes,g=a.decryptionWorker;g.addEventListener("message");a=d.bytes.slice?d.bytes.slice():new Uint32Array(Array.prototype.slice.call(d.bytes));g.postMessage(Ji({source:l,encrypted:h,key:a,iv:d.iv}),[h.buffer,a.buffer])},Sm=function(a){var k=
a.segment,l=a.trackInfoFn,d=a.timingInfoFn,h=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,u=a.id3Fn,m=a.captionsFn,v=a.isEndOfTimeline,B=a.endedTimelineFn,q=a.dataFn,r=a.doneFn,w=a.onTransmuxerLog;bj({id:k.requestId,key:k.key,encryptedBytes:k.encryptedBytes,decryptionWorker:a.decryptionWorker})},Tm=function(a){var k=a.activeXhrs,l=a.decryptionWorker,d=a.trackInfoFn,h=a.timingInfoFn,g=a.videoSegmentTimingInfoFn,u=a.audioSegmentTimingInfoFn,m=a.id3Fn,v=a.captionsFn,B=a.isEndOfTimeline,q=a.endedTimelineFn,r=a.dataFn,w=a.doneFn,x=a.onTransmuxerLog,G=0,H=!1;return function(a,z){if(!H){if(a)return H=!0,tf(k),w(a,z);G+=1;if(G===k.length){var J;z.endOfAllRequests=Date.now();if(z.map&&z.map.encryptedBytes&&!z.map.bytes)return bj({decryptionWorker:l,id:z.requestId+"-init",encryptedBytes:z.map.encryptedBytes,key:z.map.key},
function(a){z.map.bytes=a;$i(z)});J()}}}},Um,Vm=function(a){var k=a.segment,l=a.progressFn;a.trackInfoFn;a.timingInfoFn;a.videoSegmentTimingInfoFn;a.audioSegmentTimingInfoFn;a.id3Fn;a.captionsFn;a.isEndOfTimeline;a.endedTimelineFn;a.dataFn;return},Wm=function(a){var k=a.xhr,l=a.xhrOptions,d=a.segment,h=a.abortFn,g=a.progressFn,u=a.trackInfoFn,m=a.timingInfoFn,v=a.videoSegmentTimingInfoFn,B=a.audioSegmentTimingInfoFn,q=a.id3Fn,r=a.captionsFn,x=a.isEndOfTimeline,C=a.endedTimelineFn,G=a.dataFn,H=[];a=Tm({activeXhrs:H,decryptionWorker:a.decryptionWorker,trackInfoFn:u,timingInfoFn:m,videoSegmentTimingInfoFn:v,audioSegmentTimingInfoFn:B,id3Fn:q,captionsFn:r,isEndOfTimeline:x,
endedTimelineFn:C,dataFn:G,doneFn:a.doneFn,onTransmuxerLog:a.onTransmuxerLog});if(d.key&&!d.key.bytes){var A=[d.key];d.map&&!d.map.bytes&&d.map.key&&d.map.key.resolvedUri===d.key.resolvedUri&&A.push(d.map.key);var L=w.mergeOptions(l,{uri:d.key.resolvedUri,responseType:"arraybuffer"});A=Zi(d,A,a);L=k(L,A);H.push(L)}d.map&&!d.map.bytes&&(!d.map.key||d.key&&d.key.resolvedUri===d.map.key.resolvedUri||(L=w.mergeOptions(l,{uri:d.map.key.resolvedUri,responseType:"arraybuffer"}),A=Zi(d,[d.map.key],a),L=k(L,
A),H.push(L)),L=w.mergeOptions(l,{uri:d.map.resolvedUri,responseType:"arraybuffer",headers:of(d.map)}),A=Pm({segment:d,finishProcessingFn:a}),L=k(L,A),H.push(L));l=w.mergeOptions(l,{uri:d.part&&d.part.resolvedUri||d.resolvedUri,responseType:"arraybuffer",headers:of(d)});a=Qm({segment:d,finishProcessingFn:a,responseType:l.responseType});k=k(l,a);k.addEventListener("progress",Vm({segment:d,progressFn:g,trackInfoFn:u,timingInfoFn:m,videoSegmentTimingInfoFn:v,audioSegmentTimingInfoFn:B,id3Fn:q,captionsFn:r,
isEndOfTimeline:x,endedTimelineFn:C,dataFn:G}));H.push(k);var N={};H.forEach);return},Xm=Za("CodecUtils"),cj,wd=function(a){var k={};a.forEach(function(a){var d=a.mediaType,h=a.type;a=a.details;k[d]=k[d]||[];k[d].push(Mh(""+h+a))});Object.keys(k).forEach);return k},dj,Cc=function(a,k){var l=k.attributes||{};var d=k.attributes||{};d=d.CODECS?jb(d.CODECS):void 0;d=wd(d||[]);if(cj(a,k)&&!d.audio){a:if(cj(a,k)){k=a.mediaGroups.AUDIO[(k.attributes||{}).AUDIO];for(h in k)if(!k[h].uri&&!k[h].playlists){var h=!0;break a}h=!1}else h=
!0;h||(a=wd(jl(a,l.AUDIO)||[]),a.audio&&(d.audio=a.audio))}return d},xd=Za("PlaylistSelector"),ej,yd=function(a,k){return a?(a=window.getComputedStyle(a))?a[k]:"":""},Zb,vf=function(a,k){if(a.attributes.BANDWIDTH)var l=
a.attributes.BANDWIDTH;l=l||window.Number.MAX_VALUE;if(k.attributes.BANDWIDTH)var d=k.attributes.BANDWIDTH;d=d||window.Number.MAX_VALUE;return l-d},fj=function(a,k,l,d,h,g){if(a){var u={bandwidth:k,width:l,height:d,limitRenditionByPlayerDimensions:h},m=a.playlists;Aa.isAudioOnly(a)&&(m=g.getAudioTrackPlaylists_(),u.audioOnly=!0);var v=m.map(function(a){var d=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width,g=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;
var h=(h=a.attributes&&a.attributes.BANDWIDTH)||window.Number.MAX_VALUE;return{bandwidth:h,width:d,height:g,playlist:a}});Zb(v,function(a,d){return a.bandwidth-d.bandwidth});v=v.filter(function(a){return!Aa.isIncompatible(a.playlist)});a=v.filter(function(a){return Aa.isEnabled(a.playlist)});a.length||(a=v.filter));var B=a.filter),q=B[B.length-1];m=B.filter(function(a){return a.bandwidth===q.bandwidth})[0];
if(!1===h){var r=m||a[0]||v[0];if(r&&r.playlist){var w="sortedPlaylistReps";m&&(w="bandwidthBestRep");a[0]&&(w="enabledPlaylistReps");xd("choosing "+ej(r)+" using "+w+" with options",u);return r.playlist}xd("could not choose a playlist with options",u);return null}B=B.filter);Zb(B,function(a,d){return a.width-d.width});h=B.filter);q=h[h.length-1];h=h.filter(function(a){return a.bandwidth===q.bandwidth})[0];if(!h){var x=
B.filter);r=x.filter);q=r[r.length-1];r=r.filter(function(a){return a.bandwidth===q.bandwidth})[0]}g.experimentalLeastPixelDiffSelector&&(w=B.map),Zb(w),w=w[0]);if((g=w||r||h||m||a[0]||v[0])&&g.playlist)return v="sortedPlaylistReps",
w?v="leastPixelDiffRep":r?v="resolutionPlusOneRep":h?v="resolutionBestRep":m?v="bandwidthBestRep":a[0]&&(v="enabledPlaylistReps"),xd("choosing "+ej(g)+" using "+v+" with options",u),g.playlist;xd("could not choose a playlist with options",u);return null}},gj=function(){var a=this.useDevicePixelRatio?window.devicePixelRatio||1:1;return fj(this.playlists.master,this.systemBandwidth,parseInt(yd(this.tech_.el(),"width"),10)*a,parseInt(yd(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,
this.masterPlaylistController_)},Ym=function(a){var k=a.currentTime,l=a.bandwidth,d=a.duration,h=a.segmentDuration,g=a.timeUntilRebuffer,u=a.currentTimeline,m=a.syncController;a=a.master.playlists.filter(function(a){return!Aa.isIncompatible(a)});var v=a.filter(Aa.isEnabled);v.length||(v=a.filter));a=v.filter(Aa.hasAttribute.bind(null,"BANDWIDTH")).map(function(a){var v=m.getSyncPoint(a,d,u,k)?1:2;v=Aa.estimateSegmentRequestTime(h,l,a)*v-g;return{playlist:a,rebufferingImpact:v}});
v=a.filter);Zb(v);if(v.length)return v[0];Zb(a);return a[0]||null},Zm=function(a){var k=0;if(a.bytes){var l=new Uint8Array(a.bytes);a.segments.forEach)}return l},$m=function(a){var k=a.inbandTextTracks,l=a.captionArray,d=a.timestampOffset;if(l){var h=window.WebKitDataCue||window.VTTCue;l.forEach)}},an,bn=function(a){var k=a.metadataArray,l=a.timestampOffset,d=a.videoDuration;
if(k){var h=window.WebKitDataCue||window.VTTCue,g=a.inbandTextTracks.metadataTrack_;if(g&&(k.forEach(function(a){var d=a.cueTime+l;!("number"!==typeof d||window.isNaN(d)||0>d)&&Infinity>d&&a.frames.forEach)}),g.cues&&g.cues.length)){a=g.cues;k=[];for(var u=0;u<a.length;u++)a[u]&&k.push(a[u]);var m=k.reduce,{}),v=Object.keys(m).sort);v.forEach(function(a,g){var h=Number(v[g+1])||d;m[a].forEach(function(a){a.endTime=h})})}}},Dc=function(a,k,l){var d;if(l&&l.cues)for(d=l.cues.length;d--;){var h=l.cues[d];h.startTime>=a&&h.endTime<=k&&l.removeCue(h)}},cn=function(a){var k=a.cues;if(k)for(var l=0;l<k.length;l++){for(var d=[],h=0,g=0;g<k.length;g++)k[l].startTime===k[g].startTime&&k[l].endTime===k[g].endTime&&k[l].text===k[g].text&&(h++,1<h&&d.push(k[g]));d.length&&d.forEach(function(d){return a.removeCue(d)})}},
dn=function(a,k,l,d){k=Math.ceil(9E4*(k-d));var h=Math.ceil(9E4*(l-d));l=a.slice();for(d=a.length;d--&&!(a[d].pts<=h););if(-1===d)return l;for(h=d+1;h--&&!(a[h].pts<=k););h=Math.max(h,0);l.splice(h,d-h+1);return l},en,zd=1/60,$b=function(a){var k=a.startOfSegment,l=a.duration,
d=a.segment,h=a.part,g=a.playlist,u=g.mediaSequence,m=g.id,v=g.segments;g=a.mediaIndex;var B=a.partIndex,q=a.timeline;v=(void 0===v?[]:v).length-1;var r="mediaIndex/partIndex increment";a.getMediaInfoForTime?r="getMediaInfoForTime ("+a.getMediaInfoForTime+")":a.isSyncRequest&&(r="getSyncSegmentCandidate (isSyncRequest)");a.independent&&(r+=" with independent "+a.independent);var w="number"===typeof B;a=a.segment.uri?"segment":"pre-segment";var x=w?ui({preloadSegment:d})-1:0;return a+" ["+(u+g)+"/"+
(u+v)+"]"+(w?" part ["+B+"/"+x+"]":"")+(" segment start/end ["+d.start+" \x3d\x3e "+d.end+"]")+(w?" part start/end ["+h.start+" \x3d\x3e "+h.end+"]":"")+(" startOfSegment ["+k+"]")+(" duration ["+l+"]")+(" timeline ["+q+"]")+(" selected by ["+r+"]")+(" playlist ["+m+"]")},hj=function(a){var k=a.timelineChangeController,l=a.segmentTimeline,d=a.loaderType,h=a.audioDisabled;return a.currentTimeline===l?!1:"audio"===d?(a=k.lastTimelineChange({type:"main"}),!a||a.to!==l):"main"===d&&h?(a=k.pendingTimelineChange({type:"audio"}))&&
a.to===l?!1:!0:!1},fn=function(a){var k=0;["video","audio"].forEach(function(l){var d=a[l+"TimingInfo"];if(d){l=d.start;d=d.end;var h;"bigint"===typeof l||"bigint"===typeof d?h=window.BigInt(d)-window.BigInt(l):"number"===typeof l&&"number"===typeof d&&(h=d-l);"undefined"!==typeof h&&h>k&&(k=h)}});"bigint"===typeof k&&k<Number.MAX_SAFE_INTEGER&&(k=Number(k));return k},ij=function(a){var k=a.segmentDuration;return k?Math.round(k)>a.maxDuration+pb:!1},wf=function(a){function k(d,h){var g=a.call(this)||
this;if(!d)throw new TypeError("Initialization settings are required");if("function"!==typeof d.currentTime)throw new TypeError("No currentTime getter specified");if(!d.mediaSource)throw new TypeError("No MediaSource specified");g.bandwidth=d.bandwidth;g.throughput={rate:0,count:0};g.roundTrip=NaN;g.resetStats_();g.mediaIndex=null;g.partIndex=null;g.hasPlayed_=d.hasPlayed;g.currentTime_=d.currentTime;g.seekable_=d.seekable;g.seeking_=d.seeking;g.duration_=d.duration;g.mediaSource_=d.mediaSource;g.vhs_=
d.vhs;g.loaderType_=d.loaderType;g.currentMediaInfo_=void 0;g.startingMediaInfo_=void 0;g.segmentMetadataTrack_=d.segmentMetadataTrack;g.goalBufferLength_=d.goalBufferLength;g.sourceType_=d.sourceType;g.sourceUpdater_=d.sourceUpdater;g.inbandTextTracks_=d.inbandTextTracks;g.state_="INIT";g.timelineChangeController_=d.timelineChangeController;g.shouldSaveSegmentTimingInfo_=!0;g.parse708captions_=d.parse708captions;g.useDtsForTimestampOffset_=d.useDtsForTimestampOffset;g.captionServices_=d.captionServices;
g.experimentalExactManifestTimings=d.experimentalExactManifestTimings;g.checkBufferTimeout_=null;g.error_=void 0;g.currentTimeline_=-1;g.pendingSegment_=null;g.xhrOptions_=null;g.pendingSegments_=[];g.audioDisabled_=!1;g.isPendingTimestampOffset_=!1;g.gopBuffer_=[];g.timeMapping_=0;g.safeAppend_=11<=w.browser.IE_VERSION;g.appendInitSegment_={audio:!0,video:!0};g.playlistOfLastInitSegment_={audio:null,video:null};g.callQueue_=[];g.loadQueue_=[];g.metadataQueue_={id3:[],caption:[]};g.waitingOnRemove_=
!1;g.quotaExceededErrorRetryTimeout_=null;g.activeInitSegmentId_=null;g.initSegments_={};g.cacheEncryptionKeys_=d.cacheEncryptionKeys;g.keyCache_={};g.decrypter_=d.decrypter;g.syncController_=d.syncController;g.syncPoint_={segmentIndex:0,time:0};g.transmuxer_=g.createTransmuxer_();g.triggerSyncInfoUpdate_;g.syncController_.on("syncinfoupdate",g.triggerSyncInfoUpdate_);g.mediaSource_.addEventListener("sourceopen");g.fetchAtBuffer_=!1;g.logger_=Za("SegmentLoader["+g.loaderType_+"]");Object.defineProperty(O(g),"state",{get:function(){return this.state_},set});g.sourceUpdater_.on("ready",function(){g.hasEnoughInfoToAppend_()&&g.processCallQueue_()});if("main"===g.loaderType_)g.timelineChangeController_.on("pendingtimelinechange");if("audio"===
g.loaderType_)g.timelineChangeController_.on("timelinechange");return g}F(k,a);var l=k.prototype;l.createTransmuxer_;l.resetStats_;l.dispose;l.setAudio=;l.abort;l.abort_;l.checkForAbort_=function(a){return"APPENDING"!==this.state||this.pendingSegment_?this.pendingSegment_&&this.pendingSegment_.requestId===a?!1:!0:(this.state="READY",!0)};l.error=function(a){"undefined"!==typeof a&&(this.logger_("error occurred:",a),this.error_=a);this.pendingSegment_=null;return this.error_};
l.endOfStream;l.buffered_=function(){var a=this.getMediaInfo_();if(!this.sourceUpdater_||!a)return w.createTimeRanges();if("main"===this.loaderType_){var h=a.hasAudio,g=a.hasVideo;a=a.isMuxed;if(g&&h&&!this.audioDisabled_&&!a)return this.sourceUpdater_.buffered();if(g)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()};l.initSegmentForMap=;l.segmentKey=function(a,h){void 0===h&&(h=!1);if(!a)return null;var d=a.resolvedUri,k=this.keyCache_[d];this.cacheEncryptionKeys_&&h&&!k&&a.bytes&&(this.keyCache_[d]=k={resolvedUri:a.resolvedUri,bytes:a.bytes});a={resolvedUri:(k||a).resolvedUri};k&&(a.bytes=
k.bytes);return a};l.couldBeginLoading_;l.load;l.init_=function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()};l.playlist=function(a,h){void 0===h&&(h={});if(a){var d=this.playlist_,k=this.pendingSegment_;this.playlist_=
a;this.xhrOptions_=h;"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(a));h=null;d&&(d.id?h=d.id:d.uri&&(h=d.uri));this.logger_("playlist update ["+h+" \x3d\x3e "+(a.id||a.uri)+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(d&&d.uri===a.uri){h=a.mediaSequence-d.mediaSequence;this.logger_("live window shift ["+h+"]");if(null!==this.mediaIndex)if(this.mediaIndex-=
h,0>this.mediaIndex)this.partIndex=this.mediaIndex=null;else{var l=this.playlist_.segments[this.mediaIndex];!this.partIndex||l.parts&&l.parts.length&&l.parts[this.partIndex]||(l=this.mediaIndex,this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=l)}k&&(k.mediaIndex-=h,0>k.mediaIndex?(k.mediaIndex=null,k.partIndex=null):(0<=k.mediaIndex&&(k.segment=a.segments[k.mediaIndex]),0<=k.partIndex&&k.segment.parts&&(k.part=k.segment.parts[k.partIndex])));
this.syncController_.saveExpiredSegmentInfo(d,a)}else null!==this.mediaIndex&&(a.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate")}};l.pause;l.paused;l.resetEverything=function(a){this.ended_=!1;this.appendInitSegment_={audio:!0,video:!0};this.resetLoader();this.remove(0,Infinity,
a);this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))};l.resetLoader=function(){this.fetchAtBuffer_=!1;this.resyncLoader()};l.resyncLoader=function(){this.transmuxer_&&sf.reset(this.transmuxer_);this.syncPoint_=this.partIndex=this.mediaIndex=null;this.isPendingTimestampOffset_=!1;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})};
l.remove=function(a,h,g,k){void 0===g&&(g=function(){});void 0===k&&(k=!1);Infinity===h&&(h=this.duration_());if(h<=a)this.logger_("skipping remove because end ${end} is \x3c\x3d start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var d=1,l=function(){d--;0===d&&g()};if(k||!this.audioDisabled_)d++,this.sourceUpdater_.removeAudio(a,h,l);if(k||"main"===this.loaderType_)this.gopBuffer_=dn(this.gopBuffer_,a,h,this.timeMapping_),d++,this.sourceUpdater_.removeVideo(a,h,l);for(var u in this.inbandTextTracks_)Dc(a,
h,this.inbandTextTracks_[u]);Dc(a,h,this.segmentMetadataTrack_);l()}else this.logger_("skipping remove because no source updater or starting media info")};l.monitorBuffer_;l.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=
window.setTimeout(this.monitorBufferTick_.bind(this),500)};l.fillBuffer_;l.isEndOfStream_=function(a,h,g){void 0===a&&(a=this.mediaIndex);void 0===h&&(h=this.playlist_);void 0===g&&(g=this.partIndex);if(!h||
!this.mediaSource_)return!1;var d="number"===typeof a&&h.segments[a];a=a+1===h.segments.length;g=!d||!d.parts||g+1===d.parts.length;return h.endList&&"open"===this.mediaSource_.readyState&&a&&g};l.chooseNextRequest_=function(){var a=this.buffered_(),h=ri(a)||0,g=ef(a,this.currentTime_()),k=!this.hasPlayed_()&&1<=g,l=g>=this.goalBufferLength_();a=this.playlist_.segments;if(!a.length||k||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),
this.currentTimeline_,this.currentTime_());k={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(k.isSyncRequest){a:{l=this.currentTimeline_;var m=a||[];for(var B=[],q=0,r=0;r<m.length;r++){var w=m[r];if(l===w.timeline&&(B.push(r),q+=w.duration,q>h)){h=r;break a}}h=0===B.length?0:B[B.length-1]}k.mediaIndex=h}else null!==this.mediaIndex?(l=a[this.mediaIndex],m="number"===typeof this.partIndex?this.partIndex:-1,k.startOfSegment=l.end?l.end:
h,l.parts&&l.parts[m+1]?(k.mediaIndex=this.mediaIndex,k.partIndex=m+1):k.mediaIndex=this.mediaIndex+1):(B=Aa.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?h:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),l=B.segmentIndex,m=B.startTime,B=B.partIndex,k.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+
h:"currentTime "+this.currentTime_(),k.mediaIndex=l,k.startOfSegment=m,k.partIndex=B);l=(h=a[k.mediaIndex])&&"number"===typeof k.partIndex&&h.parts&&h.parts[k.partIndex];if(!h||"number"===typeof k.partIndex&&!l)return null;"number"!==typeof k.partIndex&&h.parts&&(k.partIndex=0,l=h.parts[0]);g||!l||l.independent||(0===k.partIndex?(g=a[k.mediaIndex-1],(h=g.parts&&g.parts.length&&g.parts[g.parts.length-1])&&h.independent&&(--k.mediaIndex,k.partIndex=g.parts.length-1,k.independent="previous segment")):
h.parts[k.partIndex-1].independent&&(--k.partIndex,k.independent="previous part"));g=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return k.mediaIndex>=a.length-1&&g&&!this.seeking_()?null:this.generateSegmentInfo_(k)};l.generateSegmentInfo_=function(a){var d=a.playlist,g=a.mediaIndex,k=a.startOfSegment,l=a.partIndex,m=a.forceTimestampOffset,q=d.segments[g],r="number"===typeof l&&q.parts[l];a={requestId:"segment-loader-"+Math.random(),uri:r&&r.resolvedUri||q.resolvedUri,mediaIndex:g,partIndex:r?
l:null,isSyncRequest:a.isSyncRequest,startOfSegment:k,playlist:d,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:q.timeline,duration:r&&r.duration||q.duration,segment:q,part:r,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:a.getMediaInfoForTime,independent:a.independent};m="undefined"!==typeof m?m:this.isPendingTimestampOffset_;a.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:q.timeline,currentTimeline:this.currentTimeline_,startOfSegment:k,buffered:this.buffered_(),
overrideCheck:m});k=ri(this.sourceUpdater_.audioBuffered());"number"===typeof k&&(a.audioAppendStart=k-this.sourceUpdater_.audioTimestampOffset());if(this.sourceUpdater_.videoBuffered().length){k=this.gopBuffer_;q=this.currentTime_()-this.sourceUpdater_.videoTimestampOffset();if("undefined"!==typeof q&&null!==q&&k.length){q=Math.ceil(9E4*(q-this.timeMapping_+3));for(m=0;m<k.length&&!(k[m].pts>q);m++);k=k.slice(m)}else k=[];a.gopsToAlignWith=k}return a};l.timestampOffsetForSegment_=function(a){var d=
a.segmentTimeline,g=a.currentTimeline,k=a.startOfSegment,l=a.buffered;a=a.overrideCheck||d!==g?d<g?k:l.length?l.end(l.length-1):k:null;return a};l.earlyAbortWhenNeeded_=function(a){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))){var d=this.currentTime_(),g=a.bandwidth,k=this.pendingSegment_.duration;a=Aa.estimateSegmentRequestTime(k,g,this.playlist_,a.bytesReceived);var l=this.buffered_(),m=this.vhs_.tech_.playbackRate();
void 0===m&&(m=1);l=((l.length?l.end(l.length-1):0)-d)/m-1;a<=l||!(d=Ym({master:this.vhs_.playlists.master,currentTime:d,bandwidth:g,duration:this.duration_(),segmentDuration:k,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_}))||(g=a-l-d.rebufferingImpact,k=.5,l<=pb&&(k=1),!d.playlist||d.playlist.uri===this.playlist_.uri||g<k||(this.bandwidth=d.playlist.attributes.BANDWIDTH*va.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort")))}};l.handleAbort_;l.handleProgress_;l.handleTrackInfo_=function(a,h){this.earlyAbortWhenNeeded_(a.stats);this.checkForAbort_(a.requestId)||this.checkForIllegalMediaSwitch(h)||(h=h||{},en(this.currentMediaInfo_,h)||(this.appendInitSegment_={audio:!0,video:!0},this.currentMediaInfo_=this.startingMediaInfo_=h,this.logger_("trackinfo update",h),this.trigger("trackinfo")),this.checkForAbort_(a.requestId)||
(this.pendingSegment_.trackInfo=h,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))};l.handleTimingInfo_=function(a,h,g,k){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId)){a=this.pendingSegment_;var d=h+"TimingInfo";a[d]=a[d]||{};a[d][g]=k;this.logger_("timinginfo: "+h+" - "+g+" - "+k);this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}};l.handleCaptions_=function(a,h){var d=this;this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId))if(0===
h.length)this.logger_("SegmentLoader received no captions from a caption event");else if(this.pendingSegment_.hasAppendedData_){var k=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),l={};h.forEach);Object.keys(l).forEach(function(a){var g=
l[a],h=g.startTime,u=g.endTime;g=g.captions;var m=d.inbandTextTracks_;d.logger_("adding cues from "+h+" -\x3e "+u+" for "+a);var v=d.vhs_.tech_;if(!m[a]){v.trigger({type:"usage",name:"vhs-608"});v.trigger({type:"usage",name:"hls-608"});var z=a;/^cc708_/.test(a)&&(z="SERVICE"+a.split("_")[1]);var q=v.textTracks().getTrackById(z);if(q)m[a]=q;else{var r=q=a,w=!1,x=(v.options_.vhs&&v.options_.vhs.captionServices||{})[z];x&&(q=x.label,r=x.language,w=x["default"]);m[a]=v.addRemoteTextTrack({kind:"captions",
id:z,"default":w,label:q,language:r},!1).track}}Dc(h,u,m[a]);$m({captionArray:g,inbandTextTracks:m,timestampOffset:k})});this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,a,h))};l.handleId3_=function(a,h,g){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId))if(this.pendingSegment_.hasAppendedData_){a=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():
this.sourceUpdater_.videoTimestampOffset();var d=this.inbandTextTracks_;d.metadataTrack_||(d.metadataTrack_=this.vhs_.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,d.metadataTrack_.inBandMetadataTrackDispatchType=g);bn({inbandTextTracks:this.inbandTextTracks_,metadataArray:h,timestampOffset:a,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,a,h,g))};l.processMetadataQueue_;l.processCallQueue_=function(){var a=this.callQueue_;this.callQueue_=[];a.forEach(function(a){return a()})};l.processLoadQueue_;l.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var a=this.pendingSegment_;return a?this.getCurrentMediaInfo_()?hj({timelineChangeController:this.timelineChangeController_,
currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0:!0:!1};l.getCurrentMediaInfo_;l.getMediaInfo_;l.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;
var a=this.pendingSegment_,h=this.getCurrentMediaInfo_();if(!a||!h)return!1;var g=h.isMuxed;return h.hasVideo&&!a.videoTimingInfo||h.hasAudio&&!this.audioDisabled_&&!g&&!a.audioTimingInfo||hj({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0};l.handleData_=function(a,h){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId))if(this.callQueue_.length||
!this.hasEnoughInfoToAppend_())this.callQueue_.push(this.handleData_.bind(this,a,h));else{var d=this.pendingSegment_;this.setTimeMapping_(d.timeline);this.updateMediaSecondsLoaded_(d.part||d.segment);if("closed"!==this.mediaSource_.readyState){a.map&&(a.map=this.initSegmentForMap(a.map,!0),d.segment.map=a.map);a.key&&this.segmentKey(a.key,!0);d.isFmp4=a.isFmp4;d.timingInfo=d.timingInfo||{};if(d.isFmp4)this.trigger("fmp4"),d.timingInfo.start=d[h.type+"TimingInfo"].start;else{a=this.getCurrentMediaInfo_();
a="main"===this.loaderType_&&a&&a.hasVideo;if(a)var k=d.videoTimingInfo.start;d.timingInfo.start=this.trueSegmentStart_({currentStart:d.timingInfo.start,playlist:d.playlist,mediaIndex:d.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:k,videoTimingInfo:d.videoTimingInfo,audioTimingInfo:d.audioTimingInfo})}this.updateAppendInitSegmentStatus(d,h.type);this.updateSourceBufferTimestampOffset_(d);if(d.isSyncRequest){this.updateTimingInfoEnd_(d);
this.syncController_.saveSegmentTimingInfo({segmentInfo:d,shouldSaveTimelineMapping:"main"===this.loaderType_});k=this.chooseNextRequest_();if(k.mediaIndex!==d.mediaIndex||k.partIndex!==d.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}d.hasAppendedData_=!0;this.processMetadataQueue_();this.appendData_(d,h)}}};l.updateAppendInitSegmentStatus=function(a,h){"main"!==this.loaderType_||"number"!==typeof a.timestampOffset||
a.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0});this.playlistOfLastInitSegment_[h]!==a.playlist&&(this.appendInitSegment_[h]=!0)};l.getInitSegmentAndUpdateState_=function(a){var d=a.type,g=a.initSegment,k=a.map;a=a.playlist;if(k){var l=ud(k);if(this.activeInitSegmentId_===l)return null;g=this.initSegmentForMap(k,!0).bytes;this.activeInitSegmentId_=l}return g&&this.appendInitSegment_[d]?(this.playlistOfLastInitSegment_[d]=a,this.appendInitSegment_[d]=!1,this.activeInitSegmentId_=
null,g):null};l.handleQuotaExceededError_=function(a,h){var d=this;h=a.segmentInfo;var k=a.type;a=a.bytes;var l=this.sourceUpdater_.audioBuffered(),m=this.sourceUpdater_.videoBuffered();1<l.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Eb(l).join(", "));1<m.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Eb(m).join(", "));var q=l.length?l.start(0):0,r=l.length?l.end(l.length-1):0,w=m.length?m.start(0):0,x=m.length?m.end(m.length-1):0;
1>=r-q&&1>=x-w?(this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+a.byteLength+", ")+("audio buffer: "+Eb(l).join(", ")+", ")+("video buffer: "+Eb(m).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:Infinity}),this.trigger("error")):(this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:h,type:k,bytes:a})),h=
this.currentTime_()-1,this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+h),this.remove(0,h,function(){d.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s");d.waitingOnRemove_=!1;d.quotaExceededErrorRetryTimeout_=window.setTimeout,1E3)},!0))};l.handleAppendError_=function(a,h){var d=a.segmentInfo,k=a.type;a=a.bytes;h&&(22===h.code?this.handleQuotaExceededError_({segmentInfo:d,
type:k,bytes:a}):(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",h),this.error(k+" append of "+a.length+"b failed for segment "+("#"+d.mediaIndex+" in playlist "+d.playlist.id)),this.trigger("appenderror")))};l.appendToSourceBuffer_=function(a){var d=a.segmentInfo,g=a.type,k=a.initSegment,l=a.data;a=a.bytes;a||(a=[l],l=l.byteLength,k&&(a.unshift(k),l+=k.byteLength),a=Zm({bytes:l,segments:a}));this.sourceUpdater_.appendBuffer({segmentInfo:d,type:g,bytes:a},this.handleAppendError_.bind(this,
{segmentInfo:d,type:g,bytes:a}))};l.handleSegmentTimingInfo_=function(a,h,g){this.pendingSegment_&&h===this.pendingSegment_.requestId&&(h=this.pendingSegment_.segment,a+="TimingInfo",h[a]||(h[a]={}),h[a].transmuxerPrependedSeconds=g.prependedContentDuration||0,h[a].transmuxedPresentationStart=g.start.presentation,h[a].transmuxedDecodeStart=g.start.decode,h[a].transmuxedPresentationEnd=g.end.presentation,h[a].transmuxedDecodeEnd=g.end.decode,h[a].baseMediaDecodeTime=g.baseMediaDecodeTime)};l.appendData_=
function(a,h){var d=h.type,k=h.data;!k||!k.byteLength||"audio"===d&&this.audioDisabled_||(h=this.getInitSegmentAndUpdateState_({type:d,initSegment:h.initSegment,playlist:a.playlist,map:a.isFmp4?a.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:a,type:d,initSegment:h,data:k}))};l.loadSegment_=function(a){var d=this;this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);"number"===typeof a.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"});
this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(a):this.loadQueue_.push)};l.updateTransmuxerAndRequestSegment_=function(a){var d=this;this.shouldUpdateTransmuxerTimestampOffset_(a.timestampOffset)&&(this.gopBuffer_.length=0,a.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",
timestampOffset:a.timestampOffset}));var g=this.createSimplifiedSegmentObj_(a),k=this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex),l=null!==this.mediaIndex,m=a.timeline!==this.currentTimeline_&&0<a.timeline;k=k||l&&m;this.logger_("Requesting "+$b(a));g.map&&!g.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0});a.abortRequests=Wm({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:g,abortFn:this.handleAbort_.bind(this,
a),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",a.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",a.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:k,endedTimelineFn,id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),
doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(g){var h=g.message,k=g.level;g=g.stream;d.logger_($b(a)+" logged from transmuxer stream "+g+" as a "+k+": "+h)}})};l.trimBackBuffer_=function(a){a=this.seekable_();var d=this.currentTime_(),g=this.playlist_.targetDuration||10,k=d-va.BACK_BUFFER_LENGTH;a.length&&(k=Math.max(k,a.start(0)));a=Math.min(d-g,k);0<a&&this.remove(0,a)};l.createSimplifiedSegmentObj_=function(a){var d=a.segment,g=a.part;g={resolvedUri:g?g.resolvedUri:d.resolvedUri,
byterange:g?g.byterange:d.byterange,requestId:a.requestId,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,part:a.part};var k=a.playlist.segments[a.mediaIndex-1];k&&k.timeline===d.timeline&&(k.videoTimingInfo?g.baseStartTime=k.videoTimingInfo.transmuxedDecodeEnd:k.audioTimingInfo&&(g.baseStartTime=k.audioTimingInfo.transmuxedDecodeEnd));d.key&&(a=d.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),g.key=this.segmentKey(d.key),g.key.iv=
a);d.map&&(g.map=this.initSegmentForMap(d.map));return g};l.saveTransferStats_=function(a){this.mediaRequests+=1;a&&(this.mediaBytesTransferred+=a.bytesReceived,this.mediaTransferDuration+=a.roundTripTime)};l.saveBandwidthRelatedStats_=function(a,h){this.pendingSegment_.byteLength=h.bytesReceived;a<zd?this.logger_("Ignoring segment's bandwidth because its duration of "+a+(" is less than the min to record "+zd)):(this.bandwidth=h.bandwidth,this.roundTrip=h.roundTripTime)};l.handleTimeout_;l.segmentRequestFinished_=function(a,h,g){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,a,h,g));else if(this.saveTransferStats_(h.stats),this.pendingSegment_&&h.requestId===this.pendingSegment_.requestId)if(a)this.pendingSegment_=null,this.state="READY",-102!==a.code&&(this.pause(),-101===a.code?this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")));else{a=
this.pendingSegment_;this.saveBandwidthRelatedStats_(a.duration,h.stats);a.endOfAllRequests=h.endOfAllRequests;if(g.gopInfo){h=this.gopBuffer_;g=g.gopInfo;if(g.length)if(this.safeAppend_)h=g.slice();else{var d=g[0].pts,k=0;for(k;k<h.length&&!(h[k].pts>=d);k++);h=h.slice(0,k).concat(g)}this.gopBuffer_=h}this.state="APPENDING";this.trigger("appending");this.waitForAppendsToComplete_(a)}};l.setTimeMapping_;l.updateMediaSecondsLoaded_=
function(a){this.mediaSecondsLoaded="number"===typeof a.start&&"number"===typeof a.end?this.mediaSecondsLoaded+(a.end-a.start):this.mediaSecondsLoaded+a.duration};l.shouldUpdateTransmuxerTimestampOffset_=function(a){return null===a?!1:"main"===this.loaderType_&&a!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&a!==this.sourceUpdater_.audioTimestampOffset()?!0:!1};l.trueSegmentStart_=function(a){var d=a.currentStart,g=a.mediaIndex,k=a.firstVideoFrameTimeForData,l=a.currentVideoTimestampOffset,
m=a.audioTimingInfo;if("undefined"!==typeof d)return d;if(!a.useVideoTimingInfo)return m.start;d=a.playlist.segments[g-1];return 0!==g&&d&&"undefined"!==typeof d.start&&d.end===k+l?a.videoTimingInfo.start:k};l.waitForAppendsToComplete_=function(a){var d=this.getCurrentMediaInfo_(a);if(d){var g=d.hasAudio,k=d.hasVideo;d=d.isMuxed;k="main"===this.loaderType_&&k;g=!this.audioDisabled_&&g&&!d;a.waitingOnAppends=0;a.hasAppendedData_?(k&&a.waitingOnAppends++,g&&a.waitingOnAppends++,k&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,
a)),g&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,a))):(a.timingInfo||"number"!==typeof a.timestampOffset||(this.isPendingTimestampOffset_=!0),a.timingInfo={start:0},a.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(a),this.processMetadataQueue_()),this.checkAppendsDone_(a))}else this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:Infinity}),this.trigger("error")};l.checkAppendsDone_=;l.checkForIllegalMediaSwitch=function(a){var d=this.getCurrentMediaInfo_();return(a="main"===this.loaderType_&&d&&a?a.hasAudio||a.hasVideo?d.hasVideo&&!a.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!d.hasVideo&&a.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null)?(this.error({message:a,blacklistDuration:Infinity}),this.trigger("error"),!0):!1};l.updateSourceBufferTimestampOffset_=function(a){if(null!==a.timestampOffset&&"number"===typeof a.timingInfo.start&&!a.changedTimestampOffset&&"main"===this.loaderType_){var d=!1;a.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:a.segment.videoTimingInfo,audioTimingInfo:a.segment.audioTimingInfo,timingInfo:a.timingInfo});
a.changedTimestampOffset=!0;a.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(a.timestampOffset),d=!0);a.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(a.timestampOffset),d=!0);d&&this.trigger("timestampoffset")}};l.getSegmentStartTimeForTimestampOffsetCalculation_=function(a){var d=a.videoTimingInfo,g=a.audioTimingInfo;a=a.timingInfo;return this.useDtsForTimestampOffset_?d&&"number"===
typeof d.transmuxedDecodeStart?d.transmuxedDecodeStart:g&&"number"===typeof g.transmuxedDecodeStart?g.transmuxedDecodeStart:a.start:a.start};l.updateTimingInfoEnd_=function(a){a.timingInfo=a.timingInfo||{};var d=this.getMediaInfo_();if(d="main"===this.loaderType_&&d&&d.hasVideo&&a.videoTimingInfo?a.videoTimingInfo:a.audioTimingInfo)a.timingInfo.end="number"===typeof d.end?d.end:d.start+a.duration};l.handleAppendsDone_=function(){this.pendingSegment_&&this.trigger("appendsdone");if(this.pendingSegment_){var a=
this.pendingSegment_;this.updateTimingInfoEnd_(a);this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});if("hls"!==this.sourceType_)var h=null;else{var g=fn({audioTimingInfo:a.audioTimingInfo,videoTimingInfo:a.videoTimingInfo});if(g){var k=a.playlist.targetDuration;h=ij({segmentDuration:g,maxDuration:2*k});var l=ij({segmentDuration:g,maxDuration:k});g="Segment with index "+a.mediaIndex+" "+("from playlist "+
a.playlist.id+" ")+("has a duration of "+g+" ")+("when the reported duration is "+a.duration+" ")+("and the target duration is "+k+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";h=h||l?{severity:h?"warn":"info",message:g}:null}else h=null}h&&("warn"===h.severity?w.log.warn(h.message):this.logger_(h.message));
this.recordThroughput_(a);this.pendingSegment_=null;this.state="READY";if(a.isSyncRequest&&(this.trigger("syncinfoupdate"),!a.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+$b(a));return}this.logger_("Appended "+$b(a));this.addSegmentMetadataCue_(a);this.fetchAtBuffer_=!0;this.currentTimeline_!==a.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline}),"main"!==this.loaderType_||this.audioDisabled_||
this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:a.timeline}));this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");l=a.segment;h=a.part;l=l.end&&this.currentTime_()-l.end>3*a.playlist.targetDuration;h=h&&h.end&&this.currentTime_()-h.end>3*a.playlist.partTargetDuration;l||h?(this.logger_("bad "+(l?"segment":"part")+" "+$b(a)),this.resetEverything()):(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=
a.mediaIndex,this.partIndex=a.partIndex,this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex)&&this.endOfStream(),this.trigger("appended"),a.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()};l.recordThroughput_=function(a){if(a.duration<zd)this.logger_("Ignoring segment's throughput because its duration of "+a.duration+(" is less than the min to record "+zd));else{var d=this.throughput.rate,g=Date.now()-a.endOfAllRequests+
1;this.throughput.rate+=(Math.floor(a.byteLength/g*8E3)-d)/++this.throughput.count}};l.addSegmentMetadataCue_=function(a){if(this.segmentMetadataTrack_){var d=a.segment,g=d.start,k=d.end;if("number"===typeof g&&isFinite(g)&&"number"===typeof k&&isFinite(k)){Dc(g,k,this.segmentMetadataTrack_);var l=window.WebKitDataCue||window.VTTCue;a={custom:d.custom,dateTimeObject:d.dateTimeObject,dateTimeString:d.dateTimeString,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,
codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.id,start:g,end:k};d=JSON.stringify(a);g=new l(g,k,d);g.value=a;this.segmentMetadataTrack_.addCue(g)}}};return k}(w.EventTarget),jj,gn=["video","audio"],xf,yf=function d(k,l){if(0!==l.queue.length){var h=0,g=l.queue[h];if("mediaSource"===
g.type)l.updating()||"closed"===l.mediaSource.readyState||(l.queue.shift(),g.action(l),g.doneFn&&g.doneFn(),d("audio",l),d("video",l));else if("mediaSource"!==k&&l.ready()&&"closed"!==l.mediaSource.readyState&&!xf(k,l)){if(g.type!==k){a:{h=l.queue;for(g=0;g<h.length;g++){var u=h[g];if("mediaSource"===u.type){h=null;break a}if(u.type===k){h=g;break a}}h=null}if(null===h)return;g=l.queue[h]}l.queue.splice(h,1);l.queuePending[k]=g;g.action(k,l);g.doneFn||(l.queuePending[k]=null,d(k,l))}}},kj,wa,Ka={appendBuffer:function(k,l,d){return function(h,g){var u=g[h+"Buffer"];if(wa(g.mediaSource,u)){g.logger_("Appending segment "+l.mediaIndex+"'s "+k.length+" bytes to "+h+"Buffer");try{u.appendBuffer(k)}catch(z){g.logger_("Error with code "+
z.code+" "+(22===z.code?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+l.mediaIndex+" to "+h+"Buffer")),g.queuePending[h]=null,d(z)}}}},remove,timestampOffset,callback,endOfStream,duration,abort,addSourceBuffer:function(k,l){return function(d){var h=jj(k),g=vc(l);d.logger_("Adding "+k+"Buffer with codec "+l+" to mediaSource");g=d.mediaSource.addSourceBuffer(g);g.addEventListener("updateend",d["on"+h+"UpdateEnd_"]);g.addEventListener("error",d["on"+h+"Error_"]);d.codecs[k]=l;d[k+"Buffer"]=g}},
removeSourceBuffer,changeType},
ia=function(k){var l=k.type,d=k.sourceUpdater;d.queue.push({type:l,action:k.action,doneFn:k.doneFn,name:k.name});yf(l,d)},lj=function(k,l){return function(d){l.queuePending[k]&&(d=l.queuePending[k].doneFn,l.queuePending[k]=null,d&&d(l[k+"Error_"]));yf(k,l)}},mj=function(k){function l(d){var g=k.call(this)||this;g.mediaSource=d;g.sourceopenListener_;g.mediaSource.addEventListener("sourceopen",g.sourceopenListener_);g.logger_=Za("SourceUpdater");g.audioTimestampOffset_=
0;g.videoTimestampOffset_=0;g.queue=[];g.queuePending={audio:null,video:null};g.delayedAudioAppendQueue_=[];g.videoAppendQueued_=!1;g.codecs={};g.onVideoUpdateEnd_=lj("video",O(g));g.onAudioUpdateEnd_=lj("audio",O(g));g.onVideoError_=function(d){g.videoError_=d};g.onAudioError_=function(d){g.audioError_=d};g.createdSourceBuffers_=!1;g.initializedEme_=!1;g.triggeredReady_=!1;return g}F(l,k);var d=l.prototype;d.initializedEme;d.hasCreatedSourceBuffers=
function(){return this.createdSourceBuffers_};d.hasInitializedAnyEme=function(){return this.initializedEme_};d.ready;d.createSourceBuffers;d.triggerReady;d.addSourceBuffer=;d.abort;d.removeSourceBuffer;d.canRemoveSourceBuffer;l.canChangeType;d.canChangeType;d.changeType;
d.addOrChangeSourceBuffers=function(d){var g=this;if(!d||"object"!==typeof d||0===Object.keys(d).length)throw Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(d).forEach)};d.appendBuffer=function(d,g){var h=this,k=d.segmentInfo,l=d.type,m=d.bytes;this.processedAppend_=!0;"audio"===l&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([d,
g]),this.logger_("delayed audio append of "+m.length+" until video append")):(ia({type:l,sourceUpdater:this,action:Ka.appendBuffer(m,k||{mediaIndex:-1},g),doneFn:g,name:"appendBuffer"}),"video"===l&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(d=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+d.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,d.forEach))))};d.audioBuffered=function(){return wa(this.mediaSource,
this.audioBuffer)?this.audioBuffer.buffered?this.audioBuffer.buffered:w.createTimeRange():w.createTimeRange()};d.videoBuffered=function(){return wa(this.mediaSource,this.videoBuffer)?this.videoBuffer.buffered?this.videoBuffer.buffered:w.createTimeRange():w.createTimeRange()};d.buffered;d.setDuration;d.endOfStream=function(d,g){void 0===d&&(d=null);void 0===g&&(g=nb);"string"!==typeof d&&(d=void 0);ia({type:"mediaSource",sourceUpdater:this,action:Ka.endOfStream(d),name:"endOfStream",doneFn:g})};d.removeAudio=function(d,g,k){void 0===k&&(k=nb);this.audioBuffered().length&&0!==this.audioBuffered().end(0)?ia({type:"audio",sourceUpdater:this,
action:Ka.remove(d,g),doneFn:k,name:"remove"}):k()};d.removeVideo;d.updating=function(){return xf("audio",this)||xf("video",this)?!0:!1};d.audioTimestampOffset=function(d){"undefined"!==typeof d&&this.audioBuffer&&this.audioTimestampOffset_!==d&&(ia({type:"audio",sourceUpdater:this,action:Ka.timestampOffset(d),name:"timestampOffset"}),
this.audioTimestampOffset_=d);return this.audioTimestampOffset_};d.videoTimestampOffset=function(d){"undefined"!==typeof d&&this.videoBuffer&&this.videoTimestampOffset!==d&&(ia({type:"video",sourceUpdater:this,action:Ka.timestampOffset(d),name:"timestampOffset"}),this.videoTimestampOffset_=d);return this.videoTimestampOffset_};d.audioQueueCallback=function(d){this.audioBuffer&&ia({type:"audio",sourceUpdater:this,action:Ka.callback(d),name:"callback"})};d.videoQueueCallback;d.dispose=function(){var d=this;this.trigger("dispose");gn.forEach(function(g){d.abort(g);if(d.canRemoveSourceBuffer())d.removeSourceBuffer(g);else d[g+"QueueCallback"])});this.videoAppendQueued_=!1;this.delayedAudioAppendQueue_.length=0;this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_);this.off()};return l}(w.EventTarget),nj=new Uint8Array(["\n",
"\n"].map)),hn=function(k){function l(d,g){void 0===g&&(g={});g=k.call(this,d,g)||this;g.mediaSource_=null;g.subtitlesTrack_=null;g.loaderType_="subtitle";g.featuresNativeTextTracks_=d.featuresNativeTextTracks;g.shouldSaveSegmentTimingInfo_=!1;return g}F(l,k);var d=l.prototype;d.createTransmuxer_=function(){return null};d.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return w.createTimeRanges();var d=
this.subtitlesTrack_.cues;return w.createTimeRanges([[d[0].startTime,d[d.length-1].startTime]])};d.initSegmentForMap=function(d,g){void 0===g&&(g=!1);if(!d)return null;var h=ud(d),k=this.initSegments_[h];g&&!k&&d.bytes&&(g=new Uint8Array(nj.byteLength+d.bytes.byteLength),g.set(d.bytes),g.set(nj,d.bytes.byteLength),this.initSegments_[h]=k={resolvedUri:d.resolvedUri,byterange:d.byterange,bytes:g});return k||d};d.couldBeginLoading_;
d.init_;d.track=function(d){if("undefined"===typeof d)return this.subtitlesTrack_;this.subtitlesTrack_=d;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_};d.remove;d.fillBuffer_=function(){var d=this,g=this.chooseNextRequest_();g&&(null===this.syncController_.timestampOffsetForTimeline(g.timeline)?(this.syncController_.one("timestampoffset",),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(g))};d.timestampOffsetForSegment_=function(){return null};d.chooseNextRequest_;d.skipEmptySegments_;d.stopForError;d.segmentRequestFinished_=function(d,g,k){var h=this;if(this.subtitlesTrack_)if(this.saveTransferStats_(g.stats),this.pendingSegment_)if(d)-101===d.code&&this.handleTimeout_(),-102===d.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(d);else{var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,g.stats);
this.state="APPENDING";this.trigger("appending");var u=l.segment;u.map&&(u.map.bytes=g.map.bytes);l.bytes=g.bytes;if("function"!==typeof window.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var m;var q;this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",q);this.subtitlesTrack_.tech_.one("vttjserror",
m)}else{u.requested=!0;try{this.parseVTTCues_(l)}catch(Uj){this.stopForError({message:Uj.message});return}this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_);l.timingInfo=l.cues.length?{start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:{start:l.startOfSegment,end:l.startOfSegment+l.duration};l.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,
l.cues.forEach),cn(this.subtitlesTrack_),this.handleAppendsDone_())}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"};d.handleData_=function(){};d.updateTimingInfoEnd_;d.parseVTTCues_=function(d){var g=!1;if("function"===typeof window.TextDecoder)var h=new window.TextDecoder("utf8");else h=window.WebVTT.StringDecoder(),g=!0;h=new window.WebVTT.Parser(window,
window.vttjs,h);d.cues=[];d.timestampmap={MPEGTS:0,LOCAL:0};h.oncue=d.cues.push.bind(d.cues);h.ontimestampmap;h.onparsingerror;if(d.segment.map){var k=d.segment.map.bytes;g&&(k=decodeURIComponent(escape(String.fromCharCode.apply(null,k))));h.parse(k)}k=d.bytes;g&&(k=decodeURIComponent(escape(String.fromCharCode.apply(null,k))));h.parse(k);h.flush()};d.updateTimeMapping_=function(d,g,k){var h=d.segment;
if(g)if(d.cues.length){var l=d.timestampmap,u=l.MPEGTS/9E4-l.LOCAL+g.mapping;d.cues.forEach);k.syncInfo||(k.syncInfo={mediaSequence:k.mediaSequence+d.mediaIndex,time:Math.min(d.cues[0].startTime,d.cues[d.cues.length-1].startTime-h.duration)})}else h.empty=!0};return l}(wf),oj=[{name:"VOD",run:function(k,l,d,h,g){return Infinity!==d?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(k,l,d,h,g){if(!Object.keys(k.timelineToDatetimeMappings).length)return null;
h=d=null;var u=gf(l);g=g||0;for(var m=0;m<u.length;m++){var v=u[l.endList||0===g?m:u.length-(m+1)],q=v.segment,r=k.timelineToDatetimeMappings[q.timeline];if(r&&q.dateTimeObject){r=q.dateTimeObject.getTime()/1E3+r;if(q.parts&&"number"===typeof v.partIndex)for(var w=0;w<v.partIndex;w++)r+=q.parts[w].duration;q=Math.abs(g-r);if(null!==h&&(0===q||h<q))break;h=q;d={time:r,segmentIndex:v.segmentIndex,partIndex:v.partIndex}}}return d}},{name:"Segment",run:function(k,l,d,h,g){d=k=null;g=g||0;for(var u=gf(l),
m=0;m<u.length;m++){var v=u[l.endList||0===g?m:u.length-(m+1)],q=v.segment,r=v.part&&v.part.start||q&&q.start;if(q.timeline===h&&"undefined"!==typeof r){q=Math.abs(g-r);if(null!==d&&d<q)break;if(!k||null===d||d>=q)d=q,k={time:r,segmentIndex:v.segmentIndex,partIndex:v.partIndex}}}return k}},{name:"Discontinuity",run:function(k,l,d,h,g){d=null;g=g||0;if(l.discontinuityStarts&&l.discontinuityStarts.length){h=null;for(var u=0;u<l.discontinuityStarts.length;u++){var m=l.discontinuityStarts[u],v=k.discontinuities[l.discontinuitySequence+
u+1];if(v){var q=Math.abs(g-v.time);if(null!==h&&h<q)break;if(!d||null===h||h>=q)h=q,d={time:v.time,segmentIndex:m,partIndex:null}}}}return d}},{name:"Playlist",run}],jn=function(k){function l(d){d=k.call(this)||this;d.timelines=[];d.discontinuities=[];d.timelineToDatetimeMappings={};d.logger_=Za("SyncController");return d}F(l,k);var d=l.prototype;d.getSyncPoint=;d.getExpiredTime=function(d,g){if(!d||!d.segments)return null;g=this.runStrategies_(d,g,d.discontinuitySequence,0);if(!g.length)return null;g=this.selectSyncPoint_(g,{key:"segmentIndex",value:0});0<g.segmentIndex&&(g.time*=-1);return Math.abs(g.time+zc({defaultDuration:d.targetDuration,durationList:d.segments,startIndex:g.segmentIndex,endIndex:0}))};d.runStrategies_;d.selectSyncPoint_=function(d,g){for(var h=d[0].syncPoint,k=Math.abs(d[0].syncPoint[g.key]-g.value),l=d[0].strategy,m=1;m<d.length;m++){var q=Math.abs(d[m].syncPoint[g.key]-g.value);q<k&&(k=q,h=d[m].syncPoint,l=d[m].strategy)}this.logger_("syncPoint for ["+g.key+": "+g.value+"] chosen with strategy"+(" ["+l+"]: [time:"+h.time+",")+(" segmentIndex:"+h.segmentIndex)+
("number"===typeof h.partIndex?",partIndex:"+h.partIndex:"")+"]");return h};d.saveExpiredSegmentInfo=function(d,g){var h=g.mediaSequence-d.mediaSequence;if(86400<h)w.log.warn("Not saving expired segment info. Media sequence gap "+h+" is too large.");else for(--h;0<=h;h--){var k=d.segments[h];if(k&&"undefined"!==typeof k.start){g.syncInfo={mediaSequence:d.mediaSequence+h,time:k.start};this.logger_("playlist refresh sync: [time:"+g.syncInfo.time+","+(" mediaSequence: "+g.syncInfo.mediaSequence+"]"));
this.trigger("syncinfoupdate");break}}};d.setDateTimeMappingForStart=function(d){this.timelineToDatetimeMappings={};if(d.segments&&d.segments.length&&d.segments[0].dateTimeObject){d=d.segments[0];var g=d.dateTimeObject.getTime()/1E3;this.timelineToDatetimeMappings[d.timeline]=-g}};d.saveSegmentTimingInfo=function(d){var g=d.segmentInfo;d=d.shouldSaveTimelineMapping;var h=this.calculateSegmentTimeMapping_(g,g.timingInfo,d),k=g.segment;h&&(this.saveDiscontinuitySyncInfo_(g),g.playlist.syncInfo||(g.playlist.syncInfo=
{mediaSequence:g.playlist.mediaSequence+g.mediaIndex,time:k.start}));g=k.dateTimeObject;k.discontinuity&&d&&g&&(this.timelineToDatetimeMappings[k.timeline]=-(g.getTime()/1E3))};d.timestampOffsetForTimeline=function(d){return"undefined"===typeof this.timelines[d]?null:this.timelines[d].time};d.mappingForTimeline;d.calculateSegmentTimeMapping_=function(d,g,k){var h=d.segment,l=d.part,u=this.timelines[d.timeline];
if("number"===typeof d.timestampOffset)u={time:d.startOfSegment,mapping:d.startOfSegment-g.start},k&&(this.timelines[d.timeline]=u,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+d.timeline+": "+("[time: "+u.time+"] [mapping: "+u.mapping+"]"))),d=d.startOfSegment,g=g.end+u.mapping;else if(u)d=g.start+u.mapping,g=g.end+u.mapping;else return!1;l&&(l.start=d,l.end=g);if(!h.start||d<h.start)h.start=d;h.end=g;return!0};d.saveDiscontinuitySyncInfo_=function(d){var g=d.playlist,
h=d.segment;if(h.discontinuity)this.discontinuities[h.timeline]={time:h.start,accuracy:0};else if(g.discontinuityStarts&&g.discontinuityStarts.length)for(var k=0;k<g.discontinuityStarts.length;k++){var l=g.discontinuityStarts[k],m=g.discontinuitySequence+k+1,q=l-d.mediaIndex,r=Math.abs(q);if(!this.discontinuities[m]||this.discontinuities[m].accuracy>r)l=0>q?h.start-zc({defaultDuration:g.targetDuration,durationList:g.segments,startIndex:d.mediaIndex,endIndex:l}):h.end+zc({defaultDuration:g.targetDuration,
durationList:g.segments,startIndex:d.mediaIndex+1,endIndex:l}),this.discontinuities[m]={time:l,accuracy:r}}};d.dispose;return l}(w.EventTarget),kn=function(k){function l(){var d=k.call(this)||this;d.pendingTimelineChanges_={};d.lastTimelineChanges_={};return d}F(l,k);var d=l.prototype;d.clearPendingTimelineChange;d.pendingTimelineChange=function(d){var g=d.type,h=
d.from;d=d.to;"number"===typeof h&&"number"===typeof d&&(this.pendingTimelineChanges_[g]={type:g,from:h,to:d},this.trigger("pendingtimelinechange"));return this.pendingTimelineChanges_[g]};d.lastTimelineChange=function(d){var g=d.type,h=d.from;d=d.to;"number"===typeof h&&"number"===typeof d&&(this.lastTimelineChanges_[g]={type:g,from:h,to:d},delete this.pendingTimelineChanges_[g],this.trigger("timelinechange"));return this.lastTimelineChanges_[g]};d.dispose;return l}(w.EventTarget),ln=Ri(Si(function()var l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},d=k(function(d)d.exports;d.exports["default"]=d.exports;d.exports.__esModule=!0}),h=k(function(d){function g(h,k){d.exports=g=Object.setPrototypeOf|;d.exports["default"]=d.exports;d.exports.__esModule=!0;return g(h,k)}d.exports=g;d.exports["default"]=d.exports;d.exports.__esModule=!0}),g=k(function(d){d.exports=function(d,
g){d.prototype=Object.create(g.prototype);d.prototype.constructor=d;h(d,g)};d.exports["default"]=d.exports;d.exports.__esModule=!0}),u=function()var g=d.prototype;g.on;g.off=function(d,g){if(!this.listeners[d])return!1;g=this.listeners[d].indexOf(g);this.listeners[d]=this.listeners[d].slice(0);this.listeners[d].splice(g,1);return-1<g};g.trigger=function(d){var g=this.listeners[d];if(g)if(2===
arguments.length)for(var h=g.length,k=0;k<h;++k)g[k].call(this,arguments[1]);else{h=Array.prototype.slice.call(arguments,1);k=g.length;for(var l=0;l<k;++l)g[l].apply(this,h)}};g.dispose;g.pipe;return d}(),m=null,v=function(){function d(d){if(!m){var g=[[[],[],[],[],[]],[[],[],[],[],[]]],h=g[0],k=g[1],l=h[4],u=k[4],v,q,z,r=[],B=[],w;for(v=0;256>v;v++)B[(r[v]=v<<1^283*(v>>7))^v]=v;for(q=z=0;!l[q];q^=w||1,z=B[z]||1){var x=
z^z<<1^z<<2^z<<3^z<<4;x=x>>8^x&255^99;l[q]=x;u[x]=q;var J=r[v=r[w=r[q]]];var G=16843009*J^65537*v^257*w^16843008*q;J=257*r[x]^16843008*x;for(v=0;4>v;v++)h[v][q]=J=J<<24^J>>>8,k[v][x]=G=G<<24^G>>>8}for(v=0;5>v;v++)h[v]=h[v].slice(0),k[v]=k[v].slice(0);m=g}this._tables=[[m[0][0].slice(),m[0][1].slice(),m[0][2].slice(),m[0][3].slice(),m[0][4].slice()],[m[1][0].slice(),m[1][1].slice(),m[1][2].slice(),m[1][3].slice(),m[1][4].slice()]];g=this._tables[0][4];h=this._tables[1];l=d.length;u=1;if(4!==l&&6!==
l&&8!==l)throw Error("Invalid aes key size");q=d.slice(0);z=[];this._key=[q,z];for(d=l;d<4*l+28;d++){k=q[d-1];if(0===d%l||8===l&&4===d%l)k=g[k>>>24]<<24^g[k>>16&255]<<16^g[k>>8&255]<<8^g[k&255],0===d%l&&(k=k<<8^k>>>24^u<<24,u=u<<1^283*(u>>7));q[d]=q[d-l]^k}for(l=0;d;l++,d--)k=q[l&3?d:d-4],z[l]=4>=d||4>l?k:h[0][g[k>>>24]]^h[1][g[k>>16&255]]^h[2][g[k>>8&255]]^h[3][g[k&255]]}d.prototype.decrypt=function(d,g,k,h,l,u){var m=this._key[1];d^=m[0];h^=m[1];k^=m[2];g^=m[3];var v=m.length/4-2,q,z=4;var r=this._tables[1];
var B=r[0],w=r[1],x=r[2],J=r[3],G=r[4];for(q=0;q<v;q++){r=B[d>>>24]^w[h>>16&255]^x[k>>8&255]^J[g&255]^m[z];var C=B[h>>>24]^w[k>>16&255]^x[g>>8&255]^J[d&255]^m[z+1];var A=B[k>>>24]^w[g>>16&255]^x[d>>8&255]^J[h&255]^m[z+2];g=B[g>>>24]^w[d>>16&255]^x[h>>8&255]^J[k&255]^m[z+3];z+=4;d=r;h=C;k=A}for(q=0;4>q;q++)l[(3&-q)+u]=G[d>>>24]<<24^G[h>>16&255]<<16^G[k>>8&255]<<8^G[g&255]^m[z++],r=d,d=h,h=k,k=g,g=r};return d}(),q=function(d){function k(){var g=d.call(this,u)||this;g.jobs=[];g.delay=1;g.timeout_=null;
return g}g(k,d);var h=k.prototype;h.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};h.push;return k}(u),r,w=function(){function g(d,k,h,l){var m=g.STEP,u=new Int32Array(d.buffer),v=new Uint8Array(d.byteLength);d=0;this.asyncStream_=new q;this.asyncStream_.push(this.decryptChunk_(u.subarray(d,
d+m),k,h,v));for(d=m;d<u.length;d+=m)h=new Uint32Array([r(u[d-4]),r(u[d-3]),r(u[d-2]),r(u[d-1])]),this.asyncStream_.push(this.decryptChunk_(u.subarray(d,d+m),k,h,v));this.asyncStream_.push)}g.prototype.decryptChunk_=function(d,g,k,h){return function(){var l=new Int32Array(d.buffer,d.byteOffset,d.byteLength>>2),m=new v(Array.prototype.slice.call(g)),u=new Uint8Array(d.byteLength),q=new Int32Array(u.buffer),z;var B=k[0];var w=k[1];var x=
k[2];var J=k[3];for(z=0;z<l.length;z+=4){var C=r(l[z]);var G=r(l[z+1]);var A=r(l[z+2]);var L=r(l[z+3]);m.decrypt(C,G,A,L,q,z);q[z]=r(q[z]^B);q[z+1]=r(q[z+1]^w);q[z+2]=r(q[z+2]^x);q[z+3]=r(q[z+3]^J);B=C;w=G;x=A;J=L}h.set(u,d.byteOffset)}};d(g,null,[{key:"STEP",get}]);return g}();l=("undefined"!==typeof window?window:"undefined"!==typeof l?l:"undefined"!==typeof self?self:{}).BigInt||Number;l("0x1");l("0x100");l("0x10000");l("0x1000000");l("0x100000000");l("0x10000000000");l("0x1000000000000");
l("0x100000000000000");l("0x10000000000000000");var x=function(d){var g={};Object.keys(d).forEach(function(k){var h=d[k];var l="function"===ArrayBuffer.isView?ArrayBuffer.isView(h):h&&h.buffer instanceof ArrayBuffer;g[k]=l?{bytes:h.buffer,byteOffset:h.byteOffset,byteLength:h.byteLength}:h});return g};self.onmessage=function(d){var g=d.data;d=new Uint8Array(g.encrypted.bytes,g.encrypted.byteOffset,g.encrypted.byteLength);var k=new Uint32Array(g.key.bytes,g.key.byteOffset,g.key.byteLength/4),h=new Uint32Array(g.iv.bytes,
g.iv.byteOffset,g.iv.byteLength/4);new w(d,k,h)}})),mn=Qi(ln),Ad=function(k,l){k.abort();k.pause();l&&l.activePlaylistLoader&&(l.activePlaylistLoader.pause(),l.activePlaylistLoader=null)},nn=function(k,l){return function(){var d=l.segmentLoaders,h=d[k],g=d.main;d=l.mediaTypes[k];var m=d.activeTrack(),q=d.getActiveGroup(),v=d.activePlaylistLoader,r=d.lastGroup_;q&&r&&q.id===r.id||(d.lastGroup_=q,d.lastTrack_=m,Ad(h,d),q&&
!q.isMasterPlaylist&&(q.playlistLoader?(h.resyncLoader(),h=q.playlistLoader,d.activePlaylistLoader=h,h.load()):v&&g.resetEverything()))}},on,pn=function(k,l){return function(){var d=l.masterPlaylistLoader,h=l.segmentLoaders,g=h[k],m=h.main;h=l.mediaTypes[k];var q=h.activeTrack(),v=h.getActiveGroup(),r=h.activePlaylistLoader,w=h.lastTrack_;if(!w||!q||w.id!==q.id)if(h.lastGroup_=v,h.lastTrack_=
q,Ad(g,h),v)if(v.isMasterPlaylist)q&&w&&q.id!==w.id&&(g=l.vhs.masterPlaylistController_,v=g.selectPlaylist(),g.media()!==v&&(h.logger_("track change. Switching master audio from "+w.id+" to "+q.id),d.pause(),m.resetEverything(),g.fastQualityChange_(v)));else{if("AUDIO"===k){if(!v.playlistLoader){m.setAudio(!0);m.resetEverything();return}g.setAudio(!0);m.setAudio(!1)}r===v.playlistLoader?(d=v.playlistLoader,h.activePlaylistLoader=d,d.load()):(g.track&&g.track(q),g.resetEverything(),d=v.playlistLoader,
h.activePlaylistLoader=d,d.load())}}},Bd={AUDIO:function(k,l){return function(){var d=l.mediaTypes[k],h=l.blacklistCurrentPlaylist;Ad(l.segmentLoaders[k],d);var g=d.activeTrack(),m=d.activeGroup();m=(m.filter)[0]||m[0]).id;m=d.tracks[m];if(g===m)h({message:"Problem encountered loading the default audio track."});else{w.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var q in d.tracks)d.tracks[q].enabled=d.tracks[q]===
m;d.onTrackChanged()}}},SUBTITLES:function(k,l){return function(){var d=l.segmentLoaders[k],h=l.mediaTypes[k];w.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");Ad(d,h);if(d=h.activeTrack())d.mode="disabled";h.onTrackChanged()}}},pj={AUDIO,SUBTITLES},qn={AUDIO:function(k,l){var d=l.vhs,h=l.sourceType,g=l.segmentLoaders[k],m=l.requestOptions,q=
l.master.mediaGroups,v=l.mediaTypes[k],r=v.groups,x=v.tracks;v=v.logger_;var C=l.masterPlaylistLoader,A=Ac(C.master);q[k]&&0!==Object.keys(q[k]).length||(q[k]={main:{"default":{"default":!0}}},A&&(q[k].main["default"].playlists=C.master.playlists));for(var L in q[k]){r[L]||(r[L]=[]);for(var G in q[k][L]){var H=q[k][L][G];if(A){v("AUDIO group '"+L+"' label '"+G+"' is a master playlist");H.isMasterPlaylist=!0;var N=null}else N="vhs-json"===h&&H.playlists?new Yb(H.playlists[0],d,m):H.resolvedUri?new Yb(H.resolvedUri,
d,m):H.playlists&&"dash"===h?new pf(H.playlists[0],d,m,C):null;H=w.mergeOptions({id:G,playlistLoader:N},H);pj[k](k,H.playlistLoader,l);r[L].push(H);if("undefined"===typeof x[G]){N=w.AudioTrack;var D=G,F=H["default"]?"main":"alternative";H.characteristics&&0<=H.characteristics.indexOf("public.accessibility.describes-video")&&(F="main-desc");H=new N({id:D,kind:F,enabled:!1,language:H.language,"default":H["default"],label:G});x[G]=H}}}g.on("error",Bd[k](k,l))},SUBTITLES:function(k,l){var d=l.tech,h=
l.vhs,g=l.sourceType,m=l.segmentLoaders[k],q=l.requestOptions,v=l.master.mediaGroups,r=l.mediaTypes[k],x=r.groups;r=r.tracks;var C=l.masterPlaylistLoader,A;for(A in v[k]){x[A]||(x[A]=[]);for(var L in v[k][A])if(!v[k][A][L].forced){var G=v[k][A][L],H=void 0;if("hls"===g)H=new Yb(G.resolvedUri,h,q);else if("dash"===g){if(!G.playlists.filter).length)return;H=new pf(G.playlists[0],h,q,C)}else"vhs-json"===g&&(H=new Yb(G.playlists?G.playlists[0]:G.resolvedUri,
h,q));G=w.mergeOptions({id:L,playlistLoader:H},G);pj[k](k,G.playlistLoader,l);x[A].push(G);"undefined"===typeof r[L]&&(G=d.addRemoteTextTrack({id:L,kind:"subtitles","default":G["default"]&&G.autoselect,language:G.language,label:L},!1).track,r[L]=G)}}m.on("error",Bd[k](k,l))},"CLOSED-CAPTIONS":function(k,l){var d=l.tech,h=l.master.mediaGroups,g=l.mediaTypes[k];l=g.groups;g=g.tracks;for(var m in h[k]){l[m]||(l[m]=[]);for(var q in h[k][m]){var v=h[k][m][q];if(/^(?:CC|SERVICE)/.test(v.instreamId)){var r=
d.options_.vhs&&d.options_.vhs.captionServices||{},x={label:q,language:v.language,instreamId:v.instreamId,"default":v["default"]&&v.autoselect};r[x.instreamId]&&(x=w.mergeOptions(x,r[x.instreamId]));void 0===x["default"]&&delete x["default"];l[m].push(w.mergeOptions({id:q},v));"undefined"===typeof g[q]&&(v=d.addRemoteTextTrack({id:x.instreamId,kind:"captions","default":x["default"],language:x.language,label:x.label},!1).track,g[q]=v)}}}}},rn,sn=function(l,d){return function(h){var g=d.mediaTypes[l].groups,m=d.masterPlaylistLoader.media();if(!m)return null;var q=null;m.attributes[l]&&(q=g[m.attributes[l]]);var v=Object.keys(g);if(!q)if("AUDIO"===l&&1<v.length&&Ac(d.master))for(var r=0;r<v.length;r++){var w=g[v[r]];if(rn(w,m)){q=w;break}}else g.main?q=g.main:1===v.length&&(q=g[v[0]]);return"undefined"===typeof h?q:null!==h&&q?q.filter(function(d){return d.id===h.id})[0]||null:null}},
tn={AUDIO:function(l,d){return function(){var h=d.mediaTypes[l].tracks,g;for(g in h)if(h[g].enabled)return h[g];return null}},SUBTITLES:function(l,d){return function(){var h=d.mediaTypes[l].tracks,g;for(g in h)if("showing"===h[g].mode||"hidden"===h[g].mode)return h[g];return null}}},un,vn=function(l){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach);var d=l.mediaTypes,
h=l.masterPlaylistLoader,g=l.tech,m=l.vhs,q=l.segmentLoaders,v=q.AUDIO;q=q.main;["AUDIO","SUBTITLES"].forEach);var r=d.AUDIO.activeGroup();r&&(r=(r.filter(function(d){return d["default"]})[0]||r[0]).id,d.AUDIO.tracks[r].enabled=!0,d.AUDIO.onGroupChanged(),d.AUDIO.onTrackChanged(),d.AUDIO.getActiveGroup().playlistLoader?(q.setAudio(!1),
v.setAudio(!0)):q.setAudio(!0));h.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(g){return d[g].onGroupChanged()})});h.on("mediachanging");var w;g.audioTracks().addEventListener("change",w);g.remoteTextTracks().addEventListener("change",d.SUBTITLES.onTrackChanged);
m.on("dispose");g.clearTracks("audio");for(var x in d.AUDIO.tracks)g.audioTracks().addTrack(d.AUDIO.tracks[x])},wn,ab,xn="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred mediaAppends".split(" "),yn,zn=function(l){var d=l.currentPlaylist,h=l.buffered,g=l.currentTime,m=l.nextPlaylist,q=l.bufferLowWaterLine,v=l.bufferHighWaterLine,r=l.duration,x=l.experimentalBufferBasedABR;l=l.log;if(!m)return w.log.warn("We received no playlist to switch to. Please check your stream."),
!1;var C="allowing switch "+(d&&d.id||"null")+" -\x3e "+m.id;if(!d)return l(C+" as current playlist is not set"),!0;if(m.id===d.id)return!1;var A=!!Xb(h,g).length;if(!d.endList){if(!A&&"number"===typeof d.partTargetDuration)return l("not "+C+" as current playlist is live llhls, but currentTime isn't in buffered."),!1;l(C+" as current playlist is live");return!0}h=ef(h,g);g=x?va.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:va.MAX_BUFFER_LOW_WATER_LINE;if(r<g)return l(C+" as duration \x3c max low water line ("+
r+" \x3c "+g+")"),!0;m=m.attributes.BANDWIDTH;d=d.attributes.BANDWIDTH;if(m<d&&(!x||h<v))return q=C+" as next bandwidth \x3c current bandwidth ("+m+" \x3c "+d+")",x&&(q+=" and forwardBuffer \x3c bufferHighWaterLine ("+h+" \x3c "+v+")"),l(q),!0;if((!x||m>d)&&h>=q)return v=C+" as forwardBuffer \x3e\x3d bufferLowWaterLine ("+h+" \x3e\x3d "+q+")",x&&(v+=" and next bandwidth \x3e current bandwidth ("+m+" \x3e "+d+")"),l(v),!0;l("not "+C+" as no switching criteria met");return!1},An=function(l){function d(d){var g=
l.call(this)||this;var h=d.src,m=d.handleManifestRedirects,q=d.withCredentials,r=d.tech,x=d.bandwidth,C=d.externVhs,A=d.useCueTags,L=d.blacklistDuration,H=d.enableLowInitialPlaylist,N=d.sourceType,D=d.cacheEncryptionKeys,F=d.experimentalBufferBasedABR,Z=d.experimentalLeastPixelDiffSelector,Q=d.captionServices;if(!h)throw Error("A non-empty playlist URL or JSON manifest string is required");var E=d.maxPlaylistRetries;if(null===E||"undefined"===typeof E)E=Infinity;ab=C;g.experimentalBufferBasedABR=
!!F;g.experimentalLeastPixelDiffSelector=!!Z;g.withCredentials=q;g.tech_=r;g.vhs_=r.vhs;g.sourceType_=N;g.useCueTags_=A;g.blacklistDuration=L;g.maxPlaylistRetries=E;g.enableLowInitialPlaylist=H;g.useCueTags_&&(g.cueTagsTrack_=g.tech_.addTextTrack("metadata","ad-cues"),g.cueTagsTrack_.inBandMetadataTrackDispatchType="");g.requestOptions_={withCredentials:q,handleManifestRedirects:m,maxPlaylistRetries:E,timeout:null};g.on("error",g.pauseLoading);g.mediaTypes_=wn();g.mediaSource=new window.MediaSource;
g.handleDurationChange_=g.handleDurationChange_.bind(O(g));g.handleSourceOpen_=g.handleSourceOpen_.bind(O(g));g.handleSourceEnded_=g.handleSourceEnded_.bind(O(g));g.mediaSource.addEventListener("durationchange",g.handleDurationChange_);g.mediaSource.addEventListener("sourceopen",g.handleSourceOpen_);g.mediaSource.addEventListener("sourceended",g.handleSourceEnded_);g.seekable_=w.createTimeRanges();g.hasPlayed_=!1;g.syncController_=new jn(d);g.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",
label:"segment-metadata"},!1).track;g.decrypter_=new mn;g.sourceUpdater_=new mj(g.mediaSource);g.inbandTextTracks_={};g.timelineChangeController_=new kn;m={vhs:g.vhs_,parse708captions:d.parse708captions,useDtsForTimestampOffset:d.useDtsForTimestampOffset,captionServices:Q,mediaSource:g.mediaSource,currentTime:g.tech_.currentTime.bind(g.tech_),seekable:function(){return g.seekable()},seeking:function(){return g.tech_.seeking()},duration:function(){return g.duration()},hasPlayed:function(){return g.hasPlayed_},
goalBufferLength:function(){return g.goalBufferLength()},bandwidth:x,syncController:g.syncController_,decrypter:g.decrypter_,sourceType:g.sourceType_,inbandTextTracks:g.inbandTextTracks_,cacheEncryptionKeys:D,sourceUpdater:g.sourceUpdater_,timelineChangeController:g.timelineChangeController_,experimentalExactManifestTimings:d.experimentalExactManifestTimings};g.masterPlaylistLoader_="dash"===g.sourceType_?new pf(h,g.vhs_,g.requestOptions_):new Yb(h,g.vhs_,g.requestOptions_);g.setupMasterPlaylistLoaderListeners_();
g.mainSegmentLoader_=new wf(w.mergeOptions(m,{segmentMetadataTrack:g.segmentMetadataTrack_,loaderType:"main"}),d);g.audioSegmentLoader_=new wf(w.mergeOptions(m,{loaderType:"audio"}),d);g.subtitleSegmentLoader_=new hn(w.mergeOptions(m,{loaderType:"vtt",featuresNativeTextTracks:g.tech_.featuresNativeTextTracks}),d);g.setupSegmentLoaderListeners_();g.experimentalBufferBasedABR&&(g.masterPlaylistLoader_.one("loadedplaylist",function(){return g.startABRTimer_()}),g.tech_.on("pause",function(){return g.stopABRTimer_()}),
g.tech_.on("play",function(){return g.startABRTimer_()}));xn.forEach);g.logger_=Za("MPC");g.triggeredFmp4Usage=!1;"none"===g.tech_.preload()?(g.loadOnPlay_,g.tech_.one("play",g.loadOnPlay_)):g.masterPlaylistLoader_.load();g.timeToLoadedData__=-1;g.mainAppendsToLoadedData__=-1;g.audioAppendsToLoadedData__=-1;d="none"===g.tech_.preload()?"play":"loadstart";g.tech_.one(d);return g}F(d,l);var h=d.prototype;h.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__};h.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__};h.appendsToLoadedData_;
h.timeToLoadedData_=function(){return this.timeToLoadedData__};h.checkABR_;h.switchMedia_=function(d,h,l){var g=this.media();g=g&&(g.id||g.uri);var m=d.id||d.uri;g&&g!==m&&(this.logger_("switch media "+g+" -\x3e "+m+" from "+h),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+h}));this.masterPlaylistLoader_.media(d,l)};h.startABRTimer_;h.stopABRTimer_;h.getAudioTrackPlaylists_=function(){var d=this.master(),h=d&&d.playlists||[];if(!d||!d.mediaGroups||!d.mediaGroups.AUDIO)return h;var l=d.mediaGroups.AUDIO,m=Object.keys(l);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)var q=this.mediaTypes_.AUDIO.activeTrack();else{m=l.main||m.length&&l[m[0]];for(var r in m)if(m[r]["default"]){q=
{label:r};break}}if(!q)return h;r=[];for(var w in l)if(l[w][q.label])if(m=l[w][q.label],m.playlists&&m.playlists.length)r.push.apply(r,m.playlists);else if(m.uri)r.push(m);else if(d.playlists.length)for(m=0;m<d.playlists.length;m++){var x=d.playlists[m];x.attributes&&x.attributes.AUDIO&&x.attributes.AUDIO===w&&r.push(x)}return r.length?r:h};h.setupMasterPlaylistLoaderListeners_=function(){var d=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var g=d.masterPlaylistLoader_.media(),h=
1500*g.targetDuration;jf(d.masterPlaylistLoader_.master,d.masterPlaylistLoader_.media())?d.requestOptions_.timeout=0:d.requestOptions_.timeout=h;g.endList&&"none"!==d.tech_.preload()&&(d.mainSegmentLoader_.playlist(g,d.requestOptions_),d.mainSegmentLoader_.load());vn({sourceType:d.sourceType_,segmentLoaders:{AUDIO:d.audioSegmentLoader_,SUBTITLES:d.subtitleSegmentLoader_,main:d.mainSegmentLoader_},tech:d.tech_,requestOptions:d.requestOptions_,masterPlaylistLoader:d.masterPlaylistLoader_,vhs:d.vhs_,
master:d.master(),mediaTypes:d.mediaTypes_,blacklistCurrentPlaylist:d.blacklistCurrentPlaylist.bind(d)});d.triggerPresenceUsage_(d.master(),g);d.setupFirstPlay();if(!d.mediaTypes_.AUDIO.activePlaylistLoader||d.mediaTypes_.AUDIO.activePlaylistLoader.media())d.trigger("selectedinitialmedia");else d.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){d.trigger("selectedinitialmedia")})});this.masterPlaylistLoader_.on("loadedplaylist",function(){d.loadOnPlay_&&d.tech_.off("play",d.loadOnPlay_);
var g=d.masterPlaylistLoader_.media();if(!g){d.excludeUnsupportedVariants_();var h;d.enableLowInitialPlaylist&&(h=d.selectInitialPlaylist());h||(h=d.selectPlaylist());if(!h||!d.shouldSwitchToMedia_(h))return;d.initialMedia_=h;d.switchMedia_(d.initialMedia_,"initial");if("vhs-json"!==d.sourceType_||!d.initialMedia_.segments)return;g=d.initialMedia_}d.handleUpdatedMediaPlaylist(g)});this.masterPlaylistLoader_.on("error");this.masterPlaylistLoader_.on("mediachanging",
function(){d.mainSegmentLoader_.abort();d.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var g=d.masterPlaylistLoader_.media(),h=1500*g.targetDuration;jf(d.masterPlaylistLoader_.master,d.masterPlaylistLoader_.media())?d.requestOptions_.timeout=0:d.requestOptions_.timeout=h;d.mainSegmentLoader_.playlist(g,d.requestOptions_);d.mainSegmentLoader_.load();d.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged");this.masterPlaylistLoader_.on("renditiondisabled",function(){d.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"});d.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){d.tech_.trigger({type:"usage",
name:"vhs-rendition-enabled"});d.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})};h.handleUpdatedMediaPlaylist=function(d){this.useCueTags_&&this.updateAdCues_(d);this.mainSegmentLoader_.playlist(d,this.requestOptions_);this.updateDuration(!d.endList);this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())};h.triggerPresenceUsage_=function(d,h){d=d.mediaGroups||{};var g=!0,l=Object.keys(d.AUDIO),m;for(m in d.AUDIO)for(var u in d.AUDIO[m])d.AUDIO[m][u].uri||
(g=!1);g&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"}));Object.keys(d.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"}));ab.Playlist.isAes(h)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"}));l.length&&1<Object.keys(d.AUDIO[l[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",
name:"hls-alternate-audio"}));this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))};h.shouldSwitchToMedia_;h.setupSegmentLoaderListeners_=function(){var d=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate"),this.mainSegmentLoader_.on("progress",function(){d.trigger("progress")}));this.mainSegmentLoader_.on("error");
this.mainSegmentLoader_.on("appenderror",function(){d.error=d.mainSegmentLoader_.error_;d.trigger("error")});this.mainSegmentLoader_.on("syncinfoupdate",function(){d.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset");this.audioSegmentLoader_.on("syncinfoupdate",function(){d.onSyncInfoUpdate_()});this.audioSegmentLoader_.on("appenderror");this.mainSegmentLoader_.on("ended",function(){d.logger_("main segment loader ended");d.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort");var h;this.mainSegmentLoader_.on("trackinfo",h);this.audioSegmentLoader_.on("trackinfo",h);this.mainSegmentLoader_.on("fmp4",function(){d.triggeredFmp4Usage||(d.tech_.trigger({type:"usage",name:"vhs-fmp4"}),d.tech_.trigger({type:"usage",name:"hls-fmp4"}),d.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("fmp4");this.audioSegmentLoader_.on("ended")};h.mediaSecondsLoaded_;h.load;h.smoothQualityChange_=;h.fastQualityChange_=function(d){var g=this;void 0===d&&(d=this.selectPlaylist());d===this.masterPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(d,"fast-quality"),this.mainSegmentLoader_.resetEverything))};
h.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_&&this.load();var d=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<d.start(0))return this.tech_.setCurrentTime(d.end(d.length-1))}};h.setupFirstPlay=function(){var d=this,h=this.masterPlaylistLoader_.media();if(!h||this.tech_.paused()||this.hasPlayed_)return!1;if(!h.endList){var l=this.seekable();if(!l.length)return!1;if(w.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",),!1;this.trigger("firstplay");this.tech_.setCurrentTime(l.end(0))}this.hasPlayed_=!0;this.load();return!0};h.handleSourceOpen_=function(){this.tryToCreateSourceBuffers_();if(this.tech_.autoplay()){var d=this.tech_.play();"undefined"!==typeof d&&"function"===typeof d.then&&d.then(null,function(d){})}this.trigger("sourceopen")};h.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var d=this.inbandTextTracks_.metadataTrack_.cues;
if(d&&d.length){var h=this.duration();d[d.length-1].endTime=isNaN(h)||Infinity===Math.abs(h)?Number.MAX_VALUE:h}}};h.handleDurationChange_=function(){this.tech_.trigger("durationchange")};h.onEndOfStream;h.stuckAtPlaylistEnd_=
function(d){if(!this.seekable().length)return!1;var g=this.syncController_.getExpiredTime(d,this.duration());if(null===g)return!1;d=ab.Playlist.playlistEnd(d,g);g=this.tech_.currentTime();var h=this.tech_.buffered();if(!h.length)return d-g<=$a;h=h.end(h.length-1);return h-g<=$a&&d-h<=$a};h.blacklistCurrentPlaylist=function(d,h){void 0===d&&(d={});var g=d.playlist||this.masterPlaylistLoader_.media();h=h||d.blacklistDuration||this.blacklistDuration;if(g){g.playlistErrors_++;var l=this.masterPlaylistLoader_.master.playlists,
m=l.filter(sd);m=1===m.length&&m[0]===g;if(1===l.length&&Infinity!==h)return w.log.warn("Problem encountered with playlist "+g.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(m);if(m){var u=!1;l.forEach(function(d){if(d!==g){var h=d.excludeUntil;"undefined"!==typeof h&&Infinity!==h&&(u=!0,delete d.excludeUntil)}});u&&(w.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),
this.tech_.trigger("retryplaylist"))}h=g.playlistErrors_>this.maxPlaylistRetries?Infinity:Date.now()+1E3*h;g.excludeUntil=h;d.reason&&(g.lastExcludeReason_=d.reason);this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"});this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});if(h=this.selectPlaylist())return(d.internal?this.logger_:w.log.warn)((d.internal?"Internal problem":"Problem")+" encountered with playlist "+g.id+"."+((d.message?
" "+d.message:"")+" Switching to playlist "+h.id+".")),h.attributes.AUDIO!==g.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),h.attributes.SUBTITLES!==g.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),d=h.targetDuration/2*1E3||5E3,d="number"===typeof h.lastRequest&&Date.now()-h.lastRequest<=d,this.switchMedia_(h,"exclude",m||d);this.error="Playback cannot continue. No available working or supported playlists.";
this.trigger("error")}else this.error=d,"open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network")};h.pauseLoading;h.delegateLoaders_=function(d,h){var g=this,l=[],m="all"===d;(m||"main"===d)&&l.push(this.masterPlaylistLoader_);var u=[];(m||"audio"===d)&&u.push("AUDIO");if(m||"subtitle"===d)u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES");u.forEach);["main","audio","subtitle"].forEach);l.forEach(function(d){return h.forEach(function(g){if("function"===typeof d[g])d[g]()})})};h.setCurrentTime=function(d){var g=Xb(this.tech_.buffered(),d);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(g&&g.length)return d;this.mainSegmentLoader_.resetEverything();
this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());this.load()};h.duration;
h.seekable=function(){return this.seekable_};h.onSyncInfoUpdate_=function(){if(this.masterPlaylistLoader_){var d=this.masterPlaylistLoader_.media();if(d){var h=this.syncController_.getExpiredTime(d,this.duration());if(null!==h){var l=this.masterPlaylistLoader_.master,m=ab.Playlist.seekable(d,h,ab.Playlist.liveEdgeDelay(l,d));if(0!==m.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){d=this.mediaTypes_.AUDIO.activePlaylistLoader.media();h=this.syncController_.getExpiredTime(d,this.duration());
if(null===h)return;var q=ab.Playlist.seekable(d,h,ab.Playlist.liveEdgeDelay(l,d));if(0===q.length)return}if(this.seekable_&&this.seekable_.length){var r=this.seekable_.end(0);var x=this.seekable_.start(0)}q?q.start(0)>m.end(0)||m.start(0)>q.end(0)?this.seekable_=m:this.seekable_=w.createTimeRanges([[q.start(0)>m.start(0)?q.start(0):m.start(0),q.end(0)<m.end(0)?q.end(0):m.end(0)]]):this.seekable_=m;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===x||(this.logger_("seekable updated ["+
qi(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}};h.updateDuration=function(d){this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null);if("open"!==this.mediaSource.readyState)this.updateDuration_=this.updateDuration.bind(this,d),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else if(d)d=this.seekable(),d.length&&(isNaN(this.mediaSource.duration)||this.mediaSource.duration<d.end(d.length-1))&&
this.sourceUpdater_.setDuration(d.end(d.length-1));else{d=this.tech_.buffered();var g=ab.Playlist.duration(this.masterPlaylistLoader_.media());0<d.length&&(g=Math.max(g,d.end(d.length-1)));this.mediaSource.duration!==g&&this.sourceUpdater_.setDuration(g)}};h.dispose=function(){var d=this;this.trigger("dispose");this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);["AUDIO","SUBTITLES"].forEach(function(g){g=
d.mediaTypes_[g].groups;for(var h in g)g[h].forEach)});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();this.sourceUpdater_.dispose();this.timelineChangeController_.dispose();this.stopABRTimer_();this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_);this.mediaSource.removeEventListener("sourceopen",
this.handleSourceOpen_);this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_);this.off()};h.master=function(){return this.masterPlaylistLoader_.master};h.media;h.areMediaTypesKnown_=function(){var d=!!this.mediaTypes_.AUDIO.activePlaylistLoader,h=!!this.mainSegmentLoader_.getCurrentMediaInfo_();d=d?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return h&&d?!0:!1};h.getCodecsOrExclude_=function(){var d=
this,h={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};h.video=h.main;var l=Cc(this.master(),this.media()),m={},q=!!this.mediaTypes_.AUDIO.activePlaylistLoader;h.main.hasVideo&&(m.video=l.video||h.main.videoCodec||"avc1.4d400d");h.main.isMuxed&&(m.video+=","+(l.audio||h.main.audioCodec||"mp4a.40.2"));if(h.main.hasAudio&&!h.main.isMuxed||h.audio.hasAudio||q)m.audio=l.audio||h.main.audioCodec||h.audio.audioCodec||"mp4a.40.2",h.audio.isFmp4=
h.main.hasAudio&&!h.main.isMuxed?h.main.isFmp4:h.audio.isFmp4;if(m.audio||m.video){var r={},w;["video","audio"].forEach(function(d){var g;if(g=m.hasOwnProperty(d))g=m[d],g=!(h[d].isFmp4?kd(g):Se(g));g&&(g=h[d].isFmp4?"browser":"muxer",r[g]=r[g]||[],r[g].push(m[d]),"audio"===d&&(w=g))});if(q&&w&&this.media().attributes.AUDIO){var x=this.media().attributes.AUDIO;this.master().playlists.forEach(function(g){(g.attributes&&g.attributes.AUDIO)===x&&g!==d.media()&&(g.excludeUntil=Infinity)});this.logger_("excluding audio group "+
x+" as "+w+' does not support codec(s): "'+m.audio+'"')}if(Object.keys(r).length)l=Object.keys(r).reduce,"")+".",this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:l,blacklistDuration:Infinity});else{if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var C=[];["video","audio"].forEach);if(C.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+C.join(", ")+".",blacklistDuration:Infinity,internal:!0});return}}return m}}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:Infinity})};h.tryToCreateSourceBuffers_=function(){if("open"===
this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var d=this.getCodecsOrExclude_();d&&(this.sourceUpdater_.createSourceBuffers(d),d=[d.video,d.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(d))}};h.excludeUnsupportedVariants_=function(){var d=this,h=this.master().playlists,l=[];Object.keys(h).forEach(function(g){g=h[g];if(-1===l.indexOf(g.id)){l.push(g.id);var m=Cc(d.master,g),u=[];!m.audio||Se(m.audio)||kd(m.audio)||u.push("audio codec "+
m.audio);!m.video||Se(m.video)||kd(m.video)||u.push("video codec "+m.video);m.text&&"stpp.ttml.im1t"===m.text&&u.push("text codec "+m.text);u.length&&(g.excludeUntil=Infinity,d.logger_("excluding "+g.id+" for unsupported: "+u.join(", ")))}})};h.excludeIncompatibleVariants_=function(d){var g=this,h=[],l=this.master().playlists;d=wd(jb(d));var m=dj(d),q=d.video&&jb(d.video)[0]||null,r=d.audio&&jb(d.audio)[0]||null;Object.keys(l).forEach(function(d){d=l[d];if(-1===h.indexOf(d.id)&&Infinity!==d.excludeUntil){h.push(d.id);
var u=[],v=Cc(g.masterPlaylistLoader_.master,d),w=dj(v);if(v.audio||v.video)w!==m&&u.push('codec count "'+w+'" !\x3d\x3d "'+m+'"'),g.sourceUpdater_.canChangeType()||(w=v.video&&jb(v.video)[0]||null,v=v.audio&&jb(v.audio)[0]||null,w&&q&&w.type.toLowerCase()!==q.type.toLowerCase()&&u.push('video codec "'+w.type+'" !\x3d\x3d "'+q.type+'"'),v&&r&&v.type.toLowerCase()!==r.type.toLowerCase()&&u.push('audio codec "'+v.type+'" !\x3d\x3d "'+r.type+'"')),u.length&&(d.excludeUntil=Infinity,g.logger_("blacklisting "+
d.id+": "+u.join(" \x26\x26 ")))}})};h.updateAdCues_=function(d){var g=0,h=this.seekable();h.length&&(g=h.start(0));h=this.cueTagsTrack_;void 0===g&&(g=0);if(d.segments)for(var l,m=0;m<d.segments.length;m++){var q=d.segments[m];if(!l)b:{l=g+q.duration/2;for(var r=h.cues,w=0;w<r.length;w++){var x=r[w];if(l>=x.adStartTime&&l<=x.adEndTime){l=x;break b}}l=null}if(l){if("cueIn"in q){l.endTime=g;l.adEndTime=g;g+=q.duration;l=null;continue}if(g<l.endTime){g+=q.duration;continue}l.endTime+=q.duration}else"cueOut"in
q&&(l=new window.VTTCue(g,g+q.duration,q.cueOut),l.adStartTime=g,l.adEndTime=g+parseFloat(q.cueOut),h.addCue(l)),"cueOutCont"in q&&(l=q.cueOutCont.split("/").map(parseFloat),r=l[0],w=l[1],l=new window.VTTCue(g,g+q.duration,""),l.adStartTime=g-r,l.adEndTime=l.adStartTime+w,h.addCue(l));g+=q.duration}};h.goalBufferLength=function(){var d=this.tech_.currentTime(),h=va.GOAL_BUFFER_LENGTH;return Math.min(h+d*va.GOAL_BUFFER_LENGTH_RATE,Math.max(h,va.MAX_GOAL_BUFFER_LENGTH))};h.bufferLowWaterLine=function(){var d=
this.tech_.currentTime(),h=va.BUFFER_LOW_WATER_LINE,l=Math.max(h,va.MAX_BUFFER_LOW_WATER_LINE),m=Math.max(h,va.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(h+d*va.BUFFER_LOW_WATER_LINE_RATE,this.experimentalBufferBasedABR?m:l)};h.bufferHighWaterLine=function(){return va.BUFFER_HIGH_WATER_LINE};return d}(w.EventTarget),Bn=function(l,d,h){return function(g){var m=l.master.playlists[d],q=hf(m),r=sd(m);if("undefined"===typeof g)return r;g?delete m.disabled:m.disabled=!0;g===r||q||(h(),g?l.trigger("renditionenabled"):
l.trigger("renditiondisabled"));return g}},Cn,Dn=function(l){l.representations},qj=["seeking","seeked","pause","playing","error"],En=function(){function l(d){var g=this;this.masterPlaylistController_=d.masterPlaylistController;this.tech_=d.tech;this.seekable=d.seekable;this.allowSeeksWithinUnsafeLiveWindow=d.allowSeeksWithinUnsafeLiveWindow;this.liveRangeSafeTimeDelta=d.liveRangeSafeTimeDelta;this.media=d.media;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=
this.lastRecordedTime=null;this.logger_=Za("PlaybackWatcher");this.logger_("initialize");var h=function(){return g.monitorCurrentTime_()},l=function(){return g.monitorCurrentTime_()},m=function(){return g.techWaiting_()},q=function(){return g.cancelTimer_()},r=this.masterPlaylistController_,w=["main","subtitle","audio"],x={};w.forEach);var C;this.seekingAppendCheck_;this.clearSeekingAppendCheck_;this.watchForBadSeeking_;this.tech_.on("seeked",
this.clearSeekingAppendCheck_);this.tech_.on("seeking",this.watchForBadSeeking_);this.tech_.on("waiting",m);this.tech_.on(qj,q);this.tech_.on("canplay",l);this.tech_.one("play",h);this.dispose}var d=l.prototype;d.monitorCurrentTime_;d.resetSegmentDownloads_=function(d){var g=this.masterPlaylistController_[d+
"SegmentLoader_"];0<this[d+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+d+" loader");this[d+"StalledDownloads_"]=0;this[d+"Buffered_"]=g.buffered_()};d.checkSegmentDownloads_=function(d){var g=this.masterPlaylistController_,h=g[d+"SegmentLoader_"],l=h.buffered_(),m=mm(this[d+"Buffered_"],l);this[d+"Buffered_"]=l;m?this.resetSegmentDownloads_(d):(this[d+"StalledDownloads_"]++,this.logger_("found #"+this[d+"StalledDownloads_"]+" "+d+" appends that did not increase buffer (possible stalled download)",
{playlistId:h.playlist_&&h.playlist_.id,buffered:Eb(l)}),10>this[d+"StalledDownloads_"]||(this.logger_(d+" loader stalled download exclusion"),this.resetSegmentDownloads_(d),this.tech_.trigger({type:"usage",name:"vhs-"+d+"-download-exclusion"}),"subtitle"!==d&&g.blacklistCurrentPlaylist({message:"Excessive "+d+" segment downloading detected."},Infinity)))};d.checkCurrentTime_;d.cancelTimer_=function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null};d.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var d=this.seekable(),g=this.tech_.currentTime(),
l;this.afterSeekableWindow_(d,g,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(l=d.end(d.length-1));this.beforeSeekableWindow_(d,g)&&(l=d.start(0),l+=l===d.end(0)?0:$a);if("undefined"!==typeof l)return this.logger_("Trying to seek outside of seekable at time "+g+" with "+("seekable range "+qi(d)+". Seeking to ")+(l+".")),this.tech_.setCurrentTime(l),!0;var m=this.masterPlaylistController_.sourceUpdater_;d=this.tech_.buffered();l=m.audioBuffer?m.audioBuffered():null;var q=m.videoBuffer?m.videoBuffered():
null;m=this.media();m=m.partTargetDuration?m.partTargetDuration:2*(m.targetDuration-pb);l=[l,q];for(q=0;q<l.length;q++)if(l[q]&&ef(l[q],g)<m)return!1;d=rd(d,g);if(0===d.length)return!1;l=d.start(0)+$a;this.logger_("Buffered region starts ("+d.start(0)+") "+(" just beyond seek point ("+g+"). Seeking to "+l+"."));this.tech_.setCurrentTime(l);return!0};d.waiting_=function(){if(!this.techWaiting_()){var d=this.tech_.currentTime(),g=this.tech_.buffered();g=Xb(g,d);g.length&&d+3<=g.end(0)&&(this.cancelTimer_(),
this.tech_.setCurrentTime(d),this.logger_("Stopped at "+d+" while inside a buffered region "+("["+g.start(0)+" -\x3e "+g.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}};d.techWaiting_=function(){var d=this.seekable(),g=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(d,g))return d=d.end(d.length-
1),this.logger_("Fell out of live window at time "+g+". Seeking to "+("live point (seekable end) "+d)),this.cancelTimer_(),this.tech_.setCurrentTime(d),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0;d=this.tech_.vhs.masterPlaylistController_.sourceUpdater_;var l=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:d.audioBuffered(),videoBuffered:d.videoBuffered(),currentTime:g}))return this.cancelTimer_(),this.tech_.setCurrentTime(g),
this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;d=rd(l,g);return 0<d.length?(l=d.start(0)-g,this.logger_("Stopped at "+g+", setting timer for "+l+", seeking "+("to "+d.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*l,g),!0):!1};d.afterSeekableWindow_=function(d,g,l,m){void 0===m&&(m=!1);if(!d.length)return!1;var h=d.end(d.length-1)+$a;!l.endList&&m&&(h=d.end(d.length-1)+3*l.targetDuration);
return g>h?!0:!1};d.beforeSeekableWindow_=function(d,g){return d.length&&0<d.start(0)&&g<d.start(0)-this.liveRangeSafeTimeDelta?!0:!1};d.videoUnderflow_=function(d){var g=d.videoBuffered,h=d.audioBuffered;d=d.currentTime;if(g){var l;if(g.length&&h.length){var m=Xb(g,d-3);g=Xb(g,d);h=Xb(h,d);h.length&&!g.length&&m.length&&(l={start:m.end(0),end:h.end(0)})}else rd(g,d).length||(l=this.gapFromVideoUnderflow_(g,d));return l?(this.logger_("Encountered a gap in video from "+l.start+" to "+l.end+". "+("Seeking to current time "+
d)),!0):!1}};d.skipTheGap_=function(d){var g=this.tech_.buffered(),h=this.tech_.currentTime();g=rd(g,h);this.cancelTimer_();0!==g.length&&h===d&&(this.logger_("skipTheGap_:","currentTime:",h,"scheduled currentTime:",d,"nextRange start:",g.start(0)),this.tech_.setCurrentTime(g.start(0)+pb),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))};d.gapFromVideoUnderflow_=function(d,g){if(2>d.length)d=w.createTimeRanges();else{for(var h=[],l=1;l<
d.length;l++){var m=d.end(l-1),q=d.start(l);h.push([m,q])}d=w.createTimeRanges(h)}for(h=0;h<d.length;h++)if(l=d.start(h),m=d.end(h),4>g-l&&2<g-l)return{start:l,end:m};return null};return l}(),Fn={errorInterval:30,getSource:function(l){var d=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return l(d)}},Gn=function g(d,h){var m=0,q=0,r=w.mergeOptions(Fn,h);d.ready);
var x=function(){q&&d.currentTime(q)},C=function(g){null!==g&&void 0!==g&&(q=Infinity!==d.duration()&&d.currentTime()||0,d.one("loadedmetadata",x),d.src(g),d.trigger({type:"usage",name:"vhs-error-reload"}),d.trigger({type:"usage",name:"hls-error-reload"}),d.play())},A=function(){if(Date.now()-m<1E3*r.errorInterval)d.trigger({type:"usage",name:"vhs-error-reload-canceled"}),d.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(r.getSource&&"function"===typeof r.getSource)return m=Date.now(),
r.getSource.call(d,C);w.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},L;d.on("error",A);d.on("dispose",L);d.reloadSourceOnError},Hn,na={PlaylistLoader:Yb,Playlist:Aa,utils:zm,STANDARD_PLAYLIST_SELECTOR:gj,INITIAL_PLAYLIST_SELECTOR,lastBandwidthSelector:gj,movingAverageBandwidthSelector:function(d){var h=-1,g=-1;if(0>d||1<d)throw Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var m=this.useDevicePixelRatio?window.devicePixelRatio||1:1;0>h&&(g=h=this.systemBandwidth);0<this.systemBandwidth&&this.systemBandwidth!==g&&(h=d*this.systemBandwidth+(1-d)*h,g=this.systemBandwidth);return fj(this.playlists.master,h,
parseInt(yd(this.tech_.el(),"width"),10)*m,parseInt(yd(this.tech_.el(),"height"),10)*m,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:vf,comparePlaylistResolution:function(d,h){if(d.attributes.RESOLUTION&&d.attributes.RESOLUTION.width)var g=d.attributes.RESOLUTION.width;g=g||window.Number.MAX_VALUE;if(h.attributes.RESOLUTION&&h.attributes.RESOLUTION.width)var m=h.attributes.RESOLUTION.width;m=m||window.Number.MAX_VALUE;return g===m&&d.attributes.BANDWIDTH&&
h.attributes.BANDWIDTH?d.attributes.BANDWIDTH-h.attributes.BANDWIDTH:g-m},xhr:Ii()};Object.keys(va).forEach(function(d){Object.defineProperty(na,d,{get,set:function(h){w.log.warn("using Vhs."+d+" is UNSAFE be sure you know what you are doing");"number"!==typeof h||0>h?w.log.warn("value of Vhs."+d+" must be greater than or equal to 0"):va[d]=h}})});var rj=function(d,h){h=h.media();for(var g=-1,m=0;m<
d.length;m++)if(d[m].id===h.id){g=m;break}d.selectedIndex_=g;d.trigger({selectedIndex:g,type:"change"})},In;na.canPlaySource=function(){return w.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Jn,Kn=function(d){var h=d.player,g=d.sourceKeySystems,m=d.audioMedia;d=d.mainPlaylists;if(!h.eme.initializeMediaKeys)return Promise.resolve();m=m?d.concat([m]):d;var q=[],r=[];Jn(m,Object.keys(g)).forEach);return Promise.race([Promise.all(q),Promise.race(r)])},Ln=function(d){var h=
d.player;var g=d.sourceKeySystems;var m=d.media;d=d.audioMedia;if(g){var q={};m&&m.attributes&&m.attributes.CODECS&&(q=wd(jb(m.attributes.CODECS)));d&&d.attributes&&d.attributes.CODECS&&(q.audio=d.attributes.CODECS);d=vc(q.video);q=vc(q.audio);var r={},x;for(x in g)r[x]={},q&&(r[x].audioContentType=q),d&&(r[x].videoContentType=d),m.contentProtection&&m.contentProtection[x]&&m.contentProtection[x].pssh&&(r[x].pssh=m.contentProtection[x].pssh),"string"===typeof g[x]&&(r[x].url=g[x]);g=w.mergeOptions(g,
r)}return g?(h.currentSource().keySystems=g)&&!h.eme?(w.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0:!1},sj,Mn;na.supportsNativeHls=function(){if(!document||!document.createElement)return!1;
var d=document.createElement("video");return w.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some):!1}();var Nn=document&&document.createElement&&w.getTech("Html5").isSupported()?/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml")):!1;na.supportsNativeDash=Nn;na.supportsTypeNatively=
function(d){return"hls"===d?na.supportsNativeHls:"dash"===d?na.supportsNativeDash:!1};na.isSupported;var zf=function(d){function h(g,h,m){var q=d.call(this,h,w.mergeOptions(m.hls,m.vhs))||this;m.hls&&Object.keys(m.hls).length&&w.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object.");"number"===typeof m.initialBandwidth&&(q.options_.bandwidth=m.initialBandwidth);
q.logger_=Za("VhsHandler");h.options_&&h.options_.playerId&&(m=w(h.options_.playerId),m.hasOwnProperty("hls")||Object.defineProperty(m,"hls",{get:function(){w.log.warn("player.hls is deprecated. Use player.tech().vhs instead.");h.trigger({type:"usage",name:"hls-player-access"});return O(q)},configurable:!0}),m.hasOwnProperty("vhs")||Object.defineProperty(m,"vhs",{get,configurable:!0}),m.hasOwnProperty("dash")||Object.defineProperty(m,"dash",{get,configurable:!0}),q.player_=m);q.tech_=h;q.source_=g;q.stats={};q.ignoreNextSeekingEvent_=!1;q.setOptions_();if(q.options_.overrideNative&&h.overrideNativeAudioTracks&&h.overrideNativeVideoTracks)h.overrideNativeAudioTracks(!0),h.overrideNativeVideoTracks(!0);else if(q.options_.overrideNative&&(h.featuresNativeVideoTracks||
h.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");q.on(document,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(d){(d=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&d.contains(q.tech_.el())?q.masterPlaylistController_.fastQualityChange_():q.masterPlaylistController_.checkABR_()});q.on(q.tech_,"seeking");q.on(q.tech_,"error");q.on(q.tech_,"play",q.play);return q}F(h,d);var g=h.prototype;g.setOptions_=function(){var d=this;this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.handleManifestRedirects=!1===this.options_.handleManifestRedirects?!1:!0;this.options_.limitRenditionByPlayerDimensions=
!1===this.options_.limitRenditionByPlayerDimensions?!1:!0;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1;this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1;this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1;this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1;this.options_.useDtsForTimestampOffset=
this.options_.useDtsForTimestampOffset||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);if("number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var g=sj();g&&g.bandwidth&&(this.options_.bandwidth=g.bandwidth,this.tech_.trigger({type:"usage",
name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"}));g&&g.throughput&&(this.options_.throughput=g.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=va.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===
va.INITIAL_BANDWIDTH;"withCredentials useDevicePixelRatio limitRenditionByPlayerDimensions bandwidth smoothQualityChange customTagParsers customTagMappers handleManifestRedirects cacheEncryptionKeys playlistSelector initialPlaylistSelector experimentalBufferBasedABR liveRangeSafeTimeDelta experimentalLLHLS useNetworkInformationApi useDtsForTimestampOffset experimentalExactManifestTimings experimentalLeastPixelDiffSelector".split(" ").forEach);this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio};g.src=function(d,g){var h=this;d&&(this.setOptions_(),this.options_.src=Mn(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=na,this.options_.sourceType=Oh(g),this.options_.seekTo=function(d){h.tech_.setCurrentTime(d)},this.options_.smoothQualityChange&&w.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),
this.masterPlaylistController_=new An(this.options_),d=w.mergeOptions({liveRangeSafeTimeDelta:$a},this.options_,{seekable:function(){return h.seekable()},media:function(){return h.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}),this.playbackWatcher_=new En(d),this.masterPlaylistController_.on("error",function(){var d=w.players[h.tech_.options_.playerId],g=h.masterPlaylistController_.error;"object"!==typeof g||g.code?"string"===typeof g&&(g={message:g,code:3}):
g.code=3;d.error(g)}),d=this.options_.experimentalBufferBasedABR?na.movingAverageBandwidthSelector(.55):na.STANDARD_PLAYLIST_SELECTOR,this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):d.bind(this),this.masterPlaylistController_.selectInitialPlaylist=na.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},
set},throughput:{get,set},bandwidth:{get:function(){var d=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,g=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;
this.options_.useNetworkInformationApi&&g&&(g=1E6*g.downlink,d=1E7<=g&&1E7<=d?Math.max(d,g):g);return d},set},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),
this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get,enumerable:!0},mediaRequests:{get:function(){return h.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return h.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return h.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},
mediaRequestsErrored:{get:function(){return h.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return h.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return h.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return h.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return h.masterPlaylistController_.mediaAppends_()||
0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return h.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get,enumerable:!0},buffered:{get:function(){return Eb(h.tech_.buffered())},
enumerable:!0},currentTime:{get:function(){return h.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return h.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return h.tech_.name_},enumerable:!0},duration:{get:function(){return h.tech_.duration()},enumerable:!0},master:{get,enumerable:!0},playerDimensions:{get:function(){return h.tech_.currentDimensions()},enumerable:!0},seekable:{get,
enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get,enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){if(h.options_.useBandwidthFromLocalStorage){var d={bandwidth:h.bandwidth,throughput:Math.round(h.throughput)};if(window.localStorage){var g=sj();g=g?w.mergeOptions(g,d):d;try{window.localStorage.setItem("videojs-vhs",
JSON.stringify(g))}catch(Qf){}}}}),this.masterPlaylistController_.on("selectedinitialmedia"),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){h.setupEme_()}),this.on(this.masterPlaylistController_,"progress"),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window.URL.createObjectURL(this.masterPlaylistController_.mediaSource),
this.tech_.src(this.mediaSourceUrl_)))};g.createKeySessions_=function(){var d=this,g=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation");Kn({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:g&&g.media(),mainPlaylists:this.playlists.master.playlists}).then)["catch"])};g.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions");this.createKeySessions_()};g.setupEme_=function(){var d=this,g=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;g=Ln({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:g&&g.media()});this.player_.tech_.on("keystatuschange",function(g){"output-restricted"===
g.status&&d.masterPlaylistController_.blacklistCurrentPlaylist({playlist:d.masterPlaylistController_.media(),message:"DRM keystatus changed to "+g.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:Infinity})});this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this);this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_);11!==w.browser.IE_VERSION&&g?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()};g.setupQualityLevels_=;h.version;g.version=function(){return this.constructor.version()};
g.canChangeType=function(){return mj.canChangeType()};g.play=function(){this.masterPlaylistController_.play()};g.setCurrentTime=function(d){this.masterPlaylistController_.setCurrentTime(d)};g.duration=function(){return this.masterPlaylistController_.duration()};g.seekable=function(){return this.masterPlaylistController_.seekable()};g.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&
this.qualityLevels_.dispose();this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls);this.tech_&&this.tech_.vhs&&delete this.tech_.vhs;this.tech_&&delete this.tech_.hls;this.mediaSourceUrl_&&window.URL.revokeObjectURL&&(window.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null);this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_);d.prototype.dispose.call(this)};g.convertToProgramTime;g.seekToProgramTime;return h}(w.getComponent("Component")),Cd={name:"videojs-http-streaming",VERSION:"2.14.2",canHandleSource:function(d,h){void 0===h&&(h={});h=w.mergeOptions(w.options,h);return Cd.canPlayType(d.type,h)},handleSource:function(d,h,g){void 0===
g&&(g={});g=w.mergeOptions(w.options,g);h.vhs=new zf(d,h,g);w.hasOwnProperty("hls")||Object.defineProperty(h,"hls",{get,configurable:!0});h.vhs.xhr=Ii();h.vhs.src(d.src,d.type);return h.vhs},canPlayType:function(d,h){void 0===h&&(h={});var g=w.mergeOptions(w.options,h);h=g.vhs;h=void 0===h?{}:h;h=h.overrideNative;h=void 0===h?!w.browser.IS_ANY_SAFARI:h;g=g.hls;g=void 0===g?{}:g;g=g.overrideNative;
g=void 0===g?!1:g;return(d=Oh(d))&&(!na.supportsTypeNatively(d)||g||h)?"maybe":""}};kd("avc1.4d400d,mp4a.40.2")&&w.getTech("Html5").registerSourceHandler(Cd,0);w.VhsHandler=zf;Object.defineProperty(w,"HlsHandler",{get:function(){w.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.");return zf},configurable:!0});w.VhsSourceHandler=Cd;Object.defineProperty(w,"HlsSourceHandler",{get:function(){w.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead.");
return Cd},configurable:!0});w.Vhs=na;Object.defineProperty(w,"Hls",{get,configurable:!0});w.use||(w.registerComponent("Hls",na),w.registerComponent("Vhs",na));w.options.vhs=w.options.vhs||{};w.options.hls=w.options.hls||{};w.getPlugin&&w.getPlugin("reloadSourceOnError")||(w.registerPlugin||w.plugin)("reloadSourceOnError",Hn);return w});!function(){var m=window&&window.videojs;m&&(m.CDN_VERSION="7.20.2");!0}();
(function(m,r){"object"===typeof exports&&"undefined"!==typeof module?module.exports=r(require("video.js"),require("global/window")):"function"===typeof define&&define.amd?define(["video.js","global/window"],r):m.videojsOverlay=r(m.videojs,m.window)})(this,function(m,r)=m&&m.hasOwnProperty("default")?
m["default"]:m;r=r&&r.hasOwnProperty("default")?r["default"]:r;var E={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},q=m.getComponent("Component"),Z=m.dom||m,R=m.registerPlugin||m.plugin,Ra=function(m){return"number"===typeof m&&m===m};q=function(q){function C(m,r){var x=q.call(this,m,r)||this;["start","end"].forEach(function(m){var q=x.options_[m];if(Ra(q))x[m+"Event_"]=
"timeupdate";else if("string"===typeof q&&/^\S+$/.test(q))x[m+"Event_"]=q;else if("start"===m)throw Error('invalid "start" option; expected number or string');});["endListener_","rewindListener_","startListener_"].forEach);if("timeupdate"===x.startEvent_)x.on(m,"timeupdate",x.rewindListener_);x.debug('created, listening to "'+x.startEvent_+'" for "start" and "'+(x.endEvent_||"nothing")+'" for "end"');x.hide();return x}x(C,q);var E=
C.prototype;E.createEl=function(){var m=this.options_,q=m.content;m=Z.createEl("div",{className:"\n        vjs-overlay\n        vjs-overlay-"+m.align+"\n        "+m.class+"\n        "+(m.showBackground?"vjs-overlay-background":"vjs-overlay-no-background")+"\n        vjs-hidden\n      "});"string"===typeof q?m.innerHTML=q:q instanceof r.DocumentFragment?m.appendChild(q):Z.appendContent(m,q);return m};E.debug=function(){if(this.options_.debug){for(var q=m.log,r=q,x=arguments.length,C=Array(x),N=0;N<
x;N++)C[N]=arguments[N];q.hasOwnProperty(C[0])&&"function"===typeof q[C[0]]&&(r=q[C.shift()]);r.apply(void 0,["overlay#"+this.id()+": "].concat(C))}};E.hide=function(){q.prototype.hide.call(this);this.debug("hidden");this.debug('bound `startListener_` to "'+this.startEvent_+'"');this.endEvent_&&(this.debug('unbound `endListener_` from "'+this.endEvent_+'"'),this.off(this.player(),this.endEvent_,this.endListener_));this.on(this.player(),this.startEvent_,this.startListener_);return this};E.shouldHide_=;E.show=function(){q.prototype.show.call(this);this.off(this.player(),this.startEvent_,this.startListener_);this.debug("shown");this.debug('unbound `startListener_` from "'+this.startEvent_+'"');this.endEvent_&&(this.debug('bound `endListener_` to "'+this.endEvent_+'"'),this.on(this.player(),this.endEvent_,this.endListener_));return this};E.shouldShow_;E.startListener_=function(m){var q=this.player().currentTime();this.shouldShow_(q,m.type)&&this.show()};E.endListener_;E.rewindListener_=function(m){m=this.player().currentTime();var q=this.options_.start,r=this.options_.end;m<this.previousTime_&&(this.debug("rewind detected"),Ra(r)&&!this.shouldShow_(m)?(this.debug("hiding; "+
r+" is an integer and overlay should not show at this time"),this.hasShownSinceSeek_=!1,this.hide()):"string"===typeof r&&/^\S+$/.test(r)&&m<q&&(this.debug("hiding; show point ("+q+") is before now ("+m+") and end point ("+r+") is an event"),this.hasShownSinceSeek_=!1,this.hide()));this.previousTime_=m};return C}(q);m.registerComponent("Overlay",q);q=function(q){var r=this,x=m.mergeOptions(E,q);Array.isArray(this.overlays_)&&this.overlays_.forEach(function(m){r.removeChild(m);r.controlBar&&r.controlBar.removeChild(m);
m.dispose()});q=x.overlays;delete x.overlays;this.overlays_=q.map(function(q){q=m.mergeOptions(x,q);var C="string"===typeof q.attachToControlBar||!0===q.attachToControlBar;if(!r.controls()||!r.controlBar)return r.addChild("overlay",q);if(C&&-1!==q.align.indexOf("bottom")&&(C=r.controlBar.children()[0],void 0!==r.controlBar.getChild(q.attachToControlBar)&&(C=r.controlBar.getChild(q.attachToControlBar)),C))return q=r.controlBar.addChild("overlay",q),r.controlBar.el().insertBefore(q.el(),C.el()),q;q=
r.addChild("overlay",q);r.el().insertBefore(q.el(),r.controlBar.el());return q})};q.VERSION="2.1.4";R("overlay",q);return q});
(function(m,r,x){function D(q,x,E){this._options={};this._options=m.extend({},E);this._player=m.extend({id:m(q).attr("id")},ssmpConfig,this._options);this._component=m(q).parents(".videoPlayer");this.firstload=!0;this._userAgent={};this._userAgent.useragent=navigator.userAgent||navigator.vendor||r.opera;/android/i.test(this._userAgent.useragent)?this._userAgent.shortname="android":/Edge/i.test(this._userAgent.useragent)?this._userAgent.shortname="edge":/Chrome/i.test(this._userAgent.useragent)?this._userAgent.shortname=
"chrome":/Firefox/i.test(this._userAgent.useragent)?this._userAgent.shortname="firefox":/Safari/i.test(this._userAgent.useragent)?this._userAgent.shortname="safari":this._userAgent.shortname=!1;this._params={};this._analytics={};this._version="1.0.19";if(r.location.search)for(q=r.location.search.substring(1).split("\x26"),x=0;x<q.length;x++)this._params[q[x].split("\x3d")[0]]=!0,q[x].match(/=/)&&(this._params[q[x].split("\x3d")[0]]=q[x].split("\x3d")[1].toLowerCase());this.init();return!1}var E=null;
D.prototype.init=function(){if(!this._player.client)return this.showMessage("Error : data-client attribute must be specified"),!1;if(!this._player.type)return this.showMessage('Error : data-type attribute must be either "live" or "vod"'),!1;this.catchupHideDelay=isNaN(this._player.catchupHideDelay)?5E3:1E3*parseInt(this._player.catchupHideDelay);this.carouselStatus=0;"live"===this._player.type?this.fetchLiveData(this._player.id,!0):"vod"===this._player.type&&this.fetchVodData(this._player.id)};D.prototype.setDefaultKeys=
function(){this._key=this._player.id+"-volume";this._muteKey=this._player.id+"-mute";this._caption=this._player.id+"-caption"};D.prototype.fetchLiveData=function(m,r){this.setDefaultKeys();if(!this._player.liveStreams)return this.showMessage("Error : live streams not defined in config"),!1;if(!this._player.channel)return this.showMessage("Error : data-channel attribute must be specified"),!1;m=this._player.liveStreams;if(!m[this._player.channel])return this.showMessage('Error : channel "'+this._player.channel+
'"not found in config'),!1;this._player.channelData=m[this._player.channel];this._player.showCatchup=m[this._player.channel].showCatchup;this._player.hls=this._player.channelData.hls;this._player.dash=this._player.channelData.dash;this._player.poster=this._player.channelData.poster;r&&this.loadPlayer()};D.prototype.fetchVodData=function(){var m=this;m.setDefaultKeys();if("undefined"!==typeof m._options.videourl)m._player.hls=m._player.testStream?m._player.testStream:m._options.videourl,m._player.mp4=
m._player.testStream?m._player.testStream:m._options.videourl,m.loadPlayer();else if(m._player.hls){if(!m._player.poster)return m.showMessage("Error : data-poster attribute must be specified"),!1;m.loadPlayer()}else if("undefined"!==typeof m._options.uvid&&qVars.globalAjax.videoSearch)fetch(qVars.globalAjax.videoSearch.replace("{0}",m._options.uvid)).then(function(m){if(m.ok)return m.json();throw Error();}).then(function(q){console.error(q);Array.isArray(q.encoding)&&q.encoding.forEach(function(q){switch(q.platformCode){case "HttpLiveStreaming":m._player.hls=
q.url;break;case "MobileH264":m._player.mp4=q.url}});!m._player.customPoster&&Array.isArray(q.thumbnail)&&0<q.thumbnail.length&&q.thumbnail[0].url&&(m._player.poster=q.thumbnail[0].url);m.loadPlayer()}).catch);else return m.showMessage("Error : data-hls attribute must be specified"),!1};D.prototype.loadPlayer=function(){0===m("#"+this._player.id).length&&m("#"+this._player.id+"-wrapper div").html(m(x.createElement("div")).attr("id",
this._player.id));this._framework="VideoJS";this.videoJs();this.debug("Player Init")};D.prototype.hasPersistedCaptions=function(){var m=this.getStorageItem(this._caption);return null!==m&&"showing"===m};D.prototype.videoJs=function(){var q=this;0===m("#"+q._player.id).length&&m("#"+q._player.id+"-wrapper div").html(m(x.createElement("div")).attr("id",q._player.id));if(!q._playerInstance){var D=navigator.userAgent||navigator.vendor||r.opera,R=q._player.muted?" muted":"";m("#"+q._player.id).replaceWith('\x3cvideo webkit-playsinline playsinline id\x3d"'+
q._player.id+'" crossorigin\x3d"anonymous" poster\x3d"'+q._player.poster+'" style\x3d"width: 100%; height: 100%;" class\x3d"video-js vjs-default-skin vjs-qvc-skin"'+R+"\x3e\x3c/video\x3e");q._player.captions&&(R=q.hasPersistedCaptions()?"default":"",m("#"+q._player.id).append('\x3ctrack kind\x3d"captions" src\x3d"'+q._player.captions+'" srclang\x3d"en" label\x3d"English" '+R+"\x3e\x3c/track\x3e"));var Ra=r.VTTCue||r.TextTrackCue,C={line:-2,position:30,align:"left",positionAlign:"line-left"};q._config=
{poster:q._player.poster,controls:!0,muted:!!q._player.muted,autoplay:!!q._player.autoplay,preload:"none",nativeControlsForTouch:!0,customControlsOnMobile:!1,persistTextTrackSettings:!0,controlBar:{volumePanel:{inline:!1,vertical:!0}},language:q._player.langCode,html5:{nativeTextTracks:!1,hlsjsConfig:{cueHandler:{newCue:function(q,r,x,D){q.addCue(m.extend(new Ra(r,x,D.getDisplayText()),C))}}}},techOrder:["html5"]};/Safari/i.test(D)&&!/chrome/i.test(D)&&"qvcus"===q._player.client&&(q._config.html5.nativeTextTracks=
!0);/iPad|iPhone|iPod/.test(D)&&!r.MSStream&&(q._config.html5.nativeTextTracks=!0,q._config.muted=!1,q._config.autoplay=!1,q._config.nativeControlsForTouch=!0,q._config.customControlsOnMobile=!1,q._player.dvr=!1);/android/i.test(D)&&(q._config.muted=!1,q._config.autoplay=!1,q._config.nativeControlsForTouch=!1,q._config.customControlsOnMobile=!1,q._player.dvr=!1,videojs.options.hls={overrideNative:!0});/(Edg|Trident)/i.test(D)&&(videojs.options.hls.overrideNative=!0,videojs.options.html5.nativeAudioTracks=
!1,videojs.options.html5.nativeVideoTracks=!1);videojs.addLanguage(q._player.langCode,q._player.lang);var N=q.getStorageItem(q._muteKey),Fb=q.getStorageItem(q._key);q._playerInstance=videojs(q._player.id,q._config,function(){"vod"===q._player.type?q._playerInstance.src([{src:q._player.hls,type:"application/x-mpegURL"}]):"live"===q._player.type&&(!0===q._player.dvr&&(q._player.hls=q._player.hls.replace(/(\?|&)dvr_window_length=18/,"")),"dash"===q._player.format?q._playerInstance.src({src:q._player.dash,
type:"application/dash+xml"}):q._playerInstance.src({src:q._player.hls,type:"application/x-mpegURL"}));var m=q._config.muted;q.firstload?q.setStorageItem(q._muteKey,m):(null!==Fb&&parseFloat(Fb)&&q._playerInstance.volume(parseFloat(Fb)),m="true"===N);q._playerInstance.muted(m);q.firstload=!1;q._component.trigger("ssmp.built",[q._player.id])});q._analytics.data={env:"live",type:q._player.type,client:q._player.client,streamUrl:q._player.hls,playerSession:(new Date).getTime().toString()+Math.floor(999999*
Math.random()).toString(),referrerUrl:r.location.href,userAgent:navigator.userAgent};"vod"===q._player.type&&(q._analytics.data.videoID="undefined"!==typeof q._options.uvid&&q._options.uvid?q._options.uvid:null);q._playerInstance.on("error",function(){});q._playerInstance.on("click",function(r){1>m(r.target).parents(".vjs-overlay").length&&null===r.target.className.match(/(vjs-overlay)/g)&&q.hideEpg()});q._playerInstance.on("dblclick",function(r){if("vjs-tech"!==r.target.className)return!1;r=m(r.target).text();
q._playerInstance.isFullscreen()&&0===r.length?q._playerInstance.exitFullscreen():q._playerInstance.isFullscreen()||0!==r.length||q._playerInstance.requestFullscreen();q._playerInstance.play()});q._playerInstance.on("ready",function(){q._player.callback&&eval(q._player.callback+"(this)");"function"===typeof qvcPlayerReady&&qvcPlayerReady(q._player.id,q._playerInstance);"live"===q._player.type&&q.updateEpg();var r=m("#"+q._player.id);r.find(".vjs-big-play-button").wrap('\x3cdiv class\x3d"vjs-play-wrapper"\x3e\x3cdiv class\x3d"vjs-play-container"\x3e\x3c/div\x3e\x3c/div\x3e');
r.find(".vjs-play-wrapper").on("click",function(){q.play()});"live"===q._player.type&&!0===q._player.dvr&&(r.addClass("vjs-dvr-active"),r.find(".vjs-play-container").append('\x3cbutton class\x3d"vjs-live-button" type\x3d"button" aria-live\x3d"polite" title\x3d"'+i18n.get("Back To Live")+'"\x3e\x3cspan class\x3d"vjs-control-text"\x3e'+i18n.get("Back To Live")+"\x3c/span\x3e\x3c/button\x3e"),r.find(".vjs-play-wrapper .vjs-live-button").on("click",function(m){var r=q._playerInstance.seekable().end(0)||
null;r&&(m.stopPropagation(),q._playerInstance.currentTime(r),q.play())}));q.fixControlBarInEdge()});q._playerInstance.on("play");q._playerInstance.on("pause",function(){var r=m("#"+q._player.id);r.find(".vjs-big-play-button").attr("title",i18n.get("Resume"));r.find(".vjs-big-play-button .vjs-control-text").html(i18n.get("Resume"))});q._playerInstance.on("userinactive",function(){E=r.setTimeout,
q.catchupHideDelay)});q._playerInstance.on("useractive");q._playerInstance.on("complete",function(){});q._playerInstance.on("texttrackchange",function(){if(q._playerInstance.textTracks()[0]){var m=q._playerInstance.textTracks()[0].mode;q._caption!==m&&q.setStorageItem(q._caption,m)}});q._playerInstance.on("volumechange",function(){q._player.muted=q._playerInstance.muted();q.setStorageItem(q._key,q._playerInstance.volume());q.setStorageItem(q._muteKey,q._playerInstance.muted())});
q._playerInstance.on("fullscreenchange",function(){!0!==q._player.carousel||!q._player.showCatchup||"qvcuk"!==q._player.client&&"qvcde"!==q._player.client||(q._playerInstance.isFullscreen()?(q._playerInstance.overlay({overlays:[{content:'\x3cdiv class\x3d"epg-carousel"\x3e\x3cdiv class\x3d"epg-container hidden" id\x3d"epg-container"\x3e\x3c/div\x3e\x3cspan class\x3d"btn btn-primary carousel-toggle"\x3e'+i18n.get("Previous Shows")+"\x3c/span\x3e\x3c/div\x3e",start:"mousemove",align:"bottom-qvc"}]}),
q._component.trigger("catchuptv",[!1])):(q.carouselStatus=0,m(".vjs-overlay").remove()),m(".epg-carousel .carousel-toggle").click(function(){m(".epg-carousel .carousel-toggle").hide();q.carouselStatus=1;q.generateEpg()}))});q.debug("videoJS(): Render Player\x3cbr\x3e"+q._player.hls,"blue")}};D.prototype.fixControlBarInEdge=function(){/Edge/i.test(this._userAgent.shortname)&&m("#"+this._player.id).removeClass("vjs-using-native-controls").find("video").removeAttr("controls")};D.prototype.hideEpg=function(){1===
this.carouselStatus&&(this.carouselStatus=0,m(".epg-carousel .carousel-toggle").css("top","220px"),this._component.trigger("catchuptv",[!1]),m(".epg-container").html("").addClass("hidden"),m(".ssmp-epg-scrollLeft,.ssmp-epg-scrollRight").remove(),m(".epg-carousel .carousel-toggle").show().animate({top:"0"},{duration:300}))};D.prototype.updateEpg=function(){if(shopLiveTV){var q=shopLiveTV.player.curShowTitle;m("#"+this._player.id).find(".vjs-live-display").html(this._player.channelData.name+" \x3cspan\x3e"+
q+"\x3c/span\x3e")}};D.prototype.hasLocalStorage;D.prototype.getStorageItem=function(m){return this.hasLocalStorage()?r.localStorage.getItem(m):!1};D.prototype.setStorageItem=function(m,x){return this.hasLocalStorage()?r.localStorage.setItem(m,x):!1};D.prototype.analytics=function(){};D.prototype.debug=function(q,r){if(this._params.ssmp_debug){var D=m("#"+
this._player.id+"-debug");0===D.length&&(D=m(x.createElement("div")).attr("id",this._player.id+"-debug").css({background:"#fff1c1",border:"1px solid #ea9a00",padding:"10px",width:"100%",height:"250px",overflow:"auto","margin-top":"10px"}),m("#"+this._player.id+"-wrapper").after(D),D.append("Framework: "+this._framework+"\x3cbr\x3e"),"VideoJS"===this._framework&&D.append("Tech: "+this._playerInstance.techName_),console.debug("SSMP DEBUG"),console.debug("-----------------------------------------"),
console.debug(this));q&&(q=m(x.createElement("p")).css({"font-size":"10px","font-family":"Courier New",color:r?r:"black"}).html(q),D.prepend(q))}};D.prototype.play=function(){this._playerInstance&&this._playerInstance.play()};D.prototype.pause=function(){this._playerInstance&&this._playerInstance.pause()};D.prototype.uvid=function(q){this._component.data("player-type","vod");m("#"+this._player.id+"-wrapper div").html("");"VideoJS"===this._framework&&this._playerInstance.dispose();delete this._playerInstance;
this._options.uvid=q;this._player.type="vod";this.init()};D.prototype.changeMedia=function(q){this._options.poster=this._player.poster=q.poster;this._options.hls=this._player.hls=q.hls;this._options.mp4=this._player.mp4=q.mp4;this._options.captions=this._player.captions=q.captions?q.captions:!1;m("#"+this._player.id+"-wrapper div").html("");"VideoJS"===this._framework&&this._playerInstance.dispose();delete this._playerInstance;this.init()};D.prototype.changeMediaInline=function(m){this._options.poster=
this._player.poster=m.poster;this._options.hls=this._player.hls=m.hls;this._options.mp4=this._player.mp4=m.mp4;this._options.captions=this._player.captions=m.captions?m.captions:!1;this._playerInstance.poster(m.poster);this._playerInstance.src([{src:m.hls,type:"application/x-mpegURL"},{src:m.mp4,type:"video/mp4"}]);m=this._playerInstance.remoteTextTracks();for(var q=0;q<m.length;q++)this._playerInstance.removeRemoteTextTrack(m[q]);this._options.captions&&this._playerInstance.addRemoteTextTrack({src:this._player.captions,
kind:"subtitles",srclang:"en",label:"English",default:this.hasPersistedCaptions()?"default":""},!1);this.play()};D.prototype.changeSource=function(q){var r=this;r._component.data("player-type","vod");if("undefined"!==q){var D=r._player.id.replace(/-/g,"");m.ajax({url:"https://d2q1b32gh59m9o.cloudfront.net/player/config?callback\x3d"+D+"\x26client\x3d"+r._player.client+"\x26type\x3dvod\x26apiKey\x3d"+r._player.apiKey+"\x26videoId\x3d"+q+"\x26format\x3djsonp",crossDomain:!0,dataType:"jsonp",jsonpCallback:D,
cache:!0,success:function(m){r._player.type="vod";r._playerInstance.src([{src:m.vod.stream.hls,type:"application/x-mpegURL"},{src:m.vod.stream.mp4,type:"video/mp4"}]);if("vod"===r._player.type&&!1===r._player.dvr){var q=r._playerInstance.controlBar.el(),D=q.getElementsByClassName("vjs-custom-title");0<D.length&&D[0].remove();D=x.createElement("div");D.className="vjs-custom-title vjs-control";var E=x.createElement("div");D.appendChild(E);D.firstElementChild.className="vjs-title-display";D.firstElementChild.innerHTML=
m.vod.title;q.insertBefore(D,q.getElementsByClassName("vjs-progress-control")[0])}r.play()},error:function(m,q,x){r.showMessage("API Error : Invalid Video Config");console.error(x);return!1}})}else r.showMessage("Error: data-uvid attribute must be specified");r.hideEpg()};D.prototype.changeLiveSource=function(q){this._component.data("player-type","live");this._options.channel=q;this._player.channel=q;this._player.type="live";m(".vjs-custom-title").remove();this.fetchLiveData(this._player.id,!1);"dash"===
this._player.format?this._playerInstance.src({src:this._player.dash,type:"application/dash+xml"}):this._playerInstance.src({src:this._player.hls,type:"application/x-mpegURL"});this.play();this.hideEpg()};D.prototype.changeChannel=function(q){this._component.data("player-type","live");m("#"+this._player.id+"-wrapper div").html("");"VideoJS"===this._framework&&this._playerInstance.dispose();delete this._playerInstance;this._options.channel=q;this._player.channel=q;this._player.type="live";this.init()};
D.prototype.showMessage=function(m){console.error("ERROR: "+m)};D.prototype.generateEpg=function(){var q=this;q.positionSaved=0;m.ajax({url:q._player.channelData.epg,success:function(r){if("undefined"!==r.ScheduleEvent){r=r.ScheduleEvent;var D="";m(".epg-carousel").css("top","220px");m.each(r,function(m,q){var r=m="",x="",C=new Date(q.start_date),E=new Date(q.end_date),N=new Date,R="",ca="h:MM TT";"string"===typeof qVars.format.time&&""!==qVars.format.time&&(ca=qVars.format.time);dateFormat(C,"isoDate")<
dateFormat(N,"isoDate")&&(ca="ddd, "+ca);"undefined"!==q.uvid&&"null"!==q.uvid&&null!==q.uvid&&(x='data-vod\x3d"'+q.uvid+'"');var Z=C.getTime()>N.getTime()?'\x3cdiv class\x3d"vod-timer"\x3e\x3cspan class\x3d"vod-timer-btn"\x3e\x3c/span\x3e\x3c/div\x3e':'\x3cdiv class\x3d"vod-play"\x3e\x3cspan class\x3d"vod-play-btn"\x3e\x3c/span\x3e\x3c/div\x3e';N.getTime()>=C.getTime()&&N.getTime()<=E.getTime()&&(m='\x3cdiv class\x3d"vod-live"\x3e\x3cspan class\x3d"vod-live-btn"\x3eLIVE\x3c/span\x3e\x3c/div\x3e',
r="currently-live");if(""!==x||""!==r)R='data-cm-title\x3d"'+q.title.replace(/"/g,"")+'" data-cm-date\x3d"'+dateFormat(C,"dd")+C.toLocaleDateString("en-US",{month:"short"}).toUpperCase()+dateFormat(C,"yyyy")+'" data-cm-time\x3d"'+dateFormat(C,"HHMM")+'" data-cm-duration\x3d"'+(E.getTime()-C.getTime())/6E4+'"';D+='\x3cdiv class\x3d"programme '+r+'" style\x3d"background-image:url(\''+q.image_w320.replace("320","270")+"')\" "+R+x+'\x3e\x3cdiv class\x3d"overlay"\x3e'+Z+m+'\x3cdiv class\x3d"overlay-content"\x3e\x3cspan class\x3d"programme-title"\x3e'+
q.title+'\x3c/span\x3e\x3cspan class\x3d"programme-date" data-startdate\x3d"'+C.getTime()+'" data-enddate\x3d"'+E.getTime()+'"\x3e'+dateFormat(C,ca)+" - "+dateFormat(E,ca)+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"});m(".vjs-overlay .epg-carousel .epg-container").html(D).removeClass("hidden");q._component.trigger("catchuptv",[!0]);m(".epg-carousel").animate({top:0},300);r=m(x.createElement("div")).addClass("ssmp-epg-scrollLeft vjs-hidden").html('\x3cdiv class\x3d"control-left"\x3e\x3cspan class\x3d"vjs-icon-play"\x3e\x3c/span\x3e\x3c/div\x3e').on("click",
function(r){r.preventDefault();"undefined"===typeof q.positionSaved&&(q.positionSaved=0);m(".vjs-overlay .epg-carousel .epg-container").width();r=q.positionSaved-282;r=0>r?0:r;m(".vjs-overlay .epg-carousel .epg-container").stop().animate({scrollLeft:Math.floor(r)},300);0===r?m(".ssmp-epg-scrollLeft").addClass("vjs-hidden"):(m(".ssmp-epg-scrollLeft.vjs-hidden").removeClass("vjs-hidden"),m(".ssmp-epg-scrollRight.vjs-hidden").removeClass("vjs-hidden"));q.positionSaved=r}).on("dblclick",function(m){m.preventDefault()});
var E=m(x.createElement("div")).addClass("ssmp-epg-scrollRight").html('\x3cdiv class\x3d"control-right"\x3e\x3cspan class\x3d"vjs-icon-play"\x3e\x3c/span\x3e\x3c/div\x3e').on("click",function(r){r.preventDefault();"undefined"===typeof q.positionSaved&&(q.positionSaved=0);var x=m(".vjs-overlay .epg-carousel .epg-container").width();r=q._options.width;if("undefined"===typeof r||x!==r)r=x;x=q.positionSaved+282;x=x>282*(m(".vjs-overlay .epg-carousel .epg-container .programme").length-Math.floor(r/282))?
282*(m(".vjs-overlay .epg-carousel .epg-container .programme").length-Math.floor(r/282)):x;m(".vjs-overlay .epg-carousel .epg-container").stop().animate({scrollLeft:Math.floor(x)},300);q.positionSaved=x;x===282*(m(".vjs-overlay .epg-carousel .epg-container .programme").length-Math.floor(r/282))?m(".ssmp-epg-scrollRight").addClass("vjs-hidden"):(m(".ssmp-epg-scrollRight.vjs-hidden").removeClass("vjs-hidden"),m(".ssmp-epg-scrollLeft.vjs-hidden").removeClass("vjs-hidden"))}).on("dblclick",function(m){m.preventDefault()});
m(".vjs-overlay .epg-carousel").append(r);m(".vjs-overlay .epg-carousel").append(E);"150px"===m(".programme").css("top")?0:"150px";setTimeout(function(){var r=x.getElementsByClassName("programme"),D=x.getElementsByClassName("currently-live");r=Array.prototype.indexOf.call(r,D[0]);D=m(".vjs-overlay .epg-carousel .epg-container").width();var E=q._options.width;if("undefined"===typeof E||D!==E)E=D;r=282*(r-Math.floor(Math.floor(E/282)/2));q.positionSaved=r;m(".vjs-overlay .epg-carousel .epg-container").stop().animate({scrollLeft:Math.floor(r)},
300);m(".ssmp-epg-scrollLeft").removeClass("vjs-hidden")},100);m(".programme[data-vod], .programme.currently-live").on("click",function(){var r=m(this);q._playerInstance.paused()||q._playerInstance.pause();void 0!==r.data("vod")?q.changeSource(m(this).data("vod")):q.changeLiveSource(q._player.channel)})}}})};m.fn.ssmp=function(q,r,x,E){if("undefined"===typeof ssmpConfig)return!1;var C=m(this);q||(q=C.data());var N=C.attr("id")?C.attr("id"):"ssmp-"+Math.floor(1E7*Math.random()+1);C.attr("id",N);var R=
N+"-wrapper";N=m("#"+R);0===N.length&&(C.wrap('\x3cdiv class\x3d"ssmp-wrapper" id\x3d"'+R+'"\x3e\x3cdiv class\x3d"ssmp-container"\x3e\x3c/div\x3e\x3c/div\x3e'),N=m("#"+R));C=N.get(0);R=m("#"+R).data("ssmp");var L="object"===typeof q&&q;if("string"===typeof q)return"undefined"!==typeof R?R[q](r,x,E):void 0;"undefined"===typeof R&&N.data("ssmp",R=new D(this,C,L,r));return R};m.fn.ssmp.Constructor=D})(jQuery,window,document,void 0);
var ssmpConfig={thumbTemp:"undefined"!==typeof thumbUrl?thumbUrl:"",defaultPoster:"",hasDVR:!1,liveStreams:"undefined"!==typeof oLiveStreams?oLiveStreams:{}},ssVideoPlayer={oPdSetting:{auto:{n:"qvcpdap",v:!0}},aVideos:[],dataKeys:{product:"qvc-product-video",recipe:"qvc-recipe-video",programGuide:"qvc-programguide-video",live:"ssmplive"},curChannel:"",bPdShowVideo:!1,bPdAutoPlay:!1,muted:!1,scrolling:!1,sThumbPath:ssmpConfig.thumbTemp,lastScrollTop:0,squeezeback:!1,squeezing:!1,squeezeMaxWidth:500,
squeezeMinWidth:300,squeezeInterval:200,squeezePoint:0,player:"ssmp",client:"",init:function(m){var r=this;m=$("undefined"!==typeof m?m:".ssvideo");r.parseMediaJSON();r.addTranslations();$.each(m,function(m){0===m&&(ssmpConfig.apiKey="string"===typeof $(this).data("key")?$(this).data("key"):"",ssmpConfig.hasDVR="boolean"===typeof $(this).data("dvr")?$(this).data("dvr"):!1);r.build(this)});0<$(".videoGalleryCarousel").length&&r.addVideoGalleryCarousel()},parseMediaJSON:function(){var m=this;$("script.mediaJSON").each(function(){var r=
$(this),x=r.data("datakey");r=JSON.parse(r.html());"undefined"!==typeof r.video&&(m.aVideos[x]=r.video)})},getVideoList:function(m){m=this.getCurrentPlayerId(m);if("undefined"===typeof m)return[];m=this.aVideos[m];return"undefined"!==typeof m?m:[]},getCurrentVideoId,setCurrentVideoId,getCurrentPlayerId:function(m){return m.prop("id")},getPlayerClient,
build:function(m){m=$(m);var r=this.getVideoList(m),x=m.data("player-type");this.squeezeback=!platform.device&&!!m.data("squeezeback");this.client=m.data("client");m.data("callback","ssVideoPlayer.playerEventHandler");"proddetail"===x&&0<r.length?(x=this.addPdVideoThumbs(),this.bPdAutoPlay=this.readPdInitSettings(m.data("autoplay")),$(".productVideo").hasClass("hiddenStage")&&(this.bPdAutoPlay=!1),this.muted=this.bPdAutoPlay,m.data({autoplay:this.bPdAutoPlay,muted:this.muted}),this.addVideoStreams(m,
r[x])):"content"===x&&0<r.length?this.addVideoStreams(m,r[0]):"gallery"===x&&0<r.length?(this.addVideoStreams(m,r[0]),this.addVideoGallery(m,r)):"live"===x&&(ssmpConfig.defaultPoster=m.data("poster"),this.updateLiveStreams(),this.setCurChannel(m));!1!==platform.device&&(this.muted=!1,m.data("muted",this.muted));"ssmp"===this.player&&(m.ssmp(),this.squeezeback&&this.attachSqueezeBack())},addVideoGallery:function(m){var r=this;m=m.closest('[data-component-type\x3d"VIDEO_GALLERY"]');var x=m.find(".videoGallery");
m.find(".videoCarousel .carouselItem button").each(function(){$(this).click(function(m){m.preventDefault();m=$(this).data("video-id");r.selectVideo(m,x.data("datakey"))})})},addVideoGalleryCarousel:function(){var m=this,r=$(".videoGalleryCarousel");r.on("click",".carouselItem .qBtnLink button.vjs-big-play-button",function(r){r.preventDefault();r=$(r.currentTarget);m.createVideoCarousel(r.closest("a.qBtnLink"));qvcCarousel.carScrollToItem(r.closest(".carouselItem"))});r.on("click",".carArrow",function(m){$(m.currentTarget).closest(".videoGalleryCarousel").find(".video-js").each(function(){$(this).ssmp("pause")})})},
getDefaultChannel:function(){return"undefined"!==typeof liveDefaultChannel&&""!==liveDefaultChannel?liveDefaultChannel:"qvc"},setCurChannel:function(m,r){this.curChannel=r=(r||this.getDefaultChannel()).toUpperCase();$(m).data("channel",r)},changeChannel:function(m){var r=$("#"+shopLiveTV.player.id),x=r.closest(".videoPlayer");m=(m||this.getDefaultChannel()).toUpperCase();this.setCurChannel(m);"ssmp"===this.player&&(platform.device?r.ssmp("changeChannel",m):r.ssmp("changeLiveSource",m),x.trigger("ssmp.changeChannel",
[shopLiveTV.player.id]))},updateLiveStreams:function(){$.each(ssmpConfig.liveStreams,function(m,r){ssmpConfig.liveStreams[m].poster=ssmpConfig.defaultPoster;"undefined"!==typeof r.url&&(ssmpConfig.liveStreams[m].hls=r.url)})},addVideoStreams:function(m,r){if("undefined"!==typeof r&&"object"===typeof r.encodings&&r.encodings instanceof Array){var x=r.encodings;r=r.webVtt;"string"===typeof r?m.data("captions",r):m.removeData("captions");for(r=0;r<x.length;r++)if("undefined"!==typeof x[r].platformCode)switch(x[r].platformCode){case "HttpLiveStreaming":m.data("hls",
x[r].url);break;case "MobileH264":m.data("mp4",x[r].url)}}},getVideoThumb:function(m){var r="";if("undefined"!==typeof m){var x=m.thumbnails;if("object"===typeof x&&x instanceof Array&&0<x.length){r=x[0];for(var D=0,E=0;E<x.length;E++)if("string"===typeof x[E]&&-1<x[E].indexOf("x")){var q=x[E].match(/(\.|\/)\d{1,}x/);null!==q&&1<q.length&&(q=parseInt(q[0].replace(/(\.|\/|x)/g,"")),D<q&&(D=q,r=x[E]))}}""===r&&"undefined"!==typeof m.mediaId&&(r=this.sThumbPath.replace("[0]",m.mediaId))}return urlManager.removeProtocol(r)},
getVideoTitle:function(m){var r="string"===typeof m.videoType?m.videoType.toLowerCase():"";return"string"===typeof m.title?m.title.replace(/"/gi,"\x26quot;"):"onair"===r?i18n.get("On Air Presentation"):i18n.get("Bonus Video")},readPdInitSettings:function(m){var r=qCookie.get(this.oPdSetting.auto.n);"undefined"===typeof r||"false"!==r&&!qViewport.is("tn")||(m=!1);this.setPdSettings("auto",m);return m},setPdSettings:function(m,r){"undefined"!==typeof this.oPdSetting[m]&&(this.oPdSetting[m].v=r);if("undefined"===
typeof bStore||"boolean"===typeof bStore&&bStore){var x={path:"/"};"auto"===m&&(x.expires=999,this.bPdAutoPlay=r);"undefined"!==typeof this.oPdSetting[m]&&qCookie.set(this.oPdSetting[m].n,r,x)}},addPdVideoThumbs:function(){var m=this,r="",x=!1,D="",E=0,q=qCookie.get("qvcpdvideoshow"),Z=qGet.urlParam("vid");m.bPdShowVideo="boolean"===typeof defaultToVideo?defaultToVideo:!0;if("undefined"!==typeof q&&"false"===q||null!==Z&&"n"===Z.toLowerCase())m.bPdShowVideo=!1;$.each(m.aVideos[m.dataKeys.product],
function(q,Z){var C=m.getVideoThumb(Z),N=m.htmlEntities(m.getVideoTitle(Z));D="";"onair"===Z.videoType.toLowerCase()&&!1===x&&(x=!0,m.bHasOnAir=!0,D=" videoOnAir-tn",$(".productThumbnails .videoOnAir").attr("data-video-id",Z.mediaId),$(".productThumbnails .videoOnAirThumb").attr("title",N),$(".productThumbnails .videoOnAirThumb").html('\x3cimg src\x3d"'+C+'" alt\x3d"'+N+'" /\x3e'),$(".productThumbnails .videoOnAirLabel p").html(""),m.bPdShowVideo&&$(".videoOnAir").attr("state","selected"),$(".videoOnAir").show(),
E=q);r+='\x3cdiv class\x3d"video'+D+'" data-video-id\x3d"'+Z.mediaId+'" state\x3d"default"\x3e\x3cdiv class\x3d"videoThumb" tabindex\x3d"0" title\x3d"'+N+'"\x3e\x3cimg src\x3d"'+C+'" alt\x3d"'+N+'"/\x3e\x3c/div\x3e\x3c/div\x3e'});!qViewport.is("tn")&&m.bHasOnAir&&m.bPdShowVideo&&m.maybeToggleVideo("show");m.bHasOnAir||($(".productThumbnails .videoOnAir").remove(),$(".productThumbnails .thumbGroup").removeClass("col-md-9"));""!==r&&($(".productThumbnails .videoThumbnails").html(r),m.addPdListner());
return E},getTouchCoord:function(m,r){return/touch/.test(m.type)?(m.originalEvent||m).changedTouches[0]["page"+r]:m["page"+r]},attachSqueezeBack:function(){var m=this,r=$("#"+m.dataKeys.live),x=r.closest(".ssmp-wrapper");1>x.siblings(".ssmp-placeholder").length&&x.before($('\x3cdiv class\x3d"ssmp-placeholder hidden"\x3e\x3c/div\x3e'));m.squeezePoint=r.offset().top;$(window).on("scroll",function(){m.toggleSqueezeBack()});$(window).resize(function(){qViewport.is("\x3cmd")&&x.hasClass("pinnedVideo")&&
m.removeSqueezeBack()})},removeSqueezeBack:function(){var m=this,r=$("#"+m.dataKeys.live),x=r.closest(".ssmp-wrapper"),D=x.siblings(".ssmp-placeholder"),E=x.closest("[data-player-type]").data("player-type");x.hasClass("pinnedVideo")&&(r.finish(),x.removeClass("pinnedVideo"),r.parent().removeClass("container"),D.addClass("hidden"),r.trigger("squeezeback",[!1]),r.animate({width:x.width()},m.squeezeInterval,function(){"live"===E&&"undefined"!==typeof shopLiveTV?shopLiveTV.buybox.appendBuybox(!1):"content"===
E&&m.appendContentBox(r,!1)}))},addSqueezeBack:function(){var m=$("#"+this.dataKeys.live),r=m.closest(".ssmp-wrapper"),x=r.siblings(".ssmp-placeholder"),D=r.closest("[data-player-type]").data("player-type");r.hasClass("pinnedVideo")||(m.finish(),m.width(this.squeezeMaxWidth),r.addClass("pinnedVideo"),m.parent().addClass("container"),"live"===D&&"undefined"!==typeof shopLiveTV&&m.parent().append($(shopLiveTV.buybox.id)),m.trigger("squeezeback",[!0]),m.animate({width:this.squeezeMinWidth},this.squeezeInterval,
function(){x.height(r.height()+20);x.removeClass("hidden")}))},toggleSqueezeBack:function(){var m=$(window).scrollTop();m>this.lastScrollTop&&0>=this.squeezePoint-m&&qViewport.is("\x3e\x3dmd")?this.addSqueezeBack():0<=this.squeezePoint-m&&this.removeSqueezeBack();this.lastScrollTop=m},createVideoCarousel:function(m){var r=m.data("video-id"),x=m.closest(".videoGalleryCarousel"),D=m.closest(".carouselItem"),E=x.data("key");m="qvc"+x.data("country-code");"undefined"===typeof ssmpConfig.apiKey&&(ssmpConfig.apiKey=
E);x.find(".video-js").each(function(m,q){videojs.getPlayer($(q).attr("id")).dispose()});x.find(".videoPlayer").remove();var q=x.data("datakey");x=this.getVideoData(r,q);var Z=this.getVideoThumb(x),R=$('\x3cdiv class\x3d"videoPlayer" data-vid\x3d"'+r+'" data-player-type\x3d"carousel" data-client\x3d"'+m+'"/\x3e');E=$('\x3cdiv id\x3d"'+q+'" class\x3d"ssvideo" data-key\x3d"'+E+'" data-squeezeback\x3d"false" data-autoplay\x3d"true" data-muted\x3d"false" data-client\x3d"'+m+'" data-type\x3d"vod" data-dvr\x3d"false" data-carousel\x3d"false" data-player-type\x3d"content" data-poster\x3d"'+
Z+'" data-custom-poster\x3d"true" data-width\x3d"100%" /\x3e');r&&E.data("uvid",r);E.data("callback","ssVideoPlayer.playerEventHandler");this.client=m;this.addVideoStreams(E,x);R.append(E);D.prepend(R);this.setCurrentVideoId(E,r.toString());E.ssmp().play();setTimeout,500)},getVideoData:function(m,r){m=String(m);r=this.aVideos[r];if("undefined"!==typeof r)return r.filter(function(r){return r.mediaId===m})[0]},maybeToggleThumbs:function(m,r){r=
$("#"+r).closest('[data-component-type\x3d"VIDEO_GALLERY"]');$(".video").attr("state","");r.length&&(r=r.find(".videoCarousel .qBtnLink"),r.attr("state",""),r.filter('[data-video-id\x3d"'+m+'"]').attr("state","selected"))},selectVideo:function(m,r){m=String(m);var x=$("#"+r),D=this.getCurrentVideoId(x);this.maybeToggleThumbs(m,r);D!==m?(this.setCurrentVideoId(x,m),this.playVideo(m,x)):this.playVideo(null,x);"product"===qVars.pageType&&this.maybeToggleVideo("show")},playNextVideo:function(m){for(var r=
m.closest("[data-player-type]").data("player-type"),x=this.getCurrentVideoId(m),D=this.getVideoList(m),E,q=0;q<D.length;q++)if(D[q].mediaId===x&&q<D.length-1){E=D[q+1];break}"undefined"===typeof E?"gallery"===r?this.resetPlayer(m):"carousel"===r&&(m=m.closest(".videoGalleryCarousel"),m.find(".video-js").each(function(m,q){videojs.getPlayer($(q).attr("id")).dispose()}),m.find(".videoPlayer").remove()):"gallery"===r?this.selectVideo(E.mediaId,m.prop("id")):"carousel"===r&&(m=m.closest('[data-component-type\x3d"VIDEO_GALLERY"]').find('.qBtnLink[data-video-id\x3d"'+
E.mediaId+'"] .vjs-big-play-button'),this.createVideoCarousel(m.closest("a.qBtnLink")),qvcCarousel.carScrollToItem(m.closest(".carouselItem")))},addPdListner:function(){var m=this,r=$(".productThumbnails .video");r.click(function(r){r.preventDefault();if(qViewport.is("\x3etn")||!m.scrolling)r=$(this),m.selectVideo(r.data("video-id"),m.dataKeys.product),r.attr("state","selected")});r.on("touchstart",function(r){m.startX=m.getTouchCoord(r,"X");m.startY=m.getTouchCoord(r,"Y");m.scrolling=!0});r.on("touchend",
function(r){m.scrolling=!1;qViewport.is("tn")&&1>Math.abs(m.getTouchCoord(r,"Y")-m.startY)&&1>Math.abs(m.getTouchCoord(r,"X")-m.startX)&&(r=$(this),m.selectVideo(r.data("video-id"),m.dataKeys.product),r.attr("state","selected"))});r.keydown(function(m){if(13===m.which||32===m.which)m.preventDefault(),$(this).click()})},setPdUserAutoPlay,getPdAutoPlay:function(m,r){var x=!1;(!0===this.oPdSetting.auto.v||!1!==this.oPdSetting.auto.v&&!0===m)&&!qViewport.is("tn")&&
r&&(x=!0);return x},setVideoVolume:function(m,r){m=$("#"+m).find("video")[0];"undefined"!==typeof m&&(m.volume=r)},setPdPlayerVolume:function(m){this.setPdSettings("volume",m);this.setVideoVolume(this.dataKeys.product,m)},switchToPrimaryPdImage:function(){this.maybeToggleVideo("hide");this.maybeResetSwatches()},pauseVideo:function(m){m=$("#"+m);0<m.length&&m.ssmp("pause")},getVideoStatus:function(m){m=$("#"+m);return 0!==m.length?m.ssmp("status"):""},isPlaying:function(m){m=$("#"+m);return 0!==m.length?
m.ssmp("isPlaying"):!1},adjustAspectRatio:function(){var m=window.screen.width,r=window.screen.height;return m/r!==16/9?(r-m/16*9)/2:0},appendContentBox:function(m,r){!1===platform.device&&(r?(r=ssVideoPlayer.adjustAspectRatio()+"px",m.closest("#videoWrapper").find(".videoDescription").css("top",r),m.append(m.closest("#videoWrapper").find(".videoDescription"))):(m.find(".videoDescription").css("top",""),m.closest("#videoWrapper").append(m.find(".videoDescription"))))},playVideo:function(m,r){var x=
r.closest(".videoPlayer"),D=x.data("player-type");if(null!==m){var E=this.getCurrentPlayerId(r);E=this.getVideoData(m,E);this.addVideoStreams(r,E);r.data("poster",this.getVideoThumb(E));"undefined"!==typeof r.data("hls")?r.ssmp("gallery"===D?"changeMediaInline":"changeMedia",{poster:r.data("poster"),hls:r.data("hls"),mp4:r.data("mp4"),captions:r.data("captions"),type:x.data("player-type")}):r.ssmp("uvid",m);x.trigger("ssmp.changeMedia")}r.ssmp("play")},addTranslations:function(){ssmpConfig.langCode=
i18n.getLocale().replace("_","-");var m={Play:i18n.get("Play"),Pause:i18n.get("Pause"),"Current Time":i18n.get("Current Time"),"Duration Time":i18n.get("Duration Time"),"Remaining Time":i18n.get("Remaining Time"),"Stream Type":i18n.get("Stream Type"),LIVE:i18n.get("LIVE"),Loaded:i18n.get("Loaded"),Progress:i18n.get("Progress"),Fullscreen:i18n.get("Fullscreen"),"Non-Fullscreen":i18n.get("Non-Fullscreen"),Mute:i18n.get("Mute"),Unmute:i18n.get("Unmute"),"Playback Rate":i18n.get("Playback Rate"),Subtitles:i18n.get("Subtitles"),
"subtitles off":i18n.get("Subtitles Off"),Captions:i18n.get("Captions"),"captions off":i18n.get("Captions Off"),Chapters:i18n.get("Chapters"),"Close Modal Dialog":i18n.get("Close Window"),Descriptions:i18n.get("Descriptions"),"descriptions off":i18n.get("Descriptions Off"),"Audio Track":i18n.get("Audio Track"),"You aborted the media playback":i18n.get("You have stopped the video"),"A network error caused the media download to fail part-way.":i18n.get("The video has not downloaded fully due to a network error."),
"The media could not be loaded, either because the server or network failed or because the format is not supported.":i18n.get("The video cannot be downloaded as there appears to be a problem with the server or network, or because the format cannot be supported."),"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":i18n.get("The video playback ended as the video may be corrupted or because it used features your browser did not support."),
"No compatible source was found for this media.":i18n.get("This video is not supported by your device."),"The media is encrypted and we do not have the keys to decrypt it.":i18n.get("There appears to be a problem with this video, please try again later."),"Play Video":i18n.get("Play"),Close:i18n.get("Close"),"Modal Window":i18n.get("Modal Window"),"This is a modal window":i18n.get("This is a modal window"),"This modal can be closed by pressing the Escape key or activating the close button.":i18n.get("Close this window by pressing the Escape key or the close button."),
", opens captions settings dialog":i18n.get(", Open captions settings window"),", opens subtitles settings dialog":i18n.get(", Open subtitles settings window"),", opens descriptions settings dialog":i18n.get(", Open descriptions settings window"),", selected":i18n.get(", Selected")};ssmpConfig.lang=m},adjustCCTitle:function(m){if(0<m.length){var r=i18n.get("Captions On");m.find(".vjs-menu-content .vjs-menu-item-text").filter(function(){return $.trim($(this).text()).match(/^(cc1|unknown|en)/i)}).html(r);
m.find('.vjs-menu-content .vjs-menu-item-text:contains("'+r+'")').eq(1).parent().remove();m.find("[kind\x3dcaptions]").attr("label",r)}},maybeToggleVideo,maybeResetSwatches,pauseOtherPlayers:function(m){$(".video-js").not(m).each)},resetPlayer:function(m){var r=videojs.getPlayer(m.prop("id"));m.removeClass("vjs-has-started");m.find(".vjs-big-play-button").attr("title",
i18n.get("Play"));m.find(".vjs-big-play-button .vjs-control-text").html(i18n.get("Play"));r.hasStarted(!1);m.closest(".videoClip").find(".videoDescription").removeClass("vidStarted");r.isFullscreen()&&r.exitFullscreen()},playerEventHandler:function(m){var r=this;if("undefined"!==typeof m){var x=$("#"+m.tagAttributes.id),D=x.closest("[data-player-type]").data("player-type");m.one("timeupdate",function(){r.adjustCCTitle(x)});m.on("canplaythrough",function(){r.adjustCCTitle(x)});m.on("loadedmetadata",
function(){r.adjustCCTitle(x)});m.on("firstplay",function(){"content"===D&&x.closest(".videoClip").find(".videoDescription").addClass("vidStarted")});m.on("play",function(){"live"===D&&"undefined"!==typeof shopLiveTV?(shopLiveTV.player.togglePlay(!0),r.pauseOtherPlayers(x)):"content"===D&&x.closest(".videoClip").find(".videoDescription").addClass("vidPlaying");"content"!==D&&"gallery"!==D&&"carousel"!==D&&"programguide"!==D&&"proddetail"!==D||r.pauseOtherPlayers(x);r.adjustCCTitle(x);for(var E=m.textTracks(),
q=0;q<E.length;q++)E[q].addEventListener("cuechange",function(){"undefined"!==typeof this.activeCues&&0<this.activeCues.length&&(this.activeCues[0].text=this.activeCues[0].text.replace(/>\s?/g,""))})});m.on("pause",function(){"live"===D&&"undefined"!==typeof shopLiveTV?shopLiveTV.player.togglePlay(!1):"content"===D&&x.closest(".videoClip").find(".videoDescription").removeClass("vidPlaying")});m.on("useractive",function(){"content"===D&&x.closest(".videoClip").find(".videoDescription").removeClass("vidInactive")});
m.on("userinactive",function(){"content"===D&&x.closest(".videoClip").find(".videoDescription").addClass("vidInactive")});m.on("ended",function(){"proddetail"===D?r.switchToPrimaryPdImage():"gallery"===D||"carousel"===D?r.playNextVideo(x):"content"===D&&r.resetPlayer(x)});m.on("fullscreenchange",function(){var E=m.isFullscreen();"live"===D&&"undefined"!==typeof shopLiveTV?(shopLiveTV.buybox.setLayerLeftPos(),shopLiveTV.buybox.setLayerHeight(),shopLiveTV.buybox.appendBuybox(E),shopLiveTV.player.appendChannelMenu(E)):
"content"===D&&r.appendContentBox(x,E)});"product"===qVars.pageType&&$("html").hasClass("mh-mobile-display")&&(r.setPdUserAutoPlay(!1),r.setPdPlayerVolume(0),r.maybeToggleVideo("show"),$(".videoOnAir-tn").attr("state","selected"))}},htmlEntities:function(m){return $("\x3cp\x3e\x3c/p\x3e").text(String(m)).html().replace(/"/g,"\x26quot;")}};$);
var shopLiveTV={iroaCarousel:{iMaxCarouselCount:8,bShowCarousel:!0,iHashCode:0,setShowCarousel:function(){shopLiveTV.iroaCarousel.bShowCarousel="undefined"!==typeof ssmpConfig&&ssmpConfig.liveStreams[shopLiveTV.player.curChannel]&&ssmpConfig.liveStreams[shopLiveTV.player.curChannel].iroaAvailable},setMaxCarouselCount:function(){var m=$(".shopLiveTvIroaWrapper").data("max-count");"undefined"!==typeof m&&(shopLiveTV.iroaCarousel.iMaxCarouselCount=parseInt(m))},adjustIroaCarousel:function(){shopLiveTV.iroaCarousel.bShowCarousel&&
($(".shopLiveTvIroaItem").eq(0).data("item-id")===$(".shopLiveTvIroaItem").eq(1).data("item-id")?$(".shopLiveTvIroaItem").eq(1).remove():$(".shopLiveTvIroaItem").length>shopLiveTV.iroaCarousel.iMaxCarouselCount&&$(".shopLiveTvIroaItem:last").remove())},updateIoaCarouselItem:function(){if(shopLiveTV.iroaCarousel.bShowCarousel){var m=$(".shopLiveTvIroaItem").eq(0).data("item-id");"undefined"!==typeof m&&m!==shopLiveTV.buybox.curItemId&&""!==m&&""!==shopLiveTV.buybox.curItemId&&($oTemp=$(".shopLiveTvIroaItem:first").clone(),
0===$oTemp.find(".itemDatas").length&&$(shopLiveTV.buybox.id+" .iroaItemHiddenDatas").find(".itemDatas").remove(),$oTemp.find(".iroaItem").html($(shopLiveTV.buybox.id+" .iroaItemHiddenDatas").html()),$(".shopLiveTvIroa").prepend($oTemp.hide()),$(".shopLiveTvIroaItem").length>shopLiveTV.iroaCarousel.iMaxCarouselCount&&$(".shopLiveTvIroaItem:last").remove(),$(".shopLiveTvIroaItem:first").toggle("slow"))}},updateSC:function(){$(".iroaItemLink").prop("href",function(m,r){scValue=void 0!==ssmpConfig.liveStreams[shopLiveTV.player.curChannel].sc?
ssmpConfig.liveStreams[shopLiveTV.player.curChannel].sc.replace(/@/g,"AT"):ssmpConfig.liveStreams[shopLiveTV.player.curChannel].name.replace(/\s/,"").toUpperCase();return urlManager.addParam(r,"sc",scValue)})},update:function(m){"undefined"!==typeof m&&!0===shopLiveTV.iroaCarousel.bShowCarousel?(m=$(m).filter(".shopLiveTvIroaWrapper"),0<m.length?void 0!==m.data("hash-code")&&m.data("hash-code")!==shopLiveTV.iroaCarousel.iHashCode&&(shopLiveTV.iroaCarousel.iHashCode=m.data("hash-code"),$('[data-component-type\x3d"SHOP_LIVE_TV_IROA"]').html(m),
$(".shopLiveTvIroaItem").eq(0).find(".iroaItemLink").prepend($('\x3cspan class\x3d"sr-only"\x3e'+i18n.get("item on air")+"\x3c/span\x3e")),$(".shopLiveIroaWrapper").is(":hidden")&&$(".shopLiveIroaWrapper").slideDown(1E3),shopLiveTV.iroaCarousel.updateSC(),$("#"+shopLiveTV.player.id).trigger("shopLiveTV.iroaUpdate")):($(".shopLiveIroaWrapper").hide(),shopLiveTV.iroaCarousel.iHashCode=0)):($(".shopLiveIroaWrapper").slideUp(1E3),shopLiveTV.iroaCarousel.iHashCode=0);document.dispatchEvent(new Event("shopLiveContentUpdated"))},
init:function(){0<$('[data-component-type\x3d"SHOP_LIVE_TV_IROA"]').length&&(this.setMaxCarouselCount(),this.setShowCarousel(),this.adjustIroaCarousel())}},player:{curChannel:"",curShowTitle:"",id:ssVideoPlayer.dataKeys.live,sMenu:".channelSelector",sPlayerType:"live",bPaused:!1,bFirstLivePlay:!0,setPlayerType:function(m){var r=$("#"+ssVideoPlayer.dataKeys.live);this.sPlayerType="string"===typeof m?m:0<r.length?r.parents(".videoPlayer").data("player-type"):this.sPlayerType},setCurChannel:function(m){shopLiveTV.player.curChannel=
(m||ssVideoPlayer.getDefaultChannel()).toUpperCase();$(shopLiveTV.player.sMenu+" a").removeClass("activeChannel");$(shopLiveTV.player.sMenu+" a[data-channelcode\x3d"+shopLiveTV.player.curChannel+"]").addClass("activeChannel");$(".liveTvWrapper").attr("data-channelcode",shopLiveTV.player.curChannel);shopLiveTV.buybox.setShowBuybox();shopLiveTV.player.moveCurChannelToView()},channelMenu:function(){$(shopLiveTV.player.sMenu+' a[data-channelcode\x3d"'+shopLiveTV.player.curChannel+'"]').addClass("activeChannel");
$(shopLiveTV.player.sMenu+" a").each(function(){var m=$(this);m=void 0!==m.data("channelcode")?m.data("channelcode"):"";"undefined"!==typeof ssmpConfig&&ssmpConfig.liveStreams[m]&&!1===ssmpConfig.liveStreams[m].iroaAvailable&&(ssmpConfig.liveStreams[m].showBuyBox=!1)});$(".liveTvWrapper").attr("data-channelcode",shopLiveTV.player.curChannel)},appendChannelMenu:function(m){var r=$("#"+shopLiveTV.player.id);platform.device||(m?0<r.find(".videoBottom").length?$(".videoBottom").prepend($(shopLiveTV.player.sMenu)):
r.prepend($(shopLiveTV.player.sMenu)):$(".liveTvWrapper").prepend($(shopLiveTV.player.sMenu)))},updateShowTitle:function(m){var r=$("#"+shopLiveTV.player.id);"undefined"!==typeof m?(m=$(m).filter(".shopLiveTvIroaWrapper"),0<m.length&&void 0!==m.data("show-title")&&""!==m.data("show-title")&&(m.data("show-title")!==shopLiveTV.player.curShowTitle&&(r.trigger("shopLiveTV.showChange",{old:shopLiveTV.player.curShowTitle,"new":m.data("show-title")}),shopLiveTV.player.curShowTitle=m.data("show-title")),
"ssmp"===ssVideoPlayer.player&&r.ssmp("updateEpg"))):(shopLiveTV.player.curShowTitle="",r.find(".vjs-live-display").html(ssmpConfig.liveStreams[shopLiveTV.player.curChannel].name))},togglePlay:function(m){"boolean"===typeof m&&(shopLiveTV.player.setPlayerType(),shopLiveTV.player.bPaused=!m,!0===m&&("live"===shopLiveTV.player.sPlayerType?(shopLiveTV.buybox.curItemId="",shopLiveTV.player.bFirstLivePlay=!1,shopLiveTV.webWorker.update(!0)):"vod"===shopLiveTV.player.sPlayerType&&shopLiveTV.buybox.hideLayer()))},
moveCurChannelToView:function(){for(var m=$(".channelSelector .channels"),r=$(".activeChannel"),x=r.index(),D=0,E=m.find("a"),q=0;q<x;q++)D+=$(E[q]).outerWidth(!0);m.animate({scrollLeft:Math.max(0,D-(m.width()-r.outerWidth(!0))/2)},500)},changeChannel:function(m){shopLiveTV.player.bFirstLivePlay=!0;ssVideoPlayer.changeChannel(m);shopLiveTV.iroaCarousel.setShowCarousel();shopLiveTV.webWorker.update(!0)},clickMenuItem:function(m){m=$(m);m.hasClass("activeChannel")||(shopLiveTV.player.setCurChannel(m.data("channelcode")),
shopLiveTV.buybox.curItemId="",shopLiveTV.buybox.hideLayer(function(){shopLiveTV.buybox.toggleMobileBuyBtn(!1);shopLiveTV.player.changeChannel(shopLiveTV.player.curChannel)}))},updateLiveStream:function(){var m="";"undefined"===typeof cm_data&&"object"===typeof ssmpConfig&&ssmpConfig.liveStreams&&$.each(ssmpConfig.liveStreams,function(r){ssmpConfig.liveStreams[r].name?(m=ssmpConfig.liveStreams[r].name.replace(/^qvc$/i,"LIVE").replace(/qvc\s|\s/ig,"").toUpperCase(),ssmpConfig.liveStreams[r].sc=m,$('[data-channelcode\x3d"'+
r+'"]').attr("data-sc",m)):ssmpConfig.liveStreams[r].sc="LIVE"})},addListener:function(){$(shopLiveTV.player.sMenu+" a").click(function(m){m.preventDefault();shopLiveTV.player.clickMenuItem(this)})},init},buybox:{curItemId:"",oOnAirItemTimeout:null,iOnAirItemTimeout:3E4,iLayerLeftPos:20,iAnimDuration1:500,iAnimDuration2:200,id:"#qProdOverlay",contentId:"#buyBoxProdData",toggleBtnId:"#toggleBuybox",
mobileBtnId:"#liveTvMobileBuyBtn",bShowBuybox:!0,oNewWindow:null,addElements:function(){var m=$(shopLiveTV.buybox.id);m.html('\x3ca href\x3d"#" id\x3d"'+shopLiveTV.buybox.toggleBtnId.replace("#","")+'"\x3e\x3c/a\x3e\x3cdiv id\x3d"'+shopLiveTV.buybox.contentId.replace("#","")+'"\x3e\x3c/div\x3e');m.after('\x3cbutton type\x3d"button" data-href\x3d"" id\x3d"'+shopLiveTV.buybox.mobileBtnId.replace("#","")+'" class\x3d"btn btn-primary hidden-sm hidden-md hidden-lg"\x3e'+i18n.get("Shop")+"\x3c/button\x3e");
shopLiveTV.buybox.toggleMobileBuyBtn(!1)},setShowBuybox:function(){shopLiveTV.buybox.bShowBuybox="undefined"!==typeof ssmpConfig&&ssmpConfig.liveStreams[shopLiveTV.player.curChannel]&&ssmpConfig.liveStreams[shopLiveTV.player.curChannel].showBuyBox},setLayerLeftPos:function(){var m=$(shopLiveTV.buybox.id);0<m.length&&(m.hasClass("hiddenBuyBox")?m.css("left",-1*m.outerWidth(!0)):shopLiveTV.buybox.iLayerLeftPos=parseInt(m.css("left","").css("left").replace("px","")))},setLayerHeight:function(){var m=
$(shopLiveTV.buybox.id),r=0<$(".video-js").length?$(".video-js"):$(".videoBox");m.outerHeight()+m.position().top+10>r.outerHeight()?m.css("height",r.outerHeight()-m.position().top-10):m.css("height","auto")},toggleMobileBuyBtn:function(m){$(shopLiveTV.buybox.mobileBtnId).css("display",!0===m&&shopLiveTV.buybox.bShowBuybox?"block":"none")},appendBuybox:function(m){var r=$("#"+shopLiveTV.player.id),x=r.parents(".ssmp-wrapper");!1!==platform.device?toggleMobileBuyBtn(!m):(m?0<r.find(".videoBottom").length?
$(".videoBottom").append($(shopLiveTV.buybox.id)):r.append($(shopLiveTV.buybox.id)):x.hasClass("pinnedVideo")?r.parent().append($(shopLiveTV.buybox.id)):$("#videoWrapper").append($(shopLiveTV.buybox.id)),shopLiveTV.buybox.setLayerLeftPos(),shopLiveTV.buybox.setLayerHeight())},updateSC:function(){var m="";$(shopLiveTV.buybox.id+" .shopBtn a.btn").each(function(){scValue=void 0!==ssmpConfig.liveStreams[shopLiveTV.player.curChannel].sc?ssmpConfig.liveStreams[shopLiveTV.player.curChannel].sc.replace(/@/g,
"AT"):ssmpConfig.liveStreams[shopLiveTV.player.curChannel].name.replace(/\s/,"").toUpperCase();this.href=m=urlManager.addParam(this.href,"sc",scValue)});$(shopLiveTV.buybox.mobileBtnId).attr("data-href",m)},update:function(m){if("undefined"!==typeof m&&!0===shopLiveTV.buybox.bShowBuybox){if(m=$(m).filter(".shopLiveTvIroaWrapper").find(".onAirActualDatas"),0<m.length){var r=m.data("curitemid");"undefined"!==typeof r&&""!==r&&r!==shopLiveTV.buybox.curItemId&&(shopLiveTV.buybox.curItemId=r,shopLiveTV.buybox.toggleLayer(m),
shopLiveTV.buybox.toggleMobileBuyBtn(!0),$("#"+shopLiveTV.player.id).trigger("shopLiveTV.ioaUpdate"))}}else shopLiveTV.buybox.hideLayer(),shopLiveTV.buybox.toggleMobileBuyBtn(!1)},hideLayer:function(m,r){var x=$(shopLiveTV.buybox.id);x.is(":hidden")?"function"===typeof m&&m():x.animate({left:-1*(x.outerWidth(!0)+40)+"px"},"undefined"!==typeof r?r:shopLiveTV.buybox.iAnimDuration1,function(){x.hide().removeClass("hiddenBuyBox");"function"===typeof m&&m()})},toggleLayer:function(m){var r=$(shopLiveTV.buybox.id);
shopLiveTV.buybox.toggleMobileBuyBtn(!0);r.is(":hidden")?($(shopLiveTV.buybox.contentId).html(m),shopLiveTV.buybox.updateSC(),r.css({left:-1*(r.outerWidth(!0)+40)}).show().animate({left:shopLiveTV.buybox.iLayerLeftPos},shopLiveTV.buybox.iAnimDuration1),shopLiveTV.buybox.setLayerHeight(),shopLiveTV.iroaCarousel.updateIoaCarouselItem()):r.hasClass("hiddenBuyBox")?$(shopLiveTV.buybox.contentId).html(m):shopLiveTV.buybox.hideLayer(function(){$(shopLiveTV.buybox.contentId).html(m);r.show().animate({left:shopLiveTV.buybox.iLayerLeftPos},
shopLiveTV.buybox.iAnimDuration1);shopLiveTV.buybox.updateSC();shopLiveTV.buybox.setLayerHeight();shopLiveTV.iroaCarousel.updateIoaCarouselItem()})},addListener:function(){$(".liveTvWrapper").on("click",shopLiveTV.buybox.id+" .btn",function(m){m.preventDefault();shopLiveTV.buybox.oNewWindow&&!1!==platform.device&&shopLiveTV.buybox.oNewWindow.close();shopLiveTV.buybox.oNewWindow=window.open(this.href,"QVC Shoplive Buybox");shopLiveTV.buybox.oNewWindow.focus()});$(".liveTvWrapper").on("click",shopLiveTV.buybox.mobileBtnId,
function(){shopLiveTV.buybox.oNewWindow&&!1!==platform.device&&shopLiveTV.buybox.oNewWindow.close();shopLiveTV.buybox.oNewWindow=window.open($(this).attr("data-href"),"QVC Shoplive Buybox");shopLiveTV.buybox.oNewWindow.focus()});$(shopLiveTV.buybox.toggleBtnId).click(function(m){m.preventDefault();var r=$(shopLiveTV.buybox.id);m=r.hasClass("hiddenBuyBox");shopLiveTV.buybox.toggleMobileBuyBtn(m);m?shopLiveTV.buybox.hideLayer(function(){r.removeClass("hiddenBuyBox").show().animate({left:shopLiveTV.buybox.iLayerLeftPos},
shopLiveTV.buybox.iAnimDuration1)},shopLiveTV.buybox.iAnimDuration2):shopLiveTV.buybox.hideLayer(function(){r.addClass("hiddenBuyBox").show().animate({left:-1*r.outerWidth(!0)},shopLiveTV.buybox.iAnimDuration2)})});$(window).resize)},init},webWorker:function(){var m=null,r=3E4,x=null,D={accepts:"text/html",dataType:"html",
url:""},E=function(){"undefined"!==typeof iroaContentPath&&(D.url=iroaContentPath+"/"+shopLiveTV.player.curChannel.toLowerCase()+".iroashoplive.html");return D.url},q=function(q){var r=$();m?"object"===typeof q&&"object"===typeof q.data&&!1===q.data.err&&q.data.response&&(r=$.parseHTML(q.data.response)):r=$.parseHTML(q);0<r.length&&(shopLiveTV.iroaCarousel.update(r),!1===shopLiveTV.player.bFirstLivePlay&&"live"===shopLiveTV.player.sPlayerType&&(shopLiveTV.buybox.update(r),shopLiveTV.player.updateShowTitle(r)),
m&&$(document).trigger("worker.ajaxComplete"))},Z,R=function(r){""!==E()&&shopLiveTV.iroaCarousel.bShowCarousel?(m?m.postMessage(D):$.ajax($.extend({},D,{success:q,error:Z})),"boolean"===typeof r&&!0===r&&Ra()):(x&&(clearTimeout(x),x=null),shopLiveTV.iroaCarousel.update(),shopLiveTV.buybox.update(),shopLiveTV.player.updateShowTitle())},Ra=function(){x&&(clearTimeout(x),x=null);x=setTimeout,r)};return{init:function(){""!==E()&&
(r="number"===typeof refreshFrequency&&10<refreshFrequency&&300>refreshFrequency?1E3*refreshFrequency:r,"undefined"!==typeof Worker&&(m=new Worker("/etc.clientlibs/qvc-global-commerce/clientlibs/worker.min.js?r\x3d"+(new Date).getTime()),m.addEventListener("message",q,!1),m.addEventListener("error",Z,!1)),R(!0))},update:R}}(),init}
0<$('[data-module-type\x3d"SHOP_LIVE"]').length&&(shopLiveTV.init(),document.addEventListener("shopLiveContentUpdated",function(){qVars.feature.addToCartOffCanvasSidebarShopLive&&$(".shopLiveIroaWrapper .btnAddToCartCanvas").removeClass("hidden")}));