"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5713],{10455:(e,t,i)=>{i.d(t,{j:()=>l});var a=i(50959),s=i(44250),n=i(93709),o=i(48439),r=i(11527);const l=a.memo((function(e){let{uri:t,size:i=n.q.md,className:l,onClick:c,canDownload:d}=e;const[u,g]=(0,s.Z)(t),m=(0,o.o)(),p=(0,a.useCallback)((()=>{m({targetUri:t,intent:u?"unsave":"save",type:"click"}),g(!u)}),[m,t,u,g]);return(0,r.jsx)(n.o,{className:l,isFollowing:u,onFollow:p,onClick:c,uri:t,size:i,canDownload:d})}))},55652:(e,t,i)=>{i.d(t,{V:()=>B,e:()=>R});var a=i(50959),s=i(29132),n=i(12737),o=i(85802),r=i(55147),l=i(31062),c=i(89333),d=i(33325),u=i(90830),g=i(76210),m=i(80323),p=i(84161),x=i(79625),h=i(93019),y=i(48439),v=i(10732),j=i(35142),b=i(22215),k=i(85427),f=i(75744),P=i(453),C=i(29037),S=i(93688),N=i(81085),A=i(99146),w=i(73298),I=i(37959),E=i(73196),U=i(11527);function R(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const D=e=>`activation-trigger-mme-${e}`,B=a.memo((function(e){var t,i,B,T,F;let{index:L=-1,showMetadata:M,episode:O,usePlayContextItem:z,status:_,variant:W}=e;const G=(0,I.E)(),Y=O.playedState.playPositionMilliseconds,H=O.uri,K=(0,a.useRef)(null),[X,q]=(0,a.useState)(O.playedState.state===A.sY.Completed),V=(0,h.O)(),Z=(0,v.g)(),$=(0,C.jh)(),Q=(0,y.o)(),J=(0,s.I0)(),{UBIFragment:ee,spec:te,logger:ie}=(0,N.fU)(o.createDesktopEpisodeBlockEventFactory,{data:{uri:H,reason:O.requestId||"",position:L}}),ae=(0,N.Wi)(te),{isActive:se,isPlaying:ne,togglePlay:oe}=z({uri:H}),[re]=(0,S.z)(1e4,(e=>{var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===H}));(0,a.useEffect)((()=>{ne&&(K.current=re)}),[ne,re]),(0,a.useEffect)((()=>{!ne&&K.current&&O.duration.milliseconds<=K.current&&q(!0)}),[ne,O.duration.milliseconds]);const le=(0,a.useCallback)((e=>{e||(K.current=0),q(e)}),[]),ce=e=>{if(e.target!==e.currentTarget)return;const t=`${O.name} • ${M.name}`;V(e,{itemUris:[H],dragLabelText:t,contextUri:M.uri})},de=R(M),ue=(0,j.s)({...O,coverArt:{sources:O.coverArt}},de),ge=(0,a.useCallback)((()=>{if(O.episodeType===A.Wf.Episode&&G)p.y.set((()=>({triggerId:D(O.uri),triggerAction:null})));else if(Z)ue();else{let e;e=ne?te.playButtonFactory().hitPause({itemToBePaused:H}):se?te.playButtonFactory().hitResume({itemToBeResumed:H}):te.playButtonFactory().hitPlay({itemToBePlayed:H});const t=ie.logInteraction(e);Q({targetUri:H,intent:ne?"pause":"play",type:"click"}),oe({loggingParams:t})}}),[se,ue,Q,oe,H,ne,Z,O,G,ie,te]),me=(0,a.useCallback)((()=>{ie.logInteraction(te.hitUiNavigate({destination:H})),Q({type:"click",targetUri:H,intent:"navigate"})}),[H,Q,ie,te]),pe=(null===(t=O.podcastSubscription)||void 0===t?void 0:t.isPaywalled)??!1,xe=(null===(i=O.podcastSubscription)||void 0===i?void 0:i.isUserSubscribed)??!1,he=pe&&!xe,ye=pe&&Z,{badges:ve}=(0,w.r)({contentRating:null===(B=O.contentRating)||void 0===B?void 0:B.label,isPaywalled:pe}),je=(0,a.useCallback)((()=>J((0,l.RM)(M.uri))),[M.uri,J]),be=(0,a.useCallback)((e=>{let t=e;return(he||ye)&&(t=(0,U.jsx)(m.l,{enabled:!0,showUri:M.uri,children:t})),!O.playability.playable&&ve.nineteen&&(t=(0,U.jsx)("div",{onClick:e=>{e.stopPropagation(),je()},children:e})),t=(0,U.jsx)(c.D,{id:D(H),targetURI:(0,r.EC)(H),children:t}),t}),[H,he,ye,M.uri,ve.nineteen,O.playability.playable,je]),ke=(0,n.W6)(E.eli,{loadingValue:!1});return(0,U.jsx)(ee,{spec:te,children:(0,U.jsx)(P.JL,{value:"row",index:L,children:(0,U.jsx)(b._,{onShow:()=>{ie.logInteraction(te.secondaryHitUiReveal())},menu:(0,U.jsx)(d.k,{uri:H,showUri:M.uri,sharingInfo:O.sharingInfo,isPlayed:X,onMarkAsPlayed:le}),children:ke?(0,U.jsx)(g.k,{ref:ae,requestId:O.requestId,index:L,uri:H,size:$,images:O.coverArt||[],name:O.name,showName:M.name,description:O.description,isPlayable:O.playability.playable||he,fullyPlayed:X,durationMs:O.duration.milliseconds,releaseDate:(null===(T=O.releaseDate)||void 0===T?void 0:T.isoString)||"",resumePositionMs:K.current??Y,handleDragStart:ce,handlePlaybackClick:ge,handleClick:me,isCurrentlyPlaying:se,isPaywalled:pe,isUserSubscribed:xe,isPlaying:ne,position:ne?re:void 0,episodeSharingInfo:O.sharingInfo,onMarkAsPlayed:le,contentInformation:O.contentInformation,showUri:M.uri,mediaTypes:O.mediaTypes??void 0,badges:(0,U.jsxs)(U.Fragment,{children:[ve.explicit&&(0,U.jsx)(k.N,{}),ve.paid&&(0,U.jsx)(x.g,{}),ve.nineteen&&(0,U.jsx)(f.X,{size:16})]}),playButtonWrapper:be,onMoreButtonClick:()=>{ie.logInteraction(te.moreButtonFactory().hitUiReveal())},status:_,variant:W}):(0,U.jsx)(u.X,{ref:ae,requestId:O.requestId,index:L,uri:H,size:$,images:O.coverArt||[],name:O.name,showName:M.name,description:O.description,isPlayable:O.playability.playable||he,fullyPlayed:X,durationMs:O.duration.milliseconds,releaseDate:(null===(F=O.releaseDate)||void 0===F?void 0:F.isoString)||"",resumePositionMs:K.current??Y,handleDragStart:ce,handlePlaybackClick:ge,handleClick:me,isCurrentlyPlaying:se,isPaywalled:pe,isUserSubscribed:xe,isPlaying:ne,position:ne?re:void 0,episodeSharingInfo:O.sharingInfo,onMarkAsPlayed:le,contentInformation:O.contentInformation,badges:(0,U.jsxs)(U.Fragment,{children:[ve.explicit&&(0,U.jsx)(k.N,{}),ve.paid&&(0,U.jsx)(x.g,{}),ve.nineteen&&(0,U.jsx)(f.X,{size:16})]}),playButtonWrapper:be,onMoreButtonClick:()=>{ie.logInteraction(te.moreButtonFactory().hitUiReveal())},showUri:M.uri,mediaTypes:O.mediaTypes??void 0,status:_,variant:W})})})})}))},2213:(e,t,i)=>{i.d(t,{k:()=>o});i(38910),i(36433),i(9064);var a=i(65267);const s="rTMkDBDp47Eo12ZEQv4U";var n=i(11527);const o=e=>{let{copyrights:t,courtesyLine:i}=e;const o=(t||[]).map(((e,t)=>{const i=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let s;return s="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,n.jsx)(a.D,{as:"p",variant:"finale",dir:"auto",children:`${s} ${i}`},t)}));return i&&o.unshift((0,n.jsx)(a.D,{as:"p",variant:"finale",dir:"auto",children:i},o.length)),(0,n.jsx)("div",{className:s,children:o})}},97136:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ji});var a=i(50959),s=i(28150),n=i(23553),o=i(15502),r=i(55147),l=i(10992),c=i(39189),d=i(30760),u=(i(36433),i(82693),i(61325),i(6882),i(82187)),g=i.n(u),m=i(29132),p=i(23280),x=i(12737),h=i(62619),y=i(11262),v=i(66562),j=i(13707),b=i(70368),k=i(48439),f=i(25025),P=i(48241),C=i(2213),S=i(65267),N=i(95146),A=i(27820);const w="_yl4tOZxcpoUt28k6B8I",I="lcJflizNrSwDM9yPNk6h",E="ret7iHkCxcJvsZU14oPY";var U=i(11527);const R=e=>{var t,i,a;let{rating:s,className:n,onClick:o}=e;if(!s)return null;const r=Boolean(null===(t=s.rating)||void 0===t?void 0:t.rating);return(0,U.jsxs)("button",{className:g()(w,n),onClick:o,children:[(0,U.jsx)(S.D,{dir:"auto",variant:"mestoBold",children:null!==(i=s.averageRating)&&void 0!==i&&i.showAverage?l.ag.formatNumber(s.averageRating.average,{maximumFractionDigits:1}):l.ag.get("web-player.audiobooks.noRating")}),r?(0,U.jsx)(N.u,{iconSize:16,className:g()(I)}):(0,U.jsx)(A.G,{iconSize:16,className:g()(I)}),(null===(a=s.averageRating)||void 0===a?void 0:a.showAverage)&&(0,U.jsxs)(S.D,{variant:"mesto",className:g()(E),children:["(",l.ag.formatNumberCompact(Number(s.averageRating.totalRatings)),")"]})]})};var D=i(77401),B=i(18373),T=i(92718);const F="SpVoh9vvBN0kIwzfCiBh",L="nsGHaEmn310z9W4RMbb8",M="PfYVlZzroXSurDmS_kxY",O="kCT99_BcJQtW47mEfVF6",z="gmDgEbPyRXNixmjYAT9f",_="XlZGcb86bItwlMPQ2jOf",W="VGTtqfOlX2jIbpff6mPP",G="aexqooSgfdW95poEaxjH",Y="Fui2wGupk4F1Khigbrhj",H="jWcvSz47NFpbLjnkFT1O",K="Oo6MP8F01W5uGlnw8dag";var X=i(15),q=i(79525),V=i(85427),Z=i(75744),$=i(32918),Q=i(73298),J=i(73467);let ee=function(e){return e.SMALL="small",e.LARGE="large",e}({});const te=e=>{let{images:t,title:i,contentRating:a,duration:s,moreButton:n,onClick:o,onContextMenu:r,onTouchStart:l,onTouchEnd:c,isPlaying:d,isActive:u,size:m,className:p,label:x,isPlayable:h=!0}=e;const y=m===ee.LARGE?"medium":"small",{badges:v}=(0,Q.r)({contentRating:a});return(0,U.jsxs)("div",{"data-testid":"trailer-component",className:g()(F,p,{[L]:u}),onContextMenu:r,onTouchStart:l,onTouchEnd:c,children:[(0,U.jsxs)("div",{className:O,children:[(0,U.jsxs)("div",{className:G,children:[(0,U.jsx)(D.O,{type:T.p.EPISODE,title:i,className:g()(W,{[K]:m===ee.SMALL,[H]:m===ee.LARGE}),size:B.m$.SIZE_56,images:t,shape:D.K.ROUNDED_CORNERS}),(0,U.jsx)("div",{className:Y,children:(0,U.jsx)(J.f,{"data-testid":"trailer-play-button",version:X.ul.transparent,size:y,isPlaying:d,onClick:o,disabled:!h})})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{className:z,children:(0,U.jsx)(S.D,{dir:"auto",className:M,variant:"balladBold",children:i})}),(0,U.jsxs)("div",{className:_,children:[(0,U.jsx)($.V,{text:x}),v.explicit&&(0,U.jsx)(V.N,{}),v.nineteen&&(0,U.jsx)(Z.X,{}),(0,U.jsx)(S.D,{dir:"auto",variant:"mesto",children:(0,U.jsx)(q.nL,{durationMs:s})})]})]})]}),n]})};var ie=i(29037),ae=i(87178),se=i(79287),ne=i(17370),oe=i(22516),re=i(81085),le=i(62939);const ce=e=>{let{htmlDescription:t,narrators:i,spec:s}=e;const n=(0,k.o)(),o=(0,re.$P)(),r=(0,a.useCallback)((e=>{n({intent:"expand-description",type:"click"});const t=s.seeMoreButtonFactory();o.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[o,n,s]);return(0,U.jsxs)(U.Fragment,{children:[i.length?(0,U.jsx)(p.x,{as:"p",variant:"bodyMedium",children:l.ag.get("web-player.audiobooks.narratedByX",i.join(l.ag.getSeparator()))}):null,t&&(0,U.jsx)(le.o,{maxLines:4,content:t,htmlContent:t,onExpanded:r})]})};var de=i(9705),ue=i(85509),ge=i(10455),me=i(57304);const pe="8px",xe="mmCZ5VczybT9VqKB5wFU",he="At_ihDspJfh1yw3Cn2cq",ye="u3LLJx1KnMchfNCzi6k5",ve="Yqz1Nv6wj1n3HmXL_qji",je="qRqn3JrWLPbGW9k2a63n",be="HAah1_lK_dHgyyE71I8Z",ke="eiC4nh70nb5UHZBYMgNA",fe="hl2eRCaYcZ1Jm1bgNYlU",Pe="eYtmwXEvi1UdCevg8WoK",Ce="QOp2aYTYmZHZ6DFFHuYE",Se=e=>{let{explicit:t,durationMs:i,publishDate:a}=e;return(0,U.jsxs)("div",{className:Pe,children:[t&&(0,U.jsx)(V.N,{fullText:!0}),(0,U.jsxs)("div",{children:[a&&(0,U.jsx)(p.x,{variant:"bodySmall",className:Ce,children:l.ag.formatDate(a)}),(0,U.jsx)(p.x,{variant:"bodySmall",children:(0,U.jsx)(q.nL,{durationMs:i})})]})]})};var Ne=i(69918),Ae=i(44250),we=i(13814),Ie=i(88724),Ee=i(49857),Ue=i(74039),Re=i(31388),De=i(10732),Be=i(60140);const Te="iZut9Dh2KEjNVhDUxzWw";function Fe(e){var t;let{uri:i,price:a,size:s,spec:n,logger:o,onPlayback:r}=e;const{enqueueSnackbar:c}=(0,Be.D)(),d=(0,De.g)(),u=0===(null==a||null===(t=a.finalPrice)||void 0===t?void 0:t.amount),g=u?n.getButtonFactory({uri:i}):n.buyButtonFactory({uri:i}),m=(0,Ee.y1)((async()=>{if(o.logInteraction(g.hitShowPaywall({paywalledItem:i})),d)r();else{try{null!=a&&a.finalPrice?await(0,Re.Q)({show_uri:i,currency:a.finalPrice.currency,price:a.finalPrice.amount}):c(l.ag.get("error.generic"))}catch(e){c(l.ag.get("error.generic"))}r()}}),2e3,{leading:!0,trailing:!1});return(0,U.jsx)(Ue.D,{size:s,className:Te,style:{flexShrink:0},onClick:m,children:u?l.ag.get("web-player.audiobooks.buyFree"):l.ag.get("web-player.audiobooks.buy")})}const Le=e=>{let{uri:t,isLocked:i,price:a,isPlaying:s,isConsumptionCapped:n,onPlayback:o,logger:r,spec:l,size:c="large"}=e;return i&&!n?(0,U.jsx)(Fe,{size:c,uri:t,price:a,logger:r,spec:l,onPlayback:o}):(0,U.jsx)(Ie.$,{size:c,isPlaying:s,uri:t,onClick:o})};var Me=i(44790),Oe=i(11129),ze=i(71932),_e=i(73745);const We=a.memo((function(e){let{backgroundColor:t,uri:i,name:s,isPlaying:n,togglePlay:o,isLocked:r,consumptionCapExplanation:c,price:d,spec:u,isExplicit:g,publishDate:p,duration:x}=e;const[h,y]=(0,Ae.Z)(i),j=!(0,_e.k)(),b=(0,m.I0)(),f=(0,k.o)(),P=(0,re.$P)(),C=(0,a.useCallback)((()=>{f({targetUri:i,intent:h?"unsave":"save",type:"click"});const e=u.saveToLibraryButtonFactory();h?P.logInteraction(e.hitUnfollow({itemToBeUnfollowed:i})):P.logInteraction(e.hitFollow({itemToBeFollowed:i})),y(!h)}),[f,i,h,u,y,P]),S=(0,a.useCallback)(((e,t)=>{const a=u.downloadButtonFactory();c?b((0,Me.S3)(c)):t===we.mc.ADD?P.logInteraction(a.hitDownload({itemToDownload:i})):t===we.mc.REMOVE?P.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:i})):t===we.mc.NO_PERMISSION&&P.logInteraction(a.hitUiReveal())}),[c,b,P,u,i]),N=(0,a.useCallback)((()=>{const e=u.contextButtonFactory().hitUiReveal();P.logInteraction(e)}),[P,u]),A=(0,ze.j)(),w=!!c,I=!r&&!w;return(0,U.jsxs)(de.o,{backgroundColor:t,style:{"--action-bar-padding-bottom":pe},children:[(0,U.jsx)(de.F,{testId:"book-action-bar-metadata",children:(0,U.jsx)(Se,{explicit:g,publishDate:p,durationMs:x})}),(0,U.jsxs)(de.F,{children:[(0,U.jsx)(Le,{uri:i,isLocked:r,isConsumptionCapped:w,price:d,isPlaying:n,onPlayback:o,logger:P,spec:u,size:A}),(0,U.jsx)(Oe.r,{children:(0,U.jsx)(ue.H,{isAdded:h,onClick:C,disabled:j,size:A,isAudiobook:!0})},"follow-button"),(0,U.jsx)(ge.j,{uri:i,onClick:S,size:A,canDownload:I}),(0,U.jsx)(Ne.yj,{menu:(0,U.jsx)(me.X,{uri:i}),children:(0,U.jsx)(v.z,{label:l.ag.get("more.label.context",s),onClick:N,size:A})})]})]})}));var Ge=i(13174),Ye=i(34790),He=i(44930),Ke=i(52759),Xe=i(78344),qe=i(32154);const Ve=a.memo((function(e){let{coverArt:t,name:i,authorName:a,uri:s,backgroundColor:n,isPlaying:o,togglePlay:r,isLocked:c,price:d,isConsumptionCapped:u,logger:g,spec:m}=e;return(0,U.jsxs)(Ye.gF,{backgroundColor:n,children:[(0,U.jsxs)(He.W,{children:[(0,U.jsx)(Le,{uri:s,isLocked:c,price:d,isPlaying:o,isConsumptionCapped:u,onPlayback:r,logger:g,spec:m,size:"medium"}),(0,U.jsx)(Ke.i,{text:i,dragUri:s,dragLabel:i})]}),(0,U.jsx)(Ne._P,{menu:(0,U.jsx)(me.X,{uri:s}),children:(0,U.jsx)(Ye.Oz,{images:t,name:i,dragUri:s,dragMimeType:Ge.RN.AUDIOBOOKS,shape:D.K.SQUARE})}),(0,U.jsxs)(Ye.sP,{children:[(0,U.jsx)(Xe.g,{children:l.ag.get("web-player.audiobooks.audiobook")}),(0,U.jsx)(Ye.xd,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:Ye.vz,dragUri:s,dragMimeType:Ge.RN.AUDIOBOOKS,dragLabel:i,children:i}),(0,U.jsx)(qe.m,{children:a})]})]})})),Ze="HvVxzh4ZoggYAhgSxSth",$e=a.memo((e=>{let{price:t}=e;return t.finalPrice&&t.finalListPrice?0===t.finalPrice.amount&&0===t.finalListPrice.amount?(0,U.jsxs)("div",{className:Ze,children:[(0,U.jsx)(p.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.ag.get("audiobook.freePriceDescription")}),(0,U.jsx)(p.x,{variant:"bodySmall",children:l.ag.get("audiobook.freePriceExplanation")})]}):(0,U.jsxs)("div",{className:Ze,children:[(0,U.jsx)(p.x,{variant:"titleSmall",semanticColor:"textBase",children:t.finalPrice.formattedPrice}),t.finalPrice.amount<t.finalListPrice.amount&&(0,U.jsx)(p.x,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.ag.get("web-player.audiobooks.retailPrice",(0,U.jsx)("span",{style:{textDecoration:"line-through"},children:t.finalListPrice.formattedPrice}))})]}):null}));i(63961),i(21164),i(38910);var Qe=i(71944),Je=i(74791);var et=i(30721);var tt=i(38010),it=i(86343),at=i(73196),st=i(93688);const nt="b0Vng72SrQiFroJKXfk2",ot="FfeP3XKSZcAdfviyk8fv",rt="eWxDd0LanTnTlSl8SOHX",lt="eAOkseqV13_CAmzuDJpa",ct="fovofKIYdEIURgIYoKm2",dt="NXXFrQO7npgPCRuSKaAA",ut="ekkhhuxKVGAzkEmuh9kE",gt="zd6xqobF255bxHFtCmXy",mt=a.memo((function(e){let{name:t,duration:i,uri:s,bookName:n,usePlayContextItem:o,isChapterLocked:r,isPlayable:c,resumePositionMs:d,isFullyPlayed:u,isExplicit:h,is19PlusOnly:y,spec:b,index:f,consumptionCapExplanation:P}=e;const C=(0,a.useRef)(d),{isPlaying:S,togglePlay:N,isActive:A}=o({uri:s}),w=(0,re.$P)(),I=(0,De.g)(),E=(0,m.I0)(),R=(0,x.W6)(at.vWw,{loadingValue:!1}),{position:D,isFullyPlayed:B}=((e,t,i,s)=>{const n=(0,a.useRef)(null),[o,r]=(0,a.useState)(s),[l]=(0,st.z)(1e4,(t=>{var i;return(null==t||null===(i=t.item)||void 0===i?void 0:i.uri)===e}));return(0,a.useEffect)((()=>{i&&(n.current=l)}),[i,l]),(0,a.useEffect)((()=>{!i&&n.current&&t.milliseconds<=n.current+1e4&&r(!0)}),[i,t.milliseconds]),{position:i?l:null,isFullyPlayed:o}})(s,i,S,u);null!==D&&(C.current=D);const T=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),F=(0,k.o)(),L=(0,a.useCallback)((e=>{if(T(e),P&&!I&&R)return void E((0,Me.S3)(P));const t=b.chapterBlockFactory({position:f,uri:s}).playButtonFactory();if(r)F({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),w.logInteraction(t.hitShowPaywall({paywalledItem:s}));else{const e=(0,it.aK)({isPlaying:S,isActive:A,spec:t,logger:w,uri:s});N({loggingParams:e})}}),[P,E,f,R,A,I,r,S,w,F,b,T,N,s]),M=(0,a.useCallback)((()=>{const e=b.chapterBlockFactory({position:f,uri:s}).secondaryHitUiReveal();w.logInteraction(e)}),[f,w,b,s]),O=(0,a.useCallback)((e=>{T(e);const t=b.chapterBlockFactory({position:f,uri:s}).contextMenuFactory().hitUiReveal();w.logInteraction(t)}),[f,w,b,T,s]),z=(0,a.useMemo)((()=>!(r||P)),[P,r]),_=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{className:rt,"aria-hidden":!0}),(0,U.jsxs)("div",{className:nt,onDoubleClick:e=>{F({targetUri:s,intent:"play",type:"double-click"}),L(e)},children:[(0,U.jsx)(p.x,{as:"h2",variant:"bodyMediumBold",className:g()(dt,{[ot]:A}),semanticColor:"textBase",children:t}),(0,U.jsxs)("div",{className:ut,children:[(0,U.jsx)(J.f,{size:"small",version:J.u.secondary,onClick:L,isPlaying:S,ariaPlayLabel:l.ag.get("tracklist.a11y.play",t,n),ariaPauseLabel:l.ag.get("tracklist.a11y.pause",t,n),locked:r&&!P,disabled:!c&&!(r||P)}),h&&(0,U.jsx)(V.N,{fullText:!0}),y&&(0,U.jsx)(Z.X,{size:16}),(0,U.jsx)("div",{className:gt,children:(0,U.jsx)(tt.E,{isPlaying:S,fullyPlayed:B,durationMs:i.milliseconds,resumePositionMs:C.current,position:D??void 0})})]}),z?(0,U.jsx)(Ne.yj,{menu:(0,U.jsx)(j.r,{uri:s}),children:(0,U.jsx)(v.z,{className:ct,size:v.q.sm,label:l.ag.get("more.label.context",t),onClick:O,condensedAll:!0})}):null]})]});return z?(0,U.jsx)(Ne._P,{menu:(0,U.jsx)(j.r,{uri:s}),onShow:M,children:(0,U.jsx)("div",{className:lt,children:_})}):(0,U.jsx)("div",{className:lt,children:_})}));var pt=i(89963),xt=i(56179),ht=i(79625),yt=i(67736),vt=i(64546);const jt="XG_S4BkuyAMohXFLGKU1",bt="NrMNU3Sf4iy2c6JJx7R8",kt="n8V7RFwuVx9PaIT1n_mA",ft="kTtB_Y_yizhUj6SMYY8e",Pt="f2XS5sEjEtvk4TdlzHK3",Ct="d9YBRXX3qqxAD43sqNzE",St="Jvp5er4UpzTljUao_SrR",Nt="EQCGoB4MqhFPtwUwp1rh",At="UTBQUpUwOPb37ou2ULmH",wt="Dnwv7PC1vjXvcwYEfqqf",It=a.memo((function(e){let{name:t,duration:i,uri:s,bookName:n,usePlayContextItem:o,isChapterLocked:r,isPlayable:c,resumePositionMs:d,isFullyPlayed:u,isExplicit:p,is19PlusOnly:h,spec:y,index:b,consumptionCapExplanation:f}=e;const P=(0,a.useRef)(d),{isPlaying:C,togglePlay:S,isActive:N}=o({uri:s}),A=(0,re.$P)(),w=(0,De.g)(),I=(0,m.I0)(),E=(0,x.W6)(at.vWw,{loadingValue:!1}),R=(0,yt.Y)((e=>{var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===s){const t=(0,vt.k)(e)??0;return P.current=t,t}return 0})),D=(0,a.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),B=(0,k.o)(),T=(0,a.useCallback)((e=>{if(D(e),f&&!w&&E)return void I((0,Me.S3)(f));const t=y.chapterBlockFactory({position:b,uri:s}).playButtonFactory();if(r)B({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),A.logInteraction(t.hitShowPaywall({paywalledItem:s}));else{const e=(0,it.aK)({isPlaying:C,isActive:N,spec:t,logger:A,uri:s});S({loggingParams:e})}}),[f,I,b,E,N,w,r,C,A,B,y,D,S,s]),F=(0,a.useCallback)((()=>{const e=y.chapterBlockFactory({position:b,uri:s}).secondaryHitUiReveal();A.logInteraction(e)}),[b,A,y,s]),L=(0,a.useCallback)((e=>{D(e);const t=y.chapterBlockFactory({position:b,uri:s}).contextMenuFactory().hitUiReveal();A.logInteraction(t)}),[b,A,y,D,s]),M=!(r||f),O=(0,U.jsx)(pt.g,{className:g()({[bt]:N}),children:t}),z=(0,U.jsxs)("div",{className:Ct,children:[r?(0,U.jsx)(ht.g,{}):null,p&&(0,U.jsx)(V.N,{fullText:!0}),h&&(0,U.jsx)(Z.X,{size:16}),(0,U.jsx)("div",{className:St,children:(0,U.jsx)(tt.E,{isPlaying:C,fullyPlayed:u,durationMs:i.milliseconds,resumePositionMs:P.current,position:C?R:void 0})})]}),_=(0,U.jsxs)("div",{className:At,children:[(0,U.jsx)("div",{className:wt,children:M?(0,U.jsx)(Ne.yj,{menu:(0,U.jsx)(j.r,{uri:s}),children:(0,U.jsx)(v.z,{className:Pt,size:v.q.xs,label:l.ag.get("more.label.context",t),onClick:L})}):null}),(0,U.jsx)("div",{className:Nt,children:(0,U.jsx)(J.f,{size:"small",version:J.u.secondary,onClick:T,isPlaying:C,ariaPlayLabel:l.ag.get("tracklist.a11y.play",t,n),ariaPauseLabel:l.ag.get("tracklist.a11y.pause",t,n),locked:r&&!f,disabled:!c&&!(r||f)})})]}),W=(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("hr",{className:kt,"aria-hidden":!0}),(0,U.jsx)(xt.w,{id:`chapter-${b}`,title:O,body:z,footer:_,onDoubleClick:e=>{B({targetUri:s,intent:"play",type:"double-click"}),T(e)},className:jt})]});return M?(0,U.jsx)(Ne._P,{menu:(0,U.jsx)(j.r,{uri:s}),onShow:F,children:(0,U.jsx)("div",{className:ft,children:W})}):(0,U.jsx)("div",{className:ft,children:W})})),Et=e=>{let{bookUri:t,bookName:i,sampleUri:s,isFinishedUnlockingJourney:n,usePlayContextItem:o,spec:r,consumptionCapExplanation:l}=e;const c=function(e,t){const i=(0,Je.z)();return(0,a.useCallback)((async(a,s)=>i.getBookContents(e,{offset:a,limit:s,doRefreshSubscription:t})),[t,i,e])}(t,n),d=(0,a.useRef)(!1),u=(0,a.useRef)(0),g=(0,x.W6)(at.eli,{loadingValue:!1}),[m,p]=(0,a.useState)([]),h=(0,a.useCallback)((e=>(null==e?void 0:e.uri)===s),[s]),y=(0,a.useCallback)((e=>(e=>null!==e)(e)&&!h(e)),[h]),v=(0,a.useCallback)((()=>{c&&(d.current||null===u.current||(d.current=!0,c(u.current,50).then((e=>{d.current=!1,u.current=e.nextOffset,e.items.length>0&&p((t=>t.concat(e.items.filter(y))))}))))}),[c,y]);return(0,a.useEffect)((()=>{u.current=0,p([])}),[t]),(0,U.jsx)("ul",{children:(0,U.jsx)(Qe.C,{onReachBottom:v,triggerOnInitialLoad:!0,children:m.map(((e,t)=>{const{name:a,duration:s,uri:n,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:u},isExplicit:m,is19PlusOnly:p}=e,x=function(e){var t,i,a;return!(null!==(t=e.playability)&&void 0!==t&&t.playable||(null===(i=e.playability)||void 0===i?void 0:i.reason)!==et.WY.PaymentRequired&&(null===(a=e.playability)||void 0===a?void 0:a.reason)!==et.WY.Anonymous)}(e);return g?(0,U.jsx)(It,{name:a,duration:s,uri:n,bookName:i,usePlayContextItem:o,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:l,resumePositionMs:d,isFullyPlayed:u===et.sY.Completed,isExplicit:m,is19PlusOnly:p,spec:r,index:t},n):(0,U.jsx)(mt,{name:a,duration:s,uri:n,bookName:i,usePlayContextItem:o,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:l,resumePositionMs:d,isFullyPlayed:u===et.sY.Completed,isExplicit:m,is19PlusOnly:p,spec:r,index:t},n)}))})})};var Ut=i(28497),Rt=i(94672),Dt=i(91845),Bt=i(20704),Tt=i(58994);const Ft="QEd1L2SSRW1ol_sQQN6m",Lt="ENuWK8u3C9kmadnqkErf",Mt="i0gSVhns0PjhiUKm4OG1",Ot="jKVb6K0dga3SfW1dp2Pg",zt="MOpV0_YizQER2NksxLju",_t="vrR8bh9DvivyDfUrh1vD",Wt="_toO3CqMPAPTbny7Rh8R",Gt="Iudw61HRePwOAJpbDRvA",Yt="GWaz1n1SADn9enzKdi_Z",Ht=a.memo((function(e){let{coverArt:t,toggleModal:i,uri:a,isBook:s}=e;const n=(0,Bt.X)(t,{desiredSize:320}),{spec:r,logger:c}=(0,re.fU)(Rt.createDesktopPodcastRatingEventFactory,{data:{identifier:s?o.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK:o.Wg.RATINGS_AND_REVIEWS_RATINGS,uri:a}});return(0,U.jsx)(Tt.Z,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:i,children:(0,U.jsxs)("div",{className:Ft,children:[(0,U.jsxs)("div",{className:Mt,children:[(0,U.jsx)(p.x,{as:"h1",variant:"titleSmall",className:Wt,children:s?l.ag.get("web-player.audiobooks.rating.rateAudiobook"):l.ag.get("web-player.show.rating.header")}),(0,U.jsxs)("button",{className:Ot,onClick:()=>{const e=r.closeButtonFactory().hitUiNavigateBack();c.logInteraction(e),i()},children:[(0,U.jsx)(Ut.k,{role:"presentation"}),(0,U.jsx)("span",{className:"hidden-visually",children:l.ag.get("web-player.audiobooks.rating.closeModal")})]})]}),(0,U.jsxs)("div",{className:zt,children:[(0,U.jsx)(Dt.Ee,{loading:"eager",src:null==n?void 0:n.url,className:Lt}),(0,U.jsxs)("div",{className:_t,children:[(0,U.jsx)(p.x,{as:"p",variant:"bodyMediumBold",className:Gt,children:s?l.ag.get("web-player.audiobooks.rating.wantToRate"):l.ag.get("web-player.show.rating.want-to-rate")}),(0,U.jsx)(p.x,{as:"p",className:Yt,children:l.ag.get("web-player.audiobooks.rating.goToApp")}),(0,U.jsx)(Ue.D,{colorSet:"invertedLight",onClick:()=>{const e=r.okButtonFactory().hitUiNavigateBack();c.logInteraction(e),i()},children:l.ag.get("web-player.audiobooks.rating.ok")})]})]})]})})})),Kt={shuffle:!1,repeat:ne.zq.REPEAT_NONE},Xt=a.memo((function(e){var t,i;let{metadata:n}=e;const{uri:r,coverArt:d,name:u,htmlDescriptionPlain:S,authorName:N,sample:A,narrators:w,rating:I,isExplicit:E,duration:D,copyrights:B,publishDate:T,price:F,isLocked:L,consumptionCapExplanation:M,signifierText:O,latestPlayedEpisodeLink:z,topics:_}=n,{search:W}=(0,s.TH)(),G=!!new URLSearchParams(W).get("isUnlockingAudiobook"),Y=!(!(0,ae.D)(G)||G),H=(0,De.g)(),K=(0,f.Z)(null===(t=d[0])||void 0===t?void 0:t.url),X=(0,m.I0)(),[q,V]=(0,a.useState)(!1),Z=(0,k.o)(),$=(0,x.W6)(at.vWw,{loadingValue:!1}),{spec:Q,logger:J}=(0,re.fU)(h.createDesktopAudiobookEventFactory,{data:{uri:r,identifier:o.Wg.PODCAST_SHOW_AUDIOBOOK}}),{spec:ne,logger:le}=(0,re.fU)(h.createDesktopAudiobookEventFactory,{data:{uri:r,identifier:o.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:de,logger:ue}=(0,re.fU)(y.createDesktopLockedAudiobookEventFactory,{data:{uri:r,identifier:o.Wg.PODCAST_SHOW_AUDIOBOOK}}),ge=(0,a.useMemo)((()=>Q.actionBarFactory()),[Q]),me=(0,a.useMemo)((()=>ne.aboutSectionFactory()),[ne]),pe=(0,a.useMemo)((()=>Q.chapterListFactory()),[Q]);(0,a.useEffect)((()=>{Z({type:"view",intent:"audiobook"})}),[Z]),(0,a.useEffect)((()=>{L&&ue.logImpression(de.impression())}),[de,ue,L]);const{isPlaying:Pe,togglePlay:Ce,usePlayContextItem:Se,isActive:Ne,triggerPlay:Ae}=(0,se.n)({uri:r},{featureIdentifier:"audiobook"},Kt),{togglePlay:we,isPlaying:Ie,isActive:Ee}=(0,se.n)({uri:(null==A?void 0:A.uri)??""},{featureIdentifier:"audiobook"},Kt),Ue=Pe&&!Ie,Re=Ne&&!Ee,Be=(0,a.useCallback)((async()=>{const e=Q.actionBarFactory().playButtonFactory();if(M&&!H&&$)return J.logInteraction(e.hitShowPaywall({paywalledItem:r})),void X((0,Me.S3)(M));if(!L||H)if(H)Ce();else{const t=(0,it.aK)({isPlaying:Ue,isActive:Re,spec:e,logger:J,uri:r});Re?Ce({loggingParams:t}):Ae({skipTo:z?{uri:z}:void 0,loggingParams:t})}}),[Q,M,H,$,L,J,r,X,Ce,Ue,Re,Ae,z]),Te=(0,a.useCallback)((()=>{null!=A&&A.uri&&(Z({targetUri:A.uri,intent:Ie?"play":"pause",type:"click"}),we())}),[Ie,Z,we,null==A?void 0:A.uri]),Fe=(0,a.useCallback)((()=>{const e=me.ratingButtonFactory().hitUiReveal();le.logInteraction(e),V((e=>!e))}),[me,le]),Le=(0,ie.jh)(),Oe=L&&!M&&F;return(0,U.jsxs)("section",{className:xe,children:[(0,U.jsx)(c.$,{children:(0,oe.Od)({showOrAudiobookName:u,type:"Audiobook"})}),(0,U.jsx)(Ve,{name:u,authorName:N,uri:r,coverArt:d,backgroundColor:K,togglePlay:Be,isPlaying:Ue,isLocked:L,isConsumptionCapped:!!M,price:F,logger:J,spec:Q.actionBarFactory()}),(0,U.jsx)(We,{name:u,backgroundColor:K,uri:r,togglePlay:Be,isPlaying:Ue,isLocked:L,consumptionCapExplanation:M,isExplicit:E,duration:D,publishDate:T,price:F,spec:ge}),(0,U.jsxs)("div",{className:g()(he,"contentSpacing",{[ye]:Le===ie.Uo.LARGE}),children:[(0,U.jsxs)("div",{className:ve,children:[(0,U.jsxs)("div",{className:fe,children:[O&&(0,U.jsx)(p.x,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:O}),!O&&Oe&&(0,U.jsx)($e,{price:F})]}),(0,U.jsx)(ce,{htmlDescription:S,narrators:w,spec:me})]}),(0,U.jsxs)("div",{className:je,children:[(null==A?void 0:A.isPlayable)&&(0,U.jsx)(te,{label:l.ag.get("audiobook.page.sample"),images:A.coverArt,title:A.name,duration:A.duration.milliseconds,moreButton:L?null:(0,U.jsx)(P.y,{menu:(0,U.jsx)(j.r,{uri:A.uri}),children:(0,U.jsx)(v.z,{})}),onClick:Te,isPlaying:Ie,isActive:Ee,size:ee.LARGE,contentRating:null===(i=A.contentRating)||void 0===i?void 0:i.label,isPlayable:A.isPlayable}),(0,U.jsx)("div",{className:be,children:(0,U.jsx)(R,{rating:I,onClick:Fe})}),_.length>0&&(0,U.jsx)(b.v,{topics:_})]}),(0,U.jsxs)("div",{className:ke,children:[(0,U.jsx)(Et,{bookUri:r,bookName:u,sampleUri:null==A?void 0:A.uri,isFinishedUnlockingJourney:Y,usePlayContextItem:Se,spec:pe,consumptionCapExplanation:M},`${r}-${L}-${!!M}`),(0,U.jsx)(C.k,{copyrights:B})]})]}),q&&(0,U.jsx)(Ht,{toggleModal:()=>V(!1),coverArt:d,uri:r,isBook:!0})]})}));var qt=i(35733),Vt=i(77638),Zt=i(62120),$t=i(73381),Qt=i(60809);const Jt=e=>{let{uri:t,name:i,backgroundColor:s,spec:n}=e;const o=(0,re.$P)(),r=(0,k.o)(),c=!(0,_e.k)(),[d,u]=(0,Ae.Z)(t),g=(0,a.useCallback)((()=>{r({targetUri:t,intent:d?"unsave":"save",type:"click"});const e=n.followButtonFactory();o.logInteraction(d?e.hitUnfollow({itemToBeUnfollowed:t}):e.hitFollow({itemToBeFollowed:t})),u(!d)}),[r,t,d,n,o,u]),m=(0,a.useCallback)((()=>{o.logInteraction(n.contextButtonFactory().hitUiReveal())}),[o,n]),p=(0,ze.j)();return(0,U.jsx)(de.o,{backgroundColor:s,children:(0,U.jsxs)(de.F,{children:[(0,U.jsx)(Oe.r,{children:(0,U.jsx)(Qt.e,{isFollowing:d,onClick:g,disabled:c})},"follow-button"),(0,U.jsx)(P.y,{menu:(0,U.jsx)($t.M,{uri:t}),onShow:m,children:(0,U.jsx)(v.z,{label:l.ag.get("more.label.context",i),size:p})})]})})},ei=(0,a.lazy)((()=>i.e(1252).then(i.bind(i,71252)))),ti=(0,a.lazy)((()=>i.e(4990).then(i.bind(i,54990))));function ii(e){const t=(0,x.W6)(at.$f6),i=(0,x.W6)(at.BOn);return t&&i?(0,U.jsx)(ti,{uri:e.uri}):t?(0,U.jsx)(a.Suspense,{fallback:!0,children:(0,U.jsx)(ei,{...e})}):null}var ai=i(33325),si=i(35142),ni=i(22215),oi=i(84144),ri=i(55652),li=i(453),ci=(i(4891),i(42938));const di=(0,a.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),ui=a.memo((function(e){let{uri:t,children:i}=e;return(0,U.jsx)(ci.r,{uri:t,defaultState:[],sortContext:di,localStorageKey:"showFilterParams-v2",children:i})}));i(20761);var gi=i(83667);const mi={field:gi.ay.PUBLISH_DATE,order:gi.i5.DESC},pi={field:gi.ay.PUBLISH_DATE,order:gi.i5.ASC},xi=pi,hi={episodic:mi,sequential:pi,recent:mi};function yi(){return new Map([[mi,{key:"newest-to-oldest",value:l.ag.get("shows.sort.newest-to-oldest")}],[pi,{key:"oldest-to-newest",value:l.ag.get("shows.sort.oldest-to-newest")}]])}function vi(e){return hi[e]}const ji=(0,a.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:vi("recent")}),bi=e=>{const t=yi();return Array.from(t.keys()).some((t=>{let{field:i}=t;return i===(null==e?void 0:e.field)}))},ki=a.memo((function(e){let{uri:t,children:i,defaultSortParam:a}=e;return(0,U.jsx)(ci.r,{uri:t,defaultState:a,sortContext:ji,localStorageKey:"showSortParam",validator:bi,children:i})})),fi="cJJXVm4gQW6AdfCQRhpX",Pi="hTRqaN61SDG95erQGMmx",Ci={totalCount:0,nextOffset:0,items:[]},Si=a.memo((function(e){let{showMetadata:t,usePlayContextItem:i}=e;const{sortState:s}=(0,a.useContext)(ji),{sortState:n}=(0,a.useContext)(di),o=(0,oi.ZM)(t.uri,s,n),[r,l]=(0,a.useState)(Ci),c=(0,a.useRef)(!1),d=(0,a.useRef)(0),u=(0,a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!o)return;const t=d.current;null!==t&&(c.current||(c.current=!0,o(t,50).then((i=>{l((a=>{const s=e?[]:[...a.items];return s.splice(t,i.items.length,...i.items),d.current=i.nextOffset,{...i,items:s}})),c.current=!1}))))}),[o]);return(0,a.useEffect)((()=>{l(Ci)}),[t.uri]),(0,a.useEffect)((()=>{d.current=0,u(!0)}),[u]),(0,U.jsx)(li.JL,{value:"track-list",children:(0,U.jsx)(Qe.C,{onReachBottom:u,triggerOnInitialLoad:!0,children:r.items.map(((e,a)=>e&&(0,U.jsxs)("div",{className:Pi,children:[(0,U.jsx)("hr",{className:fi,"aria-hidden":!0}),(0,U.jsx)(ri.V,{index:a,episode:e,showMetadata:t,usePlayContextItem:i},`${e.uri}/${a}`)]},`${a}${e.uri}`)))})})}));i(36480);var Ni=i(17207);const Ai={field:gi.YG.ISPLAYED,operator:gi.NK.EQUALS,value:!1},wi={field:gi.YG.STARTEDPLAYING,operator:gi.NK.GREATER_THAN,value:0};const Ii="all-episodes",Ei=e=>{let{onFilter:t}=e;const{sortState:i,setSortState:s}=(0,a.useContext)(di),n=new Map([[Ai,{key:"is-played",value:l.ag.get("shows.filter.unplayed")}],[wi,{key:"started-playing",value:l.ag.get("shows.filter.in-progress")}]]),o=Array.from(n.values());o.unshift({key:Ii,value:l.ag.get("mwp.podcast.all.episodes")});const r=Array.from(n.keys()),c=(0,a.useCallback)((e=>{if(e===Ii)s([]);else{const t=r.find((t=>{var i;return(null===(i=n.get(t))||void 0===i?void 0:i.key)===e}));t&&s([t])}t()}),[t,s,r,n]);if(!n.size||!r)return null;let d=o[0];const u=Array.from(n.entries()).filter((e=>null==i?void 0:i.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return u.length>0&&(d=u[0][1]),(0,U.jsx)(Ni.A,{options:o,onSelect:e=>c(e),selected:d,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.ag.get("drop_down.filter_by")})},Ui=e=>{let{onSort:t}=e;const{sortState:i,setSortState:s}=(0,a.useContext)(ji),n=yi(),o=Array.from(n.values()),r=Array.from(n.keys()),c=(0,a.useCallback)((e=>{const i=r.find((t=>{var i;return(null===(i=n.get(t))||void 0===i?void 0:i.key)===e}));i&&s(i),t()}),[r,t,n,s]);if(!n.size||!i)return null;const d=Array.from(n.keys()).find((e=>e.field===i.field&&e.order===i.order));if(!d)return null;const u=n.get(d);return u?(0,U.jsx)(Ni.A,{options:o,onSelect:e=>c(e),selected:u,heading:l.ag.get("drop_down.sort_by")}):null},Ri="aQMtxnKeiJqZ9XCcDuZ7",Di="TYB4Y2xQujO7cifhHush",Bi="sSXKiPRvp2AHmwfHoCCS",Ti="YJlizbhw6DBPHT9OYbdj",Fi="TfjbWiK8hca4HHEBnonP",Li="kR0M2WSYVUj4cohADSFM",Mi="ghfuv80I8uW_ymG_jfx9",Oi="jtfSxoRam9rzTtdXIjzc",zi="fejGrhq7pxGC99cUdyVw",_i="T0OjvsNXAJJGd23eBG2m",Wi="Ppm5YkDdE5ktTPwZC1Dw",Gi="urKYEVZPj2k0hwDT1qzt",Yi=e=>{let{spec:t}=e;const i=(0,re.$P)(),{canSort:s,canFilter:n}=(0,oi.zZ)().capabilities,o=(0,a.useCallback)((()=>{i.logInteraction(t.episodeListFactory().filterButtonFactory().hitFilter())}),[i,t]),r=(0,a.useCallback)((()=>{i.logInteraction(t.episodeListFactory().sortButtonFactory().hitSort())}),[i,t]);return(0,U.jsxs)("div",{className:Li,children:[n&&(0,U.jsx)("div",{className:Oi,children:(0,U.jsx)(Ei,{onFilter:o})}),!n&&(0,U.jsx)(p.x,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:zi,children:l.ag.get("mwp.podcast.all.episodes")}),s&&(0,U.jsx)("div",{className:Mi,children:(0,U.jsx)(Ui,{onSort:r})})]})},Hi=e=>{switch(e){case et.it.TRAILER:return l.ag.get("podcasts.next-episode.trailer");case et.it.UP_NEXT:return l.ag.get("podcasts.next-episode.up-next");case et.it.CONTINUE_LISTENING:return l.ag.get("podcasts.next-episode.continue-listening");case et.it.FIRST_PUBLISHED:return l.ag.get("podcasts.next-episode.first-published");case et.it.LATEST_PUBLISHED:return l.ag.get("podcasts.next-episode.latest-published");default:return}},Ki=e=>{var t;let{breakpoint:i,metadata:s,showId:n,spec:o}=e;const{uri:r,trailer:c,topics:d,description:u,htmlDescription:m,coverArt:x,rating:h}=s,y=(0,re.$P)(),j=(0,a.useMemo)((()=>o.episodeListFactory()),[o]),[f,S]=(0,a.useState)(!1),N=(0,k.o)(),A=(0,De.g)(),{sortState:w}=(0,a.useContext)(di),I=(0,oi.zZ)(),{usePlayContextItem:E}=(0,se.n)({uri:r,metadata:{[ne.sb.SORTING_CRITERIA]:I.getPlayerSort(xi),[ne.sb.FILTERING_PREDICATE]:I.getPlayerFilter(w)}},{featureIdentifier:"show"}),{isActive:D,isPlaying:B,togglePlay:T}=E({uri:(null==c?void 0:c.uri)||""}),F=(0,a.useCallback)((e=>{N({intent:"expand-description",type:"click"});const t=o.aboutSectionFactory().seeMoreButtonFactory(),i=e?t.hitUiReveal():t.hitUiHide();y.logInteraction(i)}),[y,N,o]),L=(0,a.useCallback)(((e,t)=>{const i=o.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});y.logInteraction(i)}),[y,o]),M=c?{name:c.name,uri:c.uri,audio:{items:c.audio.items.map((e=>({url:e.url})))}}:null,O=(0,ri.e)(s),z=(0,si.s)(M,O),_=(0,a.useCallback)((()=>{null!=c&&c.uri&&(A?z():(N({targetUri:c.uri,intent:B?"play":"pause",type:"click"}),T()))}),[z,A,B,N,T,null==c?void 0:c.uri]),{ref:W,breakpoint:G}=(0,ie.Db)({[ie.Uo.MEDIUM]:0,[ie.Uo.LARGE]:600}),Y=d.length>0,H=u||m,K=H||Y;return(0,U.jsxs)("div",{className:g()(Di,"contentSpacing",{[Bi]:i===ie.Uo.LARGE}),ref:W,children:[(0,U.jsxs)("div",{className:Ti,children:[K&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(p.x,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:zi,children:l.ag.get("artist.about")}),H&&(0,U.jsx)(le.o,{maxLines:4,content:(u||"").trim(),onExpanded:F,htmlContent:m||void 0}),h&&(0,U.jsx)("div",{className:Gi,children:(0,U.jsx)(R,{rating:h,onClick:()=>S(!0)})}),Y&&(0,U.jsx)(b.v,{topics:d,onClick:L})]}),(0,U.jsx)(ii,{showId:n,uri:r}),c&&!s.nextBestEpisode&&(0,U.jsx)(ni._,{menu:(0,U.jsx)(ai.k,{uri:c.uri,showUri:r,sharingInfo:c.sharingInfo}),children:(0,U.jsx)(te,{label:l.ag.get("track-trailer"),className:_i,images:c.coverArt,title:c.name,duration:c.duration.milliseconds,moreButton:(0,U.jsx)(P.y,{menu:(0,U.jsx)(ai.k,{uri:c.uri,sharingInfo:c.sharingInfo,showUri:r}),children:(0,U.jsx)(v.z,{})}),onClick:_,isPlaying:B,isActive:D,size:ee.LARGE,contentRating:null===(t=c.contentRating)||void 0===t?void 0:t.label})})]}),(0,U.jsx)(ie.ZU.Provider,{value:G,children:(0,U.jsxs)("div",{className:Fi,"data-testid":"show-all-episode-list",children:[s.nextBestEpisode&&(0,U.jsx)(ri.V,{showMetadata:s,episode:s.nextBestEpisode.data,usePlayContextItem:E,status:Hi(s.nextBestEpisode.type),variant:"next-best-episode"}),(0,U.jsx)(Yi,{spec:o}),(0,U.jsx)(re.Nh,{spec:j,children:(0,U.jsx)(Si,{showMetadata:s,usePlayContextItem:E})})]})}),(0,U.jsx)(C.k,{copyrights:[]}),f&&(0,U.jsx)(Ht,{toggleModal:()=>S(!1),coverArt:x,uri:r,isBook:!1})]})},Xi=a.memo(Ki);var qi=i(71013);const Vi=e=>{let{reason:t}=e;const i=(0,x.W6)(at.ALT),a=function(e){switch(e){case"OTP":return l.ag.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.ag.get("podcasts.subscriber-indicator.subscription");default:return""}}(t);return i&&a?(0,U.jsx)(p.x,{className:Wi,children:a}):null};const Zi=e=>{let{metadata:t,backgroundColor:i}=e;const{uri:a,coverArt:s,name:n,podcastType:o,publisherName:r,gatedContentAccessReason:c}=t;return(0,U.jsxs)(Ye.gF,{backgroundColor:i,children:[(0,U.jsx)(He.W,{children:(0,U.jsx)(Ke.i,{text:n,dragUri:a,dragLabel:n})}),(0,U.jsx)(qi.k,{children:(0,U.jsx)(ni._,{menu:(0,U.jsx)($t.M,{uri:a}),children:(0,U.jsx)(Ye.Oe,{loading:"eager",name:n,images:s,placeholderType:"show",shape:Ye.Kc.SQUARE})})}),(0,U.jsxs)(Ye.sP,{children:[(0,U.jsxs)(Xe.g,{children:["SHOW"===o?l.ag.get("type.show"):l.ag.get("type.podcast"),c&&(0,U.jsx)(Vi,{reason:c})]}),(0,U.jsx)(ni._,{menu:(0,U.jsx)($t.M,{uri:a}),children:(0,U.jsx)(Ye.xd,{dragUri:a,dragLabel:n,scaleAtMinWidth:Ye.vz,children:(0,U.jsx)("span",{"data-testid":"show-title",children:n})})}),(0,U.jsx)(qe.m,{children:r})]})]})};var $i=i(84168);const Qi=e=>{var t;let{metadata:i,showId:s}=e;const{coverArt:o,name:r,uri:l}=i,{spec:d}=(0,re.fU)(n.createDesktopPodcastEventFactory,{data:{uri:l}}),u=(0,a.useMemo)((()=>d.actionBarFactory()),[d]),g=(0,f.Z)((null===(t=o[0])||void 0===t?void 0:t.url)||null),m=(0,ie.jh)();return(0,U.jsxs)("section",{className:Ri,children:[(0,U.jsx)(c.$,{children:(0,oe.Od)({showOrAudiobookName:r,type:"Podcast"})}),(0,U.jsx)(Zi,{metadata:i,backgroundColor:g}),(0,U.jsx)(Jt,{uri:l,name:r,backgroundColor:g,spec:u}),(0,U.jsx)(Xi,{breakpoint:m,metadata:i,showId:s,spec:d})]})},Ji=(0,a.memo)((function(){const{showId:e=""}=(0,s.UO)(),t=`spotify:show:${e}`,{data:i,error:n,redirectUri:c}=(0,Zt.l)(t);if(c){const e=(0,r._b)(c);return(0,U.jsx)(qt.InstrumentedRedirect,{to:e.toURLPath(!0)})}return!i||n?n instanceof Vt.E?(0,U.jsx)(d.h,{hasError:!0,errorMessage:l.ag.get("error-page.not-available-in-region.title")}):(0,U.jsx)(d.h,{hasError:!!n,errorMessage:l.ag.get("error.not_found.title.page")}):(0,et.l6)(i)?(0,U.jsx)(a.Suspense,{fallback:null,children:(0,U.jsx)($i.C,{pageId:o.Wg.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,U.jsx)(Xt,{metadata:i},`${!!i.consumptionCapExplanation}`)})}):(0,U.jsx)(a.Suspense,{fallback:null,children:(0,U.jsx)($i.C,{pageId:o.Wg.PODCAST,uri:t,children:(0,U.jsx)(ui,{uri:i.uri,children:(0,U.jsx)(ki,{uri:i.uri,defaultSortParam:vi(i.consumptionOrder),children:(0,U.jsx)(Qi,{showId:e,metadata:i})})})})})}))},83667:(e,t,i)=>{i.d(t,{NK:()=>o,YG:()=>n,ay:()=>a,i5:()=>s});let a=function(e){return e.PUBLISH_DATE="PUBLISH_DATE",e}({}),s=function(e){return e.ASC="ASC",e.DESC="DESC",e}({}),n=function(e){return e.AVAILABLE="AVAILABLE",e.TEXT="TEXT",e.NAME="NAME",e.ISPLAYED="ISPLAYED",e.STARTEDPLAYING="STARTEDPLAYING",e}({}),o=function(e){return e.CONTAINS="CONTAINS",e.EQUALS="EQUALS",e.NOT_EQUALS="NOT_EQUALS",e.GREATER_THAN="GREATER_THAN",e}({})}}]);
//# sourceMappingURL=xpui-routes-show.d3c1217f.js.map