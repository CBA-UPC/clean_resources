//# sourceMappingURL=am.wav.js.map
(();window.FUNCTION_STUB=function(){};(function(){var a={},b={};_.lastTimeout=function(b,d,e){var f=(new Date).getTime();a[b]=f;setTimeout(function(){a[b]==f&&e()},d)};_.lastPromise=function(a,d,e){var f=(new Date).getTime();b[a]=f;d.then(function(){b[a]==f&&e.apply(this,arguments)})}})();Array.prototype.remove=function(a){for(var b=!1,c=-1;-1<(c=this.indexOf(a));)this.splice(c,1),b=!0;return b};
Array.prototype.pushArray=(function(){Marionette.Region.prototype.get$el=)();function parseQueryString(a){var b={};a=a.replace(/^\?/,"").split("&");for(var c=a.length,d=0,e;d<c;d++)a[d]&&(e=a[d].split("="),b[e[0]]=e[1]);return b}
function parseURL(a){var b=document.createElement("a");b.href=a;return{source:a,protocol:b.protocol.replace(":",""),host:b.hostname,port:b.port,query:b.search,params:parseQueryString(b.search),file:(b.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:b.pathname.replace(/^\//,"").split("/")}}
(function(){_.isSameArrays=function(a,b){return a&&b&&a.length==b.length?0==_.difference(a,b).length:!1};_.stringContains=_.wrapByArray=)();(function(){$.allPromises=function(a){var b=$.Deferred(),c=0,d=a.length,e=[];0===d?b.resolve(e):$.each(a,function(a,g){g.then(function(h){e[a]=h;c++;c===d&&b.resolve(e)})});return b.promise()}})();
function activateCustomInputs(){$(document).delegate("[type=checkbox], [type=radio]","change",function(){var a=$(this);a.is(":checked")?(a.parent().addClass("is-checked"),this.name&&$("input[name="+this.name+"]:not(:checked)").parent().removeClass("is-checked")):a.parent().removeClass("is-checked")})}activateCustomInputs();
(function(){window.loading={showStub:function(a){(a?a:$(document.documentElement)).addClass("is-show-loading-stub")},hideStub:function(a){a=a?a[0]:document.documentElement;a.className=a.className.replace(/\bis-show-loading-stub\b/,"")}}})();(function(){window.checkAndCall=function(a,b,c){null==c&&(c=1E3);var d=a();d?b(d):0<c&&setTimeout(500)}})();
function humanNumber(a){return 1E9<=a?(a/1E9).toFixed(1).replace(/\.0$/,"")+"G":1E6<=a?(a/1E6).toFixed(1).replace(/\.0$/,"")+"M":1E3<=a?(a/1E3).toFixed(1).replace(/\.0$/,"")+"K":a}(function(){window.onpageshow=function(a){a&&a.persisted&&(document.body.style.display="none",window.location.reload())}})();(function(){Handlebars.callHelper=)();
(function(){window.wav={init:{},urls:{},urlGenerator:{},filter:{},config:{},markButtons:{},bb:{init:{},model:{},views:{},config:{},service:{}},list:{},actresses:{},movie:{init:{}},movies:{},fl:{init:{}},ga:{},responsive:{},watched:{},thumbnails:{},tt:{},wt:{}};wav.$html=$(document.documentElement);wav.$body=$(document.body);wav.$subheader=$(".js-subhead");wav.$config=$("#js-config");wav.isDesktop=wav.$body.hasClass("desktop");wav.isMobile=!wav.isDesktop;wav.isIe7=wav.$body.hasClass("ie7");wav.isAndroid=
wav.$body.hasClass("android");wav.isModernBrowser=Modernizr.localstorage&&Modernizr.history;wav.isOldBrowser=!wav.isModernBrowser;window.define||(window.define=$.noop);wav.$config.data("resources-debug")&&(wav.debug=!0);window.bb=wav.bb;window.init=wav.init;wav.isShortContentsMenu=function(){return 854>=$(window).width()};wav.reloadIframe=function(a){a.attr("src",};wav.disableButton=wav.async=wav.scrollTop=function(a,b){$("html, body").animate({scrollTop:a},b?b:0)};wav.doNotDeselectLastCheckbox=function(a,b){var c=function(){var d="input[name="+a+"]:checked";return b?b.find(d):$(d)};if(b)b.find("input[name="+a+"]").on("change",function(a){var b=$(this);0==c().length&&(b.prop("checked",!0),a&&a.stopPropagation())});else $("input[name="+a+"]").on("change",function(a){var b=$(this);0==c().length&&(b.prop("checked",!0),a&&a.stopPropagation())})};(function(){var a=window.console||{},b=
a.debug;wav.console=a&&a.log&&a.warn&&a.error?a:{log:function(){},warn:function(){},error:function(){}};wav.console.debug=function(){wav.debug&&b&&b.apply(a,arguments)}})();init.activatePopups=function(){Modernizr.touch||wav.isIe7||$(".da-zoom-popup").daZoom()};init.activateSearchTerms=function(){Modernizr.touch||wav.isIe7||$("#js-recent-terms").daHorizontalScroll({url:wav.urlGenerator.recentTerms(),template:"#js-term-template",checkSame:checkSameHtml:function(a,
b){return a.term==$(b).text()},maxCalls:3,maxTermsCount:25,parseTemplate:applyTemplate:)};init.activateSearchForms=function(){var a=!1,b=c=function(a,b){return"search_"+a+"_"+b};$(".js-movies-search-form--input").focus(function(){wav.ga.event("page_common",c(b(this),"focused"))});$(".js-movies-search-form--submit").focus(function(){wav.ga.event("page_common",
c(b(this),"submit_clicked"))});$(".js-movies-search-form").submit(function(b){var e=$(this),f=e.data("location"),f=c(f,"submitted"),g=e.find(wav.isDesktop?".js-movies-search-form--input.is-pc":".js-movies-search-form--input.is-mobile"),h=g.val();wav.pages.isMoviesListPage()?($.post(wav.urlGenerator.logSearchTerm(),{term:h}),filter.setFilterValues({q:h,page:1},filters.sources.URL),wav.ga.event("page_common",f),g.blur(),b.preventDefault()):a||(b.preventDefault(),wav.ga.eventWithCallback("page_common",
f,null,)})};init.activateMobileHeaderSearchInput=function(){var a=$(".js-movies-search-form--input.is-mobile");a.on("focusin",;a.on("focusout",function(){wav.$body.removeClass("is-mobile-search-focused")})};init.activateMobileMenuTracking=function(){$(".js-mobile-menu--item").click(function(a){var b=$(this).data("e-type");wav.ga.eventAndProcessLink(a,this,wav.ga.getCurrentPageCategory(),"mobile_top_menu_"+
b+"_clicked")})};init.activateNavigateUp=function(){$(".js-navigate-up").click(};init.jsLoaded=function(){wav.$body.addClass("js-loaded")};init.hideSubheader=function(){wav.$subheader.addClass("c-subhead_hidden")};init.showSubheader=function(){wav.$subheader.removeClass("c-subhead_hidden")}})();
(function(){(function(){Marionette.Renderer.render=function(a,b){var c=$(a).html();return Handlebars.compile(c)(b)}})();(function(){Handlebars.registerHelper("wav",function(a,b){if(wav[a])return b.fn(this)});Handlebars.registerHelper("moviesListUrlByTagOnly",function(a){return wav.urlGenerator.moviesListByTagOnly(a.key)});Handlebars.registerHelper("moviesListJapaneseUrl",function(){return wav.urlGenerator.moviesListJapaneseUrl()});Handlebars.registerHelper("withActressUrl",function(){return wav.urlGenerator.withActressUrl()});
Handlebars.registerHelper("trusted",;Handlebars.registerHelper("actressPage",;Handlebars.registerHelper("hd",})();(function(){bb.ModelWithIntegerId=Backbone.Model.extend({initialize:function(){this.updateId();this.on("change",this.onChange,this)},onChange:updateId:function(){this.set("id",parseInt(this.id),
{silent:!0})}})})()})();(function(){wav.pages={MOVIES_LIST:"movies-list",MOVIE:"movie",ACTRESSES:"actresses",TAGS:"tags",LATER:"later",FAVORITES:"favorites",FEEDBACK:"feedback"};wav.getCurrentPage=function(){wav.page||(wav.page=$(document.documentElement).data("page"));return wav.page};wav.pages.isMoviesListPage=function(){return wav.getCurrentPage()==wav.pages.MOVIES_LIST}})();
(function(){function a(a,b,c){$.cookie("adv-except-"+a+"-"+b,b,{expires:c,path:"/"})}function b(a){var b=new Date;b.setTime(b.getTime()+36E5*a)}function c(a){var c;c=(c=$.cookie("adv-shown-popups-of-"+a+"-per-day"))?parseInt(c):0;$.cookie("adv-shown-popups-of-"+a+"-per-day",c+1,{expires:b(24),path:"/"})}$(document).ready(function(){var b=function(b,d){var e=null;_.each(b,function(a){null==e&&(_.contains(d,a.id)||(e=a))});e&&e.url&&(a(e.adflight,e.id,e.expires),d.push(e.id),0!=e.adflightMaxPerDay&&
c(e.adflight),$.popunder([[e.url]]))},e=$(".adv-popup");if(e[0]){var f=[],g=[];_.each(e,function(b){var d=$(b);b=d.data("popup-id");var e=d.data("popup-url"),k=d.data("popup-expires"),n=d.data("popup-adflight"),p=d.data("popup-adflight-max-per-day"),d=d.data("popup-adflight-type");"POPUNDER_INLINE"==d?(0!=p&&c(n),a(n,b,k)):(f.push({id:b,url:e,expires:k?k:30,adflight:n,popupType:d,adflightMaxPerDay:p}),$.cookie("adv-except-"+n+"-"+b)&&g.push(b))});$("body").delegate("a","click",function(){var a=$(this),
c=document.location.hostname,e=a.prop("hostname");(a=a.prop("pathname"))&&"/"!=a.charAt(0)&&(a="/"+a);c==e&&"/m/"==a.substring(0,3)&&b(f,g)})}})})();
(function(){window._gaq=window._gaq||[];var a=wav.ga,b=wav.$config.data("ga-events-percentage");a.getCurrentPageCategory=a.isLoaded=a.trackPageView=function(b){a.pageEvent("open",null,null,!0);b&&_gaq.push(["_trackPageview",b])};a.setCustomVar=function(a,b,e,f){wav.console.debug("ga custom var: ",arguments);_gaq.push(["_setCustomVar",a,b,e,f||3])};a.event=function(a,d,e,f,g,h){wav.console.debug("ga event: ",
arguments);(h||b>=100*Math.random())&&_gaq.push(["_trackEvent",a,d,e,f,g])};a.pageEvent=function(b,d,e,f,g){a.event(a.getCurrentPageCategory(),b,d,e,f,g)};a.eventWithCallback=function(c,d,e,f,g){wav.console.debug("ga event: ",arguments);a.isLoaded()&&(g||b>=100*Math.random())?(_gaq.push(["_set","hitCallback",function(){_gaq.push(["_set","hitCallback",null]);f()}]),_gaq.push(["_trackEvent",c,d,e])):f()};a.eventAndProcessLink=function(b,d,e,f,g,h){b.preventDefault();a.eventWithCallback(e,f,g,function(){window.location.href=
(d||b.target).href},h)};a.trackClickEvents=function(b,d,e,f,g,h){_.each(e,function(e,m){$(e).click(function(e){a.eventAndProcessLink(e,this,b,d+m+f,g,h)})})}})();
(function(){var a=wav.urlGenerator;a.movie=a.favorite=function(a){return a};a.later=function(a){return a};a.favoritesAddUrl=function(a){return"/api/addedToFavorites/"+a};a.favoritesRemoveUrl=function(a){return"/api/removedFromFavorites/"+a};a.movieDoesNotWorkUrl=function(a){return"/api/movieDoesNotWork/"+a};a.laterAddUrl=function(a){return"/later/"+a+"/added"};a.laterRemoveUrl=a.popularActresses=function(){return"/actresses/"};
a.filterActresses=function(a,c){return"/actresses/top-trending/where:"+a+"/sites:"+c};a.filterBestActresses=function(a,c){return"/actresses/best-ranked/where:"+a+"/sites:"+c};a.filterTags=a.popularTags=function(){return"/tags/"};a.languageChange=function(){return"/languageChange"};a.moviesListByTagOnly=function(a){return"/"+a};a.moviesListJapaneseUrl=function(){return"/where:ja"};a.withActressUrl=function(){return"/withActressUrl:actress"};a.hd=function(){return"/hd:hd_only"};
a.trusted=function(){return"/trusted:from_aggregator"};a.actressPage=function(a){return"/actress/"+a};a.movieData=function(){return"/favorite/movie"};a.moviesData=function(){return"/favorite/movies"};a.recentTerms=function(){return"/api/terms"};a.logSearchTerm=function(){return"/api/logSearchTerm"};a.tagVoted=function(a,c,d){return"/api/tagVoting/"+a+"/"+c+(d?"/votedUp":"/votedDown")};a.getAnyMovieIdExcept=function(){return"/api/getAnyMovieIdExcept"};a.moviesListFromFilterParams=function(a,c){var d=
"",e=["where","sites"],f=c?c:{},g=function(a,b){d+="/"+a+":"+b},h=l=f.actress?f.actress:a.actress,m=f.page?f.page:a.page,k=f.q?f.q:a.q;_.each(a.tags,function(a){d+="/"+a});f.tag&&!_.contains(a.tags,f.tag)&&(d+="/"+f.tag);a.sub&&g("sub",a.sub);(f=function(){var c="";_.each(a.sites,;return c}())&&g("sites",f);l&&g("actress",l);_.each("where withActress trusted duration age sort hd".split(" "),function(c){var d=_.find(a[c],function(a){return a.active});
d?(_.contains(e,c)||d.key!=a.defaults[c])&&g(c,d.key):wav.console.warn("There is no active value for "+c+"filter")});m!=a.defaults.page&&g("page",m);a.simplified&&h("simplified","1");k&&h("q",encodeURIComponent(k));return d};a.adFrame=function(a,c,d,e){var f="/support/adFrame?parentElementId="+a+"&adflight="+c;d&&_.each(_.wrapByArray(d),function(a){f+="&adTags="+a});e&&_.each(_.wrapByArray(e),;return f};define("wav.urlGenerator",[],})();
var filter=wav.filter,filters;
(function(){var a=null;init.filters=function(){var a=wav.$config;filters=a.data("from");var b=a.data("sites"),a=a.data("where");filters.defaults={sites:b?b.toString():"",where:a?a:"all",withActress:"all",trusted:"all",duration:"all",age:"all",actress:null,page:1,sub:null,sort:"date",hd:"all"};filters.sources={URL:1,NAVIGATION:2,MOBILE_CUSTOM_SEARCH:3};wav.filters=filters;wav.pages.isMoviesListPage()||filter.processCookieAndDefaultParams()};var b=function(a,b){var f;f=wav.urlGenerator.moviesListFromFilterParams(wav.filters);
wav.getCurrentPage()==wav.pages.MOVIES_LIST?(bb.router.navigate(f,{trigger:!1,forceFragment:!0}),f=!0):(window.location.href=f,f=!1);f&&c(a,b)},c=function(a,b){mar.vent.trigger("filters:changed",a,_.isArray(b)?b:[b])};filter.setSimplified=filter.setFilterValues=function(a,c){var f=[];_.each(a,;b(c,f)};filter.setFilterValue=function(a,c,f,g){var h=!1;if("sites"==a){var l,m;c?"-"==c.substring(0,1)?(m=!0,l=c.substring(1)):
(m=!1,l=c):(m=!0,l="");_.each(filters.sites,function(a){var b=_.stringContains(l,a.letter),b=!m&&b||m&&!b;a.active!=b&&(a.active=b,h=!0)})}else if(_.contains("where trusted withActress duration age sort hd".split(" "),a)){var k=function(b){var c=!1;_.each(filters[a],function(a){var d=a.key==b;a.active!=d&&(a.active=d,h=!0);d&&(c=!0)});return c};k(c)||k(filters.defaults[a])}else"actress"==a?filters.actress!=c&&(filters.actress=c,h=!0):"page"==a?(k=parseInt(c),filters.page!=k&&(filters.page=k,h=!0)):
"tags"==a?(k=_.isArray(c)?c:[c],_.isSameArrays(filters.tags,k)||(filters.tags=k,h=!0)):"q"==a?filters.q!=c&&(filters.q=c,h=!0):"sub"==a?filters.sub!=c&&(filters.sub=c,h=!0):wav.console.warn("unknown filter: "+a+": "+c);if("sites"==a||"where"==a)filters.defaults[a]=c;h&&f&&b(g,a);return h};filter.extractSitesFromDom=function(a){a=a.find("input[name=filter-sites]:checked");return _.map(a,};filter.getActiveFilter=
filter.getFilter=filter.getSearchQuery=function(){var a=filters.q;return a&&0<a.length?a:null};filter.getSite=function(a){return _.find(filters.sites,};filter.getActiveSites=filter.getActiveSitesWithChangedSite=function(a,b){var c="";_.each(filters.sites,function(b){b.active&&b.letter!=a&&(c+=b.letter)});b&&(c+=a);return c};filter.isFavorites=
function(){return"favorites"==filters.sub};filter.isLater=filter.getActiveSitesAsString=function(){var a="";_.each(filter.getActiveSites(),;return a};filter.isLastActiveSite=function(){return 1>=filter.getActiveSites().length};filter.fillSearchSuggestionsFromTerms=function(a){filters.searchSuggestions=a.collect(};filter.processCookieAndDefaultParams=function(){_.each("sites where trusted withActress duration age actress page sort hd".split(" "),
};filter.extractFilterParamsAndSetDefaultsFromUrl=function(a,b,f){a=a?a.split("/"):"";var g=!0,h=[],l=[],m=[];_.each(a,function(a){if(a)if(g&&_.stringContains(a,":")&&(g=!1,filter.setFilterValue("tags",h)&&m.push("tags")),g)h.push(a);else{var b,c,d=a.indexOf(":");-1!=d&&(b=a.substring(0,d),c=a.substring(d+1));b&&(a=b,filter.setFilterValue(a,c)&&m.push(a),l.push(a))}});g&&filter.setFilterValue("tags",h)&&m.push("tags");filter.setSimplified(b?
b.simplified:!1);(function(){_.each("sites where trusted withActress duration age actress page sub sort hd".split(" "),function(a){_.contains(l,a)||(filter.setFilterValue(a,filters.defaults[a])&&m.push(a),l.push(a))})})();filter.setFilterValue("q",b&&b.q?b.q:"")&&m.push("q");f()&&c(filters.sources.URL,m)};filter.getBbModel=function(){a||(a=new Backbone.Model(wav.filters));return a}})();
(function(){var a=wav.caches={movies:{},tags:{},actresses:{}},b=wav.cache={};b.addMovieToCache=function(a){};b.addMoviesToCache=function(a){};b.getMovieFromCache=function(a){};b.addActressToCache=function(b){a.actresses[b.id]=b};b.getActressFromCache=b.addTagToCache=b.addTagsToCache=b.getTagFromCache=function(b,d){var e=a.tags[b];e||(d||wav.console.warn("Tag "+b+" is not found in cache"),
e={});return e};b.getAsyncTag=function(a){function d(){if(a){var f=b.getTagFromCache(a,!0);f&&f.key?e.resolve(f):setTimeout(d,300)}else e.resolve(null)}var e=new $.Deferred;setTimeout(d,50);return e.promise()};b.getAsyncActress=function(a){function d(){if(a){var f=b.getActressFromCache(a);f?e.resolve(f):setTimeout(d,300)}else e.resolve(null)}var e=new $.Deferred;setTimeout(d,50);return e.promise()};b.getAsyncTags=)();
(function(){var a=wav.movies;a.updateLaterStatus=function(){require(["thumbnails"],function(a){a.updateStatuses($(".js-movies"),!0)})};a.init=function(){init.activatePopups();a.updateLaterStatus();require(["thumbnails"],function(a){a.rotateThumbnails()});require(["fl"],;require(["pagination"],function(a){a.resizePaginationOnWindowResize()})}})();(function(){require(["mobile.appNav"],function(a){a.activate()});(function(){$(".js-open-mobile-search").click(})()})();
(function(){function a(){var a=window.location.hostname,b=a.split(".");null!==/^(www[1-9]+[0-9]*).*$/g.exec(a)&&b.splice(0,1);"ja"!==d.getCurrent()&&b.splice(0,1);a="";for(i=0;i<b.length;i++)a=a+"."+b[i];return a}var b=null,c=null,d=wav.lang={values:["en","ja","tw"]};d.getCurrent=function(){b||(b=wav.$config.data("lang"));return b};d.getAlternatives=function(){if(!c){var a=d.getCurrent();c=_.filter(d.values,}return c};var e=function(b,c){b.preventDefault();b.stopPropagation();
wav.ga.eventWithCallback("page_common","language_change_clicked",null,function(){var b=c.attr("data-local"),d=a(),e=new Date;e.setTime(e.getTime()+31536E6);e="expires="+e.toUTCString();document.cookie="lng="+b+";"+e+";path=/; domain="+d;var b=window.location,d=window.location.hostname,e=c.attr("data-lang"),f=a().substr(1),n=f,n="ja"===e?f:e+"."+f;null!==/^(www[1-9]+[0-9]*).*$/g.exec(d)&&(wwwSubdomain=d.split(".")[0],n=wwwSubdomain+"."+n);b.hostname=n})};(function(){$(".js-language-change").daSelect({onClick:)})();(function(){$(".js-mobile-language-change").delegate("a","click",})()})();(function(){var a={};wav.template={parse:function(b){var c=a[b];c||(c=Handlebars.compile($("#js-"+b+"-template").html()),a[b]=c);return c},apply:})();(function(){wav.tt.init=function(){$.fn.tooltipster("setDefaults",{position:"top",offsetY:-3,touchDevices:!1})}})();
(function(){require(["metrics/metrics.fl"],function(a){a.collect()});require(["metrics/metrics.menu"],;$(document).ready(function(){(function(){$(".js-actresses-all-link").click(function(a){wav.ga.eventAndProcessLink(a,this,"Actress Click","Click","See more")});$(".js-tags-all-link").click(function(a){wav.ga.eventAndProcessLink(a,this,"Category Click","Click","See more")})})()})})();
(function(){define("i18n.en",[],function(){return{"tag.japanese":"Japanese"}});define("i18n.ja",[],;define("i18n.tw",[],;define("i18n",["i18n."+wav.lang.getCurrent()],})();
(function(){define("promise",["rsvp"],function(a){a.wrapByPromise=a.wrapPromise=function(b){return new a.Promise(};a.PROMISE_STUB=a.wrapByPromise(!0);a.ajax=a.ajaxPostJson=function(b,c){return a.ajax({url:b,type:"POST",data:JSON.stringify(c),contentType:"application/json",dataType:"json"})};a.timeout=function(b,c){return new a.Promise(};a.on("error",function(a){console&&console.assert&&console.assert(!1,a,a.stack)});return a})})();define("badge",function(){var a={},b=function(b){var d=a[b];d||(d=$("#js-movie-"+b+"-badge-template").html(),a[b]=d);return d};return{add:function(a,d){var e="has-"+d+"-badge";a.hasClass("has-badge")||a.hasClass(e)||(a.find(".js-movie-zoom-normal-thumbnail").append(b(d)),a.addClass(e),a.addClass("has-badge"))}}});
(function(){define("fl",["fl.favorites","fl.later","fl.notification","wt/wt","storage.limitedCollection.stub"],function(a,b,c,d,e){if(Modernizr.localstorage){var f={},g=function(a,b,c,d,e,f){var h="is-"+c+"-active";(b=d.has(b))?(a.addClass(h),f&&f()):a.removeClass(h);if(1==e||2==e)a=$(".js-add-to-"+c+"--counter"),c=parseInt(a.text(),10),f=!1,isNaN(c)||(b?(c++,f=!0):0<c&&2==e&&(c--,f=!0),f&&a.text(c))},h=function(a){a.addClass("is-animate--rotate");setTimeout(
500)},l=function(a,b,c,d){var e=a.parents(".js-movie"),f=e.data("movie-id"),l=function(){wav.isDesktop&&h(a.find("i"))};f&&c.toggleWithStrictSizeCheck(f)&&g(e,f,b,c,d,l)};f.updateLaterStatus=f.updateFavoriteStatus=function(b,c){g(b,c,"favorite",a,1)};f.activateFavoriteLaterLinks=function(c){var e=function(a,b,c){$(document).on("click",".js-add-to-"+a,function(e){e.preventDefault();e.stopPropagation();d.isEnabled()||(e=$(this),l(e,a,b,c),(e=e.data("location"))&&wav.ga.pageEvent(e+
"_add_to_"+a+"_clicked"))})};c||e("favorite",a,2);e("later",b)};f.updateTooManyLaterMoviesMessage=f.toggleFavorites=function(){var b=$(".js-add-to-favorite"),c=d.isEnabled()?e:a;l(b,"favorite",c,2)};return f}return{supported:!1,activateFavoriteLaterLinks:FUNCTION_STUB,updateLaterStatus:FUNCTION_STUB,updateFavoriteStatus:FUNCTION_STUB,updateTooManyLaterMoviesMessage:FUNCTION_STUB}});define("fl.favorites.tt",
["wt/tour/wt.favorites","promise","tt.list","tt.i18n"],function(a,b,c,d){var e=a.key;return{load:function(){var b=this;c.isNotWatched(e)&&($(".js-add-to-favorite").tooltipsterTour(d.title.favorites,"wav.tt.favorites",d.common).on("click",b.close),mar.vent.on("wt:started",function(c){c==a.key&&b.closeAndRemember()}))},close:closeAndRemember:function(){this.close();c.markAsWatched(e)},startTour:function(){this.close();b.timeout(500).then(function(){a.start()})}}});
require(["fl","fl.later"],})();define("fl.favorites",["stored"],function(a){return a.init("favorites",250,{onAdd:function(a){$.post(wav.urlGenerator.favoritesAddUrl(a))}})});define("fl.later",["stored"],function(a){return a.init("later",250)});
define("fl.notification",["notification"],function(a){if(Modernizr.localstorage){var b={},c={},d=function(a){var c=b[a];c||(c=wav.$config.data(a),b[a]=c);return c};return{hideWarningOnTooManyMovies:displayWarningOnTooManyMovies:function(b,f){var g=d(b);f&&(g=g+"<br>"+d(f));a.showNotification(c,g)},isWarningMessageDisplayed:}return{hideWarningOnTooManyMovies:FUNCTION_STUB,displayWarningOnTooManyMovies:FUNCTION_STUB,
isWarningMessageDisplayed:FUNCTION_STUB}});define("markButtons",["markButtons.does-not-work","badge"],function(a,b){var c=return{doOnContainsOrAddBadge:function(b,e,f){f=f.doesNotWork;a.has(e)?((f||c)(b,e,a),b=!0):b=!1;return b}}});define("markButtons.does-not-work",["stored"],function(a){return a.init("does-not-work",150,{onAdd:)});
define("notification",function(){var a=null,b={showNotification:function(b,d){a=b;var e=$(".js-notification");e.children(".js-notification--text").html(d);e.addClass("is-displayed")},hideNotification:isNotificationDisplayed:isNotified:;$(document).ready(;
return b});define("notification.header",[],function(){var a=null;return{get$el:show:function(){$(document.documentElement).addClass("is-header-notification")},hide:});
define("pagination",function(){return{resizePagination:function(){$(".js-pagination").each(function(){var a=$(this),b=a.parent(),c=a.children(".js-pagination--fixed"),d=a.children(".js-pagination--flexible"),e=b.width()-c.width()-a.intCss("marginLeft")-a.intCss("marginRight"),f=d.children();d.css({"max-width":function(){for(var a=1,b=f.length,c=0;c<b;c++){var d=$(f[c]).outerWidth();if(a+d>e)break;else a+=d}return a}()})})},resizePaginationWithDelay:function(a){setTimeout(this.resizePagination,a||
500)},resizePaginationOnWindowResize:function(){$(window).resize(_.debounce(this.resizePagination,500))}}});define("storage",function(){if(Modernizr.localstorage)return{getItem:function(a,c){c(a,localStorage[a])},setItem:function(a,c){localStorage[a]=c}};var a={};return{getItem:setItem:});
define("storage.limitedCollection",["storage"],function(a){var b=function(b,d,e){var f=this,g=h="wav."+b;this.name=b;this._limit=_.isUndefined(d)?-1:d;this._onOverflow=this._onAdd=g;(function(){a.getItem(h,function(a,b){f._data=b?JSON.parse(b):{}})})();this._wrapId=this._unwrapId=this._toIntOrSourceValue=this._save=
e&&(e.onAdd&&(this._onAdd=e.onAdd),e.onOverflow&&(this._onOverflow=e.onOverflow))};b.prototype.add=function(a,b){if(!this.has(a)){var e=Object.keys(this._data);0<this._limit&&e.length>=this._limit&&delete this._data[e[0]];this._data[this._wrapId(a)]=b?b:!0;this._save();this._onAdd(a)}};b.prototype.get=function(a){return this._data[this._wrapId(a)]};b.prototype.set=function(a,b){this.has(a)?(this._data[this._wrapId(a)]=b,this._save()):this.add(a,b)};b.prototype.remove=function(a){this.has(a)&&(delete this._data[this._wrapId(a)],
this._save())};b.prototype.toggle=function(a,b){(_.isUndefined(b)?this.has(a):b)?this.remove(a):this.add(a)};b.prototype.has=b.prototype.hasMoreSpace=function(){return 0>this._limit?!0:this._limit>Object.keys(this._data).length};b.prototype.toggleWithStrictSizeCheck=function(a){var b=!0;this.has(a)?this.remove(a):this.hasMoreSpace()?this.add(a):(this._onOverflow(a),b=!1);return b};b.prototype.getValues=function(){var a=this,b=Object.keys(this._data);
return _.map(b,function(b){return a._unwrapId(b)})};b.prototype.onOverflow=b.prototype.size=b.prototype._clear=return b});
define("storage.limitedCollection.stub",[],function(){var a=a.prototype.add=a.prototype.get=function(a){};a.prototype.set=function(a,c){};a.prototype.remove=function(a){};a.prototype.toggle=function(a,c){};a.prototype.has=a.prototype.hasMoreSpace=a.prototype.toggleWithStrictSizeCheck=function(a){this._items[a]=!this._items[a];return!0};a.prototype.getValues=a.prototype.onOverflow=
function(a){};a.prototype.size=return new a});define("stored",["storage.limitedCollection"],function(a){return{init:});
define("thumbnails",["fl","watched","markButtons"],function(a,b,c){return{rotateThumbnails:function(){if(!Modernizr.touch){var a=function(a){var b=a.attr("src"),c=b.lastIndexOf("_");return 0<=c&&(a=b.substring(0,c)+"_",b=g.exec(b.substring(c+1)))?{current:b[1],before:a,after:b[2]}:null},b=function(b){var e=b.parents(".js-movie").data("movie-thumbnails-count"),g=a(b);if(0<e&&g){var k=g.current;c=setInterval(function(){k++;k>e&&(k=1);b.attr("src",g.before+k+g.after)},750)}},c=null,g=/^(\d+)(..+)$/;
$(".js-movies").on({mouseenter:mouseleave:,".js-movie-thumbnail--img-hover")}},updateStatuses:function(d,e,f){Modernizr.localstorage&&d.find(".js-movie").each(function(){var d=$(this),h=d.data("movie-id");h&&(a.updateLaterStatus(d,h),c.doOnContainsOrAddBadge(d,h,f||{}),b.updateWatchedBadge(d,h),e||a.updateFavoriteStatus(d,h))})}}});
define("watched",["watched.movies","badge"],function(a,b){return Modernizr.localstorage?{markAsWatched:isWatched:updateWatchedBadge:function(a,d){d&&this.isWatched(d)&&b.add(a,"watched")}}:{markAsWatched:isWatched:updateWatchedBadge:});define("watched.movies",["stored"],;
define("utils.sessionStorage",[],function(){return{set:function(a,b){$.cookie("utils.sessionStorage."+a,JSON.stringify(b),{path:"/"})},get:function(a){return(a=$.cookie("utils.sessionStorage."+a))?JSON.parse(a):null}}});define("filter.last-search",["utils.sessionStorage"],function(a){return{set:get:});
define("mobile.appNav",["wt/wt"],function(a){var b;return{activate:function(){b=$.pushy({onOpen:function(a){require(["fl.favorites","fl.later"],}});$(".js-open-mobile-nav").click(function(c){c.preventDefault();a.isEnabled()||(b.toggle(),wav.ga.event("page_common","mobile_menu.open"))})},open:close:});
define("metrics/metrics.fl",["storage","fl.favorites","fl.later"],function(a,b,c){function d(a){var b=a.size();0<b&&wav.ga.event("page_common","usage."+a.name+"."+(5<b?"6+":"1-5"))}return{collect:function(){Modernizr.localstorage&&a.getItem("wav.fl.metrics.usage",function(e,f){f||(d(b),d(c),a.setItem("wav.fl.metrics.usage",1))})}}});
define("metrics/metrics.menu",[],function(){return{collect:function(){var a,b;wav.isDesktop?(a="pc_left_menu_",b={}):(a="mobile_left_menu_",b={favorites:".js-mobile-nav-favorites",later:".js-mobile-nav-later"});wav.ga.trackClickEvents(wav.ga.getCurrentPageCategory(),a,b,"_clicked")}}});
define("wt/wt",[],function(){var a=0,b=!1;return{isEnabled:isFakeMovie:function(){return b},setFakeMovie:tripStarted:tripCompleted:resizeTripOnMovieFit:function(){mar.vent.on("movie:fit",}}});
define("wt/wt.watched",["storage.limitedCollection"],function(a){var b=new a("wt.watched",-1,{onAdd:);return{markAsWatched:function(a){b.add(a)},isWatched:function(a){return b.has(a)},rememberAsWatchedOnEvents:});
define("wt/wt.Tour",["wt/wt","promise"],function(a,b){return function(c,d,e){var f=null;this.key=c;this.title=d;this.icon=e;this.start=function(){f||(f=new b.Promise(function(b,d){require([c+".trip"],function(d){d.setOnTripStart(function(){a.tripStarted();mar.vent.trigger("wt:started",c)});d.setOnTripEnd(function(){a.tripCompleted();mar.vent.trigger("wt:completed",c)});b(d)})}));f.then(function(a){a.start()})};return this}});
define("wt/tour/wt.does-not-work",["wt/wt.Tour","wt/tour/wt.does-not-work.i18n"],function(a,b){return new a("wt/tour/wt.does-not-work",b.tour.title,"fa fa-trash-o")});define("wt/tour/wt.does-not-work.i18n.en",[],function(){return{tour:{title:"Movie does not work"},1:"If this movie does not work then click this button",2:"By doing so you help us to filter bad movies from the system"}});
define("wt/tour/wt.does-not-work.i18n.ja",[],function(){return{tour:{title:"\u52d5\u753b\u304c\u898b\u3089\u308c\u307e\u305b\u3093"},1:"\u52d5\u753b\u304c\u898b\u3089\u308c\u306a\u3044\u5834\u5408\u306f\u3053\u306e\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002",2:"\u898b\u3089\u308c\u306a\u3044\u52d5\u753b\u3092\u6d88\u3059\u3053\u3068\u306b\u3054\u5354\u529b\u4e0b\u3055\u3044"}});
define("wt/tour/wt.does-not-work.i18n.tw",["wt/tour/wt.does-not-work.i18n.ja"],function(a){return a});define("wt/tour/wt.does-not-work.i18n",["wt/tour/wt.does-not-work.i18n."+wav.lang.getCurrent()],function(a){return a});define("wt/tour/wt.actress-suggest",["wt/wt.Tour","wt/tour/wt.actress-suggest.i18n"],function(a,b){return new a("wt/tour/wt.actress-suggest",b.tour.title,"wi wi-actress")});
define("wt/tour/wt.actress-suggest.i18n.en",[],function(){return{tour:{title:"Suggest an actress for a movie"},1:"Click here to suggest an actress",2:"Type the actress's name which you want to suggest",3:"Select an actress to suggest",4:"You have suggested an actress. Thank you!"}});
define("wt/tour/wt.actress-suggest.i18n.ja",[],function(){return{tour:{title:"\u5973\u512a\u540d\u3092\u6559\u3048\u3066\u4e0b\u3055\u3044"},1:"\u5973\u512a\u30bf\u30b0\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4e0b\u3055\u3044\u3002",2:"\u5973\u512a\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002",3:"\u8ffd\u52a0\u3059\u308b\u5973\u512a\u3092\u9078\u3093\u3067\u304f\u3060\u3055\u3044\u3002",4:"\u8ffd\u52a0\u304c\u5b8c\u4e86\u3057\u307e\u3059\u3002"}});
define("wt/tour/wt.actress-suggest.i18n.tw",["wt/tour/wt.actress-suggest.i18n.ja"],function(a){return a});define("wt/tour/wt.actress-suggest.i18n",["wt/tour/wt.actress-suggest.i18n."+wav.lang.getCurrent()],function(a){return a});define("wt/tour/wt.favorites",["wt/wt.Tour","wt/tour/wt.favorites.i18n"],function(a,b){return new a("wt/tour/wt.favorites",b.tour.title,"fa fa-star")});
define("wt/tour/wt.favorites.i18n.en",[],function(){return{tour:{title:"Add movie to favorites"},1:"Click this button to add movie to favorites",pc:{2:"Click here to access your favorite movies",3:"Note: you will lose your favorites if you change the browser or enable incognito mode"},mobile:{2:"Click here to open navigation menu",3:"To access your favorites click this link",4:"Note: you will lose your favorites if you change the browser or enable incognito mode"}}});
define("wt/tour/wt.favorites.i18n.ja",[],function(){return{tour:{title:"\u52d5\u753b\u3092\u304a\u6c17\u306b\u5165\u308a\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044"},1:"\u304a\u6c17\u306b\u5165\u308a\u306b\u52d5\u753b\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u3053\u306e\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002",pc:{2:"\u304a\u6c17\u306b\u5165\u308a\u30ea\u30b9\u30c8\u3092\u898b\u308b\u306b\u306f\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4e0b\u3055\u3044",
3:"\u203b\u30d6\u30e9\u30a6\u30b6\u3092\u5909\u66f4\u3057\u305f\u308a\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30e2\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u304a\u6c17\u306b\u5165\u308a\u304c\u6d88\u3048\u3066\u3057\u307e\u3044\u307e\u3059"},mobile:{2:"\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304f\u305f\u3081\u306b\u306f\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4e0b\u3055\u3044",3:"\u304a\u6c17\u306b\u5165\u308a\u30ea\u30b9\u30c8\u3092\u898b\u308b\u306b\u306f\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4e0b\u3055\u3044",
4:"\u203b\u30d6\u30e9\u30a6\u30b6\u3092\u5909\u66f4\u3057\u305f\u308a\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30e2\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u304a\u6c17\u306b\u5165\u308a\u304c\u6d88\u3048\u3066\u3057\u307e\u3044\u307e\u3059"}}});define("wt/tour/wt.favorites.i18n.tw",["wt/tour/wt.favorites.i18n.ja"],function(a){return a});define("wt/tour/wt.favorites.i18n",["wt/tour/wt.favorites.i18n."+wav.lang.getCurrent()],function(a){return a});
define("wt/wt.list",["wt/wt.watched","wt/tour/wt.does-not-work","wt/tour/wt.actress-suggest","wt/tour/wt.favorites"],function(a,b,c,d){var e=[],f=[];c=function(b){a.isWatched(b.key)?(b.watched=!0,f.push(b)):e.push(b)};var g=function(a,b){return _.find(b,function(b){return b.key==a})};c(d);c(b);(function(){mar.vent.on("wt:marked-as-watched",function(a){if(a=g(a,e))a.watched=!0,e.remove(a),f.push(a)})})();return{getNew:function(){return e},getWatched:function(){return f}}});
define("wt/wt.announcement",["wt/wt.list"],function(a){var b=wav.isMobile;mar.vent.on("wt:marked-as-watched",function(c){if(b){var d=a.getNew();(0==d.length||1==d.length&&d[0].key==c)&&wav.$body.addClass("is-announcement-hidden")}});return{checkAndDisplay:function(){if(wav.$config.data("is-announcement")){var c=!0;b&&0==a.getNew().length&&(c=!1);c&&wav.$body.addClass("is-announcement")}}}});
(function(){var a=window.mar=wav.mar=new Backbone.Marionette.Application,b=wav.bb;a.addInitializer(function(){(function(){a.on("initialize:after",function(){b.init.historyRoot&&(b.init.historyRoot(),b.init.startRouterWithLinksInterception());b.initialized=!0})})()})})();
(function(){var a=!1;mar.vent.on("moviesListPage:loaded",;wav.afterMoviesListOrAnyOtherPageLoaded=function(){var b=new $.Deferred;if(!wav.pages.isMoviesListPage()||a)b.resolve();else mar.vent.on("moviesListPage:loaded",function(){b.resolve()});return b.promise()}})();
(function(a,b,c){c.init.startRouter=function(){a.history.start({pushState:!0,root:c.config.historyRoot})};c.init.startRouterWithLinksInterception=function(){c.init.startRouter();b(document).on("click","a.bb-history-capture",function(a){var e=b(this).relativeHref(wav.isIe7),f=this.protocol+"//";e.slice(f.length)!==f&&(a.preventDefault(),c.router.navigate(e,!0))})}})(Backbone,jQuery,bb);
(function(){mar.module("pcFilters",function(a){var b=function(a){wav.doNotDeselectLastCheckbox("filter-sites",a)},c=Backbone.Marionette.ItemView.extend({template:"#js-pc-filters-template",onRender:);a.addInitializer(function(){var a=function(a){a.page=1;filter.setFilterValues(a,filters.sources.NAVIGATION)};mar.addRegions({filter_container:".js-pc-filters"});(function(){var b=mar.filter_container.get$el();b.delegate(".js-pc-filter-sites input","change",function(b){var c=$(b.target);
b=c.val();c=c.is(":checked");a({sites:filter.getActiveSitesWithChangedSite(b,c)})});b.delegate(".js-pc-filter-trusted","change",function(b){a({trusted:$(b.target).val()})});b.delegate(".js-pc-filter-duration","change",function(b){a({duration:$(b.target).val()})});b.delegate(".js-pc-filter-withActress","change",function(b){a({withActress:$(b.target).val()})});b.delegate(".js-pc-filter-age","change",function(b){a({age:$(b.target).val()})});b.delegate(".js-pc-filter-sort","change",function(b){a({sort:$(b.target).val()})});
b.delegate(".js-pc-filter-hd","change",function(b){a({hd:$(b.target).val()})})})();(function(){mar.vent.on("filters:changed",function(a){a!=filters.sources.NAVIGATION&&mar.filter_container.show(new c({model:filter.getBbModel()}))})})();b(mar.filter_container.get$el())})})})();
(function(){$(function(){filter._mobileCustomSearch({onSubmit:function(a){filter.setFilterValues(a,filters.sources.MOBILE_CUSTOM_SEARCH);wav.ga.pageEvent("custom_search_ok")},onCancel:onDefault:function(a){filter.setFilterValues(a,filters.sources.MOBILE_CUSTOM_SEARCH);wav.ga.pageEvent("custom_search_ok")}})})})();
(function(){wav.isDesktop&&mar.module("pcFilters",function(a){var b=Backbone.Model.extend({url:function(){return wav.urlGenerator.filterActresses(filter.getActiveFilter("where").key,filter.getActiveSitesAsString())},parse:function(a){var b=[];_.each(a,function(a){b.push({actress:a,name:a.name,thumbnailUrl:a.thumbnailUrl,position:a.position})});return{actresses:b}}}),c=Backbone.Model.extend({url:function(){return wav.urlGenerator.filterBestActresses(filter.getActiveFilter("where").key,filter.getActiveSitesAsString())},
parse:function(a){var b=[];_.each(a,function(a){b.push({actress:a,name:a.name,thumbnailUrl:a.thumbnailUrl,position:a.position})});return{actresses:b}}}),d=Backbone.Model.extend({url:function(){return wav.urlGenerator.filterTags(filter.getActiveFilter("where").key,filter.getActiveSitesAsString())}}),e=Backbone.Marionette.ItemView.extend({template:"#js-pc-filters-actresses-template"}),f=Backbone.Marionette.ItemView.extend({template:"#js-pc-filters-best-actresses-template"}),g=Backbone.Marionette.ItemView.extend({template:"#js-pc-filters-tags-template"});
a.addInitializer(function(){mar.addRegions({filter_actresses:".js-pc-filters-actresses",filter_best_actresses:".js-pc-filters-best-actresses",filter_tags:".js-pc-filters-tags"});(function(){var a=function(a,b){a.get$el().on("click","a",function(a){wav.ga.eventAndProcessLink(a,this,"page_common","column_left."+b+".click")})};a(mar.filter_actresses,"actresses");a(mar.filter_tags,"tags")})();wav.afterMoviesListOrAnyOtherPageLoaded().then(function(){var a=function(a,b,c){var d=new a;d.fetch().then(function(){c.show(new b({model:d}))})},
l=function(){a(b,e,mar.filter_actresses);a(c,f,mar.filter_best_actresses)};l();a(d,g,mar.filter_tags);(function(){mar.vent.on("filters:changed",function(b,c){wav.pages.isMoviesListPage()&&(_.contains(c,"where")||_.contains(c,"sites"))&&(l(),a(d,g,mar.filter_tags))})})()})})})})();
(function(){wav.tt.init();$(document).ready(function(){init.filters();mar.start({});init.activateNavigateUp();init.activateSearchTerms();init.activateSearchForms();init.activateMobileMenuTracking();init.activateMobileHeaderSearchInput();init.jsLoaded();wav.ga.trackPageView()});wav.isModernBrowser&&require(["wt/wt.watched","wt/wt.announcement"],})();