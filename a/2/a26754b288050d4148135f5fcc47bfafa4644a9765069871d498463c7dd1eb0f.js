"use strict";(globalThis["webpackChunkconsumerhelpweb"]=globalThis["webpackChunkconsumerhelpweb"]||[]).push([[851],{3448:(n,e,t)=>{function o(){var n="/runner/_work/ConsumerHelpWebApp/ConsumerHelpWebApp/src/components/ContactEmailForm.vue",e="e0748c53c918a2241f8c450e9653341b809bad48",t=new Function("return this")(),l="__coverage__",r={path:"/runner/_work/ConsumerHelpWebApp/ConsumerHelpWebApp/src/components/ContactEmailForm.vue",statementMap:{0:{start:{line:1,column:13},end:{line:2,column:1}},1:{start:{line:1,column:39},end:{line:1,column:43}},2:{start:{line:1,column:47},end:{line:1,column:59}},3:{start:{line:1,column:60},end:{line:1,column:3184}},4:{start:{line:1,column:1328},end:{line:1,column:1362}},5:{start:{line:1,column:1355},end:{line:1,column:1362}},6:{start:{line:1,column:1362},end:{line:1,column:1416}},7:{start:{line:1,column:1944},end:{line:1,column:1978}},8:{start:{line:1,column:1971},end:{line:1,column:1978}},9:{start:{line:1,column:1978},end:{line:1,column:2031}},10:{start:{line:1,column:2606},end:{line:1,column:2640}},11:{start:{line:1,column:2633},end:{line:1,column:2640}},12:{start:{line:1,column:2640},end:{line:1,column:2691}},13:{start:{line:3,column:22},end:{line:3,column:24}}},fnMap:{0:{name:"render",decl:{start:{line:1,column:22},end:{line:1,column:28}},loc:{start:{line:1,column:30},end:{line:2,column:1}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:1,column:1311},end:{line:1,column:1312}},loc:{start:{line:1,column:1327},end:{line:1,column:1417}},line:1},2:{name:"(anonymous_2)",decl:{start:{line:1,column:1927},end:{line:1,column:1928}},loc:{start:{line:1,column:1943},end:{line:1,column:2032}},line:1},3:{name:"(anonymous_3)",decl:{start:{line:1,column:2589},end:{line:1,column:2590}},loc:{start:{line:1,column:2605},end:{line:1,column:2692}},line:1}},branchMap:{0:{loc:{start:{line:1,column:245},end:{line:1,column:534}},type:"cond-expr",locations:[{start:{line:1,column:267},end:{line:1,column:525}},{start:{line:1,column:526},end:{line:1,column:534}}],line:1},1:{loc:{start:{line:1,column:535},end:{line:1,column:828}},type:"cond-expr",locations:[{start:{line:1,column:555},end:{line:1,column:819}},{start:{line:1,column:820},end:{line:1,column:828}}],line:1},2:{loc:{start:{line:1,column:829},end:{line:1,column:3182}},type:"cond-expr",locations:[{start:{line:1,column:850},end:{line:1,column:3173}},{start:{line:1,column:3174},end:{line:1,column:3182}}],line:1},3:{loc:{start:{line:1,column:1328},end:{line:1,column:1362}},type:"if",locations:[{start:{line:1,column:1328},end:{line:1,column:1362}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:1},4:{loc:{start:{line:1,column:1944},end:{line:1,column:1978}},type:"if",locations:[{start:{line:1,column:1944},end:{line:1,column:1978}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:1},5:{loc:{start:{line:1,column:2038},end:{line:1,column:2173}},type:"cond-expr",locations:[{start:{line:1,column:2057},end:{line:1,column:2164}},{start:{line:1,column:2165},end:{line:1,column:2173}}],line:1},6:{loc:{start:{line:1,column:2606},end:{line:1,column:2640}},type:"if",locations:[{start:{line:1,column:2606},end:{line:1,column:2640}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:1},7:{loc:{start:{line:1,column:2698},end:{line:1,column:2831}},type:"cond-expr",locations:[{start:{line:1,column:2715},end:{line:1,column:2822}},{start:{line:1,column:2823},end:{line:1,column:2831}}],line:1}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e0748c53c918a2241f8c450e9653341b809bad48"},a=t[l]||(t[l]={});a[n]&&a[n].hash===e||(a[n]=r);var i=a[n];return o=function(){return i},i}t.r(e),t.d(e,{default:),o(),o().s[0]++;var l=function(){o().f[0]++;var n=(o().s[1]++,this),e=(o().s[2]++,n._self._c);return o().s[3]++,e("form",{ref:"contactForm",staticClass:"o-form c-help--emailJustEat",attrs:{method:"POST",novalidate:n.formLoaded,"data-test":"emailForm"},on:{submit:n.submitForm}},[n.formSubmitError?(o().b[0][0]++,e("div",{staticClass:"o-formAlert o-formAlertLegacy",attrs:{"data-test":"postResponseError"}},[e("f-alert",{attrs:{heading:n.content.contact_email_submit_server_error,type:"danger","data-gtm":"engagement|form_email_justeat|submit_server_error"}})],1)):(o().b[0][1]++,n._e()),n.formSubmitted?(o().b[1][0]++,e("div",{staticClass:"o-formAlert o-formAlertLegacy",attrs:{"data-test":"postResponseSuccess"}},[e("f-alert",{attrs:{heading:n.content.contact_email_form_submit_success_message,type:"success","data-gtm":"engagement|form_email_justeat|submit_success"}})],1)):(o().b[1][1]++,n._e()),n.formSubmitted?(o().b[2][1]++,n._e()):(o().b[2][0]++,e("div",[e("div",{staticClass:"o-formField",attrs:{"data-test":"orderIdInput"}},[e("label",[n._v(" "+n._s(n.content.contact_email_input_ordernumber_label_text)+" "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.formData.orderId,expression:"formData.orderId"}],attrs:{type:"number",name:"orderId",placeholder:n.content.contact_email_input_ordernumber_placeholder_text},domProps:{value:n.formData.orderId},on:{input:function(e){if(o().f[1]++,o().s[4]++,e.target.composing)return o().b[3][0]++,void o().s[5]++;o().b[3][1]++,o().s[6]++,n.$set(n.formData,"orderId",e.target.value)}}})])]),e("div",{staticClass:"o-formField",attrs:{"data-test":"reasonInput"}},[e("label",[n._v(" "+n._s(n.content.contact_email_input_reason_label_text)+" "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.formData.reason,expression:"formData.reason"}],attrs:{type:"text",name:"reason",required:"required",maxlength:"120",placeholder:n.content.contact_email_input_reason_placeholder_text},domProps:{value:n.formData.reason},on:{change:n.validateReason,input:function(e){if(o().f[2]++,o().s[7]++,e.target.composing)return o().b[4][0]++,void o().s[8]++;o().b[4][1]++,o().s[9]++,n.$set(n.formData,"reason",e.target.value)}}})]),n.error.reason?(o().b[5][0]++,e("error-message",[n._v(" "+n._s(n.content.contact_email_input_reason_required_error_message)+" ")])):(o().b[5][1]++,n._e())],1),e("div",{staticClass:"o-formField",attrs:{"data-test":"bodyInput"}},[e("label",[n._v(" "+n._s(n.content.contact_email_input_detail_label_text)+" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.formData.body,expression:"formData.body"}],attrs:{name:"body",required:"required",maxlength:"10000"},domProps:{value:n.formData.body},on:{change:n.validateBody,input:function(e){if(o().f[3]++,o().s[10]++,e.target.composing)return o().b[6][0]++,void o().s[11]++;o().b[6][1]++,o().s[12]++,n.$set(n.formData,"body",e.target.value)}}})]),n.error.body?(o().b[7][0]++,e("error-message",[n._v(" "+n._s(n.content.contact_email_input_detail_required_error_message)+" ")])):(o().b[7][1]++,n._e())],1),e("div",{staticClass:"o-formField"},[e("f-button",{attrs:{"button-type":"primary","action-type":"submit","is-full-width":!0,disabled:n.formSubmitting,"is-loading":n.formSubmitting,"data-gtm":"engagement|form_email_justeat|click_send_email_justeat"}},[n._v(" "+n._s(n.content.contact_email_submit_button_text)+" ")])],1)]))])},r=(o().s[13]++,[]),a=t(629),i=t(945),m=t.n(i),s=t(1101);function c(){var n="/runner/_work/ConsumerHelpWebApp/ConsumerHelpWebApp/src/components/ContactEmailForm.vue",e="021769854895499027826adee69f165d607f3b71",t=new Function("return this")(),o="__coverage__",l={path:"/runner/_work/ConsumerHelpWebApp/ConsumerHelpWebApp/src/components/ContactEmailForm.vue",statementMap:{0:{start:{line:12,column:24},end:{line:12,column:98}},1:{start:{line:13,column:18},end:{line:13,column:78}},2:{start:{line:16,column:4},end:{line:31,column:5}},3:{start:{line:35,column:4},end:{line:35,column:74}},4:{start:{line:40,column:6},end:{line:47,column:8}},5:{start:{line:41,column:8},end:{line:46,column:15}},6:{start:{line:42,column:10},end:{line:45,column:12}},7:{start:{line:50,column:6},end:{line:50,column:24}},8:{start:{line:51,column:19},end:{line:51,column:34}},9:{start:{line:52,column:6},end:{line:52,column:32}},10:{start:{line:55,column:6},end:{line:60,column:7}},11:{start:{line:56,column:8},end:{line:56,column:40}},12:{start:{line:57,column:8},end:{line:57,column:36}},13:{start:{line:58,column:8},end:{line:58,column:35}},14:{start:{line:59,column:8},end:{line:59,column:20}},15:{start:{line:63,column:40},end:{line:63,column:53}},16:{start:{line:64,column:6},end:{line:73,column:10}},17:{start:{line:67,column:10},end:{line:67,column:35}},18:{start:{line:68,column:10},end:{line:68,column:38}},19:{start:{line:72,column:10},end:{line:72,column:37}},20:{start:{line:76,column:6},end:{line:76,column:33}},21:{start:{line:78,column:6},end:{line:78,column:30}},22:{start:{line:80,column:6},end:{line:80,column:31}},23:{start:{line:83,column:17},end:{line:83,column:37}},24:{start:{line:84,column:6},end:{line:84,column:45}},25:{start:{line:87,column:17},end:{line:87,column:37}},26:{start:{line:88,column:6},end:{line:88,column:43}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:12,column:18},end:{line:12,column:19}},loc:{start:{line:12,column:24},end:{line:12,column:98}},line:12},1:{name:"(anonymous_1)",decl:{start:{line:13,column:12},end:{line:13,column:13}},loc:{start:{line:13,column:18},end:{line:13,column:78}},line:13},2:{name:"(anonymous_2)",decl:{start:{line:15,column:2},end:{line:15,column:3}},loc:{start:{line:15,column:9},end:{line:32,column:3}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:34,column:2},end:{line:34,column:3}},loc:{start:{line:34,column:12},end:{line:36,column:3}},line:34},4:{name:"(anonymous_4)",decl:{start:{line:38,column:4},end:{line:38,column:5}},loc:{start:{line:38,column:24},end:{line:48,column:5}},line:38},5:{name:"(anonymous_5)",decl:{start:{line:40,column:21},end:{line:40,column:22}},loc:{start:{line:40,column:27},end:{line:47,column:7}},line:40},6:{name:"(anonymous_6)",decl:{start:{line:41,column:26},end:{line:41,column:27}},loc:{start:{line:41,column:32},end:{line:46,column:9}},line:41},7:{name:"(anonymous_7)",decl:{start:{line:49,column:4},end:{line:49,column:5}},loc:{start:{line:49,column:18},end:{line:81,column:5}},line:49},8:{name:"(anonymous_8)",decl:{start:{line:65,column:14},end:{line:65,column:15}},loc:{start:{line:65,column:20},end:{line:69,column:9}},line:65},9:{name:"(anonymous_9)",decl:{start:{line:70,column:15},end:{line:70,column:16}},loc:{start:{line:70,column:21},end:{line:73,column:9}},line:70},10:{name:"(anonymous_10)",decl:{start:{line:82,column:4},end:{line:82,column:5}},loc:{start:{line:82,column:22},end:{line:85,column:5}},line:82},11:{name:"(anonymous_11)",decl:{start:{line:86,column:4},end:{line:86,column:5}},loc:{start:{line:86,column:20},end:{line:89,column:5}},line:86}},branchMap:{0:{loc:{start:{line:35,column:28},end:{line:35,column:74}},type:"cond-expr",locations:[{start:{line:35,column:41},end:{line:35,column:69}},{start:{line:35,column:72},end:{line:35,column:74}}],line:35},1:{loc:{start:{line:55,column:6},end:{line:60,column:7}},type:"if",locations:[{start:{line:55,column:6},end:{line:60,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:55},2:{loc:{start:{line:83,column:17},end:{line:83,column:37}},type:"binary-expr",locations:[{start:{line:83,column:17},end:{line:83,column:32}},{start:{line:83,column:36},end:{line:83,column:37}}],line:83},3:{loc:{start:{line:87,column:17},end:{line:87,column:37}},type:"binary-expr",locations:[{start:{line:87,column:17},end:{line:87,column:32}},{start:{line:87,column:36},end:{line:87,column:37}}],line:87}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,sources:["ContactEmailForm.vue"],names:[],mappings:";AAoGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",file:"ContactEmailForm.vue",sourceRoot:"src/components",sourcesContent:['<template>\n  <form\n    ref="contactForm"\n    class="o-form c-help--emailJustEat"\n    method="POST"\n    :novalidate="formLoaded"\n    data-test="emailForm"\n    @submit="submitForm"\n  >\n    <div\n      v-if="formSubmitError"\n      class="o-formAlert o-formAlertLegacy"\n      data-test="postResponseError"\n    >\n      <f-alert\n        :heading="content.contact_email_submit_server_error"\n        type="danger"\n        data-gtm="engagement|form_email_justeat|submit_server_error"\n      >\n      </f-alert>\n    </div>\n    <div\n      v-if="formSubmitted"\n      class="o-formAlert o-formAlertLegacy"\n      data-test="postResponseSuccess"\n    >\n      <f-alert\n        :heading="content.contact_email_form_submit_success_message"\n        type="success"\n        data-gtm="engagement|form_email_justeat|submit_success"\n      >\n      </f-alert>\n    </div>\n\n    <div v-if="!formSubmitted">\n      <div class="o-formField" data-test="orderIdInput">\n        <label>\n          {{ content.contact_email_input_ordernumber_label_text }}\n          <input\n            v-model="formData.orderId"\n            type="number"\n            name="orderId"\n            :placeholder="\n              content.contact_email_input_ordernumber_placeholder_text\n            "\n          />\n        </label>\n      </div>\n\n      <div class="o-formField" data-test="reasonInput">\n        <label>\n          {{ content.contact_email_input_reason_label_text }}\n          <input\n            v-model="formData.reason"\n            type="text"\n            name="reason"\n            required="required"\n            maxlength="120"\n            :placeholder="content.contact_email_input_reason_placeholder_text"\n            @change="validateReason"\n          />\n        </label>\n        <error-message v-if="error.reason">\n          {{ content.contact_email_input_reason_required_error_message }}\n        </error-message>\n      </div>\n\n      <div class="o-formField" data-test="bodyInput">\n        <label>\n          {{ content.contact_email_input_detail_label_text }}\n          <textarea\n            v-model="formData.body"\n            name="body"\n            required="required"\n            maxlength="10000"\n            @change="validateBody"\n          />\n        </label>\n        <error-message v-if="error.body">\n          {{ content.contact_email_input_detail_required_error_message }}\n        </error-message>\n      </div>\n\n      <div class="o-formField">\n        <f-button\n          button-type="primary"\n          action-type="submit"\n          :is-full-width="true"\n          :disabled="formSubmitting"\n          :is-loading="formSubmitting"\n          data-gtm="engagement|form_email_justeat|click_send_email_justeat"\n        >\n          {{ content.contact_email_submit_button_text }}\n        </f-button>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nimport { mapState } from \'vuex\'\nimport FButton from \'@justeat/f-button\'\nimport \'@justeat/f-error-message/dist/f-error-message.css\'\nimport \'@justeat/f-alert/dist/f-alert.css\'\nimport DataService from \'../services/DataService\'\n\nexport default {\n  name: \'ContactEmailForm\',\n  components: {\n    FButton,\n    ErrorMessage: () => import(/* webpackChunkName: "error-message" */ \'@justeat/f-error-message\'),\n    FAlert: () => import(/* webpackChunkName: "f-alert" */ \'@justeat/f-alert\')\n  },\n  data() {\n    return {\n      formLoaded: true,\n      formSubmitting: false,\n      formSubmitted: false,\n      formSubmitError: false,\n      formData: {\n        orderId: null,\n        reason: null,\n        body: null\n      },\n      error: {\n        emailMessage: null,\n        reason: false,\n        body: false\n      }\n    }\n  },\n  computed: mapState([\'content\', \'order\']),\n  mounted() {\n    this.formData.orderId = this.order ? this.order.friendlyReference : \'\'\n  },\n  methods: {\n    scrollToTopOfForm() {\n      // Scroll to top of Contact Section\n      this.$nextTick(() => {\n        window.setTimeout(() => {\n          this.$refs.contactForm.scrollIntoView({\n            behavior: \'smooth\',\n            block: \'start\'\n          })\n        }, 300)\n      })\n    },\n    submitForm(e) {\n      e.preventDefault()\n      const form = e.currentTarget\n      this.formSubmitting = true\n\n      // 1. Validate\n      if (!form.checkValidity()) {\n        this.validateReason(form.reason)\n        this.validateBody(form.body)\n        this.formSubmitting = false\n        return false\n      }\n\n      // 2. Submit\n      const { orderId, reason, body } = this.formData\n      DataService.createSupportRequest(orderId, reason, body)\n        .then(() => {\n          // 3a. Success message\n          this.formSubmitted = true\n          this.formSubmitError = false\n        })\n        .catch(() => {\n          // 3b. Submission error\n          this.formSubmitError = true\n        })\n\n      //  4. Reset submit button\n      this.formSubmitting = false\n      // scroll to display form message\n      this.scrollToTopOfForm()\n\n      return this.formSubmitted\n    },\n    validateReason(e) {\n      const el = e.currentTarget || e\n      this.error.reason = !el.checkValidity()\n    },\n    validateBody(e) {\n      const el = e.currentTarget || e\n      this.error.body = !el.checkValidity()\n    }\n  }\n}\n<\/script>\n']},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"021769854895499027826adee69f165d607f3b71"},r=t[o]||(t[o]={});r[n]&&r[n].hash===e||(r[n]=l);var a=r[n];return c=a}c();const u={name:"ContactEmailForm",components:{FButton:m(),ErrorMessage:()=>(c().f[0]++,c().s[0]++,t.e(871).then(t.t.bind(t,475,23))),FAlert:()=>(c().f[1]++,c().s[1]++,t.e(272).then(t.t.bind(t,7154,23)))},data(){return c().f[2]++,c().s[2]++,{formLoaded:!0,formSubmitting:!1,formSubmitted:!1,formSubmitError:!1,formData:{orderId:null,reason:null,body:null},error:{emailMessage:null,reason:!1,body:!1}}},computed:(0,a.rn)(["content","order"]),mounted(){c().f[3]++,c().s[3]++,this.formData.orderId=this.order?(c().b[0][0]++,this.order.friendlyReference):(c().b[0][1]++,"")},methods:{scrollToTopOfForm(){c().f[4]++,c().s[4]++,this.$nextTick((()=>{c().f[5]++,c().s[5]++,window.setTimeout((()=>{c().f[6]++,c().s[6]++,this.$refs.contactForm.scrollIntoView({behavior:"smooth",block:"start"})}),300)}))},submitForm(n){c().f[7]++,c().s[7]++,n.preventDefault();const e=(c().s[8]++,n.currentTarget);if(c().s[9]++,this.formSubmitting=!0,c().s[10]++,!e.checkValidity())return c().b[1][0]++,c().s[11]++,this.validateReason(e.reason),c().s[12]++,this.validateBody(e.body),c().s[13]++,this.formSubmitting=!1,c().s[14]++,!1;c().b[1][1]++;const{orderId:t,reason:o,body:l}=(c().s[15]++,this.formData);return c().s[16]++,s.Z.createSupportRequest(t,o,l).then((()=>{c().f[8]++,c().s[17]++,this.formSubmitted=!0,c().s[18]++,this.formSubmitError=!1})).catch((()=>{c().f[9]++,c().s[19]++,this.formSubmitError=!0})),c().s[20]++,this.formSubmitting=!1,c().s[21]++,this.scrollToTopOfForm(),c().s[22]++,this.formSubmitted},validateReason(n){c().f[10]++;const e=(c().s[23]++,c().b[2][0]++,n.currentTarget||(c().b[2][1]++,n));c().s[24]++,this.error.reason=!e.checkValidity()},validateBody(n){c().f[11]++;const e=(c().s[25]++,c().b[3][0]++,n.currentTarget||(c().b[3][1]++,n));c().s[26]++,this.error.body=!e.checkValidity()}}},d=u;var A=t(1001),f=(0,A.Z)(d,l,r,!1,null,null,null);const _=f.exports}}]);
//# sourceMappingURL=email-form.a18f7421.js.map