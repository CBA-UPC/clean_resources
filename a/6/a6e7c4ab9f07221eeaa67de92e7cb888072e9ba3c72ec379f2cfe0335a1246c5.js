import{isPrimitive as u}from"../lib/parts.js";import{directive as t}from"../lit-html.js";const m=new WeakMap;const p=2147483647;export const until=t((...i)=>part=>{let state=m.get(part);if(state===undefined){state={lastRenderedIndex:p,values:[]};m.set(part,state)}const t=state.values;let l=t.length;state.values=i;for(let o=0;o<i.length;o++){if(o>state.lastRenderedIndex){break}const value=i[o];if(u(value)||typeof value.then!=="function"){part.setValue(value);state.lastRenderedIndex=o;break}if(o<l&&value===t[o]){continue}state.lastRenderedIndex=p;l=0;Promise.resolve(value).then(t=>{const index=state.values.indexOf(value);if(index>-1&&index<state.lastRenderedIndex){state.lastRenderedIndex=index;part.setValue(t);part.commit()}})}});