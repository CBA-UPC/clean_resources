(self.webpackChunk=self.webpackChunk||[]).push([["GeoWidget"],{"./modules/GeoWidget/index.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var n=r("../node_modules/react/index.js"),o=r("./containers/defaultDesignConfigs.js"),i=r("./containers/desktop/listpage/designConfigs.js"),s=r("./utils/util.js"),l=r("./components/common/SectionHeader/SectionHeader.js"),a=r("./components/common/ListingCards/GridSectionMaker.js"),c=r("./modules/GeoWidget/useFetchGeoWidget.js"),u=r("./modules/GeoWidget/useSectionInfo.js"),d=r("./utils/navUtils.js"),f=r("./components/common/SelectCity/SelectCityButton.js"),m=r("./components/common/AnchorLink.js");nction b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,l=[],a=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r("./modules/GeoWidget/City.scss");var v=function(e){var t=e.parentSection,r=e.alaskaData,g=e.type,v=e.setGeoWidgetId,j=b((0,n.useState)([]),2),h=j[0],S=j[1],w=b((0,u.Z)(t,r),2),O=w[0],A=w[1],_=b((0,c.Z)(O,g,v),1)[0],C=(0,n.useCallback)((function(e,t){e.preventDefault();var r={},O);!t.msid&&t.weblink&&(t.msid=t.weblink.split("articlelist/")[1].replace(".cms","")),r.cityMsid=t.msid,A(r)}),[_]),E=(0,n.useMemo)((function(){var e=[],t=localStorage.getItem("nearbyCity");return t&&(t=t.split("|")).forEach((function(t){var n=(0,s.$k)(r,t,"searchAll");n&&(n=(0,d._t)(n),e.push(n))})),{nearbyCities:e}}),[r]);if((0,n.useEffect)((,[E]),!_)return null;var k=(0,s.nu)(_),I=_&&_.secname,M=i._.default;return(0,s.an)()&&(M=o.A.gridHorizontalAL),n.createElement("div",{className:"row ".concat((0,s.an)()?"box-item":"pd0")},n.createElement(l.Z,{data:r,sectionId:O.id,key:O.id,sectionhead:I,datalabel:"city",weblink:k,parentSecId:O.id,firstCityMsid:O.cityMsid,customClickHandler:C,showSubsection:!1}),n.createElement("div",{className:"section city_list"},n.createElement("ul",null,null==h?void 0:h.map((function(e){return n.createElement("li",null,n.createElement(m.Z,{className:"read_more",href:e.weblink},e.label))}))),h.length>0&&n.createElement(f.Z,{type:"near-by-cities",className:"nearByCities"})),n.createElement(a.Z,{key:"city".concat(_.id),imgsize:"smallthumb",type:M,data:_.items,datalabel:"city"}))};const j=(0,n.memo)(v)},"./modules/GeoWidget/useFetchGeoWidget.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r("../node_modules/react/index.js"),o=r("./utils/fetch/fetch.js"),i=r("./utils/util.js");unction l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=(0,i.pR)();function c(e,t,r){var l=s((0,n.useState)(!0),2),c=l[0],u=l[1],d=s((0,n.useState)(null),2),f=d[0],m=d[1],y=s((0,n.useState)(null),2),p=y[0],b=y[1];return(0,n.useEffect)((function(){if(e){var n=e.cityMsid,s=(0,i.an)()?6:9,l="".concat(process.env.NODE_API_BASEPOINT,"/listing.cms?perpage=").concat(s,"&msid=").concat(n).concat(t?"&type=".concat(t):"");n?(0,o.ZP)(l).then((function(e){if(e&&e.items&&(0,i.qt)(e.items)){var o=a.locale.news;"video"==t&&(o=a.locale.videos),e.secname="".concat(e.secname," ").concat(o),b(e),"function"==typeof r&&r(n)}}),(function(e){console.log("News widget error: ",e),m("Failed to fetch")})).catch(().finally(():u(!1)}}),[e,t]),[p,c,f]}},"./modules/GeoWidget/useSectionInfo.js":(e,t,r)=>{"use strict";r.d(t,{Z:);var n=r("../node_modules/react/index.js"),o=r("./utils/util.js");ar s=(0,o.pR)();function l(e,t){var r,l,a=(r=(0,n.useState)(null),l=2,r)||r,l)||r,l)||)),c=a[0],u=a[1];return(0,n.useEffect)((function(){var r="";if(e&&("home"==e.id?r="state":e.pwa_meta.nearby||(0,o.qN)(e.id)?r="city":(0,o.qt)(e.pwa_meta.sec_hierarchy)&&s.pages.stateSection.includes("".concat(e.pwa_meta.sec_hierarchy[0].msid))&&(r="state")),"state"==r||"city"==r){var n=(0,o.Bl)();if(n&&n.cityMsid!=e.id&&!c){var i="city"==r?n.cityMsid:n.stateMsid,l=(0,o.Dw)(t,i);l&&(l.cityMsid=n.cityMsid,l.stateMsid=n.stateMsid,u(l))}}}),[e.id,t]),[c,u]}},"../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!../node_modules/css-loader/index.js??ruleSet[1].rules[2].use[2]!../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../node_modules/postcss-loader/lib/index.js??ruleSet[1].rules[2].use[4]!./modules/GeoWidget/City.scss":"./modules/GeoWidget/City.scss":(e,t,r)=>{"use strict";var n=r("../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=r.n(n),i=r("../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[2].use[1]!../node_modules/css-loader/index.js??ruleSet[1].rules[2].use[2]!../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[2].use[3]!../node_modules/postcss-loader/lib/index.js??ruleSet[1].rules[2].use[4]!./modules/GeoWidget/City.scss"),s=r.n(i);o()(s(),{insert:"head",singleton:!1}),s().locals}}]);