(window.webpackJsonp=window.webpackJsonp||[]).push([[42,17],{1438:function(e,t,a){},1439:function(e,t,a){},1553:function(e,t,a){"use strict";a.r(t);var n=a(36),r=a(30),o=a(158),i=a(174),c=a(150),l=a(151),s=a(153),u=a(152),d=a(0),p=a.n(d),m=a(24),h=a.n(m),f=a(340),b=a(161),g=a(53),v=a(495),y=a(35),k=(a(1438),function(e){var t=e.closeModal,a=e.shareUrl,n=e.confirmDelete,r=e.isOpen,o=e.aid;return p.a.createElement(g.a,{closeModal:t,className:"warn",isOpen:r,shouldCloseOnOverlayClick:!0},p.a.createElement("div",{className:"modal warning-wrapper"},p.a.createElement("h2",null,"Delete Tour"),a&&p.a.createElement(p.a.Fragment,null,p.a.createElement("p",null,"Your tour is currently published at:"),p.a.createElement("span",{className:"share-url"},a,p.a.createElement("span",{className:"share-label"},p.a.createElement("i",{className:"material-icons"},"link"),"\xa0",p.a.createElement("h4",null,"Share Link")),p.a.createElement(v.a,{aid:o,shareUrl:a}))),p.a.createElement("div",{className:"done-wrapper"},p.a.createElement("h4",null,"Are you sure you want to delete this tour?"),p.a.createElement(y.a,{className:"delete-btn",handleClick:n},p.a.createElement("i",{className:"material-icons"},"delete"),"\xa0Delete Tour"),p.a.createElement(y.a,{className:"text-btn cancel-btn",handleClick:t},p.a.createElement("i",{className:"material-icons"},"cancel"),"\xa0Cancel"))))}),E=Object(d.memo)(function(e){var t=e.stopsPerTour,a=e.stopCount,n=e.showCapacity,r=e.uptoDate;return p.a.createElement("span",{className:"tour-stop-count"},!r&&Boolean(a)&&p.a.createElement("i",{className:"material-icons"},"file_upload"),Boolean(t)&&n?"".concat(a," / ").concat(t," Stops"):"".concat(a," ").concat(a>1||!a?"Stops":"Stop"))}),O=a(155),w=a(698),C=a(11),M=a(27),j=a(83),N=function(e){var t=e.deleteTour,a=e.deleted,n=e.editTour,r=e.id,o=e.tourStopLength,i=e.viewTour,c=Object(j.e)(),l=Object(M.a)(O.k.publishTours),s=Object(C.a)(l,1)[0];return p.a.createElement("div",{className:a?"tour-btn-wrapper hidden":"tour-btn-wrapper"},Boolean(o)&&p.a.createElement(y.a,{handleClick:i,"data-cy":"preview-tour-".concat(r)},p.a.createElement("i",{className:"material-icons"},"visibility"),"\xa0Preview"),p.a.createElement(y.a,{handleClick:n,"data-cy":"edit-tour-".concat(r)},p.a.createElement("i",{className:"material-icons"},"edit"),"\xa0Edit"),p.a.createElement(y.a,{handleClick:t,disabled:!s,"data-cy":"delete-tour-".concat(r)},p.a.createElement("i",{className:"material-icons"},s?"delete":"lock"),"\xa0Delete"),Boolean(o)&&p.a.createElement(y.a,{handleClick:"data-cy":"share-tour-".concat(r)},p.a.createElement("i",{className:"material-icons"},"share"),"\xa0Share"))},T=a(598),S=a(204),D=(a(1439),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).editTour=function(){var e=n.props,t=e.history,a=e.id;t.push("/home/".concat(a,"/edit/general"))},n.deleteTour=function(){var e=n.props,t=e.id,a=e.tours,r={id:t,aid:localStorage.getItem("aid"),published:a[t].published};a[t].published?n.setState({publicTourWarning:!0,tourData:r}):n.setState({generalTourWarning:!0,tourData:r})},n.deleteTourFromDB=function(e){n.setState({deleted:!0},},n.closeWarningModal=n.confirmDelete=function(){var e=n.state.tourData;n.deleteTourFromDB(e),n.closeWarningModal()},n.showDeleteTourWarning=function(){var e=n.state,t=e.publicTourWarning,a=e.generalTourWarning,r=n.props,o=r.tours,i=r.id,c=r.aid,l="".concat(window.location.origin,"/share/").concat(i,"/stop/1");return p.a.createElement(k,{shareUrl:o[i].stopIds.length&&o[i].published?l:null,closeModal:n.closeWarningModal,confirmDelete:n.confirmDelete,isOpen:t||a,aid:c})},n.viewTour=function(){var e=n.props,t=e.history,a=e.id;t.push("/home/view/".concat(a,"/stop/1"))},n.setHighlightMarker=function(){n.setState({highlightMarker:!0})},n.setUnhighlightMarker=function(){n.setState({highlightMarker:!1})},n.buildTourMedia=function(e,t){return t.reduce({})},n.renderTourMarker=function(e){var t=n.state.highlightMarker,a=n.props,r=a.name,o=a.history,i=a.id,c=a.index,l=a.location.pathname;if(e&&"/home"===l){var s={tourName:r,lat:e.lat,lng:e.lng,order:c,callback:;return p.a.createElement(f.a,{data:s,className:"tour-stop-marker-fixed",highlight:t})}return null},n.grabFirstStop=function(){var e=n.props;return e.stops[e.firstStopId]},n.state={highlightMarker:!1,publicTourWarning:!1,generalTourWarning:!1,tourData:{},deleted:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.stops,a=e.firstStopId,n=e.getStop;!t[a]&&a&&n(a)}},{key:"render",value:function(){var e=this.state.deleted,t=this.props,a=t.id,n=t.tours,r=t.name,o=t.description,i=t.firstStopId,c=t.stopsPerTour,l=t.tier,s=n[a],u=s.restricted,d=this.grabFirstStop(),m=d&&d.panoId,f=d&&d.mainMediaType,g=s.stopIds.length,v=h()("tour-card",{hidden:e});return p.a.createElement("article",{className:v,"data-cy":"tour-card-".concat(a),onMouseEnter:this.setHighlightMarker,onMouseLeave:this.setUnhighlightMarker},u&&p.a.createElement("span",{className:"tour-card-restricted","data-testid":"restricted-tour-card-icon"},p.a.createElement(S.a,null," lock ")," Front End Restricted"),m&&p.a.createElement(b.default,{mediaId:m,mediaType:f||O.j,thumbClass:e?"tour-card-image hidden":"tour-card-image",height:175,alt:"",deleted:e}),"enterprise"===l&&p.a.createElement(T.a,{tourId:a,tourCard:!0}),";",p.a.createElement(E,{stopsPerTour:c,stopCount:g,showCapacity:"starter"===l,uptoDate:s.uptoDate}),p.a.createElement("h3",{className:e?"hidden":"",style:{WebkitBoxOrient:"vertical",MozBoxOrient:"vertical"}},r),p.a.createElement("p",{className:e?"hidden":"",style:{WebkitBoxOrient:"vertical",MozBoxOrient:"vertical"}},o&&Object(w.a)(o)),p.a.createElement(N,{deleteTour:this.deleteTour,deleted:e,editTour:this.editTour,id:a,tourStopLength:g,viewTour:this.viewTour}),this.showDeleteTourWarning(),i&&this.renderTourMarker(d))}}]),a}(d.Component));t.default=Object(n.c)(function(e){return{userEmail:e.userCredentials.email,tours:e.tours.tours,stops:e.stops.stops,panos:e.media.panos,images:e.media.images,videos:e.media.videos,videos360:e.media.videos360,audio:e.media.audio,stopsPerTour:e.account.permissions.maxStopsPerTour,tier:e.account.tier,aid:e.account.tourAccountId}},(D)},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(150),i=a(151),c=a(153),l=a(152),s=a(24),u=a.n(s),d=a(167),p=a.n(d),m=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).thumbClickEvent=function(){var t=e.props,a=t.id,n=t.handleClick;"function"===typeof n&&n(a)},e.state={loaded:!1},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.loaded,a=this.props,n=a.id,o=a.classes,i=a.height,c=a.src,l=a.alt,s=a.thumbBtns,d=a.overlayMediaName,m=a.name,h=a.dragHandle,f=a.dragHandleProps,b=a.tabIndex,g=Math.round(i/2),v="#fff url(".concat(p.a,") center / ").concat(g,"px no-repeat");return r.a.createElement("div",{tabIndex:b||-1,className:"".concat(o," thumb-wrapper"),key:n,"aria-hidden":"true",style:{background:v},onClick:this.thumbClickEvent,onKeyPress:this.thumbClickEvent},r.a.createElement("img",{style:{display:"block",height:i,minHeight:i,margin:"auto"},className:u()({loaded:t}),src:c,alt:l,onLoad:),d&&r.a.createElement("span",{className:"stop-name overlay"},m),"function"===typeof s&&r.a.createElement("div",{className:"thumb-btn-wrapper"},s(n),"function"===typeof h&&h(f)))}}]),a}(n.Component),h=a(11),f=a(238),b=a(186),g=a.n(b),v=a(155),y=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={loaded:!1},e.thumbClickEvent=e.buildThumb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t.split("."),n=Object(h.a)(a,2),r=n[0],o=n[1];return e===v.o&&(t=r),{assetId:e!==v.a?"".concat(e,"/").concat(t):"images/audio-thumb-placeholder.jpg",format:o}},e.setLoaded=e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.loaded,t=this.props,a=t.alt,n=t.classes,o=t.deleted,i=t.dragHandle,c=t.dragHandleProps,l=t.height,s=t.id,d=t.logo,m=t.mediaType,h=t.name,b=t.overlayMediaName,v=t.pad,y=t.publicId,k=t.selectedMedia,E=t.tabIndex,O=t.thumbBtns,w=t.view,C=u()({"thumb-image":!0,loaded:e,hidden:o&&!k,"hidden-width":o&&s===k}),M=Math.round(l/2),j=w?g.a:p.a,N=!d&&"".concat(w?"#000":"#fff"," url(").concat(j,") center / ").concat(M,"px no-repeat"),T=this.buildThumb(m,s).assetId,S=d?"limit":v?"pad":"lfill",D=d?"":"black",x="videos360"===m;return s?r.a.createElement("div",{className:"".concat(n," thumb-wrapper"),key:s,style:{background:N},onClick:this.thumbClickEvent,onKeyPress:this.thumbClickEvent,"aria-hidden":0!==E,tabIndex:E>-1?E:-1,"data-cy":"cloudinary-thumb-".concat(s)},!x&&r.a.createElement(f.a,{alt:a,background:D,className:C,cloudName:"concept3d",crop:S,fetchFormat:"auto",gravity:"center",height:l,onLoad:this.setLoaded,publicId:y||T,quality:"auto",responsive:!0}),x&&r.a.createElement(f.a,{alt:a,className:C,cloudName:"concept3d",fetchFormat:"jpg",height:l||1,onLoad:this.setLoaded,publicId:T,quality:"auto",resourceType:"video"}),"function"===typeof O&&r.a.createElement("div",{className:"thumb-btn-wrapper"},O(s),"function"===typeof i&&i(c)),b&&r.a.createElement("span",{className:"stop-name overlay"},h)):null}}]),a}(n.PureComponent);a(187),t.default=function(e){var t=e.alt,a=e.deleted,n=e.dragHandle,o=e.dragHandleProps,i=e.handleClick,c=e.height,l=e.logo,s=e.mediaId,u=e.mediaType,d=e.name,p=e.overlayMediaName,h=e.pad,f=e.publicId,b=e.selectedMedia,g=e.tabIndex,k=e.thumbBtns,E=e.thumbClass,O=e.thumbSrc,w=e.view,C=e.width;return u===v.n?r.a.createElement(m,{alt:t,classes:E,dragHandle:n,dragHandleProps:o,handleClick:i,height:c,id:s,key:s,name:d,overlayMediaName:p,src:O,tabIndex:g,thumbBtns:k}):r.a.createElement(y,{alt:t,publicId:f,classes:E,deleted:a,dragHandle:n,dragHandleProps:o,handleClick:i,height:c,id:s,key:s,logo:l,mediaType:u,name:d,overlayMediaName:p,pad:h,selectedMedia:b,tabIndex:g,thumbBtns:k,view:w,width:C})}},167:function(e,t,a){e.exports=a.p+"static/media/placeholder-dark-logo.d501ab4e.png"},186:187:function(e,t,a){},204:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.children;return r.a.createElement("i",{className:"material-icons","aria-hidden":"true"},t)}},234:function(e,t,a){"use strict";var n=a(11),r=a(0),o=a.n(r),i=a(17),c=a(24),l=a.n(c);a(267);t.a=Object(r.memo)(function(e){e.src;var t=e.useToken,a=e.firstName,c=void 0===a?"":a,s=e.lastName,u=void 0===s?"":s,d=e.userName,p=void 0===d?"":d,m=e.invert,h=e.small,f=e.active,b=e.showActive,g=void 0!==b&&b,v=e.tooltip,y=void 0!==v&&v,k=e.tooltipText,E=void 0===k?"":k,O=e.tooltipAbove,w=void 0!==O&&O,C=Object(i.b)(),M=Object(n.a)(C,1)[0],j=Object(r.useState)(!1),N=Object(n.a)(j,2),T=N[0],S=N[1],D=c,x=u,I=p;if(t){var P=M.tokenParsed;D=null===P||void 0===P?void 0:P.given_name,x=null===P||void 0===P?void 0:P.family_name,I=(null===P||void 0===P?void 0:P.preferred_username)||""}var _=D&&x?D[0]+x[0]:I[0],A=l()("avatar",{invert:m,small:h,active:g&&f,inactive:g&&!f}),U=l()("avatar__tooltip",{above:w});return o.a.createElement("span",{className:A,onMouseOver:function(){return S(!0)},onMouseOut:,_?o.a.createElement("span",null,_):o.a.createElement("i",{className:"material-icons"}," person "),y&&T&&o.a.createElement("span",{className:U},E))})},267:function(e,t,a){},340:function(e,t,a){"use strict";var n=a(150),r=a(151),o=a(153),i=a(152),c=a(0),l=a.n(c),s=a(173),u=a(161),d=a(155),p=function(e){var t=e.id,a=e.name,n=(e.description,e.panoId),r=e.switchView,o=e.changeStop,i=e.order,c=e.tourId,s=e.mainMediaType;return l.a.createElement("div",{id:t,key:t},l.a.createElement("h3",null,a),n&&l.a.createElement(u.default,{mediaId:n,mediaType:s||d.j,thumbClass:"popup-thumbnail",height:200,alt:"",handleClick:function(){"function"===typeof r&&"function"===typeof o&&(r({miniMapView:"map",id:c,name:a}),o({stopNum:i,stopName:a,origin:"popup pano"}))}}))},m=(a(349),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).showMarkerOnMap=function(e,t,a){var n=r.props,o=n.tourId,i=n.switchView,c=n.changeStop,u=e.lat,d=e.lng,m=e.order,h=e.callback,f=e.panoId,b=e.name,g=e.type,v=e.tourName;r.markerElement=g?s.a.createMarkerWithPopup({markerCoords:[d,u],className:t,order:m,draggable:a,stopName:b,changeStop:c},l.a.createElement(p,Object.assign({},e,{switchView:i,changeStop:c,order:m,tourId:o})),h):s.a.createMarker({markerCoords:[d,u],className:t,order:m,panoId:f,stopName:b,changeStop:c,draggable:a,tourName:v},h),r.setState({onMap:!0,order:m})},r.showRadarMarker=r.state={onMap:!1,balloonCreated:!1,highlighted:!1,balloonOpened:!1,draggable:!1,order:null},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.data,n=t.draggable,r=t.className,o=t.highlight,i=t.onDragStart,c=t.onDragEnd;this.showMarkerOnMap(a,r,n),n&&this.setState({draggable:n},,o&&this.toggleActiveMarker()}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.data,r=a.data,o=r.lat,i=r.lng,c=r.callback,l=r.order,u=r.panoId,d=a.className,p=a.highlight;e.data.lat===o&&e.data.lng===i||this.updateMarkerPosition(o,i),e.highlight!==p&&this.toggleActiveMarker(),c||s.a.updateMarkerNumber(this.markerElement,l),u!==e.data.panoId&&(this.markerElement.remove(),this.showMarkerOnMap(n,d,!1))}},{key:"componentWillUnmount",value:,{key:"hideMarkerOnMap",value:,{key:"updateMarkerPosition",value:,{key:"makeDraggable",value:function(e,t){s.a.makeMarkerDraggable(this.markerElement,e,t),this.setState({draggable:!0})}},{key:"makeStationary",value:function(){s.a.disableMarkerDragging(this.markerElement),this.setState({draggable:!1})}},{key:"toggleActiveMarker",value:function(){this.markerElement._element.classList.contains("enlarge")?this.markerElement._element.classList.remove("enlarge"):this.markerElement._element.classList.add("enlarge")}},{key:"render",value:]),a}(c.PureComponent));t.a=m},349:function(e,t,a){},495:function(e,t,a){"use strict";var n=a(150),r=a(151),o=a(153),i=a(152),c=a(0),l=a.n(c),s=a(496),u=a.n(s),d=a(35),p=a(157),m=(a(500),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleCopy=function(){var t=e.props,a=t.tourId,n=t.tourName,r=t.type;e.setState({copied:!0},function(){Object(p.a)("".concat(a,"-").concat(n),"copy",r),setTimeout(function(){return e.setState({copied:!1})},5e3)})},e.state={copied:!1},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state.copied,a=this.props,n=a.shareUrl,r="share"===a.type;return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{key:"copy",text:n,onCopy:,l.a.createElement(d.a,{className:"copy-btn","data-cy":r?"copy-url-btn":"copy-embed-btn","aria-label":"copy ".concat(r?"share url":"iframe embed")},l.a.createElement("i",{"arai-hidden":"true",className:"material-icons"},"content_copy"),"\xa0Copy")),t&&l.a.createElement("p",{key:"copy-success",className:"copy-success"},"Copied to clipboard"))}}]),a}(c.Component));t.a=m},496:497:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var n=o(a(0)),r=o(a(498));ction(e){function t(){var e,a,o,c;!this,t);for(var l=arguments.length,s=new Array(l),p=0;p<l;p++)s[p]=arguments[p];return o=this,c=(e=u(t)).call.apply(e,[this].concat(s)),a=!c||"object"!==i(c)&&"function"!==typeof c?d(o):c,m(d(a),"onClick",,a}var a,o,h;return t,n["default"].PureComponent),a=t,(o=[{key:"render",value:])&&s(a.prototype,o),h&&s(a,h),t}();t.CopyToClipboard=h,m(h,"defaultProps",{onCopy:void 0,options:void 0})},498:function(e,t,a){"use strict";var n=a(499),r={"text/plain":"Text","text/html":"Url",default:"Text"},o="Copy to clipboard: #{key}, Enter";e.exports=function(e,t){var a,i,c,l,s,u,d=!1;t||(t={}),a=t.debug||!1;try{if(c=n(),l=document.createRange(),s=document.getSelection(),(u=document.createElement("span")).textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",,document.body.appendChild(u),l.selectNodeContents(u),s.addRange(l),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(p){a&&console.error("unable to copy using execCommand: ",p),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(p){a&&console.error("unable to copy using clipboardData: ",p),a&&console.error("falling back to prompt"),i="message"in t?t.message:o),window.prompt(i,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(l):s.removeAllRanges()),u&&document.body.removeChild(u),c()}return d}},499:500:function(e,t,a){},598:function(e,t,a){"use strict";var n=a(1),r=a(37),o=a(0),i=a.n(o),c=a(234),l=a(36),s=a(24),u=a.n(s);a(599);t.a=function(e){var t=e.tourId,a=void 0===t?"":t,o=e.tourCard,s=e.showSelf,d=Object(l.e)(function(e){return e.sessions}),p=d.activeTours,m=d.activeUsers,h=Object(l.e)(function(e){return e.userCredentials}),f=(p[a]||[]).map(function(e){return m[e]});s&&(f=[].concat(Object(r.a)(f),[Object(n.a)(Object(n.a)({},h),{},{active:!0,email:"".concat(h.email," (YOU)")})]));var b=f.filter(,g=1!==b.length?"s":"",v=u()("active-tour-users",{card:o});return i.a.createElement("div",{className:v},null===b||void 0===b?void 0:b.slice(0,3).map(function(e){return i.a.createElement(c.a,{userName:e.email,small:!0,showActive:!0,active:e.active,tooltipText:e.email,tooltip:!0})}),b.length>0&&"".concat(null===b||void 0===b?void 0:b.length," User").concat(g).concat(o?"":" Editing This Tour"))}},599:698:function(e,t,a){"use strict";t.a=}]);