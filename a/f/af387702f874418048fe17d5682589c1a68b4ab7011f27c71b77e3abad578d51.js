ion _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():_get.apply(this,arguments)}ion _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,_toPropertyKey(c.key),c)}(){function a(a,b,d,e){var f=c(a,b,d);window.__trcError(f,e)}function b(a,b,d){var e=c(a,b,d);window.__trcWarn(e)}unction d(a){var c=a.moduleInstance||a.ins;switch(c){case Q.VIDEO_REEL:case void 0:return new _(a);case Q.CONTROL:return new $(a);default:b(c,"VrlJsInit","Unsupported instance")}}function e(a,b){TRC.intersections.isInViewPort({rootSelector:null,targetElement:a,enableDelayedVisibilityCheck:!0,onTrigger:b})}function f(){return((performance&&performance.now()||0)/1e3).toFixed(2)}function g(a){window.TRC.liteUnit={abTest:a}}function h(a){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"";window._tvp&&window._tvp.markerIsReady?window._tvp.markerIsReady():b(a,"markAsReady","markerIsReady not available for ".concat(c))}function i(a,b){TRC.delayedVrlLoader&&(TRC.delayedVrlLoader(a),setTimeout(5e3))}unction k(a){var b=j(a);return b?b.filter(function(a){var b=!!(a.cga&&a.cga.customModules&&a.cga.customModules["video-reel"]),c=!!a.evr;return b||c})[0]:{}}unction m(a,b,c){var d=a[b];a[b]=function(){for(var a=arguments.length,b=Array(a),e=0;e<a;e++)b[e]=arguments[e];return c.apply(this,[d.bind(this)].concat(b))}}function n(a){var b=document.createElement("div");b.className="tbl-progress-bar";var c=document.createElement("div");return c.className="tbl-progress",b.appendChild(c),a.appendChild(b),c}function o(a){var b=a.querySelector(".trc-widget-footer"),c=a.querySelector(".video-label-box");b&&c&&c.insertAdjacentElement("beforeend",b)}function p(){var a=TRCImpl["publisher-logo"]||{};return a[TRC.publisherId]}function q(a){var b=document.createElement("div");b.className="vrl-loading-screen";var c=document.createElement("div");if(c.className="spinner",b.appendChild(c),a){var d=r(a);b.appendChild(d)}var e=s();return b.appendChild(e),b}function r(a){var b=document.createElement("img");return b.onerror=function(){b.remove()},b.className="vrl-logo",b.src=a,b}function s(){var a=document.createElement("div");a.className="buttons";return a.innerHTML="<svg class=\"vrl-play\" xmlns=\"http://www.w3.org/2000/svg\" width=\"19\" height=\"24\" viewBox=\"0 0 39 44\"><g><g><path d=\"M.75 0h12.451v43.702H.75zm25.049 0H38.25v43.702H25.799z\"></path></g></g></svg>"+"<svg class=\"vrl-mute\" xmlns=\"http://www.w3.org/2000/svg\" width=\"27\" height=\"27\" viewBox=\"0 0 57 57\"><g><g><path d=\"M42.421 30.78l-7.617-7.618v-6.885c2.344 1.172 4.196 2.857 5.64 5.054 1.415 2.197 2.123 4.669 2.123 7.544 0 .684-.048 1.318-.146 1.904zm3.516-15.162c-2.832-3.76-6.543-6.323-11.133-7.69V1.482c6.347 1.518 11.548 4.81 15.6 9.742C54.457 16.155 56.532 22 56.63 28.875c-.098 4.688-1.172 9.033-3.223 13.037l-4.687-4.834c1.074-2.539 1.611-5.273 1.611-8.203-.097-5.078-1.562-9.497-4.394-13.257zM28.505 24.92L56.63 53l-3.955 4-6.445-6.445c-3.32 2.734-7.13 4.638-11.426 5.713v-6.446c2.539-.822 4.883-2.002 7.031-3.662l-13.33-13.33v21.094L12.831 38.25H.38V19.5h14.795L.38 4.705 4.335.75zm0-7.92l-6.592-6.582 6.592-6.592z\"></path></g></g></svg>"+"<svg class=\"vrl-leftArrow\" xmlns=\"http://www.w3.org/2000/svg\" width=\"39\" height=\"38\" viewBox=\"0 0 39 38\"><g><g><path d=\"M11.736 18.88L38.25.13v37.5zM.75 37.63V.13H7v37.5z\"></path></g></g></svg>"+"<svg class=\"vrl-rightArrow\" xmlns=\"http://www.w3.org/2000/svg\" width=\"39\" height=\"38\" viewBox=\"0 0 39 38\"><g><g><path d=\"M.75.13l26.514 18.75L.75 37.63zM32 .13h6.25v37.5H32z\"></path></g></g></svg>",a}function t(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,c=a.getBoundingClientRect(),d=window.innerHeight||document.documentElement.clientHeight,e=window.innerWidth||document.documentElement.clientWidth,f=Math.min(c.right,e)-Math.max(c.left,0),g=Math.min(c.bottom,d)-Math.max(c.top,0);if(0>=f||0>=g)return!1;var h=(c.right-c.left)*(c.bottom-c.top);return f*g/h>=b}function u(){var a=window.taboolaBridge||{},b=a.data;b&&(b.boundingClientRect.y-=1,setTimeout(800))}function v(a,b,c){var d=window.taboolaMobile;if(d){var e=a.querySelector(".title-text").textContent,f=a.href;a.dataset.loggerUrl=f,a.dataset.pageUrl=f,a.dataset.placementName=c,a.title=e,a.target="_self",d.handleLinkClickEvent({preventDefault:b.preventDefault.bind(b),currentTarget:a,title:e,loggerUrl:f,pageUrl:f,mlUrlReport:f,placementName:c})}}function w(){return window.taboolaMobile&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function x(a){var b=a.querySelector("".concat(U.ADX_ICONS,":nth-child(").concat(X,")"));return b?b:a.querySelector(U.NON_ADX_LEFT_ARROW)}nction A(a){var b=a.querySelector(".thumbBlock_holder iframe");b&&(b.style.height="".concat(Math.floor(a.clientWidth/Y),"px"))}function B(a){var b=document.createElement("button");return b.className=U.SKIP,b.innerHTML="Skip ".concat(W),a.appendChild(b),b}unction D(a){TRC.dom.on(window,"resize",TRC.util.debounce(function(){C(a)},100,!1,this))}function E(a){window._tvp=window._tvp||{},window._tvp.pauseForAdPlay=function F(a,b){var c=a.href;if(b&&c){var d=c.split("?"),e=_slicedToArray(d,2),f=e[0],g=e[1],h=c.split("#")[1];if(!g&&!h)return void(a.href="".concat(c).concat(b.value));a.href=G({fullUrl:c,baseUrl:f,itemQueryParamStr:g,itemUrlHashParam:h,trackingConfig:b})}}function G(a){var b=a.fullUrl,c=a.baseUrl,d=a.itemQueryParamStr,e=a.itemUrlHashParam,f=a.trackingConfig,g=f.value,h=f.type,i=c.split("#")[0],j=d?d.split("#")[0]:"",k=b;return h===T.QUERY?(k="".concat(i).concat(g),j&&(k+="&".concat(j)),e&&(k+="#".concat(e))):h===T.HASH&&(k="".concat(i),j&&(k+="?".concat(j)),k+="".concat(g),e&&(k+="&".concat(e))),k}function H(a){var b=a||TRCImpl.global["vrl-tracking"];if(!b)return null;var c,d=0===b.indexOf("?"),e=0===b.indexOf("#");return e?c=T.HASH:d&&(c=T.QUERY),c?{type:c,value:b}:null}function I(a){var b=TRC._taboolaClone.filter([0]||{},c=b.container;return c?document.getElementById(c):void 0}function J(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.m;if(b){var c=document.querySelector(".".concat(b));if(c)return TRC.dom.closest(c,".trc_related_container")}}unction L(a,b){return K(b)||J(a)||I(b)}function M(){var a=document.createElement("div");return a.id=V,a.setAttribute("style","padding: 0 !important; margin: 0 !important"),a}function N(a){a.style.setProperty("margin","0 12px 12px","important")}f(!TRC.isAMP&&MutationObserver){var P="video-reel",Q={CONTROL:"control",VIDEO_REEL:"videoReel"},R=Q.VIDEO_REEL,S={NO_SLIDER:"no_slider",START:"start",DETACH:"detach",ALWAYS:"always"},T={HASH:"hash",QUERY:"query"},U={SHOW:"tbl-show-item",ZOOM:"tbl-zoom-in-item",REMOVE:"tbl-remove-item",HIDE:"tbl-hidden",SKIP:"tbl-skip",LOADED:"tbl-loaded",ADX_ICONS:".toolBar .iconWrapper",SLIDER:"slider-ui",SLIDER_ANIMATION:"tbl-slider-animation",MOBILE_DEMAND_UNIT_SELECTOR:".video_controls_mobile.show",DESKTOP_DEMAND_UNIT_SELECTOR:".cm_video_controls_playpause",NON_ADX_LEFT_ARROW:".single-arrow:not(.right)",SHALLOW_HIDDEN:"tbl-shallow-hide"},V="taboola-video-reel",W="<svg style=\"display:inline-block\" width=\"10\" height=\"10\" viewBox=\"0 0 10 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 10L7.08333 5L0 0V10ZM8.33333 0V10H10V0H8.33333Z\" fill=\"white\"/></svg>",X=3,Y=16/9,Z=function(){function a(b){_classCallCheck(this,a),this.reqId=null,this.CUSTOM_CSS=b.ccss,this.moduleInstance=b.moduleInstance||b.ins||Q.VIDEO_REEL,this.VISIBLE_REPORTED=!1,this.AVAILABLE_REPORTED=!1,this.PAGELOAD_REPORTED=!1}return _createClass(a,[{key:"onVisible",value:function onVisible(a,b,c){this.VISIBLE_REPORTED||c!==TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE||(this.VISIBLE_REPORTED=!0,!0===this.IS_READY_TO_PLAY&&this.reportPubsGeneric("".concat(R,"-rnv")),this.reportPubsGeneric("".concat(R,"-visible")))}},{key:"onFullyRendered",value:function onFullyRendered(){this.reportPubsGeneric("".concat(R,"-rendered"),{t:f()})}},{key:"isReadyToStart",value:,{key:"handleLoadResponse",value:function handleLoadResponse(a){if(!this.reqId){var b=k(a);b&&(this.response=b,!this.placementName&&(this.placementName=b.uip),this.reqId=b.ri,this.isReadyToStart()&&this.start(),this.onReady&&this.onReady())}}},{key:"reportAvailable",value:function reportAvailable(){var a;this.isInSlider&&(a={sl:this.sliderType}),this.reportPubsGeneric("".concat(R,"-available"),a),this.AVAILABLE_REPORTED=!0}},{key:"reportPageLoad",value:function reportPageLoad(){this.PAGELOAD_REPORTED=!0,this.reportPubsGeneric("".concat(R,"-pageload"))}},{key:"reportPubsGeneric",value:function reportPubsGeneric(a,b){b=void 0===b?"":b;var c={type:a,data:JSON.stringify(b)},d={d:JSON.stringify(c)};this.reqId&&(d.ri=this.reqId),TRCImpl.sendEvent("pubs-generic",d,{})}},{key:"setVisibilityCallback",value:function setVisibilityCallback(a){e(a,this.onVisible.bind(this))}},{key:"start",value:function start(){this.PAGELOAD_REPORTED||(this.reportPageLoad(),l(this.CUSTOM_CSS))}}]),a}(),$=function(a){function c(a){var b;return _classCallCheck(this,c),b=_callSuper(this,c,[a]),g("video-reel_vB"),b.placementName=a.placementName,b.CONTROL_ITEM_WRAP=a.itemWrapper||a.itw||"[data-item-thumb]",b.CONTROL_SELECTOR=a.controlSelector||a.slc,b}return _inherits(c,a),_createClass(c,[{key:"isReadyToStart",value:function isReadyToStart(){return!!this.reqId}},{key:"onClick",value:function onClick(a){var b=TRC.dom.closest(a.target,this.CONTROL_ITEM_WRAP);if(b){var c="true"===b.dataset.itemSyndicated?"sc":"oc",d={itemIndex:Array.prototype.indexOf.call(b.parentNode.childNodes,b),type:c};this.isInSlider&&(d.sl=this.sliderType),this.reportPubsGeneric("".concat(R,"-click"),d)}}},{key:"setRenderedCallback",value:function setRenderedCallback(a){var b=this,c=new MutationObserver(function(a,c){for(var d=0;d<a.length;d++){var e=a[d],f=-1<e.target.className.indexOf("thumbBlock");if(-1<f){setTimeout(b.onFullyRendered.bind(b),50),c.disconnect();break}}});c.observe(a,{childList:!1,attributes:!0,subtree:!0})}},{key:"getControlElement",value:function getControlElement(a){return this.CONTROL_SELECTOR?a.querySelector(this.CONTROL_SELECTOR):a.querySelector(".trc_rbox")}},{key:"start",value:function start(){_get(_getPrototypeOf(c.prototype),"start",this).call(this),i(null,Q.CONTROL);var a=L(this.response,this.placementName);if(!a)return void b(Q.CONTROL,"start","control element not found: ".concat(this.placementName));var d=this.getControlElement(a);return this.reportAvailable(),this.setVisibilityCallback(d),this.setRenderedCallback(d),d.addEventListener("click",this.onClick.trcBind(this)),d}}]),c}(Z),_=function(c){function d(a){var b;return _classCallCheck(this,d),b=_callSuper(this,d,[a]),g("video-reel_vA"),b.parseOptions(a),b.sliderClosedForSession=TRC.pageManager.sessionStorageGetValue("tbl-isSliderHidden"),b.IS_READY_TO_PLAY=!1,b.clipCount=0,b.reelTimeout=0,b.isShowingSc=!1,b.reelIndex=840,b}return _inherits(d,c),_createClass(d,[{key:"parseOptions",value:function parseOptions(a){var b=TRC.util.isTrue,c=this.advnc=a.advnc||{};this.EMBED_ID=a.videoReelEmbedId||a.eid,this.REMOTE_EMBED_NAME=a.videoReelEmbedName||a.enid,this.placementName=a.videoReelPlacement,this.isSliderReel=b(c.isSliderReel),this.isInSlider=!1,this.isSliderInited=!1,this.sliderType=c.sliderType||S.NO_SLIDER,this.SCRIPT_ID=a.scriptId,this.scItemLocation=a.loc?+a.loc:3,this.scDuration=a.dur?+a.dur:7e3,this.isDemandFirst=b(c.isDemandFirst),this.isWithLoadingScreen=this.shouldLoadLoaderScreen(a);var d=a.videoReelItemWrap||a.itw;this.ITEM_WRAP_CLASS=d&&d.substr(1),this.isFiftyPercentInviewportEnabled=b(c.enableFiftyPercentInViewPort),this.trackingParams=H(c.tracking)}},{key:"shouldLoadLoaderScreen",value:function shouldLoadLoaderScreen(a){return!(this.isDemandFirst||"false"===a.loaderScreen||"false"===this.advnc.loaderScreen)}},{key:"dispatchAd",value:function dispatchAd(){window.TRC.videoReelIsLoaded=!0,TRC.dispatch("".concat(R,"-available")),this.dispatched_ad=!0}},{key:"findComponentWrap",value:function findComponentWrap(){var a=document.querySelector("#".concat(V," .minute-tv-component-wrap"));if(a)return a;var b=document.querySelector("#".concat(V," .editor-tv-component iframe"));if(b)return(this.iDoc=b.contentWindow||b.contentDocument,this.iDoc.document)?(this.iDoc=this.iDoc.document,this.iDoc.body.getElementsByClassName("minute-tv-component-wrap")[0]):void 0}},{key:"addClickListener",value:function addClickListener(a,b,c){var d=this;a&&a.addEventListener("click",function(a){var e=TRC.dom.closest(a.target,".".concat(d.ITEM_WRAP_CLASS)),f={itemIndex:Array.prototype.indexOf.call(b.childNodes,e)-c,type:"oc"};d.isInSlider&&(f.sl=d.sliderType),d.reportPubsGeneric("".concat(R,"-click"),f),v(e,a)})}},{key:"getEmbedName",value:function getEmbedName(){var a=this.REMOTE_EMBED_NAME,b=TRCImpl.global["videoreel-embed-map"];if(!b||a)return a;var c=TRC.publisherId,d=b[c];if(!d)return a;var e=TRC.listOrigin.getSource(),f=d[e];return f?"string"==typeof f?f:f[this.placementName]:a}},{key:"addContainer",value:function addContainer(){var a=L(this.response,this.placementName);if(a){var b=this.contentWrapper=M(),c=this.externalWrapper=document.createElement("div");c.id="taboola-vrl-wrap",a.appendChild(c);var d=this.internalWrapper=document.createElement("div");return d.id="taboola-vrl-internal",c.appendChild(d),d.insertBefore(b,d.firstChild),b}}},{key:"addTitleContainer",value:function addTitleContainer(){var a=document.createElement("div");a.id="".concat(V,"-title"),this.internalWrapper.insertBefore(a,this.internalWrapper.firstChild)}},{key:"sliderConfigs",value:function sliderConfigs(){if(this.advnc.isSliderReel){var a="".concat(R,"-slider");this.reportPubsGeneric(a,{value:this.advnc.isSliderReel})}this.isSliderReel&&this.sliderType!==S.NO_SLIDER&&!this.sliderClosedForSession&&(this.isSliderInited=!0,this.addContainerSlider())}},{key:"addContainerSlider",value:function addContainerSlider(){var a=document.createElement("div");a.className="invisible",this.sliderInvisible=a;var b=document.createElement("div");b.className="title-container";var c=document.createElement("div");c.id="".concat(V,"-close-slider"),this.sliderClose=c;var d=document.createElement("div");d.id="".concat(V,"-clickable-close-slider"),this.sliderClickableClose=d,c.addEventListener("click",this.closeSliderForSession.bind(this)),d.addEventListener("click",this.closeSliderForSession.bind(this)),a.addEventListener("click",this.closeSliderForSession.bind(this));var e=document.createElement("div");e.id="".concat(V,"-title"),b.appendChild(e),b.appendChild(d),b.appendChild(c);var f=document.createElement("div");f.id="tbl-shadow-wrapper",f.appendChild(b),f.appendChild(this.contentWrapper),this.internalWrapper.insertBefore(f,this.internalWrapper.firstChild),this.internalWrapper.insertBefore(a,this.internalWrapper.firstChild)}},{key:"appendReelAttributes",value:function appendReelAttributes(){TRC.dom.addClass(this.contentWrapper,"editor-tv-wrapper");var a=this.getEmbedName();a||this.EMBED_ID||b(Q.VIDEO_REEL,"startUnit","embed config not found"),a?this.contentWrapper.setAttribute("data-embed-name",a):this.contentWrapper.setAttribute("data-embed-id",this.EMBED_ID),this.isWithLoadingScreen&&this.createLoadingScreen(),D(this.contentWrapper)}},{key:"enableSliderUI",value:function enableSliderUI(){N(this.contentWrapper),this.VISIBLE_REPORTED||(this.VISIBLE_REPORTED=!0,this.reportPubsGeneric("".concat(R,"-visible"),{sl:this.sliderType})),this.sliderType!==S.ALWAYS&&(this.sliderPlaceholder.style.width="".concat(100*(this.internalWrapper.parentElement.offsetWidth/window.innerWidth),"vw"),this.sliderPlaceholder.style.height="".concat(100*(this.internalWrapper.parentElement.offsetHeight/window.innerWidth),"vw"),this.sliderPlaceholder.classList.contains(U.HIDE)&&this.sliderPlaceholder.classList.remove(U.HIDE)),this.isInSlider=!0,this.internalWrapper.classList.add(U.SLIDER),C(this.contentWrapper),this.internalWrapper.classList.add(U.SLIDER_ANIMATION),this.loadingScreen&&(this.loadingScreen.classList.add(U.SLIDER),this.loadingScreen.classList.add(U.SLIDER_ANIMATION)),this.sliderInvisible.classList.contains(U.HIDE)&&(this.sliderInvisible.classList.remove(U.HIDE),this.sliderClose.classList.remove(U.HIDE),this.sliderClickableClose.classList.remove(U.HIDE))}},{key:"disableSliderUI",value:function disableSliderUI(){O(this.contentWrapper),this.isInSlider=!1,this.internalWrapper.classList.remove(U.SLIDER_ANIMATION),this.internalWrapper.classList.remove(U.SLIDER),this.loadingScreen&&this.loadingScreen.classList.remove(U.SLIDER),this.sliderInvisible.classList.add(U.HIDE),this.sliderPlaceholder.classList.add(U.HIDE),this.sliderClose.classList.add(U.HIDE),this.sliderClickableClose.classList.add(U.HIDE),C(this.contentWrapper)}},{key:"closeSliderForSession",value:function closeSliderForSession(){switch(TRC.pageManager.sessionStorageSetValue("tbl-isSliderHidden",!0),this.isInSlider=!1,this.isSliderInited=!1,this.reportPubsGeneric("".concat(R,"-slider-x-clicked"),{sl:this.sliderType}),this.disableSliderUI(),this.sliderType){case S.START:TRC.intersections.unobserve(this.sliderObserveid);break;case S.DETACH:this.sliderObserverDetach.unobserve(this.sliderAncor);break;case S.ALWAYS:this.sliderAncor.remove(),this.sliderAncor=void 0;break;default:}}},{key:"appendCardAttributes",value:function appendCardAttributes(a,b){var c=this;Array.prototype.slice.call(a.childNodes).forEach(,F(a,this.trackingParams),a.setAttribute("data-tbl-listen","true"),this.clipCount++}},{key:"observeCardCreation",value:function observeCardCreation(){var a=this,b=function(){for(var b,c=a.reelComponent.getElementsByClassName(a.ITEM_WRAP_CLASS),d=Array.prototype.indexOf.call(a.reelComponent.childNodes,c[0]),e=0;e<c.length;e++)(b=c[e],"true"!==b.getAttribute("data-tbl-listen"))&&a.appendCardAttributes(b,d)};b();var c=new MutationObserver(b);c.observe(this.reelComponent,{childList:!0,subtree:!0})}},{key:"getContainer",value:function getContainer(){return document.querySelector("#".concat(V))||this.addContainer()}},{key:"listenToApvClickEvtV1",value:function listenToApvClickEvtV1(){var a=this;window._tvp.addEventListener("apvClick",function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a._onApvClick("".concat(R,"-external-click"),b.detail)})}},{key:"onApvClickEvent",value:function onApvClickEvent(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._onApvClick("".concat(R,"-external-click-v2"),a.detail)}},{key:"_onApvClick",value:function _onApvClick(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};b.mcp=window.TRC.videoReelIsLoaded,b.type="oc",this.isInSlider&&(b.sl=this.sliderType),this.reportPubsGeneric(a,b)}},{key:"listenToReadyToPlayEvtV1",value:function listenToReadyToPlayEvtV1(){var a=this;window._tvp.addEventListener("readyToPlay",function(){a.IS_READY_TO_PLAY=!0,a.reportPubsGeneric("".concat(R,"-readyToPlay"))})}},{key:"onReadyToPlay",value:function onReadyToPlay(){this.IS_READY_TO_PLAY=!0,this.reportPubsGeneric("".concat(R,"-readyToPlay-v2")),this.onReelReady()}},{key:"onCompatible",value:function onCompatible(){this.reportPubsGeneric("".concat(R,"-compatible"))}},{key:"onNotCompatible",value:,{key:"reportOrObserveUnitRender",value:function reportOrObserveUnitRender(){var a=this,b=this.reelComponent.querySelector(".".concat(this.ITEM_WRAP_CLASS));if(b)return void this.onFullyRendered();var c=setInterval(function(){var b=a.reelComponent.querySelector(".".concat(a.ITEM_WRAP_CLASS));b&&(a.onFullyRendered(),clearInterval(c))},50)}},{key:"onAvailable",value:function onAvailable(){try{if(this.AVAILABLE_REPORTED)return;this.dispatchAd(),this.listenToReadyToPlayEvtV1(),this.reportAvailable(),this.setVisibilityCallback(this.externalWrapper),this.reelComponent=this.findComponentWrap(),this.reportOrObserveUnitRender(),this.observeCardCreation(),this.listenToApvClickEvtV1(),this.setupSponsoredContent(),m(window._tvp,"pauseForAdPlay",this.pauseAd.bind(this)),m(window._tvp,"resumeOnAdClose",this.resumeAd.bind(this)),m(window._taboola,"push",this.stopNextVideoReelPush.bind(this))}catch(b){a(Q.VIDEO_REEL,"onAvailable",b.message,b)}}},{key:"stopNextVideoReelPush",value:function stopNextVideoReelPush(a){for(var b=this,c=[],d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];e.forEach(function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=a.placement&&-1<a.placement.indexOf(b.placementName);d||c.push(a),"newPageLoad"===a.notify&&b.resetModule()}),a.apply(void 0,c)}},{key:"resetModule",value:function resetModule(){this.reqId=null,this.placementName=null,this.clipCount=0,this.reelIndex=840,this.AVAILABLE_REPORTED=null,this.isReelShowing=!1,this.IS_READY_TO_PLAY=!1,this.PAGELOAD_REPORTED=!1,this.VISIBLE_REPORTED=!1}},{key:"registerPlayPauseButton",value:function registerPlayPauseButton(){this.vrlPlayPauseButton=this.reelComponent.querySelector("".concat(U.ADX_ICONS,":nth-child(").concat(1,")"))}},{key:"onReelReady",value:function onReelReady(){var a=this;this.showReelContainer(),setTimeout(0)}},{key:"playUnits",value:function playUnits(){if(t(this.contentWrapper)){if(this.isShowingVideoDemand){var a=this.contentWrapper.querySelector("".concat(U.DESKTOP_DEMAND_UNIT_SELECTOR," .play:not(.hide)"))||this.contentWrapper.querySelector("".concat(U.MOBILE_DEMAND_UNIT_SELECTOR," .mc-play"));return void(a&&a.click())}var b=this.vrlPlayPauseButton,c=b&&!this.isUnitPlaying();c&&b.click()}}},{key:"pauseUnits",value:function pauseUnits(){if(this.isShowingVideoDemand){var a=this.contentWrapper.querySelector("".concat(U.DESKTOP_DEMAND_UNIT_SELECTOR," .pause:not(.hide)"))||this.contentWrapper.querySelector("".concat(U.MOBILE_DEMAND_UNIT_SELECTOR," .mc-pause"));return void(a&&a.click())}var b=this.vrlPlayPauseButton,c=b&&this.isUnitPlaying();c&&b.click()}},{key:"isUnitPlaying",value:function isUnitPlaying(){return!this.reelComponent.querySelector(".animationPlayState-paused")}},{key:"isUnitStarted",value:function isUnitStarted(){return!!this.isReelStarted||(this.isReelStarted=!!this.reelComponent.querySelector(".nav-controls.show"))}},{key:"togglePlayerPerVisibility",value:function togglePlayerPerVisibility(){var a=this,b={rootSelector:null,targetElement:this.contentWrapper.parentElement,enableDelayedVisibilityCheck:!1,onTrigger:function togglePlayer(b,c,d){var e=d===TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE;if(e)return void a.playUnits();var f=d===TRC.intersections.visibilityState.IN_VIEW_PORT_NOT_VISIBLE;f&&a.pauseUnits()}.bind(this)};TRC.intersections.isInViewPort(b)}},{key:"isReadyToStart",value:,{key:"registerLeftArrow",value:function registerLeftArrow(a){var b=TRC.dom.closest(a.target,".iconWrapper")||TRC.dom.closest(a.target,".single-arrow");b===this.leftArrowButton&&(this.reelIndex-=2)}},{key:"handleTouchEvents",value:function handleTouchEvents(){function a(a){c=+a.changedTouches[0].clientX;var d=c-b,e=0>d?"right":"left";"left"===e&&(this.reelIndex-=2)}var b,c;this.reelComponent.addEventListener("touchstart",function c(a){b=+a.touches[0].clientX}),this.reelComponent.addEventListener("touchend",a)}},{key:"listenToReelArrows",value:function listenToReelArrows(){this.reelComponent.addEventListener("click",this.registerLeftArrow.bind(this),!0),this.handleTouchEvents()}},{key:"addScClickListener",value:function addScClickListener(){var a=this,b=function clickCallback(){var b="".concat(R,"-click"),c={type:"sc"};a.isInSlider&&(c.sl=a.sliderType),a.reportPubsGeneric(b,c)},c=this.scContainer.querySelector(".item-thumbnail-href"),d=this.scContainer.querySelector(".item-label-href");c&&c.addEventListener("click",b.bind(this)),d&&d.addEventListener("click",b.bind(this))}},{key:"setupSponsoredContent",value:function setupSponsoredContent(){var a=this.scContainer=document.querySelector(".videoReel");if(a){var b=TRC.dom.closest(a,".trc_rbox_container");this.listenToReelArrows(),z(this.contentWrapper,b),A(a),this.addScClickListener();var c=B(a);n(a),o(a),c.addEventListener("click",this.hideSponsoredContent.bind(this)),window._tvp.addEventListener("apvImpression",this.onVideoClipChange.bind(this))}}},{key:"isSponsoredShowTime",value:function isSponsoredShowTime(){var a=this.reelIndex%this.clipCount,b=a===this.scItemLocation,c=0===a&&this.scItemLocation===this.clipCount;return b||c}},{key:"onVideoClipChange",value:function onVideoClipChange(){if(this.reelIndex++,!this.isShowingVideoDemand){var a=this.isSponsoredShowTime();a&&(window._tvp.pauseForAdPlay("sponsored"),this.showSponsoredContent(),this.reelTimeout=setTimeout(this.hideSponsoredContent.bind(this),this.scDuration))}}},{key:"showSponsoredContent",value:function showSponsoredContent(){var a=this;return this.isShowingSc?void setTimeout(function(){a.showSponsoredContent()},50):void(this.isShowingSc=!0,this.scContainer.classList.add(U.SHOW),this.scContainer.classList.add(U.ZOOM),window.taboolaMobile&&u())}},{key:"hideSponsoredContent",value:,{key:"hideSponsoredContainer",value:function hideSponsoredContainer(){var a=this;clearTimeout(this.reelTimeout),this.scContainer.classList.add(U.REMOVE),setTimeout(function(){a.scContainer.classList.remove(U.SHOW),a.scContainer.classList.remove(U.ZOOM),a.scContainer.classList.remove(U.REMOVE),a.isShowingSc=!1},1500)}},{key:"createInternalComponent",value:function createInternalComponent(){var a=document.createElement("div");TRC.dom.addClass(a,"editor-tv-component"),this.contentWrapper.appendChild(a),this.isFiftyPercentInviewportEnabled&&this.togglePlayerPerVisibility()}},{key:"showReelContainer",value:function showReelContainer(){if(!this.isReelShowing){if(y(this.externalWrapper),w()){var a=this.reelComponent.querySelector(".white-board");a.style.backgroundColor="black"}this.leftArrowButton=x(this.reelComponent),this.isReelShowing=!0}}},{key:"pauseAd",value:function pauseAd(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"videoDemand";this.showReelContainer(),this.isShowingSc&&this.hideSponsoredContainer();var c="videoDemand"===b;return c&&(this.isShowingVideoDemand=!0),this.isUnitPlaying()?this.vrlPlayPauseButton?void this.vrlPlayPauseButton.click():void a():void 0}},{key:"resumeAd",value:function resumeAd(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"videoDemand";setTimeout(function(){var d="videoDemand"===c;return d&&(b.isShowingVideoDemand=!1),b.isUnitPlaying()&&b.isUnitStarted()?void 0:b.vrlPlayPauseButton?void b.vrlPlayPauseButton.click():void a()},0)}},{key:"callSliderObserve",value:function callSliderObserve(){this.sliderObserveid=TRC.intersections.observe({targetElement:this.sliderAncor,threshold:[.35],onExit:this.enableSliderUI.bind(this),onEnter:this.disableSliderUI.bind(this)})}},{key:"createLoadingScreen",value:function createLoadingScreen(){var a=p();this.loadingScreen=q(a),this.externalWrapper.appendChild(this.loadingScreen)}},{key:"initSlider",value:function initSlider(){var a=this.isSliderReel&&this.sliderType!==S.NO_SLIDER&&!this.sliderClosedForSession;if(a)switch(this.sliderAncor=this.externalWrapper,this.createSliderPlaceholder(),this.sliderType){case S.START:this.callSliderObserve();break;case S.DETACH:this.observerSliderForDetach();break;case S.ALWAYS:this.enableSliderUI();break;default:}}},{key:"canStart",value:function canStart(){if(this.sliderClosedForSession&&this.sliderType===S.ALWAYS)return!1;if(this.contentWrapper=this.getContainer(),!this.contentWrapper)return b(Q.VIDEO_REEL,"start","parent container not found: ".concat(this.placementName)),!1;var a=this.validateScript();return!!a}},{key:"start",value:function start(){try{var b=this.canStart();if(!b)return;if(window.minutelyTaboolaAPI={onAvailable:this.onAvailable.bind(this),onReportClickScript:this.onApvClickEvent.bind(this),onReportReadyToPlayScript:this.onReadyToPlay.bind(this),tvpIsCompatible:this.onCompatible.bind(this),tvpIsNotCompatible:this.onNotCompatible.bind(this)},this.sliderConfigs(),this.isSliderInited||this.addTitleContainer(),this.createInternalComponent(),E(this.externalWrapper),this.isDemandFirst)return void this.waitForDemand();this.startUnit()}catch(b){a(Q.VIDEO_REEL,"start",b.message,b)}}},{key:"initReelOnDemand",value:function initReelOnDemand(){var a=this;this.contentWrapper.classList.remove(U.SHALLOW_HIDDEN),y(this.externalWrapper),C(this.contentWrapper),this.isShowingVideoDemand=!0,setTimeout(0)}},{key:"waitForDemand",value:function waitForDemand(){this.contentWrapper.classList.add(U.SHALLOW_HIDDEN),window._tvp=window._tvp||{},window._tvp.pauseForAdPlay=this.initReelOnDemand.bind(this)}},{key:"startUnit",value:function startUnit(){this.appendReelAttributes(),this.initSlider(),_get(_getPrototypeOf(d.prototype),"start",this).call(this),TRC.delayedVrlLoader||h(Q.VIDEO_REEL,"module start")}},{key:"validateScript",value:function validateScript(){if(!this.moduleInstance)return!1;i(this.SCRIPT_ID,Q.VIDEO_REEL);var a=window._min_launcher_active;return!!a||(b(Q.VIDEO_REEL,"baseValidate","launcher not found"),!1)}},{key:"createSliderPlaceholder",value:function createSliderPlaceholder(){var a=this.contentWrapper,b=document.createElement("div");b.style.width="".concat(100*(a.offsetWidth/window.innerWidth),"vw"),b.style.height="".concat(100*(a.offsetHeight/window.innerWidth),"vw"),b.className="videoPlaceholder",this.sliderPlaceholder=b,this.sliderPlaceholder.classList.add(U.HIDE),this.externalWrapper.appendChild(b)}},{key:"observerSliderForDetach",value:function observerSliderForDetach(){var a=this,b=!1,c=function intersectionObserverDetach(c){var d=c[0];!b&&d.intersectionRatio>.97&&(b=!0),b&&(d.intersectionRatio<.35?a.enableSliderUI():a.disableSliderUI())};this.sliderObserverDetach=new IntersectionObserver(c,{threshold:[.35,1]}),this.sliderObserverDetach.observe(this.sliderAncor)}}]),d}(Z);try{var aa=!TRC.videoReelLoader||TRC.videoReelLoader.isBlocked;if(!TRC._trecsInit&&aa)return;var ba=TRC.CustomModulesManager.registeredModules[P].options,ca=d(ba);if(!ca)return;"undefined"!=typeof process&&process.env&&process.env.NODE_ENV&&"test"===process.env.NODE_ENV&&(module.exports.moduleInstance=ca),Z.hooks={"after-handle-load-response":function afterHandleLoadResponse(a){var b=a[1];ca.handleLoadResponse&&ca.handleLoadResponse(b)}},TRC.customHooks[P]=Z}catch(b){a("Base","VrlJsInit",b.message,b)}}})();