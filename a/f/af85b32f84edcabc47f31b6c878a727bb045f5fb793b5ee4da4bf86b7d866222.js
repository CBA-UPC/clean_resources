!function(){"use strict";const t=[`.${"slick-story-viewer-panel"}`,`.${"slick-content-grid"}`,`.${"slick-story-carousel"}`,`.${"slick-story-explorer"}`,`.${"slick-inline-search-panel"}`,`.${"slick-content-slot"}`,"slick-webstory-player"];class e extends HTMLElement{constructor(){super(),this._icon="",this._root=this.attachShadow({mode:"open"}),this._root.innerHTML='\n    <style>\n      :host {\n        color: white;\n      }\n      * { box-sizing: border-box; }\n      button {\n        background-color: var(--fab-background, #018786);\n        background-size: cover;\n        background-origin: border-box;\n        background-position: 50% 50%;\n        cursor: pointer;\n        outline: none;\n        border: none;\n        overflow: hidden;\n        padding: var(--fab-padding, 12px);\n        border-radius: 50%;\n        color: inherit;\n        user-select: none;\n        position: relative;\n        box-shadow: var(--fab-shadow, 0 3px 5px -1px rgba(0,0,0,.2), 0 6px 10px 0 rgba(0,0,0,.14), 0 1px 18px 0 rgba(0,0,0,.12));\n        transition: box-shadow .28s cubic-bezier(.4,0,.2,1), opacity 15ms linear 30ms, transform .27s cubic-bezier(0,0,.2,1) 0ms;\n      }\n      button:focus {\n        box-shadow: var(--fab-focus-shadow, 0 5px 5px -3px rgba(0,0,0,.2), 0 8px 10px 1px rgba(0,0,0,.14), 0 3px 14px 2px rgba(0,0,0,.12));\n      }\n      button:active {\n        box-shadow: 0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12) !important;\n      }\n      svg {\n        pointer-events: none;\n        display: block;\n        width: 100%;\n        height: 100%;\n      }\n      #icon {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        position: relative;\n        vertical-align: middle;\n        fill: currentcolor;\n        stroke: none;\n        width: 24px;\n        height: 24px;\n      }\n    </style>\n    <button>\n    <div id="icon">\n    <svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false"><g>\n    <path d=""></path>\n    </g></svg>\n    </div>\n    </button>\n    '}et icon(t){this._icon=t;const e=this._path();e&&e.setAttribute("d",this._icon)}connectedCallback(){this.icon=this._icon||this.getAttribute("icon")||""}}"customElements"in window&&customElements.define("slick-boot-fab",e);class o extends HTMLElement{constructor(){super(),this._connected=!1,this._root=this.attachShadow({mode:"open"})}der(){var t,e,o,n;if(this._connected&&this._data&&(this._data.showFavorite||this._data.showSearch)){let i="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z";if(this._data.favoriteIcon)switch(this._data.favoriteIcon){case"bookmark":i="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z";break;case"star":i="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z";break;case"wine":i="M6,3l0,6c0,2.97,2.16,5.43,5,5.91V19H8v2h8v-2h-3v-4.09c2.84-0.48,5-2.94,5-5.91V3H6z M12,13c-1.86,0-3.41-1.28-3.86-3h7.72 C15.41,11.72,13.86,13,12,13z M16,8H8l0-3h8L16,8z"}let s="none";this._data.minLinkedItemHeight&&(s=`translateY(-${this._data.minLinkedItemHeight}px)`),this._root.innerHTML=`\n      <style>\n        :host {\n          display: block;\n          position: fixed;\n          bottom: ${this._data.buttonBottom||16}px;\n          right: 0px;\n          pointer-events: none;\n          z-index: ${this._data.buttonZIndex||10002};\n          padding: 0 5px 0 0;\n          -moz-user-select: none;\n          -webkit-user-select: none;\n          -webkit-touch-callout: none;\n          -ms-user-select: none;\n          user-select: none;\n          outline: none;\n          transform: ${s};\n        }\n        * { box-sizing: border-box; }\n        .vertical {display: flex; flex-direction: column;}\n        slick-boot-fab {\n          color: ${this._data.siteColor||"#2196f3"};\n          margin-right: 5px;\n          cursor: pointer;\n          -moz-user-select: none;\n          -webkit-user-select: none;\n          -ms-user-select: none;\n          -webkit-touch-callout: none;\n          user-select: none;\n          pointer-events: auto;\n          --fab-background: white;\n          --fab-padding: 10px;\n        }\n        #searchFab {\n          --fab-background: ${this._data.siteColor||"#2196f3"};\n          color: white;\n          margin-top: 8px;\n        }\n      </style>\n      <div class="vertical">\n        <slick-boot-fab id="heartFab" icon="${i}"></slick-boot-fab>\n        <slick-boot-fab id="searchFab" icon="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></slick-boot-fab>\n      </div>\n    `,null===(e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#searchFab"))||void 0===e||e.addEventListener("click",(t=>{t.stopPropagation(),document.dispatchEvent(new Event("slick-boot-open-search"))})),null===(n=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector("#heartFab"))||void 0===n||n.addEventListener("click",(t=>{t.stopPropagation(),document.dispatchEvent(new Event("slick-boot-add-favorite"))}))}}}"customElements"in window&&customElements.define("slick-boot-hearts",o);class n extends HTMLElement{constructor(){super(),this._open=!1,this._connected=!1,this._clickHandler=t=>{t.stopPropagation(),document.dispatchEvent(new Event("slick-boot-close-search"))},this._root=this.attachShadow({mode:"open"}),this._root.innerHTML='\n    <style>\n      * { box-sizing: border-box; }\n      #shell {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.4);\n        opacity: 0;\n        pointer-events: none;\n        transition: opacity 0.3s ease;\n        z-index: 10002;\n      }\n      :host([open]) #shell {\n        opacity: 1;\n        pointer-events: auto;\n      }\n    </style>\n    <div id="shell">\n    </div>\n    '}connectedCallback(){var t;this._connected=!0,this._refresh(),null===(t=this._root.querySelector("#shell"))||void 0===t||t.addEventListener("click",this._clickHandler)}disconnectedCallback(){var t;this._connected=!1,null===(t=this._root.querySelector("#shell"))||void 0===t||t.removeEventListener("click",this._clickHandler)}set open(t){this._open=t,this._refresh()}_refresh(){this._connected&&(this._open?this.setAttribute("open",""):this.removeAttribute("open"))}}async function i(){if(!window.customElements)return async function(t){return new Promise(((e,o)=>{const n=document.createElement("script");n.async=!0,n.onerror=()=>{o(new Error("Failed to load script"))},n.onabort=n.onload=n.src=t,document.head.appendChild(n)}))}("https://r.slickstream.com/scripts/@webcomponents-2.4.0/webcomponentsjs/bundles/webcomponents-sd-ce-pf.js")}"customElements"in window&&customElements.define("slick-boot-search-loading",n);let s=[],a=null;function c(t){"IntersectionObserver"in window&&(a||(a=new IntersectionObserver((t=>{for(const e of t)if(e&&e.isIntersecting)return void document.dispatchEvent(new Event("slick-boot-intersection"))}))),s.push(t),a.observe(t))}lass d{sync initialize(){if(await this.waitForTcf()){if("function"==typeof window.__tcfapi){!1===(await this.ping()).gdprApplies?this._delegate.hanldeTcfState("no-gdpr"):this.attachTcfEvents()}}else this._delegate.hanldeTcfState("no-tcf")}async waitForTcf(){for(let t=0;t<20;t++){if(window.__tcfapi)return window.__tcfapi;await r(500)}return null}async ping(){return new Promise((t=>{window.__tcfapi("ping",2,()}))}attachTcfEvents(){window.__tcfapi("addEventListener",2,((t,e)=>{if(e&&t)switch(t.eventStatus){case"tcloaded":case"useractioncomplete":this.checkConsent(t,e)}}))}checkConsent(t,e){if(e&&t&&t.tcString){const e=t.vendor.consents[996]||!1;e!==this._consented&&(this._consented=e,e?this._delegate.hanldeTcfState("consent"):this._delegate.hanldeTcfState("no-consent"))}}}const h=window;class l{constructor(){this._bootContext=h.$slickBoot,this._bootData=this.getBootDataForDeviceType(),this._triggered=!1,this._hookedNodes=[],this._hookEvents=["click","mouseup","touchend","keydown"],this._triggerTimer=0,this._booted=!1,this.openSearch=()=>{this.gotoHash("#search"),this._searchPanelPlaceholder&&(this._searchPanelPlaceholder.open=!0),this.trigger()},this.hookHandle=this.postTriggerCleanup=()=>{!function(){for(const t of s)a&&(a.unobserve(t),t.remove());s=[]}();for(const t of this._hookedNodes)this.removeListeners(t)}}getBootDataForDeviceType(){const t=)?"phone":"desktop";return this._bootContext.device=t,this._bootContext.d.v2?"phone"===t&&this._bootContext.d.v2.phone?this._bootContext.d.v2.phone:this._bootContext.d.v2.desktop:this._bootContext.d}gotoHash(t){t.length<=1?window.history.pushState("",document.title,window.location.pathname+window.location.search):window.history.pushState("",document.title,t)}addListeners(t){this._hookEvents.forEach((e=>t.addEventListener(e,this.hookHandle)))}removeListeners(t){this._hookEvents.forEach(()}async trigger(){this._triggered||(this._triggered=!0,this._triggerTimer&&(window.clearTimeout(this._triggerTimer),this._triggerTimer=0),await i(),await this.loadApp())}async blobAsText(t){return t.text?await t.text():new Promise((e=>{const o=new FileReader;o.addEventListener("loadend",(),o.readAsText(t)}))}async loadApp(){let t,e=this._bootData.appUrl;const o=document.createElement("script"),{t:n,d:i}=await this._bootContext.l(new Request(e,{cache:"no-store"}),!0);if(i){if(n&&(this._bootContext._af=n),h.$slickAvoidBlobUrls)return o.type="application/javascript",o.appendChild(document.createTextNode(await this.blobAsText(i))),void document.head.appendChild(o);t=e=URL.createObjectURL(i)}this._bootContext.ao=t,o.src=e,document.head.appendChild(o)}getWeightedChoice(t,e){const o=100*Math.random();let n=0;for(const{choice:e,weight:i}of t)if(n+=i,n>=o)return e;return e}getDelayFromAbTest(){if(this._bootContext.d&&this._bootContext.d.abTests&&this._bootContext.d.abTests.length>0){let t=this._bootContext.d.abTests[0];const e=null!==t.excludeSites&&t.excludeSites.includes(this._bootContext.d.siteCode);if(t.startDate<Date.now()&&t.endDate>Date.now()&&!e&&"feature-switches"===t.type&&"boot-delay"===t.feature){const t=[{choice:"250",weight:20},{choice:"500",weight:20},{choice:"1000",weight:20},{choice:"none",weight:40}],e=this.getWeightedChoice(t,"none");return this._bootContext.delay=e,this.sendTargetingKeyToGam("slkab_dly2",e),parseInt(e)||0}}return 0}async sendTargetingKeyToGam(t,e){const o=window;o.adthrive=o.adthrive||{},o.adthrive.cmd=o.adthrive.cmd||[],o.adthrive.cmd.push(()}boot(e){if(this._booted)return;this._booted=!0,this._bootContext._bs=performance.now(),this._bootContext.bootLoaderCleanup=this.postTriggerCleanup,this._bootContext.consentStatus=e,this._bootContext.d=this._bootData;const i=window.location.hash;if(0===i.indexOf("#search")||0===i.indexOf("#list/")||0===i.indexOf("#slick-"))return void this.trigger();const s=this.getDelayFromAbTest(),a=0!==s?s:this._bootData.bootTriggerTimeout;if(0!==a){if(this._bootData.fabs&&"denied"!==e){if(!(void 0!==this._bootContext.d.abTests&&this._bootContext.d.abTests.length>0)&&(this._bootData.fabs.showSearch||this._bootData.fabs.showFavorite))try{const t=new o;t.data=this._bootData.fabs,document.body.appendChild(t)}catch(t){console.error("[Slick]",t)}}try{this._searchPanelPlaceholder=new n,document.body.appendChild(this._searchPanelPlaceholder),document.addEventListener("slick-boot-open-search",this.openSearch),document.addEventListener("slick-boot-close-search",(()=>{this.gotoHash("#"),this._searchPanelPlaceholder&&(this._searchPanelPlaceholder.open=!1)})),document.addEventListener("slick-boot-add-favorite",()}catch(t){console.error("[Slick]",t)}if(this._bootData.searchHooks)for(const t of this._bootData.searchHooks)try{if(t){const e=document.querySelector(t);e&&(this.addListeners(e),this._hookedNodes.push(e))}}catch(t){console.error("[Slick]",t)}this._bootData.placeholders&&(!function(t){if(t.length)for(const{position:e,selector:o}of t)if(o){const t=document.querySelector(o);if(t){const o=document.createElement("div");switch(o.setAttribute("class","slick-boot-placeholder"),e){case"after selector":t.insertAdjacentElement("afterend",o);break;case"before selector":t.insertAdjacentElement("beforebegin",o);break;case"first child of selector":t.insertAdjacentElement("afterbegin",o);break;case"last child of selector":t.insertAdjacentElement("beforeend",o)}c(o)}}}(this._bootData.placeholders),function(t){if(t.length)for(const e of t){const t=document.querySelector(e);if(t){const e=document.createElement("div");e.setAttribute("class","slick-boot-placeholder"),t.appendChild(e),c(e)}}}(t),document.addEventListener("slick-boot-intersection",(()=>{this.trigger()}))),this._triggerTimer=window.setTimeout((,a||1e4)}else this.trigger()}}async function b(t,e,o){const n=new Request(`${t}/d/page-boot-data?site=${e}&url=${encodeURIComponent(location.href.split("#")[0])}`,{cache:"no-store",method:o?"HEAD":"GET"}),i=await fetch(n);return{data:o?{}:await i.json(),askForConsent:!(!i.headers||"ask"!==i.headers.get("x-slickstream-consent"))}}(async()=>{if(window.location.search.indexOf("no-slick")>=0||window.location.search.indexOf("disable-slickstream")>=0)return;await async function(){const t=document&&document.readyState;if("interactive"!==t&&"complete"!==t)return new Promise((t=>{let e=!1;const o=n=()=>{const t=document&&document.readyState;"interactive"===t||"complete"===t?o():window.setTimeout((,300)};document.addEventListener("DOMContentLoaded",o),window.addEventListener("DOMContentLoaded",o),window.addEventListener("load",o),n()}))}();const t=await async function(){var t;if(h.$slickBoot)return void 0!==h.$slickBoot.c?"ask"===h.$slickBoot.c:(await b(h.$slickBoot.rt,(null===(t=h.$slickBoot.d)||void 0===t?void 0:t.siteCode)||window.slickSiteCode,!0)).askForConsent;const e=window.slickEmbedRoot||"",o=window.slickSiteCode||"",n=await b(e,o,!1);return h.$slickBoot={rt:e,l:d:n.data,ev:window.slickSnippetVersion||"",_es:window.slickSnippetTime||Date.now()},n.askForConsent}(),e=new l;t?new d({hanldeTcfState:t=>{switch(t){case"no-tcf":console.log("[Slick] TCF not found. Preventing boot."),e.boot("denied");break;case"no-gdpr":e.boot("not-required");break;case"consent":e.boot("granted");break;case"no-consent":document.dispatchEvent(new Event("slick-boot-no-consent")),e.boot("denied")}}}):e.boot("not-required")})()}();

//# sourceURL=browsertools://slickstream/boot-loader.js