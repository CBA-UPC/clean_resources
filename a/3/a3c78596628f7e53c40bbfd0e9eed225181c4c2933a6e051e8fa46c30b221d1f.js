/*
 * Snowplow - The world's most powerful web analytics platform
 *
 * @description JavaScript tracker for Snowplow
 * @version     2.11.0 - patched 1 Jul 2021
 * @author      Alex Dean, Simon Andersson, Anthon Pang, Fred Blundun, Joshua Beemster, Michael Hadam
 * @copyright   Anthon Pang, Snowplow Analytics Ltd
 * @license     Simplified BSD
 *
 * For technical documentation:
 * https://github.com/snowplow/snowplow/wiki/javascript-tracker
 *
 * For the setup guide:
 * https://github.com/snowplow/snowplow/wiki/javascript-tracker-setup
 *
 * Minimum supported browsers:
 * - Firefox 27 
 * - Chrome 32 
 * - IE 9 
 * - Safari 8 
 */

"use strict";{1:[{}],2:[function(e,t,n){nction o(e){return r(a(e,0,2))}ar c,s;c=this,(s={determine:function(){var e,t,n,e=(e=o(),t=i(),(n=e-t)<0?e+",1":0<n?t+",1,s":e+",0");return new s.TimeZone(s.olson.timezones[e])},date_is_dst:function(e){var t=7<e.getMonth(),n=(t?i:o)(e.getFullYear()),e=n-r(e);return n<0||t?0!=e:e<0},dst_start_for:).TimeZone=function(e){var a={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Asia/Beirut","Europe/Helsinki","Asia/Damascus"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk"],"Asia/Baku":["Asia/Yerevan","Asia/Baku"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},o=e;return void 0!==a[o]&&function(){var e,t=a[o],n=t.length,r=0;for(t[0];r<n;r+=1)if(e=t[r],s.date_is_dst(s.dst_start_for(e)))return o=e}(),{name:function(){return o}}},s.olson={},s.olson.timezones={"-720,0":"Pacific/Majuro","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},void 0!==n?n.jstz=s:c.jstz=s},{}],3:[function(e,t,n){e=e("./_getNative")(e("./_root"),"DataView");t.exports=e},{"./_getNative":67,"./_root":104}],4:[function(e,t,n){var r=e("./_hashClear"),a=e("./_hashDelete"),o=e("./_hashGet"),i=e("./_hashHas"),e=e("./_hashSet");function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=e,t.exports=c},{"./_hashClear":74,"./_hashDelete":75,"./_hashGet":76,"./_hashHas":77,"./_hashSet":78}],5:[function(e,t,n){var r=e("./_listCacheClear"),a=e("./_listCacheDelete"),o=e("./_listCacheGet"),i=e("./_listCacheHas"),e=e("./_listCacheSet");function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=e,t.exports=c},{"./_listCacheClear":86,"./_listCacheDelete":87,"./_listCacheGet":88,"./_listCacheHas":89,"./_listCacheSet":90}],6:[function(e,t,n){e=e("./_getNative")(e("./_root"),"Map");t.exports=e},{"./_getNative":67,"./_root":104}],7:[{"./_mapCacheClear":91,"./_mapCacheDelete":92,"./_mapCacheGet":93,"./_mapCacheHas":94,"./_mapCacheSet":95}],8:[function(e,t,n){e=e("./_getNative")(e("./_root"),"Promise");t.exports=e},{"./_getNative":67,"./_root":104}],9:[function(e,t,n){e=e("./_getNative")(e("./_root"),"Set");t.exports=e},{"./_getNative":67,"./_root":104}],10:[{"./_MapCache":7,"./_setCacheAdd":105,"./_setCacheHas":106}],11:[{"./_ListCache":5,"./_stackClear":108,"./_stackDelete":109,"./_stackGet":110,"./_stackHas":111,"./_stackSet":112}],12:[function(e,t,n){e=e("./_root").Symbol;t.exports=e},{"./_root":104}],13:[{"./_root":104}],14:[{"./_getNative":67,"./_root":104}],15:[{}],16:[{}],17:[{}],18:[{"./_baseTimes":48,"./_isIndex":79,"./isArguments":128,"./isArray":129,"./isBuffer":131,"./isTypedArray":140}],19:[{}],20:[{}],21:[{}],22:[{"./eq":118}],23:[{"./_defineProperty":59}],24:[{"./_baseForOwn":29,"./_createBaseEach":56}],25:[{"./_baseEach":24}],26:[{"./_baseEach":24}],27:[{}],28:[{"./_createBaseFor":57}],29:[{"./_baseFor":28,"./keys":142}],30:[{"./_castPath":54,"./_toKey":114}],31:[{"./_arrayPush":20,"./isArray":129}],32:[{"./_Symbol":12,"./_getRawTag":69,"./_objectToString":102}],33:[{}],34:[{}],35:[{"./_baseGetTag":32,"./isObjectLike":136}],36:[{"./_baseIsEqualDeep":37,"./isObjectLike":136}],37:[{"./_Stack":11,"./_equalArrays":60,"./_equalByTag":61,"./_equalObjects":62,"./_getTag":71,"./isArray":129,"./isBuffer":131,"./isTypedArray":140}],38:[{"./_Stack":11,"./_baseIsEqual":36}],39:[{"./_isMasked":83,"./_toSource":115,"./isFunction":133,"./isObject":135}],40:[{"./_baseGetTag":32,"./isLength":134,"./isObjectLike":136}],41:[{"./_baseMatches":44,"./_baseMatchesProperty":45,"./identity":127,"./isArray":129,"./property":146}],42:[{"./_isPrototype":84,"./_nativeKeys":100}],43:[{"./_baseEach":24,"./isArrayLike":130}],44:[{"./_baseIsMatch":38,"./_getMatchData":66,"./_matchesStrictComparable":97}],45:[{"./_baseIsEqual":36,"./_isKey":81,"./_isStrictComparable":85,"./_matchesStrictComparable":97,"./_toKey":114,"./get":124,"./hasIn":126}],46:[{}],47:[{"./_baseGet":30}],48:[{}],49:[{"./_Symbol":12,"./_arrayMap":19,"./isArray":129,"./isSymbol":139}],50:[{"./_trimmedEndIndex":116}],51:[{}],52:[{}],53:[{"./identity":127}],54:[{"./_isKey":81,"./_stringToPath":113,"./isArray":129,"./toString":152}],55:[{"./_root":104}],56:[{"./isArrayLike":130}],57:[{}],58:[function(e,t,n){var i=e("./_baseIteratee"),c=e("./isArrayLike"),s=e("./keys");t.exports=function(o){return function(e,t,n){var r,a=Object(e);c(e)||(r=i(t,3),e=s(e),t=;n=o(e,t,n);return-1<n?a[r?e[n]:n]:void 0}}},{"./_baseIteratee":41,"./isArrayLike":130,"./keys":142}],59:[{"./_getNative":67}],60:[{"./_SetCache":10,"./_arraySome":21,"./_cacheHas":52}],61:[{"./_Symbol":12,"./_Uint8Array":13,"./_equalArrays":60,"./_mapToArray":96,"./_setToArray":107,"./eq":118}],62:[{"./_getAllKeys":64}],63:[function(e,n,t){!function(t){!function(){var e="object"==_typeof(t)&&t&&t.Object===Object&&t;n.exports=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],64:[{"./_baseGetAllKeys":31,"./_getSymbols":70,"./keys":142}],65:[{"./_isKeyable":82}],66:[{"./_isStrictComparable":85,"./keys":142}],67:[{"./_baseIsNative":39,"./_getValue":72}],68:[function(e,t,n){e=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=e},{"./_overArg":103}],69:[{"./_Symbol":12}],70:[{"./_arrayFilter":17,"./stubArray":147}],71:[{"./_DataView":3,"./_Map":6,"./_Promise":8,"./_Set":9,"./_WeakMap":14,"./_baseGetTag":32,"./_toSource":115}],72:[{}],73:[{"./_castPath":54,"./_isIndex":79,"./_toKey":114,"./isArguments":128,"./isArray":129,"./isLength":134}],74:[{"./_nativeCreate":99}],75:[function(e,t,n){t.exports=,{}],76:[{"./_nativeCreate":99}],77:[{"./_nativeCreate":99}],78:[{"./_nativeCreate":99}],79:[{}],80:[{"./_isIndex":79,"./eq":118,"./isArrayLike":130,"./isObject":135}],81:[{"./isArray":129,"./isSymbol":139}],82:[{}],83:[{"./_coreJsData":55}],84:[{}],85:[{"./isObject":135}],86:[{}],87:[{"./_assocIndexOf":22}],88:[{"./_assocIndexOf":22}],89:[{"./_assocIndexOf":22}],90:[{"./_assocIndexOf":22}],91:[{"./_Hash":4,"./_ListCache":5,"./_Map":6}],92:[{"./_getMapData":65}],93:[function(e,t,n){var r=e("./_getMapData");t.exports=function(e){return r(this,e).get(e)}},{"./_getMapData":65}],94:[{"./_getMapData":65}],95:[{"./_getMapData":65}],96:[{}],97:[{}],98:[{"./memoize":145}],99:[{"./_getNative":67}],100:[{"./_overArg":103}],101:[function(e,t,n){var e=e("./_freeGlobal"),n="object"==_typeof(n)&&n&&!n.nodeType&&n,r=n&&"object"==_typeof(t)&&t&&!t.nodeType&&t,a=r&&r.exports===n&&e.process,e=);t.exports=e},{"./_freeGlobal":63}],102:[{}],103:[{}],104:[{"./_freeGlobal":63}],105:[{}],106:[function(e,t,n){t.exports=function(e){return this.__data__.has(e)}},{}],107:[{}],108:[{"./_ListCache":5}],109:[{}],110:[function(e,t,n){t.exports=function(e){return this.__data__.get(e)}},{}],111:[{}],112:[{"./_ListCache":5,"./_Map":6,"./_MapCache":7}],113:[{"./_memoizeCapped":98}],114:[{"./isSymbol":139}],115:[{}],116:[{}],117:[{}],118:[{}],119:[{"./_arrayEvery":16,"./_baseEvery":25,"./_baseIteratee":41,"./_isIterateeCall":80,"./isArray":129}],120:[function(e,t,n){var r=e("./_arrayFilter"),a=e("./_baseFilter"),o=e("./_baseIteratee"),i=e("./isArray");t.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},{"./_arrayFilter":17,"./_baseFilter":26,"./_baseIteratee":41,"./isArray":129}],121:[{"./_createFind":58,"./findIndex":122}],122:[{"./_baseFindIndex":27,"./_baseIteratee":41,"./toInteger":150}],123:[{"./_arrayEach":15,"./_baseEach":24,"./_castFunction":53,"./isArray":129}],124:[{"./_baseGet":30}],125:[function(e,t,n){var r=e("./_baseHas"),a=e("./_hasPath");t.exports=function(e,t){return null!=e&&a(e,t,r)}},{"./_baseHas":33,"./_hasPath":73}],126:[{"./_baseHasIn":34,"./_hasPath":73}],127:[{}],128:[{"./_baseIsArguments":35,"./isObjectLike":136}],129:[{}],130:[{"./isFunction":133,"./isLength":134}],131:[function(e,t,n){var r=e("./_root"),a=e("./stubFalse"),e="object"==_typeof(n)&&n&&!n.nodeType&&n,n=e&&"object"==_typeof(t)&&t&&!t.nodeType&&t,r=n&&n.exports===e?r.Buffer:void 0,r=r?r.isBuffer:void 0;t.exports=r||a},{"./_root":104,"./stubFalse":148}],132:[{"./_baseIsEqual":36}],133:[{"./_baseGetTag":32,"./isObject":135}],134:[{}],135:[{}],136:[{}],137:[{"./_baseGetTag":32,"./_getPrototype":68,"./isObjectLike":136}],138:[{"./_baseGetTag":32,"./isArray":129,"./isObjectLike":136}],139:[{"./_baseGetTag":32,"./isObjectLike":136}],140:[{"./_baseIsTypedArray":40,"./_baseUnary":51,"./_nodeUtil":101}],141:[{}],142:[{"./_arrayLikeKeys":18,"./_baseKeys":42,"./isArrayLike":130}],143:[{"./_arrayMap":19,"./_baseIteratee":41,"./_baseMap":43,"./isArray":129}],144:[{"./_baseAssignValue":23,"./_baseForOwn":29,"./_baseIteratee":41}],145:[function(e,t,n){var i=e("./_MapCache"),c="Expected a function";.Cache=i,t.exports=s},{"./_MapCache":7}],146:[{"./_baseProperty":46,"./_basePropertyDeep":47,"./_isKey":81,"./_toKey":114}],147:[{}],148:[{}],149:[{"./toNumber":151}],150:[{"./toFinite":149}],151:[{"./_baseTrim":50,"./isObject":135,"./isSymbol":139}],152:[{"./_baseToString":49}],153:[function(e,a,t){!function(){var e=this;function t(e,t){for(var n,r,a=3&e.length,o=e.length-a,i=t,c=3432918353,s=461845907,u=0;u<o;)r=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(n=5*(65535&(i=(i^=r=(65535&(r=(r=(65535&r)*c+(((r>>>16)*c&65535)<<16)&4294967295)<<15|r>>>17))*s+(((r>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(n>>>16)&65535)<<16);switch(r=0,a){case 3:r^=(255&e.charCodeAt(u+2))<<16;case 2:r^=(255&e.charCodeAt(u+1))<<8;case 1:i^=r=(65535&(r=(r=(65535&(r^=255&e.charCodeAt(u)))*c+(((r>>>16)*c&65535)<<16)&4294967295)<<15|r>>>17))*s+(((r>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}var n,r=t;r.v2=function(e,t){for(var n,r=e.length,a=t^r,o=0;4<=r;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16),r-=4,++o;switch(r){case 3:a^=(255&e.charCodeAt(o+2))<<16;case 2:a^=(255&e.charCodeAt(o+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(o)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0},r.v3=t,void 0!==a?a.exports=r:(n=e.murmur,r.noConflict=e.murmur=r)}()},{}],154:[{}],155:[{}],156:[function(e,t,n){function r(e,t){return e=g.wordsToBytes(function(e){e.constructor==String&&(e=v.stringToBytes(e));var t=g.bytesToWords(e),e=8*e.length,n=[],r=1732584193,a=-271733879,o=-1732584194,i=271733878,c=-1009589776;t[e>>5]|=128<<24-e%32,t[15+(64+e>>>9<<4)]=e;for(var s=0;s<t.length;s+=16){for(var u=r,l=a,f=o,d=i,p=c,h=0;h<80;h++){h<16?n[h]=t[s+h]:(m=n[h-3]^n[h-8]^n[h-14]^n[h-16],n[h]=m<<1|m>>>31);var m=(r<<5|r>>>27)+c+(n[h]>>>0)+(h<20?1518500249+(a&o|~a&i):h<40?1859775393+(a^o^i):h<60?(a&o|a&i|o&i)-1894007588:(a^o^i)-899497514),c=i,i=o,o=a<<30|a>>>2,a=r,r=m}r+=u,a+=l,o+=f,i+=d,c+=p}return[r,a,o,i,c]}(e)),t&&t.asBytes?e:t&&t.asString?a.bytesToString(e):g.bytesToHex(e)}var g,v,a;g=e("crypt"),v=e("charenc").utf8,a=e("charenc").bin,r._blocksize=16,r._digestsize=20,t.exports=r},{charenc:154,crypt:155}],157:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});e=e("./lib/core");n.trackerCore=e.trackerCore},{"./lib/core":160}],158:[function(e,t,n){function r(e){var t,n,r,a,o,i,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,u=0,l="",f=[];if(!e)return e;for(e+="";t=(o=c.indexOf(e.charAt(s++))<<18|c.indexOf(e.charAt(s++))<<12|(r=c.indexOf(e.charAt(s++)))<<6|(a=c.indexOf(e.charAt(s++))))>>16&255,n=o>>8&255,o=255&o,f[u++]=64===r?String.fromCharCode(t):64===a?String.fromCharCode(t,n):String.fromCharCode(t,n,o),s<e.length;);return l=f.join(""),i=l.replace(/\0+$/,""),decodeURIComponent(i.split("").map(.join(""))}Object.defineProperty(n,"__esModule",{value:!0}),n.base64urldecode=n.base64encode=function(e){var t,n,r,a,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=0,c=0,s=[];if(!e)return e;for(e=unescape(encodeURIComponent(e));t=(a=e.charCodeAt(i++)<<16|e.charCodeAt(i++)<<8|e.charCodeAt(i++))>>12&63,n=a>>6&63,r=63&a,s[c++]=o.charAt(a>>18&63)+o.charAt(t)+o.charAt(n)+o.charAt(r),i<e.length;);var u=s.join(""),l=e.length%3;return(l?u.slice(0,l-3):u)+"===".slice(l||3)},n.base64decode=r},{}],159:[function(e,t,n){var r=this&&this.__assign||Object.assign||Object.defineProperty(n,"__esModule",{value:!0});var a=e("./payload"),o=e("./base64"),s=e("lodash/isEqual"),i=e("lodash/has"),c=e("lodash/get"),u=e("lodash/isPlainObject"),l=e("lodash/every"),f=e("lodash/compact"),d=e("lodash/map");function p(e){e=new RegExp("^iglu:([a-zA-Z0-9-_.]+)/([a-zA-Z0-9-_]+)/jsonschema/([1-9][0-9]*)-(0|[1-9][0-9]*)-(0|[1-9][0-9]*)$").exec(e);if(null!==e)return e.slice(1,6)}unction m(e){e=e.split(".");return!!(e&&1<e.length)&&h(e)}function g(e){e=new RegExp("^iglu:((?:(?:[a-zA-Z0-9-_]+|\\*).)+(?:[a-zA-Z0-9-_]+|\\*))/([a-zA-Z0-9-_.]+|\\*)/jsonschema/([1-9][0-9]*|\\*)-(0|[1-9][0-9]*|\\*)-(0|[1-9][0-9]*|\\*)$").exec(e);if(null!==e&&m(e[1]))return e.slice(1,6)}function v(e){var t=g(e);if(t){e=t[0];return 5===t.length&&m(e)}return!1}unction _(e){return y(e)?e.every(v):"string"==typeof e&&v(e)}ction A(e){return"function"==typeof e&&e.length<=1}unction C(e){return A(e)||b(e)}on E(e,t){var n=0,r=0,a=c(e,"accept");Array.isArray(a)?e.accept.some(function(e){return O(e,t)})&&r++:"string"==typeof a&&O(a,t)&&r++;a=c(e,"reject");return Array.isArray(a)?e.reject.some(&&n++:"string"==typeof a&&O(a,t)&&n++,0<r&&0===n}unction L(e){e=r({},e);try{i(e,"ue_px")&&(e.ue_px=JSON.parse(o.base64urldecode(c(e,["ue_px"]))))}catch(e){}return e}unction N(e,t,n,r){var a=void 0;try{return b(a=e({event:t,eventType:n,eventSchema:r}))||Array.isArray(a)&&l(a,b)?a:void 0}catch(e){a=void 0}return a}unction z(e,t,n,r){e=F(e),e=d(e,function(e){e=B(e,t,n,r);if(e&&0!==e.length)return e});return[].concat.apply([],f(e))}function B(e,t,n,r){if(b(e))return[e];if(A(e)){r=N(e,t,n,r);if(b(r))return[r];if(Array.isArray(r))return r}}unction G(e,t,n,r){e=F(e),e=d(e,function(e){e=U(e,t,n,r);if(e&&0!==e.length)return e});return[].concat.apply([],f(e))}n.getSchemaParts=p,n.validateVendorParts=h,n.validateVendor=m,n.getRuleParts=g,n.isValidRule=v,n.isStringArray=y,n.isValidRuleSetArg=_,n.isSelfDescribingJson=b,n.isEventJson=w,n.isRuleSet=k,n.isContextGenerator=A,n.isContextFilter=x,n.isContextPrimitive=C,n.isFilterProvider=S,n.isRuleSetProvider=j,n.isConditionalContextProvider=T,n.matchSchemaAgainstRule=O,n.matchVendor=I,n.matchPart=P,n.matchSchemaAgainstRuleSet=E,n.getUsefulSchema=D,n.getDecodedEvent=L,n.getEventType=M,n.buildGenerator=N,n.normalizeToArray=F,n.generatePrimitives=z,n.evaluatePrimitive=B,n.evaluateProvider=U,n.generateConditionals=G,n.contextModule=function(){var i=[],c=[];return{getGlobalPrimitives:function(){return i},getConditionalProviders:function(){return c},addGlobalContexts:clearGlobalContexts:removeGlobalContexts:function(e){for(var t=0,n=e;t<n.length;t++)!n[t])},getApplicableContexts:function(e){var t,n,r=e.build();if(w(r)){var a=L(r);return n=D(t=a),e=M(t),r=[],a=z(i,t,e,n),r.push.apply(r,a),n=G(c,t,e,n),r.push.apply(r,n),r}return[]}}}},{"./base64":158,"./payload":161,"lodash/compact":117,"lodash/every":119,"lodash/get":124,"lodash/has":125,"lodash/isEqual":132,"lodash/isPlainObject":137,"lodash/map":143}],160:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var c=e("uuid"),m=e("./payload"),s=e("./contexts");n.trackerCore=function(d,r){void 0===d&&(d=!0);var a={},o=s.contextModule();nction i(e,t){var n=o.getApplicableContexts(e),e=[];return t&&t.length&&e.push.apply(e,t),n&&n.length&&e.push.apply(e,n),e}function p(e,t,n){e.addDict(a),e.add("eid",c.v4());n=null==(n=n)?{type:"dtm",value:(new Date).getTime()}:"number"==typeof n?{type:"dtm",value:n}:"ttm"===n.type?{type:"ttm",value:n.value}:{type:"dtm",value:n.value||(new Date).getTime()};e.add(n.type,n.value.toString());t=i(e,t));return void 0!==t&&e.addJson("cx","co",t),"function"==typeof r&&r(e),e}eturn{setBase64Encoding:function(e){d=e},addPayloadPair:n,addPayloadDict:resetPayloadPairs:setTrackerVersion:function(e){n("tv",e)},setTrackerNamespace:function(e){n("tna",e)},setAppId:function(e){n("aid",e)},setPlatform:function(e){n("p",e)},setUserId:function(e){n("uid",e)},setScreenResolution:function(e,t){n("res",e+"x"+t)},setViewport:setColorDepth:function(e){n("cd",e)},setTimezone:function(e){n("tz",e)},setLang:function(e){n("lang",e)},setIpAddress:trackUnstructEvent:h,trackSelfDescribingEvent:h,trackPageView:trackPagePing:trackStructEvent:trackEcommerceTransaction:trackEcommerceTransactionItem:trackScreenView:trackLinkClick:trackAdImpression:trackAdClick:function(e,t,n,r,a,o,i,c,s,u,l){return h({schema:"iglu:com.snowplowanalytics.snowplow/ad_click/jsonschema/1-0-0",data:f({targetUrl:e,clickId:t,costModel:n,cost:r,bannerId:a,zoneId:o,impressionId:i,advertiserId:c,campaignId:s})},u,l)},trackAdConversion:trackSocialInteraction:function(e,t,n,r,a){return h({schema:"iglu:com.snowplowanalytics.snowplow/social_interaction/jsonschema/1-0-0",data:f({action:e,network:t,target:n})},r,a)},trackAddToCart:function(e,t,n,r,a,o,i,c){return h({schema:"iglu:com.snowplowanalytics.snowplow/add_to_cart/jsonschema/1-0-0",data:f({sku:e,name:t,category:n,unitPrice:r,quantity:a,currency:o})},i,c)},trackRemoveFromCart:trackFormFocusOrChange:trackFormSubmission:trackSiteSearch:trackConsentWithdrawn:function(e,t,n,r,a,o,i){a={schema:"iglu:com.snowplowanalytics.snowplow/consent_document/jsonschema/1-0-0",data:f({id:t,version:n,name:r,description:a})};return h({schema:"iglu:com.snowplowanalytics.snowplow/consent_withdrawn/jsonschema/1-0-0",data:f({all:e})},a.data&&o?o.concat([a]):o,i)},trackConsentGranted:function(e,t,n,r,a,o,i){r={schema:"iglu:com.snowplowanalytics.snowplow/consent_document/jsonschema/1-0-0",data:f({id:e,version:t,name:n,description:r})};return h({schema:"iglu:com.snowplowanalytics.snowplow/consent_granted/jsonschema/1-0-0",data:f({expiry:a})},o?o.concat([r]):[r],i)},addGlobalContexts:function(e){o.addGlobalContexts(e)},clearGlobalContexts:function(){o.clearGlobalContexts()},removeGlobalContexts:function(e){o.removeGlobalContexts(e)}}}},{"./contexts":159,"./payload":161,uuid:163}],161:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var o=e("./base64");isNonEmptyJson=i,n.isJson=r,n.payloadBuilder=function(r){ar n={};return{add:a,addDict:addJson:function(e,t,n){i(n)&&(n=JSON.stringify(n),r?a(e,(e=n)&&o.base64encode(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")):a(t,n))},build:function(){return n}}}},{"./base64":158}],162:[function(e,o,t){!function(a){!function(){var e,t,n,r=a.crypto||a.msCrypto;r&&r.getRandomValues&&(e=new Uint8Array(16),t=,t||(n=new Array(16),t=,o.exports=t}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],163:[function(e,t,n){for(var i=e("./rng"),r=[],o={},a=0;a<256;a++)r[a]=(a+256).toString(16).substr(1),o[r[a]]=a;function l(e,t){t=t||0;return r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+"-"+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]+r[e[t++]]}var e=i(),f=[1|e[0],e[1],e[2],e[3],e[4],e[5]],d=16383&(e[6]<<8|e[7]),p=0,h=0;=c;e.v1=function(e,t,n){var r=t&&n||0,a=t||[],o=void 0!==(e=e||{}).clockseq?e.clockseq:d,i=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:h+1;if((n=i-p+(c-h)/1e4)<0&&void 0===e.clockseq&&(o=o+1&16383),1e4<=(c=(n<0||p<i)&&void 0===e.nsecs?0:c))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=i,d=o,c=(1e4*(268435455&(i+=122192928e5))+(h=c))%4294967296,a[r++]=c>>>24&255,a[r++]=c>>>16&255,a[r++]=c>>>8&255,a[r++]=255&c,i=i/4294967296*1e4&268435455,a[r++]=i>>>8&255,a[r++]=255&i,a[r++]=i>>>24&15|16,a[r++]=i>>>16&255,a[r++]=o>>>8|128,a[r++]=255&o;for(var s=e.node||f,u=0;u<6;u++)a[r+u]=s[u];return t||l(a)},e.v4=c,e.parse=e.unparse=l,t.exports=e},{"./rng":162}],164:[function(e,t,n){var s=e("lodash/isFunction"),u=e("./lib/helpers"),l=window;(void 0!==n?n:this).errorManager=function(i){function c(e,t,n,r,a,o){a=a&&a.stack?a.stack:null;i.trackSelfDescribingEvent({schema:"iglu:com.snowplowanalytics.snowplow/application_error/jsonschema/1-0-1",data:{programmingLanguage:"JAVASCRIPT",message:e||"JS Exception. Browser doesn't support ErrorEvent API",stackTrace:a,lineNumber:n,lineColumn:r,fileName:t}},o)}return{trackError:c,enableErrorTracking:function(r,a,o){u.addEventListener(l,"error",function(e){var t,n;(s(r)&&r(e)||null==r)&&(t=e,n=o,n=s(e=a)?n.concat(e(t)):n,c(t.message,t.filename,t.lineno,t.colno,t.error,n))},!0)}}}},{"./lib/helpers":170,"lodash/isFunction":133}],165:[function(e,t,n){var p=e("lodash/forEach"),h=e("lodash/filter"),m=e("lodash/find"),g=e("./lib/helpers");(void 0!==n?n:this).getFormTrackingManager=function(o,e,i){var c=["textarea","input","select"],s=e+"form",r=function(){return!0},a=function(){return!0},u=function(e){return e};nction d(a){return function(e){var t,n,r=e.target,e=(t=r,n=[],p(c,function(e){e=h(t.getElementsByTagName(e),;p(e,}),n);p(e,,o.trackFormSubmission(l(r),g.getCssClasses(r),e,i(g.resolveDynamicContexts(a,r,e)))}}return{configureFormTracking:addFormListeners:}},{"./lib/helpers":170,"lodash/filter":120,"lodash/find":121,"lodash/forEach":123}],166:[function(e,t,n){n.productionize=,{}],167:[function(e,t,n){!function(){var l=e("lodash/map"),f=e("lodash/isUndefined"),d=e("lodash/isFunction"),p=e("./lib/helpers");(void 0!==n?n:this).InQueueManager=function(r,a,o,e,i){var s={};unction t(){for(var e,t,n,r,a,o,i,c=0;c<arguments.length;c+=1)if(n=arguments[c],o=Array.prototype.shift.call(n),d(o))o.apply(s,n);else if(o=(a=[(i=(i=o).split(":"))[0],1<i.length?i[1].split(";"):[]])[1],"newTracker"!==(t=a[0]))if("setCollectorCf"!==t&&"setCollectorUrl"!==t||o&&0!==o.length)for(r=function(e){var t=[];if(e&&0!==e.length)for(var n=0;n<e.length;n++)s.hasOwnProperty(e[n])?t.push(s[e[n]]):p.warn('Warning: Tracker namespace "'+e[n]+'" not configured');else t=l(s);return 0===t.length&&p.warn("Warning: No tracker configured"),t}(o),e=0;e<r.length;e++)r[e][t].apply(r[e],n);else i=t,a=n[0],o=n[1],p.warn(i+" is deprecated. Set the collector when a new tracker instance using newTracker."),u(o=f(o)?"sp":o),s[o][i](a);else u(n[0],n[1],n[2])}for(var n=0;n<e.length;n++)t(e[n]);return{push:t}}}()},{"./lib/helpers":170,"lodash/isFunction":133,"lodash/isUndefined":141,"lodash/map":143}],168:[function(e,t,n){var r,a=e("./snowplow"),o=window;o.GlobalSnowplowNamespace&&0<o.GlobalSnowplowNamespace.length?(r=o.GlobalSnowplowNamespace.shift(),(e=o[r]).q=new a.Snowplow(e.q,r)):(o._snaq=o._snaq||[],o._snaq=new a.Snowplow(o._snaq,"_snaq"))},{"./snowplow":174}],169:[function(n,e,a){!function(){var i=n("lodash/isFunction"),c=n("lodash/isUndefined"),s=n("murmurhash").v3,e=n("jstimezonedetect").jstz.determine(),t=n("browser-cookie-lite"),u=void 0!==a?a:this,l=window,f=navigator,d=screen,r=document;u.hasSessionStorage=function(){try{return!!l.sessionStorage}catch(e){return!0}},u.hasLocalStorage=u.localStorageAccessible=u.hasCookies=function(e){e=e||"testcookie";return c(f.cookieEnabled)?(t.cookie(e,"1"),"1"===t.cookie(e)?"1":"0"):f.cookieEnabled?"1":"0"},u.detectSignature=u.detectTimezone=u.detectViewport=u.detectDocumentSize=u.detectBrowserFeatures=()},{"browser-cookie-lite":1,jstimezonedetect:2,"lodash/isFunction":133,"lodash/isUndefined":141,murmurhash:153}],170:[function(e,t,o){!function(){var n=e("lodash/isString"),r=e("lodash/isUndefined"),i=e("lodash/isObject"),a=e("lodash/map"),s=e("browser-cookie-lite"),u=void 0!==o?o:this;u.fixupTitle=function(e){var t;return n(e)||(e=e.text||"",(t=document.getElementsByTagName("title"))&&!r(t[0])&&(e=t[0].text)),e},u.getHostName=u.fixupDomain=function(e){var t=e.length;return e="*."===(e="."===e.charAt(--t)?e.slice(0,t):e).slice(0,2)?e.slice(1):e},u.getReferrer=function(e){var t="",n=u.fromQuerystring("referrer",window.location.href)||u.fromQuerystring("referer",window.location.href);if(n)return n;if(e)return e;try{t=window.top.document.referrer}catch(e){if(window.parent)try{t=window.parent.document.referrer}catch(e){t=""}}return t=""===t?document.referrer:t},u.addEventListener=u.fromQuerystring=u.resolveDynamicContexts=function(e){var t=Array.prototype.slice.call(arguments,1);return a(e,},u.warn=u.getCssClasses=u.getFilter=function(e,t){if(Array.isArray(e)||!i(e))return if(e.hasOwnProperty("filter"))return e.filter;var n=e.hasOwnProperty("whitelist"),r=e.whitelist||e.blacklist;Array.isArray(r)||(r=[r]);for(var a={},o=0;o<r.length;o++)a[r[o]]=!0;return t?function(e){return function(e,t){for(var n=u.getCssClasses(e),r=0;r<n.length;r++)if(t[n[r]])return!0;return!1}(e,a)===n}:,u.getTransform=u.decorateQuerystring=u.attemptGetLocalStorage=u.attemptWriteLocalStorage=u.findRootDomain=function(){for(var e="_sp_root_domain_test_",t=e+(new Date).getTime(),n="_test_value_"+(new Date).getTime(),r=window.location.hostname.split("."),a=r.length-1;0<=a;){var o=r.slice(a,r.length).join(".");if(s.cookie(t,n,0,"/",o),s.cookie(t)===n){u.deleteCookie(t,o);for(var i=u.getCookiesWithPrefix(e),c=0;c<i.length;c++)u.deleteCookie(i[c],o);return o}--a}return window.location.hostname},u.isValueInArray=u.deleteCookie=u.getCookiesWithPrefix=u.parseInt=function(e){e=parseInt(e);return isNaN(e)?void 0:e},u.parseFloat=()},{"browser-cookie-lite":1,"lodash/isObject":135,"lodash/isString":138,"lodash/isUndefined":141,"lodash/map":143}],171:[function(e,t,n){!function(){var o=e("./helpers");function i(e){var t,n;if(e=e,new RegExp("^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$").test(e))try{return t=document.body.children[0].children[0].children[0].children[0].children[0].children[0].innerHTML,n="You have reached the cached page for",t.slice(0,n.length)===n}catch(e){return}}(void 0!==n?n:this).fixupUrl=function(e,t,n){var r,a;return"translate.googleusercontent.com"===e?(""===n&&(n=t),r=t,a="u",r=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)").exec(r),t=o.fromQuerystring(a,r[1]),e=o.getHostName(t)):"cc.bingj.com"!==e&&"webcache.googleusercontent.com"!==e&&!i(e)||(t=document.links[0].href,e=o.getHostName(t)),[e,t,n]}}()},{"./helpers":170}],172:[function(e,t,n){var h=e("lodash/isUndefined"),m=e("./lib/helpers");(void 0!==n?n:this).getLinkTrackingManager=function(u,r,l){var a,o,f,i,c,s;function d(e,t){for(var n,r,a,o,i,c,s;null!==(n=e.parentNode)&&!h(n)&&"A"!==(r=e.tagName.toUpperCase())&&"AREA"!==r;)e=n;h(e.href)||(c=(i=e.hostname||m.getHostName(e.href)).toLowerCase(),s=e.href.replace(i,c),new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i").test(s)||(a=e.id,o=m.getCssClasses(e),i=e.target,c=f?e.innerHTML:null,s=unescape(s),u.trackLinkClick(s,a,o,i,c,l(m.resolveDynamicContexts(t,e)))))}eturn{configureLinkClickTracking:addClickListeners:function(){for(var e,t=document.links,n=0;n<t.length;n++)a(t[n])&&!t[n][r]&&(e=t[n],o?(m.addEventListener(e,"mouseup",p(i),!1),m.addEventListener(e,"mousedown",p(i),!1)):m.addEventListener(e,"click",p(i),!1),t[n][r]=!0)}}}},{"./lib/helpers":170,"lodash/isUndefined":141}],173:[function(e,t,n){!function(){var k=e("lodash/mapValues"),A=e("lodash/isString"),x=e("lodash/map"),C=e("./lib/detectors").localStorageAccessible,S=e("./lib/helpers");(void 0!==n?n:this).OutQueueManager=function(e,t,n,s,r,a,o,u,l){var f,d,p,h=!1,i=null===(r=r.toLowerCase?r.toLowerCase():r)||!0===r||"beacon"===r||"true"===r,m=Boolean(i&&navigator&&navigator.sendBeacon)&&i,g=("post"===r||m)&&!("get"===r),c=(g=g&&Boolean(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest))?a:"/i";if(o=C()&&s&&g&&o||1,f=["snowplowOutQueue",e,t,g?"post2":"get"].join("_"),s)try{p=JSON.parse(localStorage.getItem(f))}catch(e){}function v(e){e=k(e,;return{evt:e,bytes:JSON.stringify(e))}}function y(){for(;p.length&&"string"!=typeof p[0]&&"object"!==_typeof(p[0]);)p.shift();if(p.length<1)h=!1;else{if(!A(d))throw"No Snowplow collector configured, cannot track";h=!0;var e=p[0];if(g){var t=function(e){for(var t=0;t<e;t++)p.shift();s&&S.attemptWriteLocalStorage(f,JSON.stringify(p)),y()},n=_(d),r=setTimeout(5e3),a=p);n.onreadystatechange=var o,i=x(p.slice(0,a),;if(0<i.length){if(m){var c=new Blob([b(w(i))],{type:"application/json"});try{o=navigator.sendBeacon(d,c)}catch(e){o=!1}}!0===o&&t(a),m&&o||n.send(b(w(i)))}}else{i=new Image(1,1);i.onload=i.onerror=function(){h=!1},i.src=l?d+e.replace("?","?stm="+(new Date).getTime()+"&"):d+e}}}urn Array.isArray(p)||(p=[]),n.outQueues.push(p),g&&1<o&&n.bufferFlushers.push(,{enqueueRequest:function(e,t){if(d=t+c,g){t=v(e);if(t.bytes>=u)return S.warn("Event of size "+t.bytes+" is too long - the maximum size is "+u),void _(d).send(b(w([t.evt])));p.push(t)}else p.push(e));e=!1,s&&(e=S.attemptWriteLocalStorage(f,JSON.stringify(p))),h||e&&!(p.length>=o)||y()},executeQueue:y}}}()},{"./lib/detectors":169,"./lib/helpers":170,"lodash/isString":138,"lodash/map":143,"lodash/mapValues":144}],174:[{"./in_queue":167,"./lib/helpers":170,"./tracker":175,"lodash/filter":120,"lodash/forEach":123,uuid:163}],175:[function(e,t,n){!function(){var et=e("lodash/forEach"),tt=e("lodash/map"),nt=e("./lib/helpers"),rt=e("./lib/proxies"),at=e("browser-cookie-lite"),ot=e("./lib/detectors"),it=e("sha1"),ct=e("./links"),st=e("./forms"),ut=e("./errors"),lt=e("./out_queue"),ft=e("snowplow-tracker-core").trackerCore,dt=e("./guard").productionize,pt=e("uuid");(void 0!==n?n:this).Tracker=function(e,t,n,o,r){(r=r||{}).hasOwnProperty("post")?r.eventMethod=!0===r.post?"post":"get":r.eventMethod=r.eventMethod||"post",r.hasOwnProperty("useStm")||(r.useStm=!0);var i,p,a,h,c,s,u,l,f,m,d,g,v,y,_,b,w,k,A,x,C,S,j,T,O=Object.freeze({consent:"consent",contract:"contract",legalObligation:"legal_obligation",vitalInterests:"vital_interests",publicTask:"public_task",legitimateInterests:"legitimate_interests"}),I=ft(!0,function(e){!function(e){var t=Math.round((new Date).getTime()/1e3),n=Pe("id"),r=Pe("ses"),a=Ee("ses"),o=qe(),i=o[0],c=o[1],s=o[2],u=o[3],l=o[4],f=o[5],d=o[6];o=!!m&&!!at.cookie(m);!Z&&!o||"none"==ie?("0"===i?(A=d,a||"none"==ie||(u++,f=l,A=pt.v4()),de=u):(new Date).getTime()-le>1e3*ee&&(A=pt.v4(),de++),e.add("vp",ot.detectViewport()),e.add("ds",ot.detectDocumentSize()),e.add("vid",de),e.add("sid",A),e.add("duid",c),e.add("fp",se),e.add("uid",x),Ce(),e.add("refr",Oe(p||G)),e.add("url",Oe(h||U)),"none"!=ie&&(Ue(c,s,de,t,f,A),Be()),le=(new Date).getTime()):"localStorage"==ie?(nt.attemptWriteLocalStorage(n,""),nt.attemptWriteLocalStorage(r,"")):"cookie"!=ie&&"cookieAndLocalStorage"!=ie||(at.cookie(n,"",-1,$,Q),at.cookie(r,"",-1,$,Q))}(e),e,K)}),P=!1,E={},D={},L={},M=document,N=window,F=navigator,z=rt.fixupUrl(M.domain,N.location.href,nt.getReferrer()),B=nt.fixupDomain(z[0]),U=z[1],G=z[2],q=r.hasOwnProperty("platform")?r.platform:"web",R=r.hasOwnProperty("postPath")?r.postPath:"/com.snowplowanalytics.snowplow/tp2",H=r.hasOwnProperty("appId")?r.appId:"",V=M.title,K=r.hasOwnProperty("pageUnloadTimer")?r.pageUnloadTimer:500,J=!1,W=r.hasOwnProperty("cookieName")?r.cookieName:"_sp_",Q=r.hasOwnProperty("cookieDomain")?r.cookieDomain:null,$="/",Y=F.doNotTrack||F.msDoNotTrack||N.doNotTrack,Z=!!r.hasOwnProperty("respectDoNotTrack")&&(r.respectDoNotTrack&&("yes"===Y||"1"===Y)),X=r.hasOwnProperty("cookieLifetime")?r.cookieLifetime:63072e3,ee=r.hasOwnProperty("sessionCookieTimeout")?r.sessionCookieTimeout:1800,te=r.hasOwnProperty("userFingerprintSeed")?r.userFingerprintSeed:123412414,ne=M.characterSet||M.charset,re=!!r.hasOwnProperty("forceSecureTracker")&&!0===r.forceSecureTracker,ae=!(re||!r.hasOwnProperty("forceUnsecureTracker"))&&!0===r.forceUnsecureTracker,oe=!r.hasOwnProperty("useLocalStorage")||(nt.warn("argmap.useLocalStorage is deprecated. Use argmap.stateStorageStrategy instead."),r.useLocalStorage),Y=!r.hasOwnProperty("useCookies")||(nt.warn("argmap.useCookies is deprecated. Use argmap.stateStorageStrategy instead."),r.useCookies),ie=r.hasOwnProperty("stateStorageStrategy")?r.stateStorageStrategy:Y||oe?Y&&oe?"cookieAndLocalStorage":Y?"cookie":"localStorage":"none",oe=F.userLanguage||F.language,ce=ot.detectBrowserFeatures("cookie"==ie||"cookieAndLocalStorage"==ie,Pe("testcookie")),se=!1===r.userFingerprint?"":ot.detectSignature(te),Y=e+"_"+t,ue=!1,le=(new Date).getTime(),fe=it,de=1,pe=Te(),he=ct.getLinkTrackingManager(I,Y,He),me=st.getFormTrackingManager(I,Y,He),ge=ut.errorManager(I),ve=new lt.OutQueueManager(e,t,o,"localStorage"==ie||"cookieAndLocalStorage"==ie,r.eventMethod,R,r.bufferSize,r.maxPostBytes||4e4,r.useStm),ye=!1,_e=r.contexts||{},be=[],we=[],ke=!1,Ae=!1,xe={};for(S in r.hasOwnProperty("discoverRootDomain")&&r.discoverRootDomain&&(Q=nt.findRootDomain()),_e.gaCookies&&be.push((C={},et(["__utma","__utmb","__utmc","__utmv","__utmz","_ga"],,{schema:"iglu:com.google.analytics/cookies/jsonschema/1-0-0",data:C})),_e.geolocation&&We(),I.setBase64Encoding(!r.hasOwnProperty("encodeBase64")||r.encodeBase64),I.setTrackerVersion(n),I.setTrackerNamespace(t),I.setAppId(H),I.setPlatform(q),I.setTimezone(ot.detectTimezone()),I.addPayloadPair("lang",oe),I.addPayloadPair("cs",ne),ce)Object.prototype.hasOwnProperty.call(ce,S)&&("res"===S||"cd"===S||"cookie"===S?I.addPayloadPair(S,ce[S]):I.addPayloadPair("f_"+S,ce[S]));ion Ie(e){e=new RegExp("^([a-z]+):").exec(e);return e?e[1]:null}unction Ee(e){e=Pe(e);return"localStorage"==ie?nt.attemptGetLocalStorage(e):"cookie"==ie||"cookieAndLocalStorage"==ie?at.cookie(e):void 0}nction Me(){!function(){var e=Ne(),t=e[0];t<v?v=t:y<t&&(y=t);e=e[1];e<_?_=e:b<e&&(b=e)}(),Le()}unction Fe(){var e=Ne(),t=e[0];y=v=t;e=e[1];b=_=e}on He(e){var t,n,r,a=be.concat(e||[]);if(_e.webPage&&a.push({schema:"iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",data:{id:Ve()}}),!_e.performanceTiming||(e=function(){var e=["navigationStart","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd","unloadEventStart","unloadEventEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","msFirstPaint","chromeFirstPaint","requestEnd","proxyStart","proxyEnd"],t=N.performance||N.mozPerformance||N.msPerformance||N.webkitPerformance;if(t){var n,r={};for(n in t.timing)nt.isValueInArray(n,e)&&null!==t.timing[n]&&(r[n]=t.timing[n]);return delete r.requestEnd,{schema:"iglu:org.w3/PerformanceTiming/jsonschema/1-0-0",data:r}}}())&&a.push(e),N.optimizely){if(_e.optimizelySummary&&(t=tt(),function(e){return{schema:"iglu:com.optimizely.snowplow/optimizely_summary/jsonschema/1-0-0",data:e}}),et(t,function(e){a.push(e)})),_e.optimizelyXSummary&&(t=tt(function(){var a=Je("state"),e=a.getActiveExperimentIds(),o=(Je("data","experiments"),Je("visitor")),t=[];for(S=0;S<e.length;S++){var n=e[S],r=a.getExperimentStates()[n];r&&!1===r.isInExperimentHoldback&&t.push(n)}return tt(t,}(),,et(t,function(e){a.push(e)})),_e.optimizelyCampaigns)for(var o=function(){var e=Je("state").getCampaignStates({isActive:!0});if(e){var t,n,r,a=[];for(t in e)e.hasOwnProperty(t)&&((n={}).campaignId=t,(r=e[t].experiment)&&"id"in r&&(n.experienceId=r.id),a.push({schema:"iglu:com.optimizely/experiment/jsonschema/1-0-0",data:n}));return a}return[]}(),i=0;i<o.length;i++)a.push(o[i]);if(_e.optimizelyExperiments)for(var c=),i=0;i<c.length;i++)a.push(c[i]);if(_e.optimizelyStates)for(var s=function(){var e=[],t=Ke("experiments");if(t)for(var n in t)t.hasOwnProperty(n)&&e.push(n);var r=Ke("state");if(r){for(var a=[],o=r.activeExperiments||[],i=0;i<e.length;i++){var c=e[i],s={};s.experimentId=c,s.isActive=nt.isValueInArray(e[i],o);var u=r.variationMap||{};s.variationIndex=u[c];u=r.variationNamesMap||{};s.variationName=u[c];u=r.variationIdsMap||{};u[c]&&1===u[c].length&&(s.variationId=u[c][0]),a.push({schema:"iglu:com.optimizely/state/jsonschema/1-0-0",data:s})}return a}return[]}(),i=0;i<s.length;i++)a.push(s[i]);if(_e.optimizelyVariations)for(var u=),i=0;i<u.length;i++)a.push(u[i]);if(!_e.optimizelyVisitor||(n=function(){var e=Ke("visitor");if(e){var t={};t.browser=e.browser,t.browserVersion=e.browserVersion,t.device=e.device,t.deviceType=e.deviceType,t.ip=e.ip;var n=e.platform||{};t.platformId=n.id,t.platformVersion=n.version;n=e.location||{};return t.locationCity=n.city,t.locationRegion=n.region,t.locationCountry=n.country,t.mobile=e.mobile,t.mobileId=e.mobileId,t.referrer=e.referrer,t.os=e.os,{schema:"iglu:com.optimizely/visitor/jsonschema/1-0-0",data:t}}}())&&a.push(n),_e.optimizelyAudiences)for(var l=function(){var e=Ke("visitor","audiences");if(e){var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&(n={id:t,isMember:e[t]},r.push({schema:"iglu:com.optimizely/visitor_audience/jsonschema/1-0-0",data:n}));return r}return[]}(),i=0;i<l.length;i++)a.push(l[i]);if(_e.optimizelyDimensions)for(var f=function(){var e=Ke("visitor","dimensions");if(e){var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&(n={id:t,value:e[t]},r.push({schema:"iglu:com.optimizely/visitor_dimension/jsonschema/1-0-0",data:n}));return r}return[]}(),i=0;i<f.length;i++)a.push(f[i])}return!_e.augurIdentityLite||(n=function(){var e=N.augur;if(e){var t={consumer:{},device:{}},n=e.consumer||{};t.consumer.UUID=n.UID;e=e.device||{};t.device.ID=e.ID,t.device.isBot=e.isBot,t.device.isProxied=e.isProxied,t.device.isTor=e.isTor;e=e.fingerprint||{};return t.device.isIncognito=e.browserHasIncognitoEnabled,{schema:"iglu:io.augur.snowplow/identity_lite/jsonschema/1-0-0",data:t}}}())&&a.push(n),!_e.parrable||(r=function(){var e=window._hawk;if(e){var t={encryptedId:null,optout:null};t.encryptedId=e.browserid;e=new RegExp("(?:^|;)\\s?"+"_parrable_hawk_optout".replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")+"=(.*?)(?:;|$)","i"),e=document.cookie.match(e);return t.optout=e&&decodeURIComponent(e[1])?e&&decodeURIComponent(e[1]):"false",{schema:"iglu:com.parrable/encrypted_payload/jsonschema/1-0-0",data:t}}}())&&a.push(r),_e.gdprBasis&&xe.gdprBasis&&((r=))&&a.push(r)),a}ion $e(e,t,n,r){Ce(),Ae&&(J&&i&&clearInterval(i),ke&&null!=o.pageViewId||(o.pageViewId=pt.v4())),Ae=!0,V=M.title,c=e;e=nt.fixupTitle(c||V);I.trackPageView(Oe(h||U),e,Oe(p||G),He(Qe(t,n)),r);var a,r=new Date;J&&(g=r.getTime(),i=setInterval(u)),J&&!ue&&(ue=!0,(a={update:).update(),r="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",Object.prototype.hasOwnProperty.call(a,"hasSupport")?nt.addEventListener(M,r,Le,{passive:!0}):nt.addEventListener(M,r,Le),Fe(),nt.addEventListener(M,"click",Le),nt.addEventListener(M,"mouseup",Le),nt.addEventListener(M,"mousedown",Le),nt.addEventListener(M,"mousemove",Le),nt.addEventListener(N,"scroll",Me),nt.addEventListener(M,"keypress",Le),nt.addEventListener(M,"keydown",Le),nt.addEventListener(M,"keyup",Le),nt.addEventListener(N,"resize",Le),nt.addEventListener(N,"focus",Le),nt.addEventListener(N,"blur",Le))}urn De(),j="none"!=ie&&!!Ee("ses"),(T=qe())[1]?k=T[1]:(k=pt.v4(),T[1]=k),A=T[6],j||(T[3]++,A=pt.v4(),T[6]=A,T[5]=T[4]),"none"!=ie&&(Be(),T[4]=Math.round((new Date).getTime()/1e3),T.shift(),Ue.apply(null,T)),r.crossDomainLinker&&je(r.crossDomainLinker),E.getDomainSessionIndex=function(){return de},E.getPageViewId=Ve,E.newSession=function(){var e=Math.round((new Date).getTime()/1e3),t=(c=(Ee("ses"),qe()))[0],n=c[1],r=c[2],a=c[3],o=c[4],i=c[5],c=c[6];"0"===t?(A=c,"none"!=ie&&(a++,i=o,A=pt.v4()),de=a,Be()):(A=pt.v4(),de++),"none"!=ie&&(Ue(n,r,de,e,i,A),Be()),le=(new Date).getTime()},E.getCookieName=Pe,E.getUserId=function(){return x},E.getDomainUserId=E.getDomainUserInfo=qe,E.getUserFingerprint=E.setAppId=function(e){nt.warn('setAppId is deprecated. Instead add an "appId" field to the argmap argument of newTracker.'),I.setAppId(e)},E.setReferrerUrl=function(e){p=e},E.setCustomUrl=function(e){var t,n;Ce(),t=U,h=Ie(n=e)?n:"/"===n.slice(0,1)?Ie(t)+"://"+nt.getHostName(t)+n:(t=(e=(t=0<=(e=(t=Oe(t)).indexOf("?"))?t.slice(0,e):t).lastIndexOf("/"))!==t.length-1?t.slice(0,e+1):t)+n},E.setDocumentTitle=E.discardHashTag=function(e){l=e},E.discardBrace=function(e){f=e},E.setCookieNamePrefix=function(e){nt.warn('setCookieNamePrefix is deprecated. Instead add a "cookieName" field to the argmap argument of newTracker.'),W=e},E.setCookieDomain=E.setCookiePath=E.setVisitorCookieTimeout=function(e){X=e},E.setSessionCookieTimeout=E.setUserFingerprintSeed=E.enableUserFingerprint=E.respectDoNotTrack=E.crossDomainLinker=function(e){je(e)},E.enableLinkClickTracking=E.refreshLinkClickTracking=E.enableActivityTracking=E.updatePageActivity=E.enableFormTracking=E.killFrame=E.redirectFile=E.setOptOutCookie=function(e){m=e},E.setCountPreRendered=function(e){d=e},E.setUserId=E.identifyUser=E.setUserIdFromLocation=function(e){Ce(),x=nt.fromQuerystring(e,U)},E.setUserIdFromReferrer=E.setUserIdFromCookie=E.setCollectorCf=E.setCollectorUrl=E.setPlatform=function(e){nt.warn('setPlatform is deprecated. Instead add a "platform" field to the argmap argument of newTracker.'),I.setPlatform(e)},E.encodeBase64=E.flushBuffer=function(){ve.executeQueue()},E.enableGeolocationContext=We,E.trackPageView=E.trackStructEvent=function(e,t,n,r,a,o,i){Ze(function(){I.trackStructEvent(e,t,n,r,a,He(o),i)})},E.trackSelfDescribingEvent=function(e,t,n){Ze(function(){I.trackSelfDescribingEvent(e,He(t),n)})},E.trackUnstructEvent=E.addTrans=E.addItem=E.trackTrans=function(){Ze(function(){var e,t,n,r,a,o,i,c,s,u,l;e=pe.transaction.orderId,t=pe.transaction.affiliation,n=pe.transaction.total,r=pe.transaction.tax,a=pe.transaction.shipping,o=pe.transaction.city,i=pe.transaction.state,c=pe.transaction.country,s=pe.transaction.currency,u=pe.transaction.context,l=pe.transaction.tstamp,I.trackEcommerceTransaction(e,t,n,r,a,o,i,c,s,He(u),l);for(var f,d,p,h,m,g,v,y,_=0;_<pe.items.length;_++){var b=pe.items[_];f=b.orderId,d=b.sku,p=b.name,h=b.category,m=b.price,g=b.quantity,v=b.currency,y=b.context,b=b.tstamp,I.trackEcommerceTransactionItem(f,d,p,h,m,g,v,He(y),b)}pe=Te()})},E.trackLinkClick=function(e,t,n,r,a,o,i){Ze(function(){I.trackLinkClick(e,t,n,r,a,He(o),i)})},E.trackAdImpression=E.trackAdClick=function(e,t,n,r,a,o,i,c,s,u,l){Ze(function(){I.trackAdClick(e,t,n,r,a,o,i,c,s,He(u),l)})},E.trackAdConversion=E.trackSocialInteraction=E.trackAddToCart=function(e,t,n,r,a,o,i,c){Ze(function(){I.trackAddToCart(e,t,n,r,a,o,He(i),c)})},E.trackRemoveFromCart=E.trackSiteSearch=E.trackTiming=E.trackConsentWithdrawn=function(e,t,n,r,a,o,i){Ze(function(){I.trackConsentWithdrawn(e,t,n,r,a,He(o),i)})},E.trackConsentGranted=E.trackEnhancedEcommerceAction=E.addEnhancedEcommerceActionContext=E.addEnhancedEcommerceImpressionContext=E.addEnhancedEcommerceProductContext=E.addEnhancedEcommercePromoContext=E.enableGdprContext=E.addGlobalContexts=function(e){I.addGlobalContexts(e)},E.removeGlobalContexts=E.clearGlobalContexts=E.enableErrorTracking=E.trackError=E.preservePageViewId=E.setDebug=D=dt(E),Xe(),L}}()},{"./errors":164,"./forms":165,"./guard":166,"./lib/detectors":169,"./lib/helpers":170,"./lib/proxies":171,"./links":172,"./out_queue":173,"browser-cookie-lite":1,"lodash/forEach":123,"lodash/map":143,sha1:156,"snowplow-tracker-core":157,uuid:163}]},{},[168]);