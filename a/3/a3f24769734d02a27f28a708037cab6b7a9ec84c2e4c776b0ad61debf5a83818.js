(self._cf=self._cf||[]).push([[98254],{967275:function(e,t){!function(){"use strict";n c(){}n h(e,t){var n,r=0,o={};n=(t=t||{}).maxLoadTime||5e3;var i=a=function(t,a,u){var c,s,l,f,d=function(){for(var e=f.passed,t=e.length;t--;)e[t]();f.status=2,f.passed=[],f.failed=[]},m=g=p=function t(){g((,t)};if(t=sn._addCacheSuffix(t),o[t]?f=o[t]:(f={passed:[],failed:[]},o[t]=f),a&&f.passed.push(a),u&&f.failed.push(u),1!==f.status){if(2===f.status)return void d();if(3===f.status)return void m();if(f.status=1,(c=e.createElement("link")).rel="stylesheet",c.type="text/css",c.id="u"+r++,c.async=!1,c.defer=!1,l=(new Date).getTime(),"onload"in c&&!function(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)}())c.onload=p,c.onerror=m;else{if(navigator.userAgent.indexOf("Firefox")>0)return(s=e.createElement("style")).textContent='@import "'+t+'"',function e(){g((,e)}(),void i(s);p()}i(c),c.href=t}},u=c=return{load:a,loadAll:function(e,t,n){Oo.par(Re.map(e,u)).get((function(e){var r=Re.partition(e,(function(e){return e.isValue()}));r.fail.length>0?n(r.fail.map(c)):t(r.pass.map(c))}))}}}nction y(e,t){var n,r,o,i,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,u=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,l={},f="\ufeff";for(e=e||{},t&&(o=t.getValidStyles(),i=t.getInvalidStyles()),r="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<r.length;n++)l[r[n]]=f+n,l[f+n]=r[n];return{toHex:function(e){return e.replace(a,Ti)},parse:function(t){var r,o,i,d,m={},g=e.url_converter,p=e.url_converter_scope||this,h=function(e,t,r){var o,i,a,u;if((o=m[e+"-top"+t])&&(i=m[e+"-right"+t])&&(a=m[e+"-bottom"+t])&&(u=m[e+"-left"+t])){var c=[o,i,a,u];for(n=c.length-1;n--&&c[n]===c[n+1];);n>-1&&r||(m[e+t]=-1===n?c[0]:c.join(" "),delete m[e+"-top"+t],delete m[e+"-right"+t],delete m[e+"-bottom"+t],delete m[e+"-left"+t])}},v=b=y=C=w=function(e){return e.replace(/\\[0-9a-f]+/gi,C)},x=if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,b)}));r=c.exec(t);)if(c.lastIndex=r.index+r[0].length,o=r[1].replace(s,"").toLowerCase(),i=r[2].replace(s,""),o&&i){if(o=w(o),i=w(i),-1!==o.indexOf(f)||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(i)))continue;"font-weight"===o&&"700"===i?i="bold":"color"!==o&&"background-color"!==o||(i=i.toLowerCase()),i=(i=i.replace(a,Ti)).replace(u,x),m[o]=d?y(i,!0):i}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),function(e,t,n,r){v(t)&&v(n)&&v(r)&&(m[e]=m[t]+" "+m[n]+" "+m[r],delete m[t],delete m[n],delete m[r])}("border","border-width","border-style","border-color"),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:function(e,t){var n,r,a="",u=function(t){var n,r,i,u;if(n=o[t])for(r=0,i=n.length;r<i;r++)t=n[r],(u=e[t])&&(a+=(a.length>0?" ":"")+t+": "+u+";")},c=function(e,t){var n;return!((n=i["*"])&&n[e]||(n=i[t],n&&n[e]))};if(t&&o)u("*"),u(t);else for(n in e)!(r=e[n])||i&&!c(n,t)||(a+=(a.length>0?" ":"")+n+": "+r+";");return a}}}function C(e,t){var n=this;void 0===t&&(t={});var r,o={},i=window,a={},u=0,c=h(e),s=[],l=t.schema?t.schema:b({}),f=y({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new Ze(t.proxy):Ze.Event,m=l.getBlockElements(),g=Rn.overrideDefaults((),p=w=x=S=N=E=T=k=function(e,t,n){var r=w(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(t=ze.ie&&ze.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},R=A=D=function(e,t,n,r){var o,i=[],a=p(e);for(r=void 0===r,n=n||("BODY"!==E().nodeName?E().parentNode:null),sn.is(t,"string")&&(o=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return A(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},B=P=O=_=I=L=M=pi.decode,F=pi.encodeAllRaw,z=q=H=U=function(){return e.createRange()},j=W={doc:e,settings:t,win:i,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:c,boundEvents:s,styles:f,schema:l,events:d,isBlock:$:g,$$:w,root:null,clone:getRoot:E,getViewPort:getRect:getSize:R,getParent:getParents:D,get:p,getNext:function(e,t){return B(e,t,"nextSibling")},getPrev:function(e,t){return B(e,t,"previousSibling")},select:is:A,add:I,create:L,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(o+=" "+r+'="'+F(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:remove:z,setStyle:getStyle:k,setStyles:removeAllAttribs:setAttrib:N,setAttribs:O,getAttrib:x,getPos:T,parseStyle:function(e){return f.parse(e)},serializeStyle:function(e,t){return f.serialize(e,t)},addStyle:loadCSS:function(t){var n;return W!==C.DOM&&e===document?void C.DOM.loadCSS(t):(t||(t=""),n=e.getElementsByTagName("head")[0],void ki(t.split(","),())},addClass:removeClass:hasClass:toggleClass:q,show:function(e){w(e).show()},hide:isHidden:uniqueId:setHTML:_,getOuterHTML:setOuterHTML:decode:M,encode:F,insertAfter:replace:H,rename:findCommonAncestor:toHex:function(e){return f.toHex(sn.trim(e))},run:P,getAttribs:S,isEmpty:createRng:U,nodeIndex:_i,split:bind:function n(r,o,a,u){if(sn.isArray(r)){for(var c=r.length;c--;)r[c]=n(r[c],o,a,u);return r}return!t.collect||r!==e&&r!==i||s.push([r,o,a,u]),d.bind(r,o,a,u||W)},unbind:function t(n,r,o){var a;if(sn.isArray(n)){for(a=n.length;a--;)n[a]=t(n[a],r,o);return n}if(s&&(n===e||n===i))for(a=s.length;a--;){var u=s[a];n!==u[0]||r&&r!==u[1]||o&&o!==u[2]||d.unbind(u[0],u[1],u[2])}return d.unbind(n,r,o)},fire:getContentEditable:j,getContentEditableParent:destroy:isChildOf:dumpRng:;return r=Pi(f,t,(function(){return W})),W}function w(){var e=this,t=[],n={},r={},o=[],i=a=u=function(e,t,n){var r=i(name);Hi(r,(),t&&(n?t.call(n):t.call(qi))},c=function(e,t,o,i,a){if(!n[e]){var c="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=w.baseURL+"/"+c),n[e]=c.substring(0,c.lastIndexOf("/")),r[e]?u(t,o,i):qi.ScriptLoader.add(c,(function(){return u(t,o,i)}),i,a)}};return{items:t,urls:n,lookup:r,_listeners:o,get:dependencies:i,requireLangPack:add:function(e,n,i){t.push(n),r[e]={instance:n,dependencies:i};var a=Re.partition(o,(function(t){return t.name===e}));return o=a.fail,Hi(a.pass,(function(e){e.callback()})),n},remove:function(e){delete n[e],delete r[e]},createUrl:a,addComponents:load:c,waitFor:}function x(e,t,n){var r=return{container:ka.constant(e),offset:ka.constant(t),toRange:getClientRects:r,isVisible:isAtStart:isAtEnd:isEqual:getNode:}function S(e){var t,n,r,o,i,a=[];return t=(e=e||{}).indent,n=ul(e.indent_before||""),r=ul(e.indent_after||""),o=pi.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="html"===e.element_format,{start:end:text:cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:pi:doctype:reset:getContent:}function N(e,t){void 0===t&&(t=b());var n=S(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(r){var o,i;i=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:,n.reset();var a=function e(r){var a,u,c,s,l,f,d,m,g,p=o[r.type];if(p)p(r);else{if(a=r.name,u=r.shortEnded,c=r.attributes,i&&c&&c.length>1&&((f=[]).map={},g=t.getElementRule(r.name))){for(d=0,m=g.attributesOrder.length;d<m;d++)(s=g.attributesOrder[d])in c.map&&(l=c.map[s],f.map[s]=l,f.push({name:s,value:l}));for(d=0,m=c.length;d<m;d++)(s=c[d].name)in f.map||(l=c.map[s],f.map[s]=l,f.push({name:s,value:l}));c=f}if(n.start(r.name,c,u),!u){if(r=r.firstChild)do{e(r)}while(r=r.next);n.end(a)}}};return 1!==r.type||e.inner?o[11](r):a(r),n.getContent()}}}function E(e,t,n,r,o){return e(n,r)?de.some(n):ge.isFunction(o)&&o(n)?de.none():t(n,r,o)}function T(e){var t,n,r,o,i={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",();var u=c=s=function(t,n,r){t=t.toLowerCase(),i.value[t]=function(){return n.call(r||e)}};ng(this,{execCommand:function(t,n,r,o){var a,u,c=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?Zm.restore(e):e.focus(),(o=e.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(u=t.toLowerCase(),a=i.exec[u])return a(u,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(tg(e.plugins,(function(o){if(o.execCommand&&o.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),c=!0,!1})),c)return c;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{c=e.getDoc().execCommand(t,n,r)}catch(l){}return!!c&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:u,queryCommandValue:queryCommandSupported:addCommands:c,addCommand:addQueryStateHandler:addQueryValueHandler:s,hasCustomCommand:);var f=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},d=function(e){return r.match(e)},m=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},g=function(e){o=n.getBookmark(e)},p=function(){n.moveToBookmark(o)};c({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":},unlin},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone},"InsertUnorderedList,InsertOrderedList},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){m(e)},"ForeColor,HiliteColor":function(e,t,n){m(e,n)},FontName:function(t,n,r){dm(e,r)},FontSiz},RemoveFormat:function(e){r.remove(e)},mceBlockQuot},FormatBloc},mceCleanu},mceRemoveNod},mceSelectNodeDept},mceSelectNode:function(e,t,r){n.select(r)},mceInsertConten},mceInsertRawHTML:function(t,r,o){var i=e.getContent();n.setContent("tiny_mce_marker"),e.setContent(i.replace(/tiny_mce_marker/g,(function(){return o})))},mceToggleForma},mceSetConten},"Indent,Outdent":function(t){eg(e,t)},mceRepaint:function(){},InsertHorizontalRul},mceToggleVisualAi},mceReplaceConten},mceInsertLin},selectAl},delete:function(){am.deleteCommand(e)},forwardDelete:function(){am.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBrea}}),c({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var o="align"+e.substring(7),i=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),a=rg(i}));return-1!==og(a,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return d(e)},mceBlockQuote:function(){return d("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return u("InsertUnorderedList")||u("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList}},"state"),c({Undo:function(){e.undoManager.undo()},Red}}),s("FontName",(function(){return mm(e)}),this),s("FontSize",(function(){return pm(e)}),this)}function k(e){var t={},n=[],},},},};e.on("keyup keypress keydown",(function(e)}(e)&}(e)||e.isDefaultPrevented()||(yg(t})),i(e,n[0])&&(1===n.length&&"keydown"===e.type&&a(n[0]),n.shift()))})),this.ad},this.remov}}function R(e){var t=[],n=function(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl(}()},},o=function(e){t.push(e)},i=function(e){Re.findIndex(t,(function(t){return t===e})).each((function(e){t.splice(e,1)}))},a=function(a){if(!e.removed&&qg.isEditorAttachedToDom(e))return Re.find(t,(function(e){return function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)}(n().getArgs(e),a)})).getOrThunk((function(){e.editorManager.setActive(e);var t=n().open(a}));return o(t),r(),t}))};return function(e){e.on("SkinLoaded"})),e.on("ResizeEditor ResizeWindow",(function(){We.requestAnimationFrame(r)})),e.on("remove",(function(){Re.each(t,(function(e){n().close(e)}))}))}(e),{open:a,clos},getNotifications:function(){return t}}}function A(e){var t=[],n=function(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():function(){var };return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}()},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},o=function(t){e.fire("OpenWindow",{win:t})},},a=function(n){Re.findIndex(t,(function(e){return e===n})).each((function(r){t.splice(r,1}(n),0===t.length&&e.focus()}))},};return e.on("remove",(function(){Re.each(t.slice(0)}))})),{windows:t,open:function(t,r){e.editorManager.setActive(e),Zm.store(e);var o=n().open(t,r,a);return i(o),o},alert:function(e,t,o){var u=n().alert(e,r(o||this,t),a);i(u)},confir},clos},getParam},setParam},getWindows:function(){return t}}function B(e,t){var n={},r=function(e,n,r,o){var i,a;(i=new D).open("POST",t.url),i.withCredentials=t.credentials,i.upload.onprogres},i.onerro},i.onload=function(){var e;return i.status<200||i.status>=300?void r("HTTP Error: "+i.status):(e=JSON.parse(i.responseText))&&"string"==typeof e.location?void }(t.basePath,e.location)):void r("Invalid JSON: "+i.responseText)},(a=new FormData).append("file",e.blob(),e.filename()),i.send(a)},},},},},c=function(n,r){return n=sn.grep(n})),qe.all(sn.map(n,(function(n){return e.isPending(n.blobUri())?u(n):function(t,n,r){return e.markPending(t.blobUri()),new qe((function(u){var c,s,l=function(){};try{var };},n(t})}),s)}catch(g){u(i(t,g.message))}}))}(n,t.handler,r)})))};return t=sn.extend({credentials:!1,handler:r},t),{upload:function(e,n){return!t.url&&function(e){return e===r}(t.handler)?new qe})):c(e,n)}}}function P(e,t){return new(Pe.getOrDie("Blob"))(e,t)}function O(){return new(Pe.getOrDie("FileReader"))}function _(e){return new(Pe.getOrDie("Uint8Array"))(e)}function I(e){var t,n,r=function(){var e=[],t=ka.constant,n=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},r=function(e){var r,o;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return r=e.id||op.uuid("blobid"),o=e.name||r,{id:t(r),name:t(o),filename:t(o+"."+n(e.blob.type)),blob:t(e.blob),base64:t(e.base64),blobUri:t(e.blobUri||_e.createObjectURL(e.blob)),uri:t(e.uri)}},o=function(e){return i((function(t){return t.id()===e}))},};return{creat},ad},get:o,getByUr},findFirst:i,removeByUr},destro}}}(),o=e.settings,}(),},},c=function(e,t,n){return e=u(e,'src="'+t+'"','src="'+n+'"'),u(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},s=function(t,n){on.each(e.undoManager.data}))},},},d=function(n){return t||(t=B(i,{url:o.images_upload_url,basePath:o.images_upload_base_path,credentials:o.images_upload_credentials,handler:o.images_upload_handler})),p().then(a((function(r){var o;return o=on.map(r,(function(e){return e.blobInfo})),t.upload(o,l).then(a((function(t){var o=on.map(t,(function(t,n){var o=r[n].image;return t.status&&!1!==e.settings.images_replace_blob_uris?f(o,t.url):t.error&&Vg.uploadError(e,t.error),{element:o,status:t.status}}));return n&&n(o),o})))})))},m=function(e){if(!1!==o.automatic_uploads)return d(e)},},p=function(){return n||(n=function(e,t){var n={};return{findAll:function(r,o){var i;o||(o=ka.constant(!0)),i=on.filter(np(r),(function(t){var n=t.src;return!!ze.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===ze.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n):0===n.indexOf("data:")&&o(t))}));var a=on.map(i,(function(e){if(n[e.src])return new qe}));var r=new qe})).then})).catch}));return n[e.src]=r,r}));return qe.all(a)}}}(i,r)),n.findAll(e.getBody(),g).then(a((function(t){return t=on.filter(t})),on.each(t})),t})))},h=function(t){return t.replace(/src="(blob:[^"]+)"/g}))};return e.on("setContent"})),e.on("RawSaveContent"})),e.on("getContent"})),e.on("PostRender"})),{blobCache:r,uploadImages:d,uploadImagesAuto:m,scanForImages:p,destro}}}function L(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",(function(n){var r,o;o={startContainer:(r=e.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&hm.isEq(o,t)||e.fire("SelectionChange"),t=o})),e.on("contextmenu",(function(){e.fire("SelectionChange")})),e.on("SelectionChange",(function(){var t=e.selection.getStart(!0);!t||!ze.range&&e.selection.isCollapsed()||!function(t){var r,o;if((o=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(r=o.length;r>=0&&o[r]===n[r];r--);if(-1===r)return n=o,!0}return n=o,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("MouseUp",(function(t){t.isDefaultPrevented()||("IMG"===e.selection.getNode().nodeName?We.setEditorTimeout(e,(function(){e.nodeChanged()})):e.nodeChanged())})),this.nodeChanged=function(t){var n,r,o,i=e.selection;e.initialized&&i&&!e.settings.disable_nodechange&&!e.readonly&&(o=e.getBody(),(n=i.getStart(!0)||o).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,o)||(n=o),r=[],e.dom.getParent(n})),(t=t||{}).element=n,t.parents=r,e.fire("NodeChange",t))}}function M(e,t){void 0===t&&(t=b());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0),Wp("comment cdata text start end pi doctype".split(" ")}));var r=e.comment?e.comment:n,o=e.cdata?e.cdata:n,i=e.text?e.text:n,a=e.start?e.start:n,u=e.end?e.end:n,c=e.pi?e.pi:n,s=e.doctype?e.doctype:n;return{parse:function(n){var l,d,m,g,p,h,v,b,y,C,w,x,S,N,E,T,k,R,A,D,B,P,O,_,I,L,M,F,z,q=0,H=[],U=0,j=pi.decode,W=sn.makeMap("src,href,data,background,formaction,poster"),V=/((java|vb)script|mhtml):/i,$=/^data:/i,},X=function(t,n,r,o,i){var a,u;if(r=(n=n.toLowerCase())in w?n:j(r||o||i||""),S&&!b&&!1===Vp(n)){if(!(a=R[n])&&A){for(u=A.length;u--&&!(a=A[u]).pattern.test(n););-1===u&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(W[n]&&!e.allow_script_urls){var c=r.replace(/[\s\u0000-\u001F]+/g,"");try{c=decodeURIComponent(c)}catch(f){c=unescape(c)}if(V.test(c))return;if(!e.allow_html_data_urls&&$.test(c)&&!/^data:image\//i.test(c))return}b&&(n in W||0===n.indexOf("on"))||(g.map[n]=r,g.push({name:n,value:r}))};for(I=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),L=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,C=t.getShortEndedElements(),_=e.self_closing_elements||t.getSelfClosingElements(),w=t.getBoolAttrs(),S=e.validate,y=e.remove_internals,z=e.fix_self_closing,M=t.getSpecialElements(),O=n+">";l=I.exec(O);){if(q<l.index&&i(j(n.substr(q,l.index-q))),d=l[6])":"===(d=d.toLowerCase()).charAt(0)&&(d=d.substr(1)),K(d);else if(d=l[7]){if(l.index+l[0].length>n.length){i(j(n.substr(l.index))),q=l.index+l[0].length;continue}if(":"===(d=d.toLowerCase()).charAt(0)&&(d=d.substr(1)),x=d in C,z&&_[d]&&H.length>0&&H[H.length-1].name===d&&K(d),!S||(N=t.getElementRule(d))){if(E=!0,S&&(R=N.attributes,A=N.attributePatterns),(k=l[8])?((b=-1!==k.indexOf("data-mce-type"))&&y&&(E=!1),(g=[]).map={},k.replace(L,X)):(g=[]).map={},S&&!b){if(D=N.attributesRequired,B=N.attributesDefault,P=N.attributesForced,N.removeEmptyAttrs&&!g.length&&(E=!1),P)for(p=P.length;p--;)v=(T=P[p]).name,"{$uid}"===(F=T.value)&&(F="mce_"+U++),g.map[v]=F,g.push({name:v,value:F});if(B)for(p=B.length;p--;)(v=(T=B[p]).name)in g.map||("{$uid}"===(F=T.value)&&(F="mce_"+U++),g.map[v]=F,g.push({name:v,value:F}));if(D){for(p=D.length;p--&&!(D[p]in g.map););-1===p&&(E=!1)}if(T=g.map["data-mce-bogus"]){if("all"===T){q=Kp(t,n,I.lastIndex),I.lastIndex=q;continue}E=!1}}E&&a(d,g,x)}else E=!1;if(m=M[d]){m.lastIndex=q=l.index+l[0].length,(l=m.exec(n))?(E&&(h=n.substr(q,l.index-q)),q=l.index+l[0].length):(h=n.substr(q),q=n.length),E&&(h.length>0&&i(h,!0),u(d)),I.lastIndex=q;continue}x||(k&&k.indexOf("/")===k.length-1?E&&u(d):H.push({name:d,valid:E}))}else(d=l[1])?(">"===d.charAt(0)&&(d=" "+d),e.allow_conditional_comments||"[if"!==d.substr(0,3).toLowerCase()||(d=" "+d),r(d)):(d=l[2])?o($p(d)):(d=l[3])?s(d):(d=l[4])&&c(d,l[5]);q=l.index+l[0].length}for(q<n.length&&i(j(n.substr(q))),p=H.length-1;p>=0;p--)(d=H[p]).valid&&u(d.name)}}}function F(e){var t,n,r=this,o=0,i=[],a=0,},},s=function(t){e.setDirty(t)},},};return e.on("init",(function(){r.add()})),e.on("BeforeExecCommand"})),e.on("ExecCommand"})),e.on("ObjectResizeStart Cut",(function(){r.beforeChange()})),e.on("SaveContent ObjectResized blur",l),e.on("DragEnd",l),e.on("KeyUp",(function(t){var o=t.keyCode;t.isDefaultPrevented()||((o>=33&&o<=36||o>=37&&o<=40||45===o||t.ctrlKey)&&(l(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),n&&r.typing&&!1===mh.isEq(mh.createFromEditor(e),i[0])&&(!1===e.isDirty()&&(s(!0),e.fire("change",{level:i[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))})),e.on("KeyDown",(function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45===t)return void(r.typing&&l(e));var o=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||o||(r.beforeChange(),c(!0),r.add({},e),n=!0)}})),e.on("MouseDown"})),e.on("input",(function(e){e.inputType&&(function(e){return"insertReplacementText"===e.inputType}(e)}(e))&&l(e)})),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos"})),r={data:i,typing:!1,beforeChang},add:function(n,r){var a,c,l,f=e.settings;if(l=mh.createFromEditor(e),n=n||{},n=sn.extend(n,l),!1===u()||e.removed)return null;if(c=i[o],e.fire("BeforeAddUndo",{level:n,lastLevel:c,originalEvent:r}).isDefaultPrevented())return null;if(c&&mh.isEq(c,n))return null;if(i[o]&&(i[o].beforeBookmark=t),f.custom_undo_redo_levels&&i.length>f.custom_undo_redo_levels){for(a=0;a<i.length-1;a++)i[a]=i[a+1];i.length--,o=i.length}n.bookmark=Ms.getUndoBookmark(e.selection),o<i.length-1&&(i.length=o+1),i.push(n),o=i.length-1;var d={level:n,lastLevel:c,originalEvent:r};return e.fire("AddUndo",d),o>0&&(s(!0),e.fire("change",d)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,c(!1)),o>0&&(t=i[--o],mh.applyToEditor(e,t,!0),s(!0),e.fire("undo",{level:t})),t},red},clea},hasUnd},hasRed},transac},ignor},extr}}}function z(e){var t=function(e){var t={},n=function e(n,r){n&&("string"!=typeof n?sn.each(n})):(r=r.length?r:[r],sn.each(r,(function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))})),t[n]=r))};return n(Pv.get(e.dom)),n(e.settings.formats),{ge},register:n,unregiste}}}(e),n=vc(null);return qv.setup(e),Gh(e),{get:t.get,register:t.register,unregister:t.unregister,apply:ae.curry(Av.applyFormat,e),remove:ae.curry(dv.remove,e),toggle:ae.curry(zv.toggle,e,t),match:ae.curry(Mh.match,e),matchAll:ae.curry(Mh.matchAll,e),matchNode:ae.curry(Mh.matchNode,e),canApply:ae.curry(Mh.canApply,e),formatChanged:ae.curry(Bv.formatChanged,e,n),getCssText:ae.curry(Fv.getCssText,e)}}function q(e,t){void 0===t&&(t=b());var n={},r=[],o={},i={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var n,r,o,i,a,c,s,l,f,d,m,g,p,h,v,b;for(g=sb("tr,td,th,tbody,thead,tfoot,table"),d=t.getNonEmptyElements(),m=t.getWhiteSpaceElements(),p=t.getTextBlockElements(),h=t.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(p[r.name]&&"li"===r.parent.name){for(v=r.next;v&&p[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(i=[r],o=r.parent;o&&!t.isValidChild(o.name,r.name)&&!g[o.name];o=o.parent)i.push(o);if(o&&i.length>1){for(i.reverse(),a=c=u(i[0].clone()),f=0;f<i.length-1;f++){for(t.isValidChild(c.name,i[f].name)?(s=u(i[f].clone()),c.append(s)):s=c,l=i[f].firstChild;l&&l!==i[f+1];)b=l.next,s.append(l),l=b;c=s}ab(t,d,m,a)?o.insert(r,i[0],!0):(o.insert(a,i[0],!0),o.insert(r,a)),o=i[0],(ab(t,d,m,o)||ib(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(u(new nb("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(u(new nb("div",1))):h[r.name]?r.empty().remove():r.unwrap()}}},},c={schema:t,addAttributeFilte},getAttributeFilter},addNodeFilte},getNodeFilter},filterNode:u,parse:function(u,c){var s,l,f,d,m,g,p,h,v,b,y,C=[];c=c||{},o={},i={},v=db(sb("script,style,head,html,body,title,meta,param"),t.getBlockElements());var w=t.getNonEmptyElements(),x=t.children,S=e.validate,N="forced_root_block"in c?c.forced_root_block:e.forced_root_block,E=t.getWhiteSpaceElements(),T=/^[ \t\r\n]+/,k=/[ \t\r\n]+$/,R=/[ \t\r\n]+/g,A=/^[ \t\r\n]+$/,},B=function(e){var n,r,o,i,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((o=n.value.replace(k,"")).length>0)return void(n.value=o);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}i=n.prev,n.remove(),n=i}};s=Xp({validate:S,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_element}(t.getSelfClosingElements()),cdata:function(e){y.append(D("#cdata",4)).value=e},tex},commen},p},doctyp},star},end:function(n){var r,o,i,a,u;if(o=S?t.getElementRule(n):{}){if(v[n]&&!b){if((r=y.firstChild)&&3===r.type)if((i=r.value.replace(T,"")).length>0)r.value=i,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)i=r.value,a=r.next,(0===i.length||A.test(i))&&(r.remove(),r=a),r=a;if((r=y.lastChild)&&3===r.type)if((i=r.value.replace(k,"")).length>0)r.value=i,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)i=r.value,a=r.prev,(0===i.length||A.test(i))&&(r.remove(),r=a),r=a}if(b&&E[n]&&(b=!1),o.removeEmpty&&ab(t,w,E,y)&&!y.attributes.map.name&&!y.attr("id"))return u=y.parent,v[y.name]?y.empty().remove():y.unwrap(),void(y=u);o.paddEmpty&&(ob(y)||ab(t,w,E,y))&&rb(e,c,v,y),y=y.parent}}},t);var P=y=new nb(c.context||e.root_name,11);if(s.parse(u),S&&C.length&&(c.context?c.invalid=!0:a(C)),N&&("body"===P.name||c.isRootContent)}(),!c.invalid){for(h in o){for(p=n[h],m=(l=o[h]).length;m--;)l[m].parent||l.splice(m,1);for(f=0,d=p.length;f<d;f++)p[f](l,h,c)}for(f=0,d=r.length;f<d;f++)if((p=r[f]).name in i){for(m=(l=i[p.name]).length;m--;)l[m].parent||l.splice(m,1);for(m=0,g=p.callbacks.length;m<g;m++)p.callbacks[m](l,p.name,c)}}return P}};return cb(c,e),Qv.register(c,e),c}function H(e,t){var n=function(e,t){var n,r,o,i=["data-mce-selected"];return n=t&&t.dom?t.dom:Ii.DOM,r=t&&t.schema?t.schema:b(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,o=q(e,r),Xv.register(o,e,n),{schema:r,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(i,a){var u=Wv.merge({format:"html"},a||{}),c=Yv.process(t,i,u),s=gb(n,c,u),l=pb(o,n,s,u);return"tree"===u.format?l:hb(t,e,r,l,u)},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:ae.curry(mb,o,i),getTempAttrs:function(){return i}}}(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function U(e){return{getBookmark:ae.curry(Ys.getBookmark,e),moveToBookmark:ae.curry(Ys.moveToBookmark,e)}}function j(e){var t=sn.each,n=Mp.BACKSPACE,r=Mp.DELETE,o=e.dom,i=e.selection,a=e.settings,u=e.parser,c=ze.gecko,s=ze.ie,l=ze.webkit,f="data:text/mce-internal,",d=s?"Text":"URL",},g=function(e){return e.isDefaultPrevented()},},},},};return e.on("keydown"})),function(){var },a=function(n){var r=t(n),i=o.createRng();i.selectNode(e.getBody());var a=t(i);return r===a};e.on("keydown",(function(t){var i,u,c=t.keyCode;if(!g(t)&&(c===r||c===n)){if(i=e.selection.isCollapsed(),u=e.getBody(),i&&!o.isEmpty(u))return;if(!i&&!a(e.selection.getRng()))return;t.preventDefault(),e.setContent(""),u.firstChild&&o.isBlock(u.firstChild)?e.selection.setCursorLocation(u.firstChild,0):e.selection.setCursorLocation(u,0),e.nodeChanged()}}))}(),ze.windowsPhone||e.on("keyup focusin mouseup"}),!0),l&&(e.settings.content_editable||o.bind(e.getDoc(),"mousedown mouseup"})),e.on("click"})),a.forced_root_block&&e.on("init"})),e.on("init"})),v(),u.addNodeFilter("br"})),ze.iOS?(e.inline||e.on("keydown"})),b(),e.on("click"})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):h()),ze.ie>=11&&(b(),v()),ze.ie&&(h(),m("AutoUrlDetect",!1),e.on("dragstart",(function(e){p(e)})),e.on("drop",(function(t){if(!g(t)){var n=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(d))&&t.indexOf(f)>=0?(t=t.substr(23).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}(t);if(n&&n.id!==e.id){t.preventDefault();var r=xb.fromPoint(t.x,t.y,e.getDoc());i.setRng(r}(n.html,!0)}}}))),c&&(e.on("keydown"})),Range.prototype.getClientRects||e.on("mousedown"})}(),a.readonly||e.on("BeforeExecCommand MouseDown"})),e.on("SetContent ExecCommand"})),e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),ze.mac&&e.on("keydown"})),v()),{refreshContentEditable:function(){},isHidde}}}function W(e){return{walk:function(t,n){return rv.walk(e,t,n)},split:zh.split,normalize:function(t){return Em.normalize(e,t).fold(ae.constant(!1)}))}}}var V,$,K,X,Y,G,J,Q,Z,ee,te,ne,re=function(e){return function(){return e}},oe=re(!1),ie=re(!0),ae={noop:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},noarg:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e()}},compose:function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},constant:re,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},not:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:oe,always:ie},ue=ae.never,ce=ae.always,se=function(){return le},le=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,t){return e()},is:ue,isSome:ue,isNone:ce,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:se,ap:se,each:function(){},bind:se,flatten:se,exists:ue,forall:ce,filter:se,equals:e,equals_:e,toArray:function(){return[]},toString:ae.constant("none()")};return Object.freeze&&Object.freeze(r),r}(),fe=function e(t){var n=function(){return t},r=function(){return i},o=function(e){return e(t)},i={fol},is:function(e){return t===e},isSome:ce,isNone:ue,getOr:n,getOrThunk:n,getOrDie:n,or:r,orThunk:r,map:function(n){return e(n(t))},ap:function(n){return n.fold(se,(function(n){return e(n(t))}))},each:function(e){e(t)},bind:o,flatten:n,exists:o,forall:o,filter:function(e){return e(t)?i:le},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(ue,(function(e){return n(t,e)}))},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},de={some:fe,none:se,from:function(e){return null==e?le:fe(e)}},me=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},ge={isString:me("string"),isObject:me("object"),isArray:me("array"),isNull:me("null"),isBoolean:me("boolean"),isUndefined:me("undefined"),isFunction:me("function"),isNumber:me("number")},pe=function(){var e=Array.prototype.indexOf;return void 0===e?function(e,t){return xe(e,t)}:function(t,n){return e.call(t,n)}}(),he=function(e,t){return pe(e,t)>-1},ve=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r},be=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},ye=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n,e)},Ce=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},we=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return de.some(n);return de.none()},xe=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},Se=Array.prototype.push,Ne=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Se.apply(t,e[n])}return t},Ee=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},Te=Array.prototype.slice,ke=ge.isFunction(Array.from)?Array.from:function(e){return Te.call(e)},Re={map:ve,each:be,eachr:ye,partition:function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},filter:Ce,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},indexOf:function(e,t){var n=pe(e,t);return-1===n?de.none():de.some(n)},foldr:function(e,t,n){return ye(e,(function(e){n=t(n,e)})),n},foldl:function(e,t,n){return be(e,(function(e){n=t(n,e)})),n},find:function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return de.some(o)}return de.none()},findIndex:we,flatten:Ne,bind:function(e,t){var n=ve(e,t);return Ne(n)},forall:Ee,exists:function(e,t){return we(e,t).isSome()},contains:he,equal:function(e,t){return e.length===t.length&&Ee(e,(function(e,n){return e===t[n]}))},reverse:function(e){var t=Te.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return Ce(e,(function(e){return!he(t,e)}))},mapToObject:function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n},pure:function(e){return[e]},sort:function(e,t){var n=Te.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(e){return 0===e.length?de.none():de.some(e[0])},last:function(e){return 0===e.length?de.none():de.some(e[e.length-1])},from:ke},Ae="undefined"!=typeof window?window:Function("return this;")(),De=function(e,t){for(var n=null!=t?t:Ae,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n},Be=function(e,t){var n=e.split(".");return De(n,t)},Pe={getOrDie:function(e,t){var n=function(e,t){return Be(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n}},Oe=function(){return Pe.getOrDie("URL")},_e={createObjectUR},revokeObjectURL:function(e){Oe().revokeObjectURL(e)}},Ie=navigator,Le=Ie.userAgent,M};Q=/Android/.test(Le),$=($=!(V=/WebKit/.test(Le))&&/MSIE/gi.test(Le)&&/Explorer/gi.test(Ie.appName))&&/MSIE (\w+)\./.exec(Le)[1],K=-1!==Le.indexOf("Trident/")&&(-1!==Le.indexOf("rv:")||-1!==Ie.appName.indexOf("Netscape"))&&11,X=-1!==Le.indexOf("Edge/")&&!$&&!K&&12,$=$||K||X,Y=!V&&!K&&/Gecko/.test(Le),G=-1!==Le.indexOf("Mac"),J=/(iPad|iPhone)/.test(Le),Z="FormData"in window&&"FileReader"in window&&"URL"in window&&!!_e.createObjectURL,ee=Me("only screen and (max-device-width: 480px)")&&(Q||J),te=Me("only screen and (min-width: 800px)")&&(Q||J),ne=-1!==Le.indexOf("Windows Phone"),X&&(V=!1);var Fe,ze={opera:!1,webkit:V,ie:$,gecko:Y,mac:G,iOS:J,android:Q,contentEditable:!J||Z||parseInt(Le.match(/AppleWebKit\/(\d*)/)[1],10)>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==$,range:window.getSelection&&"Range"in window,documentMode:$&&!X?document.documentMode||7:10,fileApi:Z,ceFalse:!1===$||$>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===$||$>11,desktop:!ee&&!te,windowsPhone:ne},qe=window.Promise?window.Promise:function(=Array.isArray},},s=c.immediateFn||"function"==typeof setImmediate&&setImmediate};return c.prototype.catc},c.prototype.the},c.al},c.resolv},c.rejec},c.rac},c}(),He=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},U},j},We={requestAnimationFrame:function(e,t){return Fe?void Fe.then(e):void(Fe=new qe})).then(e))},setTimeout:He,setInterval:Ue,setEditorTimeou},setEditorInterva},debounce:je,throttle:je,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},Ve=/^(?:mouse|contextmenu)|click/,$e={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},Ke=function(){return!1},Xe=function(){return!0},Ye=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},G},Je=function(e,t){var n,r=t||{};for(n in e)$e[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),ze.experimentalShadowDom&&(r.target=function(e,t){var n,r=t;return(n=e.path)&&n.length>0&&(r=n[0]),e.composedPath&&(n=e.composedPath())&&n.length>0&&(r=n[0]),r}(e,r.target)),e&&Ve.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var o=r.target.ownerDocument||document,i=o.documentElement,a=o.body;r.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=Xe,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagatio},r.stopImmediatePropagatio},!1=}(r)&&(r.isDefaultPrevented=Ke,r.isPropagationStopped=Ke,r.isImmediatePropagationStopped=Ke),void 0===r.metaKey&&(r.metaKey=!1),r},Qe=function(e,t,n){var r=e.document,o={type:"ready"};if(n.domLoaded)t(o);else{var },};!r.addEventListener||ze.ie&&ze.ie<11?(Ye(r,"readystatechange",(function e(){i()&&(Ge(r,"readystatechange",e),a())})),r.documentElement.doScroll&&e.self===e.top&&function t(){try{r.documentElement.doScroll("left")}catch(e){return void We.setTimeout(t)}a()}()):i()?a():Ye(e,"DOMContentLoaded",a),Ye(e,"load",a)}},Ze=function(){var e,t,n,r,o,i=this,a={};t="mce-data-"+(+new Date).toString(32),r="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,o={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,i.domLoaded=!1,i.events=a;var };i.bin},i.unbin},i.fire=function(e,n,r){var o;if(!e||3===e.nodeType||8===e.nodeType)return i;(r=Je(null,r)).type=n,r.target=e;do{(o=e[t])&&u(r,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return i},i.clea},i.destro},i.cance}};Ze.Event=new Ze,Ze.Event.bind(window,"ready",(function(){}));var et,tt,nt,rt,ot,it,at,ut,ct,st,lt,ft,dt,mt,gt,pt,ht,vt,bt="sizzle"+-new Date,yt=window.document,Ct=0,wt=0,xt=t(),St=t(),Nt=t(),E},Tt="undefined",kt=1<<31,Rt={}.hasOwnProperty,At=[],Dt=At.pop,Bt=At.push,Pt=At.push,Ot=At.slice,_t=At.indexOf},It="[\\x20\\t\\r\\n\\f]",Lt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Mt="\\["+It+"*("+Lt+")(?:"+It+"*([*^$|!~]?=)"+It+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Lt+"))|)"+It+"*\\]",Ft=":("+Lt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Mt+")*)|.*)\\)|)",zt=new RegExp("^"+It+"+|((?:^|[^\\\\])(?:\\\\.)*)"+It+"+$","g"),qt=new RegExp("^"+It+"*,"+It+"*"),Ht=new RegExp("^"+It+"*([>+~]|"+It+")"+It+"*"),Ut=new RegExp("="+It+"*([^\\]'\"]*?)"+It+"*\\]","g"),jt=new RegExp(Ft),Wt=new RegExp("^"+Lt+"$"),Vt={ID:new RegExp("^#("+Lt+")"),CLASS:new RegExp("^\\.("+Lt+")"),TAG:new RegExp("^("+Lt+"|[*])"),ATTR:new RegExp("^"+Mt),PSEUDO:new RegExp("^"+Ft),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+It+"*(even|odd|(([+-]|)(\\d*)n|)"+It+"*(?:([+-]|)"+It+"*(\\d+)|))"+It+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+It+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+It+"*((?:-\\d)?\\d*)"+It+"*\\)|)(?=[^-]|$)","i")},$t=/^(?:input|select|textarea|button)$/i,Kt=/^h\d$/i,Xt=/^[^{]+\{\s*\[native \w/,Yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Gt=/[+~]/,Jt=/'|\\/g,Qt=new RegExp("\\\\([\\da-f]{1,6}"+It+"?|("+It+")|.)","ig"),Z};try{Pt.apply(At=Ot.call(yt.childNodes),yt.childNodes),At[yt.childNodes.length].nodeType}catch(ix){Pt={apply:At.lengt}}}var e};for(et in tt=en.support={},ot=en.isXM},ft=en.setDocumen},en.matche},en.matchesSelector=function(e,t){if((e.ownerDocument||e)!==dt&&ft(e),t=t.replace(Ut,"='$1']"),tt.matchesSelector&&gt&&(!ht||!ht.test(t))&&(!pt||!pt.test(t)))try{var n=(void 0).call(e,t);if(n||tt.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return en(t,dt,null,[e]).length>0},en.contain},en.att},en.erro},en.uniqueSor},rt=en.getTex},nt=en.selectors={cacheLength:50,createPseudo:n,match:Vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATT},CHIL},PSEUD}},filter:{TA},CLAS},ATT},CHIL},PSEUD}},pseudos:{not:n})),has:n})),contains:n})),lang:n})),targe},root:function(e){return e===mt},focu},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checke},selecte},empt},paren},header:function(e){return Kt.test(e.nodeName)},input:function(e){return $t.test(e.nodeName)},butto},tex},first:a})),last:a})),eq:a})),even:a((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:a})),lt:a})),gt:a}))}},nt.pseudos.nth=nt.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})nt.pseudos[et]=o(et);for(et in{submit:!0,reset:!0})nt.pseudos[et]=i(et);c.prototype=nt.filters=nt.pseudos,nt.setFilters=new c,it=en.tokeniz},at=en.compil},ut=en.selec},tt.sortStable=bt.split("").sort(Et).join("")===bt,tt.detectDuplicates=!!lt,ft(),tt.sortDetached=!0;var tn=Array.isArray,nn=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},r},on={isArray:tn,toArra},each:nn,ma},filte},indexO},reduc},findIndex:rn,find:function(e,t,n){var r=rn(e,t,n);if(-1!==r)return e[r]},las}},an=/^\s*|\s*$/g,un=function(e){return null==e?"":(""+e).replace(an,"")},cn=function(e,t){return t?!("array"!==t||!on.isArray(e))||typeof e===t:void 0!==e},sn={trim:un,isArray:on.isArray,is:cn,toArray:on.toArray,makeMa},each:on.each,map:on.map,grep:on.filter,inArray:on.indexOf,hasOw},extend:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o,i,a,u,c=arguments;for(o=1,i=c.length;o<i;o++)for(a in t=c[o])t.hasOwnProperty(a)&&void 0!==(u=t[a])&&(e[a]=u);return e},create:function(e,t,n){var r,o,i,a,u,c=this,s=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],!(o=c.createNS(e[3].replace(/\.\w+$/,""),n))[i]){if("static"===e[2])return o[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[i]));t[i]||(t[i]=function(){},s=1),o[i]=t[i],c.extend(o[i].prototype,t),e[5]&&(r=c.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],u=o[i],o[i]=}:function(){return this.parent=r[a],u.apply(this,arguments)},o[i].prototype[i]=o[i],c.each(r})),c.each(t}))),c.each(t.static,(function(e,t){o[i][t]=e}))}},walk:function e(t,n,r,o){o=o||this,t&&(r&&(t=t[r]),on.each(t})))},createN},resolv},explod},_addCacheSuffi}},ln=document,fn=Array.prototype.push,dn=Array.prototype.slice,mn=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,gn=Ze.Event,pn=sn.makeMap("children,contents,next,prev"),h},vn=function(e){return"string"==typeof e},b},yn=function e(t,n,r,o){var i;if(vn(n))n=bn(n,On(t[0]));else if(n.length&&!n.nodeType){if(n=Rn.makeArray(n),o)for(i=n.length-1;i>=0;i--)e(t,n[i],r,o);else for(i=0;i<n.length;i++)e(t,n[i],r,o);return t}if(n.nodeType)for(i=t.length;i--;)r.call(t[i],n);return t},C},w},xn=sn.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Sn=sn.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Nn={for:"htmlFor",class:"className",readonly:"readOnly"},En={float:"cssFloat"},Tn={},kn={},R},An=/^\s*|\s*$/g,D},B},P},O};Rn.fn=Rn.prototype={constructor:Rn,selector:"",context:null,length:0,ini},toArra},ad},att},removeAtt},pro},cs},remov},empt},htm},tex},appen},prepen},befor},afte},appendTo:function(e){return Rn(e).append(this),this},prependT},replaceWit},wrap:function(e){return wn(this,e)},wrapAl},wrapInne},unwra},clon},addClass:function(e){return this.toggleClass(e,!0)},removeClas},toggleClas},hasClas},eac},on:function(e,t){return this.each((function(){gn.bind(this,e,t)}))},of},trigge},show:function(){return this.css("display","")},hid},slic},e},firs},las},fin},filte},closes},offse},push:fn,sort:[].sort,splice:[].splice},sn.extend(Rn,{extend:sn.extend,makeArray:function(e){retur}(e)||e.nodeType?[e]:sn.toArray(e)},inArra},isArray:sn.isArray,each:Bn,trim:Dn,grep:Pn,find:en,expr:en.selectors,unique:en.uniqueSort,text:en.getText,contains:en.contains,filte}});var _},I},L};Bn({paren},parents:function(e){return _n(e,"parentNode")},next:function(e){return Ln(e,"nextSibling",1)},pre},childre},content}},(function(e,t){Rn.fn[e]=function(n){var r=[];return this.each((function(){var e=t.call(r,this,n,r);e&&(Rn.isArray(e)?r.push.apply(r,e):r.push(e))})),this.length>1&&(pn[e]||(r=Rn.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=Rn(r),n?r.filter(n):r}})),Bn({parentsUnti},nextUntil:function(e,t){return In(e,"nextSibling",1,t).slice(1)},prevUnti}},(function(e,t){Rn.fn[e]=function(n,r){var o=[];return this.each})),this.length>1&&(o=Rn.unique(o),0!==e.indexOf("parents")&&"prevUntil"!==e||(o=o.reverse())),o=Rn(o),r?o.filter(r):o}})),Rn.fn.i},Rn.fn.init.prototype=Rn.fn,Rn.overrideDefaults=function(e){var t,n=function n(r,o){return t=t||e(),0===arguments.length&&(r=t.element),o||(o=t.context),new n.fn.init(r,o)};return Rn.extend(n,this),n};var M};ze.ie&&ze.ie<8&&(Mn(Tn,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),Mn(Tn,"set",{class:function(e,t){e.className=t},styl}})),ze.ie&&ze.ie<9&&(En.float="styleFloat",Mn(kn,"set",{opacit}})),Rn.attrHooks=Tn,Rn.cssHooks=kn;var Fn,zn,qn,H},U},j},Wn={nu:jn,detec},unknown:Un},Vn="Edge",$n="Chrome",Kn="Opera",Xn="Firefox",Yn="Safari",Gn=function(e,t){return function(){return t===e}},Jn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Gn(Vn,t),isChrome:Gn($n,t),isIE:Gn("IE",t),isOpera:Gn(Kn,t),isFirefox:Gn(Xn,t),isSafari:Gn(Yn,t)}},Qn={unknown:function(){return Jn({current:void 0,version:Wn.unknown()})},nu:Jn,edge:ae.constant(Vn),chrome:ae.constant($n),ie:ae.constant("IE"),opera:ae.constant(Kn),firefox:ae.constant(Xn),safari:ae.constant(Yn)},Zn="Windows",er="Android",tr="Linux",nr="Solaris",rr="FreeBSD",o},ir=function(e){var t=e.current;return{current:t,version:e.version,isWindows:or(Zn,t),isiOS:or("iOS",t),isAndroid:or(er,t),isOSX:or("OSX",t),isLinux:or(tr,t),isSolaris:or(nr,t),isFreeBSD:or(rr,t)}},ar={unknow},nu:ir,windows:ae.constant(Zn),ios:ae.constant("iOS"),android:ae.constant(er),linux:ae.constant(tr),osx:ae.constant("OSX"),solaris:ae.constant(nr),freebsd:ae.constant(rr)},u},cr=function(e,t){return ur(e,t).map((function(e){var n=Wn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},s},lr=function(e,t){return-1!==e.indexOf(t)},fr=function(e){return e.replace(/^\s+|\s+$/g,"")},dr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,m},gr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],searc}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,dr],searc}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return lr(e,"msie")||lr(e,"trident")}},{name:"Opera",versionRegexes:[dr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:mr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:mr("firefox")},{name:"Safari",versionRegexes:[dr,/.*?cpu os ([0-9]+)_([0-9]+).*/],searc}}],pr=[{name:"Windows",search:mr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",searc},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:mr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:mr("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:mr("linux"),versionRegexes:[]},{name:"Solaris",search:mr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:mr("freebsd"),versionRegexes:[]}],hr={browsers:ae.constant(gr),oses:ae.constant(pr)},vr=function(e){var t=hr.browsers(),n=hr.oses(),r=cr(t,e).fold(Qn.unknown,Qn.nu),o=sr(n,e).fold(ar.unknown,ar.nu),i=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,u=r||i||a&&!0===/mobile/i.test(n),c=e.isiOS()||e.isAndroid(),s=c&&!u,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:ae.constant(r),isiPhone:ae.constant(o),isTablet:ae.constant(u),isPhone:ae.constant(s),isTouch:ae.constant(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ae.constant(l)}}(o,r,e);return{browser:r,os:o,deviceType:i}},br=Hn((function(){var e=navigator.userAgent;return vr(e)})),yr={detect:br},Cr=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:ae.constant(e)}},wr={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return Cr(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return Cr(n)},fromTex},fromDom:Cr,fromPoin}},xr=8,Sr=9,Nr=1,Er=3,Tr=function(e){return e.dom().nodeName.toLowerCase()},kr=function(e){return e.dom().nodeType},Rr=function(e){return function(t){return kr(t)===e}},Ar=Rr(Nr),Dr=Rr(Er),Br=Rr(Sr),Pr={name:Tr,type:kr,value:function(e){return e.dom().nodeValue},isElement:Ar,isText:Dr,isDocument:Br,isComment:function(e){return kr(e)===xr||"#comment"===Tr(e)}},Or=function(){var e=Object.keys;return void 0===}:e}(),_},I},L},M},Fr={bifilte},each:_r,ma},mapToArray:Lr,tupleMap:Ir,fin},keys:Or,values:Mr,siz}},zr=function(e,t,n){if(!(ge.isString(n)||ge.isBoolean(n)||ge.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},qr=function(e,t,n){zr(e.dom(),t,n)},Hr=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Ur=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},jr={clone:function(e){return Re.foldl(e.dom().attributes,(function(e,t){return e[t.name]=t.value,e}),{})},set:qr,setAll:function(e,t){var n=e.dom();Fr.each(t,(function(e,t){zr(n,t,e)}))},get:Hr,has:Ur,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return null==t||0===t.length},transfer:function(e,t,n){Pr.isElement(e)&&Pr.isElement(t)&&Re.each(n,(function(n){!function(e,t,n){Ur(e,n)&&!Ur(t,n)&&qr(t,n,Hr(e,n))}(e,t,n)}))}},Wr=Hn((function(){return Vr(wr.fromDom(document))})),Vr=function(e){var t=e.dom().body;if(null==t)throw"Body is not available yet";return wr.fromDom(t)},$r={body:Wr,getBody:Vr,inBody:function(e){var t=Pr.isText(e)?e.dom().parentNode:e.dom();return null!=t&&t.ownerDocument.body.contains(t)}},Kr=function(e){return void 0!==e.style},Xr=function(e,t,n){if(!ge.isString(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Kr(e)&&e.style.setProperty(t,n)},Y},Gr=function(e,t){var n=e.dom(),r=Yr(n,t);return de.from(r).filter((function(e){return e.length>0}))},Jr=function(e,t){var n=e.dom();Fr.each(t,(function(e,t){Xr(n,t,e)}))},Qr=function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),o=""!==r||$r.inBody(e)?r:Yr(n,t);return null===o?void 0:o},Zr=Gr,e},to={sort:eo,reqMessag},unsuppMessag},validateStrAr},invalidTypeMessag},checkDupes:function(e){var t=eo(e),n=Re.find(t}));n.each}))}},no={immutable:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return Re.each(e})),r}},immutableBag:function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return to.validateStrArr("required",e),to.validateStrArr("optional",t),to.checkDupes(n),function(r){var o=Fr.keys(r),i=Re.forall(e,(function(e){return Re.contains(o,e)}));i||to.reqMessage(e,o);var a=Re.filter(o,(function(e){return!Re.contains(n,e)}));a.length>0&&to.unsuppMessage(a);var u={};return Re.each(e})),Re.each(t})),u}}},r},o},i},a},uo=Nr,co=Sr,s},lo={all:function(e,t){var n=void 0===t?document:t.dom();return so(n)?[]:Re.map(n.querySelectorAll(e),wr.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==uo)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=void 0===t?document:t.dom();return so(n)?de.none():de.from(n.querySelector(e)).map(wr.fromDom)}},f},mo=yr.detect().browser.isIE(},go={eq:fo,isEqualNod},membe},contains:mo,is:lo.is},p},ho=function(e){var t=e.dom();return de.from(t.parentNode).map(wr.fromDom)},vo=function(e){var t=e.dom();return de.from(t.previousSibling).map(wr.fromDom)},bo=function(e){var t=e.dom();return de.from(t.nextSibling).map(wr.fromDom)},y},C},wo=no.immutable("element","offset"),xo={owner:po,defaultVie},documentElemen},parent:ho,findInde},parents:function(e,t){for(var n=ge.isFunction(t)?t:ae.constant(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=wr.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},siblings:function(e){return ho(e).map(yo).map})).getOr([])},prevSibling:vo,offsetParen},prevSibling},nextSibling:bo,nextSiblings:function(e){return ro(e,bo)},children:yo,child:Co,firstChil},lastChil},childNodesCoun},hasChildNode},lea}},So=yr.detect().browser,N},Eo={getPos:function(e,t,n){var r,o,i=0,a=0,u=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Qr(wr.fromDom(e),"position"))return{x:i=(o=t.getBoundingClientRect()).left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,y:a=o.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=function(e){return So.isFirefox()&&"table"===Pr.name(e)?No(xo.children(e)).filter((function(e){return"caption"===Pr.name(e)})).bind((function(e){return No(xo.nextSiblings(e)).map}))})).getOr(0):0}(wr.fromDom(t))}return{x:i,y:a}}},To=function e(t){var n=de.none(),r=[],},i=function(){return n.isSome()},a=function(e){Re.each(e,u)},};return t})),{get:o,ma},isReady:i}},ko=To,R},Ao=function e(t){var };return{ma},bin},anonBin},toLaz},get:n}},Do={nu:Ao,pur}},Bo=function(e,t){return t((function(t){var n=[],r=0,};0===e.length?t([]):Re.each(e}))}))},Po=function(e){return Bo(e,Do.nu)},Oo={par:Po,map},compos}},_o={value:function e(t){return{is:function(e){return t===e},isValue:ae.always,isError:ae.never,getOr:ae.constant(t),getOrThunk:ae.constant(t),getOrDie:ae.constant(t),or:function(n){return e(t)},orThunk:function(n){return e(t)},fold:function(e,n){return n(t)},map:function(n){return e(n(t))},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return de.some(t)}}},error:function e(t){return{is:ae.never,isValue:ae.never,isError:ae.always,getOr:ae.identity,getOrThunk:function(e){return e()},getOrDie:function(){return ae.die(String(t))()},or:function(e){return e},orThun},fold:function(e,n){return e(t)},map:function(n){return e(t)},each:ae.noop,bind:function(n){return e(t)},exists:ae.never,forall:ae.always,toOption:de.none}}},Io=function(e){var t;return function(n){return(t=t||Re.mapToObject(e,ae.constant(!0))).hasOwnProperty(Pr.name(n))}},Lo=Io(["h1","h2","h3","h4","h5","h6"]),Mo=Io(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),F},z},qo=Io(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Ho=Io(["ul","ol","dl"]),Uo=Io(["li","dd","dt"]),jo=Io(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),Wo=Io(["thead","tbody","tfoot"]),Vo=Io(["td","th"]),$},Ko=$o(1),X},Y},Go=$o(3),Jo=$o(8),Qo=$o(9),Zo=Xo("br"),ei=Yo("true"),ti=Yo("false"),ni={isText:Go,isElement:Ko,isComment:Jo,isDocument:Qo,isBr:Zo,isContentEditableTrue:ei,isContentEditableFalse:ti,matchNodeNames:Xo,hasPropValu},hasAttribut},hasAttributeValu},matchStyleValue},isBogu},isBogusAl},isTabl}},r},oi={trimNode:function e(t,n){var r,o=n.childNodes;if(!ni.isElement(n)||!ri(n)){for(r=o.length-1;r>=0;r--)e(t,o[r]);if(!1===ni.isDocument(n)){if(ni.isText(n)&&n.nodeValue.length>0){var i=sn.trim(n.nodeValue).length;if(t.isBlock(n.parentNode)||i>0)return;if(0===i&&function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n}(n))return}else if(ni.isElement(n)&&(1===(o=n.childNodes).length&&ri(o[0])&&n.parentNode.insertBefore(o[0],n),o.length||jo(wr.fromDom(n))))return;t.remove(n)}return n}}},ii=sn.makeMap,ai=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ui=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ci=/[<>&\"\']/g,si=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,li={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};zn={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},qn={"&lt;":"<","&gt;":">",||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}};Fn=fi("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permlac553?ai:ui,(function(e){return zn[).replace(ci,(function(e){return zn[e]||e}))},on(e,t){return gi(e,t,n)}:gi:r.numeric?mi:di},decode:function(e){return e.replace(si,(function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):li[t]||String.fromCharCode(t):qn[e]||Fn[e]||function(e){var t;return(t=wr.fromTag("div").dom()).innerHTML=e,t.textContent||t.innerText||e}(e)}))}},hi={},vi={},bi=sn.makeMap,yi=sn.eace,t){return(e=sn.trim(e))?e.split(t||"ttibutes[t[o]]={},r.attributesOrder.push(t[o])};return hi[e]?hi[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,a="acronym applet basefont big font strike tt"].join(" "),yi(Si(a),(function(e){c(e,"",r)})),n=[n,i="center dir isindex nofr].join(" "),yi(Si(i),(function(e){c(e,"",o)}))),o=o||[n,r].join(" "),c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),c("address dt dd div caption","",o),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),c("blockquote","cite",o),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",o),c("dl","","dt dd"),c("a","href target rel media hreflang type",r),c("q","cite",r),c("ins del","cite datetime",o),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",o),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),c("param","name value"),c("map","name",[o,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",o),c("th","colspan rowspan headers scope abbr",o),c("form","accept-charset action autocomplete enctype method name novalidate target",o),c("fieldset","disabled form name",[o,"legend"].join(" ")),c("label","form for",r),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:r),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[o,"li"].join(" ")),c("noscript","",o),"html4"!==e&&(c("wbr"),c("ruby","",[r,"rt rp"].join(" ")),c("figcaption","",o),c("mark rt rp summary bdi","",r),c("canvas","width height",o),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[r,"option"].join(" ")),c("article section nav aside header footer","",o),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[o,"figcaption"].join(" ")),c("time","datetime",r),c("dialog","open",o),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",r),c("progress","value max",r),c("meter","value min max low high optimum",r),c("details","open",[o,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select","onchange"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==e&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("iframe","sandbox seamless allowfull),(function(e){u[e]&&delete u[e].children[e]})),delete u.caption.)]=).length>1?e:"0"+e};return"#"+o(t)+o(n)+o(r)},ki=sn.each,Ri=sn.grep,Ai=ze.ie,Di=/^([a-z0-9],?)+$/i,Bi=/^[ \t\r\n]*$/,Pi=fur,o,e,t){return e.attr("da("dareturn e.serialize(e.parse(nNam==n&&e.nodeValue.length)&&(o++,n=r);return o};!function(e){e.DOM=e(document),e.nodeIndex=_i}(C||(C={})ep,zi=function(e){return"function"==typeof e},qi=funct,o=0;this.isDon 2===e[t]},this.markDone=function(t){e[t]=2},this.add=this.load=function(r,o,i,a){void 0===e[r]&&(t.push(r),e[r]=0),o&&(n[r]||(n[r]=[]),n[r].push({succs.remove=functiue=function(e,n,r){this.loadScripts(t,e,n,r)},this.loadScripts=functiont],(function(t){zi(t[e])&&t[e].call(t.scope)})),n[t]=void 0};r.push({success:i,failure:u,scope:a||this}),(c=function(){var n=Fi(t);if(t.length=0,Mi(n,(function(t){return 2===e[t]?void l("success",t):3===e[t]?void l("failure",t):void(1!==e[t&&(r.onreadystatechange=r.onload=r=null),t()};o=i.uniqueId(),(r=document.createElement("script")).id=o,r.type="text/javascript",r.src=sn._addCacheSuffix(e),(){/loaded|complete/.og&&console.log("Failed to load script: "+e)},(document.getElementsByTagName((ton(){e[t]=3,o--,s.push(t),l("failure",t),c()}pe):zi(e.failure)&&e.failure.call(e.scope,s)}))}})()}};qi.ScriptLoader=new qi;var Hi=sn.each;!function(e){e.PluginManaw={}));var Ui=feturn e.replace(new RegExp("\ufeodet")},Xi=function(e){return $i(e)&&Ui(e.tChni..isText(t)&&t.data.charAt(e.offset()-1)===ji},Zi=function(e,t,n){var r,o;return(r=t.ownerDocument.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),r.setAteturn e.setAttribute("data-mce-bogus","1"),e}()),o=t.parentNode,n?o.insertBefore(r,t):t.nextSibling?o.insertB,ea){return $i(e)&&e.data[e.data.length-1]===ji},na=function(e){return e&&e.hasAttribute("data-mce-caret")?(function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];ni.isBogus(n)&&n.parentNode.removeChild(n)}(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},ra=ni.isContentEditableTrue,oa=ni.isContentEditableFalse,ia=ni.isBr,aa=ni.isText,ua=ni.matchNodeNames("script style textarea"),ca=ni.matchNodeNames("img input textarea hr iframe video audio obua(e.parentNode):ca(e)||ia(e)||sa(e)||da(e))},da=function(e){return!1===function(e){return ni.isElement(e)&&"true"===e))return!1;if(rat:0t=eetup||m||!(e.bottom<t.top)&&va(t.bottom-e.top,e,t)},Ca=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},wa=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:es(=e.childNodes.length-1),e=e.childNodes[t]),e},Na=new RegExp("[----------------------------------------------------------------------Na.test(ection(){return e}},negs);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ta.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},curry:functio=Tah?toncforloca,ka.negate(Pa)),_a=ka.negate(ni.matchStyleValues("white-space","pre pre-line pre-wrap")),Ia=ni.isText,La=ni.isBr,Ma=Ii.nodeIndex,Fa=Sa,za=function(e){return"createRange"in e?e.createRange():Ii.DOM.createRng()},qa=function(e){return e&&/[\r\n\t ]/.test(e)},Ha=function(e){return!!e.setStart&&!!e.setEnd},Ua=function(e){var t,n=e.startContaini.isText(n)&&(t=n.data,qa(t[r-1])||qa(t[r+1])))},ja=function(e){var =r&&1===o){var i=e.cloneRange();arentNode;return i.insertBefore(o,e),r.setStart(o,0),r.setEnd(o,1),t=pa(r.getBoundingClientRect()),i.removeChild(o),t}(e):Wa(t)&&Ha(e)?ja(e):t},$a=function(e,t){var n=ha(e,t);return n.width=1,n.right=n.left+1,n},Ka=function(e){var t,n,r=[],o=function(e){0!==e.height&&(r.length>0&&function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}(e,r[r.length-1])||r.push(e))},i=function(e,t){var n=za(e.ownerDocument);if(t<e.data.length){if(Ea(e.data[t]))return r;if(Ea(en)))retu,n.setEndgth&&(n.setStart(e,t),n.setEnd(e,t+1),Ua(n)||o($a(Va(n),!0)))};if(Ia(e.container()))return i(e.container(),e.offset()),r;if(Aa(e.container()))if(e.isAtEnd())n=Fa(e.container(),e.offset()),Ia(n)&&i(n,n.data.length),Oa(n)&&!La(n)&&o($a(Va(n),!1));else{if(n=Fa(e.container(),e.tEnd())return o($a(t)&&!La(t)&&(Ba(t)a(Va(n),!0))}return r};!function(e){e.fromRangeStart=fun.fr.enbefentNode,Ma(t))},e.isAbove=function(e,t){return Ra([Re.head(t.getClientRects()),Re.last(e.getClientRects())],ba).getOr(!1)},e.isBelow=function(e,t){return Ra([Re.last(t.getClientRects()),Re.head(e.getClientRects())],ya).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=functiPosition=function(t){return!1===e.isTextPosi=t},eu=function(e){var te,t){return our nfset){var n=t.container(),r=Re.indexOf(Re.,t.offset()-1):t})).getOr(t);return ou(e),r}bute("data-mce-caret"):Qa(e)),Ja(e)){var t=Wi(function(e){try{return e.nodeValue}catch(t){return""}}(e));Za(e,t)}},iu={removeAndReposiu(e,set():fa(e.getNode())},uu=function(e){if(Ya.isTextPosition(e)){var t=e.container();return e.offset()===t.)&&e.getNode()===t.getNode(!0)},su=function(e,t,n){return e?!cu(t,n)&&!function(e){return!Ya.isTextPosition(e)&&ni.isBr(e.getNode())}(t)&&eturn de.from(e?r.next(n):r.prev(n))},fu=function(e,t){var n=e?t.firstChild:t.lastChild;reture(n):fn(rP,gu=ni.isContentEditablrideObjectSelected",{target:t}).isDefaultPrevented()?null:function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t)},vu=function(e,t,n){var r=Hc(1,e.getBody(),t),o=Ya.fromRangeStart(r),i=o.getNode();if(gu(i))return pu(1,e,i,!o.isAtEnd(),!1);var a=o.getNode(!0);if(gu(a))return pu(1,e,a,!1,!1);var u=e.dom.getParent(o.getNode(),(function(e){return gu(e)||mu(e)}));return gu(u)?pu(1,e,u,!1,n):null},bu=function(e,t,n){if(!t||!t.collapsed)return t;var r=vu(e,t,n);return r||t};!function(e){e[e.Br=0]="Br",e[e.Block=1]=rn e===yu.Forwards?t.next(n):t.prev(n)},xu=function(e,t,n,r){return ni.isBr(r.getNode(t===yu.Forwards))?Xa.Br:!1===_c(n,r)?Xa.Block:Xa.Wrap},Su=function(e,t,n,r){for(var o,i=us(nwards?{positions:Cu(t,u).concat([o]),breakType:Xa.Br,breakAt:de.some(o)}:{positionsde.some(o)};if(o.isVisible()){if(e(a,o)){var c=xu(0,t,a,o);return{positions:Cu(t,u),breakType:c,breakAt:deeturn{positions:Cu(t,u),breakType:Xa.Eol,breakAt:de.none()}} t(n,r).breakAt.map((function(r){var o=t(n,r).positions;return efunction(){return de.some(n)}),(function(r){return Ra([Re.head(r.getClientRects()),Re.head(n.getCli{var i=Math.abs(t-e.left);return Math.abs(t-ae.curry(Nu,-1,ku),Du=ae.curry(Nu,1,Ru),Bu=function(e,t){return lo.all(va).map((function(e){return e.dom()})),a=Re.filter(function(e,t){return Re.bind(t,(function(t){var n=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}}(t.getBoundingClientRect(),-1(n),cell:t}]}))}(e,i),(function(e){return t(e,o)}));return function(e,t,n){returnd((function(){return de.some(r)}),(function(e){var o=Math.sqrt(Math.abs(e.x-ath.abs(r.y-n));return de.,(function(e,t){return e.y<t})),_u=ae.curry(Pu,(function(e){return e.top}),(function(e,t){return e.y>t})),Iu=function(e,t){return Re.head(t.getClientRects()).bind((function(t){return Ou(e,t.left,t.top)})).bind((function(e){return Tu(function(e){return du.lastPositionIn(e).map((function(t){return ku(e,t).positions.concat(t)})).getOr([])}(e),t)}))},Lu=function(e,t){return Re.last(t.getClientRects()).bind((function(t){return _u(e,t.left,t.top)})).bind((function(e){return Tu(function(e){return du.firstPositionIn(e).map((function(t){return[t].concat(Ru(e,t).positions)})).getOr([])}(e),t)}))nctioe.fire("scrollIntoView",r),r.isDefaultPrevented()}(e,t,n)&&ni.isElement(t)){if(!1===n&&(s=t.offsetHeight),"BODY"!==c.nodeName){var l=e.selection.getScrollContainer();if(l)return r=Mu(t=o.y,a=o.h,(r<o.y||r+25>i+a)&&e.getWin().scrollTo(0,r<i?r:r-a+25)}},zu=function(e,t){Re.head(x.fromRangeStart(t).getClientRects()).each((function(t){var n=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(e),r=function(e,t){return{x:Ca(e,t),y:wa(e,tTop,qu=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return r},Hu=function(e){return e.getParam("iframe_attrs",{})},Uu=function(e){return e.getParam("doctype","<!DOCTYPE html>")},ju=function(e){return e.getParam("document_base_url","")},Wu=function(e){return qu(e,"b=function(e){return e.getParam("content_security_policy","")},Ku=function(e){return e.getParam("br_in_pre",!0)},Xu=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},Yu=function(e){return e.getParam("forced_root_block_attrs",{})},Gu=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Ju=function(e){return e.getParam("no_newline_selector","")},Qu=function(e){return e.getParam("keep_styles",!0)},Zu=function(e){return e.getParam("end_container_on_empty_blt_s sn.explode(e.getParam("font_size_classes",""))},nc=function(e,t){xo.parent(e).each((function(n){n.dnction(e,t){e.dom().appendChild(t.dom())},oc={before:nc,after:function(e,t){xo.nextSibling(e).fold((function(){xo.parent(e).each((function(e){rc(e,t)}))}),(function(e){nc(e,t)}))},prepend:function(e,t){xo.firstChild(e).fold((function(){rc(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))},append:rc,appendAt){nc(e,t),rc(t,e)}},ic=yr.detect().browser,ac=function(){return ic.isIE()||ic.isEdge()||ic.isFirefox()},uc=function(e,t){e.selection.setRng(t),zu(e,t)},cc=function(e,t,n){var r=e(t,n);rettions.length?r.breakAt.map((function(n){return e(t,n).breakAt.isNone()})).getOr(!0):r.breakAt.isNone()},sc=ka.curry(cc,ku),lc=ka.curry(cc,Ru),fc=function(e,t,n,r){var o=e.selection.getRng(),i=t?1:-1;if(ac()&&function(e,t,n){var r=Ya.fromRangeStart(t);return du.positionIn(!e,n).map((function(e){return e.isEqual(r)})).getOr(!1)}(t,o,n)){var a=pu(i,e,n,!t,!0);return uc(e,a),!0}return!1},dc=function(e,t){var n=t.getNode(e);return ni.isElement(n)&&"TABLE"===n.nodeName?de.some(n):de.none()},mc=function(e,t,n){var r=dc(!!t,n),o=!1===t;r.fold((function(){return uc(e,n.toRange())}),(function(r){return du.positionIn(o,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return uc(e,n.toRange())}),(function(o){return functionunction(){var r=wr.fromTag(o);jr.setAll(r,Yu(t)),oe,t,Ya.before(t)),n.left)}))})).getOr(Ya.before(t))}(a,n,i);return mc(e,t,u),!0}return!(!t||!lc(r,i))&&(u=function(e,t,n){return Lu(t,n).orThunk((function(){return Re.head(n.getClientRects()).bind((function(n){return Eu(Du(e,Ya.after(t)),n.left)}))})).getOr(Ya.after(t))}(a,n,i),mc(e,t,u),!0)},pc=function(e,t){return function(){return de.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(n){return de.from(e.dom.getParent(n,"table")).map((function(n){return fc(e,t,n)}))})).getOr(!1)}},hc=function(e,t){return function(){return de.from(e.dom.getParent(e.selection.ge,t,n){var r,o,i,a,u,c=ha(t.getBoundingClienent.documentElement,o=ffsetWidth-t.clientWidth)>0&&(n&&(a*=-1),c.left+=a,c.right+=a),c},Cc=function(e,t,n){var r,o,i=vc(de.none()),a=function(){(function(e){var ti.set(de.none())})),clearInterval(r)},u=function(){r=We.setInterval((function(){n()?Rn("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):Rn("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")}),500)};return{show:function(n,r){var c,s;if(a(),function(e){return ni.isElement(e)&&/^(TD|TH)$/i.test(e.tagNamr=e.ownerDocument.createTextNode(ji),o=e.parentNode,t){if(n=e.previousSibling,$i(n)){nerDocumento,1)),s;o=Zi("p",r,n),c=yc(e,r,n),Rn(o).css("top",c.ta-mce-bogus="all"></div>').css(c).appendTo(e)[0];return i.set(de.some({caret:l,element:r,before:n})),i.get().each((function(e){n&&Rn(e.caret).addClass("mce-visu,(sangurnon:et)nctspl){rt);)if(!Ec(n))return n;return null},Pc=function(e,t,n,r,o){var i=new v(e,r);if(Dc(t)){if((xc(e)||Ec(e))&&n(e=Bc(i.prev,!0)))return e;for(;e=Bc(i.prev,o);)if(n(e))return e}if(Ac(t)){if((xc(e)||Ec(e))&&n(e=Bc(i.nebre=Tcc(Ffse&(r=o.nextSibling,wc(r)))return zc(r);if("after"===a&&(r=o.previousSibling,wc(r)))return qc(r)}if(!n.collapsed)return n;if(ni.isText(o)){if(Nc(o)){if(1===e){if(r=c(o))return zc(r);if(r=u(o))return qc(r)}if(-1===e){if(r=u(o))return qc(r);if(r=c(o))return zc(r)}return n}if(ta(o)&&i>=o.data.length-1)return 1===e&&(return-1===e&&(r=u():nc(Uc,-1),Xc=Tc(jc,0),Yc=Tc(jc,-1);!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(yu||(yu={}));var Gc=ni.isContentEditableFalse,Jc=ni.isText,Qc=ni.isElement,Zc=ni.isBr,es=fa,ts=function(e){return ca(e)||function(e){return!!da(e)&&!0!==on.reduce(e.getElementsByTagName("*"),(function(e,t){return e||ra(t)}),!1)}(e)},ns=ma,rs=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},os=function(e,t){if(Ac(e)){if(es(t.previousSibling)&&!Jc(t.previousSibling))return Ya.before(t);if(Jc(t))return Ya(t,0)}if(Dc(e)){if(es(t.nextSibling)&&!Jc(t.nextSibling))return Ya.after(t);if(Jc(t))return Ya(t,t.data.length)}return Dc(e)?Zc(t)?Ya.before(t):Ya.after(t):Ya.before(t)},is=function(e,t){var n;return!!ni.isBr(e)&&!!(n=as(1,Ya.after(e),t))&&!_c(Ya.before(e),Ya.before(n),t)},as=function e(t,n,r){var o,i,a,u,c;if(!Qc(r)||!n)return null;if(n.isEqual(Ya.after(r))&&r.lastChild){if(c=Ya.after(r.)?Ya.before(r.lastChild):c}else c=n;var s=c.container(),l=c.offset();if(Jc(s)){if(Dcrn!ength):Ya.before(i);if(Ac(t)&&l<s.childNodes.length&&(i=rs(s,l),es(r)?e(t,Ya.after(i),r):!ts(i)&&(a=Pc(i,t,ns,i))?Jca.after(i);o=i||c.getNode()}return())?os(t,o):(i=Pc(o,t,ns,r),u=on.last(on.filter(function(e,t){for(var n=[];e&&e!==.Forwards,t,e)},prev:function(t){return as(yu.Backwards,t,e)}}},cs=function(e){return sn.grep(e.childNodes,(function(e){return"LI"===e.nodeName}))},ss=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&function(e){return""===e.data||ni.ctioe.slice(0,-1):e},fs=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},ds=functige():null}(e,n)},gs=function(e,t){var n=t.firstChild,r=t.lastChild;retu();return t&&(t.isEmpty(n)|turn e.fiame&&t.parentker"===n.id&&n.parentNode.removeChild(n),e}(e.createFragment(r))}(t,e,r),i=fs(t,n.startContainer),a=ls(cs(o.firstChild)),u=t.getRoot(),c=function(e){vrn!a||fs(t,a.getNode())!==i};return c(1)?ms(i,a,u):c(2)?function(e,t,n,r){return r.insertAfter(t.reverse(),e),ds(t[0],n)}(i,a,u,t):function(e,t,n,r){var o=functturn n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]}(e,r),i=e.parentNode;return i.insertBefore(o[0],e),sn.each(t,(function(t){i.insertBefore(t,e)})),i.insertBefore(o[1],e),i.removeChild(e),ds(t[t.length-1],n)}(.nodeIndex,Cs=function e(t){var n=t.parentNode;return bs(n)?e(n):n},ws=function e(t){return t,t}),[]):[]},xs=function(e){return function(t){return e===t}},Ss=function(e){var t,n,r;return t=ws(Cs(e)),n=on.findIndex(t,xs(e),e),t=t.slice(0,n+1),r=on.reduce(t,(function(e,n,r){return vs(n)&&vs(t[r-1])&&e++,e}),0),t=on.filter(t,ni.matchNodeNames(e.nodeName)),(n=on.findIndex(t,xs(e),e))-r},Ns=function(e){return(vs(e)?"text()":e.nodeName.toLowerCase())+"["+Ss(e)+"]"},Es=fu.container(),r=t.offset(),vs(n)?o=function(e,t){for(;(e=e.previousSibling)&&vs(e);)t+=e.durn r}(e,n),a=on.filter(a,ka.negate(ni.isBogus)),u=u.concat(on.map(a,(function(e){return Ns(e)}))),u.reverse().t>=xtS:nue(0Tex)c.push(e.nodeIndex(a,n));return c},As=function(e){ni.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},Ds=function(e,t,n)gus"))return e!==n&&void r++})),r},Bs=function(e,t){var n,r,o,i=t?"start":"end";n=e[i+"Container"],r=e[i+"Offset"],ni.isElement(n)&&"TR"===n.nodeName&&(n=(o=n.childNodes)[M n;if(ni.isElement(e)&&(e=Sa(e,t),ks(e)))return e;if(Yi(e)){if(ni.isText(e)&&Ki(e)&&(e=e.parentNode),n=e.previousSibling,ks(n))return n;if(n=e.nextSibling,ks(n))return n}},_s=function(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();if(ks(r)||"IMG"===o)return{name:o,index:Ds(n.dom,o,r)};var a=function(e){return Os(e.startContainer,e.startOffset)||Os(e.endContainer,e.endOffset)}(i);returnrflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)}uniindAs(ion(e,t,n){return 2===t?_s(Wreturn{start:Esturn{rng:e.geon(return!1}),(function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0}))},js=function(e,t,n){return!(!function(e){return!1===e.hasChildNodes()}(t)||!qs(e,t)||(function(e,t){var n=e.ownerDocument.createTextNode(ji);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)}(t,n),0))},Ws=function(e,t,n,r){var o,i,a,u,c=n[t?"start":"end"],s=e.getRoot();if(c){for(a=c[0],i=s,o=c.length-1;o>=1;o--){if(u=i.childNodes,js(s,i,r))return!0;if(c[o]>u.length-1)return!!js(s,i,r)||Us(i,r);i=u[c[o]]}3===i.nodeType&&(a=Math.min(c[0],i.nodeValue.length)),1===i.(i,a)}return!0},Vs=function(e){return ni.isText(e)&&e.data.length>0},$s=function(e,t,n){var r,o,i,a,u,c,s=e.get(n.id+"_"+t),l=n.keep;if(s){if(r=s.parentNode,"start"===t?(l?s.hasChildNodes()?(r=s.firstChild,o=,o=0):Vs(s.previousSibling)?(r=s.previousSibling,o=s.previousSibling.data.length):(r=s.pld,o=1):=s.previousSibling.data.length):(r=s.parentNode,o=e.nodeIndex(s)):o=e.nodeIndex(s),u=r,c=o),!l){for(a=s.previousSibling,i=s.nextSibling,sn.each(sn.grep(s.childNodes),(function(e){ni.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))}));s=e.get(n.id+"_"+t);)e.remove(s,!0);a&&i&&a.nodeType===i.nodeType&&ni.isText(a)&&ction(e,t){return e.isSome()?e:t},Xs=function(e,t){var n=e.dom;if()?de.some(n):de.none()}(n,t);if(function(e){return"string"==typeof e.start}(t))return de.some(function(e,t){var n,r;return n=e.createRng(),r=Ts(e.getRoot(),t.start),n.setStsetEnd(r.contai=$s(e,"start",t),r=$s(e,"end",t);return Ra([n,Ks(r,n)],(function(t,n){var r=e.createRng();returnfrreturn de.none()},Ys={getBookmark:function(e,t,n){return Ms.getBookmark(e,t,n)},moveToBookmark:function(e,t){Xs(e,t).each((function(t){e.setRng(t)}))},isBookmarkNode:function(e){return ni.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}},Gs=sn.each,Js=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return Gs(e.getAttribs(t),(function(r){var o=r.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))})),n},o=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!o(r(t),r(n))||!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||Ys.isBookmarkNode(t)||Ys.isBookmarkNode(n))}},Qs=function(e,t){Re.each(t,(function(t){oc.before(e,t)}))},Zs=function(e,t){Re.each(t,(function(t){oc.append(e,t)}))},el=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.reunction(e){el(e)}))},remove:el,unwrap:function(e){var t=xo.chil e(t)?de.from(t.dom().nodeValue):de.none()},r=yr.detect().browser,o=r.isIE()&&10===r.version.major?function(e){try{return n(e)}catch(t){return de.none()}}:n;return{get:function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr(,ol=function(e)){for(var t=[],n=e.dom();n;)t.push(wr.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),zo);t.length===n.length&&Re.each(n,tl.remove)},il=function(e){tl.empty(e),oc.append(e,wr.fromHtml('<br data-mce-bogus="1">'))},al=function(e){xo.l(t).each((function(n){Mo(e)&&zo(t)&&Mo(n)&&tl.remove(t)}))}))},ul=sn.makeMap,cl=function(e){var t=Ya.fromRangeStart(e),n=Ya.fromRangeEnd(e),r=e.commonAncestorContainer;return du.fromPosition(!1,r,n).map((function(o){return!_c(t,n,r)&&_c(t,o,r)?function(e,t,n,r){var o=document.createRange();return o.setStart(e,t),o.setEnd(n,r),o}(t.container(),t.offset(),o.container(),o.offset()):e})).getOr(e)},sl=function(e){return e.collapsed?e:cl(e)},ll=ni.matchNodeNames("td th"),fl=function(e,t,n){var r,o,i,a,u,c,s,l,f,d,m,g,p=e.schema.getTextInlineElements(),h=e.selection,v=e.dom;if(/^ | $/.test(t)&&(t=function(e){var t,n,r;t=h.getRng(),n=t.startContainer,r=t.startOffset;var o=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):o("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}(t)),r=e.parser,g=n.merge,o=N({validate:e.settings.validate},e.schema),m='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',c={content:t,format:"html",selection:!0,paste:n.paste},(c=e.fire("BeforeSetContent",c)).isDefaultPrevented())e.fire("SetContent",{content:c.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=c.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,m);var b=(l=h.getRng()).startContainer||(l.parentElement?l.parentElement():null),y=e.getBody();b===y&&h.isCollapsed()&&v.isBlock(y.firstChild)&&function(t){return t&&!e.schema.getShortEndedElemeStart(y.firstChild,0),l.setEnd(y.firstChild,0),h.setRng(l)),h.isCollapsed()||(e.selection.setRng(sl(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),function(){var e,n,r;n=(e=h.getRng()).startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&(""===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):""===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t)))}());var C={context:(i=h.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(u=r.parse(t,C),!0===n.paste&&gs(e.schema,u)&&hs(v,i))return l=ps(o,v,e.selection.getRng(),u)!v.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(s,f,"br"===f.nam9===i.nodeType?i=f=a:f=i;f!==a;)i=f,f=f.parentNode;t=i===a?an(){return o.serialize(u)})))),i===a?v.setHTML(a,t):v.setOuterHTML(i,t)}else t=o.serialize(u),function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}}(e,t,i);(function(){if(g){var t=e.getBody(),n=new e){for(v.remove(e,!0)}))}})(),function(t){var n,r,o;if(t){if(h.scrollIntoView(t),n=function(t){for(var n=e.getBodemove(t),voidtStart(f,f.nodeValue.length),ze.ie||(d=t.nextSibling)&&3===d.nodeType&&(f.appendData(d.data),d.parentNode.rd(r,0),ll(r)||function(e){return!!e.getAttribute("data-mce-fragment")}(r)||!(o=function(t){var n=Ya.fromRangeStart(t);if(n=us(e.getBody()).next(n))return n.toRange()}(l))?v.add(r,v.create("br",{"data-mce-bogus":"1"})):(l=o,v.remove(r))),h.setRng(l)}}(v.get("mce_marker")),function(e){sn.each(e.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")}))}(e.getBody()),function(e,t){de.from(e.getParent(t,"td,th")).map(wr.fromDom).each(al)}(e.dom,e.selection.getStart()),e.fire("SetContent",c),e.addVisual()}},dl={insertAtCaret:function(e,t){var n=function(e){var t;return"string"!=typeof e?(t=sn.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}}(t);fl(e,n.content,n.details)}},ml=function(e,t,n){for(var r=e.dom(),o=ge.isFunction(n)?n:ae.constant(!1);r.parentNode;){r=r.parentNode;var i=wr.fromDom(r);if(t(i))return de.some(i);if(o(i))break}return de.none()},gl=function(e,t){return Re.find(e.dom().childNodes,ae.compose(t,wr.fromDom)).map(wr.fromDom)},pl=function(e,t){return function e(n){for(var r=0;r<n.childNodes.length;r++){if(t(wr.fromDom(n.childNodes[r])))return de.some(wr.fromDom(n.chi(),e)},ancestor:ml,closest:function(e,t,n){return E((function(e){return t(e)}),ml,e,t,n)},sibling:function(e,t){var n=e.dom();return n.parentNode?gl(,n)&&t(n)})):de.none()},child:gl,descendant:pl},vl=no.immutable("sections","settings"),bl=yr.detect(),yl=bl.deviceType.isTouch(),Cl=["lists","autolink","autosave"],wl={theme:"mobile"},xl=function(e){var t=ge.isArray(e)?e.join(" "):e,n=Re.map(ge.isString(t)?t.split(" "):[],fr);return Re.filter(n,(function(e){return e.length>0}))},Sl=function(e,t){return e.sections().hasOwnProperty(t)},Nl=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?sn.extend({},e.external_plugii=xl(r.plugins),a=e&&Sl(t,"mobile")?function(e){return Re.filter(e,ae.curry(Re.contains,Cl))}(i):i,u=function(e,t){return[].concat(xl(e)).concat(xl(t))}(o,a);return sn.extend(r,{plugins:u.join(" ")})},Tl=function(e,t,n,r){var o=function(e,t){var n=Fr.bifilter(t,(function(t,n){return Re.contains(e,n)}));return vl(n.t,n.f)}(["mobile"],r),i=sn.extend(t,n,o.settings(),function(e,t){var n=t.settings().inline;return e&&Sl(t,"mobile")&&!n}(e,o)?function(e,t,n){var r=e.sections(),o=r.hasOwnProperty(t)?r[t]:{};return sn.extend({},n,o)}(o,"mobile",wl):{},{validate:!0,content_editable:o.sett);return El(e,o,n,i)},kl=function(e,t,n){return de.from(t.settings[n]).filter(e)},Rl=ae.curry(kl,ge.isString),Al=function(e,t,nsn.trim(n[0])]=sn.trim(n)})):t=e,t}(o):"string"===r?kl(ge):"object"===r?kl(ge.isObject,e,t).getOr(n):"array"===r?kl(ge.isArray,e,t).getOr(n):"string[]"===r?kl(function(e){return function(t){return ge.isArray(t)&&Re.forall(t,e)}}(ge.isString),e,t).getOr(n):"function"===r?kl(ge.isFunction,e,t).getOr(n):o},Dl=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Bl=function(e,t){var n=t.container(),r=t.offset();return e?Xi(n)?ni.isText(n.nextSibling)?Ya(n.ext(n.previousSibling)?Ya(n.previousSibling,n.previousSibling.data.length):Ya.before(n):Qi(t)?Ya(n,r-1):t},Plion(e,t){var n=Rl(e",tntains(e,t)?hl.closest(t,(function(e){return qo(e)||Uo(e)}),function(e){return function(t){return go.eq(e,wr.fromDom(t.dom().parentNode))}}(e)):de.none()},Ll=function(e(""),function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)}(e))},Ml=function(e,t,n){return Ra([du.firstPositionIn(n),du.lastPositionIn(n)],(function(r,o){var i=_l.normalizePosition(!0,r),a=_l.normalizePosition(!1,o),u=_l.normalizePosition(!1,t);return e?du.nextPosition(n,u).map((function(e){return e.isEqual(a)&&t.isEqual(i)})).getOr(!1):du.prevPosition(n,u).mapreturn zl(e,t,n).isSome()},jl=function(e,t){return ni.isText(t)&&/^[go.eq,n))}(e,t)},Wl=function(e,t){return fa(t)&&!1===jl(e,t)||function(e){return ni.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")}(t)||Vl(t)},Vl=ni.hasAttribute("data-mce-bookmark"),$l=ni.hasAttribute("data-mce-bogus"),Kl=ni.hasAttributeValue("data-mce-bogus","all"),Xl=functionnext(!0);else if($l(n))n=t.next();else if(ni.isBr(n))r++,n=t.next();else{if(Wl(e,n))return!1;n=t.next()}}while(n);return r<=1}(e.dom())},Yl=no.immutable("block","position"),Gl=no.immutable("from","p((function(e){return Yl(e,t)}))},Ql=function(e,t,n){var r=Jl(e,Ya.fromRangeStart(n)),o=r.bind((function(n){return du.fromPosition(t,e,n.posit{return function(e,t,n){return ni.isBr(n.pock())?du.positionIn(!1,n.block().dom()).bind((function(r){return r.isEqual(n.position())?du.fromPosition(t,e,r).bind)})).getOr(n):n}(e,t,n)}))}))}));return Ra([r,o],Gl).filter((function(e){return function(e){return!1===go.eq(e.from().block(),e.to().block())}(e)&&function(e){return xo.parent(e.from().block()).bind((eturn!1===ni.isContentEditableFalse(e.from().block())&&!1===ni.isContentEditableFalse(e.to().block())}(e)}))},Zl=function(e,t,n){return n.collapsed?Ql(e,t,n):de.none()},ef=function(e,t,n){return go.contains(t,e)?function(e){return e.slice(0,-1)}(xo.parents(e,(function(e){return n(e)||go.eq(e,t)}))):[]},tf=function(e,t){return ef(e,t,ae.constant(!1))},nf=tf,rf=function(e,t){return[e].concat(tf(e,t))},of=function(e){var t=function(e){v,e t=e.g},uf=function(e,t){var n=rf(t,e);return Re.find(n.reverse(),Xl).each(tl.remove)},cf=function(e,t){r go.eq(n,t,(function(t){return go.eq(t,e)}));return de.from(n[n.length-2])}(t,e)})):de.none()},sf=function(e,t,n){if(Xl(n))return tl.remove(n),Xl(t)&&il(t),du.firstPositionIn(t.dom());af(!0,t),af(!1,n);var r=of(t);return cf(t,n).fold((function(){uf(e,t);var d(n,e)})),o}),(function(o){var i=du.prevPosition(n.dom(),Ya.before(o.dom()));return Re.each(r,(t?sf(e,r,n):sf(e,n,r)},ff=function(e,t){var n,r=wr.fromDom(e.getBody());return n=Zl(r.dom(),t,e.selection.getRng()).bind((function(e){return lf(r,t,e.from().block(),e.to().block())})),n.each((function(t){e.selection.setRng(t.toRange())})),n.isSome()},df=function(e,cestor(n,Vo,r).isSome()},mf=function(e,t){var n=du.prevPosition(e.dom(),Ya.fromRangeStart(t)).isNone(),r=du.nextPosition(e.dom(),Ya.fromRangeEnd(t)).isNone();return!function(e,t){return df(e,t.startContainer)||df(e,t.endContainer)}(e,t)&&n&&r},gf=function(e){var t=wr.fromDom(e.getBody()),n=e.selection.getRng();return mf(t,n)?function(e){return e.setContent(""),e.selection.setCursorLocation(),!0}(e):function(e,t){var n=t.getRng();return Ra([Il(e,wr.fromDom(n.startContainer)),Il(e,wr.fromDom(n.endContainer))],(function(r,o){return!1===go.eq(r,o)&&(n.deleteContents(),lf(e,!0,r,o).each((function(e){t.setRng(e.toRange())})),!0)})).getOr(!1)}(t,e.selection)},pf=function(e,t){return!e.selection.isCollapsed()&&gf(e)},hf=function(e){if(!ge.isArray(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return Re.each(e,(function(r,o){var i=Fr.keys(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],u=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!ge.isArray(u))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==u.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+u.length+" ("+u+"), got "+n);for(var r=new Array(n),i=0;i<r.length;i++)r[i]=arguments[i];return{fold:fun.length)throw new Error("Wrong number of arguments to match. Expected: "+function(e){return Re.contains(n,e)}))ified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}})),n},vf=hf([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),bf=function(e,t,n,r){var o=r.getNode(!1===t);return Il(wr.fromDom(e),wr.fromDom(n.getNode())).map((function(e){return Xl(e)?vf.remove(e.dom()):vf.moveToElement(o)})).orThunk((function(){return de.some(vf.moveToElement(o))}))},yf=function(e,t,n){return du.fromPosition(t,e,n).bind((function(r){return function(e){return Vo(wr.fromDom(e))||Uo(wr.fromDom(e))}(r.getNode())||function(e,t,n,r){var o=function(t){return Fo(wr.fromDom(t))&&!_c(n,r,e)}de.som}(t,n)?function(e,t){return e&&ni.isContentEditableFalse(t.nextSibling)?de.some(vf.moveToElement(t.nextSibling)):!1===e&&ni.isContentEditableFalse(t.previousSibling)?de.some(vf.moveToElement(t.previousSibling)):de.none()}(t,n.getNode(!1===t)).fold((function(){return yf(e,t,n)}),de.some):yf(e,t,n).bind((function(t){return function(e,t,n){return n.fold((function(e){return de.some(vf.remove(e))}),(function(e){return de.some(vf.moveToElement(e))}),(function(n){return _c(t,n,e)?de.none():de.some(vf.moveToPosition(n))}))}(e,n,t)}))},wf=function(e,t){return function(e,t){var n=e.container(),r=e.offset();return!1===Ya.isTextPosition(e)&&n===t.parentNode&&r>Ya.before(t).offset()}(t,e)?Ya(t.container(),t.offset()-1):t},xf=function(e){return fa(e.previousSibling)?de.some(function(e){return ni.isText(e)?Ya(e,reviousSibling?du.lastPositionIn(e.previousSibe.nextSibling)?de.some(functionextt)})).orThunk((function(){return function(e,t){var n=Ya.before(t.previousSibling?t.previousSibling:t.parentNode);return du.prevPosition(e,n).fold((function(){return du.nextPosition(e,Ya.after(t))}),de.some)}(e,t)}))},Ef=function(e,trThunk((function(){return function(e,t){return du.nextPosition(e,Ya.after(t)).fold((function(){return du.prevPosition(e,Ya.before(t))}),de.some)}(e,t)}))},Tf=function(e,t,n){return function(e,t,n){return e?Ef(t,n):Nf(t,n)}(e,t,n).map(ae.curry(wf,n))},kf=function(e,t,n){n.fold((f{e.selection.setRng(n.toRange(),t)}))},Rf=function(e,t){return t&&e.schema.getBlockElements().hasOwnProfumHtml('<br data-mce-bogus="1">');return tl.empty(e),oc.append(e,t),de.some(Ya.before(t.dom()))}return de.none()},Df=function(e,t,n){var r=Tf(t,e.getBody(),n.dom()),o=hl.ancestor(n,ae.curry(Rf,e),function(e){return function(t){return ,r);e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):o.bind(Af).fold((function(){kf(e,t,i)}),(function(n){kf(e,t,de.some(n))}))},Bf=function(e,t){var n=function(e,t,n){var r=Hc(t?1:-1,e,n),o=Ya.fromRangeStart(r);return!1===emoe()),!0}}(e))}));return n.getOr(!1)},Pf=function(e,t){var n=e.selection.getNode();return!!ni.isContentEditableFalse(n)&&l.rection.setRng(Ya.before(t).toRange())),!0e)&men.cutNode())},jf=function(e,t){var n=t.get();return n&&e.container()===n&&Xi(n)},Wf=function(e,t){return t.fold((function(t){iu.remove(e.get());var n=qf(t);return e.set(n),de.some(Ya(n,n.length-1))}),(function(t){return du.firstPositionIn(t).map((function(t){if(jf(t,e))return Ya(e.get(),1);iu.remove(e.get());var n=Uf(t,!0);return e.set(n),Ya(n,1)}))}),(function(t){return du.(jf(t,e))return Ya(e.get(),e.get().length-1);iu.remove(e.get());var n=Uf(t,!1);return e.set(n),Ya(n,n.length-1)}))}),(function(t){iu.remove(e.get());var n=Hf(t);return e.set(n),de.some(Ya(n,1))}))},Vf=function(e,t){for(var n=0;n<e.lengeme)).),de,t,n){return _l.findRootInline(e,t,n).filter(ae.curry(Yf,t))},Jf=function(e,t,n){$f.start(e)):de.none()}))},Qf=function(e,t,n){var r=_l.normalizeForwardsiner());return _l.findRootInline(e,o,r).fold((function(){return du.,o)).map((futity,ae.identity,ae.identity,ae.identity)},rd=function(e){return e.fold(ae.constant("before"),ae.constant("start"),ae.constant("end"),ae.constant("after"))},od=function(e){return e.fold($f.before,$f.before,$f.after,$f.after)},id=function(e,t,n,r,o,i){return Ra([_l.findRootInline(t,(n,t,r)?$f.after(e?t:r):i})).getOr(i)},ad=function(e,t){return e.fold(ae.constant(!0),(functit)}(e,t)}))},ud=function(e,t){return e?t.fold(ae.compose(de.some,$f.s,t,du.rry(id,e,t,n,i,o)).filter(ae.curry(ad,r))}));return a.filtet,$on.setRng(Ya(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},pd=function(e,t){var n=t.selection.getRng(),r=e?Ya.fromRangeEnd(n):Ya.fromRangeStart(n);return!!md(t)&&(e&&Ji(r)?gd(!0,t.selection,r):!(e||!Qi(r))&&gd(!1,t.selection,r))},hd=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},vd=function(e){return!1!==e.settings.inline_boundaries},bd=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},yd=function(e,t,n){return Wf(t,n).map((function(t)),i=ae.curry(_l.isInlineTarget,e);return ld(n,i,r,o).bind((function(n){return yd(e,t, t=vc(null),n=ae.curry(_l.isInlineTarget,e);return ey"]'),e),o=Re.filter(n,e);Re.each(Re.difference(r,o),ae.curry(bd,!1)),Re.each(Re.difference(o}(e,t),function(e,t,n,r){if(t.selection.isCollfunction(r){var o=Ya.fromRangeStart(t.selection.getRng());sd(e,t.getBody(),o).bind((function(e){return yd(t,n,e)}))}))}}(n,e,t,r.parents))})),t},setCaretPosition:hd},xd=function(e,t){return function(n){return Wf(t,n).map((function(t){return wd.setCaretPosition(e,t),!0})).getOr(!1)}},Sd=function(e,t,n,r){var o=e.getBody(),i=ae.curry(_l.isInlineTarget,e);e.undoManager.ignore((function(){e.selection.setRng(function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.ofo=function(e,t){var n=Oc(t,e);return n||e}(e.getBody(),r.containeturn n?e.fold(ae.constant(de.some(dd(e))),de.none,ae.constant(de.ome(fd(e))),de.none,ae.constant(de.some(dd(e))))})).map(xd(e,t)).getOrThunk((function(){var u=du.navigate(n,o,r),c=u.bind((function(e){return sd(i,o,e)}));return a.isSome()&&c.isSome()?_l.findRootInline(i,o,r)..firstPositionIn(e),du.lastPositionIn(e)],(fl.n),!0)})).getOr(!1):c.bind((function(o){return u.map((function(o){return n?Sd(e,t,r,o):Sd(e,t,o,r),!0}))})).getOr(!1)}))},Ed=function(e,t,n){if(e.selection.isCollapsed()&&function(e){return!1!==e.settings.inline_boundaries}(e)){var r=Ya.fromRangeStart(e.selection.getRng());return Nd(e,t,n,r)}return!1},Td=no.immutable("start","end"),kd=no.immutable("rng","table","cells"),Rd=hf([{removeTable:["element"]},{emptyCells:["cells"]}]),Ad=function(e,t){return Hl(wr.fromDom(e),"td,th",t)},Dd=function(e,t){return zl(e,"table",t)},Bd=function(e){return!1===go.eq(e.start(),e.end())},Pd=function(e,t){return D Dd(e.end(),t).bind((fu:de.none()}))}))},Od=function(e){return Bu(e,"td,th")},_d=function(e,t){var n=Ad(t.startContainer,e),r=Ad(t.endContainer,e);return t.collapsed?de.none():R){return n.fold((function(){return r.bind((function(t){return Dd(t,d(Od(e)).map((function(e){return Td(e,t)}))}))}))}),(function(t){return Dd(t,e).bind((function(e){return Re.last(Od(e)).map((function(e){return Td(t,e)}))}))}))}),(function(t){return Id(e,t)?).bind((fune,t){r){vr,t),r=Ad(e.endContainer,t);return Ra([)})).o)}(,t){return Pd(e,t).map((function(t){return kd(e,t,Od(t))}))}(e,n)}))},Md=function(e,t){return Re.findIndex(e,(function(e){return go.eq(e,t)}))},),Md(e.cells(),e.rng().end())],(function(t,n){return e.cells().slice(t,n+1)}))}(e).map((flength===n.length?Rd.removeTable(e.table()):Rd.emptyCells(t)}))},zd=function(e,t){return Ld(e,t)ngeCount;n++)return Re.bind(emDom(t)]:[]}))},jd=function(e){return qd(e).length>1},Wd=function(e){return Re.filter(Ud(},$d=function(e,t){var n=Vd(t),r=Wd(e);return n.length>0?n:r},Kd=$d,Xd=function(e){return $d(Hd(e.selection.getSel()),wr.fromDom(e.getBody()))}unction(e,t,n,r){retururn function(e,t,n){return zd(t,n).map((function(t){return t.fold(ae.curry(Gd,e),ae.curry(Yd,e))}))}(e,t,n)}),(function(t){return function(e,t){return em(e,t)}(e,t)})).getOr(!1)},Qd=function(e,t){return Re.find(rf(t,e),Vo)},Zd=function(e,t){return Re.find(rf(t,e),(function(e){return"caption"===Pr.name(e)}))},em=function(e,t){return il(t),e.selection.setCursorLocaction(e,t,n,r,o){return du.navigate(n,e.getBody(),o).bind((function(i){return function(e,t,e.dom()).bind((functial(e)&&r.isEqual(o)}))})).getOr(!0)}(r,n,o,i)?function(e,t){return em(e,t)}(e,r):function(e,t,n){return Zd(e,wr.fromDom(n.getNode())).map((function(e){return!1===go.eq(e,t)}))}(t,r,i)})).or(de.some(!0))},nm=function(e,t,n,r){var o=Ya.fromRangeStart(e.selection.getRng());rer):function(e,t,n,.getNode())).map((funromDom(e.getBody());return Zd(r,n).fold((function(){return nm(e,t,r,n)}),(function(n){return function(e,t,n,r){var o=Ya.fromRangeStart(e.selection.getRng());return Xl(r)?em(e,r):tm(e,n,t,r,o)}(e,t,r,n)})).getOr(!1)},om=function(e,t){vard(e);return e.selection.isCwr.fromDom(e.getBody()),r=e.selection.getRng(),o=Xd(e);return 0!==o.length?Yd(e,o):Jd},am={deleteCommand:function(e){Of(e,!1)||Ed(e,!1)||ff(e,!1)||om(ection(e){Of(e,!0)||Ed(e,!0)||ff(e,!0)||ent).bind((function(n){return function(e,t,n){var r=function(t){return Zr(t,e)};return hl.closest(wr.fromDom(n),(function(e){return r(e).isSome()}),(function(e){return go.eq(wr.fromDom(t),e)})).bind(r)}(e,t,n.dom()).or(function(e,t){return de.from(Ii.DOM.getStyle(t,e,!0))}(e,n.dom()))})).getOr("")}},cm={getFontSize:um("font-size"),getFontFamily:ae.compose((function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),um("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"ptar t=e.container();return ni.isTex){return function(e,t){return e.startContainer===t&&0===e.startO-1]|(e)m.gfunction(t){return cm.getFontFamily(e.getBody(),t)}))},gm=function(e,)})).getOr("")}),(function(t){return cm.getFontSize(e.getBody(),t)}))},hm={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},vm=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},bm=function(e,t,n){return vm(e,t,(function(e){return e.nodeName===n}))},ym=function(e){return e&&"TABLE"===e.nodeName},Cm=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},wm=function(e,t){return Yi(e)&&!1===vm(e,t,zs)},xm=function(e,t,n){for(var r=new v(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(ni.isBr(t))return!0},Sm=function(e,t,n,r,o){var i,a,u,c,s=e.getRoot(),l=e.schema.getNonEmptyElements();if(u=e.getParent(o.parentNode,e.isBlock)||s,r&&ni.isBr(o)&&t&&e.isEmpty(u))return de.some(x(o.parentNode,e.nodeIndex(o)));for(i=new v(o,u);c=i[r?"prev":"next"]();){if("false"===e.getContentEditableParent(c)||wm(c,s))return de.none();if(ni.isText(c)&&c.nodeValue.length>0)return!1===bm(c,s,"A")?de.some(x(c,r?c.nodeValue&&a?de.some(x(a,0)):de.none()},Nm=function(e,t,n,r){var o,i,a,u,c,s,l,f=e.getRoot(),d=!1;if(o=r[(n?"start":"end")+"Container"],i=r[(n?"start":"end")+"Offset"],l=ni.isElement(o)&&i===o.childNodes.length,c=e.schema.getNonEmptyElements(),s=n,Yi(o))return de.none();if(ni.isElement(o)&&i>o.childNodes.length-1&&(s=!1),ni.isDocument(o)&&(o=f,i=0),o===f){if(s&&(u=o.childNodes[i>0?i-1:0])){if(Yi(u))return de.none();if(c[u.nodeName]||ym(u))return de.none()}if(o.hasChildNodes()){if(i=Math.min(!s&&i>0?i-1:i,o.childNodes.length-1),o=o.childNodes[i],i=ni.isText(o)&&l?o.data.length:0,!t&&o===f.lastChild&&ym(o))return de.none();if(function(e,t){for(;t&&t!==e;){if(ni.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(f,o)||Yi(o))return de.none();if(o.hasC(ni.isContentEditableFalse(u)||Yi(u)){d=!1;break}if(ni.isText(u)&&u.nodeValue.length>0){i=s?0:u.nodeValue.length,o=u,d=!0;break}if(c[u.nodeNam;break}}while(u=s?a.nextm(e,l,t,!0,o).each((function(e){o=e.container(),i=e.offset(iouet(),d=!0})))),s&&!t&&ni.isText(o)&&i===o.nodeValue.length&&Sm(e,l,t,!1,o).each((function(e){o=e.container(),i=e.offset(),d=!0})),d?de.some(x(o,i)):de.none()},Em={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange(),o=x.fromRangeStart(t);return Nm(e,n,!0,r).each((function(e){n&&x.isAbove(o,e)||r.setStart(e.container(),e.offset())})),n||Nm(e,n,!1,r).each((function(e){r.setEnd(e.container(),e.offset())})),n&&r.collapse(!0),hm.isEq(t,r)?de.none():de.some(r)}},Tm=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoVdAfter(n)),t.setRng(o)},Rm=function(e,t){var n,r,o=e.selection,i=e.dom,a=o.getRng();Em.normalize(i,a).each((function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var u=a.startOffset,c=a.startContainer;if(1===c.nodeType&&c.hasChildNodes()){var s=u>c.childNodes.length-1;c=c.childNodes[Math.min(u,c.childNodes.length-1)]||c,u=s&&3===c.nodeType?c.nodeValue.length:0}var l=i.getParent(c,i.isBlock),f=l?i.getParent(l.parentNode,i.isBlock):null,d=f?f.nodeName.toUpperCase():"",m=t&&t.ctrlKey;"LI"!==d||m||(l=f),c&&3===c.nodeType&&u>=c.nodeValue.let,n),i=e.getNonEse()]||r.length>0)return!0}(e.schema,c,l)||(n=i.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=i.create("br"),a.insertNode(n),Tm(i,o,n),km(i,o,n,r),e.undoManager.add()},Am=function(e,t){var n=wr.fromTag("br");oc.before(wr.fromDom(t),n),e.undoManager.add()},Dm=function(e,t){Bm(e.getBody(),t)||oc.after(wr.fromDom(t),wr.fromTag("br"));var n=wr.fromTag("br");oc.after(wr.fromDom(t),n),Tm(e.dom,e.selection,n.dom()),km(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Bm=function(e,t){return!!function(e){return ni.isBr(e.getNode())}(Ya.after(t))||du.nextPosition(e,Ya.after(t)).map((function(e){return ni.isBr(e.getNode())})).getOr(!1)},Pm=function(e){return e&&"A"===e.nodeName&&"href"in e},Om=function(e){return e.fold(ae.constant(!1),Pm,Pm,ae.constant(!1))},_m=function(e,t){t.fold(ae.noop,ae.curry(Am,e),ae.curry(Dm,e),ae.noop)},Im={inserte()?n.each(ae.curry(_m,e)):Rm(e,t)}},Lm=hf([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Mm=(Lm.before,Lm.on,Lm.after,function(,"fffs:Fmt,exactFromRange:function(e){return Fm.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:zm,getWin:function(etio.devarfinish()))},Wm=function(e,t){return go.contains(e,t)||go.eq(e,t)},Vm=function(e){return function(t){return Wm(e,t.starange(wr.fromngeCount?de.from(t.geltView(e);return Xm(t.dom()).filter(Vm(e))},Gm=function(e,t){return de.from(t).filter(Vm(e)).map(jm)},Jm=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),de.some(t)}catch(r){return de.none()}},Qm=function(e){return(e.bookmark?e.bookmark:de.none()).bind(ae.curry(Gm,wr.fromDom(e.getBody()))).bind(Jm)},Zm={store:function(e){var t=$m(e)?Ym(wr.fromDom(e.getBody())):de.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=wr.fromDom(e.getBody()),r=($m(e)?de.from(t):de.none()).map(Km).filter(Vm(n));e.bookmark=r.isSome()?r:e.bookmark},readRange:Xm,restore:function(e){Qm(e).each((function(t){e.selection.setRng(t)}))},getRng:Qm,getBookmark:Ym,validate:Gm},eg=function(e,t){var n=e.settings,r=e.dom,o=e.selection,i=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],u=parseInt(n.indentation,10),c=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(n.forced_root_block||r.getParent(o.getNode(),r.isBlock)||i.apply("div"),Re.each(o.getSelectedBlocks(),(function(e){return function(e,t,n,r,o,i){if("false"!==e.getContentEditable(i)&&"n(n,r){var u,s,l,f;if(n=n.toLowerCase(),(r=r||{}).type=n,r.target|iatePropagationStopped=a},r.isDefaultPrevented=i,r.isPropagationStopped=i,r.isImmediatePropagationStopped=i),e.beforeFire&&e.beforeFire(r),u=o[n])for(s=0,l=u.length;s<l;s++){if((f=u[s]).once&&c(n,f.func),stopPropagation(),r;if(!1===f.func.call(t,r))retur.off=c,r.once=fun})},r.has=func.toggleNativeEvent(t,n)}})),n){var r=this;if(r.removed&&"remove"!==e)return t;if(t=sg(r).fire(e,t,n),!1!==n&&r.parent)for(var o=r.parent();o&&!t.isPropagationStopped();)o.fieturn sg(this).off(e,t)},once:function(e,t){return sg(this).once(e,t)},hasEventListeners:function(e){return sg(this).has(e)}},fg=Ii.DOM,dg=function(e,t){return"selectionchange"===t?e.getDoc():!e.textmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElemt_root)[0]),e.evenunction(){var t;if(!e.r)}else r=function(n){o(e)&&e.tDelegates:function(){var e=this;sn.each(e._pendingNativeEvents,(function(t){mg(e,t)}))},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&tiveEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(dg(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(dg(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}},pg=gg=sn.extend({},lg,gg),hg=funcmmand(t,!1,n)}catch(o){}},vg=function(e,t){e._clickBlocker&&(e._clickBlocker.unbind(),e._clickBlocker=null),t?(e._clickBlocker=function(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventcliEditable=!1):(e.readonlynableObjectResizing",!1),e.focus(),e.nodeChanged())},bg=function(e,t){var n=e.readonly?"readonlap(eturn de.from(t.activeElement).map(wr.fromDom)},Ng=function(e){var t=xo.owner(e).dom();return e.dom()===t.activeElement},Eg=function(e){rem())}))},Tg=function(e,t){return function(e){return e.collapsed?de.from(Sa(e.startContainer,e.startOffset)).map(wr.fromDom):de.none()}(t).bind((function(t){return Wo(t)?de.some(t):!1===go.contains(e,t)?de.some(e):de.none.dom())})).fold((function(){e.selection.normalize()}),(function(t){return e.selection.setRng(t.toRange())}))etActive()}catch(n){e.focus()}else e.focus()},Ag=function(e){var t=e.getBody();return t&&function(e){return Ng(e)||Eg(e).isSome()}(ine?Ag(e):function(e){return e.iframeElement&&Ng(wr.fromDom(e.iframeElement))}(e)},Bg=function(e){return e.editorManager.setActive(e)},Pg=function(e,t){e.removed||(t?Bg(e):function(e){var t=e.selection,n=e.settings.content_editable,r=e.getBody(),o=t.getRng();e.quirks.refreshContentEditable();var i=function(e,t){return e.dom.getParent(t,(function(t){return"true"===e.dom.getContentEditable(t)}))}(e,t.getNode());e.$.c&&Zm.getRng(e).each((function(t){e.selection.setRng(t),(ze.gecko||n)&&(Rg(r),kg(e,o)),Bg(e))}(e))},Og=Dg,_g=function(e,t){return t.dom()[e]},Ig=function(e,t){return parseInt(Qr(t,e),10)},Lg=aemendiop+t.dom().clientTopeturn functi<=r&&n<=o}(o,i.x,i.y)},isEgo.contains(xo.owner(e),e)})).getOr(!1)}}function(e,t){for(var n in Hg.urls)if(Hg.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t},jg=func:Wg,initError:function(e){for(var t=[],n=1;n<arguments.lturn Pe.getOrDi(t=n[1]),{type:t,data:e[1]}},Gg=function(e){return 0===e.indexOf("blob:")?function(e){return new qe((function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might no{200===this.status?t(this.response):r()},o.onerror=r,o.send()}catch(a){r()}}))}(e):0===e.indexOf("data:")?function(e){return new qe((functioP([]))}for(r=new _(n.length)ype:e.type}))}))}(e):null},Jg=function(e){return new qe((ataURL(e)}))},Qg=Yg,Zg=0,ep=function(e){return(e||"blobid")+Zg++exOf("blob:")?void((i=e.getByUri(t.src))?n({image:t,blobInfo:i}):Gg(t.src).then((function(r){Jction(e){return e.base64()===o})),void(i?n({image:t,blobInfo:i}):Gg(t.src).then((function(r){i=e.create(ep(),r,o),e.add(i),n({image:t,blobInfo:i})}),(function(e){r(e)}))))},np=function(e){return e?e.getElementsByTagName("img"):[]},rp=0,op={uuid:function(e){return e+rp+++function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()}()}},ip=function(e,t){return e.hasOwnProperty(t.nodeName)},ap=function(e,t){return!!ni.isText(t)||!!ni.isElement(t)&&!ip(e,t)&&!Ys.isBookmarkNode(t)},up=function(e,t){if(ni.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||ip(e,t.nextSibling)))return!0}return!1},cp=function(e){var t,n,r,o,i,a,u,c,s,l,f,d=et(),(function(t){return ip(ap(_bliew,{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-urn{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}}(function(e){return e.inline?lp(e.getBody()):{left:0,top:0}}(e),function(e){vaft:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}}(e),function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=lp(e.getContentAreaContainer()),r=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.scr2,e.maxY=(t.inline?i.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-o.x,e.relY=n.pageY-o.y,e.width=r.offsetWidth,e.height=r.offseteight:r}),e.dom.setAttrib(o,"data-mce-selected",null);var i=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"o,border:0,paddargin:0,boxSizing:"border-box"}),i.appendChild(o),i}(t,r,e.width,e.height)}}}},hp=function(e,t){returdp(t)}(t,function(e){var t=e.getSel().getRangeAt(0).startContainer;return 3===t.nodeType?t.parentNode:t}(t.selection),e.element)){var r=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t}(e.element),o=t.fire("drop",{targetClone:r,clientX:nrgetClone,t.nsertContent(t.dom.getnction(e,t){var n=We.throttle((function(e,n){t._selectionOverrides.hideFakeCaret(),t.h.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(function(e){return e.element}(e)&&!e.dragging&&o>10){if(t.fire(dragging=!0,t.focus()}if(e.dragging){var i=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,fp(t,r));(function(e,t){e.parentNode!==t&&t.appendChild(e)})(e.ghost,t.getBody()),function(e,t,n,r,o,i){var a=0,u=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(a=t.pageX+n-o),t.pageY+r>i&&(u=t.pageY+r-ht=r-u+"px"}(e.ghost,i,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}}(u,e),o=hp(u,e),i=function(e,t){return function(){vp(e),e.dragging&&t.fire("dragend")}}(u,e),e.on("mousedown"(a,"mousemove",r),t.bind(a,"mouseup",i),e.on("remove",(function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",i)}))},yp=function(e){bp(e),function(e){e.on("drop",(function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(dp(n)||dp(e.dom.getContentEditableParent(n)))&&t.preventDefault()}))}(e)},Cp=function(e){return on.reduce(e,(function(e,t){return e.concat(function(e){var t=fuEleeateRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects()),e[on(e,t,n,r,o,i){var a,u,c=0,s=[],l=function(r){var i,a,l;for(l=Cp([r]),-1===e&&(l=l.reverse()),i=0;i<l.length;i++)if(a=l[i],!n(a,u)){if(s.length>0&&t(a,on.last(s))&&c++,a.line=tRects()))?(l(a=i.getNode()),f.curry(wp,cg.Up,ba,ion(e){return function(t){return function(e,t){return t.line>e}(e,t)}},Ep=function(e){return function(t){return function(e,t){return t.line===e}(e,t)}},Tp=ni.isContentEditableFalse,kp=Pc,Rp=function(e,t){return Math.abs(e.left-t)},Ap=function(e,t){return Math.abs(e.righnction(e,t){return on.reduce(e,(function(e,n){var r,o;return r=Math.min(Rp(e,t),Ap(e,t)),o=Math.min(Rp(n,t),Ap(n,t)),Dp(t,n)?n:Dp(t,e)?e:o===r&&Tp(n.node)||o<r?n:e}))},Pp=function(e,t,n,r){for(;r=kp(r,e,ma,t);)if(n(r))return},Op=function(e,t,n){var r,o=Cp(function(e){return on.filter(on.toArray(e.getElementsByTagName("*")),wc)}(e)),i=on.filter(o,(function(e){return n>=e.top&&n<=e.bottome.curry(r,ya),t.node),n}(e,r),t),r&&wc(r.node))?function(e,t){return{node:e.node,before:Rp(e,t)<Ap(eRects(),(functiight&&n>=e.top&&n<=e.bottom}(r,e,t)}),!1)},Ip=function(e,t){var n=null;re==n&&(n=setTimeout((function(){e.apply(null,r),n=null,r=null}),t))}}},Lp=function(e){var t=Ip((function(){if(!e.removed&&e.selection.getRng().colla}),0);e.on("focus",(function(){t.throttle()})),e.on("blur",(function(){t.cancN:,TFpt)t){var t,n=e.getBody(),r=Cc(e.getBody(),(function(t){return e.dom.isBlock(t)}),(function(){return Og(e)})),o="sel-"+e.dom.uniqueId(),i=function(t){return e.dom.hasClass(t,"mce-offscreen-selection")},a=function(){var t=e.dom.get(o);return t?t.getElementsByTagName("*")[0]:t},u=function(t){t&&e.selection.setRng(t)},c=function(){return e.selection.getRng()},s=function(t,n,o,i){return void 0===i&&(i=!0),e.fire("ShowCaret",{target:n,direction:t,before:o}).isDefaultPrevented()?null:(i&&e.selection.scrollIntoView(n,-1===t),r.show(o,n))},l=function(e,t){return t=Hc(e,n,t),-1===e?Ya.fromRangeStart(t):Ya.fromRangeEnd(t)},f=function(e){return Yi(e)||ea(e)||ta(e)},d=function(e){return f(e.startContainer)||f(e.endContainer)},m=function(n,r){var i,a,!n)return null;if(n.collapsed){if(!d(n))if(!1===r){if(h=l(-1,n),wc(h.getNode(!0)))return s(-1,h.getNode(!0),!1,!1);if(wc(h.getNode()))return s(-1,h.getNode(),!h.isAtEnd(),!1)}else{if(h=l(1,n),wc(h.getNode()))return s(1,h.getNode(),!h.isAtEnd(),!1);if(wc(h.getNode(!0)))return s(1,h.getNode(!0),!1,!1)}return null}return c=n.startContainer,f=n.startOffset,m=n.endOffset,3===c.nodeType&&0===f&&zp(c.parentNode)&&(c=c.parentNode,f=C.nodeIndex(c),c=c.parentNode),1!==c.nodeType?null:(m===f+1&&(i=c.childNodes[f]),zp(i)?(v=b=i.cloneNode(!0),(g=e.fire("ObjectSelected",{target:i,targetClone:v})).isDefaultPrevented()?null:(a=ql(wr.fromDom(e.getBody()),"#"+o).fold((function(){return y([])}),(function(e){return y([e.dom()])})),v=g.targetClone,0===a.length&&(a=y('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",o)).appendTo(e.getBody()),n=e.dom.createRng(),v===b&&ze.ie?(a.empty().append('<p style="font-size: 0" data-mce-bogus="all"></p>').append(v),n.setStartAfter(a[0].lastChild,0)),a.css({top:C.getPos(i,e.getBody()).y}),a[0].focus(),(u=e.selection.getSel()).removeAllRanges(),u.addRange(n),Re.each(Bu(wr.fromDom(e.getBody()),"*[data-mce-selected]"),(function(e){jr.remove(e,"data-mce-selected")})),i.setAttribute("data-mce-selected","1"),t=i,p(),n)):null)},g=function(){t&&(t.removeAttribute("data-mce-selected"),ql(wr.fromDom(e.getBt){var n=c();n.collapsed&&qg.isXYInContentArea(e,t.clientX,t.clientY)&&u(vu(e,n,!1))})),e.on("click",(function(t){var ildOf(n,e.selection.getNode())&&g())})),e.on("blur NewBlock",(function(){g()})),e.on("ResizeWindow FullscreenStateChanged",(function(){return r.reposition()}));var o=function(t,n){var r=e.dom.getParent(t,e.dom.isBlock),o=e.dom.getParent(n,e.dom.isBlock);return!(!r||!e.dom.isChildOf(r,o)||!1!==zp(Up(e,r)))||r&&!function(t,n){return e.dom.getParent(t,e.dom.isBlock)===e.dom.getParent(n,e.dom.isBlock)}(r,o)&&function(e){var t=us(e);if(!e.firstChild)return!1;var n=Ya.before(e.firstChild),r=t.next(n);return r&ve",(function(){t=!0})),e.on,(function(t){var r,i=t.targ&!1!==qg.isXYInContentArea(e,t.clientX,t.clientY))if(r=Up(e,i))zp(r)?(t.preventDefault(),m(hu(e,r))):(g(),Fp(r)&&t.shiftK=s(1,a.node,a.before,!1);e.getBody().focus(),u(c)}}})),e.on("keypress",(function(t){Mp.modifierPressed(t)||(t.keyCode,zp(e.selection.getNode())&&t.preventDefault())})),e.on("getSelectionRange",(function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}})),e.on("setSelectioe",(function(e){var t=e.ner.parentNode)|ultPrevented()&&e.clipboardData&&!ze.ie){var n=a();n00000px;}"+n+" *[contentEditable=false] {cursor: default;}"+n+" *[contentEditable=true] {cursor: text;}")}()),{showCaret:s,showBlockCaretContaineraret:p,destroy:function(){r.destroy(),t=null}}},Wp=sn.each,Vp=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},$p=function(e){return e.replace(/<!--|-->/g,"")},Kp=function(e,t,n){var r,o,i,a,u=1;for(a=e.getShortEndedElements(),(i=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'inr=new Array(n),o=new Array(n),i=function(n,r,o,i){for(var a=n;a-r<i&&a<o&&e[a]===t[a-r];)++a;return function(e,t,n){return{start:e,end:t,diag:n}}(n,a,r)},a=function(n,a,u,c){var s=a-n,l=c-u;if(0===s||0===l)return null;var f,d,m,g,p,h=s-l,v=l+s,b=(v%2==0?v:v+1)/2;for(r[1+b]=n,o[1+b]=a+1,f=0;f<=b;++f){for(d=-f;d<=f;d+=2){for(m=d+b,d===-f||d!==f&&r[m-1]<r[m+1]?r[m]=r[m+1]:r[m]=r[m-1]+1,p=(h+fs.diag===r-i)for(var l=r,f=i;l<o||f<u;)l<o&&f<u&&e[l]===t[f]?(c.push([0,e[l]]),++l,++f):o-r>u-i?(c.push([2,e[l]]),++l):(c.push([1,t[f]]),++f);else{n(r,s.start,i,s.start-s.diag,c).data,!1):ni.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},nh=function(e,t,n){var r=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t}(t);if(e.hasChildNodes()&&n<e.childNodes.length){var o=e.childNodep(e);rZp?(nh(t,e[1],n),n++):e[0]===Qp&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(t,n)}))}(eh(n,e),t),t},ih=function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,xo.children(wr.fromDom(n))},ah=function(e){return e.dom().innerHTML},uh=r.fromDom(n.createDocumentFragment()),o=itype:agments.join(""):e.content},dh=function(e){var t=wr.fromTuh(eturn n.length>0?[n]:[]})),funcurn e&&/^(IMG)$/.test(e.lor"!==n&&"blace(/[\Block:gh,moveStart:function(e,t,hildNw v(u=i[i.length-1],e.getParent(())if(3===o.nodeTying":"previ(e))return e},isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.scheme(/%(\w+)/g,(function(e,n){return t[n]||e}))),e},isEq:function(e,t){return t=t||"",e=""+((e=eyle(t,n),n)},getTextDecoration:function(e,t){var n;return e.getParent(t,(function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n})),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}},bh=Ys.isBookmarkNode,yh=vh.getParents,Ch=vh.isWhiteSpaceNode,wh=vh.isTextBlock,xh=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},Sh=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Nh=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Eh=function(e,t,n,r){var o,i,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?=u,-1!==(c=Eh(o,i,u)))return{container:u,offset:c}}else if(e.isBlock(u))break;if(s)return{container:s,offset:r=o?0:s.length}},kh=function(e,t,n,r,o){var i,a,u,c;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),i=yh(e,r),a=0;a<i.length;a++)for(u=0;u<t.length;u++)if((!("collapsed"in(c=t[u]))||c.collapsed===n.collapsed)&&e.is(i[a],c.selector))return i[a];return r},Rh=function(e,t,n,r){var o,i=e.dom,a=i.getRoot();if(t[0].wrapper||(o=i.getParent(n,t[0].block,a)),!o){var u=i.getParent(n,"LI,TD,TH");o=i.getParent(3===n.nodeType?n.parentNode:n,(function(t){return t!==a&&wh(e,t)}),u)}if(o&&t[0].wrapper&&(o=yh(i,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[r]&&!i.isBlock(o[r])&&(o=o[r],!vh.isEq(o,"br")););return o||n},Ah=function(e,t,n,r,o,i,a){var u,c,s,l,f;if(u=c=a?n:o,l=a?"previousSibling":"nextSibling",f=e.getRoot(),3===u.nodeType&&!Ch(u)&&(a?r>0:i<u.nodeValue.length))return u;for(;;){if(!t[0].block_expand&&e.isBlock(c))return c;for(s=c[l];s;s=s[l])if(!bh(s)&&!Ch(s)&&!Sh(s))return c;if(c===f||c.parentNode===f){u=c;break}c=c.parentNode}return u},Dh=function(e,t,n,r){var o,i=t.startContainer,a=t.startOffset,u=t.endContainer,c=t.endOffset,s=e.dom;return 1===i.nodeType&&i.hasChildNodes()&&3===(i=Sa(i,a)).nodeType&&(a=0),1===u.nodeType&&u.hasChildNodes()&&3===(u=Sa(u,t.collapsed?c:c-1)).nodeType&&(c=u.nodeValue.length),i=Nh(s,i),u=Nh(s,u),(bh(i.parentNode)||bh(i))&&3===(i=(i=bh(i)?i:i.parentNode).nextSibling||i).nodeType&&(a=0),(bh(u.parentNode)||bh(u))&&3===(u=(u=bh(u)?u:u.parentNode).previousSibling||u).nodeType&&(c=u.length),n[0].inline&&(t.collapsed&&((o=Th(s,e.getBody(),i,a,!0,r))&&(i=o.container,a=o.offset),(o=Th(s,e.getBody(),u,c,!1,r))&&(u=o.container,c=o.offset)),u=r?u:function(e,t){var n=xh(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=xh(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node3==inliousSibling"),u=Rh(e,n,u,"nextSibling"),n[0].block&&(s.isBlock(i)||(i=Ah(s,n,i,a,u,c,!0)),s.isBlock(u)||(u=Ah(s,n,i,a,u,c,!1)))),1===i.nodeType&&(a=s.nodeIndex(i),i=i.parentNode),1===u.nodeType&&(c=s.nodeIndex(u)+1,u=u.parentNode),{startContainer:i,startOffset:a,endContainer:u,endOffset:c}},Bh=vh.isEq,Ph=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].s.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},Ih=function(e,t,n,r,o,i){var a,u,c,s=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(s)if(void 0===s.length){for(a in s)if(s.hasOw.length;c++)if("attributes"===r?e.getAttrib(t,s[c]):vh.getStyle(e,t,s[c]))return n;return n},Lh=function(e,t,n,r,o){var i,a,u,c,s=e.formatter.get(n),l=e.dom;if(s&&t)for(a=0;a<s.length;a++)if(i=s[a],_h(e.dom,t,i)&&Ih(l,t,i,"attributes",o,r)&&Ih(l,t,i,"styles",o,r)){if(c=i.classes)for(u=0;u<c.length;u++)if(!e.dom.hasClass(t,c[u]))return;return i}},Mh={matchNode:Lh,matchName:_h,match:function(e,t,n,r){var o;return r?Oh(e,r,t,n):(r=e.selection.getNode(),!(!Oh(e,r,t,n)&&(o=e.selection.getStart(),o===r||!Oh(e,o,t,n))))},matchAll:function(e,t,n){var r,o=[],i={};return r=e.selection.getStart(),e.dom.getParent(r,(function(r){var a,u;for(a=0;a<t.length;a++)u=t[a],!i[u]&&Lh(e,r,u,n)&&(i[u]=!0,o.push(u))}),e.dom.getRoot()),o},canApply:function(e,t){var n,r,o,i,a,u=e.formatter.get(t),c=e.dom;if(u)for(n=e.selectionrit=e.startOffset,r=e.endContainer,o=e.endOffset;return t===r&&ni.isText(t)?n>0&&n<t.nodeValue.length&&(t=(r=Fh(t,n)).previousSibling,o>n?(t=r=Fh(r,o-=n).previousSibling,o=r.nodeValue.length,n=0):o=0):(ni.isText(t)&&n>0&&n<t.nodeValue.length&&(t=Fh(t,n),n=0),ni.isText(r)&&o>0&&o<r.nodeValue.length&&(oContainer:r,endOffset:o}}},qh=ji,Hh="_mce_caret",Uh=function(e){return function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==qh||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length>0},jh=function(e){var t;if(e)for(e=(t=new v(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},Wh=function(e){var t=wr.fromTag("span");return jr.setAll(t,{id:Hh,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&oc.append(t,wr.fromText(qh)),t},Vh=function(earelue.charAt(0)===qh&&t.deleteData(0,1),t}(n),o.startContainer===a&&o.startOffset>0&&o.setStart(a,o.startOffset-1),o.endContainer===a&&o.endOffset>0&&o.setEnd(a,o.endOffset-1),e.remove(n,!0)),i&&e.isEmpty(i)&&il(wr.fromDom(i)),t.setRng(o)},$h=function(e,t,n,r,o){if(r)Vh(t,n,r,o);else if(!(r=qs(e,n.getStart())))for(;r=t.get(Hh);)Vh(t,n,r,!1)},Kh=function(e,t,n){var r=e.dom,o=r.getParent(n,ka.curry(vh.isTextBlock,e));o&&r.isEmpty(o)?n.parentNode.replaceChild(t,n):(ol(wr.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},Xh=function(e,t){return e.appendChild(t),t},Yh=function(e,t){var n=Re.foldr(e,eateTextNode(qh)own",(function(e){!function(e,t,n,r.getStart().innerHTML===qh&&$h(e,t,n,qs(e,n.getStart())),37!==r&&39!==r||$h(e,t,n,qs(e,n.getStart()))}(r,t,n,e.keyCode)}))},Jh=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(Pr())&&!ni.isBogus(t.dom())},Qh={},Zh=on.filter,ev=on.each;!function(e,t){var n=Qh[e];n||(Qh[e]=n=[]),Qh[e].push(t)}("pre",(function(e){var t,n,r=e.selection.getRng();t=ni.matchNodeNames("pre")unnge){e(t)}))},nv=sn.each,rv={walk:function(e,t,n){var r,o,i,a,u,c,s,l=t.startContainer,f=t.startOffset,d=t.endContainer,m=t.endOffset;if((s=e.select("td[data-mce-selected],th[data-mce-selected]")).length>0)nv(s,(function(e){n([e])}));else{var g=function(e){var t;return 3===(t=e[0]).nodeType&&t===l&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===m&&e.length>0&&t===d&&3===t.nodeType&&e.splice(e.length-1,1),e},p=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},h=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNling":"previousSibling";for(u=(a=e).parentNode;a&&a!==t;a=u)u=a.parentNode,(c=p(a===e?a:a[o],o)).length&&(r||c.reverse(),n(g(c)))};if(1===l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[f]),1===d.nodeType&&d.hasChildNodes()&&(d=function(e,t){var n=e.childNodes;return--t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e}(d,m)),l===d)rif(|d,v(l,o,!0),(c=p(o===l?o:o.nextSibling,"nextSibling",i===d?i.nextSibling:i)).length&&n(g(c)),v(d,i)}}},ov=/^(src|href|style)$/,iv=sn.each,av=vh.isEq,uv=function(e){rett,n){var r,o,i;return r=t[n?"startContainer":"endCov(r,e.getBody()).next()||r),ni.isText(r)&&!n&&0===o&&(r=new v(r,e.getBody()).prev()||r),r},sv=function(e,t,n,r){var links&&"A"===e.tvh.normalizeStyleValue(c,vh.replaceVars(e,n),i),"number"==typeof i&&(i=e,o=0),(t.remove_similar||!o||av(vh.getStyle(c,o,i),e))&&c.setStyle(r,i,""),u=1})),u&&""===c.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),iv(t.attributes,(function(e,t){var i;if(e=vh.replaceVarce\-\w+/.test(e)&&(i+=(i?" ":"")+e)})),i))return void c.setAttrib(r,t,i);"class"===t&&r.removeAttribute("className"),ov.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}})),iv(t.classes,(function(e){e=vh.replaceVars(e,n),o&&!c.hasClass(o,e)||c.removeClass(r,e)})),a=c.getAttribs(r),i=0;i<a.length;i++){var s=a[i].nodeName;if(0!==s.indexOf("_")&&0!==s.indexOf("data-"))return!1}return"none"!==t.remove?(function(e,t,n){var r,o=t.parentNode,i=e.dom,a=e.schildNodes),(function(tline&&!av(n.inline,t)||i.remove(t,1)}(e,r,t),!0):void 0},dv={removeFormat:fv,remove:function(e,t,n,r,o){var i,a,u=e.formatter.get(t),c=u[0],s=!0,l=e.dom,f=e.selection,d=function(r){var i=function(e,t,n,r,o){var i;return iv(vh.getParents(e.dom,t.parentNode).reverse(),(function(t){var a;i||"_start"===t.id||"_end"===t.id||(a=Mh.matchNode(e,t,n,r,o))&&!1!==a.split&&(i=t)})),i}(e,r,t,n,o);return function(e,t,n,r,o,i,a,u){var c,s,l,f,d,m,g=e.dom;if(n){for(m=n.parentNode,c=r.parentNode;c&&c!==m;c=c.parentNode){for(s=g.clone(c,!1),d=0;d<t.length;d++)if(fv(e,t[d],u,s,s)){s=0;break}s&&(l&&s.appendChild(l),f||(f=s),l=s)}!i||a.mixed&&g.isBlock(n)||(r=g.split(n,r)),l&&(o.parentNode.insertBefore(l,o),f.appendChild(o))}return r}(e,u,i,r,r,!0,c,n)},m=function t(r){var o,i,a,f,d;if(ni.isElement(r)&&l.getContentEditable(r)&&(f=s,s="true"===l.getContentEditable(r),d=!0),o=sn.grep(r.childNodes),s&&!d)for(i=0,a=u.length;i<a&&!fv(e,u[i],n,r,r);i++);if(c.deep&&o.length){for(i=0,a=o.length;i<a;i++)t(o[i]);d&&(s=f)}},g=function(e){var t=l.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return Ys.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),ni.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),l.remove(t,!0),n},p=function(t){var n,r,o=t.commonAncesr=r.firstChild||r),l.isChildOf(n,r)&&n!==r&&!l.isBlock(r)&&!uv(n)&&!uv(r))return n=sv(l,n,"span",{id:"_start","data-mce-type":"bookmark"}),d(n),void(n=g(!0));n=sv(l,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=sv(l,r,"span",{id:"_end","data-mce-type":"bookmark"}),d(n),d(r),n=g(!0),r=g()}else n=r=d(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=l.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=l.nodeIndex(r)+1}rv.walk(l,t,(function(t){iv(t,(function(t){m(t),ni.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===vh.getTextDecoration(l,t.parentNode)&&fv(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)}))}))};if(r)r.nodeType?((a=l.createRng()).setStartBefore(r),a.setEndAfter(r),p(a)):p(r);else if("false"!==l.getContentEditable(f.getNode()))f.isCollapsed()&&c.inline&&!l.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,r){var o,i,a,u,c,s,l,f=e.dom,d=e.selection,m=[],g=d.getRng();for(o=g.startContainer,i=g.startOffset,c=o,3===o.nodeType&&(i!==o.nodeValue.length&&(u=!0),c=c.parentNode);c;){if(Mh.matchNode(e,c,t,n,r)){s=c;break}c.nextSibling&&(u=!0),m.push(c),c=c.parentNode}if(s)if(u){a=d.getBookmark(),g.collapse(!0);var p=Dh(e,g,e.formatter.get(t),!0);p=zh.split(p),e.formatter.remove(t,n,p),d.moveToBookmark(a)}else{l=qs(e.getBody(),s);var h=Wh(!1).dom(),v=Yh(m,h);Kh(e,h,l||s),Vh(f,d,l,!1),d.setCursorLocation(v,1),f.isEmpty(s)&&f.remove(s)}}(e,t,n,o):(i=Ms.getPersistentBookmark(e.selection,!0),p(f.getRng()),f.moveToBookmark(i),c.inline&&Mh.match(e,t,n,else{rh++n[tBooildNodes),(function(e){t.appendChild(e)})),t}return n},vv=function e(t,n,r){mv(t.childNodes,(function(t){gv(t)&&(n(t)&&r(t),t.hasCn,r){e.setStyle(r,ametiov=ftion(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";mv(e.select(r,n),(function(n){gv(n)&&mv(t.styles,(function(t,r){e.setStyle(n,r,"")}))}))}}(e.dom,t,r)}))},Sv=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(sn.walk(r,ae.curry(wv,e),"childNodes"),wv(e,r))},Nv=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&vv(r,bvng(r,!0)))},kv=function(e,t,n,r,o){Mh.matchNode(e,o.parentNode,n,r)&&dv.removeFormat(e,t,r,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,(function(i){if(Mh.matchNode(e,i,n,r))return dv.removeFormat(e,t,r,o),!0}))},Rv=sn.each,Av={applyFormat:function e(t,n,r,o){var i,a,u=t.formatter.get(n),c=u[0],s=!o&&t.selection.isCollapsed(),l=t.dom,f=t.selection,d=function(e,t){if(t=t||c,e){if(t.onformat&&t.onformat(e,t,r,o),Rv(t.styles,(function(t,n){l.setStyle(e,n,vh.replaceVars(t,r))})),t.styles){var n=l.getAttrib(e,"style");n&&e.setAttribute("data-mce-style",n)}Rv(t.attributes,(function(t,n){l.setAttrib(e,n,vh.replaceVars(t,r))})),Rv(t.classes,(function(t){t=vh.replaceVars(t,r),l.hasClass(e,t)||l.addClass(e,t)}))}},m=function(e,t){var n=!1;return!!c.selector&&(Rv(e,(function(e){if(!("collapsed"in e)||e.collapsed===s)return l.is(t,e.selector)&&!zs(t)?(d(t,e),n=!0,!1):void 0})),n)},g=function(e,o,i,a){var s,l,f=[],g=!0;s=c.inline||c.block,l=e.create(s),d(l),rv.walk(e,o,(function(o){var i;Rv(o,(function o(p){var h,v,b,y;if(y=g,h=p.nodeName.toLowerCase(),v=p.parentNode.nodeName.toLowerCase(),1===p.nodeType&&e.getContentEditable(p)&&(y=g,g="true"===e.getContentEditable(p),b=!0),vh.isEq(h,"br"))return i=0,void(c.block&&e.remove(p));if(c.wrapper&&Mh.matchNode(t,p,n,r))i=0;else{if(g&&!b&&c.block&&!c.wrapper&&vh.isTextBlock(t,h)&&vh.isValid(t,v,s))return p=e.rename(p,s),d(p),f.push(p),void(i=0);if(c.selector){var C=m(u,p);if(!c.inline||C)return void(i=0)}!g||b||!vh.isValid(t,s,h)||!vh.isValid(t,v,s)||!a&&3===p.nodeType&&1===p.nodeValue.length&&65279===p.nodeValue.charCodeAt(0)||zs(p)||c.inline&&e.isBlock(p)?(i=0,Rv(sn.grep(p.childNodes),o),b&&(g=y),i=0):(i||(i=e.clone(l,!1),p.parentNode.insertBefore(i,p),f.push(i)),i.appendChild(p))}}))})),!0===c.links&&Rv(f,(function(e){!function e(t){"A"===t.nodeName&&d(t,c),Rv(sn.grep(t.childNodes),e)}(e)})),Rv(f,(function(o){var i,a=function(e){var t=!1;return Rv(e.childNodes,(function(e){if(function(e){return e&&1===e.nodeType&&!Ys.isBookmarkNode(e)&&!zs(e)&&!ni.isBogus(e)}(e))return t=e,!1})),t};return i=function(e){var t=0;return Rv(e.childNodes,(function(e){vh.isWhiteSpaceNode(e)||Ys.isBookmarkNode(e)||t++})),t}(o),(f.length>1||!e.isBlock(o))&&0===i?void e.remove(o,1):void((c.inline||c.wrapper)&&(c.exact||1!==i||(o=function(t){var n,r;return(n=a(t))&&!Ys.isBookmarkNode(n)&&Mh.matchName(e,n,c)&&(r=e.clone(n,!1),d(r),e.replace(r,t,!0),e.remove(n,1)),r||to),Ev(e,c,r,o),Tv(e,c,r,o)))}))};if("false"!==l.getContentEditable(f.getNode())){if(c){if(o)o.nodeType?m(u,o)||((a=l.createRng()).setStartBefore(o),a.setEndAfter(o),g(l,Dh(t,a,u),0,!0)):g(l,o,0,!0);else if(s&&c.inline&&!l.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var r,o,i,a,u,c,s=e.selection;a=(r=s.getRng(!0)).startOffset,c=r.startContainer.nodeValue,(o=qs(e.getBody(),s.getStart()))&&(i=jh(o));var l=/[^\s\u00a0\u00ad\u200b\ufeff]/;c&&a>0&&a<c.length&&l.test(c.charAt(a))&&l.test(c.charAt(a-1))?(u=s.getBookmark(),r.collapse(!0),r=Dh(e,r,e.formatter.get(t)),r=zh.split(r),e.formatter.apply(t,n,r),s.moveToBookmark(u)):(o&&i.nodeValue===qh||(o=function(e,t){rev(n,t)}}else{o=f.getNode();for(var h=0,v=u.length;h<v;h++id d(o,u[h])}}},Dv=sn.each,Bv={formatChanged:function(e,t,n,r,o){null===t.get()&&function(e,t){var n={};e.set({}),t.on("NodeChange",(function(r){var o=vh.getParents(t.dom,r.element),i={};o=sn.grep(o,(function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")})),Dv(e.get(),(function(e,r){Dv(o,(function(a){return t.formatter.matchNode(a,r,{},e.similar)?(n[r]||(Dv(e,(function(e){e(!0,{node:a,format:r,parents:o})})),n[r]=e),i[r]=e,!1):!Mh.matchesUnInheritedFormatSelector(t,a,r)&&void 0}))})),Dv(n,(function(e,t){i[t]||(delete n[t],Dv(e,(function(e){e(!1,{node:r.element,format:t,parents:o})})))}))}))}(t,e),function(e,t,n,r){var o=e.get();Dv(t.split(","),(function(e){o[e]||(o[e]=[],o[e].similar=r),o[e].push(n)})),e.set(o)}(t,n,r,o)}},Pv={get:function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecorationolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"on(n,r){e.setAttrib(t,r,n)})ector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return sn.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),(function(e){t[e]={block:e,remove:"all"}})),t}},Ov=sn.each,_v=Ii.DOM,I}),a=function(e){var t;return r="string"==typeof e?{name:e,clc=uings)),o):""},LsetAttrib(o,t,e)})),Ov(t.classes,e)||_v.addClass(o,e)})),e.fire("PreviewFormats"),_v.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=_v.getStyle(e.getBody()seFlggle"in i[0]&&!i[0].toggle?Av.applyFormat(e,n,r,o):dv.remove(e,n,r,o)}},qv={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("metaShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShorreturn function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)i.hasOwnProperty(a)&&(r[a]=e(r[a],i[a]))}return r}},Uv=Hv((function(e,t){return ge.isObject(e)&&ge.isObject(t)?Uv(e,t):t})),jv=Hv((function(e,t){return t})),Wv={deepMerge:Uv,merge:jv},Vv=function(e,t){return e.fire("PreProcess",t)},$v=function(e,t){return e.fire("PostProcess",t)},Kv=function(e){return e.fire("remove")},Xv={register:function(e,t,n){e.addAttributeFilter("data-mce-tabindll)})),e.addAttributeFilter("st.url_converter_scope;a--;)void 0!==(i=(o=e[a]).attributes.map[u])?(o.attr(.length>0?n:null))})),e.addAttributeFilter("data-mce-type",(function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attributes.map["data-mce-type"]||n.cleanup||r.remove()})),e.addNodeFilter("noscript",(function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=pi.decode(t.value))})),e.addNodeFilter("script,style",(function(e,n){for(var r,o,*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?attr("type","mce-no/type"===i?null:i.replace(/^mce\-/,"")),"xhtlength>0&&(r.firstChild.value="\x3c!--\n"+u(o)+"\n--\x3e")})),e.addNodeFilter("#comment",(function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.repcape(t.value).substr(14))})),e.addNo===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))})),e.addAttributeFilter("data-mce-type",(function(t){Re.each(t,(function(t){"formaema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())}},Yv={process:function(e,t,n){return function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,n)?function(e,t,n){var r,o,i,a=e.dom;return t=t.cloneNode(!0),(r=document.implementation).createHTMLDocument&&(o=r.createHTMLDocument(""),sn.each("BODY"===t.nodeName?t.childNodes:[t]Wv.merge(n,{node:t})),i&&n){e.addNodeFilter("font",(function(e){Re.each(e,(function(e){var r=t.parse(e.attr("style")),o=e.attr("colounction(e,t){Rvar n=y();t.conaddNodeFilter("strikecoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))}))}))}(e,n)},Qv={register:function(e,t){t.inline_styles&&Jv(e,t)}},Zv=/^[ \t\r\n]*$/,eb={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},tb=function(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])rrent&&e.remove(),,o=this;if("string"=t){if(e in n.map)furn n.map[e]}},e.pr.name&&(i[i.length]=this;for(e=n.firstt=e.parent,n=e.nexthis;return e.parentis))t.name===e&&n=functioev=mpts.mdat3===i.type&&!Zv.test(i.value))return!1;if(3===i.type&&i.parent&&t[i.parent.name]&&Zv.test(i.value))return!1;if(n&&n(i))return!1}while(i=tb(i,this));return!0},e.prototype.walk=function(e){return tb(this,null,e)},e}(),rb=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new nb("br",1)).shortEnded=!0:r.empty().append(new nb("#text",3)).value=""},ob=function(e){return ib(e,"#text")&&""===e.firstChild.value},ib=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},ab=function(e,t,n,r){return r.isEmpty(t,n,(function(t){return function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty}(e,t)}))},ub=function(e,t){return e&&(t[e.name]||"br"===e.name)},cb=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",(function(e,r,o){var i,a,u,c,g.body=1,i=0;i<m;i++)if(u=(a=e[i]).parent,g[a.parent.name]&&a===u.lastChild){for(s=a.prev;s;){if("span"!==(l=s.name)||"bookmark"!==s.attr("data-mce-type")){if("br"!==l)break;if("br"===l){a=nu.lastChild===c&&(c=u,!g[u.name]);)u=u.parent;c==tion(e){return e.split(" ").filter((function(e){return e.length>0ength;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new nb("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}})),t.validate&&n.getValidClasses()&&e.addAttributeFiu,c,s=e.length,l=n.getValidClasses();s--;){for(r=(t=e[s]).attr("class").split(" "),a="",o=0;o<r.lengthname],!c&&u&&u[i]&&(c=!0),c&&(a&&(a+=" "),a+=i);a.length||(a=null),t.attr("class",a)}}))},sb=sn.makeMap,lb=sn.each,fb=sn.explode,db=sn.extend,mb=function(e,t,n){-1===sn.inArray(t,n)&&(e.addAttributeFilter(n,(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})),t.push(n))},gb=function(e,t,n){var r=Wi(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection?r:sn.trim(r)},pb=function(e,t,n,r){var o=r.selection?Wv.merge({forced_root_block:!1},r):r,i=e.parse(n,o);return Xv.trimTrailingBr(i),i},hb=function(e,t,n,r,o){var i=function(e,t,n){return N(e,t).serialize(n)}(t,n,r);return function(e,t,n){return!t.no_events&&e?$v(e,Wv.merge(t,{content:n})).content:n}(e,o,i)};!function(e){e.isBookmarkNode=Ys.isBookmarkNode}(U||(U={}));var vb=U,bb=ni.isContentEditableFalse,yb=ni.isContentEditableTrue,Cb=function(e,t){var n,r,o,i,a,u,c,s,l,f,d,m,g,p,h,v,b,y=t.dom,C=sn.each,w=t.getDoc(),x=document,S=Math.abs,N=Math.round,E=t.getBody();i={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var T=".mce-content-body";t.contentStyllack;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+T+" .mce-resizehandle:hover {background: #000}"+T+" img[data-mce-selected],"+T+" hr[data-mce-selected] ion: absolute;"+(ze.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+T+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var k=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},R=function(e){var n=e.target;(function(e,t){return k(e.target)&&!_p(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),t.selection.select(n))},A=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},D=function(e){var n=t.settings.object_resizing;return!1!==n&&!ze.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&lo.is(w!1!==t.settings.resize_img_proportional?!Mp.modifierPressed(e):Mp.modifierPressed(e)||k(n)&&a[2]*a[3]!=0)&&(S(i)>S(C)?(h=N(p*m),p=N(h/m)):(p=N(h/m),h=N(p*m))),y.setStyles(A(r),{width:p,height:h}),w=(w=a.startPos.x+i)>0?w:0,x=(x=a.startPos.y+C)>0?x:0,y.setStyles(o,{left:w,top:x,display:"block"}),o.innerHTML=p+" &times; "+h,a[2]<0&&r.clientWidth<=p&&y.setStyle(r,"left",s+(f-p)),a[3]<0&&r.clientHeight<=h&&y.setStyle(r,"top",l+(d-h)),(i=E.scrollWidth-v)+(C=E.scrollHeight-b)!=0&&y.setStyles(o,{left:w-i,top:x-C}),g||(t.fire("ObjectResizeStart",{target:n,width:f,height:d}),g=!0)},P=function e(){g=!1;var i=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?y.setStyle(A(n),e,r):y.setAttrib(A(n),e,r))};i("width",p),i("height",h),y.unbind(w,"mousemove",B),y.unbind(w,"mouseup",e),x!==w&&(y.unbind(x,"mousemove",B),y.unbind(x,"mouseup",e)),y.remove(r),y.remove(o),O(n),t.fire("ObjectResized",{target:n,width:p,height:h}),y.setAttrib(n,"style",y.getAttrib(n,"style")),t.nodeChanged()},O=function(e){var g,S,N,T,k;_(),M(),g=y.getPos(e,E),s=g.x,l=g.y,k=e.getBoundingClientRect(),S=k.width||k.right-k.left,N=k.height||k.bottom-k.top,n!==e&&(n=e,p=h=0),T=t.fire("ObjectSelected",{target:e}),D(e)&&!T.isDefaultPrevented()?C(i,(function(e,t){var i,g=function(t){u=t.screenX,c=t.screenY,f=A(n).clientWidth,d=A(n).clientHeight,m=d/f,a=e,e.s=n.cloneNode(!0),y.addClass(r,"mce-clonedresizable"),y.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,y.setSty==w&&(y.bind(x,"mousemze-helper","data-mce-bogus":"all"},f+" &times; "+d)};(i=y.get("mceResizeHandle"+t))&&"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),ze.ie&&(i.contentEditable=!1),y.bind(i,"mousedown",(fp:fuet("mceResizeHandle"+e))&&(y.unbind(t),y.remove(t))},I=function(n){var r,o=funtribute("data-mce-selected")})),r="mousedown"===n.ty0],E)&&(F(),o(e.getStart(!0),r)&&o(e.getEnd(!0),r))?void O(r):void _()},L=function(e){return bb(function(e,t){for(;t&&t!==e;){if(yb(t)||bb(t))return t;t=t.parentNode}return null}(t.getBody(n i){var t=i[e];t.elm&&(y.unbind(t.elm),delete t.elm)}},F=function(){try{t.getDoc().execCommand("enableObj("init",(function(){F(),ze.ie&&ze.ie>=11&&(t.on("mousedown click",(function(e){var n=e.target,r=n.nodeName;g||!/^(TABLE|IMG|HR)$/.test(r)||L.selend(E,"mscontrolselect",(function(e){var n=function(e){We.setEditorTimeout(t,(function(){t.selection.select(e)}))};return L(e.target)?(e.preventDefault(),void n(e.target)):void(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target)))})));var e=We.throttle((function(e){t.composing||I(e)}));t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",(function(t){n&&"TABLE"===n.nodeName&&e(t)})),t.on("hide blur",_),t.on("contextmenu"ction(){n=r=null}}},wb=function(e){return ni.isContentEditableTrue(e)||ni.isContentEditableFalse(e)},xb={fromPoint:function(e,t,n){var r,o,i=n;if(i.caretPositionFromPoint)(o=i.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(i.body.createTextRange){r=i.){var r,i,a;if(r=n.elementFromPoint(e,t),i=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),i.moveToElementText(r),a=(a=sn.toArray(i.getClientRects())).sort((function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))})),a.length>0){t=(a[0].bottom+a[0].top)/2;try{return i.moveToPoint(e,t),i.collapse(!0),i}catch(o){}}return null}(e,t,n)}return function(e,t){var n=e&&e.parentElement?e.parentElement():null;return ni.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,wb))?null:e}(r,n.body)}return r}},Sb=function(e,t){return Re.map(t,(function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))},Nb=function(e,t){retvar n=(t||document).createDocumentFragment();ffset;return ni.getOr([]):[t].concat(e(n))}))},Ob=function(e,t){return Ra([Ab(t),Db(t)],(function(t,n){var r=Re.find(Bb(esSome()&&o.isSome()})).getOr(!1)},_b=function(e,t,n,r){var o=n,i=new v(nn v?t.));"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Ib=no.immutable("element","width","row[ne.foldl(e,(function(e,t){return t.cells().length>e?t.cells().length:e}),0)},Hb=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var o=n[r].cells(),i=0;i<o.length;i++)if(go.eq(o[i],t))return de.some(Mb(i,r));return de.none()},Ub=function(e,t,n,r,o){for(var i=[],a=e.rows(),u=n;u<=o;u++){var c=a[u].cells(),s=t<r?c.slice(t,r+1):c.slice(r,t+1);i.push(Lb(a[u].element(),s))}return i},jb=function(e){var t=Ib(Tb(e),0,[]);return Re.each(Bu(e,"tr"),(function(e,n){Re.each(Bu(e,"td,th"),(function(r,o){!function(e,t,n,r,o){for(var i=Fb(o,"rowspan"),a=Fb(o,"colspan"),u=e.rows(),c=n;c<n+i;c++){u[c]||(u[c]=Lb(kb(r),[]));for(var s=t;s<t+a;s++)u[c].cells()[s]=c===n&&s===t?o:Tb(o)}}(t,function(e,t,n){for(;zb(e,t,n);)t++;return t}(t,o,n),n,e,r)}))})),Ibrn function,t),oc.append(n,r),n}(e,function(e){return Re.map(e.rows(),(function(e){var t=Re.map(e.cells(),(function(e){var t=kb(e);return jr.remove(t,"colspan"),jr.remove(t,"rowspan"),t})),n=Tb(e.element());return Zs(n,t),n}))}(e))},Vb=function(e,t,n)ction(t){return Hb(e,n).map((function(n){rett.x(),o=t.y(),i=n.x(),a=n.y(),u=o<a?Ub(e,r,o,i,a):Ub(e,r(e,t,n)}))}))},$b=function(e,t){return Re.find(e,(function(e){return"li"===Pr.name(e)&&Ob(e,t)})).fold(ae.constant([]),(function(t){return function(e){return Re.find"),wr.fromTag(Pr.namern Fo(e)||Lo(e)})),i=$b(r,t),a=o.concat(i.length?i:function(e){return Uo(e)?xo.parent(e).filter(Ho).fold(ae.constant([]),(function(t){return[e,t]})):Ho(e)?[e]:[]}(n));return Re.map(a,Tb)},Xb=function(){return Rb([])},Yb=function(e,t){return function(e,t){var n=Re.foldl(t,(function(e,t){return oc.append(t,e),t}),e);return t.length>0?Rb([n]):n}(wr.fromDom(t.cloneContents()),Kb(e,t))},Gb=function(e,t){return function(e,t){return zl(t,"table",ae.curry(go.eq,e))}(e,t[0]).bind((function(e){var n=t[0],r=t[t.length-1],o=jb(e);return Vb(o,n,r).map((function(e){return Rb([Wb(e)])}))})).getOrThunk(Xb)},Jb=function(e,t){var n=Kd(t,e);return n.length>0?Gb(e,n):function(e,t){return t.length>0&&t[0].collapsed?Xb():Yb(e,t[0])}(e,t)},Qb=function(e,t){var n,r=e.selection.getRng(),o=e.do+='<span id="__caret">_</span>',a.startContainer===u&&a.endContainer===u?u.body.innerHTML=t:(a.deleteContents(),0===u.body.childNodes.length?u.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(o=u.createDocumentFragment(),i=u.createElement("div"),o.appendChild(i),i.outerHTML=t,a.insertNode(o))),r=e.dom.get("__caret"),(a=u.createRange()).setStartBefore(r),a.setEndBefore(r))}cd="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}else e.fire("SetContent",n)},ey=function(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return de.from(i).map(wr.fromDom).map((function(e){returo(ee){return e.dom()})).getOr(e)},ty=function(e,t,n){return ey(e,t,!0,n,(funt>0?t-1:t}))},ry=function(eibling;return e||n},oy=function(e,t,n,r){var o,i,a=[];if(i=e.getRoot(),n=e.getParent(n||ty(i,t,!1),e.isBlock),r=e.getParent(r||ny(i,t,!1)&&r&&n!==r){o=n;for(var u=new v(n,i);(o=u.next())&&o!==r;)e.isBlock(o)&&a.push(o)}return r&&n!==r&&r!==i&&a.push(r),a},iy=sn.each,ay=function(e){return!!e.select},uy=function(e){return!(!e||!e.ownerDocument)&&go.contains(wr.fromDom(e.ownerDocument),wr.fromDom(e))},cy=function(e,t,n,r){var o,i,a,u,c,s=function(e,t){return Zb(r,e,t)},f=function(e){var t=m();t.collapse(!!e),g(t)},d=function(){return t.getSelection?t.getSelecreturn t.compareBoundaryPoints(e,n)}catch(r){return-1}};if(!t)return null;if(null==(c=t.document))return null;if(void 0!==r.bookmark&&!1===Og(r)){var f=Zm.getRng(r);if(f.isSome())return f.map((function(e){return Sb(r,[e])[0]})).getOr(c.createRange())}try{(n=d())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():c.createRange())}catch(s){}return(o=Sb(r,[o])[0])||(o=c.createRange?c.createRange():c.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(i=e.getRoot(),o.setStart(i,0),o.setEnd(i,0)),a&&u&&(0===l(o.START_TO_START,o,a)&&0===l(o.END_TO_END,o,a)?o=u:(a=null,u=null)),o},g=function(e,t){var n,o;if(function(e){return!!e&&(!!ay(e)||uy(e.startContainer)&&uy(e.endContainer))}(e)){var i=ay(e)?e:null;if(i){u=nua=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||zeet])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||=e.createRngll,controlSelection:apse:f,setCursorLocation:function(t,n){var o=e.createRng();t?(o.setStart(t,n),o.setEnd(t,n),g(o),f(!1)):(_b(e,o,r.getBody(),!0),g(o))},getContent:function(e){return Qb(r,e)},setContent:s,getBookmark:function(e,t){return o.getBookmark(e,t)},moveToBookmark:function(e){return o.moveToBookmark(e)},select:function(t,n){return function(e,t,n){return de.from(t).map((function(t){var r=e.nodeIndex(t),o=e.createRng();return o.setStart(t.parentNode,r),o.setEnd(t.parentNode,r+1),n&&(_b(e,o,t,!0),_b(e,o,t,!1)),o})){var e=m(),t=d();rnts?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:p,setNode:fuetOuterHTML(t)),t},getNode:function(){r,setRng:g,getRng:m,n){return oy(e,m(),t,n)},normalize:function(){var t=m();if(!jd(d())){var n=Em.normalize(e,t);return n.each((function(e){g(e,p())})),n.ge n=t.elet()),i={};iy(c,(function(t,n){iy(r,(function(a){if(e.is(a,n))return o[n]||(iy(t,(function(e){e(!0,{node:a,selector:n,pardelete o[t],iy(e,(function(e){e(!1,{node:n,selector:t,parents:r})})))}))}))),c[t]||(c[t]=[]),c[t].push(n),h},getScrollContainer:fu"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return Fu(r,e,t)},placeCaretAt:function(e,t){return g(xb.fromPoint(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=m();return e.collapsed?Ya.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=u=null,i.destroy()}};return o=vb(h),i=Cb(h,r),h.bookmarkManager=o,h.controlSelection=i,h},sy=ni.isContentEditableFalse,ly=xa,fy=Kc,dy=$c,my=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},gy=function(e,t,n,r){var o,i,a,u,c=e===yu.Forwards,s=c?dy:fy;return!r.collapsed&&(o=ly(r),sy(o))?pu(e,t,o,e===yu.Backwards,!0):(u=function(e){return Ki(e.startContainer)}(r),s(i=Vc(e,t.getBody(),r))?hu(t,i.getNode(!c)):(i=n(i))?s(i)?pu(e,t,i.getNode(!c),c,!0):s(a=n(i))&&function(e,t){var n=_c(e,t);return!(n||!ni.isBr(e.getNode()))||n}(i,a)?pu(e,t,a.getNode(!c),c,!0):u?bu(t,i.toRange(),!0):null:u?r:null)},py=function(e,t,n,r){var o,i,a,u,c,s,l,f,d;if(d=ly(r),o=Vc(e,t.getBody(),r),i=n(t.getBody(),Np(1),o),a=on.filter(i,Ep(1)),c=on.last(o.getClientRects()),(dy(o)||Xc(o))&&(d=o.getNode()),(fy(o)||Yc(o))&&(d=o.getNode(!0)),!c)return null;if(s=c.left,(u=Bp(a,s))&&sy(u.node))return l=Math.abs(s-u.left),f=Math.abs(s-u.right),pu(e,t,u.node,l<f,!0);if(d){var m=function(e,t,n,r){var o,i,a,u,c,s,l=us(t),f=[],d=0,m=function(e){return on.last(e.getClientRects())};1===e?(o=l.next,i=ya,a=ba,u=Ya.after(r)):(o=l.prev,i=ba,a=ya,u=Ya.before(r)),s=m(u);do{if(u.isVisible()&&!a(c=m(u),s)){if(f.length>0&&i(c,on.last(f))&&d++,(c=pa(c)).position=u,c.line=d,n(c))return f;f.push(c)}}while(u=o(u));return f}(e,t.getBody(),Np(1),d);if(u=Bp(on.filter(m,Ep(1)),s))return bu(t,u.position.toRange(),!0);if(u=on.last(on.filter(m,Ep(0))))return bu(t,u.position.toRange(),!0)}},hy=function(e,t,n){var r,o,i=us(e.getBody()),a=ka.curry(my,i.next),u=ka.curry(my,i.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?a(Ya.fromRangeStart(n)):u(Ya.fromRangeStart(n)))||(o=function(e){var t=e.dom.,t}(e),,o=ka.e.son(e,t){var n,r=t?1:-1,o=t?Sp:xp,i=e.selection.getRng();return(n=py(r,e,o,i))?n:(n=hy(e,r,i))||null}(e,t);return!!n&&(e.selection.setRng(n),!0)}},yy=function(e,t){return Re.bind(function(e){return Re.map(e,(function(e){return Wv.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:ae.noop},e)}))}(e),(function(e){return function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey}(e,t)?[e]:[]}))},Cy=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},wy=function(e,t){return Re.find(yy(e,t),(e,t){e.on("keydown",(function(n){!1===n.isDefaultPrevented()&&function(e,t,n){var r=yr.detect().os;wy([{keyCode:Mp.RIGHT,action:vy(e,!0)},{keyCode:Mp.LEFT,action:vy(e,!1)},{keyCode:Mp.UP,action:by(e,!1)},{keyCode:Mp.DOWN,action:by(e,!0)},{keyCode:Mp.RIGHT,action:pc(e,!0)},{keyCode:Mp.LEFT,action:pc(e,!1)},{keyCode:Mp.UP,action:hc(e,!1)},{keyCode:Mp.DOWN,action:hc(e,!0)},{keyCode:Mp.RIGHT,action:wd.move(e,t,!0)},{keyCode:Mp.LEFT,action:wd.move(e,t,!1)},{keyaltKey:r.isOSX(),action:wd.moveNextWord(e,t)},{keyCode:Mp.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:wd.movePrevWord(e,t)}],n).each((function(e){n.xo.children(e).length},Ny=function(e,t,n,r){var o=ae.curry(Jh,t),i=Re.map(Re.filter(r,o),(function(e){return e.dom()}));if(0===i.length)Df(t,e,n);else{var a=function(e,t){var n=Wh(!1),r=Yh(t,n.dom());return oc.before(wr.fromDom(e),n),tl.remove(wr.fromDom(e)),Ya(r,0)}(n.dom(),i);t.selection.setRng(a.toRange())}},Ey=function(e,t){var n=wr.fromDom(e.getBody()),r=wr.fromDom(e.selection.getStart()),o=Re.filter(function(e,t){var n=rf(t,e);return Re.findIndex(n,Mo).fold(ae.constant(n),(function(e){return n.slice(0,e)}))}(n,r),Sy);return Re.last(o).map((function(n){var r=Ya.fromRangeStart(e.selection.getRng());return!!Ml(t,r,n.dom())&&(Ny(t,e,n,o),!0)}))&&funCy(var c=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&t.insertBefore(a.doc.createTextNode(""),t.firstChild)}if(o=a.createRng(),t.normalize(),t.hasChild(retEndBefore(r);break}i=r,r=n.next()}r||(o.setStart(i,0),o.setartvoid 0),e.selection.scrollIntoView(t)}},Dy=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},By=Ry,Py=function(e){return Ry(e).fold(ae.constant(""),(function(e){return e.nodeName.toUpperCase()}))},Oy=function(e){return Ry(e).filter((function(e){return Uo(wr.fromDom(e))})).isSome()},_y=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},Iy=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},Ly=function(e),My=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!ni.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},Fy=function(e,t,n,r,o){var i=e.dom,a=e.selection.getRng();if(n!==e.getBody()){(function(e){return Iy(e)&&Iy(e.parentNode)})(tere(u();emot)).length},qy=function(e){e.innerHTML='<br data-mce-bogus="1">'},Hy=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},Uy=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},jy=function(e,t,n){return!1===ni.isText(t)?n:e?1===n&&t.data.charAt(n-1)===ji?0:n:n===t.data.length-1&&t.data.charAt(n)===ji?t.data.length:n},Wy=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},Vy=function(e,t){var n=Xu(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,Yu(e))},$y=function(e,t){var n,r,o,i,a,u,c,s,l,f,d,m,g,p=e.dom,h=e.schema,b=h.getNonEmptyElements(),y=e.selection.getRng(),C=function(t){var n,i,u,c=o,s=h.getTextInlineElements();if(t||"TABLE"===f||"HR"===f?(n=p.create(t||m),Vy(e,n)):n=a.cloneNode(!1),u=n,!1===Qu(e))p.setAttrib(n,"style",null),p.setAttrib(n,"class",null);else do{if(s[c.nodeName]){if(zs)}}while((c=c.parentNode)&&Value.length))return!1;if(o.parentNode===a&&g&&!e)return!0;if(e&&ni.isElement(o)&&o===a.firstChild)return!0;if(Hy(o,"TABLE")||Hy(o,"HR"))return g&&!e||!g&&e;for(t=new v(o,a),ni.isText(o)&&(e&&0===u?t.prev():e||u!==o.nodeValue.length||t.next());n=t.c|o,i=g&&ni.isText(o)?o.nodeValue.length:0),r=Wy(p,o))return(m&&!u||!m&&u)&&(o=function(e,t,n,r,o){var i,a,u,c,s,l,f=t||"P",d=e.dom,m=Wy(d,r);if(!(a=d.getParent(r,d.isBlock))||!Uy(d,a)){if(l=(a=a||m)===e.getBody()||function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return i=d.create(f),Vy(e,i),a.appendChild(i),nr(i=d.create(f),Vy(e,i),u.parentNode.insertBefore(i,u),c=u;c&&!d.isBlock(c);)s=c.nextSibling,i.appendChild(c),c=s;n.setStart(r,o),n.setEnd(r,o)}}return r}(e,m,y,o,i)),a=p.getParent(o,p.isBlock),l=a?p.getParent(a.parentNode,p.isBlock):null,f=a?a.nodeName.toUpperCase():"","LI"!==(d=l?l.nodeName.toUpperCase():"")||t.ctrlKey||(a=l,l=l.parentNode,f=d),/^(LI|DT|DD)$/.test(f)&&p.isEmpty(a)?void Fy(e,C,l,a,m):void(m&&a===e.getBody()||(m=m||"P",Ki(a)?(c=na(a),p.isEmpty(a)&&qy(a),Ay(e,c)):w()?x():w(!0)?(c=a.parentNode.insertBefore(C(),a),Ay(e,Hy(a,"HR")?c:a)):(n=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,jy(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,jy(!1,e.endContainer,e.endOffset)),t}(y).cloneRange(),n.setEndAfter(a),s=n.extractContents(),function(e){do{ni.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.fChild,p.insertAfter(s,a),function(e,t,n){var r,o=n,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;ni.isElement(o)&&!t[o.nodeName.toLowerCase()]&&i.push(o)}for(r=i.length;r--;)(!o.fnction(e,t){var n;t.normalize(),(nrigemove(c),x()):Ay(e,c)),p.setAttrib(c,"id",""),e.fire("Netion(e,t){return By(e).filter((function(e){return t.length>0&&lo.is(wr.fromDom(e),t)})).isSome()},Xy=function(e){return Ky(e,Gu(e))},Yy=function(e){return Ky(e,Ju(e))},Gy=hf([{br:[]},{block:[]},{none:[]}]),Jy=function(e,t){return Yy(e)},Qy=function(e){return function(t,n){return""===Xu(t)===e}},Zy=function(e){return function(t,n){return Oy(t)===e}},eC=function(e){return function(t,n){return"PRE"===Py(t)===e}},tC=function(e){return function(t,n){return Ku(t)===e}},nC=function(e,t){return Xy(e)},rC=function(e,t){return t},oC=function(e){var t=Xu(e),n=Dy(e.dom,e.selection.getStart());return n&&e.schema.isValidChin function(n,r){var o=Re.foldl(e,(functe,t){return Vf([iC([Jy],Gy.none()),iC([eC(!0),tC(!1),rC],Gy.br()),iC([eC(!0),tC(!1)],Gy.block()),iC([eC(!0),tC(!0),rC],Gy.block()),iC([eC(!0),tC(!0)],Gy.br()),iC([Zy(!0),rC],Gy.br()),iC([Zy(!0)],Gy.block()),iC([Qy(!0),rlock())],[e,t.shiftKey]).getOr(Gy.none())},uC=function(e,t){aC(e,t).fold((function(){Im.insert(e,t)}),(function(){$y(e,t)}),ae.noop)},cC=function(e){e.on("keydown",(function(t){t.keyCode===Mp.ENTER&&functionexear n=t.container(),r=t.offset();n.insertData(r,""),e.selection.setCursorLocation(n,r+1)}(e,t),!0)},lC=function(e){return e.fold(ae.constant(!1),ae.constant(!0),ae.constant(!0),ae.constant(!1))},fC=function(e){return!!e.selection.isCollapsed()&&function(e){var t=ae.curry(_l.isInlineTarg,e.getBody(),n).map(ae.curry(sC,e,n)).getOr(!1)}(e)},dC=function(e){e.on("keydown",(wy([{keyCode:Mp.SPACEBAR,action:Cy(fC,e)}],t).each((funentDefault(),t.stopPropagation(),void mC(e,n)):void(Gi(n)&&(mC(e,n),e.undoManager.add()))},pC=function(e){e.on("keyup compositionstart",ae.curry(gC,e))},hC=function(e){var t=wd.){var t=e.selection.getRng(),n=x.fromRangeStart(t),r=x.fromRangeEnd(t);if(x.isElementPosition(n)){var o=n.container();vC(o)&&du.firstPositionIn(o).each((function(e){return t.setStart(e.container(),e.offset())}))}x.isElementPosition(r),yC=Ii.DOM,CC=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),function(e){e.settings.auto_focus&&We.setEditorTimeout(e,(function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()}),100)}(e)},wC=function(e,t){var n,r,o=e.settings,i=e.getElement(),a=e.getDoc();o.inline||(e.getElement().style.visibility=e.orgVisibility),t||o.content_editable||(a.open(),a.write(e.iframeHTML),a.close()),o.content_editable&&(e.on("remove",(function(){var e=this.getBody();yC.removeClass(e,"mce-content-body"),yC.removeClass(e,"mce-edit-focus"),yC.setAttrib(e,"contentEditable",nbody"),e.contentDocument=a=o.content_document||document,e.contentWindow=o.content_window||window,e.bodyElem_values:!0,url_converter:e.cnt:e.inline?e.getBody():nullnction(e){var t=q(e.settings,e.schema);returnif(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;"style"===n?((o=u.serializeStyle(u.parseStyle(o),r.name)).length||(o=null),r.attr(i,o),r.attr(n,o)):"tabindex"===n?(r.attr(i,o),r.attr(n,null)):r.attr(i,e.convertURL(o,n,r.name))}})),t.addNodeFilter("script",(function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)})),t.addNodeFilter("#cdata",(function(e){for(var t,n=e.length;n--;)(t=e[n])hema.getNonEmptyEleme.getAll("br").length&&(n.append(new nb("br",1)).shortEnded=!0)})),t}(e),e.serializer=H(o,e),e.selection=cy(e.dom,e.getWin),e._nodeChangeDispatcher=new L(e),e._selectionOverrides=jpire("PreInit"),o.brow,"spellcheck","false")),e.quirks=j(e),e.fire("PostRender"),o.directionality&&(n.dir=o.directionality),o.nowrap&&(n.style.whiteSpace="nowrap"),o.protect&&e.on("BeforeSetContent",(function(e){sn.each(o.protect,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))})),e.on("SetContent",(function(){e.addVisual(e.getBody())})),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",(function(t){e.composing="compositionstart"===t.type})),e.contentStyles.length>0&&(r="",sn.each(e.contentStyles,(function(e){r+=e+"\r\n"})),e.dom.addStyle(r)),function(e){return e.inline?yC.styleSdAll(et Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=function(e,t,n,r){var o=wr.fromTag("iframe");return jr.setAll(o,r),jr.setAll(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Jr(o,{width:"100%",height:SC(n),display:"block"}),o}(e.id,n,t.height,Hu(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var o=function(e,t){if(document.domain!==window.location.hostname&&ze.ie&&ze.ie<12){var n=op.uuid("mce");e[n]=function(){wC(e)};var r='javascript:(function(){documenreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=function(e){var t,n,r;return r=Uu(e)+"<html><head>",ju(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=Wu(e),n=Vu(e),curity-Policy" content="'+$u(e)+'" />'),r+'</head><body id="'+t+'"n+'" dConHidden(t.editorContainer)),e.getElement().style.display="none",xC.setAttrib(e.id,"aria-hidden","true"),n||wC(e)},TC=Ii.DOM,kC=function e(t,n,r){var o,i,a=$g.get(r);if(o=$g.urls[r]||t.documentBaseUrl.replace(/\/$/,""),r=sn.trim(r),a&&-1===sn.inArray(n,r)){if(sn.each($g.dependencies(r),(function(r){e(t,n,r)})),t.plugins[r])return;i=new a(t,o,t.$),t.plugins[r]=i,i.init&&(i.init(t,o),n.push(r))}},RC=function(e){return e.replace(/^\-/,"")},AC=function(e){var t=[];sn.each(e.settings.plugins.split(/[ ,]/),(function(n){kC(e,t,RC(n))}))},DC=function(e){return{editorContainer:e,iframeContainer:e}},BC=function(e){var t=e.getElement();return e.inline?DC(null):function(e){var t=TC.create("div");return TC.insertAfter(t,e),DC(t)}(t)},PC=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,ge.isString(t.theme)?function(e){var t,n,r,o,i,a=e.settings,u=e.getElement();return t=a.width||TC.getStyle(u,"width")||"100%",n=a.height||TC.getStyle(u,"height")||u.offsetHeight,r=a.min_height||100,(o=/^[0-9\.]+(|px)$/i).test(""+t)&&(t=Math.max(parseInt(t,10),100)),o.test(""+n)&&(n=Math.max(parseInt(n,10),r)),i=e.theme.renderUI({targetNode:u,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(i.iframeHeight||n)+("number"==typeof n?i.deltaHeight||0:""))<r&&(n=r),i.height=n,i}(e):ge.isFunction(t.theme)?function(e){var t,n=e.getElement();return(t=e.settings.theme(e,n)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeTypainer"),t.height=t.iframeHeight?t.iframeHeight:n.(e){var t,n=e.settings,r=e.getElement();return e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||TC.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),function(e){var t,n=e.settings.theme;ge.isString(n)?(e.settings.theme=RC(n),t=Kg.get(n),e.theme=new t(e,Kg.urls[n]),e.theme.init&&e.theme.init(e,Kg.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}}(e),AC(e),t=PC(e),e.editorContainer=t.editorContainer?t.editorContainer:null,n.content_css&&sn.each(sn.explode(n.content_css),(function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))})),n.function(e){return"-"===e.charAt(0),t,(function(){(function(e,t){"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)})(n,e),function(e,t){sn.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),sn.each(e.external_plugins,(function(t,n){$g.load(n,t),e.plugins+=" "+n})),sn.each(e.plugins.split(/[ ,]/),(function(e){if((e=sn.trim(e))&&!$g.urls[e])if(IC(e)){e=e.substr(1,e.length);var n=$g.dependencies(e);sn.each(n,(function(e){var n={prefix:"plugins/",ress"};e=$g.createUrl(n,e),$g.load(e.resource,e)}))}else $g.loas"})}))}(e.settings,t),n.loadQueue((function(){e.removed||OC(e)}),e,(function(t){Vg.pluginLoadError(e,t[0])ed){if(e.getElement()&&ze.contentEditable){t.inline?e.inline=!0:(e.orgVisibility=e.getEley="hidden");var r=e.getElement().form||_C.ger,t.hidden_input&&!/TEXTAREA|INPUT/i.test=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},_C.bind(r,"submit reset",e.formEventDelegate),e.on("reset",(funct!t.sub,r.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)})),e.windowManager=A(e),e.notificationManager=R(e),"xml"===t.encoding&&e.on("GetContent",(function(e){e.save&&(e.content=_C.encode(e.content))})),t.add_form_submit_trigger&&e.on("submit",(function(){e.initialized&&e.save()})),t.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),LC(e,e.suffix)}}else _C.bind(window,"ready",(function t(){_C.unbind(window,"ready",t),e.render()}))},FC=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r},zC=sn.each,qC=sn.trim,HC="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),UC={ftp:21,http:80,https:443,mailto:25}ase_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))i.source=t;else{var a=0===t.indexOf("//");0!==t.indexOf("/")||a||(t=(r&&r.protocol||"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(o=n.base_uri?n.base_uri.path:n.exec(t),t=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(o,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),zC(HC,(function(e,n){var r=t[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),i[e]=r})),r&&(i.protocol||(ost||(i.port=e[0],t.dir+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new jC(e,{base_uri:this})).get))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=UC[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,o,i=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),length;r<o;r++)a+split("/"),zC(e,(funct"/"+o),r&&o.lastIndexOf("/")!==o.length-1&&(o+=r),o},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.posource=t),n.s))&&(t=n[1]),{type:t,data:e[1]}},jC.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+/.test(t)&&(t=t.rep^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var WC=function e(t,n){n(t),t.firstChild&&e(t.firstChild,n),t.next&&e(t.next,n)},VC=function(e,t,n){var r=function(e,t,n){var r={},o={},i=[];for(var a in n.firstChild&&WC(n.firstChild,(function(n){Re.each(e,(function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n)nodes:[n]})}))})),r)r.hasOwnProperty(a)&&i.push(r[a]);for(var u in o)o.hasOwnProperty(u)&&i.push(o[u]);return i}(e,t,n);Re.each(r,(function(e){Re.each(e.filter.callbacks,(function(t){t(e.nodes,e.filter.name,{})}))}))},$C="html",KC=function(e){return e instanceof nb},XC=function(e,t,n){var r;if(t.format=t.format?t.format:$C,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=sn.trim(Gp.trimExternal(e.serializer,n.innerHTML));else if("text"===t.format)r=Wi(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=function(e,t){var n=Xu(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")}(e,e.serializer.serialize(n,t))}return"text"!==t.format?t.content=sn.trim(r):t.content=r,t.no_events||e.fire("GetContent",t),t.content},YC=function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:$C,n.set=!0,n.content=KC(t)?"":t,KC(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),de.from(e.getBody()).fold(ae.constant(t),(function(r){return KC(t)?function(e,t,n,r){VC(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=N({validate:e.validate},e.schema).serialize(n);return r.content=s),n}(e,r,t,n):function(e,t,n,r){var o,i;return 0===n.length||/^\s+$/.test(n)?(i='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+i+"</li>"),(o=Xu(e))&&erCase())?(n=i,n=e.dom.createHTML(o,e.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),e.dom.setHTML(t,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=N({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=sn.trim(n),e.dom.setHTML(t,}))y",e.orgDisplay)}(e),Kv(e),e.editorManager.remove(e),GC.remove(e.getContainer()),JC(t),JC(n),e.destroy()}},ZC=function(e,t){var n=e.selection,r=e.dom;if(!e.destroyed){if(!t&&!e.removed)return void e.remove();t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),JC(n),JC(r)),function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),GC.unbind(t,"submit reset",e.formEventDelegate))}(e),function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)}(e),e.destroyed=!0}},ew=Ii.DOM,tw=sn.extend,nw=sn.each,rw=sn.resolve,ow=ze.ie,iw=function(e,t,n){var r=this,o=r.documentBaseUrl=n.documentBaseURL,i=n.baseURI;t=function(e,t,n,r,o){var i=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,dataliscompat:!0}}(t,n,e);return Tl(yl,i,r,o)}(r,e,o,n.defaultSettings,t),r.settings=t,w.languageLoad=t.language_load,w.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new jC(t.document_base_url,{base_uri:i}),r.baseURI=i,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new k(r),r.loadedCSS={},r.editorCommands=new T(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(ze.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/render:function(){MC(this)},focus:function(e){Pg(this,e)},hasFocus:function(){return Og(this)},execCallback:function(e){for(var t=[],ents[n];var (r=o.callbackLookup[e])&&(i=r.func,r=r.scope),"string"==typeof i&&(r=(r=i.replace(/\.\w+$/,""))?rw(r):0,i=rw(i),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[e]={func:i,scope:r}),i.apply(r||o,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&sn.is(e,"string")){var t=this.settings.language||"en",n=thi."+e]||e.replace(/\{\#([^\}]+)\}/g,(function(e,r){return n.daaram:function(e,t,n){return Al(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(ctive=!1),t.tooltip=t.tohis,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=edComme,t,n,r)}eturn this.editor){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(ew.show(e.getContainer()),ew.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(ow&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(ew.hide(e.getContainer()),ew.setStyle(e.id,"display",e.orgDction(){return!!this.hidden},setProgressState:function(e,t){this.fi)},load:function(e){var t,n=this,r=n.getElement();return n.removed?"":r?((e=e||{}).load=!0,t=n.setContent(void 0!==r.value?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=ized&&!relement=ofire("RawSaveContent",e),t=e.content,/TEXTAREunction(e){if(e.name===r!1!==e.set_unction,11):""mceInsertion(e){var:function(){return this.targetElm||(this.targetElm=ew.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.allback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"L==e.indeth?e:o.relatiseURI.toAbsolutt,n=this,r=n.settings,o=n.dom;e=e||n.getBody(),void 0===unction(e){var i;switch(e.nodeName){case"TABLE":return t=r.visualrde"A":return void(o.getAttrib(e,"href")||(i=om-anchor",i&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}})),n.fire("VisualAid"d.uploadImages(e)}tion(){return thimages()}},tw(iw.prototype,pg);var aw,uw,cw,sw={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},lw=funcn.isEdge()?function(e){e.on("focusout",(function(){Zm.store(e)}))}(e):function(e,t){e.on("mouseup touchend",(function(e){t.throttle()}))}(e,t),e.on("keyup nodechange",(function(t){(function(e){return"nodechange"===e.type&&e.selectionChange})(t)||Zm.store(e)ction(){lwion(t){return mw(t)||!!n&&e.dom.is(t(n&&n.fire("blur",{focusedEditor:t}),e.setActive(t),e.focusedEditor=t,t.fire("focus",{blurredEditor:n}),t.focusction(){gw(t,functi.fire("bluEditor",ae.curry(hw,e))},bw={},yw="en",Cw={setCode:function(e){e&&(yw=e,this.rtl=!!forction(e){return sn.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||sn.isn(e){return e=n(e),sn.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(sn.is(e,"object")&&sn.hasOwn(e,"raw"))return n(e.raw);if(sn.is(e,"array")){var i=e.slice(1);e=o(e[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return sn.hasOwn(i,t)?n(i[t]):e}))}return o(e).replace(/{context:\w+}$/,"")},data:bw},ww=Ii.DOM,xw=sn.explode,Sw=sn.each,Nw=sn.extend,Ew=0,Tw=!1,kw=[],Rw=[],Aw=function(e){Sw(cw.get(),(function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)}))},Dw=function(e){e!==Tw&&(e?Rn(window).on("resize scroll",Aw):Rn(window).off("resize scroll",Aw),Tw=e)},Bw=function(e){var t=Rw;delete kw[e.id];for(var n=0;n<kw.length;n++)if(kw[n]===e){kw.splice(n,1);break}return Rw=Re.filter(Rw,(function(t){return e!==t})),cw.activeEditor===e&&(cw.activeEditor=Rw.length>0?Rw[0]:null),cw.focusedEditor===e&&(cw.focusedEditor=null),t.length!==Rw.length};cw={defaultSettings:{},$:Rn,majorVersion:"4",minorVersion:"7.11",releaseDate:"2018-04-11",editors:kw,i18n:Cw,activeEditor:null,settings:{},setup:function(){var e,t,n,r,o=this,i="";if(t=jC.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,i=n.suffix;else{for(var a=document.getElementsByTagName("script"),u=0;u<a.length;u++){var c=(r=a[u].src).substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==c.indexOf(".min")&&(i=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(r=documeino.=new jC(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new jC(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var o in r)w.PluginManager.urls[o]=r[o]},init:function(e){var t,n,r=thishr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iftAttribute("id",t)),t},a=function(e,t){return t.constructor===RegExp?t.testsupport the brng. For a list of supported browsers please see: https://www.tinymce.com/dtor)return ww.select(e.selector);ifh>0&&Sw(xw(t),(function(e){var t;(t=ww.get(e))?n.push(t):w.setAttrib(t,"id",e),n.push(t))}))}))}));break;case"textareas":case"specific_textareas":Sw(ww.select("textarea"),(function(t){e.editor_deselector&&a(t,e.editor_deselector)||e.editor_selector&&!a(t,e.eturn n},c=function(e){t=e};return r.settings=e,ww.bind(window,"ready",(function t(){var n,a=0,s=[],l=function(e,t,o){var i=new iw(e,t,r);s.push(i),i.on("init",(funclm=i.tanique(u(e)),e.types?void Sw(e.types,(function(t){sn.each(n,(function(n(i(n),Nw({},e,t),n),!1)}))})):(sn.each(n,(function(e){!function(e){e&&e.initialized&&!(e.getContainer()||ebindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=nturn!r.get(e.id)})),void(0===n.length?c([]):Sw(n,(function(t){o(e,t)?Vg.initError("Could not initial element",t):l(i(t),e,t)}))))})),new qe((function(e){t?e(t):c=function(t){e(t)}}))},get:function(e){return 0===arguments.length?Rw.slice(0):ge.isString(e)?Re.find(Rw,(function(t){return t.id===e})).getOr(null):ge.isNn(e,t){returon(e){va.isString(e)?(e=e.selector||e,void Sw(ww.select(e),(func",uw),n.remove(),Dw(Rw.length>0),n));for(t=Rw.length-1;t>=0;t--)r.remove(Rw[t])},execCommand:function(e,t,n){var r=this,o=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new iw(n,r.settings,r).render(),n(ern Cw.translis.activeEditor!==e&&(t&&t.fire("deactivate",e.getCaret,t,n){3]&&(o-=Fw(a/2)),"c"===n[urn{x:e,y:t,w:nturnePos.h<=n.hp:function(e,t,n){var r,o,i,a,u,c,s,l,f,d;return u=e.x,c=e.y,s=e.x+e.w,l=e.y+e.h,f=t.x+t.w,d=t.fuft,e.top,e.width,e.heigCase()]},get:function(e){var t=e.toLowerCase(),n=Uw.hasOw"Could not find module for type: "+e);return n},create:function(e,t){var n;if("string".type=e:e=(t=e).type,e=e.toLowerCase(),!(n=U},Ww=sn.each,Vw=sn.extend,$nd=Ow=function(e){var t,n,r,o=this.prototype,i=function(){var e,t,n,r=this;if(!_w&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(r,arguments)},a=function(){return this},u=function(e,t){return function(){var n,r=this,i=r._super;return r._super=o[e],n=t.apply(r,arguments),r._super=i,n}};for(n in _w=!0,t=new this,_w=!1,e.Mixins&&(Ww(e.Mixins,(function(t){f),e.Properties&&Ww(e.Properties.split(","),(function(t){var n="_"+t;e[t]=function(e){var t=this;return void 0!==e?(t[n]=e,t):t[n]}})),e.Statics&&Ww(e.Statics,(function(e,t){i[t]=e})),e.Defaults&&o.Defaults&&(e.Defaults=Vw({},o.Defaults,e.Defaults)),e)"function"==typeof(r=e[n])&&o[n]?t[n]=u(n,r):t[n]=r;r};var Kw=Math.min,Xw=Math.max,Y=o.indexOf(t))+1?"\\"+o.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)}))+n;if("object"===i){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,o="[";r<t.length;r++)o+=(r>0?",":"")+e(t[r],n);return o+"]"}for(a in o="{",t)t.hasOwnProperty(a)&&(o+="function"!=typeof t[a]?(o.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return o+"}"}return""+t},parse:function(e){try{return JSON.parse(e)}catch(n){}}},Jw={callbacks:{},count:0,send:function(e){var t=this,n=Ii.DOM,r=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+r;t.callbacks[r]=function(i){n.remove(o),delete t.callbacks[r],e.callback(i)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},Qw={send:function(e){var t,n=0,r=function r(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENEscope||thisscope,e.error_scopesetRequestHeader("X-Requested-With","XMLHttpRequest"),(t=Qw.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};sn.extend(Qw,lg);var Zw=sn.extend,ex=function(e){this.settings=Zw({},e),this.count=0};ex.sendRPC=function(e){return(new ex).send(e)},ex.prototype={send:function(e){var t=e={geom:{Rect:Hw},util:{Promise:qe,Delay:We,Tools:sn,VK:Mp,URI:jC,Class:$w,EventDispatcher:ag,Observable:lg,I18n:Cw,XHR:Qw,JSON:Gw,JSONRequest:ex,JSONP:Jw,LocalStorage:tx,Color:function(e){var t={},n=0,r=0,o=0,i=function(e){var i;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,o=e.b):"v"in e&&function(e,t,i){var a,u,c,s;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,i=parseInt(i,10)/100,t=Xw(0,Kw(t,1)),i=Xw(0,Kw(i,1)),0!==t){switch(a=e/60,c=(u=i*t)*(1-Math.acase 0:n=u,r=c,o=0;break;case 1:n=c,r=u,o=0;break;case 2:n=0,r=u,o=c;break;case 3:n=0,r=c,o=u;break;case 4:n=c,r=0,o=u;break;case 5:n=u,r=0,o=c;break;default:n=r=o=0}n=Yw(255*(n+s)),r=Yw(255*(r+s)),o=Yw(255*(o+s))}else n=r=o=Yw(255*i)}(e.h,e.s,e.v):(i=/rgb\s*\(\s*([3],10)):(i=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16)):(i=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(i[1]+i[1],16),r=parseInt(i[2]+i[2],16),o=parseInt(i[3]+i[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,t};return e&&i(e),t.toRgb=function(){return{r:n,g:r,b:o}},t.toHsv=function(){return function(e,t,n){var r,o,i,a;return r=0,o=0,(i=Kw(e/=255,Kw(t/=255,n/=255)))===(a=Xw(e,Xw(t,n)))?{h:0,s:0,v:100*(o=i)}:(r=(a-i)/a,o=a,{h:Yw(60*((e===i?3:n===i?1:5)-(e===i?t-n:n===i?e-t:n-e)/(a-i))),s:Yw(100*r),v:Yw(100*o)})}(n,r,o)},t.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(r)+e(o)},t.parse=i,t}},dom:{EventUtils:Ze,Sizzle:en,DomQuery:Rn,TreeWalker:v,DOMUtils:Ii,ScriptLoader:qi,RangeUtils:Iw,Serializer:H,ControlSelection:Cb,BookmarkManager:vb,Selection:cy,Event:Ze.Event},html:{Styles:y,Entities:pi,Node:erialManager:F,EditorComnager:Pw,DOM:Ii.DOM,ScriptLoader:qi.ScriptLoader,PluginMbkit,isIE:ze.i,ox=nx=sn.extch(n){}}(ox)}(),fu n(e){!i&&window&&window.console&&(i=!0,console.log("Deprecated TinyMCE API call: "+e))}function r(e,r,o,i){e=e||this;var a=[];return r?(this.add=function(t,u,c){function s(n){var a=[];if("stopImmediaet>.on"+r+".add(..)"),e.on(r,s,c);var l={original:t,patched:s};return a.push(l),s},this.addToTop=function(e,t){this.add(e,t,!0)},this.remove=function(t){return a.forEach((function(n,o){if(n.original===t)return a.splice(o,1),e.off(r,n.patched)})),e.off(r,t)},void(this.dispatch=function(){return e.fire(r),!0})):void(this.add=this.addToTop=this.remove=this.dispatch=t)}function o(o){function i(t){var n=[o.settings.language||"en",t].join("."),r=e.i18n.translate(n);return n!==r?r:e.i18n.translate(t)}function a(t,n){e.each(t.split(" "),(function(e){o["on"+e]=new r(o,e,n)}))}function u(e,t,n){return[}function s(){function t(){return s()}var r={};return n("editor.controlManager.*"),e.each("add addMenu addSeparator collapse createMenu destroy displayColor expand focus getLength hasMenus hideMenu isActive isCollapsed isDisabled isRendered isSelected mark postRender remove removeAll renderHTML renderMenu renderNode renderTo select selectByIndex setActive setAriaProperty setColor setDisabled setSelected setState showMenu update".split(" "),(function(e){r[e]=t})),r}if(!o.controlManager){o.controlManager={buttons:{},setDisabled:function(e,t){n("controlManager.setDisabled(..)"),this.buttons[e]&&this.buttons[e].disabled(t)},setActive:function(e,t){n("controlManager.setActive(..)"),this.buttons[e]&&this.buttons[e].active(t)},onAdd:newtButton:s,createControl:s,createDropMenu:s,cre:s,createToolbarGroup:s,destroy:t,get:t,setControlType:s},a("PreInit BeforeRenderUI PostRender Load Init Remove Activate Deactivate","editor"),a("Click MouseUp MouseDown nt,o.selection.isCollapseowerCase()&&(r=t[a],t.onPostRender=n);return r||(t.onPostRender=n),t.title&&(t.title=i(t.title)),l.call(this,e,t)},o.on("init",(function(){var e=o.undoManager,t=o.selection;e.onUndo=new r(o,"Undo",u,null,e),e.onRedo=new r(o,"Redo",u,null,e),e.onBeforeAdd=new r(o,"BeforeAddUndo",null,e),e.onAdd=new r(o,"AddUndo",null,e),t.onBeforeGetContent=new r(o,"BeforeGetContent",c(!0),t),t.onGetContent=new r(o,"GetContent",c(!0),t),t.onBeforeSetConten),t),t. r,t.onClose=new r,t.createInstance=function(t,r,o,i,a,u){return n("windowManager.createInstance(..)"),new(e.resolve(t))(r,o,i,a,u)}}))}}var i;e.util.Dispatcher=r,e.onBeforeUnload=new r(e,"BeforeUnload"),e.onAddEditor=new r(e,"AddEditor","editor"),e.onRemoveEditor=new r(e,"RemoveEditor","editor"),e.util.Cookie={get:t,getHash:t,remove:t,set:t,setHash:t},e.on("SetupEditor",(function(e){o(e.editor)})),e.PluginManager.add("compat3x",o),e.addI18n=function(t,n){var r=e.util.I18n,o=e.each;return"string"==typeof t&&-1===t.indexOf(".")?void r.add(t,n):void(e.is(t,"string")?o(n,(function(e,n){r.data[t+"."+n]=e})):o(t,(function(e,t){o(e,(function(e,n){o(e,(function(e,o){"common"===n?r.data[t+"."+o]=e:r.data[t+"."+n+"."+o]=e}))e=s.cemcinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),u=function(e){return e&&"BR"===e.nodeName},c=function(e){return e&&3===e.nodeType},s=function(e){return e&&/^(OL|UL|DL)d===e},g=fturn l(e)&&c(r)?{container:r,offset:n>=e.childNodes.length?r.data.length:0}:{container:e,offset:n}},w=function(e){var t=e.cloneRange(),(e){var t={},n=function(n){var r,o,i;o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],1===o.nodeType&&(r=x.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),n?o.insertBefore(r,o.childNodes[i]):x.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=i};return n(!0),e.collapsed||n(),t},N=function(e){function t(t){var n,r,o;n=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(eype&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,x.remove(o),!n.hasChildNodes()&&x.isBlock(n)&&et":"endOffset"]=r)}t(!0),t();var n=x.createRng();return n.setStart(e.startContainer,e.startOffset),e.e),w(n)},E=a.DOM,T=function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousppendChild(t),b(e,r)&&E.remove(r)):E.setStyle(r,"listStyleType","none")),s(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)},k=function(e,t){i.each(i.grep(e.select("ol,ul",t)),(function(t){T(e,t)}))},R=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),A=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",D(e,t))},D=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},B={getParentList:A,getSelectedSubLists:function(e){var t=A(e),n=e.selection.getSelectedBlocks();return function(e,t){return e&&1===t.length&&t[0]===e}(t,n)?function(e){return i.grep(e.querySelectorAll("ol,ul,dl"),(function(e){return s(e)}))}(t):i.grep(n,(function(e){return s(e)&&t!==e}))},getSelectedListItems:function(e){var t=e.selection.getSelectedBlocks();return i.grep(function(e,t){var n=i.map(t,(function(t){return e.dom.getParent(t,"li,dd,dt",D(e,t))||t}));return R.unique(n)}(e,t),(function(e){return l(e)}))},getClosestListRootElm:D},P=tinymce.util.Tools.resolve("tinymce.Env"),O=a.DOM,_=function(e,t,n){var r,o,i,a=O.createFragment(),u=e.schema.getBlockElements();if(e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),n&&((o=O.create(n)).tagName===e.settings.forced_root_block&&O.setAttribs(o,e.settings.forced_root_block_attrs),h(t.firstChi==r.getAttribute("data-mce-type")||(i=!0),h(r,u)?(a.appendChild(r),o=null):n?(o||(o=O.create(n),a.appendChild(o)),o.appendChild(r)):a.appendChild(r)}return e.settings.forced_root_block?i||P.ie&&!(P.ie>10)||o.appendChild(O.create("br",{"data-mce-bogus":"1"})):a.appendChild(O.create("br")),a},I=a.DOM,L=function(e,t,n,r){var o,a,u,c;for(u=I.select('span[data-mce-type="bookmark"]',t),r=r||_(e,n),(o=I.createRng()).setStartAfter(n),o.setEndAfter(t),c=(a=o.extractContents()).firstChild;c;c=c.firstChild)if("LI"===c.nodeName&&e.dom.isEmpty(c)){I.remove(c);break}e.dom.isEmpty(a)||I.insertAfter(a,t),I.insertAfter(r,t),b(e.dom,n.parentNode)&&function(e){i.each(u,(function(t){e.parentNode.insertBefore(t,n.parentNode)})),I.remove(e)}(n.parentNode),I.remove(n),b(e.dom,t)&&I.remove(t)},M=a.DOM,F=function(e,t){b(e,t)&&M.remove(t)},z=function(e,t){var n,r,o=t.parentNode;return o?(n=o.parentNode,!(o!==e.getBody()&&("DD"===t.nodeName?(M.rename(t,"DT"),0):m(t)&&g(t)?("LI"===n.nodeName?(M.insertAfter(t,n),F(e.dom,n),M.remove(o)):s(n)?M.remove(o,!0):(n.insertBefore(_(e,t),o),M.remove(o)),0):m(t)?("LI"===n.nodeName?(M.ire(t,o):(n.insertBeertAfterarentNode),0)))):(F(e.dom,t),!0)},q=z,H=function(e){var t=B.getSelectedListItems(e);if(t.length){var n=S(e.selection.getRng()),r=void 0,o=void 0,i=B.getClosestListRootElm(e,e.selection.getStart(!0));for(r=t.length;r--;)for(var a=t[r].parentNode;a&&a!==i;){for(o=t.length;o--;)if(t[o]===a){t.splice(r,1);break}a=a.parentNode}for(r=0;r<t.length&&(z(e,t[r])||0!==r);r++);return e.selection.setRng(N(n)),e.nodeChanged(),!0}},U=function(e,t){i.each(t,(function(t,n){e.setAttribute(n,t)}))},j=function(e,t,n){(function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)})(e,t,n),function(e,t,n){U(t,n["list-attributes"]),i.each(e.select("li",t),(function(e){U(e,n["list-item-attributes"])}))}(e,t,n)},W=function(e,t,n){i.each(n,(function(n){return e.setStyle(t,((r={})[n]="",r));var r}))},V=function(e,t,n,r){var o,i;for(o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&d(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(p(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},$=function(e,t,n){for(var r,a=[],u=e.dom,c=V(e,t,!0,n),s=V(e,t,!1,n),l=[],f=c;f&&(l.push(f),f!==s);f=f.nextSibling);return i.each(l,(function(t){if(p(e,t))return a.remove(t),void(r=null);var i=t.nextSibling;return o.isBookmarkNode(t)&&(p(e,i)||!i&&t.parentNode===n)?void(r=nore(r,t) e.dom.isEmpty(t)}));r=i.grep(r,(function(t){return!e.dom.isEmpty(t)})),i.each(o,(function(t){b(e.dom,t)&&q(e,t)})),i.each(r,(function(t){var r,o;if(t.parentNode!==e.getBody()){for(r=t;r&&r!==n;r=r.parentNode)s(r)&&(o=r);L(e,o,t),k(e.dom,o.parentNodon(e,t,n){return function(e,t){return e&&t&&s(e)&&e.nodeName===t.nodeName}(t,n)&&function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)}(e,t,n)&&function(e,t){return e.className===t.className}(t,n)},Y=function(e,t){var n,r;if(n=t.nextSibling,X(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,X(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},G=function(e,t,n,r,o){if(t.nodeName!==r||J(o)){var a=S(e.selection.getRng(!0));i.each([t].concat(n),(function(t){!function(e,t,n,r){if(t.nodeName!==n){var o=e.rename(t,n);j(e,o,r)}else j(e,t,r)}(e.dom,t,r,o)})),e.selection.setRng(N(a))}else K(e)},J=function(e){return"list-style-type"in e},Q=function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||J(r)){var o=S(e.selection.getRng(!0));j(e.dom,t,r),Y(e.dom,e.dom.rename(t,n)),e.selection.setRng(N(o))}else K(e);else!function(e,t,n){void 0===n&&(n={});var r,o=e.selection.getRng(!0),a="LI",u=B.getClosestListRootElm(e,e.selection.getStart(!0)),c=e.dom;"false"!==c.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(a="DT"),r=S(o),i.each($(e,o,u),(function(r){var o,i;(i=r.previousSibling)&&s(i)&&i.nodeName===t&&function(e,t,n){var r=e.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return r===(null===o?"":o)}(c,i,n)?(o=i,r=c.rename(r,a),i.appendChild(r)):(o=c.create(t),r.parentNode.insertBefore(o,r),o.appendChild(r),r=c.rename(r,a)),W(c,r,["margin","marpadding-bottom","padding-left","padding-top"]),j(c,o,n)Z={toggleList:function(e,t,n){var r=B.getParentList(e),o=B.getSelectedSubLists(e);n=n||{},r&&o.length>0?G(e,r,o,t,n):Q(e,r,t,n)},removeList:K,mergeWithAdjacentLists:Y},ee=function(e,r,o,i){var a,u,c=r.startContainer,s=r.startOffset;if(3===c.nodeType&&(o?s<c.data.length:s>0))return c;for(a=e.schema.getNonEmptyElements(),1===c.nodeType&&(c=t.getNode(c,s)),u=new n(c,i),o&&v(e.dom,c)&&u.next();c=u[o?"next":"prev2"]();){if("LI"===c.nodeName&&!c.hasChildNodes())return c;if(a[c.nodeName])return c;if(3===c.nodeType&&c.data.length>0)return c}},te=function(e,t){var n=t.childNodes;return 1===n.length&&!s(n[0])&&e.isBlock(n[0])},ne=function(e,t,n){var r,o;if(o=te(e,n)?n.firstChild:n,function(e,t){te(e,t)&&e.remove(t.firstChild,!0)}(e,t),!b(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},re=function(e,t,n){var r,o,i=t.parentNode;y(e,t)&&y(e,.remove(i.previousSibling),(r=n.lastChild)&&d(r)&&t.hasChildNodes()&&e.remove(r),b(e,n,!0)&&e.$(n).empty(),ne(e,t,n),o&&n.appendChild(o),e.remove(t),b(e,i)&&i!==e.getRoot()&&e.remove(i))},oe=function(e,t,n,r){var o=e.dom;if(o.isEmpty(r))!function(e,t,n){e.dom.$(n).empty(),re(e.dom,t,n),e.selection.setCursorLocation(n)}(e,n,r);else{vartart(),c=B.getClosestListRootElm(e,u),s=i.getParent(a.getStart(),"LI",c);if(s){if((n=s.parentNode)===e.getBody()&&b(i,n))return!0;if(r=w(a.getRng(!0)),(o=i.getParent(ee(e,r,t,c),"LI",c))&&o!==s)return t?oe(e,r,o,s):function(e,t,n,r){var o=S(t);re(e.dom,n,r);var i=N(o);e.selection.setRng(i)}(e,r,s,o),!0;if(!o&&!t&&Z.removeList(e))return!0}return!1},ae=fe.selection.geLI",o);if,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)})(n,i,o),Z.mergeWithAdjacentLists(n,u.parentNode),e.selection.select(u,!0),e.selection.collapse(t)})),!0}return!1}(e,t)},ue=function(e,t){return e.selection.isCollapsed()?ae(e,t):function(e){var t=e.selection.getStart(),n=B.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||B.getSelectedListItems(e).length>0)&&(e.undoManager.transact((function(){e.execCommand("Delete"),k(e.dom,e.getBody())})),!0)}(e)},ce=function(e){e.on("keydown",(function(t){t.keyCode===r.BACKSPACE?ue(e,!1)&&t.preventDefault():t.keyCode===r.DELETE&&ue(e,!0)&&t.preventDefault()}))},se=ue,le=function(e){return{backspaceDelete:function(t){se(e,t)}}},fe=a.DOM,de=function(e,t){var n;if(s(e)){for(;n=e.fi=e.previousSibling)&&s(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&s(t.lastChild)?(t.lastChild.appendChild(e),de(e.lastChild,t.lastChild),!0):(t=e.nextSibling)&&s(t)?(t.insertBefore(e,t.firstChild),!0):!(!(t=e.previousSibling)||"LI"!==t.nodeName||(n=fe.create(e.parentNode.nodeName),r=fe.getStyle(e.parentNode,"listStyleType"),r&&fe.setStyle(n,"listStyleType",r),t.appendChild(n),n.appendChild(e),de(e.lB.getSelectedListItems(e);if(t.length){for(var n=S(e.selection.getRng(!0)),r=0;r<t.length&&(me(t[r])||0!==r);r++);return e.selection.setRng(N(n)),e.nodeChanged(),!0}},pe=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},he=function(e){e.on("BeforeExecCommand",(function(t){var n,r=t.command.toLowerCase();if("indent"===r?ge(e)&&(n=!0):"outdent"===r&&H(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0})),e.addCommand("InsertUnordereeredList",(function(t,n){Z.toggleList(e,"OL",n)})),e.addCommand("InsertDefinitionList",(function(t,n){Z.toggleList(e,"DL",n)})),e.addQueryStateHandler("InsertUnorderedList",pe(e,"UL")),e.addQueryStateHandler("InsertOrderedList",pe(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",pe(e,"DL"))},ve=function(e){return e.getParam("lists_indent_on_tab",!0)},be=function(e){ve(e)&&function(e){e.on("keydown",(function(t){t.keyCode!==r.TAB||r.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?H(e):ge(e))}))}(e),ce(e)},ye=function(e,t){return function(n){var r=n.control;e.on("NodeChange",(function(e){var n=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,f),o=-1!==n?e.parents.slice(0,n):e.parents,a=i.grep(o indent",cm,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),x.each(n,(function(n){if(n.test(e))return t=!0,!1})),t}function n(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function r(e){function r(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=r(e)}while(e=e.next);return t}function o(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!o(e,t))return!1}while(e=e.next);return!0}function i(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)do{i(e)}while(e=e.next)}function a(e,t,n){var r=e._listLevel||s;r!==s&&(r<s?u&&(u=u.parent.parent):(c=u,u=null)),u&&u.name===t?u.append(e):(c=c||u,u=new L(t,1),n>1&&u.attr("start",""+n),e.wrap(u)),e.name="li",r>s&&c&&c.lastChild.append(u),s=r,i(e),o(e,/^\u00a0+/),o(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),o(e,/^\u00a0+/)}for(var u,c,s=1,l=[],f=e.firstChild;null!=f;)if(l.push(f),null!==(f=f.walk()))for(;void 0!==f&&f.parent!==e;)f=f.walk();for(var d=0;d<l.length;d++)if("p"===(e=l[d]).name&&e.firstChild){var m=r(e);if(n(m)){a(e,"ul");continue}if(t(m)){var g=/([0-9]+)\./.exec(m),p=1;g&&(p=parseInt(g[1],10)),a(e,"ol",p);continue}if(e._listLevel){a(e,"ul",1);continue}u=null}else c=u,u=null}function o(e,t,n,r){var o,i={},a=e.dom.parseStyle(r);return x.each(a,(function(a,u){switch(u){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(r))&&(n._listLevel=parseInt(o[1],10)),/Ignore/i.test(a)&&n.firstChild&&(n._listIgnoal-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":ckground";break;case"font-weight":case"font-style":return void("normal"!==a&&(i[u]=a));case"mso-element":if(/^(comment|comment-list)$/i.test(a))return void n.remove()}return 0===u.indexOf("mso-comment")?void n.remove():void(0!==u.indexOf("mso-")&&("all"===v.getRetainStyleProps(e)||t&&t[u])&&(i[u]=a))})),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],n.wrap(new L("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],n.wrap(new L("i",1))),RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=z.filter(t"]getWebkitStyles(e);if(!1===v.shouldRemoveWebKitStyles(e)||"all"===i)return t;if(i&&(o=i.spm,u=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(e,t,n,r){var i=a.parseStyle(a.decode(n)),c={};if("none"===o)return t+r;for(var s=0;s<o.length;s++){var l=i[o[s]],f=a.getStyle(u,o[s],!0);/color/.test(o[s])&&(l=a.toHex(l),f=a.toHex(f)),f!==l&&(c[o[s]]=l)}return(c=a.serializeStyle(c,"span"))?t+' style="'+c+'"'+r:t+r}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-styl){e.$("a",t).find("font,u").each((function(t,n){e.dom.remove(n,!0)}))}var s=function e(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},l=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=function(e){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)||!l.get("powerpaste")||(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},d=function(e,t){return{clipboard:e,quirks:t}},m=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},g=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},p=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},h=function(e,t){return e.fire("paste",{ieFake:t})},v={shouldPlainTextInform:function(e){return e.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(e){return e.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",!1)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",!0)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("preturn e.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",!1)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-ht_word_fake_lists",!0)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",!0)}},b=function(e,t,n){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),p(e,!1)):(t.pasteFormat.set("text"),p(e,!0),functio)&&v.shouldPlainTextInform(e)}(e,n)&&(fun({text:e.translate(t),type:"info"})}(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you to.uT=turn e.replace(E,"")},R=function(e){return-1!==e.indexOf(E)},A=function(){return N},D=tinymce.util.Tools.resolve("tinymce.html.Entities"),B=function(e){return e.replace(/\r?\n/g,"<br>")},P=function(e,t,n){var r=e.split(/\n\n/),o=function(e,t){var n,r=[],o="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+D.encodeAllRaw(t[n])+'"');r.length&&(o+=" "+r.join(" "))}return o+">"}(t,n),i="</"+t+">",a=x.map(r,(function(e){return e.split(/\n/).join("<br />")}));return 1===a.length?a[0]:x.map(a,(function(e){return o+e+i})).join("")},O=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},_=function(e,t,n){return t?P(e,t,n):B(e)},I=tinymce.util.Tools.resolve("tinymce.html.DomParser"),L=tinymce.util.Tools.resolve("tinymce.html.Node"),M=tinymce.util.Tools.rce.util.Tools.resolve("tinymce.html.Serializer"),z={filter:e,innerText:fulements()me object"," "),u=n.getBlockElements();return t=e(t,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"!==n)if(i[n]&&(o+=" "),a[n])o+=" ";else{if(3===t.type&&(o+=t.value),!t.shortEnded&&(t=t.firstChild))do{e(t)}while(t=t.next);u[n]&&r.next&&(o+="\n","p"===n&&(o+="\n"))}else o+="\n"}(r.parse(t)),o},trimHtml:function(t){return e(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,funor:function(e){var t=0;return function(){return e+t++}},isMsEdge:function(){return-1!==navigator.userA ]/))),t=z.filter(t,[/<br class="?Apple-intercstyle|\w:\w+)(?=[\s\/>]))[^>]*>/t.length>0?t.replace(/./,"):""}]]);var a=v.getnction(t){for(var n,r=t.length;r--;)(n=t[r]).attr("style",o(e,i,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.u),c.addNodeFilter("del",(function(e){for(var t=e.length;t--;)e[t].remove()})),c.addNodeFilter("a",(function(e){for(var t,n,r,o=e.length;o--;)if(n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwraouldConvertWordFakeLists(e)&&r(s),F({validate:e.settings.validate},u).serialize(s)}(e,t):"|orventListeners("PastePostProcess"node.innerHTML,i.isDefaultPrevented())}(e,o.content,n,r):H(o.ontent(tntn t)((function(){n(e,t)}),(function(){e.insertContent('<img src="'+t+'">')})),!0}(e,t,n)},Y=function(e,t){!1===v.isSmartPasteEnabled(e)?W(e,t):function(e,t){x.each([K,X,W],(function(n){return!0!==n(e,t,W)}))}(e,t)},G=function(e,t,n){var r=n||R(t),o=j(e,k(t),r);!1===o.cancelled&&Y(e,o.content)},J=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=_(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs),G(e,t&&r.length>0&&-1===r.indexOf("data:text/mce-internal,")&&(t["text/plain"]=r)}if(e.types)for(var o=0;o<e.types.length;o++){var i=e.types[o];try{t[i]=e.getData(i)}catch(n){t[i]=""}}}return t},Z=function(e,t){return t in e&&e[t].length>0},ee=function(e){return Z(e,"text/html")||Z(e,"text/plain")},te=function(e,t,n,r){var o=z.createIdGenerator("mceclip");t&&(e.selection.setRng(t),t=null);var i=n.result,a=function(e){var t;return-1!==(t=e.indexOf(","))?e.substr(t+1):null}(i),u=o(),c=e.settings.images_reuse_filename&&r.name?function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null}(e,r.name):img_filter(t)}(e.settings,s)){var l,f=e.editorUpload.blobCache,d=void 0;l=f.findFirst((function(e){return e.base64()===a})),l?d=l:(d=f.create(u,r,a,c),f.add(d)),G(e,'<img src="'+d.blobUri()+'">',!1)}else G(e,'<img src="'+i+'">',!1)},ne=function(e,t,n){function r(r){var o,i,a,u=!1;if(r)for(o=0;o<r.length;o++)if(i=r[o],/^image\/(jpeg|png|gif|bmp)$/.test(i.type)){var c=i.getAsFile?i.getAsFile():i;(a=new window.FileReader).onload=te.bind(null,e,nvar o=function(e){return"paste"===e.type}(t)?t.clipboardData:t.dataTransfer;if(e.settings.paste_data_images&&o)return r(o.items)||r(o.files)},re=function(e){return S.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},oe=function(e,t,n){function r(n,r,o,i){var a,u;return Z(n,"ta=t.getHtml(),i=i||R(a),t.isDefaultContent(a)&&(o=!0)),a=z.trimHtml(a),t.remove(),u=!1===i&&O(a),a.length&&!u||(o=!0),o&&(a=Z(n,"text/plain")&&u?n["text/plain"]:z.innerText(a)),t.isDefaultContent(a)?void(r||e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(o?J(e,a!n.isDefaultPrevented()){if((o=n.shiftKey&&86===n.keyCode)&&C.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(n.stopImmediatePropagation(),i=(new Date).getTime(),C.ie&&o)return n.preventDefault(),void h(e,!0);t.remove(),t.create(),e.once("keyup",r),e.once("paste",(function(){e.off("keyup",r)}))}})),e.on("paste",(function(a){var u=(new Date).getTime(),c=function(e,ata||e.getDoc(n,{"text/html":""}):n}(e,a),s=(new Date).getTime()-u,l=(new Date).getTime()-i-s<1e3,f="text"===n.get()||o,d=Z(c,A());return o=!1,a.isDefaultPrevented()||function(e){var t=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}(a)||!ee(c)&&ne(e,a,t.getLastRng()||e.selection.getRng())?void t.remove():(l||a.preventDefault(),!C.ie||l&&!a.ieFake||Z(c,"text/html")||(t.create(),e.dom.bind(t.getEl(),"paste",(function(e){e.stopPropagation()})),e.getDoc().execCommand("Paste",!1,null),c["text/html"]=t.getHtml()),void(Z(c,"text/html")?(a.preventDefault(),d||(d=R(c["text/html"])),r(c,l,f,d)):w.setEditorTimeout(e,(function(){r(c,l,f,d)}),0)))}))},ie=function(e){return e.dom.get("mcepastebin")},ae=function(e,t){return t===e},ue=function(e){var t=s(null),n="%MCEPASTEBIN%";return{create:function(){return function(e,t,n){var r,o,i=e.dom,a=e.getBody(),u=e.dom.getViewPort(e.getWin()).y,c=20;t.set(e.selection.getRng());var s=t.get();if(e.inline&&(o=e.selection.getScrollContainer())&&o.scrollTop>0&&(u=o.scrollTop),s.getClientRects){var l=function(e){var t,n,r,o=e.startContainer;if((t=e.getClientRects()).length)return t[0];if(e.collapsed&&1===o.nodeType){for(r=o.childNodes[s.startOffset];r&&3===r.nodeType&&!r.data.length;)r=r.nextSibling;if(r)return"BR"===r.tagName&&(n=i.doc.createT.top-i.getPos(a).y);else{c=u;var f=s.startContainer;f&&(3===f.nodeType&&f.parentNode!,o||a).y))}}r=e.dom.add(e.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+c+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(C.ie||C.gecko)&&i.setStyle(r,"left","rtl"===i.getStyle(a,"direction",!0)?65535:-65535),i.bind(r,"beforedeactivate focusin focusout",(function(e){e.stopPropagation()})),r.focus(),e.selection.select(r,!0)}(e,t,n)},remove:function(){return function(e,t){if(ie(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)}(e,t)},getEl:function(){return ie(e)},getHtml:function(){return function(e)=x.grep(e.getBody().childNodes,(function(e){return"mcepastebin"===e.id})),t=n.shift(),x.each(n,(function(e){a(t,e)})),r=(o=e.dom.seleci=e.dom.create("div"),t.insertBefore(i,o[r]),a(i,o[r]);return t?t.innerHTML:""}(e)},getLastRng:function(){return function(e){return e.get()}(t)},isDefault:function(){return function(e,t){var n=ie(e);return function(e){return e&&"mcepastebin"===e.id}(n)&&ae(t,n.innerHTML)}(e,n)},isDefaultContent:function(e){return ae(n,e)}}},ce=function(e,t){var n=ue(e);return e.on("preInit",(function(){return function(e,t,n){var r;oe(e,t,n),e.parser.addNodeFilter("img",(function(t,n,o){var i=function(e){e.attr("data-mce-object")||r===C.transparentSrc||e.remove()},a=function(e){return 0===e.indexOta_0!=a(A(),t),!0}catch(r){return!1}},fe=function(e,t,n,r){le(e.clipboardData,t.html,t.text)?(e.preventDefault(),,o=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(o,{position:"fixed",top:"0",left:y()e.dom.createRng();u.selectNodeContents(i),e.selection.setRng(u),setTimeout((function(){e.selectioe=function(e){return{html:e.selection.getCo){e.on("cut",function(e){return function(t){!1===e.selection.isCollapsed()&&fe(t,me(e),de(e),(function(){setTimeout((function(){e.execCommand("Delete")}),0)}))}}(e)),e.on("copy",function(e){return function(t){!1===e.selection.isCollapsed()&&fe(t,me(e),de(e),se)}}(e))},pe=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),he=function(e,t){return pe.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())}eventDefault(),e.stopPropagation()})),v.shouldPasteDataImages(e)||e.on("drop;if(i=Of(lain"];u&&(r.preventDefault(),w.setEditorTimeout(e,(function(){e.undoManager.transact((function(){o["mce-internal"]&&e.execCommand("Delete"),ve(e,i),u=z.trimHtml(u),o["text/html"]?t.pasteHtml(u,a):t.pasteText(u)}))})))}}})),e.on("dragstart",(function(e){n.set(!0)})),e.on("dragover dragend",(function(t){v.shouldPasteDataImages(e)&&!1===n.get()&&(t.preventDefault(),ve(e,he(e,t))),"dragend"===t.type&&n.set(!1)}))},ye=f);r&&e.on("PastePostProcess",(function(e){r.call(t,t,e)}))},Ce=function(e){C.webkit&&i(e,u),C.ie&&(i(e,a),function(e,t){e.on("PastePostProcess",(function(n){t(e,n.node)}))}(e,c))},we=function(e){return function(){return e}},xe=(we(!1),we(!0),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=aruments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}}),Se=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",(function(e){r.active(e.state)}))},Ne=function(e,t){var n=xe(Se,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("ctive:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})};l.add("paste",(function(e){if(!1===f(e)){var t=s(!1),n=s(!1),r=s(v.isPasteAsTextEnabled(e)?"text":"html"),o=ce(e,r),i=Ce(e);return Ne(e,o),y(e,o,t),ye(e),ge(e),be(e,o,n),d(o,i)}}))}(),function(){"use strict";function e(e,t,n,r,o){return e(n,r)?w.some(n):S.isFunction(o)&&o(n)?w.none():t(n,r,o)}function t(){return{up:p.constant({selector:Yt.ancestor,closest:Yt.closest,predicate:Kt.ancestor,all:St.parents}),down:p.constant({selector:jt.descendants,predicate:Ut.descendants}),styles:p.constant({get:gn.get,getRaw:gn.getRaw,set:gn.set,remove:gn.remove}),attrs:p.constant({get:Mt.get,set:Mt.set,remove:Mt.remove,copyTo:function(e,t){var n=Mt.clone(e);Mt.setAll(t,n)}}),insert:p.constant({before:vn.before,after:vn.after,afterAll:bn.after,append:vn.append,appendAll:bn.append,prepend:vn.prepend,wrap:vn.wrap}),remove:p.constant({unwrap:Cn.unwrap,remove:Cn.remove}),create:p.constant({nu:ce.fromTag,clone:function(e){return ce.fromDom(e.dom().cloneNode(!1))},text:ce.fromText}),query:p.constant({comparePosition:function(e,t){return e.dom().compareDocumentPosition(t.dom())},prevSibling:St.prevSibling,nextSibling:St.nextSibling}),property:p.constant({children:St.children,name:Pt.name,parent:St.parent,isText:Pt.isText,isComment:Pt.isComext:Bn.set,isBoundary:function(e){return!!Pt.isElement(e)&&("body"===Pt.name(e)||M.contains(Vn,Pt.name(e)))},isEmptyTag:function(e){return!!Pt.isElement(e)&&M.containseq:pt.eq,is:pt.is}}function n(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var o=gn.get(n,e);return parseFloat(o)||0}return r},r=function(e,t){return M.foldl(t,(function(t,n){var r=gn.get(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0mber(n)&&!n.match(/^[0-9]+$/))throw e+".set accepts only positive integer values. Value was "+n;var r=t.dom();cn.isSupported(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var o=r(e,n);return t>o?t-o:0}}}function r(e){var t=function(t){return e(t).isRtl()?ko.rtl:ko.ltr};return{delta:function(e,n){return t(n).delta(e,n)},edge:function(e){return t(e).edge(e)},positions:function(e,n){return t(n).positions(e,n)}}}function o(e,t,n,r){function o(e,t,n){n&&i.setAttrib(trol.rootControl.toJSON();e.undoManager.transact((function(){Ou.each(t,(function(t){o(t,"scope",a.scope),o(t,,o(t,"class",a.class),function(e,t,n){n&&i.stoLowerCase()&&zu(e.dom,t,a.type),a.align!==n.align&&(_u.unApplyAlign(e,t),_u.applyAlign(e,t,a.align))})),e.focus()}))}function i(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var o=0;o<t.children[o],n,r)}function a(e){var t=$.immutable.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";n.push(e)},unbind:function(e){n=M.filter(n,(function(t){return t!==e}))},trigger:function(){var efunction(t){t(e)}))}}}function u(){var e={onEvent:function(e,t){},res){var r=e.mapmpare(e,n)}));return e=w.some(n),r},n=tc.create({move:a(["info"])});return{onEvent:function(e,r){r.extract(e).each((function(e){t(r,e).each((function(e){n=w.none()},events:n.registry}}(),n=e;return{on:function(){n.reset(),n=t},off:function(){n.reset(),n=e},isOn:function(){return n===t},onEvent:function(e,t){n.onEvent(e,t)},events:t.events}}function c(){var e=tc.create({drag:a(["xDelta","yDelta","target"])}),t=w.none(),n=function(){var e=tc.create({drag:a(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}();return n.events.drag.bind((function(n){t.each((function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)}))})),{assign:function(e){t=w.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}}function s(e,t){var n=To.height,r=function(e,t,n){var r=c(),o=bc.transform(r,{}),i=w.none(),u=function(e,t){return w.from(Mt.get(e,t))};r.events.drag.bind((function(e){u(e.target(),"data-row").each((function(t){var n=_a.getInt(e.target(),"top");gn.set(e.target(),"top",n+e.yDelta()+"px")})),u(e.target(),"data-column").each((function(t){var n=_a.getInt(e.target(),"left");gn.set(e.target(),"left",n+e.xDelta()+"px")}))}));var s=function(e,t){return -initial-"+t),10)};o.events.stop.bind((function(){r.get().each((function(r){i.each((function(o){u(r,"data-row").each((function(e){var t=s(r,"top");Mt.remove(r,"data-initial-top"),g.trigger.adjustHeight(o,t,parseInt(e,10))})),u(r,"data-column").each((function(e){var t=s(r,"left");Mt.remove(r,"data-initial-left"),g.trigger.adjustWidth(o,t,parseInt(e,10))})),Wi.refresh(e,o,n,t)}))}))}));var l=function(t,n)"+n,pars),gn.set(t,"opacity","0.2"),o.go(e.parent())},f=gc.bind(e.parent(),"mousedown",(function(e){Wi.isRowBar(e.target())&&l(e.target(),"top"),Wi.isColBar(e.target())&&l(e.target(),"left")})),d=function(t){return pt.eq(t,e.view())},m=gc.bind(e.view(),"mouseover",(function(r){"table"===Pt.name(r.target())||yc.closest(r.target(),"table",d)?(i="table"===Pt.name(r.target())?w.some(r.target()):Yt.ancestor(r.tr){Wi.refresh(e,r,n,t)})):qt.inBody(r.target())&&Wi.destroy(e)})),g=tc.create({adjustHeight:a(["table","delta","row"]),adjustWidth:a(["table","delta","column"]),startAdjust:a([])});return{destroy:function(){f.unbind(),m.unbind(),o.destroy(),Wi.destroy(e)},refresh:function(r){Wi.refresh(e,r,n,t)},on:o.on,off:o.off,hideBars:p.curry(Wi.hide,e),showBars:p.curry(Wi.show,e),events:g.registry}}(e,t,n),o=tc.create({beforeResize:a(["table"]),afterResize:a(["table"]),startDrag:a([])});return r.events.adjustHeight.bind((function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Ja.adjustHeight(e.table(),t,e.row(),n),o.trigger.afterResize(e.table())})),r.events.startAdjust.bind((function(e){o.trigger.startDrag()})),r.events.adjustWidth.bind((function(e){o.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Ja.adjustWidth(e.table(),n,e.column(),t),o.trigger.afterResize(e.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}function l(e){return{elementFromPoint:function(t,n){return w.from(e.document.elementFrt:function(e){return e.dom().getBoundingClientRect()},getRangedRact(t,n,r,o);return ys.getFirstRect(e,i).map((function(e){return j.map(e,p.apply)}))},getSelection:function(){return ys.get(e).map((function(t){return Ps.convertToRange(e,t)}))},fromSitus:function(t){var n=Lc.relative(t.start(),t.finish());return Ps.ce,t,n).map((function(e){rnish(),e.),t.foffset())},setRelativeSelection:function(t,n){ys.stents:function(t){ys.setToElement(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return Ms.get(ce.fromDom(e.document)).top()},scrollBy:function(t,n){Ms.by(t,n,ce.fromDom(e.document))}}}var f=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(e){return function(){return e}},m=d(!1),g=d(!0),p={noop:function(){for(var e=[],)t[neturn function(){for(var n=[],r=0;r;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},constant:d,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(e){for(var t=n++)t[n-1]=arguments[n];for(var r=new Array(argumentsnction(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.lets[i];var a=r.concat(o);return e.apply(null,a)}},not:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:m,always:g},h=p.never,v=p.always,b=function(),t=function(e){return e()},n=function(e){return e},r={fold:functime:h,isNone:v,getOr:n,getOrThunk:t,getOrDiene.")},o:b,each:fsts:h,forall:v,filter:b,equals:e,[]}eturn t===e},isSome:v,isNone:h,getOr:n,getOrThunk:n,getOrDie:n,or:r,orThunk:r,map:function(n){return e(n(t))},ap:function(n){return n.fold(b,(function(n){return e(n(t))}))},each:function(e){e(t)},bind:o,flatten:n,exists:o,forall:o,filter:function(e){return e(t)?i:y},equals:function(e){return e.is(t)},equal,(")l==e?y:C(e)}},x=function(e){return function(t){return functioOf("x("boolean"),isUndefined:}(),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r},k=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},R=function(e,t){e)&&n.push(i)}retP=Array.;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.y(t,eArray.prototype.slice,L=S.in(e){return I.call(e)},M={map:T,each:k,eachr:R,partition:function(e,t){n{pass:nngth)rush(o),o=[]f:function(e(e){nctionfuncti)retud:funt){return D(e,t).isSome()},contains:E,equal:function(e,t){return e.length===t.length&&_(e,(function(e,n){return e===t[n]}))},reverse:function(e){var t=I.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},difference:function(e,t){return A(e,(function(e){return!E(t,e)}))},mapToObject:function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n},pure:function(e){return[e]},sort:function(e,t){var n=I.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(e){return 0===e.length?w.none():w.some(e[0])},last:function(e){return 0===e.length?w.none():w.some(e[e.length-1])},from:L},F=function(){var e=Object.keys;return void 0===e?function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}:e}(),z=function(e,t){for(var n=F(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},q=function(e,t){var n={};return z(e,(function(r,o){var i=t(r,o,e);n[i.k]=i.v})),n},H=function(e,t){var n=[];return z(e,(function(e,r){n.push(t(e,r))})),n},U=function(e){return H(e,(function(e){return e}))},j={bifilter:function(e,t){var n={},r={};return z(e,(function(e,o){(t(e,o)?n:r)[o]=e})),{t:n,f:r}},each:z,map:function(e,t){return q(e,(function(e,n,r){return{k:n,v:t(e,n,r)}}))},mapToArray:H,tupleMap:q,find:function(e,t){for(var n=F(e),r=0,o=n.length;r<o;r++){var i=n[r],a=e[i];if(t(a,i,e))return w.some(a)}return w.none()},keys:F,values:U,size:function(e){return U(e).length}},W=function(e){return e.slice(0).sort()},V={sort:W,reqMessage:function(e,t){throw new Error("All required keys ("+W(e).join(", ")+") were not specified. Specified keys were: "+W(t).join(", ")+".")},unsuppMessage:function(e){throw new Error("Unsupported keys for object: "+W(e).join(", "))},validateStrArr:function(e,t){if(!S.isArray(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");M.each(t,(function(t){if(!S.isString(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))},invalidTypeMessage:function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+W(e).join(", ")+") were not.")},checkDupes:function(e){var t=W(e),n=M.find(t,(function(e,n){return n<t.length-1&&e===t[n+1]}));n.each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))}},$={immutable:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return M.each(e,(function(e,n){r[e]=p.constant(t[n])})),r}},immutableBag:function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return V.validateStrArr("required",e),V.validateStrArr("optional",t),V.checkDupes(n),function(r){var o=j.keys(r),i=M.forall(e,(function(e){return M.contains(o,e)}));i||V.reqMessage(e,o);var a=M.filter(o,(function(e){return!M.contains(n,e)}));a.length>0&&V.unsuppMessage(a);var u={};return M.each(e,(function(e){u[e]=p.constant(r[e])})),M.each(t,(function(e){u[e]=p.constant(Object.prototype.hasOwnProperty.call(r,e)?w.some(r[e]):w.none())})),u}}},K=$.immutable("width","height"),X=$.immutable("rows","columns"),Y=$.immutable("row","column"),G=$.immutable("x","y"),J=$.immutable("element","rowspan","colspan"),Q=$.immutable("element","rowspan","colspan","isNew"),Z=$.immutable("element","rowspan","colspan","row","column"),ee=$.immutable("element","cells","section"),te=$.immutable("element","isNew"),ne=$.immutable("element","cells","section","isNew"),re=$.immutable("cells","section"),oe=$.immutable("details","section"),ie=$.immutable("startRow","startCol","finishRow","finishCol"),ae={dimensions:K,grid:X,address:Y,coords:G,extended:Z,detail:J,detailnew:Q,rowdata:ee,elementnew:te,rowdatanew:ne,rowcells:re,rowdetails:oe,bounds:ie},ue=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:p.constant(e)}},ce={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return ue(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return ue(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return ue(n)},fromDom:ue,fromPoint:function(e,t,n){return w.from(e.dom().elementFromPoint(t,n)).map(ue)}},se=8,le=9,fe=1,de=3,me=fe,ge=le,pe=function(e){return e.nodeType!==me&&e.nodeType!==ge||0===e.childElementCount},he={all:function(e,t){var n=void 0===t?document:t.dom();return pe(n)?[]:M.map(n.querySelectorAll(e),ce.fromDom)},iseturn!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!=n n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=void 0===t?document:t.dom();return pe(n)?w.none():w.from(n.querySelector(e)).map(ce.fromDom)}},ve=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},be="undefined"!=typeof window?window:Function("return this;")(),ye=function(e,t){for(var n=null!=t?t:be,r=0;r<e.length&&null!=n;++r)n=n[e[r]];return n},Ce=function(e,t){var n=e.split(".");return ye(n,t)},we=function(e,t){var n=function(e,t){return Ce(e,t)}(e,t);if(null==n)throw e+" not available on this browser";return n},xe=function(){return we("Node")},Se=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Ne=function(e,t){return Se(e,t,xe().DOCUMENT_POSITION_CONTAINED_BY)},Ee=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}},Te=function(){return ke(0,0)},ke=function(e,t){return{major:e,minor:t}},Re={nu:ke,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?Te():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return ke(r(1),r(2))}(e,n)},unknown:Te},Ae="Edge",De="Chrome",Be="Opera",Pe="Firefox",Oe="Safari",_e=function(e,t){return function(){return t===e}},Ie=function(e){var t=e.current;return{current:t,version:e.version,isEdge:_e(Ae,t),isChrome:_e(De,t),isIE:_e("IE",t),isOpera:_e(Be,t),isFirefox:_e(Pe,t),isSafari:_e(Oe,t)}},Le={unknown:function(){return Ie({current:void 0,version:Re.unknown()})},nu:Ie,edge:p.constant(Ae),chrome:p.constant(De),ie:p.constant("IE"),opera:p.constant(Be),firefox:p.constant(Pe),safari:p.constant(Oe)},Me="Windows",Fe="Android",ze="Linux",qe="Solaris",He="FreeBSD",Ue=function(e,t){return function(){return t===e}},je=function(e){var t=e.current;return{current:t,version:e.version,isWindows:,isAndroid:Ue(Fe,t),isOSX:Ue("OSX",t),isLin)}},We={unknown:function(){return je({current:void 0,version:Re.unknown()})},nu:je,windows:p.constant(Me),ios:p.constant("iOS"),android:p.constant(Fe),linux:p.constant(ze),osx:p.constant("OSX"),solaris:p.con},Vturn M.find(e,(function(e){return e.search(n)}))},$e=function(e,t){return Ve(e,t).map((functime,version:n}}))},Ke=function(e,t){return Ve(e,t).map((function(e){var n=Re.detect(e.versionRegexes,t);return{current:e.name,version:n}}))},Xe=function(e,t){return t+e},Ye=function(e,t){return e+t},Ge=function(e,t){return e.substring(0,e.w.none():w.some(e.substr(0,1))},Ze=function(e){return""===e?w.none():w.some(e.substring(1))},et=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},tt=function(e,t){return et(e,t,0)},nt=functih)},rt={supplant:function(e,t){return e.replace(/\${([^{}]*)peof e;return"string"===t||"number"===t}(r)?r:e}))},startsWith:tt,removeLeading:function(e,t){return tt(e,t)?Ge(e,t.length):e},removeTrailing:function(e,t){return nt(e,t)?Je(e,t.length):e},ensureLeading:function(e,t){return tt(e,t)?e:Xe(e,t)},ensureTrailing:function(e,t){reexOf(t)},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:function(e){return Qe(e).bind((function(t){return Ze(e).map((function(e){return t.toUpperCase()+e}))})).getOr(e)}},ot=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,it=function(e){return function(t){return rt.contains(t,e)}},at=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return rt.contains(e,"edge/")&&rt.contains(e,"chrome")&&rt.contains(e,"safari")&&rt.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return rt.contains(e,"msie")||rt.contains(e,"trident")}},{name:"Opera",versionRegexes:[ot,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:it("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:it("firefox")},{name:"Safari",versionRegexes:[ot,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(rt.contains(e,"safari")||rt.contains(e,"mobile/"))&&rt.contains(e,"applewebkit")}}],ut=[{name:"Windows",search:it("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return rt.contains(e,"iphone")||rt.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:it("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:it("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:it("linux"),versionRegexes:[]},{name:"Solaris",search:it("sunos"),vd"),versionRegexes:[]}],ct={browsers:p.constant(at),oses:p.constant(ut)},st=function(e){var t=ct.browsers(),n=ct.oses(),r=$e(t,e).fold(Le.unknown,Le.nu),o=Ke(n,e).fold(We.unknown,We.nu),i=function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,u=r||i||a&&!0===/mobile/i.test(n),c=e.isiOS()||e.isAndroid(),s=c&&!u,l=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:p.constant(r),isiPhone:p.constant(o),isTablet:p.constant(u),isPhone:p.constant(s),isTouch:p.constant(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:p.constant(l)}}(o,r,e);return{browser:r,os:o,deviceType:i}},lt=Ee((function(){var e=navigator.userAgent;return st(e)})),ft={detect:lt},dt=function(e,t){return e.dom()===t.dom()},mt=ft.detect().browser,gt=mt.isIE()?function(e,t){return Ne(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},pt={eq:dt,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(e,t){return M.exists(t,p.curry(dt,e))},contains:gt,is:he.is},ht=function(e){return ce.fromDom(e.dom().ownerDocument)},vt=function(e){var t=e.dom();return w.from(t.parentNode).map(ce.fromDom)},bt=function(e){var t=e.dom();return w.from(t.previousSibling).map(ce.fromDom)},yt=function(e){var t=e.dom();return w.from(t.nextSibling).map(ce.fromDom)},Ct=function(e){var t=e.dom();return M.map(t.childNodes,ce.fromDom)},wt=function(e,t){var n=e.dom().childNodes;return w.from(n[t]).map(ce.fromDom)},xt=$.immutable("element","offset"),St={owner:ht,defaultView:function(e){var t=e.dom().ownerDocument.defaultView;return ce.fromDom(t)},documentElement:function(e){var t=ht(e);return ce.fromDom(t.dom().documentElement)},parent:vt,findIndex:function(e){return vt(e).bind((function(t){var n=Ct(t);return M.findIndex(n,(function(t){return pt.eq(e,t)}))}))},parents:function(e,t){for(var n=S.isFunction(t)?t:p.constant(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=ce.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},siblings:function(e){return vt(e).map(Ct).map((funn!pt.eq(e,t)}))})).getOr=e.dom();return w.from(t.offsetParent).map(erse(ve(e,bt))},nextSibling:yt,nextSiblings:function(e){return ve(e,yt)},children:Ct,child:wt,firstChild:function(e){return wt(e,0)},lastChil-1)}r){ction(n e.dom().t){return kt(t)===e}},At=Rt(fe),Dt=Rt(de),Bt=Rt(le),Pt={name:Tt,type:kt,value:function(e){return e.document:Bt,isComment:function(e){return kt(e)===se||"#comment"===Tt(e)}},Ot=function(e,t,n){if(!(S.isString(n)||S.isBoolean(n)||S.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),e.setAttribute(t,n+"")},_t=function(e,t,n){Ot(e.dom(),t,n)},It=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Lt=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Mt={clone:function(e){return M.foldl(e.dom().attributes,(function(e,t){return e[t.nameom();j.each(t,(function(e,t){Ot(n,t,e)}))},get:It,has:Lt,rene:function(e){var t=e.dom().attributes;return null==t||0===t.lengtsElement(t)&&M.each(n,(function(n){!function(e,t,n){Lt(e,n)&&!Lt(t,n)&&_t(t,n,It(e,n))}(e,t,n)}))}},Ft=Ee((function(){return zt(ce.fromDom(document))})),zt=function(e){var t=e.dom().body;if(null==t)throw"Body is not available yet";return ce.fromDom(t)},qt={body:Ft,getBody:zt,inBody:function(e){var t=Pt.isText(e)?e.dom().parentNode:e.dom();returnction(e){return Ht(qt.body(),e)},ancestors:function(e,t,n){return M.filter(St.parents(e,n),t)},siblings:function(e,t){return M.filter(St.siblings(e),t)},children:function(e,t){return M.filter(St.children(e),t)},descendants:Ht},jt={all:function(e){return he.all(e)},ancestors:function(e,t,n){return Ut.ancestors(e,(function(e){retur(e,t){return Ut.sibl){returne.dom(),o=S.isFunction(n)?nreturn w.some(i);if(o(i))break}return w.none()},Vt=function(e,t){return M.find(e.dom().childNodes,p.compose(t,ce.fromDom)).map(ce.fromDom)},$t=function(e,t){return function e(n){for(var r=0;r<n.childNodes.length;r++){if(t(ce.fromDom(n.childNodes[r])))retu o=e(n.childNodes[r]);if(o.isSome())return o}return w.none()}(e.dom())},Kt={first:function(e){return $t(qt.body(),e)},ancestor:Wt,closest:function(t,n,r){return e((function(e){return n(eomDom(n.parentNode),(function(n){return!pt.eq(,Xt=functe){return he.is(e,t)}),n)},Yt={first:function(e){return he.one(e)},ancestor:Xt,sibling:function(e,t){return Kt.sibling(e,(function(e){return he.is(e,t)}))},child:function(e,t){return Kt.child(e,(function(e){return he.is(e,t)}))},descendant:function(e,t){return he.one(t,e)},closest:function(t,n,r){return e(he.is,Xt,t,n,r)}},Gt=function(e,t,n){var r=void 0!==n?n:p.constant(!1);return r(t)?w.none():M.contains(e,Pt.name(t))?w.some(t):Yt.ancestor(t,e.join(","),(function(e){return he.is(e,"table")||r(e)}))},Jt=function(e,t){return St.parent(t).map((function(t){return jt.children(t,e)}))},Qt=p.curry(Jt,"th,td"),Zt=p.curry(Jt,"tr"),en=function(e,t){return parseInt(Mt.get(e,t),10)},tn={cell:function(e,t){return Gt(["td","th"],e,t)},firstCell:function(e){return Yt.descendant(e,"th,td")},cells:function(e){return Et.firstLayer(e,"th,td")},neighbourCells:Qt,table:function(e,t){return Yt.closest(e,"table",t)},row:function(e,t){return Gt(["tr"],e,t)},rows:function(e){return Et.firstLayer(e,"tr")},notCell:function(e,t){return Gt(["caption","tr","tbody","tfoot","thead"],e,t)},neighbourR,t,n){var r=en(e,t),o=en(e,n);return ae.grid(r,o)}},nn=function(e){var t=tn.rows(e);return M.map(t,(function(e){var t=e,n=St.parent(t).bind((function(e){var t=Pt.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"})),r=M.map(tn.cells(e),(function(e){var t=Mt.has(e,"rowspan")?parseInt(Mt.get(e,"rowspan"),10):1,n=Mt.has(e,"colspan")?parseInt(Mt.get(e,"colspan"),10):1;return ae.detail(e,t,n)}));return ae.rowdata(t,r,n)}))},rn=function(e,t){return M.map(e,(function(e){var n=M.map(tn.cells(e),(function(e){var t=Mt.has(e,"rowspan")?parseInt(Mt.get(e,"rowspan"),10):1,n=Mt.has(e,"colspan")?parseInt(Mt.get(e,"colspan"),10):1;return ae.detail(e,t,n)}));return ae.rowdata(e,n,urn e+","+t},an=function(e,t){var n=M.bind(e.all(),(function(e){return e.cells()}));return M.filter(n,t)},un={generate:function(e){var t={},n=[],r=e.length,o=0;M.each(e,(f),(function(e,n){for(var a=0;void 0!==t[on(r,a)];)a++;for(var u=ae.extended(e.element(),e.rowspan(),e.colspan(),r,a),c=0;c<e.colspan();c++)for(var s=0;s<e.rowspan();s++){var l=a+c,f=on(r+s,l);t[f]=u,o=Math.max(o,l+1)}i.par access:p.constant(t),all:p.constant(n)}},getAt:function(e,t,n){var r=e.access()[on(t,n)];return void 0!==r?w.some(r):w.none()},findItem:funcn(e){return n(t,e.element())}));return r.length>0?w.some(r[0]):w.none()},filterItems:an,justCells:function(e){var t=M.map(e.all(),(function(e){return e.cells()}));return M.flatten(t)}},cn={isSupported:function(e){return void 0!==e.style}},sn=f to CSS.set. Property ",t,":: Value ",n,":: Eleme&e.style.setProperty(t,n)},ln=function(e,t){cn.isSupported(e)&&e.style.removeProperty(t)},fn=function(e,t,n){var r=e.dom();sn(r,t,n)},dn=function(e,t){return cn.isSupported(e)?e.style.getPropertyValue(t):""},mn=function(e,t){var n=e.dom(),r=dn(n,t);return w.from(r).filter((function(e){return e.length>0}))},gn={copy:function(e,t){var n=e.dom(),r=t.dom();cn.isSupported(n)&&cn.isSupported(r)&&(r.style.cssText=n.style.cssText)}id 0===n?Mt.remove:Mt.set)(e,"style",n),r},setAll:function(e,t){var n=e.dom();j.each(t,(function(e,t){sn(n,t,e)}))},setOptions:function(e,t){var n=e.dom();j.each(t,(function(e,t){e.fold((function(){ln(n,t)}),(function(rt.)},get:function(e,t)0:o},getyle.item(r);t[o]=n.n),mn(e){return e.dom().offsetWidth},transfer:function(e,t,n){Pt.isElement(e)&&Pt.isElement(t)&&M.each(n,(function(n){!function(e,t,n){mn(e,n).each((function(e){mn(t,n).isNone()&&fn(t,n,e)}))}(e,t,n)}))}},pn=function(e,t){St.parent(e).each((function(n){n.dom().insertBefore(t.dom(),e.dom())}))},hn=functnextSiblinn(e,t)}))},prepend:function(e,t){St.firstChild(e).fold((function(){hn(e,t)}),(function(n){e.dom().insertBefore(t.dom(),n.dom())}))},append:hn,appendAt:function(e,t,n){St.child(e,n).fold((function(){hn(e,t)}),(function(e){pn(e,t)}))},wrap:function(e,t){pn(e,t),hn(t,e)}},bn={beforeefore(e,t)}))},after:function(e,t){M.each(t,(function(n,r){var o=0===r?e:t[r-1];vn.after(o,n)}))},prepend:function(e,t){M.each(t.slice().reverse(),(function(t){vn.prepend(e,t)}))},append:function(e,t){M.each(t,(function(t){vn.append(e,t)}))}},yn=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Cn={empty:function(e){e.dom().textContent="",M.each(St.children(e),(function(e){yn(e)}))},remove:yn,unwrap:function(e){var t=St.children(e);t.length>0&&bn.before(e,t),yn(e)}},wn=$.immutable("minRow","minCol","maxRow","maxCol"),xn=function(e,t,n){var r=e[n].element(),o=ce.fromTag("td");vn.append(o,ce.fromTag("br")),(t?vn.append:vn.prepend)(.is(e.element(),t)},r=nn(e),o=un.generate(r),i=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),oar n=e.row(),u=n+e.rowspan()-1,c=e.column(),s=c+e.colspan()-1;n<r?r=n:u>i&&(i=u),c<o?o=c:s>a&&(a=s)}=Et.filterFirstLayer(e,"th,td",(function(e){return he.is(e,a)}));return M.each(u,Cn.remove),function(e,t,n,r){f=t.grid().rows(),a=0;a<i;a++)for(var u=!1,c=0;c<o;c++)a<n.minRow()||a>n.maxRow()||c<n.minCol()||c>n.maxCol,i,n),function(e,t){var n=M.filter(Et.firstLayer(e,"tr"M.each(n,Cn.r.remove(e,"rowspheight")}(e,i),e},Nn=function(e,t){return ce.fromDom(e.dom().cloneNode(t))},En=function(e){return Nn(e,!0)},Tn=function(e,t){var n=ce.fromTag(t),r=Mt.clone(e);return Mt.setAll(n,r),n},kn=function(e){rr n=Tn(e,t),r=St.children(En(e));return bn.append(n,r),n},Dn=function(e,t){var n=function(t){return e(t)?w.from(t.dom().=r.version.major?function(e){try{return n(e)}catch(t){return w.none()}}:n;return{get:function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},getOption:o,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r}}}(Pt.isText,"text"),Bn={get:function(e){return Dn.get(e)},getOption:function(e){return Dn.getOption(e)},set:function(e,t){Dn.set(e,t)}},Pn=function(e){return"img"===Pt.name(e)?1:Bn.getOptioreturn St.children(e).=["img","br"],_n=Pn,In=function(e){var t=function(e){return Bn.getOption(e).filter((function(e){return 0!==e.trim().length||e.indexOf("")>-1})).isSome()}(e);return t||M.contains(On,Pt.name(e))},Ln=function(e,t){return function e(n){for(var r=St.children(n),o=r.length-1;o>=0;o--){var i=r[o];if(t(i))return w.some(i);var a=e(i);if(a.isSome())return a}return w.none()}(e)},Mn={first:function(e){return Kt.descendant(e,In)},last:function(e){return Ln(e,In)}},Fn=function(){var e=ce.fromTag("td");return vn.append(e,ce.fromTag("br")),e},zn=function(e,t,n){var r=An(e,t);return j.each(n,(function(e,t){null===e?Mt.remove(r,t):Mt.seturn function(){return ce.fromTag("tr",e.dom())}},Un=function(e,t,n){return{row:Hn(t),cell:function(t){var r=St.owner(t.element()),o=ce.fromTag(Pt.name(t.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=i.length>0?function(e,t,n){return Mn.first(e).map((function(r){var o=n.join(","),i=jt.ancestors(r,o,(function(t){return pt.eq(t,e)}));return M.foldr(ie,n),n}),t)})).getOr(t)}(t.element(),o,ipy(t.element(),o),gn.remove(o,"height"),1!==t.colspan()&&gn.remove(t.element(),"width"),e(t.element(),o),o},replrow:Hn(e),cell:Fn,replace:qn,gap:Fn}},Wn=function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,St.children(ce.fromDom(n))},Vn=["body","p","div","article","a","header","nav","section","ooot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],nction(e,t,n,r){var o=t(e,n);return M.foldr(r,(func,t,n.filter(p.curry(e.eq,t))}))},Xn=function(e,t,n){return n.length>0?function(e,t,n,r){return r(e,t,n[0],n.slice(1))}(e,t,n,$n):w.none()},Yn=function(e,t){return p.curry(e.eq,t)},Gn=function(e,t,n,r){var o=void 0!==r?r:p.constant(!1),i=[t].concat(e.up().all(t)),a=[n].concat(e.up().all(n)),u=function(e){return M.findIndex(e,o).fold((function(){return e}),(function(t){return e.slice(0,t+1)}))},c=u(i),s=u(a),l=M.find(c,(function(t){return M.exists(s,Yn(e,t))}));return{firstpath:p.constant(c),secondpath:p.constant(s),shared:p.constant(l)}},Jn=Gn,Qn=function(e,t,n){return Xn(e,t,n)},Zn=function(e,t,n,r){return Jn(e,t,n,r)},er=t(),tr=function(e,t){return Qn(er,(function(t,n){return e(n)}),t)},nr=function(e,t,n){return Zn(er,e,t,n)},rr=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},or=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},ir=function(e,t){for(var n=!0,r=p.curry(rr,t),o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)n=n&&un.getAt(e,o,i).exists(r);return n?w.some(t):w.none()},ar=function(e,t,n){var r=un.findItem(e,t,pt.eq),o=un.findItem(e,n,pt.eq);return r.bind((function(e){return o.map((function(t){return function(e,t){return ae.bounds(Math.min(e.row(),t.row(ow()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))}(e,t)}))}))},ur=ar,cr=function(e,t,n){return ar(e,t,n).bind((function(t){return ir(e,t)}))},sr=function(e,t,n,r){return un.findItem(e,t,pt.pan.column();return un.getAt(e,o+n,i+r).map((function(e){return e.element()}))}))},lr=function(et){var n=un.filterItems(e,p.curry(or,t));return M.map(n,(function(e){return e.element()}))}))},fr=function(e,t){return un.findItem(e,t,(function(e,t){return pt.contains(t,e)})).bind((function(e){return e.element()}))},dr=function(e){var t=nn(e);return un.generate(t)},mr=function(e,t,n){return tn.table(e).bind((function(r){var o=dr(r);return sr(o,e,t,n)}))},gr=function(e,t,n){var r=dr(e);return lr(r,t,n)},pr=function(e,t,n,r,o){var i=dr(e),a=pt.eq(e,n)?t:fr(i,t),u=pt.eq(e,o)?r:fr(i,r);return lr(i,a,u)},hr=function(e,t,n){var r=dr(e);return cr(r,t,n)},vr=function(e,t){return Yt.ancestor(e,"table")},br=$.immutableBag(["boxes","start","finish"],[]),yr=function(e,t,n){var r=function(e){return function(t){return n(t)||pt.eq(t,e)}};return pt.eq(e,t)?w.some(br({boxes:w.some([e]),start:e,finish:t})):vr(e).bind((function(o){return vr(t).bind((function(i){if(pt.eq(o,i))return w.some(br({boxes:gr(o,e,t),starth",r(o))).length>0?u[u.length-1]:t;return w.some(br({boxes:pr(o,e,o,t,i),start:e,finish:a}))}if(pt.contains(i,o)){var u,c=(u=jt.ancestors(e,"td,th",r(i))).length>0?u[u.length-1]:e;return w.some(br({boxes:pr(i,e,o,t,i),start:e,finish:c}))}return nr(e,t).shared().bind((function(a){return Yt.closest(a,"table",n).bind((function(n){var a=jt.ancestors(t,"td,th",r(n)),u=a.length>0?a[a.length-1]:t,c=jt.ancestors(e,"td,th",r(n)),s=c.length>0?c[c.length-1]:e;return w.some(br({boxes:pr(n,e,o,t,i),start:s,finish:u}))}))}))}))}))},Cr={identify:yr,retrieve:function(e,t){var n=jt.descendants(e,t);return n.length>0?w.some(n):w.none()},shiftSelection:function(e,t,n,r,o){return function(e,t){return M.find(e,(function(e){return he.is(e,t)}))}(e,o).bind((function(e){return mr(e,t,n).bind((function(e){return function(e,t){return Yt.ancestor(e,"table").bind((function(n){return Yt.descendant(n,t).bind((function(t){return yr(t,e).bind((function(e){return e.boxes().map((function(t){return{boxes:p.constant(t),start:p.constant(e.start()),finish:p.constant(e.finish())}}))}))}))}))}(e,r)}))}))},getEdges:function(e,t,n){return Yt.descendant(e,t).bind((function(t){return Yt.descendant(e,n).bind((function(e){return tr(vr,[t,e]).map((function(n){return{first:p.constant(t),last:p.constant(e),table:p.constant(n)}}))}))}))}},wr=function(e,t){return Cr.retrieve(e,t)},xr=function(e,t,n){return Cr.getEdges(e,t,n).bind((function(t){var n=function(t){return pt.eq(e,t)},r=Yt.ancestor(t.first(),"thead,tfoot,tbody,table",n),o=Yt.ancestor(t.last(),"thead,tfoot,tbody,table",n);return r.bind((function(e){return o.bind((function(n){return pt.eq(e,n)?hr(t.table(),t.first(),t.last()):w.none()}))}))}))},Sr="data-mce-selected",Nr="td["+Sr+"],th["+Sr+"]",Er="["+Sr+"]",Tr="data-mce-first-selected",kr="td["+Tr+"],th["+Tr+"]",Rr="data-mce-last-selected",Ar="td["+Rr+"],th["+Rr+"]",Dr={selected:p.constant(Sr),selectedSelector:p.constant(Nr),attributeSelector:p.constant(Er),firstSelected:p.constant(Tr),firstSelectedSelector:p.constant(kr),lastSelected:p.constant(Rr),lastSelectedSelector:p.coeach(e,(function(r,o){var i=j.keys(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],u=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!S.isArray(u))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(". Expected "+u.length+" ("+u+"), got "+n);for(var r=new Array(n),i=0;i<r.length;i+(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:function(e){var n=j.keys(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));var o=M.forall(t,(function(e){return M.contains(n,e)}));if(!o)throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}})),n},Pr=Br([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Or={cata:function(e,t,n,r){return e.fold(t,n,r)},none:Pr.none,multiple:Pr.multiple,single:Pr.single},_r=function(e,t){return Or.cata(t.get(),p.constant([]),p.identity,p.constant([e]))},Ir=function(e,t){return Or.cata(t.get(),w.none,(function(t,n){return 0===firstSelectedSelector(),Dr.lastSelectedSelector()).bind((function(e){return t.length>1?w.some({bounds:p.constant(e),cells:p.constant(t)}):w.none()}))}),w.none)},Lr=function(e,t){var n=_r(e,t);return n.length>0&&M.forall(n,(function(e){return Mt.has(e,"rowspan")&&parseInt(Mt.get(e,"rowspan"),10)>1||Mt.has(e,"colspan")&&parseInt(Mt.get(e,"colspan"),10)>1}))?w.some(n):w.none()},Mr=_r,Fr=function(e){return{element:p.constant(e),mergable:w.none,unmergable:w.none,selection:p.constant([e])}},zr=$.immutable("element","clipboard","generators"),qr={noMenu:Fr,forMenu:function(e,t,n){return{element:p.constant(n),mergable:p.constant(Ir(t,e)),unmergable:p.constant(Lr(n,e)),selection:p.constant(Mr(n,e))}},notCell:function(e){return Fr(e)},paste:zr,pasteRows:function(e,t,n,r,o){return{element:p.constant(n),mergable:w.tant(Mr(n,e)),clipboard:p.constant(r),generators:p.constant(o)}}},Hr={registerEvents:function(e,t,n,r){e.on("BeforeGetContent",(function(n){!0===n.selection&&Or.cata(t.get(),p.noop,(function(t){n.preventDefault(),function(e){return tn.table(e[0]).map(Rn).map((function(e){return[Sn(e,Dr.attributeSelector())]}))}(t).each((function(t){n.content=M.map(t,(function(t){return function(e,t){return e.selection.serian("")}))}),p.noop)})),e.on("BeforeSetContent",(function(t){!0===t.selection&&!0===t.paste&&w.from(e.dom.getParent(i=ce.fromDom(o);tn.table(i).bind((function(o){var a=M.filter(Wn(t.content),(function(e){return"meta"!==Pt.name(e)}));if(1===a.length&&"table"===Pt.name(a[0])){t.preventDefault();var u=ce.fromDom(e.getDoc()),c=jn(u),s=qr.paste(i,a[0],c);n.pasteCells(o,s).each((function(t){e.selection.setRng(t),e.focus(),r.clear(o)}))}}))}))}))}},Ur=n("height",(function(e){return qt.inBody(e)?e.dom().getBoundingClientRect().height:e.dom().offsetHeight})),jr=function(e){return Ur.get(e)},Wr=function(e){return Ur.getOuter(e)},Vr=n("width",(function(e){return e.dom().offsetWidth})),$r=functetOuter(e)},Xr=ft.detect(),Yr=function(e,t,n){return function(e,t){var n=parseFloat(e);return isNaN(n)?t:n}(gn.getn Xr.browser.isIE()||Xr.browser.isEdge()?function(e){var t=Yr(e,"padding-top",0),n=Yr(e,"padding-bottom",0),r=Yr(e,"border-top-width",0),o=Yr(e,"bordntRect().height;return"border-box"===gn.get(e,"box-sizing")?i:i-t-n-(r+o)}(e):Yr(e,"height",jr(e))},Jr=/(\d+(\.\d+)?)(\w|%)*/,Qr=/(\d+(\.\d+)?)%/,Zr=/(\d+(\.\d+)?)px|em/,eo=function(e,t){gn.set(e,"height",t+"px")},to=function(e,t,n,r){var o=parseInt(e,10);return rt.endsWith(e,"%")&&"table"!==Pt.name(t)?function(e,t,n,r){var o=tn.table(e).map((function(e){var r=n(e);return Math.floor(t/100*r)})).getOr(t);return r(e,o),o}(t,o,n,r):o},no=function(e){var t=function(e){return gn.getRaw(e,"height").getOrThunk((function(){return Gr(e)+"px"}))}(e);return t?to(t,e,jr,eo):jr(e)},ro=function(e,t){return Mt.has(e,t)?parseInt(Mt.get(e,t),10):1},oo=function(e){return gn.getRaw(e,"width").fold((function(){return w.from(Mt.get(e,"width"))}),(function(e){return w.some(e)}))},io=function(e,t){return e/t.pixelWidth()*100},ao={percentageBasedSizeRegex:p.constant(Qr),pixelBasedSizeRegex:p.constant(Zr),setPixelWidth:function(e,t){gn.set(e,"width",t+"px")},setPercentageWidth:function(e,t){gn.set(e,"width",t+"%")},setHeight:eo,getPixelWidth:function(e,t){return oo(e).fold((function(){var t=$r(e);return parseInt(t,10)}),(function(n){return function(e,t,n){if(Zr.test(t)){var r=Zr.exec(t);return parseInt(r[1],10)}if(Qr.test(t)){var o=Qr.exec(t);return function(e,t){return e/100*t.pixelWidth()}(parseFloat(o[1]),n)}var i=$r(e);return parseInt(i,10)}(e,n,t)}))},getPercentageWidth:function(e,t){return oo(e).fold((function(){var n=$r(e),r=parseInt(n,10);return io(r,t)}),(function(n){return function(e,t,n){if(Qr.test(t)){var r=Qr.exec(t);return parseFloat(r[1])}var o=$r(e),i=parseInt(o,10);return io(i,n)}(e,n,t)}))},getGenericWidth:function(e)f(Jr.onstant(t[1]),unit:p.constant(t[3])})}return w.none()}))},setGenericWidth:function(e,t,n){gn.set(e,"width",t+n)},getHeight:function(e){ret:oo},uo=function(e,t){ao.getGenericWidth(e).each((function(n){var r=n.width()/2;ao.setGenericWidth(e,r,n.unit()),ao.setGenericWidth(t,r,n.unit())}))},co=function(e,t){var n=t||ce.fromDom(document.documentElement);return Kt.ancestor(e,p.curry(pt.eq,n)).isSome()},so=function(e){var t=e.dom();return t===t.window?e:Pt.isDocument(e)?t.defaultView||t.parentWindow:null},lo=function e(t,n){return{left:p.constant(t),top:p.constant(n),translate:function(r,o){return e(t+r,n+o)}}},fo=function(e,t){return void 0!==e?e:void 0!==t?t:0},mo=function(e){var t=e.dom(),n=t.ownerDocumeo(r.offsetLeft,r.offsetBoundingClientRect();return lo(t.left,t.top)}(t):lo(0,0)},go=functin=lement,i=fo(r.pageYOffset,o.scrollTop),a=fo(r.pageXOffset,o.scrollLeft),u=fo(o.=fo(o.clientLeft,n.clientLeft);return mo(e).translate(a-c,i-u)},po=$.immutable("row","y"),ho=$.immutable("col","x"),vo=function(e){return go(e).left()+Kr(e)},bo=function(e){return go(e).left()},yo=function(e,t){return ho(e,bo(t))},Co=function(e,t){return ho(e,vo(t))},wo=function(e){return go(e).top()},xo=function(e,t,n){if(0===n.length)return[];var r=M.map(n.slice(1),(function(t,n){return t.map((function(t){return e(n,t)}))})),o=n[n.length-1].map((function(e){return t(n.length-1,e)}));return r.concat([o])},So={delta:p.identity,positions:p.curry(xo,(function(e,t){return po(e,wo(t))}),(function(e,t){return po(e,wo(ity,edge:bo,positions:p.curry(xo,yo,Co)},Eo={delta:function(e,t){return-e},edge:vo,positions:p.curry(xo,Co,yo)},To={height:So,rtl:Eo,ltr:No},ko={ltr:To.ltr,rtl:To.rtl},Ro=function(e){var t=nn(e);return un.generate(t).grid()},Ao=function e(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},Do=function(e,t){return Bo(e,t,{validate:S.isFunction,label:"function"})},Bo=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return V.validateStrArr("required",t),V.checkDupes(t),function(r){var o=j.keys(r),i=M.forall(t,(function(e){return M.contains(o,e)}));i||V.reqMessage(t,o),e(t,o);var a=M.filter(t,(function(e){return!n.validate(r[e],e)}));return a.length>0&&n(t){return!M.contains(e,t)}));n.length>0&&V.unsuppMessage(n)})),ensure:p.curry(Do,Po),ensureWith:p.curry(Bo,Po)},_o=function(e){var t=Mt.has(e,"colspan")?parseInt(Mt.get(e,"colspan"),10):1,n=Mt.has(e,"rowspan")?parseInt(Mt.get(e,"rowspan"),10):1;return{element:p.constanan:p.constant(n)}},Io=Oo.exactly(["cell"o(e);var n=Ao(w.none()),r=void 0!==t?t:_o,o=function(t){return e.cell(t)},i=function(e){var t=function(e){var t=r(e);return o(t)}(e);return n.get().isNone()&&n.set(w.some(t)),a=w.some({item:e,replacement:t}),t},a=w.none();return{getOrInit:function(e,t){return a.fold((function(){return i(e)}),(function(n){return t(e,n.item)?n.replacement:i(e)}))},cursor:n.get}},Mo=function(e,t){return function(n){var r=Ao(w.none());Io(n);var o=[],i=function(i){var a=n.replace(i,t,{scope:e});return o.push({item:i,sub:a}),r.get().isNone()&&r.set(w.some(a)),a};return{replaceOrInit:function(e,t){return function(e,t){return M.find(o,(function(n){return t(n.item,e)}))}(e,t).fold((function(){return i(e)}),(function(n){return t(e,n.item)?n.sub:i(e)}))},cursor:r.get}}},Fo=function(e){Io(e);var t=Ao(w.none());return{combine:function(n){return t.get().isNone()&&t.set(w.some(n)),function(){var t=e.cell({element:p.constant(n),colspan:p.constant(1),rowspan:p.constant(1)});return gn.remove(t,"width"),gn.remove(n,"width"),t}},cursor:t.get}},zo=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],qo=function(e,t){var n=e.property().name(t);return M.contains(zo,n)},Ho=function(e,t){return M.contains(["br","img","hr","input"],e.property().name(t))},Uo=qo,jo=function(e,t){var n=e.property().name(t);return M.contains(["ol","ul"],n)},Wo=Ho,Vo=t(),$o=function(e){return Uo(Vo,e)},Ko=function(e){return jo(Vo,e)},Xo=function(e){return Wo(Vo,e)},Yo=function(e){var t=function(e){return"br"===Pt.name(e)},n=function(e){return M.forall(e,(function(e){return t(e)||Pt.isText(e)&&0===Bn.get(e).trim().length}))},r=function(e){return Mn.last(e).bind((function(n){var r=function(e){return St.nextSibling(e).map((function(e){return!!$o(e)||(Xo(e)?"img"!==Pt.name(e):void 0)})).getOr(!1)}(n);return St.parent(n).map((function(oo(o t=etut}();Cn.empty(e[0]),bn.append(e[0],o)},Go=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)i.hasOwnProperty(a)&&(r[a]=e(r[a],i[a]))}return r}},Jo=Go((function(e,t){return S.isObject(e)&&S.isObject(t)?Jo(e,t):t})),Qo=Go((function(e,t){return t})),Zo={deepMerge:Jo,mer){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},ti=function(e,t){for(var n=0;n<e.length;n++)e())return r}return w.none()},ni=function(e,t){return ae.rowcells(t,e.section())},ri=function(e,t){return e.cells()[t]},oi={addCell:function(e,t,n){var r=e.cells(),o=r.slice(0,t),i=r.slice(t),a=o.concat([n]).concat(i);return ni(e,a)},setCells:ni,muta.cells()[t]=n},getCell:ri,getCellElement:function(e,t){return ri(e,t).element()},mapCells:function(e,t){var n=e.cel){return e.cells().length}},ii=function(e,t){if(0===e.length)return 0;var n=e[0],r=M.findIndex(e,(function(e){return!t(n.element(),e.element())}));return r.fold((function(){return e.length}),(function(e){return e}))},ai=function(e,t,n,r){var o=function(e,t){return e[t]}(e,t).cells().slice(n),i=ii(o,r),a=function(e,t){return M.map(e,(function(e){return oi.getCell(e,t)}))}(e,n).slice(t),u=ii(a,r);return{colspan:p.constant(i),rowspan:p.constant(u)}},ui=function(e,t){var n=M.map(e,(function(e,t){return M.map(e.cells(),(function(e,t){return!1}))}));return M.map(e,(function(r,o){var i=M.bind(r.cells(),(function(r,i){if(!1===n[o][i]){var a=ai(e,o,i,t);return function(e,t,r,o){for(var i=e;i<e+r;i++)for(var a=t;a<t+o;a++)n[i][a]=!0}(o,i,a.rowspan(),a.colspan()),[ae.detailnew(r.element(),a.rowspan(),a.colspan(),r.isNew())]}return[]}));return ae.rowdetails(i,r.section())}))},ci=function(e,t,n){for(var r=[],o=0;o<e.grid().rows();o++){for(var i=[],a=0;a<e.grid().columns();a++){var u=un.getAt(e,o,a).map((function(e){return ae.elementnew(e.element(),n)})).getOrThunk((function(){return ae.elementnew(t.gap(),!0)}));i.push(u)}var c=ae.rowcells(i,e.all()[o].section());r.push(c)}return r},si=function(e,t,n,r){n===r?Mt.remove(e,t):Mt.set(e,t,n)},li=function(e,t){var n=[],r=[],o=function(t,o){var i=Yt.child(e,o).getOrThunk((function(){var t=ce.fromTag(o,St.owner(e).dom());return vn.append(e,t),t}));Cn.empty(i);var a=M.map(t,(function(e){e.isNew()&&n.push(e.element());var t=e.element();return Cn.empty(t),M.each(e.cells(),(function(e){e.isNew()&&r.push(e.element(rowspan",e.rowspan(),1),vn.append(t,e.element())})),t}));bn.append(i,a)},i=function(t){Yt.child(e,t).bind(Cn.remove)},a=function(e,t){e.length>0?o(e,t):i(t)},u=[],c=[],s=[];return M.each(t,(function(e){switch(e.section()){case"thead":u.push(e);break;case"tbody":c.stn(e){var t=kn(e.esi(n,"rowspan",e.rowspan(),1),vn.append(t,n)})),t}));return +)n.push(t(r));return n},mi=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},gi=function(e,t){if(t<0||t>=e.length-1)return w.none();var n=e[t].fold((function(){var n=M.reverse(e.slice(0,t));return ti(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return w.some({value:e,delta:0})})),r=e[t+1].freturn ti(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return w.some({value:e,delta:1})}));return n.bind((function(e){return r.map((function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))}))},pi=function(e,t,unrThunk(n)})).map((function(e){return e.element()}))},hi=function(e){var t=e.grid(),n=mi(0,t.columns()),r=mi(0,t.rows());return M.map(n,(function(t){return pi((function(){return M.bind(r,(function(n){return un.getAt(e,n,t).filter((function(e){return e.column()===t})).fold(p.constant([]),(function(e){return[e]}))}))}),(function(e){return 1===e.colspan()}),(function(){return un.getAt(e,0,t)}))}))},viction(t){return pi((function(){return M.bind(r,(function(n){return un.getAt(e,t,n).filter((function(e){return e.row()===t})).fold(p.constant([]),(function(e){return[e]}))}))}),(function(e){return 1===e.rowspan()}),(function(){return un.getAt(e,t,0)}))}))},bi=function(e,t,n,r,o){var i=ce.fromTag("div");return gn.setAll(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),Mt.setAll(i,{"data-column":e,role:"presentation"}),i},yi=function(e,t,n,r,o){var i=ce.fromTag("div");return gn.setAll(x",:"presen;return{resolve:function(e){return t+"-"+e}}},wi=Ci("ephox-snooker"),xi={resolve:wi.resolve},Si=function(e,t){var n=Mt.get(e,t);return void 0===n||""===n?[]:n.split(" ")},Ni=Si,Ei=function(e,t,n){var r=Si(e,t).concat([n]);Mt.set(e,t,r.join(" "))},Ti=function(e,t,n){var r=M.filter(Si(e,t),(function(e){return e!==n}));r.length>0?M):Mt.remove(e,t)},ki=funclass")},Ri=function(e,t){return Ei(e,"class",t)},Ai=function(e,t){return Ti(e,"class",t)},Di=ki,Bi=Ri,Pi=Ai,Oi=function(e,t){M.contains(ki(e),t)?Ai(e,t):Ri(e,t)},_i=function(e){return void 0!==e.dom().classList},Ii=function(e,t){return _i(e)&&e.dom().classList.contains(t)},Li={add:function(e,t){_i(e)?e.dom().classList.add(t):Bi(e,t)},remove:function(e,t){_i(e)?e.dom().classList.remove(t):Pi(e,t),function(e){0===(_i(e)?e.dom().classList:Di(e)).length&&Mt.remove(e,"class")}(e)},toggle:function(e,t){return _i(e)?e.dom().classList.toggle(t):Oi(e,t)},toggler:function(e,t){var n=_i(e),r=e.dom().classList;return function(e,t,n){var r=n||!1,o=function(){t(),r=!0},i=function(){e(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}((function(){n?r.remove(t):Pi(e,t)}),(function(){n?r.add(t):Bi(e,t)}),Ii(e,t))},has:Ii},Mi=xi.resolve("resizer-bar"),Fi=xi.resolve("resizer-rows"),zi=xi.resolve("resizer-cols"),qi=function(e){var t=jt.descendants(e.parent(),"."+Mi);M.each(t,Cn.remove)},Hi=function(e,t,n){varach((function(t){var o=n(r,t);Li.add(o,Mi),vn.append(e.parent(),o)}))}))},Ui=function(e,t,n,r,o,i){var a=go(t);!function(e,t,n,r){Hi(e,t,(function(e,t){var o=yi(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return Li.add(o,Fi),o}))}(e,n.length>0?o.positions(n,t):[],a,Kr(t)),function(e,t,n,r){Hi(e,t,(function(e,t){var o=bi(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return Li.add(o,zi),o}))}(e,r.length>0?i.positions(r,t):[],a,Wr(t))},ji=function(e,t){var n=jt.descendants(e.parent(),"."+Mi);M.each(n,t)},Wi={refresh:function(e,t,n,r){qi(e);var o=nn(t),i=un.generate(o),a=vi(i),u=hi(i);Ui(e,t,a,u,n,r)},hide:function(e){ji(e,(function(e){gn.set(e,"display","none")}))},show:function(e){ji(e,(function(e){gn.set(e,"display","block")}))},destroy:.has(e,Fi)},isColBar:function(e){return Li.has(e,zi)}},Vi=function(e,t){return function(e,t){var n=function(e){var n=ti(e,(function(e){return St.parent(e.element()).map((function(e){var t=St.parent(e).isNone();return ae.elementnew(e,t)}))}));return n.getOrThunk((function(){return ae.elementnew(t.row(),!0)}))};return M.map(e,(function(e){var t=n(e.details());return ae.rowdatanew(t.element(),e.details(),e.section(),t.isNew())}))}(ui(e,pt.eq),t)},$i=function(e,t){var n=M.flatten(M.map(e.all(),(function(e){return e.cells()})));return M.find(n,(function(e){return pt.eq(t,e.element())}))},Ki=function(e,t,n,r,o){return ffunction(e,t){return ci(e,t,!1)}(f,c),r=e(n,t,pt.e}));return d.fold((function(){return w.none()}),(function(e){var t=li(a,e.grid());return n(a,e.grid(),s),r(a),Wi.refresh(i,a,To.height,s),w.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))}},Xi=Vi,Yi=function(e,t){return tn.cell(t.element()).bind((function(t){return $i(e,t)}))},Gi=function(e,t){var n=M.map(t.selection(),(function(t){return tn.cell(t).bind((function(t){return $i(e,t)}))})),r=ei(n);return r.length>0?w.some(r):w.none()},Ji=function(e,t){return tn.cell(t.element()).bind((function(n){return $i(e,n).map((function(e){return Zo.merge(e,{generators:t.generators,clipboard:t.clipboard})}))}))},Qi=function(e,t){var n=M.map(t.selection(),(function(t){return tn.cell(t).bind((function(t){return $i(e,t)}))})),r=ei(n);return r.length>0?w.some(Zo.merge({cells:r},{generators:t.generators,clipboard:t.clipboard})):w.none()},Zi=function(e,t){return t.mergable()},ea=function(e,t){return t.unmergable()},ta=function e(t){return{is:function(e){return t===e},isValue:p.always,isError:p.never,getOr:p.constant(t),getOrfunction(n){return e(t)},orThunk:function(n){return e(t)},fold:function(e,n){return n(t)},map:function(n){return e(n(t))},each:function(e){e(t)},bind:function(e){return e(t)},exists:function(e){return e(t)},forall:function(e){return e(t)},toOption:function(){return w.some(t)}}},na=function e(t){return{is:p.never,isValue:p.never,isError:p.always,getOr:p.identity,getOrThunk:function(e){return e()},getOrDie:function(){return p.die(String(t))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,n){return e(t)},map:function(n){return e(t)},each:p.noop,bind:function(n){return e(t)},exists:p.never,forall:p.always,toOption:w.none}},ra=function(e,t){return M.map(e,(function(){return ae.elementnew(t.cell(),!0)}))},oa=function(e,t,n){return e.concat(di(t,(function(t){return oi.setCells(e[e.length-1],ra(e[e.length-1].cells(),n))})))},ia=function(e,t,n){return M.map(e,(function(e){return oi.setCells(e,e.cells().concat(ra(mi(0,t),n)))}))},aa=function(e,t,n){if(e.row()>=t.length||e.column()>oi.cellLength(t[0]))return na("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),o=r[0].cells().slice(e.column()),i=oi.cellLength(n[0]),a=n.length;return ta({rowDelta:p.constant(r.length-a),colDelta:p.constant(o.length-i)})},ua=function(e,t){var n=oi.cellLength(e[0]),r=oi.cellLength(t[0]);return{rowDelta:p.constant(0),colDelta:p.constant(n-r)}},ca=function(e,t,n){var r=t.colDelta()<0?ia:p.identity;return(t.rowDelta()<0?oa:p.identity)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},sa=function(e,t,n,r){if(0===e.length)return e;for(var o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)oi.mutateCell(e[o],i,ae.elementnew(r(),!1));return e},la=function(e,t,n,r){for(var o=!0,i=0;i<e.length;i++)for(var a=0;a<oi.cellLength(e[0]);a++){var u=n(oi.getCellElement(e[i],a),t);!0===u&&!1===o?oi.mutateCell(e[i],a,ae.elementnew(r(),!0)):!0===u&&(o=!1)}return e},fa=function(e,t,n,r){if(t>0&&t<e.length){var o=function(e,t){return M.foldl(e,(function(e,n){return M.exists(e,(function(e){return t(e.element(),n.element())}))?e:e.concat([n])}),[])}(e[t-1].cells(),n);M.each(o,(function(o){for(var i=w.none(),a=t;a<e.length;a++)for(var u=0;u<oi.cellLength(e[0]);u++){var c=e[a].cells()[u];n(c.element(),o.element())&&(i.isNone()&&(i=w.some(r())),i.each((function(t){oi.mutateCell(e[a],u,ae.elementnew(t,!0))})))}}))}return e},da=function(e,t,n,r){var o=oi.getCell(e[t],n),i=p.curry(r,o.element()),a=e[t];return e.length>1&&oi.cellLength(a)>1&&(n>0&&i(oi.getCellElement(a,n-1))||n<a.length-1&&i(oi.getCellElement(a,n+1))||t>0&&i(oi.getCellElement(e[t-1],n))||t<e.length-1&&i(oi.getCellElement(e[t+1],n)))},ma=function(e,t,n,r,o){return aa(e,t,n).map((function(i){var a=ca(t,i,r);return function(e,t,n,r,o){for(var i=e.row(),a=e.column(),u=i+n.length,c=a+oi.cellLength(n[0]),s=i;s<u;s++)for(var l=a;l<c;l++){da(t,s,l,o)&&la(t,oi.getCellElement(t[s],l),o,r.cell);var f=oi.getCellElement(n[s-i],l-a),d=r.replace(f);oi.mutateCell(t[s],l,ae.elementnew(d,!0))}return t}(e,a,n,r,o)}))},ga=function(e,t,n,r,o){fa(t,e,o,r.cell);var i=ua(n,t),a=ca(n,i,r),u=ua(t,a),c=ca(t,u,r);return c.slice(0,e).concat(a).concat(c.slice(e,c.length))},pa=function(e,t,n,r,o){var i=e.slice(0,t),a=e.slice(t),u=oi.mapCells(e[n],(function(n,i){return t>0&&t<e.length&&r(oi.getCellElement(e[t-1],i),oi.getCellElement(e[t],i))?oi.getCell(e[t],i):ae.elementnew(o(n.element(),r),!0)}));return i.concat([u]).concat(a)},ha=function(e,t,n,r,o){return M.map(e,(function(e){var Element(e,t-1),oi.getCellElement(e,t))?oi.getCell(e,t):ae.elementnew(o(oi.getCellElement(e,n),r),!0);return oi.addCell(e,t,i.map(e,(function(e,a){var u=a===t?ae.elementnew(o(oi.getCellElement(e,n),r),!0):oi.getCell(e,n);return oi.addCell(e,i,u)}))},ba=function(e,t,n,r,o){var i=t+1,a=e.slice(0,i),u=e.slice(i),c=oi.mapCells(e[t],(function(e,t){return t===n?ae.elementnew(o(e.element(),r),!0):e}));return a.concat([c]).concat(u)},ya=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Ca=function(e,t,n){var r=M.map(e,(function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return ae.rowcells(r,e.section())}));return M.filter(r,(function(e){return e.cells().length>0}))},w(e,(function(e){return oi.mapion(e){return M.exists(t,(function(t){return n(e.element(),t.element())}))}(e)?ae.elementnew(r(e.el,t,n,r){return void 0!==oi.getCllElement(e[t-1],n),oi.getCellElement(e[t],n))},Sa=function(e,t,n){return t>0&&n(oi.getCellElement(e,t-1),oi.getCellElement(e,t))},Na=function(e,t,n,r){var o=M.bind(e,(function(r,o){ret,t)]}));return wa(e,o,n,r)},Ea=function(e,t,n,r){var o=e[t],i=M.bind(o.cells(),(function(r,i){return xa(e,t,i,n)||Sa(o,i,n)?[]:[r]}));return wa(e,i,n,r)},Ta=function(e){return{fold:e}},ka=function(){return Ta((function(e,t,n,r,o){return e()}))},Ra=function(e){return Ta((function(t,n,r,o,i){return n(e)}))},Aa=function(e,t){return Ta((func)},Da=function(e,t,n){return Ta((function(r,o,i,a,u){return a(e,t,n)}))},Ba=function(e,t){return Ta((function(n,r,o,i,a){return a(e,t)}))},Pa=function(e,t,n,r){var o=e.slice(0),i=function(e,t){return 0===e.length?ka():1===e.length?Ra(0):0===t?Aa(0,1):t===e.length-1?Ba(t-1,t):t>0&&t<e.length-1?Da(t-1,t,t+1):ka()}(e,t),a=function(e){return M.map(e,p.constant(0))},u=p.constant(a(o)),c=function(e,t){if(n>=0){var i=Math.max(r.minCellWidth(),o[t]-n);return a(o.slice(0,e)).concat([n,i-o[t]]).concat(a(o.slice(t+1)))}var u=Math.max(r.minCellWidth(),o[e]+n),c=o[e]-u;return ice(t+1)))},s=c;return i.fold(u,(function(e){return r.singleColumnWidth(o[e],n)}),s,(function(e,t,n){return c(t,n)}),(function(e,t){if(n>=0)return a(o.slice(0,t)).concat([n]);var i=Math.max(r.minCellWidth(),o[t]+n);return a(o.slice(rseInt(Mt.get(e,t),10)>1},_a={hasColspan:function(e){return Oa(e,"colspan")},hasRowspan:function(e){return Oa(e,"rowspan")},minWidth:p.constant(10),minHeight:p.constant(10),getInt:function(e,t){return parseInt(gn.get(e,t),10)}},Ia=function(e,t,n){return gn.getRaw(e,t).fold((function(){return n(e)+"px"}),(function(e){return e}))},La=function(e){return Ia(e,"width",ao.getPixelWidth)},Ma=function(e){return Ia(e,"height",ao.getHeight)},Fa=function(e,t,n,r,o){var i=hi(olspan)).fold((function(){var e=gi(a,t);return r(e)}),(function(e){return n(e,o)}))}))},za=function(e){return e.map((function(ectiorn M.map(o,(function(e,t){return e.filter(p.not(_a.hasRowspan)).fold((function(){var e=gi(i,t);return r(e)}),(function(e){return n(e)}))}))},Ha={getRawWidths:function(e,t){return Fa(e,t,La,za)},getPixelWidths:function(e,t,n){return Fa(e,t,ao.getPixelWidth,(function(e){return e.getOrThunk(n.minCellWidth)}),n)},getPercentageWidths:function(e,t,n){return Fa(e,t,ao.getPercentageWidth,(function(e){return e.fold((function(){return n.minCellWidth()}),(function(e){return e/n.pixelWidth()*100}))}),n)},getPixelHeights:function(e,t){return qa(e,t,ao.getHeight,(function(e){return e.getOrThunk(_a.minHeight)}))},getRawHeights:function(e,t){return qa(e,t,Ma,za)}},Ua=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r},ja=function(e,t){var n=un.justCells(e);return M.map(n,(function(e){var n=Ua(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:p.constant(n),colspan:e.colspan}}))},Wa=function(e,t){var n=un.justCells(e);return M.map(n,(function(e){var n=Ua(e.row(),e.row()+e.rowspan(),t);return{element:e.elemepan:e.rowspan}}))}p(e.all(),(function(e,n){return{element:e.element,height:p.constant(t[n])}}))},$a=function(e){var t=parseInt(e,10),n=p.identity;return{width:p.constant(t),pixelWidth:p.constant(t),getWidths:Ha.getPixelWidths,getCellDelta:n,singleColumnWidth:function(e,t){return[Math.max(_a.minWidth(),e+t)-e]},minCellWidth:_a.minWidth,setElementWidth:ao.setPixelWidth,setTableWidth:fuon(e,t){return e+t}),0);ao.setPixelWidth(e,r)}}},Ka=function(e,t){if(ao.pen function(e,t){var n=parseFloat(e),r=$r(t);return{width:p.constant(n),pixelWidth:p.constant(r),getWidths:Ha.getPercentan(e){return e/r*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return _a.minWidth()/r*100},setElementWidth:ao.setPercentageWidth,setTableWidth:function(e,t,r){var o=n+r;ao.setPercentageWidth(e,o)}}}(ao.percentageBasedSizeRegex().exec(t)[1],e);if(ao.pixelBasedSizeRegex().test(t)){var n=ao.pixelBasedSizeRegex().exec(t);return $a(n[1])}var r=$r(e);return $a(r)},Xa=function(e){return ao.getRion(t){return Ka(e,t)}))},Ya=function(e){return un.generate(e)},Ga=function(e){var t=nn(e);return Ya(t)},Ja={adjustWidth:function(e,t,n,r){var o=Xa(e),i=o.getCellDelta(t),a=Ga(e),u=o.getWidths(a,r,o),c=Pa(u,n,i,o),s=M.map(c,(function(e,t){return e+u[t]})),e.element(),e.width())})),n===a.grid().columns()-1&&o.setTableWidth(e,s,i)},a{var o=Ga(e),i=Ha.getPixelHeights(o,r),a=M.map(i,(function(e,r){return n===r?Math.max(t+e,_a.minHeight()):e})),u=Wa(o,a),c=Va(o,a);M.each(c,(fught())})),M.each(u,(function(e){ao.setHeight(e.element(),e.height())}));var s=function(e){return M.foldr(e,(function(e,t){return e+t}),0)}(a);ao.setHeight(e,s)},adjustWidthTo:function(e,t,n){var r=Xa(e),o=Ya(t),i=r.getWidths(o,n,r),a=ja(o,i)lement(),e.width())}));var u=Mngth>0&&r.setElementWidth(e,u)}},Qa=function(e){0===tn.cells(e).length&&Cn.remove(e)},Za=$.immutable("grid","cursor"),eu=function(e,t,n){return tu(e,t,n).orThunk((function(){return tu(e,0,0)}))},tu=function(e,t,n){return w.from(e[t]).bind((function(e){return w.from(e.cells()[n]).bind((function(e){return w.from(e.element())}))}))},nu=function(e,t,n){return Za(e,tu(e,t,n))},ru=function(e){return M.foldl(e,(function(e,t){return M.exists(e,(function(e){return e.row()===t.row()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.row()-t.row()}))},ou=function(e){return M.foldl(e,(function(e,t){return M.exists(e,(function(e){return e.column()===t.column()}))?e:e.concat([t])}),[]).sort((function(e,t){return e.column()-t.column()}))},iu=function(e,t,n){var r=rn(e,n),o=un.generate(r);return ci(o,t,!0)},au=Ja.adjustWidthTo,uu={insertRowBefore:Ki((function(e,t,n,r){var o=t.row(),i=t.row(),a=pa(e,i,o,n,r.getOrInit);return nu(a,i,t.column())}),Yi,p.noop,p.noop,Lo),insertRowsBefore:Ki((function(e,t,n,r){var o=t[0].row(),i=t[0].row(),a=ru(t),u=M.foldl(a,(function(e,t){return pa(e,i,o,n,r.getOrInit)}),e);return nu(u,i,t[0].column())}),Gi,p.noop,p.noop,Lo),insertRowAfter:Ki((function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),a=pa(e,i,o,n,r.getOrInit);return nu(a,i,t.column())}),Yi,p.noop,p.noop,Lo),insertRowsAfter:Ki((function(e,t,n,r){var o=ru(t),i=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),u=M.OrInit)}),e);return nu(u,a,t[0].column())}),Gi,p.noop,p.noop,Lo),insertColumnBefore:Ki((function(e,t,n,r){var o=t.column(),i=t.column(),a=ha(e,i,o,n,r.getOrInit);return nu(a,t.row(),i)}),Yi,au,p.noop,Lo),insertColumnsBefore:Ki((function(e,t,n,r){var o=ou(t),i=o[0].column(),a=o[0].column(),u=M.foldl(o,(function(e,t){return ha(e,a,i,n,r.getOrInit)}),e);return nu(u,t[0].row(),a)}),Gi,au,p.noop,Lo),insertColumnAfter:Ki((function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),a=ha(e,i,o,n,r.getOrInit);return nu(a,t.row(),i)}),Yi,au,p.noop,Lo),insertColumnsAfter:Ki((function(e,t,n,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),a=ou(t),u=M.foldl(a,(function(e,t){return ha(e,i,o,n,r.getOrInit)}),e);return nu(u,t[0].row(),i)}),Gi,au,p.noop,Lo),splitCellIntoColumns:Ki((function(e,t,n,r){var o=va(e,t.row(),t.column(),n,r.getOrInit);return nu(o,t.row(),t.column())}),Yi,au,p.noop,Lo),splitCellIntoRows:Ki((function(e,t,n,r){var o=ba(e,t.row(),t.column(),n,r.getOrInit);return nu(o,t.row(),t.column())}),Yi,p.noop,p.noop,Lo),eraseColumns:Ki((function(e,t,n,r){var o=ou(t),i=Ca(e,o[0].column(),o[o.length-1].column()),a=eu(i,t[0].row(),t[0].column());return Za(i,a)}),Gi,au,Qa,Lo),eraseRows:Ki((function(e,t,n,r){var o=ru(t),i=ya(e,o[0].row(),o[o.length-1].row()),a=eu(i,t[0].row(),t[0].column());return Za(i,a)}),Gi,p.noop,Qa,Lo),makeColumnHeader:Ki((function(e,t,n,r){varnu(o,t.row(),t.column())}),Yi,p.noop,p.noop,Mo("row","th")),unmakeColumnHeader:Ki((function(e,t,n,r){var o=Na(e,t.column(),n,r.replaceOrInit);return nu(o,t.row(),t.column())}),Yi,p.noop,p.noop,Mo(null,"td")),makeRowHeader:Ki((function(e,t,n,r){var o=Ea(e,t.row(),n,r.replaceOrInit);return nu(o,t.row(),t.column())}),Yi,p.noop,p.noop,Mo("col","th")),unmakeRowHeader:Ki((function(e,t,n,r){var o=Ea(e,t.row(),n,r.replaceOrInit);return nu(o,t.row(),t.column())}),Yi,p.noop,p.noop,Mo(null,"td")),mergeCells:Ki((function(e,t,n,r){var o=t.cells();Yo(o);var i=sa(e,t.bounds(),n,p.constant(o[0]));return Za(i,w.from(o[0]))}),Zi,p.noop,p.noop,Fo),unmergeCells:Ki((function(e,t,n,r){var o=M.foldr(t,(function(e,t){return la(e,t,n,r.combine(t))}),e);return Za(o,w.from(t[0]))}),ea,au,p.noop,Fo),pasteCells:Ki((function(e,t,n,r){var o=function(e,t){var n=nn(e),r=un.generate(n);return ci(r,t,!0)}(t.clipboard(),t.generators()),i=ae.address(t.row(),t.column());return ma(i,e,o,t.gement()))}),(function(e){var n=eu(e,t.row(),t.column());return Za(e,n)}))}),Ji,aun,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),a=iu(t.clipboard(),t.generatorst.cells[0].column());return Za(u,c)}),Qi,p.noop,p.noop,Lo),pasteRowsAfter:Ki((function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=iu(t.clipboard(),t.generators(),o),u=ga(i,e,a,t.generators(),n),c=eu(u,t.cells[0].row(),t.cells[0].column());return Za(u,c)}),Qi,p.noop,p.noop,Lo)},cu=function(e){return ce.fromDom(e.getBody())},su={getBody:cu,getIsRoot:function(e){return function(t){return pt.eq(t,cu(e))}},addSizeSuffix:function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},removePxSuffix:function(e){return e?e.replace(/px$/,""):""}},lu=function(e){return"rtl"===gn.get(e,"direction")?"rtl":"ltr"},fu={onDirection:function(e,t){return function(n){return"rtl"===lu(n)?t:e}},getDirection:lu},du={isRtl:p.constant(!1)},mu={isRtl:p.constant(!0)},gu={directionAt:function(e){return"rtl"===fu.getDirection(e)?mu:du}},pu=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore":" e.getParam("table_default_attributes",vu,"object")},ytion",!0,"boolean")},Cu=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},wu=function(e){return e.getParam("table_row_advtab",!0,"boolean")},xu=function(e){return e.getParam("table_advtab",!0,"boolean")},Su=function(e){return e.getParam("table_appearance_options",!0,"boolean")},Nu=function(e){return e.getParam("table_style_by_css",!1,"boolean")},Eu=function(e){return e.getParam("table_cell_class_list",[],"array")},Tu=function(e){return e.getParam("table_row_class_list",[],"array")},ku=function(e){return e.getParam("table_class_list",[],"array")},Ru=function(e){return!1===e.getParam("table_responsive_width")},Au=function(e,t){return e.fire("newrow",{node:t})},Du=function(e,t){return e.fire("newcell",{node:t})},Bu=function(e,t){var n=function(e){return"table"===Pt.name(su.getBody(e))},o=function(e){var t=e.getParam("table_clone_elements");return S.isString(t)?w.some(t.split(/[ ,]/)):Array.isArray(t)?w.some(t):w.none()}(e),i=function(t,n,i,a){return function(u,c){var s=jt.descendants(u,"td[data-mce-style],th[data-mce-style]");M.each(s,(function(e){Mt.remove(e,"data-mce-style")}));var l=a(),f=ce.fromDom(e.getDoc()),d=r(gu.directionAt),m=Un(i,f,o);return n(u)?t(l,u,c,m,d).bind((function(t){return M.each(t.newRows(),(function(t){Au(e,t.dom())})),M.each(t.newCells(),(function(t){Du(e,t.dom())})),t.cursor().map((function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n}))})):w.none()}},a=i(uu.eraseRows,(function(t){var r=Ro(t);return!1===n(e)||r.rows()>1}),p.noop,t),u=i(uu.eraseColumns,(function(t){var r=Ro(t);return!1===n(e)||r.columns()>1}),p.noop,t);return{deleteRow:a,deleteColumn:u,insertRowsBefore:i(uu.insertRowsBefore,p.always,p.noop,t),insertRowsAftsBefore:i(uu.insertColumnsBefore,p.always,uo,t),insertColumnsAfter:i(uu.insertColumnsAfter,p.always,uo,t),mergeCells:i(uu.mergeCells,p.always,p.noop,t),pasteRowsAfter:i(uu.pasteRowsAfter,p.always,p.noop,t),pasteCells:i(uu.pasteCells,p.always,p.noop,t)}},Pu=function(e,t,n){var r=nn(e),o=un.generate(r);return Gi(o,t).map((function(e){var t=ci(o,n,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),r=Xi(t,n);return fi(r)}))},Ou=tinymce.util.Tools.resolve("tinymce.util.Tools"),_u={applyAlign:function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},applyVAlign:function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},unApplyAlign:function(e,t){Ou.each("left center right".split(" "),(function(n){e.formatter.remove("align"+n,{},t)}))},unApplyVAlign:function(e,t){Ou.each("top middle bottom".split(" "),(function(n){e.formatter.remove("valign"+n,{},t)}))},getTDTHOverallStyle:function(e,t,n){var r;return function(t,r){for(var o=0;o<r.length;o++){var i=e.getStyle(r[o],n);if(void 0===t&&(t=i),t!==i)return""}return t}(r,e.select("td,th",t))}},Iu=function(e,t){var n=e.dom,r=t.contrle"===t.control.name()?(r.find("#borderStyle"),r.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),r.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change"),r.find("#width").value(i.width||"").fire("change"),r.find("#height").value(i.height||"").fire("change")):(i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?su.addSizeSuffix(o.width):"",i.height=o.height?su.addSizeSuffix(o.height):""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},Lu={createStyleForm:function(e){var t=function(){var t=function(e){return e.getParam("color_picker_callback")}(e);if(t)return function(n){return t.call(e,(function(e){n.control.value(e).fire("change")}),n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:p.curry(Iu,e)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDeistbox",name:"borderStyle",width:90,onselect:p.curry(Iu,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hiorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},buildListItems:function(e,t,n){return function e(n,r){return r=r||[],Ou.each(n,(function(n){var o={text:n.text||n.title};n.menu?o.menu=e(n.menu):(o.value=n.value,t&&t(o)),r.push(o)})),r}(e,n||[])},updateStyleField:Iu,extractAdvancedStyles:function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r}},Mu=function(e,t,n){function r(e,t,n){n&&a.setAttrib(e,t,n)}function o(e,t,n){n&&a.setStyle(e,t,n)}var i,a=e.dom;Lu.updateStyleField(e,n),i=n.control.rootControl.toJSON(),e.undoManager.transact((function(){Ou.each(t,(function(n){r(n,"scope",i.scope),1===t.length?r(n,"style",i.style):function(e,t){delete e.dataset.mceStyle,e.style.cssText+=";"+t}(n,i.style),r(n,"class",i.class),o(n,"width",su.addSizeSuffix(i.width)),o(n,"height",su.addSizeSuffix(i.height)),i.type&&n.nodeName.toLowerCase()!==i.type&&(n=a.rename(n,i.type)),1===t.length&&(_u.unApplyAlign(e,n),_u.unApplyVAlign(e,n)),i.align&&_u.applyAlign(e,n,i.align),i.valign&&_u.applyVAlign(e,n,i.valign)})),e.focus()}))},Fu=function(e){var t,n,r,o=[];if(o=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!o.length&&t&&o.push(t),t=t||o[0]){n=o.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""};return Ou.each("left center right".split(" "),(function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)})),Ou.each("top middle bottom".split(" "),(function(n){e.formatter.matchNode(t,"valign"+n)&&(r.valign=n)})),Cu(e)&&Ou.extend(r,Lu.extractAdvancedStyles(n,t)),r}(e,t),Eu(e).length>0&&(r={name:"class",type:"listbox",label:"Class",values:Lu.buildListItems(Eu(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})}))});var i={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:p.curry(Lu.updateStyleField,e)},{label:"Height",name:"height",onchange:p.curry(Lu.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};Cu(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:i},Lu.createStyleForm(e)],onsubmit:p.curry(Mu,e,o)}):e.windowManager.open({title:"Cell properties",data:n,body:i,onsubmit:p.curry(Mu,e,o)})}},zu=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,i=e.select(n,r)[0];i||(i=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(t),o.hasChildNodes()||e.remove(o)},qu={open:function(e){var t,n,r,i,a,u,c=e.dom,s=[];t=c.getParent(e.selection.getStart(),"table"),n=c.getParent(e.selection.getStart(),"td,th"),Ou.each(t.rows,(function(e){Ou.each(e.cells,(function(t){if(c.getAttrib(t,"data-mce-selected")||t===n)return s.push(e),!1}))})),(r=s[0])&&(a=s.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:function(e,t){var n=e.dom,r={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()};return Ou.each("left center right".split(" "),(function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)})),wu(e)&&Ou.extend(r,Lu.extractAdvancedStyles(n,t)),r}(e,r),Tu(e).length>0&&(i={name:"class",type:"listbox",label:"Class",values:Lu.buildListItems(Tu(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})}))}),u={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},i]},wu(e)?e.windowManager.open({title:"Row properties",data:a,bodyType:"tabpanel",body:[{title:"General",type:"form",items:u},Lu.createStyleForm(e)],onsubmit:p.curry(o,e,s,a)}):e.windowManager.open({title:"Row properties",data:a,body:u,onsubmit:p.curry(o,e,s,a)}))}},Hu=tinymce.util.Tools.resolve("tinymce.Env"),Uu={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},ju=function(e,t,n,r,o),Mt.setAll(i,o.attributes);var a=ce.fromTag("tbody");vn.append(i,a);for(var u=[],c=0;c<e;c++){for(var s=ce.fromTag("tr"),l=0;l<t;l++){var f=c<n||l<r?ce.fromTag("th"):ce.fromTag("td");l<r&&Mt.set(f,"scope","row"),c<n&&Mt.set(f,"scope","col"),vn.append(f,ce.fromTag("br")),o.percentages&&gn.set(f,"width",100/t+"%"),vn.append(s,f)}u.push(s)}return bn.append(a,u),i},Wu=function(e){return e.dom().innerHTML},Vuag("div"),n=ce.fromDom(e.dom().cloneNode(!0));return vn.append(t,n),Wu(t)},$u=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},Ku=function(e){return S.isString(e)&&-1!==e.indexOf("%")},Xu=function(e,t,n){var r=function(e){return e.getParam("table_default_styles",hu,"object")}(e),o={styles:r,attributes:bu(e),percentages:Ku(r.width)&&!Ru(e)},i=ju(n,t,0,0,o);Mt.set(i,"data-mce-id","__mce");var a=Vu(i);return e.insertContent(a),Yt.descendant(su.getBody(e),'table[data-mce-id="__mce"]').map((function(t){return Ru(e)&&gn.set(t,"width",gn.get(t,"width")),Mt.remove(t,"data-mce-id"),function(e,t){M.each(jt.descendants(t,"tr"),(function(t){Au(e,t.dom()),M.each(jt.descendants(t,"th,td"),(function(t){Du(e,t.dom())}))}))}(e,t),function(e,t){Yt.descendant(t,"td,th").each(p.curry($u,e))}(e,t),t.dom()})).getOr(null)},Yu=function(e,t,n){var r,o,a=e.dom;Lu.updateStyleField(e,n),!1===(o=n.control.rootControl.toJSON()).class&&delete o.class,e.undoManager.transact((function(){t||(t=Xu(e,o.cols||1,o.rows||1)),function(e,t,n){var r=e.dom,o={},a={};if(o.class=n.class,a.height=su.addSizeSuffix(n.height),r.getAttrib(t,"width")&&!Nu(e)?o.width=su.removePxSuffix(n.width):a.width=su.addSizeSuffix(n.width),Nu(e)?(a["border-width"]=su.addSizeSuffix(n.border),a["border-spacing"]=su.addSizeSuffix(n.cellspacing),Ou.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):Ou.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),Nu(e)&&t.children)for(var u=0;u<t.children.length;u++)i(r,t.children[u],{"border-width":su.addSizeSuffix(n.border),"border-color":n.borderColor,padding:su.addSizeSuffix(n.cellpadding)});n.style?Ou.extend(a,r.parseStyle(n.style)):a=Ou.extend({},r.parseStyle(r.getAttrib(t,"style")),a),o.style=r.serializeStyle(a),r.setAttribs(t,o)}(e,t,o),(r=a.select("caption",t)[0])&&!o.caption&&a.remove(r),!r&&o.caption&&((r=a.create("caption")).innerHTML=Hu.ie?"":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),_u.unApplyAlign(e,t),o.align&&_u.applyAlign(e,t,o.align)=e.dom,c={};!0===t?(n=u.getParent(e.selection.getStart(),"table"))&&(c=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||_u.getTDTHOverallStyle(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};return Ou.each("left center right".split(" "),(function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)})),xu(e)&&Ou.extend(r,Lu.extractAdvancedStyles(n,t)),r}(e,n)):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),ku(e).length>0&&(c.class&&(c.class=c.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:Lu.buildListItems(ku(e),(function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})}))}),a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:Su(e)?[r,o,{label:"Width",name:"width",onchange:p.curry(Lu.updateStyleField,e)},{label:"Height",name:"height",onchange:p.curry(Lu.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:p.curry(Lu.updateStyleField,e)},{label:"Height",name:"height",onchange:p.curry(Lu.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},xu(e)?e.windowManager.open({title:"Table properties",data:c,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},Lu.createStyleForm(e)],onsubmit:p.curry(Yu,e,n)}):e.windowManager.open({title:"Table properties",data:c,body:a,onsubmit:p.curry(Yu,e,n)})},Ju=Ou.each,Qu={registerCommands:function(e,t,n,r,o){var i=su.getIsRoot(e),a=function(){return ce.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"))},u=function(e){return tn.table(e,i)},c=function(t){var o=a();u(o).each((function(i){var a=qr.forMenu(r,i,o);t(i,a).each((function(t){e.selection.setRng(t),e.focus(),n.clear(i)}))}))},s=function(t){var n=a();return u(n).bind((function(t){var o=ce.fronu(r,t,n),a=Un(p.noop,o,w.none());return Pu(t,i,a)}))},l=function(t){o{var i=M.map(o,(function(e){return Rn(e)})),c=a();u(c).bind((function(o){var a=qr.pasteRows(r,o,c,i,u);t(o,s).each((function(t){e.selection.setRng(t),e.focus(),n.clear(o)}))}))}))};Ju({mceTableSplitCells:function(){c(t.unmergeCells)},mceTableMergeCells:function(){c(t.mergeCells)},mceTableInsertRowBefore:function(){c(t.insertRowsBefore)},mceTableInsertRowAfter:function(){c(t.insertRowsAfter)},mceTableInsertColBefore:function(){c(t.insertColumnsBefore)},mceTableInsertColAfter:function(){c(t.insertColumnsAfter)},mceTableDeleteColtion(){c(t.deleteRow)},mceTableCutRow:function(e){o.set(s()),c(t.deleteRow)},mceTableCopyRow:function(e){o.set(s())},mceTablePasteRowBefore:function(e){l(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){l(t.pasteRowsAfter)},mceTableDelete:function(){var t=ce.fromDom(e.dom.getParent(eter(p.not(i)).each((function(t){var n=ce.fromText("");vn.after(t,n),Cn.remove(t);var r=e.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),e.selection.setRng(r)}))}},(function(t,n){e.addCommand(n,t)})),Ju({mceInsertTable:p.curry(Gu,e),mceTableProps:p.curry(Gu,e,!0),mceTableRowProps:p.curry(qu.open,e),mceTableCellProps:p.curry(Fu,e)},(function(t,n){e.addCommand(n,(function(e,n){t(n)}))}))}},Zu=function(e){var t=w.from(e.dom().documentElement).map(ce.fromDom).getOr(e);return{parent:p.constant(t),view:p.constant(e),origin:p.constant(lo(0,0))}},ec=function(e,t){return{parent:p.constant(t),view:p.constant(e),origin:p.constant(lo(0,0))}},tc={create:function(e){var t=j.map(e,(function(e){return{bind:e.bind,unbind:e.unbind}})),n=j.map(eigger:n}}},nc=Oo.exactly(["compare","extract",","start","stop","destroy"]),oc=Oo.exactly(["forceDrop","drop","move","delayDrop"]),ic={mode:nc,sink:rc,api:oc},ac=Ci("ephox-dragster"),uc={resolve:ac.resolve},cc=function(e,t){return function(n){if(e(n)){var r=ce.fromDom(n.target),o=function(){n.stopPropagation()},i=function(){n.preventDefault()},a=p.compose(i,o),u=function(e,t,n,r,o,i,a){return{target:p.constant(e),x:p.constant(t),y:p.constant(n),stop:r,prevent:o,kill:i,raw:p.constant(a)}}(r,n.clientX,n.clientY,o,i,a,n);t(u)}}},sc=function(e,t,n,r,o){var i=cc(n,r);return e.dom().addEventListener(t,i,o),{unbind:p.curry(lc,e,t,i,o)}},lc=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},fc=function(e,t,n,r){return sc(e,t,n,r,!1)},dc=function(e,t,n,r){return sc(e,t,n,r,!0)},mc=p.constant(!0),gc={bind:function(e,t,n){return fc(e,t,mc,n)},capture:function(e,t,n){return dc(e,t,mc,n)}},pc=ic.mode({compare:function(e,t){return lo(t.left.x(),e.y()))},sink:function(e,t){var n=function(e){var t=Zo.merge({layerClass:uc.resolve("blockele","presentation"),gn.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Li.add(n,uc.resolve("blocker")),Li.add(n,t.layerClass),{element:function(){return n},destroy:functie.forceDrop),o=gc.bind(n.elementlement(),"mousemove",e.move),a=gc.bind(n.element(),"mouseout",e.delayDrop);return ic.sink({element:n.element,start:function(e){vn.append(e,n.element())},stop:fununction(){n.destroy(),o.unbind(),i.unbind(),a.unbind(),r.un,t.top())}}),hc=functionreturn{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){var r=arguments;null!==n&&clearTimeout(n),n=setTimeout((function(){e.apply(null,r),n=null,r=null}),t)}}},vc=function(e,t,n){var r=!1,o=tc.create({start:a([]),stop:a([])}),i=u(),c=function(){f.stop(),i.isOn()&&(i.off(),o.trigger.stop())},s=hc(c,200);i.events.move.bind((function(n){t.mutate(e,n.it=Array.prototype.slice.call(arguments,0);if(r)return e.apply(null,t)}},f=t.sink(ic.api({forceDrop:c,drop:l(c),move:l((function(e,n){s.cancel(),i.onEvent(e,t)})),delayDrop:l(s.throttle)}),n);return{element:f.element,go:function(e){f.start(e),i.on(),o.trigger.start()},on:function(){r=!0},off:function(){r=!1},destroy:function(){f.destroy()},events:o.registry}},bc={transform:function(e,t){var n=void 0!==t?t:{},r=void 0!==n.mode?n.mode:pc;return vc(e,r,t)}},yc={any:function(e){return Yt.first(e).isSome(nction(e,t){return Yt.sibling(e,t).isSome()},child:function(e,t){return Yt.child(e,t).isSome()},descendant:function(e,t){return Yt.descendant(e,t).isSome()},closest:function(e,t,n){return Yt.closest(e,t,n).isSome()}},Cc=xi.resolve("resizer-bar-dragging"),wc=function(e,(){var e=ce.fromTag("div");return gn.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),vn.apDoc()))},x))},Sc=function(e){var t,n,o=w.none(),i=w.none(),a=w.none(),u=/(\d+(\.\d+)?)%/,c=function(e){return"TABLE"===e.nodeName},l=function(t){return e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width")};return e.on("init",(function(){var t=r(gu.directionAt),n=wc(e);if(a=w.some(n),function(e){var t=e.getParam("obje)}(e)){var u=ents.afterResize.bind((function(t){var n=t.table(le]");M.each(r,(function(e){Mt.remove(e,"data-mce-style")})),o.each((function(t){e.selectiondoManager.add()})),i=w.some(u)}})),e.on("ObjectResizeStart",(function(e){var r=e.target;c(r)&&(t=e.width,n=l(r))})),e.on("f(u.test(n)){var a=parseFl;e.dom.setStyle(i,"width",s+"%")}else{var l=[];Ou.each(i.rows,(function(t){Ou.each(t.cells,(function(t){var n=e.dom.getStyle(t,"width",!0);l.push({cell:t,width:n})}))})),Ou.each(l,(function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)}))}}})),{lazyResize:function(){return i},lazyWire:function(){return a.getOr(Zu(ce.fromDom(e.getBody())))},destroy:function(destroy()})),a.each((function(t){xc(e,t)}))}}},Nc=function(e){return{fold:e}},Ec=function(e){return Nc((function(t,n,r,o){return t(e)}))},Tc=function(e){return Nc((function(t,n,r,o){return n(e)}))},kc=function(e,t){return Nc((function(n,r,o,i){retuurn o(e)}))},Ac=function(e,t){return tn.table(e,t).bind((function(t){var n=tn.cells(t),r=M.findIndex(n,(function(t){return pt.eq(e,t)}));return r.map((function(e){return{index:p.constant(e),all:p.constant(n)}}))}))},Dc=function(e,t){return Ac(e,t).fold((function(){return Ec(e)}),(function(t){return t.index()+1<t.all().length?kc(e,t.all()[t.index()+1]nt"]},{on:["element","offset"]},{after:["element"]}]),Oc={before:Pc.before,on:Pc.on,after:Pc.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(p.identity,p.identity,p.identity)}},_c=Br([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ic=$.immutable("start","soffsete,relative:_c.relative,exact:_c.exact,exactFromRange:function(e){return _c.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:Ic,getWin:function(e){var t=function(e){return e.match({domRange:function(e){return ce.fro){return Oc.getStart(e)},exact:function(e,t,n,r){return e}})}(e);return StcreateRange();return o.setStart(e.dom(),t),o.setEnd(n.dom(),r),o},Fc=function(e,t,n,r){var o=Mc(e,t,n,r),i=pt.eq(e,n)&&t===r;return o.collapsed&&!i},zc=function(e,t){var n=(t||document).createDocumentFragment();return M.each(e,(function(e){n.appendChild(e.dom())})),ce.fromDom(n)},qc=function(e,t){e.selectN){eturn{left:p.constant(e.left),top:p.constant(e.top),right:p.constant(e.right),bottom:p.constant(e.bottom),width:p.constant(e.width),height:p.constant(e.height)}replaceWith:fentsUsing:ion(t){e.setStartBefore(t.dom())}),(function(t,n){e.setStart(t.dom(),n)}),(function(t){e.setStartAfter(t.dom())}))}(r,t),function(e,t){t.fold((function(t){e.setEndBefore(t.dom())}),(function(t,n){e.setEnd(t.dom(),n)}),(function(t){e.setEndAfter(t.dom())}))}(r,n),r},),o),i},deleteContents:Hc,cloneFragment:function(e){var t=e.clunction(e){var t=e.getClientRects(),n=rn n.widthunction(e){var t=e.getBoundingClientRect();w.none()},isWithin:function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},toString:function(e["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Vc=function(e,t,n){return t(ce.fromDom(n.startContainContainer),n.endOffset)},$c=function(e,t){var n=function(e,t){return t.match({domRange:function(e){return{ltr:p.constant(e),rtl:w.none}},relative:function(t,n){return{ltr:Ee((function(){return jc.relativeToNative(e,t,n)})),rtl:Ee((function(){return w.some(jc.relativeToNative(e,n,t))}))}},exact:function(t,n,r,o){return{ltr:Ee((funct w.some(jc.exactToNative(e,r,o,t,n))}))}}})}(e,t);return function(e,t){var n=t.ltr();if(n.collapsed){var r=t.rtl().filter((function(e){return!1===e.collapsed}));return r.map((function(e){return Wc.rtl(ce.fromDom(e.endContainer),e.endOffset,ce.fromDom(e.startContainer),e.startOffset)})).getOr Vc(0,Wc.ltr,n)}(0,n)},Kc={ltr:Wc.ltr,rtl:Wc.rtl,diagnose:$c,asLtrRange:function(e,t){return $c(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setion(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})}},Xc=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Yc=function(e,t,n,r,o){if(0===o)return 0;if(t===r)return o-1;for(var i=r,a=1;a<o;a++){var u=e(a),c=Math.abs(t-u.left);if(n>u.bottom);else{if(n<u.top||c>i)return a-1;i=c}}return 0},Gc={locate:function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getClientRects(),a=ti(i,(function(e){return Xc(e,n,r)?ion(o){return function(e,t,n,r,o){var i=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},a=Bn.get(t).length,u=Yc((function(e){return i(e).getBoundingClientRect()}),n,r,o.right,a);return i(u)}(e,t,n,r,o)}))}},Jc=function(e,t,n,r){var o=e.dom().createRange(),i=St.children(t);return ti(i,(function(t){return o.selectNode(t.dom()),Xc(o.getBoundingClientRect(),n,r)?Qc(e,t,n,r):w.none()}))},Qc=function(e,t,n,r){return(Pt.isText(t)?Gc.locate:Jc)(e,t,n,r)},Zc=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),u=Math.max(i.top,Math.min(i.bottom,r));return Qc(e,t,a,u)},es=function(e,t){return t-e.left<e.right-t},ts=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},ns=function(e,t,n){var r=tNode(t.dom());var o=r.getBoundingClientRect(),i=es(o,n);return(!0===i?Mn.first:Mn.last)(t).map((function(t){return ts(e,t,i)}))},rs=function(e,t,n){var r=t.dom().getBoundingClientRect(),o=es(r,n);return w.some(ts(e,t,o))},os=function(e,t,n){return(0===St.children(t).length?rs:ns)(e,t,n)},is=document.caretPositionFromPoint?func.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),w.some(n)}))}:document.caretRangeFromPoint?function(e,t,n){return w.from(e.dom().caretRangeFromPoint(t,n))}:function(e,t,n){re(e,r,t)};return 0===St.children(r).length?o():function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=Math.(o)n).commonAncestorContainer);return Pt.isElement(o)?function(e,tconcat(jt.descendants(t,r));return M.filter(i,(function(e){return jc.selectNodeContentsUsing(o,e),jc.isWithin(n,o)}))}(e,=Pt.name(e);return"input"===n?Oc.after(e):M.contains(["br","img"],n)?0===t?Oc.before(e):Oc.after(e):Oc.on(e,t)},ss=function(e,t){var n=e.fold(Oc.before,cs,Oc.after),r=t.fold(Oc.before,cs,Oc.after);return Lc.relative(n,r)},ls=function(e,t,n,r){var o=cs(e,t),i=cs(n,r);return Lc.relative(o,i)},fs=function(e){return e.match({domRange:function(e){var t=ce.fromDom(e.startContainer),n=ce.fromDom(e.endContainer);return ls(t,e.startOffset,n,e.endOffset)},relative:ss,exact:ls})},ds=ss,ms=ls,gs=function(e,t){w.from(e.getSelection()).each((function(e){e.removeAllRanges(),e.addRange(t)}))},ps=function(e,t,n,r,o){var i=jc.exactToNative(e,t,n,r,o);gs(e,i)},hs=function(e,t){return Kc.diagnose(e,rtl:function(t,n,r,o){var i=e.getSelection();ipse(t.dom(),n),vs=function(e){var t=ce.fromDom(e.anchorNode),n=ce.fromDom(e.focusNode);return Fc(t,e.anchorOffset,n,e.focusOffset)?w.some(Lc.range(ce.fromDom(e.anchorNode),e.anchorOffsf(e.ra(e.rangeCount-1);return w.some(Lc.range(ce.fromDom(t.startContainer),t.startOffset,ce.fromDom(n.endContainer),n.endOffset))}return w.none()}(e)},bs=function(e){var t=e.gett:function(e,t,n,r,o){var i=ms(t,n,r,o);hs(e,i)},getExact:bs,get:function(e){return bs(e).map((function(e){return Lc.exact(e.start(),e.soffset(),e.finish(),e.foffset())}))},setRelative:function(e,t,n){var r=ds(t,n);hs(e,r)},toNative:function(e){var t=Lc.getWin(e).dom(),n=function(e,n,r,o){return jc.exactToNative(t,e,n,r,o)},r=fs(e);return Kc.diagnose(t,r).match({ltr:n,rtl:n})},setToElement:function(e,t){var nlection().removeAllRanges()},clone:function(e,t){var n=Kc.asLtrRange(e,t);return jc.cloneFragment(n)},replace:function(e,t,n){var r=Kc.asLtrRange(e,t),o=zc(n,e.document);jc.replaceWith(r,o)},deleteAt:function(e,t){var n=Kc.asLtrRange(e,t);jc.deleteContents(n)},forElement:function(e,t){var n=jc.selectNodeContentfromDom(n.endContainer),n.endOffset)},getFirstRect:function(e,t){var n=Kc.asLtrRange(e,t);return jc.gett){var n=Kc.asLtrRange(e,t);return jc.getBounds(n)},getAtPoint:function(e,t,n){return as(e,t,n)},findWithin:function(AsString:function(e,t){var n=Kc.asLtrRange(e,t);return jc.toString(n)},isCollapsed:function(e,t,n,r){return pt.eq(e,n)&&t===r}},Cs=tinymce.util.Tools.resolve("tinymce.util.VK"),ws=function(e,t,n,r){return Ns(e,t,Dc(n),r)},xs=function(e,t,n,r){return Ns(e,t,Bc(n),r)},Ss=function(e,t){var n=Lc.exact(t,0,t,0);return ys.toNative(n)},Ns=functio.none,(function(e,t){return Mn.first(t).map((function(e){re(n,t).bind((function(t){var o=qr.noMenu(n);return e.undoManager.transact((function(){r.insertRowsAfter(t,o)})),function(e,t){var n=jt.de).bind((function(e){return Yt.descendant(e,"td,th").map((function(e){return Ss(0,e)}))}))}(0,t)}))}))},Es=["table","li","dl"],Ts={handle:function(e,t,n,r){if(e.keyCode===Cs.TAB){var o=su.getBody(t),i=function(e){var t=Pt.name(e);return pt.eq(e,o)||M.contains(Es,t)},a=t.selection.getRng();if(a.collapsed){var u=ce.fromDom(a.startContainer);tn.cell(u,i).each((function(o){e.preventDefault(),(e.shiftKey?xs:ws)(t,i,o,n,r).each((function(e){t.selection.setRng(e)}))}))}}}},ks={response:$.immutable("selection","kill")},Rs=function(e){return function(t){return t===e}},As=Rs(38),Ds=Rs(40),Bs={ltr:{isBackward:Rs(37),isForward:Rs(39)},rtl:{isBackward:Rs(39),isForward:Rs(37)},isUp:As,isDown:Ds,isNavigation:function(e){return e>=37&&e<=40}},Ps={convertToRange:function(e,t){var n=Kc.asLtrRange(e,t);return{start:p.constant(ce.fromDom(n.startContainer)),soffset:p.constant(n.startOffset),finish:p.constant(ce.fromDom(n.endContainer)),foffset:p.constant(n.endOffset)}},makeSitus:function(e,t,n,r){return{start:p.constant(Oc.on(e,t)),finish:p.constant(Oc.on(n,r))}}},Os=ft.detect().browser.isSafari(),_s=function(e){var t=void 0!==e?e.dom():document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return lo(n,r)},Is=function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollTo(e,t)},Ls=function(e,t){Os&&S.isFunction(e.dom().scrollIntoViewIfNeeded)?e.dom().scrollIntoViewIfNeeded(!1):e.dom().scrollIntoView(t)},Ms={get:_s,to:Is,by:function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollBy(e,t)},preserve:function(e,t){var n=_s(e);t();var r=_s(e);n.top()===r.top()&&n.left()===r.left()||Is(n.left(),n.top(),e)},capture:function(e){var t=w.none(),n=function(){t=w.some(_s(e))};return n(),{save:n,restore:function(){t.each((function(t){Is(t.left(),t.top(),e)}))}}},intoView:Ls,intoViewIfNeeded:function(e,t){var n=t.dom().getBoundingClientRect(),r=e.dom().getBoundingClientRect();r.top<n.top?Ls(e,!0):Element:function(e,t){var n=go(t),r=ce.fromDom(e.document);Is(n.left(),n.top(),r)},scrollBarWidth:function(){var e=ce.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');vn.after(qt.body(),e);var t=e.dom().offsetWidth-e.dom().clientWidth;return Cn.remove(e),t}},Fs=function(e,t,n,r,o){return pt.eq(n,r)?w.none():Cr.identify(n,r,t).bind((function(t){var r=t.boxes().getOr([]);return r.length>0?(o(e,r,t.start(),t.finish()),w.some(ks.response(w.some(Ps.makeSitus(n,0,n,_n(n))),!0))):w.none()}))},zs={sync:function(e,t,n,r,o,i,a){return pt.eq(n,o)&&r===i?w.none():Yt.closest(n,"td,th",t).bind((function(n){return Yt.closest(o,"td,th",t).bind((function(r){return Fs(e,t,n,r,a)}))}))},detect:Fs,update:function(e,t,n,r,o){return Cr.shiftSelection(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map((function(e){return o.clear(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()}))}},qs=$.immutableBag(["left","top","e.t)},moveDown:function(e,t){return qs({left:e.left(),top:e.top()+t,right:ft(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return qs({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return qs({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},Us=function(e){return Hs.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},js=function(e,t){return w.some(e.getRect(t))},Ws=function(e,t,n){return Pt.isElement(t)?js(e,t).map(Us):Pt.isText(t)?function(e,t,n){return n>=0&&n<_n(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):w.none()}(e,t,n).map(Us):w.none()},Vs=function(e,t){returKs=function(e,t,n,r){var o=void 0!==r?r:Xs;return e.property().parent(t).map((function(e){return n.sibling(e,t).map((function(r i=vot(a).map((function(e){return $s(e,i)}))},Gs=[{current:Ks,next:Xs,fallback:w.none()},{current:Xs,next:Ys,fallback:w.some(Ks)},{current:Ys,next:Ys,fallback:w.some(Xs)}],Js={backtrack:Ks,sidestep:Xs,advance:Ys,go:function e(t,n,r,o,i){i=void 0!==i?i:Gs;var a=M.find(i,(function(e){return e.current===r}));return a.bind((function(r){return r.current(t,n,o,r.next).orThunk((function(){return r.fal,o)}))}))}))}},Qs={left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?w.some(e[e.leling:},first:function(e){return e.length>0?w.some(e[0]):w.none()}}}},Zs=function e(t,n,r,o,i,a){return Js.go(t,n,o,i).bind((function(n){return a(n.item())?w.none():r(n.item())?w.some(n)},el=function(e,t,n,r){return Zs(e,t,n,Js.sidestep,Qs.left(),r)}ep,Qs.right(),r)},nl=function(e,t){return 0==e,t,n,r){return el(e,t,n,r)},ol=function(e,t,n,r){return tl(e,t,n,r)},il={before:function(e,t,n){return rl(e,t,p.curry(nl,e),n)},after:function(e,t,n){return ol(e,t,p.curry(nl,e),n)},seekLeft:rl,seekRight:ol,walkers:function(){return{left:Qs.left,right:Qs.right}},walk:function(e,t,n,r,o){return Js.go(e,t,n,r,o)},backtrack:Js.backtrack,sidestep:Js.sidestep,advance:Js.advance},al=t(),ul={gather:function(e,t,n){return il.gather(al,e,t,n)},before:function(e,t){return il.before(al,e,t)},after:function(e,t){return il.after(al,e,t)},seekLeft:function(e,t,n){return il.seekLeft(al,e,t,n)},seekRight:function(e,t,n){return il.seekRight(al,e,t,n)},walkers:function(){return il.walkers()},walk:function(e,t,n,r){return il.walk(al,e,t,n,r)}},cl=Br([{none:[]},{retry:["caret"]}]),sl=function(e,t,n){return Kt.closest(t,$o).fold(p.constant(!1),(function(t){return Vs(e,t).exists((function(e){return function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()}(n,e)}))}))},ll={point:Hs.getTop,adjuster:function(e,t,n,r,o){var i=Hs.moveUp(o,5);return Math.abs(n.top()-r.top())<1||n.bottom()<o.top()?cl.retry(i):n.bottom()===o.top()?cl.retry(Hs.moveUp(o,1)):slHs.getBottom,adjuster:function(e,t,n,r,o){var i=Hs.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1||n.top()>o.bottom()?cul.after},dl=function(e,t,n,r,o){return ml(e,t,n,t.move(r,5),o)},ml=function e(t,n,r,o,i){return 0===i?w.some(o):function(e,t,n){return e.elementFromPoint(t,n).filter((function(e){return"table"===Pt.name(e)})).isSome()}(t,o.left(),n.point(o))?dl(t,n,r,o,i-1):t.situsFromPoint(o.left(),n.point(o)).bind((function(a){return a.start().fold(w.none,(function(a,u){return Vs(t,a,u).bind((function(u){return n.adjuster(t,a,u,r,o).fold(w.none,(function(o){retion(){return w.some(o)}))}),w.none)}))},gl=function(e,t,n){var r=e.move(n,5),o=ml(t,e,n,r,100).getOr(r);return function(e,t,n){return e.point(t)>n.getInnerHeight()?w.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?w.some(-e.point(t)):w.n){return t.scrollBy(0,n),t.situsFromPoint(o.left(),e.point(o)-n)}))},pl={tryUp:p.curry(gl,ll)){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:p.constant(5)},hl=Br([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),vl=function(e){return Yt.closest(e,"tr")},bl={verify:function(e,t,n,r,o,i,a){return Yt.closest(,th",a).map((function(t){return pt.eq(n,t)?pt.eq(r,n)&&_n(n)===o?i(t):hl.none("in same cell"):turn functRect(n);return o.right>r.left&&o.left<r.right}(e,t,n)?hl.success():i(t)}),(function(e){return i(t)}))}))})).getOr(hl.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:hl},yl={point:$.immutable("element","offset"),delta:$.immutable("element","deltaOffset"),range:$.immutable("element","ext:$.immutable("element","text"ment","index"),$.immutable("parent","childrn St.parent(e).bind((function(t)l(t,n,e,r)}))}))},Sl=function(e){return"br"===Pt.name(e)},Nl=function e(t,n,r){return n(t,r).bindget(t).trim().length?e(t,n,r):w.some(t)}))},El=function(e,t,n,r){return function(e,t){return St.child(e,t).filter(Sl).orThunk((function(){return St.child(e,t-1).filter(Sl)}))}(t,n).bind((function(t){return r.traverse(t).fold((function(){retelative)}),(function(e){return xl(e).map((function(e){return Oc.on(e.parent(),e.index())}))}))}))},Tl=function(e,t,n,r){var o=Sl(t)?function(e,t,n){return n.traverse(t).orThunk((function(){return Nl(t,n.gathe,finish:p.constant(e)}}))},kl=function(e){return bl.cata(e,(function(e){return w.none()}),(function(){return w.none()}),(function(e){return w.some(yl.point(e,0))}),(function(e){retreturn 0===a?w.none():Pl(t,n,r,o,i).bind((function(u){var c=t.fromSitus(u),s=bl.verify(t,r,o,c.finish(),c.foffset(),i.failure,n);return bl.cata(s,(function(){return w.none()}),(function(){return w.some(u)}),(function(u){return pt.eq(r,u)&&0===o?Dl(t,r,o,Hs.moveUp,i):e(t,n,u,0,i,a-1)}),(function(u){return pt.eq(r,u)&&o===_n(u)?Dl(t,r,o,Hs.moveDown,i):e(t,n,u,_n(u),i,a-1)}))}))},Dl=function(e,t,n,r,o){returetJumpSize()))}))},Bl=function(e,t,n){return Rl.browser.isChrome()||Rl.browser.isSafari()||Rl.browser.isFirefox()||Rl.browser.isEdge()?t.otherRetry(e,n):Rl.browser.isIE()nction(t){return Bl(e,o,t)}))},Ol=function(e,t,n){return function(e,t,n){return etion(){return w.some(yl.point(r.finish(),r.foffset()))}),(function(o){var i=e.fromSitus(o),a=bl.verify(e,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,t);return kl(a)}))}))}(e,t,n).bind((function(r){return Al(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)}))},_l=function(e,t,n){return Kt.ancestor(e,t,n).isSome()},Il=ft.detect(),Ll=function(e,t,n,r,o){return Yt.closest(r,"td,th",t).bind((function(r){return Yt.closest(r,"table",t).bind((function(i){return function(e,t){return _l(e,(function(e){return St.parent(e).exists((function(e){return pt.eq(e,t)}))}))}(o,i)?Ol(e,t,n).bind((function(e){return Yt.closest(e.finish(),"td,th",t).map((function(t){return{start:p.constant(r),finish:p.constant(t),range:p.constant(e)}}))})):w.none()}))}))},Ml=function(e,t,n,r,o,i){return Il.browser.isIE()?w.none():i(r,t).orThunk((function(){return Ll(e,t,n,r,o).map((function(e){vas.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)}))}))},Fl=function(e,t,n,r,o,i,a) zs.detect(t,n,e.start(),e.finish(),a)}))},zl=function(e,t){return Yt.closest(e,"tr",t).bind((function(e){return Yt.closest(e,"table",t).bind((function(n){var r=jt.descendants(n,"tr");return pt.eq(e,r[0])?ul.seekLeft(n,(function(e){return Mn.last(e).isSome()}),t).map((function(e){var t=_n(e);return ks.response(w.some(Ps.makeSitus(e,t,e,t)),!0)})):w.none()}))}))},qlt.closest(e,"tr",t).bind((function(e){return Yt.closest(e,"table",t).bind((function(n){var r=jt.descendants(n,"tr");return pt.eq(e,r[r.length-1])?ul.seekRight(n,(function(e){return Mn.first(e).isSome()}),t).map((function(e){return ks.response(w.some(Ps.makeSitus(e,0,e,0)),!0)})):w.none()}))}))},Hl=function(e,t){return Yt.closest(e,"td,th",t)},Ul={down:{traverse:St.nextSibling,gather:ul.after,relative:Oc.before,otherRetry:pl.tryDown,ieRetry:pl.ieTryDown,failure:bl.adt.failedD:ul.before,relative:Oc.before,otherRetry:pl.tryUp,ieRetry:pl.ieTryUp,failure:bl.adt.failedUp}},jl=$.immutable("rows","cols"),Wl={mouse:function(e,t,n,r){var o=function(e,t,n,r){var o=w.none(),i=function(){o=w.none()};return{mousedown:function(e){r.clear(t),o=Hl(e.target(),n)},mouseover:function(i){o.each((function(o){r.clear(t),Hl(i.target(),n).each((function(i){Cr.identify(o,i,n).each((function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!pt.eq(o,i))&&(r.selectRange(t,a,n.start(),n.finish()),e.selectContents(i))}))}))}))},mouseup:function(){o.each(i)}}}(l(e),t,n,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},keyboard:function(e,t,n,r){var o=l(e),i=function(){return r.clear(t),w.none()};return{keydown:function(e,a,u,c,s,l){var f=e.raw().which,d=!0===e.raw().shiftKey,m=Cr.retrieve(t,r.selectedSelector()).fold((function(){return Bs.isDown(f)&&d?p.curry(Fl,o,t,n,Ul.down,c,a,r.selectRange):Bs.isUp(f)&&d?p.curry(Fl,o,t,n,Ul.up,c,a,r.selectRange):Bs.isDown(f)?p.curry(Ml,o,n,Ul.down,c,a,ql):Bs.isUp(f)?p.curry(Ml,o,n,Ul.up,c,a,zl):w.none}),(function(e){var n=function(n){return function(){var i=ti(n,(function(n){return zs.update(n.rows(),n.cols(),t,e,r)}));return i.fold((functiostSisD;return o.setRelativeSelection(Oc.on(e.first(),0),n(e.table())),r.clear(t),ks.response(w.none(),!0)}))}),(function(e){return w.some(ks.response(w.none(),!0))}))}};return Bs.isDown(f)&&d?n([jl(1,0)]):Bs.isUp(f)&&d?n([jl(-1,0)]):l.isBackward(f)&&d?n([jl(0,-1),jl(-1,0)]):l.isForward(f)&&d?n([jl(0,1),jl(1,0)]):Bs.isNavigation(f)&&!1===d?i:w.none}));return m()},keyup:function(e,o,i,a,u){return Cr.retrieve(t,r.selectedSelector()).fold((function(){var c=e.raw().which;return!1==(!0===e.raw().shiftKey)?w.none():Bs.isNavigation(c)?zs.sync(t,n,o,i,a,u,r.selectRange):w.none()}),w.none)}}}},Vl=function(e,t){M.each(t,(function(t){Li.remove(e,t)}))},$l=function(e){return function(t){Li.add(t,e)}},Kl=function(e){return function(t){Vl(t,e)}},Xl={byClass:function(e){var t=$l(e.selected()),n=Kl([e.selected(),e.lastSelected(),e.firstSelected()]),r=function(t){var r=jt.descendants(t,e.selectedSelector());M.each(r,n)};return{clear:r,selectRange:function(n,o,i,a){r(n),M.each(o,t),Li.add(i,e.firstSelected()),Li.add(a,e.lastSelected())},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectastSelectedSelector}},byAttr:function(e){var t=function(t){Mt.remove(t,e.selected()),Mt.remove(t,e.firstSelected()),Mt.remove(t,e.lastSelected())},n=function(t){Mt.set(t,e.selected(),"1")},r=function(n){var r=jt.descendants(n,e.selectedSelector());M.each(r,t)};return{clear:r,selectRange:function(t,o,i,a){r(t),M.each(o,n),Mt.set(i,e.firstSelected(),"1"),Mt.set(a,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}}},Yl=function(e){return{get:function(){var t=su.getBody(e);return wr(t,Dr.selectedSelector()).fold((function(){return void 0===e.selection.getStart()?Or.none():Or.single(e.selection)}),(function(e){return Or.multiple(e)}))}}},Gl=Ou.each,Jl={addButtons:function(e){function t(t){return function(){e.execCommand(t)}}var n=[];Gl("inserttable tableprops deletetable | cell row column".split(" "),(function(t){"|"===t?n.push({text:"-"}):n.push(e.menuItems[t])})),e.addButton("table",{type:"menubutton",title:"Table",menu:n}),e.addButton("tableprops",{title:"Table properties",onclick:p.curry(Gu,e,!0),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:t("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:t("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:t("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:t("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:t("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:t("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:t("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:t("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:t("mceTableCutRow")}),e.addButton("addButton("tablepasterowbefore",{title:"Paste raddButton("tablepasterowafter",{title:"Paste row after",onclick:t(.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:t("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{titleter",onclick:t("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:t("mceTableDeleteCol")})},addToolbars:function(e){var t=function(e){var t=e.getParam("table_toolbar",pu);return""===t||!1===t?[]:S.isString(t)?t.split(/[ ,]/):S.isArray(t)?t:[]}(e);t.length>0&&e.addContextToolbar((function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)}),t.join(" "))}},Ql={addMenuItems:function(e,t){Command(t)}}var r=w.none(),o=[],i=[],a=[],u=[],c=function(e){e.disabled(!0)},s=function(e){e.disabled(!1)},l=function(){var e=this;o.push(e),r.fold((function(){c(e)}),(function(t){s(e)}))},f=function(){var e=this;i.push(e),r.fold((function(){c(e)}),(function(t){s(e)}))},d=function(){r.fold((function(){M.each(o,c),M.each(i,c),M.each(a,c),M.each(u,c)}),{t.disabled(e.mergable().isNone())})),M.each(u,(function(t){t.disabled(e.unmergable().isNone())}))}))};e.on("init",(function(){e.on("nodechange",(function(n){var o=w.from(e.dom.getParent(e.selection.getStart(),"th,td"));r=o.bind((function(e){var n=ce.fromDom(e);return tn.tae")[0],l=r.isRtl()||"tl-tr"===r.parent().rel;for(s.nextSibling.innerHTML=t+1+" x "+(n+1),l&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)u=s.rows[i].childNodes[o].firstChild,c=(l?o>=t:o<=t)&&i<=n,e.dom.toggleClass(u,"mce-active",c),c&&(a=u);return a.parentNode},g=!1===function(e){return e.getParam("table_grid",!0,"boolean")}(e)?{text:"Table",icon:"table",context:"table",onclick:p.curry(Gu,e)}:{text:"Table",icon:"table",ick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),Gu(e))},onshow:function(){m(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return(e+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,r,o=t.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(m(e,n,r,t.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact((function(){Xu(e,n.lastX+1,n.lastY+1)})),e.addVisual())}}]},h={text:"Table properties",context:"table",onPostRender:l,onclick:p.curry(Gu,e,!0)},v={text:"Delete table",context:"table",onPostRender:l,cmd:"mceTableDelete"},b={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:n("mceTableInsertRowBefore"),onPostRender:f},{text:"Insert row after",onclick:n("mceTableInsertRowAfter"),onPostRender:f},{text:"Delete row",onclick:n("mceTableDeleteRow"),onPostRender:f},{text:"Row properties",onclick:n("mceTableRowProps"),onPostRender:f},{text:"-"},{text:"Cut row",onclick:n("mceTableCutRow"),onPostRender:f},{text:"Copy row",onclick:n("mceTableCopyRow"),onPostRender:f},{text:"Paste row before",onclick:n("mceTablePasteRowBefore"),onPostRender:f},{text:"Paste row afteTlumn",context:"table",menu:[{text:"Insert column before",onclick:n("mceTableInsertColBefore"),onPostRender:f},{text:"Insert column after",onclick:n("mceTableInsertColAfter"),onPostRender:f},{text:"Delete colum),onPostRender:f}]},C={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:n("mceTableCellProps"),onPostRender:f},{text:"Merge cells",oTa),r.fold((function(){c(e)}),(function(t){e.disabled(t.mergable().isNone())}))}},{text:"Split cell",onclick:n("mceTableSplitCells"),onPostRender:function(){var e=this;u.push(e),r.fold((function(){c(e)}),(function(t){e.disabled(t.unmergable().isNone())}))}}]};e.addMenuItem("inserttable",g),e.addMenuItem("tablepropdMenuItem("row",b),e.addMenuItem("column",y),e.addMenuItem("cell",C)}},Zl=function(e,t){return{insertTable:function(t,n){return Xu(e,t,n)},setClipboardRows:function(e){return function(e,t){var n=M.map(e,ce.fromDom);t.set(w.from(n))}(e,t)},getClipboardRows:function(){return function(e){return e.get().fold((function(){}),(function(e){return M.map(e,(function(e){return e.dom()}))}))}(t)}}};f.add("table",(function(e){var t=Sc(e),n=function(e,t){var n=$.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),r=w.none(),o=Xl.byAttr(Dr);return e.on("init",(function(i){var a=e.getWin(),u=su.getBody(e),c=su.getIsRoot(e),s=Wl.mouse(a,u,c,o),l=Wl.keyboard(a,u,c,o),f=function(t,n){(function(e){return!0===e.raw()t){var n=Lc.relative(t.start(),t.finish()),r=Kc.asLtrRange(a,n);e.selection.setRng(r)})))},d=function(t){var n=h(t);if(n.raw().shiftKey&&Bs.isNavigation(n.raw().which)){var r=e.selection.getRng(),o=ce.fromDom(r.startContainer),i=ce.fromDom(r.endContainer);l.keyup(n,o,r.startOffset,i,r.endOffset).each((function(e){f(n,e)}))}},m=function(n){var r=h(n);t().each((function(e){e.hideBars()}));var o=e.selection.getRng(),i=ce.froromDom(o.startContainer),u=ce.fromDom(o.endContainer),c=gu.directionAt(i).isRtl()?Bs.rtl:Bs.ltr;l.keydown(r,a,o.startOffset,u,o.endOffset,c).each((function(e){f(r,e)})),t().each((function(e){e.showBars()}))},g=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},h=function(e){var t=ce.fromDom(e.target),n=function(){e.stopPropagation()},r=function(){e.preventDefault()},o=p.compose(r,n);return{target:p.constant(t),x:p.constant(g(e)?e.xtop:n,prevent:r,kill:o,raw:p.constant(e)}},v=function(e){return 0===e.button},b=function(e){v(e)&&s.mousedown(h(e))},y=function(e){(function(e){return void 0===e.buttons||0!=(1&e.buttons)})(e)&&s.museup",C),e.on("keyup",d)ction(){var t=e.sr=ce.fromDom(t.getEnd()),i=tn.table(n),a=tn.table(r),c=i.bind((function(e){return a.bind((function(t){return pt.eq(e,t)?w.some(!0):w.none()}))}));c.fold((functioe(n({mousedown:b,mouseover:y,mouseup:C,keyup:d,keydown:m}))})),{clear:o.clear,destroy:function(){r.each((function(e){}))}}}(e,t.lazyResize),r=Bu(e,t.lazyWire),o=Yl(Commands(e,r,n,o,i),Hr.registerEvents(e,o,r,n),Ql.addMenuItems(e,o),Jl.addButtons(e),Jl.addToolbars(e),e.on("PreInit",(function(){e.serializer.addTempAttr(Dr.firstSelected()),e.serializer.addTempAttr(Dr.lastSelected())})),yu(e)&&e.on("keydown",(function(n){Ts.handle(n,e,r,t.lazyWire)})),e.on("remove",(function(){t.destroy(),n.destroy()})),Zl(e,i)}))}(),define("alien/domEvent",[],(function(){var e=function(e,t){var n=Array.prototype.acyTrigger:function(t,n,r){e(document,t,n,r)}}})),function(e){function t(t){if(0==e(t).closest("td").length)return!0;for(var n=t.parentNode;"td"!=n.nodeName.toLowerCase();){if(e(n).prevAll().contents().filter((function(){return 3==this.nodeType})).length)return!1;n=n.parentNode}return!0}function n(n,r,o){if(r.compareEndPoints){var i=n.getBody().createTextRange();return i.moveToElementText(o),i.collapse(1),0===r.compareEndPoints("StartToStart",i)&&t(o)}if(!n.selection.getSel().isCollapsed)return!1;var a=r.startContainer;return 3==a.nodeType?!a.previousSibling&&0===r.startOffset&&t(a):e(a).is("p:first-child")?0===r.startOffset:e(a).is(".wysiwyg-macro-body")?1==r.startOffset&&function(e){return 3==e.nodeType&&"\n"==e.nodeValue}(r.startContainer.childNodes[0]):void 0}function r(t,n,r){if(n.compareEndPoints){var o=t.getBody().createTextRange();return o.moveToElementText(r),o.collapse(0),0===n.compareEndPoints("EndToEnd",o)}if(!t.selection.getSel().isCollapsed)return!1;var i=n.endContainer;if(3==i.nodeType)return i.wholeText.length==n.endOffset;var a=i.childNodes[n.endOffset];return e(a).is(":last-child")}function o(e,t,n){var r=e.dom.create("p",0,tinymce.Env.ie?"&nbsp;":'<br data-mce-bogus="1" />');n?t.after(r):t.before(r),e.selection.select(r,!0),e.selection.collapse()}AJS.Rte=AJS.Rte||{},AJS.Rte.Cursor=AJS.Rte.Cursor||{},e.extend(AJS.Rte.Cursor,{insertParagraph:o,isCursorAtStart:n,isCursorAtEnd:r}),AJS.bind("init.rte",(function(){var t=AJS.Rte.getEditor();tinymce.Env.ie&&t.on("KeyPress",(function(e){var n=t.selection,r=n.getNode();if(13==e.keyCode&&"P"==r.nodeName&&t.dom.is(r,":first-child")&&tinymce.confluence.MacroUtils.isInMacro(r)){var o=t.dom.create("p","&#x200b");return t.dom.insertAfter(o,r),n.select(o,1),n.collapse(),tinymce.dom.Event.cancel(e)}})),tinymce.Env.gecko&&t.on("KeyPress",(function(n){var o,i,a;n.charCode==e.ui.keyCode.SPACE&&(o=t.selection.getNode(),i=e(o).closest("a"),a=t.selection.getRng(),i.length&&r(t,t.selection.getRng(),o)&&(a.setStartAfter(i[0]),a.setEndAfter(i[0]),t.selection.setRng(a),t.selection.collapse()))})),t.on("KeyPress",(function(i){if(13==i.keyCode&&!i.shiftKey){var a=t.selection.getNode(),u=e(a).closest("pre");if(u.length&&!tinymce.confluence.MacroUtils.isInMacro(u)&&r(t,t.selection.getRng(),a))return o(t,u,!0),tinymce.dom.Event.cancel(i);var c=e(a).closest("blockquote");if(c.length){var s=e(a).closest("p");if(s.is(":first-child")&&n(t,t.selection.getRng(),a))return o(t,c,!1),tinymce.dom.Event.cancel(i);if(s.is(":last-child")&&function(e){var t=e.contents();if(!t.length)return!0;if(1==t.length){if(t.is("br"))return!0;if("&nbsp;"==t.html()||160==t.text().charCodeAt(0))return!0;if(3==t[0].nodeType&&t[0].nodeValue==AJS.Rte.HIDD),o(t,c,!0),tinymce.dom.Event.cancel(i)}}return!0}),!0)}))}($),AJS.EditorUtils=function(){function e(e){return e&&3==e.nodeType&&0===e.nodeValue.length}var t=!0,n={isCursorAtStartOf:function(e,t){return t.collapsed&&n.isRangeAtStartOf(e,t)},isRangeAtStartOf:function(n,r){if(!r||!r.startContainer)throw new Error("range is invalid. received: "+r);if(!n||!n.nodeType)throw new Error("context is invalid. received: "+n);var o,i=r.startContainer;if(3==i.nodeType){if(0!==r.startOffset)return!1;o=i}else if(void 0===(o=i.childNodes[r.startOffset])&&i.childNodes.length>0)return!1;var a,u=new tinymce.dom.TreeWalker(o,n);do{a=u.prev(t)}while(e(a));return void 0===a},isCursorAtEndOf:function(e,t){return t.collapsed&&n.isRangeAtEndOf(e,t)},isRangeAtEndOf:function(n,r){if(!r||!r.endContainer)throw new Error("range is invalid. received: "+r);if(!n||!n.nodeType)throw new Error("container is invalid. received: "+n);var o,i=r.endContainer;if(3==i.nodeType){if(r.endOffset!=i.nodeValue.length)return!1;o=i}else o=i.childNodes[0===r.endOffset?r.endOffset:r.endOffset-1];var a,u=new tinymce.dom.TreeWalker(o,n);do{a=u.artOfContents:function(e){if(!e)throw new Error("element is required.");if(1!==e.nodeType&&3!=e.nodeType)throw new Error("invalid argument: expected a DOM element or text node, got: "+e);var t=tinymce.activeEditor,n=t.dom.createRng();$(e).is("br, img")?(n.setStartBefore(e),n.setEndBefore(e),t.selection.setRng(n)):(t.selection.select(e,!0),t.selection.collapse(!0))}};return n}(),define("atlassian-editor-plugins/paste/inserter",(function(e,t){var n=function(e,t){return"<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?$(e,t||document):$("<div>"+e+"</div>",t||document).contents()},r=function(e,t){e.is("ul.inline-task-list")?t.each((function(){var e=$(this);e.attr("data-inline-task-id")||e.attr("data-inline-task-id","")})):t.removeAttr("data-inline-task-id").removeAttr("data-pasted-task")},o=function(e){var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return tinymce.isIE?"LI"===t.nodeName&&0===t.childNodes.length:"LI"===t.nodeName&&1===t.childNodes.length&&"BR"===t.firstChild.nodeName},i=function(e,t){if(!t.collapsed||0!=t.startOffset)return!1;var n=$(t.startContainer).closest("ol, ul",e.getBody());if(0===n.length)return!1;var r=new tinymce.dom.TreeWalker(t.startContainer,n[0]).prev(!0);return void 0===r||$(r).is("li")},a=function(e){var t=e.filter("ol,ul").length;return e.length===t},u=function(e,t,n){var r;return $.each(c,(function(o,i){if(i.shouldInsert(e,t,n))return r=i,!1})),r},c=[{shouldInsert:function(e,t,n){var r=o(t);return(r=r&&a(n))&&n.children("li").length>0},insert:function(e,t,n){var o=$(3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer),i=n.children();e.undoManager.beforeChange(),e.undoManager.add(),r(o.parent(),i),o.replaceWith(i),e.selection.select(i.last()[0],!0),e.selection.collapse(),e.undoManager.add()}},{shouldInsert:function(e,t,n){var r=i(e,t);return(r=r&&a(n))&&n.children("li").length>0},insert:function(e,t,n){var o=$(t.startContainer).closest("li",e.getBody()),i=n.children();e.undoManager.beforeChange(),e.undoManager.add(),r(o.parent(),i),o.before(i),e.selection.select(o[0],!0),e.selection.collapse(!0),e.undoManager.add()}},{shouldInsert:function(e,t,n){return function(e,t){if(!t.collapsed)return!1;if(3===t.startContainer.nodeType&&t.startOffset!=t.startContainer.nodeValue.length)return!1;if(1===t.startContainer.nodeType&&t.startOffset!=t.startContainer.childNodes.length)return!1;var n=$(t.startContainer).closest("ol, ul",e.getBody());if(0===n.length)return!1;var r=new tinymce.dom.TreeWalker(t.startContainer,n[0]).next(!0);return void 0===r||$(r).is("li")}(e,t)&&n.length===n.filter("ol,ul").length&&n.children("li").length>0},insert:function(e,t,n){var o=$(t.startContainer).closest("li",e.getBody()),i=n.children();e.undoManager.beforeChange(),e.undoManager.add(),r(o.parent(),i),o.after(i),e.selection.select(i.last()[0],!0),e.selection.collapse(!1),e.undoManager.add()}},{shouldInsert:function(e,t,n){var r=n.length>1;return(r=(r=r&&!o(t))&&i(e,t))&&function(e){var t=e.filter("ol,ul"),n=e[e.length-1];return 1===t.length&&t[0]===n}(n)},insert:function(e,t,n){var o=$(t.startContainer).closest("li",e.getBody());e.undoManager.beforeChange(),e.undoManager.add(),r(o.parent(),n.children("li"));var i=$("<li></li>").append(n);o.before(i),e.undoManager.add()}},{shouldInsert:function(e,t,n){return!t.collapsed&&!!$(t.commonAncestorContainer).is("table.confluenceTable > tbody, table.confluenceTable > tbody > tr")&&n.is("table:not(.wysiwyg-macro)")},insert:function(e,t,n){function r(e,t){for(var n=e.shift(),r=t.shift();n&&r;n=e.shift(),r=t.shift())$(r).html($(n).html())}var o,i,a=n.children("tbody").length>0?n.children("tbody").children("tr"):n.children("tr"),u=a.children("td, th"),c=$(".mceSelected",e.getDoc()),s=c.parent();if(e.undoManager.beforeChange(),e.undoManager.add(),1===s.length)r($.makeArray(u),$.makeArray(c));else{o=$.makeArray(a),i=$.makeArray(s);for(var l=o.shift(),f=i.shift();l&&f;l=o.shift(),f=i.shift())r($.makeArray($(l).children()),$.makeArray($(f).children()))}e.selection.setRng(t),e.undoManager.add()}},{shouldInsert:function(e,t,n){var r=$(t.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent");if(0===r.length)return!1;var o=r.closest("table.confluenceTable",".mceContent");if(0!==o.length&&0!==o.children("tbody").length){if(!n.is("table:not(.wysiwyg-macro)"))return!1;var i=!1;return o.find("*[colspan], *[rowspan]").each((function(e,t){if($(t).attr("rowspan")>1||$(t).attr("colspan")>1)return i=!0,!1})),!i}},insert:function(e,t,n){var r=$(t.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent"),o=r.closest("table.confluenceTable",".mceContent"),i=n.children("tbody").length>0?n.children("tbody").children("tr"):n.children("tr"),a=o.children("tbody").children("tr"),u=i.length,c=i.first().children("td, th").length,s=a.length,l=a.first().children("td, th").length,f=r.parent().index(),d=r.index();e.undoManager.beforeChange(),e.undoManager.add();var m=d+c-l,g=f+u-s;m=m<0?0:m,g=g<0?0:g,a.each((function(e,t){for(var n=$(t),r=n.children().last(),o=0;o<m;o++)n.append(r.clone().html(tinymce.isIE?"":"<br/>"))}));for(var p,h=a.last(),v=0;v<g;v++){p=$("<tr></tr>").insertAfter(h);for(var b=0;b<l+m;b++)p.append('<td class="confluenceTd">'+(tinymce.isIE?"":"<br/>")+"</td>");h=p}var y=[];o.children("tbody").children("tr").slice(f).each((function(e,t){y.push($.makeArray($(t).children("th, td").slice(d)))}));var C=[];i.each((function(e,t){C.push($.makeArray($(t).children("th, td")))}));for(var w=C.shift(),x=y.shift();w&&x;w=C.shift(),x=y.shift())for(var S=w.shift(),N=x.shift();S&&N;S=w.shift(),N=x.shift())$(N).html($(S).html());e.selection.select(r[0],1),e.selection.collapse(!0),e.undoManager.add()}},{shouldInsert:function(e,t,n){return $(t.startContainer).closest("[data-macro-body-type='PLAIN_TEXT']").length>0},insert:function(e,t,n){n.raw&&e.selection.setContent(n.raw())}}];t.insert=function(e,t,r,o){var i,a,c=e.selection.getRng(!0);t=function(e,t){var n={content:t,format:"html",selection:!0};return e.fire("BeforeSetContent",n),n.content}(e,t),(a=n(t,e.getDoc())).raw=!!r&&function(){return r},(i=u(e,c,a))?(i.insert(e,c,a),ection:!0}),e.addVisual()):(e.selection.isCollapsed()||e.undoManager.ignore((function(){e.execCommand("mceDelete",!1,null,{skip_undo:!0})})),e.execCommand("mceInsertContent",!1,t,{skip_undo:o}))},t.parse=n})),define("atlassian-editor-plugins/paste/post-process",(function(e,t){var n=function(e){e.parentNode.removeChild(e)},r=function(e){return function(t){var n=t.classList;n.remove.apply(n,e),""===t.className&&t.removeAttribute("class")}},o=function(e,t,n){tinymce.util.Tools.each(e.querySelectorAll(t),n)};t.postProcess=function(e,t){(function(e){o(e,"img:not([data-emoticon-name]):not(.editor-inline-macro):not(.confluence-embedded-image):not(.template-variable)",function(e){return function(t){var n=t.classList;n.add.apternal-resource"]))})(e),function(e){o(e,"span.Apple-style-span",r(["Apple-style-span"]))}(e),function(e){o(e,"br.Apple-a",n)}(e),function(e,t){o(e,"ul.inline-task-list > li[data-inline-task-id]",(function(n){var r=n.getAttribute("data-inline-task-id"),o=tinymce.util.Tools.grep(t.querySelectorAll('li[data-inline-task-id="'+r+'"]'),function(e){return function(t){return!e(t)}}(function(e){return function(t){return function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t,e)}}(e)));o.length>0&&n.setAttribute("data-inline-task-id","")}))}(e,t),function(e){o(e,".mceSelected",r(["mceSelected"])),o(e,"[data-mce-selected]",function(e){return function(t){t.removeAttribute(e)}}(["data-mce-selected"]))}(e)}})),define("atlassian-editor-plugins/paste/repairer-util",(function(e,t){t.getBrAndContents=function(e){return $("<br>").add(e.contents())},t.isEmptyLine=function(e){return""===e.text()},t.isNodeContainingText=function(e){return(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE)&&$.trim(e.textContent)},t.isFirstTextContentInParent=function(e){var n=!1;return e.parent().contents().each((function(){if(t.isNodeContainingText(this))return this===e[0]&&(n=!0,!1)})),n},t.replaceWithP=function(e){var t=e.attr("style"),n=$("<p></p>").append(e.contents());t&&n.attr("style",t),e.replaceWith(n)},t.appendContentsToPreviousContentOrP=function(e){varBrAndContents(e)),e.remove()):t.isFirstTextContentInParent(e)?t.replaceWithP(e):e.replaceWith(t.getBrAndContents(e))},t.createMacro=function(e,t){var n=$('<table class="wysiwyg-macro" data-macro-name="'+e+'" data-macro-body-type="RICH_TEXT"><tbody><tr><td class="wysiwyg-macro-body"></td></tr></tbody></table>');return n.find(".wysiwyg-macro-body").append(t),n}})),define("atlassian-editor-plugins/paste/repairer",["atlassian-editor-plugins/paste/repairer-util"],(function(e){var t=[function(t){t.find(".expand-container").replaceWith((function(){var t=$(this).find(".expand-content").first().contents();return t.lengtntent-wrapper)").each((function(){va(t.remove(),n=!0):t.find("div, p, pre").length?t.replaceWith(t.contents()):(n?e.replaceWithP(t):e.appendContentsToPreviousContentOrP(t),n=!1)}))}];return{repair:function(e){var n=$("<div></div>").html(e);return t.forEach((functioe("atlassian-editor-plugins/paste/pre-process",(function(e,t){var n=[{repair:function(e){var t=/(<td.*<\/td>)<br class="Apple-interchange-newline">/.exec(e);return t?'<table class="confluenceTable"><tbody><tr>'+t[1]+"</tr></tbody></table>":e}},{repair:function(e){var t=/(<tr.*<\/tr>)<br class="Apple-interchange-newline">/.exec(e);return t?'<table class="confluenceTable"><tbody>'+t[1]+"</tbody></table>":e}}],r=function(e){return e?($.each(n,(function(t,n){e=n.repair(e)})),e):e},o=function(t){var n;return AJS&&AJS.DarkFeatures&&!AJS.DarkFeatures.isEnabled("editor.advanced.paste.disable")&&(e(["atlassian-editor-plugins/paste/repairer"],(function(e){n=e})),n)?n.repair(t):t};t.repair=r,t.preProcess=function(e){return e=r(e),o(e)}})),tinymce.PluginManager.add("aePaste",(function(e){var t=this;require(["atlassian-editor-plugins/paste/pre-process","atlassian-editor-plugins/paste/post-process","atlassian-editor-plugins/paste/inserter","alien/domEvent"],(function(n,r,o,i){function a(e){return(e||"").replace(/</g,"&lt;").replace(/>/g\r\n|\r|\n)/g,"<br />")}t.repair=n.repair,t.parse=o.parse;var u={repair:t.repair,parse:t.parse},c=null;e.on("PastePreProcess",(function(e){e.content=n.preProcess(e.content),i.legacyTrigger("prePaste",u,e),tinymce.Env.ie&&(c=function(e){var t=$("<pre>"+(e.content||"")+"</pre>")[0];return a(t.innerText||t.textContent)}(e))})),e.on("PastePostProcess",(function(t){r.postProcess(t.node,e.getBody()),i.legacyTrigger("postPaste",u,t)})),e.on("BeforeExecCommand",(function(t){var n=t.command,r=t.value;"mceInsertContent"===n&&r&&!0===r.paste&&(t.preventDefault(),o.insert(e,r.content,c,!1))})),e.on("paste",(function(e){if(c=null,!tinymce.Env.ie){var t=a(e.clipboardData.getData("text/plain"));c=t}}),!0)}))}))},230361:(e,t,n)=>{n(967275)}}]);
//# sourceMappingURL=98254.UFrGCZAjCa.js.map