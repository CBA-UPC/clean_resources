
/*@preserve
***Version 1.106.0***
*/

/*@license
 *                       Copyright 2002 - 2018 Qualtrics, LLC.
 *                                All rights reserved.
 *
 * Notice: All code, text, concepts, and other information herein (collectively, the
 * "Materials") are the sole property of Qualtrics, LLC, except to the extent
 * otherwise indicated. The Materials are proprietary to Qualtrics and are protected
 * under all applicable laws, including copyright, patent (as applicable), trade
 * secret, and contract law. Disclosure or reproduction of any Materials is strictly
 * prohibited without the express prior written consent of an authorized signatory
 * of Qualtrics. For disclosure requests, please contact notice@qualtrics.com.
 */

try {
  (window["WAFQualtricsWebpackJsonP-cloud-1.106.0"]=window["WAFQualtricsWebpackJsonP-cloud-1.106.0"]||[]).push([[17],{57:function(e,t,n){"use strict";n.r(t);var r=n(3),o=n(4),i=n(25),a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},u=function(e){var t=e.translations,n=e.translationSettings,u=e.question,s=e.recordResponseAndProceed,c=e.isFollowUp,d=e.preloadRendererForQID,l=a(Object(o.useState)(null),2),f=l[0],b=l[1],p=a(Object(o.useState)(null),2),v=p[0],O=p[1],g=a(Object(o.useState)(null),2),y=g[0],w=g[1],S=y;return null!==y&&f===u.QID&&v!==u.Style&&(w(null),S=null),Object(o.useEffect)((function(){var e=u.Format,t=u.Style;Object(i.a)(e,t).then((function(e){w((function(){return e})),b(u.QID),O(u.Style)}))}),[u]),null!==S&&f===u.QID?Object(r.h)(S,{translations:t,translationSettings:n,question:u,recordResponseAndProceed:s,isFollowUp:c,preloadRendererForQID:d}):Object(r.h)("div",null)},s=n(14),c=n(23);ar l=n(6),f=n(5),b=Object(o.createContext)(null);var p=n(32),v=function O(e){var t,n,r;switch(e.questionConfiguration.Format){case"embedded-feedback-question-format-open-text":return(t={})[e.questionConfiguration.SurveyQuestionId]=e.recordedResponse,t;case"embedded-feedback-question-format-points":case"embedded-feedback-question-format-yes-no":default:return(n={})[e.questionConfiguration.SurveyQuestionId]=((r={})[e.recordedResponse]={selected:!0},r),n}}var g=function(e){var t,n,a=e.interceptOptions,g=a.id,y=a.surveyId,w=a.targetURLOrigin,S=Object(f.b)(b),m=S.Questions,j=v(Object(o.useState)(0),2),h=j[0],Q=j[1],I=v(Object(o.useState)(!1),2),C=I[0],R=I[1],q=v(Object(o.useState)(!1),2),k=q[0],P=q[1],D=v(Object(o.useState)(!1),2),E=D[0],F=D[1],x=w+"/DX/PostResponse/?SurveyId="+y+"&InterceptId="+g,T=window.QSI.global.featureFlags["DX.EmbeddedFeedback_NewAPIs"],A=(t=m,n=Object(o.useRef)(),Object(o.useEffect)((),n.current);if(a.isPreview&&A)if(A.length!==m.length)Q(0);else if(A[0].Style!==m[0].Style)Q(0);else for(var L=0;L<m.length;L++)if(m[L].QuestionText!==A[L].QuestionText){Q(L);break}var _=Object(l.b)().legacyCreativeVal,U=Object(p.a)(y,g,_.requestId,S.SurveyVersionId),J=U.enqueueResponse,M=U.closeSurvey,N=Object(o.useMemo)((function(){return m.map(()}),[m]),W=N[h],X=s.a.getTranslation(S),B=s.a.getTranslationCode(S),H=V=Object(o.useCallback)((function(){if(T)M();else{if(E)return;e="POST",t=x,n=G(),r=H,(o=new XMLHttpRequest).open(e,t,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){try{4===o.readyState&&(200!==o.status?r(o):window.QSI.config.surveyResponseId=o.responseText)}catch(e){d(e)}},o.send(n),F(!0)}var e,t,n,r,o}),[N,E,T,M]),z=Object(o.useCallback)((function(){var e={};return N.forEach((),JSON.stringify(e)}),[N]),G=Object(o.useCallback)((function(){var e=c.a.getEmbeddedData(g);return null!==B&&(e.Q_Language=B),"Q_PostResponse="+encodeURIComponent(z())+"&ED="+encodeURIComponent(JSON.stringify(e))}),[]),K=Y=Object(o.useCallback)((function(){if(!E&&!T)if(navigator&&navigator.sendBeacon){var e=new FormData;e.append("Q_PostResponse",z());var t=c.a.getEmbeddedData(g);null!==B&&(t.Q_Language=B),e.append("ED",JSON.stringify(t)),navigator.sendBeacon(x,e)}else V()}),[E]);Object(o.useEffect)((function(){if(k&&"embedded-feedback-question-format-display-text"!=W.questionConfiguration.Format){var e=6e5;window.QSI&&window.QSI.config&&window.QSI.config.followupQuestionTimeoutMS&&(e=window.QSI.config.followupQuestionTimeoutMS);var t=window.setTimeout(K,e);return window.addEventListener("beforeunload",Y),}),[k,E,W]);var Z=function(e){if(!e)return h+1;for(var t=0;t<N.length;t++)if(N[t].questionConfiguration.QID===e)return t;return h+1},$=Object(o.useCallback)((function(e,t,n){if(W.recordedResponse=e,k||a.isPreview||_.clickWithImpression(),!a.isPreview){if(T){var r=c.a.getEmbeddedData(g);null!==B&&(r.Q_Language=B),J({embeddedData:r,recordedResponse:O(W)})}t&&V()}if("End"!==n){var o=Z(n);o>=N.length?R(!0):(P(!0),Q(o))}else R(!0)}),[N,W,h,E,_]);return C||!W?null:Object(r.h)(u,{translations:X,translationSettings:S.TranslationSettings,question:W.questionConfiguration,recordResponseAndProceed:$,isFollowUp:k,preloadRendererForQID:function(e){if("End"!==e){var t=Z(e);if(!(t>=N.length)){var n=N[t].questionConfiguration,r=n.Format,o=n.Style;Object(i.a)(r,o)}}}})},y=n(31),w=n(12),S=n(30),m=n(7),j=function(e){var t=e.creativeOptions,n=e.interceptOptions,o=t.Insertion,i=o.Selector,a=o.MaxNumberOfInsertions,u=Object(S.a)(t),s=u.Questions[0].Appearance.CustomCSS,c=Object(w.a)(s),d=Object(y.a)(g,n,i,c,a);return Object(r.h)(m.a.Provider,{value:n},Object(r.h)(b.Provider,{value:u},d))},h=n(29);n.d(t,"renderEmbeddedFeedback",(function(){return I}));var Q=function I(e,t,n){var o={interceptOptions:t,creativeOptions:e},i=document.createElement("div");return i.style.display="none",Object(r.k)(Object(r.h)(h.a,{legacyCreative:n},Object(r.h)(j,Q({},o))),document.body.appendChild(i)),{remove:function(){Object(r.k)(null,i),document.body.removeChild(i)}}}},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",();var r=n(5),o=n(4),i=Object(o.createContext)(null),a=}]);
} catch(e) {
  if (typeof QSI !== 'undefined' && QSI.dbg && QSI.dbg.e) {
    QSI.dbg.e(e);
  }
}