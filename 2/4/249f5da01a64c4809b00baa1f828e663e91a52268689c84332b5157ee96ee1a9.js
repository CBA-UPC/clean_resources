/**
 * Copyright 2018 Webtrends Optimize / AGL. All Rights Reserved.
 * PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 *
 * For information on libraries used by the Webtrends Optimize Tag, please see
 * the following link: https://www.webtrends-optimize.com/third-party-libraries/
 */
if(typeof WT==='undefined'){WT={};}if(typeof WT.optimize==='undefined'){WT.optimize={};}WT.optimize.PayloadBuilder=function(){var zf64e={};zf64e[this['MODE']]='1';this.zb096f=this['setGuid']=function(zf331){zf64e[this['GUID']]=zf331;return this;};this.z3965a=this['setProjectTypeId']=function(z27cd4){zf64e[this['PROJECT_TYPE_ID']]=z27cd4;return this;};this.z3d54a=this['setProjectId']=function(z9a464){zf64e[this['PROJECT_ID']]=z9a464;return this;};this.zd871a=this['setTestId']=function(zbaed2){zf64e[this['TEST_ID']]=zbaed2;return this;};this.zb63c5=this['setMode']=function(mode){zf64e[this['MODE']]=mode;return this;};this.z6cdf8=this['setAccountId']=function(z30ffa){zf64e[this['ACCOUNT_ID']]=z30ffa;return this;};this.z9d870=this['setExperimentId']=function(exp){if(!WT.hasVal(exp)||exp==='NOTRACKID'){return this;}zf64e[this['EXPERIMENT_ID']]=exp;return this;};this.set=this['set']=this.z35926=this['build']=function(){WT.common.extendArray(this.required).forEach(function(ze8862){if(!WT.hasVal(zf64e[ze8862])){throw new Error('Required Param: '+ze8862+' not in '+WT.common.JSONPrettify(zf64e));}});return zf64e;};this.z35cbc=this['copyFrom']=function(zf64e){this.zb096f(zf64e['opt.guid']).z3965a(zf64e['opt.project_type_id']).z3d54a(zf64e['opt.project_id']).zd871a(zf64e['opt.test_id']).zb63c5(zf64e['opt.mode']).z9d870(zf64e['opt.experiment_id']).z6cdf8(zf64e['opt.account_id']);return this;};};WT.optimize.PayloadBuilder.prototype={'ACCOUNT_ID':'opt.account_id','GUID':'opt.guid','PROJECT_TYPE_ID':'opt.project_type_id','PROJECT_ID':'opt.project_id','TEST_ID':'opt.test_id','MODE':'opt.mode','EXPERIMENT_ID':'opt.experiment_id',required:['opt.guid','opt.project_type_id','opt.project_id','opt.test_id','opt.mode']};WT.optimize.zd67f=function(z1a23){var z32da=this;var z0eb2=false;var z67fd=[];var z706a=[];var z1aff=null;var zfe37=0;var z3065=0;WTEvent.CONTROL_RESPONSE='control_response';WTEvent.CONTROL_PART='control_part';WTEvent.zb899='control_abort';WTEvent.z0aef='control_invalid';WTEvent.z5749='control_preprocess';WTEvent.z257b='control_process';WTEvent.z85a2='control_pageview';WTEvent.z6938='control_conversion';WTEvent.zb2de='control_conversionevent';WTEvent.DOM_ONLOAD='dom_onload';WTEvent.PRECONVERSIONEVENT='preconversionevent';WTEvent.CONVERSIONEVENT='conversionevent';WTEvent.z9c02='failed';WTEvent.POSTEXECUTE='postexecute';this.z95e8=function(){WT._addEventHandler(WTEvent.z9c02,zcbc2,zcbc2);WT._addEventHandler(WTEvent.DONE,za01b,za01b);WT._addEventHandler(WTEvent.zb899,this.z1028,this.z1028);WT._addEventHandler(WTEvent.z0aef,this.ze5d9,this.z1028);WT._addEventHandler(WTEvent.z85a2,this.z4708,this.z3c7c);WT._addEventHandler(WTEvent.z6938,this.z5b2c,this.z3c7c);WT._addEventHandler(WTEvent.z5749,this.zede2);WT._addEventHandler(WTEvent.z257b,this.z348e);WT._addEventHandler(WTEvent.zb2de,this.zd78e);WT._addEventHandler(WTEvent.EXECUTE,this.zc58a);var ready=function(){if(z0eb2){return;}z0eb2=true;WT._fireEvent(new WTEvent(WTEvent.DOM_READY,WTEvent.STATUS_SUCCESS),true);};var onload=function(){if(z1a23.zefb8){return;}z1a23.zefb8=true;WT._fireEvent(new WTEvent(WTEvent.DOM_ONLOAD,WTEvent.STATUS_SUCCESS),true);};try{if(document.addEventListener){if(document.readyState==='complete'||typeof(document.readyState)==='undefined'){ready();}document.addEventListener('DOMContentLoaded',function(){document.removeEventListener('DOMContentLoaded',arguments.callee,false);ready();},false);if(/WebKit|Opera/i.test(navigator.userAgent)){var zfe927=setInterval(10);};}if(document.attachEvent){if(document.readyState==='complete'||document.readyState==='loading'){ready();}document.attachEvent('onreadystatechange',function(){if(document.readyState==='complete'||document.readyState==='loading'){document.detachEvent('onreadystatechange',arguments.callee);ready();}});}if(window.addEventListener){window.addEventListener('load',function(){window.removeEventListener('load',arguments.callee,false);ready();},false);}else if(window.attachEvent){window.attachEvent('onload',function(){window.detachEvent('onload',arguments.callee,false);ready();});}if(z1a23.zefb8){onload();}else{if(window.addEventListener){window.addEventListener('load',function(){window.removeEventListener('load',arguments.callee,false);onload();},false);}else if(window.attachEvent){window.attachEvent('onload',;};}if(!WT.refresh){WT.refresh=function(){try{z1a23.g_hasEmptySetup=false;z1a23.g_Aborted=false;z1a23.g_RunObjList=[];z1a23.g_ParamsList=[];z1a23.g_PageTimer=null;z1a23.g_PageStartTime=null;z1a23.g_PageEndTime=null;z1a23.Preview={};z1a23.z95e8();var za928=z1a23.Library.z454c;z1a23.Library=new z1a23.zd67f(WT);z1a23.Library.z454c=za928;}catch(e){WT.Debug.error('refresh: Fatal Error, check error message for details',0,e);var event=new WTEvent((e.zbee9?e.zbee9:WTEvent.ABORT),WTEvent.STATUS_FAULT,this);event.params['error']=e;WT._fireEvent(event);}};}if(!WT.execute){WT.execute=function(za69d,z606a){WT.refresh();z1a23.setup(za69d,z606a);WT._fireEvent(new WTEvent(WTEvent.POSTEXECUTE,WTEvent.STATUS_SUCCESS));};}}catch(e){ready();onload();}WT.Debug.info('library: Server library initialized');};var za01b=function(event){z1a23.g_done=true;WT.Debug.info('done: Webtrends Optimize is done processing the page. ('+(z1a23.g_PageEndTime-z1a23.g_PageStartTime)+' ms)');clearTimeout(z1a23.g_PageTimer);};var zcbc2=function(event){var zae74=event.target;WT.Debug.error('error: ['+zae74.params['testAlias']+'] failed to execute on '+zae74.z019b+' step.');zae74.z6848=zf9ac.z3064;if(zae74.params['s_requestType']=='control'){if(zae74.z019b==zf9ac.z38a4){z1a23.g_RunObjList.push(zae74);WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT));}else if(zae74.z019b==zf9ac.za651||zae74.z019b==zf9ac.z971e){z32da.z2d27();}else{z1a23.g_RunObjList.push(zae74);WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT));};}};this.getOptData=function(z2859f,filter){var zae74=WT.optimize.lookup(z2859f);var zcb8af={};var zca1a3={};var prefix='opt.';if(!zae74||(WT.hasVal(filter)&&!filter(zae74))){return zcb8af;}zcb8af=WT.common.extendObject(zae74.z83a5e());zcb8af.forEach(;return zca1a3;};this.z9318a=function(domain){var z22f8=WT.common.TrackingPipeline;var z5866e=WT.common.extendObject;var z9aaf4=function(z740b){try{if(z740b['params']&&z740b['params']['mutation']&&z740b['params']['mutation']['click']&&z740b['params']['testAlias']&&z740b['params']['conversionPoint']){var z02b4=(function(){var payload=z32da.getOptData(z740b['params']['testAlias']);if(z5866e(payload).length()===0){WT.Debug.debug(z740b['params']['testAlias']+' wasn\'t found, trying cookie');payload=z32da.z1467e(z740b['params']['testAlias']);WT.Debug.debug('Found values in cookie '+WT.common.JSONPrettify(payload));}var size=z5866e(payload).length();if(size>0){payload['opt.conversion_point']=z740b['params']['conversionPoint'];}else if(size===0){payload['opt.account_id']=domain;payload['opt.test_alias']=z740b['params']['testAlias'];payload['opt.conversion_point']=z740b['params']['conversionPoint'];}var z86cae=(WT.hasVal(z740b['params'])&&WT.hasVal(z740b['params']['userDefinedParams']))?z740b['params']['userDefinedParams']:null;if(WT.hasVal(z86cae)){if(WT.hasVal(z86cae['externalUID'])){payload['opt.external_uid']=z86cae['externalUID'];}else if(WT.hasVal(z86cae['data'])&&WT.hasVal(z86cae['data']['externalUID'])){payload['opt.external_uid']=z86cae['data']['externalUID'];};}return payload;})();z5866e(z02b4).forEach(function(z3ec0,attrName){if(!z740b.getParam(attrName)){z740b.setParam(attrName,z3ec0);}});var z8508={};var z86cae=(WT.hasVal(z740b['params'])&&WT.hasVal(z740b['params']['userDefinedParams']))?z740b['params']['userDefinedParams']:null;if(WT.hasVal(z86cae)){z8508=WT.paramsMerge(JSON.parse(JSON.stringify(z02b4)),z86cae);z8508=WT.hasVal(z86cae)?WT.paramsMerge(z8508,z86cae['config']):z8508;if(WT.hasVal(z86cae['data'])&&WT.hasVal(z86cae['data']['externalUID'])){z8508['externalUID']=z86cae['data']['externalUID'];};}else{z8508=WT.paramsMerge(JSON.parse(JSON.stringify(z02b4)));}var zaa20f=WT.paramsMerge(z8508);z1a23.conversion(zaa20f,true);}}catch(e){WT.Debug.error('OPT Error:  Applying External CV mutation',148,e['message']);}};z22f8.registerMutation('optimizeCVMutant',z9aaf4,1);};this.z0271a=function(domain){var z22f8=WT.common.TrackingPipeline;var zacb05=(function(){if(!WT.hasVal(z32da.zdf8b5('user',domain))&&!WT.hasVal(WT.common.getCookieAsObj('WT_FPC'))){return true;}return false;})();var z70f4a=(function(z4ac79){var z451e4;function z54c9c(){var zb7933=z32da.zdf8b5('user',domain);return zb7933?zb7933['uid']:null;};return function(z740b){try{if(!z32da.z35bf1(z740b)){return;}if(!WT.hasVal(z740b.getParam('WT.co_f'))){if(!WT.hasVal(z451e4)){z451e4=z54c9c();}if(WT.hasVal(z451e4)){WT.Debug.trace('Injecting WT.co_f='+z451e4);z740b.setParam('WT.co_f',z451e4);};}if(!WT.hasVal(z740b['payload']['WT.vt_f'])&&z4ac79){WT.Debug.trace('Injecting WT.vt_f=1');z740b['payload']['WT.vt_f']=1;z740b['payload']['WT.vt_f_a']=1;z740b['payload']['WT.vt_f_d']=1;z740b['payload']['WT.vt_f_s']=1;z4ac79=false;}else if(WT.hasVal(z740b['payload']['WT.vt_f'])){z4ac79=false;}}catch(e){WT.Debug.error('OPT ERROR: Issue detecting optimize visitor',148,e['message']);}};})(zacb05);z22f8.registerMutation('optimizeVisitorMutant',z70f4a,2);};var zf9ac=function(z5792,z6b4f){this.params=z5792;this.z019b=null;this.z6848=null;this.z0386=z6b4f;var z677c=this;zf9ac.z38a4='init';zf9ac.z7365='prepare';zf9ac.z94bc='preprocess';zf9ac.z7df9='process';zf9ac.z566c='abort';zf9ac.z57b0='invalid';zf9ac.za651='prerender';zf9ac.z971e='render';zf9ac.z7bd2='done';zf9ac.z3064='fail';zf9ac.z3a29='conversionevent';zf9ac.zb7d1='pageview';zf9ac.zb00a='conversion';zf9ac.z10ca='AB';zf9ac.z7ffc='FULLFACTORIAL';zf9ac.zcf44='MULTIVAR';zf9ac.z6f4e='SPLIT';zf9ac.zbf4a='TARGET';zf9ac.zd4c4='BASELINE';this.z1382={};this.z7715={};this.z95e8=this.ze63a=function(source){this.z1382=JSON.parse(JSON.stringify(source.z1382));this.z7715=JSON.parse(JSON.stringify(source.z7715));};this.getParams=function(){return this.params;};this.zd12e=this.z452a=this.setup=function(){if(!(this.params['s_requestType']=='conversion'&&this.params['beacon'])){WT._addEventHandler(WTEvent.CONTROL_RESPONSE,this.zac2c,this.zdbe8);}this.z696d();this.zf563();};this.track=this.zf710=function(z9ea9){var zf1e1;var z3111={};if(this.params['lightWeightMode']===false||this.params['lightWeightMode']==='false'){return z3111;}if(this.params['lwtModeWhiteList']){zf1e1=this.params['lwtModeWhiteList'];}else{zf1e1=this.z16ad('control','metaFieldKeys',z9ea9);}if(zf1e1===undefined||zf1e1.length===0){return z3111;}var zcac3=zf1e1.split(',');var z8b95='';for(var index=0;index<zcac3.length;index++){z8b95=zcac3[index].replace(/^\s\s*/,'').replace(/\s\s*$/,'');z3111[z8b95]=true;}return z3111;};this.z1da9=function(z7e3d){var z8206=this.params['testAlias'].split(',');for(var z88f9=0;z88f9<z8206.length;z88f9++){z8206[z88f9]=z8206[z88f9].replace(/^\s\s*/,'').replace(/\s\s*$/,'');var zbf57=new RegExp('-'+z8206[z88f9]+'$');if(z7e3d.match(zbf57)){return true;};}return false;};this.z696d=function(type){this.z1382['keyToken']=this.params['s_keyToken'];this.z1382['params']={};if(!type){this.z1382['params']['requestType']=this.params['s_requestType'];}else{this.z1382['params']['requestType']=type;}var zfb9b={};var z7941=false;if(this.params['lightWeightMode']===true||this.params['lightWeightMode']==='true'){if(this.z1382['params']['requestType']===zf9ac.zb7d1||this.z1382['params']['requestType']===zf9ac.zb00a){zfb9b=this.zf710(this.params['testAlias']);if(zfb9b===undefined||zfb9b===null||zfb9b.length===0){WT.Debug.debug('Lightweight Mode On but No WhiteList found(assume nothing whitelisted) for alias: '+this.params['testAlias']+' for '+this.z1382['params']['requestType']);zfb9b={};}else{WT.Debug.debug('LightWeight Mode On and WhiteList found for alias: '+this.params['testAlias']+' for '+this.z1382['params']['requestType']);}z7941=true;}this.z1382['params']['lightWeightMode']=true;}else{this.z1382['params']['lightWeightMode']=false;}var z92d5=['testAlias','controlCookieTimeout','splitMatchRegex','conversionPoint','federatedDomainID','federatedKey','testGroup','cookieConversionCheck','s_modeUD','enableCORS','preRenderConversionEvents','selectorName'];for(var z5f96=0;z5f96<z92d5.length;++z5f96){if(WT.hasVal(this.params[z92d5[z5f96]])){this.z1382['params'][z92d5[z5f96]]=this.params[z92d5[z5f96]];};}this.z1382['params']['s_mode']=this.params['s_mode'];var z1623=['s_mode','debug','cookiePrefix','cookieInspection','use3rdPartyCookies','use1stPartyCookies','beacon','s_setupID','crossAPI'];for(var zbcf7=0;zbcf7<z1623.length;++zbcf7){this.z1382['params'][z1623[zbcf7]]=this.params[z1623[zbcf7]];}this.z1382['body']={};this.z1382['body']['data']={};if(this.params['data']!==undefined&&z7941===true&&zfb9b!==undefined){for(var el in this.params['data']){if(zfb9b[el]===true){this.z1382['body']['data'][el]=this.params['data'][el];};};}else if(this.params['data']!==undefined&&z7941===false){this.z1382['body']['data']=this.params['data'];}if(this.params['cache']!==undefined){this.z1382['body']['cache']=this.params['cache'];}if(document.referrer!==''){this.z1382['body']['data']['_wm_referer']=document.referrer;}if(this.params['externalUID']){this.z1382['body']['data']['_wm_externalUID']=this.params['externalUID'];}this.z1382['body']['data']['_wm_TimeOffset']=z32da.z31a9()*1000*60*60;if(document.title!==''){if(z7941===true&&zfb9b['documentTitle']||z7941===false){this.z1382['body']['data']['documentTitle']=document.title;};}var z199d=WT.parseQueryString();if(z199d){for(var key in z199d){if((z7941===true&&zfb9b[key]===true)||z7941===false){this.z1382['body']['data'][key]=z199d[key];};};}var z33e6=document.getElementsByTagName('meta');for(var z205e=0;z205e<z33e6.length;++z205e){if(z33e6[z205e]['name']!==''){if((z7941===true&&zfb9b[z33e6[z205e]['name']]===true)||z7941===false){this.z1382['body']['data'][z33e6[z205e]['name']]=z33e6[z205e]['content'];};};}if(this.params['s_overrideKeys']){this.z1382['params']['s_overrideKeys']=this.params['s_overrideKeys'];}this.z1382['body']['cookies']={};var z0a48=document.cookie.split(';');for(var z5471=0;z5471<z0a48.length;++z5471){var c=[];c[0]=z0a48[z5471].substring(0,z0a48[z5471].indexOf('='));c[1]=z0a48[z5471].substring(z0a48[z5471].indexOf('=')+1);while(c[0].charAt(0)===' '){c[0]=c[0].substring(1,c[0].length);}if(c[0].indexOf(this.params['cookiePrefix'])===0&&z7941===true&&c[0].match(/control/)&&this.z1da9(c[0])){var z3497=JSON.parse(z32da.z7f69(c[1],this.params['s_keyToken']));if(z3497['metaFieldKeys']){delete z3497['metaFieldKeys'];c[1]=z32da.z71df(JSON.stringify(z3497),this.params['s_keyToken']);}this.z1382['body']['cookies'][c[0]]=c[1];}else if(c[0].indexOf(this.params['cookiePrefix'])===0&&(z7941===false||(z7941===true&&!c[0].match(/control/)))){this.z1382['body']['cookies'][c[0]]=c[1];}else if(this.params['cookieInspection']===true&&((z7941===true&&zfb9b!==undefined&&zfb9b[c[0]]===true)||z7941===false)){this.z1382['body']['cookies'][c[0]]=c[1];};}WT.fireEvent(new WTEvent(WTEvent.CONFIGURE,WTEvent.STATUS_SUCCESS,this));};this.zf563=function(z6a1f){var zfcdf=this.params['s_requestType']=='conversion'&&this.params['beacon'];if(z6a1f){this.z1382['params']['preprocessed']=z6a1f;}var z4529=JSON.stringify(this.z1382);if(zfcdf){var zdb52=new Date().getTime()+'-'+Math.floor(Math.random()*1000+1);z4529=z4529+'?_wt.time='+zdb52;}WT.Debug.debug('service: JSON Control Request:\n');WT.Debug.debug(z4529);z4529=z32da.z71df(z4529,this.z1382['keyToken']);var url=this.params['s_otsUrl']+'/';if(zfcdf){url=this.params['s_otsBeaconUrl']+'/';}var z8159=url.length+z4529.length;if((this.params['s_urlParts']&&z8159>this.params['s_maxUrl'])||z8159>this.params['s_urlLimit']&&!z677c.params['enableCORS']){var z6836=new Date().getTime()+'-'+Math.floor(Math.random()*1000+1);var za643=this.params['s_maxUrl']-url.length;if((this.params['s_urlParts']&&this.params['s_maxUrl']>this.params['s_urlLimit'])||!this.params['s_urlParts']){za643=this.params['s_urlLimit']-url.length;}var z4548=Math.ceil(z4529.length/za643);var start=0;var zf12e=0;var z3da6=function(event){if(typeof event!='undefined'&&event!==null){if(event.target===null){return;}var z2ca0=z32da.z7f69(event.target['control'],z677c.z1382['keyToken']);WT.Debug.trace('control_part: JSON Control Part\n'+z2ca0);var zd1ef=JSON.parse(z2ca0);if(zd1ef['controlID']!=z6836){return;};}var zf5f9=z4529.substr(start,za643);var z51f4e=zf5f9+'/'+z6836+'/'+zf12e+'/'+z4548;start+=zf5f9.length;zf12e++;if(zf12e>(z4548-1)){WT._removeEventHandler(WTEvent.CONTROL_PART,arguments.callee);}z32da._comm(url,z51f4e,'service parts request',false,this.params['url'],z32da._execScript);};if(zfcdf){for(zf12e;zf12e<z4548;++zf12e){var zf5f9=z4529.substr(start,za643);z0e1d=new Image();z0e1d.src=url+zf5f9+'/'+z6836+'/'+zf12e+'/'+z4548;start+=zf5f9.length;WT.Debug.trace('control_part: Beacon Part\n'+zf5f9);};}else{WT._addEventHandler(WTEvent.CONTROL_PART,z3da6);z3da6();};}else{if(zfcdf){z0e1d=new Image();z0e1d.src=url+z4529;WT.Debug.debug('service: Beacon Request\n'+z4529);}else{z32da._comm(url,z4529,'service standard request',z677c.params['enableCORS'],this.params['url'],z32da._execScript);};}};this.zc52f=function(){this.z019b=zf9ac.z94bc;this.z4cc8(zf9ac.z94bc);var z52fa=this.z7715[zf9ac.z94bc]['body']['codeFragments'];for(var name in z52fa){if(z52fa.hasOwnProperty(name)){try{WT.Debug.trace('codeFragment: [name:'+name+', code:'+z52fa[name]+']');this.params['data'][name]=z32da._execScript(z52fa[name],true);}catch(e){WT.Debug.error('codeFragment: error running code fragment [name: '+name+'], check error for details.',0,e);};};}};this.z596e=function(z67b2){this.z019b=z67b2;this.z4cc8(z67b2);var z945c=this.z7715[z67b2]['body']['cookies'];if(z945c){for(var z7e3d in z945c){var z764b=z945c[z7e3d];this.z0f8a(z7e3d,z764b['value'],z764b['timeout'],z764b['type']);};}};this.zee58=function(){this.z019b=zf9ac.z3a29;var zfce9=this.z7715[zf9ac.z3a29]['body']['conversionEvents'];var ze926=this.z7715[zf9ac.z3a29]['params'];for(var zf331 in zfce9){if(zfce9.hasOwnProperty(zf331)){var z634a=zfce9[zf331];z634a['params']=ze926;switch(z634a['eventType']){case 0:this.z07f3(z634a,z8ff2);break;case 1:WT.Debug.debug('PageLoad conversion received by conversionEvent');break;case 2:this.z0fa8(z634a);break;case 3:this.z25ba(z634a);break;case 5:this.z8c56(z634a,z8ff2);break;default:WT.Debug.error('unknown conversion event type: '+z634a['eventType']);break;};};}};var z8ff2=function(zee58,z3d00,z7a92,z9e4a){var z4c75=true;if(typeof zee58['redirect_flag']!=='undefined'){z4c75=zee58['redirect_flag'];}var zaa4a=function(event){if(event){var z9de9=(event.currentTarget)?event.currentTarget:event.srcElement;if(z9de9&&z9de9.tagName=='A'&&z9de9.href){if(!z9de9.wt_href){z9de9.wt_href=z9de9.href;z9de9.wt_target=z9de9.target;}z9de9.href='javascript:void(0);';z9de9.target='';};}};var zd001=function(event){if(event){var z9de9=(event.currentTarget)?event.currentTarget:event.srcElement;if(z9de9&&z9de9.tagName=='A'&&z9de9.href&&!(z9de9.wt_pending&&z9de9.wt_pending=='true')){z9de9.href=z9de9.wt_href;z9de9.target=z9de9.wt_target;};}};var z35c2=function(event){var zf64e=zee58['params'];zf64e['conversionPoint']=zee58['conversionPointName'];if(zee58['federatedKey']){zf64e['federatedKey']=zee58['federatedKey'];zf64e['federatedDomainID']=zee58['federatedDomainID'];}var z9de9=(event.currentTarget)?event.currentTarget:event.srcElement;if(event){if(z4c75&&z9de9&&z9de9.tagName=='A'&&z9de9.href){z9de9.wt_pending='true';zf64e['r_redirectLink']=z9de9;setTimeout(z677c.params['s_conversionTimeout']);};}if(z677c.params['lightWeightMode']){zf64e['lightWeightMode']=z677c.params['lightWeightMode'];}zf64e['s_isInternalCV']=true;zf64e['testAlias']=zee58['testAlias'];WT.Debug.trace('Attempting to convert on \''+zf64e['conversionPoint']+'\' for \''+zf64e['testAlias']+'\'');if(z1a23.conversion(zf64e)&&z4c75){z677c.redirectElement(z9de9,'click: conversion fail, redirecting');}};try{if(z3d00){if(z4c75==true&&z3d00.tagName=='A'&&z3d00.href){WT._addDOMEvent(z3d00,z677c.z9dda(z3d00,'mouseover'),zaa4a);WT._addDOMEvent(z3d00,z677c.z9dda(z3d00,'mouseout'),zd001);}WT._addDOMEvent(z3d00,z677c.z9dda(z3d00,z9e4a),z35c2);WT.Debug.trace('conversionEvent: setting on click event for [id:'+z7a92+' , name: '+zee58['conversionPointName']+', alias: '+zee58['testAlias']+']');}else{throw 'Unable to find element for '+z7a92;}return 0;}catch(z7830){WT.Debug.error('unable to attach OnClick conversion event for [id: '+z7a92+', name: '+zee58['conversionPointName']+', alias: '+zee58['testAlias']+']',0,z7830);return 1;}};this.z07f3=function(e,z522a){try{var z4f97=e['domElementID'];for(var z7a92 in z4f97){if(z4f97.hasOwnProperty(z7a92)){var el=z677c.z0f52(z7a92);var z9e4a=z4f97[z7a92];z522a(e,el,z7a92,z9e4a);};}}catch(z8a24){WT.Debug.error('unable to attach on click conversion event.',0,z8a24);}};this.z0fa8=function(e){try{var zf64e={};zf64e=WT.paramsMerge(zf64e,e['params']);zf64e['conversionPoint']=e['conversionPointName'];if(e['federatedKey']){zf64e['federatedKey']=e['federatedKey'];zf64e['federatedDomainID']=e['federatedDomainID'];}if(z677c.params['lightWeightMode']){zf64e['lightWeightMode']=z677c.params['lightWeightMode'];}zf64e['s_isInternalCV']=true;zf64e['testAlias']=e['testAlias'];setTimeout((e['timeOnPage']*1000));WT.Debug.trace('conversionEvent: setting time on page event for [timer:'+e['timeOnPage']+' seconds , name: '+e['conversionPointName']+', alias: '+e['testAlias']+']');}catch(z8a24){WT.Debug.error('unable to attach on time on page conversion event for [timer:'+e['timeOnPage']+' seconds , name: '+e['conversionPointName']+', alias: '+e['testAlias']+']',0,z8a24);}};this.z25ba=function(e){try{var z4f97=e['domElementID'];if(z4f97===''||z4f97===null||z4f97===undefined){z32da._execScript(e['script']);}else{var z0184=z32da._execScript('var _tempfnvalue = function (event) {'+e['script']+'};');if(z0184===null||z0184===undefined){z0184=_tempfnvalue;}for(var z6747 in z4f97){if(z4f97.hasOwnProperty(z6747)){var el=this.z0f52(z6747);var zfce9=z4f97[z6747].split(',');for(var zd6a9=0;zd6a9<zfce9.length;++zd6a9){var z2431=zfce9[zd6a9];try{WT._addDOMEvent(el,z2431,z0184);WT.Debug.trace('conversionEvent: setting custom conversion event for [id: '+z6747+' , event: '+z2431+', name: '+e['conversionPointName']+', alias: '+e['testAlias']+']');}catch(z7830){WT.Debug.error('unable to attach custom conversion event for [id: '+z6747+', event: '+z2431+', name: '+e['conversionPointName']+', alias: '+e['testAlias']+']',0,z7830);};};};};}}catch(z8a24){WT.Debug.error('unable to attach custom conversion event.',0,z8a24);}};this.z8c56=function(z634a,z522a){var z51ba=function(el){var tagName=z9de9['tagName']?z9de9['tagName']+' ':'';var id=z9de9['id']?z9de9['id']+' ':'';var className=z9de9['className']?z9de9['className']:'';return tagName+id+className;};try{for(var selector in z634a['domElementID']){var z9e4a=z634a['domElementID'][selector];var z05be=WT.getSelector()(selector);if(!z05be||z05be.length===0){WT.Debug.debug('ActionClick selector('+selector+') result is empty');WT.common.z3440c(selector,z634a,z522a,this.z8c56);return 0;}for(var z2286 in z05be){var z9de9=z05be[z2286];var z7a92=z51ba(z9de9);z522a(z634a,z9de9,z7a92,z9e4a);WT.Debug.debug('conversionEvent:  Attached '+z9e4a+' to selector('+selector+') for elm: '+z7a92);};}return 0;}catch(z2a4e){WT.Debug.error('unable to attach ActionClick conversion event: '+z2a4e);return-1;}};this.redirectElement=function(z9de9,z740b){if(z740b){WT.Debug.debug(z740b);}if(z9de9!==null&&z9de9.wt_pending&&z9de9.wt_pending==='true'){WT.Debug.info('click: redirecting to url ['+z9de9.wt_href+']');z9de9.href=z9de9.wt_href;z9de9.target=z9de9.wt_target;z9de9.wt_pending='';if(typeof(z9de9.wt_target)!=='undefined'&&z9de9.wt_target!==''&&z9de9.wt_target!==null){window.open(z9de9.wt_href,z9de9.wt_target);}else{setTimeout(function(){window.location.href=z9de9.wt_href;},0);};}else{WT.Debug.debug('click: redirect not pending or !elm, so not redirecting');}};this.z9dda=function(z9de9,name){var z6b68=name.substr(0,2);if(z9de9.addEventListener){if(z6b68=='on'){return name.substring(2);};}else if(z9de9.attachEvent){if(z6b68!='on'){return 'on'+name;};}return name;};this.z0f8a=function(name,value,z65d6,type){var z297e=null;if(type!='session'){z297e=new Date();z297e.setTime(z297e.getTime()+z65d6);}var z4384='';var zb13a=z677c.params['cookieDomain']||WT.optimizeModule.prototype.wtConfigObj['cookieDomain'];if(typeof zb13a!='undefined'&&zb13a!==null&&zb13a!==''){z4384=' domain='+zb13a+';';}else{z4384='domain=.'+z32da.z58a85()+';';}var z71fe='';if(z677c.params['cookiePath']!==null&&z677c.params['cookiePath']!==''){z71fe=' path='+z677c.params['cookiePath']+';';}var z753f=name+'='+value+';'+z4384+z71fe+(z297e!==null?' expires='+z297e.toGMTString()+';':'');WT.Debug.trace('cookie: setting cookie data: ['+z753f+']');document.cookie=z753f;};this.z7cb0=function(){if(z677c.params['debug']&&z677c.params['debug'].length>0){WT.Debug._shutdown=false;WT.Debug.debugLevel=z677c.params['debug'].length;WT.Debug.refresh(true);}else{WT.Debug._shutdown=true;}};this.z0932=function(){var z4cf9=this.z7715[zf9ac.z7df9]['body']['factors'];if(typeof(z4cf9)==='string'){try{z4cf9=JSON.parse(z4cf9);}catch(e){var z740b='Unable to parse factors \''+z4cf9+'\'';WT.Debug.error(z740b,0,e);throw z740b;};}var z0fee=null;for(var zc92c=0;zc92c<z4cf9.length;++zc92c){var f=z4cf9[zc92c];var z8186=f['operation'];try{if(z8186===0){z0fee=this.z0f52(f['name']);if(!z0fee){if(!z677c.params['ignoreMissingFactors']){WT.Debug.error('library/process: unable to load element for id ['+f['name']+'] in page DOM.',0);throw 'DOM element was null.';}else{WT.Debug.debug('library/process: unable to load element for id ['+f['name']+'] in page DOM. Ignoring missing factors.');continue;};};}}catch(e){if(z677c.params['ignoreMissingFactors']){WT.Debug.debug('library/process: unable to locate id ['+f['name']+'] in page DOM, if using nested factors '+'make sure the id has been added to the page in the outer content. Ignoring missing factors.');continue;}WT.Debug.error('library/process: unable to locate id ['+f['name']+'] in page DOM, if using nested factors '+'make sure the id has been added to the page in the outer content.',0,e);throw 'Invalid factor alias.';}try{if(z8186==4){WT.Debug.error('library/process: redirect content operation type is not supported in CAPI. Element id ['+f['name']+'].',0);throw 'Redirect content operation type is not supported.';}}catch(e){z32da.z2d27();WT._fireEvent(new WTEvent(WTEvent.RENDER,WTEvent.STATUS_FAULT,z677c));throw 'Redirect content operation type is not supported.';}try{if(z8186===0){z0fee.innerHTML=f['value'];var x=z0fee.getElementsByTagName('script');for(var z205e=0;z205e<x.length;++z205e){if(typeof x[z205e].src!='undefined'&&x[z205e].src!==null&&x[z205e].src!==''){z32da.zbee98(x[z205e].src,'regular opType');z0fee.removeChild(x[z205e]);}else{z32da._execScript(x[z205e].text);};};}else if(z8186==2||z8186==3){z32da._execScript(f['value']);}if(z8186===5){try{if(f['value']&&f['value'].length!==0){var zd490=JSON.parse(f['value']);var za17e=1;for(var index=0;index<zd490.length;index++){za17e=z32da._selectAndUpdate(zd490[index]['selector'],zd490[index]['op'],zd490[index]['payload']);if(za17e<=0){WT.Debug.debug('_selectAndUpdate:  problem processing tuple  for '+f['name']);};};}else{throw('library/process:  unable to parse action tuples for +'+f['name']);}}catch(zc008){throw('library/process: unable to process actionTuples for '+f['name'],0,zc008);};}WT.Debug.info('library/process: updating factor ['+f['name']+', opCode: '+z8186+'] with level content.');}catch(z676d){WT.Debug.error('library/process: unable to update factor ['+f['name']+'], please review the log for details.',0,z676d);throw 'Error during update of the factors level content.';};}};this.z0f52=function(id){if(z677c.params['selectorEnabled']){try{var selector=z677c.params['selectorFunction'];if(selector===null||selector===''){return z32da.z454c.z0c82(id);}var z4d76=eval(selector);return z4d76(id);}catch(e){WT.Debug.error('custom selector failed, defaulting to standard dynamic selector',0,e);return z32da.z454c.z0c82(id);};}else{return z32da.z454c.z0c82(id);}};this.z6d0e=function(){z677c.z4cc8();if(z677c.params['r_redirectLink']&&!z677c.params['r_safeTrack']){var el=z677c.params['r_redirectLink'];if(el.wt_pending&&el.wt_pending=='true'){WT.Debug.info('error_track: redirecting to last known url ['+el.wt_href+']');el.href=el.wt_href;el.target=el.wt_target;el.wt_pending='';if(typeof(el.wt_target)!=='undefined'&&el.wt_target!==''&&el.wt_target!==null){window.open(el.wt_href,el.wt_target);}else{setTimeout(function(){window.location.href=el.wt_href;},0);};};}};this.z8fe4=function(){this.z019b=zf9ac.za651;var z0dbd=this.z7715[zf9ac.z7df9];if(z0dbd!==null&&typeof z0dbd!='undefined'){var zbd8c=z0dbd['body']['preScript'];if(zbd8c!==null&&typeof zbd8c!='undefined'){try{z32da._execScript(zbd8c);WT.Debug.debug('prerender: prescript executed: '+zbd8c);}catch(e){WT.Debug.error('prerender: prescript failed to execute',0,e);};};}switch(this.params['r_type']){case zf9ac.zbf4a:case zf9ac.z10ca:case zf9ac.z7ffc:case zf9ac.zcf44:this.z0932();break;case zf9ac.z6f4e:case zf9ac.zd4c4:break;default:throw 'prerender: Unknown test type, please verify the run type is supported with this version of the CAPI file.';};};this.z8300=function(za1b5){var z987b=this.z019b===zf9ac.z57b0;this.z019b=zf9ac.z971e;var z9180=this.params['r_cWrapEl'];var z0386=this.z0386;if((this.params['r_type']==zf9ac.z6f4e&&!this.params['r_redirectUrl'])||this.params['r_type']!=zf9ac.z6f4e){if(z9180!==null){if(this.params['defaultUrl']===null||za1b5){WT.Debug.debug('ready to render: test alias ['+this.params['testAlias']+']');}else if(this.params['defaultUrl']!==null){WT.Debug.debug('render: test alias ['+this.params['testAlias']+'] has default url ['+this.params['defaultUrl']+']');};}else{throw 'Unable to locate contentWrapper, skipping render';};}else{WT.Debug.debug('render: test alias ['+this.params['testAlias']+'] has redirect url.');}if(!z1a23.g_Aborted){var z0dbd=this.z7715[zf9ac.z7df9];if(z0dbd!==null&&typeof z0dbd!='undefined'&&!z987b){var zdfc2=z0dbd['body']['postScript'];if(zdfc2!==null&&typeof zdfc2!='undefined'){try{z32da._execScript(zdfc2);WT.Debug.debug('render: postScript executed: '+zdfc2);}catch(e){WT.Debug.error('render: postScript failed to execute',0,e);};};};}};this.z4cc8=function(state){if(this.z7715[state]!==null&&typeof this.z7715[state]!='undefined'){for(var zf64e in this.z7715[state]['params']){this.params[zf64e]=this.z7715[state]['params'][zf64e];};}this.z7cb0();};this.z16ad=function(z8365,z980e,z9ea9){var z0a48=document.cookie.split(';');var z1e14;for(var z205e=0;z205e<z0a48.length;++z205e){var c=[];c[0]=z0a48[z205e].substring(0,z0a48[z205e].indexOf('='));c[1]=z0a48[z205e].substring(z0a48[z205e].indexOf('=')+1);while(c[0].charAt(0)===' '){c[0]=c[0].substring(1,c[0].length);}if(c[0].indexOf(this.params['cookiePrefix'])===0&&c[0].search(z9ea9)!==-1&&c[0].search(z8365)!==-1){z1e14=c[1];break;};}if(z1e14===undefined){return undefined;}z1e14=z32da.z7f69(z1e14,this.params['s_keyToken']);z1e14=JSON.parse(z1e14);return z1e14[z980e];};this.za7ed=function(){var zffce=this.z7715[zf9ac.zb7d1]['body']['cookies'];if(zffce){for(var z7e3d in zffce){if(zffce.hasOwnProperty(z7e3d)){var z764b=this.z7715[zf9ac.zb7d1]['body']['cookies'][z7e3d];this.z0f8a(z7e3d,z764b['value'],z764b['timeout'],z764b['type']);};};}if(this.params['r_redirectUrl']){WT.Debug.info('pageview: redirecting to url ['+this.params['r_redirectUrl']+']');var z12c5=this.params['r_redirectUrl'];setTimeout(0);}};this.conversion=function(){if(this.z7715[zf9ac.zb00a]['body']['cookies']){for(var z7e3d in this.z7715[zf9ac.zb00a]['body']['cookies']){var z764b=this.z7715[zf9ac.zb00a]['body']['cookies'][z7e3d];this.z0f8a(z7e3d,z764b['value'],z764b['timeout'],z764b['type']);};}if(this.params['r_redirectLink']){var el=z677c.params['r_redirectLink'];if(el.wt_pending&&el.wt_pending=='true'){WT.Debug.info('conversion: redirecting to url ['+el.wt_href+']');el.href=el.wt_href;el.target=el.wt_target;el.wt_pending='';if(typeof(el.wt_target)!=='undefined'&&el.wt_target!==''&&el.wt_target!==null){window.open(el.wt_href,el.wt_target);}else{setTimeout(0);};};}};this.zac2c=function(event){try{if(event['params']['eventID']in z67fd){return;}var zac9c=false;var z48c3=true;var z0fee=event['target'];var z9502=WT.optimize.lookup(z0fee['alias']);if(!z9502){if(z1aff!==null){z9502=z1aff;}else{zac9c=true;z9502=new zf9ac(z677c.params,WT);};}else{z48c3=false;}var zb7f7=z9502.params['s_keyToken'];var z4529=z32da.z7f69(z0fee['control'],zb7f7);var z0dbd=JSON.parse(z4529);if(zac9c&&z0dbd['opcode']!=zf9ac.zb00a){throw 'invalid run for control response alias';}if(z0dbd['params']['s_setupID']&&z677c.params['s_setupID']&&z0dbd['params']['s_setupID']!=z677c.params['s_setupID']){return;}z67fd.push(event['params']['eventID']);WT.Debug.trace('control_response: JSON Control Response:\n');WT.Debug.trace(z4529);if(z48c3&&zfe37===0&&z0dbd['totaltests']){zfe37=z0dbd['totaltests'];}if(z0dbd['totaltests']){z9502.params['totaltests']=z0dbd['totaltests'];}if(z48c3&&z1aff!==null&&z9502.params['s_requestType']==='control'&&(z0dbd['opcode']===zf9ac.z7df9||z0dbd['opcode']===zf9ac.z57b0)){z9502=new zf9ac({},WT);z9502.params=z9ff5(z9502.params,z1aff.params,z1aff['intOverrideMap']);z9502.ze63a(z1aff);z9502.params['testAlias']=z0fee['alias'];if(z1aff['intOverrideMap']){z9502['intOverrideMap']=z1aff['intOverrideMap'];}z1a23.g_RunObjList.push(z9502);}if((z9502.params['crossAPI']===true||z9502.params['crossAPI']==='true')&&z0dbd['opcode']===zf9ac.z3a29){var z0bb7=WT.optimize.lookup(z0fee['alias']);if(z0bb7===undefined){var z5313=new zf9ac({},WT);z5313.params=WT.paramsMerge(z5313.params,z0dbd['params']);z5313.ze63a(z1aff);z5313.params['testAlias']=z0fee['alias'];z5313.params['data']=z677c.params['data'];z1a23.g_RunObjList.push(z5313);};}z9502.z7715[z0dbd['opcode']]=z0dbd;var log=z0dbd['body']['log'];if(log){WT.Debug.debug('control_response: JSON Control Response Log:\n'+log);}var zf64e={};zf64e['opcode']=z0dbd['opcode'];zf64e['errorcode']=z0dbd['errorcode'];var zbd8b=z0fee['alias']+z0dbd['opcode']+z0dbd['opstatus'];var z4eb9=false;for(var z205e in z706a){if(zbd8b==z706a[z205e]){z4eb9=true;break;};}if(!z4eb9){if(z0dbd['opcode']==zf9ac.z7df9){z706a.push(zbd8b);}WT._fireEvent(new WTEvent('control_'+z0dbd['opcode'],z0dbd['opstatus'],z9502,zf64e));}}catch(e){WT.Debug.error('control_response: Unable to evaluate control response, see error for details.',0,e);WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,z9502));}};this.zdbe8=function(event){try{if(event['params']['eventID']in z67fd){return;}var z48c3=true;var z0fee=event['target'];var z9502=WT.optimize.lookup(z0fee['alias']);if(!z9502){if(z1aff!==null){z9502=z1aff;}else{throw 'invalid run for control response alias';};}else{z48c3=false;}var zb7f7=z9502.params['s_keyToken'];var z4529=z32da.z7f69(z0fee['control'],zb7f7);var z0dbd=JSON.parse(z4529);if(z0dbd['params']['s_setupID']&&z677c.params['s_setupID']&&z0dbd['params']['s_setupID']!=z677c.params['s_setupID']){return;}z67fd.push(event['params']['eventID']);WT.Debug.trace('control_fault: JSON Fault Control Response\n'+z4529);z9502.z7715[z0dbd['opcode']]=z0dbd;if(z48c3&&z1aff!==null&&z9502.params['s_requestType']==='control'&&(z0dbd['opcode']===zf9ac.z566c||z0dbd['opcode']===zf9ac.z57b0)){z1a23.g_RunObjList.push(z1aff);}var e={};e['message']=z0dbd['body']['message'];e['stack']=z0dbd['body']['exception'];var log=z0dbd['body']['log'];if(log){WT.Debug.debug('control_fault: JSON Control Response Log:\n'+log);}WT.Debug.error('control_fault: JSON Control Response Error',0,e);WT.Debug.debug('control_fault: '+e['stack']);var zf64e={};zf64e['opcode']=z0dbd['opcode'];zf64e['errorcode']=z0dbd['errorcode'];var zbd8b=z0fee['alias']+z0dbd['opcode']+z0dbd['opstatus'];var z4eb9=false;for(var z205e in z706a){if(zbd8b==z706a[z205e]){z4eb9=true;break;};}if(!z4eb9){if(z0dbd['opcode']==zf9ac.z7df9){z706a.push(zbd8b);}WT._fireEvent(new WTEvent('control_'+z0dbd['opcode'],WTEvent.STATUS_FAULT,z9502,zf64e));}}catch(z676d){WT.Debug.error('control_fault: Unable to evaluate control response, see error for details.',0,z676d);WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,z9502));}};this.z95e8();};this._setupParams=function(z8262,params){function zb463(z0735,z0a96,z7922){if(typeof params[z0735]==='undefined'){if(z7922!==undefined&&z7922[z0735]!==undefined){params[z0735]=z7922[z0735];}else{params[z0735]=z0a96;};}};function z27eb(zd6bd){var zc40d=new Object();for(var zac90 in zd6bd){if(typeof zd6bd[zac90]!='undefined'&&zd6bd[zac90]!==null&&zd6bd.hasOwnProperty(zac90)){if(zac90!=='s_requestType'){zc40d[zac90]=zd6bd[zac90];};};}return zc40d;};function zff13(map){var za17e=new Array();for(var z61f3 in map){za17e.push(z61f3);}return za17e;};var z2edc='undefined';if(params['s_requestType']==='conversion'){if(params['s_isInternalCV']===true){z2edc='internal';}else{z2edc='external';};}var z6184=undefined;if(z2edc!=='external'){z6184=WT.optimize.lookup(z8262);if(z6184===undefined){z6184=WT.optimize.lookup('');};}var z7922=undefined;if(z6184!==undefined){z7922=z6184.params;}var z4317=undefined;var za567=undefined;if(z6184!==undefined&&z6184.z4317!==undefined){z4317=z6184.z4317;}else{z4317=z27eb(params);}if(z2edc==='external'){za567=z27eb(params);}zb463('s_wasServerProto','https');zb463('s_wasServer','was.optimize.webtrends.com');zb463('s_wasPreviewDir','/server/ui/scripts/preview/');zb463('s_wasPreviewJS','previewerLoader.js');zb463('s_mode','normal');zb463('s_otsUrl',params['s_pageProtocol']+'://'+params['s_otsServer']+params['s_otsWebApp']+params['s_otsWebAppServlet']+'/js-'+params['s_otsVersion']+'/'+params['s_domainKey']);zb463('s_otsBeaconUrl',params['s_pageProtocol']+'://'+params['s_otsServer']+params['s_otsWebApp']+params['s_otsWebAppServlet']+'/beacon-'+params['s_otsVersion']+'/'+params['s_domainKey']);zb463('s_wasPreviewPath',params['s_wasServerProto']+'://'+params['s_wasServer']+params['s_wasPreviewDir']);zb463('s_wasPreviewUrl',params['s_wasPreviewPath']+params['s_wasPreviewJS']);zb463('s_urlLimit','3450');zb463('s_maxUrl','2040');zb463('s_urlParts',(/MSIE (\d+\.\d+);/.test(navigator.userAgent)));zb463('selectorName','sizzle');if(typeof z8262!='undefined'){zb463('testAlias',z8262);}zb463('cookiePath','/',z7922);zb463('cookieInspection',true,z7922);zb463('cookieConversionCheck',true,z7922);zb463('use3rdPartyCookies',false,z7922);zb463('use1stPartyCookies',true,z7922);zb463('testGroup','default',z7922);zb463('beacon',false,z7922);zb463('data',{},z7922);zb463('cookiePrefix','_wt',z7922);zb463('debug','');zb463('defaultUrl',null,z7922);zb463('ignoreMissingFactors',false,z7922);zb463('lightWeightMode',false,z7922);zb463('crossAPI',false,z7922);zb463('enableCORS',false,z7922);zb463('preRenderConversionEvents',true,z7922);if(params['s_keyToken']===null){WT.Debug.error('\'s_keyToken\' was not provided, loading the page with Webtrends Optimize Technology disabled.',0);WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,params));return undefined;}WT.Debug.debugLevel=params['debug'].length;var z99bf=WT.parseQueryString();var zc72a=null;if(z99bf!==null){zc72a=z99bf['_wt.debug'];var z3ec0=z99bf['_wt.mode'];if((typeof z3ec0!='undefined')&&z3ec0!==null){params['s_mode']=z3ec0;if(z3ec0=='normal'||z3ec0=='staging'){params['s_modeUD']=z3ec0;};};}if((typeof zc72a=='undefined')||zc72a===null){if(params['debug']!==''){zc72a=params['debug'];};}if((typeof zc72a!='undefined')&&zc72a!==null){params['debug']=zc72a;WT.Debug._shutdown=false;WT.Debug.debugLevel=params['debug'].length;WT.Debug.refresh(true);}else{WT.Debug._shutdown=true;}if(params['s_mode']=='preview'||window.name=='WTbrowserIFrame'){z1a23.Preview['g_PreviewOptions']=params;z32da.zbee98(params['s_wasPreviewUrl'],'preview');WT.Debug.info('initialize: using preview mode, aborting testing process.');WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_SUCCESS,params));return undefined;}z32da.z9318a(params['s_domainKey']);if(!z6184){z6184=new zf9ac(params,WT);if(z2edc==='external'){z6184['extOverrideMap']=za567;z6184.params['s_overrideKeys']=zff13(za567);}else{z6184['intOverrideMap']=z4317;z6184.params['s_overrideKeys']=zff13(z4317);}if(params['s_requestType']=='control'){if(typeof z8262!='undefined'&&z8262!==null){z1a23.g_RunObjList.push(z6184);z3065++;}else{z1aff=z6184;}z6184.params['s_setupID']=new Date().getTime()+Math.floor(Math.random()*1000+1);}else{if(z2edc==='external'){z6184.params=z9ff5(z6184.params,params,za567);}else{z6184.params=z9ff5(z6184.params,params,z4317);};};}else{if(z2edc==='external'){z6184['extOverrideMap']=za567;z6184.params['s_overrideKeys']=zff13(za567);z6184.params=z9ff5(z6184.params,params,za567);}else{z6184.params['s_overrideKeys']=zff13(z4317);z6184.params=z9ff5(z6184.params,params,z4317);};}z6184.setup();var z9804=/adobeair\//i;if(params['s_mode']=='none'||z9804.test(navigator.userAgent)){WT.Debug.info('initialize: using mode none/air, aborting testing process.');WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_SUCCESS,z6184));return undefined;}return z6184;};this.paramsMerge=function(z70ef,ze730,z183b){var z9180=z70ef['r_cWrapEl'];z70ef['r_cWrapEl']=null;var params=WT.paramsMerge(z70ef,ze730,z183b);z70ef['r_cWrapEl']=z9180;params['r_cWrapEl']=z9180;return params;};var z9ff5=function(z70ef,ze730,z183b){var z6f78=z70ef;for(var z62dd in ze730){if(typeof ze730[z62dd]!='undefined'&&ze730[z62dd]!==null&&ze730.hasOwnProperty(z62dd)){if(z183b!==undefined&&z183b[z62dd]!==undefined){z6f78[z62dd]=z183b[z62dd];}else{z6f78[z62dd]=ze730[z62dd];};};}return z6f78;};this.z1028=function(event){var zae74=event.target;var zf64e=event['params'];try{if(zf64e['opcode']==WTEvent.ABORT||zf64e['opcode']==WTEvent.z9c02){WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));}else{WT._fireEvent(new WTEvent(zf64e['opcode'],WTEvent.STATUS_FAULT,zae74));}}catch(e){WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));throw e;}};this.ze5d9=function(event){try{var zae74=event.target;var zf64e=event['params'];WT.Debug.debug(event.name+': JSON Invalid Response Page Processing');zae74.z596e(zf64e['opcode']);zae74.z019b=zf9ac.z57b0;WT._fireEvent(new WTEvent(WTEvent.INVALID,WTEvent.STATUS_SUCCESS));z32da.z1dd6(zae74,false);WT._fireEvent(new WTEvent(WTEvent.DONE,WTEvent.STATUS_SUCCESS));}catch(e){WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));throw e;}};this.z3c7c=function(event){var zae74=event.target;var zf64e=event['params'];try{zae74.z4cc8(zf64e['opcode']);var control=zae74.z452a(zf64e['opcode']);var e={};e['message']=control['body']['message'];e['stack']=control['body']['exception'];if(e['message']){WT.Debug.error('error_track: Track Response Error',0,e['message']);}WT.Debug.debug('error_track: '+e['stack']);WT._fireEvent(new WTEvent(control['opcode'],WTEvent.STATUS_FAULT,zae74));zae74.z6d0e();}catch(z676d){WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));throw z676d;}};this.z4708=function(event){var zae74=event.target;var zf64e=event['params'];try{zae74.z4cc8(zf64e['opcode']);WT.Debug.info(event.name+': Page View Track ['+zae74.params['testAlias']+']');WT._fireEvent(new WTEvent(WTEvent.PAGEVIEW,WTEvent.STATUS_SUCCESS,zae74));zae74.za7ed();}catch(e){WT._fireEvent(new WTEvent(WTEvent.PAGEVIEW,WTEvent.STATUS_FAULT,zae74));WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));throw e;}};this.z5b2c=function(event){var zae74=event.target;var zf64e=event['params'];try{zae74.z4cc8(zf64e['opcode']);WT.Debug.info(event.name+': Conversion Track ['+zae74.params['testAlias']+']');WT._fireEvent(new WTEvent(WTEvent.CONVERSION,WTEvent.STATUS_SUCCESS,zae74));zae74.conversion();}catch(e){WT._fireEvent(new WTEvent(WTEvent.CONVERSION,WTEvent.STATUS_FAULT,zae74));WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));throw e;}};this.zede2=function(event){var zae74=event.target;try{WT.Debug.debug(event.name+': JSON Control Response Page Evaluation');zae74.zc52f();WT._fireEvent(new WTEvent(WTEvent.PREPROCESS,WTEvent.STATUS_SUCCESS,zae74));}catch(e){WT._fireEvent(new WTEvent(WTEvent.PREPROCESS,WTEvent.STATUS_FAULT,zae74));WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,e));throw e;}zae74.zf563(true);};var z8e2d=function(key,value){if(key=='r_cWrapEl'||key=='__proto__'){return undefined;}return value;};var z1a52=function(ze1c0,z0f5a,zf61d,zffbc){return function(){WT._removeEventHandler(WTEvent.DOM_READY,arguments.callee);var zc0c1=ze1c0.params['r_cWrapEl'];ze1c0.params=JSON.parse(z0f5a);ze1c0.z7715=JSON.parse(zf61d);ze1c0.z1382=JSON.parse(zffbc);ze1c0.params['r_cWrapEl']=zc0c1;z32da.z76bb(ze1c0);};};this.z348e=function(event){var zae74=event.target;try{WT.Debug.debug(event.name+': JSON Control Response Page Processing');zae74.z596e(zf9ac.z7df9);WT._fireEvent(new WTEvent(WTEvent.PROCESS,WTEvent.STATUS_SUCCESS,zae74));}catch(e){WT._fireEvent(new WTEvent(WTEvent.PROCESS,WTEvent.STATUS_FAULT,zae74));WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,e));throw e;}if(zae74.params['s_pageMode']=='dom'&&!z32da.isReady()){WT.Debug.debug(event.name+': delayed execution waiting for dom_ready');var z0f5a=JSON.stringify(zae74.params,z8e2d);var zf61d=JSON.stringify(zae74.z7715,z8e2d);var zffbc=JSON.stringify(zae74.z1382,z8e2d);WT._addEventHandler(WTEvent.DOM_READY,z1a52(zae74,z0f5a,zf61d,zffbc));}else if(zae74.params['s_pageMode']=='onload'&&!z32da.isLoaded()){WT.Debug.debug(event.name+': delayed execution waiting for dom_onload');var ze025=JSON.stringify(zae74.params,z8e2d);var za867=JSON.stringify(zae74.z7715,z8e2d);var zd140=JSON.stringify(zae74.z1382,z8e2d);WT._addEventHandler(WTEvent.DOM_ONLOAD,z1a52(zae74,ze025,za867,zd140));}else{z32da.z76bb(zae74);}};this._initialize=function(zf64e){try{var params=z1a23._capiParams(zf64e);z1a23.g_ParamsList.push(params);if(WT.hasVal(params['r_redirectLink'])&&WT.hasVal(params['testAlias'])){var z677c=WT.optimize.lookup(params['testAlias']);if(WT.hasVal(z677c)){z677c.params['r_redirectLink']=params['r_redirectLink'];};}WT.Debug.debug('initialize: Preparing to Optimize');WT.fireEvent(new WTEvent(WTEvent.INITIALIZE,WTEvent.STATUS_SUCCESS,params));z32da._setupParams(params['testAlias'],params);}catch(e){WT.Debug.error('initialize: error during framework setup.',147,e);WT.fireEvent(new WTEvent(WTEvent.INITIALIZE,WTEvent.STATUS_FAULT,params));WT.fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,params));}};this.zd78e=function(event){var zae74=event.target;try{WT.Debug.debug(event.name+': JSON Control Response Conversion Event Processing');WT._fireEvent(new WTEvent(WTEvent.PRECONVERSIONEVENT,WTEvent.STATUS_SUCCESS,zae74));}catch(e){WT._fireEvent(new WTEvent(WTEvent.PRECONVERSIONEVENT,WTEvent.STATUS_FAULT,zae74));}var z224f=function(z9e4a,z0b55){var z3eb2=JSON.stringify(z0b55.z7715[zf9ac.z3a29]);return function(){z0b55.z7715[zf9ac.z3a29]=JSON.parse(z3eb2);WT._removeEventHandler(z9e4a,arguments.callee);z32da.ze2b3(z0b55);};};if(zae74.params['s_pageMode']=='dom'&&!z32da.isReady()){WT.Debug.debug(event.name+': delayed execution waiting for dom_ready');WT._addEventHandler(WTEvent.DOM_READY,z224f(WTEvent.DOM_READY,zae74));}else if(zae74.params['s_pageMode']=='onload'&&!z32da.isLoaded()){WT.Debug.debug(event.name+': delayed execution waiting for dom_onload');WT._addEventHandler(WTEvent.DOM_ONLOAD,z224f(WTEvent.DOM_ONLOAD,zae74));}else{z32da.ze2b3(zae74);}};this.ze2b3=function(zae74){try{zae74.zee58();WT._fireEvent(new WTEvent(WTEvent.CONVERSIONEVENT,WTEvent.STATUS_SUCCESS,zae74));}catch(e){WT.Debug.error('Error:  conversionEvent() failed because of \''+e+'\'');WT._fireEvent(new WTEvent(WTEvent.CONVERSIONEVENT,WTEvent.STATUS_FAULT,zae74));}};this.z76bb=function(zae74){try{if(!z1a23.g_Aborted){zae74.z8fe4();}WT._fireEvent(new WTEvent(WTEvent.PRERENDER,WTEvent.STATUS_SUCCESS,zae74));}catch(e){WT._fireEvent(new WTEvent(WTEvent.PRERENDER,WTEvent.STATUS_FAULT,zae74));WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));return;}z32da.z1dd6(zae74,true);};this.z1dd6=function(zae74,zb803){try{zae74.z8300(zb803);WT._fireEvent(new WTEvent(WTEvent.RENDER,WTEvent.STATUS_SUCCESS,zae74));}catch(e){WT._fireEvent(new WTEvent(WTEvent.RENDER,WTEvent.STATUS_FAULT,zae74));WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));return;}z32da.z2d27();if(zb803){try{zae74.track('pageview');}catch(z676d){WT.Debug.error('render/track: unable to track pageview for run',0,z676d);};}else if(zae74.params['defaultUrl']&&zae74.params['defaultUrl']!==null){WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_SUCCESS,zae74));}};this.z2d27=function(){try{var zfbf0=true;var ze107=0;if(z1aff!==null&&(z1a23.g_RunObjList.length<z3065+zfe37)){zfbf0=false;}else{for(var z205e=0;z205e<z1a23.g_RunObjList.length;++z205e){var r=z1a23.g_RunObjList[z205e];if(r.z019b!=zf9ac.z3a29&&r.z019b!=zf9ac.z971e&&r.z6848!=zf9ac.z3064){zfbf0=false;break;}else if(r.z6848==zf9ac.z3064){ze107++;};};}if(zfbf0){z1a23.g_PageEndTime=new Date();if(z1a23.g_PageTimer){clearTimeout(z1a23.g_PageTimer);WT.Debug.info('done: clearing active timer, all runs are complete ['+z1a23.g_PageEndTime+']');}else{WT.Debug.info('done: no active timer found, all runs are complete ['+z1a23.g_PageEndTime+']');}if(ze107===z1a23.g_RunObjList.length&&ze107===0){WT.hideAndShow(document.body,z1a23.g_ConfigParams['s_pageDisplayMode'],true,z1a23.g_ConfigParams['overlayColor']);WT._fireEvent(new WTEvent(WTEvent.DONE,WTEvent.STATUS_SUCCESS));}else if(ze107===z1a23.g_RunObjList.length){WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT));}else{var zd9f2=0;for(var ze893=0;ze893<z1a23.g_RunObjList.length;++ze893){var z2945=z1a23.g_RunObjList[ze893];var z9180=z2945.params['r_cWrapEl']||document.body;if(z2945.params['totaltests']){zd9f2=zd9f2>z2945.params['totaltests']?zd9f2:z2945.params['totaltests'];}if(z2945&&z9180){try{if(!z2945.params['r_redirectUrl']){WT.hideAndShow(z9180,z2945.params['s_pageDisplayMode'],true,z2945.params['overlayColor']);WT.Debug.debug('render: test alias ['+z2945.params['testAlias']+']');}else{WT.Debug.debug('render: test alias ['+z2945.params['testAlias']+'] splitPage will render redirectUrl');}}catch(e){WT.Debug.debug('render: error occurred on a render of test alias ['+z2945.params['testAlias']+']');};};}if(zd9f2==z1a23.g_RunObjList.length&&z1a23.g_done!==true){if(ze107>0){WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_SUCCESS));}else{WT._fireEvent(new WTEvent(WTEvent.DONE,WTEvent.STATUS_SUCCESS));};};};}}catch(e){WT._fireEvent(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,e));WT._fireEvent(new WTEvent(WTEvent.DONE,WTEvent.STATUS_FAULT,e));}};this.zc58a=var zd255={};zd255.zeddd='edit_content';zd255.z1956='edit_css';zd255.zff32='edit_attr';zd255.MOVE='move';zd255.RESIZE='resize';zd255.z4cf5='insert';zd255.z0d3f='rearrange';zd255.z1f7b='remove';this.z6c8b=function(z1334,zeb4a){var parent=z1334.parentNode;var za17e=parent.insertBefore(zeb4a,z1334);if(!za17e){throw 'failed to insert';}};this.ze02d=function(z1334,zeb4a){var nextSibling=z1334.nextSibling;var za17e=null;if(nextSibling){za17e=z1334.parentNode.insertBefore(zeb4a,nextSibling);}else{za17e=z1334.parentNode.appendChild(zeb4a);}if(!za17e){throw 'failed to append';}};this.zd713=this.z850d=this.z8849=function(z105e,z3014){if(!z105e||!z3014){throw 'invalid elementType or properties';}var zccf6=null;if(z105e==='javascript'){zccf6=document.createElement('script');if(!z3014['type']){zccf6['type']='text/javascript';};}else{zccf6=document.createElement(z105e);}for(var zac90 in z3014){if(z3014.hasOwnProperty(zac90)){if(z105e==='style'&&zac90==='styleText'){zccf6.type='text/css';if(typeof(zccf6.styleSheet)!=='undefined'&&typeof(zccf6.styleSheet.cssText)!=='undefined'){zccf6.styleSheet.cssText=z3014[zac90];}else{var z9329=document.createTextNode(z3014[zac90]);zccf6.appendChild(z9329);}}else if(z105e==='javascript'&&zac90==='content'){zccf6['text']=z3014[zac90];}else if(zac90==='content'){zccf6['innerHTML']=z3014[zac90];}else{zccf6[zac90]=z3014[zac90];};};}return zccf6;};this.z53ce={'before':z32da.z6c8b,'after':z32da.ze02d,'prepend':z32da.zd713,'append':z32da.z850d};var zbb49=function(id,z61e6,target,success){var payload=JSON.stringify(z61e6);if(success===false){WT.Debug.error('_selectAndUpdate: failed to update \''+id+'\' with \''+payload+'\' on \''+target+'\'');}else{WT.Debug.trace('_selectAndUpdate: updated \''+id+'\' with \''+payload+'\' on \''+target+'\'');}};this._selectAndUpdate=function(zd6c2,zf14e,payload){var z9b65=function(za221){var za17e=selector(za221);if(!za17e){throw 'No res for'+za221;}if(za17e.length!==1){throw 'res length !== 1 for selector: '+za221;}return za17e[0];};if(!zd6c2||!zf14e){throw 'invalid params selectorStr: '+zd6c2+'\' with op: \''+zf14e+'\' and payload: \''+JSON.stringify(payload)+'\'';}if((typeof(payload)==='undefined'||payload===null)&&zf14e!==zd255.z1f7b){throw 'payload is \'undefined\' or \'null\'';}WT.Debug.debug('_selectAndUpdate: \''+zd6c2+'\' with op: \''+zf14e+'\' and payload: \''+JSON.stringify(payload)+'\'');var selector=WT.getSelector();var z2cd5=selector(zd6c2);if(!z2cd5||z2cd5.length===0){WT.Debug.debug('_selectAndUpdate: selectorStr result is empty');return 0;}for(var index=0;index<z2cd5.length;++index){try{switch(zf14e){case zd255.zeddd:z2cd5[index].innerHTML=payload;break;case zd255.z1956:case zd255.MOVE:case zd255.RESIZE:zee875(payload,z2cd5[index]);break;case zd255.zff32:for(var z2ba4 in payload){if(payload.hasOwnProperty(z2ba4)){try{z2cd5[index][z2ba4]=payload[z2ba4];z2cd5[index].setAttribute(z2ba4,payload[z2ba4]);zbb49(z2ba4,payload[z2ba4],z2cd5[index],true);}catch(e){zbb49(z2ba4,payload[z2ba4],z2cd5[index],false);};};}break;case zd255.z4cf5:if(!payload['action']){throw 'No action in payload='+JSON.stringify(payload);}if(!payload['properties']){throw 'No \'properties\' in payload='+JSON.stringify(payload);}if(!payload['elementType']){throw 'No \'elementType\' in payload='+JSON.stringify(payload);}var zf8c9=payload['action'];var z161e=z9b65(zd6c2);var zfe69=z32da.z8849(payload['elementType'],payload['properties']);z32da.z53ce[zf8c9](z161e,zfe69);break;case zd255.z0d3f:if(typeof(payload)==='undefined'||payload===null){throw 'invalid payload';}if(!payload['action']){throw 'No action in payload='+JSON.stringify(payload);}if(!payload['refElSelector']){throw 'No refElSelector in payload='+JSON.stringify(payload);}var zcc74=payload['action'];var z4dcd=z9b65(zd6c2);var zce579=z9b65(payload['refElSelector']);z32da.z53ce[zcc74](z4dcd,zce579);break;case zd255.z1f7b:z2cd5[index].parentNode.removeChild(z2cd5[index]);break;default:throw('Invalid Op');};}catch(e){WT.Debug.error('Error handling selectorStr: '+zd6c2+' with op: '+zf14e+' and payload: '+payload,0,e);return-1;};}return z2cd5.length;};this._comm=function(url,payload,desc,z692b,ze4edb,z2ee3,errorHandler){var z98b3=function(z3d59){WT.Debug.trace('_comm: handling response=\''+z5cfb['responseText']+'\'');if(z2ee3){z2ee3(z3d59);}else{z32da._execScript(z3d59);}};var ze8df=function(z062c,zc9fe,url,payload){if(errorHandler){return errorHandler;}else if(url&&payload){return function(){WT.Debug.debug('Failed xhr/xdr ... retry w/ basic protocol');z32da.zbee98(url+payload,'_comm');};}else{return function(){WT.Debug.error(z062c,135);var target={};target['name']='commError';target['productName']='optimize';WT.fireEvent(new WT.Event(WTEvent.ABORT,WTEvent.STATUS_FAULT,target));};}};var z3628=function(){try{if(z5cfb.status===200){switch(z5cfb.readyState){case 0:case 1:case 2:case 3:WT.Debug.superfine('_comm:  in progress, state: '+z5cfb.readyState);break;case 4:WT.Debug.debug('_comm:  response received');z98b3(z5cfb['responseText'],'_comm xhrRespHandler response');break;default:WT.Debug.debug('_comm: unusual readyState='+z5cfb.readyState);break;};}else if(z5cfb.readyState===4&&z5cfb.status!==200){var zac48='_comm xhrResponseHandler:  communication error, http(cor) status: '+z5cfb.status+', ots resp: \''+z5cfb['responseText']+'\'';throw zac48;}}catch(e){ze8df(e)();}};var z8ffd=function(){WT.Debug.trace('xdrRespHandler response=\''+z5cfb['responseText']+'\'');z98b3(z5cfb['responseText'],'xdrRespHandler response');};var z2a45b=function(src){z5cfb=new XMLHttpRequest();z5cfb['open']('GET',src,true);z5cfb['onreadystatechange']=z3628;z5cfb['send'](JSON.stringify(data));};try{var z5cfb;var data={};if('withCredentials' in new XMLHttpRequest()&&z692b){WT.Debug.debug('CORS supported, attempting XHR');data['payload']=payload?payload:'';data['url']=ze4edb?ze4edb:window.location.href.split('#')[0];z5cfb=new XMLHttpRequest();z5cfb['open']('POST',url,true);z5cfb['withCredentials']='true';z5cfb['onreadystatechange']=z3628;z5cfb['send'](JSON.stringify(data));}else if(typeof XDomainRequest!=='undefined'&&z692b){WT.Debug.debug('CORS supported, attempting XDR');data['referer']=window.location.href?window.location.href:'';data['payload']=payload?payload:'';z5cfb=new XDomainRequest();z5cfb['open']('POST',url);z5cfb['onload']=z8ffd;z5cfb['ontimeout']=ze8df('_comm timeout',true,url,payload);z5cfb['onerror']=ze8df('_comm error',true,url,payload);z5cfb['send'](JSON.stringify(data));}else{WT.Debug.debug('No CORS Support or Disabled, using basic protocol');z2a45b(url+payload);}WT.Debug.debug('_comm request:  '+desc);WT.Debug.trace('_comm url:  '+url);WT.Debug.superfine('_comm payload:  '+payload);}catch(e){ze8df(e,true,url,payload)();}};var zee875=function(payload,z5ad13){var trim=WT.common.trim;var z3b3c1=WT.common.extendObject(payload);z3b3c1.forEach(function(z4a739,z772cd){try{var ze0ac8=z4a739.split('!important');var zbec35=(ze0ac8.length>1);var z78e36=trim(ze0ac8[0]);if(zbec35&&z5ad13['style'].setProperty){z5ad13['style'].setProperty(z772cd,z78e36,'important');}else{z5ad13['style'][z772cd]=zbec35?z78e36:z4a739;}zbb49(z772cd,z4a739,z5ad13,true);}catch(e){zbb49(z772cd,z4a739,z5ad13,false);}});};this.zbee98=function(src,z740b,zae74){var zbade={};zbade['type']='text/javascript';zbade['async']='true';zbade['defer']='true';zbade['onerror']=function(){WT.Debug.error('failing on ... '+z740b);WT._fireEvent(new WTEvent(WTEvent.z9c02,WTEvent.STATUS_FAULT,zae74));};zbade['src']=src;setTimeout(function(){z32da._createElement('script',zbade,null,document.getElementsByTagName('head')[0]);},0);};this._createElement=function(type,zbade,zfce9,parent,z9520){if(!z9520){if(parent){z9520=parent.ownerDocument;}if(!z9520){z9520=document;};}var n=z9520.createElement(type);if(zbade){for(var z205e in zbade){if(z205e=='onerror'){n['onerror']=zbade[z205e];}else{n.setAttribute(z205e,zbade[z205e]);};};}if(zfce9){for(var e in zfce9){if(zfce9[e]&&zfce9.hasOwnProperty(e)){WT._addDOMEvent(n,e,zfce9[e]);};};}if(parent){parent.appendChild(n);}return n;};this._execScript=function(z8ad6,local){try{if(!z8ad6||z8ad6.length===0||z8ad6===''){return null;}if(local){return eval(z8ad6);}if(window.execScript){return window.execScript(z8ad6);}else{return window.eval(z8ad6);}}catch(e){WT.Debug.error('error during execScript:\n'+z8ad6,0,e);throw e;}};this.z31a9=function(){var z8a22=new Date();return-z8a22.getTimezoneOffset()/60;};this.zcc1d=function(z086a,z245d){if(z086a===null||z086a.length<8){return undefined;}var z87de='';for(var z205e=0;z205e<z245d.length;++z205e){z87de+=z245d.charCodeAt(z205e).toString();}var z17c3=Math.floor((z87de.length-1)/5);var zf94e=z87de.charAt(z17c3)+z87de.charAt(z17c3*2)+z87de.charAt(z17c3*3)+z87de.charAt(z17c3*4)+z87de.charAt(z17c3*5);var zf434=parseInt(zf94e,10);var z13c5=Math.round(z245d.length/2);var z8739=Math.pow(2,31)-1;var z2d2e=parseInt(z086a.substring(z086a.length-8,z086a.length),16);z086a=z086a.substring(0,z086a.length-8);z87de+=z2d2e;z87de=(zf434*z87de+z13c5)%z8739;var z9fbe=[];for(var zc383=0;zc383<z086a.length;zc383+=2){var za9e3=parseInt(parseInt(z086a.substring(zc383,zc383+2),16)^Math.floor((z87de/z8739)*255),10);z9fbe.push(String.fromCharCode(za9e3));z87de=(zf434*z87de+z13c5)%z8739;}return z9fbe.join('');};this.zcdd3=function(z086a,z245d){if(z086a===null){return null;}var z87de='';for(var z205e=0;z205e<z245d.length;++z205e){z87de+=z245d.charCodeAt(z205e).toString();}var z17c3=Math.floor((z87de.length-1)/5);var zf94e=z87de.charAt(z17c3)+z87de.charAt(z17c3*2)+z87de.charAt(z17c3*3)+z87de.charAt(z17c3*4)+z87de.charAt(z17c3*5);while(zf94e.length>0&&zf94e.charAt(0)==='0'){zf94e=zf94e.substring(1,zf94e);}var zf434=parseInt(zf94e,10);var z13c5=Math.ceil(z245d.length/2);var z8739=Math.pow(2,31)-1;if(zf434<2){return null;}var z2d2e=Math.round(Math.random()*1000000000)%100000000;z87de+=z2d2e;z87de=(zf434*z87de+z13c5)%z8739;var z9fbe=[];for(var zc383=0;zc383<z086a.length;++zc383){var za9e3=parseInt(z086a.charCodeAt(zc383)^Math.floor((z87de/z8739)*255),10);if(za9e3<16){z9fbe.push('0');}z9fbe.push(za9e3.toString(16));z87de=(zf434*z87de+z13c5)%z8739;}z2d2e=z2d2e.toString(16);while(z2d2e.length<8){z2d2e='0'+z2d2e;}z9fbe.push(z2d2e);return z9fbe.join('');};this.z71df=function(z99ed,zd8e5){if(z99ed.length===0)return('');var z2455=this.zab5b(this.zeab2(z99ed));if(z2455.length<=1)z2455[1]=0;var z8836=this.zab5b(this.zeab2(zd8e5).slice(0,16));var n=z2455.length;var z=z2455[n-1],y=z2455[0],z76a7=0x9e3779b9;var z6b04,e,z191f=Math.floor(6+52/n),z20b6=0;while(z191f-->0){z20b6+=z76a7;e=z20b6>>>2&3;for(var zf64e=0;zf64e<n;++zf64e){y=z2455[(zf64e+1)%n];z6b04=(z>>>5^y<<2)+(y>>>3^z<<4)^(z20b6^y)+(z8836[zf64e&3^e]^z);z=z2455[zf64e]+=z6b04;};}var z8fbf=this.z42f0(z2455);return 'WT3'+this.z76c3(z8fbf);};this.z7f69=function(z8fbf,zd8e5){z8fbf=z8fbf.substring(3);if(z8fbf.length===0)return('');var z2455=this.zab5b(this.zbc09(z8fbf));var z8836=this.zab5b(this.zeab2(zd8e5).slice(0,16));var n=z2455.length;var z=z2455[n-1],y=z2455[0],z76a7=0x9e3779b9;var z6b04,e,z191f=Math.floor(6+52/n),z20b6=z191f*z76a7;while(z20b6!==0){e=z20b6>>>2&3;for(var zf64e=n-1;zf64e>=0;zf64e--){z=z2455[zf64e>0?zf64e-1:n-1];z6b04=(z>>>5^y<<2)+(y>>>3^z<<4)^(z20b6^y)+(z8836[zf64e&3^e]^z);y=z2455[zf64e]-=z6b04;}z20b6-=z76a7;}var z99ed=this.z42f0(z2455);z99ed=z99ed.replace(/\0+$/,'');return this.zbbb3(z99ed);};this.zab5b=function(z4529){var zf3ec=new Array(Math.ceil(z4529.length/4));for(var z205e=0;z205e<zf3ec.length;++z205e){zf3ec[z205e]=z4529.charCodeAt(z205e*4)+(z4529.charCodeAt(z205e*4+1)<<8)+(z4529.charCodeAt(z205e*4+2)<<16)+(z4529.charCodeAt(z205e*4+3)<<24);}return zf3ec;};this.z42f0=function(zf3ec){var a=new Array(zf3ec.length);for(var z205e=0;z205e<zf3ec.length;++z205e){a[z205e]=String.fromCharCode(zf3ec[z205e]&0xff,zf3ec[z205e]>>>8&0xff,zf3ec[z205e]>>>16&0xff,zf3ec[z205e]>>>24&0xff);}return a.join('');};this.z83d6='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_~';this.z951d='~';this.z76c3=function(z086a,z486f){z486f=(typeof z486f=='undefined')?false:z486f;var z6fa3,zf9f4,zdf93,z4c4a,z72b4,zee84,za166,za073,e=[],z2023='',c,z9786,za6c8;var zf054=this.z83d6;z9786=z486f?this.zeab2(z086a):z086a;c=z9786.length%3;if(c>0){while(c++<3){z2023+=this.z951d;z9786+='\0';};}for(c=0;c<z9786.length;c+=3){z6fa3=z9786.charCodeAt(c);zf9f4=z9786.charCodeAt(c+1);zdf93=z9786.charCodeAt(c+2);z4c4a=z6fa3<<16|zf9f4<<8|zdf93;z72b4=z4c4a>>18&0x3f;zee84=z4c4a>>12&0x3f;za166=z4c4a>>6&0x3f;za073=z4c4a&0x3f;e[c/3]=zf054.charAt(z72b4)+zf054.charAt(zee84)+zf054.charAt(za166)+zf054.charAt(za073);}za6c8=e.join('');za6c8=za6c8.slice(0,za6c8.length-z2023.length)+z2023;return za6c8;};this.zbc09=function(z086a,z0963){z0963=(typeof z0963=='undefined')?false:z0963;var z6fa3,zf9f4,zdf93,z72b4,zee84,za166,za073,z4c4a,d=[],z9786,za6c8;var zf054=this.z83d6;za6c8=z0963?this.zbbb3(z086a):z086a;for(var c=0;c<za6c8.length;c+=4){z72b4=zf054.indexOf(za6c8.charAt(c));zee84=zf054.indexOf(za6c8.charAt(c+1));za166=zf054.indexOf(za6c8.charAt(c+2));za073=zf054.indexOf(za6c8.charAt(c+3));z4c4a=z72b4<<18|zee84<<12|za166<<6|za073;z6fa3=z4c4a>>>16&0xff;zf9f4=z4c4a>>>8&0xff;zdf93=z4c4a&0xff;d[c/4]=String.fromCharCode(z6fa3,zf9f4,zdf93);if(za073==0x40)d[c/4]=String.fromCharCode(z6fa3,zf9f4);if(za166==0x40)d[c/4]=String.fromCharCode(z6fa3);}z9786=d.join('');return z0963?this.zbbb3(z9786):z9786;};this.zeab2=function(zd28f){var z5554=zd28f.replace(/[\u0080-\u07ff]/g,;z5554=z5554.replace(/[\u0800-\uffff]/g,;return z5554;};this.zbbb3=function(z5554){var zd28f=z5554.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,;zd28f=zd28f.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,;return zd28f;};this.isReady=this.isLoaded=this.z95e8();};WT.optimize.Preview={};if(typeof(WT.optimize.Library)==='undefined'){WT.optimize.Library=new WT.optimize.zd67f(WT.optimize);}WT.optimize.Library.z454c=function(){var z4fb7=function(zbcb4,zd3b2){for(var z205e=0,length=zd3b2.length;z205e<length;++z205e){if(zd3b2[z205e]===zbcb4){return z205e;};}return-1;};var z0ff6=function(zbcb4){var children=[];var z6fb5=zbcb4.firstChild;while(z6fb5){if(z6fb5.nodeType===1&&z6fb5!==zbcb4){children.push(z6fb5);}z6fb5=z6fb5.nextSibling;}return children;};var z8661=var z41d4=var za4ce=var z31fc=function(el){if(el.id){return '#'+el.id;}else{return el.tagName.toLowerCase()+'['+z8661(el)+']';}};var z1e66=function(zbcb4){if(typeof zbcb4==='string'){return zbcb4.match(/\[|#|\//)?WT.optimize.Library.z454c.z0c82(zbcb4):z41d4(zbcb4);}else{return zbcb4;}};return{z3e34:function(zbcb4){var zc60b=[];var za720=zbcb4;while(za720){zc60b.push(z31fc(za720));if(za720.id){break;}za720=za720.parentNode;}zc60b.reverse();return zc60b.join('/');},z0c82:function(zeacd){var zc42b=null;if(zeacd.match(/[#\[\]$]/)){var z2605=zeacd.split('/');for(var z205e=0;z205e<z2605.length;++z205e){var id=z2605[z205e].match(/(?:#)(.+?)(?=\[|$)/);var index=z2605[z205e].match(/(?:\[)(.+)(?=\])/);var tagName=z2605[z205e].match(/^.+?(?=#|\[)/);if(id){zc42b=z41d4(id[1]);if(!zc42b){return null;};}if(zc42b&&index){zc42b=z0ff6(zc42b)[index[1]];if(!zc42b||zc42b.nodeName.toLowerCase()!=tagName[0]){return null;};}if(!zc42b){if(tagName){zc42b=za4ce(tagName[0]);}else{return null;};};};}else{zc42b=z41d4(zeacd);}return zc42b;}};}();WT.optimize.Library.z58a85=function(){var hostname=document.location.hostname;var zb13a=hostname;if(hostname.indexOf('www.')===0){zb13a=hostname.replace('www.','');}return zb13a;};WT.optimize.conversion=function(za69d,external){var params={};try{if(WT.optimize.g_Aborted){WT.Debug.error('conversion: Aborted due to prior error. See previous debug output for details',143);return true;}if(typeof(za69d)==='object'){params=WT.paramsMerge(za69d);}params['s_requestType']='conversion';var z7da5=function(){var z22f8=WT.common.TrackingPipeline;var message=WT.common.Message;var z02b4=(function(){var zae74=WT.optimize.lookup(params['testAlias']);if(!WT.hasVal(zae74))throw new Error('No run available for testAlias:'+params['testAlias']);var payload=new WT.optimize.PayloadBuilder();payload.set('opt.conversion_point',params['conversionPoint']);if(typeof(za69d['eventType'])!=='undefined'&&za69d['eventType']===1){payload.z35cbc(params);}else{if(zae74['params']['guid']){payload.zb096f(zae74['params']['guid']).z3965a(zae74['params']['r_type']).z3d54a(zae74['params']['r_testID']).zd871a(zae74['params']['r_runID']).zb63c5(zae74['params']['r_runState']).z6cdf8(zae74['params']['s_domainKey']);if(WT.hasVal(zae74['params']['r_experimentID'])&&zae74['params']['r_experimentID']!==''){payload.z9d870(zae74['params']['r_experimentID']);}if(WT.hasVal(zae74['params']['r_personalizedID'])&&zae74['params']['r_personalizedID']!==''){payload.z9d870(zae74['params']['r_personalizedID']);}if(WT.hasVal(za69d['userDefinedParams']&&WT.hasVal(za69d['userDefinedParams']['data'])&&WT.hasVal(za69d['userDefinedParams']['data']['externalUID']))){payload.set('opt.external_uid',za69d['userDefinedParams']['data']['externalUID']);};}else{WT.Debug.debug('Falling back to cookie for '+params['testAlias']);var z5b85c=WT.optimize.Library.z1467e(params['testAlias']);payload.z35cbc(z5b85c);};}payload.set('WT.dl',WT.hasVal(params['WT.dl'])?params['WT.dl']:1);try{return payload.z35926();}catch(e){WT.Debug.debug('Payload Error:'+e['message']);return{};}})();var size=WT.common.extendObject(z02b4).length();if(size>0){var z7adc1=new message({'endpoints':[],'desc':'optimize conversion','payload':{},'mutation':{'conversion':true}});WT.common.extendObject(z02b4).forEach(;z22f8.enqueue(z7adc1);}else{WT.Debug.debug('Not sending data to common collection for '+WT.common.JSONPrettify(params));}};if(typeof(za69d['eventType'])==='undefined'||(typeof(za69d['eventType'])!=='undefined'&&za69d['eventType']!==1)){WT.removeEventHandler(WT.Event.CONTROL_RESPONSE);if(!WT.optimize.g_ConfigLoaded){var z0fee=this;WT.addEventHandler(WTEvent.CAPI_CONFIG,;}else{this.Library._initialize(params);}}if(!external){z7da5();}return false;}catch(e){WT.Debug.error('Fatal error during conversion.',144,e);var event=new WT.Event((e.zbee9?e.zbee9:WT.Event.ABORT),WT.Event.STATUS_FAULT,this);event.params['error']=e;WT.fireEvent(event);return true;}};WT.fireEvent(new WTEvent(WTEvent.zd938,WTEvent.STATUS_SUCCESS),true);WT.setExecuteState('optimize','ready');
