"use strict";(self.webpackChunkpiano_id_ui=self.webpackChunkpiano_id_ui||[]).push([[749],{11530:function(e,t,s){s.d(t,{i:function(){return o}});var i=s(38583),n=s(37716),r=s(11093);let o=(()=>{class e{constructor(e,t,s){this.renderer=e,this.postMessage=t,this.documentRef=s}ngAfterViewInit(){const e=this.documentRef.body;setTimeout(()=>{this.renderer.removeClass(e,"inside-checkout"),this.postMessage.send("layoutReady",{width:e.clientWidth,height:e.clientHeight})}),this.hidePreloader()}hidePreloader(){const e=this.documentRef.body;e.classList.contains("preload")&&e.classList.remove("preload"),setTimeout(()=>{const e=this.documentRef.createElement("style");e.innerHTML="\n    .preloader {\n      display: none !important;\n    }\n    app-main {\n      display: block !important;\n    }\n    ",this.documentRef.head.appendChild(e)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.Qsj),n.Y36(r.FL7),n.Y36(i.K0))},e.\u0275dir=n.lG2({type:e}),e})()},43687:function(e,t,s){s.d(t,{J1:function(){return i.J},Sc:function(){return n.S}}),s(36127),s(63393);var i=s(45734),n=s(58245)},36127:function(e,t,s){s.d(t,{D:function(){return i}});const i=new(s(37716).OlP)("Layout")},63393:function(e,t,s){s.d(t,{w:function(){return h}});var i=s(37716),n=s(11093),r=s(36127),o=s(58245),a=s(38583);function c(e,t){1&e&&i.Hsn(0,0,["*ngIf","!resolved"])}function u(e,t){if(1&e&&(i.TgZ(0,"div",2),i._uU(1),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Oqu(e.error)}}const l=["*"];let h=(()=>{class e{constructor(e,t,s,n,r,o){this.resolve=e,this.viewContainer=t,this.renderer=s,this.postMessage=n,this.factoryResolver=r,this.layoutComponent=o,this.layoutLoaded=new i.vpe,this.resolved=!1}ngOnInit(){this.resolve.getMainExternalCss().then(e=>e&&this.applyExternalCss(e)).then(()=>this.applyLayout()).catch(e=>{this.resolved=!0,console.error(e),this.error=e})}applyExternalCss(e){e.forEach(n.I6o.load)}applyLayout(){this.resolved=!0,this.viewContainer.clear();const e=this.factoryResolver.resolveComponentFactory(this.layoutComponent);this.viewContainer.createComponent(e),this.layoutLoaded.emit()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.S),i.Y36(i.s_b),i.Y36(i.Qsj),i.Y36(n.FL7),i.Y36(i._Vd),i.Y36(r.D))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-resolve-outlet"]],outputs:{layoutLoaded:"layoutLoaded"},ngContentSelectors:l,decls:5,vars:2,consts:[[4,"ngIf"],["class","system-error",4,"ngIf"],[1,"system-error"]],template:function(e,t){1&e&&(i.F$t(),i._uU(0,"\n    "),i.YNc(1,c,1,0,"ng-content",0),i._uU(2,"\n    "),i.YNc(3,u,2,1,"div",1),i._uU(4,"\n  ")),2&e&&(i.xp6(1),i.Q6J("ngIf",!t.resolved),i.xp6(2),i.Q6J("ngIf",t.error))},directives:[a.O5],encapsulation:2}),e})()},45734:function(e,t,s){s.d(t,{J:function(){return l}});var i=s(37716),n=s(38583),r=s(58245),o=s(11093),a=s(36127),c=s(53629),u=s(3679);let l=(()=>{class e{static forRoot(t,s){return{ngModule:e,providers:[r.S,o.VHq,{provide:o.r2V,useValue:t},{provide:a.D,useValue:s},{provide:i.deG,useValue:s,multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[r.S,o.VHq,o.zcL,{provide:o.zcL,useClass:c.N.mock?o.V7R:o.zcL},{provide:o.r2V,useValue:void 0}],imports:[[n.ez,u.u5,u.UX]]}),e})()},58245:function(e,t,s){s.d(t,{S:function(){return a}});var i=s(11093),n=s(93342),r=s(37716),o=s(91841);let a=(()=>{class e{constructor(e,t,s,r,o,a,c,u,l){this.params=e,this.http=t,this.config=s,this.consent=r,this.templateTokenService=o,this.script=a,this.lang=c,this.settings=u,this.designVersionService=l,this.noCustomfieldsHandle=e=>{if(this.params.mode!==i.IKp.FORM)return e;if(!e.config||!e.config.custom_fields_bundle)throw this.lang.trc("piano.id","Custom fields are disabled");return e},this.storeConfig=e=>(this.config.setAssetsConfig(e),this.templateTokenService.setFromAssets(e),this.consent.setFromAssets(e),e),this.config.set("mode",this.params.mode),this.cachedSettings=this.settings.getAssets().pipe((0,n.b)(e=>{[i.IKp.AUTH,i.IKp.FORM].includes(this.config.get("mode"))&&this.designVersionService.initDesignVersion(e.templates)})).toPromise().then(this.noCustomfieldsHandle).then(this.storeConfig)}getSettings(){return this.cachedSettings}getMainExternalCss(){const[e]=this.params.screens;return this.cachedSettings.then(e=>e.templates).then(t=>t.get(e)).then(e=>e.external_css||null)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(i.r2V),r.LFG(o.eN),r.LFG(i.E4y),r.LFG(i.UxS),r.LFG(i.weS),r.LFG(i.YIy),r.LFG(i.CfQ),r.LFG(i.zcL),r.LFG(i.cA))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})()},57263:function(e,t,s){s.d(t,{EV:function(){return ce},Hh:function(){return se},_q:function(){return ie},J3:function(){return ne},iK:function(){return ae},KC:function(){return ue},VB:function(){return re},zD:function(){return oe},Qq:function(){return mt},rn:function(){return $e},Ty:function(){return ze},bH:function(){return X},fi:function(){return Vt},xr:function(){return Me},aB:function(){return je},n:function(){return D},kQ:function(){return ss},Pw:function(){return ee},we:function(){return he},VP:function(){return Ae},iG:function(){return Fe},m4:function(){return de},vh:function(){return fe},Vx:function(){return me},qL:function(){return pe},ph:function(){return Le},Kq:function(){return Et},Ot:function(){return Yt},y$:function(){return _t},ne:function(){return tt},Pv:function(){return rs},QI:function(){return Z},Z$:function(){return jt},DB:function(){return $t},oQ:function(){return Dt},t:function(){return Qt},Re:function(){return Nt},zr:function(){return te},p3:function(){return Ne},F:function(){return z},dh:function(){return ge},m8:function(){return os},pN:function(){return wt},mX:function(){return He},c9:function(){return Ze},Pd:function(){return Je},Up:function(){return Ct},YL:function(){return yt},_g:function(){return kt},fs:function(){return xe},_0:function(){return Qe},n9:function(){return ut},Uk:function(){return lt},UY:function(){return ht},q6:function(){return dt},ig:function(){return ft},uR:function(){return pt},D3:function(){return nt},e9:function(){return De},SE:function(){return qe},xE:function(){return W},uE:function(){return Ht},OR:function(){return Ft},V:function(){return $},b2:function(){return K},Sq:function(){return ve},V5:function(){return ot},dK:function(){return J},v1:function(){return vt},qr:function(){return bt}});var i=s(37716),n=s(38583),r=s(26215),o=s(43057),a=s(25917),c=s(82298),u=s(59193),l=s(79765),h=s(90739),d=s(40205),f=s(11093),p=s(77393);class g{constructor(e,t){this.predicate=e,this.inclusive=t}call(e,t){return t.subscribe(new m(e,this.predicate,this.inclusive))}}class m extends p.L{constructor(e,t,s){super(e),this.predicate=t,this.inclusive=s,this.index=0}_next(e){const t=this.destination;let s;try{s=this.predicate(e,this.index++)}catch(i){return void t.error(i)}this.nextOrComplete(e,s)}nextOrComplete(e,t){const s=this.destination;Boolean(t)?s.next(e):(this.inclusive&&s.next(e),s.complete())}}var v=s(45435),b=s(93342),S=s(15257),w=s(96736),C=s(78345),y=s(88002),E=s(5304),Y=s(54395),_=s(43190),k=s(19773),I=s(68939),L=s(87519),F=s(39761),R=s(59328),A=s(71289),x=s(46782),V=s(13653),O=s(88484),P=s(91841),G=s(45942),N=s(39075),T=s(64762),B=s(3679);"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),new Uint8Array(16);const M=[];for(let as=0;as<256;++as)M.push((as+256).toString(16).slice(1));class j{constructor(e,t){this.state=e,this.config=t}onClickEvent(e){if(this.config.get("isPreview"))return;e.preventDefault();const t=document.getElementById("autofill-submit");t&&"function"==typeof t.click&&t.click(),this.onClick()}onClick(){}}let z=(()=>{class e{constructor(e,t,s,i,n){this.zone=e,this.platformId=t,this.recaptchaConfig=s,this.assetsConfig=i,this.document=n,this.recaptchaV3Enabled$=new r.X(!1),this.isReCaptchaV3Enabled$=this.recaptchaV3Enabled$.asObservable(),this.recaptchaConfig.reCaptchaV3SiteKey$.pipe((0,v.h)(e=>!!e),(0,b.b)(()=>this.recaptchaV3Enabled$.next(this.maxAttempts>0))).subscribe(e=>this.renderReCaptchaV3(e))}get maxAttempts(){return this.assetsConfig.get("passwordSecuritySettings").authentication_attempts_to_show_captcha}isReCaptchaV3Enabled(){return this.recaptchaV3Enabled$.getValue()}execute(e){return this.originalNgReCaptchaV3Service.execute(e)}handleReCaptchaV3BadgeVisibility(e){const t=this.getReCaptchaBadgeElement();t&&(e?t.classList.add("grecaptcha-badge--visible"):t.classList.remove("grecaptcha-badge--visible"))}watchOnReCaptchaV3Loaded(){return(0,o.F)(500).pipe((0,v.h)(()=>!!this.getReCaptchaBadgeElement()),(0,S.q)(1),(0,w.h)(!0))}renderReCaptchaV3(e){this.originalNgReCaptchaV3Service=new O.YC(this.zone,e,this.platformId)}getReCaptchaBadgeElement(){return this.document.querySelector(".grecaptcha-badge")}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.R0b),i.LFG(i.Lbi),i.LFG(f.JK3),i.LFG(f.mBN),i.LFG(n.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),$=(()=>{class e{constructor(){this.changeSpinnerState$=new r.X(!1)}get isSpinnerVisible$(){return this.changeSpinnerState$.asObservable().pipe((0,C.B)())}showSpinner(){this.changeSpinnerState$.next(!0)}hideSpinner(){this.changeSpinnerState$.next(!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var U=(()=>{return(e=U||(U={})).ALL_SCREEN="ALL_SCREEN",e.REGISTRATION="REGISTRATION",e.LOGIN="LOGIN",U;var e})();let D=(()=>{class e{constructor(e,t,s,i,n){this.config=e,this.assetsConfig=t,this.container=s,this.recaptchaV3Service=i,this.windowRef=n,this.observeIframes=[],this.reCaptchaV2Visible$=new r.X(!1),this.screensCaptchaFlags=new Map,this.reCaptchaAvailableScreens=[],this.forceShowReCaptcha=e=>{const t=this.screensCaptchaFlags.get(e);this.recaptchaV3Service.handleReCaptchaV3BadgeVisibility(this.isScreenAvailableForReCaptcha(e)&&!t),this.reCaptchaV2Visible$.next(t)},this.getObservableIframes=()=>(0,o.F)(300).pipe((0,y.U)(()=>Array.prototype.slice.call(document.getElementsByTagName("iframe")).filter(e=>e.title.indexOf("recaptcha")>-1).filter(e=>this.elementInViewport(e))),(0,E.K)(e=>(0,a.of)(null))),this.getObservableIframesSizes=e=>e.map(e=>({iframe:e,size:this.calculateSize(e)})),this.initCaptcha()}initCaptcha(){this.assetsConfig.useCaptcha&&(this.initCaptchaFlags(),this.initRecaptchaSizeObserver(),this.reCaptchaAvailableScreens=this.getAvailableReCaptchaScreens())}initCaptchaFlags(){const e=this.recaptchaV3Service.isReCaptchaV3Enabled(),t=this.assetsConfig.useCaptcha&&!e,s=this.assetsConfig.get("showCaptchaAtFirstLogin"),i=this.assetsConfig.captchaScreen,n=i===U.ALL_SCREEN,r=i===U.REGISTRATION,o=i===U.LOGIN;this.screensCaptchaFlags.set("restore",t&&this.assetsConfig.resetPasswordCaptcha),this.screensCaptchaFlags.set("register",t&&(n||r)),this.screensCaptchaFlags.set("login",t&&s&&(n||o)),this.screensCaptchaFlags.set("login_confirm",t&&s&&(n||o))}initRecaptchaSizeObserver(){this.recaptchaSizeObserver$=this.container.resize$.pipe((0,Y.b)(500),(0,y.U)(e=>e.width<301||e.height<480),(0,v.h)(e=>!!e),(0,_.w)(this.getObservableIframes),(0,y.U)(e=>e?this.getObservableIframesSizes(e):null),(0,E.K)(()=>(0,a.of)(null)),(0,y.U)(e=>e||[]),(0,b.b)(e=>{this.observeIframes.forEach(e=>{this.container.expands.removeValue(`recaptcha-${e.name}`)}),e.forEach(e=>{this.container.expands.setValue(`recaptcha-${e.iframe.name}`,e.size)}),this.observeIframes=e.map(e=>e.iframe)}))}isRecaptchaV2VisibleOnScreen(e){return!!this.screensCaptchaFlags.get(e)}isScreenAvailableForReCaptcha(e){return this.reCaptchaAvailableScreens.some(t=>t===e)}activateReCaptchaV2OnCurrentScreen(e,t){this.assetsConfig.useCaptcha&&(this.setShowReCaptchaV2(e,t),this.forceShowReCaptcha(t))}setShowReCaptchaV2(e,t){this.screensCaptchaFlags.set(t,e)}getAvailableReCaptchaScreens(){const e={[U.ALL_SCREEN]:["login","register","login_confirm"],[U.LOGIN]:["login","login_confirm"],[U.REGISTRATION]:["register"]}[this.assetsConfig.captchaScreen]||[];return this.assetsConfig.resetPasswordCaptcha&&e.push("restore"),e}calculateSize(e){const t=e.getBoundingClientRect();return{width:Math.max(t.left,0)+t.width,height:Math.max(t.top,0)+t.height}}elementInViewport(e){let t=e,s=t.offsetTop,i=t.offsetLeft;const n=t.offsetWidth,r=t.offsetHeight;for(;t.offsetParent;)t=t.offsetParent,s+=t.offsetTop,i+=t.offsetLeft;return s<this.windowRef.pageYOffset+this.windowRef.innerHeight&&i<this.windowRef.pageXOffset+this.windowRef.innerWidth&&s+r>this.windowRef.pageYOffset&&i+n>this.windowRef.pageXOffset}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.E4y),i.LFG(f.mBN),i.LFG(f.JeS),i.LFG(z),i.LFG(f.m9D))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),q=(()=>{class e{constructor(e,t){this.config=e,this.http=t}getSocialState(e,t,s){const i=new f.T9r({client_id:e,social_type:t,response_type:"token"});s&&i.set("linking_state",s);const n=`${this.config.get("apiPath")}/identity/login/social/state`;return this.http.get(n,{params:i.values})}getAccessToken(e,t,s){const i=`${this.config.get("apiPath")}/identity/auth/social/state`;return this.http.post(i,{client_id:e,provider_access_token:t,state:s})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.E4y),i.LFG(P.eN))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),Q=(()=>{class e{constructor(e,t,s,i,n){this.api=e,this.sdk=t,this.config=s,this.authsConfig=i,this.customEvent=n,this.oauthProviders=null,this.oauthProviders=new Set(this.config.get("mobileAuthProviders")),this.customEvent.customEvent$.subscribe(e=>this.sendCustomEvent({event:e.name,params:e.params}))}isMobileUsed(){return this.sdk.isActive}isMobileOAuthFlow(e){return this.isMobileUsed()&&this.isOAuthProvider(e)}isOAuthProvider(e){return this.oauthProviders.has(e.toLowerCase())}login(e){this.sdk.login(e)}register(e){this.sdk.register(e)}error(e){this.sdk.error(e)}sendCustomEvent(e){this.sdk.customEvent(e)}loginThroughOAuth(e){const t=this.config.get("aid"),s=this.authsConfig.get("linkingState");return this.api.getSocialState(t,e,s).pipe((0,y.U)(t=>this.transfromSocialCodeResponse(t,e)),(0,_.w)(e=>this.getSocialResponseFromMobile(e)),(0,_.w)(({socialToken:e,code:s})=>this.api.getAccessToken(t,e,s)))}transfromSocialCodeResponse(e,t){const{social_app_id:s,state:i}=e;return{clientId:s,code:i,oauthProvider:t}}getSocialResponseFromMobile(e){return this.sdk.executeSocialLoginAndWaitAnswer(e).pipe((0,y.U)(e=>JSON.parse(e)),(0,y.U)(t=>Object.assign(Object.assign({},t),{code:e.code})))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(q),i.LFG(f.qL3),i.LFG(f.E4y),i.LFG(f.jBO),i.LFG(f.qL0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),Z=(()=>{class e{static forRoot(){return{ngModule:e,providers:[Q]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[Q,q],imports:[[n.ez]]}),e})(),J=(()=>{class e{constructor(e,t,s,i,n,r,o,a,u,l,h,d){this.config=e,this.customFieldsService=t,this.postMessage=s,this.profileService=i,this.assetsConfig=n,this.error=r,this.tokenService=o,this.events=a,this.formService=u,this.currentScreenService=l,this.userNameFieldService=h,this.env=d,this.isSubmitting=!1,this.uid="",this.profileSubject=new c.t}get isRegistration(){return"register"===this.currentScreenService.screen}get profile$(){return this.profileSubject.asObservable()}submitStep(){return this.saveUserInfo({step_id:this.customFieldsService.currentStep.id},this.assetsConfig.assetsFormName).pipe((0,b.b)(()=>this.isSubmitting=!1),(0,k.zg)(()=>this.customFieldsService.isCurrentStepFirst$.pipe((0,S.q)(1))),(0,_.w)(e=>e&&this.isRegistration?this.saveUserNames():(0,a.of)(!0)),(0,k.zg)(()=>this.customFieldsService.isCurrentStepLast$.pipe((0,S.q)(1))),(0,b.b)(e=>{e&&this.customFieldsService.isAllStepsPassed$.next(!0),this.customFieldsService.setNextStep().subscribe()}))}saveUserNames(){const e=Object.assign({first_name:this.formService.get("first_name").value,last_name:this.formService.get("last_name").value},this.formService.getUserNameData());return this.saveUserInfo(e).pipe((0,b.b)(e=>this.profileSubject.next(e)))}saveUserInfo(e={},t){if(this.isSubmitting)return u.E;if(!this.customFieldsService.strictValidate())return this.postMessage.send("profileUpdatedError"),u.E;const s=Object.assign({form_name:t,custom_field_values:this.customFieldsService.getSerializedValues(),hidden_fields:this.customFieldsService.completedFieldsNames},e);return this.error.reset(),this.isSubmitting=!0,this.profileService.update(s).pipe((0,I.x)(()=>this.isSubmitting=!1),(0,b.b)(({custom_fields_errors:e})=>{if(null==e?void 0:e.length)throw{errors:e.map(e=>({message:e}))}}),(0,v.h)(({update_failed:e})=>!e),(0,b.b)(({token:e})=>{if(e){const t=f.Puc.decode(e);this.tokenService.accessToken=e,this.postMessage.send("profileUpdated",{token:e,user:t,cookie_domain:this.assetsConfig.get("siteCookieDomain")},null,null,!0)}this.customFieldsService.fieldsImpression$.getValue()&&this.events.cfSubmission()}),(0,E.K)(e=>{throw this.postMessage.send("profileUpdatedError",e),this.handleErrors(e),e}))}getProfile(){return this.getInfo().pipe((0,b.b)(e=>{e&&(this.uid=e.uid,this.profileSubject.next(e))}),(0,E.K)(e=>(this.handleErrors(e),(0,a.of)(null))))}handleErrors(e){403===e.status&&this.postMessage.send("tokenRejected"),this.error.set(e.errors)}getInfo(){let e;return e=this.env.mock||this.config.get("isPreview")?(0,a.of)((0,G.Qf)()):this.profileService.get(),e}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.E4y),i.LFG(f.ZnY),i.LFG(f.FL7),i.LFG(f.H3W),i.LFG(f.mBN),i.LFG(f.T_6),i.LFG(f.Brn),i.LFG(f.nCZ),i.LFG(f.oLl),i.LFG(f.UBS),i.LFG(f.RrL),i.LFG(f.GvL))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),H=(()=>{class e{constructor(e){this.postMessage=e}success(){this.sendPostMessage({loggedIn:!0})}passwordlessConfirmation(e){this.sendPostMessage({email_sent:e})}userWithPassword(){this.sendPostMessage({usual_user:!0})}error(e){this.sendPostMessage({error:e})}sendPostMessage(e){this.postMessage.send("loginResponse",e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.FL7))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),K=(()=>{class e{constructor(e,t,s,i,n,o,a,c,u,h,d,f,p,g,m,v,b,S,w,C,y,E,Y,_,k,I,L,F){this.auth=e,this.authSso=t,this.postMessage=s,this.container=i,this.config=n,this.assetsConfig=o,this.error=a,this.consent=c,this.customFields=u,this.gaService=h,this.lang=d,this.events=f,this.recaptchaV3Service=p,this.spinnerService=g,this.captchaService=m,this.confirmationEmail=v,this.mobileSdk=b,this.screen=S,this.passwordlessConfig=w,this.authsConfig=C,this.tokenService=y,this.formService=E,this.gmSsoRedirectParamsService=Y,this.userUpdateService=_,this.sssService=k,this.mobileSdkAdapter=I,this.urlService=L,this.singleStepAuthService=F,this.isRememberMeUsed=!1,this.rememberMe=!1,this.passwordlessLoginInitiated=!1,this.restore$=new l.xQ,this.saveNewPassword$=new l.xQ,this.showPassword$=new r.X(!1),this.registerInProcess=!1,this.restoreInProcess=!1,this.subscribeToPostMessages(),this.subscribeToAuthTokenUpdate(),this.subscribeToScreenUpdate(),this.subscribeToCustomFieldsFormSubmit(),this.subscribeToCustomFieldsImpression(),this.subscribingToLangUpdating(),this.subscribingToRecaptcha(),this.postMessage.send("stateReady"),this.mobileSdkAdapter.postMessage("stateReady")}get userEmail(){return this.config.get("email")||this.screen.email||(this.userData?this.userData.email:"")}get isMultiStepEnabledAndAuthCompleted$(){return(0,h.aj)([this.customFields.isMultiStepEnabled$.pipe((0,L.x)()),this.auth.tokenChanged.pipe((0,y.U)(e=>!!e.access_token)),this.screen.getScreen().pipe((0,F.O)(this.screen.currentScreen),(0,R.G)(),(0,y.U)(([e,t])=>e===t))]).pipe((0,y.U)(([e,t,s])=>e&&t&&s))}get isRememberMe(){return!this.isRememberMeUsed||this.rememberMe}get useReCaptchaV3(){return this.recaptchaV3Service.isReCaptchaV3Enabled()&&!this.captchaService.reCaptchaV2Visible$.getValue()&&this.captchaService.isScreenAvailableForReCaptcha(this.screen.currentScreen)}get userData(){return f.Puc.decode(this.tokenService.accessToken)}get isPasswordlessLogin(){const e="login_confirm"===this.screen.currentScreen,t=!1===this.authsConfig.get("isPasswordLinked");return(e?this.passwordlessConfig.passwordless&&t:this.passwordlessConfig.passwordless)||this.passwordlessConfig.createPasswordlessUser||t||this.authsConfig.get("isSocialUserUsesPasswordless")}showLoginFormWithoutPassword(){this.passwordlessConfig.passwordless=!0,this.passwordlessLoginInitiated=!1,this.captchaService.activateReCaptchaV2OnCurrentScreen(!0,this.screen.currentScreen)}login(){const{data:e,isValid:t}=this.screen.submitAndGetFormState();if(!t)return this.singleStepAuthService.error({status:400,errors:[{message:"Invalid form"}]}),u.E;const{password:s,recaptchaResponse:i,recaptchaResponse3:n,redirectUri:r,email:o,phone:a}=e,c={password:s,recaptchaResponse:i,recaptchaResponse3:n,redirectUri:r,login:o||a,loginType:this.getLoginType(a),remember:this.isRememberMe};return this.isPasswordlessLogin?this.loginByPasswordless(c):this.loginByPassword(c)}register(){const{data:e,isValid:t}=this.screen.submitAndGetFormState();if("register_confirm"!==this.screen.currentScreen&&this.config.get("disableSignUp")||this.registerInProcess||!t)return u.E;const s=e;return s.consents=this.consent.getConsents(),s.customFieldValues=this.customFields.getSerializedValues(),this.error.reset(),this.registerInProcess=!0,this.spinnerService.showSpinner(),this.waitForCaptchaV3(s).pipe((0,_.w)(e=>this.auth.register(Object.assign(Object.assign({},e),{remember:this.isRememberMe}))),(0,b.b)(({consent_errors:e,custom_fields_errors:t,social_linking_response:s})=>{if(null==e?void 0:e.length)throw{errors:e.map(e=>({message:e}))};if(null==t?void 0:t.length)throw{errors:t.map(e=>({message:e}))};s&&(this.config.setConfirmConfig(f.E4y.extractConfirmConfig(s)),this.screen.setScreen("login_confirm")),this.customFields.fieldsImpression$.getValue()&&this.events.cfSubmission()}),(0,E.K)(e=>this.handleServerErrors(e)),(0,I.x)(()=>{this.registerInProcess=!1,this.spinnerService.hideSpinner()}),(0,_.w)(()=>this.customFields.isMultiStepEnabled$.pipe((0,S.q)(1))),(0,v.h)(e=>e),(0,_.w)(()=>this.userUpdateService.getProfile()),(0,_.w)(()=>this.customFields.setNextStep()))}restore(){const{isValid:e,data:t}=this.screen.submitAndGetFormState();return this.restoreInProcess||!e?u.E:(this.config.get("resetUri")&&(t.resetUri=this.config.get("resetUri")),this.restoreInProcess=!0,this.error.reset(),this.spinnerService.showSpinner(),this.waitForCaptchaV3(t).pipe((0,_.w)(e=>this.auth.restorePassword(e)),(0,E.K)(e=>this.handleServerErrors(e)),(0,I.x)(()=>{this.spinnerService.hideSpinner(),this.restoreInProcess=!1}),(0,b.b)(()=>this.restore$.next(!0))))}saveNewPassword(){const{data:e,isValid:t}=this.screen.submitAndGetFormState();return t?this.auth.saveNewPassword(Object.assign(Object.assign({},e),{token:this.config.get("resetToken")})).pipe((0,E.K)(e=>this.handleServerErrors(e)),(0,b.b)(()=>{this.saveNewPassword$.next(!0),this.events.passwordRestored()})):u.E}resendConfirmationEmail(){return this.confirmationEmail.resendAndShowMessage(()=>this.events.confirmationEmailSent(["email_is_not_confirmed","email_confirmation_required"].includes(this.screen.currentScreen),"digital_code"===this.screen.currentScreen))}sendPasswordlessData(){const{isValid:e,data:t}=this.screen.submitAndGetFormState(),s=this.screen.getScreenValue("login"),i=(null==s?void 0:s.email)||this.userEmail,n=null==s?void 0:s.phone;return e&&(i||n)?this.loginByPasswordless(Object.assign(Object.assign({},s?{recaptchaResponse3:s.recaptchaResponse3,redirectUri:s.redirectUri,password:s.password}:void 0),{login:i||n,loginType:this.getLoginType(n),recaptchaResponse:t.recaptchaResponse})):u.E}getLoginType(e){return void 0!==e?f.NAd.PHONE:f.NAd.EMAIL}resendTwoFactorAuthEmail(){const{isValid:e,data:t}=this.screen.submitAndGetFormState(),{email:s,password:i,recaptchaResponse3:n,redirectUri:r}=this.screen.getScreenValue("login"),o=s||this.userEmail;return e&&o?this.loginByPassword(Object.assign({password:i,recaptchaResponse3:n,redirectUri:r,login:o,loginType:f.NAd.EMAIL},{recaptchaResponse:t.recaptchaResponse})):u.E}confirmDoiDigitalCode(){const e=this.formService.get("digitalCode").value.join("");return this.auth.confirmDoiDigitalCode(e).pipe((0,E.K)(e=>(this.singleStepAuthService.error(e),this.formService.patchValue({digitalCode:""}),this.enableReCaptchaAndSetErrors(e),(0,d._)(e))),(0,_.w)(e=>this.mobileSdk.isMobileUsed()?this.loginBySDK():(0,a.of)(e)),(0,v.h)(()=>!this.mobileSdk.isMobileUsed()),(0,b.b)(e=>{this.auth.saveToken(e.access_token);const t=this.getAuthSuccessData(e);this.events.updateToken(t),this.config.get("isSssConfigured")?this.sssService.redirectToSss():(this.config.get("isInsideCheckoutOrTemplate")||this.container.close(),"show_offer_params"in e&&this.events.sendDOIOfferParams(e.show_offer_params||"{}"))}))}confirmPasswordlessDigitalCode(){var e;const{email:t,phone:s}=this.screen.getScreenValue("login"),i={digitalCode:null===(e=this.formService.get("digitalCode"))||void 0===e?void 0:e.value.join(""),remember:this.isRememberMe,email:t,phone:s};return this.auth.confirmPasswordlessDigitalCode(i).pipe((0,E.K)(e=>(this.singleStepAuthService.error(e),this.formService.patchValue({digitalCode:""}),this.enableReCaptchaAndSetErrors(e),(0,d._)(e))),(0,b.b)(()=>this.singleStepAuthService.success()))}confirmTwoFactorAuthDigitalCode(){var e;return this.auth.confirm2FaEmailDigitalCode(null===(e=this.formService.get("digitalCode"))||void 0===e?void 0:e.value.join(""),this.userEmail,this.isRememberMe).pipe((0,E.K)(e=>(this.singleStepAuthService.error(e),this.formService.patchValue({digitalCode:""}),this.enableReCaptchaAndSetErrors(e),(0,d._)(e))),(0,b.b)(()=>this.singleStepAuthService.success()))}loginBySDK(){return this.auth.tokenChanged.pipe((0,S.q)(1),(0,v.h)(()=>this.mobileSdk.isMobileUsed()),(0,b.b)(e=>{const t=this.getAuthSuccessData(e);this.handleMobileAuth(e,t.user)}))}handleServerErrors(e){return this.enableReCaptchaAndSetErrors(e),e.status>=500&&e.status<=526?(0,d._)(e):u.E}enableReCaptchaAndSetErrors(e){const t=!0===e.forceShowCaptcha||this.captchaService.isRecaptchaV2VisibleOnScreen(this.screen.currentScreen);this.captchaService.activateReCaptchaV2OnCurrentScreen(t,this.screen.currentScreen),this.error.set(e.errors)}openOrClosePasswordlessConfirmationScreen(e){this.events.passwordlessEmailSent(e),["passwordless_confirmation"].includes(this.screen.currentScreen)?this.container.close():this.assetsConfig.get("isPasswordlessDigitalCodeEnabled")?this.screen.setScreen("digital_code"):this.screen.setScreen("passwordless_confirmation")}showLoginFormWithPassword(e){this.passwordlessConfig.passwordless=!1,this.passwordlessConfig.createPasswordlessUser=!1,this.deactivateCaptcha(e)}loginByPasswordless(e){return this.spinnerService.showSpinner(),this.waitForCaptchaV3(e).pipe((0,b.b)(()=>this.passwordlessLoginInitiated=!0),(0,_.w)(e=>this.auth.passwordlessLogin(e)),(0,E.K)(e=>(this.singleStepAuthService.error(e),this.handleServerErrors(e))),(0,I.x)(()=>this.spinnerService.hideSpinner()),(0,b.b)(({passwordless:e,token:t,login_token_id:s,key:i})=>{e?(this.openOrClosePasswordlessConfirmationScreen(s),this.singleStepAuthService.passwordlessConfirmation(this.userEmail)):t?(this.auth.setToken(t),this.singleStepAuthService.success()):(this.showLoginFormWithPassword(i),this.singleStepAuthService.userWithPassword())}))}loginByPassword(e){return this.spinnerService.showSpinner(),this.waitForCaptchaV3(e).pipe((0,_.w)(e=>this.auth.login(e)),(0,b.b)(t=>{t.two_factor_auth_required?this.screen.setScreen("2fa_email_digital_code"):(this.auth.setToken(t,e.remember),this.singleStepAuthService.success())}),(0,E.K)(e=>(this.singleStepAuthService.error(e),this.handleServerErrors(e))),(0,I.x)(()=>this.spinnerService.hideSpinner()))}deactivateCaptcha(e){this.captchaService.activateReCaptchaV2OnCurrentScreen(!1,this.screen.currentScreen),this.screen.setScreenValue("login","recaptchaResponse",e)}subscribeToScreenUpdate(){this.screen.getScreen().subscribe(e=>{switch(this.events.changeScreen(e),e){case"login":this.gaService.emitEvent("loginDisplayed","Login displayed");break;case"register":this.gaService.emitEvent("registrationDisplayed","Registration displayed");break;case"register_confirm":this.formService.removeControls()}this.formService.clear(),this.formService.enable()}),this.screen.getScreen().pipe(function(e,t=!1){return s=>s.lift(new g(e,t))}(()=>this.assetsConfig.useCaptcha)).subscribe(e=>this.captchaService.forceShowReCaptcha(e))}subscribeToPostMessages(){this.postMessage.getMessages("close").subscribe(()=>this.container.close()),this.postMessage.getMessages("submitLoginForm").pipe((0,k.zg)(()=>this.login())).subscribe()}subscribeToCustomFieldsFormSubmit(){this.customFields.submit$.pipe((0,v.h)(()=>["register","register_confirm"].includes(this.screen.currentScreen)),(0,_.w)(()=>this.register())).subscribe()}subscribeToAuthTokenUpdate(){this.auth.tokenChanged.pipe((0,k.zg)(e=>this.assetsConfig.get("gmSsoEnabled")?this.authSso.gmSsoSetParentCookie().pipe((0,y.U)(t=>e)):(0,a.of)(e)),(0,k.zg)(e=>(0,h.aj)([(0,a.of)(e),this.customFields.isMultiStepEnabled$.pipe((0,L.x)()),this.customFields.isAllStepsPassed$.pipe((0,L.x)())])),(0,v.h)(([e,t,s])=>!["register","register_confirm"].includes(this.screen.currentScreen)||!t||s)).subscribe(([e])=>{const t=this.getAuthSuccessData(e);if(this.config.get("isSssConfigured"))this.sssService.redirectToSss();else if(e.registration?(this.events.authSuccess("registrationSuccess",Object.assign({},t)),this.gaService.emitEvent("registrationSuccess","Registration success",{}),t&&(t.areCookiesSet=!0)):this.gaService.emitEvent("loginSuccess","Login success"),this.mobileSdk.isMobileUsed())e.email_confirmation_required?this.screen.setScreen(e.registration?"email_is_not_confirmed":"email_confirmation_required"):this.handleMobileAuth(e,t.user);else if(this.config.get("redirectUri"))this.redirectAfterAuth(e);else if(this.config.get("internalRedirectUri")){let t=this.urlService.addQueryParams(this.config.get("internalRedirectUri"),{piano_social_token:e.access_token});this.config.get("affiliate")&&(t+=`#affiliateToken=${e.access_token}`),this.container.redirect(t)}else e.access_token&&(this.events.loginSuccess(t),this.config.get("verificationCode")?this.screen.setScreen("email_confirmation"):e.email_confirmation_required&&this.screen.setScreen(e.registration?"email_is_not_confirmed":"email_confirmation_required"))})}getAuthSuccessData(e){if(!(null==e?void 0:e.access_token))return;const{registration:t,email_confirmation_required:s}=e;return{token:this.tokenService.accessToken||e.access_token,user:Object.assign(Object.assign({},f.Puc.decode(this.tokenService.accessToken||e.access_token)),{email_confirmation_required:s,rememberMe:this.isRememberMe}),cookie_domain:this.assetsConfig.get("siteCookieDomain"),registration:t,extendExpiredAccessEnabled:this.assetsConfig.get("isExtendExpiredAccessEnabled"),stage:this.config.get("stage"),affiliate:null==e?void 0:e.affiliate}}handleMobileAuth({access_token:e,refresh_token:t,registration:s},{exp:i}){const n={expiresIn:i,accessToken:e,refreshToken:t};s?this.mobileSdk.register(n):this.mobileSdk.login(n)}redirectAfterAuth({code:e,email_confirmation_required:t,registration:s,access_token:i}){let n={state:this.config.get("state")};"code"===this.config.get("responseType")?(e&&(n.code=e,this.auth.storeAuthCode(e)),t&&(n.email_is_not_confirmed=s?"registration":"login")):n.token=i,this.assetsConfig.get("gmSsoEnabled")&&"redirect"===this.config.get("displayMode")&&(n=Object.assign(Object.assign({},n),this.gmSsoRedirectParamsService.addGmSsoRedirectParams(n,this.isRememberMe)));const r=this.urlService.addQueryParams(this.config.get("redirectUri"),n);this.container.redirect(r)}subscribeToCustomFieldsImpression(){this.customFields.fieldsFirstImpression.subscribe(()=>this.events.cfImpression())}subscribingToLangUpdating(){this.lang.$langUpdated.subscribe(()=>this.error.reset())}subscribingToRecaptcha(){this.recaptchaV3Service.isReCaptchaV3Enabled$.pipe((0,v.h)(e=>e),(0,_.w)(()=>this.recaptchaV3Service.watchOnReCaptchaV3Loaded()),(0,y.U)(()=>this.captchaService.isScreenAvailableForReCaptcha(this.screen.currentScreen))).subscribe(e=>this.recaptchaV3Service.handleReCaptchaV3BadgeVisibility(e))}waitForCaptchaV3(e){return this.useReCaptchaV3?this.recaptchaV3Service.execute(this.screen.currentScreen).pipe((0,y.U)(t=>Object.assign(Object.assign({},e),{recaptchaResponse3:t}))):(0,a.of)(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.e80),i.LFG(f.tlL),i.LFG(f.FL7),i.LFG(f.JeS),i.LFG(f.E4y),i.LFG(f.mBN),i.LFG(f.T_6),i.LFG(f.UxS),i.LFG(f.ZnY),i.LFG(f.$rL),i.LFG(f.CfQ),i.LFG(f.nCZ),i.LFG(z),i.LFG($),i.LFG(D),i.LFG(f.Yg9),i.LFG(Q),i.LFG(f.H2),i.LFG(f.urf),i.LFG(f.jBO),i.LFG(f.Brn),i.LFG(f.oLl),i.LFG(f.cKD),i.LFG(J),i.LFG(f.R$W),i.LFG(f.qL3),i.LFG(f.iOJ),i.LFG(H))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),W=(()=>{class e{constructor(e,t,s,i,n,r,o,a,c,u,h,d,f){this.config=e,this.container=t,this.error=s,this.mobileAuth=i,this.authService=n,this.screen=r,this.postMessage=o,this.passwordlessConfig=a,this.state=c,this.windowService=u,this.userAgentService=h,this.appleOAuthService=d,this.langService=f,this.socialResponseId$=new l.xQ,this.postMessage.getMessages("socialLoginCallback").subscribe(e=>this.socialResponseId$.next(e)),this.subscribeToSocialResponseId();const p=this.config.get("socialResponseId");p&&this.socialResponseId$.next(p)}socialLogin(e,t){this.error.reset();const s={social_type:e,back_url:this.container.backUrl,redirect_uri:this.container.originUrl};return e===f._s0.APPLE&&this.mobileAuth.isMobileUsed()&&!this.windowService.inIframe()&&this.userAgentService.isSafariWebView()?this.appleOAuthService.signIn().pipe((0,y.U)(e=>f.e80.transformSocialResponse(e)),(0,b.b)(e=>this.handleSocialResponse(e))):this.mobileAuth.isMobileOAuthFlow(e)?this.mobileAuth.loginThroughOAuth(s.social_type).pipe((0,y.U)(e=>this.transformSocialResponse(e)),(0,b.b)(e=>this.handleSocialResponse(e)),(0,E.K)(f.vF_.catch(this.langService.trc("piano.id","Failed to get social data"),e=>{this.mobileAuth.error(e[0].message),this.error.set(e)}))):(0,a.of)(e===f._s0.MSQA?this.container.openWindow(this.authService.getSocialLoginUrl(s,t),"pianoid-auth"):this.container.openPopup(this.authService.getSocialLoginUrl(s,t),"pianoid-auth"))}subscribeToSocialResponseId(){this.socialResponseId$.pipe((0,L.x)(),(0,k.zg)(e=>this.authService.getSocialAuthResponse(e)),(0,y.U)(e=>this.transformSocialResponse(e))).subscribe(e=>{this.passwordlessConfig.createPasswordlessUser=!1,this.handleSocialResponse(e)})}transformSocialResponse(e){const t={};switch(t.status=e.status,t.error_message=e.error_message,t.warn_message=e.warn_message,e.affiliate&&this.config.set("affiliate",null==e?void 0:e.affiliate),e.status){case"ok":t.access_token=e.access_token,t.code=e.code,t.refresh_token=e.refresh_token,t.registration=e.registration;break;case"confirm":t.linking_state=e.linking_state,t.email=e.email,t.first_name=e.first_name,t.last_name=e.last_name,t.password_linked=e.password_confirmation_available,t.linked_social_accounts=e.linked_social_accounts,t.social_type=e.social_type;break;case"passwordless":t.login_token_id=e.login_token_id,t.email=e.email;break;case"additional_input":t.additional_state=e.additional_input_state,t.need_email=e.need_email,t.social_type=e.social_type,t.redirect_uri=e.redirect_uri}return t}handleSocialResponse(e){switch(e.status&&(this.state.rememberMe=!0),e.status){case"ok":this.authService.setToken(e,this.state.rememberMe);break;case"confirm":this.config.setConfirmConfig(e),this.screen.email=e.email,this.screen.setScreen("login_confirm");break;case"passwordless":this.config.setPasswordlessConfig(e),this.screen.email=e.email,this.state.openOrClosePasswordlessConfirmationScreen(e.login_token_id);break;case"additional_input":this.config.setAdditionalConfig(e),this.screen.setScreen("register_confirm");break;default:e.error_message&&console.log(`SOCIAL LOGIN FAILED: ${e.error_message}`),e.warn_message&&this.error.set([{message:e.warn_message}])}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.E4y),i.LFG(f.JeS),i.LFG(f.T_6),i.LFG(Q),i.LFG(f.e80),i.LFG(f.H2),i.LFG(f.FL7),i.LFG(f.urf),i.LFG(K),i.LFG(f.unP),i.LFG(f.VHq),i.LFG(f.mGE),i.LFG(f.CfQ))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();let X=(()=>{class e{constructor(e,t,s){this.container=e,this.title=t,this.langSettings=s}configure(e){this.title.setTitle("Authorization"),this.container.preventScroll(),this.langSettings.configureLang(e).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.JeS),i.LFG(N.Dx),i.LFG(f.Vxf))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),ee=(()=>{class e{constructor(e,t){this.currentScreenService=e,this.stateService=t}submit(){return"digital_code"===this.currentScreenService.screen?this.stateService.confirmPasswordlessDigitalCode():["email_is_not_confirmed","email_confirmation_required"].includes(this.currentScreenService.screen)?this.stateService.confirmDoiDigitalCode():"2fa_email_digital_code"===this.currentScreenService.screen?this.stateService.confirmTwoFactorAuthDigitalCode():(0,d._)(new Error("[DigitalCode]: no submit request"))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.UBS),i.LFG(K))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),te=(()=>{class e{constructor(e,t,s){this.form=e,this.passwordlessConfig=t,this.documentRef=s}handleAutofilledPassword(e){return this.passwordlessConfig.isPasswordless$.pipe((0,L.x)(),(0,b.b)(t=>t?this.appendPasswordInputMock(e):this.removePasswordInputMock()),(0,v.h)(e=>!1===e),(0,A.g)(0),(0,b.b)(()=>this.form.patchValue({password:this.autofilledPassword})))}appendPasswordInputMock(e){const t=this.documentRef.createElement("input");t.type="password",t.style.display="none",t.onchange=e=>{this.autofilledPassword=e.target.value},e.nativeElement.parentElement.after(t),this.passwordMockElement=t}removePasswordInputMock(){this.passwordMockElement&&this.passwordMockElement.parentElement.removeChild(this.passwordMockElement)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f.oLl),i.LFG(f.urf),i.LFG(n.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),se=(()=>{class e extends j{constructor(e,t){super(e,t),this.state=e,this.config=t}onClickEvent(e){super.onClickEvent(e)}onClick(){this.state.login().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(f.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionLogin",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)})},features:[i.qOj]}),e})(),ie=(()=>{class e extends j{constructor(e,t,s,i,n){super(e,t),this.state=e,this.config=t,this.el=s,this.renderer=i,this.currentScreenService=n,this.config.get("disableSignUp")&&"register_confirm"!==this.currentScreenService.screen&&this.renderer.setAttribute(this.el.nativeElement,"disabled","disabled")}onClickEvent(e){super.onClickEvent(e)}onClick(){this.state.register().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(f.E4y),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(f.UBS))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionRegister",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)})},features:[i.qOj]}),e})(),ne=(()=>{class e extends j{constructor(e,t){super(e,t),this.state=e,this.config=t,this.tabIndex="0"}onClickEvent(e){super.onClickEvent(e)}onClick(){this.state.resendConfirmationEmail().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(f.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionResendConfirmationEmail",""]],hostVars:1,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)}),2&e&&i.uIk("tabindex",t.tabIndex)},features:[i.qOj]}),e})(),re=(()=>{class e extends j{constructor(e,t){super(e,t),this.state=e,this.config=t}onClickEvent(e){super.onClickEvent(e)}onClick(){this.state.restore().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(f.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionRestore",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)})},features:[i.qOj]}),e})(),oe=(()=>{class e extends j{constructor(e,t){super(e,t),this.state=e,this.config=t}onClickEvent(e){super.onClickEvent(e)}onClick(){this.state.saveNewPassword().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(f.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionSaveNewPassword",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)})},features:[i.qOj]}),e})(),ae=(()=>{class e extends j{constructor(e,t,s,i,n){super(e,t),this.state=e,this.config=t,this.events=s,this.container=i,this.assetsConfig=n,this.tabIndex="0"}onClickEvent(e){super.onClickEvent(e)}onClick(){this.state.sendPasswordlessData().subscribe(()=>{this.assetsConfig.get("isPasswordlessDigitalCodeEnabled")||this.container.close()})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(f.E4y),i.Y36(f.nCZ),i.Y36(f.JeS),i.Y36(f.mBN))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionResendPasswordlessData",""],["","actionResendPasswordlessEmail",""]],hostVars:1,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)}),2&e&&i.uIk("tabindex",t.tabIndex)},features:[i.qOj]}),e})(),ce=(()=>{class e{constructor(e,t){this.container=e,this.screenService=t}onClick(){"sso_confirm"!==this.screenService.currentScreen&&this.container.close()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.JeS),i.Y36(f.H2))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionClose",""]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClick(e)})}}),e})(),ue=(()=>{class e extends j{constructor(e,t){super(e,t),this.state=e,this.config=t,this.tabIndex="0"}onClickEvent(e){super.onClickEvent(e)}onClick(){this.state.resendTwoFactorAuthEmail().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(f.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionResendTwoFactorAuthEmail",""]],hostVars:1,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)}),2&e&&i.uIk("tabindex",t.tabIndex)},features:[i.qOj]}),e})(),le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),he=(()=>{class e extends f.dvP{constructor(e,t,s,i,n,r,o,a,c,u,l){super(t,s,i,u,r,o,l),this.langService=e,this.form=t,this.config=s,this.assetsConfig=i,this.state=n,this.errorService=r,this.elementRef=o,this.renderer=a,this.rendererService=c,this.displayableValidatorErrorsService=u,this.controlMobileZoomService=l,this.name="email",this.validators=[],this.ariaLabel=this.langService.tr("email"),this.autocorrect="off",this.autocapitalize="off",this.isRequired=!1,this.hasErrors=!1}ngOnInit(){super.ngOnInit(),this.renderer.setValue(this.elementRef.nativeElement,this.config.get("email")),this.rendererService.createText(this.elementRef.nativeElement,this.config.get("email")),this.renderer.setAttribute(this.elementRef.nativeElement,"value",this.config.get("email")),this.onChange(this.config.get("email"))}onEnterEvent(){}onInputEvent(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(f.oLl),i.Y36(f.E4y),i.Y36(f.mBN),i.Y36(K),i.Y36(f.T_6),i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(f.Vht),i.Y36(f.vWQ),i.Y36(f.r$w))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldConfirmEmail",""]],hostVars:3,hostBindings:function(e,t){2&e&&i.uIk("aria-label",t.ariaLabel)("autocorrect",t.autocorrect)("autocapitalize",t.autocapitalize)},features:[i._Bn([{provide:f.dvP,useExisting:(0,i.Gpc)(()=>e)}]),i.qOj]}),e})(),de=(()=>{class e extends f.dvP{constructor(e,t,s,i,n,r,o,a,c){super(t,s,i,r,o,a,c),this.langService=e,this.form=t,this.config=s,this.assetsConfig=i,this.state=n,this.displayableValidatorErrorsService=r,this.errorService=o,this.elementRef=a,this.controlMobileZoomService=c,this.name="password",this.validators=[{formValidator:!1,errorName:f.p8$.REQUIRED,validator:B.kI.required}],this.hasErrors=!1,this.autocorrect="off",this.autocapitalize="off",this.isRequired=this.assetsConfig.get("enableFeValidation"),this.ariaLabel=this.langService.tr("password")}onInputEvent(e){this.onChange(e.value)}onEnterEvent(){this.state.login().subscribe()}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(f.oLl),i.Y36(f.E4y),i.Y36(f.mBN),i.Y36(K),i.Y36(f.vWQ),i.Y36(f.T_6),i.Y36(i.SBq),i.Y36(f.r$w))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldLoginPassword",""]],hostVars:7,hostBindings:function(e,t){1&e&&i.NdJ("change",function(e){return t.onInputEvent(e.target)})("input",function(e){return t.onInputEvent(e.target)}),2&e&&(i.uIk("autocorrect",t.autocorrect)("autocapitalize",t.autocapitalize)("aria-label",t.ariaLabel),i.ekj("has-errors",t.hasErrors)("required",t.isRequired))},features:[i._Bn([{provide:f.dvP,useExisting:(0,i.Gpc)(()=>e)}]),i.qOj]}),(0,T.gn)([(0,f.K4E)()],e.prototype,"onInputEvent",null),e})(),fe=(()=>{class e extends f.pAr{constructor(e,t,s,i,n,r,o,a,c){super(t,s,i,r,o,a,c),this.langService=e,this.form=t,this.config=s,this.assetsConfig=i,this.state=n,this.displayableValidatorErrorsService=r,this.errorService=o,this.elementRef=a,this.controlMobileZoomService=c,this.name="password",this.userControlName="userName",this.ariaLabel=this.langService.tr("password"),this.hasErrors=!1,this.autocorrect="off",this.autocapitalize="off",this.isRequired=this.assetsConfig.get("enableFeValidation")}onInputEvent(e){this.onChange(e.value)}onEnterEvent(){this.state.register().subscribe()}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(f.oLl),i.Y36(f.E4y),i.Y36(f.mBN),i.Y36(K),i.Y36(f.vWQ),i.Y36(f.T_6),i.Y36(i.SBq),i.Y36(f.r$w))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldRegisterPassword",""]],hostVars:7,hostBindings:function(e,t){1&e&&i.NdJ("change",function(e){return t.onInputEvent(e.target)})("input",function(e){return t.onInputEvent(e.target)}),2&e&&(i.uIk("aria-label",t.ariaLabel)("autocorrect",t.autocorrect)("autocapitalize",t.autocapitalize),i.ekj("has-errors",t.hasErrors)("required",t.isRequired))},features:[i._Bn([{provide:f.dvP,useExisting:(0,i.Gpc)(()=>e)}]),i.qOj]}),(0,T.gn)([(0,f.K4E)()],e.prototype,"onInputEvent",null),e})(),pe=(()=>{class e extends f.dvP{constructor(e,t,s,i,n,r,o,a,c){super(t,s,i,r,o,a,c),this.langService=e,this.form=t,this.config=s,this.assetsConfig=i,this.state=n,this.displayableValidatorErrorsService=r,this.errorService=o,this.elementRef=a,this.controlMobileZoomService=c,this.name="password",this.validators=[],this.ariaLabel=this.langService.tr("password"),this.hasErrors=!1,this.autocorrect="off",this.autocapitalize="off",this.isRequired=this.assetsConfig.get("enableFeValidation")}setValidators(e){const t=this.assetsConfig.get("passwordSecuritySettings"),s=f._H1.buildValidators(t).filter(e=>this.displayableValidatorErrorsService.isDisplayable(this.name,e.errorType)).map(e=>({formValidator:!1,errorName:e.errorType,validator:e.validator}));e.push(...e),super.setValidators(s)}onInputEvent(e){this.onChange(e.value)}onEnterEvent(){this.state.saveNewPassword().subscribe()}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(f.oLl),i.Y36(f.E4y),i.Y36(f.mBN),i.Y36(K),i.Y36(f.vWQ),i.Y36(f.T_6),i.Y36(i.SBq),i.Y36(f.r$w))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldSaveNewPassword",""]],hostVars:7,hostBindings:function(e,t){1&e&&i.NdJ("change",function(e){return t.onInputEvent(e.target)})("input",function(e){return t.onInputEvent(e.target)}),2&e&&(i.uIk("aria-label",t.ariaLabel)("autocorrect",t.autocorrect)("autocapitalize",t.autocapitalize),i.ekj("has-errors",t.hasErrors)("required",t.isRequired))},features:[i._Bn([{provide:f.dvP,useExisting:(0,i.Gpc)(()=>e)}]),i.qOj]}),(0,T.gn)([(0,f.K4E)()],e.prototype,"onInputEvent",null),e})(),ge=(()=>{class e{constructor(e){this.state=e,this.state.isRememberMeUsed=!0}ngOnInit(){this.state.rememberMe="true"===this.byDefault}onChange(e){this.state.rememberMe=e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K))},e.\u0275cmp=i.Xpm({type:e,selectors:[["remember-me"]],inputs:{byDefault:"byDefault"},decls:1,vars:1,consts:[[3,"checked","changed"]],template:function(e,t){1&e&&(i.TgZ(0,"checkbox",0),i.NdJ("changed",function(e){return t.onChange(e)}),i.qZA()),2&e&&i.Q6J("checked",t.state.rememberMe)},directives:[f.bK4],encapsulation:2}),e})(),me=(()=>{class e extends f.dvP{constructor(e,t,s,i,n,r,o,a,c,u){super(t,s,n,o,a,c,u),this.langService=e,this.form=t,this.config=s,this.state=i,this.assetsConfig=n,this.passwordlessConfig=r,this.displayableValidatorErrorsService=o,this.errorService=a,this.elementRef=c,this.controlMobileZoomService=u,this.name="email",this.validators=[{formValidator:!1,errorName:f.p8$.REQUIRED,validator:B.kI.required}],this.ariaLabel=this.langService.tr("email"),this.autocorrect="off",this.autocapitalize="off",this.hasErrors=!1,this.isRequired=this.assetsConfig.get("enableFeValidation")}onInputEvent(e){e.value!==this.control.value&&this.state.passwordlessLoginInitiated&&!this.passwordlessConfig.passwordless&&this.passwordlessConfig.passwordlessInitialValue&&this.state.showLoginFormWithoutPassword(),this.onChange(e.value)}onEnterEvent(){this.state.restore().subscribe()}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(f.oLl),i.Y36(f.E4y),i.Y36(K),i.Y36(f.mBN),i.Y36(f.urf),i.Y36(f.vWQ),i.Y36(f.T_6),i.Y36(i.SBq),i.Y36(f.r$w))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldRestoreEmail",""]],hostVars:7,hostBindings:function(e,t){1&e&&i.NdJ("change",function(e){return t.onInputEvent(e.target)})("input",function(e){return t.onInputEvent(e.target)}),2&e&&(i.uIk("aria-label",t.ariaLabel)("autocorrect",t.autocorrect)("autocapitalize",t.autocapitalize),i.ekj("has-errors",t.hasErrors)("required",t.isRequired))},features:[i._Bn([{provide:f.dvP,useExisting:(0,i.Gpc)(()=>e)}]),i.qOj]}),(0,T.gn)([(0,f.K4E)()],e.prototype,"onInputEvent",null),e})(),ve=(()=>{class e{constructor(e,t,s){this.state=e,this.el=t,this.renderer=s,this.onDestroy=new l.xQ}ngOnInit(){"password"!==this.el.nativeElement.type&&this.state.showPassword$.next(!0),this.state.showPassword$.pipe((0,x.R)(this.onDestroy)).subscribe(e=>this.switchPassword(e))}switchPassword(e){this.renderer.setAttribute(this.el.nativeElement,"type",e?"text":"password")}ngOnDestroy(){this.onDestroy.next(),this.onDestroy.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(i.SBq),i.Y36(i.Qsj))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldLoginPassword",""],["","fieldRegisterPassword",""],["","fieldSaveNewPassword",""],["","fieldConfirmPassword",""]]}),e})();class be{constructor(e,t,s,i){this.state=e,this.form=t,this.passwordlessConfig=s,this.userNameFieldService=i}updateValue(e){const t=this.userNameFieldService.getFieldType(e),s=this.userNameFieldService.formatValue(e);this.setAttributes(t),this.directive.onChange(s)}setAttributes(e){this.directive.fieldName=e,this.directive.ariaLabel=e}}class Se extends be{constructor(e,t,s,i,n,r,o,a,c){super(e,t,s,i),this.state=e,this.form=t,this.passwordlessConfig=s,this.userNameFieldService=i,this.elementRef=n,this.document=r,this.userUpdateService=o,this.customFieldsService=a,this.renderer=c,this.destroy$=new l.xQ}onInputEvent(e){this.updateValue(e.value)}onEnterEvent(){this.state.register().subscribe()}onInit(e){this.directive=e,(0,h.aj)([this.userUpdateService.profile$,this.customFieldsService.isMultiStepEnabled$]).pipe((0,x.R)(this.destroy$),(0,v.h)(()=>!this.directive.isDisabled),(0,v.h)(([e,t])=>t),(0,y.U)(([e])=>e.email||e.phone),(0,v.h)(e=>{var t;return!e||e!==(null===(t=this.form.get("userName"))||void 0===t?void 0:t.value)}),(0,b.b)(e=>this.updateValueAndDisableInput(e))).subscribe()}onAfterViewInit(){}onDestroy(){this.destroy$.next(),this.destroy$.complete()}updateValueAndDisableInput(e){var t;this.updateValue(e),this.directive.disable(),e||this.renderer.setStyle(null===(t=this.elementRef.nativeElement)||void 0===t?void 0:t.parentElement,"display","none")}}class we extends be{constructor(e,t,s,i,n,r,o,a){super(e,t,s,i),this.state=e,this.form=t,this.passwordlessConfig=s,this.userNameFieldService=i,this.elementRef=n,this.document=r,this.passwordInputMockService=o,this.configService=a,this.destroy$=new l.xQ}onInputEvent(e){const t=this.form.get("userName").value;e.value!==t&&this.state.passwordlessLoginInitiated&&!this.passwordlessConfig.passwordless&&this.passwordlessConfig.passwordlessInitialValue&&this.state.showLoginFormWithoutPassword(),this.updateValue(e.value)}onEnterEvent(){this.configService.get("isSingleStep")||this.state.login().subscribe()}onInit(e){this.directive=e}onAfterViewInit(){this.passwordInputMockService.handleAutofilledPassword(this.elementRef).pipe((0,x.R)(this.destroy$)).subscribe()}onDestroy(){this.destroy$.next(),this.destroy$.complete()}}const Ce=new i.OlP("USER NAME STRATEGY"),ye={provide:Ce,deps:[K,f.H2,f.oLl,f.urf,f.RrL,i.SBq,n.K0,J,f.ZnY,te,i.Qsj,f.E4y],useFactory:function(e,t,s,i,n,r,o,a,c,u,l,h){switch(t.currentScreen){case"register":case"register_confirm":return new Se(e,s,i,n,r,o,a,c,l);default:return new we(e,s,i,n,r,o,u,h)}}};new i.OlP("PHONE STRATEGY");class Ee{constructor(e,t,s,i){this.state=e,this.form=t,this.passwordlessConfig=s,this.assetsConfigService=i}updateValue(e){this.directive.onChange(e)}}class Ye extends Ee{constructor(e,t,s,i,n,r,o,a,c){super(e,t,s,i),this.state=e,this.form=t,this.passwordlessConfig=s,this.assetsConfigService=i,this.elementRef=n,this.document=r,this.userUpdateService=o,this.customFieldsService=a,this.renderer=c,this.destroy$=new l.xQ}onInputEvent(e){this.updateValue(e.value)}onEnterEvent(){this.state.register().subscribe()}onInit(e){this.directive=e,(0,h.aj)([this.userUpdateService.profile$,this.customFieldsService.isMultiStepEnabled$]).pipe((0,x.R)(this.destroy$),(0,v.h)(()=>!this.directive.isDisabled),(0,v.h)(([e,t])=>t),(0,y.U)(([e])=>e.email),(0,v.h)(e=>{var t;return!e||e!==(null===(t=this.form.get("email"))||void 0===t?void 0:t.value)}),(0,b.b)(e=>this.updateValueAndDisableInput(e))).subscribe()}onAfterViewInit(){}onDestroy(){this.destroy$.next(),this.destroy$.complete()}updateValueAndDisableInput(e){var t;this.updateValue(e),this.directive.disable(),e||this.renderer.setStyle(null===(t=this.elementRef.nativeElement)||void 0===t?void 0:t.parentElement,"display","none")}}class _e extends Ee{constructor(e,t,s,i,n,r,o,a){super(t,s,i,n),this.configService=e,this.state=t,this.form=s,this.passwordlessConfig=i,this.assetsConfigService=n,this.elementRef=r,this.document=o,this.passwordInputMockService=a,this.destroy$=new l.xQ}onInputEvent(e){const t=this.form.get("email").value;e.value!==t&&this.state.passwordlessLoginInitiated&&!this.passwordlessConfig.passwordless&&this.passwordlessConfig.passwordlessInitialValue&&this.state.showLoginFormWithoutPassword(),this.updateValue(e.value)}onEnterEvent(){this.configService.get("isSingleStep")||this.state.login().subscribe()}onInit(e){this.directive=e}onAfterViewInit(){this.passwordInputMockService.handleAutofilledPassword(this.elementRef).pipe((0,x.R)(this.destroy$)).subscribe()}onDestroy(){this.destroy$.next(),this.destroy$.complete()}}const ke=new i.OlP("EMAIL STRATEGY"),Ie={provide:ke,deps:[K,f.H2,f.oLl,f.urf,i.SBq,n.K0,J,f.ZnY,f.mBN,te,i.Qsj,f.E4y],useFactory:function(e,t,s,i,n,r,o,a,c,u,l,h){switch(t.currentScreen){case"register":case"register_confirm":return new Ye(e,s,i,c,n,r,o,a,l);default:return new _e(h,e,s,i,c,n,r,u)}}};let Le=(()=>{class e extends f.dvP{constructor(e,t,s,i,n,r,o,a,c,u,l,h,d,p,g,m,v){super(t,s,i,c,o,a,u),this.langService=e,this.form=t,this.config=s,this.assetsConfig=i,this.passwordlessConfig=n,this.state=r,this.errorService=o,this.elementRef=a,this.displayableValidatorErrorsService=c,this.controlMobileZoomService=u,this.userNameFieldService=l,this.screenService=h,this.userAuthFieldValidatorsService=d,this.passwordInputMockService=p,this.renderer=g,this.document=m,this.strategy=v,this.name="userName",this.validators=this.userAuthFieldValidatorsService.userNameValidators,this.fieldName=f.HNv.EMAIL,this.ariaLabel=this.langService.tr(f.HNv.EMAIL),this.autocorrect="off",this.autocapitalize="off",this.hasErrors=!1,this.isRequired=this.assetsConfig.get("enableFeValidation"),this.isDisabled=!1}onInputEvent(e){this.strategy.onInputEvent(e)}ngOnInit(){super.ngOnInit(),this.strategy.onInit(this)}ngAfterViewInit(){super.ngAfterViewInit(),this.strategy.onAfterViewInit()}ngOnDestroy(){super.ngOnDestroy(),this.strategy.onDestroy()}onEnterEvent(){this.strategy.onEnterEvent()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(f.oLl),i.Y36(f.E4y),i.Y36(f.mBN),i.Y36(f.urf),i.Y36(K),i.Y36(f.T_6),i.Y36(i.SBq),i.Y36(f.vWQ),i.Y36(f.r$w),i.Y36(f.RrL),i.Y36(f.H2),i.Y36(f.$iy),i.Y36(te),i.Y36(i.Qsj),i.Y36(n.K0),i.Y36(Ce))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldUserName",""],["","fieldLoginEmail",""]],hostVars:9,hostBindings:function(e,t){1&e&&i.NdJ("change",function(e){return t.onInputEvent(e.target)})("input",function(e){return t.onInputEvent(e.target)}),2&e&&(i.Ikx("disabled",t.isDisabled),i.uIk("name",t.fieldName)("aria-label",t.ariaLabel)("autocorrect",t.autocorrect)("autocapitalize",t.autocapitalize),i.ekj("has-errors",t.hasErrors)("required",t.isRequired))},features:[i._Bn([ye,{provide:f.dvP,useExisting:(0,i.Gpc)(()=>e)}]),i.qOj]}),(0,T.gn)([(0,f.K4E)()],e.prototype,"onInputEvent",null),e})(),Fe=(()=>{class e extends f.dvP{constructor(e,t,s,i,n,r,o,a,c,u,l,h,d,f,p){super(t,s,i,c,o,a,u),this.langService=e,this.form=t,this.config=s,this.assetsConfig=i,this.passwordlessConfig=n,this.state=r,this.errorService=o,this.elementRef=a,this.displayableValidatorErrorsService=c,this.controlMobileZoomService=u,this.userAuthFieldValidatorsService=l,this.passwordInputMockService=h,this.renderer=d,this.document=f,this.strategy=p,this.name="email",this.validators=this.userAuthFieldValidatorsService.emailValidators,this.fieldName="email",this.ariaLabel=this.langService.tr("email"),this.autocorrect="off",this.autocapitalize="off",this.hasErrors=!1,this.isRequired=this.assetsConfig.get("enableFeValidation"),this.isDisabled=!1}onInputEvent(e){this.strategy.onInputEvent(e)}ngOnInit(){super.ngOnInit(),this.strategy.onInit(this)}ngAfterViewInit(){super.ngAfterViewInit(),this.strategy.onAfterViewInit()}ngOnDestroy(){super.ngOnDestroy(),this.strategy.onDestroy()}onEnterEvent(){this.strategy.onEnterEvent()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(f.oLl),i.Y36(f.E4y),i.Y36(f.mBN),i.Y36(f.urf),i.Y36(K),i.Y36(f.T_6),i.Y36(i.SBq),i.Y36(f.vWQ),i.Y36(f.r$w),i.Y36(f.$iy),i.Y36(te),i.Y36(i.Qsj),i.Y36(n.K0),i.Y36(ke))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldRegisterEmail",""],["","fieldEmail",""]],hostVars:9,hostBindings:function(e,t){1&e&&i.NdJ("change",function(e){return t.onInputEvent(e.target)})("input",function(e){return t.onInputEvent(e.target)}),2&e&&(i.Ikx("disabled",t.isDisabled),i.uIk("name",t.fieldName)("aria-label",t.ariaLabel)("autocorrect",t.autocorrect)("autocapitalize",t.autocapitalize),i.ekj("has-errors",t.hasErrors)("required",t.isRequired))},features:[i._Bn([Ie,{provide:f.dvP,useExisting:(0,i.Gpc)(()=>e)}]),i.qOj]}),(0,T.gn)([(0,f.K4E)()],e.prototype,"onInputEvent",null),e})(),Re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez,f.nDK,f.LUR]]}),e})(),Ae=(()=>{class e extends f.dvP{constructor(e,t,s,i,n,r,o,a,c){super(r,s,i,o,a,n,c),this.langService=e,this.state=t,this.config=s,this.assetsConfig=i,this.elementRef=n,this.form=r,this.displayableValidatorErrorsService=o,this.errorService=a,this.controlMobileZoomService=c,this.ariaLabel=this.langService.tr("confirm password"),this.hasErrors=!1,this.autocorrect="off",this.autocapitalize="off",this.isRequired=this.assetsConfig.get("enableFeValidation"),this.name="confirmPassword",this.validators=[{errorName:f.p8$.PASSWORD_NOT_CONFIRMED,formValidator:!0,validator:f.dNr.equalValidator(this.name,"password",f.p8$.PASSWORD_NOT_CONFIRMED)}]}onInputEvent(e){this.onChange(e.value)}onEnterEvent(){this.state.register().subscribe()}stopInputEvent(e){e.preventDefault(),e.stopPropagation()}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(K),i.Y36(f.E4y),i.Y36(f.mBN),i.Y36(i.SBq),i.Y36(f.oLl),i.Y36(f.vWQ),i.Y36(f.T_6),i.Y36(f.r$w))},e.\u0275dir=i.lG2({type:e,selectors:[["","fieldConfirmPassword",""]],hostVars:7,hostBindings:function(e,t){1&e&&i.NdJ("change",function(e){return t.onInputEvent(e.target)})("input",function(e){return t.onInputEvent(e.target)})("copy",function(e){return t.stopInputEvent(e)})("paste",function(e){return t.stopInputEvent(e)})("cut",function(e){return t.stopInputEvent(e)}),2&e&&(i.uIk("aria-label",t.ariaLabel)("autocorrect",t.autocorrect)("autocapitalize",t.autocapitalize),i.ekj("has-errors",t.hasErrors)("required",t.isRequired))},features:[i._Bn([{provide:f.dvP,useExisting:(0,i.Gpc)(()=>e)}]),i.qOj]}),(0,T.gn)([(0,f.K4E)()],e.prototype,"onInputEvent",null),e})(),xe=(()=>{class e{constructor(e,t,s,i){this.view=e,this.assetsConfig=t,this.passwordlessConfig=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return this.isRequired()}isRequired(){const e=this.fieldName.toLowerCase(),t=this.assetsConfig.get("isEmailConfirmationRequired"),s=this.assetsConfig.get("emailRegistrationEnabled")||!this.assetsConfig.get("phoneRegistrationEnabled"),i=this.assetsConfig.get("isPasswordConfirmationRequired"),{isGeneralPasswordlessRegistration:n}=this.passwordlessConfig;switch(e){case"email":return t&&s;case"password":return i&&!n;default:return!1}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.mBN),i.Y36(f.urf),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfRequireConfirm",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},inputs:{fieldName:["showIfRequireConfirm","fieldName"]},features:[i._Bn([f.jSz])]}),e})(),Ve=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),Oe=(()=>{class e{constructor(e,t,s,i){this.form=e,this.errors=t,this.lang=s,this.assetsConfig=i,this.onDestroy=new l.xQ,this.name="recaptchaResponse",this.control=new B.NI("")}onResolve(e){this.control.setValue(e),e&&this.errors.reset()}ngOnInit(){this.form.addControl(this.name,this.control),this.assetsConfig.get("enableFeValidation")&&this.validateCaptcha()}validateCaptcha(){this.control.setValidators(B.kI.required),this.form.isSubmitted().pipe((0,x.R)(this.onDestroy),(0,y.U)(()=>this.control.invalid),(0,v.h)(e=>e)).subscribe(()=>this.showError())}showError(){this.errors.set([{message:this.lang.trc("piano.id","Captcha verification is required.")}])}ngOnDestroy(){this.form.removeControl(this.name)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.oLl),i.Y36(f.T_6),i.Y36(f.CfQ),i.Y36(f.mBN))},e.\u0275dir=i.lG2({type:e,selectors:[["recaptcha"]],hostBindings:function(e,t){1&e&&i.NdJ("resolved",function(e){return t.onResolve(e)})}}),e})();function Pe(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"recaptcha",1),i.NdJ("resolved",function(){return i.CHM(e),i.oxw().resolved()}),i.ALo(2,"async"),i.qZA(),i.BQk()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("size",i.lcZ(2,2,e.size$))("siteKey",e.siteKey)}}let Ge=(()=>{class e extends O.wT{}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["recaptcha"]],features:[i.qOj],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),Ne=(()=>{class e{constructor(e,t,s,i,n,r,o){this.captchaState=e,this.config=t,this.assetsConfig=s,this.recaptchaConfig=i,this.container=n,this.browser=r,this.windowRef=o,this.onDestroy$=new l.xQ,this.showCaptcha$=this.captchaState.reCaptchaV2Visible$.pipe((0,v.h)(()=>this.useCaptcha),(0,A.g)(300)),this.size$=this.getSize(),this.siteKey=this.recaptchaConfig.get("recaptchaSiteKey")}getSize(){return this.showCaptcha$.pipe((0,v.h)(e=>e),(0,y.U)(()=>this.container.getWidgetWidth()),(0,y.U)(e=>!e||e<400?"compact":"regular"))}get useCaptcha(){return this.assetsConfig.useCaptcha&&!!this.recaptchaConfig.get("recaptchaSiteKey")}resolved(){if(this.browser.isSafari)try{this.windowRef.innerWidth=this.container.getWidgetWidth()}catch(e){}}ngAfterViewInit(){this.showCaptcha$.pipe((0,v.h)(e=>e),(0,V.T)(1),(0,v.h)(()=>!!this.recaptcha),(0,x.R)(this.onDestroy$)).subscribe(()=>this.recaptcha.reset()),this.showCaptcha$.pipe((0,_.w)(()=>this.captchaState.recaptchaSizeObserver$),(0,x.R)(this.onDestroy$)).subscribe()}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(D),i.Y36(f.E4y),i.Y36(f.mBN),i.Y36(f.JK3),i.Y36(f.JeS),i.Y36(f.eJU),i.Y36(f.m9D))},e.\u0275cmp=i.Xpm({type:e,selectors:[["re-captcha"]],viewQuery:function(e,t){if(1&e&&i.Gf(Ge,5),2&e){let e;i.iGM(e=i.CRH())&&(t.recaptcha=e.first)}},decls:2,vars:3,consts:[[4,"ngIf"],[1,"re-captcha",3,"size","siteKey","resolved"]],template:function(e,t){1&e&&(i.YNc(0,Pe,3,4,"ng-container",0),i.ALo(1,"async")),2&e&&i.Q6J("ngIf",i.lcZ(1,1,t.showCaptcha$))},directives:[n.O5,Ge,Oe],pipes:[n.Ov],encapsulation:2}),e})(),Te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})();function Be(e,t){return 0===t&&e||1===t&&!e}let Me=(()=>{class e{constructor(e,t,s){this.view=e,this.state=t,this.viewManager=s,this.when=0}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.state.saveNewPassword$.pipe((0,y.U)(e=>!Be(e,this.when)),(0,F.O)(!0))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(K),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","beforeNewPasswordRequired",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),je=(()=>{class e{constructor(e,t,s){this.view=e,this.state=t,this.viewManager=s,this.when=0}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.state.restore$.pipe((0,y.U)(e=>!Be(e,this.when)),(0,F.O)(!0))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(K),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","beforeRestoreRequired",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),ze=(()=>{class e{constructor(e,t,s){this.view=e,this.state=t,this.viewManager=s,this.when=1}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.state.restore$.pipe((0,y.U)(e=>!Be(e,this.when)),(0,F.O)(!1))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(K),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","afterRestoreRequired",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),$e=(()=>{class e{constructor(e,t,s){this.view=e,this.state=t,this.viewManager=s,this.when=1}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.state.saveNewPassword$.pipe((0,y.U)(e=>!Be(e,this.when)),(0,F.O)(!1))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(K),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","afterNewPasswordRequired",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),Ue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),De=(()=>{class e{constructor(e,t,s,i){this.screenService=e,this.config=t,this.el=s,this.rendererService=i,this.tabindex="0"}ngOnInit(){this.config.get("disableSignUp")&&("register"===this.showScreen&&this.detach(),"login"===this.showScreen&&(this.sub=this.screenService.getScreen().pipe((0,v.h)(e=>"login"===e)).subscribe(()=>this.detach())))}detach(){this.rendererService.detachView(this.el.nativeElement)}onClick(){this.config.get("isPreview")||this.screenService.setScreen(this.showScreen)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.H2),i.Y36(f.E4y),i.Y36(i.SBq),i.Y36(f.Vht))},e.\u0275dir=i.lG2({type:e,selectors:[["","showScreen",""]],hostVars:1,hostBindings:function(e,t){1&e&&i.NdJ("keydown.enter",function(){return t.onClick()})("keydown.space",function(){return t.onClick()})("click",function(){return t.onClick()}),2&e&&i.uIk("tabindex",t.tabindex)},inputs:{showScreen:"showScreen"}}),e})(),qe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),Qe=(()=>{class e{constructor(e,t,s){this.view=e,this.authsConfig=t,this.viewManager=s}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return this.authsConfig.isAnySocialAuthAvailable}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.jBO),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfSocialAuthAvailable",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),Ze=(()=>{class e{constructor(e,t,s){this.view=e,this.authsConfig=t,this.viewManager=s}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return this.authsConfig.get("isPasswordLinked")&&!this.authsConfig.get("isSocialUserUsesPasswordless")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.jBO),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfPasswordAuthAvailable",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),Je=(()=>{class e{constructor(e,t,s){this.view=e,this.authsConfig=t,this.viewManager=s}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return!this.authsConfig.get("isPasswordLinked")||this.authsConfig.get("isSocialUserUsesPasswordless")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.jBO),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfPasswordAuthNotAvailable",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),He=(()=>{class e{constructor(e,t,s){this.view=e,this.config=t,this.viewManager=s}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return this.config.get("isNeedEmail")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfEmailNeeded",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),Ke=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),We=(()=>{class e{constructor(e,t,s){this.state=e,this.renderer=t,this.el=s,this.onDestroy$=new l.xQ}ngOnInit(){this.observer.pipe((0,x.R)(this.onDestroy$)).subscribe({next:e=>this.onSwitch(e)})}onSwitch(e){const t=this.isVisible(e)?"block":"none";this.renderer.setStyle(this.el.nativeElement,"display",t)}isVisible(e){return!1}get observer(){return this.state.showPassword$}setShowPassword(e){this.state.showPassword$.next(e)}ngOnDestroy(){this.onDestroy$.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(i.Qsj),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e}),e})();const Xe=["hidePassword",""],et=["*"];let tt=(()=>{class e extends We{constructor(e,t,s,i){super(e,t,s),this.state=e,this.renderer=t,this.el=s,this.langService=i,this.ariaLabel=this.langService.tr("Hide password")}onClickEvent(){this.setShowPassword(!1),this.onSwitch(!1)}isVisible(e){return e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(f.CfQ))},e.\u0275cmp=i.Xpm({type:e,selectors:[["","hidePassword",""],["","hideLoginPassword",""],["","hideRegisterPassword",""],["","hideNewPassword",""]],hostVars:1,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t.onClickEvent()}),2&e&&i.uIk("aria-label",t.ariaLabel)},features:[i.qOj],attrs:Xe,ngContentSelectors:et,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2}),e})();const st=["showPassword",""],it=["*"];let nt=(()=>{class e extends We{constructor(e,t,s,i){super(e,t,s),this.state=e,this.renderer=t,this.el=s,this.langService=i,this.ariaLabel=this.langService.tr("Show password")}onClickEvent(){this.setShowPassword(!0),this.onSwitch(!0)}isVisible(e){return!e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(f.CfQ))},e.\u0275cmp=i.Xpm({type:e,selectors:[["","showPassword",""],["","showLoginPassword",""],["","showRegisterPassword",""],["","showNewPassword",""]],hostVars:1,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t.onClickEvent()}),2&e&&i.uIk("aria-label",t.ariaLabel)},features:[i.qOj],attrs:st,ngContentSelectors:it,decls:1,vars:0,template:function(e,t){1&e&&(i.F$t(),i.Hsn(0))},encapsulation:2}),e})(),rt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez,f.jH1]]}),e})(),ot=(()=>{class e{constructor(e,t){this.state=e,this.config=t,this.innerHtml="",this.innerHtml=this.config.get("isPreview")?"some.user@example.com":this.state.userEmail}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(K),i.Y36(f.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","userEmail",""]],hostVars:1,hostBindings:function(e,t){2&e&&i.Ikx("innerHTML",t.innerHtml,i.oJD)}}),e})(),at=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})();var ct=(()=>{return(e=ct||(ct={}))[e.CONFIRMED=0]="CONFIRMED",e[e.ALREADY_CONFIRMED=50002]="ALREADY_CONFIRMED",e[e.EXPIRED=50001]="EXPIRED",ct;var e})();let ut=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.verificationCodeService=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.verificationCodeService.getResponse().pipe((0,y.U)(e=>e.code===ct.ALREADY_CONFIRMED),(0,F.O)(!1))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.WRB),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfVerificationCodeAlreadyConfirmed",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),lt=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.verificationCodeService=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.verificationCodeService.getResponse().pipe((0,y.U)(e=>this.isPaymentOrGift(e.type)),(0,F.O)(!1))}isPaymentOrGift(e){return"PAYMENT"===e||"GIFT"===e||"DYNAMIC"===e}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.WRB),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfVerificationCodeCanStartCheckout",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),ht=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.verificationCodeService=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.config.get("isPreview")?(0,a.of)(!0):this.verificationCodeService.getResponse().pipe((0,y.U)(e=>e.code===ct.CONFIRMED),(0,F.O)(!1))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.WRB),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfVerificationCodeConfirmed",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),dt=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.verificationCodeService=s,this.viewManager=i,this.attributes={role:"alert"},this.codes=new Set([ct.EXPIRED,ct.CONFIRMED,ct.ALREADY_CONFIRMED])}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.verificationCodeService.getResponse().pipe((0,y.U)(e=>this.isErrorCode(e.code)),(0,F.O)(!1))}isErrorCode(e){return!this.codes.has(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.WRB),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfVerificationCodeError",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),ft=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.verificationCodeService=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.verificationCodeService.getResponse().pipe((0,y.U)(e=>e.code===ct.EXPIRED),(0,F.O)(!1))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.WRB),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfVerificationCodeExpired",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),pt=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.verificationCodeService=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.verificationCodeService.getResponse().pipe((0,y.U)(e=>!!e.rid),(0,F.O)(!1))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.WRB),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfVerificationCodeGiveAccess",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),gt=(()=>{class e{constructor(e,t){this.verificationCodeService=e,this.config=t,this.display="none"}ngOnInit(){this.renderDisplayStyle(!1),this.subscription=this.verificationCodeService.verificationCodeResponse.pipe((0,v.h)(e=>!!e)).subscribe(this.update.bind(this))}ngOnDestroy(){this.subscription.unsubscribe()}renderDisplayStyle(e,t="inline"){"inline"===t&&(this.display=e?"inline":"none"),"block"===t&&(this.display=e?"block":"none")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.WRB),i.Y36(f.E4y))},e.\u0275dir=i.lG2({type:e}),e})(),mt=(()=>{class e extends gt{constructor(e,t,s){super(e,t),this.verificationCodeService=e,this.config=t,this.eventsService=s,this.display="none",this.tabIndex="0"}update(e){this.renderDisplayStyle(!0)}onClickEvent(e){e.preventDefault();const t=this.verificationCodeService.verificationCodeResponse.getValue();(null==t?void 0:t.show_offer_params)&&this.eventsService.verificationCodeStartCheckout(t.show_offer_params)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.WRB),i.Y36(f.E4y),i.Y36(f.nCZ))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionVerificationCodeStartCheckout",""]],hostVars:3,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)}),2&e&&(i.uIk("tabindex",t.tabIndex),i.Udp("display",t.display))},features:[i.qOj]}),e})(),vt=(()=>{class e extends gt{constructor(e,t,s,i,n){super(e,t),this.verificationCodeService=e,this.config=t,this.renderer=s,this.el=i,this.langService=n,this.display="none"}ngOnInit(){super.ngOnInit(),this.langChangedSubscription=this.langService.onLangChange().subscribe(()=>this.update())}ngOnDestroy(){super.ngOnDestroy(),this.langChangedSubscription.unsubscribe()}update(e){const t=this.getMessage(e),s=this.renderer.createText(this.langService.trc("piano.id",t));this.removeTextElement(),this.renderer.appendChild(this.el.nativeElement,s),this.renderDisplayStyle(!0)}getMessage(e){return(null==e?void 0:e.message)?e.message:this.verificationCodeService.verificationCodeResponse.getValue()?this.verificationCodeService.verificationCodeResponse.getValue().message:""}removeTextElement(){const e=this.el.nativeElement.childNodes;for(const t of e)this.renderer.removeChild(this.el.nativeElement,t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.WRB),i.Y36(f.E4y),i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(f.CfQ))},e.\u0275dir=i.lG2({type:e,selectors:[["","verificationCodeError",""]],hostVars:2,hostBindings:function(e,t){2&e&&i.Udp("display",t.display)},features:[i.qOj]}),e})(),bt=(()=>{class e extends gt{constructor(e,t,s,i){super(e,t),this.verificationCodeService=e,this.config=t,this.renderer=s,this.el=i,this.display="none"}update(e){const t=this.renderer.createText(e.resource_name);this.renderer.appendChild(this.el.nativeElement,t),this.renderDisplayStyle(!0)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.WRB),i.Y36(f.E4y),i.Y36(i.Qsj),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","verificationCodeResource",""]],hostVars:2,hostBindings:function(e,t){2&e&&i.Udp("display",t.display)},features:[i.qOj]}),e})(),St=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),wt=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.passwordlessConfig=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return this.passwordlessConfig.passwordlessSuccess}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.urf),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showAfterPasswordlessAuth",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),Ct=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.viewManager=s,this.error=i,this.isVisible()&&this.error.set([{message:this.config.get("jsonpError").error_description}])}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return!!this.config.get("jsonpError")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.jSz),i.Y36(f.T_6))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfPasswordlessAuthFailed",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),yt=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.passwordlessConfig=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return!(this.config.get("customEvents")||this.config.get("jsonpError")||this.config.get("customParams")||this.passwordlessConfig.passwordlessSuccess)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.urf),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfPasswordlessLinkSent",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),Et=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.passwordlessConfig=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.passwordlessConfig.isCreatePasswordlessUser$.pipe((0,y.U)(e=>!e))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.urf),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","hideIfCreatePasswordlessUser",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),Yt=(()=>{class e{constructor(e,t,s,i){this.view=e,this.config=t,this.passwordlessConfig=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return(0,h.aj)(this.passwordlessConfig.isPasswordless$,this.passwordlessConfig.isCreatePasswordlessUser$).pipe((0,y.U)(([e,t])=>e||t),(0,y.U)(e=>!e))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.urf),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","hideIfPasswordlessOrCreatePasswordlessUser",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),_t=(()=>{class e{constructor(e,t,s){this.view=e,this.config=t,this.viewManager=s}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return!this.config.get("isSingleStep")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.E4y),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","hideIfSingleStep",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),kt=(()=>{class e{constructor(e,t,s){this.view=e,this.passwordlessConfig=t,this.viewManager=s}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return(0,h.aj)(this.passwordlessConfig.isPasswordless$,this.passwordlessConfig.isCreatePasswordlessUser$).pipe((0,y.U)(([e,t])=>e||t))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(f.urf),i.Y36(f.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfPasswordlessOrCreatePasswordlessUser",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,f.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([f.jSz])]}),e})(),It=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})();function Lt(e,t){1&e&&(i.TgZ(0,"div",1),i._UZ(1,"div",2),i.qZA())}let Ft=(()=>{class e{constructor(e){this.spinnerService=e,this.isVisible$=this.spinnerService.isSpinnerVisible$}}return e.\u0275fac=function(t){return new(t||e)(i.Y36($))},e.\u0275cmp=i.Xpm({type:e,selectors:[["spinner"]],decls:2,vars:3,consts:[["class","spinner-shading",4,"ngIf"],[1,"spinner-shading"],[1,"spinner"]],template:function(e,t){1&e&&(i.YNc(0,Lt,2,0,"div",0),i.ALo(1,"async")),2&e&&i.Q6J("ngIf",i.lcZ(1,1,t.isVisible$))},directives:[n.O5],pipes:[n.Ov],encapsulation:2}),e})(),Rt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[$],imports:[[n.ez]]}),e})(),At=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),xt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})(),Vt=(()=>{class e{constructor(e,t,s){this.el=e,this.assetsConfig=t,this.renderer=s}ngAfterViewInit(){const e=this.renderer.createText(this.assetsConfig.get("appName"));this.renderer.appendChild(this.el.nativeElement,e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq),i.Y36(f.mBN),i.Y36(i.Qsj))},e.\u0275dir=i.lG2({type:e,selectors:[["","appName",""]]}),e})(),Ot=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),Pt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),Gt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),Nt=(()=>{class e{constructor(e,t){this.socialAuth=e,this.state=t}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(W),i.Y36(K))},e.\u0275dir=i.lG2({type:e,selectors:[["","openpassPlaceholder",""]]}),e})(),Tt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),Bt=(()=>{class e{constructor(e,t,s,i,n,r){this.langService=e,this.socialAuth=t,this.config=s,this.authsConfig=i,this.renderer=n,this.el=r,this.className="social-button",this.ariaLabel=`${this.langService.tr("Sign in with")} ${this.socialAuth}`}onClick(){this.config.get("isPreview")||this.socialAuth.socialLogin(this.socialName).subscribe()}ngOnInit(){this.authsConfig.isSocialAuthAvailable(this.socialName)||this.renderer.detachView(this.el.nativeElement)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.CfQ),i.Y36(W),i.Y36(f.E4y),i.Y36(f.jBO),i.Y36(f.Vht),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t.onClick()}),2&e&&i.Tol(t.className)}}),e})();const Mt=["*"];let jt=(()=>{class e extends Bt{constructor(){super(...arguments),this.socialName=f._s0.FACEBOOK}}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["facebook-signin"]],features:[i.qOj],ngContentSelectors:Mt,decls:2,vars:1,consts:[["type","button",1,"btn","social","facebook"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"button",0),i.Hsn(1),i.qZA()),2&e&&i.uIk("aria-label",t.ariaLabel)},encapsulation:2}),e})();const zt=["*"];let $t=(()=>{class e extends Bt{constructor(){super(...arguments),this.socialName=f._s0.GOOGLE}}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["google-signin"]],features:[i.qOj],ngContentSelectors:zt,decls:2,vars:1,consts:[["type","button",1,"btn","social","google"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"button",0),i.Hsn(1),i.qZA()),2&e&&i.uIk("aria-label",t.ariaLabel)},encapsulation:2}),e})();const Ut=["*"];let Dt=(()=>{class e extends Bt{constructor(){super(...arguments),this.socialName=f._s0.LINKEDIN}}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["linkedin-signin"]],features:[i.qOj],ngContentSelectors:Ut,decls:2,vars:1,consts:[["type","button",1,"btn","social","linkedin"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"button",0),i.Hsn(1),i.qZA()),2&e&&i.uIk("aria-label",t.ariaLabel)},encapsulation:2}),e})();const qt=["*"];let Qt=(()=>{class e extends Bt{constructor(){super(...arguments),this.socialName=f._s0.TWITTER}}return e.\u0275fac=function(){let t;return function(s){return(t||(t=i.n5z(e)))(s||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["twitter-signin"]],features:[i.qOj],ngContentSelectors:qt,decls:2,vars:1,consts:[["type","button",1,"btn","social","twitter"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"button",0),i.Hsn(1),i.qZA()),2&e&&i.uIk("aria-label",t.ariaLabel)},encapsulation:2}),e})(),Zt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),Jt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[],imports:[[n.ez,f.Pin]]}),e})(),Ht=(()=>{class e{constructor(e,t,s,i){if(this.config=e,this.renderer=t,this.el=s,this.authsConfig=i,this.config.get("isPreview"))return void this.renderTitle("Social title");const n=this.getSocialTitle(this.config.get("socialType")),r=`social-title-${(this.authsConfig.getSocialType(this.config.get("socialType"))===f._s0.OPENID?"openid":this.config.get("socialType")||"").toLowerCase()}`;this.renderTitle(n),this.renderer.addClass(this.el.nativeElement,r)}getSocialTitle(e){switch(e){case f._s0.FACEBOOK:return"Facebook";case f._s0.GOOGLE:return"Google";case f._s0.TWITTER:return"Twitter";case f._s0.LINKEDIN:return"LinkedIn";case f._s0.APPLE:return"Apple";case f._s0.MSQA:return"Microsoft";default:return`${e.charAt(0).toUpperCase()}${e.slice(1).toLowerCase()}`}}renderTitle(e){const t=this.renderer.createText(e);this.renderer.appendChild(this.el.nativeElement,t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.E4y),i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(f.jBO))},e.\u0275cmp=i.Xpm({type:e,selectors:[["social-title"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),Kt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})();var Wt=(()=>{return(e=Wt||(Wt={})).ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.IEArrowLeft="Left",e.ArrowRight="ArrowRight",e.IEArrowRight="Right",Wt;var e})();class Xt{constructor(e){this.element=e,this.valueChange=new i.vpe,this.pasteFromClipboard=new i.vpe,this.valueClear=new i.vpe,this.autofill=new i.vpe,this.focusNext=new i.vpe,this.focusPrevious=new i.vpe,this.updateInputValueNatively=new l.xQ,this.subscription=this.updateInputValueNatively.asObservable().pipe((0,Y.b)(1)).subscribe(e=>this.element.nativeElement.value=e)}ngOnDestroy(){this.subscription.unsubscribe()}onKeyUp(e){"Backspace"===e.key?(this.updateInputValueNatively.next(""),this.valueChange.emit(""),this.valueClear.emit()):Xt.SPECIAL_CHARACTERS.includes(e.key)&&(this.updateInputValueNatively.next(""),this.valueChange.emit(""))}onKeyDown(e){Xt.SPECIAL_CHARACTERS.includes(e.key)?e.preventDefault():Xt.NAVIGATION_KEYS.includes(e.key)&&this.handleNavigationKeys(e)}onInput(e){var t;const s=null===(t=e.target)||void 0===t?void 0:t.value,i=(null==s?void 0:s.split(""))||[];if(e.data&&!i.includes(e.data)&&i.push(e.data),i.length){if(i.length<6){const e=i.reverse().find(e=>/[0-9]/.test(e))||"";return this.valueChange.emit(e),void this.updateInputValueNatively.next(e)}e.stopPropagation(),e.preventDefault(),i.every(e=>/[0-9]/.test(e))&&6===i.length?this.autofill.emit(i):(this.updateInputValueNatively.next(""),this.autofill.emit(new Array(6).fill("")))}}onPaste(e){const t=e.clipboardData.getData("text/plain").replace(" ","").split("");t.every(e=>+e>=0&&+e<10)&&6===t.length&&this.pasteFromClipboard.emit(t),e.stopPropagation(),e.preventDefault()}handleNavigationKeys(e){switch(e.key){case Wt.ArrowLeft:case Wt.IEArrowLeft:this.focusPrevious.emit();break;case Wt.ArrowRight:case Wt.IEArrowRight:this.focusNext.emit();break;case Wt.ArrowUp:case Wt.ArrowDown:e.stopPropagation(),e.preventDefault()}}}Xt.SPECIAL_CHARACTERS=["e","E","-","+",".",","],Xt.NAVIGATION_KEYS=Object.values(Wt),Xt.\u0275fac=function(e){return new(e||Xt)(i.Y36(i.SBq))},Xt.\u0275dir=i.lG2({type:Xt,selectors:[["","digitalCodeInputItem",""]],hostBindings:function(e,t){1&e&&i.NdJ("keyup",function(e){return t.onKeyUp(e)})("keydown",function(e){return t.onKeyDown(e)})("input",function(e){return t.onInput(e)})("paste",function(e){return t.onPaste(e)})},outputs:{valueChange:"valueChange",pasteFromClipboard:"pasteFromClipboard",valueClear:"valueClear",autofill:"autofill",focusNext:"focusNext",focusPrevious:"focusPrevious"}});const es=["codeSymbolInput"];function ts(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"input",2,3),i.NdJ("valueChange",function(t){const s=i.CHM(e).index;return i.oxw().updateValue(t,s)})("pasteFromClipboard",function(t){return i.CHM(e),i.oxw().updateValues(t)})("autofill",function(t){return i.CHM(e),i.oxw().updateValues(t)})("valueClear",function(){const t=i.CHM(e).index;return i.oxw().onValueClear(t)})("focusPrevious",function(){const t=i.CHM(e).index;return i.oxw().setFocus(t-1)})("focusNext",function(){const t=i.CHM(e).index;return i.oxw().setFocus(t+1)}),i.qZA()}if(2&e){const e=t.index,s=i.oxw();i.Q6J("disabled",s.isDisabled)("value",s.codeValues[e]),i.uIk("aria-label",(0===e?s.ariaLabelFirstInput:"")+" "+s.ariaLabel+" "+(e+1))}}class ss{constructor(e,t,s,i,n){this.langService=e,this.formService=t,this.errorService=s,this.config=i,this.digitalCodeSubmitService=n,this.codeLength=new Array(6),this.codeValues=[...ss.EMPTY_VALUES],this.isDisabled=!1,this.ariaLabelFirstInput=this.langService.tr("Please enter verification code."),this.ariaLabel=this.langService.tr("Digit")}ngOnInit(){this.formService.addControl("digitalCode",new B.NI([...ss.EMPTY_VALUES])),this.formService.get("digitalCode").valueChanges.pipe((0,L.x)()).subscribe(e=>this.codeValues=[...e])}ngOnDestroy(){this.formService.removeControl("digitalCode")}updateValue(e,t){var s;this.codeValues[t]=e,this.formService.patchValue({digitalCode:this.codeValues}),this.errorService.set([]),this.submit(),e&&(null===(s=this.codeSymbolInputRefs.get(t+1))||void 0===s||s.nativeElement.focus())}updateValues(e){this.codeValues=[...e],this.formService.patchValue({digitalCode:this.codeValues}),this.errorService.set([]),this.submit()}submit(){var e;6!==this.codeValues.join("").length||this.config.get("isPreview")||(this.isDisabled=!0,null===(e=this.subscription)||void 0===e||e.unsubscribe(),this.subscription=this.digitalCodeSubmitService.submit().pipe((0,b.b)(()=>this.hideIphoneKeyboard()),(0,E.K)(()=>(this.isDisabled=!1,setTimeout(()=>this.setFocus(0)),u.E))).subscribe())}onValueClear(e){this.setFocus(e-1)}setFocus(e){var t;null===(t=this.codeSymbolInputRefs.get(e))||void 0===t||t.nativeElement.focus()}hideIphoneKeyboard(){this.codeSymbolInputRefs.forEach(e=>e.nativeElement.blur())}}ss.EMPTY_VALUES=new Array(6).fill(""),ss.\u0275fac=function(e){return new(e||ss)(i.Y36(f.CfQ),i.Y36(f.oLl),i.Y36(f.T_6),i.Y36(f.E4y),i.Y36(ee))},ss.\u0275cmp=i.Xpm({type:ss,selectors:[["digital-code-input"]],viewQuery:function(e,t){if(1&e&&i.Gf(es,5),2&e){let e;i.iGM(e=i.CRH())&&(t.codeSymbolInputRefs=e)}},decls:2,vars:1,consts:[[1,"digital-code-input"],["tabindex","0","type","number","pattern","[0-9]*","inputmode","numeric","digitalCodeInputItem","",3,"disabled","value","valueChange","pasteFromClipboard","autofill","valueClear","focusPrevious","focusNext",4,"ngFor","ngForOf"],["tabindex","0","type","number","pattern","[0-9]*","inputmode","numeric","digitalCodeInputItem","",3,"disabled","value","valueChange","pasteFromClipboard","autofill","valueClear","focusPrevious","focusNext"],["codeSymbolInput",""]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,ts,2,3,"input",1),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngForOf",t.codeLength))},directives:[n.sg,Xt],styles:["[_nghost-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"]});let is=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),ns=(()=>{class e{constructor(e,t,s){this.documentRef=e,this.authsConfig=t,this.langService=s}renderSignInButton(e,t){const s=this.documentRef.createElement("iframe");return s.setAttribute("src",this.buildSignInButtonURI(e,t)),s.style.width="100%",s.style.maxWidth=`${t.width}`,s.style.height=`${t.height}`,s.style.border="0",s}renderDropdownList(e,{width:t,height:s,size:i,shape:n,theme:r}){const o=this.documentRef.createElement("iframe");return o.setAttribute("src",this.buildSignInDropdownURI(e,{shape:n,theme:r,size:i,width:t,height:s})),o.setAttribute("name","pn_microsoft_signin_iframe"),o.style.width="100%",o.style.maxWidth=`${t}`,o.style.height=`${s}`,o.style.display="none",o.style.position="absolute",o.style.zIndex="9",o.style.left="0",o.style.background="#ffffff",o.style.border="1px solid #d6d6d6",o.style.borderRadius="4px",o}buildSignInButtonURI(t,{theme:s,size:i,shape:n,logoAlignment:r,height:o,width:a,text:c,type:u}){var l,h;const d=`${e.SIGN_IN_BUTTON_HOST}/${e.SIGN_IN_BUTTON_VER}/${e.SIGN_IN_BUTTON_PATH}`,f={type:u,theme:s,size:i,text:null!=c?c:"signin_with",shape:n,width:a,height:o,logo_alignment:r,locale:null!==(h=null===(l=this.langService.getLang())||void 0===l?void 0:l.replace("_","-"))&&void 0!==h?h:"en-US",use_dropdown_list:!0,uuid:t,client_id:this.getMicrosoftClientId()};return`${d}?${Object.entries(f).map(([e,t])=>`${e}=${t}`).join("&")}`}buildSignInDropdownURI(t,{theme:s,shape:i,size:n}){const r=`${e.SIGN_IN_BUTTON_HOST}/${e.SIGN_IN_BUTTON_VER}/${e.SIGN_IN_DROPDOWN_PATH}`,o={microsoft_signin_iframe_name:"pn_microsoft_signin_iframe",uuid:t,client_id:this.getMicrosoftClientId(),text:"signin_with",theme:s,shape:i,size:n,width:400,locale:"en-US"};return`${r}?${Object.entries(o).map(([e,t])=>`${e}=${t}`).join("&")}`}getMicrosoftClientId(){var e;return this.authsConfig.isSocialAuthAvailable(f._s0.MSQA)?null===(e=this.authsConfig.get("socialAuth").find(e=>e.type===f._s0.MSQA))||void 0===e?void 0:e.clientId:void 0}}return e.SIGN_IN_BUTTON_HOST="https://edge-auth.microsoft.com",e.SIGN_IN_BUTTON_VER="v0.5",e.SIGN_IN_BUTTON_PATH="signinbutton",e.SIGN_IN_DROPDOWN_PATH="dropdownlist",e.\u0275fac=function(t){return new(t||e)(i.LFG(n.K0),i.LFG(f.jBO),i.LFG(f.CfQ))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),rs=(()=>{class e{static forRoot(){return{ngModule:e,providers:[ns]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),os=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez,Z.forRoot()],n.ez,le,Re,Ve,It,Te,Ue,qe,Ke,Jt,Kt,Zt,rt,at,St,Rt,f.h7F,At,f.L22,f.Zhd,f.BDX,f.TWk,f.bNT,f.O4_,f.eTr,f.jH1,f.YYx,f.CRV,f.MfV,f.SlN,f.Fa2,f.TQN,f.Ycz,f.LUR,f.XaE,Z,xt,Ot,is,Pt,Gt,rs,Tt,f.jeL]}),e})()},66898:function(e,t,s){s.d(t,{_o:function(){return P},iS:function(){return O},wn:function(){return N},H3:function(){return x},m8:function(){return B},b2:function(){return V}});var i=s(37716),n=s(38583),r=s(11093),o=s(56693),a=s(59796),c=s(77393),u=s(20377),l=s(85345);class h{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new d(e,this.resultSelector))}}class d extends c.L{constructor(e,t,s=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;(0,a.k)(e)?t.push(new p(e)):t.push("function"==typeof e[u.hZ]?new f(e[u.hZ]()):new g(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let s=0;s<t;s++){let t=e[s];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,s=this.destination;for(let r=0;r<t;r++){let t=e[r];if("function"==typeof t.hasValue&&!t.hasValue())return}let i=!1;const n=[];for(let r=0;r<t;r++){let t=e[r],o=t.next();if(t.hasCompleted()&&(i=!0),o.done)return void s.complete();n.push(o.value)}this.resultSelector?this._tryresultSelector(n):s.next(n),i&&s.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}class f{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class p{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[u.hZ](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class g extends l.Ds{constructor(e,t,s){super(e),this.parent=t,this.observable=s,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[u.hZ](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return(0,l.ft)(this.observable,new l.IY(this))}}var m=s(25917),v=s(79765),b=s(59193),S=s(90739),w=s(66682),C=s(68939),y=s(93342),E=s(45435),Y=s(19773),_=s(15257),k=s(5304),I=s(62790),L=s(54395),F=s(45942),R=s(39075);let A=(()=>{class e{constructor(e){this.config=e}onClickEvent(){this.config.get("isPreview")||this.onClick()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(r.E4y))},e.\u0275dir=i.lG2({type:e,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t.onClickEvent()})}}),e})(),x=(()=>{class e{constructor(e,t,s){this.profileAuth=e,this.config=t,this.env=s}getInfo(){return this.env.mock||this.config.get("isPreview")?(0,m.of)((0,F.Qf)()):this.profileAuth.get()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.H3W),i.LFG(r.E4y),i.LFG(r.GvL))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),V=(()=>{class e{constructor(e,t,s,i,n,r,o,a,c,u,l,h){this.postMessage=e,this.container=t,this.config=s,this.assetsConfig=i,this.error=n,this.customFields=r,this.lang=o,this.profileAuth=a,this.profile=c,this.events=u,this.tokenService=l,this.mobileSdkAdapter=h,this.ready$=new v.xQ,this.user$=new v.xQ,this.isSubmitting=!1,this.subscribeToCustomFieldsSubmit(),this.subscribeToExternalEvents(),this.subscribeToCustomFieldsValues(),this.subscribeToCustomFieldsFirstImpression(),this.subscribeToLanguageUpdate(),this.postMessage.send("stateReady"),this.mobileSdkAdapter.postMessage("stateReady")}skip(){this.postMessage.send("formSkip"),this.mobileSdkAdapter.postMessage("formSkip")}submit(){if(this.isSubmitting)return b.E;if(!this.customFields.strictValidate())return this.postMessage.send("profileUpdatedError"),b.E;const e={uid:this.uid,form_name:this.assetsConfig.assetsFormName,custom_field_values:this.customFields.getSerializedValues(),hidden_fields:this.customFields.completedFieldsNames};return this.customFields.currentStep&&(e.step_id=this.customFields.currentStep.id),this.error.reset(),this.isSubmitting=!0,this.profileAuth.update(e).pipe((0,C.x)(()=>this.isSubmitting=!1),(0,y.b)(({custom_fields_errors:e})=>{if(null==e?void 0:e.length)throw{errors:e.map(e=>({message:e}))}}),(0,E.h)(({update_failed:e})=>!e),(0,Y.zg)(e=>(0,S.aj)([(0,m.of)(e),this.customFields.isMultiStepEnabled$.pipe((0,_.q)(1)),this.customFields.isCurrentStepLast$.pipe((0,_.q)(1))])),(0,y.b)(([{token:e=this.tokenService.accessToken},t,s])=>{const i=t&&!s,n=r.Puc.decode(e);this.tokenService.accessToken=e,this.postMessage.send("profileUpdated",{token:e,user:n},null,null,i),this.customFields.fieldsImpression$.getValue()&&this.events.cfSubmission(),i||(this.postMessage.send("formSend",{submittedFields:this.customFields.getSerializedValuesWithType()}),this.mobileSdkAdapter.postMessage("formSend"),this.events.flushQueue()),this.customFields.setNextStep().subscribe()}),(0,k.K)(e=>(this.postMessage.send("profileUpdatedError",e),this.handleErrors(e),(0,m.of)(null))))}subscribeToCustomFieldsSubmit(){this.customFields.submit$.pipe((0,Y.zg)(()=>this.submit())).subscribe()}subscribeToExternalEvents(){(this.mobileSdkAdapter.isActive?this.mobileSdkAdapter.messages:this.postMessage.messages).pipe((0,I.n)(e=>(0,w.T)(e.pipe((0,E.h)(({event:e})=>"setToken"===e),(0,y.b)(({params:e})=>this.tokenService.accessToken=e),(0,Y.zg)(()=>this.getProfile()),(0,Y.zg)(()=>this.customFields.isMultiStepEnabled$.pipe((0,_.q)(1))),(0,E.h)(e=>e)),e.pipe((0,E.h)(({event:e})=>"userData"===e),(0,y.b)(({params:e})=>{this.readProfileData(e)})),e.pipe((0,E.h)(({event:e})=>"submit"===e),(0,Y.zg)(()=>this.submit())),e.pipe((0,E.h)(({event:e})=>"skip"===e),(0,y.b)(()=>this.skip())),e.pipe((0,E.h)(({event:e})=>"close"===e),(0,y.b)(({params:e})=>this.container.close({reason:null==e?void 0:e.reason})))))).subscribe()}getProfile(){return this.error.reset(),this.profile.getInfo().pipe((0,y.b)(e=>{this.readProfileData(e),this.ready$.next(!0)}),(0,k.K)(e=>{try{this.ready$.error(e.errors)}catch(t){}return this.handleErrors(e),(0,m.of)(null)}))}readProfileData(e){e&&(this.uid=e.uid,this.user$.next(e),this.customFields.setInitValues(e.custom_field_values))}handleErrors(e){403===e.status&&(this.postMessage.send("tokenRejected"),this.mobileSdkAdapter.postMessage("tokenRejected")),this.error.set(e.errors)}hasUnfinishedFilledCustomFields(e){return!(null==e?void 0:e.has_all_custom_field_values_filled)||!this.config.get("hideIfComplete")}subscribeToCustomFieldsValues(){this.customFields.lastUpdatedValues.pipe((0,L.b)(200)).subscribe(e=>this.postMessage.send("change",e))}subscribeToCustomFieldsFirstImpression(){(function(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),(0,o.n)(e,void 0).lift(new h(t))})(this.customFields.fieldsFirstImpression,this.user$.pipe((0,E.h)(e=>this.hasUnfinishedFilledCustomFields(e)))).subscribe(()=>this.events.cfImpression())}subscribeToLanguageUpdate(){this.lang.$langUpdated.subscribe(()=>this.error.reset())}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.FL7),i.LFG(r.JeS),i.LFG(r.E4y),i.LFG(r.mBN),i.LFG(r.T_6),i.LFG(r.ZnY),i.LFG(r.CfQ),i.LFG(r.H3W),i.LFG(x),i.LFG(r.nCZ),i.LFG(r.Brn),i.LFG(r.qL3))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),O=(()=>{class e{constructor(e,t,s){this.container=e,this.title=t,this.langSettings=s}configure(e){this.title.setTitle("Form"),this.container.preventScroll(),this.langSettings.configureLang(e).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.JeS),i.LFG(R.Dx),i.LFG(r.Vxf))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),P=(()=>{class e extends A{constructor(e,t){super(t),this.state=e,this.config=t}onClick(){this.state.submit().subscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(V),i.Y36(r.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionSubmit",""]],features:[i.qOj]}),e})(),G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),N=(()=>{class e{constructor(e,t,s){this.assetsConfig=e,this.el=t,this.renderer=s;const i=this.assetsConfig.customFieldsFormTitle;i?this.renderer.appendChild(this.el.nativeElement,this.renderer.createText(i)):this.renderer.setStyle(this.el.nativeElement,"display","none")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(r.mBN),i.Y36(i.SBq),i.Y36(i.Qsj))},e.\u0275dir=i.lG2({type:e,selectors:[["","formTitle",""]]}),e})(),T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez]]}),e})(),B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.ez],r.z8t,G,T,r.h7F,r.L22,r.Ycz,r.Zhd,r.TQN,r.BDX,r.Fa2,r.bNT,r.O4_,r.eTr,r.jH1,r.YYx,r.CRV,r.MfV,r.SlN,r.Fa2,r.TQN,r.Ycz,r.LUR,r.XaE]}),e})()},20800:function(e,t,s){s.d(t,{EV:function(){return E},OZ:function(){return C},RD:function(){return y},FU:function(){return _},RC:function(){return b},bw:function(){return g},iA:function(){return m},Kq:function(){return v}});var i=s(37716),n=s(82298),r=s(59193),o=s(79765),a=s(11093),c=s(93342),u=s(5304),l=s(68939),h=s(88002),d=s(46782),f=s(57263),p=s(38583);let g=(()=>{class e{constructor(e,t,s,i,r,o,c,u,l){this.auth=e,this.authSso=t,this.screenService=s,this.config=i,this.container=r,this.gmSsoRedirectParamsService=o,this.spinnerService=c,this.sssService=u,this.urlService=l,this.confirmModeToScreenMap={[a.vdi.None]:void 0,[a.vdi.Before]:"sso_confirm_before",[a.vdi.After]:"sso_confirm"},this.userDataSubject=new n.t(1)}checkSsoAuthorization(){return this.spinnerService.showSpinner(),this.authSso.verifyToken().pipe((0,c.b)(({access_token:e,error:t})=>{!t&&e&&(this.accessToken=e,this.getConfirmScreen()?(this.userDataSubject.next(a.Puc.decode(e)),this.showConfirmScreen()):this.completeAuthorization())}),(0,u.K)(()=>r.E),(0,l.x)(()=>this.spinnerService.hideSpinner()))}get userData$(){return this.userDataSubject.asObservable()}returnBackToClientSite(){this.container.redirect(this.config.get("redirectUri"))}completeAuthorization(){switch(this.config.get("displayMode")){case"modal":this.container.close();break;case"popup":this.auth.setToken({access_token:this.accessToken,token_type:"Bearer"});break;case"redirect":const e=this.gmSsoRedirectParamsService.buildRedirectParams(this.accessToken);this.config.get("isSssConfigured")?this.sssService.redirectToSss(e):this.returnBackToClientSiteWithAuth(e)}}cancelAuthorization(){switch(this.config.get("displayMode")){case"popup":case"modal":default:this.container.close();break;case"redirect":this.returnBackToClientSite()}}returnBackToClientSiteWithAuth(e){const t=this.urlService.addQueryParams(this.config.get("redirectUri"),e);this.container.redirect(t)}getConfirmScreen(){var e;const t=this.config.get("gmSsoConfirm");return null!==(e=this.confirmModeToScreenMap[t])&&void 0!==e?e:this.config.get("gmSsoConfirmScreen")}showConfirmScreen(){const e=this.getConfirmScreen();e&&this.screenService.setScreen(e)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(a.e80),i.LFG(a.tlL),i.LFG(a.H2),i.LFG(a.E4y),i.LFG(a.JeS),i.LFG(a.cKD),i.LFG(f.V),i.LFG(a.R$W),i.LFG(a.iOJ))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),m=(()=>{class e{constructor(e,t,s,i){this.view=e,this.currentScreenService=t,this.assetsConfig=s,this.viewManager=i}ngAfterContentInit(){this.viewManager.manageView(this)}isVisible(){return!!this.assetsConfig.get("gmSsoEnabled")&&this.currentScreenService.screen$.pipe((0,h.U)(e=>["login","register"].includes(e)))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(a.UBS),i.Y36(a.mBN),i.Y36(a.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","gmSsoShowIfEnabled",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,a.dvP,4),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([a.jSz])]}),e})(),v=(()=>{class e{constructor(e,t,s,i,n){this.gmSsoService=e,this.renderer=t,this.el=s,this.config=i,this.userNameFieldService=n,this.destroyed$=new o.xQ,this.config.get("isPreview")?this.addEmailText("preview@preview.com"):this.gmSsoService.userData$.pipe((0,d.R)(this.destroyed$),(0,h.U)(({email:e,pn:t})=>e||t||""),(0,h.U)(e=>this.userNameFieldService.formatValue(e))).subscribe(e=>this.addEmailText(e))}ngOnDestroy(){this.destroyed$.next()}addEmailText(e){const t=this.renderer.createText(e);this.el.nativeElement.lastChild&&this.renderer.removeChild(this.el.nativeElement,this.el.nativeElement.lastChild),this.renderer.appendChild(this.el.nativeElement,t)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(g),i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(a.E4y),i.Y36(a.RrL))},e.\u0275dir=i.lG2({type:e,selectors:[["","gmSsoShowUserName",""],["","gmSsoShowEmail",""]]}),e})(),b=(()=>{class e{constructor(e,t,s,i){this.config=e,this.renderer=t,this.el=s,this.gmSsoService=i}ngOnInit(){if("redirect"===this.config.get("displayMode")){this.renderer.addClass(this.el.nativeElement,"pn-gm-sso-redirect-layout");const e=this.el.nativeElement.querySelector("#gm-sso-content");this.renderer.setStyle(e,"max-width",`${this.config.get("gmSsoRedirectContainerWidth")}px`),this.addCloseButton(e)}}ngOnDestroy(){this.closeButtonListener&&this.closeButtonListener()}addCloseButton(e){const t=this.renderer.createElement("button");this.renderer.addClass(t,"pn-gm-sso-close"),this.renderer.appendChild(e,t),this.closeButtonListener=this.renderer.listen(t,"click",()=>{this.gmSsoService.returnBackToClientSite()})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(a.E4y),i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(g))},e.\u0275dir=i.lG2({type:e,selectors:[["","gmSsoRedirectPageWrapper",""]]}),e})(),S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[p.ez]]}),e})(),w=(()=>{class e{constructor(e,t){this.stateService=e,this.config=t}onClickEvent(e){this.config.get("isPreview")||(e.preventDefault(),this.onClick())}onClick(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(f.b2),i.Y36(a.E4y))},e.\u0275dir=i.lG2({type:e,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClickEvent(e)})}}),e})(),C=(()=>{class e extends w{constructor(e,t,s){super(t,s),this.gmSsoService=e,this.state=t,this.config=s}onClick(){this.gmSsoService.completeAuthorization()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(g),i.Y36(f.b2),i.Y36(a.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionGmSsoBeforeLogin",""]],features:[i.qOj]}),e})(),y=(()=>{class e{constructor(e,t){this.screenService=e,this.config=t,this.tabindex="0"}onClick(){this.config.get("isPreview")||this.screenService.setScreen("login")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(a.H2),i.Y36(a.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionGmSsoShowLogin",""],["","actionSsoShowLogin",""]],hostVars:1,hostBindings:function(e,t){1&e&&i.NdJ("keydown.enter",function(){return t.onClick()})("keydown.space",function(){return t.onClick()})("click",function(){return t.onClick()}),2&e&&i.uIk("tabindex",t.tabindex)}}),e})(),E=(()=>{class e extends w{constructor(e,t,s,i){super(i,t),this.gmSsoService=e,this.config=t,this.screenService=s,this.state=i}onClick(){"sso_confirm"===this.screenService.currentScreen?this.gmSsoService.completeAuthorization():this.gmSsoService.cancelAuthorization()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(g),i.Y36(a.E4y),i.Y36(a.H2),i.Y36(f.b2))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionClose",""]],features:[i.qOj]}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[p.ez]]}),e})(),_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[p.ez],a.L22,a.Ycz,a.Zhd,a.TQN,a.BDX,a.Fa2,a.TWk,a.bNT,a.O4_,a.eTr,a.jH1,a.YYx,a.CRV,a.MfV,a.SlN,a.h7F,a.LUR,a.XaE,S,Y]}),e})()},52189:function(e,t,s){s.d(t,{Cd:function(){return T},lP:function(){return x},Q6:function(){return F},TU:function(){return G},v5:function(){return P},m8:function(){return M},b2:function(){return V}});var i=s(37716),n=s(43190),r=s(88002),o=s(5304),a=s(93342),c=s(68939),u=s(19773),l=s(15257),h=s(62790),d=s(45435),f=s(54395),p=s(46782),g=s(11093),m=s(39075),v=s(82298),b=s(79765),S=s(25917),w=s(66682),C=s(35758),y=s(64762),E=s(64194),Y=s(39311),_=s(8902),k=s(91841),I=s(3679),L=s(38583);let F=(()=>{class e{constructor(e,t,s,i){this.config=e,this.lang=t,this.title=s,this.langSettings=i}configure(e){this.title.setTitle("Newsletters"),this.lang.doNotSetCookie=!0,this.langSettings.configureLang(e).pipe((0,n.w)(()=>this.lang.onLangChange())).subscribe(({lang:e})=>this.config.set("lang",e))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(g.E4y),i.LFG(g.CfQ),i.LFG(m.Dx),i.LFG(g.Vxf))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function R(){return new Map([[1,{name:"Subscription 1",id:1,isActive:!0}],[2,{name:"Subscription 2",id:2,isActive:!1}]])}let A=(()=>{class e{static fromPlain(t){return(0,E.d8)(e,t)}}return(0,y.gn)([(0,Y.C)()],e.prototype,"id",void 0),(0,y.gn)([(0,Y.C)()],e.prototype,"name",void 0),(0,y.gn)([(0,Y.C)({name:"user_active_state"}),(0,_.D)(()=>Boolean)],e.prototype,"isActive",void 0),e})(),x=(()=>{class e{constructor(e,t,s){this.httpClient=e,this.config=t,this.langService=s}getSubscriptionsList(){return this.httpClient.get(`${this.config.get("apiPath")}/identity/newsletter`,{params:(new k.LE).set("aid",this.config.get("aid"))}).pipe((0,r.U)(e=>{const t=A.fromPlain(e);return new Map(t.reduce((e,t)=>[...e,[t.id,t]],[]))}),(0,o.K)(g.vF_.catch(this.langService.trc("piano.id","Failed to load subscriptions"))))}doSubscribe(e){return this.httpClient.post(`${this.config.get("apiPath")}/identity/newsletter/subscription`,e,{params:(new k.LE).set("aid",this.config.get("aid"))}).pipe((0,o.K)(g.vF_.catch(this.langService.trc("piano.id","Failed to subscribe"))))}unSubscribe(e){const t={params:(new k.LE).set("aid",this.config.get("aid")),body:e};return this.httpClient.delete(`${this.config.get("apiPath")}/identity/newsletter/subscription`,t).pipe((0,o.K)(g.vF_.catch(this.langService.trc("piano.id","Failed to unsubscribe"))))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(k.eN),i.LFG(g.E4y),i.LFG(g.CfQ))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),V=(()=>{class e{constructor(e,t,s,i,n,r){this.config=e,this.postMessage=t,this.container=s,this.tokenService=i,this.apiService=n,this.env=r,this.subscriptionsSubject=new v.t(1),this.isLoadingSubject=new b.xQ,this.config.get("isPreview")?this.subscriptionsSubject.next(R()):(this.subscribeToPostMessages(),this.postMessage.send("stateReady"))}get subscriptions$(){return this.subscriptionsSubject.asObservable()}get isLoading$(){return this.isLoadingSubject.asObservable()}fetchSubscriptions(){return(this.config.get("isPreview")?(0,S.of)(R()):this.apiService.getSubscriptionsList()).pipe((0,a.b)(e=>this.subscriptionsSubject.next(e)))}doSubscribe(e){return e.length?(this.isLoadingSubject.next(!0),this.apiService.doSubscribe(e).pipe((0,c.x)(()=>this.isLoadingSubject.next(!1)),(0,o.K)(e=>e),(0,u.zg)(()=>this.subscriptions$.pipe((0,l.q)(1))),(0,a.b)(t=>this.setSubscriptionsStatus(t,e,!0)))):(0,S.of)(1)}unSubscribe(e){return e.length?(this.isLoadingSubject.next(!0),this.apiService.unSubscribe(e).pipe((0,c.x)(()=>this.isLoadingSubject.next(!1)),(0,o.K)(e=>e),(0,u.zg)(()=>this.subscriptions$.pipe((0,l.q)(1))),(0,a.b)(t=>this.setSubscriptionsStatus(t,e,!1)))):(0,S.of)(1)}unSubscribeAll(){return this.isLoadingSubject.next(!0),this.subscriptions$.pipe((0,l.q)(1),(0,r.U)(e=>Array.from(e.entries()).filter(([e,t])=>t.isActive).map(([e,t])=>e)),(0,n.w)(e=>this.apiService.unSubscribe(e).pipe((0,c.x)(()=>this.isLoadingSubject.next(!1)),(0,o.K)(e=>e),(0,u.zg)(()=>this.subscriptions$.pipe((0,l.q)(1))),(0,a.b)(t=>this.setSubscriptionsStatus(t,e,!1)))))}subscribeToPostMessages(){this.postMessage.messages.pipe((0,h.n)(e=>(0,w.T)(e.pipe((0,d.h)(e=>"close"===e.event),(0,a.b)(()=>this.container.close())),e.pipe((0,d.h)(({event:e,params:t})=>"setToken"===e&&(null==t?void 0:t.token)),(0,a.b)(({params:e})=>this.tokenService.accessToken=e.token),(0,u.zg)(()=>this.fetchSubscriptions()))))).subscribe()}setSubscriptionsStatus(e,t,s){const i=e;t.forEach(e=>{const t=i.get(+e);t.isActive=s,i.set(+e,t)}),this.subscriptionsSubject.next(i)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(g.E4y),i.LFG(g.FL7),i.LFG(g.JeS),i.LFG(g.Brn),i.LFG(x),i.LFG(g.GvL))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function O(e,t){if(1&e&&(i.TgZ(0,"label",3),i._UZ(1,"checkbox",4),i.TgZ(2,"span"),i._uU(3),i.qZA(),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("formControlName",e.id),i.xp6(2),i.Oqu(e.name)}}let P=(()=>{class e{constructor(e,t,s){this.stateService=e,this.fb=t,this.config=s,this.subscriptionsList=[],this.form=this.fb.group({subscriptions:this.fb.group({})}),this.subscribeRequestDestroyed$=new b.xQ,this.unSubscribeRequestDestroyed$=new b.xQ}ngOnInit(){this.stateService.subscriptions$.pipe((0,r.U)(e=>Array.from(e.values())),(0,a.b)(e=>e.forEach(e=>this.generateFormControlForSubscription(e)))).subscribe(e=>this.subscriptionsList=e),this.stateService.isLoading$.subscribe(e=>e?this.form.disable():this.form.enable()),this.form.get("subscriptions").valueChanges.pipe((0,d.h)(()=>this.form.enabled&&!this.config.get("isPreview")),(0,f.b)(500),(0,u.zg)(e=>this.getOnlyChangedFormValues(e)),(0,d.h)(e=>!!e.length),(0,u.zg)(e=>{const t=e.filter(([e,t])=>t).map(([e,t])=>e),s=e.filter(([e,t])=>!t).map(([e,t])=>e);return t.length&&(this.subscribeRequestDestroyed$.next(),this.subscribeRequestDestroyed$.complete(),this.subscribeRequestDestroyed$=new b.xQ),s.length&&(this.unSubscribeRequestDestroyed$.next(),this.unSubscribeRequestDestroyed$.complete(),this.unSubscribeRequestDestroyed$=new b.xQ),(0,C.D)([this.stateService.doSubscribe(t).pipe((0,p.R)(this.subscribeRequestDestroyed$)),this.stateService.unSubscribe(s).pipe((0,p.R)(this.unSubscribeRequestDestroyed$))])})).subscribe()}generateFormControlForSubscription({id:e,isActive:t}){const s=this.form.get("subscriptions"),i=`${e}`;s.get(i)?s.get(i).setValue(t):s.setControl(i,this.fb.control(t))}getOnlyChangedFormValues(e){return this.stateService.subscriptions$.pipe((0,l.q)(1),(0,r.U)(t=>Object.entries(e).filter(([e,s])=>t.get(+e).isActive!==s).map(([e,t])=>[+e,t])))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(V),i.Y36(I.qu),i.Y36(g.E4y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["newsletters-list"]],decls:3,vars:2,consts:[[3,"formGroup"],["formGroupName","subscriptions"],["class","newsletter-item",4,"ngFor","ngForOf"],[1,"newsletter-item"],["type","toggle",3,"formControlName"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.ynx(1,1),i.YNc(2,O,4,2,"label",2),i.BQk(),i.qZA()),2&e&&(i.Q6J("formGroup",t.form),i.xp6(2),i.Q6J("ngForOf",t.subscriptionsList))},directives:[I.JL,I.sg,I.x0,L.sg,g.bK4,I.JJ,I.u],styles:[".newsletter-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:24px 0;border-bottom:1px solid rgba(0,0,0,.1);-webkit-tap-highlight-color:transparent}.newsletter-item[_ngcontent-%COMP%]:last-child{border-bottom:0}.newsletter-item[_ngcontent-%COMP%]   checkbox[_ngcontent-%COMP%]{margin-right:10px}"]}),e})(),G=(()=>{class e{constructor(e,t,s){this.stateService=e,this.renderer2=t,this.elementRef=s}ngAfterViewInit(){this.stateService.subscriptions$.pipe((0,r.U)(e=>e.size)).subscribe(e=>this.elementRef.nativeElement.innerText=`${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(V),i.Y36(i.Qsj),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","newslettersCount",""]]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[L.ez,g.nDK,I.u5,I.UX]]}),e})(),T=(()=>{class e{constructor(e,t){this.stateService=e,this.config=t,this.isDisabled=!1,this.loadingSubscription=this.stateService.isLoading$.subscribe(e=>this.isDisabled=e)}ngOnDestroy(){var e,t;null===(e=this.subscription)||void 0===e||e.unsubscribe(),null===(t=this.loadingSubscription)||void 0===t||t.unsubscribe()}onClick(){var e;this.config.get("isPreview")||(null===(e=this.subscription)||void 0===e||e.unsubscribe(),this.subscription=this.stateService.unSubscribeAll().subscribe())}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(V),i.Y36(g.E4y))},e.\u0275dir=i.lG2({type:e,selectors:[["","actionUnsubscribeFromAllNewsletters",""]],hostVars:1,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClick(e)})("keydown.enter",function(e){return t.onClick(e)})("keydown.space",function(e){return t.onClick(e)}),2&e&&i.Ikx("disabled",t.isDisabled)}}),e})(),B=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[L.ez]]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[L.ez],N,B,g.z8t,g.TWk,g.bNT,g.O4_,g.eTr,g.YYx,g.CRV,g.MfV,g.SlN,g.h7F,g.jH1,g.LUR,g.XaE]}),e})()},86896:function(e,t,s){s.d(t,{zq:function(){return k},J3:function(){return N},nA:function(){return T},G1:function(){return De},X:function(){return Ae},p3:function(){return st},Xz:function(){return ee},Fn:function(){return ie},Zt:function(){return R},aZ:function(){return A},CD:function(){return O},xE:function(){return P},I4:function(){return x},bR:function(){return V},MW:function(){return z},V4:function(){return ce},wj:function(){return he},d5:function(){return $},gQ:function(){return U},hg:function(){return me},t5:function(){return Se},RP:function(){return M},R_:function(){return j},TY:function(){return nt},H2:function(){return rt},O5:function(){return F},Pw:function(){return q},c8:function(){return D},Fi:function(){return ne},gT:function(){return re},m3:function(){return de},AO:function(){return fe},NT:function(){return we},r7:function(){return Ce},YP:function(){return Q},AR:function(){return it},_0:function(){return Re},ex:function(){return Le},cW:function(){return Fe},UV:function(){return L},b2:function(){return I},T6:function(){return Ye},vK:function(){return Ie}});var i=s(37716),n=s(26215),r=s(59193),o=s(66682),a=s(25917),c=s(82298),u=s(90739),l=(s(79765),s(88002)),h=s(87519),d=s(93342),f=s(45435),p=s(68939),g=s(5304),m=s(19773),v=s(62790),b=s(43190),S=s(46782),w=s(11093),C=s(45942),y=s(39075),E=s(38583),Y=s(64762),_=s(3679);let k=(()=>{class e{constructor(){this.isDeleteAccountInitiated$=new n.X(!1),this.isDeleteAccountFailed$=new n.X(!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),I=(()=>{class e{constructor(e,t,s,i,r,o,a,c,u,f,p,g,m,v,b,S,w){this.profile=e,this.postMessage=t,this.config=s,this.authsConfig=i,this.assetsConfig=r,this.container=o,this.customFields=a,this.error=c,this.validator=u,this.confirmationEmail=f,this.form=p,this.eventsService=g,this.tokenService=m,this.sssService=v,this.restV3ApiService=b,this.accountDeletionStateService=S,this.env=w,this.updateComplete$=new n.X(!1),this.showChangePassword$=new n.X(!1),this.disableUpdateProfile$=new n.X(!1),this.updateLinkedSocials$=new n.X(!1),this.showResendConfirmationEmail$=new n.X(!1),this.isEmailChanged$=new n.X(!1),this.uid=null,this.isReady$=new n.X(!1),this.subscribeToPostMessages(),this.subscribeToCustomFieldsSubmit(),this.form.valueChanges.pipe((0,l.U)(e=>!!this.currentEmail&&this.currentEmail!==e.email),(0,h.x)(),(0,d.b)(e=>this.isEmailChanged$.next(e))).subscribe(),this.postMessage.send("stateReady")}get ready$(){return this.isReady$.pipe((0,f.h)(e=>e))}updateProfile(){if(this.disableUpdateProfile$.getValue())return r.E;if(this.profile.isReadOnly())return this.eventsService.extendedUserLoginRequired(),r.E;if(this.form.submit(),this.updateComplete$.next(!1),!this.validator.runValidateFunction(()=>this.form.valid,this.customFields.strictValidate))return r.E;const e=this.convertFormToProfile(this.form.value),t=this.customFields.getSerializedValues(!0);return t.length&&(e.custom_field_values=t),e.hidden_fields=this.customFields.completedFieldsNames,!this.showChangePassword$.getValue()&&!this.isEmailChanged$.getValue()&&(e.new_password=void 0,e.current_password=void 0),this.error.reset(),this.disableUpdateProfile$.next(!0),this.profile.update(e).pipe((0,p.x)(()=>this.disableUpdateProfile$.next(!1)),(0,d.b)(e=>this.handleUpdatedProfile(e)),(0,g.K)(e=>{throw this.postMessage.send("profileUpdatedError",e),this.handleForbidden(e.status),this.error.set(e.errors),e}))}resendConfirmationEmail(){return this.confirmationEmail.resendAndShowMessage(({need_resend_confirmation_email:e})=>this.showResendConfirmationEmail$.next(e))}deleteAccount(){const e=this.form.get("confirm_delete_account_password");return this.accountDeletionStateService.isDeleteAccountFailed$.next(!1),this.restV3ApiService.disableUserByJwt(e.value).pipe((0,g.K)(e=>{throw this.accountDeletionStateService.isDeleteAccountFailed$.next(!0),e}),(0,d.b)(()=>this.postMessage.send("tokenRejected")))}handleForbidden(e){403===e&&this.postMessage.send("tokenRejected")}handleUpdatedProfile(e){var t;if(e.update_failed){if(null===(t=e.custom_fields_errors)||void 0===t?void 0:t.length)throw{errors:e.custom_fields_errors.map(e=>({message:e}))}}else{e.token&&(this.tokenService.accessToken=e.token,this.config.get("isSssConfigured")&&(this.config.set("sssMode","iframe"),this.sssService.redirectToSss()));const t=this.tokenService.accessToken;this.postMessage.send("profileUpdated",{token:t,user:w.Puc.decode(t),cookie_domain:this.assetsConfig.get("siteCookieDomain")}),this.readProfileData(e),e&&this.customFields.setValues(e.custom_field_values),this.confirmationEmail.showMessageAfterSendEmail(e)}}readProfileData(e){return e&&(this.uid=e.uid,this.form.patchValue(e),this.currentEmail=e.email,this.form.patchValue(e),this.showResendConfirmationEmail$.next(e.need_resend_confirmation_email),e.linked_social_accounts&&(this.authsConfig.setLinkedAuths(e),this.updateLinkedSocials$.next(!0))),e}subscribeToCustomFieldsSubmit(){this.customFields.submit$.pipe((0,m.zg)(()=>this.updateProfile())).subscribe()}subscribeToPostMessages(){this.postMessage.messages.pipe((0,v.n)(e=>(0,o.T)(e.pipe((0,f.h)(e=>"close"===e.event),(0,d.b)(()=>this.container.close())),e.pipe((0,f.h)(({event:e,params:t})=>"setToken"===e&&(null==t?void 0:t.token)),(0,d.b)(e=>this.tokenService.accessToken=e.params.token),(0,m.zg)(()=>this.getProfile())),e.pipe((0,f.h)(e=>"updatedProfile"===e.event),(0,d.b)(()=>{this.showChangePassword$.next(!1),this.disableUpdateProfile$.next(!1),this.updateComplete$.next(!0)}))))).subscribe()}getProfile(){let e;return e=this.env.mock||this.config.get("isPreview")?(0,a.of)((0,C.Qf)()):this.profile.get(),e.pipe((0,d.b)(e=>{this.readProfileData(e),this.isReady$.next(!0)}),(0,f.h)(e=>!!e),(0,d.b)(e=>this.customFields.setInitValues(e.custom_field_values)),(0,g.K)(({status:e,errors:t},s)=>(this.handleForbidden(e),this.isReady$.error(t),this.error.set(t),s)))}convertFormToProfile(e){return e.confirm_password&&e.new_password&&void 0===e.password&&(e.password=""),Object.keys(e).reduce((t,s)=>{if("confirm_password"===s)return t;const i=e[s];return"password"===s?t.current_password=i:t[s]=i,t},{})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(w.H3W),i.LFG(w.FL7),i.LFG(w.E4y),i.LFG(w.jBO),i.LFG(w.mBN),i.LFG(w.JeS),i.LFG(w.ZnY),i.LFG(w.T_6),i.LFG(w.oPl),i.LFG(w.Yg9),i.LFG(w.oLl),i.LFG(w.nCZ),i.LFG(w.Brn),i.LFG(w.R$W),i.LFG(w.lwu),i.LFG(k),i.LFG(w.GvL))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),L=(()=>{class e{constructor(e,t,s,i,n,r,o,a){this.error=e,this.container=t,this.profile=s,this.tokenService=i,this.authsConfig=n,this.state=r,this.postMessage=o,this.userAgentService=a,this.subscribeToPostMessages()}socialLink(e){if(this.error.reset(),this.userAgentService.isDesktopSafari||this.userAgentService.isIos){const t=this.tokenService.getOneTimeTokenSynchronous();this.openSocialLinking(e,t)}else this.tokenService.getOneTimeToken().subscribe(t=>this.openSocialLinking(e,t))}socialUnlink(e){this.error.reset(),this.profile.unlinkSocialAccount({social_type:e,uid:this.state.uid}).pipe((0,g.K)(e=>{throw this.state.handleForbidden(e.status),e}),(0,f.h)(e=>!!e)).subscribe(e=>{this.authsConfig.setLinkedAuths(e),this.state.updateLinkedSocials$.next(!0)})}subscribeToPostMessages(){this.postMessage.messages.pipe((0,v.n)(e=>(0,o.T)(e.pipe((0,f.h)(e=>"socialLinkCallback"===e.event),(0,l.U)(({params:e})=>e),(0,d.b)(({error:e,status:t,error_message:s,warn_message:i})=>{e&&(this.state.handleForbidden(+t),s&&console.error(`SOCIAL LINKING FAILED: ${s}`),i&&this.error.set([{message:i}]))}),(0,f.h)(({linking_successful:e})=>"true"===e),(0,m.zg)(()=>this.getLinkedSocialAccounts()))))).subscribe});else if(c&&void 0!==g&&-1!==g.containers.indexOf(t)){var w=e;ax?cx(b,w,ax):bx||(bx=nb(w))}else Vu(t,v,!0,{source:2,fromContainerExecution:b.fromContainerExecution})}}else{if(g&&(L(128),h&&L(130),c&&b.inheritParentConfig)){var x;var y=e;bx?(cx(b,bx,y),x=!1):(!y[N.g.Qb]&&ti&&ax||(ax=nb(y)),x=!0);x&&g.containers&&g.containers.join(",");return}if(ti&&!u&&!e[N.g.Qb]){var A=Zw;Zw=!0;if(A)return}Yw||L(43);if(!b.noTargetGroup)if(u){Ww(f.id);var B=f.id,E=e[N.g.Pd]||
"default";E=String(E).split(",");for(var F=0;F<E.length;F++){var D=Tw[E[F]]||[];Tw[E[F]]=D;0>D.indexOf(B)&&D.push(B)}}else{Vw(f.id);var M=f.id,O=e[N.g.Pd]||"default";O=O.toString().split(",");for(var P=0;P<O.length;P++){var T=Sw[O[P]]||[];Sw[O[P]]=T;0>T.indexOf(M)&&T.push(M)}}delete e[N.g.Pd];var Z=b.eventMetadata||{};Z.hasOwnProperty("is_external_event")||(Z.is_external_event=!b.fromContainerExecution);b.eventMetadata=Z;delete e[N.g.Vc];for(var W=u?[f.id]:rk(),X=0;X<W.length;X++){var la=e,ia=W[X],
ea=nb(b),Da=dk(ia,ea.isGtmEvent);Da&&Ul.push("config",[la],Da,ea)}}}}},consent:function(a,b){if(3===a.length){L(39);var c=$w(a,b),d=a[1],e=a[2];b.fromContainerExecution||(e[N.g.N]&&L(139),e[N.g.Ea]&&L(140));"default"===d?Qj(e):"update"===d?Rj(e,c):"declare"===d?b.fromContainerExecution&&Pj(e):R(62)&&"core_platform_services"===d&&Sj(e)}},event:function(a,b){var c=a[1];if(!(2>a.length)&&k(c)){var d;if(2<a.length){if(!lb(a[2])&&void 0!=a[2]||3<a.length)return;d=a[2]}var e=d,f={},g=(f.event=c,f);e&&(g.eventModel=
nb(e),e[N.g.Vc]&&(g.eventCallback=e[N.g.Vc]),e[N.g.Kd]&&(g.eventTimeout=e[N.g.Kd]));var h=$w(a,b),m=h.eventId,n=h.priorityId;g["gtm.uniqueEventId"]=m;n&&(g["gtm.priorityId"]=n);if("optimize.callback"===c)return g.eventModel=g.eventModel||{},g;var p;var q=d,r=q&&q[N.g.Ob];void 0===r&&(r=Oi(N.g.Ob,2),void 0===r&&(r="default"));if(k(r)||Ha(r)){var t;b.isGtmEvent?t=k(r)?[r]:r:t=r.toString().replace(/\s+/g,"").split(",");var u=Uw(t,b.isGtmEvent),v=u.Cm,w=u.Fm;if(w.length)for(var x=dx(q),y=0;y<w.length;y++){var A=
dk(w[y],b.isGtmEvent);A&&Wu(A.da,x,{source:3,fromContainerExecution:b.fromContainerExecution})}p=fk(v,b.isGtmEvent)}else p=void 0;var B=p;if(B){zv(m,c);for(var E=[],F=0;F<B.length;F++){var D=B[F],M=nb(b);if(-1!==Xw.indexOf(wk(D.prefix))){var O=nb(d),P=M.eventMetadata||{};P.hasOwnProperty("is_external_event")||(P.is_external_event=!M.fromContainerExecution);M.eventMetadata=P;delete O[N.g.Vc];Wl(c,O,D.id,M)}E.push(D.id)}g.eventModel=g.eventModel||{};0<B.length?g.eventModel[N.g.Ob]=E.join():delete g.eventModel[N.g.Ob];
Yw||L(43);void 0===b.noGtmEvent&&b.eventMetadata&&b.eventMetadata.syn_or_mod&&(b.noGtmEvent=!0);g.eventModel[N.g.Lb]&&(b.noGtmEvent=!0);return b.noGtmEvent?void 0:g}}},get:function(a,b){L(53);if(4===a.length&&k(a[1])&&k(a[2])&&Fa(a[3])){var c=dk(a[1],b.isGtmEvent),d=String(a[2]),e=a[3];if(c){Yw||L(43);var f=dx();if(!Ia(rk(),function(h){return c.da===h}))Wu(c.da,f,{source:4,fromContainerExecution:b.fromContainerExecution});else if(-1!==Xw.indexOf(wk(c.prefix))){$w(a,b);var g={};Mj(nb((g[N.g.lb]=d,
g[N.g.wb]=e,g)));Xl(d,function(h){G(function(){return e(h)})},c.id,b)}}}},js:function(a,b){if(2==a.length&&a[1].getTime){Yw=!0;var c=$w(a,b),d=c.eventId,e=c.priorityId,f={};return f.event="gtm.js",f["gtm.start"]=a[1].getTime(),f["gtm.uniqueEventId"]=d,f["gtm.priorityId"]=e,f}},policy:function(a){if(3===a.length&&k(a[1])&&Fa(a[2])){Mf(a[1],a[2]);if(L(74),"all"===a[1]){L(75);var b=!1;try{b=a[2](tk(),"unknown",{})}catch(c){}b||L(76)}}else{
L(73);}},set:function(a,b){var c;2==a.length&&lb(a[1])?c=nb(a[1]):3==a.length&&k(a[1])&&(c={},lb(a[2])||Ha(a[2])?c[a[1]]=nb(a[2]):c[a[1]]=a[2]);if(c){var d=$w(a,b),e=d.eventId,f=d.priorityId;nb(c);var g=nb(c);Ul.push("set",[g],void 0,b);c["gtm.uniqueEventId"]=e;f&&(c["gtm.priorityId"]=f);R(9)&&delete c.event;b.overwriteModelFields=!0;return c}}},fx={policy:!0};var gx=function(a){var b=z[ni.fa].hide;if(b&&void 0!==b[a]&&b.end){b[a]=!1;var c=!0,d;for(d in b)if(b.hasOwnProperty(d)&&!0===b[d]){c=!1;break}c&&(b.end(),b.end=null)}},hx=function(a){var b=z[ni.fa],c=b&&b.hide;c&&c.end&&(c[a]=!0)};var ix=!1,jx=[];function kx(){if(!ix){ix=!0;for(var a=0;a<jx.length;a++)G(jx[a])}}var lx=function(a){ix?G(a):jx.push(a)};var Cx=function(a){if(Bx(a))return a;this.h=a};Cx.prototype.getUntrustedMessageValue=function(){return this.h};var Bx=function(a){return!a||"object"!==jb(a)||lb(a)?!1:"getUntrustedMessageValue"in a};Cx.prototype.getUntrustedMessageValue=Cx.prototype.getUntrustedMessageValue;var Dx=0,Ex={},Fx=[],Gx=[],Hx=!1,Ix=!1;function Jx(a,b){return a.messageContext.eventId-b.messageContext.eventId||a.messageContext.priorityId-b.messageContext.priorityId}
var Kx=function(a){return z[ni.fa].push(a)},Lx=function(a,b,c){a.eventCallback=b;c&&(a.eventTimeout=c);return Kx(a)},Mx=function(a,b){if(!Ga(b)||0>b)b=0;var c=oi[ni.fa],d=0,e=!1,f=void 0;f=z.setTimeout(function(){e||(e=!0,a());f=void 0},b);return function(){var g=c?c.subscribers:1;++d===g&&(f&&(z.clearTimeout(f),f=void 0),e||(a(),e=!0))}};
function Nx(a,b){var c=a._clear||b.overwriteModelFields;l(a,function(e,f){"_clear"!==e&&(c&&Ri(e),Ri(e,f))});Di||(Di=a["gtm.start"]);var d=a["gtm.uniqueEventId"];if(!a.event)return!1;"number"!==typeof d&&(d=Hi(),a["gtm.uniqueEventId"]=d,Ri("gtm.uniqueEventId",d));return Rw(a)}
function Ox(a){if(null==a||"object"!==typeof a)return!1;if(a.event)return!0;if(Ma(a)){var b=a[0];if("config"===b||"event"===b||"js"===b||"get"===b)return!0}return!1}
function Px(){var a;if(Gx.length)a=Gx.shift();else if(Fx.length)a=Fx.shift();else return;var b;var c=a;if(Hx||!Ox(c.message))b=c;else{Hx=!0;var d=c.message["gtm.uniqueEventId"];"number"!==typeof d&&(d=c.message["gtm.uniqueEventId"]=Hi());var e={},f={message:(e.event="gtm.init_consent",e["gtm.uniqueEventId"]=d-2,e),messageContext:{eventId:d-2}},g={},h={message:(g.event="gtm.init",g["gtm.uniqueEventId"]=d-1,g),messageContext:{eventId:d-1}};Fx.unshift(h,c);if(Ok){var m=Rf.ctid;if(m){var n,p=vk(Ck());
n=p&&p.context;var q,r=ql(z.location.href);q=r.hostname+r.pathname;var t=n&&n.fromContainerExecution,u=n&&n.source,v=Rf.Ef,w=lk.ie;Ok&&(bl||(bl=q),cl.push(m+";"+v+";"+(t?1:0)+";"+(u||0)+";"+(w?1:0)))}}b=f}return b}
function Qx(){for(var a=!1,b;!Ix&&(b=Px());){Ix=!0;delete Li.eventModel;Ni();var c=b,d=c.message,e=c.messageContext;if(null==d)Ix=!1;else{e.fromContainerExecution&&Si();try{if(Fa(d))try{d.call(Pi)}catch(x){}else if(Ha(d)){var f=d;if(k(f[0])){var g=f[0].split("."),h=g.pop(),m=f.slice(1),n=Oi(g.join("."),2);if(null!=n)try{n[h].apply(n,m)}catch(x){}}}else{var p=void 0,q=!1;if(Ma(d)){a:{if(d.length&&k(d[0])){var r=ex[d[0]];if(r&&(!e.fromContainerExecution||!fx[d[0]])){p=r(d,e);break a}}p=void 0}(q=p&&
"set"===d[0]&&!!p.event)&&L(101)}else p=d;if(p){var t=Nx(p,e);a=t||a;q&&t&&L(113)}}}finally{e.fromContainerExecution&&Ni(!0);var u=d["gtm.uniqueEventId"];if("number"===typeof u){for(var v=Ex[String(u)]||[],w=0;w<v.length;w++)Gx.push(Rx(v[w]));v.length&&Gx.sort(Jx);delete Ex[String(u)];u>Dx&&(Dx=u)}Ix=!1}}}return!a}
function Sx(){if(R(16)){var a=Tx();}var b=Qx();if(R(16)){}try{gx(tk())}catch(c){}return b}
function Vv(a){if(Dx<a.notBeforeEventId){var b=String(a.notBeforeEventId);Ex[b]=Ex[b]||[];Ex[b].push(a)}else Gx.push(Rx(a)),Gx.sort(Jx),G(function(){Ix||Qx()})}function Rx(a){return{message:a.message,messageContext:a.messageContext}}
var Ux=function(){function a(f){var g={};if(Bx(f)){var h=f;f=Bx(h)?h.getUntrustedMessageValue():void 0;g.fromContainerExecution=!0}return{message:f,messageContext:g}}var b=Fc(ni.fa,[]),c=oi[ni.fa]=oi[ni.fa]||{};!0===c.pruned&&L(83);Ex=Tv().get();Wv();bv(function(){if(!c.gtmDom){c.gtmDom=!0;var f={};b.push((f.event="gtm.dom",f))}});lx(function(){if(!c.gtmLoad){c.gtmLoad=!0;var f={};b.push((f.event="gtm.load",f))}});c.subscribers=(c.subscribers||0)+1;var d=b.push;b.push=function(){var f;if(0<oi.SANDBOXED_JS_SEMAPHORE){f=
[];for(var g=0;g<arguments.length;g++)f[g]=new Cx(arguments[g])}else f=[].slice.call(arguments,0);var h=f.map(function(q){return a(q)});Fx.push.apply(Fx,h);var m=d.apply(b,f),n=Math.max(100,Number("1000")||300);if(this.length>n)for(L(4),c.pruned=!0;this.length>n;)this.shift();var p="boolean"!==typeof m||m;return Qx()&&p};var e=b.slice(0).map(function(f){return a(f)});Fx.push.apply(Fx,e);if(Tx()){if(R(16)){}G(Sx)}},Tx=function(){var a=!0;a=!1;return a};function Vx(a){if(null==a||0===a.length)return!1;var b=Number(a),c=Ta();return b<c+3E5&&b>c-9E5}function Wx(a){return a&&0===a.indexOf("pending:")?Vx(a.substr(8)):!1};
var qy=function(){};var ry=function(){};ry.prototype.toString=function(){return"undefined"};var sy=new ry;var $y=z.clearTimeout,az=z.setTimeout,bz=function(a,b,c,d){if(sn()){b&&G(b)}else return Kc(a,b,c,d)},cz=function(){return new Date},dz=function(){return z.location.href},ez=function(a){return ll(ql(a),"fragment")},fz=function(a){return ml(ql(a))},gz=function(a,b){return Oi(a,b||2)},hz=function(a,b,c){return b?Lx(a,b,c):Kx(a)},iz=function(a,b){z[a]=b},U=function(a,b,c){b&&(void 0===z[a]||c&&!z[a])&&(z[a]=b);return z[a]},
jz=function(a,b,c){return zn(a,b,void 0===c?!0:!!c)},kz=function(a,b,c){return 0===In(a,b,c)},lz=function(a,b){if(sn()){b&&G(b)}else Mc(a,b)},mz=function(a){return!!Dy(a,"init",!1)},nz=function(a){By(a,"init",!0)};

function Kz(a,b){function c(g){var h=ql(g),m=ll(h,"protocol"),n=ll(h,"host",!0),p=ll(h,"port"),q=ll(h,"path").toLowerCase().replace(/\/$/,"");if(void 0===m||"http"===m&&"80"===p||"https"===m&&"443"===p)m="web",p="default";return[m,n,p,q]}for(var d=c(String(a)),e=c(String(b)),f=0;f<d.length;f++)if(d[f]!==e[f])return!1;return!0}
function Lz(a){return Mz(a)?1:0}
function Mz(a){var b=a.arg0,c=a.arg1;if(a.any_of&&Array.isArray(c)){for(var d=0;d<c.length;d++){var e=nb(a,{});nb({arg1:c[d],any_of:void 0},e);if(Lz(e))return!0}return!1}switch(a["function"]){case "_cn":return rg(b,c);case "_css":var f;a:{if(b)try{for(var g=0;g<ng.length;g++){var h=ng[g];if(b[h]){f=b[h](c);break a}}}catch(m){}f=!1}return f;case "_ew":return og(b,c);case "_eq":return sg(b,c);case "_ge":return tg(b,c);case "_gt":return vg(b,c);case "_lc":return 0<=String(b).split(",").indexOf(String(c));
case "_le":return ug(b,c);case "_lt":return wg(b,c);case "_re":return qg(b,c,a.ignore_case);case "_sw":return xg(b,c);case "_um":return Kz(b,c)}return!1};function Nz(){var a=["&cv=1","&rv="+ni.Ug,"&tc="+mf.filter(function(b){return b}).length];ni.me&&a.push("&x="+ni.me);Ji.h&&a.push("&tag_exp="+Ji.h);return a.join("")};function Oz(){var a=dj();return a.length?"&exp_geo="+a:""}var Pz;function Qz(){try{null!=Pz||(Pz=(new Intl.DateTimeFormat).resolvedOptions().timeZone)}catch(b){}var a;return(null==(a=Pz)?0:a.length)?"&exp_tz="+Pz:""};var Rz=function(){return!1},Sz=function(){var a={};return function(b,c,d){}};function Tz(){var a=Uz;return function(b,c,d){var e=d&&d.event;Vz(c);var f=0===b.indexOf("__cvt_")?void 0:1,g=new sb;l(c,function(r,t){var u=md(t,void 0,f);void 0===u&&void 0!==t&&L(44);g.set(r,u)});a.h.h.F=Ff();var h={uj:Vf(b),eventId:void 0!==e?e.id:void 0,priorityId:void 0!==e?e.priorityId:void 0,Bf:void 0!==e?function(r){return e.Vb.Bf(r)}:void 0,Wb:function(){return b},log:function(){},Fl:{index:d&&d.index,type:d&&d.type,name:d&&d.name},Wm:!!Eu(b,3),originalEventData:null==e?void 0:e.originalEventData};
e&&e.cachedModelValues&&(h.cachedModelValues={gtm:e.cachedModelValues.gtm,ecommerce:e.cachedModelValues.ecommerce});if(Rz()){var m=Sz(),n=void 0,p=void 0;h.eb={Vh:[],pe:{},pb:function(r,t,u){1===t&&(n=r);7===t&&(p=u);m(r,t,u)},Dh:mh()};h.log=function(r,t){if(n){var u=Array.prototype.slice.call(arguments,1);m(n,4,{level:r,source:p,message:u})}}}var q=Ke(a,h,[b,g]);a.h.h.F=void 0;q instanceof wa&&"return"===q.h&&(q=q.s);return nd(q,void 0,f)}}
function Vz(a){var b=a.gtmOnSuccess,c=a.gtmOnFailure;Fa(b)&&(a.gtmOnSuccess=function(){G(b)});Fa(c)&&(a.gtmOnFailure=function(){G(c)})};function Wz(a,b){var c=this;}Wz.O="addConsentListener";var Xz;var Yz=function(a){for(var b=0;b<a.length;++b)if(Xz)try{a[b]()}catch(c){L(77)}else a[b]()};function Zz(a,b,c){var d=this,e;return e}Zz.D="internal.addDataLayerEventListener";function $z(a,b,c){}$z.O="addDocumentEventListener";function aA(a,b,c,d){}aA.O="addElementEventListener";function bA(a){}bA.O="addEventCallback";
function fA(a){}fA.D="internal.addFormAbandonmentListener";function gA(a,b,c,d){}gA.D="internal.addFormData";var hA={},iA=[],jA={},kA=0,lA=0;
function sA(a,b){}sA.D="internal.addFormInteractionListener";
function zA(a,b){}zA.D="internal.addFormSubmitListener";
function EA(a){}EA.D="internal.addGaSendListener";function FA(a){if(!a)return{};var b=a.Fl;return dv(b.type,b.index,b.name)}function GA(a){return a?{originatingEntity:FA(a)}:{}};var HA=function(a,b){this.tagId=a;this.uc=b};
function IA(a,b,c){var d=this;}IA.D="internal.loadGoogleTag";function JA(a){return new ed("",function(b){b=H(this,b);if(b instanceof ed)return new ed("",function(){var c=ta.apply(0,arguments),d=this,e=nb(this.h.h);e.eventId=a.eventId;e.priorityId=a.priorityId;e.originalEventData=a.originalEventData;var f=c.map(function(h){return H(d,h)}),g=Ba(this.h);g.h=e;return b.ab.apply(b,[g].concat(ja(f)))})})};function KA(a,b,c){var d=this;}
KA.D="internal.addGoogleTagRestriction";var LA={},MA=[];
var TA=function(a,b){};
TA.D="internal.addHistoryChangeListener";function UA(a,b,c){}UA.O="addWindowEventListener";function VA(a,b){return!0}VA.O="aliasInWindow";function WA(a,b,c){}WA.D="internal.appendRemoteConfigParameter";function XA(){var a=2;return a};function YA(a,b){var c;return c}YA.O="callInWindow";function ZA(a){}ZA.O="callLater";function $A(a){}$A.D="callOnDomReady";function aB(a){}aB.D="callOnWindowLoad";function bB(a,b){var c;return c}bB.D="internal.computeGtmParameter";function cB(a,b){var c;var d=md(c,this.h,XA());void 0===d&&void 0!==c&&L(45);return d}cB.O="copyFromDataLayer";
function dB(a){var b=void 0;return b}dB.D="internal.copyFromDataLayerCache";function eB(a){var b;return b}eB.O="copyFromWindow";function fB(a){var b=void 0;return md(b,this.h,XA())}fB.D="internal.copyKeyFromWindow";function gB(a,b){var c;return c}gB.D="internal.copyPreHit";function hB(a,b){var c=null,d=XA();return md(c,this.h,d)}hB.O="createArgumentsQueue";function iB(a){var b;return md(b,this.h,1)}iB.D="internal.createGaCommandQueue";function jB(a){var b;return md(b,this.h,
XA())}jB.O="createQueue";function kB(a,b){var c=null;return c}kB.D="internal.createRegex";function lB(a){}lB.D="internal.declareConsentState";function mB(a){var b="";return b}mB.D="internal.decodeUrlHtmlEntities";function nB(a,b,c){var d;return d}nB.D="internal.decorateUrlWithGaCookies";function oB(a){var b;
return b}oB.D="internal.detectUserProvidedData";
function sB(a,b){return b}sB.D="internal.enableAutoEventOnClick";
function xB(a,b){return b}xB.D="internal.enableAutoEventOnElementVisibility";function yB(){}yB.D="internal.enableAutoEventOnError";var zB={},AB=[],BB={},CB=0,DB=0;
function JB(a,b){var c=this;return b}JB.D="internal.enableAutoEventOnFormInteraction";
function OB(a,b){var c=this;return b}OB.D="internal.enableAutoEventOnFormSubmit";
function TB(){var a=this;}TB.D="internal.enableAutoEventOnGaSend";var UB={},VB=[];
function bC(a,b){var c=this;return b}bC.D="internal.enableAutoEventOnHistoryChange";var cC=["http://","https://","javascript:","file://"];
function gC(a,b){var c=this;return b}gC.D="internal.enableAutoEventOnLinkClick";var hC,iC;
function tC(a,b){var c=this;return b}tC.D="internal.enableAutoEventOnScroll";function uC(a){return function(){if(a.zc&&a.Bc>=a.zc)a.xc&&z.clearInterval(a.xc);else{a.Bc++;var b=Ta();Kx({event:a.eventName,"gtm.timerId":a.xc,"gtm.timerEventNumber":a.Bc,"gtm.timerInterval":a.interval,"gtm.timerLimit":a.zc,"gtm.timerStartTime":a.Se,"gtm.timerCurrentTime":b,"gtm.timerElapsedTime":b-a.Se,"gtm.triggers":a.Xh})}}}
function vC(a,b){
return b}vC.D="internal.enableAutoEventOnTimer";var yc=ca(["data-gtm-yt-inspected-"]),wC=["www.youtube.com","www.youtube-nocookie.com"],xC,yC=!1;
function IC(a,b){var c=this;return b}IC.D="internal.enableAutoEventOnYouTubeActivity";var JC;function KC(a){var b=!1;return b}KC.D="internal.evaluateMatchingRules";var oD=function(){var a=!0;Tm(7)&&Tm(9)&&Tm(10)||(a=!1);return a};
var sD=function(a,b){if(!b.isGtmEvent){var c=S(b,N.g.lb),d=S(b,N.g.wb),e=S(b,c);if(void 0===e){var f=void 0;pD.hasOwnProperty(c)?f=pD[c]:qD.hasOwnProperty(c)&&(f=qD[c]);1===f&&(f=rD(c));k(f)?nv()(function(){var g=nv().getByName(a).get(f);d(g)}):d(void 0)}else d(e)}},tD=function(a,b){var c=a[N.g.Mb],d=b+".",e=a[N.g.W]||"",f=void 0===c?!!a.use_anchor:"fragment"===c,g=!!a[N.g.zb];e=String(e).replace(/\s+/g,"").split(",");var h=nv();h(d+"require","linker");h(d+"linker:autoLink",e,f,g)},xD=function(a,
b,c){if(Hj()||R(24))if(!c.isGtmEvent||!uD[a]){var d=!Uj(N.g.R),e=function(f){var g,h,m=nv(),n=vD(b,"",c),p,q=n.createOnlyFields._useUp;if(c.isGtmEvent||wD(b,n.createOnlyFields)){c.isGtmEvent&&(g="gtm"+Hi(),h=n.createOnlyFields,n.gtmTrackerName&&(h.name=g));m(function(){var t=m.getByName(b);t&&(p=t.get("clientId"));c.isGtmEvent||m.remove(b)});m("create",a,c.isGtmEvent?h:n.createOnlyFields);d&&Uj(N.g.R)&&(d=!1,m(function(){var t=nv().getByName(c.isGtmEvent?g:b);!t||t.get("clientId")==p&&q||(c.isGtmEvent?(n.fieldsToSet["&gcu"]="1",n.fieldsToSet["&sst.gcut"]=ii[f]):(n.fieldsToSend["&gcu"]="1",n.fieldsToSend["&sst.gcut"]=ii[f]),t.set(n.fieldsToSet),c.isGtmEvent?t.send("pageview"):t.send("pageview",n.fieldsToSend))}));c.isGtmEvent&&m(function(){m.remove(g)})}};Wj(function(){return e(N.g.R)},N.g.R);Wj(function(){return e(N.g.J)},
N.g.J);c.isGtmEvent&&(uD[a]=!0)}},yD=function(a,b){nq()&&b&&(a[N.g.kb]=b)},HD=function(a,b,c){function d(){var P=S(c,N.g.Rc);h(function(){if(!c.isGtmEvent&&lb(P)){var T=u.fieldsToSend,Z=m().getByName(n),W;for(W in P)if(P.hasOwnProperty(W)&&/^(dimension|metric)\d+$/.test(W)&&void 0!=P[W]){var X=Z.get(rD(P[W]));zD(T,W,X)}}})}function e(){if(u.displayfeatures){var P="_dc_gtm_"+f.replace(/[^A-Za-z0-9-]/g,"");p("require","displayfeatures",void 0,{cookieName:P})}}var f=a,g,h=c.isGtmEvent?pv(S(c,"gaFunctionName")):
pv();if(Fa(h)){var m=nv,n;c.isGtmEvent?n=S(c,"name")||S(c,"gtmTrackerName"):n="gtag_"+f.split("-").join("_");var p=function(P){var T=[].slice.call(arguments,0);T[0]=n?n+"."+T[0]:""+T[0];h.apply(window,T)},q=function(P){var T=function(ea,Da){for(var pa=0;Da&&pa<Da.length;pa++)p(ea,Da[pa])},Z=c.isGtmEvent,W=Z?AD(u):BD(b,c);if(W){var X={};yD(X,P);p("require","ec","ec.js",X);Z&&W.fh&&p("set","&cu",W.fh);var la=W.action;if(Z||"impressions"===la)if(T("ec:addImpression",W.Gj),!Z)return;if("promo_click"===
la||"promo_view"===la||Z&&W.Qe){var ia=W.Qe;T("ec:addPromo",ia);if(ia&&0<ia.length&&"promo_click"===la){Z?p("ec:setAction",la,W.nb):p("ec:setAction",la);return}if(!Z)return}"promo_view"!==la&&"impressions"!==la&&(T("ec:addProduct",W.Ec),p("ec:setAction",la,W.nb))}},r=function(P){if(P){var T={};if(lb(P))for(var Z in CD)CD.hasOwnProperty(Z)&&DD(CD[Z],Z,P[Z],T);yD(T,y);p("require","linkid",T)}},t=function(){if(sn()){}else{var P=
S(c,N.g.Li);P&&(p("require",P,{dataLayer:ni.fa}),p("require","render"))}},u=vD(n,b,c),v=function(P,T,Z){Z&&(T=""+T);u.fieldsToSend[P]=T};!c.isGtmEvent&&wD(n,u.createOnlyFields)&&(h(function(){m()&&m().remove(n)}),ED[n]=!1);h("create",f,u.createOnlyFields);var w=c.isGtmEvent&&u.fieldsToSet[N.g.kb]&&R(87);if(!c.isGtmEvent&&u.createOnlyFields[N.g.kb]||w){var x=wi||yi?mq(c.isGtmEvent?u.fieldsToSet[N.g.kb]:u.createOnlyFields[N.g.kb],"/analytics.js"):void 0;x&&(g=x)}var y=c.isGtmEvent?u.fieldsToSet[N.g.kb]:
u.createOnlyFields[N.g.kb];if(y){var A=c.isGtmEvent?u.fieldsToSet[N.g.Md]:u.createOnlyFields[N.g.Md];A&&!ED[n]&&(ED[n]=!0,h(sv(n,A)))}c.isGtmEvent?u.enableRecaptcha&&p("require","recaptcha","recaptcha.js"):(d(),r(u.linkAttribution));var B=u[N.g.Ma];B&&B[N.g.W]&&tD(B,n);p("set",u.fieldsToSet);if(c.isGtmEvent){if(u.enableLinkId){var E={};yD(E,y);p("require","linkid","linkid.js",E)}xD(f,n,c)}if(b===N.g.ic)if(c.isGtmEvent){e();if(u.remarketingLists){var F="_dc_gtm_"+f.replace(/[^A-Za-z0-9-]/g,"");p("require",
"adfeatures",{cookieName:F})}q(y);p("send","pageview");u.createOnlyFields._useUp&&qv(n+".")}else t(),p("send","pageview",u.fieldsToSend);else b===N.g.sa?(t(),eq(f,c),S(c,N.g.Db)&&(dp(["aw","dc"]),qv(n+".")),fp(["aw","dc"]),0!=u.sendPageView&&p("send","pageview",u.fieldsToSend),xD(f,n,c)):b===N.g.Pa?sD(n,c):"screen_view"===b?p("send","screenview",u.fieldsToSend):"timing_complete"===b?(u.fieldsToSend.hitType="timing",v("timingCategory",u.eventCategory,!0),c.isGtmEvent?v("timingVar",u.timingVar,!0):
v("timingVar",u.name,!0),v("timingValue",Na(u.value)),void 0!==u.eventLabel&&v("timingLabel",u.eventLabel,!0),p("send",u.fieldsToSend)):"exception"===b?p("send","exception",u.fieldsToSend):""===b&&c.isGtmEvent||("track_social"===b&&c.isGtmEvent?(u.fieldsToSend.hitType="social",v("socialNetwork",u.socialNetwork,!0),v("socialAction",u.socialAction,!0),v("socialTarget",u.socialTarget,!0)):((c.isGtmEvent||FD[b])&&q(y),c.isGtmEvent&&e(),u.fieldsToSend.hitType="event",v("eventCategory",u.eventCategory,
!0),v("eventAction",u.eventAction||b,!0),void 0!==u.eventLabel&&v("eventLabel",u.eventLabel,!0),void 0!==u.value&&v("eventValue",Na(u.value))),p("send",u.fieldsToSend));var D=g&&R(87)&&!c.eventMetadata.suppress_script_load;if(!GD&&(!c.isGtmEvent||D)){g=g||"https://www.google-analytics.com/analytics.js";GD=!0;var M=function(){c.onFailure()},O=function(){m().loaded||M()};sn()?G(O):Kc(g,O,M)}}else G(c.onFailure)},ID=function(a,b,c,d){Xj(function(){HD(a,b,d)},[N.g.R,N.g.J])},KD=function(a){function b(e){function f(h,
m){for(var n=0;n<m.length;n++){var p=m[n];if(e[p]){g[h]=e[p];break}}}var g=nb(e);f("id",["id","item_id","promotion_id"]);f("name",["name","item_name","promotion_name"]);f("brand",["brand","item_brand"]);f("variant",["variant","item_variant"]);f("list",["list_name","item_list_name"]);f("position",["list_position","creative_slot","index"]);(function(){if(e.category)g.category=e.category;else{for(var h="",m=0;m<JD.length;m++)void 0!==e[JD[m]]&&(h&&(h+="/"),h+=e[JD[m]]);h&&(g.category=h)}})();f("listPosition",
["list_position"]);f("creative",["creative_name"]);f("list",["list_name"]);f("position",["list_position","creative_slot"]);return g}for(var c=[],d=0;a&&d<a.length;d++)a[d]&&lb(a[d])&&c.push(b(a[d]));return c.length?c:void 0},LD=function(a){return Uj(a)},MD=!1;var GD,ED={},uD={},ND={},OD=Object.freeze((ND.page_hostname=1,ND[N.g.ja]=1,ND[N.g.ib]=1,ND[N.g.Wa]=1,ND[N.g.Ka]=1,ND[N.g.Xa]=1,ND[N.g.kc]=
1,ND[N.g.Qc]=1,ND[N.g.Ra]=1,ND[N.g.mc]=1,ND[N.g.Aa]=1,ND[N.g.Yc]=1,ND[N.g.Na]=1,ND[N.g.Ab]=1,ND)),PD={},pD=Object.freeze((PD.client_storage="storage",PD.sample_rate=1,PD.site_speed_sample_rate=1,PD.store_gac=1,PD.use_amp_client_id=1,PD[N.g.ub]=1,PD[N.g.Ha]="storeGac",PD[N.g.Wa]=1,PD[N.g.Ka]=1,PD[N.g.Xa]=1,PD[N.g.kc]=1,PD[N.g.Qc]=1,PD[N.g.mc]=1,PD)),QD={},RD=Object.freeze((QD._cs=1,QD._useUp=1,QD.allowAnchor=1,QD.allowLinker=1,QD.alwaysSendReferrer=1,QD.clientId=1,QD.cookieDomain=1,QD.cookieExpires=
1,QD.cookieFlags=1,QD.cookieName=1,QD.cookiePath=1,QD.cookieUpdate=1,QD.legacyCookieDomain=1,QD.legacyHistoryImport=1,QD.name=1,QD.sampleRate=1,QD.siteSpeedSampleRate=1,QD.storage=1,QD.storeGac=1,QD.useAmpClientId=1,QD._cd2l=1,QD)),SD=Object.freeze({anonymize_ip:1}),TD={},qD=Object.freeze((TD.campaign={content:"campaignContent",id:"campaignId",medium:"campaignMedium",name:"campaignName",source:"campaignSource",term:"campaignKeyword"},TD.app_id=1,TD.app_installer_id=1,TD.app_name=1,TD.app_version=
1,TD.description="exDescription",TD.fatal="exFatal",TD.language=1,TD.page_hostname="hostname",TD.transport_type="transport",TD[N.g.xa]="currencyCode",TD[N.g.Bg]=1,TD[N.g.Aa]="location",TD[N.g.Yc]="page",TD[N.g.Na]="referrer",TD[N.g.Ab]="title",TD[N.g.nf]=1,TD[N.g.Ta]=1,TD)),UD={},VD=Object.freeze((UD.content_id=1,UD.event_action=1,UD.event_category=1,UD.event_label=1,UD.link_attribution=1,UD.name=1,UD[N.g.Ma]=1,UD[N.g.Ag]=1,UD[N.g.Sa]=1,UD[N.g.ia]=1,UD)),WD=Object.freeze({displayfeatures:1,enableLinkId:1,
enableRecaptcha:1,eventAction:1,eventCategory:1,eventLabel:1,gaFunctionName:1,gtmEcommerceData:1,gtmTrackerName:1,linker:1,remarketingLists:1,socialAction:1,socialNetwork:1,socialTarget:1,timingVar:1,value:1}),JD=Object.freeze(["item_category","item_category2","item_category3","item_category4","item_category5"]),XD={},CD=Object.freeze((XD.levels=1,XD[N.g.Ka]="duration",XD[N.g.kc]=1,XD)),YD={},ZD=Object.freeze((YD.anonymize_ip=1,YD.fatal=1,YD.send_page_view=1,YD.store_gac=1,YD.use_amp_client_id=1,
YD[N.g.Ha]=1,YD[N.g.Bg]=1,YD)),DD=function(a,b,c,d){if(void 0!==c)if(ZD[b]&&(c=Oa(c)),"anonymize_ip"!==b||c||(c=void 0),1===a)d[rD(b)]=c;else if(k(a))d[a]=c;else for(var e in a)a.hasOwnProperty(e)&&void 0!==c[e]&&(d[a[e]]=c[e])},rD=function(a){return a&&k(a)?a.replace(/(_[a-z])/g,function(b){return b[1].toUpperCase()}):a},$D={},FD=Object.freeze(($D.checkout_progress=1,$D.select_content=1,$D.set_checkout_option=1,$D[N.g.ac]=1,$D[N.g.bc]=1,$D[N.g.Hb]=1,$D[N.g.fc]=1,$D[N.g.fb]=1,$D[N.g.sb]=1,$D[N.g.hb]=
1,$D[N.g.ra]=1,$D[N.g.hc]=1,$D[N.g.Fa]=1,$D)),aE={},bE=Object.freeze((aE.checkout_progress=1,aE.set_checkout_option=1,aE[N.g.dg]=1,aE[N.g.eg]=1,aE[N.g.ac]=1,aE[N.g.bc]=1,aE[N.g.fg]=1,aE[N.g.Hb]=1,aE[N.g.ra]=1,aE[N.g.hc]=1,aE[N.g.gg]=1,aE)),cE={},dE=Object.freeze((cE.generate_lead=1,cE.login=1,cE.search=1,cE.select_content=1,cE.share=1,cE.sign_up=1,cE.view_search_results=1,cE[N.g.fc]=1,cE[N.g.fb]=1,cE[N.g.sb]=1,cE[N.g.hb]=1,cE[N.g.Fa]=1,cE)),eE=function(a){var b="general";bE[a]?b="ecommerce":dE[a]?
b="engagement":"exception"===a&&(b="error");return b},fE={},gE=Object.freeze((fE.view_search_results=1,fE[N.g.fb]=1,fE[N.g.hb]=1,fE[N.g.Fa]=1,fE)),zD=function(a,b,c){a.hasOwnProperty(b)||(a[b]=c)},hE=function(a){if(Ha(a)){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(void 0!=d){var e=d.id,f=d.variant;void 0!=e&&void 0!=f&&b.push(String(e)+"."+String(f))}}return 0<b.length?b.join("!"):void 0}},vD=function(a,b,c){var d=function(P){return S(c,P)},e={},f={},g={},h={},m=hE(d(N.g.Ei));!c.isGtmEvent&&m&&
zD(f,"exp",m);g["&gtm"]=un(c.eventMetadata.source_canonical_id,!0);c.isGtmEvent||(g._no_slc=!0);Hj()&&(h._cs=LD);var n=d(N.g.Rc);if(!c.isGtmEvent&&lb(n))for(var p in n)if(n.hasOwnProperty(p)&&/^(dimension|metric)\d+$/.test(p)&&void 0!=n[p]){var q=d(String(n[p]));void 0!==q&&zD(f,p,q)}for(var r=!c.isGtmEvent,t=Cl(c),u=0;u<t.length;++u){var v=t[u];if(c.isGtmEvent){var w=d(v);WD.hasOwnProperty(v)?e[v]=w:RD.hasOwnProperty(v)?h[v]=w:g[v]=w}else{var x=void 0;x=v!==N.g.ba?d(v):Dl(c,v);if(VD.hasOwnProperty(v))DD(VD[v],
v,x,e);else if(SD.hasOwnProperty(v))DD(SD[v],v,x,g);else if(qD.hasOwnProperty(v))DD(qD[v],v,x,f);else if(pD.hasOwnProperty(v))DD(pD[v],v,x,h);else if(/^(dimension|metric|content_group)\d+$/.test(v))DD(1,v,x,f);else if(v===N.g.ba){if(!MD){var y=bb(x);y&&(f["&did"]=y)}var A=void 0,B=void 0;b===N.g.sa?A=bb(Dl(c,v),"."):(A=bb(Dl(c,v,1),"."),B=bb(Dl(c,v,2),"."));A&&(f["&gdid"]=A);B&&(f["&edid"]=B)}else v===N.g.Ra&&0>t.indexOf(N.g.kc)&&(h.cookieName=x+"_ga");R(22)&&OD[v]&&(c.C.hasOwnProperty(v)||b===N.g.sa&&
c.h.hasOwnProperty(v))&&(r=!1)}}R(22)&&r&&(f["&jsscut"]="1");!1!==d(N.g.Ye)&&!1!==d(N.g.ib)&&oD()||(g.allowAdFeatures=!1);Ym(c)?R(26)&&(g.allowAdPersonalizationSignals=!0):g.allowAdPersonalizationSignals=!1;!c.isGtmEvent&&d(N.g.Db)&&(h._useUp=!0);if(c.isGtmEvent){h.name=h.name||e.gtmTrackerName;var E=g.hitCallback;g.hitCallback=function(){Fa(E)&&E();c.onSuccess()}}else{zD(h,"cookieDomain","auto");zD(g,"forceSSL",!0);zD(e,"eventCategory",eE(b));gE[b]&&zD(f,"nonInteraction",!0);"login"===b||"sign_up"===
b||"share"===b?zD(e,"eventLabel",d(N.g.Ag)):"search"===b||"view_search_results"===b?zD(e,"eventLabel",d(N.g.Qi)):"select_content"===b&&zD(e,"eventLabel",d(N.g.yi));var F=e[N.g.Ma]||{},D=F[N.g.qc];D||0!=D&&F[N.g.W]?h.allowLinker=!0:!1===D&&zD(h,"useAmpClientId",!1);f.hitCallback=c.onSuccess;h.name=a}Zm()&&(g["&gcs"]=$m());g["&gcd"]=nn(c);Hj()&&(Uj(N.g.R)||(h.storage="none"),Uj(N.g.J)||(g.allowAdFeatures=!1,h.storeGac=!1));qn()&&(g["&dma_cps"]=on());g["&dma"]=pn();Dm(Lm())&&(g["&tcfd"]=rn());Ji.h&&
(g["&tag_exp"]=Ji.h);var M=oq(c)||d(N.g.kb),O=d(N.g.Md);M&&(c.isGtmEvent||(h[N.g.kb]=M),h._cd2l=!0);O&&!c.isGtmEvent&&(h[N.g.Md]=O);e.fieldsToSend=f;e.fieldsToSet=g;e.createOnlyFields=h;return e},AD=function(a){var b=a.gtmEcommerceData;if(!b)return null;var c={};b.currencyCode&&(c.fh=b.currencyCode);if(b.impressions){c.action="impressions";var d=b.impressions;c.Gj="impressions"===b.translateIfKeyEquals?KD(d):d}if(b.promoView){c.action="promo_view";var e=b.promoView.promotions;c.Qe="promoView"===b.translateIfKeyEquals?
KD(e):e}if(b.promoClick){c.action="promo_click";var f=b.promoClick.promotions;c.Qe="promoClick"===b.translateIfKeyEquals?KD(f):f;c.nb=b.promoClick.actionField;return c}for(var g in b)if(b.hasOwnProperty(g)&&"translateIfKeyEquals"!==g&&"impressions"!==g&&"promoView"!==g&&"promoClick"!==g&&"currencyCode"!==g){c.action=g;var h=b[g].products;c.Ec="products"===b.translateIfKeyEquals?KD(h):h;c.nb=b[g].actionField;break}return Object.keys(c).length?c:null},BD=function(a,b){function c(u){return{id:d(N.g.ya),
affiliation:d(N.g.jg),revenue:d(N.g.ia),tax:d(N.g.df),shipping:d(N.g.Uc),coupon:d(N.g.kg),list:d(N.g.cf)||d(N.g.Tc)||u}}for(var d=function(u){return S(b,u)},e=d(N.g.Z),f,g=0;e&&g<e.length&&!(f=e[g][N.g.cf]||e[g][N.g.Tc]);g++);var h=d(N.g.Rc);if(lb(h))for(var m=0;e&&m<e.length;++m){var n=e[m],p;for(p in h)h.hasOwnProperty(p)&&/^(dimension|metric)\d+$/.test(p)&&void 0!=h[p]&&zD(n,p,n[h[p]])}var q=null,r=d(N.g.Di);if(a===N.g.ra||a===N.g.hc)q={action:a,nb:c(),Ec:KD(e)};else if(a===N.g.ac)q={action:"add",
nb:c(),Ec:KD(e)};else if(a===N.g.bc)q={action:"remove",nb:c(),Ec:KD(e)};else if(a===N.g.Fa)q={action:"detail",nb:c(f),Ec:KD(e)};else if(a===N.g.fb)q={action:"impressions",Gj:KD(e)};else if(a===N.g.hb)q={action:"promo_view",Qe:KD(r)||KD(e)};else if("select_content"===a&&r&&0<r.length||a===N.g.sb)q={action:"promo_click",Qe:KD(r)||KD(e)};else if("select_content"===a||a===N.g.fc)q={action:"click",nb:{list:d(N.g.cf)||d(N.g.Tc)||f},Ec:KD(e)};else if(a===N.g.Hb||"checkout_progress"===a){var t={step:a===
N.g.Hb?1:d(N.g.bf),option:d(N.g.Ed)};q={action:"checkout",Ec:KD(e),nb:nb(c(),t)}}else"set_checkout_option"===a&&(q={action:"checkout_option",nb:{step:d(N.g.bf),option:d(N.g.Ed)}});q&&(q.fh=d(N.g.xa));return q},iE={},wD=function(a,b){var c=iE[a];iE[a]=nb(b);if(!c)return!1;for(var d in b)if(b.hasOwnProperty(d)&&b[d]!==c[d])return!0;for(var e in c)if(c.hasOwnProperty(e)&&c[e]!==b[e])return!0;return!1};function jE(a,b,c,d){}jE.D="internal.executeEventProcessor";function kE(a){var b=void 0;return md(b,this.h,1)}kE.D="internal.executeJavascriptString";var lE=function(a){var b;return b};function mE(){var a=new sb;K(this,"read_container_data"),a.set("containerId",'UA-162781796-6'),a.set("version",'1'),a.set("environmentName",''),a.set("debugMode",Yf),a.set("previewMode",$f),a.set("environmentMode",Zf),a.set("firstPartyServing",wi||yi),a.set("containerUrl",Ec),a.Eb();return a}mE.O="getContainerVersion";function nE(a,b){b=void 0===b?!0:b;var c;return c}nE.O="getCookieValues";function oE(){return dj()}oE.D="internal.getCountryCode";function pE(){var a=[];return md(a)}pE.D="internal.getDestinationIds";function qE(a,b){var c="";return c}qE.D="internal.getElementAttribute";function rE(a){var b=null;return b}rE.D="internal.getElementById";function sE(a){var b="";return b}sE.D="internal.getElementInnerText";function tE(a,b){var c=null;return c}tE.D="internal.getElementProperty";function uE(a){var b;return b}uE.D="internal.getElementValue";function vE(a){var b=0;return b}vE.D="internal.getElementVisibilityRatio";function wE(a){var b=null;return b}wE.D="internal.getElementsByCssSelector";
function xE(a){var b=void 0;return b}xE.D="internal.getEventData";var yE={};yE.enableAWFledge=R(6);yE.enableAdsConversionValidation=R(20);yE.enableAutoPiiOnPhoneAndAddress=R(27);yE.enableCachedEcommerceData=R(84);yE.enableCcdPreAutoPiiDetection=R(11);yE.enableCloudRecommentationsErrorLogging=R(69);yE.enableCloudRecommentationsSchemaIngestion=R(68);yE.enableCloudRetailInjectPurchaseMetadata=R(67);yE.enableCloudRetailLogging=R(66);yE.enableCloudRetailPageCategories=R(17);yE.enableConsentDisclosureActivity=R(32);yE.enableDCFledge=R(7);yE.enableDecodeUri=R(50);
yE.enableDeferAllEnhancedMeasurement=R(34);yE.enableDirectTagLoadingInGoogleTag=R(60);yE.enableEuidAutoMode=R(10);yE.enableFormSkipValidation=R(28);yE.enableLoadGoogleTagOptionsObject=R(64);yE.enableUrlDecodeEventUsage=R(44);yE.enableV1HistoryEventInApi=R(74);yE.loadContainerForGtmEventTags=R(31);yE.useEnableAutoEventOnFormApis=R(21);yE.autoPiiEligible=hj();function zE(){return md(yE)}zE.D="internal.getFlags";function AE(){return new jd(sy)}AE.D="internal.getHtmlId";function BE(a,b){var c;return c}BE.D="internal.getProductSettingsParameter";function CE(a,b){var c;return c}CE.O="getQueryParameters";function DE(a,b){var c;return c}DE.O="getReferrerQueryParameters";function EE(a){var b="";return b}EE.O="getReferrerUrl";function FE(){return ej()}FE.D="internal.getRegionCode";function GE(a,b){var c;return c}GE.D="internal.getRemoteConfigParameter";function HE(a){var b="";return b}HE.O="getUrl";function IE(){K(this,"get_user_agent");return Dc.userAgent}IE.O="getUserAgent";function TE(){return z.gaGlobal=z.gaGlobal||{}}var UE=function(){var a=TE();a.hid=a.hid||Ja();return a.hid},VE=function(a,b){var c=TE();if(void 0==c.vid||b&&!c.from_cookie)c.vid=a,c.from_cookie=b};var CF=function(a){this.s=a;this.C="";this.h=this.s},DF=function(a,b){a.h=b;return a};function EF(a){var b=a.search;return a.protocol+"//"+a.hostname+a.pathname+(b?b+"&richsstsse":"?richsstsse")}function FF(a,b,c){if(a){var d=a||[],e=lb(b)?b:{};if(Array.isArray(d))for(var f=0;f<d.length;f++)c(d[f],e)}};var UF=window,VF=document,WF=function(a){var b=UF._gaUserPrefs;if(b&&b.ioo&&b.ioo()||VF.documentElement.hasAttribute("data-google-analytics-opt-out")||a&&!0===UF["ga-disable-"+a])return!0;try{var c=UF.external;if(c&&c._gaUserPrefs&&"oo"==c._gaUserPrefs)return!0}catch(f){}for(var d=wn("AMP_TOKEN",String(VF.cookie),!0),e=0;e<d.length;e++)if("$OPT_OUT"==d[e])return!0;return VF.getElementById("__gaOptOutExtension")?!0:!1};
function eG(a){l(a,function(c){"_"===c.charAt(0)&&delete a[c]});var b=a[N.g.Ya]||{};l(b,function(c){"_"===c.charAt(0)&&delete b[c]})};var mG=function(a,b){};function lG(a,b){var c=function(){};return c}
function nG(a,b,c){};var oG=lG;function qG(a,b,c){var d=this;}qG.D="internal.gtagConfig";function rG(){var a={};return a};
function tG(a,b){}tG.O="gtagSet";function uG(a,b){}uG.O="injectHiddenIframe";function vG(a,b,c,d,e){}vG.D="internal.injectHtml";var zG={};
function BG(a,b,c,d){}var CG=Object.freeze({dl:1,id:1}),DG={};
function EG(a,b,c,d){}BG.O="injectScript";EG.D="internal.injectScript";function FG(a){var b=!0;return b}FG.O="isConsentGranted";function GG(a){var b=!1;return b}GG.D="internal.isEntityInfrastructure";var HG=function(){var a=dh(function(b){this.h.h.log("error",b)});a.O="JSON";return a};function IG(a){var b=void 0;return "),i.xp6(1),i.Q6J("ngSwitchCase","PHONE_NUMBER"),i.xp6(2),i.Q6J("ngIf",t.errors.length))},directives:[E.RF,E.n9,E.ED,E.O5,w.Jay,w.Vi0,w.O7q,w.SMi,w.oEt,w.LfR,w.tzk,w.h2Z,w.Zpw,E.sg],pipes:[E.Ov],encapsulation:2}),e})();function qe(e,t){1&e&&i.GkF(0)}const Qe=function(e){return{$implicit:e}};function Ze(e,t){if(1&e&&(i.ynx(0),i.YNc(1,qe,1,0,"ng-container",2),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngTemplateOutlet",e.tpl)("ngTemplateOutletContext",i.VKq(2,Qe,e.field))}}function Je(e,t){if(1&e&&(i.ynx(0),i.TgZ(1,"div"),i._UZ(2,"label",3),i._UZ(3,"custom-field-input",4),i._UZ(4,"i",5),i.qZA(),i.BQk()),2&e){const e=i.oxw(2);i.xp6(2),i.Q6J("fieldName",e.field.name),i.xp6(1),i.Q6J("fieldName",e.field.name),i.xp6(1),i.Q6J("fieldName",e.field.name)}}function He(e,t){if(1&e&&(i.ynx(0),i.YNc(1,Ze,2,4,"ng-container",1),i.YNc(2,Je,5,3,"ng-container",1),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.tpl),i.xp6(1),i.Q6J("ngIf",!e.tpl)}}let Ke=(()=>{class e{constructor(e,t,s,i){this.state=e,this.rendererService=t,this.el=s,this.customFields=i,this.hidden=!1}ngOnInit(){this.field=this.customFields.registerField(this.fieldName,this.rest),this.field||(this.field=w.wRQ.default(),this.rendererService.detachView(this.el.nativeElement))}ngAfterContentInit(){this.state.ready$.pipe((0,m.zg)(()=>this.customFields.fieldVisibility(this.field.name))).subscribe(e=>this.hidden=!e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(I),i.Y36(w.Vht),i.Y36(i.SBq),i.Y36(w.ZnY))},e.\u0275cmp=i.Xpm({type:e,selectors:[["custom-field"]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,i.Rgc,7),2&e){let e;i.iGM(e=i.CRH())&&(t.tpl=e.first)}},inputs:{fieldName:"fieldName",rest:"rest"},decls:2,vars:2,consts:[[3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["customFieldLabel","",3,"fieldName"],[3,"fieldName"],["infoIconTooltip","",1,"icon","icon-tooltip",3,"fieldName"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.YNc(1,He,3,2,"ng-container",1),i.qZA()),2&e&&(i.Q6J("hidden",t.hidden),i.xp6(1),i.Q6J("ngIf",t.field))},directives:[E.O5,E.tP,Ae,De,w.hkN],encapsulation:2}),e})();function We(e,t){1&e&&i.GkF(0)}const Xe=function(e){return{$implicit:e}};function et(e,t){if(1&e&&i.YNc(0,We,1,0,"ng-container",2),2&e){const e=t.$implicit,s=i.oxw(2);i.Q6J("ngTemplateOutlet",s.tpl)("ngTemplateOutletContext",i.VKq(2,Xe,e))}}function tt(e,t){1&e&&(i.TgZ(0,"custom-field",1),i.YNc(1,et,1,4,"ng-template"),i.qZA()),2&e&&i.Q6J("fieldName",t.$implicit.name)("rest",!0)}let st=(()=>{class e{constructor(e,t){this.state=e,this.customFields=t,this.hostClass=!0,this.fields=[]}ngAfterContentInit(){this.state.ready$.pipe((0,m.zg)(()=>this.customFields.fields)).subscribe(e=>this.fields=e)}trackByFields(e,t){return t.name+(t.locale||"")}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(I),i.Y36(w.ZnY))},e.\u0275cmp=i.Xpm({type:e,selectors:[["custom-fields"]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,i.Rgc,7),2&e){let e;i.iGM(e=i.CRH())&&(t.tpl=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&i.ekj("custom-fields",t.hostClass)},decls:1,vars:2,consts:[[3,"fieldName","rest",4,"ngFor","ngForOf","ngForTrackBy"],[3,"fieldName","rest"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&i.YNc(0,tt,2,2,"custom-field",0),2&e&&i.Q6J("ngForOf",t.fields)("ngForTrackBy",t.trackByFields)},directives:[E.sg,Ke,E.tP],encapsulation:2}),e})(),it=(()=>{class e{constructor(e,t,s){this.view=e,this.state=t,this.viewManager=s}ngAfterContentInit(){this.viewManager.manageView(this,!0)}isVisible(){return this.state.showResendConfirmationEmail$.asObservable()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.s_b),i.Y36(I),i.Y36(w.jSz))},e.\u0275dir=i.lG2({type:e,selectors:[["","showIfResendConfirmationEmailNeeded",""]],contentQueries:function(e,t,s){if(1&e&&i.Suo(s,w.dvP,5),2&e){let e;i.iGM(e=i.CRH())&&(t.fieldDirectives=e)}},features:[i._Bn([w.jSz])]}),e})(),nt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-profile-preloader"]],decls:18,vars:0,consts:[[1,"p-row"],[1,"p-label"],[1,"p-input"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"div",1),i._UZ(2,"div",2),i.qZA(),i.TgZ(3,"div",0),i._UZ(4,"div",1),i._UZ(5,"div",2),i.qZA(),i.TgZ(6,"div",0),i._UZ(7,"div",1),i._UZ(8,"div",2),i.qZA(),i.TgZ(9,"div",0),i._UZ(10,"div",1),i._UZ(11,"div",2),i.qZA(),i.TgZ(12,"div",0),i._UZ(13,"div",1),i._UZ(14,"div",2),i.qZA(),i.TgZ(15,"div",0),i._UZ(16,"div",1),i._UZ(17,"div",2),i.qZA())},styles:["[_nghost-%COMP%]{display:block}@keyframes preloader-opacity-pulse{0%,to{opacity:1}50%{opacity:.5}}.p-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.p-row[_ngcontent-%COMP%]:first-child{margin-top:31px}.p-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{animation:preloader-opacity-pulse 1.5s ease-in-out 0s infinite;border-radius:2px}.p-label[_ngcontent-%COMP%]{background:#ebebeb;height:16px;width:172px;margin-right:20px}.p-input[_ngcontent-%COMP%]{background:#ebebeb;height:30px;flex:1}@media (max-width: 600px){.p-row[_ngcontent-%COMP%]{display:block}.p-label[_ngcontent-%COMP%]{margin-bottom:4px}[_nghost-%COMP%]{padding-left:25px;padding-right:25px}}"]}),e})(),rt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[E.ez]]}),e})()},4843:function(e,t,s){s.d(t,{od:function(){return i.o},L8:function(){return n.L},Ux:function(){return r.U},JN:function(){return o.J},Tj:function(){return a.T}});var i=s(36074),n=(s(60762),s(76951)),r=(s(9634),s(60547)),o=(s(41773),s(71594),s(44051)),a=(s(15392),s(28552))},36074:function(e,t,s){s.d(t,{o:function(){return d}});var i=s(11093),n=s(57263),r=s(88484),o=s(38583),a=s(10494),c=s(60762),u=s(37716);const l=[{path:"",component:c.y}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[a.Bz.forChild(l)],a.Bz]}),e})(),d=(()=>{class e{constructor(e,t,s){this.aotDetector=e,this.postMessage=t,this.eventsService=s,this.postMessage.send("loaded"),this.eventsService.prefix="App"}static forRoot(t=!1){return{ngModule:e,providers:[{provide:i.S48,useValue:t},i.X4h,i.Q1l,i.e80,i.$rL,i.UxS,i.RuG,i.YIy,i.T_6,i.KVB,i.ZnY,i.oPl,i._Tj,i.unP,i.weS,i.WRB,i.eJU,n.b2,n.xE,n.n,r._l,n.F,i.Vxf,n.bH,n.V,i.rRT,i.Yg9,i.oLl,i.H2,i.Qgx,i.HQc,i.lT,i.OR6,i.clr,i.$iy,n.zr,i.Vht,i.mGE,n.dK,i.H3W,i.cKD,i.tlL,n.Pw,i.RrL,i.xVr]}}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(i.rRT),u.LFG(i.FL7),u.LFG(i.nCZ))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.QI.forRoot(),n.Pv.forRoot()],o.ez,i.z8t,i.$ys,h,n.QI]}),e})()},60762:function(e,t,s){s.d(t,{y:function(){return o}});var i=s(37716),n=s(11093),r=s(63393);let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-widget"]],decls:5,vars:0,template:function(e,t){1&e&&(i._UZ(0,"pn-messages"),i._uU(1,"\n"),i.TgZ(2,"app-resolve-outlet"),i._uU(3,"\n"),i.qZA(),i._uU(4,"\n"))},directives:[n.d0F,r.w],encapsulation:2}),e})()},60547:function(e,t,s){s.d(t,{U:function(){return h}});var i=s(38583),n=s(11093),r=s(66898),o=s(10494),a=s(41773),c=s(37716);const u=[{path:"",component:a.U}];let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.Bz.forChild(u)],o.Bz]}),e})(),h=(()=>{class e{constructor(e,t,s){this.aotDetector=e,this.postMessage=t,this.eventsService=s,this.postMessage.send("loaded"),this.eventsService.prefix="Form"}static forRoot(t=!1){return{ngModule:e,providers:[{provide:n.S48,useValue:t},n.X4h,n.e80,n.Q1l,n.UxS,n.RuG,n.T_6,n.YIy,n.ZnY,n._Tj,n.unP,n.WRB,n.oPl,n.eJU,r.b2,r.H3,r.iS,n.Vxf,n.rRT,n.H3W,n.H2,n.weS,n.Vht,n.RrL,n.xVr]}}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(n.rRT),c.LFG(n.FL7),c.LFG(n.nCZ))},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[i.ez,n.z8t,l]}),e})()},41773:function(e,t,s){s.d(t,{U:function(){return r}});var i=s(37716),n=s(63393);let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["form-widget"]],decls:3,vars:0,template:function(e,t){1&e&&(i.TgZ(0,"app-resolve-outlet"),i._uU(1,"\n"),i.qZA(),i._uU(2,"\n"))},directives:[n.w],encapsulation:2}),e})()},28552:function(e,t,s){s.d(t,{T:function(){return p}});var i=s(11093),n=s(57263),r=s(88484),o=s(38583),a=s(10494),c=s(15392),u=s(37716);const l=[{path:"",component:c._}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[a.Bz.forChild(l)],a.Bz]}),e})();var d=s(86896),f=s(20800);let p=(()=>{class e{constructor(e,t,s){this.aotDetector=e,this.postMessage=t,this.eventsService=s,this.postMessage.send("loaded"),s.prefix="gm-sso"}static forRoot(t=!1){return{ngModule:e,providers:[{provide:i.S48,useValue:t},i.rRT,n.bH,i.X4h,i.Q1l,i.e80,i.$rL,i.UxS,i.YIy,i.ZnY,i.RuG,i.oPl,i.T_6,i._Tj,i.unP,i.WRB,i.KVB,i.eJU,n.b2,n.xE,n.n,r._l,n.F,d.O5,i.Vxf,n.V,i.Yg9,i.H3W,i.H2,i.weS,i.oLl,i.Qgx,i.HQc,i.lT,i.OR6,i.clr,i.$iy,n.zr,i.Vht,i.mGE,f.bw,i.cKD,i.tlL,n.dK,n.Pw,i.RrL,i.xVr]}}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(i.rRT),u.LFG(i.FL7),u.LFG(i.nCZ))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.QI.forRoot(),n.Pv.forRoot()],o.ez,i.z8t,i.$ys,h,n.QI]}),e})()},15392:function(e,t,s){s.d(t,{_:function(){return r}});var i=s(37716),n=s(63393);let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["gm-sso-widget"]],decls:3,vars:0,template:function(e,t){1&e&&(i.TgZ(0,"app-resolve-outlet"),i._uU(1,"\n"),i.qZA(),i._uU(2,"\n"))},directives:[n.w],encapsulation:2}),e})()},44051:function(e,t,s){s.d(t,{J:function(){return d}});var i=s(38583),n=s(11093),r=s(86896),o=s(52189),a=s(10494),c=s(71594),u=s(37716);const l=[{path:"",component:c.b}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[a.Bz.forChild(l)],a.Bz]}),e})(),d=(()=>{class e{constructor(e,t){this.postMessage=e,this.eventsService=t,this.postMessage.send("loaded"),this.eventsService.prefix=""}static forRoot(){return{ngModule:e,providers:[n.X4h,n.Q1l,n.e80,n.UxS,n.YIy,n.ZnY,n.RuG,n.oPl,n.T_6,n._Tj,n.unP,n.WRB,n.KVB,n.eJU,n.Vxf,n.Yg9,n.H3W,n.H2,n.weS,n.oLl,n.Qgx,n.HQc,n.lT,n.OR6,n.clr,n.$iy,n.Vht,o.Q6,o.b2,o.lP,n.RrL,n.xVr]}}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(n.FL7),u.LFG(n.nCZ))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[i.ez,n.$ys,h,r.H2]}),e})()},71594:function(e,t,s){s.d(t,{b:function(){return c}});var i=s(38583),n=s(37716),r=s(11093),o=s(63393),a=s(86896);let c=(()=>{class e{constructor(e,t,s,iEi;aJ._spx=!0,Sx();if(R(16)){}}}catch(eh){if(bj(4),Ok){var Ge=Vk(!0,!0);Nc(Ge)}}});

})()

me="autofill-iframe"}ngAfterViewInit(){this.elementsService.appendEmptyIframe(this.iframeName,this.elementRef.nativeElement)}layoutLoaded(){this.renderer.removeClass(this.documentRef.body,"preload")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(r.KVB),n.Y36(n.Qsj),n.Y36(i.K0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["newsletters-widget"]],decls:12,vars:1,consts:[["action","about:blank"],[3,"layoutLoaded"],["id","profile-autofill-submit","type","submit",2,"display","none"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._uU(1,"\n  "),n._UZ(2,"pn-messages"),n._uU(3,"\n  "),n.TgZ(4,"app-resolve-outlet",1),n.NdJ("layoutLoaded",function(){return t.layoutLoaded()}),n._uU(5,"\n    "),n._UZ(6,"app-profile-preloader"),n._uU(7,"\n  "),n.qZA(),n._uU(8,"\n\n  "),n._UZ(9,"button",2),n._uU(10,"\n"),n.qZA(),n._uU(11,"\n")),2&e&&n.uIk("target",t.iframeName)},directives:[r.d0F,o.w,a.TY],encapsulation:2}),e})()},76951:function(e,t,s){s.d(t,{L:function(){return h}});var i=s(38583),n=s(11093),r=s(86896),o=s(10494),a=s(9634),c=s(37716);const u=[{path:"",component:a.d}];let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.Bz.forChild(u)],o.Bz]}),e})(),h=(()=>{class e{constructor(e,t){this.postMessage=e,this.eventsService=t,this.postMessage.send("loaded"),this.eventsService.prefix="Profile"}static forRoot(){return{ngModule:e,providers:[r.zq,n.X4h,n.Q1l,n.e80,n.UxS,n.YIy,n.ZnY,n.RuG,n.oPl,n.T_6,n._Tj,n.unP,n.WRB,n.KVB,n.eJU,r.b2,r.UV,r.O5,n.Vxf,n.Yg9,n.H3W,n.H2,n.weS,n.oLl,n.Qgx,n.HQc,n.lT,n.OR6,n.clr,n.$iy,n.Vht,n.RrL,n.lwu,n.xVr]}}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(n.FL7),c.LFG(n.nCZ))},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[i.ez,n.$ys,n.z8t,l,r.H2]}),e})()},9634:function(e,t,s){s.d(t,{d:function(){return c}});var i=s(38583),n=s(37716),r=s(11093),o=s(63393),a=s(86896);let c=(()=>{class e{constructor(e,t,s,i){this.elementRef=e,this.elementsService=t,this.renderer=s,this.documentRef=i,this.iframeName="autofill-iframe"}ngAfterViewInit(){this.elementsService.appendEmptyIframe(this.iframeName,this.elementRef.nativeElement)}layoutLoaded(){this.renderer.removeClass(this.documentRef.body,"preload")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(r.KVB),n.Y36(n.Qsj),n.Y36(i.K0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["profile-widget"]],decls:12,vars:1,consts:[["action","about:blank"],[3,"layoutLoaded"],["id","profile-autofill-submit","type","submit",2,"display","none"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._uU(1,"\n  "),n._UZ(2,"pn-messages"),n._uU(3,"\n  "),n.TgZ(4,"app-resolve-outlet",1),n.NdJ("layoutLoaded",function(){return t.layoutLoaded()}),n._uU(5,"\n    "),n._UZ(6,"app-profile-preloader"),n._uU(7,"\n  "),n.qZA(),n._uU(8,"\n\n  "),n._UZ(9,"button",2),n._uU(10,"\n"),n.qZA(),n._uU(11,"\n")),2&e&&n.uIk("target",t.iframeName)},directives:[r.d0F,o.w,a.TY],encapsulation:2}),e})()},88484:function(e,t,s){s.d(t,{YC:function(){return E},wT:function(){return S},_l:function(){return m}});var i=s(64762),n=s(37716),r=s(38583),o=s(25917),a=s(26215),c=s(79765),u=s(3679);function l(e,t,s,i,n){window.ng2recaptchaloaded=()=>{t(grecaptcha)};const r=document.createElement("script");r.innerHTML="",r.src=`${i||"https://www.google.com/recaptcha/api.js"}?render=${e}&onload=ng2recaptchaloaded${s}`,n&&(r.nonce=n),r.async=!0,r.defer=!0,document.head.appendChild(r)}const h=new n.OlP("recaptcha-language"),d=new n.OlP("recaptcha-base-url"),f=new n.OlP("recaptcha-nonce-tag"),p=new n.OlP("recaptcha-settings"),g=new n.OlP("recaptcha-v3-site-key");let m=v=class{constructor(e,t,s,i,n){this.platformId=e,this.language=t,this.baseUrl=s,this.nonce=i,this.v3SiteKey=n,this.init(),this.ready=(0,r.NF)(this.platformId)?v.ready.asObservable():(0,o.of)()}init(){if(!v.ready&&(0,r.NF)(this.platformId)){const e=new a.X(null);v.ready=e,l(this.v3SiteKey||"explicit",t=>e.next(t),this.language?"&hl="+this.language:"",this.baseUrl,this.nonce)}}};var v;m.\u0275fac=function(e){return new(e||m)(n.LFG(n.Lbi),n.LFG(h,8),n.LFG(d,8),n.LFG(f,8),n.LFG(g,8))},m.\u0275prov=n.Yz7({token:m,factory:function(e){return m.\u0275fac(e)}}),m.ready=null,m.ctorParameters=()=>[{type:void 0,decorators:[{type:n.tBr,args:[n.Lbi]}]},{type:String,decorators:[{type:n.FiY},{type:n.tBr,args:[h]}]},{type:String,decorators:[{type:n.FiY},{type:n.tBr,args:[d]}]},{type:String,decorators:[{type:n.FiY},{type:n.tBr,args:[f]}]},{type:String,decorators:[{type:n.FiY},{type:n.tBr,args:[g]}]}],m=v=(0,i.gn)([(0,i.fM)(0,(0,n.tBr)(n.Lbi)),(0,i.fM)(1,(0,n.FiY)()),(0,i.fM)(1,(0,n.tBr)(h)),(0,i.fM)(2,(0,n.FiY)()),(0,i.fM)(2,(0,n.tBr)(d)),(0,i.fM)(3,(0,n.FiY)()),(0,i.fM)(3,(0,n.tBr)(f)),(0,i.fM)(4,(0,n.FiY)()),(0,i.fM)(4,(0,n.tBr)(g))],m);let b=0,S=(()=>{let e=class{constructor(e,t,s,i){this.elementRef=e,this.loader=t,this.zone=s,this.id="ngrecaptcha-"+b++,this.errorMode="default",this.resolved=new n.vpe,this.error=new n.vpe,i&&(this.siteKey=i.siteKey,this.theme=i.theme,this.type=i.type,this.size=i.size,this.badge=i.badge)}ngAfterViewInit(){this.subscription=this.loader.ready.subscribe(e=>{null!=e&&e.render instanceof Function&&(this.grecaptcha=e,this.renderRecaptcha())})}ngOnDestroy(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()}execute(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)}reset(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())}expired(){this.resolved.emit(null)}errored(e){this.error.emit(e)}captchaResponseCallback(e){this.resolved.emit(e)}grecaptchaReset(){null!=this.widget&&this.zone.runOutsideAngular(()=>this.grecaptcha.reset(this.widget))}renderRecaptcha(){const e={badge:this.badge,callback:e=>{this.zone.run(()=>this.captchaResponseCallback(e))},"expired-callback":()=>{this.zone.run(()=>this.expired())},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type};"handled"===this.errorMode&&(e["error-callback"]=(...e)=>{this.zone.run(()=>this.errored(e))}),this.widget=this.grecaptcha.render(this.elementRef.nativeElement,e),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())}};return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(m),n.Y36(n.R0b),n.Y36(p,8))},e.\u0275cmp=n.Xpm({type:e,selectors:[["re-captcha"]],hostVars:1,hostBindings:function(e,t){2&e&&n.uIk("id",t.id)},inputs:{id:"id",errorMode:"errorMode",siteKey:"siteKey",theme:"theme",type:"type",size:"size",badge:"badge",tabIndex:"tabIndex"},outputs:{resolved:"resolved",error:"error"},exportAs:["reCaptcha"],decls:0,vars:0,template:function(e,t){},encapsulation:2}),(0,i.gn)([(0,n.IIB)(),(0,n.pfw)("attr.id")],e.prototype,"id",void 0),(0,i.gn)([(0,n.IIB)()],e.prototype,"siteKey",void 0),(0,i.gn)([(0,n.IIB)()],e.prototype,"theme",void 0),(0,i.gn)([(0,n.IIB)()],e.prototype,"type",void 0),(0,i.gn)([(0,n.IIB)()],e.prototype,"size",void 0),(0,i.gn)([(0,n.IIB)()],e.prototype,"tabIndex",void 0),(0,i.gn)([(0,n.IIB)()],e.prototype,"badge",void 0),(0,i.gn)([(0,n.IIB)()],e.prototype,"errorMode",void 0),(0,i.gn)([(0,n.r_U)()],e.prototype,"resolved",void 0),(0,i.gn)([(0,n.r_U)()],e.prototype,"error",void 0),e=(0,i.gn)([(0,i.fM)(3,(0,n.FiY)()),(0,i.fM)(3,(0,n.tBr)(p))],e),e})(),w=(()=>{let e=class{};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({}),e})(),C=y=class{static forRoot(){return y}};var y;C.\u0275fac=function(e){return new(e||C)},C.\u0275mod=n.oAB({type:C}),C.\u0275inj=n.cJS({providers:[m],imports:[[w]]});let E=(()=>{let e=class{constructor(e,t,s,i,n,o){this.onLoadComplete=e=>{this.grecaptcha=e,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([e,t])=>this.executeActionWithSubject(e,t)),this.actionBacklog=void 0)},this.zone=e,this.isBrowser=(0,r.NF)(s),this.siteKey=t,this.nonce=n,this.language=o,this.baseUrl=i,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new c.xQ,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}get onExecuteError(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new c.xQ,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable}execute(e){const t=new c.xQ;return this.isBrowser&&(this.grecaptcha?this.executeActionWithSubject(e,t):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([e,t]))),t.asObservable()}executeActionWithSubject(e,t){const s=s=>{this.zone.run(()=>{t.error(s),this.onExecuteErrorSubject&&this.onExecuteErrorSubject.next({action:e,error:s})})};this.zone.runOutsideAngular(()=>{try{this.grecaptcha.execute(this.siteKey,{action:e}).then(s=>{this.zone.run(()=>{t.next(s),t.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:e,token:s})})},s)}catch(i){s(i)}})}init(){this.isBrowser&&("grecaptcha"in window?this.grecaptcha=grecaptcha:l(this.siteKey,this.onLoadComplete,this.language?"&hl="+this.language:"",this.baseUrl,this.nonce))}};return e.\u0275fac=function(t){return new(t||e)(n.LFG(n.R0b),n.LFG(g),n.LFG(n.Lbi),n.LFG(d,8),n.LFG(f,8),n.LFG(h,8))},e.\u0275prov=n.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e=(0,i.gn)([(0,i.fM)(1,(0,n.tBr)(g)),(0,i.fM)(2,(0,n.tBr)(n.Lbi)),(0,i.fM)(3,(0,n.FiY)()),(0,i.fM)(3,(0,n.tBr)(d)),(0,i.fM)(4,(0,n.FiY)()),(0,i.fM)(4,(0,n.tBr)(f)),(0,i.fM)(5,(0,n.FiY)()),(0,i.fM)(5,(0,n.tBr)(h))],e),e})(),Y=_=class{constructor(e){this.host=e}writeValue(e){e||this.host.reset()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onResolve(e){this.onChange&&this.onChange(e),this.onTouched&&this.onTouched()}};var _;Y.\u0275fac=function(e){return new(e||Y)(n.Y36(S))},Y.\u0275dir=n.lG2({type:Y,selectors:[["re-captcha","formControlName",""],["re-captcha","formControl",""],["re-captcha","ngModel",""]],hostBindings:function(e,t){1&e&&n.NdJ("resolved",function(e){return t.onResolve(e)})},features:[n._Bn([{multi:!0,provide:u.JU,useExisting:(0,n.Gpc)(()=>_)}])]}),Y.ctorParameters=()=>[{type:S}],(0,i.gn)([(0,n.L6J)("resolved",["$event"])],Y.prototype,"onResolve",null)}}]);