!function(){var t={485:function(t){.exports=async function(t){try{await async function(t){if(!navigator.clipboard)throw e();return navigator.clipboard.writeText(t)}(t)}catch(n){try{await async function(t){const n=document.createElement("span");n.textContent=t,n.style.whiteSpace="pre",n.style.webkitUserSelect="auto",n.style.userSelect="all",document.body.appendChild(n);const r=window.getSelection(),o=window.document.createRange();r.removeAllRanges(),o.selectNode(n),r.addRange(o);let i=!1;try{i=window.document.execCommand("copy")}finally{r.removeAllRanges(),window.document.body.removeChild(n)}if(!i)throw e()}(t)}catch(t){throw t||n||e()}}}},796:function(t,e,n){"use strict";var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([t.id,".kumulos-rating{display:flex;height:20px;font-size:16px;align-items:center;margin-top:3px}.kumulos-rating .kumulos-rating-star{position:relative}.kumulos-rating .kumulos-rating-star .kumulos-rating-halfstar{position:absolute;left:0;top:0;width:50%;overflow:hidden}.kumulos-rating .kumulos-rating-count{font-size:12px;margin-left:3px}",""]),e.Z=s},99:645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r="undefined"!=typeof e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var u=0;u<this.length;u++){var a=this[u][0];null!=a&&(s[a]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&s[l[0]]||("undefined"!=typeof i&&("undefined"==typeof l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},81:748:function(t,e,n){"use strict";n.r(e),n.d(e,{Children:function(){return j},Component:function(){return s.Component},Fragment:function(){return s.Fragment},PureComponent:function(){return N},StrictMode:function(){return gt},Suspense:function(){return W},SuspenseList:function(){return G},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:function(){return pt},cloneElement:function(){return vt},createContext:function(){return s.createContext},createElement:function(){return s.createElement},createFactory:function(){return dt},createPortal:function(){return Z},createRef:function(){return s.createRef},default:function(){return kt},findDOMNode:function(){return _t},flushSync:function(){return bt},forwardRef:function(){return L},hydrate:function(){return nt},isValidElement:function(){return ht},lazy:function(){return z},memo:function(){return I},render:function(){return et},unmountComponentAtNode:function(){return mt},unstable_batchedUpdates:function(){return yt},useCallback:function(){return w},useContext:function(){return x},useDebugValue:function(){return P},useEffect:function(){return _},useErrorBoundary:function(){return S},useImperativeHandle:function(){return g},useLayoutEffect:function(){return y},useMemo:function(){return k},useReducer:function(){return m},useRef:function(){return b},useState:function(){return v},version:function(){return ft}});var r,o,i,s=n(400),u=0,a=[],c=s.options.__b,l=s.options.__r,p=s.options.diffed,f=s.options.__c,d=s.options.unmount;=s.options.__r=s.options.diffed=s.options.__c=s.options.unmount=var C="function"==typeof requestAnimationFrame;tion D(t,e){for(var n in e)t[n]=e[n];return t}prototype=new s.Component).isPureReactComponent=!0,N.prototype.shouldComponentUpdate=var U=s.options.__b;s.options.__b=var F="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;ar B=j={map:B,forEach:B,count:only:toArray:s.toChildArray},H=s.options.__e;s.options.__e=var K=s.options.unmount;tions.unmount=(W.prototype=new s.Component).__c=W.prototype.componentWillUnmount=W.prototype.render=var V=prototype=new s.Component).__e=G.prototype.render=G.prototype.componentDidUpdate=G.prototype.componentDidMount=var $="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,J=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,X="undefined"!=typeof document,tt=Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(();var rt=s.options.event;unction it(){return this.cancelBubble}.options.event=var ut,at={configurable:!0,get:,ct=s.options.vnode;s.options.vnode=function(t){var e=t.type,n=t.props,r=n;if("string"==typeof e){var o=-1===e.indexOf("-");for(var i in r={},n){var u=n[i];X&&"children"===i&&"noscript"===e||"value"===i&&"defaultValue"in n&&null==u||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===u?u="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!tt(n.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():o&&J.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===u&&(u=void 0),r[i]=u)}"select"==e&&r.multiple&&Array.isArray(r.value)&&(r.value=(0,s.toChildArray)(n.children).forEach(()),"select"==e&&null!=r.defaultValue&&(r.value=(0,s.toChildArray)(n.children).forEach(()),t.props=r,n.class!=n.className&&(at.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",at))}t.$$typeof=$,ct&&ct(t)};var lt=s.options.__r;s.options.__r=var pt={ReactCurrentDispatcher:{current:{readContext:}},ft="17.0.2";t=function(t,e){return t(e)},bt=gt=s.Fragment,kt={useState:v,useReducer:m,useEffect:_,useLayoutEffect:y,useRef:b,useImperativeHandle:g,useMemo:k,useCallback:w,useContext:x,useDebugValue:P,version:"17.0.2",Children:j,render:et,hydrate:nt,unmountComponentAtNode:mt,createPortal:Z,createElement:s.createElement,createContext:s.createContext,createFactory:dt,cloneElement:vt,createRef:s.createRef,Fragment:s.Fragment,isValidElement:ht,findDOMNode:_t,Component:s.Component,PureComponent:N,memo:I,forwardRef:L,flushSync:bt,unstable_batchedUpdates:yt,StrictMode:s.Fragment,Suspense:W,SuspenseList:G,lazy:z,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:pt}},400:function(t,e,n){"use strict";n.r(e),n.d(e,{Component:function(){return g},Fragment:function(){return b},cloneElement:function(){return H},createContext:function(){return K},createElement:function(){return m},createRef:function(){return y},h:function(){return m},hydrate:function(){return j},isValidElement:function(){return s},options:function(){return o},render:function(){return B},toChildArray:function(){return C}});var r,o,i,s,u,a,c,l,p={},f=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;s.l[t.type+!1](o.event?o.event(t):t)}={__e:,i=0,s=g.prototype.setState=g.prototype.forceUpdate=g.prototype.render=b,u=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,P.__r=0,l=0},452:function(t,e,n){"use strict";n.r(e);var r=n(379),o=n.n(r),i=n(795),s=n.n(i),u=n(569),a=n.n(u),c=n(565),l=n.n(c),p=n(216),f=n.n(p),d=n(589),h=n.n(d),v=n(796),m={};m.styleTagTransform=h(),m.setAttributes=l(),m.insert=a().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=f();o()(v.Z,m);e.default=v.Z&&v.Z.locals?v.Z.locals:void 0},273:379:569:function(t){"use strict";var e={};t.exports=function(t,n){var r=t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:565:795:function(t){"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o="undefined"!=typeof n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:}},589:780:function(t,e,n){"use strict";e.__esModule=!0,e.AppRating=void 0;var r=n(400);function o(t){var e;return e="on"===t.state?(0,r.h)("span",null,"★"):"half"===t.state?(0,r.h)("div",null,(0,r.h)("span",null,"☆"),(0,r.h)("span",{class:"kumulos-rating-halfstar"},"★")):(0,r.h)("span",null,"☆"),(0,r.h)("div",{class:"kumulos-rating-star"},e)}n(452),e.AppRating=function(t){var e=t.stars;t.ratingCount;var n={color:t.color};return(0,r.h)("div",{class:"kumulos-rating",style:n},function(){for(var t=[],n=1;n<=5;n++)t.push((0,r.h)(o,{state:e>=n?"on":e<n&&e>n-1?"half":"off"}));return t}(),(0,r.h)("span",{class:"kumulos-rating-count"},"(",t.ratingCount,")"))}},741:function(t,e,n){"use strict";e.__esModule=!0,e.SvgPointer=void 0;var r=n(400),o=Math.PI/2,i=50,s=150;e.SvgPointer=function(t){var e,n,u,a,c,l,p,f,d=t.area,h=t.quadCurvePoints,v=t.color,m=h.p1,_=h.p2,y=h.p3,b="M ".concat(m.x," ").concat(m.y," Q ").concat(_.x," ").concat(_.y," ").concat(y.x," ").concat(y.y),g=(e=_,n=y,u=Math.atan2(e.x-e.x,n.y-n.y)+o,a=Math.cos(u),c=-Math.sin(u),p=-(l={x:a*s,y:c*s}).x*i,f=-c*i,{p1:{x:Math.cos(u-o)*i+p,y:-Math.sin(u-o)*i+f},p2:l,p3:{x:Math.cos(u+o)*i+p,y:-Math.sin(u+o)*i+f}}),k=g.p1,w=g.p2,x=g.p3,P="M ".concat(y.x+k.x," ").concat(y.y+k.y," Q ").concat(y.x+w.x," ").concat(y.y+w.y," ").concat(y.x+x.x," ").concat(y.y+x.y),S={stroke:v,fill:"none"};return(0,r.h)("svg",{viewBox:"0 0 ".concat(d.width," ").concat(d.height),width:"".concat(d.width,"px"),height:"".concat(d.height,"px"),xmlns:"http://www.w3.org/2000/svg"},(0,r.h)("g",{"stroke-width":"3","stroke-linecap":"round",fill:"none","fill-rule":"evenodd"},(0,r.h)("path",{style:S,d:b}),(0,r.h)("path",{style:S,d:P})))}},248:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};e.__esModule=!0,e.deleteDdlBannerConfigFromCache=e.loadDdlConfig=e.loadPlatformAndKeysConfig=void 0;var i,s=n(676),u=n(159),a=nted")}},l=36e5;function p(t,e,n){var i;return r(this,void 0,void 0,(function(){var r,s,p,f,d;return o(this,(function(o){switch(o.label){case 0:return r=c(e),[4,(0,u.get)(r.CONFIG_CACHE_KEY)];case 1:return s=o.sent(),[4,(0,u.get)(r.CONFIG_CACHE_KEY_UPDATED)];case 2:if(p=null!==(i=o.sent())&&void 0!==i?i:0,f=!1,!(Date.now()-p>l))return[3,6];o.label=3;case 3:return o.trys.push([3,5,,6]),[4,(0,a.performJsonFetch)(t,n)];case 4:return s=o.sent(),f=!0,[3,6];case 5:return d=o.sent(),console.warn(d),[3,6];case 6:return f?[4,(0,u.set)(r.CONFIG_CACHE_KEY,s)]:[3,9];case 7:return o.sent(),[4,(0,u.set)(r.CONFIG_CACHE_KEY_UPDATED,Date.now())];case 8:o.sent(),o.label=9;case 9:return[2,s]}}))}))}!function(t){t.PLATFORM="platformV2",t.DDL="ddl"}(i||(i={})),e.loadPlatformAndKeysConfig=function(t){var e;return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,p(t,i.PLATFORM)];case 1:return[2,null!==(e=n.sent())&&void 0!==e?e:{}]}}))}))},e.loadDdlConfig=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,(0,s.getInstallId)()];case 1:e=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,p("".concat(t.urlForService(s.Service.DDL),"/v1/banners?webInstallId=").concat(e),i.DDL,t.authHeader)];case 3:return[2,r.sent()];case 4:return n=r.sent(),console.warn("loadDdlConfig: failed to load Deferred DeepLink configuration",n),[3,5];case 5:return[2]}}))}))},e.deleteDdlBannerConfigFromCache=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=c(i.DDL),[4,(0,u.get)(e.CONFIG_CACHE_KEY)];case 1:return(n=r.sent())?(n=n.id!==t})),[4,(0,u.set)(e.CONFIG_CACHE_KEY,n)]):[2];case 2:return r.sent(),[2]}}))}))}},676:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};e.__esModule=!0,e.trackInstallDetails=e.trackEvent=e.clearUserAssociation=e.associateUser=e.getUserId=e.setInstallId=e.getInstallId=e.assertKeys=e.assertConfigValid=e.Context=e.Service=e.SDKFeature=e.PromptPosition=e.ReminderTimeUnit=e.UiActionType=e.PromptTypeName=e.EventType=void 0;var i,s,u,a=n(488),c=n(159),l=104,p="2eared"}(i=e.EventType||(e.EventType={})),function(t){t.BELL="bell",t.ALERT="alert",t.BANNER="banner",t.DDL_BANNER="ddl_banner"}(e.PromptTypeName||(e.PromptTypeNaplink"}(e.UiActionType||(e.UiActionType={})),function(t){t.HOURS="hours",t.DAYS="days"}(e.ReminderTimeUnit||(e.ReminderTimeUnottom"}(e.PromptPosition||(e.PromptPosition={})),function(t){t.PUSH="push",t.DDL="ddl"}(s=e.SDKFeature||(e.SDKFeatuvents"}(u=e.Service||(e.Service={}));var f=function(){function t(t){var e,n,r,o;this.apiKey=t.apiKey,this.secretKey=t.secretKey,this.vapidPublicKey=t.vapidPublicKey,this.authHeader="Basic ".concat(btoa("".concat(this.apiKey,":").concat(this.secretKey))),this.serviceWorkerPath=null!==(n=t.serviceWorkerPath)&&void 0!==n?n:"/worker.js",this.autoResubscribe=null===(r=t.autoResubscribe)||void 0===r||r,this.features=null!==(o=t.features)&&void 0!==o?o:[s.PUSH],this.eventSubscribers=[],this.pushStateSubscribers=[],this.urlMap=((e={})[u.PUSH]="https://push-".concat(t.region,".kumulos.com"),e[u.EVENTS]="https://events-".concat(t.region,".kumulos.com"),e[u.DDL]="https://links-".concat(t.region,".kumulos.com"),e)}return t.prototype.subscribeToEvents=function(t){this.eventSubscribers.push(t)},t.prototype.subscribeToSubscriptioush(t)},t.prototype.broadcastEvent=function(t){this.eventSubscribers.forEach((function(e){return e(t)}))},t.prototype.broadcastSubscripti(t)}))},t.prototype.hasdes(t)},t.prototype.urlForMap[t]},t}();e.Context=f,e.assertConfigValid=function(t,e){if(void 0===e&&(e=!1),"object"!=typeof t)throw"Config must be an object";var n=Array.isArray(t.features)&&t.features.length?t.features:void 0;if(e&&!t.tenantId)throw"tenantId is missing";if(!n||n.includes(s.PUSH))return function(t){for(var e=0,n=["region"];e<n.length;e++){var r=n[e];if("string"!=typeof t[r]||0===t[r].length)throw"Required configuration key '".concat(r,"' must be non-empty string")}if(t.serviceWorkerPath&&"string"!=typeof t.serviceWorkerPath&&0===t.serviceWorkerPath.length)throw"Optional configuration key 'serviceWorkerPath' must be non-empty string (if supplied)";if(t.onPushReceived&&"function"!=typeof t.onPushReceived)throw"Optional configuration key 'onPushReceived' must be a function";if(t.onPushOpened&&"function"!=typeof t.onPushOpened)throw"Optional configuration key 'onPushOpened' must be a function"}(t)},e.assertKeys=function(t){if(!(t.keys&&t.keys.apiKey&&t.keys.secretKey&&t.publicKey))throw"Keys are missing"};var d=void 0;function h(){return d||(d=(0,c.get)("installId").then((function(t){return t||v((0,a.uuidv4)())})))}function v(t){return d=(0,c.set)("installId",t)}function m(){return(0,c.get)("userId"?t:h()}))}function _(t,e,n){return r(this,void 0,void 0,(function(){var r,s,c,l;return o(this,(function(o){switch(o.label){case 0:return[4,h()];case 1:return r=o.sent(),[4,m()];case 2:return s=o.sent(),c={type:e,uuid:(0,a.uuidv4)(),timestamp:Date.now(),data:n,userId:s},t.broadcastEdes(t)}(e)?(l="".concat(t.urlForService(u.EVENTS),"/v1/app-installs/").concat(r,"/events"),[2,(0,a.performFetch)(l,t.authHeader,{method:"POST",body:JSON.stringify([c])})]):[2,Promise.resolve()]}}))}))}e.getInstallId=h,e.setInstallId=v,e.getUserId=m,e.associateUser=function(t,e,n){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return[4,(0,c.set)("userId",e)];case 1:return o.sent(),r={id:e,attributes:n},[2,_(t,i.USER_ASSOCIATED,r).then((function(t){}))]}}))}))},e.clearUserAssociation=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,m()];case 1:return e=n.sent(),_(t,i.USER_ASSOCIATION_CLEARED,{oldUserIdentifier:e}),[2,(0,c.del)("userId")]}}))}))},e.trackEvent=_,e.trackInstallDetails=function(t,e){return r(this,void 0,void 0,(function(){var n,r,s,u,f,d,v;return o(this,(function(o){switch(o.label){case 0:n=e||p,r={app:{bundle:location.host,version:"0.0.0",target:2},sdk:{id:l,version:n},runtime:{id:8,version:navigator.userAgent},os:{id:0,version:"0.0.0"},device:{name:navigator.userAgent,tz:"undefined"!=typeof Intl&&Intl.DateTimeFormat().resolvedOptions().timeZone||null,isSimulator:!1,locale:navigator.language}},s="",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,h()];case 2:return s=o.sent(),[3,4];case 3:return u=o.sent(),console.error("Failed to get install ID: ",u),[2,Promise.reject(u)];case 4:f=[s,n,r.app.bundle,r.device.tz,r.device.locale,r.device.name],d=(0,a.cyrb53)(f.join("|")),o.label=5;case 5:return o.trys.push([5,7,,8]),[4,(0,c.get)("detailsHash")];case 6:return o.sent()===d?[2,Promise.resolve()]:[3,8];case 7:return v=o.sent(),[2,Promise.reject(v)];case 8:return[2,_(t,i.INSTALL_TRACKED,rsh",d)})).then((function(){}))]}}))}))}},718:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.turn n},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0,e.notificationFromPayload=e.registerServiceWorker=e.trackOpenFromQuery=e.MessageType=e.TokenType=void 0;var u,a,c=n(676),l=n(488),p=s(n(211)),f=s(n(222));!function(t){t[t.W3C=3]="W3C",t[t.SAFARI=4]="SAFARI"}(e.TokenType||(e.TokenTy"PUSH"}(u=e.MessageType||(e.MessageType={})),e.default=function(t){if(a)return a;var e=(0,l.getBrowserName)();return a="safari"!==e||"PushManager"in window?new f.default:new p.default(t.safariPushId)},e.trackOpenFromQuery=function(t){if("safari"===(0,l.getBrowserName)()){var e=(0,l.parseQueryString)();(null==e?void 0:e.knid)&&(0,c.trackEvent)(t,c.EventType.MESSAGE_OPENED,{type:u.PUSH,id:Number(e.knid)})}},e.registerServiceWorker=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:if(!("serviceWorker"in navigator))return console.error("ServiceWorker is not supported in this browser, aborting..."),[2];e=(0,l.getFullUrl)(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.serviceWorker.register(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),console.error(n),[3,4];case 4:return[2]}}))}))},e.notificationFromPayload=function(t){var e,n,r,o=t.data,s=(o["k.message"],i(o,["k.message"]));return{id:t.data["k.message"].data.id,title:t.title,message:t.msg,data:s,url:null!==(e=t.url)&&void 0!==e?e:void 0,iconUrl:null!==(n=t.icon)&&void 0!==n?n:void 0,imageUrl:null!==(r=t.image)&&void 0!==r?r:void 0}}},211:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};e.__esModule=!0;var i=n(676),s=n(718),u=n(488),a=n(159);function c(t,e){return(0,u.cyrb53)("".concat(t.apiKey,":").concat(e))}var l=funshId=t}return t.prototype.requestNotificationPermission=function(t){var e,n="".concat(t.urlForService(i.Service.PUSH),"/safari/").concat(t.apiKey),r=(0,u.defer)();return null===(e=window.safari)||void 0===e||e.pushNotification.requestPermission(n,this.safariPusssion)})),r.promise},t.prototype.pushRegister=function(t){return r(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){return e=this.pushRegisterLock.then((function(){return n.pushRegisterSync(t)})),this.pushRegisterLock=e.catch((function(){})),[2,e]}))}))},t.prototype.attemptPushRegister=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,(0,a.get)("unregisteredAt")];case 1:return e.sent()?[2]:[2,this.pushRegister(t)]}}))}))},t.prototype.pushUnregister=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.pushUnsubscribe(t,!1)];case 1:return e.sent(),[4,(0,a.set)("unregisteredAt",Date.now())];case 2:return e.sent(),t.broadcastSubscriptionState("unregistered"),[2]}}))}))},t.prototype.pushUnsubscribe=function(t,e){return void 0===e&&(e=!0),r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return[4,(0,i.trackEvent)(t,i.EventType.PUSH_UNSUBSCRIBED)];case 1:return o.sent(),[4,(0,a.del)("pushTokenHash")];case 2:return o.sent(),e?(r=(n=t).broadcastSubscriptionState,[4,this.getCurrentSubscriptionState(t)]):[2];case 3:return r.apply(n,[o.sent()]),[2]}}))}))},t.prototype.pushRegisterSync=function(t){var e;return r(this,void 0,void 0,(function(){var n,r,u;return o(this,(function(o){switch(o.label){case 0:return[4,(0,a.del)("unregisteredAt")];case 1:return o.sent(),(n=null===(e=window.safari)||void 0===e?void 0:e.pushNotification.permission(this.safariPushId))&&n.deviceToken?[4,(0,a.get)("pushTokenHash")]:[2];case 2:return r=o.sent(),u=c(t,n.deviceToken),r===u?[2]:[4,(0,i.trackEvent)(t,i.EventType.PUSH_REGISTERED,{type:s.TokenType.SAFARI,token:n.deviceToken,bundleId:this.safariPushId})];case 3:return o.sent(),[4,(0,a.set)("pushTokenHash",u)];case 4:return o.sent(),t.broadcastSubscriptionState("subscribed"),[2]}}))}))},t.prototype.requestPermissionAndRegisterForPush=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,(0,a.get)("unregisteredAt")];case 1:return e.sent()?[2,"unregistered"]:[4,this.requestNotificationPermission(t)];case 2:switch(e.sent()){case"default":return[2,"unsubscribed"];case"denied":return[2,"blocked"]}e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this.pushRegister(t)];case 4:return e.sent(),[2,"subscribed"];case 5:return e.sent(),[2,"unsubscribed"];case 6:return[2]}}))}))},t.prototype.getCurrentSubscriptionState=function(t){var e,n;return r(this,void 0,void 0,(function(){var r,i,s;return o(this,(function(o){switch(o.label){case 0:return(r=null===(e=window.safari)||void 0===e?void 0:e.pushNotification.permission(this.safariPushId))&&"denied"!==(null==r?void 0:r.permission)?[4,(0,a.get)("unregisteredAt")]:[2,"blocked"];case 1:return o.sent()?[2,"unregistered"]:[4,(0,a.get)("pushTokenHash")];case 2:return i=o.sent(),s=c(t,null!==(n=r.deviceToken)&&void 0!==n?n:""),i===s&&"granted"===r.permission?[2,"subscribed"]:[2,"unsubscribed"]}}))}))},t.prototype.handleAutoResubscription=function(t){var e;return r(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return t.autoResubscribe&&this.safariPushId&&((n=null===(e=window.safari)||void 0===e?void 0:e.pushNotification.permission(this.safariPushId))&&"granted"===n.permission&&n.deviceToken)?[4,(0,a.get)("pushTokenHash")]:[2];case 1:return r=o.sent(),i=c(t,n.deviceToken),r===i?[2]:[2,this.attemptPushRegister(t)]}}))}))},t.prototype.isNativePromptShown=function(){return r(this,void 0,0)]}))}))},t}();e.default=l},222:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};e.__esModule=!0;var i=n(676),s=n(718),u=n(488),a=n(159);function c(t,e){var n=e.options.applicationServerKey;return!!n&&(0,u.base64UrlEncode)(n)===t}function l(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=(0,u.getFullUrl)(t),[4,navigator.serviceWorker.getRegistration(e)];case 1:return(n=r.sent())?[2,n]:[2,Promise.reject("No service worker registration")]}}))}))}function p(t,e){return(0,u.cyrb53)("".concat(t.apiKey,":").concat(e.endpoint))}var f=funolve()}return t.prototype.requestNotificationPermission=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:if("undefined"==typeof Notification)return[2,Promise.reject("Notifications are not supported in this browser, aborting...")];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Notification.requestPermission()];case 2:return[2,e.sent()];case 3:return t=e.sent(),console.error(t),[2,Promise.reject(t)];case 4:return[2]}}))}))},t.prototype.pushRegister=function(t){return r(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){return e=this.pushRegisterLocync(t)})),this.pushRegisterLock=eion(){})),[2,e]}))}))},t.prototype.attemptPushRegister=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,(0,a.get)("unregisteredAt")];case 1:return e.sent()?[2]:[2,this.pushRegister(t)]}}))}))},t.prototype.pushRegisterSync=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,(0,a.del)("unregisteredAt")];case 1:return n.sent(),"PushManager"in window?[4,l(t.serviceWorkerPath)]:[2,Promise.reject("Push notifications are not supported in this browser")];case 2:return e=n.sent(),[4,this.unsubscribeIfDifferentVapid(e,t.vapidPublicKey)];case 3:return n.sent(),[4,this.subscribeAndMaybeTrackRegisteredEvent(e,t)];case 4:return n.sent(),[2]}}))}))},t.prototype.unsubscribeIfDifferentVapid=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return!(n=r.sent())||c(e,n)?[3,3]:[4,n.unsubscribe()];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.subscribeAndMaybeTrackRegisteredEvent=function(t,e){return r(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return[4,t.pushManager.subscribe({applicationServerKey:e.vapidPublicKey,userVisibleOnly:!0})];case 1:return n=o.sent(),r=p(e,n),[4,(0,a.get)("pushEndpointHash")];case 2:return i=o.sent(),[4,(0,a.get)("pushExpiresAt")];case 3:return s=o.sent(),i===r&&(!s||s>Date.now())?[2]:[4,this.trackAndCachePushRegisteredEvent(e,n,r)];case 4:return o.sent(),e.broadcastSubscriptionState("subscribed"),[2]}}))}))},t.prototype.pushUnregister=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.pushUnsubscribe(t,!1)];case 1:return e.sent(),[4,(0,a.set)("unregisteredAt",Date.now())];case 2:return e.sent(),t.broadcastSubscriptionState("unregistered"),[2]}}))}))},t.prototype.pushUnsubscribe=function(t,e){return void 0===e&&(e=!0),r(this,void 0,void 0,(function(){var n,r,s;return o(this,(function(o){switch(o.label){case 0:return"PushManager"in window?[4,l(t.serviceWorkerPath)]:[2,Promise.reject("Push notifications are not supported in this browser")];case 1:return[4,o.sent().pushManager.getSubscription()];case 2:return(n=o.sent())?[4,n.unsubscribe()]:[3,4];case 3:o.sent(),o.label=4;case 4:return[4,(0,i.trackEvent)(t,i.EventType.PUSH_UNSUBSCRIBED)];case 5:return o.sent(),[4,(0,a.del)("pushEndpointHash")];case 6:return o.sent(),[4,(0,a.del)("pushExpiresAt")];case 7:return o.sent(),e?(s=(r=t).broadcastSubscriptionState,[4,this.getCurrentSubscriptionState(t)]):[2];case 8:return s.apply(r,[o.sent()]),[2]}}))}))},t.prototype.trackAndCachePushRegisteredEvent=function(t,e,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,(0,i.trackEvent)(t,i.EventType.PUSH_REGISTERED,{type:s.TokenType.W3C,token:e})];case 1:return r.sent(),[4,(0,a.set)("pushEndpointHash",n)];case 2:return r.sent(),[4,(0,a.set)("pushExpiresAt",e.expirationTime)];case 3:return r.sent(),[2]}}))}))},t.prototype.requestPermissionAndRegisterForPush=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,(0,a.get)("unregisteredAt")];case 1:return e.sent()?[2,"unregistered"]:[4,this.requestNotificationPermission()];case 2:switch(e.sent()){case"default":return[2,"unsubscribed"];case"denied":return[2,"blocked"]}e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this.pushRegister(t)];case 4:return e.sent(),[2,"subscribed"];case 5:return e.sent(),[2,"unsubscribed"];case 6:return[2]}}))}))},t.prototype.getCurrentSubscriptionState=function(t){return r(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(o){switch(o.label){case 0:return"denied"===(e=Notification.permission)?[2,"blocked"]:[4,(0,a.get)("unregisteredAt")];case 1:return o.sent()?[2,"unregistered"]:[4,l(t.serviceWorkerPath)];case 2:return[4,null==(n=o.sent())?void 0:n.pushManager.getSubscription()];case 3:return(r=o.sent())&&"granted"===e&&c(t.vapidPublicKey,r)?[2,"subscribed"]:[2,"unsubscribed"]}}))}))},t.prototype.handleAutoResubscription=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return t.autoResubscribe?"granted"!==(e=Notification.permission)?("Auto-resubscribe: permission not granted, aborting: ".concat(e),[2]):[4,(0,a.get)("pushEndpointHash")]:[2];case 1:return n=o.sent(),[4,(0,a.get)("pushExpiresAt")];case 2:return r=o.sent(),[4,l(t.serviceWorkerPath)];case 3:return[4,o.sent().pushManager.getSubscription()];case 4:if(i=o.sent(),s=void 0,i&&(s=p(t,i)),void 0!==n&&n===s&&i&&c(t.vapidPublicKey,i)&&(null==r||r>Date.now()))return[2];try{return[2,this.attemptPushRegister(t)]}catch(t){console.error(t)}return[2]}}))}))},t.prototype.isNativePromptShown=function(){return"chrome"!==(0,u.getBrowserName)()?Promise.resolve(!0):new Promise((function(t){var e=!1,n=function(){e||(clearTimeout(r),window.removeEventListener("blur",n),e=!0,t(!0))};window.addEventListener("blur",n);var r=setT,t(!1)}),1e3)}))},t}();e.default=f},978:function(t,e,n){"use strict";e.__esModule=!0,n(273);var r=n(488),o=function(){function t(){var t=this;this.element=document.createElement("div"),this.element.id="kumulos-ui-root",this.containers=[],(0,r.onDOMement)}))}return t.prototype.createContainer=function(t){var e={name:t,element:document.createElement("div")};return e.element.id="kumulos-ui-root-".concat(t),this.element.appendChild(e.element),this.containers.push(e),e},t}();e.default=o},432:function(t,e){"use strict";e.__esModule=!0,e.keys=e.clear=e.del=e.set=e.get=e.Store=void 0;var n,r=function(){function t(t,e){void 0===t&&(t="keyval-store"),void 0===e&&(e="keyval"),this.storeName=e,this._dbp=new Pre(e)}}))}return t.prototype._withI}))})w r),n}e.Store=r,e.get=function(t,e){var n;return void 0===e&&(e=o()),e._withIDBStore("reaget(t)})).then((function(){return n.result}))},e.set=function(t,e,n){return void 0===n&&(n=o()),n._withIDBStore("readt(e,t)}))},e.del=function(t,e){return void 0===e&&(e=o()),e._withIDBStore("readete(t)}))},e.clear=function(t){return void 0===t&&(t=o()),t._withIDBStore("readlear()}))},e.keys=function(t){void 0===t&&(t=o());var e=[];return t._withIDBStore("reaue())}})).then((function(){return e}))}},159:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};e.__esModule=!0,e.getMostRecentlyOpenedPushPayload=e.persistOpenedPushPayload=e.getContextFromStoredConfig=e.getPromptReminder=e.persistPromptReminder=e.persistDDLConfig=e.persistConfig=e.del=e.set=e.get=void 0;var i=n(676),s=n(432),u=new s.Store("kumulos","default");function a(t){return(0,s.get)(t,u)}function c(t,e){return(0,s.set)(t,e,utu)(t,u)}e.get=a,e.set=c,e.del=l,e.persistConfig=function(t){return c("config",{region:t.region,apiKey:t.apiKey,secretKey:t.secretKey,vapidPublicKey:t.vapidPublicKey,serviceWorkerPath:t.serviceWorkerPath,autoResubscribe:t.autoResubscribe,tenantId:t.tenantId})},e.persistDDLConfig=function(t){return c("ddlconfig",t)},e.persistPromptReminder=function(t,e){return c("reminder.".concat(t),e)},e.getPromptReminder=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,a("reminder.".concat(t))];case 1:return[2,e.sent()]}}))}))},e.getContextFromStoredConfig=function(){return a("config").then((function(t){return t?new i.Context(t):void 0}))},e.persistOpenedPushad",t)},e.getMostRecentlyOpenedPushPayload=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,a("mostRecentOpenedPushPayload")];case 1:return t=e.sent(),[4,l("mostRecentOpenedPushPayload")];case 2:return e.sent(),[2,null!=t?t:void 0]}}))}))}},488:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};e.__esModule=!0,e.isMobile=e.onDOMReady=e.parseQueryString=e.defer=e.getFullUrl=e.base64UrlEncode=e.performJsonFetch=e.FetchError=e.performFetch=e.escapeRegExp=e.cyrb53=e.isBrowserSupported=e.getBrowserName=e.uuidv4=void 0;var u=n(676),a=[typeof Promise,typeof fetch,typeof indexedDB],c={push:function(){var t,e=s([],a,!0);"safari"!==l()||"PushManager"in window?e.push.apply(e,[typeof Notification,typeof navigator.serviceWorker,typeof PushManager]):e.push(typeof(null===(t=window.safari)||void 0===t?void 0:t.pushNotification));return p(n p(a)}};function l(){for(var t=navigator.userAgent.toLowerCase(),e=0,n=["edge","firefox","chrome","safari"];e<n.length;e++){var r=n[e];if(t.indexOf(r)>-1)return r}return""}function p(t){return t.reduce((function(t,e){return t&&"undefined"!==e}),!0)}e.uuidv4=function(){return"undefined"==typeof crypto?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/ng(16)})):(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(Number(t)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(t)/4).toString(16)}))},e.getBrowserName=l,e.isBrowserSupported=function(t){return(t=null!=t?t:[]).length||t.push(u.SDKFeature.PUSH),t.filter((function(t){return c[t]()})).length>0};var f=Mat0),0|n};function d(t,e,n){var r;void 0===n&&(n={method:"GET"});var o=null!==(r=n.headers)&&void 0!==r?r:{};return n.headers=i(i({"Content-Type":"application/json",Accept:"application/json"},e?{Authorization:e}:{}),o),fetch(t,n)}e.cyrb53=function(t,e){void 0===e&&(e=0);for(var n=3735928559^e,r=1103547991^e,o=0,i=void 0;o<t.length;o++)i=t.charCodeAt(o),n=f(n^i,2654435761),r=f(r^i,1597334677);return n=f(n^n>>>16,2246822507)^f(r^r>>>13,3266489909),4294967296*(2097151&(r=f(r^r>>>16,2246822507)^f(n^n>>>13,3266489909)))+(n>>>0)},e.escap\\$&")},e.performFetch=d;var h=function(t){function e(e,n){return t.call(this,"fetch failed: ".concat(e,", ").concat(n))||this}return o(e,t),e}(Error);e.FetchError=h,e.performJsonFetch=function(t,e,n){return d(t,e,n).then((function(t){if(!t.ok)throw new h(t.status,t.statusText);return t.json()}))},e.base64UrlEncode=function(t){var e=new Uint8Array(t);return btoa(e.ode(e)}),"")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},e.get).href},e.defer=function(){var t={resolve:null,reject:null,promise:null};return t.promise=new Pject=n})),t},e.parseQueryString=function(t,e){void 0===t&&(t=location.search),void 0===e&&(e=[]);var n=void 0;return t.length>0&&(n=t.substring(1).split("&t("=")})).map((function(t){return t.map(decodeURIComponent)})).(t[0])})).1],n))}),{})),n},e.onDed",t)},e.iAgent)}},797:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0;var i,s=n(70),u=n(400),a=n(748),c="https://pd.app.delURING"}(i||(i={}));var l=function(t){function e(e){var n=t.call(this,e)||this;return n.onMessage=function(t){"FpCapure: message ".concat(t.data.type," received from ").concat(t.origin);var e=t.data;if(t.origin===c)switch(e.type){case s.ClientMessageType.READY:n.setState({isReady:!0});break;case s.ClientMessageType.FINGERPRINT_GENERATED:n.setState({captureState:i.IDLE},(function(){n.props.onCaptured(e.data.components)}))}},n.dispatchMessage=function(t){var e;"FpCapure: dispatching ".concat(t.type," message to capture frame");var r=null===(e=n.iFrameRef.current)||void 0===e?void 0:e.contentWindow;r&&r.postMessage(t,c)},n.iFrameRef=(0,u.createRef)(),n.state={isReady:!1,captureState:i.IDLE},n}return o(e,t),e.prototype.componentDidMount=function(){window.addEventListener("message",this.onMessage)},e.prototype.componentWillssage)},e.prototype.componentWillUpdate=function(t,e){var n=e.isReady,r=e.captureState,o=this.state.captureState;n&&r===i.CAPTURING&&o===i.IDLE&&this.dispatchMessage({type:s.HostMessageType.REQUEST_FINGERPRINT})},e.prototype.requestFp=function(){this.state.captureState===i.IDLE?this.setState({captureState:i.CAPTURING}):console.error("FpCapture.requestFp: captureState not IDLE")},e.prototype.render=function(){return(0,a.createPortal)((0,u.h)("iframe",{ref:this.iFrameRef,src:c,style:{width:0,height:0}}),document.body)},e}(u.Component);e.default=l},241:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};e.__esModule=!0,e.sendClickRequest=void 0;var i=n(676),s=n(488);e.sendClickRequest=function(t,e,n){return r(this,void 0,void 0,(function(){var r,u;return o(this,(function(o){switch(o.label){case 0:return r="".concat(t.urlForService(i.Service.DDL),"/v1/banners/").concat(e,"/taps"),[4,(0,i.getInstallId)()];case 1:return u=o.sent(),[2,(0,s.performFetch)(r,t.authHeader,{method:"POST",body:JSON.stringify({webInstallId:u,fingerprint:n})})]}}))}))}},70:function(t,e){"use strict";e.__esModule=!0,e.ClientMessageType=e.HostMessageTypePRINT"}(e.HostMessageType||(e.HostMessageType={})),function(t){t.READY="READY",t.FINGERPRINT_GENERATED="FINGERPRINT_GENERATED"}(e.ClientMessageType||(e.ClientMessageType={}))},607:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object]=e[n]}),o=this&&this.__setModuleDefault||(Objectue:e})}:function(t,e){t.default=e}),i=this&&this.__impoe,t),e},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var c=n(676),l=n(999),p=n(159),f=i(n(718)),d=a(n(620)),h=n(396),v=a(n(978)),m=n(488),_=n(248),y=function(){function t(t,e,n,r){var o=this;this.onWorkerMessage=function(t){var e;if(t.origin===location.origin&&(0,l.isKumulosWorkerMessage)(t.data)&&t.data.type===l.WorkerMessageType.KPushReceived){var n=(0,f.notificationFromPayload)(t.data.data);null===(e=o.onPushReceived)||void 0===e||e.call(o,n)}},this.context=t,this.config=e,this.platformConfig=n,this.pushManager=r,this.rootFrame=new v.default}return t.buildInstance=function(e){return s(this,void 0,void 0,(function(){var n,r,o,i;return u(this,(function(s){switch(s.label){case 0:return(0,c.assertConfigValid)(e,!0),[4,(0,_.loadPlatformAndKeysConfig)("https://push-".concat(e.region,".kumulos.com/v2/web/config?tenantId=").concat(e.tenantId))];case 1:return n=s.sent(),(0,c.assertKeys)(n),r=t.mapConfigAndKeysToConfig(e,n.keys,n.publicKey),o=new c.Context(r),[4,t.maybePersistInstallIdAndUserId(o,r)];case 2:return s.sent(),(i=new t(o,r,n,(0,f.default)(o))).initialize(),[2,i]}}))}))},t.prototype.initialize=function(){(0,p.persistConfig)(this.config),(0,c.trackInstallDetails)(this.context,this.config.sdkVersion),this.context.hasFeature(c.SDKFeature.PUSH)&&this.initializePushFeature(),this.context.hasFeature(c.SDKFeature.DDL)&&this.initializeDDLFeature()},t.prototype.initializePushFeature=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){return(0,f.trackOpenFromQuery)(this.context),(0,f.registerServiceWorker)(this.context.serviceWorkerPath),navigator.permissions&&this.observePermissionStatus(),this.promptManager=new h.PromptManager(this.context,this.rootFrame,this.pushManager,this.platformConfig.prompts),[2]}))}))},t.prototype.observePermissionStatus=function(){return s(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:return[4,navigator.permissions.query({name:"notifications"})];case 1:return e.sent().addEventListener("change",(function(e){return s(t,void 0,void 0,(function(){var t;return u(this,(function(n){return t=e.target,"granted"===t.state?this.pushManager.attemptPushRegister(this.context):this.pushManager.pushUnsubscribe(this.context),[2]}))}))})),[2]}}))}))},t.prototype.initializeDDLFeature=function(){(0,m.isMobile)()&&(this.ddlManager=new d.default(this.context,this.rootFrame))},t.prototype.maybeAddMessageEventListenerToSW=function(){"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",this.onWorkerMessage)},t.maybePersistInstallIdAndUserId=function(t,e){return s(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,(0,c.getInstallId)().then((function(t){if(t!==e.originalVisitorId)return(0,c.setInstallId)(e.originalVisitorId)}))];case 1:return n.sent(),void 0===e.customerId?[2]:[4,(0,c.getUserId)().then((function(n){if(n!==e.customerId)return(0,c.associateUser)(t,e.customerId)}))];case 2:return n.sent(),[2]}}))}))},t.mapConfigAndKeysToConfig=function(t,e,n){return{region:t.region,apiKey:e.apiKey,secretKey:e.secretKey,vapidPublicKey:n,serviceWorkerPath:t.serviceWorkerPath,autoResubscribe:t.autoResubscribe,features:t.features,originalVisitorId:t.originalVisitorId,customerId:t.customerId,sdkVersion:t.sdkVersion,tenantId:t.tenantId}},t.prototype.associt,t,e)},t.prototype.signntext)},t.prototype.trackEvent=function(t,e){return(0,c.trackEvent)(this.context,t,eon(t){}))},t.prototype.getPushSubscriptionStatus=function(t){return s(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return[4,this.pushManager.getCurrentSubscriptionState(this.context)];case 1:return e=n.sent(),t(e),[2]}}))}))},t.prototype.pushRegister=function(){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.pushManager.requestNotificationPermission(this.context)];case 1:return"granted"!==t.sent()?[2,Promise.reject("Notification permission not granted")]:(this.pushManager.pushRegister(this.context),[2])}}))}))},t.prototype.pushUnr}))}))},t.prototype.setPushOpenedListener=function(t){this.onPushOpened=t,this.maybeFireOpenedHandler()},t.prototype.setPushReceivedLToSW()},t.prototype.setPushSubscriptionStateListener=function(t){return s(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return e=t,[4,this.pushManager.getCurrentSubscriptionState(this.context)];case 1:return e.apply(void 0,[n.sent()]),this.context.subscribeToSubscriptionStatus(t),[2]}}))}))},t.prototype.maybeFireOpenedHandler=function(){var t;return s(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,(0,p.getMostRecentlyOpenedPushPayload)()];case 1:return(e=r.sent())?(n=(0,f.notificationFromPayload)(e),null===(t=this.onPushOpened)||void 0===t||t.call(this,n),[2]):[2]}}))}))},t}();e.default=y},503:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0,e.Bell=void 0;var i=n(400),s=n(93),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRequestNativePrompt=function(){e.props.onPromptAccepted(e.props.config)},e}return o(e,t),e.prototype.render=function(){var t,e,n,r,o,u,a,c="kumulos-prompt kumulos-prompt-".concat(this.props.promptManagerState," kumulos-bell-container kumulos-bell-container-").concat(this.props.config.position),l=this.props.config,p=(0,s.inversePosition)(l.position),f=null===(e=null===(t=l.colors)||void 0===t?void 0:t.bell)||void 0===e?void 0:e.bg,d=null===(r=null===(n=l.colors)||void 0===n?void 0:n.bell)||void 0===r?void 0:r.fg,h={borderColor:d,backgroundColor:f};return(0,i.h)("div",{class:c},(0,i.h)("div",{class:"kumulos-bell-inner kumulos-tooltip-parent"},(0,i.h)("div",{class:"kumulos-bell",onClick:this.onRequestNativePrompt,style:h},(0,i.h)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,i.h)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z",fill:d}))),(0,i.h)(s.Tooltip,{position:p},null!==(a=null===(u=null===(o=l.labels)||void 0===o?void 0:o.tooltip)||void 0===u?void 0:u.subscribe)&&void 0!==a?a:s.DEFAULT_SUBSCRIBE_LABEL)))},e}(i.Component);e.Bell=u},685:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},s=this&&this.__spreall(e))},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0,e.DdlBanner=void 0;var a=n(400),c=n(676),l=n(780),p=u(n(563)),f={backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},d=["kumulos-prompt","kumulos-banner-container","kumulos-banner-compact","kumulos-safe-area-inset-pad-left","kumulos-safe-area-inset-pad-right"],h=function(t){function e(e){var n=t.call(this,e)||this;return n.onConfirm=function(t){!0!==n.state.showCopyToast&&(t!==c.UiActionType.DDL_OPEN_DEEPLINK?t===c.UiActionType.DDL_OPEN_STORE&&(n.setState({showCopyToast:!0}),setTonfig)}),1e3)):n.props.onConfirm(n.props.config))},n.onCancel=function(){n.props.onCancel(n.props.config)},n.containerRef=(0,a.createRef)(),n.state={showCopyToast:!1},n}return o(e,t),e.prototype.componentDidMount=function(){if(this.containerRef.current){var t=this.containerRef.current,e=t.clientWidth,n=t.clientHeight;this.props.dimensions(e,n)}},e.prototype.getCssClasses=function(t){var e=s(s([],d,!0),["kumulos-prompt-position-".concat(t)],!1);return[c.PromptPosition.TOP,c.PromptPosition.BOTTOM].includes(t)&&e.push("kumulos-safe-area-inset-pad-".concat(t)),e.join(" ")},e.prototype.render=function(){var t=this.props.config,e=t.position,n=t.labels,r=t.colors,o=t.imageUrl,s=t.appRating,u=n.heading,c=n.body,d=n.acceptAction,h=r.bg,v=r.fg,m=r.acceptActionBg,_=r.acceptActionFg,y=r.declineActionBg,b=r.declineActionFg,g=r.ratingFg,k=this.getCssClasses(e),w={backgroundColor:h,color:v},x={backgroundColor:y,color:b},P={backgroundColor:m,color:_},S=i(i({},f),{backgroundImage:"url(".concat(o,")")});return(0,a.h)("div",{style:w,class:k,ref:this.containerRef},(0,a.h)("div",{class:"kumulos-banner-close",style:x,onTouchEnd:this.onCancel},"✖"),(0,a.h)("div",{style:S,class:"kumulos-banner-icon"}),(0,a.h)("div",{class:"kumulos-banner-content"},(0,a.h)("div",{class:"kumulos-banner-header"},(0,a.h)("h1",null,u)),(0,a.h)("div",{class:"kumulos-banner-body"},c),s&&(0,a.h)(l.AppRating,{ratingCount:s.ratingCount,stars:s.rating,color:g})),(0,a.h)("div",{class:"kumulos-banner-actions"},(0,a.h)(p.default,{style:P,class:"kumulos-action-button kumulos-action-button-confirm",text:d,promptActions:t,onAction:this.onConfirm})),this.state.showCopyToast&&(0,a.h)("div",{class:"kumulos-toast"},"Link Copied"))},e}(a.Component);e.DdlBanner=h},563:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var s=n(400),u=n(676),a=i(n(485)),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleAction=function(){var t=e.props.promptActions.uiActions.accept;switch(t.type){case u.UiActionType.DDL_OPEN_STORE:(0,a.default)(t.deepLinkUN_STORE)}ckup",t)}));break;case u.UiActionType.DDL_OPEN_DEEPLINK:e.props.onAction(u.UiActionType.DDL_OPEN_STORE);break;default:return console.error("Handle DeepLink Action: unsupported accept action type '".concat(t.type,"'"))}},e}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.style,n=t.class,r=t.text;return(0,s.h)("button",{type:"button",style:e,class:n,onTouchEnd:this.handleAction},r)},e}(s.Component);e.default=c},620:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0,e.DdlManagerState=void 0;var s,u=n(676),a=n(248),c=n(400),l=n(289),p=i(n(94)),f=n(806),d=n(951),="ready"}(s=e.DdlManagerState||(e.DdlManagerState={}));var v=function(){function t(t,e){var n=this;this.activeConfigs=[],this.onBannerConfirm=function(t,e){return r(n,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e?[4,(0,h.sendClickRequest)(this.context,t.uuid,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,(0,a.deleteDdlBannerConfigFromCache)(t.uuid)];case 3:return n.sent(),this.hidePrompt(t),this.performClientRedirection(t),[2]}}))}))},this.onBannerCancelled=function(t){(0,d.maybePersistReminder)(t),n.hidePrompt(t)},this.render=function(t){(0,c.render)((0,c.h)(p.default,{config:t,context:n.context,onBannerConfirm:n.onBannerConfirm,onBannerCancelled:n.onBannerCancelled}),n.ddlContainer.element)},this.ddlContainer=e.createContainer("ddl"),this.context=t,this.triggerFilter=new l.PromptTriggerEvents.READY)})),this.setState(s.LOADING)}return t.prototype.hidePrompt=function(t){var e;this.activeConfigs=null===(e=this.activeConfigs)||void 0===e?void 0:==t.uuid})),this.setState(s.READY)},t.prototype.performClientRedirection=function(t){var e=t.uiActions.accept;switch(e.type){case u.UiActionType.DDL_OPEN_STORE:window.location.href=e.url;break;case u.UiActionType.DDL_OPEN_DEEPLINK:window.location.href=e.deepLinkUrl;break;default:console.error("DdlManager.performClientRedirection: Unsupported accept action type, unable to perform redirection")}},t.prototypeEnter(t)},t.prototype.onEnter=function(t){var e;return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:switch(t){case s.LOADING:return[3,1];case s.READY:return[3,3]}return[3,5];case 1:return n=this,[4,this.loadConfig()];case 2:return n.config=o.sent(),this.config?(this.setState(s.READY),[3,5]):[2];case 3:return[4,this.updateActiveConfigs()];case 4:return o.sent(),(r=null===(e=this.activeConfigs)||void 0===e?void 0:e.shift())?((0,f.deferPromptActivation)(r,this.render)||this.render(r),[3,5]):(this.renderEmpty(),[2]);case 5:return[2]}}))}))},t.prototype.renderEmpty=function(){(0,c.render)(null,this.ddlContainer.element)},t.prototype.updateActiveConfigs=function(){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return this.config?[4,this.triggerFilter.filterPrompts(this.config)]:[2];case 1:return e.sent().push(e)})),[2]}}))}))},t.prototype.loadConfig=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,(0,a.loadDdlConfig)(this.context)];case 1:return void 0===(t=e.sent())?[2]:[2,uid]=e,t}),{})]}}))}))},t}();e.default=v},94:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var s=n(400),u=n(676),a=n(685),c=n(748),l=n(676),p=i(n(797)),f=function(t){function e(e){var n=t.call(this,e)||this;return n.onDimensions=function(t,e){var r=n.props.config,o=window.getComputedStyle(document.body,null);n.siteMargin=parseFloat(o.getPropertyValue((null==r?void 0:r.position)===l.PromptPosition.TOP?"margin-top":"margin-bottom")),n.siteTransition=o.getPropertyValue("transition"),(null==r?void 0:r.position)===l.PromptPosition.BOTTOM&&(e+=20);var i=e+n.siteMargin;document.body.style.transition="all 0.375s ease 0s",document.body.style[(null==r?void 0:r.position)===l.PromptPosition.TOP?"marginTop":"marginBottom"]="".concat(i,"px")},n.onBannerConfirm=function(t){var e;switch(t.uiActions.accept.type){case u.UiActionType.DDL_OPEN_STORE:null===(e=n.fpRef.current)||void 0===e||e.requestFp();break;case u.UiActionType.DDL_OPEN_DEEPLINK:n.resetBodyStyles(),n.props.onBannerConfirm(n.props.config);break;default:console.error("Ui.onBannerConfirm: Unsupported accept action type, unable to confirm banner")}},n.onBannerelled(t)},n.ononfig,t)},n.state={requestFpCapture:!1},n.fpRef=(0,s.createRef)(),n}return o(e,t),e.prototype.resetBodyStyles=function(){var t,e=this.props.config;document.body.style.transition=null!==(t=this.siteTransition)&&void 0!==t?t:"",document.body.style[(null==e?void 0:e.position)===l.PromptPosition.TOP?"marginTop":"marginBottom"]=this.siteMargin?"".concat(this.siteMargin,"px"):""},e.prototype.componentWillUnmount=function(){this.resetBodyStyles()},e.prototype.render=function(){return this.props.config?(0,c.createPortal)((0,s.h)(s.Fragment,null,(0,s.h)(a.DdlBanner,{config:this.props.config,onConfirm:this.onBannerConfirm,onCancel:this.onBannerCancelled,dimensions:this.onDimensions}),(0,s.h)(p.default,{ref:this.fpRef,onCaptured:this.onCaptureFp})),document.body):null},e}(s.Component);e.default=f},370:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};e.__esModule=!0,e.Dialog=void 0;var s=n(676),u=n(400),a={backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover"},c=function(t){function e(e){var n=t.call(this,e)||this;return n.onRequestNativePrompt=function(){n.props.onPromptAccepted(n.props.config)},n.onRequ.config)},n}return o(e,t),e.prototype.render=function(){var t=this.props.config,e="kumulos-prompt kumulos-prompt-".concat(this.props.promptManagerState," kumulos-").concat(t.type,"-container kumulos-prompt-position-").concat(t.position),n=t.type===s.PromptTypeName.ALERT?t.labels.alert:t.labels.banner,r=n.heading,o=n.body,c=n.declineAction,l=n.acceptAction,p=t.type===s.PromptTypeName.ALERT?t.colors.alert:t.colors.banner,f=p.bg,d=p.fg,h=p.acceptActionBg,v=p.acceptActionFg,m={backgroundColor:f,color:d},_={backgroundColor:p.declineActionBg,color:p.declineActionFg},y={backgroundColor:h,color:v},b=i(i({},a),{backgroundImage:"url(".concat(t.imageUrl,")")});return(0,u.h)("div",{style:m,className:e},t.imageUrl&&(0,u.h)("div",{style:b,className:"kumulos-".concat(t.type,"-icon")}),(0,u.h)("div",{className:"kumulos-".concat(t.type,"-content")},(0,u.h)("div",{className:"kumulos-".concat(t.type,"-header")},(0,u.h)("h1",null,r)),(0,u.h)("div",{className:"kumulos-".concat(t.type,"-body")},o)),(0,u.h)("div",{className:"kumulos-".concat(t.type,"-actions")},(0,u.h)("button",{type:"button",style:_,className:"kumulos-action-button kumulos-action-button-cancel",onClick:this.onRequestCancel},c),(0,u.h)("button",{type:"button",style:y,className:"kumulos-action-button kumulos-action-button-confirm",onClick:this.onRequestNativePrompt},l)))},e}(u.Component);e.Dialog=c},396:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__imporfault:t}};e.__esModule=!0,e.PromptManager=void 0;var s=n(676),u=n(400),a=n(289),c=i(n(93)),l=n(806),p=n(951),f=function(){function t(t,e,n,i){var u=this;this.onEventTracked=function(t){t.type!==s.EventType.PUSH_UNSUBSCRIBED?"ready"===u.state&&u.evaluateTriggers():u.unregisteredEventTracked()},this.activateDeferredPrompt=function(t){u.promptActionNeedsTaken()&&(u.activatePrompt(t),u.render())},this.onRequestNativePrompt=function(t){return r(u,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:return"requesting"===this.state||"requesting-silent"===this.state?[2]:(this.currentlyRequestingPrompt=t,this.pushManager.isNativePromptShowsilent")})),e=this,[4,this.pushManager.requestPermissionAndRegisterForPush(this.context)]);case 1:return e.subscriptionState=r.sent(),this.setState("ready"),[2]}}))}))},this.onPromptAccepted=function(t){return r(u,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return"unsubscribed"!==this.subscriptionState?[3,2]:[4,this.onRequestNativePrompt(t)];case 1:r.sent(),r.label=2;case 2:return this.hideAndSuppressPrompts(t),"subscribed"===this.subscriptionState&&(null===(e=this.ui)||void 0===e||e.showToast(null===(n=t.labels)||void 0===n?void 0:n.thanksForSubscribing)),[2]}}))}))},this.onPromprompt(t)},this.onDismimissed")},this.prompts=null!=i?i:{},this.activePrompts=[],this.triggerFilter=new a.PromptTriggerEventFilter(t,this.onEventTracked),this.pushContainer=e.createContainer("push"),this.context=t,this.pushManager=n,this.setState("loading")}return t.prototype.unregisteredEventTracked=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return this.activePrompts=[],t=this,[4,this.pushManager.getCurrentSubscriptionState(this.context)];case 1:return t.subscriptionState=e.sent(),this.render(),[2]}}))}))},t.prototype.hideAndSuppressPrompts=function(t){var e=this,n=this.subscriptionState;this.hidePrompt(t),"unsubscribed"!==n&&this.activePromptsrompt(t)}))},t.prototype.render=function(){var t=this;this.subscriptionState&&this.state&&(0,u.render)((0,u.h)(c.defn t.ui=e},prompts:this.activePrompts,subscriptionState:this.subscriptionState,promptManagerState:this.state,onPromptAccepted:this.onPromptAccepted,onPromptDeclined:this.onPromptDeclined,onDismissOverlay:this.onDismissOverlay,currentlyRequestingPrompt:this.currentlyRequestingPrompt}),this.pushContainer.element)},t.prototype.evaluateTriggers=function(){return r(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){switch(n.label){case 0:return[4,this.triggerFilter.filterPrompts(thissTaken()}))];case 1:return t=n.sent(),this.activatePrompts(t),[2]}}))}))},t.prototype.promptActionNeedsTaken=function(){return"unsubscribed"===this.subscriptionState&&"granted"!==Notification.permission},t.prototype.hrender()},t.prototype.activ.push(t)},t.prototype.activatePrompts=function(t){for(var e=0;e<t.length;++e){var n=t[e];(0,l.deferPromptActivation)(n,this.activateDeferredPrompt)||this.activatePrompt(n)}this.render()},t.prototypeEnter(t)},t.prototype.onEnter=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:switch(t){case"loading":return[3,1];case"ready":return[3,3];case"requesting":case"requesting-silent":case"requesting-silent-dismissed":return[3,6]}return[3,7];case 1:return[4,this.pushManager.handleAutoResubscription(this.context)];case 2:return n.sent(),this.setState("ready"),[3,7];case 3:return this.currentlyRequestingPrompt=void 0,e=this,[4,this.pushManager.getCurrentSubscriptionState(this.context)];case 4:return e.subscriptionState=n.sent(),[4,this.evaluateTriggers()];case 5:return n.sent(),this.render(),[3,7];case 6:return this.render(),[3,7];case 7:return[2]}}))}))},t}();e.PromptManager=f},274:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0,e.BackgroundMask=void 0;var i=n(400),s=function(t){function e(e){var n,r,o=t.call(this,e)||this,i=null!==(r=null===(n=o.props.blurClass)||void 0===n?void 0:n.split(" "))&&void 0!==r?r:[];return i.push("kumulos-background-mask-blur"),o.state={blurClasses:i},o}return o(e,t),e.prototype.updateBlurState=function(){this.state.blurClassest.add(t)}))},e.prototype.componentDidMount=function(){this.updateBlurState()},e.prototype.componentrState()},e.prototype.componentWillUnmount=function(){this.state.blurClassesemove(t)}))},e.prototype.render=function(){var t=this.props,e=t.class,n=t.style,r=["kumulos-background-mask"];return e&&r.push(e),(0,i.h)("div",{style:n,class:r.join(" "),onClick:this.props.onClick},this.props.children)},e}(i.Component);e.BackgroundMask=s},328:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.guments)};e.__esModule=!0,e.OverlaySilent=void 0;var s=n(400),u=n(488),a=n(274),c=n(741),l={display:"flex",alignItems:"center",justifyContent:"center"},p=0,f=50,d=-175,h=75,v=0,m=500,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onBackgroundMaskClick=function(){var t=e.props,n=t.prompt,r=t.onDismiss;n&&r&&r(n)},e}return o(e,t),e.prototype.componentWillMount=function(){var t=window.innerWidth,e=window.innerHeight;this.setState({windowDimensions:{width:t,height:e}})},e.prototype.render=function(){var t=this.props,e=t.promptState,n=t.prompt,r=t.subscriptionState;if(!n||"requesting-silent"!==e||!n.silentOverlay||"unsubscribed"!==r)return null;var o=n.silentOverlay,c=o.labels.body,p=o.colors.text,f=i(i({},l),{color:p});return(0,s.h)(a.BackgroundMask,{blurClass:"kumulos-overlay-blur",class:"kumulos-overlay kumulos-overlay-".concat((0,u.getBrowserName)()),style:f,onClick:this.onBackgroundMaskClick},this.renderPointer(p),(0,s.h)("p",{class:"kumulos-silent-overlay-content-text"},c))},e.prototype.renderPointer=function(t){var e=this.state.windowDimensions,n={x:e.width/2+p,y:e.height/2+f},r={x:e.width+d,y:h},o={x:r.x+v,y:n.y+m};return(0,s.h)("div",{class:"kumulos-silent-overlay-indicator"},(0,s.h)(c.SvgPointer,{area:e,quadCurvePoints:{p1:n,p2:o,p3:r},color:t}))},e}(s.Component);e.OverlaySilent=_},552:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__prn]=e[n])e,new n)});e.__esModule=!0,e.Overlay=void 0;var i=n(400),s=n(488),u=n(274),a=fus)||this}return o(e,t),e.prototype.render=function(){var t,e=this.props,n=e.promptState,r=e.prompt,o=e.subscriptionState;if(!r||"requesting"!==n||!r.overlay||"unsubscribed"!==o)return null;var a=r.overlay,c={background:a.colors.shade,color:a.colors.text};return(0,i.h)(u.BackgroundMask,{style:c,blurClass:"kumulos-overlay-blur",class:"kumulos-overlay kumulos-overlay-".concat((0,s.getBrowserName)())},(0,i.h)("div",{class:"kumulos-overlay-strip",style:{background:a.colors.strip}},(0,i.h)("div",{class:"kumulos-overlay-content-container"},(0,i.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"65",height:"35",viewBox:"0 0 64 33"},(0,i.h)("path",{fill:"none",stroke:a.colors.text,"stroke-width":"2.5px","stroke-linecap":"round",d:"M 12.57,11.12\n           C 12.57,11.12 6.84,20.82 4.13,21.01\n             1.42,21.21 20.71,28.67 26.62,28.67M 4.23,21.01\n           C 4.23,21.01 53.96,14.91 60.65,3.47"})),a.iconUrl&&(0,i.h)("img",{src:a.iconUrl}),(0,i.h)("div",{class:"kumulos-overlay-content"},(0,i.h)("h3",null,a.labels.heading),(0,i.h)("p",null,a.labels.body),null===(t=a.links)||void 0===t?void 0:t.map((function(t){return(0,i.h)("a",{href:t.url,target:"_blank"},t.label)}))))))},e}(i.Component);e.Overlay=a},951:function(t,e,n){"use strict";var r,o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};e.__esModule=!0,e.hasPromptReminderElapsed=e.isPromptSuppressed=e.maybePersistReminder=void 0;var s=n(159),u=n(676),a=((r={})[u.ReminderTimeUnit.HOURS]=36e5,r[u.ReminderTimeUnit.DAYS]=864e5,r);function c(t,e){return Date.now()-t>a[e.timeUnit]*e.duration}e.maybePersistReminder=function(t){var e=t.uiActions;if(e){var n=e.decline.type;switch(n){case u.UiActionType.REMIND:return(0,s.persistPromptReminder)(t.uuid,{declinedOn:Date.now()});case u.UiActionType.DECLINE:return(0,s.persistPromptReminder)(t.uuid,"suppressed");default:return console.warn("Unsupported decline action type ".concat(n," supported for prompt ").concat(t.uuid,", fall back to always show this prompt when declined"))}}},e.isPromptSuppressed=function(t){return o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return[4,(0,s.getPromptReminder)(t.uuid)];case 1:return(e=r.sent())?"suppressed"===e?[2,!0]:"uiActions"in t?(n=t.uiActions).decline.type!==u.UiActionType.REMIND?[2,!1]:[2,!c(e.declinedOn,n.decline.delay)]:[2,!1]:[2,!1]}}))}))},e.hasPromptReminderElapsed=c},289:function(t,e,n){"use strict";var r=this&&this._xt())}))},o=this&&this.__g[i,u])}}};e.__esModule=!0,e.PromptTriggerEventFilter=e.triggerMatched=void 0;var i=n(488),s=n(951);function u(t,e){return!!Array.isArray(t)&&("string"==typeof e?t.map((function(t){var e="^".concat((0,i.escapeRegExp)(t).replace(/\\\*/g,".*"),"$");return new RegExp(e,"g")})).reduce((function(t,n){return t||n.test(String(e))}),!1):"number"==typeof e&&t.indexe<=t}function d(t,e){var n,r=t.trigger;if(r.event!==e.type)return!1;if(!(null===(n=r.filters)||void 0===n?void 0:n.length))return!0;if(!e.data)return!1;for(var o=!0,i=0;i<r.filters.length;++i){var s=r.filters[i],d=s[0],h=s[1],v=s[2],m=e.data[d],_=!1;switch(h){case"in":case"IN":_=u(v,m);break;case"=":_=a(v,m);break;case">":_=c(v,m);break;case">=":_=l(v,m);break;case"<":_=p(v,m);break;case"<=":_=f(v,m);break;default:console.warn("Unknown filter operator: ".concat(h))}o=o&&_}return o}e.triggerMatched=d;var h=function(){function t(t,e){var n=this;this.eventQueue=[],this.handleSdkEvent=function(t){var e;n.eventQueue.push(t),null===(e=n.eventReceivedCallback)||void 0===e||e.call(n,t)},this.eventReceivedCallback=e,t.subscribeToEvents(this.handleSdkEvent)}return t.prototype.filterPrompts=function(t,e){return void return!0}),r(this,void 0,void 0,(function(){var n,r,i,u,a,c,l,p;return o(this,(function(o){switch(o.label){case 0:for(i in n=[],r=[],t)r.push(i);u=0,o.label=1;case 1:if(!(u<r.length))return[3,6];a=r[u],c=t[a],l=0,o.label=2;case 2:return l<this.eventQueue.length?(p=this.eventQueue[l],[4,(0,s.isPromptSuppressed)(c)]):[3,5];case 3:!o.sent()&&d(c,p)&&e(c)&&n.push(c),o.label=4;case 4:return++l,[3,2];case 5:return u++,[3,1];case 6:return this.eventQueue=[],[2,n]}}))}))},t}();e.PromptTriggerEventFilter=h},93:function(t,e,n){"use strict";var r,o=this&&this.__ex},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};e.__esModule=!0,e.Tooltip=e.inversePosition=e.DEFAULT_SUBSCRIBE_LABEL=void 0;var s=n(676),u=n(400),a=n(274),c=n(503),l=n(370),p=n(552),f=n(328),d=n(748),h=n(488);e.DEFAULT_SUBSCRIBE_LABEL="Subscribe for notifications",e.invers":"left"};var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){return(0,u.h)("div",{class:"kumulos-tooltip kumulos-tooltip-".concat(this.props.position)},this.props.children)},e}(u.Component);e.Tooltip=v;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){return(0,u.h)("div",{class:"kumulos-toast"},this.props.message)},e}(u.Component),_=function(t){function e(e){var n=t.call(this,e)||this;return n.dequeueToast=function(){n.setState({toastQueue:n.state.toastQueue.slice(1)})},n.state={toastQueue:[]},n}return o(e,t),e.prototype.showToast=function(t){t&&t.length&&(this.setState({toastQueue:i(i([],this.state.toastQueue,!0),[t],!1)}),setTimeout(this.dequeueToast,3200))},e.prototype.render=function(){return(0,d.createPortal)((0,u.h)(u.Fragment,null,this.maybeRenderPromptBackgroundMask(),this.props.prompts.map(this.renderPrompt,this),!(0,h.isMobile)()&&(0,u.h)(p.Overlay,{promptState:this.props.promptManagerState,prompt:this.props.currentlyRequestingPrompt,subscriptionState:this.props.subscriptionState}),!(0,h.isMobile)()&&(0,u.h)(f.OverlaySilent,{promptState:this.props.promptManagerState,prompt:this.props.currentlyRequestingPrompt,subscriptionState:this.props.subscriptionState,onDismiss:this.props.onDismissOverlay}),this.state.toastQueue.length>0&&(0,u.h)(m,{message:this.state.toastQueue[0]})),document.body)},e.prototype.maybeRenderPromptBackgroundMask=function(){if("requesting"===this.props.promptManagerState||"requesting-silent"===this.props.promptManagerState)return null;var t=this.props.prompts.filter((function(t){return(t.type===s.PromptTypeName.ALERT||t.type===s.PromptTypeName.BANNER)&&!!t.backgroundMask}))[0];if(!t)return null;var e={backgroundColor:t.backgroundMask.colors.bg};return(0,u.h)(a.BackgroundMask,{style:e})},e.prototype.renderPrompt=function(t){var e;if("requesting"===this.props.promptManagerState||"requesting-silent"===this.props.promptManagerState)return null;switch(t.type){case"bell":return(0,u.h)(c.Bell,{config:t,subscriptionState:this.props.subscriptionState,promptManagerState:this.props.promptManagerState,onPromptAccepted:this.props.onPromptAccepted,onPromptDeclined:this.props.onPromptDeclined});case"alert":case"banner":var n=void 0;return t.type===s.PromptTypeName.ALERT&&(n=null===(e=t.actions)||void 0===e?void ==t.type}))),(0,u.h)(l.Dialog,{config:t,subscriptionState:this.props.subscriptionState,promptManagerState:this.props.promptManagerState,onPromptAccepted:this.props.onPromptAccepted,onPromptDeclined:this.props.onPromptDeclined,action:n});default:return null}},e}(u.Component);e.default=_},806:function(t,e){"use strict";e.__esModule=!0,e.deferPromptActivation=void 0,e.deferPromptActivation=function(t,e){return!(void 0===t.trigger.afterSeconds||t.trigger.afterSeconds<0)&&(t.trigger.afterSeconds,setTimeout(e,1e3*t.trigger.afterSeconds,t),!0)}},527:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function u(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var s=i(n(607)),u=n(488);!function(){var t;r(this,void 0,void 0,(function(){var e,n,r,i,a;return o(this,(function(o){switch(o.label){case 0:return(null===(t=window.Kumulos)||void 0===t?void 0:t.q)?(e=window.Kumulos.q,2!==(null==("===t[0]})))?void 0:n.length)?[2]:(0,u.isBrowserSupported)(n[1].features)?("https:"!==location.protocol&&console.warn("Optimobile: this page is not served over HTTPS, some features may be unavailable..."),[4,s.default.buildInstance(n[1])]):(console.warn("Optimobile: this browser does not support all required features, aborting initialization..."),[2])):[2];case 1:for(r=o.sent(),i=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];try{"function"==typeof t?t(r):(e=r)[t].apply(e,n)}catch(t){console.error(t)}},a=0;a<e.length;++a)"init"!==e[a][0]&&i.apply(void 0,e[a]);return window.Kumulos=i,[2]}}))}))}()},999:function(t,e){"use strict";var n;e.__esModule=!0,e.isKumulosWorkerMessage=e.WorkerMessageType=void 0,function(t){t.KPushReceived="KPushReceived"}(n=e.WorkerMessageType||(e.WorkerMessageType={})),e.isKumulosWorkerMessage=function(t){return void 0!==t.type&&void 0!==n[t.type.ex{a:et:e[all(lue:!0})},n.nc=void 0;n(527)}();