/*!
 * Evolv Asset Manager v1.29.15 <https://github.com/evolv-ai/asset-manager>
 *
 * Copyright 2020-2024 Evolv Technology Solutions
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(){"use strict";
/*!
     * Evolv Mutate v1.11.4 <https://github.com/evolv-ai/mutate>
     *
     * Copyright 2021-2024 Evolv Technology Solutions
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e,t;!e||(e={})),t||(t={}));ass i extends n{constructor(){super("This collector has been destroyed")}}const r=var o;!o||(o={}));const a={[o.DEBUG]:console.debug,[o.INFO]:console.info,[o.WARNING]:console.warn,[o.ERROR]:console.error};class c{get logLevel(){return this._logLevel}constructor(e=null,t=o.WARNING){var n,s;this._scope=null,this._lastTransmit=0,this._minTransmitInterval=500,this._transmitQueued=!1,this._cache=[],this._scope=e,this._logLevel=(null===(s=null===(n=window.evolv)||void 0===n?void 0:n.config)||void 0===s?void 0:s.logLevel)||t}_flushMessageCache(){var e,t,n,s,i;let o=Array.prototype.slice.call(null!==(n=null===(t=null===(e=window.evolv)||void 0===e?void 0:e.context)||void 0===t?void 0:t.get("mutate.log"))&&void 0!==n?n:[]);0!==this._cache.length&&(this._lastTransmit=r(),o=o.concat(this._cache),null===(i=null===(s=window.evolv)||void 0===s?void 0:s.context)||void 0===i||i.set("mutate.log",o.slice(-100)),this._cache=[])}ebug(e){this.log(o.DEBUG,e)}info(e){this.log(o.INFO,e)}warn(e){this.log(o.WARNING,e)}og(e,t){if(e<this._logLevel)return;const n=this.qualifyMessage(t);if(a[e](n),this._cache.push({logLevel:e,message:`${this._scope}: ${t}`}),!this._transmitQueued){this._transmitQueued=!0;const e=r()-this._lastTransmit,t=Math.max(0,this._minTransmitInterval-e);setTimeout((,t)}}}class l{pauseEvaluation(){this._evaluationPaused=!0}et subject(){return this._subject}get state(){return this._state}get subjectAsElement(){return this.subject}get subjectAsHtmlElement(){return this.subject}constructor(e,t){this._branches=[],this._applying=!1,this._evaluationPaused=!1,this._state=e,this._subject=t}_evaluate(e){this._applying||(this._applying=!0,this._evaluationPaused||this._branches.forEach((t=>t[e]())),this._applying=!1)}removed(){this._evaluate("removed")}modified(){this._evaluate("modified")}onnect(e){this._branches.push(e)}ddMutatorIdsToTree(e,t=!1){t&&this.addToMutateSrcArray(e,this.state.mutator.id);for(const t of e.children)this.addToMutateSrcArray(t,this.state.mutator.id),this.addMutatorIdsToTree(t)}removeMutatorIdsFromTree(e,t=!1){t&&this.elementRemoveMutateSrc(e,this.state.mutator.id);for(const t of e.children)this.removeMutatorIdsFromTree(t),this.elementRemoveMutateSrc(t,this.state.mutator.id)}addToMutateSrcArray(e,t){const n=u(e);h(e,t)||(n.push(t),e.dataset.mutatorSrc=n.join(","))}elementRemoveMutateSrc(e,t){const n=u(e),s=n.indexOf(t);s>-1&&n.splice(s,1),n.length?e.dataset.mutatorSrc=n.join(","):delete e.dataset.mutatorSrc}}const u=e=>{var t;const n=null!==(t=e.dataset.mutatorSrc)&&void 0!==t?t:"";return n?n.split(","):[]},h=class d{et instances(){return this._instances}get once(){return this._once}et next(){return this._next}set next(e){e&&(this._instances.forEach((),this._next=e)}attach(e,t,n,s=!0){let i=this.instances.get(t);return void 0===i?(i=this.createInstance(e,t,n),n.connect(i),this.instances.set(t,i)):i.modified(),s&&i&&this.next?(this.next.attach(e,i.subject,i),i):i}}class f{get properties(){return this._properties}get mutator(){return this._mutator}get collector(){return this._collector}constructor(e,t,n){this._collector=e,this._mutator=t,this._properties=n||new Map}}class v extends l{get stateProperty(){return this._stateProperty}get state(){return this._localState}get localProperties(){return this._localProperties}get transform(){return this._transform||(}constructor(e,t,n,s){super(e,n),this._stateProperty=t,this._transform=s,this._localProperties=new Map(e.properties),this._localState=new f(e.collector,e.mutator,this._localProperties)}mutated(){const e=this.transform?this.transform(this.value):this.value;e!==this._previousValue&&(this._previousValue=e,this.localProperties.set(this.stateProperty,e),this.modified())}}class p extends d{get stateProperty(){return this._stateProperty}get transform(){return this._transform}constructor(e,t){super(),this._stateProperty=e,this._transform=t}}class _ extends v{constructor(e,t,n,s,i){super(e,t,n,i),this._attrName=s,this.mutated()}lass m extends p{reateInstance(e,t){return new _(e,this.stateProperty,t,this._attrName,this.transform)}}class g extends v{constructor(e,t,n,s){super(e,t,n,s),this.mutated()}class w extends p{class y extends v{get value(){return this._currentValue}constructor(e,t,s,i,r){var o;if(super(e,t,i,r),this._propertyName=s,!(null===(o=window.evolv)||void 0===o?void 0:o.context))throw new n("Mutate: Evolv Context not found.");const a=()=>{const e=this._currentValue;this._currentValue=window.evolv.context.get(this._propertyName),this._currentValue!==e&&this.mutated()};window.evolv.client.on("context.initialized",a),window.evolv.client.on("context.value.removed",a),window.evolv.client.on("context.value.added",a),window.evolv.client.on("context.value.changed",a),window.evolv.client.on("context.destroyed",a)}}class E extends p{constructor(e,t,n){super(e,n),this._propertyName=t}class b extends v{get value(){return this._currentValue}constructor(e,t,n,s){super(t,n,s),this.computable=e,this._currentValue=e(t,s,void 0),this.mutated()}modified(){this._currentValue=this.computable(this.state,this.subject,this._currentValue),this.mutated()}}class T extends p{reateInstance(e,t){return new b(this.computable,e,this.stateProperty,t)}}class x extends l{computeValue(e,t,n){return"function"==typeof t?t(this.state,this.subjectAsElement,e.getAttribute(n)):t}}class I extends d{}class O extends x{constructor(e,t,n,s){super(e,t),this._name=n,this._value=s,t instanceof HTMLElement&&t.getAttribute(this._name)!==s&&(this._previousValue=t.getAttribute(this._name)),this._set(this.subjectAsElement,this._value)}_set(e,t){const n=this.computeValue(e,t,this._name);void 0!==n?e instanceof HTMLElement&&e.getAttribute(this._name)!==t&&e.setAttribute(this._name,n):e.removeAttribute(this._name)}modified(){this._set(this.subjectAsElement,this._value),super.modified()}revert(){var e;super.revert(),this._set(this.subjectAsElement,null!==(e=this._previousValue)&&void 0!==e?e:"")}}class A extends I{constructor(e,t){super(),this._name=e,this._value=t}createInstance(e,t){return new O(e,t,this._name,this._value)}}class j extends x{constructor(e,t,n,s){super(e,t),this._previousValue=null,this._name=n,this._value=s,this._previousValue=t.classList.contains(this._name),this._set(this.subjectAsElement,this._value)}_set(e,t){const n=this.computeValue(e,t,this._name);n&&!e.classList.contains(this._name)?e.classList.add(this._name):!n&&e.classList.contains(this._name)&&e.classList.remove(this._name)}modified(){this._set(this.subjectAsElement,this._value),super.modified()}revert(){super.revert(),this._set(this.subjectAsElement,this._previousValue)}}class N extends I{constructor(e,t){super(),this._name=e,this._value=t}createInstance(e,t){return new j(e,t,this._name,this._value)}}class S extends x{get node(){return this._node}constructor(e,t,n){super(e,t),this._node=n}append(){var e;this.subject.appendChild(null!==(e=this.node)&&void 0!==e?e:this.subjectAsElement)}nhide(e,t){null==e||e.style.setProperty("display",null!=t?t:"")}hide(e){null==e||e.style.setProperty("display","none")}}class D extends I{}class M extends x{constructor(e,t,n,s,i){super(e,t),this._initialize=n,this._modify=s,this._revert=i,this._initialize&&this._initialize(e,t)}modified(){return this._modify&&this._modify(this.state,this.subject),super.modified()}revert(){super.revert(),this._revert&&this._revert(this.state,this.subject)}}class C extends D{reateInstanceclass L extends S{constructor(e,t,n,s){super(e,t),this._nodeToInject=n,this._inserter=s,s(t,n,!1)}modified(){var e;(null===(e=this._nodeToInject)||void 0===e?void 0:e.isConnected)||this._inserter(this.subjectAsElement,this._nodeToInject,!1),super.modified()}class P extends D{constructor(e,t,n=!0){super(),this._node=e,this._inserter=t,this._clone=n}createInstance(e,t){return new L(e,t,this._clone?this._node.cloneNode(!0):this._node,this._inserter)}}class k extends S{constructor(e,t,n){super(e,t,n),this.node instanceof Element&&this.addMutatorIdsToTree(n,!0),this.append()}modified(){var e;(null===(e=this.node)||void 0===e?void 0:e.isConnected)||(this.addMutatorIdsToTree(this.node,!0),this.append()),super.modified()}revert(){var e;super.revert(),this.subject===(null===(e=this.node)||void 0===e?void 0:e.parentNode)&&this.remove()}}class R extends D{constructor(e,t=!0){super(),this._node=e,this._clone=t}createInstance(e,t){if(h(t,e.mutator.id))throw new Error("Evolv AI: A previous mutation from this mutator has been identified by the Collector.This indicates it will be overwritten or may cause an infinite loop.Please make your selector more specific.");return new k(e,t,this._clone?this._node.cloneNode(!0):this._node)}}class F extends S{constructor(e,t,n){super(e,t,n),this._toRemove=null!=n?n:t,this._originalDisplayValue=this._toRemove.style.display,this.hide(this._toRemove)}modified(){this.hide(this._toRemove),super.modified()}revert(){super.revert(),this.unhide(this._toRemove,this._originalDisplayValue)}}class V extends D{constructor(e){super(),this._node=e}createInstance(e,t){return new F(e,t,this._node)}}class z extends S{constructor(e,t,n){super(e,t,n),this.append()}modified(){this.append(),super.modified()}revert(){super.revert(),this.remove()}}class H extends D{constructor(e){super(),this._node=e}createInstance(e,t){return new z(e,t,this._node)}}class q extends x{constructor(e,t,n,s){super(e,t),this.TRANSITION_DEFINITION="evolvOriginalTransition",this.TRANSITION_DEFINITION_INLINE="evolvOriginalTransitionInline",this._previousValue=null,this._name=n,this._value=s,this._camelCaseName=n.replace(/-([a-z])/g,(),this._set(this.subjectAsElement,this._value)}_set(e,t){const n=this.computeValue(e,t,this._name);e instanceof HTMLElement&&(this._computedValueFor!==n||e.style[this._camelCaseName]!==this._computedValue)&&(this.pauseTransitions(this.subjectAsElement),this._previousValue=e.style[this._camelCaseName],e.style[this._camelCaseName]=n,this._computedValueFor=n,this._computedValue=e.style[this._camelCaseName],setTimeout((()=>{this.resumeTransitions(this.subjectAsElement)}),0))}modified(){this._set(this.subjectAsElement,this._value),super.modified()}revert(){super.revert(),this.subjectAsElement instanceof HTMLElement&&(this.pauseTransitions(this.subjectAsElement),this.subjectAsElement.style[this._camelCaseName]=this._previousValue,setTimeout((,0))}pauseTransitions(e){e instanceof HTMLElement&&(this.setAndStoreIsTransitionInline(e),this.setAndStoreTransitionDefinition(e),this.getTransitionDefinition(e)&&(e.style.transition="none"))}resumeTransitions(e){e instanceof HTMLElement&&this.getTransitionDefinition(e)&&(this.isTransitionInline(e)?e.style.transition=this.getTransitionDefinition(e):e.style.transition="",this.clearStoredTransitionData(e))}setAndStoreIsTransitionInline(e){void 0===e.dataset[this.TRANSITION_DEFINITION_INLINE]&&(e.dataset[this.TRANSITION_DEFINITION_INLINE]=(!!e.style.transition).toString())}isTransitionInline(e){return"true"===e.dataset[this.TRANSITION_DEFINITION_INLINE]}setAndStoreTransitionDefinition(e){this.getTransitionDefinition(e)||(e.dataset[this.TRANSITION_DEFINITION]=getComputedStyle(e).transition)}getTransitionDefinition(e){return e.dataset[this.TRANSITION_DEFINITION]||""}clearStoredTransitionData(e){delete e.dataset[this.TRANSITION_DEFINITION],delete e.dataset[this.TRANSITION_DEFINITION_INLINE]}}class U extends I{constructor(e,t){super(),this._name=e,this._value=t}createInstance(e,t){return new q(e,t,this._name,this._value)}}class $ extends x{get text(){var e,t,n;return"function"==typeof this._text?this._text(this.state,this.subjectAsElement,null!==(n=null!==(e=this._previousText)&&void 0!==e?e:null===(t=this.subjectAsElement)||void 0===t?void 0:t.textContent)&&void 0!==n?n:""):this._text||""}constructor(e,t,n){super(e,t),this._text=n,this._set(this.text)}_set(e,t){const n=this.subject;n.textContent!==e&&(this._previousText=t?void 0:n.textContent||"",n.textContent=e||"")}modified(){void 0!==this._previousText&&(this._set(this.text),super.modified())}revert(){super.revert(),void 0!==this._previousText&&this._set(this._previousText,!0)}}class W extends I{constructor(e){super(),this._text=e}class B extends x{get html(){return"function"==typeof this._html?this._html(this.state,this.subjectAsElement,this._previousHTML):this._html||""}constructor(e,t,n){super(e,t),this._html=n,this._set(this.html)}_set(e,t){var n,s;const i=this.subjectAsHtmlElement,r=document.createElement(i.tagName);r.innerHTML="test","test"!==r.innerHTML||this._equalExcludingMutatorIds(i,e)||(this._previousHTML=t?void 0:null!==(s=null!==(n=this._previousHTML)&&void 0!==n?n:i.innerHTML)&&void 0!==s?s:"",i.innerHTML=e||"",this.addMutatorIdsToTree(i))}_equalExcludingMutatorIds(e,t){const n=document.createElement(e.tagName);n.innerHTML=t||"";const s=e.cloneNode(!0);return this.removeMutatorIdsFromTree(s),s.innerHTML===n.innerHTML}modified(){void 0!==this._previousHTML&&(this._set(this.html),super.modified())}revert(){super.revert(),void 0!==this._previousHTML&&(this._set(this._previousHTML,!0),this.removeMutatorIdsFromTree(this.subjectAsHtmlElement))}}class J extends I{constructor(e){if(super(),e instanceof Node){const t=document.createElement("div");e&&t.appendChild(e),this._html=t.innerHTML}else this._html=e}createInstance(e,t){if(h(t,e.mutator.id))throw new Error("Evolv AI: A previous mutation from this mutator has been identified by the Collector.This indicates it will be overwritten or may cause an infinite loopPlease make your selector more specific.");return new B(e,t,this._html)}}class G extends x{constructor(e,t,n,s){super(e,t),this._event=n,this._listener=s,this._reverted=!1,this.initialize()}initialize(){this._reverted||(this._reverted=!1,this.subject.addEventListener(this._event,this._listener))}revert(){super.revert(),this._reverted||(this._reverted=!0,this.subject.removeEventListener(this._event,this._listener))}}class K extends I{constructor(e,t){super(),this._event=e,this._listener=t}createInstance(e,t){return new G(e,t,this._event,this._listener)}}class X extends x{constructor(e,t,n,s){super(e,t),this._event=n,this._listener=s,this._reverted=!1,this.initialize()}initialize(){this._reverted&&(this._reverted=!1,this.subject.removeEventListener(this._event,this._listener))}revert(){super.revert(),this._reverted||(this._reverted=!0,this.subject.addEventListener(this._event,this._listener))}}class Y extends I{constructor(e,t){super(),this._event=e,this._listener=t}createInstance(e,t){return new X(e,t,this._event,this._listener)}}class Z extends l{et effects(){return[...this._effects]}constructor(e,t,n){super(e,t),this._effects=[],this._effects.push(n)}_createEffectsForMapEntries(e,t,n){const s=n instanceof Map?n:Object.entries(n);for(const n of s){const s=new t(n[0],n[1]).attach(this.state,e,this.branch);this._effects.push(s)}}createAttributeEffect(e,t,n){const s=new A(t,n).attach(this.state,e,this.branch);this._effects.push(s)}createAttributeEffects(e,t){this._createEffectsForMapEntries(e,A,t)}createStyleModifiedEffects(e,t){this._createEffectsForMapEntries(e,U,t)}reateTextModifiedEffect(e,t){const n=new W(t).attach(this.state,e,this.branch);this._effects.push(n)}createInsertNodeEffect(e,t){const n=new R(t).attach(this.state,e,this.branch);this._effects.push(n)}createRemoveNodeEffect(e,t){const n=new V(t).attach(this.state,e,this.branch);this._effects.push(n)}createReplaceNodeEffect(e,t){const n=new H(t).attach(this.state,e,this.branch);this._effects.push(n)}}class Q extends d{}function ee(e,t){if(e.closest)return e.closest(t);let n=e;do{if(Element.prototype.matches.call(n,t))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}const te=(e,t)=>{let n,s=r()-t;const i=return(...o)=>t<=0?Promise.resolve(e(...o)):new Promise((a=>{const c=s+t-r();n&&clearTimeout(n),s+t<=r()?(i(),a(e(...o))):n=window.setTimeout((()=>{i(),a(e(...o))}),c)}))};var ne,se,ie,re;const oe=new c("Abstract Collector"),ae={subtree:!0,childList:!0},ce={subtree:!0,childList:!0,attributes:!0,characterData:!0},le=new Map;let ue=[],he=[],de=[];const fe=(t,n,s)=>{const i=le.get(n);if(i&&!i.destroyed)switch(t){case e.ADDED:i.takeResponsibilityForElement(s);break;case e.MODIFIED:i.modified(s);break;case e.REMOVED:i.releaseResponsibilityForElement(s)}},ve=()=>{const e=ye.takeRecords();de.push(...e),ge().catch((e=>{oe.error(`Element mutation observer failed: ${e.message}`)}))},pe=_e=(t,n)=>{n!==e.MODIFIED&&n!==e.REMOVED||((e,t)=>{var n;if(null===(n=e.__evolv__)||void 0===n?void 0:n.collectors)for(const n of[!1,!0])e.__evolv__.collectors.forEach(((s,i)=>{n===s&&fe(t,i,e)}))})(t,n),le.forEach((e=>{if(e instanceof Ee)return;const n=e;if(!n.selector||e.destroyed)return;let s;if("string"==typeof n.selector){if(t.matches(n.selector))return void n.takeResponsibilityForElement(t);s=t.querySelectorAll(n.selector)}else if(s=n.selector(window.document),[].indexOf.call(s,t))return void n.takeResponsibilityForElement(t);s&&s.forEach((e=>{n.takeResponsibilityForElement(e)}))}))},me=te((()=>{const t=he;he=[];for(const n of t){const t=n.target;let s=n.removedNodes.length;for(;s--;){const i=n.removedNodes.item(s);(null==i?void 0:i.nodeType)===Node.ELEMENT_NODE&&_e(t,i===t?e.REMOVED:e.MODIFIED)}if(t.isConnected)for(s=n.addedNodes.length;s--;){const i=n.addedNodes.item(s);(null==i?void 0:i.nodeType)===Node.ELEMENT_NODE&&_e(t,i===t?e.ADDED:e.MODIFIED)}}}),(null===(se=null===(ne=window.evolv)||void 0===ne?void 0:ne.collect)||void 0===se?void 0:se.throttle)||25),ge=te((()=>{const t=de;de=[];for(const n of t){const t=n.target.nodeType===Node.TEXT_NODE?n.target.parentNode:n.target;t.isConnected&&_e(t,e.MODIFIED)}}),(null===(re=null===(ie=window.evolv)||void 0===ie?void 0:ie.collect)||void 0===re?void 0:re.throttle)||25),we=new MutationObserver((e=>{he=he.concat(e),me().catch((e=>{oe.error(`Parent mutation observer failed: ${e.message}`)}))})),ye=new MutationObserver((e=>{de.push(...e),ge().catch(()}));class Ee{t elementSet(){return this._elements}get validationWindowHasElapsed(){return!!this._within&&r()-this._start>this._within}get discoveryWindowHasElapsed(){return!!this._discoveryTime&&r()-this._start>this._discoveryTime}get id(){return this._id}get name(){return this._name}get root(){return this._root}get parentSelector(){return this._parentSelector}get selector(){return this._selector}get elements(){return this._elements&&[...this._elements]||[]}et paused(){return this._paused}get isValid(){const e=this.elements,t=0===this._predicates.length||this._predicates.every(();return this._hasValidated=this._hasValidated||t,t}get hasValidated(){return this._hasValidated}get destroyed(){return this._destroyed}constructor(e,t,n){var s,i,o,a,l,u;this._paused=!1,this._failed=!1,this._hasValidated=!1,this._destroyed=!1,this._discoveringParents=[],this._predicates=[],this._within=null!==(o=null===(i=null===(s=window.evolv)||void 0===s?void 0:s.collect)||void 0===i?void 0:i.discoveryTime)&&void 0!==o?o:0,this._discoveryTime=null!==(u=null===(l=null===(a=window.evolv)||void 0===a?void 0:a.collect)||void 0===l?void 0:l.discoveryTime)&&void 0!==u?u:0,this._start=r(),this._transforms=[],this._id=Ee._NEXT_COLLECTOR_ID.toString(),Ee._NEXT_COLLECTOR_ID++,this._name=t,this._root=n||document,this._selector=e,this._claims=[],this._nonVolatileParents=new Map,this._preservedNonVolatileParents=new Set,this._log=new c(`Collector: ${this.name}`),this._stateListeners=[],this._elements=new Set,this._observedTargets=new Set,this._listeners=[],le.set(this._id,this),this._beginDiscovery()}static _collectParents(e){const t=[];let n=e;for(;n=n.parentElement||n.parentNode,null!==n&&9!==n.nodeType;)t.push(n);return t}_findOuterMostObservedParent(e,t){if(!this._observedTargets)return t;let n=e.length;for(;n>-1&&n>=t&&!this._observedTargets.has(e[n]);)n--;return Math.max(n,t)}_reduceObservationTargetsToOutermostObservedAncestor(e){let t,n=e,s=!1;do{t=!1;for(const[n,s]of this._nonVolatileParents.entries()){let i=s;e.forEach((),i!=s&&(this._nonVolatileParents.set(n,i),t=!0)}for(const e of this._preservedNonVolatileParents)for(const n of this._nonVolatileParents.values())n.contains(e)&&(this._preservedNonVolatileParents.delete(e),t=!0);t&&(s=!0)}while(t);return s&&(n=new Set,this._nonVolatileParents.forEach((e=>n.add(e))),this._preservedNonVolatileParents.forEach((e=>n.add(e)))),n}_findClosestNonVolatileParent(e){const t=Ee._collectParents(e),n={wasDisconnected:!1,parentIndex:this._findOuterMostObservedParent(t,-1),parents:t,element:e};this._discoveringParents.push(n),this._setNonVolatileParent(e,-1===n.parentIndex?e:t[n.parentIndex])}_beginDiscovery(){var e,t,n;this._parentSelector||(this._discoverInterval=window.setInterval((()=>{if(this._destroyed||!this._discoveringParents.length||this.discoveryWindowHasElapsed)return this._discoveringParents=[],void(this._discoverInterval&&window.clearInterval(this._discoverInterval));let e=this._discoveringParents.length;for(;e--;){const t=this._discoveringParents[e];!t.wasDisconnected||t.element.isConnected?this._discoverElementsNonVolatileParent(t):this._discoveringParents.splice(e,1)}}),null!==(n=null===(t=null===(e=window.evolv)||void 0===e?void 0:e.collect)||void 0===t?void 0:t.discoveryPollInterval)&&void 0!==n?n:50))}_discoverElementsNonVolatileParent(e){if(e.element.isConnected)return e.parents=Ee._collectParents(e.element),void(e.wasDisconnected=!1);e.wasDisconnected=!0;let t=0;for(;t<e.parents.length&&!e.parents[t].isConnected;)t++;t=this._findOuterMostObservedParent(e.parents,t),t>e.parentIndex&&(e.parentIndex=t,this._setNonVolatileParent(e.element,e.parents[e.parentIndex])),this.updateObservers()}_setNonVolatileParent(e,t){var n,s;if(!e.dataset.mutateId)throw new Error("A subject element must have a data-mutate-id attribute.");const i=this._nonVolatileParents.get(e);if(i){if(i===t)return;(null===(n=i.__evolv__)||void 0===n?void 0:n.observing)&&i.__evolv__.observing.delete(e.dataset.mutateId)}t.__evolv__||Ee._enhanceElement(t),this._nonVolatileParents.set(e,t),null===(s=t.__evolv__.observing)||void 0===s||s.add(e.dataset.mutateId)}static _enhanceElement(e){e.__evolv__=Object.assign(Object.assign({},e.__evolv__||{}),{collectors:new Map,observing:new Set,claimed:!1}),e.dataset&&!e.dataset.mutateId&&(e.dataset.mutateId=Ee._NEXT_ELEMENT_ID.toString(),Ee._NEXT_ELEMENT_ID++)}_observeClosestParent(e){if(!this._parentSelector)return;const t=ee(e,this._parentSelector);t?this._setNonVolatileParent(e,t):this._log.warn(`Unable to find parent to observe that matches '${this._parentSelector}'`)}static whenReady(e){if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)e();else{const t=document.addEventListener("DOMContentLoaded",t)}}addCollectorToElement(e){var t;Ee._enhanceElement(e),null===(t=e.__evolv__.collectors)||void 0===t||t.set(this._id,!0)}removeCollectorFromElement(e){var t;(null===(t=e.__evolv__)||void 0===t?void 0:t.collectors)&&e.__evolv__.collectors.delete(this._id)}updateObservers(){if(this._destroyed)return!1;let e=new Set(this._preservedNonVolatileParents);return this._nonVolatileParents.forEach((t=>{e.add(t)})),(!this._observedTargets||!this._observedTargets,e))&&(e=this._reduceObservationTargetsToOutermostObservedAncestor(e),this._observedTargets&&(this._observedTargets.forEach((t=>{e.has(t)||(ue=ue.slice(ue.indexOf(t),1))})),e.forEach((e=>{this._observedTargets.has(e)||ue.push(e)}))),this._observedTargets=e,(()=>{const e=new Set(ue);we.disconnect();for(const t of e)we.observe(t,ae);ye.disconnect(),le.forEach((e=>{for(const t of e.elements)ye.observe(t,ce)}))})(),!0)}fireAddedForAllElements(){this._elements.forEach(this.notifyListeners.bind(this,e.ADDED))}notifyListeners(t,n){var s;this._paused||this._destroyed||this.isWaitingForValidation||(this.isValid?(t===e.ADDED&&this._claims.length&&(null===(s=this._claims.shift())||void 0===s||s.resolve(n)),this._listeners.forEach((e=>{try{e(t,n,this.elements)}catch(e){this._log.error(e)}}))):this.delayForValidation())}notifyStateListeners(e){this._destroyed&&e!==t.DESTROYED||this._stateListeners.forEach((t=>{try{t(e,this)}catch(e){this._log.error(e)}}))}endDelayForValidation(){var e;if(this._withinInterval&&(clearInterval(this._withinInterval),delete this._withinInterval,this.isValid)){for(const t of this.elements)null===(e=this._claims.shift())||void 0===e||e.resolve(t);this._stateListeners.forEach((e=>e(t.VALIDATED,this))),this.fireAddedForAllElements()}}delayForValidation(){this._withinInterval||(this._withinInterval=window.setInterval((()=>{var e;if(this.validationWindowHasElapsed){const n=`Collector "${this._name}" failed to satisfy validators within ${this._within} milliseconds`;for(this._log.error(n),this._failed=!0;this._claims.length;)null===(e=this._claims.shift())||void 0===e||e.reject(n);return this.notifyStateListeners(t.FAILED),void clearInterval(this._withinInterval)}this.isValid&&this.endDelayForValidation()}),10))}takeResponsibilityForElement(t){if(this.destroyed)return;let n=t;for(const e of this._transforms){const t=e(n);if(!t)return;t instanceof HTMLElement&&(n=t)}this._elements.has(t)||(this.addCollectorToElement(t),this._elements.add(t),t.classList.add(`mutate-${this.name}`),this.parentSelector?this._observeClosestParent(t):this._findClosestNonVolatileParent(t),this.isWaitingForValidation&&this.isValid?this.endDelayForValidation():this.notifyListeners(e.ADDED,t))}releaseResponsibilityForElement(t){var n;if(!t.dataset.mutateId)return;this.removeCollectorFromElement(t),t.classList.remove(`mutate-${this.name}`);const s=this._nonVolatileParents.get(t);s&&(null===(n=s.__evolv__.observing)||void 0===n||n.delete(t.dataset.mutateId),this._nonVolatileParents.delete(t),this._preservedNonVolatileParents.add(s)),this._elements.delete(t),this.notifyListeners(e.REMOVED,t)}claim(){if(this.elements.length){const e=this.elements.filter(();if(e.length){return e[0].__evolv__.claimed=!0,Promise.resolve(e[0])}}return new Promise(((e,t)=>{this._claims.push({resolve:t=>{t.__evolv__.claimed=!0,e(t)},reject:t})}))}map(e){return this._transforms.push(e),this}filter(e){return this._transforms.push(e),this}odified(t){const n=`mutate-${this.name}`;t.classList.contains(n)||t.classList.add(n),this.notifyListeners(e.MODIFIED,t)}observeParent(e){return this._parentSelector=e,this._discoveringParents=[],this._elements.forEach(this._observeClosestParent.bind(this)),this.updateObservers(),this}subscribe(t){if(this._destroyed)throw new i;if(this._listeners.push(t),!this.isValid)return this.delayForValidation(),this;if(this.isWaitingForValidation)return this.endDelayForValidation(),this;const n=this.elements;return this._elements.forEach((),this}subscribeState(e){return this._destroyed?(e(t.DESTROYED,this),this):(this._stateListeners.push(e),e(t.INITIALIZED,this),this.isValid?e(t.VALIDATED,this):this._failed&&e(t.FAILED,this),this)}pausenpause(){return this._paused?(this._paused=!1,this.notifyStateListeners(t.UNPAUSED),this):this}atLeast(e){return this._predicates.push((()=>this.elements.length>=e)),this}atMost(e){return this._predicates.push((()=>this.elements.length<=e)),this}exactlystroy(){this._destroyed=!0,le.delete(this._id),this.elements.forEach(this.releaseResponsibilityForElement.bind(this)),this._preservedNonVolatileParents.clear(),this.updateObservers(),this._discoverInterval&&clearInterval(this._discoverInterval),this._withinInterval&&clearInterval(this._withinInterval),this.notifyStateListeners(t.DESTROYED),this._stateListeners=[],this._listeners=[],this._transforms=[]}}Ee._NEXT_COLLECTOR_ID=1,Ee._NEXT_ELEMENT_ID=1;class be extends Ee{constructor(e,t,n){super(e,t,n),Ee.whenReady(()}_watchollect(){const e=this.selector;if(!e)return;let t;if("string"==typeof e)switch(e.charAt(0)){case"/":case"(":{const n=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);let s=n.snapshotLength;const i=new Array(s);for(;s--;)i[s]=n.snapshotItem(s);t=i;break}default:t=Array.from(this.root.querySelectorAll(e))}else t=Array.from(e(window.document));if(t.length===this.elementSet.size){let e=!1;for(const n of t)if(!this.elementSet.has(n)){e=!0;break}if(!e)return}if(!this.elementSet.size)return t.forEach((e=>{this.takeResponsibilityForElement(e)})),void this.updateObservers();const n=this.elements,s=n.filter((),i=t.filter((e=>-1===n.indexOf(e)));s.forEach(this.releaseResponsibilityForElement.bind(this)),i.forEach((),this.elements.filter(().forEach((e=>{var t;null===(t=e.__evolv__.collectors)||void 0===t||t.set(this.id,!1),this.modified(e)})),(s.length||i.length)&&this.updateObservers()}pause(){const e=super.pause();return this._unwatch(),e}onst Te=new Map,xe=new Map,Ie={subtree:!0,childList:!0,attributes:!0,characterData:!0};let Oe=!1,Ae=0;const je=e=>t=>{let n=null;for(const e of Te)if(e[0].contains(t.target)){n=e[1].getSubjectFor(t.target);break}n&&e(n,t)},Ne=(e,t,n=!1)=>{var s;const i=window.getComputedStyle(e),r=window.getComputedStyle(t),o=t;for(let e=0;e<i.length;e++){const t=i[e],a=i.getPropertyValue(t);a===r.getPropertyValue(t)||n&&"display"===t&&"none"===a||(null===(s=o.style)||void 0===s||s.setProperty(t,i.getPropertyValue(t)))}},Se={attributes:je(((e,t)=>{if(null===t.attributeName)return;const n=t.target.getAttributeNS(t.attributeNamespace,t.attributeName);Te.has(t.target)&&"style"===t.attributeName&&n?Ne(t.target,e,!0):e.setAttributeNS(t.attributeNamespace,t.attributeName,n||"")})),characterData:je((),childList:je(((e,t)=>{for(;e.firstChild;)e.firstChild.remove();t.target.childNodes.forEach((t=>e.appendChild(t))),Pe(e,t.target)}))},De=new MutationObserver((e=>{for(const t of e)Se[t.type](t)}));function Me(e,t,n){let s;return t.__evolv__||(t.__evolv__={}),t.__evolv__.ghostId?s=t.__evolv__.ghostId:(s=null!=n?n:e.id+"-"+Ae++,t.__evolv__.ghostId=s),s}function Ce(e,t,s){const i=Me(e,t);if(i!==Me(e,s,i))throw new n("Ghost id mismatch");const r=t.childNodes,o=s.childNodes;for(let t=0;t<r.length;t++){const n=r.item(t),s=o.item(t);n.nodeType===Node.ELEMENT_NODE&&s.nodeType===Node.ELEMENT_NODE&&Ce(e,n,s)}}function Le(e,t){var s;if(xe.has(e)){const t=xe.get(e);e.removeEventListener("input",t),e.removeEventListener("change",t)}const i=()=>{Oe||(Oe=!0,t.value=e.value,Oe=!1)};e.addEventListener("input",i,{passive:!0}),e.addEventListener("change",i,{passive:!0}),xe.set(e,i);const r=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value");if(!r)throw new n('"value" property not found on type '+typeof e.constructor);Object.defineProperty(e,"value",{set:n=>{var s;null===(s=r.set)||void 0===s||s.call(e,n),Oe||e.value===n||(Oe=!0,t.value=n,Oe=!1)},get:null===(s=r.get)||void 0===s?void 0:s.bind(e)})}function Pe(e,t){const n="input, select, textarea",s=e.querySelectorAll(n),i=t.querySelectorAll(n);s.forEach(((e,t)=>{var n,s;n=e,s=i.item(t),Le(n,s),Le(s,n)}))}class ke extends HTMLElement{void 0===window.customElements.get("mutate-projection")&&window.customElements.define("mutate-projection",ke);class Re extends Z{get id(){return this._id}get projection(){return this._projection}constructor(e,t,s,i,r,o,a,c){super(e,document.createElement("mutate-projection"),s),this._id=c,this._ghost=t,this._collector=i,this._projectionCollector=r,this._inserter=o,this._styled=a,this._ghostHider=s;const l=this.subjectAsElement;if(!l.shadowRoot)throw new n("No shadow root found");this._projection=this._ghost.cloneNode(!0),l.dataset.evolvGhostId=this._id,l.shadowRoot.appendChild(this._projection),Ce(this,this._ghost,this._projection),Pe(this._projection,this._ghost),this._observeAllEvents(this._projection,this._ghost),this._projectionCollector.subscribe(((e,t)=>{t===this.subjectAsElement&&this._applyProjection()})),Te.set(this._ghost,this),this._ghost),this._applyProjection()}_applyProjection(){if(this.subject.isConnected)return;const e=e=>{this._ghostHider.pauseEvaluation(),this._ghostHider.revert(),this._target=e,this.subjectAsElement.remove(),this._styled&&function(e,t){const n=(e,t)=>{Ne(e,t),e.childNodes.forEach(((e,s)=>{e instanceof Element&&n(e,t.childNodes.item(s))}))};n(e,t)}(this._ghost,this._projection),this._inserter(e,this.subjectAsElement,!1),this._ghostHider.modified(),this._ghostHider.unpauseEvaluation()};this._target&&this._target.isConnected?e(this._target):(this._target=void 0,this._collector.claim().then(e))}_getPeer(e,t){var n,s;const i=(e,t)=>{if(!e||!t)return null;if(function(e,t){var n,s,i;return!(!(null===(n=t.__evolv__)||void 0===n?void 0:n.ghostId)||(null===(s=t.__evolv__)||void 0===s?void 0:s.ghostId)!==(null===(i=e.__evolv__)||void 0===i?void 0:i.ghostId))}(e,t))return t;for(let n=0;n<t.childNodes.length;n++){const s=t.childNodes.item(n);if(s.nodeType!==Node.ELEMENT_NODE)continue;const r=i(e,s);if(r)return r}return null};return e===(null===(n=this.subjectAsElement.shadowRoot)||void 0===n?void 0:n.firstChild)&&t===this._ghost||e===this._ghost&&t===(null===(s=this.subjectAsElement.shadowRoot)||void 0===s?void 0:s.firstChild)?t:i(e,t)}_observeAllEvents(e,t){const n=e=>{if(null===e.target||!(e.target instanceof Element))return;const n=this._getPeer(e.target,t);if(!n)return;const s=new e.constructor(e.type,e);n.dispatchEvent(s)};for(const t in e)t.startsWith("on")&&e.addEventListener(t.substr(2),n)}emoved(){super.removed(),this._projectionCollector.destroy(),this.subjectAsElement.remove(),this._ghostHider.revert()}lass Fe extends d{set next(e){e&&(this.instances.forEach((t=>{const n=t;e.attach(n.state,n.projection,t)})),this._next=e)}constructor(e,t,n=!1){super(),this._id=`${Math.floor(100*Math.random())}_${Date.now()}`,this._collector=e,this._inserter=t,this._styled=n,this._projectionCollector=new be(`mutate-projection[data-evolv-ghost-id="${this._id}"]`,this._id)}ttach(e,t,s){let i=this.instances.get(t);if(void 0===i){const n=new q(e,t,"display","none");s.connect(n),i=this.createInstance(e,t,n),n.connect(i),this.instances.set(t,i)}else i.modified();const r=i.projection;if(!r)throw new n("Failed to create ghost");return this.next&&i?(this.next.attach(e,r,i),i):i}}class Ve extends Z{constructor(e,t,n,s){if(super(e,t,n),this._transform=s,!this.subject.parentElement)throw new Error("The subject needs a parent element to be transformed.");this._parent=this.subject.parentElement;const i=this.subject.cloneNode(!0);this._transformed=this._transform(t),this._persistEffects(this._transformed||t,i)}_classModificationsToObject(e,t){const n=new Map;for(const s of Array.prototype.slice.call(e))t.contains(s)||n.set(s,!0);for(const s of Array.prototype.slice.call(t))e.contains(s)||n.set(s,!1);return n}_styleModificationsToObject(e,t){const n=new Map;for(let s=0,i=e.length;s<i;s++){const i=e.item(s),r=e.getPropertyValue(i);t.getPropertyValue(i)!==r&&n.set(i,r)}for(let s=0,i=t.length;s<i;s++){const i=t.item(s);e.getPropertyValue(i)||n.set(i,"")}return n}_textNodeToEffect(e,t){e.nodeValue!==(null==t?void 0:t.nodeValue)&&this.createTextModifiedEffect(e,e.nodeValue||void 0)}_persistEffects(e,t){const n=(e,t,s)=>{var i,r;if(!s||t.nodeType!==s.nodeType)return void this.createInsertNodeEffect(e,t);if(t.nodeType===Node.TEXT_NODE)return void this._textNodeToEffect(t,s);if(t.nodeType!==Node.DOCUMENT_NODE&&t.nodeType!==Node.ELEMENT_NODE)return;const o=t,a=s;o.innerText!==a.innerText&&this.createTextModifiedEffect(o,o.innerText),o.tagName!==a.tagName&&this.createReplaceNodeEffect(s,t);for(const e of Array.prototype.slice.call(o.attributes))e&&e.value!==(null===(i=a.attributes.getNamedItem(e.name))||void 0===i?void 0:i.value)&&("class"!==e.name?"style"!==e.name?this.createAttributeEffect(t,e.name,e.value):this.createStyleModifiedEffects(t,this._styleModificationsToObject(o.style,a.style)):this.createClassModifiedEffects(t,this._classModificationsToObject(o.classList,a.classList)));for(const e of Array.prototype.slice.call(a.attributes))o.attributes.getNamedItem(e.name)||this.createAttributeEffect(t,e.name,null!==(r=o.getAttribute(e.name))&&void 0!==r?r:"");t.childNodes.forEach(((e,i)=>{n(t,e,s.childNodes.item(i))}))};n(this._parent,e,t)}}class ze extends Q{constructor(e){super(),this._transform=e}createInstance(e,t,n){return new Ve(e,t,n,this._transform)}}class He extends Z{constructor(t,n,s,i){super(t,n,s),this._collector=new be(i,void 0,n),this._collector.subscribe(((t,s)=>{t===e.ADDED&&this.createRemoveNodeEffect(n,s)}))}revert(){super.revert(),this._collector.pause()}modified(){super.modified(),this._collector.unpause()}class qe extends Q{constructor(e){super(),this._selector=e}createInstancelass $e extends l{}class We extends d{createInstance(e,t){return new $e(e,t)}removed(e){var t;null===(t=this.instances.get(e))||void 0===t||t.removed()}modifiedevert(e){var t;e?null===(t=this.instances.get(e))||void 0===t||t.revert():this.instances.forEach(()}attach(e,t){let n=this.instances.get(t);return void 0===n&&(n=this.createInstance(e,t),this.instances.set(t,n)),this.next&&n&&this.next.attach(e,t,n),n}}class Be{s(e){const t=[...this._factoryArgs];return t.unshift(e),this._push(Reflect.construct(this._factoryConstructor,t)),this._result}}class Je extends l{}class Ge extends d{createInstance(e,t){const n=this.traverse(t);return new Je(e,n)}}class Ke extends Ge{constructor(e){super(),this._selector=e}traverse(e){const t=this._selector?ee(e,this._selector):e.parentElement;if(!t)throw new n(`No parent found matching selector: ${this._selector}`);return t}}class Xe extends Ge{constructor(e){super(),this._selector=e}traverse(e){const t=e,s=this._selector?t.querySelector(this._selector):e.firstChild;if(!s)throw new n(`No child found matching selector: ${this._selector}`);return s}}class Ye extends l{class Ze extends d{reateInstance(e,t){return new Ye(e,t)}attach(e,t,n){const s=this.traverse(t);for(const[e,t]of this.instances.entries())s.includes(e)||(t.removed(),null==n||n.disconnect(t),this.instances.delete(e));s.forEach((t=>{let n=this.instances.get(t);void 0===n&&(n=new Je(e,t),this.instances.set(t,n)),this.next&&n&&this.next.attach(e,t,n)}));let i=this._rootInstances.get(t);return void 0===i&&(i=this.createInstance(e,t),this._rootInstances.set(t,i)),i.subActions=Array.from(this.instances.values()),i}}class Qe extends Ze{constructor(e){super(),this._selector=e}traverse(e){const t=(e,n)=>e.parentElement?(this._selector&&!e.parentElement.matches(this._selector)||n.push(e.parentElement),t(e.parentElement,n)):n;return t(e,[])}}class et extends Ze{raverse(e){const t=e,n=this._selector?t.querySelectorAll(this._selector):e.childNodes;return n?Array.from(n):[]}}class tt extends l{lass nt extends d{}class st extends tt{createEvent(){return new FocusEvent("blur",{bubbles:!0,cancelable:!0,view:window})}}class it extends nt{createInstance(e,t){return new st(e,t)}}class rt extends tt{createEvent(){return new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})}}class ot extends nt{createInstance(e,t){return new rt(e,t)}}class at extends tt{createEvent(){return new FocusEvent("focus",{bubbles:!0,cancelable:!0,view:window})}}lass lt extends tt{lass ut extends nt{get event(){return this._event}get options(){return this._options}class ht extends lt{}class dt extends ut{constructor(e){super("keydown",e)}createInstance(e,t){return new ht(e,t,this.event,this.options)}}class ft extends lt{}class vt extends ut{constructor(e){super("keypress",e)}createInstance(e,t){return new ft(e,t,this.event,this.options)}}lass _t extends ut{ar mt;!mt||(mt={}));class gt{tatic createParentRelativeInserter(e){return(t,n)=>(t.insertAdjacentElement(e,n),[n])}static createRelativeInserter(e,t){return(n,s,i)=>{let r;r=i?n.querySelectorAll(e):[n.querySelector(e)];const o=[];return r.forEach((e=>{const n=i&&r.length>1?s.cloneNode(!0):s;o.push(n),e.insertAdjacentElement(t,n)})),o}}static createInserter(e){return(t,n)=>(t.insertAdjacentElement(e,n),[n])}before(e){let t;return t=e?gt.createRelativeInserter(e,mt.BEFORE):gt.createParentRelativeInserter(mt.BEFORE),this._handler(this._collectorName,this._context,t)}after(e){let t;return t=e?gt.createRelativeInserter(e,mt.AFTER):gt.createParentRelativeInserter(mt.AFTER),this._handler(this._collectorName,this._context,t,!0)}prepend(){return this._handler(this._collectorName,this._context,gt.createInserter(mt.BEFORE_ALL),!0)}append(){return this._handler(this._collectorName,this._context,gt.createInserter(mt.AFTER_ALL))}}class wt{get collector(){return this._collector}onstructor(t,n){this._paused=!1,this._push=e=>(ve(),this._tail.next=e,this._tail=e,pe(),this),this.once=()=>(this._tail.once=!0,this),this.with={attribute:(e,t)=>new Be(m,[e,t],this,this._push.bind(this)),attr:content:e=>new Be(w,[e],this,this._push.bind(this)),context:(e,t)=>new Be(E,[e,t],this,this._push.bind(this)),computed:e=>new Be(T,[e],this,this._push.bind(this))},this.styles=e=>{let t=null;const n=e instanceof Map?e:Object.entries(e);for(const e of n)t=this._push(new U(e[0],e[1]));return null!=t?t:this},this.attribute=(e,t)=>this._push(new A(e,t)),this.attr=this.attribute,this.attributes=e=>{let t=null;const n=e instanceof Map?e:Object.entries(e);for(const e of n)t=this.attribute(e[0],e[1]);return null!=t?t:this},this.parents=e=>this._push(new Qe(e)),this.children=this.capture=()=>{throw new Ue},this.root=()=>{throw new Ue},this.swapWith=this.customMutation=(e,t,n)=>this._push(new C(e,t,n)),this.customEffect=(e,t,n)=>this._push(new C(e,t,n)),this.transform=e=>(console.log("Evolv: The mutate.transform function is experimental. Use at your own risk."),this._push(new ze(e))),this.listen=(e,t)=>this._push(new K(e,t)),this.revert=this.pause=()=>(this._paused=!0,this),this.paused=this.unpause=()=>(this._paused=!1,this.reevaluate(),this),this.reevaluate=()=>(this._collector.elements.forEach(this._evaluate.bind(this,e.ADDED)),this),this._collector=t,this._collectors=n,this._head=new We,this._tail=this._head,this._id=`${Math.floor(100*Math.random())}_${Date.now()}`,t.subscribe(((e,t)=>{this._paused||this._evaluate(e,t)}))}_evaluate(t,n){switch(ve(),t){case e.ADDED:this._head.attach(new f(this._collector,this),n);break;case e.MODIFIED:this._head.modified(n);break;case e.REMOVED:this._head.removed(n)}pe()}project(e,t=!0){return new gt(e,new Map([["styled",t]]),((e,t,n)=>{if(e===this._collector.name)throw new Error("Cannot project into the same collector");const i=this._collectors.get(e);if(!i)throw new s(e);return this._push(new Fe(i,n,t.get("styled")||!1))}))}hide(){return this._push(new U("display","none"))}showemove(e){if("string"==typeof e)return this._push(new qe(e));let t,n;return t=Array.isArray(e)?e:[e],t.forEach((e=>{n=this._push(new V(e))})),n||this}insert(e,t=!0){let n,s;if("string"==typeof e){const t=window.document.createElement("div");t.innerHTML=e,n=Array.prototype.slice.call(t.children)}else n=Array.isArray(e)?e:[e];return n.forEach((e=>{s=this._push(new R(e,t))})),s||this}inject(e,t=!0){let n;if("string"==typeof e){const t=window.document.createElement("div");t.innerHTML=e,n=Array.from(t.children)}else n=Array.isArray(e)?e:[e];return new gt(this._collector.name||"",new Map([["clone",t]]),((e,i,r,o=!1)=>{if(!this._collectors.get(e))throw new s(e);let a;const c=n.slice();return o&&c.reverse(),c.forEach((e=>{a=this._push(new P(e,r,t))})),a||this}))}click(){return this._push(new ot)}focus(){return this._push(new ct)}eypress(e){return this._push(new vt(e))}keydown(e){return this._push(new dt(e))}keyup(e){return this._push(new _t(e))}text(e){return this._push(new W(e))}html(e){return this._push(new J(e))}classes(e){let t=null;const n=e instanceof Map?e:Object.entries(e);for(const e of n)t=this._push(new N(e[0],e[1]));return null!=t?t:this}parent(e){return this._push(new Ke(e))}n(e,t){return this._push(new K(e,t))}offclass yt extends Ee{constructor(e,t){super(void 0,e,t)}add(e){this.takeResponsibilityForElement(e),this.updateObservers()}const Et=new c("CollectorBuilder");class bt{constructor(e,t,n,s,i){this._collectors=e,this._mutate=t,this._subject=n,this._scope=s,this._calls=i||[]}_clone(){return new bt(this._collectors,this._mutate,this._subject,this._scope,[...this._calls])}_call(e,t){const n=this._clone();return n._calls.push({fn:e,args:t}),n}atLeast(e){return this._call("atLeast",[e])}atMost(e){return this._call("atMost",[e])}exactly(e){return this._call("exactly",[e])}filter(e){return this._call("filter",[e])}map(e){return this._call("map",[e])}observeParent(e){return this._call("observeParent",[e])}subscribe(e){return this._call("subscribe",[e])}subscribeState(e){return this._call("subscribeState",[e])}validate(e){return this._call("validate",[e])}utate(e){const t=function(){let e="";for(;e.length<20;)e+=Math.random().toString(36).substring(2);return e}();return this.as(t),this._mutate(t,e)}as(e){let t;const s=this._scope?`${this._scope}.${e}`:e;if(this._collectors.has(s)){const e=this._collectors.get(s);e&&!e.destroyed&&(Et.warn(`Collector '${s}' already exists. Destroying existing collector.`),e.destroy())}if("string"==typeof this._subject)t=new be(this._subject,e);else{const s=new yt(e);if(this._subject instanceof HTMLElement)s.add(this._subject);else{if(!Array.isArray(this._subject)||!this._subject.every(())throw new n("'subject' must be a CSS selector, HTMLElement, or HTMLElement[]");this._subject.forEach((e=>s.add(e)))}t=s}return t.pause(),this._calls.forEach((),this._collectors.set(s,t),t.unpause(),t}}const Tt=new c("Mutate Library Bootstrap");function xt(e="mutate",t=!1){if(window.CustomEvent)try{const n=new CustomEvent("mutate-loaded",{detail:{source:e,skipped:t}});document.dispatchEvent(n)}catch(e){Tt.warn("Could not fire custom event")}}const It="",Ot=new Map,At=new Map,jt=new Map,Nt=new c("Mutate Library");function St(e,t,s){let i=e;if(s){if("string"!=typeof e)throw new n("'parent' cannot be specified when 'subject' is\n                                 a HTMLElement, HTMLElement[] or Function");const r=Ot.get(s);if(!(r&&r instanceof Ee))throw new n(`The specified parent collector '${s}' for '${t}' is not defined.`);if("string"!=typeof r.selector)throw new n("'parent' cannot be specified when the parents 'selector' property isn't a String.");i=`${r.selector} ${e}`}const r=t&&jt.has(t)?t:void 0,o=new bt(Ot,Dt,i,r);if(t&&t!=r){const e=o.as(t);return e.mutat),e}return o}function Dt(e,n){const i=Ot.get(e);if(void 0===i)throw new s(e);const r=`${e}${n}`,o=new wt(i,Ot);return n&&window.evolv.mutate.observe&&window.evolv.client.isActive(n).listen((e=>{e?o.reevaluate():(o.pause(),o.revert())})),Mt(r,o),i.subscribeState((e=>{e===t.DESTROYED&&(o.pause(),Ct(r))})),o}function Mt(e,t,n){const s=void 0===n?e:`${n}${e}`;At.get(s)?Mt(e,t,(null!=n?n:0)+1):At.set(s,t)}function Ct(e,t){const n=void 0===t?e:`${t}${e}`;At.get(n)&&(At.delete(n),Ct(e,(null!=t?t:0)+1))}function Lt(e,t,n){return t?(St(e,t),Dt(t,n)):St(e).mutate(n).get(e),St.ach(e)},St.destroy=()=>{Ot.forEach((e=>e.destroy()))},St.pause=()=>{Ot.forEach((e=>e.pause()))},St.unpause=()=>{Ot.forEach((e=>e.unpause()))},St.scope=e=>{const t=jt.get(e);if(t)return Nt.info(`Returning existing scope '${e}'`),t;const n={collect:(t,n,s)=>St(t,e+It+n,s),mutate:(t,n)=>Dt(e+It+t,n),$mu:(t,n,s)=>Lt(t,e+It+n,s)};return jt.set(e,n),n},Dt.get=e=>{const t=[];return At.forEach(((n,s)=>{s.endsWith(It+e)&&t.push(n)})),t},Dt.get=()=>[...At.values()],Dt.pause=()=>{At.forEach((e=>e.pause()))},Dt.revert=()=>{At.forEach((e=>e.revert()))},Dt.reevaluate=()=>{At.forEach((e=>e.reevaluate()))},Dt.se()))};var Pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?sele)}(e)};var Rt="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element")}),{})};var $t,Wt,Bt,Jt=Ut,Gt={},Kt={},Xt={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.fromEntries=void 0,Yt.fromEntries=Object.fromEntries||function(e){return e.t[1],e)),{})},$t=Xt,Wt=Pt&&Pt.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),Bt=Pt&&Pt.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||Wt(t,e,n)},Object.defineProperty($t,"__esModule",{value:!0}),Bt(Yt,$t),Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.normalizeObject=void 0;const Zt=Xt;Kt.normalizeObject=function e(t){try{JSON.stringify(t)}catch(e){if(e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON"))throw e}if(Array.isArray(t))returnt=>e(t)));if("object"!=typeof t||null===t)return t;const n=Object.entries(t).sort(((e,t)=>e[0].localeCompare(t[0],"en"))).map((t=>{const n=t[0],s=t[1];return"object"==typeof s?[n,e(s)]:[n,s]}));return Zt.fromEntries(n)};var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.hashCode=void 0,Qt.hashCode=function(e){let t=0;for(let n=0;n<e.length;n+=1)t=31*t+e.charCodeAt(n)<<0;return t};var en={};Object.defineProperty(en,"__esModule",{value:!0}),en.objectHash=void 0;const tn=Qt,nn=Kt;en.objectHash=function(e,t={}){const n=Object.assign({normalize:!0},t).normalize?nn.normalizeObject(e):e,s=JSON.stringify(n);return tn.hashCode(s)},function(e){var t=Pt&&Pt.__createBinding||(Object]=t[n]}),n=Pt&&Pt.__expon,e,s)};Object.defineProperty(e,"__esModule",{value:!0}),n(Kt,e),n(Qt,e),n(en,e)}(Gt);for(var sn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),on=0;on<sn.length;on++)rn[sn.charCodeAt(on)]=on;
/*!
     * Evolv Client for JavaScript v2.7.2-alpha-8b47df6 <https://github.com/evolv-ai/javascript-sdk>
     *
     * Copyright 2020-2023 Evolv Technology Solutions
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
consay(e)}function un(e,t){return function e(n,s){let i=[];return Object.keys(n).filter(t||function(){return!0}).forEach((function(t){let r=n[t],o=s?s+"."+t:t;i.push(o),ln(r)&&(i=i.concat(e(n[t],o)))})),i}(e,"")}function hn(e,t){return function e(t,n,s){let i=t[n];if(n===t.length-1)return delete s[i],!0;if(!(i in s))return!1;const r=e(t,n+1,s[i]);return r&&0===Object.keys(s[i]).length&&delete s[i],r}(e.split("."),0,t)}function dn(e,t){let n,s=t,i=e.split(".");for(let e=0;e<i.length;e++){let t=i[e];if(e===i.length-1){n=s[t];break}if(!(t in s))break;s=s[t]}return n}function fn(e,t,n){let s=n,i=e.split(".");for(let e=0;e<i.length;e++){let n=i[e];if(e===i.length-1){s[n]=t;break}n in s||(s[n]={}),s=s[n]}return t}function vn(e,t){const n={};return t.forEach((function(t){const s=t.split(".");let i=e;for(let e=0;e<s.length;e++){let r=i[s[e]];if(null==r)break;if(e===s.length-1){n[t]=r;break}i=r}})),function(e,t){function n(e,t,s){if("object"!=typeof e||null===e)return e;if(e._predicated_values){const n=s.join(".");for(let s=0;s<e._predicated_values.length;s++)if(t.has(n+"."+e._predicated_values[s]._predicate_assignment_id))return e._predicated_values[s]._value;return null}const i=Object.keys(e);for(let r=0;r<i.length;r++){const o=i[r],a=s.concat([o]);e[o]=n(e[o],t,a)}return e}n(e,t,[])}(n,t),n}function pn(e,t){return function(e){let t={};return Object.keys(e).f[n],t)})),t}(vn(e,t))}function _n(e,t){if(Object.assign)return Object.assign.apply(void 0,arguments);if(null==e)throw new TypeError("Cannot convert undefined or null to object");const n=Object(e);for(let e=1;e<arguments.length;e++){let t=arguments[e];if(null!=t)for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}return n}const mn=new Map,gn=new Map,wn=new Map;function yn(e){mn.has(e)||(mn.set(e,{}),gn.set(e,{}),wn.set(e,{}))}function En(e,t,n){yn(e);const s=mn.get(e),i=wn.get(e);s[t]?s[t].push(n):s[t]=[n],i[t]&&n.apply(void 0,i[t])}function bn(e,t,n){yn(e);const s=gn.get(e),i=wn.get(e);i[t]?n.apply(void 0,i[t]):s[t]?s.push(n):s[t]=[n]}function Tn(e,t,n){yn(e);const s=mn.get(e)[t],i=s.fin e===n}));-1!==i&&s.splice(i,1)}function xn(e,t){yn(e);const n=mn.get(e),s=gn.get(e),i=wn.get(e),r=[].slice.call(arguments);r.shift(),i[t]=r;const o=s[t];for(;o&&o.length;){let e=o.shift();try{e.apply(void 0,r)}catch(e){console.error(e),console.log("Failed to invoke one time handler of %s",t)}}const a=n[t];a&&a.forEach((function(e){try{e.apply(void 0,r)}catch(e){console.error(e),console.log("Failed to invoke handler of %s",t)}}))}const In="context.changed",On="context.initialized",An="context.value.removed",jn="context.value.added",Nn="context.value.changed";function Sn(e){let t,nized")}Object.defineProperty(this,"uiturn t}}),Object.defineProperty(this,"remoteContext",{get:function(){return cn(n)}}),Object.defineProperty(this,"localContex cn(s)}}),this.initialize=function(e,r,o){if(i)throw new Error("Evolv: The context is already initialized");t=e,n=r?cn(r):{},s=o?cn(o):{},i=!0,xn(this,On,this.resolve())},this.destroy=function(){n=void 0,s=void 0,xn(this,"context.destroyed",this)},this.resolve=function(){return r(),cn(an(s,n))},this.set=function(e,t,i){r();const o=i?s:n,a=dn(e,o);if(a===t||function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(a,t))return!1;fn(e,t,o);const c=this.resolve();return void 0===a?xn(this,jn,e,t,i,c):xn(this,Nn,e,t,a,i,c),xn(this,In,c),!0},this.update=function(t,i){0===Object.keys(t).length&&t.constructor===Object&&(console.warn("[Deprecation] Calling evolv.context.update({}) to reapply variants has been deprecated. Please use 'evolv.rerun()' instead."),e.clearActiveKeys()),r();let o=i?s:n;const a=function(e,t){return function e(n,s){let i={};return Object.keys(n).fiturn!0}).forEach((function(t){let r=n[t],o=s?s+"."+t:t;ln(r)?i=_n(i,e(n[t],o)):i[o]=r})),i}(e,"")}(t),c={};Object.keys(a).f]=o[e]})),i?(s=an(s,t),o=s):(n=an(n,t),o=n);const l=this,u=this.resolve();Object.keys(a).forEach((function(e){void 0===c[e]?xn(l,jn,e,a[e],i,u):c[e]!==o[e]&&xn(l,Nn,e,a[e],c[e],i,u)})),xn(this,In,u)},this.remove=function(e){r();const t=hn(e,s),i=hn(e,n),o=t||i;if(o){const t=this.resolve();xn(this,An,e,!i,t),xn(this,In,t)}return o},this.get=function(e){r(),"confirmations"!==e&&"contaminations"!==e||console.warn('[Deprecation] Retrieving confirmations and contaminations from the Evolv context with keys "confirmations"',' and "contaminations" is deprecated. Please use "experiments.confirmations" and "experiments.contaminations" instead.');const t=dn(e,n);return function(e,t){let n=t,s=e.split(".");for(let e=0;e<s.length;e++){let t=s[e];if(e===s.length-1)return t in n;if(!(t in n))break;n=n[t]}return!1}(e,n)?t:dn(e,s)},this.contains=function(e){return r(),e in n||e in s},this.pushToArray=function(e,t,i,o){o=o||50,r();const a=(dn(e,i?s:n)||[]).concat([t]),c=a.slice(a.length-o);return this.set(e,c,i)}}chis,e)};function Mn(e){this._responseArgs=null,this._errored=!1,this._thens=[],this._catches=[],this._finallys=[];const t=function(e,t){if(this._responseArgs)throw Error("Response already sent");const n=Array.prototype.slice.call(arguments);n.shift(),n.shift(),this._errored=e,this._responseArgs=n,t.forEach(Dn.bind(this,n)),this._finallys.forEach(Dn.bind(this,n))},n=t.bind(this,!0,this._catches),s=t.bind(this,!1,this._thens);try{e(s,n)}catch(e){n(e)}this.then=function(e){return this._responseArgs&&!this._errored?(Dn.call(this,this._responseArgs,e),this):(this._thens.push(e),this)},this.catch=function(e){return this._responseArgs&&this._errored?(Dn.call(this,this._responseArgs,e),this):(this._catches.push(e),this)},this.finally=function(e){return this._responseArgs?(Dn.call(this,this._responseArgs,e),this):(this._finallys.push(e),this)}}function Cn(e){if(Array.isArray(e))return e;if(e instanceof Map){const t=[];return e.f[n,e])})),t}if(e instanceof Set||e instanceof NodeList){const t=[];return(e.forEach||Ln).call(e,(function(e){t.push(e)})),t}return[]}function Ln(e,t){t=t||window;for(let n=0;n<this.length;n+=1)e.call(t,this[n],this)}function Pn(e,t,n){if(e.startsWith)return e.startsWith(t,n);const s=n>0?0|n:0;return e.substring(s,s+t.length)===t}function kn(e,t,n){if(e.endsWith)return e.endsWith(t,n);const s=void 0===n||n>e.length?e.length:n;return e.substring(s-t.length,s)===t}function Rn(e,t){const n=t||new Set;return e.forEach((function(e){n.add(e)})),n}Mn.createPromise=function(e){return new("undefined"!=typeof Promise?Promise:Mn)(e)};var Fn=function(e){return"undefined"!=typeof atob?atob(e):Buffer.from(e,"base64").toStrin=="),i};const zn={contains:function(e,t){return void 0!==e&&e.indexOf(t)>=0}, 0!==e e===t}ull!=e},greatrn e>t},greater_than_or_en e>=t},is_true:function(e){return!0===e},i!1===e},notull==e},not_contains:function(e,t){return void 0!==e&&!(e.indexOf(t)>=0)},not_ 0===e},no e!==t},not_regetch(t)},not_regex64_match:function(e,t){return!Hn(e,t)},not_starn(e,t)},kv_contains:function(e,t){return t[0]in e&&e[t[0]].indexOf(t[1])>=0},kv_equal:function(e,t){return e[t[0]]===t[1]},kv_not_contains:function(e,t){return!(t[0]in e&&e[t[0]].indexOf(t[1])>=0)},kv_not_equal:function(e,t){return e[t[0]]!==t[1]},lern e<t},less_than_or_en e<=t},loosn e==t},loose_non e!=t},regetch(t)},regex64_match:Hn,starn(edes(e)}des(e)}};function Hn(e,t){try{const n=Fn(t);return e&&null!==e.match(function(e){if(!Pn(e,"/"))return new RegExp(e);const t=e.lastIndexOf("/");return new RegExp(e.substring(1,t),e.substring(t+1))}(n))}catch(e){return!1}}function qn(e,t){if(void 0===e)return;const n=t.indexOf(".");if(0===n)throw new Error("Invalid variant key: "+t);return-1===n?t in e?e[t]:void 0:qn(e[t.substring(0,n)],t.substring(n+1))}function Un(e,t){const n=qn(e,t.field);return!(Pn(t.operator,"kv_")&&!n)&&!!zn[t.operator](n,t.value)}function $n(e,t,n,s,i){let r;return"combinator"in n?Wn(e,n,s,i):(r=Un(e,n),(r?s:i).add({id:t.id,index:n.index,field:n.field}),r)}function Wn(e,t,n,s){const i=t.rules;if(!i)return!0;for(let r=0;r<i.length;r++){const o=$n(e,t,i[r],n,s);if(o&&"or"===t.combinator)return!0;if(!o&&"and"===t.combinator)return!1}return"and"===t.combinator}function Bn(e,t){const n={passed:new Set,failed:new Set,touched:new Set};return n.rejected=!Wn(e,t,n.passed,n.failed),n.passed.forEach((function(e){n.touched.add(e.field)})),n.failed.ffield)})),n}function Jn(e){return Mn.createPromise((function(t,n){const s=new XMLHttpRequest;var i,r;s.addEventListener("load",(function(){if(this.status>=400)n(this.statusText||"Evolv: Request failed "+this.status);else if(200===this.status)t(JSON.parse(this.responseText));else if(202===this.status)t();else{const e="Evolv: Invalid status "+this.status+" for response "+this.responseText;console.error(e),n(e)}})),s.addEventListener("error",n),s.open(e.method,e.url,!e.sync),"POST"!==e.method.toUpperCase()&&"PUT"!==e.method.toUpperCase()||s.setRequestHeader("Content-Type",e.encoding),s.setRequestHeader("Accept","application/json"),e.signature&&s.setRequestHeader("Signature",(i=e.keyId,r=e.signature,'keyId="'+i+'",algorithm="hmac-sha384",signature="'+r+'"')),s.send(e.paylCrypto}function Kn(e){if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).buffer;const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0,s=e.length;t<s;t++)n[t]=e.charCodeAt(t);return t}function Xn(e){return e.then?e:Mn.createPromise((functiing())}e.oncesult)},e.onerror=s,e.onabort=s}))}function Yn(e,t){const n=t&&"function"==typeof t.beforeOptions?t.beforeOptions(e):e;return Mn.createPromise((function(e,t){const s=_n({},n);let i;s.encoding=s.encoding||"application/json; charset=UTF-8",i=s.data?"object"==typeof s.data?"application/x-www-form-urlencoded"===s.encoding?Object.keys(s.datta[e])})).join("&"):JSON.stringify(s.data):s.data:"",s.payload=i,s.key?function(e,t){const n={name:"HMAC",hash:"SHA-384"},s=["sign"],i=Gn();return Mn.createPromise((function(r,o){Xn(i.subtle.importKey("raw",Kn(e),n,!0,s)).then((function(e){Xn(i.subtle.sign(n,e,t)Vn(e))})).catch(o)})).catch(o)}))}(s.key,Kn(s.payload)).then((function(n){Jn(_n({signature:n},s)).then(e).catch(t)})).catch(t):Jn(s).then(e).catch(t)}))}let Zn=!1;const Qn="config",es="genome",ts="request.failed",ns="effective.genome.updated";function ss(e,t,n,s){s=s||!1;let i=!1;return e.experiments.forEach((function(e){const r=e.get(t);r&&(s?r.forEach((function(e){n&&!Pn(e,n)||(i=!0)})):r.has(n)&&(i=!0))})),i}function is(e,t,n){e.fadd(e)}))}function rs(e){return function(){try{e.apply(void 0,arguments)}catch(e){console.ls(t)}function ls(e,t,n){const s=[],i=[];function r(e){return!n||Pn(e,n)}return e.forEach((function(e){r(e)&&s.push(e)})),t.fush(e)})),{current:s,previous:i}}function us(e,t){t||e.clear(),e.fete(n)}))}function hs(e){const t=[];return e.experiments.forEach((function(e,n){const s=e.get("entry");s&&s.size>0&&t.push(n)})),t}function ds(e,t,n){const s=new Map;if(!n._experiments||!n._experiments.length)return s;function i(e,t,n,s,r){if(t&&"object"==typeof t){if(t._predicate){if(Bn(e,t._predicate).rejected)return void s.push(n)}t._is_entry_point&&r.push(n),Object.keys(t).forEach((function(o){Pn(o,"_")||i(e,t[o],n?n+"."+o:o,s,r)}))}}const r=t.resolve();return n._experiments.forEach((function(e){const t=_n({},e);delete t.id;const n={disabled:[],entry:[]};i(r,t,"",n.disabled,n.entry),s.set(e.id,n)})),s}function fs(e,t,n,s,i){ds(0,t,n).forEach((function(e,n){const r=i.experiments.get(n);if(!r)return;const o=r.get("loaded"),a=new Set;o&&o.forEach((function(e){a.add(e)}));const c=function(e,t){const n={active:[],entry:[]};return t.forEach((function(t){e.disabled.some((function(e){return Pn(t,e)}))||(n.active.push(t),e.entrn(t,e)}))&&n.entry.push(t))})),n}(e,a),l=new Set;c.active.forEach((function(e){l.add(e)}));const u=(s||[]).id===n}))[0];u&&function(e,t,n){const s=t.genome;if(!s)return;const i=e.resolve();n.forEach((function(e){const t=e.split(".");let r=s;for(let e=0;e<t.length;e++)r=r[t[e]]||{};const o=r._predicated_values,a=new Set;if(o){let t;for(let e=0;e<o.length;e++){const n=o[e],s=n._predicate?n._predicate:{combinator:"and",rules:Cn(ined"}}))},r=Bn(i,s);if(Rn(r.touched,a),!r.rejected){t=n._predicate_assignment_id;break}}if(!t)return;const s=e+"."+t;n.add(s)}}))}(t,u,l);const h=new Set;c.entry.forEach((function(e){h.add(e)})),r.set("active",l),r.set("entry",h)}))}function vs(e){const t=e.version||1,n=e.endpoint+"/"+e.environment,s=e.auth&&e.auth.id,i=e.auth&&e.auth.secret;let r,o=null,a=!1,c=!1,l=!0,u={},h={},d=null,f=null,v={},p={},_=new Set,m=new Set,g=new Set,w=new Set,y=new Set,E=!1,b=!1,T=!1,x=!1;const I={needed:new Set,requested:new Set,experiments:new Map},O={needed:new Set,requested:new Set,experiments:new Map};let A=[],j=[],N=new Set;function S(){if(!f)return;if(Zn)return;Zn=!0,fs(0,r,f,d,O);const e=function(e,t){let n={};const s=new Set;return e.forEach((function(e,i){const r=e.get("active");if(i in t&&r){const e=pn(cn(t[i]),r);Object.keys(e).length&&(s.add(i),n=an(n,e))}})),{effectiveGenome:n,activeEids:s}}(O.experiments,u);h=e.effectiveGenome,_=e.activeEids,g.clear(),Rn(m,g),m.clear(),y.clear(),Rn(w,y),w.clear(),O.experiments.forEach((function(e){const t=e.get("active");if(t){t.forEach((function(e){m.add(e)}));const e=vn(h,t);Object.keys(e).forEach((function(t){w.add(t.concat(":",Gt.objectHash(e[t])))}))}}));const t=[];m.forEach((function(e){t.push(e)})),r.set("keys.active",t);const n=[];w.fush(e)})),r.set("variants.active",n),xn(r,ns,h),N.for(e)}})),Zn=!1}function D(t){f=t,b=!1,"direct"===e.clientType&&"_client"in f&&(o=f._client),v=f._display_names||{},p=f._client_config||{},t._experiments.forEach((function(e){!function(e,t){const n=_n({},t);delete n.id;const s=new Set,i=new Map;i.set("loaded",s),e.experiments.set(t.id,i),un(n,(function(e){return!Pn(e,"_")||"_values"===e||"_initializers"===e})).zers")})).fi,""))}))}(O,e)})),T=!0}function M(e,n,s){let i=e?O:I;n.forEach(i.requested.delete.bind(i.requested)),e?(xn(r,"config.request.received",n),D(s)):(xn(r,"genome.request.received",n),function(e){const t=[],n=[];d=e,E=!1,e.forEach((function(e){const s=_n({},e);if(delete s.genome,delete s.audience_query,t.push(s),s.excluded)return void n.push(s.eid);u[s.eid]=e.genome;const i=new Set,r=new Map;r.set("loaded",i),I.experiments.set(s.eid,r),un(e.e,"_")})).forEach(i.add.bind(i))})),r.set("experiments.allocations",t),r.set("experiments.exclusions",n),x=!0}(s)),S();let o=[],a=[];A.concat(j).forEach((function(s){if(s.source===es){if(!s.key)return;if(1===t){if(!x||!T)return}else if(!ss(I,"loaded",s.key))return}let i=!!f;s.key&&(i=ss(O,"loaded",s.key,!0)),(i||e&&(1===t||n.indexOf(s.key)>=0))&&(s.resolve(s.transform(s.key,h,f)),(s.source===Qn?o:a).push(s))})),A=A.f(e)<0})),j=j.filter((function(e){return o.indexOf(e)<0})),xn(r,e?"config.updated":"genome.updated",s)}function C(e,n,s){let i,o;console.log(s),xn(r,ts,e?Qn:es,n,s),i=e?O:I,is(n,i.requested,i.needed),e?(o=j,b=!0):(o=A,E=!0);let a=[],c=[];A.concat(j).forEach((function(e){if(1===t||n.indexOf(e.key)>=0){(e.source===Qn?a:c).push(e);try{e.reject(s)}catch(e){console.error(e)}}})),A=A.filter((function(e){return c.indexOf(e)>=0})),j=j.(e)>=0})),e?j=o:A=o}function L(o){if(a)if(o||l){if(l=!1,O.needed.size||1===t){const t=[];O.needed.forEach(t.push.bind(t)),O.needed.clear(),Yn({method:"get",url:n+"/"+r.uid+"/configuration.json",keyId:s,key:i},e.hooks).then(M.bind(this,!0,t)).catch(C.bind(this,!0,t)),is(t,O.needed,O.requested),xn(r,"config.request.sent",t)}if(I.needed.size||1===t){const t=[];I.needed.forEach(t.push.bind(t)),I.needed.clear(),Yn({method:"get",url:n+"/"+r.uid+"/allocations",keyId:s,key:i},e.hooks).then(M.bind(this,!1,t)).catch(C.bind(this,!1,t)),is(t,I.needed,I.requested),xn(r,"genome.request.sent",t)}c=!1}else c||(c=!0,setTimeout(L.bind(void 0,!0)));else l=l||o}function P(e,n,s){let i=null,r=null;const o=Mn.createP=rs(t)}));let a,c,l;o.listen=function(e){return,tete(e)}};let u=!1;if(e===es?(a=I,c=E,l=A,u=ss(a,"loaded",s)||1===t&&x):(a=O,c=b,l=j,u=ss(a,"loaded",s,!0)||1===t&&T),u)return i(n(s,h,f)),o;if(c)return r("The values could not be retrieved"),o;const d={key:s,resolve:i,reject:r,transform:n,source:e};return l.push(d),1===t||a.needed.has(s)||a.requested.has(s)||(a.needed.add(s),e===es&&O.needed.add(s),L()),o}function k(e){if(!e||!Array.isArray(e)||0===e.length)return void r.set("view",null);const t=r.resolve();for(let n=0;n<e.length;n+=1){const s=e[n];if(!Bn(t,s.predicate).rejected)return void r.set("view",s.key)}r.set("view",null)}if(Object.defineProperty(this,"configuration",{get:function(){return f},configurable:!0}),Object.defineProperty(this,"activeEids",{get:function(){return _},configurable:!0}),this.destroy=function(){u=void 0,h=void 0,d=void 0,f=void 0,v=void 0,p=void 0,T=!1,x=!1,_=void 0,m=void 0,g=void 0,delete I.needed,delete I.requested,delete I.experiments,delete O.needed,delete O.requested,delete O.experiments,A.forEach((function(e){e.reject()})),A=void 0,j.fject()})),j=void 0,N=void 0,xn(r,"store.destroyed",this),r=void 0},1===t)L(!0);else if(2!==e.version)throw new Error("Unsupported API version");Object.defineProperty(this,"statcn(f)}}}),this.fetch=L.bind(this,!0),this.preload=function(e,t,n){e.forEach(O.needed.add.bind(O.needed)),t||e.forEach(I.needed.add.bind(I.needed)),L(n)},this.initialize=function(e){if(a)throw new Error("Evolv: The store has already been initialized.");r=e,a=!0,L(),En(r,In,S),this.getConfig("_views").listen(k)},this.getClientn o}))},this.getDisplayName=function(e,t){return P.call(this,Qn,(function(){return dn(e+"."+t,v)}))},this.getEnvConfig=function(e){return P.call(tn(e,p)}))},this.subscribe=N.add.bind(N),this.unsubscribe=N.delete.bind(N),this.get=P.bind(this,es,os.bind(this)),this.getConfig=P.bind(this,Qn,as.bind(this)),this.activeEntryPoints=P.bind(this,Qn,hs.bind(this,O)),this.isActive=P.bind(this,Qn,cs.bind(this,m)),this.getActiveKeys=P.bind(this,Qn,ls.bind(this,m,g)),this.clearActiveKeys=us.bind(this,m),this.reevaluateContext=S.bind(this)}const ps=/\/(v\d+)\/\w+\/([a-z]+)$/i;function _s(e,t,n){const s=e.match(ps),i=s&&"v1"===s[1]&&"events"===s[2],r=_n({},{blockTransmit:!1,clientName:"javascript-sdk"},(o=n,Object.keys(o).[t]),e}),{})));var o;let a,c=r.blockTransmit,l=[];function u(e,t,n){return"undefined"!=typeof window&&window.navigator.sendBeacon?window.navigator.sendBeacon(e,t):function(e,t,n){return Yn({method:"post",url:e,data:t,sync:n}).catch((function(e){console.log(e)})),!0}(e,t,n)}function h(n=3){let s=!1;if(null!=this){const e=this.event&&this.event.type;s="unload"===e||"beforeunload"===e}if(!l.length||c)return;let o=l;if(l=[],a&&clearTimeout(a),a=void 0,i)o.forEach((function(t){let i=t;i=t.payload||{},i.type=t.type,!u(e,JSON.stringify(i),s)&&n&&(n-=1,l.push(t),console.error("Evolv: Unable to send event beacon"))}));else for(;;){const i=o.slice(0,25);if(0===i.length)break;if(!u(e,JSON.stringify((d=i,{uid:t.uid,client:r.clientName,messages:d})),s)&&n){n-=1,l=i,console.error("Evolv: Unable to send analytics beacon");break}o=o.slice(25)}var d;l.length&&(a=setTimeout((function(){h(n)}),100))}"undefined"!=typeof window&&(window.addEventListener("unload",h),window.addEventListener("beforeunload",h)),this.unblockA!1,h()},this.emit=function(e,t,n){l.push({type:e,payload:t,timestamp:Date.now()}),n?h():a||(a=setTimeout(h,100))},this.flush=h,this.clearM){l=[]}}const ms=6e4,gs=[[{key:["dateTime","local","time","minute"],value:"getMinutes"},{key:["dateTime","utc","time","minute"],value:"getUTCMinutes"}],[{key:["dateTime","local","time","hour"],value:"getHours"},{key:["dateTime","utc","time","hour"],value:"getUTCHours"},{key:["dateTime","local","hourOfDay"],value:"getHours"},{key:["dateTime","utc","hourOfDay"],value:"getUTCHours"}],[{key:["dateTime","local","date","day"],value:"getDate"},{key:["dateTime","utc","date","day"],value:"getUTCDate"},{key:["dateTime","local","dayOfWeek"],value:"getDay"},{key:["dateTime","utc","dayOfWeek"],value:"getUTCDay"}],[{key:["dateTime","local","date","month"],value:"getMonth",transform:function(e){return e+1}},{key:["dateTime","utc","date","month"],value:"getUTCMonth",trrn e+1}}],[{key:["dateTime","local","date","year"],value:"getFullYear"},{key:["dateTime","utc","date","year"],value:"getUTCFullYear"}]];function ws(e,t,n,s){const i=s.key[n];if(n===s.key.length-1)return void(e[i]=s.transform?s.transform(t[s.value]()):t[s.value]());let r=e[i];r||(r={},e[i]=r),ws(r,t,n+1,s)}function ys(e,t){let n;function s(){let t=new Date;const s={},i=ws.bind(null,s,t,0);gs.some((function(e){let s=e[0].value,r=e[1].value;if(n&&n[s]()===t[s]()&&n[r]()===t[r]())return!0;e.forEach(i)})),e.update(s,!0),n=t}void 0===t&&(t=!0);let i=new Date;const r=Math.ceil(i.getTime()/ms)*ms-i.getTime()+1;s(),t&&setT(s,ms)}),r)}function Es(e){let t=!1;const n=function(e){const t=_n({},{clientType:"direct"},e);if(!t.environment)throw new Error('"environment" must be specified');return"autoConfirm"in t||(t.autoConfirm=!0),t.version=t.version||1,t.endpoint=(t.endpoint&&t.endpoint.replace(/\/$/,"")||"https://participants.evolv.ai")+"/v"+t.version,t.analytics="analytics"in t?t.analytics:t.version>1,t.hooks=_n({},t.hooks),t}(e),s=n.store||new vs(n),i=n.context||new Sn(s),r={blockTransmit:n.bufferEvents,clientName:n.clientName},o=n.analytics?new _s(n.endpoint+"/"+n.environment+"/data",i,r):null,a=n.beacon||new _s(n.endpoint+"/"+n.environment+"/events",i,r);Object.defineProperty(this,"context",{get:function(){return i}}),Object.defineProperty(this,"environment",{get:function(){return n.environment}}),this.on=En.bind(void 0,i),this.once=bn.bind(void 0,i),this.off=Tn.bind(void 0,i),this.preload=s.preload.bind(s),this.get=s.get.bind(s),this.isActive=s.isActive.bind(s),this.getActiveKeys=s.getActiveKeys.bind(s),this.clearActiveKeys=s.clearActiveKeys.bind(s),this.reevaluateContext=s.reevaluateContext.bind(s),this.getConfig=s.getConfig.bind(s),this.getDisplayName=s.getDisplayName.bind(s),this.getEnvConfig=s.getEnvConfig.bind(s),this.emit=function(e,t,n){i.pushToArray("events",{type:e,timestamp:(new Date).getTime()}),a.emit(e,_n({uid:i.uid,metadata:t}),n),xn(i,Es.EVENT_EMITTED,e,t)},this.confirm=function(){return new Mn.createPromise((function(e){En(i,ns,(function(){const t=(i.remoteContext.experiments||{}).allocations;s.configuration&&t&&t.length?s.activeEntryPoints().then((function(n){if(!n.length)return void e();const r=i.get("experiments.confirmations")||[],o=r.map((function(e){return e.cid})),c=(i.get("experiments.contaminations")||[]).map((function(e){return e.cid})),l=t.filter((function(e){return o.indexOf(e.cid)<0&&c.indexOf(e.cid)<0&&s.activeEids.has(e.eid)&&n.indexOf(e.eid)>=0}));if(!l.length)return void e();const u=(new Date).getTime(),hamp:u}}));i.set("experiments.confirmations",h.concat(r)),l.f.cid})})),a.flush(),xn(i,Es.CONFIRMED),e()})):e()}))}))},this.contaminate=function(e,t){const n=(i.remoteContext.experiments||{}).allocations;if(!n||!n.length)return;if(e&&!e.reason)throw new Error("Evolv: contamination details must include a reason");const r=i.get("experiments.contaminations")||[],o=r.map((function(e){return e.cid})),c=n.filter((function(e){return o.indexOf(e.cid)<0&&(t||s.activeEids.has(e.eid))}));if(!c.length)return;const l=(new Date).getTime(),uson:e}}));i.set("experiments.contaminations",u.concat(r)),c.forEach((function(t){a.emit("contamination",{uid:t.uid,eid:t.eid,cid:t.cid,contaminationReason:e})})),a.flush(),xn(i,Es.CONTAMINATED)},this.initialize=function(e,r,a){if(t)throw new Error("Evolv: Client is already initialized");if(!e)throw new Error('Evolv: "uid" must be specified');i.initialize(e,r,a),s.initialize(i),ys(i,n.pollForTimeUpdates),s.getClientContext().then((function(e){if(!e)return;const t=_n({},e);t.browser&&(t.web={client:{browser:t.browser}},delete t.browser),i.update(t,!1)}))text")})),n.analytics&&(Entext)})),En(i,jn,(function(e,t,n,s){s||o.emit(e,{key:t,value:n})})),En(i,Nn,(function(e,t,n,s,i){i||o.emit(e,{key:t,value:n})})),En(i,An,(function(e,t,n){n||o.emit(e,{key:t})}))),n.autoConfirm&&(this.confirm(),En(i,ts,this.contaminate.bind(this))),t=!0,xn(i,Es.INITIALIZED,n)},this.flush=function(){a.flush(),n.analytics&&o.flush()},this.allolush()},this.destroy=function(){var e;this.flush(),s.destroy(),i.destroy(),e=i,mn.delete(e),gn.delete(e),wn.delete(e)}}Es.INITIALIZED="initialized",Es.CONFIRMED="confirmed",Es.CONTAMINATED="contaminated",Es.EVENT_EMITTED="event.emitted";const bs=funers=[]}return e.prototype.waitFor=function(e,t){this.dispose();let n;return function s(){cancelAnimationFrame(n);try{etor(e)}))?t(null):n=requestAnimationFrame(s)}catch(e){t(e)}}(),this.addDisposer((function(){cancelAnimationFrame(n)}))},e.prototype.addDh(e),e},e.prototype.ers=[,"_"))}const xs=function(e){return-1!==["immediate","legacy"].indexOf(e.timistatus},Os=function(e){return-1!==["runnable","running"].indexOf(e.status)},As=1,js=3,Ns=4,Ss={loading:As,interactive:js,complete:Ns,immediate:As,legacy:2,"dom-content-loaded":js,"wait-for-elements":js,loaded:Ns},Ds=function(){function e(e){this.container=e,this.initialized=!1,this.timedOut=!1,this.runLevel=Ss[document.readyState],this.runs=[],this.functions=[],this.deferred=null,this.onReadyStateChange=function(){switch(document.readyState){case"interactive":this.setRunLevel(js);break;case"complete":this.setRunLevel(Ns)}}.bind(this),document.addEventListener("readystatechange",this.onReadyStateChange),this.doLegacyTiming(),e.options.variantsLoaded&&e.options.variantsLoaded.then(function(){this.loadFunctions()}.bind(this)),this.loadFunctions()}return e.prototype.setRunLevel=function(e){const t=this.runLevel;this.runLevel=Math.max(t,e),this.runLevel!==t&&this.execute()},e.prototype.areVariantsDefined=function(){if("undefined"==typeof window)return!1;const e=(window||{}).evolv;return void 0!==e&&e.javascript&&e.javascript.variants},e.prototype.loadFunctions=function(){if(!this.areVariantsDefined()||this.initialized)return;if(this.initialized=!0,this.hasTimeoutElapsed())return;const e=window.evolv.javascript.variants;Object.keys(e).sort((function(e,t){return e.length-t.length})).forEach(function(t){const n=e[t];this.functions.push({key:t,timing:n.timing||"legacy",status:"not-runnable",runNumber:null,calls:0,handler:n,disposer:null})}.bind(this)),this.deferred&&this.updateFunctionsToRun(this.deferred)},e.prototype.updateFunctionsToRun=function(e){this.initialized?(this.functions.forEach(function(t){-1===e.indexOf(t.key)&&this.unschedule(t.key)}.bind(this)),e.ule(e)}.bind(this)),this.execute()):this.deferred=e},e.prototype.schedule=function(e){const t=this.functions.filter((function(t){return t.key===e}))[0];t&&"not-runnable"===t.status&&(t.status="runnable")},e.prototype.unschedule=function(e){const t=this.functions.filter((function(t){return t.key===e}))[0];t.status="not-runnable",t.disposer&&t.disposer()},e.prototype.unscheduleByPrefix=function(e){this.functions.Ts(e))})).e.key)}.bind(this))},e.prototype.execute=function(){const e=this.container.client,t=function(e){return Ss[e.timing]<=this.runLevel}.bind(this),n=this.functions.filter(t).filter(Is),s=this.functions.filter(t).filter(Os).filter(x e.key}));this.runs.push(Object.freeze({neededToConfirm:s}));const i=this.runs.length;n.forEach(function(t){t.status="running",t.runNumber=i,t.calls+=1;const n=this.getExecutor(t);t.disposer=n.disposer,n.promislved")})).catch((function(n){const s=n&&n.message?n.message:"";t.status="rejected",e.contaminate({reason:"error-thrown",details:s}),console.warn("[Evolv]: An error occurred while applying a javascript mutation. "+n)})).ion(i)}.bind(this))}.bind(this))},e.prototype.getExecutor=function(e){const t=e.handler,n=new bs;return{promise:Mn.createPromise((function(s,i){const r=function(t){t&&i(t);try{const t={key:(n=e.key,n.replace(/^evolv_/,"").replace(/_/g,"."))};!0!==e.handler.call(t,s,i)&&s()}catch(t){i(t)}var n};if("wait-for-elements"===t.timing){const e=t.timingSelectors||[];n.waitFor(e,r)}else r()})),disposer:n.dispose.bind(n)}},e.prototype.checkForConfirmation=function(e){const t=this.runs[e-1];this.functions.e.key)}))tatus)}))&&this.confirm()},e.prototype.firm()},e.prototype.hasTimeoutElapsed=function(){if(this.timedOut)return!0;const e=this.container,t=e.client,n=e.options,s=e._performance,i=(new Date).getTime(),r=s?s.timing.domContentLoadedEventStart:0,o=n.timeoutThreshold||6e4;return r>0&&i>r+o&&(this.timedOut=!0,t.contaminate({reason:"timeout-exceeded",details:"current time: "+i+", domContentLoadedEventStart: "+r+", threshold: "+o}),console.warn("[Evolv]: Loading of variants timed out."),!0)},e.prototype.doLegacyTiming=function(){const e=this.container.options.legacyPollingInterval,t=function(){const n=this.hasTimeoutElapsed();if(this.loadFunctions(),this.initialized&&!n)this.setRunLevel(Ss.legacy);else if(!n){if("undefined"==typeof window)return;setTimeout(t,e||100)}}.bind(this);t()},e}();function Ms(e,t){let n=[],s=!1;const i=e.client;const r=i.environment,o=(a=r,document.querySelector('link[href *= "'+a+'"][href *= "assets.css"]'));var a;js"]')}(r),l=t||new Ds(e);this.rerun=function(e){e=e||"web",l.unscheduleByPrefix(e),i.clearActiveKeys(e),i.reevaluateContext()};let u=!1;i.getActiveKeys("web").listen((function(e){const t=e.current.map(Tslength}));n.forEach((function(e){document.documentElement.classList.remove(e)})),o&&(t.fadd(e)})),n=t.slice()),c?l.updateFunctionsToRun(t):o&&(s||(i.confirm(),s=!0)),function(e){e.current.forEach((function(e){i.get(e).then((function(e){!u&&e&&"redirect"===e.type&&e.target_url&&(u=!0,i.confirm().then((function(){const t=e.include_query_parameters?window.location.search:"",n=e.target_url+t;new URL(n,window.location.href).href!==window.location.href&&(window.location=n)}))){u=!1})))}))}))}(e)}))}function Cs(e,t,n,s){e.context.set("web.url",window.location.href),Object.defineProperty(this,"client",{get:function(){return e}}),Object.defineProperty(this,"context",{get:function(){return e.context}});const i={client:e,options:t||{},_performance:n||window.performance};Ms.call(this,i,s)}function Ls(e,t){let n=t,s={} e?i:s};function o(t,n){return null}("evolv:"+t):(n?window.sessionStorage:window.localStorage).getItem("evolv:"+t)}this.store=function(t,s,i){if(n){if(e&&!i){return function(e,t,n,s){var i=e+"="+encodeURIComponent(t);"number"==typeof n&&(i+="; max-age="+24*n*60*60+"; path=/"+(s?"; domain="+s:""),document.cookie=i)}("evolv:"+t,s,365,"true"===e?"":e)}(i?window.sessionStorage:window.localStorage).setItem("evolv:"+t,s)}else r(i)[t]={value:s,session:i}},this.retrieve=function(e,t){let s=o(e,t);if(void 0!==s)return s;if(!n){let n=r(t);return n[e]&&n[e].value}return s},this.allowPersistentStorage=function(){if(n)return;n=!0;let e=this.store;Object.keys(s).forEach((function(t){e(t,s[t].value,!1)})),Object.keys(i).fue,!0)})),s={},i={}}}const Ps="evolvCandidateToken=(([0-9]+)_([0-9]+)_([0-9a-z]+))";const ks="evolvBlockExecution=(true|false)";const Rs="evolvPreviewCid=([0-9a-f]+(?:(?:%3a|:)[0-9a-f]+)+)";const Fs=[{shouldActivate:function(e){const t=window.location.hash.match(new RegExp(Ps));return t&&e===t[4]},activate:function(){const e=window.location.hash.match(new RegExp(Ps));if(e){const t=e[1];window.sessionStorage.setItem("evolv:candidateToken",t),window.location.href=window.location.href.replace(new RegExp("#?&?evolvCandidateToken=(([0-9]+)_([0-9]+)_([0-9a-z]+))"),"")}}},{shouldActivate:function(){const e=new RegExp(ks);return!!(window.location.hash.match(e)||window.location.search.match(e))},activate:function(){const e=new RegExp(ks),t=window.location.hash.match(e)||window.location.search.match(e);t&&(window.sessionStorage.setItem("evolv:blockExecution",t[1]),window.location.href=window.location.href.replace(new RegExp("#?\\??&?evolvBlockExecution=(true|false)"),""))}},{shouldActivate:function(){return window.location.hash.match(new RegExp(Rs))},activate:function(){const e=window.location.hash.match(new RegExp(Rs));if(e){const t=e[1];window.sessionStorage.setItem("evolv:previewCid",t),window.location.href=window.location.href.replace(new RegExp("#?&?evolvPreviewCid=([0-9a-f]+(?:(?:%3a|:)[0-9a-f]+)+)"),"")}}}],Vs=Object.assign||function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const n=Object(e);for(let e=1;e<arguments.length;e++){let t=arguments[e];if(null!=t)for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}return n};function zs(e){!function(e){const t=sessionStorage.getItem("evolv:fe");if(t){const n=JSON.parse(t);e.context.set("fired_events",n,!0)}}(e),e.on("event.emitted",(function(t,n){!function(e,t){e.context.set("fired_events."+t,!0,!0);const n=sessionStorage.getItem("evolv:fe");let s={};if(n){const e=JSON.parse(n);e[t]=!0,s=e}else s[t]=!0;sessionStorage.setItem("evolv:fe",JSON.stringify(s))}(e,n)}))}window.objectAssign=Vs;function Hs(e,t,n,s,i,r=0){!function(e,t,n,s,i){const r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",qs(e,t,n,s,i)),document.head.appendChild(r)}(e,t,n,s,i);const o=qs(e,t,n,s,i);if(Us(o)&&window.MutationObserver){const a=new window.MutationObserver((function(c){let l=!1;c.forEach((function(c){c.removedNodes.forEach((function(c){"LINK"===c.nodeName&&c.href===o&&r<3&&!l&&(console.warn("Evolv AI: CSS removed, re-adding"),a.disconnect(),l=!0,Hs(e,t,n,s,i,r+1)),"LINK"===c.nodeName&&c.href===o&&3===r&&console.warn("Evolv AI: re-added CSS the maximum number of times")}))}))}));a.observe(Us(o).parentNode,{childList:!0}),setTnect()}),1e4)}}function qs(e,t,n,s,i){const r=i?"?previewcid="+i:"";return e.replace(/\/$/,"")+"/v"+n+"/"+t+"/"+s+"/assets+'"]')}const $s="engaged",Ws="evolv:engagement-check";function Bs(e){!function(e){e.on("event.emitted",(function(t,n,s){s&&s.engagedUser&&Js(e)}))}(e),function(e,t,n){e.getEnvConfig("_all.engagement_threshold",s||n)}))e,t,n)}))}(e,window.performance,1e4),function(e){e.on("context.value.changed",(function(t,n,s,i){"web.url"===n&&s!==i&&Js(e)}))}(e),function(e,t){if(t.getItem(Ws))return void Js(e);t.setItem(Ws,!0)}(e,sessionStorage)}function Js(e){e.context.get($s)||e.context.set($s,!0)}function Gs(e,t,n){let s;s=t&&t.now?t.now():0,setT{Js(e)}),Math.max(n-s,0))}function Ks(e,t,n){let s;return e.context&&t in e.context?s=e[t]:(s=e.retrieve(t,n),s||(s=Math.round(1e8*Math.random())+"_"+(new Date).getTime(),e.store(t,s,n))),s}const Xs={environment:void 0,endpoint:"https://participants.evolv.ai/",uid:void 0,lazyUid:!1,requireConsent:!1,useCookies:void 0,js:!0,css:!0,pushstate:!1,timeout:void 0};function Ys(e){window.evolv=window.evolv||{};const t=window.evolv,n=Vs({},Xs,e);if(t.setUid=function(e){e&&(t.context?console.warn("Evolv: Cannot set UID because another client instance already exists"):(n.uid=e,Ys(n)))},t.onSsrClientInitialized=function(){t.ssrInititialized?console.info("Evolv: Client from SSR has already been initialized. Ignoring this call"):(t.ssrInititialized=!0,console.info("Evolv: Client from SSR has initialized. Proceeding with bootstrapping"),Ys(n))},window.evolv.ssr&&!window.evolv.client)return void console.info("Evolv: Deferring client initialization to SSR cliee.uid)}(n))return;if(function(e){if(e.instancesCount?e.instancesCount++:e.instancesCount=1,window.CustomEvent)try{const t=new CustomEvent("webloader-loaded",{detail:e.instancesCount});document.dispatchEvent(t)}catch(e){console.warn("Evolv: Could not fire custom event")}if(e.instancesCount>1)return console.warn("Multiple Evolv instances - please verify you have only loaded Evolv once"),!0}(t))return;t.markCoents()};let s=new Ls(n.useCookies,!n.requireConsent);t.store||(t.store=s.store.bind(s)),t.retrieve||(t.retrieve=s.retrieve.bind(s)),Fs.fvate()}));if("true"===window.sessionStorage.getItem("evolv:blockExecution"))return;const i=window.sessionStorage.getItem("evolv:candidateToken"),r=i||n.environment,o=i?void 0:window.sessionStorage.getItem("evolv:previewCid");let a=!!i||n.js,c=!!i||n.css,l=n.pushstate,u=n.endpoint;const h=t.context?t.context.uid:n.uid||Ks(t,"uid",!1),d=a?function(e,t,n,s,i){return Mn.createPromise((function(r,o){const a=i?"?previewcid="+i:"",c=document.createElement("script");c.type="text/javascript",c.src=e.replace(/\/$/,"")+"/v"+n+"/"+t+"/"+s+"/assets.js"+a,c.defer=!0,c.onload=r,c.onerror=o,document.head.appendChild(c)}))}(u,r,1,h,o):Mn.createPe){e()}));d.then((function(){document.documentElement.dataset.evolvJs="ready"}))rored"})),c&&Hs(u,r,1,h,o);let f=t.client;if(!f){let e={environment:r,endpoint:u,version:1,autoConfirm:!1,analytics:!0,bufferEvents:n.requireConsent,clientName:"asset-manager",hooks:{beforeOptions:function(e){return o?Vs(e,{url:e.url+"?previewcid="+o}):e}}};f=new Es(e),f.initialize(h),Object.defineProperty(window.evolv,"client",{get:function(){return f}}),Object.defineProperty(window.evolv,"context",{get:function(){return f.context}})}l&&function(e){const t=history.pushState,n=history.repla.href)}function i(e){const t=Array.prototype.slice.call(arguments,1);let n;e.apply(history,t);const s="stateupdate_evolv";"function"==typeof CustomEvent?n=new CustomEvent(s,{}):(n=document.createEvent("CustomEvent"),n.initEvent(s,!1,!1,{})),window.dispatchEvent(n)}history.pushState=i.bind(this,t),history.replaceState=i.bind(this,n),window.addEventListener("popstate",s),window.addEventListener("stateupdate_evolv",s)}(f),zs(f),f.context.set("webloader.js",a),f.context.set("webloader.css",c);const v=new Cs(f,{timeoutThreshold:n.timeout,variantsLoaded:d});Object.defineProperty(window.evolv,"assetManager",{get:function(){return v}}),window.evolv.rerun=v.rerun.bind(ve()}))}function Qs(e){return e&&(e.dataset&&"evolvEnvironment"in e.dataset||ei(e))}function ei(e){let t=e.src.match(/[?&]environment=([^&]+)/);return!(!t||!t.length)&&t[1]}!function(e){if("undefined"==typeof Map)return;const t=function(){if(document.currentScript&&Qs(document.currentScript))return document.currentScript;for(let e=0;e<document.scripts.length;e++){const t=document.scripts[e];if(Qs(t))return t}throw new Error("[Evolv] Environment not specified")}(),n=function(e){return e.dataset.evolvEnvironment=e.dataset.evolvEnvironment||ei(e),e.dataset}(t),s=function(e){const t={};for(let n in e){const s=Zs(n);switch(n){case"evolvLazyUid":case"evolvRequireConsent":case"evolvJs":case"evolvCss":case"evolvPushstate":t[s]="true"===e[n];break;case"evolvTimeout":{const i=+e[n];t[s]=isNaN(i)?void 0:i;break}default:t[s]=e[n]}}return t}(n);Ys(s),e&&e(s)}((function(){!function(e={}){var t;if(null!==(t=window.evolv)&&void 0!==t||(window.evolv={}),window.evolv.mutate)return Tt.info("Skipping bootstrap: mutate has already bootstrapped"),void xt(e.source,!0);window.evolv.collect=Object.assign(St,Object.assign({discoveryTime:3e4,discoveryPollInterval:50},e.collect)),window.evolv.mutate=Object.assign(Dt,Object.assign({observe:!0},e.mutate)),window.evolv.$mu=Object.assign(Lt,Object.assign({},e.$mu)),window.$mu=window.evolv.$mu,xt(e.source)}({source:"asset-manager"})}))}();
