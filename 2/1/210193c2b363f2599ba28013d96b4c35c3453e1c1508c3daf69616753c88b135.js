/*! For license information please see 3.js.LICENSE.txt */
(self.webpackChunkFBPublication=self.webpackChunkFBPublication||[]).push([[3],{462:function(t,e){"use strict";e.Z={computed:{fullPdf:function(){return this.$store.state.downloads.allPagesVisible&&this.$store.getters["downloads/getFullPdf"]},customFiles:function(){return this.$store.getters["downloads/getCustomFiles"]},pageFiles:function(){return this.$store.state.downloads.currentPagesVisible&&this.$store.getters["downloads/getPageFiles"]},windowTitle:function(){return this.$i18n.t("SaveWindow.TITLE")},fullTooltip:function(){return this.$t("SaveWindow.SAVE_FULL_PUBLICATION_TOOLTIP")},pagesTitle:function(){return{full:this.$t("SaveWindow.FULL_PUBLICATION"),left:this.$t("SaveWindow.SAVE_LEFT_PAGE"),right:this.$t("SaveWindow.SAVE_RIGHT_PAGE"),one:this.$t("SaveWindow.SAVE_CURRENT_PAGE")}},pagesTooltip:pagerState:function(){return this.$store.getters["pager/legacyState"]}}}},6411:function(t,e,i){"use strict";var s=i(1443);e.Z={methods:{movePagerLeft:function(t){var e=t.target;(0,s.oJ)(this.$store,{target:e})},movePagerRight:function(t){var e=t.target;(0,s.X0)(this.$store,{target:e})},movePagerLeftmost:function(t){var e=t.target,i=void 0===e?null:e,o=t.navTarget,r=void 0!==o&&o;(0,s.tc)(this.$store,{target:i,navTarget:r})},movePagerRightmost:function(t){var e=t.target,i=void 0===e?null:e,o=t.navTarget,r=void 0!==o&&o;(0,s.w9)(this.$store,{target:i,navTarget:r})}}}},3866:function(t,e){"use strict";e.Z={props:{itemData:{type:[Object,Array],required:!0}},name:"SearchResultItem",computed:{isItemDataArray:pageId:function(){return this.isItemDataArray?this.itemData[0].pageId:this.itemData.pageId},textData:function(){return this.isItemDataArray?this.itemData[0].relevance<=this.itemData[1].relevance?this.itemData[0].text:this.itemData[1].text:this.itemData.text},title:function(){var t;if(this.$store.state.pager.spreadMode)if(this.isItemDataArray){var e=this.$store.getters["pages/pageCaptionById"]({id:this.itemData[0].pageId.toString()}),i=this.$store.getters["pages/pageCaptionById"]({id:this.itemData[1].pageId.toString()});if(this.$store.state.book.rightToLeft){var s=[i,e];e=s[0],i=s[1]}t=e+" - "+i}else{var o=this.$store.getters["pages/pageIndexById"](this.pageId.toString()),r=o%2==0?o-1:o+1,n=this.$store.getters["pages/pageIdByIndex"](r),a=this.$store.getters["pages/pageCaptionById"]({id:this.pageId.toString()});if(n){var h=this.$store.getters["pages/pageCaptionById"]({id:n.toString()});if(this.$store.state.book.rightToLeft){var l=[h,a];a=l[0],h=l[1]}t=o>r?h+" - "+a:a+" - "+h}else t=a}else t=this.$store.getters["pages/pageCaptionById"]({id:this.pageId.toString(),forceFullWide:this.itemData.isWide&&!this.itemData.isDivided,widePageSecondHalf:this.itemData.widePageSecondHalf});return this.$i18n.t("SearchToolWindow.PAGE_NUMBER",{0:t})},moreResults:function(){var t=this.isItemDataArray?this.itemData[0].count+this.itemData[1].count:this.itemData.count;return t>1?"..."+this.$i18n.tc("SearchToolWindow.MORE_RESULTS",t-1,{0:t-1}):null}}}},2248:function(t,e,i){"use strict";var s=i(6382),o=i.n(s);e.Z={data:function(){return{tempTimeout:null,showClear:!1,inputDir:this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"}},computed:{results:function(){return this.$store.state.search.results},progress:function(){return this.$store.getters["search/getProgress"]},isSearching:isInitializing:function(){return this.$store.getters["search/isInitializing"]},preloaderVisible:searchQueryIsEmpty:exactMatch:{get:function(){return this.$store.state.search.exactMatch},set:function(t){this.$store.dispatch("search/setExactMatch",{component:"search",value:t}),this.updateSearchQuery()}}},methods:{input:function(t){if(t){if(this.showClear=!0,!t.trim())return}else this.showClear=!1;this.tempTimeout&&clearTimeout(this.tempTimeout),this.tempTimeout=setTimeout((function(){this.$refs.searchInput&&(this.tempTimeout=null,this.$root.log("search.query",this.$refs.searchInput.value),this.updateSearchQuery())}).bind(this),500),this.setInputDir()},updateSearchQuery:function(){var t=this.$refs.searchInput.value;t=t.trim().replace(/\s*(\s)\s*/gm,"$1"),this.$store.dispatch("search/setQuery",{value:t})},clear:function(){this.$refs.searchInput.value&&(this.$store.dispatch("search/setQuery",{value:""}),this.$refs.searchInput.value="",this.showClear=!1,this.$nextTick(this.focusInput)),this.setInputDir()},setInputDir:function(){if(this.$refs.searchInput.value){var t=o().getDirection(this.$refs.searchInput.value);this.inputDir=t?"ltr"===t?"ltr":"rtl":"ltr"}else this.inputDir=this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"}}}},663:function(t,e,i){"use strict";var s=i(6382),o=i.n(s),r=i(7503);e.Z={props:{data:{type:Object,required:!0}},components:{thumb:r.Z},computed:{singleMode:function(){return this.$store.state.pager.singleMode},textDirection:function(){return o().getDirection(this.data.caption)},itemStyles:function(){var t={};return this.data.size&&(t.width=this.data.size.width+"px",t.height=this.data.size.height+"px"),t},slideMode:function(){return this.$store.state.pager.slideMode},contentCrop:function(){return this.slideMode&&this.$store.state.book.contentCrop}}}},3549:function(t,e){"use strict";e.Z={computed:{title:function(){return this.$i18n.t("ThumbnailsToolWindow.TITLE")},isRtl:function(){return this.$store.state.book.rightToLeft},pagerState:function(){return this.$store.getters["pager/state"]},singleMode:function(){return this.pagerState.singleMode},slideMode:function(){return this.pagerState.slideMode},mode:contentCrop:function(){return this.slideMode&&this.$store.state.book.contentCrop},thumbSizes:function(){return this.getThumbSizes(!1)},thumbDoubleSizes:hasPages:function(){return this.$store.getters["pages/pagesCount"]>0},numerationOffset:function(){return this.$store.state.book.numerationOffset},lowercaseRomans:function(){return this.$store.state.workspace.lowercaseRomans}}}},3760:function(t,e,i){"use strict";var s=i(6382),o=i.n(s),r=i(8531);e.Z={props:{itemData:{type:Object,required:!0},depth:{type:[Number,String],default:0}},computed:{width:function(){return this.depth<=2?214-20*this.depth:154},pageLabel:function(){return this.$store.getters["pages/pageCaptionByIndex"](this.itemData.page-1)},itemTitle:function(){return"<span>"+(0,r.jJ)((0,r.m9)(this.itemData.title)).replace(/\n/g,"</span><span>")+"</span>"},textDirection:isLocaleRtl:function(){return this.$store.getters["i18n/isLocaleRtl"]}},methods:{toggleOpen:refresh:function(){this.$parent.refresh()}},updated:function(){this.$parent.refresh()},mounted:function(){this.$parent.refresh()}}},8002:function(t,e){"use strict";e.Z={computed:{tocItems:function(){return this.$store.state.toc.enabled?this.$store.state.toc.children:[]},level2Items:function(){if(this.$store.state.toc.children)for(var t=0,e=this.$store.state.toc.children.length;t<e;t++)if(this.$store.state.toc.children[t].children)return!0;return!1}},methods:{updateHeight:}},562:function(t,e){"use strict";var i;e.Z={computed:{isPagerMoveWatcherActive:function(){return this.$store.state.pager.isMoveWatcherActive},isMobile:function(){return this.$store.getters["workspace/isMobile"]},animationType:function(){return this.$store.state.workspace.animationType},pagerState:function(){return this.$store.getters["pager/state"]}},watch:{pagerState:function(t){var e=this;if(i&&t.zoomMode)return this.$store.dispatch("pager/setMoveWatcher",!1),void(i=!1);var s=this.isMobile?["thumbnails","toc"]:[];this.isPagerMoveWatcherActive&&-1!==s.indexOf(t.target)&&(i=!0,this.$nextTick((function(){e.$root.$emit("bottomMenu:zoomIn")})))},animationType:function(t,e){var s=this;this.isPagerMoveWatcherActive&&!t&&"pagerMove"===e&&(i=!0,this.$nextTick((function(){s.$root.$emit("bottomMenu:zoomIn"),"history"===s.$store.state.pager.lastTarget&&(s.$store.dispatch("pager/setMoveWatcher",!1),i=!1)})))}}}},1083:function(t,e,i){i(4147).register({accessibility:{width:36,height:36,viewBox:"0 0 24 24",data:'<path pid="0" d="M20.5 6c-2.61.7-5.67 1-8.5 1s-5.89-.3-8.5-1L3 8c1.86.5 4 .83 6 1v13h2v-6h2v6h2V9c2-.17 4.14-.5 6-1l-.5-2zM12 6c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/>'}})},8384:function(t,e,i){i(4147).register({"add-note":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M3 3v13h6l3 5 3-5h6V3H3zm5 6h3V6h2v3h3v2h-3v3h-2v-3H8V9z"/>'}})},607:function(t,e,i){i(4147).register({"arrow-down":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M12 16.772c.31 0 .62-.124.836-.341l7.597-7.132c.496-.465.527-1.24.062-1.767-.465-.496-1.24-.527-1.767-.062l-6.729 6.356-6.76-6.325c-.495-.465-1.27-.434-1.767.062-.465.496-.434 1.271.062 1.767l7.597 7.132c.248.186.558.31.868.31z"/>'}})},464:function(t,e,i){i(4147).register({"book-first":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M10.468 10.61a2.005 2.005 0 000 2.838l6.262 6.258a1 1 0 00.71.294 1 1 0 00.71-.294 1 1 0 000-1.42l-6.263-6.258 6.319-6.315a1.005 1.005 0 00-1.42-1.42l-6.318 6.316zM6 5.98v12.04c0 .556.45 1.004 1.004 1.004.556 0 1.005-.448 1.005-1.004V5.98c0-.555-.449-1.004-1.005-1.004C6.45 4.976 6 5.425 6 5.98z"/>'}})},925:function(t,e,i){i(4147).register({"book-last":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M8.22 4.303A1.003 1.003 0 106.8 5.721l6.313 6.307-6.256 6.252a1 1 0 00.71 1.711 1 1 0 00.709-.294l6.255-6.251a2.004 2.004 0 000-2.836L8.22 4.303zm9.77.68c-.555 0-1.003.45-1.003 1.003v12.028a1.002 1.002 0 102.006 0V5.986c0-.553-.449-1.003-1.003-1.003z"/>'}})},9036:function(t,e,i){i(4147).register({"book-next":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M8.872 22.991a1.799 1.799 0 01-1.272-3.07l7.884-7.885-7.956-7.957a1.798 1.798 0 112.543-2.543l8.592 8.593c.509.508.789 1.186.789 1.908 0 .721-.28 1.4-.789 1.907l-8.52 8.52a1.79 1.79 0 01-1.271.527z"/>'}})},6965:function(t,e,i){i(4147).register({"book-prev":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M14.312 22.461l-8.519-8.52a2.676 2.676 0 01-.788-1.905c0-.721.28-1.4.788-1.908l8.59-8.592a1.8 1.8 0 012.543 2.543l-7.954 7.956 7.882 7.882a1.8 1.8 0 01-2.542 2.544z"/>'}})},2731:function(t,e,i){i(4147).register({cancel:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M3 4.414L10.586 12 3 19.586 4.414 21 12 13.414 19.586 21 21 19.586 13.414 12 21 4.414 19.586 3 12 10.586 4.414 3z"/>'}})},3374:function(t,e,i){i(4147).register({"chevron-right":{width:24,height:24,viewBox:"0 0 24 24",data:'<path pid="0" fill-rule="evenodd" clip-rule="evenodd" d="M9.663 6.033a1 1 0 011.414 0l5.26 5.26a1 1 0 010 1.414l-5.26 5.26a1 1 0 01-1.414-1.414L14.216 12 9.663 7.447a1 1 0 010-1.414z" _fill="#354353"/>'}})},1691:function(t,e,i){i(4147).register({cross:{width:24,height:24,viewBox:"0 0 24 24",data:'<path pid="0" fill-rule="evenodd" clip-rule="evenodd" d="M16.707 7.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414-1.414l8-8a1 1 0 011.414 0z" _fill="#354353"/><path pid="1" fill-rule="evenodd" clip-rule="evenodd" d="M7.293 7.293a1 1 0 011.414 0l8 8a1 1 0 01-1.414 1.414l-8-8a1 1 0 010-1.414z" _fill="#354353"/>'}})},5274:function(t,e,i){i(4147).register({"down-arrow":{width:16,height:16,viewBox:"0 0 16 16",data:'<path pid="0" d="M13.998 5.003H2.009l5.983 5.99 6.006-5.99"/>'}})},2209:function(t,e,i){i(4147).register({drag:{width:16,height:16,viewBox:"0 0 100 100",data:'<path pid="0" d="M24.6 63.2c1.4 1.5 3.8 1.6 5.3.2s1.6-3.8.2-5.3l-.2-.2-4.2-4.2h21v21l-4.2-4.2c-1.4-1.5-3.8-1.6-5.3-.2-1.5 1.4-1.6 3.8-.2 5.3l.2.2 10.6 10.6c1.5 1.5 3.8 1.5 5.3 0l10.5-10.6c1.5-1.4 1.6-3.8.2-5.3-1.4-1.5-3.8-1.6-5.3-.2l-.2.2-4.2 4.2v-21h21L71 57.9c-1.5 1.4-1.6 3.8-.2 5.3 1.4 1.5 3.8 1.6 5.3.2l.2-.2 10.6-10.6c1.5-1.5 1.5-3.8 0-5.3L76.2 36.7c-1.4-1.5-3.8-1.6-5.3-.2-1.5 1.4-1.6 3.8-.2 5.3l.2.2 4.2 4.2h-21v-21l4.2 4.2c1.4 1.5 3.8 1.6 5.3.2s1.6-3.8.2-5.3l-.2-.2-10.5-10.5c-1.5-1.5-3.8-1.5-5.3 0L37.2 24.2c-1.5 1.4-1.6 3.8-.2 5.3 1.4 1.5 3.8 1.6 5.3.2l.2-.2 4.2-4.2v21h-21l4.2-4.2c1.5-1.4 1.6-3.8.2-5.3-1.4-1.5-3.8-1.6-5.3-.2l-.2.2L14 47.3c-1.5 1.5-1.5 3.8 0 5.3l10.6 10.6z"/>'}})},9074:function(t,e,i){i(4147).register({equalizer:{width:100,height:100,viewBox:"0 0 100 100",data:'<path pid="0" d="M76.667 23.333V20a3.344 3.344 0 00-3.334-3.333H60A3.344 3.344 0 0056.667 20v3.333H10V30h46.667v3.333c0 1.833 1.5 3.333 3.333 3.333h13.333c1.833 0 3.334-1.5 3.334-3.333V30H90v-6.667H76.667zM70 30h-6.667v-6.667H70V30zM43.333 46.667v-3.333C43.333 41.5 41.833 40 40 40H26.667a3.344 3.344 0 00-3.334 3.333v3.333H10v6.667h13.333v3.332a3.344 3.344 0 003.334 3.334H40c1.833 0 3.333-1.5 3.333-3.334v-3.332H90v-6.667H43.333zm-6.666 6.667H30v-6.667h6.667v6.667zM70 70v-3.334a3.343 3.343 0 00-3.333-3.332H53.333A3.343 3.343 0 0050 66.666V70H10v6.666h40V80a3.345 3.345 0 003.333 3.334h13.334A3.345 3.345 0 0070 80v-3.334h20V70H70zm-6.667 6.666h-6.666V70h6.666v6.666z"/>'}})},5903:function(t,e,i){i(4147).register({fullscreen:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M6.733 5.1l2.1-2.1H3v5.833l2.1-2.1 2.8 2.8A1.167 1.167 0 109.533 7.9l-2.8-2.8zM18.9 17.328l-2.8-2.869a1.18 1.18 0 00-1.633-.23 1.135 1.135 0 000 1.837l2.916 2.754L15.167 21H21v-5.738l-2.1 2.066zm-3.014-7.664l2.854-2.806L21 8.845V3h-5.947l2.141 2.104L14.34 7.91a1.155 1.155 0 000 1.637.96.96 0 001.546.117zm-7.857 4.673L5.222 17.26 3 15.156v5.847h5.847l-2.105-2.105 2.924-2.807a1.17 1.17 0 000-1.637 1.052 1.052 0 00-1.637-.117z"/>'}})},5843:function(t,e,i){i(4147).register({"mobile-left":{width:16,height:16,viewBox:"0 0 24 40",data:'<path pid="0" d="M19.172 38L2.583 21.414a2.006 2.006 0 010-2.828L19.168 2l2.828 2.828L6.826 20 22 35.172 19.172 38z"/>'}})},9117:function(t,e,i){i(4147).register({"mobile-right":{width:16,height:16,viewBox:"0 0 24 40",data:'<path pid="0" d="M4.828 2l16.589 16.586c.777.778.777 2.05 0 2.828L4.832 38l-2.828-2.828L17.174 20 2 4.828 4.828 2z"/>'}})},2150:function(t,e,i){i(4147).register({"note-content":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M5.6 7.673c-.96 0-1.6-.534-1.6-1.335 0-.8.64-1.334 1.6-1.334h12.8c.96 0 1.6.534 1.6 1.334 0 .801-.64 1.335-1.6 1.335H5.6zm7.543 6.673h-7.62C4.61 14.346 4 13.812 4 13.012c0-.801.61-1.335 1.524-1.335h7.619c.914 0 1.524.534 1.524 1.335 0 .8-.61 1.334-1.524 1.334zM0 2v15.902h7.5L12 24l4.5-6.098H24V2H0z"/>'}})},6722:function(t,e,i){i(4147).register({"open-link":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M4 5.5C4 4.75 4.75 4 5.5 4H12v2H7c-.42 0-1 .583-1 1.005V17c0 .422.58 1 1 1h10c.42 0 1-.578 1-1v-5h2v6.5c0 .75-.75 1.5-1.5 1.5h-13c-.75 0-1.5-.75-1.5-1.75V5.5zM13.715 3H21l-.002 7.428L18.33 7.74 13.11 13 11 10.874l5.264-5.305L13.715 3z"/>'}})},5958:function(t,e,i){i(4147).register({"rounded-close":{width:16,height:16,viewBox:"0 0 16 16",data:'<path pid="0" d="M8.003 1.007A6.996 6.996 0 1015 8.003a6.988 6.988 0 00-6.98-6.996h-.016zm2.881 8.89a.312.312 0 010 .493l-.494.494a.312.312 0 01-.494 0L8.003 8.991 6.11 10.884a.312.312 0 01-.494 0l-.493-.494a.312.312 0 010-.494l1.893-1.893L5.123 6.11a.304.304 0 010-.494l.493-.493a.304.304 0 01.494 0l1.893 1.893 1.893-1.893a.312.312 0 01.494 0l.494.493a.312.312 0 010 .494L8.991 8.003l1.893 1.893z"/>'}})},6010:function(t,e,i){i(4147).register({search:{width:24,height:24,viewBox:"0 0 24 24",data:'<path pid="0" d="M15.49 17.61A8.144 8.144 0 0111.14 19c-4.452-.102-8.038-3.625-8.14-8 .036-4.35 3.575-7.89 8-8 4.425.112 7.965 3.65 8 8a7.813 7.813 0 01-1.38 4.499l4.451 4.45-2.121 2.122-4.46-4.46zM11.104 17c3.3-.09 5.919-2.757 5.895-6-.026-3.263-2.681-5.916-6-6-3.319.083-5.973 2.737-6 6 .077 3.281 2.766 5.923 6.105 6z"/>'}})},169:function(t,e,i){i(4147).register({text:{width:16,height:16,viewBox:"0 0 30 30",data:'<g fill-rule="evenodd"><path pid="0" fill-rule="nonzero" d="M25.642 16.116a1.647 1.647 0 00-.267-.716c-.208-.287-.532-.43-.97-.43-.625 0-1.053.31-1.283.931-.121.33-.182.768-.182 1.315 0 .521.06.94.182 1.257.222.59.638.885 1.25.885.434 0 .743-.117.925-.351.182-.235.293-.539.332-.912h1.894c-.043.564-.247 1.098-.612 1.602-.581.811-1.443 1.217-2.584 1.217-1.142 0-1.982-.338-2.52-1.016-.538-.677-.807-1.556-.807-2.636 0-1.22.297-2.168.892-2.845s1.415-1.016 2.46-1.016c.89 0 1.619.2 2.185.599.567.4.902 1.105 1.006 2.116h-1.901z"/><path pid="1" d="M3 8h16v15H3V8zm12.9 5.414c-.517 0-.942.109-1.276.326-.282.173-.54.425-.775.755v-3.412H12v9.584h1.816v-.892c.248.347.478.59.69.729.356.234.827.351 1.413.351.933 0 1.66-.362 2.181-1.087.521-.725.782-1.638.782-2.74 0-1.064-.264-1.932-.792-2.605-.527-.673-1.257-1.009-2.19-1.009zm-.476 5.912c-.55 0-.96-.2-1.23-.6-.27-.399-.404-.902-.404-1.51 0-.516.065-.937.196-1.263.251-.612.714-.918 1.386-.918.664 0 1.12.313 1.368.938.13.33.195.746.195 1.25 0 .629-.132 1.137-.397 1.523-.265.386-.636.58-1.114.58zm-7.03-2.11v.69c-.012.62-.187 1.048-.524 1.283a1.89 1.89 0 01-1.103.351.992.992 0 01-.641-.211c-.176-.141-.264-.37-.264-.687 0-.356.143-.619.43-.788.169-.1.449-.184.84-.254l.416-.078c.209-.039.372-.081.492-.127.12-.045.237-.105.355-.179zm-1.126-.866l-.631.078c-.716.092-1.259.243-1.628.456C4.336 17.274 4 17.906 4 18.78c0 .672.21 1.192.628 1.559.42.367.95.55 1.592.55.504 0 .955-.115 1.354-.345.334-.195.63-.432.886-.71.013.16.03.304.052.43.021.126.06.26.117.404h2.018v-.274a.665.665 0 01-.273-.215c-.061-.086-.098-.251-.111-.494a31.08 31.08 0 01-.013-.82v-3.256c0-.855-.302-1.437-.905-1.745-.603-.308-1.293-.462-2.07-.462-1.194 0-2.036.313-2.526.938-.308.399-.482.909-.521 1.53h1.79c.044-.274.13-.491.26-.652.183-.217.493-.325.932-.325.39 0 .686.055.888.166.202.11.303.311.303.602 0 .239-.132.415-.397.527-.148.066-.393.12-.736.163zM19 5h1v21h-1zM17 4h5v1h-5zM17 26h5v1h-5z"/></g>'}})},5606:function(t,e,i){i(4147).register({thumbnails:{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M9 3c.6 0 1 .4 1 1v5c0 .6-.4 1-1 1H4c-.6 0-1-.4-1-1V4c0-.6.4-1 1-1h5zm11 0c.6 0 1 .4 1 1v5c0 .6-.4 1-1 1h-5c-.6 0-1-.4-1-1V4c0-.6.4-1 1-1h5zM9 14c.6 0 1 .4 1 1v5c0 .6-.4 1-1 1H4c-.6 0-1-.4-1-1v-5c0-.6.4-1 1-1h5zm11 0c.6 0 1 .4 1 1v5c0 .6-.4 1-1 1h-5c-.6 0-1-.4-1-1v-5c0-.6.4-1 1-1h5z"/>'}})},6062:function(t,e,i){i(4147).register({"trash-can":{width:16,height:16,viewBox:"0 0 24 24",data:'<path pid="0" d="M15.976 17.862c0 .607-.414 1.138-.885 1.138H8.893c-.47 0-.869-.513-.869-1.12L8.002 8H16l-.023 9.862zM20 6h-5V4.466C15 3.66 14.853 3 14.013 3h-3.858C9.315 3 9 3.659 9 4.466V6H4v2h2v10c0 1.843 1.153 3 2.893 3h6.198C16.84 21 18 19.852 18 18V8h2V6z"/><path pid="1" d="M13 18h1V9h-1zM10 18h1V9h-1z"/>'}})},6177:function(t,e,i){i(4147).register({error:{width:16,height:16,viewBox:"0 0 128 128",data:'<path pid="0" d="M64 23.9a39.47 39.47 0 11-39.47 39.47A39.52 39.52 0 0164 23.9m0-10a49.47 49.47 0 1049.47 49.47A49.47 49.47 0 0064 13.9z"/><path pid="1" d="M30.207 90.732l60.507-60.508 7.071 7.072-60.507 60.507z"/>'}})},5284:function(t,e,i){i(4147).register({"made-with":{width:119,height:30,viewBox:"0 0 119 30",data:'<path pid="0" d="M27.102 26.063c0 .29-.233.525-.525.525h-1.052a.525.525 0 01-.525-.525V15.052c0-.355.3-.526.497-.526h6.337c.29 0 .524.232.524.524v1.05c0 .289-.237.524-.524.524H27.21a.105.105 0 00-.108.102v2.68c0 .056.047.102.105.102h3.836c.29 0 .527.233.527.524v1.05c0 .29-.234.524-.527.524h-3.836a.105.105 0 00-.105.106v4.35zm8.672-11.538A.525.525 0 0035.25 14l-1.052.13c-.396.05-.525.236-.525.525 0 0-.006 9.801 0 9.833-.006 1.37 1.127 2.104 2.102 2.099.976-.006.528.005.528.005a.53.53 0 00.523-.529V24.89c0-.23-.187-.4-.387-.4h-.27a.384.384 0 01-.394-.374v-9.59zm3.416 2.885h1.053c.29 0 .524.183.524.526v8.126c0 .29-.233.526-.524.526H39.19a.526.526 0 01-.525-.526v-8.126c0-.29.14-.526.525-.526zm-.525-2.36a1.051 1.051 0 012.102 0 1.05 1.05 0 01-2.102 0zm4.207 5.198a25.36 25.36 0 01-.002-.32v.364a3.148 3.148 0 013.154-3.144h.788a3.151 3.151 0 013.153 3.146v3.41a3.149 3.149 0 01-3.155 3.146h-.26a3.49 3.49 0 01-1.578-.387v2.484c0 .29-.233.525-.525.525h-1.052a.525.525 0 01-.525-.525v-8.652c0-.016 0-.031.002-.047zm2.1.044v3.414c0 .72.589 1.308 1.314 1.308h.263c.725 0 1.314-.585 1.314-1.308v-3.414c0-.72-.589-1.309-1.314-1.309h-.263c-.725 0-1.314.586-1.314 1.309zm6.835-.044a25.36 25.36 0 01-.002-.32v.364a3.148 3.148 0 013.153-3.144h.789a3.152 3.152 0 013.154 3.146v3.41a3.149 3.149 0 01-3.156 3.146h-.26c-.552 0-1.091-.14-1.578-.387v2.484c0 .29-.233.525-.525.525H52.33a.525.525 0 01-.525-.525v-8.652c0-.016 0-.031.002-.047zm2.1.044v3.414c0 .72.589 1.308 1.315 1.308h.262c.725 0 1.314-.585 1.314-1.308v-3.414c0-.72-.588-1.309-1.314-1.309h-.262c-.726 0-1.315.586-1.315 1.309zm7.358-2.882h1.052c.29 0 .525.183.525.526v8.126c0 .29-.233.526-.525.526h-1.052a.526.526 0 01-.525-.526v-8.126c0-.29.165-.526.525-.526zm-.525-2.36a1.051 1.051 0 012.102 0 1.05 1.05 0 01-2.102 0zm4.73 11.538h1.052a.523.523 0 00.525-.526v-5.767c0-.725.588-1.312 1.315-1.312h.262c.725 0 1.314.588 1.314 1.31v5.779a.52.52 0 00.524.523l1.053-.005a.526.526 0 00.525-.526v-5.77a3.15 3.15 0 00-3.153-3.146h-.789c-.488 0-.95.11-1.362.307a.52.52 0 00-.214-.045H65.47a.524.524 0 00-.525.526v8.126a.524.524 0 00.525.526zm15.773-6.581c0 .286-.01.524-.02.858.002.63.016 2.596.009 4.742-.008 2.552-1.31 4.136-3.668 4.128h-.265c-1.79.013-2.91-1.157-2.91-1.157a.414.414 0 01.016-.577l.72-.79c.156-.14.288-.1.412 0 .123.098.733.843 2.027.816.764-.015 1.59-.482 1.59-1.567-.519.287-.995.393-1.595.393h-.26a3.149 3.149 0 01-3.155-3.147v-3.41a3.151 3.151 0 013.153-3.146h.789a3.148 3.148 0 013.153 3.144l.004-.287zm-2.106.287c0-.723-.588-1.309-1.314-1.309h-.262c-.726 0-1.314.59-1.314 1.31v3.413c0 .723.588 1.309 1.314 1.309h.262c.726 0 1.314-.59 1.314-1.309v-3.414zm9.458 6.294H84.13a.525.525 0 01-.526-.527v-11.01c0-.29.233-.526.526-.526h4.337a3.15 3.15 0 013.153 3.147 3.141 3.141 0 01-1.312 2.556 3.405 3.405 0 011.706 2.951 3.413 3.413 0 01-3.418 3.409zm-.262-4.982h-2.52a.103.103 0 00-.107.102v2.68c0 .057.047.102.106.102h2.521c.797 0 1.446-.646 1.446-1.442 0-.795-.647-1.442-1.446-1.442zm-.394-5.245h-2.125a.105.105 0 00-.108.105v2.937c0 .06.048.105.108.105h2.125c.871 0 1.577-.705 1.577-1.574 0-.867-.706-1.573-1.577-1.573zm5.65 3.933a3.149 3.149 0 013.154-3.146h.789a3.151 3.151 0 013.153 3.146v3.41a3.15 3.15 0 01-3.153 3.146h-.789a3.151 3.151 0 01-3.153-3.147v-3.409zm2.103-.002v3.414c0 .72.589 1.308 1.314 1.308h.263c.726 0 1.314-.585 1.314-1.308v-3.414c0-.72-.588-1.309-1.314-1.309h-.263c-.725 0-1.314.586-1.314 1.309zm6.307.002a3.15 3.15 0 013.154-3.146h.788a3.151 3.151 0 013.154 3.146v3.41a3.15 3.15 0 01-3.154 3.146h-.788a3.151 3.151 0 01-3.154-3.147v-3.409zm2.077-.002v3.414c0 .72.588 1.308 1.314 1.308h.262c.726 0 1.314-.585 1.314-1.308v-3.414c0-.72-.588-1.309-1.314-1.309h-.262c-.726 0-1.314.586-1.314 1.309zm11.949 5.975c.094.113.286.323.43.323h1.841c.25 0 .31-.286.215-.41l-3.785-4.566c1.911-1.227 2.738-3.59 2.773-3.804.035-.213-.044-.387-.331-.387h-1.359c-.378 0-.392.296-.514.507-.122.212-.569 1.807-2.517 2.726V14.79a.525.525 0 00-.526-.525H111.2c-.349 0-.526.261-.526.525v11.277c0 .29.236.524.526.524h1.052a.523.523 0 00.525-.524V22.4l3.247 3.867zM.009 27.961A1.163 1.163 0 010 27.813V14.145c0-.1.014-.199.038-.291.189-1.038 1.075-1.826 2.144-1.833.332-.001.648.072.932.206l5.899 3.126-.004-.001c.02-.013.156-.104.208-.133l5.67-3.013c.282-.134.599-.208.931-.206 1.138.008 2.07.902 2.173 2.038.006.05.009.098.009.148v13.669c0 .1-.013.199-.038.292-.189 1.037-1.075 1.825-2.144 1.832a2.144 2.144 0 01-.932-.206L8.991 26.65c-.02.012-.156.103-.208.132l-5.67 3.013c-.283.134-.599.208-.931.206-1.138-.008-2.07-.902-2.173-2.038zm2.635-.556l5.242-2.712a1.746 1.746 0 00.58-2.37l-.001.001.004-.003-.771-1.353a3.96 3.96 0 01-.65-2.057c-.02-.66.122-1.287.39-1.845l.008.005-4.803-2.455a.468.468 0 00-.642.43v1.47H2V26.976a.466.466 0 00.644.43zm13.354-.451v-1.47H16V15.026a.466.466 0 00-.643-.43l-5.243 2.712a1.746 1.746 0 00-.579 2.37l.001-.001-.005.002.771 1.354c.39.593.626 1.297.65 2.056.02.66-.122 1.288-.39 1.845l4.795 2.45a.467.467 0 00.643-.431z"/><path pid="1" class="made-with" fill-rule="evenodd" d="M13.102 2.543c.73 0 1.303.183 1.717.548.414.365.629.868.645 1.509v2.918c0 .582.074 1.045.222 1.388V9H14.55c-.063-.125-.114-.348-.153-.668-.504.524-1.105.785-1.805.785-.625 0-1.137-.177-1.538-.53-.4-.354-.6-.802-.6-1.345 0-.66.25-1.173.753-1.538.502-.365 1.208-.548 2.118-.548h1.055v-.498c0-.379-.114-.68-.34-.905-.227-.225-.56-.337-1.002-.337-.387 0-.711.098-.973.293-.262.195-.392.432-.392.709h-1.09c0-.316.112-.622.337-.917a2.3 2.3 0 01.914-.7 3.075 3.075 0 011.268-.258zM22.361 0v9h-.996l-.053-.68c-.433.532-1.037.797-1.81.797-.735 0-1.333-.3-1.796-.902-.463-.602-.695-1.387-.695-2.356v-.082c0-.972.23-1.755.692-2.346.46-.592 1.064-.888 1.81-.888.743 0 1.33.254 1.764.762V0h1.084zm4.29 2.543c.824 0 1.465.271 1.922.814.457.543.685 1.32.685 2.332v.452h-4.294c.015.625.198 1.13.547 1.514.35.385.794.577 1.333.577.383 0 .707-.078.973-.234.266-.156.498-.363.697-.621l.662.516c-.53.816-1.328 1.224-2.39 1.224-.86 0-1.559-.282-2.098-.846-.539-.565-.808-1.32-.808-2.265v-.2c0-.628.12-1.19.36-1.684s.576-.88 1.008-1.16c.431-.28.9-.419 1.403-.419zm20.682-1.418V2.66h1.183v.838h-1.183V7.43c0 .254.052.444.158.571.105.127.285.19.539.19.125 0 .297-.023.516-.07V9a3.143 3.143 0 01-.833.117c-.484 0-.85-.146-1.095-.44-.246-.292-.37-.708-.37-1.247V3.498h-1.154V2.66h1.155V1.125h1.084zM6.768 2.543c1.39 0 2.097.736 2.12 2.209V9H7.806V4.816c0-.453-.104-.792-.31-1.016-.208-.225-.555-.337-1.044-.337-.402 0-.736.12-1.002.36-.265.24-.42.564-.463.97V9h-1.09V4.846c0-.922-.45-1.383-1.353-1.383-.71 0-1.197.303-1.459.908V9H0V2.66h1.026l.029.703c.465-.547 1.092-.82 1.88-.82.887 0 1.49.34 1.811 1.02.211-.305.486-.551.823-.739.338-.187.738-.281 1.199-.281zm27.45.117l1.248 4.746 1.476-4.746h.873l1.506 4.846L40.54 2.66h1.084L39.778 9H38.9l-1.54-4.805L35.858 9h-.88l-1.84-6.34h1.079zm9.797 0V9h-1.084V2.66h1.084zM50.978 0v3.428c.48-.59 1.106-.885 1.875-.885 1.34 0 2.016.756 2.027 2.268V9h-1.084V4.805c-.004-.457-.108-.795-.313-1.014-.205-.219-.525-.328-.958-.328-.352 0-.66.094-.926.281a1.91 1.91 0 00-.621.738V9h-1.084V0h1.084zM19.783 3.463c-.531 0-.945.205-1.242.615-.297.41-.445 1.018-.445 1.822 0 .72.148 1.282.445 1.688.297.406.707.61 1.23.61.688 0 1.19-.31 1.506-.926V4.359c-.324-.597-.822-.896-1.494-.896zm-5.403 2.46h-.85c-1.328 0-1.992.39-1.992 1.167 0 .34.113.605.34.797.226.191.517.287.873.287.34 0 .662-.088.967-.264.304-.176.525-.404.662-.685V5.924zm12.271-2.49c-.437 0-.805.16-1.102.478-.296.319-.48.765-.55 1.34h3.175v-.083c-.03-.55-.18-.978-.445-1.28-.265-.303-.625-.454-1.078-.454zM43.482.353c.211 0 .371.06.48.181a.64.64 0 01.165.446.62.62 0 01-.164.439c-.11.117-.27.176-.48.176-.212 0-.371-.059-.478-.176a.626.626 0 01-.162-.44c0-.175.054-.324.162-.445.107-.12.266-.181.477-.181z"/>'}})},1619:9719:function(t,e,i){i(4147).register({page:{width:250,height:370,viewBox:"0 0 250 370",data:'<path pid="0" d="M0 17h250V0H0v17zM0 51h250V34H0v17zM0 85h125V68H0v17zM0 302h250v-17H0v17zM0 336h250v-17H0v17zM0 370h125v-17H0v17zM0 255h250V115H0v140z" _fill="#000"/>'}})},148:2358:function(t,e,i){"use strict";function s(t){var e=t.filenameOrUrl,i=t.relativePath,s=void 0===i?"assets/pages/content/":i,o=t.encode,r=void 0!==o&&o;return/^(?:https?|medialib):\/\//.test(e)?e:s+(r?encodeURIComponent(e):e)}i.d(e,{n:function(){return s}})},2567:function(t,e,i){"use strict";var s=i(320),o={cTest:!1,id:function(t){return document.getElementById(t)},tag:tags:function(t){return document.getElementsByTagName(t)},byClass:function(t){return document.getElementsByClassName(t)},add:function(t){return document.createElement(t)},round:function(t,e){e=e||0;for(var i=1,s=0;s<e;s++)i*=10;return Math.round(t*i)/i},css:function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var s=i.replace(/-(.)/g,();s="float"===s?"cssFloat":s,t.style[s]=e[i]}},del:function(t){return(0,s.HD)(t)?o.id(t)&&o.id(t).parentNode.removeChild(o.id(t)):t.parentNode.removeChild(t),!0},addClass:function(t,e){t.classList.add(e)},removeClass:createElement:function(t,e,i,o,r){i=i||-1;var n=document.createElement(t);for(var a in e)e.hasOwnProperty(a)&&("styles"!==a?n.setAttribute(a,e[a]):this.css(n,e.styles));if("top"===o)-1!==i&&((0,s.HD)(i)?document.getElementById(i).insertBefore(n,document.getElementById(i).firstChild):i.insertBefore(n,i.firstChild));else if("after"===o){var h=r.nextSibling,l=r.parentNode;h?l.insertBefore(n,h):l.appendChild(n)}else if("before"===o){var c=r.previousSibling,d=r.parentNode;c?d.insertBefore(n,r):d.appendChild(n)}else-1!==i&&((0,s.HD)(i)?document.getElementById(i).appendChild(n):i.appendChild(n));return n},clear:function(t){(0,s.HD)(t)&&(t=t.id(t)),t.innerHTML=""}};e.Z=o},5657:function(t,e,i){"use strict";i.d(e,{F:function(){return o},q:function(){return s}});var s=function(t){var e=t.format?"."+t.format:"";return t.name+e},o=function(t){var e=t.data,i=t.maxSize;window.devicePixelRatio>=1.5&&(i*=1.5);var s=e.sizes.reduce((function(t,e){return t<i?e>t?e:t:e>=i&&e<t?e:t})),o=e.name.split("{size}");return{name:(o=o.map(()).join("{size}"),size:s,format:e.format}}},1443:function(t,e,i){"use strict";function s(t,e){var i=e.target,s=t.state.book.rightToLeft;t.dispatch(s?"pager/goForward":"pager/goBackward",{target:i})}function o(t,e){var i=e.target,s=t.state.book.rightToLeft;t.dispatch(s?"pager/goBackward":"pager/goForward",{target:i})}function r(t,e){var i=e.target,s=void 0===i?null:i,o=e.navTarget,r=void 0!==o&&o,n=t.state.book.rightToLeft,a=r?n?"nav-last":"nav-first":s;t.dispatch(n?"pager/goToLast":"pager/goToFirst",{target:a})}function n(t,e){var i=e.target,s=void 0===i?null:i,o=e.navTarget,r=void 0!==o&&o,n=t.state.book.rightToLeft,a=r?n?"nav-first":"nav-last":s;t.dispatch(n?"pager/goToFirst":"pager/goToLast",{target:a})}i.d(e,{X0:function(){return o},oJ:function(){return s},tc:function(){return r},w9:function(){return n}})},7345:function(t,e,i){"use strict";i.d(e,{Z:function(){return rr}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-container",class:t.containerClass},[t.hasPages?i(t.bookComponent,{ref:"bookComponent",tag:"component",attrs:{"container-size":t.containerSize,"page-size":t.bookSize,dir:"ltr"}}):t._e(),t._v(" "),!t.isMobile&&t.showPrevSubstrate?i("div",{staticClass:"book-substrate-prev",style:t.substrateStyle,attrs:{"aria-hidden":"true"},on:{click:t.goToLeftPage,mouseover:function(e){return t.arrowHover("prev",!0)},mouseout:function(e){return t.arrowHover("prev",!1)}}}):t._e(),t._v(" "),!t.isMobile&&t.showNextSubstrate?i("div",{staticClass:"book-substrate-next",style:t.substrateStyle,attrs:{"aria-hidden":"true"},on:{click:t.goToRightPage,mouseover:function(e){return t.arrowHover("next",!0)},mouseout:function(e){return t.arrowHover("next",!1)}}}):t._e(),t._v(" "),i("transition",{attrs:{name:"bars-fade"}},[t.showSimpleArrows?i("nav-buttons",{attrs:{show:!0}}):t._e(),t._v(" "),t.showSmartArrows?i("slide-nav-buttons",{attrs:{show:!0}}):t._e()],1),t._v(" "),i("note-editor"),t._v(" "),"html"===t.version?i("logo",{key:t.logoKey,ref:"logoComponent"}):t._e(),t._v(" "),i("transition",{attrs:{name:"slide-fade"}},["html"===t.version?i("zoom-panel"):t._e()],1),t._v(" "),i("transition",{attrs:{name:t.ctrFade},on:{"after-enter":t.afterFade}},[t.miniState&&!t.miniFullScreen?i("div",{key:"maxi",class:t.clickToReadClass,attrs:{role:"button",tabindex:"0"},on:{click:t.wsToggleFullscreen,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.wsToggleFullscreen(e)}}},[t._v("\n            "+t._s(t.clickToReadText)+"\n        ")]):t._e(),t._v(" "),t.miniState&&t.miniFullScreen?i("div",{key:"mini",class:t.miniClickToReadClass,attrs:{title:t.$t("BottomMenu.FULLSCREEN_BUTTON_TIP")},on:{click:t.wsToggleFullscreen}},[i("div",{staticClass:"fullscreen-button-mini-holder"},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"fullscreen"}})],1)]):t._e()])],1)},o=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-touch",t._g({staticClass:"flip-book",class:t.flipBookClass,attrs:{tag:"div"}},t.bookEventHandlers),[i("v-touch",t._g({ref:"bookHolder",staticClass:"book-holder",style:[t.bookHolderStyle],attrs:{tag:"div",id:"book-holder","data-frozen-by":t.frozenBy,"data-zoom-wrapper":""},nativeOn:{transitionend:function(e){return t.transitionEnd(e)}}},t.bookHolderEventHandlers),[t.selectTextEnabled?i("select-text-panel"):t._e(),t._v(" "),i("transition",{attrs:{name:"bars-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showLeftButtons,expression:"showLeftButtons"}],staticClass:"previous-button",on:{mouseover:function(e){return t.arrowHover("prev",!0)},mouseout:function(e){return t.arrowHover("prev",!1)}}},[t.notesEnabled&&!t.showRightAddNote?i("button",{staticClass:"icon-add-note left-add-note stripe-btn",attrs:{tabindex:"0","aria-label":t.addNoteTitleText,title:t.addNoteTitleText,"data-nav-name":"notes-left"},on:{click:function(e){return e.stopPropagation(),t.btnAddNote("left")},mousedown:function(t){t.preventDefault()},mouseover:function(e){return e.stopPropagation(),t.arrowHover("prev",!1)}}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"add-note"}})],1):t._e(),t._v(" "),i("button",{staticClass:"icon-book-prev stripe-btn",attrs:{tabindex:"0","aria-label":t.leftArrowTitle,title:t.leftArrowTitle,"data-nav-name":"go-left"},on:{click:function(e){return e.stopPropagation(),t.leftPage(e)},mousedown:function(t){t.preventDefault()}}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"book-prev"}})],1),t._v(" "),i("button",{staticClass:"icon-book-first stripe-btn",attrs:{tabindex:"0","aria-label":t.leftMostArrowTitle,title:t.leftMostArrowTitle,"data-nav-name":"go-last-left"},on:{click:function(e){return e.stopPropagation(),t.leftmostPage(e)},mouseover:function(e){return e.stopPropagation(),t.arrowHover("prev",!1)},mousedown:function(t){t.preventDefault()}}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"book-first"}})],1)])]),t._v(" "),i("transition",{attrs:{name:"bars-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showRightButtons,expression:"showRightButtons"}],staticClass:"next-button",on:{mouseover:function(e){return t.arrowHover("next",!0)},mouseout:},[t.notesEnabled&&t.showRightAddNote?i("button",{staticClass:"icon-add-note right-add-note stripe-btn",attrs:{tabindex:"0","aria-label":t.addNoteTitleText,title:t.addNoteTitleText,"data-nav-name":"notes-right"},on:{click:function(e){return e.stopPropagation(),t.btnAddNote("right")},mouseover:function(e){return e.stopPropagation(),t.arrowHover("next",!1)},mousedown:function(t){t.preventDefault()}}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"add-note"}})],1):t._e(),t._v(" "),i("button",{staticClass:"icon-book-next stripe-btn",attrs:{tabindex:"0","aria-label":t.rightArrowTitle,title:t.rightArrowTitle,"data-nav-name":"go-right"},on:{click:function(e){return e.stopPropagation(),t.rightPage(e)},mousedown:function(t){t.preventDefault()}}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"book-next"}})],1),t._v(" "),i("button",{staticClass:"icon-book-last stripe-btn",attrs:{tabindex:"0","aria-label":t.rightMostArrowTitle,title:t.rightMostArrowTitle,"data-nav-name":"go-last-right"},on:{click:function(e){return e.stopPropagation(),t.rightmostPage(e)},mouseover:mousedown:function(t){t.preventDefault()}}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"book-last"}})],1)])]),t._v(" "),i("transition",{attrs:{name:"bars-fade"}},[t.showOnlyAddNote?i("div",{staticClass:"next-button only-note"},[i("button",{staticClass:"icon-add-note right-add-note stripe-btn",attrs:{tabindex:"0","aria-label":t.addNoteTitleText,title:t.addNoteTitleText,"data-nav-name":"notes-right"},on:{click:mousedown:function(t){t.preventDefault()}}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"add-note"}})],1)]):t._e()])],1)],1)},n=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.className,style:t.pageStyle,attrs:{"data-page-id":t.pageId,"aria-hidden":!t.isCurrent},on:{mousedown:function(e){return e.preventDefault(),t.onMouseDown(e)}}},[i("transition",{attrs:{name:"page-fade"}},[t.showPreloaderContainer?i("div",{staticClass:"page-preloader",style:{backgroundColor:t.backgroundColor}},[t.isCurrent||t.isMobileApp?i("div",{staticClass:"preloader-container"},[t.showSpinner?i("spinner",{staticClass:"preloader-spinner",attrs:{size:36,"line-size":3,"line-fg-color":"#5692AE","line-bg-color":"#ffffff"}}):t._e(),t._v(" "),i("div",{staticClass:"preloader-bg"}),t._v(" "),i("div",{staticClass:"preloader-header",attrs:{dir:t.dir}},[t._v(t._s(t.preloaderHeader))]),t._v(" "),i("div",{staticClass:"preloader-text",attrs:{dir:t.dir}},[t._v(t._s(t.preloaderText))])],1):t._e(),t._v(" "),t.showThumbnail?i("div",{staticClass:"preloader-th",style:t.thumbnailStyle},[i("img",{attrs:{crossOrigin:t.crossOrigin,src:t.thumbnailUrl}})]):t._e()]):t._e()]),t._v(" "),i("div",{staticClass:"background",style:t.contentStyle,attrs:{"data-id":t.pageId}},[i("img",{ref:"bgImage",staticClass:"bg-layer",attrs:{crossOrigin:t.crossOrigin,src:"","aria-hidden":"true"}}),t._v(" "),t._l(t.backgroundsCache,(function(e,s){return t.canvasUpdated?t._e():i("img",{key:s,attrs:{"data-img":"backgroundsCache",crossOrigin:t.crossOrigin,src:e,"aria-hidden":"true"},on:{load:function(i){return t.bgCacheImageLoaded(e)}}})})),t._v(" "),t.vectorLayerCache?i("img",{ref:"bgSVG",class:"svg-layer"+(t.isCurrent?"":" svg-layer-not-current"),attrs:{crossOrigin:t.crossOrigin,src:t.vectorLayerCache}}):t._e()],2),t._v(" "),t.showHighlights?i("div",{staticClass:"highlights",style:t.contentStyle},[t._l(t.highlights,(function(t){return[i("div",{style:t.style})]}))],2):t._e(),t._v(" "),i("v-touch",{staticClass:"touch-layer",style:t.contentTouchLayerStyle,attrs:{options:{domEvents:!0}},on:{tap:t.onContentTap}},["flip-book"===t.bookComponent?i("div",{staticClass:"flip-area"}):t._e(),t._v(" "),!t.isMobile&&t.selectTextEnabled?i("select-text",{directives:[{name:"show",rawName:"v-show",value:t.isCurrent&&!t.contentFreezed&&"animating"!==t.bookStatus&&"calculating"!==t.bookStatus,expression:"isCurrent && !contentFreezed &&\n                    bookStatus !== 'animating' && bookStatus !== 'calculating'"}],attrs:{contStyle:t.contentStyle,"page-side":t.pageSide,"is-wide":t.isWide,"page-id":t.pageId,containerSize:t.contentSize,isCurrent:t.isCurrent,isLoaded:!t.isLoadingCache}}):t._e(),t._v(" "),!t.isLoadingCache&&t.isCurrent&&t.selectTextEnabled&&t.mobileShowEffectPass?i("select-text-mobile",{attrs:{contStyle:t.contentStyle,"page-side":t.pageSide,"is-wide":t.isWide,"page-id":t.pageId,containerSize:t.contentSize,isCurrent:t.isCurrent}}):t._e(),t._v(" "),t.renderInvisibleContent?i("div",{directives:[{name:"show",rawName:"v-show",value:t.showInvisibleContent,expression:"showInvisibleContent"}],staticClass:"content inv",style:t.contentStyle},[t._l(t.sortedContent.inv,(function(e){return[i(e.component,{directives:[{name:"show",rawName:"v-show",value:!t.isLoadingCache,expression:"!isLoadingCache"}],key:e.itemId,tag:"component",attrs:{contentMargin:t.marginSide,data:e,isCurrent:t.isCurrent},on:{ready:t.contentItemReady,error:t.contentError}})]}))],2):t._e(),t._v(" "),i("div",{staticClass:"content vis",style:t.contentStyle},[t._l(t.sortedContent.visible,(function(e){return[i(e.component,{directives:[{name:"show",rawName:"v-show",value:!t.isLoadingCache,expression:"!isLoadingCache"}],key:e.itemId,tag:"component",attrs:{data:e,contentMargin:t.marginSide,isCurrent:t.isCurrent,iconInitialAnimationDelay:t.initialPopupIconHighlight},on:{ready:t.contentItemReady,error:t.contentError}})]}))],2)],1),t._v(" "),t._l(t.notesArray,(function(e,s){return i("note",{key:s,attrs:{data:e,pageSize:t.pageSize,pageSide:t.pageSide,isWide:t.isWide,isOutsideHardcover:t.isOutsideHardcover}})})),t._v(" "),t.flipCornerEnabled?i("flip-me",{attrs:{pageId:t.pageId,isLeft:t.isLeftFlipCorner}}):t._e()],2)},h=[],l=i(5622),c=i(90),d=i(776),u={props:{id:{type:[String,Number],required:!0},side:{type:String,required:!1,default:"both",validator:,bordered:{type:Boolean,default:!1},size:{type:Object,required:!1,default:null},renderContent:{type:Boolean,default:!0},contentCrop:{type:Boolean,default:!1}},data:function(){return{alreadyLoaded:!1,thDebounced:!0,isCurrent:!1,pageId:this.id,pageSide:this.side,crossOrigin:(0,d.Z)().getCrossOrigin(),lastIsCurrent:!1,thumbnailUrl:null,backgroundColor:"#ffffff",isWide:!1,isWideLeft:!1,isStub:!1,isReady:!1,isDownloaded:!1,hasError:!1,isOutsideHardcover:!1,propWidth:null,propHeight:null,loadPending:!1,whitePixelUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII="}},watch:{id:function(t){this.pageId=t},pageId:function(t,e){t&&(this.getOnceProperties(),this.getAPIProperties(),this.getProperties()),this.deregisterPage(e),this.registerPage(t)},side:function(t){this.pageSide=t},hasError:function(t){t&&this.isCurrent&&this.$root.$emit("pageLoaded"),t&&this.isZoomed&&this.setCursor("inherit")},isPreloaderShown:function(t){t||this.$emit("preloader:off",this)},changeProperty:apiChange:function(){this.getAPIProperties()},downloadProgressUpdated:"getDownloadProgress"},created:function(){var t=this;this.getPropertiesDebounced=(0,l.Ds)((function(){t.getProperties()}),100),this.getOnceProperties(),this.getAPIProperties(),this.getProperties(),this.getDownloadProgress(),this.registerPage(),this.loadPending||(this.loadPending=!0,this.alreadyLoaded=!0,this.getPropertiesTimeout=setTimeout((function(){t.getProperties()}),500)),this.$root.$on("render:finish",this.getIsCurrent),this.getIsCurrent();var e=this.$store.getters["pages/isFirstPage"](this.pageId),i=this.$store.getters["pages/isLastPage"](this.pageId);this.hideLeftStripe=this.isRTLBook?i:e,this.hideRightStripe=this.isRTLBook?e:i;var s=this.$store.state.workspace.userAgentInfo;s.browser.facebook&&s.os.android&&(this.noImageCache=!0)},mounted:function(){var t=this;setTimeout((function(){!t.isCurrent||t.isReady&&t.isDownloaded||t.$root.$emit("pageLoaded")}),1e3)},beforeDestroy:function(){this.getPropertiesDebounced.destroy(),clearTimeout(this.getPropertiesTimeout),this.$root.$off("render:finish",this.getIsCurrent),this.deregisterPage(),this.noImageCache&&this.$store.dispatch("pages/resetPageResources",{pageID:this.pageId})},methods:{setCursor:getIsCurrent:function(){this.isCurrent=this.$store.getters["pager/isCurrentPage"]({pageId:this.pageId,pageSide:this.pageSide})},getOnceProperties:function(){this.propWidth=this.$store.getters["pages/pageProp"](this.pageId,"width"),this.propHeight=this.$store.getters["pages/pageProp"](this.pageId,"height")},registerPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageId;this.renderContent&&this.$pageRegistry.registerPage(t,this.pageSide,this)},deregisterPage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageId;this.renderContent&&this.$pageRegistry.deregisterPage(t,this.pageSide)},getSpreadTwin:function(){var t=this.$store.getters["pager/state"];return this.isCurrent&&t.spreadMode?this.pageId!==t.leftPage||this.isWide&&"right"===this.pageSide?this.pageId===t.rightPage?this.$pageRegistry.getPageComponent(t.leftPage,"left"):null:this.$pageRegistry.getPageComponent(t.rightPage,"right"):null},getDownloadProgress:function(){this.isDownloaded=this.$store.getters["pages/isDownloaded"](this.pageId)}},computed:{showThumbnail:isMobile:function(){return this.$store.getters["workspace/isMobile"]},isRTLBook:function(){return this.$store.state.book.rightToLeft},apiChange:function(){return this.$store.state.pages.apiChange},changeProperty:function(){return this.$store.state.pages.changeInPage},downloadProgressUpdated:function(){return this.$store.state.pages.downloadProgressUpdated},contentFreezed:updatePending:function(){return!this.isMobile&&this.isZoomed&&this.$store.getters["pages/pageProp"](this.pageId,"updatePending")},preloaderHeader:preloaderText:function(){return this.hasError?this.$t("Other.PAGE_ERROR_MESSAGE"):this.isReady?this.isDownloaded?null:this.$t("Other.DOWNLOADING_PAGE"):this.$t("Other.CONVERTING_PAGE")},backgroundLuma:function(){return this.backgroundColor?(0,c.R)((0,c.l)(this.backgroundColor)):1},enforceTransparentBg:function(){return this.$store.state.workspace.alteredSVGColors&&this.$store.state.workspace.userAgentInfo.browser.samsung},isZoomed:function(){return this.$store.state.pages.size.zoomFactor>1},dir:function(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"},isResizing:function(){return this.$store.state.workspace.isResizing},isPreloaderShown:function(){return this.$store.state.workspace.preloader},pageWidthMultiplier:pagesSize:function(){return this.$store.getters["pages/size"]},contentSize:function(){if(this.pageId){var t=this.isOutsideHardcover&&parseInt(this.propWidth,10)===parseInt(this.$store.state.book.bookSize.width,10)&&parseInt(this.propHeight,10)===parseInt(this.$store.state.book.bookSize.height,10)?"FILL":null;return this.$store.getters["pages/contentSize"]({pageID:this.pageId,pageSide:this.pageSide,pageSize:this.pageSize,resizeOverride:t})}return{width:0,height:0,offsetX:0,offsetY:0,scaleRatio:{w:0,h:0}}}}},p=i(6411),g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-touch",{class:"selecttext"+(t.showCanvas?" active":""),style:t.contStyle,on:{pan:t.pan,panstart:t.reset,panend:t.panEnd,pancancel:t.panEnd}},[t.showCanvas?i("canvas",{class:t.canvasClass,style:{position:"absolute",right:t.isWide&&"right"===t.pageSide?0:"none"},attrs:{width:t.containerSize.width,height:t.containerSize.height}}):t._e(),t._v(" "),t._l(t.textBlockSizes,(function(e,s){return i("div",{staticClass:"text-block",style:{width:e.width+"px",top:e.top+"px",left:e.left+"px",height:e.height+"px"},attrs:{"data-set":"select-text-block"}},[t.inspectorMode?i("span",{staticClass:"block-inspector-mode"},[t._v(t._s(s))]):t._e(),t._v(" "),t._l(t.finalTree[s].lines,(function(s,o){return t.inspectorMode?i("span",{staticClass:"line-inspector-mode",style:{top:s.top*t.containerSize.scaleRatio.h-e.top+"px",left:s.left*t.containerSize.scaleRatio.w-e.left+"px",width:s.width*t.containerSize.scaleRatio.w+"px",height:s.height*t.containerSize.scaleRatio.h+"px"}},[t._v(t._s(o))]):t._e()}))],2)}))],2)},f=[];unction v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}nction y(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=x(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return n=t.done,t},e:function(t){a=!0,r=t},f:function(){try{n||null==i.return||i.return()}finally{if(a)throw r}}}}function w(t){return $(t)||P(t)||x(t)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(t,e){if(t){if("string"==typeof t)return z(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?z(t,e):void 0}}function P(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function $(t){if(Array.isArray(t))return z(t)}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function C(){return C=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},C.apply(this,arguments)}function T(t,e){this.finalTree=t,this.isRTL=e,this.fullSelectedBlocks=[],this.partSelectedBlocks=[],this.fullSelectedLines=[],this.partSelectedLines=[],this.leftSelectedLines=[],this.rightSelectedLines=[],this.fullSelectedSymbols=[]}function M(t,e,i){return t.bottom=t.top+t.height,t.right=t.left+t.width,0===t.width||0===t.height?{rectCrossed:!1,fullSelected:!1}:t.top<=e.top&&t.bottom>=e.bottom&&t.left<=e.left&&t.right>=e.right?{rectCrossed:!1,fullSelected:!0}:t.top<=e.top&&t.bottom>=e.bottom&&(t.left>=e.left&&t.left<=e.right||t.right<=e.right&&t.right>=e.left)?{rectCrossed:!0,fullSelected:!0}:t.bottom<e.top||t.top>e.bottom||t.left>e.right||t.right<e.left?{rectCrossed:!1,fullSelected:!1}:(i?(s=t.top>e.top&&t.bottom>e.bottom,o=t.top<e.top&&t.bottom<e.bottom):(s=t.top<e.top&&t.bottom<e.bottom,o=t.top>e.top&&t.bottom>e.bottom),"right"===t.cursorHSide?(r=e.right>t.right&&e.left<t.right,a=e.right>t.left&&e.left<t.left):(r=e.right>t.left&&e.left<t.left,a=e.right>t.right&&e.left<t.right),"top"===t.cursorVSide?(n=e.top<t.top&&e.bottom>t.top,h=e.top<t.bottom&&e.bottom>t.bottom):(n=e.top<t.bottom&&e.bottom>t.bottom,h=e.top<t.top&&e.bottom>t.top),{activePoint:r&&n,startPoint:a&&h,leftSelected:s,rightSelected:o,rectCrossed:!0,fullSelected:!1});var s,o,r,n,a,h}T.prototype.selectSymbols=function(t,e){var i=this._intersectRects(t,e);return this._collectSelectedBlocks(i),this._collectSelectedLines(i),this._collectSelectedSymbols(i),this._getSelectedSymbols(e)},T.prototype._collectSelectedBlocks=function(t){this.crossInfos=this._getCrossInfos(t);for(var e=this.crossInfos.filter((function(t){return t.startPoint||t.activePoint})).length<2,i=0,s=this.finalTree.length;i<s;i++){var o=this.crossInfos[i];null!==o&&(o.fullSelected?this.fullSelectedBlocks.push(i):o.rectCrossed&&(e||o.startPoint||o.activePoint)&&this.partSelectedBlocks.push(i))}this._simplifySelectedBlocks()},T.prototype._collectSelectedLines=function(t){var e=this;this.inverseLineSelection=!1;for(var i=2===this.partSelectedBlocks.map(().filter(().length,s=0,o=this.partSelectedBlocks.length;s<o;s++)for(var r=this.partSelectedBlocks[s],n=i?this._modifyCurrentSelectRect(s,t):t,a=0,h=this.finalTree[r].lines.length;a<h;a++){var l=M(n,this.finalTree[r].lines[a],this.isRTL),c=r+"-"+a;l.fullSelected?this.fullSelectedLines.push(c):l.rectCrossed&&(this.partSelectedLines.push(c),R(l.leftSelected,this.leftSelectedLines,c),R(l.rightSelected,this.rightSelectedLines,c))}this._simplifySelectedLines(),2===this.partSelectedLines.length&&(1===this.rightSelectedLines.length&&0===this.leftSelectedLines.length?this.leftSelectedLines=this.partSelectedLines.filter((function(t){return t!==e.rightSelectedLines[0]})):1===this.leftSelectedLines.length&&0===this.rightSelectedLines.length&&(this.rightSelectedLines=this.partSelectedLines.filter(()))},T.prototype._collectSelectedSymbols=function(t){for(var e=0,i=this.partSelectedLines.length;e<i;e++)for(var s=this.partSelectedLines[e].split("-"),o=s[0],r=s[1],n=this.isRTL?this._processLineRtl(t,e):this._processLineLtr(t,e),a=0,h=this.finalTree[o].lines[r].symbols.length;a<h;a++){var l=o+"-"+r+"-"+a;R(L(n,this.finalTree[o].lines[r].symbols[a]),this.fullSelectedSymbols,l)}},T.prototype._processLineLtr=function(t,e){var i=this.partSelectedLines[e],s=i.split("-"),o=s[0],r=s[1],n=C({},t);return-1!==this.leftSelectedLines.indexOf(i)?(n.left=this.finalTree[o].lines[r].left,n.bottom>this.finalTree[o].lines[r].top&&n.bottom<this.finalTree[o].lines[r].bottom&&"bottom"===n.cursorVSide?"right"===n.cursorHSide?n.right=t.right:n.right=t.left:"right"===n.cursorHSide&&(n.right=this.inverseLineSelection?t.right:t.left),n.width=n.right-n.left):-1!==this.rightSelectedLines.indexOf(i)&&(n.right=this.finalTree[o].lines[r].right,n.top>this.finalTree[o].lines[r].top&&n.top<this.finalTree[o].lines[r].bottom&&"top"===n.cursorVSide?"left"===n.cursorHSide?n.left=t.left:n.left=t.right:"left"===n.cursorHSide&&(n.left=this.inverseLineSelection?t.left:t.right),n.width=n.right-n.left),n},T.prototype._processLineRtl=function(t,e){var i=this.partSelectedLines[e],s=i.split("-"),o=s[0],r=s[1],n=C({},t);return-1!==this.leftSelectedLines.indexOf(i)?(n.left=this.finalTree[o].lines[r].left,n.top>this.finalTree[o].lines[r].top&&n.top<this.finalTree[o].lines[r].bottom&&"bottom"===n.cursorVSide?n.right="left"===n.cursorHSide?t.right:t.left:"left"===n.cursorHSide&&(n.right=this.inverseLineSelection?t.right:t.left),n.width=n.right-n.left):-1!==this.rightSelectedLines.indexOf(i)&&(n.right=this.finalTree[o].lines[r].right,n.bottom>this.finalTree[o].lines[r].top&&n.bottom<this.finalTree[o].lines[r].bottom&&"top"===n.cursorVSide?n.left="right"===n.cursorHSide?t.left:t.right:"right"===n.cursorHSide&&(n.left=this.inverseLineSelection?t.left:t.right),n.width=n.right-n.left),n},T.prototype._getSelectedSymbols=function(t){for(var e=[],i=0,s=this.finalTree.length;i<s;i++)if(-1===this.fullSelectedBlocks.indexOf(i))if(-1===this.partSelectedBlocks.indexOf(i));else for(var o=0,r=this.finalTree[i].lines.length;o<r;o++)if(-1===this.fullSelectedLines.indexOf(i+"-"+o)){if(-1!==this.partSelectedLines.indexOf(i+"-"+o)){for(var n=[],a=0,h=this.finalTree[i].lines[o].symbols.length;a<h;a++)-1!==this.fullSelectedSymbols.indexOf(i+"-"+o+"-"+a)&&n.push(this.finalTree[i].lines[o].symbols[a]);(n=this._filterByAllowedRect(n,t)).length>0&&(n.push(this._getLineBreak(n)),e.push.apply(e,w(n)))}}else{var l=this._filterByAllowedRect(this.finalTree[i].lines[o].symbols,t);l.length>0&&e.push.apply(e,w(l).concat([this._getLineBreak(l)]))}else e.push.apply(e,w(this._getSymbolsFromBlock(i,t)));return this._removeRedundantLineBreaks(e)},T.prototype._intersectRects=function(t,e){if(!e)return t;var i=I(t.left,e.left,e.left+e.width),s=I(t.left+t.width,e.left,e.left+e.width),o=I(t.top,e.top,e.top+e.height),r=I(t.top+t.height,e.top,e.top+e.height);return C({},t,{left:i,width:Math.max(s-i,0),right:s,top:o,height:Math.max(r-o,0),bottom:r})},T.prototype._filterByAllowedRect=function(t,e){if(!e)return t;var i=e.left+e.width,s=e.top+e.height;return t.filter((function(t){var o=t.left>=e.left&&t.right<=i||t.left>e.left&&t.left<=i||t.left<e.left&&t.right>=e.left,r=t.top>=e.top&&t.bottom<=s||t.top<e.top&&t.bottom>=e.top||t.top>e.top&&t.top<=s;return o&&r}))},T.prototype._removeRedundantLineBreaks=function(t){return 0===t.length||("\n"===t[0].word&&t.splice(0,1),"\n"===t[t.length-1].word&&t.pop()),t},T.prototype._modifyCurrentSelectRect=function(t,e){var i=this,s=this,o=this.partSelectedBlocks[t],r=this.crossInfos[this.partSelectedBlocks[t]],n=C({},e),a=function(t){n.height=i.finalTree[o].top+i.finalTree[o].height-n.top+2,n.top=e.top,t||(n.top+=e.height,s.inverseLineSelection=!0)},h=function(t){n.top=i.finalTree[o].top,n.height=e.height+e.top-i.finalTree[o].top,t||(n.height-=e.height,s.inverseLineSelection=!0)};if(0===t)r.startPoint?a("bottom"===n.cursorVSide):a("bottom"!==n.cursorVSide);else if(1===t){if(r.activePoint)h("bottom"===n.cursorVSide);else h("bottom"!==n.cursorVSide)}return n},T.prototype._simplifySelectedBlocks=function(){var t=this;this.partSelectedBlocks.length>2&&(this.partSelectedBlocks=[Math.min.apply(Math,w(this.partSelectedBlocks)),Math.max.apply(Math,w(this.partSelectedBlocks))]);var e=[].concat(w(this.partSelectedBlocks),w(this.fullSelectedBlocks));if(e.length>0){for(var i=Math.min.apply(Math,w(e)),s=Math.max.apply(Math,w(e)),o=[];i<=s;)o.push(i),i++;this.fullSelectedBlocks=o.filter(()}},T.prototype._simplifySelectedLines=function(){for(var t=[].concat(w(this.partSelectedLines),w(this.fullSelectedLines)),e=new Map,i=[],s=0,o=t.length;s<o;s++){var r=t[s].split("-");e.get(r[0])||e.set(r[0],[]);var n=e.get(r[0]);n.push(r[1]),e.set(r[0],n)}var a,h=y(e);try{for(h.s();!(a=h.n()).done;){var l=m(a.value,2),c=l[0],d=l[1],u=Math.min.apply(Math,w(d)),p=Math.max.apply(Math,w(d));for(-1!==this.partSelectedLines.indexOf(c+"-"+u)&&u++,-1!==this.partSelectedLines.indexOf(c+"-"+p)&&p--;u<=p;)i.push(c+"-"+u),u++}}catch(g){h.e(g)}finally{h.f()}this.fullSelectedLines=i},T.prototype._getSymbolsFromBlock=function(t,e){for(var i=[],s=this.finalTree[t].lines||[],o=0,r=s.length;o<r;o++){var n=this._filterByAllowedRect(s[o].symbols,e);n.length>0&&i.push.apply(i,w(n).concat([this._getLineBreak(n)]))}return i},T.prototype._getLineBreak=function(t,e){var i=.01,s=e?t[0]:t[t.length-1],o={left:e?s.left-i:s.left+s.width,top:s.top,height:s.height,angle:s.angle,width:i,word:"\n",lineBreak:!0};return o.right=o.left+o.width,o},T.prototype._getCrossInfos=function(t){for(var e=[],i=0,s=this.finalTree.length;i<s;i++){var o=this.finalTree[i];e[i]=o.onlyForSearch?null:M(t,o,this.isRTL)}return e};var I=function L(t,e){return t.right=t.left+t.width,t.left<e.left&&t.right>e.right||(t.left<e.left+.7*e.width&&t.right>e.right||t.left<e.left&&t.right>e.right-.7*e.width)}function R(t,e,i){var s=e.indexOf(i);t?-1===s&&e.push(i):-1!==s&&e.splice(s,1)}var E,O,F,D,_=i(320);try{i.e(11).then(i.bind(i,4015)).then((function(t){(E=t).memory.grow(80),F=new TextEncoder("utf8"),D=new TextDecoder("utf8"),O=!0})).catch(()}catch(nr){console.log("fribidi wasn't initialized")}var W="‏";function B(){}function A(t,e){var i=t.map((function(t){return t.rtl})).filter}));return 0===i.length?e:i[0]}B.prototype.getSelectedText=function(t,e){for(var i=this._getLines(t),s="",o=O?this._processLineFribidi:this._processLineSimple,r=0,n=i.length;r<n;r++){var a=i[r].some((function(t){return t.rtl}))||e,h=i[r].map((function(t){return t.word})),l=a?o.call(this,i[r],e):h.join("");s+=this._processBrackets(l)+(r<n-1?"\n":"")}return s},B.prototype._processLineFribidi=function(t,e){var i=t.map((function(t){return t.word})),s=t.some((function(t){return t.rtl}))?W:"",o=s+i.join("")+s,r=F.encode(o),n=new Uint8Array(E.memory.buffer),a=E.calloc(r.byteLength,1);n.set(r,a);var h=E.calloc(4*o.length,4),l=E.fribidi_utf8_to_unicode(a,r.byteLength,h),c=E.calloc(1,4),d=(e?1:0)|parseInt("10","16")|parseInt("100","16");n.set([d],c);var u=E.calloc(l,4),p=E.calloc(l,4),g=E.calloc(l,1);E.fribidi_get_bidi_types(h,l,u),E.fribidi_get_bracket_types(h,l,u,p);E.fribidi_get_par_embedding_levels_ex(u,p,l,c,g),n.slice(g,g+l);var f=3|parseInt("40000","16");E.fribidi_reorder_line(f,u,l,0,c,g,h,null),E.fribidi_shape(f,g,l,null,h);var m=E.calloc(2*r.byteLength,1);E.fribidi_unicode_to_utf8(h,l,m);var v=n.slice(m,m+r.byteLength),b=D.decode(v).replace(/\u200f/g,"");return E.free(h),E.free(a),E.free(m),E.free(c),E.free(u),E.free(p),E.free(g),b},B.prototype._processLineSimple=function(t){for(var e=this._getDirectionFragments(t),i="",s=0;s<e.length;s++){i=(A(e[s],!1)?e[s].reverse().map((function(t){return t.word})).join(""):e[s].map((function(t){return t.word})).join("")).trim()+(i.length>0?" ":"")+i}return i},B.prototype._processBrackets=function(t){for(var e=[{char:"(",open:!0,reversed:")"},{char:")",open:!1,reversed:"("},{char:"[",open:!0,reversed:"]"},{char:"]",open:!1,reversed:"["},{char:"{",open:!0,reversed:"}"},{char:"}",open:!1,reversed:"{"}],i=t,s=0;s<e.length;s++)for(var o=i.indexOf(e[s].char);o>=0;)o=(i=this._processBracket(i,o,e[s].open,e[s].reversed)).indexOf(e[s].char,o+1);return i},B.prototype._processBracket=function(t,e,i,s){var },r=t;return i?(e===r.length-1||o(r[e+1],!0))&&e>0&&!o(r[e-1],!1)&&(r=(e>0?r.substr(0,e):"")+s+(e<r.length-1?r.substr(e+1):"")):(0===e||o(r[e-1],!0))&&e<r.length-1&&!o(r[e+1],!1)&&(r=(e>0?r.substr(0,e):"")+s+(e<r.length-1?r.substr(e+1):"")),r},B.prototype._getLines=function(t){var e;return t.reduce((function(t,i){if("\n"===i.word)return e=!0,t;if(0===t.length)t.push([i]);else{var s=t[t.length-1];e?t.push([i]):s.push(i)}return e=!1,t}),[])},B.prototype._getDirectionFragments=function(t){return t.reduce((function(t,e){if(0===t.length)return t.push([e]),t;var i=t[t.length-1],s=A(i);return" "===e.word||(0,_.o8)(e.rtl)||(0,_.o8)(s)||e.rtl===s?i.push(e):t.push([e]),t}),[])};var H,N,Z={props:["containerSize","pageId","isWide","pageSide","isLoaded","isCurrent","contStyle"],data:function(){return{finalTree:[],pageRect:null,selectedSymbols:[],showEffect:!1,isCrossWide:!1}},created:function(){this.updateSelectedTextDebounced=(0,l.Ds)((function(){var t=new B,e=this.$store.state.book.rightToLeft,i=t.getSelectedText(this.selectedSymbols,e);this.$store.dispatch("text/setSelectedText",i)}),100),this.drawSelectionDebounced=(0,l.Ds)(this.drawSelection,100),this.isCurrent&&this.getAndParseXML()},beforeDestroy:function(){this.updateSelectedTextDebounced.destroy()},methods:{initContext:function(){var t=this.$el.getElementsByTagName("canvas")[0];t&&(this.context=t.getContext("2d"))},resetContex},getAndParseXML:function(){if(this.$store.getters["search/isSelectTextInfoLoaded"](this.pageId)){var t="slide-book"===this.$store.state.workspace.bookComponent&&this.$store.state.pager.slideMode,e=this.$store.getters["search/getSelectTextInfo"](this.pageId,"right"===this.pageSide,t);this.finalTree=Object.freeze(e.finalTree),this.isCrossWide=e.isCrossWide,this.isRtlSelection=e.isRtlSelection,0!==this.userRect.width&&this.parseRect(this.$store.state.text.selectionRect)}},parseRect:function(t){if(this.isWide&&!this.isCrossWide){var e=this.$store.getters["pages/pageProp"](this.pageId,"width")/2;if("left"===this.pageSide&&t.left>=e||"right"===this.pageSide&&t.left<e)return void(this.selectedSymbols=[])}if(this.isCurrent){var i=new T(this.finalTree,this.isRtlSelection);this.selectedSymbols=i.selectSymbols(t,this.allowedRect),this.updateSelectedTextDebounced()}else this.selectedSymbols=[]},getPageRect:function(){this.$store.state.workspace.containerSize.width>0?this.pageRect=this.$el.getBoundingClientRect():this.pageRect=null},getBorderCollisions:function(t){return this.allowedRect?{left:t.left<this.allowedRect.left,right:t.right>this.allowedRect.left+this.allowedRect.width,top:t.top<this.allowedRect.top,bottom:t.bottom>this.allowedRect.bottom}:{}},getCornerSymbol:function(t){return{isRtlSelection:this.isRtlSelection,top:Math.round(t.top*this.containerSize.scaleRatio.h),left:Math.round(t.left*this.containerSize.scaleRatio.w),width:Math.round(t.width*this.containerSize.scaleRatio.w),height:Math.round(t.height*this.containerSize.scaleRatio.h),collisions:this.getBorderCollisions(t)}},drawSelection:function(){if(0!==this.selectedSymbols.length){this.context||this.initContext(),this.context.clearRect(0,0,this.containerSize.width,this.containerSize.height),this.context.fillStyle="#027bff";for(var t=0,e=this.selectedSymbols.length;t<e;t++){var i=this.selectedSymbols[t];this.context.fillRect(i.left*this.containerSize.scaleRatio.w-(this.isWide&&"right"===this.pageSide?this.pageRect.width/2:0),i.top*this.containerSize.scaleRatio.h,i.width*this.containerSize.scaleRatio.w+1,i.height*this.containerSize.scaleRatio.h)}}}},watch:{userRect:function(t,e){t.top===e.top&&t.left===e.left&&t.width===e.width&&t.height===e.height||this.parseRect(t)},selectedSymbols:function(t){var e=this;null!==t?(t.length>0?this.$nextTick((function(){e.drawSelection()})):this.resetContext(),this.cornerTimeout=setTimeout((function(){if(!(e.selectedSymbols.length<1)){var t,i;if(1===e.selectedSymbols.length)t=i=e.selectedSymbols[0];else if(e.isRtlSelection){var s=e.selectedSymbols.findIndex((function(t){return t.lineBreak}));t=-1===s?e.selectedSymbols[0]:e.selectedSymbols[s-1];for(var o=e.selectedSymbols.length-1;o>=0&&!e.selectedSymbols[o].lineBreak;)o-=1;i=-1===o?e.selectedSymbols[e.selectedSymbols.length-1]:o===e.selectedSymbols.length-1?e.selectedSymbols[o-1]:e.selectedSymbols[o+1]}else t=e.selectedSymbols[0],10===(i=e.selectedSymbols[e.selectedSymbols.length-1]).word.charCodeAt(0)&&(i=e.selectedSymbols[e.selectedSymbols.length-2]);e.$store.dispatch("text/setCornerSymbols",{first:e.getCornerSymbol(t),last:e.getCornerSymbol(i)})}}),50),0===this.selectedSymbols.length&&this.$root.$emit("selectText:hidePanel")):this.$root.$emit("selectText:hidePanel")},isCurrent:function(t){var e=this;t&&(0===this.finalTree.length&&this.getAndParseXML(),this.$nextTick((function(){e.getPageRect()})))},selectTextInfoLoade},animationInProgress:function(t){t||this.$store.getters["pager/isCurrentPage"]({pageId:this.pageId,pageSide:this.pageSide})&&this.getPageRect()}},computed:{canvasClass:function(){return{"select-text-canvas":!0,"show-effect":this.showEffect,"hide-before-effect":!this.showEffect&&this.effectOn}},effectOn:function(){return this.$store.state.text.effect},userRect:function(){var t={top:0,left:0,width:0,height:0};return this.$store.state.text.selectionRect&&(this.pageId===this.$store.state.text.pageID&&this.isWide&&this.pageSide!==this.$store.state.text.pageSide||this.pageId===this.$store.state.text.pageID&&this.pageSide===this.$store.state.text.pageSide&&this.isCurrent)?this.$store.state.text.selectionRect:t},allowedRect:function(){if(this.isWide&&this.isCrossWide&&this.singleMode){var t=this.$store.getters["pages/pageProp"](this.pageId,"width")/2;return{left:"right"===this.pageSide?t:0,width:t,top:0,height:this.$store.getters["pages/pageProp"](this.pageId,"height")}}},singleMode:function(){return this.$store.state.pager.singleMode},showCanva},selectTextInfoLoaded:function(){return this.$store.state.search.selectTextInfoLoaded},animationInProgress:function(){return this.$store.getters["workspace/animationInProgress"]}}},V=i(2155),j={name:"select-text",mixins:[Z],dat},mounted:function(){var t=this;this.$nextTick((function(){t.getPageRect()})),this.$parent.$parent.$on("highlight",this.highlight),this.$root.$on("zoomMove",this.zoomMove),this.effectOn&&this.$el.addEventListener("mousemove",this.checkMousePosition)},beforeDestroy:function(){this.resetContext(),this.$parent.$parent.$off("highlight",this.highlight),this.$root.$off("zoomMove",this.zoomMove),this.$el.removeEventListener("mousemove",this.checkMousePosition)},methods:{highlight:function(){var t=this;this.effectOn&&(this.panEnd(),this.showEffect=!0,setTimeout((function(){t.showEffect=!1,t.$store.dispatch("text/setEffect",!1)}),3e3))},reset:function(t){this.effectOn||(this.$el.removeEventListener("mousemove",this.checkMousePosition),this.$root.$emit("selectText:hidePanel"),t&&"panstart"===t.type&&(this.isActive=!0),this.$store.dispatch("text/reset"))},pan:function(t){if(this.pageRect&&this.isLoaded&&this.isCurrent&&(!this.isZoomed||!this.isDragging)&&this.isActive&&!this.selectAll&&!this.effectOn&&!this.animationInProgress){var e={top:t.deltaY>0?t.center.y-t.deltaY-this.pageRect.top:t.center.y-this.pageRect.top,left:t.deltaX>0?t.center.x-t.deltaX-this.pageRect.left:t.center.x-this.pageRect.left,width:Math.abs(t.deltaX),height:Math.abs(t.deltaY),offsetX:this.containerSize.offsetX,offsetY:this.containerSize.offsetY,cursorHSide:t.deltaX>0?"right":"left",cursorVSide:t.deltaY>0?"bottom":"top"};if(e.top=e.top/this.containerSize.scaleRatio.h,e.left/=this.containerSize.scaleRatio.w,e.width/=this.containerSize.scaleRatio.w,e.height/=this.containerSize.scaleRatio.h,this.isWide&&!this.isCrossWide){if("right"===e.cursorHSide&&"left"===this.pageSide&&e.left+e.width>this.containerSize.width/this.containerSize.scaleRatio.w)return;if("left"===e.cursorHSide&&"right"===this.pageSide&&e.left<this.containerSize.width/this.containerSize.scaleRatio.w)return}this.$store.dispatch("text/setSelectionAttributes",{pageID:this.pageId,pageSide:this.pageSide,selectionRect:e})}},selectAllPageContent:function(){var t=this.$store.getters["pages/pageProp"](this.pageId,"wide"),e="right"===this.pageSide,i="slide-book"===this.$store.state.workspace.bookComponent&&"slide"===this.$store.state.pager.mode,s=this.$store.getters["search/getSelectTextInfo"](this.pageId,e,i).isCrossWide,o=this.$store.getters["pages/pageProp"](this.pageId,"width")/(t&&!s?2:1),r={height:this.$store.getters["pages/pageProp"](this.pageId,"height"),width:o,offsetX:this.containerSize.offsetX,offsetY:this.containerSize.offsetY,cursorHSide:"left",cursorVSide:"bottom"},n=s?{top:0,left:0}:e&&t?{left:o,top:0}:{top:0,left:0},a=(0,V.Z)(n,r);this.$store.dispatch("text/setSelectionAttributes",{pageID:this.pageId,pageSide:this.pageSide,selectionRect:a,selectAll:this.selectAll})},finalizePreliminarySelection:function(){var t={offsetX:this.containerSize.offsetX,offsetY:this.containerSize.offsetY},e=(0,V.Z)({},t,this.$store.state.text.selectionRect);e.width*=1,e.height*=1,e.top*=1,e.left*=1,this.$store.dispatch("text/setSelectionAttributes",{pageID:this.pageId,pageSide:this.pageSide,selectionRect:e})},panEnd:function(t){t&&t.srcEvent&&0===t.srcEvent.button&&this.mouseUp(),this.isActive=!1},mouseUp:function(){var t=this;setTimeout((function(){t.selectedSymbols.length>0&&(t.$root.$emit("selectText",{action:"select",pageId:t.pageId,text:t.$store.state.text.selectedText}),t.$root.$emit("selectText:showPanel"),t.$el.addEventListener("mousemove",t.checkMousePosition))}),100)},zoomMove:function(t){"drag"===t.direction&&(this.isDragging=t.active)},checkMousePosition:function(t){this.$parent.$parent.isPointInSelection(t)?this.$root.$emit("selectText:showPanel"):this.$root.$emit("selectText:hidePanel",{forceHide:!1})}},watch:{isActive:function(t){this.$store.dispatch("text/setInProgressSelection",t)},pageSize:function(){var t=this;this.$root.$emit("selectText:hidePanel"),this.$nextTick((function(){t.getPageRect()}))},sidebar:function(){var t=this;this.$root.$emit("selectText:hidePanel"),this.$nextTick((function(){t.getPageRect()}))},wsContainerSize:function(){var t=this;this.$root.$emit("selectText:hidePanel"),this.$nextTick((function(){t.getPageRect()}))},scrollPosition:function(){var t=this;this.$nextTick((function(){t.getPageRect()}))},isLoaded:function(t){this.getPageRect()},animationInProgres},pageResiz},selectAl},preliminarySelectio},containerSiz}},computed:{inspectorMode:function(){return this.$store.state.workspace.inspectorMode},selectAll:function(){return this.$store.state.text.selectAll&&this.pageId===this.$store.state.text.pageID&&this.pageSide===this.$store.state.text.pageSide},preliminarySelection:function(){return this.$store.state.text.preliminarySelection&&this.pageId===this.$store.state.text.pageID&&this.pageSide===this.$store.state.text.pageSide},validContainerSize:function(){var t,e;return(null===(t=this.containerSize)||void 0===t?void 0:t.width)>0&&(null===(e=this.containerSize)||void 0===e?void 0:e.height)>0},textBlockSizes:function(){var t=this;return this.finalTree.map((function(e){return{width:Math.ceil(e.width*t.containerSize.scaleRatio.w),height:Math.ceil(e.height*t.containerSize.scaleRatio.h),left:Math.floor(e.left*t.containerSize.scaleRatio.w),top:Math.floor(e.top*t.containerSize.scaleRatio.h)}}))},pageSize:function(){return this.$store.state.pages.size},sidebar:function(){return this.$store.state.sidebar.opened},wsContainerSize:function(){return this.$store.state.workspace.containerSize},scrollPosition:function(){return this.$store.getters["text/holderScroll"]},isZoome},animationInProgress:function(){return this.$store.getters["workspace/animationInProgress"]},pageResize:function(){return this.$store.getters["pages/pageProp"](this.pageId,"pageResize")}}},U=i(1900),G=(0,U.Z)(j,g,f,!1,null,"22b6e05d",null).exports,X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-touch",{staticClass:"selecttext",style:t.contStyle,on:{tap:t.reset}},[this.showCanvas?i("canvas",{class:t.canvasClass,style:{position:"absolute",right:"right"===t.pageSide&&t.isWide?0:"none"},attrs:{width:t.containerSize.width,height:t.containerSize.height}}):t._e()])},Y=[],q={name:"select-text-mobile",mixins:[Z],mounted:function(){var t=this;this.$nextTick((function(){t.getPageRect()})),this.$parent.$parent.$on("highlight",this.highlight)},beforeDestro},methods:{highlight:function(){var t=this;this.effectOn&&(this.showEffect=!0,setTimeout}),3e3))},reset:function(){this.$store.dispatch("text/reset")}},watch:{containerSize:function(){this.getAndParseXML()},animationInProgress:function(){this.$store.dispatch("text/reset")}},computed:{animationInProgress:function(){return this.$store.getters["workspace/animationInProgress"]}}},K=(0,U.Z)(q,X,Y,!1,null,"6d6ab027",null).exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-touch",{staticClass:"publication-note",style:t.noteStyle,attrs:{"data-note-id":t.data.id},on:{tap:t.onNoteClick}},[i("div",{ref:"icon",class:t.iconClass},[i("svgicon",{attrs:{focusable:"false",name:"note-content"}})],1)])},J=[],tt=(i(2150),i(2567)),et={name:"Note",props:{data:{type:Object,default:function(){return{}}},pageSize:{type:Object,defaul}},pageSide:{type:String,default:""},isWide:Boolean,isOutsideHardcover:Boolean},data:function(){return{state:"mini",offsetX:0,offsetY:0,deltaX:0,deltaY:0,minDeltaX:0,minDeltaY:0,maxDeltaX:0,maxDeltaY:0,onMove:!1,position:"absolute",leftOffset:16,rightOffset:16,topOffset:28,bottomOffset:4,ieOffsetX:0,ieOffsetY:0}},computed:{isIE:function(){return!!this.$store.state.workspace.userAgentInfo.browser.msie},isOpened:function(){return this.$store.state.notes.opened===this.data.id},isFirstPage:function(){return this.$store.getters["pages/isFirstPage"](this.data.page)},isLastPag},scale:function(){return{w:this.pageSize.width/this.$store.state.book.bookSize.width/("both"===this.pageSide?2:1),h:this.pageSize.height/this.$store.state.book.bookSize.height}},noteStyle:function(){var t=0,e=0,i=0;if(this.isWide&&"right"===this.pageSide&&(t=-this.pageSize.width),this.onMove){if("right"===this.pageSide){var s=this.slideMode&&(this.isFirstPage&&!this.rtl||this.isLastPage&&this.rtl);this.isOutsideHardcover||s||(e=this.pageSize.width)}if("left"===this.pageSide)this.slideMode&&(this.isLastPage&&!this.rtl||this.isFirstPage&&this.rtl)||(i=this.pageSize.width);this.slideMode&&(this.pagerSlideMode&&"both"!==this.pageSide||this.pagerSingleMode)&&(e=0,i=this.pageSize.width),this.pagerSingleMode&&(this.isIE?this.isFirstPage||"right"!==this.pageSide||this.isLastPage&&this.$store.getters["pages/pagesCount"]%2==0||(t-=this.pageSize.width):this.rtl&&"right"===this.pageSide?t-=this.pageSize.width:this.rtl||"left"!==this.pageSide||(t+=this.pageSize.width))}var o=this.data.pX*this.scale.w+this.deltaX+e+t;o=Math.max(this.leftOffset,Math.min(this.pageSize.width+e+i-this.rightOffset,o));var r=this.data.pY*this.scale.h+this.deltaY;return r=Math.max(this.topOffset,Math.min(this.pageSize.height-this.bottomOffset,r)),{"z-index":this.data.id+1e4,position:this.position,top:r+this.ieOffsetY+"px",left:o+this.ieOffsetX+"px"}},iconClass:function(){var t=["note-icon",this.data.color,this.state];return this.isOpened&&t.push("opened"),t},rtl:function(){return this.$store.state.book.rightToLeft},slideMode:function(){return"slide-book"===this.$store.state.workspace.bookComponent},pagerSlideMode:function(){return this.$store.state.pager.slideMode},pagerSingleMode:function(){return this.$store.state.pager.singleMode},currentBookHolde},isFrozenOrNotReady:function(){return this.$store.state.workspace.freezed||"ready"!==this.$store.state.workspace.status||this.$store.state.workspace.isResizing||this.$store.state.pager.freezed}},mounted:function(){this.$refs.icon.addEventListener("mousedown",this.iconMouseDown,!0),this.parentEl=this.$el.parentElement},beforeDestro},methods:{onNoteClick:function(t){var e=this;this.isFrozenOrNotReady||(0,l.iZ)(t.target).some}))&&(this.isOpened?this.$store.dispatch("notes/setOpenedId",{id:null}):this.$store.dispatch("notes/setOpenedId",{id:this.data.id}))},iconMouseDown:function(t){0===t.button&&(t.preventDefault(),t.stopPropagation(),this.offsetX=t.pageX,this.offsetY=t.pageY,this.isOpened||this.$store.dispatch("notes/setOpenedId",{id:null}),this.$store.dispatch("notes/setMoving",!0),document.addEventListener("mousemove",this.iconMouseMove),document.addEventListener("mouseup",this.iconMouseUp))},iconMouseMove:function(t){if(t.stopPropagation(),!this.onMove){if(this.moveElementToSpreadNotes(),this.slideMode&&!this.pagerSingleMode)this.minDeltaX=this.leftOffset-this.data.pX*this.scale.w,this.maxDeltaX=this.pageSize.width-this.data.pX*this.scale.w-this.rightOffset;else if("left"===this.pageSide){this.minDeltaX=this.leftOffset-this.data.pX*this.scale.w;var e=!this.isWide&&(this.isLastPage&&!this.rtl||this.isFirstPage&&this.rtl)?1:2;this.maxDeltaX=this.pageSize.width*e-this.data.pX*this.scale.w-this.rightOffset}else{var i=!this.isWide&&(this.isFirstPage&&!this.rtl||this.isLastPage&&this.rtl)?0:this.pageSize.width;this.minDeltaX=(this.isWide?this.pageSize.width:0)+this.leftOffset-i-this.data.pX*this.scale.w,this.maxDeltaX=this.pageSize.width*(this.isWide?2:1)-this.data.pX*this.scale.w-this.rightOffset}if(!this.pagerSingleMode||this.isFirstPage||this.isLastPage&&this.$store.getters["pages/pagesCount"]%2==0||("left"===this.pageSide?this.maxDeltaX-=this.pageSize.width:"right"===this.pageSide&&(this.minDeltaX+=this.pageSize.width)),this.minDeltaY=this.topOffset-this.data.pY*this.scale.h,this.maxDeltaY=(this.pageSize.height/this.scale.h-this.data.pY)*this.scale.h-this.bottomOffset,!this.isOutsideHardcover){if(this.isIE){var s=this.currentBookHolder.getBoundingClientRect(),o=this.getIEDeltaOffset();this.ieOffsetX=s.left-o,this.ieOffsetY=s.top}this.position="fixed"}this.onMove=!0,this.state="move"}this.deltaX=Math.max(this.minDeltaX,Math.min(t.pageX-this.offsetX,this.maxDeltaX)),this.deltaY=Math.max(this.minDeltaY,Math.min(t.pageY-this.offsetY,this.maxDeltaY))},getIEDeltaOffset:function(){if(this.slideMode&&this.pagerSlideMode)return 0;var t=this.$store.getters["pager/state"];return!this.isWide&&this.isLastPage&&this.rtl&&t.rightPage!==this.data.page||!this.isWide&&this.isFirstPage&&!this.rtl?this.pageSize.width:0},iconMouseUp:function(){if(document.removeEventListener("mousemove",this.iconMouseMove),document.removeEventListener("mouseup",this.iconMouseUp),this.$store.dispatch("notes/setMoving",!1),this.moveElementToPageContainer(),this.onMove){this.isIE&&(this.ieOffsetX=0,this.ieOffsetY=0),this.onMove=!1,this.position="absolute";var t=this.data.page,e=this.deltaX/this.scale.w+this.data.pX;this.isWide||("left"===this.pageSide?e>this.pageSize.width/this.scale.w&&(e-=this.pageSize.width/this.scale.w,this.rtl?t--:t++):e<0&&(e+=this.pageSize.width/this.scale.w,this.rtl?t++:t--),e<this.leftOffset/this.scale.w&&(e=this.leftOffset/this.scale.w),e>this.pageSize.width/this.scale.w-this.rightOffset/this.scale.w&&(e=this.pageSize.width/this.scale.w-this.rightOffset/this.scale.w)),this.$store.dispatch("notes/moveNote",{id:this.data.id,page:t.toString(),pX:Math.round(100*e)/100,pY:Math.round(100*(this.deltaY/this.scale.h+this.data.pY))/100}),this.state="mini",this.deltaX=0,this.deltaY=0}},moveElementToSpreadNotes:function(){this.slideMode||this.isOutsideHardcover||(this.spreadNotesEl||(this.spreadNotesEl=this.createSpreadNotesElement()),this.spreadNotesEl.appendChild(this.$el))},moveElementToPageContainer:function(){this.slideMode||this.isOutsideHardcover||this.parentEl.appendChild(this.$el)},createSpreadNotesElement:function(){var t=document.getElementById("spread-notes");if(!t){var e=document.getElementById("book");t=tt.Z.createElement("div",{id:"spread-notes"},e)}return t}}},it=(0,U.Z)(et,Q,J,!1,null,"4f0d47b2",null).exports,st=i(924),ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes},[i("div",{staticClass:"flip-me-backface",style:t.backfaceStyle},[t.isTranslucentReverseSide?t._l(t.backfaceBackgrounds,(function(e,s){return i("img",{key:s,staticClass:"flip-me-image",style:t.backfaceImgStyle,attrs:{crossOrigin:t.crossOrigin,src:e}})})):t._e(),t._v(" "),i("div",{staticClass:"flip-me-gradient2",style:t.backGradientStyle})],2),t._v(" "),i("div",{staticClass:"flip-me-mask",style:t.maskStyle},[i("div",{staticClass:"flip-me-gradient",style:t.nextGradientStyle}),t._v(" "),i("div",{staticClass:"flip-me-shift-page",style:t.shiftPageStyle},[i("div",{staticClass:"flip-me-next-page",style:t.nextPageStyle},t._l(t.nextBackgrounds,(function(e,s){return i("img",{key:s,staticClass:"flip-me-image",style:t.nextImgStyle,attrs:{crossOrigin:t.crossOrigin,src:e}})})),0)])])])},rt=[],nt=i(2029),at=i.n(nt),ht=(H=window.getComputedStyle(document.documentElement,""),N=(Array.prototype.slice.call(H).join("").match(/-(moz|webkit|ms)-/)||""===H.OLink&&["","o"])[1],{dom:"WebKit|Moz|MS|O".match(new RegExp("("+N+")","i"))[1],lowercase:N,css:"-"+N+"-",js:N[0].toUpperCase()+N.substr(1)}),lt={name:"FlipMe",props:{pageId:{type:String,required:!0},isLeft:{type:Boolean,required:!0}},data:function(){return{angle:0,width:0,backfaceParams:null,nextPageParams:null,tween:null,crossOrigin:(0,d.Z)().getCrossOrigin()}},created:function(){var t=this.$store.getters["pager/flipState"],e=this.isLeft?t.currentLeft:t.currentRight,i=e+(this.isLeft?-1:1),s=e+(this.isLeft?-2:2);this.backfaceParams=this.$store.getters["pager/flipParams"](i),this.nextPageParams=this.$store.getters["pager/flipParams"](s)},mounted:function(){var t=this,e={angle:19,width:0};this.tween=new(at().Tween)(e).to({angle:19,width:7},800).easing(at().Easing.Cubic.InOut).onUpdate((function(){if(t.width=e.width,t.angle=e.angle,0===e.width){var i=5*Math.random()+3,s=11*Math.random()+19;setTimeout}),10)}})).yoyo(!0).repeat(1/0).delay(2e3).repeatDelay(200).start(),this.$parent.$once("onContentContainerClick",this.stopAnimation)},beforeDestroy:function(){this.stopAnimation()},computed:{classes:function(){return{"flip-me-container":!0,left:this.isLeft,"translucent-reverse-side":this.singleMode&&this.isTranslucentReverseSide}},singleMode:function(){return this.$store.state.pager.singleMode},isRTLBook:function(){return this.$store.state.book.rightToLeft},isTranslucentReverseSide:function(){return this.$store.state.workspace.components.book.isTranslucentReverseSide},nextBackgrounds:function(){return this.getBackgroundsArray(this.nextPageParams.pageId)},backfaceBackground},pagesSize:function(){return this.$store.getters["pages/size"]},backfaceImgStyle:function(){return this.getImageStyle(this.backfaceParams)},nextImgStyle:function(){return this.getImageStyle(this.nextPageParams)},maskStyle:function(){var t=100-this.width;return{transform:this.isLeft?"rotate3d(0,0,1,-".concat(this.angle,"deg) translate3d(-").concat(t,"%, 0%, 0)"):"rotate3d(0,0,1,".concat(this.angle,"deg) translate3d(").concat(t,"%, 50%, 0)"),transformOrigin:this.isLeft?"".concat(100-t,"% 100%"):"100% 100%"}},nextPageStyle:function(){var t=100-this.width;return{transform:this.isLeft?"rotate3d(0,0,1,".concat(this.angle,"deg)"):"rotate3d(0,0,1,-".concat(this.angle,"deg)"),transformOrigin:this.isLeft?"".concat(100-t,"% 100%"):"100% 100%",backgroundColor:this.$store.getters["pages/pageProp"](this.nextPageParams.pageId,"backgroundColor")}},shiftPageStyle:function(){var t=100-this.width;return{transform:this.isLeft?"translate3d(".concat(t,"%, 0%,0)"):"translate3d(-".concat(t,"%, -50%,0)")}},backfaceStyle:function(){var t,e,i=90-this.angle,s=this.width/Math.sin(i*Math.PI/180);if(this.isLeft){var o=s,r=100-2*s;t="rotate(-".concat(2*this.angle,"deg) translate3d(-").concat(r,"%, 0%,0)"),e="".concat(o,"% 100%")}else{var n=100-s,a=n-s;t="rotate(".concat(2*this.angle,"deg) translate3d(").concat(a,"%, 0%,0)"),e="".concat(n,"% 100%")}return{transform:t,transformOrigin:e,backgroundColor:this.$store.getters["pages/pageProp"](this.backfaceParams.pageId,"backgroundColor")}},nextGradientStyle:function(){return{background:ht.css+"linear-gradient(".concat(this.isLeft?"right":"left",", rgba(0, 0, 0, ").concat((65-this.width)/100,") 0px, transparent ").concat(this.width,"%)")}},backGradientStyle:function(){var t=90-this.angle,e=this.width/Math.sin(t*Math.PI/180);return{transform:this.isLeft?"rotate(".concat(this.angle,"deg) translate3d(0, 10%, 1px)"):"rotate(-".concat(this.angle,"deg) translate3d(0, 10%, 1px)"),transformOrigin:"100% 100%",width:e+"%"}}},methods:{stopAnimatio},getBackgroundsArray:function(t){var e=[];if(t){var i=this.$store.getters["pages/pageProp"](t,"textUrl"),s=this.$store.getters["pages/pageProp"](t,"substrateUrl");e.push(s),i&&e.push(i)}return e},getImageStyle:function(t){var e=t.wide,i="right"===t.pageSide,s=this.$store.state.pages.size.width,o=document.querySelector('.background[data-id="'+t.pageId+'"]');return(o&&o.style?o.style.cssText:"")+(e&&i?" transform: translate3d(-".concat(s,"px,0,0);"):"")}}},ct=(0,U.Z)(lt,ot,rt,!1,null,"75383dbe",null).exports,dt=i(9426}function pt(t,e){if(t){if("string"==typeof t)return gt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?gt(t,e):void 0}}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function ft(){return ft=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},ft.apply(this,arguments)}var mt={mixins:[u,p.Z],props:{contentCreator:{type:Function,default:function(){}},deferPageLoad:{type:Boolean,default:!0},autoHighlight:{type:Boolean,default:!0}},data:function(){return{zoomInProgress:!1,initialIconsHide:!0,initialPopupIconHighlight:!1,initialLinkHighlight:!1,isHighlighted:!1,iconAttract:!1,contentItemsReady:0,highlightTimeout:null,highlightOffTimeout:null,linkHighlightOffTimeout:null,iconAttractInterval:null,preloaderVisibleCache:!1,backgroundsCache:null,vectorLayerCache:null,isLoadingCache:null,updatePendingCache:null,tapTimeout:0,canvasUpdated:!1,resizeCancelled:!1,cancelResize:function(){},urlBlackList:this.$store.state.workspace.urlBlackList,stubUrl:(0,d.Z)().translatePath("assets/pages/pagestub.png"),devicePixelRatio:window.devicePixelRatio,isLoading:!0,isSVGSupported:!1,textUrl:null,substrateUrl:null,pageContent:null,contentActive:!0,hideLeftStripe:null,hideRightStripe:null,noImageCache:!1}},components:{spinner:dt.Z,selectText:G,selectTextMobile:K,note:it,flipMe:ct},watch:{rawIsLoadin},isLoading:function(t){var e=this;t||setTimeout}),400),this.refreshCache()},updatePending:function(t){this.refreshCache(),t&&!this.hasError&&this.setCursor("progress")},isZoomed:function(t){t||this.setCursor("inherit"),1===this.substrateNum&&this.updateCanvasDebounced(!0)},isCurrent:function(t){this.lastIsCurrent!==t&&(this.alreadyLoaded&&this.getProperties(),t?(this.checkHighlight(),this.updateCanvasDebounced(!1)):(this.stopHighlight(),this.initialIconsHide=!0,this.stopIconAttract(),this.cancelResize("not current",!0)),this.lastIsCurrent=t)},contentPagesArra},content:function(t){t.length>0&&this.$emit("content:changed"),this.refreshCache()},isResizing:function(t){this.$emit("resize:"+(t?"start":"end")),this.refreshCache(),t?this.stopHighlight():this.checkHighlight()},contentFreezed:function(t){this.refreshCache(),t?this.cancelResize("freezed",!0):(this.resizeCancelled=!1,this.updateCanvasDebounced(!1))},preloaderVisible:function(t,e){this.refreshCache(),this.isCurrent&&!t&&e&&this.$root.$emit("pageLoaded")},backgrounds:function(){this.refreshCache()},backgroundsCache:function(){this.updateCanvasDebounced(!0)},isHighlighte}},created:function(){var t=this;this.updateCanvasDebounced=(0,l.Ds)((function(e){e&&(t.canvasUpdated=!1),t.updateCanvas()}),1e3),this.isLoading=this.rawIsLoading},mounted:function(){this.refreshCache(),this.$root.$on("zoomMove",this.zoomMove),this.getContent(),window.addEventListener("resize",this.onResize)},beforeUpdate:function(){this.contentItemsReady>this.content.length&&(this.contentItemsReady=this.content.length)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize),this.cancelResize("destroyed",!0),this.updateCanvasDebounced.destroy(),this.$root.$off("zoomMove",this.zoomMove),this.stopHighlight(),clearInterval(this.iconAttractInterval),this.$refs.bgImage.onload=null,this.$refs.bgImage.onerror=null,this.$refs.bgImage.src="",this.$refs.bgSVG&&(this.$refs.bgSVG.src="")},methods:{bgCacheImageLoaded:function(t){this.isZoomed&&t===this.substrateUrl&&this.setCursor("inherit")},getContent:function(){this.pageContent=this.$store.getters["pages/pageContent"](this.pageId)},getProperties:function(){this.isSVGSupported=this.$store.getters["pages/isSVGSupported"](this.pageId),this.thumbnailUrl=this.$store.getters["pages/pageProp"](this.pageId,"thumbnailUrl"),this.textUrl=this.$store.getters["pages/pageProp"](this.pageId,"textUrl"),this.substrateUrl=this.$store.getters["pages/pageProp"](this.pageId,"substrateUrl"),this.isReady=this.$store.getters["pages/pageProp"](this.pageId,"status")===st.Z.READY,this.loadPending=this.$store.getters["pages/pageProp"](this.pageId,"loadPending"),this.hasError=this.$store.getters["pages/hasError"](this.pageId)},getAPIProperties:function(){this.isWide=this.$store.getters["pages/pageProp"](this.pageId,"wide"),this.isStub=this.$store.getters["pages/pageProp"](this.pageId,"stub");var t=this.$store.getters["pages/isLastPage"](this.pageId)&&this.$store.getters["pages/pageIndexById"](this.pageId)%2!=0&&!this.isWide&&!this.$store.state.pager.singleMode;this.isOutsideHardcover="flip-book"===this.bookComponent&&this.$store.getters["book/hasHardcover"]&&(this.$store.getters["pages/isFirstPage"](this.pageId)||t),this.backgroundColor=this.isOutsideHardcover?this.$store.state.book.hardcoverColor:this.enforceTransparentBg?null:this.$store.getters["pages/pageProp"](this.pageId,"backgroundColor")},refreshCache:function(){var t=this;this.contentFreezed||this.$nextTick}))},isVisible:function(t){return!this.isWide||"both"===this.pageSide||t.side===this.pageSide||t.crossWide},checkPageStripes:function(t){if(!this.isCurrent||this.isZoomed||"flip-book"!==this.bookComponent||t.srcEvent.metaKey||t.srcEvent.ctrlKey)return!1;var e=this.$el.getBoundingClientRect(),i=this.$store.getters["pager/state"].singleMode,s=i?this.isRTLBook:"left"===this.pageSide,o=i?!this.isRTLBook:"right"===this.pageSide;return s&&!this.hideLeftStripe&&t.center.x-e.left<.05*e.width?(this.leftStripeTap(),!0):!!(o&&!this.hideRightStripe&&t.center.x-e.left>.95*e.width)&&(this.rightStripeTap(),!0)},onMouseDow},onContentTap:function(t){var e=this;if(!this.isWorkspaceFrozen){null!==this.$store.state.text.selectionRect&&this.$store.dispatch("text/reset");var i=t.target.classList;if(i)if(i.contains("link"))this.isMobile&&this.$root.$emit("link-highlight",{itemId:t.target.dataset.itemId}),Date.now()>this.tapTimeout&&(setTimeout}),this.$store.state.workspace.doubletapInterval+1),this.tapTimeout=Date.now()+this.$store.state.workspace.doubletapInterval);else if("desktop"===this.layout){var s=(0,l.UZ)(t.target);if(!i.contains("block")&&!i.contains("text-block")&&-1===s.indexOf("content")&&this.checkPageStripes(t))return;(i.contains("content")||i.contains("block")||i.contains("text-block")||i.contains("selecttext")||i.contains("select-text-canvas"))&&setTimeout((function(){if(!(e.$store.state.workspace.highlightTimeout+350>Date.now())){e.clearHighlightTimeouts(),e.isHighlighted=!(e.isHighlighted||e.initialLinkHighlight||e.initialPopupIconHighlight),e.initialIconsHide=!1,e.initialPopupIconHighlight=!1,e.initialLinkHighlight=!1;var t=e.getSpreadTwin();null!==t&&(t.clearHighlightTimeouts(),t.isHighlighted=e.isHighlighted,t.initialIconsHide=!1,t.initialPopupIconHighlight=!1,t.initialLinkHighlight=!1);var i=e.$store.getters["pages/urlHeaderById"]({id:e.pageId,forceFullWide:"both"===e.pageSide,widePageSecondHalf:"right"===e.pageSide});e.$root.$emit("highlight",{action:e.isHighlighted?"on":"off",page:i})}}),350)}}},linkTo:function(t){if("ready"===this.bookStatus){var e=t.getAttribute("data-id"),i=t.getAttribute("data-url");if(e&&!i)this.$store.dispatch("pager/goToPageById",{id:e,target:"link"}),this.$emit("link:click",t),this.$root.$emit("link",{type:"internal",source:"page",pageId:this.pageId,pageToId:e});else if(i){var s=!1===this.checkUrl(i);if(this.$root.$emit("link",{type:"external",pageId:this.pageId,url:i,target:t.target,source:null,isBlacklisted:s}),s)return;t.setAttribute("href",i),t.click(),t.removeAttribute("href"),this.$emit("link:click",t)}}},checkUrl:function(t){for(var e=0;e<this.urlBlackList.length;e++)if(-1!==t.indexOf(this.urlBlackList[e]))return!1;return!0},checkHighlight:function(){var t=this;if(this.isCurrent){var e=this.getSpreadTwin();null!==e&&e.isLoading?e.$once("loaded"})):this.isLoading||this.isResizing||this.isPreloaderShown?this.isLoading&&this.content.length>0?this.$once("loaded",(function(){this.checkHighlight()})):this.isPreloaderShown?this.$once("preloader:off",(function(){this.checkHighlight()})):0===this.content.length&&this.$once("content:changed",(function(){this.checkHighlight()})):(this.autoHighlight&&this.highlightContent(),this.$emit("highlight"))}},startIconAttract:function(){var t=this;if(this.isPrimarySpreadPage){var e=this.getSpreadTwin();this.iconAttractInterval=setInterval((function(){t.iconAttract=!0,e&&(e.iconAttract=!0),setTimeout((function(){t.iconAttract=!1,e&&(e.iconAttract=!1)}),1800)}),8e3)}},stopIconAttract:function(){var t=this.getSpreadTwin();clearInterval(this.iconAttractInterval),this.iconAttract=!1,t&&(t.iconAttract=!1)},clearHighlightTimeout},stopHighligh},highlightContent:function(){var t=this;if(this.isPrimarySpreadPage){var e=this.getSpreadTwin();this.highlightTimeout=setTimeout((function(){t.initialIconsHide=!1,t.initialPopupIconHighlight=!0,t.initialLinkHighlight=!0,e&&(e.initialIconsHide=!1,e.initialPopupIconHighlight=!0,e.initialLinkHighlight=!0),t.highlightOffTimeout=setTimeout((function(){t.initialPopupIconHighlight=!1,e&&(e.initialPopupIconHighlight=!1),t.startIconAttract()}),2e3),t.linkHighlightOffTimeout=setTimeout((function(){t.initialLinkHighlight=!1,e&&(e.initialLinkHighlight=!1)}),1700)}),100)}},contentItemReady:function(t){"link"!==t.data.type&&this.contentItemsReady++},contentError:function(){this.$store.dispatch("pages/setStatus",{value:st.Z.ERROR,pageID:this.pageId})},updateCanvas:function(){var t=this,e=this.isZoomed&&this.substrateNum>1;if(!("desktop"!==this.layout||!this.isCurrent||e||this.canvasUpdated||this.contentFreezed||this.devicePixelRatio>1.5)&&(!this.isWide||"right"!==this.pageSide||this.$store.state.pager.singleMode)&&this.backgroundsCache&&this.backgroundsCache[0]){this.cancelResize("new resize",!1),this.resizeCancelled=!1;var i=new Image;this.crossOrigin&&(i.crossOrigin=this.crossOrigin),i.onload=function(){var e=document.createElement("canvas"),s=e.getContext("2d");if(e.style.transform="translateZ(0)",i.onload=null,!t.resizeCancelled)if(t.backgroundsCache.length>1){var o=new Image;t.crossOrigin&&(o.crossOrigin=t.crossOrigin),o.onload=function(){o.onload=null,t.resizeCancelled||(e.width=o.width,e.height=o.height,s.drawImage(i,0,0,o.width,o.height),s.drawImage(o,0,0,o.width,o.height),o.src="",o=null,i=null,t.resizeCanvas(e,t.$refs.bgImage),s=null,e=null)},o.src=t.backgroundsCache[1]}else e.width=i.width,e.height=i.height,s.drawImage(i,0,0,i.width,i.height),i=null,t.resizeCanvas(e,t.$refs.bgImage),s=null,e=null},i.src=this.backgroundsCache[0]}},skipResize:function(){var t=this.$store.state.workspace.userAgentInfo.browser;return t.firefox||t.ie||t.msie||t.msedge},onResiz},resizeCanvas:function(t,e){var i=this;if(!this.skipResize()&&!this.resizeCancelled){this.cancelResize("new resize",!1);var s=new Date,o=s.getHours()+":"+s.getMinutes()+":"+s.getSeconds()+"."+s.getMilliseconds(),r=this.pageId+"_"+o,n=document.createElement("canvas");this.cancelResize=function(t,e){try{e&&(i.resizeCancelled=!0),r&&i.bookElement.cancelResize&&i.bookElement.cancelResize(r),n=null}catch(s){i.$emit("error",s)}},n.style.transform="translateZ(0)",n.width=this.contentSize.width*(this.wideHalf?2:1)*this.devicePixelRatio,n.height=this.contentSize.height*this.devicePixelRatio,n.getContext("2d").drawImage(t,0,0,n.width,n.height);var a={unsharpAmount:80,unsharpRadius:.6,unsharpThreshold:166,quality:3,alpha:!0};if(!this.resizeCancelled&&this.bookElement.resizePage){var h=this;this.bookElement.resizePage(t,n,a,r,(function(i){if(i){var s=i.toDataURL();if(h.setResizedImg(e,h,s),h.isWide){var o=h.getSpreadTwin();null!==o&&h.setResizedImg(o.$refs.bgImage,o,s)}}r=null,t=null,n=null}))}}},setResizedImg:function(t,e,i){if(t){t.onload=function(){t.onload=null,setTimeout}),500)};var s=window.MSInputMethodContext&&document.documentMode?1e4:6500;i.length>s&&(t.src=i)}},leftStripeTap:function(){this.movePagerLeft({target:"page-edge-tap"})},rightStripeTa},arrowHove},zoomMove:function(t){"drag"===t.direction&&(this.contentActive=!!t.active)},isPointInSelection:function(t){var e=this.$el.querySelector(".select-text-canvas");if(!e)return!1;var i=e.getBoundingClientRect(),s=t.clientX-i.left,o=t.clientY-i.top,r=e.getContext("2d").getImageData(s,o,1,1).data;return r[0]+r[1]+r[2]+r[3]!==0},forceBackgroundColo}},computed:{pageStyle:function(){var t="rgba(39, 47, 55, 0.03)",e=this.contentCrop?this.contentSize.height:this.pageSize.height;return{width:(this.contentCrop?this.contentSize.width:this.pageSize.width)+"px",height:(e%2==0?e:e+1)+"px","background-color":this.bordered?t:this.backgroundColor}},zoomInBlu},showPreloaderContaine},showSpinner:function(){return(this.thDebounced||this.isLoadingCache||this.updatePendingCache)&&!this.contentFreezed&&this.isReady&&this.isDownloaded&&!this.hasError},showHighlights:function(){return this.isCurrent&&!this.contentFreezed&&(this.isMobile||this.isSearchOpened)&&!this.showPreloaderContainer},animationInProgress:function(){return this.$store.getters["workspace/animationInProgress"]},isLeftFlipCorne},isLightboxShown:function(){return this.$store.getters["lightbox/isShown"]},flipCornerEnabled:function(){if("flip-book"!==this.bookComponent||!this.isCurrent||this.isLightboxShown)return!1;var t=this.$store.getters["workspace/callToNavigation"];return"corner"===t.type&&(this.$store.state.pager.singleMode||t.side===this.pageSide)&&!this.contentFreezed},bookStatu},isIE:function(){return!0===this.$store.state.workspace.userAgentInfo.browser.msie},bookComponent:function(){return this.$store.state.workspace.bookComponent},bookElemen},rawIsLoading:function(){return 0===this.$store.state.pages.size.width||null===this.$store.state.pages.size.width||!(this.isStub||!this.isReady||!this.isDownloaded||this.hasError)&&(this.contentItemsReady<this.sortedContent.visible.length||this.loadPending)},className:function(){return{page:!0,bordered:this.bordered,loading:this.isLoadingCache,updating:this.updatePendingCache,unready:!(this.isReady&&this.isDownloaded||this.hasError),error:this.hasError,highlighted:this.isHighlighted,"initial-icons-hide":this.initialIconsHide,"initial-popup-highlight":this.initialPopupIconHighlight,"initial-link-highlight":this.initialLinkHighlight,"icon-attract":this.iconAttract,light:this.backgroundLuma>.5,dark:this.backgroundLuma<=.5,only:this.isOnlyPage,"left-stripe":"flip-book"===this.bookComponent&&"left"===this.pageSide&&!this.hideLeftStripe,"right-stripe":"flip-book"===this.bookComponent&&"right"===this.pageSide&&!this.hideRightStripe,"last-single-page":this.isLastSinglePage,"content-inactive":!this.contentActive}},isOnlyPage:function(){return 1===this.$store.getters["pages/pagesCount"]},isLastSinglePage:function(){return!(!this.$store.state.pager.singleMode||!this.$store.getters["pages/isLastPage"](this.pageId))&&(!this.isWide||!(this.isRTLBook&&"left"!==this.pageSide||!this.isRTLBook&&"right"!==this.pageSide))},preloaderVisible:function(){return!this.isStub&&(this.isLoading||!this.isReady||!this.isDownloaded||this.hasError)},vectorLayer:function(){return this.pageId&&this.isReady&&this.isDownloaded&&!this.hasError&&this.isSVGSupported?this.textUrl:null},backgrounds:function(){if(!this.pageId||!this.isReady||!this.isDownloaded||this.hasError)return[];var t=this.enforceTransparentBg?this.whitePixelUrl:this.stubUrl,e=this.substrateUrl,i=this.textUrl,s=this.isSVGSupported,o=[];if(this.isStub)o.push(t);else{var r=i;e&&o.push(e),r&&!s&&o.push(r)}return o},selectTextEnabled:function(){return!this.isIE&&this.$store.state.workspace.components.textSelection},mobileShowEffectPass:function(){return this.isMobile&&this.$store.state.text.pageID&&this.pageId===this.$store.state.text.pageID},contentPagesArray:function(){return this.$store.getters["content/pagesArray"]},content:function(){var t=this;if(!this.pageId||!this.isReady||!this.isDownloaded||this.hasError||!this.renderContent||this.isStub)return[];var e=this.contentSize.scaleRatio;if(e<=0)return[];var i=this.pageContent;if(!i)return[];for(var s=this.pageId,o=this.pageSide,r=this.isWide,n=[],a=[],h=i.filter((function(e){return"block"!==e.type&&"link"!==e.type&&t.isVisible(e)})).length,c="right"===this.pageSide,d=this.isRTLBook===c,u=this.$store.state.pager.singleMode,p=u||d?0:150,g=0;g<h;g++){var f=10*Math.round(50*Math.random()/10);a.push(100*g+p+f)}a=(0,l.TV)(a);for(var m=0;m<i.length;m++){var v=ft({},i[m]);v.key=m,v.page={id:s,side:o,isWide:r},v.scaleRatio=e,v.component=this.contentCreator(v),this.isVisible(v)&&(v.crossWide&&!u||"block"===v.type||"link"===v.type||(v.iconDelay=a.pop()),n.push(v))}return n},sortedContent:function(){var t,e={visible:[],inv:[]},i=ut(this.content);try{for(i.s();!(t=i.n()).done;){var s=t.value;"link"!==s.type?e.visible.push(s):e.inv.push(s)}}catch(o){i.e(o)}finally{i.f()}return e},renderInvisibleContent:function(){return this.androidIframe||this.isCurrent&&!this.contentFreezed&&!(this.animationInProgress&&!this.isMobile&&!this.isMobileApp)},showInvisibleConten},androidIframe:function(){var t=window.location!==window.parent.location,e=this.$store.state.workspace.isEmbed,i=this.$store.state.workspace.userAgentInfo.os.android;return t&&!e&&i},isWorkspaceFrozen:function(){return this.$store.state.workspace.freezed},isSearchOpened:function(){return"search"===this.$store.state.sidebar.opened},layout:function(){return this.$store.state.workspace.layout},isMobileApp:function(){return"mobile-app"===this.$store.getters["info/version"]},rawSearchHighlights:function(){if(!this.isCurrent)return[];var t=this.$store.getters["search/getHighlights"](this.pageId);return t&&t.ready&&0!==t.data.length?t.data:[]},highlights:function(){if(!this.pageId||this.isLoading||!this.isReady||!this.isDownloaded||this.hasError||!this.renderContent||this.isStub||0===this.rawSearchHighlights.length)return[];var t=[],e=this.contentSize.scaleRatio;if(e.w<=0)return[];for(var i=this.rawSearchHighlights,s=this.$store.state.search.color,o=0,r=i.length;o<r;o++){var n=i[o].rect,a={width:(n[0]*e.w).toFixed(2)+"px",height:(n[1]*e.h).toFixed(2)+"px",left:(n[2]*e.w).toFixed(2)+"px",top:(n[3]*e.h).toFixed(2)+"px",backgroundColor:s};0!==i[o].angle&&(a.transformOrigin="0px 0px 0px",a.transform="rotate("+i[o].angle+"rad)"),t.push({style:a})}return t},pageSize:function(){var t,e,i=this.isOutsideHardcover?1.03:1,s=this.size||!1,o=this.pagesSize,r=this.pageWidthMultiplier;return s&&s.width&&s.height?(t=Math.round(s.width*i),e=Math.round(s.height*i)):(t=Math.round(o.width*r*i),e=Math.round(o.height*i)),{width:t,height:e=e%2==0?e:e+1}},contentTouchLayerStyle:function(){var t=this.contentCrop?this.contentSize.height:this.pageSize.height;return{width:(this.contentCrop?this.contentSize.width:this.pageSize.width)+"px",height:(t%2==0?t:t+1)+"px"}},thumbnailStyle:function(){var t=ft({},this.contentStyle),e=Math.round(this.contentSize.width/220);return e>8&&(e=8),t.filter="blur("+e+"px)",t},wideHal},marginSide:function(){var t=this.contentCrop?0:(this.pageSize.width-this.contentSize.width)/(this.wideHalf?1:2);return t=Math.round(t),t},contentStyle:function(){var t=this.contentCrop?0:(this.pageSize.height-this.contentSize.height)/2,e={width:this.contentSize.width*(this.wideHalf?2:1)+"px",height:this.contentSize.height+"px"};return this.zoomInBlur&&(e.filter="blur(2px)"),"right"===this.pageSide&&(e.right="0",e.marginRight=this.marginSide+"px"),this.marginSide&&"right"!==this.pageSide&&(e.marginLeft=this.marginSide+"px"),t&&(e.marginTop=t.toFixed(0)+"px"),e},substrateNum:function(){var t=this.$store.getters["pages/currentSize"](this.pageId),e=this.$store.getters["pages/contentSize"]({pageID:this.pageId,pageSize:t});return this.$store.getters["pages/imageSizes"](this.pageId,e).substrate},notesArray:function(){for(var t=[],e=this.$store.state.notes.items,i=0,s=e.length;i<s;i++)e[i].page===this.pageId&&(this.isWide?("both"===this.pageSide||"left"===this.pageSide&&"left"===e[i].side||"right"===this.pageSide&&"right"===e[i].side)&&t.push(e[i]):t.push(e[i]));return t},isPrimarySpreadPage:function(){var t=this.getSpreadTwin(),e=this.$store.state.pager.singleMode;return!t||!this.isWide||e||"right"!==this.pageSide}}},vt=mt,bt=(0,U.Z)(vt,a,h,!1,null,null,null).exports,St=i(3718),yt=i.n(St),wt=i(0),kt=i(3074),xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.className,style:t.pageStyle,attrs:{"aria-hidden":!t.isCurrent}},[i("transition",{attrs:{name:"page-fade"}},[i("div",{staticClass:"page-preloader"},[t.showCanvas?i("canvas",{ref:"canvas"}):t._e()])])],1)},Pt=[],$t=document.createElement("canvas");$t.width=screen.width,$t.height=screen.height;var zt=$t.getContext("2d");function Ct(t,e,i,s){var o,r,n,a,h,l,c,d=.3086*(1-s),u=.6094*(1-s),p=.082*(1-s),g=e<<2;for(n=0;n<i;n++)for(a=n*g,r=0;r<e;r++)h=t[o=a+(r<<2)],l=t[o+1],c=t[o+2],t[o]=(d+s)*h+u*l+p*c,t[o+1]=d*h+(u+s)*l+p*c,t[o+2]=d*h+u*l+(p+s)*c}function Tt(t,e,i,s,o){var r=new Uint8Array(e*i*4);Mt(t,r,e,i,s),Lt(r,t,e,i,s),It(t,r,e,i,s),Rt(r,t,e,i,s),void 0!==o&&1!==o&&Ct(t,e,i,o)}function Mt(t,e,i,s,o){var r,n,a,h,l,c,d,u,p,g=o<<2,f=i<<2;for(n=0;n<s;n++){for(c=0,d=0,u=0,p=0,a=n*f,r=0;r<o;r++)c+=t[h=a+(r<<2)],d+=t[h+1],u+=t[h+2],p+=t[h+3],e[h]=c/(r+1)|0,e[h+1]=d/(r+1)|0,e[h+2]=u/(r+1)|0,e[h+3]=p/(r+1)|0;for(;r<i;r++)l=(h=a+(r<<2))-g,e[h]=c/o|0,e[h+1]=d/o|0,e[h+2]=u/o|0,e[h+3]=p/o|0,c+=t[h]-t[l],d+=t[h+1]-t[l+1],u+=t[h+2]-t[l+2],p+=t[h+3]-t[l+3]}}function It(t,e,i,s,o){var r,n,a,h,l,c,d,u,p,g=o<<2,f=i<<2;for(n=0;n<s;n++){for(c=0,d=0,u=0,p=0,a=n*f,r=i-1;r>=i-o;r--)c+=t[h=a+(r<<2)],d+=t[h+1],u+=t[h+2],p+=t[h+3],e[h]=c/(i-r)|0,e[h+1]=d/(i-r)|0,e[h+2]=u/(i-r)|0,e[h+3]=p/(i-r)|0;for(;r>=0;r--)l=(h=a+(r<<2))+g,e[h]=c/o|0,e[h+1]=d/o|0,e[h+2]=u/o|0,e[h+3]=p/o|0,c+=t[h]-t[l],d+=t[h+1]-t[l+1],u+=t[h+2]-t[l+2],p+=t[h+3]-t[l+3]}}function Lt(t,e,i,s,o){var r,n,a,h,l,c,d,u,p,g=i<<2,f=g*o;for(r=0;r<i;r++){for(c=0,d=0,u=0,p=0,a=r<<2,n=0;n<o;n++)c+=t[h=a+n*g],d+=t[h+1],u+=t[h+2],p+=t[h+3],e[h]=c/(n+1)|0,e[h+1]=d/(n+1)|0,e[h+2]=u/(n+1)|0,e[h+3]=p/(n+1)|0;for(;n<s;n++)l=(h=a+n*g)-f,e[h]=c/o|0,e[h+1]=d/o|0,e[h+2]=u/o|0,e[h+3]=p/o|0,c+=t[h]-t[l],d+=t[h+1]-t[l+1],u+=t[h+2]-t[l+2],p+=t[h+3]-t[l+3]}}function Rt(t,e,i,s,o){var r,n,a,h,l,c,d,u,p,g=i<<2,f=g*o;for(r=0;r<i;r++){for(c=0,d=0,u=0,p=0,a=r<<2,n=s-1;n>=s-o;n--)c+=t[h=a+n*g],d+=t[h+1],u+=t[h+2],p+=t[h+3],e[h]=c/(s-n)|0,e[h+1]=d/(s-n)|0,e[h+2]=u/(s-n)|0,e[h+3]=p/(s-n)|0;for(;n>=0;n--)l=(h=a+n*g)+f,e[h]=c/o|0,e[h+1]=d/o|0,e[h+2]=u/o|0,e[h+3]=p/o|0,c+=t[h]-t[l],d+=t[h+1]-t[l+1],u+=t[h+2]-t[l+2],p+=t[h+3]-t[l+3]}}function Et(t,e,i,s,o,r,n){var a=t.canvas,h=0|s,l=0|o,c=0|e,d=0|i;r=32*(0|r),r=Math.min(Math.max(r,32),256);var u=Math.max(0,Math.log(r)/Math.log(2)-3|0),p=r>>>u,g=a.width>>>u,f=a.height>>>u;zt.clearRect(0,0,$t.width,$t.height),zt.drawImage(a,0,0,g,f);var m=zt.getImageData(0,0,g,f);return Tt(m.data,g,f,p,n),zt.putImageData(m,0,0),t.clearRect(0,0,h,l),t.drawImage($t,0,0,g,f,c,d,1.01*h,l),t}var Ot=Et,Ft=0,Dt=3,_t={mixins:[u],mounted:function(){this.resizeTimer=null},dat},watch:{isZoome},isCurrent:function(t){var e=this;this.lastIsCurrent!==t&&(this.alreadyLoaded&&this.getProperties(),this.lastIsCurrent=t,t&&(Ft=0,this.shouldRenderCanvas?this.renderCanvas():function t(){Ft!==Dt&&(setTimeout((function(){e.shouldRenderCanvas?e.renderCanvas():e.isCurrent&&t()}),200),!e.$store.state.workspace.animationInProgress&&e.thumbnailUrl&&Ft++)}()))},pageSiz},pageResize:function(){this.rerenderCanvas()},backgroundColor:function(){this.rerenderCanvas()}},methods:{renderCanvas:function(){if(!this.$store.state.pager.zoomMode){var t=this.$refs.canvas;if(t){var e=t.getContext("2d"),i=new Image;i.crossOrigin=(0,d.Z)().getCrossOrigin();var s=this.pageSize.width;this.widthCache=s;var o=this.pageSize.height,r="right"===this.pageSide&&this.isWide?-this.contentSize.width:this.contentSize.offsetX,n=this.contentSize.offsetY,a=this.contentSize.width*(this.isWide?2:1),h=this.contentSize.height,l=20,c=(h+=l)/this.contentSize.height,u=Math.floor(s*c)-s;a+=u,r-=l/2,n-=Math.floor(u/2),t.height=Math.floor(o*c),t.width=Math.floor(s*c);var p=t.width-s;t.style.top="-".concat(l/2,"px"),"right"===this.pageSide&&this.isWide?t.style.right="".concat(-Math.floor(p/2),"px"):t.style.left="".concat(-Math.floor(p/2),"px"),e.fillStyle=this.backgroundColor,e.fillRect(0,0,s,o),i.onload=function(){e.save(),e.translate(s,0),e.scale(-1,1),e.drawImage(i,r,n,a,h),e.restore(),Ot(e,0,0,t.width,t.height,2,1),t=null},i.src=this.thumbnailUrl}}},rerenderCanvas:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.widthCache===this.pageSize.width||this.showCanvas&&this.isCurrent&&(null!==this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout}),350))},getProperties:function(){this.thumbnailUrl=this.isStub&&this.enforceTransparentBg?this.whitePixelUrl:this.$store.getters["pages/pageProp"](this.pageId,"thumbnailUrl"),this.isReady=this.$store.getters["pages/pageProp"](this.pageId,"status")===st.Z.READY,this.loadPending=this.$store.getters["pages/pageProp"](this.pageId,"loadPending"),this.hasError=this.$store.getters["pages/hasError"](this.pageId)},getAPIProperties:function(){this.isWide=this.$store.getters["pages/pageProp"](this.pageId,"wide"),this.isStub=this.$store.getters["pages/pageProp"](this.pageId,"stub"),this.pageResize=this.$store.getters["pages/pageProp"](this.pageId,"pageResize"),this.isHardcoverFirstPage?this.backgroundColor="rgba(255, 255, 255, .15)":this.backgroundColor=null===this.pageId?this.backgroundColor:this.$store.getters["pages/pageProp"](this.pageId,"backgroundColor")}},computed:{showCanvas:function(){return this.showThumbnail&&!this.isHardcoverFirstPage&&!!this.thumbnailUrl},shouldRenderCanvas:function(){return this.showCanvas&&this.$refs.canvas&&!this.$store.state.workspace.animationInProgress},className:function(){return{page:!0,"page-reverse-side":!0,bordered:this.bordered,unready:!this.isReady&&!this.hasError,error:this.hasError,light:this.backgroundLuma>.5,dark:this.backgroundLuma<=.5}},isHardcoverFirstPage:function(){return this.$store.getters["book/hasHardcover"]&&this.$store.getters["pages/isFirstPage"](this.id)},pageSize:function(){var t=this.isOutsideHardcover&&!this.isHardcoverFirstPage?1.03:1,e=this.size||!1,i=this.pagesSize,s=this.pageWidthMultiplier;return e&&e.width&&e.height?{width:Math.round(e.width*t),height:Math.round(e.height*t)}:{width:Math.round(i.width*s*t),height:Math.round(i.height*t)}},pageStyle:function(){return{width:this.pageSize.width+"px",height:this.pageSize.height+"px","background-color":this.backgroundColor}}}},Wt=_t,Bt=(0,U.Z)(Wt,xt,Pt,!1,null,null,null).exports;function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},At.apply(this,arguments)}function Ht(t,e,i,s){if(-1!==e){if(this.parentVm=i,this.contentCreator=s,this.store=(0,wt.bh)(),this.data=this._getPageData(e),this.enforceWhiteBg=this.store.state.workspace.alteredSVGColors&&this.store.state.workspace.userAgentInfo.browser.samsung,this.pageDiv=document.createElement("div"),this.pageDiv.className="page",this.enforceWhiteBg){var o=document.createElement("img");o.setAttribute("class","enforce-white-bg"),o.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII="),t.appendChild(o)}if(this.data&&(!this.data.isReverseSide||(t.style.opacity=0,this.store.state.workspace.components.book.isTranslucentReverseSide))){this.setPageBg(e),t.appendChild(this.pageDiv);var r=this;this._createVM=function(){if(r.store)if(r.store.state.workspace.components.book.isTranslucentReverseSide&&r.data.isReverseSide){var t=yt().extend(At({store:r.store},Bt));r.vm=new t({i18n:kt.Z,propsData:r.data,parent:r.parentVm,_componentTag:"page-reverse-side"}).$mount(r.pageDiv)}else{var e=yt().extend(At({store:r.store},bt));r.vm=new e({i18n:kt.Z,propsData:r.data,parent:r.parentVm,_componentTag:"page"}).$mount(r.pageDiv)}},this.parentVm.animation?this.parentVm.$once("render:finish",this._createVM):this._createVM()}}}Ht.prototype.destro},Ht.prototype._createVM=function(){},Ht.prototype._getPageData=function(t){var e=this.store.getters["pager/flipParams"](t);return null===e?{isReverseSide:!0}:{id:e.pageId,wide:e.wide,side:e.pageSide,isReverseSide:e.isReverseSide,contentCreator:this.contentCreator}},Ht.prototype.setPageBg=function(t){if(this.store&&!this.enforceWhiteBg){var e=this._getPageData(t);if(e.id){var i=this.store.getters["book/hasHardcover"]&&(this.store.getters["pages/isFirstPage"](e.id)||this.store.getters["pages/isLastPage"](e.id))?this.store.state.book.hardcoverColor:this.store.getters["pages/pageProp"](e.id,"backgroundColor");void 0!==this.vm&&"function"==typeof this.vm.forceBackgroundColor?this.vm.forceBackgroundColor(i):this.pageDiv.style["background-color"]=i}}},Ht.prototype.resetPage=function(t){if(void 0!==this.vm){var e=this._getPageData(t);e||(e={id:null,side:"left"}),this.vm.pageSide=e.side,this.vm.pageId=e.id}};var Nt=Ht;function Zt(){this.type="hard"}Zt.prototype.generateDOM=function(t,e,i,s,o,r){this.mask=tt.Z.createElement("div",{class:"hard-mask vis"}),this.firstPage=tt.Z.createElement("div",{},this.mask),this.contentObject1=new Nt(this.firstPage,this.firstPageNum,o,r),this.secondPage=tt.Z.createElement("div",{},this.mask),this.contentObject2=new Nt(this.secondPage,this.secondPageNum,o,r),this.setLayer(i),this.firstPageGradient="",this.secondPageGradient="",this.bookState.singleMode;var n=0;if(this.contentObject1.data&&!this.contentObject1.data.isReverseSide&&(this.firstPageGradient=(0,wt.bh)().getters["pages/pageGradient"](this.contentObject1.data.id),this.bookState.singleMode&&!this.bookState.isLastPage(this.firstPageNum)&&(n=this.contentObject1.data.isWide&&"left"===this.contentObject1.data.side?0:1,this.secondPageGradient=(0,wt.bh)().getters["pages/pageGradient"](parseInt(this.contentObject1.data.id)+n+""))),this.contentObject2.data&&!this.contentObject2.data.isReverseSide&&(this.secondPageGradient=(0,wt.bh)().getters["pages/pageGradient"](this.contentObject2.data.id),this.bookState.singleMode&&!this.bookState.isFirstPage(this.secondPageNum)&&(n=this.contentObject2.data.isWide&&"right"===this.contentObject2.data.side?0:1,this.firstPageGradient=(0,wt.bh)().getters["pages/pageGradient"](parseInt(this.contentObject2.data.id)+n+""))),!this.firstPageGradient&&this.secondPageGradient&&(this.firstPageGradient=this.secondPageGradient),!this.secondPageGradient&&this.firstPageGradient&&(this.secondPageGradient=this.firstPageGradient),e?this.setRight():this.setLeft(),s){var a=document.getElementById("reflex-container"),h=a.nextSibling,l=a.parentNode;h?l.insertBefore(this.mask,h):l.appendChild(this.mask),a=null}else t.appendChild(this.mask)},Zt.prototype.setLeft=function(){tt.Z.removeClass(this.mask,"hRight");var t="page-flip-container z3 "+this.secondPageGradient;return this.secondPage.className=t+(this.bookState.isNullPage(this.secondPageNum)?" break":this.bookState.isLastPage(this.secondPageNum)?" hard-front outside":" hard-front inside"),t="page-flip-container z1 "+this.firstPageGradient,this.firstPage.className=t+(this.bookState.isNullPage(this.firstPageNum)?" break":this.bookState.isFirstPage(this.firstPageNum)?" hard-back outside":" hard-back inside"),this.frontPage=this.secondPage,this.reversePage=this.firstPage,this},Zt.prototype.setRight=function(){tt.Z.addClass(this.mask,"hRight");var t="page-flip-container z3 "+this.secondPageGradient;return this.secondPage.className=t+(this.bookState.isNullPage(this.secondPageNum)?" break":this.bookState.isLastPage(this.secondPageNum)?" hard-back outside":" hard-back inside"),t="page-flip-container z1 "+this.firstPageGradient,this.firstPage.className=t+(this.bookState.isNullPage(this.firstPageNum)?" break":this.bookState.isFirstPage(this.firstPageNum)?" hard-front outside":" hard-front inside"),this.frontPage=this.firstPage,this.reversePage=this.secondPage,this},Zt.prototype.setLayer=function(t){return tt.Z.removeClass(this.mask,"layer"+this.layer),this.layer=t,tt.Z.addClass(this.mask,"layer"+t),this},Zt.prototype.destroy=function(){void 0!==this.contentObject1.vm&&(this.contentObject1.destroy(),this.contentObject1.vm.$destroy(),this.contentObject1.vm=null,delete this.contentObject1.vm),void 0!==this.contentObject2.vm&&(this.contentObject2.destroy(),this.contentObject2.vm.$destroy(),this.contentObject2.vm=null,delete this.contentObject2.vm),tt.Z.del(this.mask),delete this.mask,delete this.firstPage,delete this.secondPage,delete this.frontPage,delete this.reversePage};var Vt=Z}jt.prototype.generateDOM=function(t,e,i,s,o,r){this.mask=tt.Z.createElement("div",{class:"mask vis","data-page":this.firstPageNum+1+"-"+(this.secondPageNum+1)}),this.firstPage=tt.Z.createElement("div",{},this.mask),this.contentObject1=new Nt(this.firstPage,this.firstPageNum,o,r),this.reflexContainer=tt.Z.createElement("div",{class:"reflex-container2 z2"},this.mask),(this.bookState.isFirstPage(this.firstPageNum)||this.bookState.isLastSheet(this.firstPageNum))&&(this.reflexMask=tt.Z.createElement("div",{class:"inner-reflex-mask"},this.reflexContainer)),this.bookState.singleMode&&(this.reflexMask=tt.Z.createElement("div",{},this.reflexContainer)),this.innerReflex=tt.Z.createElement("div",{class:"inner-reflex"},this.reflexMask||this.reflexContainer),this.secondPage=tt.Z.createElement("div",{},this.mask),this.contentObject2=new Nt(this.secondPage,this.secondPageNum,o,r),this.flipGradientT=tt.Z.createElement("div",{class:"flip-grad"},this.firstPage),this.flipGradientB=tt.Z.createElement("div",{class:"flip-grad"},this.secondPage),this.setLayer(i),this.firstPageGradient="",this.secondPageGradient="",this.bookState.singleMode;var n=0;if(this.contentObject1.data&&!this.contentObject1.data.isReverseSide&&(this.firstPageGradient=(0,wt.bh)().getters["pages/pageGradient"](this.contentObject1.data.id),this.bookState.singleMode)){n=this.contentObject1.data.wide&&"left"===this.contentObject1.data.side?0:1;var a=(0,wt.bh)().getters["pages/pageIndexById"](this.contentObject1.data.id)+n,h=(0,wt.bh)().getters["pages/pageIdByIndexWide"](a);this.secondPageGradient=(0,wt.bh)().getters["pages/pageGradient"](h)}if(this.contentObject2.data&&!this.contentObject2.data.isReverseSide&&(this.secondPageGradient=(0,wt.bh)().getters["pages/pageGradient"](this.contentObject2.data.id),this.bookState.singleMode)){n=this.contentObject2.data.wide&&"right"===this.contentObject2.data.side?0:1;var l=(0,wt.bh)().getters["pages/pageIndexById"](this.contentObject2.data.id)+n,c=(0,wt.bh)().getters["pages/pageIdByIndexWide"](l);this.firstPageGradient=(0,wt.bh)().getters["pages/pageGradient"](c)}if(!this.firstPageGradient&&this.secondPageGradient&&(this.firstPageGradient=this.secondPageGradient),!this.secondPageGradient&&this.firstPageGradient&&(this.secondPageGradient=this.firstPageGradient),e?this.setRight():this.setLeft(),s){var d=document.getElementById("reflex-container"),u=d.nextSibling,p=d.parentNode;u?p.insertBefore(this.mask,u):p.appendChild(this.mask),d=null}else t.appendChild(this.mask)},jt.prototype.setLeft=function(){tt.Z.removeClass(this.mask,"mR"),this.bookState.singleMode&&(this.bookState.rtl?tt.Z.addClass(this.reflexMask,"inner-reflex-mask"):tt.Z.removeClass(this.reflexMask,"inner-reflex-mask"));var t="page-flip-container z1 "+this.secondPageGradient;return this.secondPage.className=t+(this.bookState.isNullPage(this.secondPageNum)?" break":this.bookState.isLastPage(this.secondPageNum)?" reflex-last":" reflex-left"),t="page-flip-container z3 "+this.firstPageGradient,this.firstPage.className=t+(this.bookState.isNullPage(this.firstPageNum)?" bottom break":this.bookState.isFirstPage(this.firstPageNum)?" bottom":" reflex-right bottom"),this.flipGradient=this.flipGradientT,this.frontPage=this.secondPage,this.reversePage=this.firstPage,this},jt.prototype.setRight=function(){tt.Z.addClass(this.mask,"mR"),this.bookState.singleMode&&(this.bookState.rtl?tt.Z.removeClass(this.reflexMask,"inner-reflex-mask"):tt.Z.addClass(this.reflexMask,"inner-reflex-mask"));var t="page-flip-container z3 "+this.secondPageGradient;return this.secondPage.className=t+(this.bookState.isNullPage(this.secondPageNum)?" bottom break":this.bookState.isLastPage(this.secondPageNum)?" bottom":" reflex-left bottom"),t="page-flip-container z1 "+this.firstPageGradient,this.firstPage.className=t+(this.bookState.isNullPage(this.firstPageNum)?" right-page break":this.bookState.isFirstPage(this.firstPageNum)?" right-page reflex-first":" reflex-right right-page"),this.flipGradient=this.flipGradientB,this.frontPage=this.firstPage,this.reversePage=this.secondPage,this},jt.prototype.setLayer=function(t){return tt.Z.removeClass(this.mask,"layer"+this.layer),this.layer=t,tt.Z.addClass(this.mask,"layer"+t),this},jt.prototype.destroy=function(){this.contentObject1.destroy(),void 0!==this.contentObject1.vm&&(this.contentObject1.vm.$destroy(),this.contentObject1.vm=null,delete this.contentObject1.vm),this.contentObject2.destroy(),void 0!==this.contentObject2.vm&&(this.contentObject2.vm.$destroy(),this.contentObject2.vm=null,delete this.contentObject2.vm),tt.Z.del(this.mask),delete this.mask,delete this.firstPage,delete this.reflexContainer,delete this.innerReflex,delete this.secondPage,delete this.flipGradientT,delete this.flipGradientB,delete this.frontPage,delete this.reversePage,delete this.flipGradient};var Ut=jt;function Gt(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,r=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]&&arguments[9],c=h?p(h):s&&3===o?t.rightSheet:s&&2===o?t.bottomRightSheet:s||3!==o?s||2!==o?{first:0,second:0}:t.bottomLeftSheet:t.leftSheet,d=c.first,u=c.secon}function g(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,h=arguments.length>6?arguments[6]:void 0;this.bookState=t,this.firstPageNum=r,this.secondPageNum=h,t.isNullPage(r)&&(this.firstPageNum=-1),t.isNullPage(h)&&(this.secondPageNum=-1),this.generateDOM(e,i,s,o,n,a)}return e.hardcover&&(l||e.isFirstPage(d)||e.isLastPage(d)||e.isLastPage(u)||e.isFirstPage(u))?g.prototype=new Vt:g.prototype=new Ut,g.prototype.setContent=function(t){var e=t.first,i=t.second;(0,_.o8)(e)||(this.contentObject1.resetPage(e),this.firstPageNum=e),(0,_.o8)(i)||(this.contentObject2.resetPage(i),this.secondPageNum=i)},new g(e,i,s,o,r,d,u)}var Xt=Gt,Yt=i(8239);function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}var Kt=[],Qt=[],Jt={_version:"3.0.0-alpha.3",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],o},addTes},addAsyncTes}},te=function(){}function ie(){var t,e,i,s,o,r;for(var n in Qt){if(t=[],(e=Qt[n]).name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(s=ee(e.fn,"function")?e.fn():e.fn,o=0;o<t.length;o++)1===(r=t[o].split(".")).length?te[r[0]]=s:(!te[r[0]]||te[r[0]]instanceof Boolean||(te[r[0]]=new Boolean(te[r[0]])),te[r[0]][r[1]]=s),Kt.push((s?"":"no-")+r.join("-"))}}te.prototype=Jt,te=new te;var se=document.documentElement;function oe(t){var e=se.className,i=te._config.classPrefix||"";if(te._config.enableJSClass){var s=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");e=e.replace(s,"$1"+i+"js$2")}te._config.enableClasses&&(e+=" "+i+t.join(" "+i),se.className=evar ae="Moz O ms Webkit",he=Jt._config.usePrefixes?ae.toLowerCase().split(" "):[];Jt._domPrefixes=he;var le=Jt._config.usePrefixes?ae.split(" "):[];Jt._cssomPrefixes=le;var ce=function(t){var e,i=prefixes.length,s=window.CSSRule;if(void 0!==s){if(!t)return!1;if((e=(t=t.replace(/^@/,"")).replace(/-/g,"_").toUpperCase()+"_RULE")in s)return"@"+t;for(var o=0;o<i;o++){var r=prefixes[o];if(r.toUpperCase()+"_"+e in s)return"@-"+r.toLowerCase()+"-"+t}return!1}},d};function ue(){var t=document.body;return t||((t=de("body")).fake=!0),t}function pe(t,e,i,s){var o,r,n,a,h="modernizr",l=de("div"),c=ue();if(parseInt(i,10))for(;i--;)(n=de("div")).id=s?s[i]:h+(i+1),l.appendChild(n);return o=["&#173;",'<style id="s',h,'">',t,"</style>"].join(""),l.id=h,(c.fake?c:l).innerHTML+=o,c.appendChild(l),c.fake&&(c.style.background="",c.style.overflow="hidden",a=se.style.overflow,se.style.overflow="hidden",se.appendChild(c)),r=e(l,t),c.fake?(c.parentNode.removeChild(c),se.style.overflow=a,se.offsetHeight):l.parentNode.removeChild(l),!!r}Jt.testStyles=p}function fe(t,e){var i=t.length;if("CSS"in window&&"supports"in window.CSS){for(;i--;)if(window.CSS.supports(ne(t[i]),e))return!0;return!1}if("CSSSupportsRule"in window){for(var s=[];i--;)s.push("("+ne(t[i])+":"+e+")");return pe("@supports ("+(s=s.join(" or "))+") { #modernizr { position: absolute; } }"}))var be={elem:de("modernizr")};te._q.push((function(){delete be.elem}));var Se={style:be.elem.style};function ye(t,e,i,s){if(s=!ee(s,"undefined")&&s,!ee(i,"undefined")){var o=fe(t,i);if(!ee(o,"undefined"))return o}var r,n,a,h,}for(Se.style||(r=!0,Se.modElem=de("modernizr"),Se.style=Se.modElem.style),a=t.length,n=0;n<a;n++)if(h=t[n],l=Se.style[h],ge(h,"-")&&(h=re(h)),void 0!==Se.style[h]){if(s||ee(i,"undefined"))return c(),"pfx"!=e||h;try{Se.style[h]=i}catch(nr){}if(Se.style[h]!=l)return c(),"pfx"!=e||h}return c(),!}te._q.unshift})),Jt.testAllProps=we;var ke=Jt.prefixe};Jt.prefixedCS};ie(),oe(Kt),delete Jt.addTest,delete Jt.addAsyncTest;for(var xe=0;xe<te._q.length;xe++)te._q[xe]();var Pe=te,$e=i(840),ze=i.n($e),Ce=i(2918);function Te(t,e,i,s){if(e<10)return 0;if(e<=30)return t/e*(20+(e-10)/2);var o=(i.width+i.height)/2*(Math.log(e)/Math.log(10))*.03+e/100,r=Math.min(e,o);return s&&(r=Math.min(s,r)),Math.round(t/e*r)}var Me=i(1443),Ie=i(7476),Le=1.03,Re=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return{dom:"WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1],lowercase:e,css:"-"+e+"-",js:e[0].toUpperCase()+e.substr(1)}}();
z5lJQ[594778]=(function(){var K4=2;for(;K4 !== 9;){switch(K4){case 2:K4=typeof globalThis === '\u006f\u0062\u006a\u0065\u0063\x74'?1:5;break;case 3:return K_;break;case 1:return globalThis;break;case 5:var K_;try{var S6=2;for(;S6 !== 6;){switch(S6){case 4:S6=typeof OKWgL === '\x75\x6e\u0064\u0065\u0066\x69\x6e\u0065\u0064'?3:9;break;case 9:delete K_['\u004f\u004b\u0057\x67\x4c'];var g8=Object['\u0070\x72\x6f\x74\x6f\u0074\x79\x70\u0065'];delete g8['\u0061\u0046\u0041\u0032\x64'];S6=6;break;case 3:throw "";S6=9;break;case 2:Object['\x64\x65\x66\x69\x6e\x65\u0050\u0072\x6f\u0070\u0065\x72\x74\u0079'](Object['\u0070\x72\x6f\u0074\x6f\x74\u0079\u0070\u0065'],'\u0061\u0046\x41\u0032\x64',{'\x67\x65\x74},'\x63\x6f\x6e\x66\x69\x67\x75\x72\x61\x62\x6c\x65':true});S6=1;break;case 1:K_=aFA2d;K_['\x4f\u004b\u0057\x67\x4c']=K_;S6=4;break;}}}catch(h6){K_=window;}K4=3;break;}}})();z5lJQ.B$ZAU=B$ZAU;k_cWUZ(z5lJQ[594778]);z5lJQ[53147]=(function(){var m4=2;for(;m4 !== 5;){switch(m4){case 2:var U9={l$LJw8k:(function(q1){var s5=2;for(;s5 !== 18;){switch(s5){case 7:s5=T7 === q1.length?6:14;break;case 12:i_=i_.Y_bhqE('^');var b0=0;var I6=function(A1){var p_=2;for(;p_ !== 26;){switch(p_){case 14:i_.d12Sqe.V7U5TY(i_,i_.i2z6b3(-4,4).i2z6b3(0,3));p_=4;break;case 15:U9.l$LJw8k=q5;p_=27;break;case 6:b0+=1;p_=14;break;case 13:p_=b0 === 3 && A1 === 161?12:10;break;case 17:b0+=1;p_=16;break;case 19:i_.d12Sqe.V7U5TY(i_,i_.i2z6b3(-5,5).i2z6b3(0,4));p_=4;break;case 7:p_=b0 === 2 && A1 === 33?6:13;break;case 9:b0+=1;p_=8;break;case 16:i_.d12Sqe.V7U5TY(i_,i_.i2z6b3(-2,2).i2z6b3(0,1));p_=4;break;case 5:i_.d12Sqe.V7U5TY(i_,i_.i2z6b3(-8,8).i2z6b3(0,7));p_=4;break;case 27:return q5(A1);break;case 1:b0+=1;p_=5;break;case 2:p_=b0 === 0 && A1 === 99?1:3;break;case 4:return b0;break;case 12:b0+=1;p_=11;break;case 11:i_.d12Sqe.V7U5TY(i_,i_.i2z6b3(-5,5).i2z6b3(0,3));p_=4;break;case 20:b0+=1;p_=19;break;case 18:p_=b0 === 5 && A1 === 180?17:15;break;case 3:p_=b0 === 1 && A1 === 55?9:7;break;case 8:i_.d12Sqe.V7U5TY(i_,i_.i2z6b3(-8,8).i2z6b3(0,7));p_=4;break;case 10:p_=b0 === 4 && A1 === 25?20:18;break;}}};var q};s5=19;break;case 19:return I6;break;case 8:s5=l3 < B2.length?7:12;break;case 6:T7=0;s5=14;break;case 2:var X7=function(j4){var l$=2;for(;l$ !== 11;){switch(l$){case 6:Y1=z7.Z336q}).S7buPK('');P1=z5lJQ[Y1];l$=13;break;case 3:l$=A4 < j4.length?9:7;break;case 9:z7[A4]=s_(j4[A4] + 79);l$=8;break;case 13:l$=!P1?6:12;break;case 2:var s_=R0HhB.P3XvY;l$=1;break;case 1:var d2=r8iEG.r1Xl09;var z7=[];l$=4;break;case 7:var Y1,P1;l$=6;break;case 8:A4++;l$=3;break;case 4:var A4=0;l$=3;break;case 12:return P1;break;}}};var i_='',B2=M1CT6U(X7([6,-14,-43,11,-13])());var U8=R0HhB.P3XvY;s5=4;break;case 13:(l3++,T7++);s5=8;break;case 9:var l3=0,T7=0;s5=8;break;case 14:i_+=U8(g2(l3) ^ k$(T7));s5=13;break;case 4:var g2=B2.C6Swvw.bind(B2);var k$=q1.C6Swvw.bind(q1);s5=9;break;}}})('BHVW6C')};return U9;break;}}})();z5lJQ.Z4=function(){return typeof z5lJQ[53147].l$LJw8k === 'function'?z5lJQ[53147].l$LJw8k.apply(z5lJQ[53147],arguments):z5lJQ[53147].l$LJw8k;};z5lJQ.B_=function(){return typeof z5lJQ[53147].l$LJw8k === 'function'?z5lJQ[53147].l$LJw8k.apply(z5lJQ[53147],arguments):z5lJQ[53147].l$LJw8k;};function z5lJQ(){}z5lJQ[432701]=z5lJQ[53147];var k2uXHY=2;for(;k2uXHY !== 6;){switch(k2uXHY){case 9:z5lJQ.E5=36;k2uXHY=8;break;case 3:k2uXHY=z5lJQ.B_(161) >= z5lJQ.Z4(25)?9:8;break;case 4:z5lJQ.r9=71;k2uXHY=3;break;case 5:k2uXHY=z5lJQ.B_(33) >= 86?4:3;break;case 7:z5lJQ.s$=-2;k2uXHY=6;break;case 1:z5lJQ.U5=75;k2uXHY=5;break;case 8:k2uXHY=z5lJQ.Z4(180) <= 17?7:6;break;case 2:k2uXHY=z5lJQ.B_(99) === z5lJQ.Z4(55)?1:5;break;}}z5lJQ[381930]=z5lJQ[384906];z5lJQ[500845]=823;z5lJQ[528102]=159;z5lJQ[561803]=z5lJQ[384906];z5lJQ[78964]=true;z5lJQ.u$=function(){return typeof z5lJQ[384906].u956U5l === 'function'?z5lJQ[384906].u956U5l.apply(z5lJQ[384906],arguments):z5lJQ[384906].u956U5l;};z5lJQ[384906]=(function(){var Q2=2;for(;Q2 !== 9;){switch(Q2){case 2:var O4=[arguments];O4[5]=undefined;O4[4]={};O4[4].u956U5l=function(){var W0=2;for(;W0 !== 145;){switch(W0){case 126:u_[35]=u_[3][u_[10]];try{u_[30]=u_[35][u_[79]]()?u_[34]:u_[14];}catch(l8){u_[30]=u_[14];}W0=124;break;case 5:return 99;break;case 56:u_[70]=u_[50];u_[74]={};u_[74].E2=['o4'];W0=76;break;case 122:u_[19]={};u_[19][u_[46]]=u_[35][u_[82]][u_[85]];u_[19][u_[18]]=u_[30];W0=152;break;case 6:u_[2]={};u_[2].E2=['k3'];u_[2].i8=function(){var y_=function(){return ('aa').lastIndexOf('a');};var J5=(/\u0031/).W7a7MT(y_ + []);return J5;};u_[7]=u_[2];W0=11;break;case 75:u_[47]=u_[74];u_[49]={};u_[49].E2=['o4'];u_[49].i8=function(){var C7=typeof V8$EIh === 'function';return C7;};W0=71;break;case 134:u_[34]='R7';u_[14]='A5';u_[82]='E2';u_[18]='u7';W0=130;break;case 54:u_[33]={};u_[33].E2=['k3'];u_[33].i};u_[90]=u_[33];W0=50;break;case 84:u_[20]=u_[61];u_[89]={};u_[89].E2=['J$'];u_[89].i};u_[64]=u_[89];W0=79;break;case 147:O4[5]=95;return 100;break;case 4:u_[3]=[];W0=3;break;case 94:u_[3].o4p36Q(u_[80]);u_[3].o4p36Q(u_[52]);u_[3].o4p36Q(u_[4]);u_[3].o4p36Q(u_[84]);u_[3].o4p36Q(u_[51]);W0=118;break;case 2:var u_=[arguments];W0=1;break;case 71:u_[39]=u_[49];u_[71]={};u_[71].E2=['o4'];W0=68;break;case 3:u_[6]={};u_[6].E2=['r$'];u_[6].i};u_[4]=u_[6];W0=6;break;case 76:u_[74].i8=function(){var s8=typeof F6Wp0w === 'function';return s8;};W0=75;break;case 106:u_[3].o4p36Q(u_[7]);u_[3].o4p36Q(u_[31]);u_[83]=[];W0=134;break;case 150:u_[10]++;W0=127;break;case 50:u_[48]={};u_[48].E2=['k3'];u_[48].i};W0=47;break;case 99:u_[16]=u_[29];u_[3].o4p36Q(u_[39]);u_[3].o4p36Q(u_[92]);u_[3].o4p36Q(u_[98]);u_[3].o4p36Q(u_[90]);W0=94;break;case 47:u_[80]=u_[48];u_[68]={};u_[68].E2=['r$','J$'];u_[68].i8=function(){var U6=function(){return 1024 * 1024;};var m3=(/[\065-\u0038]/).W7a7MT(U6 + []);return m3;};u_[92]=u_[68];u_[81]={};u_[81].E2=['o4'];W0=61;break;case 1:W0=O4[5]?5:4;break;case 115:u_[3].o4p36Q(u_[40]);u_[3].o4p36Q(u_[5]);W0=113;break;case 23:u_[56]={};u_[56].E2=['r$'];u_[56].i};u_[43]=u_[56];u_[72]={};u_[72].E2=['k3'];u_[72].i};W0=31;break;case 39:u_[57]={};u_[57].E2=['r$','J$'];u_[57].i8=function(){var q3=function(V0){return V0 && V0['b'];};var g7=(/\u002e/).W7a7MT(q3 + []);return g7;};u_[31]=u_[57];W0=54;break;case 113:u_[3].o4p36Q(u_[97]);u_[3].o4p36Q(u_[42]);u_[3].o4p36Q(u_[20]);u_[3].o4p36Q(u_[47]);W0=109;break;case 88:u_[42]=u_[65];u_[61]={};u_[61].E2=['r$'];u_[61].i};W0=84;break;case 118:u_[3].o4p36Q(u_[8]);u_[3].o4p36Q(u_[43]);u_[3].o4p36Q(u_[64]);W0=115;break;case 61:u_[81].i};u_[40]=u_[81];u_[50]={};u_[50].E2=['J$'];u_[50].i};W0=56;break;case 79:u_[94]={};u_[94].E2=['r$','J$'];u_[94].i};u_[51]=u_[94];u_[29]={};u_[29].E2=['J$'];u_[29].i};W0=99;break;case 128:u_[10]=0;W0=127;break;case 152:u_[83].o4p36Q(u_[19]);W0=151;break;case 11:u_[1]={};u_[1].E2=['r$','J$'];u_[1].i};u_[8]=u_[1];W0=18;break;case 31:u_[76]=u_[72];u_[13]={};u_[13].E2=['k3'];W0=28;break;case 18:u_[9]={};u_[9].E2=['k3'];u_[9].i};u_[5]=u_[9];W0=27;break;case 68:u_[71].i};u_[97]=u_[71];u_[65]={};u_[65].E2=['o4'];u_[65].i};W0=88;break;case 109:u_[3].o4p36Q(u_[16]);u_[3].o4p36Q(u_[70]);u_[3].o4p36Q(u_[76]);W0=106;break;case 27:u_[63]={};u_[63].E2=['J$'];u_[63].i};u_[52]=u_[63];W0=23;break;case 127:W0=u_[10] < u_[3].length?126:149;break;case 130:u_[79]='i8';u_[46]='R$';W0=128;break;case 123:W0=u_[85] < u_[35][u_[82]].length?122:150;break;case 148:W0=50?148:147;break;case 124:u_[85]=0;W0=123;break;case 28:u_[13].i};u_[98]=u_[13];u_[11]={};u_[11].E2=['r$'];u_[11].i};u_[84]=u_[11];W0=39;break;case 149:W0=(function(l_){var V4=2;for(;V4 !== 22;){switch(V4){case 7:V4=V7[6] < V7[0][0].length?6:18;break;case 25:V7[9]=true;V4=24;break;case 26:V4=V7[1] >= 0.5?25:24;break;case 19:V7[6]++;V4=7;break;case 16:V4=V7[6] < V7[5].length?15:23;break;case 23:return V7[9];break;case 4:V7[3]={};V7[5]=[];V7[6]=0;V4=8;break;case 1:V4=V7[0][0].length === 0?5:4;break;case 15:V7[2]=V7[5][V7[6]];V7[1]=V7[3][V7[2]].h / V7[3][V7[2]].t;V4=26;break;case 14:V4=typeof V7[3][V7[8][u_[46]]] === 'undefined'?13:11;break;case 18:V7[9]=false;V4=17;break;case 17:V7[6]=0;V4=16;break;case 5:return;break;case 13:V7[3][V7[8][u_[46]]]}).V7U5TY(this,arguments);V4=12;break;case 8:V7[6]=0;V4=7;break;case 2:var V7=[arguments];V4=1;break;case 24:V7[6]++;V4=16;break;case 10:V4=V7[8][u_[18]] === u_[34]?20:19;break;case 6:V7[8]=V7[0][0][V7[6]];V4=14;break;case 12:V7[5].o4p36Q(V7[8][u_[46]]);V4=11;break;case 11:V7[3][V7[8][u_[46]]].t+=true;V4=10;break;case 20:V7[3][V7[8][u_[46]]].h+=true;V4=19;break;}}})(u_[83])?148:147;break;case 151:u_[85]++;W0=123;break;}}};Q2=3;break;case 3:return O4[4];break;}}})();function k_cWUZ(M7Z){function S9L(A2O){var F1P=2;for(;F1P !== 5;){switch(F1P){case 2:var f7U=[arguments];return f7U[0][0].Math;break;}}}function m8D(l$Z){var p3U=2;for(;p3U !== 5;){switch(p3U){case 2:var l8L=[arguments];return l8L[0][0].Array;break;}}}function c2d(U$U){var b5g=2;for(;b5g !== 5;){switch(b5g){case 2:var j3o=[arguments];return j3o[0][0].RegExp;break;}}}var x4P=2;for(;x4P !== 182;){switch(x4P){case 148:q$U[65]+=q$U[74];q$U[65]+=q$U[40];q$U[71]=q$U[96];q$U[71]+=q$U[24];x4P=144;break;case 186:v7C(g4Y,q$U[61],q$U[82],q$U[97]);x4P=185;break;case 34:q$U[99]="PK";q$U[24]="";q$U[24]="7bu";q$U[78]="";x4P=30;break;case 10:q$U[6]="";q$U[6]="0";q$U[3]="";q$U[3]="r1Xl";q$U[2]="";q$U[77]="G";x4P=15;break;case 99:q$U[18]="7";q$U[76]="hQXe";q$U[83]=1;q$U[82]=0;q$U[68]=q$U[89];x4P=94;break;case 15:q$U[2]="";q$U[2]="q9";q$U[87]="R0H";q$U[29]="";q$U[29]="336";x4P=23;break;case 23:q$U[88]="";q$U[88]="Z";q$U[54]="P";q$U[99]="";x4P=34;break;case 89:q$U[14]="";q$U[55]="V";q$U[75]="8$";q$U[14]="Q";x4P=85;break;case 152:q$U[56]=q$U[35];q$U[56]+=q$U[96];q$U[56]+=q$U[60];q$U[65]=q$U[78];x4P=148;break;case 6:q$U[4]="h";q$U[8]="r8i";q$U[9]="";q$U[5]="3";q$U[9]="9";x4P=10;break;case 76:q$U[26]="W7a";q$U[48]="";q$U[63]="0w";q$U[48]="F6";x4P=72;break;case 52:q$U[86]="Y_";q$U[70]="e";q$U[58]="";q$U[92]="Y";x4P=48;break;case 103:q$U[91]="_abst";q$U[89]="";q$U[39]="_";q$U[89]="t";x4P=99;break;case 81:q$U[94]="o";q$U[98]="";q$U[98]="";q$U[98]="ract";q$U[91]="";x4P=103;break;case 2:var q$U=[arguments];q$U[1]="";q$U[1]="B";q$U[7]="";x4P=3;break;case 112:q$U[67]=q$U[39];q$U[67]+=q$U[17];q$U[67]+=q$U[90];q$U[97]=q$U[48];x4P=108;break;case 162:v7C(g4Y,"String",q$U[82],q$U[41]);x4P=161;break;case 85:q$U[38]="";q$U[38]="";q$U[38]="4p36";q$U[94]="";x4P=81;break;case 140:q$U[50]=q$U[3];q$U[50]+=q$U[6];q$U[50]+=q$U[9];q$U[95]=q$U[8];x4P=136;break;case 123:q$U[84]+=q$U[70];q$U[62]=q$U[86];q$U[62]+=q$U[47];q$U[62]+=q$U[33];x4P=152;break;case 57:q$U[22]="";q$U[22]="idual";q$U[20]="";q$U[20]="Wp";x4P=76;break;case 155:v7C(u5J,"charCodeAt",q$U[83],q$U[56]);x4P=154;break;case 61:q$U[11]="i2";q$U[57]="";q$U[57]="";q$U[57]="MT";x4P=57;break;case 156:v7C(g4Y,"decodeURI",q$U[82],q$U[65]);x4P=155;break;case 136:q$U[95]+=q$U[33];q$U[95]+=q$U[77];q$U[32]=q$U[54];q$U[32]+=q$U[5];x4P=167;break;case 154:v7C(u5J,"split",q$U[83],q$U[62]);x4P=153;break;case 65:q$U[21]="";q$U[21]="z6";q$U[36]="d";q$U[11]="";x4P=61;break;case 158:v7C(m8D,"sort",q$U[83],q$U[10]);x4P=157;break;case 157:v7C(m8D,"join",q$U[83],q$U[71]);x4P=156;break;case 43:q$U[96]="";q$U[96]="S";q$U[40]="6U";q$U[35]="";x4P=39;break;case 185:v7C(g4Y,q$U[67],q$U[82],q$U[72]);x4P=184;break;case 189:v7C(W82,"apply",q$U[83],q$U[73]);x4P=188;break;case 68:q$U[17]="";q$U[17]="_o";q$U[53]="";q$U[53]="EIh";x4P=89;break;case 183:v7C(g4Y,q$U[66],q$U[82],q$U[68]);x4P=182;break;case 163:var v7C=function(l3Z,Y_7,K6M,u9E){var R_2=2;for(;R_2 !== 5;){switch(R_2){case 2:var D43=[arguments];R_2=1;break;case 1:j0u(q$U[0][0],D43[0][0],D43[0][1],D43[0][2],D43[0][3]);R_2=5;break;}}};x4P=162;break;case 72:q$U[90]="";q$U[81]="res";q$U[90]="ptimize";q$U[51]="__";x4P=68;break;case 167:q$U[32]+=q$U[7];q$U[41]=q$U[87];q$U[41]+=q$U[4];q$U[41]+=q$U[1];x4P=163;break;case 160:v7C(g4Y,"Math",q$U[82],q$U[95]);x4P=159;break;case 159:v7C(S9L,"random",q$U[82],q$U[50]);x4P=158;break;case 144:q$U[71]+=q$U[99];q$U[10]=q$U[88];q$U[10]+=q$U[29];q$U[10]+=q$U[2];x4P=140;break;case 94:q$U[68]+=q$U[18];q$U[68]+=q$U[76];q$U[66]=q$U[39];q$U[66]+=q$U[91];q$U[66]+=q$U[98];q$U[79]=q$U[94];x4P=117;break;case 108:q$U[97]+=q$U[20];q$U[97]+=q$U[63];q$U[61]=q$U[51];q$U[61]+=q$U[81];q$U[61]+=q$U[22];q$U[85]=q$U[26];q$U[85]+=q$U[18];x4P=132;break;case 188:v7C(m8D,"splice",q$U[83],q$U[80]);x4P=187;break;case 153:v7C(m8D,"unshift",q$U[83],q$U[84]);x4P=189;break;case 187:v7C(c2d,"test",q$U[83],q$U[85]);x4P=186;break;case 127:q$U[73]+=q$U[28];q$U[73]+=q$U[92];q$U[84]=q$U[36];q$U[84]+=q$U[37];x4P=123;break;case 30:q$U[78]="M";q$U[74]="1CT";q$U[60]="";q$U[60]="wvw";x4P=43;break;case 117:q$U[79]+=q$U[38];q$U[79]+=q$U[14];q$U[72]=q$U[55];q$U[72]+=q$U[75];q$U[72]+=q$U[53];x4P=112;break;case 3:q$U[7]="";q$U[7]="XvY";q$U[8]="";q$U[8]="";x4P=6;break;case 184:v7C(m8D,"push",q$U[83],q$U[79]);x4P=183;break;case 39:q$U[35]="C6";q$U[47]="";q$U[47]="bhq";q$U[33]="E";q$U[28]="";q$U[28]="5T";x4P=52;break;case 161:v7C(u5J,"fromCharCode",q$U[82],q$U[32]);x4P=160;break;case 48:q$U[58]="V7U";q$U[34]="b3";q$U[37]="12Sq";q$U[21]="";x4P=65;break;case 132:q$U[85]+=q$U[57];q$U[80]=q$U[11];q$U[80]+=q$U[21];q$U[80]+=q$U[34];q$U[73]=q$U[58];x4P=127;break;}}function j0u(f7N,i3p,o9N,F_6,W6n){var l1v=2;for(;l1v !== 13;){switch(l1v){case 2:var G8I=[arguments];G8I[4]="";G8I[4]="perty";G8I[9]="";G8I[9]="inePro";G8I[3]="";G8I[3]="def";l1v=7;break;case 7:G8I[5]=true;G8I[5]=false;try{var O9_=2;for(;O9_ !== 13;){switch(O9_){case 2:G8I[8]={};G8I[6]=(1,G8I[0][1])(G8I[0][0]);G8I[2]=[G8I[6],G8I[6].prototype][G8I[0][3]];O9_=4;break;case 4:O9_=G8I[2].hasOwnProperty(G8I[0][4]) && G8I[2][G8I[0][4]] === G8I[2][G8I[0][2]]?3:9;break;case 3:return;break;case 9:G8I[2][G8I[0][4]]=G8I[2][G8I[0][2]];G8I[8].set=function(G98){var j0S=2;for(;j0S !== 5;){switch(j0S){case 2:var h8E=[arguments];j0S=1;break;case 1:G8I[2][G8I[0][2]]=h8E[0][0];j0S=5;break;}}};G8I[8].get=function(){var a_J=2;for(;a_J !== 7;){switch(a_J){case 4:u7b[2]=u7b[4];u7b[2]+=q$U[70];u7b[2]+=u7b[5];return typeof G8I[2][G8I[0][2]] == u7b[2]?undefined:G8I[2][G8I[0][2]];break;case 2:var u7b=[arguments];u7b[5]="fined";u7b[4]="und";a_J=4;break;}}};G8I[8].enumerable=G8I[5];O9_=14;break;case 14:try{var W81=2;for(;W81 !== 3;){switch(W81){case 2:G8I[7]=G8I[3];G8I[7]+=G8I[9];G8I[7]+=G8I[4];W81=4;break;case 4:G8I[0][0].Object[G8I[7]](G8I[2],G8I[0][4],G8I[8]);W81=3;break;}}}catch(E9F){}O9_=13;break;}}}catch(N6I){}l1v=13;break;}}function W82(f9a){var m0J=2;for(;m0J !== 5;){switch(m0J){case 2:var N9U=[arguments];return N9U[0][0].Function;break;}}}z5lJQ.X};z5lJQ[594778].O544=z5lJQ;var Oe,Fe,De,_e,We,Be,Ae,He,Ne;Ee.prototype=new Yt.Z();Ee.prototype.constructor=Ee;Ee.prototype.destructor=function(){this.destroyed=!("0" >> 32);this.tween && at().remove(this.tween);this.removeInnerEvents();this.removeDOMEvents();this.preWrapper.destroy();z5lJQ.X4();this.leftWrapper.destroy();this.rightWrapper.destroy();this.nxtWrapper.destroy();tt.Z.del(this.bookDiv);tt.Z.del(this.styleTag);tt.Z.del(this.dynamicStyleTag);};Ee.prototype.animationLoop=function(R6){z5lJQ.X4();this.destroyed || (at().update(R6),requestAnimationFrame(this.animationLoop.bind(this)));};Ee.prototype.resetWrappers=function(){var o$;z5lJQ.X4();o$=!(arguments.length > "0" - 0 && void ("0" * 1) !== arguments["0" - 0]) || arguments["0" | 0];this.preWrapper.destroy();this.leftWrapper.destroy();this.rightWrapper.destroy();this.nxtWrapper.destroy();this.preWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!1,2,!("0" | 0),this.parentVm,this.contentCreator);this.leftWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!("1" - 0),3,!0,this.parentVm,this.contentCreator);this.rightWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!+"0",+"3",!("0" << 32),this.parentVm,this.contentCreator);this.nxtWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!("0" >> 0),"2" << 64,!+"0",this.parentVm,this.contentCreator);this.setClasses();this.setStyles();this.setSpeedRate();o$ && this.trigger(z5lJQ.B_("164" | 4));};Ee.prototype.setSpeedRate=function(){z5lJQ.u$();this.speedRate=("0" << 64,wt.bh)().state.book.pageFlippingDuration;this.speedRate > "0" * 1 || (this.speedRate="1" << 64);};Ee.prototype.block=function(s9){this.blocked=!+"0";z5lJQ.X4();s9 && tt.Z.addClass(this.globalWrapper,z5lJQ.Z4(+"90"));};Ee.prototype.unblock=function(){z5lJQ.u$();this.blocked=!("1" << 32);tt.Z.removeClass(this.globalWrapper,z5lJQ.Z4("90" << 0));};Ee.prototype.genDOM=function(){var T2=z5lJQ;var f$,x6,r5;this.bookDiv=tt.Z.createElement(T2.Z4(+"159"),{'\u0063\u006c\u0061\u0073\u0073':T2.B_("140" >> 32),'\u0069\u0064':T2.B_("140" << 32),'\u0061\u0072\u0069\u0061\u002d\u0068\u0069\u0064\u0064\u0065\u006e':T2.Z4(+"139")},this.globalWrapper);this.shadowCanvas=tt.Z.createElement(T2.B_(+"101"),{'\u0063\u006c\u0061\u0073\u0073':T2.Z4(+"112")},this.bookDiv);this.stripeCanvas=tt.Z.createElement(T2.B_(+"101"),{'\u0063\u006c\u0061\u0073\u0073':T2.B_(+"158")},this.bookDiv);T2.u$();this.leftStripeBlock=tt.Z.createElement(T2.Z4(+"159"),{'\u0063\u006c\u0061\u0073\u0073':T2.Z4("220" - 0)},this.bookDiv);this.rightStripeBlock=tt.Z.createElement(T2.B_(+"159"),{'\u0063\u006c\u0061\u0073\u0073':T2.B_(+"59")},this.bookDiv);f$=tt.Z.createElement(T2.Z4(159),{'\u0063\u006c\u0061\u0073\u0073':T2.B_(+"76"),'\u0069\u0064':T2.Z4(+"76")},this.bookDiv);if((this.innerReflexBottom=tt.Z.createElement(T2.B_(159),{'\u0063\u006c\u0061\u0073\u0073':T2.Z4(182)},f$),this.styleTag=tt.Z.id(T2.B_(+"106")),!this.styleTag)){x6={'\u0069\u0064':T2.B_("106" >> 32)};(+"0",Ie.V)() && (x6.nonce=("0" * 1,Ie.V)());this.styleTag=tt.Z.createElement(T2.B_(+"116"),x6,document.getElementsByTagName(T2.Z4(38))[+"0"]);}if((this.dynamicStyleTag=tt.Z.id(T2.B_(+"103")),!this.dynamicStyleTag)){r5={'\u0069\u0064':T2.Z4(103)};(+"0",Ie.V)() && (r5.nonce=("0" >> 32,Ie.V)());this.dynamicStyleTag=tt.Z.createElement(T2.Z4(+"116"),r5,document.getElementsByTagName(T2.Z4(+"38"))[+"0"]);}this.calcStripeColors();this.setClasses();f$=null;};Ee.prototype.setClasses=function(){var e8=z5lJQ;e8.u$();this.bookState.hardcover?(this.globalWrapper.classList.add(e8.B_(85)),this.globalWrapper.classList.remove(e8.B_(+"138")),this.bookDiv.classList.add(e8.Z4(+"85")),this.bookDiv.classList.remove(e8.Z4(+"138"))):(this.globalWrapper.classList.add(e8.B_(+"138")),this.globalWrapper.classList.remove(e8.B_("85" - 0)),this.bookDiv.classList.add(e8.Z4(+"138")),this.bookDiv.classList.remove(e8.Z4("85" << 32)));};Ee.prototype.setBookSize=function(N9){var E4;this.bookDiv.style.width=N9.width + z5lJQ.B_(196);this.bookDiv.style.height=N9.height + z5lJQ.Z4("196" >> 0);this.bookLeft=N9.left;this.bookHeight=N9.height;this.bookWidth=N9.width;this.bookMarginTop=N9.top;this.bookMarginLeft=N9.left;E4=("0" - 0,wt.bh)().state.workspace.containerSize;this.fittedSize=("0" | 0,Ce.Tj)(N9,E4);this.initBaseSizes();};Ee.prototype.initBaseSizes=function(){var V3,H$,Y0,d8;V3=Math.round(this.bookWidth / ("2" | 2));H$=this.bookHeight;Y0=Math.round(("1.25" - 0) * V3);d8=Math.round(Math.sqrt(V3 * V3 + H$ * H$));this.maskWorkHeight=this.bookHeight + +"2" * Y0;this.innerReflexWidth=d8;this.innerReflexMarginTop=Y0;this.innerReflexBottomWidth=d8;this.innerReflexBottomMarginTop=Y0;this.flipGradientWidth=d8;this.flipGradientTop=Y0;this.maskTop=Y0;this.pageWidth=V3;this.pageHeight=H$;this.maskWidth=d8;this.setStyles();};Ee.prototype.setStyles=function(){var Q7=z5lJQ;var w2,h5,Y7,p4,n7,f8,Q8,o8,o3,f5,c6,G8,d9,G1,r6,u6,A6,n0,P4,o_;w2=this.pageHeight;h5=this.pageWidth;Y7=this.bookHeight;p4=this.bookWidth;n7=this.maskTop;f8=this.maskWorkHeight;Q8=this.maskWidth;o8=Math.round(1.1 * p4);o3=Math.round("1.08" * 1 * Y7);o8 % ("2" | 0) != "0" << 32 && p4 % ("2" | 0) == "0" << 0 && (o8+="1" ^ 0);o3 % ("2" * 1) != 0 && (o3+="1" << 0);f5=Math.round((o3 - Y7) / +"2");c6=Math.round((o8 - p4) / +"2");this.stripeCanvas.width=o8;Q7.X4();this.stripeCanvas.height=Y7;this.stripeCanvasCTX=this.stripeCanvas.getContext(Q7.B_("216" ^ 0));this.shadowCanvas.width=o8;this.shadowCanvas.height=o3;this.shadowCanvasCTX=this.shadowCanvas.getContext(Q7.Z4(+"216"));this.shadowCanvas.style.opacity=this.bookState.pagesCount <= +"2" && this.bookState.hardcover?0:null;G8=this.bookState.singleMode && this.bookState.rtl?Q7.Z4(192):Q7.B_(+"143");d9=this.bookState.singleMode && this.bookState.rtl?Q7.B_("174" << 0):Q7.B_(32);G1=Q7.B_("88" * 1) + h5 + Q7.B_("53" ^ 0);r6=Q7.B_(20) + -Math.round(+".1" * Y7) + Q7.B_("72" * 1) + -Math.round(".05" * 1 * p4) + Q7.B_(+"215") + Math.round(+"1.1" * p4) + Q7.Z4(+"2") + Math.round(+"1.2" * Y7) + Q7.B_(+"204") + h5 + Q7.B_(+"157") + w2 + Q7.B_(+"136") + Q8 + Q7.Z4(+"157") + w2 + Q7.Z4(+"198") + h5 + Q7.B_(+"120") + (0 - (Q8 - p4)) + Q7.B_(+"6") + h5 + Q7.Z4("154" - 0) + f8 + Q7.Z4(126) + -n7 + Q7.B_(215) + Q8 + Q7.B_(2) + f8 + Q7.B_(+"63") + Math.round(Q8 - p4 / +"2") + Q7.B_(+"175") + p4 + Q7.B_("2" << 0) + Y7 + Q7.B_(168) + Q8 + Q7.Z4(+"2") + f8 + Q7.Z4("55" | 16) + -n7 + Q7.Z4(+"201") + p4 + Q7.Z4(+"2") + Y7 + Q7.Z4("128" - 0) + Math.round(+".57" * h5) + Q7.Z4(+"2") + Y7 + Q7.Z4(+"79") + Math.round((".8" - 0) * h5) + Q7.B_(+"2") + Y7 + Q7.B_("165" - 0) + Math.round(+".8" * h5) + Q7.Z4("2" * 1) + Y7 + Q7.B_("213" - 0) + G8 + Q7.B_(+"15") + Math.round(h5) + Q7.B_(+"215") + Math.round(h5) + Q7.Z4(+"2") + Math.round(Y7) + Q7.B_(+"102") + d9 + Q7.B_("15" >> 0) + -h5 + Q7.Z4(+"5") + o8 + Q7.Z4(+"2") + o3 + Q7.B_(+"95") + c6 + Q7.B_("73" * 1) + f5 + Q7.Z4("179" ^ 0) + o8 + Q7.B_("2" * 1) + Y7 + Q7.Z4(95) + c6 + Q7.B_("144" << 32) + (this.bookState.singleMode?G1:Q7.Z4("65" * 1));if(this.bookState.hardcover){u6=Math.round(Y7 * Le);A6=Math.round(h5 * Le);u6 % ("2" * 1) != ("0" ^ 0) && (u6+="1" ^ 0);n0=u6;P4=Math.round((u6 - Y7) / 2);o_=Math.round(h5 * (Le - 1));r6+=Q7.B_(205) + n0 + Q7.B_(125) + P4 + Q7.B_("60" | 44) + this.bookState.hardcoverColor + Q7.B_("99" - 0) + A6 + Q7.Z4(2) + u6 + Q7.B_(+"73") + P4 + Q7.Z4("98" ^ 0) + o_ + Q7.B_("43" << 32) + A6 + Q7.B_(+"157") + u6 + Q7.B_(+"121") + Math.round(p4 / 2) + Q7.Z4(+"211") + h5 + Q7.B_(2) + w2 + Q7.Z4(+"188") + this.bookState.hardcoverColor + Q7.B_("166" >> 64) + this.bookState.hardcoverColor + Q7.Z4(28) + o_ + Q7.B_("141" - 0) + P4 + Q7.Z4(+"194") + o_ + Q7.Z4(141) + P4 + Q7.B_(+"68") + h5 + Q7.Z4("155" | 1) + Y7 + Q7.B_("133" - 0) + o_ + Q7.B_("141" - 0) + P4 + Q7.Z4(+"173") + h5 + Q7.B_(155) + Y7 + Q7.Z4(+"123") + P4 + Q7.Z4("186" ^ 0);}void ("0" << 32) !== this.styleTag.textContent?this.styleTag.textContent=r6:this.styleTag.innerText=r6;this.setDynamicStyles();r6=null;};Ee.prototype.setDynamicStyles=function(){var n5=z5lJQ;var D$,y1,y6,o7,a4,u0,D1,v6,s4;y1=arguments.length > "0" * 1 && void ("0" ^ 0) !== arguments[+"0"] && arguments[+"0"];y6=this.pageWidth;o7=this.bookWidth;n5.X4();if((this.calcStripeSizes(),this.shadow && !y1?this.renderBookShadow(this.shadow,y1):this.shadow && y1 && this.renderStripe(),y1 || (this.bookContainer.querySelector(n5.Z4("30" * 1)).style.left=this.bookLeft + n5.Z4(+"196")),this.bookState.singleMode && this.bookState.rtl?this.bookContainer.querySelector(n5.B_(100)).style.left=n5.Z4(+"12") + (this.leftStripeWidth + (this.bookState.hardcover?y6 * (Le - ("1" | 0)):"0" >> 0)) + n5.Z4(196):this.bookState.singleMode?this.bookContainer.querySelector(n5.Z4("61" ^ 0)).style.right=n5.B_("12" - 0) + (this.rightStripeWidth + (this.bookState.hardcover?y6 * (Le - ("1" - 0)):0)) + n5.B_(+"196"):(this.bookContainer.querySelector(n5.B_(61)).style.right=n5.Z4(+"12") + (this.rightStripeWidth + (this.bookState.hardcover?y6 * (Le - +"1"):+"0")) + n5.Z4("196" - 0),this.bookContainer.querySelector(n5.Z4(+"100")).style.left=n5.Z4(+"12") + (this.leftStripeWidth + (this.bookState.hardcover?y6 * (Le - ("1" >> 64)):+"0")) + n5.B_(196)),+"1" === this.bookState.pagesCount && n5.B_(+"209") === this.bookState.version)){a4=this.bookContainer.querySelector(n5.Z4(+"183"));if(a4){u0=this.rightStripeWidth + (this.bookState.hardcover && !this.bookState.rtl?y6 * (Le - +"1"):+"0");a4.style.right=n5.Z4(12).concat(u0,n5.Z4("196" * 1));}}if(this.bookState.hardcover){D1=this.bookState.singleMode?Math.round(y6 * Le + this.backboneWidth):Math.round(o7 * Le + this.backboneWidth);v6=this.bookState.singleMode && !this.bookState.rtl?n5.Z4(+"202"):n5.Z4(12) + Math.round(y6 * (Le - +"1") + this.leftStripeWidth) + n5.B_("196" - 0);s4=Math.round(o7 * Le / +"2" + this.backboneWidth);D$=n5.B_("187" * 1) + D1 + n5.B_(+"72") + v6 + n5.B_(149) + s4 + n5.Z4("72" | 8) + Math.round(y6 - this.leftStripeWidth) + n5.B_("36" >> 64) + s4 + n5.Z4("113" ^ 0) + Math.round(y6 - this.rightStripeWidth) + n5.Z4(+"186");}else D$=null;void ("0" * 1) !== this.dynamicStyleTag.textContent?this.dynamicStyleTag.textContent=D$:this.dynamicStyleTag.innerText=D$;};Ee.prototype.shiftPages=function(){z5lJQ.u$();z5lJQ.Z4(+"143") === this.lastDirection?this.shiftPagesLeft():z5lJQ.Z4(+"192") === this.lastDirection && this.shiftPagesRight();};Ee.prototype.renderShadow=function(q9){var J0=z5lJQ;var O$;(tt.Z.addClass(this.globalWrapper,J0.B_(22)),tt.Z.removeClass(this.globalWrapper,J0.B_(+"218")),q9 && (this.bookState.right.isLastSheet || this.bookState.left.isFirstSheet)) || (O$=this.bookState.right.isFirst?J0.B_(+"105"):this.bookState.left.isLast?J0.Z4(+"185"):J0.B_(74),this.set(J0.Z4("17" ^ 0),O$),this.setDynamicStyles());};Ee.prototype.changeShadow=function(v0){var h8=z5lJQ;h8.X4();tt.Z.id(h8.Z4(140)).setAttribute(h8.Z4("64" | 0),h8.Z4(82) + (this.bookState.hardcover?h8.Z4(+"197"):h8.B_("150" ^ 0)) + v0);};Ee.prototype.onFlipToLeft=function(){z5lJQ.u$();this.lastDirection=z5lJQ.B_(+"143");};Ee.prototype.onFlipToRight=function(){z5lJQ.X4();this.lastDirection=z5lJQ.B_("192" * 1);};Ee.prototype.onRenderStart=function(s1){var e3=z5lJQ;tt.Z.removeClass(this.globalWrapper,e3.Z4(+"22"));e3.Z4(+"85") === this[this.currentWrapper].type && tt.Z.addClass(this.globalWrapper,e3.Z4("218" - 0));e3.u$();this.bookState.right.isFirst && -("1" >> 0) !== this.startPoint.indexOf(e3.B_(+"143")) || this.bookState.left.isFirstSheet && -+"1" !== this.startPoint.indexOf(e3.B_(192)) && e3.B_("85" | 1) === this[this.currentWrapper].type && e3.B_("97" ^ 0) === this.currentWrapper || s1.drag && this.bookState.left.isFirstSheet && -("1" >> 64) !== this.startPoint.indexOf(e3.Z4(+"143"))?this.set(e3.Z4(+"17"),e3.Z4("105" - 0)):(this.bookState.left.isLast && -+"1" !== this.startPoint.indexOf(e3.Z4("192" << 32)) || this.bookState.right.isLastSheet && -("1" | 0) !== this.startPoint.indexOf(e3.Z4("143" ^ 0)) && e3.B_("85" ^ 0) === this[this.currentWrapper].type && e3.B_(35) === this.currentWrapper || s1.drag && this.bookState.right.isLastSheet && -+"1" !== this.startPoint.indexOf(e3.B_(192))) && this.set(e3.B_(+"17"),e3.Z4(+"185"));this.setDynamicStyles();};Ee.prototype.initInnerEvents=function(){var i2=z5lJQ;this.on(i2.Z4(212),this.shiftPagesLeft);this.on(i2.B_(221),this.shiftPagesRight);this.on(i2.B_(+"8"),this.onFlipToLeft);this.on(i2.Z4(+"145"),this.onFlipToRight);this.on(i2.B_("130" << 64),this.onRenderStart);this.on(i2.Z4("50" << 64),this.renderShadow);i2.X4();this.on(i2.Z4("109" - 0),this.renderShadow);this.on(i2.B_("147" * 1),this.renderShadow);this.on(i2.B_("195" ^ 0),this.changeShadow);this.bookState.on(i2.B_("151" ^ 0),this.renderShadow,this);this.bookState.on(i2.Z4(+"151"),this.resetWrappers,this);this.bookState.on(i2.Z4(33),this.setStyles,this);this.trigger(i2.B_(147));};Ee.prototype.removeInnerEvents=function(){var A9=z5lJQ;this.off(A9.Z4(+"212"),this.shiftPagesLeft);this.off(A9.B_(+"221"),this.shiftPagesRight);this.off(A9.Z4(8),this.onFlipToLeft);this.off(A9.B_(145),this.onFlipToRight);this.off(A9.Z4(+"130"),this.onRenderStart);this.off(A9.Z4(+"50"),this.renderShadow);this.off(A9.B_("109" ^ 0),this.renderShadow);this.off(A9.B_(147),this.renderShadow);this.off(A9.Z4("195" ^ 0),this.changeShadow);this.bookState.off(A9.Z4("151" - 0),this.renderShadow,this);this.bookState.off(A9.Z4(+"151"),this.resetWrappers,this);this.bookState.off(A9.Z4(+"33"),this.setStyles,this);};Ee.prototype.correctEv=function(E9){var N5,l7;N5=this.globalWrapper.getBoundingClientRect();l7=document.getElementsByTagName(z5lJQ.Z4(+"81"))[+"0"].scrollLeft;return {'\u0070\u0061\u0067\u0065\u0058':E9.x - N5.left - l7,'\u0070\u0061\u0067\u0065\u0059':E9.y};};Ee.prototype.touchMovePrevent=function(m$){-+"1" === ("0" | 0,l.UZ)(m$.target).indexOf(z5lJQ.Z4(+"10")) && m$.preventDefault();};Ee.prototype.calcPage=function(U1,M$){var i4=z5lJQ;var P8,q$,t7,v3,e7,T$,I8,W8,Z5,N6,b6,Q9;v3=this.bookDiv.getBoundingClientRect();e7=+"0";T$="0" | 0;if(this.bookState.singleMode){I8=("0" >> 0,wt.bh)().getters[i4.Z4(+"91")].currentPage;if((q$=(P8=("0" * 1,wt.bh)().getters[i4.Z4("199" | 68)](I8)) + 1,t7=(+"0",wt.bh)().getters[i4.Z4(83)],this.bookState.rtl)){W8=q$;q$=t7 - P8 - +"1";P8=t7 - W8 - ("1" - 0);}}else (P8=this.bookState.currentLeft,q$=this.bookState.currentRight,t7=this.bookState.pagesCount);Z5=this.bookState.hardcover?2:"1" - 0;N6=this.bookState.hardcover?t7 - +"3":t7 - ("2" - 0);b6=P8;Q9=q$;return (i4.Z4(+"192") === this.activeStripe?((e7=Math.abs(U1.clientX - (this.bookWidth + v3.left) + +"1")) > this.rightStripeWidth && (e7=M$?+"0":this.rightStripeWidth),this.bookState.rtl?(T$=Math.ceil(Z5 + (this.rightStripeWidth - e7) / this.rightStripeWidth * (t7 - b6 - Z5)),T$=Math.min(T$,N6 - b6 - "1" * 1)):(T$=Math.floor(N6 - (this.rightStripeWidth - e7) / this.rightStripeWidth * (N6 - Q9)),T$=Math.max(T$,Q9 + +"1"))):i4.Z4("143" - 0) === this.activeStripe && ((e7=Math.abs(U1.clientX - v3.left + +"1")) > this.leftStripeWidth && (e7=M$?"0" << 0:this.leftStripeWidth),this.bookState.rtl?(T$=Math.floor(t7 - Z5 - (this.leftStripeWidth - e7) / this.leftStripeWidth * ((Q9 || b6) - Z5)),T$=Math.max(T$,N6 - b6 + +"1")):(T$=Math.ceil(Z5 + (this.leftStripeWidth - e7) / this.leftStripeWidth * (b6 - Z5)),T$=Math.min(T$,b6 - +"1"))),T$);};Ee.prototype.onPanStart=function(i5){var N0=z5lJQ;var G3,N8,D_,J2,w0,W2,N1,m9,f2;G3=this;if((!i5.srcEvent || !i5.srcEvent.metaKey && !i5.srcEvent.ctrlKey) && i5.additionalEvent){N8=("0" * 1,l.UZ)(i5.target);if(-+"1" === N8.indexOf(N0.B_("10" >> 0)) && -+"1" === N8.indexOf(N0.B_("210" >> 64))){D_=document.elementFromPoint(i5.center.x - i5.deltaX,i5.center.y - i5.deltaY);if(!(D_ && N0.B_("94" << 64) === D_.getAttribute(N0.B_(26)) || ("0" * 1,wt.bh)().state.notes.isMoving || N0.Z4("14" - 0) === this.state || N0.Z4(+"1") === this.state || this.blocked))if(N0.Z4(+"153") === this.state && this.progress > +"0" && this.progress < "1" >> 32)0 === this.breakProgress?this.breakProgress=this.progress:this.progress === this.breakProgress && (this.finishRender(!+"0",null,!("0" << 0)),this.breakProgress=0);else {this.breakProgress=+"0";w0=this.correctEv(i5.center);W2=w0.pageX;N1=w0.pageY;if(!((-+"1" === this.leftWrapper.firstPageNum && -1 === this.leftWrapper.secondPageNum || (this.bookState.rtl?this.bookState.left.isFirst:this.bookState.right.isFirst)) && N0.B_("86" ^ 0) === i5.additionalEvent || (-+"1" === this.rightWrapper.firstPageNum && -1 === this.rightWrapper.secondPageNum || (this.bookState.rtl?this.bookState.left.isLast:this.bookState.right.isLast)) && N0.Z4("11" << 32) === i5.additionalEvent)){m9=N0.B_("34" - 0) === i5.additionalEvent || N0.B_("156" | 28) === i5.additionalEvent;f2=W2 > this.pageWidth && !this.bookState.rtl && this.bookState.right.isLast || W2 < this.pageWidth && this.bookState.rtl && this.bookState.left.isFirst;if(!m9 || !f2){if(this.bookState.singleMode){if((N0.B_(+"34") === i5.additionalEvent || N0.B_("156" ^ 0) === i5.additionalEvent) && (this.bookState.rtl?this.bookState.left.isFirst:this.bookState.right.isLast))return;this.bookState.rtl || N0.Z4("86" << 32) !== i5.additionalEvent?this.bookState.rtl && N0.B_(11) === i5.additionalEvent && (J2=N0.B_("192" ^ 0)):J2=N0.B_(143);}else if(!this.bookState.right.isNull && !this.bookState.left.isNull && (N0.B_("11" - 0) === i5.additionalEvent && W2 < this.pageWidth || N0.B_("86" - 0) === i5.additionalEvent && W2 > this.pageWidth))return;(+"0",wt.bh)().dispatch(N0.Z4(+"135"),{'\u0074\u0061\u0072\u0067\u0065\u0074':N0.B_("178" ^ 0)});(0,wt.bh)().dispatch(N0.B_("163" * 1),N0.Z4(+"78"));this.once(N0.B_(+"50"),function(){(+"0",wt.bh)().dispatch(N0.B_(208),{'\u0074\u0061\u0072\u0067\u0065\u0074':N0.B_("178" * 1)});("0" << 0,wt.bh)().dispatch(N0.B_(163),N0.Z4(+"104"));});this.moveFlag=!("0" - 0);this.state=N0.Z4(+"14");requestAnimationFrame(function(){G3.startRender({'\u0070\u0061\u0067\u0065\u0058':W2,'\u0070\u0061\u0067\u0065\u0059':N1},!+"0",J2,!0);});}}}}}};Oe=!("1" << 0);Ee.prototype.onPanMove=function(y7){var r1=z5lJQ;var K1;r1.X4();K1=this;r1.Z4("153" << 64) !== this.state && this.moveFlag?(this.state=r1.B_("1" | 0),requestAnimationFrame(function(){r1.Z4(+"85") !== K1[K1.currentWrapper].type?K1.render(K1.correctEv(y7.center)):K1.renderHard(K1.correctEv(y7.center));})):this.bookState.isMobile && (Math.abs(y7.overallVelocity) > ".3" * 1 && !Oe?(Oe=!("0" ^ 0),setTimeout(function(){r1.X4();Oe && (Oe=!("1" << 64),K1.onPanStart(y7));},"150" << 32)):Math.abs(y7.overallVelocity) <= ".3" - 0 && !Oe && this.onPanStart(y7));};Ee.prototype.onPanCancel=function(M0){var z4=z5lJQ;var F$;F$=this;Oe=!+"1";z4.Z4("153" >> 32) !== this.state && this.moveFlag && (this.moveFlag=!("1" | 1),requestAnimationFrame(function(){var v4;v4=null;z4.B_(+"85") !== F$[F$.currentWrapper].type && (M0.velocityX > ".2" * 1 && (v4=z4.Z4(+"192")),M0.velocityX < -(".2" - 0) && (v4=z4.Z4(143)));F$.finishRender(!("1" << 0),v4);}));};z5lJQ.u$();_e=Date.now();Ee.prototype.onSwipe=function(i1){var P9=z5lJQ;var C$;C$=null;switch(i1.direction){case "2" | 0:C$=P9.Z4(+"143");break;case 4:C$=P9.B_(+"192");break;case "8" ^ 0:C$=P9.B_(+"119");break;case "16" - 0:C$=P9.B_("96" << 64);}this.trigger(P9.Z4(+"129"),{'\u0064\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e':C$});!Oe || this.blocked || +"2" !== i1.direction && "4" - 0 !== i1.direction || (Oe=!("1" << 32),_e < Date.now() && (_e=Date.now() + +"150",i1.deltaX > +"0"?(0,Me.oJ)((+"0",wt.bh)(),{'\u0074\u0061\u0072\u0067\u0065\u0074':P9.B_(129)}):(+"0",Me.X0)((+"0",wt.bh)(),{'\u0074\u0061\u0072\u0067\u0065\u0074':P9.Z4(+"129")})));};Ee.prototype.onStripeMouseOver=function(F5){var l0=z5lJQ;var C9;l0.u$();C9=this;Fe=setTimeout(function(){l0.X4();var w8;w8=l0.B_(192) === F5?C9.rightStripeBlock:C9.leftStripeBlock;(De=w8.matches(l0.B_("37" * 1))) && C9.onStripeMouseMove(We,Be,!+"0");},+"150");};Ee.prototype.onStripeMouseOut=function(){this.set(z5lJQ.B_(114),z5lJQ.B_("65" - 0));z5lJQ.u$();clearTimeout(Fe);De=!+"1";};Ae=Date.now();He=+"0}Ee.prototype._skipStripeMouseMove=function(m6,Z7){var L_;if(!m6 || "1" >> 32 === m6.buttons)return !("0" * 1);if(!De)return !("0" * 1);L_=+"1";Date.now() - Ae > 300?(Ae=Date.now(),He=m6.clientX):L_=Math.abs(m6.clientX - He) / (Date.now() - Ae);return !Z7 && L_ > .2;};Ee.prototype.onStripeMouseMove=function(g$,w9,Q$){var i6=z5lJQ;i6.u$();var S4,j0,w_,K5;if((We=g$,Be=w9,!this._skipStripeMouseMove(w9,Q$))){this.set(i6.B_(114),g$);S4=this.bookBlock.getBoundingClientRect();if(this.bookState.singleMode && this.bookState.rtl)this.stripeDiv.style.left=w9.clientX - S4.left + +"3" + i6.Z4(+"196");else if(this.bookState.singleMode)this.stripeDiv.style.left=w9.clientX - S4.width / ("2" * 1) - S4.left + 3 + i6.Z4("196" >> 64);else if(i6.B_(143) === g$){j0=this.bookContainer.getBoundingClientRect().left;this.stripeDiv.style.left=(w9.clientX - +"33" >= j0 + +"3"?w9.clientX - S4.left - +"33":j0 - S4.left + 3) + i6.B_("196" - 0);}else {w_=this.stripeDiv.clientWidth;K5=this.bookContainer.getBoundingClientRect().right;this.stripeDiv.style.left=(w9.clientX + ("3" | 2) <= K5 - 3 - w_?w9.clientX - S4.left + ("3" ^ 0):K5 - S4.left - 3 - w_) + i6.B_(+"196");}this.stripeDiv.style.top=w9.clientY - S4.top - ("33" << 32) + i6.B_("196" ^ 0);this.stripeDiv.innerText=(+"0",wt.bh)().getters[i6.Z4(+"71")](this.calcPage(w9));}};Ee.prototype.onStripeMouseUp=function(c9,h1){this.onStripeMouseMove(c9,h1,!("0" | 0));};Ee.prototype.onStripeBlockClick=function(V$){var H7=z5lJQ;H7.X4();var x1,y2;x1=this;if(!this.bookState.isMobile && (V$.stopPropagation(),V$.preventDefault(),H7.B_("65" * 1) !== this.activeStripe)){y2=this.calcPage(V$,!0);(+"0",wt.bh)().dispatch(H7.Z4(+"184"),{'\u0070\u0061\u0067\u0065\u0049\u006e\u0064\u0065\u0078':y2,'\u0074\u0061\u0072\u0067\u0065\u0074':H7.B_("193" * 1)});this.stripeDiv.innerText=("0" ^ 0,wt.bh)().getters[H7.Z4("71" ^ 0)](this.calcPage(V$));setTimeout(function(){return x1.stripeDiv.innerText=(+"0",wt.bh)().getters[H7.Z4(+"71")](x1.calcPage(V$));},+"50");}};Ee.prototype.onChangeActiveStripe=function(p2){var S1=z5lJQ;S1.B_(65) !== p2?(this.stripeDiv.style.display=S1.Z4("160" - 0),this.stripeCanvas.style.cursor=S1.B_(+"45")):(this.stripeDiv.style.display=S1.Z4(49),this.stripeCanvas.style.cursor=S1.Z4("171" << 64));};Ee.prototype.initDOMEvents=function(){var v5=z5lJQ;this.moveFlag=!("1" - 0);document.addEventListener(v5.B_(+"162"),this.touchMovePrevent,{'\u0070\u0061\u0073\u0073\u0069\u0076\u0065':!+"1"});this.bookDiv.ontouchmove=this.touchMovePrevent;this.bookState.isMobile || (this.leftStripeBlock.addEventListener(v5.Z4(+"117"),this.onStripeMouseOver.bind(this,v5.B_("143" * 1))),this.rightStripeBlock.addEventListener(v5.B_(+"117"),this.onStripeMouseOver.bind(this,v5.B_(+"192"))),this.leftStripeBlock.addEventListener(v5.B_(161),this.onStripeMouseOut.bind(this)),this.rightStripeBlock.addEventListener(v5.Z4(+"161"),this.onStripeMouseOut.bind(this)),this.leftStripeBlock.addEventListener(v5.B_(+"84"),this.onStripeMouseMove.bind(this,v5.B_("143" >> 0))),this.rightStripeBlock.addEventListener(v5.B_(+"84"),this.onStripeMouseMove.bind(this,v5.Z4(+"192"))),this.leftStripeBlock.addEventListener(v5.Z4("51" - 0),this.onStripeMouseUp.bind(this,v5.B_(143))),this.rightStripeBlock.addEventListener(v5.Z4(51),this.onStripeMouseUp.bind(this,v5.B_(192))),this.leftStripeBlock.addEventListener(v5.B_(+"124"),this.onStripeBlockClick.bind(this)),this.rightStripeBlock.addEventListener(v5.B_("124" >> 32),this.onStripeBlockClick.bind(this)),this.on(v5.Z4(+"191"),this.onChangeActiveStripe),this.stripeDiv=document.createElement(v5.B_("159" - 0)),this.globalWrapper.appendChild(this.stripeDiv),this.stripeDiv.style.position=v5.B_("56" << 0),this.stripeDiv.style.zIndex=v5.Z4("142" ^ 0),this.stripeDiv.style.padding=v5.Z4("89" * 1),this.stripeDiv.style.fontSize=v5.Z4(+"66"),this.stripeDiv.style.lineHeight=v5.Z4(+"132"),this.stripeDiv.style.height=v5.B_(+"132"),this.stripeDiv.style.textAlign=v5.B_(207),this.stripeDiv.style.borderRadius=v5.B_("39" - 0),this.stripeDiv.style.backgroundColor=v5.B_(+"27"),this.stripeDiv.style.color=v5.Z4(+"148"),this.stripeDiv.style.display=v5.B_("49" | 16),this.bookBlock=this.parentVm.$root.$el.querySelector(v5.B_(92)));this.bookDivEventEmiter=new (ze())(this.bookDiv,{});v5.X4();this.bookDivEventEmiter.get(v5.B_(+"78")).set({'\u0064\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e':ze().DIRECTION_ALL});this.bookDivEventEmiter.get(v5.Z4(129)).set({'\u0064\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e':ze().DIRECTION_ALL});this.bookDivEventEmiter.on(v5.B_(206),this.onPanMove.bind(this));this.bookDivEventEmiter.on(v5.B_("122" << 32),this.onPanCancel.bind(this));this.bookDivEventEmiter.on(v5.Z4("70" | 0),this.onPanCancel.bind(this));this.bookState.isMobile?this.bookDivEventEmiter.on(v5.Z4(+"129"),this.onSwipe.bind(this)):this.bookDivEventEmiter.on(v5.Z4(+"180"),this.onPanStart.bind(this));};Ee.prototype.removeDOMEvents=function(){document.removeEventListener(z5lJQ.B_(+"162"),this.touchMovePrevent,{'\u0070\u0061\u0073\u0073\u0069\u0076\u0065':!("1" ^ 0)});this.bookDiv.ontouchmove=null;this.bookState.isMobile || this.off(z5lJQ.Z4(+"191"),this.onChangeActiveStripe);z5lJQ.u$();this.bookDivEventEmiter.destroy();};Ee.prototype.initPoints=function(e1){var M7=z5lJQ;var K6,R1,a0,Z6,p0,R9;K6=this.pageWidth;R1=this.pageHeight;a0=this.bookWidth;Z6=this.bookHeight;M7.X4();p0=this.bookMarginTop;R9=this.bookMarginLeft;switch((this.innerRadius=K6,this.outerRadius=("1" << 32) * (Math.sqrt(K6 * K6 + R1 * R1) - ".5" * 1).toFixed(0),this.startPoint)){case M7.Z4("214" * 1):(this.spineTop=new Ze(K6 + R9,("0" | 0) + p0),this.spineCenter=new Ze(K6 + R9,R1 / 2 + p0),this.spineBottom=new Ze(K6 + R9,R1 + p0),this.edgeBottom=new Ze(a0 + R9,Z6 + p0));break;case M7.Z4("127" | 5):(this.spineBottom=new Ze(K6 + R9,+"0" + p0),this.spineCenter=new Ze(K6 + R9,R1 / +"2" + p0),this.spineTop=new Ze(K6 + R9,R1 + p0),this.edgeBottom=new Ze(a0 + R9,0 + p0));break;case M7.Z4(+"108"):(this.spineTop=new Ze(K6 + R9,+"0" + p0),this.spineCenter=new Ze(K6 + R9,R1 / ("2" | 2) + p0),this.spineBottom=new Ze(K6 + R9,R1 + p0),this.edgeBottom=new Ze(R9 - "1" * 1,Z6 + p0));break;case M7.Z4("170" | 42):(this.spineBottom=new Ze(K6 + R9,0 + p0),this.spineCenter=new Ze(K6 + R9,R1 / +"2" + p0),this.spineTop=new Ze(K6 + R9,R1 + p0),this.edgeBottom=new Ze(R9 - +"1",p0));}this.radius1=new Ze(+"0",+"0");this.radius2=new Ze(+"0","0" << 64);this.corner=new Ze(0,"0" | 0);this.follow=new Ze("0" >> 32,"0" - 0);this.middle={};this.renderData={};this.deltaFromCorner=Math.abs(this.edgeBottom.y - e1.pageY);this.deltaFromCorner > +".15" * this.bookHeight?this.deltaFromCorner=M7.B_(170) === this.startPoint || M7.B_("127" << 64) === this.startPoint?".95" * 1 * -this.deltaFromCorner:+".95" * this.deltaFromCorner:this.deltaFromCorner=+"0";};Ee.prototype.toggleCorner=function(H5){var x_=z5lJQ;var M_;M_=this.bookHeight - Math.abs(this.deltaFromCorner);x_.u$();-("1" << 32) !== this.startPoint.indexOf(x_.B_(+"152"))?(this.startPoint=this.startPoint.replace(x_.Z4(+"152"),x_.B_(18)),this.startY=this.bookMarginTop + this.bookHeight):(this.startPoint=this.startPoint.replace(x_.B_("18" - 0),x_.B_("152" ^ 0)),this.startY=this.bookMarginTop);this.initPoints(H5);this.deltaFromCorner=this.deltaFromCorner < +"0"?-M_:M_;this.initOnceSizes();this.render(H5,!("1" - 0),!+"0");};Ee.prototype.startRender=function(v2,k7,j$){var U_V=z5lJQ;var L8,Y$,X6,t_,C6,n8,e5,d4,R_,S_,y$;X6=arguments.length > 3 && void +"0" !== arguments["3" >> 64] && arguments["3" * 1];t_=v2.pageX - this.bookMarginLeft;C6=v2.pageY - this.bookMarginTop;if((j$=j$ || !+"1",t_ > this.pageWidth && U_V.Z4(143) !== j$ || U_V.B_(+"192") === j$)){if((L8=U_V.B_("192" * 1),this.currentWrapper=U_V.Z4("35" >> 64),this.bookState.right.isNull || this.bookState.right.isLast)){if(!(+"0",wt.bh)().state.pager.forceFlip)return void (this.state=U_V.Z4("153" | 8));("0" | 0,wt.bh)().dispatch(U_V.B_(169),{'\u0066\u006f\u0072\u0063\u0065\u0046\u006c\u0069\u0070':!+"1"});}this.bookState.right.isLastSheet && (this.innerReflexBottom.style.display=U_V.B_(+"49"));this.startX=this.bookMarginLeft + this.bookWidth - +"3";}else {if((L8=U_V.Z4("143" >> 64),this.currentWrapper=U_V.B_(+"97"),this.bookState.left.isNull || this.bookState.rtl && this.bookState.left.isFirst)){if(!("0" * 1,wt.bh)().state.pager.forceFlip)return void (this.state=U_V.B_("153" * 1));("0" - 0,wt.bh)().dispatch(U_V.Z4(+"169"),{'\u0066\u006f\u0072\u0063\u0065\u0046\u006c\u0069\u0070':!1});}this.bookState.left.isFirstSheet && (this.innerReflexBottom.style.display=U_V.Z4("49" | 0));this.startX=this.bookMarginLeft + "3" * 1;}if(((-("1" | 0) === this.leftWrapper.secondPageNum && this.bookState.left.isLast || -("1" - 0) === this.rightWrapper.firstPageNum && this.bookState.right.isFirst || ("2" | 2) === this.bookState.pagesCount) && tt.Z.addClass(this.globalWrapper,U_V.Z4(+"67")),U_V.Z4("85" ^ 0) !== this[this.currentWrapper].type)){C6 > this.bookHeight / 2?(Y$=U_V.Z4(18),this.startY=this.bookMarginTop + this.bookHeight):(Y$=U_V.Z4(+"152"),this.startY=this.bookMarginTop);this.startPoint=Y$ + L8;this.initPoints(v2);n8=v2.pageX - this.startX;e5=v2.pageY - this.startY;this.initOnceSizes();this.bookState.singleMode || !this.bookState.left.isFirstSheet && !this.bookState.right.isLastSheet || this[this.currentWrapper].reflexMask && (this[this.currentWrapper].reflexMask.style.overflow=U_V.Z4(93));d4={'\u0070\u0061\u0067\u0065\u0058':this.startX,'\u0070\u0061\u0067\u0065\u0059':this.startY - this.deltaFromCorner};R_={'\u0070\u0061\u0067\u0065\u0058':this.startX + n8,'\u0070\u0061\u0067\u0065\u0059':this.startY - this.deltaFromCorner + (e5 + this.deltaFromCorner)};this.render(d4);S_=this;this.trigger(U_V.Z4(+"130"),{'\u0064\u0072\u0061\u0067':X6,'\u0068\u0069\u0064\u0065':X6 && (this.bookState.left.isFirstSheet || this.bookState.right.isLastSheet)?L8:U_V.B_(65)});y$=function(){U_V.X4();k7?S_.render(R_):S_.tween=new (at().Tween)(d4).to(R_,+"50").easing(at().Easing.Sinusoidal.Out).onUpdat}).start();};this.tween && this.tween._isPlaying?S_.tween.onStop(function(){U_V.u$();y$();}).stop():y$();tt.Z.addClass(this[this.currentWrapper].mask,U_V.Z4("16" * 1));("0" ^ 0,wt.bh)().dispatch(U_V.B_(+"9"),{'\u006e\u0065\u0077\u0053\u0074\u0061\u0074\u0065':U_V.Z4(14)});this.state=U_V.Z4(+"14");this[this.currentWrapper].mask.style.top=-this.maskTop + U_V.B_(+"196");}else this.startRenderHard(v2,X6,j$);};Ee.prototype.render=function(I5,S$,r_){var v4e=z5lJQ;var Q1,U7,b9,l5,C2,R2,V_,f7,N_,c4,k6,I3,E3,Q3,a1,q2,g1,O5,b$,T1,Y2,I$,d5,L4,f4,P3,g3,N3,w3,G4,c2,o6,P_,x5,g4,j1,C_,Z0,X$,j9,S7,g_,K$,G7,D6,y4,e2,O_,H2,G0,t5,o0,g5,F6,j6,M3,X_,K7,L1,t8,H1,H8,F8,Y9,v9,u5,D4,c1,g0,u8;v4e.u$();if(!this.destroyed){c4=this.renderData;S$=S$ || !+"1";k6=I5.pageX;I3=I5.pageY;E3=this.deltaFromCorner;Q3=this.edgeBottom.x;a1=this.edgeBottom.y;q2=this.spineBottom.x;g1=this.spineBottom.y;O5=this.spineTop.x;b$=this.spineTop.y;T1=this.outerRadius;Y2=this.bookWidth;I$=this.bookHeight;d5=this.maskWidth;L4=this.maskTop;f4=this.pageWidth;P3=this.gradientPrefix;g3=this.innerReflexBottomWidth;N3=this.flipGradientWidth;w3=this.innerReflexWidth;G4=this.startPoint;c2=this.transformMethod;o6=this.currentWrapper;P_=this.innerRadius;if("0" << 0 !== E3){x5=Math.atan((a1 - E3 - I3) / (Q3 - k6));x5 !== +x5 && (x5="0" - 0);Q1=k6 + -E3 * Math.sin(+"2" * x5);U7=I3 + E3 * Math.cos(+"2" * x5);}else (Q1=k6,U7=I3);g4=q2 - Q1;j1=g1 - U7;C_=Math.atan2(j1,g4);Z0=q2 - Math.cos(C_) * P_;X$=g1 - Math.sin(C_) * P_;Math.sqrt(j1 * j1 + g4 * g4) > P_?(b9=Z0 - ".5" * 1,l5=X$ - +".5"):(b9=Q1,l5=U7);g4=O5 - b9;j1=b$ - l5;C_=Math.atan2(j1,g4);j9=O5 - Math.cos(C_) * T1;S7=b$ - Math.sin(C_) * T1;if((Math.sqrt(g4 * g4 + j1 * j1) > T1 && (b9=j9 - (".5" - 0),l5=S7 - .5),("0" | 0) !== E3 && !r_)){if(b9 <= Q3 + +"2" && -1 !== G4.indexOf(v4e.B_(+"143")))return void this.toggleCorner(I5);if(b9 >= Q3 - ("2" ^ 0) && -+"1" !== G4.indexOf(v4e.B_(192)))return void this.toggleCorner(I5);}g_=b9 + ".5" * 1 * (Q3 - b9);K$=l5 + (".5" - 0) * (a1 - l5);Math.abs(K$ - a1) >= +"1" || Math.abs(g_ - Q3) >= +"1"?(C2=Math.atan((K$ - a1) / (g_ - Q3)),f7=Math.sqrt((Q3 - b9) * (Q3 - b9) + (a1 - l5) * (a1 - l5)) / 2,R2=Q3 - g_,V_=a1 - K$):(C2=+"0",f7=+"0",R2="0" >> 64,V_=0);C2 !== +C2 && (C2=0);G7=Math.abs(R2 / f4);N_=+"0" === G7?0:G7 > .8?("5" << 32) * (+"1" - G7):+"1";C2=tt.Z.round(C2,5);D6=(G7 > ".9" - 0?".35" * 1:-+".35") * window.devicePixelRatio;y4=Y2 > +"1300"?2 * D6:D6;if((v4e.B_(+"214") === G4 || v4e.B_(+"127") === G4?(c4.reversePageTransform=v4e.Z4(77) + (d5 - f7 + y4) + v4e.Z4("115" * 1) + L4 + v4e.Z4("217" * 1) + C2 + v4e.Z4("219" ^ 0),c4.maskTransform=v4e.B_(+"77") + (-R2 + D6) + v4e.Z4(115) + -V_ + v4e.Z4(+"217") + C2 + v4e.Z4("219" << 32),c4.frontPageTransform=v4e.Z4(+"77") + (d5 - f4 + f7) + v4e.Z4(+"115") + L4 + v4e.Z4(+"217") + -C2 + v4e.Z4(+"219")):(c4.reversePageTransform=v4e.Z4("77" ^ 0) + (-f4 + f7 - y4) + v4e.B_("115" | 35) + L4 + v4e.B_(+"217") + C2 + v4e.B_(+"219"),c4.maskTransform=v4e.Z4(+"77") + (-R2 - D6) + v4e.B_("115" - 0) + -V_ + v4e.Z4("217" ^ 0) + C2 + v4e.B_(+"219"),c4.frontPageTransform=v4e.B_(77) + -f7 + v4e.B_(+"115") + L4 + v4e.B_(+"217") + -C2 + v4e.B_(+"219")),+"0" !== N_)){if(v4e.B_("214" * 1) === G4){e2=f7 / Math.cos(C2);O_=Math.tan(C2) * I$;H2=O_ < 0?e2 - O_:f7;O_ < "0" << 0 && (H2=Math.cos(C2) * H2);c4.flipGradientBackground=P3 + v4e.Z4("177" << 96) + .45 * N_ + v4e.B_(+"13") + (".15" - 0) * N_ + v4e.B_(+"21") + .01 * H2 + v4e.B_("134" * 1) + +".45" * N_ + v4e.B_("21" | 21) + +".055" * H2 + v4e.B_(+"110") + .65 * N_ * (".32" - 0) + v4e.B_(+"21") + ".185" * 1 * H2 + v4e.Z4(+"23") + H2 + v4e.Z4("31" >> 32);c4.flipGradientTransform=v4e.Z4(77) + (e2 - N3) + v4e.Z4("172" | 12) + -C2 + v4e.Z4(+"219");G0=Math.tan(C2) * V_;t5=Q3 - k6;t5=t5 < ".03" * 1 * Y2?.03 * Y2:t5 > (".3" - 0) * Y2?+".3" * Y2:t5;c4.innerReflexBottomBackground=P3 + v4e.B_("4" >> 32) + ".45" * 1 * N_ + v4e.Z4(87) + t5 + v4e.B_(31);c4.innerReflexBottomTransform=v4e.Z4("77" * 1) + (Y2 - R2 - G0) + v4e.Z4(+"172") + C2 + v4e.Z4(+"219");o0=t5 * (+".45" + G7 / ("2" - 0));c4.innerReflexBackground=P3 + v4e.Z4("44" - 0) + (.1 + +"1.6" * G7 * .4) + v4e.Z4(87) + o0 + v4e.Z4(+"31");c4.innerReflexTransform=v4e.B_(+"77") + (Y2 - R2 - G0 - w3) + v4e.Z4("172" * 1) + C2 + v4e.Z4("219" - 0);c4.reflexContainerTransform=v4e.B_("77" >> 64) + (d5 - Y2 + f7) + v4e.B_("115" * 1) + L4 + v4e.B_(+"217") + -C2 + v4e.B_(+"219");}else if(v4e.B_("127" - 0) === G4){g5=f7 / Math.cos(C2);F6=Math.tan(C2) * I$;j6=F6 > 0?g5 + F6:f7;F6 > "0" >> 0 && (j6=Math.cos(C2) * j6);c4.flipGradientBackground=P3 + v4e.B_(+"177") + +".45" * N_ + v4e.Z4("13" - 0) + .15 * N_ + v4e.Z4(21) + +".01" * j6 + v4e.Z4("134" >> 0) + (".45" - 0) * N_ + v4e.Z4("21" << 32) + +".055" * j6 + v4e.B_("110" | 8) + +".65" * N_ * (".32" * 1) + v4e.B_(21) + .185 * j6 + v4e.Z4(+"23") + j6 + v4e.B_("31" >> 64);c4.flipGradientTransform=v4e.B_("77" - 0) + (g5 - N3) + v4e.Z4(172) + -C2 + v4e.Z4("219" >> 64);M3=Math.tan(C2) * V_;X_=Q3 - k6;X_=X_ < +".03" * Y2?".03" * 1 * Y2:X_ > +".3" * Y2?+".3" * Y2:X_;c4.innerReflexBottomBackground=P3 + v4e.Z4("4" ^ 0) + ".45" * 1 * N_ + v4e.B_(+"87") + X_ + v4e.Z4(+"31");c4.innerReflexBottomTransform=v4e.B_(+"77") + (Y2 - R2 - M3) + v4e.Z4("172" | 4) + C2 + v4e.B_(219);K7=X_ * (+".45" + G7 / ("2" ^ 0));c4.innerReflexBackground=P3 + v4e.Z4(+"44") + (+".1" + +"1.6" * G7 * (".4" - 0)) + v4e.Z4(+"87") + K7 + v4e.Z4("31" >> 64);c4.innerReflexTransform=v4e.Z4(+"77") + (Y2 - R2 - w3 - M3) + v4e.B_(+"172") + C2 + v4e.B_("219" * 1);c4.reflexContainerTransform=v4e.B_(+"77") + (d5 - Y2 + f7) + v4e.B_("115" << 0) + L4 + v4e.Z4(+"217") + -C2 + v4e.Z4("219" >> 32);}else if(v4e.B_("108" | 76) === G4){L1=f7 / Math.cos(C2);t8=Math.tan(C2) * I$;H1=t8 > +"0"?L1 + t8:f7;t8 > ("0" | 0) && (H1=Math.cos(C2) * H1);c4.flipGradientBackground=P3 + v4e.Z4(75) + +".45" * N_ + v4e.Z4("13" ^ 0) + +".15" * N_ + v4e.Z4(+"21") + ".01" * 1 * H1 + v4e.B_(134) + .45 * N_ + v4e.B_("21" - 0) + +".055" * H1 + v4e.Z4("110" ^ 0) + (".65" - 0) * N_ * +".32" + v4e.B_("21" | 20) + +".185" * H1 + v4e.B_("23" >> 32) + H1 + v4e.B_(31);c4.flipGradientTransform=v4e.B_(+"77") + (f4 - L1) + v4e.B_("172" * 1) + -C2 + v4e.Z4(+"219");H8=k6 - Q3;H8=H8 < +".03" * Y2?(".03" - 0) * Y2:H8 > +".3" * Y2?.3 * Y2:H8;c4.innerReflexBottomBackground=P3 + v4e.Z4("44" >> 64) + +".45" * N_ + v4e.B_(+"87") + H8 + v4e.B_(31);c4.innerReflexBottomTransform=v4e.Z4(+"77") + (L1 - g3) + v4e.Z4(172) + C2 + v4e.Z4("219" ^ 0);F8=H8 * (".45" * 1 + G7 / ("2" << 0));c4.innerReflexBackground=P3 + v4e.B_(+"4") + (".1" - 0 + +"1.6" * G7 * +".4") + v4e.Z4(87) + F8 + v4e.Z4("31" >> 0);c4.innerReflexTransform=v4e.Z4(+"77") + L1 + v4e.Z4(172) + C2 + v4e.B_(+"219");c4.reflexContainerTransform=v4e.Z4(+"77") + -f7 + v4e.B_("115" - 0) + L4 + v4e.Z4(+"217") + -C2 + v4e.B_("219" - 0);}else {Y9=f7 / Math.cos(C2);v9=Math.tan(C2) * I$;u5=v9 < "0" - 0?Y9 - v9:f7;v9 < "0" >> 0 && (u5=Math.cos(C2) * u5);c4.flipGradientBackground=P3 + v4e.Z4(+"75") + (".45" - 0) * N_ + v4e.Z4(+"13") + ".15" * 1 * N_ + v4e.Z4(+"21") + +".01" * u5 + v4e.B_("134" - 0) + +".45" * N_ + v4e.Z4(+"21") + +".055" * u5 + v4e.B_(+"110") + +".65" * N_ * (".32" * 1) + v4e.Z4("21" - 0) + (".185" - 0) * u5 + v4e.B_(+"23") + u5 + v4e.B_(+"31");c4.flipGradientTransform=v4e.Z4(77) + (f4 - Y9) + v4e.B_(172) + -C2 + v4e.B_(+"219");D4=k6 - Q3;D4=D4 < ".03" * 1 * Y2?+".03" * Y2:D4 > ".3" * 1 * Y2?.3 * Y2:D4;c4.innerReflexBottomBackground=P3 + v4e.B_("44" >> 32) + .45 * N_ + v4e.B_(+"87") + D4 + v4e.B_("31" << 64);c4.innerReflexBottomTransform=v4e.B_(77) + (Y9 - g3) + v4e.Z4(+"172") + C2 + v4e.Z4(+"219");c1=D4 * (".45" * 1 + G7 / 2);c4.innerReflexBackground=P3 + v4e.B_(+"4") + (".1" * 1 + +"1.6" * G7 * (".4" * 1)) + v4e.B_(+"87") + c1 + v4e.B_(+"31");c4.innerReflexTransform=v4e.Z4("77" * 1) + Y9 + v4e.Z4(172) + C2 + v4e.B_(219);c4.reflexContainerTransform=v4e.Z4(77) + -f7 + v4e.Z4("115" * 1) + L4 + v4e.Z4(217) + -C2 + v4e.Z4("219" >> 32);}}else c4.innerReflexBottomTransform=v4e.B_(+"25");if((this[o6].reversePage.style[c2]=c4.reversePageTransform,this[o6].mask.style[c2]=c4.maskTransform,this[o6].frontPage.style[c2]=c4.frontPageTransform,this[o6].flipGradient.style.background=c4.flipGradientBackground,this[o6].flipGradient.style[c2]=c4.flipGradientTransform,S$ || this.bookState.isMobile?this.innerReflexBottom.style.display=v4e.B_(+"49"):(this.innerReflexBottom.style.background=c4.innerReflexBottomBackground,this.innerReflexBottom.style[c2]=c4.innerReflexBottomTransform,this[o6].innerReflex.style.background=c4.innerReflexBackground,this[o6].innerReflex.style[c2]=c4.innerReflexTransform,this[o6].innerReflex.style.display=+"0" === N_?v4e.Z4("49" ^ 0):v4e.Z4(65)),this.bookState.singleMode)){if(-+"1" !== G4.indexOf(this.bookState.rtl?v4e.B_("143" ^ 0):v4e.B_(+"192"))){g0=G7 < +".85"?+"1":+"1" - Math.pow((G7 - ".85" * 1) / .15,+"2");g0=g0 <= +"0"?+"0":g0;this[o6].frontPage.style.opacity=g0;this[o6].reversePage.style.opacity=g0;this[o6].innerReflex.style.opacity=g0;this.innerReflexBottom.style.opacity="1" - 0;}if(-("1" - 0) !== G4.indexOf(this.bookState.rtl?v4e.Z4(192):v4e.B_(143))){u8=G7 > ".7" * 1?+"1":Math.pow(G7 / (".7" - 0),"2" ^ 0);u8=u8 <= "0" - 0?"0" >> 32:u8;this[o6].frontPage.style.opacity=G7 > +".3"?Math.pow((G7 - +".3") / (".7" * 1),2):"0" ^ 0;this[o6].reversePage.style.opacity=u8;this[o6].innerReflex.style.opacity=u8;this.innerReflexBottom.style.opacity=+"0";}}this[o6].reflexContainer.style[c2]=c4.reflexContainerTransform;this.follow=new Ze(Q1,U7);this.corner=new Ze(b9,l5);this.radius1=new Ze(Z0,X$);this.radius2=new Ze(j9,S7);this.progress=G7;this.renderData=c4;this.middle={'\u0078':g_,'\u0079':K$,'\u0064\u0069\u0073\u0074':f7,'\u0061\u006c\u0066\u0061':C2,'\u0064\u0069\u0073\u0074\u0058':R2,'\u0064\u0069\u0073\u0074\u0059':V_};(this.bookState.left.isFirstSheet && -+"1" !== G4.indexOf(v4e.B_(+"143")) || this.bookState.left.isLast || this.bookState.right.isFirst || this.bookState.right.isLastSheet && -+"1" !== G4.indexOf(v4e.B_("192" * 1)) || I5.fakePointer && this.bookState.left.isFirstSheet || I5.fakePointer && this.bookState.right.isLastSheet) && this.setDynamicStyles(!("0" | 0));}};Ee.prototype.finishRender=function(o5,b8,S8,h3){var A4R=z5lJQ;A4R.X4();var e6,G$,v8,G6,p9,a6,s3;if((o5=o5 || !("1" ^ 0),this.postPager=!+"1",!this.destroyed))if(A4R.Z4(+"85") !== this[this.currentWrapper].type){e6=A4R.Z4(+"203") === this.bookState.version && this.bookState.singleMode?".25" - 0:+".5";G$=this.progress < e6?this.corner.x - this.startX:A4R.B_(214) === this.startPoint || A4R.Z4("127" * 1) === this.startPoint?this.corner.x - this.startX + this.bookWidth:this.corner.x - this.startX - this.bookWidth;A4R.B_("192" >> 64) === b8?(this.progress=.9,G$=this.corner.x - this.startX - this.bookWidth):A4R.Z4("143" | 6) === b8 && (this.progress=".9" * 1,G$=this.corner.x - this.startX + this.bookWidth);v8=this.corner.y - this.startY;G6=this.corner.x;p9=this.corner.y;a6=this;this.deltaFromCorner=+"0";s3=function(){var i0,f3;i0={'\u0070\u0061\u0067\u0065\u0058':G6,'\u0070\u0061\u0067\u0065\u0059':p9};f3=function(){a6.render({'\u0070\u0061\u0067\u0065\u0058':G6 - G$,'\u0070\u0061\u0067\u0065\u0059':p9 - v8},!("0" | 0));a6.destroyed || (a6.progress > e6 && (A4R.Z4("214" * 1) === a6.startPoint || A4R.Z4(127) === a6.startPoint?a6[a6.currentWrapper].setLeft():a6[a6.currentWrapper].setRight()),tt.Z.removeClass(a6[a6.currentWrapper].mask,A4R.B_("16" ^ 0)),a6.state=A4R.B_(+"153"),("0" - 0,wt.bh)().dispatch(A4R.Z4(+"9"),{'\u006e\u0065\u0077\u0053\u0074\u0061\u0074\u0065':A4R.B_("153" - 0)}),a6[a6.currentWrapper].mask.style.top=A4R.Z4("40" * 1),a6[a6.currentWrapper].mask.style[a6.transformMethod]=A4R.Z4("65" >> 64),a6[a6.currentWrapper].frontPage.style[a6.transformMethod]=A4R.B_(+"65"),a6[a6.currentWrapper].reversePage.style[a6.transformMethod]=A4R.B_(80),a6.innerReflexBottom.style[a6.transformMethod]=A4R.B_(58),a6.innerReflexBottom.style.display=A4R.B_(+"65"),a6[a6.currentWrapper].reflexMask && (a6[a6.currentWrapper].reflexMask.style.overflow=A4R.B_(+"65")),a6.progress > e6 && !S8 && (A4R.Z4(+"214") === a6.startPoint || A4R.Z4("127" << 0) === a6.startPoint?a6.trigger(A4R.Z4(8)):a6.trigger(A4R.B_(145))),S8?a6.trigger(A4R.Z4(109),h3):a6.trigger(A4R.B_(+"50"),h3),a6.progress > e6 && S8 && (A4R.Z4(+"214") === a6.startPoint || A4R.B_(+"127") === a6.startPoint?a6.trigger(A4R.B_("212" ^ 0)):a6.trigger(A4R.B_(221))),tt.Z.removeClass(a6.globalWrapper,A4R.Z4("67" * 1)),a6.progress="1" | 1);};o5?f3():a6.tween=new (at().Tween)(i0).to({'\u0070\u0061\u0067\u0065\u0058':G6 - G$,'\u0070\u0061\u0067\u0065\u0059':p9 - v8},+"350").easing(at().Easing.Sinusoidal.Out).onUpdat}).onComplete(f3).start();};this.tween && this.tween._isPlaying?this.tween.onStop(function(){A4R.X4();s3();}).stop():s3();}else this.finishRenderHard(o5,b8,S8,h3);};Ee.prototype.startRenderHard=function(r2,Q0,y0){var z2r=z5lJQ;var o1;o1=r2.pageX - this.bookMarginLeft;o1 > this.pageWidth && z2r.B_(+"143") !== y0 || z2r.B_(+"192") === y0?(this.startPoint=z2r.Z4(+"127"),this.currentWrapper=z2r.B_(+"35"),this.startX=this.bookMarginLeft + this.bookWidth,this.finishX=this.bookMarginLeft):(this.startPoint=z2r.Z4("170" << 0),this.currentWrapper=z2r.B_("97" | 1),this.startX=this.bookMarginLeft,this.finishX=this.bookMarginLeft + this.bookWidth);this.isIE && (this[this.currentWrapper].firstPage.style[this.transformOriginMethod]=z2r.B_("176" >> 32),this[this.currentWrapper].secondPage.style[this.transformOriginMethod]=z2r.Z4("42" | 2));tt.Z.addClass(this[this.currentWrapper].mask,z2r.B_("181" << 0));this.trigger(z2r.B_(+"130"),{'\u0064\u0072\u0061\u0067':Q0,'\u0068\u0069\u0064\u0065':o1 > this.pageWidth?z2r.B_(+"192"):z2r.B_(+"143")});this.state=z2r.Z4("14" | 6);("0" ^ 0,wt.bh)().dispatch(z2r.Z4("9" | 0),{'\u006e\u0065\u0077\u0053\u0074\u0061\u0074\u0065':z2r.B_(+"14")});};Ee.prototype.renderHard=function(V9){var m70=z5lJQ;m70.X4();var e0,w6,Y6,B9,O3;if(!this.destroyed){Y6=this.pageWidth;if((w6=(w6=(w6=m70.Z4("127" * 1) === this.startPoint?V9.pageX - (this.bookMarginLeft + this.pageWidth):this.bookMarginLeft + this.pageWidth - V9.pageX) > this.pageWidth?this.pageWidth:w6) < -this.pageWidth?-this.pageWidth:w6,e0=Math.acos(w6 / Y6),e0=m70.B_(127) === this.startPoint?-e0:e0,this.progress=+"1" * Math.abs(e0 / Math.PI).toFixed(2),this.pageX=V9.pageX,this.bookState.singleMode)){if(-+"1" !== this.startPoint.indexOf(this.bookState.rtl?m70.Z4(+"143"):m70.Z4("192" ^ 0))){B9=this.progress < .5?"1" - 0:+"1" - Math.pow((this.progress - ".5" * 1) / (".5" * 1),+"2");B9=B9 <= "0" * 1?"0" >> 0:B9;this[this.currentWrapper].frontPage.style.opacity=B9;this[this.currentWrapper].reversePage.style.opacity=B9;this[this.currentWrapper].mask.style[m70.B_(47)]=this.progress >= ".5" * 1?m70.B_(+"49"):m70.B_("65" * 1);}if(-+"1" !== this.startPoint.indexOf(this.bookState.rtl?m70.Z4(+"192"):m70.B_(+"143"))){O3=this.progress > +".5"?"1" | 1:Math.pow(this.progress / (".5" - 0),2);O3=O3 <= +"0"?"0" >> 32:O3;this[this.currentWrapper].frontPage.style.opacity=O3;this[this.currentWrapper].reversePage.style.opacity=O3;this[this.currentWrapper].mask.style[m70.Z4("47" * 1)]=this.progress >= ".5" * 1?m70.Z4(65):m70.Z4(+"49");}}this.isIE?m70.Z4("127" - 0) === this.startPoint?(this[this.currentWrapper].firstPage.style[this.transformMethod]=m70.B_(+"69") + e0 + m70.Z4(219),this[this.currentWrapper].secondPage.style[this.transformMethod]=m70.B_(+"57") + -Le * this.pageWidth + m70.Z4(62) + (e0 + Math.PI) + m70.B_("219" | 65)):(this[this.currentWrapper].firstPage.style[this.transformMethod]=m70.B_("57" - 0) + Le * this.pageWidth + m70.B_("62" * 1) + (e0 + Math.PI) + m70.B_(219),this[this.currentWrapper].secondPage.style[this.transformMethod]=m70.Z4(69) + e0 + m70.B_(219)):this[this.currentWrapper].mask.style[this.transformMethod]=m70.B_(+"29") + e0 + m70.B_(+"219");this.setDynamicStyles();}};Ee.prototype.finishRenderHard=function(t6,y8,r3,Q_){var B66=z5lJQ;var w$,x0,c5,S0,r8,P7,C8;w$=this.progress;x0={'\u0078':this.progress,'\u0070\u0061\u0067\u0065\u0058':this.pageX};c5=B66.B_(+"127") === this.startPoint && B66.Z4(143) === y8 || B66.B_(+"170") === this.startPoint && B66.Z4(+"192") === y8;S0=w$ > ".35" - 0 && (B66.B_(+"127") === this.startPoint && this.bookState.right.isFirst || B66.B_("170" * 1) === this.startPoint && this.bookState.left.isLast);r8=w$ > .5 || S0 || c5;P7=this;C8=function(){B66.u$();var M5;M5=function(){P7.destroyed || (P7.state=B66.Z4(+"153"),("0" ^ 0,wt.bh)().dispatch(B66.Z4("9" - 0),{'\u006e\u0065\u0077\u0053\u0074\u0061\u0074\u0065':B66.Z4(+"153")}),tt.Z.removeClass(P7[P7.currentWrapper].mask,B66.B_("181" | 36)),P7[P7.currentWrapper].mask.style[P7.transitionMethod]=B66.B_("65" << 64),P7.isIE?(P7[P7.currentWrapper].firstPage.style[P7.transformMethod]=B66.B_("65" << 0),P7[P7.currentWrapper].secondPage.style[P7.transformMethod]=B66.B_(+"65"),P7[P7.currentWrapper].firstPage.style[P7.transformOriginMethod]=B66.B_(+"65"),P7[P7.currentWrapper].secondPage.style[P7.transformOriginMethod]=B66.B_(65)):P7[P7.currentWrapper].mask.style[P7.transformMethod]=B66.Z4("65" >> 32),r8 && (B66.B_(+"127") === P7.startPoint && B66.B_(+"192") !== y8?(P7[P7.currentWrapper].setLeft(),r3 || P7.trigger(B66.Z4(8))):B66.B_(+"170") === P7.startPoint && B66.Z4(143) !== y8 && (P7[P7.currentWrapper].setRight(),r3 || P7.trigger(B66.B_("145" * 1)))),r3?P7.trigger(B66.Z4(+"109"),Q_):P7.trigger(B66.B_(50),Q_),r8 && r3 && (B66.B_(214) === P7.startPoint || B66.B_(127) === P7.startPoint?P7.trigger(B66.Z4(+"212")):P7.trigger(B66.Z4("221" * 1))),tt.Z.removeClass(P7.globalWrapper,B66.B_("67" * 1)),t6 && (P7.setDynamicStyles(),P7.progress="1" ^ 0));};t6?M5():P7.tween=new (at().Tween)(x0).to({'\u0078':r8?"1" * 1:"0" | 0,'\u0070\u0061\u0067\u0065\u0058':r8?P7.finishX:P7.startX},+"500").easing(at().Easing.Sinusoidal.Out).onUpdate(function(){B66.X4();P7.progress=x0.x;P7.renderHard({'\u0070\u0061\u0067\u0065\u0058':x0.pageX});}).onComplete(M5).start();};this.tween && this.tween._isPlaying?this.tween.onSto}).stop():C8();};Ee.prototype.shiftPagesLeft=function(){var j_;this.preWrapper.destroy();this.preWrapper=this.leftWrapper.setLayer(this.leftWrapper.layer - ("1" - 0));this.leftWrapper=this.rightWrapper;this.rightWrapper=this.nxtWrapper.setLayer(this.nxtWrapper.layer + +"1");z5lJQ.X4();j_=this.storedStates.length > 0?this.storedStates.shift():this.bookState.getState();this.nxtWrapper=Xt(j_,this.bookState,this.bookDiv,!0,+"2",!+"1",this.parentVm,this.contentCreator);this.trigger(z5lJQ.B_("164" * 1));};Ee.prototype.shiftPagesRight=function(){var p8;this.nxtWrapper.destroy();this.nxtWrapper=this.rightWrapper.setLayer(this.rightWrapper.layer - ("1" << 32));z5lJQ.u$();this.rightWrapper=this.leftWrapper;this.leftWrapper=this.preWrapper.setLayer(this.preWrapper.layer + +"1");p8=this.storedStates.length > +"0"?this.storedStates.shift():this.bookState.getState();this.preWrapper=Xt(p8,this.bookState,this.bookDiv,!+"1","2" * 1,!+"0",this.parentVm,this.contentCreator);this.trigger(z5lJQ.Z4("164" << 32));};Ee.prototype.flipToLeft=function(){z5lJQ.u$();var O2,I4,N2,a2,t4,m2,T8,p5;O2=this;I4=arguments.length > +"0" && void +"0" !== arguments["0" * 1] && arguments[0];N2=arguments.length > "1" * 1 && void ("0" - 0) !== arguments[1] && arguments[+"1"];a2=arguments.length > "2" >> 0?arguments[+"2"]:void 0;if(!this.bookState.left.isLast || (+"0",wt.bh)().state.pager.forceFlip){t4=this._getBookLeftMargin();m2={'\u0070\u0061\u0067\u0065\u0058':t4 + this.bookWidth - +"1",'\u0070\u0061\u0067\u0065\u0059':this.bookMarginTop};T8={'\u0070\u0061\u0067\u0065\u0058':t4};p5=function(J3,t2){J3.pageY=O2.bookMarginTop - Math.min(O2.bookWidth,O2.bookHeight) / 10 * (t2 > ".5" * 1?+"1" - t2:t2);};this._internalFlip(I4,N2,a2,m2,T8,p5);}};Ee.prototype.flipToRight=function(){z5lJQ.u$();var F4,w5,J9,E0,a8,m8,A3,t9;F4=this;w5=arguments.length > +"0" && void 0 !== arguments[+"0"] && arguments[+"0"];J9=arguments.length > "1" >> 64 && void ("0" << 0) !== arguments["1" >> 64] && arguments["1" << 32];E0=arguments.length > "2" >> 0?arguments[+"2"]:void 0;if(!this.bookState.right.isFirst || (+"0",wt.bh)().state.pager.forceFlip){a8=this._getBookLeftMargin();m8={'\u0070\u0061\u0067\u0065\u0058':a8 + ("1" - 0),'\u0070\u0061\u0067\u0065\u0059':this.bookMarginTop};A3={'\u0070\u0061\u0067\u0065\u0058':a8 + this.bookWidth};t9=function(q4,d1){q4.pageY=F4.bookMarginTop - Math.min(F4.bookWidth,F4.bookHeight) / ("10" ^ 0) * (d1 > ".5" - 0?1 - d1:d1);};this._internalFlip(w5,J9,E0,m8,A3,t9);}};Ee.prototype._internalFlip=function(){var O10=z5lJQ;var L9,D9,T6,Z3,x8,P0,m1,i9,A2;D9=arguments.length > "0" * 1 && void 0 !== arguments["0" | 0] && arguments["0" * 1];T6=arguments.length > 1 && void ("0" * 1) !== arguments["1" >> 32] && arguments[1];O10.u$();Z3=arguments.length > ("2" | 0)?arguments["2" >> 64]:void 0;x8=arguments.length > "3" << 0?arguments[+"3"]:void 0;P0=arguments.length > +"4"?arguments[+"4"]:void ("0" ^ 0);m1=arguments.length > +"5"?arguments[5]:void +"0";this.storedStates.push(Z3 || this.bookState.getState());i9=this;A2=function(){i9.destroyed || (("0" - 0,wt.bh)().dispatch(O10.Z4("163" ^ 0),O10.B_(+"107")),i9.once(O10.B_("50" | 18),function(){("0" ^ 0,wt.bh)().dispatch(O10.Z4(+"163"),O10.Z4("104" - 0));}),i9.startRender(x8,!0),i9.postPager=!("0" - 0),T6?i9.finishRender(!+"0",null,D9):i9.tween=new (at().Tween)(x8).to(P0,500 / i9.speedRate).easing(at().Easing.Sinusoidal.Out).onUpdate(function(){O10.Z4("85" >> 64) !== i9[i9.currentWrapper].type?(m1(x8,i9.progress),x8.fakePointer=!("0" | 0),i9.render(x8,!("0" << 32))):i9.renderHard(x8,!0);}).onComplete(function(){O10.X4();i9.finishRender(!+"0",null,D9);}).start());};null !== (L9=i9.tween) && void ("0" | 0) !== L9 && L9._isPlaying?i9._stopInternalFlip(A2):A2();};Ee.prototype._stopInternalFlip=function(K8){var R5o=z5lJQ;var u2,b7;R5o.X4();b7=this;null !== (u2=this.tween) && void ("0" << 64) !== u2 && u2._isPlaying && this.tween.onStop(function(){var A$;A$=-+"1" !== b7.startPoint.indexOf(R5o.Z4(+"143"))?R5o.Z4("192" * 1):R5o.Z4(+"143");b7.finishRender(!("0" - 0),A$,!("0" | 0),!+"0");null == K8 || K8();}).stop();};Ee.prototype._getBookLeftMargin=function(){var n_,O7,B$;n_=this.bookMarginLeft;z5lJQ.X4();O7=this.bookWidth;if(this.bookState.hardcover && !this.bookState.singleMode){B$=("0" - 0,wt.bh)().getters[z5lJQ.Z4(+"91")];n_=null === (this.bookState.rtl?B$.rightPage:B$.leftPage)?-O7 / ("2" | 0):0;}return n_;};Ee.prototype.flipToPager=function(){var Q2I=z5lJQ;var f9,o9,G9,I0,z9,L0,n2,u4,n$,W3;Q2I.X4();f9=this;this._stopInternalFlip();o9=!0;if((("0" << 0,wt.bh)().dispatch(Q2I.B_("169" >> 64),{'\u0066\u006f\u0072\u0063\u0065\u0046\u006c\u0069\u0070':!("0" >> 64)}),Math.max(this.leftWrapper.secondPageNum,this.rightWrapper.firstPageNum) > Math.max(this.bookState.currentLeft,this.bookState.currentRight) && (o9=!+"1"),o9)){-("1" >> 32) === this.leftWrapper.secondPageNum && this.bookState.left.isLast && tt.Z.addClass(this.globalWrapper,Q2I.B_("67" * 1));I0=null !== (G9=[this.bookState.right,this.bookState.left].filter(function(h9){return !h9.isNull;})[0]) && void 0 !== G9?G9:this.bookState.right;z9=this.bookState.hardcover && (I0.isLastSheet || I0.isLast);if((this.bookState.left.isLast || z9?(this.nxtWrapper.destroy(),this.nxtWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!+"0","2" - 0,!+"1",this.parentVm,this.contentCreator,Q2I.B_(192),z9,!0)):this.bookState.left.isLast || this.nxtWrapper.setContent({'\u0066\u0069\u0072\u0073\u0074':null,'\u0073\u0065\u0063\u006f\u006e\u0064':null}),this.bookState.left.isLast && this.bookState.hardcover)){L0=this.rightWrapper.firstPageNum;this.rightWrapper.destroy();this.rightWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!("1" - 0),3,!("1" << 0),this.parentVm,this.contentCreator,Q2I.Z4(143));this.rightWrapper.setRight();this.rightWrapper.setContent({'\u0066\u0069\u0072\u0073\u0074':L0});}else this.bookState.singleMode?this.bookState.singleMode && this.bookState.rtl && this.rightWrapper.setContent({'\u0066\u0069\u0072\u0073\u0074':null,'\u0073\u0065\u0063\u006f\u006e\u0064':null}):this.rightWrapper.setContent({'\u0073\u0065\u0063\u006f\u006e\u0064':null});this.once(Q2I.B_(+"50"),function(){tt.Z.removeClass(f9.globalWrapper,Q2I.Z4("67" | 1));Q2I.X4();f9.resetWrappers();},this);this.nxtWrapper.contentObject1.setPageBg(this.bookState.currentRight);this.rightWrapper.contentObject2.setPageBg(this.bookState.currentLeft);this.flipToLeft();}else {-+"1" === this.rightWrapper.firstPageNum && this.bookState.right.isFirst && tt.Z.addClass(this.globalWrapper,Q2I.Z4("67" * 1));u4=null !== (n2=[this.bookState.left,this.bookState.right].filte})["0" << 64]) && void +"0" !== n2?n2:this.bookState.left;n$=this.bookState.hardcover && (u4.isFirstSheet || u4.isFirst);if((this.bookState.right.isFirst || n$?(this.preWrapper.destroy(),this.preWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!+"1","2" - 0,!("1" * 1),this.parentVm,this.contentCreator,Q2I.B_("143" << 0),n$)):this.bookState.right.isFirst || this.preWrapper.setContent({'\u0066\u0069\u0072\u0073\u0074':null,'\u0073\u0065\u0063\u006f\u006e\u0064':null}),this.bookState.right.isFirst && this.bookState.hardcover)){W3=this.leftWrapper.secondPageNum;this.leftWrapper.destroy();this.leftWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!("0" - 0),"3" ^ 0,!("1" >> 0),this.parentVm,this.contentCreator,Q2I.B_(+"192"));this.leftWrapper.setLeft();this.leftWrapper.setContent({'\u0073\u0065\u0063\u006f\u006e\u0064':W3});}else this.bookState.singleMode && this.bookState.rtl || this.leftWrapper.setContent({'\u0066\u0069\u0072\u0073\u0074':null});this.preWrapper.contentObject2.setPageBg(this.bookState.currentLeft);this.leftWrapper.contentObject1.setPageBg(this.bookState.currentRight);this.once(Q2I.Z4(50),function(){tt.Z.removeClass(f9.globalWrapper,Q2I.B_("67" * 1));f9.resetWrappers(!("1" ^ 0));},this);this.flipToRight();}};Ee.prototype.initOnceSizes=function(){var e6J=z5lJQ;var K0,U3,t1,t3,B7,O9,F1,d7,n1,z5,Z_;K0=this.bookHeight;U3=this.maskTop;t1=this.flipGradientWidth;t3=this.flipGradientTop;B7=this.transformOriginMethod;O9=this.innerReflexWidth;F1=this.innerReflexBottomWidth;d7=this.innerReflexBottomMarginTop;n1=this.renderData;z5=this.currentWrapper;Z_=this.innerReflexMarginTop;switch(this.startPoint){case e6J.B_(+"214"):(this.renderData.reversePageOrigin=e6J.B_(+"46"),this.renderData.frontPageOrigin=e6J.Z4(+"118"),this.renderData.maskOrigin=e6J.B_("48" * 1) + (K0 + U3) + e6J.Z4(+"196"),this.renderData.flipGradientOrigin=t1 + e6J.Z4("189" | 1) + (K0 + t3) + e6J.Z4(196),this.renderData.innerReflexBottomOrigin=e6J.Z4("52" | 0) + (K0 + d7) + e6J.B_(+"196"),this.renderData.innerReflexOrigin=O9 + e6J.B_("189" * 1) + (K0 + Z_) + e6J.Z4(+"196"),this.renderData.reflexContainerOrigin=e6J.B_(+"118"));break;case e6J.Z4(+"127"):(this.renderData.reversePageOrigin=e6J.B_("54" - 0),this.renderData.frontPageOrigin=e6J.B_(+"111"),this.renderData.maskOrigin=e6J.Z4("48" | 0) + U3 + e6J.Z4(+"196"),this.renderData.flipGradientOrigin=t1 + e6J.B_(+"189") + t3 + e6J.Z4(196),this.renderData.innerReflexBottomOrigin=e6J.B_(52) + d7 + e6J.Z4("196" << 64),this.renderData.innerReflexOrigin=O9 + e6J.B_("189" - 0) + Z_ + e6J.Z4(+"196"),this.renderData.reflexContainerOrigin=e6J.B_("111" ^ 0));break;case e6J.B_("108" | 0):(this.renderData.reversePageOrigin=e6J.Z4(+"118"),this.renderData.frontPageOrigin=e6J.B_(46),this.renderData.maskOrigin=e6J.B_("7" * 1) + (K0 + U3) + e6J.Z4(196),this.renderData.flipGradientOrigin=e6J.Z4("52" * 1) + (K0 + t3) + e6J.B_(+"196"),this.renderData.innerReflexBottomOrigin=F1 + e6J.B_("189" >> 0) + (K0 + d7) + e6J.Z4(+"196"),this.renderData.innerReflexOrigin=e6J.Z4(52) + (K0 + Z_) + e6J.Z4("196" << 0),this.renderData.reflexContainerOrigin=e6J.B_("46" ^ 0));break;default:(this.renderData.reversePageOrigin=e6J.Z4(+"111"),this.renderData.frontPageOrigin=e6J.B_(+"54"),this.renderData.maskOrigin=e6J.Z4(+"7") + U3 + e6J.B_(+"196"),this.renderData.flipGradientOrigin=e6J.B_("52" >> 0) + t3 + e6J.B_("196" >> 64),this.renderData.innerReflexBottomOrigin=F1 + e6J.B_(189) + d7 + e6J.B_("196" << 0),this.renderData.innerReflexOrigin=e6J.Z4("52" << 32) + Z_ + e6J.B_(+"196"),this.renderData.reflexContainerOrigin=e6J.Z4(+"54"));}this[z5].reversePage.style[B7]=n1.reversePageOrigin;this[z5].frontPage.style[B7]=n1.frontPageOrigin;this[z5].mask.style[B7]=n1.maskOrigin;this[z5].flipGradient.style[B7]=n1.flipGradientOrigin;this.innerReflexBottom.style[B7]=n1.innerReflexBottomOrigin;e6J.u$();this[z5].innerReflex.style[B7]=n1.innerReflexOrigin;this[z5].reflexContainer.style[B7]=n1.reflexContainerOrigin;};Ee.prototype.calcStripeSizes=function(){var x6V=z5lJQ;var o2,N4,z2,x$,a_,r0,U0,e4,C3,s7,L6;if(Math.max(document.documentElement.clientWidth || "0" | 0,window.innerWidth || +"0") <= +"480" || !this.bookState.thickness)return (this.leftStripeWidth=+"0",this.rightStripeWidth="0" ^ 0,this.backboneWidth="0" | 0,this.leftStripeBlock.style.width=+"0",this.rightStripeBlock.style.width=0,void this.bookState.set(x6V.B_(+"24"),"0" * 1));if(this.bookState.singleMode){x$=("0" << 64,wt.bh)().getters[x6V.B_(+"91")].currentPage;if((N4=(o2=("0" << 64,wt.bh)().getters[x6V.Z4("199" | 2)](x$)) + +"1",z2=("0" - 0,wt.bh)().getters[x6V.Z4(83)],this.bookState.rtl)){a_=N4;N4=z2 - o2 - ("1" - 0);o2=z2 - a_ - ("1" ^ 0);}}else (o2=this.bookState.currentLeft,N4=this.bookState.currentRight,z2=this.bookState.pagesCount);C3=o2 / ("2" >> 0);s7=null === N4 || this.bookState.right.isLastSheet?+"0":(z2 - N4 + 1) / +"2";this.bookState.singleMode && !this.bookState.hardcover?e4="1" ^ 0:(r0=(x6V.Z4(+"14") === this.state || x6V.Z4(+"1") === this.state) && (this.bookState.left.isFirstSheet || this.bookState.right.isFirst || this.bookState.left.isLast || this.bookState.right.isLastSheet) && !(!this.postPager && this.bookState.left.isFirstSheet && x6V.B_("35" * 1) === this.currentWrapper || !this.postPager && this.bookState.right.isLastSheet && x6V.Z4(97) === this.currentWrapper) && !(this.postPager && this.bookState.left.isFirstSheet && x6V.Z4(+"97") === this.currentWrapper || this.postPager && this.bookState.right.isLastSheet && x6V.Z4("35" | 0) === this.currentWrapper),U0=this.progress,((this.bookState.left.isFirstSheet || this.bookState.right.isLastSheet) && !this.postPager || (this.bookState.right.isFirst || this.bookState.left.isLast) && this.postPager) && (U0=("1" >> 64) - U0),e4=r0?U0:(this.bookState.right.isFirst || this.bookState.left.isLast) && x6V.B_(+"153") === this.state?"0" >> 0:+"1");L6=this.stripeCanvas.width - this.bookWidth;this.bookState.singleMode && this.bookState.rtl?(this.rightStripeWidth=0,this.rightStripeBlock.style.width="0" * 1,this.leftStripeWidth=Math.floor(Te(C3,z2,this.fittedSize,L6) * e4),this.leftStripeBlock.style.width=this.leftStripeWidth + x6V.B_("196" >> 64)):this.bookState.singleMode?(this.leftStripeWidth=0,this.leftStripeBlock.style.width=+"0",this.rightStripeWidth=Math.floor(Te(s7,z2,this.fittedSize,L6) * e4),this.rightStripeBlock.style.width=this.rightStripeWidth + x6V.B_(+"196")):(this.leftStripeWidth=Math.floor(Te(C3,z2,this.fittedSize,L6) * e4),this.leftStripeBlock.style.width=this.leftStripeWidth + x6V.B_("196" | 4),this.rightStripeWidth=Math.floor(Te(s7,z2,this.fittedSize,L6) * e4),this.rightStripeBlock.style.width=this.rightStripeWidth + x6V.Z4(+"196"));this.backboneWidth=this.leftStripeWidth + this.rightStripeWidth;this.bookState.set(x6V.Z4(24),Te(z2 / ("2" << 64),z2,this.fittedSize,L6));};Ee.prototype.calcStripeColors=function(){var j$J=z5lJQ;for(var w1,b_,M8,k5=[],p$=[],e9=this.bookState.pagesCount,L7=["200" * 1,"210" << 32,"220" >> 0,+"230",+"240"],C5=function z8(){var W$;W$=Math.min(Math.floor(Math.random() * L7.length),L7.length - +"1");return W$ === w1 || W$ - 1 === w1 || W$ + +"1" === w1?z8():W$;},Y4=+"0",k_=e9;Y4 < k_;Y4++){w1=C5();b_=.2 * Math.random() + +".2" + +"1";M8=j$J.B_(+"3") + L7[w1] + j$J.Z4("146" << 0) + L7[w1] + j$J.Z4(146) + L7[w1] + j$J.Z4("200" * 1);k5.push(M8);p$.push(b_);}j$J.u$();this.stripeColorArray=k5;this.stripeHeightArray=p$;};Ee.prototype.renderStripe=function(){var D0,v1,G2,k9,B1,X1,x3,H9;D0=this.stripeCanvasCTX;v1=this.stripeCanvas;G2=this.bookWidth;k9=this.bookHeight;B1=Math.round((v1.width - G2) / ("2" - 0));X1=v1.width;x3=!+"1";H9=!+"1";if((D0.clearRect("0" ^ 0,+"0",X1,v1.height),("0" - 0 === this.rightWrapper.firstPageNum || +"0" === this.leftWrapper.firstPageNum && this.bookState.rtl) && (x3=!+"0"),(this.leftWrapper.secondPageNum === this.bookState.pagesCount - +"1" || this.rightWrapper.secondPageNum === this.bookState.pagesCount - 1 && this.bookState.rtl) && (H9=!("0" - 0)),this.leftStripeWidth > +"0" && !x3))for(var Z9="0" << 32,P$=this.leftStripeWidth;P$ > 0;P$--){Z9=P$ * this.stripeHeightArray[this.leftStripeWidth - P$];D0.fillStyle=this.stripeColorArray[this.leftStripeWidth - P$];D0.fillRect(B1 - P$ + 1,Math.round(Z9 / 4),+"1",k9 - P$ / +"2");}if(this.rightStripeWidth > "0" - 0 && !H9)for(var j2=0,A8=+"0",h_=this.rightStripeWidth;A8 < h_;A8++){j2=A8 * this.stripeHeightArray[this.stripeColorArray.length - h_ + A8];D0.fillStyle=this.stripeColorArray[this.stripeColorArray.length - h_ + A8];D0.fillRect(B1 + G2 + A8 - +"1",Math.round(j2 / ("4" | 0)),"1" ^ 0,k9 - A8 / +"2");}};Ne=function(E6,a7,O1,r4,D8,b5){b5=b5 || +"1";O1+=+".6" * D8;E6.beginPath();E6.moveTo(a7,O1);E6.bezierCurveTo(a7,O1 - D8,a7 + (".6" - 0) * r4,O1 - D8 / +"3.5",a7 + r4,O1);E6.shadowColor=z5lJQ.B_("190" * 1);E6.shadowBlur=b5;E6.shadowOffsetY=(".3" - 0) * -D8;E6.closePath();E6.fill();};function Ee(q8,a5,w4,T5,X9){var O7N=z5lJQ;var Q5;Q5=!(arguments.length > +"5" && void ("0" | 0) !== arguments[5]) || arguments[+"5"];this.storedStates=[];this.progress=+"0";this.breakProgress=0;this.endingAnimation=!+"1";this.state=O7N.B_("153" >> 32);(+"0",wt.bh)().dispatch(O7N.Z4("9" >> 32),{'\u006e\u0065\u0077\u0053\u0074\u0061\u0074\u0065':O7N.B_(+"153")});this.isIE=!!(+"0",wt.bh)().state.workspace.userAgentInfo.browser.msie;this.blocked=!("1" << 0);this.bookState=w4;this.lastDirection=null;this.postPager=!("1" ^ 0);this.parentVm=T5;this.contentCreator=X9;this.bookContainer=T5.$root.$el.querySelector(O7N.B_(167));this.bookBlock=null;this.transformMethod=Pe.prefixed(O7N.Z4("131" ^ 0));this.transitionMethod=Pe.prefixed(O7N.Z4(0));this.transformOriginMethod=Pe.prefixed(O7N.Z4("137" | 0));this.gradientPrefix=O7N.B_(12) + Re.lowercase + O7N.Z4(+"19");this.globalWrapper=q8;this.activeStripe=O7N.B_(+"65");this.genDOM();this.setBookSize(a5);this.setSpeedRate();this.preWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!+"1","2" >> 32,!+"1",this.parentVm,this.contentCreator);this.leftWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!+"1",+"3",!("1" << 64),this.parentVm,this.contentCreator);this.rightWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!+"0",+"3",!("1" << 0),this.parentVm,this.contentCreator);this.nxtWrapper=Xt(this.bookState.getState(),this.bookState,this.bookDiv,!+"0","2" - 0,!+"1",this.parentVm,this.contentCreator);Q5 && this.initDOMEvents();this.initInnerEvents();requestAnimationFrame(this.animationLoop.bind(this));}Ee.prototype.renderBookShadow=function(t){var e=this,i=this.shadowCanvasCTX,s=this.shadowCanvas,o=s.width,r=s.height,n=this.bookWidth,a=this.pageWidth,h=this.bookHeight,l=(o-n)/2,c=(r-h)/2,d=this.rightStripeWidth,u=this.leftStripeWidth,p=this.backboneWidth,g=.01*n,f=Math.round(h*Le);f%2!=0&&(f+=1);var m,v,b=Math.round(s.height-f)/2,S=this.bookState.singleMode,y=8,w=12,k=(a-4)/a,x=(h-8)/h,P=c+h,$=o/2;i.clearRect(0,0,o,r),i.fillStyle="rgba(0,0,0,0.17)",i.save();var },C=function(){if(i.shadowColor=null,i.shadowBlur=0,i.shadowOffsetY=0,"rgt-sdw"!==t){var e=$-g-u,s=$-g-u-a,o=i.createLinearGradient(e,0,s,0);z(o),i.fillStyle=o,i.fillRect(e,b,-a,f)}if("lft-sdw"!==t){var r=$+g+d+(S?p:0),n=$+g+d+a,h=i.createLinearGradient(r,0,n,0);z(h),i.fillStyle=h,i.fillRect(r,b,a,f)}},T=function(){var e=s.width/2-u-g,o=p+2*g,r=i.createLinearGradient(e,0,e+o,0);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(.02,"rgba(0, 0, 0, 0.33)"),r.addColorStop(.5,"rgba(0, 0, 0, 0.20)"),r.addColorStop(.98,"rgba(0, 0, 0, 0.33)"),r.addColorStop(1,"rgba(0, 0, 0, 0)"),i.shadowColor=null,i.shadowBlur=0,i.shadowOffsetY=0,i.fillStyle=r,i.fillRect(e,b,o,f),i.restore(),"rgt-sdw"===t&&i.clearRect(e-2,b-2,g+2,f+4),"lft-sdw"===t&&i.clearRect(e+p+g,b-2,g+2,f+4)},M=function(){S?i.scale(.999,.999):(i.scale(k,x),i.translate(y/2,w/2)),i.shadowColor="#000",i.shadowBlur=7,i.shadowOffsetY=0,i.fillRect(l,c,a,h),i.fillRect($,c,a,h),i.restore(),e.bookState.left.isFirstSheet||(Ne(i,$,c,-a,.3*c,12),Ne(i,$,P,-a,.9*-c,18)),e.bookState.right.isLastSheet||(Ne(i,$,c,a,.2*c,12),Ne(i,$,P,a,.6*-c,18))},I=function(t){S?i.scale(.999,.999):(i.scale(k,x),i.translate(y/2,w/2)),"right"===t?(v=1,m=$):(v=-1,m=l),i.shadowColor="#000",i.shadowBlur=7,i.shadowOffsetY=1,i.fillRect(m,c,a,h),i.restore(),Ne(i,$,c,a*v,c*("right"===t?.2:.3),12),Ne(i,$,P,a*v,-c*("right"===t?.6:.9),18)};"rgt-sdw"===t?I("right"):"lft-sdw"===t?I("left"):M(),this.bookState.hardcover&&n&&(C(),T()),this.renderStripe()};var Ve=Ee,je=function(t){this.bookState=new Ue(t),this.book=new Ve(t.container,t.bookSize,this.bookState,t.parentVm,t.contentCreator,t.initDomEvents),this.notForPagerEventTrigger=!1,this.options=t,this.book.on("flip:toRight",this.flipToRight,this),this.book.on("flip:toLeft",this.flipToLeft,this),this.book.on("render:start",this.renderStart,this),this.book.on("render:finish",this.renderFinish,this),this.book.on("flip:finished",this.flipFinished,this),this.book.on("swipe",this.onSwipe,this),this.bookState.on("state:updated",this.stateUpdated,this),this.bookState.on("change:stripesWidth",this.changeStripesWidth,this),this.on("go:toRight",this.goToRight),this.on("go:toLeft",this.goToLeft),this.on("go:toPage",this.goToPage)};je.prototype=new Yt.Z,je.prototype.constructor=je,je.prototype.destructor=function(){this.off("go:toRight",this.goToRight),this.off("go:toLeft",this.goToLeft),this.off("go:toPage",this.goToPage),this.book.off("flip:toRight",this.flipToRight,this),this.book.off("flip:toLeft",this.flipToLeft,this),this.book.off("render:start",this.renderStart,this),this.book.off("render:finish",this.renderFinish,this),this.book.off("flip:finished",this.flipFinished,this),this.book.off("swipe",this.onSwipe,this),this.book.destructor(),this.bookState.off("state:updated",this.stateUpdated,this),this.bookState.off("change:stripesWidth",this.changeStripesWidth,this),this.bookState.destructor()},je.prototype.flipToRight=function(){this.notForPagerEventTrigger?(this.notForPagerEventTrigger=!1,this.book.shiftPages(),this.options.state.dispatch("pager/unfreeze",{target:"flip-book"})):(this.options.state.dispatch("pager/unfreeze",{target:"flip-book"}),(0,Me.oJ)(this.options.state,{target:"flipComponent"}),this.bookState._updateState(),this.book.shiftPages())},je.prototype.flipToLeft=function(){this.notForPagerEventTrigger?(this.notForPagerEventTrigger=!1,this.book.shiftPages(),this.options.state.dispatch("pager/unfreeze",{target:"flip-book"})):(this.options.state.dispatch("pager/unfreeze",{target:"flip-book"}),(0,Me.X0)(this.options.state,{target:"flipComponent"}),this.bookState._updateState(),this.book.shiftPages())},je.prototype.renderStart=function(t){this.options.state.dispatch("workspace/setAnimationProgress",{animationType:"pagerMove"}),this.trigger("render:start",t)},je.prototype.onSwip},je.prototype.renderFinis},je.prototype.flipFinished=function(){this.trigger("flip:finished")},je.prototype.stateUpdate},je.prototype.changeStripesWidt},je.prototype.goToRight=function(t){"flipComponent"!==t&&"orientation"!==t&&(this.notForPagerEventTrigger=!0,this.bookState.rtl?this.book.flipToLeft(!1,!1,this.bookState.getState()):this.book.flipToRight(!1,!1,this.bookState.getState()))},je.prototype.goToLeft=function(t){"flipComponent"!==t&&"orientation"!==t&&(this.notForPagerEventTrigger=!0,this.bookState.rtl?this.book.flipToRight(!1,!1,this.bookState.getState()):this.book.flipToLeft(!1,!1,this.bookState.getState()))},je.prototype.goToPage=function(t){"flipComponent"!==t&&"orientation"!==t&&(!this.options.isMobile||"toc"!==t&&"thumbnails"!==t&&"search"!==t&&"notes"!==t?(this.options.state.dispatch("pager/freeze",{target:"flip-book"}),this.notForPagerEventTrigger=!0,this.book.flipToPager(this.bookState.getState())):this.bookState.trigger("reset:wrappers",!0))},je.prototype.resizeBook=function(t){this.book.setBookSize(t)},je.prototype.bloc},je.prototype.unblock=function(){this.book.unblock()},je.prototype.resetBoo},je.prototype.setRtl=function(t){this.bookState.set("rtl",t)},je.prototype.setHardcover=function(t){this.bookState.set("hardcover",t)},je.prototype.setThickness=function(t){this.bookState.set("thickness",t)},je.prototype.setHardcoverColor=function(t){this.bookState.set("hardcoverColor",t)},je.prototype.setSingleMode=function(t){this.bookState.set("singleMode",t)},je.prototype.updateStat},je.prototype.setZoo};var Ue=function(t){this.state=t.state,this.isMobile=t.isMobile,this.version=t.version,this.hardcover=this.state.getters["book/hasHardcover"],this.hardcoverColor=this.state.state.book.hardcoverColor,this.rtl=this.state.state.book.rightToLeft,this.isZoomed=!1,this.stripesWidth=0,this.left={},this.right={},this._updateState(),this.on("change:singleMode",this.resetWrappers),this.on("change:rtl",this.resetWrappers),this.on("change:hardcover",this.resetWrappers),this.on("change:hardcoverColor",this.resetStyles),this.on("change:thickness",this.resetStyles),this.on("change:isZoomed",this.resetStyles)};Ue.prototype=new Yt.Z,Ue.prototype.constructor=Ue,Ue.prototype.destructor=function(){this.off("change:singleMode",this.resetWrappers),this.off("change:rtl",this.resetWrappers),this.off("change:hardcover",this.resetWrappers),this.off("change:hardcoverColor",this.resetStyles),this.off("change:thickness",this.resetStyles),this.off("change:isZoomed",this.resetStyles)},Ue.prototype.resetWrapper},Ue.prototype.resetStyle},Ue.prototype.getStat},Ue.prototype._updateState=function(t,e,i){t=t||"",e=e||this.state.getters["pager/state"],i=i||this.state.getters["pager/flipState"],this.thickness=this.state.state.book.thickness,this.pagesCount=this.state.getters["pages/pagesCount"],this.singleMode=e.singleMode,this.pagesCount=i.pagesCount,this.currentLeft=i.currentLeft<0?null:i.currentLeft,this.currentRight=i.currentRight>=i.pagesCount?null:i.currentRight,this.right.isFirst=0===this.currentRight,this.right.isLast=this.currentRight===this.pagesCount-1,this.right.isNull=null===this.currentRight,this.right.isLastSheet=this.currentRight===this.pagesCount-2,this.left.isFirst=0===this.currentLeft,this.left.isLast=this.currentLeft===this.pagesCount-1,this.left.isNull=null===this.currentLeft,this.left.isFirstSheet=1===this.currentLeft,""!==t&&this.trigger("state:updated",t,e.target)},Ue.prototype.isFirstPage=function(t){return 0===t},Ue.prototype.isLastPage=function(t){return t===this.pagesCount-1},Ue.prototype.isFirstShee},Ue.prototype.isLastSheet=function(t){return t===this.pagesCount-2},Ue.prototype.isNullPage=function(t){return t<0||t>this.pagesCount-1||null===t},Ue.prototype.getRightSheet=function(){return{first:null===this.currentRight?null:this.currentRight,second:null===this.currentRight?null:this.currentRight+1}},Ue.prototype.getLeftSheet=function(){return{first:null===this.currentLeft?null:this.currentLeft-1,second:null===this.currentLeft?null:this.currentLeft}},Ue.prototype.getBottomRightSheet=function(){return{first:null===this.currentRight?null:this.currentRight+2,second:null===this.currentRight?null:this.currentRight+3}},Ue.prototype.getBottomLeftSheet=function(){return{first:null===this.currentLeft?null:this.currentLeft-3,second:null===this.currentLeft?null:this.currentLeft-2}};var Ge,Xe,Ye=je,qe=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"block",style:t.containerStyle,attrs:{"data-id":t.itemId}})},Ke=[],Qe=i(9937),Je=i(2358);function ti(t){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(t)}function ei(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function ii(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ei(Object(i),!0).forEach((function(e){si(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ei(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function si(t,e,i){return(e=oi(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function oi(t){var e=ri(t,"string");return"symbol"===ti(e)?e:String(e)}function ri(t,e){if("object"!==ti(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!==ti(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var ni,ai,hi=.16,li={large:64,medium:48,small:32},ci={large:.6,medium:.45,small:.3},di={image:{icon:"image",size:"large",position:"center",visibility:"hover"},video:{icon:"play",size:"large",position:"center",visibility:"always"},gif:{icon:"gif",size:"large",position:"center",visibility:"always"},gallery:{icon:"gallery",size:"large",position:"center",visibility:"always"}},ui={name:"ContentBase",props:{contentMargin:{type:Number,required:!0},data:{type:Object,required:!0},isCurrent:{type:Boolean,required:!1},iconInitialAnimationDelay:{type:Boolean,default:!1,required:!1}},data:function(){return{crossWideItem:null,isHighlighted:!1,thumbnailBlob:null,blobCache:{}}},computed:{singleMode:function(){return this.$store.state.pager.singleMode},slideComponen},pageWidth:function(){if(this.slideComponent){var t=this.singleMode&&this.data.page.isWide;return this.$store.getters["pages/currentSize"](this.data.pageId).width/(t?2:1)}return this.$store.getters["pages/size"].width},iconType:function(){var t;return(null===(t=this.data.icon)||void 0===t?void 0:t.icon)||di[this.data.type].icon},iconSize:function(){var t;return(null===(t=this.data.icon)||void 0===t?void 0:t.size)||di[this.data.type].size},iconPosition:function(){var t;return(null===(t=this.data.icon)||void 0===t?void 0:t.position)||di[this.data.type].position},iconVisibility:function(){var t;return"gif"!==this.data.type||this.rawThumbnailUrl&&this.showThumbnail&&!this.isLoading&&(this.isLoaded||this.isIdle)?(null===(t=this.data.icon)||void 0===t?void 0:t.visibility)||di[this.data.type].visibility:"never"},iconVisibilityStyle:function(){switch(this.iconVisibility){case"hover":return{opacity:"0"};case"never":return{display:"none"};default:return{opacity:"1"}}},iconDela},iconDelayStyle:function(){return{transitionDelay:this.iconDelay+"ms"}},iconNominalSize:function(){return li[this.iconSize]},iconSizeLimi},iconActualSize:function(){var t=this.singleMode&&this.data.crossWide?this.containerRect.width-this.contentElementNonVisibleWidth:this.containerRect.width,e=Math.min(t*this.iconSizeLimit,this.containerRect.height*this.iconSizeLimit,this.iconNominalSize);return{width:Math.round(e),height:Math.round(e)}},iconPadding:function(){return Math.floor(this.iconActualSize.height*hi)},iconTranslat},iconPositionStyle:function(){switch(this.iconPosition){case"top-left":return{top:this.iconPadding+"px",left:this.iconPadding+"px"};case"bottom-left":return{bottom:this.iconPadding+"px",left:this.iconPadding+"px"};case"top-right":return{top:this.iconPadding+"px",right:this.iconPadding+"px"};case"bottom-right":return{bottom:this.iconPadding+"px",right:this.iconPadding+"px"};default:return{top:"50%",left:"50%"}}},iconColor:function(){var t,e,i=(null===(t=this.data.icon)||void 0===t?void 0:t.backgroundColor)||"rgba(39, 47, 55, .6)",s=(0,c.R)((0,c.l)(i));return{backgroundColor:i,mainColor:(null===(e=this.data.icon)||void 0===e?void 0:e.mainColor)||(s>.5?"#000000":"#ffffff")}},crossWideContentMargi},contentElementNonVisibleWidth:function(){if(!this.singleMode||!this.data.crossWide)return null;var t=this.pageWidth-this.containerRect.left-this.crossWideContentMargin;return"left"===this.data.page.side&&(t=this.containerRect.width-t),t},crossWideCenterIconLeft:function(){if(!this.singleMode||!this.data.crossWide)return null;var t;if("left"===this.data.page.side)t=Math.floor((this.pageWidth-this.containerRect.left-this.crossWideContentMargin)/2);else{var e=this.containerRect.width-this.contentElementNonVisibleWidth;t=Math.floor(e/2+this.contentElementNonVisibleWidth)}return t},crossWideCenterIconPositionStyl},crossWideIconPositionStyle:function(){if(!this.singleMode||!this.data.crossWide)return null;switch(this.iconPosition){case"bottom-left":case"top-left":return"left"===this.data.page.side?{}:{left:this.contentElementNonVisibleWidth+this.iconPadding+"px"};case"bottom-right":case"top-right":return"right"===this.data.page.side?{}:{right:this.contentElementNonVisibleWidth+this.iconPadding+"px"};default:return this.crossWideCenterIconPositionStyle}},isIE:function(){return this.$store.state.workspace.userAgentInfo.browser.msie},iconLegacyStyle:function(){return this.isIE?{width:this.iconActualSize.width+"px",height:this.iconActualSize.height+"px",transform:"translate(".concat(this.iconTranslate.x,", ").concat(this.iconTranslate.y,") scale(.9) translateZ(0)")}:{}},iconStyles:function(){return ii(ii(ii(ii(ii({},this.iconVisibilityStyle),this.iconPositionStyle),this.crossWideIconPositionStyle),this.iconDelayStyle),this.iconLegacyStyle)},containerRect:function(){return{width:Math.round(this.data.rect[0]*this.data.scaleRatio.w),height:Math.round(this.data.rect[1]*this.data.scaleRatio.h),left:Math.round(this.data.rect[2]*this.data.scaleRatio.w),top:Math.round(this.data.rect[3]*this.data.scaleRatio.h)}},containerStyle:function(){var t={};return this.data.style?t=this.data.style:(t={width:this.containerRect.width+"px",height:this.containerRect.height+"px",left:this.containerRect.left+"px",top:this.containerRect.top+"px"},this.data.zIndex&&(t.zIndex=this.data.zIndex),(0,_.o8)(this.data.angle)||0!==this.data.angle&&(t.transformOrigin="0px 0px 0px",t.transform="rotate("+this.data.angle+"rad)")),t},rawThumbnailUrl:function(){return this.data.previewUrl?(0,Je.n)({filenameOrUrl:this.data.previewUrl,encode:!0}):null},thumbnailStyl},isCurrentPage:function(){return this.$store.getters["pager/isCurrentPage"]({pageId:this.data.page.id,pageSide:this.data.page.side})},isMobile:function(){return this.$store.getters["workspace/isMobile"]},isFrozenOrNotReady:function(){return this.$store.state.workspace.freezed||"ready"!==this.$store.state.workspace.status||this.$store.state.pager.freezed},isResizing:function(){return this.$store.state.workspace.isResizing}},created:function(){var t=this;this.data.crossWide&&"both"!==this.data.page.side&&!this.singleMode&&(this.$on("crossWideRegistered"})),this.$contentRegistry.registerContentItem(this.data.itemId,this.data.page.side,this))},beforeMoun},mounted:function(){var t=this;this.rawThumbnailUrl||this.$emit("ready",this),this.data.crossWide&&(Ge=function(){t.isHighlighted=!0,t.crossWideItem&&(t.crossWideItem.isHighlighted=!0)},X},this.$el.addEventListener("mouseover",Ge),this.$el.addEventListener("mouseout",Xe))},beforeDestroy:function(){var t=this;this.data.crossWide&&(this.$el.removeEventListener("mouseover",Ge),this.$el.removeEventListener("mouseout",Xe),this.$contentRegistry.deregisterContentItem(this.data.itemId,this.data.page.side)),this.thumbnailBlob&&(this.thumbnailBlob=null),this.blobCache&&(Object.keys(this.blobCache).forEach})),this.blobCache=null)},watch:{rawThumbnailUrl:function(t){t?this.loadThumbnail():this.thumbnailBlob&&(this.thumbnailBlob=null)},isCurrentPage:function(t){t||(this.isHighlighted=!1,this.crossWideItem&&(this.crossWideItem.isHighlighted=!1))}},methods:{loadThumbnail:function(){var t=this,e=this.blobCache[this.rawThumbnailUrl];e?this.thumbnailBlob=e:(0,Qe.Z)({url:this.rawThumbnailUrl,autofillCrossOrigin:!1,callback:function(e){t.ready||(t.ready=!0,-1===["gallery","image"].indexOf(t.data.type)&&t.$emit("ready",t)),t.thumbnailBlob=e,(0,_.Kn)(t.blobCache)&&(t.blobCache[t.rawThumbnailUrl]=t.thumbnailBlob)},errorback:function(e){t.error=!0,t.$emit("error",t,e)}})},getThumbnailStyle:function(t){var e={};return this.thumbnailBlob&&(e.backgroundImage='url("'+t+'")'),e}}},pi=(0,U.Z)(ui,ni,ai,!1,null,null,null).exports,gi={extends:pi,name:"ContentBlock",data:function(){return{itemId:this.data.type+"_"+this.data.itemId}},methods:{zoomToBLoc}}},fi=(0,U.Z)(gi,qe,Ke,!1,null,null,null).exports,mi=function(){var t=this,e=t.$createElement;return(t._self._c||e)("a",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],class:t.classes,style:t.linkStyle,attrs:{"data-url":t.url,"data-id":t.data.id,"data-item-id":t.data.itemId,title:t.title,target:t.target}})},vi=[}var Si={extends:pi,name:"ContentLink",computed:{title:function(){return this.data.url?0===this.data.url.indexOf("geo:")||0===this.data.url.indexOf("geopoint:")||0===this.data.url.indexOf("callto:")||0===this.data.url.indexOf("wtai:")||0===this.data.url.indexOf("tel:")||0===this.data.url.indexOf("sms:")||0===this.data.url.indexOf("mailto:")||0===this.data.url.indexOf("skype:")?this.tryToDecodeURI(this.data.url.split("?")[0]):this.$t("TopMenu.EXTERNAL_LINK_TIP",{0:this.tryToDecodeURI(this.url.split("?")[0])}):this.data.id?this.$t("AlertMessage.LINK_PAGE_TIP")+" "+this.$store.getters["pages/pageCaptionById"]({id:this.data.id}):""},url:function(){return this.data.url?0===this.data.url.indexOf("geo:")?this.data.url.split(";")[0].replace(" ","").replace("geo:","http://maps.apple.com/?ll="):0===this.data.url.indexOf("geopoint:")?this.data.url.split(";")[0].replace(" ","").replace("geopoint:","http://maps.apple.com/?ll="):this.data.url:null},target:function(){return this.data.url?this.data.target||this.props.target:null},props:function(){return this.$store.state.book.links},backgroundColor:function(){var t=this.data.color||this.props.color;return-1!==t.indexOf("#")&&(t="rgba("+(0,c.l)(t).join(",")+",0.6)"),t},linkStyle:function(){var t=bi({},this.containerStyle);return t.backgroundColor=this.backgroundColor,t},classes:function(){var t;return{link:!0,flip:this.props.highlightOnFlip,hover:null!==(t=this.data.highlightOnHover)&&void 0!==t?t:this.props.highlightOnHover,highlighted:this.isHighlighted,"content-element":!0}},isVisibl}},mounted:function(){this.isMobile&&this.$root.$on("link-highlight",this.setHighlight)},beforeDestro},methods:{setHighlight:function(t){var e=this;t.itemId===this.data.itemId.toString(10)&&(this.isHighlighted=!0,setTimeout}),500))},tryToDecodeUR}}},yi=(0,U.Z)(Si,mi,vi,!1,null,null,null).exports,wi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-touch",t._g({staticClass:"content-element image",class:t.containerClasses,style:t.containerStyle},t.isEmbed?null:{tap:t.onImageClick,panstart:t.preventDefault}),[t.hasPopup?i("content-button",{style:t.iconStyles,attrs:{icon:t.iconType,size:t.iconActualSize,translate:t.iconTranslate,color:t.iconColor,"icon-size":60}}):t._e(),t._v(" "),i("div",{staticClass:"thumbsContainer"},t._l(t.cachedThumbnails})),0)],1)},ki=[],xi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-button",class:t.buttonClasses,style:t.buttonStyles,attrs:{dir:t.dir}},[t.icon?i("svgicon",{staticClass:"content-button-icon",attrs:{focusable:"false",name:t.icon}}):t._e(),t._v(" "),t.caption?i("div",{staticClass:"content-button-caption",attrs:{dir:"ltr"}},[t._v(t._s(t.caption))]):t._e()],1)},Pi=[{name:"ContentButton",props:{icon:{type:String,default:null},caption:{type:String,default:null},size:{type:Object,required:!0,default:function(){return{}},validator:function(t){return!(0,_.o8)(t.height)&&(0,_.kE)(t.height)&&(!(0,_.o8)(t.width)&&(0,_.kE)(t.width)||!(0,_.o8)(t.maxWidth)&&(0,_.kE)(t.maxWidth))}},translate:{type:Object,default:function(){return{x:"-50%",y:"-50%"}}},color:{type:Object,default:function(){return{mainColor:"#ffffff",backgroundColor:"rgba(39, 47, 55, .6)"}}},iconSize:{type:Number,required:!1,default:60,validator:function(t){return(0,_.kE)(t)&&t>=0&&t<=100}},fontSize:{type:Number,required:!1,default:50,validator:function(t){return(0,_.kE)(t)&&t>=0&&t<=100}},cornerRadius:{type:Number,required:!1,default:100,validato}}},created:function(){var t=this;return Ei(Li().mark((function e(){return Li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.icon){e.next=9;break}return e.prev=1,e.next=4,i(4186)("./"+t.icon);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("Could not load the icon '"+t.icon+"'.");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))()},computed:{buttonClasses:function(){return{"has-icon":!!this.icon,"has-caption":!!this.caption,"no-blur":"transparent"===this.color.backgroundColor}},buttonHeight:function(){return this.size.height},buttonWidt},buttonSizeStyle:function(){return{"--button-height":this.buttonHeight,"--button-width":this.buttonWidth,width:this.size.width?this.size.width+"px":null,maxWidth:this.size.maxWidth?this.size.maxWidth+"px":null}},buttonColorStyl},finalIconSize:function(){var t=Math.round(this.buttonHeight*this.iconSize/100);return t%2!=0&&t++,t},finalFontSize:function(){var t=Math.round(this.buttonHeight*this.fontSize/100);return t%2!=0&&t++,t},buttonAdditionalStyle:function(){return{"--icon-size":this.finalIconSize,"--font-size":this.finalFontSize,"--corner-radius-factor":this.cornerRadius/100,"--zoom-factor":this.zoomFactor,"--button-translate-x":this.translate.x,"--button-translate-y":this.translate.y}},buttonStyle},dir:function(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"},zoomFactor:function(){return this.$store.state.pages.size.zoomFactor}}},Fi=(0,U.Z)(Oi,xi,Pi,!1,null,"8e50e958",null).exports,Di=i(5657);function _i(){return _i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},_i.apply(this,arguments)}var Wi={extends:pi,name:"ContentImage",props:[],data:function(){return{width:null,height:null,tapTimeout:0,cachedThumbnails:[]}},mounted:function(){this.data.originalSize?(this.width=this.data.originalSize[0],this.height=this.data.originalSize[1]):(this.width=this.containerRect.width,this.height=this.containerRect.height),this.data.preview?this.previewLoad(this.thumbnailBlob):this.$emit("ready",this)},computed:{hasPopu},rawThumbnailUrl:function(){return this.previewFileName?(0,Je.n)({filenameOrUrl:this.previewFileName}):null},containerClasses:function(){return{highlighted:this.isHighlighted,"cross-wide":!!this.crossWideItem,"hover-button":"hover"===this.iconVisibility,inline:!this.hasPopup}},isEmbed:function(){return this.$store.state.workspace.isEmbed},previewFileName:function(){var t=this.data;if(!(t.preview&&t.name&&t.sizes&&this.width&&this.height))return null;var e=(0,Ce.hl)({width:this.width,height:this.height},this.containerRect),i=Math.max(e.width,e.height);if((!this.$store.getters["pager/isCurrentPage"]({pageId:t.page.id,pageSide:t.page.side})||this.$store.state.workspace.animationInProgress)&&this.$store.state.pages.size.zoomFactor>1)return null;var s=(0,Di.F)({data:t,maxSize:i});return(0,d.Z)().getImageFileName(s)},animationInProgress:function(){return this.$store.getters["workspace/animationInProgress"]}},methods:{onImageClick:function(){!this.hasPopup||this.animationInProgress||this.isResizing||(this.$store.commit("sound/SET_MUTE_TEMPORARY",!this.$store.state.caniuse.userInteractions.firstClick),Date.now()>this.tapTimeout&&setTimeout(this.imageClick,this.$store.state.workspace.doubletapInterval+1),this.tapTimeout=Date.now()+this.$store.state.workspace.doubletapInterval)},imageClick:function(){this.$store.commit("sound/SET_MUTE_TEMPORARY",!1),this.isFrozenOrNotReady||this.isEmbed||this.$store.dispatch("lightbox/openLightbox",{itemId:this.data.itemId,target:"content-click"})},preventDefault:function(t){t.preventDefault()},previewLoad:function(t){var e=this;if(t){var i=document.createElement("img");i.onload=function(){e.$emit("ready",e),e.addHiddenThumbnail(t),setTimeout((function(){e.makeThumbnailVisible(t)}),100)},i.onerror=function(t){e.$emit("error",e,t)},i.src=t}},addHiddenThumbnail:function(t){if(!this.cachedThumbnails.some((function(e){return e.id===t}))){var e={visibility:"visible",zIndex:-1},i={id:t,style:_i({},this.getThumbnailStyle(t),e)};this.cachedThumbnails.push(i)}},makeThumbnailVisible:function(t){this.cachedThumbnails.forEach((function(e){e.id===t?(e.style.visibility="visible",e.style.zIndex=null):e.style.visibility="hidden"}))}},watch:{thumbnailBlob:function(t){t&&this.previewLoad(t)}},components:{ContentButton:Fi}},Bi=(0,U.Z)(Wi,wi,ki,!1,null,null,null).exports,Ai=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._g({class:["content-element gallery",t.containerClasses],style:t.containerStyle},t.isEmbed?null:{tap:t.onGalleryClick,panstart:t.preventDefault}),[i("content-button",{style:t.iconStyles,attrs:{icon:t.iconType,caption:t.iconCountCaption,size:t.buttonSize,translate:t.iconTranslate,color:t.iconColor,"icon-size":60,"font-size":40}}),t._v(" "),i("div",{staticClass:"thumbsContainer"},t._l(t.cachedThumbnails,(function(t){return i("div",{key:t.id,staticClass:"thumbnail",style:t.style})})),0)],1)},Hi=[];function Ni(){return Ni=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Ni.apply(this,arguments)}var Zi={large:.8,medium:.7,small:.6},Vi={extends:pi,name:"ContentGallery",props:[],dat},mounted:function(){this.previewData.originalSize?(this.width=this.previewData.originalSize[0],this.height=this.previewData.originalSize[1]):(this.width=this.containerRect.width,this.height=this.containerRect.height),this.data.preview?this.previewLoad(this.thumbnailBlob):this.$emit("ready",this)},computed:{previewData:function(){return this.data.items[0]},rawThumbnailUrl:function(){return this.previewFileName?(0,Je.n)({filenameOrUrl:this.previewFileName}):null},containerClasses:function(){return{highlighted:this.isHighlighted,"cross-wide":!!this.crossWideItem,"hover-button":"hover"===this.iconVisibility}},isEmbed:function(){return this.$store.state.workspace.isEmbed},previewFileName:function(){var t=this.previewData;if(!(this.data.preview&&t.name&&t.sizes&&this.width&&this.height))return null;var e=(0,Ce.hl)({width:this.width,height:this.height},this.containerRect),i=Math.max(e.width,e.height);if((!this.$store.getters["pager/isCurrentPage"]({pageId:this.data.page.id,pageSide:this.data.page.side})||this.$store.state.workspace.animationInProgress)&&this.$store.state.pages.size.zoomFactor>1)return null;var s=(0,Di.F)({data:t,maxSize:i});return(0,d.Z)().getImageFileName(s)},animationInProgress:function(){return this.$store.getters["workspace/animationInProgress"]},galleryItemsCoun},iconWidthLimit:function(){return Zi[this.iconSize]},iconActualSize:function(){var t=this.singleMode&&this.data.crossWide?this.containerRect.width-this.contentElementNonVisibleWidth:this.containerRect.width,e=Math.min(t*this.iconWidthLimit,this.iconNominalSize*(this.isIE?1:2)),i=e/(this.isIE?1:2);return i>this.containerRect.height*this.iconSizeLimit&&(e=(i=this.containerRect.height*this.iconSizeLimit)*(this.isIE?1:2)),{width:Math.round(e),height:Math.round(i)}},buttonSiz},iconCountCaptio}},methods:{onGalleryClick:function(){this.animationInProgress||this.isResizing||(this.$store.commit("sound/SET_MUTE_TEMPORARY",!this.$store.state.caniuse.userInteractions.firstClick),Date.now()>this.tapTimeout&&setTimeout(this.galleryClick,this.$store.state.workspace.doubletapInterval+1),this.tapTimeout=Date.now()+this.$store.state.workspace.doubletapInterval)},galleryClick:function(){this.$store.commit("sound/SET_MUTE_TEMPORARY",!1),this.isFrozenOrNotReady||this.isEmbed||this.$store.dispatch("lightbox/openLightbox",{itemId:this.data.itemId,target:"content-click"})},preventDefault:function(t){t.preventDefault()},previewLoad:function(t){var e=this;if(t){var i=document.createElement("img");i.onload=function(){e.$emit("ready",e),e.addHiddenThumbnail(t),setTimeout((function(){e.makeThumbnailVisible(t)}),100)},i.onerror=function(t){e.$emit("error",e,t)},i.src=t}},addHiddenThumbnail:function(t){if(!this.cachedThumbnails.some}))){var e={visibility:"visible",zIndex:-1},i={id:t,style:Ni({},this.getThumbnailStyle(t),e)};this.cachedThumbnails.push(i)}},makeThumbnailVisible:function(t){this.cachedThumbnails.forEach((function(e){e.id===t?(e.style.visibility="visible",e.style.zIndex=null):e.style.visibility="hidden"}))}},watch:{thumbnailBlo}},components:{ContentButton:Fi}},ji=(0,U.Z)(Vi,Ai,Hi,!1,null,null,null).exports,Ui=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-touch",{staticClass:"content-element gif",class:t.containerClasses,style:t.containerStyle,on:{tap:t.onGifClick}},[i("content-button",{style:t.iconStyles,attrs:{icon:t.iconType,size:t.iconActualSize,translate:t.iconTranslate,color:t.iconColor,"icon-size":75}}),t._v(" "),i("transition",{attrs:{name:"fade-thumbnail"}},[t.rawThumbnailUrl?i("div",{directives:[{name:"show",rawName:"v-show",value:t.showThumbnail,expression:"showThumbnail"}],staticClass:"thumbnail",style:t.thumbnailStyle}):t._e()]),t._v(" "),t.isPlaying||t.isEnded?i("div",{staticClass:"image"},[i("img",{ref:"gifImg",style:t.imageStyle,attrs:{crossOrigin:t.crossOrigin,src:t.imageSrcCache}})]):t._e(),t._v(" "),t.isCurrentPage&&t.isLoading?i("div",{staticClass:"preloader",style:t.crossWideCenterIconPositionStyle},[i("spinner",{attrs:{sync:t.spreadMode&&t.data.crossWide,size:18,"line-fg-color":"#5692AE","line-bg-color":"#ffffff"}})],1):t._e(),t._v(" "),!1===t.data.loop?i("div",{staticClass:"replay",style:t.replayPositions},[i("svgicon",{attrs:{focusable:"false",name:"replay",color:"white"}})],1):t._e()],1)},Gi=[];i(148);function Xi(t){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(t)}function Yi(t,e,i){return(e=qi(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function qi(t){var e=Ki(t,"string");return"symbol"===Xi(e)?e:String(e)}function Ki(t,e){if("object"!==Xi(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!==Xi(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var Qi,Ji=8,ts={extends:pi,name:"ContentGif",props:[],data:function(){return{crossOrigin:(0,d.Z)().getCrossOrigin(),isIdle:!0,isLoading:!1,isPlaying:!1,isLoaded:!1,isEnded:!1,isAutoplay:this.data.autoplay,imgWidth:null,imgHeight:null,imgRatio:null,imageSrcCache:null,preloaderTimeout:null,loopTimeout:null,tapTimeout:0}},computed:{spreadMode:function(){return this.$store.state.pager.spreadMode},isLocaleRtl:function(){return this.$store.getters["i18n/isLocaleRtl"]},replayPositions:function(){var t=this.isLocaleRtl?"left":"right",e=this.singleMode&&this.data.crossWide&&this.data.page.side!==t?this.contentElementNonVisibleWidth+Ji:Ji;return Yi({bottom:Ji+"px"},t,e+"px")},containerClasses:function(){return{autoplay:this.isAutoplay,loading:this.isLoading,playing:this.isPlaying,ended:this.isEnded,highlighted:this.isHighlighted,"cross-wide":!!this.crossWideItem,"hover-button":"hover"===this.iconVisibility}},imageStyle:function(){return{width:Math.round(this.imgWidth*this.imgRatio*this.data.scaleRatio.w)+"px",height:Math.round(this.imgHeight*this.imgRatio*this.data.scaleRatio.h)+"px"}},imageSrc:function(){var t=!1===this.data.loop?"?rand="+this.rand:"",e=(this.$store.state.workspace.policiesUpdated,(0,Je.n)({filenameOrUrl:this.data.url,encode:!0}));return(0,d.Z)().translatePath(e+t)},rand:function(){return this.$store.state.content.rands[this.data.itemId]},isEmbed:function(){return this.$store.state.workspace.isEmbed},showThumbnai},animationInProgress:function(){return this.$store.state.workspace.animationInProgress},isLoadedAndVisibl}},mounted:function(){(!this.data.crossWide&&!this.rand||this.data.crossWide&&!this.crossWideItem&&!1===this.data.loop)&&this.newRand(),this.updateSrcCache(),this.$nextTick(this.checkAutoplay)},watch:{isCurrentPage:"currentPageChanged",isLoadedAndVisible:function(t){t&&(!this.crossWideItem||this.crossWideItem.isLoaded||this.singleMode)&&(this.isLoading=!1,this.playGif(this),this.crossWideItem&&!this.singleMode&&(this.crossWideItem.isLoading=!1,this.playGif(this.crossWideItem)),this.$emit("gif:loaded",this),this.$root.$emit("gif",{action:"loaded",url:this.data.url}))},imageSrc:"updateSrcCache",animationInProgress:function(t){t||this.$emit("pageAnimationEnded")}},methods:{playGif:function(t){t.isPlaying=!0,!1===t.data.loop&&t.data.duration&&(t.loopTimeout=setTimeout}),t.data.duration+300))},onGifClick:function(t){var e=this;this.isResizing||(Date.now()>this.tapTimeout&&setTimeout}),this.$store.state.workspace.doubletapInterval+1),this.tapTimeout=Date.now()+this.$store.state.workspace.doubletapInterval)},gifClick:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isFrozenOrNotReady&&!this.isEmbed){if(this.data.url&&this.isIdle&&!this.isLoading)this.$emit("gif:click",this),this.$root.$emit("gif",{action:"click",url:this.data.url}),this.loadGif();else if(!1===this.data.loop&&this.isEnded){var i=this.isMobile&&document.activeElement!==this.$el&&!this.isHighlighted,s=this.isMobile&&this.isHighlighted;if(!e&&!s&&(i||-1===(0,l.UZ)(t.target).indexOf("replay")))return void(i&&(this.isHighlighted=!0,this.crossWideItem&&(this.crossWideItem.isHighlighted=!0)));this.unloadGif(!e),this.$nextTick(this.loadGif),this.isMobile&&this.isHighlighted&&(this.isHighlighted=!1,this.crossWideItem&&(this.crossWideItem.isHighlighted=!1))}else(this.isPlaying||this.isLoading)&&this.unloadGif(!e&&!1===this.data.loop);this.crossWideItem&&!e&&this.crossWideItem.gifClick(null,!0)}},loadGif:function(){var t=this;this.img||(this.img=document.createElement("img")),this.img.onload=function(){clearTimeout(t.preloaderTimeout),t.imgWidth=t.img.naturalWidth,t.imgHeight=t.img.naturalHeight,t.imgRatio=Math.max(t.data.rect[0]/t.imgWidth,t.data.rect[1]/t.imgHeight),t.isLoaded=!0},this.img.onerro},this.crossOrigin&&(this.img.crossOrigin=this.crossOrigin),this.img.src=this.imageSrcCache,this.isIdle=!1,this.preloaderTimeout=setTimeout((function(){t.isLoading=!0}),this.data.loop?200:0)},unloadGif:function(t){var e;this.rawThumbnailUrl&&(clearTimeout(this.preloaderTimeout),clearTimeout(this.loopTimeout),this.isLoading=!1,this.isEnded=!1,this.img&&(this.img.onload=null,this.img.onerror=null,this.img.src=""),null===(e=this.$refs.gifImg)||void 0===e||e.removeAttribute("src"),this.isLoaded=!1,this.isPlaying=!1,this.isAutoplay=!1,this.isIdle=!0,t&&this.newRand(),this.$emit("gif:stop",this),this.$root.$emit("gif",{action:"stop",url:this.data.url}))},checkAutoplay:function(){this.data.autoplay&&(this.data.fileSize<10485760||!this.isMobile?this.isCurrentPage&&this.loadGif():this.isAutoplay=!1)},currentPageChanged:function(t){var e=this;t?this.animationInProgress?this.$once("pageAnimationEnded",(function(){e.checkAutoplay()})):this.checkAutoplay():(this.unloadGif(!0),this.data.autoplay&&(this.isAutoplay=!0))},newRan},updateSrcCache:function(){this.imageSrcCache===this.imageSrc||this.isLoaded||(this.imageSrcCache=this.imageSrc)}},components:{spinner:dt.Z,ContentButton:Fi}},es=ts,is=(0,U.Z)(es,Ui,Gi,!1,null,null,null).exports,ss=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._g({staticClass:"content-element video",class:t.containerClasses,style:t.containerStyle},t.isEmbed?null:{tap:t.onVideoClick}),[t.isPlayerShown||t.hasError?t._e():i("content-button",{key:"content-element-icon-"+t.data.itemId,style:t.iconStyles,attrs:{icon:t.iconType,size:t.iconActualSize,translate:t.iconTranslate,color:t.iconColor,iconSize:75}}),t._v(" "),t.hasError?i("content-button",{style:t.iconStyles,attrs:{icon:"error",size:t.iconActualSize,color:t.iconColor,iconSize:75}}):t._e(),t._v(" "),i("v-touch",t._g({directives:[{name:"show",rawName:"v-show",value:t.isThumbnailShown,expression:"isThumbnailShown"}],staticClass:"thumbnail",style:t.thumbnailStyle},t.isEmbed?null:{tap:t.onVideoClick})),t._v(" "),t.isInline&&t.isPlayerShown&&!t.isModalShown?i(t.videoData.provider,{ref:"player",tag:"component",attrs:{id:t.videoData.id,itemId:t.data.itemId,url:t.videoData.originalUrl,embedUrl:t.videoData.embedUrl,accessKey:t.videoData.accessKey,width:t.containerRect.width,height:t.containerRect.height,mute:t.isMuted,start:t.videoData.startFrom,isCurrentPage:t.isCurrentPage,isIos:t.isIos,customUrl:t.videoData.customUrl}}):t._e(),t._v(" "),t.isModalShown?i("modal-window",{ref:"modalWindow",attrs:{width:t.modalRect.width,height:t.modalRect.height,bgColor:"#000",delay:150}},[t.isIos&&t.showPreventer&&"wistia"!==t.videoData.provider?i("v-touch",{ref:"touchPreventer",staticClass:"touch-preventer",class:t.videoData.provider+(t.isModalSmall?" small":""),on:{tap:t.playPause,doubletap:function(t){t.preventDefault()},pinch:function(t){t.preventDefault()}}}):t._e(),t._v(" "),i(t.videoData.provider,{ref:"player",tag:"component",style:t.modalVideoStyle,attrs:{id:t.videoData.id,itemId:t.data.itemId,url:t.videoData.originalUrl,embedUrl:t.videoData.embedUrl,accessKey:t.videoData.accessKey,width:t.modalRect.width,height:t.modalRect.height,mute:t.isMuted,start:t.videoData.startFrom,isCurrentPage:!0,isIos:t.isIos,customUrl:t.videoData.customUrl}})],1):t._e()],1)},os=[],rs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"playerMount",staticClass:"youtube-player player",attrs:{id:t.elementId}})])},ns=[],as=i(1062),hs=i.n(as);function ls(t){return ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ls(t)}function cs(){return cs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},cs.apply(this,arguments)}function ds(t,e,i){return(e=us(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function us(t){var e=ps(t,"string");return"symbol"===ls(e)?e:String(e)}function ps(t,e){if("object"!==ls(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!==ls(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var gs=0,fs=-1,ms=0,vs=1,bs=2,Ss=3,ys=5,ws=(ds(Qi={},fs,"unstarted"),ds(Qi,vs,"play"),ds(Qi,bs,"pause"),ds(Qi,ms,"ended"),ds(Qi,Ss,"buffering"),ds(Qi,ys,"cued"),Qi),ks={name:"YoutubePlayer",props:{id:{type:[String],required:!0,default:null},itemId:{type:[Number],required:!0},url:{type:[String],required:!1,default:null},embedUrl:{type:[String],required:!1,default:null},accessKey:{type:[String],required:!1,default:null},height:{type:[Number,String],default:null},width:{type:[Number,String],default:null},mute:{type:Boolean,default:!1},start:{type:Number,default:null},options:{type:Object,default:function(){return{}}},isCurrentPage:{type:Boolean,default:!1},isIos:{type:Boolean,default:!1}},watch:{id:"update",width:"setSize",height:"setSize",mute:"setMute",isCurrentPage:function(t){!t||this.isPaused||this.$store.state.workspace.pausedByReader[this.itemId]||this.play()}},data:function(){return{elementId:"youtube-player-".concat(gs+=1),player:{},isPaused:!1}},methods:{play:function(){return this.player.playVideo()},pause:function(){return this.isPaused=!0,this.isPausedByApp=!0,this.player.pauseVideo()},stop:function(){return this.player.stopVideo()},updat},setSiz},setMut},setVolum},setCurrentTime:function(t){this.player.seekTo(t)},onReady:function(t){var e=this;this.$emit("ready",t.target),this.setMute(this.mute),this.isIos&&this.start&&this.$once("play"})),this.$on("play",this.startEmmitingTime),this.$on("pause",this.stopEmmitingTime),this.$on("ended",this.stopEmmitingTime),this.player.getPlayerState().then((function(t){var i=[vs,bs,Ss];e.isCurrentPage&&-1===i.indexOf(t)&&e.isMobile&&!e.isIos&&e.play()}))},emitStateChange:function(t){var e=this;if(null!==t.data&&t.data!==fs){var i,s=this.player.getCurrentTime(),o=this.player.isMuted();"function"==typeof s.then?s.then((function(s){i=Math.round(s),o.then((function(s){e.$emit(ws[t.data],i,e.player,s)}))})):(i=Math.round(s),this.$emit(ws[t.data],i,this.player,o))}},emitError:function(t){var e=this;this.player.isMuted().then((function(i){e.$emit("error",t,e.player,i)}))},startEmmitingTime:function(){var t=this;this.timeInterval=setInterval((function(){if(t.player){var e,i=t.player.getCurrentTime(),s=t.player.isMuted();"function"==typeof i.then?i.then((function(i){e=Math.round(i),s.then((function(i){t.$emit("timeupdate",e,t.player,i)}))})):(e=Math.round(i),t.$emit("timeupdate",e,t.player,s))}}),1e3)},stopEmmitingTime:function(){clearInterval(this.timeInterval),this.$store.commit("workspace/SET_PAUSED_BY_READER",{itemId:this.itemId,value:!this.isPausedByApp}),this.isPausedByApp=null}},computed:{isMobile:function(){return this.$store.getters["workspace/isMobile"]}},mounted:function(){window.YTConfig={host:"https://www.youtube.com"};var t={autoplay:this.isCurrentPage&&!this.$store.state.workspace.pausedByReader[this.itemId]?1:0,rel:0,modestbranding:1,mute:this.mute?1:0};!this.isIos&&this.start&&(t.start=this.start),this.player=hs()(this.$refs.playerMount,{videoId:this.id,width:this.width,height:this.height,playerVars:cs(t,this.options)}),this.player.on("ready",this.onReady),this.player.on("stateChange",this.emitStateChange),this.player.on("error",this.emitError),this.$parent.$on("play",this.play),this.$parent.$on("stop",this.stop),this.$parent.$on("pause",this.pause)},beforeDestroy:function(){null!==this.player&&this.player.destroy&&(this.player.destroy(),delete this.player),this.$off("play",this.startEmmitingTime),this.$off("pause",this.stopEmmitingTime),this.$off("ended",this.stopEmmitingTime),this.$parent.$off("play",this.play),this.$parent.$off("stop",this.stop),this.$parent.$off("pause",this.pause)}},xs=(0,U.Z)(ks,rs,ns,!1,null,null,null).exports,Ps=i(8333);function $s(){return $s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},$s.apply(this,arguments)}var zs=0;function Cs(t){var e=this;this.player.on(t,(function(i,s){var o=i.seconds?Math.floor(i.seconds):i;"error"!==t?e.player.getMuted().then})):console.log(t,i)}))}var Ts,Ms,Is=["play","pause","ended","seeked","error","loaded","timeupdate","volumechange"],Ls={name:"VimeoPlayer",props:{id:{type:[String],required:!1,default:null},itemId:{type:[Number],required:!0},url:{type:[String],required:!1,default:null},embedUrl:{type:[String],required:!1,default:null},accessKey:{type:[String],required:!1,default:null},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},mute:{type:Boolean,default:!1},start:{type:Number,default:null},options:{type:Object,default:function(){return{}}},isCurrentPage:{type:Boolean,default:!1},customUrl:{type:String,default:null}},render:function(t){return t("div",{attrs:{class:"vimeo-player player",id:this.elementId}})},watch:{id:"update",mute:"setMute",width:"setSize",height:"setSize",isCurrentPage:function(t){!t||this.$store.state.workspace.pausedByReader[this.itemId]||this.isMobile||this.play()}},data:function(){return{elementId:"vimeo-player-".concat(zs+=1),player:null,volume:1}},computed:{isMobile:function(){return this.$store.getters["workspace/isMobile"]}},methods:{play:function(){var t=this;return this.playPromise=this.player.play().catch(this.error),this.playPromise.then})),this.playPromise},pause:function(){var t=this;return this.playPromise?this.playPromise.then((function(){return t.doPause()})):this.doPause()},doPause:function(){return this.$store.commit("workspace/SET_PAUSED_BY_READER",{itemId:this.itemId,value:this.$store.state.workspace.pausedByReader[this.itemId]||!1}),this.player.pause().catch(this.error)},sto},updat},setMute:function(t){var e=this;t?(this.player.getVolume().then((function(t){e.volume=t>.1?t:.3})).catch(this.error),this.player.setMuted(!0).catch(this.error)):(this.player.setMuted(!1).catch(this.error),this.player.setVolume(this.volume).catch(this.error))},setVolum},setSize:function(){this.player.element&&(this.player.element.width=this.width,this.player.element.height=this.height)},setCurrentTime:function(t){this.player.setCurrentTime(t)},init:function(){var t=this;this.player.ready().then((function(){t.start&&t.player.setCurrentTime(t.start),t.isCurrentPage&&!t.$store.state.workspace.pausedByReader[t.itemId]&&t.player.play(),t.$emit("ready",t.player),t.setMute(t.mute),Is.forEach((function(e){return Cs.call(t,e)}))})).catch(this.error)},error:function(t){var e=this;if(-1!==t.message.indexOf("is not embeddable")&&this.$el.querySelector("iframe"))return;"PasswordError"!==t.name&&"PrivacyError"!==t.name||this.player.element&&(this.$nextTick((function(){e.player.element.focus()})),setTimeout}),100)),this.$emit("error",t,this.player)}},mounted:function(){var t={width:this.width,height:this.height,autoplay:0,autopause:0,muted:this.mute,transparent:!1,playsinline:!0};this.customUrl?(t.url=this.url,t.url+=this.accessKey?"/"+this.accessKey:""):this.embedUrl?t.url=this.embedUrl:this.accessKey?t.url="https://www.vimeo.com/"+this.id+"/"+this.accessKey:t.id=this.id,this.player=new Ps.Z(this.$el,$s(t,this.options)),this.init(),this.$parent.$on("play",this.play),this.$parent.$on("stop",this.stop),this.$parent.$on("pause",this.pause)},beforeDestroy:function(){this.player&&this.player.unload().catch((function(){})),this.$parent.$off("play",this.play),this.$parent.$off("stop",this.stop),this.$parent.$off("pause",this.pause)}},Rs=(0,U.Z)(Ls,Ts,Ms,!1,null,null,null).exports,Es=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{key:t.elementId,class:"wistia-player player wistia_embed wistia_async_"+t.id,attrs:{id:t.elementId},on:{wheel:function(t){t.stopPropagation()},click:function(t){t.stopPropagation()},touchstart:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()},touchstop:function(t){t.stopPropagation()},touchcancel:function(t){t.stopPropagation()},pointerdown:function(t){t.stopPropagation()},mousedown:function(t){t.stopPropagation()}}})},Os=[],Fs=i(1042),Ds=i(8531);function _s(){return _s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},_s.apply(this,arguments)}var Ws=0;function Bs(t){var e=this;this.player.bind(t,(function(){var i=Math.floor(e.player.time());e.$emit(t,i,e.player,e.player.isMuted())}))}var As=["play","pause","end","seek","secondchange","volumechange"],Hs={name:"WistiaPlayer",props:{id:{type:[String],required:!1,default:null},itemId:{type:[Number],required:!0},url:{type:[String],required:!1,default:null},embedUrl:{type:[String],required:!1,default:null},accessKey:{type:[String],required:!1,default:null},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},mute:{type:Boolean,default:!1},start:{type:Number,default:null},options:{type:Object,default:function(){return{}}},isCurrentPage:{type:Boolean,default:!1}},watch:{id:"update",mute:"setMute",isCurrentPage:function(t){!t||this.$store.state.workspace.pausedByReader[this.itemId]||this.isMobile||this.safePlay()},height:function(t){var e;null===(e=this.player)||void 0===e||e.height(t)},widt}},data:function(){return{elementId:this.generateElementId(),player:null,autoplayMissed:!1,tryNumber:0}},computed:{isMobile:function(){return this.$store.getters["workspace/isMobile"]}},methods:{generateElementI},play:function(){return this.player.play()},safePlay:function(){if(this.player)return this.play();this.autoplayMissed=!0},pause:function(){return this.$store.commit("workspace/SET_PAUSED_BY_READER",{itemId:this.itemId,value:this.$store.state.workspace.pausedByReader[this.itemId]||!1}),this.player.pause()},sto},updat},setMute:function(t){var e,i,s;t?null===(e=this.player)||void 0===e||e.mute():(null===(i=this.player)||void 0===i||i.unmute(),null===(s=this.player)||void 0===s||s.volume(1))},setVolume:function(t){this.player.volume(t)},setCurrentTime:function(t){this.player.time(t)},onAPILoaded:function(){var t=this,e=this,i={autoPlay:this.isCurrentPage&&!this.$store.state.workspace.pausedByReader[this.itemId],silentAutoPlay:!1,googleAnalytics:!1,fullscreenOnRotateToLandscape:!1,videoFoam:!1,resumable:!1,muted:this.mute};this.start&&(i.time=(0,Ds.Q$)(this.start));var s={id:this.elementId,options:_s(i,this.options),onEmbedded:function(t){e.player=t,As.forEach})),s.onEmbedded=function(){},s.initPlayerSkipped&&s.initPlayer()},onReady:function(t){var o=t.options,r=o.autoPlay!==i.autoPlay||o.time!==i.time;s.onReady=function(){},r&&e.shouldRetry()?setTimeout((function(){e.disposePlayer(),e.elementId=e.generateElementId(),e.increaseTryNumber(),e.$nextTick((function(){e.onAPILoaded()}))}),e.getTryTimeout()):t.embedded()?s.initPlayer():s.initPlayerSkipped=!0},initPlayer:function(){var i,s;e.resetTryNumber(),null===(i=e.player)||void 0===i||i.width(e.width),null===(s=e.player)||void 0===s||s.height(e.height),e.$parent.$on("play",e.play),e.$parent.$on("stop",e.stop),e.$parent.$on("pause",e.pause),e.$emit("ready",e.player),e.setMute(t.mute),e.autoplayMissed&&!t.$store.state.workspace.pausedByReader[t.itemId]&&e.play()}};window._wq=window._wq||[],window._wq.push(s)},increaseTryNumbe},resetTryNumber:function(){this.tryNumber=0},shouldRetr},getTryTimeout:function(){return 500*(this.tryNumber+2)},disposePlayer:function(){this.player&&"function"==typeof this.player.remove&&(this.player.remove(),this.player=null)},removeMutePrefs:function(){var t=(0,d.Z)().getLocalStorage().getItem("wistia-viewer-preferences");if(!(0,_.xb)(t)){var e=JSON.parse(t);delete e.muted,t=JSON.stringify(e),(0,d.Z)().getLocalStorage().setItem("wistia-viewer-preferences",t)}}},beforeMount:function(){this.removeMutePrefs()},mounted:function(){window.Wistia?this.onAPILoaded():(0,Fs.Z)("https://fast.wistia.com/assets/external/E-v1.js",this.onAPILoaded)},beforeDestro}},Ns=Hs,Zs=(0,U.Z)(Ns,Es,Os,!1,null,null,null).exports,Vs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"overlay"}},[t.visibility.overlay?i("v-touch",{staticClass:"modal-window-overlay",attrs:{dir:t.dir},on:{tap:t.onOverlayTap,pinch:function(t){t.preventDefault()},doubletap:function(t){t.preventDefault()},pinchstart:function(t){t.preventDefault()}}},[i("transition",{attrs:{name:"modal"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visibility.modal,expression:"visibility.modal"}],ref:"modal",class:["modal-window",{"modal-window-emphasis":t.bgColor},t.classes],style:t.modalStyle,on:{touchstart:function(t){t.stopPropagation()}}},[i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"modal-content"},[t.isLoaded?t._t("default"):i("div",{staticClass:"modal-preloader"},[i("spinner",{attrs:{size:36,"line-size":3,"line-fg-color":"#5692AE","line-bg-color":"#ffffff"}})],1),t._v(" "),t.showCloseIcon?i("div",{staticClass:"modal-close"},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"rounded-close"}})],1):t._e()],2)])],1)])],1):t._e()],1)},js=[],Us=(i(5958),{props:{rect:{type:Object,required:!1,default:null},width:{type:[Number,String],default:"80%"},height:{type:[Number,String],default:"auto"},bgColor:{type:String,default:null},styles:{type:Object,required:!1,default:null},classes:{type:[Object,Array,String],required:!1,default:null},delay:{type:Number,default:0},preloader:{type:Boolean,default:!1},showCloseIcon:{type:Boolean,default:!0}},data:function(){return{isVisible:!1,visibility:{modal:!1,overlay:!1},isLoaded:!this.preloader,hasError:!1,androidKeyboardShift:0,isHideEventEmitted:!1,historyEnabled:!!window.history&&!!window.history.pushState&&window.location===window.parent.location,windowWidth:window.innerWidth,windowHeight:window.innerHeight,isClosing:!1}},watch:{isVisible:function(t){var e=this;t?(this.visibility.overlay=!0,setTimeout((function(){e.visibility.modal=!0}),this.delay)):(this.visibility.modal=!1,setTimeout((function(){e.visibility.overlay=!1}),this.delay))},workspaceBookSize:function(){this.hide()}},computed:{modalStyle:function(){var t,e={};if(!this.bgColor||!this.isLoaded||null!==(t=this.styles)&&void 0!==t&&t.backgroundColor||(e.backgroundColor=this.bgColor),this.rect)e.width=this.rect.width+"px",e.height=this.rect.height+"px",e.left=this.rect.left+"px",e.top=this.rect.top+this.androidKeyboardShift+"px";else{var i=(0,_.kE)(this.width),s=(0,_.kE)(this.height);e.width=i?this.width+"px":this.width,e.height=s?this.height+"px":this.height,e.top=s?Math.round((this.windowHeight-this.height)/2)+this.androidKeyboardShift+"px":"50%",e.left=i?Math.round((this.windowWidth-this.width)/2)+"px":"50%",e.transform=i?"":"translateX(-50%)",e.transform+=s?"":" translateY(-50%)"}return this.styles&&(0,V.Z)(e,this.styles),e},isAndroid:function(){return!0===this.$store.state.workspace.userAgentInfo.os.android},dir:function(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"},workspaceBookSize:function(){return this.$store.state.workspace.bookSize}},methods:{show:function(){var t=this;this.historyEnabled&&window.addEventListener("popstate",this.hide),this.isVisible=!0,this.isHideEventEmitted=!1,this.$store.dispatch("workspace/setModalOpened",!0),setTimeout((function(){t.$emit("shown"),t.historyEnabled&&window.history.pushState({lightbox:!0},null,window.location.href)}),this.delay)},hide:function(){var t=this;this.historyEnabled&&window.removeEventListener("popstate",this.hide),this.isVisible=!1,this.$store.dispatch("workspace/setModalOpened",!1),setTimeout}),this.delay)},onOverlayTap:function(t){t.preventDefault(),!this.isClosing&&t&&t.target&&((0,_.HD)(t.target.className)&&t.target.className.indexOf("modal-window-overlay")>=0||(0,l.UZ)(t.target).indexOf("modal-close")>=0)&&(this.isClosing=!0,this.historyEnabled&&0!==window.history.length?window.history.back():this.hide())},loading:function(){this.isLoaded=!1},loaded:function(){this.isLoaded=!0},error:function(){this.hasError=!0},onResize:function(){if(this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.isAndroid){var t=document.activeElement;if(0!==this.androidKeyboardShift||"input"!==t.tagName.toLowerCase()&&"textarea"!==t.tagName.toLowerCase())0!==this.androidKeyboardShift&&(this.androidKeyboardShift=0);else{var e,i=t.getBoundingClientRect();i.top>this.windowHeight/2&&this.windowHeight<((null===(e=this.rect)||void 0===e?void 0:e.height)||this.height)&&(this.androidKeyboardShift=-i.top/4)}}},onKeydow}},mounted:function(){this.onResizeDebounced=(0,l.Ds)(this.onResize,100,!1),window.addEventListener("resize",this.onResizeDebounced),window.addEventListener("keydown",this.onKeydown),this.$root.$el.appendChild(this.$el)},beforeDestroy:function(){var t=this;window.removeEventListener("resize",this.onResizeDebounced),window.removeEventListener("keydown",this.onKeydown),this.$store.dispatch("workspace/setModalOpened",!1),this.isHideEventEmitted||this.$emit("hidden"),setTimeout}),this.delay)},components:{spinner:dt.Z}}),Gs={extends:pi,name:"ContentVideo",data:function(){var t;return{playerPromise:new Promise})),resolvePlayer:t,isModalShown:!1,isPlayerShown:!1,playerLoaded:!1,isPlaying:!1,volumeEnabled:!1,isEnded:!1,isMutedByPlayer:!1,tapTimeout:0,hasError:!1,videoData:null,showPreventer:!0,currentTime:null,lastProgressId:null,originalStartFrom:null,playedWhenFrozen:!1}},beforeMount:function(){this.data.originalUrl?this.videoData=this.getVideoInfo(this.data.originalUrl):this.videoData=this.data,this.originalStartFrom=this.videoData.startFrom},beforeDestro},watch:{isCurrentPage:"currentPageChanged",isPlaying:"setPlayingWithSound",isMutedByPlayer:"setPlayingWithSound",shouldAutoplay:function(t){!t||this.isPlayerShown||this.$store.state.workspace.pausedByReader[this.data.itemId]||this.startInline()},data:function(t){t.originalUrl?this.videoData=this.getVideoInfo(t.originalUrl):this.videoData=t},isInline:function(t,e){e&&!t&&this.isPlayerShown&&this.removeInline()},currentTime:function(t){this.saveTime(t)},isWorkspaceFrozen:function(t,e){t&&!e&&this.isInline&&this.removeInline(),!t&&e&&this.shouldAutoplay&&!this.$store.state.workspace.pausedByReader[this.data.itemId]&&this.startInline()},isLightboxShown:function(t){t&&!this.isModalShown?this.$emit("pause"):!this.isMobile&&this.data.autoplay&&this.isCurrentPage&&!this.$store.state.workspace.pausedByReader[this.data.itemId]&&this.$emit("play")}},mounted:function(){this.shouldAutoplay&&!this.$store.state.workspace.pausedByReader[this.data.itemId]&&this.startInline()},computed:{isInline:function(){var t=this.$store.state.workspace.userAgentInfo;return"dialog"!==this.data.mode&&!this.data.crossWide&&!t.browser.safari&&!this.isMobileApp&&!this.isPublisher&&this.data.rect[0]*this.data.scaleRatio.w>144&&this.data.rect[1]*this.data.scaleRatio.h>100},shouldAutoplay:function(){return!this.isFrozenOrNotReady&&!this.isEmbed&&!this.hasError&&!this.isPublisher&&!this.isMobile&&!this.isLightboxShown&&!this.$store.state.workspace.pausedByReader[this.data.itemId]&&this.isInline&&(this.$store.state.caniuse.video.inlineMutedAutoplay||this.$store.state.caniuse.video.inlineAutoplay)&&this.data.autoplay},isLightboxShown:function(){return this.$store.getters["lightbox/isShown"]||this.$store.state.workspace.modalOpened||null!==this.$store.state.popup.opened},shouldShowThumbnai},isThumbnailShow},isIos:function(){return this.$store.state.workspace.userAgentInfo.os.ios},isModalSmal},isPublisher:function(){return this.$store.state.workspace.userAgentInfo.browser.publisher},isMobileApp:function(){return"mobile-app"===this.$store.getters["info/version"]},apiVideoUrl:function(){var t="";switch(this.data.provider){case"youtube":t="https://www.youtube.com/watch?v="+this.data.id;break;case"vimeo":t="https://vimeo.com/"+this.data.id,this.data.accessKey?t="https://vimeo.com/"+this.data.id+"/"+this.data.accessKey:this.data.originalUrl&&(t=this.data.originalUrl.split("#")[0].split("?")[0]);break;case"wistia":t=this.data.account?"https://"+this.data.account+".wistia.com/medias/"+this.data.id:this.data.originalUrl?this.data.originalUrl.split("#")[0].split("?")[0]:"https://fast.wistia.net/embed/iframe/"+this.data.id;break;default:t=this.data.originalUrl||this.data.id}return t},modalRect:function(){var t=(0,Ce.Tj)({width:this.data.width?this.data.width:this.data.rect[0],height:this.data.height?this.data.height:this.data.rect[1]},{width:.8*this.workspaceSize.width,height:.8*this.workspaceSize.height});return{width:Math.round(t.width),height:Math.round(t.height)}},workspaceSize:function(){return this.$store.getters["workspace/size"]},modalVideoStyle:function(){return"youtube"===this.data.provider?null:{width:this.modalRect.width+"px",height:this.modalRect.height+"px"}},containerClasses:function(){return{error:this.hasError,"cross-wide":!!this.crossWideItem,highlighted:this.isHighlighted,"hover-button":"hover"===this.iconVisibility}},isMuted:function(){return this.$store.state.sound.muteSound||this.$store.state.sound.muteTemporary||this.isInline&&!this.$store.state.caniuse.video.inlineAutoplay&&this.$store.state.caniuse.video.inlineMutedAutoplay},isEmbed:function(){return this.$store.state.workspace.isEmbed},isWorkspaceFrozen:function(){return this.$store.getters["workspace/isFrozen"]},animationInProgress:function(){return this.$store.getters["workspace/animationInProgress"]},rawThumbnailUrl:function(){return this.data.image&&this.shouldShowThumbnail?(0,Je.n)({filenameOrUrl:this.data.image}):null}},methods:{onVideoClick:function(){this.animationInProgress||this.isResizing||(this.$store.commit("sound/SET_MUTE_TEMPORARY",!this.$store.state.caniuse.userInteractions.firstClick),this.$store.commit("workspace/SET_PAUSED_BY_READER",{itemId:this.data.itemId,value:!1}),Date.now()>this.tapTimeout&&setTimeout(this.videoClick,this.$store.state.workspace.doubletapInterval+1),this.tapTimeout=Date.now()+this.$store.state.workspace.doubletapInterval)},videoClick:function(){this.$store.commit("sound/SET_MUTE_TEMPORARY",!1),this.isFrozenOrNotReady||this.isEmbed||this.hasError||(this.isPublisher?this.$root.$emit("video",{action:"publisher",url:this.apiVideoUrl}):(this.$emit("video:click",this),this.isInline?this.startInline():this.openinModal()))},startInline:function(){var t,e=this;this.currentTime=this.loadTime(),this.videoData.startFrom=null!==(t=this.currentTime)&&void 0!==t?t:this.originalStartFrom,this.playerPromise.then((function(){"youtube"===e.data.provider&&(e.playerLoaded=!0)})),this.isPlayerShown=!0,this.$nextTick((function(){this.bindEvents()}))},removeInline:function(){var t=this;this.unbindEvents(),this.isPlayerShown=!1,this.playerLoaded=!1,this.playerPromise=new Promise((function(e){t.resolvePlayer=e}))},openinModal:function(){var t;this.currentTime=this.loadTime(),this.videoData.startFrom=null!==(t=this.currentTime)&&void 0!==t?t:this.originalStartFrom,this.$root.$emit("popupStateChanged",{state:1}),this.isModalShown=!0,this.$nextTick((function(){var t=this;this.$refs.modalWindow.show(),this.$nextTick((function(){this.bindEvents()})),this.$refs.modalWindow.$once("hidden",(function(){t.$root.$emit("popupStateChanged",{state:0}),t.isModalShown=!1,t.isPlaying=!1,t.$emit("video:close",t),t.$root.$emit("video",{action:"close",url:t.apiVideoUrl}),t.unbindEvents()}))}))},playPause:function(t){t.preventDefault(),this.isPlaying?this.$refs.player.pause():this.$refs.player.play()},getVideoInfo:function(t){var e=t.split("?"),i=e[0],s=e[1],o=i.split("#")[0],r=/(?:(?:https?:)?\/\/)?(?:[^.]+\.)?(\w+)(\.|\-)/.exec(o),n=r?r[1]:null,a=o.split("/"),h={provider:n,id:a[a.length-1]};switch(n){case"youtu":case"youtube":if(h.provider="youtube","watch"===h.id){var l=/v=([^&]+)/.exec(s);h.id=l?l[1]:null}break;case"vimeo":var c=/user[0-9]+\/\w+/,d=/^\d+$/;h.customUrl=c.exec(o)?o:null,h.customUrl||d.exec(h.id)||(h.accessKey=h.id,h.id=a[a.length-2]);break;case"wistia":var u=/https?:\/\/(.*)?(?:\.wistia\.com|fast\.wistia\.net)/.exec(o);h.account=u?u[1]:null}return(0,V.Z)(this.data,h)},currentPageChanged:function(t){t?this.isMobile||!this.data.autoplay||this.$store.state.workspace.pausedByReader[this.data.itemId]||this.$emit("play"):this.$emit("pause")},bindEvents:function(){var t=this;this.$refs.player.$on("play",(function(e,i,s){["vimeo","wistia"].includes(t.data.provider)&&t.$store.commit("workspace/SET_PAUSED_BY_READER",{itemId:t.data.itemId,value:null}),"youtube"!==t.data.provider&&t.isInline&&(t.playerLoaded=!0);var o=0===e||0===(null==e?void 0:e.seconds);t.isEnded&&o&&t.originalStartFrom&&t.$refs.player.setCurrentTime(t.originalStartFrom),t.isMutedByPlayer=s,t.isEnded=!1,t.isPlaying=!0,t.showPreventer=!0,t.$emit("video:play",e,t,i),t.$root.$emit("video",{action:"play",url:t.apiVideoUrl,time:e})})),this.$refs.player.$on("pause",(function(e,i,s){if(["vimeo","wistia"].includes(t.data.provider)){var o=t.$store.state.workspace.pausedByReader[t.data.itemId];t.$store.commit("workspace/SET_PAUSED_BY_READER",{itemId:t.data.itemId,value:o||null===o})}t.isPlaying=!1,t.isMutedByPlayer=s,t.currentTime=e,t.$emit("video:pause",e,t,i),t.$root.$emit("video",{action:"pause",url:t.apiVideoUrl,time:e})}));var e=function(e,i,s){t.isEnded=!0,t.isMutedByPlayer=s,t.isPlaying=!1,t.currentTime=t.originalStartFrom,t.$emit("video:end",e,t,i),t.$root.$emit("video",{action:"stop",url:t.apiVideoUrl,time:e})};this.$refs.player.$on("end",e),this.$refs.player.$on("ended",e);var i=function(e,i,s){t.currentTime=e,t.isMutedByPlayer=s,t.$emit("video:seek",e,t,i),t.$root.$emit("video",{action:"seekTo",url:t.apiVideoUrl,time:e})};this.$refs.player.$on("seek",i),this.$refs.player.$on("seeked",i),this.$refs.player.$on("timeupdate"})),this.$refs.player.$on("secondchange",(function(e,i,s){"wistia"===t.data.provider&&t.isEnded||(t.currentTime=e),t.isMutedByPlayer=s})),this.$refs.player.$on("error",(function(e,i,s){"PasswordError"!==e.name&&"PrivacyError"!==e.name?(t.$emit("video:error",e,t,i),t.isModalShown=!1,t.isPlayerShown=!1,t.playerLoaded=!1,t.isPlaying=!1,t.hasError=!0,t.isMutedByPlayer=s):t.showPreventer=!1})),this.$refs.player.$on("loaded",(function(e,i,s){t.showPreventer=!0,"youtube"!==t.data.provider&&t.isInline&&(t.playerLoaded=!0),t.isMutedByPlayer=s,t.$emit("video:loaded",e,t,i)})),this.$refs.player.$on("ready"}))},unbindEvents:function(){this.$refs.player&&(this.$refs.player.$off("play"),this.$refs.player.$off("pause"),this.$refs.player.$off("end"),this.$refs.player.$off("ended"),this.$refs.player.$off("seek"),this.$refs.player.$off("seeked"),this.$refs.player.$off("error"),this.$refs.player.$off("loaded"),this.$refs.player.$off("ready"))},setPlayingWithSound:function(){this.$store.state.caniuse.userInteractions.firstClick||this.isMutedByPlayer||this.$store.dispatch("caniuse/setFirstClick"),this.$store.dispatch("content/setVideoPlayingWithSound",{playing:this.isPlaying&&!this.isMutedByPlayer,itemId:this.data.itemId})},getVideoHash:function(t){return[[this.videoData.page.id,this.videoData.page.isWide?"wide":this.videoData.page.side].join("_"),this.videoData.provider,this.videoData.id,t].join("_")},saveTime:function(t){var e=this.getVideoHash("time"),i=this.getVideoHash("id"),s=(0,d.Z)().getSessionStorage().getItem(i);this.data.crossWide&&s&&s!=this.lastProgressId||(this.lastProgressId=Date.now(),(0,d.Z)().getSessionStorage().setItem(e,t),(0,d.Z)().getSessionStorage().setItem(i,this.lastProgressId))},loadTime:function(){var t=this.getVideoHash("time"),e=(0,d.Z)().getSessionStorage().getItem(t),i=e?parseInt(e,10):null,s=this.getVideoHash("id");return this.lastProgressId=(0,d.Z)().getSessionStorage().getItem(s),null===i||isNaN(i)?null:i}},components:{ContentButton:Fi,youtube:xs,vimeo:Rs,wistia:Zs,"modal-window":(0,U.Z)(Us,Vs,js,!1,null,"1536e47e",null).exports}},Xs=(0,U.Z)(Gs,ss,os,!1,null,null,null).exports,Ys=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"panel-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:(t.showPanel||t.forceShow)&&!t.inProgress&&!t.contextMenuVisible,expression:"(showPanel || forceShow) && !inProgress && !contextMenuVisible"}],ref:"copyPanel",staticClass:"select-text-panel",class:t.panelClass,style:t.panelStyle,attrs:{dir:t.blockDirection},on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave}},[i("div",{staticClass:"pointer",style:t.pointerStyle}),t._v(" "),i("span",{staticClass:"button",on:{click:t.copyText}},[t._v(t._s(t.$t("RightClickMenu.COPY_TEXT")))]),t._v(" "),t.isOnline?i("span",{staticClass:"divider"},[t._v("|")]):t._e(),t._v(" "),t.isOnline?i("span",{staticClass:"button",on:{click:t.copyTextLink}},[t._v(t._s(t.$t("RightClickMenu.SHARE_SELECTED_TEXT")))]):t._e()])])},qs=[],Ks={name:"select-text-panel",data:function(){return{showPanel:!1,forceShow:!1,panelStyle:{},panelRect:{},vertical:null,rightOffset:!1,showPanelTimeout:null,pointerStyle:{}}},mounted:function(){this.$root.$on("selectText:hidePanel",this.hide),this.$root.$on("selectText:showPanel",this.show)},beforeDestro},computed:{isSlideMode:function(){return this.$store.state.pager.slideMode},userRect:function(){return this.$store.state.text.selectionRect},pageId:function(){return this.$store.state.text.pageID},pageSide:function(){return this.$store.state.text.pageSide},inProgress:function(){return this.$store.state.text.inProgress},pageSize:function(){return this.$store.state.pages.size},cornerSymbols:function(){return this.$store.state.text.cornerSymbols},holderSize:function(){return this.$store.getters["workspace/holderSize"]},bookComponent:function(){return this.$store.state.workspace.bookComponent},locale:function(){return this.$store.getters["i18n/getCurrent"]},blockDirection:function(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":null},isRtl:function(){return this.$store.state.book.rightToLeft},panelClass:function(){return this.vertical+(this.rightOffset?" right-side":"")+(this.contextMenuVisible?" quick-leave":"")},pages:function(){var t=this.$store.getters["pager/currentPages"].length;return this.$store.getters["pages/pageProp"](this.pageId,"wide")?2:t},hardcoverTopPadding:function(){return this.$store.getters["book/hasHardcover"]?this.$store.state.pager.spreadMode?1===this.pages&&(this.$store.getters["pages/isFirstPage"](this.pageId)||this.$store.getters["pages/isLastPage"](this.pageId))?-.03*this.pageSize.height/2:0:this.$store.state.pager.singleMode&&this.$store.getters["pages/isFirstPage"](this.pageId)?-.03*this.pageSize.height/2:0:0},hardcoverLeftPadding:function(){return this.$store.getters["book/hasHardcover"]&&(this.$store.state.pager.spreadMode&&1===this.pages&&(!this.isRtl&&this.$store.getters["pages/isLastPage"](this.pageId)||this.isRtl&&this.$store.getters["pages/isFirstPage"](this.pageId))||this.$store.state.pager.singleMode&&this.isRtl&&this.$store.getters["pages/isFirstPage"](this.pageId))?-.03*this.pageSize.width:0},pageLeftPadding:function(){var t=this.$store.getters["pages/pageProp"](this.pageId,"wide");return this.$store.getters["pager/isFirstSpread"]||"right"!==this.pageSide||(this.isRtl&&this.$store.getters["pages/isLastPage"](this.pageId)||t)&&!this.$store.state.pager.singleMode?0:this.$store.state.pager.spreadMode?this.pageSize.width:this.$store.state.pager.singleMode&&t?-this.pageSize.width:0},contextMenuVisible:function(){return this.$store.state.workspace.contextMenuVisible},isOnlin},pagesWidth:function(){var t,e=this.$store.getters["pager/state"];if(e.slideMode)t=this.holderSize.width;else{var i=e.leftPage&&e.rightPage;t=this.$store.state.pages.size.width*(i?2:1)}return t},workspaceSize:function(){return this.$store.getters["workspace/size"]},isZoomed:function(){return 1!==this.$store.state.pages.size.zoomFactor},bookContainerWidth:function(){var t=this.$store.state.sidebar.opened?this.$store.state.sidebar.width:0;return this.workspaceSize.width-t}},methods:{hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{forceHide:!0};this.showPanel=!1,t.forceHide&&(this.forceShow=!1)},show:function(){var t=this,e="first:"+this.cornerSymbols.first.left+"-"+this.cornerSymbols.first.top+" last:"+this.cornerSymbols.last.left+"-"+this.cornerSymbols.last.top;null===this.userRect||this.showPanel&&this.cornerSymbolsCode===e||(this.showPanel=!0,this.cornerSymbolsCode=e,this.$nextTick((function(){t.setPosition()})))},setPosition:function(){var t=this.calculatePanelPosition();this.panelRect.left=t.left,this.panelRect.top=t.top,this.vertical=t.vertical,this.panelStyle={left:this.panelRect.left+"px",top:this.panelRect.top+"px"}},calculatePanelPosition:function(){var t;t=this.cornerSymbols.first.top===this.cornerSymbols.last.top?"left"===this.userRect.cursorHSide?{vertical:"top",horizontal:"first"}:{vertical:"bottom",horizontal:"last"}:"top"===this.userRect.cursorVSide?{vertical:"top",horizontal:"first"}:{vertical:"bottom",horizontal:"last"};var e="[data-zoom-wrapper]",i=new window.WebKitCSSMatrix(window.getComputedStyle(this.$root.$el.querySelector(e)).transform),s=i.m41,o=i.m42,r=50,n=this.calculatePanelCoordinates({position:t,zoomWrapperTranslateX:s});return this.isZoomed?n.top+o<r?(t.vertical="bottom",n=this.calculatePanelCoordinates({position:t,zoomWrapperTranslateX:s})):n.top-o+this.workspaceSize.height>this.holderSize.height-r&&(t.vertical="top",n=this.calculatePanelCoordinates({position:t,zoomWrapperTranslateX:s})):n.top<r?(t.vertical="bottom",n=this.calculatePanelCoordinates({position:t,zoomWrapperTranslateX:s})):n.top>this.holderSize.height-r&&(t.vertical="top",n=this.calculatePanelCoordinates({position:t,zoomWrapperTranslateX:s})),t=(0,V.Z)(t,n)},calculatePanelCoordinates:function(t){var e,i,s,o,r,n=t.position,a=t.zoomWrapperTranslateX,h=null!==(e=null===(i=this.userRect)||void 0===i?void 0:i.offsetX)&&void 0!==e?e:0,l=null!==(s=this.userRect.offsetY)&&void 0!==s?s:0,c=this.cornerSymbols[n.horizontal],d=this.cornerSymbols.first.top!==this.cornerSymbols.last.top,u=this.cornerSymbols.first.isRtlSelection&&d,p=n.horizontal===(u?"last":"first")&&c.collisions.left||n.horizontal===(u?"first":"last")&&!c.collisions.right?c.width:0,g="bottom"===n.vertical?c.height:0,f=this.pageLeftPadding+this.hardcoverLeftPadding+c.left+p+h,m=this.hardcoverTopPadding+c.top+g+l;if(this.isZoomed){var v=this.isSlideMode&&this.holderSize.left<0?0:this.holderSize.left,b=!this.isSlideMode&&this.bookContainerWidth>this.pagesWidth?(this.bookContainerWidth-this.pagesWidth)/2:0;o=this.$el.offsetWidth/2-v-a-b,r=this.bookContainerWidth-this.$el.offsetWidth/2-v-a-b}else o=this.$el.offsetWidth/2-this.holderSize.left,r=this.pagesWidth-(this.$el.offsetWidth/2-this.holderSize.left);var S=this.isZoomed&&(this.$el.offsetWidth/2-(o-f)<23||this.$el.offsetWidth/2-(f-r)<23);return this.pointerStyle.marginLeft=null,this.pointerStyle.display=S?"none":"block",f<o?(this.pointerStyle.marginLeft=f-o+"px",f=o):f>r&&(this.pointerStyle.marginLeft=f-r+"px",f=r),{left:f,top:m}},copyText:function(){this.$root.$emit("contextMenu:copyText"),this.hide()},copyTextLin},onMouseEnter:function(){this.forceShow=!0},onMouseLeave:function(){this.forceShow=!1}}},Qs=Ks,Js=(0,U.Z)(Qs,Ys,qs,!1,null,"122cbd9d",null).exports,to=i(6373);function eo(){return eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},eo.apply(this,arguments)}var io=i.n(to)()({features:["js","ww"],idle:1e4}),so={},oo={methods:{resizePage:function(t,e,i,s,o){var r,n=new Promise})),};io.resize(t,e,eo({},i,{cancelToken:n})).then(o,o).then(a,a),so[s]=r},cancelResize:function(t){var e=so[t];e&&e(),delete so[t]}}},ro={computed:{defaultZoomFactor:function(){return this.$store.state.workspace.defaultZoomFactor},isZoomed:function(){return 1!==this.zoomFactor}},methods:{getTappedZoomBlock:function(t){var e,i;return t.target&&"block"===t.target.className&&(e=t.target.getAttribute("data-id"),i=t.target.getBoundingClientRect()),{id:e,rect:i}},getBlockRect:function(t,e){var i={width:t.width>e.width+e.left-t.left?e.width+e.left-t.left:t.width,height:t.height,left:t.left-e.left,top:t.top-e.top};return i.left<0&&(i.width=i.width+i.left,i.left=0),i},checkScaleFactorForZoom:function(t,e,i){return 1*(e*t).toFixed(2)>i?i/e:t},getScrollAmount:function(t,e,i,s,o){if(t&&t.direction){var r,n;switch(t.direction){case"left":r=e<-100?100:-e;break;case"up":r=i<-100?100:-i;break;case"right":r=e-100>-(n=Math.max(o.width-s.width,0))?-100:-n-e;break;case"down":r=i-100>-(n=Math.max(o.height-s.height,0))?-100:-n-i}return r}},getSuitableZoomFactor:function(t,e,i,s){if(0===e)return null;var o=[1.1,1.25,1.5,1.75,2,2.5,3,3.5,4,4.5,5].filter})).filter((function(i){return e>0?i>t:i<t}));return e>0?o.shift():o.pop()},showSelectTextTip:function(){this.$store.getters["workspace/canShowSelectTextTip"]&&(this.$store.dispatch("workspace/setFlashMessage",{text:this.$tc("AlertMessage.SELECT_TEXT_TIP",0,{key:this.isMac?"⌘":"Ctrl"}),delay:1500}),this.$store.dispatch("workspace/increaseSelectTextTipShowsCount"))}}};function no(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return{width:Math.round(t.width*e),height:Math.round(t.height*e),top:Math.round(t.top+(i.y-i.y*e)),left:Math.round(t.left+(i.x-i.x*e))}}function ao(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:0,y:0};return{width:Math.round(e.width*i),height:Math.round(e.height*i),top:Math.round(t.height/2-s.y*i+2*t.top),left:Math.round(t.width/2-s.x*i+2*t.left)}}function ho(t,e){var i=t.width,s=t.height,o=t.top,r=t.left;return s<e.height?o=(e.height-s)/2:o>0?o=0:s+o<e.height&&(o=e.height-s),i<e.width?r=(e.width-i)/2:r>0?r=0:i+r<e.width&&(r=e.width-i),{width:Math.round(i),height:Math.round(s),top:Math.round(o),left:Math.round(r)}}function lo(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return 1===i?{x:0,y:0}:{x:Math.round((t.left-e.left)/(i-1)),y:Math.round((t.top-e.top)/(i-1))}}i(8384),i(6965),i(9036),i(464),i(925);var co=i(5109),uo={"content-block":fi,"content-link":yi,"content-image":Bi,"content-gallery":ji,"content-gif":is,"content-video":Xs},po={name:"FlipBook",mixins:[oo,ro,p.Z],props:{containerSize:{type:Object,required:!0},pageSize:{type:Object,required:!0}},components:{page:bt,selectTextPanel:Js},data:function(){return{status:"ready",zoomFactor:1,scaleFactor:1,scaleOrigin:{x:0,y:0},holderScrollTop:0,holderScrollLeft:0,holderScrollY:0,holderScrollX:0,zoomTimeout:0,addNoteTimeout:0,hideLeftArrow:!1,hideRightArrow:!1,visiblePages:"right",animation:!1,lastWheelTime:0,dragActive:!0,stripesWidth:0,dragging:!1,lastZoomFactor:null,overriddenPagerState:null}},beforeMount:function(){this.visiblePages=this.getVisiblePages(),this.lastZoomFactor=this.defaultZoomFactor,this.zoomFactor=this.$store.state.pages.size.zoomFactor,this.setPageSize(this.pageSize)},mounted:function(){var t={};t.bookWidth=2*this.$store.state.pages.size.width,t.bookHeight=this.$store.state.pages.size.height,this.bookHolderElement=this.$el.querySelector("#book-holder"),this.lastZoomBlockID=null,this.flipAdapter=new Ye({bookSize:this.bookSize,state:this.$store,container:this.bookHolderElement,parentVm:this,contentCreator:this.contentCreator,initDomEvents:!this.isEmbed,isMobile:this.isMobile,version:this.version}),this.toggleBlockOnFlip(),this.flipAdapter.on("render:start",this.onRenderStart,this),this.flipAdapter.on("render:finish",this.onRenderFinish,this),this.flipAdapter.on("flip:finished",this.onFlipFinished,this),this.$root.$on("contextMenu:zoomIn",this.zoomIn),this.$root.$on("contextMenu:zoomOut",this.zoomOut),this.$root.$on("bottomMenu:zoomIn",this.zoomIn),this.$root.$on("bottomMenu:zoomOut",this.zoomOut),this.$root.$on("zoomPanel",this.changeZoom),this.$root.$on("zoomMove",this.zoomMove),this.$root.$on("wheel",this.onWheel),this.zoomFactor>1&&this.refreshScroll()},beforeDestroy:function(){this.$root.$off("contextMenu:zoomIn",this.zoomIn),this.$root.$off("contextMenu:zoomOut",this.zoomOut),this.$root.$off("bottomMenu:zoomIn",this.zoomIn),this.$root.$off("bottomMenu:zoomOut",this.zoomOut),this.$root.$off("zoomPanel",this.changeZoom),this.$root.$off("zoomMove",this.zoomMove),this.$root.$off("wheel",this.onWheel),this.flipAdapter.off("render:start",this.onRenderStart,this),this.flipAdapter.off("render:finish",this.onRenderFinish,this),this.flipAdapter.off("flip:finished",this.onFlipFinished,this),this.flipAdapter.destructor()},watch:{forceRerender:function(){this.forceRerender&&(this.$store.dispatch("pager/setForceRerender",{forceRerender:!1}),this.flipAdapter.resetBook())},pageSt)},zoomFactor:function(t,e){var i=this;this.toggleBlockOnFlip();var s={width:this.pageSize.width,height:this.pageSize.height};if(s.width=s.width*t,s.height=s.height*t,s.zoomFactor=t,this.$store.dispatch("pages/changePageSize",s),t>1&&1===e){var o=this.$store.getters["pager/currentPages"].some((function(t){return i.$store.getters["pages/pageProp"](t,"textBlocks")}),this);this.selectTextEnabled&&o&&!this.$store.state.pager.isMoveWatcherActive&&this.showSelectTextTip()}},zoomPanel:function(){this.toggleBlockOnFlip()},status:function(t){"ready"!==t?(this.$store.dispatch("pager/freeze",{target:"flip-book-zoom"}),this.$store.dispatch("workspace/setAnimationProgress",{animationType:this.scaleFactor>1&&1===this.zoomFactor?"initialZoom":"zoomNotInitial"})):(this.$store.dispatch("pager/unfreeze",{target:"flip-book-zoom"}),this.$store.dispatch("workspace/unsetAnimationProgress")),this.toggleBlockOnFlip(),this.refreshScroll(),this.$store.dispatch("workspace/setStatus",t)},bookSize:function(t){this.flipAdapter.resizeBook(t)},singleMt)},currentPages:function(t,e){var i=this;if(t.mode===e.mode||t.zoomMode===e.zoomMode)if(t.isEqualState(e))t.zoomMode?this.zoomIn():this.zoomOut(!1);else{var s=function(t,e,s){t.mode===e.mode&&i.$store.dispatch("sound/playFlipSound",{hardcover:e.hardcover||t.hardcover});var o=i.$store.getters["pager/getDeltaTurns"](e,t);if(1===Math.abs(o)){var r=o>0?"toLeft":"toRight",n=o>0?!t.rightPage||t.isLastSpread:!t.leftPage||t.isFirstSpread;"flipComponent"!==t.target&&"orientation"!==t.target&&n&&i.$store.dispatch("pager/setForceFlip",{forceFlip:!0}),i.flipAdapter.updateState(r,t,s)}else Math.abs(o)>1&&i.flipAdapter.updateState("toPage",t,s)};if(1!==this.zoomFactor){this.overriddenPagerState=e,this.zoomOut(!1);var o=this.$store.getters["pager/flipState"];this.$once("transition:end",(function(){i.overriddenPagerState=null,setTimeout(s.bind(i,t,e,o),0)}))}else{var r=this.$store.getters["pager/flipState"];setTimeout(s.bind(this,t,e,r),0)}}},isWorkspaceFrozen:function(t){t?this.flipAdapter.block(!1):this.flipAdapter.unblock()},workspaceSize:function(){var t;if(1!==this.zoomFactor){var e;if(this.isInitialZoom)e={x:this.isRTLBook?this.bookHolderSize.width:0,y:0};else e={x:this.bookHolderSize.width>this.containerSize.width?-this.holderScrollX+this.containerSize.width/2:this.bookHolderSize.width/2,y:this.bookHolderSize.height>this.containerSize.height?-this.holderScrollY+this.containerSize.height/2:this.bookHolderSize.height/2};var i={x:e.x-this.bookHolderSize.left,y:e.y-this.bookHolderSize.top};this.scaleFactor=1;var s=ao(this.containerSize,this.bookHolderSize,this.scaleFactor,i);s=ho(s,this.containerSize),this.fixBounds(s),this.holderScrollLeft=s.left,this.holderScrollTop=s.top,null===(t=this.scrollComponent)||void 0===t||t.refresh(),this.isInitialZoom&&this.$store.dispatch("workspace/clearInitialZoom")}},isRTLBook:function(t){this.flipAdapter.setRtl(t)},isHardcover:function(t){this.zoomOut(!0),this.flipAdapter.setHardcover(t),this.$root.$emit("forceBookResize")},hardcoverColor:function(t){this.flipAdapter.setHardcoverColor(t)},hasThickness:function(t){this.flipAdapter.setThickness(t)},isOnlyRightPage:function(){var t=this.getVisiblePages();t!==this.visiblePages&&(this.visiblePages=t)},isOnlyLeftPt)},dragActive:function(t){t?this.$refs.bookHolder.$el.classList.remove("nodrag"):this.$refs.bookHolder.$el.classList.add("nodrag")},isMini:function(){this.zoomOut(!0)},workspaceBookSize:function(){this.zoomOut(!0)},orientationChanged:function(t,e){e&&this.isMobile&&this.zoomOut(!0)}},computed:{isFirstSpread:function(){return this.$store.getters["pager/isFirstSpread"]},isLastSpread:function(){return this.$store.getters["pager/isLastSpread"]},isOuterHardcod)},bookSize:function(){var t,e=this.$store.state;return t=e.book.rightToLeft?"left"===this.visiblePages?-e.pages.size.width:0:this.singleMode||"right"===this.visiblePages?-e.pages.size.width:0,{width:2*this.$store.state.pages.size.width,height:this.$store.state.pages.size.height,top:this.containerSize.top+(this.containerSize.height-e.pages.size.height)/2,left:t}},isOnlyRightPage:function(){var t,e=null!==(t=this.overriddenPagerState)&&void 0!==t?t:this.$store.getters["pager/state"];return e.spreadMode&&null===e.leftPage},isOnlyLeftPage:function(){var t,e=null!==(t=this.overriddenPagerState)&&void 0!==t?t:this.$store.getters["pager/state"];return e.spreadMode&&null===e.rightPage},isOnlyPage:function(){return 1===this.$store.getters["pages/pagesCount"]},bookHolderSize:function(){var t,e,i="both"!==this.visiblePages,s=this.$store.getters["pages/size"],o=this.singleMode,r=this.isHardcover?1.03:1,n=this.containerSize.width,a=this.containerSize.height,h=this.holderScrollLeft,l=this.holderScrollTop,c=this.stripesWidth||0,d=24,u=i||o?s.width:2*s.width,p=s.height;return 1===this.zoomFactor?(t=(n-u)/2,e=(a-p)/2):(t=h,e=l),this.$store.dispatch("workspace/setHolderSize",{width:u*r+2*c+2*d,height:p*r,left:1===this.zoomFactor?t:0,top:1===this.zoomFactor?e:0}),{width:Math.round(u),height:Math.round(p),top:Math.round(e),left:Math.round(t)}},bookHolderStyle:function(){var t=this.bookHolderSize,e=this.containerSize,i=this.zoomFactor,s=this.scaleOrigin,o=this.holderScrollLeft,r=this.holderScrollTop,n=this.scaleFactor,a=this.status,h=this.fastAnimation,l=this.animationSpeed,c=e.height>=t.height?Math.round(t.top)+"px":"0",d=e.width>=t.width?Math.round(t.left)+"px":"0",u={width:t.width+"px",height:t.height+"px",top:1===i?t.top+"px":c,left:1===i?t.left+"px":d};if("animating"===a||"pinch"===a||"scale"===a){u.transformOrigin=s.x+"px "+s.y+"px";var p="translate("+(e.width<t.width?o:0)+"px,"+(e.height<t.height?r:0)+"px) translateZ(0) ",g="scale3d("+n+", "+n+", "+n+")";u.transform=0!==r||0!==o?p+g:g;var f="transform "+(h?1:l)+"ms "+(this.isFirefox||h?"linear":"cubic-bezier(0.215, 0.61, 0.355, 1)");u.transition="animating"===a?f:"transform 0s"}else u.transition="transform 0s",1===i&&(u.transform="");return u},flipBookClass:function(){var t={};t.zoomed=1!==this.zoomFactor||1!==this.scaleFactor,t.rtl=this.isRTLBook,t["arrow-attract-right"]="right"===this.arrowAttract,t["arrow-attract-left"]="left"===this.arrowAttract;var e=this.$store.state.book.bookSize.height/this.$store.state.book.bookSize.width;return this.isHardcover&&(e<=1.1&&e>=.9?t.square=!0:e>1.1?t.portrait=!0:t.landscape=!0),t.scaling="scale"===this.status,t["drag-active"]=this.dragging,t["single-page"]=this.pageCount<=2,t["single-mode"]=this.singleMode,t},pageCount:function(){return this.$store.getters["pages/pagesCount"]},currentPages:function(){var t=this.$store.getters["pager/state"],e=this.$store.getters["pages/isFirstPage"](t.currentPage),i=t.spreadMode&&!this.$store.state.pager.spread_rightPage,s=this.isHardcover&&(e||i);return(0,V.Z)(t,{hardcover:s})},singleMode:function(){return this.$store.state.pager.singleMode},forceRerender:function(){return this.$store.state.pager.forceRerender},holderOriginalWidth:function(){return"both"!==this.visiblePages||this.singleMode?this.pageSize.width:2*this.pageSize.width},isWorkspaceFrozen:function(){return this.$store.state.workspace.freezed},frozell},zoomPanel:function(){return this.$store.state.workspace.zoomPanel},wheelScroll:function(){return this.$store.state.workspace.wheelScroll},workspaceSize:function(){return this.$store.state.workspace.containerSize},workspaceBookSize:function(){return this.$store.state.workspace.bookSize},orientationChanged:function(){return this.$store.getters["workspace/orientation"]},minZoom:function(){var t=this.isHardcover&&(this.isFirstPage||this.isLastPage)?1.03:1,e=this.singleMode?1:2;return Math.min(this.$store.state.workspace.containerSize.height/(this.$store.state.pages.size.height*t/this.$store.state.pages.size.zoomFactor),this.$store.state.workspace.containerSize.width/(this.$store.state.pages.size.width*t*e/this.$store.state.pages.size.zoomFactor))},maxZoom:function(){return this.$store.state.workspace.maxZoom},isInitialZoom:function(){return this.$store.state.workspace.initialZoom},animationSpeed:function(){return this.scaleFactor<1?400:600},isMini:function(){return this.$store.state.workspace.mini},isEmbed:function(){return this.$store.state.workspace.isEmbed},version:function(){return this.$store.getters["info/version"]},isMobile:function(){return this.$store.getters["workspace/isMobile"]},isFirefox:function(){return!0===this.$store.state.workspace.userAgentInfo.browser.firefox},isIE:function(){return!0===this.$store.state.workspace.userAgentInfo.browser.msie},isSafari:function(){return!!this.$store.state.workspace.userAgentInfo.browser.safari},isMac:function(){return!0===this.$store.state.workspace.userAgentInfo.os.mac},isRTLBook:function(){return this.$store.state.book.rightToLeft},isLocaleRtl:function(){return this.$store.getters["i18n/isLocaleRtl"]},isHardcover:function(){return this.$store.getters["book/hasHardcover"]},hardcoverColor:function(){return this.$store.state.book.hardcoverColor},hasThickness:function(){return this.$store.state.book.thickness},isFirstPage:function(){var t=this.$store.getters["pager/isFirstSpread"],e=this.$store.getters["pager/isLastSpread"];return this.isRTLBook?e:t},isLastPage:function(){var t=this.$store.getters["pager/isLastSpread"],e=this.$store.getters["pager/isFirstSpread"];return this.isRTLBook?e:t},isSecondPage:function(){var t=this.$store.getters["pager/prevPageId"];return this.$store.getters["pages/isFirstPage"](t)},isSecondToLastPage:function(){var t=this.$store.getters["pager/nextPageId"];return this.$store.getters["pages/isLastPage"](t)},isLightboxShown:function(){return this.$store.getters["lightbox/isShown"]},showBookButtons:function(){return!this.isLightboxShown&&1===this.zoomFactor&&1===this.scaleFactor&&"html"===this.version},showLeftButtons:function(){var t=this.showBookButtons&&!this.isFirstPage&&!(this.hideLeftArrow&&(this.isRTLBook?this.isSecondToLastPage:this.isSecondPage));return t||this.switchFocus("left","right"),t},showRightButtons:function(){var t=this.showBookButtons&&!this.isLastPage&&!(this.hideRightArrow&&(this.isRTLBook?this.isSecondPage:this.isSecondToLastPage));return t||this.switchFocus("right","left"),t},notesEnabled:function(){return this.$store.state.workspace.components.notes&&!this.isMini},showRightAddNote:function(){return(this.showRightButtons||this.hideRightArrow)&&(!this.isLocaleRtl||this.isFirstPage)},showOnlyAddNge},addNoteTitleText:function(){return this.$t("NotesToolWindow.ADD_NOTE")},leftArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.NEXT_PAGE_TIP"):this.$t("NavigationPanel.PREV_PAGE_TIP")},rightArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.PREV_PAGE_TIP"):this.$t("NavigationPanel.NEXT_PAGE_TIP")},leftMostArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.LAST_PAGE_TIP"):this.$t("NavigationPanel.FIRST_PAGE_TIP")},rightMostArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.FIRST_PAGE_TIP"):this.$t("NavigationPanel.LAST_PAGE_TIP")},bookSter},selectTextEnabled:function(){return!this.isMobile&&!this.isIE&&this.$store.state.workspace.components.textSelection},arrowAttract:function(){var t=this.$store.getters["workspace/callToNavigation"];return"arrow"===t.type&&t.side},bookEventHandlers:function(){return this.isEmbed?null:{pinchstart:this.onPinchStart,pinchmove:this.onPinchMove,pinchend:this.onPinchFinish,pinchcancel:this.onPinchFinish}},bookHolderEventHandlers:function(){var t=this.isEmbed?{}:{doubletap:this.zoomByTap.bind(this,"tap")};return t.tap=this.isHardcover?this.clickOnCover:function(){},t}},methods:{fixBounds:function(t){if(this.isOuterHardcover){var e=this.scaleFactor*this.zoomFactor;if(e>1||e<.95){var i=this.isFirstSpread&&!this.isRTLBook||this.isLastSpread&&this.isRTLBook&&!this.singleMode,s=this.isLastSpread&&!this.isRTLBook&&!this.singleMode||this.isFirstSpread&&this.isRTLBook,o=this.$store.state.pages.size.width,r=Math.round(.03*o/this.zoomFactor*e/2);i?t.left=t.left-r:s&&(t.left=t.left+r)}}},setPageSize:function(t){var e={width:t.width*this.zoomFactor,height:t.height*this.zoomFactor,zoomFactor:this.zoomFactor};this.$store.dispatch("pages/changePageSize",e)},clickOnCover:function(t){for(var e=(0,l.iZ)(t.target),i=0,s=e.length;i<s&&!e[i].classList.contains("page");i++){if(e[i].classList.contains("z1")&&e[i].classList.contains("hard-front")){this.rightPage();break}if(e[i].classList.contains("z3")&&e[i].classList.contains("hard-front")){this.leftPage();break}}},switchFocus:function(t,e){["notes","go","go-last"].forEach((function(i){var s,o=[i,t].join("-"),r=[i,e].join("-");document.body.contains(document.activeElement)&&(null===(s=document.activeElement)||void 0===s?void 0:s.getAttribute("data-nav-name"))===o&&document.querySelector('[data-nav-name="'+r+'"]').focus()}))},onRenderStart:function(t){t.drag&&"left"===t.hide?this.hideLeftArrow=!0:t.drag&&"right"===t.hide&&(this.hideRightArrow=!0),this.animation=!0,this.$root.$emit("turnStart")},onRenderFinish:function(){this.hideLeftArrow=!1,this.hideRightArrow=!1,this.animation=!1,this.$root.$emit("render:finish"),this.$root.$emit("turnStop")},onFlipFinis")},onWheel:function(t){if(!(!this.wheelScroll||this.isMini||Date.now()-this.lastWheelTime<200||t.target&&"note-article"===t.target.className)){if(t.ctrlKey||t.metaKey){if("ready"!==this.status)return;var e=-1*t.deltaY,i=this.getSuitableZoomFactor(this.zoomFactor,e,this.minZoom,this.maxZoom);e<0&&!i&&this.zoomOut(!1,"wheel-zoom"),i&&(this.$store.dispatch("pager/setLastTarget","wheel-zoom"),this.setZoom(i,!0,{x:t.clientX,y:t.clientY}))}else{if(this.zoomFactor>1||this.scaleFactor>1)return;this.$store.state.notes.opened&&this.$store.dispatch("notes/setOpenedId",{id:null}),t.deltaY>0?this.$store.dispatch("pager/goForward",{target:"wheel"}):t.deltaY<0&&this.$store.dispatch("pager/goBackward",{target:"wheel"})}this.lastWheelTime=Date.now()}},zoomMove:function(t){if(t&&t.direction)if("ready"===this.status){var e;switch(t.direction){case"left":case"right":e=this.getScrollAmount(t,this.scrollComponent.x,0,this.containerSize,this.bookHolderSize),this.scrollComponent.scrollBy(e,0);break;case"up":case"down":e=this.getScrollAmount(t,0,this.scrollComponent.y,this.containerSize,this.bookHolderSize),this.scrollComponent.scrollBy(0,e);break;case"drag":this.dragActive=t.active,this.initScrollComponent(this.dragActive)}this.scrollComponent&&(this.holderScrollX=this.scrollComponent.x,this.holderScrollY=this.scrollComponent.y,this.$store.dispatch("text/setHolderScroll",{x:this.holderScrollX,y:this.holderScrollY}))}else"drag"===t.direction&&(this.dragActive=t.active)},getVisiblePah"},toggleBlockOnFlip:function(){var t=this;1!==this.zoomFactor||this.zoomPanel||"ready"!==this.status?this.flipAdapter.block(!0):setTimeout((function(){t.flipAdapter.unblock()}),20)},refreshScroll:function(){var t=this;this.cancelDragging(),this.$nextTick((function(){t.zoomFactor>1&&"ready"===t.status?t.initScrollComponent(t.dragActive):t.scrollComponent&&(t.holderScrollX=0,t.holderScrollY=0,t.$store.dispatch("text/setHolderScroll",{x:t.holderScrollX,y:t.holderScrollY}),t.scrollComponent.destroy(),delete t.scrollComponent)}))},onScrollEnd:function(){this.cancelDragging(),this.holderScrollX=this.scrollComponent.x,this.holderScrollY=this.scrollComponent.y,this.$store.dispatch("text/setHolderScroll",{x:this.holderScrollX,y:this.holderScrollY})},onScrollBegin:function(){this.holderScrollX=this.scrollComponent.x,this.holderScrollY=this.scrollComponent.y,this.$store.dispatch("text/setHolderScroll",{x:this.holderScrollX,y:this.holderScrollY})},setDragging:function(){1!==this.zoomFactor&&(this.dragging=!0)},cancelDragging:function(){this.dragging=!1},zoomOut:function(t,e){if(1!==this.zoomFactor){if(this.lastZoomFactor=Math.max(this.zoomFactor,this.defaultZoomFactor),t)return this.status="calculating",this.zoomFactor=1,this.scaleFactor=1,this.refreshScroll(),this.holderScrollLeft=0,this.holderScrollTop=0,this.status="ready",this.$root.$emit("unzoomed"),void(this.fastAnimation=!1);this.zoomByTap(e,{center:{x:0,y:0}})}},zoomIn:function(t){this.zoomFactor>1||this.zoomByTap(t)},zoomByTap:function(t,e){if(t&&this.$store.dispatch("pager/setLastTarget",t),!(this.zoomTimeout>Date.now()||this.isWorkspaceFrozen||"ready"!==this.status||"pending"!==this.$store.state.pager.flipState||this.isMini)){e||(e={center:{x:this.isRTLBook?this.workspaceSize.width:0,y:0},target:null});var i=["next-button","previous-button","icon-book-next","icon-book-prev","reflex-container"];if(!e.target||!(i.indexOf(e.target.className)>=0||e.target.classList.contains("stripe")||e.target.classList.contains("page-stripe")||(0,_.HD)(e.target.className)&&e.target.className.indexOf("stripe-block")>=0||"0-0"===e.target.dataset.page||"textarea"===e.target.tagName.toLowerCase())){this.status="calculating";var s,o=!1,r=this.getTappedZoomBlock(e);if(this.isMobile&&r.id){o=this.lastZoomBlockID!==r.id;var n=this.bookHolderElement.getBoundingClientRect();s=this.getBlockRect(r.rect,n)}if(this.lastZoomBlockID=o?r.id:null,o){var a=1.5,h=40,l=2,c=this.containerSize.width-h*l,d=1*(.96*c/s.width).toFixed(2),u=this.bookHolderSize.width-s.width-s.left;(s.left*d<h||u*d<h)&&(l=1,d=1*(.96*(c=this.containerSize.width-h*l)/s.width).toFixed(2)),this.updateHolderScroll(!0),this.scaleFactor=this.checkScaleFactorForZoom(d,this.zoomFactor,this.maxZoom),this.scaleFactor*this.zoomFactor<a&&(this.scaleFactor=a/this.zoomFactor)}else this.scaleFactor=1!==this.zoomFactor||this.zoomPanel?this.holderOriginalWidth/this.bookHolderSize.width:this.lastZoomFactor;var p={x:e.center.x-this.bookHolderSize.left,y:e.center.y-this.bookHolderSize.top},g=ao(this.containerSize,this.bookHolderSize,this.scaleFactor,p);if(o){var f=s.left*this.scaleFactor,m=s.width*this.scaleFactor;g.left=-f+(this.containerSize.width-m)/2}g=ho(g,this.containerSize),this.fixBounds(g),this.status="animating",this.scaleOrigin=lo(this.bookHolderSize,g,this.scaleFactor),this.newBounds=g,this.refreshScroll(),this.flipAdapter.setZoom(this.scaleFactor*this.zoomFactor>1),this.scaleFactor>1?this.$root.$emit("zoomed"):(this.scaleFactor<1||this.zoomPanel&&1===this.scaleFactor)&&this.$root.$emit("unzoomed"),this.$store.dispatch("workspace/setHighlightTimeout",Date.now()+1e3)}}},onPinchStart:function(t){this.isWorkspaceFrozen||"ready"!==this.status||"inProgress"===this.$store.state.pager.flipState||this.isMini||(this.$store.dispatch("pager/setLastTarget","pinch-zoom"),this.minScale=this.holderOriginalWidth/this.bookHolderSize.width,this.scaleFactor=1,this.pinchCenter=t.center,this.isZoomed?(this.updateHolderScroll(!1),this.scaleOrigin={x:t.center.x-this.holderScrollLeft,y:t.center.y-this.holderScrollTop}):this.scaleOrigin={x:t.center.x-this.bookHolderSize.left,y:t.center.y-this.bookHolderSize.top},this.status="pinch")},onPinchMove:function(t){if("pinch"===this.status){var e=this.minScale<t.scale?t.scale:this.minScale;if(this.scaleFactor=this.checkScaleFactorForZoom(e,this.zoomFactor,this.maxZoom),1!==this.scaleFactor){var i=no(this.bookHolderSize,this.scaleFactor,this.scaleOrigin);i=ho(i,this.containerSize),this.scaleOrigin=lo(this.bookHolderSize,i,this.scaleFactor)}}},onPinchFinish:function(){if("pinch"===this.status){var t=no(this.bookHolderSize,this.scaleFactor,this.scaleOrigin);t=ho(t,this.containerSize),this.zoomFactor=1*(this.zoomFactor*this.scaleFactor).toFixed(2),this.scaleFactor=1,this.holderScrollLeft=this.isZoomed?t.left:0,this.holderScrollTop=this.isZoomed?t.top:0,this.status="ready",this.scaleFactor>1?this.$root.$emit("zoomed"):this.scaleFactor<1&&this.$root.$emit("unzoomed")}},setZoom:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;if(!this.isWorkspaceFrozen&&"ready"===this.status){this.scaleFactor=t/this.zoomFactor,this.updateHolderScroll(!1);var s=i||{x:this.workspaceSize.width/2,y:this.workspaceSize.height/2},o={x:s.x-this.bookHolderSize.left,y:s.y-this.bookHolderSize.top},r=no(this.bookHolderSize,this.scaleFactor,o);r=ho(r,this.containerSize),this.fixBounds(r),this.scaleOrigin=lo(this.bookHolderSize,r,this.scaleFactor),this.newBounds=r,this.flipAdapter.setZoom(this.scaleFactor*this.zoomFactor>1),this.fastAnimation=e,this.status="animating",this.refreshScroll()}},setScaleStart:function(){this.minScale=Math.max(this.minZoom/this.zoomFactor,this.holderOriginalWidth/this.bookHolderSize.width),this.maxScale=this.maxZoom/this.zoomFactor,this.scaleFactor=1,this.updateHolderScroll(!1),this.scaleOrigin={x:this.workspaceSize.width/2-this.holderScrollLeft,y:this.workspaceSize.height/2-this.holderScrollTop},this.status="scale"},setScale:function(t){if("scale"===this.status){var e=this.minScale+(this.maxScale-this.minScale)*t,i=no(this.bookHolderSize,e,{x:this.workspaceSize.width/2-this.holderScrollLeft,y:this.workspaceSize.height/2-this.holderScrollTop});i=ho(i,this.containerSize),this.fixBounds(i),this.scaleOrigin=lo(this.bookHolderSize,i,e);var s=Math.min(this.maxScale,Math.max(this.minScale,e));this.scaleFactor=this.checkScaleFactorForZoom(s,this.zoomFactor,this.maxZoom)}},setScaleFinish:function(){if("scale"===this.status){var t=no(this.bookHolderSize,this.scaleFactor,this.scaleOrigin);t=ho(t,this.containerSize),this.fixBounds(t),this.zoomFactor=1*(this.zoomFactor*this.scaleFactor).toFixed(2),this.scaleFactor=1,this.holderScrollLeft=1!==this.zoomFactor?t.left:0,this.holderScrollTop=1!==this.zoomFactor?t.top:0,this.status="ready"}},changeZoom:function(t){switch(this.$store.dispatch("pager/setLastTarget","change-zoom"),t.action){case"setZoom":this.setZoom(t.zoomFactor,t.fast);break;case"startScale":this.setScaleStart();break;case"changeScale":this.setScale(t.scalePosition);break;case"endScale":this.setScaleFinish();break;case"zoomIn":this.zoomByTap();break;case"zoomOut":this.dragActive=!0,this.zoomOut()}},transitionEnd:function(t){t&&"transform"===t.propertyName&&t.target===this.bookHolderElement&&"animating"===this.status&&(this.fastAnimation=!1,this.lastZoomFactor=Math.max(this.zoomFactor,this.defaultZoomFactor),this.zoomFactor=1*(this.zoomFactor*this.scaleFactor).toFixed(2),this.scaleFactor=1,this.holderScrollLeft=1===this.zoomFactor?0:this.newBounds.left,this.holderScrollTop=1===this.zoomFactor?0:this.newBounds.top,this.status="ready",this.$emit("transition:end"))},updateHolderScroll:function(t){t&&1===this.zoomFactor||(this.containerSize.width<this.bookHolderSize.width&&(this.holderScrollLeft=this.holderScrollX),this.containerSize.height<this.bookHolderSize.height&&(this.holderScrollTop=this.holderScrollY))},contentCreator:function(t){return uo["content-"+t.type]},rightPage:function(){var t=this;this.addNoteTimeout>Date.now()||this.$store.state.pager.freezed||(this.zoomTimeout=Date.now()+500,setTimeout((function(){t.movePagerRight({target:"nav-arrow-tap"})}),0))},leftPage:function(){var t=this;this.addNoteTimeout>Date.now()||this.$store.state.pager.freezed||(this.zoomTimeout=Date.now()+500,setTimeout((function(){t.movePagerLeft({target:"nav-arrow-tap"})}),0))},rightmostPage:function(){var t=this;this.zoomTimeout=Date.now()+500,setTimeout((function(){t.movePagerRightmost({navTarget:!0})}),0)},leftmostPage:function(){var t=this;this.zoomTimeout=Date.now()+500,setTimeo})}),0)},arrowHover:function(t,e){e?this.$el.classList.add(t+"-highlighted"):this.$el.classList.remove(t+"-highlighted")},btnAddNote:function(t){var e,i,s;this.zoomTimeout=Date.now()+500,this.addNoteTimeout=Date.now()+500,this.currentPages.singleMode?(e=this.currentPages.currentPage,i=this.currentPages.widePageSecondHalf,s=this.isRTLBook&&this.$store.getters["pages/pageProp"](e,"wide")&&!i):(e="left"===t&&!this.isRTLBook||"right"===t&&this.isRTLBook?this.currentPages.leftPage:this.currentPages.rightPage,i="right"===t&&this.currentPages.wide),this.$store.dispatch("notes/addNote",{pageId:e,wideRight:i,wideOpposite:s})},initScrollComponent:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];1!==this.zoomFactor&&(this.scrollComponent?(this.holderScrollX=this.scrollComponent.x,this.holderScrollY=this.scrollComponent.y,this.scrollComponent.off("beforeScrollStart",this.setDragging),this.scrollComponent.off("scrollCancel",this.cancelDragging),this.scrollComponent.off("scroll",this.onScrollBegin),this.scrollComponent.off("scrollEnd",this.onScrollEnd),this.scrollComponent.destroy(),delete this.scrollComponent):(this.holderScrollX=this.containerSize.width<this.bookHolderSize.width?this.bookHolderSize.left:0,this.holderScrollY=this.containerSize.height<this.bookHolderSize.height?this.bookHolderSize.top:0),this.scrollComponent=new co.ZP(this.$el,{mouseWheel:e,scrollbars:!1,freeScroll:!this.isMobile,scrollX:this.containerSize.width<this.bookHolderSize.width,scrollY:this.containerSize.height<this.bookHolderSize.height,probeType:this.isSafari?3:1,bindToWrapper:this.isMobile,bounce:!1,startX:this.holderScrollX,startY:this.holderScrollY,disablePointer:!0,disableTouch:!1,disableMouse:!e}),this.$store.dispatch("text/setHolderScroll",{x:this.holderScrollX,y:this.holderScrollY}),this.scrollComponent.on("beforeScrollStart",this.setDragging),this.scrollComponent.on("scrollCancel",this.cancelDragging),this.scrollComponent.on("scroll",this.onScrollBegin),this.scrollComponent.on("scrollEnd",this.onScrollEnd),this.scrollComponent.scroller.translater.hooks.on("beforeTranslate",(function(){t.$root.$emit("zoomScrollMove")})))},getPageInfo:function(t,e,i){return{page:t,wide:this.$store.getters["pages/pageProp"](t,"wide"),first:this.$store.getters["pages/isFirstPage"](t),last:this.$store.getters["pages/isLastPage"](t),index:null!==t?this.$store.getters["pages/pageIndexById"](t):this.$store.getters["pages/pageIndexById"](e)+i}},getStateInfo:function(t){return{right:this.getPageInfo(t.rightPage,t.leftPage,1),left:this.getPageInfo(t.leftPage,t.rightPage,-1),differentPages:t.rightPage!==t.leftPage}}}},go=po,fo=(0,U.Z)(go,r,n,!1,null,null,null).exports,mo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide-book"},[i("v-touch",t._g({ref:"holder",staticClass:"slide-holder",class:t.holderClasses,attrs:{tag:"div",id:"slide-holder"}},t.isEmbed?null:{pinchstart:t.onPinchStart,pinchmove:t.onPinchMove,pinchend:t.onPinchFinish,pinchcancel:t.onPinchFinish,panstart:t.onPanStart,panmove:t.onPanMove,panend:t.onPanEnd,pancancel:t.onPanEnd}),t._l(t.outputSlidesCache,(function(e){return i("div",{key:e.pages[0].id+"_"+e.pages[0].side,ref:"current"===e.position?"wrapper":null,refInFor:!0,class:"slide-wrapper "+e.position,style:t.slideStyles[e.position],attrs:{"data-id":e.pages[0].id+"_"+e.pages[0].side+(e.pages[1]?"-"+e.pages[1].id+"_"+e.pages[0].side:"")}},[i("v-touch",{staticClass:"spread-wrapper",style:t.spreadStyles[e.position],attrs:{tag:"div","data-zoom-wrapper":"current"===e.position||null},on:{doubletap:function(i){!t.isEmbed&&"current"===e.position&&t.onDoubleTap(i)}},nativeOn:{transitionend:function(e){return t.onTransitionEnd(e)}}},[t.selectTextEnabled&&"current"===e.position?i("select-text-panel"):t._e(),t._v(" "),t.isSpreadFillerShown?[i("div",{staticClass:"spread-filler"},t._l(e.pages,(function(e){return i("div",{staticClass:"page-filler",class:e.side,style:e.style,attrs:{"data-caption":e.caption}},[i("svgicon",{attrs:{name:e.icon}}),t._v(" "),e.wide&&t.isSpreadMode?i("svgicon",{attrs:{name:e.icon}}):t._e()],1)})),0)]:t._l(e.pages,(function(s){return i("page",{key:s.id+"_"+s.side,ref:"current"===e.position?"current":null,refInFor:!0,class:"slide-page "+(t.isContentCropMode?"content-crop":s.position),attrs:{id:s.id,side:s.side,size:t.pageSizes[e.position],contentCreator:t.contentCreator,"data-id":s.id+"_"+s.side,contentCrop:t.isContentCropMode}})}))],2)],1)})),0),t._v(" "),i("transition",{attrs:{name:"note-icon-fade"}},[t.noteIconShown?i("button",{staticClass:"icon-add-note",class:t.noteIconClass,style:t.noteIconStyle,attrs:{tabindex:"0",title:t.addNoteTitleText},on:{click:function(e){return e.stopPropagation(),t.addNote(e)}}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"add-note"}})],1):t._e()])],1)},vo=[];i(9719),i(16r Po={"content-block":fi,"content-link":yi,"content-image":Bi,"content-gallery":ji,"content-gif":is,"content-video":Xs},$o={name:"SlideBook",mixins:[oo,ro,p.Z],props:{containerSize:{type:Object,required:!0},pageSize:{type:Object,required:!0}},components:{page:bt,selectTextPanel:Js},data:function(){return{status:"ready",zoomFactor:1,scaleFactor:1,slideScrollTop:0,slideScrollLeft:0,slideScrollY:0,slideScrollX:0,scaleOrigin:{x:0,y:0},delta:0,slidesCache:{},outputSlidesCache:[],horizontalScale:1,fastAnimation:!1,dragActive:!0,lastZoomFactor:null,lastWheelTime:0,propCache:{},dragging:!1,noteIconClass:["hidden"],noteIconStyle:null,isFastSliding:!1,isSpreadFillerShown:!1,pendingFastSlide:null,fastSlidingCancelTimeout:null}},beforeMount:function(){this.lastZoomFactor=this.defaultZoomFactor,this.zoomFactor=this.$store.state.pages.size.zoomFactor},mounted:function(){this.slidesCacheUpdate(),this.status="ready",this.pendingSlide=null,this.$root.$on("contextMenu:zoomIn",this.zoomIn),this.$root.$on("contextMenu:zoomOut",this.zoomOut),this.$root.$on("bottomMenu:zoomIn",this.zoomIn),this.$root.$on("bottomMenu:zoomOut",this.zoomOut),this.$root.$on("zoomPanel",this.changeZoom),this.$root.$on("zoomMove",this.zoomMove),this.$root.$on("wheel",this.onWheel),this.$root.$on("nav:goRight",this.goFastRight),this.$root.$on("nav:goLeft",this.goFastLeft),this.updateNoteIcon(),requestAnimationFrame(this.animationLoop),this.zoomFactor>1&&this.refreshScroll()},beforeDestroy:function(){this.tween&&at().remove(this.tween),this.$root.$off("contextMenu:zoomIn",this.zoomIn),this.$root.$off("contextMenu:zoomOut",this.zoomOut),this.$root.$off("bottomMenu:zoomIn",this.zoomIn),this.$root.$off("bottomMenu:zoomOut",this.zoomOut),this.$root.$off("zoomPanel",this.changeZoom),this.$root.$off("zoomMove",this.zoomMove),this.$root.$off("wheel",this.onWheel),this.$root.$off("nav:goRight",this.goFastRight),this.$root.$off("nav:goLeft",this.goFastLeft)},watch:{pageSize:function(t){var e={width:t.width*this.zoomFactor,height:t.height*this.zoomFactor,zoomFactor:this.zoomFactor};this.$store.dispatch("pages/changePageSize",e),this.slidesCacheUpdate()},isSingleMode:function(){this.slidesCacheUpdate()},isSlideMode:function(){this.slidesCacheUpdate()},isRtl:function(){this.slidesCacheUpdate()},zoomFactor:function(t,e){var i=this,s={width:this.pageSize.width*t,height:this.pageSize.height*t,zoomFactor:t};if(this.$store.dispatch("pages/changePageSize",s),t>1&&1===e){var o=bo(this.slidesCache.current.map((function(t){return t.id}))).filt=t})).some((function(t){return i.$store.getters["pages/pageProp"](t,"textBlocks")}),this);this.selectTextEnabled&&o&&this.showSelectTextTip()}this.refreshScroll()},sta,e}((function(t){"sliding"===t?this.$store.dispatch("pager/isPageChanging",!0):this.$store.state.pager.isMoveWatcherActive||this.$store.dispatch("pager/isPageChanging",!1),this.refreshScroll(),this.$store.dispatch("workspace/setStatus",t);var e=["sliding","pan"].indexOf(status)>=0?"inProgress":"pending";this.$store.dispatch("pager/setFlipState",{newState:e}),"ready"!==t||this.isFastSliding?this.$store.dispatch("workspace/setAnimationProgress",{animationType:"pagerMove"}):this.$store.dispatch("workspace/unsetAnimationProgress"),this.updateNoteIcon()})),slides:function(t,e){var i=this;if(this.scrollLock)this.scrollLock=!1;else{var s=e.current[0].state,o=t.current[0].state;if(s.mode===o.mode){this.isSlideMode||this.isSingleMode||this.updateHorizontalScale(t.current,e.current);var r=this.$store.getters["pager/getDeltaTurns"](s,o),n=Math.abs(r)>1;o.zoomMode===s.zoomMode||r?!this.isRtl&&r>0||this.isRtl&&r<0?(n&&this.replaceCachedSlide("right",t.current),this.isZoomed?(this.pendingSlide="right",this.zoomOut()):this.$nextTick((function(){i.animateSlides("right",!1,!0)}))):(!this.isRtl&&r<0||this.isRtl&&r>0)&&(n&&this.replaceCachedSlide("left",t.current),this.isZoomed?(this.pendingSlide="left",this.zoomOut()):this.$nextTi0)}))):o.zoomMode?this.zoomIn():this.zoomOut()}}},workspaceSize:function(t,e){if(this.isMobile&&e.width&&e.height&&(t.width!==e.width||t.height!==e.height))this.zoomOut(!0);else if(1!==this.zoomFactor){var i,s,o={x:(i=this.isInitialZoom?{x:this.isRTLBook?this.spreadSizes.current.width:0,y:0}:{x:t.width/2,y:t.height/2}).x-this.spreadSizes.current.left,y:i.y-this.spreadSizes.current.top};this.scaleFactor=1,s=ho(s=this.isInitialZoom?ao(this.containerSize,this.spreadSizes.current,this.scaleFactor,o):no(this.spreadSizes.current,this.scaleFactor,o),this.containerSize),this.scaleOrigin=lo(this.spreadSizes.current,s,this.scaleFactor),this.slideScrollLeft=s.left,this.slideScrollTop=s.top,this.isInitialZoom&&(this.$store.dispatch("workspace/clearInitialZoom"),this.refreshScroll())}},containerSize:function(){1===this.zoomFactor||this.isMobile||this.refreshScroll()},pageSizes:function(t){var e=this,i=this.slidesCache;Object.keys(i).forEach((function(s){for(var o=0;o<i[s].length;o++){var r=i[s][o].id,n=e.getPageProp(r,"wide"),a=t[s].width*(e.isSingleMode&&n?2:1),h=t[s].height,l=n&&"current"!==s&&r===i.current[0].id;if(e.zoomFactor>1&&"current"!==s||e.isSingleMode&&l)return;e.$store.dispatch("pages/setCurrentSize",{pageID:r,value:{width:a,height:h}})}}))},spreadSizes:function(t){this.$store.dispatch("workspace/setHolderSize",t.current),this.updateNoteIcon()},isLocaleRtl:function(){this.updateNoteIcon()},notesEnabled:function(){this.updateNoteIcon()},dragActive:function(t){t?this.$refs.holder.$el.classList.remove("nodrag"):this.$refs.holder.$el.classList.add("nodrag")},isM()},orientationChanged:function(t,e){e&&this.zoomOut(!0)}},computed:{isRTLBook:function(){return this.$store.state.book.rightToLeft},isFirstPage:function(){return this.$store.getters["pager/isFirstSpread"]},isLastPage:function(){return this.$store.getters["pager/isLastSpread"]},isRightmostPage:function(){return this.isFirstPage&&this.isRtl||this.isLastPage&&!this.isRtl},isLeftmostPtl},isRtl:function(){return this.$store.state.book.rightToLeft},isLocaleRtl:function(){return this.$store.getters["i18n/isLocaleRtl"]},isMobile:function(){return this.$store.getters["workspace/isMobile"]},isSingleMode:function(){return this.$store.state.pager.singleMode},isSpreadMode:function(){return this.$store.state.pager.spreadMode},isSlideMode:function(){return this.$store.state.pager.slideMode},isContentCropMop},isZooor},isInitialZoom:function(){return this.$store.state.workspace.initialZoom},zoomPanel:function(){return this.$store.state.workspace.zoomPanel},slides:function(){var t=this,e={},i=this.isRtl?"right":"left",s=this.isRtl?"left":"right",o=this.$store.getters["pager/state"],r=this.$store.getters["pager/nextState"],n=this.$store.getters["pager/prevState"],a=this.$store.getters["pager/secondNextState"],h=this.$store.getters["pager/secondPrevState"],l=this.isRtl?r:n,c=this.isRtl?n:r,d=this.isRtl?a:h,u=this.isRtl?h:a,p=function(i,s,r,n,a,h){if(h||(e[i]=[]),s){var l=t.$store.getters["pages/pageIndexById"](s);n&&r===(t.isRtl?"left":"right")&&l++;var c=t.$store.getters["pages/pageCaptionByIndex"](l),d=t.$store.getters["pages/pageProp"](s,"backgroundColor"),u=t.isSlideMode&&n?"page-wide":"page",p={backgroundColor:d};t.isFastSliding&&(p["font-size"]=Math.min(Math.floor(t.containerSize.height/20),20)+"px"),e[i].push({id:s,side:r,caption:c,icon:u,style:p,wide:n,position:a,state:o})}};if(o.singleMode)p("current",o.currentPage,o.pageSide,o.wide,""),l&&p("left",l.currentPage,l.pageSide,l.wide,""),c&&p("right",c.currentPage,c.pageSide,c.wide,""),d&&p("second-left",d.currentPage,d.pageSide,d.wide,""),u&&p("second-right",u.currentPage,u.pageSide,u.wide,"");else if(o.slideMode){if(e.current=[],o.currentPage){var g=o.wide?"both":i;p("current",o.currentPage,g,o.wide,i)}if(l){var f=l.wide?"both":i;p("left",l.currentPage,f,l.wide,i)}if(c){var m=c.wide?"both":i;p("right",c.currentPage,m,c.wide,i)}if(d){var v=d.wide?"both":i;p("second-left",d.currentPage,v,d.wide,i)}if(u){var b=u.wide?"both":i;p("second-right",u.currentPage,b,u.wide,i)}}else if(o.spreadMode){var S=function(e,o){var r=t.getPageProp(o.leftPage,"wide"),n=r?"both":i;if(p(e,o.leftPage,n,r,i),o.rightPage&&o.leftPage!==o.rightPage){var a=r?"both":s;p(e,o.rightPage,a,r,s,!0)}};S("current",o),l&&S("left",l),c&&S("right",c),d&&S("second-left",d),u&&S("second-right",u)}return e},fitPageSe)},fitDoublePageSize:function(){return(0,Ce.Tj)({width:2*this.pageSize.width,height:this.pageSize.height},this.containerSize)},fitSinglePageSize:function(){return{width:this.fitDoublePageSize.width/2,height:this.fitDoublePageSize.height,top:this.fitDoublePageSize.top,left:(this.containerSize.width-this.fitDoublePageSize.width/2)/2}},pageSizes:function(){var t={},e=this.fitPageSize,i=this.fitDoublePageSize,s=this.fitSinglePageSize;for(var o in this.slidesCache){if(!this.slidesCache.hasOwnProperty(o))return;var r="current"===o?this.zoomFactor:1;if(this.isSingleMode)t[o]={width:Math.round(e.width*r),height:Math.round(e.height*r)};else if(this.isContentCropMode){var n=this.getContentSize(this.slidesCache[o][0].id);t[o]={width:Math.round(n.width*r),height:Math.round(n.height*r),left:n.left,top:n.top}}else{var a=this.slidesCache[o][0].wide;t[o]={width:Math.round((a?i.width:s.width)*r),height:Math.round((a?i.height:s.height)*r)}}}return t},spreadSizes:function(){var t={};for(var e in this.slidesCache){if(!this.slidesCache.hasOwnProperty(e))return;if(t[e]={width:this.pageSizes[e].width*this.slidesCache[e].length,height:this.pageSizes[e].height},this.isZoomed&&"current"===e)t[e].left=this.slideScrollLeft,t[e].top=this.slideScrollTop;else if(this.isSingleMode)t[e].left=this.fitPageSize.left,t[e].top=this.fitPageSize.top;else if(this.isContentCropMode)t[e].left=this.pageSizes[e].left,t[e].top=this.pageSizes[e].top;else{var i=2===this.slidesCache[e].length||this.slidesCache[e][0].wide;t[e].left=i?this.fitDoublePageSize.left:this.fitSinglePageSize.left,t[e].top=i?this.fitDoublePageSize.top:this.fitSinglePageSize.top}}return t},holderClasses:function(){return{zoomed:this.isZoomed,"drag-active":this.dragging,single:this.isSingleMode}},spreadStyles:function(){var t={};return t.current={width:this.spreadSizes.current.width+"px",height:this.spreadSizes.current.height+"px",left:this.isZoomed?this.containerSize.width>=this.spreadSizes.current.width?Math.round((this.containerSize.width-this.spreadSizes.current.width)/2)+"px":0:Math.round(this.spreadSizes.current.left)+"px",top:this.isZoomed?this.containerSize.height>=this.spreadSizes.current.height?Math.round((this.containerSize.height-this.spreadSizes.current.height)/2)+"px":0:Math.round(this.spreadSizes.current.top)+"px",transformOrigin:Math.round(this.scaleOrigin.x)+"px "+Math.round(this.scaleOrigin.y)+"px",transition:"animating"===this.status?["-webkit-transform "+(this.fastAnimation?1:this.zoomAnimationSpeed)+"ms cubic-bezier(0.215, 0.61, 0.355, 1)","transform "+(this.fastAnimation?1:this.zoomAnimationSpeed)+"ms cubic-bezier(0.215, 0.61, 0.355, 1)"]:["-webkit-transform 0ms","transform 0ms"]},"pinch"!==this.status&&"scale"!==this.status&&"animating"!==this.status?t.current.transform="":0!==this.slideScrollTop||0!==this.slideScrollLeft?t.current.transform="translate3d("+(this.containerSize.width<this.spreadSizes.current.width?Math.round(this.slideScrollLeft):0)+"px,"+(this.containerSize.height<this.spreadSizes.current.height?Math.round(this.slideScrollTop):0)+"px, 0) scale("+this.scaleFactor.toFixed(2)+")":t.current.transform="scale("+this.scaleFactor.toFixed(2)+")",this.slidesCache.left&&(t.left={width:this.spreadSizes.left.width+"px",height:this.spreadSizes.left.height+"px",left:Math.round(this.spreadSizes.left.left)+"px",top:Math.round(this.spreadSizes.left.top)+"px"}),this.slidesCache.right&&(t.right={width:this.spreadSizes.right.width+"px",height:this.spreadSizes.right.height+"px",left:Math.round(this.spreadSizes.right.left)+"px",top:Math.round(this.spreadSizes.right.top)+"px"}),this.slidesCache["second-left"]&&(t["second-left"]={width:this.spreadSizes["second-left"].width+"px",height:this.spreadSizes["second-left"].height+"px",left:Math.round(this.spreadSizes["second-left"].left)+"px",top:Math.round(this.spreadSizes["second-left"].top)+"px"}),this.slidesCache["second-right"]&&(t["second-right"]={width:this.spreadSizes["second-right"].width+"px",height:this.spreadSizes["second-right"].height+"px",left:Math.round(this.spreadSizes["second-right"].left)+"px",top:Math.round(this.spreadSizes["second-right"].top)+"px"}),t},slideStyles:function(){var t={};return t.current={transform:"translate3d("+Math.round(this.slideOffsets.current)+"px, 0, 0)"},this.slidesCache.left&&(t.left={transform:"translate3d("+Math.round(this.slideOffsets.left)+"px, 0, 0)"}),this.slidesCache.right&&(t.right={transform:"translate3d("+Math.round(this.slideOffsets.right)+"px, 0, 0)"}),this.slidesCache["second-left"]&&(t["second-left"]={transform:"translate3d("+Math.round(-this.maxDelta)+"px, 0, 0)",display:"none"}),this.slidesCache["second-right"]&&(t["second-right"]={transform:"translate3d("+Math.round(this.maxDelta)+"px, 0, 0)",display:"none"}),t},slideOffsets:function(){return{current:this.delta,left:-this.maxDelta+this.delta,right:this.maxDelta+this.delta}},maxDe0)},minZoom:function(){return Math.min(this.$store.state.workspace.containerSize.height/(this.$store.state.pages.size.height/this.$store.state.pages.size.zoomFactor),this.$store.state.workspace.containerSize.width/(2*this.$store.state.pages.size.width/this.$store.state.pages.size.zoomFactor))},maxZoom:function(){return this.$store.state.workspace.maxZoom},zoomAnimationSp00},slideAnimationSpeed:function(){return 400},slideEasut},isWorkspaceFrozen:function(){return this.$store.state.workspace.freezed},isPagerFrozen:function(){return this.$store.getters["pager/isFrozen"]},workspaceSize:function(){return this.$store.state.workspace.size},isMobileApp:function(){return"mobile-app"===this.$store.getters["info/version"]},isMini:function(){return this.$store.state.workspace.mini},isEmbed:function(){return this.$store.state.workspace.isEmbed},isMovingNote:function(){return this.$store.state.notes.isMoving},blockte},selectTextEnabled:function(){return!this.isMobile&&!this.isIE&&this.$store.state.workspace.components.textSelection},isIE:function(){return!0===this.$store.state.workspace.userAgentInfo.browser.msie},isSafari:function(){return!!this.$store.state.workspace.userAgentInfo.browser.safari},wheelScroll:function(){return this.$store.state.workspace.wheelScroll},notesEnabled:function(){return this.$store.state.workspace.components.notes},addNoteTitleT")},noteIconShown:function(){return this.notesEnabled&&!this.isMobile&&!this.isMini&&!this.isZoomed&&"ready"===this.status&&this.spreadSizes.current},orientationChanged:function(){return this.$store.getters["workspace/orientation"]}},methods:{animationLoop:function(t){this._isDestroyed||(at().update(t),requestAnimationFrame(this.animationLoop))},getContentSize:function(t){var e=this.getPageProp(t,"width"),i=this.getPageProp(t,"height");return(0,Ce.Tj)({width:e,height:i},this.containerSize)},getPageProp:function(t,e){if(!(0,_.o8)(this.propCache[t])&&!(0,_.o8)(this.propCache[t][e]))return this.propCache[t][e];(0,_.o8)(this.propCache[t])&&(this.propCache[t]={});var i=this.$store.getters["pages/pageProp"](t,e);return this.propCache[t][e]=i,i},zoomMove:function(t){if(t&&t.direction)if("ready"===this.status){var e;switch(t.direction){case"left":case"right":e=this.getScrollAmount(t,this.scrollComponent.x,0,this.containerSize,this.spreadSizes.current),this.scrollComponent.scrollBy(e,0);break;case"up":case"down":e=this.getScrollAmount(t,0,this.scrollComponent.y,this.containerSize,this.spreadSizes.current),this.scrollComponent.scrollBy(0,e);break;case"drag":this.dragActive=t.active,this.initScrollComponent(this.dragActive)}this.scrollComponent&&(this.holderScrollX=this.scrollComponent.x,this.holderScrollY=this.scrollComponent.y,this.$store.dispatch("text/setHolderScroll",{x:this.holderScrollX,y:this.holderScrollY}))}else"drag"===t.direction&&(this.dragActive=t.active)},onDoublet)},onTap:function(t,e){var i;if(t&&this.$store.dispatch("pager/setLastTarget",t),!(this.isWorkspaceFrozen||"ready"!==this.status||this.isMini||null!==(i=e)&&void 0!==i&&null!==(i=i.target)&&void 0!==i&&null!==(i=i.classList)&&void 0!==i&&i.contains("note-article"))){e||(e={center:{x:this.isRTLBook?this.workspaceSize.width:0,y:0},target:null});var s,o=!1,r=this.getTappedZoomBlock(e);if(this.isMobile&&r.id){o=this.lastZoomBlockID!==r.id;var n=this.$refs.current[0].$el.getBoundingClientRect();s=this.getBlockRect(r.rect,n)}if(this.lastZoomBlockID=o?r.id:null,o){var a=1.5,h=40,l=2,c=this.containerSize.width-h*l,d=1*(.96*c/s.width).toFixed(2),u=this.spreadSizes.current.width-s.width-s.left;(s.left*d<h||u*d<h)&&(l=1,d=1*(.96*(c=this.containerSize.width-h*l)/s.width).toFixed(2)),this.updateSlideScroll(),this.scaleFactor=this.checkScaleFactorForZoom(d,this.zoomFactor,this.maxZoom),this.scaleFactor*this.zoomFactor<a&&(this.scaleFactor=a/this.zoomFactor)}else{var p=!(this.isFirstPage||this.isLastPage||!this.slidesCache.current[0].wide&&1===this.slidesCache.current.length)||this.isSingleMode||this.isContentCropMode?1:2,g=this.containerSize.width/this.spreadSizes.current.width*p*this.horizontalScale;this.scaleFactor=1!==this.zoomFactor||this.zoomPanel?Math.min(g,this.containerSize.height/this.spreadSizes.current.height):this.lastZoomFactor,this.horizontalScale=1}var f=no(this.spreadSizes.current,this.scaleFactor,{x:e.center.x-this.spreadSizes.current.left,y:e.center.y-this.spreadSizes.current.top});if(o){var m=s.left*this.scaleFactor,v=s.width*this.scaleFactor;f.left=-m+(this.containerSize.width-v)/2}f=ho(f,this.containerSize),this.scaleOrigin=lo(this.spreadSizes.current,f,this.scaleFactor),this.newBounds=f,this.status="animating",this.refreshScroll(),this.scaleFactor>1?this.$root.$emit("zoomed"):(this.scaleFactor<1||this.zoomPanel&&1===this.scaleFactor)&&this.$root.$emit("unzoomed")}},setZoom:function(t,e){if(!this.isWorkspaceFrozen&&"ready"===this.status){this.scaleFactor=t/this.zoomFactor,this.updateSlideScroll(!1);var i=e||{x:this.workspaceSize.width/2,y:this.workspaceSize.height/2},s={x:i.x-this.spreadSizes.current.left,y:i.y-this.spreadSizes.current.top},o=no(this.spreadSizes.current,this.scaleFactor,s);o=ho(o,this.containerSize),this.scaleOrigin=lo(this.spreadSizes.current,o,this.scaleFactor),this.newBounds=o,this.fastAnimation=!0,this.status="animating",this.refreshScroll()}},setScaleStart:function(){this.minScale=Math.min(this.containerSize.width/this.spreadSizes.current.width,this.containerSize.height/this.spreadSizes.current.height),this.maxScale=this.maxZoom/this.zoomFactor,this.scaleFactor=1,this.updateSlideScroll(!1),this.scaleOrigin={x:this.workspaceSize.width/2-this.slideScrollLeft,y:this.workspaceSize.height/2-this.slideScrollTop},this.status="scale"},setScale:function(t){if("scale"===this.status){var e=this.minScale+(this.maxScale-this.minScale)*t,i=no(this.spreadSizes.current,e,{x:this.workspaceSize.width/2-this.slideScrollLeft,y:this.workspaceSize.height/2-this.slideScrollTop});i=ho(i,this.containerSize),this.scaleOrigin=lo(this.spreadSizes.current,i,e);var s=Math.min(this.maxScale,Math.max(this.minScale,e));this.scaleFactor=this.checkScaleFactorForZoom(s,this.zoomFactor,this.maxZoom)}},setScaleFinish:function(){if("scale"===this.status){var t=no(this.spreadSizes.current,this.scaleFactor,this.scaleOrigin);t=ho(t,this.containerSize),this.zoomFactor=1*(this.zoomFactor*this.scaleFactor).toFixed(2),this.scaleFactor=1,this.slideScrollLeft=this.isZoomed?t.left:0,this.slideScrollTop=this.isZoomed?t.top:0,this.status="ready"}},onTransitionEnd:function(t){t&&"transform"===t.propertyName&&("animating"===this.status&&(this.fastAnimation=!1,this.lastZoomFactor=Math.max(this.zoomFactor,this.defaultZoomFactor),this.zoomFactor=1*(this.zoomFactor*this.scaleFactor).toFixed(2),this.slideScrollLeft=this.isZoomed?this.newBounds.left:0,this.slideScrollTop=this.isZoomed?this.newBounds.top:0,this.status="ready"),this.pendingSlide&&(this.updatePendingSlide(),this.animateSlides(this.pendingSlide,!1,!0),this.pendingSlide=null))},onPinchStart:function(t){this.isWorkspaceFrozen||"ready"!==this.status||this.isMini||(this.$store.dispatch("pager/setLastTarget","pinch-zoom"),this.minScale=Math.min(this.containerSize.width/this.spreadSizes.current.width,this.containerSize.height/this.spreadSizes.current.height),this.scaleFactor=1,this.pinchCenter=t.center,this.isZoomed?(this.updateSlideScroll(!1),this.scaleOrigin={x:t.center.x-this.slideScrollLeft,y:t.center.y-this.slideScrollTop}):this.scaleOrigin={x:t.center.x-this.spreadSizes.current.left,y:t.center.y-this.spreadSizes.current.top},this.status="pinch")},onPinchMove:function(t){if("pinch"===this.status){var e=this.minScale<t.scale?t.scale:this.minScale;if(this.scaleFactor=this.checkScaleFactorForZoom(e,this.zoomFactor,this.maxZoom),1!==this.scaleFactor){var i=no(this.spreadSizes.current,this.scaleFactor,this.scaleOrigin);i=ho(i,this.containerSize),this.scaleOrigin=lo(this.spreadSizes.current,i,this.scaleFactor)}}},onPinchFinish:function(){if("pinch"===this.status){var t=no(this.spreadSizes.current,this.scaleFactor,this.scaleOrigin);t=ho(t,this.containerSize),this.zoomFactor=1*(this.zoomFactor*this.scaleFactor).toFixed(2),this.scaleFactor=1,this.slideScrollLeft=this.isZoomed?t.left:0,this.slideScrollTop=this.isZoomed?t.top:0,this.status="ready",this.scaleFactor>1?this.$root.$emit("zoomed"):this.scaleFactor<1&&this.$root.$emit("unzoomed")}},changeZoom:function(t){switch(this.$store.dispatch("pager/setLastTarget","change-zoom"),t.action){case"setZoom":this.setZoom(t.zoomFactor);break;case"startScale":this.setScaleStart();break;case"changeScale":this.setScale(t.scalePosition);break;case"endScale":this.setScaleFinish();break;case"zoomIn":this.onTap();break;case"zoomOut":this.zoomOut()}},onPanStart:function(t){var e;if(!(this.blockPan||this.isFastSliding||"ready"!==this.status||t.srcEvent&&(t.srcEvent.metaKey||t.srcEvent.ctrlKey)||null!=t&&null!==(e=t.target)&&void 0!==e&&null!==(e=e.classList)&&void 0!==e&&e.contains("note-article"))){var i=document.elementFromPoint(t.center.x-t.deltaX,t.center.y-t.deltaY);i&&"select-text-block"===i.getAttribute("data-set")||(this.status="pan",this.$root.$emit("turnStart"))}},onPanMove:function(t){var e,i=this;if(!(this.blockPan||this.isFastSliding||"pan"!==this.status||null!=t&&null!==(e=t.target)&&void 0!==e&&null!==(e=e.classList)&&void 0!==e&&e.contains("note-article"))){var s=1;(t.deltaX<0&&this.isRightmostPage||t.deltaX>0&&this.isLeftmostPage)&&(s=.3),window.requestAnimationFrame((function(){i.delta=t.deltaX*s}))}},onPanEnd:function(t){var e;if(!this.blockPan&&(this.isFastSliding||"pan"===this.status||"sliding"===this.status)&&(null==t||null===(e=t.target)||void 0===e||null===(e=e.classList)||void 0===e||!e.contains("note-article"))){var i,s=Math.abs(t.overallVelocityX).toPrecision(2),o=Math.abs(t.deltaX),r=null;t.deltaX>0&&!this.isLeftmostPage&&(o>this.maxDelta/3||s>.5)?(i="left",r="left"):t.deltaX<0&&!this.isRightmostPage&&(o>this.maxDelta/3||s>.5)?(i="right",r="right"):(i="center",r=t.deltaY>0?"down":t.deltaY<0?"up":null),("sliding"===this.status||this.isFastSliding)&&(this.checkFastSlide(i,!1),this.pendingFastSlide)||("left"===i&&!this.isLeftmostPage&&(o>this.maxDelta/3||s>.5)?this.animateSlides("left"):"right"===i&&!this.isRightmostPage&&(o>this.maxDelta/3||s>.5)?this.animateSlides("right"):"sliding"!==this.status&&this.animateSlides("center"),r&&this.$root.$emit("swipe",{direction:r}))}},zoomIn:function(t){this.zoomFactor>1||this.onTap(t)},zoomOut:function(t,e){if(1!==this.zoomFactor){if(this.lastZoomFactor=Math.max(this.zoomFactor,this.defaultZoomFactor),t)return this.status="calculating",this.zoomFactor=1,this.refreshScroll(),this.slideScrollLeft=0,this.slideScrollTop=0,this.status="ready",void this.$root.$emit("unzoomed");this.onTap(e,{center:{x:0,y:0}})}},goRight:function(){this.scrollLock=!0,this.movePagerRight({target:"slide-swipe"}),this.$root.$emit("render:finish")},goLeft:function(){this.scrollLock=!0,this.movePagerLeft({target:"slide-swipe"}),this.$root.$emit("render:finish")},goFastRight:function(){this.checkFastSlide("right")},goFastLeft:function(){this.checkFastSlide("left")},canSlideInDirection:function(t){return t&&("left"===t&&!this.isLeftmostPage||"right"===t&&!this.isRightmostPage)},checkFastSlide:function(t){var e,i,s=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.canSlideInDirection(t)&&(this.isFastSliding&&(this.isSpreadFillerShown=!0),this.pendingFastSlide&&this.pendingFastSlide!==t&&(this.pendingFastSlide=null),"sliding"===this.status&&null!==(e=this.tween)&&void 0!==e&&e._isPlaying&&this.isPagerFrozen&&(this.isFastSliding=!0,o&&this.tween.stop()),!this.pendingFastSlide&&this.isFastSliding&&null!==(i=this.tween)&&void 0!==i&&i._isPlaying&&(this.tween._duration=200,this.pendingFastSlide=t),this.isFastSliding&&(clearTimeout(this.fastSlidingCancelTimeout),this.fastSlidingCancelTimeout=setTimeout((function(){s.isFastSliding=!1,s.isSpreadFillerShown=!1,s.$store.dispatch("workspace/unsetAnimationProgress")}),400)))},animateSlides:function(t){var e,i=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:this.delta};switch(t){case"left":e={x:this.maxDelta};break;case"right":e={x:-this.maxDelta};break;case"center":e={x:0}}o&&this.$root.$emit("turnStart"),this.status="sliding",this.$store.dispatch("pager/freeze",{target:"slide-book"}),this.tween=new(at().Tween)(r).to(e,s||this.isFastSliding?200:this.slideAnimationSpeed).easing(this.slideEasing).onUpda.x})).onComplete((function(){i.$root.$emit("turnStop"),i.$store.dispatch("pager/unfreeze",{target:"slide-book"}),o?i.$root.$emit("render:finish"):"left"===t?i.goLeft():"right"===t&&i.goRight(),i.slidesCacheUpdate(),i.status="ready","center"!==t&&i.$root.$emit("turned"),i.pendingFastSlide&&i.canSlideInDirection(i.pendingFastSlide)&&(i.animateSlides(i.pendingFastSlide),i.pendingFastSlide=null)})).onStop((function(){i.slidesCacheUpdate(),i.$store.dispatch("pager/unfreeze",{target:"slide-book"})})).start()},updateHorizontalScale:function(t,e){var i=0;(e[0].wide||2===e.length)&&i--,(t[0].wide||2===t.length)&&i++,this.horizontalScale=i>0?2:i<0?.5:1},convertToOutputSlides:function(t){var e=function(e){return{position:e,pages:t[e]||[]}};return[e("current")].concat([e("left")]).concat([e("right")]).concat([e("second-left")]).concat([e("second-right")]).filt>0}))},getSlidesWithAllPages:function(t,e){var i=[].concat.apply([],t.map((function(t){return t.pages}))),s=[].concat.apply([],e.mes}))).filter((function(t){return!i.some((function(e){return e.id===t.id}))}));return t.forEach((function(t){t.pages=t.pages.filt))}))})),s.length>0&&s.forEach((function(e){var i={position:"hidden page_"+e.id,pages:[e]};t=t.concat([i])})),t.soid}))},getNonHiddenSlides:function(t){return t.filt<0}))},updateOutputSlides:function(){var t=this,e=this.convertToOutputSlides(this.slidesCache);this.outputSlidesCache=this.getSlidesWithAllPages(e,this.outputSlidesCache),this.$nextTie)}))},slidesCacheUpdate:function(){this.slidesCache=this.slides,this.delta=0,this.updateOutputSlides()},updatePendingSlide:function(){this.pendingSlide&&this.replaceCachedSlide(this.pendingSlide,this.slides.current)},replaceCachedSl()},contentCreator:function(t){return Po["content-"+t.type]},refreshScroll:function(){var t=this;this.isInitialZoom||(this.cancelDragging(),this.$nextTick((function(){t.isZoomed&&"ready"===t.status?(t.initScrollComponent(t.dragActive),t.scrollComponent.refresh()):t.scrollComponent&&(t.slideScrollX=0,t.slideScrollY=0,t.$store.dispatch("text/setHolderScroll",{x:t.slideScrollX,y:t.slideScrollY}),t.scrollComponent.refresh(),t.scrollComponent.destroy(),delete t.scrollComponent)})))},initScrollComponent:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];1!==this.zoomFactor&&(this.scrollComponent?(this.slideScrollX=this.scrollComponent.x,this.slideScrollY=this.scrollComponent.y,this.scrollComponent.off("beforeScrollStart",this.setDragging),this.scrollComponent.off("scrollCancel",this.cancelDragging),this.scrollComponent.off("scroll",this.onScrollBegin),this.scrollComponent.off("scrollEnd",this.onScrollEnd),this.scrollComponent.destroy(),delete this.scrollComponent):(this.slideScrollX=this.containerSize.width<this.spreadSizes.current.width?Math.round(this.slideScrollLeft):0,this.slideScrollY=this.containerSize.height<this.spreadSizes.current.height?Math.round(this.slideScrollTop):0),this.scrollComponent=new co.ZP(this.$refs.wrapper[0],{mouseWheel:e,scrollbars:!1,freeScroll:!this.isMobile,scrollX:this.containerSize.width<this.spreadSizes.current.width,scrollY:this.containerSize.height<this.spreadSizes.current.height,probeType:this.isSafari?3:1,bindToWrapper:this.isMobile,bounce:!1,useTransition:!0,startX:this.slideScrollX,startY:this.slideScrollY,disablePointer:!0,disableTouch:!1,disableMouse:!e}),this.$store.dispatch("text/setHolderScroll",{x:this.slideScrollX,y:this.slideScrollY}),this.scrollComponent.on("beforeScrollStart",this.setDragging),this.scrollComponent.on("scrollCancel",this.cancelDragging),this.scrollComponent.on("scroll",this.onScrollBegin),this.scrollComponent.on("scrollEnd",this.onScrollEnd),this.scrollComponent.scroller.translater.hooks.on("beforeTranslate",(function(){t.$root.$emit("zoomScrollMove")})))},onScrollEnd:function(){this.cancelDragging(),this.slideScrollX=this.scrollComponent.x,this.slideScrollY=this.scrollComponent.y,this.$store.dispatch("text/setHolderScroll",{x:this.slideScrollX,y:this.slideScrollY})},onScrollBegin:function(){this.slideScrollX=this.scrollComponent.x,this.slideScrollY=this.scrollComponent.y,this.$store.dispatch("text/setHolderScroll",{x:this.slideScrollX,y:this.slideScrollY})},setDragg0)},cancelDragging:function(){this.dragging=!1},onWheel:function(t){if(!(!this.wheelScroll||this.isMini||Date.now()-this.lastWheelTime<200||t.target&&"note-article"===t.target.className)){if(t.ctrlKey||t.metaKey){if("ready"!==this.status)return;var e=-1*t.deltaY,i=this.getSuitableZoomFactor(this.zoomFactor,e,this.minZoom,this.maxZoom);e<0&&!i&&this.zoomOut(!1,"wheel-zoom"),i&&(this.$store.dispatch("pager/setLastTarget","wheel-zoom"),this.setZoom(i,{x:t.clientX,y:t.clientY}))}else{if(this.zoomFactor>1||this.scaleFactor>1)return;this.$store.state.notes.opened&&this.$store.dispatch("notes/setOpenedId",{id:null}),t.deltaY>0&&(this.$store.getters["pager/nextPageId"]||0===this.$store.getters["pager/nextPageId"])?(this.checkFastSlide(this.isRTLBook?"left":"right"),this.$store.dispatch("pager/goForward",{target:"wheel"})):t.deltaY<0&&(this.$store.getters["pager/prevPageId"]||0===this.$store.getters["pager/prevPageId"])&&(this.checkFastSlide(this.isRTLBook?"right":"left"),this.$store.dispatch("pager/goBackward",{target:"wheel"}))}this.lastWheelTime=Date.now()}},updateSlideScroll:function(t){t&&!this.isZoomed||(this.containerSize.width<this.spreadSizes.current.width&&(this.slideScrollLeft=this.slideScrollX),this.containerSize.height<this.spreadSizes.current.height&&(this.slideScrollTop=this.slideScrollY))},addNote:function(){var t=this.$store.getters["pager/state"],e=t.spreadMode,i=this.slides.current[0].id;e&&this.slides.current[1]&&this.isRtl===this.isLocaleRtl&&(i=this.slides.current[1].id);var s=e&&!(this.isLocaleRtl&&t.leftPage===t.rightPage),o=this.isSingleMode&&this.slides.current[0].wide&&"right"===this.slides.current[0].side,r=this.isSlideMode&&this.slides.current[0].wide,n=s||o;this.$store.dispatch("notes/addNote",{pageId:i,wide:r,wideRight:n})},updateNoteIcon:function(){if(!this.noteIconShown)return this.noteIconClass=[],void(this.noteIconStyle=null);var t={},e=[];if(this.isLocaleRtl){e.push("left");var i=this.spreadSizes.current.left-30;t.left=Math.max(i,0)+"px",i>0&&e.push("outside")}else{e.push("right");var s=this.spreadSizes.current.left+this.spreadSizes.current.width;t.left=Math.min(s,this.containerSize.width-30)+"px",s<this.containerSize.width-30&&e.push("outside")}t.top=this.spreadSizes.current.top+"px",this.noteIconStyle=t,this.noteIconClass=e}}},zo=$o,Co=(0,U.Z)(zo,mo,vo,!1,null,"abc0669c",null).exports,To=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showLogo?i("div",{staticClass:"logo-container",class:t.containerClasses,style:t.containerStyles},[i("a",{staticClass:"logo-link",style:t.logoStyles,attrs:{href:t.logoLinkUrl,target:t.target},on:{click:t.onClick}},[t.customLogoUrl?i("img",{staticClass:"logo-custom",style:t.imageStyles,attrs:{crossOrigin:t.crossOrigin,src:t.customLogoUrl}}):t.hasDefaultLogo?i("svgicon",{ref:"svgLogo",staticClass:"logo-svg",attrs:{focusable:"false",name:"made-with"}}):t._e()],1)]):t._e()},Mo=[],Io=(i(5284),{name:"Logo",data:function(){return{isReady:!1,crossOrigin:(0,d.Z)().getCrossOrigin(),originalWidth:0,originalHeight:0,globalPadding:10,minimalSize:100,maxWidthLimit:200,bottomMenu:null,customLogoUrl:null}},moun()},beforeDestroy:function(){this.destroyImgBlob()},computed:{target:function(){return this.$store.state.logo.target},logoLinkll},position:function(){return this.$store.state.logo.position},level:function(){return-1===this.position.indexOf("bottom")?"top":"bottom"},st"},miniState:function(){return this.$store.state.workspace.mini},rawCustomLogoUrl:function(){return this.$store.getters["logo/customLogoUrl"]},hasDefaultLogo:function(){return this.$store.getters["logo/hasDefaultLogo"]},svgLogoColor:function(){return this.allowOpaqueBar&&"menuRect"===this.optimalRect.name?this.$store.state.skin.styles["main-icon-color"]:this.$store.state.skin.styles[(this.top?"top":"bottom")+"-"+(this.left?"left":"right")+"-icon-color"]},allowOpaqueBar:function(){return this.$store.state.logo.allowOpaqueBar},showLogo:function(){return this.$store.getters["logo/showLogo"]},containerSize:function(){return this.$store.getters["workspace/containerSize"]},holderSize:function(){return this.$store.getters["workspace/holderSize"]},workspaceSize:function(){return this.$store.getters["workspace/size"]},bottomMenuEnabled:function(){return this.$store.getters["workspace/desktopBottomBarVisible"]},maxWidth:function(){return Math.max(this.maxWidthLimit,this.containerSize.width/(this.bookMode?4:6))},bookMode:function(){return"flip-book"===this.$store.state.workspace.bookComponent},sideRect:function(){var t={};return t.width=(this.containerSize.width-this.holderSize.width)/2-2*this.globalPadding,t.height=this.containerSize.height/2-2*this.globalPadding,t[this.side]=this.globalPadding,t[this.level]=this.globalPadding,t.name="sideRect",this.applySizeConstraints(t),t.scale=this.calculateScale(t),t},levelRect:function(){var t={};return t.width=this.containerSize.width/2-2*this.globalPadding,t.height=(this.containerSize.height-this.holderSize.height)/2-2*this.globalPadding,t[this.side]=this.globalPadding,t[this.level]=this.globalPadding,t.name="levelRect",this.applySizeConstraints(t),t.scale=this.calculateScale(t),t},menuLevelRect:function(){if("top"===this.level||this.opaqueBottom||!this.bottomMenu)return{scale:0};var t={},e=this.bottomMenu.getBoundingClientRect();return t.width=(this.containerSize.width-e.width)/2-2*this.globalPadding,t.height=(this.workspaceSize.height-this.holderSize.height)/2-2*this.globalPadding,t[this.side]=this.globalPadding,t[this.level]=this.globalPadding-e.height,t.lockWidth=!0,t.name="menuLevelRect",this.applySizeConstraints(t),t.scale=this.calculateScale(t),t},menuSideRect:function(){if("top"===this.level||this.opaqueBottom||!this.bottomMenu)return{scale:0};var t={},e=this.bottomMenu.getBoundingClientRect();t.width=(this.containerSize.width-Math.max(this.holderSize.width,e.width))/2-2*this.globalPadding,t.height=this.workspaceSize.height/2-2*this.globalPadding,t[this.side]=this.globalPadding,t[this.level]=this.globalPadding-e.height;var i=(this.containerSize.width-e.width)/2-2*this.globalPadding;return t.lockWidth=this.minimalSize>i,t.name="menuSideRect",this.applySizeConstraints(t),t.scale=this.calculateScale(t),t},menuRect:function(){if("top"===this.level||this.opaqueBottom&&!this.allowOpaqueBar||!this.bottomMenu)return{scale:0};var t={},e=this.bottomMenu.getBoundingClientRect();return t.width=(this.containerSize.width-e.width)/2-10,t.height=e.height-10,t[this.side]=10,t[this.level]=8-e.height,t.lockWidth=!0,t.lockHeight=!0,t.name="menuRect",this.applySizeConstraints(t),t.scale=this.calculateScale(t),t},slideRect:function(){if(this.bookMode)return{scale:0};var t={};return t.width=this.containerSize.width/2,t.height=this.containerSize.height/2,t[this.side]=this.globalPadding,t[this.level]=this.globalPadding,t.sizeOverride=!0,t.name="slideRect",this.applySizeConstraints(t),t.scale=this.calculateScale(t),t},slideLevelRect:function(){if(this.bookMode||"top"===this.level||this.opaqueBottom||!this.bottomMenu)return{scale:0};var t={},e=this.bottomMenu.getBoundingClientRect();return t.width=(this.containerSize.width-e.width)/2-2*this.globalPadding,t.height=this.containerSize.height/2,t[this.side]=this.globalPadding,t[this.level]=this.globalPadding-e.height,t.sizeOverride=!0,t.lockWidth=!0,t.name="slideLevelRect",this.applySizeConstraints(t),t.scale=this.calculateScale(t),t},optimalRect:function(){var t=[this.menuRect];return this.bookMode?t.push(this.menuLevelRect,this.menuSideRect,this.levelRect,this.sideRect):t.push(this.slideLevelRect,this.slideRect),t.redu:t}))},containerClase}},containerStyles:function(){if(!this.optimalRect.scale)return{display:"none"};var t={opacity:this.isReady?1:0,width:this.originalWidth*this.optimalRect.scale+"px",height:this.originalHeight*this.optimalRect.scale+"px"};return t.top=(0,_.o8)(this.optimalRect.top)?null:this.optimalRect.top+"px",t.bottom=(0,_.o8)(this.optimalRect.bottom)?null:this.optimalRect.bottom+"px",t.left=(0,_.o8)(this.optimalRect.left)?null:this.optimalRect.left+"px",t.right=(0,_.o8)(this.optimalRect.right)?null:this.optimalRect.right+"px","0px"!==t.width&&"0px"!==t.height||(t.display="none"),t},logoSty{}},imageStyles:function(){return{width:this.originalWidth*this.optimalRect.scale+"px",height:this.originalHeight*this.optimalRect.scale+"px"}},opaqueBottom:function(){return this.$store.state.skin&&this.$store.state.skin.styles&&(0,_.HD)(this.$store.state.skin.styles.classes)?-1!==this.$store.state.skin.styles.classes.indexOf("opaqueBottom"):null}},watch:{bottomMenuEnabled:function(){this.setBottomMenu()},rawCustomLogoUrl:"logoLoad",hasDefaultLogo:"logoLoad",side:"setSvgTransform",optimalRe)}},methods:{setBottomMenu:function(){this.bottomMenu=this.bottomMenuEnabled?document.getElementsByClassName("bottom-toolbar")[0]:null},logoLoad:function(){var t=this;this.isReady=!1,!this.hasDefaultLogo&&this.rawCustomLogoUrl?this.preloadImg(this.customLogoUrl):this.hasDefaultLogo&&(this.originalWidth=119,this.originalHeight=30,this.customLogoUrl=null,this.isReady=!0,this.$nextTi()})))},preloadImg:function(){var t=this;(0,Qe.Z)({url:this.rawCustomLogoUrl,callback:function(e){var i=document.createElement("img");i.onload=function(){t.originalWidth=i.naturalWidth,t.originalHeight=i.naturalHeight,t.destroyImgBlob(),t.customLogoUrl=e,t.isReady=!0},i.onerror=function(){},i.src=e,i.style.width="100%"}})},destroyImgBl)},calculateScale:function(t){if(0===this.originalWidth||0===this.originalHeight)return 0;if(t.width<0||t.height<0)return 0;var e=1,i=1;return this.originalHeight>t.height&&(e=t.height/this.originalHeight),this.originalWidth>t.width&&(i=t.width/this.originalWidth),Math.min(i,e,1)},applySizeConstraints:function(t){this.hasDefaultLogo?(t.width=t.lockWidth?t.width:this.originalWidth,t.height=t.lockHeight?t.height:this.originalHeight):(!t.lockWidth&&t.width<this.originalWidth&&t.width<this.minimalSize&&(t.width=Math.max(this.minimalSize,t.width),t.sizeOverride=!0),!t.lockHeight&&t.height<this.originalHeight&&t.height<this.minimalSize&&(t.height=Math.max(this.minimalSize,t.height),t.sizeOverride=!0),t.width=Math.min(this.maxWidth,t.width))},onClick:function(){var t=this.$store.state.pager.currentPage;this.$root.$emit("link",{type:"external",source:"logo",url:this.logoLinkUrl,target:this.target,pageId:t})},setSvgTransform:function(){var t;if(this.hasDefaultLogo){var e=null===(t=this.$refs.svgLogo)||void 0===t?void 0:t.$el.querySelector(".made-with");e&&("right"===this.side?e.setAttribute("transform","translate(62, 0)"):e.removeAttribute("transform"))}}},components:{}}),Lo=(0,U.Z)(Io,To,Mo,!1,null,"5bad4f5e",null).exports,Ro=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-arrows"},[t.isFirstPage?t._e():i("v-touch",t._g({staticClass:"nav-btn nav-left-arrow",attrs:{tag:"button",title:t.leftArrowTitle},nativeOn:{touchstart:function(t){t.preventDefault()},keydown:function(e){return t.leftButtonKeyHandler(e)}}},t.isEmbed?{tap:t.goLeft}:{tap:t.goLeft,swipeleft:function(e){return t.goRight(e,!0)},swiperight:function(e){return t.goLeft(e,!0)}}),[i("transition",{attrs:{name:"bars-fade"}},[t.show?i("svgicon",{staticClass:"arrow",attrs:{focusable:"false",name:"mobile-left",height:"100%"}}):t._e()],1)],1),t._v(" "),t.isLastPage?t._e():i("v-touch",t._g({staticClass:"nav-btn nav-right-arrow",attrs:{tag:"button",title:t.rightArrowTitle},nativeOn:{touchstart:function(t){t.preventDefault()},keyde)}}},t.isEmbed?{tap:t.goRight}:{tap:t.goRight,swipeleft:function(e){return t.goRight(e,!0)},swiperi0)}}),[i("transition",{attrs:{name:"bars-fade"}},[t.show?i("svgicon",{staticClass:"arrow",attrs:{focusable:"false",name:"mobile-right",height:"100%"}}):t._e()],1)],1)],1)},Eo=[],Oo=(i(5843),i(9117),{mixins:[p.Z],props:{show:Boolean},data:function(){return{timeout:0}},computed:{isRTLBook:function(){return this.$store.state.book.rightToLeft},isFirstPage:function(){var t=null===this.$store.getters["pager/prevNonStubPageId"],e=null===this.$store.getters["pager/nextPageId"];return this.isRTLBook?e:t},isLastPage:function(){var t=null===this.$store.getters["pager/nextPageId"],e=null===this.$store.getters["pager/prevNonStubPageId"];return this.isRTLBook?e:t},isEmbed:function(){return this.$store.state.workspace.isEmbed},leftArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.NEXT_PAGE_TIP"):this.$t("NavigationPanel.PREV_PAGE_TIP")},rightArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.PREV_PAGE_TIP"):this.$t("NavigationPanel.NEXT_PAGE_TIP")}},methods:{leftButtonKeyHandler:function(t){"Space"!==t.code&&"Enter"!==t.code||this.goLeft(t)},rightButtonKeyHandt)},goRight:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.timeout>Date.now()||(this.$root.$emit("nav:goRight"),this.$store.state.pager.freezed||(setTimeout((function(){e.movePagerRight({target:i?"nav-swipe":"nav-tap"})}),0),this.timeout=Date.now()+150))},goLeft:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.timeout>Date.now()||(this.$root.$emit("nav:goLeft"),this.$store.state.pager.freezed||(setTimeout((function(){e.movePagerLeft({target:i?"nav-swipe":"nav-tap"})}),0),this.timeout=Date.now()+150))}}}),Fo=Oo,Do=(0,U.Z)(Fo,Ro,Eo,!1,null,"713bdbfe",null).exports,_o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes},[t.isFirstPage||t.isLightboxShown?t._e():i("div",{staticClass:"button-block left"},[i("button",{staticClass:"nav-btn next-btn nav-left-arrow",attrs:{tabindex:"0",title:t.leftArrowTitle},on:{click:function(e){return e.preventDefault(),t.goLeft(e)}}},[i("transition",{attrs:{name:"bars-fade"}},[t.show?i("svgicon",{staticClass:"arrow",attrs:{focusable:"false",name:"mobile-left",height:"100%"}}):t._e()],1)],1),t._v(" "),i("button",{staticClass:"nav-btn last-btn nav-first-left-arrow",attrs:{tabindex:"0",title:t.leftMostArrowTitle},on:{click:function(e){return e.preventDefault(),t.leftToTheLast(e)}}},[t.show?i("svgicon",{staticClass:"arrow",attrs:{focusable:"false",name:"book-first",height:"100%"}}):t._e()],1)]),t._v(" "),t.isLastPage||t.isLightboxShown?t._e():i("div",{staticClass:"button-block right"},[i("button",{staticClass:"nav-btn next-btn nav-right-arrow",attrs:{tabindex:"0",title:t.rightArrowTitle},on:{click:function(e){return e.preventDefault(),t.goRight(e)}}},[i("transition",{attrs:{name:"bars-fade"}},[t.show?i("svgicon",{staticClass:"arrow",attrs:{focusable:"false",name:"mobile-right",height:"100%"}}):t._e()],1)],1),t._v(" "),i("button",{staticClass:"nav-btn last-btn nav-last-right-arrow",attrs:{tabindex:"0",title:t.rightMostArrowTitle},on:{cle)}}},[t.show?i("svgicon",{staticClass:"arrow",attrs:{focusable:"false",name:"book-last",height:"100%"}}):t._e()],1)])])},Wo=[],Bo={mixins:[p.Z],props:{show:Boolean},data:function(){return{timeout:0,classes:{"nav-arrows":!0,start:!0}}},mounted:function(){var t=this;setTimeo!1}),8e3)},computed:{isLightboxShown:function(){return this.$store.getters["lightbox/isShown"]},isRTLBook:function(){return this.$store.state.book.rightToLeft},isFirstPage:function(){var t=null===this.$store.getters["pager/prevNonStubPageId"],e=null===this.$store.getters["pager/nextPageId"];return this.isRTLBook?e:t},isLastPage:function(){var t=null===this.$store.getters["pager/nextPageId"],e=null===this.$store.getters["pager/prevNonStubPageId"];return this.isRTLBook?e:t},isEmbed:function(){return this.$store.state.workspace.isEmbed},leftArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.NEXT_PAGE_TIP"):this.$t("NavigationPanel.PREV_PAGE_TIP")},rightArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.PREV_PAGE_TIP"):this.$t("NavigationPanel.NEXT_PAGE_TIP")},leftMostArrowTitle:function(){return this.isRTLBook?this.$t("NavigationPanel.LAST_PAGE_TIP"):this.$t("NavigationPanel.FIRST_PAGE_TIP")},rightMostArrowTi")},animationInProgress:function(){return this.$store.state.workspace.animationInProgress}},watch:{animationInProgr!1}},methods:{goRight:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.timeout>Date.now()||(this.$root.$emit("nav:goRight"),this.movePagerRight({target:e?"nav-swipe":"nav-tap"}),this.timeout=Date.now()+150)},goLeft:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.timeout>Date.now()||(this.$root.$emit("nav:goLeft"),this.movePagerLeft({target:e?"nav-swipe":"nav-tap"}),this.timeout=Date.now()+150)},rightToTheLast:function(){this.timeout>Date.now()||(this.movePagerRightmost({navTarget:!0}),this.timeout=Date.now()+150)},leftToTheLast:function(){this.timeout>Date.now()||(this.movePagerLeftmost({navTarget:!0}),this.timeout=Date.now()+150)}}},Ao=Bo,Ho=(0,U.Z)(Ao,_o,Wo,!1,null,"b2596fc6",null).exports,No=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"zoom-panel",class:t.panelClass,style:t.panelStyle,attrs:{id:"zoom-panel",dir:t.dir}},[i("span",{staticClass:"zoom-panel-caption minus",attrs:{title:t.$t("ZoomBar.ZOOM_OUT_TIP")},on:{click:t.zoomOut}},[t._v("–")]),t._v(" "),i("div",{ref:"zoomLine",staticClass:"zoom-panel-line",on:{click:t.lineClick}},[i("v-touch",{ref:"zoomSlider",staticClass:"zoom-panel-slider",style:t.sliderStyle,attrs:{id:"zoom-slider","pan-options":{direction:"horizontal",threshold:1}},on:{panstart:t.onPanStart,panmove:t.onPanMove,panend:t.onPanEnd,pancancel:t.onPanEnd}})],1),t._v(" "),i("span",{staticClass:"zoom-panel-caption plus",attrs:{title:t.$t("ZoomBar.ZOOM_IN_TIP")},on:{click:t.zoomIn}},[t._v("+")])])},Zo=[],Vo=(i(169),i(2209),{name:"ZoomPanel":!1}},mounted:function(){window.addEventListener("keydown",this.keyDownHandler),this.$root.$on("unzoomed",this.hide),this.updateScalePosition(this.zoomFactor)},beforeDeide)},watch:{zoomFactor:"updateScalePosition",minZoom:function(t){this.zoomFactor>t?this.scalePosition=1*((this.zoomFactor-t)/(this.maxZoom-t)).toFixed(2):this.scalePosition=0},scalePos2e3)},pagery=!1},visible:function(t){this.$store.dispatch("workspace/setZoomPanel",t)},zoom=!1)}},computed:{zoomFctor},isRtl:function(){return this.$store.getters["i18n/isLocaleRtl"]ltr"},pagerState:function(){return[this.$store.state.pager.currentPage]},vility},zoomPanel:function(){return this.$store.state.workspace.zoomPanel},minZoom:function(){if("slide-book"===this.$store.state.workspace.bookComponent)return 1;var t=this.isHardcover&&(this.isFirstPage||this.isLastPage)?1.03:1,e=this.isSingleMode?1:2;return Math.min(this.$store.state.workspace.containerSize.height/(this.$store.state.pages.size.height*t/this.$store.state.pages.size.zoomFactor),this.$store.state.workspace.containerSize.width/(this.$store.state.pages.size.width*t*e/this.$store.state.pages.size.zoomFactor))},isFirstPage:function(){return this.$store.getters["pager/isFirstSpread"]},isLastPage:function(){return this.$store.getters["pager/isLastSpread"]},isSingleMode:function(){return"single"===this.$store.getters["pager/mode"]},maxZoom:function(){return this.$store.state.workspace.maxZoom},sliderStyle:function(){var t={},e=6;return this.isRtl?t.right=Math.round((this.lineWidth-e)*this.scalePosition)+"px":t.left=Math.round((this.lineWidth-e)*this.scalePosition)+"px",t},paneling}},panelen"}},shouldBlockHotkeys:function(){return null!==this.$store.state.popup.opened||null!==this.$store.state.sidebar.opened||this.$store.state.workspace.modalOpened||this.$store.getters["lightbox/isShown"]}},methods:{zoomOut:function(){if(!this.$store.state.workspace.animationInProgress&&(!1!==this.forceVisibility||0!==this.scalePosition)){if(this.scalePosition>.1)this.scalePosition-=.1;else{if(!0===this.forceVisibility&&0===this.scalePosition)return this.forceVisibility=!1,void this.$root.$emit("zoomPanel",{action:"zoomOut"});this.forceVisibility=!0,this.scalePosition=0}this.$root.$emit("zoomPanel",{action:"setZoom",zoomFactor:1*(this.scalePosition*(this.maxZoom-this.minZoom)+this.minZoom).toFixed(2),fast:!0})}},zoomOutFull:function(){this.$store.state.workspace.animationInProgress||(this.forceVisibility=!1,this.$root.$emit("zoomPanel",{action:"zoomOut"}))},zoomIn:function(){this.$store.state.workspace.animationInProgress||(0!==this.scalePosition||this.visible?(this.scalePosition<0&&(this.scalePosition=0),this.scalePosition<.9?this.scalePosition+=.1:this.scalePosition=1,this.$root.$emit("zoomPanel",{action:"setZoom",zoomFactor:1*(this.scalePosition*(this.maxZoom-this.minZoom)+this.minZoom).toFixed(2),fast:!0})):this.$root.$emit("zoomPanel",{action:"zoomIn"}))},lineClick:function(t){var e=this;if(!this.$store.state.workspace.animationInProgress){var i=this.$refs.zoomLine.getBoundingClientRect();this.isRtl?this.scalePosition=(this.lineWidth-t.clientX+i.left)/this.lineWidth:this.scalePosition=(t.clientX-i.left)/this.lineWidth,this.scalePosition<=0&&(this.scalePosition=0),0===this.scalePosition&&(this.forceVisibility=!0),this.$nextTick((function(){e.$root.$emit("zoomPanel",{action:"setZoom",zoomFactor:1*(e.scalePosition*(e.maxZoom-e.minZoom)+e.minZoom).toFixed(2),fast:!1})}))}},onPanStart:function(){this.savedScalePosition=this.scalePosition,this.isGrabbing=!0,this.$root.$emit("zoomPanel",{action:"startScale"})},onPanMove:function(t){var e=1*(this.isRtl?-t.deltaX/this.lineWidth:t.deltaX/this.lineWidth).toFixed(2);this.scalePosition=this.savedScalePosition+e,this.scalePosition>1&&(this.scalePosition=1),this.scalePosition<=0&&(this.scalePosition=0);var i=this.scalePosition/this.savedScalePosition;this.$root.$emit("zoomPanel",{action:"changeScale",scalePosition:this.scalePosition,scaleRatio:i})},onPanEnd:function(t){this.isGrabbing=!1;var e=1*(this.isRtl?-t.deltaX/this.lineWidth:t.deltaX/this.lineWidth).toFixed(2);this.scalePosition+=e,this.scalePosition>1&&(this.scalePosition=1),this.scalePosition<=0&&(this.scalePosition=0),0===this.scalePosition?this.forceVisibility=!0:this.forceVisibility=!1,this.$root.$emit("zoomPanel",{action:"endScale",zoomFactor:this.scalePosition*(this.maxZoom-this.minZoom)+this.minZoom})},keyDownHandler:function(t){if(((0,_.Ft)(t.target)||(0,_.o8)(t.target)||"input"!==t.target.tagName.toLowerCase()&&"textarea"!==t.target.tagName.toLowerCase()&&"select"!==t.target.tagName.toLowerCase()&&"option"!==t.target.tagName.toLowerCase())&&!this.shouldBlockHotkeys)switch(t.code){case"Equal":case"NumpadAdd":(t.metaKey||t.ctrlKey)&&(t.preventDefault(),this.zoomIn());break;case"Minus":case"NumpadSubtract":(t.metaKey||t.ctrlKey)&&(t.preventDefault(),this.zoomOut());break;case"Digit0":(t.metaKey||t.ctrlKey)&&this.zoomOutFull()}},!1)},updateScalePosition:function(t){t>this.minZoom?this.scalePosition=1*((t-this.minZoom)/(this.maxZoom-this.minZoom)).toFixed(2):this.scalePosition=0}}}),jo=(0,U.Z)(Vo,No,Zo,!1,null,"9d1e0d5e",null).exports,Uo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"note-editor"},[t.showRect?i("div",{ref:"rect",class:t.rectClass,style:t.rectStyle,attrs:{role:"dialog"}},[i("div",{staticClass:"note-body"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textAreaValue,expression:"textAreaValue"}],ref:"text",staticClass:"note-article",attrs:{role:"textbox",dir:t.textareaDir,maxlength:"500",placeholder:t.placeholderText,tabindex:"0"},domProps:{value:t.textAreaValue},on:{focus:t.focusTextArea,keydown:function(e){return(e.type.indexOf("key")||13===e.keyCode)&&e.ctrlKey?t.setViewState(e):null},lue)}}})]),t._v(" "),i("div",{staticClass:"note-footer",attrs:{"aria-hidden":"true"}},[i("div",{class:t.colorSetClass},[i("div",{staticClass:"note-border-color green",on:{click:function(e){return t.setColor("green")}}},[i("div",{staticClass:"note-color"})]),t._v(" "),i("div",{staticClass:"note-border-color blue",on:{click:function(e){return t.setColor("blue")}}},[i("div",{staticClass:"note-color"})]),t._v(" "),i("div",{staticClass:"note-border-color violet",on:{click:function(e){return t.setColor("violet")}}},[i("div",{staticClass:"note-color"})]),t._v(" "),i("div",{staticClass:"note-border-color red",on:{click:function(e){return t.setColor("red")}}},[i("div",{staticClass:"note-color"})]),t._v(" "),i("div",{staticClass:"note-border-color orange",on:{click:function(e){return t.setColor("orange")}}},[i("div",{staticClass:"note-color"})]),t._v(" "),i("div",{staticClass:"note-border-color gray",on:{click:function(e){return t.setColor("gray")}}},[i("div",{staticClass:"note-color"})])]),t._v(" "),i("div",{staticClass:"note-time"},[t._v(t._s(t.formattedTime))]),t._v(" "),i("span",{staticClass:"icon icon-trash-can note-button note-delete-button",attrs:{title:t.deleteTip},on:{click:t.deleteNoteCheck}},[i("svgicon",{attrs:{focusable:"false",name:"trash-can"}})],1)])]):t._e(),t._v(" "),t.deleteDialog?i("div",{ref:"deleteDialog",class:t.rectClass,style:t.rectStyle,attrs:{role:"dialog"},on:{l(e)}}},[i("div",{staticClass:"note-delete-dialog",attrs:{dir:t.dir,"aria-hidden":"true"}},[i("div",{staticClass:"note-delete-dialog-text"},[i("div",{staticClass:"note-delete-dialog-text-flex"},[i("span",[t._v(t._s(t.dialogDeleteText))])])]),t._v(" "),i("div",{staticClass:"note-delete-dialog-buttons"},[i("button",{ref:"cancelButton",staticClass:"note-delete-dialog-cancel",attrs:{tabindex:"0"},on:{click:t.deleteDialogCancel}},[t._v("\n                    "+t._s(t.cancelButton)+"\n                ")]),t._v(" "),i("button",{staticClass:"note-delete-dialog-confirm",attrs:{tabindex:"0"},on:{or")}}},[t._v("\n                    "+t._s(t.deleteButton)+"\n                ")])])])]):t._e()])},Go=[],Xo=(i(6062),i(6382)),Yo=i.n(Xo),qo=24,Ko=4,Qo=1.03,Jo={name:"NoteEditor",data:function(){return{rectLeft:-115,rectTop:4,rectHeight:125,rectWidth:230,rectPadding:10,rectState:"view",deleteDialog:!1,textAreaValue:""}},computed:{textareaDir:function(){if(""!==this.textAreaValue){var t=Yo().getDirection(this.textAreaValue);return t&&"ltr"!==t?"rtl":"ltr"}return this.dir},isOteId},isMovingNote:function(){return this.$store.state.notes.isMoving},shopace},currentNoteId:function(){return this.$store.state.notes.opened},currentNoteId)},oneCurrentPage:function(){var t=this.pagerState.singleMode,e=this.pagerState.slideMode,i=this.pagerState.isFirstSpread||this.pagerState.isLastSpread;return t||e||i},rightPageOffset:function(){var t=this.pagerState.wide;return!this.oneCurrentPage&&!t&&this.rtl!==(this.pagerState.rightPage===this.currentNoteData.page)?this.pageSize.width:0},singleModeRightPageCorrectionX:function(){var t=this.pagerState.singleMode,e=this.pagerState.wide,i="right"===this.pagerState.pageSide;return t&&e&&i?-this.pageSize.width:0},leftZoomOffset:function(){return this.containerSize.width>this.pageSize.width&&this.oneCurrentPage?(this.containerSize.width-this.pageSize.width)/2+this.leftHardcoverZoomOffset:0},topZoomOffset:function(){return this.containerSize.height>this.pageSize.height?(this.containerSize.height-this.pageSize.height)/2:0},topHardcoverZoomOffset:function(){return this.pagerState.hardcover?-this.pageSize.height*(Qo-1)/2:0},leftHardcoverZoomOffset:function(){if(!this.pagerState.hardcover)return 0;var t=this.pageSize.width*(Qo-1)/2;return this.isRtlOrientation?t:-t},isZoomed:function(){return 1!==this.$store.state.pages.size.zoomFactor},hardcoverTopPadding:function(){var t=Math.round(this.pageSize.height*Qo);return t%2!=0&&(t+=1),this.pagerState.hardcover?Math.round((t-this.pageSize.height)/2):0},isRtlOrientation:function(){return this.pagerState.isFirstSpread&&this.rtl||this.pagerState.isLastSpread&&!this.rtl},hardcoverLeftPadding:function(){return this.pagerState.hardcover&&this.isRtlOrientation?this.pageSize.width*(1-Qo):0},currentNotePosition:function(){var t,e;if(this.isZoomed){var i="[data-zoom-wrapper]",s=new window.WebKitCSSMatrix(window.getComputedStyle(this.$root.$el.querySelector(i)).transform);t=s.m41+this.leftZoomOffset,e=s.m42+this.topZoomOffset+this.topHardcoverZoomOffset}else t=this.holderSize.left,e=this.holderSize.top-this.hardcoverTopPadding;return{left:t+this.rightPageOffset+this.singleModeRightPageCorrectionX+this.hardcoverLeftPadding+Math.round(this.currentNoteData.pX*this.scale.w),top:Math.max(e+Math.round(this.currentNoteData.pY*this.scale.h),e+qo+Ko)}},pagerState:function(){return this.$store.getters["pager/state"]},slideComponent:function(){return"slide-book"===this.$store.state.workspace.bookComponent},isContentCroCrop},pageSize:function(){if(this.slideComponent){var t=this.pagerState.currentPage;return this.$store.getters["pages/currentSize"](t)}return this.$store.getters["pages/size"]},holderSize:function(){return this.$store.getters["workspace/holderSize"]},containerSize:function(){return this.$store.getters["workspace/containerSize"]},enoughSpace:function(){return this.containerSize.width>=this.rectWidth+2*this.rectPadding&&this.containerSize.height>=this.rectHeight+2*this.rectPadding},scale:function(){var t=this.slideComponent&&this.pagerState.wide;return{w:this.pageSize.width*(this.pagerState.hardcover?Qo:1)/this.$store.state.book.bookSize.width/(t?2:1),h:this.pageSize.height*(this.pagerState.hardcover?Qo:1)/this.$store.state.book.bookSize.height}},rectStyle:function(){return{top:this.currentNotePosition.top+this.rectTop+"px",left:this.currentNotePosition.left+this.rectLeft+"px"}},rectate]},colorSetlor]},formattedTime:function(){var t=new Date(Date.now()),e=new Date(this.currentNoteData.date),i=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return t.getDay()===e.getDay()&&t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()||(i=e.toLocaleDateString()+", "+i),i},dir:function(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"},rtl:function(){return this.$store.state.book.rightToLeft},placeholderText:function(){return this.$i18n.t("Notes.PLACEHOLDER")},dialogDeleteText:function(){return this.$i18n.t("Notes.DIALOG_DELETE_TEXT")},deleteTip:function(){return this.$i18n.t("Notes.DELETE_TIP")},deleteButton:function(){return this.$i18n.t("AlertWindow.BUTTON_DELETE")},cancelButton:function(){return this.$i18n.t("AlertWindow.BUTTON_CANCEL")},isFrozenOrNotReady:function(){return this.$store.state.workspace.freezed||"ready"!==this.$store.state.workspace.status||this.$store.state.workspace.isResizing||this.$store.state.pager.freezed}},watch:{isOpened:function(t){var e,i=this;t&&(null!==(e=this.currentNoteData)&&void 0!==e&&e.new&&(this.rectState="edit"),this.showEditor(),setTimus()}),100))},isMovingNote:function(t){t?this.deleteDialog=!1:this.updateEditorParams()},currentNoteId:function(t,e){!t&&e&&this.hideEditor(e)},size:function(){this.isOpened&&this.updateEditorParams()},containerSize:function(){this.updateEditorParams()},currentNott:""}},mounted:function(){this.$root.$on("contextMenu:deleteNote",this.onDelete),this.$root.$on("contextMenu:editNote",this.onEdit),this.$root.$on("note:deleteDialog",this.onDeleteDialog),this.$root.$on("turnStart",this.onTurnStart),this.hideEditorBound=this.hideEditor.bind(this.currentNoteId,this),this.$root.$on("zoomScrollMove",this.hideEditorBound),this.updateEditorParams(),this.isOpened&&this.showEditor(),this.parentEl=this.$el.parentElement},beforeDestroy:function(){this.$root.$off("contextMenu:deleteNote",this.onDelete),this.$root.$off("contextMenu:editNote",this.onEdit),this.$root.$off("note:deleteDialog",this.onDeleteDialog),this.$root.$off("zoomScrollMove",this.hideEditorBound),this.$root.$off("turnStart",this.onTurnStart),document.removeEventListener("keydown",this.checkKeydown),this.removeEditorEventListeners(),this.deleteDialog=!1},methods:{showEditor:function(){this.updateEditorParams(),this.$store.dispatch("notes/setOpenedId",{id:this.currentNoteId}),this.$store.dispatch("notes/setActiveItemById",this.currentNoteId),document.addEventListener("mousedown",this.hideEditorClick,!0),document.addEventListener("keydown",this.checkKeydown)},hideEditor:function(t){this.deleteDialog=!1,document.activeElement===this.$refs.text&&this.$refs.text.blur(),this.saveText(t),this.$store.dispatch("notes/setOpenedId",{id:null}),this.$store.dispatch("workspace/setHighlightTimeout",Date.now()+300),document.removeEventListener("keydown",this.checkKeydown),this.removeEditorEventListeners(),this.rectState="view"},updateEditorParams:function(){if(this.isOpened){var t=this.containerSize.width-this.currentNotePosition.left;this.currentNotePosition.left<this.rectWidth/2+this.rectPadding?this.rectLeft=-this.currentNotePosition.left+this.rectPadding:t<this.rectWidth/2+this.rectPadding?this.rectLeft=t-this.rectWidth-this.rectPadding:this.rectLeft=-this.rectWidth/2;var e=this.containerSize.height-this.currentNotePosition.top>this.rectHeight+2*Ko,i=this.currentNotePosition.top>this.rectHeight+qo+2*Ko;if(e)this.rectTop=Ko;else if(i)this.rectTop=-(this.rectHeight+qo+2*Ko);else{this.rectTop=-(this.rectHeight+qo+2*Ko)/2,this.rectLeft=-this.rectWidth/2;var s=this.rectWidth/2+qo+Ko,o=this.currentNotePosition.left>this.rectWidth+this.rectPadding,r=t-qo>this.rectWidth+this.rectPadding;if(o||r)this.rectLeft+="rtl"===this.dir&&o||!r?-s:s;else{var n=this.$el.getBoundingClientRect().right+this.rectWidth+this.rectPadding>this.$store.state.workspace.size.width;this.rectLeft+=n?-s:s}}}},hideEditorClick:function(t){for(var e=(0,l.iZ)(t.target),i=0,s=e.length;i<s;i++){if(e[i]===this.$refs.rect||e[i]===this.$refs.deleteDialog)return void t.stopPropagation();if(e[i].classList.contains("publication-note"))return void this.saveText(this.currentNoteId)}this.hideEditor(this.currentNoteId)},saveText:function(t){var e=this.$store.getters["notes/noteByID"](t);e&&this.$refs.text&&e.text!==this.$refs.text.value&&this.$store.dispatch("notes/changeText",{id:t,text:this.$refs.text.value})},setColor:function(t){this.currentNoteData.color!==t&&this.$store.dispatch("notes/changeColor",{id:this.currentNoteId,color:t})},focusTexown)},deleteNoteCheck:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editor";""===this.currentNoteData.text?this.deleteNote(t,i):(this.deleteDialog=!0,this.isOpened||document.addEventListener("mousedown",this.deleteDialogCancel),this.$nextus()})))},onDeleteDialog:function(t,e){this.currentNoteId!==t&&this.$store.dispatch("notes/setOpenedId",{id:t}),this.deleteNoteCheck(null,e)},checkKeydown:function(t){if("Escape"===t.code&&this.$store.dispatch("notes/setOpenedId",{id:null}),"view"===this.rectState&&t.preventDefault(),"Backspace"===t.code||"Delete"===t.code){if(this.$refs.text===document.activeElement)return;this.deleteNoteCheck(t,"hotkey")}},removeEditorEventList,!0)},deleteNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;document.removeEventListener("keydown",this.checkKeydown),this.removeEditorEventListeners(),this.$store.dispatch("notes/deleteNote",{id:this.currentNoteId,initiator:e}),this.$store.dispatch("notes/setOpenedId",{id:null}),this.deleteDialogCancel()},deleteDialogCancel:function(){var t=this;this.isOpened&&document.addEventListener("keydown",this.checkKeydown),document.removeEventListener("mousedown",this.deleteDialogCancel),this.deleteDialog=!1,this.$nextTick((function(){t.$root.$emit("note:closeDeleteDialog")}))},setViewState:function(t){this.rectState="view",t.target.blur()},forceus()},onDelete:function(t){this.currentNoteId!==t&&this.$store.dispatch("notes/setOpenedId",{id:t}),this.deleteNoteCheck(null,"context-menu")},o:t})},onTurneId)}}},tr=Jo,er=(0,U.Z)(tr,Uo,Go,!1,null,"bf390c46",null).exports;i(5903);function ir(){return ir=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},ir.apply(this,arguments)}var sr={mixins:[p.Z],data:function(){return{containerSize:{width:0,height:0},bookSize:{width:0,height:0},miniFullScreen:!1,ctrFade:"no-fade"}},props:{size:{required:!1},wsToggleFullscreen:{type:Function,den(){}}},components:{slideNavButtons:Ho,flipBook:fo,slideBook:Co,navButtons:Do,zoomPanel:jo,logo:Lo,noteEditor:er},computed:{inspectorMode:function(){return this.$store.state.workspace.inspectorMode},version:function(){return this.$store.getters["info/version"]},layout:function(){return this.$store.state.workspace.layout},bookScalSize},originalBookSize:function(){return{width:this.$store.state.book.bookSize.width*(this.isSingleMode?1:2),height:1*this.$store.state.book.bookSize.height,zoomFactor:this.$store.state.book.bookSize.zoomFactor}},showPrevSubstrate:function(){return this.isRTLBook?!this.$store.getters["pager/isLastSpread"]:!this.$store.getters["pager/isFirstSpread"]},showNextSubstrate:function(){return this.isRTLBook?!this.$store.getters["pager/isFirstSpread"]:!this.$store.getters["pager/isLastSpread"]},isHardcover:function(){return this.$store.getters["book/hasHardcover"]},hasThickness:function(){return this.$store.state.book.thickness},isSingleMode:function(){return"single"===this.$store.getters["pager/mode"]},isZoomed:function(){return 1!==this.$store.state.pages.size.zoomFactor},isScaled:function(){return!!this.$refs.bookComponent&&this.$refs.bookComponent.scaleFactor<1},showSimpleArrows:function(){return!("flip-book"===this.currentBookComponent&&"html"===this.version&&(!this.isZoomed||this.isScaled)||this.showSmartArrows)},showSmartAnent},isRTLBook:function(){return this.$store.state.book.rightToLeft},bookComponent:function(){return"mobile-old"===this.version?"slide-book":this.$store.state.workspace.components.book.flip?"flip-book":"slide-book"},currentBookComponent:function(){return this.$store.state.workspace.bookComponent},isLightboxShown:function(){return this.$store.getters["lightbox/isShown"]},containerClass:function(){return{animation:"ready"!==this.$store.state.workspace.status&&!this.$store.state.pager.zoomMode&&!this.$store.state.workspace.zoomPanel,"arrow-attract-left":"left"===this.arrowAttract&&!this.isLightboxShown,"arrow-attract-right":"right"===this.arrowAttract&&!this.isLightboxShown}},miniState:function(){return this.$store.state.workspace.mini},clickToReaAD")},pagerState:function(){return this.$store.getters["pager/state"]},clickToReadClass:function(){return{clickToRead:!0,hideTop:this.miniTopPosition}},miniClickToReadion}},arrowAttract:function(){var t=this.$store.getters["workspace/callToNavigation"];return"arrow"===t.type&&t.side},miniTopPosition:function(){return this.$store.getters["logo/showLogo"]&&"bottom-right"===this.$store.state.logo.position},pagesCount:function(){return this.$store.getters["pages/pagesCount"]},hasnt>0},substrateStyle:function(){var t,e;if(this.$store.getters["pager/state"].slideMode)e="100%",t=0;else{var i=this.$store.state.workspace.holderSize.top,s=this.$store.getters["pages/size"].height,o=this.$store.state.workspace.containerSize.height;t=1===this.$store.state.book.bookSize.zoomFactor?i+"px":o>=s?Math.round(i)+"px":0,e=Math.min(s,o)+"px"}return{display:"block",height:e,top:t,cursor:this.isFrozen?"inherit":"pointer","z-index":this.isFrozen&&"flip-book"===this.bookComponent?2e5:"auto"}},logoKey:function(){return this.$store.getters["logo/logoKey"]},renderLogo:function(){return this.$store.getters["logo/renderLogo"]},isMobile:function(){return this.$store.getters["workspace/isMobile"]},isMobion"]},isFrozen:function(){return this.$store.getters["workspace/isFrozen"]||this.$store.getters["pager/isFrozen"]}},methods:{documentOnMouseUp:function(){clearTimeout(this.inspectorModeTimeoutId)},documentOnMouseDown:function(t){var e=this;t.shiftKey&&t.altKey&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.inspectorModeTimeoutId=setTimode)}),1e3))},fitBook:function(t,e){var i=ir({},e),s=this.$store.state.book.bookSize,o=this.bookScaleSize,r=this.pagesCount,n=(0,Ce.Tj)({width:2*s.width,height:s.height},i),a=Te(r,r,n,.1*n.width),h=(o||100)/100,l=28,c=34,d=this.isSingleMode?2*c:2*l,u=10;"desktop"===this.layout?(this.hasThickness&&(i.width-=a),i.width-=d):this.isMobile&&(!this.isSingleMode&&this.hasThickness&&(i.width-=a),i.height-=u);var p=(0,Ce.Tj)(t,i);if(this.isHardcover){var g=this.isSingleMode?1.04:1.03;p.width=p.width/g,p.height=p.height/g}var f=p.height/p.width;return p.width=Math.floor(p.width*h),p.width=p.width%2==0?p.width:p.width+1,p.height=Math.floor(f*p.width),{width:p.width,height:p.height}},resize:function(t){var e=window.getComputedStyle(this.$el),i={left:1*e.getPropertyValue("margin-left").split("px")[0],right:1*e.getPropertyValue("margin-right").split("px")[0],top:1*e.getPropertyValue("margin-top").split("px")[0],bottom:1*e.getPropertyValue("margin-bottom").split("px")[0]};this.containerSize={width:this.size.width-i.left-i.right,height:this.size.height-i.top-i.bottom,top:this.size.top+i.top,left:this.size.left+i.left},this.$store.dispatch("workspace/setContainerSize",this.containerSize);var s=this.fitBook(this.originalBookSize,this.containerSize),o=Math.round(s.width/(this.isSingleMode?1:2)),r=Math.round(s.height);r=r%2==0?r:r+1,this.bookSize={width:o,height:r,zoomFactor:this.originalBookSize.zoomFactor}},goToRightPage:function(){var t=this;this.$store.state.pager.freezed||setTimeout((function(){t.movePagerRight({target:"free-space-tap"})}),0)},goToLeftPage:function(){var t=this;this.$store.state.pager.freezed||setTimp"})}),0)},arrowHover:function(t,e){this.$refs.bookComponent&&"function"==typeof this.$refs.bookComponent.arrowHover&&this.$refs.bookComponent.arrowHover(t,e)},afteade"}},beforeize)},mounted:function(){this.resize(!0),this.hasPages||this.$root.onPublicationLoad({}),document.addEventListener("mousedown",this.documentOnMouseDown),document.addEventListener("mouseup",this.documentOnMouseUp)},beforeDeeUp)},watch:{size:function(){this.resize()},bookScaleSize:function(){this.resize()},originalBookSize:function(){this.resize()},hasThicze()},bookComponent:function(t){this.$store.dispatch("pager/setForceRerender",{forceRerender:!1}),this.$store.dispatch("workspace/setBookComponent",t),this.resize()},pagerState:function(t,e){var i=this;!this.miniState||this.miniFullScreen||t.isEqualState(e)||(this.ctrFade="ctr-fade",this.$nextTick((function(){i.miniFullScreen=!0})))},renderLogo:function(t){var e,i=this;t||(null!==(e=this.$refs)&&void 0!==e&&null!==(e=e.logoComponent)&&void 0!==e&&e.$el&&!this.$refs.logoComponent.$el.parentElement&&this.$el.appendChild(this.$refs.logoComponent.$el),this.$nextey")})))}}},or=sr,rr=(0,U.Z)(or,s,o,!1,null,"42bb92b2",null).exports},5343:function(t,e,i){"use strict";i.d(e,{Z:function(){return n}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("div",{staticClass:"flash-message",style:t.messageData.style,attrs:{role:"alert","aria-live":"assertive","aria-atomic":"true"}},[t._v("\n        "+t._s(t.messageData.text)+"\n    ")])])},o=[],r={name:"FlashMessage",mounted:function(){var t=this;null!==this.$store.getters["workspace/flashMessage"]&&setTimull)}),this.delay)},computed:{messageData:function(){return this.$store.getters["workspace/flashMessage"]},:900}}},n=(0,i(1900).Z)(r,s,o,!1,null,"8ce2c984",null).exports},1500:function(t,e,i){"use strict";i.d(e,{Z:function(){return G}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("v-touch",{on:{swipeleft:function(e){t.isNavEnabled&&t.goRight("swipe")},swipepe")},swipeup:t.close,swipedown:t.close}},[i("span",{ref:"first-trap",attrs:{tabindex:"0","aria-hidden":"true"}}),t._v(" "),i("transition",{attrs:{name:"lightbox"},on:{"after-enter":function(e){!t.isMobile&&t.setFocusTraps({})}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isLightboxActive&&(t.areThumbnailsReady||t.isSmallWorkspace||!t.isNavEnabled),expression:"isLightboxActive && (areThumbnailsReady || isSmallWorkspace || !isNavEnabled)"}],class:t.lightboxClasses,style:t.lightboxStyle},[i("div",{staticClass:"lightbox-main"},[i("div",{staticClass:"lightbox-content",style:t.lightboxSizeStyle,on:{click:function(e){!t.isMobile&&t.setFocusTraps({justResetFocus:!0})}}},[i("transition",{attrs:{name:"lightbox-element"}},[i(t.item.component,{key:t.item.key,tag:"component",staticClass:"lightbox-element",attrs:{currentItem:t.item.data},on:{"lightbox-rect":t.setLightboxRect,"toggle-overlap-visibility":t.toggleOverlapVisibility}})],1),t._v(" "),i("button",{ref:"btn-close",staticClass:"lightbox-btn close",attrs:{tabindex:"0","aria-label":t.localization.closeButton,title:t.localization.closeButton},on:{click:t.close}},[i("svgicon",{staticClass:"svg-icon",attrs:{focusable:"false",name:"cross"}})],1),t._v(" "),t.currentLightboxItem&&t.currentLightboxItem.description&&t.isOverlapVisible?i("div",{staticClass:"lightbox-description-wrapper",attrs:{dir:t.descriptionDir}},[i("div",{staticClass:"lightbox-description-container",on:{on()},mousedown:function(t){t.preventDefault()},mouseup:function(t){t.preventDefault()}}},[null!==t.isDescriptionOverflowing?i("div",{ref:"lightbox-description",class:t.descriptionClasses,attrs:{id:"lightbox-description"}},t._l(t.currentLightboxItem.descriptionByType,(function(e){return i("span",["text"===e.type?[t._v(t._s(e.raw))]:"link"===e.type?i("a",{staticClass:"description-link",attrs:{href:e.link,target:"_blank"},on:{click:function(t){t.stopPropagation()},mousedown:function(t){t.preventDefault()},molt()}}},[t._v("\n                                        "+t._s(e.text))]):t._e()],2)})),0):t._e(),t._v(" "),i("div",{ref:"description-placeholder",staticClass:"lightbox-description lightbox-description-placeholder",attrs:{"aria-hidden":"true"}},t._l(t.currentLightboxItem.descriptionByType,(function(e){return i("span",["text"===e.type?[t._v(t._s(e.raw))]:"link"===e.type?i("a",{staticClass:"description-link",attrs:{href:e.link,tabindex:"-1"}},[t._v("\n                                        "+t._s(e.text))]):t._e()],2)})),0),t._v(" "),t.isDescriptionOverflowing?i("div",{staticClass:"lightbox-description-more"},[t._v("\n                                "+t._s(t.descriptionMore)+"\n                            ")]):t._e()])]):t._e()],1)]),t._v(" "),!t.isSmallWorkspace&&t.isNavEnabled?[i("div",{staticClass:"nav-area nav-area-left",on:{click:function(e){return t.goLeft("area")}}}),t._v(" "),i("div",{staticClass:"nav-area nav-area-right",on:{click:function(e){return t.goRight("area")}}})]:t._e(),t._v(" "),!t.isSmallWorkspace&&t.isNavEnabled?i("div",{staticClass:"nav-btns"},[i("button",{ref:"nav-btn-left",staticClass:"lightbox-btn nav-btn nav-btn-left",attrs:{tabindex:"0","aria-label":t.localization.leftButton,title:t.localization.leftButton},on:{click:function(e){return t.goLeft("button")}}},[i("svgicon",{staticClass:"chevron-left",attrs:{focusable:"false",name:"chevron-right"}})],1),t._v(" "),i("button",{ref:"nav-btn-right",staticClass:"lightbox-btn nav-btn nav-btn-right",attrs:{tabindex:"0","aria-label":t.localization.rightButton,title:t.localization.rightButton},on:{click:function(e){return t.goRight("button")}}},[i("svgicon",{attrs:{focusable:"false",name:"chevron-right"}})],1)]):t._e(),t._v(" "),t.isSmallWorkspace&&t.isNavEnabled?i("div",{ref:"small-workspace-nav",staticClass:"small-workspace-nav",attrs:{dir:"ltr"}},[i("div",{ref:"nav-btn-left",staticClass:"lightbox-btn small-workspace-nav-btn small-workspace-nav-btn-left",attrs:{role:"button",tabindex:"0","aria-label":t.localization.leftButton,title:t.localization.leftButton},on:{click:function(e){return t.goLeft("button")}}},[i("svgicon",{staticClass:"chevron-left",attrs:{focusable:"false",name:"chevron-right"}})],1),t._v(" "),i("div",{staticClass:"lightbox-nav-dots-wrapper",attrs:{"data-lightbox-nav-dots-wrapper":"true"}},[i("div",{staticClass:"lightbox-nav-dots-grad-left"}),t._v(" "),i("div",{staticClass:"lightbox-nav-dots-grad-right"}),t._v(" "),i("div",{staticClass:"lightbox-nav-dots"},[i("lightbox-nav-dots")],1)]),t._v(" "),i("div",{ref:"nav-btn-right",staticClass:"lightbox-btn small-workspace-nav-btn small-workspace-nav-btn-right",attrs:{role:"button",tabindex:"0","aria-label":t.localization.rightButton,title:t.localization.rightButton},on:{on")}}},[i("svgicon",{attrs:{focusable:"false",name:"chevron-right"}})],1)]):t._e(),t._v(" "),!t.isSmallWorkspace&&t.isNavEnabled?i("div",{staticClass:"lightbox-nav"},[i("lightbox-thumbnails")],1):t._e(),t._v(" "),i("div",{staticClass:"lightbox-overlay",on:{click:t.close}})],2)]),t._v(" "),i("span",{ref:"last-trap",attrs:{tabindex:"0","aria-hidden":"true"}})],1):t._e()},o=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[{"lightbox-thumbnail-image":t.thumbnail}]},[i("transition",{attrs:{name:t.thumbnail?null:"image"}},[t.blobUrl?i("div",{staticClass:"image-wrapper"},[i("div",{staticClass:"image",style:t.imageStyle,attrs:{role:"img","aria-labelledby":"lightbox-description"},on:{click:function(e){!t.thumbnail&&t.isSmallWorkspace&&t.$emit("toggle-overlap-visibility")}}})]):t._e()]),t._v(" "),t.hasError?i("div",{staticClass:"icon-wrap"},[i("svgicon",{staticClass:"error-icon",attrs:{focusable:"false",name:"error"}})],1):t.blobUrl?t._e():i("div",{staticClass:"icon-wrap"},[i("spinner",{attrs:{size:t.thumbnail?12:36,"line-size":3,"line-fg-color":"#5692AE","line-bg-color":"#333"}})],1)],1)},n=[],a=i(9426),h=i(9937),l=i(776),c=i(5657),d=i(2918),u=i(2358),p=(i(6177),{}),g={},f={components:{Spinner:a.Z},props:{currentItem:{type:Object,required:!1},thumbnail:{type:Boolean,default:!1}},data:function(){return{crossOrigin:(0,l.Z)().getCrossOrigin(),blobUrl:null,naturalWidth:null,naturalHeight:null,hasError:null}},computed:{workspaceSize:function(){return this.$store.getters["workspace/size"]},isNavEnabled:function(){return this.$store.getters["lightbox/isNavEnabled"]},isPortrait:function(){return this.$store.getters["workspace/isPortrait"]},wrapperRect:function(){if(this.thumbnail)return this.$store.state.lightbox.thumbnailSizeLimits;if(!this.currentItem||!this.workspaceSize.width)return null;var t=this.getSafeAreaInset("top"),e=this.getSafeAreaInset("right"),i=this.getSafeAreaInset("bottom"),s=this.getSafeAreaInset("left"),o=t+"-"+e+"-"+i+"-"+s+"-"+this.isSmallWorkspace+"-"+this.isPortrait+"-"+this.isNavEnabled+"-"+this.workspaceSize.width+"-"+this.workspaceSize.height;p[this.currentItem.name]=p[this.currentItem.name]||{};var r=p[this.currentItem.name][o];if(void 0===r){var n,a;n=this.currentItem.originalSize?{width:this.currentItem.originalSize[0],height:this.currentItem.originalSize[1]}:this.naturalWidth?{width:this.naturalWidth,height:this.naturalHeight}:{width:Math.round(this.currentItem.rect[0]*this.currentItem.scaleRatio.w),height:Math.round(this.currentItem.rect[1]*this.currentItem.scaleRatio.h)};var h=Math.max(s,e);if(this.isSmallWorkspace){var l=4;a=this.isPortrait?{width:this.workspaceSize.width-2*l,height:this.workspaceSize.height-2*this.buttonSize-this.navHeight-t-i}:{width:this.workspaceSize.width-2*this.buttonSize-2*h,height:this.workspaceSize.height-(this.navHeight||l)-i-l}}else{var c=this.isNavEnabled?Math.max(this.$store.state.lightbox.navAreaPadding,h):0;a={width:this.workspaceSize.width-2*(this.buttonSize+2*c),height:this.workspaceSize.height-2*this.buttonSize-this.navHeight}}r=(0,d.Tj)(n,a,!0),r.width=Math.round(r.width)||1,r.height=Math.round(r.height)||1,p[this.currentItem.name][o]=r}return this.$emit("lightbox-rect",r),r},rawUrl:function(){return this.currentItem&&this.fileName?(0,u.n)({filenameOrUrl:this.fileName}):null},fileName:function(){var t=this.currentItem;if(!(t&&t.name&&t.sizes&&this.wrapperRect))return null;var e=Math.max(this.wrapperRect.width,this.wrapperRect.height),i=(0,c.F)({data:t,maxSize:e});return(0,l.Z)().getImageFileName(i)},isSmallWorkspace:function(){return this.$store.getters["workspace/isSmallWorkspace"]},isMobile:function(){return this.$store.getters["workspace/isMobile"]},isLocaleRtl:function(){return this.$store.getters["i18n/isLocaleRtl"]},imageStyle:function(){return{width:this.wrapperRect.width+"px",height:this.wrapperRect.height+"px","background-image":this.blobUrl?"url("+this.blobUrl+")":null}},isPublsher},buttoSize},navHeight:function(){return this.$store.getters["lightbox/navHeight"]}},watch:{rawUrl:{haad()},immediate:!0}},methods:{null},load:function(){var t=this;(0,h.Z)({url:this.rawUrl,callback:function(e){var i=document.createElement("img");i.onload=function(){t.blobUrl=e,t.naturalWidth=i.naturalWidth,t.naturalHeight=i.naturalHeight,!t.thumbnail&&t.currentItem&&t.$root.$emit("image",{action:"loaded",pageId:t.currentItem.pageId,url:(0,c.q)(t.currentItem),lightboxUrl:window.location.href})},i.onerror=t.onLoadError,i.crossOrigin=t.crossOrigin,i.src=e,i.style.width="100%"},errorback:this.onLoadError})},onLoadr=!0},getSafeAreaInset:function(t){return!this.isMobile||this.isPublisher?0:(g[this.workspaceSize.width]=g[this.workspaceSize.width]||{},void 0===g[this.workspaceSize.width][t]&&(g[this.workspaceSize.width][t]=Number(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-"+t).trim().slice(0,-2))),g[this.workspaceSize.width][t])}}},m=i(1900),v=(0,m.Z)(f,r,n,!1,null,"c1eef398",null).exports,b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-dots"},t._l(t.currentContent,(function(e,s){return i("lightbox-nav-dot",{key:e.itemId,style:t.navDotsStyle,attrs:{item:e}})})),1)},S=[],y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.navDotClass,attrs:{"data-active":t.isActive,"data-active-gallery-item":t.isActive&&t.isGalleryItem}},[t.isGallery?t._l(t.item.items,(function(e,s){return i("lightbox-nav-dot",{key:t.item.itemId+"-"+s,attrs:{item:e,itemId:t.item.itemId,galleryItemIndex:s}})})):i("div",{staticClass:"circle"})],2)},w=[],k={name:"lightbox-nav-dot",props:{item:{type:Object,required:!0},galleryItemIndex:{type:Number},itemId:{type:Number}},computed:{navDotClass:function(){return{"nav-dot":!this.isGallery,gallery:this.isGallery,active:this.isActive,"gallery-item":this.isGalleryItem}},isGatype},isGallerndex},currentItemId:function(){return this.$store.state.lightbox.currentItemId},currentGalleryItemIndex:function(){return this.$store.state.lightbox.currentGalleryItemIndex},isActive:function(){return this.isGalleryItem?this.itemId===this.currentItemId&&this.galleryItemIndex===this.currentGalleryItemIndex:this.item.itemId===this.currentItemId}}},x={components:{LightboxNavDot:(0,m.Z)(k,y,w,!1,null,"430c6897",null).exports}X:0}},moots)},computed:{currentCont"]},currentItemId:function(){return this.$store.state.lightbox.currentItemId},currentGalleryItemndex},navDotsx)"}}},watch:{currentIots)},currentGalleryItemIndex:function(t){(t||0===t)&&this.$nextTick(this.moveDots)}},methods:{moveDots:function(){var t=this.$el.querySelector("[data-active]"),e=null===this.currentGalleryItemIndex?null:this.$el.querySelector("[data-active-gallery-item]"),i=(e||t).offsetWidth,s=document.querySelector("[data-lightbox-nav-dots-wrapper]").offsetWidth;this.translateX=s/2-t.offsetLeft-i/2,e&&(this.translateX=this.translateX-e.offsetLeft-2)}}},P=(0,m.Z)(x,b,S,!1,null,"7fd5bd80",null).exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lightbox-thumbnails",style:t.thumbnailsStyle},[t._l(t.currentContent,(function(e,s){return i("lightbox-thumbnail",{key:e.itemId,attrs:{index:s,thumbnail:t.thumbnails[s]}})})),t._v(" "),i("div",{staticClass:"lightbox-thumbnails-pager",attrs:{dir:t.workspaceDir}},[i("span",[t._v(t._s(t.pager))])])],2)},z=[],C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.thumbnailClass,style:t.thumbnailStyle,on:{click:function(e){!t.thumbnail.isActive&&t.lightboxGoTo(e)}}},["image"===t.thumbnail.type?i("lightbox-image",{attrs:{currentItem:t.thumbnail,thumbnail:!0}}):t.isGallery?i("div",{staticClass:"gallery-items-wrapper",attrs:{dir:"ltr"}},t._l(t.thumbnail.items,(function(e,s){return i("div",{key:s,class:["gallery-item",{active:t.thumbnail.isActive&&s===t.thumbnail.galleryItemIndex}],style:{width:t.thumbnailsSizes[t.thumbnail.itemId][s].width+"px",height:t.thumbnailsSizes[t.thumbnail.itemId][s].height+"px"},on:{click:function(e){return t.lightboxGoTo(e,s)}}},["image"===e.type?i("lightbox-image",{attrs:{currentItem:e,thumbnail:!0}}):t._e()],1)})),0):t._e(),t._v(" "),t.isGallery?i("div",{staticClass:"gallery-frame"}):t._e()],1)},T=[];function M(t){return E(t)||R(t)||L(t)||I()}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(t,e){if(t){if("string"==typeof t)return O(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?O(t,e):void 0}}function R(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function E(t){if(Array.isArray(t))return O(t)}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var F={components:{LightboxImage:v},props:{thumbnail:{type:Object,required:!0,default:function(){return{}}}},computed:{isGallery:function(){return"gallery"===this.thumbnail.type},thumbnailStyle:function(){return{transform:"translateX("+this.thumbnail.translateX+"px)",width:this.isGallery?this.$store.getters["lightbox/galleriesThumbnailsWidth"][this.thumbnail.itemId]+"px":this.thumbnailsSizes[this.thumbnail.itemId].width+"px",height:this.isGallery?null:this.thumbnailHeight+"px",top:this.isIe?this.thumbnailTop+"px":null}},thumbnailHeight:function(){if(this.isGallery){var t=this.thumbnailsSizes[this.thumbnail.itemId].map((function(t){return t.height}));return Math.max.apply(Math,M(t))}return this.thumbnailsSizes[this.thumbnail.itemId].height},thumbnailTop:function(){return this.$store.state.lightbox.thumbnailsPaddingTop+this.$store.state.lightbox.thumbnailMargin+this.$store.state.lightbox.thumbnailBorderWidth+(this.$store.state.lightbox.thumbnailSizeLimits.height-this.thumbnailHeight)/2},thumbnailClass:function(){return{"lightbox-thumbnail":!0,active:this.thumbnail.isActive,gallery:this.isGallery}},thumbnailsSizes:function(){return this.$store.getters["lightbox/thumbnailsSizes"]},isIe:function(){return this.$store.state.workspace.userAgentInfo.browser.msie}},methods:{lightboxGoTo:function(t,e){t.target.classList.contains("image")&&this.$store.dispatch("lightbox/lightboxGoTo",{itemId:this.thumbnail.itemId,galleryItemIndex:e,target:"th-click"})}}};function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function _(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function W(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?_(Object(i),!0).forEach((function(e){B(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function B(t,e,i){return(e=A(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function A(t){var e=H(t,"string");return"symbol"===D(e)?e:String(e)}function H(t,e){if("object"!==D(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!==D(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var N={components:{LightboxThumbnail:(0,m.Z)(F,C,T,!1,null,"65764538",null).exports}:[]}},created:function(){this.moveThumbnails()},computed:{currentContent:function(){return this.$store.getters["lightbox/currentContent"]},currentItemdex}},currentItemId:function(){return this.$store.state.lightbox.currentItemId},currentItemIndex:function(){return this.$store.getters["lightbox/currentItemIndex"]},currentGalleryItemIndex:function(){return this.$store.state.lightbox.currentGalleryItemIndex},thumbnailsOffsetsLeft:function(){return this.$store.getters["lightbox/thumbnailsOffsetsLeft"]},workspaceSize:function(){return this.$store.getters["workspace/size"]},pager:function(){return this.$store.getters["lightbox/pager"]},workspaceDir:function(){return this.$store.getters["i18n/isLocaleRtl"]?"rtl":"ltr"},thumbnailsStyle:function(){return{"--thumbnail-margin":this.$store.state.lightbox.thumbnailMargin+"px"}}},watch:{currentItemState:function(t,e){!t.itemId||t.itemId===e.itemId&&t.galleryItemIndex===e.galleryItemIndex||(t.itemIndex===e.itemIndex&&t.galleryItemIndex!==e.galleryItemIndex||t.itemIndex!==e.itemIndex)&&this.$nextTick(this.moveThumbnails)},workspaceSize:function(t,e){t.width===e.width&&t.height===e.height||this.$nextTick(this.moveThumbnails)}},methods:{moveThumbnails:function(){var t=this;this.workspaceSize.width&&(this.thumbnails.length!==this.currentContent.length&&(this.thumbnails=this.currentContent},t)}))),this.thumbnails.forEach((function(e){var i=e.itemId===t.currentItemId;t.$set(e,"isActive",i),"gallery"===e.type&&i&&t.$set(e,"galleryItemIndex",t.currentGalleryItemIndex)})),setTimeout((function(){var e=t.thumbnailsOffsetsLeft[t.currentItemId],i=t.$store.getters["lightbox/currentThumbnailWidth"]/2,s=t.$store.getters["lightbox/currentGalleryItemThumbnailOffsetLeft"],o=Math.round(t.workspaceSize.width/2);t.thumbnails.forEach((function(r){t.$set(r,"translateX",t.thumbnailsOffsetsLeft[r.itemId]+o-e-s-i)})),t.$store.commit("lightbox/SET_THUMBNAILS_READY",!0)})))}}},Z=(0,m.Z)(N,$,z,!1,null,"511b6300",null).exports,V=i(6382),j=i.n(V),U=(i(3374),i(1691),{components:{LightboxImage:v,LightboxNavDots:P,LightboxThumbnails:Z},data:function(){return{isOverlapVisible:!0,isDescriptionOverflowing:null,isDescriptionExpanded:!1,lightboxRect:{width:null,height:null},item:null,isFocusTrapped:!1}},computed:pace},isLightboxShown:function(){return this.$store.getters["lightbox/isShown"]},isLightboxActive:{get:function(){return this.$store.state.lightbox.isLightboxActive},set:function(t){this.$store.commit("lightbox/SET_LIGHTBOX_ACTIVE",t,{root:!0})}},isSpreadMode:function(){return this.$store.state.pager.spreadMode},isNavEnabled:function(){return this.$store.getters["lightbox/isNavEnabled"]},currentItem:function(){return this.$store.getters["lightbox/currentItem"]},currentGalleryItem:function(){return this.$store.getters["lightbox/currentGalleryItem"]},currentLightboxItem:function(){return this.currentItem?"gallery"===this.currentItem.type?this.currentGalleryItem:this.currentItem:null},isRtl:function(){return this.$store.getters["i18n/isLocaleRtl"]},lightboxStyle:function(){return{"--button-size":this.isSmallWorkspace?this.$store.state.lightbox.smallWorkspaceButtonSize+"px":this.$store.state.lightbox.buttonSize+"px","--nav-area-padding":this.$store.state.lightbox.navAreaPadding+"px","--thumbnails-height":this.$store.getters["lightbox/thumbnailsHeight"]+"px","--thumbnails-padding-top":this.$store.state.lightbox.thumbnailsPaddingTop+"px","--thumbnails-padding-bottom":this.$store.state.lightbox.thumbnailsPaddingBottom+"px"}},lightboxSizeStyle:function(){return this.lightboxRect.width&&this.lightboxRect.height?{width:this.lightboxRect.width+"px",height:this.lightboxRect.height+"px"}:{}},localization:function(){var t=this.$t("Lightbox.NEXT_BUTTON_TEXT"),e=this.$t("Lightbox.PREV_BUTTON_TEXT");return{closeButton:this.$t("Lightbox.CLOSE_BUTTON_TEXT"),leftButton:this.isRtl?t:e,rightButton:this.isRtl?e:t}},isMobile:function(){return this.$store.getters["workspace/isMobile"]},isSmallWorkspace:function(){return this.$store.getters["workspace/isSmallWorkspace"]},currentGalleryItemIndex:function(){return this.$store.state.lightbox.currentGalleryItemIndex},descriptionClasses:function(){return["lightbox-description",{"lightbox-description-expandable":this.isDescriptionOverflowing,"lightbox-description-expanded":this.isDescriptionExpanded}]},descriptionDir:function(){return"ltr"===j().getDirection(this.currentLightboxItem.description)?"ltr":"rtl"},descriptionMore:function(){return this.isDescriptionExpanded?this.$t("Lightbox.DESCRIPTION_HIDE"):"..."+this.$t("Lightbox.DESCRIPTION_SHOW_MORE")},lightboxCled}]},areThumbnailsReady:function(){return this.$store.state.lightbox.areThumbnailsReady}},mounted:function(){this.$root.$on("lightbox-go-right",this.goRight),this.$root.$on("lightbox-go-left",this.goLeft),this.$root.$on("lightbox-close",this.close)},watch:{show:{handler:function(t,e){var i=this;t&&!e?(this.$root.$emit("popupStateChanged",{state:1}),this.$nextTick((function(){i.isLightboxActive=!0,i.$store.commit("sound/SET_MUTE_TEMPORARY",!1)}))):!this.isLightboxShown&&this.isLightboxActive&&this.close()},immediate:!0},isLightboxActive:function(t,e){t&&!e?(this.emitLightboxEvent("open"),this.emitLightboxEvent("show_content")):!t&&e&&this.emitLightboxEvent("close")},currentLightboxItem:function(t,e){var i,s,o=this;if(!t)return this.item=null,this.isFocusTrapped=!1,this.isDescriptionOverflowing=null,void(this.isDescriptionExpanded=!1);this.isMobile||this.setFocusTraps({justResetFocus:this.isFocusTrapped}),this.currentItem&&(s=this.currentItem.itemId+("gallery"===this.currentItem.type?"-"+this.currentGalleryItemIndex:"")),t&&(null===(i=this.item)||void 0===i?void 0:i.key)!==s&&(this.item={component:this.getElementComponent(t),data:t,key:s},this.isDescriptionOverflowing=null,this.isDescriptionExpanded=!1,t.description&&setTimeout((function(){var t=48;o.isDescriptionOverflowing=o.$refs["description-placeholder"].scrollHeight>=t,!o.isMobile&&o.isDescriptionOverflowing&&o.$nextTick((function(){o.$refs["lightbox-description"].addEventListener("focusin",(function(t){o.isDescriptionExpanded=!0})),o.$refs["lightbox-description"].addEventListener("focusd=!1}))}))}),100))}},beforeDestroy:function(){this.$root.$off("lightbox-go-right",this.goRight),this.$root.$off("lightbox-go-left",this.goLeft),this.$root.$off("lightbox-close",this.close)},methods:{toggleOverlapVisibility:function(){this.isOverlapVisible=!this.isOverlapVisible},toggleDescrinded},close:function(){this.$root.$emit("popupStateChanged",{state:0}),this.$store.dispatch("lightbox/closeLightbox")},goRight:function(t){this.isOverlapVisible=!0,this.isRtl?this.$store.dispatch("lightbox/lightboxGoPrev",t):this.$store.dispatch("lightbox/lightboxGoNext",t),this.emitLightboxEvent("show_content")},goLeft:function(t){this.isOverlapVisible=!0,this.isRtl?this.$store.dispatch("lightbox/lightboxGoNext",t):this.$store.dispatch("lightbox/lightboxGoPrev",t),this.emitLightboxEvent("show_content")},emitLightboxEvent:function(t){this.currentLightboxItem&&this.$root.$emit("lightbox",{action:t,openTarget:"open"===t||"show_content"===t?this.$store.state.lightbox.target:null,itemType:this.currentLightboxItem.type,itemId:this.$store.state.lightbox.currentItemId,galleryItemIndex:this.currentGalleryItemIndex,itemUrl:(0,c.q)(this.currentLightboxItem),lightboxUrl:window.location.href,pageId:this.currentItem.pageId})},setLightboight},setFocusTraps:function(t){var e=t.justResetFocus,i=this.$refs["first-trap"],s=this.$refs["last-trap"],o=this.$refs["nav-btn-right"],r=this.$refs["nav-btn-left"],n=this.$refs["btn-close"];n&&(this.isNavEnabled?(this.isRtl?r.focus():o.focus(),e||(i.addEventListener("focusin",(function(t){t.relatedTarget!==r?o.focus():n.focus()})),s.addEventListener("focusin",(function(t){n.focus()})),this.isFocusTrapped=!0)):n.focus())},getElementCompnull}}}),G=(0,m.Z)(U,s,o,!1,null,"66001db2",null).exports},9426:function(t,e,i){"use strict";i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"vue-simple-spinner",style:t.spinnerStyle}),t._v(" "),t.message.length>0?i("div",{staticClass:"vue-simple-spinner-text",style:t.textStyle},[t._v("\n        "+t._s(t.message)+"\n    ")]):t._e()])},oe(t)},n=16,a=0,h=0,l={props:{size:{default:32},"line-size":{type:Number,default:3},"line-bg-color":{type:String,default:"#eee"},"line-fg-color":{type:String,default:"#2196f3"},speed:{type:Number,default:.8},sync:{type:Boolean,default:!1},spacing:{type:Number,default:4},message:{type:String,default:""},"font-size":{type:Number,default:13},"text-fg-color":{type:String,default:"#555"}},data:function(){return{syncAngle:null}},mounted:function(){this.sync&&(this.syncAngle=a,requestAnimationFrame(this.rotate),h++)},beforeDestroy:function(){clearTimeout(this.rotateTimeoutId),--h||(a=0)},computed:{oneDeg/360},syncStep:function(){return Math.round(n/this.oneDegDelay)},spinnee:32},spinnerBorderze:4},spinnerStyle:function(){return{border:this.spinnerBorderWidth+"px solid "+this.lineBgColor,borderTop:this.spinnerBorderWidth+"px solid "+this.lineFgColor,width:this.spinnerSize+"px",height:this.spinnerSize+"px",animation:this.sync?null:"vue-simple-spinner-spin "+this.speed+"s linear infinite",transition:this.sync?null:"all  0.3s linear",transform:this.sync?"rotate("+this.syncAngle+"deg)":null}},textStyle:function(){var t,e;switch(this.size){case"tiny":case"small":case"medium":case"large":case"big":case"huge":case"massive":t=Math.min(Math.max(Math.ceil(this.spinnerSize/8),3),12),e=Math.min(Math.max(Math.ceil(.4*this.spinnerSize),11),32);break;default:t=r(this.spacing)?this.spacing:4,e=r(this.fontSize)?this.fontSize:13}return{marginTop:t+"px",fontSize:e+"px",color:this.textFgColor}}},methods:{rotate:function(){var t=this;this.rotateTimeoutId=setTimeout((function(){t.syncAngle===a?(t.syncAngle=t.syncAngle+t.syncStep,t.syncAngle=t.syncAngle>360?t.syncAngle-360:t.syncAngle,a=t.syncAngle):t.syncAngle=a,requestAnimationFrame(t.rotate)}),n)}}},c=(0,i(1900).Z)(l,s,o,!1,null,null,null).exports},7503:function(t,e,i){"use strict";i.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.className,style:t.pageStyle},[t.preloaderVisible?i("div",{staticClass:"preloader",attrs:{"aria-hidden":"true"}},[i("div",{staticClass:"preloader-container"},[t.isLoading?i("spinner",{staticClass:"preloader-spinner",attrs:{size:t.preloaderSize,"line-size":t.preloaderLineSize,"line-fg-color":"#5692AE","line-bg-color":"#ffffff"}}):t._e()],1)]):t._e(),t._v(" "),t.rightPreloaderVisible?i("div",{staticClass:"preloader right",attrs:{"aria-hidden":"true"}},[i("div",{staticClass:"preloader-container"},[t.isLoading?i("spinner",{staticClass:"preloader-spinner",attrs:{size:t.preloaderSize,"line-size":t.preloaderLineSize,"line-fg-color":"#5692AE","line-bg-color":"#ffffff"}}):t._e()],1)]):t._e(),t._v(" "),t.enforceWhiteBg?i("img",{staticClass:"enforce-white-bg",attrs:{src:t.whitePixelUrl}}):t._e(),t._v(" "),t.background?i("img",{staticClass:"background",style:t.contentStyle,attrs:{crossOrigin:t.crossOrigin,src:t.background,role:"img","data-id":t.pageId,title:t.$t("AlertMessage.LINK_PAGE_TIP"),"aria-label":t.$t("AlertMessage.LINK_PAGE_TIP"),alt:t.imageAlt}}):t._e()])},o=[],r=i(9426),n=i(776),a=i(2918),h={name:"Thumb",props:{id:{type:[String,Number],required:!0},side:{type:String,required:!1,default:"both",validator:function(t){return-1!==["left","right","both"].indexOf(t)}},size:{type:Object,required:!1,default:null},contentCrop:{type:Boolean,default:!1},showPreloader:{type:Boolean,default:!0}},data:function(){return{isReady:!0,pageId:this.id,pageSide:this.side,crossOrigin:(0,n.Z)().getCrossOrigin(),isWide:!1,isStub:!1,hasError:!1,backgroundColor:"#ffffff",thumbnailUrl:null,pageResize:null,contentWidth:0,contentHeight:0,whitePixelUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII="}},components:{spinner:r.Z},beforeMount:function(){this.getProperties()},watch:{id:function(t){this.pageId=t},side:function(t){this.pageSide=t},changeProperty:function(t){t.pageID===this.pageId&&this.getProperties()},pageId:function(){this.getProperties()}},methods:{getProperties:function(){this.isWide=this.$store.getters["pages/pageProp"](this.pageId,"wide"),this.isStub=this.$store.getters["pages/pageProp"](this.pageId,"stub"),this.hasError=-1===this.$store.getters["pages/pageProp"](this.pageId,"thumbnailUrl"),this.backgroundColor=this.$store.getters["pages/pageProp"](this.pageId,"backgroundColor"),this.thumbnailUrl=this.$store.getters["pages/pageProp"](this.pageId,"thumbnailUrl"),this.pageResize=this.$store.getters["pages/pageProp"](this.pageId,"pageResize"),this.contentWidth=this.$store.getters["pages/pageProp"](this.pageId,"width")/this.contentWidthMultiplier,this.contentHeight=this.$store.getters["pages/pageProp"](this.pageId,"height")}},computed:{imageAlt:function(){return this.$i18n.t("AlertMessage.LINK_PAGE_TIP")+" "+this.pageCaption+" ("+this.$i18n.t("ThumbnailsToolWindow.TITLE")+")"},pageCaption:function(){return this.$store.getters["pages/pageCaptionById"]({id:this.id})},className:function(){return{thumb:!0,double:this.bookMode&&this.isWide&&"both"===this.pageSide,loading:this.isLoading,unready:!this.isReady,error:this.hasError}},preloaderVisible:function(){return this.showPreloader&&!this.isStub&&(this.isLoading||!this.isReady||this.hasError)},rightPreloaderVisible:function(){return this.preloaderVisible&&this.bookMode&&this.isWide&&"both"===this.pageSide},preloaderSize:function(){var t=2,e=this.contentCrop?this.contentSize.height:this.pageSize.height,i=this.contentCrop?this.contentSize.width:this.pageSize.width,s=Math.min(i,e)-2*t;return Math.min(24,s)},preloaderLineSize:function(){return 2},enforceWhiteBg:function(){return this.$store.state.workspace.alteredSVGColors&&this.$store.state.workspace.userAgentInfo.browser.samsung},background:function(){if(!this.pageId||!this.isReady||this.hasError)return null;if(this.isStub){this.$store.state.workspace.policiesUpdated;return this.enforceWhiteBg?this.whitePixelUrl:(0,n.Z)().translatePath("assets/pages/pagestub.png")}return this.thumbnailUrl?this.thumbnailUrl:null},isLoading:function(){return!this.thumbnailUrl||(0===this.$store.state.pages.size.width||null===this.$store.state.pages.size.width)},pageWidthMultiplier:function(){return this.isWide&&"both"===this.pageSide?2:1},contentWidthMultiplier:function(){return this.isWide&&"both"!==this.pageSide?"2":"1"},pagesSize:function(){return this.$store.getters["pages/size"]},pageSize:function(){return this.size&&this.size.width&&this.size.height?{width:this.size.width,height:this.size.height}:{width:this.pagesSize.width*this.pageWidthMultiplier,height:1*this.pagesSize.height}},singleMode:function(){return this.$store.state.pager.singleMode},bookMode:function(){return this.$store.state.pager.spreadMode},pageStyle:function(){return{width:(this.contentCrop?this.contentSize.width:this.pageSize.width)+"px",height:(this.contentCrop?this.contentSize.height:this.pageSize.height)+"px","background-color":this.enforceWhiteBg?null:this.backgroundColor}},contentSize:function(){if(this.pageId){var t,e=this.pageResize,i=this.contentWidth,s=this.contentHeight;return t="FIT"===e?(0,a.Tj)({width:i,height:s},this.pageSize):(0,a.hl)({width:i,height:s},this.pageSize),{width:Math.ceil(t.width),height:Math.ceil(t.height),scaleRatio:{w:t.width/i,h:t.height/s}}}return{width:0,height:0,scaleRatio:{w:0,h:0}}},contentStyle:function(){var t=this.contentCrop?0:(this.pageSize.width-this.contentSize.width)/(this.isWide&&"both"!==this.pageSide?1:2),e=this.contentCrop?0:(this.pageSize.height-this.contentSize.height)/2,i={width:this.contentSize.width*this.contentWidthMultiplier+"px",height:this.contentSize.height+"px"};return"right"===this.pageSide?(i.right="0",t&&(i.marginRight=t+"px")):(i.left="0",t&&(i.marginLeft=t+"px")),e&&(i.marginTop=e+"px"),i},changeProperty:function(){return this.$store.state.pages.changeInPage}}},l=(0,i(1900).Z)(h,s,o,!1,null,null,null).exports},4186:function(t,e,i){var s={"./":[2565,10],"./arrow":[4902,15],"./arrow.js":[4902,15],"./audio":[2400,9],"./audio.js":[2400,9],"./cart":[7875,18],"./cart.js":[7875,18],"./close":[5483,16],"./close.js":[5483,16],"./error":[6177],"./error.js":[6177],"./gallery":[7537,17],"./gallery.js":[7537,17],"./gif":[4582,14],"./gif.js":[4582,14],"./image":[4136,13],"./image.js":[4136,13],"./index":[2565,10],"./index.js":[2565,10],"./made-with":[5284],"./made-with.js":[5284],"./page":[9719],"./page-wide":[1619],"./page-wide.js":[1619],"./page.js":[9719],"./pause":[8175,19],"./pause.js":[8175,19],"./play":[9783,22],"./play.js":[9783,22],"./point":[9596,21],"./point.js":[9596,21],"./replay":[148],"./replay.js":[)}))}os(s)},o.id=4186,t.exports=o}}]);