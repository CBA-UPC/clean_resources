!this,function(at){"use strict";try{(function(){ar t=e(at),n=var p=i,o,s,a="FirebaseError",u=(i=Error,n(o=f,s=i),o.prototype=null===s?Object.create(s):(l.prototype=s.prototype,new l),f);r v=(g.prototype.create=g);ar b=/\{\$([^}]+)}/g,y=(w.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},w.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},w.prototype.setServiceProps=w);n _(e){this._index=e}unction D(e){this._store=e}_index",["name","keyPath","multiEntry","unique"]),I(_,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),C(_,"_index",IDBIndex,["openCursor","openKeyCursor"]),S(P,"_cursor",["direction","key","primaryKey","value"]),I(P,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(,D.prototype.createIndex=function(){return new _(this._store.createIndex.apply(this._store,arguments))},D.prototype.index=function(){return new _(this._store.index.apply(this._store,arguments))},S(D,"_store",["name","keyPath","indexNames","autoIncrement"]),I(D,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),C(D,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),T(D,"_store",IDBObjectStore,["deleteIndex"]),j.prototype.objectStore=function(){return new D(this._tx.objectStore.apply(this._tx,arguments))},S(j,"_tx",["objectStoreNames","mode"]),T(j,"_tx",IDBTransaction,["abort"]),M.prototype.createObjectStore=function(){return new D(this._db.createObjectStore.apply(this._db,arguments))},S(M,"_db",["name","version","objectStoreNames"]),T(M,"_db",IDBDatabase,["deleteObjectStore","close"]),O.prototype.transaction=S(O,"_db",["name","version","objectStoreNames"]),T(O,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(,[_,D].forEach(;var x="0.4.18",N=1e4,A="w:"+x,q="FIS_v2",R="https://firebaseinstallations.googleapis.com/v1",B=36e5,L=((L={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',L["not-registered"]="Firebase Installation is not registered.",L["installation-not-found"]="Firebase Installation not found.",L["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',L["app-offline"]="Could not process request. Application offline.",L["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",L),V=new v("installations","Installations",L);unction U(e){e=e.projectId;return R+"/projects/"+e+"/installations"}/^[cdef][\w-]{21}$/,Z="";r ee=new Map;r re=null;r se,ae="firebase-installations-database",ue=1,ce="firebase-installations-store",le=null;function fe(){return le=le||E(ae,ue,function(e){0===e.oldVersion&&e.createObjectStore(ce)})}ction ve(i){return d(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return[4,he(i,function(e){e=be(e||{fid:Q(),registrationStatus:0}),e=function(e,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:e)}:{installationEntry:t};if(!navigator.onLine){var n=Promise.reject(V.create("app-offline"));return{installationEntry:t,registrationPromise:n}}t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},e=function(r,i){return d(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,r,i)];case 1:return t=e.sent(),[2,pe(r,t)];case 2:return F(n=e.sent())&&409===n.customData.serverCode?[4,de(r)]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,pe(r,{fid:i.fid,registrationStatus:0})];case 5:e.sent(),e.label=6;case 6:throw n;case 7:return[2]}})})}(e,t);return{installationEntry:t,registrationPromise:e}}}(i,e);return t=e.registrationPromise,e.installationEntry})];case 1:return(n=e.sent()).fid!==Z?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=e.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}ction we(i,o){return void 0===o&&(o=!1),d(this,void 0,void 0,function(){var r,t,n;return h(this,function(e){switch(e.label){case 0:return[4,he(i.appConfig,function(e){if(!ke(e))throw V.create("not-registered");var t,n=e.authToken;if(o||2!==(t=n).requestStatus||t)){if(1===n.requestStatus)return r=i,o),e;if(!navigator.onLine)throw V.create("app-offline");n=(t=e,n={requestStatus:1,requestTime:Date.now()},p(p({},t),{authToken:n}));return r=i,n),n}return e})];case 1:return t=e.sent(),r?[4,r]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n=t.authToken,e.label=4;case 4:return[2,n]}})})}ion Ce(e){return V.create("missing-app-config-values",{valueName:e})}(se=t.default).INTERNAL.registerComponent(new y("installations","PUBLIC")),se.registerVersion("@firebase/installations",x);var _e,L=((L={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',L["only-available-in-window"]="This method is available in a Window context.",L["only-available-in-sw"]="This method is available in a service worker context.",L["permission-default"]="The notification permission was not granted and dismissed instead.",L["permission-blocked"]="The notification permission was not granted and blocked instead.",L["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",L["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",L["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",L["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",L["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",L["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",L["token-update-no-token"]="FCM returned no token when updating the user to push.",L["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",L["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",L["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",L["invalid-vapid-key"]="The public VAPID key must be a string.",L["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",L),Pe=new v("messaging","Messaging",L),De="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",je="https://fcmregistrations.googleapis.com/v1",Me="FCM_MSG",Oe="google.c.a.c_id";L=_e=_e||{}).PUSH_RECEIVED="push-received",L.NOTIFICATION_CLICKED="notification-clicked";var Ke="fcm_token_details_db",xe=5,Ne="fcm_token_object_Store";ar qe="firebase-messaging-database",Re=1,Be="firebase-messaging-store",Le=null;t.defineProperty(tt.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),tt.prototype.setBackgroundMessageHandler=tt.prototype.onBackgroundMessage=tt.prototype.getToken=tt.prototype.deleteToken=tt.prototype.requestPermission=function(){throw Pe.create("only-available-in-window")},tt.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw Pe.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw Pe.create("invalid-vapid-key");this.vapidKey=e},tt.prototype.useServiceWorker=function(){throw Pe.create("only-available-in-window")},tt.prototype.onMessage=function(){throw Pe.create("only-available-in-window")},tt.prototype.onTokenRefresh=function(){throw Pe.create("only-available-in-window")},tt.prototype.onPush=tt.prototype.onSubChange=tt.prototype.onNotificationClick=tt);r rt=(Object.defineProperty(it.prototype,"app",{get:enumerable:!1,configurable:!0}),it.prototype.messageEventListener=it.prototype.getVapidKey=function(){return this.vapidKey},it.prototype.getSwReg=it.prototype.getToken=it.prototype.updateVapidKey=it.prototype.updateSwReg=it.prototype.registerDefaultSw=it.prototype.deleteToken=it.prototype.requestPermission=it.prototype.usePublicVapidKey=it.prototype.useServiceWorker=it.prototype.onMessage=it.prototype.setBackgroundMessageHandler=function(){throw Pe.create("only-available-in-sw")},it.prototype.onBackgroundMessage=it.prototype.onTokenRefresh=it.prototype.logEvent=it);{isSupported:st};.default.INTERNAL.registerComponent(new y("messaging","PUBLIC").setServiceProps(L))}).apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-messaging.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-messaging.js.map
