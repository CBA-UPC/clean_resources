(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{627:function(e,t,i){"use strict";i.r(t);var o=i(2),n=i.n(o),s=(i(357),i(45),i(35),i(39),i(41),i(0)),r=i(7),a=i(6),l=i(1),d=i(93),c=i.n(d),h=i(156),u=i(653),p=i.n(u),g=i(71),m=i(646),f=i.n(m),b=i(247);const C=m.Quill.import("blots/embed");class w extends C{static create({emoji:e,name:t,position:i,handleClick:o}){const n=super.create();e||(e=(e=>{if(!e)return"";const t=e.split(":"),i=t[3]&&t[3].split("-")[2]||1,o=t[1],n=Object(b.a)();return Object(h.a)({html:!0,size:20,emoji:o,skin:+i,native:n,set:n?void 0:"apple"})})(t));const s=(new window.DOMParser).parseFromString(e,"text/html").querySelector(".emoji-mart-emoji");return s&&n.appendChild(s),o&&n.addEventListener("click",o),n.style.display="inline-block",n.dataset.name=t,n.dataset.position=i,n}static valuen()(w,"blotName","emotions"),n()(w,"tagName","span"),n()(w,"className","emotions"),n()(w,"highlightColor","#3297fd");var E=i(53),j=i(249),x=i(248),y=i(20),I=i.n(y),v=i(15),O=i.n(v),S=i(77),F=i(19),A=i(96),k=i(50),P=i(179),q=i(13),T=i(36),z=i.n(T);const M=l.default.div.withConfig({displayName:"PositionedPopup__Wrap",componentId:"sc-11hta7t-0"})(["bottom:",";top:",";left:",";right:",";position:absolute;max-height:",";"],({isFitOver:e,fitOverOffset:t})=>e&&t?t+"px":"auto",({isFitUnder:e,fitUnderOffset:t})=>e&&t?t+"px":"auto",Object(F.b)("0","auto"),Object(F.b)("auto","0"),({forcedHeight:e,desiredHeight:t})=>e?e+"px":t+"px");class _ extends s.default.Component{constructor(...e){super(...e),n()(this,"wrapRef",s.default.createRef()),n()(this,"state",{forcedHeight:void 0,isFitOver:!1,isFitUnder:!1})}componentDidMount(){const e=this.wrapRef.current.getBoundingClientRect(),t=e.y,i=e.height,o=t+(this.props.fitUnderOffset||0)+i<=window.innerHeight,n=t-(this.props.fitOverOffset||0)-i>=0;o?this.setState({isFitUnder:!0}):n?this.setState({isFitOver:!0}):this.setState({isFitUnder:!0,forcedHeight:window.innerHeight-t})}render(){return s.default.createElement(M,z()({},this.state,this.props,{ref:this.wrapRef}),this.props.children)}}var D=i(359);let U;var L=i(37),R=i(668),N=i.n(R),H=i(12);function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function G(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach((function(t){n()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const W=l.default.div.withConfig({displayName:"MediaAddons__PopupsWrap",componentId:"sc-1n9py2c-0"})(["position:absolute;left:0;top:40px;z-index:10;"]),$=l.default.div.withConfig({displayName:"MediaAddons__VideoInputPopUp",componentId:"sc-1n9py2c-1"})(["position:absolute;left:",";right:",";width:220px;display:flex;background:",";border:2px solid;border-color:",";border-radius:4px;box-shadow:0px 0px 4px 0px ",";","{display:flex;align-items:center;color:",";padding-right:",";padding-left:",";cursor:pointer;margin:0;top:0;border:none;}span{margin:0;}input{box-shadow:none;border:none;}input:focus{box-shadow:none;}"],Object(F.b)("0","auto"),Object(F.b)("auto","0"),Object(a.getColor)("backgroundColor"),Object(a.getColor)("brandColor"),Object(a.getColor)("brandColor"),q.CommonIcon,Object(a.getColor)("secondaryText"),Object(F.b)("10px","0"),Object(F.b)("0","10px")),K=l.default.div.withConfig({displayName:"MediaAddons__GifInputPopUp",componentId:"sc-1n9py2c-2"})(["@media (max-width:480px){width:80vw;}@media (min-width:481px){width:450px;}width:450px;max-width:100vw;max-height:inherit;display:flex;flex-direction:column;background:",";border:2px solid ",";padding:5px;position:relative;span{margin:0;}input{border:none;}"],Object(a.getColor)("backgroundColor"),Object(a.getColor)("primaryText",.05)),B=l.default.div.withConfig({displayName:"MediaAddons__IconWrapper",componentId:"sc-1n9py2c-3"})(["margin-top:3px;"]),Q=l.default.div.withConfig({displayName:"MediaAddons__GifWrapper",componentId:"sc-1n9py2c-4"})(["display:flex;flex-wrap:wrap;justify-content:space-around;overflow:scroll;min-height:",";::-webkit-scrollbar{height:4px;width:4px;}::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";}"],({isEmpty:e})=>e?"214px":"auto",Object(a.getColor)("primaryText",.05)),J=l.default.img.withConfig({displayName:"MediaAddons__GifItem",componentId:"sc-1n9py2c-5"})(["margin:2px;cursor:pointer;width:100px;height:100px;"]),X=e=>{const t=e.isVideosEnabled,i=e.isGifsEnabled,o=e.isImagesEnabled,n=e.isActionInProgress,r=e.intl,a=e.imgUploadRef,l=e.isAddCommentActionInProgress,d=e.setMediaContentError,h=e.isAnonymous,u=e.openAuth,p=e.userData,g=e.setEditorFocused,m=e.keepInputInFocus,f=e.changeCommentState,b=e.content,C=e.setMediaContent,w=e.setIsUploadInProgress,E=e.uploadImagesToCDN,j=Object(s.useState)(""),x=O()(j,2),y=x[0],v=x[1],k=Object(s.useState)(""),T=O()(k,2),z=T[0],M=T[1],R=Object(s.useState)(""),V=O()(R,2),X=V[0],Y=V[1],Z=Object(s.useState)(null),ee=O()(Z,2),te=ee[0],ie=ee[1],oe=Object(s.useState)([]),ne=O()(oe,2),se=ne[0],re=ne[1],ae=Object(s.useState)(!1),le=O()(ae,2),de=le[0],ce=le[1],he=Object(s.useState)(!1),ue=O()(he,2),pe=ue[0],ge=ue[1],me=Object(s.useCallback)(()=>{de?g(!1):v("")},[de,v,g]);Object(s.useEffect)(()=>{if("undefined"==typeof window)return;const e={apiKey:L.a.giphyApiKey,https:!!window&&"https:"===window.location.protocol};return ie(N()(e)),window.addEventListener("mouseup",me),,[me,ie]);const fe=()=>{ce(!0)},be=t=>{if(v(""),d(""),!l)if(p.isAuthorized&&!h)switch(t){case"image":return a.current.click();case"video":return ve();case"gif":return Ie()}else u().then(()=>{e.userData.isAuthorized&&be(t)})},Ce=we=function(){var e=I()((function*(e){const t=e.target.result;w(!0);const i=(yield E([t])).payload[0];b.images.push({url:i.url,preview:t}),w(!1),C(G({},b)),f({isAddCommentActionInProgress:!1})}));return (),Ee=e=>{const t=e.target.files;if("undefined"!=typeof window&&(e=>{if(!e||!e.length)return!1;if(b.images.length+e.length>3)return d("CantAddMoreImages"),!1;for(let t=0;t<e.length;t++){if("image/jpeg"!==e[t].type&&"image/png"!==e[t].type)return d("IncorrectImageType"),!1;if(e[t].size>5e6)return d("ImageTooLarge"),!1}return!0})(t)){for(let e=0;e<t.length;e++){const i=new window.FileReader;i.onloadstart=i.onload=we,i.readAsDataURL(t[e])}je(),d("")}else je()},je=()=>{const e=a.current;e&&(e.value="")},xe=c()(()=>{f({isAddCommentActionInProgress:!0}),te.search({q:X,rating:"g",fmt:"json"}).then((e,t)=>{t||(re(e.data),f({isAddCommentActionInProgress:!1}))})},1e3);Object(s.useEffect)(()=>{"gif"!==y||null!=se&&se.length||n||(l||f({isAddCommentActionInProgress:!0}),te.trending({rating:"g",fmt:"json"}).then((e,t)=>{t||(re(e.data),f({isAddCommentActionInProgress:!1}))}))},[y,se,n,l]);const ye=e=>{if(v(""),b.gifs.length>=3)return d("CantAddMoreGifs"),!1;const t=b.gifs.concat(e),i=G(G({},b),{},{gifs:t});C(i),d("")},Ie=()=>{const e="gif"!==y?"gif":"";v(e),""===e&&g(!0)},ve=()=>{const e="video"!==y?"video":"";v(e),""===e&&g(!0)};Object(s.useEffect)(()=>{!y&&pe&&(M(""),ge(!1))},[y,pe]);const Oe=()=>{ge(!0);const e=H.a.validateVideo(z);if(!e)return d("VideoUrlIsInvalid"),v(""),M(""),!1;if(b.videos.length>=3)return d("CantAddMoreVideos"),v(""),M(""),!1;const t=b.videos.concat(e),i=G(G({},b),{},{videos:t});v(""),M(""),C(i),d(""),f({isAddCommentActionInProgress:!1})};return s.default.createElement(s.default.Fragment,null,t&&s.default.createElement(S.Tooltip,{direction:"top",content:Object(F.d)(r.formatMessage({id:"AddComment.AddVideo"})),isTouchable:!1},s.default.createElement(A.a,{disabled:n,onClick:()=>be("video"),icon:"mediaVideo",isActive:"video"===y})),i&&s.default.createElement(S.Tooltip,{direction:"top",content:Object(F.d)(r.formatMessage({id:"AddComment.AddGif"})),isTouchable:!1},s.default.createElement(A.a,{disabled:n,onClick:icon:"mediaGif",isActive:"gif"===y})),o&&s.default.createElement(s.default.Fragment,null,s.default.createElement(S.Tooltip,{direction:"top",content:Object(F.d)(r.formatMessage({id:"AddComment.AddImage"})),isTouchable:!1},s.default.createElement(A.a,{disabled:n,onClick:icon:"mediaImg"})),s.default.createElement("input",{ref:a,type:"file",onChange:disabled:n,style:{display:"none"}})),s.default.createElement(W,null,"video"===y&&s.default.createElement($,{onMouseOver:fe,onMouseLeave:Ce},s.default.createElement(P.InputText,{type:"text",autoFocus:!0,onClick:e=>e.stopPropagation(),value:z,onKeyDown:e=>{e.stopPropagation(),13===e.keyCode&&(e.preventDefault(),Oe())},onChange:placeholder:r.formatMessage({id:"EditComment.AddVideo.VideoUrl"})}),s.default.createElement(q.CommonIcon,{medium:!0,onClick:,"add_circle")),"gif"===y&&s.default.createElement(_,{fitOverOffset:30,desiredHeight:300},s.default.createElement(K,{onMouseOver:fe,onMouseLeave:Ce},s.default.createElement(P.InputText,{type:"text",autoFocus:!0,value:X,onClick:onKeyDown:e=>{e.stopPropagation(),13===e.keyCode&&e.preventDefault()},onChange:placeholder:r.formatMessage({id:"EditComment.AddGif.Search"})}),(()=>{const e=!se||!se.length,t=(()=>{if(void 0!==U)return U;if("undefined"==typeof window)return!1;return U=(()=>{try{const e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")}catch(e){return!1}})(),U})();return s.default.createElement(Q,{isEmpty:e},se.map(e=>{const i=e.images.fixed_height_small.width>100?e.images.fixed_width_small:e.images.fixed_height_small;return s.default.createElement(J,{key:e.id,onClick:src:t?i.webp:i.url})}))})(),s.default.createElement(B,null,s.default.createElement(D.GiphyPowered,{width:80,height:28}))))))},Y=Object(k.c)(X);Y.displayName=X.name;var Z=Y;Quill.register({"formats/emotions":w});const ie=Object(l.default)(x.b).withConfig({displayName:"InteractiveEditorInput__Wrap",componentId:"sc-ty6lwc-0"})(["position:relative;word-break:break-word;.ql-container{display:block;}.ql-editor:drop{cursor:default;}.ql-editor *::selection{background-color:#3297fd;color:#fff;}.ql-editor.ql-blank:hover{cursor:text;}.ql-clipboard{position:absolute;bottom:0;height:1px;width:1px;overflow:hidden;}.ql-editor p{margin:0;}.ql-editor{font-size:",";font-weight:",";line-height:",";}.ql-size-small{line-height:",";font-size:",";}.ql-size-large{line-height:",";font-size:",";}ul,ol{margin:0}ul{list-style-type:disc;}blockquote{padding:0 0 0 20px;margin:0;position:relative;color:",";&::before{content:'';border-radius:2px;margin:2px 0;width:4px;height:calc(100% - 4px);position:absolute;left:0;display:block;background-color:",";box-sizing:border-box;}}@media only screen and (max-width:480px){.ql-editor{font-size:16px;}}"],({fontConfig:{size:e}})=>e+"px",({fontConfig:{lineHeight:e}})=>e+"px",({fontConfig:{lineHeight:e}})=>e-2+"px",({fontConfig:{size:e}})=>e-2+"px",({fontConfig:{lineHeight:e}})=>e+2+"px",({fontConfig:{size:e}})=>e+2+"px",Object(a.getColor)("primaryText"),Object(a.getColor)("primaryText")),oe=l.default.span.withConfig({displayName:"InteractiveEditorInput__EmotionWrap",componentId:"sc-ty6lwc-1"})(["display:",";position:relative;"],({isShown:e})=>e?"block":"none"),ne=Object(l.default)(r.Text).withConfig({displayName:"InteractiveEditorInput__ErrorMessage",componentId:"sc-ty6lwc-2"})(["color:",";display:flex;align-items:center;position:absolute;top:100%;margin-top:4px;"],Object(a.getColor)("errorColor")),se=l.default.span.withConfig({displayName:"InteractiveEditorInput__CloseIcon",componentId:"sc-ty6lwc-3"})(['position:relative;top:1px;::after{display:flex;align-items:center;justify-content:center;font-size:16px;margin:0 0 0 10px;content:"\\00d7";font-weight:bold;color:',";cursor:pointer;}"],Object(a.getColor)("errorColor")),re=l.default.div.withConfig({displayName:"InteractiveEditorInput__ActionsWrap",componentId:"sc-ty6lwc-4"})(["display:",";position:relative;padding-top:16px;& > div:first-child{margin-left:0;margin-right:auto;overflow-x:auto;overflow-y:hidden;padding-bottom:4px;::-webkit-scrollbar{height:4px;width:4px;}::-webkit-scrollbar-thumb{border-radius:4px;background-color:",";}};& > div:last-child{margin-right:0;margin-left:auto;};"],Object(a.getColor)("primaryText",.05));class ae extends s.Component{constructor(e){super(e),n()(this,"modules",{clipboard:{matchVisual:!1},toolbar:{container:`#${this.props.toolbarId}-toolbar`}}),n()(this,"lastSelection",{index:0,length:0}),n()(this,"formats",["bold","italic","strike","underline","blockquote","list","size","emotions"]),n()(this,"currentTextLength",0),n()(this,"currentEmojisLength",0),n()(this,"updateEditorWithEmojis",(e,t)=>{let i=0,o=!1,n=this.getEmojiLength();const s=[],r=e=>{const i=E.g.exec(e);if(E.g.lastIndex=0,i){let a=i[0];const l=e.substring(0,i.index),d=e.substring(i.index+i[0].length,e.length);l.length&&r(l);let c=Object(h.b)(a,"apple",g);c||1!==a.length||(a+="️",c=Object(h.b)(a,"apple",g)),c?t&&n<20&&(o=!0,n++,s.push({insert:{emotions:{name:c.colons}}})):a.endsWith("️")&&s.push({insert:i[0]}),d.length&&r(d)}else s.push({insert:e})};e.ops.forEach(e=>{e.retain&&(i+=e.retain),e.insert&&("string"==typeof e.insert?(i&&(s.push({retain:i}),i=0),e.insert.length&&s.push({delete:e.insert.length}),r(e.insert)):i++)}),o&&this.editor.updateContents(new p.a(s))}),n()(this,"handleChange",(e,t)=>{const i=this.quill,o=this.editor,n=this.props,s=n.defaultValue,r=n.input,a=r.onBodyChange,l=r.onTextChange,d=n.userData.isAuthorized,c=n.onDefaultValueInitialize;if(!i||!o)return;o.getContents();const h=o.getText().trimRight();this.currentTextLength=h.length;const u=this.unprivilegedEditor.getHTML();return this.isFirstHandleChange&&s&&(this.isFirstHandleChange=!1,c&&c(u)),a(u),l(h.trim()),d&&this.handleEmojiColonsInput(),this.updateEditorWithEmojis(t,this.props.userData.isAuthorized),o.getContents()}),n()(this,"handleEmojiColonsInput",()=>{const e=this.editor.getSelection();let t=0;e&&e.index&&(t=e.index);const i=this.editor.getText(t-1,1),o=-1!==this.emojiColonStartPosition&&":"===i,n=t<this.emojiColonStartPosition||/\s/.test(i);t!==this.emojiColonStartPosition&&(o?Object(E.e)(this.inputColons)&&this.onSelectEmoji({emoji:this.inputColons,length:this.inputColons.length+2}):n?this.clearAutocomplete():":"!==i?-1!==this.emojiColonStartPosition&&(this.inputColons=this.editor.getText(this.emojiColonStartPosition,t-this.emojiColonStartPosition)):this.emojiColonStartPosition=t)}),n()(this,"getOps",()=>{const e=this.unprivilegedEditor?this.unprivilegedEditor.getContents().ops:void 0;return e&&e.map(e=>{e.insert.emotions&&delete e.insert.emotions.node}),e}),n()(this,"handleChangeSelection",()=>{if(this.hightlightEmojis(),-1!==this.pasteCursorPosition){const e=this.pasteCursorPosition;this.pasteCursorPosition=-1,e&&this.editor.setSelection(e)}else this.lastSelection=this.editor.getSelection()||this.lastSelection}),n()(this,"hightlightEmojis",()=>{if(!this.editor)return;this.editor.root.querySelectorAll("span.emotions").forEach(e=>{e.style.backgroundColor="transparent"});const e=this.editor.getSelection();if(!e||!e.length)return;const t=e.index,i=e.length;this.editor.getContents(t,i).ops.filter(({insert:e})=>!!e.emotions).forEach(({insert:e})=>{this.editor.root.querySelector(`span[data-position="${e.emotions.position}"]`).style.backgroundColor=w.highlightColor})}),n()(this,"setInputFocused",e=>{const t=this.props,i=t.toolbarId,o=t.onFocusChange,n=document.querySelector(`#${i}-wrap .ql-editor`);n&&n.setAttribute("isFocused",""+e);const s=document.querySelector(`#${i}-wrap .form-wrap`);s&&s.setAttribute("isFocused",""+e);const r=document.querySelector(`#${i}-wrap .actions`);r&&r.setAttribute("isFocused",""+e),o&&o(e),this.setState({isFocused:e})}),n()(this,"setCursorInInput",()=>{const e=this.editor,t=this.lastSelection,i=document.querySelector(`#${this.props.toolbarId}-wrap .ql-editor`);if(!e)return;const o=t.index+t.length,n=e.getLength();0===o&&n>0&&this.isFocusControlActive&&(this.isFocusControlActive=!1,this.lastSelection={index:n-1,length:0});const s=this.quill.editor.selection.hasFocus;this.quill.editor.selection.hasFo>!0,e.setSelection(this.lastSelection,"silent"),this.quill.editor.selection.hasFocus=s,i&&i.focus({preventScroll:!0})}),n()(this,"handleFocusChanged",c()((e,t)=>{if(this.isFocusFreezed)return;const i=this.props.input.onFocus;this.setInputFocused(e),this.isInputInFocus=e,e&&t&&i&&i(t)},100)),n()(this,"registerQuillRef",e=>{if(!e)return;if(!this.isFirstRender)return;this.isFirstRender=!1;const t=this.props,i=t.input.onKeyDown,o=t.autoFocus,n=t.toolbarId,s=t.isAppearFocused,r=t.placeholder,a=t.defaultValue;this.quill=e,setTimeout(()=>{this.editor=e.getEditor(),this.unprivilegedEditor=e.makeUnprivilegedEditor(this.editor),this.editor.root.onkeydown=i,this.editor.root.onfocus=e=>this.handleFocusChanged(!0,e),this.editor.root.onb,e),void 0===this.isInputInFocus&&void 0!==o&&(this.isInputInFocus=o);const t=document.querySelector(`#${n}-wrap .ql-editor`);if(t&&(t.ondrop=e=>e.preventDefault(),t.ondragoe"}),a){const e=new p.a(Object(E.b)(a.text,a.styles));e.forEach(e=>{e.insert.emotions&&(e.insert.emotions.handleClick=this.emojiClickHandler)}),this.quill.setEditorContents(this.editor,e),this.quill.editor.root.dataset.placeholder=r}s&&this.setEditorFocused(!0);const l=this.editor.getLength();this.editor.selection.savedRange={index:l-1,length:0},window.addEventListener("mouseup",this.unfreezeInputFocus)},0)}),n()(this,"unfreezeInputFocus",()=>{this.isFocusFreezed=!1}),n()(this,"freezeInputFoc!0}),n()(this,"keepInputInFocus",()=>{this.handleFocusChanged(this.isInputInFocus),this.isInputInFocus&&this.setCursorInInput()}),n()(this,"emojiClickHandler",()=>{if(!this.editor)return;const e=this.editor.getSelection().index;this.editor.setSelection(e+1,0,"silent")}),n()(this,"insertEmoji",e=>{if(!Object(E.e)(e)||this.getEmojiLength()>=20)return;let t=0;const i=Object(b.a)(),o=Object(h.a)(te(te({html:!0,size:20,emoji:e},e),{},{native:i,set:i?void 0:"apple"})),n=this.editor.getSelection();n&&n.index&&(t=n.index);const s=e.colons;this.editor.insertEmbed(t,"emotions",{emoji:o,name:s,handleClick:this.emojiClickHandler,position:t}),this.editor.setSelection(t+1)}),n()(this,"getEmojiLength",()=>{if("undefined"==typeof document||!this.editor)return 0;const e=this.editor.getContents().ops;return this.currentEmojisLength=e.filons).length,this.currentEmojisLength}),n()(this,"clearInput",()=>{this.editor.setContents([]),this.editor.setText("")}),n()(this,"clearAutocomplete",()=>{this.emojiColonStartPosition=-1,this.inputColons=""}),n()(this,"onSelectEmoji",({emoji:e,length:t,clearAfterInsert:i})=>{const o=this.props,n=o.recentEmojis,s=o.setRecentEmojis,r=o.saveRecentEmojis,a=this.emojiColonStartPosition-1,l=t||this.inputColons.length+1;this.clearAutocomplete(),this.editor.deleteText(a,l),this.editor.setSelection(a),this.insertEmoji({id:e,colons:`:${e}:`}),i&&this.editor.deleteText(a+1,1);const d=n?[...n]:[];var c=d.indexOf(e);-1!==c&&d.splice(c,1),d.unshift(e),d.length>27&&d.splice(27),s&&s(d),r&&r(d)}),n()(this,"handleChangeEmojiSelection",()=>{-1!==this.emojiColonStartPosition&&this.editor.setSelection(this.emojiColonStartPosition+this.inputColons.length)}),n()(this,"handleEmojiPickerToggle",()=>{const e=this.state.isShowEmojiPicker;this.setState({isShowEmojiPicker:!e})}),n()(this,"handleEmojiOuterClick",()=>{this.isUserOverToggleEmojiButton||this.setState({isShowEmojiPicker:!1})}),n()(this,"setEditorFocused",e=>{const t=this.setInputFocused,i=this.handleFocusChanged,o=this.setCursorInInput;t(!0),i(!0),e&&o()}),this.state={isForceInputFocused:!1,isShowEmojiPicker:!1,isFocused:!1,display:"",videoUrl:"",gifSlug:"",showError:!1,editor:null},this.quill=null,this.editor=null,this.unprivilegedEditor=null,this.isInputInFocus=void 0,this.isFocusFreezed=!1,this.isFirstRender=!0,this.isSecondRender=!0,this.emojiColonStartPosition=-1,this.inputColons="",this.isUserOverToggleEmojiButton=!1,this.isFirstHandleChange=!0,this.isFocusControlActives)}componentDidMount(){const e=this.props.error;this.quill.editor.selection.scrollIntoV>{};const t=this.quill.editor.clipboard.container.focus,i=this.quill.editor.selection.root.focus;this.quill.editor.selection.root.focus=()=>{i.apply(this.quill.editor.selection.root,[{preventScroll:!0}])},this.quill.editor.clipboard.container.focus=()=>{t.apply(this.quill.editor.clipboard.container,[{preventScroll:!0}])};const o=this.quill.editor.root;this.setState({editor:o}),e&&this.setState({showError:!0})}render(){const e=this.state,t=e.showError,i=e.editor,o=this.props,n=o.error,r=o.placeholder,a=o.toolbarId,l=o.userData,d=o.isToolbarShown,c=o.fontConfig,h=void 0===c?{size:15,lineHeight:21,weight:400}:c,u=o.defaultValue,p=o.isVideosEnabled,g=o.isGifsEnabled,m=o.isImagesEnabled,b=o.isMediaContentShown,C=o.isActionInProgress,w=o.setMediaContentError,E=o.openAuth,y=o.isAddCommentActionInProgress,I=o.isAnonymous,v=o.imgUploadRef,O=o.changeCommentState,S=o.content,F=o.setMediaContent,A=o.setIsUploadInProgress,k=o.uploadImagesToCDN,P=d&&(this.state.isFocused||this.currentEmojisLength||this.currentTextLength),q=!u||!this.isFirstRender;return i&&(i.dataset.placeholder=r),s.default.createElement(ie,{id:a+"-wrap",fontConfig:h},s.default.createElement(x.a,{className:"form-wrap",isShowActions:P,onClick:()=>{this.isInputInFocus?this.keepInputInFocus():this.setEditorFocused(!0)}},s.default.createElement(f.a,{e)},theme:null,placeholder:q?r:"",formats:this.formats,modules:this.modules,onChange:this.handleChange,onChangeSelection:this.handleChangeSelection}),s.default.createElement(re,{className:"actions",onMouseDownCapture:()=>this.freezeInputFocus(),onMouseUpCapts(),isShown:P},s.default.createElement(j.a,{toolbarId:a,isToolbarShown:d,quill:this.quill,setEditorFocused:this.setEditorFocused,isMediaContentShown:b,isGifsEnabled:g,isImagesEnabled:m,isVideosEnabled:p,collapsableRender:()=>b&&s.default.createElement(Z,{isActionInProgress:C,isGifsEnabled:g,isImagesEnabled:m,isVideosEnabled:p,imgUploadRef:v,setMediaContentError:w,setEditorFocused:this.setEditorFocused,keepInputInFocus:this.keepInputInFocus,userData:l,openAuth:E,isAddCommentActionInProgress:y,isAnonymous:I,changeCommentState:O,content:S,setMediaContent:F,setIsUploadInProgress:A,uploadImagesToCDN:k})}),s.default.createElement(oe,{isShown:l.isAuthorized}))),n&&t&&s.default.createElement(ne,{small:!0},n,s.default.createElement(se,{onCl1})})))}}t.default=ae}}]);