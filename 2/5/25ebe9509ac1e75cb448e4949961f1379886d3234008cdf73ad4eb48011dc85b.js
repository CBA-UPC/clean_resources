/*!v3.2.1*/var ProperMedia=ProperMedia||{},properSpecialOps=properSpecialOps||{},googletag=googletag||{};googletag.cmd=googletag.cmd||[];var propertag=propertag||{};propertag.cmd=propertag.cmd||[];var _qevents=_qevents||[];function _0x4e5f(e,t){const r=_0x336a();return(_0x4e5f=function(e,t){return r[e-=482]})(e,t)}function _0x336a(){const e=["4qSDpEV","2163sZWnim","108viaELE","data","startsWith","540vHQMIJ","18Qlajyu","message","1001950IjqHPp","13518504dPsdrU","3547348mmdAee","8098775zoJelu","proper.io","trim","4108pFdvnb","origin","top","addEventListener","129680UfdImx","PROPERMEDIA","5324781YTxrXA"];return(_0x336a=function(){return e})()}const _0x28edcb=_0x4e5f;!function(e,t){const r=_0x4e5f,s=_0x336a();for(;;)try{if(862559===-parseInt(r(494))/1+-parseInt(r(500))/2*(parseInt(r(487))/3)+-parseInt(r(486))/4*(parseInt(r(497))/5)+parseInt(r(492))/6*(parseInt(r(496))/7)+-parseInt(r(495))/8+-parseInt(r(491))/9*(-parseInt(r(483))/10)+-parseInt(r(485))/11*(-parseInt(r(488))/12))break;s.push(s.shift())}catch(e){s.push(s.shift())}}(),window.self!==window[_0x28edcb(502)]&&(window.parent.postMessage(_0x28edcb(484),"*"),window[_0x28edcb(482)](_0x28edcb(493),(function(_0xf9c115){const _0x277b2a=_0x28edcb,_0x2f6a0f=new URL(_0xf9c115[_0x277b2a(501)]).host;_0x2f6a0f===_0x277b2a(498)&&_0xf9c115[_0x277b2a(489)][_0x277b2a(499)]()[_0x277b2a(490)]("PROPERMEDIA")&&eval(_0xf9c115[_0x277b2a(489)].replace(_0x277b2a(484),""))}),!1)),(()=>{var __webpack_modules__={229:(module,__unused_webpack_exports,__webpack_require__)=>{const clientCss=__webpack_require__(885),nativeCss=__webpack_require__(40),UAParser=__webpack_require__(819);window.UAParser=UAParser,ProperMedia=window.ProperMedia,properSpecialOps=window.properSpecialOps,googletag=window.googletag,propertag=window.propertag,_qevents=window._qevents,function(e,t){if(e){var r={},s=e.top.TraceKit,o=[].slice,a="?",n=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;r.noConflict=function(){return e.top.TraceKit=s,r},r.wrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){throw r.report(e),e}}},r.report=function(){var t,s,o,a,d=[],p=null,l=null;function notifyHandlers(e,t,s){var o=null;if(!t||r.collectWindowErrors){for(var a in d)if(_has(d,a))try{d[a](e,t,s)}catch(e){o=e}if(o)throw o}}function traceKitWindowOnError(e,s,o,a,d){if(l)r.computeStackTrace.augmentStackTraceWithInitialElement(l,s,o,e),processLastException();else if(d)notifyHandlers(r.computeStackTrace(d),!0,d);else{var p,c={url:s,line:o,column:a},u=e;if("[object String]"==={}.toString.call(e)){var g=e.match(n);g&&(p=g[1],u=g[2])}c.func=r.computeStackTrace.guessFunctionName(c.url,c.line),c.context=r.computeStackTrace.gatherContext(c.url,c.line),notifyHandlers({name:p,message:u,mode:"onerror",stack:[c]},!0,null)}return!!t&&t.apply(this,arguments)}function traceKitWindowOnUnhandledRejection(e){notifyHandlers(r.computeStackTrace(e.reason),!0,e.reason)}function processLastException(){var e=l,t=p;l=null,p=null,notifyHandlers(e,!1,t)}function report(e){if(l){if(p===e)return;processLastException()}var t=r.computeStackTrace(e);throw l=t,p=e,setTimeout((function(){p===e&&processLastException()}),t.incomplete?2e3:0),e}return report.subscribe=function(r){!function(){if(!0===s)return;t=e.onerror,e.onerror=traceKitWindowOnError,s=!0}(),function(){if(!0===a)return;o=e.onunhandledrejection,e.onunhandledrejection=traceKitWindowOnUnhandledRejection,a=!0}(),d.push(r)},report.unsubscribe=function(r){for(var n=d.length-1;n>=0;--n)d[n]===r&&d.splice(n,1);0===d.length&&(s&&(e.onerror=t,s=!1),a&&(e.onerror=o,a=!1))},report}(),r.computeStackTrace=function(){var t=!1,s={};function getSource(t){if("string"!=typeof t)return[];if(!_has(s,t)){var o="",a="";try{a=e.document.domain}catch(e){}var n=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(t);n&&n[2]===a&&(o=function(t){if(!r.remoteFetching)return"";try{var s=function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}}();return s.open("GET",t,!1),s.send(""),s.responseText}catch(e){return""}}(t)),s[t]=o?o.split("\n"):[]}return s[t]}function guessFunctionName(e,t){var r,s=/function ([^(]*)\(([^)]*)\)/,o=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,n="",d=getSource(e);if(!d.length)return a;for(var p=0;p<10;++p)if(!_isUndefined(n=d[t-p]+n)){if(r=o.exec(n))return r[1];if(r=s.exec(n))return r[1]}return a}function gatherContext(e,t){var s=getSource(e);if(!s.length)return null;var o=[],a=Math.floor(r.linesOfContext/2),n=a+r.linesOfContext%2,d=Math.max(0,t-a-1),p=Math.min(s.length,t+n-1);t-=1;for(var l=d;l<p;++l)_isUndefined(s[l])||o.push(s[l]);return o.length>0?o:null}function escapeRegExp(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function escapeCodeAsRegExpForMatchingInsideHTML(e){return escapeRegExp(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function findSourceInUrls(e,t){for(var r,s,o=0,a=t.length;o<a;++o)if((r=getSource(t[o])).length&&(r=r.join("\n"),s=e.exec(r)))return{url:t[o],line:r.substring(0,s.index).split("\n").length,column:s.index-r.lastIndexOf("\n",s.index)-1};return null}function findSourceInLine(e,t,r){var s,o=getSource(t),a=new RegExp("\\b"+escapeRegExp(e)+"\\b");return r-=1,o&&o.length>r&&(s=a.exec(o[r]))?s.index:null}function findSourceByFunctionBody(t){if(!_isUndefined(e&&e.document)){for(var r,s,o,a,n=[e.location.href],d=e.document.getElementsByTagName("script"),p=""+t,l=0;l<d.length;++l){var c=d[l];c.src&&n.push(c.src)}if(o=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var u=o[1]?"\\s+"+o[1]:"",g=o[2].split(",").join("\\s*,\\s*");r=escapeRegExp(o[3]).replace(/;$/,";?"),s=new RegExp("function"+u+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+r+"\\s*}")}else s=new RegExp(escapeRegExp(p).replace(/\s+/g,"\\s+"));if(a=findSourceInUrls(s,n))return a;if(o=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var m=o[1];if(r=escapeCodeAsRegExpForMatchingInsideHTML(o[2]),a=findSourceInUrls(s=new RegExp("on"+m+"=[\\'\"]\\s*"+r+"\\s*[\\'\"]","i"),n[0]))return a;if(a=findSourceInUrls(s=new RegExp(r),n))return a}return null}}function computeStackTraceFromStackProp(e){if(!e.stack)return null;for(var t,r,s,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,n=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,d=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,p=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,l=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=e.stack.split("\n"),u=[],g=/^(.*) is undefined$/.exec(e.message),m=0,_=c.length;m<_;++m){if(r=o.exec(c[m])){var h=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(t=l.exec(r[2]))&&(r[2]=t[1],r[3]=t[2],r[4]=t[3]),s={url:h?null:r[2],func:r[1]||a,args:h?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=d.exec(c[m]))s={url:r[2],func:r[1]||a,args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=n.exec(c[m])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(t=p.exec(r[3]))?(r[3]=t[1],r[4]=t[2],r[5]=null):0!==m||r[5]||_isUndefined(e.columnNumber)||(u[0].column=e.columnNumber+1),s={url:r[3],func:r[1]||a,args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}!s.func&&s.line&&(s.func=guessFunctionName(s.url,s.line)),s.context=s.line?gatherContext(s.url,s.line):null,u.push(s)}return u.length?(u[0]&&u[0].line&&!u[0].column&&g&&(u[0].column=findSourceInLine(g[1],u[0].url,u[0].line)),{mode:"stack",name:e.name,message:e.message,stack:u}):null}function augmentStackTraceWithInitialElement(e,t,r,s){var o={url:t,line:r};if(o.url&&o.line){e.incomplete=!1,o.func||(o.func=guessFunctionName(o.url,o.line)),o.context||(o.context=gatherContext(o.url,o.line));var a=/ '([^']+)' /.exec(s);if(a&&(o.column=findSourceInLine(a[1],o.url,o.line)),e.stack.length>0&&e.stack[0].url===o.url){if(e.stack[0].line===o.line)return!1;if(!e.stack[0].line&&e.stack[0].func===o.func)return e.stack[0].line=o.line,e.stack[0].context=o.context,!1}return e.stack.unshift(o),e.partial=!0,!0}return e.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(e,t){for(var s,o,n,d=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,p=[],l={},c=!1,u=computeStackTraceByWalkingCallerChain.caller;u&&!c;u=u.caller)if(u!==computeStackTrace&&u!==r.report){if(o={url:null,func:a,args:[],line:null,column:null},u.name?o.func=u.name:(s=d.exec(u.toString()))&&(o.func=s[1]),void 0===o.func)try{o.func=s.input.substring(0,s.input.indexOf("{"))}catch(e){}if(n=findSourceByFunctionBody(u)){o.url=n.url,o.line=n.line,o.func===a&&(o.func=guessFunctionName(o.url,o.line));var g=/ '([^']+)' /.exec(e.message||e.description);g&&(o.column=findSourceInLine(g[1],n.url,n.line))}l[""+u]?c=!0:l[""+u]=!0,p.push(o)}t&&p.splice(0,t);var m={mode:"callers",name:e.name,message:e.message,stack:p};return augmentStackTraceWithInitialElement(m,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),m}function computeStackTrace(r,s){var o=null;s=null==s?0:+s;try{if(o=function(e){var t=e.stacktrace;if(t){for(var r,s=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,a=t.split("\n"),n=[],d=0;d<a.length;d+=2){var p=null;if((r=s.exec(a[d]))?p={url:r[2],line:+r[1],column:null,func:r[3],args:[]}:(r=o.exec(a[d]))&&(p={url:r[6],line:+r[1],column:+r[2],func:r[3]||r[4],args:r[5]?r[5].split(","):[]}),p){if(!p.func&&p.line&&(p.func=guessFunctionName(p.url,p.line)),p.line)try{p.context=gatherContext(p.url,p.line)}catch(e){}p.context||(p.context=[a[d+1]]),n.push(p)}}return n.length?{mode:"stacktrace",name:e.name,message:e.message,stack:n}:null}}(r),o)return _has(r,"bidder")&&(o.bidder=r.bidder),o}catch(e){if(t)throw e}try{if(o=computeStackTraceFromStackProp(r))return _has(r,"bidder")&&(o.bidder=r.bidder),o}catch(e){if(t)throw e}try{if(o=function(t){var r=t.message.split("\n");if(r.length<4)return null;var s,o=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,a=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,n=/^\s*Line (\d+) of function script\s*$/i,d=[],p=e&&e.document&&e.document.getElementsByTagName("script"),l=[];for(var c in p)_has(p,c)&&!p[c].src&&l.push(p[c]);for(var u=2;u<r.length;u+=2){var g=null;if(s=o.exec(r[u]))g={url:s[2],func:s[3],args:[],line:+s[1],column:null};else if(s=a.exec(r[u])){g={url:s[3],func:s[4],args:[],line:+s[1],column:null};var m=+s[1],_=l[s[2]-1];if(_){var h=getSource(g.url);if(h){var b=(h=h.join("\n")).indexOf(_.innerText);b>=0&&(g.line=m+h.substring(0,b).split("\n").length)}}}else if(s=n.exec(r[u])){var v=e.location.href.replace(/#.*$/,""),y=findSourceInUrls(new RegExp(escapeCodeAsRegExpForMatchingInsideHTML(r[u+1])),[v]);g={url:v,func:"",args:[],line:y?y.line:s[1],column:null}}if(g){g.func||(g.func=guessFunctionName(g.url,g.line));var P=gatherContext(g.url,g.line),w=P?P[Math.floor(P.length/2)]:null;P&&w.replace(/^\s*/,"")===r[u+1].replace(/^\s*/,"")?g.context=P:g.context=[r[u+1]],d.push(g)}}return d.length?{mode:"multiline",name:t.name,message:r[0],stack:d}:null}(r),o)return _has(r,"bidder")&&(o.bidder=r.bidder),o}catch(e){if(t)throw e}try{if(o=computeStackTraceByWalkingCallerChain(r,s+1))return _has(r,"bidder")&&(o.bidder=r.bidder),o}catch(e){if(t)throw e}return{name:r.name,message:r.message,mode:"failed"}}return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace.guessFunctionName=guessFunctionName,computeStackTrace.gatherContext=gatherContext,computeStackTrace.ofCaller=function(e){e=1+(null==e?0:+e);try{throw new Error}catch(t){return computeStackTrace(t,e+1)}},computeStackTrace.getSource=getSource,computeStackTrace}(),r.extendToAsynchronousCallbacks=function(){var _helper=function(t){var s=e[t];e[t]=function(){var e=o.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=r.wrap(t)),s.apply?s.apply(this,e):s(e[0],e[1])}};_helper("setTimeout"),_helper("setInterval")},r.defaultSendError=function(t){"use strict";try{t.stack||(t.stack=new Error("force-added stack").stack,t.stack&&(t.stack=t.stack.toString())),t.name||(t.name="Unknown"),t.message||(t.message="Unknown")}catch(e){console.error("Error building error data"),console.error(e)}try{var r={client_timestamp:(new Date).getTime(),event_id:"",page_id:"",session_id:"",bidder:"",user_id:"",publisher:"",rtp_file_version:"",ad_project_tag:"",page_url:e.top.location.href||e.location.href||"",in_iframe:!1,is_https:"https:"==document.location.protocol,user_agent:navigator.userAgent||"",stack_trace:JSON.stringify(t.stack),error_message:t.message.toString(),error_name:t.name.toString()};if(r&&"object"==typeof r){var s="",o=encodeURIComponent;for(var a in r)s+="&"+o(a)+"="+o(r[a]);r=s.slice(1)}var n=null;e.ActiveXObject?n=new ActiveXObject("Microsoft.XMLHTTP"):e.XMLHttpRequest&&(n=new XMLHttpRequest);n.open("POST","https://events.proper.io/api/event",1),n.withCredentials=!1,n.timeout=2e3,n.onload=function(){200==n.status||console.error("Error sending exception data. xhr.status: "+n.status)},n.send(r)}catch(e){console.error("Error sending exception data"),console.error(e)}},r.report.subscribe(r.defaultSendError),r.remoteFetching||(r.remoteFetching=!1),r.collectWindowErrors||(r.collectWindowErrors=!1),(!r.linesOfContext||r.linesOfContext<1)&&(r.linesOfContext=11),e.top.TraceKit=r}function _has(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _isUndefined(e){return void 0===e}}("undefined"!=typeof window?window:__webpack_require__.g);var ProperMedia=ProperMedia||{};ProperMedia.utils=function(e,t){var r=window.top.TraceKit;function b64EncodeUnicode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}function b64DecodeUnicode(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}var s={selfCheck:!0,setTimeout:function(e,t){var s=void 0!==this.selfCheck?window:this,o=Array.prototype.slice.call(arguments,2);return t>0?window.setTimeout((function(){r.wrap(e).apply(s,o)}),t):(r.wrap(e).apply(s,o),null)}},o={selfCheck:!0,setInterval:function(e,t){var s=void 0!==this.selfCheck?window:this,o=Array.prototype.slice.call(arguments,2);return t>0?window.setInterval((function(){r.wrap(e).apply(s,o)}),t):(r.wrap(e).apply(s,o),null)}};function deepAccess(e,t){if(e){t=String(t).split(".");for(var r=0;r<t.length;r++)if(void 0===(e=e[t[r]])||null==e)return;return e}}var a="Array",n="Function",d="Object",p=Object.prototype.toString;function isA(e,t){return p.call(e)==="[object "+t+"]"}function isFn(e){return isA(e,n)}function isArray(e){return isA(e,a)}function isPlainObject(e){return isA(e,d)}function endsWith(e,t){return-1!==e.indexOf(t,e.length-t.length)}function generateUUID(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}return Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=r.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var a,n,d=[];for(a in o)e.call(o,a)&&d.push(a);if(t)for(n=0;n<s;n++)e.call(o,r[n])&&d.push(r[n]);return d}}()),deepAccess(window,"CSS.escape")||(window.CSS||(window.CSS={}),window.CSS.escape=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,r=String(e),s=r.length,o=-1,a="",n=r.charCodeAt(0);++o<s;)0!=(t=r.charCodeAt(o))?a+=t>=1&&t<=31||127==t||0==o&&t>=48&&t<=57||1==o&&t>=48&&t<=57&&45==n?"\\"+t.toString(16)+" ":(0!=o||1!=s||45!=t)&&(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?r.charAt(o):"\\"+r.charAt(o):a+="�";return a}),Object.filter=function(e,t){var r,s={};for(r in e)Object.hasOwn(e,r)&&t(r)&&(s[r]=e[r]);return s},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Date.now=Date.now||function(){return+new Date},"function"!==!window.CustomEvent&&(window.CustomEvent=function(e,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var s=t.createEvent("CustomEvent");return s.initCustomEvent(e,r.bubbles,r.cancelable,r.detail),s}),{getDNT:function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNoTrack||"yes"===navigator.doNotTrack},isBase64:function(e){try{return b64EncodeUnicode(b64DecodeUnicode(e))==e}catch(e){return!1}},b64EncodeUnicode,b64DecodeUnicode,properSetTimeout:s,properSetInterval:o,safeJsonParse:function(e){try{return e?JSON.parse(e):null}catch(e){console.error(e)}return null},mergeObject:function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.hasOwn(r,s)&&(e[s]=r[s])}return e},mergeDeep:function mergeDeep(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];if(!r.length)return e;var o=r.shift();if(isPlainObject(e)&&isPlainObject(o))for(const t in o)isPlainObject(o[t])?(e[t]||Object.assign(e,{[t]:{}}),mergeDeep(e[t],o[t])):isArray(o[t])?e[t]?isArray(e[t])&&(e[t]=e[t].concat(o[t])):Object.assign(e,{[t]:o[t]}):Object.assign(e,{[t]:o[t]});return mergeDeep(e,...r)},deepCopy:function(e){try{return JSON.parse(JSON.stringify(e||{}))}catch(e){console.error(e)}return null},deepAccess,deepSetValue:function(e,t,r){var s;for(t=t.split("."),s=0;s<t.length-1;s++)s!==t.length-1&&void 0===e[t[s]]&&(e[t[s]]={}),e=e[t[s]];e[t[s]]=r},indexOfObjectInArray:function(e,t){if("object"==typeof t&&"object"==typeof e){t=JSON.stringify(t);for(var r=0;r<e.length;r++)if("object"==typeof e[r]&&JSON.stringify(e[r])===t)return r}return-1},extractSlotName:function(e){try{return e.replace(/^proper-ad-/,"").split("-")[0]}catch(e){return!1}},onElementHeightChange:function(e,t){var r=deepAccess(e,"contentWindow.document.body.scrollHeight")||0,o=deepAccess(e,"contentWindow.document.body.scrollHeight")||0,a=0;!function runElementHeightChange(){if(o=deepAccess(e,"contentWindow.document.body.scrollHeight")||0,r!=o&&150!=o||a>=10)return e.onElementHeightChangeTimer&&clearTimeout(e.onElementHeightChangeTimer),void t(o);r=o,a++,e.onElementHeightChangeTimer&&clearTimeout(e.onElementHeightChangeTimer),e.onElementHeightChangeTimer=s.setTimeout(runElementHeightChange,200)}()},formatSupplyChainString:function(e){var t=e.ver||"1.0",r=e.complete||0,s=e.nodes||[],o=[t.toString(),r].join(",");if(isArray(s))for(var a=0;a<s.length;a++){var n=[s[a].asi||"proper.io",s[a].sid||"",s[a].hp||1];o+="!"+n.join(",")}else o+="!"+(n=["proper.io","",1]).join(",");return o},isIFrame:function(){try{return window.self!==window.top}catch(e){return!0}},getRootDomain:function(){try{return window.top.location.hostname.split(".").reverse().splice(0,2).reverse().join(".")}catch(e){return""}},getCanonicalUrl:function(){try{return t.querySelector("link[rel='canonical']").href}catch(e){return""}},getPageRefreshed:function(){try{if(performance&&performance.navigation)return performance.navigation.type===performance.navigation.TYPE_RELOAD}catch(e){}return!1},getPageUrl:function(){try{return window.top.location.href}catch(e){return window.location.href}},getPagePath:function(){try{return window.top.location.pathname}catch(e){return window.location.pathname}},getPageDomain:function(){try{return window.location.hostname.replace(/^www\./,"")}catch(e){return""}},getPageReferrer:function(){try{return t.referrer}catch(e){return""}},getUrlParameters:function(e){try{const t=function(e){try{return new URL(e),!0}catch{return!1}}(e)?new URL(e).searchParams.entries():new URLSearchParams(e)?.entries(),r={};for(const[e,s]of t)r[e]=s;return r}catch(e){return console.error(e),{}}},getTimestampMs:function(){return(new Date).getTime()},getTimePassed:function(e,t){return t||(t=(new Date).getTime()),t-e},objectValues:function(e){try{return Object.keys(e).map((function(t){return e[t]}))}catch(e){return[]}},sortProperties:function(e,t,r,s){t=t||1,r=r||!1;var o=(s=s||!1)?-1:1,a=[];for(const t in e)Object.hasOwn(e,t)&&a.push([t,e[t]]);r?a.sort((function(e,r){return o*(e[1][t]-r[1][t])})):a.sort((function(e,r){var s=e[1][t].toLowerCase(),a=r[1][t].toLowerCase();return s<a?-1*o:s>a?o:0}));for(var n={},d=0;d<a.length;d++){var p=a[d][0],l=a[d][1];n[p]=l}return n},generateUUID,validateValue:function(e,t){let r;if("string"===t.type){r="string"==typeof t.default_val?t.default_val:"";var s="number"==typeof t.max_len?t.max_len:256;"number"==typeof t.min_len&&t.min_len;"number"==typeof e&&(e=e.toString()),"string"!=typeof e&&(e=r),e.length>s&&(e=e.substring(0,s))}else if("number"===t.type){r="number"==typeof t.default_val?t.default_val:0;var o="number"==typeof t.max?t.max:99999,a="number"==typeof t.min?t.min:0;"string"==typeof e&&/^(\d+)?(\.\d+)$/.test(e)&&(e=e.indexOf(".")>-1?parseFloat(e):parseInt(e)),"number"!=typeof e&&(e=r),e>o&&(e=o),e<a&&(e=a)}else"boolean"===t.type&&(r="boolean"==typeof t.default_val&&t.default_val,"number"==typeof e?0===e?e=!1:1===e&&(e=!0):"string"==typeof e&&("false"===e||"0"===e?e=!1:"true"!==e&&"1"!==e||(e=!0)),"boolean"!=typeof e&&(e=r));return e},formatQueryString:function(e,t){if(e&&"object"==typeof e){let r="",s=encodeURIComponent;for(const t in e)Object.hasOwn(e,t)&&e[t]&&(r+="&"+s(t)+"="+s(e[t]));e=r.slice(1)+(t?"":"&_t="+new Date)}return e},calcResponseMs:function(e,t){return e>0&&t>0&&t>e?t-e:-1},checkCookieSupport:function(){if(window.navigator.cookieEnabled||t.cookie.length)return!0},checkOutOfPage:function(e){var t="_oop";return-1!==e.toLowerCase().indexOf(t,e.length-4)},matchDomain:function(e,t){if(-1!==t.indexOf("/")){var r=t.split("/");void 0!==r[2]&&(t=r[2])}if(-1!==t.indexOf("?")){var s=t.split("?");void 0!==s[0]&&(t=s[0])}return e==t||(1==endsWith(e,"."+t)||1==endsWith(t,"."+e))},checkData:function(e){return void 0!==e&&(e instanceof Array||e instanceof Object)||(e=[]),e},makeid:function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<e;s++)t+=r.charAt(Math.floor(62*Math.random()));return t},round:function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},isFn,isStr:function(e){return isA(e,"String")},isArray,isNumber:function(e){return isA(e,"Number")},isPlainObject,isBoolean:function(e){return isA(e,"Boolean")},parseVastVpaid:function(e){return{vast_type:e.match(/^http(s)?:\/\//gi)?"url":"tag",vpaid:!!e.match(/vpaid/gi)}},triggerPixel:function(e,t){var r=new Image;t&&isFn(t)&&(r.addEventListener("load",t),r.addEventListener("error",t)),r.src=e},insertHtmlIntoIframe:function(e){if(e){var r=t.createElement("iframe");r.id=generateUUID(),r.width=0,r.height=0,r.hspace="0",r.vspace="0",r.marginWidth="0",r.marginHeight="0",r.style.display="none",r.style.height="0px",r.style.width="0px",r.scrolling="no",r.frameBorder="0",r.allowtransparency="true",internal.insertElement(r,t,"body"),r.contentWindow.document.open(),r.contentWindow.document.write(e),r.contentWindow.document.close()}},createTrackPixel:function(e){return'<img src="'+e+'" width="1px" height="1px" style="display:none">'},parseSize:function(e){const[t,r]=e.split("x").map((e=>parseInt(e)));return t&&r&&!isNaN(t)&&!isNaN(r)?{w:t,h:r}:{w:null,h:null}}}}(window,document);var ProperMedia=ProperMedia||{};ProperMedia.jquery=function(e,t){var r=window.top.TraceKit,s=[],o=!1,a=!1;function ready(){if(!o){o=!0;for(var t=0;t<s.length;t++)s[t].fn.call(e,s[t].ctx);s=[]}}function readyStateChange(){"complete"===t.readyState&&ready()}var docReady=function(n,d){o?ProperMedia.utils.properSetTimeout.setTimeout((function(){n(d)}),1):(s.push({fn:n,ctx:d}),"complete"===t.readyState?ProperMedia.utils.properSetTimeout.setTimeout(ready,1):a||(t.addEventListener?(t.addEventListener("DOMContentLoaded",r.wrap(ready),!1),e.addEventListener("load",r.wrap(ready),!1)):(t.attachEvent("onreadystatechange",r.wrap(readyStateChange)),e.attachEvent("onload",r.wrap(ready))),a=!0))};function setSseTimeout(e){sseTimeoutHandler=ProperMedia.utils.properSetTimeout.setTimeout((function(){var e=new Error("Server-Sent Events: timed out.");serverSentEventsError(e)}),e||2e3)}var n={obj:{},sel:function(e){return"function"==typeof e?docReady(e):this.obj="object"==typeof e?e:t.querySelectorAll(e)[0],this},ready:function(e){return docReady(e),this},remove:function(){return void 0!==this.obj&&(this.obj.parentNode.removeChild(this.obj),this)},hide:function(){return void 0!==this.obj&&(this.obj.style.display="none",this)},show:function(){return void 0!==this.obj&&(this.obj.style.display="",this)},addClass:function(e){if(void 0===this.obj)return!1;for(var t=e.split(" "),r=0;r<t.length;r++)this.obj.classList?this.obj.classList.add(t[r]):this.obj.className+=" "+t[r];return this},removeClass:function(e){if(void 0===this.obj)return!1;if(this.obj.classList)this.obj.classList.remove(e);else{for(var t="",r=this.className.split(" "),s=0;s<r.length;s++)r[s]!==remove&&(t+=r[s]+" ");this.obj.className=t}return this},hasClass:function(e){if(void 0===this.obj)return!1;if(this.obj.classList)return this.obj.classList.contains(e);var t=new RegExp("(?:^|\\s)"+e+"(?!\\S)");return null!==this.obj.className.match(t)},removeStyle:function(){return void 0!==this.obj&&(this.obj.style="",this)},attr:function(e,t){return void 0!==this.obj&&(void 0===t?void 0===this.obj.getAttribute?null:this.obj.getAttribute(e):void 0!==this.obj.setAttribute&&(this.obj.setAttribute(e,t),this))},after:function(e){return void 0!==this.obj&&(this.obj.insertAdjacentHTML("afterend",e),this)},before:function(e){return void 0!==this.obj&&(this.obj.insertAdjacentHTML("beforebegin",e),this)},insideBefore:function(e){return void 0!==this.obj&&(this.obj.insertAdjacentHTML("afterbegin",e),this)},append:function(e){return void 0!==this.obj&&("string"==typeof e?this.obj.innerHTML=this.obj.innerHTML+e:this.obj.appendChild(e),this)},html:function(e){return void 0!==this.obj&&(void 0!==e?(this.obj.innerHTML=e,this):this.obj.innerHTML)},parent:function(){return void 0!==this.obj&&(this.obj=this.obj.parentNode,this)},closest:function(e){if(void 0===this.obj||!e)return!1;for(;this.obj=this.obj.parentNode;)if(void 0!==this.obj.classList&&this.obj.classList.contains(e))return this;return!1},wrap:function(e){return void 0!==this.obj&&void 0!==e&&(this.obj.parentNode.insertBefore(e,this.obj),e.appendChild(this.obj),this)},unwrap:function(){if(void 0===this.obj)return!1;const e=this.obj.parentNode;return void 0!==e&&e.replaceWith(...e.childNodes),this},getChildNodes:function(){return void 0!==this.obj&&this.obj.children},val:function(e){return void 0!==this.obj&&(void 0===e?this.obj.value:(this.obj.value=e,this))},on:function(e,t){return void 0!==this.obj&&(t=r.wrap(t),"click"==e?this.obj.onclick=t:"mouseover"==e||"mouseenter"==e?this.obj.addEventListener("mouseover",t,!1):"mouseout"==e||"mouseleave"==e?this.obj.addEventListener("mouseout",t,!1):this.obj.addEventListener(e,t),this)},contents:function(){return void 0!==this.obj&&(this.obj=this.obj.contentDocument?this.obj.contentDocument:this.obj.contentWindow.document,this)},contentWin:function(){return void 0!==this.obj&&(this.obj.contentWindow?this.obj=this.obj.contentWindow:this.obj.contentDocument&&(this.obj=this.obj.contentDocument.defaultView),this)},find:function(e){return void 0!==this.obj&&(this.obj=this.obj.querySelectorAll(e)[0],this)},width:function(){return t.documentElement.clientWidth},height:function(){return t.documentElement.clientHeight},prev:function(){return void 0!==this.obj&&(this.obj=this.obj.previousElementSibling,this)},prop:function(e,t){return void 0!==this.obj&&(this.obj.checked=t,this)}},jquery=function(e){return n.sel(e)};jquery.window=window,jquery.createAuctionIframe=function(){try{if(!t.getElementById("proper-auction-iframe")){var e=t.createElement("iframe");e.id="proper-auction-iframe",e.frameborder="0",e.allowtransparency="true",e.marginheight="0",e.marginwidth="0",e.width="0",e.hspace="0",e.vspace="0",e.height="0",e.scrolling="no",e.style.display="none",e.style.width="0",e.style.height="0",e.sandbox="allow-scripts allow-same-origin",t.body.appendChild(e),jquery.window=e.contentWindow}}catch(e){jquery.window=window,console.error(e)}};var d=0,p=0,l=0;jquery.websocket=function(e){try{var t,r=null,s=new WebSocket(e.url);if(!s)websocketError(new Error("WebSocket: Server didn't accept WebSocket"));s.addEventListener("open",(function(){s.send(e.data)})),s.addEventListener("message",(function(t){e.bidder&&p++,e.success(t.data)})),s.addEventListener("close",(function(e){clearTimeout(r)})),s.addEventListener("error",(function(t){clearTimeout(r),e.bidder&&incrementErrorCount(),websocketError(new Error("WebSocket: Something went wrong with the WebSocket. "+JSON.stringify(t,["message","name"])))})),r=ProperMedia.utils.properSetTimeout.setTimeout((function(){websocketError(new Error("WebSocket: timed out."))}),e.timeout||2e3)}catch(t){websocketError(t)}function websocketError(e){s.close(),clearTimeout(r),properSpecialOps.s2s_websockets=!1,ProperMedia.ad_project.sendError(e)}},jquery.serverSentEvents=function(e){try{var t=null,r=ProperMedia.utils.getTimestampMs(),s=new EventSource(e.url+"?data="+e.data,{withCredentials:!0});s.onmessage=function(s){e.timeout-ProperMedia.utils.getTimePassed(r)<100&&(r=ProperMedia.utils.getTimestampMs(),clearTimeout(t),setSseTimeout(100)),e.success(s.data)},s.onopen=function(){console.log("Server-Sent Events: Opened")},s.onerror=function(e){console.log("Server-Sent Events: Something went wrong. "+JSON.stringify(e,["message","name"])),clearTimeout(t),incrementErrorCount(),serverSentEventsError(new Error("Server-Sent Events: Something went wrong. "+JSON.stringify(e,["message","name"])))},setSseTimeout(e.timeout)}catch(e){console.error(e),clearTimeout(t),serverSentEventsError(e)}function serverSentEventsError(e){s.close(),properSpecialOps.s2s_sse=!1,ProperMedia.ad_project.sendError(e)}},jquery.ajax=function(e){let t=e.url||"",s=e.success||function(){},o=e.error||function(){},a=e.onload||!1,n=(e.cache,e.data||{}),l=e.headers||{},u=e.method||"GET",g=e.special||"",m=(e.contentType,e.requestType||"cors"),_=e.timeout||3e3,h=e.edge||!1,b=e.websocket||!1,v=e.sse||!1,y=e.bidder||"",P="boolean"!=typeof e.withCredentials||e.withCredentials;if(void 0!==r&&(s=r.wrap(s),o=r.wrap(o)),b)jquery.websocket(e);else if(v)jquery.serverSentEvents(e);else{if("jsonp"===m){if(d++,y&&p++,s){const e="&",r="proper_"+guid()+"_"+d;jquery.window[r]=function(e){s(e)};let o="callback";g&&"index"==g&&(o="fn"),t+=e+o+"="+"window."+r}const e=jquery.window.document.createElement("script");return e.async=!0,e.src=t,a&&ProperMedia.utils.isFn(a)&&(e.onload=a()),e.onerror=function(){y&&bidderError({status:0}),o&&ProperMedia.utils.isFn(o)&&o()},jquery.window.document.getElementsByTagName("head")[0].appendChild(e),!0}if(1==h){const e={url:t,name:y,method:u,payload:n};c.addRequest(e,s,o)}else{const e=ProperMedia.utils.formatQueryString(n);try{const r=new jquery.window.XMLHttpRequest;for(var w in r.open(u,t,1),"cors"===m?r.withCredentials=P:"fetch"===m&&(r.withCredentials=!1),r.timeout=_,r.onload=function(){r.status>=200&&r.status<300?s(r.responseText,r):(o(r),y&&bidderError(r))},r.onerror=function(){o(r),y&&bidderError(r)},r.ontimeout=function(){o(r)},l)r.setRequestHeader(w,l[w]);y&&p++,r.send(e)}catch(e){throw o({status:"error",statusText:e.message||"",timeout:_}),e}}}};var bidderError=function(e){0==e.status&&incrementErrorCount()},incrementErrorCount=function(){l++,checkErrorCount()},checkErrorCount=function(){if(l>=30&&l/p>=.69){ProperMedia.utils.deepSetValue(properSpecialOps,"adblock.detected",!0);var e=new CustomEvent("proper-ad-requests-blocked",{});window.dispatchEvent(e)}},c=function(){var e="https://eb.proper.io/v1/endpoint",t=null,r={},s={bidders:[],cookies:{}};function sendEdgeRequest(){clearTimeout(t),t=null,s.bidders.length>0&&(jquery.ajax({url:e,method:"POST",requestType:"cors",data:JSON.stringify(s),success:function(e){const t=ProperMedia.utils.safeJsonParse(e);if(t&&t.bids&&t.bids.length>0)for(var s=0;s<t.bids.length;s++){var o=ProperMedia.utils.mergeObject({bidder:"",payload:{},callback_id:""},t.bids[s]);void 0!==o.callback_id&&void 0!==r[o.callback_id]&&"function"==typeof r[o.callback_id].success&&(r[o.callback_id].success(JSON.stringify(o.payload)),delete r[o.callback_id])}o&&o.cookies&&Object.keys(o.cookies).map((function(e){o.cookies[e]&&cookieMatching.updateBidderUserSyncData(e,o.cookies[e])}))},error:function(e){console.error("HOLY SMOKES")}}),s={bidders:[],cookies:{}})}return{addRequest:function(e,o,a){var n=guid();r[n]={success:o,error:a};var d={url:"",name:"",method:"",payload:{},callback_id:n};new_request=ProperMedia.utils.mergeObject(d,e);var p=ProperMedia.ad_project.cookieMatching.getBidderUserSyncValue(new_request.name+"_eb");p&&(s.cookies[new_request.name+"_eb"]=p),s.bidders.push(new_request),s.bidders.length>=25?sendEdgeRequest():(clearTimeout(t),t=null,t=ProperMedia.utils.properSetTimeout.setTimeout(sendEdgeRequest,250))},sendEdgeRequest}}();function guid(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1,5)}return s4()+s4()+"_"+s4()+s4()}return{$:jquery}}(window,document),function(){var e=document.createElement("script");e.src=("https:"==document.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js",e.async=!0,e.type="text/javascript";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();try{_qevents.push({qacct:"p-mEzuYq24VEJ-3"})}catch(e){console.error("Error pushing Quantcast event"),console.error(e)}"undefined"==typeof console&&(console={log:function(e){},error:function(e){},info:function(e){},table:function(e){}});var $=ProperMedia.jquery.$,properSetTimeout=ProperMedia.utils.properSetTimeout,properSetInterval=ProperMedia.utils.properSetInterval,TraceKit=window.top.TraceKit;function sendError(e){try{e.stack||(e.stack=new Error("force-added stack").stack),e.name||(e.name="Unknown"),e.message||(e.message="Unknown")}catch(e){console.error("Error building error data"),console.error(e)}properLog.mylog(e,"error");try{var t={client_timestamp:(new Date).getTime(),event_type:e.event_type||"exception",event_id:ProperMedia.utils.generateUUID(),page_id:ProperMedia.utils.generateUUID(),session_id:ProperMedia.utils.generateUUID(),bidder:e.bidder||"",user_id:ProperMedia.utils.validateValue(properUser.pubcid,{type:"string"}),publisher:ProperMedia.utils.validateValue(properOps.site_name,{type:"string",default_val:"unknown",max_len:40}),rtp_file_version:ProperMedia.utils.validateValue(properOps.rtp_file_version,{type:"string"}),ad_project_tag:ProperMedia.utils.validateValue(properOps.rtp_file_revision,{type:"string"}),page_url:ProperMedia.utils.getPageUrl()||"",in_iframe:!1,is_https:"https:"==document.location.protocol,user_agent:navigator.userAgent||"",stack_trace:JSON.stringify(e.stack),error_message:e.message.toString()||"",error_name:e.name.toString()||""};properPage.uuid&&""!==properPage.uuid&&(t.page_id=properPage.uuid),properSession&&properSession.sessionData&&properSession.sessionData.uuid&&""!==properSession.sessionData.uuid&&(t.session_id=properSession.sessionData.uuid),$.ajax({url:"https://events.proper.io/api/event",requestType:"fetch",method:"POST",data:JSON.stringify(t),withCredentials:!1,success:function(e){console.log("Proper exception logged successfully.")},error:function(e){console.error("Unable to log Proper exception: "+e)}})}catch(e){console.error("Error sending exception data"),console.error(e)}}TraceKit.report.subscribe(sendError),TraceKit.report.unsubscribe(TraceKit.defaultSendError);var storageObj=function(){var e=["core"];function storageObj(){}return storageObj.prototype.isValid=function(t){let{gvlid:r,moduleName:s,bidderCode:o,moduleType:a}=t;return-1!==e.indexOf(a)||!!gdprEnforcement.deviceAccessEnforcement(r,o||s)},storageObj.prototype.setCookie=function(e,t,r,s,o,a){if(this.isValid(a)){var n=o&&""!==o?" ;domain="+encodeURIComponent(o):"",d=r&&""!==r?" ;expires="+r:"",p=null!=s&&"none"==s.toLowerCase()?"; Secure":"";document.cookie=e+"="+encodeURIComponent(t)+d+";path=/"+n+(s?";SameSite="+s:"")+p}},storageObj.prototype.deleteCookie=function(e,t,r,s){var o=new Date;o.setTime(o.getTime()-6e4);var a=o.toGMTString();this.setCookie(e,"",a,t,r,s)},storageObj.prototype.getCookie=function(e,t){if(this.isValid(t)){var r=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return r?decodeURIComponent(r[2]):null}return null},storageObj.prototype.localStorageIsEnabled=function(e){if(this.isValid(e))try{return localStorage.setItem("proper.cookieTest","1"),"1"===localStorage.getItem("proper.cookieTest")}catch(e){}finally{try{localStorage.removeItem("proper.cookieTest")}catch(e){}}return!1},storageObj.prototype.cookiesAreEnabled=function(e){return!!this.isValid(e)&&(!!ProperMedia.utils.checkCookieSupport()||(window.document.cookie="proper.cookieTest",-1!==window.document.cookie.indexOf("proper.cookieTest")))},storageObj.prototype.setDataInLocalStorage=function(e,t,r){this.isValid(r)&&this.hasLocalStorage(r)&&window.localStorage.setItem(e,t)},storageObj.prototype.getDataFromLocalStorage=function(e,t){return this.isValid(t)&&this.hasLocalStorage(t)?window.localStorage.getItem(e):null},storageObj.prototype.removeDataFromLocalStorage=function(e,t){this.isValid(t)&&this.hasLocalStorage(t)&&window.localStorage.removeItem(e)},storageObj.prototype.hasLocalStorage=function(e){if(this.isValid(e))try{return!!window.localStorage}catch(e){properLog.mylog("Local storage api disabled")}return!1},storageObj}(),properStorage=new storageObj,ViewabilityTracker=function(){function ViewabilityTracker(){this.timer=null,this.elements={},this.supportsPassive=function(){try{var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t),e}catch(e){return sendError(TraceKit.computeStackTrace(e)),!1}}(),this.activeTab=!0,this.slotsInFetchZone=0,this.auctionCallback=null,consentManager.ready(function(){var e,t,r,s,o;this.start(),e=this,t="hidden",r=function(r){document[t]?e.stop():e.start()},s=function(){e.stop()},o=function(){e.start()},r=TraceKit.wrap(r),s=TraceKit.wrap(s),o=TraceKit.wrap(o),t in document?document.addEventListener("visibilitychange",r):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",r):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",r):(t="msHidden")in document?document.addEventListener("msvisibilitychange",r):"onfocusin"in document?(document.onfocusin=o,document.onfocusout=s):"onpagehide"in window?(window.addEventListener("pagehide",s,!1),window.addEventListener("pageshow",o,!1)):"onblur"in window&&(window.onfocus=o,window.onblur=s)}.bind(this))}return ViewabilityTracker.prototype.addElement=function(e,t){e.lazyload&&e.fetchMarginPercent<e.renderMarginPercent&&(sendError(new Error("Lazyload Fetch Margin has to be greater than or equal to Render Margin")),e.fetchMarginPercent=e.renderMarginPercent);var r={id:e.id,callback:t,lazyload:e.lazyload||!1,viewability:e.viewability||!0,autoDelete:e.autoDelete||!1,fetchMarginPercent:e.fetchMarginPercent||0,renderMarginPercent:e.renderMarginPercent||0,autoDeleteMarginPercent:e.autoDeleteMarginPercent||300,minHeight:e.minHeight||0,activeTab:!0,viewable:!1,inFetchZone:!1,inRenderZone:!1,inDeleteZone:!1};r.lazyload||this.incrementSlotsInFetchZone(),this.elements[e.id]=r,this.started&&this.runViewabilityCheck(r.id)},ViewabilityTracker.prototype.removeElement=function(e){this.elements[e]&&(this.killEntry(this.elements[e]),delete this.elements[e])},ViewabilityTracker.prototype.start=function(){this.activeTab=!0,this.updateElelemtsActiveTab();var e=new CustomEvent("properActiveTab");if(window.dispatchEvent(e),this.started)return!0;var t=this;this.timer=properSetInterval.setInterval.call(t,(function(){Object.keys(t.elements).forEach((function(e){t.runViewabilityCheck(e)}),t)}),200),this.started=!0},ViewabilityTracker.prototype.stop=function(){clearInterval(this.timer),this.activeTab=!1,this.updateElelemtsActiveTab();var e=new CustomEvent("properInactiveTab");window.dispatchEvent(e),Object.keys(this.elements).forEach((function(e){this.killEntry(this.elements[e])}),this),this.started=!1},ViewabilityTracker.prototype.updateElelemtsActiveTab=function(){Object.keys(this.elements).forEach((function(e){this.elements[e].activeTab=this.activeTab}),this)},ViewabilityTracker.prototype.runViewabilityCheck=function(e,t){var r=this.elements[e]||!1;if(r){var s=!1;r.viewability&&(s=function(e){var t=!1,r=e.viewable;if(e.element=e.element||document.getElementById(e.id),!e.element)return!1;var s=e.element.getBoundingClientRect();if(0==s.height&&s.top>0&&s.top<window.innerHeight&&s.left>0&&s.right<window.innerWidth)return!0;var o=s.width*s.height,a=Math.max(s.top,0),n=Math.min(s.bottom,window.innerHeight),d=Math.min(s.right,window.innerWidth),p=Math.max(s.left,0);if(a<n&&d>p){r=Math.abs(n-a)*Math.abs(d-p)/o>.5}else r=!1;return t=r!=e.viewable,e.viewable=r,t}(r)),(r.lazyload||r.autoDelete)&&(s=this.checkMargins(r)||s),(s||t)&&r.callback(r)}},ViewabilityTracker.prototype.calculateViewablePercentage=function(e){var t=e.getElement();if(null!==t){if("visible"!==window.top.document.visibilityState)return 0;var r=t.getBoundingClientRect(),s={};if(void 0!==r)return s.left=Math.max(r.left,0),s.right=Math.min(r.right,window.top.innerWidth),s.left>=s.right?0:(s.top=Math.max(r.top,0),s.bottom=Math.min(r.bottom,window.top.innerHeight),s.top>=s.bottom?0:(s.width=s.right-s.left,s.height=s.bottom-s.top,s.width*s.height/(r.width*r.height)*100))}return 0},ViewabilityTracker.prototype.checkMargins=function(e){if(e.element=e.element||document.getElementById(e.id),!e.element)return!1;var t=e.element.getBoundingClientRect(),r=e.inFetchZone,s=e.inRenderZone,o=t.height||e.minHeight,a=t.top+o/2,n=!1;a>window.innerHeight?a-=window.innerHeight:a<0?(n=!0,a=Math.abs(a)):a=0;var d=a/window.innerHeight*100;e.inDeleteZone=n&&e.autoDelete&&d>=e.autoDeleteMarginPercent,r=(d<=e.fetchMarginPercent||-1==e.fetchMarginPercent)&&!e.inDeleteZone,s=(d<=e.renderMarginPercent||-1==e.fetchMarginPercent)&&!e.inDeleteZone;var p=r!=e.inFetchZone||s!=e.inRenderZone||e.inDeleteZone;return r&&!e.inFetchZone?this.incrementSlotsInFetchZone():!r&&e.inFetchZone&&(this.slotsInFetchZone=Math.max(0,--this.slotsInFetchZone)),e.inFetchZone=r,e.inRenderZone=s,p},ViewabilityTracker.prototype.killEntry=function(e){e.inFetchZone&&(this.slotsInFetchZone=Math.max(0,--this.slotsInFetchZone)),e.activeTab=!1,e.viewable=!1,e.inFetchZone=!1,e.inRenderZone=!1,e.callback(e)},ViewabilityTracker.prototype.setCallback=function(e){this.auctionCallback=e},ViewabilityTracker.prototype.incrementSlotsInFetchZone=function(){this.slotsInFetchZone++,ProperMedia.utils.isFn(this.auctionCallback)&&(this.auctionCallback(),this.auctionCallback.auctionCallback=null)},ViewabilityTracker}(),pageObj=function(){function pageObj(){this.uuid=null,this.use_ssl=!1,this.protocol="http:",this.url="",this.domain="",this.path="",this.get_vars={},this.canonical_url="",this.takeover={bidder:"",logged:!1,price:0},this.bidder_page_url="",this.referrer="",this.isolated=0,this.width=0,this.height=0,this.post_id="",this.init_slots_build=0,this.slots={display:{},video:{},interstitial:{}},this.sra_settings={slot_queue:{},timeout_handler:null,timeout_ms:100},this.video_enabled=null,this.video_player_count={instream:{possible:[],onpage:[],inview:[]},outstream:{possible:[],onpage:[],inview:[]}},this.video_script_loaded=!1,this.dynamic_css_class="proper-dynamic-insertion",this.start_ts=0,this.dfp_init=!1,this.dfp_correlator=!1,this.dfp_enabled_services=!1,this.dont_send_bids=!1,this.viewability_tracker={},this.dynamic_ad_matches=[],this.spa_settings={enabled:!1,prefetch:!1,gallery_id:null,page_number:1,gallery_base_url:""},this.page_meta={category:"",editor:"",writer:"",buyer:"",page_type:"",split:"",tags:[],custom:{}},this.dfp_targeting={},this.slot_level_auction=""}return pageObj.prototype.init=function(){this.start_ts=ProperMedia.utils.getTimestampMs(),this.setBidPageUrl(),this.viewability_tracker=new ViewabilityTracker,properLog.mylog("width: "+this.width),properSession.init(),properLog.init_bid_data(),consentManager.ready(function(){this.initDfp(),this.buildSlots(),properSetTimeout.setTimeout.call(this,(function(){this.buildSlots()}),850),properAdPool.startNewAuction(),checkProperDebugConsole()}.bind(this))},pageObj.prototype.setBidPageUrl=function(){this.spa_settings.enabled&&this.spa_settings.gallery_id&&this.spa_settings.gallery_base_url?this.bidder_page_url=this.spa_settings.gallery_base_url:this.bidder_page_url=this.url},pageObj.prototype.setPageVariables=function(){this.uuid=ProperMedia.utils.generateUUID(),window.proper_ad_page_uuid=this.uuid,"https:"==document.location.protocol?(this.protocol="https:",this.use_ssl=!0):this.protocol="http:",this.url=ProperMedia.utils.getPageUrl(),this.path=ProperMedia.utils.getPagePath(),this.domain=ProperMedia.utils.getPageDomain(),this.root_domain=ProperMedia.utils.getRootDomain(),this.get_vars=ProperMedia.utils.getUrlParameters(window.location.href),this.referrer=ProperMedia.utils.getPageReferrer(),this.canonical_url=ProperMedia.utils.getCanonicalUrl(),this.width=$(window).width(),this.height=$(window).height(),this.takeover={bidder:"",logged:!1,price:0},this.checkDomainProtection(),this.checkProperTestMode(),this.checkPageIsolation(),this.loadBidderInitScripts(),this.setPageMeta(),this.setPostId(),this.setSPASettings(),this.setVideoEnabled(),this.setDynamicAdMatches()},pageObj.prototype.loadBidderInitScripts=function(){consentManager.ready((function(){Object.keys(properOps.bidders).forEach((function(e){Object.keys(properOps.bidders[e]).forEach((function(t){var r=bidderToAdapterName(t);if((properOps.testing_mode.enabled&&properOps.testing_mode.bidder==t||ProperMedia.utils.deepAccess(properOps,"bidders."+e+"."+t+".enabled"))&&"function"==typeof ProperMedia.utils.deepAccess(bidAdapters,r+".loadInitScripts")){let s=ProperMedia.utils.deepCopy(properOps.bidders[e][t]);bidAdapters[r].loadInitScripts(t,s)}}))}))}))},pageObj.prototype.getTimeOnPage=function(){return 0==this.start_ts?0:Date.now()-this.start_ts},pageObj.prototype.incrementVideoPlayerCount=function(e,t){-1!==["instream","outstream"].indexOf(e.video_type)&&-1==this.video_player_count[e.video_type][t].indexOf(e.name)&&this.video_player_count[e.video_type][t].push(e.name)},pageObj.prototype.decrementVideoPlayerCount=function(e,t){-1!==["instream","outstream"].indexOf(e.video_type)&&-1!==this.video_player_count[e.video_type][t].indexOf(e.name)&&this.video_player_count[e.video_type][t].splice(this.video_player_count[e.video_type][t].indexOf(e.name),1)},pageObj.prototype.checkDomainProtection=function(){properOps.domain_protection&&(0==[properOps.domain].concat(properOps.additional_domains).filter((function(e){var t=new RegExp("(^|\\.)"+e.replace(/(http(s)?:\/\/)?(www\.)?/,"")+"$");return this.domain.match(t)}),this).length&&(properLog.mylog("WARNING: Domains don't match. Bids wont be sent out for this page"),this.dont_send_bids=!0));return this.dont_send_bids},pageObj.prototype.checkProperTestMode=function(){void 0!==this.get_vars.proper_test&&""!==this.get_vars.proper_test?(properOps.testing_mode.bidder=this.get_vars.proper_test,properOps.testing_mode.ids=!0):(void 0!==this.get_vars.proper_bidder&&""!==this.get_vars.proper_bidder&&(properOps.testing_mode.bidder=this.get_vars.proper_bidder),void 0!==this.get_vars.proper_test_ids&&""!==this.get_vars.proper_test_ids&&(properOps.testing_mode.ids=!0)),(properOps.testing_mode.bidder||properOps.testing_mode.ids)&&(properLog.mylog("TESTING MODE"),properOps.testing_mode.enabled=!0,properOps.refresh.desktop.enabled=0,properOps.refresh.mobile.enabled=0)},pageObj.prototype.checkPageIsolation=function(){if(this.isolated=0,properOps.isolated_urls.length>0)for(var e=0;e<properOps.isolated_urls.length;e++){var t=properOps.isolated_urls[e];if(t&&this.path==t){this.isolated=1;break}}0!=this.isolated||!properOps.testing_mode.bidder&&!properOps.testing_mode.ids||ProperMedia.utils.deepAccess(this,"get_vars.proper_dfp")||(this.isolated=1),void 0!==properSpecialOps.isolated&&0==this.isolated&&(this.isolated=properSpecialOps.isolated),consentManager.ready(function(){properLog.mylog("CMP resolved GDPR: Applies: "+gdprConsent.gdprApplies+", Consent String: "+gdprConsent.consentString),properLog.mylog("CMP resolved USPC: Applies: "+uspConsent.cmpApplies+", Consent String: "+uspConsent.usPrivacy),properLog.mylog("CMP resolved GPP: Applies: "+gppConsent.gppApplies+", Consent String: "+gppConsent.gppString)}.bind(this))},pageObj.prototype.setPageMeta=function(){this.page_meta=ProperMedia.utils.mergeDeep({},{category:"",editor:"",writer:"",buyer:"",page_type:"",split:"",tags:[],dfp_kv:{},custom:{set_as_kv_to_gam:!1,dimension_1:"",dimension_2:"",dimension_3:"",dimension_4:"",dimension_5:"",dimension_6:"",dimension_7:"",dimension_8:"",dimension_9:"",dimension_10:""}},properSpecialOps.page_meta||{}),properOps.default_tags&&properOps.default_tags.length&&(this.page_meta.tags=this.page_meta.tags.concat(properOps.default_tags)),properSpecialOps.tags&&properSpecialOps.tags.length&&(this.page_meta.tags=this.page_meta.tags.concat(properSpecialOps.tags)),properSpecialOps.customGamKeyValues&&Object.keys(properSpecialOps.customGamKeyValues).length&&(this.page_meta.dfp_kv=ProperMedia.utils.mergeObject({},properSpecialOps.customGamKeyValues,this.page_meta.dfp_kv))},pageObj.prototype.setPostId=function(){properOps.post_id=void 0!==properSpecialOps.post_id&&null!=properSpecialOps.post_id?properSpecialOps.post_id:properOps.post_id,this.post_id=properOps.post_id},pageObj.prototype.setSPASettings=function(){ProperMedia.utils.mergeObject(this.spa_settings,ProperMedia.utils.deepCopy(properSpecialOps.spa_settings))},pageObj.prototype.setVideoEnabled=function(){this.video_enabled=void 0!==properSpecialOps.video_enabled?!!properSpecialOps.video_enabled:this.video_enabled},pageObj.prototype.loadVideoPlayerScript=function(){if(!0===this.video_enabled&&0==this.video_script_loaded&&void 0===window.ProperMediaVideo){window.propervideotag=window.propervideotag||[];var e=document.createElement("script");e.src="https://player.propervideo.io/new_rtp/main.js",e.async=!0,window.top.document.getElementsByTagName("head")[0].appendChild(e)}this.video_script_loaded=!0},pageObj.prototype.buildSlots=function(){let e=[];for(a in Object.keys(properOps.ad_slots).reverse().forEach((function(t){Object.keys(properOps.ad_slots[t]).forEach((function(r){"dynamic"!=t&&(e=e.concat(this.buildSlot(t,r)))}),this)}),this),this.dynamic_ad_matches)e=e.concat(this.buildSlot("dynamic",this.dynamic_ad_matches[a]));e.length&&(this.init_slots_build||properOps.slot_level_auction)&&properAdPool.sendAuction(!0,e),this.init_slots_build=1},pageObj.prototype.buildSlot=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{is_flex:!1};const s=r.is_flex?r.dfp_name:t;if(!e||!t)return!1;var o=properDevice.isMobile()?"mobile":"desktop",a=ProperMedia.utils.deepCopy(ProperMedia.utils.deepAccess(properOps,`ad_slots.${e}.${s}`)||{}),n={...ProperMedia.utils.deepAccess(a,"dynamic."+o)||{enabled:!1}};if(r.is_flex&&!properDevice.isMobile()){n=ProperMedia.utils.mergeObject(n,{enabled:!0,cssselector:`#${t}_flex`,cssplacement:"append"}),t=s+"_flex";const e={...properOps?.ad_slots?.display?.[t]||{dynamic:{desktop:{enabled:!0}}}},d=e?.dynamic?.desktop?.instances||0;ProperMedia.utils.mergeDeep(e.dynamic?.[o],n),ProperMedia.utils.deepSetValue(e,`dynamic.${o}.instances`,d),ProperMedia.utils.mergeDeep(a,e),a.allowed_size=r.allowed_size,a.is_flex=!0,n=ProperMedia.utils.deepAccess(a,"dynamic."+o)}let d=[];if(n.enabled){var p=n.cssselector,l=[...document.querySelectorAll(p)].filter((e=>!(e?.className?.includes(this.dynamic_css_class)||e?.className?.includes("proper-ad-unit"))));if(l&&l.length>0)for(var c=0;c<l.length;c++){var u=l[c];const p=`ad_slots.${e}.${s}.dynamic.${o}.instances`;if(n.instances=(ProperMedia.utils.deepAccess(properOps,p)||0)+1,ProperMedia.utils.deepSetValue(properOps,p,n.instances),void 0===n.max_instances||n.instances<=parseInt(n.max_instances)){a.is_flex&&(a.parent_name=r.dfp_name,a.flex_ad=r.flex_ads.shift());var g=ProperMedia.utils.deepCopy(a);ProperMedia.utils.deepSetValue(g,"dynamic."+o+".instance_number",n.instances);let s=new slotObj("video"==e?"video":"display",t,g,u);s.initialized&&d.push(s)}}}else if(ProperMedia.utils.deepAccess(this,"slots."+e+"."+t))ProperMedia.utils.deepAccess(this,"slots."+e+"."+t);else{let r=new slotObj(e,t,a);r.initialized&&d.push(r)}return d},pageObj.prototype.rebuildSlots=function(e){e=e??[],Object.keys(this.slots).forEach((function(t){Object.keys(this.slots[t]).forEach((function(r){if(!e||!e.includes(r)){var s=this.getSlotFromPageObject(r,[t]);s&&s.getElement()&&s.rebuildSlot()}}),this)}),this),this.buildSlots()},pageObj.prototype.resetSlotsRefresh=function(e){e=e??[],Object.keys(this.slots).forEach((function(t){Object.keys(this.slots[t]).forEach((function(r){if(!e||!e.includes(r)){var s=this.getSlotFromPageObject(r,[t]);s&&s.getElement()&&s.resetSlotRefresh()}}),this)}),this),this.buildSlots()},pageObj.prototype.updateDpfPageTargeting=function(){0==this.isolated&&1==this.dfp_init&&googletag.cmd.push(function(){properOps.dfp_per_slot?Object.keys(this.slots.display).length&&Object.keys(this.slots.display).forEach(function(e){var t=this.slots.display[e];t.googletag().pubads()&&setDfpPageTargeting(t.googletag().pubads())}.bind(this)):setDfpPageTargeting(googletag.pubads())}.bind(this))},pageObj.prototype.InfScrollNextPage=function(){properLog.mylog("========== New Infinite Scroll Page =========="),this.newPageView(),this.init_slots_build=0,this.resetSlotsRefresh([]),this.buildSlots(),properSetTimeout.setTimeout.call(this,(function(){this.buildSlots()}),850),properAdPool.startNewAuction()},pageObj.prototype.SpaNextPage=function(){properLog.mylog("========== New SPA Page =========="),this.newPageView(),this.init_slots_build=0,this.rebuildSlots([]),properSetTimeout.setTimeout.call(this,(function(){this.buildSlots()}),850),properAdPool.startNewAuction()},pageObj.prototype.newPageView=function(){var e=new CustomEvent("properNewPageview");window.dispatchEvent(e);var t=this.getTimeOnPage();properLog.mylog("Time on page: "+t),this.spa_settings.page_number++,this.start_ts=ProperMedia.utils.getTimestampMs(),this.setPageVariables(),!ProperMedia.utils.deepAccess(this.spa_settings,"enabled")||ProperMedia.utils.deepAccess(this.spa_settings,"gallery_id")&&ProperMedia.utils.deepAccess(properSpecialOps,"spa_settings.gallery_id")&&ProperMedia.utils.deepAccess(this.spa_settings,"gallery_id")===ProperMedia.utils.deepAccess(properSpecialOps,"spa_settings.gallery_id")?properAdPool.clearExpiredAds():properAdPool.clearCachedAds(),this.setBidPageUrl(),properSession.init(),properLog.init_bid_data(),properAdPool.auction_count=0,properAdPool.vid_auction_count=0,this.updateDpfPageTargeting()},pageObj.prototype.initDfp=function(){if(1==this.dfp_init||1==properPage.isolated||1==properOps.dfp_per_slot)return!1;ProperMedia.utils.deepAccess(properOps,"confiant.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"confiant.enabled")?confiantWrapper.loadDFPTag(window):(ProperMedia.utils.deepAccess(properOps,"adlightning.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"adlightning.enabled"))&&adLightningWrapper.loadDFPTag(window),googletag._loadStarted_||function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//securepubads.g.doubleclick.net/tag/js/gpt.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}(),googletag.cmd.push(function(){!gppConsentModule.isConsentDenied()&&gdprEnforcement.deviceAccessEnforcement(755,"gam")&&gdprConsentModule.hasPurpose4Consent()||(properLog.mylog("DFP: disable personalized GPT ads"),googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0})),googletag.pubads().addEventListener("slotOnload",(function(e){var t=ProperMedia.utils.extractSlotName(e.slot.getSlotElementId()),r=e.slot.getAdUnitPath(),s=properPage.getSlotFromPageObject(t)||properPage.getSlotFromPageObjectByAdUnitPath(r);properLog.mylog("DFP slotOnload: "+t),s&&s.dispatchCustomEvent("proper-ads-fired",{cpm:ProperMedia.utils.deepAccess(s,"displayed_ad.price"),size:ProperMedia.utils.deepAccess(s,"displayed_ad.size"),ad_type:s.ad_type})})),googletag.pubads().addEventListener("impressionViewable",(function(e){var t=ProperMedia.utils.extractSlotName(e.slot.getSlotElementId()),r=e.slot.getAdUnitPath(),s=properPage.getSlotFromPageObject(t)||properPage.getSlotFromPageObjectByAdUnitPath(r);properLog.mylog("DFP impressionViewable: "+t),s&&(s&&s.interstitial&&proper_render_dfp_interstitial(s),s.dispatchCustomEvent("proper-impression-viewable",{cpm:ProperMedia.utils.deepAccess(s,"displayed_ad.price"),size:ProperMedia.utils.deepAccess(s,"displayed_ad.size"),ad_type:s.ad_type}))})),googletag.pubads().addEventListener("slotRenderEnded",TraceKit.wrap((function(e){var t=ProperMedia.utils.extractSlotName(e.slot.getSlotElementId()),r=e.slot.getAdUnitPath(),s=properPage.getSlotFromPageObject(t)||properPage.getSlotFromPageObjectByAdUnitPath(r);properLog.mylog("DFP slotRenderEnded: "+t),s&&(s.tracking_times.dfp_returned_ts=ProperMedia.utils.getTimestampMs(),s.interstitial?0==e.isEmpty&&proper_render_dfp(s.name,e):(e.advertiserId!=properOps.proper_advertiser&&e.advertiserId!=properOps.amazon_advertiser&&(e.isEmpty?proper_render(s.getElement(),s.number,1):(proper_render_dfp(s.name,e),proper_inview(e.isEmpty,s.name,e.size.join("x"),e.creativeId,e.lineItemId,e.advertiserId))),(!s.sticky&&ProperMedia.utils.deepAccess(properSpecialOps,"adlightning.enabled")&&ProperMedia.utils.deepAccess(properSpecialOps,"adlightning.reportAd")||ProperMedia.utils.deepAccess(properOps,"adlightning.enabled")&&ProperMedia.utils.deepAccess(properOps,"adlightning.reportAd"))&&adLightningWrapper.addReportAd(e)))}))),googletag.pubads().addEventListener("slotOnload",TraceKit.wrap((function(e){let t;try{t=ProperMedia.utils.extractSlotName(e.slot.getSlotElementId());var r=e.slot.getAdUnitPath(),s=properPage.getSlotFromPageObject(t)||properPage.getSlotFromPageObjectByAdUnitPath(r);if(properLog.mylog("DFP slotOnload: "+t),s&&window.top.document.getElementById(s.dfpIframeId)){var o=window.top.document.getElementById(s.dfpIframeId).contentWindow.document;o&&(o.getElementById("common_15click_overlay")||o.getElementById("common_15click_anchor"))&&sendError(new Error("Detected Google Confirmed Click: "+s.dfp_name+" | "+ProperMedia.utils.deepAccess(s,"displayed_ad.size")))}}catch(e){properLog.mylog("Error Detecting Google Confirmed Click: "+t)}}))),setDfpPageTargeting(googletag.pubads()),googletag.pubads().setPrivacySettings({childDirectedTreatment:!!ProperMedia.utils.deepAccess(properSpecialOps,"coppa")}),googletag.pubads().disableInitialLoad(),googletag.pubads().setPublisherProvidedId(properUser.pubcid),googletag.pubads().enableSingleRequest(),googletag.enableServices(),this.dfp_enabled_services=!0}.bind(this)),this.dfp_init=1},pageObj.prototype.dfpSraCall=function(){googletag.cmd.push(function(){if(clearTimeout(this.sra_settings.timeout_handler),this.sra_settings.timeout_handler=null,Object.keys(this.sra_settings.slot_queue).length>0){1==properSpecialOps.update_correlator&&0==this.dfp_correlator&&this.spa_settings.page_number>1&&(googletag.pubads().updateCorrelator(),this.dfp_correlator=!0,properLog.mylog("Correlator updated for page: "+this.spa_settings.page_number));var e=[];Object.keys(this.sra_settings.slot_queue).forEach((function(t){var r=this.sra_settings.slot_queue[t];e.push(r.dfp_slot),r.tracking_times.dfp_sent_ts=ProperMedia.utils.getTimestampMs(),properLog.mylog("DFP refresh called: "+r.name),r.dfp_refreshed=1,r.auction_send_complete=!0}),this),this.sra_settings.slot_queue={},googletag.pubads().refresh(e)}}.bind(this))},pageObj.prototype.getSlotFromPageObject=function(e,t){var r=null;return(t=t||Object.keys(this.slots)||["display","video","interstitial"]).every((function(t){return!this.slots[t][e]||(r=this.slots[t][e],!1)}),this),r},pageObj.prototype.getSlotFromPageObjectByAdUnitPath=function(e,t){var r=null;return(t=t||Object.keys(this.slots)||["display","video","interstitial"]).every((function(t){return!r&&this.slots[t]&&Object.keys(this.slots[t])&&Object.keys(this.slots[t]).every((function(s){return!(!r&&this.slots[t][s].dfpAdUnitPath==e)||(r=this.slots[t][s],!1)}),this),!r}),this),r},pageObj.prototype.getSlotByNumber=function(e,t){var r=null;return(t=t||Object.keys(this.slots)).every((function(t){return Object.keys(this.slots[t]).every((function(s){var o=this.slots[t][s];return o.number!=e||(r=o,!1)}),this),!r}),this),r},pageObj.prototype.getSlotFromPageObjectByDfpName=function(e,t){try{var r=!1;return(t=t||Object.keys(this.slots)||["display","video","interstitial"]).every((function(t){return!Object.keys(this.slots[t]).some((function(s){return this.slots[t][s].dfp_name==e&&(r=this.slots[t][s]),!!(r instanceof slotObj)}),this)}),this),r}catch(e){return!1}},pageObj.prototype.deleteDynamicSlots=function(e){(e=e||Object.keys(this.slots)).forEach((function(e){this.slots[e]&&Object.keys(this.slots[e]).length&&Object.keys(this.slots[e]).forEach((function(t){var r=this.slots[e][t];if(ProperMedia.utils.deepAccess(r,"dynamic.enabled")){r.deleteSlot(!0);var s=ProperMedia.utils.deepAccess(r,"dynamic.cssselector")+"."+this.dynamic_css_class,o=document.querySelectorAll(s);if(o&&o.length>0)for(var a=0;a<o.length;a++){o[a].classList.remove(this.dynamic_css_class)}}}),this)}),this)},pageObj.prototype.resetDynamicSlotInstanceCount=function(e){e=e||Object.keys(this.slots);const t=properDevice.isMobile()?"mobile":"desktop";e.forEach((function(e){properOps.ad_slots[e]&&Object.keys(properOps.ad_slots[e]).length&&Object.keys(properOps.ad_slots[e]).forEach((function(r){ProperMedia.utils.deepAccess(properOps,"ad_slots."+e+"."+r+".dynamic."+t+".instances")&&ProperMedia.utils.deepSetValue(properOps,"ad_slots."+e+"."+r+".dynamic."+t+".instances",0)}),this)}),this)},pageObj.prototype.setDynamicAdMatches=function(){var e=[],t=this.url.substr(this.url.indexOf(this.domain)+this.domain.length,this.url.length-1).replace(window.location.hash,""),r=!!t.includes("?")&&t.split("?")[1];for(group in t=r?t.split("?")[0]:t,properOps.page_groups){var s=!1,o=properOps.page_groups[group];for(url in o.url_matches)(t==o.url_matches[url]||o.url_matches[url].indexOf("*")>-1&&1+t.search(o.url_matches[url].split("/").join("/").split("=").join("\\=").split("*").join(".*")))&&(s=!0);if(s){for(url in o.url_exclude)(t==o.url_exclude[url]||o.url_exclude[url].indexOf("*")>-1&&1+t.search(o.url_exclude[url].split("/").join("/").split("=").join("\\=").split("*").join(".*")))&&(s=!1);if(s&&(e=e.concat(o.ads)),r)for(utm_group in o.url_mods)for(utm in o.url_mods[utm_group].conditions)1+r.search(o.url_mods[utm_group].conditions[utm])&&(e=e.concat(o.url_mods[utm_group].extra_ads))}}this.dynamic_ad_matches=e},pageObj}(),slotObj=function(){function slotObj(e,t,r,s){this.name="",this.dfp_name="",this.number=0,this.dfp_id=0,this.mcm_type="mcm",this.location="unknown",this.type="",this.div_id="",this.max_tier=0,this.size="0x0",this.sizes=[],this.defined_sizes=null,this.default_size=[0,0],this.min_width=0,this.min_height=0,this.max_width=0,this.max_height=0,this.smart_size=!1,this.interstitial=!1,this.last_displayed_ts=0,this.dfp_slot={},this.dfp_init=0,this.dfp_ready=0,this.dfp_sent=0,this.dfp_refreshed=0,this.google_tag=null,this.mapped_dfp_sizes=0,this.dfp_enabled_services=!1,this.auction_send_complete=!1,this.winning_ad={},this.displayed_ad={},this.displayed=0,this.delay_handle=null,this.auction_started_ts=null,this.max_timeout_handle=null,this.max_timeout_met=!1,this.max_timeout=1200,this.wait_interval=50,this.wait_interval_handle=null,this.min_time_on_page=2e3,this.rebuild_timeout_handle=null,this.exclude_advertiser=[],this.advertiserId=0,this.report_ad_tool=0,this.video_player=null,this.video_type="",this.ad_types=[],this.adl_blocked=!1,this.disable_adx=!1,this.gamTargeting={},this.customGamTargeting=[],this.slot_level_auction=!1,this.url_restricted={values:[],enabled:!1},this.page_restricted_depth={enabled:!1},this.url_rules=[],this.is_flex_slot=!1,this.parent_name="",this.flex_enabled=!1,this.flex_ads=[],this.flex_map={},this.flex_names=null,this.flex_layout={},this.sticky=0,this.slider=0,this.sticky_settings={brand:0,close_btn:0,disable_on_close:0,freq_cap_enabled:0,freq_cap:0,position:"right"},this.slider_settings={close_button:!0,adjustment_size:.7,breakpoint:480,location:{desktop:["right","bottom"],mobile:["right","bottom"]},keep_on_close:!1},this.scrollable={enabled:!1,percentage:10,dynamic_occurences:{enabled:!1,incidences_to_target:[]}},this.refresh={enabled:0,max:5,count:0,interval:6e4,min_interval:15e3,current_interval:6e4,inview_interval:15e3,exclude_dfp:0},this.floors={backup:.15,sizes:{}},this.lazyload={enabled:1,inFetchZone:!1,inRenderZone:!1,fetchMarginPercent:0,renderMarginPercent:0},this.autoDelete={enabled:!1,inDeleteZone:!1,autoDeleteMarginPercent:200},this.viewability={viewable:!1,activeTab:!0,entered_inview_ts:0,total_time_inview:0},this.dynamic={enabled:!1,cssplacement:"after",cssselector:"",instance_number:0,child_name:"",css_ad:"",css_page:""},this.tracking_times={built_ts:0,bids_ready_ts:0,dfp_sent_ts:0,dfp_returned_ts:0,creative_on_page:0},this.advertisement_disclosure={enabled:!1,location:"below"},this.kill_slot=!1;try{this.initialized=this.buildSlot(e,t,r,s)}catch(e){sendError(e)}}return slotObj.prototype.getElement=function(){return(this.iframe_window||top).document.getElementById(this.div_id)},slotObj.prototype.getParent=function(){return(this.getFlexWrapper()??this.getElement())?.parentElement},slotObj.prototype.addFlexWrapper=function(){if(this.getFlexWrapper())return;const e=this.getParent(),t=document.createElement("div");t.classList.add("proper-flex-wrapper"),t.id=`${this.name}_flex_wrapper`,e.parentNode.insertBefore(t,e),t.appendChild(e)},slotObj.prototype.addFlexSlot=function(e){const t=this.getElement(),r=`${this.name}_flex`,s=this.flex_map[e],{columns:o}=this.flex_layout[e],a=this.getFlexWrapper();if(a.style.cssText+=`grid-template-columns: repeat(${o}, 1fr);`,t&&s>1&&a){for(let e=1;e<s;e++){const e=document.createElement("div");e.id=r,a.appendChild(e)}propertag.cmd.push(function(){properLog.mylog("Adding Flex Slot "+this.name);const t=properPage.buildSlot(this.type,this.name,{is_flex:!0,allowed_size:e,dfp_name:this.dfp_name,flex_ads:this.flex_ads});this.flex_names=t.map((e=>e.name))}.bind(this))}},slotObj.prototype.hasFlexSlot=function(){return!!this.flex_names&&this.flex_names.length>0},slotObj.prototype.removeFlexSlot=function(){for(const e of this.flex_names){const t=properPage.getSlotFromPageObject(e);t?(properLog.mylog(`Removing flex slot: ${e}`),t?.clearWinningBid(),t?.deleteSlot(!0)):properLog.mylog(`Flex slot not found for ${e}!`)}const e=this.getElement();$(e?.parentNode).removeStyle();const t=this.getFlexWrapper();$(t).removeStyle(),this.flex_names.length=0},slotObj.prototype.clearFlexBid=function(){if(this.hasFlexBids()){for(const e of this.flex_ads)0!=e.displayed||e.checkIfExpired()||properAdPool.addBidToPool(e);this.flex_ads.length=0}},slotObj.prototype.getFlexWrapper=function(){let e=window.top.document.getElementById(this.div_id),t=0;for(;!e?.className?.includes("proper-flex-wrapper")&&t<7;)e=e?.parentNode,t++;return e?.className?.includes("proper-flex-wrapper")?e:null},slotObj.prototype.getContentDocument=function(){return this.iframe_window?this.iframe_window.document:this.iframe_id?window.top.document.getElementById(this.iframe_id).contentDocument:window.top.document.getElementById(this.properIframeId)?window.top.document.getElementById(this.properIframeId).contentDocument:window.top.document},slotObj.prototype.setStickySettings=function(e){try{if(this.sticky){var t=ProperMedia.utils.mergeObject({},this.sticky_settings,e.sticky_settings||{});this.sticky_settings=ProperMedia.utils.deepCopy(t)}}catch(e){return properLog.mylog("Error setting sticky settings: "+this.name),!1}return!0},slotObj.prototype.setSliderSettings=function(e){try{if(this.slider){var t=ProperMedia.utils.mergeObject({},this.slider_settings,e.slider_settings||{});this.slider_settings=ProperMedia.utils.deepCopy(t)}}catch(e){return properLog.mylog("Error setting slider settings: "+this.name),!1}return!0},slotObj.prototype.setScrollableSettings=function(e){try{if("display"==this.type){var t=ProperMedia.utils.mergeObject({},this.scrollable,e.scrollable||{});this.scrollable=ProperMedia.utils.deepCopy(t)}}catch(e){return properLog.mylog("Error setting scrollable settings: "+this.name),!1}return!0},slotObj.prototype.setScrollableElemHeight=function(){try{var e=parseInt(properPage.height*(parseInt(this.scrollable.percentage)/100));if("display"==this.type&&properDevice.isMobile()&&this.scrollable.enabled&&parseInt(this.scrollable.percentage)>0&&e>this.max_height){var t=window.top.document.getElementById(this.div_id);if(t&&-1!==t.parentNode.className.indexOf(properOps.slot_wrapper_class)){var r=t.parentNode;r.style="min-height: "+e+"px;",r.className+=" in-content-slider-cont",t.className+=" in-content-slider-unit"}}}catch(e){properLog.mylog("Error setting scrollable elem height: "+this.name)}},slotObj.prototype.setRefresh=function(e){try{var t=properDevice.isMobile()?"mobile":"desktop",r=e.refresh&&e.refresh[t]?e.refresh[t]:{},s=ProperMedia.utils.mergeObject({},this.refresh,properOps.refresh[t],r);(properUser.checkAdBlockDetected()||this.is_flex_slot)&&(s.enabled=0),this.refresh=ProperMedia.utils.deepCopy(s)}catch(e){return properLog.mylog("Error setting refresh settings: "+this.name),!1}return!0},slotObj.prototype.setLazyload=function(e){try{var t=properDevice.isMobile()?"mobile":"desktop",r=e.lazyload&&e.lazyload[t]?e.lazyload[t]:{},s=ProperMedia.utils.mergeObject({},this.lazyload,properOps.lazyload[t],r);this.lazyload=ProperMedia.utils.deepCopy(s),this.sticky&&(this.lazyload.enabled=!1)}catch(e){return properLog.mylog("Error setting lazy-load settings: "+this.name),!1}return!0},slotObj.prototype.setAutoDelete=function(e){try{var t=properDevice.isMobile()?"mobile":"desktop",r=ProperMedia.utils.deepAccess(e,"autoDelete."+t)||{},s=ProperMedia.utils.mergeObject({},this.autoDelete,properOps.autoDelete[t],r);this.autoDelete=ProperMedia.utils.deepCopy(s),this.sticky&&(this.autoDelete.enabled=!1)}catch(e){return properLog.mylog("Error setting auto delete settings: "+this.name),!1}return!0},slotObj.prototype.setPageRestrictions=function(e){try{var t=ProperMedia.utils.deepAccess(e,"page_restricted_depth")||{},r=ProperMedia.utils.mergeObject({},this.page_restricted_depth,t);this.page_restricted_depth=ProperMedia.utils.deepCopy(r);var s=ProperMedia.utils.deepAccess(e,"url_restricted")||{},o=ProperMedia.utils.mergeObject({},this.url_restricted,s);this.url_restricted=ProperMedia.utils.deepCopy(o)}catch(e){return properLog.mylog("Error setting page restriction settings: "+this.name),!1}return!0},slotObj.prototype.setUrlandPageviewRules=function(e){try{var t=ProperMedia.utils.deepAccess(e,"url_rules")||[];ProperMedia.utils.isStr(t)&&(t=ProperMedia.utils.deepAccess(properOps,"ad_slots.display."+t+".url_rules")||[],ProperMedia.utils.isArray(t)||(t=[]));var r=t||this.url_rules;this.url_rules=ProperMedia.utils.deepCopy(r)}catch(e){return properLog.mylog("Error setting slot url rules: "+this.name),!1}return!0},slotObj.prototype.setFloors=function(e){try{var t=properDevice.isMobile()?"mobile":"desktop",r=e.floors&&e.floors[t]?e.floors[t]:{},s=ProperMedia.utils.mergeObject({},this.floors,properOps.floors[t],r);this.floors=ProperMedia.utils.deepCopy(s)}catch(e){return properLog.mylog("Error setting floors settings: "+this.name),!1}return!0},slotObj.prototype.setDynamic=function(e){try{var t=properDevice.isMobile()?"mobile":"desktop",r=e.dynamic&&e.dynamic[t]?e.dynamic[t]:{},s=ProperMedia.utils.mergeObject({},this.dynamic,r);this.is_flex_slot&&(s.cssplacement="replace"),this.dynamic=ProperMedia.utils.deepCopy(s)}catch(e){return properLog.mylog("Error setting dynamic settings: "+this.name),!1}return!0},slotObj.prototype.setAdvertisementDisclosure=function(e){try{var t=ProperMedia.utils.mergeObject({},this.advertisement_disclosure,properOps.advertisement_disclosure,e.advertisement_disclosure||{});this.advertisement_disclosure=ProperMedia.utils.deepCopy(t)}catch(e){return properLog.mylog("Error setting Advertisement Disclosure settings: "+this.name),!1}return!0},slotObj.prototype.getFloor=function(e){var t=this.floors.sizes[e]||this.floors.backup||0;return parseFloat(t)},slotObj.prototype.checkVideoInviewLimit=function(){return"outstream"==this.video_type&&(!properOps.video_limit.enabled||properOps.video_limit.outstream_inview_limit<properPage.video_player_count.outstream.inview.length)},slotObj.prototype.checkStickyFreqCapMet=function(){return!(1!=this.sticky||!(this.sticky_settings.disable_on_close&&1==properUser.stickyFreqCapHandler.getStickyClosedCookie()||this.sticky_settings.freq_cap_enabled&&properUser.stickyFreqCapHandler.getStickyUnitImps()>=this.sticky_settings.freq_cap))},slotObj.prototype.checkPageDepthRestriction=function(){return!!(this.page_restricted_depth.enabled&&"is_greater"==this.page_restricted_depth.qualifier&&properSession.sessionData.depth>parseInt(this.page_restricted_depth.page)||"is_lesser"==this.page_restricted_depth.qualifier&&properSession.sessionData.depth<parseInt(this.page_restricted_depth.page))},slotObj.prototype.checkUrlRestriction=function(){var e=!1;if(this.url_restricted.enabled&&this.url_restricted.values.length){e=!0;for(var t=0;t<this.url_restricted.values.length;t++){var r=this.url_restricted.values[t],s=new RegExp(r.url_value);if((!r.url_value||!r.qualifier||"contains"==r.qualifier&&properPage.url.match(s)||"does_not_contain"==r.qualifier&&!properPage.url.match(s))&&(!r.page_depth||!r.page_depth_qualifier||"is_lesser"==r.page_depth_qualifier&&properSession.sessionData.depth<parseInt(r.page_depth)||"is_greater"==r.page_depth_qualifier&&properSession.sessionData.depth>parseInt(r.page_depth))){e=!1;break}}}return e},slotObj.prototype.checkUrlAndPageviewRules=function(){if(!this.url_rules[0])return!1;for(var e of this.url_rules){var t=0;for(var r of e){var s=r.condition,o=ProperMedia.utils.isStr(r.parameter)?r.parameter.replace(/\s+/g,"").split(","):[r.parameter];for(var a of o){if("is"==s&&properPage.path==a){t++;break}if("is_not"==s&&properPage.path!=a){t++;break}if("contains"==s&&-1!=properPage.path.indexOf(a)){t++;break}if("does_not_contain"==s&&-1==properPage.path.indexOf(a)){t++;break}if("has_parameter"==s){let[e,r]=a.split("=");ProperMedia.utils.deepAccess(properPage,"get_vars."+e)==r&&t++;break}if("does_not_have_parameter"==s){let[e,r]=a.split("=");ProperMedia.utils.deepAccess(properPage,"get_vars."+e)!==r&&t++;break}if("pageviews_greater"==s&&properSession.sessionData.depth>a){t++;break}if("pageviews_lesser"==s&&properSession.sessionData.depth<a){t++;break}}}if(t==e.length)return!1}return properLog.mylog("Slot does not meet Url And Pageview Rules: "+this.name),!0},slotObj.prototype.setViewabilityTracker=function(){var e={id:this.div_id,lazyload:this.lazyload.enabled,viewability:!0,fetchMarginPercent:this.lazyload.fetchMarginPercent,renderMarginPercent:this.lazyload.renderMarginPercent,minHeight:this.min_height,autoDelete:this.autoDelete.enabled,autoDeleteMarginPercent:this.autoDelete.autoDeleteMarginPercent};properPage.viewability_tracker.addElement(e,this.viewabilityChange.bind(this))},slotObj.prototype.insertDynamicSlot=function(e,t){var r=document.createElement("div"),s=document.createElement("div");if(r.className=properOps.slot_wrapper_class,s.id="proper-ad-"+this.name,this.sticky)r.className+=" ad-sticky",r.style="display: none;";else if("display"==this.type&&properDevice.isMobile()&&this.scrollable.enabled&&parseInt(this.scrollable.percentage)>0){var o=ProperMedia.utils.deepAccess(this.scrollable,"dynamic_occurences.incidences_to_target")||[];if(!ProperMedia.utils.deepAccess(this.scrollable,"dynamic_occurences.enabled")||-1!==o.indexOf(this.dynamic.instance_number)){var a=parseInt(properPage.height*(parseInt(this.scrollable.percentage)/100));a>this.max_height&&(r.style="min-height: "+a+"px;",r.className+=" in-content-slider-cont",s.className+=" in-content-slider-unit")}}var n=e.getAttribute("data-gamTargetingKey")||"",d=e.getAttribute("data-gamTargetingValue")||"";if(n&&s.setAttribute("data-gamTargetingKey",n),d&&s.setAttribute("data-gamTargetingValue",d),""!=this.dynamic.css_ad&&(r.style+=this.dynamic.css_ad),""!=this.dynamic.css_page){var p=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");p.appendChild(l),l.type="text/css",l.styleSheet?l.styleSheet.cssText=this.dynamic.css_page:l.appendChild(document.createTextNode(this.dynamic.css_page))}"after"==t?e.parentNode.insertBefore(r,e.nextSibling):"before"==t?e.parentNode.insertBefore(r,e):"append"==t?e.appendChild(r):"prepend"==t?e.childNodes&&e.childNodes.length>0?e.insertBefore(r,e.childNodes[0]):e.appendChild(r):"replace"==t&&(e.parentNode.replaceChild(r,e),e=r),r.appendChild(s),$(e).addClass(properPage.dynamic_css_class)},slotObj.prototype.getGamTargetingAttr=function(){var e=this.getElement();if(e){var t=e.getAttribute("data-gamTargetingKey")||"tags",r=e.getAttribute("data-gamTargetingValue")??void 0;ProperMedia.utils.isStr(r)&&r.includes(",")&&(r=r.split(",")),void 0!==r&&""!==r&&(this.gamTargeting={key:t,value:r})}},slotObj.prototype.buildSlot=function(e,t,r,s){if(this.type=e||"display",this.name=t,this.dfp_name=t,this.parent_name=r.parent_name,this.number=r.number||0,this.location=r.location||"unknown",this.sticky=r.sticky||0,this.slider=r.slider||0,this.smart_size=r.smart_size||!1,this.min_height=r.min_height||0,this.max_height=r.max_height||0,this.slot_level_auction=!!properOps.slot_level_auction||!!r.slot_level_auction,this.is_flex_slot=!!r.is_flex,this.flex_enabled=!this.is_flex_slot&&!properDevice.isMobile()&&r.flex||!1,this.size_map=r.resolution_size_map||{},this.mcm_type=r.mcm_type||properOps.mcm_type,this.dfp_id="mcm"==this.mcm_type&&properOps.proper_dfp_id!==properOps.dfp_id?properOps.proper_dfp_id+","+properOps.dfp_id:properOps.dfp_id,this.div_id="display"==this.type?"proper-ad-"+this.name:this.name,this.dfpAdUnitPath="/"+this.dfp_id+"/"+this.name,this.properIframeId=this.div_id+"-iframe",this.dfpIframeId="google_ads_iframe_"+this.dfpAdUnitPath+"_0",this.disable_adx=ProperMedia.utils.deepAccess(r,"disable_adx."+(properDevice.isMobile()?"mobile":"desktop")),!this.name||"display"==this.type&&!this.number)return!1;if(this.is_flex_slot&&(this.winning_ad=new adObj(ProperMedia.utils.deepCopy(r.flex_ad))||{}),this.max_timeout=r.max_timeout||ProperMedia.utils.deepAccess(properSpecialOps,"slot_max_timeouts."+this.dfp_name)||this.max_timeout,this.setDynamic(r),this.dynamic.enabled&&(this.child_name="dynamic_"+this.dynamic.instance_number,this.dfpAdUnitPath="/"+this.dfp_id+"/"+this.dfp_name+"/"+this.child_name,this.dfpIframeId="google_ads_iframe_"+this.dfpAdUnitPath+"_0",this.name=this.name+"_"+this.dynamic.instance_number,this.number=parseFloat(this.number+this.dynamic.instance_number/100),this.div_id="proper-ad-"+this.name,this.properIframeId=this.div_id+"-iframe",r.custom_css&&(this.dynamic.css_ad=r.custom_css[0]?r.custom_css[0]:"",this.dynamic.css_page=r.custom_css[1]?r.custom_css[1]:"")),this.getMaxTier(),this.parseTierSizes(r),this.setFlexMap(r.flex_map),0==this.sizes.length)return!1;if(this.setPageRestrictions(r),this.checkPageDepthRestriction())return!1;if(this.checkUrlRestriction())return!1;if(this.setUrlandPageviewRules(r),this.checkUrlAndPageviewRules())return!1;if(this.interstitial&&1==properOps.dfp_per_slot)return!1;if(this.setFloors(r),this.setLazyload(r),this.setAutoDelete(r),this.setScrollableSettings(r),this.setAdvertisementDisclosure(r),this.dynamic.enabled&&this.insertDynamicSlot(s,this.dynamic.cssplacement),properUser.checkAdBlockDetected()&&(!properUser.adblock.deliver_to_adblock||-1!==["multiple","unknown"].indexOf(this.location)))return this.kill_slot=!0,!1;if(!this.getElement())return!1;if(!this.sticky&&-1==["sticky","skin"].indexOf(this.location)&&!this.getElement().offsetParent)return!1;const o=this.getParent();if(this.flex_enabled&&this.addFlexWrapper(),"display"==this.type&&properDevice.isMobile()&&this.scrollable.enabled&&!this.dynamic.enabled&&this.setScrollableElemHeight(),this.setSliderSettings(r),r.video_player&&!1!==properPage.video_enabled){var a=ProperMedia.utils.deepAccess(properOps,"video_players."+r.video_player)||{};Object.keys(a).length>0&&(this.video_player=new videoPlayer(r.video_player,a,this),this.video_type=this.video_player.player_settings.video_type,properPage.incrementVideoPlayerCount(this,"possible"))}if("display"==this.type?(this.setRefresh(r),this.ad_types.push("display","native"),this.video_player&&!1!==properPage.video_enabled&&this.ad_types.push("video")):"video"==this.type&&this.video_player instanceof videoPlayer&&!1!==properPage.video_enabled&&this.ad_types.push("video"),this.checkVideoEnabled(),this.sticky){if(this.setStickySettings(r),this.checkStickyFreqCapMet())return!1;if(!this.getElement().parentNode.className.includes("sticky-inner")){o.classList.add(this.name);const e=document.createElement("div");if(e.setAttribute("class","sticky-inner"),e.setAttribute("style","display:none"),this.sticky_settings.brand||this.sticky_settings.close_btn){const t=document.createElement("div");t.setAttribute("class","inner-left");const r=document.createElement("div");r.setAttribute("class","inner-right");const s=document.createElement("a");s.setAttribute("class","brand"),s.setAttribute("target","_blank"),s.setAttribute("href","https://sovrn.com?ref=ms-sticky"),this.sticky_settings.brand&&s.setAttribute("style","display:block");const a=document.createElement("div");a.setAttribute("class","close"),this.sticky_settings.close_btn&&a.setAttribute("style","display:block"),a.onclick=function(e){e.preventDefault(),o.classList.remove("isOpen"),o.classList.add("close"),this.sticky_settings.disable_on_close&&properUser.stickyFreqCapHandler.setStickyClosedCookie(),this.deleteSlot(!0)}.bind(this),t.appendChild(s),r.appendChild(a),e.appendChild(t),e.appendChild(r)}o.appendChild(e),e.insertAdjacentElement("beforeEnd",this.getElement())}}else if(this.slider&&!this.getElement().parentNode.className.includes("slider_unit")&&"display"==this.type&&(o.classList.add("slider_unit"),properPage.width>this.slider_settings.breakpoint?(o.classList.add("slider_position_"+this.slider_settings.location.desktop[0]),o.classList.add("slider_position_"+this.slider_settings.location.desktop[1])):(o.classList.add("slider_position_"+this.slider_settings.location.mobile[0]),o.classList.add("slider_position_"+this.slider_settings.location.mobile[1])),1!=this.slider_settings.adjustment_size&&document.documentElement.style.setProperty("--slider_mobile_adjustment_size",this.slider_settings.adjustment_size),this.slider_settings.close_button)){const e=document.createElement("div");e.setAttribute("id","close_button"),e.setAttribute("name",this.name),e.onclick=function(e){e.preventDefault();try{$(".slider_unit #close_button").remove(),o.classList.remove("slider_unit"),this.disableSlotRefresh(),this.closeSliderSlot()}catch(e){console.error(e)}}.bind(this);const t=document.createTextNode("x");e.appendChild(t),o.appendChild(e)}if(properPage.slots[this.type][this.name]=this,this.setViewabilityTracker(),("display"==this.type&&!this.lazyload.enabled||"video"==this.type&&ProperMedia.utils.deepAccess(this,"video_player.auto_insert"))&&(this.checkBidsReady()||(this.setWaitInterval(),this.setMaxAuctionTimeout())),"display"==this.type?consentManager.ready(function(){0==properPage.isolated&&(1!=properOps.dfp_per_slot||this.disable_adx?(0==properPage.dfp_init&&properPage.initDfp(),1==properPage.dfp_init&&(0!=this.mapped_dfp_sizes||this.disable_adx||this.buildDfpSizeMapping())):0==this.dfp_init?this.initDfp():0==this.mapped_dfp_sizes&&this.buildDfpSizeMapping())}.bind(this)):this.interstitial&&consentManager.ready(function(){properOps.dfp_per_slot||properPage.isolated||(0==properPage.dfp_init&&properPage.initDfp(),1==properPage.dfp_init&&(0==this.mapped_dfp_sizes&&(this.buildDfpSizeMapping(),this.dfp_ready=1),1==this.mapped_dfp_sizes&&(0==this.dfp_ready&&this.addBidToDfpSlot(),1==this.dfp_ready&&(0!=this.dfp_sent&&0!=this.dfp_refreshed||this.dfpDisplayOrRefresh()))))}.bind(this)),this.refresh.enabled&&1==properPage.init_slots_build&&0==Object.keys(properAdPool.auctions).length&&null==properAdPool.timeout_handle&&properAdPool.auction_count<properAdPool.max_auctions&&properAdPool.startNewAuction(),this.setDimensions(r),properSpecialOps.buildSlotCallback&&properSpecialOps.buildSlotCallback instanceof Function){properLog.mylog("Calling buildSlotCallback for slot: "+this.name);try{properSpecialOps.buildSlotCallback(this,r)}catch(e){properLog.mylog("Error calling buildSlotCallback for slot: "+this.name),e.name="buildSlotCallbackError",sendError(e)}}return properLog.mylog("Building slot: "+this.name),this.tracking_times.built_ts=ProperMedia.utils.getTimestampMs(),!0},slotObj.prototype.disableSlotRefresh=function(){this.refresh.enabled=0,this.removeRefreshTimeout()},slotObj.prototype.checkVideoEnabled=function(){-1===this.ad_types.indexOf("video")&&1!=properPage.video_enabled||(null===properPage.video_enabled&&(properPage.video_enabled=!0),properPage.loadVideoPlayerScript())},slotObj.prototype.resetSlotRefresh=function(){var e=ProperMedia.utils.deepAccess(properOps,"ad_slots."+this.type+"."+this.name)||{};this.setRefresh(e),this.refresh.count=0},slotObj.prototype.rebuildSlot=function(){if(null==this.rebuild_timeout_handle&&"display"==this.type){var e=Math.max(0,this.min_time_on_page-this.timeSinceDisplayed());properLog.mylog("Rebuilding slot: "+this.name+" ("+e+")");var t=ProperMedia.utils.deepAccess(properOps,"ad_slots."+this.type+"."+this.name)||{};this.setRefresh(t);var r=this.max_tier;this.getMaxTier(),r!==this.max_tier&&this.parseTierSizes(t),this.rebuild_timeout_handle=properSetTimeout.setTimeout.call(this,(function(){clearTimeout(this.rebuild_timeout_handle),this.rebuild_timeout_handle=null,this.refresh.count=0,this.resetBidData(),this.sizes.length>0&&consentManager.ready(function(){this.checkBidsReady()||(this.setWaitInterval(),this.setMaxAuctionTimeout())}.bind(this))}),e)}},slotObj.prototype.getMaxTier=function(){this.max_tier=0,Object.keys(this.size_map).forEach((function(e){e=parseInt(e),properPage.width>=e&&e>=this.max_tier&&(this.max_tier=e)}),this)},slotObj.prototype.parseTierSizes=function(e){let t=0,r=this.size_map[this.max_tier]||[];if(this.is_flex_slot&&e.allowed_size&&(r=[e.allowed_size]),r&&r.length>0){for(const e of r){const[r,s]=e.split("x").map((e=>parseInt(e)));if(!properUser.checkAdBlockDetected()||"in_content"!==this.location||!(!s||isNaN(s)||s>150))if(this.sizes.push(e),isNaN(r)||isNaN(s)){if("interstitial"===e){this.setInterstitial();break}}else 1!==r&&1!==s&&((r<this.min_width||0===this.min_width)&&(this.min_width=r),(s<this.min_height||0===this.min_height)&&(this.min_height=s),(r*s<t||0==t)&&(this.default_size=e.split("x"),t=r*s))}return!0}return!1},slotObj.prototype.setInterstitial=function(){this.type="interstitial",this.ad_types=["interstitial"],this.sizes=["interstitial"],this.interstitial=!0,this.min_width=1,this.min_height=1,this.default_size=[1,1],this.refresh.enabled=!1,this.lazyload.enabled=!1},slotObj.prototype.googletag=function(){return this.google_tag||(1==properOps.dfp_per_slot?this.google_tag={}:this.google_tag=googletag),void 0===this.google_tag.cmd&&(this.google_tag.cmd=[]),this.google_tag},slotObj.prototype.buildDfpSizeMapping=function(){this.getElement()&&this.sizes.length>0&&0==this.mapped_dfp_sizes&&(this.googletag().cmd.push(function(){for(var e=[[1,1]],t=0;t<this.sizes.length;t++){var r=this.sizes[t];if("1x1"!=r&&-1===["400x300","640x480"].indexOf(r)){var s=r.split("x");s[0]=parseInt(s[0]),s[1]=parseInt(s[1]),isNaN(s[0])||isNaN(s[1])?"fluid"==r&&e.push(r):e.push(s)}}this.interstitial?(this.dfp_slot=this.googletag().defineOutOfPageSlot(this.dfpAdUnitPath,this.googletag().enums.OutOfPageFormat.INTERSTITIAL).addService(this.googletag().pubads()),this.dfp_slot&&(this.div_id=this.dfp_slot.getSlotElementId())):ProperMedia.utils.checkOutOfPage(this.dfpAdUnitPath)?this.dfp_slot=this.googletag().defineOutOfPageSlot(this.dfpAdUnitPath,this.div_id).addService(this.googletag().pubads()):this.sticky&&properSpecialOps.sliderHeader?this.dfp_slot=this.googletag().defineSlot(this.dfpAdUnitPath,e,this.div_id).setCollapseEmptyDiv(!0).addService(this.googletag().pubads()):this.dfp_slot=this.googletag().defineSlot(this.dfpAdUnitPath,e,this.div_id).addService(this.googletag().pubads()),this.dfp_slot.setTargeting("proper_slot",this.number),this.sticky&&this.dfp_slot.setTargeting("proper_sticky",this.sticky.toString()),Object.keys(this.floors.sizes).length>0&&Object.keys(this.floors.sizes).map((function(e){if(-1!==this.sizes.indexOf(e)){var t=this.floors.sizes[e];if(t>this.floors.backup){var r=round_floor(t);this.dfp_slot.setTargeting("proper_floor_"+e,r.toFixed(2).toString())}}}),this);var o=round_floor(this.floors.backup);this.dfp_slot.setTargeting("proper_floor",o.toFixed(2).toString())}.bind(this)),this.mapped_dfp_sizes=1,this.bids_ready&&!this.dfp_ready&&this.addBidToDfpSlot())},slotObj.prototype.clearWinningBid=function(){return this.hasWinningBid()&&(0!=this.winning_ad.displayed||this.winning_ad.checkIfExpired()||properAdPool.addBidToPool(this.winning_ad),delete this.winning_ad,this.winning_ad={},this.hasFlexBids()&&this.clearFlexBid()),!0},slotObj.prototype.hasWinningBid=function(){return this.winning_ad instanceof adObj&&""!==this.winning_ad.bidder&&this.winning_ad.price>0&&this.winning_ad.id},slotObj.prototype.hasFlexBids=function(){return!this.is_flex_slot&&this.flex_enabled&&this.flex_ads.length&&this.flex_ads?.every((e=>e instanceof adObj&&""!==e.bidder&&e.price>0&&e.id))},slotObj.prototype.getWinningBid=function(e,t){e=e??this.ad_types,t=t??this.video_type,this.clearWinningBid();const{flex_ads:r,winning_ad:s}=properAdPool.getWinningBids(this,e,t);return this.winning_ad=s,this.flex_ads=[...r],this.hasFlexBids()&&properLog.mylog(`FLEX WIN! (${this.name}, bidder=${this.winning_ad?.bidder} + ${this.flex_ads?.map((e=>e.bidder)).join(" + ")}, size=${this.winning_ad?.size}, price=${this.winning_ad?.price} + ${this.flex_ads?.map((e=>e.price)).join(" + ")})`),this.hasWinningBid()},slotObj.prototype.getRunnerUp=function(e,t){if(!this.hasWinningBid())return 0;e=e??this.ad_types,t=t??this.video_type;const r=properAdPool.ads.filter((e=>e.size===this.winning_ad.size)),s=properAdPool.getWinningBid(this,e,t,r);return s?.price??0},slotObj.prototype.clearWinningAmazonBid=function(){return this.hasWinningAmazonBid()&&(0!=this.winning_amazon_ad.displayed||this.winning_amazon_ad.checkIfExpired()||properAdPool.addAmazonBidToPool(this.winning_amazon_ad),delete this.winning_amazon_ad,this.winning_amazon_ad={}),!0},slotObj.prototype.hasWinningAmazonBid=function(){return!!(this.winning_amazon_ad instanceof adObj&&""!==this.winning_amazon_ad.bidder&&this.winning_amazon_ad.price&&this.winning_amazon_ad.id)},slotObj.prototype.getWinningAmazonBid=function(e,t){return e=e??this.ad_types,t=t??this.video_type,this.clearWinningAmazonBid(),properAdPool.getWinningAmazonBid(this,e,t),this.hasWinningAmazonBid()},slotObj.prototype.clearNonWinningBid=function(e){return this.hasWinningAmazonBid()&&ProperMedia.utils.deepAccess(this,"winning_amazon_ad.id")!==ProperMedia.utils.deepAccess(e,"id")?this.clearWinningAmazonBid():this.hasWinningBid()&&ProperMedia.utils.deepAccess(this,"winning_ad.id")!==ProperMedia.utils.deepAccess(e,"id")&&this.clearWinningBid(),!0},slotObj.prototype.checkBidsReady=function(){if(properUser.checkAdBlockDetected()&&(!properUser.adblock.deliver_to_adblock||-1!==["multiple","unknown"].indexOf(this.location)))return this.deleteSlot(!0),!1;if(checkKillAllAds()||!this.getElement()||1==this.kill_slot||this.interstitial||this.dfp_ready||this.auction_send_complete||this.lazyload.enabled&&!this.lazyload.inRenderZone)return!1;var e=properAdPool.calcTimeout(),t=ProperMedia.utils.getTimePassed(this.auction_started_ts),r=this.max_timeout-t;return!((0==e&&0==properAdPool.auction_count||Object.keys(properAdPool.auctions).length>0||0==Object.keys(properAdPool.finished_auctions).length)&&!this.max_timeout_met)&&(this.getWinningBid(this.ad_types,this.video_type)||r<e||this.max_timeout_met?(this.bids_ready=1,this.tracking_times.bids_ready_ts=ProperMedia.utils.getTimestampMs(),"display"==this.type&&(this.hasWinningBid()&&-1!==this.ad_types.indexOf(this.winning_ad.type)&&(-1!==["display","native"].indexOf(this.winning_ad.type)||"video"==this.winning_ad.type&&"outstream"==this.winning_ad.video_type)||!this.hasWinningBid()&&(r<e||this.max_timeout_met))?(-1!==this.ad_types.indexOf("video")&&this.video_player instanceof videoPlayer&&this.video_player.removePlayer(),1==this.disable_adx||1==properPage.isolated||this.refresh.count>0&&1==this.refresh.exclude_dfp?this.lazyload.enabled&&!this.lazyload.inRenderZone||(this.videoAdCheck()?this.dispalyVideoAd():showWinningAd(this)&&(this.auction_send_complete=!0)):1==properOps.dfp_per_slot?0==this.dfp_init?this.initDfp():0==this.mapped_dfp_sizes?this.buildDfpSizeMapping():0==this.dfp_ready?this.addBidToDfpSlot():this.dfp_sent&&this.dfp_refreshed||this.dfpDisplayOrRefresh():(0==properPage.dfp_init&&properPage.initDfp(),1==properPage.dfp_init&&(0==this.mapped_dfp_sizes&&this.buildDfpSizeMapping(),1==this.mapped_dfp_sizes&&(0==this.dfp_ready&&this.addBidToDfpSlot(),1==this.dfp_ready&&(0!=this.dfp_sent&&0!=this.dfp_refreshed||this.dfpDisplayOrRefresh()))))):this.videoAdCheck()&&this.dispalyVideoAd(),(this.dfp_ready||this.auction_send_complete)&&(this.clearWaitInterval(),this.clearMaxAuctionTimeout()),!0):(this.clearWinningBid(),!1))},slotObj.prototype.videoAdCheck=function(){return this.checkVideoInviewLimit()&&(this.hasWinningBid()&&"video"==this.winning_ad.type&&-1!==this.ad_types.indexOf(this.winning_ad.type)||this.hasWinningAmazonBid()&&"video"==this.winning_amazon_ad.type&&-1!==this.ad_types.indexOf(this.winning_amazon_ad.type)||"video"==this.type&&this.max_timeout_met)&&this.video_player&&this.video_player instanceof videoPlayer},slotObj.prototype.dispalyVideoAd=function(){this.hasFlexSlot()&&this.removeFlexSlot(),this.refresh.enabled=0,this.removeRefreshTimeout(),this.auction_send_complete=!0,this.video_player.removePlayer(),this.video_player.insertPlayer()},slotObj.prototype.initDfp=function(){if(1==this.dfp_init||1==properPage.isolated)return!1;var e,t=!1;if(this.iframe_window)e=this.iframe_window,t=!0;else if(this.iframe_id){const r=document.getElementById(this.iframe_id);if(!r)return void properLog.mylog("ERROR: "+this.iframe_id+" doesn't exist in the DOM.");this.iframe_window=r.contentWindow,e=r.contentWindow,t=!0}else{const t=document.getElementById(this.div_id);if(!t)return void properLog.mylog("WARNING: "+this.div_id+" doesn't exist in the DOM. This should re-run when proper_display is called");const r=document.createElement("iframe");t.innerHTML="",t.appendChild(r),r.id=this.properIframeId,r.frameBorder=0,r.scrolling="no",r.marginWidth="0",r.marginHeight="0",r.style.overflow="hidden",r.style.border="0px",r.style.width="1px",r.style.height="1px",r.style.verticalAlign="bottom";const s="<html><head><script src='https://securepubads.g.doubleclick.net/tag/js/gpt.js' async><\/script></head><body><div id='"+this.div_id+"'></div></body></html>";r.src='javascript:"'+s+'"',r.contentWindow.document.open(),r.contentWindow.document.write(s),r.contentWindow.document.close(),e=r.contentWindow,this.iframe_window=e}if(t){var r=document.createElement("script");r.async=!0,r.type="text/javascript";var s="https:"==document.location.protocol;r.src=(s?"https:":"http:")+"//securepubads.g.doubleclick.net/tag/js/gpt.js",e.document.getElementsByTagName("head")[0].appendChild(r)}ProperMedia.utils.deepAccess(properOps,"confiant.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"confiant.enabled")?confiantWrapper.loadDFPTag(e):(ProperMedia.utils.deepAccess(properOps,"adlightning.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"adlightning.enabled"))&&adLightningWrapper.loadDFPTag(e),e.googletag=e.googletag||{},this.google_tag=e.googletag||{},void 0===this.googletag().cmd&&(this.googletag().cmd=[]),this.googletag().cmd.push(function(){gdprEnforcement.deviceAccessEnforcement(755,"gam")&&gdprConsentModule.hasPurpose4Consent()||(properLog.mylog("DFP: disable personalized GPT ads"),this.googletag().pubads().setPrivacySettings({nonPersonalizedAds:!0})),uspConsent.restrictDataProcessing&&this.googletag().pubads().setPrivacySettings({restrictDataProcessing:!0}),this.googletag().pubads().addEventListener("slotOnload",(function(e){var t=ProperMedia.utils.extractSlotName(e.slot.getSlotElementId()),r=properPage.getSlotFromPageObject(t);properLog.mylog("DFP slotOnload: "+t),r&&r.dispatchCustomEvent("proper-ads-fired",{cpm:ProperMedia.utils.deepAccess(r,"displayed_ad.price"),size:ProperMedia.utils.deepAccess(r,"displayed_ad.size"),ad_type:ProperMedia.utils.deepAccess(r,"displayed_ad.type")})})),this.googletag().pubads().addEventListener("impressionViewable",(function(e){var t=ProperMedia.utils.extractSlotName(e.slot.getSlotElementId()),r=e.slot.getAdUnitPath(),s=properPage.getSlotFromPageObject(t)||properPage.getSlotFromPageObjectByAdUnitPath(r);s&&(properLog.mylog("DFP impressionViewable: "+t),s.dispatchCustomEvent("proper-impression-viewable",{cpm:ProperMedia.utils.deepAccess(s,"displayed_ad.price"),size:ProperMedia.utils.deepAccess(s,"displayed_ad.size"),ad_type:ProperMedia.utils.deepAccess(s,"displayed_ad.type")}))})),this.googletag().pubads().addEventListener("slotRenderEnded",TraceKit.wrap((function(e){var t=e.slot.getSlotElementId(),r=ProperMedia.utils.extractSlotName(t),s=properPage.getSlotFromPageObject(r);properLog.mylog("DFP slotRenderEnded: "+r),s&&(s.tracking_times.dfp_returned_ts=ProperMedia.utils.getTimestampMs(),e.advertiserId!==properOps.proper_advertiser&&e.advertiserId!=properOps.amazon_advertiser&&(e.isEmpty?proper_render(s.getElement(),s.number,1):(proper_render_dfp(r,e),proper_inview(e.isEmpty,r,e.size.join("x"),e.creativeId,e.lineItemId,e.advertiserId))),(!s.sticky&&ProperMedia.utils.deepAccess(properSpecialOps,"adlightning.enabled")&&ProperMedia.utils.deepAccess(properSpecialOps,"adlightning.reportAd")||ProperMedia.utils.deepAccess(properOps,"adlightning.enabled")&&ProperMedia.utils.deepAccess(properOps,"adlightning.reportAd"))&&adLightningWrapper.addReportAd(e))}))),this.googletag().pubads().addEventListener("slotOnload",TraceKit.wrap((function(e){var t;try{t=ProperMedia.utils.extractSlotName(e.slot.getSlotElementId());var r=properPage.getSlotFromPageObject(t);if(properLog.mylog("DFP slotOnload: "+t),r){var s=r.getContentDocument();if(s&&s.getElementById(r.dfpIframeId)){var o=s.getElementById(r.dfpIframeId).contentWindow.document;o&&(o.getElementById("common_15click_overlay")||o.getElementById("common_15click_anchor"))&&sendError(new Error("Detected Google Confirmed Click: "+r.dfp_name+" | "+ProperMedia.utils.deepAccess(r,"displayed_ad.size")))}}}catch(e){properLog.mylog("Error Detecting Google Confirmed Click: "+t)}}))),setDfpPageTargeting(this.googletag().pubads()),this.googletag().pubads().setPrivacySettings({childDirectedTreatment:!!ProperMedia.utils.deepAccess(properSpecialOps,"coppa")}),this.googletag().pubads().disableInitialLoad(),this.googletag().pubads().setPublisherProvidedId(properUser.pubcid),this.googletag().pubads().enableSingleRequest(),this.googletag().enableServices(),this.dfp_enabled_services=!0}.bind(this)),this.dfp_init=1,this.buildDfpSizeMapping()},slotObj.prototype.addBidToDfpSlot=function(){this.googletag().cmd.push(function(){if(this.dfp_ready||!this.mapped_dfp_sizes||!this.isSlotDefinedInGPT())return!1;this.dfp_slot.getTargeting("sovrn_amznbid").length>0&&this.dfp_slot.clearTargeting("sovrn_amznbid"),this.dfp_slot.getTargeting("sovrn_amzniid").length>0&&this.dfp_slot.clearTargeting("sovrn_amzniid"),!this.hasWinningBid()||"video"===ProperMedia.utils.deepAccess(this,"winning_ad.type")&&"outstream"!=ProperMedia.utils.deepAccess(this,"winning_ad.video_type")?(this.dfp_bid_price=roundPriceToDfpBucket(ProperMedia.utils.deepAccess(this,"floors.backup")),this.dfp_slot.getTargeting("proper_bid").length>0&&this.dfp_slot.clearTargeting("proper_bid"),this.dfp_slot.getTargeting("proper_bidder").length>0&&this.dfp_slot.clearTargeting("proper_bidder"),properLog.mylog("Floor added to DFP request ( Floor, "+this.name+") = "+this.dfp_bid_price)):(this.hasFlexBids()?this.winning_ad.dfp_price=roundPriceToDfpBucket(parseFloat(this.winning_ad.dfp_price)+this.flex_ads.reduce(((e,t)=>e+parseFloat(t.dfp_price)),0)):this.winning_ad.dfp_price=roundPriceToDfpBucket(parseFloat(this.winning_ad.price)),this.dfp_bid_price=this.winning_ad.dfp_price,properLog.mylog("Bid added to DFP request ("+this.winning_ad.bidder+", "+this.name+"@"+this.winning_ad.size+") = "+this.winning_ad.dfp_price),this.dfp_slot.setTargeting("proper_bidder",properOps.site_name+"_"+this.winning_ad.bidder),this.dfp_slot.setTargeting("proper_bid",this.dfp_bid_price.toString())),!this.getWinningAmazonBid()||"video"===ProperMedia.utils.deepAccess(this,"winning_amazon_ad.type")&&"outstream"!=ProperMedia.utils.deepAccess(this,"winning_amazon_ad.video_type")||(properLog.mylog("Amazon Bid added to DFP request ("+this.name+"@"+this.winning_amazon_ad.size+") = "+this.winning_amazon_ad.price),this.dfp_slot.setTargeting("sovrn_amznbid",ProperMedia.utils.deepAccess(this,"winning_amazon_ad.price")),this.dfp_slot.setTargeting("sovrn_amzniid",ProperMedia.utils.deepAccess(this,"winning_amazon_ad.ad_details.amzniid")),this.winning_amazon_ad.dfp_price=ProperMedia.utils.deepAccess(this,"winning_amazon_ad.price"),this.dfp_bid_price=_0x4f6067(this)),this.customGamTargeting.length&&(this.customGamTargeting.forEach((function(e){this.dfp_slot.clearTargeting(e)}),this),this.customGamTargeting=[]),this.getGamTargetingAttr(),this.gamTargeting.key&&""!==this.gamTargeting.value&&void 0!==this.gamTargeting.value&&(properLog.mylog(`DFP request slot targeting ${this.name}: ${this.gamTargeting.key} = ${this.gamTargeting.value}`),this.dfp_slot.setTargeting(this.gamTargeting.key,this.gamTargeting.value),this.customGamTargeting.push(this.gamTargeting.key)),void 0===this.refresh.count?this.dfp_slot.setTargeting("refresh_count",0):this.dfp_slot.setTargeting("refresh_count",this.refresh.count.toString()),this.dfp_ready=1,this.getElement()&&this.dfpDisplayOrRefresh()}.bind(this))},slotObj.prototype.dfpDisplayOrRefresh=function(){this.googletag().cmd.push(function(){this.dfp_sent||(this.dfp_sent=1,this.googletag().display(this.div_id),properLog.mylog("DFP display called: "+this.name)),1==properOps.dfp_per_slot?this.dfpSraCall():ProperMedia.utils.deepAccess(properPage,"sra_settings.slot_queue."+this.name)||(properPage.sra_settings.slot_queue[this.name]=this,clearTimeout(properPage.sra_settings.timeout_handler),properPage.sra_settings.timeout_handler=null,properPage.sra_settings.timeout_handler=properSetTimeout.setTimeout.call(properPage,(function(){properPage.dfpSraCall()}),properSpecialOps.sra_timoeut_ms||properPage.sra_settings.timeout_ms))}.bind(this))},slotObj.prototype.dfpSraCall=function(){this.googletag().cmd.push(function(){1==properSpecialOps.update_correlator&&0==properPage.dfp_correlator&&properPage.spa_settings.page_number>1&&(this.googletag().pubads().updateCorrelator(),properPage.dfp_correlator=!0,properLog.mylog("Correlator updated for page: "+properPage.spa_settings.page_number)),this.tracking_times.dfp_sent_ts=ProperMedia.utils.getTimestampMs(),properLog.mylog("DFP refresh called: "+this.name),this.dfp_refreshed=1,this.auction_send_complete=!0,this.googletag().pubads().refresh([this.dfp_slot])}.bind(this))},slotObj.prototype.setWaitInterval=function(){properLog.mylog("Set wait interval for "+this.name+" ( "+this.wait_interval+" )");var e=this;null==this.wait_interval_handle&&(this.wait_interval_handle=properSetInterval.setInterval.call(e,(function(){e.checkBidsReady()}),e.wait_interval))},slotObj.prototype.clearWaitInterval=function(){clearInterval(this.wait_interval_handle),this.wait_interval_handle=null},slotObj.prototype.setMaxAuctionTimeout=function(){var e=this;null==this.max_timeout_handle&&(this.auction_started_ts=ProperMedia.utils.getTimestampMs(),this.max_timeout_handle=properSetTimeout.setTimeout.call(e,(function(){e.max_timeout_met=!0,e.clearWaitInterval(),e.clearMaxAuctionTimeout(),e.checkBidsReady()}),e.max_timeout))},slotObj.prototype.clearMaxAuctionTimeout=function(){clearTimeout(this.max_timeout_handle),this.max_timeout_handle=null},slotObj.prototype.setRefreshInterval=function(){if(0==this.refresh.enabled||1==ProperMedia.utils.deepAccess(this,"displayed_ad.displayed")&&1==ProperMedia.utils.deepAccess(properOps,"bidder_info."+this.displayed_ad.bidder+".dont_refresh"))return this.refresh.enabled=0,!1;var e=Math.max(this.refresh.interval,this.refresh.min_interval);if(-1===this.refresh.inview_interval||this.sticky)e=Math.max(0,e-this.timeSinceDisplayed());else{if(!this.viewability.viewable)return!1;e=Math.max(0,this.refresh.inview_interval-this.viewability.total_time_inview,e-this.timeSinceDisplayed())}return this.refresh.current_interval=e,this.addRefreshTimeout(this.refresh.current_interval),!0},slotObj.prototype.addRefreshTimeout=function(e){var t=this;this.removeRefreshTimeout(),this.refresh_handler=properSetTimeout.setTimeout.call(t,(function(){t.removeRefreshTimeout(),t.refreshSlot()}),e),properLog.mylog(this.name+": Starting refresh timer. ms = "+e)},slotObj.prototype.timeSinceDisplayed=function(){return 0==this.last_displayed_ts?0:Date.now()-this.last_displayed_ts},slotObj.prototype.removeRefreshTimeout=function(){this.refresh_handler&&(properLog.mylog(this.name+": Removing refresh timer."),clearTimeout(this.refresh_handler),this.refresh_handler=null)},slotObj.prototype.resetBidData=function(){this.last_displayed_ts=0,this.bids_ready=0,this.dfp_ready=0,this.dfp_refreshed=0,this.dfp_bid_price=0,this.winning_ad={},this.exclude_advertiser=[],this.advertiserId=0,this.auction_started_ts=0,this.max_timeout_met=!1,this.auction_send_complete=!1,this.adl_blocked=!1,this.viewability.entered_inview_ts=this.viewability.viewable?ProperMedia.utils.getTimestampMs():0,this.viewability.total_time_inview=0,this.clearWaitInterval(),this.clearMaxAuctionTimeout(),this.removeRefreshTimeout()},slotObj.prototype.refreshSlot=function(e){return properUser.checkAdBlockDetected()&&(this.refresh.enabled=0),!!(this.refresh.count<this.refresh.max&&this.refresh.enabled||e)&&(!(this.lazyload.enabled&&!this.lazyload.inFetchZone)&&(properLog.mylog("Refreshing slot: "+this.name),this.refresh.count++,this.resetBidData(),this.slot_level_auction?(properAdPool.sendAuction(!0,[this]),this.setWaitInterval(),this.setMaxAuctionTimeout()):this.checkBidsReady()||(this.setWaitInterval(),this.setMaxAuctionTimeout()),!0))},slotObj.prototype.getTimeInview=function(){return 0==this.viewability.entered_inview_ts?0:Date.now()-this.viewability.entered_inview_ts},slotObj.prototype.viewabilityChange=function(e){return e.inDeleteZone?(this.deleteSlot(!0),!1):(this.viewability.viewable===e.viewable&&this.viewability.activeTab===e.activeTab||(properLog.mylog(this.name+": Viewability Change. visible = "+e.viewable+" Active Tab = "+e.activeTab),this.viewability.viewable=e.viewable,this.displayed&&this.refresh.enabled&&this.refresh.count<this.refresh.max&&e.activeTab&&(e.viewable&&-1!==this.refresh.inview_interval||-1==this.refresh.inview_interval||this.sticky)?this.setRefreshInterval():this.removeRefreshTimeout(),e.viewable?(this.dispatchCustomEvent("inview"),this.viewability.entered_inview_ts=ProperMedia.utils.getTimestampMs(),"video"==ProperMedia.utils.deepAccess(this,"displayed_ad.type")&&properPage.incrementVideoPlayerCount(this,"inview")):(this.dispatchCustomEvent("not-inview"),this.viewability.total_time_inview+=this.getTimeInview(),"video"==ProperMedia.utils.deepAccess(this,"displayed_ad.type")&&properPage.decrementVideoPlayerCount(this,"inview")),this.viewability.activeTab=e.activeTab),this.viewability.viewable||this.getElement()?(this.lazyload.enabled&&(this.lazyload.inFetchZone!==e.inFetchZone&&(properLog.mylog(this.name+": LazyLoad Change. inFetchZone = "+e.inFetchZone),this.lazyload.inFetchZone=e.inFetchZone,this.lazyload.inFetchZone?(this.wait_interval_handle||this.max_timeout_met||this.setWaitInterval(),this.max_timeout_handle||this.max_timeout_met||this.setMaxAuctionTimeout()):this.clearWaitInterval()),this.lazyload.inRenderZone!==e.inRenderZone&&(properLog.mylog(this.name+": LazyLoad Change. inRenderZone = "+e.inRenderZone),this.lazyload.inRenderZone=e.inRenderZone,this.lazyload.inRenderZone&&this.checkBidsReady())),!0):(this.deleteSlot(!0),!1))},slotObj.prototype.dispatchCustomEvent=function(e,t){t=t||{};const r=ProperMedia.utils.mergeObject({slot:this.name,event:e},t),s=new CustomEvent("properEvents",{detail:r});window.dispatchEvent(s)},slotObj.prototype.getGPTSlots=function(){var e=[];return 0==properPage.isolated&&this.googletag().cmd.push(function(){e=this.googletag().pubads().getSlots().map((function(e){return e.getSlotElementId()}))}.bind(this)),e},slotObj.prototype.isSlotDefinedInGPT=function(){return!!this.div_id&&-1!==this.getGPTSlots().indexOf(this.div_id)},slotObj.prototype.removeCreative=function(){this.refresh.count>0&&ProperMedia.utils.deepAccess(this,"displayed_ad.bidder")&&void 0!==bidAdapters[this.displayed_ad.bid_adapter_name]&&"function"==typeof bidAdapters[this.displayed_ad.bid_adapter_name].removeCreative&&bidAdapters[this.displayed_ad.bid_adapter_name].removeCreative(this)},slotObj.prototype.closeSliderSlot=function(){if(!this.slider_settings.keep_on_close){this.deleteSlot(!1);var e=window.top.document.getElementById(this.div_id);e&&(e.innerHTML="")}return!0},slotObj.prototype.removeElemFromDOM=function(){try{var e=this.sticky?window.top.document.getElementsByClassName("proper-ad-unit ad-sticky "+this.name)[0]:window.top.document.getElementById(this.div_id);if(e&&(-1!==e.parentNode.className.indexOf(properOps.slot_wrapper_class)&&(e=e.parentNode),e.parentNode.removeChild(e),this.is_flex_slot)){const e=this.dynamic?.cssselector,t=window.top.document.querySelector(e);t?.parentNode.removeChild(t)}}catch(e){properLog.mylog("Error deleting slot: "+this.name)}},slotObj.prototype.deleteSlot=function(e){try{0==this.kill_slot&&(this.kill_slot=!0,this.refresh.enabled=0,-1!==this.ad_types.indexOf("video")&&(properPage.decrementVideoPlayerCount(this,"possible"),"video"==ProperMedia.utils.deepAccess(this,"displayed_ad.type")&&this.video_player instanceof videoPlayer&&this.video_player.removePlayer()),this.resetBidData(),this.lazyload.enabled=0,this.destroyDfpSlot(),properPage.viewability_tracker.removeElement(this.div_id),e&&this.getElement()&&this.removeElemFromDOM(),properPage.getSlotFromPageObject(this.name,[this.type])&&delete properPage.slots[this.type][this.name],properLog.mylog("Deleted Slot: "+this.name))}catch(e){console.error(e)}},slotObj.prototype.destroyDfpSlot=function(){0==properPage.isolated&&this.isSlotDefinedInGPT()&&(this.googletag().cmd.push(function(){this.googletag().destroySlots([this.dfp_slot])}.bind(this)),this.dfp_slot={},this.dfp_init=0,this.dfp_ready=0,this.dfp_sent=0,this.dfp_refreshed=0,this.mapped_dfp_sizes=0)},slotObj.prototype.getDefinedSizes=function(){return this.defined_sizes??=this.sizes.reduce(((e,t)=>{const{w:r,h:s}=ProperMedia.utils.parseSize(t);return r&&s&&e.push({w:r,h:s}),e}),[])},slotObj.prototype.setFlexMap=function(e){if(this.flex_enabled)if(e&&Object.keys(e).length)this.flex_map=e[this.max_tier]??{};else{const e=this.getDefinedSizes();this.flex_map=e.reduce(((t,r)=>{let{w:s,h:o}=r;const a=e.find((e=>{let[t,r]=e;return 2*+s<=+t&&+o<=+r||2*+o<=+r&&+s<=+t}));if(a){const[e,r]=a,n=Math.floor(e/s),d=Math.floor(r/o);t[`${s}x${o}`]=Math.max(n,d)}return t}),{})}else this.flex_map={};return this.flex_map},slotObj.prototype.setDimensions=function(e){if(this.is_flex_slot||this.sticky||this.interstitial)return;const t=this.advertisement_disclosure?.enabled?20:0,r=this.getDefinedSizes(),s=this.getParent()?.clientWidth;let o=e.max_width?Math.min(s,e.max_width):s,a=0,n=0;for(const{w:s,h:d}of r){o=e.max_width||Math.max(o,s);const r=`${s}x${d}`,p=this.flex_map?.[r]||1,l=Math.ceil(p*s/(o||1)),c=Math.min(p,Math.floor(o/s||1));this.flex_layout[r]={rows:l,columns:c},a=Math.max(a,c*s+20*(c-1)),n=Math.max(n,l*d+20*(l-1)+t*l)}(this.smart_size||e.min_width)&&(this.min_width=e.min_width?e.min_width:a),(this.smart_size||e.min_height)&&(this.min_height=e.min_height?e.min_height:n),e.max_width&&(this.max_width=e.max_width),e.max_height&&(this.max_height=e.max_height);const d=this.flex_enabled?this.getFlexWrapper():"#"+CSS.escape(this.div_id),{obj:p}=$(d);p&&(p.style.width="",p.style.height="",p.style.minWidth=this.min_width+"px",p.style.minHeight=this.min_height+"px",this.max_width&&(p.style.maxWidth=this.max_width+"px"),this.max_height&&(p.style.maxHeight=this.max_height+"px"))},slotObj}(),videoPlayer=function(e,t,r){this.slot=null,this.auto_insert=!1,this.auto_inserted=!1,this.player_settings={id:"",div_id:"",dfp_ad_unit:"",video_id:"",video_type:"",number_of_ads:10,autoplay:1,backfill:!1,backfill_id:"",small_player:"desktop_ad",small_player_bottom:100,ad_failure_limit:5,vast_timeout:5e3,no_ads_no_player:!1,horizontal_slider:"right",vertical_slider:"bottom"},this.getElement=function(){return top.document.getElementById(this.player_settings.div_id)},this.init=function(e,t,r){this.slot=r,this.checkAutoInsert(),this.setPlayerSettings(e,t.player_settings)},this.checkAutoInsert=function(){var e=top.document.getElementById(this.slot.div_id);e&&(e.classList.contains("propervideo-main_player_container")||e.hasAttribute("data-video-id"))?(this.div_id=this.slot.div_id,this.auto_insert=!1):this.auto_insert=!0},this.setPlayerSettings=function(e,t){if(this.slot.slider){var r=properDevice.isMobile()?"mobile":"desktop",s=ProperMedia.utils.deepAccess(this.slot,"slider_settings.location."+r)||["right","bottom"];t.horizontal_slider=s[0]||"right",t.vertical_slider=s[1]||"bottom",t.close_button=ProperMedia.utils.deepAccess(this.slot,"slider_settings.close_button"),t.keep_on_close=ProperMedia.utils.deepAccess(this.slot,"slider_settings.keep_on_close")}var o=this.player_settings.div_id?this.player_settings.div_id:e+"-"+ProperMedia.utils.makeid(10);(t=ProperMedia.utils.mergeObject({},this.player_settings,t||{},{id:e,div_id:o,dfp_id:this.slot.dfp_id})).autoplay=t.autoplay?1:0,this.player_settings=ProperMedia.utils.deepCopy(t)},this.insertPlayer=function(){var e=top.document.getElementById(this.slot.div_id);if(this.slot.slider&&$(".slider_unit #close_button").obj&&$(".slider_unit #close_button").remove(),e&&this.auto_insert)if(document.getElementById(this.player_settings.div_id))window.top.propervideotag=window.top.propervideotag||[],this.auto_inserted&&"outstream"==this.player_settings.video_type?window.top.propervideotag.push(function(){window.top.propervideo_display(this.player_settings.div_id,this.slot.name,properOps.site_name,"outstream_restart")}.bind(this)):window.top.propervideotag.push(function(){window.top.propervideo_display(this.player_settings.div_id,this.slot.name,properOps.site_name)}.bind(this));else{if(this.slot.getElement().innerHTML="",properOps.dfp_per_slot){var t=top.document.getElementById(this.slot.div_id+"-iframe");t&&(t.style.width="0px",t.style.height="0px")}var r=this.buildPlayerElem();e.prepend(r),this.auto_inserted=!0}properPage.incrementVideoPlayerCount(this.slot,"onpage"),this.slot.viewability.viewable&&properPage.incrementVideoPlayerCount(this.slot,"inview")},this.removePlayer=function(){try{var e=top.document.getElementById(this.player_settings.div_id);e&&(this.auto_inserted=!1,e.remove()),this.destroyVideoPlayerObj(),properPage.decrementVideoPlayerCount(this.slot,"onpage"),this.slot.viewability.viewable&&properPage.decrementVideoPlayerCount(this.slot,"inview")}catch(e){}},this.destroyVideoPlayer=function(){this.removePlayer();var e=ProperMedia.utils.deepAccess(properOps,"ad_slots."+this.slot.type+"."+this.slot.name)||{};this.slot.setRefresh(e),this.slot.refreshSlot()},this.destroyVideoPlayerObj=function(){if("undefined"!=typeof ProperMediaVideo&&ProperMedia.utils.deepAccess(ProperMediaVideo,"ad_project.applications")&&ProperMedia.utils.deepAccess(ProperMediaVideo,"ad_project.applications").length)for(var e=0;e<ProperMediaVideo.ad_project.applications.length;e++)if(ProperMedia.utils.deepAccess(ProperMediaVideo,"ad_project.applications."+e+".video_player.destroy_player")&&ProperMedia.utils.deepAccess(ProperMediaVideo,"ad_project.applications."+e+".div_name")==this.player_settings.div_id){ProperMediaVideo.ad_project.applications[e].video_player.destroy_player();break}},this.buildPlayerElem=function(){if("instream"==this.player_settings.video_type){(t=document.createElement("div")).id=this.player_settings.div_id,t.setAttribute("data-video-id",this.player_settings.video_id),t.setAttribute("data-small-player",this.player_settings.small_player),this.player_settings.number_of_ads&&t.setAttribute("data-number-of-ads",this.player_settings.number_of_ads),this.player_settings.autoplay&&t.setAttribute("data-autoplay",this.player_settings.autoplay?1:0);var e='var window.top.propervideotag = window.top.propervideotag || []; window.top.propervideotag.push(function(){ window.top.propervideo_display("'+this.player_settings.div_id+'", "'+this.slot.name+'", "'+this.slot.name+'"); });';return(r=document.createElement("script")).type="text/javascript",r.appendChild(document.createTextNode(e)),t.appendChild(r),t}if("outstream"==this.player_settings.video_type){var t;(t=document.createElement("div")).id=this.player_settings.div_id,t.setAttribute("data-auto-injected",!0),t.setAttribute("data-video-id",properOps.site_name+"-"+this.player_settings.video_type),t.setAttribute("data-outstream",this.player_settings.video_type),t.setAttribute("data-small-player",this.player_settings.small_player),t.setAttribute("data-backfill",this.player_settings.backfill),this.player_settings.backfill&&this.player_settings.backfill_id&&t.setAttribute("data-backfill-id",this.player_settings.backfill_id),this.player_settings.number_of_ads&&t.setAttribute("data-number-of-ads",this.player_settings.number_of_ads),this.player_settings.autoplay&&t.setAttribute("data-autoplay",this.player_settings.autoplay?1:0);var r;e='window.top.propervideotag = window.top.propervideotag || []; window.top.propervideotag.push(function(){ window.top.propervideo_display("'+this.player_settings.div_id+'", "'+this.slot.name+'", "'+properOps.site_name+'", "outstream_restart"); });';return(r=document.createElement("script")).type="text/javascript",r.appendChild(document.createTextNode(e)),t.appendChild(r),t}},this.adSuccessCallback=function(){console.log("adSuccessCallback")},this.adErrorCallback=function(){console.log("adErrorCallback")},this.init(e,t,r)},bidObj=function(){function bidObj(e,t,r,s){this.bidder=e,this.auction=s,this.sent=0,this.returned=0,this.requests=t,this.slot_requests=r,this.responses=[],this.responses_no_bid=[],this.response_errors=[]}return bidObj.prototype.incrementRequestsSent=function(e){this.sent+=isNaN(parseInt(e))?0:parseInt(e),this.auction.incrementRequestsSent(e)},bidObj.prototype.incrementBidResponseCount=function(e){this.returned+=isNaN(parseInt(e))?0:parseInt(e),this.auction.incrementBidResponseCount(e)},bidObj.prototype.logBidResponse=function(e){var t=bidderToAdapterName(this.bidder),r="s2s"==t?"s2s":"header",s="s2s"==r?e.bidder:this.bidder,o=ProperMedia.utils.deepAccess(properOps,"bidder_info."+s+".rev_share")||ProperMedia.utils.deepAccess(bidAdapters,t+".bidderInfo.rev_share")||1;ProperMedia.utils.deepAccess(properOps,"bidders."+r+"."+s+".account_overrides.enabled")&&ProperMedia.utils.deepAccess(properOps,"bidders."+r+"."+s+".account_overrides.rev_share")&&(o=Math.round(ProperMedia.utils.deepAccess(properOps,"bidders."+r+"."+s+".account_overrides.rev_share"))/100),e.pub_demand=!!ProperMedia.utils.deepAccess(properOps,"bidders."+r+"."+s+".account_overrides.enabled"),e.bid_adapter_name=t,o<1&&ProperMedia.utils.isNumber(e.price)&&(e.price=parseFloat(e.price)*parseFloat(o)),"a9"!=s&&"a9"!=t||!ProperMedia.utils.isStr(e.price)?e.price&&ProperMedia.utils.isNumber(e.price)&&(e.dfp_price=roundPriceToDfpBucket(e.price)):(e.price=e.price.replace(/(o_|v_)/,""),e.gross=e.gross.replace(/(o_|v_)/,"")),e.price&&!e.nobid&&"display"==e.type&&e.adcode||"video"==e.type&&e.vast_tag||"native"==e.type&&Object.keys(e.native).length?(this.responses.push(ProperMedia.utils.deepCopy(e)),this.auction.logBidResponse(e,this),properLog.log_bid(e)):this.logNoBidResponse(e)},bidObj.prototype.logNoBidResponse=function(e){this.responses_no_bid.push(e),properLog.log_bid(e)},bidObj.prototype.logBidResponseError=function(e){this.response_errors.push(e)},bidObj}(),adObj=function(){function adObj(e){this.id=e.id||ProperMedia.utils.generateUUID(),this.type=e.type||"display",this.gross=e.gross||0,this.price=e.price||0,this.displayed=e.displayed||0,this.dfp_price=e.dfp_price||0,this.floor=e.floor||0,this.bidder=e.bidder||"",this.bid_adapter_name=e.bid_adapter_name||"",this.size=e.size||"1x1",this.adcode=e.adcode||"",this.nurl=e.nurl||"",this.burl=e.burl||"",this.vast_tag=e.vast_tag||"",this.vast_type=e.vast_type||"",this.vpaid=e.vpaid||!1,this.video_type=e.video_type||"",this.tag_id=e.tag_id||"",this.ad_details=e.ad_details||{},this.request_url=e.request_url||"",this.response=e.response||{},this.response_ms=e.response_ms||0,this.received_ts=e.received_ts||0,this.ttl=e.ttl||12e4,this.dealid=e.dealid||"",this.cid=e.cid||"",this.crid=e.crid||"",this.adid=e.adid||"",this.adomain=e.adomain||[],this.cat=e.cat||[],this.attr=e.attr||[],this.ext=e.ext||{},this.native=e.native||{},this.nobid=e.nobid||!1,this.pub_demand=e.pub_demand||!1,this.target_slot=e.target_slot||!1,this.uids=e.uids||[]}return adObj.prototype.timePassed=function(){return(new Date).getTime()-this.received_ts},adObj.prototype.checkIfExpired=function(){return this.timePassed()>this.ttl},adObj.prototype.timeTillExpiration=function(){return this.ttl-this.timePassed()},adObj.prototype.onBidWon=function(e){try{if(ProperMedia.utils.deepAccess(bidAdapters,this.bid_adapter_name+".onBidWon")&&bidAdapters[this.bid_adapter_name].onBidWon(this,e),"native"==this.type&&fireNativeTrackers("impression",this),"1x1"==this.size||"native"==this.type||properOps.native_sizes[this.size]){var t=e.getContentDocument();if(t){var r=window.top.document.getElementById(e.div_id).parentNode.parentNode,s=getComputedStyle(r),o=parseInt(s.marginTop),a=parseInt(s.marginBottom),n=parseInt(r.offsetHeight)+o+a,d=window.top.document.getElementById(e.properIframeId);d&&(d.style.height=n+"px");var p=t.getElementById(e.dfpIframeId);p&&(p.style.height=n+"px")}}}catch(e){}},adObj}(),deviceObj=function(){this.browser="",this.browser_version="",this.browser_group="",this.device_type="",this.os="",this.os_group="",this.init=function(){var e={browser:{IE:"Explorer","Chrome Headless":"Chrome","Chrome WebView":"Chrome"},device:{console:"desktop"}};void 0!==UAParser&&function(){var t=(new UAParser).getResult();this.browser=t.browser.name,t.browser.version&&(this.browser_version=t.browser.version),this.browser_group=t.browser.name,void 0!==e.browser&&void 0!==e.browser[this.browser_group]&&(this.browser_group=e.browser[this.browser_group]),this.device_type=t.device.type,this.device_type||(this.device_type="desktop"),void 0!==e.device&&void 0!==e.device[this.device_type]&&(this.device_type=e.device[this.device_type]),this.os=t.os.name,t.os.version&&(this.os+=" "+t.os.version),this.os_group=t.os.name}.bind(this)(),window.device={browser:this.browser,browser_group:this.browser_group,device_type:this.device_type,os:this.os,os_group:this.os_group}},this.isMobile=function(){return"mobile"==this.device_type},this.init()},userIds=function(){var e,t="cookie",r="localstorage",s="_pbjs_id_optout",o={},a=[],n=[],d={},p={},l=!1,c=!1,u=150,g=null,m=null,_=!1,h=!1,b=0,v={moduleType:"core",moduleName:"userid"};function initUserIdData(){ProperMedia.utils.deepAccess(properSpecialOps,"userIdData")?p=ProperMedia.utils.deepAccess(properSpecialOps,"userIdData"):properStorage.getCookie("properUserIdData",v)&&(p=properStorage.getCookie("properUserIdData",v)),p&&ProperMedia.utils.isStr(p)&&(p=ProperMedia.utils.safeJsonParse(p)),getEmailHashes(),p.emailHashes&&(p.emailHashes.md5||p.emailHashes.sha256||p.emailHashes.sha1)&&(c&&!h&&(l=!1,_=!0),h=!0),runIdentityAdapters()}function runIdentityAdapters(){if(!l)if(properUser.sovrn_sync_done){l=!0;var t=properOps.userIds;t&&t.identityAdapters&&Object.keys(t.identityAdapters).length?function(){var t=ProperMedia.utils.objectValues(ProperMedia.utils.deepAccess(properOps,"userIds.identityAdapters")||{});if(!t.length)return;if(gppConsentModule.enrichEidsDenied())return properLog.mylog("userIds - GPP User Syncs Denied"),[];if(!(e=gdprEnforcement.userIdEnforcement(t)).hasValidated&&!gdprConsentModule.hasPurpose1Consent())return properLog.mylog("User Ids - gdpr permission not valid for local storage or cookies, exit module"),[];t=e.submodules||[];for(var r=0;r<t.length;r++){var s=t[r];if(s.name&&userIdAdapters[s.name]){var a=userIdAdapters[s.name];c||(s.config&&ProperMedia.utils.isPlainObject(s.config)&&ProperMedia.utils.mergeObject(a.config,s.config),s.storage&&ProperMedia.utils.isPlainObject(s.storage)&&ProperMedia.utils.mergeObject(a.storage,s.storage),a.config.enabled&&(o[s.name]=a)),ProperMedia.utils.deepAccess(o,s.name+".initialize")&&ProperMedia.utils.isFn(o[s.name].initialize)&&o[s.name].initialize(p)}else properLog.mylog("Coudln't find identityAdapter with name: "+s.name)}Object.keys(o).length>0?consentManager.ready((function(){Object.keys(o).forEach((function(e){!function(e){if(e.storage){var t,r=e.storage,s=getStoredValue(r,void 0),o=!1;if("number"==typeof r.refreshInSeconds){var a=new Date(getStoredValue(r,"last"));o=a&&Date.now()-a.getTime()>1e3*r.refreshInSeconds}!s||o||_?t=e.getId(s):ProperMedia.utils.isFn(e.extendId)&&(t=e.extendId(s)),ProperMedia.utils.isPlainObject(t)&&(t.id&&(setStoredValue(r,t.id),s=t.id),ProperMedia.utils.isFn(t.callback)&&(e.callback=t.callback,b++)),s&&(e.idObj=e.decode(s))}else e.config.value?e.idObj=e.config.value:(t=e.getId(),ProperMedia.utils.isPlainObject(t)&&(ProperMedia.utils.isFn(t.callback)&&(e.callback=t.callback,b++),t.id&&(e.idObj=e.decode(t.id))))}(o[e])})),g=properSetTimeout.setTimeout(matchingDone,u),b>0?Object.keys(o).forEach((function(e){var t=o[e];ProperMedia.utils.isFn(t.callback)&&t.callback((function(e){e?(t.storage&&setStoredValue(t.storage,e),t.idObj=t.decode(e)):properLog.mylog("UserID: "+t.name+" - request id responded with an empty value"),0==--b?matchingDone():createUidObjAndEidsArray(),t.callback=void 0}))})):matchingDone()})):matchingDone()}():matchingDone()}else properLog.mylog("UserIds: Wait for Sovrn Hashed Email Matching.")}function getEmailHashes(){if(!p.emailHashes){p.emailHashes=getStoredValue({gvlid:13,type:"localstorage",name:"sovrn-hem",expiresInDays:7})}return function(){if(p.emailHashes){h=!0,setStoredValue({gvlid:13,type:"localstorage",name:"sovrn-hem",expiresInDays:7},p.emailHashes)}}(),p.emailHashes||!1}function getStoredValue(e,s){var o,a=s?e.name+"_"+s:e.name;try{var n={gvlid:e.gvlid,moduleName:e.name||"userid"};if(e.type===t)o=decodeURIComponent(properStorage.getCookie(a,n)||"");else if(e.type===r){var d=properStorage.getDataFromLocalStorage(e.name+"_exp",n);""===d?o=properStorage.getDataFromLocalStorage(a,n):d&&new Date(d).getTime()-Date.now()>0&&(o=decodeURIComponent(properStorage.getDataFromLocalStorage(a,n)))}"string"==typeof o&&"{"===(o=o.trim()).charAt(0)&&(o=ProperMedia.utils.safeJsonParse(o))}catch(e){properLog.mylog(e)}return o}function setStoredValue(e,s){try{if(!s)return;var o={gvlid:e.gvlid,moduleName:e.name||"userid"},a=ProperMedia.utils.isPlainObject(s)?JSON.stringify(s):s,n=new Date(Date.now()+864e5*e.expiresInDays).toUTCString();e.type===t?(properStorage.setCookie(e.name,a,n,"Lax","",o),"number"==typeof e.refreshInSeconds&&properStorage.setCookie(e.name+"_last",(new Date).toUTCString(),n,"Lax","",o)):e.type===r&&(properStorage.setDataInLocalStorage(e.name+"_exp",n,o),properStorage.setDataInLocalStorage(e.name,encodeURIComponent(a),o),"number"==typeof e.refreshInSeconds&&properStorage.setDataInLocalStorage(e.name+"_last",(new Date).toUTCString(),o))}catch(e){properLog.mylog(e)}}function createUidObjAndEidsArray(){n=[],Object.keys(o).forEach((function(e){var t=o[e];if(!ProperMedia.utils.deepAccess(t.excludeEid)){var r=createEidObject(t);r&&n.push(r),t.idObj&&(ProperMedia.utils.isPlainObject(t.idObj)&&Object.keys(t.idObj).length||ProperMedia.utils.isStr(t.idObj))&&(d[t.eid_name]=t.idObj)}}))}function createEidObject(e){var t={};t.source=e.source||"";var r=ProperMedia.utils.isFn(e.getValue)?e.getValue():e.idObj;if(!ProperMedia.utils.deepAccess(e.excludeEid)&&ProperMedia.utils.isStr(r)){var s={id:r,atype:e.atype||1};if(ProperMedia.utils.isFn(e.getUidExt)){var o=e.getUidExt();o&&(s.ext=o)}if(t.uids=[s],ProperMedia.utils.isFn(e.getEidExt)){var a=e.getEidExt();a&&(t.ext=a)}return t}return null}function matchingDone(){if(createUidObjAndEidsArray(),1!=c){if(c=1,ProperMedia.utils.isFn(m)&&(m(),m=null),properOps.sovrn_signal||properSpecialOps.sovrn_signal){var e=document.createElement("script");e.src="https://get.s-onetag.com/70badba6-d3bf-4921-9807-0c0f5d9ffc19/tag.min.js",e.async=!0,e.defer=!0,window.top.document.getElementsByTagName("head")[0].appendChild(e)}properLog.mylog("UserId Matching Done"),clearTimeout(g),g=null}}return{init:function(){a=[properStorage.localStorageIsEnabled(v)?r:null,properStorage.cookiesAreEnabled(v)?t:null].filter((function(e){return null!==e})),-1!==a.indexOf(t)&&properStorage.getCookie(s,v)?properLog.mylog("userIds - opt-out cookie found, exit module"):-1!==a.indexOf(r)&&properStorage.getDataFromLocalStorage(s,v)?properLog.mylog("userIds - opt-out localStorage found, exit module"):initUserIdData()},getUIdsObj:function(){return gppConsentModule.enrichEidsDenied()?(properLog.mylog("userIds - GPP User SharingOptOut or TargetedAdvertisingOptOut"),{}):ProperMedia.utils.deepCopy(d||{})},setCallback:function(e){m=e},getEidsArray:function(){return gppConsentModule.enrichEidsDenied()?(properLog.mylog("userIds - GPP User SharingOptOut or TargetedAdvertisingOptOut"),{}):ProperMedia.utils.deepCopy(n||[])},getUserIdData:function(){return gppConsentModule.enrichEidsDenied()?(properLog.mylog("userIds - GPP User SharingOptOut or TargetedAdvertisingOptOut"),{}):ProperMedia.utils.deepCopy(p||{})},initUserIdData,getEmailHashes,hasEmailHashes:function(){return!!h},isDoneMatching:function(){return!!c},createEidObject,setUserIdDataValue:function(e,t){try{ProperMedia.utils.deepSetValue(p,e,t)}catch(e){}},runIdentityAdapters,mergeUserIdDataValue:function(e){try{ProperMedia.utils.mergeObject(p,e)}catch(e){}}}}(),userObj=function(){this.lang="",this.tzone="",this.member="no",this.pubcid="",this.adblock={detected:!1,acceptable_ads:!1,deliver_to_adblock:!1},this.sovrn_sync_done=!0,this.userIdsCallback=null,this.init=function(){this.tzone=(new Date).getTimezoneOffset(),this.lang=navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage,this.pubcid=userIdAdapters.pubCommonId.getValue()||ProperMedia.utils.generateUUID(),this.setAdBock(),(properOps.sovrn_signal_email_hash||properSpecialOps.sovrn_signal_email_hash)&&(this.sovrn_sync_done=!1,this.getSovrnSignalEmailHash()),window.addEventListener("proper-ad-requests-blocked",function(){this.setAdBock()}.bind(this)),window.addEventListener("proper-adblock-pixels-blocked",function(){this.setAdBock()}.bind(this))},this.setAdBock=function(){if(this.adblock=ProperMedia.utils.deepAccess(properSpecialOps,"adblock")||this.adblock,this.adblock.deliver_to_adblock=properOps.deliver_to_adblock||!1,this.checkAdBlockDetected()&&(!this.adblock.acceptable_ads||!this.adblock.deliver_to_adblock)){properSpecialOps.kill_all_ads=!0;var e=new CustomEvent("proper-ad-bidders-blocked",{});window.dispatchEvent(e)}this.checkAdBlock()&&properSpecialOps.iframe_auction&&$.createAuctionIframe()},this.checkAdBlock=function(){return!!(this.checkAdBlockDetected()&&this.adblock.acceptable_ads&&this.adblock.deliver_to_adblock)},this.checkAdBlockDetected=function(){return!(!this.adblock.detected||properSpecialOps.disable_adblock_solution||properSpecialOps.adtoniq)},this.getSovrnSignalEmailHash=function(){if(userIds.getEmailHashes()||gppConsentModule.isConsentDenied())properLog.mylog("UserID - Hashed Emails From Storage"),properUser.sovrn_sync_done=!0;else{var e=properSetTimeout.setTimeout(sovrnSyncDone,350),t=ProperMedia.utils.deepAccess(properPage,"get_vars.signal_test_id")?"83919c0c-77b4-4e6a-92a9-de8cd16be2db":this.pubcid;function sovrnSyncDone(){clearTimeout(e),properUser.sovrn_sync_done=!0,userIds.runIdentityAdapters()}$.ajax({url:"https://ehash.proper.io/get/"+t,method:"GET",timeout:300,requestType:"cors",withCredentials:!0,success:function(e){e&&(e=ProperMedia.utils.safeJsonParse(e),ProperMedia.utils.isPlainObject(e)&&(properLog.mylog("UserID - Sovrn Signal Hashed Email: "+e),userIds.setUserIdDataValue("emailHashes",e))),sovrnSyncDone()},error:function(e){sovrnSyncDone()}})}},this.stickyFreqCapHandler={setStickyClosedCookie:function(){var e=new Date;e.setHours(23,59,59,0),properStorage.setCookie("properStickyClosed","true",e.toGMTString(),"Lax","",{moduleType:"core",moduleName:"userid"})},getStickyClosedCookie:function(){return"true"==properStorage.getCookie("properStickyClosed",{moduleType:"core",moduleName:"userid"})},setStickyUnitImps:function(e){var t=new Date;t.setHours(23,59,59,0),properStorage.setCookie("properStickyUnitImps",parseInt(e),t.toGMTString(),"Lax","",{moduleType:"core",moduleName:"userid"})},getStickyUnitImps:function(){var e=properStorage.getCookie("properStickyUnitImps",{moduleType:"core",moduleName:"userid"});return isNaN(parseInt(e))?0:parseInt(e)},incrementStickyUnitImps:function(){var e=this.getStickyUnitImps()||0;e+=1,this.setStickyUnitImps(e)}}},logObj=function(){this.log_lines={},this.autoplay_html={},this.rogue_data=[],this.saved_data={},this.bid_data={},this.interstitial_bid_data={},this.ad_info={},this.rogue_timeout=null,this.tracker_timeout=null,this.tracker_wait=250,this.init_bid_data=function(){ProperMedia.utils.deepAccess(this,"bid_data.ad_slots")&&Object.keys(this.bid_data.ad_slots).length>0&&this.proper_tracker(),this.setBidData(),this.send_pageview_pixel()},this.setBidData=function(){this.bid_data={payload_version:ProperMedia.utils.validateValue(properOps.payload_version,{type:"string"}),page_guid:ProperMedia.utils.validateValue(properPage.uuid,{type:"string"}),website:ProperMedia.utils.validateValue(properOps.site_name,{type:"string",default_val:"unknown",max_len:40}),url:ProperMedia.utils.validateValue(properPage.url,{type:"string",max_len:255}),url_path:ProperMedia.utils.validateValue(properPage.path,{type:"string",max_len:150}),os:ProperMedia.utils.validateValue(properDevice.os_group,{type:"string",max_len:30}),browser:ProperMedia.utils.validateValue(properDevice.browser_group,{type:"string",max_len:30}),device:ProperMedia.utils.validateValue(properDevice.device_type,{type:"string",max_len:10}),use_ssl:ProperMedia.utils.validateValue(properPage.use_ssl,{type:"boolean"}),is_mobile:ProperMedia.utils.validateValue("mobile"==properDevice.device_type,{type:"boolean"}),is_isolated:ProperMedia.utils.validateValue(properPage.isolated,{type:"boolean"}),session_depth:ProperMedia.utils.validateValue(properSession.sessionData.depth,{type:"number"}),session_guid:ProperMedia.utils.validateValue(properSession.sessionData.uuid,{type:"string"}),resolution_width:ProperMedia.utils.validateValue(properPage.width,{type:"number",max:99999}),resolution_height:ProperMedia.utils.validateValue(properPage.height,{type:"number",max:99999}),rtp_file_version:ProperMedia.utils.validateValue(properOps.rtp_file_version,{type:"number"}),referrer:ProperMedia.utils.validateValue(properSession.sessionData.referrer,{type:"string",max_len:255}),utm_source:ProperMedia.utils.validateValue(properSession.sessionData.utm_source,{type:"string",max_len:100}),utm_campaign:ProperMedia.utils.validateValue(properSession.sessionData.utm_campaign,{type:"string",max_len:255}),utm_medium:ProperMedia.utils.validateValue(properSession.sessionData.utm_medium,{type:"string",max_len:100}),utm_term:ProperMedia.utils.validateValue(properSession.sessionData.utm_term,{type:"string",max_len:100}),utm_content:ProperMedia.utils.validateValue(properSession.sessionData.utm_content,{type:"string",max_len:100}),utm_template:ProperMedia.utils.validateValue(properSession.sessionData.utm_template,{type:"string",max_len:100}),utm_referrer:ProperMedia.utils.validateValue(properSession.sessionData.utm_referrer,{type:"string",max_len:100}),utm_adset:ProperMedia.utils.validateValue(properSession.sessionData.utm_adset,{type:"string",max_len:100}),utm_subid:ProperMedia.utils.validateValue(properSession.sessionData.utm_subid,{type:"string",max_len:100}),gclid:ProperMedia.utils.validateValue(properSession.sessionData.gclid,{type:"string",max_len:100}),fbclid:ProperMedia.utils.validateValue(properSession.sessionData.fbclid,{type:"string",max_len:100}),category:ProperMedia.utils.validateValue(properPage.page_meta.category,{type:"string",max_len:50}),editor:ProperMedia.utils.validateValue(properPage.page_meta.editor,{type:"string",max_len:50}),writer:ProperMedia.utils.validateValue(properPage.page_meta.writer,{type:"string",max_len:50}),buyer:ProperMedia.utils.validateValue(properPage.page_meta.buyer,{type:"string",max_len:50}),page_type:ProperMedia.utils.validateValue(properPage.page_meta.page_type,{type:"string",max_len:50}),split:ProperMedia.utils.validateValue(properPage.page_meta.split,{type:"string",max_len:50}),tags:ProperMedia.utils.validateValue(properPage.page_meta.tags.join(","),{type:"string",max_len:500}),custom:this.validateCustom(properPage.page_meta.custom),adblock:ProperMedia.utils.validateValue(properUser.adblock.detected,{type:"boolean"}),ad_slots:{}}},this.validateCustom=function(e){var t={};for(var r in e)r.match(/^dimension_([1-9]|10)$/)&&(t[r]=ProperMedia.utils.validateValue(e[r],{type:"string",max_len:100}));return t},this.send_pageview_pixel=function(){ProperMedia.utils.deepSetValue(this,"bid_data.ad_slots.pageview_pixel",{slot_name:"pageview_pixel",bidder:"pageview_pixel",price:0,gross:0,size:"0x0",refresh_cnt:0,line_item_id:"",response_ms:0,auction_duration:0,precent_bids_ready:0,tag_id:"",adid:"",adomain:"",cid:"",crid:"",dealid:""}),this.proper_tracker()},this.send_takeover_pixel=function(e,t){if(!properPage.takeover.logged&&""!=ProperMedia.utils.deepAccess(properPage,"takeover.bidder")){var r=ProperMedia.utils.getTimePassed(e.auction_started_ts),s=properOps.site_name+"_page_takeover_"+properPage.takeover.bidder;ProperMedia.utils.deepSetValue(this,"bid_data.ad_slots."+s,{slot_name:ProperMedia.utils.validateValue(s,{type:"string",max_len:50}),bidder:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(properPage,"takeover.bidder"),{type:"string",max_len:30}),price:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(properPage,"takeover.price"),{type:"string",max_len:30}),gross:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(properPage,"takeover.price"),{type:"string",max_len:30}),size:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"size"),{type:"string",max_len:10}),refresh_cnt:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"refresh.count"),{type:"number",max:999}),line_item_id:"",response_ms:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"response_ms"),{type:"number",max:999999}),auction_duration:ProperMedia.utils.validateValue(r,{type:"number",max:999999}),precent_bids_ready:ProperMedia.utils.validateValue(100,{type:"number",max:100}),tag_id:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"tag_id"),{type:"string",max_len:50}),adid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"adid"),{type:"string",max_len:50}),adomain:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"adomain.0"),{type:"string",max_len:50}),cid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"cid"),{type:"string",max_len:50}),crid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"crid"),{type:"string",max_len:50}),dealid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"dealid"),{type:"string",max_len:50}),floor:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"floor"),{type:"number",max:999,max_len:15})}),this.proper_tracker(),properPage.takeover.logged=!0}},this.log_bid=function(e){this.mylog(e.bidder+" ("+e.tag_id+"@"+e.size+") = "+e.price,"bids")},this.log_performance=function(e){this.mylog(e,"performance")},this.log_performance=function(e){this.mylog(e,"performance")},this.mylog=function(e,t){t=t||"proper",e=performance.now().toFixed(2)+"ms - "+t+" - "+e,this.log_lines[t]=ProperMedia.utils.checkData(this.log_lines[t]),this.log_lines[t].push(e),(1==ProperMedia.utils.deepAccess(properPage,"get_vars."+t)||"proper"==t&&1==properStorage.getCookie("proper_log",{moduleType:"core"}))&&console.log(e)},this.rogue_tracker=function(){if(clearTimeout(this.rogue_timeout),this.rogue_timeout=null,this.rogue_data.length>0){var e=this.rogue_data;this.rogue_data=[];var t=this;$.ajax({url:"https://proper.io/ajax/tracker.php?rogue=1",method:"POST",data:"data="+JSON.stringify(e),headers:{"Content-type":"application/x-www-form-urlencoded"},success:function(r){t.mylog("autoplay ads tracked! x"+e.length)}})}},this.proper_tracker=function(){var e=this,t={};if(clearTimeout(this.tracker_timeout),this.tracker_timeout=null,this.bid_data.ad_slots&&Object.keys(this.bid_data.ad_slots).length>0){var r=ProperMedia.utils.deepCopy(this.bid_data.ad_slots);this.setBidData(),this.bid_data.website||(this.bid_data.website="unknown"),this.bid_data.ad_slots=Object.keys(r).filter((function(e){return!("pageview_pixel"!=e&&0!==e.indexOf(properOps.site_name))})).reduce(function(e,t){return e[t]=r[t],e}.bind(this),{}),Object.keys(this.bid_data.ad_slots).length>0&&(t=JSON.stringify(this.bid_data),this.bid_data.ad_slots={},properOps.testing_mode.ids?e.mylog("Not logging winnig bids. Test IDs are being used."):$.ajax({url:"https://bids.proper.io/api/bidding",method:"POST",withCredentials:!1,data:t,success:function(t){e.mylog("bids tracked!")},error:function(t){e.mylog("error tracking bid data")}}))}},this.track_rogue=function(e,t){var r={};r=void 0!==e.displayed_ad.displayed&&1==e.displayed_ad.displayed?e.displayed_ad:{bidder:"static_tag",price:0,size:"",adcode:"[DFP STATIC TAG]"},this.mylog("rogue "+t+" detected (slot="+e.name+", bidder="+r.bidder+")"),this.rogue_data.push({rogue_type:t,bidder:r.bidder,cpm:r.price,size:r.size,slot:e.dfp_name,website:properOps.site_name,device:properDevice.device_type,os:properDevice.os_group,browser:properDevice.browser_group,is_mobile:properDevice.isMobile(),tag_id:r.tag_id,ad_details:r.ad_details,split_version:properOps.rtp_file_version}),clearTimeout(this.rogue_timeout),this.rogue_timeout=null,this.rogue_timeout=properSetTimeout.setTimeout.call(this,(function(){this.rogue_tracker()}),this.tracker_wait),e.getWinningBid()&&showWinningAd(e)},this.proper_log=function(e){if("page"!=(e=e||"proper"))if("bid_table"!=e){if("bid_table_csv"!=e){if("on"==e){e="proper";var t=new Date;t.setTime(t.getTime()+36e5),document.cookie="proper_log=1; expires="+t.toGMTString()+"; path=/; SameSite=Lax;",console.log("NOTICE: Turning on persistent logging. Run proper_log('off'); to turn off.")}else if("off"==e)return e="proper",console.log("NOTICE: Turning off persistent logging."),document.cookie="proper_log=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax;",ProperMedia.utils.deepSetValue(properPage,"get_vars."+e,0),!1;for(var r=0;r<properLog.log_lines[e].length;r++)properLog.log_lines[e][r]&&console.log(properLog.log_lines[e][r]),ProperMedia.utils.deepSetValue(properPage,"get_vars."+e,1);return!0}{const e=getResponses();if(e.length){let t="";const r=Object.keys(e[0]);for(let e=0;e<r.length;e++)t+='"'+r[e]+'"'+(e<r.length-1?",":"");for(let r=0;r<e.length;r++)t+='\n"'+ProperMedia.utils.objectValues(e[r]).join('","')+'"';var s=document.createElement("a");s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),s.setAttribute("download","proper_bid_table_"+document.location.hostname+".csv"),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}else console.warn("No responses")}}else{const e=getResponses();if(e.length)if(console.table)console.table(e);else for(let t=0;t<e.length;t++)console.log(e[t]);else console.warn("No responses")}else console.log(properPage);function getResponses(){var e=[],t=properPage.slots;return Object.keys(properPage.slots).forEach((function(r){Object.keys(properPage.slots[r]).forEach((function(s){var o=t[r][s];if(o instanceof slotObj)for(var a=0;a<o.ads.length;a++){const t=adObjToOutput(o.ads[a]);-1===ProperMedia.utils.indexOfObjectInArray(e,t)&&e.push(t)}if(o.hasWinningBid()){const t=adObjToOutput(o.winning_ad);-1===ProperMedia.utils.indexOfObjectInArray(e,t)&&e.push(t)}if(o.hasWinningAmazonBid()){const t=adObjToOutput(o.winning_amazon_ad);-1===ProperMedia.utils.indexOfObjectInArray(e,t)&&e.push(t)}}),this)}),this),e;function adObjToOutput(e){return{slot_name:e.slot.name,size:e.size,bidder:e.bidder,time:e.response_ms,floor:e.floor,cpm:e.price,dfp_price:e.dfp_price,gross:e.gross,price:e.price,tag_id:e.tag_id,refresh_cnt:e.slot.refresh.count,displayed:e.displayed}}}}},properLog=new logObj,optionsObj=function(){this.rtp_file_version=0,this.slot_level_auction=!1,this.dfp_per_slot=0,this.payload_version="3.2.1",this.prebid_version="8.7.0",this.post_id="",this.additional_domains=[],this.site_name="",this.domain="",this.domain_protection=0,this.confiant=0,this.extra_css="",this.extra_js="",this.tmax=1e3,this.default_tags=[],this.mcm_type="mcm",this.proper_dfp_id=5376056,this.dfp_advertiser_ids={google:42904576,proper:600883576,adsense:1349528536},this.dfp_id=5376056,this.google_advertiser=42904576,this.proper_advertiser=600883576,this.amazon_advertiser=455011336,this.adsense_advertiser=1349528536,this.dynamic_floors={mobile:{enabled:!1,init_floor_max:1.25,init_size_floor_max:{"640x480":3.5,"400x300":3.5},init_mult_max:.5,init_mult_min:.5,avg_mult:3,avg_max:10},desktop:{enabled:!1,init_floor_max:1.25,init_size_floor_max:{"640x480":3.5,"400x300":3.5},init_mult_max:.5,init_mult_min:.5,avg_mult:3,avg_max:10}},this.nobid_auction_limit={enabled:!1,display:10,video:15},this.testing_mode={enabled:!1,bidder:!1,ids:!1},this.video_players={},this.video_limit={enabled:!1,outstream_inview_limit:5},this.ad_slots={},this.isolated_urls=[],this.s2s_websockets=!1,this.s2s_sse=!1,this.s2s_wss_endpoint="wss://eb-staging.proper.io/s2s",this.s2s_sse_endpoint="https://eb-staging.proper.io/s2s",this.s2s_endpoint="https://eb.proper.io/s2s",this.crid_whitelist_api="https://creative-whitelist-dev.properio.workers.dev/cwl/",this.slot_wrapper_class="proper-ad-unit",this.usync_endpoint="https://usync.proper.io/v1/usersync",this.usync_hb_endpoint="https://eb.proper.io/v1/usersync",this.sandbox_iframe=1,this.sandbox_options=["allow-popups","allow-pointer-lock","allow-scripts","allow-same-origin"],this.audience_pixels={enabled:!1,thresholds:[]},this.audience_segments={},this.native_sizes={skin:"1x1",fluid:"1x1",native_vertical:"1x1",native_horizontal:"1x1",sticky_horizontal:"1x1"},this.advertisement_disclosure={enabled:!1,location:"below"},this.schain={ver:"1.0",complete:0,nodes:[]},this.skip_schain=!1,this.refresh={desktop:{enabled:1,interval:6e4,inview_interval:15e3,max:5,exclude_dfp:0},mobile:{enabled:1,interval:3e4,inview_interval:15e3,max:5,exclude_dfp:0}},this.floors={desktop:{backup:.15,sizes:{}},mobile:{backup:.15,sizes:{}}},this.lazyload={desktop:{enabled:1,fetchMarginPercent:0,renderMarginPercent:0},mobile:{enabled:1,fetchMarginPercent:0,renderMarginPercent:0}},this.autoDelete={desktop:{enabled:!1,autoDeleteMarginPercent:200},mobile:{enabled:!1,autoDeleteMarginPercent:200}},this.userIds={identityAdapters:{id5id:{name:"id5Id",config:{enabled:!1},storage:{}},liveRampATS:{name:"liveRampATS",config:{enabled:!1},storage:{}},identitylink:{name:"identityLink",config:{enabled:!1},storage:{}},pubcommonid:{name:"pubCommonId",config:{enabled:!0},storage:{}},publink:{name:"pubLink",config:{enabled:!1},storage:{}},fabrickid:{name:"fabrickId",config:{enabled:!1,apiKey:""},storage:{}},verizonmediaid:{name:"verizonMediaId",config:{enabled:!1},storage:{}}}},this.adlightning={enabled:!1,clientId:"properio",reportAd:!1},this.bidders={header:{},s2s:{}},this.bidder_info={adaptmx_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",adapter_name:"s2s",auto_gen_granularity:"slot",auto_gen_sizes:["160x600","300x250","300x600","320x50","728x90","970x250"]},adaptmx_instream_s2s:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",adapter_name:"s2s",default_bid_ttl:3e5},adaptmx_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",adapter_name:"s2s",default_bid_ttl:3e5},arbigo_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",adapter_name:"s2s",default_bid_ttl:3e5},pubmatic_s2s:{rev_share:1,demand_type:"display",bid_grouping:"slot",adapter_name:"s2s",default_bid_ttl:6e4,gvlid:76},sovrn_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",adapter_name:"s2s",gvlid:13},sovrn_instream_s2s:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",adapter_name:"s2s",default_bid_ttl:3e5,gvlid:13},sovrn_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",adapter_name:"s2s",default_bid_ttl:3e5,gvlid:13},sonobi_s2s:{rev_share:1,demand_type:"display",bid_grouping:"slot",adapter_name:"s2s",gvlid:104},gumgum_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",adapter_name:"s2s",gvlid:13,native_sizes:{desktop:{"1x1":"sticky_horizontal"},mobile:{"1x1":"sticky_horizontal"}}},mediagrid_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",adapter_name:"mediagrid",gvlid:686},mediagrid_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",adapter_name:"s2s",auto_gen_granularity:"slot",auto_gen_sizes:["1x1","160x600","300x250","300x600","320x480","320x50","728x90","970x250"],gvlid:13},mediagrid_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",adapter_name:"s2s",gvlid:13},verizon_media_s2s:{rev_share:1,demand_type:"display",bid_grouping:"slot",adapter_name:"s2s",gvlid:25},aol_instream_s2s:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",adapter_name:"s2s",gvlid:25},aol_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",adapter_name:"s2s",gvlid:25},engagebdr_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",adapter_name:"s2s"},magnite_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",adapter_name:"s2s",gvlid:52},yieldmo_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",adapter_name:"s2s",gvlid:173},appnexus_native:{rev_share:1,demand_type:"native",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"appnexus",gvlid:32,native_sizes:{native_horizontal:"300x250",native_vertical:"300x250"}},brealtime:{rev_share:.9,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"appnexus",gvlid:32},districtm:{rev_share:.9,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"appnexus",gvlid:32},shemedia:{rev_share:.5,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"rubicon",gvlid:337},openx_pmp:{rev_share:1,bid_grouping:"slot",gvlid:69},triplelift_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"triplelift",gvlid:28},triplelift_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"triplelift",gvlid:28},undertone_instream:{rev_share:.9,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"undertone",gvlid:677},undertone_outstream:{rev_share:.9,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"undertone",gvlid:677},vidazoo_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:3e5,adapter_name:"vidazoo",gvlid:744},vidazoo_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"slot",default_bid_ttl:3e5,adapter_name:"vidazoo",gvlid:744},thirtythreeacross_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:36e4,adapter_name:"thirtythreeacross",gvlid:58},thirtythreeacross_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"slot",default_bid_ttl:36e4,adapter_name:"thirtythreeacross",gvlid:58},smart_adserver_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"smart_adserver",gvlid:45},smart_adserver_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"smart_adserver",gvlid:45},medianet_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"medianet",gvlid:142},unruly_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:6e5,adapter_name:"unruly",gvlid:32},unruly_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:6e5,adapter_name:"unruly",gvlid:32},rhythmone:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"unruly",gvlid:36},rhythmone_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:6e5,adapter_name:"unruly",gvlid:36},rhythmone_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:6e5,adapter_name:"unruly",gvlid:36},adyoulike_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:36e5,adapter_name:"adyoulike",gvlid:259},adyoulike_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"slot",default_bid_ttl:36e5,adapter_name:"adyoulike",gvlid:259},districtmdmx_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"districtmdmx"},districtmdmx_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"districtmdmx"},amazon_tam_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"a9",gvlid:793},amazon_tam_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"a9",auto_gen_sizes:["400x300","640x480"],gvlid:793},emx_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"emx",gvlid:183},emx_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"emx",gvlid:183},sonobi_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"sonobi",gvlid:104},sonobi_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"sonobi",gvlid:104},appnexus_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"appnexus",gvlid:32},appnexus_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"appnexus",gvlid:32},index:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"ix",gvlid:10},ix_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"ix",gvlid:10},ix_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"ix",gvlid:10},engagebdr_instream_s2s:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"s2s"},engagebdr_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"s2s"},magnite_instream_s2s:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"s2s",gvlid:25},magnite_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"s2s",gvlid:102},yahoo_s2s:{rev_share:1,demand_type:"display",bid_grouping:"slot",default_bid_ttl:3e5,adapter_name:"s2s",gvlid:25},yahoo_instream_s2s:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:3e5,adapter_name:"s2s",gvlid:25},yahoo_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"slot",default_bid_ttl:3e5,adapter_name:"s2s",gvlid:25},yahoo_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:3e5,adapter_name:"yahoo",gvlid:25},yahoo_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"slot",default_bid_ttl:3e5,adapter_name:"yahoo",gvlid:25},aol_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"aol_instream",gvlid:25},beachfront_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"beachfront_instream",gvlid:335},openx_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"openxOrtb",gvlid:69},pubmatic_outstream:{rev_share:.81,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"pubmatic_instream",gvlid:76},rubicon_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"rubicon_instream",gvlid:52},spotx_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"spotx_instream",gvlid:165},beeswax_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"s2s",gvlid:12},beeswax_instream_s2s:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"s2s",gvlid:12},beeswax_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"s2s",gvlid:12},xandr_s2s:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"s2s",gvlid:32},xandr_native_s2s:{rev_share:1,demand_type:"native",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"s2s",gvlid:32,native_sizes:{desktop:{"728x90":"native_horizontal","300x250":"native_horizontal","160x600":"native_vertical"},mobile:{"300x250":"native_horizontal","320x50":"native_horizontal"}}},pubmatic_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"s2s",gvlid:76},pubmatic_native_s2s:{rev_share:1,demand_type:"native",bid_grouping:"page",default_bid_ttl:6e4,adapter_name:"s2s",gvlid:76,native_sizes:{desktop:{"728x90":"native_horizontal","300x250":"native_horizontal","160x600":"native_vertical"},mobile:{"300x250":"native_horizontal","320x50":"native_horizontal"}}},pubmatic_native:{rev_share:.81,demand_type:"native",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"pubmatic",gvlid:76,native_sizes:{desktop:{"300x250":"native_horizontal","320x50":"native_horizontal"},mobile:{"300x250":"native_horizontal","320x50":"native_horizontal"}}},medianet_native:{rev_share:1,demand_type:"native",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"medianet",gvlid:142},xandr_instream_s2s:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"s2s",gvlid:32},xandr_outstream_s2s:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"s2s",gvlid:32},criteo_instream:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"criteo",gvlid:91},criteo_outstream:{rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"criteo",gvlid:91},criteo_native:{rev_share:1,demand_type:"native",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"criteo",gvlid:91},alias_appnexus:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"appnexus",gvlid:32},alias_appnexus_instream:{alias:1,rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"appnexus",gvlid:32},alias_appnexus_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"appnexus",gvlid:32},alias_appnexus_native:{alias:1,rev_share:1,demand_type:"native",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"appnexus",gvlid:32,native_sizes:{native_horizontal:"300x250",native_vertical:"300x250"}},alias_index:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"ix",gvlid:10},alias_adagio:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"adagio",gvlid:617},alias_teads:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",div_insertion:1,adapter_name:"teads",gvlid:132,native_sizes:{native_horizontal:"300x250",native_vertical:"300x250"}},alias_triplelift:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"triplelift",gvlid:28,native_sizes:{native_horizontal:"300x250",native_vertical:"300x250"}},alias_medianet:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"medianet",gvlid:142},alias_rubicon:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"rubicon",gvlid:52},alias_mediagrid_s2s:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:12e4,adapter_name:"s2s",gvlid:13},alias_sovrn:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:9e4,adapter_name:"sovrn",gvlid:13},alias_emx:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"emx",gvlid:183},alias_openx:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"openxOrtb",gvlid:69},alias_rhythmone:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:35e4,adapter_name:"unruly",gvlid:36},alias_sharethrough:{alias:1,rev_share:.9,demand_type:"display",bid_grouping:"slot",default_bid_ttl:36e4,adapter_name:"sharethrough",gvlid:80,native_sizes:{native_horizontal:"1x1",native_vertical:"1x1"}},alias_thirtythreeacross:{alias:1,rev_share:.8,demand_type:"display",bid_grouping:"slot",default_bid_ttl:6e4,adapter_name:"thirtythreeacross",gvlid:58},alias_pubmatic:{alias:1,rev_share:.81,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,acceptable_ads:!0,adapter_name:"pubmatic",gvlid:76},alias_criteo:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:6e4,adapter_name:"criteo",gvlid:91},alias_aol:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"slot",default_bid_ttl:6e4,adapter_name:"aol",gvlid:25},alias_spotx_instream:{alias:1,rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:36e4,adapter_name:"spotx_instream"},alias_spotx_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"spotx_instream",gvlid:165},alias_a9:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:12e4,adapter_name:"a9",gvlid:793},alias_amazon_tam_instream:{alias:1,rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"a9",gvlid:793},alias_amazon_tam_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"a9",gvlid:793},alias_adyoulike_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"slot",default_bid_ttl:36e5,adapter_name:"adyoulike",gvlid:259},alias_criteo_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"criteo",gvlid:91},alias_criteo_instream:{alias:1,rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"criteo",gvlid:91},alias_ix:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"ix",gvlid:10},alias_ix_instream:{alias:1,rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"ix",gvlid:10},alias_ix_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"ix",gvlid:10},alias_index_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:36e5,adapter_name:"ix",gvlid:10},alias_openx_instream:{alias:1,rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:3e5,adapter_name:"openxOrtb",gvlid:69},alias_openx_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"openxOrtb",gvlid:69},alias_pubmatic_instream:{alias:1,rev_share:.81,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"pubmatic_instream",gvlid:76},alias_pubmatic_native:{alias:1,rev_share:.81,demand_type:"native",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"pubmatic",gvlid:76,native_sizes:{desktop:{"300x250":"native_horizontal","320x50":"native_horizontal"},mobile:{"300x250":"native_horizontal","320x50":"native_horizontal"}}},alias_pubmatic_native_s2s:{alias:1,rev_share:1,demand_type:"native",bid_grouping:"page",default_bid_ttl:6e4,adapter_name:"s2s",gvlid:76,native_sizes:{desktop:{"728x90":"native_horizontal","300x250":"native_horizontal","160x600":"native_vertical"},mobile:{"300x250":"native_horizontal","320x50":"native_horizontal"}}},alias_pubmatic_outstream_s2s:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:3e5,adapter_name:"s2s",gvlid:76},alias_pubmatic_s2s:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"slot",default_bid_ttl:6e4,adapter_name:"s2s",gvlid:76},alias_unruly:{alias:1,rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:36e4,adapter_name:"unruly",gvlid:32},alias_unruly_instream:{alias:1,rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:6e5,adapter_name:"unruly",gvlid:32},alias_unruly_outstream:{alias:1,rev_share:1,demand_type:"video",video_type:"outstream",bid_grouping:"page",default_bid_ttl:6e5,adapter_name:"unruly",gvlid:32}},this.setOptions=function(e){"mcm"===(e=function(e){return Object.keys(e.ad_slots).forEach((function(t){e.ad_slots[t]=ProperMedia.utils.sortProperties(e.ad_slots[t],"number",!0,!1)})),e}(e)).mcm_type&&(e.google_advertiser=this.google_advertiser,e.proper_advertiser=this.proper_advertiser,e.amazon_advertiser=this.amazon_advertiser),e.dfp_id??=this.proper_dfp_id,e.google_advertiser??=this.dfp_advertiser_ids.google,e.proper_advertiser??=this.dfp_advertiser_ids.proper,e.adsense_advertiser??=this.dfp_advertiser_ids.adsense,e=function(e){e.remote_gam&&(e.thirdPartyAdManager=!0);properSpecialOps.dfp_id&&(e.dfp_id=properSpecialOps.dfp_id,e.thirdPartyAdManager=!0);properSpecialOps.google_advertiser&&(e.google_advertiser=properSpecialOps.google_advertiser,e.thirdPartyAdManager=!0);properSpecialOps.proper_advertiser&&(e.proper_advertiser=properSpecialOps.proper_advertiser,e.thirdPartyAdManager=!0);properSpecialOps.adsense_advertiser&&(e.adsense_advertiser=properSpecialOps.adsense_advertiser,e.thirdPartyAdManager=!0);return e}(e),ProperMedia.utils.mergeObject(this,e),this.setSubOptions(e)};const e={browser:()=>properDevice.browser,device:()=>properDevice.device_type,country:()=>properSpecialOps?.country,gdprDoesApply:()=>properSpecialOps?.gdpr_applies,gppDoesApply:()=>properSpecialOps?.gpp_applies,uspcDoesApply:()=>properSpecialOps?.uspc_applies};this.setSubOptions=function(t){const{sub_configs:r,version_type:s}=t??this;if("child"===s||!r||!r?.length)return;const o=r.find((t=>{let{targeting_rules:r}=t;return Object.entries(r).every((t=>{let[r,s]=t;return s&&Array.isArray(s)?s.includes(e[r]?.()):s===e[r]?.()}))}));o&&(properLog.mylog("Loading sub config: "+o?.rtp_file_version),ProperMedia.utils.mergeDeep(this,o))}},adPoolObj=function(){function adPoolObj(){this.initialized=!1,this.ads=[],this.amazon_ads=[],this.displayed_ads=[],this.auctions={},this.finished_auctions={},this.auction_refresh=!0,this.total_auctions=0,this.auction_count=0,this.vid_auction_count=0,this.max_auctions=10,this.last_auction_ts=0,this.timeout_handle=null,this.timeout=58e3,this.default_timeout=58e3,this.min_timeout=3e3,this.auction_rounds=1,this.sizes={},this.sizes_bid_limit={},this.floors={},this.size_override=[],this.init()}return adPoolObj.prototype.init=function(){window.addEventListener("properActiveTab",function(e){this.setNextAuctionTimeout()}.bind(this)),window.addEventListener("properInactiveTab",function(e){properLog.proper_tracker(),this.clearNextAuctionTimeout()}.bind(this))},adPoolObj.prototype.setSizes=function(e){try{if(this.sizes={},e&&e.length)for(var t=0;t<e.length;t++){let o=e[t];for(var r=0;r<o.sizes.length;r++)if(!(this.size_override.length>0&&-1===this.size_override.indexOf(o.name))){var s=o.sizes[r];properSpecialOps.no_bid_limit?(this.sizes[s]=99,this.sizes_bid_limit=99):(o.slot_level_auction||(this.sizes_bid_limit[s]=this.sizes_bid_limit[s]?this.sizes_bid_limit[s]+1:1),this.sizes[s]=this.sizes[s]?this.sizes[s]+1:1)}}else Object.keys(properPage.slots).forEach((function(e){Object.keys(properPage.slots[e]).length&&Object.keys(properPage.slots[e]).forEach((function(t){if(properPage.slots[e][t].sizes.length>0)for(var r=0;r<properPage.slots[e][t].sizes.length;r++)if(!(this.size_override.length>0&&-1===this.size_override.indexOf(t))){var s=properPage.slots[e][t].sizes[r];properSpecialOps.no_bid_limit?(this.sizes[s]=99,this.sizes_bid_limit=99):(properPage.slots[e][t].slot_level_auction||(this.sizes_bid_limit[s]=this.sizes_bid_limit[s]?this.sizes_bid_limit[s]+1:1),this.sizes[s]=this.sizes[s]?this.sizes[s]+1:1)}}),this)}),this);if(!Object.keys(this.sizes).length){var o=ProperMedia.utils.deepAccess(properOps,"auctions.resolution_size_map")||{};Object.keys(o).length>0&&Object.keys(o).forEach((function(e){properPage.width>=e&&o[e].forEach((function(e){this.sizes[e]=99}),this)}),this)}}catch(e){return properLog.mylog("AdPool: Error setting auction sizes"),!1}return!0},adPoolObj.prototype.setAuctionRounds=function(){try{var e=properDevice.isMobile()?"mobile":"desktop";this.auction_rounds=parseInt(ProperMedia.utils.deepAccess(properOps,"auctions."+e+".rounds")||this.auction_rounds)}catch(e){return properLog.mylog("AdPool: Error setting auction rounds"),!1}return!0},adPoolObj.prototype.setMaxAuctions=function(){try{var e=properDevice.isMobile()?"mobile":"desktop";this.max_auctions=parseInt(ProperMedia.utils.deepAccess(properOps,"auctions."+e+".max")||this.max_auctions)}catch(e){return properLog.mylog("AdPool: Error setting max auction"),!1}return!0},adPoolObj.prototype.setDefaultTimeout=function(){try{var e=properDevice.isMobile()?"mobile":"desktop";this.default_timeout=parseInt(ProperMedia.utils.deepAccess(properOps,"auctions."+e+".timeout")||this.default_timeout)}catch(e){return properLog.mylog("AdPool: Error setting auction default timeout"),!1}return!0},adPoolObj.prototype.checkSlotRefresh=function(){var e=!1;return Object.keys(properPage.slots.display).forEach((function(t){properPage.slots.display[t].refresh.enabled&&(e=!0)})),e},adPoolObj.prototype.checkMaxAuctionsReached=function(){return!!(this.auction_count>=this.max_auctions||""!==ProperMedia.utils.deepAccess(properPage,"takeover.bidder"))},adPoolObj.prototype.setDefaultFloors=function(){try{var e=properDevice.isMobile()?"mobile":"desktop";this.floors=ProperMedia.utils.deepCopy(ProperMedia.utils.deepAccess(properOps,"floors."+e)||{})}catch(e){return properLog.mylog("AdPool: Error setting auction default floors"),!1}return!0},adPoolObj.prototype.startNewAuction=function(e){return userIds.isDoneMatching()?consentManager.checkIfMissing()?(properLog.mylog("AdPool: Wait for CMP Consent To Finish."),consentManager.loadIfMissing(this.startNewAuction.bind(this)),!1):properPage.viewability_tracker.slotsInFetchZone?properPage.init_slots_build?(this.initialized=!0,this.setDefaultFloors(),this.setMaxAuctions(),this.setAuctionRounds(),this.setDefaultTimeout(),this.clearNextAuctionTimeout(),void this.setNextAuctionTimeout(e)):(properLog.mylog("AdPool: Initial slots for page haven't been built yet."),!1):(properLog.mylog("AdPool: No slots are in the fetch zone."),properPage.viewability_tracker.setCallback(this.startNewAuction.bind(this)),!1):(properLog.mylog("AdPool: Wait for UserId Matching To Finish."),userIds.setCallback(this.startNewAuction.bind(this)),!1)},adPoolObj.prototype.startNewVideoAuction=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.setSizes(t),this.sendVideoAuction(e,t),this.clearExpiredAds()},adPoolObj.prototype.sendVideoAuction=function(e,t){properLog.mylog("AdPool: Starting New Video Auction"),this.vid_auction_count++;let r={auction_num:parseFloat(this.total_auctions+"."+this.vid_auction_count),demand_type:"video",video_type:e,slots:t};var s=new auctionObj(r);return this.auctions[s.id]=s,s.sendBids(),!0},adPoolObj.prototype.sendAuction=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.checkMaxAuctionsReached()&&!e)return properLog.mylog("AdPool: Max Auctions reached: "+this.max_auctions),!1;if(!this.checkSlotRefresh()&&this.auction_count>0&&!e)return properLog.mylog("AdPool: Auction disabled. No slots have refresh enabled."),!1;if(!this.auction_refresh&&this.auction_count>0&&!e)return properLog.mylog("AdPool: Auction Refresh is disabled."),!1;{properLog.mylog("AdPool: Starting New Auction"),this.setSizes(t),t&&t.length||(this.auction_count+=1),this.total_auctions+=1,properSession.updateSessionAuctionCount(),properPage.video_enabled&&this.vid_auction_count++;let e={auction_num:this.total_auctions,slots:t};var r=new auctionObj(e);return this.auctions[r.id]=r,r.sendBids(),this.size_override=[],!0}},adPoolObj.prototype.auctionFinished=function(e){let t=this.auctions[e]||!1;if(t){var r=new Event("properAuctionDone");window.dispatchEvent(r),this.finished_auctions[e]=this.auctions[e],delete this.auctions[e],t.slots&&t.slots.length||(this.last_auction_ts=Date.now(),this.setNextAuctionTimeout());var s=Object.keys(this.finished_auctions)||[];if(s.length>10)s.splice(0,s.length-10).forEach((function(e){delete this.finished_auctions[e]}),this)}},adPoolObj.prototype.addBidToPool=function(e){if(e.price>0){var t=new adObj(ProperMedia.utils.deepCopy(e));t.dfp_price=roundPriceToDfpBucket(t.price),this.ads.push(t),this.ads.sort((function(e,t){return parseFloat(t.price)-parseFloat(e.price)}))}},adPoolObj.prototype.getWinningBids=function(e,t,r){let s,o=[],a=this.ads;e.slot_level_auction&&e.is_flex_slot?a=a.filter((t=>t.target_slot===e.parent_name)):e.slot_level_auction&&(a=a.filter((t=>t.target_slot===e.dfp_name)));const n=this.getWinningBid(e,t,r,a);if(e.flex_enabled){const d=Object.entries(e.flex_map).filter((e=>{let[,t]=e;return t>1})).map((s=>{let[o,n]=s;const d=a.filter((e=>e.size===o));return this.getWinningBid(e,t,r,d,n)})),p=d.reduce(((e,t)=>(e?.price||0)>(t?.price||0)?e:t),n)?.ads;p?.length&&([s,...o]=p.map((e=>new adObj(ProperMedia.utils.deepCopy(e)))))}return!s&&n?.ads?.length&&(s=new adObj(ProperMedia.utils.deepCopy(n.ads[0]))),this.removeAds(s,...o),{winning_ad:s,flex_ads:o}},adPoolObj.prototype.getWinningBid=function(e,t,r,s,o){const a=e.sizes,n=[];if(t=t||["display","native","video"],o=o||1,!((s=[...s||this.ads]).length<=0)&&(!1!==properPage.video_enabled&&e.video_player instanceof videoPlayer||(t=t.filter((e=>"video"!==e))),0!==t.length)){for(const d of s){if(d.checkIfExpired()){this.removeAds(d);continue}if(d.displayed)continue;if(!t.includes(d.type))continue;if("video"===d.type&&(!r||r!==d.video_type))continue;if(!a.includes(d.size))continue;if(e.sticky&&e.displayed&&e.refresh.count>0&&e.size!==d.size&&!properSpecialOps.sliderHeader)continue;if(e.refresh.count>0&&ProperMedia.utils.deepAccess(properOps,"bidder_info."+d.bidder+".dont_refresh"))continue;if(d.target_slot&&d.target_slot!==e.dfp_name&&d.target_slot!==e.parent_name)continue;if(e.slot_level_auction&&(!d.target_slot||d.target_slot!==e.dfp_name&&d.target_slot!==e.parent_name))continue;if(properUser.checkAdBlock()&&(!ProperMedia.utils.deepAccess(properOps,"bidder_info."+d.bidder+".acceptable_ads")||"native"!==ProperMedia.utils.deepAccess(properOps,"bidder_info."+d.bidder+".demand_type")))continue;const s=properOps.testing_mode.enabled?0:e.getFloor(d.size);if((!ProperMedia.utils.deepAccess(properPage,"takeover.bidder")||d.bidder===ProperMedia.utils.deepAccess(properPage,"takeover.bidder"))&&(_0x3aa07a(d.price)>=s&&(n.push(d),n.length>=o)))break}return{ads:n,price:n.reduce(((e,t)=>{let{price:r}=t;return e+_0x3aa07a(r)}),0)}}},adPoolObj.prototype.removeAd=function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ads).splice(e,1)},adPoolObj.prototype.removeAds=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const remove_from=e=>e.reduce(((e,r,s)=>t.find((e=>e?.id===r?.id))?[s,...e]:e),[]).forEach((t=>this.removeAd(t,e)));remove_from(this.ads),remove_from(this.amazon_ads)},adPoolObj.prototype.addAmazonBidToPool=function(e){if(e.price){var t=new adObj(ProperMedia.utils.deepCopy(e));this.amazon_ads.push(t),this.amazon_ads=_0x2b21de(this.amazon_ads)}},adPoolObj.prototype.getWinningAmazonBid=function(e,t,r){const s=this.getWinningBid(e,t,r,this.amazon_ads);if(s&&s.ads.length){const t=s.ads[0];e.winning_amazon_ad=new adObj(ProperMedia.utils.deepCopy(t)),this.removeAds(t)}},adPoolObj.prototype.calcTimeout=function(){return 0===this.total_auctions&&0===this.auction_count||1===this.total_auctions&&1===this.auction_count&&properPage.spa_settings.enabled&&properPage.spa_settings.prefetch?this.timeout=0:0===this.auction_count&&this.total_auctions>0?this.timeout=this.timeSinceLastAuction()<this.min_timeout?this.min_timeout:0:this.timeout=Math.max(this.min_timeout,this.default_timeout),this.timeout=this.timeout-this.timeSinceLastAuction(),Math.max(this.timeout,0)},adPoolObj.prototype.getTimeLeftOnRunningAuctions=function(){var e=[];try{Object.keys(this.auctions).length&&Object.keys(this.auctions).forEach((function(t){var r=this.auctions[t],s=Math.max(0,r.max_timeout-r.auctionTimePassed());s>0&&e.push(s)}),this)}catch(e){console.log(e)}return e},adPoolObj.prototype.setNextAuctionTimeout=function(e){null!=this.timeout_handle||this.checkMaxAuctionsReached()||!this.initialized||properOps.slot_level_auction||(this.calcTimeout(),this.timeout_handle=properSetTimeout.setTimeout.call(this,(function(){this.clearNextAuctionTimeout(),this.sendAuction(e),this.clearExpiredAds()}),Math.max(0,this.timeout)))},adPoolObj.prototype.clearNextAuctionTimeout=function(){clearTimeout(this.timeout_handle),this.timeout_handle=null},adPoolObj.prototype.timeSinceLastAuction=function(){return 0===this.last_auction_ts?0:Date.now()-this.last_auction_ts},adPoolObj.prototype.clearExpiredAds=function(){if(this.ads.length>0)for(var e=0;e<this.ads.length;e++)this.ads[e].checkIfExpired()&&this.ads.splice(e--,1)},adPoolObj.prototype.clearCachedAds=function(){properLog.mylog("AdPool: Clearing Cached Ads"),this.ads=[],this.displayedAds=[]},adPoolObj}(),auctionObj=function(e){function auctionObj(e){let{auction_num:t,demand_type:r,video_type:s,slots:o}=e;this.id=ProperMedia.utils.generateUUID(),this.requests_sent=0,this.ads=[],this.amazon_ads=[],this.bid_errors=[],this.bids={},this.bids_sent_finished=!1,this.bids_sent=0,this.bids_returned=0,this.bids_started_ts=0,this.bids_done_ts=0,this.auction_bidders=[],this.all_bidders=[],this.bidders_no_bids=[],this.max_timeout=1500,this.max_timeout_handle=null,this.auction_num=t,this.demand_type=r||null,this.video_type=s||null,this.sizes={},this.finished=!1,this.uids={},this.slots=o||[]}return auctionObj.prototype.sendBids=function(){if(checkKillAllAds())return!1;this.uids=userIds.getUIdsObj(),this.setMaxAuctionTimeout(),this.bids_started_ts=ProperMedia.utils.getTimestampMs(),this.sendS2SBidders(),this.sendHeaderBidders(),this.bids_sent_finished=!0},auctionObj.prototype.sendS2SBidders=function(){if(!cookieMatching.done_matching)return properLog.mylog("Wait for S2S Cookie Matching To Finish."),void(cookieMatching.callback=this.sendS2SBidders.bind(this));if(this.getAuctionBidders("s2s"),this.auction_bidders.length>0){var e={},t=properDevice.isMobile()?"mobile":"desktop",r=Math.max(0,parseInt(properAdPool.auction_count-1)%parseInt(properAdPool.auction_rounds));if(this.auction_bidders.forEach((function(s){var o=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".tag_ids."+t)||!1,a=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".slot_tag_ids."+t)||!1,n=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".auto_gen_tag_ids")||ProperMedia.utils.deepAccess(properOps,"bidder_info."+s+".auto_gen_tag_ids")||ProperMedia.utils.deepAccess(bidAdapters,"s2s.bidderInfo.auto_gen_tag_ids")||!1,d=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".auto_gen_slot_auction")||ProperMedia.utils.deepAccess(properOps,"bidder_info."+s+".auto_gen_slot_auction")||ProperMedia.utils.deepAccess(bidAdapters,"s2s.bidderInfo.auto_gen_slot_auction")||!1;if(!0===properOps.slot_level_auction&&(o=!1),n){o=[],a=[];let e=ProperMedia.utils.deepAccess(properOps,"bidder_info."+s+".demand_type")||"display";var p=properDevice.isMobile()?"mobile":"desktop";let t={},r={},n=this.slots.length?this.slots:ProperMedia.utils.objectValues(properPage.slots[e]);if(n.length){let o=0;n.forEach((function(a){a.slot_level_auction||d?void 0===r[a.dfp_name]&&(r[a.dfp_name]={}):o++;for(let n=0;n<a.sizes.length;n++){let l=a.sizes[n],c=ProperMedia.utils.deepAccess(properOps,"bidder_info."+s+".auto_gen_sizes")||ProperMedia.utils.deepAccess(bidAdapters,"s2s.bidderInfo.auto_gen_sizes")||("video"==e?["400x300","640x480"]:[]),u=ProperMedia.utils.deepAccess(properOps,"bidder_info."+s+".auto_gen_granularity")||ProperMedia.utils.deepAccess(bidAdapters,bidderAdapterName+".bidderInfo.auto_gen_granularity")||"slot";if(!properOps.native_sizes[l]||-1!=c.indexOf(l))if(a.slot_level_auction||d){let e="size"==u?a.name+"-"+l:a.name;void 0===r[a.dfp_name][l]&&(r[a.dfp_name][l]=[]),r[a.dfp_name][l].push(e)}else{let e="size"==u?p+"-"+l:p;void 0===t[l]&&(t[l]=[]),t[l].push(e+"-"+o)}}}))}Object.keys(t).length&&o.push(t),Object.keys(r).length&&a.push(r)}if(!(o&&o.length||a&&a.length))return!1;var l=ProperMedia.utils.deepCopy(o),c=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".site_id")||"",u=Object.filter(l[r]||{},(function(e){return void 0!==properAdPool.sizes[e]&&l[r][e].length>0})),g=ProperMedia.utils.deepCopy(a),m=this.slots||[],_=Object.filter(g[r]||{},(function(e){let t=properPage.getSlotFromPageObjectByDfpName(e);return m.length&&(found=m.find((function(e){return e.dfp_name==t.dfp_name}))||!1),(t&&t.slot_level_auction||d)&&found}),this);for(var h in u){var b=properAdPool.sizes_bid_limit[h];_=[],u[h].length-b>0&&u[h].splice(b,u[h].length-b),ProperMedia.utils.deepAccess(this,"sizes."+h)||(this.sizes[h]=properAdPool.sizes[h])}for(var v in _)for(var y in _[v])void 0!==properAdPool.sizes[y]&&_[v][y].length>0?ProperMedia.utils.deepAccess(this,"sizes."+y)||(this.sizes[y]=properAdPool.sizes[y]):delete _[v][y];var P=ProperMedia.utils.deepCopy(ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".floors."+t)||{}),w=!schainCheck(s),M={};ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".account_overrides.enabled")&&ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".account_overrides.bidder_ids")&&(M=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+s+".account_overrides.bidder_ids")),(Object.keys(u).length>0||Object.keys(_).length>0)&&(e[s]={site_id:c,tag_ids:u,slot_tag_ids:_,bidder_ids:M,skip_schain:w,bidder_floors:P})}),this),Object.keys(e).length>0){this.bids.s2s=new bidObj("s2s",e,{},this);try{consentManager.ready(function(){bidAdapters.s2s.send(this.bids.s2s)}.bind(this))}catch(e){console.error(e),e.bidder="s2s",sendError(TraceKit.computeStackTrace(e))}}}},auctionObj.prototype.sendHeaderBidders=function(){if(this.getAuctionBidders("header"),this.auction_bidders.length>0){var e=properDevice.isMobile()?"mobile":"desktop";this.shuffleBidders();var t=this.slots.length?0:Math.max(0,parseInt(properAdPool.auction_count-1)%parseInt(properAdPool.auction_rounds));this.auction_bidders.forEach((function(r){var s=bidderToAdapterName(r),o=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".tag_ids."+e)||!1,a=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".slot_tag_ids."+e)||!1,n=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".auto_gen_tag_ids")||ProperMedia.utils.deepAccess(properOps,"bidder_info."+r+".auto_gen_tag_ids")||ProperMedia.utils.deepAccess(bidAdapters,s+".bidderInfo.auto_gen_tag_ids")||!1,d=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".auto_gen_slot_auction")||ProperMedia.utils.deepAccess(properOps,"bidder_info."+r+".auto_gen_slot_auction")||ProperMedia.utils.deepAccess(bidAdapters,s+".bidderInfo.auto_gen_slot_auction")||!1;if(!0===properOps.slot_level_auction&&(o=!1),n){o=[],a=[];let e=ProperMedia.utils.deepAccess(properOps,"bidder_info."+r+".demand_type")||"display";var p=properDevice.isMobile()?"mobile":"desktop";let t={},n={},l=this.slots.length?this.slots:ProperMedia.utils.objectValues(properPage.slots[e]);if(l.length){let o=0;l.forEach((function(a){a.slot_level_auction||d?void 0===n[a.dfp_name]&&(n[a.dfp_name]={}):o++;for(let l=0;l<a.sizes.length;l++){let c=a.sizes[l],u=ProperMedia.utils.deepAccess(properOps,"bidder_info."+r+".auto_gen_sizes")||ProperMedia.utils.deepAccess(bidAdapters,s+".bidderInfo.auto_gen_sizes")||("video"==e?["400x300","640x480"]:[]),g=ProperMedia.utils.deepAccess(properOps,"bidder_info."+r+".auto_gen_granularity")||ProperMedia.utils.deepAccess(bidAdapters,s+".bidderInfo.auto_gen_granularity")||"slot";if(!properOps.native_sizes[c]||-1!=u.indexOf(c))if(a.slot_level_auction||d){let e="size"==g?a.name+"-"+c:a.name;void 0===n[a.dfp_name][c]&&(n[a.dfp_name][c]=[]),n[a.dfp_name][c].push(e)}else{let e="size"==g?p+"-"+c:p;void 0===t[c]&&(t[c]=[]),t[c].push(e+"-"+o)}}}))}Object.keys(t).length&&o.push(t),Object.keys(n).length&&a.push(n)}if(!(o&&o.length||a&&a.length))return!1;var l=ProperMedia.utils.deepCopy(o),c=Object.filter(l[t]||{},(function(e){return void 0!==properAdPool.sizes[e]&&l[t][e].length>0})),u=ProperMedia.utils.deepCopy(a),g=this.slots||[],m=Object.filter(u[t]||{},(function(e){let t=properPage.getSlotFromPageObjectByDfpName(e),r=!0;return g.length&&(r=g.find((function(e){return e.dfp_name==t.dfp_name}))||!1),(t&&t.slot_level_auction||d)&&r}),this);for(var _ in c){var h=properAdPool.sizes_bid_limit[_];c[_].length-h>0&&c[_].splice(h,c[_].length-h),ProperMedia.utils.deepAccess(this,"sizes."+_)||(this.sizes[_]=properAdPool.sizes[_])}for(var b in m)for(var v in m[b])void 0!==properAdPool.sizes[v]&&m[b][v].length>0?ProperMedia.utils.deepAccess(this,"sizes."+v)||(this.sizes[v]=properAdPool.sizes[v]):delete m[b][v];if(Object.keys(c).length>0||Object.keys(m).length>0){this.bids[r]=new bidObj(r,c,m,this);try{void 0!==bidAdapters[s]&&consentManager.ready(function(){bidAdapters[s].send(this.bids[r]),"function"==typeof bidAdapters[s].getUserSyncs&&bidAdapters[s].getUserSyncs()}.bind(this))}catch(e){console.error(e),e.bidder=s,sendError(TraceKit.computeStackTrace(e))}}}),this)}},auctionObj.prototype.getAuctionBidders=function(e){this.auction_bidders=Object.keys(properOps.bidders[e]||{}).filter((function(t){var r=properOps.bidders[e][t],s=ProperMedia.utils.deepAccess(properOps,"bidder_info."+t+".demand_type")||"display",o=ProperMedia.utils.deepAccess(properOps,"bidder_info."+t+".acceptable_ads")||!1,a=ProperMedia.utils.deepAccess(properOps,"bidder_info."+t+".video_type")||null,n=ProperMedia.utils.deepAccess(properSession,"sessionData.no_bid_cnt."+t)||0;return!!gdprEnforcement.makeBidRequestEnforcement(t)&&(properOps.nobid_auction_limit.enabled&&n>=properOps.nobid_auction_limit[s]+3?(n=properOps.nobid_auction_limit[s]-1,ProperMedia.utils.deepSetValue(properSession,"sessionData.no_bid_cnt."+t,n)):properOps.nobid_auction_limit.enabled&&n>=properOps.nobid_auction_limit[s]&&(n++,ProperMedia.utils.deepSetValue(properSession,"sessionData.no_bid_cnt."+t,n)),!(ProperMedia.utils.deepAccess(properSpecialOps,"disabled_bidders")||[]).includes(t)&&(!(properUser.checkAdBlock()&&!o&&"native"!==s)&&((""==ProperMedia.utils.deepAccess(properPage,"takeover.bidder")||ProperMedia.utils.deepAccess(properPage,"takeover.bidder")==t)&&((!properOps.nobid_auction_limit.enabled||n<properOps.nobid_auction_limit[s])&&(!this.demand_type||this.demand_type==s)&&("display"==s||"native"==s||"video"==s&&1==properPage.video_enabled&&properPage.video_player_count[a].possible.length>0&&(!this.video_type||this.video_type==a))&&(r.enabled&&!r.test&&!properOps.testing_mode.bidder||properOps.testing_mode.bidder==t)))))}),this),this.bidders_no_bids=this.bidders_no_bids.concat(ProperMedia.utils.deepCopy(this.auction_bidders)),this.all_bidders=ProperMedia.utils.deepCopy(this.bidders_no_bids)},auctionObj.prototype.setAuctionTopAverages=function(){let e=properDevice.isMobile()?"mobile":"desktop",t=properSpecialOps.dynamicFloorsAvgMult||ProperMedia.utils.deepAccess(properOps,"dynamic_floors."+e+".avg_mult")||(properSession?.sessionData?.depth<5?3:4),r=properSpecialOps.dynamicFloorsAvgMax||ProperMedia.utils.deepAccess(properOps,"dynamic_floors."+e+".avg_max")||10;var s={};if(properSpecialOps.dynamicFloors||ProperMedia.utils.deepAccess(properOps,"dynamic_floors."+e+".enabled")){var o={};properSession.sessionData.bid_avg=properSession.sessionData.bid_avg||{},Object.keys(this.sizes).forEach((function(e){s[e]=Math.min(Math.round((99===this.sizes[e]?4:this.sizes[e])*t),r),o[e]=[]}),this),this.ads.forEach((function(e){void 0===o[e.size]&&(s[e.size]=Math.min(Math.round((99===this.sizes[e.size]?4:this.sizes[e.size])*t),r),o[e.size]=[]),o[e.size].length<s[e.size]&&o[e.size].push(e.price)}),this),o=_0x359c5d(this,o,s,t,r),Object.keys(o).forEach((function(e){var t=s[e]+1,r=ProperMedia.utils.deepAccess(properAdPool,"floors.sizes."+e)||properAdPool.floors.backup;properSession.sessionData.bid_avg[e]||(t=s[e],properSession.sessionData.bid_avg[e]=0);for(var a=0;a<s[e];a++){var n=o[e][a]||r;properSession.sessionData.bid_avg[e]+=n}properSession.sessionData.bid_avg[e]=Number((properSession.sessionData.bid_avg[e]/t).toFixed(2))}),this),properSession.setSessionData()}},auctionObj.prototype.shuffleBidders=function(){for(var e,t,r=this.auction_bidders.length;0!==r;)t=Math.floor(Math.random()*r),r-=1,e=this.auction_bidders[r],this.auction_bidders[r]=this.auction_bidders[t],this.auction_bidders[t]=e;return this.auction_bidders},auctionObj.prototype.setMaxAuctionTimeout=function(){null==this.max_timeout_handle&&(this.max_timeout_handle=properSetTimeout.setTimeout.call(this,(function(){this.auctionFinished()}),properOps.custom_auction_timeout||this.max_timeout))},auctionObj.prototype.clearMaxAuctionTimeout=function(){clearTimeout(this.max_timeout_handle),this.max_timeout_handle=null},auctionObj.prototype.incrementRequestsSent=function(e){this.bids_sent+=isNaN(parseInt(e))?0:parseInt(e),this.requests_sent++},auctionObj.prototype.incrementBidResponseCount=function(e){this.bids_returned+=isNaN(parseInt(e))?0:parseInt(e),this.bids_sent<=this.bids_returned&&1==this.bids_sent_finished&&0==this.finished&&this.auctionFinished()},auctionObj.prototype.getPerecentBidsReady=function(){return this.bids_sent>0?(this.bids_returned/this.bids_sent*100).toFixed(2):0},auctionObj.prototype.logBidResponse=function(e,t){var r=new adObj(ProperMedia.utils.deepCopy(e)),s=bidderToAdapterName(t.bidder);"a9"==t.bidder||"a9"==s?(this.amazon_ads.push(r),this.amazon_ads=_0x2b21de(this.amazon_ads)):(this.ads.push(r),this.ads.sort((function(e,t){return parseFloat(t.price)-parseFloat(e.price)})));var o="s2s"==t.bidder?e.bidder:t.bidder;-1!==this.bidders_no_bids.indexOf(o)&&this.bidders_no_bids.splice(this.bidders_no_bids.indexOf(o),1),properUser.checkAdBlockDetected()&&!properUser.checkAdBlock()||("a9"==t.bidder||"a9"==s?properAdPool.addAmazonBidToPool(e):properAdPool.addBidToPool(e))},auctionObj.prototype.calcAuctionMs=function(){return this.bids_done_ts>0&&this.bids_started_ts>0&&this.bids_done_ts>this.bids_started_ts?this.bids_done_ts-this.bids_started_ts:-1},auctionObj.prototype.auctionTimePassed=function(){return(new Date).getTime()-this.bids_started_ts},auctionObj.prototype.auctionFinished=function(){this.finished||(this.finished=!0,properLog.mylog("Auction Finished"),this.clearMaxAuctionTimeout(),this.bids_done_ts=ProperMedia.utils.getTimestampMs(),properAdPool.auctionFinished(this.id),this.setAuctionTopAverages(),this.setBiddersWithNoBids(),userIds.initUserIdData())},auctionObj.prototype.setBiddersWithNoBids=function(){properOps.nobid_auction_limit.enabled&&this.all_bidders.length&&(this.all_bidders.forEach((function(e){if(-1!==this.bidders_no_bids.indexOf(e)){var t=(ProperMedia.utils.deepAccess(properSession,"sessionData.no_bid_cnt."+e)||0)+1;ProperMedia.utils.deepSetValue(properSession,"sessionData.no_bid_cnt."+e,t)}else ProperMedia.utils.deepAccess(properSession,"sessionData.no_bid_cnt."+e)&&delete properSession.sessionData.no_bid_cnt[e]}),this),properSession.setSessionData())},auctionObj}(),cookieMatchingObj=function(){this.proper_uid="",this.bidderUserSyncValues={},this.cookie_map={aol:["aol_outstream","aol_instream"],sovrn:["sovrn","sovrn_instream","sovrn_outstream"],yahoo:["yahoo","yahoo_instream","yahoo_outstream"],adaptmx:["adaptmx","adaptmx_outstream","adaptmx_instream"],magnite:["magnite","magnite_instream","magnite_outstream"],pubmatic:["pubmatic","pubmatic_outstream","pubmatic_native"],engagebdr:["engagebdr","engagebdr_instream","engagebdr_outstream"],xandr:["xandr","xandr_native","xandr_instream","xandr_outstream"],verizon_media:["verizon_media","yahoo","yahoo_instream","yahoo_outstream"]},this.done_matching=!1,this.sent=0,this.received=0,this.timeout=1e3,this.timeout_handle=null,this.callback=null,this.init=function(){this.proper_uid=properUser.pubcid||userIdAdapters.pubCommonId.getValue(),Object.keys(ProperMedia.utils.deepAccess(properOps,"bidders.s2s")||{}).forEach((function(e){(ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+e+".enabled")||properOps.testing_mode.enabled&&properOps.testing_mode.bidder==e)&&this.getBidderUserSyncValue(e)}),this)},this.cookieMatch=function(){var e=[];Object.keys(ProperMedia.utils.deepAccess(properOps,"bidders.s2s")||{}).forEach((function(t){(ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+t+".enabled")||properOps.testing_mode.enabled&&properOps.testing_mode.bidder==t)&&e.push(t)}));for(var t=0;t<e.length;t++){var r=e[t].replace("_s2s","");this.bidderUserSyncValues[r]||consentManager.ready(function(){this.requestCookieMatch(r)}.bind(this))}0==this.sent?this.matchingDone():this.addTimeout()},this.requestCookieMatch=function(e){if(gppConsentModule.userSyncsDenied()||!gdprEnforcement.userSyncEnforcement(e+"_s2s"))return!1;properLog.mylog("Start "+e+" Cookie Matching");var t=[];"boolean"==typeof gdprConsent.gdprApplies&&(t.push("gdpr="+gdprConsent.gdprApplies.toString()),gdprConsent.consentString&&t.push("gdpr_consent="+gdprConsent.consentString)),uspConsent.usPrivacy&&t.push("us_privacy="+uspConsent.usPrivacy);var r=t.join("&"),s=properOps.usync_endpoint+"?bidder="+e+"&proper_uid="+this.proper_uid+"&uid=",o="",a="",n="",d="",p=!1;if("adaptmx"==e||"adaptmx_instream"==e||"adaptmx_outstream"==e)a="https://prebid.a-mo.net/cchain/0?cb="+encodeURIComponent(s)+"&"+r;else if("sovrn"==e||"sovrn_instream"==e||"sovrn_outstream"==e){o="[SOVRNID]",a="https://ce.lijit.com/merge?pid="+(ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+e+"_s2s.site_id")||263069)+"&3pid="+this.proper_uid+"&location="+encodeURIComponent(s+o)+"&"+r}else if("pubmatic"==e||"pubmatic_outstream"==e||"pubmatic_native"==e)o="#PM_USER_ID",a="https://image6.pubmatic.com/AdServer/UCookieSetPug?oid=1&rd="+encodeURIComponent(s+o)+"&"+r;else if("districtm"==e)o="$UID",a="https://ib.adnxs.com/getuid?"+encodeURIComponent(s+o)+"&"+r;else if("sonobi"==e)o="[UID]",a="https://sync.go.sonobi.com/us?loc="+encodeURIComponent(s+o)+"&"+r;else if("yieldmo"==e)o="$UID",a="https://ads.yieldmo.com/pbsync?&redirectUri="+encodeURIComponent(s+o)+"&"+r;else if("gumgum"==e){d="gg-usync-iframe";let t=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+e+"_s2s.site_id")||"";t&&!document.getElementById(d)&&(n="https://rtb.gumgum.com/getuid/"+t+"?r="+encodeURIComponent(s+o)+"&"+r)}else if("mediagrid"==e)o="${BSW_UUID}",a="https://x.bidswitch.net/check_uuid/"+encodeURIComponent(s+o)+"?"+r;else if("verizon_media"==e||"yahoo"==e||"yahoo_instream"==e||"yahoo_outstream"==e){a="https://ups.analytics.yahoo.com/ups/58355/sync?redir=true";let e={};gppConsent.gppString&&(e.gpp=gppConsent.gppString),gppConsent.applicableSections&&(e.gpp_sid=gppConsent.applicableSections),Object.keys(e).length&&(a+="&"+ProperMedia.utils.formatQueryString(e)),p=function(){this.received++}.bind(this)}else if("aol_instream"==e||"aol_outstream"==e)a="https://pixel.advertising.com/ups/58316/sync?redir=true&"+r;else if("xandr"==e||"xandr_native"==e||"xandr_instream"==e||"xandr_outstream"==e)o="$UID",a="https://ib.adnxs.com/getuid?"+encodeURIComponent(s+o);else if("engagebdr"==e||"engagebdr_instream"==e||"engagebdr_outstream"==e){o="[UUID]";var l=1000227;ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+e+"_s2s.account_overrides.enabled")&&(l=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+e+"_s2s.account_overrides.bidder_ids.sspid")||l),a="https://match.bnmla.com/usersync?sspid="+l+"&redir="+encodeURIComponent(s+o)}else if(("magnite"==e||"magnite_instream"==e||"magnite_outstream"==e)&&(d="multisync-iframe",!document.getElementById(d))){var c=8777;ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+e+"_s2s.account_overrides.enabled")&&(c=ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+e+"_s2s.account_overrides.bidder_ids.account_id")||c),n="https://secure-assets.rubiconproject.com/utils/xapi/multi-sync.html?p="+c+"&endpoint=us-west"}if(""!=a)this.sent++,$.ajax({url:a,bidder:e,requestType:"jsonp",onload:p});else if(n&&d){this.sent++;var u=document.createElement("iframe");u.id=d,u.width=0,u.height=0,u.marginWidth=0,u.marginHeight=0,u.scrolling="no",u.frameBorder=0,u.style.border="0px",u.style.display="none",u.src=n,document.body.appendChild(u)}},this.logMatchingResponse=function(e,t,r){this.updateBidderUserSyncData(e,r),this.received++,"sonobi"==e&&$((function(){try{var e=document.createElement("script");e.src="//sync.go.sonobi.com/uc.js?pubid="+(t||this.proper_uid),e.async=!0,e.type="text/javascript";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}catch(e){console.log(e),sendError(TraceKit.computeStackTrace(e))}})),this.received>=this.sent&&this.matchingDone()},this.getBidderUserSyncValue=function(e){var t={bidderCode:e};e=e.replace("_s2s",""),properStorage.cookiesAreEnabled(t)&&properStorage.getCookie(e+"_cookie",t)&&(this.bidderUserSyncValues[e]=properStorage.getCookie(e+"_cookie",t)),properStorage.hasLocalStorage(t)&&(this.bidderUserSyncValues[e]?(properStorage.setDataInLocalStorage("ProperS2SUserSync."+e,this.bidderUserSyncValues[e],t),properStorage.deleteCookie(e+"_cookie","Lax","",t)):properStorage.getDataFromLocalStorage("ProperS2SUserSync."+e,t)&&(this.bidderUserSyncValues[e]=properStorage.getDataFromLocalStorage("ProperS2SUserSync."+e,t)))},this.updateBidderUserSyncData=function(e,t){if(e&&t)for(var r={bidderCode:e.includes("_s2s")?e:e+"_s2s"},s=(e=e.replace("_s2s","")).replace(/_instream|_outstream/,""),o=this.cookie_map[s]?this.cookie_map[s]:[e],a=0;a<o.length;a++)if(this.bidderUserSyncValues[o[a]]=t,properStorage.hasLocalStorage(r))properStorage.setDataInLocalStorage("ProperS2SUserSync."+o[a],t,r);else if(properStorage.cookiesAreEnabled(r)){var n=new Date;n.setTime(n.getTime()+5184e6);var d=o[a]+"_cookie",p=t,l=n.toGMTString();properStorage.setCookie(d,p,l,"Lax","",{bidderCode:e})}},this.matchingDone=function(){1!=this.done_matching&&(this.done_matching=1,ProperMedia.utils.isFn(this.callback)&&(this.callback(),this.callback=null),properLog.mylog("S2S Cookie Matching Done"),this.resetTimeout())},this.addTimeout=function(){var e=this;this.timeout_handle=properSetTimeout.setTimeout.call(e,(function(){e.resetTimeout(),e.matchingDone()}),e.timeout)},this.resetTimeout=function(){clearTimeout(this.timeout_handle),this.timeout_handle=null}},sessionObj=function(){this.sessionData={uuid:"",depth:0,referrer:"",gclid:"",fbclid:"",utm_campaign:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_template:"",utm_referrer:"",utm_adset:"",utm_subid:"",revenue:0,bid_avg:{},no_bid_cnt:{},auction_count:0,last_threshold:0},this.sessionCookieNameOld="properSessionData",this.sessionCookieNameNew="properSessionStorage",this.coreStorageObj={moduleType:"core",moduleName:"sessionData"},this.init=function(){this.getSessionData(),ProperMedia.utils.deepAccess(this,"sessionData.depth")&&ProperMedia.utils.isNumber(parseInt(this.sessionData.depth))?this.sessionData.depth=parseInt(this.sessionData.depth)+1:this.sessionData.depth=1,this.initBidAvg();var e=["utm_medium","utm_source","utm_campaign","utm_term","utm_content","utm_template","utm_referrer","utm_adset","utm_subid","gclid","fbclid"],t=e.some((function(e){return void 0!==properPage.get_vars[e]}),this);""===properPage.referrer||ProperMedia.utils.matchDomain(properPage.domain,properPage.referrer)||this.checkForChange("referrer",properPage.referrer)&&(t=!0),t&&e.forEach((function(e){this.checkForChange(e,properPage.get_vars[e]||"")}),this),void 0!==this.sessionData.uuid&&""!=this.sessionData.uuid||(this.sessionData.uuid=ProperMedia.utils.generateUUID(),this.sessionData.referrer=properPage.referrer,this.sessionData.last_threshold=0),audiencePixels.controller.newPageview();var r=parseFloat(properPage.get_vars.proper_rps??0);r>0&&(this.sessionData.last_threshold=r-.01,this.sessionData.revenue=.001),this.setSessionRevenue(1e3*r),window.proper_ad_session_uuid=this.sessionData.uuid,this.setSessionData()},this.checkForChange=function(e,t){return this.sessionData[e]!==t&&(this.sessionData[e]=t,this.sessionData.uuid="",this.sessionData.depth=1,!0)},this.getSessionData=function(){var e=properStorage.getCookie(this.sessionCookieNameNew,this.coreStorageObj)||properStorage.getCookie(this.sessionCookieNameOld,this.coreStorageObj);if(e&&ProperMedia.utils.isStr(e)){e=ProperMedia.utils.isBase64(e)?ProperMedia.utils.b64DecodeUnicode(e):decodeURIComponent(e);var t=ProperMedia.utils.safeJsonParse(e)||{};ProperMedia.utils.mergeObject(this.sessionData,t)}properPage.domain!==properPage.root_domain&&this.deleteSessionData(this.sessionCookieNameOld,"."+properPage.domain)},this.setSessionData=function(){try{var e=new Date;e.setTime(e.getTime()+18e5);var t=new Date;t.setHours(23,59,59,0);var r=Date.parse(e)<Date.parse(t)?e.toGMTString():t.toGMTString();properStorage.setCookie(this.sessionCookieNameNew,ProperMedia.utils.b64EncodeUnicode(JSON.stringify(this.sessionData)),r,"Lax","."+properPage.root_domain,this.coreStorageObj)}catch(e){}},this.deleteSessionData=function(e,t){properStorage.deleteCookie(e,"Lax",t,this.coreStorageObj)},this.setSessionRevenue=function(e){this.sessionData.revenue+=parseFloat(_0x3aa07a(e))/1e3||0,properLog.mylog("Session revenue: "+this.sessionData.revenue),this.setSessionData(),audiencePixels.controller.checkThresholds(),window.proper_rps=this.sessionData.revenue},this.updateSessionAuctionCount=function(){this.sessionData.auction_count+=1,properLog.mylog("Session Auction Count: "+this.sessionData.auction_count),this.setSessionData()},this.initBidAvg=function(){let e=properDevice.isMobile()?"mobile":"desktop";if((properSpecialOps.dynamicFloors||ProperMedia.utils.deepAccess(properOps,"dynamic_floors.enabled"))&&1==this.sessionData.depth&&ProperMedia.utils.isPlainObject(properSpecialOps.initDynamicFloorPrices)&&Object.keys(properSpecialOps.initDynamicFloorPrices).length){this.sessionData.bid_avg=ProperMedia.utils.deepAccess(properSpecialOps,"initDynamicFloorPrices")||{};let t=1,r=Math.round(100*(ProperMedia.utils.deepAccess(properOps,"dynamic_floors.init_mult_min")||.5))/100,s=Math.round(100*(ProperMedia.utils.deepAccess(properOps,"dynamic_floors.init_mult_max")||.5))/100;properSpecialOps.dynamicFloorsInitModifier?t=properSpecialOps.dynamicFloorsInitModifier:ProperMedia.utils.isNumber(r)&&ProperMedia.utils.isNumber(s)&&r>0&&s>0&&(r==s?t=s:r<s&&(t=Math.random()*(s-r)+r));let o=ProperMedia.utils.deepAccess(properSpecialOps,"initDynamicFloorInitMax")||ProperMedia.utils.deepAccess(properOps,"dynamic_floors."+e+".init_floor_max")||1.25;Object.keys(this.sessionData.bid_avg).forEach((function(r){let s=ProperMedia.utils.deepAccess(properSpecialOps,"initDynamicFloorSizeInitMax."+r)||ProperMedia.utils.deepAccess(properOps,"dynamic_floors."+e+".init_size_floor_max."+r)||o;this.sessionData.bid_avg[r]=ProperMedia.utils.round(Math.min(this.sessionData.bid_avg[r]*t,s),2)}),this)}}},userSyncs=function(){var e=!1,t=null,r=null,s=[];function id(e){return(e||"")+Math.random().toString(16).substr(2)}var o={iframe:function(e){var t=document.createElement("iframe");t.id=id("i-"),t.frameborder="0",t.allowtransparency="true",t.marginheight="0",t.marginwidth="0",t.width="0",t.hspace="0",t.vspace="0",t.height="0",t.scrolling="no",t.style.display="none",t.style.width="0",t.style.height="0",t.sandbox="allow-scripts allow-same-origin",t.src=e.url,t.onload=function(){e.payload?properStorage.setDataInLocalStorage("ProperEbUserSync."+e.bidder,Date.now(),{bidderCode:e.bidder}):properStorage.setDataInLocalStorage("ProperUserSync."+e.bidder,Date.now(),{bidderCode:e.bidder})},r.appendChild(t),e.payload&&(t.contentWindow.document.open(),t.contentWindow.document.write(e.payload),t.contentWindow.document.close())},image:function(e){var t=new Image;t.src=e.url,t.onload=function(){properStorage.setDataInLocalStorage("ProperUserSync."+e.bidder,Date.now(),{bidderCode:e.bidder})}}};function process(){ebData={usersyncs:[],cookies:{}},s.splice(0,5).forEach((function(e){if(ProperMedia.utils.deepAccess(properOps,"bidders.header."+e.bidder+".edge")||!1){ebData.usersyncs.push(e);var t=cookieMatching.getBidderUserSyncValue(e.bidder+"_eb");t&&(ebData.cookies[bidder]=t)}else o[e.type](e)})),ebData.usersyncs.length&&$.ajax({url:properOps.usync_hb_endpoint,method:"POST",requestType:"cors",data:JSON.stringify(ebData),success:function(e){if(response=ProperMedia.utils.safeJsonParse(e),response&&response.syncs&&response.syncs.length>0)for(var t=0;t<response.syncs.length;t++){var r=response.syncs[t];r.bidder&&r.type&&r.payload&&("iframe"==r.type?(r.url="javascript:\"<html><body style='background:transparent'></body></html>\"",o[r.type](r)):properStorage.setDataInLocalStorage("ProperEbUserSync."+r.bidder,Date.now(),{bidderCode:r.bidder}))}response.cookies&&Object.keys(response.cookies).map((function(e){response.cookies[e]&&cookieMatching.updateBidderUserSyncData(e,response.cookies[e])}))},error:function(e){}}),0===s.length&&(clearInterval(t),t=null)}function resume(){e&&0!==s.length&&null===t&&(t=setInterval(process,1500),process())}return{add:function(e){return consentManager.ready((function(){var t=ProperMedia.utils.isArray(e)?e[0]:e,r=ProperMedia.utils.deepAccess(t,"demand_type"),o=ProperMedia.utils.deepAccess(t,"bidder");"video"!=r&&"display"!=r&&r||!function(e){if(gppConsentModule.userSyncsDenied()||!gdprEnforcement.userSyncEnforcement(e))return!1;if(!ProperMedia.utils.deepAccess(properOps,"bidders.header."+e+".enabled"))return!1;if(!properStorage.hasLocalStorage({bidderCode:e}))return!0;var t=ProperMedia.utils.deepAccess(properOps,"bidders.header."+e+".edge")?properStorage.getDataFromLocalStorage("ProperEbUserSync."+e,{bidderCode:e}):properStorage.getDataFromLocalStorage("ProperUserSync."+e,{bidderCode:e});return!t||Date.now()-parseInt(t)>2592e6}(o)||(s=s.concat(e),resume())})),!0},start:function(){e||(e=!0,(r=document.createElement("div")).id=id("us-"),r.style.display="none",r.style.width="0",r.style.height="0",document.body.appendChild(r)),resume()}}}(),debugConsole=function(){this.enabled=!1,this.resize_elem=null,this.breadcrumb_elem=null,this.debug_cont_elem=null,this.debug_console_elem=null,this.view_refresh_timer=null,this.slot_refresh_interval=null,this.debug_style_elem=null,this.createDebugConsole=function(e){this.enabled&&this.destroyDebugConsole(),this.enabled=!0,this.debug_console_elem||(this.debug_console_elem=document.createElement("div"),this.debug_console_elem.id="proper-debug-console",document.body.appendChild(this.debug_console_elem)),this.resize_elem||(this.resize_elem=document.createElement("div"),this.resize_elem.innerHTML="&#8942;",this.resize_elem.id="proper-debug-console-resizer",this.debug_console_elem.appendChild(this.resize_elem)),this.breadcrumb_elem||(this.breadcrumb_elem=document.createElement("div"),this.breadcrumb_elem.id="proper-debug-console-breadcrumb",this.debug_console_elem.appendChild(this.breadcrumb_elem)),this.debug_cont_elem||(this.debug_cont_elem=document.createElement("div"),this.debug_cont_elem.id="proper-debug-console-cont",this.debug_console_elem.appendChild(this.debug_cont_elem)),this.addCssStyle(),this.resize_elem&&this.breadcrumb_elem&&this.setDragAndResizeActions(),this.addSlotOverlays(),this.createOverview()},this.addCssStyle=function(){this.debug_style_elem||(this.debug_style_elem=document.createElement("style"),this.debug_style_elem.id="proper-debug-styling",this.debug_style_elem.innerHTML=this.debug_console_css,document.body.appendChild(this.debug_style_elem))},this.createDebugOverlays=function(){this.addCssStyle(),this.addSlotOverlays(),this.refreshViewInterval()},this.addSlotOverlays=function(){Object.keys(properPage.slots).forEach((function(e){Object.keys(properPage.slots[e]).forEach((function(t){var r=properPage.slots[e][t];this.addSlotOverlay(r)}),this)}),this)},this.addSlotOverlay=function(e){if(!(e instanceof slotObj))return!1;if(e.getElement()){var t="proper_debug_overlay_"+e.name,r=document.getElementById(t),s=document.getElementById(e.div_id);s&&r&&r.parentNode.removeChild(r);var o=document.createElement("div");o.id=t,o.classList.add("proper-debug-overlay");var a=document.createElement("div");a.classList.add("proper-debug-overlay-background");var n=document.createElement("div");n.classList.add("proper-debug-overlay-text"),n.innerHTML=[e.name,"Size: "+e.displayed_ad.size,"Bidder: "+e.displayed_ad.bidder,"CPM: "+e.displayed_ad.price].join("<br>"),$(a).on("click",function(){this.toggleMobileSticky(!0),this.createSlotView(e)}.bind(this)),o.append(n),o.append(a),s.appendChild(o)}return!0},this.toggleMobileSticky=function(e){var t=e?"remove":"toggle";document.body.classList[t]("proper-debug-pinned"),document.getElementById("proper-debug-console").classList[t]("pinned")},this.destroyDebugConsole=function(){this.enabled=!1,this.debug_console_elem&&this.debug_console_elem.parentNode.removeChild(this.debug_console_elem),this.debug_style_elem&&this.debug_style_elem.parentNode.removeChild(this.debug_style_elem),this.view_refresh_timer&&clearTimeout(this.view_refresh_timer),this.slot_refresh_interval&&clearTimeout(this.slot_refresh_interval),this.view_refresh_timer=null,this.debug_console_elem=null,this.breadcrumb_elem=null,this.debug_cont_elem=null,this.debug_style_elem=null,this.resize_elem=null,Object.keys(properPage.slots).forEach((function(e){Object.keys(properPage.slots[e]).forEach((function(t){var r=properPage.slots[e][t];this.removeSlotOverlay(r)}),this)}),this)},this.removeSlotOverlay=function(e){if(!(e instanceof slotObj))return!1;var t=e.getElement();if(t)$(t).parent().find(".proper-debug-overlay").remove();return!0},this.refreshViewInterval=function(){clearTimeout(this.slot_refresh_interval),this.slot_refresh_interval=properSetInterval.setInterval.call(this,this.loadViewCallback,1500)},this.refreshViewTimer=function(e,t){clearTimeout(this.view_refresh_timer),this.view_refresh_timer=properSetTimeout.setTimeout.call(this,this.loadViewCallback,1500,e,t)},this.loadViewCallback=function(e,t){this.addSlotOverlays(),{overview:()=>this.createOverview(),page:()=>this.createPageView(t),slot:()=>this.createSlotView(t),ad_pool:()=>this.createAdPoolView(t),auction:()=>this.createAuctionView(t)}[e]?.()},this.createBreadcrumb=function(e){this.breadcrumb_elem.innerHTML="";var t=document.createElement("span");$(t).addClass("proper-debug-mobile-pin-btn"),t.innerHTML="&#8595;",$(t).on("click",function(){this.toggleMobileSticky()}.bind(this)),this.breadcrumb_elem.appendChild(t),Object.keys(e).forEach((function(t){var r=e[t],s=document.createElement("div");if($(s).addClass("proper-debug-breadcrumb"),s.innerHTML=r.text,$(s).on("click",function(){this.loadViewCallback(r.text.replaceAll(" ","_"),r.obj)}.bind(this)),this.breadcrumb_elem.appendChild(s),t<e.length-1){var o=document.createElement("div");$(o).addClass("proper-debug-breadcrumb-spacer"),this.breadcrumb_elem.appendChild(o)}else t==e.length-1&&this.refreshViewTimer(r.text,r.obj)}),this);var r=document.createElement("span");$(r).addClass("proper-debug-close-console-btn"),r.innerHTML="&times;",$(r).on("click",function(){this.destroyDebugConsole()}.bind(this)),this.breadcrumb_elem.appendChild(r)},this.createTitleElement=function(e){var t=document.createElement("div");$(t).addClass("proper-debug-cont-title"),t.style.cssText="padding: 4px; margin: 4px; font-size: 1em; font-weight: 700; display: inline-block;",$(t).html(e),this.debug_cont_elem.appendChild(t)},this.createStateElements=function(e){var t=document.createElement("div");$(t).addClass("proper-debug-state-cont"),this.debug_cont_elem.appendChild(t),Object.keys(e).forEach((function(r){var s=document.createElement("div");$(s).addClass("proper-debug-state-cell"),e[r]||$(s).addClass("proper-debug-state-cell red"),$(s).html(r),t.appendChild(s)}),this)},this.createOverview=function(){this.createBreadcrumb([{text:"overview",obj:{}}]),this.debug_cont_elem.innerHTML="",this.createTitleElement("Sections");var e=document.createElement("div");$(e).addClass("proper-debug-sections-cont"),this.debug_cont_elem.appendChild(e);var t=document.createElement("button");$(t).addClass("proper-debug-page-cell"),properPage instanceof pageObj==0&&$(t).addClass("proper-debug-page-cell red"),$(t).html("Page &amp; Slots"),$(t).on("click",function(){this.createPageView(properPage)}.bind(this)),e.appendChild(t);var r=document.createElement("button");$(r).addClass("proper-debug-ad-pool-cell"),0==properAdPool.ads.length&&0==properAdPool.amazon_ads.length&&$(r).addClass("proper-debug-ad-pool-cell red"),$(r).html("Ad Pool &amp; Auctions"),$(r).on("click",function(){this.createAdPoolView(properAdPool)}.bind(this)),e.appendChild(r),this.createTitleElement("Device");var s=[{property:"OS",value:properDevice.os},{property:"OS Group",value:properDevice.os_group},{property:"Browser",value:properDevice.browser},{property:"Browser Group",value:properDevice.browser_group},{property:"Device Type",value:properDevice.device_type},{property:"User Agent",value:navigator.userAgent}];this.createTable("#proper-debug-console-cont",s,!1),this.createTitleElement("Session Data");var o=[{property:"UUID",value:properSession.sessionData.uuid},{property:"Depth",value:properSession.sessionData.depth},{property:"Referrer",value:properSession.sessionData.referrer},{property:"UTM campaign",value:properSession.sessionData.utm_campaign},{property:"UTM source",value:properSession.sessionData.utm_source},{property:"UTM medium",value:properSession.sessionData.utm_medium},{property:"UTM term",value:properSession.sessionData.utm_term},{property:"UTM content",value:properSession.sessionData.utm_content},{property:"RPS",value:properSession.sessionData.revenue}];this.createTable("#proper-debug-console-cont",o,!1),this.createTitleElement("Special Ops");var a=document.createElement("pre");a.innerHTML=JSON.stringify(properSpecialOps,void 0,2),this.debug_cont_elem.appendChild(a),this.debug_cont_elem.appendChild(document.createElement("hr"))},this.createPageView=function(e){var t=[{text:"overview",obj:{}},{text:"page",obj:e}];this.createBreadcrumb(t),this.debug_cont_elem.innerHTML="",this.createTitleElement("Slots");var r=document.createElement("div");$(r).addClass("proper-debug-page-slots-cont"),this.debug_cont_elem.appendChild(r),Object.keys(properPage.slots).forEach((function(e){Object.keys(properPage.slots[e]).forEach((function(t){var s=properPage.slots[e][t],o=(s.getElement(),document.createElement("button"));$(o).addClass("proper-debug-page-slot-cell"),$(o).html(s.name),$(o).on("click",function(){this.createSlotView(s)}.bind(this)),r.appendChild(o)}),this)}),this),this.createTitleElement("States");var s={};1!==e.isolated&&0==properOps.dfp_per_slot&&(s["DFP Init"]=properPage.dfp_init,void 0!==properPage.dfp_enabled_services&&1==properPage.dfp_enabled_services&&"function"==typeof googletag.pubads().isSRA&&googletag.pubads().isSRA()&&(s["DFP Single Request Enabled"]=1)),Object.keys(s).length>0&&this.createStateElements(s);const o=document.createElement("button");$(o).addClass("proper-debug-page-slot-cell"),$(o).html("Disable Refresh"),$(o).on("click",function(){for(const e in properPage.slots)for(const t in properPage.slots[e]){properPage.slots[e][t].disableSlotRefresh()}}.bind(this)),this.debug_cont_elem.appendChild(o),this.createTitleElement("Page Data");var a=[{property:"UUID",value:e.uuid},{property:"DFP ID",value:properOps.dfp_id},{property:"MCM Type",value:properOps.mcm_type},{property:"Url",value:e.url},{property:"Referrer",value:e.referrer},{property:"Protocol",value:e.protocol},{property:"Canonical url",value:e.canonical_url},{property:"Isolated",value:e.isolated},{property:"Width",value:e.width},{property:"Height",value:e.height},{property:"Post id",value:e.post_id},{property:"SPA enabled",value:e.spa_settings.enabled}];1==e.spa_settings.enabled&&(a=a.concat([{property:"SPA gallery id",value:e.spa_settings.gallery_id},{property:"SPA gallery url",value:e.spa_settings.gallery_base_url},{property:"SPA page number",value:e.spa_settings.page_number},{property:"SPA prefetch enabled",value:e.spa_settings.prefetch}])),this.createTable("#proper-debug-console-cont",a,!1),this.createTitleElement("Page Meta");var n=[];Object.keys(e.page_meta).forEach((function(t){n.push({property:t.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "),value:"object"==typeof e.page_meta[t]?JSON.stringify(e.page_meta[t]):e.page_meta[t]})})),this.createTable("#proper-debug-console-cont",n,!1)},this.createSlotView=function(e){var t=[{text:"overview",obj:{}},{text:"page",obj:properPage},{text:"slot",obj:e}];this.createBreadcrumb(t),this.debug_cont_elem.innerHTML="",this.createTitleElement("Slots");var r=document.createElement("div");$(r).addClass("proper-debug-page-slots-cont"),this.debug_cont_elem.appendChild(r);var s=e.name.toString();Object.keys(properPage.slots).forEach((function(e){Object.keys(properPage.slots[e]).forEach((function(t){var o=properPage.slots[e][t],a=(o.getElement(),document.createElement("button"));$(a).addClass("proper-debug-page-slot-cell"),s==t&&$(a).addClass("proper-debug-page-slot-cell active"),$(a).html(o.name),$(a).on("click",function(){this.createSlotView(o)}.bind(this)),r.appendChild(a)}),this)}),this),this.createTitleElement("States");var o={"In DOM":e.getElement()?1:0};0==properPage.isolated&&(1==properOps.dfp_per_slot?(o["Slot DFP Init"]=e.dfp_init,1==e.dfp_enabled_services&&"function"==typeof e.googletag().pubads().isSRA&&e.googletag().pubads().isSRA()&&(o["DFP Single Request"]=1)):(o["DFP Init"]=properPage.dfp_init,1==properPage.dfp_enabled_services&&"function"==typeof googletag.pubads().isSRA&&googletag.pubads().isSRA()&&(o["DFP Single Request Enabled"]=1)),o["Mapped DFP Sizes"]=e.mapped_dfp_sizes,o["DFP Ready"]=e.dfp_ready,o["DFP Sent"]=e.dfp_sent,e.refresh.enabled&&e.refresh.count>0&&(o["DFP Refreshed"]=e.dfp_refreshed)),o.Displayed=e.displayed,this.createStateElements(o),this.createTitleElement(e.name);var a=document.createElement("div");$(a).addClass("proper-debug-scroll-slot-inview"),a.style.cssText="display: inline-block; cursor: pointer;",$(a).html("&#128065;"),$(a).on("click",function(){e.getElement().scrollIntoView()}.bind(this)),this.debug_cont_elem.appendChild(a);const n=document.createElement("button");$(n).addClass("proper-debug-page-slot-cell"),$(n).html("Refresh"),$(n).on("click",function(){console.log("refreshing slot: "+e.name),refreshAuctionAndSlotsByName([e.name])}.bind(this)),this.debug_cont_elem.appendChild(n);const d=document.createElement("button");$(d).addClass("proper-debug-page-slot-cell"),$(d).html("Disable Refresh"),$(d).on("click",function(){console.log("disabling refresh for slot: "+e.name),e.disableSlotRefresh()}.bind(this)),this.debug_cont_elem.appendChild(d);var p=e.sizes||[];const l=e.flex_map;var c=0==e.viewability.viewable?e.viewability.total_time_inview:e.viewability.total_time_inview+e.getTimeInview(),u=[{property:"Type",value:e.type},{property:"Size",value:e.size},{property:"Sizes",value:p.join(", ")},{property:"Default size",value:e.default_size.join("x")},{property:"MCM Type",value:e.mcm_type},{property:"DFP ID",value:e.dfp_id},{property:"DFP AD Unit Path",value:e.dfpAdUnitPath},{property:"Div ID",value:e.div_id},{property:"Number",value:e.number},{property:"Refresh",value:e.refresh.enabled},{property:"Refresh cnt",value:e.refresh.count},{property:"Refresh max",value:e.refresh.max},{property:"Refresh interval",value:e.refresh.current_interval},{property:"Refresh inview interval",value:e.refresh.inview_interval},{property:"Viewable",value:e.viewability.viewable},{property:"Time inview",value:c},{property:"Slider",value:e.slider},{property:"Sticky",value:e.sticky},{property:"Flex",value:e.flex_enabled}];if(e.flex_enabled&&(u=u.concat([{property:"Flex Map",value:Object.entries(l).map((e=>{let[t,r]=e;return`${t}: ${r}`})).join(", ")}])),1==e.sticky&&(u=u.concat([{property:"Position",value:e.sticky_settings.position},{property:"Brand",value:e.sticky_settings.brand},{property:"Close btn",value:e.sticky_settings.close_btn},{property:"Disable on close",value:e.sticky_settings.disable_on_close},{property:"Freq cap enabled",value:e.sticky_settings.freq_cap_enabled},{property:"Freq cap",value:e.sticky_settings.freq_cap}])),u=u.concat([{property:"Lazyload enabled",value:e.lazyload.enabled}]),e.lazyload.enabled&&(u=u.concat([{property:"In fetch zone",value:e.lazyload.inFetchZone},{property:"In render zone",value:e.lazyload.inRenderZone},{property:"Fetch zone %",value:e.lazyload.fetchMarginPercent+"%"},{property:"Render zone %",value:e.lazyload.renderMarginPercent+"%"}])),u=u.concat([{property:"Auto delete enabled",value:e.autoDelete.enabled}]),e.autoDelete.enabled&&(u=u.concat([{property:"In delete zone",value:e.autoDelete.inDeleteZone},{property:"Delete zone %",value:e.autoDelete.autoDeleteMarginPercent+"%"}])),u=u.concat([{property:"Dynamic enabled",value:e.dynamic.enabled}]),e.dynamic.enabled&&(u=u.concat([{property:"CSS Placement",value:e.dynamic.cssplacement},{property:"CSS Selector",value:e.dynamic.cssselector},{property:"Instance number",value:e.dynamic.instance_number}])),1==properPage.spa_settings.enabled&&1==properPage.spa_settings.prefetch&&(u=u.concat([{property:"Prefetch enabled",value:1}])),this.createTable("#proper-debug-console-cont",u,!1),"video"==e.type&&e.video_player instanceof videoPlayer){this.createTitleElement("Video Player");var g=ProperMedia.utils.deepAccess(e,"video_player.player_settings")||{},m=[{property:"ID",value:g.id},{property:"Div ID",value:g.div_id},{property:"DFP Ad Unit",value:g.dfp_ad_unit},{property:"Video ID",value:g.video_id},{property:"Video Type",value:g.video_type},{property:"Number of Ads",value:g.number_of_ads},{property:"Autoplay",value:g.autoplay},{property:"Backfill",value:g.backfill},{property:"Backfill ID",value:g.backfill_id},{property:"Small Player",value:g.small_player},{property:"Small Player Bottom",value:g.small_player_bottom},{property:"Ad Failure Limit",value:g.ad_failure_limit},{property:"Vast Timeout",value:g.vast_timeout},{property:"No Ads No Player",value:g.no_ads_no_player}];u=u.concat([{property:"Lazyload enabled",value:e.lazyload.enabled}]),this.createTable("#proper-debug-console-cont",m,!1)}if(1==e.displayed&&Object.keys(e.displayed_ad).length>0){this.createTitleElement("Displayed Ad");var _=Math.max(0,ProperMedia.utils.getTimePassed(e.tracking_times.dfp_sent_ts,e.tracking_times.dfp_returned_ts)),h=[{property:"Bidder",value:e.displayed_ad.bidder},{property:"Target Slot",value:e.displayed_ad.target_slot},{property:"Media Type",value:e.displayed_ad.type},{property:"Size",value:e.displayed_ad.size},{property:"Gross",value:e.displayed_ad.gross},{property:"Price",value:e.displayed_ad.price},{property:"Floor price",value:e.displayed_ad.floor},{property:"DFP price",value:e.displayed_ad.dfp_price},{property:"Tag ID",value:e.displayed_ad.tag_id||""},{property:"Campaign ID",value:e.displayed_ad.cid},{property:"Creative ID",value:e.displayed_ad.crid},{property:"Deal ID",value:e.displayed_ad.dealid},{property:"Ad ID",value:e.displayed_ad.adid},{property:"Ad Domain",value:JSON.stringify(e.displayed_ad.adomain)},{property:"Categories",value:JSON.stringify(e.displayed_ad.cat)},{property:"Attributes",value:JSON.stringify(e.displayed_ad.attr)},{property:"Extensions",value:JSON.stringify(e.displayed_ad.ext)}];(ProperMedia.utils.deepAccess(properOps,"bidders.header."+e.displayed_ad.bidder)||ProperMedia.utils.deepAccess(properOps,"bidders.s2s."+e.displayed_ad.bidder))&&(h=h.concat([{property:"Header Response Time",value:e.displayed_ad.response_ms+" ms"}])),h=h.concat([{property:"DFP Response Time",value:_+" ms"}]),this.createTable("#proper-debug-console-cont",h,!1)}this.createTitleElement("Floors");var b=document.createElement("pre");b.innerHTML=JSON.stringify({floors:e.floors},void 0,2),this.debug_cont_elem.appendChild(b)},this.createAdPoolView=function(e){var t=[{text:"overview",obj:{}},{text:"ad_pool",obj:e}];this.createBreadcrumb(t),this.debug_cont_elem.innerHTML="",this.createTitleElement("Auctions");var r=document.createElement("div");$(r).addClass("proper-debug-auction-cont"),this.debug_cont_elem.appendChild(r),Object.keys(e.finished_auctions).forEach((function(t){var s=e.finished_auctions[t],o=(s.bids_sent,document.createElement("button"));$(o).addClass("proper-debug-auction-cell"),$(o).html("Auction "+s.auction_num),$(o).on("click",function(){this.createAuctionView(s,e)}.bind(this)),r.appendChild(o)}),this),Object.keys(e.auctions).forEach((function(t){var s=e.auctions[t],o=(s.bids_sent,document.createElement("button"));$(o).addClass("proper-debug-auction-cell"),$(o).html("Auction "+s.auction_num),$(o).on("click",function(){this.createAuctionView(s,e)}.bind(this)),r.appendChild(o)}),this),this.debug_cont_elem.appendChild(document.createElement("hr")),this.createTitleElement("Bidders");var s=document.createElement("div");$(s).addClass("proper-debug-bidders-cont"),this.debug_cont_elem.appendChild(s),Object.keys(properOps.bidders).forEach((function(e){Object.keys(properOps.bidders[e]).forEach((function(t){var r=properOps.bidders[e][t],o=document.createElement("div");$(o).addClass("proper-debug-bidder-cell"),r.enabled||$(o).addClass("red"),$(o).html(t),s.appendChild(o)}),this)}),this),this.debug_cont_elem.appendChild(document.createElement("hr")),this.createTitleElement("Bids ("+e.ads.length+")");let o=[];for(let t=0;t<e.ads.length;t++){let r=e.ads[t];o.push({bidder:r.bidder,type:r.type,size:r.size,gross:r.gross,price:r.price,floor:r.floor,dfp_price:r.dfp_price,tag_id:r.tag_id,target_slot:r.target_slot,response_ms:r.response_ms,ttl:r.ttl,dealid:r.dealid,crid:r.crid})}this.createTable("#proper-debug-console-cont",o,!0),this.createTitleElement("Amazon Bids ("+e.amazon_ads.length+")"),o=[];for(let t=0;t<e.amazon_ads.length;t++){let r=e.amazon_ads[t];o.push({bidder:r.bidder,type:r.type,size:r.size,gross:r.gross,price:r.price,floor:r.floor,dfp_price:r.dfp_price,tag_id:r.tag_id,target_slot:r.target_slot,response_ms:r.response_ms,ttl:r.ttl,dealid:r.dealid,crid:r.crid})}this.createTable("#proper-debug-console-cont",o,!0),this.createTitleElement("Displayed Bids"),o=[];for(let t=0;t<e.displayed_ads.length;t++){let r=e.displayed_ads[t];o.push({bidder:r.bidder,type:r.type,size:r.size,gross:r.gross,price:r.price,floor:r.floor,dfp_price:r.dfp_price,tag_id:r.tag_id,response_ms:r.response_ms,ttl:r.ttl,dealid:r.dealid,crid:r.crid,target_slot:r.target_slot})}this.createTable("#proper-debug-console-cont",o,!0);var a=document.createElement("div");$(a).addClass("proper-debug-auction-meta");var n=document.createElement("pre");n.innerHTML=JSON.stringify({"dynamic floors":properSession.sessionData.bid_avg},void 0,2),a.appendChild(n);var d=document.createElement("pre");d.innerHTML=JSON.stringify({no_bid_cnt:properSession.sessionData.no_bid_cnt},void 0,2),a.appendChild(d),this.debug_cont_elem.appendChild(a)},this.createAuctionView=function(e){var t=[{text:"overview",obj:{}},{text:"ad_pool",obj:properAdPool},{text:"auction",obj:e}];this.createBreadcrumb(t),this.debug_cont_elem.innerHTML="",this.createTitleElement("Auction Data");var r=[{property:"Network Requests",value:e.requests_sent},{property:"Bids returned / sent",value:e.bids_returned+" / "+e.bids_sent},{property:"Bids sent",value:e.bids_started_ts?1:0},{property:"Bids ready",value:e.bids_done_ts?1:0},{property:"Auction ms",value:e.calcAuctionMs()},{property:"Max timeout",value:e.max_timeout}];this.createTable("#proper-debug-console-cont",r,!1),this.createTitleElement("Bids");let s=[];Object.keys(e.bids).length>0&&Object.keys(e.bids).forEach((function(t){var r=e.bids[t];if(r.responses.length>0)for(var o=0;o<r.responses.length;o++){var a=r.responses[o];s.push({bidder:a.bidder,displayed:a.displayed,type:a.type,size:a.size,gross:a.gross,price:a.price,floor:a.floor,dfp_price:a.dfp_price,tag_id:a.tag_id,target_slot:a.target_slot,"response ms":a.response_ms,ttl:a.ttl})}})),this.createTable("#proper-debug-console-cont",s,!0),this.createTitleElement("No Bid Responses"),s=[],Object.keys(e.bids).length>0&&Object.keys(e.bids).forEach((function(t){var r=e.bids[t];if(r.responses_no_bid.length>0)for(var o=0;o<r.responses_no_bid.length;o++){var a=r.responses_no_bid[o];s.push({bidder:a.bidder,type:a.type,tag_id:a.tag_id,"response ms":a.response_ms})}})),this.createTable("#proper-debug-console-cont",s,!0),this.createTitleElement("Errored Bid Requests"),s=[],Object.keys(e.bids).length>0&&Object.keys(e.bids).forEach((function(t){var r=e.bids[t];if(r.response_errors.length>0)for(var o=0;o<r.response_errors.length;o++){var a=r.response_errors[o];s.push({bidder:a.bidder,status:a.status,statusText:a.statusText,responseMs:a.response_ms,timeoutMs:a.timeout})}})),this.createTable("#proper-debug-console-cont",s,!0)},this.createTable=function(e,t,r){var s;!function(){s=document.createElement("table"),$(s).addClass("proper-debug-table"),s.style.cssText="margin: 5px;",$(e).append(s);for(var o=function(){for(var e=[],o=document.createElement("tr"),a=0;a<t.length;a++){var n=t[a];for(var d in n)if(0==e.includes(d)){e.push(d);var p=document.createElement("th");p.innerHTML=d,$(o).append(p)}}1==r&&$(s).append(o);return e}(),a=0;a<t.length;a++){for(var n=document.createElement("tr"),d=0;d<o.length;d++){var p=t[a][o[d]];null==p&&(p="");var l=document.createElement("td");l.style.cssText="padding: 5px;",l.innerHTML=p,$(n).append(l)}$(s).append(n)}}()},this.setDragAndResizeActions=function(){var e=20,t=0,r=0,s=0,o=0,a=0,n=0,d=this.debug_console_elem,p=this.resize_elem,l=this.breadcrumb_elem;function resize(s){var a=t+(s.pageY-o),p=r+(s.pageX-n);a>e&&(d.style.height=a+"px"),p>e&&(d.style.width=p+"px")}function dragTo(e){d.style.top=s+(e.pageY-o)+"px",d.style.left=a+(e.pageX-n)+"px"}function stopResize(){window.removeEventListener("mousemove",resize)}function stopDrag(){window.removeEventListener("mousemove",dragTo)}p.addEventListener("mousedown",(function(e){e.preventDefault(),t=parseFloat(getComputedStyle(d,null).getPropertyValue("height").replace("px","")),r=parseFloat(getComputedStyle(d,null).getPropertyValue("width").replace("px","")),s=d.getBoundingClientRect().top,o=e.pageY,a=d.getBoundingClientRect().left,n=e.pageX,window.addEventListener("mousemove",resize),window.addEventListener("mouseup",stopResize)})),l.addEventListener("mousedown",(function(e){e.preventDefault(),s=d.getBoundingClientRect().top,o=e.pageY,a=d.getBoundingClientRect().left,n=e.pageX,window.addEventListener("mousemove",dragTo),window.addEventListener("mouseup",stopDrag)}))},this.css_values={fontMedium:"12px",fontLarge:"16px",maxZ:2147483647,purple:"#2C3050",purpleLight:"#555F9E",purpleDark:"#1A1D3E",green:"#44B558",greenLight:"#57EB73",greenDark:"#008C2B",grayLight:"#f6f8fa",grayDark:"#3b565d"},this.debug_console_css="\t\t@keyframes console-tween-in {\t\t\tfrom {left: -500px}\t\t\tto {left: 15px}\t\t}\t\t#proper-debug-console {\t\t\tbackground: "+this.css_values.grayLight+";\t\t\tz-index: "+this.css_values.maxZ+";\t\t\tposition: fixed;\t\t\ttop: 15px;\t\t\tleft: 15px;\t\t\twidth: calc(100% - 30px);\t\t\toverflow: auto;\t\t\theight: 500px;\t\t\twidth: 600px;\t\t\tborder-radius: 5px;\t\t\tcolor:"+this.css_values.grayDark+';\t\t\tfont-size:12px !important;\t\t\tmax-width: calc(100vw - 30px);\t\t\tbox-shadow: 0 0 0 7px rgba(255,255,255,0.7), 0 10px 10px 0 rgba(0,0,0,0.65), inset 0 -4px 0 0 white;\t\t\tanimation: console-tween-in 500ms ease-out;\t\t}#proper-debug-console, #proper-debug-console * {\t\t\t font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif !important;\t\t}\t\t#proper-debug-console.short {\t\t\theight:250px;\t\t}#proper-debug-console-cont {\t\t\tpadding: 8px 8px;\t\t}\t\t#proper-debug-console-resizer {\t\t\twidth: 12px;\t\t\theight: 20px;\t\t\tposition: sticky;\t\t\tz-index: 9999999;\t\t\tbackground: white;\t\t\tcolor: gray;\t\t\tfont-size:16px;\t\t\tdisplay:flex;\t\t\talign-items:center;\t\t\tjustify-content:center;\t\t\tcursor: nwse-resize;\t\t\ttop:calc(100% - 20px);\t\t\tleft:calc(100% - 12px);\t\t\tmargin-bottom: -20px;\t\t}\t\t#proper-debug-console-breadcrumb {\t\t\tfont-weight: bold;\t\t\tborder-radius: 6px 6px 0 0;\t\t\tpadding-left: 11px;\t\t\tbackground: '+this.css_values.purple+";\t\t\tposition: sticky;\t\t\ttop:0;\t\t\tz-index: 999;\t\t\tcursor: move;\t\t\tbox-shadow:inset 0 0 0 4px "+this.css_values.grayLight+";\t\t\tdisplay:flex;\t\t\theight:50px;\t\t}.proper-debug-breadcrumb {\t\t\tmargin: 0px 3px;\t\t\tcursor: pointer;\t\t\tdisplay:block;\t\t\tcolor:white;\t\t}.proper-debug-breadcrumb:not(:last-of-type){\t\t\topacity:0.7;\t\t}\t\t#proper-debug-console-breadcrumb > * {\t\t\tdisplay:flex;\t\t\talign-items:center;\t\t\ttext-transform: capitalize;\t\t}.proper-debug-breadcrumb-spacer {\t\t\tmargin-right:3px;\t\t}.proper-debug-breadcrumb-spacer:after {\t\t\tcontent:'';\t\t\twidth: 4px;\t\t\theight:4px;\t\t\tborder-top: solid 1px white;\t\t\tborder-right: solid 1px white;\t\t\ttransform: rotate(45deg);\t\t\topacity:0.7;\t\t}\t\t.proper-debug-close-console-btn {\t\t\tpadding: 4px;\t\t\tmargin: 0 12px 0 auto;\t\t\tcursor: pointer;\t\t\tdisplay: inline-block;\t\t\tfloat: right;\t\t\tfont-size:21px;\t\t\tfont-family:'Futura', sans-serif !important;\t\t\tfont-weight:normal;\t\t\tcolor: white;\t\t}\t\t#proper-debug-console-cont {\t\t\tdisplay:flex;\t\t\tflex-direction:column;\t\t}#proper-debug-console-cont > * {\t\t\tflex: 1 1 100%;\t\t\tmargin:6px 0 0 0 !important;\t\t\tpadding:0;\t\t}\t\t.proper-debug-auction-meta pre {\t\t\twidth: 50%;\t\t\tfloat: left;\t\t}\t\t.proper-debug-overlay-text {\t\t\ttext-align: left;\t\t\tz-index: "+(this.css_values.maxZ-1)+";\t\t\tpadding: 4px 8px 8px 8px;\t\t\tposition: absolute;\t\t\ttop: 0px;\t\t\tleft: 0px;\t\t\topacity: .90;\t\t\tbackground: "+this.css_values.greenLight+";\t\t\tfont-size: "+this.css_values.fontMedium+";\t\t\tline-height: 1.3em;\t\t\tcolor: black;\t\t}\t\t."+properOps.slot_wrapper_class+".ad-sticky.sticky-btm .proper-debug-overlay-text{\t\t\ttop:auto;\t\t\tbottom:0;\t\t}\t\t.proper-debug-overlay-background {\t\t\tcursor: pointer;\t\t\tbox-shadow: 0 0 0 4px "+this.css_values.greenLight+";\t\t\tz-index: "+(this.css_values.maxZ-2)+";\t\t\tposition: absolute;\t\t\ttop: 0px;\t\t\tbottom: 0px;\t\t\tleft: 0px;\t\t\tright: 0px;\t\t\tmax-width: calc(100vw - 8px);\t\t\tmargin:0 auto;\t\t}\t\t.proper-debug-page-slot-cell {\t\t\tborder: 2px solid black;\t\t\tpadding: 4px;\t\t\tmargin: 4px;\t\t\twidth: fit-content;\t\t\tdisplay: inline-block;\t\t\tcursor: pointer;\t\t}.proper-debug-page-slot-cell.active {\t\t\tbackground:"+this.css_values.greenLight+" !important\t\t}\t\t.proper-debug-state-cell,\t\t.proper-debug-bidder-cell {\t\t\tpadding: 4px 6px 4px 18px;\t\t\tmargin: 4px;\t\t\twidth: fit-content;\t\t\tdisplay: inline-block;\t\t\tposition:relative;\t\t\tbackground: white;\t\t\tborder-radius:30px;\t\t\tbox-shadow: 0 1px 5px 0 rgba(0,0,0,0.1);\t\t}.proper-debug-state-cell:before,\t\t.proper-debug-bidder-cell:before{\t\t\tcontent:'';\t\t\twidth:8px;\t\t\theight:8px;\t\t\tposition: absolute;\t\t\tleft: 5px;\t\t\ttop: 6px;\t\t\tz-index:3;\t\t\tmargin-right:5px;\t\t\tbackground-image: linear-gradient("+this.css_values.greenLight+","+this.css_values.greenDark+");\t\t\tborder-radius: 5px;\t\t\tbox-shadow: inset 0 0 2px 0 "+this.css_values.greenLight+";\t\t}.proper-debug-state-cell.red,\t\t.proper-debug-bidder-cell.red {\t\t\tcolor:red;\t\t}.proper-debug-state-cell.red:before,\t\t.proper-debug-bidder-cell.red:before {\t\t\tbackground:red;\t\t\tbox-shadow:none;\t\t}\t\t.proper-debug-state-cell{\t\t\tborder-radius:0;\t\t}.proper-debug-state-cell:first-of-type {\t\t\tborder-radius: 30px 0 0 30px;\t\t}\t\t.proper-debug-state-cell:last-of-type {\t\t\tborder-radius: 0 30px 30px 0;\t\t}.proper-debug-state-cell:first-of-type:last-of-type{\t\t\tborder-radius: 30px;\t\t}\t\t.proper-debug-state-cell:not(:last-of-type) {\t\t\tmargin-right:-2px;\t\t}\t\t."+properOps.slot_wrapper_class+",\t\t.proper-ad-insert {\t\t\tbackground: "+this.css_values.greenDark+"AA;\t\t}."+properOps.slot_wrapper_class+":hover,\t\t.proper-ad-insert:hover {\t\t\tbackground: "+this.css_values.greenLight+";\t\t}\t\t#proper-debug-console table {\t\t\tborder-top: solid 2px "+this.css_values.purple+";\t\t\tbackground:white;\t\t\tborder-bottom: solid 1px #ccc;\t\t\tline-height:1.4em;\t\t}#proper-debug-console table td:not(:first-of-type){\t\t\tborder-left: solid 1px #ccc;\t\t}#proper-debug-console table td:first-of-type{\t\t\tmin-width:100px;\t\t\tbackground:white;\t\t\twidth:1px;\t\t\tfont-weight:bold;\t\t}#proper-debug-console table th {\t\t\tfont-weight:bold;\t\t\tborder-bottom:solid 1px #cccccc80;\t\t}\t\t#proper-debug-console hr {\t\t\tborder:none;\t\t\tborder-bottom: solid 1px "+this.css_values.grayDark+";\t\t\topacity:0.3;\t\t}\t\t#proper-debug-console button {\t\t\t-webkit-appearance:none;\t\t\tcursor:pointer;\t\t\tborder:none;\t\t\tborder-radius: 4px;\t\t\tpadding: 5px 9px;\t\t\tfont-weight:bold;\t\t\tcolor:white;\t\t\tbackground:"+this.css_values.green+";\t\t\tdisplay:inline-block;\t\t}#proper-debug-console button:not(:hover) {\t\t\topacity:0.9;\t\t}\t\t#proper-debug-console button.red {\t\t\tbackground:red;\t\t}\t\t.proper-debug-mobile-pin-btn {\t\t\tdisplay:none !important;\t\t\tbackground:white;\t\t\twidth:24px;\t\t\theight:24px;\t\t\tfont-weight:bold;\t\t\tborder-radius: 4px;\t\t\tmargin-top:13px;\t\t\tmargin-right:6px;\t\t\tcursor:pointer;\t\t\tjustify-content:center;\t\t\talign-items:center;\t\t}\t\t@media screen and (max-width: 727px){\t\t\t#proper-debug-console {\t\t\t\tmax-width:100vw !important;\t\t\t\twidth:100vw !important;\t\t\t\tposition:fixed !important;\t\t\t\tleft:0 !important;\t\t\t\ttop: auto !important;\t\t\t\tbottom:0 !important;\t\t\t\tbox-shadow: none !important;\t\t\t\tanimation:none !important;\t\t\t\tmax-height:500px !important;\t\t\t\ttransition: max-height 250ms !important;\t\t\t}\t\t\t#proper-debug-console.pinned {\t\t\t\tmax-height:50px !important;\t\t\t}\t\t\t#proper-debug-console.pinned .proper-debug-mobile-pin-btn{\t\t\t\ttransform: scaleY(-1);\t\t\t}\t\t\t#proper-debug-console-breadcrumb {\t\t\t\tcursor: default !important;\t\t\t}\t\t\t#proper-debug-console-resizer {\t\t\t\tdisplay:none;\t\t\t}\t\t\t.proper-debug-mobile-pin-btn {\t\t\t\tdisplay:flex !important;\t\t\t}\t\t\tbody.proper-debug-pinned ."+properOps.slot_wrapper_class+".sticky-btm{\t\t\t\ttransform: translateY(-50px);\t\t\t}\t\t}\t\t"},consentManager=function(){var e={gdpr:!1,uspc:!1,gpp:!1},t=!0,r={},s=!1,o=[],a={ready:function(e,t){"unshift"==t?o.unshift(e):o.push(e)},consentReady:function(t,r){!0!==e[t]&&(e[t]=!0,("gpp"==t&&gppConsent.gppApplies&&gppConsent.gppString||"uspc"==t&&uspConsent.ccpaApplies&&uspConsent.usPrivacy||"gdpr"==t&&gdprConsent.gdprApplies&&gdprConsent.consentString||0==ProperMedia.utils.objectValues(e).filter((function(e){return 0==e})).length)&&function(){a.ready=function(e){e.call()};for(;o.length;)o.shift().call()}())},checkIfMissing:function(){var e=!1;return t&&(ProperMedia.utils.deepAccess(properSpecialOps,"gppDoesApply")||ProperMedia.utils.deepAccess(properSpecialOps,"gdprDoesApply")||ProperMedia.utils.deepAccess(properSpecialOps,"uspcDoesApply")?(e=!0,ProperMedia.utils.deepAccess(properSpecialOps,"gppDoesApply")&&(gppConsent.gppApplies&&gppConsent.gppString?(t=!1,e=!1):(t="EU"==ProperMedia.utils.deepAccess(properSpecialOps,"gppSection"),e=!0)),1==e&&(ProperMedia.utils.deepAccess(properSpecialOps,"gdprDoesApply")?gdprConsent.gdprApplies&&gdprConsent.consentString?(t=!1,e=!1):(t=!0,e=!0):ProperMedia.utils.deepAccess(properSpecialOps,"uspcDoesApply")&&(uspConsent.ccpaApplies&&uspConsent.usPrivacy?(t=!1,e=!1):(t=!1,e=!0)))):(e=!1,t=!1)),(gppConsentModule.checkKnownChildSensitiveDataConsents()||properSpecialOps?.coppa)&&(t=!0,e=!1),e||t},loadIfMissing:function(e){let consentCallback=function(o,a,n){if(delete r[a],n&&!s){let e=new Error(n);e.event_type="CMP_ERROR",sendError(e),s=!0}t=o,o||Object.keys(r).length||"function"!=typeof e||e(),n&&(t=!0)};return ProperMedia.utils.deepAccess(properSpecialOps,"gppDoesApply")&&!r.gpp&&(r.gpp=!0),ProperMedia.utils.deepAccess(properSpecialOps,"gdprDoesApply")&&!r.gdpr?r.gdpr=!0:ProperMedia.utils.deepAccess(properSpecialOps,"uspcDoesApply")&&!r.uspc&&(r.uspc=!0),r.gpp&&gppConsentModule.loadIfMissing(consentCallback),r.gdpr&&gdprConsentModule.loadIfMissing(consentCallback),r.uspc&&uspConsentModule.loadIfMissing((function(o){if(delete r.uspc,o&&!s){let e=new Error(o);e.event_type="CMP_ERROR",sendError(e),s=!0}e(),o&&(t=!0)})),!0}};return a}(),gppConsent={},gppConsentModule=function(){var e,t=1,r="iab",s="__gpp",o=ProperMedia.utils.deepAccess(properSpecialOps,"gppDoesApply")||!1,a="EU"==ProperMedia.utils.deepAccess(properSpecialOps,"gppSection")&&!1!==ProperMedia.utils.deepAccess(properSpecialOps,"gppDisableAuction")?8:4,n=("EU"==ProperMedia.utils.deepAccess(properSpecialOps,"gppSection")&&ProperMedia.utils.deepAccess(properSpecialOps,"gppDisableAuction"))??!1,d={iab:function(r){let{onSuccess:o,onError:a}=r;const n={};let d=!1;const p=function(){let t=window,r=!1;for(;;){try{if("function"==typeof t[s]){e=t,r=!0;break}}catch(e){}try{if(t.frames.__gppLocator){e=t;break}}catch(e){}if(t===window.top)break;t=t.parent}return{cmpFrame:e,cmpDirectAccess:r}}();e=p.cmpFrame;const l=p.cmpDirectAccess;if(!e)return a("GPP: CMP not found.");const c=l?function(r,o){let{command:a,callback:n,parameter:d,version:p=t}=r;"function"==typeof o?o(e[s](a,n,d,p)):e[s](a,n,d,p)}:function(r,o){let{command:a,callback:p,parameter:l,version:c=t}=r;const u=`${s}Call`;d||(window.addEventListener("message",readPostMessageResponse,!1),d=!0);const g=Math.random().toString(),m={[u]:{command:a,parameter:l,version:c,callId:g}};function readPostMessageResponse(e){const t=`${s}Return`,r="string"==typeof e.data&&e.data.includes(t)?JSON.parse(e.data):e.data;if(r[t]&&r[t].callId){const e=r[t];n.hasOwnProperty(e.callId)&&n[e.callId](e.returnValue)}}n[g]="function"==typeof p?p:o,e.postMessage(m,"*")};const u=l?"Detected GPP CMP API is directly accessible, calling it now...":"Detected GPP CMP is outside the current iframe where Prebid.js is located, calling it now...";properLog.mylog(u),c({command:"addEventListener",callback:function(e,t){if(e)if(properLog.mylog(`Received a ${l?"direct":"postmsg"} response from GPP CMP for event`),"sectionChange"===e.eventName||"loaded"===e.pingData.cmpStatus){if("1.1"===e?.pingData?.gppVersion)return processCmpData(e.pingData,{onSuccess:o,onError:a});c({command:"getGPPData"},(function(e){properLog.mylog(`Received a ${l?"direct":"postmsg"} response from GPP CMP for getGPPData`),processCmpData(e,{onSuccess:o,onError:a})}))}else"error"===e.pingData.cmpStatus&&a("CMP returned with a cmpStatus:error response.  Please check CMP setup.")}})},static:function(e){let{onSuccess:t,onError:r}=e;processCmpData(undefined,{onSuccess:t,onError:r})}};function loadConsentData(e){var t=null,s=0,o=null;function done(r,s,a){if(null!=t&&(clearTimeout(t),t=null),null!=o&&(clearTimeout(o),o=null),a&&properLog.mylog(`${a}`),!0,"function"==typeof e){for(var n=arguments.length,d=new Array(n>3?n-3:0),p=3;p<n;p++)d[p-3]=arguments[p];e(s,"gpp",a,...d)}else s||consentManager.consentReady("gpp",r)}if(properLog.mylog("GPP: CMP gppDoesApply: "+ProperMedia.utils.deepAccess(properSpecialOps,"gppDoesApply")),!ProperMedia.utils.deepAccess(properSpecialOps,"gppDoesApply"))return void done(storeConsentData(void 0),!1,"GPP: GPP does not apply.");if(!Object.keys(d).includes(r))return void done(storeConsentData(void 0),!1,"GPP: CMP framework ("+r+") is not a supported framework.  Aborting consentManagement module and resuming auction.");const p={onSuccess:e=>done(e,!1),onError:function(t){properLog.mylog(t);for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];"function"==typeof e?done(storeConsentData(void 0),n,t,...c):(null!=o&&(clearTimeout(o),o=null),a=ProperMedia.utils.deepAccess(properSpecialOps,"gdprMaxFailCnt")??a,++s<a?o=setTimeout((function(){console.log("GPP: CMP did not load, retrying..."),d[r](p)}),properSpecialOps?.gdprRetryTimeout??500):done(storeConsentData(void 0),n,t,...c))}};d[r](p)}function processCmpData(e,t){let{onSuccess:r,onError:s}=t;null!=e?.applicableSections&&!Array.isArray(e.applicableSections)||null!=e?.gppString&&!ProperMedia.utils.isStr(e.gppString)||null!=e?.parsedSections&&!ProperMedia.utils.isPlainObject(e.parsedSections)?s("CMP returned unexpected value during lookup process."):r(storeConsentData(e))}function storeConsentData(e){return gppConsent={gppString:e?.gppString,fullGppData:e,gppApplies:e?.gppApplies??o,applicableSections:e?.applicableSections||[],parsedSections:e?.parsedSections||{},apiVersion:t},e?.supportedAPIs&&Array.isArray(e.supportedAPIs)&&e.supportedAPIs.forEach((e=>{const[t,r]=e.split(":");p[t]=r})),gppConsent}const p={2:"tcfeuv2",5:"tcfcav1",6:"uspv1",7:"uspnatv1",8:"uspcav1",9:"uspvav1",10:"uspcov1",11:"usputv1",12:"uspctv1"};function checkSharingOptOut(){let e=getConsentByField("SharingNotice"),t=getConsentByField("SharingOptOut"),r=getConsentByField("SharingOptOutNotice");return 2===e||2===r||1===t||0===r&&2===t}function checkKnownChildSensitiveDataConsents(){let e=getConsentByField("KnownChildSensitiveDataConsents")||[0,0];return 1===e[0]||0!==e[1]}function isBasicConsentDenied(){return 1===getConsentByField("checkGpc")||1===getConsentByField("MspaServiceProviderMode")||checkKnownChildSensitiveDataConsents()}function isConsentDenied(){return isBasicConsentDenied()||checkSharingOptOut()||function(){let e=getConsentByField("TargetedAdvertisingOptOutNotice"),t=getConsentByField("TargetedAdvertisingOptOut");return 2===e||1===t||0===e&&2===t}()}function getConsentByField(e){if(gppConsent.gppApplies&&gppConsent.applicableSections&&gppConsent.applicableSections.length)for(var t=0;t<gppConsent.applicableSections.length;t++){let r=getFieldValue(`${p[gppConsent.applicableSections[t]]||"uspnatv1"}.${e}`);if(!1!==r&&null!=r)return r}return!1}function getFieldValue(t){const r=ProperMedia.utils.deepAccess(gppConsent.parsedSections,t);return!1!==r&&null!=r?r:!(!gppConsent.gppApplies||!e||"function"!=typeof e[s])&&e[s]("getField",null,t)}return{loadIfMissing:function(e){Object.keys(gppConsent).length&&gppConsent.gppString?(properLog.mylog("GPP: User consent information already known.  Pulling internally stored information..."),e(!1)):loadConsentData(e)},getFieldValue,loadConsentData,checkSharingOptOut,isConsentDenied,userSyncsDenied:isConsentDenied,enrichEidsDenied:isConsentDenied,transmitEidsDenied:isConsentDenied,checkKnownChildSensitiveDataConsents}}();gppConsentModule.loadConsentData();var uspConsent={},uspConsentModule=function(){var e="iab",t=50,r={usPrivacy:"1NNY"};uspConsent={ccpaApplies:ProperMedia.utils.deepAccess(properSpecialOps,"uspcDoesApply")||!1};var s={iab:function(e,t){var r=(d={},{consentDataCallback:function(r,s){s&&r.uspString&&(d.usPrivacy=r.uspString),d.usPrivacy?processUspData(d,e,t):t("USPC: Unable to get USP consent string.")}}),s={},o=function(){for(var e,t,r=window;!e;){try{if("function"==typeof r.__uspapi){t=r.__uspapi,e=r;break}}catch(e){}try{if(r.frames.__uspapiLocator){e=r;break}}catch(e){}if(r===window.top)break;r=r.parent}return{uspapiFrame:e,uspapiFunction:t}}(),a=o.uspapiFrame,n=o.uspapiFunction;var d;if(!a)return t("USPC: USP CMP not found.");ProperMedia.utils.isFn(n)?(properLog.mylog("USPC: Detected USP CMP is directly accessible, calling it now..."),n("getUSPData",1,r.consentDataCallback)):(properLog.mylog("USPC: Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),function(e,t,r){function readPostMessageResponse(e){var t=e&&e.data&&e.data.__uspapiReturn;t&&t.callId&&void 0!==s[t.callId]&&(s[t.callId](t.returnValue,t.success),delete s[t.callId])}window.__uspapi=function(e,r,o){var a=Math.random()+"",n={__uspapiCall:{command:e,version:r,callId:a}};s[a]=o,t.postMessage(n,"*")},window.addEventListener("message",readPostMessageResponse,!1),window.__uspapi(e,1,r)}("getUSPData",a,r.consentDataCallback))},static:function(e,t){processUspData(undefined,e,t)}};function loadConsentData(o){var a=null,n=!1,d=0,p=null;function done(e,t){if(null!=a&&(clearTimeout(a),a=null),null!=p&&(clearTimeout(p),p=null),n=!0,ProperMedia.utils.isFn(o)){uspConsent.usPrivacy||storeUspConsentData(r);for(var s=arguments.length,d=new Array(s>2?s-2:0),l=2;l<s;l++)d[l-2]=arguments[l];o(t,...d)}else consentManager.consentReady("uspc",e)}if(properLog.mylog("USPC: CMP uspcDoesApply: "+ProperMedia.utils.deepAccess(properSpecialOps,"uspcDoesApply")),ProperMedia.utils.deepAccess(properSpecialOps,"uspcDoesApply"))if(s[e]){var l={onSuccess:done,onError:function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];"function"==typeof o?done(null,t+" Resuming auction without consent data as per consentManagement config.",...a):(null!=p&&(clearTimeout(p),p=null),++d<6?p=setTimeout((function(){s[e](l.onSuccess,l.onError)}),250):done(null,t+" Resuming auction without consent data as per consentManagement config.",...a))}};s[e](l.onSuccess,l.onError),n||(0===t?processUspData(void 0,l.onSuccess,l.onError):a=setTimeout(l.onError.bind(null,"USPC: USPAPI workflow exceeded timeout threshold."),t))}else done(null,"USPC: USP framework ("+e+") is not a supported framework. Aborting consentManagement module and resuming auction.");else done(null,"USPC: USPC does not apply.")}function processUspData(e,t,r){!e||!e.usPrivacy?r("USPC: USPAPI returned unexpected value during lookup process.",e):(storeUspConsentData(e),t(uspConsent))}function storeUspConsentData(e){e&&e.usPrivacy&&(uspConsent.usPrivacy=e.usPrivacy,uspConsent.restrictDataProcessing=!!e.usPrivacy.match(/^\d{1}[\w-]{1}Y[\w-]{1}$/))}return{loadIfMissing:function(e){loadConsentData((function(t){null!=t&&(properLog.mylog(t),ProperMedia.utils.isFn(e)&&e())}))},loadConsentData}}();uspConsentModule.loadConsentData();var gdprConsent={},gdprConsentModule=function(){var e=2,t="iab",r=ProperMedia.utils.deepAccess(properSpecialOps,"gdprDoesApply")||!1,s=!1!==ProperMedia.utils.deepAccess(properSpecialOps,"gdprDisableAuction")?8:4,o=ProperMedia.utils.deepAccess(properSpecialOps,"gdprDisableAuction")??!1,a={iab:function(t,r){function cmpResponseCallback(e,s){properLog.mylog("GDPR: Received a response from CMP. gdprApplies: "+e.gdprApplies+", tcString: "+e.tcString+", eventStatus:"+e.eventStatus),s?!1===e.gdprApplies||"tcloaded"===e.eventStatus||"useractioncomplete"===e.eventStatus?processCmpData(e,t,r):e:r("GDPR: CMP unable to register callback function. Please check CMP setup.")}var s={},o=function(){for(var e,t,r=window;;){try{if("function"==typeof r.__tcfapi){t=r.__tcfapi,e=r;break}}catch(e){}try{if(r.frames.__tcfapiLocator){e=r;break}}catch(e){}if(r===window.top)break;r=r.parent}return{cmpFrame:e,cmpFunction:t}}(),a=o.cmpFrame,n=o.cmpFunction;if(!a)return r("GDPR: CMP not found.");"function"==typeof n?(properLog.mylog("GDPR: Detected CMP API is directly accessible, calling it now..."),n("addEventListener",e,cmpResponseCallback)):(properLog.mylog("GDPR: Detected CMP is outside the current iframe where ad project is located, calling it now..."),function(t,r,o){var a="__tcfapi",n=a+"Call";function readPostMessageResponse(e){var t=a+"Return",r="string"==typeof e.data&&e.data.includes(t)?ProperMedia.utils.safeJsonParse(e.data):e.data;if(r[t]&&r[t].callId){var o=r[t];void 0!==s[o.callId]&&s[o.callId](o.returnValue,o.success)}}window[a]=function(e,t,o,a){var d=Math.random()+"",p={[n]:{command:e,version:t,parameter:a,callId:d}};s[d]=o,r.postMessage(p,"*")},window.addEventListener("message",readPostMessageResponse,!1),window[a](t,e,o)}("addEventListener",a,cmpResponseCallback))},static:function(e,t){processCmpData(undefined,e,t)}};function loadConsentData(e){var r=null,n=0,d=null;function done(t,s,o){if(null!=r&&(clearTimeout(r),r=null),null!=d&&(clearTimeout(d),d=null),!0,s=properSpecialOps.gdprCancelAuction??s,"function"==typeof e){for(var a=arguments.length,n=new Array(a>3?a-3:0),p=3;p<a;p++)n[p-3]=arguments[p];e(s,"gdpr",o,...n)}else s||consentManager.consentReady("gdpr",t)}if(properLog.mylog("GDPR: CMP gdprDoesApply: "+ProperMedia.utils.deepAccess(properSpecialOps,"gdprDoesApply")),ProperMedia.utils.deepAccess(properSpecialOps,"gdprDoesApply"))if(Object.keys(a).includes(t)){var p={onSuccess:function(e){done(e,!1)},onError:function(r){properLog.mylog(r);for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];"function"==typeof e?done(null,o,r,...c):(null!=d&&(clearTimeout(d),d=null),s=ProperMedia.utils.deepAccess(properSpecialOps,"gdprMaxFailCnt")??s,++n<s?d=setTimeout((function(){a[t](p.onSuccess,p.onError)}),properSpecialOps?.gdprRetryTimeout??500):(storeConsentData(void 0),done(null,o,r,...c)))}};a[t](p.onSuccess,p.onError)}else done(null,!1,"GDPR: CMP framework ("+t+") is not a supported framework.  Aborting consentManagement module and resuming auction.");else done(null,!1,"GDPR: GDPR does not apply.")}function processCmpData(e,s,o){"static"===t&&(e=e.getTCData),!function(){var t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:r,s=e&&e.tcString;return!("boolean"==typeof t&&(!0!==t||s&&ProperMedia.utils.isStr(s)))}()?s(storeConsentData(e)):o("GDPR: CMP returned unexpected value during lookup process.")}function storeConsentData(t){return gdprConsent.consentString=t?t.tcString:void 0,gdprConsent.vendorData=t||void 0,gdprConsent.gdprApplies=t&&"boolean"==typeof t.gdprApplies?t.gdprApplies:r,t&&t.addtlConsent&&ProperMedia.utils.isStr(t.addtlConsent)&&(gdprConsent.addtlConsent=t.addtlConsent),gdprConsent.apiVersion=e,gdprConsent}return{loadIfMissing:function(e){Object.keys(gdprConsent).length&&gdprConsent.consentString?(properLog.mylog("GDPR: User consent information already known.  Pulling internally stored information..."),e(!1)):loadConsentData(e)},loadConsentData,hasPurpose1Consent:function(){return!gdprConsent.gdprApplies||!0===ProperMedia.utils.deepAccess(gdprConsent,"vendorData.purpose.consents.1")},hasPurpose4Consent:function(){return!gdprConsent.gdprApplies||!0===ProperMedia.utils.deepAccess(gdprConsent,"vendorData.purpose.consents.4")}}}();gdprConsentModule.loadConsentData();var gdprEnforcement=function(){var e,t,r,s={},o={purpose1:{id:1,name:"storage"},purpose2:{id:2,name:"basicAds"},purpose4:{id:4,name:"personalisedAds"},purpose7:{id:7,name:"measurement"}},a=[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["pubcid"]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]},{purpose:"personalisedAds",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]}],n=[],d=[],p={gam:755};function getGvlid(e){var t,r=null;if(e){var s="string"==typeof e?e:e.name;r=function(e){var t=null;if(e){var r=bidderToAdapterName(e);t=ProperMedia.utils.deepAccess(properOps,"bidder_info."+e+".gvlid")||ProperMedia.utils.deepAccess(properOps,"bidder_info."+r+".gvlid")||p[e]||null}return t}(s)||(t=e,ProperMedia.utils.deepAccess(userIdAdapters,t+".storage.gvlid")||null)||null}return r}function validateRules(e,t,r){var s=o[Object.keys(o).filter((t=>o[t].name===e.purpose))[0]].id;if(-1!==(e.vendorExceptions||[]).indexOf(t))return!0;var a=!1,n=!1,d=!1;if(gppConsent.gppApplies&&gppConsent.gppString&&"EU"==ProperMedia.utils.deepAccess(properSpecialOps,"gppSection")){let e=gppConsentModule.getFieldValue("PurposeConsents")||[],t=gppConsentModule.getFieldValue("VendorConsents")||[],o=gppConsentModule.getFieldValue("PurposeLegitimateInterests")||[];a=e[s],n=t[r],d=o[s]}else gdprConsent.gdprApplies&&gdprConsent.consentString&&(a=ProperMedia.utils.deepAccess(gdprConsent,"vendorData.purpose.consents."+s),n=ProperMedia.utils.deepAccess(gdprConsent,"vendorData.vendor.consents."+r),d=ProperMedia.utils.deepAccess(gdprConsent,"vendorData.purpose.legitimateInterests."+s));var p=!1===e.enforcePurpose||!0===a,l=!1===e.enforceVendor||!0===n;return 2===s?p&&l||!0===d:p&&l}s.deviceAccessEnforcement=function(t,r){var s;gdprConsent&&gdprConsent.gdprApplies||gppConsent&&gppConsent.gppApplies&&"EU"==ProperMedia.utils.deepAccess(properSpecialOps,"gppSection")?(t=getGvlid(r)||t,validateRules(e,r,t)?s=!0:(r&&properLog.mylog("TCF2 denied device access for "+r),s=!1,n.push(r))):s=!0;return s},s.userSyncEnforcement=function(t){var r;if(gdprConsent&&gdprConsent.gdprApplies||gppConsent&&gppConsent.gppApplies&&"EU"==ProperMedia.utils.deepAccess(properSpecialOps,"gppSection")){var s=getGvlid(t),o=validateRules(e,t,s);o?r=o:(r=!1,properLog.mylog("User sync not allowed for "+t),n.push(t))}else r=!0;return r},s.userIdEnforcement=function(t){return gdprConsent&&gdprConsent.gdprApplies||gppConsent&&gppConsent.gppApplies&&"EU"===ProperMedia.utils.deepAccess(properSpecialOps,"gppSection")?{submodules:t.map((function(t){if(t.name&&userIdAdapters[t.name]){const r=userIdAdapters[t.name],s=ProperMedia.utils.deepAccess(r,"storage.gvlid")||null,o=ProperMedia.utils.deepAccess(r,"name")||"";if(validateRules(e,o,s))return t;properLog.mylog("User denied permission to fetch user id for "+o+" User id module"),n.push(o)}})).filter((function(e){return e})),hasValidated:!0}:{submodules:t}},s.makeBidRequestEnforcement=function(e){if((gdprConsent&&gdprConsent.gdprApplies||gppConsent&&gppConsent.gppApplies&&"EU"==ProperMedia.utils.deepAccess(properSpecialOps,"gppSection"))&&!1!==ProperMedia.utils.deepAccess(properSpecialOps,"gdprDisableBidsOnBasicAds")&&!1!==ProperMedia.utils.deepAccess(properSpecialOps,"gppDisableBidsOnBasicAds")){var r=getGvlid(e);if(-1!==d.indexOf(e))return!1;var s=!!validateRules(t,e,r);return s||(properLog.mylog("TCF2 blocked auction for "+e),d.push(e)),s}return!0};var hasPurpose1=function(e){return e.purpose===o.purpose1.name},hasPurpose2=function(e){return e.purpose===o.purpose2.name},hasPurpose4=function(e){return e.purpose===o.purpose4.name},hasPurpose7=function(e){return e.purpose===o.purpose7.name};return s.setEnforcementConfig=function(s){var o=ProperMedia.utils.deepAccess(s,"gdpr.rules");o?r=o:(properLog.mylog("TCF2: enforcing P1 and P2 by default"),r=a),ProperMedia.utils.isArray(r)&&(e=r.find(hasPurpose1),t=r.find(hasPurpose2),purpose4Rule=r.find(hasPurpose4),r.find(hasPurpose7),e||(e=a[0]),t||(t=a[1]),purpose4Rule||(purpose4Rule=a[2]))},s}(),confiantWrapper=function(){var e={cdnHost:"cdn.clarium.io",confiantId:"TzdoClhg0h30W2CCYiFFb2rl5ww",mapBlockingType:{1:{type:"manual",desc:"Deprecated"},2:{type:"creative",desc:"Creative-based detection"},3:{type:"provider_security",desc:"Domain-based detection for unsafe domains"},4:{type:"banned_domain",desc:"Domain-based detection for banned domains"},5:{type:"provider_ibv",desc:"Domain-based detection for in-banner-video"},6:{type:"unsafejs",desc:"Javascript-based detection for unsafe ads"},7:{type:"hrap",desc:"Domain-based detection for high risk ad platform domains"}},loadDFPTag:function(e){let t;if(properLog.mylog("Confiant loadDFPTag"),e=e||window,this.confiantId=ProperMedia.utils.deepAccess(properSpecialOps,"confiant.accountId")||ProperMedia.utils.deepAccess(properOps,"confiant.accountId")||this.confiantId,2==ProperMedia.utils.deepAccess(properSpecialOps,"confiant.version")){var r=e;r._clrm=r._clrm||{},r._clrm.gpt={propertyId:this.confiantId,confiantCdn:this.cdnHost,sandbox:0,mapping:"W3siaSI6MiwidCI6Int7b319Ont7d319eHt7aH19IiwicCI6MCwiRCI6MSwiciI6W119LHsiaSI6NiwidCI6Int7Y299fTp7e3d9fXh7e2h9fSIsInAiOjUwLCJEIjowLCJyIjpbeyJ0IjoiZXgiLCJzIjpudWxsLCJ2IjoiY28ifV19XQ==",activation:"||neq|NDM5NjA3NDE2,||neq|NDk4NzQ4NDU2,||neq|NTExMjA0NTc2,||neq|ODA2NzU4NTc2,||neq|ODA2NzYxMjE2,||neq|ODEyODU5NjE2,||neq|ODEyODg1Mjk2,||neq|MTU2MTIwNzQ1Ng==",callback:TraceKit.wrap(this.callback.bind(this))},t=document.createElement("script"),t.async=!0,t.src="//"+this.cdnHost+"/gpt/a/wrap.js?v2_1",e.document.getElementsByTagName("head")[0].appendChild(t)}else e.confiant=e.confiant||{},e.confiant.callback=TraceKit.wrap(this.callback.bind(this)),t=e.document.createElement("script"),t.async=!0,t.src="https://cdn.confiant-integrations.net/"+this.confiantId+"/gpt_and_prebid/config.js",e.document.getElementsByTagName("head")[0].appendChild(t)},callback:function(e,t,r,s,o,a){properLog.mylog("Confiant Callback");var n={},d={cpm:0,size:"1x1",bidder:"dfp",blockData:arguments};if(a&&void 0!==a.dfp){var p=a.dfp.ad||null,l=a.dfp.y||null;p==properOps.amazon_advertiser?d.bidder="a9":p==properOps.adsense_advertiser?d.bidder="adsense":p!=properOps.google_advertiser&&1!=p&&0!=p&&null!=p&&null==l||(d.bidder="adx");if((n=ProperMedia.utils.extractSlotName(a.dfp.s)||properPage.getSlotFromPageObjectByAdUnitPath(a.dfp.A)||"")&&n instanceof slotObj){if(d.size=n.size,"adx"==d.bidder||"adsense"==d.bidder){var c=n.interstitial?"interstitial":creative_size,u=n.getFloor(c);n.dfp_bid_price&&parseFloat(n.dfp_bid_price)>u?d.cpm=parseFloat(n.dfp_bid_price)+.01:d.cpm=parseFloat(u)+.01}if(r&&n.getWinningBid())return void showWinningAd(n)}else properLog.mylog("Confiant DFP Callback: Cannnot determin slot.")}this.trackBadAd(d)},wrapTag:function(e,t,r){properLog.mylog("Confiant wrapTag: "+e.name),this.confiantId=ProperMedia.utils.deepAccess(properSpecialOps,"confiant.accountId")||ProperMedia.utils.deepAccess(properOps,"confiant.accountId")||this.confiantId;var s=TraceKit.wrap((function(e,t,r,s,o){function f(e){return(l(e)||"")[m]("/","_")[m]("+","-")}var a=t.bidder,n=t.size,d=e.parentWindow||e.defaultView,p=d.JSON,l=d.btoa,c=d.encodeURIComponent;if(!p||!l)return!1;var u="script",g="src",m="replace",_="error",h="stringify",b="write",v="https://"+r+"/?wrapper="+c(s)+"&tpid=",y={k:{hb_bidder:[a],hb_size:[n]}};return function(){var r=f(s+"/"+y.k.hb_bidder[0]+":"+y.k.hb_size[0]),a={wh:r,wd:p.parse(p[h](y)),wr:0};!function(t,r,s){var o=v+c(t)+"&d="+r,a="err__"+1*new Date;d[a]=s;var n="<"+u+" on"+_+'="void('+a+'())" '+g+'="'+o+'" type="text/java'+u+'" ></'+u+">";e[b](n)}(r,f(p[h](a)),(function(){e[b](t.ad)}));var n={prebid:{adId:t.adId,cpm:t.cpm}},l={d:a,t:t.ad,cb:o,id:n};d[s]={},d[s][r]=l}(),e.close(),!0})),o=TraceKit.wrap((function(t,s,o,a,n,d){var p={cpm:r.price,size:r.size,bidder:r.bidder,blockData:arguments};o&&(properLog.mylog("Confiant blocked ad: "+e.name+" - "+p.bidder),e.winning_ad={},e.getWinningBid())?showWinningAd(e):this.trackBadAd(p)}));s(t,{bidder:r.bidder,size:r.size,ad:r.adcode},this.cdnHost,this.confiantId,o.bind(this))||(properLog.mylog("Confiant failed: "+e.name),t.write(ad.adcode))},trackBadAd:function(e){try{var t=ProperMedia.utils.deepAccess(e,"blockData.0")||"",r={client_timestamp:(new Date).getTime(),event_type:"rogue_ad",event_id:ProperMedia.utils.generateUUID(),page_id:ProperMedia.utils.generateUUID(),session_id:ProperMedia.utils.generateUUID(),bidder:e.bidder||"",user_id:ProperMedia.utils.validateValue(properUser.pubcid,{type:"string"}),publisher:ProperMedia.utils.validateValue(properOps.site_name,{type:"string"}),rtp_file_version:ProperMedia.utils.validateValue(properOps.rtp_file_version,{type:"string"}),ad_project_tag:ProperMedia.utils.validateValue(properOps.rtp_file_revision,{type:"string"}),page_url:getPageUrl()||"",in_iframe:1!==properOps.run_dfp_in_window,is_https:"https:"==document.location.protocol,user_agent:navigator.userAgent||"",stack_trace:JSON.stringify(e),error_message:ProperMedia.utils.deepAccess(this,"mapBlockingType."+t+".desc")||"Confiant Flagged Ad",error_name:ProperMedia.utils.deepAccess(this,"mapBlockingType."+t+".type")||"rogue_ad"};properPage.uuid&&""!==properPage.uuid&&(r.page_id=properPage.uuid),ProperMedia.utils.deepAccess(properSession,"sessionData.uuid")&&(r.session_id=properSession.sessionData.uuid),$.ajax({url:"https://events.proper.io/api/event",requestType:"fetch",method:"POST",data:JSON.stringify(r),withCredentials:!1,success:function(e){console.log("Proper exception logged successfully.")},error:function(){console.error("Unable to log Proper exception.")}})}catch(e){console.error("Error sending exception data"),console.error(e)}}};return e}(),adLightningWrapper={clientId:"properio",loadDFPTag:function(e){e=e||window,this.clientId=ProperMedia.utils.deepAccess(properOps,"adlightning.clientId")||ProperMedia.utils.deepAccess(properSpecialOps,"adlightning.clientId")||this.clientId;var t=e.document.createElement("script");t.async=!0,t.src="https://tagan.adlightning.com/"+this.clientId+"/op.js",e.document.getElementsByTagName("head")[0].appendChild(t),window.addEventListener("message",(function(e){var t=e.data;if("ADL_BLOCKED"===t.message&&t.adUnit){var r=t.adUnit.split("/").pop(),s=properPage.getSlotFromPageObject(r)||properPage.getSlotFromPageObject(r.replace(/_\d+$/,""));if(s){var o=new Error(s.name+" data:"+JSON.stringify(t));o.event_type="ADL_BLOCKED",sendError(o),properLog.mylog("ADL Blocked Ad for "+s.name),s.adl_blocked||(s.adl_blocked=!0,s.getWinningBid(),showWinningAd(s))}}}))},wrapTag:function(e,t,r){properLog.mylog("Running AdLightning Wrapper: "+e.name);var s=encodeURIComponent(r.adcode),o=r.size.split("x"),a='<script> var urlEncodedUrl = "%%ENCODED_AD_TAG%%";<\/script>                <script src="https://tagan.adlightning.com/%%CLIENT_ID%%/blacklist_script.js" type="text/javascript"><\/script>                <script src="https://tagan.adlightning.com/%%CLIENT_ID%%/blocking_script.js" type="text/javascript"><\/script>                <script type="text/javascript">                    function createTagDetails(){                        var tagDetails = {};                        tagDetails.w = "%%WIDTH%%";                        tagDetails.h = "%%HEIGHT%%";                        tagDetails.adServerDetails = {advertiserId: "%%ADVERTISER_ID%%", campaignId: "%%CAMPAIGN_ID%%", creativeId: "%%CREATIVE_ID%%", lineitemId: "%%LINEITEM_ID%%", adServer: "%%AD_SERVER%%"};                        tagDetails.au = "%%AD_UNIT_ID%%";                        tagDetails.markupInDom = true;                        tagDetails.refreshMessage = "true";                        var timeBase36 = Date.now().toString(36);                        var random = Math.random().toString(36).substr(2).split("")                                    .map(function (c) {                                    return (Math.random() < 0.5 ? c.toUpperCase() : c); }) .join("");                        tagDetails.currentTagId="adltag_" + timeBase36 + "_" + random;                    return tagDetails;                    }                    var random = "" + Math.round(Math.random() * 1e8);                    var clientId = "%%CLIENT_ID%%";                    var site_id = random + "_" + clientId;                    window[site_id]={};                    window[site_id].tagDetails=createTagDetails();                    !function(){"use strict";"blocker"in window||(window.blocker=function(e,n,t,o,r){function i(e){var n=window.Request,t=n&&n.prototype||{};if(navigator&&navigator.sendBeacon)navigator.sendBeacon(e);else if(window.fetch){var o={method:"GET"};"keepalive"in t&&(o.keepalive=!0),window.fetch(e,o)}else{var r=new Image(1,1);"loading"in r&&(r.loading="eager"),r.src=e}}if((r=r||{}).bw){if(Math.random()<.1)for(var a="undefined"!=typeof btoa?btoa:String,x="https://"+clientId+"-tagan.adlightning.com",c=window[e]?window[e].tagDetails:{},d={siteId:clientId,url:window.top.location.href,tagDetails:c,errorData:null,errorMethod:"missing_blocker"},f=function(){var t=(new Date).getTime();"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now());return"xxxxxxxxxxxxxxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}(),l=encodeURIComponent(JSON.stringify(d)).replace(/%([0-9A-F]{2})/g,function(e,n){return String.fromCharCode("0x"+n)}),g=encodeURIComponent(a(l)),w=8e3-(x.length+100),u=Math.ceil(g.length/w),s=0,p=1;p<=u;p+=1){i(x+"/error?d="+g.substr(s,w)+"&i="+p+"-"+u+"&t="+c.currentTagId+"&r="+f+"&c="+clientId+"&z=1"),s+=w}document.write(n)}})}();                    blocker(site_id, decodeURIComponent(urlEncodedUrl) + "\x3c!--ADL_WRAPPED--\x3e", false, window, {bw:true});                <\/script>'.replace(/%%ENCODED_AD_TAG%%/g,s).replace(/%%CLIENT_ID%%/g,this.clientId).replace(/%%WIDTH%%/g,o[0]).replace(/%%HEIGHT%%/g,o[1]).replace(/%%ADVERTISER_ID%%/g,r.adid).replace(/%%CAMPAIGN_ID%%/g,r.cid).replace(/%%CREATIVE_ID%%/g,r.crid).replace(/%%LINEITEM_ID%%/g,"").replace(/%%AD_SERVER%%/g,"proper").replace(/%%AD_UNIT_ID%%/g,e.name);t.document.open(),t.document.write(a),t.document.close()},addReportAd:function(e){try{var t=e.slot.getSlotElementId(),r=ProperMedia.utils.makeid(10)+"-"+t,s=document.createElement("div");s.id=r,s.className="adl-report-ad-container-parent";var o=document.createElement("div");o.className="adl-report-ad-container";var a={adlAction:"createUserReportButton",selector:"#"+r,uniqueId:e.creativeId||e.sourceAgnosticCreativeId,targetAd:t};s.appendChild(o);var n=document.getElementById(t),d=n.parentElement.getElementsByClassName("adl-report-ad-container-parent");d&&d.length&&d[0].remove(),n&&(n.insertAdjacentElement("afterend",s),window.postMessage(a,"*"))}catch(e){properLog.mylog("Error creating Ad Lightning report ad button. "+JSON.stringify(e))}}},geoEdgeWrapper={wrapTag:function(e,t,r){properLog.mylog("Running geoEdge Wrapper: "+e.name);var s='<div id="grumi-container"><script type="text/javascript" nonce="!headerNonce!">!function(d,i){var p={wver:"1.1.5",wtype:"dfp",key:"caae3efc-52af-4938-bc92-44182723e3e2",meta:{adup:"%%ADUNIT%%",dest:"%%DEST_URL_ESC%%",w:"%%WIDTH%%",h:"%%HEIGHT%%",li:"%eaid!",adv:"%eadv!",ord:"%ebuy!",cr:"%ecid!",ygIds:"%_ygIds!",aduid:"%epid!",haduid:"%esid!",isAfc:"%_isAfc!",isAmp:"%_isAmp!",qid:"%qid!",cust_imp:"%cust_imp!",cust1:"%cust1!",cust2:"%cust2!",cust3:"%cust3!",caid:"%caid!",di:"%DEMAND_ID!",dn:"%DEMAND_NAME!",dcid:"%DEMAND_CREATIVE_ID!",pid:"%PUBLISHER_ID!",pn:"%PUBLISHER_NAME!",adElId:"%_adElId!"},sp:"dfp",cfg:{},pbAdId:"%%PATTERN:hb_adid%%",pbAdIdAst:"%%PATTERN:hb_adid_appnexusAst%%",pbBidder:"%%PATTERN:hb_bidder%%",hbPb:"%%PATTERN:hb_pb%%",hbCid:"%_hbcid!",site:"%%SITE%%",pimp:"%_pimp%"};window.grumi=p}();<\/script><template style="display: none;" id="template0"><xmp style="display: none;" id="xmp0">',o=(s=s.replace(/%DEMAND_ID!/g,r.bidder).replace(/%DEMAND_NAME!/g,r.bidder).replace(/%DEMAND_CREATIVE_ID!/g,r.crid).replace(/%PUBLISHER_ID!/g,properOps.site_name).replace(/%PUBLISHER_NAME!/g,properOps.site_name))+r.adcode+'</xmp></template><script type="text/javascript" nonce="!footerNonce!">!function(t){var o=window.grumi.key,r=window.grumi,e=r&&r.wtype&&"gpt"===r.wtype,n=window.onerror,i=1*new Date,a=navigator.userAgent&&navigator.userAgent.match(/\\b(MSIE |Trident.*?rv:|Edge\\/)(\\d+)/),w=e&&!a;function d(){var e=function(){for(var e,n=document.getElementsByTagName("template"),t=n.length-1;0<=t;t--)if("template0"===n[t].id){e=n[t];break}return e}();return e.content?e.content.getElementById?e.content.getElementById("xmp0"):e.content.childNodes[0]:e.getElementsByTagName("xmp")[0]}function u(){var e=d();return e&&e.innerHTML}function c(e,n){n=n||!1,top.postMessage&&top.postMessage({evType:e||"",key:r.key,adup:r.meta.adup,html:window.grumi?window.grumi.tag:"",el:r.meta.adElId,refresh:n},"*")}var m=!1;function g(e,n){if(!m){m=!0;var t="",o=a&&"complete"===document.readyState;window.grumi&&(window.grumi.fsRan=!0,t=window.grumi.tag),o||(t||(t=u()),w&&window.document.open(),window.document.write(t),window.document.close()),((n=n||!1)||o)&&c(e,o)}}function l(e,t){return function(){var n=setTimeout(function(){var e=document.getElementById(i);e&&null===function(e){if(void 0!==e.nextElementSibling)return e.nextElementSibling;for(var n=e.nextSibling;n&&1!==n.nodeType;)n=n.nextSibling;return n}(e)&&t&&t(),clearTimeout(n)},e)}}l(5e3,function(){g()})(),l(2e3,function(){c("slwCl")})(),window.grumi.tag=u(),window.grumi.scriptHost=t,window.grumi.pbGlobal=window.grumi.cfg&&window.grumi.cfg.pbGlobal||"pbjs",window.grumi.onerror=n,window.parent&&window.parent.postMessage&&window.parent.postMessage({iw:!0,key:r.key,adup:r.meta.adup,el:r.meta.adElId},"*"),function(){var e=document.createElement("script");e.type="text/javascript",e.src=t+o+"/grumi.js",e.className="rm",e.id=i,w&&(e.async=!0);var n="_"+1*new Date;window[n]=function(){g("netErr",!0)},window.grumi.start=1*new Date;try{window.document.write(e.outerHTML.replace(\'class="rm"\',\'onerror="\'+n+\'();"\'))}catch(e){g()}}(),window.onerror=function(e){"function"==typeof n&&n.apply(this,arguments),l(0,g)(),window.onerror=n}}(("http"===window.location.protocol.substr(0,4)?window.location.protocol:"https:")+"//rumcdn.geoedge.be/");<\/script></div>';t.open(),t.write(o),t.close()}},bidAdapters={},userIdAdapters={},audiencePixels={networks:{}},properOps=new optionsObj,properSession=new sessionObj,properDevice=new deviceObj,properUser=new userObj,cookieMatching=new cookieMatchingObj,properPage=new pageObj,properAdPool=new adPoolObj,debugObj=new debugConsole,thirtyThreeAcrossIdAdapter=function(){const e="thirtyThreeAcrossId",t="https://lexicon.33across.com/v1/envelope";function thirtyThreeAcrossId(){this.name=e,this.eid_name="33acrossId",this.source="33across.com",this.atype=1,this.config={enabled:!1,pid:null},this.storage={type:"localstorage",name:"33acrossId",expiresInDays:90,refreshInSeconds:28800,gvlid:58},this.idObj=null,this.callback=null}return thirtyThreeAcrossId.prototype.calculateQueryStringParams=function(){const e=uspConsent&&uspConsent.usPrivacy?uspConsent.usPrivacy:"",t=Boolean(gdprConsent.gdprApplies),r={pid:this.config.pid,gdpr:Number(t),src:"pbjs",ver:properOps.prebid_version};return e&&(r.us_privacy=e),t&&(r.gdpr_consent=gdprConsent.consentString||""),r},thirtyThreeAcrossId.prototype.getValue=function(){return ProperMedia.utils.deepAccess(this,"idObj."+this.eid_name+".envelope")||void 0},thirtyThreeAcrossId.prototype.decode=function(e){return{[this.eid_name]:{envelope:e}}},thirtyThreeAcrossId.prototype.getId=function(r){if("string"!=typeof this.config.pid)return void properLog.mylog(`${e}: Submodule requires a partner ID to be defined`);const{pid:s,apiUrl:o=t}=this.config;return{callback:function(t){let r=this.calculateQueryStringParams();$.ajax({url:o+"?"+ProperMedia.utils.formatQueryString(r),method:"GET",timeout:1e4,success:function(r){let s;try{s=function(t){if(t?.data?.envelope)return t.data.envelope;properLog.mylog(`${e}: No envelope was received`)}(ProperMedia.utils.safeJsonParse(r))}catch(t){properLog.mylog(`${e}: ID reading error:`+t)}t(s)}.bind(this),error:function(r){properLog.mylog(`${e}: ID error response`,r),t()}})}}},thirtyThreeAcrossId}();userIdAdapters.thirtyThreeAcrossId=new thirtyThreeAcrossIdAdapter;var verizonMediaIdAdapter=function(){var e="__PIXEL_ID__",t="https://ups.analytics.yahoo.com/ups/"+e+"/fed";function verizonMediaId(){this.name="verizonMediaId",this.eid_name="connectid",this.source="yahoo.com",this.emailHash="",this.atype=3,this.config={enabled:!1,pixelId:58491},this.storage={type:"localstorage",name:"connectid",expiresInDays:14,gvlid:25},this.idObj=null,this.callback=null}function isEUConsentRequired(e){return!(!e||!e.gdprApplies)}function userHasOptedOut(){try{return"1"===localStorage.getItem("connectIdOptOut")}catch{return!1}}return verizonMediaId.prototype.initialize=function(e){ProperMedia.utils.deepAccess(e,"emailHashes.sha256")&&(this.emailHash=e.emailHashes.sha256)},verizonMediaId.prototype.getValue=function(){return this.idObj||void 0},verizonMediaId.prototype.decode=function(e){if(!userHasOptedOut())return"object"==typeof e&&(e.connectid||e.vmuid)?e.connectid||e.vmuid:void 0},verizonMediaId.prototype.getId=function(r){if(!userHasOptedOut()){if((this.emailHash||properUser.pubcid)&&this.config.pixelId){var s={v:"1","1p":"1",url:properPage.url.split("?")[0],puid:properUser.pubcid,pixelId:this.config.pixelId,gdpr:isEUConsentRequired(gdprConsent)?"1":"0",gdpr_consent:isEUConsentRequired(gdprConsent)?gdprConsent.consentString:"",us_privacy:uspConsent&&uspConsent.usPrivacy?uspConsent.usPrivacy:""};this.emailHash&&(s.he=this.emailHash),gppConsent&&(s.gpp=`${gppConsent.gppString?gppConsent.gppString:""}`,Array.isArray(gppConsent.applicableSections)&&(s.gpp_sid=gppConsent.applicableSections.join(",")));var o=t.replace(e,this.config.pixelId)+"?"+ProperMedia.utils.formatQueryString(s);return{callback:function(e){$.ajax({url:o,method:"GET",success:function(t){var r;if(t)try{r=ProperMedia.utils.safeJsonParse(t)}catch(e){properLog.mylog(e)}e(r)}.bind(this),error:function(t){properLog.mylog("VerizonMediaId - ID fetch encountered an error: "+JSON.stringify(t)),e()}})}}}properLog.mylog("The verizonMediaId submodule requires userIdData.emailHash.sha256 and pixelId parameters to be defined.")}},verizonMediaId}();userIdAdapters.verizonMediaId=new verizonMediaIdAdapter;var liveRampAdapter=function(){function liveramp(){this.name="liveRampATS",this.eid_name="idl_env",this.envelope="",this.email="",this.emailHashes=[],this.source="liveramp.com",this.atype=3,this.config={enabled:!1,placementID:72,atsEnabled:!0,atsType:"standalone",configurationID:"2c589105-096d-47ac-867a-291df435d833",launchpadScript:""},this.storage={type:"cookie",name:"idl_env",expiresInDays:5,gvlid:97},this.idObj=null,this.callback=null,this.atsLoaded=null,this.atsCallback=null,this.getIdCalled=!1,this.atsCalled=!1,this.excludeEid=!0}return liveramp.prototype.initialize=function(e){if(e.email?this.email=e.email:ProperMedia.utils.deepAccess(properSpecialOps,"liveramp_email")?this.email=ProperMedia.utils.deepAccess(properSpecialOps,"liveramp_email"):properStorage.getCookie("proper_lre",{moduleName:this.name,gvlid:this.storage.gvlid})&&(this.email=properStorage.getCookie("proper_lre",{moduleName:this.name,gvlid:this.storage.gvlid})),this.email&&(this.config.atsEnabled=!0,ProperMedia.utils.isBase64(this.email)&&(this.email=ProperMedia.utils.b64DecodeUnicode(this.email))),this.config.urlParameter&&ProperMedia.utils.deepAccess(properPage,"get_vars."+this.config.urlParameter)){var t=properPage.get_vars[this.config.urlParameter];t.includes("@")?(this.email=t,this.config.urlHashType="email"):32==t.length?this.config.urlHashType="md5":40==t.length?this.config.urlHashType="sha1":64==t.length&&(this.config.urlHashType="sha256"),t&&this.config.urlHashType&&"email"!=this.config.urlHashType&&!ProperMedia.utils.deepAccess(e,"emailHashes."+this.config.urlHashType)&&ProperMedia.utils.deepSetValue(e,"emailHashes."+this.config.urlHashType,t)}this.config.cssSelectors=ProperMedia.utils.isStr(this.config.cssSelectors)?this.config.cssSelectors.split(","):[],ProperMedia.utils.deepAccess(e,"emailHashes")?(this.config.atsEnabled=!0,this.emailHashes=ProperMedia.utils.objectValues(ProperMedia.utils.deepAccess(e,"emailHashes"))||[]):ProperMedia.utils.deepAccess(properSpecialOps,"liveramp_emailHashes")&&(this.config.atsEnabled=!0,this.emailHashes=ProperMedia.utils.objectValues(ProperMedia.utils.deepAccess(properSpecialOps,"liveramp_emailHashes"))||[]),this.config.atsEnabled&&this.loadAtsScript()},liveramp.prototype.runATS=function(e){this.config.atsEnabled=!0,e&&(this.email=e),this.atsLoaded?this.atsOnLoad():this.loadAtsScript()},liveramp.prototype.atsOnLoad=function(){this.atsLoaded=!0;var e={};this.email?(e.type="email",e.id=this.email.toLowerCase().trim()):this.emailHashes&&this.emailHashes.length&&(e.type="emailHashes",e.id=this.emailHashes),properLog.mylog("liveRamp: ATS params: "+JSON.stringify(e)),window.top.ats?.setAdditionalData?.(e),this.getIdCalled&&!this.atsCalled&&this.callAts()},liveramp.prototype.loadAtsScript=function(){window.addEventListener("envelopeModuleReady",this.atsOnLoad.bind(this));const e=document.createElement("script");if("launchpad"===this.config.atsType){if(!this.config.configurationID)return void sendError({name:"liveramp error",message:"No configurationID provided for atsType launchpad"});e.type="text/javascript",e.async=!0,e.src=`https://launchpad-wrapper.privacymanager.io/${this.config.configurationID}/launchpad-liveramp.js`,window.top.document.head.appendChild(e)}else if("standalone"===this.config.atsType){if(!this.config.configurationID)return void sendError({name:"liveramp error",message:"No configurationID provided for atsType standalone"});e.type="text/javascript",e.async=!0,e.src=`https://ats-wrapper.privacymanager.io/ats-modules/${this.config.configurationID}/ats.js`,window.top.document.head.appendChild(e)}else if("script"===this.config.atsType){if(!this.config.launchpadScript)return void sendError({name:"liveramp error",message:"No launchpadScript provided for atsType script"});const e=(new DOMParser).parseFromString(this.config.launchpadScript,"text/html").querySelectorAll("script, link");for(const t of e){const e=document.createElement(t.tagName);for(const r of t.attributes)e.setAttribute(r.name,r.value);window.top.document.head.appendChild(e)}}},liveramp.prototype.decode=function(e){return e||void 0},liveramp.prototype.getValue=function(){return this.idObj||void 0},liveramp.prototype.getId=function(){this.getIdCalled=!0;return{callback:function(e){this.atsCallback=e,this.config.atsEnabled?this.callAts():this.getEnvelope()}}},liveramp.prototype.callAts=function(){if(window.top.ats&&this.getIdCalled&&!this.atsCalled){this.atsCalled=!0,properLog.mylog("liveRamp: ATS exists!");let e=!1;const envelopeCallback=function(t){t?(properLog.mylog("liveRamp: An envelope can be retrieved from ATS!"),this.setEnvelopeSource(!0),this.atsCallback(ProperMedia.utils.safeJsonParse(t).envelope||"")):(e||(window.addEventListener("lrEnvelopePresent",function(){window.top.ats.retrieveEnvelope(envelopeCallback.bind(this))}.bind(this)),e=!0),this.getEnvelope())};window.top.ats.retrieveEnvelope(envelopeCallback.bind(this))}},liveramp.prototype.getEnvelope=function(){if(properStorage.getCookie("_lr_retry_request",{moduleName:this.name,gvlid:this.storage.gvlid}))this.atsCallback();else{var e=gdprConsent&&"boolean"==typeof gdprConsent.gdprApplies&&gdprConsent.gdprApplies?1:0,t=e?gdprConsent.consentString:"",r=2===ProperMedia.utils.deepAccess(gdprConsent,"vendorData.tcfPolicyVersion");if(e&&(!t||""===t))return void properLog.mylog("liveRamp: Consent string is required to call envelope API.");var s="https://api.rlcdn.com/api/identity/envelope?pid="+this.config.placementID+(e?(r?"&ct=4&cv=":"&ct=1&cv=")+t:"");this.setRetryCookie(),properLog.mylog("liveRamp: A 3P retrieval is attempted!"),this.setEnvelopeSource(!1),$.ajax({url:s,method:"GET",requestType:"cors",success:function(e){var t;if(e)try{t=ProperMedia.utils.safeJsonParse(e)}catch(e){properLog.mylog(e)}this.atsCallback(t&&t.envelope?t.envelope:"")}.bind(this),error:function(e){properLog.mylog("liveRamp: ID fetch encountered an error "+JSON.stringify(e)),this.atsCallback()}.bind(this)})}},liveramp.prototype.setRetryCookie=function(){var e=new Date;e.setTime(e.getTime()+36e5),properStorage.setCookie("_lr_retry_request","true",e.toUTCString(),"","",{moduleName:this.name,gvlid:this.storage.gvlid})},liveramp.prototype.setEnvelopeSource=function(e){var t=new Date;t.setTime(t.getTime()+2592e6),properStorage.setCookie("_lr_env_src_ats",e,t.toUTCString(),"","",{moduleName:this.name,gvlid:this.storage.gvlid})},liveramp}();userIdAdapters.liveRampATS=new liveRampAdapter;var pubCommonIdAdapter=function(){var e="_pubcid",t="_pubcid_optout",r="PublisherCommonId",s="_exp",o="cookie",a="localstorage",n="pubCommonId",d=887;function pubCommonId(){this.name="pubcid",this.eid_name="pubcid",this.source="pubcid.org",this.atype=1,this.config={enabled:!0,create:!0,extend:!0},this.storage={type:a,name:e,expiresInDays:365,gvlid:d},this.idObj=null,this.callback=null}return pubCommonId.prototype.decode=function(e){return e||void 0},pubCommonId.prototype.getValue=function(){return ProperMedia.utils.isStr(this.idObj)?this.idObj:ProperMedia.utils.deepAccess(this,"idObj.pubcid")},pubCommonId.prototype.init=function(){properStorage.localStorageIsEnabled({moduleName:n,gvlid:d})?this.storage.type=a:properStorage.cookiesAreEnabled({moduleName:n,gvlid:d})?this.storage.type=o:this.storage.type=null,this.getId()},pubCommonId.prototype.removeStorageItem=function(e){try{properStorage.removeDataFromLocalStorage(e+s,{moduleName:n,gvlid:d}),properStorage.removeDataFromLocalStorage(e,{moduleName:n,gvlid:d})}catch(e){properLog.mylog(JSON.stringify(e))}},pubCommonId.prototype.readValue=function(e,t){var r;return t||(t=this.storage.type),t===o?r=properStorage.getCookie(e,{moduleName:n,gvlid:d}):t===a&&(r=function(e){var t=null;try{var r=properStorage.getDataFromLocalStorage(e+s,{moduleName:n,gvlid:d});r?new Date(r).getTime()-Date.now()>0?t=properStorage.getDataFromLocalStorage(e,{moduleName:n,gvlid:d}):removeStorageItem(e):t=properStorage.getDataFromLocalStorage(e,{moduleName:n,gvlid:d})}catch(e){properLog.mylog(JSON.stringify(e))}return t}(e)),"undefined"===r||"null"===r?null:r},pubCommonId.prototype.writeValue=function(e,t,r){if(e&&t)if(this.storage.type===o){var p=new Date;p.setTime(p.getTime()+864e5*expires),properStorage.setCookie(e,t,p.toGMTString(),"Lax","."+properPage.root_domain,{moduleName:n,gvlid:d})}else this.storage.type===a&&function(e,t,r){try{if(void 0!==r&&null!=r){var o=new Date(Date.now()+864e5*r).toUTCString();properStorage.setDataInLocalStorage(e+s,o,{moduleName:n,gvlid:d})}properStorage.setDataInLocalStorage(e,t,{moduleName:n,gvlid:d})}catch(e){properLog.mylog(JSON.stringify(e))}}(e,t,r)},pubCommonId.prototype.getId=function(){var s=null,p=properStorage.cookiesAreEnabled({moduleName:n,gvlid:d})&&this.readValue(t,o)||properStorage.hasLocalStorage({moduleName:n,gvlid:d})&&this.readValue(t,a);return!(!this.storage.type||p)&&("object"==typeof window[r]?(s=window[r].getId(),properLog.mylog(r+": pubcid = "+s)):((s=this.readValue(e))||(this.storage.type==o?s=this.readValue(e,a):this.storage.type==a&&(s=this.readValue(e,o))),s?this.config.extend&&this.writeValue(e,s,this.storage.expiresInDays):this.config.create&&(this.storage.type===a&&(s=this.readValue(e,o)),s||(s=ProperMedia.utils.generateUUID()),this.writeValue(e,s,this.storage.expiresInDays),s=this.readValue(e)),properLog.mylog("pubCommonId: pubcid = "+s)),this.idObj={pubcid:s},!0)},pubCommonId}();userIdAdapters.pubCommonId=new pubCommonIdAdapter;var fabrickIdAdapter=function(){function fabrickId(){this.name="fabrickId",this.eid_name="fabrickId",this.source="neustar.biz",this.atype=1,this.config={enabled:!1,apiKey:null},this.storage={type:"cookie",name:"fabrickId",expiresInDays:7},this.idObj=null,this.callback=null}function truncateAndAppend(e,t,r,s){return s&&t.length<2e3&&(s.length>200&&(s=s.substring(0,200)),-1==e.indexOf(s))?(e.push(s),t+"&"+r+"="+s):t}return fabrickId.prototype.initialize=function(e){ProperMedia.utils.deepAccess(e,"emailHashes.sha256")?this.config.e=ProperMedia.utils.deepAccess(e,"emailHashes.sha256"):ProperMedia.utils.deepAccess(e,"emailHashes.sha1")?this.config.e=ProperMedia.utils.deepAccess(e,"emailHashes.sha1"):ProperMedia.utils.deepAccess(e,"emailHashes.md5")&&(this.config.e=ProperMedia.utils.deepAccess(e,"emailHashes.md5")),e.ipv4&&(this.config.i4=e.ipv4),e.ipv6&&(this.config.i6=e.ipv6)},fabrickId.prototype.decode=function(e){return e.fabrickId||void 0},fabrickId.prototype.getValue=function(){return this.idObj||void 0},fabrickId.prototype.getId=function(e){try{if(!this.config.enabled)return;if("string"!=typeof this.config.apiKey)return void properLog.mylog("fabrickId submodule requires an apiKey.");try{var t="https://fid.agkn.com/f?",r=Object.keys(this.config);for(var s in r){var o=r[s];if("url"!==o&&"refererInfo"!==o&&"enabled"!==o){var a=this.config[o];if(Array.isArray(a))for(var n in a)t+=o+"="+a[n]+"&";else t+=o+"="+a+"&"}}t=t.slice(0,-1);var d=[];t=truncateAndAppend(d,t,"r",properPage.referer),t=truncateAndAppend(d,t,"r",properPage.canonical_url),t=truncateAndAppend(d,t,"r",properPage.url);return{callback:function(e){$.ajax({url:t,method:"GET",requestType:"cors",success:function(t){var r;if(t)try{r=ProperMedia.utils.safeJsonParse(t)}catch(e){properLog.mylog(e),r={}}e(r)}.bind(this),error:function(t){properLog.mylog("fabrickId fetch encountered an error",t),e()}})}}}catch(e){properLog.mylog("fabrickIdSystem encountered an error",e)}}catch(e){properLog.mylog("fabrickIdSystem encountered an error",e)}},fabrickId}();userIdAdapters.fabrickId=new fabrickIdAdapter;var pubLinkAdapter=function(){function pubLink(){this.name="pubLink",this.eid_name="publinkId",this.email="",this.emailHashes={},this.source="epsilon.com",this.atype=3,this.config={enabled:!1,siteId:null,apiKey:null},this.storage={type:"cookie",name:"_publink",expiresInDays:30,gvlid:24},this.idObj=null,this.callback=null}return pubLink.prototype.initialize=function(e){this.enabled=ProperMedia.utils.deepAccess(properOps,"bidders.header.conversant.enabled")||!1,this.enabled&&(this.config.siteId=ProperMedia.utils.deepAccess(properOps,"bidders.header.conversant.site_id")||0,e.email&&(this.email=e.email),this.email&&ProperMedia.utils.isBase64(this.email)&&(this.email=ProperMedia.utils.b64DecodeUnicode(this.email)),this.emailHashes=ProperMedia.utils.deepAccess(e,"emailHashes")||{})},pubLink.prototype.decode=function(e){return e||void 0},pubLink.prototype.getValue=function(){return this.idObj||void 0},pubLink.prototype.getId=function(){var e=this.getlocalValue();if(e)return{id:e};if(!this.idObj){var t=this.emailHashes.md5||this.email||"";if(t&&/^[A-F0-9]+$/i.test(t)&&this.config.siteId&&this.config.apiKey){var r={deh:t,mpn:"Prebid.js",mpv:properOps.prebid_version};r.sid=this.config.siteId,r.apikey=this.config.apiKey,r.gdpr=gdprConsent.gdprApplies?1:0,r.gdpr_consent=gdprConsent.consentString,uspConsent.usPrivacy&&"string"==typeof uspConsent.usPrivacy&&(r.us_privacy=uspConsent.usPrivacy);var s="https://proc.ad.cpe.dotomi.com/cvx/client/sync/publink?"+ProperMedia.utils.formatQueryString(r);return{callback:function(e){$.ajax({url:s,method:"GET",requestType:"cors",withCredentials:!0,success:function(t){if(t)try{responseObj=ProperMedia.utils.safeJsonParse(t),t=responseObj.publink}catch(e){properLog.mylog(e)}e(t)}.bind(this),error:function(t){properLog.mylog("pubLink fetch encountered an error",t),e()}})}}}properLog.mylog("params.e must be a hex string and requires a Site ID and API Key")}},pubLink.prototype.getlocalValue=function(){var e;function getData(e){var t;if(properStorage.hasLocalStorage({moduleName:this.name,gvlid:this.storage.gvlid})&&(t=properStorage.getDataFromLocalStorage(e,{moduleName:this.name,gvlid:this.storage.gvlid})),t||(t=properStorage.getCookie(e,{moduleName:this.name,gvlid:this.storage.gvlid})),"string"==typeof t){if("{"!==(t=decodeURIComponent(t)).charAt(0))return t;try{var r=ProperMedia.utils.safeJsonParse(t);if(r)return r.publink}catch(e){properLog.mylog(e)}}}return(e=getData.call(this,this.storage.name+"_srv"))||(e=getData.call(this,this.storage.name)),e},pubLink}();userIdAdapters.pubLink=new pubLinkAdapter;var id5IdAdapter=function(){var e=131,t="id5Id",r=30,s="id5id",o=s+"_no_email",a=s+"_privacy";function id5Id(){this.name=t,this.eid_name="id5id",this.source="id5-sync.com",this.email="",this.atype=1,this.config={enabled:!1,partnerId:445},this.storage={type:"localstorage",name:s,expiresInDays:90,refreshInSeconds:28800,gvlid:e},this.idObj=null,this.callback=null}function nbCacheName(e){return s+"_"+e+"_nb"}function storeNbInCache(e,t){storeInLocalStorage(nbCacheName(e),t,r)}function incrementNb(e){var t=function(e){var t=getFromLocalStorage(nbCacheName(e));return t?parseInt(t):0}(e)+1;return storeNbInCache(e,t),t}function getFromLocalStorage(r){var s=properStorage.getDataFromLocalStorage(r+"_exp",{moduleName:t,gvlid:e});return""===s||s&&new Date(s).getTime()-Date.now()>0?properStorage.getDataFromLocalStorage(r,{moduleName:t,gvlid:e}):(properStorage.removeDataFromLocalStorage(r,{moduleName:t,gvlid:e}),null)}function storeInLocalStorage(r,s,o){properStorage.setDataInLocalStorage(r+"_exp",function(e){return new Date(Date.now()+864e5*e).toUTCString()}(o),{moduleName:t,gvlid:e}),properStorage.setDataInLocalStorage(r,s,{moduleName:t,gvlid:e})}return id5Id.prototype.initialize=function(e){ProperMedia.utils.deepAccess(e,"emailHashes.sha256")?this.email=e.emailHashes.sha256:ProperMedia.utils.deepAccess(e,"emailHashes.md5")&&(this.email=e.emailHashes.md5)},id5Id.prototype.generatePD=function(){return this.email?ProperMedia.utils.b64EncodeUnicode("1="+this.email+(properUser.pubcid?"&5="+properUser.pubcid:"")):""},id5Id.prototype.getValue=function(){return ProperMedia.utils.deepAccess(this,"idObj.uid")},id5Id.prototype.getUidExt=function(){if(ProperMedia.utils.deepAccess(this,"idObj.ext"))return ProperMedia.utils.deepAccess(this,"idObj.ext")},id5Id.prototype.decode=function(e){var t={};if(e&&"string"==typeof e.universal_uid)return{uid:e.universal_uid,ext:t=e.ext||t}},id5Id.prototype.getId=function(s){var n="https://id5-sync.com/g/v2/"+this.config.partnerId+".json",d=gdprConsent&&"boolean"==typeof gdprConsent.gdprApplies&&gdprConsent.gdprApplies?1:0,p=uspConsent.usPrivacy?uspConsent.usPrivacy:"",l=s&&s.signature?s.signature:"",c={gdpr:d,gdpr_consent:d?gdprConsent.consentString:"",partner:this.config.partnerId,nbPage:incrementNb(this.config.partnerId),o:"api",pd:this.generatePD(),provider:"",tml:properPage.url,ref:properPage.referrer,cu:properPage.canonical_url,s:l,top:1,u:properPage.url,us_privacy:p,v:properOps.prebid_version,storage:{type:"localstorage"==this.storage.type?"html5":this.storage,name:this.storage.name,expires:this.storage.expiresInDays,refreshInSeconds:this.storage.refreshInSeconds},localstorage:properStorage.localStorageIsEnabled({moduleName:t,gvlid:e})};return{callback:function(s){$.ajax({url:n,method:"POST",requestType:"cors",data:JSON.stringify(c),success:function(n){var d;if(n)try{d=ProperMedia.utils.safeJsonParse(n),storeNbInCache(this.config.partnerId,0),this.email?getFromLocalStorage(o)&&(properStorage.removeDataFromLocalStorage(o,{moduleName:t,gvlid:e}),properStorage.removeDataFromLocalStorage(o+"_exp",{moduleName:t,gvlid:e})):storeInLocalStorage(o,1,r),d.privacy&&storeInLocalStorage(a,JSON.stringify(d.privacy),r)}catch(e){properLog.mylog(e)}s(d)}.bind(this),error:function(e){properLog.mylog("UserID - ID5 submodule getId fetch encountered an error: "+JSON.stringify(e)),s()}})}}},id5Id.prototype.extendId=function(e){return this.email&&getFromLocalStorage(o)?this.getId(e):(incrementNb(this.config.partnerId||0),e)},id5Id}(),networks,config,bidderInfo,endpoint,SYNC_URLS,SUPPORTED_USER_ID_SOURCES,pubId,eIdAdapters;function buildNativeAdCode(e,t){var r=ProperMedia.utils.deepAccess(t,"native.link.url")||"",s=ProperMedia.utils.deepAccess(t,"native.assets")||[],o="",a="",n="",d="",p="",l="";s.length&&s.forEach((function(e){if(e.title)n=ProperMedia.utils.deepAccess(e,"title.text")||"";else if(e.img){var t=ProperMedia.utils.deepAccess(e,"img.type")||"";1==t?o=ProperMedia.utils.deepAccess(e,"img.url")||"":2==t&&(a=ProperMedia.utils.deepAccess(e,"img.url")||"")}else 1==e.type?d=e.value:2==e.type?p=e.value:11==e.type?e.value:12==e.type&&(l=e.value)}));var c=getNativeCss()+'<div class="proper-ad-unit native"><div class="inner"><div class="c1"><div class="img" style="background-image:url('+o+')"></div></div><div class="c2"><div class="txt"><h1 class="title">'+n+"</h1><p>"+p+'</p></div><div class="cta"><span><img src="'+a+'" style="max-width:14px; max-height: 14px; margin-right:4px;"/>'+d+'</span><div class="btn"><a href="#cta" onclick="fireTrackers(\'click\')">'+l+"</a></div></div></div></div></div>";c+='<script>function fireTrackers(action) {var message = { message: "Proper Native", slotName:  + "'+e.name+'" };if (action === "click") { message.action = "click"; }window.parent.postMessage(JSON.stringify(message), "*");window.open("'+r+"\", '_blank').focus();}<\/script>",t.adcode=c}function getNativeCss(){var e=nativeCss;return properSpecialOps.extra_native_css&&(e+=properSpecialOps.extra_native_css),'<style type="text/css">'+e+"</style>"}function listenMessagesFromCreative(){window.addEventListener("message",receiveMessage,!1)}function receiveMessage(e){var t=e.message?"message":"data",r=ProperMedia.utils.safeJsonParse(e[t]);if(r.slotName){var s=properPage.getSlotFromPageObject(r.slotName,["display"]);if(s&&s.displayed_ad instanceof adObj&&"native"==s.displayed_ad.type&&"Proper Native"===r.message)fireNativeTrackers(r.auction,s.displayed_ad)}}function fireNativeTrackers(e,t){try{var r=[];"click"===e?r=ProperMedia.utils.deepAccess(t,"native.clickTrackers")||ProperMedia.utils.deepAccess(t,"native.link.clickTrackers"):(r=ProperMedia.utils.deepAccess(t,"native.imptrackers"),ProperMedia.utils.deepAccess(t,"native.jstracker")&&(ProperMedia.utils.isArray(t.native.jstracker)?(t.native.jstracker||[]).forEach(Propermedia.utils.insertHtmlIntoIframe):ProperMedia.utils.isStr(t.native.jstracker)&&Propermedia.utils.insertHtmlIntoIframe(t.native.jstracker)),ProperMedia.utils.deepAccess(t,"native.eventtrackers")&&(t.native.eventtrackers||[]).forEach((function(e){if(1==e.event)r.push(e.url);else if(2==e.event){var t=document.createElement("script");t.src=e.url,t.async=!0,t.type="text/javascript";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}))),(r||[]).forEach(Propermedia.utils.triggerPixel)}catch(e){properLog.mylog("Error firing NativeTrackers: "+JSON.stringify(e))}}function init(){for(propertag.cmd.push=function(e){consentManager.ready(e)},propertag.cmd.unshift=function(e){e.call()},propertag.cmd.length&&propertag.cmd.shift().call();propertag.cmd.length;)consentManager.ready(propertag.cmd.shift())}function set_options(settings){if(settings.extra_js)try{eval('"use strict"; '+settings.extra_js)}catch(e){console.error(e),propertag.cmd.push((()=>{e.message="EXTRA_JS: "+e.message,sendError(e)}))}setBidAdapterSettings(),setConfigSettings(settings),gdprEnforcement.setEnforcementConfig(properOps),audiencePixels.controller.init(properOps.audience_segments,properOps.audience_pixels),addStyleSheet(),properPage.setPageVariables(),consentManager.ready((function(){userIdAdapters.pubCommonId.init(),properUser.init(),cookieMatching.init(),cookieMatching.cookieMatch(),userIds.init()}),"unshift"),properPage.init();var properLoadEvent=new Event("proper-has-been-loaded");window.dispatchEvent(properLoadEvent)}function get_options(){return ProperMedia.utils.deepCopy(properOps)}function schainCheck(e){var t="s2s"==bidderToAdapterName(e)?"s2s":"header";return properOps.schain&&!ProperMedia.utils.deepAccess(properOps,"bidders."+t+"."+e+".account_overrides.enabled")?properOps.schain:""}function setBidAdapterSettings(){if(void 0!==bidAdapters)for(var e in bidAdapters)properOps.bidder_info[e]=bidAdapters[e].bidderInfo}function setConfigSettings(e){properOps.setOptions(e)}function validateConfigSettings(){properOps.dfp_id||(properOps.dfp_id=properOps.proper_dfp_id),properOps.google_advertiser||(properOps.google_advertiser=properOps.dfp_advertiser_ids.google),properOps.proper_advertiser||(properOps.proper_advertiser=properOps.dfp_advertiser_ids.proper),properOps.adsense_advertiser||(properOps.adsense_advertiser=properOps.dfp_advertiser_ids.adsense)}function setThirdPartyAdManagerSettings(e){e.remote_gam&&(e.thirdPartyAdManager=!0),properSpecialOps.dfp_id&&(e.dfp_id=properSpecialOps.dfp_id,e.thirdPartyAdManager=!0),properSpecialOps.google_advertiser&&(e.google_advertiser=properSpecialOps.google_advertiser,e.thirdPartyAdManager=!0),properSpecialOps.proper_advertiser&&(e.proper_advertiser=properSpecialOps.proper_advertiser,e.thirdPartyAdManager=!0),properSpecialOps.adsense_advertiser&&(e.adsense_advertiser=properSpecialOps.adsense_advertiser,e.thirdPartyAdManager=!0)}function sortAdSlotsByNumber(e){return Object.keys(e.ad_slots).forEach((function(t){e.ad_slots[t]=ProperMedia.utils.sortProperties(e.ad_slots[t],"number",!0,!1)})),e}function addStyleSheet(){var e=document.createElement("style");e.type="text/css";var t="";properOps.extra_css&&(t+=properOps.extra_css),"proper-ad-unit"!==properOps.slot_wrapper_class&&(t=t.replace(/proper-ad-unit/gi,properOps.slot_wrapper_class)),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}function checkProperDebugConsole(){void 0!==properPage.get_vars.proper_debug_console||window.location.hash.includes("proper_debug_console")?debugObj.createDebugConsole():(void 0!==properPage.get_vars.proper_debug_console||window.location.hash.includes("proper_overlay"))&&debugObj.createDebugOverlays()}function checkKillAllAds(){return!(!properSpecialOps.kill_all_ads&&!properPage.dont_send_bids)&&(properLog.mylog("Kill All Ads enabled! Good bye!"),!0)}function bidderToAdapterName(e){if(bidAdapters[e])return e;const t=ProperMedia.utils.deepAccess(properOps,"bidder_info."+e+".adapter_name");if(t)return t;if(e.includes("s2s"))return"s2s";const r=e.replace(/(alias|outstream|instream|native|s2s|_)/g,"");return bidAdapters[r]?r:e}function getBidderFloor(e,t,r){try{if(properOps.testing_mode.enabled)return.01;var s=r?"s2s":"header",o=properDevice.isMobile()?"mobile":"desktop",a=ProperMedia.utils.deepCopy(ProperMedia.utils.deepAccess(properOps,"bidders."+s+"."+e+".floors."+o)||{}),n=ProperMedia.utils.deepCopy(properOps.floors[o]||{}),d=a.backup||n.backup||0,p=[];if(ProperMedia.utils.isStr(t)?p=t.split(","):ProperMedia.utils.isArray(t)&&(p=t),p.length>0){for(var l=[],c=0;c<p.length;c++){var u=(properSpecialOps.dynamicFloors||ProperMedia.utils.deepAccess(properOps,"dynamic_floors."+o+".enabled"))&&ProperMedia.utils.deepAccess(properSession,"sessionData.bid_avg."+p[c])||0;if(a.sizes&&a.sizes[p[c]]){const e=Math.max(a.sizes[p[c]],u);l.push(e)}else if(n.sizes&&n.sizes[p[c]]){const e=Math.max(n.sizes[p[c]],u);l.push(e)}else u&&l.push(u)}l.length>0&&(d=Math.min.apply(null,l))}ProperMedia.utils.deepAccess(properOps,"bidder_info."+e+".rev_share")&&(d=parseFloat((d/ProperMedia.utils.deepAccess(properOps,"bidder_info."+e+".rev_share")).toFixed(2)))}catch(e){console.error(e),d=a.backup||n.backup||0,sendError(TraceKit.computeStackTrace(e))}return ProperMedia.utils.round(d,2)}function roundPriceToDfpBucket(e){return e=properOps.thirdPartyAdManager?"reference"==properOps.site_name||"simpli"==properOps.site_name||"bloglines"==properOps.site_name||"informationvine"==properOps.site_name||"faqtoids"==properOps.site_name||"smarter"==properOps.site_name||"directhit"==properOps.site_name||"theanswerhub"==properOps.site_name||"top10answers"==properOps.site_name||"answerroot"==properOps.site_name||"allquestionsanswered"==properOps.site_name?e>40?40:(Math.ceil(20*e)/20).toFixed(2):e>800?800:e>100?(5*Math.ceil(e/5)).toFixed(2):e>20?(Math.ceil(20*e)/20).toFixed(2):e.toFixed(2):e>800?800:e>100?Math.ceil(e).toFixed(2):(Math.ceil(20*e)/20).toFixed(2)}function round_floor(e){e=parseFloat(e);var t=properDevice.isMobile()?"mobile":"desktop",r=ProperMedia.utils.deepCopy(properOps.floors[t]||{});return e=e&&""!=e?e<=.1?.1:e<=.25?.25:e<=.4?.4:e<=2?(Math.ceil(4*e)/4).toFixed(2):e<=5?(Math.ceil(2*e)/2).toFixed(2):5:r.backup,ProperMedia.utils.round(e,2)}function setDfpPageTargeting(e){void 0!==properPage.post_id&&null!=properPage.post_id&&""!=properPage.post_id||(properPage.post_id="unknown"),e.setTargeting("post_id",properPage.post_id.toString()),void 0!==properOps.member&&null!=properOps.member&&""!=properOps.member||(properOps.member="no"),e.setTargeting("member",properOps.member.toString()),e.setTargeting("category",ProperMedia.utils.deepAccess(properPage,"page_meta.category").toString()),e.setTargeting("split_version",properOps.rtp_file_version.toString()),e.setTargeting("proper_site",properOps.site_name.toString()),e.setTargeting("proper_page",ProperMedia.utils.deepAccess(properPage,"spa_settings.page_number").toString()),e.setTargeting("s_depth",ProperMedia.utils.deepAccess(properSession,"sessionData.depth").toString()),properUser.checkAdBlockDetected()?e.setTargeting("adblock","true"):e.getTargeting("adblock").length>0&&e.clearTargeting("adblock"),Object.keys(properPage.dfp_targeting).length&&Object.keys(properPage.dfp_targeting).forEach((function(t){properPage.dfp_targeting[t]&&(e.clearTargeting(t),delete properPage.dfp_targeting[t])})),ProperMedia.utils.deepAccess(properPage,"page_meta.tags")&&properPage.page_meta.tags.length&&(e.setTargeting("tags",[properPage.page_meta.tags.toString()]),properPage.dfp_targeting.tags=1),ProperMedia.utils.deepAccess(properPage,"page_meta.dfp_kv")&&Object.keys(properPage.page_meta.dfp_kv).length&&Object.keys(properPage.page_meta.dfp_kv).forEach((function(t){var r=ProperMedia.utils.deepAccess(properPage,"page_meta.dfp_kv."+t);void 0!==r&&(r=ProperMedia.utils.isArray(r)?r.map((function(e){return e.toString()})):r.toString(),e.setTargeting(t,r),properPage.dfp_targeting[t]=1)})),ProperMedia.utils.deepAccess(properPage,"page_meta.custom.set_as_kv_to_gam")&&Object.keys(properPage.page_meta.custom).length&&Object.keys(properPage.page_meta.custom).forEach((function(t){if(t.match(/^dimension_([1-9]|10)$/)){var r="page_meta.custom."+t,s=ProperMedia.utils.deepAccess(properPage,r);if(""==s)return;e.setTargeting(t,s.toString()),properPage.dfp_targeting[t]=1}}))}function proper_display(e){let t=e||"";if(checkKillAllAds())return properLog.mylog("Kill All Ads enabled! Goodbye!"),!1;if(void 0===t){try{const e=document.scripts[document.scripts.length-1];if(t=e.parentNode.id,void 0===e.parentNode||void 0===t)return;t=ProperMedia.utils.extractSlotName(t)}catch(e){console.error(e),sendError(TraceKit.computeStackTrace(e))}if(void 0===t||!t)return!1}var r=ProperMedia.utils.extractSlotName(t);if(!r)return properLog.mylog("Couldn't find slot from id: "+t),!1;var s=properPage.buildSlot("display",r);s&&s instanceof slotObj&&s.slot_level_auction&&properAdPool.sendAuction(!0,[s])}function showWinningAd(e){if(!e.getElement())return!1;var t=1;if(e.hasWinningBid())t=0;else if(1==properOps.testing_mode.enabled){if(void 0===e.default_size||"0x0"==e.default_size)return!1;t=0;var r=new adObj({bidder:"unfilled",size:e.default_size.join("x"),adcode:'<div style="text-align:center;width:'+e.default_size[0]+"px;height:"+e.default_size[1]+'px;background:#ccc;color:#000;padding-top:10px;">-- no ad found --</div>'});e.winning_ad=r}return 0==t?proper_render(e.getElement(),e.number,1):log_unfilled(e),!0}function proper_render_isolated(e,t,r,s){e.innerHTML="";var o=document.createElement("iframe");o.id=t.properIframeId,o.frameBorder=0,o.scrolling="no",o.marginWidth="0",o.marginHeight="0",o.width=s[0],o.height=s[1],o.style.overflow="hidden",o.style.border="0px",o.style.verticalAlign="bottom",o.onload=function(){console.log("Proper isolated slotOnload: "+t.name),1==properOps.testing_mode.enabled&&"unfilled"==properOps.testing_mode.bidder&&"unfilled"==r.bidder?t.dispatchCustomEvent("proper-unfilled"):t.dispatchCustomEvent("proper-ads-fired",{cpm:ProperMedia.utils.deepAccess(t,"displayed_ad.price"),size:ProperMedia.utils.deepAccess(t,"displayed_ad.size"),ad_type:ProperMedia.utils.deepAccess(t,"displayed_ad.type")})},properOps.sandbox_iframe&&(o.sandbox=properOps.sandbox_options.join(" ")||""),o.src="javascript:\"<!DOCTYPE html><html><body style='background:transparent'></body></html>\"",e.appendChild(o);var a="<!DOCTYPE html><html><body>"+r.adcode+"</body></html>";ProperMedia.utils.deepAccess(properOps,"adlightning.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"adlightning.enabled")?adLightningWrapper.wrapTag(t,o.contentWindow,ProperMedia.utils.mergeObject({},r,{adcode:a})):ProperMedia.utils.deepAccess(properOps,"geoedge.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"geoedge.enabled")?geoEdgeWrapper.wrapTag(t,o.contentWindow.document,ProperMedia.utils.mergeObject({},r,{adcode:a})):ProperMedia.utils.deepAccess(properOps,"confiant.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"confiant.enabled")?confiantWrapper.wrapTag(t,o.contentWindow.document,ProperMedia.utils.mergeObject({},r,{adcode:a})):(o.contentWindow.document.open(),o.contentWindow.document.write(a),o.contentWindow.document.close()),"auto"==s[1]&&ProperMedia.utils.onElementHeightChange(o,(function(e){e>0&&(o.style.height=e+"px")}))}function proper_render_bidder_order(e,t,r,s){var o=window.top.document.getElementById(t.properIframeId);if(o&&(o.style.width=formatCssSize(s[0]),o.style.height=formatCssSize(s[1])),e.defaultView&&e.defaultView.frameElement){var a=s[0],n=s[1];e.defaultView.frameElement.width=a,e.defaultView.frameElement.height=n}if(ProperMedia.utils.deepAccess(properOps,"geoedge.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"geoedge.enabled")?geoEdgeWrapper.wrapTag(t,e,r):ProperMedia.utils.deepAccess(properOps,"confiant.enabled")||ProperMedia.utils.deepAccess(properSpecialOps,"confiant.enabled")?confiantWrapper.wrapTag(t,e,r):e.write(r.adcode),"auto"==s[1])if(o){var d=o.contentWindow.document.getElementById(t.dfpIframeId);d?ProperMedia.utils.onElementHeightChange(d,(function(e){e>0&&(d.style.height=e+"px",o.style.height=e+"px")})):ProperMedia.utils.onElementHeightChange(o,(function(e){e>0&&(o.style.height=e+"px")}))}else(o=window.top.document.getElementById(t.dfpIframeId))&&ProperMedia.utils.onElementHeightChange(o,(function(e){e>0&&(o.style.height=e+"px")}))}function proper_render(e,t,r,s){var o=properPage.getSlotByNumber(t,["display"]);if(!o)return properLog.mylog("Couldn't find slot with number: "+t),!1;o.hasFlexSlot()&&o.removeFlexSlot();var a,n,d=[0,0];if(2==(r=r||0)?((o.hasWinningAmazonBid()||o.getWinningAmazonBid())&&(a=o.winning_amazon_ad),n=(o.winning_ad?.price??0)+(o.flex_ad?.price??0)):o.getWinningBid()&&(a=o.winning_ad,n=o.getRunnerUp()),a&&a instanceof adObj||properOps.testing_mode.enabled&&a instanceof adObj)if(o.clearNonWinningBid(a),o.flex_enabled&&o.flex_map?.[a.size]&&o.flex_map[a.size]>1&&o.addFlexSlot(a.size),o.videoAdCheck())o.removeCreative(),o.dispalyVideoAd();else{a.displayed=1,d=a.size.split("x"),("1x1"==a.size||properOps.native_sizes[a.size])&&(d=["100%","auto"]),ProperMedia.utils.deepAccess(bidAdapters,a.bid_adapter_name+".bidderInfo.div_insertion")&&(a.adcode=a.adcode.replace(/{PROPER_SLOT_DIV_ID}/g,o.div_id)),"native"==a.type&&buildNativeAdCode(o,a),o.removeCreative(),1==r?proper_render_isolated(e,o,a,d):0!=r&&2!=r||proper_render_bidder_order(e,o,a,d),a.onBidWon(o),properLog.mylog("displayed! ("+o.name+", bidder="+a.bidder+", size="+a.size+", price="+a.price+")");var p=ProperMedia.utils.getTimePassed(o.auction_started_ts),l=_0x59ab84(a.price,a.bid_adapter_name),c=_0x59ab84(a.gross,a.bid_adapter_name),u=_0x59ab84(n,"sovrn_runner_up"),g=userIds.getEmailHashes()||{};properSession.setSessionRevenue(a.price),properLog.saved_data[o.name]={bidder:a.bidder,cpm:l,size:a.size,slot:o.dfp_name,request_url:a.request_url,request_response:a.response,adcode:a.adcode,ad_details:a.ad_details},ProperMedia.utils.deepSetValue(properLog,"bid_data.ad_slots."+o.name,{slot_name:ProperMedia.utils.validateValue(o.dfp_name,{type:"string",max_len:50}),bidder:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"bidder"),{type:"string",max_len:30}),runner_up:u,gross:c,price:l,size:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"size"),{type:"string",max_len:10}),refresh_cnt:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(o,"refresh.count"),{type:"number",max:999}),line_item_id:"",response_ms:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"response_ms"),{type:"number",max:999999}),auction_duration:ProperMedia.utils.validateValue(p,{type:"number",max:999999}),precent_bids_ready:ProperMedia.utils.validateValue(100,{type:"number",max:100}),tag_id:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"tag_id"),{type:"string",max_len:50}),adid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"adid"),{type:"string",max_len:50}),adomain:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"adomain.0"),{type:"string",max_len:50}),cid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"cid"),{type:"string",max_len:50}),crid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"crid"),{type:"string",max_len:50}),dealid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"dealid"),{type:"string",max_len:50}),floor:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"floor"),{type:"number",max:999,max_len:15}),publisher_demand:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(a,"pub_demand"),{type:"boolean"}),fabrickId:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(a,"uids")||[]).indexOf("fabrickId"),{type:"boolean"}),id5id:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(a,"uids")||[]).indexOf("id5id"),{type:"boolean"}),idl_env:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(a,"uids")||[]).indexOf("idl_env"),{type:"boolean"}),publinkId:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(a,"uids")||[]).indexOf("publinkId"),{type:"boolean"}),"33acrossId":ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(a,"uids")||[]).indexOf("33acrossId"),{type:"boolean"}),connectid:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(a,"uids")||[]).indexOf("connectid"),{type:"boolean"}),pubcid:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(a,"uids")||[]).indexOf("pubcid"),{type:"boolean"}),hem_sha256:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(g,"sha256"),{type:"boolean"}),hem_sha1:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(g,"sha1"),{type:"boolean"}),hem_md5:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(g,"md5"),{type:"boolean"})}),o.displayed_ad=new adObj(ProperMedia.utils.deepCopy(a)),properAdPool.displayed_ads.push(ProperMedia.utils.deepCopy(o.displayed_ad)),proper_inview(0,o.name,a.size,0,0,0),clearTimeout(properLog.tracker_timeout),properLog.tracker_timeout=null,properLog.tracker_timeout=properSetTimeout.setTimeout.call(properPage,(function(){properLog.proper_tracker()}),properLog.tracker_wait)}else log_unfilled(o)}function proper_render_dfp_interstitial(e){ProperMedia.utils.deepAccess(properLog,"interstitial_bid_data."+e.name)&&(ProperMedia.utils.deepSetValue(properLog,"bid_data.ad_slots."+e.name,ProperMedia.utils.deepAccess(properLog,"interstitial_bid_data."+e.name)),clearTimeout(properLog.tracker_timeout),properLog.tracker_timeout=null,properLog.tracker_timeout=properSetTimeout.setTimeout.call(properPage,(function(){properLog.proper_tracker()}),properLog.tracker_wait))}function proper_render_dfp(e,t){var r=properPage.getSlotFromPageObject(e,["display","interstitial"]);if(!r)return;if(r.hasFlexSlot()&&r.removeFlexSlot(),!r.interstitial){r.removeCreative();var s=window.top.document.getElementById(r.properIframeId);s&&(s.style.width=formatCssSize(t.size[0]),s.style.height=formatCssSize(t.size[1]))}var o=t.size[0]+"x"+t.size[1];r.flex_enabled&&r.flex_map?.[o]&&r.flex_map[o]>1&&(properLog.mylog("Adding flex slot for "+r.name+" - dfp ad: ("+o+")"),r.addFlexSlot(o));var a=t.advertiserId,n="dfp";t.advertiserId==properOps.amazon_advertiser?n="a9":t.advertiserId==properOps.adsense_advertiser?n="adsense":t.advertiserId!=properOps.google_advertiser&&1!=t.advertiserId&&0!=t.advertiserId&&null!=t.advertiserId&&null==t.yieldGroupIds||(n="adx"),r.advertiserId=t.advertiserId;var d=0;if("adx"==n||"adsense"==n){var p=r.interstitial?"interstitial":o,l=r.getFloor(p);d=r.dfp_bid_price&&parseFloat(r.dfp_bid_price)>l?parseFloat(r.dfp_bid_price)+.01:parseFloat(l)+.01}var c=Math.max(d-.01,0);properLog.mylog("displayed! DFP ("+r.name+", bidder="+n+", size="+o+", price: "+d+")");var u=ProperMedia.utils.getTimePassed(r.auction_started_ts);properSession.setSessionRevenue(d);const g=(r.winning_ad?.price??0)+(r.flex_ad?.price??0);var m={slot_name:ProperMedia.utils.validateValue(r.dfp_name,{type:"string",max_len:50}),bidder:ProperMedia.utils.validateValue(n,{type:"string",max_len:30}),price:ProperMedia.utils.validateValue(d,{type:"number",max:1e3}),runner_up:ProperMedia.utils.validateValue(g,{type:"number",max:1e3}),gross:ProperMedia.utils.validateValue(d,{type:"number",max:1e3}),size:ProperMedia.utils.validateValue(o,{type:"string",max_len:10}),refresh_cnt:ProperMedia.utils.validateValue(r.refresh.count,{type:"number",max:999}),line_item_id:ProperMedia.utils.validateValue(t.lineItemId,{type:"string",max_len:15}),response_ms:ProperMedia.utils.validateValue(u,{type:"number",max:999999}),auction_duration:ProperMedia.utils.validateValue(u,{type:"number",max:999999}),precent_bids_ready:ProperMedia.utils.validateValue(100,{type:"number",max:100}),tag_id:ProperMedia.utils.validateValue(a,{type:"string",max_len:50}),adid:ProperMedia.utils.validateValue(t.advertiserId,{type:"string",max_len:50}),adomain:ProperMedia.utils.validateValue("",{type:"string",max_len:50}),cid:ProperMedia.utils.validateValue(t.campaignId,{type:"string",max_len:50}),crid:ProperMedia.utils.validateValue(t.creativeId,{type:"string",max_len:50}),dealid:ProperMedia.utils.validateValue("",{type:"string",max_len:50}),floor:ProperMedia.utils.validateValue(c,{type:"number",max:1e3}),publisher_demand:ProperMedia.utils.validateValue(!!properOps.remote_gam,{type:"boolean"})};r.interstitial?properLog.interstitial_bid_data[r.name]=m:ProperMedia.utils.deepSetValue(properLog,"bid_data.ad_slots."+r.name,m),r.displayed_ad=new adObj({type:"display",price:d,gross:d,dfp_price:d,bidder:n,size:o,adCode:"",tag_id:a,response_ms:u,displayed:1,adid:t.advertiserId,cid:t.campaignId,crid:t.creativeId,floor:l}),properAdPool.displayed_ads.push(ProperMedia.utils.deepCopy(r.displayed_ad)),properLog.saved_data[r.name]={bidder:n,cpm:d,size:o,slot:r.dfp_name,request_url:"",request_response:"",adcode:"",ad_details:{}},clearTimeout(properLog.tracker_timeout),properLog.tracker_timeout=null,properLog.tracker_timeout=properSetTimeout.setTimeout.call(properPage,(function(){properLog.proper_tracker()}),properLog.tracker_wait)}function proper_inview(e,t,r,s,o,a,n){setTimeout(userSyncs.start,3e3);var d=".ad-sticky[class*='"+t+"']",p=properPage.getSlotFromPageObject(t,["display"]);if(p){if(e||(p.size=r,properLog.ad_info[p.name]={creative_id:o,line_item_id:a,size:r}),r=properOps.native_sizes[r]||r,p.sticky)if(e)properSpecialOps.sliderHeader?p.deleteSlot(!0):0==p.refresh.count&&$(d).hide();else if(p.displayed=1,ProperMedia.utils.deepAccess(p,"sticky_settings.freq_cap_enabled")&&0==p.refresh.count&&properUser.stickyFreqCapHandler.incrementStickyUnitImps(),void 0===p.displayed_ad.bidder||0==p.displayed_ad.displayed||1==p.displayed_ad.displayed&&void 0===properOps.native_sizes[p.displayed_ad.size]){$(d).removeClass("sticky-right"),$(d).removeClass("sticky-left"),$(d).removeClass("sticky-btm"),$(d).removeClass("slider"),$(d).removeClass("slider-with-video"),$(d).removeClass("slider-with-static");var l=r.split("x"),c=parseInt(l[0]),u=parseInt(l[1]);300==c&&250==u||336==c&&280==u?$(d).addClass("sticky-corner-"+p.sticky_settings.position):c<u?$(d).addClass("sticky-"+p.sticky_settings.position):$(d).addClass("sticky-btm"),properSpecialOps.sliderHeader&&($(d).addClass("slider"),"video"==p.displayed_ad.type&&1==p.displayed_ad.displayed?($(d).addClass("slider-with-video"),$(d).attr("data-ad-height","110px")):$(d).addClass("slider-with-static")),"1x1"!==r?($(d+" .sticky-inner .inner-left").show(),$(d+" .sticky-inner .inner-right").show(),$(d).attr("style","height: "+u+"px")):$(d).hide(),$(d+" .sticky-inner").attr("style",""),(!window.innerWidth||window.innerWidth<=720||window.innerWidth<=c-96)&&$(d).addClass("for-mobile")}else"gumgum"==p.displayed_ad.bidder||"gumgum_s2s"==p.displayed_ad.bidder?($(d+" .sticky-inner .inner-left,.inner-right").hide(),$(d).addClass("sticky-btm"),$(d).obj.style.background="none"):$(d).hide();else if(!e){if(p.slider&&p.slider_settings.close_button&&$(".slider_unit #close_button").addClass("close_button"),p.min_width>1&&p.min_height>1){const e=p.flex_enabled?p.getFlexWrapper():"#"+CSS.escape(p.div_id),t=$(e);t.obj&&(t.obj.style.width="",t.obj.style.height="",t.obj.style.minWidth=p.min_width+"px",t.obj.style.minHeight=p.min_height+"px",p.max_width&&(t.obj.style.maxWidth=p.max_width+"px"),p.max_height&&(t.obj.style.maxHeight=p.max_height+"px"))}if(ProperMedia.utils.deepAccess(p,"advertisement_disclosure.enabled")&&!$("#"+CSS.escape(p.div_id)).obj.parentNode.querySelector(".disclosure_box")){var g=document.createElement("div");g.setAttribute("class","disclosure_box"),g.innerHTML="Advertisement",g.style.height="20px","above"==ProperMedia.utils.deepAccess(p,"advertisement_disclosure.location")?$("#"+CSS.escape(p.div_id)).obj.closest(".proper-ad-unit").insertBefore(g,$("#"+CSS.escape(p.div_id)).obj):$("#"+CSS.escape(p.div_id)).obj.closest(".proper-ad-unit").append(g)}p.displayed=1}if(1==p.displayed&&!e){p.last_displayed_ts=ProperMedia.utils.getTimestampMs(),p.tracking_times.creative_on_page=ProperMedia.utils.getTimestampMs(),1==ProperMedia.utils.deepAccess(p,"displayed_ad.displayed")&&(1==ProperMedia.utils.deepAccess(properOps,"bidder_info."+p.displayed_ad.bidder+".dont_refresh")||""!=ProperMedia.utils.deepAccess(properPage,"takeover.bidder")&&ProperMedia.utils.deepAccess(p,"displayed_ad.bidder")==ProperMedia.utils.deepAccess(properPage,"takeover.bidder")||checkDisableDirectAdRefresh(p.displayed_ad)||checkDisableCampaignAdRefresh(p.displayed_ad))&&p.disableSlotRefresh();p.refresh.count}1==p.refresh.enabled&&p.refresh.count<p.refresh.max&&p.setRefreshInterval(),1==debugObj.enabled&&debugObj.addSlotOverlay(p),p.clearWinningBid(),p.clearWinningAmazonBid()}}function checkDisableDirectAdRefresh(e){return!(!e.adid||"dfp"!=e.bidder||!(properSpecialOps.disableRefreshByAdvertiserId&&-1!==properSpecialOps.disableRefreshByAdvertiserId.indexOf(e.adid)||properOps.disableRefreshByAdvertiserId&&-1!==properOps.disableRefreshByAdvertiserId.indexOf(e.adid)))}function checkDisableCampaignAdRefresh(e){return!(!e.cid||"dfp"!=e.bidder||!(properSpecialOps.disableRefreshByCampaignId&&-1!==properSpecialOps.disableRefreshByCampaignId.indexOf(e.cid)||properOps.disableRefreshByCampaignId&&-1!==properOps.disableRefreshByCampaignId.indexOf(e.cid)))}function log_unfilled(e){if(proper_inview(1,e.name,"0x0",0,0,0),!("display"==e.type&&e.refresh.count>0)){var t=ProperMedia.utils.getTimePassed(e.auction_started_ts),r=e.getFloor(),s=userIds.getEmailHashes()||{};ProperMedia.utils.deepSetValue(properLog,"bid_data.ad_slots."+e.name,{slot_name:ProperMedia.utils.validateValue(e.dfp_name,{type:"string",max_len:50}),bidder:"unfilled",price:0,gross:0,size:ProperMedia.utils.validateValue(e.default_size,{type:"string",max_len:10}),refresh_cnt:ProperMedia.utils.validateValue(e.refresh.count,{type:"number",max:999}),line_item_id:"",response_ms:ProperMedia.utils.validateValue(t,{type:"number",max:999999}),auction_duration:ProperMedia.utils.validateValue(t,{type:"number",max:999999}),precent_bids_ready:ProperMedia.utils.validateValue(100,{type:"number",max:100}),tag_id:"",adid:"",adomain:"",cid:"",crid:"",dealid:"",floor:ProperMedia.utils.validateValue(r,{type:"number",max:1e3}),publisher_demand:ProperMedia.utils.validateValue(!1,{type:"boolean"}),hem_sha256:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(s,"sha256"),{type:"boolean"}),hem_sha1:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(s,"sha1"),{type:"boolean"}),hem_md5:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(s,"md5"),{type:"boolean"})}),e.displayed_ad=new adObj({price:0,gross:0,dfp_price:0,bidder:"unfilled",size:e.default_size.join("x"),adCode:"",tag_id:"",response_ms:t,floor:r}),properAdPool.displayed_ads.push(ProperMedia.utils.deepCopy(e.displayed_ad)),e.dispatchCustomEvent("proper-unfilled"),clearTimeout(properLog.tracker_timeout),properLog.tracker_timeout=null,properLog.tracker_timeout=properSetTimeout.setTimeout.call(properPage,(function(){properLog.proper_tracker()}),properLog.tracker_wait)}}function proper_debug_console(){debugObj.createDebugConsole()}function proper_debug_overlay(){debugObj.createDebugOverlays()}function formatCssSize(e){return"string"!=typeof e||-1===e.indexOf("%")&&"auto"!=e?e+"px":e}function getReportAdInfo(e){var t={};if(void 0!==e.site_name&&1==e.site_name&&(t.site_name=properOps.site_name),void 0!==e.split_version&&1==e.rtp_file_version&&(t.split_version=properOps.rtp_file_version),void 0!==e.slot_id){var r=ProperMedia.utils.extractSlotName(e.slot_id);properLog.autoplay_html[e.slot_id]&&(t.autoplay_html=properLog.autoplay_html[e.slot_id]),void 0!==properLog.log_lines&&(t.log_lines=properLog.log_lines),void 0!==properLog.saved_data[r]&&(t.saved_data=properLog.saved_data[r]),void 0!==properLog.ad_info[r]&&(t.ad_info=properLog.ad_info[r])}return t}function logMatchingResponse(e,t,r){cookieMatching.logMatchingResponse(e,t,r)}function getAdSlots(){return Object.keys(properPage.slots.display).concat(properPage.slots.video)}function refreshSlotByName(e){var t=properPage.getSlotFromPageObject(e,["display"]);return!!t&&(t.removeRefreshTimeout(),t.refreshSlot(!0),!0)}function disableSlotRefresh(e){var t=properPage.getSlotFromPageObject(e,["display"]);return!!t&&(t.disableSlotRefresh(),!0)}function spaNewPage(){propertag.cmd.push((function(){properPage.SpaNextPage()}))}function spaNewSection(e){propertag.cmd.push((function(){properLog.mylog("========== New SPA Section =========="),properPage.init_slots_build=0,properPage.rebuildSlots(e),properAdPool.startNewAuction()}))}function spaNewPageReset(){propertag.cmd.push((function(){properLog.mylog("========== New SPA Page With Dynamic Reset =========="),properPage.deleteDynamicSlots(),properPage.resetDynamicSlotInstanceCount(),properPage.SpaNextPage()}))}function newPageView(){propertag.cmd.push((function(){properLog.mylog("========== New Pageview =========="),properPage.newPageView()}))}function infScrollNewPage(){propertag.cmd.push((function(){properPage.InfScrollNextPage()}))}function buildSlots(){propertag.cmd.push((function(){properLog.mylog("Build slots called"),properPage.buildSlots()}))}function deleteSlot(e){var t=properPage.getSlotFromPageObject(e,["display"]);return!!t&&(t.deleteSlot(!0),!0)}function destroyDfpSlot(e){var t=properPage.getSlotFromPageObject(e,["display"]);return!!t&&(t.destroyDfpSlot(),!0)}function closeSliderSlot(e){var t=properPage.getSlotFromPageObject(e,["display"]);return!!t&&(t.closeSliderSlot(),!0)}function getVideoPlayerOps(e){var t=properPage.getSlotFromPageObject(e);return t&&t.video_player instanceof videoPlayer&&t.video_player.player_settings||{}}function createVideoSlot(e){try{return properLog.mylog("Create video slot for: "+e),properPage.video_enabled=!0,propertag.cmd.push((function(){var t=properPage.getSlotFromPageObject(e,["video"])?properPage.getSlotFromPageObject(e,["video"]):properPage.buildSlot("video",e);0==properAdPool.vid_auction_count&&properAdPool.startNewVideoAuction(t.video_player.player_settings.video_type,[t])})),!0}catch(e){return!1}}function runVideoAuction(e){propertag.cmd.push((function(){var t=properPage.getSlotFromPageObject(e);return!!(t&&t.video_player instanceof videoPlayer)&&(properAdPool.startNewVideoAuction(t.video_player.player_settings.video_type),!0)}))}function runNewAuction(){propertag.cmd.push((function(){return properAdPool.auction_refresh=!0,properAdPool.startNewAuction(!0),!0}))}function disableAuctionRefresh(){propertag.cmd.push((function(){return properLog.mylog("AdPool: Disable Auction Refresh"),properAdPool.auction_refresh=!1,properAdPool.clearNextAuctionTimeout(),!0}))}function getVideoAd(e){var t=properPage.getSlotFromPageObject(e);if(t&&t.video_player instanceof videoPlayer){var r=t.video_player.player_settings.video_type,s=properAdPool.getTimeLeftOnRunningAuctions(),o=!!(properAdPool.auction_count>0&&0==s.length),a=!o&&s.length>0?Math.min(s):0;if(t.getWinningBid(["video"],r),t.getWinningAmazonBid(["video"],r),t.hasWinningBid()||t.hasWinningAmazonBid()){var n=_0x432f92(t);t.clearNonWinningBid(n);var d=ProperMedia.utils.deepCopy(n);return t.tracking_times.dfp_sent_ts=ProperMedia.utils.getTimestampMs(),{auction:{finished:o,time_remaining:a},ad:d}}if("video"==t.type)return t.tracking_times.dfp_sent_ts=ProperMedia.utils.getTimestampMs(),{auction:{finished:o,time_remaining:a},ad:{price:t.getFloor("dfp_floor"),bidder:"dfp_floor",vast_tag:"",vast_type:"",vpaid:"",video_type:r,ad_details:""}};if(1!==t.displayed&&"display"==t.type&&o){var p=ProperMedia.utils.deepAccess(properOps,"ad_slots."+t.type+"."+t.name)||{};t.video_player.removePlayer(),t.setRefresh(p),t.getWinningBid(["display","native"]),t.getWinningAmazonBid(["display","native"]),showWinningAd(t)}}return!1}function destroyVideoPlayer(e){var t=properPage.getSlotFromPageObject(e);t&&t.video_player instanceof videoPlayer&&t.video_player.destroyVideoPlayer()}function logOutstreamAdSuccess(e,t){var r=properPage.getSlotFromPageObject(e);if(r&&r.video_player instanceof videoPlayer&&ProperMedia.utils.isPlainObject(t)&&t.id&&t.bidder&&t.price){r.hasWinningAmazonBid()?r.winning_amazon_ad.id==t.id?t=r.winning_amazon_ad:r.clearWinningAmazonBid():r.hasWinningBid()&&(r.winning_ad.id==t.id?t=r.winning_ad:r.clearWinningBid());var s=_0x59ab84(t.price,t.bid_adapter_name),o=_0x59ab84(t.gross,t.bid_adapter_name),a=_0x59ab84(r.getRunnerUp(),"sovrn_runner_up"),n=userIds.getEmailHashes()||{},d=ProperMedia.utils.getTimePassed(r.auction_started_ts),p={slot_name:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"dfp_name"),{type:"string",max_len:50}),bidder:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"bidder"),{type:"string",max_len:30}),gross:o,price:s,runner_up:a,size:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"size"),{type:"string",max_len:10}),refresh_cnt:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"refresh.count"),{type:"number",max:999}),line_item_id:"",response_ms:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"response_ms"),{type:"number",max:999999}),auction_duration:ProperMedia.utils.validateValue(d,{type:"number",max:999999}),precent_bids_ready:ProperMedia.utils.validateValue(100,{type:"number",max:100}),tag_id:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"tag_id"),{type:"string",max_len:50}),adid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"adid"),{type:"string",max_len:50}),adomain:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"adomain.0"),{type:"string",max_len:50}),cid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"cid"),{type:"string",max_len:50}),crid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"crid"),{type:"string",max_len:50}),dealid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"dealid"),{type:"string",max_len:50}),floor:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"floor"),{type:"number",max:999,max_len:15}),publisher_demand:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(t,"pub_demand"),{type:"boolean"}),fabrickId:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(t,"uids")||[]).indexOf("fabrickId"),{type:"boolean"}),id5id:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(t,"uids")||[]).indexOf("id5id"),{type:"boolean"}),idl_env:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(t,"uids")||[]).indexOf("idl_env"),{type:"boolean"}),publinkId:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(t,"uids")||[]).indexOf("publinkId"),{type:"boolean"}),"33acrossId":ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(t,"uids")||[]).indexOf("33acrossId"),{type:"boolean"}),connectid:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(t,"uids")||[]).indexOf("connectid"),{type:"boolean"}),pubcid:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(t,"uids")||[]).indexOf("pubcid"),{type:"boolean"}),hem_sha256:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(n,"sha256"),{type:"boolean"}),hem_sha1:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(n,"sha1"),{type:"boolean"}),hem_md5:ProperMedia.utils.validateValue(!!ProperMedia.utils.deepAccess(n,"md5"),{type:"boolean"})};t.displayed=1,r.size=t.size,r.displayed_ad=new adObj(ProperMedia.utils.deepCopy(t)),t.onBidWon(r),r.displayed=1,r.refresh.count++,r.last_displayed_ts=ProperMedia.utils.getTimestampMs(),r.tracking_times.dfp_returned_ts=ProperMedia.utils.getTimestampMs(),r.tracking_times.creative_on_page=ProperMedia.utils.getTimestampMs(),r.dispatchCustomEvent("video-ad-played"),r.dispatchCustomEvent("proper-ads-fired",{cpm:p.price,size:p.size,ad_type:ProperMedia.utils.deepAccess(r,"displayed_ad.video_type")}),properSession.setSessionRevenue(p.price),properAdPool.displayed_ads.push(ProperMedia.utils.deepCopy(r.displayed_ad)),ProperMedia.utils.deepSetValue(properLog,"bid_data.ad_slots."+r.dfp_name,p),r.sticky&&proper_inview(0,r.name,t.size,t.crid,0,t.adid),clearTimeout(properLog.tracker_timeout),properLog.tracker_timeout=null,properLog.tracker_timeout=properSetTimeout.setTimeout.call(properPage,(function(){properLog.proper_tracker()}),properLog.tracker_wait),properLog.mylog("displayed! ("+r.name+", bidder="+p.bidder+", size="+p.size+", price="+p.price+")")}return!0}function logVideoAdSuccess(e,t,r){var s=properPage.getSlotFromPageObject(e);if(s&&s.video_player instanceof videoPlayer){var o=ProperMedia.utils.getTimePassed(s.auction_started_ts),a=properDevice.isMobile()?"640x480":"400x300",n=null;if(t){var d="dfp_video",p=parseFloat(t)+.01;const e=_0x59ab84(s.winning_ad?.price,s.winning_ad?.bid_adapter_name);n={slot_name:ProperMedia.utils.validateValue(s.dfp_name,{type:"string",max_len:50}),bidder:ProperMedia.utils.validateValue(d,{type:"string",max_len:30}),gross:ProperMedia.utils.validateValue(p,{type:"number",max:999,max_len:15}),price:ProperMedia.utils.validateValue(p,{type:"number",max:999,max_len:15}),runner_up:e,size:ProperMedia.utils.validateValue(a,{type:"string",max_len:10}),refresh_cnt:ProperMedia.utils.validateValue(s.refresh.count,{type:"number",max:999}),line_item_id:"",response_ms:ProperMedia.utils.validateValue(o,{type:"number",max:999999}),auction_duration:ProperMedia.utils.validateValue(o,{type:"number",max:999999}),precent_bids_ready:ProperMedia.utils.validateValue(100,{type:"number",max:100}),tag_id:ProperMedia.utils.validateValue("",{type:"string",max_len:50}),floor:ProperMedia.utils.validateValue(t,{type:"number",max:999,max_len:15}),publisher_demand:ProperMedia.utils.validateValue(!!properOps.remote_gam,{type:"boolean"})},s.displayed_ad=new adObj({type:"video",price:p,gross:p,dfp_price:p,bidder:d,size:a,adCode:"",tag_id:"",response_ms:o,displayed:1,video_type:s.video_type,floor:t}),s.clearWinningBid()}else if(s&&s.video_player instanceof videoPlayer&&ProperMedia.utils.isPlainObject(r)&&r.id&&r.bidder&&r.price){s.hasWinningAmazonBid()?s.winning_amazon_ad.id==r.id?r=s.winning_amazon_ad:s.clearWinningAmazonBid():s.hasWinningBid()&&(s.winning_ad.id==r.id?r=s.winning_ad:s.clearWinningBid());var l=_0x59ab84(r.price,r.bid_adapter_name),c=_0x59ab84(r.gross,r.bid_adapter_name),u=_0x59ab84(s.getRunnerUp(),"sovrn_runner_up");userIds.getEmailHashes();n={slot_name:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(s,"dfp_name"),{type:"string",max_len:50}),bidder:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"bidder"),{type:"string",max_len:30}),gross:c,price:l,runner_up:u,size:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"size"),{type:"string",max_len:10}),refresh_cnt:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(s,"refresh.count"),{type:"number",max:999}),line_item_id:"",response_ms:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"response_ms"),{type:"number",max:999999}),auction_duration:ProperMedia.utils.validateValue(o,{type:"number",max:999999}),precent_bids_ready:ProperMedia.utils.validateValue(100,{type:"number",max:100}),tag_id:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"tag_id"),{type:"string",max_len:50}),adid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"adid"),{type:"string",max_len:50}),adomain:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"adomain.0"),{type:"string",max_len:50}),cid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"cid"),{type:"string",max_len:50}),crid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"crid"),{type:"string",max_len:50}),dealid:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"dealid"),{type:"string",max_len:50}),floor:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"floor"),{type:"number",max:999,max_len:15}),publisher_demand:ProperMedia.utils.validateValue(ProperMedia.utils.deepAccess(r,"pub_demand"),{type:"boolean"}),fabrickId:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(r,"uids")||[]).indexOf("fabrickId"),{type:"boolean"}),id5id:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(r,"uids")||[]).indexOf("id5id"),{type:"boolean"}),idl_env:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(r,"uids")||[]).indexOf("idl_env"),{type:"boolean"}),publinkId:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(r,"uids")||[]).indexOf("publinkId"),{type:"boolean"}),"33acrossId":ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(r,"uids")||[]).indexOf("33acrossId"),{type:"boolean"}),connectid:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(r,"uids")||[]).indexOf("connectid"),{type:"boolean"}),pubcid:ProperMedia.utils.validateValue(-1!==(ProperMedia.utils.deepAccess(r,"uids")||[]).indexOf("pubcid"),{type:"boolean"}),hem_sha256:ProperMedia.utils.validateValue(!!userIds.getEmailHashes(),{type:"boolean"}),hem_sha1:ProperMedia.utils.validateValue(!!userIds.getEmailHashes(),{type:"boolean"}),hem_md5:ProperMedia.utils.validateValue(!!userIds.getEmailHashes(),{type:"boolean"})},r.displayed=1,s.size=r.size,s.displayed_ad=new adObj(ProperMedia.utils.deepCopy(r)),r.onBidWon(s)}n&&(s.displayed=1,s.refresh.count++,s.last_displayed_ts=ProperMedia.utils.getTimestampMs(),s.tracking_times.dfp_returned_ts=ProperMedia.utils.getTimestampMs(),s.tracking_times.creative_on_page=ProperMedia.utils.getTimestampMs(),s.dispatchCustomEvent("video-ad-played"),s.dispatchCustomEvent("proper-ads-fired",{cpm:n.price,size:n.size,ad_type:ProperMedia.utils.deepAccess(s,"displayed_ad.video_type")}),properSession.setSessionRevenue(n.price),properAdPool.displayed_ads.push(ProperMedia.utils.deepCopy(s.displayed_ad)),ProperMedia.utils.deepSetValue(properLog,"bid_data.ad_slots."+s.dfp_name,n),clearTimeout(properLog.tracker_timeout),properLog.tracker_timeout=null,properLog.tracker_timeout=properSetTimeout.setTimeout.call(properPage,(function(){properLog.proper_tracker()}),properLog.tracker_wait),properLog.mylog("displayed! ("+s.name+", bidder="+n.bidder+", size="+n.size+", price="+n.price+")"))}return!0}function logVideoUnfilled(e){var t=properPage.getSlotFromPageObject(e);t&&log_unfilled(t)}function logVideoAdError(e,t,r){var s=new Error(JSON.stringify(t.msg));s.bidder=t.bidder,t.stack&&(s.stack=t.stack),s.event_type="video_exception",sendError(s);var o=properPage.getSlotFromPageObject(e);if(o&&(o.hasWinningBid()&&"dfp"!==t.bidder&&(delete o.winning_ad,o.winning_ad={}),o.hasWinningAmazonBid()&&"dfp"!==t.bidder&&(delete o.winning_amazon_ad,o.winning_amazon_ad={}),!0===r&&"display"==o.type)){var a=ProperMedia.utils.deepAccess(properOps,"ad_slots."+o.type+"."+o.name)||{};o.setRefresh(a),o.refreshSlot()}}function proper_remnant(e,t){if(!properPage.getSlotByNumber(t,["display"]))return properLog.mylog("Couldn't find slot with number: "+t),!1;proper_render(e,t,0)}function runATS(e){userIdAdapters.liveRampATS&&userIdAdapters.liveRampATS.runATS(e)}function publisherAudiencesOptOut(e){ProperMedia.utils.deepAccess(bidAdapters,"a9.updateOptOut")&&bidAdapters.a9.updateOptOut(e)}function testRps(e){try{if(!e||!parseFloat(e))return;ProperMedia.utils.deepSetValue(properSession,"sessionData.last_threshold",parseFloat(e-.01)),ProperMedia.utils.deepSetValue(properSession,"sessionData.revenue",.001),properSession.setSessionRevenue(1e3*e),ProperMedia.utils.isFn(audiencePixels.controller.checkThresholds)&&audiencePixels.controller.checkThresholds()}catch(e){}}function refreshAuctionAndSlotsByName(e){try{ProperMedia.utils.isArray(e)&&e.length>0&&(properAdPool.size_override=e),runNewAuction(),e.forEach((function(e){refreshSlotByName(e)}))}catch(e){}}function getUserIdsAsEids(){return ProperMedia.utils.deepCopy(userIds.getEidsArray())}function _0x9628(e,t){const r=_0x5b2f();return(_0x9628=function(e,t){return r[e-=200]})(e,t)}function _0x5b2f(){const e=["string","hasWinningAmazonBid","1506604dvjaxm","bidder","_0x4f6067","winning_amazon_ad","indexOf","winning_ad","_0x1530b1","isNumber","183670gFykEt","undefined","dfp_bid_price","sort","hasWinningBid","_0x2b21de","_0x4d3546","21KvlqEG","log","b64DecodeUnicode","winning_ad.dfp_price","isStr","replace","WyIxZ3Vib3FvIiwiejMxbzh3IiwiMXlsbHA4ZyIsIjhnNG5pOCIsIjE3eW9vaHMiLCJxN2VvMDAiLCIxcHB5b3prIiwiY3Z5NW1vIiwiMWNlaTZtOCIsInVuODY0ZyIsIjF1NXM3NDAiLCI0MGI1ZHMiLCIxM2l2NmRjIiwibHJsNXZrIiwiMWxhNTZ2NCIsImYzdXdvdyIsIjFlbWV4b2ciLCJ3djR4Nm8iLCIxd2RveTY4IiwiNjg3d2cwIiwiMTVxcnhmayIsIm56aHd4cyIsIjFuaTF4eGMiLCJhbzFla2ciLCIxYTZsZmswIiwic2ZiZjI4IiwiMXJ4dmcxcyIsIjFzZWViayIsIjExYXlmYjQiLCJqam9ldGMiLCIxajI4ZnN3IiwiZzd0YTgwIiwiMWZxZGI3ayIsInh6M2FwcyIsIjF4aG5icGMiLCI3YzY5ejQiLCIxNnVxYXlvIiwicDNnYWd3IiwiMW9tMGJnZyIsImJyenMzayIsIjFiYWp0MzQiLCJ0ajlzbGMiLCIxdDF0dGt3IiwiMndjcnVvIiwiMTJld3N1OCIsImtubXNjZyIsIjFrNjZ0YzAiLCJkendqNXMiLCIxZGlnazVjIiwidnI2am5rIiwiMXY5cWtuNCIsIjU0OWl3dyIsIjE0bXRqd2ciLCJtdmpqZW8iLCIxbWUza2U4IiwiOWszMTFjIiwiMTkybjIwdyIsInJiZDFqNCIsIjFxdHgyaW8iLCJvZzBzZyIsIjEwNzAxczAiLCJpZnExYTgiLCIxaHlhMjlzIiwiZ3JzZ3prIiwiMWdhY2h6NCIsInlqMmhoYyIsIjF5MW1pZ3ciLCI3dzVncW8iLCIxN2VwaHE4IiwicG5maDhnIiwiMXA1emk4MCIsImNieXl2NCIsIjFidWl6dW8iLCJ1Mzh6Y3ciLCIxdGx0MGNnIiwiM2dieW04IiwiMTJ5dnpscyIsImw3bHo0MCIsIjFrcTYwM2siLCJlanZweGMiLCIxZTJmcXd3Iiwid2I1cWY0IiwiMXZ0cHJlbyIsIjVvOHBvZyIsIjE1NnNxbzAiLCJuZmlxNjgiLCIxbXkycjVzIiwiYTQyN3N3IiwiMTltbThzZyIsInJ2YzhhbyIsIjFyZHc5YTgiLCIxOGY3azAiLCIxMHF6OGprIiwiaXpwODFzIiwiMWlpOTkxYyIsImZudTNnZyIsIjFmNmU0ZzAiLCJ4ZjQzeTgiLCIxd3hvNHhzIiwiNnM3MzdrIiwiMTZhcjQ3NCIsIm9qaDNwYyIsIjFvMjE0b3ciLCJiODBsYzAiLCIxYXFrbWJrIiwic3phbHRzIiwiMXNodW10YyIsIjJjZGwzNCIsIjExdXhtMm8iLCJrM25sa3ciLCIxam03bWtnIiwiZGZ4Y2U4IiwiMWN5aGRkcyIsInY3N2N3MCIsIjF1cHJkdmsiLCI0a2FjNWMiLCIxNDJ1ZDR3IiwibWJrY240IiwiMWx1NGRtbyIsIjkwM3U5cyIsIjE4aW52OWMiLCJxcmR1cmsiLCIxcTl4dnI0IiwiNGd1MHciLCJ6bjB2MGciLCJodnF1aW8iLCIxaGVhdmk4IiwiaGxyOTR3IiwiMWg0YmE0ZyIsInpkMTltbyIsIjF5dmxhbTgiLCI4cTQ4dzAiLCIxODhvOXZrIiwicWhlOWRzIiwiMXB6eWFkYyIsImQ1eHIwZyIsIjFjb2hzMDAiLCJ1eDdyaTgiLCIxdWZyc2hzIiwiNGFhcXJrIiwiMTNzdXJyNCIsIm0xa3I5YyIsIjFsazRzOHciLCJmZHVpMm8iLCIxZXdlajI4IiwieDU0aWtnIiwiMXdub2prMCIsIjZpN2h0cyIsIjE2MHJpdGMiLCJvOWhpYmsiLCIxbnMxamI0IiwiYXkwenk4IiwiMWFnbDB4cyIsInNwYjBnMCIsIjFzN3YxZmsiLCIyMmR6cGMiLCIxMWt5MG93IiwianRvMDc0IiwiMWpjODE2byIsImdoc3ZscyIsIjFnMGN3bGMiLCJ5OTJ3M2siLCIxeHJteDM0IiwiN201dmN3IiwiMTc0cHdjZyIsInBkZnZ1byIsIjFvdnp3dTgiLCJjMXpkaGMiLCIxYmtqZWd3IiwidHQ5ZHo0IiwiMXRidGV5byIsIjM2Y2Q4ZyIsIjEyb3dlODAiLCJreG1kcTgiLCIxa2c2ZXBzIiwiZTl3NGprIiwiMWRzZzVqNCIsIncxNjUxYyIsIjF2anE2MHciLCI1ZTk0YW8iLCIxNHd0NWE4IiwibjVqNHNnIiwiMW1vMzVzMCIsIjl1Mm1mNCIsIjE5Y21uZW8iLCJybGNtd3ciLCIxcjN3bndnIiwieWZtNjgiLCIxMGd6bjVzIiwiaXBwbW8wIiwiMWk4OW5uayIsImgxczJkYyIsIjFna2MzY3ciLCJ5dDIydjQiLCIxeWJtM3VvIiwiODY1MjRnIiwiMTdvcDM0MCIsInB4ZjJtOCIsIjFwZnozbHMiLCJjbHlrOHciLCIxYzRpbDhnIiwidWQ4a3FvIiwiMXR2c2xxOCIsIjNxYmswMCIsIjEzOHZremsiLCJsaGxraHMiLCIxbDA1bGhjIiwiZXR2YmI0IiwiMWVjZmNhbyIsIndsNWJzdyIsIjF3M3Bjc2ciLCI1eThiMjgiLCIxNWdzYzFzIiwibnBpYmswIiwiMW44MmNqayIsImFlMXQ2byIsIjE5d2x1NjgiLCJzNWJ0b2ciLCIxcm52dW8wIiwiMWllc3hzIiwiMTEweXR4YyIsImo5b3RmayIsIjFpczh1ZjQiLCJmeHRvdTgiLCIxZmdkcHRzIiwieHAzcGMwIiwiMXg3bnFiayIsIjcyNm9sYyIsIjE2a3Fwa3ciLCJvdGdwMzQiLCIxb2MwcTJvIiwiYmkwNnBzIiwiMWIwazdwYyIsInQ5YTc3ayIsIjFzcnU4NzQiLCIybWQ2Z3ciLCIxMjR4N2dnIiwia2RuNnlvIiwiMWp3Nzd5OCIsImRwd3hzMCIsIjFkOGd5cmsiLCJ2aDZ5OXMiLCIxdXpxejljIiwiNHU5eGo0IiwiMTRjdHlpbyIsIm1sankwdyIsIjFtNDN6MGciLCI5YTNmbmsiLCIxOHNuZ240IiwicjFkZzVjIiwiMXFqeGg0dyIsImVnZmVvIiwiengwZ2U4IiwiaTVxZndnIiwiMWhvYWd3MCIsImhncmdnMCIsIjFnemJoZmsiLCJ6ODFneHMiLCIxeXFsaHhjIiwiOGw0Zzc0IiwiMTgzb2g2byIsInFjZWdvdyIsIjFwdXlob2ciLCJkMHh5YmsiLCIxY2poemI0IiwidXM3eXRjIiwiMXVhcnpzdyIsIjQ1YXkybyIsIjEzbnV6MjgiLCJsd2t5a2ciLCIxbGY0emswIiwiZjh1cGRzIiwiMWVyZXFkYyIsIngwNHB2ayIsIjF3aW9xdjQiLCI2ZDdwNHciLCIxNXZycTRnIiwibzRocG1vIiwiMW5uMXFtOCIsImF0MTc5YyIsIjFhYmw4OHciLCJza2I3cjQiLCIxczJ2OHFvIiwiMXhlNzBnIiwiMTFmeTgwMCIsImpvbzdpOCIsIjFqNzg4aHMiLCJnY3Qyd3ciLCIxZnZkM3dnIiwieTQzM2VvIiwiMXhtbjRlOCIsIjdoNjJvMCIsIjE2enEzbmsiLCJwOGczNXMiLCIxb3IwNDVjIiwiYnd6a3NnIiwiMWJmamxzMCIsInRvOWxhOCIsIjF0NnRtOXMiLCIzMWNramsiLCIxZG5nY3U4IiwibjBqYzNrIiwiMXF5d3Y3ayIsImd3czlvZyIsIjE3anBhZjQiLCJ1ODhzMXMiLCIxa3Y1c3NnIiwiNXQ4aWRjIiwiMTlybTFoYyIsImo0cDBxbyIsIjF4Mm54bW8iLCJiZDBlMHciLCIxMXp4ZXJrIiwidmM3NWt3IiwiMWx6NDZiayIsIjlnbXBzIiwiMWg5YjJ0YyIsInFtZTIybyIsIjF1a3JsNm8iLCJmaXVhcmsiLCIxNjVyYmk4Iiwic3VhdDR3IiwiMWpoN3R2ayIsIjdyNW8xcyIsIjFicGo3NXMiLCJsMm02ZjQiLCIxdm9weXBzIiwiOXoyZjQwIiwiMTBsemZ1byIsInl5MXZrMCIsIjFwa3l3YW8iLCIzdmJjb3ciLCIxZWhmNHprIiwibnVpNDh3IiwiMXJzdm5jdyIsImcydGhqNCIsIjE2cHFpOXMiLCJ0ZTl6d2ciLCIxazE3MG40IiwiNHo5cTgwIiwiMTh4bjljMCIsImlhcThsYyIsIjF5ajNzdzAiLCJjdGc5YTgiLCIxM2dkYTB3Iiwid3NuMHU4IiwiMW5mazFrdyIsIjFwd2h6NCIsIjFmbnZldjQiLCJwMHllNGciLCIxc3pieDhnIiwiZHhlbXRjIiwiMTRrYm5rMCIsInI4djU2byIsIjFodnM1eGMiLCI3dG5rZTgiLCIxYnMxM2k4IiwibDU0MnJrIiwiMXZyN3YyOCIsImExa2JnZyIsIjEwb2hjNzQiLCJ4Y203bHMiLCIxbnpqOGNnIiwiMjl2b3FvIiwiMWN2emgxYyIsIm05MmdhbyIsIjFxN2Z6ZW8iLCJoajljc2ciLCIxODY2ZGo0IiwidXVwdjVzIiwiMWxobXZ3ZyIsIjZmcGxoYyIsIjFhZTM0bGMiLCJqcjYzdW8iLCIxeHA1MHFvIiwiYnpoaDR3IiwiMTJtZWh2ayIsInZ5bzhvdyIsIjFtbGw5ZmsiLCJ2eHB0cyIsIjFnaHU3MGciLCJwdXg2OXMiLCIxdHRhcGRzIiwiZXJkZXlvIiwiMTVlYWZwYyIsInMydHhjMCIsIjFpcHF5Mm8iLCI2em9zOHciLCIxYXkyYmN3Iiwia2I1YW04IiwiMXV4OTJ3dyIsIjk3bGpiNCIsInp1aWsxcyIsIno1amtsYyIsIjFwc2dsYzAiLCI0MnQxcTgiLCIxZW93dTB3IiwibzF6dGE4IiwiMXMwZGNlOCIsImdhYjZrZyIsIndkbm1yayIsIjhzbTU4ZyIsIm44MTE0dyIsImJraTMyOCIsInNlMmd3MCIsIjNmMzBnMCIsImh1aHdjZyIsImU4bjZkYyIsInhudXI1cyIsIjZieXF5byIsInByNmJyNCIsIjkzdW9zZyIsInR4MDhocyIsIjFtNW5nZyIsImxudWJjdyIsImdvMW1ndyIsInYzZ2lkYyIsIjdpZjB1OCIsIm5scmgxYyIsImN4NzNzdyIsInJjbHpwYyIsIjJkbWo5YyIsImp1d3lkYyIsImV2NDloYyIsIjUzbjF0cyIsImF4ZWl2NCIsImR0eWJrIiwiZnM3ZjI4IiwiOGFpZHE4IiwiYm92ZW8wIiwiNDc2ZGMwIiwiZG1za2NnIiwiNXE0NHhzIiwiOXZ5MW9nIiwiMXFpejI4IiwiaGp2dHZrIiwiNzBiOWMwIiwiY2YzY2FvIiwiMzlncW8wIiwiZXpobDM0IiwiNGZ4MGprIiwiYTlvaGt3IiwicDJodmsiLCJnaWZjb3ciLCI4Z2Z3MXMiLCJiOGJ0dmsiLCIzcW1zamsiLCJlNTdrZTgiLCI2bmlqMjgiLCI5ZmVndzAiLCIxNjhqcjQiLCJnemxla2ciLCI3ZXpldjQiLCJkOHF2d2ciXQ","AMZN_BID_KEYS","round","validateValue","floor","2651388lbkopo","_0x359c5d","5ptepsE","safeJsonParse","564896znNYLx","length","utils","testBid","WyIxdTc2MjlzIiwiY3hjMHNnIiwiMWNmdzFzMCIsImxzejExYyIsIjFsYmoyMHciLCI0MXAwamsiLCIxM2s5MWo0IiwiejRmamVvIiwiMXltemtlOCIsImpyVUdMSmwiLCJHaGRUMDFIIiwidXpITXFIWCIsIkRVbXNEaDIiLCJ2UkhuYzdEIiwiY1VDYWJmdSIsIklaSE8zMTkiLCIxSzA5bVQ0IiwiRnduYWdnNCIsIlFTYWNyV0kiLCJGZVpPQVFjIiwiUnI1UDhMZSIsIkZjRHpENjQiLCJQYTdaRkdxIiwiREkwbkVMTSIsIjR2bTFiZmwiLCJIaEIwNTZxIiwiaG9jZ2tqZiIsIm9WcVRmTXEiLCJFMDQ0WHg5IiwiWDJtc3VnQyIsIjYxVkhzNDIiLCJJU0JQbHJaIiwicDZISGQ1cSIsInhodmhMaTMiLCJZZ0FUTzFuIiwiMWliY2RuOSIsIkdxZGFuSXoiLCJUYUQ2WEFNIiwib0E4VUtJNyIsInRoaVp4SXIiLCI0T3ViTzJIIiwiVTVPMnZRVCIsIkVwMXFPTU0iLCJHQlgwYW5ZIiwiTTR2RVlXaCIsIkpvaE51OFgiLCJNRTdZejAzIiwicHJwZWd4VCIsImVzZmhocDAiLCI3T3J2VTBsIiwiSE1tc3dVdyIsInFDQ2NVR3oiLCJFNGpERlZXIiwiemZ6aWc1ZSIsIm9EZUIwZ2EiLCJCbXhuNEtqIiwiTVR1NmFTaSIsInF3VW9xeE8iLCJ3dG56U2dQIiwicTdxRWl5biIsIkhoeW1hT1ciLCJFNU03dE9DIiwiMlJBVzdKNSIsIlVUdFFiWEQiLCJ2SDJQMU9BIiwiTjhydGN6dyIsIlFGSG1OSngiLCJMNUJEYjlOIiwiOVBuNmd5USIsIkZZQThIeUsiLCJUODJZdVRLIiwiT3czWTd2NyIsIno2UFJGUTkiLCJQMlpJYWVMIiwiZ1FoUWljMyIsIjFBYlo1WEMiLCJEY3R3TjFDIiwiSXc1cDZsVSIsIjV1OWVKTE0iLCI4VzhjNTVjIiwiSlQ1NWNkeCIsIlYyM3lYS1oiLCJxVWhCa0FkIiwiWmhoQ1VFWSIsImZvaXpnaDEiLCJXckVJenFXIiwiNkpNcElTZCIsIjZOczBvQkkiLCJrMGdZVmdaIiwiOGl2c3RlYyIsIldDem1QcFEiLCJkeU4yTkllIiwid1l0WXYyMyIsInl5dlpSRE4iLCJTODY1SXZWIiwidnJNTnd6TCIsIktsZm4xdnciLCJTQWNiQ1NBIiwieEZHaERIZSIsInFDNVFiUHciLCJNUkhaQXZpIiwiWHllQjMybiIsInpldEtpRWUiLCJRSWNBWlRQIiwiTDBldEF3SiIsImV4cXJiZlkiLCJGR2xubFB4IiwiaTl1YzlLYSIsImd3d05qSTQiLCJtWmVyZ3hzIiwiNHJSWG0zTCIsIncwM3pNaU8iLCJSUk5SWU84IiwickxKWjJDTCIsIlNYOWExek4iLCJ2TWdEMmpJIiwicnpSd2lFMiIsInB1R3pUdEwiLCJONzJUYVZCIiwiaGo5TFg4RCIsIjlPb25sazEiLCJMR0NlTEZoIiwiV0lEYzI0cyIsIkxCbjF1d1IiLCJtUjVMejVmIiwiSjVtcEs2MyIsIlhUUDhFYjYiLCJ3dndTN2Y3IiwiNVpVaEZhOSIsIlBiM29OSGciLCJPenlocVNWIiwiRGhXTFBieCIsIm8zZzBXSHMiLCJxUzI3THhHIiwiYlFBeTFWTCIsIkxlUWpEWHYiLCJiUFBiUnlZIiwiYWdsSm5UdyIsIkFyTVhraE8iLCJTNGZuOXpkIiwiUFNkZExubyIsIkxJeU5icXUiLCJwbDlLd3VZIiwiV0dLUGhNVCIsIlpwajJrc2UiLCJjMHhUV2VEIiwiSnhyZHNKRSIsImZtTmZvS3QiLCJNenNpVWUwIiwiRGh3N0l1ZyIsImNkajkzcTciLCI5MFdncjJsIiwiSkhoRll3eCIsIjJjMFllWUoiLCJISDF4Y29iIiwidFNqTHltMCIsInVtSE04dDgiLCJIenpXUElRIiwid0RiUDF2MCIsIkE4TlFJUWoiLCJzREdhYUU3IiwiU3pUOFB0YyIsInc5WWZCMUwiLCI4cXliMkhSIiwiZEZKWlB6dSIsInBsUGZhQnMiLCJuUHREdEpjIiwiODZ1OWQ0UiIsIk04WGgxT2EiLCJSTm5XTmJNIiwiQU5KQ1RScyIsIkdzdUY4QzkiLCJkOHFmQXZFIiwiU2F0OVA5biIsIk5Namp0ZlMiLCJlczRHYTVYIiwiRVV5Z1NmOSIsIjZrM2RkV2giLCJLVmdxQzJ5IiwiekhtSHdFciIsIjVPaDZwYmEiLCJLcWllaE5PIiwiaFF6NVRCaCIsIjhHM2cycjkiLCJwbDBIbVVwIiwiZ0hGUHo3YSIsIk1HZHFVVjkiLCI4OFA5OHcwIiwiNW0wd2x2RiIsIkZ4c25SYTkiLCJBZjFYb1JVIiwiYkxnQUo5SyIsIm9CRFdNbmQiLCJFalQ5UWdPIiwib3V3NnNqaiIsIjlBU1cyREUiLCJwM1JZQlFwIiwicEdjdDlIYyIsImgyeE5oYkMiLCJrRnFpUmMxIiwiVHpQTnFoNiIsIjRQdUo5b0kiLCJxM3d6RkJhIiwiWElKSUZxMiIsInFnNlR5NEoiLCJkVnZpWFFuIiwid1pNUGdLYSIsIkNiMWFaR0QiLCJPS0hMN0F6IiwiMmRJd3l2UyIsImhVbkFEYXkiLCJqRjZYOEI2Iiwialp6QzhNaSIsIndVVldzZ2UiLCJRZjFub29mIiwiTGpKaEZhRiIsIkoxTDZmM20iLCJMTlFTemtKIiwiUTZxTENiRiIsIkd3WnREYVAiLCJXVzFPSG1lIiwiaEtHdHMzQSIsIjFCaElOTm0iLCJuN3VEUUNGIiwiY0lIMFM4QiIsIjdxY1NKeWMiLCJUWGZtbVdwIiwiWER4bkJ1ZSIsInVGbUUyOFEiLCJjTE1FOG1QIiwibmJUZU5ldSIsIjFBY09RQTYiLCJ5dzlDaGJqIiwiMlg5ZktSSSIsInN4Y2lyQmgiLCJkSFdiU3FOIiwiZU5sVjZJRiIsIlNwbkViSVYiLCJNY3A4TzdEIiwicFhJRW96TiIsIk1PamdYQlYiLCI5M3p5QVdNIiwiZ1pmekVHTCIsIlhJTEJzcTMiLCJlUndwdGxUIiwiek96d0hqbyIsInVEWjRuTlgiLCJiQTc3TE5MIiwidUpsS2J5WCIsIktWSVFyOU8iLCJiYXpLZlBZIiwibTh1YXdYZiIsImV2UjFPNEgiLCJBVUwzaXdaIiwiWkFmWHFGZiIsIjFWNDFRbkMiLCJiRXZvVGVnIiwiVFZ1Nmh0YSIsIlhhc0ROOUciLCJTdEc3VU1uIiwiR3NYbnJMYSIsIkJIQlBoVTYiLCJLN1hDSVlZIiwieWI1Z01oQSIsIk1US2RkQWQiLCJFbkRJZ0lVIiwiYUE3N0l5MSIsIk5nNWwyTEEiLCJCSndIeW1WIiwiVmoxdTh6MyIsIk1sQTUxelAiLCJGRFA2YnZ4IiwiNThicllYeCIsIjliN21jSlkiLCIzN2UxamM0IiwiQ0xCbDRpYiIsInRMb01GTDciLCJaWlQ3SjJpIiwiR1NFblRCYSIsIkxGQkFLTzgiLCJSdjBoMzFXIiwiRzhlSFR0WiIsImxpZEQ5NVQiLCJaWEZjeHlVIiwiNE9URVo4bSIsImF0TmY5Z1UiLCJZck5FaHlhIiwiOGVST1ZxZSIsImVWdnl1S0YiLCI3eDk4em1MIiwiOVhFT2tNViIsIk1sRFRxM1MiLCJjQ01lNjhIIiwiWHF2MExiUSIsInZhVm0xMk0iLCI2ZWdGUWExIiwiUG1MODYwaCIsIkM0dGd3YVIiLCJlbnhFN05GIiwiOG9xTmZtWSIsIkhoakEwWU8iLCJ1dTIxTnd6IiwidExOaURRVyIsIk8zYldyNVQiLCIxWTI4TENVIiwibjFNd0pvNyIsIkVMVGVyNUQiLCJZb1Y1OU51Iiwic056SW5heCIsIlVGVXdDTHYiLCJPczNuTzFIIiwiWUJSRTVUdyIsIkl0S2c0R1UiLCJOUDRRTU9uIiwibEFPNmxnbyIsIm1ieHlEeTMiLCJDNGJKclduIiwiMHhGc1NDVSIsIlF0SkplU1EiLCJsSVBMRlp5IiwiVzZNUUprNiIsIjhNQlhYZWciLCJUR0w4RzdHIiwidmVwb3RVUyIsIjRwV2M1R3kiLCJNaDZBand6IiwiQ2x1Z21oUSIsIjQ2ZHRoZFUiLCJ1eGYzS28yIiwiSU5KTG53QSIsIjc4UEhSWHkiLCJvNzNyRExFIiwiT2VkV3Q2MSIsInhkc3RVMDMiLCI0V1Z3S08wIiwiSXV2aWZqUiIsIm9JNDBsb04iLCJ2eFp3Z3pmIiwiT1psRGlzNiIsIlRJcTVoVTUiLCJXUWZXUERKIiwiNnlDaXlGZCIsImlsNHltS2wiLCJtdGtvdUZmIiwiR0VQZnJqQSIsIlhwRXdyV2QiLCIyMDQyMHdUIiwicHRjTzViYSIsIlB0QU9Ub28iLCJ3aGhkWGFPIiwicnJFMW83ZyIsIkFDeEFoTEUiLCJzeGR5cWhpIiwiZFJPWTZENiIsInJLRm12RE8iLCJZeEpHNkxBIiwidENOUVFoQiIsIkVXanNJQW8iLCJUUUZLVzRvIiwiS2xzdjN2MCIsImlOQ3k4eE0iLCJYeFJJOG1pIiwiWmZ3dW82TSIsIjc2ck9PcmoiLCJTQThSWmZDIiwiUU4weUJxdSIsIlRJY2JCbTQiLCJvUFNnSUNlIiwiYWRiaWMyayIsIkRjWnpISkkiLCI0ODVzVTR4IiwiM2RrbGpYNSIsIktuNzVjR0giLCJBSWpQSzlXIiwiZWFyNTlGVyIsIko3QTBmMUQiLCJzQTRYUzhoIiwiRjNqQ0FjQyIsIjhBakRPekoiLCJJU3YxekZHIiwiMjVmczFldCIsImxsWEM3ZUUiLCJWSmFHRXpoIiwiRGwwd2ZWbyIsImVGOTZEQ3IiLCJoTUQ5MzJ1IiwiVTFDb0ltSiIsIkFhQnJ1ekUiLCJ6RTlaYnUzIiwiTzdRZXNpaCIsInhESHd1bDkiLCJXaU1mU2l5IiwiMG9FaDRlTiIsImZrZXRzbE0iLCJxbVRMQktlIiwiQWtldnZoSSIsImRncjdWaGEiLCJRYVpJbzdLIiwiTktXNjJmcSIsInpqQXdua2EiLCJhS2Q1b3FpIiwic2JWV0NDZiIsImtrOFVnUDUiLCJHRDVKeEhDIiwienlEbW1lVyIsIlU4WjdTbWYiLCI4MzBNbk1yIiwiZG5pWHJzSCIsIkdEaXI2NnYiLCJkekJPelN4IiwiWkR1eUppSCIsIjAxb2tlcmIiLCI1eU1hWnB0IiwiVWhvUUFxWSIsIjZPc1k1OGgiLCIzeUY0MGNNIiwiV1BtcEgyMiIsIm5tS3kxNGEiLCJraEJVbHBzIiwiZlpDTmYyMiIsIjJxcENOTWUiLCJuT28yRlN4Iiwiakc2ODdXTyIsIkFCMEdxVUIiLCIxZ21xTnRrIiwiY0JMOVlsUCIsIkFTS0Z6Mm8iLCJrN05QSVVmIiwiUnN1SmI3TCIsIlliTFB1TXMiLCI1YVk4SktoIiwiYUhWWlpuRCIsIlNra1k1RVYiLCIyYUN1SWNyIiwiaTVzUEo4ciIsIm1WNTk5a0YiLCJVMVA3SnNtIiwibXo4QWFEZCIsIm0zeDIybU4iLCJ0ZXN0QmlkIl0=","deepAccess","6140640mfFKYh","price","216088FksDgJ","amazon_ads","2183500ftVMee","9cbSqbe","sizes","bid_mapping_error","18ATyZHM","min","_0x59ab84","size"];return(_0x5b2f=function(){return e})()}userIdAdapters.id5Id=new id5IdAdapter,audiencePixels.controller=(networks={},{init:function(e,t){var r=ProperMedia.utils.mergeObject({},e);r.networks&&Object.keys(r.networks).length&&Object.keys(r.networks).forEach((function(e){ProperMedia.utils.deepAccess(r,"networks."+e+".enabled")&&ProperMedia.utils.deepAccess(audiencePixels,"networks."+e)&&(networks[e]=audiencePixels.networks[e],networks[e].setConfig(r.networks[e]),networks[e].init())})),audiencePixels.audience_pixels.init(t)},newPageview:function(){Object.keys(networks).length&&Object.keys(networks).forEach((function(e){ProperMedia.utils.deepAccess(networks,e+".newPageview")&&networks[e].newPageview()}))},checkThresholds:function(){Object.keys(networks).length&&Object.keys(networks).forEach((function(e){networks[e].checkThresholds()})),audiencePixels.audience_pixels.checkThresholds()}}),audiencePixels.audience_pixels=(config={enabled:!1,thresholds:[]},{init:function(e){config=ProperMedia.utils.mergeObject(config,e)},checkThresholds:function(){var e=ProperMedia.utils.deepAccess(properSession,"sessionData.last_threshold")||0,t={price:0,pixel:""};config.thresholds.map((function(r){r.price>t.price&&r.price>e&&r.price<properSession.sessionData.revenue&&(t=r)})),t.price&&function(e){if(config.enabled&&e.pixel){var t="audience-pixel-"+e.price.toString();if(!document.getElementById(t)){properLog.mylog("Place audience pixel: "+e.price);var r=document.createElement("iframe");r.id=t,r.width="0px",r.height="0px",r.style.display="none",document.getElementsByTagName("body")[0].appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.write(e.pixel.toString()),r.contentWindow.document.close(),ProperMedia.utils.deepSetValue(properSession,"sessionData.last_threshold",e.price),properSession.setSessionData()}}}(t)}}),audiencePixels.networks.taboola=function(){var e=0,t=0,r={enabled:!1,disable_init_code:!1,configId:"",range:{}};return{checkThresholds:function(){var e=parseFloat(Math.floor(100*properSession.sessionData.revenue)/100);t<e&&r.range[e]&&function(e){try{t=e;var s="rps_"+parseInt(100*e);properLog.mylog("audiencePixels: Taboola pixel: "+e+" "+s),window.top.fireTaboolaPixel(r.range[e])}catch(e){console.error(e)}}(e)},setConfig:function(e){r=ProperMedia.utils.mergeObject(r,e)},init:function(){if(!r.disable_init_code)try{e=r.configId||"",properLog.mylog("audiencePixels: Taboola Init: "+e),e&&(window.top._tfa=window.top._tfa||[],function(e,t,r,s){document.getElementById(s)||(e.async=1,e.src=r,e.id=s,t.parentNode.insertBefore(e,t))}(document.createElement("script"),document.getElementsByTagName("script")[0],"//cdn.taboola.com/libtrc/unip/"+e+"/tfa.js","tb_tfa_script"),window.top.fireTaboolaPixel=function(t){window.top._tfa.push({notify:"event",name:t,id:e})})}catch(e){console.error(e)}}}}(),audiencePixels.networks.outbrain=function(){var e=0,t={enabled:!1,disable_init_code:!1,configId:"",range:{}};return{checkThresholds:function(){var r=parseFloat(Math.floor(100*properSession.sessionData.revenue)/100);e<r&&t.range[r]&&function(r){try{e=r,properLog.mylog("audiencePixels: Outbrain pixel: "+r+" "+t.range[r]),window.top.obApi("track",t.range[r])}catch(e){console.error(e)}}(r)},setConfig:function(e){t=ProperMedia.utils.mergeObject(t,e)},init:function(){if(!t.disable_init_code)try{!function(e,r){var s=(t.configId||"").replace(/\s+/,"").split(",");if(properLog.mylog("audiencePixels: Outbrain Init: "+JSON.stringify(t.ids)),e.obApi){var toArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)?e:[e]};e.obApi.marketerId=toArray(e.obApi.marketerId).concat(toArray(s))}else{var o=e.obApi=function(){o.dispatch?o.dispatch.apply(o,arguments):o.queue.push(arguments)};o.version="1.1",o.loaded=!0,o.marketerId=s,o.queue=[];var a=document.createElement("script");a.async=!0,a.src="//amplify.outbrain.com/cp/obtp.js",a.type="text/javascript";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}}(window.top,document)}catch(e){console.error(e)}}}}(),audiencePixels.networks.facebook=function(){var e=0,t={enabled:!1,disable_init_code:!1,ids:[],range:{min:.01,max:.22,exceptions:[]},pageview:{enabled:!1,everyPage:!1}};return{checkThresholds:function(){var r=parseFloat(Math.floor(100*properSession.sessionData.revenue)/100);e<r&&t.range.min<=r&&t.range.max>=r&&-1==t.range.exceptions.indexOf(r)&&function(t){try{e=t,properLog.mylog("audiencePixels: Facebook pixel: "+t),window.top.fbq("trackCustom",t.toString(),{value:parseFloat(t),currency:"USD"})}catch(e){console.error(e)}}(r)},newPageview:function(){try{t.pageview.enabled&&(t.pageview.everyPage||properSession.sessionData.depth<=1)&&(properLog.mylog("audiencePixels: Facebook newPageview"),window.top.fbq("track","PageView"))}catch(e){console.error(e)}},setConfig:function(e){t=ProperMedia.utils.mergeObject(t,e)},init:function(){var e,r,s,o,a,n;if(!t.disable_init_code)try{if(e=window,r=document,s="script",e.fbq||(o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(a=r.createElement(s)).async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js",(n=r.getElementsByTagName(s)[0]).parentNode.insertBefore(a,n)),fbq("dataProcessingOptions",["LDU"],0,0),t.ids.length)for(var d=0;d<t.ids.length;d++)properLog.mylog("audiencePixels: Facebook Init: "+t.ids[d]),window.top.fbq("init",t.ids[d])}catch(s){console.error(s)}}}}(),audiencePixels.networks.google=function(){var e=0,t={enabled:!1,disable_init_code:!1,configId:"",range:{}};return{checkThresholds:function(){var r=parseFloat(Math.floor(100*properSession.sessionData.revenue)/100);e<r&&t.range[r]&&function(r){try{e=r,properLog.mylog("audiencePixels: Google pixel: "+r+" "+t.configId+" "+t.range[r]),window.top.gtag("event","conversion",{send_to:t.range[r]})}catch(e){console.error(e)}}(r)},setConfig:function(e){t=ProperMedia.utils.mergeObject(t,e)},init:function(){if(!t.disable_init_code)try{var e=t.configId.split(",");properLog.mylog("audiencePixels: Google Init");const s=document.createElement("script");s.src="https://www.googletagmanager.com/gtag/js",s.setAttribute("async",""),window.top.document.getElementsByTagName("body")[0].prepend(s),window.top.dataLayer=window.top.dataLayer||[],window.top.gtag=function(){window.top.dataLayer.push(arguments)},window.top.gtag("js",new Date);for(var r=0;r<e.length;r++)properLog.mylog("audiencePixels: Google config: "+e[r]),window.top.gtag("config",e[r])}catch(e){console.error(e)}}}}(),audiencePixels.networks.twitter=function(){var e=0,t={enabled:!1,disable_init_code:!1,range:{}};return{checkThresholds:function(){var r=parseFloat(Math.floor(100*properSession.sessionData.revenue)/100);e<r&&t.range.min<=r&&t.range.max>=r&&-1==t.range.exceptions.indexOf(r)&&function(r){try{e=r,properLog.mylog("audiencePixels: Twitter pixel: "+r+" "+t.range[r]),twttr.conversion.trackPid(t.range[r],{tw_sale_amount:r})}catch(e){console.error(e)}}(r)},setConfig:function(e){t=ProperMedia.utils.mergeObject(t,e)},init:function(){if(!t.disable_init_code)try{properLog.mylog("audiencePixels: Twitter Init"),function(){var e=document.createElement("script");e.async=!0,e.src="//platform.twitter.com/oct.js",e.type="text/javascript";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}catch(e){console.error(e)}}}}(),bidAdapters.a9=function(){var e="a9",t=[],r=0,s=0,o=0,a={},n=window.top,d="https://aax.amazon-adsystem.com/e/dtb/bid",p="pub_audiences_opt_out",l={display:{fiuark:"a9","1777sow":"adgeneration_tam",c4h9ts:"beachfront_tam",tvrabk:"conversant_tam","6kpe68":"districtm_tam",pfxs74:"districtmdmx_tam","1bn1atc":"gumgum_tam",rnuj9c:"index_tam",pzwyyo:"mediagrid_tam","1rqdr0g":"medianet_tam","7onrpc":"oath_tam",fgcef4:"openx_tam",s7tq0w:"onetag_tam","1lmmolc":"pubmatic_tam",obzeo0:"pulsepoint_tam",bki328:"risecodes_tam",x7meww:"rubicon_tam",l04a2o:"rhythmone_tam","1ye4074":"sharethrough_tam",jw5wjk:"smaato_tam",b0iwao:"sovrn_tam","11nfx1c":"triplelift_tam","1eywfeo":"xandr_tam",n8114w:"yahoo_tam","1oyht6o":"yieldmo_tam"},video:{instream:{"5gr0n4":"adobe_tam_instream",fiuark:"amazon_tam_instream","1r6ek8w":"amobee_tam_instream","1777sow":"adgeneration_tam_instream",c4h9ts:"beachfront_tam_instream","19f4jr4":"conversant_uam_instream",tvrabk:"conversant_tam_instream",pfxs74:"dmx_tam_instream","6kpe68":"districtm_tam_instream","1bn1atc":"gumgum_tam_instream","1mql24g":"gumgum_uam_instream",rnuj9c:"index_tam_instream",x7meww:"magnite_tam_instream",pzwyyo:"mediagrid_tam_instream","1rqdr0g":"medianet_tam_instream",fgcef4:"openx_tam_instream",s7tq0w:"onetag_tam_instream","1lmmolc":"pubmatic_tam_instream",obzeo0:"pulsepoint_tam_instream",bki328:"risecodes_tam_instream","1ye4074":"sharethrough_tam_instream",l04a2o:"unruly_tam_instream",jw5wjk:"smaato_tam_instream",b0iwao:"sovrn_tam_instream","11nfx1c":"triplelift_tam_instream","7onrpc":"verizon_media_tam_instream",n8114w:"verizon_media_tam_instream","1eywfeo":"xandr_tam_instream","1tebbb4":"yahoo_tam_instream","1oyht6o":"yieldmo_tam_instream"},outstream:{"5gr0n4":"adobe_tam_outstream",fiuark:"amazon_tam_outstream","1r6ek8w":"amobee_tam_outstream","1777sow":"adgeneration_tam_outstream",c4h9ts:"beachfront_tam_outstream","19f4jr4":"conversant_uam_outstream",tvrabk:"conversant_tam_outstream",pfxs74:"dmx_tam_outstream","6kpe68":"districtm_tam_outstream","1bn1atc":"gumgum_tam_outstream","1mql24g":"gumgum_uam_outstream",rnuj9c:"index_tam_outstream",x7meww:"magnite_tam_outstream",pzwyyo:"mediagrid_tam_outstream","1rqdr0g":"medianet_tam_outstream",fgcef4:"openx_tam_outstream",s7tq0w:"onetag_tam_outstream","1lmmolc":"pubmatic_tam_outstream",obzeo0:"pulsepoint_tam_outstream","1ye4074":"sharethrough_tam_outstream",l04a2o:"unruly_tam_outstream",bki328:"risecodes_tam_outstream",jw5wjk:"smaato_tam_outstream",b0iwao:"sovrn_tam_outstream","11nfx1c":"triplelift_tam_outstream","7onrpc":"verizon_media_tam_outstream",n8114w:"verizon_media_tam_outstream","1eywfeo":"xandr_tam_outstream","1tebbb4":"yahoo_tam_outstream","1oyht6o":"yieldmo_tam_outstream"}}},c={sovrn_tam:9e4},u="cb3b5777-430d-4622-b7fc-358cfa27d518";function formatRequest(e,t,r){var s={slots:{},data_map:{},request_cnt:0,bidderInfo:r};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,o){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(var n=0;n<e[a].length;n++){var d=e[a][n],p="video"==r.demand_type?d.split("-")[0]:d;void 0===s.slots[d]&&(s.slots[d]={slotID:p},"video"==r.demand_type?s.slots[d].mediaType="video":s.slots[d].sizes=[],s.slots[d].floor={value:0,currency:"USD"},s.data_map[p]={slot_name:o||"",tag_sizes:[],floor:0}),"display"==r.demand_type&&s.slots[d].sizes.push(a.split("x").map((function(e){return parseInt(e)})));var l=parseInt(100*getBidderFloor(t,a));(!s.slots[d].floor.value||l<s.slots[d].floor.value)&&(s.slots[d].floor.value=l,ProperMedia.utils.deepSetValue(s,"data_map."+p+".floor",l/100)),s.data_map[p].tag_sizes.push(a),s.request_cnt++}}))}return s}function loadA9(){properPage.isolated||1==o||1==r||(0!=s||1!=properOps.dfp_per_slot?(o=1,function(s,o,n,d,p,l,c){if(!o[s]){o[s]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},deleteId:function(){q("di",arguments)},renewId:function(){q("ri",arguments)},updateId:function(){q("ui",arguments)},dpa:function(){q("di",arguments)},rpa:function(){q("ri",arguments)},upa:function(){q("ui",arguments)},_Q:[]};var g=n.createElement("link");g.rel="dns-prefetch",g.href="https://c.amazon-adsystem.com";var m=n.createElement("link");m.rel="preconnect",m.href="https://c.amazon-adsystem.com";var _=n.createAttribute("crossorigin");m.setAttributeNode(_);(l=n.createElement("script")).async=1,l.src="https://c.amazon-adsystem.com/aax2/apstag.js",l.addEventListener("load",TraceKit.wrap((function(){try{var s={pubID:u,params:{},bidTimeout:350};ProperMedia.utils.deepAccess(properOps,"bidders.header."+e+".account_overrides.enabled")&&!ProperMedia.utils.deepAccess(properOps,"bidders.header."+e+".account_overrides.deals")||(s.deals=!0);var n=schainCheck(e);""!=n&&(s.schain=n),gdprConsent.gdprApplies&&(s.gdpr={enabled:!!gdprConsent.gdprApplies,consent:gdprConsent.consentString||""}),uspConsent.usPrivacy&&(s.us_privacy=uspConsent.usPrivacy),properPage.video_enabled&&(s.videoAdServer="DFP"),o.apstag.init(s);var d=o.apstag.bids;o.apstag.bids=function(e){if(d(e),e.slots&&e.slots.length)for(var t=0;t<e.slots.length;t++){var r=e.slots[t];r.amzniid&&r.crid&&(a[r.amzniid]=r.crid),r.amzniid_sp&&r.crid&&(a[r.amzniid_sp]=r.crid)}}.bind(o.apstag);var p=getPubAudiencesParams();if(p.hashedRecords&&p.hashedRecords.length&&o.apstag.rpa(p,(function(){properLog.mylog("Amazon: Publisher Audience ID Renewed. params: "+JSON.stringify(p))})),r=1,t.length)for(var l=0;l<t.length;l++)a9Payload(t[l]);t=[]}catch(t){throw t.bidder=e,t}}))),(c=n.getElementsByTagName("head")[0]).appendChild(g),c.appendChild(m),c.appendChild(l)}function q(e,t){o[s]._Q.push([e,t])}}("apstag",n,n.document)):createA9Iframe())}function a9Payload(e){"function"==typeof ProperMedia.utils.deepAccess(n,"apstag.debug")&&(1==properOps.testing_mode.ids?n.apstag.debug("enable"):n.apstag.debug("disable"));var t=e.bidData||{},r=e.request_cnt||0,o=ProperMedia.utils.objectValues(e.slots)||[],p=e.data_map||{};if(0==o.length&&r>0)return properLog.mylog("Amazon: No slots defined"),!1;properLog.mylog("Amazon bids sent",e.bidderInfo.bidder),t.incrementRequestsSent(r);var u=ProperMedia.utils.getTimestampMs(),astcallback=function(o){try{properLog.mylog("Amazon bids returned: "+o.length);var n=ProperMedia.utils.getTimestampMs(),g=ProperMedia.utils.calcResponseMs(u,n);let S=["","sp"];for(var m=0;m<o.length;m++){var _=o[m];for(let r in S){let o=S[r],{amzniid:u,amznbid:m,amznp:C,dealid:O,size:A}=getTargeting(_,o);var h=e.bidderInfo.bidder,b=ProperMedia.utils.deepAccess(_,"helpers.encodedQsParams")||_.encodedQsParams||"",v=ProperMedia.utils.deepAccess(_,"helpers.qsParams")||_.qsParams||"",y=a[u]||"";if(!m)continue;var P=0;if(1==properOps.testing_mode.ids?P="testBid":m&&(P=m),properSpecialOps.AMZN_BIDDER_KEYS||properOps.aaba30b&&properOps.amazon_advertiser){var w=properOps.aaba30b?ProperMedia.utils.safeJsonParse(ProperMedia.utils.b64DecodeUnicode(properOps.aaba30b)):ProperMedia.utils.safeJsonParse(ProperMedia.utils.b64DecodeUnicode(properSpecialOps.AMZN_BIDDER_KEYS));w[C]&&(h=w[C],"video"==ProperMedia.utils.deepAccess(e,"bidderInfo.demand_type")&&(h+="_"+ProperMedia.utils.deepAccess(e,"bidderInfo.video_type")))}else h=("video"==ProperMedia.utils.deepAccess(e,"bidderInfo.demand_type")?ProperMedia.utils.deepAccess(l,e.bidderInfo.demand_type+"."+e.bidderInfo.video_type+"."+C):ProperMedia.utils.deepAccess(l,e.bidderInfo.demand_type+"."+C))||e.bidderInfo.bidder;a[u]&&delete a[u];var M=_.ttl||c[h]||ProperMedia.utils.deepAccess(e,"bidderInfo.default_bid_ttl"),I={encodedQsParams:b,qsParams:v,amznp:C,amznbid:m,amzniid:u};let k=new adObj({bidder:h,price:P,gross:P,size:A,tag_id:_.slotID,dealid:O,crid:y,request_url:d,response:_,response_ms:g,received_ts:n,ad_details:I,ttl:M,floor:ProperMedia.utils.deepAccess(p,_.slotID+".floor")||0,target_slot:ProperMedia.utils.deepAccess(p,_.slotID+".slot_name")||""}),T=o?o+"|":"";if("video"==ProperMedia.utils.deepAccess(e,"bidderInfo.demand_type")){if(!A||-1==["400x300","640x480"].indexOf(A)){if(ProperMedia.utils.deepAccess(p,_.slotID+".tag_sizes.0")&&-1!==["400x300","640x480"].indexOf(ProperMedia.utils.deepAccess(p,_.slotID+".tag_sizes.0")))A=ProperMedia.utils.deepAccess(p,_.slotID+".tag_sizes.0");else if(_.slotID&&_.slotID.match(/_\d+x\d+$/)){var x=_.slotID.match(/_(\d+x\d+)$/);x.length>1&&-1!==["400x300","640x480"].indexOf(match[1])&&(A=x[1])}A||(A=properDevice.isMobile()?["400x300"]:["640x480"])}k.type="video",k.vast_type="url",k.vast_tag="https://aax.amazon-adsystem.com/e/dtb/vast?b="+T+u+"&pp="+m+"&rnd="+Math.round((new Date).getTime())+"&cust_params="+v,k.vpaid=!1,k.video_type=ProperMedia.utils.deepAccess(e,"bidderInfo.video_type"),k.size=A}else k.type="display",1==s&&1==properOps.dfp_per_slot?k.adcode='<script>try {var amazon_ifr = window.top.document.getElementById("proper-a9-auction-iframe");if(amazon_ifr) {var amzn_win = amazon_ifr.contentWindow;if(amzn_win && amzn_win.apstag) {window.apstag = amzn_win.apstag;window.apstag.renderImp(document,"'+T+u+'");}}} catch(e) {console.error(e);}<\/script>':k.adcode='<script>var amzn_win=window,amzn_c=5,amzn_x=0;while(amzn_x<amzn_c){amzn_win=amzn_win.parent;if(amzn_win.apstag)try{amzn_win.apstag.renderImp(document,"'+T+u+'");amzn_x=amzn_c}catch(e){}amzn_x++};<\/script>';t.logBidResponse(k)}}t.incrementBidResponseCount(r)}catch(t){throw t.bidder=e.bidderInfo.bidder,t}};void 0!==TraceKit&&TraceKit.wrap(astcallback),"function"==typeof ProperMedia.utils.deepAccess(n,"apstag.fetchBids")&&n.apstag.fetchBids({slots:o,timeout:properOps.tmax},astcallback)}function createA9Iframe(){try{var e=document.createElement("iframe");e.id="proper-a9-auction-iframe",e.frameborder="0",e.allowtransparency="true",e.marginheight="0",e.marginwidth="0",e.width="0",e.hspace="0",e.vspace="0",e.height="0",e.scrolling="no",e.style.display="none",e.style.width="0",e.style.height="0",e.sandbox="allow-scripts allow-same-origin",e.onload=function(){n=e.contentWindow,s=1,n.__tcfapi=window.top.__tcfapi,0==o&&loadA9()},document.getElementsByTagName("body")[0].appendChild(e)}catch(e){n=window,console.error(e)}}function getTargeting(e,t){let r=t?"_"+t:"";return{amzniid:ProperMedia.utils.deepAccess(e,`targeting.amzniid${r}`)||ProperMedia.utils.deepAccess(e,`amzniid${r}`)||"",amznbid:ProperMedia.utils.deepAccess(e,`targeting.amznbid${r}`)||ProperMedia.utils.deepAccess(e,`amznbid${r}`)||"",amznp:ProperMedia.utils.deepAccess(e,`targeting.amznp${r}`)||ProperMedia.utils.deepAccess(e,`amznp${r}`)||"fiuark",dealid:ProperMedia.utils.deepAccess(e,`targeting.amzndeal${r}`)||ProperMedia.utils.deepAccess(e,`amzndeal${r}`)||"",size:ProperMedia.utils.deepAccess(e,`targeting.amznsz${r}`)||ProperMedia.utils.deepAccess(e,`amznsz${r}`)||""}}function getPubAudiencesParams(){var e={},t=userIds.getUserIdData();return ProperMedia.utils.deepAccess(t,"emailHashes.sha256")&&(e={hashedRecords:[{type:"email",record:ProperMedia.utils.deepAccess(t,"emailHashes.sha256")}]}),gdprConsent.gdprApplies&&(e.gdpr={enabled:!!gdprConsent.gdprApplies,consent:gdprConsent.consentString}),void 0!==properStorage.getCookie(p,{moduleType:"core"})&&(e.optOut=!!properStorage.getCookie(p,{moduleType:"core"})),e}return{send:function(e){if(properPage.isolated)return properLog.mylog("Turn off Amazon bidder for isolated pages"),!0;var a=e.bidder,n=properOps.bidder_info[a]||n;n.bidder=a,u=n.alias?"748e627c-0eaa-42c2-9e73-69aef798751c":u,ProperMedia.utils.deepAccess(properOps,"bidders.header."+a+".account_overrides.enabled")&&(u=ProperMedia.utils.deepAccess(properOps,"bidders.header."+a+".account_overrides.bidder_ids.pub_id")||u);var d=formatRequest(e,a,n);d.bidData=e,1==r?a9Payload(d):(t.push(d),0==s&&1==properOps.dfp_per_slot?createA9Iframe():0==o&&loadA9())},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:12e4,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","2x2","120x600","160x600","300x50","300x100","300x250","300x420","300x600","320x100","320x480","320x50","336x280","400x300","468x60","728x90","970x250","970x66","970x90","fluid"],gvlid:793},updateOptOut:function(e){if(e?properStorage.setCookie(p,!0,1209600,"Lax","",{moduleType:"core"}):ProperMedia.utils.deleteCookie(p,"Lax","",{moduleType:"core"}),"function"==typeof ProperMedia.utils.deepAccess(n,"apstag.upa")){var t=getPubAudiencesParams();t.optOut=e,n.apstag.upa(t,(function(){properLog.mylog("Amazon: Publisher Audience ID Updated. params: "+JSON.stringify(t))}))}},formatRequest,loadInitScripts:loadA9}}(),bidAdapters.adagio=function(){var e={rev_share:1,demand_type:"display",bid_grouping:"page",div_insertion:1,default_bid_ttl:3e4,gvlid:617},t="https://mp.4dex.io/prebid",r="adagio",s="https://script.4dex.io/localstore.js",o="adagioScript",a=e.gvlid,n=1003,d=null,p=!1,l={};function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(e,t,r){var s={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);var a=r.auctionId;function formatTagIds(e,o){Object.keys(e).length>0&&(Object.keys(e).forEach((function(p){for(var l=0;l<e[p].length;l++){var c=e[p][l];if(void 0===s.imps[c]){var u=c.split("-")[0]||c,g="adagio-"+ProperMedia.utils.generateUUID(),_={page_dimensions:getPageDimensions().toString(),viewport_dimensions:getViewPortDimensions().toString(),user_timestamp:getTimestampUTC().toString(),dom_loading:getDomLoadingDuration().toString(),print_number:(l+1).toString(),adunit_position:""};if(Object.keys(_).forEach((function(e){""===_[e]&&delete _[e]})),s.imps[c]={bidId:c,auctionId:a,bidderRequestId:ProperMedia.utils.generateUUID(),adUnitCode:g,mediaTypes:{},bidder:"adagio",params:{site:d,placement:u,adUnitElementId:g,organizationId:n.toString()},features:_,floors:[]},m.enqueue({action:"features",ts:Date.now(),data:{features:_,params:s.imps[c].params,adUnitCode:s.imps[c].adUnitCode}}),"display"==r.demand_type)s.imps[c].mediaTypes.banner={sizes:[]};else if("video"==r.demand_type){var h=parseSize(p);s.imps[c].mediaTypes.video={context:r.video_type,mimes:["video/mp4","application/javascript"],w:h.w,h:h.h,maxduration:30,minduration:10,api:[2],delivery:6,pos:0,playbackmethod:6,placement:"outstream"==r.video_type?3:1,linearity:"outstream"==r.video_type?2:1,protocols:[2,3,5,6],startdelay:0,skip:0},_buildVideoBidRequest(bidRequest)}else"native"==r.demand_type&&(s.imps[c].mediaTypes.ntaive={main_image:{required:!0,sizes:[]},icon:{required:!0,sizes:[{width:50,height:50}]},clickUrl:{required:!0},title:{required:!0,len:80},sponsored_by:{required:!0},ctatext:{required:!1}});1==properOps.testing_mode.ids&&(s.imps[c].params.debug={enabled:!0,cpm:3}),s.data_map[c]={floors:{},div_id:g,slot_name:o||""}}if("display"==r.demand_type){var b=parseSize(p);s.imps[c].mediaTypes.banner.sizes.push([b.w,b.h])}var v=getBidderFloor(t,p);s.imps[c].floors.push({mt:r.demand_type,s:p,f:v}),s.data_map[c].floors[p]=v,s.request_cnt++}})),Object.keys(s.imps).forEach((function(e){!function(e){const t=window.top;var r;t.ADAGIO=t.ADAGIO||{},t.ADAGIO.pbjsAdUnits=t.ADAGIO.pbjsAdUnits.filter((function(t){return t.code!==e.adUnitCode})),e.features&&e.features.print_number?r=e.features.print_number:e.params.features&&e.params.features.print_number&&(r=e.params.features.print_number);t.ADAGIO.pbjsAdUnits.push({code:e.adUnitCode,mediaTypes:e.mediaTypes||{},sizes:e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)?e.mediaTypes.banner.sizes:e.sizes,bids:[{bidder:e.bidder,params:e.params}],auctionId:e.auctionId,pageviewId:m.getPageviewId(),printNumber:r}),t.ADAGIO.adUnits[e.adUnitCode]={auctionId:e.auctionId,pageviewId:m.getPageviewId(),printNumber:r}}(s.imps[e])})))}return s}function addUserSyncs(e){try{if(ProperMedia.utils.deepAccess(e,"ext.pixels")){var t=e.ext.pixels||[],s=/\w*(?=\s)/,o=/src=("|')(.*?)\1/;if(t){var a=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);a&&a.forEach((function(e){var t=e.match(s)[0],r=e.match(o)[2];if(t&&r){var a="img"===t.toLowerCase()?"image":"iframe";userSyncs.add({type:a,url:r})}}))}}}catch(e){throw e.bidder=r,e}}function _getSchain(){return schainCheck(r)}function getPageDimensions(){var e=window.document.querySelector("body"),t=window.document.documentElement;return Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth)+"x"+Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}function getViewPortDimensions(){return(window.innerWidth||0)+"x"+(window.innerHeight||0)}function getTimestampUTC(){return Math.floor((new Date).getTime()/1e3)-60*(new Date).getTimezoneOffset()}function getDomLoadingDuration(){var e,t=-1;if((e=window.performance)&&e.timing&&e.timing.navigationStart>0){var r=e.timing.domLoading-e.timing.navigationStart;r>0&&(t=r)}return t}var c,u,g=(u={},{clearFeatures:function(){c=void 0},clearExchangeData:function(){u={}},getOrSetGlobalFeatures:function(){return c||(c={page_dimensions:getPageDimensions().toString(),viewport_dimensions:getViewPortDimensions().toString(),user_timestamp:getTimestampUTC().toString(),dom_loading:getDomLoadingDuration().toString()}),c},prepareExchangeData(e){var t=JSON.parse(e,(function(e,t){if("_"!==e.charAt(0)||""===e)return t})),r=ProperMedia.utils.deepAccess(t,"session.rnd"),s=!1;m.isNewSession(t)&&(s=!0,r=Math.random());var o={session:{new:s,rnd:r}};ProperMedia.utils.mergeDeep(u,t,o),m.enqueue({action:"session",ts:Date.now(),data:u})},getExchangeData:()=>u});var m={enqueue:function(e){var t=window.top;t.ADAGIO=t.ADAGIO||{},t.ADAGIO.queue=t.ADAGIO.queue||[],t.ADAGIO.queue.push(e)},getPageviewId:function(){var e=window.top;return e.ADAGIO=e.ADAGIO||{},e.ADAGIO.pageviewId=e.ADAGIO.pageviewId||ProperMedia.utils.generateUUID(),e.ADAGIO.pageviewId},adagioScriptFromLocalStorageCb:function(e){try{if(!e)return void properLog.mylog("Adagio script not found.");/^(\/\/ hash: (.+)\n)(.+\n)$/.test(e)||properStorage.removeDataFromLocalStorage(o,l)}catch(e){properLog.mylog("Adagio: "+JSON.stringify(e))}},isNewSession:function(e){var t=Date.now(),r=ProperMedia.utils.deepAccess(e,"session")||{},s=r.lastActivityTime||void 0,o=r.vwSmplg||void 0;return!ProperMedia.utils.isNumber(s)||!ProperMedia.utils.isNumber(o)||t-s>18e5}};return{send:function(e){var r=e.bidder,s=properOps.bidder_info[r]||s;if(l={gvlid:s.gvlid||a,bidderCode:r},ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".account_overrides.enabled")&&(n=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".account_overrides.bidder_ids.organizationId")||n),!(d=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".site_id")||0))return properLog.mylog("Adagio: Error Site ID is Required."),!1;s.auctionId=ProperMedia.utils.deepAccess(e,"auction.id");var o=formatRequest(e,r,s),p=ProperMedia.utils.objectValues(o.imps)||[],c=o.data_map||{},u=o.request_cnt,_=navigator.language?"language":"userLanguage",h=!!gdprConsent&&{apiVersion:gdprConsent.apiVersion,consentString:gdprConsent.consentString,consentRequired:gdprConsent.gdprApplies?1:0,allowAuctionWithoutConsent:gdprConsent.allowAuctionWithoutConsent?1:0}||{},b=!!uspConsent.usPrivacy&&{uspConsent:uspConsent.usPrivacy}||{},v=function(){let e=gppConsent.gppString,t=gppConsent.applicableSections;return{gpp:e,gppSid:t}}()||{},y=_getSchain(),P=userIds.getEidsArray()||[],w=Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids")),M=!!gdprEnforcement.userSyncEnforcement(r),I={pageviewId:m.getPageviewId(),organizationId:n.toString(),secure:properPage.use_ssl?1:0,site:{page:properPage.bidder_page_url,domain:properPage.domain,referrer:properPage.referrer},device:{userAgent:navigator.userAgent,language:navigator[_],dnt:ProperMedia.utils.getDNT()?1:0,geo:{},js:1},adUnits:p,data:g.getExchangeData(),regs:{gdpr:h,ccpa:b,gpp:v.gpp,gppSid:v.gppSid,coppa:{required:ProperMedia.utils.deepAccess(properSpecialOps,"coppa")?1:0}},user:{eids:P},prebidVersion:properOps.prebid_version,featuresVersion:"1",usIfr:M,adgjs:properStorage.localStorageIsEnabled(l)};""!=y&&(I.schain=y),properLog.mylog(t,r),e.incrementRequestsSent(u);var x=ProperMedia.utils.getTimestampMs(),S=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:t,method:"POST",requestType:"cors",bidder:r,edge:S,headers:{"Content-Type":"text/plain"},data:JSON.stringify(I),success:function(o){try{var a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(x,a);if(o=ProperMedia.utils.safeJsonParse(o))o.data&&m.enqueue({action:"ssp-data",ts:Date.now(),data:o.data}),o.bids&&o.bids.length&&(properLog.mylog(o,r),o.bids.forEach((function(o){var d=o.requestId||"",p=o.cpm||0,l=o.width||1,u=o.height||1,g=o.ad||"",m=o.nurl||"",_=o.creativeId||0,h=o.dealId||"",b=(o.aDomain,o.ttl||s.default_bid_ttl/1e3),v=l+"x"+u,y={div_id:ProperMedia.utils.deepAccess(c,d+".div_id")},P=new adObj({bidder:r,size:v,price:parseFloat(p),gross:parseFloat(p),nurl:m,tag_id:d,crid:_,dealid:h,ad_details:y,request_url:t,response:o,response_ms:n,received_ts:a,ttl:1e3*b,floor:ProperMedia.utils.deepAccess(c,d+".floors."+v)||0,target_slot:ProperMedia.utils.deepAccess(c,d+".slot_name")||"",uids:w});if("display"==s.demand_type){var M='<script> var elem = window.top.document.getElementById("{PROPER_SLOT_DIV_ID}"); if(elem) { if(elem.parentNode.className.indexOf("'+properOps.slot_wrapper_class+"\") !== -1) { elem = elem.parentNode; elem.setAttribute('id', \""+ProperMedia.utils.deepAccess(c,d+".div_id")+'");}} <\/script>';P.adcode=M+'<div id="'+ProperMedia.utils.deepAccess(c,d+".div_id")+'">'+g+"</div>"}else if("video"==s.demand_type){P.type="video",P.vast_tag=o.vastXml;var I=ProperMedia.utils.parseVastVpaid(P.vast_tag);P.vast_type=I.vast_type,P.vpaid=I.vpaid,P.video_type=s.video_type}else if("native"==s.demand_type){var x=o.admNative||{};x.clickTrackers=ProperMedia.utils.deepAccess(x,"link.clicktrackers")||[],P.type="native",P.native=x}e.logBidResponse(P)})),addUserSyncs(o));else{properLog.mylog("Adagio: No bids returned");var d=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:t,response:o,response_ms:n,received_ts:a,ttl:0});e.logNoBidResponse(d)}e.incrementBidResponseCount(u)}catch(e){throw e.bidder=r,e}},error:function(t){try{e.incrementBidResponseCount(u);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(x,s),a={bidder:r,status:t.status,statusText:t.statusText,timeout:t.timeout,response_ms:o};e.logBidResponseError(a)}catch(t){throw t.bidder=r,t}}})},onBidWon:function(e,t){try{window.top.ADAGIO.queue.push({action:"adagio-creative-rendered",data:{eventName:"renderEvent",args:{isEmpty:!1,elementId:ProperMedia.utils.deepAccess(e,"ad_details.div_id"),creativeId:e.crid,creativeSize:e.size.split("x").map((function(e){return parseInt(e)}))}},ts:Date.now()})}catch(e){console.error(e)}},bidderInfo:e,formatRequest,loadInitScripts:function(){if(!p){p=!0;var e=window.top;e.ADAGIO=e.ADAGIO||{},e.ADAGIO.adUnits=e.ADAGIO.adUnits||{},e.ADAGIO.pbjsAdUnits=e.ADAGIO.pbjsAdUnits||[],e.ADAGIO.queue=e.ADAGIO.queue||[],e.ADAGIO.versions=e.ADAGIO.versions||{},e.ADAGIO.versions.pbjs=properOps.prebid_version,e.ADAGIO.isSafeFrameWindow=0;var t=properStorage.getDataFromLocalStorage("adagio",l)||"{}";try{g.prepareExchangeData(t)}catch(e){properLog.mylog("Adagio: "+JSON.stringify(e))}!function(){var e=properStorage.getDataFromLocalStorage(o,l);if(m.adagioScriptFromLocalStorageCb(e),properStorage.localStorageIsEnabled(l)){var t=document.createElement("script");t.src=s,t.async=!0,t.type="text/javascript";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}}()}}}}(),bidAdapters.appnexus=function(){var e="https://ib.adnxs.com/ut/v3/prebid",t={main_image:{required:!0,sizes:[]},icon:{required:!0,sizes:[{width:50,height:50}]},clickUrl:{required:!0},title:{required:!0,len:80},sponsored_by:{required:!0},ctatext:{required:!1}};function parseSize(e,t){var r=(e=ProperMedia.utils.deepAccess(t,"native_sizes."+e)||e).split("x");return{width:parseInt(r[0]),height:parseInt(r[1])}}function formatRequest(e,r,s){var o={astTags:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var a in e.slot_requests)formatTagIds(e.slot_requests[a],a);function formatTagIds(e,a){Object.keys(e).length>0&&Object.keys(e).forEach((function(n){for(i=0;i<e[n].length;i++){var d=e[n][i];if(void 0===o.astTags[d]){var p=parseSize(n,s),l=astUID(),c=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".site_id")||d;o.astTags[d]={sizes:[],primary_size:p,uuid:l,id:parseInt(c),prebid:!0,ad_types:[],reserve:0,hb_source:1,disable_psa:!0,allow_smaller_sizes:!1,use_pmt_rule:!1},o.data_map[l]={slot_name:a||"",tag_id:d,floor:0}}if("display"==s.demand_type)o.astTags[d].ad_types.push("banner");else if("native"==s.demand_type){-1==o.astTags[d].ad_types.indexOf("native")&&o.astTags[d].ad_types.push("native");var u=ProperMedia.utils.deepAccess(o,"astTags."+d+".native.layouts.0")||t;u.main_image.sizes.push(parseSize(n)),o.astTags[d].native={layouts:[u]}}else"video"==s.demand_type&&(o.astTags[d].ad_types.push("video"),"instream"==s.video_type?o.astTags[d].require_asset_url=!0:"outstream"==s.video_type&&(o.astTags[d].require_asset_url=!1),o.astTags[d].allow_smaller_sizes=!0,o.astTags[d].video_frameworks=[2],o.astTags[d].video={minduration:1,playback_method:2,mimes:["video/mp4","application/javascript"],custom_renderer_present:!0});var g=getBidderFloor(r,n);(!o.astTags[d].reserve||g<o.astTags[d].reserve)&&(o.astTags[d].reserve=g,ProperMedia.utils.deepSetValue(o,"data_map."+ProperMedia.utils.deepAccess(o,"astTags."+d+".uuid")+".floor",g)),o.astTags[d].sizes.push(parseSize(n)),o.request_cnt++}}))}return o}function buildNative(e){return{link:{url:ProperMedia.utils.deepAccess(e,"link.url")||""},assets:[{title:{text:ProperMedia.utils.deepAccess(e,"title")||""}},{img:{type:1,url:ProperMedia.utils.deepAccess(e,"main_img.url")||"",height:ProperMedia.utils.deepAccess(e,"main_img.height")||"",width:ProperMedia.utils.deepAccess(e,"main_img.width")||""}},{img:{type:2,url:ProperMedia.utils.deepAccess(e,"icon.url")||"",height:ProperMedia.utils.deepAccess(e,"icon.height")||"",width:ProperMedia.utils.deepAccess(e,"icon.width")||""}},{type:1,value:ProperMedia.utils.deepAccess(e,"advertiser.description")||""},{type:2,value:ProperMedia.utils.deepAccess(e,"sponsored")||""},{type:12,value:ProperMedia.utils.deepAccess(e,"ctatext")||""}],clickTrackers:ProperMedia.utils.deepAccess(e,"link.click_trackers")||[],imptrackers:ProperMedia.utils.deepAccess(e,"impression_trackers")||[],jstracker:ProperMedia.utils.deepAccess(e,"javascript_trackers")||[],javascriptViewability:ProperMedia.utils.deepAccess(e,"viewability.config")||""}}function astUID(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}));return t=t.split("-")[4]}return{send:function(t){var r=t.bidder,s=properOps.bidder_info[r]||s,o=formatRequest(t,r,s),a=ProperMedia.utils.objectValues(o.astTags)||[],n=o.data_map||{},d=o.request_cnt;if(0==a.length)return!1;var p={tags:a,sdk:{source:"pbjs",version:properOps.prebid_version},referrer_detection:{rd_ref:encodeURIComponent(properPage.url),rd_top:!0,rd_ifs:0,rd_stk:encodeURIComponent(properPage.url)},user:{}};ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&(p.user.coppa=!0);var l=userIds.getEidsArray();if(l.length){let e=[];l.forEach((t=>{!t||!t.uids||t.uids.length<1||t.uids.forEach((r=>{let s={source:t.source,id:r.id};"adserver.org"==t.source?s.rti_partner="TDID":"uidapi.com"==t.source&&(s.rti_partner="UID2"),e.push(s)}))})),e.length&&(p.eids=e)}var c=Object.keys(ProperMedia.utils.deepAccess(t,"auction.uids")),u=schainCheck(r);if(""!=u&&(p.schain=u),gdprConsent&&(p.gdpr_consent={consent_string:gdprConsent.consentString,consent_required:gdprConsent.gdprApplies},gdprConsent.addtlConsent&&-1!==gdprConsent.addtlConsent.indexOf("~"))){let e=gdprConsent.addtlConsent,t=e.substring(e.indexOf("~")+1);p.gdpr_consent.addtl_consent=t.split(".").map((e=>parseInt(e,10)))}uspConsent.usPrivacy&&(p.us_privacy=uspConsent.usPrivacy),gppConsent&&(p.privacy={gpp:gppConsent.gppString,gpp_sid:gppConsent.applicableSections}),properLog.mylog(e,r),t.incrementRequestsSent(d);var g=ProperMedia.utils.getTimestampMs(),m=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:e,requestType:"cors",method:"POST",bidder:r,edge:m,data:JSON.stringify(p),success:function(o){try{properLog.mylog(o,r);var a=ProperMedia.utils.getTimestampMs(),p=ProperMedia.utils.calcResponseMs(g,a),l=ProperMedia.utils.safeJsonParse(o);if(l&&l.error){properLog.mylog("Error: "+r+" adapter - "+l.error);var u={bidder:r,status:418,statusText:l.error+"(x"+d+")",response_ms:p};t.logBidResponseError(u)}else if(l&&l.tags&&l.tags.length)for(var m=0;m<l.tags.length;m++){var _=l.tags[m];if(_.ads&&_.ads[0]){var h=_.tag_id,b=_.uuid,v=_.ads[0],y=v.cpm||0,P=v.creative_id||"",w=v.adId||v.advertiser_id||"",M=new adObj({bidder:r,price:parseFloat(y),gross:parseFloat(y),tag_id:ProperMedia.utils.deepAccess(n,b+".tag_id")||h,adid:w,crid:P,request_url:e,response:_,response_ms:p,received_ts:a,ttl:s.default_bid_ttl,floor:ProperMedia.utils.deepAccess(n,b+".floor")||0,target_slot:ProperMedia.utils.deepAccess(n,b+".slot_name")||"",uids:c});if("video"==s.demand_type){let e=ProperMedia.utils.deepAccess(v,"rtb.notify_url")||"",t=ProperMedia.utils.deepAccess(v,"rtb.video.asset_url")||"",r=(ProperMedia.utils.deepAccess(v,"rtb.video.notify_url"),ProperMedia.utils.deepAccess(v,"rtb.video.player_width")||""),o=ProperMedia.utils.deepAccess(v,"rtb.video.player_height")||"";var I="";"instream"==s.video_type?I=e+"&redir="+encodeURIComponent(t):"outstream"==s.video_type&&(I=ProperMedia.utils.deepAccess(v,"rtb.video.content")||""),M.size=r+"x"+o,M.type="video",M.vast_tag=I;var x=ProperMedia.utils.parseVastVpaid(M.vast_tag);M.vast_type=x.vast_type,M.vpaid=x.vpaid,M.video_type=s.video_type}else if("native"==s.demand_type){M.type="native";var S=ProperMedia.utils.deepAccess(v,"rtb.native");M.native=buildNative(S)}else{let e=ProperMedia.utils.deepAccess(v,"rtb.banner.content")||"",t=ProperMedia.utils.deepAccess(v,"rtb.banner.width")||"",r=ProperMedia.utils.deepAccess(v,"rtb.banner.height")||"";var C="";try{C=ProperMedia.utils.deepAccess(v,"rtb.trackers.0.impression_urls.0")}catch(e){}e+='<div style="position:absolute;left:0px;top:0px;visibility:hidden;"><img src="'+encodeURI(C)+'"></div>',M.size=t+"x"+r,M.adcode=e}t.logBidResponse(M)}else if(_.nobid){let s=new adObj({bidder:r,price:0,gross:0,tag_id:_.tag_id||"",request_url:e,response:_,response_ms:p,received_ts:a,ttl:0});t.logNoBidResponse(s)}}else{let s=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:e,response:l,response_ms:p,received_ts:a,ttl:0});t.logNoBidResponse(s)}t.incrementBidResponseCount(d)}catch(e){throw e.bidder=r,e}},error:function(e){try{t.incrementBidResponseCount(d);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(g,s),a={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};t.logBidResponseError(a)}catch(e){throw e.bidder=r,e}}})},onBidWon:function(e,t){if(ProperMedia.utils.deepAccess(e,"native.javascriptViewability")&&e.adId){var r="pbjs_adid="+e.adId+";pbjs_auc="+t.div_id,s=e.native.javascriptViewability.replace("dom_id=%native_dom_id%",r),o=ProperMedia.utils.deepAccess(e,"native.javascript_trackers");null==o?o=s:ProperMedia.utils.isStr(o)?o=[o,s]:ProperMedia.utils.isArray(o)&&o.push(s),e.native.jstracker=o}return!0},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,gvlid:32},getUserSyncs:function(){!gdprConsentModule.hasPurpose1Consent()||gppConsent&&Array.isArray(gppConsent.applicableSections)&&!gppConsent.applicableSections.every((e=>"number"==typeof e&&e<=5))||userSyncs.add({type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html",bidder:"appnexus"})},formatRequest}}(),bidAdapters.concert=function(){var e={rev_share:.75,bid_grouping:"page",default_bid_ttl:6e4,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","native_horizontal"],native_sizes:{"1030x590":"native_horizontal"}},t="https://bids.concert.io/bids/prebid",r="concert",s={mobile:[[325,204],[325,508]],desktop:[[1030,590],[620,366]]};function formatRequest(e){var t={bids:{},data_map:{},request_cnt:0},o=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".site_id")||0;if(!o)return properLog.mylog("Error: Concert Site ID is Required."),t;var a=properDevice.isMobile()?"mobile":"desktop",n=s[a]||[];if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var d in e.slot_requests)formatTagIds(e.slot_requests[d],d);function formatTagIds(e,r){Object.keys(e).length>0&&Object.keys(e).forEach((function(s){for(var a=0;a<e[s].length;a++)if("native_horizontal"==s){var d=e[s][a];void 0===t.bids[d]&&(t.bids[d]={name:d,bidId:d,transactionId:ProperMedia.utils.generateUUID(),sizes:n,partnerId:o,adSlot:d,site:properPage.url,ref:properPage.referrer,placementId:""},t.data_map[d]={slot_name:r||"",tag_id:d},t.request_cnt+=1)}}))}return t}function getGdprConsent(){return!!gdprConsent&&{apiVersion:gdprConsent.apiVersion,consentString:gdprConsent.consentString,consentRequired:gdprConsent.gdprApplies?1:0,allowAuctionWithoutConsent:gdprConsent.allowAuctionWithoutConsent?1:0}}function getGppConsent(){return!!gppConsent&&{gppString:gppConsent.gppString,applicableSections:gppConsent.applicableSections}}function getUid(){if(hasOptedOutOfPersonalization()||!function(e){let t=!0;uspConsent.ccpaApplies&&"string"==typeof uspConsent.usPrivacy&&"1"===uspConsent.usPrivacy[0]&&"Y"===uspConsent.usPrivacy[2].toUpperCase()&&(t=!1);const r=!gdprConsent.gdprApplies||gdprConsentModule.hasPurpose1Consent()&&gdprConsentModule.hasPurpose4Consent(),s=!gppConsentModule.isConsentDenied();return t&&r&&s}())return!1;if(properUser.pubcid)return properUser.pubcid;var e="c_uid",t=properStorage.getDataFromLocalStorage(e,{bidderCode:r});return t||(t=ProperMedia.utils.generateUUID(),properStorage.setDataInLocalStorage(e,t,{bidderCode:r})),t}function hasOptedOutOfPersonalization(){return"true"===properStorage.getDataFromLocalStorage("c_nap",{bidderCode:r})}return{send:function(s){var o=formatRequest(s),a=ProperMedia.utils.objectValues(o.bids)||[],n=o.data_map||{},d=o.request_cnt;if(0!=d){var p={meta:{prebidVersion:properOps.prebid_version,pageUrl:properPage.bidder_page_url,screen:[window.screen.width,window.screen.height].join("x"),debug:1==properOps.testing_mode.ids,uid:getUid(),optedOut:hasOptedOutOfPersonalization(),adapterVersion:"1.2.0",uspConsent:!!uspConsent.usPrivacy&&{uspConsent:uspConsent.usPrivacy},gdprConsent:getGdprConsent(),gppConsent:getGppConsent()},slots:a};properLog.mylog(t,r),s.incrementRequestsSent(d);var l=ProperMedia.utils.getTimestampMs(),c=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:t,method:"POST",requestType:"cors",bidder:r,edge:c,data:JSON.stringify(p),success:function(o){try{o=ProperMedia.utils.safeJsonParse(o);var a=ProperMedia.utils.getTimestampMs(),p=ProperMedia.utils.calcResponseMs(l,a);if(o&&o.bids&&0!=Object.keys(o.bids).length)properLog.mylog(o,r),Object.keys(o.bids).forEach((function(d){var l=o.bids[d],c=l.bidId||"",u=l.cpm||0,g=(l.netRevenue,l.currency,l.width||1),m=l.height||1,_=l.ad||"",h=l.creativeId||"",b=1e3*l.ttl||e.default_bid_ttl,v=g+"x"+m;e.native_sizes[v]&&(v=e.native_sizes[v]);var y=new adObj({bidder:r,size:v,price:parseFloat(u),gross:parseFloat(u),adcode:_,tag_id:c,crid:h,request_url:t,response:l,response_ms:p,received_ts:a,ttl:b,target_slot:ProperMedia.utils.deepAccess(n,c+".slot_name")||""});y.price&&y.adcode?s.logBidResponse(y):s.logNoBidResponse(y)}));else{properLog.mylog("no "+r+" bids returned");var c=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:t,response:o,response_ms:p,received_ts:a,ttl:0});s.logNoBidResponse(c)}s.incrementBidResponseCount(d)}catch(e){throw e.bidder=r,e}},error:function(e){try{s.incrementBidResponseCount(d);var t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(l,t),a={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};s.logBidResponseError(a)}catch(e){throw e.bidder=r,e}}})}},bidderInfo:e,formatRequest}}(),bidAdapters.consumable=function(){var e={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e4},t="9969",r="1030626",s="consumable",o=1,a="https://e.serverbid.com/api/v2",n=[null,"120x90","120x90","468x60","728x90","300x250","160x600","120x600","300x100","180x150","336x280","240x400","234x60","88x31","120x60","120x240","125x125","220x250","250x250","250x90","0x0","200x90","300x50","320x50","320x480","185x185","620x45","300x125","800x250"];function getSize(e){var t=n.indexOf(e[0]+"x"+e[1]);return t>=0&&t}function formatRequest(e){var o={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var a in e.slot_requests)formatTagIds(e.slot_requests[a],a);function formatTagIds(e,a){Object.keys(e).length>0&&Object.keys(e).forEach((function(n){for(var d=0;d<e[n].length;d++){var p=e[n][d],l=p.split("|"),c=l[0]||"",u=l[1]||"",g=(l[2]||"").split(",");void 0===o.imps[p]&&(o.imps[p]={networkId:t,siteId:r,divName:p,unitName:c,unitId:u,zoneIds:[],adTypes:[],bidfloor:0},o.data_map[p]={slot_name:a||"",tag_id:p,floor:0}),g instanceof Array?o.imps[p].zoneIds.concat(g.map((function(e){return parseInt(e)}))):o.imps[p].zoneIds.push(parseInt(g));var m=getSize(n.split("x"));m&&(o.imps[p].adTypes.push(m),o.request_cnt++);var _=getBidderFloor(s,n);(!o.imps[p].bidfloor||_<o.imps[p].bidfloor)&&(o.imps[p].bidfloor=_,o.data_map[p].floor=_)}}))}return o}function retrieveAd(e){return ProperMedia.utils.deepAccess(e,"contents[0].body")}function appendUrlParam(e,t){return`${e}${e.indexOf("?")>-1?"&":"?"}${t}`}return n[77]="970x90",n[123]="970x250",n[43]="300x600",n[286]="970x66",n[3230]="970x280",n[429]="486x60",n[374]="700x500",n[934]="300x1050",n[1578]="320x100",n[331]="320x250",n[3301]="320x267",n[2730]="728x250",{formatRequest,send:function(n){r=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".site_id")||r,ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".account_overrides.enabled")&&(t=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".account_overrides.bidder_ids.networkId")||t);var d=formatRequest(n),p=d.imps||{},l=d.data_map||{},c=d.request_cnt;if(0==c)return!1;var u={networkId:t,siteId:r,placements:ProperMedia.utils.objectValues(p)||[],time:Date.now(),url:properPage.bidder_page_url,referrer:properPage.referrer,source:[{name:"prebidjs",version:properOps.prebid_version}]};u.gdpr={consent:gdprConsent.consentString,applies:"boolean"!=typeof gdprConsent.gdprApplies||gdprConsent.gdprApplies},uspConsent.usPrivacy&&(u.ccpa=uspConsent.usPrivacy),gppConsent&&gppConsent.gppString&&(u.gpp=gppConsent.gppString,u.gpp_sid=gppConsent.applicableSections);var g=schainCheck(s);""!=g&&(u.schain=g),ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&(u.coppa=!0),function(){let e="https://sync.serverbid.com/ss/"+r+".html";gdprConsent&&gdprConsent.consentString&&(e="boolean"==typeof gdprConsent.gdprApplies?appendUrlParam(e,`gdpr=${Number(gdprConsent.gdprApplies)}&gdpr_consent=${gdprConsent.consentString}`):appendUrlParam(e,`gdpr=0&gdpr_consent=${gdprConsent.consentString}`));uspConsent&&uspConsent.usPrivacy&&(e=appendUrlParam(e,`us_privacy=${uspConsent.usPrivacy}`));gppConsent&&gppConsent.gppString&&(e=appendUrlParam(e,`gpp=${gppConsent.gppString}&gpp_sid=${gppConsent.applicableSections}`));userSyncs.add({type:"iframe",url:e,bidder:s})}(),properLog.mylog(a,s),n.incrementRequestsSent(c);var m=ProperMedia.utils.getTimestampMs(),_=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".edge")||!1;$.ajax({url:a,method:"POST",requestType:"cors",bidder:s,edge:_,data:JSON.stringify(u),success:function(t){try{var r=ProperMedia.utils.getTimestampMs(),d=ProperMedia.utils.calcResponseMs(m,r);if(t){var p=(t=ProperMedia.utils.safeJsonParse(t))||{};if(p&&p.decisions&&Object.keys(p.decisions).length>0)for(o in p.decisions){var u=p.decisions[o],g=ProperMedia.utils.deepAccess(u,"pricing.clearPrice")||0,_=u.width||0,h=u.height||0,b=u.adId||"",v=u.adId||"",y=retrieveAd(u)||"";n.logBidResponse(new adObj({bidder:s,size:_+"x"+h,price:parseFloat(g),gross:parseFloat(g),adcode:y,tag_id:o,crid:b,adid:v,request_url:a,response:t,response_ms:d,received_ts:r,ttl:e.default_bid_ttl,floor:ProperMedia.utils.deepAccess(l,o+".floor")||0,target_slot:ProperMedia.utils.deepAccess(l,o+".slot_name")||""})),n.incrementBidResponseCount(c)}else n.logNoBidResponse(new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:a,response:p,response_ms:d,received_ts:r,ttl:0}))}else n.logNoBidResponse(new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:a,response:t,response_ms:d,received_ts:r,ttl:0}));n.incrementBidResponseCount(c)}catch(e){throw e.bidder=s,e}},error:function(e){try{n.incrementBidResponseCount(c);var t=ProperMedia.utils.getTimestampMs(),r=ProperMedia.utils.calcResponseMs(m,t),o={bidder:s,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:r};n.logBidResponseError(o)}catch(e){throw e.bidder=s,e}}})},bidderInfo:e}}(),bidAdapters.conversant=function(){var e={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","160x600","300x50","300x250","300x600","320x50","728x90","970x250"],gvlid:24},t="https://web.hb.ad.cpe.dotomi.com/s2s/header/24",r="conversant",s="propermedia";function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(e){var t={imps:{},data_map:{},request_cnt:0};if(ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".account_overrides.enabled")&&(s=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".account_overrides.bidder_ids.displaymanager")||s),e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,o){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(var n=0;n<e[a].length;n++){var d=e[a][n];void 0===t.imps[d]&&(t.imps[d]={id:d.toString(),bidfloor:0,secure:properPage.use_ssl?1:0,displaymanager:s,displaymanagerver:"2.2.4",banner:{format:[],pos:0}},t.data_map[d]={slot_name:o||"",tag_id:d,floor:0});var p=getBidderFloor(r,a);(!t.imps[d].bidfloor||p<t.imps[d].bidfloor)&&(t.imps[d].bidfloor=p,t.data_map[d].floor=p),t.imps[d].banner.format.push(parseSize(a)),t.request_cnt++}}))}return t}return{send:function(s){var o=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".site_id")||0;if(!o)return properLog.mylog("Error: Conversant Site ID is Required."),!1;var a,n=formatRequest(s),d=ProperMedia.utils.objectValues(n.imps)||[],p=n.data_map||{},l=n.request_cnt,c={id:Date.now().toString(),at:1,imp:d,site:{id:o.toString(),mobile:properDevice.isMobile()?1:0,page:properPage.bidder_page_url},device:(a=navigator.language?"language":"userLanguage",{h:screen.height,w:screen.width,dnt:ProperMedia.utils.getDNT()?1:0,language:navigator[a].split("-")[0],make:navigator.vendor?navigator.vendor:"",ua:navigator.userAgent}),user:{},tmax:properOps.tmax};!gppConsentModule.isConsentDenied()&&gdprConsentModule.hasPurpose4Consent()&&ProperMedia.utils.deepSetValue(c,"user.ext.fpc",properUser.pubcid);var{eids:u,uids:g}=function(){userIds.getEidsArray();var e=[],t=[];if(ProperMedia.utils.isArray(e)&&e.length>0){const r={"id5-sync.com":"id5id","liveramp.com":"idl_env"};e.forEach((function(s){r[s.source]&&(e.push(s),t.push(r[s.source]))}))}return{eids:e,uids:t}}();u.length>0&&ProperMedia.utils.deepSetValue(c,"user.ext.eids",u);var m=schainCheck(r);""!=m&&ProperMedia.utils.deepSetValue(c,"source.ext.schain",m),gdprConsent&&(ProperMedia.utils.deepSetValue(c,"user.ext.consent",gdprConsent.consentString),"boolean"==typeof gdprConsent.gdprApplies&&(c.regs={ext:{gdpr:Number(gdprConsent.gdprApplies)}})),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(c,"regs.ext.us_privacy",uspConsent.usPrivacy),properLog.mylog(t,r),s.incrementRequestsSent(l);var _=ProperMedia.utils.getTimestampMs(),h=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:t,method:"POST",requestType:"cors",bidder:r,edge:h,data:JSON.stringify(c),success:function(o){try{var a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(_,a);if((o=ProperMedia.utils.safeJsonParse(o))&&o.seatbid&&0!=o.seatbid.length&&o.seatbid[0].bid&&o.seatbid[0].bid.length)properLog.mylog(o,r),Object.keys(o.seatbid).forEach((function(d){Object.keys(o.seatbid[d].bid).forEach((function(l){var c=o.seatbid[d].bid[l],u=(c.id,c.impid||""),m=c.price||0,_=c.w||1,h=c.h||1,b=c.adm||"",v=c.crid||"",y=c.nurl||"";y&&(b+=ProperMedia.utils.createTrackPixel(y),y="");var P=new adObj({bidder:r,size:_+"x"+h,price:parseFloat(m),gross:parseFloat(m),adcode:b,nurl:y,tag_id:u,crid:v,request_url:t,response:c,response_ms:n,received_ts:a,ttl:e.default_bid_ttl,floor:ProperMedia.utils.deepAccess(p,u+".floor")||0,target_slot:ProperMedia.utils.deepAccess(p,u+".slot_name")||"",uids:g});s.logBidResponse(P)}))}));else{properLog.mylog("no conversant bids returned");var d=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:t,response:o,response_ms:n,received_ts:a,ttl:0});s.logNoBidResponse(d)}s.incrementBidResponseCount(l)}catch(e){throw e.bidder=r,e}},error:function(e){try{s.incrementBidResponseCount(l);var t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(_,t),a={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};s.logBidResponseError(a)}catch(e){throw e.bidder=r,e}}})},onBidWon:function(e,t){return e.nurl&&((new Image).src=e.nurl),!0},bidderInfo:e,formatRequest}}(),bidAdapters.criteo=function(){var bidderInfo={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:6e4,acceptable_ads:!0,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","160x600","300x50","300x250","300x600","320x480","320x50","728x90","970x250"],gvlid:91},bidder="criteo",networkId=8388,ENDPOINT_URL="https://bidder.criteo.com/cdb",FAST_BID_VERSION_CURRENT=136,PUBLISHER_TAG_URL="https://static.criteo.net/js/ld/publishertag.prebid."+FAST_BID_VERSION_CURRENT+".js",FAST_BID_PUBKEY_E=65537,FAST_BID_PUBKEY_N="ztQYwCE5BU7T9CDM5he6rKoabstXRmkzx54zFPZkWbK530dwtLBDeaWBMxHBUT55CYyboR/EZ4efghPi3CoNGfGWezpjko9P6p2EwGArtHEeS4slhu/SpSIFMjG6fdrpRoNuIAMhq1Z+Pr/+HOd1pThFKeGFr2/NhtAg+TXAzaU=",ADAPTER_VERSION=35,PROFILE_ID_INLINE=207,PROFILE_ID_PUBLISHERTAG=185,OPTOUT_COOKIE_NAME="cto_optout",BUNDLE_COOKIE_NAME="cto_bundle",GUID_RETENTION_TIME_HOUR=9360,OPTOUT_RETENTION_TIME_HOUR=43200,adblock_zones={"160x600":1697406,"728x90":1697405,"300x250":1697404,"320x50":1697453},NATIVE_DEF_REQ={main_image:{required:!0,sizes:[]},icon:{required:!0,sizes:[{width:50,height:50}]},clickUrl:{required:!0},title:{required:!0,len:80},sponsored_by:{required:!0},ctatext:{required:!1}};function parseSize(e){var t=e.split("x");return[parseInt(t[0]),parseInt(t[1])]}function formatRequest(e,t,r,s){var o={slots:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var a in e.slot_requests)formatTagIds(e.slot_requests[a],a);function formatTagIds(e,a){Object.keys(e).length>0&&Object.keys(e).forEach((function(n){for(var d=0;d<e[n].length;d++){var p=e[n][d],l=parseSize(n),c=p.split("-"),u=properUser.checkAdBlock()?adblock_zones[n]:c[0],g="display"==r.demand_type?"banner":r.demand_type;if(!u)return;void 0===o.slots[p]&&(o.slots[p]={impid:p,auctionId:s,slotid:ProperMedia.utils.generateUUID(),transactionid:ProperMedia.utils.generateUUID()},ProperMedia.utils.deepSetValue(o,"slots."+p+".ext.floors."+g,{}),"display"!=r.demand_type&&"native"!=r.demand_type||(o.slots[p].sizes=[]),"native"==r.demand_type?(o.slots[p].zoneid=u,o.slots[p].native=!0):"video"==r.demand_type&&(o.slots[p].video={playersizes:[l],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],maxduration:30,api:[1,2],skip:0,placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3],minduration:5,startdelay:0},o.slots[p].zoneid=u),o.data_map[p]={slot_name:a||"",tag_id:p,floor:0}),"display"!=r.demand_type&&"native"!=r.demand_type||o.slots[p].sizes.push(n);let m=getBidderFloor(t,n);ProperMedia.utils.deepSetValue(o,"slots."+p+".ext.floors."+g+"."+n,m),o.data_map[p].floor=m,o.request_cnt++}}))}return o}function formatCriteoRequest(e,t,r,s,o){var a={bids:{},slots:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var n in e.slot_requests)formatTagIds(e.slot_requests[n],n);function formatTagIds(e,n){Object.keys(e).length>0&&Object.keys(e).forEach((function(d){for(var p=0;p<e[d].length;p++){var l=e[d][p],c=parseSize(d),u=l.split("-")[0];if(void 0===a.slots[l]){a.bids[l]={bidder:t,params:{}},a.slots[l]={adUnitCode:l.toString(),auctionId:s,bidId:ProperMedia.utils.makeid(14),bidder:"criteo",bidderRequestId:o,userId:userIds.getUIdsObj(),userIdAsEids:userIds.getEidsArray(),schain:{},mediaTypes:{},params:{},src:"client",transactionId:ProperMedia.utils.generateUUID()},a.slots[l].getFloor=function(){return getBidderFloor(t,(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"}).size.join("x"))};var g=schainCheck(t);""!=g&&ProperMedia.utils.deepSetValue(a,"slots."+l+".schain",g),"display"==r.demand_type&&(a.slots[l].mediaTypes={banner:{sizes:[]}},a.slots[l].params.networkId=networkId,a.bids[l].params.networkId=networkId),"native"==r.demand_type?(a.slots[l].mediaTypes={native:NATIVE_DEF_REQ},a.slots[l].params.zoneId=u,a.bids[l].params.zoneId=u):"video"==r.demand_type&&(a.slots[l].mediaTypes={video:{playerSize:c,mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],maxduration:30,api:[1,2],skip:0,placement:"outstream"==r.video_type?3:1,minduration:5,playbackmethod:[6],startdelay:0}},a.slots[l].params.zoneId=u,a.bids[l].params.zoneId=u),a.data_map[l]={slot_name:n||"",tag_id:l,floor:0}}var m=getBidderFloor(t,d);(!a.data_map[l].floor||m<a.data_map[l].floor)&&(a.data_map[l].floor=m),"display"==r.demand_type&&a.slots[l].mediaTypes.banner.sizes.push(c),"native"==r.demand_type&&a.slots[l].mediaTypes.native.main_image.sizes.push(c),a.request_cnt++}}))}return a}function send(e){var t,r=e.bidder,s=properOps.bidder_info[r]||s,o=ENDPOINT_URL,a=0,n={},d={},p=[],l=ProperMedia.utils.deepAccess(e,"auction.id");ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".account_overrides.enabled")&&(networkId=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".account_overrides.bidder_ids.networkId")||networkId),publisherTagAvailable()||(window.Criteo=window.Criteo||{},window.Criteo.usePrebidEvents=!1,tryGetCriteoFastBid(),setTimeout((function(){var e=document.createElement("script");e.src=PUBLISHER_TAG_URL,e.async=!0,e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e)}),1200));var c=[],u=userIds.getUserIdData();if(ProperMedia.utils.deepAccess(u,"emailHashes.md5")&&c.push({id:ProperMedia.utils.deepAccess(u,"emailHashes.md5"),atype:3,ext:{stype:"hemmd5"}}),ProperMedia.utils.deepAccess(u,"emailHashes.sha256")&&c.push({id:ProperMedia.utils.deepAccess(u,"emailHashes.sha256"),atype:3,ext:{stype:"hemsha256"}}),c.length&&(t={data:{eids:[{source:properPage.domain,uids:c}]}}),publisherTagAvailable()){properLog.mylog("Criteo: Using FastBid");var g=formatCriteoRequest(e,r,s,l,_);p=ProperMedia.utils.objectValues(g.slots)||[];var m=ProperMedia.utils.objectValues(g.bids)||[];d=g.data_map||{};var _=ProperMedia.utils.makeid(14),h={auctionId:l,auctionStart:Date.now(),bidderCode:r,bidderRequestId:_,bids:m,gdprConsent:{consentString:gdprConsent.consentString||"",vendorData:gdprConsent.vendorData||{},gdprApplies:gdprConsent.gdprApplies?1:0},uspConsent:uspConsent.usPrivacy||"",refererInfo:{canonicalUrl:properPage.canonical_url,numIframes:0,reachedTop:!0,referer:properPage.referrer},userExt:t,coppa:"undefined"!==ProperMedia.utils.deepAccess(properSpecialOps,"coppa")?!!ProperMedia.utils.deepAccess(properSpecialOps,"coppa"):void 0},b=new Criteo.PubTag.Adapters.Prebid(PROFILE_ID_PUBLISHERTAG,ADAPTER_VERSION,p,h,properOps.prebid_version);o=b.buildCdbUrl(),n=b.buildCdbRequest(),a=g.request_cnt}else{properLog.mylog("Criteo: Sovrn Building Request");var v=buildContext();o=buildCdbUrl(v);var y=formatRequest(e,r,s,l),P=ProperMedia.utils.objectValues(y.slots)||[];if(d=y.data_map||{},a=y.request_cnt,0==P.length)return!1;n={id:ProperMedia.utils.generateUUID(),publisher:{url:properPage.bidder_page_url},slots:P,regs:{coppa:"undefined"!==ProperMedia.utils.deepAccess(properSpecialOps,"coppa")?!!ProperMedia.utils.deepAccess(properSpecialOps,"coppa"):void 0}},"display"==s.demand_type&&(n.publisher.networkid=parseInt(networkId));var w=schainCheck(r);""!=w&&ProperMedia.utils.deepSetValue(n,"source.ext.schain",w);var M=userIds.getEidsArray();M&&ProperMedia.utils.deepSetValue(n,"eids",M),gdprConsent&&(n.gdprConsent={},void 0!==gdprConsent.gdprApplies&&(n.gdprConsent.gdprApplies=!!gdprConsent.gdprApplies),void 0!==gdprConsent.consentString&&(n.gdprConsent.consentData=gdprConsent.consentString)),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(n,"user.uspIab",uspConsent.usPrivacy)}var I={method:"POST",url:"request_url",data:n,bidRequests:p};properLog.mylog(o,r),e.incrementRequestsSent(a);var x=ProperMedia.utils.getTimestampMs();$.ajax({url:o,requestType:"cors",method:"POST",data:JSON.stringify(n),success:function(t){try{properLog.mylog(t,r);var n=ProperMedia.utils.getTimestampMs(),p=ProperMedia.utils.calcResponseMs(x,n),l=ProperMedia.utils.safeJsonParse(t);if(!properOps.slot_level_auction&&publisherTagAvailable()){var c=Criteo?.PubTag?.Adapters?.Prebid?.GetAdapter?.(I);if(c&&l){var u=c.interpretResponse(l,I);u&&u.length>0&&u.forEach((function(t){var a=t.impid||"",l=t.cpm||0,c=t.width||0,u=t.height||0,g=t.ad||"",m=t.dealId||"",_=t.creativeId||"",h=1e3*t.ttl||s.default_bid_ttl,b=new adObj({bidder:r,size:c+"x"+u,price:parseFloat(l),gross:parseFloat(l),tag_id:a,dealid:m,crid:_,request_url:o,response:t,response_ms:p,received_ts:n,ttl:h,floor:ProperMedia.utils.deepAccess(d,a+".floor")||0,target_slot:ProperMedia.utils.deepAccess(d,a+".slot_name")||"",uids:Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids"))});if("native"==s.demand_type){b.type="native";var v=t.native||{};b.native=buildNative(v),"2x2"==b.size&&(b.size="1x1")}else if("video"==s.demand_type){var y=t.vastUrl;b.type="video",b.vast_tag=y;var P=ProperMedia.utils.parseVastVpaid(b.vast_tag);b.vast_type=P.vast_type,b.vpaid=P.vpaid,b.video_type=s.video_type}else b.adcode=g;e.logBidResponse(b)}))}}else if(l&&l.slots&&Object.keys(l.slots).length>0)Object.keys(l.slots).forEach((function(t){var a=l.slots[t],c=a.impid||"",u=(a.zoneid,a.cpm||0),g=a.width||0,m=a.height||0,_=a.creative||"",h=a.deal||"",b=a.creativecode||"",v=1e3*a.ttl||s.default_bid_ttl,y=new adObj({bidder:r,size:g+"x"+m,price:parseFloat(u),gross:parseFloat(u),tag_id:c,dealid:h,crid:b,request_url:o,response:a,response_ms:p,received_ts:n,ttl:v,floor:ProperMedia.utils.deepAccess(d,c+".floor")||0,target_slot:ProperMedia.utils.deepAccess(d,c+".slot_name")||""});if("native"==s.demand_type){y.type="native";var P=a.native||{};y.native=buildNative(P),"2x2"==y.size&&(y.size="1x1")}else if("video"==s.demand_type){var w=a.displayurl;y.type="video",y.vast_tag=w;var M=ProperMedia.utils.parseVastVpaid(y.vast_tag);y.vast_type=M.vast_type,y.vpaid=M.vpaid,y.video_type=s.video_type}else y.adcode=_;e.logBidResponse(y)}));else{var g=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:o,response:l,response_ms:p,received_ts:n,ttl:0});e.logNoBidResponse(g)}e.incrementBidResponseCount(a)}catch(e){throw e.bidder=r,e}},error:function(t){try{e.incrementBidResponseCount(a);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(x,s),n={bidder:r,status:t.status,statusText:t.statusText,timeout:t.timeout,response_ms:o};e.logBidResponseError(n)}catch(t){throw t.bidder=r,t}}})}function buildNative(e){return{link:{url:ProperMedia.utils.deepAccess(e,"products.0.click_url")||""},assets:[{title:{text:ProperMedia.utils.deepAccess(e,"products.0.title")||""}},{img:{type:1,url:ProperMedia.utils.deepAccess(e,"products.0.image.url")||""}},{img:{type:2,url:ProperMedia.utils.deepAccess(e,"advertiser.logo.url")||""}},{type:1,value:ProperMedia.utils.deepAccess(e,"advertiser.description")||""},{type:2,value:ProperMedia.utils.deepAccess(e,"products.0.description")||""},{type:12,value:ProperMedia.utils.deepAccess(e,"products.0.call_to_action")||""}],imptrackers:(ProperMedia.utils.deepAccess(e,"impression_pixels")||[]).map((function(e){return e.url}))}}function buildNativeFromPrebidNativeAd(e){return{link:{url:ProperMedia.utils.deepAccess(e,"clickUrl")||""},assets:[{title:{text:ProperMedia.utils.deepAccess(e,"title")||""}},{img:{type:1,url:ProperMedia.utils.deepAccess(e,"image")||""}},{img:{type:2,url:ProperMedia.utils.deepAccess(e,"icon.url")||""}},{type:1,value:ProperMedia.utils.deepAccess(e,"sponsoredBy")||""},{type:2,value:ProperMedia.utils.deepAccess(e,"body")||""},{type:12,value:ProperMedia.utils.deepAccess(e,"cta")||""}],imptrackers:ProperMedia.utils.deepAccess(e,"impressionTrackers")||[]}}function publisherTagAvailable(){return"undefined"!=typeof Criteo&&Criteo.PubTag&&Criteo.PubTag.Adapters&&Criteo.PubTag.Adapters.Prebid}function tryGetCriteoFastBid(){try{var fastBidStorageKey="criteo_fast_bid",hashPrefix="// Hash: ",fastBidFromStorage=properStorage.getDataFromLocalStorage(fastBidStorageKey,{bidderCode:bidder,gvlid:bidderInfo.gvlid});if(null!==fastBidFromStorage){var firstLineEndPosition=fastBidFromStorage.indexOf("\n"),firstLine=fastBidFromStorage.substr(0,firstLineEndPosition).trim();if(firstLine.substr(0,hashPrefix.length)!==hashPrefix)properLog.mylog("No hash found in FastBid"),properStorage.removeDataFromLocalStorage(fastBidStorageKey,{bidderCode:bidder,gvlid:bidderInfo.gvlid});else{var publisherTagHash=firstLine.substr(hashPrefix.length),publisherTag=fastBidFromStorage.substr(firstLineEndPosition+1);try{properLog.mylog("Using Criteo FastBid"),eval(publisherTag)}catch(e){console.error(e)}}}}catch(e){properLog.mylog("Criteo: Unable to get fast bid")}}function buildContext(){return{url:properPage.url,debug:"1"===ProperMedia.utils.deepAccess(properPage,"get_vars.pbt_debug"),noLog:"1"===ProperMedia.utils.deepAccess(properPage,"get_vars.pbt_nolog"),amp:!0}}function buildCdbUrl(e){var t=ENDPOINT_URL;t+="?profileId="+PROFILE_ID_INLINE,t+="&av="+String(ADAPTER_VERSION),t+="&wv="+encodeURIComponent(properOps.prebid_version),t+="&cb="+String(Math.floor(99999999999*Math.random())),e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");var r=readFromAllStorages(BUNDLE_COOKIE_NAME);return r&&(t+=`&bundle=${r}`),readFromAllStorages(OPTOUT_COOKIE_NAME)&&(t+="&optout=1"),t}function getUserSyncs(){var e="criteoPrebidAdapter";if(gdprConsent.gdprApplies&&gdprConsentModule.hasPurpose1Consent()){var t=[];t.push(`origin=${e}`),t.push(`topUrl=${properPage.domain}`),gdprConsent&&(gdprConsent.gdprApplies&&t.push("gdpr="+(1==gdprConsent.gdprApplies?1:0)),gdprConsent.consentString&&t.push(`gdpr_consent=${gdprConsent.consentString}`)),uspConsent.ccpaApplies&&uspConsent.usPrivacy&&t.push(`us_privacy=${uspConsent.usPrivacy}`);var r=Math.random().toString(),s={bundle:readFromAllStorages(BUNDLE_COOKIE_NAME),cw:properStorage.cookiesAreEnabled({bidderCode:bidder,gvlid:bidderInfo.gvlid}),lsw:properStorage.localStorageIsEnabled({bidderCode:bidder,gvlid:bidderInfo.gvlid}),optoutCookie:readFromAllStorages(OPTOUT_COOKIE_NAME),origin:e,requestId:r,tld:properPage.domain,topUrl:properPage.domain,version:"$prebid.version$".replace(/\./g,"_")};window.addEventListener("message",(function handler(e){if(!e.data||"https://gum.criteo.com"!=e.origin)return;if(e.data.requestId!==r)return;this.removeEventListener("message",handler),e.stopImmediatePropagation();const t=e.data;t.optout?(deleteFromAllStorages(BUNDLE_COOKIE_NAME),saveOnAllStorages(OPTOUT_COOKIE_NAME,!0,OPTOUT_RETENTION_TIME_HOUR)):t.bundle&&saveOnAllStorages(BUNDLE_COOKIE_NAME,t.bundle,GUID_RETENTION_TIME_HOUR)}),!0);var o=JSON.stringify(s).replace(/"/g,"%22");userSyncs.add({type:"iframe",url:`https://gum.criteo.com/syncframe?${t.join("&")}#${o}`,bidder})}return[]}function readFromAllStorages(e){var t=properStorage.getCookie(e,{bidderCode:bidder,gvlid:bidderInfo.gvlid}),r=properStorage.getDataFromLocalStorage(e,{bidderCode:bidder,gvlid:bidderInfo.gvlid});return t||r||void 0}function saveOnAllStorages(e,t,r){var s=new Date;s.setTime(s.getTime()+60*r*60*1e3);var o=`expires=${s.toUTCString()}`;properStorage.setCookie(e,t,o,null,null,{bidderCode:bidder,gvlid:bidderInfo.gvlid}),properStorage.setDataInLocalStorage(e,t,{bidderCode:bidder,gvlid:bidderInfo.gvlid})}function deleteFromAllStorages(e){properStorage.setCookie(e,"",0,null,null,{bidderCode:bidder,gvlid:bidderInfo.gvlid}),properStorage.removeDataFromLocalStorage(e,{bidderCode:bidder,gvlid:bidderInfo.gvlid})}return{send,bidderInfo,getUserSyncs,formatRequest}}(),bidAdapters.gumgum=function(){var e="https://g2.gumgum.com/hbid/imp",t={t:0,rq:8,pbv:properOps.prebid_version},r=null,s=null,o="gumgum";function parseSize(e,t){try{var r=(e=ProperMedia.utils.deepAccess(t,"native_sizes."+e)||e).split("x");return[parseInt(r[0]),parseInt(r[1])]}catch(e){return!1}}function formatRequest(e,t,r){var o={imps:{},data_map:{}};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var a in e.slot_requests)formatTagIds(e.slot_requests[a],a);function formatTagIds(e,a){Object.keys(e).length>0&&Object.keys(e).forEach((function(n){for(var d=0;d<e[n].length;d++){var p=e[n][d];if(void 0===o.imps[p]){var l=p.split("-");o.imps[p]={bidfloor:0,sizes:[],tag_id:p,native_size:""},ProperMedia.utils.deepAccess(r,"native_sizes."+n)?(o.imps[p].type=2,s||(o.imps[p].zoneId=l[0]||"",o.imps[p].native_size=n)):(o.imps[p].type=3,s?o.imps[p].slotId=l[0]||"":(o.imps[p].zoneId=l[0]||"",o.imps[p].slotId=l[1]||"")),o.data_map[p]={slot_name:a||"",tag_id:p}}var c=getBidderFloor(t,n);(!o.imps[p].bidfloor||c<o.imps[p].bidfloor)&&(o.imps[p].bidfloor=c),3==o.imps[p].type&&o.imps[p].sizes.push(parseSize(n))}}))}return o}function _getBrowserParams(e){var r,s,a,n,d,p,l,c,u,paramRegex=function(e){return new RegExp(`[?#&](${e}=(.*?))($|&)`,"i")},g={};try{s=(r=window.top).screen,a=e||""}catch(e){return g}return g={vw:r.innerWidth,vh:r.innerHeight,sw:s.width,sh:s.height,pu:function(e){return["ggad","ggdeal"].reduce(((t,r)=>{var s=e.match(paramRegex(r));return s?(s[1]&&(t=t.replace(s[1],"")),s[3]&&(t=t.replace(s[3],"")),t):t}),e)}(a),ce:properStorage.cookiesAreEnabled({bidderCode:o}),dpr:r.devicePixelRatio||1,jcsi:JSON.stringify(t),ogu:(l=(document&&document.getElementsByTagName("head")[0]).querySelector("meta[property='og:url']"),l?l.content:null)},c=window.navigator&&(window.navigator.mozConnection||window.navigator.webkitConnection),(p=(u=c&&(c.downlink||c.bandwidth))?Math.round(1024*u):null)&&(g.ns=p),(n=(a.match(paramRegex("ggad"))||[0,0,0])[2])&&(g[isNaN(n)?"eAdBuyId":"adBuyId"]=n),(d=(a.match(paramRegex("ggdeal"))||[0,0,0])[2])&&(g.ggdeal=d),g}return{send:function(t){var o=t.bidder,a=properOps.bidder_info[o]||a;if(ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".site_id")){var n=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".site_id")||"").split("-");s=properDevice.isMobile()&&2==n.length?n[1]:n[0]}var d=_getBrowserParams(properPage.url),p=userIds.getUIdsObj(),l=function(e){var t=["uid","eid","lipbid","envelope"];return Object.keys(e).reduce((function(r,s){var o=e[s];switch(typeof o){case"string":r[s]=o;break;case"object":var a=t.filter((function(e){return void 0!==o[e]}));a.length&&(r[s]=o[a[0]])}return r}),{})}(p)||{},c=schainCheck(o),u=formatRequest(t,o,a),g=ProperMedia.utils.objectValues(u.imps)||[],m=u.data_map||{};Object.keys(g).length>0&&Object.keys(g).forEach((function(n){!function(n){var u=new Date,g={pi:n.type,lt:u.getTime(),to:u.getTimezoneOffset()};s?g.pubId=s:g.t=n.zoneId;if(3==n.type){var _=(h=n.sizes,b=0,v=0,y=0,h.forEach((function(e){var[t,r]=e,s=t>r?t:r;(s>y||s===y&&t>=b&&r>=v)&&(y=s,b=t,v=r)})),[b,v]);g.maxw=_[0],g.maxh=_[1],g.si=n.slotId||"",g.bf=n.sizes.reduce((function(e,t){return e+(e.length?",":"")+t.join("x")}),"")}var h,b,v,y;r&&(g.pv=r);n.bidfloor&&(g.fp=n.bidfloor||0,g.fpc="USD");for(var P in l)g[P]=l[P];p&&p.id5id&&p.id5id.uid&&p.id5id.ext&&(g.id5Id=ProperMedia.utils.deepAccess(p,"id5id.uid")||null,g.id5IdLinkType=ProperMedia.utils.deepAccess(p,"id5id.ext.linkType")||null);gdprConsent&&(g.gdprApplies=gdprConsent.gdprApplies?1:0);g.gdprApplies&&(g.gdprConsent=gdprConsent.consentString);uspConsent.usPrivacy&&(g.uspConsent=uspConsent.usPrivacy);gppConsent&&(g.gppConsent={gppString:gppConsent.gppString,gpp_sid:gppConsent.applicableSections});ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&(g.coppa=1);c&&c.nodes&&(g.schain=(M=(w=c).ver+","+w.complete,w.nodes.map((function(e){M+=`!${encodeURIComponent(e.asi||"")},`,M+=`${encodeURIComponent(e.sid||"")},`,M+=`${encodeURIComponent(e.hp||"")},`,M+=`${encodeURIComponent(e.rid||"")},`,M+=`${encodeURIComponent(e.name||"")},`,M+=`${encodeURIComponent(e.domain||"")}`})),M));var w,M;g=ProperMedia.utils.mergeObject(g,d);var I=e+"?"+ProperMedia.utils.formatQueryString(g),x=n.sizes.length,S={id:ProperMedia.utils.makeid(14),tmax:3e3,tId:ProperMedia.utils.generateUUID(),pi:g.pi,sizes:n.sizes,url:I,method:"GET",data:g};properLog.mylog(I,o),t.incrementRequestsSent(x);var C=ProperMedia.utils.getTimestampMs(),O=ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".edge")||!1;$.ajax({url:I,method:"GET",bidder:o,edge:O,success:function(e){try{var s=ProperMedia.utils.getTimestampMs(),d=ProperMedia.utils.calcResponseMs(C,s);if(e)if((e=ProperMedia.utils.safeJsonParse(e))&&Object.keys(e).length&&!e.err){properLog.mylog(e,o);var p=e.ad||{},c=p.price||0,u=p.id||"",g=p.markup||"",_=p.width||0,h=p.height||0,b=e.cw||"",v=ProperMedia.utils.deepAccess(e,"meta.adomain")||[];b&&(g=b?function(e,t){return e.replace("AD_JSON",ProperMedia.utils.b64EncodeUnicode(JSON.stringify(t)))}(b,Object.assign({},e,{bidRequest:S})):g),r=ProperMedia.utils.deepAccess(e,"pag.pvid")||null;var y=ProperMedia.utils.deepAccess(n,"native_size")||_+"x"+h;let P=new adObj({bidder:o,price:parseFloat(c),gross:parseFloat(c),adcode:g,tag_id:n.tag_id,size:y,crid:u,adomain:v,request_url:I,response:p,response_ms:d,received_ts:s,ttl:a.default_bid_ttl,floor:n.bidfloor||0,uids:Object.keys(l)||[],target_slot:ProperMedia.utils.deepAccess(m,n.tag_id+".slot_name")||""});t.logBidResponse(P)}else{var P="No "+o+" bids returned. "+(ProperMedia.utils.deepAccess(e,"err")?e.err:"");properLog.mylog(P),t.logNoBidResponse(new adObj({bidder:o,price:0,gross:0,tag_id:"",request_url:I,response:e,response_ms:d,received_ts:s,ttl:0}))}else t.logNoBidResponse(new adObj({bidder:o,price:0,gross:0,tag_id:"",request_url:I,response:e,response_ms:d,received_ts:s,ttl:0}));t.incrementBidResponseCount(x)}catch(e){throw e.bidder=o,e}},error:function(e){try{t.incrementBidResponseCount(x);var r=ProperMedia.utils.getTimestampMs(),s=ProperMedia.utils.calcResponseMs(C,r),a={bidder:o,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:s};t.logBidResponseError(a)}catch(e){throw e.bidder=o,e}}})}(g[n])}))},bidderInfo:{rev_share:1,bid_grouping:"slot",default_bid_ttl:6e4,native_sizes:{sticky_horizontal:"1x1",native_horizontal:"1x1"},gvlid:61},formatRequest,removeCreative:function(e){try{var t=window.top.document.getElementById("GG_PXS");if(t){var r=t.parentNode;r&&r.parentNode.removeChild(r)}}catch(e){console.error(e)}}}}(),bidAdapters.ix=function(){var e={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,auto_gen_granularity:"size",auto_gen_sizes:["1x1","160x600","300x50","300x250","300x600","320x50","728x90","970x250"],gvlid:10},t="ix_features",r=null,s={"liveramp.com":{rti:"idl",adapter:"idl_env"},"id5-sync.com":{rti:"",adapter:"id5id"},"pubcid.org":{rti:"",adapter:"pubcid"}};let o={gvlid:e.gvlid,bidderCode:"ix"};const a={featureToggles:{},isFeatureEnabled:function(e){return ProperMedia.utils.deepAccess(this.featureToggles,`features.${e}.activated`)},getFeatureToggles:function(){if(properStorage.localStorageIsEnabled(o)){const e=ProperMedia.utils.safeJsonParse(properStorage.getDataFromLocalStorage(t,o));ProperMedia.utils.deepAccess(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){const r=e,s=new Date,a=ProperMedia.utils.deepAccess(r,"ext.features");a&&(this.featureToggles={expiry:s.setHours(s.getHours()+1),features:a},properStorage.localStorageIsEnabled(o)&&properStorage.setDataInLocalStorage(t,JSON.stringify(this.featureToggles),o))},clearFeatureToggles:function(){this.featureToggles={},properStorage.localStorageIsEnabled(o)&&properStorage.removeDataFromLocalStorage(t,o)}};function formatRequest(e,t,s){var o={imps:[],index_bids:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var a in e.slot_requests)formatTagIds(e.slot_requests[a],a);function formatTagIds(e,a){Object.keys(e).length>0&&Object.keys(e).forEach((function(n){for(var d=0;d<e[n].length;d++){var p=e[n][d];if(void 0===o.imps[p]){var l=p+"-"+ProperMedia.utils.makeid(5),c=n.split("x"),u=getBidderFloor(t,n),g={id:String(l),bidfloor:u,bidfloorcur:"USD",ext:{sid:l,siteID:String(r)}};if("display"==s.demand_type)g.banner={topframe:1,format:[{w:parseInt(c[0])||0,h:parseInt(c[1])||0,ext:{bidfloor:u}}]};else if("video"==s.demand_type){const e="outstream"==s.video_type;g.video={pos:1,topframe:1,skip:1,linearity:1,delivery:2,minduration:5,maxduration:30,plcmt:e?2:1,placement:e?3:1,playbackmethod:e?[6]:[3],api:[1,2],mimes:["video/mp4","application/javascript","video/webm"],protocols:[2,3,5,6],w:parseInt(c[0])||0,h:parseInt(c[1])||0}}o.imps.push(g),o.index_bids[l]={slot_name:a||"",width:parseInt(c[0]),height:parseInt(c[1]),tag_id:p,floor:u}}o.request_cnt++}}))}return o}return{send:function(e){var t=e.bidder,n=properOps.bidder_info[t]||n;a.getFeatureToggles();var d=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id")||"").toString().split("-")||["",""];if(!(r=properDevice.isMobile()&&2==d.length?d[1]:d[0]))return properLog.mylog("Error: "+t+" Site ID is Required."),!1;var p=formatRequest(e,t,n),l=p.imps||[],c=p.request_cnt,u={id:ProperMedia.utils.generateUUID(),site:{ref:properPage.referrer,page:properPage.bidder_page_url},ext:{source:"prebid",ixdiag:{sn:0,ls:properStorage.localStorageIsEnabled(o),imps:l.length||0}},imp:l};u=function(e){null==e.device&&(e.device={});return e.device.h=window.screen.height,e.device.w=window.screen.width,e}(u);var g=function(e){var t=[],r=[],o={};if(Array.isArray(e))for(var a=0;a<e.length;a++){var n=e[a];void 0!==s[n.source]&&ProperMedia.utils.deepAccess(n,"uids.0")&&(o[n.source]=!0,""!=s[n.source].rti&&(n.uids[0].ext={rtiPartner:s[n.source].rti}),delete n.uids[0].atype,t.push(n),""!=s[n.source].adapter&&r.push(s[n.source].adapter))}return{toSend:t,seenSources:o,uids:r}}(userIds.getEidsArray()),m=g.toSend,_=g.uids;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo){var h=window.headertag.getIdentityInfo();if(h&&"object"==typeof h)for(var b in h)if(void 0!==h[b]){var v=h[b];!v.responsePending&&v.data&&"object"==typeof v.data&&Object.keys(v.data).length&&!g.seenSources[v.data.source]&&m.push(v.data)}}m.length>0&&ProperMedia.utils.deepSetValue(u,"user.eids",m),ProperMedia.utils.deepSetValue(u,"source.tid",ProperMedia.utils.deepAccess(e,"auction.id"));var y=schainCheck(t);""!=y&&ProperMedia.utils.deepSetValue(u,"source.ext.schain",y),ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&ProperMedia.utils.deepSetValue(u,"regs.coppa",1),void 0!==gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(u,"regs.ext.gdpr",Number(gdprConsent.gdprApplies)),void 0!==gdprConsent.consentString&&ProperMedia.utils.deepSetValue(u,"user.ext.consent",gdprConsent.consentString||""),void 0!==gdprConsent.addtlConsent&&gdprConsent.addtlConsent&&ProperMedia.utils.deepSetValue(u,"user.ext.consented_providers_settings.addtl_consent",gdprConsent.addtlConsent),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(u,"regs.ext.us_privacy",uspConsent.usPrivacy),gppConsent&&(ProperMedia.utils.deepSetValue(u,"regs.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(u,"regs.gpp_sid",gppConsent.applicableSections));var P=r;JSON.stringify(u);let w="https://htlb.casalemedia.com/cygnus?s="+P;properLog.mylog(w,t),e.incrementRequestsSent(c);var M=ProperMedia.utils.getTimestampMs(),I=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({url:w,contentType:"text/plain",method:"POST",bidder:t,edge:I,data:JSON.stringify(u),success:function(r){try{var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(M,s);if(r)if((r=ProperMedia.utils.safeJsonParse(r))&&r.seatbid&&0!=r.seatbid.length&&r.seatbid[0].bid&&r.seatbid[0].bid.length){properLog.mylog(r,t);for(var d=0;d<r.seatbid.length;d++)for(var l=0;l<r.seatbid[d].bid.length;l++){var u=r.seatbid[d].bid[l],g=u.impid||"",m=u.cid||"",h=u.crid||"",b=u.adid||"",v=u.adomain||[],y=u.adm||"",P=ProperMedia.utils.isNumber(u.ttl)?1e3*u.ttl:n.default_bid_ttl,I=parseFloat(u.price/100)||0,x=p.index_bids[g],S=new adObj({bidder:t,price:I,gross:I,tag_id:x.tag_id,cid:m,crid:h,adid:b,adomain:v,request_url:w,response:u,response_ms:o,received_ts:s,ttl:P,floor:ProperMedia.utils.deepAccess(x,"floor")||0,target_slot:ProperMedia.utils.deepAccess(x,"slot_name")||"",uids:_});if("video"==n.demand_type){S.type="video",S.size=x.width+"x"+x.height,S.vast_tag=ProperMedia.utils.deepAccess(u,"ext.vasturl");var C=ProperMedia.utils.parseVastVpaid(S.vast_tag);S.vast_type=C.vast_type,S.vpaid=C.vpaid,S.video_type=n.video_type}else S.size=u.w+"x"+u.h,S.adcode=y;e.logBidResponse(S)}a.setFeatureToggles(r)}else properLog.mylog("No "+t+" bids returned"),e.logNoBidResponse(new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:w,response:r,response_ms:o,received_ts:s,ttl:0}));else e.logNoBidResponse(new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:w,response:r,response_ms:o,received_ts:s,ttl:0}));e.incrementBidResponseCount(c)}catch(e){throw e.bidder=t,e}},error:function(r){try{e.incrementBidResponseCount(c);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(M,s),a={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(a)}catch(r){throw r.bidder=t,r}}})},bidderInfo:e,getUserSyncs:function(){userSyncs.add({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html",bidder:"ix"})},formatRequest}}(),bidAdapters.justpremium=function(){var e={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:6e4,dont_refresh:1,gvlid:62,native_sizes:{desktop:{skin:"1x1",sticky_horizontal:"728x90",native_horizontal:"728x90"},mobile:{sticky_horizontal:"320x50",native_horizontal:"320x50"}}},t="justpremium";function formatRequest(t){var r={imps:{},JPbids:{},data_map:{},request_cnt:0},s=properDevice.isMobile()?"mobile":"desktop";if(t.requests&&formatTagIds(t.requests,""),t.slot_requests)for(var o in t.slot_requests)formatTagIds(t.slot_requests[o],o);function formatTagIds(t,o){Object.keys(t).length>0&&Object.keys(t).forEach((function(a){for(var n=0;n<t[a].length;n++){var d=t[a][n];void 0===r.imps[d]&&(r.imps[d]={tag_id:parseInt(d),sizes:[],slot_types:[[],{}]},r.data_map[d]={slot_name:o||"",tag_id:d}),r.JPbids[d]=a;var p=(ProperMedia.utils.deepAccess(e,"native_sizes."+s+"."+a)||a).split("x").map((function(e){return parseInt(e)}));if("728"==p[0]&&"90"==p[1])r.imps[d].slot_types[0]=r.imps[d].slot_types[0].concat(["cf","pu","as"]),r.imps[d].sizes.push([p[0],p[1]]),r.request_cnt++;else if("160"==p[0]&&"600"==p[1])r.imps[d].slot_types[0]=r.imps[d].slot_types[0].concat(["sa"]),r.imps[d].sizes.push([p[0],p[1]]),r.request_cnt++;else if("320"==p[0]&&"50"==p[1]){var l=["ms"];"native_horizontal"==a&&properDevice.isMobile()&&l.push("is"),r.imps[d].slot_types[0]=r.imps[d].slot_types[0].concat(l),r.imps[d].sizes.push([p[0],p[1]]),r.request_cnt++}else{if("1"!=p[0]||"1"!=p[1])return r;r.imps[d].slot_types[0]=r.imps[d].slot_types[0].concat(["wp"]),r.imps[d].sizes.push([p[0],p[1]]),r.request_cnt++}}}))}return r}return{send:function(r){var s=formatRequest(r),o=s.data_map||{},a=s.request_cnt;if(0==a)return!1;var n,d,p={zone:Object.keys(s.imps).map((function(e){return parseInt(e)})),referer:properPage.url,hostname:window.top.location.hostname,protocol:window.top.location.protocol.replace(":",""),sw:window.top.screen.width,sh:window.top.screen.height,ww:window.top.innerWidth,wh:window.top.innerHeight,c:(n=s.imps,d={},Object.keys(n).forEach((function(e){d[n[e].tag_id]=n[e].slot_types})),d),id:parseInt(Object.keys(s.imps).shift()),sizes:function(e){var t={};return Object.keys(e).forEach((function(r){t[e[r].tag_id]=e[r].sizes})),t}(s.imps),version:{prebid:properOps.prebid_version,jp_adapter:"1.8.3"}};!gppConsentModule.isConsentDenied()&&gdprConsentModule.hasPurpose4Consent()&&(p.pubcid=properUser.pubcid),p.uids=userIds.getUIdsObj(),properOps.schain&&ProperMedia.utils.deepSetValue(p,"schain",properOps.schain),gdprConsent&&(p.gdpr_consent={consent_string:gdprConsent.consentString,consent_required:"boolean"!=typeof gdprConsent.gdprApplies||gdprConsent.gdprApplies}),uspConsent.usPrivacy&&(p.us_privacy=uspConsent.usPrivacy);var l=JSON.stringify(p),c="https://pre.ads.justpremium.com/v/2.0/t/xhr?i="+ +new Date;properLog.mylog(c,t),r.incrementRequestsSent(a);var u=ProperMedia.utils.getTimestampMs(),g=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({method:"POST",url:c,requestType:"cors",bidder:t,edge:g,data:l,success:function(n){try{var d=ProperMedia.utils.getTimestampMs(),p=ProperMedia.utils.calcResponseMs(u,d);if(n=ProperMedia.utils.safeJsonParse(n),properLog.mylog(n,t),n&&n.bid)for(var l in n.bid)if(n.bid[l]&&n.bid[l].length>0){var g=n.bid[l].pop(),m=l,_=g.price||0,h=g.width||1,b=g.height||1,v=g.adm||"",y=g.id||"",P=1e3*g.ttl||e.default_bid_ttl,w=ProperMedia.utils.deepAccess(s,"JPbids."+m)||h+"x"+b;let a=new adObj({bidder:t,size:w,price:parseFloat(_),gross:parseFloat(_),adcode:v,tag_id:m,crid:y,request_url:c,response:g,ttl:P,response_ms:p,received_ts:d,uids:Object.keys(ProperMedia.utils.deepAccess(r,"auction.uids")),target_slot:ProperMedia.utils.deepAccess(o,m+".slot_name")||""});r.logBidResponse(a)}else{let e=new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:c,response:n,response_ms:p,received_ts:d,ttl:0});r.logNoBidResponse(e)}else{var M=new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:c,response:n,response_ms:p,received_ts:d,ttl:0});r.logNoBidResponse(M)}r.incrementBidResponseCount(a)}catch(e){throw e.bidder=t,e}},error:function(e){try{r.incrementBidResponseCount(a);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(u,s),n={bidder:t,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};r.logBidResponseError(n)}catch(e){throw e.bidder=t,e}}})},bidderInfo:e,getUserSyncs:function(){var e="?_c=a"+Math.random().toString(36).substring(7)+Date.now();"boolean"==typeof gdprConsent.gdprApplies&&gdprConsent.gdprApplies&&gdprConsent.consentString&&(e+="&consentString="+encodeURIComponent(gdprConsent.consentString)),uspConsent.usPrivacy&&(e+="&usPrivacy="+encodeURIComponent(uspConsent.usPrivacy)),userSyncs.add({type:"iframe",url:"https://pre.ads.justpremium.com/v/1.0/t/sync"+e,bidder:t})},formatRequest}}(),bidAdapters.kargo=function(){var e={rev_share:1,bid_grouping:"page",default_bid_ttl:3e5,gvlid:972,native_sizes:{native_vertical:"300x250",native_horizontal:"300x250",sticky_horizontal:"300x50"}},t={301:24},r="kargo",s="https://krk.kargo.com/api/v2/bid",o="https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&idx={INDEX}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",a=5,n="";function parseSize(t){var r=(t=ProperMedia.utils.deepAccess(e,"native_sizes."+t)||t).split("x");return[parseInt(r[0]),parseInt(r[1])]}function formatRequest(t){var s={bidIDs:{},bidSizes:{},request_cnt:0,tag_size_map:{},data_map:{},floor:0};if(t.requests&&formatTagIds(t.requests,""),t.slot_requests)for(var o in t.slot_requests)formatTagIds(t.slot_requests[o],o);function formatTagIds(t,o){Object.keys(t).forEach((function(a){for(var n=0;n<t[a].length;n++){var d=t[a][n],p=d.split("-")[0];void 0===s.bidIDs[d]&&(s.bidIDs[d]=p,s.bidSizes[d]=[],s.data_map[d]={slot_name:o||"",tag_id:d}),s.bidSizes[d].push(parseSize(a));var l=getBidderFloor(r,a);(!s.floor||l<s.floor)&&(s.floor=l),s.request_cnt++,ProperMedia.utils.deepAccess(e,"native_sizes."+a)&&(s.tag_size_map[d]=a)}}))}return s}let d;function getRequestCount(){return window.location?n===window.location.pathname?++d:(n=window.location.pathname,d=0):0}function _getCrb(){var t=function(){try{return JSON.parse(atob(_getLocalStorageSafely("krg_crb")))}catch(e){return{}}}();return Object.keys(t).length?t:function(){try{var t=JSON.parse(decodeURIComponent(properStorage.getCookie("krg_crb",{bidderCode:r,gvlid:e.gvlid})));if(t&&t.v){var s=JSON.parse(atob(t.v));if(s)return s}return{}}catch(e){return{}}}()}function _getLocalStorageSafely(t){try{return properStorage.getDataFromLocalStorage(t,{bidderCode:r,gvlid:e.gvlid})}catch(e){return null}}function _getUserIds(e,t){var r=_getCrb(),s={kargoID:r.userId,clientID:r.clientId,crbIDs:r.syncIds||{},optOut:r.optOut,usp:t};if(gdprConsent&&(s.gdpr={consent:gdprConsent.consentString||"",applies:!!gdprConsent.gdprApplies}),gppConsent){const e={};gppConsent.gppString&&(e.gppString=gppConsent.gppString),gppConsent.applicableSections&&(e.applicableSections=gppConsent.applicableSections),Object.keys(e).length&&(s.gpp=e)}return e&&(s.tdID=e),s}return{send:function(n){if(properPage.isolated)return properLog.mylog("Turn off Kargo bidder for isolated pages"),!0;var d=formatRequest(n.requests),p=d.data_map||{},l=d.request_cnt,c={sessionId:properSession.sessionData.uuid,requestCount:getRequestCount(),timeout:properOps.tmax,currency:"USD",cpmGranularity:1,timestamp:(new Date).getTime(),bidIDs:d.bidIDs,bidSizes:d.bidSizes,cpmRange:{floor:d.floor,ceil:999999},userIDs:{},pageURL:window.location.href,prebidVersion:properOps.prebid_version},u=function(t,s){return{userIDs:_getUserIds(t,s),pageURL:window.location.href,rawCRB:properStorage.getCookie("krg_crb",{bidderCode:r,gvlid:e.gvlid}),rawCRBLocalStorage:_getLocalStorageSafely("krg_crb")}}(!1,uspConsent.usPrivacy?uspConsent.usPrivacy:"1---"),g=schainCheck(r);""!=g&&(c.schain=g),ProperMedia.utils.mergeObject(c,u),properLog.mylog(s,r),n.incrementRequestsSent(l);var m=ProperMedia.utils.getTimestampMs(),_=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:s+"?json="+encodeURIComponent(JSON.stringify(c)),method:"GET",bidder:r,edge:_,requestType:"cors",success:function(c){try{c=ProperMedia.utils.safeJsonParse(c);var u=ProperMedia.utils.getTimestampMs(),g=ProperMedia.utils.calcResponseMs(m,u);if(c&&Object.keys(c).length>0)properLog.mylog(c,r),Object.keys(c).forEach((function(o){var a=c[o],l=a.width+"x"+a.height,m=Number(a.cpm)||0,_=a.adm||"",h=a.id||"";a.metadata&&a.metadata.landingPageDomain&&a.metadata.landingPageDomain,ProperMedia.utils.deepAccess(d,"tag_size_map."+o)&&(l=ProperMedia.utils.deepAccess(d,"tag_size_map."+o)),301==a.targetingCustom&&0==properAdPool.displayed_ads.length&&(properPage.takeover.bidder=r,properPage.takeover.price=t[a.targetingCustom]||m,properPage.isolated=1);var b=new adObj({bidder:r,size:l,price:parseFloat(m),gross:parseFloat(m),adcode:_,tag_id:o,crid:h,request_url:s,response:a,response_ms:g,received_ts:u,ttl:e.default_bid_ttl,floor:ProperMedia.utils.deepAccess(d,"floor")||0,target_slot:ProperMedia.utils.deepAccess(p,o+".slot_name")||""});n.logBidResponse(b)}));else{properLog.mylog("no kargo bids returned");var _=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:s,response:c,response_ms:g,received_ts:u,ttl:0});n.logNoBidResponse(_)}!function(){var e=ProperMedia.utils.generateUUID(),t=function(){var e=_getCrb();if(e)return e.clientId;return null}(),s=gdprConsent&&gdprConsent.gdprApplies?1:0,n=gdprConsent&&gdprConsent.consentString?gdprConsent.consentString:"",d=gppConsent&&gppConsent.gppString?gppConsent.gppString:"",p=gppConsent&&gppConsent.applicableSections&&Array.isArray(gppConsent.applicableSections)?gppConsent.applicableSections.join(","):"";if("string"==typeof uspConsent.usPrivacy&&4==uspConsent.usPrivacy.length&&1==uspConsent.usPrivacy[0]&&"Y"==uspConsent.usPrivacy[2])return;if(e&&t)for(var l=0;l<a;l++)userSyncs.add({type:"image",url:o.replace("{UUID}",t).replace("{SEED}",e).replace("{INDEX}",l).replace("{GDPR}",s).replace("{GDPR_CONSENT}",n).replace("{US_PRIVACY}",uspConsent.usPrivacy||"").replace("{GPP_STRING}",d).replace("{GPP_SID}",p),bidder:r})}(),n.incrementBidResponseCount(l)}catch(e){throw e.bidder=r,e}},error:function(e){try{n.incrementBidResponseCount(l);var t=ProperMedia.utils.getTimestampMs(),s=ProperMedia.utils.calcResponseMs(m,t),o={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:s};n.logBidResponseError(o)}catch(e){throw e.bidder=r,e}}})},onBidWon:function(e,t){return 0==ProperMedia.utils.deepAccess(properPage,"takeover.logged")&&""!=ProperMedia.utils.deepAccess(properPage,"takeover.bidder")&&ProperMedia.utils.deepAccess(properPage,"takeover.bidder")==e.bidder&&properLog.send_takeover_pixel(t,e),!0},bidderInfo:e,formatRequest}}(),bidAdapters.mediagrid=function(){var e="tmguid",t={};function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(e,t,r){var s={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,o){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(var n=0;n<e[a].length;n++){var d=e[a][n],p="grid-"+ProperMedia.utils.generateUUID();let{w:c,h:u}=parseSize(a);void 0===s.imps[d]&&(s.imps[d]={id:String(d),tagid:String(d),bidfloor:0,ext:{divid:p}},"display"==r.demand_type?s.imps[d].banner={format:[],w:c,h:u}:"video"==r.demand_type&&(s.imps[d].video={topframe:1,skip:1,linearity:"outstream"==r.video_type?2:1,minduration:10,maxduration:30,placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3],api:[1,2],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],w:c,h:u}),s.data_map[d]={slot_name:o||"",divid:p,floor:0});var l=getBidderFloor(t,a);(!s.imps[d].bidfloor||l<s.imps[d].bidfloor)&&(s.imps[d].bidfloor=l,s.data_map[d]=l),"display"==r.demand_type&&s.imps[d].banner.format.push({w:c,h:u}),s.request_cnt++}}))}return s}return{send:function(r){var s=r.bidder,o=properOps.bidder_info[s]||o;t={gvlid:o.gvlid||GVLID,bidderCode:s};var a="https://grid.bidswitch.net/hbjson",n=formatRequest(r,s,o),d=ProperMedia.utils.objectValues(n.imps)||[],p=n.data_map||{},l=n.request_cnt,c={id:ProperMedia.utils.generateUUID(),tmax:properOps.tmax,imp:d,site:{page:properPage.url},source:{tid:o.auctionId||ProperMedia.utils.generateUUID(),ext:{wrapper:"Prebid_js",wrapper_version:properOps.prebid_version}}};const u=properStorage.getDataFromLocalStorage(e,t)||function(){const r=ProperMedia.utils.generateUUID().replace(/-/g,"");return properStorage.setDataInLocalStorage(e,r,t),r}();u&&ProperMedia.utils.deepSetValue(c,"user.id",u.toString());var g=userIds.getEidsArray();g&&g.length&&ProperMedia.utils.deepSetValue(c,"user.ext.eids",g);var m=Object.keys(ProperMedia.utils.deepAccess(r,"auction.uids")),_=schainCheck(s);""!=_&&ProperMedia.utils.deepSetValue(c,"source.ext.schain",_),ProperMedia.utils.deepSetValue(c,"regs.coppa",ProperMedia.utils.deepAccess(properSpecialOps,"coppa")?1:0),ProperMedia.utils.deepSetValue(c,"user.ext.consent",gdprConsent.consentString),"boolean"==typeof gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(c,"regs.ext.gdpr",Number(gdprConsent.gdprApplies)),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(c,"regs.ext.us_privacy",uspConsent.usPrivacy),gppConsent&&(ProperMedia.utils.deepSetValue(c,"regs.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(c,"regs.gpp_sid",gppConsent.applicableSections)),properLog.mylog(a,s),r.incrementRequestsSent(l);var h=ProperMedia.utils.getTimestampMs(),b=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".edge")||!1;$.ajax({url:a,requestType:"cors",method:"POST",bidder:s,edge:b,data:JSON.stringify(c),success:function(e){try{var t=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(h,t);if((e=ProperMedia.utils.safeJsonParse(e))&&e.seatbid&&0!=e.seatbid.length&&e.seatbid[0].bid&&e.seatbid[0].bid.length)properLog.mylog(e,s),Object.keys(e.seatbid).forEach((function(d){Object.keys(e.seatbid[d].bid).forEach((function(l){var c=e.seatbid[d].bid[l],u=(c.id,c.impid||""),g=c.price||0,_=c.w||0,h=c.h||0,b=c.adm||"",v=c.dealid||"",y=c.crid||"",P=c.nurl||"",w=new adObj({bidder:s,size:_+"x"+h,price:parseFloat(g),gross:parseFloat(g),nurl:P,tag_id:u,dealid:v,crid:y,request_url:a,response:c,response_ms:n,received_ts:t,ttl:o.default_bid_ttl,floor:ProperMedia.utils.deepAccess(p,u+".floor")||0,target_slot:ProperMedia.utils.deepAccess(p,u+".slot_name")||"",uids:m});if("video"==o.demand_type){var M=adm||P;w.type="video",w.vast_tag=M;var I=ProperMedia.utils.parseVastVpaid(w.vast_tag);w.vast_type=I.vast_type,w.vpaid=I.vpaid,w.video_type=o.video_type}else{b='<div id="'+(ProperMedia.utils.deepAccess(p,u+".divid")||"")+'"></div>'+b}r.logBidResponse(w)}))}));else{properLog.mylog("No "+s+" bids returned");var d=new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:a,response:e,response_ms:n,received_ts:t,ttl:0});r.logNoBidResponse(d)}r.incrementBidResponseCount(l)}catch(e){throw e.bidder=s,e}},error:function(e){try{r.incrementBidResponseCount(l);var t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(h,t),a={bidder:s,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};r.logBidResponseError(a)}catch(e){throw e.bidder=s,e}}})},onBidWon:function(e,t){return e.nurl&&((new Image).src=e.nurl),!0},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:36e4,gvlid:686},getUserSyncs:function(){var e=[],t="https://x.bidswitch.net/sync?ssp=themediagrid";gdprConsent&&(e.push(["gdpr",gdprConsent.gdprApplies?1:0]),e.push(["gdpr_consent="+encodeURIComponent(gdprConsent.consentString||"")])),uspConsent.usPrivacy&&e.push(["us_privacy",encodeURIComponent(uspConsent.usPrivacy)]),e.length>0&&(t+="?"+e.map((function(e){e.join("=")})).join("&")),userSyncs.add({type:"image",url:t,bidder:"mediagrid"})},formatRequest}}(),bidAdapters.medianet=function(){const e={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","2x2","120x600","160x600","300x50","300x100","300x1050","300x250","300x420","300x600","320x100","320x480","320x50","336x280","468x60","728x90","970x250","970x66","970x90","fluid"],gvlid:142},t={desktop_ron_id:"515514711",mobile_ron_id:"506882127",video_ron_id:"677195738"},r="medianet";let s="8CUW4K2MG";function parseSize(e){const t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function getCrid(s){const o="display"===e.demand_type?properDevice.isMobile()?"mobile_ron_id":"desktop_ron_id":"video_ron_id",a=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".account_overrides.enabled"),n=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".account_overrides.bidder_ids"),d=a&&n&&n[o]?n[o]:null,p=s.split("-"),[l]=p.map((e=>parseInt(e))),c=p.length>1&&!isNaN(l)?l?.toString():null;return d||c||t[o]}function formatRequest(e,t,r){let s;const o={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(s in e.slot_requests)formatTagIds(e.slot_requests[s],s);function formatTagIds(e,s){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(let n=0;n<e[a].length;n++){const d=e[a][n],{w:p,h:l}=parseSize(a);if(void 0===o.imps[d]){const e=getCrid(d);o.imps[d]={id:d.toString(),tagid:e,bidfloor:0,ext:{visibility:0}},o.data_map[d]={slot_name:s||"",tag_id:d,floor:0},"display"==r.demand_type?o.imps[d].banner=[]:"video"==r.demand_type?o.imps[d].video={protocols:[1,2,3,4,5,6],pos:0,topframe:1,minduration:10,maxduration:30,mimes:["video/mp4","application/javascript"],api:[1,2],placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3],context:r.video_type,playerSize:[p,l]}:"native"==r.demand_type&&(o.imps[d].native=JSON.stringify({request:{ver:"1.2",context:1,plcmttype:1,privacy:1,assets:[{id:1,required:1,title:{len:80}},{id:2,required:1,img:{type:3,w:p,h:l}},{id:3,required:0,img:{type:1,w:50,h:50}},{id:4,required:1,data:{type:1}},{id:5,required:0,data:{type:2}},{id:6,required:1,data:{type:0}},{id:10,required:0,img:{type:0,w:50,h:50}},{id:11,required:0,data:{type:1}},{id:12,required:0,data:{type:2}},{id:21,required:0,data:{type:11}},{id:22,required:0,data:{type:12}}]}}))}"display"==r.demand_type&&o.imps[d].banner.push(parseSize(a));const c=getBidderFloor(t,a);(!o.imps[d].bidfloor||c<o.imps[d].bidfloor)&&(o.imps[d].bidfloor=c,o.data_map[d].floor=c),o.request_cnt++}}))}return o}function getUrlFromSelector(e,t){const r=function(e,t){try{const r=window.top.document.querySelector(e);if(null!==r&&r[t])return r[t]}catch(e){}}(e,t);return r&&function(e){const t=window.top.document.createElement("a");return t.href=e,t.href}(r)}return{send:function(e){const t=e.bidder,r=properOps.bidder_info[t]||r,o=formatRequest(e,t,r),a=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".account_overrides.enabled")?ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".account_overrides.site_id"):null,n=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id");s=a||n||s;const d="https://prebid.media.net/rtb/prebid?cid="+s,p=ProperMedia.utils.objectValues(o.imps)||[],l=o.data_map||{},c=o.request_cnt,u={canonicalUrl:getUrlFromSelector('link[rel="canonical"]',"href"),twitterUrl:getUrlFromSelector('meta[property="og:url"]',"content"),ogUrl:getUrlFromSelector('meta[name="twitter:url"]',"content")},g=ProperMedia.utils.mergeObject({domain:properPage.domain,page:properPage.bidder_page_url,ref:properPage.referrer,canonical_url:properPage.canonical_url,isTop:!0},u),m={id:Date.now().toString(),site:g,imp:p,ext:{customer_id:s.toString(),prebid_version:properOps.prebid_version,screen:{w:window.innerWidth,h:window.innerHeight}},tmax:properOps.tmax},_=schainCheck(t);""!=_&&ProperMedia.utils.deepSetValue(m,"ext.schain",_);const h=userIds.getUIdsObj();h&&Object.keys(h).length&&ProperMedia.utils.deepSetValue(m,"ext.user_id",h),ProperMedia.utils.deepSetValue(m,"ext.coppa_applies",!!ProperMedia.utils.deepAccess(properSpecialOps,"coppa")),gdprConsent&&"boolean"==typeof gdprConsent.gdprApplies&&(ProperMedia.utils.deepSetValue(m,"ext.gdpr_applies",!!gdprConsent.gdprApplies),gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(m,"ext.gdpr_consent_string",gdprConsent.consentString||"")),ProperMedia.utils.deepSetValue(m,"ext.usp_applies",!!uspConsent),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(m,"ext.usp_consent_string",uspConsent.usPrivacy),properLog.mylog(d,t),e.incrementRequestsSent(c);const b=ProperMedia.utils.getTimestampMs(),v=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({url:d,method:"POST",requestType:"cors",bidder:t,edge:v,data:JSON.stringify(m),success:function(s){try{var o=ProperMedia.utils.getTimestampMs(),a=ProperMedia.utils.calcResponseMs(b,o);if((s=ProperMedia.utils.safeJsonParse(s))&&s.bidList&&0!=s.bidList.length)properLog.mylog(s,t),s.bidList.map((function(s){const n=s.requestId||"",p=s.cpm||0,c=s.width||1,u=s.height||1;let g=s.ad||"";const m=s.creativeId||"";let _=s.nurl||!1;const h=1e3*s.ttl||r.default_bid_ttl;_&&"video"!==r.demand_type&&(g+=ProperMedia.utils.createTrackPixel(_),_="");const b=new adObj({bidder:t,size:c+"x"+u,price:parseFloat(p),gross:parseFloat(p),adcode:g,nurl:_,tag_id:n,crid:m,request_url:d,response:s,response_ms:a,received_ts:o,ttl:h,floor:ProperMedia.utils.deepAccess(l,n+".floor")||0,target_slot:ProperMedia.utils.deepAccess(l,n+".slot_name")||"",uids:Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids"))});if("video"==r.demand_type){const e=s.vastUrl||s.vastXml||g;b.type="video",b.vast_tag=e;const t=ProperMedia.utils.parseVastVpaid(b.vast_tag);b.vast_type=t.vast_type,b.vpaid=t.vpaid,b.video_type=r.video_type}else if("native"==r.demand_type){b.type="native";const e=s.native;e.clickTrackers=ProperMedia.utils.deepAccess(e,"link.clicktrackers")||[],b.native=e}else b.adcode=g;s.no_bid?e.logNoBidResponse(b):e.logBidResponse(b)}));else{properLog.mylog("no medianet bids returned");const r=new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:d,response:s,response_ms:a,received_ts:o,ttl:0});e.logNoBidResponse(r)}e.incrementBidResponseCount(c)}catch(e){throw e.bidder=t,e}},error:function(r){try{e.incrementBidResponseCount(c);const s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(b,s),a={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(a)}catch(r){throw r.bidder=t,r}}})},onBidWon:function(e,t){if(e.nurl){(new Image).src=e.nurl}return!0},bidderInfo:e,formatRequest}}(),bidAdapters.nobid=function(){var e,t,r="nobid";function formatRequest(t,r,s){const o={imps:[],data_map:{},request_count:0};if(t.requests&&formatTagIds(t.requests,""),t.slot_requests)for(var a in t.slot_requests)formatTagIds(t.slot_requests[a],a);function formatTagIds(t,a){Object.keys(t).length>0&&Object.keys(t).forEach((function(n){const d=n.split("x").map(Number);for(let l=0;l<t[n].length;l++){const c=t[n][l];o.imps[c]||(o.imps[c]={d:ProperMedia.utils.generateUUID(),sid:e,pid:c,at:"display"==s.demand_type?"banner":"video",params:{siteId:e,placementId:c},z:[],g:{}},o.data_map[c]={slot_name:a||"",tag_id:c,floor:0}),o.request_count++,o.imps[c].z.push(d);var p=getBidderFloor(r,n);(!o.imps[c].floor||p<o.imps[c].floor)&&(o.imps[c].floor=p,o.data_map[c].floor=p)}}))}return o}function timestamp(){const zp=function(e){return e.toString().padStart(2,"0")},e=new Date,t=e.getDate(),r=e.getFullYear(),s=e.getMonth()+1,o=e.getHours(),a=e.getMinutes(),n=e.getSeconds();return r+"-"+zp(s)+"-"+zp(t)+" "+zp(o)+":"+zp(a)+":"+zp(n)}function clientDim(){try{const e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);return`${e}x${Math.max(document.documentElement.clientHeight,window.innerHeight||0)}`}catch(e){}}return window.nobidVersion="1.3.3",window.nobid=window.nobid||{},window.nobid.bidResponses=window.nobid.bidResponses||{},window.nobid.timeoutTotal=0,window.nobid.bidWonTotal=0,window.nobid.refreshCount=0,window.nobid.renderTag=function(e,t){var r=window.nobid.bidResponses[t.toString()];if(r&&r.adm2){var s=r.adm2;e.write(s),e.close()}},window.addEventListener("message",(function(e){var t=e[e.message?"message":"data"].toString();if("nbTagRenderer.requestAdMarkup|"===t.substring(0,30)){var r=t.substring(t.indexOf("|")+1);if(window.nobid&&window.nobid.bidResponses){var s=window.nobid.bidResponses[r.toString()];if(s&&s.adm2){var o=s.adm2;o&&e.source.postMessage("nbTagRenderer.renderAdInSafeFrame|"+o,"*")}}}}),!1),{send:function(s){r=s.bidder;var o=properOps.bidder_info[r]||o;if(t={gvlid:o.gvlid,bidderCode:r},!(e=Number(ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".site_id"))))return properLog.mylog("No_Bid: Error Site ID is Required."),!1;if(void 0!==window.nobid.refreshLimit&&window.nobid.refreshLimit<window.nobid.refreshCount)return properLog.mylog("No_Bid: refreshLimit met: "+window.nobid.refreshCount),!1;let a=(n="_ublock",properStorage.getCookie(n,t));var n;if(a)return properLog.mylog("No_Bid: Request blocked for user. hours: "+a),!1;var d=formatRequest(s,r,o),p=d.data_map||{};const l=d.request_count,c={sid:e,l:properPage.url,tt:encodeURIComponent(document.title).replace(/'|;|quot;|39;|&amp;|&|#|\r\n|\r|\n|\t|\f|%0A|"|%22|%5C|%23|%26|%26|%09/gm,""),a:Object.keys(d.imps).map((e=>d.imps[e])),t:timestamp(),tz:Math.round((new Date).getTimezoneOffset()),r:clientDim(),lang:navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage,ref:properPage.referrer,gdpr:{},usp:uspConsent.usPrivacy||"",pjbdr:"nobid",schain:schainCheck(r)||null,eids:userIds.getEidsArray(),coppa:ProperMedia.utils.deepAccess(properSpecialOps,"coppa")?{coppa:!0}:null,ortb2:{site:{domain:properPage.domain,page:properPage.url,referrer:properPage.referrer}}};var u=Object.keys(ProperMedia.utils.deepAccess(s,"auction.uids"));"boolean"==typeof gdprConsent.gdprApplies&&(ProperMedia.utils.deepSetValue(c,"gdpr.consentRequired",gdprConsent.gdprApplies),gdprConsent.consentString&&ProperMedia.utils.deepSetValue(c,"gdpr.consentString",gdprConsent.consentString));let g=1==properOps.testing_mode.ids?"https://qa-ads.nobid.com/adreq":"https://ads.servenobid.com/adreq";properLog.mylog(g,r),s.incrementRequestsSent(l),window.nobid.refreshCount++;let m=!(!gdprConsent.gdprApplies||!gdprConsentModule.hasPurpose1Consent());const _=ProperMedia.utils.getTimestampMs(),h=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:g+"?cb="+Math.floor(11e3*Math.random()),method:"POST",requestType:"cors",bidder:r,edge:h,withCredentials:m,data:JSON.stringify(c).replace(/'|&|#/g,""),success:function(e){try{const a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(_,a);if(function(e){e&&void 0!==e.rlimit&&(window.nobid.refreshLimit=e.rlimit)}(e=ProperMedia.utils.safeJsonParse(e)),function(e){e&&void 0!==e.ublock&&function(e,r,s){var o=new Date;o.setTime(o.getTime()+60*s*60*1e3);var a="expires="+o.toUTCString();properStorage.setCookie(e,r,a,t)}("_ublock","1",e.ublock)}(e),e&&"object"==typeof e&&e.bids&&0!==e.bids.length){properLog.mylog(e,r);for(const t of e.bids){if(t.bdrid<100)continue;window.nobid.bidResponses[t.id?.toString()]=t;const{h:e,w:d}=t.size,l=new adObj({bidder:r,size:(d??1)+"x"+(e??1),price:parseFloat(t.price??t.bucket??0),gross:parseFloat(t.price??t.bucket??0),adcode:t.adm,tag_id:t.divid,crid:t.creativeid,dealid:t.dealid,request_url:g,response:t,response_ms:n,received_ts:a,ttl:3e5,floor:ProperMedia.utils.deepAccess(p,t.divid+".floor")||0,target_slot:ProperMedia.utils.deepAccess(p,t.divid+".slot_name")||"",uids:u});if("video"==o.demand_type||"video"==t.atype){const e=ProperMedia.utils.parseVastVpaid(t.vastXml)?.vast_type;t.vastUrl&&(l.vast_tag=t.vastUrl,l.vast_type=e),t.vastXml&&(l.vast_tag=t.vastXml,l.vast_type=e)}s.logBidResponse(l)}}else properLog.mylog("no no-bid bids returned"),s.logNoBidResponse(new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:g,response:e,response_ms:n,received_ts:a,ttl:0}))}catch(e){throw e.bidder=r,e}},error:function(e){try{s.incrementBidResponseCount(l);const t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(_,t),a={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};s.logBidResponseError(a)}catch(e){throw e.bidder=r,e}}})},onBidWon:function(e,t){return window.nobid.bidWonTotal++,!0},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,gvlid:816},getUserSyncs:function(){let e="";return gdprConsent&&"string"==typeof gdprConsent.consentString&&("boolean"==typeof gdprConsent.gdprApplies?e+=`?gdpr=${Number(gdprConsent.gdprApplies)}&gdpr_consent=${gdprConsent.consentString}`:e+=`?gdpr_consent=${gdprConsent.consentString}`),uspConsent.usPrivacy&&(e.length>0?e+="&":e+="?",e+="usp_consent="+uspConsent.usPrivacy),[{type:"iframe",url:"https://public.servenobid.com/sync.html"+e}]},formatRequest}}(),bidAdapters.ogury=function(){var e,t={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:6e4,gvlid:31,native_sizes:{sticky_horizontal:"1x1"}},r="ogury",s="https://ms-cookie-sync.presage.io",o="https://mweb-hb.presage.io/api/header-bidding-request",a="1.5.0";function parseSize(e){var r=(e=ProperMedia.utils.deepAccess(t,"native_sizes."+e)||e).split("x");return{w:parseInt(r[0]),h:parseInt(r[1])}}function formatRequest(t){var s={imps:{},data_map:{},request_cnt:0};if(t.requests&&formatTagIds(t.requests,""),t.slot_requests)for(var o in t.slot_requests)formatTagIds(t.slot_requests[o],o);function formatTagIds(t,o){Object.keys(t).length>0&&Object.keys(t).forEach((function(a){for(var n=0;n<t[a].length;n++){var d=t[a][n];void 0===s.imps[d]&&(s.imps[d]={id:d,tagid:d,bidfloor:0,banner:{format:[]},ext:{assetKey:e,adUnitId:d}},s.data_map[d]={floor:0,tag_sizes:[],slot_name:o||""});var p=getBidderFloor(r,a);(!s.imps[d].bidfloor||p<s.imps[d].bidfloor)&&(s.imps[d].bidfloor=p,s.data_map[d].floor=p),s.data_map[d].tag_sizes.push(a),s.imps[d].banner.format.push(parseSize(a)),s.imps[d].banner.format.some((e=>1===e.w&&1===e.h))||(s.imps[d].ext.skipSizeCheck=!0),s.request_cnt++}}))}return s}function getClientWidth(){const e=window.top.document.documentElement.clientWidth?window.top.document.documentElement.clientWidth:0,t=window.top.innerWidth?window.top.innerWidth:0,r=window.top.outerWidth?window.top.outerWidth:0,s=window.top.screen.width?window.top.screen.width:0;return e||t||r||s}function getClientHeight(){const e=window.top.document.documentElement.clientHeight?window.top.document.documentElement.clientHeight:0,t=window.top.innerHeight?window.top.innerHeight:0,r=window.top.outerHeight?window.top.outerHeight:0,s=window.top.screen.height?window.top.screen.height:0;return e||t||r||s}return{send:function(s){if(!(e=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".site_id")||0))return properLog.mylog("Ogury: Error Site ID is Required."),!1;if(!function(e){try{if("mobile"!=properDevice.device_type)return properLog.mylog("Ogury: Not a correct device, Ogury is mobile only"),!1;var t=(properDevice.browser_version||"0").toString().split(".")[0];if(properDevice.os_group.includes("iOS")){if(properDevice.browser.includes("Safari"))return!(Number(t)<10&&(properLog.mylog("Ogury: Not a correct Safari version"),1));if(properDevice.browser.includes("Chrome"))return!(Number(t)<83&&(properLog.mylog("Ogury: Not a correct Chrome version"),1));if(properDevice.browser.includes("Facebook"))return!0}if(properDevice.os_group.includes("Android")){if(properDevice.browser.includes("Samsung"))return!0;if(properDevice.browser.includes("Chrome"))return!(Number(t)<83&&(properLog.mylog("Ogury: Not a correct Chrome version"),1));if(properDevice.browser.includes("Facebook"))return!0}return properLog.mylog("Ogury: Not a correct OS/Browser/Version"),!1}catch(e){return!1}}())return properLog.mylog("Ogury: Not a correct device"),!1;var n=formatRequest(s),d=ProperMedia.utils.objectValues(n.imps)||[],p=n.data_map||{},l=n.request_cnt;if(0==d.length)return!1;var c={id:ProperMedia.utils.generateUUID(),tmax:properOps.tmax,at:1,regs:{ext:{gdpr:Number(gdprConsent.gdprApplies)}},site:{id:e,domain:ProperMedia.utils.getPageDomain(),page:properPage.bidder_page_url},user:{ext:{consent:""}},imp:d,ext:{adapterversion:a,prebidversion:properOps.prebid_version},device:{w:getClientWidth(),h:getClientHeight(),pxratio:window.devicePixelRatio}};"boolean"==typeof gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(c,"regs.ext.gdpr",Number(gdprConsent.gdprApplies)),gdprConsent.consentString&&ProperMedia.utils.deepSetValue(c,"user.ext.consent",gdprConsent.consentString),s.incrementRequestsSent(l);var u=ProperMedia.utils.getTimestampMs();properLog.mylog(o,r);var g=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({method:"POST",url:o,requestType:"cors",bidder:r,edge:g,headers:{"Content-Type":"application/json"},data:JSON.stringify(c),success:function(e){try{properLog.mylog(e,r),e=ProperMedia.utils.safeJsonParse(e);var a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(u,a);if(e&&e.seatbid&&e.seatbid.length>0)e.seatbid.forEach((function(e){e.bid.forEach((function(e){var d=e.impid||"",l=e.price||0,c=e.w||1,u=e.h||1,g=e.adm||"",m=e.id||"",_=e.adomain||[],h=e.nurl||"",b=e.ext||{},v=c+"x"+u,y=ProperMedia.utils.deepAccess(e,"ext.campaignid"),P={ext:b,size:v,width:c,height:u};(ProperMedia.utils.deepAccess(p,d+".tag_sizes")||[]).length&&(v=ProperMedia.utils.deepAccess(p,d+".tag_sizes.0")||v);var w=new adObj({bidder:r,size:v,price:parseFloat(l),gross:parseFloat(l),adcode:g,ad_details:P,nurl:h,tag_id:d,crid:m,cid:y,adomain:_,request_url:o,response:e,response_ms:n,received_ts:a,ttl:t.default_bid_ttl,floor:ProperMedia.utils.deepAccess(p,d+".floor")||0,target_slot:ProperMedia.utils.deepAccess(p,d+".slot_name")||""});s.logBidResponse(w)}))}));else{var d=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:o,response:e,response_ms:n,received_ts:a,ttl:0});s.logNoBidResponse(d)}s.incrementBidResponseCount(l)}catch(e){throw e.bidder=r,e}},error:function(e){try{s.incrementBidResponseCount(l);var t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(u,t),a={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};s.logBidResponseError(a)}catch(e){throw e.bidder=r,e}}})},onBidWon:function(t,r){var s="display"==t.type?"banner":t.type,o={assetKey:e||"",adUnitId:t.tag_id||"",adUnitCode:r.div_id||"",creativeId:t.crid||"",campaignId:t.cid||"",requestId:t.tag_id||"",bidder:t.bidder||"",width:ProperMedia.utils.deepAccess(t,"ad_details.width")||1,height:ProperMedia.utils.deepAccess(t,"ad_details.height")||1,size:ProperMedia.utils.deepAccess(t,"ad_details.size")||"1x1",mediaType:s||"",cpm:t.price||0,ad:t.adcode||"",nurl:t.nurl||"",meta:{advertiserDomains:t.adomain},currency:"USD",netRevenue:!0,ttl:60,adapterVersion:a,prebidVersion:properOps.prebid_version,params:[{assetKey:e||"",adUnitId:t.tag_id||"",adUnitCode:r.div_id||"",creativeId:t.crid||"",campaignId:t.cid||""}],ext:ProperMedia.utils.deepAccess(t,"ad_details.ext")||{}};return window.OG_PREBID_BID_OBJECT=o,t.nurl&&((new Image).src=t.nurl),!0},bidderInfo:t,getUserSyncs:function(){var e=gdprConsent.consentString||"";userSyncs.add({type:"iframe",url:s+"/user-sync.html?gdpr_consent="+e+"&source=prebid",bidder:r}),userSyncs.add({type:"image",url:s+"/v1/init-sync/bid-switch?iab_string="+e+"&source=prebid",bidder:r}),userSyncs.add({type:"image",url:s+"/ttd/init-sync?iab_string="+e+"&source=prebid",bidder:r}),userSyncs.add({type:"image",url:s+"/xandr/init-sync?iab_string="+e+"&source=prebid",bidder:r})},formatRequest,removeCreative:function(e){try{let r=ProperMedia.utils.deepAccess(e,"displayed_ad.tag_id")||"";var t=window.top.document.getElementById("ogy-root-container-"+r);t&&t.parentNode.removeChild(t)}catch(e){console.error(e)}}}}(),bidAdapters.openx=function(){var e="https://rtb.openx.net/openrtbb/prebidjs",t="https://DEL_DOMAIN/w/1.0/pd",r=null;function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(e,t,s){var o={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var a in e.slot_requests)formatTagIds(e.slot_requests[a],a);function formatTagIds(e,a){Object.keys(e).length>0&&Object.keys(e).forEach((function(n){for(var d=0;d<e[n].length;d++){var p=e[n][d];if(void 0===o.imps[p]){var l=r||p.split("-")[0]||p,c="openx-"+ProperMedia.utils.generateUUID();if(o.imps[p]={id:String(p),tagid:String(l),bidfloorcur:"USD",bidfloor:0,ext:{divid:c}},"display"==s.demand_type)o.imps[p].banner={topframe:1,format:[]};else if("video"==s.demand_type){var u=n.split("x");o.imps[p].video={topframe:1,skip:1,placement:"outstream"==s.video_type?3:1,playbackmethod:"outstream"==s.video_type?[6]:[3],linearity:"outstream"==s.video_type?2:1,minduration:10,maxduration:30,api:[1,2],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],w:parseInt(u[0])||0,h:parseInt(u[1])||0}}o.data_map[p]={slot_name:a||"",divid:c,floor:0}}var g=getBidderFloor(t,n);(!o.imps[p].bidfloor||g<o.imps[p].bidfloor)&&(o.imps[p].bidfloor=g,o.data_map[p].floor=g),"display"==s.demand_type&&o.imps[p].banner.format.push(parseSize(n)),o.request_cnt++}}))}return o}return{send:function(s){var o=s.bidder,a=properOps.bidder_info[o]||a,n=e,d=a.alias?"onscroll-d.openx.net":"propermedia-d.openx.net";t=t.replace("DEL_DOMAIN",d);var p=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".site_id")||"").split("-");r=(properDevice.isMobile()&&2==p.length?p[1]:p[0])||"";var l=formatRequest(s,o,a),c=ProperMedia.utils.objectValues(l.imps)||[],u=l.data_map||{},g=l.request_cnt,m=a.auctionId||ProperMedia.utils.generateUUID(),_={id:m,tmax:properOps.tmax,imp:c,at:1,site:{domain:properPage.domain,publisher:{domain:properPage.domain},page:properPage.url,ref:properPage.referrer},device:{h:screen.height,w:screen.width,dnt:ProperMedia.utils.getDNT()?1:0,language:navigator.language.split("-")[0],ua:navigator.userAgent},source:{tid:m},ext:{delDomain:d,bc:"hb_pb_ortb_1.0"}},h=userIds.getEidsArray();h&&h.length&&ProperMedia.utils.deepSetValue(_,"user.ext.eids",h);var b=Object.keys(ProperMedia.utils.deepAccess(s,"auction.uids")),v=schainCheck(o);""!=v&&ProperMedia.utils.deepSetValue(_,"source.ext.schain",v),ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&ProperMedia.utils.deepSetValue(_,"regs.coppa",ProperMedia.utils.deepAccess(properSpecialOps,"coppa")?1:0),ProperMedia.utils.deepSetValue(_,"user.ext.consent",gdprConsent.consentString),"boolean"==typeof gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(_,"regs.ext.gdpr",Number(gdprConsent.gdprApplies)),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(_,"regs.ext.us_privacy",uspConsent.usPrivacy),gppConsent&&(ProperMedia.utils.deepSetValue(_,"regs.ext.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(_,"regs.ext.gpp_sid",gppConsent.applicableSections)),ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".account_overrides.enabled")&&(n=ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".account_overrides.bidder_ids.endpoint_url")||e,ProperMedia.utils.deepSetValue(_,"ext.delDomain",n)),1==properOps.testing_mode.ids&&(_.test=1),properLog.mylog(n,o),s.incrementRequestsSent(g);var y=ProperMedia.utils.getTimestampMs(),P=ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".edge")||!1;$.ajax({url:n,requestType:"cors",method:"POST",bidder:o,edge:P,data:JSON.stringify(_),success:function(e){try{var t=ProperMedia.utils.getTimestampMs(),r=ProperMedia.utils.calcResponseMs(y,t);if((e=ProperMedia.utils.safeJsonParse(e))&&e.seatbid&&0!=e.seatbid.length&&e.seatbid[0].bid&&e.seatbid[0].bid.length)properLog.mylog(e,o),Object.keys(e.seatbid).forEach((function(d){Object.keys(e.seatbid[d].bid).forEach((function(p){var l=e.seatbid[d].bid[p],c=(l.id,l.impid||""),g=l.price||0,m=l.w||0,_=l.h||0,h=l.adm||"",v=l.dealid||"",y=l.crid||"",P=l.nurl||"",w=new adObj({bidder:o,size:m+"x"+_,price:parseFloat(g),gross:parseFloat(g),adcode:h,nurl:P,tag_id:c,dealid:v,crid:y,request_url:n,response:l,response_ms:r,received_ts:t,ttl:a.default_bid_ttl,floor:ProperMedia.utils.deepAccess(u,c+".floor")||0,target_slot:ProperMedia.utils.deepAccess(u,c+".slot_name")||"",uids:b});if("video"==a.demand_type){var M=adm;w.type="video",w.vast_tag=M;var I=ProperMedia.utils.parseVastVpaid(w.vast_tag);w.vast_type=I.vast_type,w.vpaid=I.vpaid,w.video_type=a.video_type}else w.adcode='<div id="'+(ProperMedia.utils.deepAccess(u,c+".divid")||"")+'">'+h+"</div>";s.logBidResponse(w)}))}));else{properLog.mylog("No "+o+" bids returned");var d=new adObj({bidder:o,price:0,gross:0,tag_id:"",request_url:n,response:e,response_ms:r,received_ts:t,ttl:0});s.logNoBidResponse(d)}s.incrementBidResponseCount(g)}catch(e){throw e.bidder=o,e}},error:function(e){try{s.incrementBidResponseCount(g);var t=ProperMedia.utils.getTimestampMs(),r=ProperMedia.utils.calcResponseMs(y,t),a={bidder:o,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:r};s.logBidResponseError(a)}catch(e){throw e.bidder=o,e}}})},onBidWon:function(e,t){return e.nurl&&((new Image).src=e.nurl),!0},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","160x600","300x50","300x250","300x600","320x50","728x90","970x250"],gvlid:69},getUserSyncs:function(){var e=[],r=t;gdprConsent&&(e.push(["gdpr",gdprConsent.gdprApplies?1:0]),e.push(["gdpr_consent="+encodeURIComponent(gdprConsent.consentString||"")])),uspConsent.usPrivacy&&e.push(["ccpa",encodeURIComponent(uspConsent.usPrivacy)]),e.length>0&&(r+="?"+e.map((function(e){e.join("=")})).join("&")),userSyncs.add({type:"iframe",url:r,bidder:"openx"})},formatRequest}}(),bidAdapters.pubmatic=function(){var e="https://hbopenbid.pubmatic.com/translator?source=prebid-client",t=109126;function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(e,t,r){var s={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,o){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(var n=0;n<e[a].length;n++){var d=e[a][n];if(1==d&&(d=ProperMedia.utils.makeid(10)),void 0===s.imps[d]){var p=d.split("-")[0],l=a.split("x");s.imps[d]={id:d.toString(),tagid:p.toString(),bidfloor:0,bidfloorcur:"USD",secure:1,ext:{}},"display"==r.demand_type?s.imps[d].banner={w:parseInt(l[0]),h:parseInt(l[1]),pos:0,format:[],topframe:1}:"native"==r.demand_type&&(s.imps[d].native=JSON.stringify({request:{ver:"1.2",context:1,plcmttype:1,privacy:1,assets:[{id:1,required:1,title:{len:80}},{id:2,required:1,img:{type:3,w:parseInt(l[0]),h:parseInt(l[1])}},{id:3,required:0,img:{type:1,w:50,h:50}},{id:4,required:1,data:{type:1}},{id:5,required:0,data:{type:2}},{id:6,required:1,data:{type:0}},{id:10,required:0,img:{type:0,w:50,h:50}},{id:11,required:0,data:{type:1}},{id:12,required:0,data:{type:2}},{id:21,required:0,data:{type:11}},{id:22,required:0,data:{type:12}}]}})),s.data_map[d]={slot_name:o||"",tag_id:d,floor:0}}"display"==r.demand_type&&s.imps[d].banner.format.push(parseSize(a));var c=getBidderFloor(t,a);(!s.imps[d].bidfloor||c<s.imps[d].bidfloor)&&(s.imps[d].bidfloor=c,s.data_map[d].floor=c),s.request_cnt++}}))}return s}return{send:function(r){var s=r.bidder,o=properOps.bidder_info[s]||o,a=formatRequest(r,s,o),n=ProperMedia.utils.objectValues(a.imps)||[],d=a.data_map||{},p=a.request_cnt;if(t=o.alias?159475:t,properUser.checkAdBlockDetected()&&properUser.adblock.acceptable_ads&&properUser.adblock.deliver_to_adblock?t=161355:ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".account_overrides.enabled")?t=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".account_overrides.bidder_ids.pubId")||t:ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".pub_id")&&(t=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".pub_id")),0==n.length)return!1;var l={id:""+(new Date).getTime(),at:1,cur:["USD"],imp:n,site:{page:properPage.bidder_page_url,domain:properPage.domain,ref:properPage.referrer,publisher:{id:t.toString()}},device:{ua:navigator.userAgent,js:1,h:parseInt(properPage.height),w:parseInt(properPage.width),dnt:0,language:navigator.language,geo:{}},user:{geo:{}},ext:{wrapper:{wp:"pbjs",wv:"prebid_prebid_"+properOps.prebid_version,transactionId:ProperMedia.utils.generateUUID()}},tmax:properOps.tmax};1==properOps.testing_mode.ids&&(l.test=1),l.device.language=l.device.language&&l.device.language.split("-")[0];var c=userIds.getEidsArray();c&&c.length&&ProperMedia.utils.deepSetValue(l,"user.eids",c);var u=Object.keys(ProperMedia.utils.deepAccess(r,"auction.uids")),g=schainCheck(s);""!=g&&ProperMedia.utils.deepSetValue(l,"source.ext.schain",g),ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&ProperMedia.utils.deepSetValue(l,"regs.coppa",1),ProperMedia.utils.deepSetValue(l,"user.ext.consent",gdprConsent.consentString||""),ProperMedia.utils.deepSetValue(l,"regs.ext.gdpr",gdprConsent.gdprApplies?1:0),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(l,"regs.ext.us_privacy",uspConsent.usPrivacy),gppConsent&&(ProperMedia.utils.deepSetValue(l,"regs.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(l,"regs.gpp_sid",gppConsent.applicableSections)),properLog.mylog(e,s),r.incrementRequestsSent(p);var m=ProperMedia.utils.getTimestampMs(),_=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".edge")||!1;$.ajax({method:"POST",url:e,requestType:"cors",bidder:s,edge:_,data:JSON.stringify(l),success:function(t){try{t=ProperMedia.utils.safeJsonParse(t);var a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(m,a);if(t&&t.seatbid&&t.seatbid.length>0&&t.seatbid[0].bid&&t.seatbid[0].bid.length>0)for(var l=0;l<t.seatbid.length;l++)if(t.seatbid[l].bid)for(var c=0;c<t.seatbid[l].bid.length;c++){var g=t.seatbid[l].bid[c],_=g.impid,h=g.price||0,b=g.w||0,v=g.h||0,y=g.cid||"",P=g.crid||"",w=g.adm||"",M=g.adomain||[],I=new adObj({bidder:s,size:b+"x"+v,price:parseFloat(h),gross:parseFloat(h),tag_id:_,cid:y,crid:P,adomain:M,request_url:e,response:g,response_ms:n,received_ts:a,ttl:o.default_bid_ttl,floor:ProperMedia.utils.deepAccess(d,_+".floor")||0,target_slot:ProperMedia.utils.deepAccess(d,_+".slot_name")||"",uids:u});if("native"==o.demand_type){I.type="native";var x=(w=JSON.parse(w.replace(/\\/g,""))).native;x.clickTrackers=ProperMedia.utils.deepAccess(x,"link.clicktrackers")||[],I.native=x}else I.adcode=w;r.logBidResponse(I)}else r.logNoBidResponse(new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:e,response:t.seatbid[l],response_ms:n,received_ts:a,ttl:0}));else r.logNoBidResponse(new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:e,response:t,response_ms:n,received_ts:a,ttl:0}));r.incrementBidResponseCount(p)}catch(e){throw e.bidder=s,e}},error:function(e){try{r.incrementBidResponseCount(p);var t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(m,t),a={bidder:s,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};r.logBidResponseError(a)}catch(e){throw e.bidder=s,e}}})},bidderInfo:{rev_share:.81,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,acceptable_ads:!0,auto_gen_granularity:"size",auto_gen_sizes:["1x1","2x2","120x600","160x600","300x50","300x100","300x1050","300x250","300x600","320x100","320x480","320x50","336x280","336x850","400x300","468x60","620x250","640x480","728x90","970x250","970x66","970x90","fluid"],gvlid:76},getUserSyncs:function(){var e="https://ads.pubmatic.com/AdServer/js/showad.js#PIX&kdntuid=1&p="+t;gdprConsent&&(e+="&gdpr="+(gdprConsent.gdprApplies?1:0),e+="&gdpr_consent="+encodeURIComponent(gdprConsent.consentString||"")),uspConsent.usPrivacy&&(e+="&us_privacy="+encodeURIComponent(uspConsent.usPrivacy)),gppConsent?.gppString&&gppConsent?.applicableSections?.length&&(e+="&gpp="+encodeURIComponent(gppConsent.gppString),e+="&gpp_sid="+encodeURIComponent(gppConsent?.applicableSections?.join(","))),userSyncs.add({type:"iframe",url:e,bidder:"pubmatic"})},formatRequest}}(),bidAdapters.risecodes=function(){let e={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:36e4,gvlid:1043};const t="hb-multi",r="hb-multi-test";function parseSize(e){return e.split("x").map((function(e){return parseInt(e)}))}function formatRequest(e,t,r){const s={imps:{},data_map:{},request_cnt:0};r.auctionId,schainCheck(t);if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,o){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(let d=0;d<e[a].length;d++){const p=e[a][d];if(void 0===s.imps[p]){let e="display"==r.demand_type?"banner":"video";s.imps[p]={adUnitCode:p,transactionId:ProperMedia.utils.generateUUID(),bidderRequestId:ProperMedia.utils.generateUUID(),mediaType:e,sizes:[],floorPrice:0,bidId:p,placementId:p,loop:1,coppa:parseInt(ProperMedia.utils.deepAccess(properSpecialOps,"coppa")||0)},s.data_map[p]={slot_name:o||"",tag_id:p,floor:0}}"video"==r.demand_type&&(s.imps[p].playbackmethod="outstream"==r.video_type?6:3,s.imps[p].placement="outstream"==r.video_type?3:1,s.imps[p].minduration=10,s.imps[p].maxduration=30,s.imps[p].linearity=1,s.imps[p].skip=1,s.imps[p].protocols=[2,3,5,6]),s.imps[p].sizes.push(parseSize(a));var n=getBidderFloor(t,a);(!s.imps[p].floorPrice||n<s.imps[p].floorPrice)&&(s.imps[p].floorPrice=n,s.data_map[p].floor=n),s.request_cnt++}}))}return s}function getDeviceType(e){return/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(e.toLowerCase())?"5":/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(e.toLowerCase())?"4":/smart[-_\s]?tv|hbbtv|appletv|googletv|hdmi|netcast|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b/i.test(e.toLowerCase())?"3":"1"}return{send:function(s){const o=s.bidder;e=properOps.bidder_info[o]||e;const a=ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".site_id")||"";if(!a)return properLog.mylog("Error: "+o+" Site ID is Required."),!1;e.auctionId=ProperMedia.utils.deepAccess(s,"auction.id");const n=formatRequest(s,o,e),d=ProperMedia.utils.objectValues(n.imps)||[],p=n.data_map||{},l=n.request_cnt,c=window.location.hostname,u={params:{wrapper_type:"prebidjs",wrapper_vendor:"pbjs",wrapper_version:properOps.prebid_version,adapter_version:"6.0.0",auction_start:(new Date).getTime(),publisher_id:a.toString(),publisher_name:c,site_domain:c,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,device_type:getDeviceType(navigator.userAgent),ua:navigator.userAgent,is_wrapper:!1,session_id:properSession.sessionData.uuid,tmax:properOps.tmax,referrer:properPage.referrer,page_url:properPage.url},bids:d};var g=userIds.getUIdsObj();g&&(u.params.userIds=JSON.stringify(g)),gdprConsent&&gdprConsent.gdprApplies&&(u.params.gdpr=gdprConsent.gdprApplies,u.params.gdpr_consent=gdprConsent.consentString||""),uspConsent.usPrivacy&&(u.params.us_privacy=uspConsent.usPrivacy||"");const m=schainCheck(o);""!=m&&(u.params.schain=ProperMedia.utils.formatSupplyChainString(m)),gdprEnforcement.userSyncEnforcement(o)&&(u.params.cs_method="iframe");var _="https://hb.yellowblue.io/"+(properOps.testing_mode.ids?r:t);properLog.mylog(_,o),s.incrementRequestsSent(l);const h=ProperMedia.utils.getTimestampMs();$.ajax({url:_,method:"POST",requestType:"cors",data:JSON.stringify(u),success:function(t){try{const r=ProperMedia.utils.getTimestampMs(),a=ProperMedia.utils.calcResponseMs(h,r);if((t=ProperMedia.utils.safeJsonParse(t))&&t.bids&&0!=t.bids.length){properLog.mylog(t,o);for(let n=0;n<t.bids.length;n++){const d=t.bids[n],l=d.cpm||0,c=d.width||0,u=d.height||0,g=d.requestId||"",m=d.requestId||"",h=d.nurl||"",b=1e3*(d.ttl||0)||e.default_bid_ttl,v=new adObj({bidder:o,size:c+"x"+u,price:parseFloat(l),gross:parseFloat(l),tag_id:g,crid:m,nurl:h,request_url:_,response:d,response_ms:a,received_ts:r,ttl:b,floor:ProperMedia.utils.deepAccess(p,d.requestId+".floor")||0,target_slot:ProperMedia.utils.deepAccess(p,d.requestId+".slot_name")||"",uids:Object.keys(ProperMedia.utils.deepAccess(s,"auction.uids"))}),y=ProperMedia.utils.deepAccess(d,"mediaType");if(y&&"video"===y.toLowerCase()){v.type="video",v.vast_tag=d.vastUrl||"";const e=ProperMedia.utils.parseVastVpaid(v.vast_tag);v.vast_type=e.vast_type,v.vpaid=e.vpaid,v.video_type=ProperMedia.utils.deepAccess(d,"meta.videoContext")}else y&&"banner"===y.toLowerCase()&&(v.adcode=d.ad);s.logBidResponse(v)}}else{properLog.mylog(o+": No bids returned");const e=new adObj({bidder:o,price:0,gross:0,tag_id:"",request_url:_,response:t,response_ms:a,received_ts:r,ttl:0});s.logNoBidResponse(e)}s.incrementBidResponseCount(l)}catch(e){throw e.bidder=o,e}},error:function(e){try{s.incrementBidResponseCount(l);const t=ProperMedia.utils.getTimestampMs(),r=ProperMedia.utils.calcResponseMs(h,t),a={bidder:o,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:r};s.logBidResponseError(a)}catch(e){throw e.bidder=o,e}}})},onBidWon:function(e,t){return e.nurl&&((new Image).src=e.nurl),!0},bidderInfo:e,formatRequest}}(),bidAdapters.rubicon=function(){var e=8777,t=15380,r={"468x60":1,"728x90":2,"120x90":5,"120x600":8,"160x600":9,"300x600":10,"200x200":13,"250x250":14,"300x250":15,"336x280":16,"300x100":19,"980x120":31,"250x360":32,"180x500":33,"980x150":35,"468x400":37,"930x180":38,"750x100":39,"750x200":40,"750x300":41,"320x50":43,"300x50":44,"300x300":48,"1024x768":53,"300x1050":54,"970x90":55,"970x250":57,"1000x90":58,"320x80":59,"320x150":60,"1000x1000":61,"580x500":64,"640x480":65,"930x600":66,"320x480":67,"1800x1000":68,"320x320":72,"320x160":73,"980x240":78,"980x300":79,"980x400":80,"480x300":83,"970x310":94,"970x210":96,"480x320":101,"768x1024":102,"480x280":103,"250x800":105,"320x240":108,"1000x300":113,"320x100":117,"800x250":125,"200x600":126,"980x600":144,"320x250":159,"250x600":179,"600x300":195,"640x360":198,"640x200":199,"1030x590":213,"980x360":214,"320x180":229,"580x400":232,"400x600":257};function formatRequest(s,o,a){var n={imps:{},data_map:{},request_cnt:0},d={},p=ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".site_id")||0;if(e=a.alias?t:e,ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".account_overrides.enabled")?e=ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".account_overrides.bidder_ids.accountId")||e:ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".pub_id")&&(e=ProperMedia.utils.deepAccess(properOps,"bidders.header."+o+".pub_id")),!p)return properLog.mylog("Error: Rubicon Site ID is Required."),n;var l=ProperMedia.utils.generateUUID();if(s.requests&&formatTagIds(s.requests,""),s.slot_requests)for(var c in s.slot_requests)formatTagIds(s.slot_requests[c],c);function formatTagIds(t,s){Object.keys(t).length>0&&Object.keys(t).forEach((function(a){for(var c=0;c<t[a].length;c++){var u=t[a][c];if(void 0===n.imps[u]){var g=u.split("-")[0];d[u]=[],n.imps[u]={account_id:parseInt(e),site_id:parseInt(p),zone_id:parseInt(g),size_id:void 0,alt_size_ids:"",rp_floor:getBidderFloor(o,a),rp_secure:1==properPage.use_ssl?"1":"0",tk_flint:"pbjs_lite_v3.2.0","x_source.tid":l,"x_imp.ext.tid":l,p_screen_res:properPage.width+"x"+properPage.height,kw:"",tk_user_key:"","p_geo.latitude":void 0,"p_geo.longitude":void 0,"tg_fl.eid":u,rf:properPage.bidder_page_url},n.data_map[u]={slot_name:s||"",tag_id:u,floor:0}}if(void 0!==r[a]){var m=getBidderFloor(o,a);(!n.imps[u].rp_floor||m<n.imps[u].rp_floor)&&(n.imps[u].rp_floor=m,n.data_map[u].floor=m),d[u].push(r[a]),d[u]=masSizeOrdering(d[u]),n.imps[u].size_id=d[u][0],n.imps[u].alt_size_ids=d[u].slice(1).join(","),n.request_cnt++}}}))}return n}function masSizeOrdering(e){var t=[15,2,9];return e.sort((function(e,r){var s=t.indexOf(e),o=t.indexOf(r);return s>-1||o>-1?-1===s?1:-1===o?-1:s-o:e-r}))}return Object.keys(r).forEach((function(e){r[r[e]]=e})),{send:function(e){var t=e.bidder,s=properOps.bidder_info[t]||s,o=formatRequest(e,t,s),a=ProperMedia.utils.objectValues(o.imps)||[],n=o.data_map||{},d=o.request_cnt;if(0==d)return!1;var p=function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,r,s){return Object.keys(r).forEach((function(o){void 0===t[o]&&(t[o]=new Array(e.length)),t[o].splice(s,1,r[o])})),t}),{}),r=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var s=t[e].join(";"),o=s.match(r);t[e]=o?o[1]:s})),t}(a);!gppConsentModule.isConsentDenied()&&gdprConsentModule.hasPurpose4Consent()&&(p.ppuid=properUser.pubcid);var l=userIds.getEidsArray();l&&l.length&&l.forEach((function(e){try{"adserver.org"===e.source?(p.tpid_tdid=e.uids[0].id,p["eid_adserver.org"]=e.uids[0].id):"liveintent.com"===e.source?(p["tpid_liveintent.com"]=e.uids[0].id,p["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(p["tg_v.LIseg"]=e.ext.segments.join(","))):"liveramp.com"===e.source?p.x_liverampidl=e.uids[0].id:"id5-sync.com"===e.source?p["eid_id5-sync.com"]=e.uids[0].id+"^"+e.uids[0].atype+"^"+(e.uids[0].ext&&e.uids[0].ext.linkType||""):p["eid_"+e.source]=e.uids[0].id+"^"+(e.uids[0].atype||"")}catch(t){properLog.mylog("Rubicon: error reading eid:"+e+". "+JSON.stringify(t))}}));var c=Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids"));ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&(p.coppa=1),"boolean"==typeof gdprConsent.gdprApplies&&(p.gdpr=Number(gdprConsent.gdprApplies)),p.gdpr_consent=gdprConsent.consentString,uspConsent.usPrivacy&&(p.us_privacy=encodeURIComponent(uspConsent.usPrivacy)),gppConsent.gppString&&(a.gpp=gppConsent.gppString,a.gpp_sid=gppConsent?.applicableSections?.toString());var u=schainCheck(t);""!=u&&(p.rp_schain=ProperMedia.utils.formatSupplyChainString(u)),p.slots=a.length,p.rand=Math.random(),function(e){var t=/^tg_v/,r=/^tg_i/,s=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","rf","dt.id","dt.keyv","dt.pref","p_geo.latitude","p_geo.longitude","kw"].concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return r.test(e)}))).concat(["tk_flint","x_source.tid","p_screen_res","rp_floor","rp_secure","tk_user_key"]);s.concat(Object.keys(e).filter((function(e){return-1===s.indexOf(e)})))}(p);var g="https://fastlane.rubiconproject.com/a/api/fastlane.json?"+ProperMedia.utils.formatQueryString(p,!0);properLog.mylog(g,t),e.incrementRequestsSent(d);var m=ProperMedia.utils.getTimestampMs(),_=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({url:g,requestType:"cors",bidder:t,edge:_,success:function(o){try{properLog.mylog(o,t);var p=ProperMedia.utils.safeJsonParse(o)||{};if(p&&"object"==typeof p){var l=ProperMedia.utils.getTimestampMs(),u=ProperMedia.utils.calcResponseMs(m,l),_=p.ads||[];if(Array.isArray(_)&&_.length>0)for(var h=0;h<_.length;h++){var b=_[h],v=a&&a[h]&&a[h]["tg_fl.eid"]?a[h]["tg_fl.eid"]:"";if("ok"===b.status){var y=b.cpm||0,P=b.status||"",w=b.script||"",M=b.type||"",I=b.size_id||"",x=b.dealid||"",S=b.adomain||[],C=(p.zoneId,b.creative_id||b.crid||(b.network||"")+"-"+(b.advertiser||"")),O=ProperMedia.utils.deepAccess(b,"ext.bidder.rp.advid")||"",A=r[I]||"unknown";"script"==M&&w&&(w="<script>"+w+"<\/script>");var k={};void 0!==b.advertiser&&(k.advertiser=b.advertiser),void 0!==b.seat&&(k.seat=b.seat),void 0!==b.creative_id&&(k.creative_id=b.creative_id),void 0!==b.campaign_id&&(k.campaign_id=b.campaign_id),void 0!==b.ad_id&&(k.ad_id=b.ad_id);var T=new adObj({bidder:t,size:A,price:parseFloat(y),gross:parseFloat(y),adcode:w,tag_id:v,adid:O,dealid:x,crid:C,adomain:S,request_url:g,response:b,response_ms:u,received_ts:l,ttl:s.default_bid_ttl,uids:c,floor:ProperMedia.utils.deepAccess(n,v+".floor")||0,target_slot:ProperMedia.utils.deepAccess(n,v+".slot_name")||""});"no-ads"!==P?e.logBidResponse(T):e.logNoBidResponse(T)}else void 0!==b.reason&&properLog.mylog("rubicon resposne status: "+b.reason)}else e.logNoBidResponse(new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:g,response:p,response_ms:u,received_ts:l,ttl:0}))}else e.logNoBidResponse(new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:g,response:p,response_ms:u,received_ts:l,ttl:0}));e.incrementBidResponseCount(d)}catch(e){throw e.bidder=t,e}},error:function(r){try{e.incrementBidResponseCount(d);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(m,s),a={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(a)}catch(r){throw r.bidder=t,r}}})},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,gvlid:52},getUserSyncs:function(){var e={};"boolean"==typeof gdprConsent.gdprApplies&&(e.gdpr=Number(gdprConsent.gdprApplies)),"string"==typeof gdprConsent.consentString&&(e.gdpr_consent=gdprConsent.consentString),uspConsent.usPrivacy&&(e.us_privacy=encodeURIComponent(uspConsent.usPrivacy)),gppConsent?.gppString&&(e.gpp=gppConsent.gppString,e.gpp_sid=gppConsent.applicableSections?.toString());const t=ProperMedia.utils.formatQueryString(e);userSyncs.add({type:"iframe",url:"https://eus.rubiconproject.com/usync.html?"+t,bidder:"rubicon"})},formatRequest}}(),bidAdapters.sharethrough=function(){var e={rev_share:1,demand_type:"display",bid_grouping:"slot",default_bid_ttl:36e4,gvlid:80},t="sharethrough",r="https://btlr.sharethrough.com/WYu2BXv1/v1";function formatRequest(e){var t={};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var r in e.slot_requests)formatTagIds(e.slot_requests[r],r);function formatTagIds(e,r){Object.keys(e).length>0&&Object.keys(e).forEach((function(s){for(var o=0;o<e[s].length;o++){var a=e[s][o];void 0===t[a]&&(t[a]={tag_id:a,pkey:a,size:s,slot_name:r})}}))}return t}function canAutoPlayHTML5Video(){var e=navigator.userAgent;if(!e)return!1;var t=/Android/i.test(e),r=/iPhone|iPad|iPod/i.test(e),s=parseInt((/Chrome\/([0-9]+)/.exec(e)||[0,0])[1]),o=parseInt((/CriOS\/([0-9]+)/.exec(e)||[0,0])[1]),a=parseInt((/Version\/([0-9]+)/.exec(e)||[0,0])[1]);return!!(t&&s>=53||r&&(a>=10||o>=53)||!t&&!r)}return{formatRequest,send:function(s){var o=formatRequest(s);Object.keys(o).forEach((function(a){!function(o){var a=o.pkey,n=o.size,d=1,p=getBidderFloor(t,n),l={placement_key:a,bidId:a,bidfloor:p,consent_required:!1,instant_play_capable:canAutoPlayHTML5Video(),hbSource:"prebid",hbVersion:"3.0.0",strVersion:"3.2.0"},{universalIds:c,uids:u}=function(){var e={},t=[],r=userIdAdapters.liveRampATS.getValue();r&&(e.idluid=r,t.push("idl_env"));var s=userIdAdapters.pubCommonId.getValue();s&&(e.shduid=s);var o=userIdAdapters.id5Id.getValue();if(o){e.id5uid={id:o};var a=ProperMedia.utils.deepAccess(userIdAdapters.liveRampATS,"idObj.id5id.ext.linkType");a&&(e.id5uid.linkType=a),t.push("id5id")}!gppConsentModule.isConsentDenied()&&gdprConsentModule.hasPurpose4Consent()&&(e.pubcid=properUser.pubcid,t.push("pubcid"));return{universalIds:e,uids:t}}();ProperMedia.utils.mergeObject(l,c),gdprConsent.consentString&&(l.consent_string=gdprConsent.consentString);l.consent_required=!!gdprConsent.gdprApplies,uspConsent.usPrivacy&&(l.us_privacy=uspConsent.usPrivacy);properOps.schain&&(l.schain=JSON.stringify(properOps.schain));var g=ProperMedia.utils.formatQueryString(l,!0),m=r+"?"+g;properLog.mylog(m,t),s.incrementRequestsSent(d);var _=ProperMedia.utils.getTimestampMs(),h=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({url:m,method:"GET",requestType:"cors",bidder:t,edge:h,success:function(r){try{properLog.mylog(r,t);var l=ProperMedia.utils.getTimestampMs(),c=ProperMedia.utils.calcResponseMs(_,l),g=ProperMedia.utils.safeJsonParse(r);if(g&&g.creatives.length>0){var h=g.creatives[0],b=g.bidId||"",v=h.cpm||0,y="str_response_"+b,P=ProperMedia.utils.b64EncodeUnicode(JSON.stringify(g)),w='<div data-str-native-key="'+a+'" data-stx-response-name="'+y+'"></div>';w+="<script>var "+y+' = "'+P+'"<\/script>',w+='<script src="//native.sharethrough.com/assets/sfp.js"><\/script>';let r=new adObj({bidder:t,size:n,price:parseFloat(v),gross:parseFloat(v),adcode:w,tag_id:o.tag_id,request_url:m,response:g,response_ms:c,received_ts:l,ttl:e.default_bid_ttl,floor:p,target_slot:o.slot_name||"",uids:u});s.logBidResponse(r)}else{let e=new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:m,response:g,response_ms:c,received_ts:l,ttl:0});s.logNoBidResponse(e)}!function(e){if(e&&e.cookieSyncUrls){var r=e.cookieSyncUrls.map((function(e){return{type:"image",url:e,bidder:t}}));userSyncs.add(r)}}(g),s.incrementBidResponseCount(d)}catch(e){throw e.bidder=t,e}},error:function(e){try{s.incrementBidResponseCount(d);var r=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(_,r),a={bidder:t,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};s.logBidResponseError(a)}catch(e){throw e.bidder=t,e}}})}(o[a])}))},bidderInfo:e}}(),bidAdapters.sonobi=function(){var e={};function formatRequest(e,t){var r={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var s in e.slot_requests)formatTagIds(e.slot_requests[s],s);function formatTagIds(e,s){Object.keys(e).length>0&&Object.keys(e).forEach((function(o){for(var a=0;a<e[o].length;a++){var n=e[o][a];if(void 0===r.imps[n]){var d=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id")||"").split("-"),p=(properDevice.isMobile()&&2==d.length?d[1]:d[0])||n;r.imps[n]={bidId:p,floor:0,sizes:[]},r.data_map[n]={slot_name:s||"",tag_id:n,floor:0}}var l=getBidderFloor(t,o);(!r.imps[n].floor||l<r.imps[n].floor)&&(r.imps[n].floor=l,r.data_map[n]=l),r.imps[n].sizes.push(o),r.request_cnt++}}))}return r}function loadOrCreateFirstPartyData(){var t,r="_iiq_fdata",s=ProperMedia.utils.safeJsonParse((t=r,properStorage.hasLocalStorage(e)?window.localStorage.getItem(t):null));s&&s.pcid?s&&!s.pcidDate&&(s.pcidDate=Date.now()):s={pcid:ProperMedia.utils.generateUUID(),pcidDate:Date.now()};return function(t,r){try{properStorage.hasLocalStorage(e)&&window.localStorage.setItem(t,r)}catch(e){return null}}(r,JSON.stringify(s)),s}return{formatRequest,send:function(t){var r=t.bidder,s=properOps.bidder_info[r]||s;e={gvlid:s.gvlid,bidderCode:r};var o=formatRequest(t,r),a=o.data_map||{},n=o.request_cnt;if(0==n)return!1;var d={key_maker:"",ref:properPage.bidder_page_url,s:ProperMedia.utils.generateUUID(),pv:ProperMedia.utils.generateUUID(),vp:properDevice.device_type,lib_name:"prebid",lib_v:properOps.prebid_version,us:1,ius:1,iqid:JSON.stringify(loadOrCreateFirstPartyData())},p=userIds.getEidsArray();p&&p.length&&(d.eids=JSON.stringify(p));var l=Object.keys(ProperMedia.utils.deepAccess(t,"auction.uids")),c={};Object.keys(o.imps).forEach((function(e){var t=o.imps[e],r=t.bidId,a=t.floor,n="display"==s.demand_type?t.sizes.join(","):"";c[e]=r+"|"+n+"|"+a})),d.key_maker=JSON.stringify(c);var u=schainCheck(r);""!=u&&(d.schain=JSON.stringify(u)),ProperMedia.utils.deepSetValue(d,"coppa",ProperMedia.utils.deepAccess(properSpecialOps,"coppa")?1:0),gdprConsent&&"boolean"==typeof gdprConsent.gdprApplies&&(d.gdpr=gdprConsent.gdprApplies.toString(),gdprConsent.consentString&&(d.consent_string=gdprConsent.consentString)),uspConsent.usPrivacy&&(d.us_privacy=uspConsent.usPrivacy);var g="https://apex.go.sonobi.com/trinity.json?"+ProperMedia.utils.formatQueryString(d,!0);properLog.mylog(g,r),t.incrementRequestsSent(n);var m=ProperMedia.utils.getTimestampMs(),_=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:g,method:"GET",requestType:"cors",bidder:r,edge:_,success:function(e){try{properLog.mylog(e,r);var d=ProperMedia.utils.getTimestampMs(),p=ProperMedia.utils.calcResponseMs(m,d);if((e=ProperMedia.utils.safeJsonParse(e)||{})&&e.slots&&Object.keys(e.slots).length>0){var c=e.sbi_dc||"";Object.keys(e.slots).forEach((function(n){var u=e.slots[n];if(Object.keys(u).length>0){u.sbi_dozer;var m=u.sbi_aid||"",_=(u.sbi_ct,u.sbi_crid||u.sbi_aid||""),h=n,b=u.sbi_mouse,v=u.sbi_size;if("video"==s.demand_type)v=o.imps[n].sizes[0];var y=[];u.sbi_adomain&&(y=[u.sbi_adomain]);var P=new adObj({bidder:r,size:v,price:parseFloat(b),gross:parseFloat(b),tag_id:h,crid:_,adid:m,adomain:y,request_url:g,response:u,response_ms:p,received_ts:d,ttl:s.default_bid_ttl,floor:ProperMedia.utils.deepAccess(a,h+".floor")||0,target_slot:ProperMedia.utils.deepAccess(a,h+".slot_name")||"",uids:l});if("video"==s.demand_type){P.type="video",P.vast_tag="https://"+c+"apex.go.sonobi.com/vast.xml?vid="+m+"&ref="+encodeURIComponent(properPage.bidder_page_url);var w=ProperMedia.utils.parseVastVpaid(P.vast_tag);P.vast_type=w.vast_type,P.vpaid=w.vpaid,P.video_type=s.video_type}else P.adcode='<script type="text/javascript" src="https://'+c+"apex.go.sonobi.com/sbi.js?aid="+m+"&as=null&ref="+encodeURIComponent(properPage.bidder_page_url)+'"><\/script>';t.logBidResponse(P)}else t.logNoBidResponse(new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:g,response:u,response_ms:p,received_ts:d,ttl:0}))})),function(e,t){if(e&&e.sbi_px){var r=e.sbi_px.map((function(e){return{type:e.type,url:e.url,bidder:t}}));userSyncs.add(r)}}(e,r)}else{var u=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:g,response:e,response_ms:p,received_ts:d,ttl:0});t.logNoBidResponse(u)}t.incrementBidResponseCount(n)}catch(e){throw e.bidder=r,e}},error:function(e){try{t.incrementBidResponseCount(n);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(m,s),a={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};t.logBidResponseError(a)}catch(e){throw e.bidder=r,e}}})},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:12e4,gvlid:104}}}(),bidAdapters.sovrn=function(){var e="sovrn",t="https://ap.lijit.com/rtb/bid?src=prebid_prebid_"+properOps.prebid_version;function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(e,t,r){var s={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,r){Object.keys(e).length>0&&Object.keys(e).forEach((function(o){o.split("x");for(var a=0;a<e[o].length;a++){var n=e[o][a];if(void 0===s.imps[n]){s.imps[n]={id:n.toString(),banner:{format:[],w:1,h:1},tagid:n,bidfloor:0};var d=addDeals();d.length&&(s.imps[n].ext=s.imps[n].ext||{},s.imps[n].ext.deals=d),s.data_map[n]={slot_name:r||"",tag_id:n,floor:0}}var p=getBidderFloor(t,o);(!s.imps[n].bidfloor||p<s.imps[n].bidfloor)&&(s.imps[n].bidfloor=p,s.data_map[n].floor=p),s.imps[n].banner.format.push(parseSize(o)),s.request_cnt++}}))}return s}function addDeals(){var e=[],t=ProperMedia.utils.deepAccess(properSpecialOps,"carbon_deal_id")||"";t&&(ProperMedia.utils.isStr(t)&&(t=t.split(",")),e.concat(t.map((e=>e.trim()))));var r=ProperMedia.utils.deepAccess(properSpecialOps,"signal_deal_id")||"";return r&&(ProperMedia.utils.isStr(r)&&(r=r.split(",")),e.concat(r.map((e=>e.trim())))),e}function addUserSyncs(t){try{if(t&&t.ext&&t.ext.iid){var r={};gdprConsent&&gdprConsent.gdprApplies&&"string"==typeof gdprConsent.consentString&&(r.gdpr_consent=gdprConsent.consentString),uspConsent.usPrivacy&&(r.us_privacy=uspConsent.usPrivacy),gppConsent?.gppString&&(r.gpp=gppConsent.gppString,r.gpp_sid=gppConsent.applicableSections?.toString());const s=ProperMedia.utils.formatQueryString(r);userSyncs.add({type:"iframe",url:"//ap.lijit.com/beacon?informer="+t.ext.iid+s,bidder:e})}}catch(t){throw t.bidder=e,t}}return{send:function(e){var r=e.bidder,s=properOps.bidder_info[r]||s,o=formatRequest(e,r),a=ProperMedia.utils.objectValues(o.imps)||[],n=o.data_map||{},d=o.request_cnt;if(0==a.length)return!1;var p,l={id:ProperMedia.utils.generateUUID(),imp:a,site:{domain:properPage.domain,page:properPage.bidder_page_url},tmax:properOps.tmax},c=userIds.getEidsArray();c&&c.length&&(c.forEach((function(e){e.uids&&e.uids[0]&&"criteo.com"===e.source&&(p=e.uids[0].id)})),ProperMedia.utils.deepSetValue(l,"user.ext.eids",c),p&&ProperMedia.utils.deepSetValue(l,"user.ext.prebid_criteoid",p));var u=Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids"));ProperMedia.utils.deepSetValue(l,"source.tid",ProperMedia.utils.deepAccess(e,"auction.id"));var g=schainCheck(r);""!=g&&ProperMedia.utils.deepSetValue(l,"source.ext.schain",g),ProperMedia.utils.deepSetValue(l,"regs.ext.gdpr",Number(gdprConsent.gdprApplies)),ProperMedia.utils.deepSetValue(l,"user.ext.consent",gdprConsent.consentString),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(l,"regs.ext.us_privacy",uspConsent.usPrivacy),gppConsent&&(ProperMedia.utils.deepSetValue(l,"regs.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(l,"regs.gpp_sid",gppConsent.applicableSections)),properLog.mylog(t,r),e.incrementRequestsSent(d);var m=ProperMedia.utils.getTimestampMs(),_=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:t,method:"POST",requestType:"cors",bidder:r,edge:_,data:JSON.stringify(l),success:function(o){try{properLog.mylog(o,r);var a=ProperMedia.utils.getTimestampMs(),p=ProperMedia.utils.calcResponseMs(m,a);if((o=ProperMedia.utils.safeJsonParse(o)||{})&&o.seatbid&&0!=o.seatbid.length&&o.seatbid[0].bid&&o.seatbid[0].bid.length){var l=o.seatbid[0].bid;Object.keys(l).forEach((function(o){var d=l[o],c=d.impid||"",g=d.w+"x"+d.h,m=d.cid||"",_=d.crid||"",h=d.dealid||"",b=d.adomain||[],v=d.price||0,y=d.adm||"",P=d.nurl||"",w=1e3*ProperMedia.utils.deepAccess(d,"ext.ttl")||s.default_bid_ttl,M={},I=ProperMedia.utils.getUrlParameters(P);void 0!==I.seatid&&(M.seatid=I.seatid),void 0!==I.campaignid&&(M.campaignid=I.campaignid),void 0!==I.bannerid&&(M.bannerid=I.bannerid),void 0!==I.cb&&(M.cb=I.cb),void 0!==I.rpid&&(M.rpid=I.rpid),y&&(y=decodeURIComponent(y),P&&(y+=ProperMedia.utils.createTrackPixel(P),P=""));var x=new adObj({bidder:r,size:g,price:parseFloat(v),gross:parseFloat(v),adcode:y,nurl:P,tag_id:c,cid:m,crid:_,dealid:h,adomain:b,request_url:t,response:d,response_ms:p,received_ts:a,ttl:w,floor:ProperMedia.utils.deepAccess(n,c+".floor")||0,target_slot:ProperMedia.utils.deepAccess(n,c+".slot_name")||"",uids:u});e.logBidResponse(x)}))}else{properLog.mylog("no sovrn bids found");var c=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:t,response:o,response_ms:p,received_ts:a,ttl:0});e.logNoBidResponse(c)}addUserSyncs(o),e.incrementBidResponseCount(d)}catch(e){throw e.bidder=r,e}},error:function(t){try{e.incrementBidResponseCount(d);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(m,s),a={bidder:r,status:t.status,statusText:t.statusText,timeout:t.timeout,response_ms:o};e.logBidResponseError(a)}catch(t){throw t.bidder=r,t}}})},onBidWon:function(e,t){return e.nurl&&((new Image).src=e.nurl),!0},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:9e4,gvlid:13},formatRequest}}(),bidAdapters.taboola=function(){var e,t="https://display.bidder.taboola.com/OpenRTB/TaboolaHB/auction",r="user-id",s=`taboola global:${r}`,o={};function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(e,t,r){var s={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(o,a){Object.keys(o).length>0&&Object.keys(o).forEach((function(n){for(var d=0;d<o[n].length;d++){var p=o[n][d];if(void 0===s.imps[p]){n.split("x");s.imps[p]={id:p,tagid:p+(a?"":"-"+ProperMedia.utils.deepAccess(e,"auction.auction_num")),bidfloor:0,bidfloorcur:"USD"},s.imps[p].banner={format:[],pos:0},s.data_map[p]={slot_name:a||"",tag_id:p,floor:0}}var l=getBidderFloor(t,n);(!s.imps[p].bidfloor||l<s.imps[p].bidfloor)&&(s.imps[p].bidfloor=l,s.data_map[p].floor=l),"display"==r.demand_type&&s.imps[p].banner.format.push(parseSize(n)),s.request_cnt++}}))}return s}const a={getUserId:()=>{const{getFromLocalStorage:e,getFromCookie:t,getFromTRC:r}=a;try{return e()||t()||r()}catch(e){return 0}},getFromCookie(){if(properStorage.cookiesAreEnabled(o)){const e=properStorage.getCookie("trc_cookie_storage",o),t=a.getCookieDataByKey(e,r);if(t)return t}},getCookieDataByKey(e,t){const[,r=""]=e.split(`${t}=`);return r},getFromLocalStorage(){if(properStorage.hasLocalStorage(o)&&properStorage.localStorageIsEnabled(o))return properStorage.getDataFromLocalStorage(s,o)},getFromTRC:()=>window.TRC?window.TRC.user_id:0};return{send:function(r){var s=r.bidder,o=properOps.bidder_info[s]||o;e=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".site_id")||tag_id;var n=formatRequest(r,s,o),d=ProperMedia.utils.objectValues(n.imps)||[],p=n.data_map||{},l=n.request_cnt,c=[t,e].join("/");const u={id:e,name:e,domain:properPage.domain,page:properPage.url,ref:properPage.referrer,publisher:{id:e},content:{language:navigator.language}},g={ua:navigator.userAgent},m={buyeruid:a.getUserId(gdprConsent,uspConsent),ext:{}},_={coppa:0,ext:{}};gdprConsent.gdprApplies&&(ProperMedia.utils.deepSetValue(m,"ext.consent",gdprConsent.consentString),ProperMedia.utils.deepSetValue(_,"ext.gdpr",Number(gdprConsent.gdprApplies))),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(_,"ext.us_privacy",uspConsent.usPrivacy),gppConsent&&(ProperMedia.utils.deepSetValue(_,"ext.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(_,"ext.gpp_sid",gppConsent.applicableSections)),ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&(_.coppa=1);const h={id:ProperMedia.utils.deepAccess(r,"auction.id"),imp:d,site:u,device:g,source:{fd:1},tmax:properOps.tmax,bcat:[],badv:[],wlang:[],user:m,regs:_,ext:{pageType:ProperMedia.utils.deepAccess(properPage,"page_meta.page_type")||void 0}};properLog.mylog(c,s),r.incrementRequestsSent(l);var b=ProperMedia.utils.getTimestampMs(),v=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".edge")||!1;$.ajax({url:c,method:"POST",requestType:"cors",bidder:s,edge:v,withCredentials:!1,data:JSON.stringify(h),success:function(e){try{e=ProperMedia.utils.safeJsonParse(e);var t=ProperMedia.utils.getTimestampMs(),a=ProperMedia.utils.calcResponseMs(b,t);if(e&&e.seatbid&&e.seatbid.length>0&&e.seatbid[0].bid&&e.seatbid[0].bid.length>0)properLog.mylog(e,s),Object.keys(e.seatbid).forEach((function(n){var d=e.seatbid[n].bid[0],l=d.impid||"",u=d.price||0,g=d.w||1,m=d.h||1,_=(d.adm||"").replace(/\$\{AUCTION_PRICE\}/g,u),h=d.crid||"",b=d.nurl||"",v=1e3*d.exp||o.default_bid_ttl,y=new adObj({bidder:s,adcode:_,size:g+"x"+m,price:parseFloat(u),gross:parseFloat(u),tag_id:ProperMedia.utils.deepAccess(p,l+".tag_id")||l,crid:h,nurl:b,request_url:c,response:d,response_ms:a,received_ts:t,ttl:v,floor:ProperMedia.utils.deepAccess(p,l+".floor")||0,target_slot:ProperMedia.utils.deepAccess(p,l+".slot_name")||""});r.logBidResponse(y)}));else{var n=new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:c,response:e,response_ms:a,received_ts:t,ttl:0});r.logNoBidResponse(n)}r.incrementBidResponseCount(l)}catch(e){throw e.bidder=s,e}},error:function(e){try{r.incrementBidResponseCount(l);var t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(b,t),a={bidder:s,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};r.logBidResponseError(a)}catch(e){throw e.bidder=s,e}}})},onBidWon:function(e,t){return e.nurl&&((new Image).src=e.nurl.replace(/\$\{AUCTION_PRICE\}/g,e.price)),!0},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,auto_gen_tag_ids:!1,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","120x600","160x600","300x50","300x100","300x250","300x600","320x100","320x50","336x280","400x300","728x90","970x250","970x90"],gvlid:42},getUserSyncs:function(){const e=[];gdprConsent.gdprApplies&&e.push(`gdpr=${Number(gdprConsent.gdprApplies&&1)}&gdpr_consent=${encodeURIComponent(gdprConsent.consentString||"")}`),uspConsent.usPrivacy&&e.push("us_privacy="+encodeURIComponent(uspConsent.usPrivacy)),gppConsent&&e.push("gpp="+encodeURIComponent(gppConsent.gppString)),userSyncs.add({type:"image",url:"https://trc.taboola.com/sg/prebidJS/1/cm"+(e.length?"?"+e.join("&"):""),bidder:"taboola"})},formatRequest}}(),bidAdapters.teads=function(){var e="https://a.teads.tv/hb/bid-request",t={GDPR_APPLIES_PUBLISHER:12,GDPR_APPLIES_GLOBAL:11,GDPR_DOESNT_APPLY:0,CMP_NOT_FOUND_OR_ERROR:22};function formatRequest(e,t,r){var s={data:{},data_map:{},request_cnt:0},o=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id")||0;if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var a in e.slot_requests)formatTagIds(e.slot_requests[a],a);function formatTagIds(e,t){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(var n=0;n<e[a].length;n++){var d,p,l=e[a][n],c=l.split("-");if(o?(p=o,d=c[0]):(p=c[0],d=c[1]),!p)return properLog.mylog("Error: Teads Page ID is Required."),s;if(!d)return properLog.mylog("Error: Teads Placement ID is Required."),s;if(void 0===s.data[l]){var u="teads-"+ProperMedia.utils.generateUUID();s.data[l]={bidId:l,placementId:parseInt(d),pageId:parseInt(p),adUnitCode:u,bidderRequestId:ProperMedia.utils.generateUUID(),transactionId:ProperMedia.utils.generateUUID(),sizes:[]},s.data_map[l]={sizes:[],tag_id:l,slot_name:t||""}}var g=r.native_sizes[a]||a;s.data[l].sizes.push(g),s.data_map[l].sizes.push(a),s.request_cnt++}}))}return s}function findGdprStatus(e,r,s){var o=t.GDPR_APPLIES_PUBLISHER;return e?function(e,t){return e&&1===t?e.hasGlobalScope||e.hasGlobalConsent:!(!e||2!==t)&&!e.isServiceSpecific}(r,s)&&(o=t.GDPR_APPLIES_GLOBAL):o=t.GDPR_DOESNT_APPLY,o}return{send:function(r){var s=r.bidder,o=properOps.bidder_info[s]||o,a=formatRequest(r,s,o),n=ProperMedia.utils.objectValues(a.data)||[],d=a.request_cnt;const p=Object.values(o.native_sizes);n.sort(((e,t)=>{const r=e.sizes.some((e=>p.includes(e)))?1:0;return(t.sizes.some((e=>p.includes(e)))?1:0)-r}));var{sharedViewerIdObject:l,uids:c}=function(){var e={unifiedId2:"uid2.id",liveRampId:"idl_env",id5Id:"id5id.uid",yahooConnectId:"connectid",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid"},t=userIds.getUIdsObj(),r=[],s={};for(var o in e){var a=e[o],n=ProperMedia.utils.deepAccess(t,a);n&&(s[o]=n,r.push(a.split(".")[0]))}return{sharedViewerIdObject:s,uids:r}}(),u={referrer:properPage.bidder_page_url,deviceWidth:properPage.width,hb_version:properOps.prebid_version,...l},g=schainCheck(s);if(""!=g&&(u.schain=g),gdprConsent){var m="boolean"==typeof gdprConsent.gdprApplies,_="string"==typeof gdprConsent.consentString,h=m?findGdprStatus(gdprConsent.gdprApplies,gdprConsent.vendorData,gdprConsent.apiVersion):t.CMP_NOT_FOUND_OR_ERROR;u.gdpr_iab={consent:_?gdprConsent.consentString:"",status:h,apiVersion:gdprConsent.apiVersion}}uspConsent.usPrivacy&&(u.us_privacy=uspConsent.usPrivacy),properLog.mylog(e,s),r.incrementRequestsSent(d);var b=ProperMedia.utils.getTimestampMs(),v=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".edge")||!1;const y=n.reduce(((e,t,r)=>(r%10?e[e.length-1].push(t):e.push([t]),e)),[]);for(const t of y)u.data=t,$.ajax({url:e,method:"POST",requestType:"cors",bidder:s,edge:v,data:JSON.stringify(u),success:function(t){try{t=ProperMedia.utils.safeJsonParse(t);var o=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(b,o);if(t&&t.responses&&t.responses.length>0){properLog.mylog(t,s);for(var p=0;p<t.responses.length;p++){var l=t.responses[p],u=l.bidId||"",g=l.width||1,m=l.height||1,_=l.cpm||0,h=l.ad||"",v=l.creativeId||"",y=1e3*(l.ttl||120),P="1x1";-1!==a.data_map[u].sizes.indexOf(g+"x"+m)&&(P=g+"x"+m),"1x1"==P&&(P=a.data_map[u].sizes.pop()||P);h=(1==properOps.dfp_per_slot&&0==properPage.isolated?`<script>\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tconst slot_div = window.top.document.getElementById('{PROPER_SLOT_DIV_ID}-iframe')\n\t\t\t\t\t\t\t\t\t\t\t.contentWindow\n\t\t\t\t\t\t\t\t\t\t\t.document\n\t\t\t\t\t\t\t\t\t\t\t.getElementById('{PROPER_SLOT_DIV_ID}');\n\t\t\t\t\t\t\t\t\t\t\tconst grandParent = document.createElement('div');\n\t\t\t\t\t\t\t\t\t\t\tconst parent = document.createElement('div');\n\t\t\t\t\t\t\t\t\t\t\tconst child = document.createElement('div');\n\n\t\t\t\t\t\t\t\t\t\t\tchild.setAttribute('id', '${a.data[u].adUnitCode}');\n\t\t\t\t\t\t\t\t\t\t\tparent.appendChild(child);\n\t\t\t\t\t\t\t\t\t\t\tgrandParent.appendChild(parent);\n\t\t\t\t\t\t\t\t\t\t\tslot_div.appendChild(grandParent);\n\t\t\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<\/script>`:`<script>\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tconst slot_div = window.top.document.getElementById("{PROPER_SLOT_DIV_ID}");\n\t\t\t\t\t\t\t\t\t\t\tconst grandParent = document.createElement('div');\n\t\t\t\t\t\t\t\t\t\t\tconst parent = document.createElement('div');\n\t\t\t\t\t\t\t\t\t\t\tconst child = document.createElement('div');\n\n\t\t\t\t\t\t\t\t\t\t\tchild.setAttribute('id', '${a.data[u].adUnitCode}');\n\t\t\t\t\t\t\t\t\t\t\tparent.appendChild(child);\n\t\t\t\t\t\t\t\t\t\t\tgrandParent.appendChild(parent);\n\t\t\t\t\t\t\t\t\t\t\tslot_div.appendChild(grandParent);\n\t\t\t\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<\/script>`)+h,r.logBidResponse(new adObj({bidder:s,size:P,price:parseFloat(_),gross:parseFloat(_),adcode:h,tag_id:u,crid:v,request_url:e,response:l,response_ms:n,received_ts:o,ttl:y,target_slot:ProperMedia.utils.deepAccess(a,"data_map."+u+".slot_name")||"",uids:c}))}}else properLog.mylog("no teads bids returned"),r.logNoBidResponse(new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:e,response:t,response_ms:n,received_ts:o,ttl:0}));r.incrementBidResponseCount(d)}catch(e){throw e.bidder=s,e}},error:function(e){try{r.incrementBidResponseCount(d);var t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(b,t),a={bidder:s,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};r.logBidResponseError(a)}catch(e){throw e.bidder=s,e}}})},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",div_insertion:1,gvlid:132,native_sizes:{native_horizontal:"300x250",native_vertical:"300x250"}},getUserSyncs:function(){var e="";if(gdprConsent){var t={status:findGdprStatus(gdprConsent.gdprApplies,gdprConsent.vendorData),consent:gdprConsent.consentString};e="?gdprIab="+encodeURIComponent(JSON.stringify(t))}userSyncs.add({type:"iframe",url:"https://sync.teads.tv/iframe"+e,bidder:"teads"})},formatRequest}}(),bidAdapters.thirtythreeacross=function(){var e="thirtythreeacross",t="https://ssc.33across.com/api/v1/hb",r="https://de.tynt.com/deb/v2?m=xch&rt=html",s={sticky_horizontal:"1x1"};function parseSize(t){var r=(t=s[t]||t).split("x");return{w:parseInt(r[0]),h:parseInt(r[1]),ext:{ttx:{bidfloors:[getBidderFloor(e,t)]}}}}function formatRequest(e,t,r){var s={imps:{},data_map:{}};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,o){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(var n=0;n<e[a].length;n++){var d=e[a][n];if(void 0===s.imps[d]){if(s.imps[d]={},"display"==r.demand_type)s.imps[d].banner={format:[]},s.imps[d].product="siab";else if("video"==r.demand_type){var p=a.split("x");s.imps[d].video={skip:1,skipafter:5,linearity:"outstream"==r.video_type?2:1,startdelay:0,minduration:15,maxduration:30,placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3],api:[1,2],mimes:["video/mp4","application/javascript"],protocols:[2,3,5,6],w:parseInt(p[0])||0,h:parseInt(p[1])||0,ext:{ttx:{bidfloors:[getBidderFloor(t,a)]}}},s.imps[d].product=r.video_type}s.data_map[d]={slot_name:o||"",tag_id:d}}"display"==r.demand_type&&(s.imps[d].banner.format.push(parseSize(a)),"sticky_horizontal"==a&&(s.imps[d].product="inview",s.imps[d].special_size=a))}}))}return s}function _buildDeviceORTB(){const e=window.top.self;return{ext:{ttx:{...getScreenDimensions(),pxr:e.devicePixelRatio,vp:getViewportDimensions(),ah:e.screen.availHeight,mtp:e.navigator.maxTouchPoints}}}}function getViewportDimensions(){const e=function(){let e=window.top.self;try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement;return{w:e.clientWidth,h:e.clientHeight}}function getScreenDimensions(){const{innerWidth:e,innerHeight:t,screen:r}=window.top.self,[s,o]=[Math.max(r.width,r.height),Math.min(r.width,r.height)];return t>e?{w:o,h:s}:{w:s,h:o}}function addUserSyncs(t,s){var o=[{type:"iframe",url:r+"&id="+t.site.id+"&gdpr_consent="+encodeURIComponent(gdprConsent.consentString)+"&us_privacy="+encodeURIComponent(uspConsent.usPrivacy),bidder:e}];"boolean"==typeof gdprApplies&&(o[0].url+="&gdpr="+Number(gdprConsent.gdprApplies)),userSyncs.add(o)}return{formatRequest,send:function(e){var r=e.bidder,s=properOps.bidder_info[r]||s,o=formatRequest(e,r,s),a=o.imps||{},n=o.data_map||{};Object.keys(a).forEach((function(o){!function(o,a){var d="display"==s.demand_type?o.banner.format.length:1,p=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".site_id")||a.toString().replace(/-\d{1,2}$/,""),l=o.product,c="inview"==l?100:"nm",u={id:ProperMedia.utils.generateUUID(),site:{id:p,page:properPage.url,ref:properPage.referrer},device:_buildDeviceORTB(),imp:[],ext:{ttx:{caller:[{name:"proper.io",version:"1.0"}]}},user:{ext:{eids:userIds.getEidsArray()||""}}},g=Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids"));"display"==s.demand_type?u.imp.push({banner:o.banner}):"video"==s.demand_type&&u.imp.push({video:o.video});u.imp[0]&&(u.imp[0].ext={ttx:{prod:l,viewability:{amount:isNaN(c)?c:Math.round(c)}}});var m=schainCheck(r);""!=m&&ProperMedia.utils.deepSetValue(u,"source.ext.schain",m);u.regs={ext:{gdpr:!0===gdprConsent.gdprApplies?1:0}},gdprConsent.consentString&&ProperMedia.utils.deepSetValue(u,"regs.ext.consent",gdprConsent.consentString);uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(u,"regs.ext.us_privacy",uspConsent.usPrivacy);gppConsent.gppString&&Object.assign(u.regs,{gpp:gppConsent.gppString,gpp_sid:gppConsent.applicableSections});ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&ProperMedia.utils.deepSetValue(u,"regs.coppa",1);1==properOps.testing_mode.ids&&(u.test=1);properLog.mylog(t,r),e.incrementRequestsSent(d);var _=ProperMedia.utils.getTimestampMs(),h=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({method:"POST",url:t,requestType:"cors",bidder:r,edge:h,data:JSON.stringify(u),success:function(p){try{properLog.mylog(p,r),p=ProperMedia.utils.safeJsonParse(p);var c=ProperMedia.utils.getTimestampMs(),m=ProperMedia.utils.calcResponseMs(_,c);if(p&&p.seatbid&&p.seatbid.length>0&&p.seatbid[0].bid&&p.seatbid[0].bid.length>0)Object.keys(p.seatbid).forEach((function(d){var u=p.seatbid[d].bid;Object.keys(u).forEach((function(d){var _=u[d],h=(p.bidid,_.price||0),b=_.w||1,v=_.h||1,y=_.adid||"",P=_.cid||"",w=_.crid||"",M=_.cat||[],I=_.adomain||[],x=(p.cur,_.adm||""),S=_.ttl||s.default_bid_ttl,C=b+"x"+v;"inview"==l&&"1x1"==C&&(C=o.special_size||C);var O=new adObj({bidder:r,size:C,price:parseFloat(h),gross:parseFloat(h),tag_id:a,adid:y,cid:P,crid:w,cat:M,adomain:I,request_url:t,response:_,response_ms:m,received_ts:c,ttl:S,floor:getBidderFloor(r,C),uids:g,target_slot:ProperMedia.utils.deepAccess(n,a+".slot_name")||""});if("video"==s.demand_type){O.type="video",O.vast_tag=x;var A=ProperMedia.utils.parseVastVpaid(O.vast_tag);O.vast_type=A.vast_type,O.vpaid=A.vpaid,O.video_type=s.video_type}else O.adcode=x;e.logBidResponse(O)}))}));else{var h=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:t,response:p,response_ms:m,received_ts:c,ttl:0});e.logNoBidResponse(h)}e.incrementBidResponseCount(d),addUserSyncs(u,p)}catch(e){throw e.bidder=r,e}},error:function(t){try{e.incrementBidResponseCount(d);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(_,s),a={bidder:r,status:t.status,statusText:t.statusText,timeout:t.timeout,response_ms:o};e.logBidResponseError(a)}catch(t){throw t.bidder=r,t}}})}(a[o],o)}))},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"slot",default_bid_ttl:6e4,gvlid:58}}}(),bidAdapters.triplelift=function(){var e="https://tlx.3lift.com/header/auction";function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(e,t,r){var s={imps:{},data_map:{},request_cnt:0};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,o){Object.keys(e).length>0&&Object.keys(e).forEach((function(a){for(var n=0;n<e[a].length;n++){var d=e[a][n],p=d.split("-"),l=parseSize(ProperMedia.utils.deepAccess(r,"native_sizes."+a)||a),c=p[0];if(void 0===s.imps[d]){var u={id:d,tagid:c,floor:0};"display"==r.demand_type?u.banner={format:[l]}:"video"==r.demand_type&&(u.video={mimes:["video/mp4","application/javascript"],w:l.w,h:l.h,context:r.video_type,placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3]},"instream"==r.video_type?u.video.placement=1:u.video.placement=3),s.imps[d]=u,s.data_map[d]={tag_id:d,tag_sizes:[],slot_name:o||"",floor:0}}var g=getBidderFloor(t,a);(!s.imps[d].floor||g<s.imps[d].floor)&&(s.imps[d].floor=g,ProperMedia.utils.deepSetValue(s,"data_map."+d+".floor",g)),s.data_map[d].tag_sizes.push(a),s.request_cnt++}}))}return s}function getEids(e,t,r,s){return!(!e||!e[t])&&function(e,t,r){return{source:t,uids:[{id:e.id?e.id:e,ext:{rtiPartner:r}}]}}(e[t],r,s)}return{send:function(t){var r=t.bidder,s=properOps.bidder_info[r]||s,o=formatRequest(t,r,s),a=ProperMedia.utils.objectValues(o.imps)||[],n=o.data_map||{},d=o.request_cnt;if(0==a.length)return!1;var p={imp:a},l=e;l+="?lib=prebid",l+="&v="+properOps.prebid_version,l+="&referrer="+encodeURIComponent(properPage.bidder_page_url),l+="&tmax="+properOps.tmax,ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&(l+="&coppa="+!!properSpecialOps.coppa),gdprConsent&&(void 0!==gdprConsent.gdprApplies&&(l+="&gdpr="+!!gdprConsent.gdprApplies),void 0!==gdprConsent.consentString&&(l+="&cmp_cs="+encodeURIComponent(gdprConsent.consentString))),uspConsent&&uspConsent.usPrivacy&&(l+="&us_privacy="+encodeURIComponent(uspConsent.usPrivacy));var{eids:c,uids:u}=function(){var e=userIds.getUIdsObj()||{},t=[],r=[];if(Object.keys(e).length){var s=function(e){return getEids(e,"idl_env","liveramp.com","idl")}(e),o=function(e){return getEids(e,"pubcid","pubcid.org","pubcid")}(e);s&&(t.push(s),r.push("idl_env")),o&&(t.push(o),r.push("pubcid"))}return{eids:t,uids:r}}();c.length>0&&ProperMedia.utils.deepSetValue(p,"user.ext.eids",c);var g=schainCheck(r);""!=g&&ProperMedia.utils.deepSetValue(p,"ext.schain",g),properLog.mylog(l,r),t.incrementRequestsSent(d);var m=ProperMedia.utils.getTimestampMs(),_=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:l,requestType:"cors",method:"POST",bidder:r,edge:_,data:JSON.stringify(p),success:function(o){try{properLog.mylog(o,r);var a=ProperMedia.utils.safeJsonParse(o)||{},p=ProperMedia.utils.getTimestampMs(),l=ProperMedia.utils.calcResponseMs(m,p);if(a&&a.bids&&a.bids.length>0)for(var c=0;c<a.bids.length;c++){var g=a.bids[c],_=g.imp_id||0,h=g.cpm||0,b=g.ad||"",v=g.width||1,y=g.height||1,P=(g.iurl,g.crid||""),w=g.adomain||[],M=g.advertiser_name||"",I="1x1";-1!==ProperMedia.utils.deepAccess(n,_+".tag_sizes").indexOf(v+"x"+y)&&(I=v+"x"+y),"1x1"==I&&(I=(ProperMedia.utils.deepAccess(n,_+".tag_sizes")||[I]).pop());var x=parseFloat(h),S=new adObj({bidder:r,size:I,price:x,gross:x,tag_id:ProperMedia.utils.deepAccess(n,_+".tag_id")||_,adomain:w,crid:P,adid:M,request_url:e,response:g,response_ms:l,received_ts:p,ttl:s.default_bid_ttl,floor:ProperMedia.utils.deepAccess(n,_+".floor")||0,target_slot:ProperMedia.utils.deepAccess(n,_+".slot_name")||"",uids:u});if("video"==s.demand_type){S.type="video",S.vast_tag=b;var C=ProperMedia.utils.parseVastVpaid(S.vast_tag);S.vast_type=C.vast_type,S.vpaid=C.vpaid,S.video_type=s.video_type}else S.adcode=b;t.logBidResponse(S)}else t.logNoBidResponse(new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:e,response:a,response_ms:l,received_ts:p,ttl:0}));t.incrementBidResponseCount(d)}catch(e){throw e.bidder=r,e}},error:function(e){try{t.incrementBidResponseCount(d);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(m,s),a={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};t.logBidResponseError(a)}catch(e){throw e.bidder=r,e}}})},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","2x2","120x600","160x600","300x50","300x100","300x1050","300x250","300x600","320x100","320x480","320x50","336x280","400x300","468x60","640x480","728x90","970x250","970x90","fluid","native_horizontal","native_vertical"],native_sizes:{native_horizontal:"300x250",native_vertical:"300x250"},gvlid:28},getUserSyncs:function(){var e=[];gdprConsent&&(gdprConsent.gdprApplies&&e.push("gdpr="+encodeURIComponent(gdprConsent.gdprApplies)),gdprConsent.consentString&&e.push("cmp_cs="+encodeURIComponent(gdprConsent.consentString))),uspConsent&&uspConsent.usPrivacy&&e.push("us_privacy="+encodeURIComponent(uspConsent.usPrivacy)),gppConsent&&(gppConsent.gppString&&e.push("gpp="+encodeURIComponent(gppConsent.gppString)),gppConsent.applicableSections&&0!==gppConsent.applicableSections.length&&e.push("gpp_sid="+encodeURIComponent(gppConsent.applicableSections.filter((e=>Number.isInteger(e))).join(",")))),userSyncs.add({type:"iframe",url:"https://eb2.3lift.com/sync?"+e.join("&"),bidder:"triplelift"})},formatRequest,removeCreative:function(e){try{if(1==properOps.dfp_per_slot){var t=window.top.document.querySelectorAll("#"+CSS.escape(e.div_id)+" .tlod");if(t&&t.length>0)for(var r=0;r<t.length;r++){var s=t[r];s.parentNode.removeChild(s)}}}catch(e){console.error(e)}}}}(),bidAdapters.undertone=function(){var e=0;function formatRequest(t,r){var s={imps:{},tag_sizes:{},tag_ids:{},target_slots:{},request_cnt:0},o=properDevice.isMobile()?"mobile":"desktop";if(t.requests&&formatTagIds(t.requests,""),t.slot_requests)for(var a in t.slot_requests)formatTagIds(t.slot_requests[a],a);function formatTagIds(t,a){Object.keys(t).forEach((function(n){for(var d=0;d<t[n].length;d++){var p=t[n][d];if(void 0===s.imps[p]){var l=ProperMedia.utils.generateUUID(),c={bidRequestId:l,hbadaptor:"prebid",url:properPage.bidder_page_url,domain:properPage.domain,placementId:void 0!==p?p.toString():null,publisherId:parseInt(e),sizes:ProperMedia.utils.deepAccess(r,"native_sizes."+o+"."+n)||[n.split("x").map((function(e){return parseInt(e)}))],params:{placementId:p.toString(),publisherId:parseInt(e)}};"video"==r.demand_type&&(c.video={streamType:r.video_type,placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3],maxDuration:30,skippable:!0},c.mediaType="video"),c.sizes.length>0&&(s.request_cnt++,s.imps[p]=c,ProperMedia.utils.deepAccess(r,"native_sizes."+o+"."+n)&&(s.tag_sizes[l]=n)),s.target_slots[l]=a||"",s.tag_ids[l]=p}}}))}return s}function getGdprQueryParams(){return gdprConsent?"gdpr="+(gdprConsent.gdprApplies?"1":"0")+"&gdprstr="+(gdprConsent.consentString?gdprConsent.consentString:""):null}return{send:function(t){var r=t.bidder,s=properOps.bidder_info[r]||s;if(!(e=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".site_id")||0))return properLog.mylog("Error: Undertone Site ID is Required."),!1;var o="https://hb.undertone.com/hb?pid="+e+"&domain="+properPage.domain,a=formatRequest(t,s),n=ProperMedia.utils.objectValues(a.imps)||[],d=a.request_cnt;if(0==d)return!1;var p=Math.max(document.documentElement.clientWidth,window.innerWidth||0),l=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c={"x-ut-hb-params":n,commons:{adapterVersion:properOps.prebid_version,uids:userIds.getUIdsObj()||{},pageSize:0==p||0==l?null:[p,l]}},u=getGdprQueryParams();if(u&&(o+="&"+u),uspConsent.usPrivacy&&(o+="&ccpa="+uspConsent.usPrivacy),gppConsent){const e=gppConsent.gppString??"",t=gppConsent.applicableSections??"";o+=`&gpp=${e}&gpp_sid=${t}`}var g=ProperMedia.utils.getTimestampMs(),m=ProperMedia.utils.deepAccess(properOps,"bidders.header."+r+".edge")||!1;$.ajax({url:o,method:"POST",requestType:"cors",bidder:r,edge:m,data:JSON.stringify(c),success:function(e){try{properLog.mylog(e,r),e=ProperMedia.utils.safeJsonParse(e);var n=ProperMedia.utils.getTimestampMs(),p=ProperMedia.utils.calcResponseMs(g,n);if(e&&Array.isArray(e)&&e.length>0)e.forEach((function(e){var d="1x1";ProperMedia.utils.deepAccess(a,"tag_sizes."+e.bidRequestId)?d=ProperMedia.utils.deepAccess(a,"tag_sizes."+e.bidRequestId):e.width&&e.height&&(d=e.width+"x"+e.height);var l=e.cpm||0,c=e.ttl||0,u=e.adId||"",g=e.adId||"",m=ProperMedia.utils.deepAccess(a,"tag_ids."+e.bidRequestId)||"",_=new adObj({bidder:r,size:d,price:parseFloat(l),gross:parseFloat(l),tag_id:m,crid:u,adid:g,ttl:1e3*c||s.default_bid_ttl,request_url:o,response:e,response_ms:p,received_ts:n,uids:Object.keys(ProperMedia.utils.deepAccess(t,"auction.uids")),target_slot:ProperMedia.utils.deepAccess(a,"target_slots."+e.bidRequestId)||""});if("video"==s.demand_type){_.type="video",_.vast_tag=e.ad;var h=ProperMedia.utils.parseVastVpaid(_.vast_tag);_.vast_type=h.vast_type,_.vpaid=h.vpaid,_.video_type=s.video_type}else _.adcode=e.ad;t.logBidResponse(_)}));else{var l=new adObj({bidder:r,price:0,gross:0,tag_id:"",request_url:o,response:e,response_ms:p,received_ts:n,ttl:0});t.logNoBidResponse(l)}t.incrementBidResponseCount(d)}catch(e){throw e.bidder=r,e}},error:function(e){try{t.incrementBidResponseCount(d);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(g,s),a={bidder:r,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};t.logBidResponseError(a)}catch(e){throw e.bidder=r,e}}})},bidderInfo:{rev_share:.9,bid_grouping:"page",demand_type:"display",default_bid_ttl:36e4,gvlid:677,native_sizes:{desktop:{sticky_horizontal:[[1,1]],native_horizontal:[[1,2]]},mobile:{sticky_horizontal:[[1,1],[320,50]],native_horizontal:[[1,2]]}}},getUserSyncs:function(){var e="",t=getGdprQueryParams();t&&(e+="?"+t),uspConsent.usPrivacy&&(e+=(e.length>0?"&":"?")+"ccpa="+uspConsent.usPrivacy),userSyncs.add({type:"iframe",url:"https://cdn.undertone.com/js/usersync.html"+e,bidder:"undertone"})},formatRequest}}(),bidAdapters.unruly=function(){const e="https://targeting.unrulymedia.com/unruly_prebid";let t=null;function parseSize(e){return e.split("x").map((function(e){return parseInt(e)}))}function formatRequest(e,r,s){const o={imps:{},data_map:{},request_cnt:0},a=s.auctionId,n=schainCheck(r);if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var d in e.slot_requests)formatTagIds(e.slot_requests[d],d);function formatTagIds(e,d){Object.keys(e).length>0&&Object.keys(e).forEach((function(p){for(let c=0;c<e[p].length;c++){const u=e[p][c];void 0===o.imps[u]&&(o.imps[u]={bidder:r,params:{siteId:t},mediaTypes:{},adUnitCode:ProperMedia.utils.generateUUID(),transactionId:ProperMedia.utils.generateUUID(),bidId:u,bidderRequestId:ProperMedia.utils.generateUUID(),auctionId:a,src:"client",bidRequestsCount:1,bidderRequestsCount:1,bidderWinsCount:0,userIdAsEids:userIds.getEidsArray(),userId:userIds.getUIdsObj()},o.data_map[u]={slot_name:d||"",tag_id:u,floor:0}),""!=n&&ProperMedia.utils.deepSetValue(o,"imps."+u+".schain",n);let g="display"==s.demand_type?"banner":"video";"display"==s.demand_type?(ProperMedia.utils.deepAccess(o,"imps."+u+".mediaTypes.banner")||(o.imps[u].mediaTypes.banner={sizes:[],floor:0}),o.imps[u].mediaTypes.banner.sizes.push(parseSize(p))):"video"==s.demand_type&&(ProperMedia.utils.deepAccess(o,"imps."+u+".mediaTypes.video")||(o.imps[u].mediaTypes.video={context:s.video_type,playerSize:[],floor:0}),o.imps[u].mediaTypes.video.playerSize.push(parseSize(p)));var l=getBidderFloor(r,p);(!o.imps[u].mediaTypes[g].floor||l<o.imps[u].mediaTypes[g].floor)&&(o.imps[u].mediaTypes[g].floor=l,o.data_map[u].floor=l),o.request_cnt++}}))}return o}return{formatRequest,send:function(r){const s=r.bidder,o=properOps.bidder_info[s]||o,a=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".site_id")||"").toString().split("-")||["",""];if(t=parseInt(properDevice.isMobile()&&2==a.length?a[1]:a[0]),!t)return properLog.mylog("Error: Unruly Site ID is Required."),!1;o.auctionId=ProperMedia.utils.deepAccess(r,"auction.id");const n=formatRequest(r,s,o),d=ProperMedia.utils.objectValues(n.imps)||[],p=n.data_map||{},l=n.request_cnt,c={bidderRequest:{bidderCode:"unruly",auctionId:d[0].auctionId,bidderRequestId:d[0].bidderRequestId,auctionStart:Date.now(),timeout:properOps.tmax,refererInfo:{referer:properPage.url,reachedTop:!0,numIframes:0,stack:[properPage.url],canonicalUrl:properPage.canonical_url},start:Date.now(),invalidBidsCount:0,bids:d,gdprConsent:{},uspConsent:"",gppConsent:{}}};gdprConsent&&(c.bidderRequest.gdprConsent={consentString:gdprConsent.consentString||"",vendorData:gdprConsent.vendorData||{},gdprApplies:!!gdprConsent.gdprApplies}),uspConsent.usPrivacy&&(c.bidderRequest.uspConsent=uspConsent.usPrivacy||""),gppConsent&&(c.bidderRequest.gppConsent={gppString:gppConsent.gppString,applicableSections:gppConsent.applicableSections}),properLog.mylog(e,s),r.incrementRequestsSent(l);const u=ProperMedia.utils.getTimestampMs();$.ajax({url:e,method:"POST",requestType:"cors",headers:{"Content-Type":"application/json"},data:JSON.stringify(c),success:function(t){try{const a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(u,a);if((t=ProperMedia.utils.safeJsonParse(t))&&t.bids&&0!=t.bids.length){properLog.mylog(t,s);for(let d=0;d<t.bids.length;d++){const l=t.bids[d],c=l.cpm||0,u=l.width||0,g=l.height||0,m=l.bidId||"",_=l.creativeId||"",h=new adObj({bidder:s,size:u+"x"+g,price:parseFloat(c),gross:parseFloat(c),tag_id:m,crid:_,request_url:e,response:l,response_ms:n,received_ts:a,ttl:o.default_bid_ttl,floor:ProperMedia.utils.deepAccess(p,l.bidId+".floor")||0,target_slot:ProperMedia.utils.deepAccess(p,l.bidId+".slot_name")||"",uids:Object.keys(ProperMedia.utils.deepAccess(r,"auction.uids"))}),b=ProperMedia.utils.deepAccess(l,"meta.mediaType");if(b&&"video"===b.toLowerCase()){h.type="video",h.vast_tag=l.vastUrl||"";const e=ProperMedia.utils.parseVastVpaid(h.vast_tag);h.vast_type=e.vast_type,h.vpaid=e.vpaid,h.video_type=ProperMedia.utils.deepAccess(l,"meta.videoContext")}else b&&"banner"===b.toLowerCase()&&(h.adcode=l.ad);r.logBidResponse(h)}}else{properLog.mylog("Unruly: No bids returned");const o=new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:e,response:t,response_ms:n,received_ts:a,ttl:0});r.logNoBidResponse(o)}r.incrementBidResponseCount(l)}catch(e){throw e.bidder=s,e}},error:function(e){try{r.incrementBidResponseCount(l);const t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(u,t),a={bidder:s,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};r.logBidResponseError(a)}catch(e){throw e.bidder=s,e}}})},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:36e4,auto_gen_granularity:"slot",auto_gen_sizes:["1x1","160x600","300x50","300x250","300x600","320x50","728x90","970x250"],gvlid:36}}}(),bidAdapters.vidazoo=function(){var e={rev_share:1,demand_type:"display",bid_grouping:"slot",default_bid_ttl:3e5,div_insertion:1,gvlid:744},t="vidazoo",r="1.0.0",s="https://prebid.cootlogix.com/prebid/multi/",o="https://demoad.cootlogix.com/prebid/multi/",a="59ac17c192832d0011283fe3",n=!1;const d=36e5,p="wsid_"+parseInt(Date.now()*Math.random()),l="vidSid",c="vdzwopt";let u={gvlid:e.gvlid,bidderCode:t};function getStorageItem(e){try{return ProperMedia.utls.safeJsonParse(properStorage.getDataFromLocalStorage(e,u))}catch(e){}return null}function setStorageItem(e,t,r){try{const s=r||Date.now(),o=JSON.stringify({value:t,created:s});properStorage.setDataInLocalStorage(e,o,u)}catch(e){}}function addUserSyncs(e){try{var r="?gdpr="+(gdprConsent.gdprApplies?1:0)+"&gdpr_consent="+encodeURIComponent(gdprConsent.consentString||"")+"&us_privacy="+encodeURIComponent(uspConsent.usPrivacy||"");gppConsent.gppString&&gppConsent.applicableSections?.length&&(r+="&gpp="+encodeURIComponent(gppConsent.gppString),r+="&gpp_sid="+encodeURIComponent(gppConsent.applicableSections.join(","))),userSyncs.add({type:"iframe",url:"https://sync.cootlogix.com/api/sync/iframe"+r,bidder:t})}catch(e){throw e.bidder=t,e}}return{send:function(e){var t=e.bidder,n=properOps.bidder_info[t]||n;a=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id")||"").split("-")[0]||a;var g=function(e,t,r){var s={imps:{},data_map:{}};if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var o in e.slot_requests)formatTagIds(e.slot_requests[o],o);function formatTagIds(e,r){Object.keys(e).length>0&&Object.keys(e).forEach((function(o){for(var a=0;a<e[o].length;a++){var n=e[o][a];void 0===s.imps[n]&&(s.imps[n]={sizes:[],floor:0},s.data_map[n]={slot_name:r||"",tag_id:n,floor:0}),s.imps[n].sizes.push(o);var d=getBidderFloor(t,o);(!s.imps[n].floor||d<s.imps[n].floor)&&(s.imps[n].floor=d,s.data_map[n].floor=d)}}))}return s}(e,t),m=g.imps||{},_=g.data_map||{};Object.keys(m).forEach((function(g){let h=g.split("-")[0]||g;!function(g,m,h){if(!m||!g.sizes.length)return!1;var b=g.sizes.length;const v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";const r=e.length;let s=0,o=0;if(r>0)for(;o<r;)s=(s<<5)-s+e.charCodeAt(o++)|0;return t+s}(properPage.url),y=function(e){try{const t=getStorageItem(e);let r,s=0;t&&t.value&&Date.now()-t.created<expiry&&(s=t.value,r=t.created);const o=s+1;return setStorageItem(e,o,r),o}catch(e){return 0}}(v),P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;const r=`u_${e}`,s=Date.now(),o=getStorageItem(r);let a;!o||!o.value||s-o.created>t?(a=`${e}_${s.toString()}`,setStorageItem(r,a)):a=o.value;return a}(v),w=getStorageItem(l)||"",M=function(){let e=properStorage.getDataFromLocalStorage(c,u);e||(e=String(Date.now()),properStorage.setDataInLocalStorage(c,e,u));return e}(),I=properStorage.cookiesAreEnabled(u)||properStorage.localStorageIsEnabled(u);ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".account_overrides.enabled")&&(a=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".account_overrides.bidder_ids.pId")||a);var x={};if("display"==n.demand_type)x.banner={sizes:g.sizes.map((e=>e.split("x").map((e=>parseInt(e)))))};else if("video"==n.demand_type){var S=g.sizes[0].split("x").map((e=>parseInt(e)));x.video={context:n.video_type,mimes:["video/mp4","application/javascript"],playerSize:S,w:S[0],h:S[1],maxduration:30,minduration:10,api:[2],delivery:6,pos:0,placement:"outstream"==n.video_type?3:1,playbackmethod:"outstream"==n.video_type?[6]:[3],linearity:"outstream"==n.video_type?2:1,protocols:[2,3,5,6],startdelay:0,skip:0}}var C={url:encodeURIComponent(properPage.url),uqs:"?"+ProperMedia.utils.formatQueryString(properPage.get_vars,!0),cb:Date.now(),bidFloor:g.floor,bidId:ProperMedia.utils.generateUUID(),referrer:properPage.referrer,adUnitCode:ProperMedia.utils.generateUUID(),publisherId:a,sessionId:w,sizes:g.sizes,dealId:y,uniqueDealId:P,bidderVersion:r,prebidVersion:properOps.prebid_version,res:screen.width+"x"+screen.height,mediaTypes:x,ptrace:M,isStorageAllowed:I,webSessionId:p},O=function(e){var t,r=userIds.getUIdsObj(),s=[];return Object.keys(r).forEach((function(o){var a=r[o];switch(t="uid."+o,o){case"digitrustid":e[t]=ProperMedia.utils.deepAccess(a,"data.id");break;case"lipb":e[t]=a.lipbid;break;case"parrableId":e[t]=a.eid;break;case"id5id":s.push(o),e[t]=a.uid;break;default:s.push(o),e[t]=a}})),s}(C),A=schainCheck(t);""!=A&&(C.schain=A);gdprConsent&&("boolean"==typeof gdprConsent.gdprApplies&&(C.gdpr=gdprConsent.gdprApplies?1:0),gdprConsent.consentString&&(C.gdprConsent=gdprConsent.consentString));uspConsent&&uspConsent.usPrivacy&&(C.usPrivacy=uspConsent.usPrivacy);gppConsent.gppString&&(C.gppString=gppConsent.gppString,C.gppSid=gppConsent.applicableSections);var k=s+m;1==properOps.testing_mode.ids&&(k=o+(m="5e7b4eac063c510017ca44ef"));properLog.mylog(k,t),e.incrementRequestsSent(b);var T=ProperMedia.utils.getTimestampMs(),j=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({url:k,method:"POST",requestType:"cors",bidder:t,edge:j,data:JSON.stringify(C),success:function(r){try{properLog.mylog(r,t),r=ProperMedia.utils.safeJsonParse(r);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(T,s);r&&r.results&&Array.isArray(r.results)&&r.results.length>0?(r.results.forEach((function(r){var a=new adObj({bidder:t,size:r.width+"x"+r.height,price:parseFloat(r.price),gross:parseFloat(r.price),tag_id:h,ttl:1e3*r.exp||n.default_bid_ttl,request_url:k,response:r,response_ms:o,received_ts:s,uids:O,floor:ProperMedia.utils.deepAccess(_,h+".floor")||0,target_slot:ProperMedia.utils.deepAccess(_,h+".slot_name")||""});if("display"==n.demand_type){var d="";d=1==properOps.dfp_per_slot&&0==properPage.isolated?'<script>try { var slot_div = window.top.document.getElementById("{PROPER_SLOT_DIV_ID}-iframe").contentWindow.document.getElementById("{PROPER_SLOT_DIV_ID}"); var div = document.createElement(\'div\'); div.setAttribute("id", "'+C.adUnitCode+'"); slot_div.appendChild(div); } catch(e) { console.error(e); }<\/script>':'<script>try { var slot_div = window.top.document.getElementById("{PROPER_SLOT_DIV_ID}"); var div = document.createElement(\'div\'); div.setAttribute("id", "'+C.adUnitCode+'"); slot_div.appendChild(div); } catch(e) { console.error(e); }<\/script>',a.adcode=d+r.ad}else if("video"==n.demand_type){a.type="video",a.vast_tag=r.vastXml;var p=ProperMedia.utils.parseVastVpaid(a.vast_tag);a.vast_type=p.vast_type,a.vpaid=p.vpaid,a.video_type=n.video_type}e.logBidResponse(a)})),addUserSyncs(r)):e.logNoBidResponse(new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:k,response:r,response_ms:o,received_ts:s,ttl:0})),e.incrementBidResponseCount(b)}catch(e){throw e.bidder=t,e}},error:function(r){try{e.incrementBidResponseCount(b);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(T,s),a={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(a)}catch(r){throw r.bidder=t,r}}})}(m[g],h,g)}))},bidderInfo:e,loadInitScripts:function(e,t){try{let o=(t.site_id||"").split("-")[1]||"";if(!n&&o&&"display"==ProperMedia.utils.deepAccess(properOps,"bidder_info."+e+".demand_type")){var r=document.createElement("script");r.src="https://static.vidazoo.com/basev/vwpt.js",r.defer=!0,r.setAttribute("data-widget-id",o),r.type="text/javascript";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(r,s),n=!0}}catch(e){sendError(new Error("Vidazoo: Error placing script")),console.error(e)}}}}(),bidAdapters.yahoo=function(){var e="8a969978017a7aaabab4ab0bc01a0009",t="8a96958a017a7a57ac375d50c0c700cc",r={"id5-sync.com":"id5id","liveramp.com":"idl_env","pubcid.org":"pubcid","yahoo.com":"connectid"},s="https://c2shb.pubgw.yahoo.com/bidRequest",o="yahoo";function parseSize(e){var t=e.split("x");return{w:parseInt(t[0]),h:parseInt(t[1])}}function formatRequest(r,s,o){var a={imps:{},data_map:{},request_cnt:0};if(r.requests&&formatTagIds(r.requests,""),r.slot_requests)for(var n in r.slot_requests)formatTagIds(r.slot_requests[n],n);function formatTagIds(r,n){Object.keys(r).length>0&&Object.keys(r).forEach((function(d){for(var p=0;p<r[d].length;p++){var l=r[d][p];if(void 0===a.imps[l]){var c=l.split("-")[0]||l;if(1==properOps.testing_mode.ids&&(c="video"==o.demand_type?t:e),a.imps[l]={id:l.toString(),tagid:c,secure:properPage.use_ssl?1:0,bidfloor:0,ext:{pos:c}},1==properOps.testing_mode.ids&&(a.imps[l].ext.e2eTestMode=!0),"display"==o.demand_type){var u=properUser.checkAdBlock()?["text/html","image/jpg"]:["text/html","text/javascript","application/javascript","image/jpg"];a.imps[l].banner={mimes:u,format:[]}}else if("video"==o.demand_type){var g=parseSize(d);a.imps[l].video={mimes:["video/mp4","application/javascript"],w:g.w,h:g.h,maxbitrate:void 0,maxduration:30,minduration:10,api:[2],delivery:6,pos:0,placement:"outstream"==o.video_type?3:1,playbackmethod:"outstream"==o.video_type?[6]:[3],linearity:"outstream"==o.video_type?2:1,protocols:[2,3,5,6],startdelay:0,rewarded:void 0}}a.data_map[l]={slot_name:n||"",tag_id:l,floor:0}}"display"==o.demand_type&&a.imps[l].banner.format.push(parseSize(d));var m=getBidderFloor(s,d);(!a.imps[l].bidfloor||m<a.imps[l].bidfloor)&&(a.imps[l].bidfloor=m,a.data_map[l].floor=m),a.request_cnt++}}))}return a}function updateConsentQueryParams(e){const t={gdpr_consent:gdprConsent.consentString||"",gdpr:gdprConsent.gdprApplies?"1":"0",us_privacy:uspConsent.usPrivacy||"",gpp:gppConsent.gppString||"",gpp_sid:gppConsent.applicableSections&&Array.isArray(gppConsent.applicableSections)?gppConsent.applicableSections.join(","):""},r=new URL(e),s=r.searchParams;for(const[e,r]of Object.entries(t))s.set(e,r);return r.search=s.toString(),r.toString()}function addUserSyncs(e){try{if(ProperMedia.utils.deepAccess(e,"ext.pixels")){var t=e.ext.pixels||[],r=/\w*(?=\s)/,s=/src=("|')(.*?)\1/;if(t){var a=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);a&&a.forEach((function(e){var t=e.match(r)[0],o=e.match(s)[2];if(t&&o){var a="img"===t.toLowerCase()?"image":"iframe";userSyncs.add({type:a,url:updateConsentQueryParams(o)})}}))}}}catch(e){throw e.bidder=o,e}}return{formatRequest,send:function(e){var t=e.bidder,o=properOps.bidder_info[t]||o,a=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id")||"").split("-")||["",""],n=properDevice.isMobile()&&2==a.length?a[1]:a[0];if(1==properOps.testing_mode.ids&&(n="8a969516017a7a396ec539d97f540011"),!n)return properLog.mylog("Error: Yahoo Site ID is Required."),!1;var d=formatRequest(e,t,o),p=ProperMedia.utils.objectValues(d.imps)||[],l=d.data_map||{},c=(d.request_cnt,{id:ProperMedia.utils.generateUUID(),cur:["USD"],imp:[],site:{id:n,page:properPage.bidder_page_url,domain:properPage.domain,ref:properPage.referrer},device:{dnt:0,ua:navigator.userAgent,ip:void 0,w:window.screen.width,h:window.screen.height},source:{ext:{hb:1,adapterver:"1.1.0",prebidver:properOps.prebid_version,integration:{name:"prebid.js",ver:properOps.prebid_version}},fd:1},user:{ext:{}}}),u=function(){var e=userIds.getEidsArray(),t=[],s=e.filter((function(e){return!!r[e.source]&&(t.push(r[e.source]),!0)}));return{uids:t,eids:s}}();u.length>0&&ProperMedia.utils.deepSetValue(c,"user.ext.eids",u);var g=schainCheck(t);""!=g&&(ProperMedia.utils.deepSetValue(c,"source.ext.schain",g),ProperMedia.utils.deepSetValue(c,"source.ext.schain.nodes.0.rid",c.id)),ProperMedia.utils.deepSetValue(c,"user.ext.consent",gdprConsent.gdprApplies?gdprConsent.consentString:""),"boolean"==typeof gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(c,"regs.ext.gdpr",Number(gdprConsent.gdprApplies)),ProperMedia.utils.deepSetValue(c,"regs.ext.us_privacy",uspConsent.usPrivacy||""),gppConsent&&(ProperMedia.utils.deepSetValue(c,"regs.ext.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(c,"regs.ext.gpp_sid",gppConsent.applicableSections));var m=1!=properOps.testing_mode.ids&&function(e){if(gdprConsent&&gdprConsent.gdprApplies&&2===gdprConsent.apiVersion)return!1;return!0}();properLog.mylog(s,t),p.forEach((function(r){!function(r){c.imp=[r],e.incrementRequestsSent(1);var a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({url:s,method:"POST",requestType:"cors",bidder:t,headers:{"x-openrtb-version":"2.5","Content-Type":"application/json"},withCredentials:m,edge:n,data:JSON.stringify(c),success:function(r){try{var n=ProperMedia.utils.getTimestampMs(),d=ProperMedia.utils.calcResponseMs(a,n);if((r=ProperMedia.utils.safeJsonParse(r))&&r.seatbid&&r.seatbid.length>0&&r.seatbid[0].bid&&r.seatbid[0].bid.length>0)properLog.mylog(r,t),Object.keys(r.seatbid).forEach((function(a){Object.keys(r.seatbid[a].bid).forEach((function(p){var c=r.seatbid[a].bid[p],u=(c.adId?c.adId:c.impid||c.crid,c.impid||""),g=c.ext&&c.ext.encp?c.ext.encp:c.price,m=c.w||1,_=c.h||1,h=c.adm||"",b=c.nurl||"",v=c.crid||0,y=c.dealId||"",P=new adObj({bidder:t,size:m+"x"+_,price:parseFloat(g),gross:parseFloat(g),nurl:b,tag_id:u,crid:v,dealid:y,request_url:s,response:c,response_ms:d,received_ts:n,ttl:o.default_bid_ttl,floor:ProperMedia.utils.deepAccess(l,u+".floor")||0,target_slot:ProperMedia.utils.deepAccess(l,u+".slot_name")||""});if("video"==o.demand_type){P.type="video",P.vast_tag=h,b&&(P.vast_tag=b);var w=ProperMedia.utils.parseVastVpaid(P.vast_tag);P.vast_type=w.vast_type,P.vpaid=w.vpaid,P.video_type=o.video_type}else P.adcode=h;e.logBidResponse(P)}))})),addUserSyncs(r);else{properLog.mylog("no "+t+" bids returned");var p=new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:s,response:r,response_ms:d,received_ts:n,ttl:0});e.logNoBidResponse(p)}e.incrementBidResponseCount(1)}catch(e){throw e.bidder=t,e}},error:function(r){try{e.incrementBidResponseCount(1);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(a,s),n={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(n)}catch(r){throw r.bidder=t,r}}})}(r)}))},bidderInfo:{rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:3e5,acceptable_ads:!0,gvlid:25}}}(),bidAdapters.s2s=(bidderInfo={rev_share:1,demand_type:"display",bid_grouping:"page",default_bid_ttl:12e4},endpoint=properOps.s2s_endpoint,{send:function(e){if(!e||!e.requests)return!1;var t=!!(void 0!==properSpecialOps.s2s_websockets?properSpecialOps.s2s_websockets:properOps.s2s_websockets),r=!!(void 0!==properSpecialOps.s2s_sse?properSpecialOps.s2s_sse:properOps.s2s_sse);endpoint=t?properOps.s2s_wss_endpoint:r?properOps.s2s_sse_endpoint:properOps.s2s_endpoint;var s=Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids")),o=properDevice.isMobile()?"mobile":"desktop",a=ProperMedia.utils.deepCopy(properOps.floors[o]||{backup:.01,sizes:{}});ProperMedia.utils.deepAccess(properSession,"sessionData.bid_avg")&&Object.keys(properSession.sessionData.bid_avg).forEach((function(e){(!ProperMedia.utils.deepAccess(a,"sizes."+e)||a.sizes[e]<properSession.sessionData.bid_avg[e])&&ProperMedia.utils.deepSetValue(a,"sizes."+e,properSession.sessionData.bid_avg[e])}));var n,d,p={openRTBBidRequest:(n={id:null,at:1,tmax:properOps.tmax,site:{id:"",page:properPage.bidder_page_url,ref:properPage.referrer,domain:properPage.domain,publisher:{id:properOps.site_name,name:properPage.domain,domain:properPage.domain}},device:{connectiontype:0,ua:navigator.userAgent,ip:null,dnt:ProperMedia.utils.getDNT()?1:0,js:1,geo:null,os:window.device.os_group,h:properPage.height,w:properPage.width,language:navigator.language.split("-")[0]},user:{buyeruid:null,geo:null},source:{},regs:{coppa:ProperMedia.utils.deepAccess(properSpecialOps,"coppa")?1:0,ext:{}},ext:{},test:1==properOps.testing_mode.ids?1:0,imp:[]},d=userIds.getEidsArray(),d&&d.length&&ProperMedia.utils.deepSetValue(n,"user.ext.eids",d),properOps.schain&&ProperMedia.utils.deepSetValue(n,"source.ext.schain",properOps.schain),"boolean"==typeof gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(n,"regs.ext.gdpr",Number(gdprConsent.gdprApplies)),ProperMedia.utils.deepSetValue(n,"user.ext.consent",gdprConsent.consentString),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(n,"regs.ext.us_privacy",uspConsent.usPrivacy),gppConsent&&(ProperMedia.utils.deepSetValue(n,"regs.ext.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(n,"regs.ext.gpp_sid",gppConsent.applicableSections)),n),bidder_ids:e.requests,proper_uid:cookieMatching.proper_uid,is_secure:properPage.use_ssl?1:0,is_mobile:properDevice.isMobile(),floors:a,cookies:{}};Object.keys(p.bidder_ids).forEach((function(e){gdprEnforcement.userSyncEnforcement(e)&&!gppConsentModule.userSyncsDenied()?(e=e.replace("_s2s",""),cookieMatching.bidderUserSyncValues[e]&&(p.cookies[e]=cookieMatching.bidderUserSyncValues[e])):p.bidder_ids[e].cookie_consent=!1})),1==properOps.testing_mode.ids&&(p.debug=!0),properLog.mylog(endpoint,"s2s");var l=Object.keys(e.requests).length||0,c=t||r?1:l;e.incrementRequestsSent(l);var u=ProperMedia.utils.getTimestampMs();ProperMedia.utils.deepAccess(properOps,"bidders.header.s2s.edge"),$.ajax({url:endpoint,method:"POST",requestType:"cors",websocket:t,sse:r,bidder:"s2s",timeout:(t||r)&&properDevice.isMobile()?4e3:2e3,data:JSON.stringify(p),success:function(t){try{t=ProperMedia.utils.safeJsonParse(t);var r=!!(void 0!==properSpecialOps.s2s_websockets?properSpecialOps.s2s_websockets:r),o=!!(void 0!==properSpecialOps.s2s_sse?properSpecialOps.s2s_sse:o);properLog.mylog(t,"s2s");var a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(u,a);if(t&&t.bids&&t.bids.length>0){for(var d=properDevice.isMobile()?"mobile":"desktop",p=0;p<t.bids.length;p++){var l=t.bids[p],g=l.nobid||!1,m=l.adcode||"",_=l.vast_tag||"",h=l.vast_type||"",b=l.vpaid||!1,v=l.bidder+"_s2s",y=l.media_type||"",P=l.price||0,w=l.impid||"",M=l.burl||"",I=l.nurl||"",x=l.dealid||"",S=l.adid||"",C=l.adomain||[],O=l.cid||"",A=l.crid||"",k=l.cat||[],T=l.ext||{},j=l.native||{},E=l.floor||0,D=parseInt(l.w||1),R=parseInt(l.h||1),z=l.slot_name||"",L=ProperMedia.utils.deepAccess(properOps,"bidder_info."+v)||bidderInfo,N=l.exp||L.default_bid_ttl||12e4;"display"==y&&I&&(m+='<img src="'+I+'" width=1 height=1>',I="");var U=D+"x"+R;U=ProperMedia.utils.deepAccess(L,"native_sizes."+d+"."+U)||U;var V=new adObj({bidder:v,native:j,nobid:g,type:y,size:U,burl:M,nurl:I,price:parseFloat(P),gross:parseFloat(P),tag_id:w,request_url:endpoint,response:l,response_ms:n,received_ts:a,dealid:x,adid:S,adomain:C,cid:O,crid:A,cat:k,ext:T,ttl:N,floor:E,target_slot:z,uids:s});"video"==y?(V.vast_tag=_,V.vast_type=h,V.vpaid=b,V.video_type=L.video_type):V.adcode=m,e.logBidResponse(V)}e.incrementBidResponseCount(c)}else(r||o)&&t.cookies?(r||o)&&t.error&&(r?sendError(new Error("WebSocket Server Error: "+t.error)):o&&sendError(new Error("Server Sent Events Error: "+t.error))):(e.incrementBidResponseCount(c),e.logNoBidResponse(new adObj({bidder:"s2s",price:0,gross:0,tag_id:"",request_url:endpoint,response:t,response_ms:n,received_ts:a,ttl:0})));t&&t.cookies&&Object.keys(t.cookies).map((function(e){t.cookies[e]&&cookieMatching.updateBidderUserSyncData(e,t.cookies[e])}))}catch(e){e.bidder="s2s",sendError(e)}},error:function(t){try{e.incrementBidResponseCount(c);var r=ProperMedia.utils.getTimestampMs(),s=ProperMedia.utils.calcResponseMs(u,r),o={bidder:"s2s",status:t.status,statusText:t.statusText,timeout:t.timeout,response_ms:s};e.logBidResponseError(o)}catch(t){t.bidder="s2s",sendError(t)}}})},onBidWon:function(e,t){return e.nurl&&((new Image).src=e.nurl),e.burl&&$.ajax({url:e.burl,method:"GET",withCredentials:!0}),!0},bidderInfo,removeCreative:function(e){"gumgum_s2s"==e.displayed_ad.bidder&&function(){try{var e=window.top.document.getElementById("GG_PXS");if(e){var t=e.parentNode;t&&t.parentNode.removeChild(t)}}catch(e){console.error(e)}}()}}),bidAdapters.aol_instream=(SYNC_URLS=["https://cm.g.doubleclick.net/pixel?google_nid=adaptv_dbm&google_cm&google_sc","https://pr-bh.ybp.yahoo.com/sync/adaptv_ortb/{combo_uid}","https://sync-tm.everesttech.net/upi/pid/m7y5t93k?redir=https%3A%2F%2Fsync.adap.tv%2Fsync%3Ftype%3Dgif%26key%3Dtubemogul%26uid%3D%24%7BUSER_ID%7D","https://match.adsrvr.org/track/cmf/generic?ttd_pid=adaptv&ttd_tpi=1"],SUPPORTED_USER_ID_SOURCES={"id5-sync.com":"id5id","verizonmedia.com":"connectid","liveramp.com":"idl_env"},{send:function(e){var t=e.bidder,r=properOps.bidder_info[t]||r,s=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id")||"").toString().split("-")||["",""],o=properDevice.isMobile()&&2==s.length?s[1]:s[0];if(1==properOps.testing_mode.ids&&(o="HBExchange"),!o)return properLog.mylog("Error: AOL Video Site ID is Required."),!1;var a="https://ads.adaptv.advertising.com/rtb/openrtb?ext_id="+o,n=0,d=e.requests;Object.keys(d).forEach((function(e){for(var t=0;t<d[e].length;t++)send_slot(e,d[e][t],n,""),n++}));var p=e.slot_requests||{};if(Object.keys(p).length)for(var l in p)Object.keys(p[l]).forEach((function(e){for(var t=0;t<p[l][e].length;t++)send_slot(e,p[l][e][t],n,l),n++}));function send_slot(s,o,n,d){var p=s.split("x"),l=getBidderFloor(t,s),c={id:ProperMedia.utils.generateUUID(),at:2,cur:"USD",imp:[{id:parseInt(n+1).toString(),secure:properPage.use_ssl?1:0,bidfloor:l,video:{mimes:["video/mp4","application/javascript"],w:parseInt(p[0]),h:parseInt(p[1]),linearity:"outstream"==r.video_type?2:1,protocols:[2,5],api:[2],delivery:[6],placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3],minduration:1,maxduration:15},ext:{hb:1}}],site:{page:properPage.url,ref:properPage.referrer},device:{ua:navigator.userAgent,js:1},tmax:properOps.tmax},{eids:u,uids:g}=function(){var e=userIds.getEidsArray(),t=[],r=e.filter((function(e){return!!SUPPORTED_USER_ID_SOURCES[e.source]&&(t.push(SUPPORTED_USER_ID_SOURCES[e.source]),!0)}));return{eids:r,uids:t}}();u&&u.length&&ProperMedia.utils.deepSetValue(c,"user.ext.eids",u);var m=schainCheck(t);""!=m&&ProperMedia.utils.deepSetValue(c,"source.ext.schain",m),"boolean"==typeof gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(c,"regs.ext.gdpr",gdprConsent.gdprApplies),ProperMedia.utils.deepSetValue(c,"user.ext.consent",gdprConsent.consentString),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(c,"regs.ext.us_privacy",uspConsent.usPrivacy),properLog.mylog(a,t),properLog.mylog(t+": sending bid request"),e.incrementRequestsSent(1);var _,h=ProperMedia.utils.getTimestampMs(),b=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({method:"POST",requestType:"cors",bidder:t,edge:b,data:JSON.stringify(c),url:a,success:function(s){properLog.mylog("AOL Video: parsing response");try{var n=ProperMedia.utils.getTimestampMs(),c=ProperMedia.utils.calcResponseMs(h,n);if((s=ProperMedia.utils.safeJsonParse(s))&&ProperMedia.utils.deepAccess(s,"seatbid.bid")&&s.seatbid.bid.length>0)properLog.mylog(s,t),s.seatbid.forEach((function(s){(s.bid||[]).forEach((function(s){var u=s.w||p[0],g=s.h||p[1],m=s.price||0,_=s.adm||"",h=s.crid||"",b=s.dealid||"",v=s.adomain||[],y=ProperMedia.utils.parseVastVpaid(_),P=new adObj({bidder:t,type:"video",size:u+"x"+g,price:parseFloat(m),gross:parseFloat(m),vast_tag:_,vast_type:y.vast_type,vpaid:y.vpaid,video_type:r.video_type,tag_id:o,crid:h,dealid:b,adomain:v,request_url:a,response:s,response_ms:c,received_ts:n,ttl:r.default_bid_ttl,floor:l,target_slot:d||""});e.logBidResponse(P)}))}));else{properLog.mylog(t+": no bid returned");var u=new adObj({bidder:t,price:0,gross:0,tag_id:o,request_url:a,response:s,response_ms:c,received_ts:n,ttl:0,floor:l,uids:g});e.logNoBidResponse(u)}e.incrementBidResponseCount(1)}catch(e){throw properLog.mylog(t+": unknown error with parsing response - "+e),e.bidder=t,e}},error:function(r){try{e.incrementBidResponseCount(1);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(h,s),a={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(a)}catch(r){throw r.bidder=t,r}}}),_=SYNC_URLS.map((function(e){return{type:"image",url:e,demand_type:"video",bidder:t}})),userSyncs.add(_)}},bidderInfo:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:36e5,gvlid:25}}),bidAdapters.beachfront_instream=(pubId="",eIdAdapters={liveRampATS:{adapter:userIdAdapters.liveRampATS,rtiPartner:"idl"}},{send:function(e){var t=e.bidder,r=properOps.bidder_info[t]||r;if(pubId=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id")||0,1==properOps.testing_mode.ids&&(pubId="11bc5dd5-7421-4dd8-c926-40fa653bec76"),!pubId)return properLog.mylog("Error: Beachfront Video Site ID is Required."),!1;var s="https://reachms.bfmio.com/bid.json?exchange_id="+pubId,o=e.requests;Object.keys(o).forEach((function(e){for(var t=0;t<o[e].length;t++)send_slot(e,o[e][t],"")}));var a=e.slot_requests||{};if(Object.keys(a).length)for(var n in a)Object.keys(a[n]).forEach((function(e){for(var t=0;t<a[n][e].length;t++)send_slot(e,a[n][e][t],n)}));function send_slot(o,a,n){var d=o.split("x"),p=getBidderFloor(t,o),l={isPrebid:!0,appId:pubId,domain:properPage.domain,id:ProperMedia.utils.generateUUID(),imp:[{video:{w:parseInt(d[0]),h:parseInt(d[1]),mimes:["video/mp4","application/javascript"],placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3]},bidfloor:p,secure:properPage.use_ssl?1:0}],site:{page:properPage.url,domain:properPage.domain},device:{ua:navigator.userAgent,language:navigator.language,devicetype:properDevice.isMobile()?1:/(smart[-]?tv|hbbtv|appletv|googletv|hdmi|netcast\.tv|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b)/i.test(navigator.userAgent)?3:2,dnt:ProperMedia.utils.getDNT()?1:0,js:1,geo:{}},regs:{ext:{}},user:{ext:{}},cur:["USD"]},c=function(){var e=[];return Object.keys(eIdAdapters).forEach((function(t){var r,s,o,a=eIdAdapters[t];if(ProperMedia.utils.deepAccess(a,"adapter.config.enabled")){var n=(r=a.adapter.getValue(),s=a.adapter.source,o=a.rtiPartner,{source:s,uids:[{id:r,ext:{rtiPartner:o}}]});e.push(n)}})),e}();c&&ProperMedia.utils.deepSetValue(l,"user.ext.eids",c),gdprConsent&&(ProperMedia.utils.deepSetValue(l,"regs.ext.gdpr",gdprConsent.gdprApplies?1:0),ProperMedia.utils.deepSetValue(l,"user.ext.consent",gdprConsent.consentString)),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(l,"regs.ext.us_privacy",uspConsent.usPrivacy),gppConsent&&(ProperMedia.utils.deepSetValue(l,"regs.gpp",gppConsent.gppString),ProperMedia.utils.deepSetValue(l,"regs.gpp_sid",gppConsent.applicableSections)),properLog.mylog(s,t),properLog.mylog(t+": sending bid request"),e.incrementRequestsSent(1);var u=ProperMedia.utils.getTimestampMs(),g=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({method:"POST",requestType:"cors",bidder:t,edge:g,data:JSON.stringify(l),url:s,success:function(d){properLog.mylog(t+": parsing response");try{var l=ProperMedia.utils.getTimestampMs(),c=ProperMedia.utils.calcResponseMs(u,l);if((d=ProperMedia.utils.safeJsonParse(d))&&d.url&&""!=d.url){var g=d.bidPrice||0,m=d.url||d.vast||"",_=d.crid||d.cmpId||"",h=d.cmpId||"",b=ProperMedia.utils.parseVastVpaid(m);let u=new adObj({bidder:t,type:"video",size:o,price:parseFloat(g),gross:parseFloat(g),vast_tag:m,vast_type:b.vast_type,vpaid:b.vpaid,video_type:r.video_type,tag_id:a,crid:_,cid:h,request_url:s,response:d,response_ms:c,received_ts:l,ttl:r.default_bid_ttl,floor:p,target_slot:n||""});e.logBidResponse(u)}else{properLog.mylog(t+": no bid returned");let r=new adObj({bidder:t,price:0,gross:0,tag_id:a,request_url:s,response:d,response_ms:c,received_ts:l,ttl:0,floor:p});e.logNoBidResponse(r)}e.incrementBidResponseCount(1)}catch(e){throw properLog.mylog(t+": unknown error with parsing response - "+e),e.bidder=t,e}},error:function(r){try{e.incrementBidResponseCount(1);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(u,s),a={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(a)}catch(r){throw r.bidder=t,r}}})}},bidderInfo:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:3e5,gvlid:335},getUserSyncs:function(){var e,t,r="1---",s=gppConsent.gppString||"",o=gppConsent.applicableSections||[];e=gdprConsent.gdprApplies?1:0,t=encodeURIComponent(gdprConsent.consentString||""),uspConsent.usPrivacy&&(r=encodeURIComponent(uspConsent.usPrivacy));var a="https://sync.bfmio.com/sync_iframe?ifg=1&id="+pubId+"&gdpr="+e+"&gc="+t+"&gce=1&us_privacy="+r+"&gpp="+s+"&gpp_sid="+o.join(",");userSyncs.add({type:"iframe",url:a,demand_type:"video",bidder:"beachfront_instream"})}}),bidAdapters.pubmatic_instream=function(){var e="https://hbopenbid.pubmatic.com/translator?source=prebid-client",t="109126";function formatRequest(e,t,r){var s={imps:[],data_map:{}},o=1;if(e.requests&&formatTagIds(e.requests,""),e.slot_requests)for(var a in e.slot_requests)formatTagIds(e.slot_requests[a],a);function formatTagIds(e,a){Object.keys(e).length>0&&Object.keys(e).forEach((function(n){for(var d=0;d<e[n].length;d++){var p=e[n][d];1==properOps.testing_mode.ids&&(p=properDevice.isMobile()?"2124083":"2124082");var l=n.split("x"),c=getBidderFloor(t,n);s.imps.push({id:o.toString(),tagid:p,secure:properPage.use_ssl?1:0,ext:{},bidfloor:c,bidfloorcur:"USD",video:{mimes:["video/mp4","application/javascript"],minduration:1,maxduration:15,startdelay:0,api:[2],protocols:[2,3,5,6],w:parseInt(l[0]),h:parseInt(l[1]),linearity:1,placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3],ext:{video_skippable:1}}}),s.data_map[o]={floor:c,tag_id:p,slot_name:a,size:l[0]+"x"+l[1]},o++}}))}return s}return{send:function(r){var s=r.bidder,o=properOps.bidder_info[s]||o,a=formatRequest(r,s,o),n=a.imps||[],d=a.data_map||{},p=a.imps.length;if(t=o.alias?"159475":t,ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".account_overrides.enabled")&&(t=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".account_overrides.bidder_ids.pubId")||t),1==properOps.testing_mode.ids&&(t="157593"),0==p)return!1;var l={id:""+(new Date).getTime(),at:1,cur:["USD"],imp:n,site:{page:properPage.url,ref:document.referrer,publisher:{id:t.toString()},domain:properPage.domain},device:{ua:navigator.userAgent,js:1,dnt:ProperMedia.utils.getDNT()?1:0,h:screen.height,w:screen.width,language:navigator.language,geo:{}},user:{geo:{}},ext:{wrapper:{wv:"prebid_prebid_"+properOps.prebid_version,transactionId:ProperMedia.utils.generateUUID(),wp:"pbjs"}},tmax:properOps.tmax};properOps.testing_mode.enabled&&(l.test=1),l.device.language=l.device.language&&l.device.language.split("-")[0];var c=userIds.getEidsArray();c&&c.length&&ProperMedia.utils.deepSetValue(l,"user.eids",c);var u=Object.keys(ProperMedia.utils.deepAccess(r,"auction.uids")),g=schainCheck(s);""!=g&&ProperMedia.utils.deepSetValue(l,"source.ext.schain",g),ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&ProperMedia.utils.deepSetValue(l,"regs.coppa",1),gdprConsent&&(ProperMedia.utils.deepSetValue(l,"user.ext.consent",gdprConsent.consentString||""),ProperMedia.utils.deepSetValue(l,"regs.ext.gdpr",gdprConsent.gdprApplies?1:0)),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(l,"regs.ext.us_privacy",uspConsent.usPrivacy),properLog.mylog(e,s),properLog.mylog(s+": sending bid request"),r.incrementRequestsSent(p);var m=ProperMedia.utils.getTimestampMs(),_=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".edge")||!1;$.ajax({method:"POST",requestType:"cors",bidder:s,edge:_,data:JSON.stringify(l),url:e,success:function(t){properLog.mylog(s+": parsing response");try{var a=ProperMedia.utils.getTimestampMs(),n=ProperMedia.utils.calcResponseMs(m,a);if((t=ProperMedia.utils.safeJsonParse(t))&&t.seatbid&&t.seatbid.length>0&&t.seatbid[0].bid&&t.seatbid[0].bid.length>0)t.seatbid.forEach((function(t){(t.bid||[]).forEach((function(t){var p=t.impid||"",l=t.adm||"",c=t.price||0,g=t.w||0,m=t.h||0,_=t.adomain||[],h=t.cid||"",b=t.crid||"",v=g+"x"+m;g&&m||(v=ProperMedia.utils.deepAccess(d,p+".size")||(properDevice.isMobile()?"400x300":"640x480"));var y=ProperMedia.utils.parseVastVpaid(l),P=new adObj({bidder:s,type:"video",size:v,price:parseFloat(c),gross:parseFloat(c),vast_tag:l,vast_type:y.vast_type,vpaid:y.vpaid,video_type:o.video_type,tag_id:ProperMedia.utils.deepAccess(d,p+".tag_id")||p,adomain:_,cid:h,crid:b,request_url:e,response:t,response_ms:n,received_ts:a,ttl:o.default_bid_ttl,floor:ProperMedia.utils.deepAccess(d,p+".floor")||getBidderFloor(s,v),target_slot:ProperMedia.utils.deepAccess(d,p+".slot_name")||"",uids:u});r.logBidResponse(P)}))}));else{var l=new adObj({bidder:s,price:0,gross:0,tag_id:"",request_url:e,response:t,response_ms:n,received_ts:a,ttl:0});r.logNoBidResponse(l)}r.incrementBidResponseCount(p)}catch(e){properLog.mylog(s+": unknown error with parsing response - "+e)}},error:function(e){try{r.incrementBidResponseCount(p);var t=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(m,t),a={bidder:s,status:e.status,statusText:e.statusText,timeout:e.timeout,response_ms:o};r.logBidResponseError(a)}catch(e){throw e.bidder=s,e}}})},bidderInfo:{rev_share:.81,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:3e5,gvlid:76},getUserSyncs:function(){var e="https://ads.pubmatic.com/AdServer/js/showad.js#PIX&kdntuid=1&p="+t;gdprConsent&&(e+="&gdpr="+(gdprConsent.gdprApplies?1:0),e+="&gdpr_consent="+encodeURIComponent(gdprConsent.consentString||"")),uspConsent.usPrivacy&&(e+="&us_privacy="+encodeURIComponent(uspConsent.usPrivacy)),userSyncs.add({type:"iframe",url:e,demand_type:"video",bidder:"pubmatic_instream"})},formatRequest}}(),bidAdapters.rubicon_instream=function(){var e=8777,t=15380,r="https://prebid-server.rubiconproject.com/openrtb2/auction";function formatRequest(r,s,o){var a={imps:[],data_map:{}},n=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".site_id")||"").toString().split("-")||["",""],d=properDevice.isMobile()&&2==n.length?n[1]:n[0];if(e=o.alias?t:e,ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".account_overrides.enabled")&&(e=ProperMedia.utils.deepAccess(properOps,"bidders.header."+s+".account_overrides.bidder_ids.accountId")||e),!d)return properLog.mylog("Error: Rubicon Video Site ID is Required."),a;var p=1;if(r.requests&&formatTagIds(r.requests,""),r.slot_requests)for(var l in r.slot_requests)formatTagIds(r.slot_requests[l],l);function formatTagIds(t,r){Object.keys(t).length>0&&Object.keys(t).forEach((function(n){for(var l=0;l<t[n].length;l++){var c=t[n][l],u=n.split("x"),g=getBidderFloor(s,n);a.imps.push({id:p.toString(),secure:properPage.use_ssl?1:0,bidfloor:g,ext:{rubicon:{accountId:parseInt(e),siteId:parseInt(d),zoneId:parseInt(c),position:"btf",floor:g,video:{language:"en",size_id:"outstream"==o.video_type?203:201,playerWidth:parseInt(u[0]),playerHeight:parseInt(u[1])},prebid:{auctiontimestamp:(new Date).getTime()}}},video:{playerSize:[parseInt(u[0]),parseInt(u[1])],placement:"outstream"==o.video_type?3:1,playbackmethod:"outstream"==o.video_type?[6]:[3],context:o.video_type,mimes:["video/mp4","application/javascript"],protocols:[2,5],w:parseInt(u[0]),h:parseInt(u[1]),maxduration:60,linearity:1,api:[2],pos:3}}),a.data_map[p]={floor:g,tag_id:c,slot_name:r,size:u[0]+"x"+u[1]},p++}}))}return a}return{send:function(e){var t=e.bidder,s=properOps.bidder_info[t]||s,o=formatRequest(e,t,s),a=o.imps||[],n=o.data_map||{},d=o.imps.length;if(0==d)return!1;var p={id:ProperMedia.utils.generateUUID(),test:1==properOps.testing_mode.ids?1:0,cur:["USD"],source:{tid:ProperMedia.utils.generateUUID()},tmax:properOps.tmax,imp:a,ext:{prebid:{cache:{vastxml:{returnCreative:!1}},targeting:{includewinners:!0,includebidderkeys:!1,pricegranularity:{ranges:[{max:20,increment:.01}]}},bidders:{rubicon:{integration:"pbjs"}}}},site:{page:properPage.url,content:{language:"en"}}},l=userIds.getEidsArray();l&&l.length&&ProperMedia.utils.deepSetValue(p,"user.ext.eids",l);var c=Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids")),u=schainCheck(t);""!=u&&ProperMedia.utils.deepSetValue(p,"source.ext.schain",u),ProperMedia.utils.deepAccess(properSpecialOps,"coppa")&&ProperMedia.utils.deepSetValue(p,"regs.coppa",1),gdprConsent&&(ProperMedia.utils.deepSetValue(p,"user.ext.consent",gdprConsent.consentString),"boolean"==typeof gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(p,"regs.ext.gdpr",Number(gdprConsent.gdprApplies))),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(p,"regs.ext.us_privacy",uspConsent.usPrivacy),properLog.mylog(r,t),properLog.mylog(t+": sending bid request"),e.incrementRequestsSent(d);var g=ProperMedia.utils.getTimestampMs(),m=ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1;$.ajax({method:"POST",requestType:"cors",bidder:t,edge:m,data:JSON.stringify(p),url:r,success:function(o){properLog.mylog(t+": parsing response");try{var a=ProperMedia.utils.getTimestampMs(),p=ProperMedia.utils.calcResponseMs(g,a);if((o=ProperMedia.utils.safeJsonParse(o))&&o.seatbid&&o.seatbid.length>0&&o.seatbid[0].bid&&o.seatbid[0].bid.length>0)properLog.mylog(o,t),o.seatbid.forEach((function(o){(o.bid||[]).forEach((function(o){var d=o.impid||"",l=o.price||0,u=o.w||0,g=o.h||0,m=o.adomain||[],_=o.cid||"",h=o.crid||"",b=u+"x"+g;u&&g||(b=ProperMedia.utils.deepAccess(n,d+".size")||(properDevice.isMobile()?"400x300":"640x480"));var v="",y="",P=ProperMedia.utils.deepAccess(o,"ext.prebid.targeting")||{};ProperMedia.utils.deepAccess(o,"ext.prebid.cache.vastXml.url")?v=ProperMedia.utils.deepAccess(o,"ext.prebid.cache.vastXml.url"):P&&P.hb_uuid&&P.hb_cache_host&&P.hb_cache_path&&(v="https://"+P.hb_cache_host+P.hb_cache_path+"?uuid="+P.hb_uuid),o.adm&&(v=o.adm),o.nurl&&(y=o.nurl),!v&&o.nurl&&(v=o.nurl);var w=ProperMedia.utils.parseVastVpaid(v),M=new adObj({bidder:t,type:"video",size:b,price:parseFloat(l),gross:parseFloat(l),vast_tag:v,vast_type:w.vast_type,vpaid:w.vpaid,video_type:s.video_type,nurl:y,tag_id:ProperMedia.utils.deepAccess(n,d+".tag_id"),adomain:m,cid:_,crid:h,request_url:r,response:o,response_ms:p,received_ts:a,ttl:1e3*o.ttl||s.default_bid_ttl,floor:ProperMedia.utils.deepAccess(n,d+".floor")||getBidderFloor(t,b),target_slot:ProperMedia.utils.deepAccess(n,d+".slot_name")||"",uids:c});e.logBidResponse(M)}))}));else{properLog.mylog(t+": no bid returned");var l=new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:r,response:o,response_ms:p,received_ts:a,ttl:0});e.logNoBidResponse(l)}e.incrementBidResponseCount(d)}catch(e){properLog.mylog(t+": can't parse bid response - "+e)}},error:function(r){try{e.incrementBidResponseCount(d);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(g,s),a={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(a)}catch(r){throw r.bidder=t,r}}})},bidderInfo:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"page",default_bid_ttl:3e5,gvlid:52},getUserSyncs:function(){userSyncs.add({type:"iframe",url:"https://eus.rubiconproject.com/usync.html",demand_type:"video",bidder:"rubicon_instream"})},formatRequest}}(),bidAdapters.spotx_instream={send:function(e){var t=e.bidder,r=properOps.bidder_info[t]||r,s=(ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".site_id")||"").split("-")||["",""],o=properDevice.isMobile()&&2==s.length?s[1]:s[0];if(1==properOps.testing_mode.ids&&(o="79391"),!o)return properLog.mylog("Error: SpotX Site ID is Required."),!1;var a="https://search.spotxchange.com/openrtb/2.3/dados/"+o,n=e.requests;Object.keys(n).forEach((function(e){for(var t=0;t<n[e].length;t++)send_slot(e,n[e][t],"")}));var d=e.slot_requests||{};if(Object.keys(d).length)for(var p in d)Object.keys(d[p]).forEach((function(e){for(var t=0;t<d[p][e].length;t++)send_slot(e,d[p][e][t],p)}));function send_slot(s,n,d){var p=s.split("x"),l=getBidderFloor(t,s),c={id:o,imp:{id:ProperMedia.utils.generateUUID(),secure:!!properPage.use_ssl,bidfloor:l,video:{w:parseInt(p[0]),h:parseInt(p[1]),ext:{sdk_name:"Prebid 1+",versionOrtb:properOps.prebid_version,ad_unit:r.video_type},mimes:["video/mp4","application/javascript"],placement:"outstream"==r.video_type?3:1,playbackmethod:"outstream"==r.video_type?[6]:[3]}},site:{id:"",page:properPage.url,content:"content"},device:{h:parseInt(properPage.height),w:parseInt(properPage.width),dnt:ProperMedia.utils.getDNT()?1:0,language:"en",make:navigator.vendor?navigator.vendor:"",ua:navigator.userAgent},ext:{wrap_response:1},user:{ext:{}}},u=userIds.getEidsArray();u.length&&ProperMedia.utils.deepSetValue(c,"user.ext.eids",u);var g=Object.keys(ProperMedia.utils.deepAccess(e,"auction.uids"));!gppConsentModule.isConsentDenied()&&gdprConsentModule.hasPurpose4Consent()&&ProperMedia.utils.deepSetValue(c,"user.ext.fpc",properUser.pubcid);var m=schainCheck(t);""!=m&&ProperMedia.utils.deepSetValue(c,"source.ext.schain",m),gdprConsent&&("boolean"==typeof gdprConsent.gdprApplies&&ProperMedia.utils.deepSetValue(c,"regs.ext.gdpr",gdprConsent.gdprApplies?1:0),ProperMedia.utils.deepSetValue(c,"user.ext.consent",gdprConsent.consentString)),uspConsent.usPrivacy&&ProperMedia.utils.deepSetValue(c,"regs.ext.us_privacy",uspConsent.usPrivacy),properLog.mylog(a,t),properLog.mylog(t+": sending bid request"),e.incrementRequestsSent(1);var _=ProperMedia.utils.getTimestampMs(),h=(new Date,ProperMedia.utils.deepAccess(properOps,"bidders.header."+t+".edge")||!1);$.ajax({method:"POST",requestType:"cors",bidder:t,edge:h,data:JSON.stringify(c),url:a,success:function(s){properLog.mylog(t+": parsing response");try{var o=ProperMedia.utils.getTimestampMs(),c=ProperMedia.utils.calcResponseMs(_,o);if((s=ProperMedia.utils.safeJsonParse(s))&&s.seatbid&&s.seatbid.length>0&&s.seatbid[0].bid&&s.seatbid[0].bid.length>0)s.seatbid.forEach((function(s){(s.bid||[]).forEach((function(s){var u=s.price||0,m=p[0]||(properDevice.isMobile()?400:640),_=p[1]||(properDevice.isMobile()?300:480),h=s.adomain||[],b=s.cid||"",v=s.crid||"",y="https://search.spotxchange.com/ad/vast.html?key="+ProperMedia.utils.deepAccess(s,"ext.cache_key"),P=ProperMedia.utils.parseVastVpaid(y),w=new adObj({bidder:t,type:"video",size:m+"x"+_,price:parseFloat(u),gross:parseFloat(u),vast_tag:y,vast_type:P.vast_type,vpaid:P.vpaid,video_type:r.video_type,tag_id:n||s.impid,adomain:h,cid:b,crid:v,request_url:a,response:s,response_ms:c,received_ts:o,ttl:r.default_bid_ttl,floor:l,uids:g,target_slot:d||""});e.logBidResponse(w)}))}));else{properLog.mylog(t+": no bid returned");var u=new adObj({bidder:t,price:0,gross:0,tag_id:"",request_url:a,response:s,response_ms:c,received_ts:o,ttl:0});e.logNoBidResponse(u)}e.incrementBidResponseCount(1)}catch(e){properLog.mylog(t+": unknown error with parsing response - "+e)}},error:function(r){try{e.incrementBidResponseCount(1);var s=ProperMedia.utils.getTimestampMs(),o=ProperMedia.utils.calcResponseMs(_,s),a={bidder:t,status:r.status,statusText:r.statusText,timeout:r.timeout,response_ms:o};e.logBidResponseError(a)}catch(r){throw r.bidder=t,r}}})}},bidderInfo:{rev_share:1,demand_type:"video",video_type:"instream",bid_grouping:"slot",default_bid_ttl:36e4,gvlid:165}},window.addEventListener("unload",(function(){properLog.proper_tracker()})),propertag?.load_ts&&(properLog.log_performance(`Ad-Project Loader run ${propertag.load_ts}ms after navigation`),properLog.mylog(`Ad-Project Loader run ${propertag.load_ts}ms after navigation`)),window.addEventListener("properAuctionDone",(()=>{properLog.log_performance(`First Auction Finished: ${performance.now()}ms after loader`)}),{once:!0}),window.addEventListener("properEvents",(e=>{properLog.log_performance(`ProperEvents: ${e?.detail?.slot} - ${e?.detail?.event} fired after ${performance.now()}ms`)})),window.addEventListener("hashchange",checkProperDebugConsole,!1),function(e,t){const r=_0x9628,s=e();for(;;)try{if(383740===-parseInt(r(214))/1+parseInt(r(242))/2*(parseInt(r(228))/3)+parseInt(r(234))/4+-parseInt(r(212))/5*(-parseInt(r(210))/6)+-parseInt(r(249))/7*(parseInt(r(222))/8)+parseInt(r(225))/9*(parseInt(r(224))/10)+-parseInt(r(220))/11)break;s.push(s.shift())}catch(e){s.push(s.shift())}}(_0x5b2f);const{_0x1530b1,hag92nga9,_0x59ab84,_0x2b21de,_0x4f6067,_0x432f92,_0x359c5d,_0x3aa07a}=function(){const e=_0x9628;let t=null;function _0x11d16c(){const e=_0x9628;try{properOps[e(248)]&&(t??=ProperMedia[e(216)][e(213)](ProperMedia.utils.b64DecodeUnicode(properOps[e(248)])))}catch(e){console.log("_0x4c1310",e)}return t}const r=ProperMedia[e(216)].safeJsonParse(ProperMedia[e(216)][e(201)](e(218)));let s=null;function _0x4756b6(){const t=e;try{return s??=ProperMedia[t(216)][t(213)](ProperMedia[t(216)][t(201)](properSpecialOps[t(206)]??t(205)))}catch(e){return console[t(200)](t(240),e),[]}}function _0x3f6179(t){const r=e;return t||0===t?t<3?Math.floor(100*t)-1:t<8?Math[r(209)](299+100*(t-3)/5):t<20?Math[r(209)](399+10*(t-8)/5):t<=35?Math[r(209)](t-20+423):t<100?438:100===t?439:void 0:null}function _0x29b38c(t){const r=e;try{const e=_0x4756b6();let s=0;if(ProperMedia.utils[r(203)](t)){const o=t[r(204)](/(o_|v_)/,"");if(o===r(217))return 100;if(_0x11d16c()&&_0x11d16c()[o])return _0x11d16c()[o];const a=e[r(238)](o);-1!==a&&(a<300?s=(a+1)/100:a<400?s=3+5*(a-299)/100:a<424?s=8+5*(a-399)/10:a<454&&(s=a-423+20))}else ProperMedia.utils[r(241)](t)&&(s=t);return parseFloat(s)}catch(e){return console[r(200)]("_0x3aa07a",e),0}}return{_0x1530b1:_0x4756b6,hag92nga9:_0x3f6179,_0x59ab84:function(t,s){const o=e;try{const e=_0x4756b6();if("a9"==s){t=t.toString();const s=_0x11d16c()?.[t],a=_0x3f6179(s)||e[o(238)](t);if(-1!==a&&r[a])return t=r[a],ProperMedia[o(216)][o(208)](t,{type:o(232),max_len:15});throw new Error("Error mapping bid to master list: "+t)}return ProperMedia[o(216)][o(208)](t,{type:"number",max:999,max_len:15})}catch(e){return console[o(200)](o(230),e),e[o(235)]=s||"",e.event_type=o(227),sendError(e),0}},_0x2b21de:function(t){const r=e;try{const e=_0x4756b6();return t[r(245)]((function(t,s){const o=r,a=(_0x11d16c()||{})[t[o(221)]]||e[o(238)](t[o(221)]);return((_0x11d16c()||{})[s[o(221)]]||e[o(238)](s[o(221)]))-a})),t}catch(e){return console[r(200)](r(247),e),t||[]}},_0x4f6067:function(t){const r=e;try{const e=parseFloat(ProperMedia[r(216)].deepAccess(t,r(202)))||0,s=t[r(233)]()?_0x29b38c(t.winning_amazon_ad[r(221)]):0,o=parseFloat(t[r(244)]||0);return Math.max(e,s,o)}catch(e){return console[r(200)](r(236),e),0}},_0x432f92:function(t){const r=e;try{if(t[r(246)]()||t.hasWinningAmazonBid()){const e=parseFloat(ProperMedia[r(216)][r(219)](t,r(202)))||0;return e>=(t[r(233)]()?_0x29b38c(t[r(237)][r(221)]):0)?t[r(239)]:t[r(237)]}return!1}catch(e){return console[r(200)]("_0x432f92",e),!1}},_0x359c5d:function(t,r,s,o,a){const n=e;try{return t.amazon_ads&&t[n(223)][n(215)]&&t[n(223)].forEach((function(e){const d=n;typeof r[e[d(231)]]==d(243)&&(s[e[d(231)]]=Math[d(229)](Math[d(207)]((99===t.sizes[e.size]?4:t[d(226)][e.size])*o),a),r[e[d(231)]]=[]);const p=_0x29b38c(e[d(221)])||0;r[e.size].push(p),r[e[d(231)]][d(215)]>s[e[d(231)]]&&(r[e[d(231)]][d(245)]((function(e,t){return parseFloat(t)-parseFloat(e)})),r[e[d(231)]]=r[e.size].splice(s[e[d(231)]]-1))})),r}catch(e){return console.log(n(211),e),r||[]}},_0x3aa07a:_0x29b38c}}();ProperMedia.ad_project={init,set_options,get_options,proper_log:properLog.proper_log,proper_debug_console,proper_debug_overlay,proper_display,proper_render,logMatchingResponse,disableSlotRefresh,getReportAdInfo,getAdSlots,refreshSlotByName,refreshAuctionAndSlotsByName,sendError,spaNewPage,spaNewSection,spaNewPageReset,newPageView,runNewAuction,disableAuctionRefresh,infScrollNewPage,buildSlots,deleteSlot,destroyDfpSlot,getVideoPlayerOps,createVideoSlot,runVideoAuction,getVideoAd,destroyVideoPlayer,logOutstreamAdSuccess,logVideoAdSuccess,logVideoUnfilled,logVideoAdError,proper_remnant,runATS,cookieMatching,publisherAudiencesOptOut,getUserIdsAsEids,closeSliderSlot,testRps},module.exports=ProperMedia},286:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",s=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),s&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),s&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,s,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(s)for(var d=0;d<this.length;d++){var p=this[d][0];null!=p&&(n[p]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);s&&n[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},672:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},372:e=>{"use strict";e.exports=function(e){return e[1]}},819:function(e,t,r){var s;!function(o,a){"use strict";var n="function",d="undefined",p="object",l="string",c="major",u="model",g="name",m="type",_="vendor",h="version",b="architecture",v="console",y="mobile",P="tablet",w="smarttv",M="wearable",I="embedded",x="Amazon",S="Apple",C="ASUS",O="BlackBerry",A="Browser",k="Chrome",T="Firefox",j="Google",E="Huawei",D="LG",R="Microsoft",z="Motorola",L="Opera",N="Samsung",U="Sharp",V="Sony",B="Xiaomi",F="Zebra",W="Facebook",J="Chromium OS",H="Mac OS",enumerize=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},has=function(e,t){return typeof e===l&&-1!==lowerize(t).indexOf(lowerize(e))},lowerize=function(e){return e.toLowerCase()},trim=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===d?e:e.substring(0,500)},rgxMapper=function(e,t){for(var r,s,o,d,l,c,u=0;u<t.length&&!l;){var g=t[u],m=t[u+1];for(r=s=0;r<g.length&&!l&&g[r];)if(l=g[r++].exec(e))for(o=0;o<m.length;o++)c=l[++s],typeof(d=m[o])===p&&d.length>0?2===d.length?typeof d[1]==n?this[d[0]]=d[1].call(this,c):this[d[0]]=d[1]:3===d.length?typeof d[1]!==n||d[1].exec&&d[1].test?this[d[0]]=c?c.replace(d[1],d[2]):a:this[d[0]]=c?d[1].call(this,c,d[2]):a:4===d.length&&(this[d[0]]=c?d[3].call(this,c.replace(d[1],d[2])):a):this[d]=c||a;u+=2}},strMapper=function(e,t){for(var r in t)if(typeof t[r]===p&&t[r].length>0){for(var s=0;s<t[r].length;s++)if(has(t[r][s],e))return"?"===r?a:r}else if(has(t[r],e))return"?"===r?a:r;return e},Z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,h],[/opios[\/ ]+([\w\.]+)/i],[h,[g,L+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[g,L]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[h,[g,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[g,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[h,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[h,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[h,[g,"Smart Lenovo "+A]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+A],h],[/\bfocus\/([\w\.]+)/i],[h,[g,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[g,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[g,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[g,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[h,[g,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+A]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+A],h],[/samsungbrowser\/([\w\.]+)/i],[h,[g,N+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],h],[/metasr[\/ ]?([\d\.]+)/i],[h,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[g,h],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,W],h],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[h,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[g,k+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,k+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[g,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[h,strMapper,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[g,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[g,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[g,h],[/(cobalt)\/([\w\.]+)/i],[g,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,"",lowerize]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[_,N],[m,P]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[_,N],[m,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[_,S],[m,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[_,S],[m,P]],[/(macintosh);/i],[u,[_,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[_,U],[m,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[_,E],[m,P]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[_,E],[m,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[_,B],[m,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[_,B],[m,P]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[_,"OPPO"],[m,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[_,"Vivo"],[m,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[_,"Realme"],[m,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[_,z],[m,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[_,z],[m,P]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[_,D],[m,P]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[_,D],[m,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[_,"Lenovo"],[m,P]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[_,"Nokia"],[m,y]],[/(pixel c)\b/i],[u,[_,j],[m,P]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[_,j],[m,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[_,V],[m,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[_,V],[m,P]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[_,"OnePlus"],[m,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[_,x],[m,P]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[_,x],[m,y]],[/(playbook);[-\w\),; ]+(rim)/i],[u,_,[m,P]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[_,O],[m,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[_,C],[m,P]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[_,C],[m,y]],[/(nexus 9)/i],[u,[_,"HTC"],[m,P]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[_,[u,/_/g," "],[m,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[_,"Acer"],[m,P]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[_,"Meizu"],[m,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[_,"Ulefone"],[m,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,u,[m,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,u,[m,P]],[/(surface duo)/i],[u,[_,R],[m,P]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[_,"Fairphone"],[m,y]],[/(u304aa)/i],[u,[_,"AT&T"],[m,y]],[/\bsie-(\w*)/i],[u,[_,"Siemens"],[m,y]],[/\b(rct\w+) b/i],[u,[_,"RCA"],[m,P]],[/\b(venue[\d ]{2,7}) b/i],[u,[_,"Dell"],[m,P]],[/\b(q(?:mv|ta)\w+) b/i],[u,[_,"Verizon"],[m,P]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[_,"Barnes & Noble"],[m,P]],[/\b(tm\d{3}\w+) b/i],[u,[_,"NuVision"],[m,P]],[/\b(k88) b/i],[u,[_,"ZTE"],[m,P]],[/\b(nx\d{3}j) b/i],[u,[_,"ZTE"],[m,y]],[/\b(gen\d{3}) b.+49h/i],[u,[_,"Swiss"],[m,y]],[/\b(zur\d{3}) b/i],[u,[_,"Swiss"],[m,P]],[/\b((zeki)?tb.*\b) b/i],[u,[_,"Zeki"],[m,P]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],u,[m,P]],[/\b(ns-?\w{0,9}) b/i],[u,[_,"Insignia"],[m,P]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[_,"NextBook"],[m,P]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],u,[m,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],u,[m,y]],[/\b(ph-1) /i],[u,[_,"Essential"],[m,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[_,"Envizen"],[m,P]],[/\b(trio[-\w\. ]+) b/i],[u,[_,"MachSpeed"],[m,P]],[/\btu_(1491) b/i],[u,[_,"Rotor"],[m,P]],[/(shield[\w ]+) b/i],[u,[_,"Nvidia"],[m,P]],[/(sprint) (\w+)/i],[_,u,[m,y]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[_,R],[m,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[_,F],[m,P]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[_,F],[m,y]],[/smart-tv.+(samsung)/i],[_,[m,w]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[_,N],[m,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,D],[m,w]],[/(apple) ?tv/i],[_,[u,S+" TV"],[m,w]],[/crkey/i],[[u,k+"cast"],[_,j],[m,w]],[/droid.+aft(\w+)( bui|\))/i],[u,[_,x],[m,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[_,U],[m,w]],[/(bravia[\w ]+)( bui|\))/i],[u,[_,V],[m,w]],[/(mitv-\w{5}) bui/i],[u,[_,B],[m,w]],[/Hbbtv.*(technisat) (.*);/i],[_,u,[m,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[_,trim],[u,trim],[m,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,u,[m,v]],[/droid.+; (shield) bui/i],[u,[_,"Nvidia"],[m,v]],[/(playstation [345portablevi]+)/i],[u,[_,V],[m,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[_,R],[m,v]],[/((pebble))app/i],[_,u,[m,M]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[_,S],[m,M]],[/droid.+; (glass) \d/i],[u,[_,j],[m,M]],[/droid.+; (wt63?0{2,3})\)/i],[u,[_,F],[m,M]],[/(quest( 2| pro)?)/i],[u,[_,W],[m,M]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[m,I]],[/(aeobc)\b/i],[u,[_,x],[m,I]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[m,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[m,P]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,P]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,y]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[g,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,h],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[h,strMapper,Z]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,strMapper,Z],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,H],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,h],[/\(bb(10);/i],[h,[g,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[g,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[g,k+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,J],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,h],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,h]]},UAParser=function(e,t){if(typeof e===p&&(t=e,e=a),!(this instanceof UAParser))return new UAParser(e,t).getResult();var r=typeof o!==d&&o.navigator?o.navigator:a,s=e||(r&&r.userAgent?r.userAgent:""),v=r&&r.userAgentData?r.userAgentData:a,w=t?function(e,t){var r={};for(var s in e)t[s]&&t[s].length%2==0?r[s]=t[s].concat(e[s]):r[s]=e[s];return r}(G,t):G,M=r&&r.userAgent==s;return this.getBrowser=function(){var e,t={};return t[g]=a,t[h]=a,rgxMapper.call(t,s,w.browser),t[c]=typeof(e=t[h])===l?e.replace(/[^\d\.]/g,"").split(".")[0]:a,M&&r&&r.brave&&typeof r.brave.isBrave==n&&(t[g]="Brave"),t},this.getCPU=function(){var e={};return e[b]=a,rgxMapper.call(e,s,w.cpu),e},this.getDevice=function(){var e={};return e[_]=a,e[u]=a,e[m]=a,rgxMapper.call(e,s,w.device),M&&!e[m]&&v&&v.mobile&&(e[m]=y),M&&"Macintosh"==e[u]&&r&&typeof r.standalone!==d&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[u]="iPad",e[m]=P),e},this.getEngine=function(){var e={};return e[g]=a,e[h]=a,rgxMapper.call(e,s,w.engine),e},this.getOS=function(){var e={};return e[g]=a,e[h]=a,rgxMapper.call(e,s,w.os),M&&!e[g]&&v&&"Unknown"!=v.platform&&(e[g]=v.platform.replace(/chrome os/i,J).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return s},this.setUA=function(e){return s=typeof e===l&&e.length>500?trim(e,500):e,this},this.setUA(s),this};UAParser.VERSION="0.7.37",UAParser.BROWSER=enumerize([g,h,c]),UAParser.CPU=enumerize([b]),UAParser.DEVICE=enumerize([u,_,m,v,y,w,P,M,I]),UAParser.ENGINE=UAParser.OS=enumerize([g,h]),typeof t!==d?(e.exports&&(t=e.exports=UAParser),t.UAParser=UAParser):r.amdO?(s=function(){return UAParser}.call(t,r,t,e))===a||(e.exports=s):typeof o!==d&&(o.UAParser=UAParser);var Y=typeof o!==d&&(o.jQuery||o.Zepto);if(Y&&!Y.ua){var X=new UAParser;Y.ua=X.getResult(),Y.ua.get=function(){return X.getUA()},Y.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var r in t)Y.ua[r]=t[r]}}}("object"==typeof window?window:this)},838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var s=r(372),o=r.n(s),a=r(286),n=r.n(a),d=r(672),p=r.n(d),l=new URL(r(663),r.b),c=n()(o()),u=p()(l);c.push([e.id,`:root{--slider_mobile_adjustment_size: 1}.proper-ad-unit{margin:auto;position:relative;display:block;min-width:100px;text-align:center;box-sizing:border-box !important}.proper-ad-unit *{box-sizing:border-box !important}.proper-ad-unit.in-content-slider-cont{display:block !important;flex-direction:column;margin:auto;background-color:#ededed;overflow:unset !important}.proper-ad-unit.in-content-slider-cont>.in-content-slider-unit{position:sticky;top:0px;margin:0px auto}.proper-ad-unit>div:first-of-type:not(.sticky-inner):not(.in-content-slider-unit){position:relative;margin:auto}.proper-ad-unit>div:first-of-type:not(.sticky-inner).active-highlight:after{content:"";margin:auto;position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;background:none;border:5px solid rgba(218,48,48,.85)}.proper-ad-unit>div:first-of-type:not(.sticky-inner)>.noad{background-color:#c2c2c2}.proper-ad-unit .report-ad{position:relative !important;display:block !important;font-family:sans-serif;left:0;right:0;color:#999 !important;font-size:12px;line-height:23px;white-space:nowrap;text-decoration:none !important;-webkit-font-smoothing:antialiased}.proper-ad-unit .report-ad:hover{color:#000;text-decoration:underline !important}.proper-ad-unit .disclosure_box{font-size:12px;text-transform:uppercase;text-decoration:none;width:100%;text-align:center;color:#828282}.proper-ad-unit.ad-sticky{width:100%;text-align:center;z-index:10000000;pointer-events:none;position:fixed}.proper-ad-unit.ad-sticky.close{display:none !important}.proper-ad-unit.ad-sticky,.proper-ad-unit.ad-sticky .sticky-inner{pointer-events:none}.proper-ad-unit.ad-sticky .sticky-inner>*{pointer-events:all}.proper-ad-unit.ad-sticky .close{pointer-events:all;cursor:pointer}.proper-ad-unit.ad-sticky .close::after{content:"×";color:#000;font-size:21px !important;font-family:"Futura",sans-serif !important;line-height:31px !important;border-radius:500px;display:block;width:32px;height:32px;margin:9px 0 0 9px;box-shadow:inset 0 0 0 2px #ccc}.proper-ad-unit.ad-sticky:not(.for-mobile).close:hover:after{box-shadow:inset 0 0 0 2px #333}.proper-ad-unit.ad-sticky #propervideo-video_container iframe{background-color:rgba(0,0,0,0) !important}.proper-ad-unit.ad-sticky iframe{background-color:#fff;pointer-events:all;vertical-align:bottom;position:relative;cursor:pointer;z-index:2}.proper-ad-unit.ad-sticky .brand{display:none;cursor:pointer;pointer-events:all;position:absolute;width:100%;height:100%;top:0;left:0}.proper-ad-unit.ad-sticky .brand:after{content:"";position:relative;width:100%;height:15px;display:block;background:no-repeat center;background-size:42px 15px;background-image:url(${u})}.proper-ad-unit.ad-sticky .sticky-inner>div:last-of-type{display:inline-block}.proper-ad-unit.sticky-btm{bottom:0;left:0}.proper-ad-unit.sticky-btm:before{content:"";position:absolute;width:100%;height:50%;top:50%;left:0;background:rgba(255,255,255,.79);pointer-events:all;box-shadow:0 0 4px 0 rgba(0,0,0,.3)}.proper-ad-unit.sticky-btm .sticky-inner{height:inherit;display:inline-block}.proper-ad-unit.sticky-btm .inner-left,.proper-ad-unit.sticky-btm .inner-right{height:100%;width:48px;display:block}.proper-ad-unit.sticky-btm .inner-left{float:left}.proper-ad-unit.sticky-btm .inner-right{float:right;position:inherit}.proper-ad-unit.sticky-btm .brand{position:absolute;width:48px;height:16px;left:0;top:50%}.proper-ad-unit.sticky-btm .close{display:none;position:absolute;bottom:0;right:0;width:48px;height:48px}.proper-ad-unit[class*=sticky-corner-]:before,.proper-ad-unit.sticky-right:before,.proper-ad-unit.sticky-left:before,.proper-ad-unit.sticky-btm.for-mobile:before{top:-2px;left:0;height:200%;background:#fff;box-shadow:0 0 0 2px #ccc}.proper-ad-unit[class*=sticky-corner-] .inner-left,.proper-ad-unit[class*=sticky-corner-] .inner-right,.proper-ad-unit.sticky-right .inner-left,.proper-ad-unit.sticky-right .inner-right,.proper-ad-unit.sticky-left .inner-left,.proper-ad-unit.sticky-left .inner-right,.proper-ad-unit.sticky-btm.for-mobile .inner-left,.proper-ad-unit.sticky-btm.for-mobile .inner-right{height:0;position:initial}.proper-ad-unit[class*=sticky-corner-] .brand,.proper-ad-unit[class*=sticky-corner-] .close,.proper-ad-unit.sticky-right .brand,.proper-ad-unit.sticky-right .close,.proper-ad-unit.sticky-left .brand,.proper-ad-unit.sticky-left .close,.proper-ad-unit.sticky-btm.for-mobile .brand,.proper-ad-unit.sticky-btm.for-mobile .close{bottom:100%;top:auto}.proper-ad-unit[class*=sticky-corner-] .brand,.proper-ad-unit.sticky-right .brand,.proper-ad-unit.sticky-left .brand,.proper-ad-unit.sticky-btm.for-mobile .brand{top:-18px;width:48px;background-color:#fff;border-radius:0 6px 0 0;border:solid 2px #ccc;border-left:none;border-bottom:none}.proper-ad-unit[class*=sticky-corner-] .brand:after,.proper-ad-unit.sticky-right .brand:after,.proper-ad-unit.sticky-left .brand:after,.proper-ad-unit.sticky-btm.for-mobile .brand:after{background-position:1px 0px}.proper-ad-unit[class*=sticky-corner-] .close:after,.proper-ad-unit.sticky-right .close:after,.proper-ad-unit.sticky-left .close:after,.proper-ad-unit.sticky-btm.for-mobile .close:after{position:absolute;bottom:2px;right:0;box-shadow:none;border-radius:11px 0 0 0;background:#fff;border:solid 2px #ccc;border-right:none;border-bottom:none}.proper-ad-unit[class*=sticky-corner-],.proper-ad-unit.sticky-left,.proper-ad-unit.sticky-right{right:0;width:auto;top:0;height:100% !important;display:table}.proper-ad-unit[class*=sticky-corner-] .sticky-inner,.proper-ad-unit.sticky-left .sticky-inner,.proper-ad-unit.sticky-right .sticky-inner{display:table-cell;vertical-align:middle}.proper-ad-unit[class*=sticky-corner-] .inner-left,.proper-ad-unit[class*=sticky-corner-] .inner-right,.proper-ad-unit.sticky-left .inner-left,.proper-ad-unit.sticky-left .inner-right,.proper-ad-unit.sticky-right .inner-left,.proper-ad-unit.sticky-right .inner-right{position:relative}.proper-ad-unit[class*=sticky-corner-] .brand,.proper-ad-unit.sticky-left .brand,.proper-ad-unit.sticky-right .brand{height:14px;width:52px;top:-12px;border-left:solid 2px #ccc;border-radius:4px 4px 0 0}.proper-ad-unit[class*=sticky-corner-] .brand:after,.proper-ad-unit.sticky-left .brand:after,.proper-ad-unit.sticky-right .brand:after{background-position:2px 0px}.proper-ad-unit[class*=sticky-corner-] .close:after,.proper-ad-unit.sticky-left .close:after,.proper-ad-unit.sticky-right .close:after{bottom:-2px}.proper-ad-unit[class*=sticky-corner-] .sticky-inner>div:last-of-type,.proper-ad-unit.sticky-left .sticky-inner>div:last-of-type,.proper-ad-unit.sticky-right .sticky-inner>div:last-of-type{border:solid 2px #ccc;border-right:none;padding:4px;padding-right:0;background:#fff;border-radius:0 0 0 4px}.proper-ad-unit.sticky-corner-left,.proper-ad-unit.sticky-left{right:auto;left:0}.proper-ad-unit.sticky-corner-left .close:after,.proper-ad-unit.sticky-left .close:after{border-radius:6px 6px 0 0;border-right:solid 2px #ccc}.proper-ad-unit.sticky-corner-left .sticky-inner>div:last-of-type,.proper-ad-unit.sticky-left .sticky-inner>div:last-of-type{border-left:none;padding:4px;padding-left:0;border-right:solid 2px #ccc;border-radius:0 0 4px 0}.proper-ad-unit.sticky-left .brand{border-left:none;border-radius:0 4px 0 0;width:48px}.proper-ad-unit.sticky-left .brand:after{background-position:1px 0px}.proper-ad-unit[class*=sticky-corner-]{padding:15px}.proper-ad-unit[class*=sticky-corner-] .sticky-inner{vertical-align:bottom}.proper-ad-unit[class*=sticky-corner-] .brand{border-left:solid 2px #ccc}.proper-ad-unit[class*=sticky-corner-] .brand:after{background-position:2px 0px}.proper-ad-unit[class*=sticky-corner-] .close:after{border-radius:6px 6px 0 0;border-right:solid 2px #ccc}.proper-ad-unit[class*=sticky-corner-] .sticky-inner>div:last-of-type{padding:4px;border:solid 2px #ccc;border-radius:3px}.slider_unit.slider_position_right>div:first-of-type>:not(div[data-outstream]){right:25px;left:unset}.slider_unit.slider_position_right .close_button{right:25px;left:unset}.slider_unit.slider_position_left>div:first-of-type>:not(div[data-outstream]){left:25px;right:unset}.slider_unit.slider_position_left .close_button{left:314px;right:unset}.slider_unit.slider_position_top>div:first-of-type>:not(div[data-outstream]){top:100px;bottom:unset}.slider_unit.slider_position_top .close_button{top:75px;bottom:unset}.slider_unit.slider_position_bottom>div:first-of-type>:not(div[data-outstream]){bottom:100px;top:unset}.slider_unit.slider_position_bottom .close_button{bottom:350px;top:unset}.slider_unit>div:first-of-type>:not(div[data-outstream]){min-width:300px;min-height:250px;position:fixed;z-index:10000}@media only screen and (max-width: 480px){.slider_unit>div:first-of-type>div>div[id=propervideo-super_outer_container]>div[id=propervideo-main_container]>div[class=propervideo-bottom_player]{zoom:var(--slider_mobile_adjustment_size)}}.slider_unit #close_button{display:none}.slider_unit .close_button{position:fixed;z-index:10000;color:#afafaf;font-size:22px;display:block !important}.slider_unit .close_button:hover{cursor:pointer}.proper-flex-wrapper{text-align:center;width:100%;margin-bottom:20px;display:grid;gap:20px;align-content:center;justify-content:center}.proper-flex-wrapper .proper-ad-unit{text-align:center}.proper-flex-wrapper .proper-ad-unit:empty{display:none}`,""]);const g=c},40:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s='a, abbr, acronym, address, applet, article, aside, audio, b, big, blockquote, body, canvas, caption, center, cite, code, dd, del, details, dfn, div, dl, dt, em, embed, fieldset, figcaption, figure, footer, form, h1, h2, h3, h4, h5, h6, header, hgroup, html, i, iframe, img, ins, kbd, label, legend, li, mark, menu, nav, object, ol, output, p, pre, q, ruby, s, samp, section, small, span, strike, strong, sub, summary, sup, table, tbody, td, tfoot, th, thead, time, tr, tt, u, ul, var, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline\n}\n\narticle, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\n\tdisplay: block\n}\n\nbody {\n\tline-height: 1\n}\n\nbody, html {\n\theight: 100%\n}\n\nol, ul {\n\tlist-style: none\n}\n\nblockquote, q {\n\tquotes: none\n}\n\nblockquote:after, blockquote:before, q:after, q:before {\n\tcontent: \'\';\n\tcontent: none\n}\n\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0\n}\n\ninput {\n\tborder-radius: 0\n}\n\nhr {\n\tborder: none;\n\theight: 1px;\n\tmargin: 0\n}\n\n.ds-all * {\n\tbox-shadow: inset 0 0 0 1px red\n}\n\niframe {\n\tborder: none\n}\n\n.btn a {\n\tbackground: #EE2C1D !important;\n\tbox-shadow: inset 0 -1px 0 0 rgba(0, 0, 0, 0.3) !important\n}\n\nbody {\n\tbackground: white;\n\tcolor: black;\n\tfont-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n\tpadding: 0;\n\tmargin: 0\n}\n\nbody * {\n\tbox-sizing: border-box\n}\n\nbody > h1 {\n\tfont-weight: bold;\n\tpadding-bottom: 3px;\n\tborder-bottom: solid 1px black;\n\tmargin-bottom: 7px\n}\n\nbody > h1:not(:first-of-type) {\n\tmargin-top: 50px\n}\n\n.proper-ad-unit.native {\n\tdisplay: flex;\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground: white;\n\tborder-radius: 4px;\n\toverflow: hidden;\n\tbox-shadow: inset 0 0 0 1px #cccccc\n}\n\n.proper-ad-unit.native .inner {\n\tmax-height: 100%;\n\tflex: 1 1 100%;\n\tdisplay: flex;\n\tflex-wrap: wrap\n}\n\n.proper-ad-unit.native .c1 {\n\tflex: 1 1 300px;\n\tbox-shadow: inset 0 0 0 1px #cccccc\n}\n\n.proper-ad-unit.native .c2 {\n\tflex: 1 0 50%;\n\tmin-width: calc(100% - 300px);\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center\n}\n\n.proper-ad-unit.native .img {\n\twidth: 100%;\n\theight: 100%;\n\tmin-height: 55px;\n\tbackground-repeat: no-repeat;\n\tbackground-size: contain;\n\tbackground-position: center;\n\ttransform: scale(0.94, 0.94)\n}\n\n.proper-ad-unit.native .txt {\n\tmax-height: 200px;\n\tpadding: 0 3vw 1vw;\n\tline-height: 0.94em\n}\n\n.proper-ad-unit.native .title {\n\tfont-weight: bold;\n\tfont-size: 1.25em;\n\tline-height: 1.1em;\n\tmargin-bottom: 0.25em;\n\tposition: relative\n}\n\n.proper-ad-unit.native p {\n\tfont-size: 0.9em\n}\n\n.proper-ad-unit.native .cta {\n\tflex: 1;\n\tdisplay: flex;\n\tflex-wrap: wrap\n}\n\n.proper-ad-unit.native span {\n\tcolor: #333;\n\tletter-spacing: 0.05em;\n\tfont-size: 0.7em;\n\tflex: 1 1 160px;\n\tpadding: 0 0 4px 3vw;\n\tdisplay: flex;\n\talign-items: flex-end\n}\n\n.proper-ad-unit.native .btn {\n\tflex: 1 1 160px;\n\talign-self: flex-end;\n\tborder: solid 4px rgba(0, 0, 0, 0);\n\tmargin: 1px;\n\tposition: relative;\n\tmin-height: 32px;\n\tmin-width: 158px\n}\n\n.proper-ad-unit.native a {\n\tposition: absolute;\n\tbottom: 0;\n\tright: 0;\n\twidth: 100%;\n\tmax-width: 300px;\n\ttext-decoration: none;\n\twhite-space: nowrap;\n\tcolor: white;\n\tbackground: #0437dd;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\theight: 28px;\n\tborder-radius: 4px\n}\n\n@media screen and (max-height: 240px) {\n\t.proper-ad-unit.native .c1 {\n\t\tflex: 0 1 100vh\n\t}\n\n\t.proper-ad-unit.native .txt {\n\t\tpadding: 3vh\n\t}\n\n\t.proper-ad-unit.native .title {\n\t\tmargin-bottom: 1vh !important\n\t}\n\n\t.proper-ad-unit.native span {\n\t\tpadding-left: 3vh\n\t}\n}\n\n@media screen and (max-width: 240px) {\n\t.proper-ad-unit.native .inner {\n\t\tflex-direction: column\n\t}\n\n\t.proper-ad-unit.native .c1 {\n\t\tflex: 0 1 100vw\n\t}\n\n\t.proper-ad-unit.native .cta {\n\t\tflex-direction: column\n\t}\n\n\t.proper-ad-unit.native span {\n\t\tflex: 0 0 20px\n\t}\n}\n\n@media screen and (min-height: 240px) and (min-width: 320px) {\n\t.proper-ad-unit.native .cta {\n\t\tflex: 0\n\t}\n}\n'},885:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(379),o=r.n(s),a=r(795),n=r.n(a),d=r(569),p=r.n(d),l=r(565),c=r.n(l),u=r(216),g=r.n(u),m=r(589),_=r.n(m),h=r(838),b={};b.styleTagTransform=_(),b.setAttributes=c(),b.insert=p().bind(null,"head"),b.domAPI=n(),b.insertStyleElement=g();o()(h.Z,b);const v=h.Z&&h.Z.locals?h.Z.locals:void 0},379:e=>{"use strict";var t=[];function getIndexByIdentifier(e){for(var r=-1,s=0;s<t.length;s++)if(t[s].identifier===e){r=s;break}return r}function modulesToDom(e,r){for(var s={},o=[],a=0;a<e.length;a++){var n=e[a],d=r.base?n[0]+r.base:n[0],p=s[d]||0,l="".concat(d," ").concat(p);s[d]=p+1;var c=getIndexByIdentifier(l),u={css:n[1],media:n[2],sourceMap:n[3],supports:n[4],layer:n[5]};if(-1!==c)t[c].references++,t[c].updater(u);else{var g=addElementStyle(u,r);r.byIndex=a,t.splice(a,0,{identifier:l,updater:g,references:1})}o.push(l)}return o}function addElementStyle(e,t){var r=t.domAPI(t);r.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,r){var s=modulesToDom(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=getIndexByIdentifier(s[o]);t[a].references--}for(var n=modulesToDom(e,r),d=0;d<s.length;d++){var p=getIndexByIdentifier(s[d]);0===t[p].references&&(t[p].updater(),t.splice(p,1))}s=n}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var s=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(r)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var s="";r.supports&&(s+="@supports (".concat(r.supports,") {")),r.media&&(s+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(s+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),s+=r.css,o&&(s+="}"),r.media&&(s+="}"),r.supports&&(s+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},663:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAgCAYAAADtwH1UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDExNi4xNjQ2NTUsIDIwMjEvMDEvMjYtMTU6NDE6MjAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MjY1YmM5NTctOTliMS00YjRjLWJlYTMtOWZhMThjZWYyYzEwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk1NUQzREZFM0I2RTExRUM4QjhCQUE4QkI1MERBNDIxIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk1NUQzREZEM0I2RTExRUM4QjhCQUE4QkI1MERBNDIxIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMS4yIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTk0MzY2NzlCRjBFMTFFQUJBOTU5NzBBQTVBNDdDOEIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTk0MzY2N0FCRjBFMTFFQUJBOTU5NzBBQTVBNDdDOEIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Y6CFxAAACJ0lEQVR42uxavUpDMRS+kVaqQv0BB7s5WCku4qqTk7jr5Fh8Cl/EoYOzD+DoYHFwl6IPoOJS1EmtxkTOlRDyc5Lbm0p7Pjjk9uacQ5ovOT+ljHOeEUaHKdoCIoAIIBABRACBCCACCETAxKGCVWy1WvnjqZBjpBnr9XqqrcSdkKbD5l7Iev4B7F3dIhNinRf2DNbPsfYImx0hXYuvv3UPlQBA0bYZY98EPZboEMZ8p67DV9C6U4YgnpjsscsBrivMMkJQ6CnjBjBNtpGn2UUel/kjj8kOWzmemOK/tPf4UOP+ryBsLkH33ZArv8oi4MJxM3LpK3rXSNJ8JOhJ3IazSLss3/QA7MJYK3qoQ5T3EToLQvYUQnyoamMRHEWGDBYaNhTMJytDMSVfBGaEfMLow8Cz3q2YBQSefB1zo2jEJAmHSN0bz/yrNrqwaXh3pTwfmGr5kvFgeNdPkYTPDUnXFpJceNFGV6i4tTRExsoj9GRLHwVCkX6rSyOAG8SFNRjblvk6+Khb5tuIDeWeTtmnY/sePhtbdVcLCdPDKENdRDzC2In03YkJK4nCT/JGLAYNZL2P6g+wYUXoLRoS+MQRwAKbrqwAWb5EWPmvBKAXBgkqamO05MaQp9hFzoqQJ+gf8h/ABlCXT1tsGhASq0rIlO8/hGwYbKSfJSHPio2UWeVGrYLPb/AlS+plIW/oU0r/CxrvHEAgAogAAhFABBCIACKAYMCPAAMAOUmeBNC2HO0AAAAASUVORK5CYII="}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.b=document.baseURI||self.location.href,__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__(229),__webpack_export_target__=ProperMedia=void 0===ProperMedia?{}:ProperMedia;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();var proper_log=ProperMedia.ad_project.proper_log,proper_debug_console=ProperMedia.ad_project.proper_debug_console,proper_debug_overlay=ProperMedia.ad_project.proper_debug_overlay,proper_display=ProperMedia.ad_project.proper_display,proper_render=ProperMedia.ad_project.proper_render,disableSlotRefresh=ProperMedia.ad_project.disableSlotRefresh,logMatchingResponse=ProperMedia.ad_project.logMatchingResponse,properSpaNewPage=ProperMedia.ad_project.spaNewPage,properSpaNewSection=ProperMedia.ad_project.spaNewSection,properSpaNewPageView=ProperMedia.ad_project.newPageView,properSpaNewPageReset=ProperMedia.ad_project.spaNewPageReset,properInfNewPage=ProperMedia.ad_project.infScrollNewPage,properBuildSlots=ProperMedia.ad_project.buildSlots,properDeleteSlot=ProperMedia.ad_project.deleteSlot,properDestroyDfpSlot=ProperMedia.ad_project.destroyDfpSlot,proper_remnant=ProperMedia.ad_project.proper_remnant,runATS=ProperMedia.ad_project.runATS,publisherAudiencesOptOut=ProperMedia.ad_project.publisherAudiencesOptOut,refreshAuctionAndSlotsByName=ProperMedia.ad_project.refreshAuctionAndSlotsByName;ProperMedia.ad_project.init();