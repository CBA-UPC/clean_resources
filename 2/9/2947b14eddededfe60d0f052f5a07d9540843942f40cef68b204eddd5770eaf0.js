"use strict";(self.webpackChunkreact_customer=self.webpackChunkreact_customer||[]).push([[6941],{22957:function(e,t,n){n.d(t,{P:function(){return i}});var o=n(50616),i=o.ZP.div.withConfig({displayName:"styles__Notification",componentId:"sc-1lmdild-0"})(["",""],()},9443:function(e,t,n){n.d(t,{Z:function(){return r}});var o=n(57994),i=n(98907),r=function(){function e(t){var n=this;(0,o.Z)(this,e),this.loadScript=function(){var e=document.createElement("script");return e.id=n.id,Object.keys(n.scriptTagProps).forEach((),new Promise((function(t,o){e.addEventListener("load",n.waitForScriptLoad((),!1),e.onerror=function(e){var t;try{t=JSON.stringify(e,()||e.toString()}catch(i){t=e}o(new Error("".concat(n.id," failed to load. Error: ").concat(t)))};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}))},this.isScriptLoaded=var i=t.id,r=t.globalVariableToLoad,a=t.scriptTagProps,c=t.waitStrategyProps;this.id=i,this.globalVariableToLoad=r,this.scriptTagProps=a,this.waitStrategyProps={maxRetryCount:(null===c||void 0===c?void 0:c.maxRetryCount)||10,retryDelayTime:(null===c||void 0===c?void 0:c.retryDelayTime)||250},this.retryCount=0}return(0,i.Z)(e,[{key:"waitForScriptLoad",value:function(e){var t=this,n=this.waitStrategyProps,o=n.maxRetryCount,i=n.retryDelayTime;if(this.retryCount>o)throw new Error("".concat(this.id," failed to load after retrying ").concat(this.retryCount," time").concat(this.retryCount>1?"s":""));void 0===window[this.id]||void 0===window[this.globalVariableToLoad]?(this.retryCount+=1,setTimeout((,i)):(this.retryCount=0,e())}},{key:"load",value:function(){var e=this;return new Promise((function(t,n){if(e.isScriptLoaded())t(window[e.id]);else try{e.loadScript().then(().catch(()}catch(o){n(o)}}))}}]),e}()},99468:function(e,t,n){n.d(t,{Z:function(){return S}});var o=n(95764),i=n(57994),r=n(98907),a=n(83921),c=n(4392),s=n(64428),l=n(4660),d=n(30969),u=n(35253),p=n(59019),h=n(6493),g=u.Z.FRENCH_DEPARTMENT,m={FRENCH_CANADA:{tag:u.Z.FRENCH_TAG,widget:"fr_CA",department:g,greeting:{online:"Discute avec nous",offline:"Laissez-nous un message"},concierge:{name:"Comment pouvons-nous vous aider?",title:"Posez toutes vos questions"},window:{title:"Skip"},messages:{orderNumber:"Num\xe9ro de commande: {{orderNumber}}"}},ENGLISH:{tag:"",widget:"en",department:u.Z.DEFAULT_DEPARTMENT,greeting:{online:"Chat with us",offline:"Leave us a message"},concierge:{name:"How can we help?",title:"Ask us anything"},window:{title:"SkipTheDishes"},messages:{orderNumber:"Order Number: {{orderNumber}}"}}},f={initialize:function(e,t){!function(e){if(e&&"object"===(0,h.Z)(e)&&Object.prototype.hasOwnProperty.call(e,"tag")&&Object.prototype.hasOwnProperty.call(e,"widget")&&Object.prototype.hasOwnProperty.call(e,"department")&&Object.prototype.hasOwnProperty.call(e,"greeting")&&Object.prototype.hasOwnProperty.call(e,"concierge")&&Object.prototype.hasOwnProperty.call(e,"window"))return!0;throw new Error("Please use ZopimLanguage object to configure.")}(e);try{var n=function(e){var t={};return e.name&&(t.name=e.name),e.email&&(t.email=e.email),e.phone&&(t.phone=e.phone),e.windowType&&(t.windowType=e.windowType),t}(t),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.ENGLISH.messages,n=[];return e.orderNumber&&t.orderNumber&&n.push(String(t.orderNumber).replace(/{{orderNumber}}/g,e.orderNumber)),e.orderDetails&&n.push(Object.values(e.orderDetails).join(", ")),e.initialMessage&&n.push("- ".concat(e.initialMessage)),n.join(" ")}(t,e.messages),i=[e.tag].concat((0,p.Z)(t.tags||[]));if(window.$zopim.livechat.set(n),window.$zopim.livechat.prechatForm.setGreetings(""),window.$zopim.livechat.departments.filter(""),window.$zopim.livechat.setLanguage(e.widget),window.$zopim.livechat.addTags(i),window.$zopim.livechat.setGreetings(e.greeting),e.concierge){var r=e.concierge,a=r.name,c=r.title;window.$zopim.livechat.concierge.setName(a),window.$zopim.livechat.concierge.setTitle(c)}if(window.$zopim.livechat.departments.setVisitorDepartment(e.department),o&&window.$zopim.livechat.setOnChatStart((),"popup"===n.windowType)this.openPopout();else{var s=e.window?e.window.title:"SkipTheDishes";this.show({windowTitle:s})}}catch(l){console.error(l)}},show:function(e){var t=e.windowTitle;try{window.$zopim.livechat.window.show(),window.$zopim.livechat.window.setTitle(t)}catch(n){console.error(n)}},openPopout:function(){try{window.$zopim.livechat.window.openPopout()}catch(e){console.error(e)}},hide:function(){try{window.$zopim(()}catch(e){console.error(e)}}},w=f,v=n(9443),b=n(47076),y=n(87790),x=n(50616),C=n(4726),Z=x.ZP.div.withConfig({displayName:"styles__Wrapper",componentId:"sc-7cn2v4-0"})(["z-index:9999;transform:translateZ(0px);position:fixed;height:50px;right:15px;margin:10px 20px;bottom:0;"]),L=x.ZP.div.withConfig({displayName:"styles__Loader",componentId:"sc-7cn2v4-1"})(["box-sizing:border-box;padding:0.75rem 1rem;font-size:1.07143rem;border-radius:999rem;height:45.95px;bottom:0;background-color:",";color:",";"],(function(e){var t=e.theme;return["prod"].includes(C.Z)?t.palette.common.brand:"#F28A98"}),(),P=n(37574),j=function(){return(0,P.jsx)(Z,{children:(0,P.jsx)(L,{children:(0,P.jsx)(y.default,{color:"inherit",size:20})})})};var S=function(e){var t=function(t){function n(){var e,t;(0,i.Z)(this,n);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(t=(0,a.Z)(this,(e=(0,c.Z)(n)).call.apply(e,[this].concat(r)))).state={isLoading:!1},t.isOpen=!1,t.isUnmounted=!1,t.open=function(){if(!t.isUnmounted){var e=t.props,n=(e.isChatOpen,e.t);t.isLoaded=!0,zE((function(){$zopim((function(){window.$zopim&&(window.$zopim.livechat.window.setSize("large"),window.$zopim.livechat.window.setOffsetVertical(0),window.$zopim.livechat.window.setOffsetHorizontal(15)),w.initialize("FR"===(0,b.wc)({t:n})?m.ENGLISH:m.FRENCH_CANADA,t.options),t.setState({isLoading:!1}),t.props.handleOpenChat&&t.props.handleOpenChat()}))}))}},t.start=function(e){(t.options=e,t.setState({isLoading:!0}),t.isLoaded)?t.open():new v.Z({id:"ze-snippet",globalVariableToLoad:"zE",scriptTagProps:{src:u.Z.ZENDESK_CHAT_URL,defer:!0,async:!0},waitStrategyProps:{maxRetryCount:10,retryDelayTime:1e3}}).load().then(t.open)},t}return(0,s.Z)(n,t),(0,r.Z)(n,[{key:"componentWillUnmount",value:,{key:"render",value:function(){return(0,P.jsxs)(d.Fragment,{children:[this.state.isLoading?(0,P.jsx)(j,{}):null,(0,P.jsx)(e,(0,o.Z)({startZopim:this.start},this.props))]})}}]),n}(d.PureComponent);return t.displayName="withZopim(".concat((0,l.Gf)(e),")"),t}},39328:function(e,t,n){n.r(t),n.d(t,{default:);var o=n(35610),i=n(83835),r=n(4660),a=n(68038),c=n(16346),s=n(35828),l=n(43889),d=n(75663),u=n(16798),p=n(57860),h=n(35355),g=n(47076),m=n(94796),f=n(62183),w=n(53990),v=n(83277),b=n(49747),y=n(32557),x="ACCOUNT",C="ORDER_HISTORY",Z="HELP",L="GIFT_CARD",P="LANGUAGE",j="COUNTRY",S="SIGNUP",N="LOGIN",k="REFER_A_FRIEND",T=(0,a.createSelector)(v.qy,f.default,b.T,(function(e,t,n){var o,i=(o={},(0,u.Z)(o,x,{id:"account",icon:"menuProfile",href:(0,h.L2)(t,{path:(0,p.Gn)(h.ZP.accountSettings.path,{accountMenu:"profile"})}),name:t("accountDrawer.accountSettings"),actionId:x,isExternal:!1}),(0,u.Z)(o,C,{id:"orders",icon:"orderHistory",href:(0,h.L2)(t,{path:h.B2}),name:t("accountDrawer.orders"),actionId:C,isExternal:!1}),(0,u.Z)(o,L,{id:"gift-card",icon:"giftCard",href:(0,h.L2)(t,{path:h.ZP.giftCardPurchase.path}),name:t("accountDrawer.giftCard"),actionId:L,isExternal:!0}),(0,u.Z)(o,k,{id:"refer",icon:"friends",name:t("accountDrawer.referral",{referrerBonus:e?(0,y.Uu)(e.referrerBonus,!1,null,!0):void 0}),actionId:k,isExternal:!1}),(0,u.Z)(o,Z,{id:"support",icon:"question",name:t("accountDrawer.help"),actionId:Z,isExternal:!1,iconProps:{padding:4,hasCircle:!0}}),(0,u.Z)(o,P,{id:"language",icon:"globeMenu",link:(0,m.Z)((0,g.wY)({t:t}),n),name:t("accountDrawer.language"),accessibleLabel:t("accessibility.languageLinkAriaLabel"),actionId:P,isExternal:!1}),o);return{itemsByActionId:i,itemsList:{type:"icon",items:Object.values(i)}}})),I=(0,a.createSelector)(f.default,(function(e){var t,n=(t={},(0,u.Z)(t,N,{id:"login",icon:"login",name:e("accountDrawer.logIn"),actionId:N,isExternal:!1}),(0,u.Z)(t,S,{id:"sign-up",icon:"signUp",href:(0,h.L2)(e,{path:h.ZP.signUp.path}),name:e("accountDrawer.signUp"),actionId:S,isExternal:!1}),(0,u.Z)(t,Z,{id:"support",icon:"support",name:e("accountDrawer.chat"),actionId:Z,isExternal:!1}),(0,u.Z)(t,j,{id:"country",icon:"flagCanadaRounded",name:"Canada",actionId:j,isExternal:!1}),(0,u.Z)(t,P,{id:"language",icon:"globeMenu",name:e("accountDrawer.language"),accessibleLabel:e("accessibility.languageLinkAriaLabel"),actionId:P,isExternal:!1}),t);return{itemsByActionId:n,itemsList:{type:"icon",items:Object.values(n)}}})),E=(0,a.createSelector)(w.M7,T,I,f.default,(),z=(0,a.createSelector)(c.Ms,f.default,(function(e,t){return e||t("login.welcome")})),D=n(11126),_=(0,a.createStructuredSelector)({customer:c.PR,drawerItems:E,isLoggedIn:c.M7,isOpen:c.$I,orderNumber:D.F,title:z}),A={handleChangeLanguage:handleClose:function(){return(0,s.dK)(!1)},handleLogout:s.Kv,showLoginModal:showNeedHelpWidget:function(){return(0,d.nW)(!0)},showRafModal:,O=(0,r.qC)((0,i.withTranslation)(),(0,o.$j)(_,A)),R=n(95764),$=n(30969),F=n(20655),M=n(99468),B=n(41892),G=n(9313),H=n(28955),U=n(92796),W="top",V="bottom",q="left",K="right",Y=null!=window.CSS&&null!=window.CSS.supports,J="padding-top",Q=X={top:Q(W),bottom:Q(V),left:Q(q),right:Q(K)},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.top;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"env(".concat(X[e],")"):"constant(".concat(X[e],")")},te=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return CSS.supports(J,ee(X.top,e))},ne=oe=ie=function(e){return oe()?ee(e):ne()?ee(e,!0):null},re=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"100%";if(Y){var n;if(oe())n=e?"".concat(ee(W)," + ").concat(ee(V)):"".concat(ee(q)," + ").concat(ee(K));else{if(!ne())return t;n=e?"".concat(ee(W,!0)," + ").concat(ee(V,!0)):"".concat(ee(q,!0)," + ").concat(ee(K,!0))}return"calc(".concat(t," + ").concat(n,")")}return t}},ae={fullWidth:re(!1),fullHeight:re(!0),padding:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Y)return t;var n=ie(e);return null!==n&&CSS.supports(J,"max(0px)")?"max(".concat(n,", ").concat(t,"px)"):t},negativePadding:function(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,"px");if(!Y)return t;var n=ie(e);return n?"calc((-1 * ".concat(n,") + ").concat(t,")"):t},addSafeAreaToValue:function(e,t){if(Y){var n=ie(e);return n?"calc(".concat(n," + ").concat(t,"px)"):t}return t}},ce=ae,se=n(54683),le={paddingTop:ce.padding(W),paddingBottom:ce.padding(V)},de=(0,se.Z)((function(e){return{fill:{display:"flex",flex:1},list:(0,u.Z)({width:300},e.breakpoints.up("md"),{width:358}),title:(0,u.Z)({padding:"28px 20px 20px"},e.breakpoints.up("md"),{padding:"36px 20px 20px"}),buttonContent:{width:"100%",display:"flex",justifyContent:"left"},logoutButton:{position:"fixed",bottom:0,width:"100%"},buttonIcon:{display:"flex",marginLeft:-10,marginRight:14},buttonTextContainer:{display:"flex",alignSelf:"center"},buttonTextSpan:{fontWeight:e.typography.fontWeightBold},logout:{boxShadow:e.shadows[21]},backdropColor:{backgroundColor:"rgba(255,255,255,0.7)"}}})),ue=n(99328),pe=(0,se.Z)((function(e){return{buttonContent:{width:"100%",display:"flex",justifyContent:"left"},buttonIcon:{display:"flex",marginLeft:-10,marginRight:14},buttonTextContainer:{display:"flex",alignSelf:"center"},logout:{boxShadow:e.shadows[20]}}})),he=n(33154),ge=n(51425),me=n(45442),fe=n(37574),we=(0,$.memo)((function(e){var t=e.handleLogout,n=(0,i.useTranslation)().t,o=pe(),r=n("login.logout");return(0,fe.jsx)("div",{className:o.logout,children:(0,fe.jsx)(he.default,{accessibleLabel:r,dataTestId:"Logout",fullWidth:!0,onClick:size:"large",variant:"clear",children:(0,fe.jsxs)("div",{className:o.buttonContent,children:[(0,fe.jsx)("div",{className:o.buttonIcon,children:(0,fe.jsx)(ge.Z,{color:"grey",size:24,variant:"logout"})}),(0,fe.jsx)("div",{className:o.buttonTextContainer,children:r})]})})})})),ve=n(46292),be=n.n(ve),ye=n(41583),xe=n(22957),Ce=n(12812),Ze=function(){return(0,ye.v9)(Ce.lj)?(0,fe.jsx)(xe.P,{}):null},Le=(0,$.memo)(Ze),Pe=n(7349),je=n(50616),Se=je.ZP.div.withConfig({displayName:"styles__ChallengeContainer",componentId:"sc-wg0pr0-0"})(["",";"],(function(e){var t=e.theme;return(0,je.iv)(["align-items:center;display:flex;cursor:pointer;display:flex;width:90%;border:1px solid ",";border-radius:5px;margin:0px 16px 18px 16px;padding:10px 20px 10px 15px;"],t.palette.common.borderDark)})),Ne=je.ZP.div.withConfig({displayName:"styles__ItemText",componentId:"sc-wg0pr0-1"})(["align-items:flex-start;display:flex;flex-direction:column;justify-content:space-between;width:100%;padding-right:20px;"]),ke=n(59947),Te=n(53784),Ie=function(e){var t=e.onClose,n=(0,i.useTranslation)(["common","rewards"]).t,o=(0,ke.v)(),r=(0,p.tL)().history;return(0,fe.jsxs)(Se,{onClick:function(){var e=(0,h.L2)(n,{path:(0,p.Gn)(h.ZP.accountSettings.path,{accountMenu:"challenges"})});return G.Z.setEvent(G.Z.actions.accountDrawer,G.Z.categories.engagement,{eventLabel:"challenges"}),t(),r.push(e)},tabIndex:0,children:[(0,fe.jsxs)(Ne,{children:[(0,fe.jsx)(U.Z,{"aria-label":n("rewards:challenges.drawer.title"),color:"black",fontWeight:600,variant:"subtitle1",children:n("rewards:challenges.drawer.title")}),(0,fe.jsx)(U.Z,{color:"black",variant:"body1",children:n("rewards:challenges.drawer.body")})]}),o>0&&(0,fe.jsx)(Te.C,{text:o,type:"accountDrawer"}),(0,fe.jsx)(ge.Z,{color:"black",size:24,variant:"chevronRight"})]})},Ee=n(17499),ze=n(94710),De=n(52448),_e=n(12155),Ae=n(62101),Oe=n(36238),Re=(0,je.ZP)(Ae.Z).withConfig({displayName:"styles__SkipPayAccountDrawerItem",componentId:"sc-1bacbvl-0"})(["",""],(function(e){var t=e.theme;return(0,je.iv)(["height:40px;border-bottom:1px solid ",";border-top:1px solid ",";padding-top:","px;padding-bottom:","px;"],t.palette.common.border,t.palette.common.border,t.spacing(4),t.spacing(6))})),$e=(0,je.ZP)(ge.Z).withConfig({displayName:"styles__SkipPayAccountDrawerIcon",componentId:"sc-1bacbvl-1"})(["",";"],(function(e){var t=e.theme;return(0,je.iv)(["margin-right:","px;"],t.spacing(1))})),Fe=je.ZP.div.withConfig({displayName:"styles__SkipPayAllowanceLabel",componentId:"sc-1bacbvl-2"})(["",";"],(function(e){var t=e.theme;return(0,je.iv)(["font-weight:",";margin-left:","px;"],t.typography.fontWeightRegular,t.spacing(2.5))})),Me=je.ZP.div.withConfig({displayName:"styles__SkipPayAllowanceAmount",componentId:"sc-1bacbvl-3"})(["position:fixed;",""],(function(e){var t=e.theme,n=e.isPositiveValue;return(0,je.iv)(["margin:",";color:",";"],t.spacing(5,0,0,6.5),()})),Be=(0,je.ZP)(Oe.Z).withConfig({displayName:"styles__Loader",componentId:"sc-1bacbvl-4"})(["",""],(function(e){var t=e.theme;return(0,je.iv)(["margin:","px auto;display:flex;"],t.spacing(2))})),Ge=n(33320),He=n(85594),Ue=function(e){var t=e.data,n=(0,_e.$G)().t,o=t.allowanceCents,i=t.unavailableMessage,r=t.accessToken,a=(0,ye.v9)(w.Wf),c=(0,De.M)(a).refetch,s=(0,Ge.mA)(i,o);return void 0===s?null:(0,fe.jsxs)(Re,{button:!0,onClick:function(){return c().then((),void(window.location.href="/pay")},children:[(0,fe.jsx)($e,{color:"brand",size:24,variant:"skipPay"}),(0,fe.jsx)(Fe,{children:n("accountDrawer.skipPay.allowance")}),(0,fe.jsx)(Me,{isPositiveValue:(0,Ge.FW)(s),children:(0,Ge.hw)(s)?s:(0,y.xG)(s,n("currencyFormat"))})]})},We=Ve=function(){var e=(0,o.v9)(w.Wf),t=(0,De.M)(e);return(0,ze.s)(t,{errorComponent:loadingComponent:successComponent:)},qe=n(16016),Ke=n(93309),Ye={style:{position:"fixed",top:0,bottom:0,height:"100%",boxShadow:"-2px 0 4px 0 rgba(0, 0, 0, 0.2)",transparentAppBar:{background:"transparent",boxShadow:"none"}}},Je=(0,$.memo)((function(e){var t=e.drawerItems,n=e.customer,o=e.handleChangeLanguage,r=e.handleClose,a=e.handleLogout,c=e.isLoggedIn,s=e.isOpen,l=e.showLoginModal,d=e.showNeedHelpWidget,u=e.showRafModal,h=e.t,m=e.title,f=(0,$.useRef)(null),w=de(),v=(0,p.tL)().history,b=(0,ye.I0)(),y=(0,qe.ye)(Ke.ki);(0,$.useEffect)((function(){return s||(0,B.tG)(f.current),B.tP}),[s]);var T=(0,$.useCallback)((function(){o(n,(0,g.wc)({t:h}),(0,g.wY)({t:h}))}),[n,o,h]),I=(0,$.useCallback)((,[r]),E=(0,$.useCallback)((,[]),z=function(e){G.Z.setEvent(G.Z.actions.accountDrawer,G.Z.categories.engagement,{eventLabel:e})},D=(0,$.useCallback)((function(e){var n=be()(t.itemsByActionId[e],"href"),o=be()(t.itemsByActionId[e],"isExternal");switch(e!==P&&I(),e){case x:z("account");break;case C:z("past_orders");break;case S:G.Z.setEvent(G.Z.actions.signUp,G.Z.categories.engagement,{eventLabel:Ee.n.drawerSignUp});break;case Z:d(),z("help");break;case L:z("gift_card");break;case P:T();var r="en"===i.default.language?"language_french":"language_english";z(r);break;case j:b((0,Pe.o)(!0));break;case N:l();break;case k:u(),z("invite_friends")}n&&(o?window.location.href=n:v.push(n))}),[b,T,t.itemsByActionId,v,I,l,d,u]),_={items:t.itemsList.items.map((function(e){return"account"===e.id?(0,R.Z)({},e,{rightView:(0,fe.jsx)(Le,{})}):e})),type:t.itemsList.type};return(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)(H.Z,{anchor:"right",disableBackdropTransition:!0,disableDiscovery:!0,disableRestoreFocus:!0,disableSwipeToOpen:!0,ModalProps:{BackdropProps:{classes:{root:w.backdropColor}}},onClose:I,onOpen:onRendered:E,open:s,PaperProps:Ye,children:(0,fe.jsxs)("div",{ref:f,style:le,children:[(0,fe.jsxs)("div",{className:w.list,children:[(0,fe.jsx)("div",{className:w.title,children:(0,fe.jsx)(U.Z,{variant:"h5",children:m})}),y&&(0,fe.jsx)(Ie,{onClose:I}),(0,fe.jsx)(Ve,{}),(0,fe.jsx)(ue.Z,{component:"div",data:_,handleClick:D,padding:"sm",role:"menu"})]}),(0,fe.jsx)("div",{className:w.fill}),c?(0,fe.jsx)("div",{className:w.logoutButton,children:(0,fe.jsx)(we,{handleLogout:a})}):null]})})})})),Qe=O((0,F.qC)(M.Z)(Je))}}]);
//# sourceMappingURL=ui-Header-AccountDrawer.ce010852.chunk.js.map