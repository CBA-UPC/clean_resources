var e=[(e,t,n)=>{n.d(t,{$:()=>k,A:()=>we,B:()=>he,C:()=>te,D:()=>ae,E:()=>oe,F:()=>ke,G:()=>me,H:()=>Ne,I:()=>H,J:()=>Y,K:()=>Q,L:()=>Z,M:()=>G,N:()=>pe,O:()=>Be,P:()=>K,Q:()=>J,R:()=>be,S:()=>X,T:()=>Te,U:()=>F,V:()=>$,W:()=>j,X:()=>q,Y:()=>Me,Z:()=>qe,_:()=>U,a:()=>C,ab:()=>B,b:()=>Le,bb:()=>Pe,c:()=>je,cb:()=>Ue,d:()=>re,db:()=>z,e:()=>Se,eb:()=>ye,f:()=>De,fb:()=>ze,g:()=>ee,gb:()=>Ve,h:()=>Fe,hb:()=>fe,i:()=>V,ib:()=>ve,j:()=>ge,jb:()=>O,k:()=>$e,kb:()=>ie,l:()=>Ce,lb:()=>se,m:()=>de,mb:()=>Oe,n:()=>D,o:()=>ce,p:()=>ue,q:()=>Ae,r:()=>Ee,s:()=>L,t:()=>Ie,u:()=>A,v:()=>xe,w:()=>le,x:()=>_,y:()=>N,z:()=>Re});var i=n(2),r=n(67),a=n.n(r),o=n(3),s=n(5),d=n(11),c=n(10),l="String",u="Function",p="Number",m="Object",f="Boolean",g=Object.prototype.toString;let h,b=Boolean(window.console),y=Boolean(b&&window.console.log),v=Boolean(b&&window.console.info),I=Boolean(b&&window.console.warn),w=Boolean(b&&window.console.error);const S=(0,c.a)();function C(e){h=e}function R(...e){null!=h&&h(...e)}const E={checkCookieSupport:Se,createTrackPixelIframeHtml:function(e,t=!0,n=""){return e?(t&&(e=encodeURI(e)),n&&(n=`sandbox="${n}"`),`<iframe ${n} id="${A()}"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="${e}">\n    </iframe>`):""},getWindowSelf:_,getWindowTop:N,getWindowLocation:P,insertUserSyncIframe:oe,insertElement:te,isFn:G,triggerPixel:ie,logError:F,logWarn:q,logMessage:j,logInfo:$,parseQS:_e,formatQS:function(e){return Object.keys(e).map((t=>Array.isArray(e[t])?e[t].map((e=>`${t}[]=${e}`)).join("&"):`${t}=${e[t]}`)).join("&")},deepEqual:$e};var T,x=(T=0,function(){return++T});function A(){return x()+Math.random().toString(16).substr(2)}function D(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,D)}function k(e){let t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t=t.replace(/&$/,""),t}function O(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"):""}function B(e){return"string"==typeof e?e.split(",").filter((e=>e.match(/^(\d)+x(\d)+$/i))):"object"==typeof e?2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[U(e)]:e.map(U):[]}function U(e){if(function(e){return H(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}(e))return e[0]+"x"+e[1]}function N(){return window.top}function _(){return window.self}function P(){return window.location}function j(){V()&&y&&console.log.apply(console,M(arguments,"MESSAGE:"))}function $(){V()&&v&&console.info.apply(console,M(arguments,"INFO:"))}function q(){V()&&I&&console.warn.apply(console,M(arguments,"WARNING:")),R(s.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments})}function F(){V()&&w&&console.error.apply(console,M(arguments,"ERROR:")),R(s.EVENTS.AUCTION_DEBUG,{type:"ERROR",arguments})}function z(e){function t(t){return function(...n){t(e,...n)}}return{logError:t(F),logWarn:t(q),logMessage:t(j),logInfo:t($)}}function M(e,t){e=[].slice.call(e);let n=i.b.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?`%c${n}`:"")),e;function r(e){return`display: inline-block; color: #fff; background: ${e}; padding: 1px 4px; border-radius: 3px;`}}function V(){return!!i.b.getConfig("debug")}function L(e){return _e(P().search)[e]||""}function W(e,t){return g.call(e)==="[object "+t+"]"}function G(e){return W(e,u)}function X(e){return W(e,l)}const H=Array.isArray.bind(Array);function K(e){return W(e,p)}function J(e){return W(e,m)}function Y(e){return W(e,f)}function Z(e){return!e||(H(e)||X(e)?!(e.length>0):Object.keys(e).length<=0)}function Q(e){return X(e)&&(!e||0===e.length)}function ee(e,t){return G(e?.includes)&&e.includes(t)}function te(e,t,n,i){let r;t=t||document,r=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if(r=r.length?r:t.getElementsByTagName("body"),r.length){r=r[0];let t=i?null:r.firstChild;return r.insertBefore(e,t)}}catch(e){}}function ne(e,t){let n=null;return new d.a((i=>{const r=function(){e.removeEventListener("load",r),e.removeEventListener("error",r),null!=n&&window.clearTimeout(n),i()};e.addEventListener("load",r),e.addEventListener("error",r),null!=t&&(n=window.setTimeout(r,t))}))}function ie(e,t,n){const i=new Image;t&&E.isFn(t)&&ne(i,n).then(t),i.src=e}function re({source:e,burl:t}){e===s.S2S.SRC&&t&&E.triggerPixel(t)}function ae(e){if(!e)return;const t=((n=document.createElement("iframe")).id=A(),n.height=0,n.width=0,n.border="0px",n.hspace="0",n.vspace="0",n.marginWidth="0",n.marginHeight="0",n.style.border="0",n.scrolling="no",n.frameBorder="0",n.src="about:blank",n.style.display="none",n.style.height="0px",n.style.width="0px",n.allowtransparency="true",n);var n,i;E.insertElement(t,document,"body"),(i=t.contentWindow.document).open(),i.write(e),i.close()}function oe(e,t,n){let i=E.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),r=document.createElement("div");r.innerHTML=i;let a=r.firstChild;t&&E.isFn(t)&&ne(a,n).then(t),E.insertElement(a,document,"html",!0)}function se(e,t,n){return n.indexOf(e)===t}function de(e,t){return e.concat(t)}function ce(e,t){if(e)return t.flatMap((e=>e.bids)).find((t=>["bidId","adId","bid_id"].some((n=>t[n]===e))))}function le(e,t){return e[t]}function ue(e=S.adUnits){return e.map((e=>e.bids.map((e=>e.bidder)).reduce(de,[]))).reduce(de,[]).filter((e=>void 0!==e)).filter(se)}function pe(){if(window.googletag&&G(window.googletag.pubads)&&G(window.googletag.pubads().getSlots))return!0}function me(){if(window.apntag&&G(window.apntag.getTag))return!0}function fe(e){let t=e.length;for(;t>0;){let n=Math.floor(Math.random()*t);t--;let i=e[t];e[t]=e[n],e[n]=i}return e}function ge(e){return a()(e)}function he(){try{return E.getWindowSelf()!==E.getWindowTop()}catch(e){return!0}}function be(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)}function ye(e,t){if(e)return Object.entries(t).reduce(((e,[t,n])=>e.replace(new RegExp("\\$\\{"+t+"\\}","g"),n||"")),e)}function ve(){return(new Date).getTime()}function Ie(){return window.performance&&window.performance.now&&window.performance.now()||0}function we(){return!1!==i.b.getConfig("deviceAccess")}function Se(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function Ce(e,t){if(t<1)throw new Error(`numRequiredCalls must be a positive number. Got ${t}`);let n=0;return function(){n++,n===t&&e.apply(this,arguments)}}function Re(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function Ee(e,t){return t.filter((t=>e[t])).reduce(((t,n)=>Object.assign(t,{[n]:e[n]})),{})}function Te(e){const t=["banner","native","video"];return!!Object.keys(e).every((e=>(0,o.c)(t,e)))&&(!e.video||!e.video.context||(0,o.c)(["instream","outstream","adpod"],e.video.context))}function xe(e,t,n){return e.filter((e=>e.code===t)).flatMap((e=>e.bids)).filter((e=>e.bidder===n)).map((e=>e.params||{}))}function Ae(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack}const De=(e,t)=>e.getAdUnitPath()===t||e.getSlotElementId()===t;function ke(e){return t=>De(e,t)}function Oe(e,t){const n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return`\n    ${e.code} is a ${n} ad unit\n    containing bidders that don't support ${n}: ${t}.\n    This bidder won't fetch demand.\n  `}const Be=Number.isInteger.bind(Number);function Ue(e,t){return"object"!=typeof e?{}:t.reduce(((n,i,r)=>{if("function"==typeof i)return n;let a=i,o=i.match(/^(.+?)\sas\s(.+?)$/i);o&&(i=o[1],a=o[2]);let s=e[i];return"function"==typeof t[r+1]&&(s=t[r+1](s,n)),void 0!==s&&(n[a]=s),n}),{})}function Ne(e,t){return H(e)&&(!t||e.length===t)&&e.every((e=>Be(e)))}function _e(e){return e?e.replace(/^\?/,"").split("&").reduce(((e,t)=>{let[n,i]=t.split("=");return/\[\]$/.test(n)?(n=n.replace("[]",""),e[n]=e[n]||[],e[n].push(i)):e[n]=i||"",e}),{}):{}}function Pe(e,t){let n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);let i=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:i?n.search:E.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function je(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?`:${e.port}`:""))+(e.pathname||"")+(e.search?`?${E.formatQS(e.search||"")}`:"")+(e.hash?`#${e.hash}`:"")}function $e(e,t,{checkTypes:n=!1}={}){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t||n&&e.constructor!==t.constructor)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e){if(!t.hasOwnProperty(i))return!1;if(!$e(e[i],t[i],{checkTypes:n}))return!1}return!0}function qe(e,...t){if(!t.length)return e;const n=t.shift();if(J(e)&&J(n))for(const t in n)J(n[t])?(e[t]||Object.assign(e,{[t]:{}}),qe(e[t],n[t])):H(n[t])?e[t]?H(e[t])&&n[t].forEach((n=>{let i=1;for(let r=0;r<e[t].length;r++)if($e(e[t][r],n)){i=0;break}i&&e[t].push(n)})):Object.assign(e,{[t]:[...n[t]]}):Object.assign(e,{[t]:n[t]});return qe(e,...t)}function Fe(e,t=0){let n=function(e,t){if(G(Math.imul))return Math.imul(e,t);var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n},i=3735928559^t,r=1103547991^t;for(let t,a=0;a<e.length;a++)t=e.charCodeAt(a),i=n(i^t,2654435761),r=n(r^t,1597334677);return i=n(i^i>>>16,2246822507)^n(r^r>>>13,3266489909),r=n(r^r>>>16,2246822507)^n(i^i>>>13,3266489909),(4294967296*(2097151&r)+(i>>>0)).toString()}function ze(e){try{return JSON.parse(e)}catch(e){}}function Me(e,t=function(e){return e}){const n=new Map,i=function(){const i=t.apply(this,arguments);return n.has(i)||n.set(i,e.apply(this,arguments)),n.get(i)};return i.clear=n.clear.bind(n),i}function Ve(e,t){Object.entries(t).forEach((([t,n])=>e.setAttribute(t,n)))}function Le(e,t,n=(e=>e)){let i=0,r=e.length&&e.length-1;const a=n(t);for(;r-i>1;){const t=i+Math.round((r-i)/2);a>n(e[t])?i=t:r=t}for(;e.length>i&&a>n(e[i]);)i++;return i}},(e,t,n)=>{n.d(t,{a:()=>v,b:()=>f,c:()=>l,d:()=>g,e:()=>s,f:()=>p,g:()=>u,h:()=>h,i:()=>o,j:()=>a,k:()=>r,l:()=>d,m:()=>m,n:()=>b,o:()=>y,p:()=>I,q:()=>c,r:()=>i});const i=e=>void 0===e,r=e=>null===e,a=e=>r(e)||i(e),o=e=>!a(e),s=e=>"boolean"==typeof e,d=e=>"number"==typeof e&&!isNaN(e),c=e=>"string"==typeof e,l=e=>Array.isArray(e),u=e=>"function"==typeof e,p=e=>e instanceof Date,m=e=>"object"==typeof e&&!l(e)&&!r(e),f=(e,t)=>l(e)&&e.every(t),g=(e,t)=>f(e,t)||t(e),h=(e,t)=>n=>e(n,t),b=(e,t)=>i(e)||t(e),y=(e,t)=>m(e)&&Object.values(e).every(t),v=(e,...t)=>t.some((t=>t===e)),I=e=>f(e,d)&&2===e.length},(e,t,n)=>{n.d(t,{a:()=>c,b:()=>m});var i=n(75),r=n(3),a=n(0),o=n(6),s=n(5);const d="TRUE"===(0,a.s)(s.DEBUG_MODE).toUpperCase(),c="random",l={};l[c]=!0,l.fixed=!0;const u=c,p={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},m=function(){let e,t,n,s=[],c=null;function m(){function o(e){return c[e].val}function s(e,t){c[e].val=t}e={};const c={publisherDomain:{set(e){null!=e&&(0,a.X)("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),s("publisherDomain",e)}},priceGranularity:{val:p.MEDIUM,set(e){g(e)&&("string"==typeof e?s("priceGranularity",f(e)?e:p.MEDIUM):(0,a.Q)(e)&&(s("customPriceBucket",e),s("priceGranularity",p.CUSTOM),(0,a.W)("Using custom price granularity")))}},customPriceBucket:{val:{},set(){}},mediaTypePriceGranularity:{val:{},set(e){null!=e&&s("mediaTypePriceGranularity",Object.keys(e).reduce(((t,n)=>(g(e[n])?"string"==typeof e?t[n]=f(e[n])?e[n]:o("priceGranularity"):(0,a.Q)(e)&&(t[n]=e[n],(0,a.W)(`Using custom price granularity for ${n}`)):(0,a.X)(`Invalid price granularity for media type: ${n}`),t)),{}))}},bidderSequence:{val:u,set(e){l[e]?s("bidderSequence",e):(0,a.X)(`Invalid order: ${e}. Bidder Sequence was not set.`)}},auctionOptions:{val:{},set(e){(function(e){if(!(0,a.Q)(e))return(0,a.X)("Auction Options must be an object"),!1;for(let t of Object.keys(e)){if("secondaryBidders"!==t&&"suppressStaleRender"!==t)return(0,a.X)(`Auction Options given an incorrect param: ${t}`),!1;if("secondaryBidders"===t){if(!(0,a.I)(e[t]))return(0,a.X)(`Auction Options ${t} must be of type Array`),!1;if(!e[t].every(a.S))return(0,a.X)(`Auction Options ${t} must be only string`),!1}else if("suppressStaleRender"===t&&!(0,a.J)(e[t]))return(0,a.X)(`Auction Options ${t} must be of type boolean`),!1}return!0})(e)&&s("auctionOptions",e)}}};let m={debug:d,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10};function f(e){return(0,r.b)(Object.keys(p),(t=>e===p[t]))}function g(e){if(!e)return(0,a.U)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)f(e)||(0,a.X)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,a.Q)(e)&&!(0,i.b)(e))return(0,a.U)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(m,Object.fromEntries(Object.entries(c).map((([e,t])=>[e,Object.assign({get:o.bind(null,e),set:s.bind(null,e),enumerable:!0},t)])))),t&&I(Object.keys(t).reduce(((e,n)=>(t[n]!==m[n]&&(e[n]=m[n]||{}),e)),{})),t=m,n={}}function f(){if(c&&n&&(0,a.Q)(n[c])){let e=n[c];const i=new Set(Object.keys(t).concat(Object.keys(e)));return(0,r.a)(i).reduce(((n,i)=>(void 0===e[i]?n[i]=t[i]:void 0===t[i]?n[i]=e[i]:(0,a.Q)(e[i])?n[i]=(0,a.Z)({},t[i],e[i]):n[i]=e[i],n)),{})}return Object.assign({},t)}const[g,h]=[f,function(){const e=f();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((e=>function(...t){if(t.length<=1&&"function"!=typeof t[0]){const n=t[0];return n?(0,o.a)(e(),n):f()}return function(e,t,n={}){let i=t;if("string"!=typeof e&&(i=e,e="*",n=t||{}),"function"!=typeof i)return void(0,a.U)("listener must be a function");const r={topic:e,callback:i};return s.push(r),n.init&&i("*"===e?h():{[e]:h(e)}),function(){s.splice(s.indexOf(r),1)}}(...t)})),[b,y]=[h,g].map((e=>function(...t){let n=e(...t);return n&&"object"==typeof n&&(n=(0,a.j)(n)),n}));function v(n){if(!(0,a.Q)(n))return void(0,a.U)("setConfig options must be an object");let i=Object.keys(n),r={};i.forEach((i=>{let o=n[i];(0,a.Q)(e[i])&&(0,a.Q)(o)&&(o=Object.assign({},e[i],o));try{r[i]=t[i]=o}catch(e){(0,a.X)(`Cannot set config for property ${i} : `,e)}})),I(r)}function I(e){const t=Object.keys(e);s.filter((e=>(0,r.c)(t,e.topic))).forEach((t=>{t.callback({[t.topic]:e[t.topic]})})),s.filter((e=>"*"===e.topic)).forEach((t=>t.callback(e)))}function w(e,t=!1){try{!function(e){if(!(0,a.Q)(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,a.Q)(e.config))throw"setBidderConfig bidder options must contain a config object"}(e),e.bidders.forEach((i=>{n[i]||(n[i]={}),Object.keys(e.config).forEach((r=>{let o=e.config[r];if((0,a.Q)(o)){const e=t?a.Z:Object.assign;n[i][r]=e({},n[i][r]||{},o)}else n[i][r]=o}))}))}catch(e){(0,a.U)(e)}}function S(e,t){c=e;try{return t()}finally{C()}}function C(){c=null}return m(),{getCurrentBidder:function(){return c},resetBidder:C,getConfig:h,getAnyConfig:g,readConfig:b,readAnyConfig:y,setConfig:v,mergeConfig:function(e){if(!(0,a.Q)(e))return void(0,a.U)("mergeConfig input must be an object");const t=(0,a.Z)(f(),e);return v({...t}),t},setDefaults:function(n){(0,a.Q)(e)?(Object.assign(e,n),Object.assign(t,n)):(0,a.U)("defaults must be an object")},resetConfig:m,runWithBidder:S,callbackWithBidder:function(e){return function(t){return function(...n){if("function"==typeof t)return S(e,t.bind(this,...n));(0,a.X)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:w,getBidderConfig:function(){return n},mergeBidderConfig:function(e){return w(e,!0)}}}()},(e,t,n)=>{function i(e,t,n){return e&&e.includes(t,n)||!1}function r(){return Array.from.apply(Array,arguments)}function a(e,t,n){return e&&e.find(t,n)}n.d(t,{a:()=>r,b:()=>a,c:()=>i})},(e,t,n)=>{n.d(t,{a:()=>s});var i=n(70),r=n(27),a=n(101);const o=n(102).a.value,s=new i.b("HUBVISOR","wrapper",(()=>{const e=[];return o&&e.push(o),r.f&&e.push(a.a),e})())},e=>{e.exports=JSON.parse('{"JSON_MAPPING":{"PL_CODE":"code","PL_SIZE":"sizes","PL_BIDS":"bids","BD_BIDDER":"bidder","BD_ID":"paramsd","BD_PL_ID":"placementId","ADSERVER_TARGETING":"adserverTargeting","BD_SETTING_STANDARD":"standard"},"DEBUG_MODE":"pbjs_debug","STATUS":{"GOOD":1},"CB":{"TYPE":{"ALL_BIDS_BACK":"allRequestedBidsBack","AD_UNIT_BIDS_BACK":"adUnitBidsBack","BID_WON":"bidWon","REQUEST_BIDS":"requestBids"}},"EVENTS":{"AUCTION_INIT":"auctionInit","AUCTION_TIMEOUT":"auctionTimeout","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","BID_REJECTED":"bidRejected","NO_BID":"noBid","SEAT_NON_BID":"seatNonBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender","BILLABLE_EVENT":"billableEvent","BID_ACCEPTED":"bidAccepted"},"AD_RENDER_FAILED_REASON":{"PREVENT_WRITING_ON_MAIN_DOCUMENT":"preventWritingOnMainDocument","NO_AD":"noAd","EXCEPTION":"exception","CANNOT_FIND_AD":"cannotFindAd","MISSING_DOC_OR_ADID":"missingDocOrAdid"},"EVENT_ID_PATHS":{"bidWon":"adUnitCode"},"GRANULARITY_OPTIONS":{"LOW":"low","MEDIUM":"medium","HIGH":"high","AUTO":"auto","DENSE":"dense","CUSTOM":"custom"},"TARGETING_KEYS":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain","ACAT":"hb_acat","CRID":"hb_crid","DSP":"hb_dsp"},"DEFAULT_TARGETING_KEYS":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"NATIVE_KEYS":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"S2S":{"SRC":"s2s","DEFAULT_ENDPOINT":"https://prebid.adnxs.com/pbs/v1/openrtb2/auction","SYNCED_BIDDERS_KEY":"pbjsSyncs"},"BID_STATUS":{"BID_TARGETING_SET":"targetingSet","RENDERED":"rendered","BID_REJECTED":"bidRejected"},"REJECTION_REASON":{"INVALID":"Bid has missing or invalid properties","INVALID_REQUEST_ID":"Invalid request ID","BIDDER_DISALLOWED":"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes","FLOOR_NOT_MET":"Bid does not meet price floor","CANNOT_CONVERT_CURRENCY":"Unable to convert currency"},"PREBID_NATIVE_DATA_KEYS_TO_ORTB":{"body":"desc","body2":"desc2","sponsoredBy":"sponsored","cta":"ctatext","rating":"rating","address":"address","downloads":"downloads","likes":"likes","phone":"phone","price":"price","salePrice":"saleprice","displayUrl":"displayurl"},"NATIVE_ASSET_TYPES":{"sponsored":1,"desc":2,"rating":3,"likes":4,"downloads":5,"price":6,"saleprice":7,"phone":8,"address":9,"desc2":10,"displayurl":11,"ctatext":12},"NATIVE_IMAGE_TYPES":{"ICON":1,"MAIN":3},"NATIVE_KEYS_THAT_ARE_NOT_ASSETS":["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],"FLOOR_VALUES":{"NO_DATA":"noData","AD_UNIT":"adUnit","SET_CONFIG":"setConfig","FETCH":"fetch","SUCCESS":"success","ERROR":"error","TIMEOUT":"timeout"}}')},(e,t,n)=>{function i(e,t,n,i,r){for(t=t.split?t.split("."):t,i=0;i<t.length;i++)e=e?e[t[i]]:r;return e===r?n:e}n.d(t,{a:()=>i})},(e,t,n)=>{n.d(t,{a:()=>r,b:()=>a,c:()=>o});var i=n(1);const r={adserverTimeout:90,onDisplayCallback:91,onDisplayOrDfpRefresh:92,onAmpRendering:93,onAdditionalTargetings:94,onParallaxInvalidParameters:95,onRtcRendering:96,onCustomNativeRendering:97,bypassGamRenderError:98,doubleRenderError:99,publisherPlacementsBuildError:666,autorefreshError:700,customInsertionPointNotFound:829,beamError:900,unexpected:1e3,nativeCriteoBidNotFound:1001,nativeAdserverPlacementInvalid:1002,overrideRenderFormatFailed:1003,noNativeRenderer:1004,noSkinRenderer:1005,skinFrameNullDocument:1006,skinPageWrapNotFound:1007,skinPageContentNotFound:1008,skinDomElementNotFound:1009,unsupportedRenderableContent:1010,iframeDocumentNotFound:1011,iasResponseValidationFailed:1012,sandboxHostFrameWindowNotAvailable:1013,sandboxHostRenderWithoutChannel:1014,safeframeHostFrameWindowNotAvailable:1015,sandboxClientPlacementIdNotFound:1016,consentManagementError:1017,noNativePayload:1018,overrideRichMediaOptionsFailed:1019,overrideDisplayFormatFailed:1020,generateNativeOrtbRequestFailed:1022,customRichMediaNullDocument:1023,customRichMediaPageWrapNotFound:1024,renderingFailed:1049,amazonRenderingFailed:1050,elementMeasurementFailed:2001,publisherConfigNotFound:3e3,contextNotProvided:3001,videoWrapperDivNotFound:4200,vastContentNotFound:4201,outstreamPlayerLoadingFailed:4202,noPublisherIdForVimp:4203,outstreamPlayerError:4204,instreamCacheServiceRequestError:5e3,instreamConfigurationError:5001,instreamCacheIdMissing:5003,amazonCpmMappingError:6e3,secondChanceError:8e3,visitsProviderError:9e3};class a extends Error{code;source;constructor(e,t,n){n?super(n):t instanceof Error?super(t.message):super(t),this.code=e,t instanceof Error&&(this.source=t),(0,i.g)(Error.captureStackTrace)?Error.captureStackTrace(this,this.constructor):this.stack=new Error(n).stack}}class o extends a{secondaryCode;constructor(e,t,n){super(e,t),this.secondaryCode="unknown",(0,i.m)(t)&&(0,i.m)(t.j)?(this.message=`IMA Vast error - ${t.j.errorCode} - ${t.j.type}: ${t.j.innerError??t.j.errorMessage} - VAST: ${n}`,((0,i.q)(t.j.errorCode)||(0,i.l)(t.j.errorCode))&&(this.secondaryCode=`${t.j.errorCode}`)):this.message=`Vast error: ${t instanceof Error?t:JSON.stringify(t)} - VAST: ${n}`}}},(e,t,n)=>{n.d(t,{a:()=>ne});var i=n(0),r=n(6),a=n(75),o=n(32),s=n(33),d=n(2);function c(e,{index:t=ne.index}={}){const n=e.vastXml?e.vastXml:`<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA[${e.vastUrl}]]></VASTAdTagURI>\n        <Impression>${(i=e.vastImpUrl)?`<![CDATA[${i}]]>`:""}</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>`;var i;const r=t.getAuction(e);let a={type:"xml",value:n,ttlseconds:Number(e.ttl)+15};return d.b.getConfig("cache.vasttrack")&&(a.bidder=e.bidder,a.bidid=e.requestId,a.aid=e.auctionId),null!=r&&(a.timestamp=r.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(a.key=e.customCacheKey),a}var l=n(79),u=n(42),p=n(9),m=n(3),f=n(44),g=n(43),h=n(14),b=n(20),y=n(22),v=n(5),I=n(11),w=n(24),S=n(81),C=n(10);const{syncUsers:R}=u.userSync,E="completed";b.on(v.EVENTS.BID_ADJUSTMENT,(function(e){!function(e){let t=(0,S.a)(e.cpm,e);t>=0&&(e.cpm=t)}(e)}));const T={},x={},A=[],D=(0,C.a)();function k({adUnits:e,adUnitCodes:t,callback:n,cbTimeout:o,labels:s,auctionId:c,ortb2Fragments:u,metrics:p}){p=(0,w.d)(p);const h=e,S=s,C=t,k=c||(0,i.n)(),j=o,$=new Set,q=(0,I.b)();let F,V,L,W,G=[],X=n,H=[],K=[],J=[],Z=[],Q=[];function ee(){return{auctionId:k,timestamp:F,auctionEnd:V,auctionStatus:W,adUnits:h,adUnitCodes:C,labels:S,bidderRequests:H,noBids:J,bidsReceived:K,bidsRejected:G,winningBids:Z,timeout:j,metrics:p,seatNonBids:Q}}function te(t){if(t?b.emit(v.EVENTS.AUCTION_TIMEOUT,ee()):clearTimeout(L),void 0===V){let n=[];t&&((0,i.W)(`Auction ${k} timedOut`),n=H.filter((e=>!$.has(e.bidderRequestId))).flatMap((e=>e.bids)),n.length&&b.emit(v.EVENTS.BID_TIMEOUT,n)),W=E,V=Date.now(),p.checkpoint("auctionEnd"),p.timeBetween("requestBids","auctionEnd","requestBids.total"),p.timeBetween("callBids","auctionEnd","requestBids.callBids"),q.resolve(),b.emit(v.EVENTS.AUCTION_END,ee()),N(h,(function(){try{if(null!=X){const e=K.filter((e=>C.includes(e.adUnitCode))).reduce(Y,{});X.apply(D,[e,t,k]),X=null}}catch(e){(0,i.U)("Error executing bidsBackHandler",null,e)}finally{n.length&&y.a.callTimedOutBidders(e,n,j);let t=d.b.getConfig("userSync")||{};t.enableOverride||R(t.syncDelay)}}))}}function ie(){d.b.resetBidder(),(0,i.V)(`Bids Received for Auction with id: ${k}`,K),W=E,te(!1)}function re(e){$.add(e)}function ae(e){e.forEach((e=>{var t;t=e,H=H.concat(t)}));let t={},n={bidRequests:e,run:()=>{L=setTimeout((()=>te(!0)),j),W="inProgress",b.emit(v.EVENTS.AUCTION_INIT,ee());let n=function(e,t,{index:n=ne.index}={}){let o=0,s=!1,c=new Set,u={};function p(){o--,s&&0===o&&e()}function h(e,t,n){return u[t.requestId]=!0,function(e,t,{index:n=ne.index}={}){const r=n.getBidderRequest(e),a=n.getAdUnit(e),o=r&&r.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||(0,i.ib)(),requestTimestamp:e.requestTimestamp||o,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=a?.ttlBuffer&&(e.ttlBuffer=a.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),o++,n(p)}function y(e,n){h(e,n,(e=>{let o=function(e,{index:t=ne.index}={}){b.emit(v.EVENTS.BID_ADJUSTMENT,e);const n=t.getBidRequest(e)?.renderer||t.getAdUnit(e).renderer,i=e.mediaType,r=t.getMediaTypes(e),o=r&&r[i];var s=o&&o.renderer,c=null;s&&s.url&&s.render&&(!0!==s.backupOnly||!e.renderer)?c=s:n&&n.url&&n.render&&(!0!==n.backupOnly||!e.renderer)&&(c=n),c&&(e.renderer=l.a.install({url:c.url,config:c.options}),e.renderer.setRender(c.render));const u=M(e.mediaType,r,d.b.getConfig("mediaTypePriceGranularity")),p=(0,a.a)(e.cpm,"object"==typeof u?u:d.b.getConfig("customPriceBucket"),d.b.getConfig("currency.granularityMultiplier"));return e.pbLg=p.low,e.pbMg=p.med,e.pbHg=p.high,e.pbAg=p.auto,e.pbDg=p.dense,e.pbCg=p.custom,e}(n);b.emit(v.EVENTS.BID_ACCEPTED,o),o.mediaType===g.d?function(e,t,n,{index:a=ne.index}={}){let o=!0;const s=(0,r.a)(a.getMediaTypes({requestId:t.originalRequestId||t.requestId,transactionId:t.transactionId}),"video"),c=s&&(0,r.a)(s,"context"),l=s&&(0,r.a)(s,"useCacheKey");d.b.getConfig("cache.url")&&(l||c!==f.b)&&(!t.videoCacheKey||d.b.getConfig("cache.ignoreBidderCacheKey")?(o=!1,z(e,t,n,s)):t.vastUrl||((0,i.U)("videoCacheKey specified but not required vastUrl for video bid"),o=!1)),o&&(_(e,t),n())}(t,o,e):(null!=o.native&&"object"==typeof o.native&&P(o),_(t,o),e())}))}function w(e,n,r){return h(e,n,(e=>{n.rejectionReason=r,(0,i.X)(`Bid from ${n.bidder||"unknown bidder"} was rejected: ${r}`,n),b.emit(v.EVENTS.BID_REJECTED,n),t.addBidRejected(n),e()}))}function S(){let n=t.getBidRequests();const r=d.b.getConfig("auctionOptions");if(c.add(this),r&&!(0,i.L)(r)){const e=r.secondaryBidders;e&&!n.every((t=>(0,m.c)(e,t.bidderCode)))&&(n=n.filter((t=>!(0,m.c)(e,t.bidderCode))))}s=n.every((e=>c.has(e))),this.bids.forEach((e=>{u[e.bidId]||(t.addNoBid(e),b.emit(v.EVENTS.NO_BID,e))})),s&&0===o&&e()}return{addBidResponse:function(){function e(e,t){O.call({dispatch:y},e,t,(()=>{let n=!1;return i=>{n||(w(e,t,i),n=!0)}})())}return e.reject=w,e}(),adapterDone:function(){B(I.a.resolve()).finally((()=>S.call(this)))}}}(ie,this);y.a.callBids(h,e,n.addBidResponse,n.adapterDone,{request(e,n){s(T,n),s(t,e),x[e]||(x[e]={SRA:!0,origin:n}),t[e]>1&&(x[e].SRA=!1)},done(e){T[e]--,A[0]&&o(A[0])&&A.shift()}},j,re,u)}};function o(e){let t=!0,n=d.b.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some((e=>{let i=1,r=void 0!==e.src&&e.src===v.S2S.SRC?"s2s":e.bidderCode;return x[r]&&(!1===x[r].SRA&&(i=Math.min(e.bids.length,n)),T[x[r].origin]+i>n&&(t=!1)),!t})),t&&e.run(),t}function s(e,t){void 0===e[t]?e[t]=1:e[t]++}o(n)||((0,i.X)("queueing auction due to limited endpoint capacity"),A.push(n))}return b.on(v.EVENTS.SEAT_NON_BID,(e=>{var t;e.auctionId===k&&(t=e.seatnonbid,Q=Q.concat(t))})),{addBidReceived:function(e){K=K.concat(e)},addBidRejected:function(e){G=G.concat(e)},addNoBid:function(e){J=J.concat(e)},callBids:function(){W="started",F=Date.now();let e=p.measureTime("requestBids.makeRequests",(()=>y.a.makeBidRequests(h,F,k,j,S,u,p)));(0,i.V)(`Bids Requested for Auction with id: ${k}`,e),p.checkpoint("callBids"),e.length<1?((0,i.X)("No valid bid requests returned for auction"),ie()):U.call({dispatch:ae,context:this},e)},addWinningBid:function(t){const n=e.find((e=>e.transactionId===t.transactionId));Z=Z.concat(t),(0,i.d)(t),y.a.callBidWonBidder(t.adapterCode||t.bidder,t,e),n&&!n.deferBilling&&y.a.callBidBillableBidder(t)},setBidTargeting:function(e){y.a.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:()=>Z,getAuctionStart:()=>F,getAuctionEnd:()=>V,getTimeout:()=>j,getAuctionId:()=>k,getAuctionStatus:()=>W,getAdUnits:()=>h,getAdUnitCodes:()=>C,getBidRequests:()=>H,getBidsReceived:()=>K,getNoBids:()=>J,getNonBids:()=>Q,getFPD:()=>u,getMetrics:()=>p,end:q.promise}}const O=(0,p.b)("sync",(function(e,t){this.dispatch.call(null,e,t)}),"addBidResponse"),B=(0,p.b)("sync",(e=>e),"responsesReady"),U=(0,p.b)("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),N=(0,p.b)("async",(function(e,t){t&&t()}),"bidsBackCallback");function _(e,t){!function(e){let t;const n=!0===h.a.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0;e.bidderCode&&(n||e.dealId)&&(t=function(e,t,{index:n=ne.index}={}){if(!t)return{};const i=n.getBidRequest(t);var r={};return J(r,K(t.mediaType,e),t,i),e&&h.a.getOwn(e,v.JSON_MAPPING.ADSERVER_TARGETING)&&(J(r,h.a.ownSettingsFor(e),t,i),t.sendStandardTargeting=h.a.get(e,"sendStandardTargeting")),t.native&&(r=Object.assign({},r,(0,o.g)(t))),r}(e.bidderCode,e)),e.adserverTargeting=Object.assign(e.adserverTargeting||{},t)}(t),(0,w.d)(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),b.emit(v.EVENTS.BID_RESPONSE,t)}const P=e=>{const t=ne.index.getAdUnit(e)?.nativeOrtbRequest,n=e.native?.ortb;if(t&&n){const i=(0,o.j)(n,t);Object.assign(e.native,i)}},j=e=>{!function(e,t,n=s.a){const i={puts:e.map(c)};n(d.b.getConfig("cache.timeout"))(d.b.getConfig("cache.url"),function(e){return{success:function(t){let n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,n){e(new Error(`Error storing video ad in the cache: ${t}: ${JSON.stringify(n)}`),[])}}}(t),JSON.stringify(i),{contentType:"text/plain",withCredentials:!0})}(e.map((e=>e.bidResponse)),(function(t,n){n.forEach(((n,r)=>{const{auctionInstance:a,bidResponse:o,afterBidAdded:s}=e[r];var c;t?(0,i.X)(`Failed to save to the video cache: ${t}. Video bid must be discarded.`):""===n.uuid?(0,i.X)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(o.videoCacheKey=n.uuid,o.vastUrl||(o.vastUrl=(c=o.videoCacheKey,`${d.b.getConfig("cache.url")}?uuid=${c}`)),_(a,o),s())}))}))};let $,q;d.b.getConfig("cache",(e=>{$="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,q="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));const F=((e=setTimeout,t=j)=>{let n=[[]],i=!1;const r=e=>e();return function(a,o,s){const d=q>0?e:r;n[n.length-1].length>=$&&n.push([]),n[n.length-1].push({auctionInstance:a,bidResponse:o,afterBidAdded:s}),i||(i=!0,d((()=>{n.forEach(t),n=[[]],i=!1}),q))}})(),z=(0,p.b)("async",(function(e,t,n){F(e,t,n)}),"callPrebidCache");function M(e,t,n){if(e&&n){if(e===g.d){const e=(0,r.a)(t,`${g.d}.context`,"instream");if(n[`${g.d}-${e}`])return n[`${g.d}-${e}`]}return n[e]}}const V=e=>t=>{const n=e||((e,{index:t=ne.index}={})=>{const n=M(e.mediaType,t.getMediaTypes(e),d.b.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&n?"string"==typeof n?n:"custom":d.b.getConfig("priceGranularity")})(t);return n===v.GRANULARITY_OPTIONS.AUTO?t.pbAg:n===v.GRANULARITY_OPTIONS.DENSE?t.pbDg:n===v.GRANULARITY_OPTIONS.LOW?t.pbLg:n===v.GRANULARITY_OPTIONS.MEDIUM?t.pbMg:n===v.GRANULARITY_OPTIONS.HIGH?t.pbHg:n===v.GRANULARITY_OPTIONS.CUSTOM?t.pbCg:void 0},L=()=>e=>e.creativeId?e.creativeId:"",W=()=>e=>e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:"",G=()=>e=>e.meta&&(e.meta.networkId||e.meta.networkName)?(0,r.a)(e,"meta.networkName")||(0,r.a)(e,"meta.networkId"):"",X=()=>e=>e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:"";function H(e,t){return{key:e,val:"function"==typeof t?function(e,n){return t(e,n)}:function(e){return(0,i.w)(e,t)}}}function K(e,t){const n=v.TARGETING_KEYS,a=Object.assign({},h.a.settingsFor(null));if(a[v.JSON_MAPPING.ADSERVER_TARGETING]||(a[v.JSON_MAPPING.ADSERVER_TARGETING]=function(){const e=v.TARGETING_KEYS;return[H(e.BIDDER,"bidderCode"),H(e.AD_ID,"adId"),H(e.PRICE_BUCKET,V()),H(e.SIZE,"size"),H(e.DEAL,"dealId"),H(e.SOURCE,"source"),H(e.FORMAT,"mediaType"),H(e.ADOMAIN,W()),H(e.ACAT,X()),H(e.DSP,G()),H(e.CRID,L())]}()),"video"===e){const e=a[v.JSON_MAPPING.ADSERVER_TARGETING].slice();if(a[v.JSON_MAPPING.ADSERVER_TARGETING]=e,[n.UUID,n.CACHE_ID].forEach((t=>{void 0===(0,m.b)(e,(e=>e.key===t))&&e.push(H(t,"videoCacheKey"))})),d.b.getConfig("cache.url")&&(!t||!1!==h.a.get(t,"sendStandardTargeting"))){const t=(0,i.bb)(d.b.getConfig("cache.url"));void 0===(0,m.b)(e,(e=>e.key===n.CACHE_HOST))&&e.push(H(n.CACHE_HOST,(function(e){return(0,r.a)(e,`adserverTargeting.${n.CACHE_HOST}`)?e.adserverTargeting[n.CACHE_HOST]:t.hostname})))}}return a}function J(e,t,n,r){var a=t[v.JSON_MAPPING.ADSERVER_TARGETING];return n.size=n.getSize(),(a||[]).forEach((function(a){var o=a.key,s=a.val;if(e[o]&&(0,i.X)("The key: "+o+" is being overwritten"),(0,i.M)(s))try{s=s(n,r)}catch(e){(0,i.U)("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==v.TARGETING_KEYS.DEAL&&o!==v.TARGETING_KEYS.ACAT&&o!==v.TARGETING_KEYS.DSP&&o!==v.TARGETING_KEYS.CRID||!(0,i.K)(s)&&null!=s?e[o]=s:(0,i.V)("suppressing empty key '"+o+"' from adserver targeting")})),e}function Y(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}function Z(e){Object.assign(this,{getAuction({auctionId:t}){if(null!=t)return e().find((e=>e.getAuctionId()===t))},getAdUnit({transactionId:t}){if(null!=t)return e().flatMap((e=>e.getAdUnits())).find((e=>e.transactionId===t))},getMediaTypes({transactionId:e,requestId:t}){if(null!=t){const n=this.getBidRequest({requestId:t});if(null!=n&&(null==e||n.transactionId===e))return n.mediaTypes}else if(null!=e){const t=this.getAdUnit({transactionId:e});if(null!=t)return t.mediaTypes}},getBidderRequest({requestId:t,bidderRequestId:n}){if(null!=t||null!=n){let i=e().flatMap((e=>e.getBidRequests()));return null!=n&&(i=i.filter((e=>e.bidderRequestId===n))),null==t?i[0]:i.find((e=>e.bids&&null!=e.bids.find((e=>e.bidId===t))))}},getBidRequest({requestId:t}){if(null!=t)return e().flatMap((e=>e.getBidRequests())).flatMap((e=>e.bids)).find((e=>e&&e.bidId===t))}})}var Q=n(108),ee=n(78);const te="minBidCacheTTL",ne=function(){let e=null;const t=(0,Q.a)({startTime:e=>e.end.then((()=>e.getAuctionEnd())),ttl:t=>null==e?null:t.end.then((()=>1e3*Math.max(e,...t.getBidsReceived().map(ee.a))))});(0,ee.b)((()=>{null!=e&&t.refresh()})),d.b.getConfig(te,(n=>{const i=e;e=n?.[te],e="number"==typeof e?e:null,i!==e&&t.refresh()}));const n={};function r(e){for(const n of t)if(n.getAuctionId()===e)return n}function a(){return t.toArray().flatMap((e=>e.getBidsReceived()))}return n.addWinningBid=function(e){const t=(0,w.d)(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","render.pending"),t.timeBetween("requestBids","bidWon","render.e2e");const n=r(e.auctionId);n?(e.status=v.BID_STATUS.RENDERED,n.addWinningBid(e)):(0,i.X)("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:e=>e.getAuctionStatus()===E},getAdUnitCodes:{post:i.lb}}).forEach((([e,{name:i=e,pre:r,post:a}])=>{const o=null==r?e=>e[i]():e=>r(e)?e[i]():[],s=null==a?e=>e:e=>e.filter(a);n[e]=()=>s(t.toArray().flatMap(o))})),n.getAllBidsForAdUnitCode=function(e){return a().filter((t=>t&&t.adUnitCode===e))},n.createAuction=function(e){const n=k(e);return function(e){t.add(e)}(n),n},n.findBidByAdId=function(e){return a().find((t=>t.adId===e))},n.getStandardBidderAdServerTargeting=function(){return K()[v.JSON_MAPPING.ADSERVER_TARGETING]},n.setStatusForBids=function(e,t){let i=n.findBidByAdId(e);if(i&&(i.status=t),i&&t===v.BID_STATUS.BID_TARGETING_SET){const e=r(i.auctionId);e&&e.setBidTargeting(i)}},n.getLastAuctionId=function(){const e=t.toArray();return e.length&&e[e.length-1].getAuctionId()},n.clearAllAuctions=function(){t.clear()},n.index=new Z((()=>t.toArray())),n}()},(e,t,n)=>{n.d(t,{a:()=>d,b:()=>o,c:()=>c});var i=n(68),r=n.n(i),a=n(11);let o=r()({ready:r().SYNC|r().ASYNC|r().QUEUE});const s=(0,a.b)();o.ready=(()=>{const e=o.ready;return function(){try{return e.apply(o,arguments)}finally{s.resolve()}}})(),s.promise;const d=o.get;function c(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((t=>[t,{get:()=>e[t]}])))),t}},(e,t,n)=>{n.d(t,{a:()=>a});const i=window,r=i.hubjs=i.hubjs||{};function a(){return r}r.cmd=r.cmd||[],r.que=r.que||[],i===window&&(i._pbjsGlobals=i._pbjsGlobals||[],i._pbjsGlobals.push("hubjs"))},(e,t,n)=>{n.d(t,{a:()=>a,b:()=>o});const i=0,r=1;class a{#e;#t;static timeout(e=0){return new a((t=>{0===e?t():setTimeout(t,e)}))}constructor(e){if("function"!=typeof e)throw new Error("resolver not a function");const t=[],n=[];let[a,o]=[i,r].map((e=>function(r){if(e===i&&"function"==typeof r?.then)r.then(a,o);else if(!t.length)for(t.push(e,r);n.length;)n.shift()()}));try{e(a,o)}catch(e){o(e)}this.#e=t,this.#t=n}then(e,t){const n=this.#e;return new this.constructor(((r,a)=>{const o=()=>{let o=n[1],[s,d]=n[0]===i?[e,r]:[t,a];if("function"==typeof s){try{o=s(o)}catch(e){return void a(e)}d=r}d(o)};n.length?o():this.#t.push(o)}))}catch(e){return this.then(null,e)}finally(e){let t;return this.then((n=>(t=n,e())),(n=>(t=this.constructor.reject(n),e()))).then((()=>t))}static#n(e,t,n){let i=e.length;function r(){t.apply(this,arguments),--i<=0&&n&&n()}0===e.length&&n?n():e.forEach(((e,t)=>this.resolve(e).then((e=>r(!0,e,t)),(e=>r(!1,e,t)))))}static race(e){return new this(((t,n)=>{this.#n(e,((e,i)=>e?t(i):n(i)))}))}static all(e){return new this(((t,n)=>{let i=[];this.#n(e,((e,t,r)=>e?i[r]=t:n(t)),(()=>t(i)))}))}static allSettled(e){return new this((t=>{let n=[];this.#n(e,((e,t,i)=>n[i]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}),(()=>t(n)))}))}static resolve(e){return new this((t=>t(e)))}static reject(e){return new this(((t,n)=>n(e)))}}function o({promiseFactory:e=(e=>new a(e))}={}){function t(e){return t=>e(t)}let n,i;return{promise:e(((e,t)=>{n=e,i=t})),resolve:t(n),reject:t(i)}}},(e,t,n)=>{n.d(t,{a:()=>d,b:()=>m,c:()=>s,d:()=>o,e:()=>a,f:()=>c,g:()=>u,h:()=>p,i:()=>l,j:()=>f});var i=n(13),r=n(9);const a="component",o=a+"Type",s=a+"Name",d="adapterCode",c="storageType",l="configName",u="syncType",p="syncUrl",m="_config";function f(e){return function(t,n,r){const c={[o]:t,[s]:n,[a]:`${t}.${n}`};return t===i.b&&(c[d]=e(n)),g(Object.assign(c,r))}}const g=(0,r.b)("sync",(e=>e))},(e,t,n)=>{n.d(t,{a:()=>s,b:()=>r,c:()=>i,d:()=>o,e:()=>a});const i="prebid",r="bidder",a="userId",o="rtd",s="analytics"},(e,t,n)=>{n.d(t,{a:()=>s});var i=n(6),r=n(0),a=n(10),o=n(5);const s=new class{constructor(e,t){this.getSettings=e,this.defaultScope=t}get(e,t){let n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}getOwn(e,t){return e=this.#i(e),(0,i.a)(this.getSettings(),`${e}.${t}`)}getScopes(){return Object.keys(this.getSettings()).filter((e=>e!==this.defaultScope))}settingsFor(e){return(0,r.Z)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}ownSettingsFor(e){return e=this.#i(e),this.getSettings()[e]||{}}#i(e){return e??this.defaultScope}}((()=>(0,a.a)().bidderSettings||{}),o.JSON_MAPPING.BD_SETTING_STANDARD)},(e,t,n)=>{n.d(t,{a:()=>r});var i=n(46);const r=e=>{let t;return(...n)=>(t??=i.a.tryCatch((()=>e(...n))),t.get())}},(e,t,n)=>{n.d(t,{a:()=>r,b:()=>i});const i=e=>new Promise((t=>setTimeout(t,1e3*e))),r=()=>{let e,t;return{promise:new Promise(((n,i)=>{e=n,t=i})),resolve:e,reject:t}}},(e,t,n)=>{n.d(t,{a:()=>l});var i=n(26),r=n(7),a=n(4),o=n(1);const{warn:s,error:d}=a.a.tag("errors"),c=(e,t,n,r,...a)=>{if(i.d.value){const s=`${t} \n ${a.filter((e=>(0,o.q)(e))).join("\n")}`;i.d.value({errorCode:e,message:s,stack:n,secondaryCode:r})}else s(`trying to report error code #${e} but error reporting module was not setup`);d(`#${e}:`,t,n,...a)},l=(e,...t)=>{if(e instanceof r.c){const n=`${e.source?e.source.stack:e.stack}`;return c(e.code,e.message,n,e.secondaryCode,...t)}if(e instanceof r.b){const n=`${e.source?e.source.stack:e.stack}`;return c(e.code,e.message,n,void 0,...t)}const n=`${e.stack}`;c(r.a.unexpected,e.message,n,void 0,...t)}},(e,t,n)=>{var i=n(4);const{error:r}=i.a.tag("assert")},(e,t,n)=>{n.d(t,{a:()=>s,b:()=>o});var i=n(16),r=n(15);const a=(0,i.a)(),o=a.promise,s=(0,r.a)((e=>{a.resolve(e)}))},(e,t,n)=>{n.r(t),n.d(t,{addEvents:()=>I,clearEvents:()=>S,emit:()=>v,get:()=>b,getEvents:()=>y,has:()=>w,off:()=>h,on:()=>g});var i=n(0),r=n(5),a=n(108),o=n(2);const s="eventHistoryTTL";let d=null;const c=(0,a.a)({monotonic:!0,ttl:()=>d});o.b.getConfig(s,(e=>{const t=d;e=e?.[s],d="number"==typeof e?1e3*e:null,t!==d&&c.refresh()}));let l=Array.prototype.slice,u=Array.prototype.push,p=Object.values(r.EVENTS);const m=r.EVENT_ID_PATHS,f=function(){let e={},t={};function n(e){return p.includes(e)}return t.has=n,t.on=function(t,r,a){if(n(t)){let n=e[t]||{que:[]};a?(n[a]=n[a]||{que:[]},n[a].que.push(r)):n.que.push(r),e[t]=n}else i.U("Wrong event name : "+t+" Valid event names :"+p)},t.emit=function(t){!function(t,n){i.W("Emitting event for: "+t);let r=n[0]||{},a=r[m[t]],o=e[t]||{que:[]};var s=Object.keys(o);let d=[];c.add({eventType:t,args:r,id:a,elapsedTime:i.t()}),a&&s.includes(a)&&u.apply(d,o[a].que),u.apply(d,o.que),(d||[]).forEach((function(e){if(e)try{e.apply(null,n)}catch(e){i.U("Error executing handler:","events.js",e,t)}}))}(t,l.call(arguments,1))},t.off=function(t,n,r){let a=e[t];i.L(a)||i.L(a.que)&&i.L(a[r])||r&&(i.L(a[r])||i.L(a[r].que))||(r?(a[r].que||[]).forEach((function(e){let t=a[r].que;e===n&&t.splice(t.indexOf(e),1)})):(a.que||[]).forEach((function(e){let t=a.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=a)},t.get=function(){return e},t.addEvents=function(e){p=p.concat(e)},t.getEvents=function(){return c.toArray().map((e=>Object.assign({},e)))},t}();i.a(f.emit.bind(f));const{on:g,off:h,get:b,getEvents:y,emit:v,addEvents:I,has:w}=f;function S(){c.clear()}},(e,t,n)=>{n.d(t,{a:()=>o,b:()=>a});var i=n(0),r=n(12);const[a,o]=function(e=(0,i.db)("Activity control:")){const t={};function n(e){return t[e]=t[e]||[]}function a(t,n,i,a){let o;try{o=i(a)}catch(i){e.logError(`Exception in rule ${n} for '${t}'`,i),o={allow:!1,reason:i}}return o&&Object.assign({activity:t,name:n,component:a[r.e]},o)}const o={};function s({activity:t,name:n,allow:i,reason:r,component:a}){const s=`${n} ${i?"allowed":"denied"} '${t}' for '${a}'${r?":":""}`,d=o.hasOwnProperty(s);if(d&&clearTimeout(o[s]),o[s]=setTimeout((()=>delete o[s]),1e3),!d){const t=[s];r&&t.push(r),(i?e.logInfo:e.logWarn).apply(e,t)}}return[function(e,t,i,r=10){const a=n(e),o=a.findIndex((([e])=>r<e)),s=[r,t,i];return a.splice(o<0?a.length:o,0,s),function(){const e=a.indexOf(s);e>=0&&a.splice(e,1)}},function(e,t){let i,r;for(const[o,d,c]of n(e)){if(i!==o&&r)break;i=o;const n=a(e,d,c,t);if(n){if(!n.allow)return s(n),!1;r=n}}return r&&s(r),!0}]}()},(e,t,n)=>{n.d(t,{a:()=>G,b:()=>z});var i=n(0),r=n(6),a=n(32),o=n(74),s=n(33),d=n(2),c=n(9),l=n(3),u=n(77),p=n(45),m=n(69),f=n(20),g=n(5),h=n(24),b=n(8),y=n(13),v=n(21),I=n(23),w=n(12);const S=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map((e=>`user.${e}`)).concat("device.ext.cdep"),C=["user.eids","user.ext.eids"],R=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"];function E(e){return Object.assign({get(){},run(e,t,n,i,r){const a=n&&n[i];if(function(e){return null!=e&&("object"!=typeof e||Object.keys(e).length>0)}(a)&&r()){const e=this.get(a);void 0===e?delete n[i]:n[i]=e}}},e)}function T(e){return e.forEach((e=>{e.paths=e.paths.map((e=>{const t=e.split("."),n=t.pop();return[t.length>0?t.join("."):null,n]}))})),function(t,n,...i){const a=[],o=function(e,...t){return function(n){return e.hasOwnProperty(n.name)||(e[n.name]=!!n.applies(...t)),e[n.name]}}(t,...i);return e.forEach((e=>{if(!1!==t[e.name])for(const[i,s]of e.paths){const d=null==i?n:(0,r.a)(n,i);if(a.push(e.run(n,i,d,s,o.bind(null,e))),!1===t[e.name])return}})),a.filter((e=>null!=e))}}function x(e,t=v.a){return function(n){return!t(e,n)}}const A=function(e=v.a){const t=T(function(e=v.a){return[{name:I.j,paths:S,applies:x(I.j,e)},{name:I.g,paths:C,applies:x(I.g,e)},{name:I.h,paths:R,applies:x(I.h,e),get:e=>Math.round(100*(e+Number.EPSILON))/100},{name:I.i,paths:["source.tid"],applies:x(I.i,e)}].map(E)}(e)),n=T(function(e=v.a){return[{name:I.g,paths:["userId","userIdAsEids"],applies:x(I.g,e)},{name:I.i,paths:["ortb2Imp.ext.tid"],applies:x(I.i,e)}].map(E)}(e));return function(e){const i={};return{ortb2:n=>(t(i,n,e),n),bidRequest:t=>(n(i,t,e),t)}}}();(0,v.b)(I.i,"enableTIDs config",(()=>{if(!d.b.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}}));const D="pbsBidAdapter",k={CLIENT:"client",SERVER:"server"},O={isAllowed:v.a,redact:A};let B={},U=B.bidderRegistry={},N=B.aliasRegistry={},_=[];d.b.getConfig("s2sConfig",(e=>{e&&e.s2sConfig&&(_=(0,i.I)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var P={};const j=(0,w.j)((e=>B.resolveAlias(e))),$=(0,c.b)("sync",(function({bidderCode:e,auctionId:t,bidderRequestId:n,adUnits:a,src:o,metrics:s}){return a.reduce(((a,d)=>{const c=d.bids.filter((t=>t.bidder===e));return null==e&&0===c.length&&null!=d.s2sBid&&c.push({bidder:null}),a.push(c.reduce(((e,a)=>{const c=null==(a=Object.assign({},a,{ortb2Imp:(0,i.Z)({},d.ortb2Imp,a.ortb2Imp)},(0,i.r)(d,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?d.mediaTypes:a.mediaTypes;return(0,i.T)(c)?a=Object.assign({},a,{mediaTypes:c}):(0,i.U)(`mediaTypes is not correctly configured for adunit ${d.code}`),e.push(Object.assign({},a,{adUnitCode:d.code,transactionId:d.transactionId,sizes:(0,r.a)(c,"banner.sizes")||(0,r.a)(c,"video.playerSize")||[],bidId:a.bid_id||(0,i.u)(),bidderRequestId:n,auctionId:t,src:o,metrics:s,bidRequestsCount:u.a.getRequestsCounter(d.code),bidderRequestsCount:u.a.getBidderRequestsCounter(d.code,a.bidder),bidderWinsCount:u.a.getBidderWinsCounter(d.code,a.bidder)})),e}),[])),a}),[]).reduce(i.m,[]).filter((e=>""!==e))}),"getBids"),q=(0,c.b)("sync",(function(e,t,{getS2SBidders:n=z}={}){if(null==t)return e;{const i=n(t);return e.filter((e=>i.has(e.bidder)))}}),"filterBidsForAdUnit"),F=(0,c.b)("sync",(e=>e),"setupAdUnitMediaTypes");function z(e){(0,i.I)(e)||(e=[e]);const t=new Set([null]);return e.filter((e=>e&&e.enabled)).flatMap((e=>e.bidders)).forEach((e=>t.add(e))),t}const M=(0,c.b)("sync",(function(e,t,{getS2SBidders:n=z}={}){const r=n(t);return(0,i.p)(e).reduce(((e,t)=>(e[r.has(t)?k.SERVER:k.CLIENT].push(t),e)),{[k.CLIENT]:[],[k.SERVER]:[]})}),"partitionBidders");function V(e,t){const n=U[e],i=n?.getSpec&&n.getSpec();if(i&&i[t]&&"function"==typeof i[t])return[i,i[t]]}function L(e,t,n,r,...a){try{(0,i.V)(`Invoking ${e}.${t}`),d.b.runWithBidder(e,r.bind(n,...a))}catch(n){(0,i.X)(`Error calling ${t} of ${e}`)}}function W(e,t,n){if(n?.src!==g.S2S.SRC){const i=V(e,t);null!=i&&L(e,t,...i,n)}}B.makeBidRequests=(0,c.b)("sync",(function(e,t,n,r,o,s={},c){c=(0,h.d)(c),f.emit(g.EVENTS.BEFORE_REQUEST_BIDS,e),(0,a.c)(e),e.forEach((e=>{(0,i.Q)(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter((e=>!e.bidder||O.isAllowed(I.d,j(y.b,e.bidder))))})),e=F(e,o);let{[k.CLIENT]:u,[k.SERVER]:b}=M(e,_);d.b.getConfig("bidderSequence")===d.a&&(u=(0,i.hb)(u));const v=(0,p.a)();let S=[];const C=s.global||{},R=s.bidder||{};function E(e,t){const r=O.redact(null!=t?t:j(y.b,e.bidderCode)),a=Object.freeze(r.ortb2((0,i.Z)({source:{tid:n}},C,R[e.bidderCode])));return e.ortb2=a,e.bids=e.bids.map((e=>(e.ortb2=a,r.bidRequest(e)))),e}_.forEach((r=>{const a=function(e){return j(y.c,D,{[w.i]:e.configName})}(r);if(r&&r.enabled&&O.isAllowed(I.d,a)){let{adUnits:o,hasModuleBids:s}=function(e,t){let n=(0,i.j)(e),r=!1;return n.forEach((e=>{const n=e.bids.filter((e=>e.module===D&&e.params?.configName===t.configName));1===n.length?(e.s2sBid=n[0],r=!0,e.ortb2Imp=(0,i.Z)({},e.s2sBid.ortb2Imp,e.ortb2Imp)):n.length>1&&(0,i.X)('Multiple "module" bids for the same s2s configuration; all will be ignored',n),e.bids=q(e.bids,t).map((e=>(e.bid_id=(0,i.u)(),e)))})),n=n.filter((e=>0!==e.bids.length||null!=e.s2sBid)),{adUnits:n,hasModuleBids:r}}(e,r),d=(0,i.n)();(0===b.length&&s?[null]:b).forEach((e=>{const s=(0,i.u)(),l=c.fork(),u=E({bidderCode:e,auctionId:n,bidderRequestId:s,uniquePbsTid:d,bids:$({bidderCode:e,auctionId:n,bidderRequestId:s,adUnits:(0,i.j)(o),src:g.S2S.SRC,metrics:l}),auctionStart:t,timeout:r.timeout,src:g.S2S.SRC,refererInfo:v,metrics:l},a);0!==u.bids.length&&S.push(u)})),o.forEach((e=>{let t=e.bids.filter((e=>(0,l.b)(S,(t=>(0,l.b)(t.bids,(t=>t.bidId===e.bid_id))))));e.bids=t})),S.forEach((e=>{void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=o.filter((e=>e.bids.length>0||null!=e.s2sBid)))}))}}));let T=function(e){let t=(0,i.j)(e);return t.forEach((e=>{e.bids=q(e.bids,null)})),t=t.filter((e=>0!==e.bids.length)),t}(e);return u.forEach((e=>{const a=(0,i.u)(),s=c.fork(),d=E({bidderCode:e,auctionId:n,bidderRequestId:a,bids:$({bidderCode:e,auctionId:n,bidderRequestId:a,adUnits:(0,i.j)(T),labels:o,src:"client",metrics:s}),auctionStart:t,timeout:r,refererInfo:v,metrics:s}),l=U[e];l||(0,i.U)(`Trying to make a request for bidder that does not exist: ${e}`),l&&d.bids&&0!==d.bids.length&&S.push(d)})),S.forEach((e=>{m.e.getConsentData()&&(e.gdprConsent=m.e.getConsentData()),m.g.getConsentData()&&(e.uspConsent=m.g.getConsentData()),m.f.getConsentData()&&(e.gppConsent=m.f.getConsentData())})),S}),"makeBidRequests"),B.callBids=(e,t,n,r,a,o,c,l={})=>{if(!t.length)return void(0,i.X)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?");let[u,p]=t.reduce(((e,t)=>(e[Number(void 0!==t.src&&t.src===g.S2S.SRC)].push(t),e)),[[],[]]);var m=[];p.forEach((e=>{for(var t=-1,n=0;n<m.length;++n)if(e.uniquePbsTid===m[n].uniquePbsTid){t=n;break}t<=-1&&m.push(e)}));let h=0;_.forEach((e=>{if(e&&m[h]&&z(e).has(m[h].bidderCode)){const t=(0,s.a)(o,a?{request:a.request.bind(null,"s2s"),done:a.done}:void 0);let d=e.bidders;const u=U[e.adapter];let b=m[h].uniquePbsTid,y=m[h].adUnitsS2SCopy,v=p.filter((e=>e.uniquePbsTid===b));if(u){let a={ad_units:y,s2sConfig:e,ortb2Fragments:l};if(a.ad_units.length){let e=v.map((e=>(e.start=(0,i.ib)(),function(){c(e.bidderRequestId),r.apply(e,arguments)})));const o=(0,i.p)(a.ad_units).filter((e=>d.includes(e)));(0,i.W)(`CALLING S2S HEADER BIDDERS ==== ${o.length>0?o.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only'}`),v.forEach((e=>{f.emit(g.EVENTS.BID_REQUESTED,{...e,tid:e.auctionId})})),u.callBids(a,p,n,(()=>e.forEach((e=>e()))),t)}}else(0,i.U)("missing "+e.adapter);h++}})),u.forEach((e=>{e.start=(0,i.ib)();const t=U[e.bidderCode];d.b.runWithBidder(e.bidderCode,(()=>{(0,i.W)("CALLING BIDDER"),f.emit(g.EVENTS.BID_REQUESTED,e)}));let l=(0,s.a)(o,a?{request:a.request.bind(null,e.bidderCode),done:a.done}:void 0);const u=r.bind(e);try{d.b.runWithBidder(e.bidderCode,t.callBids.bind(t,e,n,u,l,(()=>c(e.bidderRequestId)),d.b.callbackWithBidder(e.bidderCode)))}catch(t){(0,i.U)(`${e.bidderCode} Bid Adapter emitted an uncaught error when parsing their bidRequest`,{e:t,bidRequest:e}),u()}}))},B.videoAdapters=[],B.registerBidAdapter=function(e,t,{supportedMediaTypes:n=[]}={}){e&&t?"function"==typeof e.callBids?(U[t]=e,m.b.register(y.b,t,e.getSpec?.().gvlid),(0,l.c)(n,"video")&&B.videoAdapters.push(t),(0,l.c)(n,"native")&&a.h.push(t)):(0,i.U)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):(0,i.U)("bidAdapter or bidderCode not specified")},B.aliasBidAdapter=function(e,t,n){if(void 0===U[t]){let r=U[e];if(void 0===r){const n=[];_.forEach((i=>{if(i.bidders&&i.bidders.length){const r=i&&i.bidders;i&&(0,l.c)(r,t)?N[t]=e:n.push(e)}})),n.forEach((e=>{(0,i.U)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{let s,d=function(e){let t=[];return(0,l.c)(B.videoAdapters,e)&&t.push("video"),(0,l.c)(a.h,e)&&t.push("native"),t}(e);if(r.constructor.prototype!=Object.prototype)s=new r.constructor,s.setBidderCode(t);else{let a=r.getSpec(),d=n&&n.gvlid;null!=a.gvlid&&null==d&&(0,i.X)(`Alias '${t}' will NOT re-use the GVL ID of the original adapter ('${a.code}', gvlid: ${a.gvlid}). Functionality that requires TCF consent may not work as expected.`);let c=n&&n.skipPbsAliasing;s=(0,o.a)(Object.assign({},a,{code:t,gvlid:d,skipPbsAliasing:c})),N[t]=e}B.registerBidAdapter(s,t,{supportedMediaTypes:d})}catch(t){(0,i.U)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,i.W)('alias name "'+t+'" has been already specified.')},B.resolveAlias=function(e){let t,n=e;for(;N[n]&&(!t||!t.has(n));)n=N[n],(t=t||new Set).add(n);return n},B.registerAnalyticsAdapter=function({adapter:e,code:t,gvlid:n}){e&&t?"function"==typeof e.enableAnalytics?(e.code=t,P[t]={adapter:e,gvlid:n},m.b.register(y.a,t,n)):(0,i.U)(`Prebid Error: Analytics adaptor error for analytics "${t}"\n        analytics adapter must implement an enableAnalytics() function`):(0,i.U)("Prebid Error: analyticsAdapter or analyticsCode not specified")},B.enableAnalytics=function(e){(0,i.I)(e)||(e=[e]),e.forEach((e=>{const t=P[e.provider];t&&t.adapter?O.isAllowed(I.e,j(y.a,e.provider,{[w.b]:e}))&&t.adapter.enableAnalytics(e):(0,i.U)(`Prebid Error: no analytics adapter found in registry for '${e.provider}'.`)}))},B.getBidAdapter=function(e){return U[e]},B.getAnalyticsAdapter=function(e){return P[e]},B.callTimedOutBidders=function(e,t,n){t=t.map((t=>(t.params=(0,i.v)(e,t.adUnitCode,t.bidder),t.timeout=n,t))),t=(0,i.z)(t,"bidder"),Object.keys(t).forEach((e=>{W(e,"onTimeout",t[e])}))},B.callBidWonBidder=function(e,t,n){t.params=(0,i.v)(n,t.adUnitCode,t.bidder),u.a.incrementBidderWinsCounter(t.adUnitCode,t.bidder),W(e,"onBidWon",t)},B.callBidBillableBidder=function(e){W(e.bidder,"onBidBillable",e)},B.callSetTargetingBidder=function(e,t){W(e,"onSetTargeting",t)},B.callBidViewableBidder=function(e,t){W(e,"onBidViewable",t)},B.callBidderError=function(e,t,n){W(e,"onBidderError",{error:t,bidderRequest:n})},B.callDataDeletionRequest=(0,c.b)("sync",(function(...e){const t="onDataDeletionRequest";Object.keys(U).filter((e=>!N.hasOwnProperty(e))).forEach((n=>{const i=V(n,t);if(null!=i){const r=b.a.getBidsRequested().filter((e=>function(e){const t=new Set;for(;N.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=N[e];return e}(e.bidderCode)===n));L(n,t,...i,r,...e)}})),Object.entries(P).forEach((([n,r])=>{const a=r?.adapter?.[t];if("function"==typeof a)try{a.apply(r.adapter,e)}catch(e){(0,i.U)(`error calling ${t} of ${n}`,e)}}))}));const G=B},(e,t,n)=>{n.d(t,{a:()=>i,b:()=>o,c:()=>a,d:()=>s,e:()=>d,f:()=>r,g:()=>c,h:()=>u,i:()=>p,j:()=>l});const i="accessDevice",r="syncUser",a="enrichUfpd",o="enrichEids",s="fetchBids",d="reportAnalytics",c="transmitEids",l="transmitUfpd",u="transmitPreciseGeo",p="transmitTid"},(e,t,n)=>{n.d(t,{a:()=>f,b:()=>h,c:()=>b,d:()=>m});var i=n(2);const r="performanceMetrics",a=window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now(),o=new WeakMap;function s({now:e=a,mkNode:t=l,mkTimer:n=c,mkRenamer:i=(e=>e),nodes:r=o}={}){return function(){return function a(o,s=(e=>({forEach(t){t(e)}}))){s=i(s);const d=function(e){return o.dfWalk({visit(t,n){const i=n.timestamps;if(i.hasOwnProperty(e))return i[e]}})};function c(e,t){const n=s(e);o.dfWalk({follow:(e,t)=>t.propagate&&(!e||!e.stopPropagation),visit(e,i){n.forEach((n=>{null==e?i.metrics[n]=t:(i.groups.hasOwnProperty(n)||(i.groups[n]=[]),i.groups[n].push(t))}))}})}function l(t){return n(e,(e=>c(t,e)))}function u(){let e={};return o.dfWalk({visit(t,n){e=Object.assign({},!t||t.includeGroups?n.groups:null,n.metrics,e)}}),e}const p={startTiming:l,measureTime:function(e,t){return l(e).stopAfter(t)()},measureHookTime:function(e,t,n){const i=l(e);return n(function(e){const t=i.stopBefore(e);return t.bail=e.bail&&i.stopBefore(e.bail),t.stopTiming=i,t.untimed=e,t}(t))},checkpoint:function(t){o.timestamps[t]=e()},timeSince:function(t,n){const i=d(t),r=null!=i?e()-i:null;return null!=n&&c(n,r),r},timeBetween:function(e,t,n){const i=d(e),r=d(t),a=null!=i&&null!=r?r-i:null;return null!=n&&c(n,a),a},setMetric:c,getMetrics:u,fork:function({propagate:e=!0,stopPropagation:n=!1,includeGroups:i=!1}={}){return a(t([[o,{propagate:e,stopPropagation:n,includeGroups:i}]]),s)},join:function(e,{propagate:t=!0,stopPropagation:n=!1,includeGroups:i=!1}={}){const a=r.get(e);null!=a&&a.addParent(o,{propagate:t,stopPropagation:n,includeGroups:i})},newMetrics:function(){return a(o.newSibling(),s)},renameWith:function(e){return a(o,e)},toJSON:()=>u()};return r.set(p,o),p}(t([]))}}function d(e,t,n){return function(){t&&t();try{return e.apply(this,arguments)}finally{n&&n()}}}function c(e,t){const n=e();let i=!1;function r(){i||(t(e()-n),i=!0)}return r.stopBefore=e=>d(e,r),r.stopAfter=e=>d(e,null,r),r}function l(e){return{metrics:{},timestamps:{},groups:{},addParent(t,n){e.push([t,n])},newSibling:()=>l(e.slice()),dfWalk({visit:t,follow:n=(()=>!0),visited:i=new Set,inEdge:r}={}){let a;if(!i.has(this)){if(i.add(this),a=t(r,this),null!=a)return a;for(const[o,s]of e)if(n(r,s)&&(a=o.dfWalk({visit:t,follow:n,visited:i,inEdge:s}),null!=a))return a}}}}const u=(()=>{const e=function(){},t=()=>({}),n={forEach:e},i=()=>null;i.stopBefore=e=>e,i.stopAfter=e=>e;const r=Object.defineProperties({dfWalk:e,newSibling:()=>r,addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((e=>[e,{get:t}]))));return s({now:()=>0,mkNode:()=>r,mkRenamer:()=>()=>n,mkTimer:()=>i,nodes:{get:e,set:e}})()})();let p=!0;function m(e){return p&&e||u}i.b.getConfig(r,(e=>{p=!!e[r]}));const f=(()=>{const e=s();return function(){return p?e():u}})();function g(e,t){return function(n,i){return function(r,...a){const o=this;return m(t.apply(o,a)).measureHookTime(e+n,r,(function(e){return i.call(o,e,...a)}))}}}const h=g("requestBids.",(e=>e.metrics)),b=g("addBidResponse.",((e,t)=>t.metrics))},(e,t,n)=>{n.d(t,{a:()=>o,b:()=>s});var i=n(1),r=n(48);class a{pushEvent;constructor(e){this.pushEvent=e}next(e){this.pushEvent(e)}}class o{factory;eventRetention=!1;observers=[];lastEvent=void 0;constructor(...e){if(0===e.length)this.factory=r.a;else if(2===e.length)this.factory=e[0],this.eventRetention=e[1];else{const t=e[0];(0,i.e)(t)?(this.eventRetention=t,this.factory=r.a):this.factory=t}this.eventRetention&&this.factory(new a(this.next.bind(this)))}next(e){for(const t of this.observers)t(e);this.lastEvent=e}get value(){return this.lastEvent}subscribe(e){this.eventRetention?(this.observers.push(e),void 0!==this.lastEvent&&e(this.lastEvent)):this.factory(new a(e))}pipe(e){return new o((t=>{this.subscribe((n=>{const i=e(n);void 0!==i&&t.next(i)}))}))}static of(e){return new o((async t=>{t.next(await e)}))}}const s=e=>new o((t=>{const n=[void 0,void 0];e.forEach(((e,i)=>{e.subscribe((e=>{n[i]=e;const[r,a]=n;void 0!==r&&void 0!==a&&t.next([r,a])}))}))}))},(e,t,n)=>{n.d(t,{a:()=>c,b:()=>l,c:()=>u,d:()=>d,e:()=>f,f:()=>m,g:()=>s,h:()=>o,i:()=>p});var i=n(105),r=n(47),a=n(106);const o=new i.a("Renderers"),s=new r.a,d=new r.a,c=new a.a("prebid-bid-formatters"),l=new a.a("bid-iab-vendorids"),u=new a.a("content-providers"),p=new Set,m=new r.a,f=new r.a},(e,t,n)=>{n.d(t,{a:()=>r,b:()=>l,c:()=>d,d:()=>c,e:()=>a,f:()=>u,g:()=>o});var i=n(58);const r="production",a="production"===r,o="1.6.0-8587-gb34963387",s=["prv","beta"],d=(()=>{const e=!a;return s.reduce(((e,t)=>(0,i.a)(t)??e),void 0)??e})(),c=!d,l=()=>(0,i.a)("autorefresh")??!0,u=!a||(["prv","peek","gravity"].reduce(((e,t)=>(0,i.a)(t)??e),void 0)??!1)},(e,t,n)=>{n.d(t,{a:()=>E});var i=n(4),r=n(35),a=n(25),o=n(7);const{debug:s,info:d,error:c}=i.a.tag("cmp:api");var l=n(71),u=n(19),p=n(103),m=n(30),f=n(109),g=n(16),h=n(104),b=n(1);const y=e=>(0,b.m)(e)&&Object.values(e).every((e=>(0,b.e)(e))),v=e=>(0,b.m)(e)&&(0,b.n)(e.consents,y)&&(0,b.n)(e.legitimateInterests,y),I=e=>(0,b.m)(e)&&(0,b.n)(e.tcString,b.q)&&(0,b.n)(e.purpose,v)&&(0,b.n)(e.vendor,v);var w=n(31);const S=(0,g.a)(),C=new a.a((async e=>{(await(async({cmpTimeout:e,totalConsentTimeout:t})=>{d("started waiting for cmp...");const n=await(e=>{const t=Date.now();return s(`checking cmp... (timeout=${e}s)`),(0,r.b)((0,r.a)({interval:.1,maxTryCount:10*e}),(()=>{if(window.__tcfapi)return!0})).then((e=>{const n=Date.now()-t;return e?(s(`__tcfapi found in ${n/1e3}s`),{status:"found",elapsed:n}):(s(`no cmp found, timeout after ${n/1e3}s`),{status:"missing",elapsed:n})}))})(e);return"found"===n.status?(({cmpLatency:e,maxDuration:t})=>new a.a((n=>{d(`retrieving consent from __tcfapi (maxDuration=${t})`);const i=(()=>{let t=!0;const n=Date.now();return i=>{const r={...i,cmpLatency:t?e:0,consentLatency:t?Date.now()-n:0};return t=!1,r}})();try{new a.a((e=>{if(!window.__tcfapi)throw new Error("No CMP available for 'addEventListener'!");window.__tcfapi("addEventListener",2,((t,n)=>{n?e.next(t):c("__tcfapi call failed for command 'addEventListener'!")}))})).subscribe((e=>{(e=>{const t=e.eventStatus?.toLowerCase();return!!t&&("useractioncomplete"===t||"tcloaded"===t)})(e)&&n.next(i({tcData:e,cmpStatus:"useractioncomplete"===e.eventStatus?.toLowerCase()?"user":"loaded"}))}))}catch(e){return reportError(new o.b(o.a.consentManagementError,e)),n.next(i({cmpStatus:"error"}))}})))({cmpLatency:n.elapsed,maxDuration:t-n.elapsed}):a.a.of({cmpStatus:"missing",cmpLatency:n.elapsed,consentLatency:0})})(await S.promise)).subscribe((t=>{e.next(t)}))}),!0),R=(0,h.a)({cmp:C,storagePolicy:a.a.of(p.a)},{name:"consent",assumeConsentBeforeCmp:!1}),E=new m.a({name:"turbo-cmp",expirationInterval:2592e3,storageType:()=>R,stream:()=>C,customEncoder:(()=>{const e=(0,w.a)((0,f.a)(I));return{encode:e=>{if(!e.value.tcData)return null;const t={value:e.value.tcData,fetchTime:e.fetchTime};return JSON.stringify(t)},decode:t=>{const n=e(JSON.parse(t));if(!n.value)throw new Error(`stored data does not contain appropriate consent and will be ignored: "${t}"`);return{fetchTime:n.fetchTime,value:{cmpStatus:"cached",tcData:n.value,cmpLatency:0,consentLatency:0}}}}})()});S.promise,u.b.then((e=>{const{consentTimeout:t,cmpTimeout:n}=e.consent;S.resolve({totalConsentTimeout:t,cmpTimeout:n})})),(0,g.b)(1).then((()=>S.resolve(l.a)))},(e,t,n)=>{n.d(t,{a:()=>i,b:()=>a,c:()=>r});const i={storageAccess:1,personalization:2,adSelectionDeliveryReporting:3,contentSelectionDeliveryReporting:4,measurement:5},r=(e,t,n=!1)=>{const i=e?.purpose?.consents?.[t],r=e?.purpose?.legitimateInterests?.[t];return i??r??n},a=e=>e?.tcString},(e,t,n)=>{n.d(t,{a:()=>c});var i=n(4),r=(n(18),n(109)),a=n(84),o=n(31),s=n(1),d=n(25);class c{#r;#a;#o;#s;#d;#c;#l;#u=!1;#p=!1;constructor(e){this.#r=e,this.#a=i.a.tag(`bundle:${e.name}`),this.#d=`hbv:bundle:${this.#r.name}`;const t=e.validator??o.b;this.#l=(0,o.a)((0,r.a)(t)),e.validator||this.#a.debug("validator should be provided to bundle option and will become mandatory"),this.#s=e.storageType(),this.#o=new d.a(!0);const n=this.#o.pipe((e=>{if("origin"===e?.source)return e}));(0,d.b)([this.#s,n]).subscribe((([e,t])=>{this.#m(e,t)})),this.#c=new d.a((async e=>{if(this.#a.debug("started loading from source..."),this.#u=!0,this.#r.loader)try{const t=await Promise.resolve(this.#r.loader());e.next(t)}catch(e){this.#a.error("Loading from loader failed",e)}finally{this.#u=!1}else{if(this.#p)return;this.#p=!0,this.#r.stream().subscribe((t=>e.next(t)))}})).pipe((e=>(this.#a.info("a new value was retrieved from origin:",e),this.#o.next({value:e,fetchTime:Date.now(),source:"origin"}),e))),this.#f()}#g=async()=>this.#r.keySuffix?`${this.#d}-${await this.#r.keySuffix()}`:this.#d;#m=async(e,t)=>{try{const n=t?this.#h({fetchTime:t.fetchTime,value:t.value}):null;(0,a.b)(e,await this.#g(),n)}catch(n){this.#a.error(`error while persisting data to storage '${e}'`,t)}};#b=e=>this.#r.customEncoder?this.#r.customEncoder.decode(e):this.#l(JSON.parse(e));#h=e=>this.#r.customEncoder?this.#r.customEncoder.encode(e):JSON.stringify(e);_fetchTask=()=>this.#u?this.#y():void 0;#f=async(e=!1)=>{const t=await this.#g();this.#a.debug("started loading of cached data...");let n=!1;this.#s.subscribe((i=>{if(n)return;n=!0;const r=(0,a.a)(i,t);if(!r)return;const o=this.#b(r);if((0,s.r)(this.#o.value)||e){const t=e?" (forced)":"";this.#a.debug(`cached data will be used${t}:`,o),this.#o.next({...o,source:"cache"})}else this.#a.debug("cached data won't be used because data is already available",o)}))};#v;#y=async()=>(this.#u||(this.#u=!0,this.#v=new Promise((e=>{this.#c.subscribe((t=>{this.#u=!1,e(t)}))}))),this.#v);#I=(e,t)=>!(0,s.r)(this.#r.freshnessInterval)&&t-e.fetchTime<1e3*this.#r.freshnessInterval;#w=(e,t)=>t-e.fetchTime>1e3*this.#r.expirationInterval;updatedValue=()=>{const e=Date.now(),t=this.#o.value;if(t&&this.#I(t,e))return this.#a.info("current data is fresh enough and won't be refreshed right now",t.value),Promise.resolve(t.value);const n=this.#y();return t&&!this.#w(t,e)?(this.#a.info("current data will be used and bundle will be refreshed in background if needed",t),Promise.resolve(t.value)):(this.#a.info("current data is expired or unavailable and bundle must wait for refresh task"),n)};fetchIfNeeded=()=>this.updatedValue();clearData=()=>{this.#m("local-storage",null)};get asStream(){return this.#o.pipe((e=>{if((0,s.i)(e)&&!this.#w(e,Date.now()))return e.value}))}get currentValue(){const e=this.#o.value;return e&&!this.#w(e,Date.now())?e.value:this.#r.defaultValue}}},(e,t,n)=>{n.d(t,{a:()=>v,b:()=>I,c:()=>y}),n(30);var i=n(1),r=n(57);const a=new Set([r.b.no,r.b.yes]),o=e=>(0,i.m)(e);var s=n(60),d=n(61);const c=new Set([0,1,2,3,4,5,6,7,8]),l=new Set([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),u=new Set([s.a.vpaid10,s.a.vpaid20,s.a.mraid1,s.a.ormma,s.a.mraid2,s.a.mraid3,s.a.omid1]),p=new Set([d.a.vast10,d.a.vast20,d.a.vast30,d.a.vast10Wrapper,d.a.vast20Wrapper,d.a.vast30Wrapper,d.a.vast40,d.a.vast40Wrapper,d.a.daast10,d.a.daast10Wrapper,d.a.vast41,d.a.vast41Wrapper,d.a.vast42,d.a.vast42Wrapper]),m=new Set([1,2,3]),f=e=>(0,i.q)(e),g=e=>(0,i.l)(e)&&l.has(e),h=e=>(0,i.m)(e)&&(0,i.q)(e.id)&&(0,i.q)(e.impid)&&(0,i.l)(e.price)&&((0,i.j)(e.adid)||(0,i.q)(e.adid))&&((0,i.j)(e.nurl)||(0,i.q)(e.nurl))&&((0,i.j)(e.adm)||(0,i.q)(e.adm))&&((0,i.j)(e.adomain)||(0,i.b)(e.adomain,i.q))&&((0,i.j)(e.bundle)||(0,i.q)(e.bundle))&&((0,i.j)(e.iurl)||(0,i.q)(e.iurl))&&((0,i.j)(e.cid)||(0,i.q)(e.cid))&&((0,i.j)(e.crid)||(0,i.q)(e.crid))&&((0,i.j)(e.cat)||(0,i.b)(e.cat,f))&&((0,i.j)(e.attr)||(0,i.b)(e.attr,g))&&((0,i.j)(e.api)||(e=>(0,i.l)(e)&&u.has(e))(e.api))&&((0,i.j)(e.protocol)||(e=>(0,i.l)(e)&&p.has(e))(e.protocol))&&((0,i.j)(e.qagmediarating)||(e=>(0,i.l)(e)&&m.has(e))(e.qagmediarating))&&((0,i.j)(e.dealid)||(0,i.q)(e.dealid))&&((0,i.j)(e.w)||(0,i.l)(e.w))&&((0,i.j)(e.h)||(0,i.l)(e.h))&&((0,i.j)(e.exp)||(0,i.l)(e.exp))&&((0,i.j)(e.ext)||o(e.ext)),b=e=>(0,i.m)(e)&&((0,i.j)(e.bid)||(0,i.b)(e.bid,h))&&((0,i.j)(e.seat)||(0,i.q)(e.seat))&&((0,i.j)(e.group)||(e=>(0,i.l)(e)&&a.has(e))(e.group))&&((0,i.j)(e.ext)||o(e.ext)),y=e=>(0,i.m)(e)&&(0,i.q)(e.id)&&((0,i.j)(e.seatbid)||(0,i.b)(e.seatbid,b))&&((0,i.j)(e.bidid)||(0,i.q)(e.bidid))&&((0,i.j)(e.cur)||(e=>(0,i.q)(e))(e.cur))&&((0,i.j)(e.customdata)||(0,i.q)(e.customdata))&&((0,i.j)(e.nbr)||(e=>(0,i.l)(e)&&c.has(e))(e.nbr))&&((0,i.j)(e.ext)||o(e.ext)),v=e=>t=>{if(!e(t))throw new Error("validation failed");return t},I=()=>!0},(e,t,n)=>{n.d(t,{a:()=>l,b:()=>N,c:()=>S,d:()=>E,e:()=>k,f:()=>D,g:()=>T,h:()=>c,i:()=>R,j:()=>j});var i=n(6),r=n(0),a=n(3),o=n(8),s=n(5),d=n(43);const c=[],l=Object.keys(s.NATIVE_KEYS).map((e=>s.NATIVE_KEYS[e])),u={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},{NATIVE_ASSET_TYPES:p,NATIVE_IMAGE_TYPES:m,PREBID_NATIVE_DATA_KEYS_TO_ORTB:f,NATIVE_KEYS_THAT_ARE_NOT_ASSETS:g,NATIVE_KEYS:h}=s,b=$(f),y=$(p),v={img:1,js:2,1:"img",2:"js"},I={impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4};function w(e){if(e&&e.type&&(!(!(t=e.type)||!(0,a.c)(Object.keys(u),t))||((0,r.U)(`${t} nativeParam is not supported`),!1))&&(e=u[e.type]),!e||!e.ortb||C(e.ortb))return e;var t}function S(e){e.forEach((e=>{const t=e.nativeParams||(0,i.a)(e,"mediaTypes.native");t&&(e.nativeParams=w(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||function(e){if(!e&&!(0,r.Q)(e))return void(0,r.U)("Native assets object is empty or not an object: ",e);const t={ver:"1.2",assets:[]};for(let n in e){if(g.includes(n))continue;if(!h.hasOwnProperty(n)){(0,r.U)(`Unrecognized native asset code: ${n}. Asset will be ignored.`);continue}if("privacyLink"===n){t.privacy=1;continue}const i=e[n];let a=0;i.required&&(0,r.J)(i.required)&&(a=Number(i.required));const o={id:t.assets.length,required:a};if(n in f)o.data={type:p[f[n]]},i.len&&(o.data.len=i.len);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?m.ICON:m.MAIN},i.aspect_ratios)if((0,r.I)(i.aspect_ratios))if(i.aspect_ratios.length){const{min_width:e,min_height:t}=i.aspect_ratios[0];(0,r.O)(e)&&(0,r.O)(t)?(o.img.wmin=e,o.img.hmin=t):(0,r.U)("image.aspect_ratios min_width or min_height are invalid: ",e,t);const n=i.aspect_ratios.filter((e=>e.ratio_width&&e.ratio_height)).map((e=>`${e.ratio_width}:${e.ratio_height}`));n.length>0&&(o.img.ext={aspectratios:n})}else(0,r.U)("image.aspect_ratios was passed, but it's empty:",i.aspect_ratios);else(0,r.U)("image.aspect_ratios was passed, but it's not a an array:",i.aspect_ratios);i.sizes&&(2===i.sizes.length&&(0,r.O)(i.sizes[0])&&(0,r.O)(i.sizes[1])?(o.img.w=i.sizes[0],o.img.h=i.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,r.U)("image.sizes was passed, but its value is not an array of integers:",i.sizes))}else"title"===n?o.title={len:i.len||140}:"ext"===n&&(o.ext=i,delete o.required);t.assets.push(o)}return t}(e.nativeParams))}))}function C(e){const t=e.assets;if(!Array.isArray(t)||0===t.length)return(0,r.U)("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;const n=t.map((e=>e.id));return t.length!==new Set(n).size||n.some((e=>e!==parseInt(e,10)))?((0,r.U)("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?((0,r.U)("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((e=>function(e){if(!(0,r.Q)(e))return(0,r.U)("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!(0,r.P)(e.img.w)&&!(0,r.P)(e.img.wmin))return(0,r.U)("for img asset there must be 'w' or 'wmin' property"),!1;if(!(0,r.P)(e.img.h)&&!(0,r.P)(e.img.hmin))return(0,r.U)("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!(0,r.P)(e.title.len))return(0,r.U)("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!(0,r.P)(e.data.type))return(0,r.U)("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&(0,r.P)(e.video.minduration)&&(0,r.P)(e.video.maxduration)))return(0,r.U)("video asset is not properly configured"),!1;return!0}(e)))}function R(e,{index:t=o.a.index}={}){const n=t.getAdUnit(e);if(!n)return!1;let s=n.nativeOrtbRequest;return function(e,t){if(!(0,i.a)(e,"link.url"))return(0,r.U)("native response doesn't have 'link' property. Ortb response: ",e),!1;let n=t.assets.filter((e=>1===e.required)).map((e=>e.id)),o=e.assets.map((e=>e.id));const s=n.every((e=>(0,a.c)(o,e)));return s||(0,r.U)(`didn't receive a bid with all required assets. Required ids: ${n}, but received ids in response: ${o}`),s}(e.native?.ortb||P(e.native,s),s)}function E(e,t){const n=t.native.ortb||_(t.native);return"click"===e.action?function(e,t=null,{fetchURL:n=r.kb}={}){if(t){const i=(e.assets||[]).filter((e=>e.link)).reduce(((e,t)=>(e[t.id]=t.link,e)),{}),r=e.link?.clicktrackers||[];let a=i[t],o=r;a&&(o=a.clicktrackers||[]),o.forEach((e=>n(e)))}else(e.link?.clicktrackers||[]).forEach((e=>n(e)))}(n,e?.assetId):function(e,{runMarkup:t=(e=>(0,r.D)(e)),fetchURL:n=r.kb}={}){const i=(e.eventtrackers||[]).filter((e=>e.event===I.impression));let{img:a,js:o}=i.reduce(((e,t)=>(v.hasOwnProperty(t.method)&&e[v[t.method]].push(t.url),e)),{img:[],js:[]});e.imptrackers&&(a=a.concat(e.imptrackers)),a.forEach((e=>n(e))),o=o.map((e=>`<script async src="${e}"><\/script>`)),e.jstracker&&(o=o.concat([e.jstracker])),o.length&&t(o.join("\n"))}(n),e.action}function T(e,{index:t=o.a.index}={}){let n={};const r=t.getAdUnit(e);(0,i.a)(r,"nativeParams.rendererUrl")?e.native.rendererUrl=O(r.nativeParams.rendererUrl):(0,i.a)(r,"nativeParams.adTemplate")&&(e.native.adTemplate=O(r.nativeParams.adTemplate));const a=!1!==(0,i.a)(r,"nativeParams.sendTargetingKeys"),d=function(e){const t={};return(0,i.a)(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((e=>{t[e]=`hb_native_${e}`})),{...s.NATIVE_KEYS,...t}}(r),c={...e.native,...e.native.ext};return delete c.ext,Object.keys(c).forEach((t=>{const o=d[t];let s=O(e.native[t])||O((0,i.a)(e,`native.ext.${t}`));if("adTemplate"===t||!o||!s)return;let c=(0,i.a)(r,`nativeParams.${t}.sendId`);"boolean"!=typeof c&&(c=(0,i.a)(r,`nativeParams.ext.${t}.sendId`)),c&&(s=`${o}:${e.adId}`);let l=(0,i.a)(r,`nativeParams.${t}.sendTargetingKeys`);"boolean"!=typeof l&&(l=(0,i.a)(r,`nativeParams.ext.${t}.sendTargetingKeys`)),("boolean"==typeof l?l:a)&&(n[o]=s)})),n}function x(e,t,n,{index:i=o.a.index}={}){const r={message:"assetResponse",adId:e.adId},a=i.getAdUnit(t);let d=t.native;return t.native.ortb?r.ortb=t.native.ortb:a.mediaTypes?.native?.ortb&&(r.ortb=P(t.native,a.nativeOrtbRequest)),r.assets=[],(n??Object.keys(d)).forEach((function(e){if("adTemplate"===e&&d[e])r.adTemplate=O(d[e]);else if("rendererUrl"===e&&d[e])r.rendererUrl=O(d[e]);else if("ext"===e)Object.keys(d[e]).forEach((t=>{if(d[e][t]){const n=O(d[e][t]);r.assets.push({key:t,value:n})}}));else if(d[e]&&s.NATIVE_KEYS.hasOwnProperty(e)){const t=O(d[e]);r.assets.push({key:e,value:t})}})),r}const A=Object.fromEntries(Object.entries(s.NATIVE_KEYS).map((([e,t])=>[t,e])));function D(e,t){const n=e.assets.map((e=>A[e]));return x(e,t,n)}function k(e,t){return x(e,t,null)}function O(e){return e?.url||e}function B(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}function U(e){if(!C(e))return;const t={};for(const n of e.assets){if(n.title){const e={required:!!n.required&&Boolean(n.required),len:n.title.len};t.title=e}else if(n.img){const e={required:!!n.required&&Boolean(n.required)};if(n.img.w&&n.img.h)e.sizes=[n.img.w,n.img.h];else if(n.img.wmin&&n.img.hmin){const t=B(n.img.wmin,n.img.hmin);e.aspect_ratios=[{min_width:n.img.wmin,min_height:n.img.hmin,ratio_width:n.img.wmin/t,ratio_height:n.img.hmin/t}]}n.img.type===m.MAIN?t.image=e:t.icon=e}else if(n.data){let e=Object.keys(p).find((e=>p[e]===n.data.type)),i=Object.keys(f).find((t=>f[t]===e));t[i]={required:!!n.required&&Boolean(n.required)},n.data.len&&(t[i].len=n.data.len)}e.privacy&&(t.privacyLink={required:!1})}return t}function N(e){{if(!e||!(0,r.I)(e))return e;if(!e.some((e=>(e?.mediaTypes||{})[d.c]?.ortb)))return e;let t=(0,r.j)(e);for(const e of t)e.mediaTypes&&e.mediaTypes[d.c]&&e.mediaTypes[d.c].ortb&&(e.mediaTypes[d.c]=Object.assign((0,r.cb)(e.mediaTypes[d.c],g),U(e.mediaTypes[d.c].ortb)),e.nativeParams=w(e.mediaTypes[d.c]));return t}}function _(e){const t={link:{},eventtrackers:[]};return Object.entries(e).forEach((([e,n])=>{switch(e){case"clickUrl":t.link.url=n;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(n)?n:[n];break;case"impressionTrackers":(Array.isArray(n)?n:[n]).forEach((e=>{t.eventtrackers.push({event:I.impression,method:v.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(n)?n.join(""):n;break;case"privacyLink":t.privacy=n}})),t}function P(e,t){const n={..._(e),assets:[]};function i(e,i){let a=t.assets.find(e);null!=a&&(a=(0,r.j)(a),i(a),n.assets.push(a))}return Object.keys(e).filter((t=>!!e[t])).forEach((t=>{const n=O(e[t]);switch(t){case"title":i((e=>null!=e.title),(e=>{e.title={text:n}}));break;case"image":case"icon":const e="image"===t?m.MAIN:m.ICON;i((t=>null!=t.img&&t.img.type===e),(e=>{e.img={url:n}}));break;default:t in f&&i((e=>null!=e.data&&e.data.type===p[f[t]]),(e=>{e.data={value:n}}))}})),n}function j(e,t){const n={},i=t?.assets||[];n.clickUrl=e.link.url,n.privacyLink=e.privacy;for(const t of e?.assets||[]){const e=i.find((e=>t.id===e.id));t.title?n.title=t.title.text:t.img?n[e.img.type===m.MAIN?"image":"icon"]={url:t.img.url,width:t.img.w,height:t.img.h}:t.data&&(n[b[y[e.data.type]]]=t.data.value)}n.impressionTrackers=[];let r=[];e.imptrackers&&n.impressionTrackers.push(...e.imptrackers);for(const t of e?.eventtrackers||[])t.event===I.impression&&t.method===v.img&&n.impressionTrackers.push(t.url),t.event===I.impression&&t.method===v.js&&r.push(t.url);return r=r.map((e=>`<script async src="${e}"><\/script>`)),e?.jstracker&&r.push(e.jstracker),r.length&&(n.javascriptTrackers=r.join("\n")),n}function $(e){var t={};for(var n in e)t[e[n]]=n;return t}},(e,t,n)=>{n.d(t,{a:()=>u,b:()=>p});var i=n(2),r=n(0);const a={fetch:window.fetch.bind(window),makeRequest:(e,t)=>new Request(e,t),timeout(e,t){const n=new AbortController;let i=setTimeout((()=>{n.abort(),(0,r.U)(`Request timeout after ${e}ms`,t),i=null}),e);return{signal:n.signal,done(){i&&clearTimeout(i)}}}},o="GET",s="POST",d="Content-Type";function c(e=3e3,{request:t,done:n}={}){let r=(t,n)=>{let r;null==e||null!=n?.signal||i.b.getConfig("disableAjaxTimeout")||(r=a.timeout(e,t),n=Object.assign({signal:r.signal},n));let o=a.fetch(t,n);return null!=r?.done&&(o=o.finally(r.done)),o};return null==t&&null==n||(r=(e=>function(i,r){const a=new URL(null==i?.url?i:i.url,document.location).origin;let o=e(i,r);return t&&t(a),n&&(o=o.finally((()=>n(a)))),o})(r)),r}function l({status:e,statusText:t="",headers:n,url:i},a){let o=0;function s(e){if(0===o)try{o=(new DOMParser).parseFromString(a,n?.get(d)?.split(";")?.[0])}catch(t){o=null,e&&e(t)}return o}return{readyState:XMLHttpRequest.DONE,status:e,statusText:t,responseText:a,response:a,responseType:"",responseURL:i,get responseXML(){return s(r.U)},getResponseHeader:e=>n?.has(e)?n.get(e):null,toJSON(){return Object.assign({responseXML:s()},this)},getAllResponseHeaders:()=>n?Array.from(n).flat().join():""}}function u(e=3e3,{request:t,done:n}={}){const i=c(e,{request:t,done:n});return function(e,t,n,c={}){!function(e,t){const{success:n,error:i}="object"==typeof t&&null!=t?t:{success:"function"==typeof t?t:()=>null,error:(e,t)=>(0,r.U)("Network error",e,t)};e.then((e=>e.text().then((t=>[e,t])))).then((([e,t])=>{const r=l(e,t);e.ok||304===e.status?n(t,r):i(e.statusText,r)}),(()=>i("",l({status:0},""))))}(i(function(e,t,n={}){const i=n.method||(t?s:o);if(i===o&&t){const i=(0,r.bb)(e,n);Object.assign(i.search,t),e=(0,r.c)(i)}const c=new Headers(n.customHeaders);c.set(d,n.contentType||"text/plain");const l={method:i,headers:c};return i!==o&&t&&(l.body=t),n.withCredentials&&(l.credentials="include"),n.browsingTopics&&isSecureContext&&(l.browsingTopics=!0),a.makeRequest(e,l)}(e,n,c)),t)}}const p=u();c()},(e,t,n)=>{n.d(t,{a:()=>r});var i=n(22);const r=(0,n(12).j)((e=>i.a.resolveAlias(e)))},(e,t,n)=>{n.d(t,{a:()=>a,b:()=>o});var i=n(16),r=n(1);const a=({interval:e,maxTryCount:t})=>{let n=1;return async()=>!((0,r.i)(t)&&n>=t||(await(0,i.b)(e),n+=1,0))},o=async(e,t)=>{let n=!0;do{const i=await t();if((0,r.i)(i))return i;n=await e()}while(n)}},(e,t,n)=>{n.d(t,{a:()=>c,b:()=>d,c:()=>o,d:()=>u,e:()=>p,f:()=>f,g:()=>b,h:()=>g,i:()=>h,j:()=>m,k:()=>y,l:()=>l,m:()=>s,n:()=>I,o:()=>v});var i=n(15),r=n(35),a=n(1);const o=e=>{for(;e.firstChild;)e.firstChild.remove()},s=(e,t)=>{for(const[n,i]of Object.entries(t)){const t=i.replace(/\s*!important\s*$/gi,""),r=i!==t;e.style.setProperty(n,t,r?"important":"")}},d=(e,t,n)=>{const i=e.getElementById(t)??((e,t)=>{const n=e.createElement("style");return n.id=t,e.head.append(n),n})(e,t);return o(i),i.append(document.createTextNode(n)),i},c=((0,i.a)(d),(e,t)=>d(document,e,t)),l=(e,{id:t,width:n,height:i})=>{t&&(e.id=t),s(e,{width:`${n}px`,height:`${i}px`,border:"0"});const r={marginheight:"0",marginwidth:"0",width:`${n}`,height:`${i}`,topmargin:"0",leftmargin:"0",allowtransparency:"true",scrolling:"no"};for(const[t,n]of Object.entries(r))e.setAttribute(t,n)},u=e=>{e.setAttribute("width","0"),e.setAttribute("height","0"),e.style.display="none",e.style.width="0px",e.style.height="0px",e.style.border="0"},p=e=>9===e.nodeType,m=e=>11===e.nodeType&&!!e.host,f=e=>1===e.nodeType,g=e=>{const t=e?.ownerDocument.defaultView;return!!t&&e instanceof t.HTMLIFrameElement},h=e=>{const t=e?.ownerDocument.defaultView;return!!t&&e instanceof t.HTMLElement},b=/Firefox\//i.test(navigator.userAgent),y=e=>(0,a.i)(e)&&"uninitialized"!==e.readyState,v=async(e,t)=>{await(0,r.b)((0,r.a)({interval:.01,maxTryCount:10}),(()=>y(e.contentDocument)||void 0)),t()},I=async e=>(0,r.b)((0,r.a)({interval:.01,maxTryCount:10}),(()=>y(e.contentDocument)?e.contentDocument:void 0))},(e,t,n)=>{n.d(t,{a:()=>i});const i={error:"lifecycle::error",refresh:"lifecycle::refresh",auctionStarted:"lifecycle::auction-started",auctionFinished:"lifecycle::auction-finished",auctionResolved:"lifecycle::auction-resolved",renderRequested:"lifecycle::render-requested",renderableRequested:"lifecycle::renderable-requested",impression:"lifecycle::impression",adrequest:"lifecycle::adrequest",amazonImp:"lifecycle::amazon-imp",measuredImp:"lifecycle::measured-imp",visibleImp:"lifecycle::visible-imp",renderedImp:"lifecycle::rendered-imp",backupRenderRequested:"lifecycle::backup-render-requested",carbonFilteredBid:"lifecycle::carbon-filtered-bid",AmazonRenderRequest:"lifecycle::amazon-render-request"}},(e,t,n)=>{n.d(t,{remoteConfiguration:()=>D});var i=n(30);const r={currencies:{lastUpdated:"2024-01-12T01:00:02.000Z",rates:{USD:{FJD:2.241251,MXN:16.907203,STD:20697.981008,LVL:.60489,SCR:13.26987,CDF:2684.999847,BBD:2.019386,GTQ:7.820934,CLP:913.969861,HNL:24.664635,UGX:3799.815065,ZAR:18.64315,TND:3.097498,SLE:22.489865,CUC:1,BSD:1.000082,SLL:19749.999412,SDG:600.999986,IQD:1310.182106,CUP:26.5,GMD:67.275025,TWD:31.055499,RSD:106.788021,DOP:58.602394,KMF:448.925029,MYR:4.643499,FKP:.785688,XOF:598.509202,GEL:2.68498,BTC:21577292e-12,UYU:39.464874,MAD:9.948499,CVE:100.874969,TOP:2.34815,AZN:1.69594,OMR:.384896,PGK:3.736921,KES:158.749823,SEK:10.257597,BTN:83.024765,UAH:37.89058,GNF:8555.000098,ERN:15,MZN:63.24995,ARS:815.464865,QAR:3.641024,IRR:42037.499,CNY:7.098012,THB:35.069921,UZS:12419.774343,XPF:109.601466,MRU:39.620179,BDT:109.767374,LYD:4.794983,BMD:1,KWD:.30734,PHP:56.018976,RUB:89.902491,PYG:7297.108942,ISK:136.750018,JMD:154.979298,COP:3918.48,MKD:56.039312,USD:1,DZD:134.641767,PAB:1.000187,GGP:.785688,SGD:1.330365,ETB:56.557925,JEP:.785688,KGS:89.319889,SOS:570.999949,VEF:3588288.841241,VUV:119.418996,LAK:20634.999599,BND:1.329677,ZMK:9001.216576,XAF:597.57674,LRD:188.950128,XAG:.04387,CHF:.851894,HRK:6.98177,ALL:94.652024,DJF:177.720364,VES:35.872231,ZMW:26.12803,TZS:2515.000287,VND:24490,XAU:492e-6,AUD:1.493407,ILS:3.74732,GHS:11.969823,GYD:209.2447,KPW:899.980852,BOB:6.910751,KHR:4095.000501,MDL:17.777089,IDR:15555.55,KYD:.833474,AMD:405.009964,BWP:13.497374,SHP:1.26975,TRY:30.069302,LBP:14990.975881,TJS:10.976496,JOD:.709399,AED:3.672898,HKD:7.81701,RWF:1265.014417,EUR:.911035,LSL:18.679634,DKK:6.793597,CAD:1.338275,BGN:1.78182,MMK:2100.310195,MUR:45.390123,NOK:10.297497,SYP:13002.098001,IMP:.785688,ZWL:321.999592,GIP:.785688,RON:4.530288,LKR:322.756673,NGN:958.049686,CRC:520.818624,CZK:22.489399,PKR:281.139661,XCD:2.70255,ANG:1.802504,HTG:131.728781,BHD:.376862,KZT:451.995518,SRD:36.930336,SZL:18.60874,LTL:2.95274,SAR:3.750176,TTD:6.788771,YER:250.349903,MVR:15.400637,AFN:69.505018,INR:83.056249,AWG:1.8,KRW:1315.195009,NPR:132.84109,JPY:145.235501,MNT:3419.608444,AOA:828.723998,PLN:3.96665,GBP:.78309,SBD:8.453689,BYN:3.27254,HUF:345.249702,BYR:19600,BIF:2858,MWK:1683.59585,MGA:4566.779933,XDR:.749469,BZD:2.015924,BAM:1.78175,EGP:30.897899,MOP:8.053949,NAD:18.679927,NIO:36.622528,PEN:3.700846,NZD:1.60301,WST:2.715648,TMT:3.5,CLF:.033123,BRL:4.871103}}}};var a=n(65),o=n(31),s=n(19),d=n(55),c=n(1);const l=e=>(0,c.m)(e)&&(0,c.n)(e.pageZones,(0,c.h)(c.d,c.q))&&(0,c.n)(e.layouts,(0,c.h)(c.d,c.q))&&(0,c.n)(e.placementIds,(0,c.h)(c.d,c.q))&&(0,c.n)(e.supportCodes,(0,c.h)(c.d,c.q))&&(0,c.n)(e.isConsentless,c.e)&&((0,c.n)(e.startDate,c.f)||!isNaN(Date.parse(e.startDate)))&&((0,c.n)(e.endDate,c.f)||!isNaN(Date.parse(e.endDate))),u=e=>(0,c.m)(e)&&("window"===e.type||"tcvars"===e.type||"datalayer"===e.type)&&(0,c.q)(e.key)&&(0,c.n)(e.values,(0,c.h)(c.b,c.q))&&(0,c.n)(e.regex,(0,c.h)(c.b,c.q)),p=e=>(0,c.m)(e)&&(0,c.n)(e.pageZones,(0,c.h)(c.d,c.q))&&(0,c.n)(e.layouts,(0,c.h)(c.d,c.q))&&(0,c.n)(e.placementIds,(0,c.h)(c.d,c.q))&&(0,c.n)(e.supportCodes,(0,c.h)(c.d,c.q))&&(0,c.n)(e.isConsentless,c.e)&&(0,c.n)(e.urlMatching,(0,c.h)(c.d,c.q))&&(0,c.n)(e.allowedDisplayFormats,(0,c.h)(c.b,c.q))&&((0,c.r)(e.viewability)||"atf"===e.viewability||"btf"===e.viewability)&&(0,c.n)(e.countries,(0,c.h)(c.d,c.q))&&(0,c.n)(e.allowedSizes,(0,c.h)(c.d,c.q))&&(0,c.n)(e.allowedCustomFormats,(0,c.h)(c.d,c.q))&&(0,c.n)(e.customTargeting,u),m=e=>(0,c.m)(e)&&p(e)&&(0,c.q)(e.name)&&((0,c.r)(e.priceFloor)||(0,c.l)(e.priceFloor))&&((0,c.r)(e.currency)||(0,c.q)(e.currency))&&((0,c.r)(e.startDate)||(0,c.f)(e.startDate)||!isNaN(Date.parse(e.startDate)))&&((0,c.r)(e.endDate)||(0,c.f)(e.endDate)||!isNaN(Date.parse(e.endDate)))&&(0,c.n)(e.isGuaranteed,c.e)&&(0,c.n)(e.conditions,(0,c.h)(c.d,p)),f=e=>(0,c.m)(e)&&l(e)&&(0,c.n)(e.displayFormats,(0,c.h)(c.d,c.q))&&(0,c.n)(e.bidders,(0,c.h)(c.d,c.q))&&(0,c.n)(e.enabledBehindFlag,c.e)&&(0,c.n)(e.countries,(0,c.h)(c.d,c.q))&&(0,c.n)(e.devices,(0,c.h)(c.d,c.q))&&(0,c.e)(e.disabled),g=e=>(0,c.m)(e)&&l(e)&&(0,c.n)(e.displayFormats,(0,c.h)(c.d,c.q))&&(0,c.l)(e.adjustment)&&(0,c.n)(e.devices,(0,c.h)(c.d,c.q))&&(0,c.n)(e.bidders,(0,c.h)(c.d,c.q))&&("adserver"===e.adjustmentKind||"cpm"===e.adjustmentKind),h=e=>(0,c.m)(e)&&(0,c.q)(e.device)&&(0,c.q)(e.support)&&(0,c.q)(e.creativeId),b=e=>(0,c.m)(e)&&(0,c.n)(e.pageZones,(0,c.h)(c.d,c.q))&&(0,c.n)(e.devices,(0,c.h)(c.d,c.q))&&(0,c.n)(e.placementIds,(0,c.h)(c.d,c.q))&&(0,c.n)(e.supportCodes,(0,c.h)(c.d,c.q))&&(0,c.n)(e.mediaTypes,(0,c.h)(c.d,(e=>"banner"===e||"video"===e)))&&("atf"===e.fold||"btf"===e.fold)&&((0,c.n)(e.startDate,c.f)||!isNaN(Date.parse(e.startDate)))&&((0,c.n)(e.endDate,c.f)||!isNaN(Date.parse(e.endDate))),y=e=>(0,c.m)(e)&&(0,c.n)(e.layouts,(0,c.h)(c.d,c.q))&&(0,c.n)(e.supportCodes,(0,c.h)(c.d,c.q))&&(0,c.n)(e.countries,(0,c.h)(c.d,c.q))&&(0,c.n)(e.pageZones,(0,c.h)(c.d,c.q))&&(0,c.n)(e.isConsentless,c.e)&&(0,c.n)(e.defaultFloor,c.l)&&(0,c.n)(e.currency,c.q)&&(0,c.b)(e.schema,c.q)&&(0,c.o)(e.floorRules,(e=>(0,c.l)(e)||(e=>(0,c.m)(e)&&(0,c.l)(e.floor)&&(0,c.n)(e.currency,c.q))(e)))&&((0,c.n)(e.startDate,c.f)||!isNaN(Date.parse(e.startDate)))&&((0,c.n)(e.endDate,c.f)||!isNaN(Date.parse(e.endDate))),v=e=>(0,c.m)(e)&&(0,c.d)(e.devices,c.q)&&(0,c.n)(e.categories,(0,c.h)(c.d,c.q))&&(0,c.n)(e.zones,(0,c.h)(c.d,c.q))&&(0,c.n)(e.placement,c.q)&&(0,c.n)(e.refresh,c.e)&&(0,c.n)(e.support,c.q)&&(0,c.o)(e.multiplierByHour,(e=>(0,c.l)(e))),I=e=>(0,c.m)(e)&&(0,c.b)(e.multipliers,v),w=e=>(0,c.m)(e)&&(0,c.o)(e.rates,(e=>(0,c.o)(e,(e=>(0,c.l)(e)))))&&(0,c.b)(e.bidders,c.q)&&(0,c.o)(e.dimensionValues,(e=>(0,c.b)(e,c.q)))&&(0,c.b)(e.contextDimensions,c.q),S=e=>(0,c.c)(e)&&e.every((e=>(0,c.m)(e)&&(0,c.e)(e.enabled)&&(0,c.n)(e.devices,(0,c.h)(c.b,c.q))&&(0,c.n)(e.supportCodes,(0,c.h)(c.b,c.q))&&(0,c.n)(e.placementIds,(0,c.h)(c.b,c.q))&&(0,c.n)(e.customTargeting,u))),C=e=>(0,c.m)(e)&&(0,c.n)(e.callRates,w)&&(0,c.n)(e.configs,S),R=e=>(0,c.m)(e)&&(0,c.n)(e.bidders,(0,c.h)(c.b,f))&&(0,c.n)(e.cpmAdjustments,(0,c.h)(c.b,g))&&(0,c.n)(e.deals,(0,c.h)(c.b,m))&&(0,c.n)(e.blacklistedCreatives,(0,c.h)(c.b,h))&&(0,c.n)(e.floors,(0,c.h)(c.b,y))&&(0,c.n)(e.folds,(0,c.h)(c.b,b))&&(0,c.n)(e.floorMultipliers,(0,c.h)(c.b,I))&&(0,c.n)(e.cleanr,C),E=e=>(0,c.m)(e)&&(e=>(0,c.m)(e)&&(0,c.o)(e.rates,(e=>(0,c.o)(e,(e=>(0,c.l)(e)))))&&(0,c.q)(e.lastUpdated))(e.currencies)&&(0,c.n)(e.publisherConfiguration,R),T=(0,o.a)(E),x=e=>{const t=(new Date).getTime(),{startDate:n,endDate:i}=e;return(!n||new Date(n).getTime()<t)&&(!i||t<new Date(i).getTime())},A={encode:e=>JSON.stringify(e),decode:e=>{const t=JSON.parse(e),{publisherConfiguration:n}=T(t.value);return n&&(n.bidders=n.bidders?.filter(x),n.cpmAdjustments=n.cpmAdjustments?.filter(x),n.deals=n.deals?.filter(x),n.floors=n.floors?.filter(x),n.folds=n.folds?.filter(x)),t}},D=new i.a({name:`remote-configuration-${d.b}`,keySuffix:async()=>(await s.b).support,storageType:()=>(0,a.a)({name:"remoteConfiguration"}),freshnessInterval:3600,expirationInterval:604800,loader:async()=>{const e=await s.b,t=new URL("https://c.client-context.hubvisor.io/configuration");t.searchParams.set("publisherId",e.publisherId),t.searchParams.set("device",d.b),t.searchParams.set("support",e.support);const n=await fetch(t);if(!n.ok)throw new Error(`http status: ${n.statusText}`);const i=await n.json();return T(i)},customEncoder:A,defaultValue:E(r)?r:void 0,validator:E})},(e,t,n)=>{n.d(t,{a:()=>s,b:()=>d});var i=n(28),r=n(29),a=n(19);const o={assumeConsentlessIfCmpUnavailable:!1};a.b.then((e=>{o.assumeConsentlessIfCmpUnavailable=e.consent.assumeConsentlessIfCmpUnavailable}));const s=()=>!!i.a.currentValue?.tcData?.gdprApplies,d=()=>{const e=i.a.currentValue;return e?.tcData?!!e.tcData.gdprApplies&&!(0,r.c)(e.tcData,r.a.storageAccess):o.assumeConsentlessIfCmpUnavailable}},(e,t,n)=>{n.d(t,{a:()=>i});const i=new(n(41).TinyEmitter)},e=>{function t(){}t.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function r(){i.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var a=0,o=i.length;a<o;a++)i[a].fn!==t&&i[a].fn._!==t&&r.push(i[a]);return r.length?n[e]=r:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t},(e,t,n)=>{n.d(t,{userSync:()=>m});var i=n(0),r=n(2),a=n(3),o=n(76),s=n(21),d=n(23),c=n(12),l=n(13),u=n(34);r.b.setDefaults({userSync:(0,i.j)({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})});const p=(0,o.a)("usersync"),m=function(e){let t={},n={image:[],iframe:[]},o=new Set,s={},p={image:!0,iframe:!1},m=e.config;function f(){if(m.syncEnabled&&e.browserSupportsCookies){try{p.iframe&&g(n.iframe,(e=>{let[t,r]=e;(0,i.W)(`Invoking iframe user sync for bidder: ${t}`),(0,i.E)(r),function(e,t){e.image=e.image.filter((e=>e[0]!==t))}(n,t)})),p.image&&g(n.image,(e=>{let[t,n]=e;(0,i.W)(`Invoking image pixel user sync for bidder: ${t}`),(0,i.kb)(n)}))}catch(e){return(0,i.U)("Error firing user syncs",e)}n={image:[],iframe:[]}}}function g(e,t){(0,i.hb)(e).forEach(t)}return r.b.getConfig("userSync",(e=>{if(e.userSync){let t=e.userSync.filterSettings;(0,i.Q)(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}m=Object.assign(m,e.userSync)})),e.regRule(d.f,"userSync config",(e=>{if(!m.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[c.d]===l.b){const n=e[c.g],i=e[c.c];if(!t.canBidderRegisterSync(n,i))return{allow:!1,reason:`${n} syncs are not enabled for ${i}`}}})),t.registerSync=(t,r,a)=>o.has(r)?(0,i.W)(`already fired syncs for "${r}", ignoring registerSync call`):m.syncEnabled&&(0,i.I)(n[t])?r?0!==m.syncsPerBidder&&Number(s[r])>=m.syncsPerBidder?(0,i.X)(`Number of user syncs exceeded for "${r}"`):void(e.isAllowed(d.f,(0,u.a)(l.b,r,{[c.g]:t,[c.h]:a}))&&(n[t].push([r,a]),s=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(s,r))):(0,i.X)("Bidder is required for registering sync"):(0,i.X)(`User sync type "${t}" not supported`),t.bidderDone=o.add.bind(o),t.syncUsers=(e=0)=>{if(e)return setTimeout(f,Number(e));f()},t.triggerUserSyncs=()=>{m.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=(e,t)=>!m.filterSettings||!function(e,t){let n=m.filterSettings;if(function(e,t){if(e.all&&e[t])return(0,i.X)(`Detected presence of the "filterSettings.all" and "filterSettings.${t}" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.`),!1;let n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;let a=n.filter,o=n.bidders;return a&&"include"!==a&&"exclude"!==a?((0,i.X)(`UserSync "filterSettings.${r}.filter" setting '${a}' is not a valid option; use either 'include' or 'exclude'.`),!1):!!("*"===o||Array.isArray(o)&&o.length>0&&o.every((e=>(0,i.S)(e)&&"*"!==e)))||((0,i.X)(`Detected an invalid setup in userSync "filterSettings.${r}.bidders"; use either '*' (to represent all bidders) or an array of bidders.`),!1)}(n,e)){p[e]=!0;let i=n.all?n.all:n[e],r="*"===i.bidders?[t]:i.bidders;const o={include:(e,t)=>!(0,a.c)(e,t),exclude:(e,t)=>(0,a.c)(e,t)};return o[i.filter||"include"](r,t)}return!p[e]}(e,t),t}(Object.defineProperties({config:r.b.getConfig("userSync"),isAllowed:s.a,regRule:s.b},{browserSupportsCookies:{get:function(){return!(0,i.R)()&&p.cookiesAreEnabled()}}}))},(e,t,n)=>{n.d(t,{a:()=>o,b:()=>a,c:()=>i,d:()=>r});const i="native",r="video",a="banner",o="adpod"},(e,t,n)=>{n.d(t,{a:()=>c,b:()=>d,c:()=>l,d:()=>u});var i=n(6),r=n(0),a=n(2),o=n(9),s=n(8);const d="outstream",c="instream";function l(e){const t=e?.mediaTypes?.video;null!=t&&null==t.plcmt&&(t.context===d||[2,3,4].includes(t.placement)?t.plcmt=4:t.context!==d&&[2,6].includes(t.playbackmethod)&&(t.plcmt=2))}function u(e,{index:t=s.a.index}={}){const n=(0,i.a)(t.getMediaTypes(e),"video"),r=n&&(0,i.a)(n,"context"),a=n&&(0,i.a)(n,"useCacheKey"),o=t.getAdUnit(e);return p(e,o,n,r,a)}const p=(0,o.b)("sync",(function(e,t,n,i,o){return n&&(o||i!==d)?a.b.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):((0,r.U)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with hubjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(i===d&&!o&&!(e.renderer||t&&t.renderer||n.renderer))}),"checkVideoBidSetup")},(e,t,n)=>{n.d(t,{a:()=>d,b:()=>o});var i=n(2),r=n(0);function a(e,t=window){if(!e)return e;if(/\w+:\/\//.exec(e))return e;let n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:`${n}//${e}`}function o(e,{noLeadingWww:t=!1,noPort:n=!1}={}){try{e=new URL(a(e))}catch(e){return}return e=n?e.hostname:e.host,t&&e.startsWith("www.")&&(e=e.substring(4)),e}function s(e){try{const t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}const d=function(e,t=window){if(t.top!==t)return e;let n,i,r;return function(){const a=s(t.document),o=t.location.href;return n===a&&o===i||(n=a,i=o,r=e()),r}}((c=window,function(){const e=[],t=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(c),n=i.b.getConfig("maxNestedIframes");let d,l,u,p,m=!1,f=0,g=!1,h=!1,b=!1;do{const n=d,i=h;let a,o=!1,p=null;h=!1,d=d?d.parent:c;try{a=d.location.href||null}catch(e){o=!0}if(o)if(i){const e=n.context;try{p=e.sourceUrl,l=p,b=!0,g=!0,d===c.top&&(m=!0),e.canonicalUrl&&(u=e.canonicalUrl)}catch(e){}}else{(0,r.X)("Trying to access cross domain iframe. Continuing without referrer and location");try{const e=n.document.referrer;e&&(p=e,d===c.top&&(m=!0))}catch(e){}!p&&t&&t[f-1]&&(p=t[f-1],d===c.top&&(b=!0)),p&&!g&&(l=p)}else{if(a&&(p=a,l=p,g=!1,d===c.top)){m=!0;const e=s(d.document);e&&(u=e)}d.context&&d.context.sourceUrl&&(h=!0)}e.push(p),f++}while(d!==c.top&&f<n);e.reverse();try{p=c.top.document.referrer}catch(e){}const y=m||b?l:null,v=i.b.getConfig("pageUrl")||u||null;let I=i.b.getConfig("pageUrl")||y||a(v,c);return y&&y.indexOf("?")>-1&&-1===I.indexOf("?")&&(I=`${I}${y.substring(y.indexOf("?"))}`),{reachedTop:m,isAmp:g,numIframes:f-1,stack:e,topmostLocation:l||null,location:y,canonicalUrl:v,page:I,domain:o(I)||null,ref:p||null,legacy:{reachedTop:m,isAmp:g,numIframes:f-1,stack:e,referer:l||null,canonicalUrl:v}}}));var c},(e,t,n)=>{n.d(t,{a:()=>i});class i{error;value;constructor(e,t){this.value=e,this.error=t}static value(e){return new i(e,void 0)}static error(e){return new i(void 0,e)}static tryCatch(e){try{return i.value(e())}catch(e){return i.error(e)}}get isError(){return!!this.error}get isSuccess(){return!this.error}onError=e=>(this.isError&&e(this.error),this);or=e=>this.isError?e:this.value;get=()=>{if(this.isError)throw this.error;return this.value}}},(e,t,n)=>{n.d(t,{a:()=>r});var i=n(15);class r{#S;provide=(0,i.a)((e=>{this.#S=e}));get value(){return this.#S}}},(e,t,n)=>{n.d(t,{a:()=>i});const i=()=>{}},(e,t,n)=>{n.d(t,{a:()=>r,b:()=>a});var i=n(1);const r=e=>(0,i.d)(e,(e=>(0,i.q)(e)||e instanceof RegExp)),a=(e,...t)=>!(0,i.j)(e)&&((0,i.c)(e)?e.some((e=>a(e,...t))):(0,i.q)(e)?t.some((t=>t===e)):e instanceof RegExp&&t.some((t=>e.test(t))))},(e,t,n)=>{n.d(t,{a:()=>i});const i={"33across":"33across",Adhese:"adhese",amx:"amx",AppNexus:"appnexus",Appnexus_Hubvisor:"appnexus hubvisor",craft:"craft",Criteo:"criteo",dailymotion:"dailymotion",Rubicon:"rubicon",MSQ_AppNexus_Brand:"MSQ-AppNexus Brand",MSQ_AppNexus_Classic:"MSQ-AppNexus Classic",MSQ_AppNexus_Max:"MSQ-AppNexus Max",MSQ_AppNexus_Max_View:"MSQ-AppNexus Max View",MSQ_AppNexus:"MSQ-AppNexus",MSQ_SpotX:"MSQ-SpotX",MSQ_Freewheel:"MSQ-Freewheel",MSQ_Rubicon:"MSQ-Rubicon",MSQ_Rubicon_TRA:"MSQ-Rubicon TRA",MSQ_Rubicon_PRV:"MSQ-Rubicon PRV",ImproveDigital:"improvedigital",Smart:"smartadserver",Freewheel:"freewheelssp",Adot:"adot",IndexExchange:"ix",Gravity_Appnexus:"Gravity-Appnexus",Adyoulike:"adyoulike",Quantum_AppNexus:"Quantum-AppNexus",Quantum_Improve:"Quantum-Improve",Ravel:"raveltech",Sublime:"sublime",Teads:"teads",SpotX:"spotx",Adagio:"adagio",Unruly:"unruly",Invibes:"invibes",TripleLift:"triplelift",TripleLiftNative:"tripleliftNative",Proxistore:"proxistore",OpenX:"openx",amazon:"amazon",vidazoo:"vidazoo",visx:"visx",outbrain:"outbrain",mediasquare:"mediasquare",pubmatic:"pubmatic",gumgum:"gumgum",microad:"microad",smilewanted:"smilewanted",seedtag:"seedtag",richaudience:"richaudience",sovrn:"sovrn",conversant:"conversant",onetag:"onetag",qwarry:"qwarry",sharethrough:"sharethrough",yieldlift:"yieldlift",backfill:"backfill",medianet:"medianet",hawk:"hawk",kargo:"kargo",ogury:"ogury",relaido:"relaido",hubvisor:"hubvisor",beop:"beop",rtbhouse:"rtbhouse",nexx360:"nexx360",noBid:"nobid",hbvRichmedia:"hbv-richmedia",impactify:"impactify",fluct:"fluct",unicorn:"unicorn",prisma:"prisma",bliink:"bliink",taboola:"taboola",missena:"missena",minuteMedia:"minutemedia",caroda:"caroda",nextMillennium:"nextMillennium",Adform:"adform",ttdDirectPath:"ttdDirectPath",ttd:"ttd",yieldlab:"yieldlab"};new Set([i.MSQ_Rubicon_TRA,i.MSQ_Rubicon_PRV,i.MSQ_AppNexus_Classic,i.MSQ_AppNexus_Max,i.MSQ_AppNexus_Brand,i.MSQ_SpotX,i.MSQ_Freewheel])},(e,t,n)=>{n.d(t,{a:()=>r,b:()=>i});const i={pageView:"page-view",visibility:"visibility",secondChance:"second-chance"};class r{bidderTimeout;placements;refreshReason;context;amazonOrtb2;constructor(e){Object.assign(this,e)}}},(e,t,n)=>{n.d(t,{a:()=>r,b:()=>i});const i=e=>!!e&&!!e.prebid,r={outstream:"outstream",banner:"banner",instream:"instream",native:"native",nativeBanner:"nativeBanner",skin:"skin"}},(e,t,n)=>{n.d(t,{a:()=>a,b:()=>o,c:()=>s,d:()=>c,e:()=>d});var i=n(49),r=n(1);const a={dfp:"dfp",sas:"sas",ast:"ast",hsc:"hsc",generic:"generic",instream:"instream"},o={whenVisible:"when-visible",whenViewable:"when-viewable",noLazyLoad:"no-lazy-load",playWhenVisible:"play-when-visible"},s=e=>(0,r.m)(e)&&(0,i.a)(e.adUnitPath),d=e=>(0,r.m)(e)&&(0,i.a)(e.match),c=e=>(0,r.m)(e)&&(0,i.a)(e.elementId)},(e,t,n)=>{n.d(t,{a:()=>i});const i=(0,n(95).a)({value:!0,weight:1},{value:!1,weight:99})},(e,t,n)=>{n.d(t,{b:()=>o,a:()=>s});const i="phone",r="tablet",a="desktop",o=(()=>{const e=(navigator.userAgent??window.opera).toLowerCase();return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)?r:/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard|dolphin|zune)/.test(e)?i:a})(),s=(()=>{switch(o){case i:return 4;case r:return 5;case a:return 2}})()},(e,t,n)=>{n.d(t,{a:()=>o,b:()=>i,c:()=>r});const i=e=>{window.googletag=window.googletag??{},window.googletag.cmd=window.googletag.cmd??[],window.googletag.cmd.push((()=>e(window.googletag)))},r=e=>{window.sas=window.sas??{},window.sas.cmd=window.sas.cmd??[],window.sas.cmd.push((()=>e(window.sas)))},a=e=>new Promise((t=>e(t))),o=a(i);a(r)},(e,t,n)=>{n.d(t,{a:()=>r,b:()=>i});const i={no:0,yes:1},r={firstPrice:1,secondPrice:2}},(e,t,n)=>{n.d(t,{a:()=>l,b:()=>u,c:()=>p});var i=n(100),r=n(84),a=n(1);const o=e=>{const t=parseFloat(e);if(!isNaN(t))return t},s=(e,t)=>{const n=(0,i.a)(),r=`hbv-${e}`;return Object.prototype.hasOwnProperty.call(n,r)?{found:!0,value:t(n[r]??"")}:{found:!1}},d=(e,t)=>{const n=(0,r.a)("local-storage",`hbv:${e}`);return(0,a.k)(n)?{found:!1}:{found:!0,value:t(n)}},c=(...e)=>{for(const t of e){const{found:e,value:n}=t();if(e)return n}},l=e=>{const t=e=>""===e||(e=>!!["yes","true","1"].some((t=>0===t.localeCompare(e,void 0,{sensitivity:"accent"})))||!["no","false","0"].some((t=>0===t.localeCompare(e,void 0,{sensitivity:"accent"})))&&void 0)(e),n=e=>{const n=t(e);if((0,a.i)(n))return!n};return c((()=>s(e,t)),(()=>s(`no-${e}`,n)),(()=>d(e,t)),(()=>d(`no-${e}`,n)))},u=e=>c((()=>s(e,o)),(()=>d(e,o))),p=e=>c((()=>s(e,(e=>e))),(()=>d(e,(e=>e))))},(e,t,n)=>{n.d(t,{a:()=>o,b:()=>a});var i=n(4);const{warn:r}=i.a.tag("ActionMap"),{register:a,execute:o}=new class{#C={};#R=(e,t)=>(n,i)=>{const a=(t,a)=>{try{i&&i(t,a)}catch(t){r(`error for action '${e}' callback`,n,t)}};(async n=>{try{return await t(n)}catch(t){throw r(`error for action '${e}'`,n,t),t}})(n).then((e=>a(null,e))).catch((e=>a(e)))};register=(e,t)=>{this.#C[e]&&r(`trying to register an action named '${e}' multiple times, previous action will be overriden`),this.#C[e]=this.#R(e,t)};execute=(e,t,n)=>(this.#C[e]??this.#R(e,(()=>{throw new Error("action doesn't exist")})))(t,n)}},(e,t,n)=>{n.d(t,{a:()=>i});const i={vpaid10:1,vpaid20:2,mraid1:3,ormma:4,mraid2:5,mraid3:6,omid1:7}},(e,t,n)=>{n.d(t,{a:()=>i});const i={vast10:1,vast20:2,vast30:3,vast10Wrapper:4,vast20Wrapper:5,vast30Wrapper:6,vast40:7,vast40Wrapper:8,daast10:9,daast10Wrapper:10,vast41:11,vast41Wrapper:12,vast42:13,vast42Wrapper:14}},(e,t,n)=>{n.d(t,{a:()=>a});var i=n(4);const{error:r}=i.a.tag("bus");class a{#E={};clear=()=>{this.#E={}};#T=(e,t)=>{this.#E[e]||(this.#E[e]=[]),this.#E[e]?.push(t)};on=(e,t)=>{this.#T(e,{listener:t,original:t})};off=(e,t)=>{this.#E[e]=this.#E[e]?.filter((e=>e.original!==t))};once=(e,t)=>{this.#T(e,{listener:(e,n)=>{t(e,n),this.off(n,t)},original:t})};dispatch=(e,t)=>{for(const n of this.#E[e]??[])try{n.listener(t,e)}catch(n){r(`listener registration failed for event '${String(e)}'`,t,n)}}}},(e,t,n)=>{n.d(t,{a:()=>s,b:()=>d,c:()=>o,d:()=>u,e:()=>l,f:()=>c});var i=n(17),r=n(7),a=n(4);const{info:o,debug:s,error:d,warn:c}=a.a.tag("second-chance"),l="hbv_bf",u=(e,t)=>{try{return!e.isPlacementAllowed||e.isPlacementAllowed(t)}catch(e){return(0,i.a)(new r.b(r.a.secondChanceError,`Error checking if placement is allowed for Slot or tagId: ${t}. Aborting ${e}`)),!1}}},(e,t,n)=>{n.d(t,{a:()=>r,b:()=>o});const i=(()=>{let e=0;return()=>++e})(),r=()=>i()+Math.random().toString(16).substring(2),a=(()=>{const e=new Uint8Array(16),t=[];for(let e=0;e<256;++e)t.push((e+256).toString(16).substring(1));return()=>(crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,(t[e[0]]+t[e[1]]+t[e[2]]+t[e[3]]+"-"+t[e[4]]+t[e[5]]+"-"+t[e[6]]+t[e[7]]+"-"+t[e[8]]+t[e[9]]+"-"+t[e[10]]+t[e[11]]+t[e[12]]+t[e[13]]+t[e[14]]+t[e[15]]).toLowerCase())})(),o=crypto.randomUUID?.bind(crypto)??a},(e,t,n)=>{n.d(t,{a:()=>s});var i=n(28),r=n(103),a=n(104),o=n(25);const s=e=>(0,a.a)({cmp:i.a.asStream,storagePolicy:o.a.of(r.a)},e)},(e,t,n)=>{n.d(t,{a:()=>s});var i=n(7),r=(n(18),n(17)),a=n(1),o=n(40);const s=(e,t)=>{try{const n=(e=>{if((0,a.q)(e)){const t=(e=>{try{return document.querySelector(e)}catch(e){return null}})(e);if(t)return t;throw new i.b(i.a.videoWrapperDivNotFound,`Player container not found with '${e}'`)}return e})(e);if(!window.HbvPlayer)throw new i.b(i.a.outstreamPlayerLoadingFailed,"Failed to load player");window.HbvPlayer.playOutstream(n,t).catch((n=>{(0,r.a)(new i.c(i.a.outstreamPlayerError,n,t.vastXml??t.vastUrl??"no-vast")),t.renderContext&&o.a.emit("outstream-error",{containerOrSelector:e,renderContext:t.renderContext})}))}catch(n){(0,r.a)(n,"unexpected player error"),t.renderContext&&o.a.emit("outstream-error",{containerOrSelector:e,renderContext:t.renderContext})}}},e=>{e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var i in t){var r=t[i];n[i]=r&&"object"==typeof r?e(r):r}return n}},e=>{s.SYNC=1,s.ASYNC=2,s.QUEUE=4;var t="fun-hooks",n=Object.freeze({useProxy:!0,ready:0}),i=new WeakMap,r="2,1,0"===[1].reduce((function(e,t,n){return[e,t,n]}),2).toString()?Array.prototype.reduce:function(e,t){var n,i=Object(this),r=i.length>>>0,a=0;if(t)n=t;else{for(;a<r&&!(a in i);)a++;n=i[a++]}for(;a<r;)a in i&&(n=e(n,i[a],a,i)),a++;return n};function a(e,t){return Array.prototype.slice.call(e,t)}var o=Object.assign||function(e){return r.call(a(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),e)};function s(e){var d,c={},l=[];function u(e,t){return"function"==typeof e?g.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?g.apply(null,arguments):"object"==typeof e?p.apply(null,arguments):void 0}function p(e,t,n){var i=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),i=!1);var r={},a=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==a.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var i=t.split(":"),a=i[0],o=i[1]||"sync";if(!r[a]){var s=e[a];r[a]=e[a]=g(o,s,n?[n,a]:void 0)}})),e=Object.getPrototypeOf(e)}while(i&&e);return r}function m(e){var n=Array.isArray(e)?e:e.split(".");return r.call(n,(function(i,r,a){var o=i[r],s=!1;return o||(a===n.length-1?(d||l.push((function(){s||console.warn(t+": referenced '"+e+"' but it was never created")})),i[r]=f((function(e){i[r]=e,s=!0}))):i[r]={})}),c)}function f(e){var t=[],n=[],r=function(){},a={before:function(e,n){return d.call(this,t,"before",e,n)},after:function(e,t){return d.call(this,n,"after",e,t)},getHooks:function(e){var i=t.concat(n);"object"==typeof e&&(i=i.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{o(i,{remove:function(){return i.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return i},removeAll:function(){return this.getHooks().remove()}},s={install:function(i,a,o){this.type=i,r=o,o(t,n),e&&e(a)}};return i.set(a.after,s),a;function d(e,i,a,o){var s={hook:a,type:i,priority:o||10,remove:function(){var i=e.indexOf(s);-1!==i&&(e.splice(i,1),r(t,n))}};return e.push(s),e.sort((function(e,t){return t.priority-e.priority})),r(t,n),this}}function g(n,r,c){var u=r.after&&i.get(r.after);if(u){if(u.type!==n)throw t+": recreated hookable with different type";return r}var p,g,h=c?m(c):f(),b={get:function(e,t){return h[t]||Reflect.get.apply(Reflect,arguments)}};return d||l.push(y),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?g=new Proxy(r,b):(g=function(){return b.apply?b.apply(r,this,a(arguments)):r.apply(this,arguments)},o(g,h)),i.get(g.after).install(n,g,(function(e,t){var i,r=[];function o(e){r.push(e.hook)}e.length||t.length?(e.forEach(o),i=r.push(void 0)-1,t.forEach(o),p=function(e,t,o){var s,d=0,c="async"===n&&"function"==typeof o[o.length-1]&&o.pop();function l(e){"sync"===n?s=e:c&&c.apply(null,arguments)}function u(e){if(r[d]){var i=a(arguments);return u.bail=l,i.unshift(u),r[d++].apply(t,i)}"sync"===n?s=e:c&&c.apply(null,arguments)}return r[i]=function(){var i=a(arguments,1);"async"===n&&c&&(delete u.bail,i.push(u));var r=e.apply(t,i);"sync"===n&&u(r)},u.apply(null,o),s}):p=void 0,y()})),g;function y(){!d&&("sync"!==n||e.ready&s.SYNC)&&("async"!==n||e.ready&s.ASYNC)?"sync"!==n&&e.ready&s.QUEUE?b.apply=function(){var e=arguments;l.push((function(){g.apply(e[1],e[2])}))}:b.apply=function(){throw t+": hooked function not ready"}:b.apply=p}}return(e=o({},n,e)).ready?u.ready=function(){d=!0,function(e){for(var t;t=e.shift();)t()}(l)}:d=!0,u.get=m,u}e.exports=s},(e,t,n)=>{n.d(t,{a:()=>s,b:()=>m,c:()=>o,d:()=>g,e:()=>c,f:()=>u,g:()=>l});var i=n(0),r=n(11),a=n(2);const o=Object.freeze({}),s=Object.freeze({});class d{#x;#A;#D;#k;#O=!0;#B;generatedTime;hashFields;constructor(){this.reset()}#U(e){this.#k=!0,this.#A=e,this.#D.resolve(e)}reset(){this.#D=(0,r.b)(),this.#x=!1,this.#A=null,this.#k=!1,this.generatedTime=null}enable(){this.#x=!0}get enabled(){return this.#x}get ready(){return this.#k}get promise(){return this.#k?r.a.resolve(this.#A):(this.#x||this.#U(null),this.#D.promise)}setConsentData(e,t=(0,i.ib)()){this.generatedTime=t,this.#O=!0,this.#U(e)}getConsentData(){return this.#A}get hash(){return this.#O&&(this.#B=(0,i.h)(JSON.stringify(this.#A&&this.hashFields?this.hashFields.map((e=>this.#A[e])):this.#A)),this.#O=!1),this.#B}}const c=new class extends d{hashFields=["gdprApplies","consentString"];getConsentMeta(){const e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,i.S)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}},l=new class extends d{getConsentMeta(){const e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}},u=new class extends d{hashFields=["applicableSections","gppString"];getConsentMeta(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}},p=(()=>{function e(){return!!a.b.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset(){},get promise(){return r.a.resolve(e())},get hash(){return e()?"1":"0"}}})(),m=function(){const e={},t={},n={};return{register(i,r,a){a&&((e[r]=e[r]||{})[i]=a,t.hasOwnProperty(r)?t[r]!==a&&(t[r]=n):t[r]=a)},get(i){const r={modules:e[i]||{}};return t.hasOwnProperty(i)&&t[i]!==n&&(r.gvlid=t[i]),r}}}(),f={gdpr:c,usp:l,gpp:u,coppa:p},g=function(e=f){return e=Object.entries(e),Object.assign({get promise(){return r.a.all(e.map((([e,t])=>t.promise.then((t=>[e,t]))))).then((e=>Object.fromEntries(e)))},get hash(){return(0,i.h)(e.map((([e,t])=>t.hash)).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map((t=>{return[t,(n=t,function(){return Object.fromEntries(e.map((([e,t])=>[e,t[n]()])))})];var n}))))}()},(e,t,n)=>{n.d(t,{a:()=>i,b:()=>r});const i={debug:"debug",info:"info",table:"table",warn:"warn",error:"error"};class r{#N;#_;#P;constructor(e,t,n){this.#N=e,this.#_=t,this.#P=n}#a=(e,t,n="",i)=>{const r={name:this.#N,tag:this.#_,level:e,type:t,ts:Date.now()/1e3,message:n,metadata:i};for(const e of this.#P)e(r)};debug=(e,...t)=>this.#a(20,i.debug,e,t);info=(e,...t)=>this.#a(30,i.info,e,t);table=(e,...t)=>this.#a(30,i.table,void 0,[e,...t]);warn=(e,...t)=>this.#a(40,i.warn,e,t);error=(e,...t)=>this.#a(50,i.error,e,t);tag=e=>new r(this.#N,e,this.#P)}},(e,t,n)=>{n.d(t,{a:()=>i});const i={totalConsentTimeout:1/0,cmpTimeout:1/0}},(e,t,n)=>{n.d(t,{a:()=>i});const i=new(n(47).a)},(e,t,n)=>{n.d(t,{a:()=>i});const i=new(n(62).a)},(e,t,n)=>{function i(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}n.d(t,{a:()=>E,b:()=>R});var r=n(22),a=n(2),o=n(82),s=n(42),d=n(32),c=n(44),l=n(5),u=n(20),p=n(3),m=n(0),f=n(9),g=n(8),h=n(14),b=n(24),y=n(21),v=n(34),I=n(13),w=n(23);const S=["cpm","ttl","creativeId","netRevenue","currency"],C=["auctionId","transactionId"];function R(e){const t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){const n=E(e);r.a.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((t=>{let i,a,o=t;(0,m.Q)(t)&&(o=t.code,i=t.gvlid,a=t.skipPbsAliasing),r.a.aliasRegistry[o]=e.code,n(Object.assign({},e,{code:o,gvlid:i,skipPbsAliasing:a}))}))}function E(e){return Object.assign(new i(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(n,i,s,f,R,E){if(!Array.isArray(n.bids))return;const x=function(e){if((0,y.a)(w.i,(0,v.a)(I.b,e)))return{bidRequest:e=>e,bidderRequest:e=>e};function t(e,t,n){return C.includes(t)?null:Reflect.get(e,t,n)}function n(e,t){const n=new Proxy(e,t);return Object.entries(e).filter((([e,t])=>"function"==typeof t)).forEach((([t,i])=>n[t]=i.bind(e))),n}const i=(0,m.Y)((e=>n(e,{get:t})),(e=>e.bidId));return{bidRequest:i,bidderRequest:e=>n(e,{get:(n,r,a)=>"bids"===r?e.bids.map(i):t(n,r,a)})}}(n.bidderCode),k={},O=[];function B(){s(),a.b.runWithBidder(e.code,(()=>{u.emit(l.EVENTS.BIDDER_DONE,n),t(O,n.gdprConsent,n.uspConsent,n.gppConsent)}))}const U=D(n).measureTime("validate",(()=>n.bids.filter((t=>{return n=x.bidRequest(t),!!e.isBidRequestValid(n)||((0,m.X)(`Invalid bid sent to bidder ${e.code}: ${JSON.stringify(n)}`),!1);var n}))));if(0===U.length)return void B();const N={};U.forEach((e=>{N[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),T(e,U.map(x.bidRequest),x.bidderRequest(n),f,E,{onRequest:e=>u.emit(l.EVENTS.BEFORE_BIDDER_HTTP,n,e),onResponse:t=>{R(e.code),O.push(t)},onFledgeAuctionConfigs:e=>{e.forEach((e=>{const t=N[e.bidId];t?A(t,e.config):(0,m.X)("Received fledge auction configuration for an unknown bidId",e)}))},onError:(t,i)=>{R(e.code),r.a.callBidderError(e.code,i,n),u.emit(l.EVENTS.BIDDER_ERROR,{error:i,bidderRequest:n}),(0,m.U)(`Server call for ${e.code} failed: ${t} ${i.status}. Continuing without bids.`)},onBid:t=>{const n=N[t.requestId];if(n){if(t.adapterCode=n.bidder,function(e,t){let n=h.a.get(t,"allowAlternateBidderCodes")||!1,i=h.a.get(t,"allowedAlternateBidderCodes");return!!(e&&t&&t!==e&&(i=(0,m.I)(i)?i.map((e=>e.trim().toLowerCase())).filter((e=>!!e)).filter(m.lb):i,!n||(0,m.I)(i)&&"*"!==i[0]&&!i.includes(e)))}(t.bidderCode,n.bidder))return(0,m.X)(`${t.bidderCode} is not a registered partner or known bidder of ${n.bidder}, hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.`),void i.reject(n.adUnitCode,t,l.REJECTION_REASON.BIDDER_DISALLOWED);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[n.bidder]);const e=Object.assign((0,o.a)(l.STATUS.GOOD,n),t,(0,m.cb)(n,C));!function(e,t){const n=(0,b.d)(t.metrics);n.checkpoint("addBidResponse"),k[e]=!0,n.measureTime("addBidResponse.validate",(()=>function(e,t,{index:n=g.a.index}={}){function i(e){return`Invalid bid from ${t.bidderCode}. Ignoring bid: ${e}`}return e?t?function(){let e=Object.keys(t);return S.every((n=>(0,p.c)(e,n)&&!(0,p.c)([void 0,null],t[n])))}()?"native"!==t.mediaType||(0,d.i)(t,{index:n})?"video"!==t.mediaType||(0,c.d)(t,{index:n})?!("banner"===t.mediaType&&!function(e,t,{index:n=g.a.index}={}){if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;const i=n.getBidRequest(t),r=n.getMediaTypes(t),a=i&&i.sizes||r&&r.banner&&r.banner.sizes,o=(0,m.ab)(a);if(1===o.length){const[e,n]=o[0].split("x");return t.width=parseInt(e,10),t.height=parseInt(n,10),!0}return!1}(0,t,{index:n})&&((0,m.U)(i("Banner bids require a width and height")),1)):((0,m.U)(i("Video bid does not have required vastUrl or renderer property")),!1):((0,m.U)(i("Native bid missing some required properties.")),!1):((0,m.U)(i(`Bidder ${t.bidderCode} is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.`)),!1):((0,m.X)(`Some adapter tried to add an undefined bid for ${e}.`),!1):((0,m.X)("No adUnitCode was supplied to addBidResponse."),!1)}(e,t)))?i(e,t):i.reject(e,t,l.REJECTION_REASON.INVALID)}(n.adUnitCode,e)}else(0,m.X)(`Bidder ${e.code} made bid for unknown request ID: ${t.requestId}. Ignoring.`),i.reject(null,t,l.REJECTION_REASON.INVALID_REQUEST_ID)},onCompletion:B})}});function t(t,n,i,r){x(e,t,n,i,r)}}const T=(0,f.b)("sync",(function(e,t,n,i,r,{onRequest:a,onResponse:o,onFledgeAuctionConfigs:s,onError:d,onBid:c,onCompletion:l}){const u=D(n);l=u.startTiming("total").stopBefore(l);let p=u.measureTime("buildRequests",(()=>e.buildRequests(t,n)));if(!p||0===p.length)return void l();Array.isArray(p)||(p=[p]);const f=t,g=p.length,b=f.length/g,S=(0,m.l)(l,p.length);p.forEach((t=>{const n="string"==typeof t.data?t.data:JSON.stringify(t.data),l=new Blob([n]).size/b||void 0;for(const e of f)e.hbvMetadata.payloadBidRequestSize=l;const p=u.fork();function g(e){null!=e&&(e.metrics=p.fork().renameWith()),c(e)}const C=r((function(n,i){E();try{n=JSON.parse(n)}catch(e){}n={body:n,headers:{get:i.getResponseHeader.bind(i)}};const r=new Blob([i.getAllResponseHeaders()]).size,a=parseInt(i.getResponseHeader("content-length"),10)||new Blob([i.responseText]).size,d=a?(r+a)/b:void 0;for(const e of f)e.hbvMetadata.payloadBidResponseSize=d;o(n);try{n=p.measureTime("interpretResponse",(()=>e.interpretResponse(n,t)))}catch(t){return(0,m.U)(`Bidder ${e.code} failed to interpret the server's response. Continuing without bids`,null,t),void S()}let c;n&&(0,m.I)(n.fledgeAuctionConfigs)?(s(n.fledgeAuctionConfigs),c=n.bids):c=n,c&&((0,m.I)(c)?c.forEach(g):g(c)),S()})),R=r((function(e,t){E(),d(e,t),S()}));a(t);const E=p.startTiming("net");function T(n){const i=t.options;return Object.assign(n,i,{browsingTopics:!(i?.hasOwnProperty("browsingTopics")&&!i.browsingTopics)&&(h.a.get(e.code,"topicsHeader")??!0)&&(0,y.a)(w.j,(0,v.a)(I.b,e.code))})}switch(t.method){case"GET":i(`${t.url}${x=t.data,x?`?${"object"==typeof x?(0,m.$)(x):x}`:""}`,{success:C,error:R},void 0,T({method:"GET",withCredentials:!0}));break;case"POST":i(t.url,{success:C,error:R},"string"==typeof t.data?t.data:JSON.stringify(t.data),T({method:"POST",contentType:"text/plain",withCredentials:!0}));break;default:(0,m.X)(`Skipping invalid request from ${e.code}. Request type ${t.type} must be GET or POST`),S()}var x}))}),"processBidderRequests"),x=(0,f.b)("async",(function(e,t,n,i,o){const d=a.b.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(d||!r.a.aliasRegistry[e.code])){let r=a.b.getConfig("userSync.filterSettings"),d=e.getUserSyncs({iframeEnabled:!(!r||!r.iframe&&!r.all),pixelEnabled:!(!r||!r.image&&!r.all)},t,n,i,o);d&&(Array.isArray(d)||(d=[d]),d.forEach((t=>{s.userSync.registerSync(t.type,e.code,t.url)})),s.userSync.bidderDone(e.code))}}),"registerSyncs"),A=(0,f.b)("sync",(()=>{}),"addComponentAuction");function D(e){return(0,b.d)(e.metrics).renameWith((t=>[`adapter.client.${t}`,`adapters.client.${e.bidderCode}.${t}`]))}},(e,t,n)=>{n.d(t,{a:()=>p,b:()=>f});var i=n(3),r=n(0),a=n(2);const o=2,s={buckets:[{max:5,increment:.5}]},d={buckets:[{max:20,increment:.1}]},c={buckets:[{max:20,increment:.01}]},l={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},u={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function p(e,t,n=1){let i=parseFloat(e);return isNaN(i)&&(i=""),{low:""===i?"":m(e,s,n),med:""===i?"":m(e,d,n),high:""===i?"":m(e,c,n),auto:""===i?"":m(e,u,n),dense:""===i?"":m(e,l,n),custom:""===i?"":m(e,t,n)}}function m(e,t,n){let s="";if(!f(t))return s;const d=t.buckets.reduce(((e,t)=>e.max>t.max?e:t),{max:0});let c=0,l=(0,i.b)(t.buckets,(t=>{if(e>d.max*n){let e=t.precision;void 0===e&&(e=o),s=(t.max*n).toFixed(e)}else{if(e<=t.max*n&&e>=c*n)return t.min=c,t;c=t.max}}));return l&&(s=function(e,t,n){const i=void 0!==t.precision?t.precision:o,s=t.increment*n,d=t.min*n;let c=Math.floor,l=a.b.getConfig("cpmRoundingFunction");"function"==typeof l&&(c=l);let u,p,m=Math.pow(10,i+2),f=(e*m-d*m)/(s*m);try{u=c(f)*s+d}catch(e){p=!0}return(p||"number"!=typeof u)&&((0,r.X)("Invalid rounding function passed in config"),u=Math.floor(f)*s+d),u=Number(u.toFixed(10)),u.toFixed(i)}(e,l,n)),s}function f(e){if((0,r.L)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;let t=!0;return e.buckets.forEach((e=>{e.max&&e.increment||(t=!1)})),t}},(e,t,n)=>{n.d(t,{a:()=>b,b:()=>h,c:()=>f});var i=n(0),r=n(14),a=n(13),o=n(21),s=n(12),d=n(23),c=n(2),l=n(22),u=n(34);const p="html5",m="cookie";let f=[];function g({moduleName:e,moduleType:t}={},{isAllowed:n=o.a}={}){function r(i,r){let o=e;const p=c.b.getCurrentBidder();return p&&t===a.b&&l.a.aliasRegistry[p]===e&&(o=p),i({valid:n(d.a,(0,u.a)(t,o,{[s.f]:r}))})}function g(e,t,n){if(!n||"function"!=typeof n)return r(e,t);f.push((function(){let i=r(e,t);n(i)}))}const h=function(e){return g((function(e){if(e&&e.valid)try{return!!window.localStorage}catch(e){(0,i.U)("Local storage api disabled")}return!1}),p,e)};return{setCookie:function(e,t,n,i,r,a){return g((function(a){if(a&&a.valid){const a=r&&""!==r?` ;domain=${encodeURIComponent(r)}`:"",o=n&&""!==n?` ;expires=${n}`:"",s=null!=i&&"none"==i.toLowerCase()?"; Secure":"";document.cookie=`${e}=${encodeURIComponent(t)}${o}; path=/${a}${i?`; SameSite=${i}`:""}${s}`}}),m,a)},getCookie:function(e,t){return g((function(t){if(t&&t.valid){let t=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return t?decodeURIComponent(t[2]):null}return null}),m,t)},localStorageIsEnabled:function(e){return g((function(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1}),p,e)},cookiesAreEnabled:function(e){return g((function(e){return!(!e||!e.valid)&&(0,i.e)()}),m,e)},setDataInLocalStorage:function(e,t,n){return g((function(n){n&&n.valid&&h()&&window.localStorage.setItem(e,t)}),p,n)},getDataFromLocalStorage:function(e,t){return g((function(t){return t&&t.valid&&h()?window.localStorage.getItem(e):null}),p,t)},removeDataFromLocalStorage:function(e,t){return g((function(t){t&&t.valid&&h()&&window.localStorage.removeItem(e)}),p,t)},hasLocalStorage:h,findSimilarCookies:function(e,t){return g((function(t){if(t&&t.valid){const t=[];if((0,i.A)()){const n=document.cookie.split(";");for(;n.length;){const i=n.pop();let r=i.indexOf("=");r=r<0?i.length:r,decodeURIComponent(i.slice(0,r).replace(/^\s+/,"")).indexOf(e)>=0&&t.push(decodeURIComponent(i.slice(r+1)))}}return t}}),m,t)}}}function h({moduleType:e,moduleName:t,bidderCode:n}={}){function i(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return n?((e&&e!==a.b||t)&&i(),e=a.b,t=n):t&&e||i(),g({moduleType:e,moduleName:t})}function b(e){return g({moduleName:e,moduleType:a.c})}(0,o.b)(d.a,"deviceAccess config",(function(){if(!(0,i.A)())return{allow:!1}})),(0,o.b)(d.a,"bidderSettings.*.storageAllowed",(function(e,t=r.a){if(e[s.d]!==a.b)return;let n=t.get(e[s.a],"storageAllowed");if(n&&!0!==n){const t=e[s.f];n=Array.isArray(n)?n.some((e=>e===t)):n===t}else n=!!n;return n?void 0:{allow:n}}))},(e,t,n)=>{n.d(t,{a:()=>o});var i=n(6);let r={};function a(e,t,n){let i=function(e,t){let n=r[e]=r[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n}(e,n);return i[t]=(i[t]||0)+1,i[t]}let o={incrementRequestsCounter:function(e){return a(e,"requestsCounter")},incrementBidderRequestsCounter:function(e,t){return a(e,"requestsCounter",t)},incrementBidderWinsCounter:function(e,t){return a(e,"winsCounter",t)},getRequestsCounter:function(e){return(0,i.a)(r,`${e}.requestsCounter`)||0},getBidderRequestsCounter:function(e,t){return(0,i.a)(r,`${e}.bidders.${t}.requestsCounter`)||0},getBidderWinsCounter:function(e,t){return(0,i.a)(r,`${e}.bidders.${t}.winsCounter`)||0}}},(e,t,n)=>{n.d(t,{a:()=>s,b:()=>d});var i=n(2),r=n(0);let a=1;const o=[];function s(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:a)}function d(e){o.push(e)}i.b.getConfig("ttlBuffer",(e=>{if("number"==typeof e.ttlBuffer){const t=a;a=e.ttlBuffer,t!==a&&o.forEach((e=>e(a)))}else(0,r.U)("Invalid value for ttlBuffer",e.ttlBuffer)}))},(e,t,n)=>{n.d(t,{a:()=>c,b:()=>u,c:()=>l});var i=n(80),r=n(0),a=n(6),o=n(3);const s=(0,n(10).a)(),d="outstream";function c(e){const{url:t,config:n,id:c,callback:l,loaded:u,adUnitCode:p,renderNow:m}=e;this.url=t,this.config=n,this.handlers={},this.id=c,this.renderNow=m,this.loaded=u,this.cmd=[],this.push=e=>{"function"==typeof e?this.loaded?e.call():this.cmd.push(e):(0,r.U)("Commands given to Renderer.push must be wrapped in a function")},this.callback=l||(()=>{this.loaded=!0,this.process()}),this.render=function(){const e=arguments,n=()=>{this._render?this._render.apply(this,e):(0,r.X)("No render function was provided, please use .setRender on the renderer")};!function(e){const t=s.adUnits,n=(0,o.b)(t,(t=>t.code===e));if(!n)return!1;const i=(0,a.a)(n,"renderer"),r=!!(i&&i.url&&i.render),d=(0,a.a)(n,"mediaTypes.video.renderer"),c=!!(d&&d.url&&d.render);return!!(r&&!0!==i.backupOnly||c&&!0!==d.backupOnly)}(p)?m?n():(this.cmd.unshift(n),(0,i.a)(t,d,this.callback,this.documentContext)):((0,r.X)(`External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ${p}`),n())}.bind(this)}function l(e){return!(!e||!e.url&&!e.renderNow)}function u(e,t,n){let i=null;e.config&&e.config.documentResolver&&(i=e.config.documentResolver(t,document,n)),i||(i=document),e.documentContext=i,e.render(t,e.documentContext)}c.install=function({url:e,config:t,id:n,callback:i,loaded:r,adUnitCode:a,renderNow:o}){return new c({url:e,config:t,id:n,callback:i,loaded:r,adUnitCode:a,renderNow:o})},c.prototype.getConfig=function(){return this.config},c.prototype.setRender=function(e){this._render=e},c.prototype.setEventHandlers=function(e){this.handlers=e},c.prototype.handleVideoEvent=function({id:e,eventName:t}){"function"==typeof this.handlers[t]&&this.handlers[t](),(0,r.W)(`Prebid Renderer event for id ${e} type ${t}`)},c.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,r.U)("Error processing Renderer command: ",e)}}},(e,t,n)=>{n.d(t,{a:()=>s});var i=n(3),r=n(0);const a=new WeakMap,o=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","aaxBlockmeter","confiant","arcspan","airgrid","clean.io","a1Media","geoedge","mediafilter","qortex","dynamicAdBoost"];function s(e,t,n,s,d){if(!t||!e)return void(0,r.U)("cannot load external script without url and moduleCode");if(!(0,i.c)(o,t))return void(0,r.U)(`${t} not whitelisted for loading external JavaScript`);s||(s=document);const c=p(s,e);if(c)return n&&"function"==typeof n&&(c.loaded?n():c.callbacks.push(n)),c.tag;const l=a.get(s)||{},u={loaded:!1,tag:null,callbacks:[]};return l[e]=u,a.set(s,l),n&&"function"==typeof n&&u.callbacks.push(n),(0,r.X)(`module ${t} is loading external JavaScript`),function(t,n,i,a){i||(i=document);var o=i.createElement("script");o.type="text/javascript",o.async=!0;const s=p(i,e);return s&&(s.tag=o),o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,n())}:o.onload=function(){n()},o.src=t,a&&(0,r.gb)(o,a),(0,r.C)(o,i),o}(e,(function(){u.loaded=!0;try{for(let e=0;e<u.callbacks.length;e++)u.callbacks[e]()}catch(e){(0,r.U)("Error executing callback","adloader.js:loadExternalScript",e)}}),s,d);function p(e,t){const n=a.get(e);return n&&n[t]?n[t]:null}}},(e,t,n)=>{n.d(t,{a:()=>o});var i=n(8),r=n(14),a=n(0);function o(e,t,n,{index:o=i.a.index,bs:s=r.a}={}){n=n||o.getBidRequest(t);const d=t?.adapterCode,c=t?.bidderCode||n?.bidder,l=s.get(t?.adapterCode,"adjustAlternateBids"),u=s.getOwn(c,"bidCpmAdjustment")||s.get(l?d:c,"bidCpmAdjustment");if(u&&"function"==typeof u)try{return u(e,Object.assign({},t),n)}catch(e){(0,a.U)("Error during bid adjustment",e)}return e}},(e,t,n)=>{n.d(t,{a:()=>a});var i=n(0);function r(e,{src:t="client",bidder:n="",bidId:r,transactionId:a,auctionId:o}={}){var s=t,d=e||0;this.bidderCode=n,this.width=0,this.height=0,this.statusMessage=function(){switch(d){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),this.adId=(0,i.u)(),this.requestId=r,this.transactionId=a,this.auctionId=o,this.mediaType="banner",this.source=s,this.getStatusCode=function(){return d},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,auctionId:this.auctionId}}}function a(e,t){return new r(e,t)}},(e,t,n)=>{function i(e,t,n){t.split&&(t=t.split("."));for(var i,r,a=0,o=t.length,s=e;a<o&&"__proto__"!==(r=t[a++])&&"constructor"!==r&&"prototype"!==r;)s=s[r]=a===o?n:typeof(i=s[r])==typeof t?i:0*t[a]!=0||~(""+t[a]).indexOf(".")?{}:[]}n.d(t,{a:()=>i})},(e,t,n)=>{n.d(t,{a:()=>s,b:()=>o});const i=(e,t,n)=>{n?e.setItem(t,n):e.removeItem(t)},r=(e,t)=>e.getItem(t),a=(e,t,n)=>{try{switch(e){case"in-memory":return;case"session-storage":return i(sessionStorage,t,n);case"local-storage":return i(localStorage,t,n)}}catch{}},o=(e,t,n)=>{const i=["in-memory","session-storage","local-storage"];for(const r of i)a(r,t,r===e?n:null)},s=(e,t)=>{try{switch(e){case"in-memory":return null;case"session-storage":return r(sessionStorage,t);case"local-storage":return r(localStorage,t)}}catch(e){return null}}},(e,t,n)=>{n.d(t,{a:()=>r});var i=n(1);const r=e=>(0,i.j)(e)?[]:(0,i.c)(e)?[...e]:[e]},(e,t,n)=>{n.d(t,{a:()=>a,b:()=>c,c:()=>r,d:()=>u});const i=["request","imp","bidResponse","response"],[r,a,o,s]=i,[d,c]=["default","pbs"],l=new Set(i),{registerOrtbProcessor:u,getProcessors:p}=function(){const e={};return{registerOrtbProcessor({type:t,name:n,fn:r,priority:a=0,dialects:o=[d]}){if(!l.has(t))throw new Error(`ORTB processor type must be one of: ${i.join(", ")}`);o.forEach((i=>{e.hasOwnProperty(i)||(e[i]={}),e[i].hasOwnProperty(t)||(e[i][t]={}),e[i][t][n]={priority:a,fn:r}}))},getProcessors:t=>e[t]||{}}}()},(e,t,n)=>{n.d(t,{a:()=>a});var i=n(3),r=n(0);function a(e){const t=function(e){let t;return(0,r.N)()&&(t=(0,i.b)(window.googletag.pubads().getSlots(),function(e){return t=>(0,r.f)(t,e)}(e))),t}(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}},(e,t,n)=>{n.d(t,{a:()=>i});const i="prebid"},(e,t,n)=>{n.d(t,{a:()=>a,b:()=>i});const i=(e,t)=>{const n={...e};if(t.overrideMediaTypes)return t.overrideMediaTypes;const i=t.allowedMediaTypes;if(i){const e=Object.keys(n);for(const t of e)i.includes(t)||delete n[t]}return n},r=(e,t,n,r,a)=>{r.provideFormatter(t.bidder)(e,{placement:n,bid:t,resolvedMediaTypes:i(n.bidRequest.mediaTypes,t),context:a})},a=(e,t,n,i)=>{for(const a of t)for(const t of a.bidRequest.bids)r(e,t,a,n,i);return e}},(e,t,n)=>{n.d(t,{a:()=>i});const i=(e,t=document)=>new Promise(((n,i)=>{const r=t.createElement("script");r.async=!0,r.src=e,r.addEventListener("load",(()=>n())),r.addEventListener("error",(e=>i(e))),t.head.append(r)}))},(e,t,n)=>{n.d(t,{a:()=>i});const i=(e,t)=>{let n;return(...i)=>{n&&clearTimeout(n),n=window.setTimeout((()=>{n=void 0,e(...i)}),1e3*t)}}},(e,t,n)=>{n.d(t,{a:()=>a,b:()=>r,c:()=>o});var i=n(1);const r=e=>(0,i.m)(e)&&(0,i.q)(e.bidder)&&(0,i.q)(e.creativeId)&&(0,i.q)(e.placementId),a=(e,t,n)=>e.createComment(` Hubvisor: '${n.creativeType}' creative #${t.creativeId} from '${t.bidder}' for placement '${t.placementId}' `),o=(e,t,n)=>{const i=()=>{e.body.insertBefore(a(e,t,n),e.body.firstChild)};e.body?i():e.addEventListener("DOMContentLoaded",i)}},(e,t,n)=>{n.d(t,{a:()=>i});const i=(e,t)=>({kind:e,value:t})},(e,t,n)=>{n.d(t,{a:()=>i});const i="amazon"},(e,t,n)=>{n.d(t,{a:()=>i});const i=(e,...t)=>{const n=e.weight+t.reduce(((e,t)=>e+t.weight),0);if(n<=0)return e.value;let i=Math.random()*n;for(const n of[e,...t]){if(i<n.weight)return n.value;i-=n.weight}return e.value}},(e,t,n)=>{n.r(t),n.d(t,{AmazonContentProvider:()=>G,isAmazonBidResponse:()=>W});var i=n(4),r=n(89),a=n(15),o=n(16);const{debug:s,warn:d}=i.a.tag("apstag"),c=(0,a.a)((e=>{e.loadScript&&(()=>{if(window.apstag)return;const e=(e,t)=>{window.apstag?._Q.push([e,t])};window.apstag={init(){e("i",arguments)},fetchBids(){e("f",arguments)},setDisplayBids(){},targetingKeys:()=>[],renderImp(){},_Q:[]};const t=document.createElement("script");t.async=!0,t.src="https://c.amazon-adsystem.com/aax2/apstag.js",document.scripts[0]?.insertAdjacentElement("afterend",t)})(),window.apstag&&e.config&&(s("Initializing apstag",e.config),window.apstag.init(e.config))}));var l=n(1);const{warn:u}=i.a.tag("content-provider:amazon:accumulator");class p{#j={};push=e=>{this.#j[e.slot.slotID]&&u(`Amazon does not support multiple bids per slotId '${e.slot.slotID}'`,e),this.#j[e.slot.slotID]=e};build=()=>Object.values(this.#j).filter(l.i)}var m=n(52),f=n(50),g=n(64),h=n(48);const b=(e,{placement:t,bid:n,resolvedMediaTypes:i})=>{i.banner&&e.push({metadata:{bidId:`amzn-${(0,g.a)()}`,bidder:n.bidder,placementId:t.placementId,displayFormat:m.a.banner,mediaType:"banner",requestSizes:i.banner.sizes},slot:{slotID:n.params?.slotId??t.placementId,sizes:i.banner.sizes,slotName:n.params?.slotName}}),i.outstream&&e.push({metadata:{bidId:`amzn-outstream-${(0,g.a)()}`,bidder:n.bidder,placementId:t.placementId,displayFormat:m.a.outstream,mediaType:"video",requestSizes:[]},slot:{slotID:n.params?.slotId??t.placementId,mediaType:"video",sizes:n.params.sizes}}),i.instream&&e.push({metadata:{bidId:`amzn-instream-${(0,g.a)()}`,bidder:n.bidder,placementId:t.placementId,displayFormat:m.a.instream,mediaType:"video",requestSizes:[]},slot:{slotID:n.params?.slotId??t.placementId,mediaType:"video"}})};var y=n(26),v=n(28),I=n(29);const w=e=>(0,l.m)(e)&&(0,l.m)(e.targeting)&&(0,l.j)(e.amznbid);var S=n(94),C=n(92),R=n(93),E=n(7),T=n(36),x=n(17),A=n(90),D=n(66),k=n(40);const{info:O,error:B}=i.a.tag("amazon:outstream-player"),U=new Map;var N=n(39),_=n(37),P=n(38),j=n(72);const{error:$,debug:q,info:F}=i.a.tag("content-provider:amazon"),z=e=>{if(!e)return[0,0];const[t=0,n=0]=e.split("x").map((e=>parseInt(e,10))).map((e=>isNaN(e)?0:e));return[t,n]},M=e=>w(e)?z(e.targeting.amznsz):z(e.amznsz),V=e=>{if(w(e))return e.targeting;{const{amznbid:t,amzniid:n,amznp:i,amznsz:r,amznactt:a}=e;return{amznbid:t,amzniid:n,amznp:i,amznsz:r,amznactt:a}}},L=e=>{if(w(e)){const t=Object.entries(e.targeting).find((([e])=>e.endsWith("amzniid")));return t?.[1]??"unknown"}return e.amzniid},W=e=>!!e.amazon;class G{#$;#q;#F;#z;constructor(e){for(const e of["amznbid","amzniid","amznp","amznsz","amznactt"])y.i.add(e);this.#z=e.bus,this.#z.on(_.a.AmazonRenderRequest,(e=>{try{this.#F?.(...e)}catch(e){const t=new E.b(E.a.amazonRenderingFailed,`Error while rendering Amazon ${e}`);return reportError(t)}})),e.globalSettings.amazon?this.#q=e.globalSettings.amazon:$("AmazonContentProvider was loaded, but no configuration was provided: Amazon wrapper can't be initialized"),this.#$=e.globalSettings.bidderAliases}#M=e=>(0,l.m)(e)&&!0===e.timeout;#V=e=>{if((0,l.q)(e.amznbid)&&this.#q?.cpmMapping){const t=this.#q.cpmMapping[e.amznbid];if(t)return"EUR"===this.#q.currency?t/Number(P.remoteConfiguration.currentValue?.currencies.rates.USD?P.remoteConfiguration.currentValue?.currencies.rates.USD.EUR:1):t}return 0};#L=e=>{const t=`${Math.round(1e12*Math.random())}${Date.now()}`;return`https://aax.amazon-adsystem.com/e/dtb/vast?b=${e.amzniid}&pp=${e.amznbid}&rnd=${t}`};#W=(e,t,n,i,r)=>{const a=(e=>{const t={};for(const i of e)t[(n=i,n.slot.slotID)]=i;var n;return t})(i);for(const i of r){const r=a[i.slotID];if(!r)continue;if(this.#M(i)){e.timeouts.push({placementId:r.metadata.placementId,bidId:r.metadata.bidId,bidder:r.metadata.bidder,displayFormat:r.metadata.displayFormat,mediaType:r.metadata.mediaType,vendorId:793,requestSizes:r.metadata.requestSizes,userIdPartners:[],demandSource:"apstag"}),delete a[i.slotID];continue}const[o,s]=M(i),d=V(i);if(w(i))for(const e of Object.keys(d))y.i.add(e);if(""===d.amznbid&&""===d.amzniid&&""===d.amznp&&"0x0"===d.amznsz)continue;if(""===d.amzniid&&"0x0"===d.amznsz)continue;const c={providerId:S.a,amazon:i,auctionId:t,placementId:r.metadata.placementId,bidId:r.metadata.bidId,bidder:r.metadata.bidder,vendorId:793,mediaType:r.metadata.mediaType,width:o,height:s,creativeId:L(i),cpm:this.#V(d),currency:"USD",originalCpm:0,originalCurrency:this.#q?.currency??"USD",isNetRevenue:!1,targetings:d,ttl:30,fetchDuration:n,native:void 0,vastUrl:void 0,vastXml:void 0,displayFormat:r.metadata.displayFormat,requestSizes:r.metadata.requestSizes,userIdPartners:[],requestParams:void 0,demandSource:"apstag"};"outstream"!==c.displayFormat||w(c.amazon)||(c.vastUrl=this.#L(c.amazon)),e.bids.push(c),delete a[i.slotID]}for(const t of Object.values(a))t&&e.noBids.push({placementId:t.metadata.placementId,bidId:t.metadata.bidId,bidder:t.metadata.bidder,displayFormat:t.metadata.displayFormat,mediaType:t.metadata.mediaType,vendorId:793,requestSizes:t.metadata.requestSizes,userIdPartners:[],demandSource:"apstag"})};#G=()=>j.a.value?.()??[];#X=(e,t)=>{if(!this.#q?.pubId)return;const n={bidTimeout:e.bidderTimeout,pubID:this.#q.pubId,adServer:this.#q.adServer,videoAdServer:this.#q.videoAdServer};if(this.#q.enableDeals&&(n.deals=!0),t&&(n.gpdr={enabled:!0,consent:t}),e.amazonOrtb2){const t={...e.amazonOrtb2.user,eids:this.#G()};n.signals={ortb2:{...e.amazonOrtb2,user:t}}}return n};#H=(0,a.a)((()=>{window.apstag?.renderImp&&(this.#F=window.apstag?.renderImp.bind(window.apstag),window.apstag.renderImp=(...e)=>{const[t,n]=e,i=n&&U.get(n);if(this.#q?.useHbvPlayer&&i){U.delete(n);const{bid:r,placement:a}=i;(async(e,t,n)=>{const i=e.defaultView?.frameElement;(0,T.h)(i)&&(0,T.d)(i),(0,C.c)(e,t,{creativeType:"outstream-player"});const r=document.querySelector(n.rendering?.outstream?.selector??`#${n.placementId}`)??e.body;try{return await(0,A.a)("https://cdn.hubvisor.io/wrapper/common/player.js"),(0,D.a)(r,{vastUrl:t.vastUrl,vastXml:t.vastXml,targetWidth:t.width,targetHeight:t.height,renderContext:{document:e,bidResponse:t,context:void 0},...n.rendering?.outstream,onEvent:(e,n)=>{const i=(0,R.a)(e,n);switch(i.kind){case"impression":case"first-quartile":case"midpoint":case"third-quartile":case"complete":return k.a.emit("outstream-imp",{adId:t.bidId,kind:"impression"===i.kind?"video-imp":i.kind}),O(`Outstream ${i.kind} pixel triggered for ${t.placementId}`);case"error":return B("Error playing outstream",JSON.stringify({error:i.value,bidResponse:t}))}}}),!0}catch(e){return(0,x.a)(new E.b(E.a.outstreamPlayerLoadingFailed,`failed to load player: ${e.message} - bid ${t.bidder} ${t.vastUrl} ${t.vastXml}  - ${JSON.stringify(e)}`),e),!1}})(t,r,a).then((i=>{i||this.#F?.(...e),this.#z.emit(_.a.amazonImp,{amzniid:n,doc:t})}))}else this.#F?.(...e),n&&this.#z.emit(_.a.amazonImp,{amzniid:n,doc:t})})}));provideContent=async(e,t)=>{const n={bids:[],noBids:[],timeouts:[],rejectedBids:[]};if(!this.#q)return n;const i=(0,I.b)(v.a.currentValue?.tcData);if(this.#q.abortOnNoConsent&&(0,N.b)())return q("no consent: skipping Amazon auction"),n;c({config:this.#X(t,i),loadScript:!this.#q.skipScriptLoad});const a=(0,r.a)(new p,t.placements,{provideFormatter:(s=this.#$,e=>(s[e]??e)!==f.a.amazon?h.a:b)},t.context).build();var s,l;if(a.length>0)try{const i=a.map((e=>e.slot));F(`Starting auction with id #${e}`,i);const r=1e3*t.bidderTimeout,s=Date.now(),c=await(l={slots:i,timeout:r},new Promise(((e,t)=>{if(window.apstag){const t={resolved:!1};window.apstag.fetchBids(l,(n=>{t.resolved=!0,e(n)})),l.timeout&&(0,o.b)(l.timeout/1e3).then((()=>{t.resolved||(d(`Amazon 'fetchBids' didn't respond within timeout of ${l.timeout}ms`),e(l.slots.map((({slotID:e})=>({slotID:e,timeout:!0})))))}))}else t(new Error("'fetchBids' was called before 'setupApstag' and this is a developer error"))}))),u=Date.now()-s;F(`Ended auction with id #${e}`,c),this.#W(n,e,u,a,c);for(const e of n.bids)if("outstream"===e.displayFormat&&!w(e.amazon)){const n=t.placements.find((t=>t.placementId===e.placementId));n&&U.set(e.creativeId,{bid:e,placement:n})}this.#H()}catch(e){$("Error requesting bids to Amazon",e)}return n}}},(e,t,n)=>{n.r(t),n.d(t,{_floorDataForAuction:()=>D,addBidResponseHook:()=>te,allowedFields:()=>R,calculateAdjustedFloor:()=>_,continueAuction:()=>V,createFloorsDataForAuction:()=>M,fieldMatchingFunctions:()=>B,generateAndHandleFetch:()=>Q,getBiddersCpmAdjustment:()=>N,getFirstMatchingFloor:()=>U,getFloor:()=>j,getFloorDataFromAdUnits:()=>q,getFloorsDataForAuction:()=>$,handleFetchResponse:()=>Y,handleSetFloorsConfig:()=>ee,isFloorsDataValid:()=>X,normalizeDefault:()=>L,parseFloorData:()=>H,pickRandomModel:()=>z,requestBidsHook:()=>K,setImpExtPrebidFloors:()=>ie,setOrtbExtPrebidFloors:()=>re,setOrtbImpBidFloor:()=>ne,updateAdUnitsForAuction:()=>F});var i=n(0),r=n(6),a=n(83),o=n(10),s=n(2),d=n(33),c=n(20),l=n(5),u=n(9),p=n(3),m=n(45),f=n(14),g=n(8),h=n(86),b=n(24),y=n(81),v=n(87);function I(e,t,n,i=!0){if(t===n)return e;let r=e;try{r=(0,o.a)().convertCurrency(e,t,n)}catch(e){if(!i)throw e}return r}const w="Price Floors",S=(0,d.a)(1e4),C=Symbol();let R=[C,"gptSlot","adUnitCode","size","domain","mediaType"],E=!1,T=!1,x={},A=[],D={};const k=(()=>{let e;return function(){return null==e&&(e=(0,i.bb)((0,m.a)().topmostLocation,{noDecodeWholeURL:!0}).hostname),e}})();function O(e,t,{index:n=g.a.index}={}){return e?.adUnitCode||n.getAdUnit(t).code}let B={[C]:()=>"*",size:(e,t)=>(0,i._)(t.size)||"*",mediaType:(e,t)=>t.mediaType||"banner",gptSlot:(e,t)=>function(e,{index:t=g.a.index}={}){const n=t.getAdUnit({transactionId:e});return"gam"===(0,r.a)(n,"ortb2Imp.ext.data.adserver.name")&&n.ortb2Imp.ext.data.adserver.adslot}((e||t).transactionId)||(0,v.a)(O(e,t)).gptSlot,domain:k,adUnitCode:(e,t)=>O(e,t)};function U(e,t,n={}){let i=function(e,t,n){return e.length?e.reduce(((e,i)=>{let r=B[i](t,n)||"*";return e.push("*"===r?["*"]:[r.toLowerCase(),"*"]),e}),[]):[]}((0,r.a)(e,"schema.fields")||[],t,n);if(!i.length)return{matchingFloor:void 0};let o=i.map((e=>e[0])).join("-"),s=(0,r.a)(e,`matchingInputs.${o}`);if(s)return{...s};let d=(c=i,l=(0,r.a)(e,"schema.delimiter")||"|",c.reduce(((e,t)=>{let n=[];return e.map((e=>{t.map((t=>{n.push(e+l+t)}))})),n})).sort(((e,t)=>e.split("*").length-t.split("*").length)));var c,l;let u=(0,p.b)(d,(t=>e.values.hasOwnProperty(t))),m={floorMin:e.floorMin||0,floorRuleValue:e.values[u],matchingData:d[0],matchingRule:u===e.meta?.defaultRule?void 0:u};const f=(0,r.a)(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof f&&(m.floorMin=f),m.matchingFloor=Math.max(m.floorMin,m.floorRuleValue),(0,a.a)(e,`matchingInputs.${o}`,{...m}),m}function N(e,t,n){return parseFloat((0,y.a)(e,{...t,cpm:e},n))}function _(e,t){const n=Math.pow(10,10);return e*n/(t*n)*(e*n)/n}const P={banner:e=>(0,r.a)(e,"mediaTypes.banner.sizes")||[],video:e=>(0,r.a)(e,"mediaTypes.video.playerSize")||[],native:e=>(0,r.a)(e,"mediaTypes.native.image.sizes")?[(0,r.a)(e,"mediaTypes.native.image.sizes")]:[]};function j(e={currency:"USD",mediaType:"*",size:"*"}){let t=this,n=D[t.auctionId];if(!n||n.skipped)return{};e=function(e,t){let n=Object.keys(e.mediaTypes||{});return"*"===t.mediaType&&1===n.length&&(t.mediaType=n[0]),"*"===t.size&&-1!==n.indexOf(t.mediaType)&&P[t.mediaType]&&1===P[t.mediaType](e).length&&(t.size=P[t.mediaType](e)[0]),t}(t,e);let r=U(n.data,{...t},{mediaType:e.mediaType,size:e.size}),a=e.currency||n.data.currency;if(r.matchingFloor&&a!==n.data.currency)try{r.matchingFloor=(0,o.a)().convertCurrency(r.matchingFloor,n.data.currency,a)}catch(e){(0,i.X)(`${w}: Unable to get currency conversion for getFloor for bidder ${t.bidder}. You must have currency module enabled with defaultRates in your currency config`),a=n.data.currency}if(n.enforcement.bidAdjustment&&r.matchingFloor){const e=f.a.get(t.bidder,"inverseBidAdjustment");if(e)r.matchingFloor=e(r.matchingFloor,t);else{let e=N(r.matchingFloor,null,t);r.matchingFloor=e?_(r.matchingFloor,e):r.matchingFloor}}return r.matchingFloor?{floor:(s=r.matchingFloor,Math.ceil((parseFloat(s)*Math.pow(10,4)).toFixed(1))/Math.pow(10,4)),currency:a}:{};var s}function $(e,t){let n=(0,i.j)(e);return n.schema.delimiter=e.schema.delimiter||"|",n.values=function(e,t){let n=e.schema.fields,i=e.schema.delimiter,r=t&&-1===n.indexOf("adUnitCode")&&n.unshift("adUnitCode");return Object.keys(e.values).reduce(((n,a)=>(n[(r?`${t}${i}${a}`:a).toLowerCase()]=e.values[a],n)),{})}(n,t),n.currency=n.currency||"USD",n}function q(e){const t=e.find((e=>null!=e.floors?.schema));return e.reduce(((e,n)=>{if(null!=n.floors?.schema&&!(0,i.k)(n.floors.schema,t?.floors?.schema))return(0,i.U)(`${w}: adUnit '${n.code}' declares a different schema from one previously declared by adUnit '${t.code}'. Floor config for '${n.code}' will be ignored.`),e;const r=Object.assign({},t?.floors,{values:void 0},n.floors);if(X(r))if(e.values){let t=$(r,n.code).values;Object.assign(e.values,t)}else(e=$(r,n.code)).location="adUnit";else null!=n.floors&&(0,i.X)(`adUnit '${n.code}' provides an invalid \`floor\` definition, it will be ignored for floor calculations`,n);return e}),{})}function F(e,t,n){e.forEach((e=>{e.bids.forEach((e=>{t.skipped?delete e.getFloor:e.getFloor=j,e.auctionId=n,e.floorData={skipped:t.skipped,skipRate:(0,r.a)(t,"data.skipRate")??t.skipRate,floorMin:t.floorMin,modelVersion:(0,r.a)(t,"data.modelVersion"),modelWeight:(0,r.a)(t,"data.modelWeight"),modelTimestamp:(0,r.a)(t,"data.modelTimestamp"),location:(0,r.a)(t,"data.location","noData"),floorProvider:t.floorProvider,fetchStatus:x.fetchStatus}}))}))}function z(e,t){let n=Math.floor(Math.random()*t+1);for(let t=0;t<e.length;t++)if(n-=e[t].modelWeight,n<=0)return e[t]}function M(e,t){let n=(0,i.j)(x);if(2===(0,r.a)(n,"data.floorsSchemaVersion")){let{modelGroups:e,...t}=n.data;n.data=Object.assign(t,z(e,t.modelWeightSum))}let a=0===Object.keys((0,r.a)(n,"data.values")||{}).length;if(n.data=a?q(e):$(n.data),0===Object.keys((0,r.a)(n,"data.values")||{}).length)n.skipped=!0;else{const e=(0,i.s)("pbjs_skipRate")||((0,r.a)(n,"data.skipRate")??n.skipRate),t=100*Math.random()<parseFloat(e);n.skipped=t}return n.hasOwnProperty("floorMin")&&(n.data.floorMin=n.floorMin),F(e,n,t),n}function V(e){e.hasExited||(A=A.filter((t=>t.timer!==e.timer)),e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||(0,i.n)(),D[e.reqBidsConfigObj.auctionId]=M(e.reqBidsConfigObj.adUnits||(0,o.a)().adUnits,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0)}function L(e){if((0,i.P)(e.default)){let t="*";const n=(e.schema?.fields||[]).length;n?t=Array(n).fill("*").join(e.schema?.delimiter||"|"):(0,a.a)(e,"schema.fields",[C]),e.values=e.values||{},null==e.values[t]&&(e.values[t]=e.default,e.meta={defaultRule:t})}return e}function W(e){return e=L(e),t=(0,r.a)(e,"schema.fields"),!!(Array.isArray(t)&&t.length>0&&t.every((e=>-1!==R.indexOf(e)))||((0,i.U)(`${w}: Fields received do not match allowed fields`),0))&&(n=e,a=e.schema.fields.length,o=e.schema.delimiter||"|","object"==typeof n.values&&(n.values=Object.keys(n.values).reduce(((e,t)=>(function(e,t,n,i){return"string"==typeof e&&e.split(i).length===n&&"number"==typeof t}(t,n.values[t],a,o)&&(e[t]=n.values[t]),e)),{}),Object.keys(n.values).length>0));var t,n,a,o}const G={1:e=>W(e),2:e=>!(!Array.isArray(e.modelGroups)||0===e.modelGroups.length)&&(e.modelWeightSum=0,e.modelGroups.every((t=>!("number"!=typeof t.modelWeight||!W(t)||(e.modelWeightSum+=t.modelWeight,0)))))};function X(e){return"object"==typeof e&&(e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof G[e.floorsSchemaVersion]?((0,i.U)(`${w}: Unknown floorsSchemaVersion: `,e.floorsSchemaVersion),!1):G[e.floorsSchemaVersion](e))}function H(e,t){if(e&&"object"==typeof e&&X(e))return(0,i.V)(`${w}: A ${t} set the auction floor data set to `,e),{...e,location:t};(0,i.U)(`${w}: The floors data did not contain correct values`,e)}const K=(0,b.b)("priceFloors",(function(e,t){const n={reqBidsConfigObj:t,context:this,nextFn:e,haveExited:!1,timer:null};x.auctionDelay>0&&E?(n.timer=setTimeout((()=>{(0,i.X)(`${w}: Fetch attempt did not return in time for auction`),x.fetchStatus="timeout",V(n)}),x.auctionDelay),A.push(n)):V(n)}));function J(){A.forEach((e=>{clearTimeout(e.timer),V(e)})),A=[]}function Y(e){let t;E=!1,x.fetchStatus="success";try{t=JSON.parse(e)}catch(n){t=e}const n=H(t,"fetch");n&&(x.data=n,x.skipRate=(0,i.P)(n.skipRate)?n.skipRate:x.skipRate,x.floorProvider=n.floorProvider||x.floorProvider),J()}function Z(e){E=!1,x.fetchStatus="error",(0,i.U)(`${w}: Fetch errored with: `,e),J()}function Q(e){e.url&&!E?"GET"!==(e.method||"GET")?(0,i.U)(`${w}: 'GET' is the only request method supported at this time!`):(S(e.url,{success:Y,error:Z},null,{method:"GET"}),E=!0):E&&(0,i.X)(`${w}: A fetch is already occuring. Skipping.`)}function ee(e){x=(0,i.cb)(e,["floorMin","enabled",e=>!1!==e,"auctionDelay",e=>e||0,"floorProvider",t=>(0,r.a)(e,"data.floorProvider",t),"endpoint",e=>e||{},"skipRate",()=>isNaN((0,r.a)(e,"data.skipRate"))?e.skipRate||0:e.data.skipRate,"enforcement",e=>(0,i.cb)(e||{},["enforceJS",e=>!1!==e,"enforcePBS",e=>!0===e,"floorDeals",e=>!0===e,"bidAdjustment",e=>!1!==e]),"additionalSchemaFields",e=>{return"object"==typeof e&&Object.keys(e).length>0?(t=e,void Object.keys(t).forEach((e=>{-1===R.indexOf(e)&&"function"==typeof t[e]&&(R.push(e),B[e]=t[e])}))):void 0;var t},"data",e=>e&&H(e,"setConfig")||void 0]),x.enabled?(Q(x.endpoint),T||(c.on(l.EVENTS.AUCTION_END,(e=>{setTimeout((()=>delete D[e.auctionId]),3e3)})),(0,o.a)().requestBids.before(K,50),(0,u.a)("addBidResponse").before(te,(0,i.i)()?4:50),T=!0)):((0,i.V)(`${w}: Turning off module`),x={},D={},(0,u.a)("addBidResponse").getHooks({hook:te}).remove(),(0,o.a)().requestBids.getHooks({hook:K}).remove(),T=!1)}const te=(0,b.c)("priceFloors",(function(e,t,n,a){let s=D[n.auctionId];if(!s||!n||s.skipped)return e.call(this,t,n,a);const d=g.a.index.getBidRequest(n);let c,u=U(s.data,d,{...n,size:[n.width,n.height]});if(!u.matchingFloor)return 0!==u.matchingFloor&&(0,i.X)(`${w}: unable to determine a matching price floor for bidResponse`,n),e.call(this,t,n,a);let p=s.data.currency.toUpperCase(),m=n.currency||"USD";if(p===m.toUpperCase())c=n.cpm;else if(n.originalCurrency&&p===n.originalCurrency.toUpperCase())c=n.originalCpm;else try{c=(0,o.a)().convertCurrency(n.cpm,m.toUpperCase(),p)}catch(r){return(0,i.U)(`${w}: Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ${n}`),e.call(this,t,n,a)}return c=N(c,n,d),function(e,t,n,i){n.floorData={floorValue:t.matchingFloor,floorRule:t.matchingRule,floorRuleValue:t.floorRuleValue,floorCurrency:e.data.currency,cpmAfterAdjustments:i,enforcements:{...e.enforcement},matchedFields:{}},e.data.schema.fields.forEach(((i,r)=>{let a=t.matchingData.split(e.data.schema.delimiter)[r];n.floorData.matchedFields[i]=a}))}(s,u,n,c),function(e,t,n){let i=!1!==(0,r.a)(e,"enforcement.enforceJS"),a=!0===(0,r.a)(e,"enforcement.floorDeals")||!n.dealId,o=n.floorData.cpmAfterAdjustments<t.matchingFloor;return i&&o&&a}(s,u,n)?(a(l.REJECTION_REASON.FLOOR_NOT_MET),void(0,i.X)(`${w}: ${n.bidderCode}'s Bid Response for ${t} was rejected due to floor not met (adjusted cpm: ${n?.floorData?.cpmAfterAdjustments}, floor: ${u?.matchingFloor})`,n)):e.call(this,t,n,a)}));function ne(e,t,n){if("function"==typeof t.getFloor){let r,a;try{({currency:r,floor:a}=t.getFloor({currency:n.currency||s.b.getConfig("currency.adServerCurrency")||"USD",mediaType:n.mediaType||"*",size:"*"}))}catch(e){return void(0,i.X)("Cannot compute floor for bid",t)}a=parseFloat(a),null==r||null==a||isNaN(a)||Object.assign(e,{bidfloor:a,bidfloorcur:r})}}function ie(e,t,n){if(null!=e.bidfloor){let{floorMinCur:t,floorMin:i}=n.reqContext.floorMin||{};null==t&&(t=e.bidfloorcur);const r=e.ext?.prebid?.floors?.floorMinCur||e.ext?.prebid?.floorMinCur||t,o=e.ext?.prebid?.floors?.floorMin||e.ext?.prebid?.floorMin,s=I(e.bidfloor,e.bidfloorcur,t),d=!(!o||!r)&&I(o,r,t),c=d&&d<s?d:s;(0,a.a)(e,"ext.prebid.floors.floorMin",c),(null==i||i>c)&&(i=c),n.reqContext.floorMin={floorMin:i,floorMinCur:t}}}function re(e,t,n){T&&(0,a.a)(e,"ext.prebid.floors.enabled",e.ext?.prebid?.floors?.enabled||!1),n?.floorMin&&(0,i.Z)(e,{ext:{prebid:{floors:n.floorMin}}})}s.b.getConfig("floors",(e=>ee(e.floors))),(0,h.d)({type:h.a,name:"bidfloor",fn:ne}),(0,h.d)({type:h.a,name:"extPrebidFloors",fn:ie,dialects:[h.b],priority:-1}),(0,h.d)({type:h.c,name:"extPrebidFloors",fn:re,dialects:[h.b]})},(e,t,n)=>{n.r(t);var i=n(26),r=n(91),a=n(4),o=n(37),s=n(56),d=n(85),c=n(1),l=n(15);const{debug:u,info:p}=a.a.tag("gam:interceptors"),m={isProcessingEvents:!1,pendingEvents:[]},f=(e,t)=>{try{switch(t.type){case"after-define-slot":return e.gamDidDefineSlot(t.definedSlot,...t.params);case"after-display":return e.gamDidDisplay(...t.params);case"before-refresh":return e.gamWillRefresh(t.next,...t.params)}}catch{}},g=(0,r.a)((()=>{if(!m.delegate)return;if(m.isProcessingEvents)return;let e;for(m.isProcessingEvents=!0;(0,c.i)(e=m.pendingEvents.shift());)f(m.delegate,e);m.isProcessingEvents=!1}),0),h=(e,t)=>!!t&&((0,c.q)(t)?e.includes(t):e.includes(t.getSlotElementId())),b=(0,l.a)((e=>{window.Hubvisor?.ready||(u("preparing gam for header bidding"),(0,s.b)((t=>{((e,t)=>{const n=e.pubads(),i=n.refresh.bind(n);n.refresh=(...e)=>{if(t&&t.length>0){const n=(0,d.a)(e[0]).filter((e=>h(t,e)));if(n.length>0){if(i(n),(0,d.a)(e[0]).length===n.length)return;e[0]=(0,d.a)(e[0]).filter((e=>!h(t,e)))}}const n=(0,d.a)(e[0]).filter(c.i).map((e=>(0,c.q)(e)?e:e.getSlotElementId())),r=n.length>0?n.join(", "):"*";p(`before 'refresh': ${r}`),m.pendingEvents.push({type:"before-refresh",params:e,next:i}),g()}})(t,e),(e=>{const t=e.defineSlot.bind(e);e.defineSlot=(...e)=>{const n=t(...e);return u("after 'defineSlot'",e),m.pendingEvents.push({type:"after-define-slot",params:e,definedSlot:n}),g(),n}})(t),(e=>{const t=e.display.bind(e);e.display=(...e)=>{t(...e),u("after 'display'",e),m.pendingEvents.push({type:"after-display",params:e}),g()}})(t),u("gam interceptors ready")})))}));var y=n(7),v=n(17);const{info:I}=a.a.tag("GoogletagEvent"),w=(0,l.a)((()=>{(0,s.b)((e=>{e.pubads().addEventListener("impressionViewable",(e=>{I(`Slot '${e.slot.getSlotElementId()}' has been viewed`)}))}))})),S=(0,l.a)((()=>{(0,s.b)((e=>{e.pubads().addEventListener("slotRenderEnded",(e=>{const t=e.slot.getSlotElementId();if(e.isEmpty)return I(`Empty slot: ${t}`);I(`Slot '${t}' has been rendered. Advertiser: ${e.advertiserId}. Line item: ${e.lineItemId}. Size: ${e.size}`)}))}))}));var C=n(27),R=n(88),E=n(94);const T="backfill";var x=n(51),A=n(54),D=n(63),k=n(38);const O=([e,t])=>({code:e,minValue:t}),B=(e,t)=>t[1]-e[1],U=new Map,{debug:N}=a.a.tag("targetings-resolver"),_=(e,t,n)=>{const i=t.buckets.reduce(((e,t)=>e.max>t.max?e:t),{max:0,increment:1});if(e>i.max)return i.max.toFixed(2);let r=0;const a=(t.buckets.find((t=>e<=t.max&&e>=r||(r=t.max,!1)))||i).increment,o=1e4,s=(e*o-r*o)/(a*o),d=n?n(s):Math.floor(s);return Number((d*a+r).toFixed(10)).toFixed(2)},P=(e,t)=>{for(const[n,i]of Object.entries(t))n.startsWith("hb_native")||(e[n]&&N(`Assigned targetings overrides existing targetings at key '${n}'`,e,t),e[n]=i)},j=(e,t,n)=>{const i=t.targetingKeyPrefix,r=n?`${n}`:"",a=e=>[i,e,r].filter((e=>!!e)).join("_");if(e.bidResponse.providerId===R.a)return n?{}:{[a("adid")]:e.bidResponse.bidId,[a("pb")]:_(e.cpmAdjustment.adjustedCpm,t.priceGranularity,t.cpmRoundingFunction)};if(e.bidResponse.providerId===T)return{[a("backfillid")]:e.bidResponse.bidId,[a("backfill")]:"backfill"};if(e.bidResponse.providerId===E.a){if(n)return{};const i=((e,t)=>{if(!t.amazon?.cpmMapping||0===e.cpmAdjustment.adjustedCpm)return;const n=Number(k.remoteConfiguration.currentValue?.currencies.rates.USD?k.remoteConfiguration.currentValue?.currencies.rates.USD.EUR:1),i=(e=>{const t=U.get(e);if(t)return t;const n=(e=>{const t=Object.entries(e).sort(B);return{banner:t.filter((([e])=>!e.startsWith("v_")&&!e.startsWith("o_"))).map(O),instream:t.filter((([e])=>e.startsWith("v_"))).map(O),outstream:t.filter((([e])=>e.startsWith("o_"))).map(O)}})(e);return U.set(e,n),n})(t.amazon.cpmMapping),r=((e,t)=>"video"===e.bidResponse.mediaType?"outstream"===e.bidResponse.displayFormat?t.outstream:t.instream:t.banner)(e,i),a=r.find((({minValue:i})=>("EUR"===t.amazon?.currency?n*i:i)<=e.cpmAdjustment.adjustedCpm));if(a)return a.code;(0,v.a)(new y.b(y.a.amazonCpmMappingError,`No code found for the cpm '${e.cpmAdjustment.adjustedCpm}' in mapping for Amazon bid`))})(e,t);if(i)return{[(o="amznbid",[o,r].filter((e=>!!e)).join("_"))]:i}}var o;return{}},$=(e,t)=>t.sas?.formatId?{}:e.bidResponse.targetings,q=({renderable:e,settings:t,sasFormatId:n})=>{const r=C.c&&e.content.some((e=>e.bidResponse.providerId===R.a)),{content:a,pgContent:o}=e.content.reduce(((e,t)=>(t.bidResponse.deal?.isGuaranteed?e.pgContent.push(t):e.content.push(t),e)),{content:[],pgContent:[]}),s={hbv_debug:r?"true":null,hbv_uplift:A.a?"0":"1"};for(const e of i.i)s[e]=null;t.secondChance.enabled&&e.config.refreshReason!==x.b.secondChance&&(s[D.e]="false");for(const e of a){const t=$(e,{sas:{formatId:n}});P(s,t)}for(const e of a){const i=j(e,t,n);P(s,i)}const d={hbv_pg_dealid:o.map((e=>e.bidResponse.deal.name)),hbv_pg_adid:o.map((e=>e.bidResponse.bidId))};P(s,d);const c=((e,t,n)=>{try{return t.additionalTargetings?.(e,n)??{}}catch(t){const n=new y.b(y.a.onAdditionalTargetings,t);(0,v.a)(n,`additionalTargetings failed for ${e.placement.placementId}`,e)}return{}})(e,t,s);return P(s,c),s};var F=n(49),z=n(16),M=n(53),V=(n(18),n(36)),L=n(59),W=n(73);const{debug:G,error:X,info:H}=a.a.tag("short-circuit"),K=e=>{if((0,c.g)(e)){const t=e();return G("Forwarding retrieved HTMLElement",t),t}{const t=document.querySelector(e);if(G(`Getting HTMLElement from selector '${e}'`,t),t)return t}},J=(e,t,n)=>{const{placementId:i}=e.placement;var r;((e,t,n,i)=>{const r=i?.isDfpBypass??!1,a=i?.isSmartNoAd??!1;if(!e){H(`placement ${n} won't be rendered without content`);const e=t.skipIframe?document.body:K(t.selector);return W.a.dispatch("hsc-no-content",{placementId:n,bidResponse:void 0,renderingDiv:e,isGamBypass:r,isSmartNoAd:a})}const o=e.bidResponse,s=o.bidId;if(t.skipIframe)G(`Rendering content #${s} in current frame`),setTimeout((()=>{(0,L.a)("adServerRender",{document,adId:s}),W.a.dispatch("hsc-render",{placementId:n,bidResponse:e.bidResponse,renderingDiv:document.body,isGamBypass:r,isSmartNoAd:a})}),0);else{const i=t.selector;H(`Rendering content: #${s} for placement '${i}'`);const d=K(i);if(!d)throw new Error(`couldn't match element w/ selector '${i}' for content #${s} from placement ${n}`);G(`found element w/ selector '${i}' for content #${s}`,d);const c=((e,t,n)=>{G(`Using an iframe for bid #${e}`);const{width:i,height:r,placementId:a}=t;(0,V.i)(n)&&(0,V.c)(n);const o=document.createElement("iframe");return(0,V.l)(o,{width:i,height:r,id:`hbv-${a}`}),n.append(o),o})(s,o,d);(0,V.o)(c,(()=>{setTimeout((()=>{(0,L.a)("adServerRender",{document:c.contentDocument,adId:s}),W.a.dispatch("hsc-render",{placementId:n,bidResponse:e.bidResponse,renderingDiv:d,isGamBypass:r,isSmartNoAd:a})}),0)}))}})((r=e.content).find((({bidResponse:e})=>!e.deal?.isGuaranteed&&e.providerId===R.a))??r.find((e=>e.bidResponse.providerId===T)),t,i,n)};var Y=n(39);const{info:Z,debug:Q,warn:ee,error:te}=a.a.tag("dfp"),ne="initial",ie="waitingForRefresh",re=new class{#K={};#J=[];#Y=!0;#r={shouldPerformInitialRefresh:!1,shouldRefreshNewTags:!1,matchPlacementOnce:!1,shouldRefreshOnDisplay:!1,shouldBypassDfp:!1};#Z;#Q=ne;#z;#ee=(0,z.a)();tagsReady=()=>this.#ee.promise;start=e=>{const{settings:t,bus:n}=e;this.#r=Object.assign({},t.dfp2),this.#Z=e.settings,this.#z=n,this.#z.on(o.a.impression,this.#te),this.#z.on(o.a.refresh,this.#ne),this.#Q=this.#r.shouldPerformInitialRefresh?ne:ie,b(e.settings.dfp2.elementIdsExcludedFromHB),w(),S(),(0,s.b)((e=>{e.pubads().disableInitialLoad();const t=e.pubads().getSlots();t&&t.length>0&&this.#ie()})),this.#re(t),m.delegate=this,g()};#ae=(0,l.a)((()=>{setTimeout((()=>{this.#Y&&(this.render([]),(0,v.a)(new y.b(y.a.adserverTimeout,"Adserver timeout for GAM")))}),1e3*this.#Z.renderTimeout)}));#re=(0,l.a)((e=>{{const t=e.ias,n=i.f.value;if(!t)return;if(!n)return;n.start(t.anId,t.slotProvider,t.timeout)}}));#ie=(0,l.a)((()=>{Q("tags are ready"),this.#ee.resolve(),this.#r.shouldPerformInitialRefresh&&this.#ae()}));#oe=(0,r.a)((()=>{this.#ie()}),.05);#se=e=>{(0,s.b)((t=>{try{t.pubads().refresh([e])}catch(t){const n=new y.b(y.a.onDisplayOrDfpRefresh,t);(0,v.a)(n,"Failed to display/refresh slot",e)}}))};#de=e=>{if(!(0,c.j)(e)){if((0,c.q)(e)||e instanceof HTMLElement){const t=e instanceof HTMLElement?e.id:e;return this.#ce().find((e=>e.getSlotElementId()===t))}return e}};#le=e=>(0,d.a)(e).map(this.#de).filter(c.i);#ue=()=>{const e=new Set;let t;for(const{refresh:n,args:i}of this.#J){const r=this.#le(i[0]);if(0===r.length)return{refresh:n};t=n;for(const t of r)e.add(t)}if(t)return{refresh:t,slots:[...e]}};#pe=(e,t)=>{const n=e.placement.rendering?.dfp;return!(!(0,M.c)(n)||!(0,F.b)(n.adUnitPath,t.getAdUnitPath()))||!(!(0,M.d)(n)||!(0,F.b)(n.elementId,t.getSlotElementId()))||!(!(0,M.e)(n)||!(0,F.b)(n.match,t.getAdUnitPath(),t.getSlotElementId()))||(0,F.b)(e.placement.placementId,t.getAdUnitPath(),t.getSlotElementId())};#me=(e,t)=>{const n=Object.values(this.#K).filter((e=>!t.has(e.placement.placementId))).filter((t=>this.#pe(t,e)));return n.length>1&&ee(`multiple renderables matching slot ${e.getSlotElementId()}: check if this is a configuration error as only the first one will be used and impressions may be lost`,n),n[0]};#fe=e=>{const t=new Set,n=[];for(const i of e){const e=this.#me(i,t);if(e){const r=e.placement.placementId;this.#r.matchPlacementOnce&&t.add(r),Z(`Matched slot '${i.getSlotElementId()}' with placement '${r}'`),n.push({slot:i,renderable:e})}}return n};#ge=e=>{const t=this.#Z;if(!t)return te("Cannot setup targetings without global options");for(const{slot:n,renderable:i}of e){const e=q({renderable:i,settings:t});Z("Set targeting",e,`for slot '${n.getSlotElementId()}'`);for(const[t,i]of Object.entries(e))(0,c.i)(i)?n.setTargeting(t,i):n.getTargeting(t).length>0&&n.clearTargeting(t)}};#ce=()=>window.googletag?.pubads().getSlots()??[];#he=async()=>{this.#r.shouldPerformInitialRefresh&&this.#Q===ne&&(this.#Q="awaitTags",await this.#ee.promise,this.#Q=ie,window.googletag?.pubads().refresh())};#be=async()=>{try{return await(i.f.value?.setupTargetings())}catch(e){ee("failed to apply ias targetings to GAM slots",e)}};#ye=e=>{const t=new Set;for(const{renderable:{content:n}}of e)for(const e of n)t.add(e.bidResponse.placementId);this.#z?.emit(o.a.adrequest,t)};#ve=()=>this.#r.isNoConsentForGam?this.#r.isNoConsentForGam():(0,Y.b)();#Ie=(0,r.a)((async()=>{if(this.#Y)return Q("Bids are not ready yet. AdRequests will be buffered until bids are ready.");const e=this.#ue();if(!e)return Q("No pending AdRequest: waiting for more");const t=e.slots?.map((e=>e.getSlotElementId())).join(", ")??"*";Z(`sending pending ad requests: ${t}`),await this.#be();const n=e.slots??this.#ce();this.#J=[];const i=this.#fe(n);this.#ye(i),this.#r.shouldBypassDfp&&this.#ve()&&!A.a?(Z("bypassing GAM"),((e,t)=>{const n=[];for(const{renderable:i,options:r}of e)try{J(i,r,t)}catch(e){n.push(e)}if(n.length>0){const e=n.map((e=>`${e}`)).join("\n");t.isDfpBypass?(0,v.a)(new y.b(y.a.bypassGamRenderError,`failed to render while bypassing gam...\n${e}`)):X(`Failed to render the following:\n${e}`)}})(i.flatMap((({renderable:e,slot:t})=>{const n=t.getSlotElementId();return document.getElementById(n)?[{renderable:e,options:{selector:`#${CSS.escape(n)}`}}]:[]})),{isDfpBypass:!0})):(this.#ge(i),this.#we(e.slots),e.refresh(e.slots))}),.1);#Se=()=>{this.#r.shouldPerformInitialRefresh?this.#he():this.#Ie()};#te=e=>{const t=e.renderable.placement.rendering?.dfp;if(!t)return;const{placementId:n}=e.renderable.placement;this.#K[n]&&(delete this.#K[n],Q(`Removed pending bid for placement '${n}'`),this.#Ce({placements:[n]}))};#ne=e=>{e.refreshConfig.refreshReason===x.b.pageView&&(Q("Discard all pending renderables"),this.#K={})};#Ce=e=>{this.#z?.emit(o.a.renderableRequested,e)};#we=e=>{try{return this.#r?.preGamCallStep?.(e)}catch(e){te("preGamCallStep error",e)}};gamDidDefineSlot=e=>{this.#oe(),this.#r.shouldRefreshNewTags&&this.#Q===ie&&this.#se(e)};gamDidDisplay=e=>{if(!this.#r.shouldRefreshOnDisplay)return;const t=this.#de(e);if(!t)return ee("couldn't find matching slot, it won't be refreshed",e);this.#se(t)};gamWillRefresh=(e,...t)=>{this.#J.push({refresh:e,args:t}),this.#Ie(),this.#r.shouldPerformInitialRefresh||this.#ae()};canRender=e=>!!e.placement.rendering?.dfp;render=e=>{Z("Renderables received",e);for(const t of e)this.#K[t.placement.placementId]=t;this.#Y=!1,this.#Se()}};i.e.provide({tagsReady:re.tagsReady()}),i.h.register(M.a.dfp,re)},(e,t,n)=>{var i=n(10),r=n(0),a=n(6),o=n(83),s=n(20),d=n(32),c=n(5),l=n(8),u=n(3),p=n(2),m=n(79),f=n(43);const{AD_RENDER_FAILED:g,AD_RENDER_SUCCEEDED:h,STALE_RENDER:b,BID_WON:y}=c.EVENTS;function v({reason:e,message:t,bid:n,id:i}){const a={reason:e,message:t};n&&(a.bid=n),i&&(a.adId=i),(0,r.U)(`Error rendering ad (id: ${i}): ${t}`),s.emit(g,a)}function I({doc:e,bid:t,id:n}){const i={doc:e};t&&(i.bid=t),n&&(i.adId=n),s.emit(h,i)}function w(e,{adId:t,options:n,bidResponse:i}){if(null!=i){if(i.status!==c.BID_STATUS.RENDERED||((0,r.X)(`Ad id ${t} has been rendered before`),s.emit(b,i),!(0,a.a)(p.b.getConfig("auctionOptions"),"suppressStaleRender"))){try{const{adId:t,ad:a,adUrl:o,width:s,height:d,renderer:l,cpm:u,originalCpm:p,mediaType:g}=i;if((0,m.c)(l))(0,m.b)(l,i);else if(t){if(g===f.d)return void v({reason:c.AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:"Cannot render video ad",bid:i,id:t});const l={AUCTION_PRICE:p||u,CLICKTHROUGH:n?.clickUrl||""};e({ad:(0,r.eb)(a,l),adUrl:(0,r.eb)(o,l),adId:t,width:s,height:d})}}catch(e){return void v({reason:c.AD_RENDER_FAILED_REASON.EXCEPTION,message:e.message,id:t,bid:i})}l.a.addWinningBid(i),s.emit(y,i)}}else v({reason:c.AD_RENDER_FAILED_REASON.CANNOT_FIND_AD,message:`Cannot find ad '${t}'`,id:t})}c.EVENTS.AD_RENDER_SUCCEEDED,c.EVENTS.AD_RENDER_FAILED;const S=c.AD_RENDER_FAILED_REASON.NO_AD,C=c.AD_RENDER_FAILED_REASON.EXCEPTION,R=c.EVENTS.BID_WON,E=new WeakSet,T={"Prebid Request":function(e,t,n){w((function(t){A(n),e(Object.assign({message:"Prebid Response"},t))}),{options:t.options,adId:t.adId,bidResponse:n})},"Prebid Event":function(e,t,n){if(null!=n)if(n.status===c.BID_STATUS.RENDERED)switch(t.event){case c.EVENTS.AD_RENDER_FAILED:v({bid:n,id:t.adId,reason:t.info.reason,message:t.info.message});break;case c.EVENTS.AD_RENDER_SUCCEEDED:I({doc:null,bid:n,id:t.adId});break;default:(0,r.U)(`Received x-origin event request for unsupported event: '${t.event}' (adId: '${t.adId}')`)}else(0,r.X)(`Received x-origin event request without corresponding render request for ad '${t.adId}'`);else(0,r.U)(`Cannot find ad '${t.adId}' for x-origin event request`)}};function x(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){const t=(0,u.b)(l.a.getBidsReceived(),(function(e){return e.adId===n.adId}));T.hasOwnProperty(n.message)&&T[n.message](function(e){return null==e.origin&&0===e.ports.length?function(){const e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,r.U)(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),n,t)}}function A({adId:e,adUnitCode:t,width:n,height:i}){["div","iframe"].forEach((a=>{let o=function(n){let i=function(e,t){return(0,r.N)()?function(e){const t=(0,u.b)(window.googletag.pubads().getSlots(),(t=>(0,u.b)(t.getTargetingKeys(),(n=>(0,u.c)(t.getTargeting(n),e)))));return t?t.getSlotElementId():null}(e):(0,r.G)()?function(e){let t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(e,t),a=document.getElementById(i);return a&&a.querySelector(n)}(a+':not([style*="display: none"])');if(o){let e=o.style;e.width=n?n+"px":"100%",e.height=i+"px"}else(0,r.X)(`Unable to locate matching page element for adUnitCode ${t}.  Can't resize it to ad's dimensions.  Please review setup.`)}))}Object.assign(T,{"Prebid Native":function(e,t,n){if(null!=n)switch(E.has(n)||(E.add(n),l.a.addWinningBid(n),s.emit(R,n)),t.action){case"assetRequest":e((0,d.f)(t,n));break;case"allAssetRequest":e((0,d.e)(t,n));break;case"resizeNativeHeight":n.height=t.height,n.width=t.width,A(n);break;default:(0,d.d)(t,n)}else(0,r.U)(`Cannot find ad for x-origin event request: '${t.adId}'`)}});var D=n(42),k=n(9),O=n(14);function B(e,t){return e===t?0:e<t?-1:1}function U(e=(e=>e)){return(t,n)=>B(e(t),e(n))}function N(e=B){return(t,n)=>-e(t,n)||0}function _(...e){return function(t,n){for(const i of e){const e=i(t,n);if(0!==e)return e}return 0}}function P(e=B){return function(e=B){return(t,n)=>e(n,t)<0?n:t}(N(e))}const j=U((e=>e.cpm)),$=U((e=>e.responseTimestamp)),q=P(_(j,N(U((e=>e.timeToRespond))))),F=P(_(j,N($)));P(_(j,$));var z=n(78),M=[];const V="targetingControls.allowTargetingKeys",L="targetingControls.addTargetingKeys",W=`Only one of "${V}" or "${L}" can be set`,G=Object.keys(c.TARGETING_KEYS).map((e=>c.TARGETING_KEYS[e]));let X={isActualBid:e=>e.getStatusCode()===c.STATUS.GOOD,isBidNotExpired:e=>e.responseTimestamp+1e3*(0,z.a)(e)>(0,r.ib)(),isUnusedBid:e=>e&&(e.status&&!(0,u.c)([c.BID_STATUS.RENDERED],e.status)||!e.status)};function H(e){return!Object.values(X).some((t=>!t(e)))}const K=(0,k.b)("sync",(function(e,t,n=0,i=!1){if(!i){const i=[],a=p.b.getConfig("sendBidsControl.dealPrioritization");let o=(0,r.z)(e,"adUnitCode");return Object.keys(o).forEach((e=>{let s=[],d=(0,r.z)(o[e],"bidderCode");Object.keys(d).forEach((e=>s.push(d[e].reduce(t)))),n>0?(s=a?s.sort(J(!0)):s.sort(((e,t)=>t.cpm-e.cpm)),i.push(...s.slice(0,n))):i.push(...s)})),i}return e}));function J(e=!1){return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}const Y=function(e){let t={},n={};function i(e,t){return e.adserverTargeting&&t&&((0,r.I)(t)&&(0,u.c)(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function o(t){return"string"==typeof t?[t]:(0,r.I)(t)?t:e.getAdUnitCodes()||[]}function s(){let t=e.getBidsReceived();if(p.b.getConfig("useBidCache")){const e=p.b.getConfig("bidCacheFilterFunction");"function"==typeof e&&(t=t.filter((t=>n[t.adUnitCode]===t.auctionId||!!e(t))))}else t=t.filter((e=>n[e.adUnitCode]===e.auctionId));return t=t.filter((e=>(0,a.a)(e,"video.context")!==f.a)).filter(H),t.forEach((e=>(e.latestTargetedAuctionId=n[e.adUnitCode],e))),K(t,F)}function l(e,n){let i=t.getWinningBids(e,n),r=m();return i=i.map((e=>({[e.adUnitCode]:Object.keys(e.adserverTargeting).filter((t=>void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===r.indexOf(t))).reduce(((t,n)=>{const i=[e.adserverTargeting[n]],r={[n.substring(0,20)]:i};if(n===c.TARGETING_KEYS.DEAL){const a={[`${n}_${e.bidderCode}`.substring(0,20)]:i};return[...t,r,a]}return[...t,r]}),[])}))),i}function m(){return e.getStandardBidderAdServerTargeting().map((e=>e.key)).concat(G).filter(r.lb)}function g(e,t){return Object.keys(t.adserverTargeting).filter(h()).forEach((n=>{e.length&&e.filter(function(e){return function(n){return n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e]}}(n)).forEach(function(e){return function(n){(0,r.I)(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(r.lb),delete t.adserverTargeting[e]}}(n))})),e.push(t),e}function h(){let e=m();return e=e.concat(d.a),function(t){return-1===e.indexOf(t)}}function b(e){return{[e.adUnitCode]:Object.keys(e.adserverTargeting).filter(h()).map((t=>({[t.substring(0,20)]:[e.adserverTargeting[t]]})))}}function y(e,t){return t.map((t=>({[`${t}_${e.bidderCode}`.substring(0,20)]:[e.adserverTargeting[t]]})))}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(t,n){if((0,r.N)()){const i=o(t),a=e.getAdUnits().filter((e=>(0,u.c)(i,e.code)));let s=M.reduce(((e,t)=>(e[t]=null,e)),{});window.googletag.pubads().getSlots().forEach((e=>{let t=(0,r.M)(n)&&n(e);a.forEach((n=>{(n.code===e.getAdUnitPath()||n.code===e.getSlotElementId()||(0,r.M)(t)&&t(n.code))&&e.updateTargetingFromMap(s)}))}))}},t.resetPresetTargetingAST=function(e){o(e).forEach((function(e){const t=window.apntag.getTag(e);if(t&&t.keywords){const n=Object.keys(t.keywords),i={};n.forEach((e=>{(0,u.c)(M,e.toLowerCase())||(i[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:i})}}))},t.getAllTargeting=function(t,n=s()){const m=o(t);var f=l(m,n).concat(function(e,t){return t.filter((t=>(0,u.c)(e,t.adUnitCode))).map((e=>Object.assign({},e))).reduce(g,[]).map(b).filter((e=>e))}(m,n)).concat(p.b.getConfig("enableSendAllBids")?function(e,t){const n=G.concat(d.a),r=p.b.getConfig("sendBidsControl.bidLimit"),a=K(t,q,r),o=p.b.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),s=o?o.map((e=>c.TARGETING_KEYS[e])):n;return a.map((t=>{if(i(t,e))return{[t.adUnitCode]:y(t,n.filter((e=>void 0!==t.adserverTargeting[e]&&-1!==s.indexOf(e))))}})).filter((e=>e))}(m,n):function(e,t){if(!0===p.b.getConfig("targetingControls.alwaysIncludeDeals")){const n=G.concat(d.a);return K(t,q).map((t=>{if(t.dealId&&i(t,e))return{[t.adUnitCode]:y(t,n.filter((e=>void 0!==t.adserverTargeting[e])))}})).filter((e=>e))}return[]}(m,n)).concat(function(t){function n(e){return(0,a.a)(e,c.JSON_MAPPING.ADSERVER_TARGETING)}function i(e){const t=n(e);return Object.keys(t).map((function(e){return(0,r.S)(t[e])&&(t[e]=t[e].split(",").map((e=>e.trim()))),(0,r.I)(t[e])||(t[e]=[t[e]]),{[e]:t[e]}}))}return e.getAdUnits().filter((e=>(0,u.c)(t,e.code)&&n(e))).map((e=>({[e.code]:i(e)})))}(m));f.map((e=>{Object.keys(e).map((t=>{e[t].map((e=>{-1===M.indexOf(Object.keys(e)[0])&&(M=Object.keys(e).concat(M))}))}))}));const h=Object.keys(Object.assign({},c.DEFAULT_TARGETING_KEYS,c.NATIVE_KEYS));let v=p.b.getConfig(V);const I=p.b.getConfig(L);if(null!=I&&null!=v)throw new Error(W);v=null!=I?h.concat(I):v||h,Array.isArray(v)&&v.length>0&&(f=function(e,t){const n=Object.assign({},c.TARGETING_KEYS,c.NATIVE_KEYS),i=Object.keys(n),a={};(0,r.V)(`allowTargetingKeys - allowed keys [ ${t.map((e=>n[e])).join(", ")} ]`),e.map((e=>{const r=Object.keys(e)[0],o=e[r].filter((e=>{const r=Object.keys(e)[0],o=0===i.filter((e=>0===r.indexOf(n[e]))).length||(0,u.b)(t,(e=>{const t=n[e];return 0===r.indexOf(t)}));return a[r]=!o,o}));e[r]=o}));const o=Object.keys(a).filter((e=>a[e]));return(0,r.V)(`allowTargetingKeys - removed keys [ ${o.join(", ")} ]`),e.filter((e=>e[Object.keys(e)[0]].length>0))}(f,v)),f=function(e){let t=e.map((e=>({[Object.keys(e)[0]]:e[Object.keys(e)[0]].map((e=>({[Object.keys(e)[0]]:e[Object.keys(e)[0]].join(",")}))).reduce(((e,t)=>Object.assign(t,e)),{})}))).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=Object.assign({},e[n],t[n]),e}),{});return t}(f);const w=p.b.getConfig("targetingControls.auctionKeyMaxChars");return w&&((0,r.V)(`Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ${w} characters.  Running checks on auction keys...`),f=function(e,t){let n=(0,r.j)(e),i=Object.keys(n).map((e=>({adUnitCode:e,adserverTargeting:n[e]}))).sort(J());return i.reduce((function(e,i,a,o){let s=(d=i.adserverTargeting,Object.keys(d).reduce((function(e,t){return e+`${t}%3d${encodeURIComponent(d[t])}%26`}),""));var d;a+1===o.length&&(s=s.slice(0,-3));let c=i.adUnitCode,l=s.length;return l<=t?(t-=l,(0,r.V)(`AdUnit '${c}' auction keys comprised of ${l} characters.  Deducted from running threshold; new limit is ${t}`,n[c]),e[c]=n[c]):(0,r.X)(`The following keys for adUnitCode '${c}' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ${l}, the current allotted amount was ${t}.\n`,n[c]),a+1===o.length&&0===Object.keys(e).length&&(0,r.U)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}(f,w)),m.forEach((e=>{f[e]||(f[e]={})})),f},p.b.getConfig("targetingControls",(function(e){null!=(0,a.a)(e,V)&&null!=(0,a.a)(e,L)&&(0,r.U)(W)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((n=>{Object.keys(e).filter(t?t(n):(0,r.F)(n)).forEach((t=>{Object.keys(e[t]).forEach((n=>{let i=e[t][n];"string"==typeof i&&-1!==i.indexOf(",")&&(i=i.split(",")),e[t][n]=i})),(0,r.W)(`Attempting to set targeting-map for slot: ${n.getSlotElementId()} with targeting-map:`,e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e,t=s()){const n=o(e);return t.filter((e=>(0,u.c)(n,e.adUnitCode))).filter((e=>!0===O.a.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0)).map((e=>e.adUnitCode)).filter(r.lb).map((e=>t.filter((t=>t.adUnitCode===e?t:null)).reduce(q)))},t.setTargetingForAst=function(e){let n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){(0,r.U)("unable to reset targeting for AST"+e)}Object.keys(n).forEach((e=>Object.keys(n[e]).forEach((t=>{if((0,r.W)(`Attempting to set targeting for targetId: ${e} key: ${t} value: ${n[e][t]}`),(0,r.S)(n[e][t])||(0,r.I)(n[e][t])){let i={},r=/pt[0-9]/;t.search(r)<0?i[t.toUpperCase()]=n[e][t]:i[t]=n[e][t],window.apntag.setKeywords(e,i,{overrideKeyValue:!0})}}))))},t.isApntagDefined=function(){if(window.apntag&&(0,r.M)(window.apntag.setKeywords))return!0},t}(l.a);var Z=n(82),Q=n(80),ee=n(11);const te="__hubjs_debugging__";function ne(){return(0,i.a)().installedModules.includes("debugging")}function ie(e){return new ee.a((t=>{(0,Q.a)(e,"debugging",t)}))}function re({alreadyInstalled:e=ne,script:t=ie}={}){let n=null;return function(){return null==n&&(n=new ee.a(((n,a)=>{setTimeout((()=>{if(e())n();else{const e="$$PREBID_DIST_URL_BASE$$debugging-standalone.js";(0,r.W)(`Debugging module not installed, loading it from "${e}"...`),(0,i.a)()._installDebugging=!0,t(e).then((()=>{(0,i.a)()._installDebugging({DEBUG_KEY:te,hook:k.b,config:p.b,createBid:Z.a,logger:(0,r.db)("DEBUG:")})})).then(n,a)}}))}))),n}}const ae=function({load:e=re(),hook:t=(0,k.a)("requestBids")}={}){let n=null,i=!1;function r(e,...t){return(n||ee.a.resolve()).then((()=>e.apply(this,t)))}function a(){t.getHooks({hook:r}).remove(),i=!1}return{enable:function(){i||(n=e(),t.before(r,99),i=!0)},disable:a,reset:function(){n=null,a()}}}();ae.reset,p.b.getConfig("debugging",(function({debugging:e}){e?.enabled?ae.enable():ae.disable()}));var oe=n(77),se=n(76),de=n(22),ce=n(24),le=n(45);const ue=(0,se.a)("fpdEnrichment"),pe=(0,r.Y)((function(e=window.location.host){if(!ue.cookiesAreEnabled())return e;const t=e.split(".");if(2===t.length)return e;let n,i,a=-2;const o=`_rdc${Date.now()}`,s="writeable";do{n=t.slice(a).join(".");let e=new Date((0,r.ib)()+1e4).toUTCString();ue.setCookie(o,s,e,"Lax",n,void 0),ue.getCookie(o,void 0)===s?(i=!1,ue.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,n,void 0)):(a+=-1,i=Math.abs(a)<=t.length)}while(i);return n})),me=["architecture","bitness","model","platformVersion","fullVersionList"],fe=["brands","mobile","platform"],ge=function(e=window.navigator?.userAgentData){const t=e&&fe.some((t=>void 0!==e[t]))?Object.freeze(be(1,e)):null;return function(){return t}}(),he=function(e=window.navigator?.userAgentData){const t={},n=new WeakMap;return function(i=me){if(!n.has(i)){const e=Array.from(i);e.sort(),n.set(i,e.join("|"))}const a=n.get(i);if(!t.hasOwnProperty(a))try{t[a]=e.getHighEntropyValues(i).then((e=>(0,r.L)(e)?null:Object.freeze(be(2,e)))).catch((()=>null))}catch(e){t[a]=ee.a.resolve(null)}return t[a]}}();function be(e,t){function n(e,t){const n={brand:e};return(0,r.S)(t)&&!(0,r.K)(t)&&(n.version=t.split(".")),n}const i={source:e};return t.platform&&(i.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(i.browsers=(t.fullVersionList||t.brands).map((({brand:e,version:t})=>n(e,t)))),void 0!==t.mobile&&(i.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((e=>{const n=t[e];(0,r.S)(n)&&(i[e]=n)})),i}const ye=["dooh","app","site"];function ve(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}var Ie=n(21),we=n(34),Se=n(23),Ce=n(13);const Re={getRefererInfo:le.a,findRootDomain:pe,getWindowTop:r.y,getWindowSelf:r.x,getHighEntropySUA:he,getLowEntropySUA:ge},Ee=(0,k.b)("sync",(e=>{const t=[e,xe().catch((()=>null)),ee.a.resolve("cookieDeprecationLabel"in navigator&&(0,Ie.a)(Se.a,(0,we.a)(Ce.c,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch((()=>null))];return ee.a.all(t).then((([e,t,n])=>{const i=Re.getRefererInfo();if(function(e){["app","site","device"].forEach((t=>{const n=p.b.getConfig(t);null!=n&&(e[t]=(0,r.Z)({},n,e[t]))}))}(e),Object.entries(De).forEach((([t,n])=>{const a=n(e,i);a&&Object.keys(a).length>0&&(e[t]=(0,r.Z)({},a,e[t]))})),t&&(0,o.a)(e,"device.sua",Object.assign({},t,e.device.sua)),n){const t={cdep:n};(0,o.a)(e,"device.ext",Object.assign({},t,e.device.ext))}e=function(e){return ye.reduce(((t,n)=>(ve(e,n)&&(null!=t?((0,r.X)(`FPD specifies both '${t}' and '${n}'; dropping the latter.`),delete e[n]):t=n),t)),null),e}(e);for(let t of ye)if(ve(e,t)){e[t]=(0,r.Z)({},ke(0,i),e[t]);break}return e}))}));function Te(e){try{return e(Re.getWindowTop())}catch(t){return e(Re.getWindowSelf())}}function xe(){const e=p.b.getConfig("firstPartyData.uaHints");return Array.isArray(e)&&0!==e.length?Re.getHighEntropySUA(e):ee.a.resolve(Re.getLowEntropySUA())}function Ae(e){return(0,r.r)(e,Object.keys(e))}const De={site(e,t){if(!ye.filter((e=>"site"!==e)).some(ve.bind(null,e)))return Ae({page:t.page,ref:t.ref})},device:()=>Te((e=>({w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:(0,r.q)()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()}))),regs(){const e={};Te((e=>e.navigator.globalPrivacyControl))&&(0,o.a)(e,"ext.gpc",1);const t=p.b.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function ke(e,t){const n=(0,le.b)(t.page,{noLeadingWww:!0}),i=Te((e=>e.document.querySelector("meta[name='keywords']")))?.content?.replace?.(/\s/g,"");return Ae({domain:n,keywords:i,publisher:Ae({domain:Re.findRootDomain(n)})})}var Oe=n(69);const Be={frameBorder:0,scrolling:"no",marginHeight:0,marginWidth:0,topMargin:0,leftMargin:0,allowTransparency:"true"};var Ue=n(44);const Ne=(0,i.a)(),{triggerUserSyncs:_e}=D.userSync,{ADD_AD_UNITS:Pe,REQUEST_BIDS:je,SET_TARGETING:$e}=c.EVENTS,qe={bidWon:function(e){if(l.a.getBidsRequested().map((e=>e.bids.map((e=>e.adUnitCode)))).reduce(r.m).filter(r.lb).includes(e))return!0;(0,r.U)('The "'+e+'" placement is not defined.')}};function Fe(e,t){let n=[];return(0,r.I)(e)&&(t?e.length===t:e.length>0)&&(e.every((e=>(0,r.H)(e,2)))?n=e:(0,r.H)(e,2)&&n.push(e)),n}function ze(e){const t=(0,r.j)(e),n=t.mediaTypes.banner,i=Fe(n.sizes);return i.length>0?(n.sizes=i,t.sizes=i):((0,r.U)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function Me(e){const t=(0,r.j)(e),n=t.mediaTypes.video;if(n.playerSize){let e="number"==typeof n.playerSize[0]?2:1;const i=Fe(n.playerSize,e);i.length>0?(2===e&&(0,r.V)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=i,t.sizes=i):((0,r.U)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function Ve(e){const t=(0,r.j)(e),n=t.mediaTypes.native;if(n.ortb){const e=Object.keys(c.NATIVE_KEYS).filter((e=>c.NATIVE_KEYS[e].includes("hb_native_"))),i=Object.keys(n).filter((t=>e.includes(t)));i.length>0&&((0,r.U)(`when using native OpenRTB format, you cannot use legacy native properties. Deleting ${i} keys from request.`),i.forEach((e=>delete t.mediaTypes.native[e])))}return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&((0,r.U)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&((0,r.U)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&((0,r.U)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function Le(e,t){let n=(0,a.a)(e,`mediaTypes.${t}.pos`);if(!(0,r.P)(n)||isNaN(n)||!isFinite(n)){let n=`Value of property 'pos' on ad unit ${e.code} should be of type: Number`;(0,r.X)(n),s.emit(c.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:n}),delete e.mediaTypes[t].pos}return e}function We(e){const t=t=>`adUnit.code '${e.code}' ${t}`,n=e.mediaTypes,i=e.bids;return null==i||(0,r.I)(i)?null==i&&null==e.ortb2Imp?((0,r.U)(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=i&&0!==i.length||(e.bids=[{bidder:null}],(0,r.W)(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,r.U)(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,r.U)(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){let e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){let t=ae,n=null;try{n=e.getItem(te)}catch(e){}null!==n&&t.enable()}}(),Ne.bidderSettings=Ne.bidderSettings||{},Ne.libLoaded=!0,Ne.version="v8.30.0",(0,r.V)("Prebid.js v8.30.0 loaded"),Ne.installedModules=Ne.installedModules||[],Ne.adUnits=Ne.adUnits||[],Ne.triggerUserSyncs=_e;const Ge={validateAdUnit:We,validateBannerMediaType:ze,validateSizes:Fe};Object.assign(Ge,{validateNativeMediaType:Ve}),Object.assign(Ge,{validateVideoMediaType:Me});const Xe=(0,k.b)("sync",(function(e){const t=[];return e.forEach((e=>{if(null==(e=We(e)))return;const n=e.mediaTypes;let i,r,a;n.banner&&(i=ze(e),n.banner.hasOwnProperty("pos")&&(i=Le(i,"banner"))),n.video&&(r=Me(i||e),n.video.hasOwnProperty("pos")&&(r=Le(r,"video"))),n.native&&(a=Ve(r||i||e));const o=Object.assign({},i,r,a);t.push(o)})),t}),"checkAdUnitSetup");function He(e){const t=l.a[e]().filter((e=>l.a.getAdUnitCodes().includes(e.adUnitCode))),n=l.a.getLastAuctionId();return t.map((e=>e.adUnitCode)).filter(r.lb).map((e=>t.filter((t=>t.auctionId===n&&t.adUnitCode===e)))).filter((e=>e&&e[0]&&e[0].adUnitCode)).map((e=>({[e[0].adUnitCode]:{bids:e}}))).reduce(((e,t)=>Object.assign(e,t)),{})}Ne.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,r.V)("Invoking hubjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=Ne.getAdserverTargetingForAdUnitCode(e);return(0,r.jb)(t)}(0,r.W)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},Ne.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){const t=l.a.getAllBidsForAdUnitCode(e).filter(H);return t.length?t.reduce(q):{}}(0,r.W)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},Ne.getAdserverTargetingForAdUnitCode=function(e){return Ne.getAdserverTargeting(e)[e]},Ne.getAdserverTargeting=function(e){return(0,r.V)("Invoking hubjs.getAdserverTargeting",arguments),Y.getAllTargeting(e)},Ne.getConsentMetadata=function(){return(0,r.V)("Invoking hubjs.getConsentMetadata"),Oe.d.getConsentMeta()},Ne.getNoBids=function(){return(0,r.V)("Invoking hubjs.getNoBids",arguments),He("getNoBids")},Ne.getNoBidsForAdUnitCode=function(e){return{bids:l.a.getNoBids().filter((t=>t.adUnitCode===e))}},Ne.getBidResponses=function(){return(0,r.V)("Invoking hubjs.getBidResponses",arguments),He("getBidsReceived")},Ne.getBidResponsesForAdUnitCode=function(e){return{bids:l.a.getBidsReceived().filter((t=>t.adUnitCode===e))}},Ne.setTargetingForGPTAsync=function(e,t){if((0,r.V)("Invoking hubjs.setTargetingForGPTAsync",arguments),!(0,r.N)())return void(0,r.U)("window.googletag is not defined on the page");let n=Y.getAllTargeting(e);Y.resetPresetTargeting(e,t),Y.setTargetingForGPT(n,t),Object.keys(n).forEach((e=>{Object.keys(n[e]).forEach((t=>{"hb_adid"===t&&l.a.setStatusForBids(n[e][t],c.BID_STATUS.BID_TARGETING_SET)}))})),s.emit($e,n)},Ne.setTargetingForAst=function(e){(0,r.V)("Invoking hubjs.setTargetingForAn",arguments),Y.isApntagDefined()?(Y.setTargetingForAst(e),s.emit($e,Y.getAllTargeting())):(0,r.U)("window.apntag is not defined on the page")},Ne.renderAd=(0,k.b)("async",(function(e,t,n){(0,r.V)("Invoking hubjs.renderAd",arguments),(0,r.W)("Calling renderAd with adId :"+t),function(e,t,n){let a;function o(n){null!=n?v(Object.assign({id:t,bid:a},n)):I({doc:e,bid:a,adId:t})}try{if(t&&e){a=l.a.findBidByAdId(t);{const e=a&&l.a.index.getAdUnit(a),t=(0,i.a)().videoModule;if(e?.video&&t)return void t.renderBid(e.video.divId,a)}e!==document||(0,r.B)()?w((function(t){(function({ad:e,adUrl:t,width:n,height:i},r,a=document){e||t?(t&&!e?function(e,t){const n=e.createElement("iframe");t=Object.assign({},t,Be),Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),e.body.appendChild(n)}(a,{width:n,height:i,src:t}):(a.write(e),a.close()),r()):r({reason:S,message:"Missing ad markup or URL"})})(t,o,e),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t.width,e.defaultView.frameElement.height=t.height);const n=document.createComment(`Creative ${a.creativeId} served by ${a.bidder} Prebid.js Header Bidding`);(0,r.C)(n,e,"html")}),{adId:t,options:{clickUrl:n?.clickThrough},bidResponse:a}):o({reason:c.AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:"renderAd was prevented from writing to the main document."})}else o({reason:c.AD_RENDER_FAILED_REASON.MISSING_DOC_OR_ADID,message:"missing "+(t?"doc":"adId")})}catch(e){o({reason:C,message:e.message})}}(e,t,n)})),Ne.removeAdUnit=function(e){if((0,r.V)("Invoking hubjs.removeAdUnit",arguments),!e)return void(Ne.adUnits=[]);let t;t=(0,r.I)(e)?e:[e],t.forEach((e=>{for(let t=Ne.adUnits.length-1;t>=0;t--)Ne.adUnits[t].code===e&&Ne.adUnits.splice(t,1)}))},Ne.requestBids=function(){const e=(0,k.b)("async",(function({bidsBackHandler:e,timeout:t,adUnits:n,adUnitCodes:i,labels:a,auctionId:o,ttlBuffer:d,ortb2:c,metrics:l,defer:m}={}){s.emit(je);const f=t||p.b.getConfig("bidderTimeout");(0,r.V)("Invoking hubjs.requestBids",arguments),i&&i.length?n=n.filter((e=>(0,u.c)(i,e.code))):i=n&&n.map((e=>e.code));const g={global:(0,r.Z)({},p.b.getAnyConfig("ortb2")||{},c||{}),bidder:Object.fromEntries(Object.entries(p.b.getBidderConfig()).map((([e,t])=>[e,t.ortb2])).filter((([e,t])=>null!=t)))};return Ee(ee.a.resolve(g.global)).then((t=>(g.global=t,Ke({bidsBackHandler:e,timeout:f,adUnits:n,adUnitCodes:i,labels:a,auctionId:o,ttlBuffer:d,ortb2Fragments:g,metrics:l,defer:m}))))}),"requestBids");return(0,k.c)(e,(function(t={}){let n=t.adUnits||Ne.adUnits;return t.adUnits=(0,r.I)(n)?n.slice():[n],t.metrics=(0,ce.a)(),t.metrics.checkpoint("requestBids"),t.defer=(0,ee.b)({promiseFactory:e=>new Promise(e)}),e.call(this,t),t.defer.promise}))}();const Ke=(0,k.b)("async",(function({bidsBackHandler:e,timeout:t,adUnits:n,ttlBuffer:i,adUnitCodes:a,labels:s,auctionId:d,ortb2Fragments:c,metrics:m,defer:f}={}){const g=(0,de.b)(p.b.getConfig("s2sConfig")||[]);function h(t,n,i){if("function"==typeof e)try{e(t,n,i)}catch(e){(0,r.U)("Error executing bidsBackHandler",null,e)}f.resolve({bids:t,timedOut:n,auctionId:i})}if(function(e){e.forEach((e=>(0,Ue.c)(e)))}(n),(n=(0,ce.d)(m).measureTime("requestBids.validate",(()=>Xe(n)))).forEach((e=>{const t=Object.keys(e.mediaTypes||{banner:"banner"}),n=e.bids.map((e=>e.bidder)),a=de.a.bidderRegistry,s=n.filter((e=>!g.has(e))),d=e.ortb2Imp?.ext?.tid||(0,r.n)();e.transactionId=d,null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),(0,o.a)(e,"ortb2Imp.ext.tid",d),s.forEach((n=>{const i=a[n],o=i&&i.getSpec&&i.getSpec(),s=o&&o.supportedMediaTypes||["banner"];t.some((e=>(0,u.c)(s,e)))?oe.a.incrementBidderRequestsCounter(e.code,n):((0,r.X)((0,r.mb)(e,n)),e.bids=e.bids.filter((e=>e.bidder!==n)))})),oe.a.incrementRequestsCounter(e.code)})),n&&0!==n.length){const e=l.a.createAuction({adUnits:n,adUnitCodes:a,callback:h,cbTimeout:t,labels:s,auctionId:d,ortb2Fragments:c,metrics:m});let i=n.length;i>15&&(0,r.V)(`Current auction ${e.getAuctionId()} contains ${i} adUnits.`,n),a.forEach((t=>Y.setLatestAuctionForAdUnit(t,e.getAuctionId()))),e.callBids()}else(0,r.W)("No adUnits configured. No bids requested."),h()}),"startAuction");Ne.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(se.c),n(Je),e.call(this,t)}),49),Ne.addAdUnits=function(e){(0,r.V)("Invoking hubjs.addAdUnits",arguments),Ne.adUnits.push.apply(Ne.adUnits,(0,r.I)(e)?e:[e]),s.emit(Pe)},Ne.onEvent=function(e,t,n){(0,r.V)("Invoking hubjs.onEvent",arguments),(0,r.M)(t)?!n||qe[e].call(null,n)?s.on(e,t,n):(0,r.U)('The id provided is not valid for event "'+e+'" and no handler was set.'):(0,r.U)('The event handler provided is not a function and was not set on event "'+e+'".')},Ne.offEvent=function(e,t,n){(0,r.V)("Invoking hubjs.offEvent",arguments),n&&!qe[e].call(null,n)||s.off(e,t,n)},Ne.getEvents=function(){return(0,r.V)("Invoking hubjs.getEvents"),s.getEvents()},Ne.registerBidAdapter=function(e,t){(0,r.V)("Invoking hubjs.registerBidAdapter",arguments);try{de.a.registerBidAdapter(e(),t)}catch(e){(0,r.U)("Error registering bidder adapter : "+e.message)}},Ne.registerAnalyticsAdapter=function(e){(0,r.V)("Invoking hubjs.registerAnalyticsAdapter",arguments);try{de.a.registerAnalyticsAdapter(e)}catch(e){(0,r.U)("Error registering analytics adapter : "+e.message)}},Ne.createBid=function(e){return(0,r.V)("Invoking hubjs.createBid",arguments),(0,Z.a)(e)};const Je=[],Ye=(0,k.b)("async",(function(e){e&&!(0,r.L)(e)?((0,r.V)("Invoking hubjs.enableAnalytics for: ",e),de.a.enableAnalytics(e)):(0,r.U)("hubjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");Ne.enableAnalytics=function(e){Je.push(Ye.bind(this,e))},Ne.aliasBidder=function(e,t,n){(0,r.V)("Invoking hubjs.aliasBidder",arguments),e&&t?de.a.aliasBidAdapter(e,t,n):(0,r.U)("bidderCode and alias must be passed as arguments","hubjs.aliasBidder")},Ne.aliasRegistry=de.a.aliasRegistry,p.b.getConfig("aliasRegistry",(e=>{"private"===e.aliasRegistry&&delete Ne.aliasRegistry})),Ne.getAllWinningBids=function(){return l.a.getAllWinningBids()},Ne.getAllPrebidWinningBids=function(){return l.a.getBidsReceived().filter((e=>e.status===c.BID_STATUS.BID_TARGETING_SET))},Ne.getHighestCpmBids=function(e){return Y.getWinningBids(e)},Ne.markWinningBidAsUsed=function(e){const t=Ze(e,"Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function.");t.length>0&&l.a.addWinningBid(t[0])};const Ze=(e,t)=>{let n=[];return e.adUnitCode&&e.adId?n=l.a.getBidsReceived().filter((t=>t.adId===e.adId&&t.adUnitCode===e.adUnitCode)):e.adUnitCode?n=Y.getWinningBids(e.adUnitCode):e.adId?n=l.a.getBidsReceived().filter((t=>t.adId===e.adId)):(0,r.X)(t),n};function Qe(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,r.U)("Error processing command :","prebid.js",e)}}))}Ne.getConfig=p.b.getAnyConfig,Ne.readConfig=p.b.readAnyConfig,Ne.mergeConfig=p.b.mergeConfig,Ne.mergeBidderConfig=p.b.mergeBidderConfig,Ne.setConfig=p.b.setConfig,Ne.setBidderConfig=p.b.setBidderConfig,Ne.que.push((()=>{window.addEventListener("message",x,!1)})),Ne.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){(0,r.U)("Error processing command :",e.message,e.stack)}else(0,r.U)("Commands written into hubjs.cmd.push must be wrapped in a function")},Ne.que.push=Ne.cmd.push,Ne.processQueue=function(){k.b.ready(),Qe(Ne.que),Qe(Ne.cmd)},Ne.triggerBilling=e=>{const t=Ze(e,"Improper use of triggerBilling. It requires a bid with at least an adUnitCode or an adId to function."),n=t.find((t=>t.requestId===e.requestId))||t[0];if(t.length>0&&n)try{de.a.callBidBillableBidder(n)}catch(e){(0,r.U)("Error when triggering billing :",e)}else(0,r.X)("The bid provided to triggerBilling did not match any bids received.")};const et=Ne;var tt=n(74);Promise.resolve().then((()=>{var e=new Error("Module is not available (weak dependency)");throw e.code="MODULE_NOT_FOUND",e})).then((e=>!!e)).catch((()=>!1)),Promise.resolve().then((()=>{if(!n.m[97]){var e=new Error("Module '97' is not available (weak dependency)");throw e.code="MODULE_NOT_FOUND",e}return n(97)})).then((e=>!!e)).catch((()=>!1));const nt=Promise.resolve().then((()=>{if(!n.m[96]){var e=new Error("Module '96' is not available (weak dependency)");throw e.code="MODULE_NOT_FOUND",e}return n(96)})).then((e=>!!e)).catch((()=>!1)),it=Promise.resolve().then((()=>{var e=new Error("Module is not available (weak dependency)");throw e.code="MODULE_NOT_FOUND",e})).then((e=>!!e)).catch((()=>!1)),rt=Promise.resolve().then((()=>{if(!n.m[98]){var e=new Error("Module '98' is not available (weak dependency)");throw e.code="MODULE_NOT_FOUND",e}return n(98)})).then((e=>!!e)).catch((()=>!1));var at=n(28),ot=n(4),st=(n(18),n(29));const{debug:dt,warn:ct,info:lt}=ot.a.tag("turbo-cmp");var ut=n(64);const pt=new class{#Re=(0,ut.b)();newPageViewId(){this.#Re=(0,ut.b)()}get pageViewId(){return this.#Re}};var mt=n(71);const ft={smartadserver:!0,richAudience:!0,pubmatic:!0,prisma:!0,mediasquare:!0,smileWanted:!0,xandr:!0,magnite:!0,indexExchange:!0,criteo:!0,triplelift:!0,invibes:!0,spotx:!0,nexx360:!0,noBid:!0,missena:!0,nextMillennium:!0,adagio:!0,bliink:!0};class gt{priceGranularity={buckets:[{max:1,increment:.01},{max:2,increment:.02},{max:4,increment:.05},{max:6,increment:.1},{max:8,increment:.2},{max:10,increment:.5},{max:20,increment:1},{max:50,increment:5},{max:100,increment:10},{max:300,increment:50},{max:1e3,increment:100}]};cpmRoundingFunction;strictGdprSettings=!1;consent;#Ee=e=>({enabled:e?.enabled??!0,consentTimeout:e?.consentTimeout??mt.a.totalConsentTimeout,shouldSkipAuctionOnConsentFailure:e?.shouldSkipAuctionOnConsentFailure??!0,shouldSkipAuctionOnNegativeConsent:e?.shouldSkipAuctionOnNegativeConsent??!1,assumeConsentlessIfCmpUnavailable:e?.assumeConsentlessIfCmpUnavailable??!1,shouldSkipAdserverOnConsentless:e?.shouldSkipAdserverOnConsentless??!1,storageVendorExceptions:e?.storageVendorExceptions,cmpTimeout:e?.cmpTimeout??e?.consentTimeout??mt.a.cmpTimeout,defaults:{gdprApplies:!0,...e?.defaults},overrides:{...e?.overrides},uspEnabled:e?.enabled??!1,strictStorageEnforcement:e?.strictStorageEnforcement});beam;#Te=e=>({collectUrl:"https://beam.hubvisor.io/v2/",vimpUrl:"https://beam.hubvisor.io/imp/video",collectRetryDelay:1,collectRetryCount:1,collectDebounceDelay:.1,...e});bidderTimeout=1.8;renderTimeout=10;targetingKeyPrefix="hbv";publisherId;support;buildRefreshOptions;shouldPerformInitialAuction=!0;shouldUseDynamicFloors=!1;carbonFilter;nativeRendering;skinRendering;cpmMultiplier;adserverMultiplier;renderList={competitionDebounceDelay:.05};dfp2;#xe=e=>({shouldPerformInitialRefresh:!1,shouldRefreshNewTags:!1,matchPlacementOnce:!1,shouldRefreshOnDisplay:!1,shouldBypassDfp:!1,...e});ias;#Ae=e=>{if(e)return{...e,timeout:e.timeout??1.5}};userSync;#De=e=>({smartadserver:{enabled:!0,useIframes:!0},richAudience:{enabled:!1},pubmatic:{enabled:!0,useIframes:!0},prisma:{enabled:!1,useIframes:!1},mediasquare:{enabled:!0,useIframes:!0},smileWanted:{enabled:!1,useIframes:!1},xandr:{enabled:!0,useIframes:!0},magnite:{enabled:!0,useIframes:!0},indexExchange:{enabled:!0,useIframes:!0},triplelift:{enabled:!0,useIframes:!0},criteo:{enabled:!0,useIframes:!0},invibes:{enabled:!0},spotx:{enabled:!0},nexx360:{enabled:!1,useIframes:!1},noBid:{enabled:!1,useIframes:!1},missena:{enabled:!1,useIframes:!1},nextMillennium:{enabled:!1,useIframes:!1},adagio:{enabled:!1,useIframes:!1},bliink:{enabled:!1,useIframes:!1},...e});rtdSettings;#ke=e=>({auctionDelay:100,adloox:{enabled:!1,waitForIt:!1,thresholds:[50,60,70,80,90],slotinpath:!1},onePlusX:{enabled:!1,waitForIt:!1,customerId:void 0,bidders:void 0,timeout:void 0},ias:{enabled:!1,waitForIt:!1,pubId:"",keyMappings:void 0,pageUrl:void 0,adUnitPath:void 0},oxxionRtd:{enabled:!1,waitForIt:!1,domain:"",contexts:void 0,threshold:void 0,samplingRate:void 0,bidders:void 0},greenbidsRtd:{enabled:!1,waitForIt:!1,pbuid:""},...e});sas={};criteo;#Oe=e=>({fastBidVersion:"latest",...e});adot;#Be=e=>({...e});schains=[];storagePolicy;#Ue=e=>{const t={consent:"local-storage",noConsent:"session-storage"},n={consent:"local-storage",noConsent:"local-storage"};return{settings:{intrastitial:e?.settings?.intrastitial??n,consent:e?.settings?.consent??n,dynamicTimeout:e?.settings?.dynamicTimeout??n,clientContext:e?.settings?.clientContext??t,remoteConfiguration:e?.settings?.remoteConfiguration??n,tdid:e?.settings?.tdid??t,adnxsid:e?.settings?.adnxsid??t},custom:e?.custom}};secondChance;#Ne=e=>({adserver:e?.adserver,enabled:e?.enabled??!1,mode:e?.mode??"boolean",maxCount:e?.maxCount??1,isPlacementAllowed:e?.isPlacementAllowed});secondaryBidders;s2sConfig;#_e=e=>({enabled:e?.enabled??!1,bidders:e?.bidders??[]});#Pe=e=>({externalVisitsProvider:e?.externalVisitsProvider,periodicity:e?.periodicity??-1,sessionDuration:e?.sessionDuration});bidderSettings;preAuctionStep;filterAuctionStep;postAuctionStep;preRenderStep;postRenderStep;preAdserverCallStep;overrideRenderFormat;overrideRichMediaSettings;overrideDisplayFormat;additionalTargetings;overrideBidPriority;auctionTags;floors;bidderAliases={};exposePbjsAdUnits=!1;amazon;sublime;ortb;intrastitial;instream;constructor(e){Object.assign(this,e),this.consent=this.#Ee(e.consent),this.dfp2=this.#xe(e.dfp2),this.ias=this.#Ae(e.ias),this.userSync=this.#De(e.userSync),this.rtdSettings=this.#ke(e.rtdSettings),this.beam=this.#Te(e.beam),this.adot=this.#Be(e.adot),this.criteo=this.#Oe(e.criteo),this.storagePolicy=this.#Ue(e.storagePolicy),this.secondChance=this.#Ne(e.secondChance),this.intrastitial=this.#Pe(e.intrastitial),this.s2sConfig=this.#_e(e.s2sConfig)}}var ht=n(15);const bt=(e,t,n)=>{e[t]=n},yt=()=>console.log("%c","color:red"),vt={requestBids:et.requestBids,getConfig:et.getConfig,readConfig:et.readConfig,setConfig:et.setConfig,mergeConfig:et.mergeConfig,addAdUnits:et.addAdUnits,removeAdUnit:et.removeAdUnit,setBidderConfig:et.setBidderConfig,setBidderSettings:e=>{et.bidderSettings=e}};(0,ht.a)((()=>{bt(et,"getConfig",yt),bt(et,"setConfig",yt),bt(et,"mergeConfig",yt),bt(et,"addAdUnits",yt),bt(et,"removeAdUnit",yt),bt(et,"setBidderConfig",yt);let e=et.bidderSettings;vt.setBidderSettings=t=>{e=t},Object.defineProperty(et,"bidderSettings",{get:()=>e,set(){yt()}})}));var It=n(50),wt=n(55),St=n(38);const Ct=({userSync:e,bidderAliases:t},n)=>{const i=(e=>{const t=new Set;for(const n of e??[])for(const{bidder:e}of n.bidRequest.bids)t.add(e);return t})(n),r=Object.entries(t).reduce(((e,[t,r])=>(n&&!i.has(t)||(e[r]??=t),e)),{}),a=new Set,o=new Set;e.smartadserver.enabled&&(e.smartadserver.useIframes&&o.add(It.a.Smart),a.add(It.a.Smart)),e.richAudience.enabled&&(e.richAudience.useIframes&&o.add(It.a.richaudience),a.add(It.a.richaudience)),e.pubmatic.enabled&&(e.pubmatic.useIframes&&o.add(It.a.pubmatic),a.add(It.a.pubmatic)),e.mediasquare.enabled&&(e.mediasquare.useIframes&&o.add(It.a.mediasquare),a.add(It.a.mediasquare)),e.prisma.enabled&&(e.prisma.useIframes&&o.add(It.a.prisma),a.add(It.a.prisma)),e.smileWanted.enabled&&(e.smileWanted.useIframes&&o.add(It.a.smilewanted),a.add(It.a.smilewanted)),e.xandr.enabled&&(e.xandr.useIframes&&o.add(It.a.AppNexus),a.add(It.a.AppNexus)),e.magnite.enabled&&(e.magnite.useIframes&&o.add(It.a.Rubicon),a.add(It.a.Rubicon)),e.indexExchange.enabled&&(e.indexExchange.useIframes&&o.add(It.a.IndexExchange),a.add(It.a.IndexExchange)),e.triplelift.enabled&&(e.triplelift.useIframes&&o.add(It.a.TripleLift),a.add(It.a.TripleLift)),e.criteo.enabled&&(e.criteo.useIframes&&o.add(It.a.Criteo),a.add(It.a.Criteo)),e.invibes.enabled&&a.add(It.a.Invibes),e.spotx.enabled&&a.add(It.a.SpotX),e.nexx360.enabled&&(e.nexx360.useIframes&&o.add(It.a.nexx360),a.add(It.a.nexx360)),e.noBid.enabled&&(e.noBid.useIframes&&o.add(It.a.noBid),a.add(It.a.noBid)),e.missena.enabled&&(e.missena.useIframes&&o.add(It.a.missena),a.add(It.a.missena)),e.nextMillennium.enabled&&(e.nextMillennium.useIframes&&o.add(It.a.nextMillennium),a.add(It.a.nextMillennium)),e.adagio.enabled&&(e.adagio.useIframes&&o.add(It.a.Adagio),a.add(It.a.Adagio)),e.bliink.enabled&&(e.bliink.useIframes&&o.add(It.a.bliink),a.add(It.a.bliink));const s=((e,t,n)=>{const i=[...t].flatMap((t=>e[t]??[])),r=[...n].flatMap((t=>e[t]??[])),a=i.length>0,o=r.length>0;return{image:{bidders:a?i:"*",filter:a?"include":"exclude"},iframe:{bidders:o?r:"*",filter:o?"include":"exclude"}}})(r,a,o);return s};var Rt=n(58),Et=n(30),Tt=n(65),xt=n(19),At=n(1);const Dt=new Et.a({name:"client-context",storageType:()=>(0,Tt.a)({name:"clientContext"}),freshnessInterval:1800,expirationInterval:3600,loader:async()=>{const[e,{strictGdprSettings:t}]=await Promise.all([fetch("https://client-context.hubvisor.io"),xt.b]);if(!e.ok)throw new Error(`http status: ${e.statusText}`);const n=await e.json();return t?{geo:{country:n.geo?.country,location:{timeZone:n.geo?.location?.timeZone}},ip:(0,At.q)(n.ip)?`${n.ip.substring(0,n.ip.lastIndexOf("."))}.0`:n.ip,ua:n.ua,cxn:n.cxn}:n}});var kt=n(26);const Ot=e=>Object.entries(e).reduce(((e,[t,n])=>(e[t]=kt.b.get(n),e)),{});var Bt=n(39),Ut=n(51),Nt=n(85);const _t=e=>!(0,At.j)(e)&&(!(0,At.c)(e)||e.length>0),Pt=e=>{if(!_t(e.countries))return!0;const t=Dt.currentValue?.geo?.country?.iso;return!!t&&(0,Nt.a)(e.countries).includes(t)},jt=({key:e,values:t,regex:n},i)=>{const r=e.split(".").reduce(((e,t)=>{if(e)return e[t]}),i);return!!r&&(t&&t.includes(r)||!(!n||!n.some((e=>{try{return!!r.match(new RegExp(e,"g"))}catch(e){return!1}}))))},$t=e=>{if(!e)return!0;const t=window;switch(e.type){case"window":return jt(e,t);case"tcvars":return jt(e,t.tc_vars);case"datalayer":return(0,At.c)(t.dataLayer)?t.dataLayer.some((t=>jt(e,t))):jt(e,t.dataLayer);default:return!1}},qt=e=>{const t=St.remoteConfiguration.currentValue?.publisherConfiguration?.floors?.filter((t=>((0,At.j)(t.layouts)||(0,Nt.a)(t.layouts).includes(e.layout))&&((0,At.j)(t.supportCodes)||(0,Nt.a)(t.supportCodes).includes(e.supportCode))&&((0,At.j)(t.pageZones)||(0,Nt.a)(t.pageZones).includes(e.pageZone))&&((0,At.j)(t.isConsentless)||t.isConsentless===(0,Bt.b)())&&(0,At.c)(t.schema)&&t.schema.length>0&&Object.keys(t.floorRules).length>0&&Pt(t)))??[];return t?.[0]},Ft=(e,t)=>(0,At.j)(t)||(0,Nt.a)(t).includes(e),zt=e=>e[`${(new Date).getUTCHours()}`]??1,Mt=(e,t)=>{const n=e.split("|");return n.splice(t,1),n.join("|")},Vt=["skin"],Lt=(e,t)=>t||Vt.some((t=>e.includes(t)));var Wt=n(57);const Gt=(0,ht.a)((()=>{const e=St.remoteConfiguration.currentValue;vt.setConfig({currency:{adServerCurrency:"USD",rates:e?.currencies?.rates}})})),Xt=new Set([It.a.ttdDirectPath,It.a.hubvisor,It.a.hawk]),Ht=e=>e.s2sConfig?.bidders.filter((t=>!(Xt.has(e.bidderAliases[t])||Xt.has(t))))??[],Kt=e=>{{if(!e)return;const t=[];if(e.adloox.enabled){const n={name:"adloox",waitForIt:e.adloox.waitForIt};n.params={thresholds:e.adloox.thresholds},(0,At.i)(e.adloox.slotinpath)&&(n.params.slotinpath=e.adloox.slotinpath),t.push(n)}if(e.onePlusX.enabled){const n={name:"1plusX",waitForIt:e.onePlusX.waitForIt};e.onePlusX.customerId&&e.onePlusX.bidders&&(0,At.i)(e.onePlusX.timeout)&&(n.params={customerId:e.onePlusX.customerId,bidders:e.onePlusX.bidders,timeout:e.onePlusX.timeout}),t.push(n)}if(e.ias.enabled&&e.ias.pubId){const n={name:"ias",waitForIt:e.ias.waitForIt,params:{pubId:e.ias.pubId}};e.ias.keyMappings&&(n.params.keyMappings=e.ias.keyMappings),e.ias.pageUrl&&(n.params.pageUrl=e.ias.pageUrl),e.ias.adUnitPath&&(n.params.adUnitPath=e.ias.adUnitPath),t.push(n)}if(e.oxxionRtd.enabled&&e.oxxionRtd.domain){const n={name:"oxxionRtd",waitForIt:e.oxxionRtd.waitForIt,params:{domain:e.oxxionRtd.domain}};e.oxxionRtd.contexts&&(n.params.contexts=e.oxxionRtd.contexts),(0,At.r)(e.oxxionRtd.threshold)||(n.params.threshold=e.oxxionRtd.threshold),e.oxxionRtd.samplingRate&&(n.params.samplingRate=e.oxxionRtd.samplingRate),e.oxxionRtd.bidders&&(n.params.bidders=e.oxxionRtd.bidders),t.push(n)}if(e.greenbidsRtd.enabled&&e.greenbidsRtd.pbuid){const n={name:"greenbidsRtdProvider",waitForIt:e.greenbidsRtd.waitForIt,params:{pbuid:e.greenbidsRtd.pbuid}};t.push(n)}if(0===t.length)return;return{auctionDelay:e.auctionDelay,dataProviders:t}}},Jt=e=>{const{targetingKeyPrefix:t}=e;return{adserverTargeting:[{key:`${t}_bidder`,val:e=>e.bidderCode},{key:`${t}_size`,val:e=>e.size},{key:`${t}_deal`,val:e=>e.dealId},{key:`${t}_format`,val:e=>e.mediaType}]}},Yt=e=>{const t=[];if(e.id5?.partnerId){const{controlGroupPct:n,partnerId:i,partnerSuppliedData:r}=e.id5,a={name:"id5Id",params:{partner:i,pd:r,abTesting:(0,At.r)(n)?void 0:{enabled:!0,controlGroupPct:n}},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}};t.push(a)}if(e.identityLink?.pid){const n={name:"identityLink",params:{pid:e.identityLink.pid,notUse3P:e.identityLink.notUse3P},storage:{type:e.identityLink.storage??"html5",name:"idl_env",expires:e.identityLink.expires??30}};e.identityLink.refreshInSeconds&&(n.storage.refreshInSeconds=e.identityLink.refreshInSeconds),t.push(n)}if(e.criteoId?.enabled){const e={name:"criteo",storage:{type:"html5",name:"criteoid",expires:365}};t.push(e)}if(e.pubCommonId?.enabled){const e={name:"pubCommonId"};t.push(e)}if(e.sharedId?.enabled){const e={name:"sharedId",params:{syncTime:1440},storage:{type:"html5",name:"sharedid",expires:28}};t.push(e)}return e.unifiedId?.enabled&&t.push({name:"unifiedId",params:{url:`https://match.adsrvr.org/track/rid?ttd_pid=${e.unifiedId.pid}&fmt=json`},storage:{type:"html5",name:"pbjs-unifiedid",expires:60}}),e.pubProvidedId?.eidsFunction&&t.push({name:"pubProvidedId",params:{eidsFunction:e.pubProvidedId.eidsFunction}}),e.pairId?.enabled&&t.push({name:"pairId",...e.pairId.params?{params:e.pairId.params}:{}}),e.utiq?.enabled&&t.push({name:"utiq"}),t},Zt=e=>{if(!Object.values(e.bidderAliases).includes(It.a.outbrain))return;const t=Dt.currentValue?.geo?.country?.isEu?"-euc1":"";return{bidderUrl:`https://b1h${t}.zemanta.com/api/bidder/prebid/bid/`,usersyncUrl:`https://b1h${t}.zemanta.com/usersync/prebid`}},Qt=e=>{if(!e)return;const t={};for(const n of e.values)t[e.fields.map((e=>n[e]??"*")).join("|")]=n.floor;return t},en=e=>{if(e&&!1!==(0,Rt.a)("floors"))return{enforcement:{floorDeals:!0},data:{currency:e.currency??"USD",schema:{fields:e.fields},values:Qt(e),default:e.default},additionalSchemaFields:{deviceType:()=>wt.b,connector:(e,t)=>e?.bidder??t.bidderCode,videoContext:e=>e?.mediaTypes?.video?.context??"",displayFormat:e=>e?.hbvMetadata?.displayFormat??"",isConsentless:()=>`${(0,Bt.b)()}`,...e.additionalSchemaFields}}},tn=(0,ht.a)((e=>{e.consent.enabled&&Oe.e.enable(),e.consent.uspEnabled&&Oe.g.enable(),(e=>{for(const[t,n]of Object.entries(e))et.aliasBidder(n,t)})(e.bidderAliases),et.processQueue(),vt.setConfig((e=>{const t=Ct(e),n="include"===t.image?.filter&&t.image.bidders.length>0||"include"===t.iframe?.filter&&t.iframe.bidders.length>0,i=Object.entries(e.userSync).some((([e,t])=>e in ft&&Boolean(t.enabled)))&&n;let r;{let t=!!e.s2sConfig?.enabled;r={accountId:e.publisherId,bidders:Ht(e),enabled:t,endpoint:"https://pbs.hubvisor.io/openrtb2/auction",syncEndpoint:"https://pbs.hubvisor.io/cookie_sync",timeout:1e3*(e.bidderTimeout-.5)}}return{gvlMapping:Ot(e.bidderAliases),priceGranularity:e.priceGranularity,consentManagement:{strictStorageEnforcement:e.consent.strictStorageEnforcement,gdpr:{cmpApi:"iab",timeout:1e3*e.consent.consentTimeout,allowAuctionWithoutConsent:!e.consent.shouldSkipAuctionOnConsentFailure,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:e.consent.storageVendorExceptions},{purpose:"basicAds",enforcePurpose:!1,enforceVendor:!1}]},usp:{cmpApi:"iab",timeout:100}},criteo:e.criteo,outbrain:Zt(e),rubicon:{singleRequest:!0},improvedigital:{usePrebidSizes:!0},hbvRichmedia:{publisherId:e.publisherId},userSync:{aliasSyncEnabled:i,syncEnabled:i,userIds:Yt(e.userSync),ppid:e.userSync.ppid,syncDelay:1e3,filterSettings:t},floors:en(e.floors),debug:(0,Rt.a)("pbjs")??!1,auctionOptions:{secondaryBidders:e.secondaryBidders??[]},s2sConfig:r,enableTIDs:!0,realTimeData:Kt(e.rtdSettings)}})(e)),vt.setBidderSettings({adagio:{storageAllowed:!0},criteo:{storageAllowed:!0},standard:Jt(e),...e.bidderSettings}),(e=>{if(e.adot?.publisherId||e.adot?.publisherPath){const t=Object.entries(e.bidderAliases).reduce(((e,[t,n])=>("adot"===n&&e.push(t),e)),[]);vt.setBidderConfig({bidders:t,config:{adot:{publisherId:e.adot.publisherId,publisherPath:e.adot.publisherPath}}})}for(const t of e.schains)vt.setBidderConfig({bidders:t.bidders,config:{schain:{config:{ver:"1.0",complete:1,nodes:t.nodes},validation:"relaxed"}}})})(e)}));var nn=n(27),rn=n(37);const{error:an,debug:on}=ot.a.tag("TDID"),sn="hbv:ttdid",dn={},cn=async({timeout:e})=>{try{on("Querying fresh TDID");const t=e>0,n=new AbortController,i=t?setTimeout((()=>n.abort(new Error(`timeout of ${e}ms reached`))),e):void 0,r=await fetch((()=>{const e=at.a.currentValue?.tcData;return`https://match.adsrvr.org/track/rid?ttd_pid=cs1e9cy&fmt=json&ttd_tpi=1&gdpr=${!0===e?.gdprApplies?"1":"0"}&gdpr_consent=${e?.tcString??""}`})(),{credentials:"include",signal:n.signal});if(clearTimeout(i),!r.ok)throw new Error(`http status: ${r.statusText}`);const a=(await r.json()).TDID;if((0,At.q)(a))return(e=>{const t={updatedAt:Date.now(),tdid:e};localStorage.setItem(sn,JSON.stringify(t)),on(`Updated stored uid #${e}`)})(a),a;an("couldn't interpret TDID endpoint response",r)}catch(e){an("Error loading TDID endpoint",e)}},ln=(0,ht.a)((async({consent:e})=>{if(!(0,st.c)(at.a.currentValue?.tcData,st.a.storageAccess)&&e.enabled)return on("Consent denies usage of storage for TDID");dn.consent=e,dn.tdid=await(async()=>{const e=(()=>{try{const t=localStorage.getItem(sn);if(!t)return;const n=JSON.parse(t);if(!(e=>(0,At.m)(e)&&(0,At.q)(e.tdid)&&(0,At.l)(e.updatedAt))(n))return;if(!(e=n)||Date.now()-e.updatedAt>7776e6)return;return n}catch(e){an("Error loading TDID",e)}var e})();return(t=e)&&Date.now()-t.updatedAt<288e5?(on(`Stored data is fresh enough, using #${e?.tdid}`),e?.tdid):e?(cn({timeout:0}),e.tdid):cn({timeout:1500});var t})(),on("Tdid setup is ready")}));var un=n(89),pn=n(91);const mn=e=>Math.round(100*e)/100;var fn=n(12);const gn={purpose:{},feature:{}},hn={purpose:"purpose.consents",feature:"specialFeatureOptins"},bn={storage:{type:"purpose",default:{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]},id:1},basicAds:{type:"purpose",id:2,default:{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:[]}},personalizedAds:{type:"purpose",id:4},measurement:{type:"purpose",id:7},transmitPreciseGeo:{type:"feature",id:1}},yn=new Set,vn=new Set,In=new Set,wn=new Set,Sn=new Set,Cn=new Set;let Rn=!1,En=!1;const Tn=[Ce.b,Ce.e,Ce.a,Ce.d],xn="TCF2",An=[],Dn=[2];function kn(e,t,n,i){let r=!!(0,a.a)(e,`vendorData.${hn[t]}.${n}`),o=!!(0,a.a)(e,`vendorData.vendor.consents.${i}`);return"purpose"===t&&Dn.includes(n)&&(r||=!!(0,a.a)(e,`vendorData.purpose.legitimateInterests.${n}`),o||=!!(0,a.a)(e,`vendorData.vendor.legitimateInterests.${i}`)),{purpose:r,vendor:o}}function On(e,t,n,i){const r=bn[e.purpose];if((e.vendorExceptions||[]).includes(n))return!0;const o=e.enforceVendor&&!(i===Oe.c||(e.softVendorExceptions||[]).includes(n)),{purpose:s,vendor:d}=kn(t,r.type,r.id,i);let c=(!e.enforcePurpose||s)&&(!o||d);return i===Oe.a&&(c=!e.enforcePurpose||!!(0,a.a)(t,`vendorData.publisher.consents.${r.id}`)),c}function Bn(e,t,n=null,i=(()=>null)){return function(a){const o=Oe.e.getConsentData(),s=a[fn.c];if(function(e,t,n){return null==e&&Oe.e.enabled?((0,r.X)(`Attempting operation that requires purpose ${t} consent while consent data is not available${n?` (module: ${n})`:""}. Assuming no consent was given.`),!0):e&&e.gdprApplies}(o,e,s)){const e=function(e,t,n){if(t){const i=p.b.getConfig("gvlMapping");if(i&&i[t])return i[t];if(e===Ce.c)return"cdep"===t?Oe.a:Oe.c;{let{gvlid:i,modules:a}=Oe.b.get(t);if(null==i&&Object.keys(a).length>0)for(const n of Tn)if(a.hasOwnProperty(n)){i=a[n],n!==e&&(0,r.X)(`Multiple GVL IDs found for module '${t}'; using the ${n} module's ID (${i}) instead of the ${e}'s ID (${a[e]})`);break}return null==i&&n&&(i=n()),i||null}}return null}(a[fn.d],s,i(a));let d=!!t(o,s,e);if(!d)return n&&n.add(s),{allow:d}}}}function Un(e,t=null,n=(()=>null)){return Bn(e,((t,n,i)=>!!On(gn.purpose[e],t,n,i)),t,n)}function Nn(e){return function(t){if(t[fn.d]!==Ce.c)return e(t)}}const _n=(Pn=Un(1,yn),function(e){if(e[fn.d]!==Ce.c||En)return Pn(e)});var Pn;const jn=Un(1,yn),$n=Un(1,yn),qn=Nn(Un(2,vn)),Fn=Un(7,In,(e=>function(e,t){const n=de.a.getAnalyticsAdapter(e);return(i=>{if("function"!=typeof i)return i;try{return i.call(n.adapter,t)}catch(t){(0,r.U)(`Error invoking ${e} adapter.gvlid()`,t)}})(n?.adapter?.gvlid)}(e[fn.c],e[fn.b]))),zn=Un(4,wn),Mn=Nn((()=>{const e=Bn("2-10",(function(e,t,n){for(let i=2;i<=10;i++){if(gn.purpose[i]?.vendorExceptions?.includes(t))return!0;const{purpose:r,vendor:a}=kn(e,"purpose",i,n);if(r&&(a||gn.purpose[i]?.softVendorExceptions?.includes(t)))return!0}return!1}),Sn),t=Un(4,Sn);return function(){return(gn.purpose[4]?.eidsRequireP4Consent?t:e).apply(this,arguments)}})()),Vn=Bn("Special Feature 1",((e,t,n)=>On(gn.feature[1],e,t,n)),Cn);s.on(c.EVENTS.AUCTION_END,(function(){const e=function(e){return Array.from(e.keys()).filter((e=>null!=e))},t={storageBlocked:e(yn),biddersBlocked:e(vn),analyticsBlocked:e(In),ufpdBlocked:e(wn),eidsBlocked:e(Sn),geoBlocked:e(Cn)};s.emit(c.EVENTS.TCF2_ENFORCEMENT,t),[yn,vn,In,wn,Sn,Cn].forEach((e=>e.clear()))})),p.b.getConfig("consentManagement",(e=>function(e){let t=(0,a.a)(e,"gdpr.rules");t||(0,r.X)("TCF2: enforcing P1 and P2 by default"),t=Object.fromEntries((t||[]).map((e=>[e.purpose,e]))),En=!!(0,a.a)(e,"strictStorageEnforcement"),Object.entries(bn).forEach((([e,n])=>{gn[n.type][n.id]=t[e]??n.default})),Rn||(null!=gn.purpose[1]&&(Rn=!0,An.push((0,Ie.b)(Se.a,xn,_n)),An.push((0,Ie.b)(Se.f,xn,jn)),An.push((0,Ie.b)(Se.b,xn,$n))),null!=gn.purpose[2]&&An.push((0,Ie.b)(Se.d,xn,qn)),null!=gn.purpose[4]&&An.push((0,Ie.b)(Se.j,xn,zn),(0,Ie.b)(Se.c,xn,zn)),null!=gn.purpose[7]&&An.push((0,Ie.b)(Se.e,xn,Fn)),null!=gn.feature[1]&&An.push((0,Ie.b)(Se.h,xn,Vn)),An.push((0,Ie.b)(Se.g,xn,Mn)))}(e.consentManagement)));var Ln=n(33),Wn=n(86);const Gn=4;let Xn,Hn=[],Kn={},Jn=!1,Yn=!0,Zn="USD";var Qn=!1,ei={};let ti,ni={},ii=(0,ee.b)();function ri(e){ti?((0,r.X)(e),(0,r.X)("Currency failed loading rates, falling back to currency.defaultRates")):(0,r.U)(e)}function ai(){Yn?(Yn=!1,Jn=!1,(0,Ln.b)(Xn,{success:function(e){try{ei=JSON.parse(e),(0,r.V)("currencyRates set to "+JSON.stringify(ei)),Kn={},Jn=!0,ci()}catch(t){ri("Failed to parse currencyRates response: "+e)}},error:function(...e){ri(...e),Jn=!0,ci(),Yn=!0}})):ci()}function oi(e,t){e(t.then((()=>ii.promise)))}p.b.getConfig("currency",(e=>function(e){if(Xn="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$","object"==typeof e.rates&&(ei.conversions=e.rates,Jn=!0,Yn=!1),"object"==typeof e.defaultRates&&(ti=e.defaultRates,ei.conversions=ti,Jn=!0),"string"==typeof e.adServerCurrency){(0,r.V)("enabling currency support",arguments),Zn=e.adServerCurrency,e.conversionRateFile&&((0,r.V)("currency using override conversionRateFile:",e.conversionRateFile),Xn=e.conversionRateFile);const t=Xn.indexOf("$$TODAY$$");if(-1!==t){const e=new Date;let n=`${e.getMonth()+1}`,i=`${e.getDate()}`;n.length<2&&(n=`0${n}`),i.length<2&&(i=`0${i}`);const r=`${e.getFullYear()}${n}${i}`;Xn=`${Xn.substring(0,t)}${r}${Xn.substring(t+9,Xn.length)}`}!function(){Kn={},Qn=!0,(0,r.V)("Installing addBidResponse decorator for currency module",arguments),(0,i.a)().convertCurrency=(e,t,n)=>parseFloat(e)*li(t,n),(0,k.a)("addBidResponse").before(si,100),(0,k.a)("responsesReady").before(oi),(0,s.on)(c.EVENTS.AUCTION_TIMEOUT,di),(0,s.on)(c.EVENTS.AUCTION_INIT,ai),ai()}()}else(0,r.V)("disabling currency support"),function(){(0,r.V)("Uninstalling addBidResponse decorator for currency module",arguments),(0,k.a)("addBidResponse").getHooks({hook:si}).remove(),(0,k.a)("responsesReady").getHooks({hook:oi}).remove(),(0,s.off)(c.EVENTS.AUCTION_TIMEOUT,di),(0,s.off)(c.EVENTS.AUCTION_INIT,ai),delete(0,i.a)().convertCurrency,Zn="USD",Kn={},Qn=!1,Jn=!1,Yn=!0,ei={},ni={},ii=(0,ee.b)()}();"object"==typeof e.bidderCurrencyDefault&&(ni=e.bidderCurrencyDefault)}(e.currency)));const si=(0,ce.c)("currency",(function(e,t,n,i){if(!n)return e.call(this,t,n,i);let a=n.bidderCode||n.bidder;if(ni[a]){let e=ni[a];n.currency&&e!==n.currency?(0,r.X)(`Currency default '${a}: ${e}' ignored. adapter specified '${n.currency}'`):n.currency=e}if(n.currency||((0,r.X)('Currency not specified on bid.  Defaulted to "USD"'),n.currency="USD"),n.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*li(this.currency,e)).toFixed(3)},n.currency===Zn)return e.call(this,t,n,i);Hn.push([e,this,t,n,i]),Qn&&!Jn||ci()}));function di({auctionId:e}){Hn=Hn.filter((([t,n,i,r,a])=>{if(r.auctionId!==e)return!0;a(c.REJECTION_REASON.CANNOT_CONVERT_CURRENCY)}))}function ci(){for(;Hn.length>0;){const[e,t,n,i,a]=Hn.shift();if(void 0!==i&&"currency"in i&&"cpm"in i){let e=i.currency;try{let t=li(e);1!==t&&(i.cpm=(parseFloat(i.cpm)*t).toFixed(4),i.currency=Zn)}catch(e){(0,r.X)("getCurrencyConversion threw error: ",e),a(c.REJECTION_REASON.CANNOT_CONVERT_CURRENCY);continue}}e.call(t,n,i,a)}ii.resolve()}function li(e,t=Zn){var n,i=null;let a=`${e}->${t}`;if(a in Kn)i=Kn[a],(0,r.W)("Using conversionCache value "+i+" for "+a);else if(!1===Qn){if("USD"!==e)throw new Error("Prebid currency support has not been enabled and fromCurrency is not USD");i=1}else if(e===t)i=1;else if(e in ei.conversions){if(!(t in(n=ei.conversions[e])))throw new Error("Specified adServerCurrency in config '"+t+"' not found in the currency rates file");i=n[t],(0,r.V)("getCurrencyConversion using direct "+e+" to "+t+" conversionRate "+i)}else if(t in ei.conversions){if(!(e in(n=ei.conversions[t])))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");i=ui(1/n[e],Gn),(0,r.V)("getCurrencyConversion using reciprocal "+e+" to "+t+" conversionRate "+i)}else{var o=Object.keys(ei.conversions)[0];if(!(e in ei.conversions[o]))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var s=1/ei.conversions[o][e];if(!(t in ei.conversions[o]))throw new Error("Specified adServerCurrency in config '"+t+"' not found in the currency rates file");i=ui(s*ei.conversions[o][t],Gn),(0,r.V)("getCurrencyConversion using intermediate "+e+" thru "+o+" to "+t+" conversionRate "+i)}return a in Kn||((0,r.W)("Adding conversionCache value "+i+" for "+a),Kn[a]=i),i}function ui(e,t){var n=1;for(let e=0;e<t;e++)n+="0";return Math.round(e*n)/n}(0,Wn.d)({type:Wn.c,name:"currency",fn:function(e,t,n){Qn&&(e.cur=e.cur||[n.currency||Zn])}}),n(97);var pi=n(88);const mi=(e,t)=>e?.replace(/\$\{AUCTION_PRICE\}|\$%7BAUCTION_PRICE%7D/g,`${t}`),fi="banner",gi="native",hi="video",bi=([e,t],[n,i])=>e!==n?e-n:t-i,yi=e=>[...e].sort(bi).map((e=>`${e[0]}x${e[1]}`)).join("-");class vi{#je={};#$e={};constructor(e){for(const t of e)this.#$e[t.placementId]={pubstack:t.pubstack,ortb2Imp:t.bidRequest.ortb2Imp}}push=({adUnitCode:e,mediaTypes:t,renderer:n,bids:i,ortb2ImpParams:r,playerConfig:a})=>{const o=((e,t,n,i,r)=>{const a=Object.entries(t).map((([e,t])=>{if(e===fi&&t)return`${e}=${yi(t.sizes)}`;if(e===hi&&t){const i=n?.url??"",{api:a,linearity:o,mimes:s,maxduration:d,minduration:c,protocols:l,startdelay:u,playbackmethod:p,placement:m,skip:f}=t,g=JSON.stringify({api:a,linearity:o,mimes:s,maxduration:d,minduration:c,protocols:l,startdelay:u,playbackmethod:p,placement:m,skip:f}),{expand:h,isReplayable:b,volumeStrategy:y,hbvFormat:v,selector:I,targetRatio:w,maxWidth:S,hasRollover:C,hasDynamicHeight:R,fitHeight:E}=r??{},T=JSON.stringify({expand:h,isReplayable:b,volumeStrategy:y,hbvFormat:v,selector:I,targetRatio:w,maxWidth:S,hasRollover:C,hasDynamicHeight:R,fitHeight:E});return`${e}=${yi(t.playerSize)}&renderer=${i}&openRtbParams=${g}&playerConfig=${T}`}return e===gi?`${e}&nativeParams=${JSON.stringify(t)}`:void 0})),o=i?`ortb2Imp={banner.api=${i.banner?.api},instl=${i.instl},ext={gpid=${i.ext?.gpid},data.pbadslot:${i.ext?.data?.pbadslot}}}`:void 0;return`${e}:${a.join("&")}:ortb2Imp=${o}`})(e,t,n,r,a);if(!this.#je[o]){const{pubstack:i,ortb2Imp:a}=this.#$e[e]??{},s={code:e,mediaTypes:t,renderer:n,bids:[],ortb2Imp:a};s.ortb2Imp??=r,s.pubstack=i,this.#je[o]=s}this.#je[o]?.bids.push(...i)};build=()=>Object.values(this.#je).filter(At.i)}var Ii=n(48),wi=n(7),Si=n(17),Ci=n(52);const Ri=({bid:e,baseConnector:t,adUnits:n,overrideDisplayFormat:i,bidRequest:r})=>{const a=parseInt(`${e.width}`)||0,o=parseInt(`${e.height}`)||0,s=((e,t)=>{try{return t?t(e):void 0}catch(e){const t=new wi.b(wi.a.overrideDisplayFormatFailed,e);(0,Si.a)(t,"overrideDisplayFormat error")}})(e,i);if(s)return s;if("video"===e.mediaType)return((e,t)=>t.some((t=>t.code===e&&"instream"===t.mediaTypes.video?.context))?Ci.a.instream:Ci.a.outstream)(e.adUnitCode,n);if(1800===a&&1e3===o)return Ci.a.skin;if("native"===e.mediaType)return Ci.a.native;switch(t){case It.a.Adyoulike:return Ci.a.nativeBanner;case It.a.Invibes:case It.a.Freewheel:return Ci.a.outstream;case It.a.seedtag:case It.a.Smart:if(640===a)return Ci.a.outstream;break;case It.a.Sublime:return Ci.a.skin;case It.a.Teads:return Ci.a.outstream;case It.a.TripleLift:return"tlx"===e.tl_source?Ci.a.nativeBanner:"outstream"===r?.hbvMetadata?.displayFormat?Ci.a.outstream:Ci.a.banner;case It.a.bliink:return 1===a&&1===o?Ci.a.outstream:Ci.a.banner;case It.a.ogury:{const t=e.ext?.mediatype;return"video"===t?Ci.a.outstream:"image"===t?Ci.a.banner:Ci.a.outstream}}return r?.hbvMetadata?.displayFormat??Ci.a.banner},{debug:Ei,error:Ti,info:xi}=ot.a.tag("content-provider:prebid");class Ai{#qe={};#Fe;#ze;constructor(e){this.#ze=e.globalSettings,tn(e.globalSettings);const t=e.globalSettings.targetingKeyPrefix;for(const e of["bidder","adid","pb","size","deal","format","pg_dealid","pg_adid"])kt.i.add(`${t}_${e}`);this.#Fe=e.globalSettings.bidderAliases,et.onEvent(c.EVENTS.BID_TIMEOUT,this.#Me),et.onEvent(c.EVENTS.NO_BID,this.#Ve),et.onEvent(c.EVENTS.BID_REJECTED,this.#Le),et.onEvent(c.EVENTS.BID_REQUESTED,this.#We),xi(`prebid.js ${et.version} loaded`)}#We=e=>{const t=this.#qe[e.auctionId];if(!t)return Ti("couldn't find auction accumulator: this should not happen");for(const n of e.bids)t.userIdsByBidId[n.bidId]=n.userId?Object.keys(n.userId):[]};#Me=e=>{for(const t of e){const e=this.#Fe[t.bidder];this.#qe[t.auctionId]?.timeouts.push({placementId:t.adUnitCode,bidId:t.bidId,bidder:t.bidder,vendorId:e?kt.b.get(e):void 0,userIdPartners:this.#qe[t.auctionId]?.userIdsByBidId[t.bidId]??[],displayFormat:t.hbvMetadata?.displayFormat,mediaType:t.hbvMetadata?.mediaType,requestSizes:t.hbvMetadata?.requestSizes,requestDealIds:t?.hbvMetadata?.requestDealIds,payloadBidRequestSize:t?.hbvMetadata?.payloadBidRequestSize,payloadBidResponseSize:t?.hbvMetadata?.payloadBidResponseSize,demandSource:"s2s"===t.src?"pbs":"pbjs"})}};#Ve=e=>{const t=this.#Fe[e.bidder];this.#qe[e.auctionId]?.noBids.push({placementId:e.adUnitCode,bidId:e.bidId,bidder:e.bidder,vendorId:t?kt.b.get(t):void 0,userIdPartners:this.#qe[e.auctionId]?.userIdsByBidId[e.bidId]??[],displayFormat:e.hbvMetadata?.displayFormat,mediaType:e.hbvMetadata?.mediaType,requestSizes:e.hbvMetadata?.requestSizes,requestDealIds:e?.hbvMetadata?.requestDealIds,payloadBidRequestSize:e?.hbvMetadata?.payloadBidRequestSize,payloadBidResponseSize:e?.hbvMetadata?.payloadBidResponseSize,demandSource:"s2s"===e.src?"pbs":"pbjs"})};#Le=e=>{this.#qe[e.auctionId]?.rejectedBids.push(e)};#Ge=e=>e;#Xe=e=>{const t=e.meta;if(!t)return;const n=t.agencyId??e.appnexus?.buyerMemberId;return{networkId:t.networkId?`${t.networkId}`:void 0,networkName:t.networkName,agencyId:n?`${n}`:void 0,agencyName:t.agencyName,advertiserId:t.advertiserId?`${t.advertiserId}`:void 0,advertiserName:t.advertiserName,advertiserDomains:(0,Nt.a)(t.advertiserDomains).filter((e=>(0,At.q)(e)&&""!==e)).slice(0,2),brandId:t.brandId?`${t.brandId}`:void 0,brandName:t.brandName,dchain:t.dchain,primaryCatId:t.primaryCatId,secondaryCatIds:t.secondaryCatIds,mediaType:t.mediaType?this.#Ge(t.mediaType):void 0}};#He=(e,t)=>n=>{n.ad=mi(n.ad,n.originalCpm),n.adUrl=mi(n.adUrl,n.originalCpm),n.vastUrl=mi(n.vastUrl,n.originalCpm),n.vastXml=mi(n.vastXml,n.originalCpm);const i=`${n.creativeId}`,r=n.dealId?`${n.dealId}`:void 0,a=this.#Fe[n.bidder],o=parseInt(`${n.width}`)||0,s=parseInt(`${n.height}`)||0,d=l.a.index.getBidRequest(n),c=d?.params.deals;return{providerId:pi.a,prebid:n,adMarkup:n.ad,adUrl:n.adUrl,auctionId:e,placementId:n.adUnitCode,bidder:n.bidder,vendorId:a?kt.b.get(a):void 0,bidId:n.adId,dealId:r,width:o,height:s,mediaType:this.#Ge(n.mediaType),creativeId:i,cpm:Number(n.cpm),currency:n.currency,originalCpm:Number(n.originalCpm??n.cpm),originalCurrency:n.originalCurrency??n.currency,isNetRevenue:n.netRevenue,ttl:n.ttl,fetchDuration:n.timeToRespond,targetings:n.adserverTargeting,native:n.native?{prebid:n.native}:void 0,vastUrl:n.vastUrl,vastXml:n.vastXml,meta:this.#Xe(n),displayFormat:Ri({bid:n,baseConnector:a??n.bidder,adUnits:t,overrideDisplayFormat:this.#ze.overrideDisplayFormat,bidRequest:d}),requestSizes:d?.hbvMetadata?.requestSizes,requestDealIds:d?.hbvMetadata?.requestDealIds,deal:r?{name:r,isGuaranteed:c?.some((e=>e.isGuaranteed&&e.name===n.dealId))??!1}:void 0,payloadBidRequestSize:d?.hbvMetadata?.payloadBidRequestSize,payloadBidResponseSize:d?.hbvMetadata?.payloadBidResponseSize,userIdPartners:this.#qe[n.auctionId]?.userIdsByBidId[n.requestId]??[],requestParams:d?.params,demandSource:"s2s"===n.source?"pbs":"pbjs"}};#Ke=e=>new vi(e);#Je=()=>!!vt.readConfig("floors")?.endpoint?.url;provideContent=async(e,t)=>{const{placements:n,bidderTimeout:i}=t,a=((e,t)=>n=>{const i=e[n]??n,r=t[i];return i===It.a.amazon||i===It.a.backfill?Ii.a:r??Ii.a})(this.#Fe,kt.a.items),o=(0,un.a)(this.#Ke(n),n,{provideFormatter:a},t.context).build();this.#ze.exposePbjsAdUnits&&window.Hubvisor&&(window.Hubvisor.adUnits=o),this.#ze.floors||this.#Je()||(e=>{const t=this.#ze.shouldUseDynamicFloors?(e=>{const t=((e,t)=>{if(!t)return e;if(!e)return;const n="adUnitCode",i=e.floorRules,r=e.schema.includes(n)?e.schema:[...e.schema,n],a={},o={},s=r.indexOf(n);if(s===e.schema.length)for(const[e,n]of Object.entries(i)){const i=(0,At.l)(n)?n:n.floor,r=!(0,At.l)(n)&&n.immutable;for(const n of t){const t=e.split("|");a[`${e}|${n.placement}`]=Lt(t,r)?i:i*zt(n.multiplierByHour)}a[`${e}|*`]=i}else for(const[e,t]of Object.entries(i))o[e]=t;const d=Object.entries(o).reduce(((e,[t,n])=>(e[Mt(t,s)]={...e[Mt(t,s)]??{},[t]:n},e)),{});for(const e of Object.values(d)){const n=Object.entries(e).map((([e,t])=>[e.split("|"),t])),i=n.map((([e])=>e[s]));for(const[e,r]of n)if("*"===e[s]){for(const n of t)if(!i.includes(n.placement)){i.push(n.placement);const t=[...e];t[s]=n.placement;const o=(0,At.l)(r)?r:r.floor,d=!(0,At.l)(r)&&!0===r.immutable;a[t.join("|")]=Lt(t,d)?o:o*zt(n.multiplierByHour)}const n=(0,At.l)(r)?r:r.floor;a[e.join("|")]=n}else{const n=t.find((t=>t.placement===e[s]))?.multiplierByHour,i=(0,At.l)(r)?r:r.floor,o=!(0,At.l)(r)&&!0===r.immutable;a[e.join("|")]=!Lt(e,o)&&n?zt(n)*i:i}}return{...e,schema:r,floorRules:a}})(qt(e.context),(n=(e=>{const t=St.remoteConfiguration.currentValue?.publisherConfiguration?.floorMultipliers?.[0]?.multipliers.filter((t=>Ft(e.context.pageZone,t.zones)&&((0,At.j)(e.context.category)||Ft(e.context.category,t.categories))&&Ft((e=>e.refreshReason===Ut.b.visibility)(e),t.refresh)));return t})(e),n?.filter((e=>(0,At.i)(e.placement)))));var n;return t})(e):qt(e.context);if(t&&!1!==(0,Rt.a)("floors")){const n=Object.entries(t.floorRules).reduce(((e,[t,n])=>(e[t]=(0,At.l)(n)?n:n.floor,e)),{});vt.setConfig({floors:{enforcement:{floorDeals:!0},data:{currency:t.currency??"USD",schema:{fields:t.schema},values:n,default:t.defaultFloor},additionalSchemaFields:{device:()=>wt.b,bidder:(e,t)=>e?.bidder??t.bidderCode,videoContext:e=>e?.mediaTypes?.video?.context??"",displayFormat:e=>e?.hbvMetadata?.displayFormat??"",supportCode:()=>e.context.supportCode,country:()=>Dt.currentValue?.geo?.country?.iso??"",pageZone:()=>e.context.pageZone,browser:()=>Dt.currentValue?.ua?.browser?.name??"",category:()=>e.context.category??""}}})}})(t),vt.setConfig({outbrain:Zt(this.#ze)}),(e=>{const t={cattax:1,bcat:e.ortb?.contentBlocklist,badv:e.ortb?.domainBlocklist,at:Wt.a.firstPrice,device:{js:Wt.b.yes}},n=at.a.currentValue?.tcData;if(n&&(t.user={consent:n.tcString,ext:{consent:n.tcString,ConsentedProvidersSettings:{consented_providers:n.addtlConsent}}},t.regs={ext:{gdpr:(0,At.e)(n.gdprApplies)?n.gdprApplies?Wt.b.yes:Wt.b.no:void 0}}),!(0,Bt.b)()){const e=Dt.currentValue;t.device.geo={country:e?.geo?.country?.alpha3,lat:e?.geo?.location?.latitude,lon:e?.geo?.location?.longitude,accuracy:e?.geo?.location?.accuracyRadius,ipservice:3,city:e?.geo?.city?.name,zip:e?.geo?.city?.zip}}const i=(0,r.Z)(vt.readConfig("ortb2")??{},t);vt.setConfig({ortb2:i})})(this.#ze);const s=1e3*i;Ei(`Starting auction with id #${e}`),this.#qe[e]={noBids:[],timeouts:[],rejectedBids:[],userIdsByBidId:{}};const{bids:d={}}=await vt.requestBids({auctionId:e,adUnits:o,timeout:s}),c=this.#qe[e]?.noBids,l=this.#qe[e]?.timeouts,u=this.#qe[e]?.rejectedBids;xi(`Ended auction with id #${e}`,{responses:d,timeouts:l,noBids:c});const p=[];for(const e of Object.values(d))e&&p.push(...e.bids);return{bids:p?.map(this.#He(e,o))??[],noBids:c??[],timeouts:l??[],rejectedBids:u?.map(this.#He(e,o))??[]}}}const{warn:Di,error:ki}=ot.a.tag("module:prebid"),Oi={markBidWon(e){try{const t=l.a.findBidByAdId(e);if(!t)return Di(`No bid found with id #${e} to mark as won`);t.status=c.BID_STATUS.RENDERED,t.ad=mi(t.ad,t.originalCpm),t.adUrl=mi(t.adUrl,t.originalCpm),l.a.addWinningBid(t),s.emit(c.EVENTS.BID_WON,t)}catch(e){ki("Error setting prebid winning bid",e)}},findPrebidRenderer(e){const t=l.a.findBidByAdId(e);if(!t)return;const n=t.renderer;return n?()=>{n.render(t)}:void 0}};kt.c.add(pi.a,(e=>new Ai(e))),kt.g.provide(Oi);var Bi=n(90);const Ui=e=>!!e.prebid,{table:Ni,debug:_i,info:Pi,warn:ji,error:$i}=ot.a.tag("Prebid");class qi{#r;#Ye={};#Ze=0;#Qe=[];#et=(0,pn.a)((()=>{this.#tt()}),.5);#nt=[];constructor(e){this.#r=e,this.#r.bus.on(rn.a.refresh,this.#it),this.#r.bus.on(rn.a.impression,this.#te);for(const{name:t,value:n}of kt.c.list())try{this.#Qe.push(n(e))}catch(e){$i(`Error instantiating content-provider '${t}'`,e)}}#rt=e=>{if(!nn.f)return;const t=e.flatMap((e=>{const t=[];for(const n of e.bids){const i=Object.entries(n.params).map((([e,t])=>`${e}=${t}`)).join(", "),r=(0,un.b)(e.mediaTypes,n),a=r.banner&&`banner=${JSON.stringify(r.banner.sizes)}`,o=r.native&&`native=${JSON.stringify(r.native)}`,s=r.skin&&`skin=${JSON.stringify(r.skin)}`,d=[a,o,r.outstream&&`outstream=${JSON.stringify(r.outstream.playerSize)}`,s,r.instream&&`instream=${JSON.stringify(r.instream.playerSize)}`,r.nativeBanner&&`nativeBanner=${JSON.stringify(r.nativeBanner)}`].filter((e=>e)).join(" / ");t.push({placement:e.code,mediaType:d,bidder:n.bidder,params:i})}return t}));Ni(t)};#at=e=>{nn.f&&Ni(e.map((({placementId:e,creativeId:t,width:n,height:i,bidder:r,cpm:a,currency:o,fetchDuration:s,mediaType:d})=>({placement:e,bidder:r,size:`${n}x${i}`,mediaType:d,cpm:a,currency:o,latency:s,creativeId:t}))))};#tt=()=>{if(0===this.#nt.length)return;const e=this.#nt;this.#nt=[];const t=e.map((e=>{const t=e.content.bidResponse;return{placement:t.placementId,bidder:t.bidder,size:`${t.width}x${t.height}`,dealId:t.dealId,mediaType:t.mediaType,cpm:t.cpm,currency:t.currency,creativeId:t.creativeId}}));Pi("Impressions"),Ni(t)};#ot=e=>{if((0,Bt.b)()&&this.#r.globalSettings.sublime?.skipScriptLoadOnNoConsent)return Promise.resolve();if(kt.a.items[It.a.Sublime]){const n=((e,t)=>{for(const n of e){const e=n.bidRequest.bids.find((e=>e.bidder===It.a.Sublime||t[e.bidder]===It.a.Sublime));if(e)return e}})(e.placements,this.#r.globalSettings.bidderAliases);if(n?.params.zoneId)return t=n.params.zoneId,(0,Bi.a)(`//sac.ayads.co/sublime/${t}/prebid`)}var t;return Promise.resolve()};#st=async e=>{const t=this.#ot(e.config),n={shouldAbortAuction:!1},{preAuctionStep:i}=this.#r.globalSettings;try{Object.assign(n,await(i?.(e)))}catch(e){$i("preAuctionStep error",e)}for(const e of await Promise.allSettled([t]))"rejected"===e.status&&$i("vendor preAuctionStep error",e.reason);return n};#dt=async(e,t)=>{const{postAuctionStep:n}=this.#r.globalSettings;try{await(n?.(e,t))}catch(e){$i("postAuctionStep error",e)}};#te=e=>{Ui(e.renderable.content.bidResponse)&&kt.g.value?.markBidWon(e.renderable.content.bidResponse.bidId),this.#nt.push(e.renderable),this.#et()};#ct=e=>{const t=Ct(this.#r.globalSettings,e);vt.setConfig({userSync:{filterSettings:t}})};#it=async e=>{const t=e.auctionId,n=e.refreshConfig,i=performance.now(),{shouldAbortAuction:r}=await this.#st({config:n,auctionId:t,bus:this.#r.bus}),a=performance.now(),o=mn(a-i);this.#ct(n.placements);const s=at.a.currentValue;if(!e.shouldContinueAuction||r)return this.#lt(t,n,s);const d=this.#r.globalSettings;n.placements.find((e=>e.bidRequest.bids.find((e=>e.bidder===It.a.ttdDirectPath||d.bidderAliases[e.bidder]===It.a.ttdDirectPath))))&&await ln({consent:d.consent}),((e,t)=>{const n={contentBlocklist:e.ortb?.contentBlocklist,domainBlocklist:e.ortb?.domainBlocklist,assumeRequestSizeForEmptyResponseSize:e.ortb?.assumeRequestSizeForEmptyResponseSize};e.ortb&&(n.context={publisherId:!1===e.ortb?.useLowerCasePublisherId?e.publisherId:e.publisherId.toLowerCase(),publisherName:e.ortb.publisherName,publisherDomain:e.ortb.publisherDomain,siteDomain:e.ortb.siteDomain??e.ortb.publisherDomain,siteId:e.ortb.siteId??t.context.supportCode,supportCode:t.context.supportCode,pageZone:t.context.pageZone,networkCode:t.context.networkCode,iabCategories:e.ortb?.iabCategories}),vt.setConfig({hubvisor:n})})(d,n),_i("Bid fetch started");const{placements:c}=n,l=c.map((e=>({...e.bidRequest,code:e.placementId})));if(0===l.reduce(((e,t)=>e+t.bids.length),0))return Pi("No placement found for this page, skipping auction"),this.#lt(t,n,s);Pi(`Fetching bids for ${l.length} placement(s):`),this.#rt(l),this.#ut(t,n,s);const u=performance.now(),p=await Promise.all(this.#Qe.map((e=>e.provideContent(t,n)))),m=mn(performance.now()-u),f=p.reduce(((e,t)=>(e.bids.push(...t.bids),e.noBids.push(...t.noBids),e.timeouts.push(...t.timeouts),e.rejectedBids.push(...t.rejectedBids),e)),{bids:[],noBids:[],timeouts:[],rejectedBids:[]}),g={preAuctionDuration:o,auctionDuration:m};this.#pt(t,f.bids,f.noBids,f.timeouts,f.rejectedBids,g)};#lt=(e,t,n)=>{this.#ut(e,t,n),this.#pt(e,[],[],[],[],{preAuctionDuration:0,auctionDuration:0})};#mt=()=>{const e=this.#Ze;return this.#Ze+=1,e};#ut=(e,t,n)=>{const i=this.#mt();this.#Ye[e]={config:t,consent:n,startOrder:i},Pi("Auction started",e,t),this.#ft({auctionId:e,config:t,consent:n,startOrder:i})};#pt=async(e,t,n,i,r,a)=>{const o=this.#Ye[e];if(!o)return ji("An auction finished but no associated metadata was found! This auction has probably not been started by the wrapper and will be ignored");const{config:s,consent:d,startOrder:c}=o,{preAuctionDuration:l,auctionDuration:u}=a;Pi(`${t.length} bid responses after ${u/1e3}s`),this.#at(t);const p=performance.now();await this.#dt(t,s);const m=performance.now(),f=mn(m-p),g=[...i,...t,...n,...r].reduce(((e,t)=>{for(const n of t.userIdPartners)e.add(n);return e}),new Set);this.#gt({auctionId:e,startOrder:c,duration:u,timeouts:i,bids:t,noBids:n,rejectedBids:r,config:s,consent:d,preAuctionDuration:l,postAuctionDuration:f,userIdPartners:[...g]})};#ft=e=>{this.#r.bus.emit(rn.a.auctionStarted,e)};#gt=e=>{this.#r.bus.emit(rn.a.auctionFinished,e)}}var Fi=n(53),zi=n(36),Mi=n(92),Vi=n(16);const{error:Li}=ot.a.tag("Formats"),Wi=async(e,t,n="about:blank")=>{const i=e.createElement("iframe");i.src=n,i.style.overflow="hidden",i.style.display="inline",(0,zi.l)(i,{width:t.width,height:t.height});const r=(0,Vi.a)();if(i.onload=()=>{r.resolve()},e.body.append(i),await r.promise,!i.contentDocument)throw new wi.b(wi.a.iframeDocumentNotFound,`iframe contentDocument not found: this should not happen (${t.bidder} on ${t.placementId})`);return i.contentDocument},Gi=async(e,t)=>{const{bid:n,creativeType:i}=t,r=kt.g.value?.findPrebidRenderer(n.bidId);if(r)r();else if(n.adMarkup){const i=t.useInnerFrame?await Wi(e,n):e;i.open(),t.afterDocumentOpen?.(i),i.write(n.adMarkup),i.close()}else if(n.adUrl)try{await Wi(e,n,n.adUrl)}catch{}else Li("there was an error displaying a bid",n);(0,Mi.c)(e,n,{creativeType:i})},{warn:Xi}=ot.a.tag("Skin"),{debug:Hi,warn:Ki,error:Ji}=ot.a.tag("native"),Yi="data-hbv-clk",Zi="data-hbv-jstracker",Qi="data-hbv-container-id",er=async e=>{try{const t=e.map((e=>fetch(e).then((e=>{if(!e.ok)throw new Error(`http status: ${e.statusText}`)}))));await Promise.all(t),Hi("click tracking complete")}catch(e){Ki("click tracking failed",e)}},tr=(e,t,n)=>{if(!t.javascriptTrackers)return;const i=(0,At.c)(t.javascriptTrackers)?t.javascriptTrackers.join(""):t.javascriptTrackers;e.innerHTML=n?i.replace("%native_dom_id%",n):i;for(const t of e.getElementsByTagName("script")){const n=Object.values(t.attributes).reduce(((e,t)=>((0,At.i)(t.nodeValue)&&(e["data-src"===t.nodeName?"src":t.nodeName]=t.nodeValue),e)),{}),i=document.createElement("script");i.innerHTML=t.innerHTML,t.remove(),e.append(Object.assign(i,n))}};var nr=n(66),ir=n(93),rr=n(40);const{info:ar,error:or}=ot.a.tag("outstream-player"),{debug:sr,error:dr}=ot.a.tag("sf:host:intersection"),cr=e=>e?`{ x: ${e.left}, y: ${e.top}, width: ${e.width}, height: ${e.height} }`:"{  }",lr=e=>e.defaultView?.frameElement??null,ur=e=>{if(!e)return null;if((0,zi.e)(e))return lr(e);const t=e.parentNode;return t?(0,zi.j)(t)?t.host:(0,zi.f)(t)&&t.assignedSlot?t.assignedSlot.parentNode:t:null},pr=(e,t)=>{const n=e.top+t.top,i=e.left+t.left;return{top:n,left:i,width:t.width,height:t.height,bottom:n+t.height,right:i+t.width}},mr=(e,t)=>{if(!e||!t)return null;const n=Math.max(e.top,t.top),i=Math.min(e.bottom,t.bottom),r=Math.max(e.left,t.left),a=Math.min(e.right,t.right),o=a-r,s=i-n;return o<=0||s<=0?null:{top:n,bottom:i,left:r,right:a,width:o,height:s}},fr=e=>"none"===getComputedStyle(e).display,gr=(e,t)=>(0,zi.e)(e)?((e,t)=>{const n=lr(e);if(e!==document&&n){const e=n.getBoundingClientRect(),i=pr(e,t.boundingRect),r=!fr(n),a=t.intersectionRect&&r?mr(e,pr(e,t.intersectionRect)):null,{zIndex:o}=t;return cr(e),cr(i),{nextParent:ur(n),measurement:{boundingRect:i,intersectionRect:a,zIndex:o}}}{const n=(e=>{const t=e.documentElement,n=e.body;return{top:0,left:0,right:t.clientWidth??n.clientWidth,width:t.clientWidth??n.clientWidth,bottom:t.clientHeight??n.clientHeight,height:t.clientHeight??n.clientHeight}})(e),{boundingRect:i,zIndex:r}=t,a=mr(n,t.intersectionRect);return cr(i),cr(n),{nextParent:null,measurement:{boundingRect:i,intersectionRect:a,zIndex:r}}}})(e,t):((e,t)=>{const n=ur(e),{zIndex:i,boundingRect:r}=t;if((e=>{const t=e.ownerDocument,n=e===t?.body,i=e===t?.documentElement,r=!(0,zi.f)(e)||"visible"!==getComputedStyle(e).overflow;return!n&&!i&&r})(e)){const a=(e=>{try{return e.getBoundingClientRect()}catch(t){return e.nodeName,null}})(e),o=mr(a,t.intersectionRect);return cr(a),cr(t.intersectionRect),{nextParent:n,measurement:{boundingRect:r,intersectionRect:o,zIndex:i}}}return{nextParent:n,measurement:{boundingRect:r,intersectionRect:t.intersectionRect,zIndex:i}}})(e,t),hr=e=>{const t=(e=>{try{let t=(e=>({measurement:{boundingRect:e.getBoundingClientRect(),intersectionRect:fr(e)?null:e.getBoundingClientRect(),zIndex:0},nextParent:ur(e)}))(e);for(;t.nextParent;)t.nextParent,t=gr(t.nextParent,t.measurement),cr(t.measurement.intersectionRect),cr(t.measurement.boundingRect);return t.measurement}catch(e){return dr("Error measuring visibility:",e),{boundingRect:{top:0,right:0,bottom:0,left:0,width:0,height:0},intersectionRect:null,zIndex:0}}})(e),{top:n,left:i,bottom:r,right:a,width:o,height:s}=t.boundingRect,d=t.intersectionRect?.width??0,c=t.intersectionRect?.height??0,l=o>0?d/o:0,u=s>0?c/s:0,p=l*u;return{t:n,l:i,r:a,b:r,xiv:mn(l),yiv:mn(u),iv:mn(p),z:t.zIndex,w:o,h:s}},br=()=>{const e=window,t=e.innerHeight??0,n=e.innerWidth??0,i=e.screenY??e.screenTop??0,r=i+t,a=e.screenX??e.screenLeft??0;return{t:i,r:a+n,b:r,l:a,w:n,h:t}},yr=e=>({win:br(),self:hr(e),exp:{t:0,l:0,r:0,b:0,xs:!1,ys:!1}}),vr=e=>(0,At.m)(e)&&(e=>(0,At.m)(e)&&(0,At.l)(e.t)&&(0,At.l)(e.l)&&(0,At.l)(e.r)&&(0,At.l)(e.b)&&(0,At.l)(e.xiv)&&(0,At.l)(e.yiv)&&(0,At.l)(e.iv)&&(0,At.l)(e.z)&&(0,At.l)(e.w)&&(0,At.l)(e.h))(e.self)&&(e=>(0,At.m)(e)&&(0,At.l)(e.t)&&(0,At.l)(e.b)&&(0,At.l)(e.l)&&(0,At.l)(e.r)&&(0,At.l)(e.w)&&(0,At.l)(e.h))(e.win)&&(e=>(0,At.m)(e)&&(0,At.l)(e.t)&&(0,At.l)(e.l)&&(0,At.l)(e.r)&&(0,At.l)(e.b)&&((0,At.l)(e.xs)||(0,At.e)(e.xs))&&((0,At.l)(e.ys)||(0,At.e)(e.ys)))(e.exp),Ir={error:e=>(0,At.m)(e)&&(0,At.l)(e.code)&&(0,At.q)(e.message),ready:e=>(0,At.m)(e)&&(0,At.q)(e.placementId),render:e=>(0,At.m)(e)&&(e=>(0,At.m)(e)&&(0,At.l)(e.cpm)&&((0,At.q)(e.adMarkup)||(0,At.q)(e.adUrl))&&(0,At.q)(e.bidId)&&(0,At.l)(e.width)&&(0,At.l)(e.height)&&(0,Mi.b)(e))(e.bid)&&(e=>(0,At.m)(e)&&(0,At.q)(e.url)&&(0,At.q)(e.domain))(e.metadata)&&(0,At.m)(e.safeFrame)&&(0,At.e)(e.safeFrame.hasFocus)&&vr(e.safeFrame.geom)};var wr=n(62);const{debug:Sr}=ot.a.tag("channel");class Cr{#z=new wr.a;#r;constructor(e){const{source:t,...n}=e;this.#r={...n},this.open(t??window)}close=()=>{this.#r.source&&(this.#z.clear(),this.#r.source.removeEventListener("message",this.#ht),this.#r.source=void 0,Sr(`'${this.#r.name}' closed`))};open=e=>{this.close(),this.#r.source=e,this.#r.source.addEventListener("message",this.#ht),Sr(`'${this.#r.name}' channel opened with namespace '${this.#r.namespace}'`)};#bt=e=>{const[t,n]=e;if(!(0,At.q)(t))return!1;const i=this.#r.validators[t];return!!i?.(n)};#yt=e=>{try{return JSON.parse(e)}catch{}};#ht=e=>{try{if(e.source!==this.#r.target)return;if(!(0,At.q)(e.data))return;const t=this.#yt(e.data);if(!t)return;const{event:n,params:i,ns:r}=t;if(r!==this.#r.namespace)return;if(!this.#bt([n,i]))throw new Error("couldn't validate message data");Sr(`'${this.#r.name}' received a message '${n}'`,i),this.#z.dispatch(n,i)}catch(e){Sr(`'${this.#r.name}' error handling message`,e)}};once=this.#z.once;on=this.#z.on;off=this.#z.off;#vt=(e,t)=>JSON.stringify({ns:this.#r.namespace,event:e,params:t});emit=(e,t)=>{this.#r.target.postMessage(this.#vt(e,t),"*"),Sr(`'${this.#r.name}' sent message '${String(e)}'`,t)}}const Rr=(e,t,n)=>{const i=1e3*t,r={lastCallMoment:0},a={leading:!0,trailing:!0,...n},o=()=>{r.lastCall&&(r.result=e.apply(r.lastCall.context,r.lastCall.args),r.lastCall=void 0)},s=()=>{r.timeout&&(clearTimeout(r.timeout),r.timeout=void 0)};function d(...e){const t=Date.now();r.lastCallMoment||a.leading||(r.lastCallMoment=t);const n=t-r.lastCallMoment,d=i-n;return r.lastCall={context:this,args:e},d<=0||d>i?(s(),r.lastCallMoment=t,o()):!r.timeout&&a.trailing&&(r.timeout=window.setTimeout((()=>{r.lastCallMoment=a.leading?Date.now():0,r.timeout=void 0,o()}),d)),r.result}return d.cancel=()=>{s(),r.lastCallMoment=0,r.lastCall=void 0},d},Er={register:e=>(0,At.m)(e)&&(0,At.l)(e.w)&&(0,At.l)(e.h),updateGeom:e=>(0,At.m)(e)&&(0,At.e)(e.hasFocus)&&vr(e.geom)},{debug:Tr}=ot.a.tag("safeframe:host");class xr{#It=!1;#wt=new Set;add=e=>{this.#wt.add(e),this.#St()};remove=e=>{this.#wt.delete(e),this.#Ct()};#St=()=>{this.#It||(this.#It=!0,document.addEventListener("visibilitychange",this.#Rt),addEventListener("scroll",this.#Et))};#Ct=()=>{this.#wt.size>0||this.#It&&(this.#It=!1,document.removeEventListener("visibilitychange",this.#Rt),removeEventListener("scroll",this.#Et))};#Tt=Rr((()=>{for(const e of this.#wt)e.updateGeom()}),1,{leading:!1,trailing:!0});#Rt=()=>{this.#Tt()};#Et=()=>{this.#Tt()};static shared=new xr}class Ar{#xt;#At;constructor(e,t){this.#xt=e;const n=e.contentWindow;if(!n)throw new wi.b(wi.a.safeframeHostFrameWindowNotAvailable,`couldn't obtain target for safeframe channel for frame #${e.id}`);this.#At=new Cr({name:`safeframe:host:${t}`,namespace:"hbv:sf:v1",validators:Er,target:n}),this.#At.on("register",(()=>{Tr("register")})),xr.shared.add(this)}updateGeom=()=>{const e="visible"===document.visibilityState,t=yr(this.#xt);this.#At.emit("updateGeom",{hasFocus:e,geom:t})};dispose=()=>{xr.shared.remove(this),this.#At.close()}}const{error:Dr}=ot.a.tag("sandbox:host");class kr{#Dt;#xt;#kt;#At;constructor(e){this.#Dt=e}#Ot=e=>{this.dispose();try{this.#xt=e;const t=this.#xt.contentWindow;if(!t)throw new wi.b(wi.a.sandboxHostFrameWindowNotAvailable,`couldn't obtain target for sandbox channel for placement '${this.#Dt.placementId}'`);this.#At=new Cr({name:`sandbox:host:${this.#Dt.placementId}`,namespace:"hbv:sandbox",validators:Ir,target:t}),this.#At.on("error",this.#Bt),this.#At.on("ready",this.#Ut),this.#kt=new Ar(e,this.#Dt.placementId)}catch(e){throw this.dispose(),e}};#Bt=e=>{(0,Si.a)(new wi.b(e.code,`sandbox client reported error with code #${e.code}: ${e.message}`)),this.dispose()};#Ut=e=>{this.#Dt.placementId!==e.placementId&&Dr(`received 'ready' with wrong placementId; expected '${this.#Dt.placementId}' received '${e.placementId}'`),this.#Nt()};#Nt=()=>{if(!this.#At||!this.#xt)return(0,Si.a)(new wi.b(wi.a.sandboxHostRenderWithoutChannel,`cannot render sandbox content without target for placement ${this.#Dt.placementId}`));const{width:e,height:t,cpm:n,adMarkup:i,adUrl:r,bidId:a,bidder:o,creativeId:s,placementId:d}=this.#Dt,c=location.href,l=location.hostname,u="visible"===document.visibilityState,p=yr(this.#xt);this.#xt.classList.add("hbv-ready"),this.#At.emit("render",{bid:{width:e,height:t,cpm:n,adMarkup:i,adUrl:r,bidId:a,bidder:o,creativeId:s,placementId:d},metadata:{url:c,domain:l},safeFrame:{hasFocus:u,geom:p}})};dispose=()=>{this.#kt?.dispose(),this.#kt=void 0,this.#At?.close(),this.#At=void 0,this.#xt?.remove(),this.#xt=void 0};static render=(e,{publisherId:t,bidResponse:n})=>{const{width:i,height:r}=n,a=encodeURIComponent(n.placementId),o=new kr(n),s=e.createElement("iframe");return(0,zi.l)(s,{width:i,height:r}),s.classList.add("hbv-sandbox"),s.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-scripts allow-top-navigation-by-user-activation allow-same-origin"),s.src=`https://s.hubvisor.io/wrapper/${t}/sandbox.html?pid=${a}`,e.body.append(s),o.#Ot(s),o}}const{error:Or}=ot.a.tag("formats:util:iframe"),{warn:Br,error:Ur}=ot.a.tag("observer"),{error:Nr}=ot.a.tag("Parallax"),{debug:_r}=ot.a.tag("rich-media"),Pr=[It.a.Sublime,It.a.ogury,It.a.hbvRichmedia,It.a.Teads,It.a.Adyoulike,It.a.richaudience,It.a.Invibes,It.a.visx,It.a.Freewheel,It.a.seedtag,It.a.relaido,It.a.impactify,It.a.bliink,It.a.beop],jr=(e,t)=>{const n=t.bidderAliases;if(Pr.some((t=>n[e.bidder]===t||t===e.bidder)))return!0;const i=n[e.bidder]===It.a.TripleLift||e.bidder===It.a.TripleLift;return!(!i||e.displayFormat!==Ci.a.nativeBanner)||!(!i||e.displayFormat!==Ci.a.outstream)},$r=(e,t)=>({...e,...t,customPosition:{...e?.customPosition,...t?.customPosition},parallax:{enabled:!1,...e?.parallax,...t?.parallax}}),qr=(e,t,n)=>{try{return e.overrideRichMediaSettings?.(t,n)}catch(e){const t=new wi.b(wi.a.overrideRichMediaOptionsFailed,e);(0,Si.a)(t,"overrideRichMediaSettings error")}},Fr=async(e,t)=>{const{resolvedBid:n,placement:i,options:r}=t,{bidResponse:a}=n,{customPosition:o,shouldHideFrame:s=!1,shouldSetupDAP:d=!0,useSandbox:c=!1,parallax:l,customRendering:u}=(({placement:e,options:t,resolvedBid:n})=>{const i=[It.a.Sublime,It.a.hbvRichmedia,It.a.Invibes].some((e=>t.globalSettings.bidderAliases[n.bidResponse.bidder]===e||e===n.bidResponse.bidder)),r=1===n.bidResponse.width&&1===n.bidResponse.height&&(t.globalSettings.bidderAliases[n.bidResponse.bidder]===It.a.Teads||It.a.Teads===n.bidResponse.bidder),a="video"===n.bidResponse.mediaType||r||i||!(0,At.r)(e.rendering?.richMedia?.customRendering);return[e.rendering?.richMedia,qr(t.globalSettings,e,n.bidResponse)].reduce($r,{shouldHideFrame:a})})(t),p=!(0,At.r)(u)&&"banner"===a.mediaType,m=(({bidResponse:e,parallax:t,globalSettings:n})=>!!t?.enabled&&!jr(e,n)&&"video"!==e.mediaType)({bidResponse:a,parallax:l,globalSettings:r.globalSettings}),f=(r.globalSettings.bidderAliases[a.bidder]===It.a.Teads||a.bidder===It.a.Teads)&&1===a.width&&1===a.height&&"banner"===a.mediaType;let g=await(async({initialDocument:e,customPosition:t,parallax:n,renderParams:i})=>{const r=((e,t)=>{const n=t?.selector;if(!n)return e;const i=(e=>{const t=document.querySelector(e);if(!t){const t=new wi.b(wi.a.customInsertionPointNotFound,`Couldn't find insertion point w/ selector ${e}`);return(0,Si.a)(t),null}const n=document.createElement("iframe");return t.insertBefore(n,t.firstChild),n})(n);if(!i)return e;const r=e?.defaultView?.frameElement;return(0,zi.h)(r)&&(0,zi.d)(r),i.contentWindow?.document??e})(e,t);return n?.enabled?(async(e,t)=>{const{resolvedBid:{bidResponse:n},placement:i}=t,r=i.rendering?.richMedia?.parallax??{enabled:!0};let a;try{a=(({targetHeight:e,targetRatio:t,width:n})=>{if(n<=0)return 0;if((0,At.i)(e)&&e<=0)throw new wi.b(wi.a.onParallaxInvalidParameters,`Invalid targetHeight of ${e} on parallax`);if((0,At.i)(t)&&t<=0)throw new wi.b(wi.a.onParallaxInvalidParameters,`Invalid targetRatio of ${t} on parallax`);return e||(t?n/t:310)})({targetHeight:r.targetHeight,targetRatio:r.targetRatio,width:n.width})}catch(e){(0,Si.a)(e,"Fallback to targetHeight = 0"),a=0}if(n.height<=a)return e;const o=e.defaultView?.frameElement;if(!(0,zi.h)(o))return Nr("No outer frame provided for parallax rendering, aborting",e),e;const s=r.topInset??0,d=r.bottomInset??0,c=()=>{(0,zi.l)(o,{width:n.width,height:a}),(0,zi.m)(o,{width:`${n.width}px`,height:`${a}px`}),e.body.style.height=`${a}px`,e.body.style.overflowY="hidden"};c();const l=(0,pn.a)(c,.01);new MutationObserver((e=>{for(const t of e)if("attributes"===t.type){const e=t.target;if(!(0,zi.f)(e))continue;const{width:i,height:r}=e.getBoundingClientRect();i===n.width&&r===a||l()}})).observe(o,{attributes:!0});const u=e.createElement("div");u.style.width="100%",u.style.height="100%",u.style.overflowY="hidden";const p=e.createElement("iframe");(0,zi.l)(p,{id:`parallax-inner-${n.placementId}`,width:n.width,height:n.height}),u.append(p),e.body.append(u);const m=()=>{const e=o.getBoundingClientRect(),t=s,i=innerHeight-e.height-d,r=1/(i-t),a=-t*r,c=(1-(Math.max(Math.min(i,e.top),t)*r+a))*(n.height-e.height);u.scrollTop=c},f=await(0,zi.n)(p);if(!f)return Nr("Somehow parallaxDoc is still not usable... Falling back to non-parallax rendering"),e;const{observedElementSelector:g}=r;return((e,{triggerInitially:t=!1,observedElementSelector:n}={})=>{const i=(e=>{let t;return{listener(n){t||(t=window.requestAnimationFrame((()=>{t=void 0,e(n)})))},cancel(){t??=window.cancelAnimationFrame(t)}}})(e);((e,t,n)=>{for(const t of["scroll","resize"])e.addEventListener(t,n)})((e=>{if(e)try{const t=document.querySelector(e);if(t)return t;Br(`Couldn't find element w/ selector "${e}", using window instead`)}catch(t){Ur(`Failed to find element w/ selector "${e}"`,t)}return window})(n),0,i.listener),t&&i.listener()})(m,{observedElementSelector:g}),m(),f})(r,{...i,...n}):r})({initialDocument:e,customPosition:o,parallax:m?l:void 0,renderParams:t});if(_r(`rendering '${i.placementId}' { safeframe : ${c}, parallax: ${m}, hidden: ${s}, DAP: ${d} }`),s){const e=g.defaultView?.frameElement;(0,zi.h)(e)&&((0,zi.d)(e),f&&((e,t)=>{document.getElementById(t.placementId)||((e,t)=>{const n=document.createElement("div");n.id=t.placementId;const i=(0,Mi.a)(document,t,{creativeType:"nativeBanner"});n.append(i),e?.parentElement&&e.parentElement.append(n)})(e,t)})(e,a))}else((e,t,n)=>{const{width:i,height:r}=n,a=e.defaultView?.frameElement;(0,zi.h)(a)?(0,zi.l)(a,{width:i,height:r}):Or("couldn't prepare frame")})(g,0,a);const h=!jr(a,r.globalSettings)&&"banner"===a.mediaType;if(p&&(g=((e,t,n)=>{const{placementId:i,width:r,height:a}=n,o=document.createElement("iframe");if((0,zi.l)(o,{width:r,height:a,id:`hbv-rich-media-render-${i}`}),e(o,n),!(0,zi.k)(o.contentDocument)){const e=new wi.b(wi.a.customRichMediaNullDocument,"Couldn't render custom richMedia format: iframe document isn't usable");return(0,Si.a)(e),t}return o.contentDocument})(u,g,a)),!c||!h)return Gi(g,{bid:a,creativeType:"rich-media",useInnerFrame:!0,afterDocumentOpen:e=>{d&&(e=>{e.defaultView&&(e.defaultView.inDapIF=!0)})(e)}});{const{publisherId:e}=r.globalSettings;kr.render(g,{publisherId:e,bidResponse:a})}},zr=(e,t,n,i)=>(e.addEventListener(t,n,i),(0,ht.a)((()=>e.removeEventListener(t,n,i)))),Mr=(e,t,n,i)=>{const r=zr(e,t,(e=>{r(),n(e)}),i);return r},Vr=e=>{const t=(0,ht.a)((()=>{e.duration&&e.element.style.removeProperty("transition"),e.done?.()}));if(e.duration){const n=Object.keys(e.properties).map((t=>`${t} ${e.duration}s ease`)).join(",");e.element.style.setProperty("transition",n),Mr(e.element,"transitionend",t),Mr(e.element,"transitioncancel",t)}for(const[t,n]of Object.entries(e.properties))e.element.style.setProperty(t,n);e.duration||t()},{error:Lr}=ot.a.tag("Amazon"),Wr={"rich-media":Fr,native:(e,{options:t,resolvedBid:n})=>{{const{globalSettings:i}=t,{bidResponse:r}=n;return(async({doc:e,globalSettings:t,bidResponse:n})=>{{const{nativeRendering:i}=t;if(!i||!(0,At.g)(i)){const e={placementId:n.placementId,bidder:n.bidder,mediaType:n.mediaType,creativeId:n.creativeId},i=new wi.b(wi.a.noNativeRenderer,`Couldn't render native format without providing nativeRendering callback: ${JSON.stringify(e)}`);return(0,Si.a)(i,t,n)}try{await i(e,{bidResponse:n}),(()=>{for(const e of document.querySelectorAll(`[${Yi}]`))try{const t=e.getAttribute(Yi);if(!t||"undefined"===t)continue;const n=(0,Nt.a)(JSON.parse(t));e.addEventListener("click",(()=>{er(n)}),!1),e.removeAttribute(Yi)}catch(t){Ji("Couldn't setup click tracking attribute from item",e,t)}})(),(e=>{for(const t of document.querySelectorAll(`[${Zi}]`)){const n=t.getAttribute(Zi),i=t.getAttribute(Qi)??`hbv-native-${e.placementId}`;if(n&&(0,Ci.b)(e.native)){try{const n=e.native.prebid;tr(t,n,i)}catch(e){Ji("Couldn't insert JsTrackers",e)}t.removeAttribute(Zi),t.removeAttribute(Qi)}}})(n)}catch(e){(0,Si.a)(e,`error rendering format native for content with creativeid #${n.creativeId} from ${n.bidder} on placement ${n.placementId}: ${JSON.stringify(n.native)}`)}}})({doc:e,globalSettings:i,bidResponse:r})}},skin:async(e,t)=>{const{options:{globalSettings:n},resolvedBid:{bidResponse:i}}=t,{skinRendering:r}=n;if(!r){const e=new wi.b(wi.a.noSkinRenderer,"can't render skin format without providing skinRendering callback");return(0,Si.a)(e,n,i)}const a=e.defaultView?.frameElement;(0,zi.h)(a)?(0,zi.d)(a):Xi(`No initial frame found for content with id '${i.bidId}'`);const{width:o,height:s}=i,d=document.createElement("iframe");(0,zi.l)(d,{width:o,height:s,id:"hbv-custom-render"}),(0,zi.m)(d,{position:"absolute",top:"0",left:"50%",transform:"translate(-50%, 0)"});try{await r(d,{bidResponse:i})}catch(e){return(0,Si.a)(e,`error rendering format skin for content with id #${i.bidId}`)}(0,zi.o)(d,(()=>{if(!(0,zi.k)(d.contentDocument)){const e=new wi.b(wi.a.skinFrameNullDocument,"Couldn't render skin format: skin iframe document isn't usable");return(0,Si.a)(e)}Gi(d.contentDocument,{bid:i,creativeType:"skin",useInnerFrame:!0})}))},intrastitial:(e,t)=>{{const n=e.defaultView?.top;if(!n)throw new Error("top window couldn't be retrieved");const i=n.document;i.getElementById("hbv-container")?.remove();const r=i.createElement("div");r.id="hbv-container";const a=(0,zi.b)(document,"hbv-intrastitial","\n  html {\n    overflow: hidden;\n  }\n  #hbv-container {\n    background: rgba(0, 0, 0, 0.6);\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    z-index: 90000000;\n    opacity: 0;\n  }\n  "),o=t.resolvedBid.bidResponse,s=`hbv-${t.placement.placementId}`,d=i.createElement("iframe");(0,zi.l)(d,{width:o.width,height:o.height,id:s}),Object.assign(d.style,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"});const c=i.createElement("div");c.id="hbv-interstitial-div",r.append(c);const l=document.createElement("button");l.id="hbv-intrastitial-close",l.innerText="",Object.assign(l.style,{color:"#FFF",position:"absolute",top:"6px",right:"6px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"9999px",width:"26px",height:"26px",display:"flex",justifyContent:"center",alignItems:"center"});const u=(0,ht.a)((()=>{Vr({element:r,properties:{opacity:"0"},duration:.3,done:()=>{r.remove(),a.remove()}})}));l.addEventListener("click",u,{capture:!0,once:!0,passive:!0}),i.body.append(r),Object.assign(c.style,{width:`${o.width}px`,height:`${o.height}px`,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"100vw"}),c.append(d,l),t.disposables.push((()=>{r.remove(),a.remove()})),(0,zi.o)(d,(()=>{const e=d.contentDocument;if(!(0,zi.k)(e))throw new Error("couldn't render interstitial format: iframe document is not usable");Fr(e,t),Vr({element:r,properties:{opacity:"1"},duration:.3})}))}},"outstream-player":(e,t)=>{const{resolvedBid:{bidResponse:n},placement:i}=t,r=e.defaultView?.frameElement;(0,zi.h)(r)&&(0,zi.d)(r),(0,Mi.c)(e,n,{creativeType:"outstream-player"});const a=document.querySelector(i.rendering?.outstream?.selector??`#${i.placementId}`)??e.body;(0,Bi.a)("https://cdn.hubvisor.io/wrapper/common/player.js").then((()=>{(0,nr.a)(a,{vastUrl:n.vastUrl,vastXml:n.vastXml,targetWidth:n.width,targetHeight:n.height,renderContext:{document:e,bidResponse:n,context:void 0},...i.rendering?.outstream,onEvent:(e,t)=>{const i=(0,ir.a)(e,t);switch(i.kind){case"impression":case"first-quartile":case"midpoint":case"third-quartile":case"complete":return rr.a.emit("outstream-imp",{adId:n.bidId,kind:"impression"===i.kind?"video-imp":i.kind}),ar(`Outstream ${i.kind} pixel triggered for ${n.placementId}`);case"error":return or("Error playing outstream",JSON.stringify({error:i.value,bidResponse:n}))}}})})).catch((e=>{(0,Si.a)(new wi.b(wi.a.outstreamPlayerLoadingFailed,`failed to load player: ${e.message} - bid ${n.bidder} ${n.vastUrl} ${n.vastXml}  - ${JSON.stringify(e)}`),e)}))},amazon:async(e,t)=>{if(!window.apstag)return Lr("apstag is not available");const n=t.resolvedBid.bidResponse,i=n.targetings.amzniid;if(!(0,At.q)(i))return Lr("No amzniid available to render bid : ",i);(0,Mi.c)(e,n,{creativeType:n.displayFormat??n.mediaType}),t.options.bus.emit(rn.a.AmazonRenderRequest,[e,i])}},Gr={},Xr={set(e,t){t?Gr[e]=t:delete Gr[e]},read:e=>Gr[e]},Hr=(e,t)=>{const n={};for(const i of e){const e=t(i);(0,At.r)(e)||(n[e]||(n[e]=[]),n[e]?.push(i))}return n},Kr={init:void 0,config:void 0,hubvisorUntilInitDuration:void 0},Jr={},Yr={},Zr={hubvisorUntilInitDuration(e){Kr.hubvisorUntilInitDuration=mn(e)},init(e){Kr.init=mn(e)},config(e){Kr.config=mn(e)},preRender(e,t){Jr[e]=mn(t)},postRender(e,t){Yr[e]=mn(t)}},Qr=e=>Yr[e];class ea{#_t=[];#Pt=!1;get disposed(){return this.#Pt}constructor(e=[]){this.#_t.push(...e)}push=(e,...t)=>{this.#Pt?this.#jt([e,...t]):this.#_t.push(e,...t)};dispose=()=>{this.#Pt||(this.#Pt=!0,this.#jt(this.#_t),this.#_t.length=0)};#jt=e=>{for(let t=e.length-1;t>=0;--t)try{e[t]()}catch{}}}var ta=n(96),na=n(54),ia=n(59);const{debug:ra,info:aa,warn:oa,error:sa}=ot.a.tag("Renderer");class da{#$t={};#qt=new Set;#r;constructor(e){this.#r=e,kt.h.start({settings:e.globalSettings,bus:e.bus}),this.#r.bus.on(rn.a.renderRequested,this.#Ft),this.#r.bus.on(rn.a.backupRenderRequested,this.#zt),this.#r.bus.on(rn.a.amazonImp,this.#Mt)}#Vt=e=>!!this.#qt.has(e)||(this.#qt.add(e),!1);#Lt=(e,t)=>{ra(`Sending '${rn.a.impression}' event for renderable`,t);const n={renderable:t,timestamp:Date.now(),doc:e};this.#r.bus.emit(rn.a.impression,n)};#Wt=(e,t)=>{const n={renderable:t,timestamp:Date.now(),doc:e};this.#r.bus.emit(rn.a.renderedImp,n)};#Gt=e=>{const t=this.#$t[e];if(!t)throw new Error(`couldn't resolve renderable for id #${e}`);return t};#Mt=({doc:e,amzniid:t})=>{const n=Object.values(this.#$t).find((e=>e.content.bidResponse.creativeId===t&&(0,ta.isAmazonBidResponse)(e.content.bidResponse)));if(!n)throw new Error(`couldn't resolve renderable for id #${t}`);this.#Lt(e,n),this.#Wt(e,n)};#Xt=(e,t)=>{const n=this.#r.globalSettings.bidderAliases;if(n[t.bidder]===It.a.amazon||t.bidder===It.a.amazon)return"amazon";const i=n[t.bidder]===It.a.Sublime||t.bidder===It.a.Sublime;if((1800===t.width||1600===t.width)&&1e3===t.height&&!i)return"skin";if("native"===t.mediaType)return"native";const r=e?.rendering?.format;return r||"rich-media"};#Ht=(e,t,n)=>{if(this.#r.globalSettings.overrideRenderFormat)try{return this.#r.globalSettings.overrideRenderFormat(e,t,n)}catch(e){const t=new wi.b(wi.a.overrideRenderFormatFailed,e);(0,Si.a)(t,"overrideRenderFormat error")}};#Kt=(e,t)=>{const n=this.#Xt(e,t);return this.#Ht(e,t,n)??n};#Jt=async({doc:e,id:t,context:n,disposables:i})=>{const r=this.#Gt(t),a=this.#Vt(t);a||this.#Lt(e,r),Xr.set(r.placement.placementId,{document:e,bidResponse:r.content.bidResponse,context:n});const o=this.#Kt(r.placement,r.content.bidResponse),s=Wr[o];if(a)oa(`Rendering already rendered renderable #${t} using format: '${o}' for placement '${r.placement.placementId}' !\n      This double-render is probably an issue with a double-refresh request sent to the adserver`),(0,Si.a)(new wi.b(wi.a.doubleRenderError,`Double render for ${r.placement.placementId} and format ${o}`));else{const{creativeId:e,bidder:t}=r.content.bidResponse;aa(`Rendering renderable with id #${e} from ${t} using format: '${o}' for placement '${r.placement.placementId}'`)}const{shouldAbortRender:d}=await this.#Yt(e,r);if(d)return aa(`Abort rendering of placement ${r.placement.placementId}`);await s(e,{options:this.#r,placement:r.placement,resolvedBid:r.content,disposables:i}),await this.#Zt(e,r),a||this.#Wt(e,r)};#Yt=async(e,t)=>{const{preRenderStep:n}=this.#r.globalSettings,i=performance.now();try{const r=await(n?.(e,t));return Zr.preRender(t.content.bidResponse.bidId,performance.now()-i),Object.assign({shouldAbortAuction:!1},(e=>(0,At.m)(e)&&(0,At.e)(e.shouldAbortRender))(r)?r:void 0)}catch(e){sa("preRenderStep error",e,t)}return{shouldAbortRender:!1}};#Zt=async(e,t)=>{const{postRenderStep:n}=this.#r.globalSettings,i=performance.now();try{await(n?.(e,t))}catch(e){sa("postRenderStep error",e,t)}Zr.postRender(t.content.bidResponse.bidId,performance.now()-i)};adServerCallback=(e,t,n,i)=>{const r=n||t;ra(`Called back for rendering of ${n?"guaranteed":""} content with id #${r}`);const a=new ea;this.#Jt({doc:e,id:r,context:i,disposables:a}).catch((t=>{!(0,At.i)(e)&&zi.g||(0,Si.a)(new wi.b(wi.a.renderingFailed,t),`failed to render content w/ #${r}`),a.dispose()}))};#Qt=e=>{const t=Object.entries(kt.h.registrations).reduce(((t,[n,i])=>(i?.canRender(e)&&t.push(n),t)),[]);if(t.length<=0)oa("No renderer was found for renderable it will be discarded",e);else if(t.length>1){if(this.#r.globalSettings.consent.shouldSkipAdserverOnConsentless&&t.includes(Fi.a.hsc))return(0,Bt.b)()&&!na.a?Fi.a.hsc:t.filter((e=>e!==Fi.a.hsc))[0];oa("More than one renderer was found for renderable, make sure the configuration is appropriate",e,t)}return t[0]};#en=async(e,t)=>{const{preAdserverCallStep:n}=this.#r.globalSettings;try{const i=await(n?.(e,t));return Object.assign({shouldAbortCall:!1},(e=>(0,At.m)(e)&&(0,At.e)(e.shouldAbortCall))(i)?i:void 0)}catch(n){sa("preAdserverCall error",n,e,t)}return{shouldAbortCall:!1}};#tn=async(e,t)=>{const n=kt.h.registrations[e],{shouldAbortCall:i,renderables:r}=await this.#en(e,t);if(i)return aa(`Abort adcalls for ${e}`,t);const a=r??t;n.render(a)};render=e=>{for(const t of e)for(const e of t.content)this.#$t[e.bidResponse.bidId]={placement:t.placement,content:e};const t=Hr(e,this.#Qt);for(const e of Object.keys(kt.h.registrations)){const n=t[e]??[];this.#tn(e,n).catch((t=>{sa(`Rendering error with '${e}'`,n,t)}))}};#Ft=e=>{const t=e.renderRequests.map((e=>e.renderable));this.render(t)};#zt=e=>{const t=e.renderable.content[0];t&&(this.#$t[t.bidResponse.bidId]={placement:e.renderable.placement,content:t},setTimeout((()=>{const n=e.renderContext.document.defaultView?.frameElement;(0,zi.h)(n)&&"none"===n.style.display&&(n.style.display=""),(0,ia.a)("adServerRender",{document:e.renderContext.document,adId:t.bidResponse.bidId})}),0))}}const ca=new Promise((e=>{fetch("https://securepubads.g.doubleclick.net/pagead/ppub_config").then((({ok:t})=>e(!t))).catch((()=>e(!0)))}));let la=!1;ca.then((e=>{la=e}));const ua=(e,t,n)=>{const i=St.remoteConfiguration.currentValue?.publisherConfiguration?.cpmAdjustments?.filter((i=>i.adjustmentKind===n&&((0,At.j)(i.pageZones)||(0,Nt.a)(i.pageZones).includes(t.pageZone))&&((0,At.j)(i.layouts)||(0,Nt.a)(i.layouts).includes(t.layout))&&((0,At.j)(i.devices)||(0,Nt.a)(i.devices).includes(wt.b))&&((0,At.j)(i.supportCodes)||(0,Nt.a)(i.supportCodes).includes(t.supportCode))&&((0,At.j)(i.isConsentless)||i.isConsentless===(0,Bt.b)())&&((0,At.j)(i.placementIds)||(0,Nt.a)(i.placementIds).includes(e.placementId))&&((0,At.j)(i.bidders)||(0,Nt.a)(i.bidders).includes(e.bidder))&&((0,At.j)(i.displayFormats)||(0,Nt.a)(i.displayFormats).includes(e.displayFormat))&&(0,At.l)(i.adjustment)));return i?.[0]?.adjustment},{debug:pa,error:ma,warn:fa,info:ga}=ot.a.tag("Bidder");class ha{#r;#nn=(0,Rt.c)("bidder-priority");#in={};#rn=0;constructor(e){this.#r=e,this.#r.bus.on(rn.a.auctionFinished,this.#an),this.#r.bus.on(rn.a.auctionStarted,this.#on)}#sn=e=>{const{placements:t}=e.config,n=t.reduce(((e,t)=>(e[t.placementId]={placement:t,bids:[],noBids:[],timeouts:[],rejectedBids:[]},e)),{});return this.#dn(n,e),Object.values(n)};#cn=(e,t)=>{const{filterAuctionStep:n}=this.#r.globalSettings;try{return n?.(e,t)??!0}catch(n){ma("filterAuctionStep error: bid won't be filtered",n,e,t)}return!0};#ln=(e,t,n)=>{const i=St.remoteConfiguration.currentValue?.publisherConfiguration?.blacklistedCreatives;return!!i?.find((e=>e.creativeId===t.bidResponse.creativeId&&e.device===("tablet"===wt.b||"phone"===wt.b?"mobile":wt.b)&&e.support===n.context.supportCode))||!this.#cn(e,t)};#un=(e,t)=>{const{cpmMultiplier:n}=this.#r.globalSettings;try{const i=n?.(e,t);if((0,At.i)(i))return i}catch(e){ma("error retrieving cpm adjustment: it won't be applied",e)}return ua(e,t.context,"cpm")??1};#pn=(e,t)=>{const{adserverMultiplier:n}=this.#r.globalSettings;try{const i=n?.(e,t);if((0,At.i)(i))return i}catch(e){ma("error retrieving adserver adjustment: it won't be applied",e)}return ua(e,t.context,"adserver")??1};#mn=(e,t)=>{const{cpm:n}=e,i=this.#un(e,t),r=this.#pn(e,t),a=n*i;if((0,At.q)(this.#nn)&&this.#nn===e.bidder){const t=30;return pa("Adjusted cpm for",{placement:e.placementId,bidder:e.bidder},`: ${n.toFixed(2)} =>`,{estimatedNetCpm:n.toFixed(2),adjustedCpm:t.toFixed(2),high_prio:!0}),{netCpm:a,adjustedCpm:t}}if(na.a)return{netCpm:n,adjustedCpm:n};const o=a*r;return pa("Adjusted cpm for",{placement:e.placementId,bidder:e.bidder},`: ${n.toFixed(2)} =>`,{estimatedNetCpm:a.toFixed(2),adjustedCpm:o.toFixed(2)}),{netCpm:a,adjustedCpm:o}};#fn=(e,t,n)=>{const i={cpmAdjustment:this.#mn(t,n),bidResponse:t};if(!this.#ln(e,i,n))return i};#dn=(e,t)=>{for(const n of t.bids){const i=e[n.placementId];if(i){const e=this.#fn(i.placement,n,t.config);e?i.bids.push(e):i.rejectedBids.push(n)}else fa(`couldn't resolve content for placement id ${n.placementId}, skipped BidResponse`,n)}const n=new Set;for(const i of t.noBids){const t=e[i.placementId];t?(t.noBids.push(i),n.add(i.bidId)):fa(`couldn't resolve content for placement id ${i.placementId}, skipped NoBid`,i)}for(const i of t.rejectedBids){const t=e[i.placementId];t?(t.rejectedBids.push(i),n.add(i.bidId)):fa(`couldn't resolve content for placement id ${i.placementId}, skipped RejectedBid`,i)}for(const i of t.timeouts){const t=e[i.placementId];t?n.has(i.bidId)||t.timeouts.push(i):fa(`couldn't resolve content for placement id ${i.placementId}, skipped Timeout`,i)}};#gn=async e=>{const t=[];return window.ethereum&&t.push("ethereum-wallet=true"),e.refreshReason===Ut.b.secondChance&&t.push("second-chance=true"),na.a&&t.push("uplift=true"),await ca&&t.push("adblock=true"),t};#hn=async e=>{try{return(await Promise.all([this.#gn(e.config),this.#r.globalSettings.auctionTags?.({auctionId:e.auctionId,consent:e.consent,config:e.config})])).filter(At.i).flat()}catch(e){return ma("failed to retrieve base or custom tags",e),[]}};#bn=async e=>{const t=this.#in[e.auctionId];if(!t)return[];delete this.#in[e.auctionId];const n=[],i=await Promise.race([t,(0,Vi.b)(this.#rn).then((()=>n))]);return i===n&&fa("tags resolution took too long: tags won't be sent for this auction"),i};#on=e=>{this.#in[e.auctionId]=this.#hn(e)};#an=async e=>{pa("Resolving auction");try{const t=await this.#bn(e),n={resolvedPlacements:this.#sn(e),timestamp:new Date,auction:e,tags:t};ga("resolved auction",n.resolvedPlacements,n.tags),this.#yn(n)}catch(e){ma("error during content resolution",e)}};#yn=e=>{this.#r.bus.emit(rn.a.auctionResolved,e)};start=e=>{ga("starting auction w/ context",e.refreshConfig.context),this.#r.bus.emit(rn.a.refresh,e)}}const{debug:ba,warn:ya,error:va,info:Ia}=ot.a.tag("RenderList");class wa{#r;#vn=0;#In;#wn={};#Sn=new Set;#Cn;#Rn=new Set;constructor(e){this.#r=e,this.#Cn=(0,pn.a)((()=>{this.#En()}),e.globalSettings.renderList.competitionDebounceDelay),this.#r.bus.on(rn.a.auctionStarted,this.#on),this.#r.bus.on(rn.a.auctionResolved,this.#Tn),this.#r.bus.on(rn.a.renderableRequested,this.#xn),this.#r.bus.on(rn.a.impression,this.#te),rr.a.on("outstream-error",this.#An)}#Dn=(e,t)=>{ba(`New checkpoint #${e}`,t),this.#In={startIndex:e,config:t},this.#kn()};#on=e=>{this.#vn=e.startOrder,e.config.refreshReason===Ut.b.pageView&&this.#Dn(e.startOrder,e.config)};#Tn=e=>{this.#On(e)};#xn=e=>{for(const t of e.placements)this.#Sn.add(t);this.#Cn()};#te=e=>{const t=this.#wn[e.renderable.placement.placementId],n=t?.candidates.find((t=>t.content.bidResponse.bidId===e.renderable.content.bidResponse.bidId));n&&(n.status=2)};#An=({renderContext:e})=>{if(na.a)return;const t=e.bidResponse.placementId,n=this.#wn[t];if(!n)return;this.#Bn(n);const i=n.candidates.filter((e=>2!==e.status&&e.content.bidResponse.providerId===pi.a)).sort(this.#Un),r=i[i.length-1],a=i[i.length-2];if(this.#Nn(r,a),r){r.status=1,r.content.bidResponse.tags||(r.content.bidResponse.tags=[]),r.content.bidResponse.tags.push("outstream-backup=true");const t={renderable:{placement:n.placement,content:[r.content],config:n.metadata.config,auctionId:n.metadata.auctionId,tags:n.metadata.tags},config:n.metadata.config,auctionId:n.metadata.auctionId,generation:n.metadata.generation,timestamp:Date.now(),competition:{candidates:this.#_n(n)},renderContext:e};Ia(`Using bid as backup impression as outstream failed on placement ${n.placement.placementId} :`,r.content,t),this.#r.bus.emit(rn.a.backupRenderRequested,t)}};#Pn=e=>this.#In?!(e.auction.startOrder<this.#In.startIndex&&(ba("The auction started before last checkpoint was resolved after, it will be ignored",this.#In,e),1)):(ya("An auction was resolved before any checkpoint is available, that should not happen and it will be ignored",e),!1);#On=e=>{if(!this.#Pn(e))return;const t=this.#vn-e.auction.startOrder;for(const n of e.resolvedPlacements)this.#jn(n,t,e.auction,e.tags);this.#Rn.add(e.auction.auctionId),this.#Cn()};#jn=(e,t,n,i)=>{const{placement:r,bids:a}=e,{auctionId:o,config:s}=n,d={config:s,generation:t,auctionId:o,tags:i},c=this.#$n(r,d);for(const e of a)c.candidates.push({config:s,auctionId:e.bidResponse.auctionId,generationTimestamp:Date.now(),generation:t,status:0,content:e});this.#Sn.add(r.placementId)};#$n=(e,t)=>{const n=this.#wn[e.placementId];if(n)return n.metadata=t,n.placement=e,n;const i={placement:e,candidates:[],metadata:t};return this.#wn[e.placementId]=i,i};#En=()=>{const e=this.#Sn;this.#Sn=new Set,ba("Competition started for placements",e);const t=[];for(const n of e)this.#qn(t,n);const n=new Set(this.#Rn);this.#Rn.clear(),this.#Fn({renderRequests:t,auctionIds:n})};#qn=(e,t)=>{const n=this.#wn[t];if(!n)return void ya(`A competition was scheduled for placementId ${t} but content couldn't be found: placement will be ignored`);const i=n.candidates.filter((e=>e.content.bidResponse.deal?.isGuaranteed));this.#Bn(n);const r=this.#zn(n),a=this.#_n(n),o=[...r.map((e=>e.content)),...i.map((e=>e.content))];e.push({renderable:{placement:n.placement,content:o,config:n.metadata.config,auctionId:n.metadata.auctionId,tags:n.metadata.tags},config:n.metadata.config,auctionId:n.metadata.auctionId,generation:n.metadata.generation,timestamp:Date.now(),competition:{candidates:a}});for(const e of r)e.status=1;for(const e of i)e.status=1;this.#Mn(n)};#Fn=e=>{Ia("Sending render request",e),this.#r.bus.emit(rn.a.renderRequested,e)};#Mn=e=>{for(const t of e.candidates)t.generation+=1};#w=(e,t)=>{const n=(t-e.generationTimestamp)/1e3;return e.content.bidResponse.ttl>0&&n>=e.content.bidResponse.ttl};#Bn=e=>{const t=Date.now();e.candidates=e.candidates.filter((n=>!this.#w(n,t)&&!(e.placement.rendering?.instream&&0!==n.status||2===n.status||n.content.bidResponse?.deal?.isGuaranteed)))};#Vn=(e,t)=>e.cpmAdjustment.adjustedCpm-t.cpmAdjustment.adjustedCpm;#Un=(e,t)=>{try{const n=this.#r.globalSettings.overrideBidPriority?.(e.content,t.content);if((0,At.l)(n))return n}catch(n){va("error performing overrideBidPriority for candidates",e,t,n)}return this.#Vn(e.content,t.content)};#Nn=(e,t)=>{if(e){if(!t)return e.content.cpmAdjustment.netUsdIncrementCpm=e.content.cpmAdjustment.netCpm,void(e.content.cpmAdjustment.rawUsdIncrementCpm=e.content.bidResponse.cpm);e.content.cpmAdjustment.netUsdIncrementCpm=e.content.cpmAdjustment.netCpm-t.content.cpmAdjustment.netCpm,e.content.cpmAdjustment.rawUsdIncrementCpm=e.content.bidResponse.cpm-t.content.bidResponse.cpm}};#zn=e=>{const t=e.candidates.filter((e=>2!==e.status)).sort(this.#Un),n=(i=t,r=e=>e.content.bidResponse.providerId,Object.values(Hr(i,r)).filter(At.i));var i,r;const a=t[t.length-1],o=t[t.length-2];return this.#Nn(a,o),n.map((e=>e[e.length-1])).filter(At.i)};#_n=e=>e.candidates.map((t=>({placement:e.placement,content:t.content,generation:t.generation})));#kn=()=>{if(nn.c){const e=Object.values(this.#wn).reduce(((e,t)=>e+(t?t.candidates.length:0)),0);e>0&&ba(`Discarding ${e} renderables`),this.#Sn.size>0&&ba(`Unscheduled rendering for ${this.#Sn.size} placements`,this.#Sn)}this.#Sn=new Set,this.#wn={}}}const Sa=[];let Ca;kt.d.provide((({errorCode:e,message:t,stack:n,secondaryCode:i})=>{Sa.push({code:e,message:t,stack:n,secondaryCode:i}),Ca&&Ca()}));class Ra{#r;constructor(e){this.#r=e,Ca=(0,pn.a)(this.#Ln,1),Ca()}#Ln=()=>{if(0===Sa.length)return;const e=[...Sa];Sa.length=0,this.#r.bus.emit(rn.a.error,{errors:e})}}var Ea=n(41);const Ta=ia.a,{error:xa}=ot.a.tag("cmd-queue"),Aa=(0,ht.a)((()=>{const e=e=>{try{e()}catch(e){xa("Error executing command",e)}},t=window.Hubvisor?.cmd;if(window.Hubvisor=Ta,Ta.cmd=t??[],Ta.ready=!0,Array.isArray(t))for(let n=0;n<t.length;++n)e(t[n]);Ta.cmd={push:e}})),{info:Da,error:ka,debug:Oa}=ot.a.tag("hubvisor:refresh"),Ba={pendingPlacements:new Set,shouldRefreshAll:!1};let Ua;const Na=(0,pn.a)((()=>{Oa("Refresh started");const{shouldRefreshAll:e,pendingPlacements:t,task:n}=Ba;Ba.pendingPlacements=new Set,Ba.shouldRefreshAll=!1,Ba.task=void 0;const i=Ut.b.visibility,r=e?new Set:t;Ua?.(i,r).then((()=>{n?.resolve()})).catch((e=>{n?.reject(e)}))}),.2),_a=e=>{Ua=e},Pa=async e=>{const t=(e=>(0,At.j)(e)||(0,At.d)(e,At.q)?(0,Nt.a)(e):(ka("Can't validate args sent to refresh: refreshing all placements",e),[]))(e),n=0===t.length?"*":t.join(", ");Da(`Requested refresh for placements: ${n}`),Ba.shouldRefreshAll=0===t.length;for(const e of t)Ba.pendingPlacements.add(e);return Ba.task??=(0,Vi.a)(),Na(),Ba.task.promise},{debug:ja,error:$a}=ot.a.tag("hubvisor:autorefresh"),qa=new Set,Fa=new wr.a,za=e=>(0,At.d)(e,At.q)?(0,Nt.a)(e):($a("Cannot validate args",e),[]),Ma=e=>{const t=za(e);ja("excluding placements",t);for(const e of t)qa.has(e)||(qa.add(e),Fa.dispatch("didExcludePlacement",e))},Va=e=>{const t=za(e);ja("unexcluding placements",t);for(const e of t)qa.has(e)&&(qa.delete(e),Fa.dispatch("didUnexcludePlacement",e))},{debug:La}=ot.a.tag("connectivity-check"),Wa=e=>"bid-response"===e.kind,Ga=e=>"winning-bid"===e.kind,Xa=e=>"rejected-bid"===e.kind,Ha=()=>{try{return top.location.href}catch{}},Ka=e=>({code:e.code,message:e.message,stack:e.stack,secondaryCode:e.secondaryCode});var Ja=n(46);const{debug:Ya}=ot.a.tag("loading-time"),Za=(()=>{let e=!1;return(...t)=>{if(!e)return e=!0,Ja.a.tryCatch((()=>(e=>{const{cmpLatency:t,consentLatency:n}=e??{},{duration:i,startTime:r}=(()=>{const e=performance.getEntries().find((e=>e.name.match(/cdn.hubvisor\.io\/wrapper\/[a-zA-Z0-9]{26}\/(hubvisor-[a-zA-Z0-9]{1,}\.js|[a-zA-Z0-9]{1,}\.js)/)&&!e.name.includes("hubvisor-child.js")))??{},{duration:t,startTime:n}=e;return(0,At.l)(t)&&(0,At.l)(n)?(Ya(`Hubvisor starting time ${n} / loading time ${t} ms`),{duration:mn(t),startTime:mn(n)}):Ya("Can't retrieve Hubvisor loading and/or starting time")})()??{},a=Kr.hubvisorUntilInitDuration;return{hubvisorLoadDuration:i,cmpLatency:t,consentLatency:n,hubvisorLoadStartDelay:r,hubvisorInitDuration:Kr.init,configurationLoadDuration:Kr.config,hubvisorUntilInitDuration:(0,At.l)(i)&&(0,At.l)(r)&&(0,At.l)(a)?a-i-r:void 0}})(...t))).get()}})(),{error:Qa,debug:eo,warn:to}=ot.a.tag("beam"),no=(0,ht.a)((()=>{const e=performance.getEntriesByType("resource").filter((e=>!(e=>!(e.transferSize>0)&&(e.decodedBodySize>0||e.duration<30))(e)&&!(e=>0===e.connectEnd&&0===e.connectStart&&0===e.encodedBodySize&&0===e.decodedBodySize&&0===e.domainLookupStart&&0===e.domainLookupEnd&&0===e.requestStart&&0===e.responseStart&&0===e.transferSize&&0===e.redirectEnd&&0===e.redirectStart&&0===e.secureConnectionStart)(e)&&!(e=>e.encodedBodySize>0&&e.transferSize>0&&e.transferSize<e.encodedBodySize)(e))).map((({responseStart:e,responseEnd:t,transferSize:n})=>n/((t-e)/1e3))).sort(((e,t)=>e-t)).filter(Number.isFinite);if(e.length>2&&e.splice(-2),e.splice(0,Math.floor(.25*e.length)),0===e.length)return void La("Can't compute avg dl speed");const t=e.reduce(((e,t)=>e+t))/e.length*8/1e6;return La(`Avg dl speed: ${t.toFixed(2)} Mbps`),t})),io=e=>(0,At.r)(e)||""===e||(0,At.c)(e)&&0===e.length;class ro{#r;#Wn=Ii.a;#Gn={renderRequestByContentId:{},auctions:{},adRequestsByPlacementId:{},auctionsByPlacementId:{}};#Xn={auctions:{},pageViews:{},bids:{},carbonFilteredBids:[]};#Hn={events:{},errors:[]};constructor(e){this.#r=e,this.#r.bus.on(rn.a.auctionStarted,this.#on),this.#r.bus.on(rn.a.auctionResolved,this.#Tn),this.#r.bus.on(rn.a.renderRequested,this.#Ft),this.#r.bus.on(rn.a.backupRenderRequested,this.#zt),this.#r.bus.on(rn.a.adrequest,(e=>{for(const t of e)(0,At.r)(this.#Gn.adRequestsByPlacementId[t])?this.#Gn.adRequestsByPlacementId[t]=0:this.#Gn.adRequestsByPlacementId[t]+=1})),this.#r.bus.on(rn.a.impression,this.#te.bind(this,"imp")),this.#r.bus.on(rn.a.visibleImp,this.#te.bind(this,"visible-imp")),this.#r.bus.on(rn.a.measuredImp,this.#te.bind(this,"measured-imp")),this.#r.bus.on(rn.a.error,this.#Bt),rr.a.on("outstream-imp",this.#Kn);const{collectDebounceDelay:t}=this.#r.globalSettings.beam;this.#Wn=(0,pn.a)((()=>{this.#Jn()}),t),this.#r.bus.on(rn.a.carbonFilteredBid,(e=>{this.#Xn.carbonFilteredBids.push(e)}))}#Yn=()=>{const e=this.#Hn.events,t=Object.keys(e),n=[];for(const i of t){const t=this.#Gn.auctions[i];t?n.push({auction:t,events:e[i]??[]}):to("No auction found with ID ",i)}return((e,t)=>({publisherId:t.publisherId,source:t.source,timezone:t.timezone,version:t.version,connectionSpeed:t.connectionSpeed,auctions:e.auctions.flatMap((e=>e.events.length>0?(e=>{const{pageViewId:t,auctionId:n,refreshConfig:i,consent:r,tags:a}=e.auction,{bidderTimeout:o}=i,{layout:s,networkCode:d,pageZone:c,publisherBrand:l,supportCode:u}=i.context,{cmpStatus:p,tcData:m}=r??{};return{pageViewId:t,auctionId:n,consentString:(0,st.b)(m),gdprApplies:m?.gdprApplies,cmpStatus:p,network:d,brand:l,support:u,zone:c,layout:s,page:Ha(),auctionTimeout:1e3*o,events:e.events.flatMap((e=>{const t=(e=>"imp"===e.kind||"visible-imp"===e.kind||"measured-imp"===e.kind?(e=>{const{placementId:t,refreshIndex:n,cpmAdjustment:i,bidResponse:r,pageLoadToImpInterval:a,adUnitPath:o}=e,{bidder:s,originalCpm:d,originalCurrency:c,cpm:l,creativeId:u,dealId:p,ttl:m,width:f,height:g,mediaType:h,isNetRevenue:b,vendorId:y,displayFormat:v,bidId:I,userIdPartners:w,demandSource:S,payloadBidRequestSize:C,payloadBidResponseSize:R,tags:E}=r,{agencyId:T,advertiserId:x,advertiserDomains:A=[],primaryCatId:D,secondaryCatIds:k=[]}=r.meta??{},{adjustedCpm:O,netCpm:B,rawUsdIncrementCpm:U,netUsdIncrementCpm:N}=i;return{kind:e.kind,latency:"imp"===e.kind?e.timestamp-e.renderTimestamp:void 0,ttl:m,placementId:t,size:`${f}x${g}`,mediaType:h,displayFormat:v,connector:s,vendorId:y,demandSource:S,dealId:p,creativeId:u,refreshIndex:n,rawCpm:d,cpmKind:b?"net":"gross",currency:c,adjustedUsdCpm:O,rawUsdCpm:l,netUsdCpm:B,rawUsdIncrementCpm:U,netUsdIncrementCpm:N,campaignId:void 0,seatId:T,advertiserId:x,advertiserDomains:A,categoryIds:D?[D,...k]:[],pageLoadToImpInterval:"imp"===e.kind?a:void 0,preRenderDuration:"imp"===e.kind?(_=I,Jr[_]):void 0,postRenderDuration:"imp"===e.kind?Qr(I):void 0,userIdPartners:w,payloadBidRequestSize:C,payloadBidResponseSize:R,tags:E,adUnitPath:o};var _})(e):"auction"===e.kind||"page-view"===e.kind||"carbon-filtered-bid"===e.kind?e:"bid-response"===e.kind||"winning-bid"===e.kind||"rejected-bid"===e.kind?(e=>{const t=Xa(e)?e:e.bidResponse,{bidder:n,originalCpm:i,originalCurrency:r,cpm:a,creativeId:o,dealId:s,ttl:d,width:c,height:l,mediaType:u,displayFormat:p,isNetRevenue:m,vendorId:f,placementId:g,userIdPartners:h,requestSizes:b=[],requestDealIds:y=[],payloadBidRequestSize:v,payloadBidResponseSize:I}=t,{agencyId:w,advertiserId:S,advertiserDomains:C=[],primaryCatId:R,secondaryCatIds:E=[]}=t.meta??{},T=Xa(e)?void 0:e.cpmAdjustment;return{kind:e.kind,placementId:g,requestSizes:b.map((([e,t])=>`${e}x${t}`)),requestDealIds:y,connector:n,vendorId:f,refreshIndex:e.refreshIndex,demandSource:t.demandSource,latency:t.fetchDuration,ttl:d,size:`${c}x${l}`,dealId:s,creativeId:o,mediaType:u,displayFormat:p,rawCpm:i,cpmKind:m?"net":"gross",currency:r,adjustedUsdCpm:T?.adjustedCpm,rawUsdCpm:a,netUsdCpm:T?.netCpm,rawUsdIncrementCpm:T?.rawUsdIncrementCpm,netUsdIncrementCpm:T?.netUsdIncrementCpm,campaignId:void 0,seatId:w,advertiserId:S,advertiserDomains:C,categoryIds:R?[R,...E]:[],userIdPartners:h,payloadBidRequestSize:v,payloadBidResponseSize:I}})(e):"no-bid"===e.kind||"timeout"===e.kind?(e=>{const{bidder:t,vendorId:n,placementId:i,refreshIndex:r,userIdPartners:a,displayFormat:o,requestSizes:s=[],requestDealIds:d=[],mediaType:c,demandSource:l,payloadBidRequestSize:u,payloadBidResponseSize:p}=e;return{kind:e.kind,placementId:i,requestSizes:s.map((([e,t])=>`${e}x${t}`)),requestDealIds:d,connector:t,displayFormat:o,mediaType:c,vendorId:n,refreshIndex:r,demandSource:l,userIdPartners:a,payloadBidRequestSize:u,payloadBidResponseSize:p}})(e):void 0)(e);return t?[t]:[]})),tags:a}})(e):[])),errors:e.errors.map(Ka)}))({auctions:n,errors:this.#Hn.errors},{publisherId:this.#r.globalSettings.publisherId,source:"wrapper",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,version:nn.g,connectionSpeed:no()})};#Jn=async()=>{const e=this.#Yn();this.#Hn={events:{},errors:[]};const{collectRetryCount:t,collectRetryDelay:n,collectUrl:i}=this.#r.globalSettings.beam;if(e.auctions=e.auctions.filter((({events:e})=>e?.length>0)),0===e.auctions.length&&0===e.errors.length)return;eo(`Sending beam payload: ${i}`,e);let r=0,a=!1;do{a=r++<t;try{const t=await fetch(i,{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw new Error(`http status: ${t.statusText}`);eo("Beam payload sent",t);break}catch(t){Qa("Error sending beam payload",t),a?await(0,Vi.b)(n):Qa("Too much failures, gave up sending beam payload",e)}}while(a)};#Kn=({adId:e,kind:t})=>this.#Zn(e,t);#Zn=async(e,t)=>{const n=this.#Gn.renderRequestByContentId[e];if(!n)return Qa("Couldn't find renderRequest for bidResponse",e);const i=n.renderable.content.find((t=>t.bidResponse.bidId===e));if(!i)return Qa(`Couldn't find content for bidResponse ${e}`);const r=this.#Gn.auctions[n.auctionId];if(!r)return Qa(`Couldn't find auction for bidResponse ${e} - required for pageviewId`);const a=((e,t,n,i,r,a)=>{const{bidder:o,originalCpm:s,cpm:d,isNetRevenue:c,vendorId:l,userIdPartners:u,demandSource:p,tags:m}=e.bidResponse,{agencyId:f,advertiserId:g,advertiserDomains:h=[]}=e.bidResponse.meta??{},{auctionId:b,config:y}=i,{bidderTimeout:v}=y,{layout:I,networkCode:w,pageZone:S,publisherBrand:C,supportCode:R}=y.context,{cmpStatus:E,tcData:T}=t.consent??{},{adjustedCpm:x,netCpm:A}=e.cpmAdjustment;return{kind:a,publisherId:t.publisherId,pageViewId:n.pageViewId,auctionId:b,consentString:(0,st.b)(T),gdprApplies:T?.gdprApplies,cmpStatus:E,network:w,brand:C,support:R,zone:S,layout:I,page:Ha(),auctionTimeout:1e3*v,latency:e.bidResponse.fetchDuration,ttl:e.bidResponse.ttl,placementId:e.bidResponse.placementId,size:e.bidResponse.adSize,mediaType:"video",displayFormat:"outstream",connector:o,vendorId:l,demandSource:p,refreshIndex:r,dealId:e.bidResponse.dealId,creativeId:e.bidResponse.creativeId,rawCpm:s,cpmKind:c?"net":"gross",currency:e.bidResponse.currency,adjustedUsdCpm:x,rawUsdCpm:d,netUsdCpm:A,seatId:f,advertiserId:g,advertiserDomains:h,categoryIds:e.bidResponse.meta?.secondaryCatIds,tags:[...n.tags,...m??[]],userIdPartners:u,source:t.source,version:t.version,connectionSpeed:t.connectionSpeed,timezone:t.timezone}})(i,{publisherId:this.#r.globalSettings.publisherId,source:"wrapper",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,version:nn.g,connectionSpeed:no(),consent:this.#Gn.auctions[n.auctionId]?.consent},r,n,this.#Gn.adRequestsByPlacementId[n.renderable.placement.placementId]??0,t),o=this.#r.globalSettings.beam.vimpUrl;try{const e=new URL(o);for(const[t,n]of Object.entries(a))if(!io(n))if((0,At.c)(n))for(const i of n)e.searchParams.append(`${t}[]`,`${i}`);else e.searchParams.append(t,n);await fetch(e),eo("vimp recorded in beam")}catch(e){Qa("failed to send vimp to beam",e)}};#Qn=e=>{if(e.renderable.placement?.rendering?.renderer&&e.renderable.placement.rendering.renderer===Fi.a.dfp&&e.doc?.defaultView?.name)return e.doc.defaultView.name.replace("google_ads_iframe_","").replace(/(_[0-9]+)$/,"")};#te=(e,t)=>{const n=this.#Gn.renderRequestByContentId[t.renderable.content.bidResponse.bidId];if(!n)return Qa("couldn't find RenderRequest for impression event",t);const i=t.renderable.content.bidResponse.auctionId;if(!(i in this.#Gn.auctions))return(0,Si.a)(new wi.b(wi.a.beamError,"received an impression that has an unknown auctionId"));i in this.#Hn.events||(this.#Hn.events[i]=[]);const r=this.#Gn.adRequestsByPlacementId[t.renderable.placement.placementId]??0,a=this.#Qn(t);this.#Hn.events[i]?.push({adUnitPath:a,kind:e,timestamp:t.timestamp??Date.now(),renderTimestamp:n.timestamp,refreshIndex:r,placementId:t.renderable.placement.placementId,bidResponse:t.renderable.content.bidResponse,cpmAdjustment:t.renderable.content.cpmAdjustment,pageLoadToImpInterval:0===r&&"imp"===e?mn(performance.now()):void 0}),this.#Wn()};#Bt=e=>{const t=e.errors.map((e=>({...e,kind:"error"})));this.#Hn.errors.push(...t),this.#Wn()};#on=e=>{const{auctionId:t,config:n,consent:i}=e;if(this.#Gn.auctions[t]={pageViewId:pt.pageViewId,consent:i,auctionId:t,refreshConfig:n,tags:[]},n.refreshReason===Ut.b.pageView&&(this.#Xn.pageViews[t]={kind:"page-view",...Za(i)},this.#Gn.adRequestsByPlacementId={},this.#Gn.auctionsByPlacementId={}),n.refreshReason!==Ut.b.secondChance)for(const e of n.placements)(0,At.r)(this.#Gn.auctionsByPlacementId[e.placementId])?this.#Gn.auctionsByPlacementId[e.placementId]=0:this.#Gn.auctionsByPlacementId[e.placementId]+=1};#Tn=e=>{const t=e.auction.auctionId,n=this.#Gn.auctions[t];if(!n)return Qa("Received resolution of an auction that hasn't been initialized",e);n.tags=e.tags;const i=e.resolvedPlacements.flatMap((e=>{const t=this.#Gn.auctionsByPlacementId[e.placement.placementId]??0,n=[...e.bids.map((e=>({kind:"bid-response",refreshIndex:t,...e}))),...e.noBids.map((e=>({kind:"no-bid",refreshIndex:t,...e}))),...e.timeouts.map((e=>({kind:"timeout",refreshIndex:t,...e}))),...e.rejectedBids.map((e=>({kind:"rejected-bid",refreshIndex:t,...e}))),...this.#Xn.carbonFilteredBids.map((e=>({kind:"carbon-filtered-bid",refreshIndex:t,...e})))];return this.#Xn.carbonFilteredBids=[],n}),{});i.length>0&&(this.#Xn.auctions[t]={kind:"auction",preAuctionDuration:e.auction.preAuctionDuration,auctionDuration:e.auction.duration,postAuctionDuration:e.auction.postAuctionDuration,userIdPartners:e.auction.userIdPartners},this.#Xn.bids[t]=i)};#Ft=e=>{const t=new Set;for(const n of e.renderRequests){t.add(n.auctionId);for(const e of n.renderable.content)if(this.#Gn.renderRequestByContentId[e.bidResponse.bidId]=n,e.bidResponse.providerId===pi.a){const t=this.#Xn.bids[n.auctionId]?.find((t=>Wa(t)&&t.bidResponse.bidId===e.bidResponse.bidId));t?(t.kind="winning-bid",Ga(t)&&(t.cpmAdjustment=e.cpmAdjustment)):to("couldn't find bid response to set as winning bid")}}const n=t.size>0?t:new Set([...Object.keys(this.#Xn.auctions),...Object.keys(this.#Xn.pageViews),...Object.keys(this.#Xn.bids)]);for(const e of n){this.#Hn.events[e]||(this.#Hn.events[e]=[]);const t=this.#Xn.bids[e];t&&(delete this.#Xn.bids[e],this.#Hn.events[e]?.push(...t));const n=this.#Xn.auctions[e];n&&(delete this.#Xn.auctions[e],this.#Hn.events[e]?.push(n));const i=this.#Xn.pageViews[e];i&&(delete this.#Xn.pageViews[e],this.#Hn.events[e]?.push(i))}this.#Wn()};#zt=e=>{for(const t of e.renderable.content)this.#Gn.renderRequestByContentId[t.bidResponse.bidId]=e}}class ao{#ei;#ti;#ni;#ii;#ri;constructor(e,t){this.#ei=e,this.#ri=t,this.#ti=1e3*t}get remaining(){const e=this.#ni?Date.now()-this.#ni:0;return Math.max(0,(this.#ti-e)/1e3)}get isPaused(){return!this.#ii}pause=()=>{this.#ii&&this.#ni&&(clearTimeout(this.#ii),this.#ii=void 0,this.#ti-=Date.now()-this.#ni,this.#ni=void 0)};cancel=()=>{clearTimeout(this.#ii),this.#ai(1e3*this.#ri)};resume=()=>{this.#ii||(this.#ni=Date.now(),this.#ii=window.setTimeout((()=>{this.#ai(0),this.#ei()}),this.#ti))};#ai=e=>{this.#ti=e,this.#ni=void 0,this.#ii=void 0}}var oo=n(35);const{warn:so,info:co,debug:lo}=ot.a.tag("visibility");class uo{#r;#oi=new Map;#si=[];constructor(e){this.#r=e,this.#r.bus.on(rn.a.renderedImp,(e=>{Ui(e.renderable.content.bidResponse)&&"https://cdn.hubvisor.io/wrapper/common/player.js"===e.renderable.content.bidResponse.prebid.renderer?.url?this.#si.push(e.renderable):this.#di(e)})),this.#r.bus.on(rn.a.refresh,this.#ne),rr.a.on("outstream-imp",this.#ci)}#li=()=>{this.#oi.forEach((e=>{e.inView&&"visible"===document.visibilityState?e.timer.resume():e.timer.pause()}))};#ui=(0,ht.a)((()=>{document.addEventListener("visibilitychange",this.#li)}));#pi=(e,t)=>{for(const n of t){const t=this.#oi.get(n.target);t&&(t.inView=n.intersectionRatio>=e,t.inView?t.timer.resume():t.timer.pause())}};#mi=(0,ht.a)((()=>new IntersectionObserver((e=>{this.#pi(.5,e)}),{threshold:[0,.5,1]})));#fi=(0,ht.a)((()=>new IntersectionObserver((e=>{this.#pi(.5,e)}),{threshold:[0,.5,1]})));#gi=(e,t)=>{if(t){const e=document.querySelector(t);if(e)return e}return document.getElementById(e.placementId)??void 0};#hi=async({doc:e,frameElement:t},n)=>{const i=n.content.bidResponse,r=this.#r.globalSettings.bidderAliases;if(i.displayFormat===Ci.a.skin){const e=r[i.bidder]===It.a.Sublime||i.bidder===It.a.Sublime?"ayads-html":"hbv-custom-render",t=await(0,oo.b)((0,oo.a)({interval:.1,maxTryCount:10}),(()=>document.getElementById(e)??void 0));if(t)return t}if(i.displayFormat===Ci.a.outstream){let e;if(Ui(i)&&"https://cdn.hubvisor.io/wrapper/common/player.js"===i.prebid.renderer?.url){const e=n.placement.rendering?.outstream?.selector,t=await(0,oo.b)((0,oo.a)({interval:.1,maxTryCount:10}),(()=>{if(e){const t=document.querySelector(`${e} .hbv-player`);if(t)return t}return document.querySelector(`#${i.placementId} .hbv-player`)??void 0}))??this.#gi(i,e);if(t)return t}else{const t=(0,ta.isAmazonBidResponse)(i)?i.amazon.slotID:i.placementId;e=await(0,oo.b)((0,oo.a)({interval:.1,maxTryCount:10}),(()=>document.getElementById(t)??void 0))}if(e)return e}if(r[i.bidder]===It.a.ogury||i.bidder===It.a.ogury){const e=await(0,oo.b)((0,oo.a)({interval:.1,maxTryCount:10}),(()=>document.querySelector('div[id^="ogy-root-container"]')??void 0));if(e)return e}const a=t??e?.defaultView?.frameElement,o=e?.querySelector(".hbv-sandbox");return o?await(0,oo.b)((0,oo.a)({interval:.1,maxTryCount:300}),(()=>e?.querySelector(".hbv-ready")??void 0))?a?.parentElement??void 0:void 0:a?.parentElement??void 0};#bi=e=>e.content.bidResponse.displayFormat===Ci.a.outstream?{duration:2,intersectionObserver:this.#fi()}:{duration:1,intersectionObserver:this.#mi()};#yi=(e,t,n)=>{this.#ui(),this.#oi.set(e,{inView:!1,timer:new ao((()=>{co(`Impression visible for ${t.duration}s for placement ${n.placement.placementId}`,e),this.#r.bus.emit(rn.a.visibleImp,{renderable:n,timestamp:Date.now()});const i=this.#oi.get(e);i&&this.#vi(i)}),t.duration),params:t,renderable:n,element:e}),t.intersectionObserver.observe(e),this.#Ii().observe(e.parentElement,{childList:!0}),co(`Measuring visibility for placement ${n.placement.placementId}`,e),this.#r.bus.emit(rn.a.measuredImp,{renderable:n,timestamp:Date.now()})};#di=async({doc:e,frameElement:t,renderable:n})=>{const i=await this.#hi({doc:e,frameElement:t},n);if(!i)return so(`couldn't measure visibility for ${n.placement.placementId}`);const r=this.#oi.get(i);r&&(lo(`Resetting visibility state for ${n.placement.placementId}`),this.#vi(r));const a=this.#bi(n);this.#yi(i,a,n)};#ci=async({adId:e,kind:t})=>{if("video-imp"!==t)return;const n=this.#si.find((t=>t.content.bidResponse.bidId===e));if(!n)return so(`couldn't retrieve renderable for video-imp ${e}`);this.#di({renderable:n})};#ne=e=>{e.refreshConfig.refreshReason===Ut.b.pageView&&(this.#oi.forEach(this.#vi),this.#oi.clear())};#vi=e=>{lo(`Disposing visibility listener for ${e.renderable.placement.placementId}`),this.#oi.delete(e.element),e.params.intersectionObserver.unobserve(e.element)};#Ii=(0,ht.a)((()=>new MutationObserver((e=>{for(const{removedNodes:t}of e)for(const e of t)if((0,zi.f)(e)){const t=this.#oi.get(e);t&&this.#vi(t)}}))))}const{warn:po,info:mo}=ot.a.tag("hubvisor"),fo=(0,ht.a)((({options:e,refresh:t})=>{mo(`Hubvisor ${nn.g} (${nn.a}) started`);const n=new Ea.TinyEmitter,i=new gt(e),r={bus:n,globalSettings:i},a=new Ra(r),o={bus:n,settings:i,prebid:new qi(r),renderer:new da(r),bidder:new ha(r),renderList:new wa(r),errorHandler:a,beam:new ro(r),visibility:new uo(r)};return((e,t)=>{_a(t),ia.b("ready",(e=>e)),ia.b("refresh",Pa),ia.b("adServerRender",(({document:t,adId:n,pgAdId:i,context:r})=>{e.renderer.adServerCallback(t,n,i,r)})),ia.b("autorefresh:exclude-placements",Ma),ia.b("autorefresh:unexclude-placements",Va),Ta.adServerRender=(e,t,n)=>{po("DEPRECATED: \"Hubvisor('adServerRender', { document: doc, adId, context })\" is the new way of performing this action"),ia.a("adServerRender",{document:e,adId:t,context:n})}})(o,t),Aa(),(e=>{e.settings.amazon?.pubId&&nt.then((()=>{})),e.settings.ias?.anId&&Promise.all([it,rt]).then((([e,t])=>{}))})(o),o}));var go=n(56),ho=n(63);const bo=[],yo=(0,pn.a)((async()=>{const e=new Set(bo.map((e=>e.getSlotElementId())));bo.length=0,await rs(Ut.b.secondChance,e),(0,go.b)((t=>t.pubads().refresh([...e])))}),.5),vo=e=>{bo.push(e),(0,ho.c)("slot refreshed:",e.getSlotElementId()),yo()},Io=(0,ht.a)((e=>{(0,go.b)((t=>{t.pubads().addEventListener("slotRenderEnded",(t=>{if(t.isEmpty){if(!(0,ho.d)(e,t.slot))return;const[n]=t.slot.getTargeting(ho.e);if("boolean"===e.mode)"true"!==n&&(t.slot.setTargeting(ho.e,"true"),vo(t.slot));else{const i=Number(n);isNaN(i)?(t.slot.setTargeting(ho.e,"0"),vo(t.slot)):i+1<e.maxCount&&(t.slot.setTargeting(ho.e,`${i+1}`),vo(t.slot))}}}))}))})),wo=new wr.a;(()=>{const e=e=>{wo.dispatch("ad",e)};(0,go.c)((t=>{t.events.on("ad",e)}))})();const So=(e,t)=>{const n={},i=[];for(const r of e)try{const e=r.data.timestamp,{formats:i,siteId:a,pageId:o,target:s}=r.data.ad;for(const{tagId:r,id:d}of i){if(!t.has(r)&&!t.has(`${d}`))continue;const i=n[r];(!i||i.timestamp<e)&&(n[r]={timestamp:e,siteId:a,pageId:`${o}`,formatId:`${d}`,target:s,tagId:r})}}catch(e){i.push(e)}if(i.length>0)throw new Error(`Failed to retrieve Smart's events history: ${i.join(", ")}`);return Object.values(n).filter(At.i)},Co=e=>Object.entries(e).reduce(((e,[t,n])=>{if((0,At.j)(n))return e;const i=(0,Nt.a)(n);if(0===i.length)return e.push(t),e;for(const n of i)if(""===n)e.push(t);else{const i=`${n}`.replace(/ /g,"_");e.push(`${t}=${i}`)}return e}),[]).join(";"),Ro=e=>{const t=Co(e.strings),n=Co(e.numbers),i=[t];return n.length>0&&i.push(n),i.join("|")},Eo=e=>{const[t={},n={}]=e.split("|").map((e=>(e??"").split(";").reduce(((e,t)=>{const[n,i]=t.split("=");return n&&(e[n]||(e[n]=[]),(0,At.i)(i)&&e[n]?.push(i)),e}),{})));return{strings:t,numbers:n}},To=[],xo=(0,pn.a)((async()=>{const e=[...To],t=new Set(To.map((([{formatId:e}])=>e)));To.length=0,await rs(Ut.b.secondChance,t),(0,go.c)((t=>{for(const[{siteId:n,pageId:i,formatId:r},a]of e)t.clean(r),t.call("std",{siteId:n,pageId:parseInt(i,10),formatId:r,target:Ro(a)})}))}),.5),Ao=(e,t)=>{To.push([e,t]),(0,ho.c)("formatId refreshed:",e.formatId),xo()},Do=e=>{for(const t of Object.keys(e.strings).filter((e=>/^hbv?_/.test(e))))delete e.strings[t];for(const t of Object.keys(e.numbers).filter((e=>/^hbv?_/.test(e))))delete e.numbers[t]},ko=(0,ht.a)((e=>{e.enabled&&!na.a&&((0,ho.c)(`setup started (${e.adserver})`),"dfp"!==e.adserver&&"both"!==e.adserver||Io(e),"smart"!==e.adserver&&"both"!==e.adserver||(e=>{wo.on("noad",(async t=>{const n=[];if(!(0,ho.d)(e,t.tagId))return;try{const e=window.sas?.events.history("call")??[],i=new Set([t.tagId]);n.push(...So(e,i))}catch(e){return(0,ho.b)("Error related to sas events history usage: aborting",e)}(0,ho.a)("lastCalls:",n);const i=n[0];if(!i)return(0,ho.f)("couldn't match elements to update with calls history");const r=Eo(i.target);if("boolean"===e.mode){const e=r.strings[ho.e]?.[0];"true"!==e&&(Do(r),r.strings[ho.e]="true",Ao(i,r))}else{const t=parseInt(`${r.numbers[ho.e]?.[0]}`,10);Do(r),isNaN(t)?(r.numbers[ho.e]="0",Ao(i,r)):t+1<e.maxCount&&(r.numbers[ho.e]=`${t+1}`,Ao(i,r))}}))})(e))}));var Oo=n(25);const{debug:Bo}=ot.a.tag("intrastitial"),Uo=new Oo.a(!0);let No,_o;const Po=(0,ht.a)((e=>{{if(!e||e.periodicity<0)return;const t=e=>(0,At.m)(e)&&(0,At.l)(e.visits);_o=new Et.a({name:"intrastitial",expirationInterval:e.sessionDuration??2592e3,storageType:()=>(0,Tt.a)({name:"intrastitial"}),stream:()=>Uo,validator:t}),Bo("starting intrastitial"),No=e,_o.updatedValue()}})),jo=(e,t=new Map)=>{if(!(0,At.m)(e)&&!(0,At.c)(e))return e;const n=t.get(e);if(!(0,At.r)(n))return n;const i=(e=>{switch(e.constructor){case String:return new String(e);case Number:return new Number(e);case Boolean:return new Boolean(+e);case Date:return new Date(+e);case RegExp:return new RegExp(e.source,/\w*$/.exec(e));case Array:return[];case Set:return new Set;case Map:return new Map;case Object:return{};default:throw new Error(`unsupported type to clone: ${e.constructor}`)}})(e);return t.set(e,i),((e,t,n)=>{switch(t.constructor){case Array:t.forEach((t=>e.push(n(t))));break;case Set:t.forEach((t=>e.add(n(t))));break;case Map:t.forEach(((t,i)=>e.set(i,n(t))));break;case Object:Object.entries(t).forEach((([t,i])=>{e[t]=n(i)}))}})(i,e,(e=>jo(e,t))),i},$o=jo;var qo=n(95);const Fo=e=>e.toLowerCase().replace(/ /g,"").replace(/_/g,"-"),zo=e=>{if(!St.remoteConfiguration.currentValue?.publisherConfiguration?.cleanr?.callRates)return;if(!(({placement:e,carbonFilterSettings:t,refreshOptions:n})=>{if(!t){const t=St.remoteConfiguration?.currentValue?.publisherConfiguration?.cleanr?.configs;return!!t&&!t.every((({placementIds:t,enabled:n,customTargeting:i})=>!n||t&&!t.includes(e.placementId)||!$t(i)))}return!!t.enabled&&(!t.allowedContexts||t.allowedContexts.some((t=>!(t.supports&&!t.supports.includes(n.context.supportCode)||t.placements&&!t.placements.includes(e.placementId)||t.devices&&!t.devices.includes(wt.b)))))})(e))return;const{placement:t,refreshOptions:n}=e,{contextDimensions:i,dimensionValues:r,rates:a}=St.remoteConfiguration.currentValue.publisherConfiguration.cleanr.callRates,o=((e,t,n,i)=>{const{context:r}=t,a=(new Date).getUTCHours(),o=Fo(r.supportCode),s=Fo(wt.b),d=Fo(Dt.currentValue?.ua?.os?.name??""),c=Fo(Dt.currentValue?.ua?.browser?.name?.toLowerCase()??""),l=(0,Bt.a)()?(0,Bt.b)()?"consentless":"consent":"consentless",u=Fo(e.placementId),p="page-view"!==t.refreshReason?"true":"false",m={hourOfDay:()=>a,consent:()=>i.consent?.indexOf(l),uaDevice:()=>i.uaDevice?.indexOf(s),uaDeviceOs:()=>i.uaDeviceOs?.indexOf(d),isRefresh:()=>i.isRefresh?.indexOf(p),uaBrowser:()=>i.uaBrowser?.indexOf(c),placementId:()=>i.placementId?.indexOf(u),support:()=>i.support?.indexOf(o)};return n.map((e=>{const t=m[e];return t?t():"-1"})).join("/")})(t,n,i,r);return a[o]},Mo=(e,t,n)=>{const i=t[n.indexOf(e.bidder)];if(!i||0===i)return!0;const r=i/100;return(0,qo.a)({value:!0,weight:r},{value:!1,weight:1-r})},Vo=e=>Object.entries(e).flatMap((([e,t])=>t?[e]:[])),Lo=e=>{try{return new RegExp(e).test(location.href)}catch{return!1}},Wo=({priceFloor:e,currency:t="USD"})=>"USD"!==t&&e?e/(St.remoteConfiguration.currentValue?.currencies.rates.USD?.[t]??1):e,Go=e=>{const{pageZones:t,layouts:n,placementIds:i,supportCodes:r,isConsentless:a,urlMatching:o,allowedDisplayFormats:s,allowedSizes:d,allowedCustomFormats:c,viewability:l,countries:u,customTargeting:p}=e;return e.conditions&&0!==e.conditions.length?e:{...e,conditions:[{pageZones:t,layouts:n,placementIds:i,supportCodes:r,isConsentless:a,urlMatching:o,allowedDisplayFormats:s,allowedSizes:d,allowedCustomFormats:c,viewability:l,countries:u,customTargeting:p}]}},Xo=(e,t)=>e.conditions.reduce(((e,n)=>{var i,r;return((e,t)=>!_t(e.placementIds)||(0,Nt.a)(e.placementIds).includes(t.placementId))(n,t)&&(i=n,r=t.bidRequest.mediaTypes.banner?.sizes,!i.allowedSizes||i.allowedSizes.some((e=>{const[t,n]=e.split("x");return r?.some((([e,i])=>e===Number(t)&&i===Number(n)))})))&&((e,t)=>!e.allowedCustomFormats||e.allowedCustomFormats.some((e=>e===t)))(n,t.rendering?.outstream?.hbvFormat)&&e.push(n),e}),[]),Ho=(e,t)=>{const n=(0,At.r)(e)?1:"btf"===e?2:3;return((0,At.r)(t)?1:"btf"===t?2:3)-n},Ko=(e,t)=>{if(!e.viewability)return[e];if(!t.position||(0,At.q)(t.position))return Ho(e.viewability,t.position)>=0?[e]:[];let n=e.allowedDisplayFormats??[Ci.a.instream,Ci.a.outstream,Ci.a.banner,Ci.a.native,Ci.a.skin];const i=n.length;return Ho(e.viewability,t.position?.banner)<0&&(n=n.filter((e=>e!==Ci.a.banner&&e!==Ci.a.native&&e!==Ci.a.skin))),Ho(e.viewability,t.position?.video)<0&&(n=n.filter((e=>!(e===Ci.a.instream||e===Ci.a.outstream)))),n.length===i?[e]:n.length>0?(e.allowedDisplayFormats=n,[e]):[]},Jo=e=>{const t=new Set;for(const n of e.conditions)n.allowedDisplayFormats?.forEach((e=>t.add(e)));return t.size?[...t]:void 0},Yo=e=>{const t=e.find((e=>!_t(e.mediaTypes)||(0,Nt.a)(e.mediaTypes).includes("video"))),n=e.find((e=>!_t(e.mediaTypes)||(0,Nt.a)(e.mediaTypes).includes("banner")));return{banner:n?.fold,video:t?.fold}},Zo=(e,t,n)=>{for(const i of t){if(!_t(i.displayFormats))return!1;const t=(0,Nt.a)(i.displayFormats);if(e.overrideMediaTypes){const n=Vo(e.overrideMediaTypes);if(t.some((e=>n.includes(e))))for(const[n,i]of Object.entries(e.overrideMediaTypes))i&&t.includes(n)&&delete e.overrideMediaTypes[n]}else if(e.allowedMediaTypes)e.allowedMediaTypes=e.allowedMediaTypes.filter((e=>!t.includes(e)));else if(t.some((e=>n.includes(e)))){const i=n.reduce(((e,n)=>(t.includes(n)||e.push(n),e)),[]);e.allowedMediaTypes=i}}return!0};var Qo=n(72);const{warn:es,error:ts}=ot.a.tag("hubvisor");let ns,is;const rs=async(e,t=new Set)=>{if(!ns)return ts("init must be called before refresh");const{bus:n,bidder:i,settings:r}=ns;e===Ut.b.pageView&&pt.newPageViewId();const a=await(async e=>{try{return await(async e=>{const{consent:t}=e;if(!t.enabled)return ct("consent module was disabled in the configuration! the bidders won't be able to obtain user consent");dt("started turbocmp");const n=await at.a.updatedValue();if(n?.tcData)((e,t)=>{const n=Object.assign({},t.defaults,e,t.overrides);Oe.e.setConsentData(n)})({apiVersion:2,consentString:n.tcData.tcString,vendorData:n.tcData,gdprApplies:n.tcData.gdprApplies,addtlConsent:n.tcData.addtlConsent},t),lt("tcf consent data is ready",n.tcData);else{if(t.shouldSkipAuctionOnConsentFailure)throw new Error("No consent available: auction should be skipped");ct("consent couldn't be retrieved: bidders won't be able to obtain user consent")}if(t.shouldSkipAuctionOnNegativeConsent&&!(0,st.c)(n?.tcData,st.a.storageAccess))throw new Error("No storage purpose available: auction should be skipped")})(e),Qo.a.provide(et.getUserIdsAsEids),!0}catch(e){return es("Failed retrieving user consent; auction will be aborted",e),!1}})(r),o=await(async(e,t,n)=>{const i=performance.now();t===Ut.b.pageView&&(()=>{{if(!No)return;const e=(_o?.currentValue?.visits??0)+1;Bo(`incrementing intrastitial visits to ${e}`),Uo.next({visits:e})}})();const[r]=await Promise.allSettled([Dt.updatedValue(),St.remoteConfiguration.updatedValue()]),a="fulfilled"===r.status?r.value:void 0;Gt();const o=await e.buildRefreshOptions({clientCtx:a,refreshReason:t,requestedPlacements:n});(0,Rt.b)("bidder-timeout")&&(o.bidderTimeout=(0,Rt.b)("bidder-timeout"));const s=(e=>{if(!ns)return ts("init must be called before the placement customization"),[];const{bus:t,settings:n}=ns,i=(()=>{{if(!No||No.periodicity<0)return!1;let e;if(No.externalVisitsProvider)try{e=No.externalVisitsProvider()}catch(t){reportError(new wi.b(wi.a.visitsProviderError,t)),e=_o?.currentValue?.visits}else e=_o?.currentValue?.visits;return!(!e||e<=0)&&e%No.periodicity==0}})()?e.placements:e.placements.filter((e=>"intrastitial"!==e.rendering?.format));return(e=>{const{placements:t,refreshOptions:n,bus:i,carbonFilterSettings:r}=e,{context:a}=n,o=St.remoteConfiguration.currentValue?.publisherConfiguration?.bidders?.filter((e=>((e,t)=>e.disabled&&(!_t(e.pageZones)||(0,Nt.a)(e.pageZones).includes(t.pageZone))&&(!_t(e.layouts)||(0,Nt.a)(e.layouts).includes(t.layout))&&(!_t(e.supportCodes)||(0,Nt.a)(e.supportCodes).includes(t.supportCode))&&((0,At.j)(e.isConsentless)||e.isConsentless===(0,Bt.b)())&&((0,At.j)(e.devices)||(0,Nt.a)(e.devices).includes(wt.b))&&(nn.d||!1===e.enabledBehindFlag)&&Pt(e))(e,a)))??[],s=St.remoteConfiguration.currentValue?.publisherConfiguration?.deals?.map(Go).reduce(((e,t)=>{const n=((e,t)=>e.conditions.filter((n=>(!_t(n.pageZones)||(0,Nt.a)(n.pageZones).includes(t.pageZone))&&(!_t(n.layouts)||(0,Nt.a)(n.layouts).includes(t.layout))&&(!_t(n.supportCodes)||(0,Nt.a)(n.supportCodes).includes(t.supportCode))&&((0,At.j)(n.isConsentless)||n.isConsentless===(0,Bt.b)())&&(!_t(n.urlMatching)||(0,Nt.a)(n.urlMatching).every(Lo))&&$t(e.customTargeting)&&Pt(n))))(t,a);return n&&n.length>0&&e.push({...t,conditions:n}),e}),[])??[],d=St.remoteConfiguration.currentValue?.publisherConfiguration?.folds?.filter((e=>((e,t)=>(!_t(e.pageZones)||(0,Nt.a)(e.pageZones).includes(t.pageZone))&&(!_t(e.devices)||(0,Nt.a)(e.devices).includes(t.layout))&&(!_t(e.supportCodes)||(0,Nt.a)(e.supportCodes).includes(t.supportCode)))(e,a)))??[];if(0===o.length&&0===s.length&&0===d.length&&!St.remoteConfiguration?.currentValue?.publisherConfiguration?.cleanr?.callRates)return t;const c=$o(t);for(const e of c){const t=o.filter((t=>!_t(t.placementIds)||(0,Nt.a)(t.placementIds).includes(e.placementId))),a=zo({placement:e,carbonFilterSettings:r,refreshOptions:n}),c=s.reduce(((t,n)=>{const i=Xo(n,e);return i&&i.length>0&&t.push({...n,conditions:i}),t}),[]),l=d.filter((t=>!_t(t.placementIds)||(0,Nt.a)(t.placementIds).includes(e.placementId)));if(e.position||(e.position=Yo(l)),c.length>0){const t=c.reduce(((t,n)=>(n.conditions=n.conditions?.flatMap((t=>Ko(t,e))),n.conditions&&n.conditions.length>0&&t.push(n),t)),[]);t.length>0&&(e.bidRequest.deals=[...e.bidRequest.deals??[],...t.map((e=>({name:e.name,priceFloor:Wo(e),allowedDisplayFormats:Jo(e)})))])}if(0===t.length&&!a)continue;const u=Vo(e.bidRequest.mediaTypes),p=St.remoteConfiguration?.currentValue?.publisherConfiguration?.cleanr?.callRates?.bidders;e.bidRequest.bids=e.bidRequest.bids.filter((n=>{const r=t.filter((e=>!_t(e.bidders)||(0,Nt.a)(e.bidders).includes(n.bidder)));if(!1===(0===r.length||Zo(n,r,u)))return!1;if(!a||!p)return!0;const o=Mo(n,a,p);return!1===o&&i.emit(rn.a.carbonFilteredBid,{connector:n.bidder,placementId:e.placementId}),o}))}return c})({placements:i,refreshOptions:e,bus:t,carbonFilterSettings:n.carbonFilter})})(o);((e,t,n)=>{for(const i of n){const{bidRequest:n}=i;if(n.ortb2Imp?.ext?.gpid)continue;const r=`${t}-${e.supportCode}-${e.layout}-${e.pageZone}-${i.placementId}`;n.ortb2Imp={...n.ortb2Imp,ext:{...n.ortb2Imp?.ext,gpid:r}}}})(o.context,e.publisherId,s);const d=o.bidderTimeout??e.bidderTimeout,c=new Ut.a({...o,placements:s,bidderTimeout:d});return Zr.config(performance.now()-i),c})(r,e,t),s=(0,ut.b)(),d=new Promise((e=>{const t=i=>{i.auctionIds.has(s)&&(e(),n.off(rn.a.renderRequested,t))};n.on(rn.a.renderRequested,t)}));return i.start({refreshConfig:o,shouldContinueAuction:a,auctionId:s}),d};n(98);const as="USD",os={image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1},cta:{required:!1}},ss={code:"adyoulike",gvlid:259,supportedMediaTypes:[f.b,f.c,f.d],aliases:["ayl"],isBidRequestValid:function(e){const t=ps(us(e)),n=t.width>0&&t.height>0;return e.params&&e.params.placement&&(n||e.mediaTypes&&e.mediaTypes.native)},buildRequests:function(e,t){e=(0,d.b)(e);let n,i=!1;const r={Version:"1.0",Bids:e.reduce(((e,t)=>{let r=(d=t,(0,a.a)(d,"mediaTypes.banner")?f.b:(0,a.a)(d,"mediaTypes.video")?f.d:(0,a.a)(d,"mediaTypes.native")?f.c:void 0),o=us(t),s=ps(o);var d;if(e[t.bidId]={},e[t.bidId].PlacementID=t.params.placement,e[t.bidId].TransactionID=t.ortb2Imp?.ext?.tid,e[t.bidId].Width=s.width,e[t.bidId].Height=s.height,e[t.bidId].AvailableSizes=o.join(","),"function"==typeof t.getFloor&&(e[t.bidId].Pricing=function(e,t,n){const i=e.getFloor({currency:as,mediaType:n,size:[t.width,t.height]});if(!isNaN(i.floor)&&i.currency===as)return i.floor}(t,s,r)),t.schain&&(e[t.bidId].SChain=t.schain),!n&&t.userIdAsEids&&t.userIdAsEids.length&&(n=t.userIdAsEids),r===f.c){let n=t.mediaTypes.native;"image"===n.type&&(n=Object.assign({},os,n)),n.clickUrl={required:!0},e[t.bidId].Native=n}if(r===f.d){i=!0,e[t.bidId].Video=t.mediaTypes.video;const n=t.mediaTypes.video.playerSize;Array.isArray(n)&&!Array.isArray(n[0])&&(e[t.bidId].Video.playerSize=[n])}return e}),{}),PageRefreshed:ds()};t.gdprConsent&&(r.gdprConsent={consentString:t.gdprConsent.consentString,consentRequired:"boolean"==typeof t.gdprConsent.gdprApplies?t.gdprConsent.gdprApplies:null}),t.uspConsent&&(r.uspConsent=t.uspConsent),t.ortb2&&(r.ortb2=t.ortb2),n&&(r.eids=n),r.pbjs_version="8.30.0";const o=JSON.stringify(r);return{method:"POST",url:cs(e,t,i),data:o,options:{withCredentials:!0}}},interpretResponse:function(e,t){const n=[];var i={};try{i=JSON.parse(t.data).Bids}catch(e){}return e.body.forEach((e=>{const t=function(e,t){if(!e||!e.Ad&&!e.Native&&!e.Vast)return;const n=t&&t[e.BidID];n&&(e.Width&&"0"!==e.Width||(e.Width=n.Width),e.Height&&"0"!==e.Height||(e.Height=n.Height));const i={requestId:e.BidID,ttl:3600,creativeId:e.CreativeID,cpm:e.Price,netRevenue:!0,currency:as,meta:e.Meta||{advertiserDomains:[]}},r=e.Vast;return r?(i.width=e.Width,i.height=e.Height,i.vastXml=window.atob(r),i.mediaType="video"):n.Native?(i.native=function(e,t){if("object"==typeof e.Native)return e.Native;const n={};var i={},r={};if("string"==typeof e.Ad){i=JSON.parse(e.Ad.match(/\/\*PREBID\*\/(.*)\/\*PREBID\*\//)[1]),r=i.Content.Preview.Text;var o=i.TrackingPrefix+"/pixel?event_kind=IMPRESSION&attempt="+i.Attempt,s=i.TrackingPrefix+"/pixel?event_kind=INSERTION&attempt="+i.Attempt;i.Campaign&&(o+="&campaign="+i.Campaign,s+="&campaign="+i.Campaign),n.clickUrl=i.TrackingPrefix+"/ar?event_kind=CLICK&attempt="+i.Attempt+"&campaign="+i.Campaign+"&url="+encodeURIComponent(i.Content.Landing.Url),i.OnEvents?(n.clickTrackers=gs(i.OnEvents.CLICK),n.impressionTrackers=gs(i.OnEvents.IMPRESSION),n.javascriptTrackers=gs(i.OnEvents.IMPRESSION,!0)):n.impressionTrackers=[],n.impressionTrackers.push(o,s)}return Object.keys(t).map((function(o){switch(o){case"title":n[o]=r.TITLE;break;case"body":n[o]=r.DESCRIPTION;break;case"cta":n[o]=r.CALLTOACTION;break;case"sponsoredBy":n[o]=i.Content.Preview.Sponsor.Name;break;case"image":const s=t.image.sizes||[];s.length||(s[0]=e.Width||300,s[1]=e.Height||250);const d=fs(i,(0,a.a)(i,"Content.Preview.Thumbnail.Image"),s[0],s[1]);d&&(n[o]={url:d,width:s[0],height:s[1]});break;case"icon":const c=t.icon.sizes||[];c.length||(c[0]=50,c[1]=50);const l=fs(i,(0,a.a)(i,"Content.Preview.Sponsor.Logo.Resource"),c[0],c[1]);l&&(n[o]={url:l,width:c[0],height:c[1]});break;case"privacyIcon":n[o]=fs(i,(0,a.a)(i,"Content.Preview.Credit.Logo.Resource"),25,25);break;case"privacyLink":n[o]=(0,a.a)(i,"Content.Preview.Credit.Url")}})),n}(e,n.Native),i.mediaType="native"):(i.width=e.Width,i.height=e.Height,i.ad=e.Ad),i}(e,i);t&&n.push(t)})),n},getUserSyncs:function(e,t,n,i,r){if(!e.iframeEnabled)return[];let a="";return n&&(a+="&gdpr="+(n.gdprApplies?1:0),a+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),!0===p.b.getConfig("coppa")&&(a+="&coppa=1"),i&&(a+="&us_privacy="+encodeURIComponent(i)),r?.gppString&&r?.applicableSections?.length&&(a+="&gpp="+encodeURIComponent(r.gppString),a+="&gpp_sid="+encodeURIComponent(r?.applicableSections?.join(","))),[{type:"iframe",url:`https://visitor.omnitagjs.com/visitor/isync?uid=19340f4f097d16f41f34fc0274981ca4${a}`}]}};function ds(){try{if(performance&&performance.navigation)return performance.navigation.type===performance.navigation.TYPE_RELOAD}catch(e){}return!1}function cs(e,t,n){let i=function(e){let t=(0,u.b)(e,(e=>e.params.DC));return t?"-"+t.params.DC:""}(e);const a=n?"/hb-api/prebid-video/v1":"/hb-api/prebid/v1";return(0,r.c)({protocol:"https",host:`hb-api${i}.omnitagjs.com`,pathname:a,search:ls(t)})}function ls(e){const t={};if(e){const n=e.refererInfo;n&&(n.location&&(t.RefererUrl=encodeURIComponent(n.location),n.reachedTop||(t.SafeFrame=!0)),t.PageUrl=encodeURIComponent(n.topmostLocation),t.PageReferrer=encodeURIComponent(n.location));const i=e.ortb2?.site;i&&(t.PageUrl=encodeURIComponent(i.page||n?.topmostLocation),t.PageReferrer=encodeURIComponent(i.ref||n?.location))}const n=e?.refererInfo?.canonicalUrl;return n&&(t.CanonicalUrl=encodeURIComponent(n)),t}function us(e){let t=e.sizes||[];return e.mediaTypes&&e.mediaTypes.banner&&(t=e.mediaTypes.banner.sizes||[]),e.params&&Array.isArray(e.params.size)&&(t=e.params.size,Array.isArray(t[0])||(t=[t])),(0,r.ab)(t)}function ps(e){const t={},n=e[0];if("string"!=typeof n)return t;const i=n.toUpperCase().split("X"),r=parseInt(i[0],10);r&&(t.width=r);const a=parseInt(i[1],10);return a&&(t.height=a),t}function ms(e){return e?"https://blobs.omnitagjs.com/blobs/"+e.substr(16,2)+"/"+e.substr(16)+"/"+e:""}function fs(e,t,n,i){let r="";if(t&&t.Kind)switch(t.Kind){case"INTERNAL":r=ms(t.Data.Internal.BlobReference.Uid);break;case"EXTERNAL":const a=e.DynamicPrefix;let o=t.Data.External.Url;if(o=o.replace(/\[height\]/i,""+i),o=o.replace(/\[width\]/i,""+n),o.indexOf(a)>=0){const e=/.*url=([^&]*)/gm.exec(o);r=e?e[1]:"",r||(r=ms(/.*key=([^&]*)/gm.exec(o)[1]))}else r=o}return r}function gs(e,t){const n=[];return e?(e.map((e=>{(t&&"JAVASCRIPT_URL"===e.Kind||!t&&"PIXEL_URL"===e.Kind)&&n.push(e.Url)})),n):n}(0,tt.b)(ss);const hs={},bs=e=>({url:"https://cdn.hubvisor.io/wrapper/common/player.js",render(t){const n=((e,t)=>Object.values(hs).map((n=>n.canRender(e,t)?n.createRenderCmd(e,t):void 0)).find(At.i))(t,e)??(()=>{const n=Xr.read(t.adUnitCode),i=document.querySelector(e.selector??`#${t.adUnitCode}`)??n?.document.body,r={vastXml:t.vastXml,vastUrl:t.vastUrl,targetWidth:t.width,targetHeight:t.height,renderContext:n,...e,onEvent:(n,i)=>e.onEvent?.(t,n,i)};(0,nr.a)(i??`#${t.adUnitCode}`,r)});this.push(n)}}),ys=e=>bs({expand:Fi.b.noLazyLoad,onEvent:(e,t)=>{switch(t){case"impression":case"first-quartile":case"midpoint":case"third-quartile":case"complete":rr.a.emit("outstream-imp",{adId:e.adId,kind:"impression"===t?"video-imp":t})}},...e}),vs=e=>(0,At.m)(e)&&(0,At.n)(e.mimesTypes,(0,At.h)(At.d,At.q))&&(0,At.n)(e.minDuration,At.l)&&(0,At.n)(e.maxDuration,At.l)&&(0,At.n)(e.startDelay,At.l)&&(0,At.n)(e.fitHeight,At.l)&&(0,At.n)(e.maxWidth,At.l)&&(0,At.n)(e.targetRatio,At.l)&&(0,At.n)(e.containerSelector,At.q)&&(0,At.n)(e.placement,At.q)&&(0,At.n)(e.isReplayable,At.e),Is=e=>{return(0,At.m)(e)&&(0,At.q)(e.name)&&(0,At.n)(e.isGuaranteed,At.e)&&((0,At.n)(e.priceFloor,At.l)||(t=e.priceFloor,(0,At.m)(t)&&(e=>{const t=["video","banner","native"];return Object.getOwnPropertyNames(e).every((e=>t.includes(e)))})(t)&&(0,At.n)(t.native,At.l)&&(0,At.n)(t.video,At.l)&&(0,At.n)(t.banner,At.l)));var t};var ws=n(60),Ss=n(61);const Cs={api:[ws.a.vpaid10,ws.a.vpaid20,ws.a.mraid1,ws.a.mraid2,ws.a.mraid3,ws.a.omid1],linearity:2,mimes:["video/mp4","video/ogg","video/webm","application/javascript"],maxduration:30,minduration:1,protocols:[Ss.a.vast10,Ss.a.vast20,Ss.a.vast30,Ss.a.vast40,Ss.a.vast10Wrapper,Ss.a.vast20Wrapper,Ss.a.vast30Wrapper,Ss.a.vast40Wrapper,Ss.a.vast41,Ss.a.vast41Wrapper,Ss.a.vast42,Ss.a.vast42Wrapper],startdelay:0,placement:3,plcmt:4,playbackmethod:[2,3,4],skip:Wt.b.yes,pos:0},Rs={...Cs,linearity:1,placement:1,plcmt:1},Es=(e,t,n)=>{for(const i of e)i.hbvMetadata={...t,...n}},Ts=(e,t)=>Object.fromEntries(Object.entries({...e,...t}).filter((([,e])=>(0,At.c)(e)&&e.length||(0,At.i)(e)))),xs=(e,t,n,i,r,a)=>{na.a||(Es(i,{displayFormat:Ci.a.outstream,mediaType:hi,requestSizes:[n.playerSize]},a),e.push({adUnitCode:t,mediaTypes:{video:{...Ts(Cs,n.openRtbParams),context:"outstream",playerSize:[n.playerSize]}},playerConfig:{expand:Fi.b.noLazyLoad,...r},renderer:ys(r),bids:i}))},As=(e,t,n,i,r)=>{Es(i,{displayFormat:Ci.a.instream,mediaType:hi,requestSizes:[n.playerSize]},r),e.push({adUnitCode:t,mediaTypes:{video:{playerSize:[n.playerSize],context:"instream",...Ts(Rs,n.openRtbParams)}},bids:i})},Ds=(e,t,n,i,r)=>{Es(n,{displayFormat:Ci.a.native,mediaType:gi},r),e.push({adUnitCode:t,mediaTypes:{native:i&&!(0,At.e)(i)?i:{type:"image"}},bids:n})},ks=e=>1===e.length&&1800===e[0][0]&&1e3===e[0][1],Os=(e,t,n,i,r)=>{Es(i,{displayFormat:ks(n)?Ci.a.skin:Ci.a.banner,mediaType:fi,requestSizes:n},r),e.push({adUnitCode:t,mediaTypes:{banner:{sizes:n}},bids:i})},Bs=e=>{const t=[];return e.banner&&t.push(...e.banner.sizes),e.skin&&t.push([1800,1e3]),t};kt.a.add(It.a.Adyoulike,((e,{placement:t,bid:n,resolvedMediaTypes:i})=>{if(i.nativeBanner||i.banner){const i=(e=>(0,At.m)(e)&&(0,At.p)(e.forcedSize))(r=n.formatterParams)?[r.forcedSize]:[[1,1]];Os(e,t.placementId,i,[{bidder:n.bidder,params:n.params}],{displayFormat:Ci.a.nativeBanner})}var r;i.native&&Ds(e,t.placementId,[{bidder:n.bidder,params:n.params}],i.native),i.outstream&&xs(e,t.placementId,i.outstream,[{bidder:n.bidder,params:n.params}],t.rendering?.outstream)})),kt.b.add(It.a.Adyoulike,ss.gvlid);const Us={code:"hubvisor",supportedMediaTypes:[gi,fi,hi],isBidRequestValid:e=>!!(0,At.m)(e.params)&&!!(0,At.n)(e.params.cpm,At.l),buildRequests:e=>nn.c?e.map((e=>{const t={requestId:e.bidId,type:fi,size:[300,250],cpm:10};e.params.type&&(t.type=e.params.type),e.params.cpm&&(t.cpm=e.params.cpm),t.type===fi&&e.mediaTypes.banner&&(t.size=e.mediaTypes.banner.sizes[0]??[300,250]),(e.mediaTypes.native||t.type===gi)&&(t.size=[1,1],t.type=gi),(e.mediaTypes.video||t.type===hi)&&(t.size=e.mediaTypes.video?.playerSize[0]??[640,480],t.type=hi),e.params.size&&(t.size=e.params.size),e.params.bannerHtml&&(t.bannerHtml=e.params.bannerHtml);const n=new Blob([JSON.stringify(t)],{type:"application/json"});return{method:"GET",url:URL.createObjectURL(n)}})):[],interpretResponse(e){const t=e.body,[n,i]=t.size,r={requestId:t.requestId,cpm:t.cpm,width:n,height:i,creativeId:"test",dealId:void 0,currency:"USD",netRevenue:!0,ttl:300,mediaType:t.type};return t.type===hi?r.vastUrl="https://cache-service.hubvisor.io/?crid=hbv-test":t.type===gi?r.native={body:"Profitez des offres Hubvisor. Avec Hubvisor, bnficiez d'avantages exclusifs. Cliquez sur cette publicit pour en dcouvrir plus",clickUrl:"https://www.hubvisor.io",cta:"Click for More",icon:{width:32,height:32,url:"https://cdn.hubvisor.io/assets/hubvisor-icon.png"},image:{width:200,height:200,url:"https://cdn.hubvisor.io/assets/hubvisor-image-colored.png"},sponsoredBy:"Hubvisor",title:"Hubvisor",impressionTrackers:[],javascriptTrackers:nn.f?['<script>console.debug("Hubvisor native tracking set up");<\/script>']:[],price:"10"}:t.type===fi&&(r.ad=(({width:e,height:t,bannerHtml:n})=>n||(1800===e&&1e3===t?'<a href="https://www.psg.fr/" target="_blank"><img id="hbv" src="https://cdn.hubvisor.io/assets/hubvisor-skin.png"/></a>':`\n  <style>\n  a { text-decoration: none; }\n  #hbv {\n    background: #fa709a;\n    background: linear-gradient(to bottom, #fa709a 0%, #fee140 100%);\n    width:${e}px;\n    height:${t}px;\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    color:#fff;\n    font-weight:bold;\n    font-size:2em;\n    text-align:center;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"\n  }\n  </style>\n  <a href="https://www.psg.fr/" target="_blank">\n    <div id="hbv">\n      TEST<br/>\n      ${e}x${t}\n    </div>\n  </a>\n  <script>\n  if (window.$sf) {\n    console.log('[hubvisor] safeframe detected')\n    window.$sf.ext.register(${e}, ${t}, (...args) => {\n      console.log('[hubvisor] safeframe updated: ', ...args)\n    })\n  }\n  <\/script>\n  `))({width:n,height:i,bannerHtml:t.bannerHtml})),[r]}};(0,tt.b)(Us),kt.a.add("hubvisor",((e,{placement:t,bid:n,resolvedMediaTypes:i})=>{if(nn.c){if(i.banner||i.skin){const r=Bs(i);Os(e,t.placementId,r,[{bidder:n.bidder,params:n.params}])}i.native&&Ds(e,t.placementId,[{bidder:n.bidder,params:n.params}],i.native),i.outstream&&xs(e,t.placementId,i.outstream,[{bidder:n.bidder,params:n.params}],t.rendering?.outstream),i.instream&&As(e,t.placementId,i.instream,[{bidder:n.bidder,params:n.params}])}}));var Ns=n(87);function _s(e,t){return Object.keys(e).forEach((n=>{var i,a;t[n]&&((0,r.M)(e[n])?t[n]=e[n](t[n]):t[n]=(i=e[n],a=t[n],"string"===i?a&&a.toString():"number"===i?Number(a):a),isNaN(t[n])&&delete t.key)})),t}const Ps="ix",js="roundel",$s=[f.b,f.d,f.c],qs=[144,144],Fs={JPY:1},zs={PBJS:"p",IX:"x"},Ms={BID_SIZE_INVALID_FORMAT:1,BID_SIZE_NOT_INCLUDED:2,PROPERTY_NOT_INCLUDED:3,SITE_ID_INVALID_VALUE:4,BID_FLOOR_INVALID_FORMAT:5,IX_FPD_EXCEEDS_MAX_SIZE:6,EXCEEDS_MAX_SIZE:7,PB_FPD_EXCEEDS_MAX_SIZE:8,VIDEO_DURATION_INVALID:9},Vs={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},Ls={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","utiq.com":"","criteo.com":"","euid.eu":"","intimatemerger.com":"","33across.com":"","liveintent.indexexchange.com":"","google.com":""},Ws=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],Gs=["mimes","minduration","maxduration"],Xs=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],Hs="ixdiag",Ks=`${Ps}_features`;let Js=!1;const Ys=(0,se.b)({bidderCode:Ps}),Zs={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat"],featureToggles:{},isFeatureEnabled:function(e){return(0,a.a)(this.featureToggles,`features.${e}.activated`,!1)},getFeatureToggles:function(){if(Ys.localStorageIsEnabled()){const e=(0,r.fb)(Ys.getDataFromLocalStorage(Ks));(0,a.a)(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){const t=e.body,n=new Date,i=(0,a.a)(t,"ext.features");i&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:i},Ys.localStorageIsEnabled()&&Ys.setDataInLocalStorage(Ks,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},Ys.localStorageIsEnabled()&&Ys.removeDataFromLocalStorage(Ks)}};let Qs=0,ed="",td="",nd=!1;function id(e){const t=rd(e,f.d),n=(0,a.a)(e,"mediaTypes.video"),i=(0,a.a)(e,"params.video");if(cd(n,i).length)return{};t.video=i?(0,r.j)(e.params.video):{};let s=(0,a.a)(e,"ortb2Imp.ext.tid");s&&(0,o.a)(t,"ext.tid",s),function(e,t){if((0,a.a)(t,"mediaTypes.video.context")===Ue.b){let n=(0,a.a)(t,"mediaTypes.video.renderer");if(n||(n=(0,a.a)(t,"renderer")),(0,a.a)(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(n&&"object"==typeof n){if(void 0!==n.url){let t="";try{t=new URL(n.url).hostname}catch{return}t.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=n.url}}else e.displaymanager="ix"}}(t,e),hd(t,e);for(const e in n)-1===Xs.indexOf(e)||t.video.hasOwnProperty(e)||(t.video[e]=n[e]);if(t.video.minduration>t.video.maxduration)return(0,r.U)(`IX Bid Adapter: video minduration [${t.video.minduration}] cannot be greater than video maxduration [${t.video.maxduration}]`,{bidder:Ps,code:Ms.VIDEO_DURATION_INVALID}),{};const d=i&&i.context||n&&n.context;if(function(e){e.video.hasOwnProperty("plcmt")&&(!(0,r.O)(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&((0,r.X)(`IX Bid Adapter: video.plcmt [${e.video.plcmt}] must be an integer between 1-4 inclusive`),delete e.video.plcmt)}(t),d&&!t.video.hasOwnProperty("placement")&&(d===Ue.a?t.video.placement=1:d===Ue.b?(0,a.a)(i,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,nd=!0):(0,r.X)(`IX Bid Adapter: Video context '${d}' is not supported`)),!t.video.w||!t.video.h){const n=ld((0,a.a)(t,"video.playerSize"))||ld((0,a.a)(e,"params.size"));if(!n)return(0,r.X)("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=n[0],t.video.h=n[1]}return ad(e,t,f.d),t}function rd(e,t){const n={};if(n.id=e.bidId,Ad()&&(0,a.a)(e,"params.externalId")&&(0,o.a)(n,"ext.externalID",e.params.externalId),(0,a.a)(e,`params.${t}.siteId`)&&!isNaN(Number(e.params[t].siteId)))switch(t){case f.b:(0,o.a)(n,"ext.siteID",e.params.banner.siteId.toString());break;case f.d:(0,o.a)(n,"ext.siteID",e.params.video.siteId.toString());break;case f.c:(0,o.a)(n,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&(0,o.a)(n,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(0,o.a)(n,"ext.sid",String(e.params.id)),n}function ad(e,t,n){let i=null,a=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(i={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,r.M)(e.getFloor)){let i="*",o="*";if(n&&(0,r.g)($s,n)){const{w:e,h:r}=t[n];i=n,o=[e,r]}try{a=e.getFloor({mediaType:i,size:o})}catch(e){(0,r.X)("priceFloors module call getFloor failed, error : ",e)}}let s=!1;a?(t.bidfloor=a.floor,t.bidfloorcur=a.currency,(0,o.a)(t,"ext.fl",zs.PBJS),s=!0):i&&(t.bidfloor=i.floor,t.bidfloorcur=i.currency,(0,o.a)(t,"ext.fl",zs.IX),s=!0),s&&(n==f.b?((0,o.a)(t,"banner.ext.bidfloor",t.bidfloor),(0,o.a)(t,"banner.ext.fl",t.ext.fl)):n==f.d?((0,o.a)(t,"video.ext.bidfloor",t.bidfloor),(0,o.a)(t,"video.ext.fl",t.ext.fl)):((0,o.a)(t,"native.ext.bidfloor",t.bidfloor),(0,o.a)(t,"native.ext.fl",t.ext.fl)))}function od(e,t,n){const i={},o=!(!(0,a.a)(e,"exp")||!(0,r.O)(e.exp)),s=(0,a.a)(e,"dealid")||(0,a.a)(e,"ext.dealid");Fs.hasOwnProperty(t)?i.cpm=e.price/Fs[t]:i.cpm=e.price/100,i.requestId=e.impid,s&&(i.dealId=s),i.netRevenue=!0,i.currency=t,i.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2!=e.mtype||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(i.vastUrl=e.ext.vasturl):i.vastXml=e.adm;let d=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{d=JSON.parse(e.adm)}catch(e){(0,r.X)("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(i.width=n.video.w,i.height=n.video.h,i.mediaType=f.d,i.mediaTypes=n.mediaTypes,i.ttl=o?e.exp:3600):d&&d.native?(i.native={ortb:d.native},i.width=e.w?e.w:1,i.height=e.h?e.h:1,i.mediaType=f.c,i.ttl=o?e.exp:3600):(i.ad=e.adm,i.width=e.w,i.height=e.h,i.mediaType=f.b,i.ttl=o?e.exp:300),i.meta={},i.meta.networkId=(0,a.a)(e,"ext.dspid"),i.meta.brandId=(0,a.a)(e,"ext.advbrandid"),i.meta.brandName=(0,a.a)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(i.meta.advertiserDomains=e.adomain),i}function sd(e){return Array.isArray(e)&&2===e.length&&(0,r.O)(e[0])&&(0,r.O)(e[1])}function dd(e=[],t=[]){if(sd(e))return e[0]===t[0]&&e[1]===t[1];for(let n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function cd(e,t){const n=[];e||(0,r.X)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(let i of Gs){const r=e&&e.hasOwnProperty(i),a=t&&t.hasOwnProperty(i);r||a||n.push(`IX Bid Adapter: ${i} is not included in either the adunit or params level`)}const i=e&&e.hasOwnProperty("protocol"),a=e&&e.hasOwnProperty("protocols"),o=t&&t.hasOwnProperty("protocol"),s=t&&t.hasOwnProperty("protocols");return i||a||o||s||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function ld(e=[]){return sd(e)?e:!!sd(e[0])&&e[0]}function ud(e,t,n){if(e)return{...(0,u.b)(n,(t=>t.bidId===e)),...(0,u.b)(t,(t=>t.id===e))}}function pd(e,t,n){let i=function(e){let t=[],n={};if((0,r.I)(e))for(const i of e)Ls.hasOwnProperty(i.source)&&(0,a.a)(i,"uids.0")&&(n[i.source]=!0,""!=Ls[i.source]&&(i.uids[0].ext={rtiPartner:Ls[i.source]}),delete i.uids[0].atype,t.push(i));return{toSend:t,seenSources:n}}((0,a.a)(e,"0.userIdAsEids")),s=i.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){let n=window.headertag.getIdentityInfo();if(n&&"object"==typeof n)for(const i in n)if(n.hasOwnProperty(i)){let r=n[i];!r.responsePending&&r.data&&"object"==typeof r.data&&Object.keys(r.data).length&&!t.seenSources[r.data.source]&&e.push(r.data)}}(s,i),t&&t.bidderCode===js&&!i.seenSources["liveramp.com"])return[];const d=[];let c=function(e){const t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=Ys.localStorageIsEnabled(),t.imp=[],t.at=1,t}(e);c=function(e,t){return t.length>0&&(e.ext.features={},t.forEach((t=>{e.ext.features[t]={activated:Zs.isFeatureEnabled(t)}}))),e}(c,Zs.REQUESTED_FEATURE_TOGGLES);let l=function(e,t){var n=e.map((e=>e.adUnitCode)).filter(((e,t,n)=>n.indexOf(e)===t));let i={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"8.30.0",userIds:yd(e[0]),url:window.location.href.split("?")[0],vpd:nd,ae:t};for(let t of n){let n=e.filter((e=>e.adUnitCode===t))[0];(0,a.a)(n,"mediaTypes")&&(Object.keys(n.mediaTypes).length>1&&i.mfu++,(0,a.a)(n,"mediaTypes.native")&&i.nu++,(0,a.a)(n,"mediaTypes.banner")&&i.bu++,"outstream"===(0,a.a)(n,"mediaTypes.video.context")&&(i.ou++,xd(n)&&(i.ren=!0)),"instream"===(0,a.a)(n,"mediaTypes.video.context")&&i.iu++,i.allu++)}return i}(e,(0,a.a)(t,"fledgeEnabled"));for(var u in l)c.ext.ixdiag[u]=l[u];c=function(e,t,n,i,o){const s=(0,a.a)(t,"timeout");s&&(e.ext.ixdiag.tmax=s),p.b.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=p.b.getConfig("userSync").syncsPerBidder);const d=function(){if(!Ys.localStorageIsEnabled())return;const e={};let t;try{t=JSON.parse(Ys.getDataFromLocalStorage(Hs)||"{}")}catch(e){return(0,r.U)("ix can not read ixdiag from localStorage."),null}return Object.keys(t).forEach((n=>{Object.keys(t[n]).forEach((i=>{"number"==typeof t[n][i]&&(e[i]=e[i]?e[i]+t[n][i]:t[n][i])}))})),e}();return(0,r.L)(d)||(e.ext.ixdiag.err=d),e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:t?.ortb2?.source?.tid},i[0].schain&&(e.source.ext={},e.source.ext.schain=i[0].schain),o.length>0&&(e.user={},e.user.eids=o),document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer),e}(c,t,n,e,s),c=function(e,t){if(t){t.gdprConsent&&(ed=t.gdprConsent,ed.hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:ed.gdprApplies?1:0}}),ed.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:ed.consentString||""},ed.hasOwnProperty("addtlConsent")&&ed.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:ed.addtlConsent}))),t.uspConsent&&((0,o.a)(e,"regs.ext.us_privacy",t.uspConsent),td=t.uspConsent);const n=(0,a.a)(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&((0,o.a)(e,"regs.gpp",t.gppConsent.gppString),(0,o.a)(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return p.b.getConfig("coppa")&&(0,o.a)(e,"regs.coppa",1),e}(c,t),e[0].params.siteId&&(Qs=e[0].params.siteId);const m=Object.keys(n);let f=!1;for(let i=0;i<m.length&&!(d.length>=4);i++){c=md(n,m,c,i);const o=(0,a.a)(t,"ortb2")||{},s={...o.site||o.context};s.page=fd(t);const l={...o.user};(0,r.L)(o)||f||(c=gd(t,c,o,s,l),c.site=(0,r.Z)({},c.site,s),c.user=(0,r.Z)({},c.user,l),f=!0),c=bd(n,c,m,i);const u=i===m.length-1;if(c=Nd(c),c=Od(c),c=Bd(c),u){let t="https://htlb.casalemedia.com/openrtb/pbjs?";0!==Qs&&(t+=`s=${Qs}`),Ad()&&(t+=0!==Qs?"&":"",t+=`p=${p.b.getConfig("exchangeId")}`),d.push({method:"POST",url:t,data:(0,r.j)(c),option:{contentType:"text/plain"},validBidRequests:e}),c.imp=[],f=!1}}return d}function md(e,t,n,i){const s=e[t[i]],{missingImps:d=[],ixImps:c=[]}=s,l={ixImps:c,missingBannerImpressions:d},u=Object.keys(l).map((e=>l[e])).filter((e=>Array.isArray(e))).reduce(((e,t)=>e.concat(...t)),[]),p=e[t[i]].gpid,m=e[t[i]].dfp_ad_unit_code,g=e[t[i]].tid,h=e[t[i]].sid,b=e[t[i]].ae,y=u.filter((e=>f.b in e)),v=u.filter((e=>!(f.b in e)));if(y.length>0){const s=y.reduce(((e,t)=>(e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e)),{});for(const d in s){const c=s[d],{id:l,banner:{topframe:u}}=c[0];let f=(0,a.a)(c[0],"ext.externalID");const y={id:l,banner:{topframe:u,format:c.map((({banner:{w:e,h:t},ext:n})=>({w:e,h:t,ext:n})))}};for(let e=0;e<y.banner.format.length;e++)null!=y.banner.format[e].ext&&(null!=y.banner.format[e].ext.sid&&delete y.banner.format[e].ext.sid,null!=y.banner.format[e].ext.externalID&&delete y.banner.format[e].ext.externalID),"bidfloor"in c[e]&&(y.banner.format[e].ext.bidfloor=c[e].bidfloor),"{}"===JSON.stringify(y.banner.format[e].ext)&&delete y.banner.format[e].ext;const v=e[t[i]].pos;(0,r.O)(v)&&(y.banner.pos=v),(m||p||g||h||b||f)&&(y.ext={},y.ext.dfp_ad_unit_code=m,y.ext.gpid=p,y.ext.tid=g,y.ext.sid=h,y.ext.externalID=f,1==b&&(y.ext.ae=1)),"bidfloor"in c[0]&&(y.bidfloor=c[0].bidfloor),"bidfloorcur"in c[0]&&(y.bidfloorcur=c[0].bidfloorcur);const I=e[t[i]].adUnitFPD;I&&(0,o.a)(y,"ext.data",I),n.imp.push(y)}}return v.length>0&&v.forEach((e=>{if(p&&(0,o.a)(e,"ext.gpid",p),n.imp.length>0){let t=!1;n.imp.forEach((i=>{e.id===i.id&&f.d in e?(i.video=e.video,i.video.ext=Object.assign({},e.video.ext,e.ext),(0,a.a)(i,"video.ext.bidfloor",!1)&&(0,a.a)(i,"bidfloor",!1)&&i.video.ext.bidfloor<i.bidfloor&&(i.bidfloor=i.video.ext.bidfloor),!(0,a.a)(i,"ext.siteID",!1)&&(0,a.a)(e,"video.ext.siteID")&&((0,o.a)(i,"ext.siteID",e.video.ext.siteID),(0,o.a)(n,"ext.ixdiag.usid",!0)),t=!0):e.id===i.id&&f.c in e&&(i.native=e.native,i.native.ext=Object.assign({},e.native.ext,e.ext),(0,a.a)(i,"native.ext.bidfloor",!1)&&(0,a.a)(i,"bidfloor",!1)&&i.native.ext.bidfloor<i.bidfloor&&(i.bidfloor=i.native.ext.bidfloor),!(0,a.a)(i,"ext.siteID",!1)&&(0,a.a)(e,"native.ext.siteID",!1)&&((0,o.a)(i,"ext.siteID",e.native.ext.siteID),(0,o.a)(n,"ext.ixdiag.usid",!0)),t=!0)})),t||n.imp.push(e)}else n.imp.push(e)})),n}function fd(e){const t=e&&e.bidderCode||"ix",n=p.b.getConfig(t);let i="";return i=(0,a.a)(e,"ortb2.site.page")?e.ortb2.site.page:(0,a.a)(e,"refererInfo.page"),n&&"object"==typeof n.firstPartyData?function(e,t,n){let i;try{i=new URL(t)}catch(n){(0,r.X)(`IX Bid Adapter: Invalid URL set in ortb2.site.page: ${t}. Using referer URL instead.`),i=new URL((0,a.a)(e,"refererInfo.page"))}const o=new URLSearchParams(i.search);for(const[e,t]of Object.entries(n))o.has(e)||o.append(e,t);return i.search=o.toString(),i.toString()}(e,i,n.firstPartyData):i}function gd(e,t,n,i,a){if(t.ext.ixdiag.fpd=!0,Object.keys(i).forEach((e=>{-1===Vs.SITE.indexOf(e)&&delete i[e]})),Object.keys(a).forEach((e=>{-1===Vs.USER.indexOf(e)&&delete a[e]})),n.device){const e={...n.device.sua};(0,r.L)(e)||(0,o.a)(t,"device.sua",e)}return n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&(0,o.a)(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&(0,o.a)(t,"regs.gpp_sid",n.regs.gpp_sid)),t}function hd(e,t){const n=(0,a.a)(t,"ortb2Imp.ext.data");n&&(0,o.a)(e,"ext.data",n)}function bd(e,t,n,i){const r=e[n[i]].pbadslot,a=e[n[i]].tagId,o=e[n[i]].adUnitCode,s=e[n[i]].divId;return(r||a||o||s)&&(t.ext.ixdiag.pbadslot=r,t.ext.ixdiag.tagid=a,t.ext.ixdiag.adunitcode=o,t.ext.ixdiag.divId=s),t}function yd(e){const t=e.userId||{};return Ws.filter((e=>t[e]))}function vd(e,t){if(t)for(let n=0;n<e.length;n++){const i=e[n];if(t[0]===i[0]&&t[1]===i[1]){e.splice(n,1);break}}}function Id(e,t){const n=function(e){const t=rd(e,f.c),n=e.nativeOrtbRequest;n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"};let i=(0,a.a)(e,"ortb2Imp.ext.tid");return i&&(0,o.a)(t,"ext.tid",i),hd(t,e),ad(e,t,f.c),t}(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=(0,a.a)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,a.a)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,a.a)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,a.a)(e,"params.tagId");const i=e.adUnitCode,r=document.getElementById(i)?i:(0,Ns.a)(i).divId;t[e.adUnitCode].adUnitCode=i,t[e.adUnitCode].divId=r}}function wd(e,t){const n=id(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=(0,a.a)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,a.a)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,a.a)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,a.a)(e,"params.tagId");const i=e.adUnitCode,r=document.getElementById(i)?i:(0,Ns.a)(i).divId;t[e.adUnitCode].adUnitCode=i,t[e.adUnitCode].divId=r}}function Sd(e,t,n,i){let o=function(e){const t=rd(e,f.b);t.banner={},t.adunitCode=e.adUnitCode;const n=(0,a.a)(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=(0,r.B)()?0:1,ad(e,t,f.b),t}(e);const s=dd((0,a.a)(e,"mediaTypes.banner.sizes"),(0,a.a)(e,"params.size"));if(n.hasOwnProperty(e.adUnitCode)||(n[e.adUnitCode]={}),n[e.adUnitCode].gpid=(0,a.a)(e,"ortb2Imp.ext.gpid"),n[e.adUnitCode].dfp_ad_unit_code=(0,a.a)(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.adUnitCode].tid=(0,a.a)(e,"ortb2Imp.ext.tid"),n[e.adUnitCode].pbadslot=(0,a.a)(e,"ortb2Imp.ext.data.pbadslot"),n[e.adUnitCode].tagId=(0,a.a)(e,"params.tagId"),n[e.adUnitCode].pos=(0,a.a)(e,"mediaTypes.banner.pos"),(0,a.a)(i,"fledgeEnabled")){const t=(0,a.a)(e,"ortb2Imp.ext.ae");t?(0,r.O)(t)?n[e.adUnitCode].ae=t:(0,r.X)("error setting auction environment flag - must be an integer"):1==(0,a.a)(i,"defaultForSlots")&&(n[e.adUnitCode].ae=1)}const d=(0,a.a)(e,"ortb2Imp.ext.data");d&&(n[e.adUnitCode].adUnitFPD=d);const c=(0,a.a)(e,"params.id");!c||"string"!=typeof c&&"number"!=typeof c||(n[e.adUnitCode].sid=String(c));const l=e.adUnitCode,u=document.getElementById(l)?l:(0,Ns.a)(l).divId;n[e.adUnitCode].adUnitCode=l,n[e.adUnitCode].divId=u,s&&(n[e.adUnitCode].hasOwnProperty("ixImps")||(n[e.adUnitCode].ixImps=[]),n[e.adUnitCode].ixImps.push(o)),function(e,t,n){if(t.hasOwnProperty(e.adUnitCode)){let n=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(n=t[e.adUnitCode].missingSizes),vd(n,e.params.size),t[e.adUnitCode].missingSizes=n}else if((0,a.a)(e,"mediaTypes.banner.sizes")){let i=(0,r.j)(e.mediaTypes.banner.sizes);vd(i,e.params.size);let a={missingSizes:i,impression:n};t[e.adUnitCode]=a}}(e,t,o)}function Cd(e,t,n){const i=(0,r.j)(t);return i.banner.w=n[0],i.banner.h=n[1],ad(e,i,f.b),i}function Rd(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===Ps&&function(e){if(!Ys.localStorageIsEnabled())return;let t;try{t=JSON.parse(Ys.getDataFromLocalStorage(Hs)||"{}")}catch(e){(0,r.X)("ix can not read ixdiag from localStorage.")}const n=new Date;if(Object.keys(t).map((e=>{const i=new Date(e);i.setDate(i.getDate()+7)-n<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===Ps){const i=n.toISOString().slice(0,10),r=e.arguments[1].code;r&&(t[i]=t[i]||{},Number(t[i][r])||(t[i][r]=0),t[i][r]++)}Ys.setDataInLocalStorage(Hs,JSON.stringify(t))}(e)}function Ed(e){e.renderer.push((function(){const t=e.adUnitCode,n=document.getElementById(t)?t:(0,Ns.a)(t).divId;n?window.createIXPlayer(n,e):(0,r.X)(`IX Bid Adapter: adUnitCode: ${n} not found on page.`)}))}function Td(e,t){const n=m.a.install({id:e,url:t,loaded:!1});try{n.setRender(Ed)}catch(e){return(0,r.X)("Prebid Error calling setRender on renderer",e),null}return t?n:((0,r.X)("Outstream renderer URL not found"),null)}function xd(e){if("outstream"!==(0,a.a)(e,"mediaTypes.video.context"))return!1;let t=(0,a.a)(e,"mediaTypes.video.renderer");return t||(t=(0,a.a)(e,"renderer")),!("object"==typeof t&&t.url&&t.render)||t.backupOnly}function Ad(){let e=p.b.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}const Dd={code:Ps,gvlid:10,aliases:[{code:js,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:$s,isBidRequestValid:function(e){Js||(s.on(c.EVENTS.AUCTION_DEBUG,Rd),s.on(c.EVENTS.AD_RENDER_FAILED,Rd),Js=!0);const t=(0,a.a)(e,"params.video"),n=(0,a.a)(e,"params.size"),i=(0,a.a)(e,"mediaTypes.banner.sizes"),o=(0,a.a)(e,"mediaTypes.video"),d=(0,a.a)(e,"mediaTypes.video.playerSize"),l=e.params.hasOwnProperty("bidFloor"),u=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,r.g)($s,e.mediaType))return(0,r.X)("IX Bid Adapter: media type is not supported."),!1;if((0,a.a)(e,"mediaTypes.banner")&&!i)return!1;if(n){const t=ld(n);if(!t)return(0,r.U)("IX Bid Adapter: size has invalid format.",{bidder:Ps,code:Ms.BID_SIZE_INVALID_FORMAT}),!1;if(!dd(e.sizes,t)&&!dd(d,t)&&!dd(i,t))return(0,r.U)("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:Ps,code:Ms.BID_SIZE_NOT_INCLUDED}),!1}if(!Ad()&&null==e.params.siteId)return(0,r.U)("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,r.U)("IX Bid Adapter: siteId must be string or number type.",{bidder:Ps,code:Ms.SITE_ID_INVALID_VALUE}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,r.U)("IX Bid Adapter: siteId must valid value",{bidder:Ps,code:Ms.SITE_ID_INVALID_VALUE}),!1}if((l||u)&&!(l&&u&&function(e,t){return Boolean("number"==typeof e&&"string"==typeof t&&t.match(/^[A-Z]{3}$/))}(e.params.bidFloor,e.params.bidFloorCur)))return(0,r.U)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:Ps,code:Ms.BID_FLOOR_INVALID_FORMAT}),!1;if(o&&t){const n=id(e).video,i=cd(o,t);if((0,a.a)(e,"mediaTypes.video.context")===Ue.b&&xd(e)&&n){const e=[(0,a.a)(n,"w"),(0,a.a)(n,"h")];if(!(e[0]>=qs[0]&&e[1]>=qs[1]))return(0,r.U)(`IX Bid Adapter: ${e} is an invalid size for IX outstream renderer`),!1}if(i.length)return i.forEach((e=>{(0,r.U)(e,{bidder:Ps,code:Ms.PROPERTY_NOT_INCLUDED})})),!1}return function(e){return void 0===(0,a.a)(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},resetSiteID:function(){Qs=0},buildRequests:function(e,t){const n=[],i={},o={},s={},d={};Zs.getFeatureToggles(),e.forEach((e=>{const n=Object.keys((0,a.a)(e,"mediaTypes",{}));for(const a in n)switch(n[a]){case f.b:Sd(e,d,i,t);break;case f.d:wd(e,o);break;case f.c:Id(e,s);break;default:(0,r.X)(`IX Bid Adapter: ad unit mediaTypes ${a} is not supported`)}}));for(let t in d)if(d.hasOwnProperty(t)){let n=d[t].missingSizes;i.hasOwnProperty(t)||(i[t]={}),i[t].hasOwnProperty("missingImps")||(i[t].missingImps=[],i[t].missingCount=0);let r=d[t].impression;for(let a=0;a<n.length;a++){let o=Cd(e[0],r,n[a]);i[t].missingImps.push(o),i[t].missingCount++}}let c=[];return Object.keys(i).length>0&&c.push(i),Object.keys(o).length>0&&c.push(o),Object.keys(s).length>0&&c.push(s),Zs.isFeatureEnabled("pbjs_enable_multiformat")?n.push(...pd(e,t,function(e){const t={};return e.forEach((e=>{Object.keys(e).forEach((n=>{Object.keys(t).includes(n)?t[n].hasOwnProperty("ixImps")&&e[n].hasOwnProperty("ixImps")?t[n].ixImps=[...t[n].ixImps,...e[n].ixImps]:t[n].hasOwnProperty("missingImps")&&e[n].hasOwnProperty("missingImps")?t[n].missingImps=[...t[n].missingImps,...e[n].missingImps]:e[n].hasOwnProperty("ixImps")?t[n].ixImps=e[n].ixImps:e[n].hasOwnProperty("missingImps")&&(t[n].missingImps=e[n].missingImps):t[n]=e[n]}))})),t}(c))):(Object.keys(i).length>0&&n.push(...pd(e,t,i)),Object.keys(o).length>0&&n.push(...pd(e,t,o)),Object.keys(s).length>0&&n.push(...pd(e,t,s))),n},interpretResponse:function(e,t){const n=[];let i=null,o=(0,a.a)(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(Zs.setFeatureToggles(e),!e.hasOwnProperty("body"))return n;const s=e.body,d=s.seatbid||[];for(let e=0;e<d.length;e++){if(!d[e].hasOwnProperty("bid"))continue;const o=d[e].bid,c=t.data;for(let e=0;e<o.length;e++){const r=ud(o[e].impid,c.imp,t.validBidRequests);if(i=od(o[e],s.cur,r),i.mediaType===f.d&&xd(r)){const t=(0,a.a)(s,"ext.videoplayerurl");if(i.renderer=Td(o[e].bidId,t),!i.renderer)continue}n.push(i)}if((0,a.a)(c,"ext.ixdiag.err")&&Ys.localStorageIsEnabled())try{Ys.removeDataFromLocalStorage(Hs)}catch(e){(0,r.U)("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(o)&&o.length>0))return n;o=o.filter((e=>!!function(e){return"object"==typeof e&&null!==e}(e)||((0,r.X)("Malformed auction config detected:",e),!1)));try{return{bids:n,fledgeAuctionConfigs:o}}catch(e){return(0,r.X)("Error attaching AuctionConfigs",e),n}},transformBidParams:function(e){return _s({siteID:"number"},e)},getUserSyncs:function(e,t){const n=[];let i=null;if(t.length>0&&(i=(0,a.a)(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==i&&0==i)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{let e=null;p.b.getConfig("userSync")&&(e=p.b.getConfig("userSync").syncsPerBidder),0===e&&(e=i),e=i&&(0===e||e)?i>e?e:i:1;for(let t=0;t<e;t++)n.push({type:"image",url:kd(e,t)})}return n}};function kd(e,t){let n="",i="0";return ed&&ed.hasOwnProperty("gdprApplies")&&(i=ed.gdprApplies?"1":"0"),ed&&ed.hasOwnProperty("consentString")&&(n=ed.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==Qs?"&site_id="+Qs.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+i+"&gdpr_consent="+n+"&us_privacy="+(td||"")}function Od(e){return e.imp.forEach(((t,n)=>{const i=t.ext;if(null==i)return e;Ud(t)<2||Object.keys(i).forEach((r=>{if(f.b in t){const a=t.banner.ext;if(void 0!==a&&void 0!==a[r]&&a[r]==i[r]&&delete e.imp[n].banner.ext[r],void 0!==t.banner.format)for(let a=0;a<t.banner.format.length;a++)null!=t.banner.format[a].ext&&null!=t.banner.format[a].ext[r]&&t.banner.format[a].ext[r]==i[r]&&delete e.imp[n].banner.format[a].ext[r]}if(f.d in t){const a=t.video.ext;void 0!==a&&void 0!==a[r]&&a[r]==i[r]&&delete e.imp[n].video.ext[r]}if(f.c in t){const a=t.native.ext;void 0!==a&&void 0!==a[r]&&a[r]==i[r]&&delete e.imp[n].native.ext[r]}}))})),e}function Bd(e){return e.imp.forEach(((t,n)=>{if(null==t.ext)return e;if(!(Ud(t)<2)){if(f.b in t){const i=t.banner.ext;if(void 0!==i&&void 0!==i.siteID&&delete e.imp[n].banner.ext.siteID,void 0!==t.banner.format)for(let i=0;i<t.banner.format.length;i++)void 0!==t.banner.format[i].ext&&void 0!==t.banner.format[i].ext.siteID&&((0,o.a)(e.imp[n],"ext.siteID",t.banner.format[i].ext.siteID),(0,o.a)(e,"ext.ixdiag.usid",!0),delete e.imp[n].banner.format[i].ext.siteID)}if(f.d in t){const i=t.video.ext;void 0!==i&&void 0!==i.siteID&&delete e.imp[n].video.ext.siteID}if(f.c in t){const i=t.native.ext;void 0!==i&&void 0!==i.siteID&&delete e.imp[n].native.ext.siteID}}})),e}function Ud(e){let t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function Nd(e){return null==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}(0,tt.b)(Dd);const _d=(e,t,n)=>{const[i,r]=n.playerSize;return{...t,...n.openRtbParams,protocols:[Ss.a.vast20,Ss.a.vast30,Ss.a.vast20Wrapper,Ss.a.vast30Wrapper],api:[ws.a.vpaid10,ws.a.vpaid20,ws.a.mraid1,ws.a.mraid2,ws.a.omid1],...e.params.video,w:i,h:r}},Pd=[[1800,1e3],[970,250],[970,90],[1e3,90],[300,250],[300,600],[250,250],[200,200],[300,300],[728,90],[320,50],[300,50],[320,100],[300,100],[320,250],[320,480],[640,960],[120,600],[160,600]];kt.a.add(It.a.IndexExchange,((e,{placement:t,bid:n,resolvedMediaTypes:i})=>{if(i.banner||i.skin){const r=(e=>e.filter((([e,t])=>{for(const[n,i]of Pd)if(e===n&&t===i)return!0;return!1})))(Bs(i));r.length>0&&Os(e,t.placementId,r,[{bidder:n.bidder,params:{...n.params,video:void 0}}])}if(i.outstream){const r=((e,t)=>_d(e,Cs,t))(n,i.outstream),a={...n.params,video:r};xs(e,t.placementId,i.outstream,[{bidder:n.bidder,params:a}],t.rendering?.outstream)}if(i.instream){const r=((e,t)=>_d(e,Rs,t))(n,i.instream),a=[{bidder:n.bidder,params:{...n.params,size:i.instream.playerSize,video:r}}],{api:o,linearity:s,mimes:d,maxduration:c,minduration:l,protocols:u,startdelay:p}=r,m={...i.instream,openRtbParams:{...i.instream.openRtbParams,api:o,linearity:s,mimes:d,maxduration:c,minduration:l,protocols:u,startdelay:p}};As(e,t.placementId,m,a)}i.native&&Ds(e,t.placementId,[{bidder:n.bidder,params:n.params}],i.native)})),kt.b.add(It.a.IndexExchange,Dd.gvlid);const jd="pubmatic",$d="PubMatic: ",qd="USD",Fd=void 0,zd="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),Md={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},Vd={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},Ld={mimes:Vd.ARRAY,minduration:Vd.NUMBER,maxduration:Vd.NUMBER,startdelay:Vd.NUMBER,playbackmethod:Vd.ARRAY,api:Vd.ARRAY,protocols:Vd.ARRAY,w:Vd.NUMBER,h:Vd.NUMBER,battr:Vd.ARRAY,linearity:Vd.NUMBER,placement:Vd.NUMBER,plcmt:Vd.NUMBER,minbitrate:Vd.NUMBER,maxbitrate:Vd.NUMBER,skip:Vd.NUMBER},Wd={1:"PMP",5:"PREF",6:"PMPG"},Gd={bootstrapPlayer:function(e){const t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),!e.vastXml&&!e.vastUrl)return void(0,r.X)(`${$d}: No vastXml or vastUrl on bid, bailing...`);const n=Gd.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode);let a;for(let e=0;e<window.bluebillywig.renderers.length;e++)if(window.bluebillywig.renderers[e]._id===n){a=window.bluebillywig.renderers[e];break}a?a.bootstrap(t,i):(0,r.X)(`${$d}: Couldn't find a renderer with ${n}`)},newRenderer:function(e,t){var n=zd.replace("$RENDERER",e);const i=m.a.install({url:n,loaded:!1,adUnitCode:t});try{i.setRender(Gd.outstreamRender)}catch(e){(0,r.X)(`${$d}: Error tying to setRender on renderer`,e)}return i},outstreamRender:function(e){e.renderer.push((function(){Gd.bootstrapPlayer(e)}))},getRendererId:function(e,t){return`${e}-${t}`}},Xd=[f.b,f.d,f.c];let Hd=0,Kd=!1,Jd=["pubmatic"];const Yd=["all"];function Zd(e,t){if(!(0,r.S)(t))return t&&(0,r.X)($d+"Ignoring param key: "+e+", expects string-value, found "+typeof t),Fd;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((e=>e.trim())).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||Fd;case"yob":return parseInt(t)||Fd;default:return t}}function Qd(e,t,n){var i,a="Ignoring param key: "+e+", expects "+n+", found "+typeof t;switch(n){case Vd.BOOLEAN:i=r.J;break;case Vd.NUMBER:i=r.P;break;case Vd.STRING:i=r.S;break;case Vd.ARRAY:i=r.I}return i(t)?t:((0,r.X)($d+a),Fd)}const ec={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},{NATIVE_IMAGE_TYPES:tc,NATIVE_KEYS_THAT_ARE_NOT_ASSETS:nc,NATIVE_KEYS:ic,NATIVE_ASSET_TYPES:rc}=c,ac=Object.values(ec);function oc(e){var t;if(e.ortb){e=e.ortb,t={ver:"1.2",...e,assets:[]};const{assets:n}=e,i=e=>e.title||e.img||e.data||e.video;if(n.length<1||!n.some((e=>i(e))))return(0,r.X)(`${$d}: Native assets object is empty or contains some invalid object`),Kd=!0,t;n.forEach((e=>{var n=e;n.img&&(3==n.img.type?(n.w=n.w||n.width||(n.sizes?n.sizes[0]:Fd),n.h=n.h||n.height||(n.sizes?n.sizes[1]:Fd),n.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:Fd),n.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:Fd)):1==n.img.type&&(n.w=n.w||n.width||(n.sizes?n.sizes[0]:Fd),n.h=n.h||n.height||(n.sizes?n.sizes[1]:Fd))),n&&void 0!==n.id&&i(n)&&t.assets.push(n)}))}else t=function(e){if(!e&&!(0,r.Q)(e))return(0,r.X)(`${$d}: Native assets object is empty or not an object: ${e}`),void(Kd=!0);const t={ver:"1.2",assets:[]};for(let n in e){if(nc.includes(n))continue;if(!ic.hasOwnProperty(n)&&!ac.includes(n)){(0,r.X)(`${$d}: Unrecognized native asset code: ${n}. Asset will be ignored.`);continue}const i=e[n];let a=0;i.required&&(0,r.J)(i.required)&&(a=Number(i.required));const o={id:t.assets.length,required:a};if(n in ec)o.data={type:rc[ec[n]]},(i.len||i.length)&&(o.data.len=i.len||i.length),i.ext&&(o.data.ext=i.ext);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?tc.ICON:tc.MAIN},i.aspect_ratios)if((0,r.I)(i.aspect_ratios))if(i.aspect_ratios.length){const{min_width:e,min_height:t}=i.aspect_ratios[0];(0,r.O)(e)&&(0,r.O)(t)?(o.img.wmin=e,o.img.hmin=t):(0,r.X)(`${$d}: image.aspect_ratios min_width or min_height are invalid: ${e}, ${t}`);const n=i.aspect_ratios.filter((e=>e.ratio_width&&e.ratio_height)).map((e=>`${e.ratio_width}:${e.ratio_height}`));n.length>0&&(o.img.ext={aspectratios:n})}else(0,r.X)(`${$d}: image.aspect_ratios was passed, but it's empty: ${i.aspect_ratios}`);else(0,r.X)(`${$d}: image.aspect_ratios was passed, but it's not a an array: ${i.aspect_ratios}`);o.img.w=i.w||i.width,o.img.h=i.h||i.height,o.img.wmin=i.wmin||i.minimumWidth||(i.minsizes?i.minsizes[0]:Fd),o.img.hmin=i.hmin||i.minimumHeight||(i.minsizes?i.minsizes[1]:Fd),i.sizes&&(2===i.sizes.length&&(0,r.O)(i.sizes[0])&&(0,r.O)(i.sizes[1])?((0,r.V)(`${$d}: if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin`),o.img.w=i.sizes[0],o.img.h=i.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,r.X)(`${$d}: image.sizes was passed, but its value is not an array of integers: ${i.sizes}`)),i.ext&&(o.img.ext=i.ext),i.mimes&&(o.img.mimes=i.mimes)}else"title"===n?(o.title={len:i.len||i.length||140},i.ext&&(o.title.ext=i.ext)):"ext"===n&&(o.ext=i,delete o.required);t.assets.push(o)}return t.assets.length<1?((0,r.X)(`${$d}: Could not find any valid asset`),void(Kd=!0)):t}(e);return t}function sc(e){var t,n=e.mediaTypes.banner.sizes,i=[];if(n!==Fd&&(0,r.I)(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=Fd,(0,r.X)($d+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(i=[],n.forEach((function(e){e.length>1&&i.push({w:e[0],h:e[1]})})),i.length>0&&(t.format=i)),t.pos=0,t.topframe=(0,r.B)()?0:1}else(0,r.X)($d+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=Fd;return t}function dc(e){var t,n=(0,r.Z)((0,a.a)(e.mediaTypes,"video"),e.params.video);if(n!==Fd){for(var i in t={},function(e,t){(0,a.a)(e,"placement")||(0,r.X)("Video.Placement param missing for "+t)}(n,e.adUnitCode),Ld)n.hasOwnProperty(i)&&(t[i]=Qd(i,n[i],Ld[i]));(0,r.I)(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):(0,r.P)(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=Fd,(0,r.X)($d+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function cc(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,r.X)($d+"acat: Each category should be a string, ignoring category: "+e),!1)})).map((e=>e.trim())).filter(((e,t,n)=>n.indexOf(e)===t))).length>0&&((0,r.X)($d+"acat: Selected: ",t),e.ext.acat=t)}function lc(e){return!0===(0,r.I)(e)&&e.length>0}const uc={code:jd,gvlid:76,supportedMediaTypes:[f.b,f.d,f.c],isBidRequestValid:e=>{if(e&&e.params){if(!(0,r.S)(e.params.publisherId))return(0,r.X)($d+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(f.d)){let t=(0,a.a)(e.mediaTypes,"video.mimes"),n=(0,a.a)(e,"params.video.mimes");if(!1===lc(t)&&!1===lc(n))return(0,r.X)($d+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[f.d].hasOwnProperty("context"))return(0,r.U)(`${$d}: no context specified in bid. Rejecting bid: `,e),!1;if("outstream"===e.mediaTypes[f.d].context&&!(0,r.S)(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[f.d].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(f.b)||e.mediaTypes.hasOwnProperty(f.c)?(delete e.mediaTypes[f.d],(0,r.X)(`${$d}: for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: `,e),!0):((0,r.U)(`${$d}: for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: `,e),!1)}return!0}return!1},buildRequests:(e,t)=>{var n;t&&t.refererInfo&&(n=t.refererInfo);var i,s=function(e){return{pageURL:e?.page||window.location.href,refURL:e?.ref||window.document.referrer}}(n),d=function(e){return{id:""+(new Date).getTime(),at:1,cur:[qd],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(s),c="",l=[],u=[],m=[],g=(0,r.n)();if(e.forEach((e=>{if(e.params.wiid=e.params.wiid||t.auctionId||g,(i=(0,r.j)(e)).params.adSlot=i.params.adSlot||"",function(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(t=e.params.adSlot,(0,r.S)(t)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&(0,r.X)(jd+": adSlot must be a string. Ignoring adSlot"),""));var n=e.params.adSlot,i=n.split(":");if(n=i[0],2==i.length&&(e.params.adUnitIndex=i[1]),i=n.split("@"),e.params.adUnit=i[0],i.length>1){if(2!=(i=i[1].split("x")).length)return void(0,r.X)($d+"AdSlot Error: adSlot not in required format");e.params.width=parseInt(i[0],10),e.params.height=parseInt(i[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(f.b)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var a=0,o=[];a<e.mediaTypes.banner.sizes.length;a++)2===e.mediaTypes.banner.sizes[a].length&&o.push(e.mediaTypes.banner.sizes[a]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(i),i.mediaTypes&&i.mediaTypes.hasOwnProperty("video")||i.params.hasOwnProperty("video"));else if(!(i.hasOwnProperty("mediaTypes")&&i.mediaTypes.hasOwnProperty(f.c)||0!==i.params.width||0!==i.params.height))return void(0,r.X)($d+"Skipping the non-standard adslot: ",i.params.adSlot,JSON.stringify(i));s.pubId=s.pubId||i.params.publisherId,(s=function(e,t){var n,i,a;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),Md)Md.hasOwnProperty(n)&&(i=e[n])&&("object"==typeof(a=Md[n])&&(i=a.f(i,t)),(0,r.S)(i)?t[n]=i:(0,r.X)($d+"Ignoring param : "+n+" with value : "+Md[n]+", expects string-value, found "+typeof i));return t}(i.params,s)).transactionId=i.ortb2Imp?.ext?.tid,""===c?c=i.params.currency||Fd:i.params.hasOwnProperty("currency")&&c!==i.params.currency&&(0,r.X)($d+"Currency specifier ignored. Only one currency permitted."),i.params.currency=c,i.params.hasOwnProperty("dctr")&&(0,r.S)(i.params.dctr)&&l.push(i.params.dctr),i.params.hasOwnProperty("bcat")&&(0,r.I)(i.params.bcat)&&(u=u.concat(i.params.bcat)),i.params.hasOwnProperty("acat")&&(0,r.I)(i.params.acat)&&(m=m.concat(i.params.acat));var n=function(e,t){var n,i,s={},d={},c=e.hasOwnProperty("sizes")?e.sizes:[],l="",u=[],m=t?.fledgeEnabled;if(function(e,t){t.params.deals&&((0,r.I)(t.params.deals)?t.params.deals.forEach((function(t){(0,r.S)(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):(0,r.X)($d+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):(0,r.X)($d+"Error: bid.params.deals should be an array of strings."))}(s={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:Zd("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:Zd("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?Zd("currency",e.params.currency):qd},e),function(e,t){var n,i="";if(t.params.dctr)if(i=t.params.dctr,(0,r.S)(i)&&i.length>0){var a=i.split("|");i="",a.forEach((e=>{i+=e.length>0?e.trim()+"|":""})),n=i.length,"|"===i.substring(n,n-1)&&(i=i.substring(0,n-1)),e.ext.key_val=i.trim()}else(0,r.X)($d+"Ignoring param : dctr with value : "+i+", expects string-value, found empty or non-string value")}(s,e),function(e,t){var n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,i="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var r,a=n.segments.length;i+="jw-id="+n.content.id;for(var o=0;o<a;o++)i+="|jw-"+n.segments[o]+"=1";(r=e.ext)&&void 0===r.key_val?r.key_val=i:r.key_val+="|"+i}}(s,e),e.hasOwnProperty("mediaTypes"))for(l in e.mediaTypes)switch(l){case f.b:(n=sc(e))!==Fd&&(s.banner=n);break;case f.c:d.request=JSON.stringify(oc(e.nativeParams)),Kd?((0,r.X)($d+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),Kd=!1):s.native=d;break;case f.d:(i=dc(e))!==Fd&&(s.video=i)}else n={pos:0,w:e.params.width,h:e.params.height,topframe:(0,r.B)()?0:1},(0,r.I)(c)&&c.length>1&&((c=c.splice(1,c.length-1)).forEach((e=>{u.push({w:e[0],h:e[1]})})),n.format=u),s.banner=n;return function(e,t){const n={...(0,a.a)(t,"ortb2Imp.ext.data")};Object.keys(n).forEach((t=>{"pbadslot"===t?"string"==typeof n[t]&&n[t]&&(0,o.a)(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((t=>{const i=(0,a.a)(n,`adserver.${t}`);"string"==typeof i&&i&&((0,o.a)(e,`ext.data.adserver.${t.toLowerCase()}`,i),"adslot"===t&&(0,o.a)(e,"ext.dfp_ad_unit_code",i))})):(0,o.a)(e,`ext.data.${t}`,n[t])}));const i=(0,a.a)(t,"ortb2Imp.ext.gpid");i&&(0,o.a)(e,"ext.gpid",i)}(s,e),function(e,t){let n=-1;"function"!=typeof t.getFloor||p.b.getConfig("pubmatic.disableFloors")||[f.b,f.d,f.c].forEach((i=>{if(e.hasOwnProperty(i)){let a=[];"banner"===i&&(e[i].w&&e[i].h&&a.push([e[i].w,e[i].h]),(0,r.I)(e[i].format)&&e[i].format.forEach((e=>a.push([e.w,e.h])))),0===a.length&&a.push("*"),a.forEach((a=>{let o=t.getFloor({currency:e.bidfloorcur,mediaType:i,size:a});if((0,r.V)($d,"floor from floor module returned for mediatype:",i," and size:",a," is: currency",o.currency,"floor",o.floor),"object"==typeof o&&o.currency===e.bidfloorcur&&!isNaN(parseInt(o.floor))){let e=parseFloat(o.floor);(0,r.V)($d,"floor from floor module:",e,"previous floor value",n,"Min:",Math.min(e,n)),n=-1===n?e:Math.min(e,n),(0,r.V)($d,"new floor value:",n)}}))}})),e.bidfloor&&((0,r.V)($d,"floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor)),e.bidfloor=!isNaN(n)&&n>0?n:Fd,(0,r.V)($d,"new impObj.bidfloor value:",e.bidfloor)}(s,e),function(e,t,n){n?(e.ext=e.ext||{},void 0!==t?.ortb2Imp?.ext?.ae&&(e.ext.ae=t.ortb2Imp.ext.ae)):e.ext?.ae&&delete e.ext.ae}(s,e,m),s.hasOwnProperty(f.b)||s.hasOwnProperty(f.c)||s.hasOwnProperty(f.d)?s:Fd}(i,t);n&&d.imp.push(n)})),0==d.imp.length)return;d.site.publisher.id=s.pubId.trim(),Hd=s.pubId.trim(),d.ext.wrapper={},d.ext.wrapper.profile=parseInt(s.profId)||Fd,d.ext.wrapper.version=parseInt(s.verId)||Fd,d.ext.wrapper.wiid=s.wiid||t.auctionId,d.ext.wrapper.wv="prebid_prebid_8.30.0",d.ext.wrapper.transactionId=s.transactionId,d.ext.wrapper.wp="pbjs";const h=t?O.a.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==h){if(d.ext.marketplace={},t&&1==h){let e=O.a.get(t.bidderCode,"allowedAlternateBidderCodes");(0,r.I)(e)?(e=e.map((e=>e.trim().toLowerCase())).filter((e=>!!e)).filter(r.lb),Jd=e.includes("*")?Yd:[...Jd,...e]):Jd=Yd}d.ext.marketplace.allowedbidders=Jd.filter(r.lb)}d.user.gender=s.gender?s.gender.trim():Fd,d.user.geo={},d.user.yob=Zd("yob",s.yob),d.site.page=s.kadpageurl.trim()||d.site.page.trim(),d.site.domain=function(e){let t=document.createElement("a");return t.href=e,t.hostname}(d.site.page),"object"==typeof p.b.getConfig("content")&&(d.site.content=p.b.getConfig("content")),"object"==typeof p.b.getConfig("device")&&(d.device=Object.assign(d.device,p.b.getConfig("device"))),d.device.language=d.device.language&&d.device.language.split("-")[0],(0,o.a)(d,"source.tid",t?.ortb2?.source?.tid),-1!==window.location.href.indexOf("pubmaticTest=true")&&(d.test=1),e[0].schain&&(0,o.a)(d,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&((0,o.a)(d,"user.ext.consent",t.gdprConsent.consentString),(0,o.a)(d,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&(0,o.a)(d,"regs.ext.us_privacy",t.uspConsent),t?.gppConsent?.gppString?((0,o.a)(d,"regs.gpp",t.gppConsent.gppString),(0,o.a)(d,"regs.gpp_sid",t.gppConsent.applicableSections)):t?.ortb2?.regs?.gpp&&((0,o.a)(d,"regs.gpp",t.ortb2.regs.gpp),(0,o.a)(d,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),!0===p.b.getConfig("coppa")&&(0,o.a)(d,"regs.coppa",1),function(e,t){let n=(0,a.a)(t,"0.userIdAsEids");(0,r.I)(n)&&n.length>0&&(0,o.a)(e,"user.eids",n)}(d,e);const b=t&&t.ortb2||{},{user:y,device:v,site:I,bcat:w}=b;if(I){const{page:e,domain:t,ref:n}=d.site;(0,r.Z)(d,{site:I}),d.site.page=e,d.site.domain=t,d.site.ref=n}if(y&&(0,r.Z)(d,{user:y}),w&&(u=u.concat(w)),v?.sua&&(d.device.sua=v?.sua),v?.ext?.cdep&&(0,o.a)(d,"device.ext.cdep",v.ext.cdep),y?.geo&&v?.geo?(d.device.geo={...d.device.geo,...v.geo},d.user.geo={...d.user.geo,...y.geo}):(y?.geo||v?.geo)&&(d.user.geo=d.device.geo=y?.geo?{...d.user.geo,...y.geo}:{...d.user.geo,...v.geo}),b.ext?.prebid?.bidderparams?.[t.bidderCode]?.acat){const e=b.ext.prebid.bidderparams[t.bidderCode].acat;cc(d,e)}else m.length&&cc(d,m);return function(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,r.X)($d+"bcat: Each category should be a string, ignoring category: "+e),!1)})).map((e=>e.trim())).filter((function(e,t,n){if(e.length>3)return n.indexOf(e)===t;(0,r.X)($d+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&((0,r.X)($d+"bcat: Selected: ",t),e.bcat=t)}(d,u),d.tmax=t?.timeout?t.timeout:window?.PWT?.versionDetails?.timeout,d.ext.epoch=(new Date).getTime(),"object"==typeof p.b.getConfig("app")&&(d.app=p.b.getConfig("app"),d.app.publisher=d.site.publisher,d.app.ext=d.site.ext||Fd,"object"!=typeof d.app.content&&(d.app.content=d.site.content||Fd),delete d.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(d),bidderRequest:t}},interpretResponse:(e,t)=>{const n=[];var i=qd;let o=JSON.parse(t.data),s=o.site&&o.site.ref?o.site.ref:"";try{e.body&&e.body.seatbid&&(0,r.I)(e.body.seatbid)&&(i=e.body.cur||i,e.body.seatbid.forEach((e=>{e.bid&&(0,r.I)(e.bid)&&e.bid.forEach((d=>{let c={requestId:d.impid,cpm:parseFloat((d.price||0).toFixed(2)),width:d.w,height:d.h,creativeId:d.crid||d.id,dealId:d.dealid,currency:i,netRevenue:!0,ttl:300,referrer:s,ad:d.adm,pm_seat:e.seat||null,pm_dspid:d.ext&&d.ext.dspid?d.ext.dspid:null,partnerImpId:d.id||""};o.imp&&o.imp.length>0&&o.imp.forEach((e=>{if(d.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=Xd[e.ext.bidtype];else{(0,r.V)($d+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,i="",a=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=f.b;else if(a.test(n))t.mediaType=f.d;else try{(i=JSON.parse(n.replace(/\\/g,"")))&&i.native&&(t.mediaType=f.c)}catch(e){(0,r.X)($d+"Error: Cannot parse native reponse for ad response: "+n)}}}(d,c),c.mediaType){case f.b:break;case f.d:c.width=d.hasOwnProperty("w")?d.w:e.video.w,c.height=d.hasOwnProperty("h")?d.h:e.video.h,c.vastXml=d.adm,function(e,t){let n,i,r;if(t.bidderRequest&&t.bidderRequest.bids){for(let a=0;a<t.bidderRequest.bids.length;a++)t.bidderRequest.bids[a].bidId===e.requestId&&(n=t.bidderRequest.bids[a].params,i=t.bidderRequest.bids[a].mediaTypes[f.d].context,r=t.bidderRequest.bids[a].adUnitCode);i&&"outstream"===i&&n&&n.outstreamAU&&r&&(e.rendererCode=n.outstreamAU,e.renderer=Gd.newRenderer(e.rendererCode,r))}}(c,t),function(e,t,n){if(!t?.ext?.prebiddealpriority)return;const i=(0,r.o)(e.requestId,[n.bidderRequest]),o=(0,a.a)(i,"mediaTypes.video");if(o?.context!=f.a)return;const s=t?.ext?.video?.duration||o?.maxduration;e.video={context:f.a,durationSeconds:s,dealTier:t.ext.prebiddealpriority}}(c,d,t);break;case f.c:!function(e,t){if(e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void(0,r.X)($d+"Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:{...n.native}},t.mediaType=f.c,t.width||(t.width=0),t.height||(t.height=0)}}(d,c)}})),d.ext&&d.ext.deal_channel&&(c.dealChannel=Wd[d.ext.deal_channel]||null),function(e,t,n){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);const i=n||t.ext&&t.ext.advid;i&&(e.meta.advertiserId=i,e.meta.agencyId=i,e.meta.buyerId=i),t.adomain&&lc(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&lc(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0])}(c,d,e.seat),e.ext&&e.ext.buyid&&(c.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),d.ext&&d.ext.marketplace&&(c.bidderCode=d.ext.marketplace),n.push(c)}))})));let d=(0,a.a)(e.body,"ext.fledge_auction_configs");if(d)return d=Object.entries(d).map((([e,t])=>({bidId:e,config:Object.assign({auctionSignals:{}},t)}))),{bids:n,fledgeAuctionConfigs:d}}catch(e){(0,r.U)(e)}return n},getUserSyncs:(e,t,n,i,r)=>{let a=""+Hd;return n&&(a+="&gdpr="+(n.gdprApplies?1:0),a+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),i&&(a+="&us_privacy="+encodeURIComponent(i)),r?.gppString&&r?.applicableSections?.length&&(a+="&gpp="+encodeURIComponent(r.gppString),a+="&gpp_sid="+encodeURIComponent(r?.applicableSections?.join(","))),!0===p.b.getConfig("coppa")&&(a+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+a}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+a}]},transformBidParams:function(e){return _s({publisherId:"string",adSlot:"string"},e)}};(0,tt.b)(uc);const pc={image:{required:!0,sizes:[1,1]},title:{required:!0,len:80},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1,sizes:[1,1]},cta:{required:!1}},mc=(e,t)=>({...Cs,...t,...e.params.video});function fc(e,t,n){return n?e+t+"="+encodeURIComponent(n)+"&":e}kt.a.add(It.a.pubmatic,((e,{bid:t,placement:n,resolvedMediaTypes:i})=>{if(i.banner||i.skin){const r=Bs(i),{video:a,...o}=t.params;Os(e,n.placementId,r,[{bidder:t.bidder,params:o}])}i.native&&Ds(e,n.placementId,[{bidder:t.bidder,params:t.params}],pc),i.outstream&&xs(e,n.placementId,i.outstream,[{bidder:t.bidder,params:{...t.params,video:mc(t,i.outstream.openRtbParams)}}],n.rendering?.outstream),i.instream&&As(e,n.placementId,i.instream,[{bidder:t.bidder,params:t.params}])})),kt.b.add(It.a.pubmatic,uc.gvlid);const gc="triplelift";let hc=null,bc=null;const yc=(0,se.b)({bidderCode:gc}),vc={gvlid:28,code:gc,supportedMediaTypes:[f.b,f.d],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){let n="https://tlx.3lift.com/header/auction?",i=function(e,t){let n={},{schain:i}=e[0];const a=function(e){const t={},n={},i={},a=e.ortb2||{},o=function(){const e=yc.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return(0,r.U)("Triplelift: error parsing JSON: ",e),null}}(),s=Object.assign({},a.site),d=Object.assign({},a.user);if(o){d.data=d.data||[];try{d.data.push({name:"www.1plusx.com",ext:o})}catch(e){(0,r.U)("Triplelift: error adding 1plusX segments: ",e)}}return Rc(n,s),Rc(i,d),(0,r.L)(n)||(t.context=n),(0,r.L)(i)||(t.user=i),t}(t);n.imp=e.map((function(e,t){let n={id:t,tagid:e.params.inventoryCode,floor:Cc(e)};return Ic(e)&&(n.video=function(e){let t={...e.params.video,...e.mediaTypes.video};try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){(0,r.X)("Video size not defined",e)}return"instream"===t.context&&(t.placement||(t.placement=1)),"outstream"===t.context&&(t.placement?-1===[3,4,5].indexOf(t.placement)&&((0,r.W)(`video.placement value of ${t.placement} is invalid for outstream context. Setting placement to 3`),t.placement=3):t.placement=3),t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!wc(e)&&(n.banner={format:(i=e.sizes,i.filter(Oc).map((function(e){return{w:e[0],h:e[1]}})))}),(0,r.L)(e.ortb2Imp)||(n.fpd=function(e){const t={},n={};return Rc(n,e.ext),(0,r.L)(n)||(t.context=n),t}(e.ortb2Imp),(0,r.L)(e.ortb2Imp.ext)||(n.ext={...e.ortb2Imp.ext})),n;var i}));let o=[...(s=[e[0]],Dc(s,"tdid","adserver.org","TDID")),...Ec([e[0]]),...Tc([e[0]]),...xc([e[0]]),...Ac(e[0])];var s;o.length>0&&(n.user={ext:{eids:o}});let d=function(e,t){let n={};return(0,r.L)(e)||(n.schain={...e}),(0,r.L)(t)||(n.fpd={...t}),n}(i,a);return(0,r.L)(d)||(n.ext=d),t?.ortb2?.regs?.gpp&&(n.regs=Object.assign({},t.ortb2.regs)),t?.ortb2&&(n.ext.ortb2=Object.assign({},t.ortb2)),n}(e,t);return n=fc(n,"lib","prebid"),n=fc(n,"v","8.30.0"),t&&t.refererInfo&&(n=fc(n,"referrer",t.refererInfo.page)),t&&t.timeout&&(n=fc(n,"tmax",t.timeout)),t&&t.gdprConsent&&(hc=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies,n=fc(n,"gdpr",hc.toString()),void 0!==t.gdprConsent.consentString&&(bc=t.gdprConsent.consentString,n=fc(n,"cmp_cs",bc))),t&&t.uspConsent&&(n=fc(n,"us_privacy",t.uspConsent)),t&&t.fledgeEnabled&&(n=fc(n,"fledge",t.fledgeEnabled)),!0===p.b.getConfig("coppa")&&(n=fc(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),(0,r.W)("tlCall request built: "+n),{method:"POST",url:n,data:i,bidderRequest:t}},interpretResponse:function(e,{bidderRequest:t}){let n=e.body.bids||[];const i=e.body.paapi||[];if(n=n.map((e=>function(e,t){let n={},i=t.width||1,r=t.height||1,a=t.deal_id||"",o=t.crid||"",s=e.bids[t.imp_id];return 0!=t.cpm&&t.ad&&(n={requestId:s.bidId,cpm:t.cpm,width:i,height:r,netRevenue:!0,ad:t.ad,creativeId:o,dealId:a,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},Ic(s)&&"video"===t.media_type&&(n.vastXml=t.ad,n.mediaType="video",n.ttl=3600),t.advertiser_name&&(n.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(n.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(Ic(s)&&"video"===t.media_type?n.meta.mediaType="video":n.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(n.meta.mediaType="native"),o&&(n.meta.networkId=o.slice(0,o.indexOf("_")))),n}(t,e))),i.length>0){const e=i.map((e=>({bidId:t.bids[e.imp_id].bidId,config:e.auctionConfig})));return(0,r.W)("Response with FLEDGE:",{bids:n,fledgeAuctionConfigs:e}),{bids:n,fledgeAuctionConfigs:e}}return n},getUserSyncs:function(e,t,n,i,r){let a=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(!a)return;let o="https://eb2.3lift.com/sync?";return"image"===a&&(o=fc(o,"px",1),o=fc(o,"src","prebid")),(null!==bc||hc)&&(o=fc(o,"gdpr",hc),o=fc(o,"cmp_cs",bc)),i&&(o=fc(o,"us_privacy",i)),r&&(r.gppString&&(o=fc(o,"gpp",r.gppString)),r.applicableSections&&0!==r.applicableSections.length&&(o=fc(o,"gpp_sid",r.applicableSections.filter((e=>Number.isInteger(e))).join(",")))),[{type:a,url:o}]}};function Ic(e){return Sc(e)&&(wc(e)||function(e){return Sc(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function wc(e){return Sc(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function Sc(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function Cc(e){let t=null;if("function"==typeof e.getFloor)try{const n=e.getFloor({currency:"USD",mediaType:Ic(e)?"video":"banner",size:"*"});"object"!=typeof n||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){(0,r.U)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function Rc(e,t){(0,r.L)(t)||Object.keys(t).forEach((n=>{null!=t[n]&&(e[n]=t[n])}))}function Ec(e){return Dc(e,"idl_env","liveramp.com","idl")}function Tc(e){return Dc(e,"criteoId","criteo.com","criteoId")}function xc(e){return Dc(e,"pubcid","pubcid.org","pubcid")}function Ac(e){let t=["adserver.org","liveramp.com","criteo.com","pubcid.org"],n=[];return e.userIdAsEids&&e.userIdAsEids.forEach((e=>{try{if(-1===t.indexOf(e.source)){let t=e.uids.map((t=>({id:t.id,ext:{rtiPartner:e.source}})));n.push({source:e.source,uids:t})}}catch(t){(0,r.X)(`Triplelift: Error attempting to add ${e} to bid request`,t)}})),n}function Dc(e,t,n,i){return e.map(function(e){return t=>t&&t.userId&&t.userId[e]}(t)).filter(kc(t)).map(function(e,t){return n=>({source:e,uids:[{id:n.id?n.id:n,ext:{rtiPartner:t}}]})}(n,i))}const kc=e=>(t,n,i)=>{let a=!!t&&((0,r.S)(t)?!!t:(0,r.Q)(t)&&!(0,r.I)(t)&&!(0,r.L)(t)&&t.id&&(0,r.S)(t.id)&&!!t.id);return a||void 0===i[0]||(0,r.X)(`Triplelift: invalid ${e} userId format`),a};function Oc(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,tt.b)(vc);const Bc=e=>(0,At.m)(e)&&((0,At.j)(e.forcedSize)||(0,At.p)(e.forcedSize))&&((0,At.j)(e.isVideo)||(0,At.e)(e.isVideo));kt.a.add(It.a.TripleLift,((e,{placement:t,bid:n,resolvedMediaTypes:i})=>{if(i.banner||i.skin){let r=Bs(i);Bc(n.formatterParams)&&n.formatterParams.forcedSize&&(r=[n.formatterParams.forcedSize]),Os(e,t.placementId,r,[{bidder:n.bidder,params:n.params}])}if(i.nativeBanner||i.outstream){let r=[[1,1]];Bc(n.formatterParams)&&n.formatterParams.forcedSize&&(r=[n.formatterParams.forcedSize]),i.outstream&&Bc(n.formatterParams)&&n.formatterParams.isVideo?xs(e,t.placementId,i.outstream,[{bidder:n.bidder,params:n.params}],t.rendering?.outstream):Os(e,t.placementId,r,[{bidder:n.bidder,params:n.params}],{displayFormat:i.nativeBanner?Ci.a.nativeBanner:Ci.a.outstream})}if(i.instream){const[r,a]=i.instream.playerSize;As(e,t.placementId,i.instream,[{bidder:n.bidder,params:{...n.params,video:{w:r,h:a,...n.params.video}}}])}})),kt.b.add(It.a.TripleLift,vc.gvlid);var Uc=n(31);const Nc=e=>{switch(e){case"atf":return 1;case"btf":return 3}return 0},_c=e=>{const t=["video/mp4","video/x-flv","video/webm","application/javascript"];if(0===e.length)return t;const n=e.filter((e=>t.includes(e)));return n.length>0?n:t},Pc=(e,t,n)=>{const i=((e,t,n)=>e&&0!==e.length?t===gi?e.filter((e=>!e.allowedDisplayFormats||e.allowedDisplayFormats.includes(Ci.a.native))):t===fi?e.filter((e=>!e.allowedDisplayFormats||e.allowedDisplayFormats.includes(Ci.a.banner))):t===hi?((e,t)=>"outstream"===t.context?e.filter((e=>!e.allowedDisplayFormats||e.allowedDisplayFormats.includes(Ci.a.outstream))):"instream"===t.context?e.filter((e=>!e.allowedDisplayFormats||e.allowedDisplayFormats.includes(Ci.a.instream))):e)(e,n):e:[])((0,Nt.a)(e.params.deals),n,e.mediaTypes.video);if(0!==i.length)return{private_auction:0,deals:i.map((i=>{const r=(0,At.q)(i)?i:i.name,a=(0,At.q)(i)?0:((e,t)=>{if((0,At.m)(e)){const n=e[t];if((0,At.l)(n))return n}if((0,At.l)(e))return e})(i.priceFloor,n);return{id:r,bidfloor:Math.max(a??0,t??0),at:Wt.a.firstPrice,wseat:e.params.wseat}}))}},jc=(e,t)=>"outstream"===e?-100:t??0,$c=(new Set(["1","true",!0]),{}),qc={},{warn:Fc}=ot.a.tag("screen-size"),zc=e=>{switch(e){case"Cellular":switch(navigator.connection?.effectiveType){case"2g":return 4;case"3g":return 5;case"4g":return 6}return 3;case"Cable/DSL":return 2;case"Corporate":case"Dialup":return 1;default:return 0}},{warn:Mc}=ot.a.tag("ortb-bid-adapter"),Vc=(e,t,n=[])=>{if(!e.getFloor)return.1;const i=e.getFloor.bind(e);return n.reduce(((e,n)=>{const{floor:r}=i({currency:"USD",mediaType:t,size:n});return(0,At.r)(r)?e:Math.min(e??r,r)}),void 0)??i({currency:"USD",mediaType:t,size:"*"}).floor??.1},Lc=[Ss.a.vast10,Ss.a.vast20,Ss.a.vast30,Ss.a.vast40,Ss.a.vast10Wrapper,Ss.a.vast20Wrapper,Ss.a.vast30Wrapper,Ss.a.vast40Wrapper,Ss.a.vast41,Ss.a.vast41Wrapper,Ss.a.vast42,Ss.a.vast42Wrapper],Wc=[ws.a.vpaid10,ws.a.vpaid20,ws.a.mraid1,ws.a.mraid2,ws.a.mraid3],Gc=(e,t)=>{t.mediaTypes.banner&&((e,t)=>{if(!t.mediaTypes.banner||t.mediaTypes.banner.sizes.length<=0)return Mc("Banner BidRequest without sizes was skipped",e);const{sizes:n}=t.mediaTypes.banner,i=`b:${t.bidId}`,r=n[0]?.[0]??0,a=n[0]?.[1]??0;var o;o={size:[r,a]},qc[i]=o;const s={id:i,tagid:t.params.tagId??t.adUnitCode,secure:Wt.b.yes,instl:t.params.instl??Wt.b.no,bidfloor:Vc(t,fi,n),bidfloorcur:"USD",banner:{w:r,h:a,format:n.map((([e,t])=>({w:e,h:t}))),pos:Nc(t.params.position)},ext:t.ortb2Imp?.ext};s.pmp=Pc(t,s.bidfloor,fi),e.imp.push(s)})(e,t),t.mediaTypes.video&&((e,t)=>{if(!t.mediaTypes.video||t.mediaTypes.video.playerSize.length<=0)return Mc("Video BidRequest without sizes was skipped",e);const{context:n,playerSize:i,startdelay:r,placement:a,plcmt:o,minduration:s,maxduration:d,protocols:c,api:l,mimes:u,skip:p,playbackmethod:m}=t.mediaTypes.video,{video:f}=t.params,g=`v:${t.bidId}`,[h,b]=i[0];var y;y={size:[h,b]},$c[g]=y;const v=((e,t)=>{switch(e){case"instream":return 1;case"inbanner":return 2;case"inarticle":return 3;case"infeed":return 4;case"interstitial":return 5}return t??0})(t.params.video?.placement,a),I=((e,t,n)=>{switch(e){case"instream":return 1;case"interstitial":return 3;case"standalone":return 4;case"accompanying":return 2}if(t)return t;switch(n){case 1:return 1;case 5:return 3;case 2:case 3:case 4:return 4}return 0})(t.params.video?.plcmt,o,v),w={id:g,tagid:t.params.tagId??t.adUnitCode,secure:Wt.b.yes,bidfloor:Vc(t,hi),bidfloorcur:"USD",video:{playbackmethod:m,mimes:_c((0,Nt.a)(f?.mimesTypes??u)),minduration:f?.minDuration??s??1,maxduration:f?.maxDuration??d??30,protocols:c??Lc,w:h,h:b,startdelay:jc(n,r),linearity:1,api:l??Wc,placement:v,plcmt:I,pos:Nc(t.params.videoPosition),skip:p??Wt.b.yes},ext:t.ortb2Imp?.ext};w.pmp=Pc(t,w.bidfloor,hi),e.imp.push(w)})(e,t),t.mediaTypes.native&&((e,t)=>{if(!t.mediaTypes.native)return Mc("Wrong media type (native)",e);try{if(!t.nativeOrtbRequest)throw Error("Native ortb request is not defined");const n={id:`n:${t.bidId}`,tagid:t.params.tagId??t.adUnitCode,secure:Wt.b.yes,bidfloor:Vc(t,gi),bidfloorcur:"USD",native:{request:JSON.stringify(t.nativeOrtbRequest),ver:t.nativeOrtbRequest.ver},ext:t.ortb2Imp?.ext};n.pmp=Pc(t,n.bidfloor,gi),e.imp.push(n)}catch(e){(0,Si.a)(new wi.b(wi.a.generateNativeOrtbRequestFailed,e,"generating native ortb request failed"))}})(e,t)},{warn:Xc}=ot.a.tag("ortb-bid-adapter"),Hc=(e,t)=>({agencyId:t.seat??void 0,advertiserId:e.ext?.advid,advertiserDomains:e.adomain??void 0,primaryCatId:e.cat?.[0]??void 0,secondaryCatIds:e.cat?.slice(1)??void 0}),Kc=(e,t,n,i,r)=>{i.impid.startsWith("b:")?((e,t,n,i,{assumeRequestSizeForEmptyResponseSize:r})=>{if(!i.crid)return Xc("Skipped invalid bid with no creativeId provided",i);if(!i.adm&&!i.nurl)return Xc("Skipped invalid banner with no creative markup or url",i);const a=(o=i.impid,qc[o]);var o;const s=r?i.w??a?.size[0]:i.w,d=r?i.h??a?.size[1]:i.h;if(!s||!d)return Xc("Skipped invalid bid with no size provided",i);e.push({requestId:i.impid.replace(/^b:/,""),cpm:i.price,width:s,height:d,creativeId:i.crid,dealId:i.dealid??void 0,currency:t.cur??"USD",netRevenue:!0,ttl:i.exp??60,mediaType:fi,ad:i.adm??void 0,adUrl:i.nurl??void 0,meta:Hc(i,n)})})(e,t,n,i,r):i.impid.startsWith("v:")?((e,t,n,i)=>{if(!i.crid)return Xc("Skipped invalid bid with no creativeId provided",i);if(!i.nurl&&!i.adm)return Xc("Skipped invalid video with no vast url or markup provided",i);const r=(a=i.impid,$c[a]);var a;const[o,s]=r?.size??[640,480];e.push({requestId:i.impid.replace(/^v:/,""),cpm:i.price,width:o,height:s,creativeId:i.crid,dealId:i.dealid??void 0,currency:t.cur??"USD",netRevenue:!0,ttl:i.exp??60,meta:Hc(i,n),mediaType:hi,vastXml:i.adm??void 0,vastUrl:i.nurl??void 0})})(e,t,n,i):i.impid.startsWith("n:")&&((e,t,n,i)=>{if(!i.crid)return Xc("Skipped invalid bid with no creativeId provided",i);if(!i.adm)return Xc("Skipped invalid native with no creative markup or url",i);const r=(e=>{try{const{adm:t,price:n}=e;if(!t)return;const i=mi(t,n);return JSON.parse(i).native}catch(t){return Xc("failed to format native data",e,t)}})(i);if(!r)return Xc("Skipped invalid native with no native data",i);e.push({requestId:i.impid.replace(/^n:/,""),cpm:i.price,width:1,height:1,creativeId:i.crid,dealId:i.dealid??void 0,currency:t.cur??"USD",netRevenue:!0,ttl:i.exp??60,mediaType:gi,meta:Hc(i,n),native:{ortb:r}})})(e,t,n,i)},{warn:Jc,error:Yc,debug:Zc}=ot.a.tag("ttd-bid-adapter"),Qc={code:"ttdDirectPath",supportedMediaTypes:[fi,hi,gi],isBidRequestValid:e=>!!(e=>(0,At.m)(e)&&(0,At.a)(e.position,void 0,"atf","btf")&&(0,At.n)(e.deals,(0,At.h)(At.b,Is))&&(0,At.n)(e.tagId,At.q)&&(0,At.n)(e.video,vs)&&(0,At.n)(e.categoryBlocklist,(0,At.h)(At.b,At.q))&&(0,At.n)(e.domainBlocklist,(0,At.h)(At.b,At.q))&&(0,At.n)(e.wseat,(0,At.h)(At.b,At.q)))(e.params)||(Yc("Bid request parameters are invalid",e),!1),buildRequests(e,t){if(!e)return[];const n=p.b.getConfig("hubvisor")?.context;if(!n)return Jc("TTD Context unavailable, cannot build bid requests"),[];const i=(()=>{const e=p.b.getConfig("hubvisor")?.contentBlocklist;if((0,At.b)(e,At.q)&&e.length>0)return e})(),r=(()=>{const e=p.b.getConfig("hubvisor")?.domainBlocklist;if((0,At.b)(e,At.q)&&e.length>0)return e})(),a=Hr(e,(e=>e.bidderRequestId));return Object.entries(a).map((([e,a])=>{const o=(({id:e,bidderRequest:t,context:n,buyeruid:i})=>{const r=Dt.currentValue,[a,o]=(()=>{try{const e=window.mraid?.getScreenSize();if((0,At.m)(e)&&(0,At.l)(e.width)&&(0,At.l)(e.height))return[e.width,e.height]}catch(e){Fc("mraid.getScreenSize() failed with error: ",e)}})()??[screen.width,screen.height];return{id:e,at:Wt.a.firstPrice,cattax:1,cur:["USD"],site:(s=n,{id:s.siteId,page:location.href,publisher:{id:s.publisherId,name:s.publisherName,domain:s.publisherDomain},domain:s.siteDomain,cat:s.iabCategories}),device:{ip:r?.ip,w:a,h:o,ua:navigator.userAgent,langb:navigator.language,geo:{country:r?.geo?.country?.alpha3,lat:r?.geo?.location?.latitude,lon:r?.geo?.location?.longitude,accuracy:r?.geo?.location?.accuracyRadius,ipservice:3,city:r?.geo?.city?.name,zip:r?.geo?.city?.zip},devicetype:wt.a,dnt:r?.dnt?Wt.b.yes:Wt.b.no,js:Wt.b.yes,make:r?.ua?.device?.vendor,model:r?.ua?.device?.model,os:r?.ua?.os?.name,osv:r?.ua?.os?.version,connectiontype:zc(r?.cxn)},user:{buyeruid:i,ext:{consent:t.gdprConsent?.consentString}},source:{fd:1,ext:{schain:{ver:"1.0",complete:Wt.b.yes,nodes:[{asi:"hubvisor.io",sid:n.publisherId,hp:Wt.b.yes}]}}},regs:{ext:{gdpr:t.gdprConsent?.gdprApplies?Wt.b.yes:Wt.b.no}},imp:[]};var s})({id:e,bidderRequest:t,context:n,buyeruid:dn.tdid});i&&(o.bcat=i),r&&(o.badv=r),t.uspConsent&&o.regs?.ext&&(o.regs.ext.us_privacy=t.uspConsent),o.regs&&!0===p.b.readConfig("coppa")&&(o.regs.coppa=1);const s=a?.[0]?.userIdAsEids?.find((e=>"id5-sync.com"===e.source));s&&o.user&&(o.user.eids=[s]);for(const e of a??[])Gc(o,e);return{method:"POST",url:"https://eur-bid-hubvisor.adsrvr.org/bid/bidder/hubvisor",data:o}}))},interpretResponse(e){if(!(0,Uc.c)(e.body))return Zc("response body is not a bid response",e.body),[];const{assumeRequestSizeForEmptyResponseSize:t=!0}=p.b.getConfig("hubvisor"),n=p.b.getConfig("hubvisor").context,i=e.body,r=[];if(!i.seatbid)return r;for(const e of i.seatbid)if(e.bid)for(const a of e.bid)Kc(r,i,e,a,{context:n,assumeRequestSizeForEmptyResponseSize:t});return r}};(0,tt.b)(Qc),kt.a.add(It.a.ttdDirectPath,((e,{bid:t,placement:n,resolvedMediaTypes:i})=>{if(na.a)return;const r=(0,At.m)(n.position)?n.position?.banner:n.position,a=(0,At.m)(n.position)?n.position?.video:n.position;r&&(t.params={...t.params,position:r}),a&&(t.params={...t.params,videoPosition:a});const o=[...t.params.deals??[],...n.bidRequest.deals??[]];window.ethereum&&(o.push({name:"ttd-c-1ae24aab33"}),(i.instream||i.outstream)&&o.push({name:"ttd-dp-alld-vid",allowedDisplayFormats:[Ci.a.instream,Ci.a.outstream]}),i.native&&o.push({name:"ttd-dp-alld-native",allowedDisplayFormats:[Ci.a.native]}),i.skin?o.push({name:"ttd-dp-alld-sk",allowedDisplayFormats:[Ci.a.banner]}):i.banner&&o.push({name:"ttd-dp-alld-classic",allowedDisplayFormats:[Ci.a.banner]}));const s=(e=>{const t=[];for(const n of e)Is(n)&&t.push(n.name);return t})(o??[]),d={...t.params,deals:o};if(i.banner||i.skin){const r=Bs(i);Os(e,n.placementId,r,[{bidder:t.bidder,params:{...d,video:void 0}}],{requestDealIds:s})}i.outstream&&(n.rendering?.outstream?.hbvFormat?xs(e,n.placementId,i.outstream,[{bidder:t.bidder,params:d}],{...n.rendering?.outstream},{requestDealIds:s}):xs(e,n.placementId,i.outstream,[{bidder:t.bidder,params:d}],{...n.rendering?.outstream,expand:Fi.b.whenVisible},{requestDealIds:s})),i.instream&&As(e,n.placementId,i.instream,[{bidder:t.bidder,params:d}],{requestDealIds:s}),i.native&&Ds(e,n.placementId,[{bidder:t.bidder,params:{...d,video:void 0}}],i.native,{requestDealIds:s})})),kt.b.add(It.a.ttdDirectPath,21);const el={code:"smartadserver",gvlid:45,aliases:["smart"],supportedMediaTypes:[f.b,f.d],isBidRequestValid:function(e){return!!(e.params&&e.params.siteId&&e.params.pageId&&e.params.formatId)},serializeSupplyChain:function(e){if(!e||!e.nodes)return null;const t=["asi","sid","hp","rid","name","domain"];return`${e.ver},${e.complete}!`+e.nodes.map((e=>t.map((t=>e[t]?encodeURIComponent(e[t]):"")).join(","))).join("!")},adaptBannerSizes:function(e){return e.map((e=>({w:e[0],h:e[1]})))},fillPayloadForVideoBidRequest:function(e,t,n){const i=t.playerSize[0];e.isVideo="instream"===t.context,e.mediaType=f.d,e.videoData={videoProtocol:this.getProtocolForVideoBidRequest(t,n),playerWidth:i[0],playerHeight:i[1],adBreak:this.getStartDelayForVideoBidRequest(t,n)}},getProtocolForVideoBidRequest:function(e,t){return void 0!==t&&t.protocol?t.protocol:void 0!==e&&Array.isArray(e.protocols)?Math.max.apply(Math,e.protocols):null},getStartDelayForVideoBidRequest:function(e,t){if(void 0!==t&&t.startDelay)return t.startDelay;if(void 0!==e){if(0==e.startdelay)return 1;if(-1==e.startdelay)return 2;if(-2==e.startdelay)return 3}return 2},createServerRequest:function(e,t){return{method:"POST",url:(void 0!==t?t:"https://prg.smartadserver.com")+"/prebid/v1",data:JSON.stringify(e)}},buildRequests:function(e,t){const n=p.b.getConfig("currency.adServerCurrency"),i=(0,a.a)(t,"ortb2.user.data",p.b.getAnyConfig("ortb2.user.data")),o=(0,a.a)(t,"ortb2.site.content.data",p.b.getAnyConfig("ortb2.site.content.data"));return e.reduce(((e,s)=>{let d={siteid:s.params.siteId,pageid:s.params.pageId,formatid:s.params.formatId,currencyCode:n,targeting:s.params.target&&""!==s.params.target?s.params.target:void 0,buid:s.params.buId&&""!==s.params.buId?s.params.buId:void 0,appname:s.params.appName&&""!==s.params.appName?s.params.appName:void 0,ckid:s.params.ckId||0,tagId:s.adUnitCode,pageDomain:t&&t.refererInfo&&t.refererInfo.page?t.refererInfo.page:void 0,transactionId:s.ortb2Imp?.ext?.tid,timeout:p.b.getConfig("bidderTimeout"),bidId:s.bidId,prebidVersion:"8.30.0",schain:el.serializeSupplyChain(s.schain),sda:i,sdc:o};const c=(0,a.a)(s,"ortb2Imp.ext.gpid",(0,a.a)(s,"ortb2Imp.ext.data.pbadslot",""));c&&(d.gpid=c),t&&(t.gdprConsent&&(d.addtl_consent=t.gdprConsent.addtlConsent,d.gdpr_consent=t.gdprConsent.consentString,d.gdpr=t.gdprConsent.gdprApplies),t.gppConsent&&(d.gpp=t.gppConsent.gppString,d.gpp_sid=t.gppConsent.applicableSections),t.uspConsent&&(d.us_privacy=t.uspConsent)),s&&s.userIdAsEids&&(d.eids=s.userIdAsEids),t&&t.uspConsent&&(d.us_privacy=t.uspConsent);const l=(0,a.a)(s,"mediaTypes.banner"),u=(0,a.a)(s,"mediaTypes.video"),m=u&&("instream"===u.context||"outstream"===u.context);if(l||m){let t;if(l){if(t=f.b,d.sizes=el.adaptBannerSizes(l.sizes),m){let t=(0,r.j)(d);el.fillPayloadForVideoBidRequest(t,u,s.params.video),t.bidfloor=s.params.bidfloor||el.getBidFloor(s,n,f.d),e.push(el.createServerRequest(t,s.params.domain))}}else t=f.d,el.fillPayloadForVideoBidRequest(d,u,s.params.video);d.bidfloor=s.params.bidfloor||el.getBidFloor(s,n,t),e.push(el.createServerRequest(d,s.params.domain))}else e.push({});return e}),[])},interpretResponse:function(e,t){const n=[];let i=e.body;try{if(i&&!i.isNoAd&&(i.ad||i.adUrl)){const e=JSON.parse(t.data);let r={requestId:e.bidId,cpm:i.cpm,width:i.width,height:i.height,creativeId:i.creativeId,dealId:i.dealId,currency:i.currency,netRevenue:i.isNetCpm,ttl:i.ttl,dspPixels:i.dspPixels,meta:{advertiserDomains:i.adomain?i.adomain:[]}};e.mediaType===f.d?(r.mediaType=f.d,r.vastUrl=i.adUrl,r.vastXml=i.ad,r.content=i.ad):(r.adUrl=i.adUrl,r.ad=i.ad),n.push(r)}}catch(e){(0,r.U)("Error while parsing smart server response",e)}return n},getBidFloor:function(e,t,n){if(!(0,r.M)(e.getFloor))return 0;const i=e.getFloor({currency:t||"USD",mediaType:n,size:"*"});return(0,r.Q)(i)&&!isNaN(i.floor)?i.floor:0},getUserSyncs:function(e,t){const n=[];return e.iframeEnabled&&t.length>0&&null!=t[0].body.cSyncUrl?n.push({type:"iframe",url:t[0].body.cSyncUrl}):e.pixelEnabled&&t.length>0&&void 0!==t[0].body.dspPixels&&t[0].body.dspPixels.forEach((function(e){n.push({type:"image",url:e})})),n}};(0,tt.b)(el),kt.a.add(It.a.Smart,((e,{placement:t,bid:n,resolvedMediaTypes:i})=>{if(i.banner||i.skin){const r=Bs(i);Os(e,t.placementId,r,[{bidder:n.bidder,params:n.params}])}if(i.outstream&&xs(e,t.placementId,i.outstream,[{bidder:n.bidder,params:{video:{protocol:8,startDelay:1},...n.params}}],t.rendering?.outstream),i.instream&&As(e,t.placementId,i.instream,[{bidder:n.bidder,params:{video:{protocol:6},...n.params}}]),i.native){const r=vt.readConfig("s2sConfig");r?.enabled&&r.bidders?.includes(n.bidder)&&Ds(e,t.placementId,[{bidder:n.bidder,params:n.params}],i.native)}})),kt.b.add(It.a.Smart,el.gvlid);const tl="deezer.web",nl="unknown",il=()=>{const{hostname:e}=location;return/^(.*\.)?deezer\.com$/.test(e)?tl:nl},rl={...It.a,Deezer_Adyoulike:"Deezer-Adyoulike",Deezer_Pubmatic:"Deezer-Pubmatic",Deezer_TTD:"Deezer-TTD",Deezer_TripleLift:"Deezer-Triplelift",Deezer_IndexExchange:"Deezer-IndexExchange",Deezer_Equativ:"Deezer-Equativ"},al={[rl.Deezer_Adyoulike]:rl.Adyoulike,[rl.Deezer_Pubmatic]:rl.pubmatic,[rl.Deezer_TTD]:rl.ttdDirectPath,[rl.Deezer_TripleLift]:rl.TripleLift,[rl.Deezer_IndexExchange]:rl.IndexExchange,[rl.Deezer_Equativ]:rl.Smart};var ol=n(49);const sl=(e,t,n)=>{if(t.size<=0)return e;const i=((e,t)=>{if(t?.gamAdUnitPath)return window.googletag?.pubads().getSlots().filter((t=>e.has(t.getSlotElementId()))).map((e=>e.getAdUnitPath()))})(t,n);return e.filter((e=>{const r=n?.gamAdUnitPath&&(0,Fi.c)(e.rendering?.dfp)&&(0,ol.b)(e.rendering?.dfp.adUnitPath,...i??[],...t),a=n?.gamElement&&(0,Fi.d)(e.rendering?.dfp)&&(0,ol.b)(e.rendering?.dfp.elementId,...t),o=n?.instream&&e.rendering?.instream?.playerId&&t.has(e.rendering.instream.playerId),s=n?.generic&&e.rendering?.generic?.id&&t.has(e.rendering.generic.id),d=n?.placementId&&t.has(e.placementId),c=n?.smartFormatId&&e.rendering?.sas?.formatId&&(0,Nt.a)(e.rendering?.sas?.formatId).some((e=>t.has(`${e}`))),l=n?.hscSelector&&e.rendering?.hsc?.selector&&(0,At.q)(e.rendering?.hsc?.selector)&&t.has(e.rendering.hsc.selector.replace("#",""));return r||a||o||s||d||c||l}))},dl={gamElement:!0,placementId:!0},cl=[{placementId:"adslot1",rendering:{renderer:Fi.a.dfp,dfp:{elementId:"adslot1"},richMedia:{useSandbox:!0}},bidRequest:{mediaTypes:{banner:{sizes:[[1e3,250],[1e3,90],[970,250],[970,90],[768,90],[728,90],[320,100],[320,50],[300,250],[300,100],[300,75],[300,50]]}},bids:[{bidder:"hubvisor",params:{},overrideMediaTypes:{skin:!0}},{bidder:rl.Deezer_Adyoulike,params:{placement:"37e45cdde9ebdbe0f3863a2b8ad1dc50"}},{bidder:rl.Deezer_Pubmatic,params:{publisherId:"161459",adSlot:"5410449"}},{bidder:rl.Deezer_TTD,params:{}},{bidder:rl.Deezer_TripleLift,params:{inventoryCode:"Hubvisor_Deezer_D_970x250_Prebid"}},{bidder:rl.Deezer_IndexExchange,params:{inventoryCode:"Hubvisor_Deezer_D_970x250_Prebid",siteId:1043731}},{bidder:rl.Deezer_Equativ,params:{siteId:625595,pageId:1904242,formatId:127106}}]}}],ll={[tl]:{desktop:cl}},ul={[tl]:"deezer",[nl]:"unknown"}[il()],pl={pageZone:"ros",layout:wt.b,supportCode:il(),publisherBrand:ul,networkCode:"deezer"},ml=()=>rs(Ut.b.pageView),fl=history.pushState;history.pushState=function(...e){fl.apply(history,e),ml()},addEventListener("popstate",ml);const gl=({refreshReason:e,requestedPlacements:t})=>{const n=pl,i=(e=>(e=>{const{supportCode:t,layout:n}=e,i=ll[t];return i?.[n]??[]})(e))(n);return{refreshReason:e,context:n,placements:sl(i,t,dl)}},{info:hl,debug:bl,error:yl}=ot.a.tag("visibility:refresh"),{info:vl,debug:Il}=ot.a.tag("visibility:events:exposition"),wl=new Map,Sl=[],Cl=(()=>{if(window.ontouchstart)return!0;const e=["-webkit-","-moz-","-o-","-ms-",""].map((e=>`(${e}touch-enabled)`)).join(", ");return matchMedia(e).matches})(),{debug:Rl}=ot.a.tag("visibility:events:focus"),El=()=>{const e=Cl?()=>Ii.a:(e,t,n)=>{Rl(`${e.id||e.tagName}: start observing`);const i=t=>{Rl(`${e.id||e.tagName}: received '${t.type}'`),n({isFocus:"mouseenter"===t.type})},r=new ea([zr(e,"mouseenter",i),zr(e,"mouseleave",i)]);return()=>{Rl(`${e.id||e.tagName}: disposing`),r.dispose()}};return(t,n,i)=>(i({canRefresh:!0}),e(t,n,(e=>i({canRefresh:!e.isFocus}))))},{debug:Tl,warn:xl}=ot.a.tag("autorefresh:triggers:gam"),{debug:Al,warn:Dl}=ot.a.tag("autorefresh:triggers:sas");var kl=n(73);const{debug:Ol}=ot.a.tag("autorefresh:triggers:hsc"),Bl=(e,t)=>{const n=Eo(e);for(const e of Object.keys(n.strings).filter((e=>/^hbv?_/.test(e))))delete n.strings[e];for(const e of Object.keys(n.numbers).filter((e=>/^hbv?_/.test(e))))delete n.numbers[e];return n.strings.hb_rfs="true",n.numbers.hb_pn=`${t}`,Ro(n)},{debug:Ul}=ot.a.tag("visibility:events:timer"),Nl=new Map,_l=[],Pl=(e,t)=>{t.isTimedUp&&t.inView&&t.isVisible&&e({isVisible:!0})},{debug:jl}=ot.a.tag("visibility:events:basic-timer"),$l=new Map,ql=[],Fl=(e,t)=>{if(t.isTimedUp){try{const e=window.googletag?.pubads().getSlots().find((e=>e.getSlotElementId().endsWith("mpu_3")));e?.setTargeting("hbv_visible_placement_abtest",`${t.isVisible&&t.inView}`)}catch{}e({isVisible:!0})}},{debug:zl,warn:Ml,error:Vl,info:Ll}=ot.a.tag("autorefresh"),Wl=(0,ht.a)((()=>{(e=>{if((0,Rt.a)("no-refresh"))return Ii.a;const t=e.additionalUnregisterListener??[];!1!==e.withUnregisterListener&&t.push((e=>{const t=t=>{const n=document.getElementById(t);if(!n)return Ml(`${t}: couldn't get element`);e(n)};return Fa.on("didExcludePlacement",t),()=>{Fa.off("didExcludePlacement",t)}}));const n=(0,Rt.b)("autorefresh-duration")??e.autorefresh?.duration??30,i=e.autorefresh?.rootMargin,r=[El()],a=e.autorefresh?.visibleRatio??.5;"timer"===e.refreshListenerKind?r.push((e=>{const t=(e=>{const t=(0,At.g)(e.visibleRatio)?void 0:new IntersectionObserver((e=>{for(const t of _l)t(e)}),{threshold:[0,e.visibleRatio,1],rootMargin:e.rootMargin,root:e.root});return(n,i,r)=>{const a=(0,At.g)(e.visibleRatio)?e.visibleRatio(n,i):e.visibleRatio,o=t??new IntersectionObserver((e=>{for(const t of _l)t(e)}),{threshold:[0,a,1],rootMargin:e.rootMargin,root:e.root}),s={timeoutId:-1,isTimedUp:!1,inView:!1,isVisible:"visible"===document.visibilityState};s.timeoutId=s.timeoutId>=0?s.timeoutId:((e,t,n,i)=>{const r=(0,At.g)(i.duration)?i.duration(t):i.duration;return window.setTimeout((()=>{Ul(`${t.id||t.tagName}: timer was up for ${r}s`),e.isTimedUp=!0,Pl(n,e)}),1e3*r)})(s,n,r,e);const d=e=>{const t=e.find((({target:e})=>e===n));if(!t)return;const{intersectionRatio:i,isIntersecting:o}=t;Ul(`${n.id||n.tagName}:`,{intersectionRatio:i,isIntersecting:o}),s.inView=o&&i>=a,Pl(r,s)},c=()=>{const e="visible"===document.visibilityState;e&&Ul(`${n.id||n.tagName}: document visible`),s.isVisible=e,Pl(r,s)};return document.addEventListener("visibilitychange",c),_l.push(d),Nl.set(n,(Nl.get(n)??0)+1),o.observe(n),Ul(`${n.id||n.tagName}: start observing`),()=>{Ul(`${n.id||n.tagName}: disposing`),clearTimeout(s.timeoutId),document.removeEventListener("visibilitychange",c);const e=_l.indexOf(d);e>=0&&_l.splice(e,1);const t=Nl.get(n)??0;t>1?Nl.set(n,t-1):(Nl.delete(n),o.unobserve(n))}}})(e);return(e,n,i)=>t(e,n,(({isVisible:e})=>i({canRefresh:e})))})({visibleRatio:a,duration:n})):"basic-timer"===e.refreshListenerKind?r.push((e=>{const t=(e=>{const t=(0,At.g)(e.visibleRatio)?void 0:new IntersectionObserver((e=>{for(const t of ql)t(e)}),{threshold:[0,e.visibleRatio,1],rootMargin:e.rootMargin,root:e.root});return(n,i,r)=>{const a=(0,At.g)(e.visibleRatio)?e.visibleRatio(n,i):e.visibleRatio,o=t??new IntersectionObserver((e=>{for(const t of ql)t(e)}),{threshold:[0,a,1],rootMargin:e.rootMargin,root:e.root}),s={timeoutId:-1,isTimedUp:!1,inView:!1,isVisible:"visible"===document.visibilityState};s.timeoutId=s.timeoutId>=0?s.timeoutId:((e,t,n,i)=>{const r=(0,At.g)(i.duration)?i.duration(t):i.duration;return window.setTimeout((()=>{jl(`${t.id||t.tagName}: timer was up for ${r}s`),e.isTimedUp=!0,Fl(n,e)}),1e3*r)})(s,n,r,e);const d=e=>{const t=e.find((({target:e})=>e===n));if(!t)return;const{intersectionRatio:i,isIntersecting:o}=t;jl(`${n.id||n.tagName}:`,{intersectionRatio:i,isIntersecting:o}),s.inView=o&&i>=a,Fl(r,s)},c=()=>{const e="visible"===document.visibilityState;e&&jl(`${n.id||n.tagName}: document visible`),s.isVisible=e,Fl(r,s)};return document.addEventListener("visibilitychange",c),ql.push(d),$l.set(n,($l.get(n)??0)+1),o.observe(n),jl(`${n.id||n.tagName}: start observing`),()=>{jl(`${n.id||n.tagName}: disposing`),clearTimeout(s.timeoutId),document.removeEventListener("visibilitychange",c);const e=ql.indexOf(d);e>=0&&ql.splice(e,1);const t=$l.get(n)??0;t>1?$l.set(n,t-1):($l.delete(n),o.unobserve(n))}}})(e);return(e,n,i)=>t(e,n,(({isVisible:e})=>i({canRefresh:e})))})({visibleRatio:a,duration:n})):r.push((e=>{const t=(e=>{const t=(0,At.g)(e.visibleRatio)?void 0:new IntersectionObserver((e=>{for(const t of Sl)t(e)}),{threshold:[0,e.visibleRatio,1],rootMargin:e.rootMargin,root:e.root});return(n,i,r)=>{const a=(0,At.g)(e.visibleRatio)?e.visibleRatio(n,i):e.visibleRatio,o=t??new IntersectionObserver((e=>{for(const t of Sl)t(e)}),{threshold:[0,a,1],rootMargin:e.rootMargin,root:e.root});let s;const d=t=>{const o=t.find((e=>e.target===n));if(!o)return;const d=o.isIntersecting??o.intersectionRatio>0;Il(`${n.id||n.tagName}:`,{intersectionRatio:o.intersectionRatio,isIntersecting:d});const c=s?.timer??((e,t,n,i)=>{const r=(0,At.g)(i.duration)?i.duration(e,t):i.duration;return new ao((()=>{vl(`${e.id||e.tagName}: was visible ${r}s`),n({isVisible:!0})}),r)})(n,i,r,e),l=d&&o.intersectionRatio>=a;l?(vl(`${n.id||n.tagName}: in view -> resuming timer (remaining: ${c.remaining}s)`),c.resume()):(vl(`${n.id||n.tagName}: *not* in view -> pausing timer (remaining: ${c.remaining}s)`),c.pause()),s={timer:c,inView:l}},c=()=>{if(!s)return;const{timer:e,inView:t}=s;"visible"===document.visibilityState&&t?(Il(`${n.id||n.tagName}: document visible && in view -> resuming timer (remaining: ${e.remaining}s)`),e.resume()):(Il(`${n.id||n.tagName}: document *not* visible -> pausing timer (remaining: ${e.remaining}s)`),e.pause())};return document.addEventListener("visibilitychange",c),Sl.push(d),wl.set(n,(wl.get(n)??0)+1),o.observe(n),Il(`${n.id||n.tagName}: start observing`),()=>{Il(`${n.id||n.tagName}: disposing`),document.removeEventListener("visibilitychange",c);const e=Sl.indexOf(d);e>=0&&Sl.splice(e,1);const t=wl.get(n)??0;t>1?wl.set(n,t-1):(wl.delete(n),o.unobserve(n)),s?.timer.pause(),s=void 0}}})(e);return(e,n,i)=>t(e,n,(({isVisible:e})=>i({canRefresh:e})))})({visibleRatio:a,duration:n,rootMargin:i}));const o=[];var s,d;e.adservers.has("gam")&&o.push((s=e.gamCustom?.watchParent,d=e.autorefresh?.isRefreshAllowedForElement,e=>{let t=t=>{const n=t.slot.getSlotElementId(),i=document.getElementById(n);if(!i)return xl(`${n}: couldn't get element`);if(qa.has(n))return Tl(`${n}: excluded from refresh -> rejecting`);if(!1===d?.({element:i,elementId:n,kind:"gam",event:t}))return Tl(`${n}: filtered out -> rejecting`);const r=s&&i.parentElement?i.parentElement:i;e(r,{trigger:"gam",slot:t.slot,advertiserId:t.advertiserId})};return(0,go.b)((e=>{e.pubads().addEventListener("slotRenderEnded",(e=>{t?.(e)}))})),()=>{t=void 0}})),e.adservers.has("sas")&&o.push((e=>t=>{const n=n=>{const{tagId:i,formatId:r}=n,a=document.getElementById(i);return a?qa.has(i)?Al(`${i}: excluded from refresh -> rejecting`):!1===e?.({element:a,elementId:i,kind:"sas",event:n})?Al(`${i}: filtered out -> rejecting`):void t(a,{trigger:"sas",formatId:r}):Dl(`${i}: couldn't get element`)};return wo.on("ad",n),wo.on("holisticAd",n),()=>{wo.off("ad",n),wo.off("holisticAd",n)}})(e.autorefresh?.isRefreshAllowedForElement)),e.adservers.has("hsc")&&o.push((e=>t=>{const n=({placementId:n,bidResponse:i,renderingDiv:r,isGamBypass:a,isSmartNoAd:o})=>{if(!o&&r)return qa.has(n)||qa.has(r.id)?Ol(`${n}: excluded from refresh -> rejecting`):!1===e?.({placementId:n,element:r,elementId:r.id,kind:"hsc",bidResponse:i,isGamBypass:a})?Ol(`${r.id||r.tagName}: filtered out -> rejecting`):void t(r,{trigger:"hsc",bidResponse:i,placementId:n,isGamBypass:a,isSmartNoAd:o})};return kl.a.on("hsc-render",n),kl.a.on("hsc-no-content",n),()=>{kl.a.off("hsc-render",n),kl.a.off("hsc-no-content",n)}})(e.autorefresh?.isRefreshAllowedForElement)),Ll("set up auto refresh"),((e,t,n,i,r)=>{if(!(0,nn.b)()||na.a)return hl("autorefresh is disabled"),Ii.a;const a=r?.throttleDuration??.2,o=new Map,s=(e=0)=>({needsUpdate:!1,states:new Array(n.length).fill(!1),refreshCount:e}),d=Rr((()=>{const e=[];bl("fetching elements to update with observedElements",o);for(const[t,{state:n,context:i,maxRefreshCount:r}]of o){const{needsUpdate:a,states:o,refreshCount:s}=n;a&&(!r||s<r)&&o.every((e=>!0===e))&&e.push({element:t,refreshCount:s,context:i})}if(0===e.length)return bl("no element to update");hl("elements to update",e);try{i(e)}catch(e){(0,Si.a)(e,"error handling autorefresh")}for(const{element:t}of e){const e=o.get(t);if(!e)continue;const{state:n,disposables:i}=e;for(const e of i)e();i.splice(0,i.length),delete e.context;const r=n.refreshCount+1;e.state=s(r),e.maxRefreshCount&&r>=e.maxRefreshCount&&bl(`element '${t.id||t.tagName}' was refreshed ${e.maxRefreshCount} times: this element won't be refreshed anymore`)}}),a,{leading:!1});t.map((e=>e((e=>{const t=o.get(e);if(t){bl("unregistering element",e.id||e.tagName);for(const e of t.disposables)e();t.disposables.splice(0,t.disposables.length),o.delete(e)}else yl("can't unregister element",e.id||e.tagName)})))),e.map((e=>e(((e,t)=>{(({element:e,context:t},n)=>{const i=o.get(e);if(i){const r=i.state.refreshCount;if(i.maxRefreshCount&&r>=i.maxRefreshCount)bl(`${e.id||e.tagName}: element already refreshed ${i.maxRefreshCount} times, rejecting`);else{bl(`${e.id||e.tagName}: already observed ${r} times'}, restarting observers`),i.context=t;for(const e of i.disposables)e();i.disposables.push(...n())}}else{bl(`${e.id||e.tagName}: add initial state, starting observers`);const i=(0,At.g)(r?.maxRefreshCount)?r?.maxRefreshCount(e):r?.maxRefreshCount,a={state:s(),disposables:[],context:t,maxRefreshCount:i};o.set(e,a),a.disposables.push(...n())}})({element:e,context:t},(()=>n.map(((n,i)=>n(e,t,(({canRefresh:t})=>{((e,t,n)=>{const i=o.get(e);i&&(i.state.needsUpdate=!i.maxRefreshCount||i.state.refreshCount<i.maxRefreshCount,i.state.states[n]=t)})(e,t,i),d()}))))))}))))})(o,t,r,(e=>async t=>{const n=Hr(t,(e=>"hsc"===e.context?.trigger&&e.context.isGamBypass?"gam":e.context?.trigger)),i=new Set;let r;if(n.gam){r=((e,t)=>e.gamCustom?.getElementIdsToRefresh?.(t))(e,n.gam);for(const e of r??n.gam)"gam"===e.context?.trigger?i.add(e.context.slot.getSlotElementId()):i.add(e.element.id)}if(n.hsc)for(const e of n.hsc){const t=e.context;i.add(t.bidResponse?.placementId??t.placementId)}const a=[];if(n.sas)try{const e=window.sas?.events.history("call")??[],t=new Set(n.sas.map((({element:e})=>e.id)));a.push(...So(e,t));for(const e of a)i.add(e.formatId)}catch(e){reportError(new wi.b(wi.a.unexpected,e))}if(await rs(Ut.b.visibility,i),n.sas)for(const e of n.sas){if(zl("lastCalls:",a),0===a.length)return Ml("couldn't match element(s) to update with calls history");const t=a.find((t=>e.element.id===t.tagId));if(!t)return Vl(`couldn't get refresh's data from slot ${e.element.id}`);const{siteId:n,formatId:i,pageId:r,target:o,tagId:s}=t,d=e.refreshCount+2;window.sas?.clean(i),window.sas?.call("std",{siteId:n,pageId:Number(r),formatId:i,tagId:s,target:Bl(o,d)})}if(n.gam){const t=e.gamCustom?.getGamSlots?.(n.gam)??window.googletag?.pubads().getSlots();for(const i of r??n.gam){const n="gam"===i.context.trigger&&e.gamCustom?.watchParent?i.context.slot:t?.find((e=>i.element.id===e.getSlotElementId()));if(!n)return;n.setTargeting("hbv_pn",`${i.refreshCount+2}`),n.setTargeting("hbv_rfs","true");const r=e.gamCustom?.additionalTargetings?.(i.refreshCount);if(r)for(const[e,t]of Object.entries(r))(0,At.i)(t)?n.setTargeting(e,t):n.clearTargeting(e);e.gamCustom?.beforeRefresh?.(n),window.googletag?.pubads().refresh(n)}}})(e),{maxRefreshCount:e.autorefresh?.maxRefreshCount})})({adservers:new Set(["gam"]),autorefresh:{duration:30,visibleRatio:.5,maxRefreshCount:1/0}})})),Gl=(0,Vi.a)();(0,ia.b)("dz:new-page",(async()=>(await Gl.promise,rs(Ut.b.pageView))));const Xl=["35050.co.za","7digital.com","acaiverde.com","allaboutbluesmusic.com","allegro.pl","allo-voyance.com","allomusic.com","almarjane.com","andrelon.nl","angebote.base.de","anya-voyance.com","anymusicconverter.com","applicationiphone.com","apps.facebook.com","appworld.blackberry.com","ask.com","astralive.com","astrologie.le-tarot.be","attractionalertapp.com","auboutdufil.com","aupeo.com","avanquest.com","aveamuzik.com","avs4you.com","bandmine.com","bearshare.com","beezik.com","beta.mflow.com","blinkogold.com","blinkogold.fr","bplaynetwork.com","buongiorno.com","cduson.com","change.org","chomikuj.pl","claro.com.co","claro.com.gt","claro.com.hn","claro.com.ni","claro.com.py","claro.com.sv","clip2star.com","clipzik.com","coronamusic.com","coupondropdown.com","dalok.hu","deezer.com","destiflash.com","digitallook.com","dilandau.com","dilandau.eu","dolores-voyance.fr","dooloop.tv","download.ialbums.com","download.televisionfanatic.com","downloadelfs.com","downmusic.free.fr","ec.ananaycelular.com","eircom.ie","elciclo.bandcamp.com","emusic.com","failblog.org","firstvoyance.com","fisherinvestments.co.uk","fizy.com","fr.7digital.com","fr.bearshare.com","fr.blackberry.com","fr.dilandau.eu","fr.fxgm.com","freesound.org","funvoyance.fr","gabriella-voyancepartel.com","gadu-gadu.pl","grooveshark.com","headlineshirts.net","horoscope.le-tarot.be","horoscopes-voyance.com","idealvoyance.ch","ideasmusik.com","image-converter.wiseconvert.com","imesh.com","installldownload.com","iplay.pl","isis-voyance.fr","istockphoto.com","izlesene.com","jiwafm.fr","judith-voyance.fr","korlatlanzene.hu","l.inccel.com","last.fm","lastfm.com","lastfm.fr","live365.com","luminosity.com","m.attractionalertapp.com","m.mplay3.fr","macroplant.com","megastore.uol.com.br","megavod.com","megavod.fr","merlin.pl","mflow.com","mondo.rs","mp3.pl","mp3trazaac.com","mplay3.fr","mts.telekom.rs","musi9a.com","music.google.com","music.msn.com","music.msn.com.br","music.ovi.com","music.sonyentertainmentnetwork.com","musicclub.dr.com.tr","musichub.com","musicload.de","musicme.com","musicovery.com","musicrobot.co.uk","musicscreen.be","musicscreen.com","musicweek.com","musikin.com","musikplease.com","musiqueradio.com","muzikicinefes.com","muzikoo.net","muzo.pl","muzodajnia.pl","muzzia.com","muzzia.hu","my-hub.co.uk","myastro.fr","myspace.com","mysurround.com","nadlanu.com","napster.com","napster.de","napster.fr","natwest.com","noomiz.com","numerologie-adele.com","oasisforfun.com","oirdio.com","oirdio.com.br","open.spotify.com","open.spotify.fr","open.spotify.uk","orianna-voyance.com","orjinalindir.com","pcregistryshield.com","pdf-tool.wiseconvert.com","persolinea.ro","pl.bearshare.com","play.com","play.google.com","play.spotify.com","play.spotify.fr","play.spotify.uk","play.vodafone.co.nz","playme.it","playvod.com","podatnik.info","portaildurap.com","powermusicclub.com","powermusicclub.com.br","priceside.net","purevoyance.com","qobuz.com","quetelecharger.com","rackspace.co.uk","radio.uol.com","radio.uol.com.br","radyo-dinle.us","rara.com","rdio.com","rdio.com.br","recordcheckerapp.com","rhapsody.com","rhapsody.fr","safemonitorapp.com","secure.maria-clarividencia.com","shoutcast.com","songo.hu","songs.hu","soundcloud.com","spotify.com","spotify.fr","spotify.uk","starzik.com","stockmusicsite.com","super7zip.com","svoy.ru","telecharger-illimite.fr","telekom.rs","telenor.hu","televisionfanatic.com","temporel-voyance.com","tentesuasorte.com.br","themusicase.com","timmusicstore.com","timmusicstore.com.br","totaladblock.com","traxx.fm","trouveztout.org","ttnet.com","ttnet.com.tr","ttnetmuzik.com","ttnetmuzik.com.tr","tuba.pl","tunein.com","tuneupmedia.com","turkcell.com","turkcellmuzik.com","tvadmusic.co.uk","universal.imusica.com","universal.imusica.com.br","updf.net","vibestreamer.com","videonmusic.com","videonmusic.com.w3snoop.com","vidivodo.com","vip.rs","vipmobile.rs","vivoplay.vivo.com","vivoplay.vivo.com.br","voyance-sentimental.fr","voyance.lu","voyancefrancaise.com","voyant.pro","waala.com","waala.fr","wap.olemovil.com","we7.com","wimp.com","wimp.de","wimp.pl","wisedownloads.com","wizzmusic.com","wormee.com","wormee.fr","wrzuta.pl","77zip.com","amis.net","astro.com","astro.com.my","deezer.com","o2online.de","personal.com.py","qobuz.com","reverbnation.com","silvalifesystem.com","simobil.si","t-2.net","telia.se","virginmobile.co","xforex.com","www0.beezik.com","xpax.com","xpax.com.my","yesfm.ch","yesfm.com","yesfm.radio.fr","yesfmonline.com","yeshome.com","zene247.hu","zenecenter.hu","ziggo.com","ziggo.nl","zimbalam.com","zimbalam.eu","zimbalam.fr","zonga.ro"],Hl="hbv-custom-wrapper",Kl="hbv-custom-style",Jl="#page_content",Yl=()=>{const e=document.getElementById(Hl);e&&(e.style.right=window.innerWidth-1555+"px")},Zl=e=>{const t=document.body;if(!t)throw new Error("pageWrap was not found with document.body");const n=document.getElementById(Hl)??document.createElement("div");n.id=Hl,(0,zi.c)(n),n.append(e),t.insertBefore(n,t.firstChild),(()=>{if(!document.querySelector(Jl))throw new wi.b(wi.a.skinDomElementNotFound,`pageWrap was not found with ${Jl}`);window.addEventListener("resize",Yl,!0);const e=window.innerWidth-1555;(0,zi.a)(Kl,`\n  ${Jl} {\n    box-shadow: none;\n    isolation: isolate;\n    margin: 221px 0 0 272px !important;\n    max-width: 1000px;\n    background-color: #fff;\n    -webkit-box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.61);\n    box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.61);\n  }\n\n  #${Hl} {\n    bottom: 0;\n    left: 0;\n    overflow: hidden;\n    position: fixed;\n    right: ${e}px;\n    top: 80px;\n    height: 1000px;\n  }\n\n    @media (min-width: 1728px) {\n    .container {\n      width: var(--grid-containers-l);\n    }\n    .thumbnail-grid-responsive .thumbnail-col {\n      margin-left: var(--grid-offset-lg);\n      width: var(--grid-columns-width-lg);\n    }\n    .thumbnail-grid-responsive .thumbnail-col .picture-img {\n      height: var(--grid-columns-width-md);\n      width: var(--grid-columns-width-md);\n    }\n  }\n\n  @media (min-width: 1430px) {\n    .container {\n      width: var(--grid-containers-l);\n    }\n    .thumbnail-grid-responsive .thumbnail-col {\n      margin-left: var(--grid-offset-lg);\n      width: var(--grid-columns-width-lg);\n    }\n    .thumbnail-grid-responsive .thumbnail-col .picture-img {\n      height: var(--grid-columns-width-md);\n      width: var(--grid-columns-width-md);\n    }\n  }\n\n  @media (min-width: 1310px) {\n    .container {\n      width: var(--grid-containers-l);\n    }\n    .thumbnail-grid-responsive .thumbnail-col {\n      margin-left: var(--grid-offset-lg);\n      width: var(--grid-columns-width-lg);\n    }\n    .thumbnail-grid-responsive .thumbnail-col .picture-img {\n      height: var(--grid-columns-width-md);\n      width: var(--grid-columns-width-md);\n    }\n  }\n  `)})()},Ql=e=>{const t=e?.some((e=>/adslot1/.test(e.getAdUnitPath())));t&&(()=>{const e=document.getElementById(Hl),t=document.getElementById(Kl);e?.remove(),t?.remove(),window.removeEventListener("resize",Yl,!0)})()},{error:eu}=ot.a.tag("Deezer");(async()=>{await(async e=>{Zr.hubvisorUntilInitDuration(performance.now());const t=performance.now();return window.Hubvisor?.ready?ts("Hubvisor has already been loaded on this website: this is an error and should be fixed"):((ns||is)&&es("init was called more than once: please use refresh after first initialization"),is=await e,ns=fo({options:is,refresh:rs}),(0,xt.a)(ns.settings),Po(ns.settings.intrastitial),Zr.init(performance.now()-t),ko(ns.settings.secondChance),ns.settings.shouldPerformInitialAuction?rs(Ut.b.pageView):void 0)})({buildRefreshOptions:gl,publisherId:"01GBANTCTXS9RFE5JMJREEZJ2Y",support:il(),bidderAliases:al,ortb:{domainBlocklist:Xl,publisherDomain:"deezer.com",publisherName:"Deezer"},dfp2:{preGamCallStep:Ql},skinRendering:Zl}),Gl.resolve(),Wl()})().catch((e=>eu("Hubvisor init failed",e)))},(e,t,n)=>{n.d(t,{a:()=>s});var i=n(46);const r=e=>e?e.split("&").reduce(((e,t)=>{try{const[n,i]=t.split("=").map(decodeURIComponent);n&&(e[n]=i)}catch{}return e}),{}):{},a=()=>i.a.tryCatch((()=>r(location.hash.replace(/^#/,"")))).value??{};i.a.tryCatch((()=>r(location.search.replace(/^\?/,"")))).value;let o=a();addEventListener("hashchange",(()=>{o=a()}));const s=()=>o},(e,t,n)=>{n.d(t,{a:()=>a});var i=n(70);const r={[i.a.debug]:"#9C27B0",[i.a.info]:"#4CAF50",[i.a.warn]:"#FF9800",[i.a.error]:"#F44336"},a=e=>{if(e.type===i.a.table&&console.table)console.table(...e.metadata);else{const t=(({type:e,name:t,tag:n})=>{const i=(e=>{if(!e)return"#607D8B";const t=Math.PI;return`hsl(${(e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t})(e)*t%360}, 70%, 53%)`})(n);return{text:`%c${t}%c${e}%c${n}`,arguments:["background: linear-gradient(#4D4D4D, #5D5D5D); color: #fff; padding: 2px 4px; border-top-left-radius: 4px; border-bottom-left-radius: 4px;",`background: ${r[e]??"#000"}; color: #fff; padding: 2px 4px;`,`background: ${i}; color: #fff; padding: 2px 2px; border-top-right-radius: 4px; border-bottom-right-radius: 4px;`]}})({type:e.type,name:e.name,tag:e.tag});e.type===i.a.debug?console.debug(t.text,...t.arguments,e.message,...e.metadata):console.log(t.text,...t.arguments,e.message,...e.metadata)}}},(e,t,n)=>{n.d(t,{a:()=>i});const i=new(n(47).a)},(e,t,n)=>{n.d(t,{a:()=>r});var i=n(27);const r=(n(18),n(19)).b.then((e=>(i.e||(e=>{const t=["consent","dynamicTimeout","clientContext","remoteConfiguration","tdid","intrastitial","adnxsid"],n=new Set(Object.keys(e));for(const i of t)n.delete(i),e[i]})(e.storagePolicy.settings),e.storagePolicy)))},(e,t,n)=>{n.d(t,{a:()=>o});var i=n(29),r=n(25),a=n(1);const o=({cmp:e,storagePolicy:t},{name:n,assumeConsentBeforeCmp:o})=>{const s=new r.a((t=>{(0,a.i)(o)&&t.next({kind:"pre",value:o}),e.subscribe((e=>{t.next({kind:"post",snapshot:e})}))})),d=e=>(0,i.c)(e?.tcData,i.a.storageAccess);return new r.a((e=>{(0,r.b)([s,t]).subscribe((([t,i])=>{const r=i.custom?.hasConsent??d,a="pre"===t.kind?t.value:r(t.snapshot);e.next(a?i.settings[n].consent:i.settings[n].noConsent)}))}))}},(e,t,n)=>{n.d(t,{a:()=>r});var i=n(4);class r{registrations={};#a;#ft;constructor(e){this.#a=i.a.tag(`Registry<${e}>`)}register=(e,t)=>{this.registrations[e]&&this.#a.warn(`A module was already registered for '${e}', the previous one will be discarded`),this.registrations[e]=t,this.#a.debug(`Module '${e}' was successfully registered`),this.#wi(e)};#wi=e=>{if(!this.#ft)return;const t=this.registrations[e];if(!t)return this.#a.warn(`couldn't start module '${e}' because it wasn't registered`);try{t.start?.(this.#ft.options),this.#a.debug(`Module '${e}' was started successfully`)}catch(t){this.#a.error(`Error starting module '${e}'`,this.#ft.options,t)}};start=e=>{if(this.#ft)return this.#a.warn("start was called more than once: ignored",e);this.#ft={options:e};for(const e of Object.keys(this.registrations))this.#wi(e)}}},(e,t,n)=>{n.d(t,{a:()=>r});var i=n(4);class r{#a;items={};constructor(e){this.#a=i.a.tag(`Collection<${e}>`)}add=(e,t)=>{this.items[e]&&this.#a.warn(`A module was already registered for '${e}', the previous one will be discarded`),this.items[e]=t,this.#a.debug(`Item '${e}' was successfully added`)};list=()=>Object.entries(this.items).reduce(((e,[t,n])=>(n&&e.push({name:t,value:n}),e)),[]);get=e=>this.items[e]}},,(e,t,n)=>{n.d(t,{a:()=>a});var i=n(11),r=n(0);function a({startTime:e=r.ib,ttl:t=(()=>null),monotonic:n=!1,slack:a=5e3}={}){const o=new Map,s=[],d=n?e=>s.push(e):e=>s.splice((0,r.b)(s,e,(e=>e.expiry)),0,e);let c,l;function u(){if(l&&clearTimeout(l),s.length>0){const e=(0,r.ib)();c=Math.max(e,s[0].expiry+a),l=setTimeout((()=>{const e=(0,r.ib)();let t=0;for(const n of s){if(n.expiry>e)break;o.delete(n.item),t++}s.splice(0,t),l=null,u()}),c-e)}else l=null}let p={};return{[Symbol.iterator]:()=>o.keys(),add(n){!o.has(n)&&o.set(n,function(n){const r={},o=p;let s;const[m,f]=Object.entries({start:e,delta:t}).map((([e,t])=>{let m;return function(){const f=m={};i.a.resolve(t(n)).then((t=>{f===m&&(r[e]=t,o===p&&null!=r.start&&null!=r.delta&&(s=r.start+r.delta,d(g),(null==l||c>s+a)&&u()))}))}})),g={item:n,refresh:f,get expiry(){return s}};return m(),f(),g}(n))},clear(){s.length=0,u(),o.clear(),p={}},toArray:()=>Array.from(o.keys()),refresh(){s.length=0,u();for(const e of o.values())e.refresh()}}}},(e,t,n)=>{n.d(t,{a:()=>r});var i=n(1);const r=e=>t=>(e=>(0,i.m)(e)&&(0,i.l)(e.fetchTime))(t)&&e(t.value)}],t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(99);