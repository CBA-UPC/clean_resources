/*! For license information please see 2454.494d1910.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[2454],{2454:function(e,t,r){r.d(t,{o4:function(){return ge},yu:);var n,a=r(37762),o=r(93433),i=r(4942),s=r(15861),c=r(15671),u=r(43144),p=r(64687),h=r(75534),l=r(72339),f=r(44766),d=r(72413),v=new Map,k={activated:!1,tokenObservers:[]},g={initialized:!1,enabled:!1};function b(e){return v.get(e)||Object.assign({},k)}ar m="https://content-firebaseappcheck.googleapis.com/v1",x=3e4,y=96e4,E=function(){function e(t,r,n,a,o){if((0,c.Z)(this,e),this.operation=t,this.retryPolicy=r,this.getWaitDuration=n,this.lowerBound=a,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=a,a>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}return(0,u.Z)(e,[{key:"start",value:,{key:"stop",value:,{key:"isRunning",value:,{key:"process",value:function(){var e=(0,s.Z)(p.mark((function e(t){return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.stop(),e.prev=1,this.pending=new f.BH,e.next=5,T(this.getNextRun(t));case 5:return this.pending.resolve(),e.next=8,this.pending.promise;case 8:return this.pending=new f.BH,e.next=11,this.operation();case 11:return this.pending.resolve(),e.next=14,this.pending.promise;case 14:this.process(!0).catch((function(){})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),this.retryPolicy(e.t0)?this.process(!1).catch((function(){})):this.stop();case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getNextRun",value:]),e}();ar A=(n={},(0,i.Z)(n,"already-initialized","You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance."),(0,i.Z)(n,"use-before-activation","App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services."),(0,i.Z)(n,"fetch-network-error","Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}."),(0,i.Z)(n,"fetch-parse-error","Fetch client could not parse response. Original error: {$originalErrorMessage}."),(0,i.Z)(n,"fetch-status-error","Fetch server returned an HTTP error status. HTTP status: {$httpStatus}."),(0,i.Z)(n,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,i.Z)(n,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,i.Z)(n,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,i.Z)(n,"recaptcha-error","ReCAPTCHA error."),(0,i.Z)(n,"throttled","Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"),n),P=new f.LL("appCheck","AppCheck",A);function C(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}unction I(e){var t=Math.round(e/1e3),r=Math.floor(t/86400),n=Math.floor((t-3600*r*24)/3600),a=Math.floor((t-3600*r*24-3600*n)/60),o=t-3600*r*24-3600*n-60*a,i="";return r&&(i+=R(r)+"d:"),n&&(i+=R(n)+"h:"),i+=R(a)+"m:"+R(o)+"s"}function R(e){return 0===e?"00":e>=10?e.toString():"0"+e}function S(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,s.Z)(p.mark((function e(t,r){var n,a,o,i,s,c,u,h,l,f,d;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,a=t.body,o={"Content-Type":"application/json"},!(i=r.getImmediate({optional:!0}))){e.next=8;break}return e.next=6,i.getHeartbeatsHeader();case 6:(s=e.sent)&&(o["X-Firebase-Client"]=s);case 8:return c={method:"POST",body:JSON.stringify(a),headers:o},e.prev=9,e.next=12,fetch(n,c);case 12:u=e.sent,e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(9),P.create("fetch-network-error",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 18:if(200===u.status){e.next=20;break}throw P.create("fetch-status-error",{httpStatus:u.status});case 20:return e.prev=20,e.next=23,u.json();case 23:h=e.sent,e.next=29;break;case 26:throw e.prev=26,e.t1=e.catch(20),P.create("fetch-parse-error",{originalErrorMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 29:if((l=h.ttl.match(/^([\d.]+)(s)$/))&&l[2]&&!isNaN(Number(l[1]))){e.next=32;break}throw P.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration "+"format: ".concat(h.ttl)});case 32:return f=1e3*Number(l[1]),d=Date.now(),e.abrupt("return",{token:h.token,expireTimeMillis:d+f,issuedAtTimeMillis:d});case 35:case"end":return e.stop()}}),e,null,[[9,15],[20,26]])})))).apply(this,arguments)}function D(e,t){var r=e.options,n=r.projectId,a=r.appId,o=r.apiKey;return{url:"".concat(m,"/projects/").concat(n,"/apps/").concat(a,":").concat("exchangeRecaptchaEnterpriseToken","?key=").concat(o),body:{recaptcha_enterprise_token:t}}}function M(e,t){var r=e.options,n=r.projectId,a=r.appId,o=r.apiKey;return{url:"".concat(m,"/projects/").concat(n,"/apps/").concat(a,":").concat("exchangeDebugToken","?key=").concat(o),body:{debug_token:t}}}var O="firebase-app-check-store",N="debug-token",B=null;function H(){return B||(B=new Promise((function(e,t){try{var r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=r.onerror=function(e){var r;t(P.create("storage-open",{originalErrorMessage:null===(r=e.target.error)||void 0===r?void 0:r.message}))},r.onupgradeneeded=function(e){var t=e.target.result;if(0===e.oldVersion)t.createObjectStore(O,{keyPath:"compositeKey"})}}catch(n){t(P.create("storage-open",{originalErrorMessage:null===n||void 0===n?void 0:n.message}))}})))}tion $(){return($=(0,s.Z)(p.mark((function e(t,r){var n,a,o,i;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:return n=e.sent,a=n.transaction(O,"readwrite"),o=a.objectStore(O),i=o.put({compositeKey:t,value:r}),e.abrupt("return",new Promise(());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(p.mark((function e(t){var r,n,a,o;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:return r=e.sent,n=r.transaction(O,"readonly"),a=n.objectStore(O),o=a.get(t),e.abrupt("return",new Promise(());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ar U=new d.Yd("@firebase/app-check");function X(){return(X=(0,s.Z)(p.mark((function e(t){var r;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,f.hl)()){e.next=12;break}return r=void 0,e.prev=2,e.next=5,z(t);case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),U.warn("Failed to read token from IndexedDB. Error: ".concat(e.t0));case 11:return e.abrupt("return",r);case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function G(e,t){return(0,f.hl)()?e,t).catch(():Promise.resolve()}function Y(){return(Y=(0,s.Z)(p.mark((function e(){var t,r;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,j();case 4:t=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(t){e.next=15;break}return K(r=(0,f.k$)()).catch((),e.abrupt("return",r);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}nction Q(){return(Q=(0,s.Z)(p.mark((function e(){var t;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=w()).enabled||!t.token){e.next=5;break}return e.abrupt("return",t.token.promise);case 5:throw Error("\n            Can't get debug token in production mode.\n        ");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){var e=(0,f.Rd)(),t=w();if(t.initialized=!0,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){t.enabled=!0;var r=new f.BH;t.token=r,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(function(){return Y.apply(this,arguments)}())}}var te={error:"UNKNOWN_ERROR"};function re(e){return ne.apply(this,arguments)}function ne(){return ne=(0,s.Z)(p.mark((function e(t){var r,n,a,o,i,s,c,u,h,l=arguments;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]&&l[1],_(n=t.app),a=b(n),o=a.token,i=void 0,o&&!ce(o)&&(a.token=void 0,o=void 0),o){e.next=18;break}return e.next=10,a.cachedTokenPromise;case 10:if(!(s=e.sent)){e.next=18;break}if(!ce(s)){e.next=16;break}o=s,e.next=18;break;case 16:return e.next=18,G(n,void 0);case 18:if(r||!o||!ce(o)){e.next=20;break}return e.abrupt("return",{token:o.token});case 20:if(c=!1,!J()){e.next=40;break}if(a.exchangeTokenPromise){e.next=33;break}return e.t0=S,e.t1=M,e.t2=n,e.next=28,V();case 28:e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5=t.heartbeatServiceProvider,a.exchangeTokenPromise=(0,e.t0)(e.t4,e.t5).finally((function(){a.exchangeTokenPromise=void 0})),c=!0;case 33:return e.next=35,a.exchangeTokenPromise;case 35:return u=e.sent,e.next=38,G(n,u);case 38:return a.token=u,e.abrupt("return",{token:u.token});case 40:return e.prev=40,a.exchangeTokenPromise||(a.exchangeTokenPromise=a.provider.getToken().finally((),c=!0),e.next=44,b(n).exchangeTokenPromise;case 44:o=e.sent,e.next=51;break;case 47:e.prev=47,e.t6=e.catch(40),e.t6.code==="appCheck/".concat("throttled")?U.warn(e.t6.message):U.error(e.t6),i=e.t6;case 51:if(o){e.next=55;break}h=ue(i),e.next=63;break;case 55:if(!i){e.next=59;break}h=ce(o)?{token:o.token,internalError:i}:ue(i),e.next=63;break;case 59:return h={token:o.token},a.token=o,e.next=63,G(n,o);case 63:return c&&se(n,h),e.abrupt("return",h);case 65:case"end":return e.stop()}}),e,null,[[40,47]])}))),ne.apply(this,arguments)}function ae(e,t,r,n){var a=b(e.app),i={next:r,error:n,type:t};if(a.tokenObservers=[].concat((0,o.Z)(a.tokenObservers),[i]),a.token&&ce(a.token)){var s=a.token;Promise.resolve().then((function(){r({token:s.token}),ie(e)})).catch((function(){}))}a.cachedTokenPromise.then(()}function oe(e,t){var r=b(e),n=r.tokenObservers.filter(();0===n.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=n}function ie(e){var t=b(e.app),r=t.tokenRefresher;r||(r=function(e){var t=e.app;return new E((0,s.Z)(p.mark((function r(){var n;return p.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(b(t).token){r.next=7;break}return r.next=4,re(e);case 4:n=r.sent,r.next=10;break;case 7:return r.next=9,re(e,!0);case 9:n=r.sent;case 10:if(!n.error){r.next=12;break}throw n.error;case 12:if(!n.internalError){r.next=14;break}throw n.internalError;case 14:case"end":return r.stop()}}),r)}))),(,(,x,y)}(e),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function se(e,t){var r,n=b(e).tokenObservers,o=(0,a.Z)(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(s){}}}catch(c){o.e(c)}finally{o.f()}}unction ue(e){return{token:(t=te,f.US.encodeString(JSON.stringify(t),!1)),error:e};var t}var pe=function(){eturn(0,u.Z)(e,[{key:"_delete",value:function(){var e,t=b(this.app).tokenObservers,r=(0,a.Z)(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;oe(this.app,n.next)}}catch(o){r.e(o)}finally{r.f()}return Promise.resolve()}}]),e}();var he="https://www.google.com/recaptcha/enterprise.js";function le(e,t){var r=new f.BH;b(e).reCAPTCHAState={initialized:r};var n=de(e),a=C(!0);return a?fe(e,t,a,n,r):function(e){var t=document.createElement("script");t.src=he,t.onload=e,document.head.appendChild(t)}((function(){var a=C(!0);if(!a)throw new Error("no recaptcha");fe(e,t,a,n,r)})),r.promise}function fe(e,t,r,n,a){r.ready((function(){!function(e,t,r,n){var a=r.render(n,{sitekey:t,size:"invisible",callback:function(){b(e).reCAPTCHAState.succeeded=!0},"error-callback":function(){b(e).reCAPTCHAState.succeeded=!1}}),o=b(e);o.reCAPTCHAState=Object.assign(Object.assign({},o.reCAPTCHAState),{widgetId:a})}(e,t,r,n),a.resolve(r)}))}function de(e){var t="fire_app_check_".concat(e.name),r=document.createElement("div");return r.id=t,r.style.display="none",document.body.appendChild(r),t}unction ke(){return(ke=(0,s.Z)(p.mark((function e(t){var r,n;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(t),r=b(t).reCAPTCHAState,e.next=4,r.initialized.promise;case 4:return n=e.sent,e.abrupt("return",new Promise(());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=function(){eturn(0,u.Z)(e,[{key:"getToken",value:function(){var e=(0,s.Z)(p.mark((function e(){var t,r,n,a,o;return p.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we(this._throttleData),e.next=3,ve(this._app).catch(();case 3:if(a=e.sent,null===(t=b(this._app).reCAPTCHAState)||void 0===t?void 0:t.succeeded){e.next=6;break}throw P.create("recaptcha-error");case 6:return e.prev=6,e.next=9,S(D(this._app,a),this._heartbeatServiceProvider);case 9:o=e.sent,e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(6),!(null===(r=e.t0.code)||void 0===r?void 0:r.includes("fetch-status-error"))){e.next=19;break}throw this._throttleData=be(Number(null===(n=e.t0.customData)||void 0===n?void 0:n.httpStatus),this._throttleData),P.create("throttled",{time:I(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus});case 19:throw e.t0;case 20:return this._throttleData=null,e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,this,[[6,12]])})));return ()},{key:"initialize",value:function(e){this._app=e,this._heartbeatServiceProvider=(0,h.qX)(e,"heartbeat"),le(e,this._siteKey).catch((function(){}))}},{key:"isEqual",value:]),e}();function be(e,t){if(404===e||403===e)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:e};var r=t?t.backoffCount:0,n=(0,f.$s)(r,1e3,2);return{backoffCount:r+1,allowRequestsAfter:Date.now()+n,httpStatus:e}}function we(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw P.create("throttled",{time:I(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,h.Mq)(),t=arguments.length>1?arguments[1]:void 0;e=(0,f.m9)(e);var r=(0,h.qX)(e,"app-check");if(w().initialized||ee(),J()&&V().then((),r.isInitialized()){var n=r.getImmediate(),a=r.getOptions();if(a.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&a.provider.isEqual(t.provider))return n;throw P.create("already-initialized",{appName:e.name})}var o=r.initialize({options:t});return xe(e,t.provider,t.isTokenAutoRefreshEnabled),b(e).isTokenAutoRefreshEnabled&&ae(o,"INTERNAL",(),o}function xe(e,t,r){var n=function(e,t){return v.set(e,t),v.get(e)}(e,Object.assign({},k));n.activated=!0,n.provider=t,n.cachedTokenPromise=e).then((function(t){return t&&ce(t)&&(n.token=t,se(e,{token:t.token})),t})),n.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,n.provider.initialize(e)}var ye="app-check-internal";(0,h.Xd)(new l.wA("app-check",(function(e){return e.getProvider("app").getImmediate(),e.getProvider("heartbeat"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(()),(0,h.Xd)(new l.wA(ye,(function(e){return function(e){return{getToken:addTokenListener:removeTokenListener:}(e.getProvider("app-check").getImmediate())}),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,h.KN)("@firebase/app-check","0.7.0")}}]);