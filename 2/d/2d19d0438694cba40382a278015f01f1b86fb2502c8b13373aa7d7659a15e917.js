(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1369:1370:function(t,e,n){},1371:150:151:152:function(t,e,n){"use strict";r c=n(166);function o(t){return function(){var e,n,o,u=r(t);if()){var i=r(this).constructor;e=Reflect.construct(u,arguments,i)}else e=u.apply(this,arguments);return n=this,!(o=e)||"object"!==a(o)&&"function"!==typeof o?Object(c.a)(n):o}}n.d(e,"a",function(){return o})},153:1549:function(t,e,n){"use strict";n.r(e);var r=n(36),a=n(30),c=n(221),o=n(195),u=n(150),i=n(151),s=n(153),l=n(152),p=n(0),f=n.n(p),d=n(83),m=n(35),h=n(164),y=n(55),b=function(t){return f.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 71.6 71.6",className:"upgrade-icon"},f.a.createElement("defs",null),f.a.createElement("path",{className:"a",d:"M35.8,0A35.8,35.8,0,1,0,71.6,35.8,35.764,35.764,0,0,0,35.8,0Zm0,64.8a29,29,0,1,1,29-29A29.021,29.021,0,0,1,35.8,64.8Z"}),f.a.createElement("path",{className:"a",d:"M36.4,18.6a1.04,1.04,0,0,0-1.6,0L20.1,33.2a1.328,1.328,0,0,0,1,2.3h10a1.884,1.884,0,0,0-.2.8v16A1.685,1.685,0,0,0,32.6,54h6.1a1.685,1.685,0,0,0,1.7-1.7v-16a1.884,1.884,0,0,0-.2-.8h10a1.415,1.415,0,0,0,1-2.4Z"}))},v=function(t){var e=t.title,n=t.summary,r=t.list,a=t.price,c=t.currentPlan,o=t.selectPlan,u=t.packageQuantity;return f.a.createElement("article",{className:u?"subscription-card pkgs":"subscription-card"},f.a.createElement("h3",{className:"title"},e),f.a.createElement("p",{className:"summary"},n),f.a.createElement("ul",null,function(t){return t.map(}(r)),f.a.createElement("footer",null,a&&f.a.createElement("p",{className:"string"===typeof a?"price free":"price paid"},a),function(t){var n={};return t===e?(n.className="plan-btn current",n.text="Current Plan",n.route="/home/settings/account"):("starter"===e&&"starter"!==t&&(n.className="plan-btn",n.text="Select Plan",n.route="/home/settings/subscription/upgrade",n.disabled=!0),"foundation"===e&&"starter"===t&&(n.className="plan-btn",n.text="Upgrade Plan",n.icon=f.a.createElement(b,null),n.route="/home/settings/subscription/upgrade"),"enterprise"===e&&"enterprise"!==t&&(n.className="plan-btn",n.text="Contact Us",n.icon=f.a.createElement("i",{className:"material-icons"},"call"),n.route="https://concept3d.com/contact")),f.a.createElement(m.a,{disabled:n.disabled,handleClick:name:e,className:n.className},n.icon,"\xa0 ",n.text)}(c)),Boolean(u)&&f.a.createElement("p",{className:"pkg-quantity"},"Additional tour stop packages: ",f.a.createElement("span",null,u),f.a.createElement(y.a,{className:"edit-pkgs",to:"/home/settings/subscription/upgrade"},"Edit")))},g=n(1369),O=n.n(g),P=(n(1370),function(t){var e=t.history;return f.a.createElement("section",{className:"enterprise-user-card"},f.a.createElement("img",{src:O.a,alt:"concept 3d logo"}),f.a.createElement("h2",null,"Tour Builder ",f.a.createElement("span",null,"Enterprise")),f.a.createElement("p",null,"Contact your client success manager or"," ",f.a.createElement("a",{href:"mailto:support@concept3d.com"},"support@concept3d.com"),f.a.createElement("br",null),"for assistance with your subscription"),f.a.createElement(m.a,{handleClick:,f.a.createElement("i",{className:"material-icons"},"reply"),"\xa0Go back"))}),E=function(t){var e=window.open();e.opener=null,e.location=t},j=(n(1371),function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).changePlan=function(e,n){var r=t.props,a=r.tier,c=r.history;if("enterprise"!==a&&"enterprise"===e)return E(n);if(e!==t.state.selectedPlan.name){var o={name:e,description:"starter"===e?["2 tour limit","6 stops included, limited to 3 stops per tour"]:["10 tour stop base package","Included"],price:"starter"===e?0:249};t.setState({selectedPlan:o},}else c.push(n)},t.addStopPackage=function(){t.setState({addStopPackage:!0},},t.state={selectedPlan:{name:"",description:"",price:null},addStopPackage:!1},t}return Object(i.a)(n,[{key:"componentDidMount",value:,{key:"componentDidUpdate",value:function(t,e){var n=this.props.tier;t.tier!==n&&this.changePlan(n)}},{key:"shouldComponentUpdate",value:,{key:"render",value:function(){var t=this,e=this.props,n=e.path,r=e.tier,a=e.routes,c=e.email,o=e.stripeId,u=e.accountId,i=e.accountName,s=e.payment,l=e.updating,p=e.stripeError,y=e.invoices,b=e.setStripeError,g=e.getPaymentHistory,O=e.upgradeTourAccount,E=e.updatePackageQuantity,j=e.addNewPaymentSource,k=e.updatePaymentSource,C=e.packageQuantity,N=e.permissions,A=e.guardRails,w=e.history;return f.a.createElement("main",{id:"subscription-manager"},r&&f.a.createElement(f.a.Fragment,null,"/home/settings/subscription"===n&&f.a.createElement(f.a.Fragment,null,"enterprise"===r?f.a.createElement(P,{history:w}):f.a.createElement(f.a.Fragment,null,f.a.createElement("header",null,f.a.createElement("h2",null,"Tour Builder Options"),f.a.createElement("p",null,"Find the Tour Builder plan that's perfect for you")),f.a.createElement("section",{className:"card-wrapper"},f.a.createElement(v,{title:"starter",summary:"Try out Tour Builder and see if it's right for you",list:["2 tours","3 stop limit per tour","Panoramas with auto rotate","Tour stop descriptions","Minimap","Virtual Reality mode"],price:"Free",currentPlan:r,selectPlan:this.changePlan}),"foundation"===r&&f.a.createElement(v,{title:"foundation",summary:"Create rich interactive tours with more stops and media",list:["10 tour stops included","Additional tour stops available","Unlimited images and videos","Audio tracks with text transcripts","Customizable styles","Advanced share and embed options","Email support","Remove Concept3D banners"],price:249,currentPlan:r,selectPlan:this.changePlan,packageQuantity:C}),f.a.createElement(v,{title:"enterprise",summary:"Complete your tour with additional features and customization",list:["Interactive Map","Additional stop images & videos","Audio tracks with text transcripts","Clickable hotspots","Customizable styles","Specialized training","Lead generation embed","Dedicated Client Success Manager","Email and phone support"],currentPlan:r,selectPlan:this.changePlan})),"foundation"===r&&[!C&&f.a.createElement(m.a,{className:"add-stops-btn",handleClick:this.addStopPackage,key:"add-stops"},f.a.createElement("i",{className:"material-icons"},"add_circle"),"\xa0 Add additional tour stops to your current plan"),f.a.createElement(h.a,{key:"cancel-sub",className:C?"cancel-sub has-pkg":"cancel-sub",href:"https://www.concept3d.com/tour-builder-starter-help/",newTab:!0},f.a.createElement("i",{className:"material-icons"},"account_box"),"\xa0 Contact support to cancel your account")])),a.map(function(e){return f.a.createElement(d.a,{key:e.path,path:e.path,render:function(n){return f.a.createElement(e.component,Object.assign({key:e.path},n,{email:c,tier:r,stripeId:o,accountId:u,accountName:i,selectedPlan:t.state.selectedPlan,upgradeAccount:O,updatePackageQuantity:E,packageQuantity:C,changePlan:t.changePlan,addStopPackage:t.state.addStopPackage,paymentData:s,invoices:Boolean(y.length)&&y,getPaymentHistory:g,addNewPaymentSource:j,updatePaymentSource:k,stripeError:p,setStripeError:b,updating:l,guardRails:A,permissions:N}))}})})))}}]),n}(p.Component));e.default=Object(r.c)(function(t){var e=t.account.permissions,n=e.maxTours,r=e.maxStops;return{payment:t.account.payment,email:t.userCredentials.email,stripeId:t.account.stripeId,tier:t.account.tier,stripeError:t.account.stripeError,packageQuantity:t.account.packageQuantity,updating:t.account.updating,invoices:t.account.invoices,accountId:t.account.tourAccountId,accountName:t.account.tourAccountName,permissions:{maxTours:n,maxStops:r},guardRails:Object(c.a)(t)}},(j)},164:function(t,e,n){"use strict";var r=n(12),a=n(0),c=n.n(a),o=["handleClick","newTab","children"];e.a=function(t){var e=t.handleClick,n=t.newTab,a=t.children,u=Object(r.a)(t,o);return c.a.createElement("a",Object.assign({onClick:e,target:n?"_blank":null,rel:n?"noopener noreferrer":null},u),a)}},166:182:function(t,e,n){"use strict";n.d(e,"c",function(){return p}),n.d(e,"e",function(){return f}),n.d(e,"b",function(){return d}),n.d(e,"d",function(){return m}),n.d(e,"a",function(){return h});var r=n(2),a=n.n(r),c=n(3),o=n(23),u=n(6),i=n(7),s=n(28),l=n(25),p=function(t){var e=Object(i.a)();return fetch("".concat(u.a.tourAPI,"/accounts/").concat(encodeURIComponent(t)),{headers:e,credentials:"include"}).then(.then(function(t){return t})},f=function(t){var e=t.accountId,n=t.userId,r=t.packageQuantity,a=t.newTier,c=t.accountName,s=Object(i.a)();return fetch("".concat(u.a.accountsAPI,"/api/admin/accounts/tour/upgrade/").concat(encodeURIComponent(n)),{method:"POST",headers:s,body:JSON.stringify(t),credentials:"include"}).then(function(t){return t.json()}).then(function(t){if("string"===typeof t)return t;var n=t.stripeResponse,u=t.newPermissions,i=n;return o.a.push("/home/settings/subscription"),Object.assign({},{name:c,aid:e,stripeId:i.id,tier:a,packageQuantity:r,tierPermissions:u,customer:i})})},d=function(t,e){var n=new Headers,r=s.a.token;n.append("Authorization","Bearer ".concat(r));var a=[];if(e){var c=encodeURIComponent(e);a.push("search=".concat(c))}t&&a.push("start=".concat(t));var o=a.length?"".concat(u.a.tourAPI,"/admin/v2/accounts?sort=name asc, tier asc&").concat(a.join("&")):"".concat(u.a.tourAPI,"/admin/v2/accounts?sort=name asc, tier asc");return fetch(encodeURI(o),{headers:n,credentials:"include"}).then(function(t){return t.json()}).then(function(t){return t}).catch(},m=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c,o=arguments;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],r=Object(i.a)(),t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/v2/accounts/").concat(encodeURIComponent(e)),{headers:r,credentials:"include"});case 4:return c=t.sent,t.next=7,Object(l.a)(c,n);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),h=function(t,e){var n=Object(i.a)();return fetch("".concat(u.a.accountsAPI,"/api/v2/").concat(encodeURIComponent(t),"/settings/ga"),{headers:n,method:"PUT",body:JSON.stringify(e),credentials:"include"}).then(.then(function(t){return t}).catch(}},195:function(t,e,n){"use strict";var r=n(2),a=n.n(r),c=n(3),o=n(6),u=n(7),i=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(),t.prev=1,t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/").concat(encodeURIComponent(e.userId),"/source/update"),{method:"POST",headers:n,body:JSON.stringify(e),credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:if(!(c=t.sent).errorMessage){t.next=10;break}return t.abrupt("return",c.errorMessage);case 10:return t.abrupt("return",c);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",t.t0);case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(),t.prev=1,t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/").concat(encodeURIComponent(e.userId),"/source/new"),{method:"POST",headers:n,body:JSON.stringify(e),credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:if(!(c=t.sent).errorMessage){t.next=10;break}return t.abrupt("return",c.errorMessage);case 10:return t.abrupt("return",c);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",t.t0);case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(),t.prev=1,t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/payments/").concat(encodeURIComponent(e)),{headers:n,credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}(),p=n(182),f=n(197),d=n(36);n.d(e,"f",function(){return h}),n.d(e,"e",function(){return y}),n.d(e,"c",function(){return b}),n.d(e,"h",function(){return v}),n.d(e,"g",function(){return g}),n.d(e,"b",function(){return O}),n.d(e,"d",function(){return P}),n.d(e,"a",function(){return E});var m=function(t){return{type:"SAVE_PAYMENT_INFO",data:t}},h=y=function(t){return{type:"SAVE_ACCOUNT_INFO",stripeId:t.stripeId,status:t.status,tier:t.tier,packageQuantity:t.packageQuantity,permissions:t.tierPermissions||{},payment:t.customer,aid:t.aid,name:t.name,gaId:t.gaId,mapboxToken:t.mapboxToken}},b=function(t,e){return function(n){Object(p.b)(t,e).then(function(t){n({type:"SAVE_ALL_ACCESSIBLE_ACCOUNTS",accounts:t})})}},v=function(t){return function(e){e({type:"ACCOUNT_UPDATING"}),Object(p.e)(t).then(function(n){e(Object(f.c)(t.newTier)),"string"===typeof n?Object(d.b)(function(){e(h(n)),e({type:"ACCOUNT_UPDATING"})}):Object(d.b)(function(){e(y(n)),e({type:"ACCOUNT_UPDATING"})})})}},g=function(t){return function(e){e({type:"ACCOUNT_UPDATING"}),i(t).then(function(n){"string"===typeof n?Object(d.b)(function(){e(h(n)),e({type:"ACCOUNT_UPDATING"})}):(Object(d.b)(function(){e(m(n)),e({type:"ACCOUNT_UPDATING"})}),"function"===typeof t.callback&&t.callback())})}},O=function(t){return function(e){e({type:"ACCOUNT_UPDATING"}),s(t).then(function(n){"string"===typeof n?(Object(d.b)(,e(h(n)),e({type:"ACCOUNT_UPDATING"})):(Object(d.b)(function(){e(m(n)),e({type:"ACCOUNT_UPDATING"})}),"function"===typeof t.callback&&t.callback())})}},P=function(t){return function(e){l(t).then(}},E=function(t,e){return function(n){n({type:"ACCOUNT_UPDATING"}),Object(p.a)(t,e).then(function(t){Object(d.b)(function(){n({type:"UPDATE_GAID",gaId:t.gaId}),n({type:"ACCOUNT_UPDATING"})})})}}},197:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return p}),n.d(e,"c",function(){return f});var r=n(2),a=n.n(r),c=n(3),o=n(36),u=n(170),i=n(162),s=n(158),l=function(t,e){return function(n){Object(u.c)(t).then(function(t){var r=t.tour;Object(o.b)(function(){n(Object(s.h)(r)),n(Object(i.b)(!0))}),"function"===typeof e&&e()})}},p=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(t);case 2:r=e.sent,n(d(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},f=function(t){return function(e,n){var r=Object.values(n().tourData.tours).filter(function(t){return t.published}).map(function(t){return t.id});Promise.all(r.map(function(){var e=Object(c.a)(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)(n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return ()))}},d=function(t){return{type:"SAVE_PUBLIC_TOUR",aid:t.aid,id:t.id,panos:t.panos,images:t.images,videos:t.videos,audio:t.audio,stops:t.stops,tours:t.tourData,tier:t.tier,active:t.active,gaId:t.gaId,mapboxToken:t.mapboxToken}}},221:function(t,e,n){"use strict";var r=n(222),a=Object(r.createSelector)(function(t){return t.tours.tours},function(t,e){var n=Object.keys(e).length,r=Object.keys(t).length,a=Object.keys(t).map(function(e){return t[e]}),c=a.reduce(function(t,e){return t[e.id]=e.stopIds&&e.stopIds.length,t},{});return{totalCreatedStops:n,totalActiveStops:a.reduce(function(t,e){return e.stopIds?t+e.stopIds.length:0},0),totalTours:r,stopCountPerTour:c}});e.a=a},222:function(t,e,n){"use strict";_esModule=!0,e.defaultMemoize=a,e.createSelectorCreator=c,e.createStructuredSelector=var o=e.createSelector=c(a)},55:function(t,e,n){"use strict";n.d(e,"a",function(){return y}),n.d(e,"b",;var r=n(83),a=n(14),c=n(0),o=n.n(c),u=n(13),i=(n(15),n(10)),s=n(16),l=n(18);o.a.Component;o.a.Component;var p=f=d=function(t){return t},m=o.a.forwardRef;"undefined"===typeof m&&(m=d);var h=m(;var y=m(,b=function(t){return t},v=o.a.forwardRef;"undefined"===typeof v&&(v=b);var g=v(}}]);