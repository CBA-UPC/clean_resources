'use strict';mix_d("AutoPartFinderBrowsePageCards__apf-desktop-browse-v0:apf-desktop-browse-v0__fBv3weyq","exports tslib @c/logger @c/remote-operations @c/scoped-dom @c/tracking @c/browser-operations @c/aui-modal @c/dom @c/metrics @c/scoped-metrics @p/a-popover @c/siege @c/navigation @p/A @c/aui-truncate @p/a-dropdown @p/a-events @c/aui-untrusted-ajax @p/a-button".split(" "),function(Va,q,Ae,Be,Ce,Wa,De,Ee,ja,Jb,Fe,Ge,He,Ie,Je,Ke,Le,Me,Ne,Oe){ar t=S(Ae),L=S(Be),pa=S(Ce),z=S(De),Pe=S(Ee),Cc=S(ja),Dc=S(Ge),Qe=S(Ie),G=S(Je),Re=S(Ke),T=S(Le),ka=S(Me),Da=S(Ne),Ec=S(Oe),J=function(a){function b(c,d,e,f,h){var k=a.call(this,c)||this;k.toString=function(){var l="NA";if(k.cause)if(k.cause instanceof b)l=k.cause.toString();else if(k.cause instanceof Error)Error.stackTraceLimit=1,l=(l=k.cause.stack)?"[ name: "+k.cause.name+" ], [ message: "+k.cause.message+" ], [ stackTrace: "+l.replace(/(\r\n|\n|\r)/gm,";"):"[ name: "+k.cause.name+
" ], [ message: "+k.cause.message+" ], [ stackTrace: "+l;else try{l=JSON.stringify(k.cause)}catch(n){l=""+k.cause}return"Error occurred with following detail: [ message: "+k.message+" ], [ component: "+k.componentName+" ], [ method: "+k.methodName+" ], [ errorCode: "+JSON.stringify(k.errorCode)+" ], [ cause: "+l+" ]"};k.getRootCause=function(){return k.cause?k.cause instanceof b?k.cause.getRootCause():k.cause:k};k.cause=h;k.componentName=d;k.errorCode=f;k.methodName=e;k.name=k.constructor.name;Object.setPrototypeOf(k,
b.prototype);return k}q.__extends(b,a);return b}(Error),m={COMPONENT_METRIC_PREFIX:"automotive-ui-components",logCount:function(a,b){try{Jb.count(a,b)}catch(c){t["default"].log("Failed to log "+a+" CSM metric with error: "+c,"ERROR","international-automotive")}},logEvent:function(a,b,c,d){try{Jb.event(a,b,c,d)}catch(e){t["default"].log("Failed to log nexus metric with error: "+e,"ERROR","international-automotive")}},logScopedCount:function(a,b){try{Fe.count(a,b)}catch(c){t["default"].log("Failed to log "+
a+" CSM metric with error: "+c,"ERROR","international-automotive")}}},Fc=function(a,b,c){a=new J(a,b,c,{code:400,isRetriable:!1,name:"BadRequestError"});t["default"].log(a.toString(),"ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":"+b+":badRequest",1);return a},Gc=function(a,b,c){a=new J(a,b,c,{code:400,isRetriable:!1,name:"BadRequestError"});m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":"+b+":badRequest",1);return a},Hc=function(a,b,c,d){a=new J(""+a,b,c,{code:424,
isRetriable:!1,name:"FailedDependencyError"},d);t["default"].log(a.toString(),"ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":"+b+":failure",1);return a},Ic=function(a,b,c,d){a=new J(""+a,b,c,{code:424,isRetriable:!1,name:"FailedDependencyError"},d);m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":"+b+":failure",1);return a},r={logAndReturnBadRequestError:Fc,logAndReturnFailedDependencyError:Hc,logAndThrowBadRequestError:function(a,b,c){throw Fc(a,b,c);},logAndThrowFailedDependencyError:function(a,
b,c,d){throw Hc(a,b,c,d);},returnBadRequestError:Gc,returnFailedDependencyError:Ic,throwBadRequestError:function(a,b,c){throw Gc(a,b,c);},throwFailedDependencyError:function(a,b,c,d){throw Ic(a,b,c,d);}},Kb;(Kb||(Kb={})).secondaryViewHideTrigger="secondaryViewHideTrigger";var Lb,v={ID:"automotive-pf",getDataBlockId:function(){return"automotive-pf-data-block"},getErrorAttributionId:function(){return"international-automotive"},getPartfinderSecondaryViewId:function(){return"automotive-pf-partfinder-secondary-view-id"},
getPrimaryViewContainerId:function(){return"automotive-pf-primary-view-container"},getPrimaryViewId:function(){return"automotive-pf-primary-view"},getSecondaryViewContentChildContainerId:function(){return"automotive-pf-secondary-view-content-child-container"},getSecondaryViewContentContainerId:function(){return"automotive-pf-secondary-view-content-container"},getSecondaryViewContentParentContainerId:function(){return"automotive-pf-secondary-view-content-parent-container"},getSecondaryViewErrorMsgContainerId:function(){return"automotive-pf-secondary-view-error-msg-container"},
getSecondaryViewHideTrigger:function(){return"automotive-pf-secondary-view-hide-trigger"},getSecondaryViewHsnTsnErrorMsgContainerId:function(){return"automotive-pf-secondary-view-error-msg-container-hsn-tsn"},getSecondaryViewName:function(){return"automotive-pf-secondary-view-name"},getSecondaryViewSpinnerContainerId:function(){return"automotive-pf-secondary-view-spinner-container"},getSecondaryViewTrigger:function(){return"automotive-pf-secondary-view-trigger"},getTirefinderSecondaryViewId:function(){Lb||
(Lb=(new Date).getTime().toString().substr(10)+Math.random().toString(36).substr(10));return"automotive-pf-tirefinder-secondary-view-id-"+Lb},getTirefinderViewSelectionDataBlock:,Jc=function(a){var b,c=[];try{for(var d=q.__values(Cc["default"].scopes),e=d.next();!e.done;e=d.next())for(var f=e.value.getElementsByClassName(a),h=0;h<f.length;h++)void 0!==f[h]&&c.push(f[h])}catch(l){var k={error:l}}finally{try{e&&!e.done&&(b=d.return)&&
b.call(d)}finally{if(k)throw k.error;}}return c},Kc=function(a){var b=Jc(a);b.length||r.logAndThrowFailedDependencyError("could not find elements with class: "+a,"dom-client","getElementsByClassNameOrThrow",null);return b},g={getElementByClassName:function(a){var b,c=[];try{for(var d=q.__values(Cc["default"].scopes),e=d.next();!e.done;e=d.next()){var f=e.value.getElementsByClassName(a)[0];void 0!==f&&c.push(f)}}catch(k){var h={error:k}}finally{try{e&&!e.done&&(b=d.return)&&b.call(d)}finally{if(h)throw h.error;
}}if(1===c.length)return c[0]},getElementsByClassName:Jc,getElementsByClassNameOrThrow:Kc,getFirstElementByClassNameOrThrow:,ea={getElementByClassName:function(a){var b=g.getElementsByClassName(a);if(1===b.length)return b[0];t["default"].log("Failed to find "+a+" element.","ERROR",v.getErrorAttributionId());m.logScopedCount("dom-element-not-found",1)}},Lc=function(){var a=ea.getElementByClassName(v.getSecondaryViewErrorMsgContainerId());a.classList.remove("aok-hidden");
a.firstChild.classList.remove("aok-hidden")},Mc=function(){var a=ea.getElementByClassName(v.getSecondaryViewErrorMsgContainerId());a.classList.add("aok-hidden");a.firstChild.classList.add("aok-hidden")},Nc=function(){var a=ea.getElementByClassName(v.getSecondaryViewHsnTsnErrorMsgContainerId());a.classList.add("aok-hidden");a.firstChild.classList.add("aok-hidden")},Oc=function(){var a=ea.getElementByClassName(v.getSecondaryViewSpinnerContainerId());a.classList.remove("aok-hidden");a.firstChild.classList.remove("aok-hidden")},
Mb=function(){var a=ea.getElementByClassName(v.getSecondaryViewSpinnerContainerId());a.classList.add("aok-hidden");a.firstChild.classList.add("aok-hidden")},Pc=function(){ea.getElementByClassName(v.getSecondaryViewContentChildContainerId()).classList.add("aok-hidden")},M={afterShowHandler:function(a,b){b().then(function(c){var d=ea.getElementByClassName(v.getSecondaryViewContentChildContainerId());c=ja.unscope(c);d.firstChild?d.replaceChild(c,d.firstChild):d.appendChild(c);a();d.classList.remove("aok-hidden");
Mb()}).catch(function(c){Lc();t["default"].log("Secondary view content provider OR content initializer failed with error: "+c,"ERROR",v.getErrorAttributionId());m.logScopedCount("secondary-view-display-failed",1);Mb()})},beforeShowHandler:hideErrorMessageContainer:Mc,hideErrorMessageContainerHsnTsn:Nc,hideSecondaryViewContentContainer:Pc,hideSpinner:Mb,showErrorMessageContainer:Lc,showErrorMessageContainerHsnTsn:function(){var a=ea.getElementByClassName(v.getSecondaryViewHsnTsnErrorMsgContainerId());
a.classList.remove("aok-hidden");a.firstChild.classList.remove("aok-hidden")},showSecondaryViewContentContainer:function(){ea.getElementByClassName(v.getSecondaryViewContentChildContainerId()).classList.remove("aok-hidden")},showSpinner:Oc},la,Nb=!1,Ob={hide:function(){Nb||(t["default"].log("Modal hide called without initialization","ERROR",v.getErrorAttributionId()),m.logScopedCount("uninitialized-modal-hide",1));la.hide().then(function(a){a||(t["default"].log("Modal hide failed with status: "+a,
"ERROR",v.getErrorAttributionId()),m.logScopedCount("modal-hide-failed",1))}).catch(function(a){t["default"].log("Modal hide failed with error: "+a,"ERROR",v.getErrorAttributionId());m.logScopedCount("modal-hide-failed",1)})},initialize:function(a,b){void 0===la&&(la=Pe["default"].create(v.getSecondaryViewName(),"."+v.getSecondaryViewContentContainerId(),{a11yOpenMessage:"",width:550}),la.on("beforeShow",function(){la.render(function(c){M.beforeShowHandler()}).then().catch(function(c){t["default"].log("Modal beforeShow render failed with error: "+
c,"ERROR",v.getErrorAttributionId());m.logScopedCount("modal-beforeshow-render-failed",1)})}),la.on("afterShow",function(){la.render(function(c){M.afterShowHandler(a,b)}).then().catch(function(c){t["default"].log("Modal afterShow render failed with error: "+c,"ERROR",v.getErrorAttributionId());m.logScopedCount("modal-aftershow-render-failed",1)})}),Nb=!0)},show:function(){Nb||(t["default"].log("Modal show called without initialization","ERROR",v.getErrorAttributionId()),m.logScopedCount("uninitialized-modal-show",
1));la.show().then(function(a){a||(t["default"].log("Modal hide show with status: "+a,"ERROR",v.getErrorAttributionId()),m.logScopedCount("modal-show-failed",1))}).catch(function(a){t["default"].log("Modal show failed with error: "+a,"ERROR",v.getErrorAttributionId());m.logScopedCount("modal-show-failed",1)})}},Se={browserOps:,ra;(function(a){a.partfinderPrimaryDesktopBrowseAddNewVehicleHandler=
"partfinderPrimaryDesktopBrowseAddNewVehicleHandler";a.partfinderPrimaryDesktopBrowseDropdownButtonClickHandler="partfinderPrimaryDesktopBrowseDropdownButtonClickHandler";a.partfinderPrimaryDesktopBrowseFindPartsButtonClickHandler="partfinderPrimaryDesktopBrowseFindPartsButtonClickHandler";a.partfinderPrimaryDesktopBrowseSuggestedfitIconClickHandler="partfinderPrimaryDesktopBrowseSuggestedfitIconClickHandler"})(ra||(ra={}));var Te={initialize:function(a,b,c){a=z["default"].setup().define;a(ra.partfinderPrimaryDesktopBrowseSuggestedfitIconClickHandler,
"click",function(d){d.acknowledge();var e=d.currentTarget.dataset.componentId;if(e){d=e+"-suggestedfit-popover";e+="-suggestedfit-icon-div";var f=Dc["default"].get(d);f||(e=g.getElementsByClassName(e)[0],f=Dc["default"].create(e,{closeButton:!0,height:b,name:d,width:c}));f.show();m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":partfinder-primary-desktop-browse:suggested-fit-icon-click",1)}})}},Ea=function(a){try{var b=g.getElementsByClassName(a+"-data")[0].dataset.partfinderPrimaryDesktopBrowseData;
var c=JSON.parse(b)}catch(e){a=new J("Failed to retrieve HTMLDivElement corresponding to input id "+a+".","partfinder-primary-desktop-browse","getPartfinderPrimaryDesktopBrowseData",{code:400,isRetriable:!1,name:"BadRequestError"},e);t["default"].log(a.toString(),"ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":partfinder-primary-desktop-browse:data-failure",1);var d=a}return{data:c,error:d}},Fa={attach:function(a,b){var c=z["default"].setup().define;switch(a){case "add-new-vehicle":c(ra.partfinderPrimaryDesktopBrowseAddNewVehicleHandler,
"click",function(d){b(Ea(d.currentTarget.dataset.componentId))});break;case "dropdown-button-click":c(ra.partfinderPrimaryDesktopBrowseDropdownButtonClickHandler,"click",function(d){b(Ea(d.currentTarget.dataset.componentId))});break;case "find-parts":c(ra.partfinderPrimaryDesktopBrowseFindPartsButtonClickHandler,"click",}},getData:initialize:function(a){var b=Ea(a);if(b.error)throw b.error;Te.initialize(a,150,450)}},
Qc,Ue={getLastEventType:setLastEventType:,Xa=function(a,b,c){Ue.setLastEventType(b);m.logScopedCount("partfinder-primary-desktop-browse-client-"+b,1);c(a)},Rc={attach:function(a){Fa.attach("add-new-vehicle",function(b){Xa(b,"add-new-vehicle",a)});Fa.attach("dropdown-button-click",function(b){Xa(b,"dropdown-button-click",a)})},attachRedirectHandler:function(a){Fa.attach("find-parts",},partfinderPrimaryDesktopBrowseClientEventHandler:Xa},
Ve={initialize:function(){try{Fa.initialize(v.getPrimaryViewId())}catch(a){throw m.logScopedCount("partfinder-primary-desktop-browse-client-initialize-error",1),Error("partfinderPrimaryDesktopBrowseClient initialization error: "+a);}}},Sc=function(a){return q.__awaiter(void 0,void 0,void 0,function(){var b,c;return q.__generator(this,function(d){switch(d.label){case 0:return We(a),b=a.retryNumber?a.retryNumber:0,[4,a.remoteOperation(a.request).then(.catch(function(e){if(e.statusCode&&
500<=e.statusCode&&599>=e.statusCode||e.statusText&&-1<e.statusText.indexOf("timeout")){if(0<b)return a.retryNumber=b-1,Sc(a);e=new J("Failed to Call remote operation for remoteOperationRequest.",a.componentName,a.methodName,{code:e.statusCode,isRetriable:!0,name:"ServiceUnavailable"},e);t["default"].log(e.toString(),"ERROR");throw e;}if(0===e.statusCode)throw e=new J("Failed to Call remote operation for remoteOperationRequest.",a.componentName,a.methodName,{code:e.statusCode,isRetriable:!1,name:"NetworkUnavailableError"},
e),t["default"].log(e.toString(),"ERROR"),e;if(e.statusCode&&400<=e.statusCode&&499>=e.statusCode)throw e=404===e.statusCode?new J("Failed to Call remote operation for remoteOperationRequest.",a.componentName,a.methodName,{code:e.statusCode,isRetriable:!1,name:"ResourceNotFoundError"},e):new J("Failed to Call remote operation for remoteOperationRequest.",a.componentName,a.methodName,{code:e.statusCode,isRetriable:!1,name:"ClientServiceError"},e),t["default"].log(e.toString(),"ERROR"),e;e=new J("Failed to Call remote operation for remoteOperationRequest.",
a.componentName,a.methodName,{code:e.statusCode,isRetriable:!1,name:"UnknownServiceError"},e);t["default"].log(e.toString(),"ERROR");throw e;})];case 1:return c=d.sent(),[2,c]}})})},We=function(a){if(!a.componentName.length)throw a=new J("component name should have a value","remote-operation-client","validateRequest",{code:400,isRetriable:!1,name:"BadRequestError"}),t["default"].log(a.toString(),"ERROR"),a;if(!a.methodName.length)throw a=new J("method name should have a value","remote-operation-client",
"validateRequest",{code:400,isRetriable:!1,name:"BadRequestError"}),t["default"].log(a.toString(),"ERROR"),a;if(!a.request.id.length)throw a=new J("Request payload should have valid ID.","remote-operation-client","validateRequest",{code:400,isRetriable:!1,name:"BadRequestError"}),t["default"].log(a.toString(),"ERROR"),a;},fa={performHtmlRemoteOperation:Sc},Tc=function(){return function(a,b,c,d){var e=this;this.getCurrentSelections=function(){return JSON.parse(e.getBlockStates().selectionsJson).concat(e.getAllAttributeValues())};
this.isLastBlock=this.isBlockEmpty=this.getRequiredAttributes=this.bindListeners=function(){var f,h=e.getAttributeIds();try{for(var k=q.__values(h),l=k.next();!l.done;l=k.next())ka["default"].on("a:dropdown:selected:"+e.getDropDownClassName(l.value),e.attributeSelectionListner)}catch(p){var n={error:p}}finally{try{l&&!l.done&&
(f=k.return)&&f.call(k)}finally{if(n)throw n.error;}}};this.unbindListeners=function(){var f,h=e.getAttributeIds();try{for(var k=q.__values(h),l=k.next();!l.done;l=k.next()){var n=l.value,p=e.getDropDownNativeId(n);e.setDefaultSelectedValue(p);ka["default"].off("a:dropdown:selected:"+e.getDropDownClassName(n),e.attributeSelectionListner)}}catch(A){var u={error:A}}finally{try{l&&!l.done&&(f=k.return)&&f.call(k)}finally{if(u)throw u.error;}}};this.resetLastSelectedAttribute=function(){if(-1!==e.lastSelectedAttributeIndex){var f=
e.getAttributeIds();f=e.getDropDownNativeId(f[e.lastSelectedAttributeIndex]);e.setDefaultSelectedValue(f)}};this.getBlockStates=function(){return g.getElementsByClassName(e.id+"-active-block-states-"+e.attributesBlockIndex)[0].dataset};this.getAttributeIds=function(){var f=e.getBlockStates().activeAttributeIdsJson;return JSON.parse(f)};this.getDropDownNativeId=this.getDropDownClassName=function(f){return e.id+"-"+f};this.areAllAttributesInBlockSelected=
function(){var f,h=e.getAllAttributeValues();try{for(var k=q.__values(h),l=k.next();!l.done;l=k.next())if(!l.value.value.length)return!1}catch(p){var n={error:p}}finally{try{l&&!l.done&&(f=k.return)&&f.call(k)}finally{if(n)throw n.error;}}return!0};this.attributeSelectionListner=function(f){var h=e.getAttributeIds(),k=f.name.substring(e.id.length+1);f=h.findIndex(;h=e.getSelectedValue(e.getDropDownNativeId(h[f]));if(""!==h&&void 0!==h)e.lastSelectedAttributeIndex=f,-1===
e.getAllAttributeValues().findIndex(function(l){return""===l.value})&&e.allAttributesSelectionCallback(e.attributesBlockIndex);else throw m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":attributes-selection:"+k+":wrongValue",1),r.logAndReturnBadRequestError("Invalid attribute value for "+k+". It should not be empty or undefined","attributes-selection","attributeSelectionListner");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":attributes-selection:"+k+"-attribute-selected",1)};this.getAllAttributeValues=
function(){return e.getAttributeIds().map(function(f){var h=e.getSelectedValue(e.getDropDownNativeId(f));return{id:f,value:h?h:""}})};this.setDefaultSelectedValue=function(f){(f=T["default"].getSelect(f))&&f.setValue("")};this.getSelectedValue=function(f){if(f=T["default"].getSelect(f))return f.val()};this.id=a;this.allAttributesSelectionCallback=b;this.attributesBlockIndex=c;this.lastSelectedAttributeIndex=d}}(),Xe=new Map([["A1PA6795UKMFR9","de"],["A1F83G8C2ARO7P","uk"],["A13V1IB3VIYZZH","nl-prod"],
["A1805IZSGTT6HS","nl-devo"],["A1C3SOZRARQ6R3","pl-prod"],["AKY4K4WKH21YQ","pl-devo"],["A2NODRKZP88ZB9","se-prod"],["AT614YYYNOC1S","se-devo"],["APJ6JRA9NG5V4","it-prod"],["A3HOBANJMCMD83","it-devo"],["A1RKKUPIHCS9HS","es-prod"],["AJZF8LZ1EJVJN","es-devo"]]),Ye=function(){function a(b){var c=this;this.attributesSelectionBlockClients={};this.allAttributesSelectCallbacks=[];this.attributesResetCallbacks=[];this.operationProxy=L["default"].setup();this.attach=function(e,f){switch(e){case "all-attributes-select":c.allAttributesSelectCallbacks.push(f);
break;case "attribute-reset":c.attributesResetCallbacks.push(f)}};this.remove=function(){c.reset();g.getElementsByClassName(""+c.id)[0].remove()};this.reset=this.getCurrentSelections=function(){return c.attributesSelectionBlockClients[c.getActiveBlockClassName(c.currentTotalActiveBlocks-1)].getCurrentSelections()};this.areAllRequiredAttributesSelected=function(){var e=c.attributesSelectionBlockClients[c.getActiveBlockClassName(c.currentTotalActiveBlocks-
1)];return e.isLastBlock()&&e.areAllAttributesInBlockSelected()};this.getNonEmptyActiveBlocksCount=function(){var e=c.attributesSelectionBlockClients[c.getActiveBlockClassName(c.currentTotalActiveBlocks-1)];return e.isBlockEmpty()&&e.isLastBlock()?c.currentTotalActiveBlocks-1:c.currentTotalActiveBlocks};this.prepareRequestForRemoteOperation=function(e){var f=c.attributesSelectionBlockClients[c.getActiveBlockClassName(e)],h=f.getCurrentSelections();f=f.getRequiredAttributes();var k=c.getAttributesSelectionType();
e+=1;return{asin:c.getAsin(),attributesBlockIndex:""+e,id:c.id,isLayoutHorizontal:c.getLayout(),requiredSelection:f,selectionType:k,selections:h}};this.deleteBlockFromComponent=function(e){var f=g.getElementsByClassName(""+c.id)[0];e=f.getElementsByClassName(e)[0];f&&e&&f.removeChild(e)};this.setupNextAttributesSelectionBlockClient=function(e){var f=new Tc(c.id,c.allAttributesSelectionInsideBlockCallback,e,-1);c.attributesSelectionBlockClients[c.getActiveBlockClassName(e)]=f;f.unbindListeners();f.bindListeners();
return f};this.changeErrorMessageVisibility=function(e,f){e=g.getElementsByClassName(e+"-error-box")[0];f?e.classList.add("aok-hidden"):e.classList.remove("aok-hidden")};this.getLayout=function(){var e=a.getAttributesSelectionStates(c.id),f=!1;void 0!==e&&(f="true"===e.horizontalLayout);return f};this.getAsin=function(){var e=a.getAttributesSelectionStates(c.id);if(void 0!==e)var f=e.asin;return""===f?void 0:f};this.isEUMarketPlace=function(){var e=a.getRetailSelection(c.id);return void 0!==e&&(e=
e.market,void 0!==e&&Xe.has(e))?!0:!1};this.allAttributesSelectionInsideBlockCallback=function(e){var f=c.attributesSelectionBlockClients[c.getActiveBlockClassName(e)];if(f)if(e<c.getNonEmptyActiveBlocksCount()-1&&c.callAttributesResetCallbacks(),f.isLastBlock())c.callAllAttributesSelectCallbacks();else{var h={componentName:"attributes-selection",methodName:"allAttributesSelectionInsideBlockCallback",remoteOperation:c.operationProxy.getAttributesSelectionView,request:c.prepareRequestForRemoteOperation(e)};
c.showSpinner();fa.performHtmlRemoteOperation(h).then(function(k){var l=e+1;c.deleteAllFollowingActiveBlocks(e);c.deleteBlockFromComponent(c.getInActiveBlockClassName());c.appendActiveAndInActiveBlocks(k,l);k=c.setupNextAttributesSelectionBlockClient(l);"true"===k.getBlockStates().isSingleOptionWeblab&&(c.prepopulateSingleOptionDropdowns(k),c.displayOrHideSingleOptionDropdownNote());k.isLastBlock()&&k.isBlockEmpty()&&c.callAllAttributesSelectCallbacks();c.changeErrorMessageVisibility(c.id,!0);c.hideSpinner()}).catch(function(){c.deleteAllFollowingActiveBlocks(e);
c.deleteBlockFromComponent(c.getInActiveBlockClassName());c.changeErrorMessageVisibility(c.id,!1);f.resetLastSelectedAttribute();c.hideSpinner()})}};this.callAttributesResetCallbacks=function(){var e;try{for(var f=q.__values(c.attributesResetCallbacks),h=f.next();!h.done;h=f.next()){var k=h.value,l={data:{currentSelections:c.getCurrentSelections(),id:c.id,allAttributesSelected:!1}};k(l)}}catch(p){var n={error:p}}finally{try{h&&!h.done&&(e=f.return)&&e.call(f)}finally{if(n)throw n.error;}}};this.callAllAttributesSelectCallbacks=
function(){var e;try{for(var f=q.__values(c.allAttributesSelectCallbacks),h=f.next();!h.done;h=f.next()){var k=h.value,l={data:{id:c.id,currentSelections:c.getCurrentSelections(),allAttributesSelected:!0}};k(l)}}catch(p){var n={error:p}}finally{try{h&&!h.done&&(e=f.return)&&e.call(f)}finally{if(n)throw n.error;}}};this.appendActiveAndInActiveBlocks=function(e,f){var h=g.getElementsByClassName(""+c.id)[0];if(h){if(f=e.getElementsByClassName(c.getActiveBlockClassName(f))[0])f=ja.unscope(f),h.appendChild(f),
c.currentTotalActiveBlocks++;if(e=e.getElementsByClassName(c.getInActiveBlockClassName())[0])e=ja.unscope(e),h.appendChild(e)}};this.deleteAllFollowingActiveBlocks=function(e){var f=c.currentTotalActiveBlocks;for(e+=1;e<f;e++)c.attributesSelectionBlockClients[c.getActiveBlockClassName(e)].unbindListeners(),c.deleteBlockFromComponent(c.getActiveBlockClassName(e)),c.currentTotalActiveBlocks--};this.getActiveBlockClassName=function(e){return c.id+"-active-block-"+e};this.getActiveBlockStateClassName=
this.getInActiveBlockClassName=this.showSpinner=function(){var e=g.getElementsByClassName(c.id+"-spinner-container")[0];e.classList.remove("aok-hidden");e.firstChild.classList.remove("aok-hidden");e=g.getElementsByClassName(""+c.id)[0].getElementsByTagName("*");for(var f=0;f<e.length;f++)e[f].disabled=!0};this.hideSpinner=function(){var e=g.getElementsByClassName(c.id+"-spinner-container")[0];e.classList.add("aok-hidden");
e.firstChild.classList.remove("aok-hidden");e=g.getElementsByClassName(""+c.id)[0].getElementsByTagName("*");for(var f=0;f<e.length;f++)e[f].disabled=!1};this.getAttributesSelectionType=function(){switch(a.getAttributesSelectionStates(c.id).attributesSelectionType){case "base":return"base";case "variant":return"variant";case "last-exclusive":return"last-exclusive"}var e=new J("Unable to get selection type","attributes-selection","getAttributesSelectionType",{code:404,isRetriable:!1,name:"NotFoundError"});
t["default"].log(e.toString(),"ERROR","international-automotive");throw e;};this.prepopulateSingleOptionDropdowns=function(e){var f;try{for(var h=q.__values(e.getAttributeIds()),k=h.next();!k.done;k=h.next()){var l=k.value,n=e.getDropDownNativeId(l),p=T["default"].getSelect(n);if(1===p.getOptions().info().length){p.setValue(p.getOptions().info()[0].value);var u=e.getDropDownClassName(l);ka["default"].trigger("a:dropdown:selected:"+u,{name:u})}}}catch(I){var A={error:I}}finally{try{k&&!k.done&&(f=
h.return)&&f.call(h)}finally{if(A)throw A.error;}}};this.displayOrHideSingleOptionDropdownNote=function(){for(var e,f,h=g.getFirstElementByClassNameOrThrow(c.id+"-single-option-note"),k=!1,l=0;l<c.currentTotalActiveBlocks;l++){var n=c.attributesSelectionBlockClients[c.getActiveBlockClassName(l)];try{for(var p=(e=void 0,q.__values(n.getAttributeIds())),u=p.next();!u.done;u=p.next()){var A=n.getDropDownNativeId(u.value);1===T["default"].getSelect(A).getOptions().info().length&&(k=!0)}}catch(I){e={error:I}}finally{try{u&&
!u.done&&(f=p.return)&&f.call(p)}finally{if(e)throw e.error;}}}k?h.classList.remove("aok-hidden"):h.classList.add("aok-hidden")};this.getBlockSelectionJsonSize=function(e){e=c.getActiveBlockStateClassName(e);e=g.getElementsByClassName(e)[0].dataset;return JSON.parse(JSON.stringify(e.selectionsJson)).length};this.id=b;this.currentTotalActiveBlocks=JSON.parse(a.getAttributesSelectionStates(b).activeBlockSize);for(b=0;b<this.currentTotalActiveBlocks;++b){var d=-1;b<this.currentTotalActiveBlocks-1&&(d=
this.getBlockSelectionJsonSize(b),d=this.getBlockSelectionJsonSize(b+1)-d-1);d=new Tc(this.id,this.allAttributesSelectionInsideBlockCallback,b,d);this.attributesSelectionBlockClients[this.getActiveBlockClassName(b)]=d;d.bindListeners()}}a.getAttributesSelectionStates=function(b){return g.getElementsByClassName(b+"-states")[0].dataset};a.getRetailSelection=function(b){return g.getElementsByClassName(b+"-retailrequest")[0].dataset};return a}(),N={},Uc=function(a){if(void 0!==N[a]){var b={},c;for(c in N)c!==
a&&(b[c]=N[c]);N=b}},ba={attach:function(a,b){var c;try{for(var d=q.__values(Object.keys(N)),e=d.next();!e.done;e=d.next())N[e.value].attach(a,b)}catch(h){var f={error:h}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(f)throw f.error;}}},getData:function(a){var b=new J("attributes-selection does not exists for id: "+a+".","attributes-selection","getData",{code:400,isRetriable:!1,name:"BadRequestError"});if(void 0!==N[a])try{var c=N[a].getCurrentSelections();return{data:{allAttributesSelected:N[a].areAllRequiredAttributesSelected(),
currentSelections:c,id:a}}}catch(d){}return{error:b}},initialize:function(a){void 0===N[a]&&(N[a]=new Ye(a))},remove:function(a){void 0!==N[a]&&(N[a].remove(),Uc(a))},reset:function(a){void 0!==N[a]&&(N[a].reset(),Uc(a))}},Vc=function(a){var b=a.data.nativeId;a=a.data.viewId;var c=g.getElementsByClassName(a)[0];b=T["default"].getSelect(b).val();c.dataset.currentSelection=b;JSON.parse(b).vehicle.identity===c.dataset.selectedVehicleId?(b=g.getElementsByClassName(a+"-additional-attribute-selection-holder")[0],
a=g.getElementsByClassName(a+"-additional-info-holder")[0],b&&b.classList.remove("aok-hidden"),a&&a.classList.remove("aok-hidden")):(b=g.getElementsByClassName(a+"-additional-attribute-selection-holder")[0],a=g.getElementsByClassName(a+"-additional-info-holder")[0],b&&b.classList.add("aok-hidden"),a&&a.classList.add("aok-hidden"))},Ze={initialize:function(a){G["default"].declarative("additional-attribute-select-handler","change",function(b){0===a.localeCompare(b.data.viewId)&&Vc(b)})}},Wc={},Xc=[],
Yc=function(a,b){a=a.data.id;a=a.substring(0,a.lastIndexOf("-attributes-selection"));a={data:{currentSelectedVehicle:Pb(a),currentSelection:Qb(a),currentVehicleSelection:Ya(a),id:a}};b(a)},Qb=function(a){return g.getElementsByClassName(a+"-attributes-selection")[0]?ba.getData(a+"-attributes-selection").data.currentSelections:Ya(a)},Pb=function(a){if((a=g.getElementsByClassName(a)[0])&&a.dataset&&a.dataset.currentSelection)return JSON.parse(a.dataset.currentSelection).vehicle},Ya=function(a){if((a=
g.getElementsByClassName(a)[0])&&a.dataset&&a.dataset.currentSelection)return JSON.parse(a.dataset.currentSelection).vehicleSelection},ma={attach:function(a,b){switch(a){case "garage-vehicle-change":Xc.push(b);break;case "additional-attributes-reset":ba.attach("attribute-reset",function(c){Yc(c,b)});break;case "additional-attributes-select":ba.attach("all-attributes-select",function(c){Yc(c,b)})}},getData:function(a){return{data:{currentSelectedVehicle:Pb(a),currentSelection:Qb(a),currentVehicleSelection:Ya(a),
id:a}}},initialize:function(a){try{void 0!==g.getElementsByClassName(a+"-attributes-selection")[0]&&ba.initialize(a+"-attributes-selection")}catch(b){throw r.logAndReturnFailedDependencyError("Failed to initialize attributes-selection for "+a+".","garage-vehicle-additional-attributes-selection","initialize",b);}!0!==Wc[a+"-garageVehicleAdditionalAttributesSelectionBrowserOps"]&&(Ze.initialize(a),Wc[a+"-garageVehicleAdditionalAttributesSelectionBrowserOps"]=!0,G["default"].declarative(a+"-additional-attribute-select-handler",
"change",function(b){var c;Vc(b);b=b.data.viewId;b={data:{currentSelectedVehicle:Pb(b),currentSelection:Qb(b),currentVehicleSelection:Ya(b),id:b}};try{for(var d=q.__values(Xc),e=d.next();!e.done;e=d.next()){var f=e.value;f(b)}}catch(k){var h={error:k}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error;}}}))},reset:function(a){try{ba.reset(a+"-attributes-selection")}catch(b){throw r.logAndReturnFailedDependencyError("Failed to reset attributes-selection for "+a,"garage-vehicle-additional-attributes-selection",
"reset",b);}}},w;((w||(w={}));var Za=[],Zc=[],Rb={addEventHandlers:emitEvent:function(a,b){var c,d,e;switch(a){case "hsn-tsn-select":try{for(var f=
q.__values(Za),h=f.next();!h.done;h=f.next()){var k=h.value;k(b)}}catch(Y){var l={error:Y}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error;}}break;case "hsn-tsn-reset":try{for(var n=q.__values(Za),p=n.next();!p.done;p=n.next())k=p.value,k(b)}catch(Y){var u={error:Y}}finally{try{p&&!p.done&&(d=n.return)&&d.call(n)}finally{if(u)throw u.error;}}break;case "hsn-tsn-vehicle-select":try{for(var A=q.__values(Zc),I=A.next();!I.done;I=A.next())k=I.value,k(b)}catch(Y){var Ga={error:Y}}finally{try{I&&
!I.done&&(e=A.return)&&e.call(A)}finally{if(Ga)throw Ga.error;}}}}},Sb;(Sb||(Sb={})).hsntsnSearchButtonClickHandler="hsntsnSearchButtonClickHandler";var O={getDropDownNativeId:function(a){return a+"-matches-native-id"},getErrorDivId:function(a){return a+"-error"},getHsnTextInputId:function(a){return a+"-hsn-input"},getResultDataDivId:function(a){return a+"-results-data"},getSearchButtonId:function(a){return a+"-search-button"},getSearchResultHolderId:function(a){return a+"-results-holder"},getSpinnerContainerId:function(a){return a+
"-spinner-container"},getTsnTextInputId:function(a){return a+"-tsn-input"}},$c=function(a){a=x.isHTMLElementAvailable(O.getResultDataDivId(a))?$a(O.getResultDataDivId(a)).dataset.selections:$a(a).dataset.currentSelection;return JSON.parse(a)},$a=function(a){return g.getElementsByClassName(""+a)[0]},Tb=function(a){a=g.getElementsByClassName(a)[0];return a.hasChildNodes()?a.firstChild.value:a.value},x={getCurrentSelections:function(a){a=g.getElementsByClassName(""+a)[0];return JSON.parse(a.dataset.currentSelection)},
getCurrentWrittenValue:function(a){var b=Tb(a+"-hsn-input");a=Tb(a+"-tsn-input");return b+a},getHTMLDivElement:$a,getHTMLElement:function(a){return g.getElementsByClassName(""+a)[0]},getHsnTextInputValue:function(a){a=x.getHTMLElement(O.getHsnTextInputId(a));return a.hasChildNodes()?a.firstChild.value:a.value},getInputSelections:$c,getSelections:function(a){var b=Object.assign([],$c(a));x.isHTMLElementAvailable(O.getResultDataDivId(a))&&((a=T["default"].getSelect(O.getDropDownNativeId(a)))&&a.val()?
b.push(JSON.parse(a.val())):m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:dropdown-error",1));return b},getTextInputValue:Tb,getTsnTextInputValue:function(a){a=x.getHTMLElement(O.getTsnTextInputId(a));return a.hasChildNodes()?a.firstChild.value:a.value},getVehicleIdentifierAttributeName:function(a){return $a(a).dataset.hsnTsnAttributeId},isHTMLElementAvailable:function(a){return 0!==g.getElementsByClassName(a).length}},Ub={hideErrorSection:function(a){x.getHTMLDivElement(O.getErrorDivId(a)).classList.add("aok-hidden")},
showErrorSection:function(a){x.getHTMLDivElement(O.getErrorDivId(a)).classList.remove("aok-hidden")}},$e={getEncryptedId:function(a,b,c){return q.__awaiter(void 0,void 0,void 0,function(){var d,e,f,h;return q.__generator(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,Da["default"].post("/automotive-components/vehicle-identifier?sif_profile=AutomotiveUIComponentsVehicleIdentifierSIFProfile",{accepts:"*/*",contentType:"application/json"},(h={},h.automotiveVehicleIdentifier=
a,h))];case 1:d=k.sent();e=d.responseBody;if(!e)throw Error("Encrypted value of hsn tsn can not be undefined");return[2,e.automotiveVehicleIdentifier];case 2:throw f=k.sent(),r.logAndThrowFailedDependencyError("Ajax Request Failed for hsn tsn encryption",c,b,f);case 3:return[2]}})})}},af=function(a){return q.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f,h;return q.__generator(this,function(k){switch(k.label){case 0:return b=L["default"].setup(),c=b.getMatchingResultHsnTsn,d=x.getHsnTextInputValue(a),
e=x.getTsnTextInputValue(a),[4,$e.getEncryptedId(d.concat(e),"performSearchButtonClickOperation","hsn-tsn-input")];case 1:return f=k.sent(),h={componentName:"hsn-tsn-input",methodName:"performSearchButtonClickOperation",remoteOperation:c,request:{automotiveHsnTsn:f,id:a,nextAttributeId:x.getVehicleIdentifierAttributeName(a),selections:x.getSelections(a)}},[2,h]}})})},bf=function(a){a={data:{automotiveHsnTsn:x.getCurrentWrittenValue(a),id:a,inputSelection:x.getInputSelections(a)}};Rb.emitEvent("hsn-tsn-reset",
a)},cf=function(a){var b=x.getHTMLElement(O.getSpinnerContainerId(a));b.classList.remove("aok-hidden");b.firstChild.classList.remove("aok-hidden");a=x.getHTMLElement(O.getSearchButtonId(a));ad(a)},Vb=function(a){var b=x.getHTMLElement(O.getSpinnerContainerId(a));b.classList.add("aok-hidden");b.firstChild.classList.add("aok-hidden");a=x.getHTMLElement(O.getSearchButtonId(a));bd(a)},df={performSearchButtonClickOperation:function(a){var b=x.getHTMLElement(O.getSearchResultHolderId(a));b.firstChild&&
(b.firstChild.remove(),bf(a));cf(a);af(a).then(function(c){fa.performHtmlRemoteOperation(c).then(function(d){Ub.hideErrorSection(a);b.innerHTML=d.innerHTML;Vb(a)}).catch(function(d){Ub.showErrorSection(a);t["default"].log("hsn-tsn-input remoteOperations failed for "+a+" with "+d+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:remoteOperations-failure",1);Vb(a)})}).catch(function(c){Ub.showErrorSection(a);t["default"].log("hsn-tsn-input getRemoteOperationRequest failed for "+
a+" with "+c+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:getRemoteOperationRequest-failure",1);Vb(a)})}},ef=function(a){a=a.currentTarget.dataset.componentId;x.getHTMLElement(O.getSearchButtonId(a)).classList.contains("a-button-disabled")||(df.performSearchButtonClickOperation(a),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:search-button-click",1))},bd=function(a){var b=a?a.getElementsByClassName("a-button-input")[0]:void 0;a.classList.remove("a-button-disabled");
b&&(b.disabled=!1)},ad=function(a){var b=a?a.getElementsByClassName("a-button-input")[0]:void 0;a.classList.add("a-button-disabled");b&&(b.disabled=!0)},ff={initialize:function(a){G["default"].declarative("hsn-tsn-input-change","keyup",function(c){if(0===a.localeCompare(c.data.viewId)){c=x.getHsnTextInputValue(a);var d=x.getTsnTextInputValue(a),e=x.getHTMLElement(O.getSearchButtonId(a));4<=c.length&&3<=d.length?bd(e):ad(e)}});G["default"].declarative("hsn-tsn-result-select-action","change",function(c){0===
a.localeCompare(c.data.componentId)&&(c={data:{automotiveHsnTsn:x.getCurrentWrittenValue(a),id:a,inputSelection:x.getInputSelections(a)}},Rb.emitEvent("hsn-tsn-vehicle-select",c),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:vehicle-selected",1))});var b=z["default"].setup().define;b(Sb.hsntsnSearchButtonClickHandler,"click",ef)}},Ha,ed=function(a,b){a=a.data.viewId;a={data:{automotiveHsnTsn:cd(a),id:a,inputSelection:dd(a)}};b(a)},dd=function(a){a=g.getElementsByClassName(""+a)[0];return JSON.parse(a.dataset.currentSelection)},
cd=function(a){var b=sa(a+"-hsn-input");a=sa(a+"-tsn-input");return b+a},sa=function(a){a=g.getElementsByClassName(a)[0];return a.hasChildNodes()?a.firstChild.value:a.value},ta={attach:function(a,b){if(Ha)switch(a){case "hsn-tsn-select":G["default"].declarative("hsn-tsn-input-change","keyup",function(c){var d=c.data.viewId,e=sa(d+"-hsn-input");d=sa(d+"-tsn-input");e&&0!==e.length&&d&&0!==d.length&&ed(c,b)});break;case "hsn-tsn-reset":G["default"].declarative("hsn-tsn-input-change","keyup",function(c){var d=
c.data.viewId,e=sa(d+"-hsn-input");d=sa(d+"-tsn-input");e&&0!==e.length&&d&&0!==d.length||ed(c,b)})}else Rb.addEventHandlers(a,b)},getData:function(a){return Ha?{data:{automotiveHsnTsn:cd(a),id:a,inputSelection:dd(a)}}:{data:{automotiveHsnTsn:x.getCurrentWrittenValue(a),id:a,inputSelection:x.getSelections(a)}}},initialize:function(a){var b,c=g.getElementsByClassName(a+"-hsntsn-match")[0];(Ha="true"===(null===(b=null===c||void 0===c?void 0:c.dataset)||void 0===b?void 0:b.isSearchButtonWeblabEnabled))||
ff.initialize(a)}},fd=[],gd=[],Wb={addEventHandlers:function(a,b){switch(a){case "number-plate-reset":fd.push(b);break;case "number-plate-vehicle-select":gd.push(b)}},emitEvent:function(a,b){var c,d;switch(a){case "number-plate-reset":try{for(var e=q.__values(fd),f=e.next();!f.done;f=e.next()){var h=f.value;h(b)}}catch(u){var k={error:u}}finally{try{f&&!f.done&&(c=e.return)&&c.call(e)}finally{if(k)throw k.error;}}break;case "number-plate-vehicle-select":try{for(var l=q.__values(gd),n=l.next();!n.done;n=
l.next())h=n.value,h(b)}catch(u){var p={error:u}}finally{try{n&&!n.done&&(d=l.return)&&d.call(l)}finally{if(p)throw p.error;}}}}},U={getDropDownNativeId:function(a){return a+"-matches-native-id"},getErrorDivId:function(a){return a+"-error"},getResultDataDivId:function(a){return a+"-results-data"},getSearchButtonId:function(a){return a+"-search-button"},getSearchResultHolderId:function(a){return a+"-results-holder"},getSpinnerContainerId:function(a){return a+"-spinner-container"},getTextInputId:function(a){return a+
"-text-input"}},hd=function(a){a=B.isHTMLElementAvailable(U.getResultDataDivId(a))?ab(U.getResultDataDivId(a)).dataset.selections:ab(a).dataset.selections;return JSON.parse(a)},ab=function(a){return g.getElementsByClassName(""+a)[0]},B={getHTMLDivElement:ab,getHTMLElement:getInputSelections:hd,getNumberPlateTextInputValue:function(a){a=B.getHTMLElement(U.getTextInputId(a));return a.hasChildNodes()?a.firstChild.value:a.value},getSelections:function(a){var b=
Object.assign([],hd(a));B.isHTMLElementAvailable(U.getResultDataDivId(a))&&((a=T["default"].getSelect(U.getDropDownNativeId(a)))&&a.val()?b.push(JSON.parse(a.val())):m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-input:dropdown-error",1));return b},getVehicleIdentifierAttributeName:isHTMLElementAvailable:,bb;(bb||(bb={})).numberPlateSearchButtonClickHandler="numberPlateSearchButtonClickHandler";
var Xb={hideErrorSection:function(a){B.getHTMLDivElement(U.getErrorDivId(a)).classList.add("aok-hidden")},showErrorSection:function(a){B.getHTMLDivElement(U.getErrorDivId(a)).classList.remove("aok-hidden")}},gf={getEncryptedId:function(a,b,c){return q.__awaiter(void 0,void 0,void 0,function(){var d,e,f,h;return q.__generator(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,Da["default"].post("/automotive-components/vehicle-identifier?sif_profile=AutomotiveUIComponentsVehicleIdentifierSIFProfile",
{accepts:"*/*",contentType:"application/json"},(h={},h.automotiveVehicleIdentifier=a,h))];case 1:d=k.sent();e=d.responseBody;if(!e)throw Error("Encrypted value of number plate can not be undefined");return[2,e.automotiveVehicleIdentifier];case 2:throw f=k.sent(),r.logAndThrowFailedDependencyError("Ajax Request Failed for number plate encryption",c,b,f);case 3:return[2]}})})}},hf=function(a){return q.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f;return q.__generator(this,function(h){switch(h.label){case 0:return b=
L["default"].setup(),c=b.getMatchingResult,d=B.getNumberPlateTextInputValue(a),[4,gf.getEncryptedId(d,"performSearchButtonClickOperation","number-plate-input")];case 1:return e=h.sent(),f={componentName:"number-plate-input",methodName:"performSearchButtonClickOperation",remoteOperation:c,request:{automotiveNumberPlate:e,id:a,nextAttributeId:B.getVehicleIdentifierAttributeName(a),selections:B.getSelections(a)}},[2,f]}})})},jf=function(a){a={data:{id:a,inputSelections:B.getInputSelections(a),selections:B.getSelections(a)}};
Wb.emitEvent("number-plate-reset",a)},kf=function(a){var b=B.getHTMLElement(U.getSpinnerContainerId(a));b.classList.remove("aok-hidden");b.firstChild.classList.remove("aok-hidden");a=B.getHTMLElement(U.getSearchButtonId(a));id(a)},Yb=function(a){var b=B.getHTMLElement(U.getSpinnerContainerId(a));b.classList.add("aok-hidden");b.firstChild.classList.add("aok-hidden");a=B.getHTMLElement(U.getSearchButtonId(a));jd(a)},lf={performSearchButtonClickOperation:function(a){var b=B.getHTMLElement(U.getSearchResultHolderId(a));
b.firstChild&&(b.firstChild.remove(),jf(a));kf(a);hf(a).then(function(c){fa.performHtmlRemoteOperation(c).then(function(d){Xb.hideErrorSection(a);b.innerHTML=d.innerHTML;Yb(a)}).catch(function(d){Xb.showErrorSection(a);t["default"].log("number-plate-input remoteOperations failed for "+a+" with "+d+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-inpute:remoteOperations-failure",1);Yb(a)})}).catch(function(c){Xb.showErrorSection(a);t["default"].log("number-plate-input getRemoteOperationRequest failed for "+
a+" with "+c+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-inpute:getRemoteOperationRequest-failure",1);Yb(a)})}},mf=function(a){a=a.currentTarget.dataset.componentId;B.getHTMLElement(U.getSearchButtonId(a)).classList.contains("a-button-disabled")||(lf.performSearchButtonClickOperation(a),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-input:search-button-click",1))},jd=function(a){var b=a?a.getElementsByClassName("a-button-input")[0]:
void 0;a.classList.remove("a-button-disabled");b&&(b.disabled=!1)},id=function(a){var b=a?a.getElementsByClassName("a-button-input")[0]:void 0;a.classList.add("a-button-disabled");b&&(b.disabled=!0)},nf={initialize:function(a){G["default"].declarative("number-plate-input-change","keyup",function(c){if(0===a.localeCompare(c.data.componentId)){c=B.getNumberPlateTextInputValue(a);var d=B.getHTMLElement(U.getSearchButtonId(a));1<=c.length?jd(d):id(d)}});G["default"].declarative("number-plate-result-select-action",
"change",function(c){0===a.localeCompare(c.data.componentId)&&(c={data:{id:a,inputSelections:B.getInputSelections(a),selections:B.getSelections(a)}},Wb.emitEvent("number-plate-vehicle-select",c),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-input:vehicle-selected",1))});var b=z["default"].setup().define;b(bb.numberPlateSearchButtonClickHandler,"click",mf)}},cb={attach:getData:function(a){return{data:{id:a,inputSelections:B.getInputSelections(a),
selections:B.getSelections(a)}}},initialize:function(a){nf.initialize(a)}},ua;((ua||(ua={}));var qa={getErrorContainerId:function(a){return a+"-error-container"},getSeeMoreButtonContainerId:function(a){return a+"-see-more-button-container"},getSeeMoreButtonId:function(a){return a+"-see-more-button"},getSeeMoreContainerId:function(a){return a+
"-see-more-container"},getSpinnerContainer:function(a){return a+"-spinner-container"}},na={getVehiclesViewMainDiv:hideErrorMessage:function(a){a=g.getElementByClassName(qa.getErrorContainerId(a));a.classList.add("aok-hidden");a.classList.add("aok-offscreen");a.firstChild.classList.add("aok-hidden");a.firstChild.classList.add("aok-offscreen");a.firstChild.firstChild.classList.add("aok-hidden");a.firstChild.firstChild.classList.add("aok-offscreen")},hideSeeMoreButtonContainer:function(a){a=
g.getElementByClassName(qa.getSeeMoreButtonContainerId(a));a.classList.add("aok-hidden");a.classList.add("aok-offscreen")},hideSpinner:function(a){a=g.getElementByClassName(qa.getSpinnerContainer(a));a.classList.add("aok-hidden");a.classList.add("aok-offscreen");a.firstChild.classList.add("aok-hidden");a.firstChild.classList.add("aok-offscreen")},removeSeeMoreContainer:showErrorMessage:function(a){a=g.getElementByClassName(qa.getErrorContainerId(a));
a.classList.remove("aok-hidden");a.classList.remove("aok-offscreen");a.firstChild.classList.remove("aok-hidden");a.firstChild.classList.remove("aok-offscreen");a.firstChild.firstChild.classList.remove("aok-hidden");a.firstChild.firstChild.classList.remove("aok-offscreen")},showSeeMoreButtonContainer:function(a){a=g.getElementByClassName(qa.getSeeMoreButtonContainerId(a));a.classList.remove("aok-hidden");a.classList.remove("aok-offscreen")},showSpinner:function(a){a=g.getElementByClassName(qa.getSpinnerContainer(a));
a.classList.remove("aok-hidden");a.classList.remove("aok-offscreen");a.firstChild.classList.remove("aok-hidden");a.firstChild.classList.remove("aok-offscreen")}},of=function(a,b,c,d,e){return{componentName:"vehicles-view",methodName:"performSearchButtonClickOperation",remoteOperation:L["default"].setup().getVehiclesViewNextPage,request:{id:e,next:a,pageNumber:b,pageSize:c,selections:d}}},pf={seeMoreGarageVehiclesButtonClickHandler:function(a,b){if(0===a.localeCompare(b.currentTarget.dataset.vehiclesViewId)){m.logScopedCount(m.COMPONENT_METRIC_PREFIX+
":vehicles-view:see-more-click",1);var c=b.currentTarget.dataset.next,d=+b.currentTarget.dataset.nextPageNumber,e=+b.currentTarget.dataset.pageSize,f=JSON.parse(b.currentTarget.dataset.selections);b=of(c,d,e,f,b.currentTarget.dataset.vehiclesViewId);var h=a+"-page-"+(d-1);na.showSpinner(h);na.hideErrorMessage(h);na.hideSeeMoreButtonContainer(h);fa.performHtmlRemoteOperation(b).then(function(k){k=ja.unscope(k);var l=na.getVehiclesViewMainDiv(a);na.removeSeeMoreContainer(h);l.append(k.firstChild);2===
k.childNodes.length&&l.append(k.lastChild);Re["default"].updateAll()}).catch(function(k){na.showErrorMessage(h);na.hideSpinner(h);na.showSeeMoreButtonContainer(h);t["default"].log("vehicles-view remoteOperations failed for "+a+" with "+k+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":vehicles-view:remoteOperations-failure",1)})}}},qf={initialize:function(a){var b=z["default"].setup().define;b(ua.vehicleViewEventHandler,"click",function(c){if(0===a.localeCompare(c.currentTarget.dataset.vehiclesViewId)){var d=
g.getElementsByClassName(c.currentTarget.dataset.vehiclesViewId)[0].dataset;d.selectedVehicle=c.currentTarget.dataset.vehicle;d.selectedVehicleSelection=c.currentTarget.dataset.currentSelection;m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":vehicles-view:vehicle-selected",1);(d=g.getElementsByClassName("vehicles-view-garage-image-selected")[0])&&d.classList.remove("vehicles-view-garage-image-selected");g.getElementsByClassName(c.currentTarget.dataset.cellId)[0].classList.add("vehicles-view-garage-image-selected")}});
b(ua.seeMoreGarageVehiclesButtonClickHandler,"click",function(c){pf.seeMoreGarageVehiclesButtonClickHandler(a,c)})}},Zb=function(a){a=g.getElementsByClassName(a)[0];if(void 0!==a.dataset.selectedVehicle)return JSON.parse(a.dataset.selectedVehicle)},$b=function(a){a=g.getElementsByClassName(a)[0];if(void 0!==a.dataset.selectedVehicleSelection)return JSON.parse(a.dataset.selectedVehicleSelection)},ca={attach:function(a,b){var c=z["default"].setup().define;"vehicle-select"===a&&c(ua.vehicleViewEventHandler,
"click",function(d){var e=d.currentTarget.dataset.vehiclesViewId;g.getElementsByClassName(e)[0].dataset.selectedVehicle=d.currentTarget.dataset.vehicle;d={data:{currentSelections:$b(e),id:e,selectedVehicle:Zb(e)}};b(d)});"vehicle-add"===a&&c(ua.addVehicleClickHandler,"click",function(d){d=d.currentTarget.dataset.vehiclesViewId;d={data:{currentSelections:$b(d),id:d,selectedVehicle:Zb(d)}};b(d)})},getData:function(a){return{data:{currentSelections:$b(a),id:a,selectedVehicle:Zb(a)}}},initialize:,
kd=function(a){a=a.data.id;a=a.substring(0,a.lastIndexOf("-additional-attribute-selection"));g.getElementsByClassName(a)[0].dataset.vehicleSelectionChanged="true"},rf=function(a){a=a.data.id;a=a.substring(0,a.lastIndexOf("-vehicles-view"));g.getElementsByClassName(a+"-vehicle-by-attribute-row-header-select")[0].click()},db=function(a,b){g.getElementsByClassName(""+a)[0].dataset.rowSelected=b},sf={initialize:function(){var a=z["default"].setup().define;a(w.handleHSNTSNRowSelect,"click",function(b){db(b.currentTarget.dataset.viewId,
"hsn-tsn");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":garage-vehicle-selection:hsn-tsn-row-selected",1)});a(w.handleNumberPlateRowSelect,"click",function(b){db(b.currentTarget.dataset.viewId,"number-plate");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":garage-vehicle-selection:number-plate-row-selected",1)});a(w.handleVehiclesByAttributeRowSelect,"click",function(b){db(b.currentTarget.dataset.viewId,"vehicle-by-attribute");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":garage-vehicle-selection:vehicle-by-attribute-row-selected",
1)});a(w.handleGarageVehicleRowSelect,"click",function(b){db(b.currentTarget.dataset.viewId,"garage-vehicle");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":garage-vehicle-selection:garage-vehicle-row-selected",1)});ca.attach("vehicle-add",rf);ma.attach("garage-vehicle-change",kd)}},V={},C=function(a){var b=g.getElementsByClassName(a)[0].dataset.rowSelected;var c="hsn-tsn"===b?ta.getData(a+"-hsn-tsn-input").data.automotiveHsnTsn:void 0;if("garage-vehicle"===b){if(eb(a)){var d=ma.getData(a+"-additional-attribute-selection");
var e=d.data?d.data.currentSelectedVehicle:void 0}else d=ca.getData(a+"-vehicles-view"),e=d.data?d.data.selectedVehicle:void 0;d=e?e.identity:void 0}var f=g.getElementsByClassName(a)[0];f=JSON.parse(f.dataset.inputSelections);var h=g.getElementsByClassName(a)[0].dataset.rowSelected;switch(h){case "garage-vehicle":eb(a)?(h=ma.getData(a+"-additional-attribute-selection"),h="true"===g.getElementsByClassName(a)[0].dataset.vehicleSelectionChanged?h.data.currentVehicleSelection:h.data?h.data.currentSelection:
void 0):h=ca.getData(a+"-vehicles-view").data.currentSelections;break;case "hsn-tsn":h=ta.getData(a+"-hsn-tsn-input").data.inputSelection;break;case "number-plate":h=cb.getData(a+"-number-plate-input").data.selections;break;case "vehicle-by-attribute":h=ba.getData(a+"-vehicle-attributes-selection").data.currentSelections;break;default:throw r.logAndReturnBadRequestError("Unable to find selected row: "+h,"garage-vehicle-selection","getCurrentVehicleSelections");}return{data:{automotiveHsnTsn:c,garageId:d,
garageVehicle:e,id:a,inputSelections:f,selections:h,vehicleSelectionType:tf(a,b)}}},tf=function(a,b){switch(b){case "garage-vehicle":if(b=eb(a))b=(b=g.getElementsByClassName(a+"-vehicle-view")[0])?"true"===b.dataset.isVehicleFullySelected:!1,b=!b;return b&&"true"!==g.getElementsByClassName(a)[0].dataset.vehicleSelectionChanged?"additional-attribute":"garage";case "hsn-tsn":return"hsn-tsn";case "number-plate":return"number-plate";case "vehicle-by-attribute":return"attribute";default:throw r.logAndReturnBadRequestError("Unable to find selected row: "+
b,"garage-vehicle-selection","getCurrentVehicleSelections");}},eb=function(a){return(a=g.getElementsByClassName(a+"-vehicle-view")[0])?"garage-vehicle-selection"!==a.dataset.vehiclesViewType:!1},ld=function(a){return-1<a.data.id.indexOf("vehicle-attributes-selection")},md=function(a){return-1<a.data.id.indexOf("additional-attribute-selection")},nd=function(a,b,c){a=a.data.id;a=a.substring(0,a.lastIndexOf("-hsn-tsn-input"));g.getElementsByClassName(a)[0].dataset.isAllSelectedHsnTsn=b?"false":"true";
b=C(a);c(b)},fb=function(a,b,c){var d=ta.getData(a+"-hsn-tsn-input"),e="";d&&d.data&&(e=d.data.automotiveHsnTsn);7===e.length?"hsn-tsn-select"===b&&(a=C(a),c(a)):"hsn-tsn-reset"===b&&(a=C(a),c(a))},od=function(a,b,c){a=a.data.id;a=a.substring(0,a.lastIndexOf("-number-plate-input"));g.getElementsByClassName(a)[0].dataset.isAllSelectedNumberplate=b?"false":"true";b=C(a);c(b)},pd=function(a){return a.substring(0,a.lastIndexOf("-vehicle-attributes-selection"))},ac=function(a,b){a=a.currentTarget.dataset.viewId;
var c=g.getElementsByClassName(a)[0];if(c&&c.dataset&&"true"===c.dataset.isAllSelectedAdditionalAttributeSelection){var d=C(a);b(d)}c&&c.dataset&&"true"===c.dataset.isVehiclesViewSelected&&(d=C(a),b(d));c&&c.dataset&&"true"===c.dataset.vehicleSelectionChanged&&"true"===c.dataset.doesNotContainAdditionalAttributeSelection&&(d=C(a),b(d))},Ia={attach:function(a,b){var c=z["default"].setup().define;switch(a){case "hsn-tsn-reset":Ha?(G["default"].declarative("hsn-tsn-input-handler","keyup",function(d){fb(d.data.viewId,
a,b)}),c(w.handleHSNTSNRowSelect,"click",function(d){fb(d.currentTarget.dataset.viewId,a,b)})):(ta.attach("hsn-tsn-reset",function(d){nd(d,!0,b)}),c(w.handleHSNTSNRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"!==e.dataset.isAllSelectedHsnTsn&&(d=C(d),b(d))}));break;case "hsn-tsn-select":Ha?(G["default"].declarative("hsn-tsn-input-handler","keyup",,c(w.handleHSNTSNRowSelect,"click",):(ta.attach("hsn-tsn-vehicle-select",function(d){nd(d,!1,b)}),c(w.handleHSNTSNRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"===e.dataset.isAllSelectedHsnTsn&&(d=C(d),b(d))}));break;case "number-plate-reset":cb.attach("number-plate-reset",function(d){od(d,!0,b)});c(w.handleNumberPlateRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"!==e.dataset.isAllSelectedNumberplate&&
(d=C(d),b(d))});break;case "number-plate-select":cb.attach("number-plate-vehicle-select",;c(w.handleNumberPlateRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"===e.dataset.isAllSelectedNumberplate&&(d=C(d),b(d))});break;case "garage-vehicle-select":ca.attach("vehicle-select",function(d){d=d.data.id;d=d.substring(0,d.lastIndexOf("-vehicles-view"));var e=C(d);g.getElementsByClassName(d)[0].dataset.isVehiclesViewSelected=
"true";b(e)});c(w.handleGarageVehicleRowSelect,"click",function(d){ac(d,b)});break;case "attribute-selection-reset":ba.attach("attribute-reset",function(d){ld(d)&&(d=pd(d.data.id),g.getElementsByClassName(d)[0].dataset.isAllSelectedAttributeSelection="false",d=C(d),b(d))});c(w.handleVehiclesByAttributeRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;"true"!==g.getElementsByClassName(d)[0].dataset.isAllSelectedAttributeSelection&&(d=C(d),b(d))});break;case "attribute-selection-select":ba.attach("all-attributes-select",
function(d){ld(d)&&(d=pd(d.data.id),g.getElementsByClassName(d)[0].dataset.isAllSelectedAttributeSelection="true",d=C(d),b(d))});c(w.handleVehiclesByAttributeRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;"true"===g.getElementsByClassName(d)[0].dataset.isAllSelectedAttributeSelection&&(d=C(d),b(d))});break;case "garage-vehicle-reset":c(w.handleGarageVehicleRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"!==e.dataset.isVehiclesViewSelected&&
(d=C(d),b(d))});break;case "additional-attribute-selection-reset":ma.attach("additional-attributes-reset",function(d){md(d)&&(d=d.data.id,d=d.substring(0,d.lastIndexOf("-additional-attribute-selection")),g.getElementsByClassName(d)[0].dataset.isAllSelectedAdditionalAttributeSelection="false",d=C(d),b(d))});c(w.handleGarageVehicleRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"!==e.dataset.isVehiclesViewSelected&&"true"!==e.dataset.isAllSelectedAdditionalAttributeSelection&&
"true"!==e.dataset.doesNotContainAdditionalAttributeSelection&&"true"!==e.dataset.vehicleSelectionChanged&&(d=C(d),b(d))});break;case "additional-attribute-selection-select":ma.attach("additional-attributes-select",function(d){md(d)&&(d=d.data.id,d=d.substring(0,d.lastIndexOf("-additional-attribute-selection")),g.getElementsByClassName(d)[0].dataset.isAllSelectedAdditionalAttributeSelection="true",d=C(d),b(d))});c(w.handleGarageVehicleRowSelect,"click",function(d){ac(d,b)});break;case "additional-attribute-selection-vehicle-select":ma.attach("garage-vehicle-change",
function(d){kd(d);var e=d.data.id;d=e.substring(0,e.lastIndexOf("-additional-attribute-selection"));var f=g.getElementsByClassName(d)[0];e=g.getElementsByClassName(e+"-additional-attribute-selection-holder")[0];!e||e.classList.contains("aok-hidden")?f.dataset.doesNotContainAdditionalAttributeSelection="true":f.dataset.doesNotContainAdditionalAttributeSelection="false";d=C(d);b(d)}),c(w.handleGarageVehicleRowSelect,"click",function(d){ac(d,b)})}},getData:C,initialize:function(a){if(!0!==V[a+"-vehicles-view"])try{ca.initialize(a+
"-vehicles-view"),V[a+"-vehicles-view"]=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize vehicles-view for "+a,"garage-vehicle-selection","initializeVehiclesViewClient",c);}if(!0!==V[a+"-number-plate-input"])try{cb.initialize(a+"-number-plate-input"),V[a+"-number-plate-input"]=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize number-plate-input for "+a,"garage-vehicle-selection","initializeNumberPlateClient",c);}if(!0!==V[a+"-hsn-tsn-input"])try{ta.initialize(a+
"-hsn-tsn-input"),V[a+"-hsn-tsn-input"]=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize hsn-tsn-input for "+a,"garage-vehicle-selection","initializeHsnTsnClient",c);}if(!0!==V[a+"-vehicle-attributes-selection"])try{ba.initialize(a+"-vehicle-attributes-selection"),V[a+"-vehicle-attributes-selection"]=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize attributes-selection for "+a,"garage-vehicle-selection","initializeAttributesSelectionClient",c);
}if(!0!==V[a+"-additional-attribute-selection"])try{var b=g.getElementsByClassName(a+"-vehicle-view")[0];b&&"additional-attribute-selection"===b.dataset.vehiclesViewType&&(ma.initialize(a+"-additional-attribute-selection"),V[a+"-additional-attribute-selection"]=!0)}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize garage-additional-attribute-selection for "+a,"garage-vehicle-selection","initializeGarageAdditionalAttributeClient",c);}if(!0!==V.initializeBrowserOperation)try{sf.initialize(),
V.initializeBrowserOperation=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize browser operation for "+a,"garage-vehicle-selection","initializeBrowserOperation",c);}},isAdditionalAttributeSelection:eb,reset:function(a){try{ba.reset(a+"-vehicle-attributes-selection"),ma.reset(a+"-additional-attribute-selection"),V[a+"-vehicle-attributes-selection"]=!1,V[a+"-additional-attribute-selection"]=!1}catch(b){throw r.logAndReturnFailedDependencyError("Failed to reset attributes-selection for "+
a,"garage-vehicle-selection","reset",b);}}},gb;((gb||(gb={}));var uf={initialize:function(a){a=z["default"].setup().define;a(gb.partfinderGarageEntitySelectionManageYourGarageLinkClick,"click",function(b){m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":"+b.currentTarget.dataset.metric,
1)})}},oa={},qd=!1,Z=rd=function(a){var b=Ia.getData(hb(a));return void 0===b.error?{data:{asin:g.getElementsByClassName(bc(a))[0].dataset.asin,automotiveHsnTsn:b.data.automotiveHsnTsn,garageId:b.data.garageId,garageVehicle:b.data.garageVehicle,id:a,inputSelections:b.data.inputSelections,partfinderGarageEntitySelectionType:{"additional-attribute":"VehicleAdditionalAttribute",attribute:"VehicleAttribute",garage:"GarageVehicle","hsn-tsn":"HsnTsn","number-plate":"NumberPlate"}[b.data.vehicleSelectionType],
selections:b.data.selections}}:{error:b.error}},va=function(a,b){a=sd(a.data.id);0===b.localeCompare(a)&&(b=g.getElementsByClassName(bc(a))[0],a=g.getElementsByClassName(a+"-filter-button-disabled")[0],b.classList.remove("aok-hidden"),a.classList.add("aok-hidden"))},Ja=function(a,b){a=sd(a.data.id);0===b.localeCompare(a)&&td(a)},hb=function(a){return a+"-garage-vehicle-selection"},sd=bc=
td=function(a){var b=g.getElementsByClassName(bc(a))[0];a=g.getElementsByClassName(a+"-filter-button-disabled")[0];b.classList.add("aok-hidden");a.classList.remove("aok-hidden")},cc={attach:function(a,b){switch(a){case "filter-button-click":a=z["default"].setup().define,a(gb.partfinderGarageEntitySelectionFilterButtonClick,"click",function(c){var d=rd(c.currentTarget.dataset.componentId);b(d);m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":"+c.currentTarget.dataset.metric,1)})}},getData:rd,initialize:function(a){!0!==
qd&&(uf.initialize(a),qd=!0);try{Ia.initialize(hb(a))}catch(c){throw r.logAndReturnFailedDependencyError("Failed on initialize with id [ "+a+" ]","partfinder-garage-entity-selection","initialize",c);}var b=a+"-garageVehicleSelectionClientDefaultAttach";!0!==oa[b]&&(Z(va,a,"garage-vehicle-select"),Z(va,a,"hsn-tsn-select"),Z(va,a,"number-plate-select"),Z(Ja,a,"garage-vehicle-reset"),Z(Ja,a,"hsn-tsn-reset"),Z(Ja,a,"number-plate-reset"),oa[b]=!0);b=a+"-garageVehicleSelectionClientAttributeSelectionAttach";
!0!==oa[b]&&(Z(Ja,a,"attribute-selection-reset"),Z(va,a,"attribute-selection-select"),oa[b]=!0);Ia.isAdditionalAttributeSelection(hb(a))&&(b=a+"-garageVehicleSelectionClientAdditionalAttributesAttach",!0!==oa[b]&&(Z(va,a,"additional-attribute-selection-select"),Z(va,a,"additional-attribute-selection-vehicle-select"),Z(Ja,a,"additional-attribute-selection-reset"),oa[b]=!0))},reset:function(a){try{var b=hb(a);Ia.reset(b);oa[a+"-garageVehicleSelectionClientAttributeSelectionAttach"]=!1;oa[a+"-garageVehicleSelectionClientAdditionalAttributesAttach"]=
!1;td(a)}catch(c){throw a=new J("partfinder-garage-entity-selection failed to reset for "+a+".","partfinder-garage-entity-selection","reset",{code:424,isRetriable:!1,name:"FailedDependencyError"},c),t["default"].log(a.toString(),"ERROR","international-automotive"),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":partfinder-garage-entity-selection:reset-failed",1),a;}}},ud=function(){return function(a,b,c,d){var e=this;this.getCurrentSelections=function(){return JSON.parse(e.getBlockStates().selectionsJson).concat(e.getAllAttributeValues())};
this.isLastBlock=function(){return"true"===e.getBlockStates().isLastBlock};this.isBlockEmpty=function(){return!e.getAttributeIds().length};this.getRequiredAttributes=function(){return JSON.parse(e.getBlockStates().requiredAttributesJson)};this.bindListeners=function(){var f,h=e.getAttributeIds();try{for(var k=q.__values(h),l=k.next();!l.done;l=k.next())ka["default"].on("a:dropdown:selected:"+e.getDropDownClassName(l.value),e.attributeSelectionListner)}catch(p){var n={error:p}}finally{try{l&&!l.done&&
(f=k.return)&&f.call(k)}finally{if(n)throw n.error;}}};this.unbindListeners=function(){var f,h=e.getAttributeIds();try{for(var k=q.__values(h),l=k.next();!l.done;l=k.next()){var n=l.value,p=e.getDropDownNativeId(n);e.setDefaultSelectedValue(p);ka["default"].off("a:dropdown:selected:"+e.getDropDownClassName(n),e.attributeSelectionListner)}}catch(A){var u={error:A}}finally{try{l&&!l.done&&(f=k.return)&&f.call(k)}finally{if(u)throw u.error;}}};this.resetLastSelectedAttribute=function(){if(-1!==e.lastSelectedAttributeIndex){var f=
e.getAttributeIds();f=e.getDropDownNativeId(f[e.lastSelectedAttributeIndex]);e.setDefaultSelectedValue(f)}};this.getBlockStates=function(){return g.getElementsByClassName(e.id+"-active-block-states-"+e.attributesBlockIndex)[0].dataset};this.getAttributeIds=function(){var f=e.getBlockStates().activeAttributeIdsJson;return JSON.parse(f)};this.getDropDownNativeId=function(f){return e.id+"-"+f+"-native-id"};this.getDropDownClassName=function(f){return e.id+"-"+f};this.areAllAttributesInBlockSelected=
function(){var f,h=e.getAllAttributeValues();try{for(var k=q.__values(h),l=k.next();!l.done;l=k.next())if(!l.value.value.length)return!1}catch(p){var n={error:p}}finally{try{l&&!l.done&&(f=k.return)&&f.call(k)}finally{if(n)throw n.error;}}return!0};this.attributeSelectionListner=function(f){var h=e.getAttributeIds(),k=f.name.substring(e.id.length+1);f=h.findIndex(function(l){return l===k});h=e.getSelectedValue(e.getDropDownNativeId(h[f]));if(""!==h&&void 0!==h)e.lastSelectedAttributeIndex=f,-1===
e.getAllAttributeValues().findIndex(function(l){return""===l.value})&&e.allAttributesSelectionCallback(e.attributesBlockIndex);else throw m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":attributes-selection:"+k+":wrongValue",1),r.logAndReturnBadRequestError("Invalid attribute value for "+k+". It should not be empty or undefined","attributes-selection","attributeSelectionListner");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":attributes-selection:"+k+"-attribute-selected",1)};this.getAllAttributeValues=
function(){return e.getAttributeIds().map(function(f){var h=e.getSelectedValue(e.getDropDownNativeId(f));return{id:f,value:h?h:""}})};this.setDefaultSelectedValue=function(f){(f=T["default"].getSelect(f))&&f.setValue("")};this.getSelectedValue=function(f){if(f=T["default"].getSelect(f))return f.val()};this.id=a;this.allAttributesSelectionCallback=b;this.attributesBlockIndex=c;this.lastSelectedAttributeIndex=d}}(),vf=new Map([["A1PA6795UKMFR9","de"],["A1F83G8C2ARO7P","uk"],["A13V1IB3VIYZZH","nl-prod"],
["A1805IZSGTT6HS","nl-devo"],["A1C3SOZRARQ6R3","pl-prod"],["AKY4K4WKH21YQ","pl-devo"],["A2NODRKZP88ZB9","se-prod"],["AT614YYYNOC1S","se-devo"],["APJ6JRA9NG5V4","it-prod"],["A3HOBANJMCMD83","it-devo"],["A1RKKUPIHCS9HS","es-prod"],["AJZF8LZ1EJVJN","es-devo"]]),wf=function(){function a(b){var c=this;this.attributesSelectionBlockClients={};this.allAttributesSelectCallbacks=[];this.attributesResetCallbacks=[];this.operationProxy=L["default"].setup();this.attach=function(e,f){switch(e){case "all-attributes-select":c.allAttributesSelectCallbacks.push(f);
break;case "attribute-reset":c.attributesResetCallbacks.push(f)}};this.remove=function(){c.reset();g.getElementsByClassName(""+c.id)[0].remove()};this.reset=function(){c.attributesSelectionBlockClients={}};this.getCurrentSelections=function(){return c.attributesSelectionBlockClients[c.getActiveBlockClassName(c.currentTotalActiveBlocks-1)].getCurrentSelections()};this.areAllRequiredAttributesSelected=function(){var e=c.attributesSelectionBlockClients[c.getActiveBlockClassName(c.currentTotalActiveBlocks-
1)];return e.isLastBlock()&&e.areAllAttributesInBlockSelected()};this.getNonEmptyActiveBlocksCount=function(){var e=c.attributesSelectionBlockClients[c.getActiveBlockClassName(c.currentTotalActiveBlocks-1)];return e.isBlockEmpty()&&e.isLastBlock()?c.currentTotalActiveBlocks-1:c.currentTotalActiveBlocks};this.prepareRequestForRemoteOperation=function(e){var f=c.attributesSelectionBlockClients[c.getActiveBlockClassName(e)],h=f.getCurrentSelections();f=f.getRequiredAttributes();var k=c.getAttributesSelectionType();
e+=1;return{asin:c.getAsin(),attributesBlockIndex:""+e,id:c.id,isLayoutHorizontal:c.getLayout(),requiredSelection:f,selectionType:k,selections:h}};this.deleteBlockFromComponent=function(e){var f=g.getElementsByClassName(""+c.id)[0];e=f.getElementsByClassName(e)[0];f&&e&&f.removeChild(e)};this.setupNextAttributesSelectionBlockClient=function(e){var f=new ud(c.id,c.allAttributesSelectionInsideBlockCallback,e,-1);c.attributesSelectionBlockClients[c.getActiveBlockClassName(e)]=f;f.unbindListeners();f.bindListeners();
return f};this.changeErrorMessageVisibility=function(e,f){e=g.getElementsByClassName(e+"-error-box")[0];f?e.classList.add("aok-hidden"):e.classList.remove("aok-hidden")};this.getLayout=function(){var e=a.getAttributesSelectionStates(c.id),f=!1;void 0!==e&&(f="true"===e.horizontalLayout);return f};this.getAsin=function(){var e=a.getAttributesSelectionStates(c.id);if(void 0!==e)var f=e.asin;return""===f?void 0:f};this.isEUMarketPlace=function(){var e=a.getRetailSelection(c.id);return void 0!==e&&(e=
e.market,void 0!==e&&vf.has(e))?!0:!1};this.allAttributesSelectionInsideBlockCallback=function(e){var f=c.attributesSelectionBlockClients[c.getActiveBlockClassName(e)];if(f)if(e<c.getNonEmptyActiveBlocksCount()-1&&c.callAttributesResetCallbacks(),f.isLastBlock())c.callAllAttributesSelectCallbacks();else{var h={componentName:"attributes-selection",methodName:"allAttributesSelectionInsideBlockCallback",remoteOperation:c.operationProxy.getAttributesSelectionView,request:c.prepareRequestForRemoteOperation(e)};
c.showSpinner();fa.performHtmlRemoteOperation(h).then(function(k){var l=e+1;c.deleteAllFollowingActiveBlocks(e);c.deleteBlockFromComponent(c.getInActiveBlockClassName());c.appendActiveAndInActiveBlocks(k,l);k=c.setupNextAttributesSelectionBlockClient(l);"true"===k.getBlockStates().isSingleOptionWeblab&&(c.prepopulateSingleOptionDropdowns(k),c.displayOrHideSingleOptionDropdownNote());k.isLastBlock()&&k.isBlockEmpty()&&c.callAllAttributesSelectCallbacks();c.changeErrorMessageVisibility(c.id,!0);c.hideSpinner()}).catch(function(){c.deleteAllFollowingActiveBlocks(e);
c.deleteBlockFromComponent(c.getInActiveBlockClassName());c.changeErrorMessageVisibility(c.id,!1);f.resetLastSelectedAttribute();c.hideSpinner()})}};this.callAttributesResetCallbacks=function(){var e;try{for(var f=q.__values(c.attributesResetCallbacks),h=f.next();!h.done;h=f.next()){var k=h.value,l={data:{currentSelections:c.getCurrentSelections(),id:c.id,allAttributesSelected:!1}};k(l)}}catch(p){var n={error:p}}finally{try{h&&!h.done&&(e=f.return)&&e.call(f)}finally{if(n)throw n.error;}}};this.callAllAttributesSelectCallbacks=
function(){var e;try{for(var f=q.__values(c.allAttributesSelectCallbacks),h=f.next();!h.done;h=f.next()){var k=h.value,l={data:{id:c.id,currentSelections:c.getCurrentSelections(),allAttributesSelected:!0}};k(l)}}catch(p){var n={error:p}}finally{try{h&&!h.done&&(e=f.return)&&e.call(f)}finally{if(n)throw n.error;}}};this.appendActiveAndInActiveBlocks=function(e,f){var h=g.getElementsByClassName(""+c.id)[0];if(h){if(f=e.getElementsByClassName(c.getActiveBlockClassName(f))[0])f=ja.unscope(f),h.appendChild(f),
c.currentTotalActiveBlocks++;if(e=e.getElementsByClassName(c.getInActiveBlockClassName())[0])e=ja.unscope(e),h.appendChild(e)}};this.deleteAllFollowingActiveBlocks=function(e){var f=c.currentTotalActiveBlocks;for(e+=1;e<f;e++)c.attributesSelectionBlockClients[c.getActiveBlockClassName(e)].unbindListeners(),c.deleteBlockFromComponent(c.getActiveBlockClassName(e)),c.currentTotalActiveBlocks--};this.getActiveBlockClassName=function(e){return c.id+"-active-block-"+e};this.getActiveBlockStateClassName=
function(e){return c.id+"-active-block-states-"+e};this.getInActiveBlockClassName=function(){return c.id+"-inactive-block"};this.showSpinner=function(){var e=g.getElementsByClassName(c.id+"-spinner-container")[0];e.classList.remove("aok-hidden");e.firstChild.classList.remove("aok-hidden");e=g.getElementsByClassName(""+c.id)[0].getElementsByTagName("*");for(var f=0;f<e.length;f++)e[f].disabled=!0};this.hideSpinner=function(){var e=g.getElementsByClassName(c.id+"-spinner-container")[0];e.classList.add("aok-hidden");
e.firstChild.classList.remove("aok-hidden");e=g.getElementsByClassName(""+c.id)[0].getElementsByTagName("*");for(var f=0;f<e.length;f++)e[f].disabled=!1};this.getAttributesSelectionType=function(){switch(a.getAttributesSelectionStates(c.id).attributesSelectionType){case "base":return"base";case "variant":return"variant";case "last-exclusive":return"last-exclusive"}var e=new J("Unable to get selection type","attributes-selection","getAttributesSelectionType",{code:404,isRetriable:!1,name:"NotFoundError"});
t["default"].log(e.toString(),"ERROR","international-automotive");throw e;};this.prepopulateSingleOptionDropdowns=function(e){var f;try{for(var h=q.__values(e.getAttributeIds()),k=h.next();!k.done;k=h.next()){var l=k.value,n=e.getDropDownNativeId(l),p=T["default"].getSelect(n);if(1===p.getOptions().info().length){p.setValue(p.getOptions().info()[0].value);var u=e.getDropDownClassName(l);ka["default"].trigger("a:dropdown:selected:"+u,{name:u})}}}catch(I){var A={error:I}}finally{try{k&&!k.done&&(f=
h.return)&&f.call(h)}finally{if(A)throw A.error;}}};this.displayOrHideSingleOptionDropdownNote=function(){for(var e,f,h=g.getFirstElementByClassNameOrThrow(c.id+"-single-option-note"),k=!1,l=0;l<c.currentTotalActiveBlocks;l++){var n=c.attributesSelectionBlockClients[c.getActiveBlockClassName(l)];try{for(var p=(e=void 0,q.__values(n.getAttributeIds())),u=p.next();!u.done;u=p.next()){var A=n.getDropDownNativeId(u.value);1===T["default"].getSelect(A).getOptions().info().length&&(k=!0)}}catch(I){e={error:I}}finally{try{u&&
!u.done&&(f=p.return)&&f.call(p)}finally{if(e)throw e.error;}}}k?h.classList.remove("aok-hidden"):h.classList.add("aok-hidden")};this.getBlockSelectionJsonSize=function(e){e=c.getActiveBlockStateClassName(e);e=g.getElementsByClassName(e)[0].dataset;return JSON.parse(JSON.stringify(e.selectionsJson)).length};this.id=b;this.currentTotalActiveBlocks=JSON.parse(a.getAttributesSelectionStates(b).activeBlockSize);for(b=0;b<this.currentTotalActiveBlocks;++b){var d=-1;b<this.currentTotalActiveBlocks-1&&(d=
this.getBlockSelectionJsonSize(b),d=this.getBlockSelectionJsonSize(b+1)-d-1);d=new ud(this.id,this.allAttributesSelectionInsideBlockCallback,b,d);this.attributesSelectionBlockClients[this.getActiveBlockClassName(b)]=d;d.bindListeners()}}a.getAttributesSelectionStates=function(b){return g.getElementsByClassName(b+"-states")[0].dataset};a.getRetailSelection=function(b){return g.getElementsByClassName(b+"-retailrequest")[0].dataset};return a}(),P={},vd=function(a){if(void 0!==P[a]){var b={},c;for(c in P)c!==
a&&(b[c]=P[c]);P=b}},H={attach:function(a,b){var c;try{for(var d=q.__values(Object.keys(P)),e=d.next();!e.done;e=d.next())P[e.value].attach(a,b)}catch(h){var f={error:h}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(f)throw f.error;}}},getData:function(a){var b=new J("attributes-selection does not exists for id: "+a+".","attributes-selection","getData",{code:400,isRetriable:!1,name:"BadRequestError"});if(void 0!==P[a])try{var c=P[a].getCurrentSelections();return{data:{allAttributesSelected:P[a].areAllRequiredAttributesSelected(),
currentSelections:c,id:a}}}catch(d){}return{error:b}},initialize:function(a){void 0===P[a]&&(P[a]=new wf(a))},remove:function(a){void 0!==P[a]&&(P[a].remove(),vd(a))},reset:function(a){void 0!==P[a]&&(P[a].reset(),vd(a))}},wd=function(a){var b=a.data.nativeId;a=a.data.viewId;var c=g.getElementsByClassName(a)[0];b=T["default"].getSelect(b).val();c.dataset.currentSelection=b;JSON.parse(b).vehicle.identity===c.dataset.selectedVehicleId?(b=g.getElementsByClassName(a+"-additional-attribute-selection-holder")[0],
a=g.getElementsByClassName(a+"-additional-info-holder")[0],b&&b.classList.remove("aok-hidden"),a&&a.classList.remove("aok-hidden")):(b=g.getElementsByClassName(a+"-additional-attribute-selection-holder")[0],a=g.getElementsByClassName(a+"-additional-info-holder")[0],b&&b.classList.add("aok-hidden"),a&&a.classList.add("aok-hidden"))},xf={initialize:function(a){G["default"].declarative("additional-attribute-select-handler","change",function(b){0===a.localeCompare(b.data.viewId)&&wd(b)})}},xd={},yd=[],
zd=function(a,b){a=a.data.id;a=a.substring(0,a.lastIndexOf("-attributes-selection"));a={data:{currentSelectedVehicle:dc(a),currentSelection:ec(a),currentVehicleSelection:ib(a),id:a}};b(a)},ec=function(a){return g.getElementsByClassName(a+"-attributes-selection")[0]?H.getData(a+"-attributes-selection").data.currentSelections:ib(a)},dc=function(a){if((a=g.getElementsByClassName(a)[0])&&a.dataset&&a.dataset.currentSelection)return JSON.parse(a.dataset.currentSelection).vehicle},ib=function(a){if((a=
g.getElementsByClassName(a)[0])&&a.dataset&&a.dataset.currentSelection)return JSON.parse(a.dataset.currentSelection).vehicleSelection},ha={attach:function(a,b){switch(a){case "garage-vehicle-change":yd.push(b);break;case "additional-attributes-reset":H.attach("attribute-reset",function(c){zd(c,b)});break;case "additional-attributes-select":H.attach("all-attributes-select",function(c){zd(c,b)})}},getData:function(a){return{data:{currentSelectedVehicle:dc(a),currentSelection:ec(a),currentVehicleSelection:ib(a),
id:a}}},initialize:function(a){try{void 0!==g.getElementsByClassName(a+"-attributes-selection")[0]&&H.initialize(a+"-attributes-selection")}catch(b){throw r.logAndReturnFailedDependencyError("Failed to initialize attributes-selection for "+a+".","garage-vehicle-additional-attributes-selection","initialize",b);}!0!==xd[a+"-garageVehicleAdditionalAttributesSelectionBrowserOps"]&&(xf.initialize(a),xd[a+"-garageVehicleAdditionalAttributesSelectionBrowserOps"]=!0,G["default"].declarative(a+"-additional-attribute-select-handler",
"change",function(b){var c;wd(b);b=b.data.viewId;b={data:{currentSelectedVehicle:dc(b),currentSelection:ec(b),currentVehicleSelection:ib(b),id:b}};try{for(var d=q.__values(yd),e=d.next();!e.done;e=d.next()){var f=e.value;f(b)}}catch(k){var h={error:k}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error;}}}))},reset:function(a){try{H.reset(a+"-attributes-selection")}catch(b){throw r.logAndReturnFailedDependencyError("Failed to reset attributes-selection for "+a,"garage-vehicle-additional-attributes-selection",
"reset",b);}}},jb=[],Ad=[],fc={addEventHandlers:function(a,b){switch(a){case "hsn-tsn-select":jb.push(b);break;case "hsn-tsn-reset":jb.push(b);break;case "hsn-tsn-vehicle-select":Ad.push(b)}},emitEvent:function(a,b){var c,d,e;switch(a){case "hsn-tsn-select":try{for(var f=q.__values(jb),h=f.next();!h.done;h=f.next()){var k=h.value;k(b)}}catch(Y){var l={error:Y}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error;}}break;case "hsn-tsn-reset":try{for(var n=q.__values(jb),p=n.next();!p.done;p=
n.next())k=p.value,k(b)}catch(Y){var u={error:Y}}finally{try{p&&!p.done&&(d=n.return)&&d.call(n)}finally{if(u)throw u.error;}}break;case "hsn-tsn-vehicle-select":try{for(var A=q.__values(Ad),I=A.next();!I.done;I=A.next())k=I.value,k(b)}catch(Y){var Ga={error:Y}}finally{try{I&&!I.done&&(e=A.return)&&e.call(A)}finally{if(Ga)throw Ga.error;}}}}},gc;(gc||(gc={})).hsntsnSearchButtonClickHandler="hsntsnSearchButtonClickHandler";var Q={getDropDownNativeId:function(a){return a+"-matches-native-id"},getErrorDivId:function(a){return a+
"-error"},getHsnTextInputId:function(a){return a+"-hsn-input"},getResultDataDivId:function(a){return a+"-results-data"},getSearchButtonId:function(a){return a+"-search-button"},getSearchResultHolderId:function(a){return a+"-results-holder"},getSpinnerContainerId:function(a){return a+"-spinner-container"},getTsnTextInputId:function(a){return a+"-tsn-input"}},Bd=function(a){a=y.isHTMLElementAvailable(Q.getResultDataDivId(a))?kb(Q.getResultDataDivId(a)).dataset.selections:kb(a).dataset.currentSelection;
return JSON.parse(a)},kb=function(a){return g.getElementsByClassName(""+a)[0]},hc=function(a){a=g.getElementsByClassName(a)[0];return a.hasChildNodes()?a.firstChild.value:a.value},y={getCurrentSelections:function(a){a=g.getElementsByClassName(""+a)[0];return JSON.parse(a.dataset.currentSelection)},getCurrentWrittenValue:function(a){var b=hc(a+"-hsn-input");a=hc(a+"-tsn-input");return b+a},getHTMLDivElement:kb,getHTMLElement:function(a){return g.getElementsByClassName(""+a)[0]},getHsnTextInputValue:function(a){a=
y.getHTMLElement(Q.getHsnTextInputId(a));return a.hasChildNodes()?a.firstChild.value:a.value},getInputSelections:Bd,getSelections:function(a){var b=Object.assign([],Bd(a));y.isHTMLElementAvailable(Q.getResultDataDivId(a))&&((a=T["default"].getSelect(Q.getDropDownNativeId(a)))&&a.val()?b.push(JSON.parse(a.val())):m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:dropdown-error",1));return b},getTextInputValue:hc,getTsnTextInputValue:function(a){a=y.getHTMLElement(Q.getTsnTextInputId(a));return a.hasChildNodes()?
a.firstChild.value:a.value},getVehicleIdentifierAttributeName:function(a){return kb(a).dataset.hsnTsnAttributeId},isHTMLElementAvailable:function(a){return 0!==g.getElementsByClassName(a).length}},ic={hideErrorSection:function(a){y.getHTMLDivElement(Q.getErrorDivId(a)).classList.add("aok-hidden")},showErrorSection:function(a){y.getHTMLDivElement(Q.getErrorDivId(a)).classList.remove("aok-hidden")}},yf={getEncryptedId:function(a,b,c){return q.__awaiter(void 0,void 0,void 0,function(){var d,e,f,h;return q.__generator(this,
function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,Da["default"].post("/automotive-components/vehicle-identifier?sif_profile=AutomotiveUIComponentsVehicleIdentifierSIFProfile",{accepts:"*/*",contentType:"application/json"},(h={},h.automotiveVehicleIdentifier=a,h))];case 1:d=k.sent();e=d.responseBody;if(!e)throw Error("Encrypted value of hsn tsn can not be undefined");return[2,e.automotiveVehicleIdentifier];case 2:throw f=k.sent(),r.logAndThrowFailedDependencyError("Ajax Request Failed for hsn tsn encryption",
c,b,f);case 3:return[2]}})})}},zf=function(a){return q.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f,h;return q.__generator(this,function(k){switch(k.label){case 0:return b=L["default"].setup(),c=b.getMatchingResultHsnTsn,d=y.getHsnTextInputValue(a),e=y.getTsnTextInputValue(a),[4,yf.getEncryptedId(d.concat(e),"performSearchButtonClickOperation","hsn-tsn-input")];case 1:return f=k.sent(),h={componentName:"hsn-tsn-input",methodName:"performSearchButtonClickOperation",remoteOperation:c,request:{automotiveHsnTsn:f,
id:a,nextAttributeId:y.getVehicleIdentifierAttributeName(a),selections:y.getSelections(a)}},[2,h]}})})},Af=function(a){a={data:{automotiveHsnTsn:y.getCurrentWrittenValue(a),id:a,inputSelection:y.getInputSelections(a)}};fc.emitEvent("hsn-tsn-reset",a)},Bf=function(a){var b=y.getHTMLElement(Q.getSpinnerContainerId(a));b.classList.remove("aok-hidden");b.firstChild.classList.remove("aok-hidden");a=y.getHTMLElement(Q.getSearchButtonId(a));Cd(a)},jc=function(a){var b=y.getHTMLElement(Q.getSpinnerContainerId(a));
b.classList.add("aok-hidden");b.firstChild.classList.add("aok-hidden");a=y.getHTMLElement(Q.getSearchButtonId(a));Dd(a)},Cf={performSearchButtonClickOperation:function(a){var b=y.getHTMLElement(Q.getSearchResultHolderId(a));b.firstChild&&(b.firstChild.remove(),Af(a));Bf(a);zf(a).then(function(c){fa.performHtmlRemoteOperation(c).then(function(d){ic.hideErrorSection(a);b.innerHTML=d.innerHTML;jc(a)}).catch(function(d){ic.showErrorSection(a);t["default"].log("hsn-tsn-input remoteOperations failed for "+
a+" with "+d+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:remoteOperations-failure",1);jc(a)})}).catch(function(c){ic.showErrorSection(a);t["default"].log("hsn-tsn-input getRemoteOperationRequest failed for "+a+" with "+c+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:getRemoteOperationRequest-failure",1);jc(a)})}},Df=function(a){a=a.currentTarget.dataset.componentId;y.getHTMLElement(Q.getSearchButtonId(a)).classList.contains("a-button-disabled")||
(Cf.performSearchButtonClickOperation(a),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:search-button-click",1))},Dd=function(a){var b=a?a.getElementsByClassName("a-button-input")[0]:void 0;a.classList.remove("a-button-disabled");b&&(b.disabled=!1)},Cd=function(a){var b=a?a.getElementsByClassName("a-button-input")[0]:void 0;a.classList.add("a-button-disabled");b&&(b.disabled=!0)},Ef={initialize:function(a){G["default"].declarative("hsn-tsn-input-change","keyup",function(c){if(0===a.localeCompare(c.data.viewId)){c=
y.getHsnTextInputValue(a);var d=y.getTsnTextInputValue(a),e=y.getHTMLElement(Q.getSearchButtonId(a));4<=c.length&&3<=d.length?Dd(e):Cd(e)}});G["default"].declarative("hsn-tsn-result-select-action","change",function(c){0===a.localeCompare(c.data.componentId)&&(c={data:{automotiveHsnTsn:y.getCurrentWrittenValue(a),id:a,inputSelection:y.getInputSelections(a)}},fc.emitEvent("hsn-tsn-vehicle-select",c),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":hsn-tsn-input:vehicle-selected",1))});var b=z["default"].setup().define;
b(gc.hsntsnSearchButtonClickHandler,"click",Df)}},Ka,Gd=function(a,b){a=a.data.viewId;a={data:{automotiveHsnTsn:Ed(a),id:a,inputSelection:Fd(a)}};b(a)},Fd=function(a){a=g.getElementsByClassName(""+a)[0];return JSON.parse(a.dataset.currentSelection)},Ed=function(a){var b=wa(a+"-hsn-input");a=wa(a+"-tsn-input");return b+a},wa=function(a){a=g.getElementsByClassName(a)[0];return a.hasChildNodes()?a.firstChild.value:a.value},xa={attach:function(a,b){if(Ka)switch(a){case "hsn-tsn-select":G["default"].declarative("hsn-tsn-input-change",
"keyup",function(c){var d=c.data.viewId,e=wa(d+"-hsn-input");d=wa(d+"-tsn-input");e&&0!==e.length&&d&&0!==d.length&&Gd(c,b)});break;case "hsn-tsn-reset":G["default"].declarative("hsn-tsn-input-change","keyup",function(c){var d=c.data.viewId,e=wa(d+"-hsn-input");d=wa(d+"-tsn-input");e&&0!==e.length&&d&&0!==d.length||Gd(c,b)})}else fc.addEventHandlers(a,b)},getData:function(a){return Ka?{data:{automotiveHsnTsn:Ed(a),id:a,inputSelection:Fd(a)}}:{data:{automotiveHsnTsn:y.getCurrentWrittenValue(a),id:a,
inputSelection:y.getSelections(a)}}},initialize:function(a){var b,c=g.getElementsByClassName(a+"-hsntsn-match")[0];(Ka="true"===(null===(b=null===c||void 0===c?void 0:c.dataset)||void 0===b?void 0:b.isSearchButtonWeblabEnabled))||Ef.initialize(a)}},Hd=[],Id=[],kc={addEventHandlers:function(a,b){switch(a){case "number-plate-reset":Hd.push(b);break;case "number-plate-vehicle-select":Id.push(b)}},emitEvent:function(a,b){var c,d;switch(a){case "number-plate-reset":try{for(var e=q.__values(Hd),f=e.next();!f.done;f=
e.next()){var h=f.value;h(b)}}catch(u){var k={error:u}}finally{try{f&&!f.done&&(c=e.return)&&c.call(e)}finally{if(k)throw k.error;}}break;case "number-plate-vehicle-select":try{for(var l=q.__values(Id),n=l.next();!n.done;n=l.next())h=n.value,h(b)}catch(u){var p={error:u}}finally{try{n&&!n.done&&(d=l.return)&&d.call(l)}finally{if(p)throw p.error;}}}}},W={getDropDownNativeId:function(a){return a+"-matches-native-id"},getErrorDivId:function(a){return a+"-error"},getResultDataDivId:function(a){return a+
"-results-data"},getSearchButtonId:function(a){return a+"-search-button"},getSearchResultHolderId:function(a){return a+"-results-holder"},getSpinnerContainerId:function(a){return a+"-spinner-container"},getTextInputId:function(a){return a+"-text-input"}},Jd=function(a){a=D.isHTMLElementAvailable(W.getResultDataDivId(a))?lb(W.getResultDataDivId(a)).dataset.selections:lb(a).dataset.selections;return JSON.parse(a)},lb=function(a){return g.getElementsByClassName(""+a)[0]},D={getHTMLDivElement:lb,getHTMLElement:function(a){return g.getElementsByClassName(""+
a)[0]},getInputSelections:Jd,getNumberPlateTextInputValue:function(a){a=D.getHTMLElement(W.getTextInputId(a));return a.hasChildNodes()?a.firstChild.value:a.value},getSelections:function(a){var b=Object.assign([],Jd(a));D.isHTMLElementAvailable(W.getResultDataDivId(a))&&((a=T["default"].getSelect(W.getDropDownNativeId(a)))&&a.val()?b.push(JSON.parse(a.val())):m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-input:dropdown-error",1));return b},getVehicleIdentifierAttributeName:function(a){return lb(a).dataset.nextAttributeId},
isHTMLElementAvailable:function(a){return 0!==g.getElementsByClassName(a).length}},lc={hideErrorSection:function(a){D.getHTMLDivElement(W.getErrorDivId(a)).classList.add("aok-hidden")},showErrorSection:function(a){D.getHTMLDivElement(W.getErrorDivId(a)).classList.remove("aok-hidden")}},Ff={getEncryptedId:function(a,b,c){return q.__awaiter(void 0,void 0,void 0,function(){var d,e,f,h;return q.__generator(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,Da["default"].post("/automotive-components/vehicle-identifier?sif_profile=AutomotiveUIComponentsVehicleIdentifierSIFProfile",
{accepts:"*/*",contentType:"application/json"},(h={},h.automotiveVehicleIdentifier=a,h))];case 1:d=k.sent();e=d.responseBody;if(!e)throw Error("Encrypted value of number plate can not be undefined");return[2,e.automotiveVehicleIdentifier];case 2:throw f=k.sent(),r.logAndThrowFailedDependencyError("Ajax Request Failed for number plate encryption",c,b,f);case 3:return[2]}})})}},Gf=function(a){return q.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f;return q.__generator(this,function(h){switch(h.label){case 0:return b=
L["default"].setup(),c=b.getMatchingResult,d=D.getNumberPlateTextInputValue(a),[4,Ff.getEncryptedId(d,"performSearchButtonClickOperation","number-plate-input")];case 1:return e=h.sent(),f={componentName:"number-plate-input",methodName:"performSearchButtonClickOperation",remoteOperation:c,request:{automotiveNumberPlate:e,id:a,nextAttributeId:D.getVehicleIdentifierAttributeName(a),selections:D.getSelections(a)}},[2,f]}})})},Hf=function(a){a={data:{id:a,inputSelections:D.getInputSelections(a),selections:D.getSelections(a)}};
kc.emitEvent("number-plate-reset",a)},If=function(a){var b=D.getHTMLElement(W.getSpinnerContainerId(a));b.classList.remove("aok-hidden");b.firstChild.classList.remove("aok-hidden");a=D.getHTMLElement(W.getSearchButtonId(a));Kd(a)},mc=function(a){var b=D.getHTMLElement(W.getSpinnerContainerId(a));b.classList.add("aok-hidden");b.firstChild.classList.add("aok-hidden");a=D.getHTMLElement(W.getSearchButtonId(a));Ld(a)},Jf={performSearchButtonClickOperation:function(a){var b=D.getHTMLElement(W.getSearchResultHolderId(a));
b.firstChild&&(b.firstChild.remove(),Hf(a));If(a);Gf(a).then(function(c){fa.performHtmlRemoteOperation(c).then(function(d){lc.hideErrorSection(a);b.innerHTML=d.innerHTML;mc(a)}).catch(function(d){lc.showErrorSection(a);t["default"].log("number-plate-input remoteOperations failed for "+a+" with "+d+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-inpute:remoteOperations-failure",1);mc(a)})}).catch(function(c){lc.showErrorSection(a);t["default"].log("number-plate-input getRemoteOperationRequest failed for "+
a+" with "+c+".","ERROR","international-automotive");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-inpute:getRemoteOperationRequest-failure",1);mc(a)})}},Kf=function(a){a=a.currentTarget.dataset.componentId;D.getHTMLElement(W.getSearchButtonId(a)).classList.contains("a-button-disabled")||(Jf.performSearchButtonClickOperation(a),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-input:search-button-click",1))},Ld=function(a){var b=a?a.getElementsByClassName("a-button-input")[0]:
void 0;a.classList.remove("a-button-disabled");b&&(b.disabled=!1)},Kd=function(a){var b=a?a.getElementsByClassName("a-button-input")[0]:void 0;a.classList.add("a-button-disabled");b&&(b.disabled=!0)},Lf={initialize:function(a){G["default"].declarative("number-plate-input-change","keyup",function(c){if(0===a.localeCompare(c.data.componentId)){c=D.getNumberPlateTextInputValue(a);var d=D.getHTMLElement(W.getSearchButtonId(a));1<=c.length?Ld(d):Kd(d)}});G["default"].declarative("number-plate-result-select-action",
"change",function(c){0===a.localeCompare(c.data.componentId)&&(c={data:{id:a,inputSelections:D.getInputSelections(a),selections:D.getSelections(a)}},kc.emitEvent("number-plate-vehicle-select",c),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":number-plate-input:vehicle-selected",1))});var b=z["default"].setup().define;b(bb.numberPlateSearchButtonClickHandler,"click",Kf)}},mb={attach:function(a,b){kc.addEventHandlers(a,b)},getData:function(a){return{data:{id:a,inputSelections:D.getInputSelections(a),
selections:D.getSelections(a)}}},initialize:function(a){Lf.initialize(a)}},Md=function(a){a=a.data.id;a=a.substring(0,a.lastIndexOf("-additional-attribute-selection"));g.getElementsByClassName(a)[0].dataset.vehicleSelectionChanged="true"},Mf=function(a){a=a.data.id;a=a.substring(0,a.lastIndexOf("-vehicles-view"));g.getElementsByClassName(a+"-vehicle-by-attribute-row-header-select")[0].click()},nb=function(a,b){g.getElementsByClassName(""+a)[0].dataset.rowSelected=b},Nf={initialize:function(){var a=
z["default"].setup().define;a(w.handleHSNTSNRowSelect,"click",function(b){nb(b.currentTarget.dataset.viewId,"hsn-tsn");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":garage-vehicle-selection:hsn-tsn-row-selected",1)});a(w.handleNumberPlateRowSelect,"click",function(b){nb(b.currentTarget.dataset.viewId,"number-plate");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":garage-vehicle-selection:number-plate-row-selected",1)});a(w.handleVehiclesByAttributeRowSelect,"click",function(b){nb(b.currentTarget.dataset.viewId,
"vehicle-by-attribute");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":garage-vehicle-selection:vehicle-by-attribute-row-selected",1)});a(w.handleGarageVehicleRowSelect,"click",function(b){nb(b.currentTarget.dataset.viewId,"garage-vehicle");m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":garage-vehicle-selection:garage-vehicle-row-selected",1)});ca.attach("vehicle-add",Mf);ha.attach("garage-vehicle-change",Md)}},X={},E=function(a){var b=g.getElementsByClassName(a)[0].dataset.rowSelected;var c="hsn-tsn"===
b?xa.getData(a+"-hsn-tsn-input").data.automotiveHsnTsn:void 0;if("garage-vehicle"===b){if(ob(a)){var d=ha.getData(a+"-additional-attribute-selection");var e=d.data?d.data.currentSelectedVehicle:void 0}else d=ca.getData(a+"-vehicles-view"),e=d.data?d.data.selectedVehicle:void 0;d=e?e.identity:void 0}var f=g.getElementsByClassName(a)[0];f=JSON.parse(f.dataset.inputSelections);var h=g.getElementsByClassName(a)[0].dataset.rowSelected;switch(h){case "garage-vehicle":ob(a)?(h=ha.getData(a+"-additional-attribute-selection"),
h="true"===g.getElementsByClassName(a)[0].dataset.vehicleSelectionChanged?h.data.currentVehicleSelection:h.data?h.data.currentSelection:void 0):h=ca.getData(a+"-vehicles-view").data.currentSelections;break;case "hsn-tsn":h=xa.getData(a+"-hsn-tsn-input").data.inputSelection;break;case "number-plate":h=mb.getData(a+"-number-plate-input").data.selections;break;case "vehicle-by-attribute":h=H.getData(a+"-vehicle-attributes-selection").data.currentSelections;break;default:throw r.logAndReturnBadRequestError("Unable to find selected row: "+
h,"garage-vehicle-selection","getCurrentVehicleSelections");}return{data:{automotiveHsnTsn:c,garageId:d,garageVehicle:e,id:a,inputSelections:f,selections:h,vehicleSelectionType:Of(a,b)}}},Of=function(a,b){switch(b){case "garage-vehicle":if(b=ob(a))b=(b=g.getElementsByClassName(a+"-vehicle-view")[0])?"true"===b.dataset.isVehicleFullySelected:!1,b=!b;return b&&"true"!==g.getElementsByClassName(a)[0].dataset.vehicleSelectionChanged?"additional-attribute":"garage";case "hsn-tsn":return"hsn-tsn";case "number-plate":return"number-plate";
case "vehicle-by-attribute":return"attribute";default:throw r.logAndReturnBadRequestError("Unable to find selected row: "+b,"garage-vehicle-selection","getCurrentVehicleSelections");}},ob=function(a){return(a=g.getElementsByClassName(a+"-vehicle-view")[0])?"garage-vehicle-selection"!==a.dataset.vehiclesViewType:!1},Nd=function(a){return-1<a.data.id.indexOf("vehicle-attributes-selection")},Od=function(a){return-1<a.data.id.indexOf("additional-attribute-selection")},Pd=function(a,b,c){a=a.data.id;a=
a.substring(0,a.lastIndexOf("-hsn-tsn-input"));g.getElementsByClassName(a)[0].dataset.isAllSelectedHsnTsn=b?"false":"true";b=E(a);c(b)},pb=function(a,b,c){var d=xa.getData(a+"-hsn-tsn-input"),e="";d&&d.data&&(e=d.data.automotiveHsnTsn);7===e.length?"hsn-tsn-select"===b&&(a=E(a),c(a)):"hsn-tsn-reset"===b&&(a=E(a),c(a))},Qd=function(a,b,c){a=a.data.id;a=a.substring(0,a.lastIndexOf("-number-plate-input"));g.getElementsByClassName(a)[0].dataset.isAllSelectedNumberplate=b?"false":"true";b=E(a);c(b)},Rd=
function(a){return a.substring(0,a.lastIndexOf("-vehicle-attributes-selection"))},nc=function(a,b){a=a.currentTarget.dataset.viewId;var c=g.getElementsByClassName(a)[0];if(c&&c.dataset&&"true"===c.dataset.isAllSelectedAdditionalAttributeSelection){var d=E(a);b(d)}c&&c.dataset&&"true"===c.dataset.isVehiclesViewSelected&&(d=E(a),b(d));c&&c.dataset&&"true"===c.dataset.vehicleSelectionChanged&&"true"===c.dataset.doesNotContainAdditionalAttributeSelection&&(d=E(a),b(d))},ia={attach:function(a,b){var c=
z["default"].setup().define;switch(a){case "hsn-tsn-reset":Ka?(G["default"].declarative("hsn-tsn-input-handler","keyup",function(d){pb(d.data.viewId,a,b)}),c(w.handleHSNTSNRowSelect,"click",function(d){pb(d.currentTarget.dataset.viewId,a,b)})):(xa.attach("hsn-tsn-reset",function(d){Pd(d,!0,b)}),c(w.handleHSNTSNRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"!==e.dataset.isAllSelectedHsnTsn&&(d=E(d),b(d))}));break;case "hsn-tsn-select":Ka?
(G["default"].declarative("hsn-tsn-input-handler","keyup",function(d){pb(d.data.viewId,a,b)}),c(w.handleHSNTSNRowSelect,"click",function(d){pb(d.currentTarget.dataset.viewId,a,b)})):(xa.attach("hsn-tsn-vehicle-select",function(d){Pd(d,!1,b)}),c(w.handleHSNTSNRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"===e.dataset.isAllSelectedHsnTsn&&(d=E(d),b(d))}));break;case "number-plate-reset":mb.attach("number-plate-reset",function(d){Qd(d,
!0,b)});c(w.handleNumberPlateRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"!==e.dataset.isAllSelectedNumberplate&&(d=E(d),b(d))});break;case "number-plate-select":mb.attach("number-plate-vehicle-select",function(d){Qd(d,!1,b)});c(w.handleNumberPlateRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"===e.dataset.isAllSelectedNumberplate&&(d=E(d),b(d))});break;
case "garage-vehicle-select":ca.attach("vehicle-select",function(d){d=d.data.id;d=d.substring(0,d.lastIndexOf("-vehicles-view"));var e=E(d);g.getElementsByClassName(d)[0].dataset.isVehiclesViewSelected="true";b(e)});c(w.handleGarageVehicleRowSelect,"click",function(d){nc(d,b)});break;case "attribute-selection-reset":H.attach("attribute-reset",function(d){Nd(d)&&(d=Rd(d.data.id),g.getElementsByClassName(d)[0].dataset.isAllSelectedAttributeSelection="false",d=E(d),b(d))});c(w.handleVehiclesByAttributeRowSelect,
"click",function(d){d=d.currentTarget.dataset.viewId;"true"!==g.getElementsByClassName(d)[0].dataset.isAllSelectedAttributeSelection&&(d=E(d),b(d))});break;case "attribute-selection-select":H.attach("all-attributes-select",function(d){Nd(d)&&(d=Rd(d.data.id),g.getElementsByClassName(d)[0].dataset.isAllSelectedAttributeSelection="true",d=E(d),b(d))});c(w.handleVehiclesByAttributeRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;"true"===g.getElementsByClassName(d)[0].dataset.isAllSelectedAttributeSelection&&
(d=E(d),b(d))});break;case "garage-vehicle-reset":c(w.handleGarageVehicleRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"!==e.dataset.isVehiclesViewSelected&&(d=E(d),b(d))});break;case "additional-attribute-selection-reset":ha.attach("additional-attributes-reset",function(d){Od(d)&&(d=d.data.id,d=d.substring(0,d.lastIndexOf("-additional-attribute-selection")),g.getElementsByClassName(d)[0].dataset.isAllSelectedAdditionalAttributeSelection=
"false",d=E(d),b(d))});c(w.handleGarageVehicleRowSelect,"click",function(d){d=d.currentTarget.dataset.viewId;var e=g.getElementsByClassName(d)[0];e&&e.dataset&&"true"!==e.dataset.isVehiclesViewSelected&&"true"!==e.dataset.isAllSelectedAdditionalAttributeSelection&&"true"!==e.dataset.doesNotContainAdditionalAttributeSelection&&"true"!==e.dataset.vehicleSelectionChanged&&(d=E(d),b(d))});break;case "additional-attribute-selection-select":ha.attach("additional-attributes-select",function(d){Od(d)&&(d=
d.data.id,d=d.substring(0,d.lastIndexOf("-additional-attribute-selection")),g.getElementsByClassName(d)[0].dataset.isAllSelectedAdditionalAttributeSelection="true",d=E(d),b(d))});c(w.handleGarageVehicleRowSelect,"click",function(d){nc(d,b)});break;case "additional-attribute-selection-vehicle-select":ha.attach("garage-vehicle-change",function(d){Md(d);var e=d.data.id;d=e.substring(0,e.lastIndexOf("-additional-attribute-selection"));var f=g.getElementsByClassName(d)[0];e=g.getElementsByClassName(e+
"-additional-attribute-selection-holder")[0];!e||e.classList.contains("aok-hidden")?f.dataset.doesNotContainAdditionalAttributeSelection="true":f.dataset.doesNotContainAdditionalAttributeSelection="false";d=E(d);b(d)}),c(w.handleGarageVehicleRowSelect,"click",function(d){nc(d,b)})}},getData:E,initialize:function(a){if(!0!==X[a+"-vehicles-view"])try{ca.initialize(a+"-vehicles-view"),X[a+"-vehicles-view"]=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize vehicles-view for "+
a,"garage-vehicle-selection","initializeVehiclesViewClient",c);}if(!0!==X[a+"-number-plate-input"])try{mb.initialize(a+"-number-plate-input"),X[a+"-number-plate-input"]=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize number-plate-input for "+a,"garage-vehicle-selection","initializeNumberPlateClient",c);}if(!0!==X[a+"-hsn-tsn-input"])try{xa.initialize(a+"-hsn-tsn-input"),X[a+"-hsn-tsn-input"]=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize hsn-tsn-input for "+
a,"garage-vehicle-selection","initializeHsnTsnClient",c);}if(!0!==X[a+"-vehicle-attributes-selection"])try{H.initialize(a+"-vehicle-attributes-selection"),X[a+"-vehicle-attributes-selection"]=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize attributes-selection for "+a,"garage-vehicle-selection","initializeAttributesSelectionClient",c);}if(!0!==X[a+"-additional-attribute-selection"])try{var b=g.getElementsByClassName(a+"-vehicle-view")[0];b&&"additional-attribute-selection"===
b.dataset.vehiclesViewType&&(ha.initialize(a+"-additional-attribute-selection"),X[a+"-additional-attribute-selection"]=!0)}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize garage-additional-attribute-selection for "+a,"garage-vehicle-selection","initializeGarageAdditionalAttributeClient",c);}if(!0!==X.initializeBrowserOperation)try{Nf.initialize(),X.initializeBrowserOperation=!0}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialize browser operation for "+
a,"garage-vehicle-selection","initializeBrowserOperation",c);}},isAdditionalAttributeSelection:ob,reset:function(a){try{H.reset(a+"-vehicle-attributes-selection"),ha.reset(a+"-additional-attribute-selection"),X[a+"-vehicle-attributes-selection"]=!1,X[a+"-additional-attribute-selection"]=!1}catch(b){throw r.logAndReturnFailedDependencyError("Failed to reset attributes-selection for "+a,"garage-vehicle-selection","reset",b);}}},oc;(oc||(oc={})).seasonSelectEventHandler="seasonSelectEventHandler";var Pf=
{initialize:function(a){var b=z["default"].setup().define;b(oc.seasonSelectEventHandler,"change",function(c){if(0===(a+"-states").localeCompare(c.currentTarget.dataset.stateDivId)){c=c.currentTarget.dataset;var d=g.getElementsByClassName(c.stateDivId)[0].dataset;d[c.stateFlagName]=("false"===d[c.stateFlagName]).toString();var e=m.COMPONENT_METRIC_PREFIX+":season-select:"+c.stateFlagName+"-change";try{Jb.count(e,"true"===d[c.stateFlagName]?1:-1)}catch(f){t["default"].log("Failed to log "+e+" CSM metric",
"ERROR",e)}}})}},ya={getData:function(a){var b=g.getElementsByClassName(a+"-states")[0].dataset;var c="".concat("true"===b.summerSelected?"S":"");c=c.concat("true"===b.allSeasonSelected?"Y":"");c=c.concat("true"===b.winterSelected?"W":"");return{data:{id:a,season:c}}},initialize:function(a){try{var b=g.getElementsByClassName(a)[0]}catch(c){throw r.logAndReturnFailedDependencyError("Failed to initialized for input id [ "+a+" ].","season-select","initialize",c);}b&&void 0!==b.dataset?Pf.initialize(a):
r.logAndThrowBadRequestError("Failed to retrieve state DOMStringMap corresponding to input id "+a,"season-select","initialize")}},F={getBaseAttributesSelectionId:function(a){return a+"-base-attributes-selection"},getHelpInfoId:function(a){return a+"-help-info"},getOptionalAttributesSelectionContainerId:function(a){return a+"-optional-attributes-selection-container"},getOptionalAttributesSelectionId:function(a){return a+"-optional-attributes-selection"},getOriginalIdFromBaseAttributesSelectionId:function(a){return a.substring(0,
a.lastIndexOf("-base-attributes-selection"))},getSeasonSelectGroupId:function(a){return a+"-season-select-group"},getSeasonSelectId:function(a){return a+"-season-select"}},pc=[],Sd=[],Qf=function(a){try{H.initialize(a)}catch(b){throw r.logAndReturnFailedDependencyError("Failed on initialize for id [ "+a+" ].","tire-attributes-selection","initializeAttributesSelection",b);}},qb=function(a){a=g.getElementsByClassName(a)[0];return JSON.parse(a.dataset.inputSelections)},Rf=function(a){try{rb(a)&&ya.initialize(a)}catch(b){throw r.logAndReturnFailedDependencyError("Failed on initialize for id [ "+
a+" ].","tire-attributes-selection","initializeSeasonSelect",b);}},sb=function(a,b){b=Array.from(b);a.length&&b.push({id:"season",value:a});return b},Tf=function(a,b){var c=F.getOriginalIdFromBaseAttributesSelectionId(a.data.id),d="";rb(F.getSeasonSelectId(c))&&(d=ya.getData(F.getSeasonSelectId(c)).data.season);var e=a.data.currentSelections,f={data:{id:c,inputSelections:qb(c),selections:sb(d,e),allAttributesSelected:a.data.allAttributesSelected}};fa.performHtmlRemoteOperation(Sf(b,{id:c,selections:a.data.currentSelections})).then(function(h){var k=
g.getElementsByClassName(F.getOptionalAttributesSelectionContainerId(c))[0];k.firstChild&&(H.remove(F.getOptionalAttributesSelectionId(c)),k.firstChild.remove());h=ja.unscope(h);k.appendChild(h);H.initialize(F.getOptionalAttributesSelectionId(c));k.classList.remove("aok-hidden");qc(pc,f)}).catch(},qc=function(a,b){var c;try{for(var d=q.__values(a),e=d.next();!e.done;e=d.next()){var f=e.value;f(b)}}catch(k){var h={error:k}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(h)throw h.error;
}}},Sf=za={attach:function(a,b){switch(a){case "base-attributes-select":pc.push(b);break;case "attribute-reset":Sd.push(b)}},getData:function(a){var b,c="";rb(F.getSeasonSelectId(a))&&(c=ya.getData(F.getSeasonSelectId(a)).data.season);var d=H.getData(F.getBaseAttributesSelectionId(a)).data,e=H.getData(F.getOptionalAttributesSelectionId(a)).data,
f;d&&(f={id:d.id,inputSelections:qb(a),selections:sb(c,d.currentSelections),allAttributesSelected:d.allAttributesSelected});if(f&&e){f=e.currentSelections.slice(d.currentSelections.length);var h=Array.from(d.currentSelections);try{for(var k=q.__values(f),l=k.next();!l.done;l=k.next()){var n=l.value;n.value.length&&h.push(n)}}catch(u){var p={error:u}}finally{try{l&&!l.done&&(b=k.return)&&b.call(k)}finally{if(p)throw p.error;}}f={id:a,inputSelections:qb(a),selections:sb(c,h),allAttributesSelected:d.allAttributesSelected&&
e.allAttributesSelected}}return{data:f}},initialize:function(a){Qf(F.getBaseAttributesSelectionId(a));Rf(F.getSeasonSelectId(a));try{H.attach("all-attributes-select",function(b){if(b.data.id===F.getBaseAttributesSelectionId(a)){var c=L["default"].setup(["getTireOptionalAttributesSelectionView"]);Tf(b,c)}}),H.attach("attribute-reset",function(b){if(b.data.id===F.getBaseAttributesSelectionId(a)){var c=F.getOriginalIdFromBaseAttributesSelectionId(b.data.id),d="";rb(F.getSeasonSelectId(c))&&(d=ya.getData(F.getSeasonSelectId(c)).data.season);
var e=b.data.currentSelections;b={data:{id:c,inputSelections:qb(c),selections:sb(d,e),allAttributesSelected:b.data.allAttributesSelected}};d=g.getElementsByClassName(F.getOptionalAttributesSelectionContainerId(c))[0];d.classList.add("aok-hidden");d.firstChild&&d.firstChild.firstChild&&(H.remove(F.getOptionalAttributesSelectionId(c)),d.firstChild.remove());qc(Sd,b)}})}catch(b){throw r.logAndReturnFailedDependencyError("Failed on initialize for id [ "+a+" ].","tire-attributes-selection","initialize",
b);}},reset:function(a){try{H.reset(F.getBaseAttributesSelectionId(a));var b=g.getElementsByClassName(F.getOptionalAttributesSelectionContainerId(a))[0];b.firstChild&&b.firstChild.firstChild&&(H.remove(F.getOptionalAttributesSelectionId(a)),b.firstChild.remove())}catch(c){throw r.logAndReturnFailedDependencyError("Failed to reset attributes-selection for "+a,"tire-attributes-selection","reset",c);}}},rb=function(a){a=g.getElementsByClassName(a);return void 0!==a&&1===a.length?!0:!1},aa;((aa||(aa={}));var rc;(rc||(rc={})).tireSizeCalculateButtonClickHandler=
"tireSizeCalculateButtonClickHandler";var Td=function(a){return{circumference:25.4*a.circumference,diameter:25.4*a.diameter,rimSize:25.4*a.rimSize,sidewall:25.4*a.sidewall,tireSize:a.tireSize,width:25.4*a.width}},sc=function(a){return Number(La(a+"-tireSizeInput1"))},La=function(a){a=g.getElementsByClassName(a)[0];return a.hasChildNodes()?a.firstChild.value:a.value},Ud=function(a){var b=g.getElementsByClassName(a+"-mmButton")[0].classList.contains("a-button-selected");if(100>sc(a)){g.getElementsByClassName(a+
"-imperialMetricTireSizeSymbol")[0].innerText="x";var c=sc(a);var d=Number(La(a+"-tireSizeInput3"));var e=Number(La(a+"-tireSizeInput2"));c={circumference:Math.PI*c,diameter:c,rimSize:d,sidewall:(c-d)/2,tireSize:c+"x"+e+"R"+d,width:e};b&&(c=Td(c));b=c}else{g.getElementsByClassName(a+"-imperialMetricTireSizeSymbol")[0].innerText="/";c=Number(La(a+"-tireSizeInput2"));d=Number(La(a+"-tireSizeInput3"));e=sc(a);var f=c*e/2540,h=d+2*f;c={circumference:Math.PI*h,diameter:h,rimSize:d,sidewall:f,tireSize:e+
"/"+c+"R"+d,width:e/25.4};b&&(c=Td(c));b=c}c=b;if(void 0!==c){if(d=g.getElementsByClassName(a+"-diameter")[0])d.innerText=""+c.diameter.toFixed(1);if(d=g.getElementsByClassName(a+"-width")[0])d.innerText=""+c.width.toFixed(1);if(d=g.getElementsByClassName(a+"-circumference")[0])d.innerText=""+c.circumference.toFixed(1);if(d=g.getElementsByClassName(a+"-sidewall")[0])d.innerText=""+c.sidewall.toFixed(1);if(d=g.getElementsByClassName(a+"-tireSize")[0])d.innerText=""+c.tireSize}d=g.getElementsByClassName(a+
"-tireProfileSideImage")[0];c=g.getElementsByClassName(a+"-tireProfileSideInsideImage")[0];e=b.rimSize/b.diameter*d.width;c.style.height=e+"px";c.width=e;d=(d.width-c.width)/2;c.style.left=d+"px";c.style.top=d+"px";g.getElementsByClassName(a+"-tireImageWidth")[0].innerText=b.width.toFixed(1);g.getElementsByClassName(a+"-tireImageDiameterOrange")[0].innerText=b.diameter.toFixed(1)},Uf={initialize:function(a){Ud(a);var b=z["default"].setup().define;b(rc.tireSizeCalculateButtonClickHandler,"click",function(c){c.acknowledge();
c.currentTarget.dataset.componentId&&Ud(a)})}},Vf={initialize:function(a){Uf.initialize(a)}},tb;(function(a){a.tireSizeCompareButtonClickHandler="tireSizeCompareButtonClickHandler";a.tireMmButtonClickHandler="tireMmButtonClickHandler"})(tb||(tb={}));var Wf=[25,35,45,55,65,75],Xf=[30,50,70,90,110,130],Vd=function(a){return{circumference:25.4*a.circumference,diameter:25.4*a.diameter,rimSize:25.4*a.rimSize,sidewall:25.4*a.sidewall,tireSize:a.tireSize,width:25.4*a.width}},Wd=function(a,b){return[(b.diameter-
a.diameter)/a.diameter*100,(b.width-a.width)/a.width*100,(b.circumference-a.circumference)/a.circumference*100,(b.sidewall-a.sidewall)/a.sidewall*100]},Xd=function(a,b,c,d){c=d/c;for(d=1;7>d;d++){var e=b[d-1],f=e*c,h=f-e,k=g.getElementsByClassName(a+"-tireSpeedometerVal"+d)[0];k&&(k.innerText=String(e));if(e=g.getElementsByClassName(a+"-tireSpeedometerCalc"+d)[0])e.innerText=f.toFixed(2);if(f=g.getElementsByClassName(a+"-tireSpeedometerDiff"+d)[0])f.innerText=h.toFixed(2)}},$d=function(a,b,c,d){for(var e=
[b.diameter,b.width,b.circumference,b.sidewall],f=[c.diameter,c.width,c.circumference,c.sidewall],h=0;4>h;h++){var k=g.getElementsByClassName(a+"-size1"+h)[0];k&&(k.innerText=String(e[h].toFixed(1)));if(k=g.getElementsByClassName(a+"-size2"+h)[0])k.innerText=String(f[h].toFixed(1));if(k=g.getElementsByClassName(a+"-difference"+h)[0])k.innerText=d[h].toFixed(1)+"%"}if(d=g.getElementsByClassName(a+"-tireSizeComp")[0])d.innerText=""+b.tireSize;Yd(a,b);g.getElementsByClassName(a+"-tireImageWidthComp")[0].innerText=
b.width.toFixed(1);g.getElementsByClassName(a+"-tireImageDiameterBlue")[0].innerText=b.diameter.toFixed(1);if(b=g.getElementsByClassName(a+"-tireSizeComp2")[0])b.innerText=""+c.tireSize;Zd(a,c);g.getElementsByClassName(a+"-tireImageWidthComp2")[0].innerText=c.width.toFixed(1);g.getElementsByClassName(a+"-tireImageDiameterOrange")[0].innerText=c.diameter.toFixed(1)},Yd=function(a,b){var c=g.getElementsByClassName(a+"-tireProfileSideImageComp")[0];a=g.getElementsByClassName(a+"-tireProfileSideInsideImage")[0];
b=b.rimSize/b.diameter*c.width;a.style.height=b+"px";a.width=b;c=(c.width-a.width)/2;a.style.left=c+"px";a.style.top=c+"px"},Zd=function(a,b){var c=g.getElementsByClassName(a+"-tireProfileSideImageComp2")[0];a=g.getElementsByClassName(a+"-tireProfileSideInsideImageComp2")[0];b=b.rimSize/b.diameter*c.width;a.style.height=b+"px";a.width=b;c=(c.width-a.width)/2;a.style.left=c+"px";a.style.top=c+"px"},ae=function(a){var b=g.getElementsByClassName(a+"-tireProfileImageComp")[0];b.width=40;b.height=120;
b=g.getElementsByClassName(a+"-tireProfileImageComp2")[0];b.width=40;b.height=120;b=g.getElementsByClassName(a+"-tireProfileSideImageComp")[0];b.width=120;b.height=120;a=g.getElementsByClassName(a+"-tireProfileSideImageComp2")[0];a.width=120;a.height=120},be=function(a){var b=g.getElementsByClassName(a+"-tireProfileImageComp")[0];b.width=33;b.height=100;b=g.getElementsByClassName(a+"-tireProfileImageComp2")[0];b.width=33;b.height=100;b=g.getElementsByClassName(a+"-tireProfileSideImageComp")[0];b.width=
100;b.height=100;a=g.getElementsByClassName(a+"-tireProfileSideImageComp2")[0];a.width=100;a.height=100},ce=function(a,b,c){var d=c.diameter/b.diameter,e=c.width/b.width;if("mobile"===g.getElementsByClassName(a+"-data-block")[0].dataset.deviceType){be(a);var f=g.getElementsByClassName(a+"-tireProfileImageComp2")[0];f.height=100*d;var h=g.getElementsByClassName(a+"-tireProfileSideImageComp2")[0];h.width=100*d;h.height=100*d;var k=g.getElementsByClassName(a+"-tireProfileImageComp")[0],l=g.getElementsByClassName(a+
"-tireProfileSideImageComp")[0];115<Math.max(k.height,l.height,f.height,h.height)&&(be(a),k.width=33/e,k.height=100/d,l.width=100/d,l.height=100/d)}else ae(a),f=g.getElementsByClassName(a+"-tireProfileImageComp2")[0],f.height=120*d,h=g.getElementsByClassName(a+"-tireProfileSideImageComp2")[0],h.width=120*d,h.height=120*d,k=g.getElementsByClassName(a+"-tireProfileImageComp")[0],l=g.getElementsByClassName(a+"-tireProfileSideImageComp")[0],130<Math.max(k.height,l.height,f.height,h.height)&&(ae(a),k.width=
40/e,k.height=120/d,l.width=120/d,l.height=120/d);d=(g.getElementsByClassName(a+"-tireProfileImageComp")[0].height-35)/2;g.getElementsByClassName(a+"-tireImageDiameterBlue")[0].style.marginTop=d+"px";d=(g.getElementsByClassName(a+"-tireProfileImageComp2")[0].height-35)/2;g.getElementsByClassName(a+"-tireImageDiameterOrange")[0].style.marginTop=d+"px";Yd(a,b);Zd(a,c)},ub=function(a){a=document.getElementById(a+"-announce");a.style.fontSize="11px";a.style.lineHeight="20px";a.style.padding="1px 0px 0px 0px"},
ge=function(a){"mobile"===g.getElementsByClassName(a+"-data-block")[0].dataset.deviceType&&(ub(a+"-inchesButton"),ub(a+"-mmButton"),ub(a+"-mphButton"),ub(a+"-kmhButton"));var b=g.getElementsByClassName(a+"-inchesButton")[0],c=g.getElementsByClassName(a+"-mphButton")[0];if(b.classList.contains("a-button-selected")||c.classList.contains("a-button-selected")){b=g.getElementsByClassName(a+"-inchesButton")[0];c=g.getElementsByClassName(a+"-mmButton")[0];var d=g.getElementsByClassName(a+"-mphButton")[0],
e=g.getElementsByClassName(a+"-kmhButton")[0];if(b.classList.contains("a-button-selected")||d.classList.contains("a-button-selected"))b.classList.add("a-button-selected"),d.classList.add("a-button-selected"),e.classList.remove("a-button-selected"),c.classList.remove("a-button-selected");b=vb(de(a),!1);c=vb(ee(a),!1);d=Wd(b,c);$d(a,b,c,d);Xd(a,Wf,b.circumference,c.circumference);ce(a,b,c)}else fe(a)},vb=function(a,b){if(100>a.textInput1){var c=a.textInput1;a={circumference:Math.PI*c,diameter:c,rimSize:a.textInput3,
sidewall:(a.textInput1-a.textInput3)/2,tireSize:a.textInput1+"x"+a.textInput2+"R"+a.textInput3,width:a.textInput2};b&&(a=Vd(a));b=a}else{c=a.textInput2*a.textInput1/2540;var d=a.textInput3+2*c;a={circumference:Math.PI*d,diameter:d,rimSize:a.textInput3,sidewall:c,tireSize:a.textInput1+"/"+a.textInput2+"R"+a.textInput3,width:a.textInput1/25.4};b&&(a=Vd(a));b=a}return b},fe=function(a){var b=g.getElementsByClassName(a+"-inchesButton")[0],c=g.getElementsByClassName(a+"-mmButton")[0],d=g.getElementsByClassName(a+
"-mphButton")[0],e=g.getElementsByClassName(a+"-kmhButton")[0];if(c.classList.contains("a-button-selected")||e.classList.contains("a-button-selected"))c.classList.add("a-button-selected"),e.classList.add("a-button-selected"),b.classList.remove("a-button-selected"),d.classList.remove("a-button-selected");b=vb(de(a),!0);c=vb(ee(a),!0);d=Wd(b,c);$d(a,b,c,d);Xd(a,Xf,b.circumference,c.circumference);ce(a,b,c)},Aa=function(a){a=g.getElementsByClassName(a)[0];return a.hasChildNodes()?a.firstChild.value:
a.value},de=function(a){return{id:a,textInput1:Number(Aa(a+"-tireSizeInput1")),textInput2:Number(Aa(a+"-tireSizeInput2")),textInput3:Number(Aa(a+"-tireSizeInput3"))}},ee=function(a){return{id:a,textInput1:Number(Aa(a+"-tireSizeInput4")),textInput2:Number(Aa(a+"-tireSizeInput5")),textInput3:Number(Aa(a+"-tireSizeInput6"))}},Yf={initialize:function(a){ge(a);var b=z["default"].setup().define;b(tb.tireSizeCompareButtonClickHandler,"click",function(c){c.currentTarget.dataset.componentId&&ge(a)});b(tb.tireMmButtonClickHandler,
"click",}},Zf={initialize:function(a){Yf.initialize(a)}},wb;(function(a){a.tireCalculatorButtonClickHandler="tireCalculatorButtonClickHandler";a.tireComparisonButtonClickHandler="tireComparisonButtonClickHandler"})(wb||(wb={}));var $f={initialize:function(a){var b=z["default"].setup().define;b(wb.tireCalculatorButtonClickHandler,"click",function(c){c.acknowledge();c=g.getElementsByClassName(a+"-tire-calculator")[0];var d=g.getElementsByClassName(a+
"-tire-comparison")[0];c.classList.remove("aok-offscreen");d.classList.add("aok-offscreen")});b(wb.tireComparisonButtonClickHandler,"click",function(c){c.acknowledge();c=g.getElementsByClassName(a+"-tire-calculator")[0];var d=g.getElementsByClassName(a+"-tire-comparison")[0];c.classList.add("aok-offscreen");d.classList.remove("aok-offscreen")})}},ag={initialize:function(a){try{$f.initialize(a),Vf.initialize(a+"-tire-calculator"),Zf.initialize(a+"-tire-comparison")}catch(b){throw r.logAndReturnFailedDependencyError("Failed to initialize for "+
a,"tire-tools-selection","initialize",b);}}},xb=function(a){return a+"-season-select"},yb;(function(a){a.tireSizeSelection="tireSizeSelection";a.tireSizeSelectionInternal="tireSizeSelectionInternal"})(yb||(yb={}));var he=function(a){a=a.currentTarget.dataset;var b=g.getElementsByClassName(a.stateDivId)[0].dataset,c=JSON.parse(b.selections);c.push({id:b.tireSizeAttributeId,value:a.tireSize});b.currentSelections=JSON.stringify(c);m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":tires-by-vehicle:selected-size",
1)},bg={initialize:function(a){var b=z["default"].setup().define;b(yb.tireSizeSelectionInternal,"change",function(c){0===(a+"-states").localeCompare(c.currentTarget.dataset.stateDivId)&&he(c)})}},je=function(a){var b=g.getElementsByClassName(a+"-states")[0].dataset;if(ie(xb(a)))var c=ya.getData(xb(a)).data.season;a=JSON.parse(b.currentSelections);a:{b=b.tireSizeAttributeId;var d;try{for(var e=q.__values(a),f=e.next();!f.done;f=e.next()){var h=f.value;if(h.id===b){var k={id:b,value:h.value};break a}}}catch(n){var l=
{error:n}}finally{try{f&&!f.done&&(d=e.return)&&d.call(e)}finally{if(l)throw l.error;}}k=void 0}return{seasonSelection:c,tireSize:k,tireSizeSelection:a}},zb={attach:function(a,b){"tire-select"===a&&(a=z["default"].setup().define,a(yb.tireSizeSelection,"change",function(c){he(c);b({data:{garageVehicle:c.currentTarget.dataset.garageVehicle,id:c.currentTarget.dataset.viewId,tiresByVehicleSelections:je(c.currentTarget.dataset.viewId)}})}))},getData:function(a){var b=g.getElementsByClassName(a+"-states")[0].dataset;
return{data:{garageVehicle:JSON.parse(b.garageVehicle),id:a,tiresByVehicleSelections:je(a)}}},initialize:function(a){var b=g.getElementsByClassName(a);void 0!==b&&1===b.length||r.logAndThrowBadRequestError("Undefined Component/Multiple Components","initialize","tires-by-vehicle");try{ie(xb(a))&&ya.initialize(xb(a))}catch(c){throw r.logAndReturnFailedDependencyError("Failed on initialization for "+a,"tires-by-vehicle","initialize",c);}bg.initialize(a)}},ie=function(a){a=g.getElementsByClassName(a);
return void 0!==a&&1===a.length?!0:!1},Ma;(function(a){a.Filter="Filter";a.Next="Next"})(Ma||(Ma={}));var cg={getEncryptedId:function(a,b,c){return q.__awaiter(void 0,void 0,void 0,function(){var d,e,f,h;return q.__generator(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,Da["default"].post("/automotive-components/vehicle-identifier?sif_profile=AutomotiveUIComponentsVehicleIdentifierSIFProfile",{accepts:"*/*",contentType:"application/json"},(h={},h.automotiveVehicleIdentifier=
a,h))];case 1:d=k.sent();e=d.responseBody;if(!e)throw Error("Encrypted value of HsnTsn can not be undefined");return[2,e.automotiveVehicleIdentifier];case 2:throw f=k.sent(),r.logAndThrowFailedDependencyError("Ajax Request Failed for hsn tsn encryption",c,b,f);case 3:return[2]}})})}},R={},Ab=function(a){var b=g.getElementsByClassName(a+"-filter-button-enabled")[0];a=g.getElementsByClassName(a+"-filter-button-disabled")[0];b.classList.remove("aok-hidden");a.classList.add("aok-hidden")},Na=function(a){var b=
g.getElementsByClassName(a+"-filter-button-enabled")[0];a=g.getElementsByClassName(a+"-filter-button-disabled")[0];b.classList.add("aok-hidden");a.classList.remove("aok-hidden")},Bb=function(a){var b=g.getElementsByClassName(a+"-update-size-button-enabled")[0];a=g.getElementsByClassName(a+"-update-size-button-disabled")[0];b&&a&&(b.classList.add("aok-hidden"),a.classList.remove("aok-hidden"))},ke=function(a){var b=g.getElementsByClassName(a+"-update-size-button-enabled")[0];a=g.getElementsByClassName(a+
"-update-size-button-disabled")[0];b&&a&&(b.classList.add("aok-hidden"),a.classList.add("aok-hidden"))},le=function(a,b){a=g.getElementsByClassName(""+a)[0];a.parentElement?a.parentElement.innerHTML=b.innerHTML:a.innerHTML=b.innerHTML},dg=function(a,b,c){"hsn-tsn"===b.data.vehicleSelectionType&&cg.getEncryptedId(b.data.automotiveHsnTsn,"resolveHsnTsn","tire-finder-garage-entity").then(function(d){c(a,{data:{automotiveHsnTsn:d,garageId:b.data.garageId,garageVehicle:b.data.garageVehicle,id:b.data.id,
inputSelections:b.data.inputSelections,selections:b.data.selections,vehicleSelectionType:b.data.vehicleSelectionType}})}).catch(function(d){throw r.logAndReturnFailedDependencyError("tire-finder-garage-entity-selection failed to getEncryptedData for "+a,"tire-finder-garage-entity-selection","resolveHsnTsn",d);})},Qa=function(a,b){var c=L["default"].setup().getViewOnGarageEntitySelect,d={asin:Cb(a),automotiveHsnTsn:b.data.automotiveHsnTsn,currentSelections:b.data.selections,garageVehicle:b.data.garageVehicle,
id:a,isSeasonSelectRequired:"true"===Db(a),requiredSelection:["tireSize"],selections:b.data.inputSelections,tireFinderGarageEntitySelectionType:{"additional-attribute":"VehicleAdditionalAttribute",attribute:"VehicleAttribute",garage:"GarageVehicle","hsn-tsn":"HsnTsn","number-plate":"NumberPlate"}[b.data.vehicleSelectionType],vehicleByIdentifierFlow:Eb(a),vehicleId:b.data.garageId||""};c={componentName:"tire-finder-garage-entity-selection",methodName:"getNextViewFromSelection",remoteOperation:c,request:d};
tc(a);fa.performHtmlRemoteOperation(c).then(function(e){var f=e.dataset.viewType;if("invalid-hsn-tsn"===f)Oa(a,!1),Pa(a,!0);else{if("empty-tire-size-selection"===f)e=g.getElementsByClassName(a+"-tire-size-selection")[0],f=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}),e.dispatchEvent(f);else{if("tire-size-selection"===f){f=g.getElementsByClassName(a+"-selection-container")[0];var h=g.getElementsByClassName(a+"-tire-selection-container")[0];f.classList.add("aok-hidden");h.innerHTML=
e.innerHTML;e=g.getElementsByClassName(a)[0];zb.initialize(a+"-tires-by-vehicle");e.dataset.currentView="tires-by-vehicle";ke(a)}else f=ia.isAdditionalAttributeSelection(b.data.id),g.getElementsByClassName(a+"-by-vehicle")[0].innerHTML=e.innerHTML,e=ia.isAdditionalAttributeSelection(b.data.id),!f&&e&&(ha.initialize(a+"-vehicle-selection-additional-attribute-selection"),me(a)),Bb(a);Na(a)}uc(a)&&vc(a)&&"tires-by-vehicle"===g.getElementsByClassName(a)[0].dataset.currentView&&wc(a,Ma.Filter);e=g.getElementsByClassName(a)[0].dataset.currentView;
f=g.getElementsByClassName(a+"-back-to-vehicle-selection")[0];"tires-by-vehicle"===e?f.classList.remove("aok-hidden"):f.classList.add("aok-hidden");Pa(a,!0);Oa(a,!0)}Ba(a)}).catch(function(){Pa(a,!1);Oa(a,!0);Ba(a)})},wc=function(a,b){var c=a+"-enableFilterButton",d=a+"-disableFilterButton";var e,f;a=g.getElementsByClassName(a)[0];b="Next"===b?null===(e=null===a||void 0===a?void 0:a.dataset)||void 0===e?void 0:e.nextButtonText:null===(f=null===a||void 0===a?void 0:a.dataset)||void 0===f?void 0:f.filterButtonText;
Ec["default"]("#"+c).text(b);Ec["default"]("#"+d).text(b)},Cb=function(a){return g.getElementsByClassName(a)[0].dataset.asin},Db=function(a){return g.getElementsByClassName(a)[0].dataset.seasonSelectRequired},ne=function(a){var b;a=g.getElementsByClassName(a)[0];return"true"===(null===(b=null===a||void 0===a?void 0:a.dataset)||void 0===b?void 0:b.isSaveTires)},vc=function(a){var b;a=g.getElementsByClassName(a)[0];return"true"===(null===(b=null===a||void 0===a?void 0:a.dataset)||void 0===b?void 0:
b.isNextButtonExperimentWeblabEnabled)},oe=function(a){var b;a=g.getElementsByClassName(a+"-vehicle-selection-hsn-tsn-input-hsntsn-match")[0];return"true"===(null===(b=null===a||void 0===a?void 0:a.dataset)||void 0===b?void 0:b.isSearchButtonWeblabEnabled)},uc=function(a){var b;a=g.getElementsByClassName(a)[0];return"true"===(null===(b=null===a||void 0===a?void 0:a.dataset)||void 0===b?void 0:b.isNextButtonGatingWeblabEnabled)},Eb=function(a){a=g.getElementsByClassName(a)[0];if(a.dataset.vehicleByIdentifierFlow&&
"tire-by-vehicle-by-identifier"===a.dataset.vehicleByIdentifierFlow)return"tire-by-vehicle-by-identifier"},Pa=function(a,b){a=g.getElementsByClassName(a+"-error-box")[0];b?a.classList.add("aok-hidden"):a.classList.remove("aok-hidden")},Oa=function(a,b){a=g.getElementsByClassName(a+"-hsn-tsn-error-box")[0];b?a.classList.add("aok-hidden"):a.classList.remove("aok-hidden")},me=function(a){K(Ra,a,"additional-attribute-selection-reset");K(Sa,a,"additional-attribute-selection-select");K(xc,a,"additional-attribute-selection-select");
K(eg,a,"additional-attribute-selection-vehicle-select");K(xc,a,"additional-attribute-selection-vehicle-select")},Sa=function(a,b){a.data.id===b+"-vehicle-selection"&&(a=Ta(a),Ab(a),Ua(a+"-by-vehicle","true"))},xc=function(a,b){var c,d,e;a.data.id===b+"-vehicle-selection"&&(b=Ta(a),(null===(e=null===(d=null===(c=a.data)||void 0===c?void 0:c.garageVehicle)||void 0===d?void 0:d.tires)||void 0===e?0:e.length)?(a=g.getElementsByClassName(b+"-update-size-button-enabled")[0],c=g.getElementsByClassName(b+
"-update-size-button-disabled")[0],a&&c&&(a.classList.remove("aok-hidden"),c.classList.add("aok-hidden"))):Bb(b))},Fb=function(a,b){a.data.id===b+"-vehicle-selection"&&(a=Ta(a),Bb(a))},Ra=function(a,b){a.data.id===b+"-vehicle-selection"&&(a=Ta(a),Na(a),Ua(a+"-by-vehicle","false"))},Ua=function(a,b){g.getElementsByClassName(a)[0].dataset.filterButtonEnabled=b},Ta=function(a){a=a.data.id;return a.substring(0,a.lastIndexOf("-vehicle-selection"))},eg=function(a,b){a.data.id===b+"-vehicle-selection"&&
pe(a,b)},pe=function(a,b){a.data.id===b+"-vehicle-selection"&&(b=Ta(a),void 0!==a.data.selections&&Sa(a,b))},fg=function(a){a=qe(a);Na(a);Ua(a+"-by-tire-size","false")},gg=function(a){a=qe(a);Ab(a);Ua(a+"-by-tire-size","true")},qe=function(a){a=a.data.id;return a.substring(0,a.lastIndexOf("-tire-attribute-selection"))},K=function(a,b,c){ia.attach(c,function(d){a(d,b)})},re=function(a,b,c){za.attach(c,function(d){a(d,b)})},yc=function(a){try{ia.reset(a+"-vehicle-selection"),za.reset(a+"-tire-attribute-selection"),
R[a+"-garageVehicleSelectionClientAttributeSelectionAttach"]=!1,R[a+"-garageVehicleSelectionClientAdditionalAttributesAttach"]=!1,R[a+"-tireAttributeSelectionClientDefaultAttach"]=!1}catch(b){throw r.logAndReturnFailedDependencyError("tire-finder-garage-entity-selection failed to reset for "+a,"tire-finder-garage-entity-selection","reset",b);}},tc=function(a){var b=g.getElementsByClassName(a+"-spinner-container")[0];b.classList.remove("aok-hidden");b.firstChild.classList.remove("aok-hidden");Na(a);
b=(a=g.getElementsByClassName(a+"-back-to-vehicle-selection")[0])?a.getElementsByClassName("a-button-input")[0]:void 0;a.classList.add("a-button-disabled");b&&(b.disabled=!0)},Ba=function(a){var b=g.getElementsByClassName(a+"-spinner-container")[0];b.classList.add("aok-hidden");b.firstChild.classList.add("aok-hidden");b=(a=g.getElementsByClassName(a+"-back-to-vehicle-selection")[0])?a.getElementsByClassName("a-button-input")[0]:void 0;a.classList.remove("a-button-disabled");b&&(b.disabled=!1)},Gb=
function(a){return!g.getElementsByClassName(a+"-by-tire-size")[0].classList.contains("aok-hidden")},hg=function(a){a=a.currentTarget.dataset.viewId;var b=g.getElementsByClassName(a+"-by-vehicle")[0],c=g.getElementsByClassName(a+"-by-tire-size")[0],d=g.getElementsByClassName(a+"-tire-tools")[0],e=g.getElementsByClassName(a+"-tire-selection-footer")[0],f=g.getElementsByClassName(a+"-back-tire-tools")[0];c.classList.add("aok-hidden");b.classList.remove("aok-hidden");void 0!==f&&(f.dataset.currentView=
a+"-vehicle-selection");void 0!==d&&d.classList.add("aok-hidden");e.classList.remove("aok-hidden");Bb(a);uc(a)&&vc(a)&&wc(a,Ma.Next);zc(a,a+"-by-vehicle")},zc=function(a,b){"true"===g.getElementsByClassName(b)[0].dataset.filterButtonEnabled?Ab(a):Na(a)},ig=function(a){var b=a.currentTarget.dataset.viewId,c=g.getElementsByClassName(b+"-by-vehicle")[0],d=g.getElementsByClassName(b+"-by-tire-size")[0],e=g.getElementsByClassName(b+"-tire-tools")[0],f=g.getElementsByClassName(b+"-empty-tire-size-message")[0],
h=g.getElementsByClassName(b+"-tire-selection-footer")[0],k=g.getElementsByClassName(b+"-back-tire-tools")[0];d.classList.remove("aok-hidden");!0===a.event.isTrusted?f.classList.add("aok-hidden"):f.classList.remove("aok-hidden");c.classList.add("aok-hidden");void 0!==k&&(k.dataset.currentView=b+"-tire-size-selection");void 0!==e&&e.classList.add("aok-hidden");h.classList.remove("aok-hidden");ke(b);uc(b)&&vc(b)&&wc(b,Ma.Filter);zc(b,b+"-by-tire-size")},jg=function(a){var b=a.currentTarget.dataset.viewId;
a=g.getElementsByClassName(b+"-by-vehicle")[0];var c=g.getElementsByClassName(b+"-by-tire-size")[0],d=g.getElementsByClassName(b+"-tire-tools")[0],e=g.getElementsByClassName(b+"-tire-selection-footer")[0],f=g.getElementsByClassName(b+"-selection-container-header")[0];b=g.getElementsByClassName(b+"-back-tire-tools")[0];c.classList.add("aok-hidden");a.classList.add("aok-hidden");e.classList.add("aok-hidden");f.classList.add("aok-hidden");d.classList.remove("aok-hidden");void 0!==b&&b.classList.remove("aok-hidden")},
kg=function(a){var b,c;a=a.currentTarget.dataset.viewId;var d=g.getElementsByClassName(a)[0].dataset.currentView,e=ia.getData(a+"-vehicle-selection"),f=null===(c=null===(b=e.data)||void 0===b?void 0:b.garageVehicle)||void 0===c?void 0:c.tires;"tires-by-vehicle"===d||Gb(a)||void 0!==f&&0<f.length&&ne(a)||void 0!==e.data.selections&&(e.data&&"hsn-tsn"!==e.data.vehicleSelectionType?Qa(a,e):e.data&&oe(a)?dg(a,e,Qa):e.data&&Qa(a,e))},lg=function(a){a=a.currentTarget.dataset.viewId;if("tires-by-vehicle"!==
g.getElementsByClassName(a)[0].dataset.currentView){var b=ia.getData(a+"-vehicle-selection");void 0!==b.data.selections&&(b.data&&"hsn-tsn"!==b.data.vehicleSelectionType?Qa(a,b):oe(a)||b.data&&Qa(a,b))}},mg={initialize:function(a){a=z["default"].setup().define;a(aa.tireFinderGarageEntitySelectionManageYourGarageLinkClick,"click",function(b){m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":"+b.currentTarget.dataset.metric,1)});a(aa.handleByVehicleClick,"click",hg);a(aa.handleByTireClick,"click",ig);a(aa.handleFilterButtonClick,
"click",kg);a(aa.handleUpdateSizeButtonClick,"click",lg);a(aa.handleTireToolsClick,"click",jg)}},Ac=function(a){try{ia.initialize(a+"-vehicle-selection")}catch(d){throw r.logAndReturnFailedDependencyError("Failed to initialize for "+a,"tire-finder-garage-entity-selection","initialize",d);}try{za.initialize(a+"-tire-attribute-selection")}catch(d){throw r.logAndReturnFailedDependencyError("tire-finder-garage-entity-selection failed to initialize for "+a,"tire-finder-garage-entity-selection","initialize",
d);}if("true"===g.getElementsByClassName(a)[0].dataset.tireToolsRequired)try{ag.initialize(a+"-tire-tools")}catch(d){throw r.logAndReturnFailedDependencyError("Failed to initialize for "+a,"tire-finder-garage-entity-selection","initialize",d);}if(!0!==R.initializeBrowserOperation){var b=z["default"].setup().define;b(aa.handleBackButtonClick,"click",ng);b(aa.handleBackButtonFromTireToolsClick,"click",og);try{mg.initialize(a),R.initializeBrowserOperation=!0}catch(d){throw r.logAndReturnFailedDependencyError("Failed to initialize for "+
a,"tire-finder-garage-entity-selection","initialize",d);}}a:{b=a+"-garageVehicleSelectionClientDefaultAttach";!0!==R[b]&&(K(Ra,a,"hsn-tsn-reset"),K(Ra,a,"number-plate-reset"),K(Ra,a,"garage-vehicle-reset"),K(Sa,a,"hsn-tsn-select"),K(Sa,a,"number-plate-select"),K(pe,a,"garage-vehicle-select"),K(xc,a,"garage-vehicle-select"),K(Fb,a,"garage-vehicle-reset"),K(Fb,a,"hsn-tsn-reset"),K(Fb,a,"number-plate-reset"),R[b]=!0);b=a+"-garageVehicleSelectionClientAttributeSelectionAttach";!0!==R[b]&&(K(Ra,a,"attribute-selection-reset"),
K(Sa,a,"attribute-selection-select"),K(Fb,a,"attribute-selection-reset"),R[b]=!0);if(ia.isAdditionalAttributeSelection(a+"-vehicle-selection")){b=a+"-garageVehicleSelectionClientAdditionalAttributesAttach";if(!0===R[b])break a;me(a);R[b]=!0}b=a+"-tireAttributeSelectionClientDefaultAttach";!0!==R[b]&&(re(fg,a,"attribute-reset"),re(gg,a,"base-attributes-select"),R[b]=!0);pg()}var c;if(null===(c=za.getData(a+"-tire-attribute-selection").data)||void 0===c?0:c.allAttributesSelected)Ua(a+"-by-tire-size",
"true"),Gb(a)&&zc(a,a+"-by-tire-size"),m.logScopedCount(m.COMPONENT_METRIC_PREFIX+":tire-finder-garage-entity-selection:pre-populated-tire-by-size",1)},ng=function(a){var b=a.currentTarget.dataset.viewId,c=g.getElementsByClassName(b)[0],d=c.dataset.currentView;a=L["default"].setup();"tires-by-vehicle"===d&&(c={asin:c.dataset.asin,attributesSelectionFlow:"tire-by-vehicle-by-attributes",currentTireSelections:[],currentVehicleSelections:[],filterButtonText:c.dataset.filterButtonText,garageRefTag:c.dataset.garageRef,
garageVehicleSelectionType:c.dataset.garageVehicleSelectionType,id:b,isSeasonSelectRequired:"true"===Db(b),nextButtonText:c.dataset.nextButtonText,requiredSelection:["tireSize"],vehicleByIdentifierFlow:Eb(b)},tc(b),a.getViewForGarageEntitySelect(c).then(function(e){le(b,e);yc(b);Ac(b);Ba(b)}).catch(function(){Pa(b,!1);Oa(b,!0);Ba(b)}))},og=function(a){var b=a.currentTarget.dataset.viewId,c=g.getElementsByClassName(b)[0],d=L["default"].setup();a=a.currentTarget.dataset.currentView===b+"-tire-size-selection"?
{asin:c.dataset.asin,attributesSelectionFlow:"tire-by-vehicle-by-attributes",currentTireSelections:[],currentVehicleSelections:[],filterButtonText:c.dataset.filterButtonText,garageRefTag:c.dataset.garageRef,garageVehicleSelectionType:c.dataset.garageVehicleSelectionType,id:b,isSeasonSelectRequired:"true"===Db(b),nextButtonText:c.dataset.nextButtonText,requiredSelection:["tireSize"],tireFinderGarageEntitySelectionType:"tire-attribute-selection",vehicleByIdentifierFlow:Eb(b)}:{asin:c.dataset.asin,attributesSelectionFlow:"tire-by-vehicle-by-attributes",
currentTireSelections:[],currentVehicleSelections:[],filterButtonText:c.dataset.filterButtonText,garageRefTag:c.dataset.garageRef,garageVehicleSelectionType:c.dataset.garageVehicleSelectionType,id:b,isSeasonSelectRequired:"true"===Db(b),nextButtonText:c.dataset.nextButtonText,requiredSelection:["tireSize"],tireFinderGarageEntitySelectionType:"vehicle-tire-attribute-selection",vehicleByIdentifierFlow:Eb(b)};tc(b);d.getViewForGarageEntitySelect(a).then(function(e){le(b,e);yc(b);Ac(b);Ba(b)}).catch(function(){Pa(b,
!1);Oa(b,!0);Ba(b)})},pg=function(){!0!==R.tiresByVehicleClientAttach&&(zb.attach("tire-select",function(a){a=a.data.id;a=a.substring(0,a.lastIndexOf("-tires-by-vehicle"));Ab(a)}),R.tiresByVehicleClientAttach=!0)},qg=function(a,b){var c,d,e,f,h,k,l,n,p=null===(d=null===(c=b.data)||void 0===c?void 0:c.garageVehicle)||void 0===d?void 0:d.tires;void 0!==p&&(c=null===(e=p[0].selectedDisplayAttribute.find()||void 0===e?void 0:e.value,void 0!==c&&(null===(h=null===(f=
b.data)||void 0===f?void 0:f.selections)||void 0===h?void 0:h.push({id:"tireSize",value:c})));return{data:{asin:Cb(a),selections:null===(k=b.data)||void 0===k?void 0:k.selections,garageId:null===(l=b.data)||void 0===l?void 0:l.garageId,garageVehicle:null===(n=b.data)||void 0===n?void 0:n.garageVehicle,id:a,tirefinderGarageEntitySelectionType:"ByVehicleTireAttribute"}}},se=function(a,b){var c=Cb(a);var d=g.getElementsByClassName(a)[0];d=JSON.parse(d.dataset.inputTireSelections);return{data:{asin:c,
id:a,inputTireSelections:d,selections:b.data.selections,tirefinderGarageEntitySelectionType:"ByTireAttributes"}}},te=function(a,b){if(b.data.tiresByVehicleSelections.seasonSelection){var c=b.data.tiresByVehicleSelections.seasonSelection;var d=Array.from(b.data.tiresByVehicleSelections.tireSizeSelection);c&&d.push({id:"season",value:c});c=d}else c=b.data.tiresByVehicleSelections.tireSizeSelection;d=Cb(a);var e=b.data.garageVehicle?b.data.garageVehicle.identity:void 0,f=b.data.garageVehicle;var h=g.getElementsByClassName(a)[0];
h=JSON.parse(h.dataset.inputVehicleSelections);return{data:{asin:d,garageId:e,garageVehicle:f,id:a,inputVehicleSelections:h,selections:c,tireSize:b.data.tiresByVehicleSelections.tireSize,tirefinderGarageEntitySelectionType:"ByVehicleTireAttribute"}}},rg={attach:function(a,b){var c=z["default"].setup().define;switch(a){case "tire-selected":c(aa.handleFilterButtonClick,"click",function(d){var e;d=d.currentTarget.dataset.viewId;var f=g.getElementsByClassName(d)[0].dataset.currentView;if("tires-by-vehicle"===
f){var h=zb.getData(d+"-tires-by-vehicle");d=te(d,h);b(d)}else if(Gb(d))h=za.getData(d+"-tire-attribute-selection"),d=se(d,h),b(d);else if("vehicle-or-tire-size-selection"===f){f=ia.getData(d+"-vehicle-selection");var k=null===(e=null===(h=f.data)||void 0===h?void 0:h.garageVehicle)||void 0===e?void 0:e.tires;void 0!==k&&0<k.length&&ne(d)&&(d=qg(d,f),b(d))}})}},getData:function(a){if(Gb(a)){var b=za.getData(a+"-tire-attribute-selection");return se(a,b)}b=zb.getData(a+"-tires-by-vehicle");return te(a,
b)},initialize:Ac,reset:yc},da;(function(a){a.PF_DESKTOP_BROWSE_FIND_PARTS="auto_pf_bp_s_d";a.PF_DESKTOP_BROWSE_PU="auto_pf_bp_pu_d";a.PF_DESKTOP_BROWSE_GO="auto_pf_bp_s_otr_ftr_d";a.PF_DESKTOP_BROWSE_GO_BY_VEHICLE_FLOW="auto_pf_bp_s_vh_ftr_d";a.PF_DESKTOP_BROWSE_GO_BY_NUMBER_PLATE="auto_pf_bp_s_npl_ftr_d";a.PF_MOBILE_BROWSE_FIND_PARTS="auto_pf_bp_s_m";a.PF_MOBILE_BROWSE_PU="auto_pf_bp_pu_m";a.PF_MOBILE_BROWSE_GO="auto_pf_bp_s_otr_ftr_m";a.PF_MOBILE_BROWSE_GO_BY_VEHICLE_FLOW="auto_pf_bp_s_vh_ftr_m";
a.PF_MOBILE_BROWSE_GO_BY_NUMBER_PLATE="auto_pf_bp_s_npl_ftr_m";a.TF_DESKTOP_BROWSE_PU="auto_tf_bp_pu_d";a.TF_MOBILE_BROWSE_PU="auto_tf_bp_pu_m";a.TF_DESKTOP_BROWSE_GO="auto_tf_bp_s_ftr_d";a.TF_MOBILE_BROWSE_GO="auto_tf_bp_s_ftr_m";a.TF_DESKTOP_BROWSE_GO_BY_TIRE_FILTER="auto_tf_bp_s_bta_ftr_d";a.TF_DESKTOP_BROWSE_GO_BY_VEHICLE_FILTER="auto_tf_bp_s_bvta_ftr_d";a.TF_MOBILE_BROWSE_GO_BY_TIRE_FILTER="auto_tf_bp_s_bta_ftr_m";a.TF_MOBILE_BROWSE_GO_BY_VEHICLE_FILTER="auto_tf_bp_s_bvta_ftr_m";a.TF_DESKTOP_BROWSE_GARAGE=
"auto_tf_bp_gg_d";a.TF_MOBILE_BROWSE_GARAGE="auto_tf_bp_gg_m"})(da||(da={}));var ue=function(a){var b,c=pa["default"].cardRoot.getElementsByClassName(v.getDataBlockId())[0].dataset.redirectionUrl,d,e;try{for(var f=q.__values(a),h=f.next();!h.done;h=f.next()){var k=h.value;"rh"===k.key?d=k.value:e=k.value}}catch(p){var l={error:p}}finally{try{h&&!h.done&&(b=f.return)&&b.call(f)}finally{if(l)throw l.error;}}try{var n=JSON.parse(e)}catch(p){t["default"].log("JSON parse failed for refinements with value"+
a)}void 0!==n?(n.hasOwnProperty("vehicleName")&&delete n.vehicleName,c=c+"&rh="+encodeURIComponent(d)+"&af="+encodeURIComponent(JSON.stringify(n))):c=c+"&rh="+encodeURIComponent(d)+"&af="+encodeURIComponent(e);Qe["default"].setLocation(c)},Bc={constructAndNavigate:ue},sg=function(a,b){var c=L["default"].setup();a=a.data.selections;Wa.addTracking(c.getSearchRefinements,{ref_:b.valueOf()})({selections:a}).then(function(d){d=q.__spread(d.queryRefinements,d.jsonRefinements);ue(d)}).catch(function(d){m.logScopedCount("tire-refinements-error",
1);t["default"].log("tire-refinements-error","ERROR","international-automotive");t["default"].log(d)})},tg=function(a,b){M.showSpinner();M.hideSecondaryViewContentContainer();M.hideErrorMessageContainer();M.hideErrorMessageContainerHsnTsn();var c=L["default"].setup();c=He.applySifProfile(c.performGarageOperations,"AutomotiveUIComponentsVehicleIdentifierSIFProfile");a={aapiClientContext:{componentName:"automotivePartfinderBrowsePage",methodName:"handleGarageOperationAndRedirect"},automotiveHsnTsn:a.data.automotiveHsnTsn,
garageId:a.data.garageId,selectionType:a.data.partfinderGarageEntitySelectionType,selections:a.data.selections};Wa.addTracking(c,{sif_profile:"AutomotiveUIComponentsVehicleIdentifierSIFProfile",ref_:b.valueOf()})(a).then(function(d){d.resolvedAttributesSelection?(d=(d.resolvedAttributesSelection.queryRefinements||[]).concat(d.resolvedAttributesSelection.jsonRefinements||[]),M.showSecondaryViewContentContainer(),Bc.constructAndNavigate(d)):(M.showErrorMessageContainerHsnTsn(),M.showSecondaryViewContentContainer(),
M.hideSpinner())}).catch(function(d){M.hideSpinner();M.showErrorMessageContainer();M.hideErrorMessageContainerHsnTsn();t["default"].log("GarageMutation remote operation failed: "+d,"ERROR",v.getErrorAttributionId())})},Hb={handlePartFinder:function(a,b){a.data&&tg(a,b)},handleTireFinder:,ug={attachPartfinder:function(){cc.attach("filter-button-click",function(a){var b=Hb.handlePartFinder;a:{if(a.data)if("VehicleAttribute"===a.data.partfinderGarageEntitySelectionType||
"VehicleAdditionalAttribute"===a.data.partfinderGarageEntitySelectionType){var c=da.PF_DESKTOP_BROWSE_GO_BY_VEHICLE_FLOW;break a}else if("NumberPlate"===a.data.partfinderGarageEntitySelectionType||"HsnTsn"===a.data.partfinderGarageEntitySelectionType){c=da.PF_DESKTOP_BROWSE_GO_BY_NUMBER_PLATE;break a}c=da.PF_DESKTOP_BROWSE_GO}b.call(Hb,a,c)})},attachTirefinder:function(){rg.attach("tire-selected",function(a){var b=Hb.handleTireFinder;var c=a.data?"ByTireAttributes"===a.data.tirefinderGarageEntitySelectionType?
da.TF_DESKTOP_BROWSE_GO_BY_TIRE_FILTER:da.TF_DESKTOP_BROWSE_GO_BY_VEHICLE_FILTER:da.TF_DESKTOP_BROWSE_GO;b.call(Hb,a,c)})}},Ca,Ib=!1,ve={hide:function(){Ib||(t["default"].log("SecondaryViewPopover hide called without initialization","ERROR",v.getErrorAttributionId()),m.logScopedCount("uninitialized-secondary-view-popover-hide",1));Ca.hide()},initialize:function(a,b){void 0!==Ca||Ib||(pa["default"].scopeElement(pa["default"].cardRoot.getElementsByClassName(v.getSecondaryViewContentParentContainerId())[0]),
ka["default"].on("a:popover:beforeShow:"+v.getSecondaryViewName(),function(c){void 0===Ca&&(Ca=c.popover);M.beforeShowHandler()}),ka["default"].on("a:popover:afterShow:"+v.getSecondaryViewName(),,Ib=!0)},show:function(){Ib||(t["default"].log("SecondaryViewPopover show called without initialization","ERROR",v.getErrorAttributionId()),m.logScopedCount("uninitialized-secondary-view-popover-show",1));void 0===Ca?pa["default"].cardRoot.getElementsByClassName(v.getSecondaryViewTrigger())[0].getElementsByClassName("a-button-input")[0].click():
Ca.show()}},vg={mapper:function(a){var b,c=[];try{for(var d=q.__values(a),e=d.next();!e.done;e=d.next()){var f=e.value;c.push({id:f.id,value:f.value})}}catch(k){var h={error:k}}finally{try{e&&!e.done&&(b=d.return)&&b.call(d)}finally{if(h)throw h.error;}}return c}},wg={validate:function(a){if(!a||!a.data||a.error)throw m.logScopedCount("partfinder-primary-desktop-browse-client-event-error",1),Error("PartfinderPrimaryDesktopBrowse component client triggerred errored event");}},we=function(){var a=Fa.getData(v.getPrimaryViewId());
wg.validate(a);a=v.getPartfinderSecondaryViewId();try{cc.reset(a)}catch(b){throw m.logScopedCount("partfinder-garage-entity-selection-client-reset-error",1),Error("partfinderGarageEntitySelectionClient reset error: "+b);}try{cc.initialize(a)}catch(b){throw m.logScopedCount("partfinder-garage-entity-selection-client-initialization-error",1),Error("partfinderGarageEntitySelectionClient initialization error: "+b);}},xg={getValueHTMLWithTracking:function(a){return q.__awaiter(void 0,void 0,void 0,function(){var b,
c,d,e;return q.__generator(this,function(f){switch(f.label){case 0:b=L["default"].setup(),c={attributesSelectionFlow:"vehicle-by-attributes",attributesSelectionType:"base",currentSelections:[],garageVehicleSelectionType:"vehicles-view",id:v.getPartfinderSecondaryViewId(),requiredSelection:[]},f.label=1;case 1:return f.trys.push([1,3,,4]),d=Wa.addTracking(b.getPartfinderGarageEntitySelection,{ref_:a.valueOf()}),[4,d(c)];case 2:return[2,f.sent()];case 3:throw e=f.sent(),t["default"].log("PartfinderGarageEntitySelectionSecondaryViewRemoteOperationInterface getPartfinderGarageEntitySelection with tracking remote operation failed: "+
e,"ERROR",v.getErrorAttributionId()),Error("PartfinderGarageEntitySelectionSecondaryViewRemoteOperationInterface getPartfinderGarageEntitySelection with tracking remote operation failed: "+e);case 4:return[2]}})})}},xe=function(){return q.__awaiter(void 0,void 0,void 0,function(){return q.__generator(this,})},ye=function(a){"tablet"===pa["default"].cardRoot.getElementsByClassName("_apf-desktop-browse-v0_style_automotive-pf__2IHTN")[0].dataset.deviceType?
(ve.initialize(we,xe),ve.show()):(Ob.initialize(we,xe),Ob.show())},ze=function(a){var b,c;if(null===(c=null===(b=null===a||void 0===a?void 0:a.data)||void 0===b?void 0:b.vehicles)||void 0===c?0:c.vehicleList)try{var d=pa["default"].cardRoot.getElementsByClassName("_apf-desktop-browse-v0_style_automotive-pf__2IHTN")[0];if(d.dataset.refinements)Bc.constructAndNavigate(JSON.parse(d.dataset.refinements));else{var e=L["default"].setup(),f=vg.mapper(a.data.vehicles.vehicleList[0].selectedDisplayAttribute);
Wa.addTracking(e.getSearchRefinements,{ref_:da.PF_DESKTOP_BROWSE_FIND_PARTS})({selections:f}).then(.catch(function(h){m.logScopedCount("card-find-parts-error",1);t["default"].log("Find Parts remote operation failed","ERROR",v.getErrorAttributionId());throw Error("BrowseFindPartsHandler remote operation with tarcking error: "+h);})}}catch(h){throw Error("BrowseFindPartsHandler remote operation error: "+h);}else throw Error("BrowseFindPartsHandler error: partfinderPrimaryDesktopBrowseData is null or has no vehicles");
};Va._operationNames="getPartfinderGarageEntitySelection getMatchingResult getMatchingResultHsnTsn getAttributesSelectionView getVehiclesViewNextPage getSearchRefinements performGarageOperations".split(" ");Va.card=function(){return q.__awaiter(void 0,void 0,void 0,function(){var a;return q.__generator(this,function(b){try{(a=pa["default"].cardRoot.getElementsByClassName("_apf-desktop-browse-v0_style_automotive-pf__2IHTN")[0])&&a.dataset&&"false"===a.dataset.isDeviceAttributeRobot&&(Ve.initialize(),
Rc.attach(ye),Rc.attachRedirectHandler(ze),ug.attachPartfinder(),Se.browserOps())}catch(c){throw a&&a.classList.add("aok-offscreen"),m.logScopedCount("card-initialization-error",1),t["default"].log("Card initialization failed","ERROR",v.getErrorAttributionId()),Error("Card initialization error: "+c);}return[2]})})};Va.partfinderPrimaryDesktopBrowseClientEventHandler=ye;Va.partfinderPrimaryDesktopBrowseClientRedirectionEventHandler=ze});
