"use strict";(self._cf=self._cf||[]).push([[7881,88588,17650],{370049:(e,t,n)=>{n.d(t,{F:()=>a,z:()=>o});const a="confluence.frontend.renderer.annotation.provider.inline.comments",o="confluence.ssr.renderer.annotation.provider.inline.comments"},684474:(e,t,n)=>{n.d(t,{I:()=>d,j:()=>l});var a=n(840506),o=n(167347),i=n(734233),r=n(477958),s=n(827685);const l=(0,a.createContext)({isReactionsEnabled:!1});l.displayName="ReactionsContext";const d=({contentId:e,children:t})=>{const{location:n}=(0,a.useContext)(i.M),d=-1!==(null==n?void 0:n.pathname.indexOf("/wiki/pdf/")),{data:c}=(0,o.aM)(s.f,{variables:{contentId:e,location:r.SB},fetchPolicy:"cache-first",skip:d}),u=(0,a.useMemo)((()=>({isReactionsEnabled:!d&&c&&c.webPanels&&c.webPanels.length>0})),[c,d]);return a.createElement(l.Provider,{value:u},t)};d.displayName="ReactionsProvider"},363311:(e,t,n)=>{n.d(t,{X6:()=>r,a1:()=>s,gu:()=>o,ou:()=>i});var a=n(779076);const o=a.ZP`fragment authorFragment on AtlassianUser{displayName photos{isPrimary value}id}`,i=a.ZP`fragment commentDataFragment on Comment{id ancestors{id}author{type displayName profilePicture{path}...on KnownUser{accountId permissionType}...on User{accountId permissionType}}body(representation:ATLAS_DOC_FORMAT){value}contentStatus links{webui}parentId permissions{isEditable isRemovable}version{friendlyWhen number when by{type displayName ...on KnownUser{accountId}...on User{accountId}}}}`,r=(a.ZP`fragment contentCommentListFragment on PaginatedContentList{count pageInfo{hasNextPage endCursor}}`,a.ZP`fragment commentListFragment on PaginatedCommentList{totalCount pageInfo{hasNextPage endCursor}}`),s=a.ZP`fragment contentFragment on Content{id operations{operation targetType}space{id homepageId}type history{createdBy{...on KnownUser{accountId}...on User{accountId}}}}`},324773:(e,t,n)=>{n.d(t,{q:()=>i,w:()=>r});var a=n(779076),o=n(363311);const i=a.ZP`query CommentsSectionQuery($offset:String$first:Long$contentId:ID!$isPoweredByConfluenceMobileEnabled:Boolean=false){comments(pageId:$contentId type:FOOTER depth:ALL first:$first after:$offset){...commentListFragment edges{cursor node{...commentDataFragment reactionsSummary(pageId:$contentId contentType:"page" childType:"comment"){ari containerAri reactionsCount reactionsSummaryForEmoji{id emojiId count reacted}}commentSource@include(if:$isPoweredByConfluenceMobileEnabled)}}}content(id:$contentId){nodes{subType ...contentFragment}}user(current:true){...authorFragment}}${o.gu}${o.a1}${o.X6}${o.ou}`,r=a.ZP`query CommentsSectionWithoutReactionsQuery($offset:String$first:Long$contentId:ID!$isPoweredByConfluenceMobileEnabled:Boolean=false){comments(pageId:$contentId type:FOOTER depth:ALL first:$first after:$offset){...commentListFragment edges{cursor node{...commentDataFragment commentSource@include(if:$isPoweredByConfluenceMobileEnabled)}}}content(id:$contentId){nodes{subType ...contentFragment}}user(current:true){...authorFragment}}${o.gu}${o.a1}${o.X6}${o.ou}`},894439:165250:(e,t,n)=>{n.d(t,{I:()=>i,L:()=>o});var a=n(840506);const o=(0,a.createContext)({refetchContent:!1,setRefetchContent:()=>{}});o.displayName="ContentRefetchContext";const i=({children:e})=>{const[t,n]=(0,a.useState)(!1),i=(0,a.useMemo)((()=>({refetchContent:t,setRefetchContent:)),[t,n]);return a.createElement(o.Provider,{value:i},e)};i.displayName="ContentRefetchProvider"},34048:825688:(e,t,n)=>{function a(e){var t,n,a;const o=null==e||null===(t=e.properties)||void 0===t?void 0:t.nodes,i=null==o?void 0:o.filter((e=>"editor"===(null==e?void 0:e.key))),r=null==i||null===(n=i[0])||void 0===n?void 0:n.value,s=(l=r)?null!=l&&l.includes("v2")?"v2":null!=l&&l.includes("v1")?"v1":"unset":"";var l,d;return null!=e&&null!==(a=e.metadata)&&void 0!==a&&a.frontend&&"fabricEditorSupported"in e.metadata.frontend?{queryDataId:null==e?void 0:e.id,editorProperty:s,fabricEditorSupported:null==e||null===(d=e.metadata)||void 0===d||null===(d=d.frontend)||void 0===d?void 0:d.fabricEditorSupported}:{queryDataId:null==e?void 0:e.id,editorProperty:s,fabricEditorSupported:null}}n.d(t,{T:()=>a})},331217:(e,t,n)=>{n.d(t,{jD:()=>p,tx:()=>g});var a=n(840506),o=n(387583),i=n(615919),r=n(93972),s=n(142807),l=n(898789),d=n(272290);const c=(0,r.defineMessages)({revertEditorFlagSuccessTitle:{id:"editor-conversion.revert-editor.flag.success.title",defaultMessage:"Editor reverted"},revertEditorFlagSuccessBody:{id:"editor-conversion.revert-editor.flag.success.body",defaultMessage:"It was successfully reverted to the legacy editor for this page."}}),u=(0,d.r)((({flags:e})=>((0,a.useEffect)((()=>{const t=a.createElement(s.Z,(0,i.Z)({},c.revertEditorFlagSuccessBody));e.showFlag({title:a.createElement(s.Z,(0,i.Z)({},c.revertEditorFlagSuccessTitle)),description:t,customComponent:l.Z}),(0,o.Q)()}),[e]),null))),m=(0,a.createContext)({editorProperty:"",fabricEditorSupported:!1,queryDataId:""}),p=({editorProperty:e,fabricEditorSupported:t,queryDataId:n,children:i})=>{const r="v2"===e||!e&&t,s=(0,a.useMemo)((()=>({editorProperty:e,fabricEditorSupported:t,queryDataId:n})),[e,t,n]);return a.createElement(m.Provider,{value:s},i,!r&&n&&(0,o.CF)(n)&&a.createElement("div",{"data-testid":"auto-editor-conversion-revert-success"},a.createElement(u,null)))};p.displayName="AutoConversionByLineContextProvider";const g=,387583:(e,t,n)=>{n.d(t,{CF:()=>i,DQ:()=>r,Q:()=>s});var a=n(637418),o=n(107663);const i=e=>(null===a.R2||void 0===a.R2?void 0:a.R2.getItem(o.keys.EDITOR_REVERTED))===e,r=e=>{null===a.R2||void 0===a.R2||a.R2.setItem(o.keys.EDITOR_REVERTED,e)},s=()=>{null===a.R2||void 0===a.R2||a.R2.removeItem(o.keys.EDITOR_REVERTED)}},505193:(e,t,n)=>{n.d(t,{K:()=>r});var a=n(199009),o=n(822464);const i={isSurveyTriggered:!1,source:""};class r extends o.W2{constructor(...e){super(...e),(0,a.Z)(this,"state",i),(0,a.Z)(this,"triggerSurvey",(),(0,a.Z)(this,"resetTrigger",(()=>{this.state.isSurveyTriggered&&this.setState(()}))}}},851239:(e,t,n)=>{n.d(t,{C:()=>a});const a=(e,t=!0)=>e.getBooleanValue("confluence.frontend.onboarding.experience",{default:!1,shouldTrackExposureEvent:t})},562328:(e,t,n)=>{n.d(t,{n:()=>a});const a=n(779076).ZP`fragment inlineCommentFragment on Comment{id body(representation:ATLAS_DOC_FORMAT){value}contentStatus links{webui}location{...on InlineComment{type inlineMarkerRef inlineResolveProperties{resolvedTime resolvedUser}}}parentId permissions{isEditable isRemovable isResolvable}version{when number}author{displayName profilePicture{path}permissionType ...on KnownUser{accountId}...on User{accountId}}}`},762445:815641:(e,t,n)=>{n.d(t,{O:()=>u,t:()=>p});var a=n(615919),o=n(872342),i=n(840506),r=n(767001),s=n(940155),l=n(115613),d=n(214870);const c=["as","style"];n(579982),n(520700);const u=(0,i.forwardRef)(((e,t)=>{let{as:n="div",style:s}=e,l=(0,o.Z)(e,c);return i.createElement(n,(0,a.Z)((0,a.Z)({},l),{},{style:s,ref:t,className:(0,r.Z)(["_1bsb1osq _4t3i1ylp",l.className])}))}));const m=(0,s.ZR)({__loadable_id__:"VnxnD",name:"ViewPageLabelsLoaderBase",loading:loader:),p=e=>i.createElement(i.Fragment,null,i.createElement(l.q,{metric:d.H}),i.createElement(m,(0,a.Z)({},e)))},214870:(e,t,n)=>{n.d(t,{H:()=>i});var a=n(697674),o=n(113059);const i=(0,a.is)({key:o.e4})},368447:304250:(e,t,n)=>{n.d(t,{o:()=>r});var a=n(840506),o=n(860640),i=n(384022);const r=({contentId:e})=>(s(e),null),s=e=>{const{track:t}=(0,i.c)();(0,a.useEffect)((,[t,e])}},860640:402535:(e,t,n)=>{n.d(t,{o:()=>g,d:()=>m});var a=n(840506),o=n(167347),i=n(779076),r=n(368447);const s=i.ZP`query LocalActivityQuery{localActivity{id action timestamp content{...LocalActivityContentFragment __typename}__typename}}${r.N}`,l=i.ZP`query DehydratedLocalActivityQuery{localActivity{id action timestamp content{id __typename}__typename}}`;var d=n(860640);const c=new Set,u=e=>c.has(e.content.id||""),m=({filters:e,skip:t}={})=>{const{data:n}=(0,o.aM)(s,{fetchPolicy:"cache-only",skip:t}),i=(0,a.useCallback)((,[]),r={viewedEvents:[],deletedContentIds:new Set,markAsConsistent:i};return((null==n?void 0:n.localActivity)||[]).forEach((t=>{p(t,e)&&(t.action===d.X.viewed?r.viewedEvents.push(t):t.action===d.X.deleted&&r.deletedContentIds.add(t.content.id||""))})),r},p=(e,t)=>{var n;return!u(e)&&(!t||t.spaceKey===(null===(n=e.content.space)||void 0===n?void 0:n.key))},g=({contentId:e,action:t},n)=>{let a=[];try{const e=n.readQuery({query:l});a=(null==e?void 0:e.localActivity.filter(().slice(0,99))||[]}catch(i){}c.clear();const o={localActivity:[{id:`${e}-${t}`,action:t,timestamp:(new Date).toISOString(),content:{id:e,__typename:"Content"},__typename:"LocalActivityEvent"},...a]};n.writeQuery({query:l,data:o})}},384022:(e,t,n)=>{n.d(t,{c:()=>r});var a=n(840506),o=n(167347),i=n(402535);const r=()=>{const e=(0,o.xJ)();return{track:(0,a.useCallback)(((t,n)=>{(0,i.o)({contentId:t,action:n},e)}),[e])}}},884535:(e,t,n)=>{n.d(t,{a:()=>s});var a=n(840506),o=n(486889);const i="firstPagePublish",r="jira-software",s=()=>{const{createAnalyticsEvent:e}=(0,o._)(),t=(0,a.useCallback)((t=>{e({type:"sendOperationalEvent",data:{action:"failed",actionSubject:"getOnboardingState",actionSubjectId:"editorOnboarding",source:t}}).fire()}),[e]),n=(0,a.useCallback)((t=>{e({type:"sendScreenEvent",data:{name:"onboardingEditorPublishSuccessFlag",attributes:{type:t}}}).fire()}),[e]),s=(0,a.useCallback)((t=>{e({type:"sendScreenEvent",data:{name:"inviteTeamNudge",source:i,attributes:{numSourceProductUsers:t,nudgeTrigger:i,nudgeLocation:"onboarding",sourceProduct:r}}}).fire()}),[e]),l=(0,a.useCallback)((()=>{e({type:"sendUIEvent",data:{source:"onboardingEditorModalPrompt",actionSubject:"button",action:"clicked",actionSubjectId:"closeButton"}}).fire()}),[e]),d=(0,a.useCallback)((()=>{e({type:"sendUIEvent",data:{source:"onboardingEditorModalPrompt",actionSubject:"button",action:"clicked",actionSubjectId:"publishButton"}}).fire()}),[e]);return{fireGetEditorOnboardingStateFailed:t,fireEditorPublishSuccessFlagViewed:n,fireNudgeToInviteSuccessFlagViewed:s,fireAddYourTeamPromptClicked:(0,a.useCallback)(((t,n)=>{e({type:"sendUIEvent",data:{source:"onboarding-invite-flag",actionSubject:"button",action:"clicked",actionSubjectId:"addYourTeam",attributes:{numSourceProductUsers:t,userIds:n,nudgeTrigger:i,nudgeLocation:"onboarding",sourceProduct:r}}}).fire()}),[e]),fireDismissAddYourTeamClicked:(0,a.useCallback)((()=>{e({type:"sendUIEvent",data:{source:"onboarding-invite-flag",actionSubject:"button",action:"clicked",actionSubjectId:"dismissInviteTeamFlag",attributes:{nudgeTrigger:i,nudgeLocation:"onboarding"}}}).fire()}),[e]),fireEditorModalPromptClosed:l,fireEditorModalPromptPublished:d}}},503396:(e,t,n)=>{n.d(t,{P:()=>r,S:()=>s});var a=n(834232),o=n(944547);const i=(0,a.M)({initialState:{hasMetPublishNudgeConditions:!1},actions:{setHasMetPublishNudgeConditions:,name:"useOnboardingEditorState"}),r=(0,o.hs)(i,{selector:),s=(0,o.aV)(i)},360288:4541:(e,t,n)=>{n.d(t,{g:()=>l});var a=n(167347),o=n(722755),i=n(649233),r=n(924431);const s=n(779076).ZP`query OnboardingLabelsQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id labels{nodes{id label}}metadata{sourceTemplateEntityId}}}}`,l=({contentId:e,skip:t})=>{var n,l;const{data:d,loading:c,error:u}=(0,a.aM)(s,{variables:{contentId:e,status:["current","draft"]},skip:t}),m=(null==d||null===(n=d.content)||void 0===n||null===(n=n.nodes)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.labels)||void 0===n?void 0:n.nodes)||[],p=(null==d||null===(l=d.content)||void 0===l||null===(l=l.nodes)||void 0===l||null===(l=l[0])||void 0===l||null===(l=l.metadata)||void 0===l?void 0:l.sourceTemplateEntityId)||void 0,g=Boolean(m.find((e=>(null==e?void 0:e.label)===r.z7||(null==e?void 0:e.label)===r.q4))),v=Boolean(m.find(());return u&&(0,o.T)(u)&&(0,i.Xb)(u),{isTemplate:!!p,isOnboardingTemplate:g,isOriginalOnboardingTemplate:v,labelsData:d,labelsLoading:c,labelsError:u}}},377627:(e,t,n)=>{n.d(t,{O:()=>I});var a=n(840506),o=n(167347),i=n(486889),r=n(654927),s=n.n(r),l=n(582463),d=n(179640),c=n(423128),u=n(110192),m=n(360288),p=n(924431),g=n(928782),v=n(615919),f=n(111783);const E=({skip:e=!1})=>{const[t,n]=(0,a.useState)(!1),{cloudId:o,isLoggedIn:i,isLicensed:r}=(0,l.D)(),s=e||!i||!r,{attributes:d,loading:c,error:u}=(0,f.$)({cloudId:o,skip:s});return(0,a.useEffect)((()=>{(()=>{if(s||c||u)return;const e=(e=>{const t=null==e?void 0:e.reduce(((e,t)=>(0,v.Z)((0,v.Z)({},e),{},{[t.name]:t.value})),{}),n=Date.parse(null==t?void 0:t["jira-software.ondemand.activationDate"]),a=Date.parse(null==t?void 0:t["confluence.ondemand.activationDate"]);return!!n&&!!a&&a>n})(d);n(e)})()}),[s,d,c,u]),{isXflowUser:!e&&t,isLoading:c,error:u}};var b=n(684724);const y=n(779076).ZP`query SignUpProperties{signUpProperties{reverseTrial}}`,h="cc_onboarding_contextual_invite_nudge",I=()=>{var e,t,n,r;const{isNewUser:v}=(0,a.useContext)(c.wu),{isLicensed:f,isLoggedIn:I,userId:C,edition:_,cloudId:S}=(0,l.D)(),{createAnalyticsEvent:T}=(0,i._)(),{setOnboardingState:P}=(0,g.Gs)(),w=(0,d.T)("confluence.frontend.onboarding.experience"),[N,x]=(0,a.useState)(!1),R=s().getExperimentValue(h,"cohort","not-enrolled",{fireExperimentExposure:!1}),Z=!w||"FREE"!==_||"not-enrolled"===R,k=Z||!(I&&f&&v),{data:A,loading:F,error:O}=(0,g.Si)([m.Z,m.A,p.iq.HAS_USER_PUBLISHED],Z||!I||!f),D=(0,g.Hi)(A),{contextualInviteNudgeEligibleTag:L,hasUserPublished:M}=D,$=k||L||M,{data:B,loading:U,error:j}=(0,o.aM)(u.f,{variables:{userId:C},skip:$}),V="true"===(null===(n=(null!==(e=null==B||null===(t=B.experimentalUserPersonalization)||void 0===t?void 0:t.attributes)&&void 0!==e?e:[]).find(())||void 0===n?void 0:n.value),{isXflowUser:H,isLoading:G,error:W}=E({skip:$}),{data:q,loading:X,error:z}=(0,o.aM)(y,{skip:$}),Q=null==q||null===(r=q.signUpProperties)||void 0===r?void 0:r.reverseTrial,K=U||F||G||X,Y=j||O||W||z;return(0,a.useEffect)((()=>{if($||K||Y||V||H||"CONTROL"===Q||"VARIANT"===Q)return;(async()=>{var e,t;const n=await(0,b.yF)(S);n instanceof Error&&T({type:"sendTrackEvent",data:{source:"editorOrViewPage",action:"failed",actionSubject:"getInvitePermissions",attributes:{message:null==n?void 0:n.message}}}).fire();[...null!==(e=null==n?void 0:n.directInvite)&&void 0!==e?e:[],...null!==(t=null==n?void 0:n.invitePendingApproval)&&void 0!==t?t:[]].some(()&&(P({key:m.Z,value:"true"}),x(!0))})()}),[Y,K,$,S,k,L,V,H,P,Q,T]),{contextualInviteNudgeEligibleTag:N||L||!1,onboardingState:D,contextualNudgeCohort:R,logExperimentExposure:()=>{s().manuallyLogExperimentExposure(h),T({type:"sendTrackEvent",data:{actionSubject:"feature",action:"exposed",actionSubjectId:"firstPublishContextualInviteNudge",source:"viewPageScreen",attributes:{flagKey:h,value:R}}}).fire()}}}},684724:(e,t,n)=>{n.d(t,{yF:()=>i});var a=n(318122),o=n(301771);const i=(0,a.default)((async e=>{const t=`ari:cloud:platform::site/${e}`;try{const e=await(0,o.y)(`/gateway/api/v3/invitations/capabilities?resource=${t}`);return function(e){const t=new Set,n=new Set;return Array.isArray(e)&&e.forEach((e=>{t.has(e.resourceARI)||"NONE"===e.directInvite.mode||t.add(e.resourceARI),n.has(e.resourceARI)||"NONE"===e.invitePendingApproval.mode||n.add(e.resourceARI)})),{directInvite:[...t],invitePendingApproval:[...n]}}(await e.json())}catch(n){return n}}))},111783:(e,t,n)=>{n.d(t,{$:()=>d});var a=n(167347),o=n(582463),i=n(634554),r=n(722755);const s=n(779076).ZP`query SitePersonalizationQuery($cloudId:String!)@experimental{experimentalSitePersonalization(cloudId:$cloudId){attributes{name value}}}`;let l=!1;const d=({cloudId:e,skip:t,fetchPolicy:n})=>{var d;const{isLoggedIn:c,isLicensed:u}=(0,o.D)(),m=t||!c||!u||l,{data:p,loading:g,error:v}=(0,a.aM)(s,{variables:{cloudId:e},fetchPolicy:n||"cache-first",skip:m,onError(e){var t;l=null==e||null===(t=e.graphQLErrors)||void 0===t?void 0:t.some((e=>{var t,n,a;return(null==e||null===(t=e.path)||void 0===t?void 0:t.includes("experimentalSitePersonalization"))&&((null==e||null===(n=e.message)||void 0===n?void 0:n.includes("/personalization Received status 401"))||(null==e||null===(a=e.message)||void 0===a?void 0:a.includes("/personalization Received status 403"))||(0,i.j6)(e,"401")||(0,r.T)(e))}))}});return{loading:g,error:v,attributes:(null==p||null===(d=p.experimentalSitePersonalization)||void 0===d?void 0:d.attributes)||[]}}},427138:(e,t,n)=>{n.d(t,{S$:()=>i,VE:()=>o});var a=n(940155);const o=(0,a.ui)({__loadable_id__:"sABto",name:"EndOfPageRecommendation",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(45159),n.e(31382),n.e(42434),n.e(29583),n.e(1244),n.e(90077),n.e(72178),n.e(16215),n.e(82995),n.e(70289),n.e(63681),n.e(38687),n.e(44155),n.e(8900),n.e(62997),n.e(85803)]).then(n.bind(n,19338))).EndOfPageRecommendation}),i=(0,a.ZR)({__loadable_id__:"thsLS",name:"EndOfPageRecAdminConfig",loader:async()=>(await Promise.all([n.e(12705),n.e(45159),n.e(62997),n.e(58274)]).then(n.bind(n,471226))).EndOfPageRecAdminConfig})},819959:(e,t,n)=>{n.d(t,{M:()=>r,X:()=>s});var a=n(840506),o=n(940155),i=n(492311);const r=(0,o.ZR)({__loadable_id__:"yhHGm",name:"ReactionsLoader",loading:loader:async()=>(await Promise.all([n.e(12705),n.e(51238),n.e(53812),n.e(94338)]).then(n.bind(n,557423))).Reactions}),s=(0,o.y$)({__loadable_id__:"Iqu8V",name:"ReactionsLoaderBackground",loading:()=>a.createElement(i.n,null),loader:)},591084:(e,t,n)=>{n.d(t,{b:()=>r});var a=n(615919),o=n(840506),i=n(734233);const r=()=>{const{getQueryParams:e,setQueryParams:t}=(0,o.useContext)(i.M),{action:n,contentId:r,contentType:s,focusedCommentId:l,emojiId:d}=e(),c=n&&"react"===n,u=n&&"addReaction"===n&&d?d:void 0;return{focusedPageReactionsId:c&&s&&("page"===s||"blogpost"===s)&&r?r:void 0,focusedCommentReactionsId:c&&l?l:void 0,focusedCommentQuickReactionsId:u&&l?l:void 0,quickReactionsEmojiId:u,removeReactionsQueryParams:()=>{if(n&&d){const n=e();t((0,a.Z)((0,a.Z)({},n),{},{action:void 0,emojiId:void 0}))}}}}},110718:(e,t,n)=>{n.d(t,{S:()=>a,d:()=>o});let a={}),o={})},80829:(e,t,n)=>{n.d(t,{k:()=>r});var a=n(840506),o=n(734233),i=n(692898);const r=({isSmooth:e})=>{const{getHash:t,getQueryParams:n}=(0,a.useContext)(o.M),r=(0,a.useRef)(t),s=(0,a.useRef)(n);return r.current=t,s.current=n,(0,a.useEffect)((()=>{const t=r.current(),n=s.current();t.length>0||["focusedCommentId"].some(()||(0,i.nK)(e)}),[r,s,e]),null}},40569:(e,t,n)=>{n.d(t,{P:()=>r});var a=n(840506),o=n(887980),i=n(230906);const r=({contentId:e,spaceKey:t,banner:n,hasByLineContributors:r,hasByLineExtensions:s,headingContainer:l,isSubTypeEmbed:d,hasCoverPicture:c})=>{const{versionOverride:u,embeddedContentRender:m}=(0,i.I)();return a.createElement(o.wW,{banner:n,contentId:e,spaceKey:t,headingContainer:l,hasCoverPicture:c},!d&&a.createElement(o.TA,{contentId:e,versionOverride:u,embeddedContentRender:m,hasByLineContributors:r,hasByLineExtensions:s}))}},876079:(e,t,n)=>{n.d(t,{j:()=>Ut});var a=n(615919),o=n(840506),i=n(654927),r=n.n(i),s=n(230475),l=n(214946),d=n(994402),c=n(940155);const u=(0,c.ZR)({__loadable_id__:"ApYp9",name:"CustomHeaderFooterLoader",loader:async()=>(await Promise.all([n.e(12705),n.e(27980)]).then(n.bind(n,533734))).CustomHeaderFooter});(0,c.y$)({__loadable_id__:"dE0b6",name:"CustomHeaderFooterBackgroundLoader",loader:);var m=n(34048),p=n(304250),g=n(9219),v=n(710833),f=n(84210),E=n(80829);const b=(0,c.tM)({__loadable_id__:"B5gWy",name:"LivePageLoader",loader:async()=>(await Promise.all([n.e(12705),n.e(61769),n.e(71486),n.e(35642),n.e(37522),n.e(26794)]).then(n.bind(n,651005))).LivePageComponent});var y=n(170560),h=n(881584),I=n(198300),C=n(582463),_=n(179640),S=n(851239),T=n(427138);const P=(0,c.ZR)({__loadable_id__:"CP5ez",name:"InlineCommentsHighlighterLoader",loader:async()=>(await n.e(3071).then(n.bind(n,17593))).InlineCommentsHighlighter});var w=n(815641),N=n(951123),x=n(684474),R=n(825688),Z=n(331217),k=n(246447),A=n(651368),F=n(410941),O=n(547922),D=n(165250),L=n(40569),M=n(822464);const $=(0,c.y$)({__loadable_id__:"VrSkZ",name:"EditorSatisfactionSurvey",loader:async()=>(await n.e(79150).then(n.bind(n,572929))).EditorSatisfactionSurvey});var B=n(505193),U=n(594877),j=n(486889),V=n(627521),H=n(722755),G=n(924431),W=n(360288),q=n(4541),X=n(928782),z=n(213064),Q=n(815037),K=n(719323),Y=n(377627),J=n(16728);var ee=n(778248),te=n(566887),ne=n(93972),ae=n(142807),oe=n(106506),ie=n(190206),re=n(400318),se=n(111783),le=n(908990),de=n(423128);let ce={});Object.keys(ce).map((e=>ce[e]));var ue=n(318122),me=n(301771);const pe="x-flow_confluence_nudge_to_invite_team",ge=(0,ue.default)((async e=>(await(0,me.y)(`/gateway/api/growth/confluence-xflow-nudge-to-invite/eligibleJiraUsers?cloudId=${e}`)).json())),ve="firstPagePublish",fe=(e,t)=>{t({type:"sendOperationalEvent",data:{source:ve,action:e,actionSubject:"fetchSiteTraits"}}).fire()},Ee=(e,t,n)=>{t({type:"sendOperationalEvent",data:{source:ve,action:e,actionSubject:"fetchEligibleUsers",attributes:{numSourceProductUsers:n}}}).fire()},be=e=>{const t=null==e?void 0:e.reduce(((e,t)=>(0,a.Z)((0,a.Z)({},e),{},{[t.name]:t.value})),{}),n=Date.parse(null==t?void 0:t["jira-software.ondemand.activationDate"]),o=Date.parse(null==t?void 0:t["confluence.ondemand.activationDate"]);return!!n&&!!o&&o>n};var ye=ye||{});const he=()=>{const{createAnalyticsEvent:e}=(0,j._)(),[t,n]=(0,o.useState)(!1),[a,i]=(0,o.useState)([]),[s,l]=(0,o.useState)(!0),{userId:d,cloudId:c,locale:u}=(0,C.D)(),{isSiteAdmin:m}=(0,o.useContext)(de.wu),p=r().initializeCompleted()&&r().checkGate("x-flow_nudge_to_invite_team_feature_gate"),g=(0,o.useMemo)((,[p,c,d]),{attributes:v,loading:f,error:E}=(0,se.$)({cloudId:c,skip:!g}),b=r().initializeCompleted()&&r().getExperimentValue(pe,"cohort",ce.NOT_ENROLLED,{fireExperimentExposure:!1}),y=(0,o.useMemo)((()=>{const e=[];return m||e.push(ye.NOT_ADMIN_USER),void 0===a||a.length||e.push(ye.NO_ELIGIBLE_USERS),(0,le.RV)(u)||e.push(ye.NON_ENGLISH),!f&&!be(v)&&e.push(ye.CONFLUENCE_BEFORE_JIRA),e}),[m,a,v,u,f]),h=!p||s||y.length?ce.NOT_ENROLLED:b;(0,o.useEffect)((()=>{f||fe(E?"failed":"succeeded",e)}),[E,e,f]);const I=(0,o.useMemo)((()=>be(v)),[v]),_=(0,o.useMemo)((()=>g&&(0,le.RV)(u)&&m&&c&&!f&&s&&!E),[g,u,m,c,E,f,s]);(0,o.useEffect)((()=>{c&&!E&&g&&(0,le.RV)(u)&&m||l(!1)}),[c,E,g,u,m]),(0,o.useEffect)((()=>{_&&(async()=>{if(I)try{const t=await ge(c),a=r().getExperimentValue(pe,"cohort",ce.NOT_ENROLLED,{fireExperimentExposure:!1});n(!!t.length&&a===ce.VARIATION);const o=t.slice(0,30);i(o),Ee("succeeded",e,t.length)}catch(t){Ee("failed",e)}l(!1)})()}),[_,c,e,I]),(0,o.useEffect)((()=>{c&&p&&!s&&(((e,t,n,a,o)=>{o({type:"sendTrackEvent",data:{action:"exposed",source:ve,actionSubject:"feature",attributes:{flagKey:pe,orgId:e,value:t,cohort:n,source:ve,experimentName:"X-Flow Confluence Nudge to Invite Team",growthInitiative:"virality",ineligibilityReasons:a}}}).fire()})(c,b,h,y,e),!y.length&&r().initializeCompleted()&&r().manuallyLogExperimentExposure(pe))}),[c,b,h,y,p,s,e,,]);return(0,o.useMemo)((,[a,t,s])};var Ie=n(884535),Ce=n(946972),_e=n(39030),Se=n(555687),Te=n(233006),Pe=n(872342),we=n(920839),Ne=n(767001),xe=n(87828);const Re=["data"],Ze=["as","style"];n(296322),n(662541),n(330003);const ke=e=>{let{data:t}=e,n=(0,Pe.Z)(e,Re);const{data:i,overrides:r}=(0,o.useMemo)((,[t]);return o.createElement(xe.Z,(0,a.Z)({maxCount:399,data:i,overrides:r,boundariesElement:"scrollParent",tooltipPosition:"bottom",onMoreClick:,n))};ke.displayName="FlagCompatibleAvatarGroup";const Ae=({data:e})=>{const t=e.length>5,n=e.slice(0,4),i=e.slice(4),r=Fe(i);return{overrides:{Avatar:{render:(e,t)=>t.name===r.name&&t.key===r.key?Oe(e,t,i.length):o.createElement(e,(0,a.Z)({},t))}},data:t?[...n,r]:e}},Fe=e=>({name:e.map((e=>e.name)).join(", "),key:"$$$overflow-user-marker"}),Oe=(e,t,n)=>o.createElement(e,{name:t.name,appearance:t.appearance,size:t.size,borderColor:t.borderColor,stackIndex:0},(e=>o.createElement(De,(0,a.Z)({},e),`+${Math.min(n,99)}`)));Oe.displayName="renderAvatarWithOverflowCount";const De=(0,o.forwardRef)(((e,t)=>{let{as:n="span",style:i}=e,r=(0,Pe.Z)(e,Ze);return o.createElement(n,(0,a.Z)((0,a.Z)({},r),{},{style:(0,a.Z)((0,a.Z)({},i),{},{"--_1dixpwq":(0,we.Z)(`var(--ds-background-neutral, ${J.IR})`),"--_22j13s":(0,we.Z)(`var(--ds-text, ${J.Mx})`)}),ref:t,className:(0,Ne.Z)(["_bfhkjfys _syaz1svx _y3gn1s23",r.className])}))}));const Le=_e.iv`
  font-size: ${Te.$G.h400.size}px;
  display: flex;
  align-items: center;
  justify-content: space-between;
`,Me=(0,Ce.Z)("div",{target:"e1c8aoan0"})(Le,";margin-top:var(--ds-space-150, 12px);margin-left:var(--ds-space-negative-025, -2px);"),$e=(0,Ce.Z)("div",{target:"e1c8aoan1"})({name:"bbnzkl",styles:"margin-top:var(--ds-space-negative-050, -4px);button{height:var(--ds-space-400, 32px);padding:var(--ds-space-050, 4px) var(--ds-space-150, 12px);margin-right:var(--ds-space-050, 4px);}"}),Be=(0,ne.defineMessages)({contextualInviteFlagTitle:{id:"onboarding-editor.nudge.invite.team.flag.title",defaultMessage:"Next: Invite your team from Jira"},contextualInviteFlagContent:{id:"onboarding-editor.nudge.invite.team.flag.content",defaultMessage:"Get everyone on the same page, fast."},contextualInviteFlagAction:{id:"onboarding-editor.nudge.invite.team.flag.action",defaultMessage:"Add your team"}}),Ue=(0,ne.defineMessages)({editorTutorialFlagTitle:{id:"onboarding-editor.tutorial.success.flag.title",defaultMessage:"Page published to your personal space"},editorTutorialFlagContent:{id:"onboarding-editor.tutorial.success.flag.content",defaultMessage:"Congrats on finishing the editor tutorial! {emoji} {br}We’ve published this page to your personal space so you can return to it anytime."},contextualInviteFlagTitle:{id:"onboarding-editor.contextual-invite.title",defaultMessage:"Next step: Share your work"},contextualInviteFlagContent:{id:"onboarding-editor.contextual-invite.content",defaultMessage:"Send an invite to a teammate to start collaborating on your new page."},contextualInviteFlagAction:{id:"onboarding-editor.contextual-invite.action",defaultMessage:"Invite people to Confluence"}}),je="onboarding-editor.tutorial.success.flag",Ve="onboarding.contextual.invite.flag",He="xflow.nudge.invite.team.flag",Ge=({flags:e,showEditorTutorialPublishSuccessFlag:t=!1})=>{const{setOnboardingState:n}=(0,X.Gs)(),i=(0,o.useRef)(!1),r=(0,o.useContext)(ie.F),{openCoreInvites:s}=(0,o.useContext)(ee.l),{fireEditorPublishSuccessFlagViewed:l,fireAddYourTeamPromptClicked:d,fireDismissAddYourTeamClicked:c,fireNudgeToInviteSuccessFlagViewed:u}=(0,Ie.a)(),{isXflowNudgToInviteExperimentEnabled:m,eligibleJiraUsers:p,isLoading:g}=he(),v=t=>{i.current||(r.succeed({name:re.DDC}),i.current=!0),e.hideFlag(t)},f=(0,o.useMemo)"),[t,m]),E=(0,o.useMemo)e),[t,m]);(0,o.useEffect)((()=>{if(g)return;const e=setTimeout}),8e3);return r.start({name:re.DDC}),l(f),b()}),[g]);const b=()=>{n({key:t?G.iq.EDITOR_TUTORIAL_SUCCESS_FLAG_SEEN:G.iq.SUCCESS_FLAG_SEEN,value:"true"})},y={id:je,type:"success-circle",title:o.createElement(ae.Z,(0,a.Z)({},Ue.editorTutorialFlagTitle)),description:o.createElement(ae.Z,(0,a.Z)((0,a.Z)({},Ue.editorTutorialFlagContent),{},{values:{emoji:"🥳",br:o.createElement("br",null)}})),onCje)}},h={id:Ve,type:"custom",customIcon:o.createElement(oe.default,{label:"people-group-icon",primaryColor:`var(--ds-icon-discovery, ${J.Wn})`}),title:o.createElement(ae.Z,(0,a.Z)({},Ue.contextualInviteFlagTitle)),description:o.createElement(ae.Z,(0,a.Z)({},Ue.contextualInviteFlagContent)),actions:[{content:o.createElement(ae.Z,(0,a.Z)({},Ue.contextualInviteFlagAction)),onClick:()=>{null==s||s(te.Lc.ONBOARDING_INVITE_FLAG),v(Ve)}}]};return(0,o.useEffect)((()=>{if(!g)if(t)e.showFlag(y);else if(m){const t=p.map((({id:e,name:t,email:n,avatarUrl:a,nickname:o})=>({id:e,name:t,email:n,avatarUrl:a,publicName:o,type:"user"})));((e,t,n,i,r)=>{i.fireNudgeToInviteSuccessFlagViewed(t.length),e.showFlag({id:He,type:"custom",customIcon:o.createElement(oe.default,{label:"people-group-icon",primaryColor:`var(--ds-icon-discovery, ${J.Wn})`}),title:o.createElement(ae.Z,(0,a.Z)({},Be.contextualInviteFlagTitle)),onCd()},description:o.createElement($e,null,o.createElement(ae.Z,(0,a.Z)({},Be.contextualInviteFlagContent)),o.createElement(Me,null,o.createElement(ke,{data:t.m"}))),boundariesElement:"scrollParent",testId:"test-id-xflow-confluence-nudge-invite-team-spotlight-avatar-group"}),o.createElement(Se.Z,{appearance:"primary",onClick:()=>{null==r||r(te.Lc.XFLOW_NUDGE_TO_INVITE_TEAM_FLAG,{},t),i.fireAddYourTeamPromptClicked(t.length,t.e.id))),n(He)},spacing:"compact",testId:"nudge-invite-team-flag-button"},o.createElement(ae.Z,(0,a.Z)({},Be.contextualInviteFlagAction)))))})})(e,t,v,{fireAddYourTeamPromptClicked:d,fireDismissAddYourTeamClicked:c,fireNudgeToInviteSuccessFlagViewed:u},s)}else e.showFlag(h)}),[g]),null};var We=n(503396);const qe="is-infi-spotlight-seen",Xe=function(){const e="false";try{return localStorage.getItem(qe)||e}catch(t){return e){}}const Qe=({hasSatisfactionSurveys:e,contentId:t})=>{const[i,r]=(0,o.useState)(!1),{data:s,error:l,loading:d}=(0,X.Si)(Object.values(G.iq)),{isExternalCollaborator:c}=(0,Q.Q)(),{isLicensed:u,isLoggedIn:m}=(0,C.D)(),{hasMetPublishNudgeConditions:p}=(0,We.P)(),{setOnboardingState:g}=(0,X.Gs)(),{openCoreInvites:v}=(0,o.useContext)(ee.l),{createAnalyticsEvent:f}=(0,j._)(),[E,b]=(0,o.useState)(!1),{editorOnboardingEligiblity:y,hasUserPublished:h,successFlagCompleted:I,editorTutorialSuccessFlagCompleted:_}=(0,X.Hi)(s),{isOriginalOnboardingTemplate:S,labelsData:T,labelsLoading:P,labelsError:w}=(0,q.g)({contentId:t,skip:!u||!m||c||_}),N=y&&h&&!I&&!l,x=!P&&Boolean(T)&&S&&!_&&!l,{contextualInviteNudgeEligibleTag:R,logExperimentExposure:Z,onboardingState:k,contextualNudgeCohort:A}=(0,Y.O)(),{wasFirstPublishConfettiSeen:F}=k,O=R&&p&&A!==K.H.NOT_ENROLLED,D=O&&A===K.H.EXPERIMENT&&!F;(0,o.useEffect)((()=>{O&&(Z(),D&&((async({resetAfter:e=3e3}={})=>{let t=null;try{t=(await n.e(16830).then(n.bind(n,602788))).default}catch(i){return}if(!t)return;const o={particleCount:120,spread:55,ticks:225,zIndex:2e3,scalar:1.5,startVelocity:100,colors:[J.Wn,J.M5,J.hv,J.rt,J.Z3,J.eE]};t((0,a.Z)((0,a.Z)({},o),{},{origin:{x:1,y:1},angle:120})),t((0,a.Z)((0,a.Z)({},o),{},{origin:{x:0,y:1},angle:60})),e&&setTimet()}),e)})(),g({key:W.A,value:"true"}),ze("true"),setTimeout((()=>{null==v||v(te.Lc.CONTEXTUAL_INVITE_NUDGE,{onModalClosed:()=>{"false"===Xe&&ze("false"),f({type:"sendUIEvent",data:{source:te.Lc.CONTEXTUAL_INVITE_NUDGE,action:"closed",actionSubject:"inviteModal",actionSubjectId:"inviteModalCancelButton"}}).fire()},onInviteCompleted:()=>{f({type:"sendUIEvent",data:{source:te.Lc.CONTEXTUAL_INVITE_NUDGE,action:"completed",actionSubject:"inviteModal",actionSubjectId:"inviteModalInviteButton"}}).fire()},getContextualInviteNudgeExperimentP!0})}),g({key:G.iq.SUCCESS_FLAG_SEEN,value:"true"})}),2e3),b(!0)))}),[O,D,Z,v,g,f]);const L=()=>o.createElement(o.Fragment,null,l&&o.createElement(V.X,{error:l}),w&&!(0,H.T)(w)&&o.createElement(V.X,{error:w}));if((0,o.useEffect)((()=>{c||!N&&!x||r(!0)}),[c,N,x]),P||d||D||E)return null;if(i){const e=x&&!_&&S;return o.createElement(M.xs,{to:[z.Q]},(t=>o.createElement(o.Fragment,null,w&&!(0,H.T)(w)&&o.createElement(V.X,{error:w}),o.createElement(Ge,{flags:t,showEditorTutorialPublishSuccessFlag:e}))))}return e?o.createElement(o.Fragment,null,o.createElement(L,null),o.createElement($,{contentId:t,isFabricPage:!0})):o.createElement(L,null)};var Ke=n(846313),Ye=n(9019);const Je=e=>{const t=(0,o.useContext)(ie.F);return o.createElement(Ke.k,{attribution:Ye.x.CC_ONBOARDING,onEe})}},e.children)};Je.displayName="EditorPublishSuccessFlagErrorBoundary";const et=e=>o.createElement(Je,null,o.createElement(Qe,(0,a.Z)({},e)));et.displayName="EditorPublishSuccessFlag";const tt=({contentId:e,isEditorExpEnabled:t})=>o.createElement(M.xs,{to:[B.K]},(({state:n,resetTrigger:a})=>{const{isSurveyTriggered:i,source:r}=n;return o.createElement(U.Sp,{isGuestSurveyTriggered:i,resetGuestSurveyTrigger:a,source:r},t?o.createElement(et,{contentId:e,hasSatisfactionSurveys:!0}):o.createElement($,{contentId:e,isFabricPage:!0}))}));tt.displayName="SatisfactionSurveys";var nt=n(167347),at=n(894439),ot=n(509145),it=n(173729),rt=n(734233);const st=["loadingPriority"],lt=(0,c.tM)({__loadable_id__:"gAHpp",name:"CommentsSectionLoaderPaint",loading:({handlePageCommentsRender:e})=>e?null:it.X,loader:async()=>(await n.e(64935).then(n.bind(n,886980))).CommentsSection}),dt=(0,c.ZR)({__loadable_id__:"pUcVP",name:"CommentsSectionLoaderAfterPaint",loaull),lotion}),ct={[k.T.PAINT]:lt,[k.T.AFTER_PAINT]:dt},ut=e=>{let{loadingPriority:t}=e,n=(0,Pe.Z)(e,st);const i=ct[t]||dt;return o.createElement(i,(0,a.Z)({},n))};ut.displayName="CommentsSectionLoader";var mt=n(211230),pt=n(54685),gt=n(324773),vt=n(649233);const ft=["as","style"],Et=["isDefaultWidthEnabled"];n(137909),n(593940),n(983237),n(416473),n(104086),n(357290),n(456928),n(354326);const bt=(0,o.forwardRef)(((e,t)=>{let{as:n="div",style:i}=e,r=(0,Pe.Z)(e,ft);const{isDefaultWidthEnabled:s}=r,l=(0,Pe.Z)(r,Et);return o.createElement(n,(0,a.Z)((0,a.Z)({},l),{},{style:i,ref:t,className:(0,Ne.Z)(["",r.isDefaultWidthEnabled&&"_1e0c1txw _4cvr1h6o _2lx21bp4 _p12fukw8 _19pkidpf _2hwx1wug _otyridpf _18u01wug",r.className])}))}));const yt=(0,o.memo)((({contentId:e,classicComments:t,loadingPriority:n,isCollaborativePageCommentsEnabled:a,appearance:i,hasReactions:r})=>{const s=(0,o.useRef)(null),[l]=(0,ot.b)(),d=(0,_.T)("confluence.frontend.powered.by.confluence.mobile"),{error:c}=(0,nt.aM)(r?gt.q:gt.w,{variables:{contentId:e,offset:"",first:at.U,isPoweredByConfluenceMobileEnabled:!!d},fetchPolicy:"cache-and-network",skip:!e});c&&(0,vt.Xb)(c);const{cohort:u}=(0,mt.a)("confluence.frontend.delay.page.comments.render",["delay-render","not-enrolled","render"],"not-enrolled",!0),m=Boolean("delay-render"===u),{getQueryParams:p}=(0,o.useContext)(rt.M),g=(0,o.useContext)(ie.F),{focusedCommentId:v,replyToComment:f,showCommentArea:E,editComment:b,commentId:y}=p(),h=Boolean(v||f||E||"true"===b&&y),[I,C]=(0,o.useState)(!1),[S,T]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(h||!m||m&&I)&&g.start({name:re.lMm,attributes:{isConditionalRenderingOn:m,isFocusedComment:h,editor:"FABRIC",contentId:e}})}),[g,e,h,m,I]),(0,o.useEffect)((()=>{const e=new IntersectionObserver((([e])=>{e.isIntersecting&&C(!0)}));return m&&!I&&!h&&l.isContentReady&&s.current?e.observe(s.current):Ct()}}),[m,h,l.isContentReady,s,I]);const P='"default"'===i&&a,w=()=>l.isContentReady?o.createElement(it.X,{showPlaceholder:!0}):null;return m?h?o.createElement(ut,{contentId:e,classicComments:t,loadingPriority:n||k.T.PAINT}):o.createElement(bt,{"data-testid":P?"page-comment-wrapper-default":"page-comment-wrapper",isDefaultWidthEnabled:P,ref:s,className:"page-comment-wrapper"},I?o.createElement(o.Fragment,null,!S&&w(),o.createElement(ut,{contentId:e,classicComments:t,handlePageCommentsRender:()=>T(!0),loadingPriority:n||k.T.PAINT})):w()):o.createElement(bt,{"data-testid":P?"page-comment-wrapper-default":"page-comment-wrapper",isDefaultWidthEnabled:P,ref:s,className:"page-comment-wrapper"},o.createElement(ut,{contentId:e,classicComments:t,loadingPriority:h?k.T.PAINT:n||k.T.PAINT}))})),ht=(0,pt.P)({attribution:Ye.x.COLLABORATION})(yt);var It=n(878196),Ct=n(298100),_t=n(370049),St=n(104270),Tt=n(976583),Pt=n(762445),wt=n(526771);const Nt=(0,o.memo)((({contentId:e,loadingPriority:t})=>{var n;const{editCommentId:a,replyToCommentId:i}=(0,Ct.fQ)(),{getQueryParams:r}=(0,o.useContext)(rt.M),{cohort:s}=(0,mt.a)(_t.F,["annotation-provider","not-enrolled","query-selectors"],"not-enrolled",!0),l="annotation-provider"===s,d=(0,wt.y)(_t.z),{focusedCommentId:c}=r(),u=c||void 0,{error:m}=(0,nt.aM)(Pt.n,{variables:{pageId:e},fetchPolicy:"cache-and-network",skip:!e});m&&(0,vt.Xb)(m);const{data:p,error:g}=(0,nt.aM)(Tt.O,{variables:{commentId:u,contentId:e},fetchPolicy:"cache-first",skip:!(e&&u)});g&&(0,H.T)(g)&&(0,vt.Xb)(g);const v=Boolean(null==p||null===(n=p.comments)||void 0===n||null===(n=n.nodes)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.isInlineComment),{firstHighlightClicked:f,shouldDisplaySidebar:E,toggleSidebar:b}=(0,o.useContext)(It.s);return(0,o.useEffect)((()=>{(window.__SSR_RENDERED__&&v||v||i||a&&E||f&&E)&&b(!0)}),[d,v,i,a,f,b,E]),o.createElement(o.Fragment,null,!1,E&&!l&&o.createElement(St.K,{pageId:e,isFabricPage:!0,loadingPriority:t||k.T.PAINT,focusedCommentId:u}))}));var xt=n(482916),Rt=n(531934),Zt=n(591084),kt=n(819959),At=n(110718),Ft=n(492311);const Ot=["as","style"],Dt=["isSubTypeEmbed","isDefaultWidthEnabled"];n(985037),n(117027),n(971479),n(348716),n(137909),n(593940),n(983237),n(416473),n(423722),n(104086),n(977703),n(938420),n(156704),n(341645),n(986730),n(274528),n(1970),n(862528),n(193404),n(175795),n(520700),n(558491),n(740691),n(362604),n(841468),n(354326);const Lt=(0,o.forwardRef)(((e,t)=>{let{as:n="div",style:i}=e,r=(0,Pe.Z)(e,Ot);const{isSubTypeEmbed:s,isDefaultWidthEnabled:l}=r,d=(0,Pe.Z)(r,Dt);return o.createElement(n,(0,a.Z)((0,a.Z)({},d),{},{style:(0,a.Z)((0,a.Z)({},i),{},{"--_4npb0t":(0,we.Z)("var(--ds-space-250, 20px)"),"--_1khsbgs":(0,we.Z)(`var(--ds-border, ${J.YS})`)}),ref:t,className:(0,Ne.Z)(["_1e0c1txw _4cvr1y6m _1bah1yb4 _11rm1hrf _n7zlf0bt _1bsb1osq _1p4q1ssb _1l0tx19p _3u9vusic _1aor1o8l",r.isSubTypeEmbed?"_1yt41x47":"_1yt4x876",r.isDefaultWidthEnabled?"_1reo15vq _18m915vq":"_1reoewfl _18m9ewfl",r.isDefaultWidthEnabled?"_p12fukw8":"_p12fn7od",r.isDefaultWidthEnabled?"_19pkidpf _2hwx1wug _otyridpf _18u01wug":"_19pkn7od _2hwxn7od _otyrn7od _18u0n7od",r.className])}))}));const Mt=({hasReactions:e,appearance:t,isCollaborativePageCommentsEnabled:n,contentType:a,contentId:i,spaceId:r,contentSubType:s})=>{const[l]=(0,ot.b)(),{focusedPageReactionsId:d}=(0,Zt.b)(),{isReactionsEnabled:c}=(0,o.useContext)(x.j),u='"default"'===t&&n,m=(0,_.T)("confluence.frontend.link-in-tree")&&"embed"===s;return null!=l&&l.isContentReady?o.createElement(Lt,{id:"view-page-reactions-container","data-test-id":"view-page-reactions-container",isDefaultWidthEnabled:u,isSubTypeEmbed:m},e&&c&&(()=>{if(a&&r){const e=Boolean(d)?kt.X:kt.M;return o.createElement(e,{contentId:i,location:a,containerId:r,containerType:At.d.SPACE,contentSubType:s})}return o.createElement(Ft.n,null)})()):null},$t=(0,c.tM)({__loadable_id__:"C_BST",name:"EmbedSubTypeComponent",lonent}),Bt=e=>(0,s.O)()?e?k.T.AFTER_PAINT:k.T.LAZY:null,Ut=({spaceKey:e,contentId:t,contentHeader:n,contentScreenStyles:i,classicComments:s,eventHandlers:c,titleAndByLineOptions:k,hasPageComments:M=!0,hasSatisfactionSurveys:$=!0,hasHighlightActions:B=!0,hasInlineComments:U=!0,hasInlineActions:j=!0,hasLabels:V=!0,hasReactions:H=!0,hasEOPRecs:G=!0,hasQuickReload:W=!0,appearance:q,children:X,setHasCoverPicture:z})=>{const{featureFlagClient:Q,isAdminHubAIEnabled:K,locale:Y}=(0,C.D)(),J=(0,y.k)(),ee=(0,_.T)(h.q),te=(0,S.C)(Q),[ne,ae]=(0,o.useState)(void 0),oe=(0,_.T)("confluence.frontend.collaborative.page.comments"),ie=(0,_.T)("confluence.frontend.link-in-tree"),re=(0,_.T)("confluence.frontend.custom-sites.page-header-and-title"),se=(0,_.T)("confluence.frontend.reading-aids")&&K&&Y.startsWith("en")&&r().getExperimentValue("cc_reading_aids_auto-highlight_acronyms","isEnabled",!1),le=(0,_.T)("confluence.frontend.editor.synchronous.comments.flag");r().getExperimentValue("cc_stratified_sampling_exp_aa","cohort","not-controlled",{fireExperimentExposure:!0});let de=n;const[ce,{setIsLive:ue}]=(0,F.d)();(0,o.useEffect)(!1)}),[]),(0,o.useEffe 0)}),[t]),ce.isLive&&(ee||ne)&&(de=void 0);cons!0)};return o.createElement(o.Fragment,null,o.createElement(A.wX,null,o.createElement(N.P,null,o.createElement(D.I,null,o.createElement(xt.e,{spaceKey:e,contentId:t,stickyHeader:de,contentScreenStyles:i},(({isThemed:i,contentQueryData:r,contentQueryError:y})=>{var h,C,_,S,N,A,F,D;const Q=null==r||null===(h=r.content)||void 0===h||null===(h=h.nodes)||void 0===h||null===(h=h[0])||void 0===h?void 0:h.type,K=null==r||null===(C=r.content)||void 0===C||null===(C=C.nodes)||void 0===C||null===(C=C[0])||void 0===C?void 0:C.subType,Y=null==r||null===(_=r.content)||void 0===_||null===(_=_.nodes)||void 0===_||null===(_=_[0])||void 0===_||null===(_=_.space)||void 0===_?void 0:_.id,ae=ie&&"embed"===K,de=null==r||null===(S=r.content)||void 0===S||null===(S=S.nodes)||void 0===S||null===(S=S[0])||void 0===S||null===(S=S.metadata)||void 0===S?void 0:S.lastModifiedDate,ce=(null==r||null===(N=r.content)||void 0===N||null===(N=N.nodes)||void 0===N||null===(N=N[0])||void 0===N||null===(N=N.appearancePublished)||void 0===N||null===(N=N.nodes)||void 0===N||null===(N=N[0])||void 0===N?void 0:N.value)||'"default"',{coverPicture:pe,contentAppearance:ge,hasCoverPicture:ve}=(0,g.N0)(r),{queryDataId:fe,editorProperty:Ee,fabricEditorSupported:be}=(0,R.T)(null==r||null===(A=r.content)||void 0===A||null===(A=A.nodes)||void 0===A?void 0:A[0]),ye=ae?null==r||null===(F=r.content)||void 0===F||null===(F=F.nodes)||void 0===F||null===(F=F[0])||void 0===F||null===(F=F.metadata.frontend)||void 0===F?void 0:F.embedUrl:void 0,he=(null==r||null===(D=r.content)||void 0===D||null===(D=D.nodes)||void 0===D||null===(D=D[0])||void 0===D?void 0:D.subType)===I.C;if(J){const n=he&&(ee||!ee&&!1!==ne);if((ee||!1!==ne)&&ue(he),n)return o.createElement(b,{contentId:t,spaceKey:e,editPermission:ne,setEditPermission:me})}return re&&z&&z(ve),o.createElement(o.Fragment,null,o.createElement(E.k,{key:`ScrollToPageStart-${t}`,isSmooth:!1}),i&&n,o.createElement(u,{type:m.t.HEADER}),ve&&o.createElement(v.t,{contentId:t,isPagePreview:!1,coverPicture:pe,contentAppearance:ge,isCustomSitesPageTitleFFOn:re,isSpaceOverview:!1}),o.createElement(Z.jD,{editorProperty:Ee,fabricEditorSupported:be,queryDataId:fe},o.createElement(L.P,(0,a.Z)({banner:o.createElement(l.Y$,{contentId:t}),contentId:t,spaceKey:e||"",isSubTypeEmbed:ae,hasCoverPicture:ve},k))),ae&&o.createElement($t,{embedUrl:null!=ye?ye:void 0}),!ae&&o.createElement(Rt.b,{hasInlineComments:U,contentId:t,data:r,error:y,spaceKey:e,hasHighlightActions:B,eventHandlerOverrides:c,appearance:q,hasInlineActions:j,lastModifiedDate:de||void 0}),U&&o.createElement(P,{pageId:t}),se&&o.createElement(O.p,{contentId:t,contentType:Q}),V&&o.createElement(w.t,{pageWidthType:ce,contentId:t,contentType:Q,spaceKey:e,spaceId:Y,contentSubType:K}),G&&"page"==Q&&!ae&&o.createElement(T.VE,{entityType:Q||"",entityId:t,spaceKey:e||"",pageWidthType:ce}),o.createElement(d.A,{contentId:t}),H&&o.createElement(x.I,{contentId:t},o.createElement(Mt,{hasReactions:H,contentId:t,contentType:Q,spaceId:Y,appearance:ce,isCollaborativePageCommentsEnabled:oe,contentSubType:K})),M&&o.createElement(o.Fragment,null,o.createElement(ht,{key:t,contentId:t,loadingPriority:Bt(M),classicComments:s,appearance:ce,hasReactions:H,isCollaborativePageCommentsEnabled:oe})),o.createElement(u,{type:m.t.FOOTER}),W&&o.createElement(f.eg,{contentId:t,contentType:Q,lastPollTime:Date.now(),editorSynchronousCommentsEnabled:le}),$&&o.createElement(tt,{contentId:t,isEditorExpEnabled:te}),"page"===Q&&o.createElement(p.o,{contentId:t}),X)}))))),U&&o.createElement(Nt,{key:t,loadingPriority:Bt(U),contentId:t}))};Ut.displayName="ViewPageCommon"},327027:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(840506);function o(){const[e,t]=(0,a.useState)(!1),n=(0,a.useRef)({onFocus:()=>t(!0),onBlur:()=>t(!1)});return(0,a.useEffe(!1)),[]),{isFocused:e,bindFocus:n.current}}},505547:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=(a=n(840506))&&a.__esModule?a:{default:a},i=n(340531);const r=e=>o.default.createElement(i.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path d="M11.793 5.793a.999.999 0 000 1.414L15.586 11H6a1 1 0 000 2h9.586l-3.793 3.793a.999.999 0 000 1.414c.39.39 1.024.39 1.415 0l5.499-5.5a.997.997 0 00.293-.679v-.057a.996.996 0 00-.293-.678l-5.499-5.5a1 1 0 00-1.415 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e));r.displayName="ArrowRightIcon";var s=r;t.default=s},106506:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o=(a=n(840506))&&a.__esModule?a:{default:a},i=n(340531);con,e));r.displayName="PeopleGroupIcon";var s=r;t.default=s},250707:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(615919),o=n(872342),i=n(840506),r=n(39030),s=n(483039),l=n(319754),d=n(24359),c=n(370679);const u=["children","cssFn","description","iconAfter","iconBefore","isDisabled","isSelected","onClick","testId","overrides","onMouseDown","shouldTitleWrap","shouldDescriptionWrap","className"],m=(0,i.memo)((0,i.forwardRef)(((e,t)=>{const{children:n,cssFn:i=l.Z,description:m,iconAfter:p,iconBefore:g,isDisabled:v=!1,isSelected:f=!1,onClick:E,testId:b,overrides:y,onMouseDown:h,shouldTitleWrap:I,shouldDescriptionWrap:C,className:_}=e,S=(0,o.Z)(e,u),T=h;return n?((0,s.o)("platform-pkg","cssFn",i!==l.Z,""),(0,r.tZ)(c.Z,(0,a.Z)((0,a.Z)({className:(0,d.e)("platform.design-system-team.unsafe-overrides-killswitch_c8j9m")?void 0:_},S),{},{overrides:y,iconBefore:g,iconAfter:p,isDisabled:v,isSelected:f,description:m,title:n,shouldTitleWrap:I,shouldDescriptionWrap:C,css:i({isSelected:f,isDisabled:v}),testId:b&&`${b}--primitive`}),(({children:e,className:n})=>(0,r.tZ)("button",(0,a.Z)((0,a.Z)({"data-testid":b},S),{},{className:n,ref:t,disabled:v,onClick:E,onMouseDown:T,type:"button"}),e)))):null})))},497507:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(615919),o=n(872342),i=n(840506),r=n(39030),s=n(483039),l=n(319754),d=n(24359),c=n(370679);const u=["component","cssFn","isDisabled","isSelected","onClick","testId","children","description","iconAfter","iconBefore","overrides","onMouseDown","shouldTitleWrap","shouldDescriptionWrap","classNamet()},p=(0,i.memo)((0,i.forwardRef)(((e,t)=>{let{component:n,cssFn:i=l.Z,isDisabled:p=!1,isSelected:g=!1,onClick:v,testId:f,children:E,description:b,iconAfter:y,iconBefore:h,overrides:I,onMouseDown:C,shouldTitleWrap:_,shouldDescriptionWrap:S,className:T}=e,P=(0,o.Z)(e,u);const w=C;return n?((0,s.o)("platform-pkg","cssFn",i!==l.Z,""),(0,r.tZ)(c.Z,(0,a.Z)((0,a.Z)({className:(0,d.e)("platform.design-system-team.unsafe-overrides-killswitch_c8j9m")?void 0:T},P),{},{overrides:I,description:b,iconAfter:y,title:E,iconBefore:h,isSelected:g,isDisabled:p,shouldTitleWrap:_,shouldDescriptionWrap:S,css:(0,r.iv)(i({isDisabled:p,isSelected:g})),testId:f&&`${f}--primitive`}),(({children:e,className:o})=>(0,r.tZ)(n,(0,a.Z)((0,a.Z)({"data-testid":f},P),{},{className:o,ref:t,draggable:!1,onDragStart:m,onMouseDown:p?m:w,onClick:p?m:v,tabIndex:p?-1:void 0,"aria-disabled":p}),e)))):null})))},942342:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(615919),o=n(872342),i=n(840506),r=n(39030),s=n(483039),l=n(319754),d=n(24359),c=n(16728),u=n(233006);const m=["children","testId","headingLevel","id","cssFn","className"],p=u.$G.h100.lineHeight,g=u.$G.h100.size,v=(0,r.iv)({color:`var(--ds-text-subtle, ${c.hH})`,fontSize:g,fontWeight:"var(--ds-font-weight-bold, 700)",lineHeight:p/g,paddingBlock:"var(--ds-space-0, 0px)",paddingInline:"var(--ds-space-200, 16px)",textTransform:"uppercase"}),f=(0,i.memo)((e=>{let{children:t,testId:n,headingLevel:i=2,id:c,cssFn:u=l.Z,className:p}=e,g=(0,o.Z)(e,m);(0,s.o)("platform-pkg","cssFn",u!==l.Z,"");const f=(0,d.e)("platform.design-system-team.unsafe-overrides-killswitch_c8j9m")?void 0:(0,r.iv)(u(void 0));return(0,r.tZ)("div",(0,a.Z)({css:[v,f],role:"heading","aria-level":i,"data-testid":n,"data-ds--menu--heading-item":!0,id:c,className:(0,d.e)("platform.design-system-team.unsafe-overrides-killswitch_c8j9m")?void 0:p},g),t)}))},117e3:(e,t,n)=>{n.d()=>w});var a=n(615919),o=n(872342),i=n(840506),r=n(39030),s=n(483039),l=n(24359),d=n(16728),c=n(2142),u=n(233006),m=n(942342);const p=["children","overrides","title","testId","isScrollable","hasSeparator","id","isList","className"],g=(0,c.ww)(),v=2.5*g,f=.75*g,E=v+(u.$G.h100.lineHeight-g)-3,b=f+3,y=.75*g,h="--ds-menu-seperator-color",I=(0,r.iv)({"&::before, &::after":{display:"block",height:y,content:'""'},"& [data-ds--menu--heading-item]":{marginBlockEnd:f,marginBlockStart:v,"&:first-of-type":{marginBlockStart:v-y}},"& [data-ds--menu--skeleton-heading-item]":{marginBlockEnd:b,marginBlockStart:E,"&:first-of-type":{marginBlockStart:E-y}},"&:focus":{outlineOffset:-1}}),C=(0,r.iv)({flexShrink:1,overflow:"auto"}),_=(0,r.iv)({flexShrink:0}),S=(0,r.iv)({borderBlockStart:`2px solid var(${h}, var(--ds-border, ${d.kd}))`}),T=(0,r.iv)({borderBlockStart:`1px solid var(${h}, var(--ds-border, ${d.kd}))`}),P=(0,r.iv)({"[data-section] + &":{marginBlockStart:-6}}),w=(0,i.forwardRef)(((e,t)=>{let{children:n,overrides:d,title:c,testId:u,isScrollable:g,hasSeparator:v,id:f,isList:E=!1,className:b}=e,y=(0,o.Z)(e,p);(0,s.o)("platform-pkg","overrides",void 0!==d,"");const h=(0,l.e)("platform.design-system-team.unsafe-overrides-killswitch_c8j9m")?void 0:d&&d.HeadingItem&&d.HeadingItem.cssFn,w=E?(0,r.tZ)("ul",{style:{margin:0,padding:0}},i.Children.map(i.Children.toArray(n),((e,t)=>(0,r.tZ)("li",{style:{listStyleType:"none",margin:0,padding:0},key:t},e)))):n,N=void 0!==c?(0,r.tZ)(i.Fragment,null,(0,r.tZ)(m.Z,{cssFn:h,testId:u&&`${u}--heading`,"aria-hidden":!0},c),w):(0,r.tZ)(i.Fragment,null,w);return(0,r.tZ)("div",(0,a.Z)((0,a.Z)({},y),{},{className:(0,l.e)("platform.design-system-team.unsafe-overrides-killswitch_c8j9m")?void 0:b,id:f,css:[I,g?C:_,v?(0,l.e)("platform.design-system-team.section-1px-seperator-borders")?T:S:P],"aria-label":c,"data-testid":u,role:"group","data-section":!0,ref:t}),N)}))}}]);
//# sourceMappingURL=7881.0rwGNAvIpZ.js.map