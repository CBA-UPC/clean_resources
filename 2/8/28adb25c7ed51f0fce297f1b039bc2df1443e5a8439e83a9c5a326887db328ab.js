"use strict";(self.webpackChunkWPS_Drive=self.webpackChunkWPS_Drive||[]).push([[352],{35728:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var i,n=a(20144),s=a(31240),o=a(37311),r=a(2406),l=a.n(r),p=a(63364),c=a.n(p),u=a(35034),d=a.n(u),g=a(30381),v=a.n(g),m=a(95272),f=a(47189),y=a(52985),h=a.p+"s1/static/images/f5cc22908cf154eb20d3.svg",_=a.p+"s1/static/images/a20f0332fb14933f9693.svg",x=a(18487),b=a(62414),A=a(45821),k=a(82492),C=a.n(k),w=(a(27361),a(69579),a(7562),a(52353),a(16548),a(73955),a(30420),a(19963),a(70364),a(423),a(65297),a(3676),a(23279)),D=a.n(w),G=a(23493),L=a.n(G),I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"k-revert-groupApply"},[a("div",{staticClass:"k-del-groupApply-content"},[t._v("\n    "+t._s(t.lang_txt22)+"「"+t._s(t.groupName)+"」"+t._s(t.lang_txt20)+"\n  ")]),t._v(" "),a("div",{staticClass:"footer-btn-grp"},[a("KButton",{staticClass:"cancel",on:{click:t.close}},[t._v(t._s(t.lang_txt21))]),t._v(" "),a("KButton",{staticClass:"submit",attrs:{type:"primary"},on:{cle)}}},[t._v("\n      "+t._s(t.lang_txt22)+"\n    ")])],1)])},staticRenderFns:[],name:"KDialogRevertGroupApply",components:{KButton:b.Z},props:{groupName:{type:String,default:""},handleRevertCb:{type:Function,default:function(){}}},data:function(){return{lang_txt20:(0,A.t)("logic.GroupApplyList.txt20"),lang_txt21:(0,A.t)("logic.GroupApplyList.txt21"),lang_txt22:(0,A.t)("logic.GroupApplyList.txt22")}},methods:{close:function(){this.$emit("close")}}},N=(0,x.Z)({entry:I,pages:[{title:(0,A.t)("logic.GroupApplyList.txt19"),className:"k-dialog-revert-groupApply",width:"450px",body:I,footer:null,closeOnClickModal:!1,beforeVisiable:(i=(0,o.Z)(l().mark((function t(){var e,a=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.abrupt("return",C()({className:"".concat(e.classNames," k-dialog-revert-groupApply")},e));case 2:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})}]}),S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"k-detail-groupApply"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"k-detail-groupApply-loading"},[a("KLoading")],1),t._v(" "),a("div",{staticClass:"k-detail-groupApply-content",style:{visibility:t.loading?"hidden":"visible"}},[a("div",{staticClass:"k-detail-groupApply-content-reason"},[a("div",{staticClass:"title"},[t._v(t._s(t.lang_txt13))]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.detailInfo.msg))])]),t._v(" "),a("div",{staticClass:"k-detail-groupApply-content-people"},[a("div",{staticClass:"title"},[t._v(t._s(t.lang_txt14))]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.lang_txt15)+t._s(t.detailInfo.member_count)+"人")])]),t._v(" "),a("div",{staticClass:"k-detail-groupApply-content-opinion"},[a("div",{staticClass:"title"},[t._v(t._s(t.lang_txt16))]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.detailInfo.approve_msg))])]),t._v(" "),a("div",{staticClass:"k-detail-groupApply-content-time"},[a("div",{staticClass:"title"},[t._v(t._s(t.lang_txt17))]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.time))])])]),t._v(" "),a("div",{staticClass:"footer-btn-grp",style:{visibility:t.loading?"hidden":"visible"}},[a("KButton",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.close}},[t._v("\n      "+t._s(t.lang_txt18)+"\n    ")])],1)])},staticRenderFns:[],name:"KDialogRevertGroupApply",components:{KLoading:m.Z,KButton:b.Z},props:{companyId:{type:[String,Number],default:0,require:!0},applyId:{type:Number,default:0,require:!0}},data:function(){return{lang_txt13:(0,A.t)("logic.GroupApplyList.txt13"),lang_txt14:(0,A.t)("logic.GroupApplyList.txt14"),lang_txt15:(0,A.t)("logic.GroupApplyList.txt15"),lang_txt16:(0,A.t)("logic.GroupApplyList.txt16"),lang_txt17:(0,A.t)("logic.GroupApplyList.txt17"),lang_txt18:(0,A.t)("logic.GroupApplyList.txt18"),loading:!0,detailInfo:{}}},computed:{time:function(){return v()(1e3*this.detailInfo.approve_time).format("YYYY-MM-DD HH:mm:ss")}},moil()},methods:{se")},getGroupApplyDetail:function(){var t=this;return(0,o.Z)(l().mark((function e(){var a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={cid:t.companyId,applyId:t.applyId},e.next=4,(0,f.p$r)(a);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return i=e.t0,t.detailInfo=i,t.loading=!1,e.abrupt("return",i);case 13:e.prev=13,e.t1=e.catch(0),console.info("getGroupApplyDetail：",e.t1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()}}},E=(0,x.Z)({entry:S,pages:[{title:(0,A.t)("logic.GroupApplyList.txt12"),className:"k-dialog-detail-groupApply",width:"450px",body:S,footer:null,closeOnClickModal:!1,beforeVisiable:function(){var t=(0,o.Z)(l().mark((function t(){var e,a=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.abrupt("return",C()({className:"".concat(e.classNames," k-dialog-detail-groupApply")},e));case 2:case"end":return t.stop()}}),t)})))ments)}}()}]}),P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"k-groupApply-list-empty"},[a("div",{staticClass:"empty-img",style:{backgroundImage:"url("+t.groupApplyEmptyIcon+")"}}),t._v(" "),a("span",{staticClass:"empty-desc"},[t._v("\n    "+t._s(t.emptyDesc)+"\n  ")])])},staticRenderFns:[],name:"KEmpty",props:{groupApplyEmptyIcon:{type:String},emptyDesc:{type:String}}},Z={process:(0,A.t)("logic.GroupApplyList.txt23"),accepted:(0,A.t)("logic.GroupApplyList.txt24"),rejected:(0,A.t)("logic.GroupApplyList.txt25"),deleted:(0,A.t)("logic.GroupApplyList.txt26"),done:(0,A.t)("logic.GroupApplyList.txt27")},M=function(t){return Z[t]},K=function(){var t=(0,o.Z)(l().mark((function t(e){var a,i,n,s,o,r,p,c,u,d,g,v,m,f,y,h,_,x=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=x.length>1&&void 0!==x[1]?x[1]:{},!e||!e.visible){t.next=19;break}return i=a.event,n=a.getPagePosition,s=void 0===n?function(){}:n,o=e.$refs.dialog&&e.$refs.dialog.$refs.dialog,p=(r=o||{}).clientWidth,c=void 0===p?0:p,u=r.clientHeight,d=void 0===u?0:u,i||(o.style.display="none"),t.prev=6,t.next=9,s();case 9:(g=t.sent).width&&(v=g.width,m=g.left,f=g.scale,h=(v/(y=void 0===f?1:f)-c)/2,_=parseInt(h-m>=0?m/y:0),o.parentNode.style.left="-".concat(_,"px"),o.style.top=d>g.clientHeight?"".concat((d-g.clientHeight)/d*100+50,"%"):"50%"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0);case 16:return t.prev=16,o&&(o.parentNode.style.display="block",o.style.display="block"),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[6,13,16,19]])})));return function(e){return t.apply(this,arguments)}}(),R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"k-groupApply-list",class:{"is-dialog":t.isDialog}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showHeader,expression:"showHeader"}],staticClass:"k-groupApply-list-header"},[t._v("\n    "+t._s(t.lang_txt0)+"\n  ")]),t._v(" "),a("div",{staticClass:"k-groupApply-list-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"k-groupApply-list-loading"},[a("KLoading")],1),t._v(" "),t.applyList.length?a("div",{staticClass:"k-groupApply-list-detail",style:{visibility:t.loading?"hidden":"visible"}},[a("ElTable",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.getGroupApplyList,expression:"getGroupApplyList"}],staticClass:"table-container",style:{width:"100%"},attrs:{data:t.applyListply_id},height:"100%"}},t._l(t.tableRow,(function(e,i){return a("ElTableColumn",{key:i,attrs:{prop:e.name,label:e.label,minWidth:e.minWidth,width:e.width},scopedSlots:t._u([{key:"default",fn:function(i){var n=i.row;return["group_name"===e.name?a("span",{class:e.name},[t.isDialog?t._e():a("div",{staticClass:"head-sculpture",style:{backgroundImage:"url("+t.groupDefaultIcon+")"}}),t._v(" "),a("span",{attrs:{title:n[e.name]}},[t._v(t._s(n[e.name]))])]):"approve_status"===e.name?a("span",{class:n[e.name]},[t._v("\n              "+t._s(t.getStatusName(n[e.name]))+"\n            ")]):"ctime"===e.name?a("span",{class:e.name},[t._v("\n              "+t._s(t.moment(1e3*n[e.name]).format("YYYY-MM-DD HH:mm:ss"))+"\n            ")]):"approver"===e.name?a("GroupApprovedBy",{attrs:{teamMembers:n[e.name],limit:4,theme:"tight"}}):"operation"===e.name?a("span",{staticClass:"operation-list"},t._l(t.getOperation(n.approve_status),(function(e,i){return a("span",{key:i,staticClass:"operation",class:e.value,on.fn(n)}}},[t._v("\n                "+t._s(e.name)+"\n              ")])})),0):a("span",[t._v(t._s(n[e.name]))])]}}],null,!0)})})),1)],1):a("Empty",{attrs:{groupApplyEmptyIcon:t.groupApplyEmptyIcon,emptyDesc:t.lang_txt1}})],1)])},staticRenderFns:[],name:"KGroupApplyList",components:{KLoading:m.Z,ElTable:c(),ElTableColumn:d(),GroupApprovedBy:y.Z,Empty:P},props:{companyId:{type:[String,Number],default:0,require:!0},source:{type:String},getPagePosition:{type:Function,default:function(){}},showHeader:{type:Boolean,default:!0},isDialog:{type:Boolean,default:!1},hooks:{beforeSubDialogShow:{type:Function,default:function(){}},afterSubDialogClose:{type:Function,default:function(){}}}},data:function(){return{lang_txt0:(0,A.t)("logic.GroupApplyList.txt0"),lang_txt1:(0,A.t)("logic.GroupApplyList.txt1"),loading:!0,isDone:!0,moment:v(),getStatusName:M,groupApplyEmptyIcon:h,groupDefaultIcon:_,applyList:[],offset:0,resizeCallback:null,curDialog:null,tableRow:[{label:this.isDialog?(0,A.t)("logic.GroupApplyList.txt28"):(0,A.t)("logic.GroupApplyList.txt2"),name:"group_name",minWidth:this.isDialog?"140px":"30%",width:this.isDialog?"140px":""},{label:(0,A.t)("logic.GroupApplyList.txt3"),name:"ctime",minWidth:this.isDialog?"168px":"20%",width:this.isDialog?"168px":""},{label:(0,A.t)("logic.GroupApplyList.txt4"),name:"approve_status",minWidth:this.isDialog?"78px":"10%",width:this.isDialog?"78px":""},{label:(0,A.t)("logic.GroupApplyList.txt5"),name:"approver",minWidth:this.isDialog?"126px":"20%",width:this.isDialog?"126px":""},{label:(0,A.t)("logic.GroupApplyList.txt6"),name:"operation",minWidth:this.isDialog?"72px":"20%",width:this.isDialog?"72px":""}],OPERATION_MAPS:{process:[{name:(0,A.t)("logic.GroupApplyList.txt7"),value:"revert",fn:this.handleRevertGroupApply}],rejected:[{name:(0,A.t)("logic.GroupApplyList.txt8"),value:"detail",fn:this.handleGroupApplyDetail},{name:(0,A.t)("logic.GroupApplyList.txt9"),value:"delete",fn:this.handleDelGroupApply}]}}},computeource)}},mounted:function(){var t=this;return(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getGroupApplyList();case 2:t.isPC&&(t.resizeCallback=window.addEventListener("resize",D()((function(e){var a={event:e,getPagePosition:t.getPagePosition};t.curDialog&&K(t.curDialog,a)}),10)));case 3:case"end":return e.stop()}}),e)})))()},delback)},methods:{getOpAPS[t]},updataGroupApist(t)},getGroupApplyList:function(t){var e=this;return(0,o.Z)(l().mark((function a(){var i,n,o,r,p,c;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.isDone){a.next=2;break}return a.abrupt("return");case 2:return i=30,n=0===t,e.isDone=!1,a.prev=5,o={cid:e.companyId,limit:i,offset:void 0!==t?t:e.offset},a.next=9,(0,f.kuJ)(o);case 9:if(a.t0=a.sent,a.t0){a.next=12;break}a.t0={};case 12:return r=a.t0,p=r.apply_list||[],c=p.length>0,n?(e.offset=t,e.applyList=p):e.applyList=[].concat((0,s.Z)(e.applyList),(0,s.Z)(p)),c&&(e.offset=e.offset+i),e.isDone=!0,e.loading=!1,a.abrupt("return",r);case 22:a.prev=22,a.t1=a.catch(5),e.loading=!1,e.isDone=!0,console.info("getGroupApplyList：",a.t1);case 27:case"end":return a.stop()}}),a,null,[[5,22]])})))()},handleRevertGroupApply:function(){var t=arguments,e=this;return(0,o.Z)(l().mark((function a(){var i,n,s,r,p,c,u,d;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:{},p=function(){var t=(0,o.Z)(l().mark((function t(a){var i,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={cid:e.companyId,applyId:r.apply_id},t.next=4,(0,f.amf)(i);case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0={};case 7:return n=t.t0,e.updataGroupApplyList(0),e.$message.success((0,A.t)("logic.GroupApplyList.txt10")),a(),t.abrupt("return",n);case 14:t.prev=14,t.t1=t.catch(0),console.info("handleRevertGroupApply：",t.t1);case 17:case"end":return t.stop()}}),t,null,[[0,14]])arguments)}}(),(null===(i=e.hooks)||void 0===i?void 0:i.beforeSubDialogShow)&&(null===(n=e.hooks)||void 0===n||n.beforeSubDialogShow()),c=(null===(s=e.hooks)||void 0===s?void 0:s.afterSubDialogClose)||function(){},u=e.isDialog?c:function(){},d=e.isDialog?c:function(){},a.next=8,N.show({handleRevertCb:p,groupName:r.group_name,classNames:e.isPC?"dialog-hidden":""},u,d);case 8:e.curDialog=a.sent,e.isPC&&e.curDialog.$nextTick((function(){K(e.curDialog,{getPagePosition:e.getPagePosition})}));case 10:case"end":return a.stop()}}),a)})))()},handleDelGroupApply:function(t){var e=this;return(0,o.Z)(l().mark((function a(){var i,n;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i={cid:e.companyId,applyId:t.apply_id},a.next=4,(0,f.DSd)(i);case 4:if(a.t0=a.sent,a.t0){a.next=7;break}a.t0={};case 7:return n=a.t0,e.updataGroupApplyList(0),e.$message.success((0,A.t)("logic.GroupApplyList.txt10")),a.abrupt("return",n);case 13:a.prev=13,a.t1=a.catch(0),e.$message.success((0,A.t)("logic.GroupApplyList.txt11"));case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},handleGroupApplyDetail:function(){var t=arguments,e=this;return(0,o.Z)(l().mark((function a(){var i,n,s,o,r,p,c;return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=t.length>0&&void 0!==t[0]?t[0]:{},(null===(i=e.hooks)||void 0===i?void 0:i.beforeSubDialogShow)&&(null===(n=e.hooks)||void 0===n||n.beforeSubDialogShow()),r=(null===(s=e.hooks)||void 0===s?void 0:s.afterSubDialogClose)||function(){},p=e.isDialog?r:function(){},c=eunction(){},a.next=7,E.show({companyId:e.companyId,applyId:o.apply_id,classNames:e.isPC?"dialog-hidden":""},p,c);case 7:return e.curDialog=a.sent,e.isPC&&e.curDialog.$nextTick((function(){K(e.curDialog,{getPagePosition:e.getPagePosition})})),a.abrupt("return",!1);case 10:case"end":return a.stop()}}),a)})))()}}},B={bind:function(t,e){var a=t.querySelector(".el-table__body-wrapper")||t;a.addEventListener("scroll",L()((function(){var t=e.arg||10;a.scrollHeight-a.scrollTop-a.clientHeight<=t&&e.value()}),500))}};n.default.directive("loadmore",B(R.name,R)};var $=R},52985:function(t,e,){return o}});var i=a(80589),n=a.p+"s1/static/images/519ffa354158e0095c57.svg",s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"k-group-approvedBy",class:[t.className,"k-group-approvedBy-"+t.theme]},[a("div",{staticClass:"k-group-approvedBy-content"},[t._l(t.filterTeamMembers,(function(e,i){return a("div",{key:e.userid,staticClass:"stack",style:{"z-index":i}},[a("div",{staticClass:"stack-box",attrs:{title:e.name}},[e.pic||e.avatar?a("img",{staticClass:"avatar",attrs:{src:e.pic||e.avatar}}):a("span",{staticClass:"leave-office-icon",style:{backgroundImage:"url("+t.LEAVE_OFFICE_ICON+")"}})])])})),t._v(" "),1===t.teamMembers.length?a("div",{staticClass:"member-name"},[a("span",{staticClass:"name"},[t._v(t._s(t.teamMembers[0].name))])]):t._e(),t._v(" "),t.teamMembers.length>4?a("el-dropdown",{staticClass:"stack",style:{"z-index":t.filterTeamMembers.length},attrs:{placement:"top-start",trigger:"hover",hideTimeout:200,hideOnClick:!1}},[a("div",{staticClass:"stack-box"},[a("div",{staticClass:"more-box more-box-docsWeb"},[a("KIcon",{staticClass:"more-icon-docsWeb",attrs:{type:"more"}})],1)]),t._v(" "),a("el-dropdown-menu",{staticClass:"k-group-approvedBy-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("div",{staticClass:"k-group-approvedBy-dropdown-container"},t._l(t.teamMembers,(function(e,i){return a("el-dropdown-item",{key:i,staticClass:"k-group-approvedBy-dropdown-item"},[a("img",{staticClass:"avatar",attrs:{src:e.pic||e.avatar,alt:""}}),t._v(" "),a("span",[t._v(t._s(e.name))])])})),1)])],1):t._e()],2)])},staticRenderFns:[],name:"KGroupApprovedBy",components:{KIcon:i.default},props:{className:{type:String,default:""},theme:{type:String,default:"loose"},teamMembers:{type:Ar){return[]}},total:{type:Number,default:0},limit:{type:Number,defauCE_ICON:n}},computed:{filterhis.limit)}},methods(s.name,s)}},o=s}}]);
