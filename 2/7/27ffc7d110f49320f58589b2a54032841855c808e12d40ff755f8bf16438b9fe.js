var KlaviyoSubscribe=KlaviyoSubscribe||{};(function(){if(!KlaviyoSubscribe._loaded){KlaviyoSubscribe._loaded=!0;var f={"modal.html":'<div class="klaviyo_modal" style="display:none;"><div class="klaviyo_inner"><a href="#" class="klaviyo_close_modal klaviyo_header_close">&times;</a><form action="" method="POST" novalidate="novalidate" class="klaviyo_subscription_form"><input type="hidden" name="g" value="" /><p class="klaviyo_header"></p><p class="klaviyo_subheader"></p><div class="klaviyo_fieldset"></div><div class="klaviyo_fine_print"></div><div class="klaviyo_form_actions"><button type="submit" class="klaviyo_submit_button"><span></span></button></div><div class="klaviyo_below_submit"></div><div class="error_message" style="display:none;"></div></form><div class="success_message" style="display:none;"></div></div></div>',"flyout.html":'<div class="klaviyo_flyout" style="display:none;"><div class="klaviyo_inner"><div class="klaviyo_topbar" /><a href="#" class="klaviyo_close_flyout klaviyo_header_close">&times;</a><p class="klaviyo_header"></p><p class="klaviyo_subheader"></p><div class="klaviyo_flyout_action"><a href="#"><span /> &raquo;</a></div></div></div>',"flyout_form.html":'<div class="klaviyo_flyout" style="display:none;"><div class="klaviyo_inner"><div class="klaviyo_topbar" /><a href="#" class="klaviyo_close_flyout klaviyo_header_close">&times;</a><form action="" method="POST" novalidate="novalidate" class="klaviyo_subscription_form"><input type="hidden" name="g" value="" /><p class="klaviyo_header"></p><p class="klaviyo_subheader"></p><div class="klaviyo_inline_fieldset"><input type="email" name="email" placeholder="Your email address" /><button type="submit" class="klaviyo_submit_button"><span></span></button></div><div class="error_message" style="display:none;"></div></form><div class="success_message" style="display:none;"></div></div></div>'},y=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,h={$email:"Email Address",$first_name:"First Name",$last_name:"Last Name"},m="klaClosedPopup";KlaviyoSubscribe._debug=-1<document.location.hash.indexOf("#test"),KlaviyoSubscribe.has_called_bootstrap=!1,KlaviyoSubscribe.is_requirements_loaded=!1,KlaviyoSubscribe.bootstrap_queue=[],KlaviyoSubscribe.bootstrap_attempts=0,KlaviyoSubscribe.instances={},KlaviyoSubscribe.isDebugMode=KlaviyoSubscribe.bootstrap=function(e){KlaviyoSubscribe.has_called_bootstrap||(KlaviyoSubscribe.has_called_bootstrap=!0,KlaviyoSubscribe.loadCss("//a.klaviyo.com/media/css/public/klaviyo_subscribe.css"),KlaviyoSubscribe.fetchRequirements(e))},KlaviyoSubscribe.setHasClosedModalCookieName=KlaviyoSubscribe.loadScript=function(e,t,i){var s=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=e,s.appendChild(o),KlaviyoSubscribe.log("Loaded JS",e),KlaviyoSubscribe.whenTrue(t,i)},KlaviyoSubscribe.loadCss=function(e){var t=document.getElementsByTagName("head")[0],i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=e,i.rel="preload",i.as="style",t.appendChild(i),KlaviyoSubscribe.log("Loaded CSS",e)},KlaviyoSubscribe.injectCSS=KlaviyoSubscribe.whenTrue=function(e,t){var i=0,s=function(){e()?t():(i++,100>i&&setTimeout(s,200))};s()},KlaviyoSubscribe.loadJQueryForm=function(e){KlaviyoSubscribe.loadScript("//cdnjs.cloudflare.com/ajax/libs/jquery.form/3.32/jquery.form.min.js",function(){return!!window.jQuery&&jQuery.fn.ajaxForm&&jQuery.fn.formSerialize},e)},KlaviyoSubscribe.fetchRequirements=function(e){if(document.getElementsByTagName("head"),e=e||{},window.jQuery)jQuery.fn.ajaxForm?KlaviyoSubscribe.processQueue():KlaviyoSubscribe.loadJQueryForm(KlaviyoSubscribe.processQueue);else{var t=KlaviyoSubscribe.whenTrue(t)}},KlaviyoSubscribe.processQueue=function(){var e,t=function(){for(KlaviyoSubscribe.log("Processing queue.");e=KlaviyoSubscribe.bootstrap_queue.shift();)e();KlaviyoSubscribe.bootstrap_queue.push=;KlaviyoSubscribe.log("Waiting for DOM to process queue."),jQuery(t),setTimeout(t,5e3)},KlaviyoSubscribe.executeWhenRequirementsLoaded=KlaviyoSubscribe.watchField=function(e,t,i){i=i||{},i.type=i.type||"text",(t==="email"||t==="$email")&&(i.type="email"),KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){KlaviyoSubscribe.log("Watching field",e,jQuery(e).length);var s=function(o){if(o=jQuery.trim($(o.target).val()),KlaviyoSubscribe.log("Watch field value",o),i.type!=="email"||y.test(o)){if(window._learnq&&_learnq.push){var n={};n[t]=o,_learnq.push(["identify",n])}i.callback&&i.callback(t,o)}};i.delegate?jQuery(i.delegate).on("change blur",e,s):jQuery(e).on("change blur",s)})},KlaviyoSubscribe.watchFormSubmission=function(e,t){t=t||{},t.properties=t.properties||{},t.list&&(KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){if(t.properties){var i=[];jQuery.each(t.properties,,i.length&&(t.properties.$fields=i.join(","))}KlaviyoSubscribe.log("Watching form",e,jQuery(e).length);var s=function(o){var n=$(o.target);if(window._learnq&&_learnq.identify){var a=_learnq.identify();if(a&&(a=a.$email||a.email)){if(t.if){var r=jQuery(t.if);if(!r.length||(r.is(":checkbox")?!r.is(":checked"):!r.val())){KlaviyoSubscribe.log("Subscribe if fails",r);return}}a=jQuery.extend({g:t.list,email:a},t.properties),KlaviyoSubscribe.log("Subscribing",a),$.post("//manage.kmail-lists.com/ajax/subscriptions/subscribe",a),KlaviyoSubscribe._logMetric("submitModal",t.list),t.wait_seconds&&(o.preventDefault(),setTimeout(function(){KlaviyoSubscribe.log("Submitting form",n),n.get(0).submit()},1e3*t.wait_seconds))}}};t.delegate?jQuery(t.delegate).on("submit",e,s):jQuery(e).on("submit",s)}))},KlaviyoSubscribe.attachToForms=function(e,t){t=t||{};var i=t.extra_properties||{};i.$source=i.$source||"$embed",KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){KlaviyoSubscribe.log("Attaching to forms",e,jQuery(e).length),jQuery(e).each(function(){var s=jQuery(this),o=s.data("ajax-submit");o||(o="//manage.kmail-lists.com/ajax/subscriptions/subscribe"),s.ajaxForm({url:o,type:"POST",beforeSubmit:function(n,a,r){try{if(!KlaviyoSubscribe.isFormValid(s))return!1}catch(l){return KlaviyoSubscribe.log(l),s.find(".error_message").show().html(l),s.trigger("klaviyo.subscribe.error"),!1}KlaviyoSubscribe.log("$source",i.$source),KlaviyoSubscribe.normalizeFormFields(n,s,i,r),KlaviyoSubscribe._logMetric("submitModal",n.find(.value),s.find(".klaviyo_submit_button").attr("disabled",!0)},success:function(n,a,r){s.find(".success_message, .error_message").hide(),s.find(".klaviyo_submit_button").attr("disabled",!1),n.success?(KlaviyoSubscribe.setClosedModalCookie(),a=s.find(".success_message").show(),a.length||(a=s.parent().find(".success_message").show()),window._learnq&&_learnq.push&&(r=s.find('[name="email"]').val())&&(_learnq.push(["identify",{$email:r}]),_learnq.push(["trackActivity"])),t.success_url?window.location=t.success_url:(t.custom_success_message!==!0&&a.html(t.success_message||'<div class="klaviyo_header">Thanks for subscribing!</div><div class="klaviyo_subheader">Check your email for a confirmation message.</div>').end(),t.hide_form_on_success===!0&&(s.find(".klaviyo_field_group input, .klaviyo_form_actions").hide(),s.is(".klaviyo_horizontal_form")&&s.find(".klaviyo_field_group").hide()),t.success&&t.success(s,n.data),s.trigger("klaviyo.subscribe.success").resetForm())):(KlaviyoSubscribe.log(n.errors),s.find(".error_message").show().html(n.errors.join(" ")),s.trigger("klaviyo.subscribe.error"))}}),KlaviyoSubscribe.log("Attached to form",this)})})},KlaviyoSubscribe.attachModalSignUp=function(e){e=e||{},e.pages=e.pages||[],e.excluded_pages=e.excluded_pages||[],e.delay_seconds=e.delay_seconds||.1,e.delay_num_pages=e.delay_num_pages||0,e.content=e.content||{},e.extra_properties=e.extra_properties||{},e.extra_properties.$source=e.extra_properties.$source||"$modal",e.list&&(KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.setHasClosedModalCookieName(e.has_closed_modal_cookie_name),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){var t=KlaviyoSubscribe._buildModalSignUp(e);t.find('[name="g"]').val(e.list),t.appendTo(jQuery("body")),KlaviyoSubscribe.attachToModalForm(t,{list:e.list,pages:e.pages,excluded_pages:e.excluded_pages,delay:e.delay_seconds,delay_num_pages:e.delay_num_pages,ignore_cookie:e.ignore_cookie,extra_properties:e.extra_properties,custom_success_message:!!e.content.success,success_url:e.success_url,success:function(i){i.hide(),e.success&&e.success(i)}})}))},KlaviyoSubscribe._buildModalSignUp=function(e){var t=e.content;if(t.fields=t.extra_fields||[],jQuery.inArray("$email",t.fields)===-1&&t.fields.unshift("$email"),t.element)return jQuery(t.element);var i=jQuery(f["modal.html"]).attr("id","k_id_modal").find(".klaviyo_header").html(t.header||"Interested in our Newsletter?").end().find(".klaviyo_subscription_form").attr("action",e.subscribe_url||"//manage.kmail-lists.com/subscriptions/subscribe").data("ajax-submit",e.ajax_subscribe_url||"//manage.kmail-lists.com/ajax/subscriptions/subscribe").end().find(".klaviyo_submit_button span").html(t.button||"Subscribe").end();t.clazz&&i.addClass(t.clazz),t.styles&&KlaviyoSubscribe.injectCSS(t.styles),t.subheader!==!1&&i.find(".klaviyo_subheader").html(t.subheader||"Stay in the know with news and promotions."),t.below_submit?i.find(".klaviyo_below_submit").html(t.below_submit):i.find(".klaviyo_below_submit").hide(),t.success&&i.find(".success_message").html(t.success),e.ack===!0&&i.append(jQuery('<div class="klaviyo_ack"><a href="http://www.klaviyo.com/?utm_campaign=pbk">Powered by Klaviyo</a></div>'));var s=i.find(".klaviyo_fieldset");return jQuery.each(t.fields,function(o,n){typeof n=="string"&&(n={name:n}),n.type||(n.type=n.name==="$email"?"email":"text"),n.label||(n.label=h[n.name]||n.name),o="k_id_modal_"+n.name,s.append(jQuery('<div class="klaviyo_field_group" />').append(jQuery("<label />").attr("for",o).html(n.label)).append(jQuery("<input />").attr({type:n.type,id:o,name:n.name[0]==="$"?n.name.slice(1):n.name})))}),e=t.fine_print||"",t.email_frequency&&(e+=" Our newsletter is delivered to your inbox "+t.email_frequency+"."),i.find(".klaviyo_fine_print").html(e),i},KlaviyoSubscribe.attachToModalForm=function(e,t){t=t||{},t.pages=t.pages||[],t.excluded_pages=t.excluded_pages||[],t.extra_properties=t.extra_properties||{},t.extra_properties.$source=t.extra_properties.$source||"$modal",t.delay_seconds===void 0&&(t.delay_seconds=t.delay===void 0?2:t.delay),KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.setHasClosedModalCookieName(t.has_closed_modal_cookie_name),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){var i=jQuery(e);KlaviyoSubscribe.attachToForms(jQuery(e).find(".klaviyo_subscription_form"),t),i.delegate(".klaviyo_close_modal","click",function(s){s.preventDefault(),i.hide(),KlaviyoSubscribe.setClosedModalCookie(),KlaviyoSubscribe._logMetric("closeModal",t.list)}),i.click(,KlaviyoSubscribe._canShowElem(t)&&jQuery(function(){setTimeout(function(){KlaviyoSubscribe._logMetric("openModal",t.list),i.fadeIn(1e3),i.trigger("klaviyo.modal.show")},1e3*t.delay_seconds)})})},KlaviyoSubscribe.attachFlyoutSignUp=function(e){e=e||{},e.pages=e.pages||[],e.excluded_pages=e.excluded_pages||[],e.delay_scroll=e.delay_scroll===void 0?50:e.delay_scroll,e.delay_seconds=e.delay_seconds||.1,e.delay_num_pages=e.delay_num_pages||0,e.position=e.position||"right",e.content=e.content||{},e.extra_properties=e.extra_properties||{},e.extra_properties.$source=e.extra_properties.$source||"$flyout",e.modal_content===void 0&&(e.modal_content=e.content),e.list&&(KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.setHasClosedModalCookieName(e.has_closed_modal_cookie_name),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){var t=e.modal_content===!1,i=KlaviyoSubscribe._buildFlyoutSignUp(jQuery.extend({include_form:t},e));if(i.appendTo(jQuery("body")),t){var s=e.success;e.success=e.custom_success_message=!!e.content.success,i.find('[name="g"]').val(e.list),KlaviyoSubscribe.attachToForms(i.find(".klaviyo_subscription_form"),e)}KlaviyoSubscribe.attachToFlyout(i,{list:e.list,pages:e.pages,excluded_pages:e.excluded_pages,delay:e.delay_seconds,delay_scroll:e.delay_scroll,delay_num_pages:e.delay_num_pages,position:e.position,ignore_cookie:e.ignore_cookie,extra_properties:e.extra_properties,click:function(o){o=KlaviyoSubscribe._buildModalSignUp({content:e.modal_content}),o.find('[name="g"]').val(e.list),o.appendTo(jQuery("body")),KlaviyoSubscribe.attachToModalForm(o,{list:e.list,delay:.01,extra_properties:e.extra_properties,success_url:e.success_url,success:)}})}))},KlaviyoSubscribe._buildFlyoutSignUp=function(e){var t=e.content;if(t.element)return jQuery(t.element);var i=jQuery(f[e.include_form?"flyout_form.html":"flyout.html"]).attr("id","k_id_flyout").find(".klaviyo_header").html(t.header||"Interested in our Newsletter?").end().find(".klaviyo_subscription_form").attr("action",e.subscribe_url||"//manage.kmail-lists.com/subscriptions/subscribe").data("ajax-submit",e.ajax_subscribe_url||"//manage.kmail-lists.com/ajax/subscriptions/subscribe").end().find(".klaviyo_flyout_action a span, .klaviyo_submit_button span").html(t.button||"Subscribe").end();return i.addClass("klaviyo_"+e.position),t.clazz&&i.addClass(t.clazz),t.styles&&KlaviyoSubscribe.injectCSS(t.styles),t.subheader!==!1&&i.find(".klaviyo_subheader").html(t.subheader||"Stay in the know with news and promotions."),t.success&&i.find(".success_message").html(t.success),e.ack===!0&&i.find(".klaviyo_inner").append(jQuery('<div class="klaviyo_ack"><a href="http://www.klaviyo.com/?utm_campaign=pbk">Powered by Klaviyo</a></div>')),i},KlaviyoSubscribe.attachToFlyout=function(e,t){t=t||{},t.pages=t.pages||[],t.excluded_pages=t.excluded_pages||[],t.position=t.position||"right",t.extra_properties=t.extra_properties||{},t.extra_properties.$source=t.extra_properties.$source||"$flyout",KlaviyoSubscribe.bootstrap(),KlaviyoSubscribe.setHasClosedModalCookieName(t.has_closed_modal_cookie_name),KlaviyoSubscribe.executeWhenRequirementsLoaded(function(){var i=jQuery(e);i.delegate(".klaviyo_close_flyout","click",function(s){s.preventDefault(),i.hide(),KlaviyoSubscribe.setClosedModalCookie(),KlaviyoSubscribe._logMetric("closeModal",t.list)}),i.find(".klaviyo_flyout_action a").click(,KlaviyoSubscribe._canShowElem(t)&&jQuery(function(){var s=t.delay_scroll,o=function(){if(!i.data("opened")){var u=t.delay_seconds||t.delay;u===void 0&&(u=2),setTimeout(function(){if(!i.data("opened")){i.data("opened",!0),i.trigger("klaviyo.flyout.show");var c=i.find(".klaviyo_inner"),_=-1<jQuery.inArray(t.position,["left","right","bottom","top"])?t.position:"right",p={},d;p[_]=0,i.css("visibility","hidden").show(),KlaviyoSubscribe._logMetric("openModal",t.list),_==="left"||_==="right"?d=1.2*-c.width():(_==="top"||_==="bottom")&&(d=1.2*-c.height()),c.css(_,d),i.css("visibility","visible"),c.animate(p,1e3*(t.slide_seconds||2))}},1e3*u)}};if(s===!1||s===0)o();else{var n=jQuery(document),a=jQuery(window),r=s==="bottom"?95:s,l=function(){var u=n.height()-a.height();(0>u?100:100*n.scrollTop()/u)>r&&(o(),n.unbind("scroll",l))};n.scroll(l)}})})},KlaviyoSubscribe.isFormValid=function(e){var t=e.find('[name="email"]').val();if(!t||!/@/.test(t))throw KlaviyoSubscribe.log("Invalid email address"),"Invalid email address";return e.find('input[required="true"], select[required="true"]').each(function(i,s){if(s=jQuery(s),s.is(":radio")||s.is(":checked")){if(has_value=!!e.find('[name="'+s.attr("name")+'"]:checked').length,!has_value)throw KlaviyoSubscribe.log("Required field missing",s.attr("name")),"Required field missing: "+s.attr("name");return has_value}if(!s.val())throw KlaviyoSubscribe.log("Required field missing",s.attr("name")),"Required field missing: "+s.attr("name")}),e.find(".select-date-widget").each(function(i,s){s=jQuery(s),i=KlaviyoSubscribe._int(s.find('[name$="_day"]').val());var o=KlaviyoSubscribe._int(s.find('[name$="_month"]').val());if(s=KlaviyoSubscribe._int(s.find('[name$="_year"]').val()),!(isNaN(i)||isNaN(o)||isNaN(s))){switch(o){case 1:case 3:case 5:case 7:case 8:case 10:case 12:if(1<=i&&31>=i)return;case 4:case 6:case 9:case 11:if(1<=i&&30>=i)return;case 2:if(1<=i&&i<=(s%4?28:29))return}throw KlaviyoSubscribe.log("Invalid date",s,o,i),"Invalid date"}}),!0},KlaviyoSubscribe.normalizeFormFields=function(e,t,i,s){e.push({name:"$timezone_offset",type:"text",value:this._getUtcOffset()});var o=[],n;jQuery.each(i,function(a,r){e.push({name:a,type:"text",value:r}),o.push(a)}),o.length&&(jQuery.each(e,function(a,r){if(r.name==="$fields")return n=r,!1}),n?n.value+=","+o.join():e.push({name:"$fields",type:"text",value:o.join()})),t.find(".select-date-widget").each(function(a,r){r=jQuery(r);var l=r.find('[name$="_day"]');a=r.find('[name$="_month"]');var u=r.find('[name$="_year"]');r=l.attr("name");var c=a.attr("name"),_=u.attr("name");l=KlaviyoSubscribe._int(l.val());var p=KlaviyoSubscribe._int(a.val());if(u=KlaviyoSubscribe._int(u.val()),!(isNaN(l)||isNaN(p)||isNaN(u))){for(a=0;a<e.length;){var d=e[a];!d||d.name!==r&&d.name!==c&&d.name!==_?a++:e.splice(a,1)}e.push({name:r.replace("_day",""),required:!0,type:"text",value:KlaviyoSubscribe._formatDate(u,p,l)})}})},KlaviyoSubscribe.isCurrentLocationInPatterns=function(e){for(var t=location.toString(),i=0,s=e.length;i<s;i++)if(KlaviyoSubscribe.patternMatchesUrl(e[i],t))return!0;return!1},KlaviyoSubscribe.patternMatchesUrl=function(e,t){if(t=t.toLowerCase(),e===t)return!0;if(e.indexOf("?")===-1){var i=t.indexOf("?");i!==-1&&(t=t.substring(0,i))}return e.indexOf("*")===-1?(e=e.replace(/\/$/,""),e===""&&(e="/"),t=t.replace(/\/$/,""),e===t?!0:e.indexOf("/")===0?(t=KlaviyoSubscribe.parseDomain(t),e===""?t==="/":t===e):!1):e===t?!0:e.length?(i=e.replace(/[.+?|()\[\]{}\\]/g,"\\$&").replace(/\*/g,"(.*?)"),i=/\/$/.test(i)?"^"+i+"$":"^"+i+"/?$",i=new RegExp(i,"i"),i.test(t)?!0:e.indexOf("/")?!1:i.test(KlaviyoSubscribe.parseDomain(t))):!1},KlaviyoSubscribe.parseDomain=KlaviyoSubscribe.incrPageViews=function(){var e=parseInt(KlaviyoSubscribe._getCookie("klaPages"),10);return isNaN(e)&&(e=0),e+=1,KlaviyoSubscribe._setCookie("klaPages",e,31536e6),e},KlaviyoSubscribe.setClosedModalCookie=KlaviyoSubscribe.resetClosedModalCookie=KlaviyoSubscribe.hasClosedModal=function(){return!!KlaviyoSubscribe._getCookie(m)&&!KlaviyoSubscribe.isDebugMode()},KlaviyoSubscribe._setCookie=function(e,t,i){i=new Date(new Date().getTime()+i),document.cookie=e+"="+t+";expires="+i.toGMTString()+";path=/"},KlaviyoSubscribe._getCookie=function(e){return(e=new RegExp("(^|;)[ ]*"+e+"=([^;]*)").exec(document.cookie))?e[2]:""},KlaviyoSubscribe._deleteCookie=KlaviyoSubscribe._getUtcOffset=KlaviyoSubscribe._canShowElem=function(e){return e.delay_num_pages&&e.delay_num_pages>KlaviyoSubscribe.incrPageViews()||e.pages.length&&!KlaviyoSubscribe.isCurrentLocationInPatterns(e.pages)||e.excluded_pages.length&&KlaviyoSubscribe.isCurrentLocationInPatterns(e.excluded_pages)?!1:e.ignore_cookie||!KlaviyoSubscribe.hasClosedModal()},KlaviyoSubscribe._int=KlaviyoSubscribe._formatDate=function(e,t,i){return i.toString().length===1&&(i="0"+i),t.toString().length===1&&(t="0"+t),e+"-"+t+"-"+i},KlaviyoSubscribe.log=KlaviyoSubscribe._logMetric=Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e,t){if(this==null)throw new TypeError('"this" is null or not defined');var i=Object(this),s=i.length>>>0;if(typeof e!="function")throw new TypeError("predicate must be a function");for(var o=0;o<s;){var n=i[o];if(e.call(t,n,o,i))return n;o++}}})}})();
