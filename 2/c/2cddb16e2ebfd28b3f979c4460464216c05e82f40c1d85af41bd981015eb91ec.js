import{debug,debounced as t}from"../base/croco.js";import{LOGGERS as l,MODULE_ALREADY_INITIALIZED as o,mediaQuery as u}from"../base/config.js";let i=false;let h=[...document.querySelectorAll(".js-header-transparency")];let T=!!h[0];let m=document.documentElement;let p=false;const A="light";const S=l.DEFAULT;export const THEME={LIGHT:{label:"light",class:"is-light"},TRANSPARENT:{label:"transparent",class:"is-transparent"},DARK:{label:"dark"}};export function enableTransparentHeader(enabled,t){if(T){m.classList.toggle(THEME.TRANSPARENT.class,window.scrollY>=30?false:enabled);p=t}}export function setThemeState(t){const l=t===THEME.TRANSPARENT.label;enableTransparentHeader(l)}function H(scrollY){if(Math.abs(scrollY)>=30||m.classList.contains("lock-scroll")){setThemeState(THEME.LIGHT.label)}else{setThemeState(THEME.TRANSPARENT.label)}}function R(){H(window.scrollY)}function g(){function t(){const l=".js-modular-push";const t=h.find(t=>t.querySelector(l))?.querySelector(l);return t||h.find(t=>t.dataset.headerTheme)}const l=t();const o=l?.dataset.headerTheme||A;const i=l?.dataset.headerThemeMobile||A;const T=u.mobileOnly.matches?i:o;m.classList.toggle("header--light",T==="light")}function N(){window.addEventListener("scroll",()=>!p&&R());window.addEventListener("resize",t(200,g))}export function headerTransparentInit(){if(i){debug("error",S,o);return}h=[...document.querySelectorAll(".js-header-transparency")];T=!!h[0];if(T){g();setThemeState(THEME.TRANSPARENT.label);N()}i=true}export function updateTransparentHeader(){T&&R()}