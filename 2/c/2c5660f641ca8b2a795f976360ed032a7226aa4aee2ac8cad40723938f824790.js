/*! vidora-client 1.6.2 04-29-2022 */

!function(){"use strict";{version:"1.6.2",rev:"f85333ea9eddf3ef408a675edda45212e15acb59"},u=window,c=document,n=navigator;function o(){return u}function d(){return c}unction v(t){o().console&&console.log&&console.log(t)}function p(t){o().console&&console.error&&console.error(t)}tion _(t){return!y(t)&&"object"===e(t)}function w(t){return!g(t)&&t.constructor===Array}unction k(t,n){var e=b(t,{}),r=b(n,{});for(var o in r)e[o]=r[o];return e}function S(t){var n=b(t,{});return _(n)||h("Options should be an object."),n}nction U(t){var n=[];for(var e in t){var r=t[e],o=m(r)?[e]:[e,r];n.push(o)}return n.sort(function(t,n){return(e=t)<(r=n)?-1:r<e?1:0;var e,r}),n.map(.join("&")}ar j="sendBeacon";unction E(e,r){return function(t,n){Math.random()<e&&r(t,n)}}var C=function(){function u(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"https://a.vidora.com/v1/validate?api_key=".concat("vidora_client_reports.A8E73214DD4B0739B34885EA8DA2C229"),e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.001,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.001,i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:A;f(this,u),this.apiKey=t,this.perf_report_sample_rate=e,this.error_sample_rate=r,this.network_success_sample_rate=o,this.network_error_sample_rate=i,this.reportUrl=n,this.operator=t&&t.split(".")[0],this.sendCmd=a}return t(u,[{key:"wrapObject",value:function(e,t){var r=this,o=1<arguments.length&&void 0!==t?t:e.constructor.name,i={};return function(t){for(var n=new Set,e=t;e&&e!=Object.prototype;e=Object.getPrototypeOf(e)){var r,o=a(Object.getOwnPropertyNames(e));try{for(o.s();!(r=o.n()).done;){var i=r.value;n.add(i)}}catch(t){o.e(t)}finally{o.f()}}return Array.from(n)}(e).forEach(function(n){"function"==typeof e[n]?i[n]=r.wrapFunction(e[n],n,o):Object.defineProperty(i,n,{get:set:)}),i}},{key:"wrapFunction",value:function(r,t,n){var o=1<arguments.length&&void 0!==t?t:r.name,i=2<arguments.length&&void 0!==n?n:null,a=this;return function(){try{var t=Date.now(),n=r.apply(this,arguments),e=Date.now();return E(a.perf_report_sample_rate,a.sendCmd)(a.reportUrl,JSON.stringify({data:[{type:"js_sdk_perf_report",operator:a.operator,version:l.version,rev:l.rev,object_name:i,function_name:o,time_taken:e-t}]})),n}catch(t){throw E(a.error_sample_rate,a.sendCmd)(a.reportUrl,JSON.stringify({data:[{type:"js_sdk_error",operator:a.operator,version:l.version,rev:l.rev,object_name:i,function_name:o,error_name:t.name,message:t.message,stack:t.stack}]})),t}}}},{key:"notifyNetworkResponse",value:function(t,n,e,r){var o=r?this.network_success_sample_rate:this.network_error_sample_rate;E(o,this.sendCmd)(this.reportUrl,JSON.stringify({data:[{type:"js_sdk_network_report",success:r,operator:this.operator,version:l.version,rev:l.rev,url:t,method:n,status:e}]}))}}]),u}();function R(t,n,e,r){var o=[];if(o.push(t+"="+encodeURIComponent(n)),e){var i=new Date;i.setTime(i.getTime()+1e3*e);var a="expires="+i.toUTCString();o.push(a)}o.push("path=/"),r&&o.push("domain="+r);var u=o.join("; ");d().cookie=u}var D=4;function H(t,n,e){v("XHR Request Succeded: "+e.url)}function x(t,n,e){p("XHR Request Failed: "+e.url+" "+t)}function M(t,n,e){p("XHR Timeout: "+e.url)}function q(t){return t}unction P(t,n){var e=function(n,e,t){var r=new XMLHttpRequest;r.open(n,e.url,t);var o="onSuccess"in e?e.onSuccess:H,i="onError"in e?e.onError:x,a="onTimeout"in e?e.onTimeout:M,u="unmarshall"in e?e.unmarshall:q,s="apimon"in e?e.apimon:void 0;return"crossDomainCredentials"in e&&(r.withCredentials=!0===e.crossDomainCredentials),"timeoutMs"in e&&(r.timeout=e.timeoutMs,r.ontimeout=,r.onload=function(){var t=r.readyState===D&&200<=r.status&&r.status<300;s&&s.notifyNetworkResponse(e.url,n,r.status,t),t?o.call({},u(r.responseText),r.status,e):i.call({},r.statusText,r.status,r.readyState,e)},r.onerror=function(){var t="Unknown Error.";g(r.status)&&g(r.statusText)?t="Unknown Error.":"statusText"in r&&(t=r.statusText),i.call({},t,r.status,r.readyState,e)},r}(t,n,!0);if("data"in n){var r="marshall"in n?n.marshall:N;"dataType"in n&&e.setRequestHeader("Content-type",n.dataType),e.send(r(n.data))}else e.send();return e}unction J(){return Math.floor(65536*V())}var K,X=!m(o().Uint16Array)&&!m(o().crypto)?function(t){var n=new Uint16Array(t);crypto.getRandomValues(n);for(var e=[],r=0;r<n.length;r++)e.push(n[r]);return e}:function(t){for(var n=[],e=0;e<1&&e<t;e++)n.push(65535&(J()^O()));for(;e<t;e++)n.push(J());return n};function B(){return X(10).map(function(t){var n=(t>>1).toString(32);return"000".slice(n.length)+n}).join("")}try{o().sessionStorage,K=o().localStorage}catch(t){}function F(t,n){var e,r=t.getItem(n);return g(r)?null:(e=r,JSON.parse(e))}function $(){return function(t){if(t){var n="string"==typeof t.setItem;return!g(t)&&!n}return!1}(K)}function L(t,n){return $()&&function(t,n,e){try{return t.setItem(n,I(e)),!0}catch(t){return v(t),!1}}(K,t,n)}function z(t){if($())return F(K,t)}function G(t){var n;$()&&(n=t,K.removeItem(n))}function Q(t){$()&&function(t,n){for(var e=0;e<t.length;e++){n(t.key(e))}}(K,t)}var W=50,Y=W,Z=3,tt=5,nt=3*tt,et="vidoraRequest:",rt=".clock";nction at(t){return z(t)}function ut(t){G(t),setTimeout(100)}nction ft(t,n,e){var r,o,i=et+ot(),a=(r=it(i),o=0,setInterval(function(){L(r,o+=1)},tt));return L(i,{data:t,guid:e,retry:0}),{key:i,guid:e,clock:a}}function lt(){var e={};return Q(function(t){var n;0===(n=t).indexOf(et)&&-1!==n.indexOf(rt)&&(e[t]=at(t))}),e}function dt(){var e=[];return Q(function(t){var n;0===(n=t).indexOf(et)&&-1===n.indexOf(rt)&&e.push(t)}),e}var vt=!1;var pt=document.currentScript||document.scripts[document.scripts.length-1],ht=(pt&&pt.src||"").match(/:(\/\/[^\/?#]+)(?:[\/?#]|$)/i),mt=ht&&ht[1]||"//alloy.vidora.com",yt="https:"+mt,gt=mt,_t={marshall:I,dataType:"text/plain"};ar bt=wt,kt=wt,St=wt;function It(t,n){if(!g(t))if(k(n,_t),n.data.guid=t.guid,n.data.user_agent=window.navigator.userAgent,n.data.url=window.location.href,!g(i()[j])&&g(n.onSuccess)){A(n.url,n.marshall(n.data))&&kt(t)}else{var e=n.onSuccess||wt;n.onSuccess=function(){kt(t),e()},P("POST",n)}}function Tt(t,n){var e,r,o,i,a,u,s=n.map(,c={};0<n.length&&2<n[0].length&&(c=n[0][2]),e=t,r=s,o=S(c),i=k({api_key:e.token},o._params),a={url:b(o._baseURI,e._analyticsHost)+"/"+e.apiVersion+"/validate?"+U(i),apimon:e.apimon,data:{data:r}},u=bt(a),"success"in o&&(a.onSuccess=o.success),It(u,a)}()&&(bt=kt=function(t){var n,e,r=t.key,o=t.clock;e=it(r),(n=o)&&clearInterval(n),ut(e),ct(r)},St=function(i,a){if(!vt){vt=!0;var u=dt(),s=lt();!function(t){if(t.length>W){t.sort();for(var n=t.length-Y,e=0;e<n;e++){ct(t.shift())}}}(u);setTimeout(function(){!function(t){for(var n in t){var e=t[n],r=at(n);!g(r)&&r!==e||(delete t[n],ut(n))}}(s);var n,e,r,o,t=(n=s,e=[],u.forEach(function(t){it(t)in n||e.push(t)}),e);r=i,o=[],t.forEach(function(t){var n=st(t);if(!g(n)&&n.retry+1<Z){var e=ft(n.data,0,n.guid);o.push(e)}ct(t)}),o.forEach(function(t){var n=st(t.key);r(t,n.data,n.guid)}),vt=!1,a&&a()},nt)}});var Ot="vidoraUserId",jt=B().slice(0,10),At=function(){function c(t){f(this,c),g(t)?h("Vidora API constructed without any options."):_(t)?"apiKey"in t||h("Vidora API constructed without an API Key"):h("Vidora API should be constructed with an option object.");var n=k({},t);this.token=n.apiKey,this.globalName=n.globalName,this.apiVersion="v1",this.apimon=new C(this.token);var e,r,o,i,a,u=this;his._queue=(e=r=500,o=30,i=[],a=setTimeout(0),{add:function(t){clearTimeout(a),i.push(t),i.length>=o?s():a=setTimeout(s,r)},flush:),this._analyticsHost=yt,this._apiHost=gt,this._sendMode=0,this._build=l,this._userId=null,St(It)}return t(c,[{key:"config",value:function(t){var n=S(t);"analyticsHost"in n&&(this._analyticsHost=n.analyticsHost),"apiHost"in n&&(this._apiHost=n.apiHost)}},{key:"withMonitoring",value:,{key:"_buildIntoVidoraStyleEvents",value:function(t,n,e){for(var r=S(e),o=w(n)?n:[n],i=this.getUserId(),a=this.getSessionId(),u=[],s=0;s<o.length;s++){var c=o[s],f={type:String(t),user_id:String(i),session_id:String(a),timestamp:Math.floor(Date.now()/1e3),timestamp_ms:Date.now()};g(c)||(f.content_id=String(c)),k(f,r.params),u.push(f)}return u}},{key:"send",value:function(t,n,e){for(var r=this._buildIntoVidoraStyleEvents(t,n,e),o=S(e),i=0;i<r.length;i++){var a=r[i],u={};Ut("success",u,o),Ut("error",u,o),Ut("timeout",u,o);var s=this._sendMode;switch("click"!==a.type&&!o.quicksend||(s=1),s){case 1:this._queue.add([a,u,o]),this._queue.flush();break;case 0:this._queue.add([a,u,o]);break;default:h()}}return r}},{key:"getUUID",value:function(){var t=function(t){for(var n=d().cookie.split("; "),e=0;e<n.length;e++){var r=n[e],o=r.indexOf("=");if(-1!==o)if(r.slice(0,o)===t){var i=r.slice(o+1);return decodeURIComponent(i)}}return null}(Ot);return y(t)&&(t=B(),R(Ot,t,5256e3)),t}},{key:"setUUID",value:,{key:"getSessionId",value:,{key:"setUserId",value:,{key:"getUserId",value:function(){return!g(this._userId)&&""!==this._userId||(this._userId=this.getUUID()),this._userId}}]),c}(),Et="vidora-client",Ct=At,Rt="vidora_ns",Dt="vidora",Ht={},xt={};function Mt(n){return function(t){t.call({},Ht[n],xt)}}function qt(o){return function(t){var n=t[0],e=t.slice(1),r=Ht[o];n in r||h("Invalid api call '"+n+"'"),r[n].apply(r,e)}}function Nt(n){return function(t){w(t)?qt(n)(t):"function"==typeof t?Mt(n)(t):h("typeof call item '"+e(t)+"' not supported.")}}xt._i=function(t,n,e){var r=k({apiKey:t,globalName:n},e),o=new Ct(r).withMonitoring();g(n)&&(n=Dt),Ht[n]=o,v(Et+" "+o._build.version+" "+o._build.rev)},function(t,n,e){Ct=2<arguments.length&&void 0!==e?e:At,Rt in t?t[Rt].includes(Dt)||t[Rt].push(Dt):t[Rt]=[Dt];for(var r=0;r<t[Rt].length;r++){var o=t[Rt][r];if(t[o]&&!0===t[o]._init)p(Et+": "+o+" included twice!");else{u=t,c=n;var i=t[o];o in t||(t[o]={}),t[o].push=qt(o),t[o].ready=Mt(o),t[o]._init=!0,i&&(i.ready=Mt(o),i.push=qt(o),i._q.forEach(Nt(o)),i=null)}}}(window,document)});