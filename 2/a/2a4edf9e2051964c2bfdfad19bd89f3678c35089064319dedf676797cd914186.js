
ACC.richRelevanceTracking={maxAdditionalItems:15,trackAdditionaProducts:function(RR_){var sku=$('[data-rich-relevance-product-code]');if(sku){$.each(sku,function(i){if($(this).data('rich-relevance-product-code')){RR_.addItemId($(this).data('rich-relevance-product-code'));}
return i<ACC.richRelevanceTracking.maxAdditionalItems-1;});}},trackCommon:function(data,existingPlaceholders){var json=ACC.cookie.getRichRelevanceTrackingCookie();var sessionId=ACC.cookie.getRichRelevanceSessionCookie();R3_COMMON=new r3_common();R3_COMMON.setClickthruServer(ACC.config.baseUrl+ACC.config.encodedContextPath);R3_COMMON.setBaseUrl(window.location.protocol+'//'+ACC.config.richRelevanceEnviroment+'.richrelevance.com/rrserver/');R3_COMMON.setApiKey(ACC.config.richRelevanceApiKey);R3_COMMON.setRegionId(ACC.config.richRelevanceRegion);R3_COMMON.setSessionId(sessionId);if(json.user){R3_COMMON.setUserId(json.user);}
if(json.cartTotal){R3_COMMON.setCartValue(json.cartTotal);}
if(typeof existingPlaceholders==='undefined'||existingPlaceholders==null||(existingPlaceholders!=null&&existingPlaceholders.length===0)){R3_COMMON.addPlacementType(data.pageType);}else{var uniquePlacementNames=[];$(existingPlaceholders).each(function(i,value){var placementName=$(value).data('placement-name');if($.inArray(placementName,uniquePlacementNames)===-1&&placementName.indexOf(data.pageType)>=0){R3_COMMON.addPlacementType(placementName);uniquePlacementNames.push(placementName);}});}},trackHomepage:function(data){R3_HOME=new r3_home();ACC.richRelevanceTracking.trackAdditionaProducts(R3_COMMON);},trackContentPage:trackCart:function(data){R3_CART=new r3_cart();$(data.cartProducts).each(function(i,value){if(value.productCode){R3_CART.addItemId(value.productCode);}
return i<ACC.richRelevanceTracking.maxAdditionalItems-1;});},trackCategory:function(data){R3_CATEGORY=new r3_category();ACC.richRelevanceTracking.trackAdditionaProducts(R3_COMMON);R3_CATEGORY.setId(data.categoryCode);R3_CATEGORY.setName(data.categoryName);},trackItemPage:function(data){R3_COMMON.addCategoryHintId(data.categoryCode);R3_ITEM=new r3_item();R3_ITEM.setId(data.productCode);},trackErrorPage:function(data){R3_ITEM=new r3_error();},trackPersonalPage:trackSearchPage:function(data){R3_SEARCH=new r3_search();var keywords=$('meta[name=keywords]').attr("content");R3_SEARCH.setTerms(keywords);$(data.searchProducts).each(function(i,value){if(value.productCode){R3_SEARCH.addItemId(value.productCode);}
return i<ACC.richRelevanceTracking.maxAdditionalItems-1;});},trackPurchasedPage:function(data){R3_PURCHASED=new r3_purchased();R3_PURCHASED.setOrderNumber(data.orderCode);$(data.purchasedProducts).each(function(i,value){if(value.productCode){R3_PURCHASED.addItemIdPriceQuantity(value.productCode,value.productPrice.toFixed(2),value.productQuantity,value.productSKU);}});},trackWishlistPage:function(data){R3_WISHLIST=new r3_wishlist();$(data.wishlistProducts).each(function(i,value){if(value.productCode){R3_WISHLIST.addItemId(value.productCode);}
return i<ACC.richRelevanceTracking.maxAdditionalItems-1;});},trackAddToCartPage:function(productCode,placementName){if(placementName){if(RR){RR.data={};}
var json=ACC.cookie.getRichRelevanceTrackingCookie();var sessionId=ACC.cookie.getRichRelevanceSessionCookie();R3_COMMON=new r3_common();R3_COMMON.setClickthruServer(ACC.config.baseUrl+ACC.config.encodedContextPath);R3_COMMON.setBaseUrl(window.location.protocol+'//'+ACC.config.richRelevanceEnviroment+'.richrelevance.com/rrserver/');R3_COMMON.setApiKey(ACC.config.richRelevanceApiKey);R3_COMMON.setRegionId(ACC.config.richRelevanceRegion);R3_COMMON.setSessionId(sessionId);if(json.user){R3_COMMON.setUserId(json.user);}
if(json.cartTotal){R3_COMMON.setCartValue(json.cartTotal);}
R3_COMMON.addPlacementType(placementName);}
R3_ADDTOCART=new r3_addtocart();if(productCode){R3_ADDTOCART.addItemIdToCart(productCode);}
return R3_ADDTOCART;},trackAddToCartEvent:function(placementName){var productCode=$('.js-rich-relevance-add-to-cart').data('rich-relevance-product-code');ACC.richRelevanceTracking.trackAddToCartPage(productCode,placementName);rr_flush_onload();r3();},trackPageSpecific:function(richRelevanceTrackingData){switch(richRelevanceTrackingData.pageType){case'cart_page':ACC.richRelevanceTracking.trackCart(richRelevanceTrackingData);break;case'category_page':ACC.richRelevanceTracking.trackCategory(richRelevanceTrackingData);break;case'wish_list_page':ACC.richRelevanceTracking.trackWishlistPage(richRelevanceTrackingData);break;case'home_page':ACC.richRelevanceTracking.trackHomepage(richRelevanceTrackingData);break;case'item_page':ACC.richRelevanceTracking.trackItemPage(richRelevanceTrackingData);break;case'personal_page':ACC.richRelevanceTracking.trackPersonalPage(richRelevanceTrackingData);break;case'search_page':ACC.richRelevanceTracking.trackSearchPage(richRelevanceTrackingData);break;case'purchase_complete_page':ACC.richRelevanceTracking.trackPurchasedPage(richRelevanceTrackingData);break;case'error_page':ACC.richRelevanceTracking.trackErrorPage(richRelevanceTrackingData);break;case'add_to_cart_page':ACC.richRelevanceTracking.trackAddToCartPage(richRelevanceTrackingData);break;default:ACC.richRelevanceTracking.trackContentPage(richRelevanceTrackingData);}},setRRPrivacyConsent:function(consent){if(consent){delete R3_COMMON.privateMode;R3_COMMON.addSegment('optin','optin');}else{R3_COMMON.setPrivateMode(true);R3_COMMON.addSegment('optout','optout');}},setUserCentricsRichRelevancePrivacySettings:function(){var consent=null;try{if(window.usercentrics){consent=window.usercentrics.getConsents(ACC.config.richRelevanceUserCentricsKey).consentStatus;}else if(window.UC_UI){consent=window.UC_UI.getServicesBaseInfo().find(.consent.status;}else{consent=localStorage.getItem(ACC.config.richRelevanceConsentKey);if(consent!==null&&consent!=='null'){consent=consent.indexOf('true')!==-1?true:false;}}}catch(e){dataLayer.push({event:'standardEventTracking',eventCategory:'Caught Errors',eventAction:'RichRelevance consent',eventLabel:e,eventValue:undefined,eventNonInteractive:undefined});consent=false;}
if(consent!==null){ACC.richRelevanceTracking.setRRPrivacyConsent(consent);localStorage.setItem(ACC.config.richRelevanceConsentKey,consent);}},setDefaultRichRelevancePrivacySettings:function(){var consent=JSON.parse(localStorage.getItem(ACC.config.richRelevanceConsentKey));if(consent!==null){ACC.richRelevanceTracking.setRRPrivacyConsent(consent);return;}
if(ACC.config.richRelevanceOptOutCountries.indexOf(ACC.cookie.getCookieValueFor("ucountry"))!==-1){ACC.richRelevanceTracking.setRRPrivacyConsent(false);}else{ACC.richRelevanceTracking.setRRPrivacyConsent(true);}}};$(document).ready(function(){if(ACC.cookie.checkIfCookiesAreDisabled()){return;}
$('.js-richrelevance-component.fallback').hide();if(typeof richRelevanceTrackingData!=='undefined'){var timeOut=ACC.config.richRelevanceTimeOut;var existingPlaceholders=$(".js-richrelevance-component");ACC.richRelevanceTracking.trackCommon(richRelevanceTrackingData,existingPlaceholders);ACC.richRelevanceTracking.trackPageSpecific(richRelevanceTrackingData);window.addEventListener("uc_event",function(){ACC.richRelevanceTracking.setUserCentricsRichRelevancePrivacySettings();});ACC.richRelevanceTracking.setDefaultRichRelevancePrivacySettings();rr_flush_onload();RR.jsonCallback=function(){if(!ACC.richRelevanceTracking.timeOutExceeded){clearTimeout(ACC.richRelevanceTracking.timeOut);ACC.richRelevanceRenderer.renderAll();}};r3();ACC.richRelevanceTracking.timeOut=setTimeout(function(){ACC.richRelevanceTracking.timeOutExceeded=true;console.log('Timeout for RichRelevance');var dataLayer=(window.dataLayer=window.dataLayer||[]);dataLayer.push({event:'standardEventTracking',eventCategory:'RichRelevance Errors',eventAction:'timeout',eventLabel:'request timeout',eventValue:undefined,eventNonInteractive:true});ACC.richRelevanceRenderer.fallbackAll(existingPlaceholders);},timeOut);}});

ACC.richRelevanceRenderer={productPlacementCount:1,rrData:[],rrPlacements:[],rrComponentType:{STANDARD:'standard',BUY_TOGETHER:'buyTogether',HINTED:'hinted',SHOP_THIS_LOOK:'shopThisLook',IMAGE_WITH_PRODUCT:'imageWithProduct',IMAGE_WITH_PRODUCT_CAROUSEL:'imageWithProductCarousel',PRODUCT_GRID:'productGrid'},rrLayouts:{HINTED_JSON:"Hinted JSON",RR_TEST_BUT_TOGHETER:"RRTestBuyTogether",IMAGE_WITH_PRODUCT:"imageWithProduct",IMAGE_WITH_PRODUCT_CAROUSEL:'imageWithProductCarousel',PRODUCT_GRID:"productGrid",},renderAll:function(){ACC.richRelevanceRenderer.rrData=RR.data;ACC.richRelevanceRenderer.rrPlacements=ACC.richRelevanceRenderer.rrData?ACC.richRelevanceRenderer.rrData.JSON.placements:[];if(ACC.richRelevanceRenderer.rrPlacements.length>0){if(!window.productSuggestionClass){document.addEventListener('swaProductSuggestionsInitialized',function(){ACC.richRelevanceRenderer.getUpdatedPrices();});}else{ACC.richRelevanceRenderer.getUpdatedPrices();}}else{$(window).trigger("RRnoCartData");}},renderComponents:function(){var placementPageID=ACC.richRelevanceRenderer.rrData.JSON.placements[0].placement_name.split(".")[0];if(placementPageID==="add_to_cart_page"){if($("#swa-pdp-main").length){$(window).trigger("RRrenderCartFlyout");}else{$(window).trigger("RRnoCartData");}
return;}
$.each(ACC.richRelevanceRenderer.rrPlacements,;},renderComponent:function(placement,index){var componentContainer=$('.js-richrelevance-component[data-placement-name="'+placement.placement_name+'"]');if(!componentContainer.length){return;}
var componentType=ACC.richRelevanceRenderer.determineComponentType(placement);switch(componentType){case ACC.richRelevanceRenderer.rrComponentType.HINTED:ACC.richRelevanceRenderer.renderHinted(componentContainer,placement);break;case ACC.richRelevanceRenderer.rrComponentType.BUY_TOGETHER:ACC.richRelevanceRenderer.renderBuyTogether(componentContainer,placement);break;case ACC.richRelevanceRenderer.rrComponentType.SHOP_THIS_LOOK:ACC.richRelevanceRenderer.renderShopThisLook(componentContainer,placement,index);break;case ACC.richRelevanceRenderer.rrComponentType.IMAGE_WITH_PRODUCT:ACC.richRelevanceRenderer.renderImageWithProduct(componentContainer,placement);break;case ACC.richRelevanceRenderer.rrComponentType.IMAGE_WITH_PRODUCT_CAROUSEL:ACC.richRelevanceRenderer.renderImageWithProductCarousel(componentContainer,placement);break;case ACC.richRelevanceRenderer.rrComponentType.PRODUCT_GRID:ACC.richRelevanceRenderer.renderProductGrid(componentContainer,placement);break;default:ACC.richRelevanceRenderer.renderStandard(componentContainer,placement);}},renderCarouselHeadlines:function(componentContainer,fallbackStrategyMessage){var carouselHeadlines='';if(componentContainer.data('headline')||componentContainer.data('subheadline')){carouselHeadlines+='<h3 class="swa-overline-sans">'+componentContainer.data('headline')+'</h3>';carouselHeadlines+='<h2 class="swa-headline-serif--default">'+componentContainer.data('subheadline')+'</h2>';}else{carouselHeadlines='<h2 class="swa-headline-serif--default">'+fallbackStrategyMessage+'</h2>';}
componentContainer.find('.js-richRelevance-header').html(carouselHeadlines);},initializeCarouselBehavior:function(componentContainer){var productSuggestionCarousel=componentContainer[0].querySelector('.js-swa-product-suggestion');if(!window.productSuggestionClass||!productSuggestionCarousel){return;}
new window.productSuggestionClass(productSuggestionCarousel).init();},determineComponentType:function(placement){var componentType="";switch(placement.layout){case ACC.richRelevanceRenderer.rrLayouts.HINTED_JSON:componentType=ACC.richRelevanceRenderer.rrComponentType.HINTED;break;case ACC.richRelevanceRenderer.rrLayouts.RR_TEST_BUT_TOGHETER:componentType=ACC.richRelevanceRenderer.rrComponentType.BUY_TOGETHER;break;case ACC.richRelevanceRenderer.rrLayouts.IMAGE_WITH_PRODUCT:componentType=ACC.richRelevanceRenderer.rrComponentType.IMAGE_WITH_PRODUCT;break;case ACC.richRelevanceRenderer.rrLayouts.IMAGE_WITH_PRODUCT_CAROUSEL:componentType=ACC.richRelevanceRenderer.rrComponentType.IMAGE_WITH_PRODUCT_CAROUSEL;break;case ACC.richRelevanceRenderer.rrLayouts.PRODUCT_GRID:componentType=ACC.richRelevanceRenderer.rrComponentType.PRODUCT_GRID;break;default:componentType=ACC.richRelevanceRenderer.rrComponentType.STANDARD;}
return componentType;},renderHinted:function(componentContainer,placement){if(!componentContainer){return;}
var componentUid=componentContainer.data("component-uid");var placementName=componentContainer.data("placement-name");var maxProducts=componentContainer.data("max-products");if(!placement.seed){console.error("Seed item was removed due to not being available. Placement rendering for "+placementName+" stopped");return;}
var parentContainerTemplate='';parentContainerTemplate+='<div class="swa-container swa-container--spaced swa-container--product-suggestion">';parentContainerTemplate+='<div class="js-richRelevance-header swa-headlines swa-headlines--condensed swa-headlines--center js-swa-headlines">';parentContainerTemplate+='</div>';parentContainerTemplate+='<div data-placement-name="{placementName}" data-max-num-items="{componentMaxProducts}">';parentContainerTemplate+='<div class="swa-product-suggestion swa-product-suggestion__hinted">';parentContainerTemplate+='<div class="swa-product-suggestion__hinted--highlight js-swa-product-suggestion-hinted-highlight">';parentContainerTemplate+='<div class="swa-product-suggestion__item js-suggestion-hinted-highlight" data-placement-name="{placementName}">';parentContainerTemplate+='</div></div>';parentContainerTemplate+='<div id="swa-product-suggestion_{componentUid}" class="splide swa-product-suggestion swa-product-suggestion__hinted--carousel '+'js-swa-product-suggestion" data-slide-step-desktop="3" data-slide-step-mobile="1">';parentContainerTemplate+='<div class="splide__track" data-splide-el="track">';parentContainerTemplate+='<div class="splide__list js-suggestion-items" data-placement-name="{placementName}" aria-label="Product Slide">';parentContainerTemplate+='</div></div>';parentContainerTemplate+='<div class="splide__arrows swa-product-suggestion__arrows js-swa-product-suggestion-arrows" data-splide-el="controls">';parentContainerTemplate+='<button class="splide__arrow splide__arrow--prev js-swa-product-suggestion__prev" data-splide-dir="<">';parentContainerTemplate+='<span class="swa-product-suggestion__icon swa-product-suggestion__icon--left" role="img" aria-label="Previous"></span>';parentContainerTemplate+='</button>';parentContainerTemplate+='<button class="splide__arrow splide__arrow--next js-swa-product-suggestion__next" data-splide-dir=">">';parentContainerTemplate+='<span class="swa-product-suggestion__icon swa-product-suggestion__icon--right" role="img" aria-label="Next"></span>';parentContainerTemplate+='</button>';parentContainerTemplate+='</div></div></div></div></div>';parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{componentUid}/,componentUid);parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{placementName}/,placementName);parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{componentMaxProducts}/,maxProducts);var parseHTMLElement=$.parseHTML(parentContainerTemplate);componentContainer.append(parseHTMLElement[0]);componentContainer.append(parseHTMLElement[1]);var suggestionItemContainer=componentContainer.find('.js-suggestion-hinted-highlight[data-placement-name="'+placement.placement_name+'"]')[0];suggestionItemContainer.appendChild(ACC.richRelevanceRenderer.createItemTile(componentContainer,placement.seed,placement.placement_name,false));var itemContainer=componentContainer.find('.js-suggestion-items[data-placement-name="'+placement.placement_name+'"]')[0];ACC.richRelevanceRenderer.addRRSlidesToContainer(componentContainer,itemContainer,placement,3);ACC.richRelevanceRenderer.renderCarouselHeadlines(componentContainer,placement.strategy_message);ACC.richRelevanceRenderer.displayContentStageComponent(componentUid);ACC.richRelevanceRenderer.initializeCarouselBehavior(componentContainer);},displayContentStageComponent:function(componentUid){$(".js-richrelevance-component[data-component-uid='"+componentUid+"']").removeClass("swa-hidden");$(".swa-divider[data-component-uid='"+componentUid+"']").removeClass("swa-hidden");if(window.cl){window.requestAnimationFrame(function(){window.cl.responsive();});}},addRRSlidesToContainer:function(componentContainer,itemContainer,placement,slidesPerView){var createSlideElement=var slideElement=createSlideElement();placement.items.forEach(function(item,index){slideElement.appendChild(ACC.richRelevanceRenderer.createItemTile(componentContainer,item,placement.placement_name,true));itemContainer.appendChild(slideElement);slideElement=createSlideElement();});},renderShopThisLook:renderBuyTogether:function(componentContainer,placement){if(!componentContainer){return;}
var componentUid=componentContainer.data("component-uid");var placementName=componentContainer.data("placement-name");var maxProducts=componentContainer.data("max-products");if(!placement.seed){console.error("Seed item was removed due to not being available. Placement rendering for "+placementName+" stopped");return;}
var parentContainerTemplate='';parentContainerTemplate+='<div class="swa-container swa-container--spaced swa-container--product-suggestion">';parentContainerTemplate+='<div class="js-richRelevance-header swa-headlines swa-headlines--condensed swa-headlines--center js-swa-headlines">';parentContainerTemplate+='</div>';parentContainerTemplate+='<div class="swa-product-suggestion__wrapper" data-placement-name="{placementName}" data-max-num-items="{componentMaxProducts}">';parentContainerTemplate+='<div id="swa-product-suggestion_{componentUid}" class="splide swa-product-suggestion swa-product-suggestion__buy-together" data-placement-name="{placementName}">';parentContainerTemplate+='<img class="swa-product-suggestion__buy-together__cta js-swa-product-suggestion-buy-together-cta" '+'src="{plusRectangleUrl}" alt="Buy Together">';parentContainerTemplate+='</div></div></div>';parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{componentUid}/,componentUid);parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{placementName}/,placementName);parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{componentMaxProducts}/,maxProducts);parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{plusRectangleUrl}/,ACC.config.themeResourcePath+'/images/icons/icon-plus-rectangle-black.svg');var parseHTMLElement=$.parseHTML(parentContainerTemplate);componentContainer.append(parseHTMLElement[0]);componentContainer.append(parseHTMLElement[1]);var itemContainer=componentContainer.find('.swa-product-suggestion__buy-together[data-placement-name="'+placement.placement_name+'"]')[0];var leftItemTile=ACC.richRelevanceRenderer.createItemTile(componentContainer,placement.seed,placement.placement_name,true);var rightItemTile=ACC.richRelevanceRenderer.createItemTile(componentContainer,placement.items[0],placement.placement_name,true);itemContainer.appendChild(leftItemTile);itemContainer.appendChild(rightItemTile);ACC.richRelevanceRenderer.renderCarouselHeadlines(componentContainer,placement.strategy_message);ACC.richRelevanceRenderer.displayContentStageComponent(componentUid);},renderProductGrid:function(componentContainer,placement){if(!componentContainer){return;}
var componentUid=componentContainer.data("component-uid");var maxNumberOfProducts=componentContainer.data("max-products");var placementItems=placement.items.slice(0,maxNumberOfProducts);let productUrlPrefix=componentContainer.data("product-url-prefix");var getHtmlBasedOnFlags=(flags)=>{var flagsHtml='';if(!flags){return flagsHtml;}
for(var flagCode in flags){if(flags.hasOwnProperty(flagCode)){flagsHtml+='<div class="swa-flags__unlabeled__flag swa-headline-sans--tiny" style="color: #757575">'+flags[flagCode]+'</div>';}}
return flagsHtml;};var getHtmlBasedOnItem=(item,index,productUrlPrefix,placementName)=>{var itemsHTML='';itemsHTML+='<div class="swa-product-list__tile-container">';itemsHTML+='<div class="swa-plp-product-tile-wrapper">';itemsHTML+='<div class="swa-plp-product-tile">';itemsHTML+='<a href="'+ACC.richRelevanceRenderer.adjustProductUrl(item.productUrl,productUrlPrefix)+'"'
+' data-gtm-product-id="'+item.baseProduct+'"'
+' data-gtm-product-position="'+index+'"'
+' data-gtm-product-variant="'+item.variant+'"'
+' data-gtm-product-price="'+item.netPriceValue+'"'
+' data-gtm-product-coupon="'+item.coupon+'"'
+' data-gtm-product-listId="'+placementName+'">';let productName=item.name;itemsHTML+='<picture data-alt="'+productName+' , '+item.id+'">';itemsHTML+='<img src="'+item.image_url+'" loading="lazy" class="swa-plp-product-tile__image js-swa-richrelevance-image-set-dpr"'
+' alt="'+productName+'" title="'+productName+'">';itemsHTML+='</picture>';itemsHTML+='<div class="swa-plp-product-tile__information">';itemsHTML+='<div class="swa-flags js-swa-flags">';itemsHTML+='<div class="swa-flags__labeled">';if(item.percentage){itemsHTML+='<span class="swa-flags__labeled__flag swa-headline-sans--tiny" style="color: #5a5a5a;background: #f0eee4">';itemsHTML+='-'+item.percentage+'%';itemsHTML+='</span>';}
if(item.colors){itemsHTML+='<span class="swa-flags__labeled__flag swa-headline-sans--tiny" style="color: #5a5a5a;background: #f0eee4">';itemsHTML+=item.colors;itemsHTML+='</span>';}
itemsHTML+='</div>';if(item.flags&&!$.isEmptyObject(item.flags)){itemsHTML+='<div class="swa-flags__unlabeled">';itemsHTML+=getHtmlBasedOnFlags(item.flags);itemsHTML+='</div>';}
itemsHTML+='</div>';itemsHTML+='<p>';if(item.nameLine1){itemsHTML+='<span class="swa-plp-product-tile__information__title swa-labelflex-sans--small-strong">';itemsHTML+=item.nameLine1;itemsHTML+='</span>';}
if(item.nameLine2){itemsHTML+='<span class="swa-plp-product-tile__information__subtitle swa-labelflex-sans--small">';itemsHTML+=item.nameLine2;itemsHTML+='</span>';}
itemsHTML+='</p>';itemsHTML+='<div class="swa-plp-product-tile__information__price swa-label-sans--small  swa-label-sans--small">';itemsHTML+='<span class="swa-product-tile__information__price-current">'+item.price+'</span>';if(item.sale_price){itemsHTML+='<span class="swa-product-tile__information__price-old">'+item.sale_price+'</span>';}
itemsHTML+='</div>';itemsHTML+='</div>';itemsHTML+='</a>';itemsHTML+='</div>';itemsHTML+='</div>';itemsHTML+='</div>';return itemsHTML;}
var parentContainerTemplate='';parentContainerTemplate+='<div class="swa-cms-copy  swa-cms-copy--center swa-cms-copy--default">';if(componentContainer.data('subheadline')||componentContainer.data('headline')){parentContainerTemplate+='<div class="swa-headlines js-swa-headlines">';parentContainerTemplate+='<h3 class="swa-overline-sans swa-cms-copy__headline">'+componentContainer.data('headline')+'</h3>';parentContainerTemplate+='</div>';parentContainerTemplate+='<div class="swa-headlines js-swa-headlines">';parentContainerTemplate+='<h3 class="swa-headline-serif--big swa-cms-copy__subheadline">'+componentContainer.data('subheadline')+'</h3>';parentContainerTemplate+='</div>';}else if(placement.strategy_message){parentContainerTemplate+='<div class="swa-headlines js-swa-headlines">';parentContainerTemplate+='<h3 class="swa-headline-serif--big swa-cms-copy__subheadline">'+placement.strategy_message+'</h3>';parentContainerTemplate+='</div>';}
parentContainerTemplate+='</div>';parentContainerTemplate+='<div class="swa-product-list">';parentContainerTemplate+='<div class="swa-product-list__tiles">';placementItems.forEach(function(product,i){parentContainerTemplate+=getHtmlBasedOnItem(product,i+1,productUrlPrefix,placement.placement_name);})
parentContainerTemplate+='</div>';parentContainerTemplate+='</div>';var parseHTMLElement=$.parseHTML(parentContainerTemplate);componentContainer.append(parseHTMLElement[0]);componentContainer.append(parseHTMLElement[1]);ACC.richRelevanceRenderer.displayContentStageComponent(componentUid);},renderImageWithProduct:function(componentContainer,placement){if(!componentContainer){return;}
var placementItem=placement.items[0];var getHtmlBasedOnFlags=(flags)=>{var flagsHtml='';if(!flags){return flagsHtml;}
var i=0;for(var flagCode in flags){if(flags.hasOwnProperty(flagCode)){if(i>0){flagsHtml+='<span class="swa-cms-product-tile__label-separator"> · </span>';}
flagsHtml+='<div class="swa-headline-sans--tiny">'+flags[flagCode]+'</div>';}
i+=1;}
return flagsHtml;};let productName=placementItem.name;let productUrl=ACC.richRelevanceRenderer.adjustProductUrl(placementItem.link_url,componentContainer.data("product-url-prefix"));let parentContainerTemplate='';parentContainerTemplate+='<div class="swa-cms-product-tile ">';parentContainerTemplate+='<a href="'+productUrl+'"'
+' data-gtm-product-id="'+placementItem.baseProduct+'"'
+' data-gtm-product-position="1"'
+' data-gtm-product-variant="'+placementItem.variant+'"'
+' data-gtm-product-price="'+placementItem.netPriceValue+'"'
+' data-gtm-product-coupon="'+placementItem.coupon+'"'
+' data-gtm-product-listId="'+placement.placement_name+'">';var defaultImageUrl=ACC.config.themeResourcePath+'/images/transparent-pixel.gif';var itemImageUrl=placementItem.image_url;var itemImageContent=ACC.richRelevanceRenderer.createPictureWithImageContent(defaultImageUrl,itemImageUrl,277,277,'w_690','w_503','w_220','w_277','swa-cms-product-tile__image','swa-cms-product-tile__picture');parentContainerTemplate+='<div class="swa-cms-product-tile__image-wrapper">';parentContainerTemplate+=itemImageContent;parentContainerTemplate+='</div>';parentContainerTemplate+='<div class="swa-cms-product-tile__content">';parentContainerTemplate+='<div class="swa-cms-product-tile__content-labels">';if(placementItem.percentage){parentContainerTemplate+='<div class="swa-cms-product-tile__content-label swa-text-sans--small">';parentContainerTemplate+='-'+placementItem.percentage+"%";parentContainerTemplate+='</div>';}
if(placementItem.colors){parentContainerTemplate+='<div class="swa-cms-product-tile__content-label swa-text-sans--small">';parentContainerTemplate+=placementItem.colors;parentContainerTemplate+='</div>';}
parentContainerTemplate+='</div>';parentContainerTemplate+='<div class="swa-cms-product-tile__content-labels swa-cms-product-tile__content-labels--alternative">';parentContainerTemplate+=getHtmlBasedOnFlags(placementItem.flags);parentContainerTemplate+='</div>';parentContainerTemplate+='<h2>';if(placementItem.nameLine1&&placementItem.nameLine2){parentContainerTemplate+='<span class="swa-cms-product-tile__content-title swa-label-sans--default">';parentContainerTemplate+=placementItem.nameLine1;parentContainerTemplate+='</span>';parentContainerTemplate+='<span class="swa-cms-product-tile__content-subtitle swa-label-sans--default">';parentContainerTemplate+=placementItem.nameLine2;parentContainerTemplate+='</span>';}else{parentContainerTemplate+='<span class="swa-cms-product-tile__content-title swa-label-sans--default">';parentContainerTemplate+=placementItem.name;parentContainerTemplate+='</span>';}
parentContainerTemplate+='</h2>';parentContainerTemplate+='<div class="swa-cms-product-tile__content-price swa-label-sans--default">';parentContainerTemplate+='<div class="swa-cms-product-tile__content-price-current">'+placementItem.price+'</div>';parentContainerTemplate+='<div class="swa-cms-product-tile__content-price-old">'+placementItem.sale_price+'</div>';parentContainerTemplate+='</div>';parentContainerTemplate+='</div>';parentContainerTemplate+='</a>';parentContainerTemplate+='</div>';var parseHTMLElement=$.parseHTML(parentContainerTemplate);componentContainer.append(parseHTMLElement[0]);var componentUid=componentContainer.data("component-uid");ACC.richRelevanceRenderer.displayContentStageComponent(componentUid);},renderImageWithProductCarousel:function(componentContainer,placement){if(!componentContainer){return;}
var parentContainerTemplate='';var componentUid=componentContainer.data("component-uid");let productUrlPrefix=componentContainer.data("product-url-prefix");parentContainerTemplate+=this.renderImageWithProductCarouselForDesktopAndMobile(componentUid,placement,false,productUrlPrefix);parentContainerTemplate+=this.renderImageWithProductCarouselForDesktopAndMobile(componentUid,placement,true,productUrlPrefix);parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{componentUid}/,componentUid);componentContainer.html(parentContainerTemplate);ACC.richRelevanceRenderer.displayContentStageComponent(componentUid);new window.CmsImageWithProductCarouselClass(document.querySelector("#cmsProductCarouselMobile-"+componentUid).closest(".js-swa-cms-image-with-product-carousel")).init();},renderImageWithProductCarouselForDesktopAndMobile:function(componentUid,placement,isMobile,productUrlPrefix){var parentContainerTemplate='';if(isMobile){parentContainerTemplate+='<div class="splide swa-cms-image-with-product-carousel__slider-mobile" id="cmsProductCarouselMobile-';}else{parentContainerTemplate+='<div class="splide swa-cms-image-with-product-carousel__slider" id="cmsProductCarousel-';}
parentContainerTemplate+=componentUid;parentContainerTemplate+='">';parentContainerTemplate+='<div class="splide__track">';parentContainerTemplate+='<div class="splide__list">';for(var i=0;i<placement.items.length;i++){var placementItem=placement.items[i];var getHtmlBasedOnFlags=(flags)=>{var flagsHtml='';if(!flags||$.isEmptyObject(flags)){return flagsHtml;}
var j=0;for(var flagCode in flags){if(flags.hasOwnProperty(flagCode)){if(j>0){flagsHtml+='<span class="swa-cms-product-tile__label-separator"> · </span>';}
flagsHtml+='<div class="swa-headline-sans--tiny">'+flags[flagCode]+'</div>';}
j+=1;}
return flagsHtml;};let itemUrl=ACC.richRelevanceRenderer.adjustProductUrl(placementItem.link_url,productUrlPrefix);parentContainerTemplate+='<div class="splide__slide p-splide__slide">';parentContainerTemplate+='<div class="swa-cms-product-tile swa-cms-product-tile--small">';parentContainerTemplate+='<a href="'+itemUrl+'"'
+' data-gtm-product-id="'+placementItem.baseProduct+'"'
+' data-gtm-product-position="'+(i+1)+'"'
+' data-gtm-product-variant="'+placementItem.variant+'"'
+' data-gtm-product-price="'+placementItem.netPriceValue+'"'
+' data-gtm-product-coupon="'+placementItem.coupon+'"'
+' data-gtm-product-listId="'+placement.placement_name+'">';var defaultImageUrl=ACC.config.themeResourcePath+'/images/transparent-pixel.gif';var itemImageUrl=placementItem.image_url;var itemImageContent=ACC.richRelevanceRenderer.createPictureWithImageContent(defaultImageUrl,itemImageUrl,277,277,'w_362','w_310','w_240','w_240','swa-cms-product-tile__image swa-cms-product-tile__image','swa-cms-product-tile__picture');parentContainerTemplate+='<div class="swa-cms-product-tile__image-wrapper swa-cms-product-tile__image-wrapper--animated">';parentContainerTemplate+=itemImageContent;parentContainerTemplate+='</div>';parentContainerTemplate+='<div class="swa-cms-product-tile__content">';parentContainerTemplate+='<div class="swa-cms-product-tile__content-labels">';if(placementItem.percentage){parentContainerTemplate+='<div class="swa-cms-product-tile__content-label swa-text-sans--tiny">';parentContainerTemplate+='-'+placementItem.percentage+"%";parentContainerTemplate+='</div>';}
if(placementItem.colors){parentContainerTemplate+='<span class="swa-cms-product-tile__content-label swa-text-sans--tiny" ">';parentContainerTemplate+=placementItem.colors;parentContainerTemplate+='</span>';}
parentContainerTemplate+='</div>';parentContainerTemplate+='<div class="swa-cms-product-tile__content-labels swa-cms-product-tile__content-labels--alternative">';parentContainerTemplate+=getHtmlBasedOnFlags(placementItem.flags);parentContainerTemplate+='</div>';parentContainerTemplate+='<h2>';if(placementItem.nameLine1&&placementItem.nameLine2){parentContainerTemplate+='<span class="swa-product-tile__information__title swa-product-sans--name">';parentContainerTemplate+=placementItem.nameLine1;parentContainerTemplate+='</span>';parentContainerTemplate+='<span class="swa-product-tile__information__subtitle swa-product-sans--description">';parentContainerTemplate+=placementItem.nameLine2;parentContainerTemplate+='</span>';}else{parentContainerTemplate+='<span class="swa-product-tile__information__title swa-product-sans--name">';parentContainerTemplate+=placementItem.name;parentContainerTemplate+='</span>';}
parentContainerTemplate+='</h2>';parentContainerTemplate+='<div class="swa-cms-product-tile__content-price swa-label-sans--medium">';parentContainerTemplate+='<div class="swa-cms-product-tile__content-price-current">'+placementItem.price+'</div>';parentContainerTemplate+='<div class="swa-cms-product-tile__content-price-old">'+placementItem.sale_price+'</div>';parentContainerTemplate+='</div>';parentContainerTemplate+='</div>';parentContainerTemplate+='</a>';parentContainerTemplate+='</div>';parentContainerTemplate+='</div>';var imageLink=placementItem.image_url;parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{image_url}/,imageLink);}
parentContainerTemplate+='</div>';parentContainerTemplate+='</div>';parentContainerTemplate+='</div>';return parentContainerTemplate;},renderStandard:function(componentContainer,placement){if(!componentContainer){return;}
var parentContainerTemplate='';parentContainerTemplate+='<div class="swa-container swa-container--spaced swa-container--product-suggestion">';parentContainerTemplate+='<div class="js-richRelevance-header swa-headlines swa-headlines--condensed swa-headlines--center js-swa-headlines">';parentContainerTemplate+='</div>';parentContainerTemplate+='<div class="swa-product-suggestion__wrapper" data-placement-name="{placementName}" data-max-num-items="{componentMaxProducts}">';parentContainerTemplate+='<div id="swa-product-suggestion_{componentUid}" class="splide swa-product-suggestion js-swa-product-suggestion" data-slide-step-desktop="4" data-slide-step-mobile="2">';parentContainerTemplate+='<div class="splide__track" data-splide-el="track">';parentContainerTemplate+='<div class="splide__list js-richrelevance-items" aria-label="Product Slide" data-placement-name="{placementName}">';parentContainerTemplate+='</div></div>';parentContainerTemplate+='<div class="splide__arrows swa-product-suggestion__arrows js-swa-product-suggestion-arrows" data-splide-el="controls">';parentContainerTemplate+='<button class="splide__arrow splide__arrow--prev js-swa-product-suggestion__prev" data-splide-dir="<">';parentContainerTemplate+='<span class="swa-product-suggestion__icon swa-product-suggestion__icon--left" role="img" aria-label="Previous"></span>';parentContainerTemplate+='</button>';parentContainerTemplate+='<button class="splide__arrow splide__arrow--next js-swa-product-suggestion__next" data-splide-dir=">">';parentContainerTemplate+='<span class="swa-product-suggestion__icon swa-product-suggestion__icon--right" role="img" aria-label="Next"></span>';parentContainerTemplate+='</button>';parentContainerTemplate+='</div></div></div></div>';var componentUid=componentContainer.data("component-uid");var placementName=componentContainer.data("placement-name");var maxProducts=componentContainer.data("max-products");parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{componentUid}/,componentUid);parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{placementName}/,placementName);parentContainerTemplate=ACC.richRelevanceRenderer.replaceAll(parentContainerTemplate,/{componentMaxProducts}/,maxProducts);var parseHTMLElement=$.parseHTML(parentContainerTemplate);componentContainer.append(parseHTMLElement[0]);componentContainer.append(parseHTMLElement[1]);var itemContainer=componentContainer.find('.js-richrelevance-items[data-placement-name="'+placement.placement_name+'"]')[0];ACC.richRelevanceRenderer.addRRSlidesToContainer(componentContainer,itemContainer,placement,4);ACC.richRelevanceRenderer.renderCarouselHeadlines(componentContainer,placement.strategy_message);ACC.richRelevanceRenderer.displayContentStageComponent(componentUid);ACC.richRelevanceRenderer.initializeCarouselBehavior(componentContainer);},createItemTile:function(componentContainer,item,placementName){var defaultImageUrl=ACC.config.themeResourcePath+'/images/transparent-pixel.gif';var itemImageUrl=item.image_url;var itemImageContent=ACC.richRelevanceRenderer.createPictureWithImageContent(defaultImageUrl,itemImageUrl,127,127,'w_215','w_192','w_192','w_127','swa-product-tile__image js-swa-product-tile-image ls-is-cached');var floatPrice=item.price.match(/\d+(?:\.\d+)?/g);var floatSalePrice=item.sale_price.match(/\d+(?:\.\d+)?/g);if(floatPrice&&floatSalePrice&&parseFloat(floatPrice[0])>parseFloat(floatSalePrice[0])){console.error('Product with id "'+item.id+'" is not in the system so Price and SalePrice might not be correct!');}
if(item.percentage&&!floatSalePrice){console.error('Product with id "'+item.id+'" is not in the system so DiscountPercentage and SalePrice might not be correct!');}
let itemUrl=ACC.richRelevanceRenderer.adjustProductUrl(decodeURIComponent(item.link_url),componentContainer.data("product-url-prefix"));var itemHtml='';itemHtml+='<div class="swa-product-tile-wrapper  js-swa-product-tile-wrapper">';itemHtml+='<div class="swa-product-tile js-swa-product-tile">';itemHtml+='<a href="'+itemUrl+'" class="js-swa-product-tile-link" tabindex="0"'
+' data-gtm-product-id="'+item.baseProduct+'"'
+' data-gtm-product-position="'+ACC.richRelevanceRenderer.productPlacementCount++ +'"'
+' data-gtm-product-price="'+item.netPriceValue+'"'
+' data-gtm-product-variant="'+item.variant+'"'
+' data-gtm-product-coupon="'+item.coupon+'"'
+' data-gtm-product-listId="'+placementName+'" >';itemHtml+='<div class="swa-product-tile__image-wrapper">';itemHtml+=itemImageContent;itemHtml+='</div>';itemHtml+='<div class="swa-product-tile__information">';itemHtml+='<div class="swa-flags js-swa-flags">';itemHtml+='<div class="swa-flags__labeled">';if(item.percentage){itemHtml+='<span class="swa-flags__labeled__flag swa-headline-sans--tiny" style="color: #5a5a5a; background: #f0eee4">'
+'-'+Math.round(item.percentage)+'%</span>';}
if(item.colors){itemHtml+='<span class="swa-flags__labeled__flag swa-headline-sans--tiny" style="color: #5a5a5a; background: #f0eee4">'
+item.colors+'</span>';}
itemHtml+='</div>'
if(item.flags&&!$.isEmptyObject(item.flags)){itemHtml+='<div class="swa-flags__unlabeled">'+ACC.richRelevanceRenderer.getProductFlags(item.flags)+'</div>';}
itemHtml+='</div><p>';if(item.nameLine1){itemHtml+='<span class="swa-product-tile__information__title swa-product-tile__information__name swa-labelflex-sans--small-strong js-swa-product-tile-name">';itemHtml+=item.nameLine1;itemHtml+='</span>';}
if(item.nameLine2){itemHtml+='<span class="swa-product-tile__information__subtitle swa-labelflex-sans--small">';itemHtml+=item.nameLine2;itemHtml+='</span>';}
itemHtml+='<div class="swa-product-tile__information__price swa-label-sans--small js-swa-product-tile-price">';if(item.sale_price){itemHtml+='<span class="swa-product-tile__information__price-discount">'+item.price+'</span>';itemHtml+='<span class="swa-product-tile__information__price-old">'+item.sale_price+'</span> ';}else{itemHtml+='<span class="swa-product-tile__information__price-current">'+item.price+'</span>';}
itemHtml+='</div></div></a></div></div>';return $.parseHTML(itemHtml)[0];},createPictureWithImageContent:function(defaultImageUrl,itemImageUrl,imgWidth,imgHeight,wideImageWSize,desktopImageWSize,tabletImageWSize,mobileImageWSize,imgClasses,pictureClass){var preloadedWideImage=itemImageUrl.replace('w_auto',wideImageWSize);var preloadedDesktopImage=itemImageUrl.replace('w_auto',desktopImageWSize);var preloadedTabletImage=itemImageUrl.replace('w_auto',tabletImageWSize);var preloadedMobileImage=itemImageUrl.replace('w_auto',mobileImageWSize);var sourceSetElements='<source srcset="'
+preloadedWideImage.replace('dpr_auto','dpr_1.0')+' 1x, '
+preloadedWideImage.replace('dpr_auto','dpr_2.0')+' 2x, '
+preloadedWideImage.replace('dpr_auto','dpr_3.0')+' 3x" media="(min-width: 1450px)"/>'+'<source srcset="'
+preloadedDesktopImage.replace('dpr_auto','dpr_1.0')+' 1x, '
+preloadedDesktopImage.replace('dpr_auto','dpr_2.0')+' 2x, '
+preloadedDesktopImage.replace('dpr_auto','dpr_3.0')+' 3x" media="(min-width: 1025px)"/>'+'<source srcset="'
+preloadedTabletImage.replace('dpr_auto','dpr_1.0')+' 1x, '
+preloadedTabletImage.replace('dpr_auto','dpr_2.0')+' 2x, '
+preloadedTabletImage.replace('dpr_auto','dpr_3.0')+' 3x" media="(min-width: 760px)"/>'+'<source srcset="'
+preloadedMobileImage.replace('dpr_auto','dpr_1.0')+' 1x, '
+preloadedMobileImage.replace('dpr_auto','dpr_2.0')+' 2x, '
+preloadedMobileImage.replace('dpr_auto','dpr_3.0')+' 3x" media="(max-width: 759px)"/>';var imageElement='<img src="'+defaultImageUrl+'" '
+'loading="lazy" '
+'alt="Product tile" title="Product Suggestion" '
+'class="'+imgClasses+'" '
+'width="'+imgWidth+'" '
+'height="'+imgHeight+'" '
+'/>';return(!pictureClass?'<picture>':'<picture class="'+pictureClass+'">')+
sourceSetElements+
imageElement+'</picture>';},getProductFlags:function(flags){var flagsHtml='';if(!flags){return flagsHtml;}
for(var flagCode in flags){if(flags.hasOwnProperty(flagCode)){flagsHtml+='<span class="swa-flags__unlabeled__flag swa-flags__unlabeled__flag--new swa-product-sans--flag" style="color: #757575">'
+flags[flagCode]+'</span> ';}}
return flagsHtml;},handleSacPriceDataLookup:function(result){var rrPriceData;var isUpdated;$.each(ACC.richRelevanceRenderer.rrPlacements,function(index){var i=ACC.richRelevanceRenderer.rrPlacements[index].items.length;while(i--){rrPriceData=ACC.richRelevanceRenderer.rrPlacements[index].items[i];isUpdated=ACC.richRelevanceRenderer.updateRrPriceData(result,rrPriceData);currentName=ACC.richRelevanceRenderer.rrPlacements[index].items[i].name;firstCommaOccurance=currentName.indexOf(',');if(firstCommaOccurance>=0){ACC.richRelevanceRenderer.rrPlacements[index].items[i].nameLine1=currentName.substring(0,firstCommaOccurance);ACC.richRelevanceRenderer.rrPlacements[index].items[i].nameLine2=currentName.substring(firstCommaOccurance+2)}else{ACC.richRelevanceRenderer.rrPlacements[index].items[i].nameLine1=currentName;ACC.richRelevanceRenderer.rrPlacements[index].items[i].nameLine2='';}
if(!isUpdated){ACC.richRelevanceRenderer.rrPlacements[index].items.splice(i,1);}}
if(ACC.richRelevanceRenderer.rrPlacements[index].seed){rrPriceData=ACC.richRelevanceRenderer.rrPlacements[index].seed;isUpdated=ACC.richRelevanceRenderer.updateRrPriceData(result,rrPriceData);if(!isUpdated){delete ACC.richRelevanceRenderer.rrPlacements[index].seed;}}});ACC.richRelevanceDataLayerTracker.trackProductsToDataLayer(ACC.richRelevanceRenderer.rrData);ACC.richRelevanceRenderer.renderComponents();},updateRrPriceData:function(sacProducts,rrPriceData){var sacProduct=sacProducts[rrPriceData.id];var sacPriceData;if(sacProduct){sacPriceData=sacProduct.price;rrPriceData.flags=sacProduct.flags;rrPriceData.colors=sacProduct.colors;rrPriceData.baseProduct=sacProduct.baseProduct?sacProduct.baseProduct:rrPriceData.id;rrPriceData.variant=sacProduct.variant?sacProduct.variant:rrPriceData.id;rrPriceData.coupon=sacPriceData.priceList?sacPriceData.priceList:'';rrPriceData.netPriceValue=sacPriceData.netPriceValue;}
if(sacPriceData===undefined){return false;}
if(sacPriceData.formattedOriginalValue){rrPriceData.percentage=sacPriceData.discountPercentage;rrPriceData.price=sacPriceData.formattedValue;rrPriceData.sale_price=sacPriceData.formattedOriginalValue;}else{rrPriceData.percentage='';rrPriceData.price=sacPriceData.formattedValue;rrPriceData.sale_price='';}
return true;},getUpdatedPrices:function(){var rrProductCodes=[];$.each(ACC.richRelevanceRenderer.rrPlacements,function(index,placement){if($('.js-richrelevance-component[data-placement-name="'+placement.placement_name+'"]').length>0){$.each(placement.item});if(placement.seed){rrProductCodes.push(placement.seed.id);}}});if(rrProductCodes.length){rrProductCodes=rrProductCodes.toString();$.ajax({url:ACC.config.richRelevanceTrackingPriceDataUrl,cache:false,type:"GET",contentType:"application/json",async:true,data:{products:rrProductCodes},dataType:"json",success:function(result){if(!Object.keys(result).length&&result.constructor===Object){console.error("No products received from the system, we are not going to render anything ");return;}
ACC.richRelevanceRenderer.handleSacPriceDataLookup(result);if(ACC.richRelevanceSetDPR){ACC.richRelevanceSetDPR.replaceUrlDpr();}}});}},renderRecommendationCartItem:function(renderItem){var position=renderItem.positionIndex?renderItem.positionIndex:"";var defaultImageUrl=ACC.config.themeResourcePath+'/images/transparent-pixel.gif';var itemDivClass='swa-product-tile js-swa-product-tile';var primaryImageUrl=renderItem.primaryImageUrl;var productName=renderItem.productName;var itemDiv=$('<div class="'+itemDivClass+'" data-productcode="'+renderItem.productCode+'"'+' data-positionindex="'+position+'" role="option"></div>');var gtmAttributes='data-gtm-product-id = "'+renderItem.productCode+'" data-gtm-product-position = "'+position+'" data-gtm-product-price="'+(renderItem.salePrice||renderItem.productPrice)+'" data-gtm-product-listId="'+renderItem.placementName+'"';var linkA=$('<a href="'+renderItem.productUrl+'" title="'+renderItem.productName+'" '+gtmAttributes+'/>');var itemTemplate='<div class="swa-product-tile__image-wrapper">';var productPrimaryImage=$(itemTemplate+'<img loading="lazy" class="swa-product-tile__image js-swa-product-tile-image js-swa-richrelevance-image-set-dpr"'+' src="'+primaryImageUrl+'" alt="'+productName+'" title="'+productName+'"/>'+'</div>');linkA.append(productPrimaryImage);linkA.append(ACC.richRelevanceRenderer.getItemCartInfoDiv(renderItem.productName,renderItem.productTitle,renderItem.productSubtitle,renderItem.productPrice,renderItem.productUrl,renderItem.salePrice,renderItem.discountPercentage,renderItem.colors,renderItem.flags));itemDiv.append(linkA);return itemDiv;},getItemCartInfoDiv:function(productName,productTitle,productSubtitle,productPrice,productUrl,salePrice,discountPercentage,productColors,productFlags){var itemInfoDiv='';itemInfoDiv+='<div class="swa-product-tile__information">';itemInfoDiv+='<div class="swa-flags js-swa-flags">';itemInfoDiv+='<div class="swa-flags__labeled swa-flags__labeled--new">';if(discountPercentage){itemInfoDiv+='<span class="swa-flags__labeled__flag swa-flags__labeled__flag--new swa-product-sans--flag" style="color: #5a5a5a;background: #f0eee4;border-color: #f0eee4">';itemInfoDiv+="&minus;"+Math.round(discountPercentage)+"%";itemInfoDiv+="</span>";}
if(productColors){itemInfoDiv+='<span class="swa-flags__labeled__flag swa-flags__labeled__flag--new swa-product-sans--flag" style="color: #5a5a5a; background: #ffffff;border-color: #f0eee4">';itemInfoDiv+=productColors;itemInfoDiv+='</span>';}
itemInfoDiv+='</div>';if(productFlags&&!$.isEmptyObject(productFlags)){itemInfoDiv+='<div class="swa-flags__unlabeled">'+ACC.richRelevanceRenderer.getProductFlags(productFlags)+'</div>';}
itemInfoDiv+='</div>';itemInfoDiv+='<p>';if(productTitle){itemInfoDiv+='<span class="swa-product-tile__information__title swa-product-sans--name js-swa-product-tile-name">';itemInfoDiv+=productTitle;itemInfoDiv+='</span>';}
if(productSubtitle){itemInfoDiv+='<span class="swa-product-tile__information__subtitle swa-product-sans--description">';itemInfoDiv+=productSubtitle;itemInfoDiv+='</span>';}
itemInfoDiv+='</p>';itemInfoDiv+='<div class="swa-product-tile__information__price swa-label-sans--medium js-swa-product-tile-price">';if(salePrice){itemInfoDiv+='<span class="swa-product-tile__information__price-current swa-product-sans--price">'+
productPrice+'</span><span class="swa-product-tile__information__price-old swa-product-sans--old-price">'+salePrice+"</span></div></div></a>";}else{itemInfoDiv+='<div class="swa-product-tile__information__price-current swa-product-sans--price">'+productPrice+'</div></div></a>';}
return itemInfoDiv;},renderCartFlyout:function(componentContainer,data){if(data===undefined){return;}
var headerContainer=$('<div class="swa-cart-rrelevance__headline">'+'<div class="swa-headlines">'+'<h5 class="swa-label-sans--medium">'+ACC.global.decodeHTMLEntities(data.strategy_message)+"</h5></div></div>");componentContainer.append(headerContainer);var rrContainer=$('<div class="swa-cart-rrelevance__items js-swa-product-tile-items" data-placementname="'+data.placement_name+'">');var RrelevanceItem=$("<div class='swa-product-tile-wrapper'></div>");var maxLength=data.items.length<4?data.items.length:4;for(var i=0;i<maxLength;i++){var renderItem={productCode:data.items[i].id,productName:data.items[i].name,productTitle:data.items[i].nameLine1,productSubtitle:data.items[i].nameLine2,productUrl:data.items[i].link_url,primaryImageUrl:data.items[i].image_url,productPrice:data.items[i].price,salePrice:data.items[i].sale_price,discountPercentage:data.items[i].percentage,positionIndex:i+1,placementName:data.placement_name,colors:data.items[i].colors,flags:data.items[i].flags};var itemDiv=ACC.richRelevanceRenderer.renderRecommendationCartItem(renderItem);RrelevanceItem.append(itemDiv);rrContainer.append(RrelevanceItem);RrelevanceItem=$("<div class='swa-product-tile-wrapper'></div>");componentContainer.append(rrContainer);}
componentContainer.removeClass('swa-hidden');if(window.cl){window.requestAnimationFram});}},fallbackAll:function(){var $rrComponents=$(".js-richrelevance-component");var foundAtLeastOneShowing=false;for(var i=0;i<$rrComponents.length;i++){var $parentContainer=$($rrComponents[i]).parent();if(!$parentContainer.hasClass("swa-hidden")){foundAtLeastOneShowing=true;break;}}
if(!foundAtLeastOneShowing){$(".js-richrelevance-component.fallback").removeClass("swa-hidden");}
var dataLayer=window.dataLayer=window.dataLayer||[];if(!ACC.richRelevanceTracking.timeOutExceeded&&($rrComponents.length&&RR.data.JSON.placements.length<$rrComponents.length)){dataLayer.push({event:'standardEventTracking',eventCategory:'RichRelevance Errors',eventAction:'no data',eventLabel:'data for '+($rrComponents.length-RR.data.JSON.placements.length)+' placement was expected but not received',eventValue:undefined,eventNonInteractive:true});}},replaceAl},adjustProductUrl:function(url,urlPrefix){if(!urlPrefix||!(urlPrefix.length>0)){return url;}
return url.replace('/p-',urlPrefix+'p-');}};

ACC.richRelevanceDataLayerTracker={_autoload:["bindClickEvent"],bindClickEvent:function(){$(document).on("click",".js-trackingrichrelevanceclickedevent",function(){$.ajax({url:ACC.config.richRelevanceTrackingDataLayerClickUrl,cache:false,type:'GET',contentType:"application/json",data:{"listId":$(this).closest("*[data-placementname]").attr("data-placementname"),"listType":"productTeaserComponent","product":$(this).closest("*[data-productcode]").attr("data-productcode"),"event":"productClick","position":$(this).closest("*[data-positionindex]").attr("data-positionindex")},dataType:"json",success:function(result){dataLayer.push(result);}});});},trackProductsToDataLayer:function(dataAvailable){dataAvailable.JSON.placements.forEach(function(placement){var productCodes="";if(placement.seed){productCodes+=placement.seed.id?placement.seed.id+",":"";}
placement.items.forEac});if(productCodes!==""){$.ajax({url:ACC.config.richRelevanceTrackingDataLayerUrl,cache:false,type:'GET',contentType:"application/json",data:{"listId":placement.placement_name,"listType":"productTeaserComponent","products":productCodes,"event":"productImpressions"},dataType:"json",succes}});}});}};

ACC.richRelevanceSetDPR={replaceUrlDpr:function(){var images=document.querySelectorAll('.js-swa-richrelevance-image-set-dpr');images.forEach(function(image){var userDPR=Math.ceil(window.devicePixelRatio);var linkDPR='dpr_'+userDPR+'.0';var imageSrc=image.src;var newImageSrc='';var isTablet=window.innerWidth<760;var linkWidth='w_'+(isTablet?500:360);newImageSrc=imageSrc.replace('dpr_auto',linkDPR).replace('w_auto',linkWidth);image.src=newImageSrc;});}};
