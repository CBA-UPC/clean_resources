/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"87ca43d4"}},[t._v("企业部门变更")]),t._v(" "),e("h2",{attrs:{id:"a692e1e2"}},[t._v("事件描述")]),t._v(" "),e("p",[t._v("部门创建/部门更新/部门删除时触发。")]),t._v(" "),e("h2",{attrs:{id:"f5fc25fd"}},[t._v("订阅说明")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("事件主体")])]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("wps.open.plus.dept")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("回调地址")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("请先在"),e("code",[t._v("开发者后台-事件订阅")]),t._v("模块配置地址 "),e("a",{attrs:{href:"https://open-xz.wps.cn/admin/app",target:"_blank",rel:"noopener noreferrer"}},[t._v("前往配置"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("支持应用类型")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("企业自建应用、第三方企业应用")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("权限要求")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("访问企业通讯录（corp_contacts.read）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("解密方式")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("详见 "),e("RouterLink",{attrs:{to:"/pages/server/events/security-check/",target:"_blank"}},[t._v("解密算法")])],1)])])]),t._v(" "),e("h2",{attrs:{id:"1ce5ab71"}},[t._v("事件体（解密前）")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("名称")])]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("类型")])]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("说明")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("topic")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v('消息主题（值为"wps.open.plus.dept"）')])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("operation")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("消息变更动作（创建:create 更新:update 删除:delete）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("time")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("integer")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("时间（秒为单位的时间戳）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("nonce")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("iv 向量（解密时使用）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("signature")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("消息签名")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("encrypted_data")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("消息变更的加密字段")])])])]),t._v(" "),e("h2",{attrs:{id:"fb96bf8e"}},[t._v("事件体示例（解密前）")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"topic"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"wps.open.plus.dept"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"operation"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nonce"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxxxx"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"signature"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxxxxxxxxxx"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"time"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 秒为单位的时间戳")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"encrypted_data"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxxxx"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"cdc3dec3"}},[t._v("事件体（解密后）")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("名称")])]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("类型")])]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("说明")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("src")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("array")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("变更前信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v(" ∟ company_id")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("企业 id")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v(" ∟ dept_id")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("array")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("部门 id")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v(" ∟ name")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("部门名称（仅部门名称发生变更时推送该字段）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v(" ∟ parent_id")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("上级部门 id（仅上级部门发生变更时推送该字段）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("dest")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("array")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("变更后信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v(" ∟ company_id")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("企业 id")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v(" ∟ dept_id")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("array")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("部门 id（仅上级部门发生变更时推送该字段）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v(" ∟ name")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("部门名称（仅部门名称发生变更时推送该字段）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v(" ∟ parent_id")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("上级部门 id")])])])]),t._v(" "),e("h2",{attrs:{id:"7037a285"}},[t._v("事件体示例（解密后）")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    src"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("                                 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//变更前 (变更动作为创建时，解密后为空，可不处理)")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"company_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"COMPANYID"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//企业Id")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dept_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DEPTID"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//部门Id")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NAME"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//部门Name")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parent_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PARENTID"')]),t._v("        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//上级部门")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        ...\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dest"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("                                 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//变更后 (变更动作为删除时，解密后为空，可不处理)")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"company_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"COMPANYID"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//企业Id")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dept_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DEPTID"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//部门Id")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NAME"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//部门Name")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parent_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PARENTID"')]),t._v("        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//上级部门")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        ...\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);