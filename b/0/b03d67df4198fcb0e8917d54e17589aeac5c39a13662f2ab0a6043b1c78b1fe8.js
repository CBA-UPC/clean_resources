var ezVideoAnalytics=[function(e,t,i){var a=i(17)();e.exports=a;try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},function(e,t){function i(e,t,i,a,n,r,o){try{var s=e[r](o),d=s.value}catch(e){return void i(e)}s.done?t(d):Promise.resolve(d).then(a,n)}e.exports=function(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function s(e){i(o,n,r,s,d,"next",e)}function d(e){i(o,n,r,s,d,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function i(t){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){"use strict";i.r(t),i.d(t,"NewAnalyticsPlayer",(function(){return F})),i.d(t,"NewVideoAdInitializer",();var a=i(0),n=i.n(a),r=i(1),o=i.n(r);unction d(){var e,t={};return"undefined"!=typeof videoID&&(t.content_id=videoID),"undefined"!=typeof title&&(t.video_title=title),t.uuid=(e=(new Date).getTime(),e+=performance.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)}))),t.total_play_time=0,t.play_cnt=0,t.pause_cnt=0,t.ad_cnt=0,t.seek_time=0,t.completed=!1,t.errored=!1,t.removed=!1,t.muted=!1,t.seek_back_click=0,t.seek_forward_click=-1,t.seek_back_scrubbing=0,t.seek_forward_scrubbing=0,t}function l(e){if(!e||0===Object.keys(e).length)return!1;if("undefined"!=typeof _ezaq&&_ezaq.domain_id){var t=_ezaq.domain_id;if(e.DomainIdOwner!==t&&e.DomainIdShare===t)return!0}return!1}function u(){if(h()){var e=Array.from(arguments);e.unshift("[Video Ads]"),console.log.apply(console,e)}}function h(){return"1"===new URLSearchParams(window.location.search).get("ez_vid_debug")}function v(e){for(var t=[],i=e;null!==i;)t.push(i.toString()),i="innerError"in i?i.innerError():null;return t.join("; inner error: ").substring(0,256)}var c=function(){function e(t,i,a,r){n()(this,e),u("VideoAdInitializer constructor called"),this.videoPlayer_=t,google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.isEmbeddedPlayer()&&google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),google.ima.settings.setLocale(a),google.ima.settings.setNumRedirects(8),this.videoAdContainerId="ez-video-ad-container-"+i.PlayerId;var o=document.getElementById(this.videoAdContainerId);o?(google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.adDisplayContainer_=new google.ima.AdDisplayContainer(o,this.videoPlayer_.getVideoElement()),this.adsLoader_=new google.ima.AdsLoader(this.adDisplayContainer_),this.adsManager_=null,this.containerInitialized=!1,i.IsAutoPlay&&(r.autoplay_allowed||r.autoplay_allowed_muted)&&this.initializeContainer()):u("Ad container missing or deleted, not loading ads")}return o()(e,[{key:"initializeContainer",value:,{key:"isContainerInitialized",value:function(){return this.containerInitialized}},{key:"attachAdEventListener",value:function(e,t,i){this.adsLoader_.addEventListener(e,t,!1,i)}},{key:"isEmbeddedPlayer",value:]),e}(),y=i(2),f=i.n(y);i(4),i(5),i(3);i(11),new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});"undefined"!=typeof ezVideoAdConductor&&ezVideoAdConductor.getVideoAdConductor();var p=function(){function e(t,i,a,r,o,s,d){n()(this,e),u("VideoAdRendering constructor"),this.videoAdManager_=t,this.videoPlayer_=i,this.isPlaylist=o,this.videoObject=s,this.customClickDiv_=document.getElementById("customClick"),this.contentCompleteCalled_=!1,this.isAdRequested=!1,this.isMuted=i.getPlayerMute(),this.isPlaying=!1,this.adUnit=a,this.adsInitializer=r,this.adsLoader_=r.adsLoader_,this.onResizeCallback=this.bind_(this,this.playerResizeHandler),this.adTrackingTimer=null,this.adsLoader_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded_,!1,this),this.adsLoader_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_,!1,this),u("ads loader setup. adsLoader_:",this.adsLoader_),this.prerollQueued=!1,this.prerollAdsRequest=null,this.adsLoaded=!1,this.setAutoplay(d),this.adsInitializer.isContainerInitialized()||this.waitForInitialUserInteraction()}return o()(e,[{key:"setAutoplay",value:function(e){var t=!1,i=!1;e&&(t=e.autoplay_allowed,i=e.autoplay_allowed_muted),this.autoplayAllowed=this.videoPlayer_.isPlayerAutoplay()&&t,this.autoplayRequiresMuted=this.videoPlayer_.isPlayerAutoplay()&&i}},{key:"waitForInitialUserInteraction",value:function(){this.startEvent="click",(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&(this.startEvent="touchend"),this.initAdDisplayContainer=function(){u("Initializing ad display container after user input"),this.adsInitializer.initializeContainer(),this.videoPlayer_.getVideoContainer().removeEventListener(this.startEvent,this.boundAdDisplayInit),this.adsLoaded&&(u("Starting ads manager"),this.startAdsManager_(this.adsManager_))},this.boundAdDisplayInit=this.initAdDisplayContainer.bind(this),this.videoPlayer_.getVideoContainer().addEventListener(this.startEvent,this.boundAdDisplayInit),u("Waiting for user input to initialize ad display container")}},{key:"determineIfShouldPause",value:function(){return!this.videoAdManager_.isOutstream&&(this.pauseAfterStart?(u("video is currently paused. delaying video ads from playing"),this.pauseAfterStart=!1,this.videoAdManager_.pauseAd(),!0):!this.videoPlayer_.getPlayerViewable()&&(u("video is not in viewport. delaying video ads from playing"),this.videoAdManager_.pauseAd(),this.videoPlayer_.once("videoOnScreen",(function(){this.videoAdManager_.resumeAd()})),!0))}},{key:"attachPlayerResizeEvent",value:,{key:"playerResizeHandler",value:function(e){var t=this.videoPlayer_.getVideoDimensions();this.resize(t.width,t.height,!1)}},{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"requestAds",value:function(e){if(this.isAdRequested)u("Ads are already requested!!!");else if(this.videoPlayer_.getVideoElement()){u("requestAds to adsLoader"),this.isMuted=this.videoPlayer_.getPlayerMute(),this.isAdRequested=!0,this.contentCompleteCalled_=!1,this.allAdsCompleted_=!1;var t=new google.ima.AdsRequest;t.adTagUrl=e;var i=this.videoPlayer_.getVideoDimensions();t.linearAdSlotWidth=i.width,t.linearAdSlotHeight=i.height,t.nonLinearAdSlotWidth=i.width,t.nonLinearAdSlotHeight=150,t.vastLoadTimeout=7e3,t.pageUrl=window.location.href,"undefined"!=typeof vectx?t.pageUrl=vectx.parent_url:"undefined"!=typeof magicOutstreamCtx&&(t.pageUrl=magicOutstreamCtx.parent_url),t.contentTitle=this.videoObject.VideoTitle,t.contentDuration=this.videoPlayer_.getVideoLength(),t.setAdWillAutoPlay(this.autoplayAllowed),t.setAdWillPlayMuted(this.autoplayRequiresMuted),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("adContinuousPlayback")&&this.adUnit.toLowerCase().includes("outstream")&&(2===__ezOutstream.adContinuousPlayback&&t.setContinuousPlayback(!0),1===__ezOutstream.adContinuousPlayback&&t.setContinuousPlayback(!1)),u("adsLoader",this.adsLoader_,"adsRequest",t),this.adsLoader_.requestAds(t)}}},{key:"waitForAdsManager",value:function(e){var t=this,i=setInterval((,1e3)}},{key:"isAdPlaying",value:function(){return this.isPlaying}},{key:"pause",value:function(){this.adsManager_&&(this.adsManager_.pause(),this.isPlaying=!1)}},{key:"resume",value:,{key:"isAdMuted",value:function(){return this.isMuted}},{key:"mute",value:function(){this.adsManager_&&(this.adsManager_.setVolume(0),this.isMuted=!0)}},{key:"unmute",value:,{key:"setVolume",value:,{key:"resize",value:function(e,t,i){this.adsManager_&&(i?this.adsManager_.resize(e,t,google.ima.ViewMode.FULLSCREEN):this.adsManager_.resize(e,t,google.ima.ViewMode.NORMAL))}},{key:"contentEnded",value:function(){this.contentCompleteCalled_=!0,this.adsManager_&&(this.adsManager_.destroy(),this.adsManager_=null),this.videoAdManager_.videoAdUi.hideUi(),this.adsLoader_.contentComplete()}},{key:"onAdsManagerLoaded_",value:function(e){u("Ad loaded event");var t=new google.ima.AdsRenderingSettings;t.useStyledLinearAds=!1,t.useStyledNonLinearAds=!0,t.enablePreloading=!0,t.mimeTypes=["video/mp4","video/ogg"],t.loadVideoTimeout=15e3,this.adsManager_=e.getAdsManager(this.videoPlayer_.getVideoElement(),t),this.adsManager_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_,!1,this),this.adsManager_.addEventListener(google.ima.AdEvent.Type.LOG,this.onLogEvent_,!1,this),this.adsInitializer.adsManager_=this.adsManager_,this.adsLoaded=!0,this.adsInitializer.isContainerInitialized()&&(u("Ad display container initialized. Starting ads manager."),this.startAdsManager_(this.adsManager_))}},{key:"startAdsManager_",value:function(e){e.isCustomClickTrackingUsed()&&(this.customClickDiv_.style.display="table"),e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested_,!1,this),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested_,!1,this);var t=[google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.USER_CLOSE];for(var i in t)e.addEventListener(t[i],this.onAdEvent_,!1,this);this.initAdManager(e),this.videoAdManager_.handleStartAd(),e.start()}},{key:"initAdManager",value:function(e){if(this.videoPlayer_.isFullscreen())e.init(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN);else{var t=this.videoPlayer_.getVideoDimensions();"undefined"!=typeof magicOutstreamCtx&&(t={width:"100%",height:"100%"}),e.init(t.width,t.height,google.ima.ViewMode.NORMAL)}}},{key:"onContentPauseRequested_",value:function(){u("onContentPauseRequested_"),this.videoAdManager_.pauseForAd(),this.videoAdManager_.setVideoEndedCallbackEnabled(!1)}},{key:"onContentResumeRequested_",value:function(){this.videoAdManager_.setVideoEndedCallbackEnabled(!0),this.videoAdManager_.videoAdUi.hideUi(),this.contentCompleteCalled_&&!this.isPlaylist||this.videoAdManager_.resumeAfterAd(!0)}},{key:"onAdEvent_",value:function(e){var t;switch(u("Ad event: ",e),"undefined"!=typeof ezVideoAdConductor&&(t=ezVideoAdConductor.getVideoAdConductor()),e.type){case google.ima.AdEvent.Type.AD_CAN_PLAY:"undefined"!=typeof ezOutstreamPlayer&&"ez-video-outstream"===this.videoPlayer_.player.player.id_&&(ezOutstreamPlayer.RaisePlayer(),this.videoObject.IsMagicEmbed&&window.parent.postMessage({name:"showOutstream"},"*"));break;case google.ima.AdEvent.Type.STARTED:var i=this.determineIfShouldPause();this.currentAd=e.getAd(),u("Ad event getAd: ",e.getAd()),this.currentAd.isLinear()&&(this.adTrackingTimer=setInterval(this.onAdPlayTracker.bind(this),250)),this.videoAdManager_.videoAdUi.onAdBreakStart(e),!t||this.adUnit.toLowerCase().includes("outstream")||i||t.dispatchEvent("instreamAdResumed",{player:this.videoPlayer_.player.player}),!this.videoPlayer_.isCurrentlyFloating()||1!==this.videoPlayer_.videoObject.MagicPlaceholderType||2!==this.videoPlayer_.videoObject.MagicBehaviorVersion&&3!==this.videoPlayer_.videoObject.MagicBehaviorVersion||this.videoPlayer_.player.player.trigger("force-show-container");break;case google.ima.AdEvent.Type.CLICK:this.videoAdManager_.adClicked();break;case google.ima.AdEvent.Type.LOADED:this.isPlaying=!0,this.pauseAfterStart=this.videoPlayer_.paused();break;case google.ima.AdEvent.Type.LOG:var a=e.getAdData();a.adError&&console.log("Non-fatal error occurred: "+a.adError.getMessage());break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.isAdRequested=!1,this.isPlaying=!1,this.adsManager_&&(this.adsManager_.destroy(),this.adsManager_=null),this.adTrackingTimer&&clearInterval(this.adTrackingTimer),"undefined"!=typeof ezOutstreamPlayer&&"ez-video-outstream"===this.videoPlayer_.player.player.id_?(ezOutstreamPlayer.LowerPlayer(),this.videoObject.IsMagicEmbed&&window.parent.postMessage({name:"hideOutstream"},"*"),ezOutstreamPlayer.CallNextAdBreak()):t&&t.dispatchEvent("instreamAdEnded",{player:this.videoPlayer_.player.player}),this.videoAdManager_.videoAdUi.hideUi(),this.videoAdManager_.videoAdUi.onAdBreakEnd(),this.adsLoader_.contentComplete(),!this.videoPlayer_.isCurrentlyFloating()||1!==this.videoPlayer_.videoObject.MagicPlaceholderType||2!==this.videoPlayer_.videoObject.MagicBehaviorVersion&&3!==this.videoPlayer_.videoObject.MagicBehaviorVersion||this.videoPlayer_.player.player.trigger("force-hide-container");break;case google.ima.AdEvent.Type.PAUSED:this.videoAdManager_.videoAdUi.onAdsPaused();break;case google.ima.AdEvent.Type.RESUMED:this.videoAdManager_.videoAdUi.onAdsResumed(),t&&!this.adUnit.toLowerCase().includes("outstream")&&t.dispatchEvent("instreamAdResumed",{player:this.videoPlayer_.player.player});break;case google.ima.AdEvent.Type.USER_CLOSE:e.getAd().isLinear()||(this.isAdRequested=!1,this.isPlaying=!1,this.videoAdManager_.videoAdUi.hideUi())}}},{key:"onAdPlayTracker",value:function(){if(null!=this.adsManager_){var e=this.adsManager_.getRemainingTime(),t=this.currentAd.getDuration(),i=t-e;i=i>0?i:0;var a,n=0;this.currentAd.getAdPodInfo()&&(a=this.currentAd.getAdPodInfo().getAdPosition(),n=this.currentAd.getAdPodInfo().getTotalAds()),this.videoAdManager_.videoAdUi.updateAdUi(i,e,t,a,n)}}},{key:"onAdError_",value:function(e){u("Ad error: "+v(e.getError())),this.adsManager_&&(this.adsManager_.destroy(),this.adsManager_=null),901==e.getError().getErrorCode()&&this.videoPlayer_.play(),this.retryAdFill(e)}},{key:"retryAdFill",value:function(e){if(e){var t=this.videoAdManager_.currentAdBreak;if(t){var i=!1,a=e.getError().getErrorCode();1009===a||303===a?(u("retrying ad request",t),i=this.videoAdManager_.retryAdRequest(t)):(u("retryAdFill errorCode:",a,", description:",v(e.getError()),", adunit:",this.adUnit),1005===a&&t.retryCount<1&&(t.retryCount++,__ez.vhb.bid(t),i=!0))}if(!i&&this.videoPlayer_)__ez.vhb.biddingComplete(t.getPlayerId()),this.videoPlayer_.attachAdAnalytics(this.adUnit,void 0,this.videoObject).videoAdEventHandler.sendUnfilledVadPixel(t,v(e.getError())),t.isOutstream&&"undefined"!=typeof ezOutstreamPlayer&&(u("ad not filled"),ezOutstreamPlayer.CallNextAdBreak())}else u("Missing ad error event - skipping retry");this.videoAdManager_.videoAdUi.hideUi(),this.isAdRequested=!1,this.isPlaying=!1,this.videoAdManager_.resumeAfterAd(!1)}},{key:"onLogEvent_",value:function(e){var t=e.getAdData();if(t.adError){u("Non-fatal error: "+v(t.adError));var i=this.videoAdManager_.currentAdBreak;if(this.videoPlayer_)this.videoPlayer_.attachAdAnalytics(this.adUnit,void 0,this.videoObject).videoAdEventHandler.sendUnfilledVadPixel(i,v(t.adError))}}}]),e}(),_=function(){function e(t){n()(this,e),f()(this,"player",null),f()(this,"currentAd",null),f()(this,"adContainerDiv",null),f()(this,"controlsDiv",document.createElement("div")),f()(this,"countdownDiv",document.createElement("div")),f()(this,"seekBarDiv",document.createElement("div")),f()(this,"progressDiv",document.createElement("div")),f()(this,"playPauseDiv",document.createElement("div")),f()(this,"muteDiv",document.createElement("div")),f()(this,"sliderDiv",document.createElement("div")),f()(this,"sliderLevelDiv",document.createElement("div")),f()(this,"fullscreenDiv",document.createElement("div")),f()(this,"countdownDiv",document.createElement("div")),f()(this,"boundOnMouseUp",this.onMouseUp.bind(this)),f()(this,"boundOnMouseMove",this.onMouseMove.bind(this)),this.player=t,this.adContainerDiv=t.getAdContainer(),this.adContainerDiv.className="ez-video-ad-container",this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.top="0px",this.adContainerDiv.style.zIndex=999,this.createUi(),this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1)}return o()(e,[{key:"createUi",value:function(){this.controlsDiv.className="ez-vad-controls",this.controlsDiv.style.width="100%",this.countdownDiv.className="ez-vad-countdown",this.seekBarDiv.className="ez-vad-seek-bar",this.seekBarDiv.style.width="100%",this.progressDiv.className="ez-vad-progress",this.playPauseDiv.classList.add("ez-vad-play-pause","ez-vad-playing"),this.playPauseDiv.addEventListener("click",this.onPlayPauseClick.bind(this),!1),this.muteDiv.classList.add("ez-vad-mute","ez-vad-non-muted"),this.muteDiv.addEventListener("click",this.onMuteClick.bind(this),!1),this.sliderDiv.className="ez-vad-slider",this.sliderDiv.addEventListener("mousedown",this.onVolumeSliderMouseDown.bind(this),!1),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&(this.sliderDiv.style.display="none"),this.sliderLevelDiv.className="ez-vad-slider-level",this.fullscreenDiv.classList.add("ez-vad-fullscreen","ez-vad-non-fullscreened"),this.fullscreenDiv.addEventListener("click",this.onFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)}},{key:"onPlayPauseClick",value:function(){this.player.adRenderer.togglePlayPause()}},{key:"onMuteClick",value:function(){this.player.adRenderer.toggleMuteUnmute()}},{key:"onFullscreenClick",value:,{key:"onAdsPaused",value:function(){this.playPauseDiv.classList.add("ez-vad-paused"),this.playPauseDiv.classList.remove("ez-vad-playing"),this.showAdControls()}},{key:"onAdsResumed",value:,{key:"onAdsPlaying",value:function(){this.playPauseDiv.classList.add("ez-vad-playing"),this.playPauseDiv.classList.remove("ez-vad-paused")}},{key:"updateAdUi",value:function(e,t,i,a,n){var r=Math.floor(t/60),o=Math.floor(t%60);o.toString().length<2&&(o="0"+o);var s=": ";n>1&&(s=" ("+a+" of "+n+"): "),this.countdownDiv.innerHTML="Advertisement"+s+r+":"+o;var d=100*(e/i);this.progressDiv.style.width=d+"%"}},{key:"unmute",value:function(){this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted"),this.sliderLevelDiv.style.width=100*this.player.getPlayerVolume()+"%"}},{key:"mute",value:function(){this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted"),this.sliderLevelDiv.style.width="0%"}},{key:"onVolumeSliderMouseDown",value:,{key:"onMouseMove",value:function(e){this.changeVolume(e)}},{key:"onMouseUp",value:,{key:"changeVolume",value:function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth*100;t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==t?(this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted")):(this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted")),this.player.setPlayerVolume(t/100),this.player.adRenderer.ads_.setVolume(t/100)}},{key:"showUi",value:function(){this.adContainerDiv.style.display="block"}},{key:"hideUi",value:,{key:"onAdContainerClick",value:,{key:"reset",value:function(){this.hideUi()}},{key:"onAdError",value:function(){this.hideUi()}},{key:"onAdBreakStart",value:function(e){this.currentAd=e.getAd(),this.onPlayerVolumeChanged(this.player.getPlayerVolume()),this.showUi(),this.currentAd.isLinear()&&(this.controlsDiv.style.display="block",this.onAdsPlaying(),this.hideAdControls())}},{key:"onAdBreakEnd",value:function(){(null==this.currentAd||this.currentAd.isLinear())&&this.hideUi(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""}},{key:"onAllAdsCompleted",value:function(){this.hideUi()}},{key:"onLinearAdStart",value:,{key:"onNonLinearAdLoad",value:function(){this.adContainerDiv.style.display="block",this.adContainerDiv.classList.add("bumpable-ima-ad-container"),this.isAdNonlinear=!0}},{key:"onPlayerEnterFullscreen",value:function(){this.fullscreenDiv.classList.add("ez-vad-fullscreened"),this.fullscreenDiv.classList.remove("ez-vad-non-fullscreened")}},{key:"onPlayerExitFullscreen",value:,{key:"onPlayerVolumeChanged",value:function(e){0==e?(this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted"),this.sliderLevelDiv.style.width=100*e+"%")}},{key:"showAdControls",value:function(){this.controlsDiv.classList.add("ez-vad-controls-showing")}},{key:"hideAdControls",value:]),e}(),g=function(){function e(t,i){n()(this,e),this.videoPlayer=t,this.trackBreaks_=this.bind_(this,this.trackBreaks),this.videoPlayer.onTimeUpdate(this.trackBreaks_),this.filterAdBreaks(i),u("VideoAdtimer created. adBreaks:",t,i,"num ad breaks",this.adBreaks.length),this.videoPlayer.videoObject.MagicPlaceholderType==m&&this.adBreaks.length>0&&(window.vectx&&window.vectx.is_magic_player?window.addEventListener("message",this.embedTriggerEarlyBidding.bind(this)):window.addEventListener("scroll",this.inTopWindowTriggerEarlyBidding.bind(this)))}return o()(e,[{key:"embedTriggerEarlyBidding",value:function(e){"scroll"==e.data&&(this.triggerEarlyBidding(),window.removeEventListener("message",this.embedTriggerEarlyBidding))}},{key:"inTopWindowTriggerEarlyBidding",value:function(){this.videoPlayer.player.player.el().getBoundingClientRect().top/window.innerHeight<1.3&&(window.removeEventListener("scroll",this.inTopWindowTriggerEarlyBidding),this.triggerEarlyBidding())}},{key:"triggerEarlyBidding",value:function(){var e=this.adBreaks[0];e.isTriggered||(u("Scroll triggered early bidding"),e.isTriggered=!0,e.earlyBid=!0,__ez.vhb.bid(e))}},{key:"deactivateBreaks",value:function(){this.videoPlayer.offTimeUpdate(this.trackBreaks_)}},{key:"activateBreaks",value:,{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"trackBreaks",value:function(){if(this.shouldBid()){var e=this.adBreaks;this.videoPlayer.isEmbedCurrentlyFloating()&&void 0!==this.floatingAdBreaks&&this.floatingAdBreaks.length>0&&(e=this.floatingAdBreaks);var t=this.videoPlayer.getNextAdBreak(e),i=t.nextBreak,a=t.idx;e&&e[a]&&this.markAdBreakAsTriggered(e[a]),__ezInstream.UnfilledCnt>=3?u("Hit max unfilled ad request limit - not requesting more ads"):__ez.vhb.bid(i)}}},{key:"shouldBid",value:function(){var e=this.adBreaks;this.videoPlayer.isEmbedCurrentlyFloating()&&void 0!==this.floatingAdBreaks&&this.floatingAdBreaks.length>0&&(e=this.floatingAdBreaks);var t=this.videoPlayer.getNextAdBreak(e);if(void 0===t||void 0===t.nextBreak||void 0===t.idx)return!1;var i=t.nextBreak;if(i.isTriggered)return!1;if(__ez.vhb.getBiddingInProcess(this.videoPlayer.player.player.player_id))return!1;if(this.videoPlayer.paused())return!1;var a=this.videoPlayer.getAdBreakTime(i);if(void 0===a)return!1;var n=this.videoPlayer.getCurrentVideoTime();return void 0!==n&&!(a-n>=10)}},{key:"filterAdBreaks",value:function(e){"undefined"!=typeof isSharedEmbed&&isSharedEmbed&&(this.floatingAdBreaks=e.filter(()),this.adBreaks=e.filter(()}},{key:"markAdBreakAsTriggered",value:function(e){e.isTriggered=!0,void 0!==this.floatingAdBreaks&&this.floatingAdBreaks.length>0&&(this.adBreaks.forEach((function(t){t.key!==e.key&&t.timeOffset<=e.timeOffset&&(t.isTriggered=!0)})),this.floatingAdBreaks.forEach((function(t){t.key!==e.key&&t.timeOffsetSeconds<=e.timeOffsetSeconds&&(t.isTriggered=!0)})))}},{key:"nextOutstreamBreak",value:function(){if(u("outstreamTimer - nextOutstreamBreak called"),"none"!==document.getElementById("ez-video-outstream-wrap").style.display){var e=this.videoPlayer.player.player;e.play_outstream&&__ez.vhb.requestBreaks(e.player_id,e.ezVideoId,e.ads_enabled,e.video_position_id,0,!0,!0)}else u("in nextOutstreamBreak: outstream display is none - not bidding")}}]),e}(),m=1,k=function(){function e(t,i,a,r,o,s,d){n()(this,e),f()(this,"currentAdBreak",null),this.videoPlayer_=t,this.playing_=!1,this.adsActive_=!1,this.adsDone_=!1,this.videoAdContainerElement=document.getElementById(r.videoAdContainerId),this.adUnit=i,this.adBreaks=a,this.handleRenderAdEvent_=this.bind_(this,this.handleRenderAdEvent),this.vadTimer=new g(this.videoPlayer_,this.adBreaks),__ez.vhb.addListener("RenderAdBreak",this.handleRenderAdEvent_),this.isOutstream=!1,this.videoAdUi=new _(t),this.ads_=new p(this,this.videoPlayer_,i,r,o,s,d),this.fullscreenChangeCallback_=this.bind_(this,this.onFullscreenChange_),this.videoPlayer_.on(null,"fullscreenchange",this.fullscreenChangeCallback_),this.videoEndedCallback_=this.bind_(this,this.onContentEnded_),this.setVideoEndedCallbackEnabled(!0)}return o()(e,[{key:"requestAds",value:function(e){this.ads_.requestAds(e)}},{key:"handleRenderAdEvent",value:function(e){if(0!=this.isMyAdBreak(e.AdBreak.key)&&!this._handleRenderAdEventMagicPlayer(e)){var t=e.AdBreak;this.currentAdBreak=t,"start"===this.currentAdBreak.timeOffset&&"NoFallback"===this.currentAdBreak.videoFallbackType&&(this.videoPlayer_.pause(),console.time("preroll_no_bid")),this.requestAds(t.vastURL)}}},{key:"_handleRenderAdEventMagicPlayer",value:function(e){if("undefined"==typeof ezVideoAdConductor)return u("ezVideoAdConductor is undefined"),!1;var t=ezVideoAdConductor.getVideoAdConductor();return this.videoPlayer_.videoObject.MagicPlaceholderType==m&&e.AdBreak.earlyBid?(u("Rendering early ad break"),!1):this.isOutstream&&("undefined"!=typeof ezOutstreamPlayer&&ezOutstreamPlayer.isPauseAds()||t.autoPlayInstreamPlayer&&t.autoPlayInstreamPlayer.isCurrentlyFloating()||t.autoPlayInstreamPlayer&&t.autoPlayInstreamPlayer.isAdInProgress()&&!t.autoPlayInstreamPlayer.isAdPaused())?(this.attachOutstreamPlayEvent(e),!0):void 0}},{key:"attachFloatingEvent",value:function(e){u("attaching floating event since we're in content");var t=bind(this,e);this.videoPlayer_.once(null,"startedFloating",t)}},{key:"attachOutstreamPlayEvent",value:function(e){if("undefined"!=typeof ezVideoAdConductor){u("attaching outstream play event since it's paused");var t=ezVideoAdConductor.getVideoAdConductor(),i=bind(this,e);t.addListenerOnce("startOutstream",i)}}},{key:"handleStartAd",value:function(){"start"===this.currentAdBreak.timeOffset&&"NoFallback"===this.currentAdBreak.videoFallbackType&&console.timeEnd("preroll_no_bid")}},{key:"isMyAdBreak",value:function(e){var t=e.toLowerCase().includes("outstream");return this.isOutstream?t:!(!this.isOutstream&&t)&&this.adBreaks.filter(().length>0}},{key:"requestAllAds",value:function(e){this.adBreaks=e,this.vadTimer.deactivateBreaks(),this.vadTimer=new g(this.videoPlayer_,this.adBreaks)}},{key:"pauseAd",value:function(){this.ads_.pause(),this.videoAdUi.onAdsPaused()}},{key:"resumeAd",value:,{key:"isAdPlaying",value:function(){return this.ads_.isAdPlaying()}},{key:"togglePlayPause",value:,{key:"toggleMuteUnmute",value:function(){this.ads_.isAdMuted()?(this.videoPlayer_.setPlayerVolume(1),this.ads_.unmute(),this.videoAdUi.unmute()):(this.videoPlayer_.setPlayerVolume(0),this.ads_.mute(),this.videoAdUi.mute())}},{key:"toggleFullscreen",value:function(){this.videoPlayer_.toggleFullscreen()}},{key:"setTimeUpdateCallbackEnabled",value:function(e){}},{key:"setVideoEndedCallbackEnabled",value:,{key:"resumeAfterAd",value:function(e){this.currentAdBreak=null,e&&this.videoPlayer_.play(),this.adsActive_=!1;var t=this.videoPlayer_.getVideoContainer().getElementsByClassName("vjs-control-bar");t&&t.length>0&&(t[0].style=null)}},{key:"pauseForAd",value:function(){this.adsActive_=!0,this.playing_=!0,this.videoPlayer_.pause();var e=this.videoPlayer_.getVideoContainer().getElementsByClassName("vjs-control-bar");e&&e.length>0&&(e[0].style.opacity=0)}},{key:"adClicked",value:function(){}},{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"onSampleAdTagClick_",value:,{key:"onClick_",value:function(){if(!this.adsDone_)return this.ads_.initialUserAction(),this.videoPlayer_.preloadContent(this.bind_(this,this.loadAds_)),void(this.adsDone_=!0);this.adsActive_?this.playing_?this.ads_.pause():this.ads_.resume():this.playing_,this.playing_=!this.playing_,this.updateChrome_()}},{key:"loadAds_",value:function(){this.videoPlayer_.removePreloadListener()}},{key:"onFullscreenChange_",value:function(){if(this.videoPlayer_.isFullscreen()){var e=this.videoPlayer_.getVideoDimensions();this.ads_.resize(e.width,e.height,!0),this.videoAdUi.onPlayerEnterFullscreen()}else this.ads_.resize(window.screen.width,window.screen.height,!1),this.videoAdUi.onPlayerExitFullscreen()}},{key:"onContentEnded_",value:function(){this.ads_.contentEnded()}},{key:"retryAdRequest",value:function(t){var i=t.bidRetries,a=e.ZERO_BID_HASH,n=0,r=t.getPlayerId();if(0==t.retryCount){var o=t.lastWinningBid;u("[".concat(r,"] Last winning bid floor: ").concat(o)),u("[".concat(r,"] Ad break fallback floors: ").concat(t.videoFallbackFloors));var s=t.videoFallbackFloors.findIndex(();-1===s&&(s=t.videoFallbackFloors.length-1),s=Math.max(0,s-1),t.bidFloorIndex=s}if(t.bidFloorIndex>i||"frontload"===t.videoFallbackType)return!1;if(t.bidFloorIndex<=i){var d=this.getNextBid_(t);a=d.hash,n=d.bidValue,u("[".concat(r,"] Using fallback floor ").concat(t.bidFloorIndex,"\nbid floor: ").concat(n)),void 0!==googletag.companionAds&&void 0!==window.ezVideo&&t.bidFloorIndex==i-1&&(googletag.companionAds().setRefreshUnfilledSlots(!0),window.ezVideo.stopCompanionRefresh=!1)}return t.bidFloorIndex++,t.retryCount++,(t=this.updateBidHash_(t,a)).videoAdBidFloor=n,t.origVastURL=t.vastURL,u("bidding again",t.key),__ez.vhb.bid(t),!0}},{key:"getNextBid_",value:function(t){return void 0===t.videoFallbackHashes||t.bidFloorIndex>=t.videoFallbackHashes.length?{hash:e.ZERO_BID_HASH,bidValue:0}:{hash:t.videoFallbackHashes[t.bidFloorIndex],bidValue:t.videoFallbackFloors[t.bidFloorIndex]}}},{key:"updateBidHash_",value:function(e,t){return e.lastBidHash.includes(",")&&(e.lastBidHash=encodeURIComponent(e.lastBidHash)),t.includes(",")&&(t=encodeURIComponent(t)),e.vastURL=e.vastURL.replace(e.lastBidHash,t),e.lastBidHash=t,e}},{key:"changeBidType_",value:function(e,t){if(e.bidFloorType===t)return e;var i=e.bidFloorType;e.bidFloorType=t;var a=e.vastURL.split("cust_params=");if(2===a.length){var n=a[1].split("ft%3D");if(2===n.length){var r=t.toString()+n[1].substring(i.toString().length),o=n[0]+"ft%3D"+r;e.vastURL=a[0]+"cust_params="+o}}return e}},{key:"enableOutstream",value:],[{key:"ZERO_BID_HASH",get:function(){return"60474211daf1dfd4d90000ea01f56c30"}}]),e}(),D=i(12),A=i.n(D),b=i(7),P=i.n(b),w=function(){function e(t){n()(this,e),t&&"undefined"!=typeof __ezOutstream?this.__ezPixelObj=__ez.osvaep:this.__ezPixelObj=__ez.vaep}return o()(e,[{key:"addCounts",value:function(e){var t=e.uuid;e.play_cnt>0&&this.__ezPixelObj.Add(t,[new __ezDotData("play_cnt",e.play_cnt)],e),e.pause_cnt>0&&this.__ezPixelObj.Add(t,[new __ezDotData("pause_cnt",e.pause_cnt)],e)}},{key:"addMediaSrc",value:function(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_src",t)],i)}},{key:"addSystem",value:function(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_system",t)],i)}},{key:"addClient",value:function(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_client",t)],i)}},{key:"addStart",value:function(e,t,i){var a=(new Date).toLocaleString("sv",{timeZone:"America/Chicago"});this.__ezPixelObj.Add(e,[new __ezDotData("ad_start",a),new __ezDotData("offset_ad_start",t)],i)}},{key:"addCompleted",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("completed",1)],t)}},{key:"addErrored",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("errored",1)],t)}},{key:"addSkipped",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("skipped",1)],t)}},{key:"addClicked",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("clicked",1)],t)}},{key:"addViewed",value:function(e,t,i,a){i=i?1:0,this.__ezPixelObj.Add(e,[new __ezDotData("viewed_"+t,i)],a)}},{key:"addHeard",value:function(e,t,i,a){i=i?1:0,this.__ezPixelObj.Add(e,[new __ezDotData("heard_"+t,i)],a)}},{key:"addViewable",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("viewable",1)],t)}},{key:"addAdBounce",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("ad_bounce",1)],t)}},{key:"addPodData",value:function(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("total_ads",t.total_ads),new __ezDotData("ad_length",i)],t)}},{key:"addAdClosed",value:function(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("closed",1)],t)}},{key:"fire",value:function(){this.__ezPixelObj.Fire()}}]),e}();var E=function(){function e(t,i,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;n()(this,e),this.isOutstream=i.toLowerCase().includes("outstream"),this.currentAdBreak=t.adRenderer.currentAdBreak,this.adPixels=new w(this.isOutstream),_ezaq.hasOwnProperty(["visit_uuid"])?this.visit_uuid=_ezaq.visit_uuid:this.visit_uuid=s("ezovuuid_"+_ezaq.domain_id),this.vadStoreURL=this.isOutstream?"/porpoiseant/osvad.gif":"/porpoiseant/vad.gif",this.player=t,this.adUnit=i,this.videoContentShare=r,this.paused=!1,this.firstViewable=null,this.videoObject=a,this.adData={},this.adPodVaID="",this.cumulativeAdLength=0,this.unloadAllCallback=this.bind_(this,this.unloadAll),this.adBounceCallback=this.bind_(this,this.handleAdBounce),this.isOutstream&&this.bind_(this,this.attachOutstreamPlayerEvent)(),ez_attachEvent(document,"blur",this.unloadAllCallback),ez_attachEvent(window,"beforeunload",this.unloadAllCallback),ez_attachEvent(window,"blur",this.unloadAllCallback),ez_attachEvent(window,"pagehide",this.unloadAllCallback),ez_attachEvent(window,"unload",this.unloadAllCallback)}var t;return o()(e,[{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}},{key:"initAdImpression",value:function(){u("Getting ad data for player"),this.adData.url=_ezaq.url,this.adData.pageview_id=_ezaq.page_view_id,_ezaq.hasOwnProperty(["visit_uuid"])?this.adData.visit_uuid=_ezaq.visit_uuid:this.adData.visit_uuid=s("ezovuuid_"+_ezaq.domain_id),this.adData.template_id=_ezaq.template_id,this.adData.domain_id=_ezaq.domain_id,this.adData.vab_test_id=_ezaq.ab_test_id,""===this.adPodVaID?this.adData.video_ad_impression_id=this.generateUUID():this.adData.video_ad_impression_id=this.adPodVaID,this.generateInitAdData(this.adData.video_ad_impression_id),this.adData.ad_position="start",this.player.analytics&&!this.isOutstream&&(this.adData.video_impression_id=this.player.analytics.getVideoImpressionUUID()),this.adData.ad_client="Google IMA",this.adData.ad_system="Google Ad Manager",this.adData.ad_index=1,this.currentAdBreak.isOutstream&&("undefined"==typeof ezVideoAdConductor&&"undefined"==typeof magicOutstreamCtx||(this.adData.is_universal=!0),this.adData.ad_index=__ezOutstream.AdIndex,__ezOutstream.AdIndex+=1),this.videoContentShare&&Object.keys(this.videoContentShare).length>0&&l(this.videoContentShare)&&(this.adData.owner_domain_id=this.videoContentShare.DomainIdOwner),this.adData.humix_channel_id=this.videoObject.HumixChannelId,this.adData.player_name=this.player.playerDef,this.currentAdBreak.isOutstream?(this.adData.is_outstream=!0,this.adData.float_pos=this.currentAdBreak.floatPosition):this.adData.is_outstream=!1,this.adData.cnx_backfill=this.currentAdBreak.cnx_backfill}},{key:"generateInitAdData",value:function(e){this.adData.uuid=e,this.adData.play_cnt=0,this.adData.pause_cnt=0,this.adData.completed=!1,this.adData.errored=!1,this.adData.skipped=!1,this.adData.clicked=!1,this.adData.viewable=!1}},{key:"generateUUID",value:function(){var e=(new Date).getTime();return e+=performance.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,()}},{key:"unloadAll",value:,{key:"handleQuartileEvent",value:function(e){var t;switch(e.type){case"firstQuartile":t="first_quartile";break;case"midpoint":t="middle";break;case"thirdQuartile":t="third_quartile";break;default:return void u("Could not find quartile for type =",e.type)}var i=this.player.getPlayerViewable()?1:0,a=(this.player.getPlayerVolume(this)>=10&&this.player.getPlayerMute(this),this.adData.uuid);this.adPixels.addViewed(a,t,i)}},{key:"determineWinningAdIdFromEvent",value:function(e){var t="";if(e.getAd&&"function"==typeof e.getAd){var i=e.getAd();u("winning ad: ",i);var a=i.getWrapperAdSystems(),n=i.getWrapperAdIds(),r=a.findIndex(();r>=0&&n.length>r&&u("winning ad id: "+(t=n[r]))}return t}},{key:"handleInitialTime",value:(t=A()(P.a.mark((function e(t){var i,a,n,r,o,s,d,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.determineWinningAdIdFromEvent(t),this.currentAdBreak&&"function"==typeof this.currentAdBreak.handleWinningAdIdOrHbUUId?this.currentAdBreak.handleWinningAdIdOrHbUUId(i):"function"==typeof this.currentAdBreak.removeCachedBidsFromAdBreak&&this.currentAdBreak.removeCachedBidsFromAdBreak(),this.adData={ad_filled:1},!0===this.isOutstream&&"undefined"!=typeof __ezOutstream?__ezOutstream.UnfilledCnt=0:__ezInstream.UnfilledCnt=0,this.initAdImpression(),this.adSystem="","function"==typeof t.getAd&&("function"==typeof t.getAd().getDuration&&(this.adData.ad_length=t.getAd().getDuration()||0,this.cumulativeAdLength+=this.adData.ad_length),"function"==typeof t.getAd().getAdSystem&&(this.adSystem=t.getAd().getAdSystem(),this.adData.ad_system=this.adSystem,u("Ad Source (Advertiser name): "+this.adSystem))),a=1,this.currentAdBreak&&t&&"function"==typeof t.getAd&&(n=t.getAd(),r=n.getAdPodInfo(),a=r.getTotalAds(),this.adData.total_ads=r.getAdPosition(),a>1&&1===this.adData.total_ads?(u("AdPods loaded, total_ads:  "+a+"."),this.adPodVaID=this.adData.uuid):1===a&&(this.adPodVaID=""),(o=new google.ima.CompanionAdSelectionSettings).resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC,o.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.IMAGE,o.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,s=n.getCompanionAds(300,250,o),this.adData.has_companion=s.length>0?1:0,this.currentAdBreak.impressionId=this.currentAdBreak.impressionId,a>1&&this.adData.total_ads>1?this.adPixels.addPodData(this.adData.uuid,this.adData,this.cumulativeAdLength):(this.handleAdBreakData(this.currentAdBreak),this.handleAdImpressionData())),d=this.adData.uuid,l=this.player.getPlayerViewable()?1:0,this.adPixels.addStart(d,this.player.getCurrentVideoTime(),this.adData),this.adPixels.addViewed(d,"start",l),ez_attachEvent(window,"visibilitychange",this.adBounceCallback);case 14:case"end":return e.stop()}}),e,this)}))),},{key:"handlePlayEvent",value:function(e){u("Play event triggered for ad "+this.adData.uuid+"."),this.paused=!1,this.adData.play_cnt++}},{key:"handlePauseEvent",value:function(e){u("Pause event triggered for ad "+this.adData.uuid+"."),this.paused=!0,this.firstViewable=null,this.adData.pause_cnt++}},{key:"handleCompleteEvent",value:function(e){if(u("Complete event triggered for ad "+this.adData.uuid+"."),__ez.vhb.biddingComplete(this.videoObject.PlayerId),this.adData.completed)u("Complete event has already completed.");else{var t=this.adData.uuid,i=this.player.getPlayerViewable()?1:0;this.adData.completed=!0,this.adPixels.addCompleted(t,this.adData),this.adPixels.addViewed(t,"end",i),this.unloadAll(),ez_detachEvent(document,"blur",this.unloadAllCallback),ez_detachEvent(window,"beforeunload",this.unloadAllCallback),ez_detachEvent(window,"blur",this.unloadAllCallback),ez_detachEvent(window,"pagehide",this.unloadAllCallback),ez_detachEvent(window,"unload",this.unloadAllCallback),ez_detachEvent(window,"beforeunload",this.adBounceCallback)}}},{key:"handleSkipEvent",value:function(e){if(__ez.vhb.biddingComplete(this.videoObject.PlayerId),u("Skip event triggered for ad "+this.adData.uuid+"."),!this.adData.completed){var t=document.getElementById("adContainer");t&&(t.style.display="none"),this.adData.completed=!0,this.adPixels.addSkipped(this.adData.uuid,this.adData)}}},{key:"handleClickEvent",value:function(e){u("Click event triggered for ad "+this.adData.uuid+"."),this.adData.completed||(this.adData.completed=!0,this.adPixels.addClicked(this.adData.uuid,this.adData))}},{key:"handleLogEvent",value:function(e){var t=e.getAdData();if(t.adError){var i=t.adError;u("adError Type: "+i.getType()),u("adError: ",i),this.adData.uuid&&!this.adData.errored&&(this.adData.errored=!0,this.adPixels.addErrored(this.adData.uuid,this.adData))}}},{key:"handleAdProgressEvent",value:function(e){this.adData.viewable||!this.player.getPlayerViewable()||this.paused?this.firstViewable=null:this.firstViewable?new Date-this.firstViewable>2e3&&(this.adData.viewable=!0,this.adPixels.addViewable(this.adData.uuid,this.adData)):this.firstViewable=new Date}},{key:"handleAdBreakData",value:function(e){this.adData.impression_id=e.impressionId,this.adData.ad_position=e.timeOffset,this.adData.ad_unit=this.adUnit,this.adData.ad_src=e.vastURL,this.adData.param_gen=e.paramGen,this.adData.position_gen=e.positionGen,this.adData.vad_type=e.breakType,this.adData.skippable=e.params&&e.params.skip,void 0!==e.params&&(this.adData.min_ad_length=e.params.min,this.adData.max_ad_length=e.params.max,this.adData.ad_type=e.params.ad_type,this.adData.allowed_ad_sizes=e.params.ad_sizes),this.adData.t_pageview_time=_ezaq.t_epoch,this.adData.stat_source_id=e.statSourceId,this.adData.initial_stat_source_id=e.statSourceId,this.adData.bidders="[".concat(e.bidders,"]"),this.adData.received_bidders="[".concat(e.receivedBidders,"]"),this.adData.prebid_cpm=e.prebidCPM,void 0!==this.player.player.player.video_position_id&&(this.adData.video_position_id=this.player.player.player.video_position_id),this.adData.auction_retry_count=e.retryCount,this.adData.fallback_type=e.videoFallbackType,this.adData.bid_floor_gen=e.bidFloorGen,this.adData.multiplier=e.multiplier,this.adData.unmodified_cpm=e.videoAdBidFloorUnmodified,this.adData.unmodified_cpm_mean_abs_dev=e.videoAdBidFloorCPMMeanAbsDev,this.adData.cpm_query_type=e.queryType,this.adData.unmodified_cpm_std=e.videoAdBidFloorCPMStd,this.adData.unmodified_cpm_impression_cnt=e.videoAdBidFloorImpressions,this.adData.position_config=e.positionConfig,this.adData.winning_bid_floor=e.videoAdBidFloor,this.adData.max_hb_bid=e.maxHBBid,this.adData.bid_floor_type=e.bidFloorType,void 0!==this.player.player.player.video_position_id&&(this.adData.is_floating=this.player.player.player.is_floating?1:0),this.adData.initial_bid_floor=e.initialBidFloor,this.adData.winning_bid_hash=e.lastBidHash;var t="undefined"!=typeof ezdcr?ezdcr:"USD";this.adData.dfp_currency=t;var i="undefined"!=typeof ezacr?ezacr:"USD";this.adData.adx_currency=i}},{key:"bidFloorToRealValue",value:function(e){return e/=1e3,isNaN(e)&&(e=0),e<=0&&(e=2e-6),e}},{key:"handleAdImpressionData",value:function(){u("Sending vad.gif");var e=__ez.dot.getURL(this.vadStoreURL);if(__ez.dot.Fire(e,this.adData),"undefined"!=typeof __ez&&void 0!==__ez.pel){var t=this.bidFloorToRealValue(this.adData.winning_bid_floor),i=t;if(void 0!==this.adData.stat_source_id){var a=[new __ezDotData("stat_source_id",this.adData.stat_source_id)];i=this.adData.prebid_cpm/1e3,__ez.pel.AddById(this.adData.ad_unit+"//"+this.adData.impression_id,a,__ez.template.isOrig,i,t),u("Stat source id pixel: "+this.adData.ad_unit+"//"+this.adData.impression_id+", stat_source_id = "+this.adData.stat_source_id+", rev = "+i)}var n=[new __ezDotData("loaded",1),new __ezDotData("viewed",1)];__ez.pel.AddById(this.adData.ad_unit+"//"+this.adData.impression_id,n,__ez.template.isOrig,i,t),u("Loaded pixel: "+this.adData.ad_unit+"//"+this.adData.impression_id+", rev = "+i+", bidFloorFilled = "+t),__ez.pel.Fire()}}},{key:"handleAdBounce",value:function(){this.player&&this.player&&this.player.adRenderer&&this.player.adRenderer.adsActive_&&(u("Ad bounce"),this.adPixels.addAdBounce(this.adData.uuid,this.adData))}},{key:"sendUnfilledVadPixel",value:function(e,t){u("UnfilledVadPixel"),this.adData={ad_filled:0,error_message:t},!0===this.isOutstream&&"undefined"!=typeof __ezOutstream?__ezOutstream.UnfilledCnt++:__ezInstream.UnfilledCnt++,e.impressionId=this.currentAdBreak.impressionId,this.initAdImpression(),this.handleAdBreakData(e);var i=__ez.dot.getURL(this.vadStoreURL);__ez.dot.Fire(i,this.adData)}},{key:"attachOutstreamPlayerEvent",value:function(){var e=this;this.player.getEventEmitter().one("ezoPlayerClosed",(function(t){e.adData.closed=!0,e.adPixels.addAdClosed(e.adData.uuid,e.adData)}))}}]),e}(),x=function(){function e(t,i,a,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n()(this,e),this.videoPlayer_=t,this.videoAdEventHandler=new E(t,i,r,o),this.adsManager_=a,this.registerAdEventHandlers()}return o()(e,[{key:"registerAdEventHandlers",value:function(){this.adsManager_&&(this.adsManager_.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,this.videoAdEventHandler.handleAdProgressEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.CLICK,this.videoAdEventHandler.handleClickEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.videoAdEventHandler.handleCompleteEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,this.videoAdEventHandler.handleQuartileEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.LOG,this.videoAdEventHandler.handleLogEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.MIDPOINT,this.videoAdEventHandler.handleQuartileEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.PAUSED,this.videoAdEventHandler.handlePauseEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.RESUMED,this.videoAdEventHandler.handlePlayEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.videoAdEventHandler.handleSkipEvent,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.STARTED,this.videoAdEventHandler.handleInitialTime,!1,this.videoAdEventHandler),this.adsManager_.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,this.videoAdEventHandler.handleQuartileEvent,!1,this.videoAdEventHandler))}}]),e}(),C=function(){function e(t){n()(this,e),this.vData=t}return o()(e,[{key:"handleInitialPlay",value:function(){var e=this.videoData,t=e.uuid;if(!(this.videoData.play_cnt>0)){var i=0|this.player.getVideoLength();this.generateQuartileData(e,i),this.videoPixels.addStart(t),this.startDate=Date.now()}}},{key:"handleLoadStart",value:,{key:"handlePlayEvent",value:function(){z("Play event triggered for player "+this.id+"."),this.videoData.play_cnt++;var e=this.player.player.player;if(e.muted()||0===e.volume()||(this.videoData.lastUnmuted=new Date),this.isSeeking){var t=this.player.getCurrentVideoTime()-this.initialSeekTime>0;this.isScrubbing?t?this.videoData.seek_forward_scrubbing++:this.videoData.seek_back_scrubbing++:t?this.videoData.seek_forward_click++:this.videoData.seek_back_click++,this.isSeeking=!1,this.isScrubbing=!1}}},{key:"handlePlayingEvent",value:,{key:"handlePauseEvent",value:function(){z("Pause event triggered for player "+this.id+"."),this.videoData.pause_cnt++,this.bufferStart=!1}},{key:"handleSeekingEvent",value:function(e){this.lastPosition=this.player.getCurrentVideoTime(),this.lastPositionSincePlayTimeRecorded=this.lastPosition,z("Seek event triggered for player "+this.id+". new position is "+this.lastPosition),this.isSeeking?this.isScrubbing||(this.isScrubbing=!0):this.isSeeking=!0}},{key:"handleSeekedEvent",value:function(e){this.lastPosition=this.player.getCurrentVideoTime(),this.lastPositionSincePlayTimeRecorded=this.lastPosition,z("Seeked event triggered for player "+this.id+". new position is "+this.lastPosition),this.videoData.seek_time+=this.player.getCurrentVideoTime()-this.initialSeekTime}},{key:"handleWaitingEvent",value:function(e){z("Waiting event triggered for player "+this.id+"."),z("Waiting isBuffering"+this.isBuffering+" and isScrubbing "+this.isScrubbing),!1===this.isBuffering&&!1===this.isScrubbing&&(this.bufferStart=new Date,z("This is our buffer start"+this.bufferStart),this.bufferPosition=this.player.getCurrentVideoTime(),this.readyState=this.player.getReadyState())}},{key:"handleCompleteEvent",value:function(){z("Complete event triggered for player "+this.id+".");var e=this.videoData;if(this.clearBufferingData(),!e.completed){var t=e.uuid;e.completed=!0,this.videoPixels.addCompleted(t),e.end&&e.end.played&&!e.end.added&&(e.end.added=!0,this.videoPixels.addViewed(t,"end",e.end.viewed),this.videoPixels.addHeard(t,"end",e.end.heard),this.videoPixels.fire())}}},{key:"handleErrorEvent",value:function(e){z("Error event triggered for player "+this.id+"."),this.videoData.errored||(this.videoData.errored=!0,this.videoPixels.addErrored(this.videoData.uuid))}},{key:"handleRemoveEvent",value:function(){z("Remove event triggered for player "+this.id+"."),this.videoData.removed||(this.videoData.removed=!0,this.videoPixels.addRemoved(this.videoData.uuid))}},{key:"handleTimeEvent",value:function(e){if("start"in this.videoData){var t=this.player.getCurrentVideoTime(),i=this.player.getPlayerViewable(),a=!1|(this.player.getPlayerVolume()>=.02&&!this.player.getPlayerMute()),n=this.player.getVideoLength(),r=this.videoData;if(this.bufferStart&&t!==this.bufferPosition){z("Adding to lag time and bufferer count"),this.bufferEnd=new Date;var o=this.bufferEnd-this.bufferStart;this.bufferStart=!1,this.bufferPosition=!1,this.bufferCount++,1==this.bufferCount&&(z("Add data to initialBufferTime"),r.initialBufferingTime=+o),r.lagTime+=o}void 0===this.lastPosition&&(this.lastPosition=t,this.lastPositionSincePlayTimeRecorded=t);var s=t<this.lastPosition,d=this.lastPositionSincePlayTimeRecorded>this.lastPosition,l=t-this.lastPosition>1;(s||d||l)&&(z("somehow we failed to account for a seek event. compensating. "+s+" "+d+" "+l),this.lastPosition=t,this.lastPositionSincePlayTimeRecorded=t),r.total_play_time+=Math.floor(1e3*(this.lastPosition-this.lastPositionSincePlayTimeRecorded)),a&&(r.unmute=1,r.total_play_time_unmute+=Math.floor(1e3*(this.lastPosition-this.lastPositionSincePlayTimeRecorded)),z("total play time unmute is "+r.total_play_time_unmute),void 0===r.video_unmute_start&&(r.video_unmute_start=L())),t<1?(z("Player "+this.id+" at start. Current position is "+t+"."),r.start.played=!0,r.start.viewed&=i,r.start.heard&=a):r.firstQuartile.time<=t&&t<1+r.firstQuartile.time?(z("Player "+this.id+" at first quartile. Current position is "+t+"."),r.firstQuartile.played=!0,r.firstQuartile.viewed&=i,r.firstQuartile.heard&=a):r.middle.time<=t&&t<1+r.middle.time?(z("Player "+this.id+" at middle. Current position is "+t+"."),r.middle.played=!0,r.middle.viewed&=i,r.middle.heard&=a):r.thirdQuartile.time<=t&&t<1+r.thirdQuartile.time?(z("Player "+this.id+" at third quartile. Current position is "+t+"."),r.thirdQuartile.played=!0,r.thirdQuartile.viewed&=i,r.thirdQuartile.heard&=a):n-1<=t&&t<n&&(z("Player "+this.id+" at end. Current position is "+t+"."),r.end.played=!0,r.end.viewed&=i,r.end.heard&=a),!r.start.completed&&t>=1?(z("Player "+this.id+" played past start."),r.start.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!r.firstQuartile.completed&&t>=1+r.firstQuartile.time?(z("Player "+this.id+" played past first quartile."),r.firstQuartile.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!r.middle.completed&&t>=1+r.middle.time?(z("Player "+this.id+" played past middle."),r.middle.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!r.thirdQuartile.completed&&t>=1+r.thirdQuartile.time&&(z("Player "+this.id+" played past third quartile."),r.thirdQuartile.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()),Math.abs(t-this.lastPosition)>1&&(this.initialSeekTime=this.lastPosition),this.lastPositionSincePlayTimeRecorded=this.lastPosition,this.lastPosition=t}}},{key:"handleAdStarted",value:function(){if(this.bufferStart){this.bufferEnd=new Date;var e=this.bufferEnd-this.bufferStart;this.bufferStart=!1,this.bufferPosition=!1,this.bufferCount++,1==this.bufferCount&&(z("Add data to initialBufferTime"),this.videoData.initialBufferingTime=+e),this.videoData.lagTime+=e}}},{key:"handleFloatPlayerClosed",value:function(){this.videoData.floatPlayerClosed=1,this.startDate&&(this.videoData.floatCloseTime=Date.now()-this.startDate)}},{key:"handleFloatBounce",value:function(){var e=Date.now()-this.startDate;this.startDate&&this.is_floating&&!this.videoData.floatPlayerClosed&&this.player.isCurrentlyFloating()&&e<15e3&&(z("Float bounce"),this.videoPixels.addFloatBounce(this.videoData.uuid))}},{key:"handleResolutionChange",value:function(){var e=this.player.player.player;if(e){var t=e.qualityLevels(),i=t[t.selectedIndex];if(i){var a=i.width.toString()+"x"+i.height.toString();this.videoData.resolutionStart||(this.videoData.resolutionStart=a,this.videoData.resolutionMax=a,this.videoData.resolutionPrevWidth=i.width,this.videoData.resolutionMaxWidth=i.width),i.width!=this.videoData.resolutionPrevWidth&&(this.videoData.resolutionPrevWidth=i.width,this.videoData.resolutionLastSelected=a),i.width>this.videoData.resolutionMaxWidth&&(this.videoData.resolutionMaxWidth=i.width,this.videoData.resolutionMax=a)}}}},{key:"handleClickThroughToHumixPageEvent",value:,{key:"handleSharingEvent",value:function(e){if(e.platform){var t=this.videoData;this.videoData[e.platform]="number"!=typeof t.sharingData[e.platform]?1:t.sharingData[e.platform]++}}},{key:"handleVolumeChangeEvent",value:function(e){var t=this.player.player.player,i=t.muted()||0===t.volume();if(0===t.currentTime())this.videoData.muted=!!i;else{var a=this.videoData.muted;!i&&a?(this.videoData.unmute=1,this.videoData.video_unmute_start=L(),this.videoData.muted=!1):i&&!a&&(this.videoData.muted=!0)}}},{key:"handleLightsToggle",value:function(e,t){this.videoData.lightsOff||(this.videoData.lightsOff=0),this.videoData.lightsOn||(this.videoData.lightsOn=0),t?this.videoData.lightsOn++:this.videoData.lightsOff++}},{key:"handleCaptionToggle",value:function(){this.player.player.player&&(document.getElementsByClassName("vjs-text-track-cue").length>0?this.videoData.IsCaptionOn=1:this.videoData.IsCaptionOn=0)}}]),e}();function z(e){h()&&console.log("[Video Analytics] "+e)}function L(){return(new Date).toISOString().substring(0,19).replace("T"," ")}var T=function(){eturn o()(e,[{key:"addCounts",value:function(){var e=this.videoData,t=e.uuid;if(e.play_cnt>0&&__ez.vep.Add(t,[new __ezDotData("play_cnt",e.play_cnt)]),e.pause_cnt>0&&__ez.vep.Add(t,[new __ezDotData("pause_cnt",e.pause_cnt)]),e.ad_cnt>0&&__ez.vep.Add(t,[new __ezDotData("ad_cnt",e.ad_cnt)]),e.seek_time>0){var i=0|e.seek_time;__ez.vep.Add(t,[new __ezDotData("seek_time",i)])}}},{key:"addBufferData",value:function(){var e=this.videoData,t=e.uuid;e.total_play_time>0&&__ez.vep.Add(t,[new __ezDotData("total_play_time",e.total_play_time)]),e.initialBufferTime>0&&__ez.vep.Add(t,[new __ezDotData("init_buffer_time",e.initialBufferingTime)]),e.lagTime>0&&__ez.vep.Add(t,[new __ezDotData("lag_length",e.lagTime)])}},{key:"addQuartileData",value:function(){var e=this.videoData;if("start"in e){var t=e.uuid;!e.start.added&&e.start.played&&e.start.completed&&(e.start.added=!0,this.addViewed(t,"start",e.start.viewed),this.addHeard(t,"start",e.start.heard)),!e.firstQuartile.added&&e.firstQuartile.played&&e.firstQuartile.completed&&(e.firstQuartile.added=!0,this.addViewed(t,"first_quartile",e.firstQuartile.viewed),this.addHeard(t,"first_quartile",e.firstQuartile.heard)),!e.middle.added&&e.middle.played&&e.middle.completed&&(e.middle.added=!0,this.addViewed(t,"middle",e.middle.viewed),this.addHeard(t,"middle",e.middle.heard)),!e.thirdQuartile.added&&e.thirdQuartile.played&&e.thirdQuartile.completed&&(e.thirdQuartile.added=!0,this.addViewed(t,"third_quartile",e.thirdQuartile.viewed),this.addHeard(t,"third_quartile",e.thirdQuartile.heard))}}},{key:"addFloatPlayerClosed",value:function(){void 0!==this.videoData.floatPlayerClosed&&this.videoData.floatPlayerClosed>0&&(__ez.vep.Add(this.videoData.uuid,[new __ezDotData("float_player_closed",this.videoData.floatPlayerClosed)]),__ez.vep.Add(this.videoData.uuid,[new __ezDotData("float_close_time",this.videoData.floatCloseTime)]))}},{key:"addResolutionData",value:function(){void 0!==this.videoData.resolutionStart&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_start",this.videoData.resolutionStart)]),void 0!==this.videoData.resolutionMax&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_max",this.videoData.resolutionMax)]),void 0!==this.videoData.resolutionLastSelected&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_last_selected",this.videoData.resolutionLastSelected)])}},{key:"addTitleClickData",value:function(){void 0!==this.videoData.click_to_dedicated_page&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("click_to_dedicated_page",this.videoData.click_to_dedicated_page)])}},{key:"addMuteData",value:function(){void 0!==this.videoData.unmute&&(__ez.vep.Add(this.videoData.uuid,[new __ezDotData("unmute",this.videoData.unmute)]),__ez.vep.Add(this.videoData.uuid,[new __ezDotData("video_unmute_start",this.videoData.video_unmute_start)])),this.videoData.total_play_time_unmute>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("total_play_time_unmute",this.videoData.total_play_time_unmute)])}},{key:"addStart",value:function(e){var t=(new Date).toISOString().substring(0,19).replace("T"," ");__ez.vep.Add(e,[new __ezDotData("video_start",t)])}},{key:"addCompleted",value:function(e){__ez.vep.Add(e,[new __ezDotData("completed",1)])}},{key:"addErrored",value:function(e){__ez.vep.Add(e,[new __ezDotData("errored",1)])}},{key:"addRemoved",value:function(e){__ez.vep.Add(e,[new __ezDotData("removed",1)])}},{key:"addViewed",value:function(e,t,i){__ez.vep.Add(e,[new __ezDotData("viewed_"+t,i)])}},{key:"addHeard",value:function(e,t,i){__ez.vep.Add(e,[new __ezDotData("heard_"+t,i)])}},{key:"addClickedLink",value:function(e,t){var i=t.href,a=this.videoData.uuid;__ez.vep.Add(a,[new __ezDotData("clicked_link_s",e)]),i&&__ez.vep.Add(a,[new __ezDotData("clicked_link_url",i)])}},{key:"addSharingData",value:function(){var e=this.videoData,t=e.uuid,i={fbButton:"facebook_shares",pinterest:"pinterest_shares",tw:"twitter_shares",reddit:"reddit_shares",googleplus:"googleplus_shares",messenger:"messenger_shares",linkedin:"linkedin_shares",vk:"vk_shares",ok:"ok_shares",mail:"mail_shares",email:"email_shares",telegram:"telegram_shares",whatsapp:"whatsapp_shares",viber:"viber_shares"};Object.keys(e.sharingData).forEach((function(a){i.hasOwnProperty(a)&&e.sharingData[a]>0&&(i[a],e.sharingData[a],__ez.vep.Add(t,[new __ezDotData(i[a],e.sharingData[a])]))}))}},{key:"addLightsData",value:function(){this.videoData.lightsOn&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("lights_on",this.videoData.lightsOn)]),this.videoData.lightsOff&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("lights_off",this.videoData.lightsOff)])}},{key:"addFloatBounce",value:function(e){__ez.vep.Add(e,[new __ezDotData("float_bounce",1)])}},{key:"fire",value:,{key:"addSeekData",value:function(){this.videoData.seek_back_click>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("seek_back_click",this.videoData.seek_back_click)]),this.videoData.seek_forward_click>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("seek_forward_click",this.videoData.seek_forward_click)]),this.videoData.seek_back_scrubbing>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("seek_back_scrubbing",this.videoData.seek_back_scrubbing)]),this.videoData.seek_forward_scrubbing>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("seek_forward_scrubbing",this.videoData.seek_forward_scrubbing)])}},{key:"addCaptionOnOffData",value:function(){void 0!==this.videoData.IsCaptionOn&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("is_caption_on",this.videoData.IsCaptionOn)])}}]),e}();var S=function(){function e(t,i){n()(this,e),!0===i.Preview||(this.vidStorePath="/detroitchicago/vid.gif",this.vidErrorURL=(1==window._ez_send_requests_outside_humix||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType||"undefined"!=typeof _ez_send_requests_through_ezoic&&!0===_ez_send_requests_through_ezoic?"https://g.ezoic.net":window.location.protocol+"//"+document.location.hostname)+"/detroitchicago/ved.gif",this.url=_ezaq.url,this.pageview_id=_ezaq.page_view_id,_ezaq.hasOwnProperty(["visit_uuid"])?this.visit_uuid=_ezaq.visit_uuid:this.visit_uuid=s("ezovuuid_"+_ezaq.domain_id),this.template_id=_ezaq.template_id,this.domain_id=_ezaq.domain_id,this.tech=t.getTech(),this.is_humix_app=0,"undefined"!=typeof vectx&&(vectx.hasOwnProperty("video_container_impression_id")&&(this.video_container_impression_id=vectx.video_container_impression_id),vectx.hasOwnProperty("embed_is_floating")&&(this.embed_is_floating=vectx.embed_is_floating),vectx.hasOwnProperty("is_humix_app")&&(this.is_humix_app=vectx.is_humix_app?1:0)),this.eventEmitter=t.getEventEmitter(),this.player=t,this.playerEvents=[],this.videoObject=i,this.setVideoData(i,!0))}return o()(e,[{key:"setVideoData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.videoData;this.videoData=d(),this.videoData.impression_id=e.ImpressionId,this.videoData.ad_unit=e.AdUnit,void 0!==this.player.player.player.ezErrorState&&(this.videoData.uuid,void 0===this.player.player.player.errored&&(this.videoData.uuid,this.videoData.errored=!1)),e&&e.PublisherVideoContentShare&&Object.keys(e.PublisherVideoContentShare).length>0&&l(e.PublisherVideoContentShare)&&(l(e.PublisherVideoContentShare)&&(this.owner_domain_id=e.PublisherVideoContentShare.DomainIdOwner),void 0!==e.PublisherVideoContentShare.LoadError&&(this.extra_message=e.PublisherVideoContentShare.LoadError)),this.humix_channel_id=e.HumixChannelId,this.media_src=this.player.getMediaSource(),this.width=this.player.getVideoDimensions().width,this.height=this.player.getVideoDimensions().height,this.id=this.videoData.uuid,void 0!==this.player.player.player.title&&(this.video_title=this.player.player.player.title),void 0!==this.player.player.player.video_position_id&&(this.video_position_id=this.player.player.player.video_position_id),void 0!==this.player.player.player.is_autoplay&&(this.is_autoplay=this.player.player.player.is_autoplay?1:0),void 0!==this.player.player.player.is_floating&&(this.is_floating=this.player.player.player.is_floating?1:0),void 0!==this.player.player.player.floating_option&&(this.floating_option=this.player.player.player.floating_option),void 0!==this.player.player.player.videos?(this.is_playlist_item=1,this.video_playlist_id=e.VideoPlaylistId,this.video_playlist_index=this.player.player.player.videos.findIndex(()):this.is_playlist_item=0,e.videoObjectsCount&&(this.video_objects_count=e.videoObjectsCount),e.videoObjectsIndex&&(this.video_objects_index=e.videoObjectsIndex),void 0!==this.player.player.player.video_length&&(this.video_length=this.player.player.player.video_length),void 0!==e.VideoSelection&&(this.video_selection_type=e.VideoSelection),e.VideoMatchScore&&(this.video_match_score=e.VideoMatchScore),e.VideoAutoMatchType&&(this.video_auto_match_type=e.VideoAutoMatchType),e.VideoUploadSource&&e.VideoUploadSource.length>0?this.video_source=e.VideoUploadSource:this.video_source="upload",this.videoData.total_play_time_unmute=0,e.CollectionId&&e.ScoreGroupId&&(this.collection_id=e.CollectionId,this.score_group_id=e.ScoreGroupId),e.VideoRankingConfigId&&(this.video_ranking_config_id=e.VideoRankingConfigId),e.PreferredVideoType&&(this.preferred_video_type=e.PreferredVideoType),void 0!==e.AutoInsertImpressionID&&""!=e.AutoInsertImpressionID&&(this.video_auto_insert_impression_id=e.AutoInsertImpressionID),void 0!==e.embed_ctx&&(void 0!==e.embed_ctx.parent_url&&(this.url=e.embed_ctx.parent_url),void 0!==e.embed_ctx.domain_id&&(this.domain_id=e.embed_ctx.domain_id,this.pageview_id=e.embed_ctx.pageview_id,this.visit_uuid=e.embed_ctx.visit_uuid)),this.is_vertical=e.IsVertical?1:0,this._ezva=[],this.storeData(),this.generateBufferData(this.videoData),this.is_floating?this.videoData.floatPlayerClosed=i?i.floatPlayerClosed:0:this.videoData.floatPlayerClosed=void 0,this.generateSharingData(this.videoData),this.bufferStart=!1,this.bufferEnd=!1,this.bufferCount=0,this.readyState=!1,this.timer=null,this.isSeeking=!1,this.isScrubbing=!1,this.isBuffering=!1,this.initialSeekTime=0,this.videoPixels=new T(this.videoData),this.videoEvents=new C,t&&this.attachListeners(),this.reattachListeners()}},{key:"attachListeners",value:function(){"HTML5"===this.tech?this.attachHTML5Listeners():"YOUTUBE"===this.tech?this.attachYoutubeListeners():"VIMEO"===this.tech&&this.attachVimeoListeners(),ez_attachEvent(document,"blur",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"beforeunload",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"blur",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"pagehide",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"unload",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"beforeunload",this.bind_(this,this.videoEvents.handleFloatBounce)),this.attachSharingListeners()}},{key:"attachHTML5Listeners",value:function(){var e=this;this.playerEvents=[{name:"play",fn:this.bind_(this,this.videoEvents.handleInitialPlay)},{name:"play",fn:this.bind_(this,this.videoEvents.handlePlayEvent)},{name:"pause",fn:this.bind_(this,this.videoEvents.handlePauseEvent)},{name:"seeking",fn:this.bind_(this,this.videoEvents.handleSeekingEvent)},{name:"seeked",fn:this.bind_(this,this.videoEvents.handleSeekedEvent)},{name:"ended",fn:this.bind_(this,this.videoEvents.handleCompleteEvent)},{name:"error",fn:this.bind_(this,this.videoEvents.handleErrorEvent)},{name:"remove",fn:this.bind_(this,this.videoEvents.handleRemoveEvent)},{name:"timeupdate",fn:this.bind_(this,this.videoEvents.handleTimeEvent)},{name:"waiting",fn:this.bind_(this,this.videoEvents.handleWaitingEvent)},{name:"playing",fn:this.bind_(this,this.videoEvents.handlePlayingEvent)},{name:"ads-ad-started",fn:this.bind_(this,this.videoEvents.handleAdStarted)},{name:"floatPlayerClosed",fn:this.bind_(this,this.videoEvents.handleFloatPlayerClosed)},{name:"resolutionChange",fn:this.bind_(this,this.videoEvents.handleResolutionChange)},{name:"clickThroughToHumixPage",fn:this.bind_(this,this.videoEvents.handleClickThroughToHumixPageEvent)},{name:"volumechange",fn:this.bind_(this,this.videoEvents.handleVolumeChangeEvent)},{name:"lightsToggle",fn:this.bind_(this,this.videoEvents.handleLightsToggle)},{name:"captionToggle",fn:this.bind_(this,this.videoEvents.handleCaptionToggle)}],this.playerEvents.forEach((function(t){e.eventEmitter.on(t.name,t.fn)}))}},{key:"attachYoutubeListeners",value:function(){}},{key:"attachVimeoListeners",value:function(){}},{key:"reattachListeners",value:function(){"HTML5"===this.tech?(this.detachHTML5Listeners(),this.attachHTML5Listeners()):"YOUTUBE"===this.tech?(this.detachYoutubeListeners(),this.attachYoutubeListeners()):"VIMEO"===this.tech&&(this.detachVimeoListeners(),this.attachVimeoListeners())}},{key:"detachHTML5Listeners",value:,{key:"detachYoutubeListeners",value:function(){}},{key:"detachVimeoListeners",value:function(){}},{key:"attachSharingListeners",value:function(){this.player&&this.player.on(null,"sharing:social:clicked",this.bind_(this,this.videoEvents.handleSharingEvent))}},{key:"unloadAll",value:function(){this.videoPixels.addCounts(),this.videoPixels.addQuartileData(),this.videoPixels.addBufferData(),this.videoPixels.addFloatPlayerClosed(),this.videoPixels.addResolutionData(),this.videoPixels.addTitleClickData(),this.videoPixels.addSharingData(),this.videoPixels.addLightsData(),this.videoPixels.addMuteData(),this.videoPixels.addSeekData(),this.videoPixels.addCaptionOnOffData(),this.videoPixels.fire()}},{key:"handleClickLink",value:,{key:"clearBufferingData",value:function(){this.timer&&clearTimeout(this.timer),this.isScrubbing=!1,this.bufferPosition=!1,this.bufferStart=!1,this.bufferEnd=!1,this.readyState=!1}},{key:"getElementPosition",value:function(e){for(var t={x:0,y:0};e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t.x+=e.offsetLeft-e.scrollLeft,t.y+=e.offsetTop-e.scrollTop,e=e.offsetParent;return t}},{key:"storeData",value:function(){if(("undefined"==typeof __ezInstream||!0!==__ezInstream.genericInstream)&&(this._ezva.push(this.getInitVideoData()),this._ezva.length>0)){JSON.stringify(this._ezva);var e=__ez.dot.getURL(this.vidStorePath);__ez.dot.Fire(e,this._ezva)}}},{key:"generateBufferData",value:,{key:"generateSharingData",value:,{key:"generateQuartileData",value:function(e,t){e.start={},e.start.viewed=!0,e.start.heard=!0,e.start.played=!1,e.start.completed=!1,e.start.added=!1,e.firstQuartile={},e.firstQuartile.time=t/4|0,e.firstQuartile.viewed=!0,e.firstQuartile.heard=!0,e.firstQuartile.played=!1,e.firstQuartile.completed=!1,e.firstQuartile.added=!1,e.middle={},e.middle.time=t/2|0,e.middle.viewed=!0,e.middle.heard=!0,e.middle.played=!1,e.middle.completed=!1,e.middle.added=!1,e.thirdQuartile={},e.thirdQuartile.time=3*t/4|0,e.thirdQuartile.viewed=!0,e.thirdQuartile.heard=!0,e.thirdQuartile.played=!1,e.thirdQuartile.completed=!1,e.thirdQuartile.added=!1,e.end={},e.end.viewed=!0,e.end.heard=!0,e.end.played=!1,e.end.added=!1}},{key:"getInitVideoData",value:function(){var e={};e.domain_id=this.domain_id,void 0!==this.owner_domain_id&&(e.owner_domain_id=this.owner_domain_id),e.humix_channel_id=this.humix_channel_id,e.url=this.url,e.pageview_id=this.pageview_id,e.visit_uuid=this.visit_uuid,e.template_id=this.template_id,e.video_impression_id=this.videoData.uuid,e.media_src=this.media_src,e.player_type=this.player.getPlayerType(),e.video_title=this.video_title,e.video_position_id=this.video_position_id,e.is_autoplay=this.is_autoplay,e.is_floating=this.is_floating,e.floating_option=this.floating_option,e.is_playlist_item=this.is_playlist_item,e.vab_test_id=_ezaq.ab_test_id,void 0!==this.videoObject&&(e.is_preferred=this.videoObject.IsPreferred),this.is_playlist_item&&(e.video_playlist_id=this.video_playlist_id,e.video_playlist_index=this.video_playlist_index),e.video_length=this.video_length,void 0!==this.player.player.player.ezVideoId&&(e.content_id=this.player.player.player.ezVideoId),this.player.player.player.ezVideoImpressionId=e.video_impression_id,this.player.player.player.ezVideoImpressionId,e.width=this.width,e.height=this.height;var t=this.player.getPlayerPosition();return e.pos_x=t.x,e.pos_y=t.y,this.video_objects_count&&(e.video_objects_count=this.video_objects_count),this.video_objects_index&&(e.video_objects_index=this.video_objects_index),this.extra_message&&(e.extra_message=this.extra_message),void 0!==this.video_selection_type&&(e.video_selection_type=this.video_selection_type),void 0!==this.video_match_score&&(e.video_match_score=this.video_match_score),void 0!==this.video_auto_match_type&&(e.video_auto_match_type=this.video_auto_match_type),e.is_blocker_on=function(){try{google.ima}catch(e){return!1}return!!__ez.vhb}()?0:1,void 0!==this.video_source&&(e.video_source=this.video_source),void 0!==this.video_container_impression_id&&(e.video_container_impression_id=this.video_container_impression_id),void 0!==this.embed_is_floating&&(e.embed_is_floating=this.embed_is_floating),void 0!==this.score_group_id&&void 0!==this.collection_id&&(e.score_group_id=this.score_group_id,e.collection_id=this.collection_id),void 0!==this.video_ranking_config_id&&(e.video_ranking_config_id=this.video_ranking_config_id),void 0!==this.video_auto_insert_impression_id&&(e.video_auto_insert_impression_id=this.video_auto_insert_impression_id),e.is_humix_app=this.is_humix_app,e.preferred_video_type=this.preferred_video_type,e.pos_x_ratio=t.x/window.innerWidth,e.pos_y_ratio=t.y/window.innerHeight,e.insert_method=this.player.getInsertMethod(),e.is_vertical=this.is_vertical,e}},{key:"getVideoImpressionUUID",value:,{key:"bind_",value:function(e,t){return function(){t.apply(e,arguments)}}}]),e}();var M=function(){function e(){n()(this,e),void 0!==afterglow.players&&(this.player=afterglow.getPlayer(afterglow.players[0].id)),this.playerId=afterglow.players[0].id}return o()(e,[{key:"on",value:function(e,t,i){afterglow.on(this.playerId,t,i)}},{key:"off",value:,{key:"onTimeUpdate",value:function(e){}},{key:"offTimeUpdate",value:function(e){}},{key:"isFullscreen",value:function(){return!1}},{key:"requestFullscreen",value:function(){}},{key:"exitFullscreen",value:function(){}},{key:"getVideoElement",value:,{key:"getEventEmitter",value:function(){return afterglow.getPlayer(this.playerId)}},{key:"getTech",value:,{key:"getPlayer",value:,{key:"getMediaSource",value:function(){return this.player.src()}},{key:"isMobilePlatform",value:function(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}},{key:"getVideoLength",value:function(){return this.player.duration()}},{key:"isPlayerAutoplay",value:function(){return this.player.autoplay()}},{key:"getVideoContainer",value:function(){return this.player.el_}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.getVideoContainer();if(void 0!==t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getVideoDimensions",value:function(){var e={width:-1,height:-1},t=this.getVideoContainer();return e.width=t.width,e.height=t.height,e}},{key:"getPlayerVolume",value:function(){return this.player.volume()}},{key:"setPlayerVolume",value:function(e){}},{key:"getPlayerViewable",value:function(){return!1}},{key:"getCurrentTime",value:function(){return this.player.currentTime()}},{key:"getPlayerMute",value:function(){return this.player.muted()}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){}}]),e}(),O=function(){function e(){n()(this,e),void 0!==flowplayer.Players&&(this.player=flowplayer.Players.instances[0])}return o()(e,[{key:"on",value:function(e,t,i){this.player.on(t,i)}},{key:"off",value:function(e,t,i){this.player.off(t,i)}},{key:"onTimeUpdate",value:function(e){}},{key:"offTimeUpdate",value:function(e){}},{key:"isFullscreen",value:function(){return!1}},{key:"requestFullscreen",value:function(){}},{key:"exitFullscreen",value:function(){}},{key:"getVideoElement",value:function(){return this.player}},{key:"getEventEmitter",value:function(){return this.getVideoElement()}},{key:"getTech",value:function(){return"HTML5"}},{key:"getPlayer",value:function(){return this.player}},{key:"getMediaSource",value:function(){return this.player.currentSrc}},{key:"isMobilePlatform",value:function(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}},{key:"getVideoLength",value:function(){return this.player.duration}},{key:"isPlayerAutoplay",value:function(){return!1}},{key:"getVideoContainer",value:function(){return this.player}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.getVideoContainer();if(void 0!==t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getVideoDimensions",value:function(){var e={width:-1,height:-1};return videoContainer=this.getVideoContainer(),e.width=videoContainer.width,e.height=videoContainer.height,e}},{key:"getPlayerVolume",value:function(){return this.player.volume}},{key:"setPlayerVolume",value:function(e){}},{key:"getPlayerViewable",value:function(){return this.player.in_viewport}},{key:"getPlayerMute",value:function(){return this.player.muted}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){}}]),e}(),V=function(){function e(t){n()(this,e),this.player=jwplayer(t)}return o()(e,[{key:"on",value:function(e,t,i){this.player.on(t,i)}},{key:"off",value:function(e,t,i){this.player.off(t,i)}},{key:"onTimeUpdate",value:function(e){}},{key:"offTimeUpdate",value:function(e){}},{key:"isFullscreen",value:function(){return!1}},{key:"requestFullscreen",value:function(){}},{key:"exitFullscreen",value:function(){}},{key:"getVideoElement",value:function(){return this.player}},{key:"getEventEmitter",value:,{key:"getTech",value:function(){return this.player.getProvider()}},{key:"getPlayer",value:function(){return this.player}},{key:"getMediaSource",value:,{key:"isMobilePlatform",value:function(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}},{key:"getVideoLength",value:function(){return this.player.getDuration()}},{key:"isPlayerAutoplay",value:function(){return!1}},{key:"getVideoContainer",value:function(){return this.player}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.getVideoContainer();if(void 0!==t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getVideoDimensions",value:function(){var e={width:-1,height:-1};return videoContainer=this.getVideoContainer(),e.width=videoContainer.width,e.height=videoContainer.height,e}},{key:"getPlayerVolume",value:function(){return this.player.getVolume()}},{key:"setPlayerVolume",value:function(e){}},{key:"getPlayerViewable",value:function(){return this.player.getViewable()}},{key:"getPlayerMute",value:function(){return this.player.getMute()}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:]),e}(),I=function(){function e(t){if(n()(this,e),this.player={},void 0!==t)this.player=t;else{var i=videojs.getAllPlayers();i.length>0&&(this.player=i[0])}}return o()(e,[{key:"on",value:function(e,t,i){this.player.on(t,i)}},{key:"off",value:function(e,t,i){this.player.off(t,i)}},{key:"once",value:,{key:"onTimeUpdate",value:function(e){this.on(null,"timeupdate",e)}},{key:"offTimeUpdate",value:,{key:"isFullscreen",value:function(){return this.player.isFullscreen()}},{key:"requestFullscreen",value:function(){this.player.requestFullscreen()}},{key:"exitFullscreen",value:function(){this.player.exitFullscreen()}},{key:"getReadyState",value:function(){return this.player.readyState()}},{key:"getVideoElement",value:function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).el()}},{key:"getEventEmitter",value:function(){return this.player}},{key:"getTech",value:,{key:"getPlayer",value:function(){return this.player}},{key:"getMediaSource",value:function(){return this.player.currentSrc()}},{key:"isMobilePlatform",value:function(){return this.player.paused()&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}},{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}},{key:"removePreloadListener",value:,{key:"getVideoLength",value:function(){return this.player.duration()}},{key:"isPlayerAutoplay",value:,{key:"getVideoContainer",value:function(){return this.player.el()}},{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.getVideoContainer();if(void 0!==t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getVideoDimensions",value:function(){var e={width:-1,height:-1},t=this.getVideoContainer();return e.width=t.clientWidth,e.height=t.clientHeight,e}},{key:"getPlayerVolume",value:function(){return this.player.volume()}},{key:"setPlayerVolume",value:,{key:"getPlayerViewable",value:,{key:"getPlayerMute",value:function(){return this.player.muted()}},{key:"getCurrentTime",value:function(){return this.player.currentTime()}},{key:"play",value:function(){this.player.play()}},{key:"pause",value:function(){this.player.pause()}},{key:"paused",value:function(){return this.player.paused()}}]),e}(),B=function(){eturn o()(e,[{key:"getPlayer",value:function(){return"afterglow"===this.playerDef?new M:"flowplayer"===this.playerDef?new O:"jwplayer"===this.playerDef?new V(0):"videojs"===this.playerDef||"ezvideojs"===this.playerDef?new I(this.playerObject):void 0}}]),e}(),R=function(){function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n()(this,e),f()(this,"analytics",null),f()(this,"adAnalytics",null),f()(this,"videoContentShare",null),f()(this,"adInitializer",null),f()(this,"adRenderer",null);var r=new B(t,a);this.playerDef=t,this.player=r.getPlayer(),this.videoPlayerContainer_=this.getVideoContainer(),this.dimensions=this.player.getVideoDimensions(),this.preloadListener_=null,this.PlayPromise=null,this.currentTime=0,this.width=this.dimensions.width,this.height=this.dimensions.height,this.videoObject=i;var o=this;a.playVideoOrAd=function(){this.isAdInProgress()?o.adRenderer.resumeAd():this.play()},a.pauseVideoOrAd=function(){this.isAdInProgress()?o.adRenderer.pauseAd():this.pause()},a.isAdInProgress=a.isAdPaused=a.isCurrentlyFloating=return o()(e,[{key:"bind_",value:,{key:"on",value:function(e,t,i){this.player.on(e,t,i)}},{key:"once",value:function(e,t,i){this.player.once(e,t,i)}},{key:"off",value:,{key:"onTimeUpdate",value:function(e){this.player.onTimeUpdate(e)}},{key:"offTimeUpdate",value:,{key:"isFullscreen",value:function(){return this.player.isFullscreen()}},{key:"requestFullscreen",value:function(){this.player.requestFullscreen()}},{key:"exitFullscreen",value:function(){this.player.exitFullscreen()}},{key:"toggleFullscreen",value:,{key:"getReadyState",value:function(){return this.player.getReadyState()}},{key:"getVideoElement",value:function(){return this.player.getVideoElement()}},{key:"getPlayerFromDef",value:,{key:"getEventEmitter",value:function(){return this.player.getEventEmitter()}},{key:"getTech",value:function(){return this.player.getTech()}},{key:"getMediaSource",value:function(){return this.player.getMediaSource()}},{key:"isMobilePlatform",value:,{key:"getCurrentVideoTime",value:function(){return this.currentTime=this.player.getCurrentTime(),this.currentTime}},{key:"handleAdPause",value:,{key:"preloadContent",value:function(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.on(null,"loadedmetadata",e),this.on(null,"adpause",this.bind_(this,this.handleAdPause))):e()}},{key:"removePreloadListener",value:function(){this.preloadListener_&&(this.player.off(null,"loadedmetadata",this.preloadListener_),this.preloadListener_=null)}},{key:"getPlayerType",value:,{key:"getVideoLength",value:function(){return this.player.getVideoLength()}},{key:"isPlayerAutoplay",value:function(){return this.player.isPlayerAutoplay()}},{key:"isCurrentlyFloating",value:function(){var e=this.player.player.id_.substring(9),t=document.getElementById("floating-placeholder-"+e);return!(!t||!t.style.display)&&"none"!==t.style.display}},{key:"isEmbedCurrentlyFloating",value:function(){return!("undefined"==typeof vectx||!vectx.hasOwnProperty("player_currently_floating"))&&vectx.player_currently_floating}},{key:"getVideoContainer",value:function(){return this.player.getVideoContainer()}},{key:"getAdContainer",value:,{key:"getPlayerPosition",value:function(){var e={x:-1,y:-1},t=this.videoPlayerContainer_;if(void 0!==t){var i=this.getElementPosition(t);e.x=i.x,e.y=i.y}return e}},{key:"getElementPosition",value:function(e){for(var t={x:0,y:0};e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t.x+=e.offsetLeft-e.scrollLeft,t.y+=e.offsetTop-e.scrollTop,e=e.offsetParent;return t}},{key:"getVideoDimensions",value:function(){return this.player.getVideoDimensions()}},{key:"resize",value:function(e,t,i,a,n){this.videoPlayerContainer_.style.position=e,this.videoPlayerContainer_.style.top=t+"px",this.videoPlayerContainer_.style.left=i+"px",this.videoPlayerContainer_.style.width=a+"px",this.videoPlayerContainer_.style.height=n+"px",this.player.style.width=a+"px",this.player.style.height=n+"px"}},{key:"resizeAdContainer",value:function(e,t,i,a,n){this.videoPlayerContainer_=this.getVideoContainer();this.videoPlayerContainer_.getBoundingClientRect();document.getElementById(this.adRenderer.adContainerId).style.width="100%"}},{key:"registerVideoEndedCallback",value:function(e){this.player.on("my-video","ended",e)}},{key:"removeVideoEndedCallback",value:,{key:"getPlayerVolume",value:,{key:"setPlayerVolume",value:,{key:"getPlayerViewable",value:function(){return e=this.player.getVideoElement(),t=50,i=e.getBoundingClientRect(),a=window.innerHeight||document.documentElement.clientHeight,!(Math.floor(100-(i.top>=0?0:i.top)/+-i.height*100)<t||Math.floor(100-(i.bottom-a)/i.height*100)<t);var e,t,i,a}},{key:"getPlayerMute",value:function(){return this.player.getPlayerMute()}},{key:"play",value:,{key:"pause",value:,{key:"paused",value:,{key:"asyncPause",value:,{key:"getNextAdBreak",value:function(e){if(0!=e.length){for(var t,i,a,n=Math.floor(this.getCurrentVideoTime()),r=-1,o=0;o<e.length;o++)if(void 0===e[o].isTriggered||!0!==e[o].isTriggered){var s=this.getAdBreakTime(e[o]);if(r<s&&(r=s,i=e[o]),s<=n&&!1===e[o].isComplete){a=o,t=e[o];break}}return t||(t=i),{nextBreak:t,idx:a}}}},{key:"getPrevAdBreak",value:function(e){if(0!=e.length){for(var t,i=Math.floor(this.getCurrentVideoTime()),a=0;a<e.length;a++){var n=this.getAdBreakTime(e[a]);if(n==i){t=e[a];break}if(n>i){t=e[a-1];break}}return t||(t=e[e.length-1]),t}}},{key:"getAdBreakTime",value:function(e){var t=e.timeOffsetSeconds;return-1==t&&(t=Math.floor(this.getVideoLength())),t}},{key:"attachAnalytics",value:function(e){return this.analytics=new S(this,e),this.analytics}},{key:"attachAdAnalytics",value:function(e,t,i){return this.adAnalytics=new x(this,e,t,i,this.videoContentShare),this.adAnalytics}},{key:"attachAdRendering",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnit,i=e.adBreaks,a=e.adInitializer,n=e.isPlayList,r=e.videoObject,o=e.browserPermissions;return this.adInitializer=a,this.adRenderer=new k(this,t,i,a,n,r,o),this.adRenderer}},{key:"getInsertMethod",value:]),e}();var U=!1;function F(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new R(e,t,i)}undefined"!=typeof ezVideoIframe&&ezVideoIframe&&(U=!0),"undefined"!=typeof isSharedEmbed&&isSharedEmbed&&(U=!1,"undefined"!=typeof vectx&&(vectx.hasOwnProperty("parent_url")&&(_ezaq.player_url=_ezaq.url,_ezaq.url=vectx.parent_url),vectx.hasOwnProperty("domain_id")&&(window._ez_send_requests_outside_humix=!0,_ezaq.domain_id=vectx.domain_id,_ezaq.page_view_id=vectx.pageview_id,_ezaq.visit_uuid=vectx.visit_uuid))),__ez=U?window.parent.__ez:__ez,_ezaq=U?window.parent._ezaq:_ezaq,ez_attachEvent=U?window.parent.ez_attachEvent:ez_attachEvent,ez_detachEvent=U?window.parent.ez_detachEvent:ez_detachEvent,__ezDotData=U?window.parent.__ezDotData:__ezDotData}]);