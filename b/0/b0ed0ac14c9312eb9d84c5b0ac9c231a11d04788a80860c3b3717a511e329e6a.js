"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7706],{27706:function(e,t,i){i.r(t);var n=i(85893),o=i(67294),c=i(11163),a=i(36777),s=i(34957),l=i(9008),r=i.n(l),d=i(91543),u=i(27361),h=i.n(u),w=i(47742),v=i(64929),f=i(2128);t.default=(0,o.memo)(function(){let{session:e}=(0,o.useContext)(a.Z),[t,i]=(0,o.useState)([]),[l,u]=(0,o.useState)(!1),m=(0,c.useRouter)(),{defaultLocale:p}=m,{isHP:S}=(0,f.Z)(),y=(0,v.Z)(),{appData:E,injectJquery:C,injectScriptOnce:$}=(0,o.useContext)(w.Z),j=h()(E,"siteId"),L=h()(E,"backendDomain"),_=h()(E,"liveChatESW"),k=async()=>{let t=`locale=${e?.user?.locale||p}`,n=`urlAction=${!!S&&"Home-Show"}`,o=`requestedUrl=${window.location.href}`,c=`${t}&isLiveChatEnabled=true&${n}&${o}`;try{let a=(0,s.Z)(`/get-live-chat?${c}`),l=await fetch(a,{credentials:"include"}).then(e=>e.json());i(l)}catch(r){console.log("Failed to load Live Chat",r)}},b=()=>{let e=document.querySelector("#pdp-sticky-container"),t=document.querySelectorAll(".helpButton");e?t.forEach(e=>e?.classList?.add("helpButtonPDP")):t.forEach(e=>e?.classList?.remove("helpButtonPDP"))},g=()=>{if(l){let e=document.querySelector(".esw-service-livechat");if(window&&void 0!==window.jQuery&&!e){window.$=window.jQuery;let t=document.createElement("script");t.className="esw-service-livechat",t.defer=!0,t.setAttribute("src",_),document.body.appendChild(t),t.onload=()=>{window.embedded_svc?"function"==typeof window.initESW&&window.initESW("https://service.force.com",y,L):"function"==typeof window.initESW&&window.initESW(null,y,L)}}}},x=async()=>{try{await C(),await $("/scripts/pre-chat-menu-script.js"),k(),u(!0)}catch(e){console.log("Error when init live chat script",e)}};return(0,o.useEffect)(()=>{_&&x()},[]),(0,o.useEffect)(()=>{l&&b()},[l,t,m]),_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"js-livechat-url d-none","data-live-chat-cookie-url":`/on/demandware.store/Sites-${j}-Site/en_US/LiveChat-LiveChatCookie`,"data-live-chat-service-url":`/on/demandware.store/Sites-${j}-Site/en_US/LiveChat-LiveChatService`}),(0,n.jsx)(r(),{children:(0,d.Z)()&&!!l&&t?.map((e,i)=>(t?.length-1===i&&g(),(0,n.jsx)("script",{defer:!0,dangerouslySetInnerHTML:{__html:e}},`${i}`)))})]}):null})}}]);