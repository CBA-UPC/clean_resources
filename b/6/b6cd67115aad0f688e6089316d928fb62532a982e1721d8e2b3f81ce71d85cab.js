(window.webpackJsonp=window.webpackJsonp||[]).push([[194],{1329:function(e,t,o){"use strict";o.r(t);var n=o(5),r=o(529),i=o(77),a=o(941);const s=e=>({baseLayout:Object(r.b)(e)}),l={routeData:s};var p=Object(n.defineComponent)(Object.assign({},l,{__name:"cms-timeline",setup(e){const{baseLayout:t}=Object(i.c)();return Object(a.a)(".js-parallax"),{__sfc:!0,routeData:s,baseLayout:t,BaseLayout:r.a}}})),u=o(45),c=Object(u.a)(p,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.BaseLayout,{attrs:{twig:"","route-data":t.baseLayout}})}),[],!1,null,null,null);t.default=c.exports},308:function(e,t,o){var n=o(310),r=o(86),i=o(180),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,p=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var o=s.test(e);return o||l.test(e)?p(e.slice(2),o?2:8):a.test(e)?NaN:+e}},309:function(e,t,o){var n=o(78);e.exports=function(){return n.Date.now()}},310:function(e,t,o){var n=o(311),r=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(r,""):e}},311:function(e,t){var o=/\s/;e.exports=function(e){for(var t=e.length;t--&&o.test(e.charAt(t)););return t}},587:function(e,t){e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure "+e)},e.exports.__esModule=!0,e.exports.default=e.exports},84:function(e,t,o){var n=o(86),r=o(309),i=o(308),a=Math.max,s=Math.min;e.exports=function(e,t,o){var l,p,u,c,d,f,m=0,v=!1,w=!1,x=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var o=l,n=p;return l=p=void 0,m=t,c=e.apply(n,o)}function h(e){var o=e-f;return void 0===f||o>=t||o<0||w&&e-m>=u}function y(){var e=r();if(h(e))return g(e);d=setTimeout(y,function(e){var o=t-(e-f);return w?s(o,u-(e-m)):o}(e))}function g(e){return d=void 0,x&&l?b(e):(l=p=void 0,c)}function A(){var e=r(),o=h(e);if(l=arguments,p=this,f=e,o){if(void 0===d)return function(e){return m=e,d=setTimeout(y,t),v?b(e):c}(f);if(w)return clearTimeout(d),d=setTimeout(y,t),b(f)}return void 0===d&&(d=setTimeout(y,t)),c}return t=i(t)||0,n(o)&&(v=!!o.leading,u=(w="maxWait"in o)?a(i(o.maxWait)||0,t):u,x="trailing"in o?!!o.trailing:x),A.cancel=function(){void 0!==d&&clearTimeout(d),m=0,l=f=p=d=void 0},A.flush=function(){return void 0===d?c:g(r())},A}},941:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o(5),r=o(942),i=o.n(r);function a(e){let t;Object(n.onMounted)((()=>{t=new i.a(e)})),Object(n.onBeforeUnmount)((()=>{t.destroy()}))}},942:function(e,t,o){(function(o){var n,r,i;"undefined"!=typeof window&&window,r=[],void 0===(i="function"==typeof(n=function(){var e=function(t,o){"use strict";var n=Object.create(e.prototype),r=0,i=0,a=0,s=0,l=[],p=!0,u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},c=null,d=!1;try{var f=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassive",null,f),window.removeEventListener("testPassive",null,f)}catch(e){}var m=window.cancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout,v=window.transformProp||function(){var e=document.createElement("div");if(null===e.style.transform){var t=["Webkit","Moz","ms"];for(var o in t)if(void 0!==e.style[t[o]+"Transform"])return t[o]+"Transform"}return"transform"}();function w(){if(3===n.options.breakpoints.length&&Array.isArray(n.options.breakpoints)){var e,t=!0,o=!0;if(n.options.breakpoints.forEach((function(n){"number"!=typeof n&&(o=!1),null!==e&&n<e&&(t=!1),e=n})),t&&o)return}n.options.breakpoints=[576,768,1201],console.warn("Rellax: You must pass an array of 3 numbers in ascending order to the breakpoints option. Defaults reverted")}n.options={speed:-2,verticalSpeed:null,horizontalSpeed:null,breakpoints:[576,768,1201],center:!1,wrapper:null,relativeToWrapper:!1,round:!0,vertical:!0,horizontal:!1,verticalScrollAxis:"y",horizontalScrollAxis:"x",callback:function(){}},o&&Object.keys(o).forEach((function(e){n.options[e]=o[e]})),o&&o.breakpoints&&w(),t||(t=".rellax");var x="string"==typeof t?document.querySelectorAll(t):[t];if(x.length>0){if(n.elems=x,n.options.wrapper&&!n.options.wrapper.nodeType){var b=document.querySelector(n.options.wrapper);if(!b)return void console.warn("Rellax: The wrapper you're trying to use doesn't exist.");n.options.wrapper=b}var h,y=function(e){var t=n.options.breakpoints;return e<t[0]?"xs":e>=t[0]&&e<t[1]?"sm":e>=t[1]&&e<t[2]?"md":"lg"},g=function(){for(var e=0;e<n.elems.length;e++){var t=T(n.elems[e]);l.push(t)}},A=function(){for(var e=0;e<l.length;e++)n.elems[e].style.cssText=l[e].style;l=[],i=window.innerHeight,s=window.innerWidth,h=y(s),z(),g(),S(),p&&(window.addEventListener("resize",A),p=!1,O())},T=function(e){var t,o=e.getAttribute("data-rellax-percentage"),r=e.getAttribute("data-rellax-speed"),a=e.getAttribute("data-rellax-xs-speed"),l=e.getAttribute("data-rellax-mobile-speed"),p=e.getAttribute("data-rellax-tablet-speed"),u=e.getAttribute("data-rellax-desktop-speed"),c=e.getAttribute("data-rellax-vertical-speed"),d=e.getAttribute("data-rellax-horizontal-speed"),f=e.getAttribute("data-rellax-vertical-scroll-axis"),m=e.getAttribute("data-rellax-horizontal-scroll-axis"),v=e.getAttribute("data-rellax-zindex")||0,w=e.getAttribute("data-rellax-min"),x=e.getAttribute("data-rellax-max"),b=e.getAttribute("data-rellax-min-x"),y=e.getAttribute("data-rellax-max-x"),g=e.getAttribute("data-rellax-min-y"),A=e.getAttribute("data-rellax-max-y"),T=!0;a||l||p||u?t={xs:a,sm:l,md:p,lg:u}:T=!1;var z=n.options.wrapper?n.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;n.options.relativeToWrapper&&(z=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-n.options.wrapper.offsetTop);var E=n.options.vertical&&(o||n.options.center)?z:0,O=n.options.horizontal&&(o||n.options.center)?n.options.wrapper?n.options.wrapper.scrollLeft:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0,S=E+e.getBoundingClientRect().top,k=e.clientHeight||e.offsetHeight||e.scrollHeight,Y=O+e.getBoundingClientRect().left,j=e.clientWidth||e.offsetWidth||e.scrollWidth,X=o||(E-S+i)/(k+i),W=o||(O-Y+s)/(j+s);n.options.center&&(W=.5,X=.5);var _=T&&null!==t[h]?Number(t[h]):r||n.options.speed,M=c||n.options.verticalSpeed,R=d||n.options.horizontalSpeed,N=f||n.options.verticalScrollAxis,q=m||n.options.horizontalScrollAxis,C=L(W,X,_,M,R),F=e.style.cssText,B="",P=/transform\s*:/i.exec(F);if(P){var D=P.index,H=F.slice(D),$=H.indexOf(";");B=$?" "+H.slice(11,$).replace(/\s/g,""):" "+H.slice(11).replace(/\s/g,"")}return{baseX:C.x,baseY:C.y,top:S,left:Y,height:k,width:j,speed:_,verticalSpeed:M,horizontalSpeed:R,verticalScrollAxis:N,horizontalScrollAxis:q,style:F,transform:B,zindex:v,min:w,max:x,minX:b,maxX:y,minY:g,maxY:A}},z=function(){var e=r,t=a;if(r=n.options.wrapper?n.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset,a=n.options.wrapper?n.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset,n.options.relativeToWrapper){var o=(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset;r=o-n.options.wrapper.offsetTop}return!(e==r||!n.options.vertical)||!(t==a||!n.options.horizontal)},L=function(e,t,o,r,i){var a={},s=(i||o)*(100*(1-e)),l=(r||o)*(100*(1-t));return a.x=n.options.round?Math.round(s):Math.round(100*s)/100,a.y=n.options.round?Math.round(l):Math.round(100*l)/100,a},E=function(){window.removeEventListener("resize",E),window.removeEventListener("orientationchange",E),(n.options.wrapper?n.options.wrapper:window).removeEventListener("scroll",E),(n.options.wrapper?n.options.wrapper:document).removeEventListener("touchmove",E),c=u(O)},O=function(){z()&&!1===p?(S(),c=u(O)):(c=null,window.addEventListener("resize",E),window.addEventListener("orientationchange",E),(n.options.wrapper?n.options.wrapper:window).addEventListener("scroll",E,!!d&&{passive:!0}),(n.options.wrapper?n.options.wrapper:document).addEventListener("touchmove",E,!!d&&{passive:!0}))},S=function(){for(var e,t=0;t<n.elems.length;t++){var o=l[t].verticalScrollAxis.toLowerCase(),p=l[t].horizontalScrollAxis.toLowerCase(),u=-1!=o.indexOf("x")?r:0,c=-1!=o.indexOf("y")?r:0,d=-1!=p.indexOf("x")?a:0,f=(c+(-1!=p.indexOf("y")?a:0)-l[t].top+i)/(l[t].height+i),m=(u+d-l[t].left+s)/(l[t].width+s),w=(e=L(m,f,l[t].speed,l[t].verticalSpeed,l[t].horizontalSpeed)).y-l[t].baseY,x=e.x-l[t].baseX;null!==l[t].min&&(n.options.vertical&&!n.options.horizontal&&(w=w<=l[t].min?l[t].min:w),n.options.horizontal&&!n.options.vertical&&(x=x<=l[t].min?l[t].min:x)),null!=l[t].minY&&(w=w<=l[t].minY?l[t].minY:w),null!=l[t].minX&&(x=x<=l[t].minX?l[t].minX:x),null!==l[t].max&&(n.options.vertical&&!n.options.horizontal&&(w=w>=l[t].max?l[t].max:w),n.options.horizontal&&!n.options.vertical&&(x=x>=l[t].max?l[t].max:x)),null!=l[t].maxY&&(w=w>=l[t].maxY?l[t].maxY:w),null!=l[t].maxX&&(x=x>=l[t].maxX?l[t].maxX:x);var b=l[t].zindex,h="translate3d("+(n.options.horizontal?x:"0")+"px,"+(n.options.vertical?w:"0")+"px,"+b+"px) "+l[t].transform;n.elems[t].style[v]=h}n.options.callback(e)};return n.destroy=function(){for(var e=0;e<n.elems.length;e++)n.elems[e].style.cssText=l[e].style;p||(window.removeEventListener("resize",A),p=!0),m(c),c=null},A(),n.refresh=A,n}console.warn("Rellax: The elements you're trying to select don't exist.")};return e})?n.apply(t,r):n)||(e.exports=i)}).call(this,o(110))}}]);),!t.link)return;const e=t.isTargetBlank?"_blank":"_self";window.open(t.link,e)}}},p=Object(o.a)(c,(function(){var t=this,e=t._self._c;return e("MountingPortal",{attrs:{name:"notification-messages","mount-to":"#nav-layer-top",append:""}},t._l(t.notifications,(function(s,n){return e("MessageSite",{key:n,attrs:{msg:s},on:{dismiss:function(e){return t.dismiss(s,n)},cta:function(e){return t.cta(s)}}})})),1)}),[],!1,null,null,null);e.default=p.exports},597:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"a",(function(){return a}));var n=s(6),r=s(1);const i=Object(n.c)({queries:[r.P],merge:!0}),o=()=>i({}).then((t=>t.request)).then((t=>t.latestSiteMessage));function a(t){return Object(n.a)({req:r.ac,params:{siteMessageId:t}}).then((()=>null))}},938:function(t,e,s){"use strict";e.a={props:{messages:{type:Array,default:()=>[]}},data(){return{notifications:this.messages}},methods:{setMessages(t){this.notifications=t,this.updateMessages(t)},addMessage(t){this.notifications.push(t),this.updateMessages(this.notifications)},removeMessage(t){this.notifications.splice(t,1),this.updateMessages(this.notifications)},updateMessages(t){this.$emit("update-messages",t)}},computed:{hasMessages(){return!!this.messages.length}}}}}]);{type:"required",validationData:Object.assign({},e)},n.b.req),O=(e,t)=>n.b.withParams({type:"required",validationData:Object.assign({},t)},(t=>{let r=!1;if("function"==typeof e)r=e.call(void 0,t);else{const t=Object(s.unref)(e);r=t&&0!==t}return!r||n.b.req(t)})),j=(e,t)=>n.b.withParams({type:"url",validationData:Object.assign({},t)},(t=>Object(n.d)(t)||"string"==typeof t&&function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new RegExp(o.startWithProtocol.concat(e?o.makeProtocolOptional:[]).concat(o.continue).join(""),"iu")}(e).test(t))),I=e=>n.b.withParams({type:"sameOriginUrl",validationData:Object.assign({},e)},(e=>Object(n.d)(e)||"string"==typeof e&&new URL(e).origin===window.location.origin)),w=(e,t)=>n.b.withParams({type:"treeSelectRequiredWith",validationData:Object.assign({},t)},(t=>{const r=Object(c.a)(t);return!Object(s.unref)(e)||r.length>0})),F=(e,t)=>n.b.withParams({type:"minDatetime",validationData:Object.assign({minDate:e},t)},(t=>{var r;const a=null===(r=Object(s.unref)(e))||void 0===r?void 0:r.timestamp;return Object(n.a)(t.timestamp)||Object(n.a)(a)||t.timestamp>=a})),D=(e,t)=>n.b.withParams({type:"maxDatetime",validationData:Object.assign({maxDate:e},t)},(t=>{var r;const a=null===(r=Object(s.unref)(e))||void 0===r?void 0:r.timestamp;return Object(n.a)(t.timestamp)||t.timestamp<=a}))},566:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return c}));var n=r(680),a=r.n(n);const i=e=>e.files&&e.files.length?a()(e.files):null,o=6144,s=e=>e.size>6291456,c=e=>{const t=new Image;return new Promise(((r,n)=>{t.addEventListener("load",(()=>{r({width:t.naturalWidth,height:t.naturalHeight})})),t.addEventListener("error",n),t.src=e}))}},567:function(e,t,r){"use strict";(function(e){r.d(t,"d",(function(){return b})),r.d(t,"h",(function(){return y})),r.d(t,"j",(function(){return T})),r.d(t,"m",(function(){return D})),r.d(t,"e",(function(){return S})),r.d(t,"g",(function(){return E})),r.d(t,"f",(function(){return F})),r.d(t,"l",(function(){return v})),r.d(t,"c",(function(){return I})),r.d(t,"b",(function(){return w})),r.d(t,"a",(function(){return j})),r.d(t,"i",(function(){return P})),r.d(t,"k",(function(){return A}));var n=r(32),a=r.n(n),i=r(5),o=r(87),s=r(4),c=r(104),u=r(616),l=r(6),d=r(611),m=r(513),h=r(1),p=r(21),g=r(653);const f=["wysiwyg"];function b(){const e=T(),t=Object(m.b)(),r=Object(i.ref)(!!e.value.threadId||function(e){return e.type===h.Ab.Deal&&Boolean(e.link||e.title||e.price||e.scheduledReleaseDate.date||e.endDate.date)}(e.value));return Object(p.j)(["thread_created_location"]),{isFullForm:r,showFullForm:function(){r.value=!0,t.replace({query:Object.assign({},t.currentRoute.query),hash:"#thread-details"})}}}const v=()=>{const e=T(),t=Object(i.ref)(null);Object(i.onUnmounted)((()=>{y().value.destroy()}));const{submitForm:r,validationMessages:n}=O({form:t,route:Object(m.a)()});return{form:t,thread:e,formOptions:F(),submitForm:r,validationMessages:n}},y=()=>Object(i.computed)((()=>c.b.create("threadSubmit"))),O=e=>{let{form:t,route:r}=e;const n=Object(i.ref)([]);return{submitForm:async function(){const e=y();if(e.value.isLoading())return;let a=null;try{var o;await Object(d.a)(),e.value.reset(),e.value.add(new Promise((e=>{a=e}))),t&&t.value.updateShortcodes();const c=F(),m=(e=>{const t={threadCreatedLocation:{name:"thread_created_location",data:e.query.thread_created_location}};return Object(i.ref)(t)})(r),h=T();h.value.isLocal&&(h.value.dispatchedFrom=null);const p="thread-desc-".concat(null!==(o=h.value.threadId)&&void 0!==o?o:"new"),f=Object(l.b)({req:u.e,params:{threadData:h.value,mentions:c.wysiwyg.plugins.mentions,morph:"threads.switch"===r.name,token:s.a.state.threadForm.token,ocular:m.value.threadCreatedLocation.data?m.value:null}}),b=await e.value.add(f.request),{thread:v,validation:y,responseMessages:O=[]}=j(b);if(n.value=y,!v)return a(),{responseMessages:O};Object(g.a)(p),window.onbeforeunload=()=>null,window.onunload=()=>null,window.location.href=null==v?void 0:v.url}catch(t){var c;console.error(t),null===(c=a)||void 0===c||c();const{validation:r,responseMessages:i}=j(t);return n.value=r,e.value.reset(),{responseMessages:i}}},validationMessages:n}};function j(e){if(e.errors&&e.errors.length)return{thread:null,validation:[],responseMessages:[]};const{messages:t}=e,{thread:r,validation:n}=e.persistThread||{};if(n&&n.length)return{thread:null,validation:n,responseMessages:[]};return(null!=t?t:[]).some((e=>"error"===e.type))?{thread:null,validation:[],responseMessages:t}:{thread:r,validation:[],responseMessages:t}}const I=async(e,t)=>{var r;const{submitForm:n,validationMessages:a}=O({route:e}),{responseMessages:i}=null!==(r=await n())&&void 0!==r?r:{};s.a.dispatch("pageMsgs/set",i),Object(u.d)(t,a.value)},w=()=>{const e=new URLSearchParams(window.location.search).get("imageurl");e&&s.a.dispatch("threadForm/addGalleryImages",[{remoteUrl:e}])},F=()=>{const e=Object(o.d)({countries:{namespace:"threadForm",path:"countries"},groups:{namespace:"threadForm",path:"groups"},locations:{namespace:"threadForm",path:"locations"},events:{namespace:"threadForm",path:"events"}});return e.wysiwyg={plugins:D()},e},D=()=>{const e=Object(o.d)({mentions:{namespace:"threadForm",path:"mentions"},shortcodes:{namespace:"threadForm",path:"thread.shortcodes"}});return e.link={href:"",content:""},e.emoji=!0,e},S=()=>{const e=F(),t=T();return Object(i.computed)((()=>{var r;const n=s.a.state.threadForm.features||{},{wysiwyg:i={}}=n,o=a()(n,f),c=i.html&&(!t.value.threadId||(null===(r=t.value.user)||void 0===r?void 0:r.userId)===s.a.getters["auth/me"].userId);return Object.assign({},o,{wysiwyg:Object.assign({},i,{html:c}),dispatchedFrom:o.dispatchedFrom&&e.countries.length,locations:o.locations&&!!e.locations.id,events:o.events&&e.events.length,groups:o.groups&&e.groups.length})}))},E=e=>{const t=F();return Object(i.computed)((()=>({groups:t.groups,max:e})))},T=()=>{const{thread:e}=Object(o.d)({thread:{namespace:"threadForm",path:"thread",deep:!0}});return Object(i.ref)(e)},P=e=>{const t=T(),r=Object(i.watch)(t,(n=>{n&&(window.onbeforeunload=()=>"¡Tienes cambios sin grabar!",((e,t)=>{const r=t?"MultiStep":"SinglePage",n=["THREAD_SUBMISSION"],a=[h.Ab.Deal].includes(e.value.type)?"".concat(r).concat(e.value.type,"Abandoned"):null;window.onunload=()=>{a&&n.includes(h.q[a])&&e.value.link&&!e.value.threadId&&(localStorage.setItem("formAbandoned",h.q[a]),localStorage.setItem("formAbandonedTimer",String(Date.now())))}})(t,e),r())}),{deep:!0})},A=()=>{const t=T(),r=Object(i.computed)((()=>t.value.locations.checked));return Object(i.computed)((()=>{if(!t.value.isLocal)return null;if(r.value)return"En todo el país";if(!t.value.locations||!t.value.locations.items)return null;const n=t.value.locations.items.filter((e=>e.checked)),a=t.value.locations.items.reduce(((e,t)=>(t.items&&!t.checked&&e.push(...t.items.filter((e=>e.checked))),e)),[]);return[n.length?e("{1} :count Comunidad autónoma|{2} :count Comunidades|[3,*] :count Comunidades",{count:n.length}):"",a.length?e("{1} :count Ubicación|{2} :count Ubicaciones|[3,*] :count Ubicaciones",{count:a.length}):""].filter((e=>e)).join(" / ")}))}}).call(this,r(70).translation)},579:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=e=>{const t=[];return function e(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!r)return;if(r.checked)return void t.push(r.id);if(!r.items)return;r.items.map(e)}(e),t}},586:function(e,t){e.exports=function(e){if(null==e)throw new TypeError("Cannot destructure "+e)},e.exports.__esModule=!0,e.exports.default=e.exports},611:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return m}));var n=r(4),a=r(1),i=r(682),o=r(60),s=r(17),c=r(324);const u=e=>e.groups.some((e=>e.source===o.b)),l=r.n(c)()((async e=>await Object(a.Nb)({filter:e})),(e=>{var t,r;return"".concat(e.terms.join("_"),"_").concat(null!==(t=null===(r=e.price)||void 0===r?void 0:r.eq)&&void 0!==t?t:"")})),d=async()=>{if(!n.a.getters["threadForm/canAutoAssignGroups"])return;const e=n.a.state.threadForm.thread;if(![s.f,s.g].includes(e.type))try{var t;const r=n.a.state.threadForm.groups,a=null!==(t=n.a.state.threadForm.fetchedFromUrl.title)&&void 0!==t?t:"",c={threadId:{eq:e.threadId},threadUrl:{eq:e.link},threadTypeName:{eq:e.type},terms:[e.title,a]};null!==e.price&&void 0!==e.price&&""!==e.price&&(c.price={eq:e.price});const{data:{groups:d}}=await l(c),m=e.type===s.e;if(d.length<1)return n.a.commit("threadForm/UPDATE_FIELD",{path:"thread.groups",value:e.groups.filter((e=>!e.assignedBySystem))}),void n.a.commit("threadForm/UPDATE_FIELD",{path:"groups",value:r.filter((e=>Object(i.g)(e,m)!==o.a||!e.assignedBySystem)).map((e=>Object.assign({},e,{matchesAutoAssignment:!1})))});if(u(e)&&!m||u(e)&&(e=>e.groups.some((e=>e.source===o.c)))(e))return;const h=d.map((e=>Object.assign({},e,{assignedBySystem:!0}))),p=h.reduce(((e,t)=>(e.primary||Object(i.g)(t,m)!==o.b||(e.groups.push(t),e.primary=!0),e.secondary||Object(i.g)(t,m)!==o.c||(e.groups.push(t),e.secondary=!0),Object(i.g)(t)===o.a&&e.groups.push(t),e)),{primary:!1,secondary:!1,groups:[]}),g=[...r.filter((e=>!h.some((t=>t.threadGroupId===e.threadGroupId)))).map((e=>Object.assign({},e,{matchesAutoAssignment:!1}))),...h.filter((e=>Object(i.g)(e,m)!==o.a)).map((e=>Object.assign({},e,{matchesAutoAssignment:!0})))],f=[...e.groups.filter((e=>!e.assignedBySystem)),...p.groups];n.a.commit("threadForm/UPDATE_FIELD",{path:"groups",value:g}),n.a.commit("threadForm/UPDATE_FIELD",{path:"thread.groups",value:f})}catch(e){}},m=e=>{const{cpcLink:t,claimCodeCampaignId:r,isExclusive:a,nsfw:i,scheduledReleaseDate:o,events:c,disclaimers:u,uploadImage:l}=n.a.state.threadForm.features,d=t||r||a||i||o||c||u;return e.type===s.e?d||l:d}},616:function(e,t,r){"use strict";r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return y})),r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return j})),r.d(t,"c",(function(){return I})),r.d(t,"d",(function(){return w}));var n=r(32),a=r.n(n),i=r(1),o=r(642),s=r(753);var c=r(107),u=r(6),l=r(120),d=r(724),m=r(17);const h=["merchant","morphsTo","user","shippingPrice","freeShipping","events","groups","images","imageSuggestions","mainImage","galleryImages","disclaimers","titleSlug","threadTypeId","preparedHtmlDescription"],p=["isSelected","source","matchesAutoAssignment"],g=["checked"],f=(e,t)=>{let{mentions:r,morph:n}=t;const{merchant:{merchantId:i,merchantName:u}={},shippingPrice:l,freeShipping:d,events:f,groups:b,galleryImages:v,disclaimers:y}=e,O=a()(e,h);switch(O.mentions=r,n&&(O.morph=O.type),i&&(O.merchant={merchantId:i,merchantName:u}),O.groups=b.map((e=>a()(e,p))),O.events=f.map((e=>a()(e,g))),O.locations.id||delete O.locations,O.startDate.timestamp||(O.startDate=null),O.endDate.timestamp||(O.endDate=null),O.scheduledReleaseDate.timestamp||(O.scheduledReleaseDate=null),Object(o.a)(d)&&Object(o.a)(l)||(O.shipping={isFree:!!d,price:l||0}),[m.o,m.a,m.g].includes(O.type)?((O.type===m.a&&!O.price&&!Object(s.b)(O.price)||[m.o,m.g].includes(O.type)&&Object(s.a)(O.price))&&(O.price=""),O.percentage||(O.percentage=0)):(delete O.price,delete O.percentage,delete O.isLocal),O.discountType){case m.c:delete O.price;break;case m.d:delete O.percentage;break;case m.b:delete O.price,delete O.percentage}return O.type===m.a?O.nextBestPrice||(O.nextBestPrice=0):O.nextBestPrice||delete O.nextBestPrice,O.disclaimers=y.map((e=>{let{threadDisclaimerId:t}=e;return{threadDisclaimerId:t}})),Object.assign({},O,"locations"in O&&{locations:(j=O.locations,"1"===j.id&&j.checked&&delete j.items,j)},{galleryImages:{bucket:"threads",slots:v.map((e=>{const t={remoteUrl:e.remoteUrl||"",slotData:null};return e.remoteUrl||(t.slotData=Object(c.d)(e)?Object.assign({},e.slots[0]):Object.assign({},e)),t}))}});var j},b=function(){let{threadData:e,mentions:t="",morph:r=!1,token:n=null,ocular:a=null,descriptionEditOnly:o=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.Ac)({payload:{thread:f(e,{mentions:t,morph:r}),token:n,ocular:a,descriptionEditOnly:o}})},v=e=>{const t=[];return Object.entries(e).forEach((e=>{let[r,n]=e;if(Array.isArray(n)&&n.length){const e=n[0].translations[0];t.push({title:e.title,text:e.body,type:r})}})),t},y=async function(e){const t=await Object(d.f)(e);return{request:t.request.then(v),cancel:t.cancel}},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Object(u.d)(Object(d.a)(e,t),11e3);return{request:r.request.then((e=>{var t;let{duplicates:r}=e;return null!=r&&null!==(t=r.threads)&&void 0!==t&&t.length?r:null})),cancel:r.cancel}},j=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Object(u.d)(Object(d.b)(e,t,r),5e3);return{request:n.request.then((e=>{let{duplicates:t}=e;return null!=t&&t.length?t:[]})),cancel:n.cancel}},I=()=>Object(l.c)(),w=(e,t)=>{t.map((t=>{let r=t.path;return"threadLocationSelected"===r&&(r="locations"),e.setMessages(r,t.translations.map((e=>({text:e.body}))))}))}},642:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return o}));r(315);const n={req:e=>{if(Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"==typeof e){for(let t in e)return!0;return!1}return!!String(e).length},withParams:(e,t)=>async function(){const r=await t(...arguments);return"object"==typeof r?e=Object.assign({},e,r):e.valid=r,e}},a=e=>null==e||""===e,i=e=>a(e)||""===e,o=e=>a(e)||Array.isArray(e)&&0===e.length},653:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(14);t.b={created(){this.markForRestore=this.markForRestore.bind(this),this.undoRestore=this.undoRestore.bind(this),this.clearRestore=this.clearRestore.bind(this),this.restoreStorage=new n.a("redactor-restore")},data:()=>({restoredContent:"",initialContent:"",restoreId:""}),watch:{restoredContent(e){this.$emit("canRestore",Boolean(e))}},methods:{restoreConfig(){return{markForRestore:this.markForRestore}},markForRestore(e){let{restoreId:t,restoredContent:r,initialContent:n}=e;this.restoreId=t,this.restoredContent=r||"",this.initialContent=n||""},undoRestore(){this.$editor.code.set(this.initialContent,!0),this.clearRestore()},clearRestore(){this.restoreStorage.del(this.restoreId),this.restoredContent=""}}};const a=e=>{new n.a("redactor-restore").del(e)}},680:function(e,t,r){e.exports=r(681)},681:function(e,t){e.exports=function(e){return e&&e.length?e[0]:void 0}},682:function(e,t,r){"use strict";r.d(t,"g",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"e",(function(){return d})),r.d(t,"h",(function(){return m})),r.d(t,"a",(function(){return h})),r.d(t,"c",(function(){return p}));var n=r(60),a=r(17),i=r(564);const o=function(e){return!!(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.isDefault&&e.isDiscussion:e.isDefault&&!e.isDiscussion)},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.source?e.source:o(e,t)?"primary":e.isDefault&&t?"secondary":e.isDefault?"tertiary":"other"},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((e=>Object.assign({},e,{source:s(e,t)})))},u=e=>!!e.isSelected,l=e=>!(!e.assignedBySystem||!e.matchesAutoAssignment),d=(e,t)=>{const r=[...t],n=r.findIndex((t=>t.threadGroupId===e.threadGroupId));return n>-1&&r.splice(n,1),u(e)&&r.push(e),r},m=(e,t,r)=>{const a=((e,t)=>{const r=e.find((e=>e.threadGroupId===t.id));return r?(r.isSelected=t.isSelected,r.source=r.source||n.a,r):null})(t,r);return a?d(a,e):null},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r={threadGroups:[],systemAssignedGroups:[]},n=e===a.e,s=n?"discussionThreadGroups":"threadGroups",c=e=>o(e,n);return n&&(r.discussionThreadGroups=[]),r[s].push(Object(i.j)({translation:"Por favor, selecciona la categoría más relevante"}),Object(i.g)(1,{},c)),t&&r[s].push(Object(i.d)(t,{},c)),r};function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"groups";const r=Object.assign({},e);return Object.keys(r).forEach((e=>{r[e]={fieldName:t,rules:r[e]}})),r}},724:function(e,t,r){"use strict";r.d(t,"f",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"d",(function(){return l}));var n=r(1),a=r(6);const i=async e=>{const t=[n.h,n.g,n.Hb,n.f,n.e],r={url:e,field:"link",value:e},i=await Object(a.c)({queries:t});return await i(r)},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.b)({req:n.bc,params:{url:e,filter:t},options:r})},s=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(a.b)({req:n.cc,params:{url:e,voucherCode:t,filter:r},options:i})},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.b)({req:n.Yc,params:e,options:t})},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.b)({req:n.Xc,params:e,options:t})},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.b)({req:n.uc,params:{url:e},options:t})}},728:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n={images:"getImageSuggestions",price:"getPriceSuggestion",shippingPrice:"getShippingPriceSuggestion",specification:"getSpecificationSuggestion",title:"getTitleSuggestion"}},753:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i}));var n=r(548);const a=e=>("string"==typeof e?""!==e.trim():null!=e)&&0===Number(Object(n.b)(e)),i=e=>!Number(Object(n.b)(e))},803:function(e,t,r){"use strict";var n=r(540),a=r.n(n),i=r(17),o=r(87),s=r(682),c=r(107),u=r(521),l=r(566),d=r(42),m=r(728),h=r(724),p=r(6),g=r(616);const f=function(e,t,r){var n,a,o,u;let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const d=e.shipping||{isFree:null,price:null},m=d.isFree,h=d.price,p=null!=e&&null!==(n=e.startDate)&&void 0!==n&&n.timestamp?e.startDate:{},g=null!=e&&null!==(a=e.endDate)&&void 0!==a&&a.timestamp?e.endDate:{},f=null!=e&&null!==(o=e.scheduledReleaseDate)&&void 0!==o&&o.timestamp?e.scheduledReleaseDate:{},b=e.type||t||"";return{threadId:e.threadId||null,type:b,images:Object(c.d)(e.images)?e.images:{bucket:"threads",slots:[]},link:e.link||"",galleryImages:e.galleryImages||[],user:e.user||null,claimCodeCampaignId:e.claimCodeCampaignId||"",discountType:e.discountType||null,disclaimers:e.disclaimers||[],cpcLink:e.cpcLink||"",price:e.price||null,percentage:e.percentage||null,nextBestPrice:e.nextBestPrice||null,title:e.title||"",titleSlug:e.titleSlug||"",threadTypeId:e.threadTypeId||null,description:e.description||"",groups:e.groups?Object(s.d)(e.groups,b===i.e):[],freeShipping:m,shippingPrice:h,startDate:p,endDate:g,scheduledReleaseDate:f,voucherCode:e.voucherCode||"",isLocal:!!(e.isLocal||!e.threadId&&l.preSelectIsLocal),isExclusive:!!e.isExclusive,locations:e.locations||r,dispatchedFrom:e.dispatchedFrom||null,nsfw:!!e.nsfw,events:e.events||[],eventOnly:!!e.eventOnly,merchant:e.merchant||{},morphsTo:e.morphsTo||[],shortcodes:e.shortcodes||[],imageSuggestions:e.imageSuggestions||[],preparedHtmlDescription:(null===(u=e.threadDetails)||void 0===u?void 0:u.preparedHtmlDescription)||null}},b=function(){let{formId:e="threadForm",thread:t={},locations:r={id:null},countries:n=[],events:a=[],groups:i=[],mentions:o="",threadType:s="",features:c={},imageSuggestions:u=[],fetchedFromUrl:l={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d={formId:e,thread:f(t,s,r,c),locations:r,countries:n,events:a,groups:i,mentions:o,features:c,imageSuggestions:u,fetchedFromUrl:l};return Object.assign({},d,{token:Object(g.c)()})},v={getField:o.c,getGalleryImageUrl:e=>function(t){let{pixVariant:r="thread_medium",picsyVariant:n=[["re",300,300],["ft","jpg"],["qt",60]]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e.thread.galleryImages[t];return a?"remoteUrl"in a?a.remoteUrl:Object(c.d)(a)?Object(c.e)(a,a.slots[0].name,r):new u.a(a).apply(n).toString():""},isShowGalleryImageSizeWarning:e=>t=>{const r=e.thread.galleryImages[t];return!!r&&("remoteUrl"in r?r.isPoorQuality:Object(c.d)(r)?!!Object(c.f)(r,r.slots[0].name,{}).isPoorQuality:r.isPoorQuality)},isAnyGalleryImageSizeWarning:(e,t)=>e.thread.galleryImages.some(((e,r)=>t.isShowGalleryImageSizeWarning(r))),canAutoAssignGroups:e=>{if(0===e.groups.length)return!0;return!e.thread.groups.some((e=>!e.assignedBySystem))}},y={clearFormSuggestionsFromLink(e){let{commit:t}=e;t("UPDATE_FIELD",{path:"fetchedFromUrl",value:{}})},getFormSuggestionsFromLink(e,t){let{dispatch:r,commit:n,state:a}=e,{url:i}=t;if(!i)return;const o={},s=e=>{var t;return!(null===(t=o[e])||void 0===t||!t.isLoading())},{thread:c}=a,u={images:0===c.galleryImages.length,price:!c.price,shippingPrice:!0,title:!0};Object.keys(u).forEach((e=>u[e]&&(e=>{const t=d.b.create(m.a[e]);o[e]=t,t.startLoading()})(e)));const l=Object(p.d)(Object(h.c)(Object.assign({url:i},u)),11e3);return l.request.then((e=>{let{submissionSuggestion:t}=e;const{images:i,price:o,title:c}=t.external,{shippingCosts:u}=t.internal;var l,d;s("images")&&null!=i&&i.length&&r("addGalleryImages",i.slice(0,8).map((e=>({remoteUrl:e.url})))),l="price",d=o.value,s(l)&&d&&n("UPDATE_FIELD",{path:"thread.".concat(l),value:d}),n("UPDATE_FIELD",{path:"fetchedFromUrl",value:Object.assign({},a.fetchedFromUrl,{title:c,price:o.value,shippingCosts:null==u?void 0:u.map((e=>e.price))})})})).finally((()=>{Object.keys(o).forEach((e=>{o[e].stopLoading()}))})),l},addGalleryImages(e){let{state:t,commit:r,dispatch:n}=e;const o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((e=>Object.assign({},e,{id:a()("gallery_")})));r("UPDATE_FIELD",{path:"thread.galleryImages",value:t.thread.galleryImages.concat(o)}),o.forEach((e=>{e.remoteUrl&&Object(l.c)(e.remoteUrl).then((t=>{let{width:r,height:a}=t;n("updateGalleryImageById",{id:e.id,data:Object.assign({},e,{isPoorQuality:Object(i.x)(r,a)})})})).catch((()=>{}))}))},removeGalleryImage(e,t){let{state:r,commit:n}=e;const a=[...r.thread.galleryImages];a.splice(t,1),n("UPDATE_FIELD",{path:"thread.galleryImages",value:a})},removeAllGalleryImages(e){let{commit:t}=e;t("UPDATE_FIELD",{path:"thread.galleryImages",value:[]})},changeGalleryImagesOrder(e,t){let{state:r,commit:n}=e,{from:a,to:i}=t;const o=[...r.thread.galleryImages],s=o.splice(a,1)[0];o.splice(i,0,s),n("UPDATE_FIELD",{path:"thread.galleryImages",value:o})},updateGalleryImageById(e,t){let{state:r,commit:n}=e,{id:a,data:i}=t;const o=[...r.thread.galleryImages],s=o.findIndex((e=>e.id===a));s>=0&&(o[s]=i,n("UPDATE_FIELD",{path:"thread.galleryImages",value:o}))},getMerchantFromThreadLink(e,t){let{commit:r}=e;const n=Object(h.d)(t);return n.request.then((e=>{let{merchant:t}=e;return r("UPDATE_FIELD",{path:"thread.merchant",value:t||{}}),t})),n},getProductSpecificationFromLink(e,t){let{state:r,commit:n}=e;const{thread:a,features:i}=r;function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n("UPDATE_FIELD",{path:"fetchedFromUrl",value:Object.assign({},r.fetchedFromUrl,{specification:e})})}if(!(i.specification&&!a.title&&!a.description&&!a.threadId))return;o("");const s=d.b.create(m.a.specification);s.startLoading();const c=Object(h.e)(t);return c.request.then((e=>{let{submissionSuggestion:t}=e;const{specification:r}=t.external;o(r)})).finally((()=>{s.stopLoading()})),c}},O={UPDATE_FIELD:o.b,UPDATE_TOKEN(e){e.token=Object(g.c)()}};t.a=e=>({namespaced:!0,state:b(e),getters:v,actions:y,mutations:O})},837:function(e,t,r){"use strict";r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return h}));var n=r(6),a=r(1),i=r(17);const o=!0;function s(e){return Object(n.c)({queries:[a.xb],merge:!0})({threadTypeId:i.m[e]}).then((e=>e.request)).then((e=>e.groups))}function c(){return Object(n.c)({queries:[a.yb],merge:!0})({}).then((e=>e.request)).then((e=>e.locations))}function u(){return Object(n.c)({queries:[a.vb],merge:!0})({}).then((e=>e.request)).then((e=>e.events))}function l(){return Object(n.c)({queries:[a.ub],merge:!0})({}).then((e=>e.request)).then((e=>e.countries))}function d(e){return Object(n.c)({queries:[a.wb],merge:!0})({threadTypeId:i.m[e]}).then((e=>e.request)).then((e=>e.features))}function m(){return Object(n.c)({queries:[a.zb],merge:!0})({}).then((e=>e.request)).then((e=>e.settings.thread))}function h(e){if(!o)throw Error("FE query to fetch a Thread for edit form is not implemented yet: fetchFormThread(".concat(e,")"));return Promise.reject()}},851:function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return l}));var n=r(837);const a=(e,t)=>{let{beforeEnter:r}=e;return r((e=>e?e.groups:Object(n.f)(t)),[])},i=e=>{let{beforeEnter:t}=e;return t((e=>e?e.locations:Object(n.g)()),[])},o=e=>{let{beforeEnter:t}=e;return t((e=>e?e.events:Object(n.b)()),[])},s=e=>{let{beforeEnter:t}=e;return t((e=>e?e.countries:Object(n.a)()),[])},c=(e,t)=>{let{beforeEnter:r}=e;return r((e=>e?e.features:Object(n.c)(t)),[])},u=e=>{let{beforeEnter:t}=e;return t((e=>e?e.settings.thread:Object(n.d)()),[])},l=e=>{let{beforeEnter:t,param:r}=e;return t(((e,t)=>t?t.thread:e?Object(n.e)(e):null),[r("threadId")])}},86:function(e,t,r){var n=r(88),a=r(308),i=r(307),o=Math.max,s=Math.min;e.exports=function(e,t,r){var c,u,l,d,m,h,p=0,g=!1,f=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var r=c,n=u;return c=u=void 0,p=t,d=e.apply(n,r)}function y(e){var r=e-h;return void 0===h||r>=t||r<0||f&&e-p>=l}function O(){var e=a();if(y(e))return j(e);m=setTimeout(O,function(e){var r=t-(e-h);return f?s(r,l-(e-p)):r}(e))}function j(e){return m=void 0,b&&c?v(e):(c=u=void 0,d)}function I(){var e=a(),r=y(e);if(c=arguments,u=this,h=e,r){if(void 0===m)return function(e){return p=e,m=setTimeout(O,t),g?v(e):d}(h);if(f)return clearTimeout(m),m=setTimeout(O,t),v(h)}return void 0===m&&(m=setTimeout(O,t)),d}return t=i(t)||0,n(r)&&(g=!!r.leading,l=(f="maxWait"in r)?o(i(r.maxWait)||0,t):l,b="trailing"in r?!!r.trailing:b),I.cancel=function(){void 0!==m&&clearTimeout(m),p=0,c=h=u=m=void 0},I.flush=function(){return void 0===m?d:j(a())},I}}}]);