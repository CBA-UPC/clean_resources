!function(){var apiType_IReco=1;window.SPMobile.PCEng.InFeedInline||(window.SPMobile.PCEng.InFeedInline=function(pid,asid,enc,infeedNum){this.asn=window.SPMobile.NewAsn(),this.pid=pid,this.asid=asid,this.enc=enc,this.infeedNum=infeedNum},window.SPMobile.PCEng.InFeedInline.prototype={pid:0,asid:0,asn:0,adv:null,infeedNum:"1",jsonstrToObj:function(owner,jsonstr){var ad=null,iswebView=!1,wvxid=null;try{null!=(ad=window.SPMobile.JsonToObjEx(jsonstr))&&(iswebView="webview"===ad.vtype,wvxid=ad.wvxid)}catch(e){}if(null!=ad&&null!=ad.ads)for(var advs=new Array(ad.ads.length),i=0;i<ad.ads.length;i++)advs[i]=new window.SPMobile.PCEng.InFeedInline.Advertisement(owner,ad.ads[i],i,iswebView,wvxid);return advs},getSpot:existSpot:writeTag:Init:function(){var that=this,url="pid="+this.pid+"&asid="+this.asid+"&asn="+this.asn+"&infeedNum="+this.infeedNum;this.enc&&(url+="&enc="+this.enc);url=window.SPMobile.PCEng.getUrl(window.SPMobile.PCEng.getSpotServer(this.asid,this.pid),"ajax/ad_spot.ashx?"+url+"&ver=0.2.1"+(null==window.devicePixelRatio||1==window.devicePixelRatio?"":"&dpr="+window.devicePixelRatio));window.SPMobile.getAjaxResponse(url,function(jsonstr){var advs=that.jsonstrToObj(that,jsonstr);that.adv=[];var apiadvs=[];if(advs){for(var i=0;i<advs.length;i++){var ad=advs[i];(ad.data.api_params&&0<ad.data.api_params.type?apiadvs:that.adv).push(ad)}that.preRender(apiadvs)}else window.SPMobile.writeConsoleLog(window.SPMobile.deliverStatus.deliverAdEmpty)})},preRender:function(apiadvs){var adv,apiparams,url,that;apiadvs&&0!=apiadvs.length?(adv=apiadvs.shift(),url=(apiparams=adv.data.api_params).call_url,that=this,window.SPMobile.getAjaxResponse(url,function(result){var title="",description="",clickurl="",imageurl="",result=JSON.parse(result);apiparams.type===apiType_IReco&&(title=result.title,description=result.description,imageurl=decodeURIComponent(result.imageUrl),clickurl=result.clickUrl),adv.setApiData(title,description,imageurl,clickurl),that.adv.push(adv),that.preRender(apiadvs)})):this.render()},render:function(){for(var tags="",i=0;i<this.adv.length;i++)tags+=this.adv[i].getHtmlTag();this.getSpot().innerHTML='<div class="imobile_infeed'+this.adv[0].getInfeedClassSuffix()+'_spot" style="margin:0px;padding:0px;-webkit-border-radius:0px;width:'+this.adv[0].data.pcimg.size.p.sw+'px;">'+tags+"</div>"}},window.SPMobile.PCEng.InFeedInline.Advertisement=function(owner,data,index,iswebview,wvxid,apidata){this.owner=owner,this.data=data,this.index=index,this.iswebview=iswebview,this.wvxid=wvxid,this.apidata=apidata||{imageurl:"",clickurl:""}},window.SPMobile.PCEng.InFeedInline.Advertisement.prototype={owner:null,data:null,index:0,MAX_TITLE_BYTE:24,MAX_DESCRIPITON_BYTE:70,setApiData:function(title,description,imageurl,clickurl){this.data.pcimg.size.p.title=title,this.data.pcimg.size.p.description=description,this.apidata.imageurl=imageurl,this.apidata.clickurl=clickurl},makeInFeedInnerTag:function(tag){return'<div id="imobspot_'+this.owner.asn+"_"+this.index+'" class="imobile_infeed'+this.getInfeedClassSuffix()+'" style="display:inline-block;margin:0px;padding:0px;list-style-type:none;width:'+this.data.pcimg.size.p.sw+"px;height:"+this.data.pcimg.size.p.sh+'px;">'+tag+"</div>"},makeInFeedTag:function(orient,linkurl,imgurl,title,description){return'<div id="imobspot_'+this.owner.asn+"_"+this.index+"_"+orient+'" style="margin:10px 0px 10px;padding:0px;"><a href="'+linkurl+'" target="_blank" style="border:0px none;padding:0px;margin:0px;height:auto;-webkit-border-radius: 0px!important"><div class="imobile_infeed_img_container" style="float:left"><img class="imobile_infeed_img_'+this.data.pcimg.size.p.eid+'" src="'+imgurl+'" style="border-style:none;width:'+this.data.pcimg.size.p.w+"px; height: "+this.data.pcimg.size.p.h+'px; " alt="AD" /></div><div class="imobile_infeed_body" style="float:left;margin: 0px 0px 0px 10px;width:'+(this.data.pcimg.size.p.sw-this.data.pcimg.size.p.w-30)+"px;height:"+this.data.pcimg.size.p.sh+'px;"><span class="imobile_infeed_title" style="display:block; overflow:hidden; white-space: nowrap; font-size: 14px; font-weight:bold; text-align:left;">'+title+'</span><span class="imobile_infeed_description" style="margin-top:5px; display:block; overflow:hidden; white-space: normal; font-size: 12px;" title="'+description+'">'+description+"</span></div></a></div>"},makeInFeedWideTag:function(orient,linkurl,imgurl,title,description){return'<div id="imobspot_'+this.owner.asn+"_"+this.index+"_"+orient+'" style="margin:10px 0px 10px;padding:0px;"><a href="'+linkurl+'" target="_blank" style="border:0px none;padding:0px;margin:0px;height:auto;-webkit-border-radius: 0px!important"><div class="imobile_infeed_wide_img_container" style="float:left;margin:0px 0px 0px 10px;padding: 0px;"><img class="imobile_infeed_wide_img_'+this.data.pcimg.size.p.eid+'" src="'+imgurl+'" style="border-style:none;width:'+this.data.pcimg.size.p.w+"px; height: "+this.data.pcimg.size.p.h+'px; " alt="AD" /></div><div class="imobile_infeed_wide_body" style="float:left;margin: 0px 0px 0px 20px;width:'+(this.data.pcimg.size.p.sw-this.data.pcimg.size.p.w-50)+"px;height:"+this.data.pcimg.size.p.h+'px;"><span class="imobile_infeed_wide_title" style="display:block; overflow:hidden; white-space: nowrap; font-size: 20px; font-weight:bold; text-align:left;">'+title+'</span><span class="imobile_infeed_wide_description" style="margin-top:10px; display:block; overflow:hidden; white-space: normal; font-size: 18px; line-height:1.2em;" title="'+description+'">'+description+"</span></div></a></div>"},getHtmlTag:function(){var imgurl,tag="",linkparam="",linkurl="",imgtag="",title=this.truncateWithEllipsis(this.data.pcimg.size.p.title,this.MAX_TITLE_BYTE),description=this.truncateWithEllipsis(this.data.pcimg.size.p.description,this.MAX_DESCRIPITON_BYTE),is3pas=!!(this.apidata&&this.apidata.clickurl&&this.apidata.imageurl),linkparam="pid="+this.owner.pid+"&asid="+this.data.asid+"&advid="+this.data.pcimg.advid+"&vh="+this.data.vh;switch(is3pas&&(linkparam+="&rtn="+this.apidata.clickurl),imgurl=is3pas?this.apidata.imageurl:window.SPMobile.PCEng.getUrl(window.SPMobile.PCEng.getImageServer(),"ad_creative.ashx?advid="+this.data.pcimg.advid+"&eid="+this.data.pcimg.size.p.eid,!0),linkurl=this.iswebview?window.SPMobile.PCEng.getUrl(window.SPMobile.PCEng.getClickServer(this.data.asid,this.owner.pid),"ad_link.ashx?"+linkparam+"&wv=1"+(this.wvxid?"&wvxid="+this.wvxid:"")):window.SPMobile.PCEng.getUrl(window.SPMobile.PCEng.getClickServer(this.data.asid,this.owner.pid),"ad_link.ashx?"+linkparam),this.data.viewfmt){case 6:imgtag=this.makeInFeedTag("p",linkurl,imgurl,title,description);break;case 8:imgtag=this.makeInFeedWideTag("p",linkurl,imgurl,title,description)}return tag+=this.makeInFeedInnerTag(imgtag)},getInfeedClassSuffix:truncateWithEllipsis:function(str,maxByte){var byte=0,newStr=str;for(i=0;i<str.length;i++){var c=str.charCodeAt(i);if(maxByte<(byte+=this.isOneByteChar(c)?1:2)){newStr=this.appendThreePointReader(str.substr(0,i));break}}return newStr},isOneByteChar:function(character){return 0<=character&&character<129||63728==character||65377<=character&&character<65440||63729<=character&&character<63732},appendThreePointReader:);var pid=null;try{pid=imobile_pid,imobile_pid=null}catch(ex){}var asid=null;try{asid=imobile_asid,imobile_asid=null}catch(ex){}var enc=null;try{enc=imobile_encoding,imobile_encoding=null}catch(ex){}var infeedNum=null;try{infeedNum=imobile_infeed.num,imobile_infeed.num=null}catch(ex){}if(pid&&asid){var spot=new window.SPMobile.PCEng.InFeedInline(pid,asid,enc,infeedNum);if(spot.writeTag(),spot.existSpot()?spot.Init():window.SPMobile.PCEng.Compat.addDOMContentLoadEventLister(asid),window.SPDemographic)try{SPDemographic.createGateway().executeVisit(asid)}catch(ex){}}}();