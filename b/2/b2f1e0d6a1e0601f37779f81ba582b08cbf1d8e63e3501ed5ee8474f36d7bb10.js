(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{519:function(e,t,s){"use strict";s.d(t,"b",(function(){return i}));const a={model:{event:"update"},props:{name:{type:String,default:""},value:{type:[String,Number,Object],default:null},placeholder:{type:String,default:""},options:{type:Array,default:()=>[]},mode:{type:String,default:""},valueKey:{type:String,default:"value"},textKey:{type:String,default:"text"},retainValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{selectedValue:{get(){return this.value},set(e){e!==this.value&&this.$emit("update",e)}},selectedOption(){return this.options.find((e=>e[this.valueKey]===this.value))}}},i={mixins:[a],props:{value:{type:Array,default:()=>[]},separator:{type:String,default:","},open:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{expanded:this.open,filterValue:""}},computed:{filteredOptions(){return this.options.filter((e=>e[this.textKey].toLowerCase().includes(this.filterValue.toLowerCase())))}},methods:{toggleLayer(){this.disabled||(this.expanded=!this.expanded)},expandLayer(){this.expanded=!1},setFilterValue(e){this.filterValue=e}}};t.a=a},909:function(e,t,s){"use strict";s.r(t);var a=s(510),i=s(555),l=s(0),r=s.n(l),o=s(5);const n=!/Trident|Edge/.test(navigator.userAgent)&&(!/AppleWebKit/.test(navigator.userAgent)||/Chrome/.test(navigator.userAgent));function d(e,t){let{value:s}=t;n&&o.default.nextTick((()=>{e.style.height="auto";const t=Math.min(s,e.scrollHeight+e.offsetHeight-e.clientHeight)+"px";requestAnimationFrame((()=>{e.style.height=t,t!==e.dataset.lastHeight&&(e.dataset.lastHeight=t,r()(e).trigger("domChanged"))}))}))}o.default.directive("auto-height",{bind:d,update:d});var u={components:{BaseButton:s(508).a,FormList:a.l,FormRow:a.o,FormLabel:a.k,FormContent:a.c,FormTextarea:a.s,CustomSelect:i.a,FormMessageList:a.m},props:{loading:{type:Boolean,default:!1},messageTypes:{type:Array,required:!0},errorMessages:{type:Array,default:()=>[]}},data:()=>({selectedMessageTypeID:"",message:""}),computed:{submitLabel(){return this.message?"Usuń i wyślij pw":"Usuń bez wysyłania pw"},messageType(){return this.messageTypes.find((e=>e.id===this.selectedMessageTypeID))}},watch:{selectedMessageTypeID:"applyMacro"},methods:{submit(){var e,t;this.$emit("submit",{reason:(null===(e=this.messageType)||void 0===e?void 0:e.type_name)||null,message:this.message||null,messageTypeId:(null===(t=this.messageType)||void 0===t?void 0:t.id)||null})},cancel(){this.$emit("close"),r()(this.$el).trigger("layer-destroy")},applyMacro(){this.message=this.messageType?this.messageType.message:""}}},p=s(45),m=Object(p.a)(u,(function(){var e=this,t=e._self._c;return t("FormList",{staticClass:"pmDeleteForm"},[e.messageTypes?t("FormRow",[t("FormLabel",[e._v(e._s("Powód"))]),t("FormContent",[t("CustomSelect",{staticClass:"width--all-12",attrs:{options:e.messageTypes,placeholder:"Wybierz powód...","text-key":"type_name","value-key":"id",name:"message_type_id"},model:{value:e.selectedMessageTypeID,callback:function(t){e.selectedMessageTypeID=t},expression:"selectedMessageTypeID"}}),t("input",{attrs:{type:"hidden",name:"reason"},domProps:{value:e.messageType&&e.messageType.type_name}})],1)],1):e._e(),t("FormRow",[t("FormLabel",[e._v(e._s("Wyslij pw autorowi"))]),t("FormContent",[t("FormTextarea",{directives:[{name:"auto-height",rawName:"v-auto-height",value:400,expression:"400"}],staticClass:"input--noResize width--all-12",attrs:{rows:"10",name:"message"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),t("div",{attrs:{"data-message-slot":"delete_thread"}}),e.errorMessages.length?t("FormMessageList",{attrs:{messages:e.errorMessages}}):e._e()],1)],1),t("FormRow",[t("FormContent",{staticClass:"hAlign--all-r"},[t("BaseButton",{staticClass:"space--mr-3",attrs:{variant:"tertiary",mode:"default"},on:{click:e.cancel}},[e._v(" "+e._s("anuluj")+" ")]),t("BaseButton",{attrs:{type:"submit",variant:"primary",mode:"brand",loading:e.loading},on:{click:e.submit}},[e._v(" "+e._s(e.submitLabel)+" ")])],1)],1)],1)}),[],!1,null,null,null);t.default=m.exports}}]);:c.a,CopyToClipboard:u.a,BaseSpinner:p.a},mixins:[o.a,d.a],data:()=>({isOpen:!1,randomReferralCodes:[],activeOffer:null,usedReferralOffers:[],currentOfferIndex:0,isRefreshButtonDisabled:!0,isFakeLoading:!1,merchant:null,threadId:null,thread:{description:"",discountType:"",percentage:"",price:"",threadId:"",title:"",referralOfferType:""},isDataFetching:!0}),computed:{REFERRAL_OFFERS_TYPES:()=>({CODE_ONLY:"CodeOnly",LINK_ONLY:"LinkOnly",CODE_AND_LINK:"CodeAndLink"}),DISCOUNT_TYPES:()=>({PRICE:"Price",PERCENTAGE:"Percentage",FREE_SHIPPING:"FreeShipping"}),modalWidth(){return this.$breakpoint.smAndDown?"450":"700"},isFreeShipping(){var e;return(null===(e=this.thread)||void 0===e?void 0:e.discountType)===this.DISCOUNT_TYPES.FREE_SHIPPING},discountText(){return this.thread.price&&"0.00"!==this.thread.price?Object(n.a)(+this.thread.price,{includeCurrency:!0}):this.thread.percentage&&"0.00"!==this.thread.percentage?"".concat(Object(n.a)(+this.thread.percentage),"%"):""},showCode(){return this.thread.referralOfferType===this.REFERRAL_OFFERS_TYPES.CODE_ONLY||this.thread.referralOfferType===this.REFERRAL_OFFERS_TYPES.CODE_AND_LINK},showLink(){return this.thread.referralOfferType===this.REFERRAL_OFFERS_TYPES.LINK_ONLY||this.thread.referralOfferType===this.REFERRAL_OFFERS_TYPES.CODE_AND_LINK},refreshCount(){return this.randomReferralCodes.length-this.currentOfferIndex-1},redeemText(){return this.thread.referralOfferType===this.REFERRAL_OFFERS_TYPES.LINK_ONLY?"Utilizar enlace de referido":"Canjear código de referido"},linkOrCodeDoesntWorkText(){switch(this.thread.referralOfferType){case this.REFERRAL_OFFERS_TYPES.CODE_ONLY:return"¿El código no funciona?";case this.REFERRAL_OFFERS_TYPES.LINK_ONLY:return"¿No funciona el enlace?";case this.REFERRAL_OFFERS_TYPES.CODE_AND_LINK:return"¿El enlace o código no funciona?";default:return""}},isRefreshDisabled(){return this.isRefreshButtonDisabled||this.isFakeLoading||0===this.refreshCount},avatarSize(){return this.$breakpoint.smAndDown?"l":"xl"},freeShippingIconSize(){return this.$breakpoint.smAndDown?"24px":"35px"},addedByUsersCount(){return this.thread.merchant.referralCampaigns.find((e=>e.id===this.thread.threadId)).addedByUsersCount}},created(){if(document.addEventListener("openReferralCampaignModal",this.openModal),"referral.offer.permalink"===this.$route.name){const e=this.$route.params.threadId;this.openModal({detail:{threadId:e}})}},methods:{async openModal(e){this.threadId=e.detail.threadId,this.isOpen=!0;const[t,a]=await Promise.all([(s=this.threadId,v({threadId:s}).then((e=>e.request)).then((e=>{let{randomReferralCodes:t}=e;return t.items}))),g(this.threadId)]);var s;this.randomReferralCodes=t,this.thread=a,this.randomReferralCodes.errors||(this.isRefreshButtonDisabled=!1,this.activeOffer=this.randomReferralCodes[0],this.isDataFetching=!1)},async refreshOffer(){if(this.isFakeLoading=!0,await Object(i.d)(500),this.usedReferralOffers.push(this.randomReferralCodes[this.currentOfferIndex].referralCodeId),this.currentOfferIndex++,this.activeOffer=this.randomReferralCodes[this.currentOfferIndex],this.currentOfferIndex===this.randomReferralCodes.length-1)return this.isRefreshButtonDisabled=!0,void(this.isFakeLoading=!1);this.isFakeLoading=!1},copyToClipboard(e){e(this.$refs.input)},async makeReferralOffersInvalid(){var e,t;r()(this.usedReferralOffers)?Object.assign(this.$data,{isOpen:!1,randomReferralCodes:[],activeOffer:null,usedReferralOffers:[],currentOfferIndex:0,isRefreshButtonDisabled:!0,isFakeLoading:!1,merchant:null,threadId:null,thread:{description:"",discountType:"",percentage:"",price:"",threadId:"",title:"",referralOfferType:""},isDataFetching:!0}):(await(e=this.usedReferralOffers,t=this.threadId,Object(h.a)({req:m.rc,params:{input:{threadId:t,referralCodeIds:e}}}).then((e=>e.markReferralCodesAsBroken))),Object.assign(this.$data,{isOpen:!1,randomReferralCodes:[],activeOffer:null,usedReferralOffers:[],currentOfferIndex:0,isRefreshButtonDisabled:!0,isFakeLoading:!1,merchant:null,threadId:null,thread:{description:"",discountType:"",percentage:"",price:"",threadId:"",title:"",referralOfferType:""},isDataFetching:!0}))}}},y=(a(977),a(44)),_=Object(y.a)(b,(function(){var e=this,t=e._self._c;return e.isOpen?t("BaseModal",{attrs:{active:e.isOpen,width:e.modalWidth,layout:"absolute"},on:{"update:active":function(t){e.isOpen=t},"before-close":e.makeReferralOffersInvalid},scopedSlots:e._u([{key:"default",fn:function({}){return[e.isDataFetching?t("div",{staticClass:"offer-modal-wrapper"},[t("ModalHead"),t("ModalBody",{staticClass:"offer-modal-body space--h-0 space--v-0"},[t("div",{staticClass:"flex flex--dir-col"},[t("div",{staticClass:"space--fromW3-b-4 space--toW3-b-3 flex boxAlign-ai--all-c boxAlign-jc--all-c"},[t("div",{staticClass:"voucherBox-listDiscountCell--responsive voucherBox-listDiscountCell--modal bg--color-brandPrimaryPale text--color-charcoal voucherBox-listDiscountCell flex flex--dir-col flex--shrink-0 boxAlign-jc--all-c text--lh-1 bRad--a overflow--hidden box boxAlign-ai--all-c"},[t("div",{staticClass:"offer-header-value flex boxAlign-center text--b size--all-xxl"}),t("div",{staticClass:"offer-header-type size--all-xs text--lh-1-2 text--upper text--b hAlign--all-c space--h-1 overflow--wrap-break text--hyphens-a"})]),t("div",{staticClass:"flex--shrink-0 space--ml-3 space--fromW3-ml-4"},[t("Avatar",{attrs:{merchant:{},size:"xl"}})],1)]),t("div",{staticClass:"offer-footer-dummy bg--color-greyPanel flex aGrid-item"},[t("BaseSpinner",{staticClass:"spinner--centered spinner--size-big"})],1)])])],1):[t("ModalHead"),t("ModalBody",{directives:[{name:"track",rawName:"v-track:referralCampaignModal.view",value:{id:e.threadId},expression:"{ id: threadId }",arg:"referralCampaignModal",modifiers:{view:!0}}],staticClass:"offer-modal-body space--h-0 space--v-0"},[t("div",{staticClass:"flex flex--dir-col"},[t("div",{staticClass:"space--fromW3-b-4 space--toW3-b-3 flex boxAlign-ai--all-c boxAlign-jc--all-c"},[t("div",{staticClass:"voucherBox-listDiscountCell--responsive voucherBox-listDiscountCell--modal bg--color-brandPrimaryPale text--color-charcoal voucherBox-listDiscountCell flex flex--dir-col flex--shrink-0 boxAlign-jc--all-c text--lh-1 bRad--a overflow--hidden box boxAlign-ai--all-c"},[e.isFreeShipping?[t("div",{staticClass:"offer-header-value flex boxAlign-center text--b size--all-xxl"},[t("BaseIcon",{attrs:{name:"truck",width:e.freeShippingIconSize,height:e.freeShippingIconSize}})],1),t("div",{staticClass:"voucherBox-voucherType offer-header-type size--all-xs text--lh-1-2 text--upper text--b hAlign--all-c space--h-1 overflow--wrap-break text--hyphens-a"},[e._v(" "+e._s("Envío gratis")+" ")])]:e.discountText?[t("div",{staticClass:"flex boxAlign-center text--b cept-voucher-widget-item-discount-small size--all-m size--fromW3-xl"},[e._v(" "+e._s(e.discountText)+" ")]),t("div",{staticClass:"voucherBox-voucherType cept-voucher-widget-item-discount-text text--lh-1-2 text--upper text--b hAlign--all-c space--h-1 overflow--wrap-break text--hyphens-a"},[e._v(" "+e._s("Descuento")+" ")])]:[t("div",{staticClass:"flex boxAlign-center text--b cept-voucher-widget-item-discount-small size--all-m size--fromW3-xxl"},[t("BaseIcon",{attrs:{name:"star-empty",width:"32px",height:"32px"}})],1)]],2),t("div",{staticClass:"flex--shrink-0 space--ml-3 space--fromW3-ml-4"},[t("Avatar",{attrs:{merchant:e.thread.merchant,size:e.avatarSize}})],1)]),t("div",{staticClass:"bg--color-greyPanel space--b-4 space--t-5 space--l-3 space--r-3"},[t("div",{staticClass:"offer-body-title thread-title hAlign--all-c size--all-xl text--b"},[e._v(e._s(e.thread.title))]),t("div",{staticClass:"space--t-4 space--mh-a width--max-ctrl"},[e.showCode?t("div",{staticClass:"voucher flex width--all-12"},[t("div",{staticClass:"width--all-12 flex boxAlign-ai--all-c overflow--wrap-off border bRad--circle border--color-grey border--dash bRad--a bg--color-white"},[t("CopyToClipboard",{directives:[{name:"track",rawName:"v-track:copyRererralCode.click",value:{code:e.activeOffer.code},expression:"{ code: activeOffer.code }",arg:"copyRererralCode",modifiers:{click:!0}}],scopedSlots:e._u([{key:"default",fn:function({wasCopied:a,copy:s}){return[t("div",{directives:[{name:"popover",rawName:"v-popover.n",modifiers:{n:!0}}],staticClass:"flex flex--grow-1 boxAlign-ai--all-c space--b-1 space--t-1",on:{click:function(t){return e.copyToClipboard(s)}}},[t("span",{staticClass:"width--all-12"},[t("input",{ref:"input",staticClass:"width--all-12 size--all-s clickable hAlign--all-c text--b overflow--ellipsis",attrs:{readonly:""},domProps:{value:e.activeOffer.code}})]),t("BaseButton",{staticClass:"button button--shape-circle button--size-s button--code hide--copy-command-off flex--shrink-0 space--mr-1 button--mode-brand",attrs:{variant:"primary"}},[t("BaseIcon",{staticClass:"iGrid-item",attrs:{name:"duplicate"}})],1),a?t("BasePopover",{scopedSlots:e._u([{key:"default",fn:function({}){return[t("div",{staticClass:"hAlign--all-c space--v-2 space--h-2 size--all-m"},[e._v(" "+e._s("¡Copiado al portapapeles!")+" ")])]}}],null,!0)}):e._e()],1)]}}],null,!1,710510688)})],1)]):e._e(),e.showLink?t("a",{staticClass:"flex boxAlign-ai--all-c button button--type-primary button--mode-brand button--shape-circle width--all-12 space--mt-2",class:{"bg--color-grey":e.isFakeLoading,"seal--pointer-off":e.isFakeLoading},attrs:{href:!e.isFakeLoading&&e.activeOffer&&e.activeOffer.link,rel:"nofollow",target:"_blank"}},[e._v(" "+e._s(e.redeemText)+" "),t("BaseIcon",{staticClass:"space--ml-2",attrs:{name:"external",width:"20px",height:"20px"}})],1):e._e()]),t("div",{staticClass:"text--color-greyShade size--all-s hAlign--all-c space--mt-2"},[e._v(" "+e._s(e.$t("Añadido por 1 usuario|Añadido por :userCount usuarios",{count:e.addedByUsersCount,replaces:{userCount:e.addedByUsersCount}}))+" ")]),e.thread.description?t("div",{staticClass:"space--t-4 offer-body-description hAlign--all-c"},[t("div",{staticClass:"userHtml userHtml-content"},[t("div",{staticClass:"overflow--wrap-break width--all-12 size--all-s hAlign--all-c"},[t("span",{staticClass:"text--b"},[e._v(e._s("Condiciones")+": ")]),e._v(" "+e._s(e.thread.description)+" ")])])]):e._e()]),t("div",{staticClass:"offer-footer bg--color-greyPanel space--l-5 space--fromW3-b-5 space--toW3-pb-3 space--r-5 flex flex--dir-col boxAlign-ai--all-c"},[t("div",{staticClass:"offer-footer-text size--all-s border--t border--color-greyTint space--t-4 space--mb-2 width--all-12 hAlign--all-c"},[e._v(" "+e._s(e.linkOrCodeDoesntWorkText)+" ")]),t("BaseButton",{directives:[{name:"track",rawName:"v-track:refreshButton.click",arg:"refreshButton",modifiers:{click:!0}}],class:["offer-footer-button bg--color-white","flex boxAlign-jc--all-c boxAlign-ai--all-c","space--mb-2 space--h-3 space--v-2","text--b size--all-s","border border--color-grey bRad--a bRad--circle"],attrs:{disabled:e.isRefreshDisabled},on:{click:e.refreshOffer}},[e.isFakeLoading?t("BaseSpinner"):[e._v(" "+e._s("Actualizar")+" "),t("BaseIcon",{staticClass:"space--ml-2",attrs:{name:"refresh",width:"16px",height:"16px"}})]],2),0===e.refreshCount?t("div",{staticClass:"offer-footer-text text--color-redTint size--all-s"},[e._v(" "+e._s("No hay más actualizaciones disponibles")+" ")]):(e.currentOfferIndex>=5||e.randomReferralCodes.length<=5)&&e.randomReferralCodes.length?t("div",{staticClass:"offer-footer-text size--all-s"},[e._v(" "+e._s(e.$t("Puedes actualizar :refreshCount veces",{replaces:{refreshCount:e.refreshCount}}))+" ")]):e._e()],1)])])]]}}],null,!1,1460355292)}):e._e()}),[],!1,null,"58fbb6f2",null);t.a=_.exports},1062:function(e,t,a){},109:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r=(s=a(5))&&"object"==typeof s&&"default"in s?s.default:s;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o="undefined"!=typeof window;function l(e,t){return t.reduce((function(t,a){return e.hasOwnProperty(a)&&(t[a]=e[a]),t}),{})}var c={},u={},d={},p=r.extend({data:function(){return{transports:c,targets:u,sources:d,trackInstances:o}},methods:{open:function(e){if(o){var t=e.to,a=e.from,s=e.passengers,i=e.order,l=void 0===i?1/0:i;if(t&&a&&s){var c,u={to:t,from:a,passengers:(c=s,Array.isArray(c)||"object"===n(c)?Object.freeze(c):c),order:l};-1===Object.keys(this.transports).indexOf(t)&&r.set(this.transports,t,[]);var d,p=this.$_getTransportIndex(u),h=this.transports[t].slice(0);-1===p?h.push(u):h[p]=u,this.transports[t]=(d=function(e,t){return e.order-t.order},h.map((function(e,t){return[t,e]})).sort((function(e,t){return d(e[1],t[1])||e[0]-t[0]})).map((function(e){return e[1]})))}}},close:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.to,s=e.from;if(a&&(s||!1!==t)&&this.transports[a])if(t)this.transports[a]=[];else{var r=this.$_getTransportIndex(e);if(r>=0){var n=this.transports[a].slice(0);n.splice(r,1),this.transports[a]=n}}},registerTarget:function(e,t,a){o&&(this.trackInstances&&!a&&this.targets[e]&&console.warn("[portal-vue]: Target ".concat(e," already exists")),this.$set(this.targets,e,Object.freeze([t])))},unregisterTarget:function(e){this.$delete(this.targets,e)},registerSource:function(e,t,a){o&&(this.trackInstances&&!a&&this.sources[e]&&console.warn("[portal-vue]: source ".concat(e," already exists")),this.$set(this.sources,e,Object.freeze([t])))},unregisterSource:function(e){this.$delete(this.sources,e)},hasTarget:function(e){return!(!this.targets[e]||!this.targets[e][0])},hasSource:function(e){return!(!this.sources[e]||!this.sources[e][0])},hasContentFor:function(e){return!!this.transports[e]&&!!this.transports[e].length},$_getTransportIndex:function(e){var t=e.to,a=e.from;for(var s in this.transports[t])if(this.transports[t][s].from===a)return+s;return-1}}}),h=new p(c),m=1,f=r.extend({name:"portal",props:{disabled:{type:Boolean},name:{type:String,default:function(){return String(m++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}}},created:function(){var e=this;this.$nextTick((function(){h.registerSource(e.name,e)}))},mounted:function(){this.disabled||this.sendUpdate()},updated:function(){this.disabled?this.clear():this.sendUpdate()},beforeDestroy:function(){h.unregisterSource(this.name),this.clear()},watch:{to:function(e,t){t&&t!==e&&this.clear(t),this.sendUpdate()}},methods:{clear:function(e){var t={from:this.name,to:e||this.to};h.close(t)},normalizeSlots:function(){return this.$scopedSlots.default?[this.$scopedSlots.default]:this.$slots.default},normalizeOwnChildren:function(e){return"function"==typeof e?e(this.slotProps):e},sendUpdate:function(){var e=this.normalizeSlots();if(e){var t={from:this.name,to:this.to,passengers:i(e),order:this.order};h.open(t)}else this.clear()}},render:function(e){var t=this.$slots.default||this.$scopedSlots.default||[],a=this.tag;return t&&this.disabled?t.length<=1&&this.slim?this.normalizeOwnChildren(t)[0]:e(a,[this.normalizeOwnChildren(t)]):this.slim?e():e(a,{class:{"v-portal":!0},style:{display:"none"},key:"v-portal-placeholder"})}}),v=r.extend({name:"portalTarget",props:{multiple:{type:Boolean,default:!1},name:{type:String,required:!0},slim:{type:Boolean,default:!1},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},data:function(){return{transports:h.transports,firstRender:!0}},created:function(){var e=this;this.$nextTick((function(){h.registerTarget(e.name,e)}))},watch:{ownTransports:function(){this.$emit("change",this.children().length>0)},name:function(e,t){h.unregisterTarget(t),h.registerTarget(e,this)}},mounted:function(){var e=this;this.transition&&this.$nextTick((function(){e.firstRender=!1}))},beforeDestroy:function(){h.unregisterTarget(this.name)},computed:{ownTransports:function(){var e=this.transports[this.name]||[];return this.multiple?e:0===e.length?[]:[e[e.length-1]]},passengers:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,a){var s=a.passengers[0],r="function"==typeof s?s(t):a.passengers;return e.concat(r)}),[])}(this.ownTransports,this.slotProps)}},methods:{children:function(){return 0!==this.passengers.length?this.passengers:this.$scopedSlots.default?this.$scopedSlots.default(this.slotProps):this.$slots.default||[]},noWrapper:function(){var e=this.slim&&!this.transition;return e&&this.children().length>1&&console.warn("[portal-vue]: PortalTarget with `slim` option received more than one child element."),e}},render:function(e){var t=this.noWrapper(),a=this.children(),s=this.transition||this.tag;return t?a[0]:this.slim&&!s?e():e(s,{props:{tag:this.transition&&this.tag?this.tag:void 0},class:{"vue-portal-target":!0}},a)}}),g=0,b=["disabled","name","order","slim","slotProps","tag","to"],y=["multiple","transition"],_=r.extend({name:"MountingPortal",inheritAttrs:!1,props:{append:{type:[Boolean,String]},bail:{type:Boolean},mountTo:{type:String,required:!0},disabled:{type:Boolean},name:{type:String,default:function(){return"mounted_"+String(g++)}},order:{type:Number,default:0},slim:{type:Boolean},slotProps:{type:Object,default:function(){return{}}},tag:{type:String,default:"DIV"},to:{type:String,default:function(){return String(Math.round(1e7*Math.random()))}},multiple:{type:Boolean,default:!1},targetSlim:{type:Boolean},targetSlotProps:{type:Object,default:function(){return{}}},targetTag:{type:String,default:"div"},transition:{type:[String,Object,Function]}},created:function(){if("undefined"!=typeof document){var e=document.querySelector(this.mountTo);if(e){var t=this.$props;if(h.targets[t.name])t.bail?console.warn("[portal-vue]: Target ".concat(t.name," is already mounted.\n        Aborting because 'bail: true' is set")):this.portalTarget=h.targets[t.name];else{var a=t.append;if(a){var s="string"==typeof a?a:"DIV",r=document.createElement(s);e.appendChild(r),e=r}var n=l(this.$props,y);n.slim=this.targetSlim,n.tag=this.targetTag,n.slotProps=this.targetSlotProps,n.name=this.to,this.portalTarget=new v({el:e,parent:this.$parent||this,propsData:n})}}else console.error("[portal-vue]: Mount Point '".concat(this.mountTo,"' not found in document"))}},beforeDestroy:function(){var e=this.portalTarget;if(this.append){var t=e.$el;t.parentNode.removeChild(t)}e.$destroy()},render:function(e){if(!this.portalTarget)return console.warn("[portal-vue] Target wasn't mounted"),e();if(!this.$scopedSlots.manual){var t=l(this.$props,b);return e(f,{props:t,attrs:this.$attrs,on:this.$listeners,scopedSlots:this.$scopedSlots},this.$slots.default)}var a=this.$scopedSlots.manual({to:this.to});return Array.isArray(a)&&(a=a[0]),a||e()}});var x={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.portalName||"Portal",f),e.component(t.portalTargetName||"PortalTarget",v),e.component(t.MountingPortalName||"MountingPortal",_)}};t.default=x,t.Portal=f,t.PortalTarget=v,t.MountingPortal=_,t.Wormhole=h},1092:function(e,t,a){"use strict";var s=a(5),r=a(507),n=a(509),i=a(802),o=a(1),l=Object(s.defineComponent)({__name:"view-filter",setup(e){const t=Object(i.k)(),a=Object(s.computed)((()=>t.state.settings.viewType)),l=Object(s.computed)((()=>t.state.threadSearch.filters.visibility)),c=[{name:o.Q.List,icon:"list"},{name:o.Q.Text,icon:"rows"}],u=Object(s.computed)((()=>{var e;const t=null===(e=l.value)||void 0===e?void 0:e.find((e=>{let{key:t}=e;return t===i.j.HidePriceComparison}));return!(null!=t&&t.selected)}));return Object(s.watchEffect)((()=>{const e=document.querySelector("#price-comparison-container");e&&(u.value?e.classList.remove("hide"):e.classList.add("hide"))})),{__sfc:!0,store:t,layoutName:a,visibilityOptions:l,layoutOptions:c,shouldShowPriceComparisonWidget:u,BaseButton:r.a,FormList:n.l,FormRow:n.o,FormContent:n.c,FormCheckbox:n.b}}}),c=a(44),u=Object(c.a)(l,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:view",arg:"view"}],staticClass:"space--r-3 space--l-3 space--mt-3"},[a.layoutName?t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-3"},[t("span",{staticClass:"text--color-charcoalTint"},[e._v(e._s("Ver"))]),t("div",{directives:[{name:"track",rawName:"v-track:layoutType",arg:"layoutType"}]},e._l(a.layoutOptions,(function({name:e,icon:s}){return t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:button.click",value:{layout:e},expression:"{ layout: name }",arg:"button",modifiers:{click:!0}}],key:e,staticClass:"space--mr-1",class:"-layout",attrs:{variant:"tertiary",mode:"default",square:"",selected:a.layoutName===e},on:{click:function(t){return a.store.dispatch("threadSearch/updateViewType",e)}}},[t("BaseIcon",{attrs:{name:s}})],1)})),1)]):e._e(),t(a.FormList,{attrs:{wide:""}},e._l(a.visibilityOptions,(function({key:s,option:r,selected:n,parameterizable:i}){return t(a.FormRow,{key:s},[t(a.FormContent,[t(a.FormCheckbox,{directives:[{name:"track",rawName:"v-track:checkbox.click",value:{option:s},expression:"{ option: key }",arg:"checkbox",modifiers:{click:!0}}],staticClass:"width--all-12",class:"",attrs:{name:s,checked:n},on:{click:function(e){return a.store.dispatch("threadSearch/setViewingFilter",{fieldName:s,fieldValue:!n,parameterizable:i})}},scopedSlots:e._u([{key:"inline-label",fn:function(){return[e._v(" "+e._s(r))]},proxy:!0}],null,!0)})],1)],1)})),1)],1)}),[],!1,null,null,null).exports,d=a(589),p=a(769);let h=function(e){return e.From="from",e.To="to",e}({});var m=Object(s.defineComponent)({__name:"range-slider",props:{min:null,max:null,fromValue:null,toValue:null,disabled:{type:Boolean,default:!1},stepFrom:{default:1},stepTo:{default:1}},emits:["update","update:fromValue","update:toValue","change:fromValue","change:toValue"],setup(e,t){let{emit:a}=t;const r=e,n=(e,t)=>{const a=r.max-r.min,s=Math.max(e,r.min),n=Math.min(t,r.max);l.width=(n-(r.fromValue||r.min))/a*100,l.left=(s-r.min)/a*100},i=Object(s.computed)({get(){var e;return null!==(e=r.fromValue)&&void 0!==e?e:r.min},set(e){a("update:fromValue",e)}}),o=Object(s.computed)({get(){var e;return null!==(e=r.toValue)&&void 0!==e?e:r.max},set(e){a("update:toValue",e)}}),l=Object(s.reactive)({left:0,width:100}),c=Object(s.ref)(r.toValue===r.min?h.To:h.From),u=Object(s.computed)((()=>c.value===h.From)),d=Object(s.computed)((()=>c.value===h.To));return Object(s.watchEffect)((()=>{a("update",i.value,o.value,u.value),n(i.value,o.value)})),{__sfc:!0,emit:a,props:r,setActiveLinePosition:n,from:i,to:o,activeLinePosition:l,lastTouchedField:c,isFromRangeTouched:u,isToRangeTouched:d,setLastTouched:e=>{c.value=e||h.From},RangeFieldsName:h}}}),f=Object(c.a)(m,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"aGrid"},[e._t("control",null,{setLastTouched:a.setLastTouched}),t("div",{staticClass:"rangeSlider-container"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.from,expression:"from"},{name:"track",rawName:"v-track:range.change",value:{from:a.from},expression:"{ from }",arg:"range",modifiers:{change:!0}}],staticClass:"rangeSlider rangeSlider--from",class:{"last-touched":a.isFromRangeTouched},attrs:{type:"range",step:e.stepFrom,min:a.props.min,max:a.props.max,disabled:a.props.disabled},domProps:{value:a.from},on:{mousedown:function(e){return a.setLastTouched(a.RangeFieldsName.From)},mouseup:function(t){return e.$emit("change:fromValue",t.target.value)},touchstart:function(e){return a.setLastTouched(a.RangeFieldsName.From)},touchend:function(t){return e.$emit("change:fromValue",t.target.value)},__r:function(e){a.from=e.target.value}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:a.to,expression:"to"},{name:"track",rawName:"v-track:range.change",value:{to:a.to},expression:"{ to }",arg:"range",modifiers:{change:!0}}],staticClass:"rangeSlider rangeSlider--to",class:{"last-touched":a.isToRangeTouched},attrs:{type:"range",step:e.stepTo,min:a.props.min,max:a.props.max,disabled:a.props.disabled},domProps:{value:a.to},on:{mousedown:function(e){return a.setLastTouched(a.RangeFieldsName.To)},mouseup:function(t){return e.$emit("change:toValue",t.target.value)},touchstart:function(e){return a.setLastTouched(a.RangeFieldsName.To)},touchend:function(t){return e.$emit("change:toValue",t.target.value)},__r:function(e){a.to=e.target.value}}}),t("div",{staticClass:"rangeSlider-line overflow--hidden",class:{"rangeSlider-line--disabled":a.props.disabled}},[t("div",{staticClass:"rangeSlider-line-active",style:{left:`${a.activeLinePosition.left}%`,width:`${a.activeLinePosition.width}%`}})])])],2)}),[],!1,null,null,null).exports,v=a(564),g=a(86),b=a.n(g),y=a(548),_=Object(s.defineComponent)({__name:"price-filter",setup(e){var t,a,r,o;const l=Object(i.k)(),c=Object(s.computed)((()=>{var e;return Math.floor(null===(e=l.state.threadSearch.filters.price)||void 0===e?void 0:e.minPrice)})),u=Object(s.computed)((()=>{var e;return Math.ceil(null===(e=l.state.threadSearch.filters.price)||void 0===e?void 0:e.maxPrice)})),m=Object(s.computed)((()=>l.getters["threadSearch/getPriceFrom"])),g=Object(s.computed)((()=>l.getters["threadSearch/getPriceTo"])),_=Object(s.computed)((()=>{var e;return null===(e=l.state.threadSearch.filters.price)||void 0===e?void 0:e.priceCounter})),x=Object(s.computed)((()=>!Object(y.b)(_.value))),C=Object(s.reactive)({priceFrom:null!==(t=m.value)&&void 0!==t?t:null,priceTo:null!==(a=g.value)&&void 0!==a?a:null,currentStepFrom:1,currentStepTo:1,precisePriceFrom:null!==(r=m.value)&&void 0!==r?r:null,precisePriceTo:null!==(o=g.value)&&void 0!==o?o:null}),k=Object(d.a)({priceFrom:[Object(v.c)()],priceTo:[Object(v.c)()]}),w=b()((()=>{C.priceFrom===m.value&&C.priceTo===g.value||(C.currentStepFrom=1,C.currentStepTo=1,C.precisePriceFrom=C.priceFrom,C.precisePriceTo=C.priceTo,l.dispatch("threadSearch/updateMultipleSearchFilters",{basicPayload:[{fieldName:i.e.PriceFrom,fieldValue:C.priceFrom},{fieldName:i.e.PriceTo,fieldValue:C.priceTo}]}))}),500);Object(s.watch)([m,g],(()=>{var e,t,a,s;C.priceFrom=null!==(e=m.value)&&void 0!==e?e:null,C.priceTo=null!==(t=g.value)&&void 0!==t?t:null,C.precisePriceFrom=null!==(a=m.value)&&void 0!==a?a:null,C.precisePriceTo=null!==(s=g.value)&&void 0!==s?s:null}));const O=(e,t)=>{if(t){if(C[e]=Number(t),(C.priceTo||0===C.priceTo)&&C.priceFrom>C.priceTo){const e=C.priceTo;C.priceTo=C.priceFrom,C.priceFrom=e}}else C[e]=null},j=e=>e<=i.g.THRESHOLD_20?i.f.STEP_1:e<=i.g.THRESHOLD_50?i.f.STEP_5:e<=i.g.THRESHOLD_100?i.f.STEP_10:e<=i.g.THRESHOLD_500?i.f.STEP_25:e<=i.g.THRESHOLD_1000?i.f.STEP_50:i.f.STEP_100;return{__sfc:!0,store:l,minPrice:c,maxPrice:u,priceFrom:m,priceTo:g,priceCounter:_,isDisabled:x,state:C,$v:k,priceControlHandler:async(e,t)=>{await k.value.validate(e,t);Object.values(k.value.error).every((e=>!1===e))&&(O(e,t),w())},handlePriceChange:w,setPrice:O,definePriceStep:j,handlePriceFrom:e=>{e===u.value||u.value-e<C.currentStepFrom?C.priceFrom=u.value:e===c.value?C.priceFrom=c.value:C.priceFrom=Math.ceil(e/C.currentStepFrom)*C.currentStepFrom,C.currentStepFrom=j(C.precisePriceFrom),C.precisePriceFrom=e,e>=C.priceTo&&C.priceTo&&(C.priceFrom=C.priceTo,C.precisePriceFrom=C.priceTo)},handlePriceTo:e=>{e===c.value||e-c.value<C.currentStepTo?C.priceTo=c.value:e===u.value?C.priceTo=u.value:C.priceTo=Math.floor(e/C.currentStepTo)*C.currentStepTo,C.currentStepTo=j(e),C.precisePriceTo=e,e<=C.priceFrom&&(C.priceTo=C.priceFrom,C.precisePriceTo=C.priceFrom)},PriceControl:p.a,RangeSlider:f,RangeFieldsName:h,FormMessageList:n.m,PriceFilterKeys:i.e,formatNumber:y.a}}}),x=Object(c.a)(_,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:price",arg:"price"}],staticClass:"space--mt-3 space--t-3 space--r-3 space--l-3 border--t border--color-greyBackground"},[t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-3"},[t("strong",{staticClass:"text--b size--all-l"},[e._v(e._s("Precio"))]),t("span",{staticClass:"text--color-grey size--all-s overflow--wrap-off"},[e._v(e._s(a.formatNumber(a.priceCounter)))])]),t("div",[t("div",{staticClass:"space--mt-3"},[t(a.RangeSlider,{attrs:{min:a.minPrice,max:a.maxPrice,"from-value":a.state.precisePriceFrom,"to-value":a.state.precisePriceTo,disabled:a.isDisabled},on:{"update:fromValue":function(e){a.handlePriceFrom(Number(e))},"update:toValue":function(e){a.handlePriceTo(Number(e))},"change:fromValue":a.handlePriceChange,"change:toValue":a.handlePriceChange},scopedSlots:e._u([{key:"control",fn:function({setLastTouched:e}){return[t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-3"},[t(a.PriceControl,{attrs:{value:a.state.priceFrom,name:"priceFrom",autocomplete:"off","disable-cache":!0,disabled:a.isDisabled,placeholder:a.formatNumber(a.minPrice)},on:{update:function(e){return a.priceControlHandler(a.PriceFilterKeys.PriceFrom,e)},focus:function(t){e(a.RangeFieldsName.From),a.$v.clear()}}}),t("div",{staticClass:"space--r-2 space--l-2 flex boxAlign-jc--all-sb boxAlign-ai--all-c"},[t("span",{staticClass:"dash-line"})]),t(a.PriceControl,{attrs:{value:a.state.priceTo,name:"priceTo",autocomplete:"off","disable-cache":!0,disabled:a.isDisabled,placeholder:a.formatNumber(a.maxPrice)},on:{update:function(e){return a.priceControlHandler(a.PriceFilterKeys.PriceTo,e)},focus:function(t){e(a.RangeFieldsName.To),a.$v.clear()}}})],1)]}}])}),t("div",{staticClass:"space--mt-2"},[t(a.FormMessageList,{attrs:{messages:a.$v.messages.priceTo}}),t(a.FormMessageList,{attrs:{messages:a.$v.messages.priceFrom}})],1)],1)])])}),[],!1,null,null,null).exports,C=a(979).a,k=Object(c.a)(C,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return a.temperatureBlock?t("div",{directives:[{name:"track",rawName:"v-track:temperature",arg:"temperature"}],staticClass:"space--mt-3 space--t-3 space--r-3 space--l-3 border--t border--color-greyBackground"},[t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-3"},[t("strong",{staticClass:"text--b size--all-l"},[e._v(e._s("Temperatura"))]),t(a.BaseButton,{directives:[{name:"popover",rawName:"v-popover.n",modifiers:{n:!0}},{name:"track",rawName:"v-track:button.click",arg:"button",modifiers:{click:!0}}],attrs:{variant:"tertiary",mode:"default",size:"s",square:"",selected:a.state.temperatureHint}},[t("BaseIcon",{attrs:{color:a.state.temperatureHint?"brandPrimary":"grey",name:"question"}}),t("BasePopover",{attrs:{active:a.state.temperatureHint,width:"290"},on:{"update:active":function(t){return e.$set(a.state,"temperatureHint",t)}},scopedSlots:e._u([{key:"default",fn:function({}){return[t(a.PopoverHintContent,{staticClass:"boxAlign-ai--all-c"},[t("span",{staticClass:"size--all-s space--mr-2"},[e._v(e._s("La temperatura de una oferta muestra su calidad según lo votado por nuestra comunidad. A mayor temperatura, más popular es la oferta.")+" ")])])]}}],null,!1,1427371654)})],1)],1),t("div",[t(a.FormList,{attrs:{wide:""}},e._l(a.state.manufacturedConfig,(function(s,r){return t(a.FormRow,{key:r},[t(a.FormContent,{staticClass:"flex boxAlign-jc--all-sb"},[t(a.FormRadio,{directives:[{name:"track",rawName:"v-track:radio.click",value:{temperatureFrom:s.value},expression:"{\n\t\t\t\t\t\t\ttemperatureFrom: line.value,\n\t\t\t\t\t\t}",arg:"radio",modifiers:{click:!0}}],staticClass:"width--all-12",attrs:{name:s.label,value:`${s.value}`,disabled:!s.count},on:{change:s.handler},model:{value:a.state.modelValue,callback:function(t){e.$set(a.state,"modelValue",t)},expression:"state.modelValue"}},[t("span",{staticClass:"size--all-s"},[e._v(e._s(s.label))])]),s.count?t("span",{staticClass:"text--color-grey size--all-s overflow--wrap-off"},[e._v(" "+e._s(a.formatNumber(s.count))+" ")]):e._e()],1)],1)})),1),t("div",{staticClass:"space--mt-3 flex boxAlign-jc--all-sb boxAlign-ai--all-c"},[t(a.FormInputWithDegreeMask,{directives:[{name:"track",rawName:"v-track:numeric.change",value:a.trackData,expression:"trackData",arg:"numeric",modifiers:{change:!0}}],attrs:{value:a.state.temperatureFrom,name:"temperatureFrom",placeholder:a.minTemperature,disabled:a.isTemperatureOptionsAbsent,degrees:a.degrees,length:"10"},on:{keyup:function(e){return a.setTemperatureFilter(e.target.value,a.TemperatureFilterKeys.TemperatureFrom)}}}),e._m(0),t(a.FormInputWithDegreeMask,{directives:[{name:"track",rawName:"v-track:numeric.change",value:a.trackData,expression:"trackData",arg:"numeric",modifiers:{change:!0}}],attrs:{value:a.state.temperatureTo,name:"temperatureTo",placeholder:a.maxTemperature,disabled:a.isTemperatureOptionsAbsent,degrees:a.degrees,length:"10"},on:{keyup:function(e){return a.setTemperatureFilter(e.target.value,a.TemperatureFilterKeys.TemperatureTo)}}})],1)],1)]):e._e()}),[function(){var e=this._self._c;this._self._setupProxy;return e("span",{staticClass:"space--r-2 space--l-2 flex boxAlign-jc--all-sb boxAlign-ai--all-c"},[e("span",{staticClass:"dash-line"})])}],!1,null,null,null).exports,w=a(554),O=Object(s.defineComponent)({__name:"refine-search-filter",setup(e){const t=Object(i.k)(),a=Object(s.computed)((()=>{var e;return null===(e=t.state.threadSearch.filters)||void 0===e?void 0:e.search_fields})),r=Object(s.computed)((()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.filter((e=>{let{selected:t}=e;return t}))})),n=Object(s.computed)((()=>{var e;const t=null===(e=a.value)||void 0===e?void 0:e.filter((e=>{let{selected:t}=e;return t}));return 1===(null==t?void 0:t.length)?t[0].id:null})),o=Object(s.computed)((()=>{var e,t;return{names:(null===(e=r.value)||void 0===e?void 0:e.map((e=>e.name)).join(", "))||"",ids:(null===(t=r.value)||void 0===t?void 0:t.map((e=>e.id)).join(", "))||""}}));return{__sfc:!0,store:t,searchGroupsOptions:a,selectedSearchGroups:r,disabledCheckboxId:n,trackData:o,multiSelectUpdateHandler:e=>{const a=e.map((e=>{let{id:t}=e;return t}));t.dispatch("threadSearch/updateSearchFilters",{fieldName:i.b.SearchFields,fieldValue:a})},MultiSelect:w.b,FiltersStateKeys:i.b}}}),j=Object(c.a)(O,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:searchLocations",arg:"searchLocations"}],staticClass:"space--mt-3 space--t-3 space--r-3 space--l-3 border--t border--color-greyBackground"},[t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-3"},[t("strong",{staticClass:"text--b size--all-l"},[e._v(e._s("Buscar en"))])]),t("div",{staticClass:"flex boxAlign-ai--all-c"},[t(a.MultiSelect,{directives:[{name:"track",rawName:"v-track:multiselect.change",value:a.trackData,expression:"trackData",arg:"multiselect",modifiers:{change:!0}}],attrs:{value:a.selectedSearchGroups,options:a.searchGroupsOptions,name:`${a.FiltersStateKeys.SearchFields}[]`,"text-key":"name","value-key":"id",ellipsis:"","retain-value":"","show-icon":!1,"disabled-checkbox-id":a.disabledCheckboxId},on:{update:a.multiSelectUpdateHandler},scopedSlots:e._u([{key:"option-label",fn:function({item:t}){return[e._v(" "+e._s(t.name))]}}])})],1)])}),[],!1,null,null,null).exports,S=Object(s.defineComponent)({__name:"category-filter",setup(e){const t=Object(i.k)(),a=Object(s.computed)((()=>{var e;return null===(e=t.state.threadSearch.filters)||void 0===e?void 0:e.groups})),r=Object(s.computed)((()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.filter((e=>{let{selected:t}=e;return t}))})),n=Object(s.computed)((()=>{var e,t;return{names:(null===(e=r.value)||void 0===e?void 0:e.map((e=>e.name)).join(", "))||"",ids:(null===(t=r.value)||void 0===t?void 0:t.map((e=>e.id)).join(", "))||""}}));return{__sfc:!0,store:t,groupsOptions:a,selectedGroups:r,trackData:n,multiSelectUpdateHandler:e=>{const a=e.map((e=>{let{id:t}=e;return t}));t.dispatch("threadSearch/updateSearchFilters",{fieldName:i.b.Groups,fieldValue:a})},MultiSelect:w.b}}}),T=Object(c.a)(S,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:categories",arg:"categories"}],staticClass:"space--mt-3 space--t-3 space--r-3 space--l-3 border--t border--color-greyBackground"},[t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-2"},[t("strong",{staticClass:"text--b size--all-l"},[e._v(e._s("Categoría"))])]),t(a.MultiSelect,{directives:[{name:"track",rawName:"v-track:multiselect.change",value:a.trackData,expression:"trackData",arg:"multiselect",modifiers:{change:!0}}],attrs:{value:a.selectedGroups,options:a.groupsOptions,placeholder:"Elige una categoría",name:"categories","text-key":"name","value-key":"id","retain-value":"",ellipsis:"",disabled:!a.groupsOptions.length,"show-icon":!1},on:{update:a.multiSelectUpdateHandler},scopedSlots:e._u([{key:"option-label",fn:function({item:t}){return[e._v(" "+e._s(t.name)+" ("+e._s(t.count)+") ")]}}])})],1)}),[],!1,null,null,null).exports,P=Object(s.defineComponent)({__name:"date-filter",setup(e){const t=Object(i.k)(),a=Object(s.computed)((()=>{const e=t.getters["threadSearch/getTimeFrameOptions"];return e?e.map((e=>({text:e.name,value:"".concat(e.value),selected:e.selected}))):[]})),r=e=>e.find((e=>e.selected)),n=Object(s.reactive)({selectedOption:r(a.value)});Object(s.watch)(a,(e=>{n.selectedOption=r(e)}));return{__sfc:!0,store:t,mappedTimeFrameOptions:a,detectSelectedOption:r,state:n,setTimeFrame:e=>{t.dispatch("threadSearch/updateSearchFilters",{fieldName:i.b.TimeFrame,fieldValue:Number(e.target.value)})},CustomSelect:w.a}}}),B=Object(c.a)(P,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:timeFrame",arg:"timeFrame"}],staticClass:"space--mt-3 space--t-3 space--r-3 space--l-3 border--t border--color-greyBackground"},[t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-3"},[t("strong",{staticClass:"text--b size--all-l"},[e._v(e._s("Periodo"))])]),t(a.CustomSelect,{directives:[{name:"track",rawName:"v-track:select.change",value:{selection:a.state.selectedOption.value},expression:"{ selection: state.selectedOption.value }",arg:"select",modifiers:{change:!0}}],attrs:{value:a.state.selectedOption.value,options:a.mappedTimeFrameOptions},on:{change:a.setTimeFrame}})],1)}),[],!1,null,null,null).exports,A=Object(s.defineComponent)({__name:"retailer-filter",setup(e){const t=Object(i.k)(),a=Object(s.computed)((()=>{var e;return null===(e=t.state.threadSearch.filters)||void 0===e?void 0:e.retailers})),r=Object(s.computed)((()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.filter((e=>{let{selected:t}=e;return t}))})),n=Object(s.computed)((()=>{var e,t;return{names:(null===(e=r.value)||void 0===e?void 0:e.map((e=>e.name)).join(", "))||"",ids:(null===(t=r.value)||void 0===t?void 0:t.map((e=>e.id)).join(", "))||""}}));return{__sfc:!0,store:t,retailersOptions:a,selectedRetailers:r,trackData:n,multiSelectUpdateHandler:e=>{const a=e.map((e=>{let{id:t}=e;return t}));t.dispatch("threadSearch/updateSearchFilters",{fieldName:i.b.Retailers,fieldValue:a})},MultiSelect:w.b}}}),L=Object(c.a)(A,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:retailers",arg:"retailers"}],staticClass:"space--mt-3 space--t-3 space--r-3 space--l-3 border--t border--color-greyBackground"},[t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-3"},[t("strong",{staticClass:"text--b size--all-l"},[e._v(e._s("Minorista"))])]),t(a.MultiSelect,{directives:[{name:"track",rawName:"v-track:multiselect.change",value:a.trackData,expression:"trackData",arg:"multiselect",modifiers:{change:!0}}],attrs:{value:a.selectedRetailers,options:a.retailersOptions,placeholder:"Ej: Amazon...",name:"retailers","text-key":"name","value-key":"id","retain-value":"",searchable:"",disabled:!a.retailersOptions.length,"show-icon":!1},on:{update:a.multiSelectUpdateHandler},scopedSlots:e._u([{key:"option-label",fn:function({item:t}){return[e._v(" "+e._s(t.name)+" ("+e._s(t.count)+") ")]}}])})],1)}),[],!1,null,null,null).exports,I=a(4),E=a(513),N=a(765),F=a(133),M=a.n(F),R=a(97),D=a.n(R),U=Object(s.defineComponent)({__name:"thread-type-filter",setup(e){const t=Object(s.computed)((()=>I.a.getters["threadSearch/getThreadTypeOptions"])),a=b()((()=>{const e=n.mappedThreadSwitch.filter((e=>e.selected));I.a.dispatch("threadSearch/".concat(i.a.UpdateSearchFilters),{fieldName:i.c.ThreadType,fieldValue:e.length===n.mappedThreadSwitch.length?null:Number(e[0].id)})}),500),r=()=>D()(t.value)?[]:t.value.map((e=>({id:e.id,selected:e.selected,count:e.count,name:e.name,isDisabled:1===t.value.filter((e=>{let{selected:t}=e;return t})).length&&e.selected}))),n=Object(s.reactive)({mappedThreadSwitch:r()});return Object(s.watch)((()=>t.value),((e,t)=>{M()(e,t)||(n.mappedThreadSwitch=r())})),{__sfc:!0,threadTypeOptions:t,dispatchThreadType:a,handleThreadSwitch:e=>{n.mappedThreadSwitch.forEach((t=>(t.name===e.name?t.selected=!t.selected:t.isDisabled=!t.isDisabled,t))),a()},mapThreadSwitch:r,state:n,FormSwitch:N.a}}}),z=Object(c.a)(U,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"space--mt-3 space--t-3 space--r-3 space--l-3 border--t border--color-greyBackground"},[t("div",{staticClass:"flex boxAlign-jc--all-sb boxAlign-ai--all-c space--mb-3"},[t("strong",{staticClass:"text--b size--all-l"},[e._v(e._s("Tipo de chollo"))])]),e._l(a.state.mappedThreadSwitch,(function(s){return[t("div",{key:s.type,staticClass:"width--all-12 flex boxAlign-jc--all-sb space--mb-2 boxAlign-center"},[t(a.FormSwitch,{attrs:{disabled:s.isDisabled,checked:s.selected},on:{change:function(e){return a.handleThreadSwitch(s)}}}),t("span",{staticClass:"space--mr-a space--ml-2"},[e._v(e._s(s.name))]),t("span",{staticClass:"text--color-grey size--all-s overflow--wrap-off"},[e._v(e._s(s.count))])],1)]}))],2)}),[],!1,null,null,null).exports,q=Object(s.defineComponent)({__name:"detailed-filter",setup(e){const{query:t}=Object(E.a)(),a=Object(s.computed)((()=>(null==t?void 0:t.q)||"")),r=Object(s.computed)((()=>I.a.state.threadSearch.filters.price)),n=Object(s.computed)((()=>I.a.state.threadSearch.filters.temperature)),i=Object(s.computed)((()=>I.a.state.threadSearch.filters.groups)),o=Object(s.computed)((()=>I.a.state.threadSearch.filters.time_frame)),l=Object(s.computed)((()=>I.a.state.threadSearch.filters.retailers)),c=Object(s.computed)((()=>I.a.state.threadSearch.filters.search_fields)),d=Object(s.computed)((()=>I.a.state.threadSearch.filters.threadTypes)),p=Object(s.computed)((()=>I.a.state.threadSearch.loading));return Object(s.watch)(p,(()=>{const e=document.querySelector("#content-list");p.value?e.classList.add("seal--cover-greyBackground"):e.classList.remove("seal--cover-greyBackground")})),{__sfc:!0,query:t,searchTerm:a,price:r,temperature:n,groups:i,time_frame:o,retailers:l,search_fields:c,threadTypes:d,isThreadsLoading:p,ViewFilter:u,PriceFilter:x,TemperatureFilter:k,CategoryFilter:T,DateFilter:B,RetailerFilter:L,RefineSearchFilter:j,ThreadTypeFilter:z}}}),W=Object(c.a)(q,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:search",value:{term:a.searchTerm},expression:"{ term: searchTerm }",arg:"search"}]},[e.$breakpoint.lgAndUp?t("div",{staticClass:"space--r-3 space--l-3"},[t("h2",{staticClass:"text--color-charcoal text--b size--all-xl"},[e._v(e._s("Filtros"))])]):e._e(),t(a.ViewFilter),a.threadTypes?t(a.ThreadTypeFilter):e._e(),a.price?t(a.PriceFilter):e._e(),a.temperature?t(a.TemperatureFilter):e._e(),a.groups?t(a.CategoryFilter):e._e(),a.time_frame?t(a.DateFilter):e._e(),a.retailers?t(a.RetailerFilter):e._e(),a.search_fields?t(a.RefineSearchFilter):e._e()],1)}),[],!1,null,null,null);t.a=W.exports},1121:function(e,t,a){"use strict";a(1062)},1122:function(e,t,a){"use strict";(function(e){a.d(t,"f",(function(){return v})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return b})),a.d(t,"d",(function(){return y})),a.d(t,"b",(function(){return _})),a.d(t,"e",(function(){return x})),a.d(t,"g",(function(){return C}));var s=a(802),r=a(548),n=a(5),i=a(4);const o=Object(n.computed)((()=>i.a.getters["threadSearch/getTemperatureFrom"])),l=Object(n.computed)((()=>i.a.getters["threadSearch/getTemperatureTo"])),c=Object(n.computed)((()=>{var e;return null===(e=i.a.state.threadSearch.filters.price)||void 0===e?void 0:e.priceFrom})),u=Object(n.computed)((()=>{var e;return null===(e=i.a.state.threadSearch.filters.price)||void 0===e?void 0:e.priceTo})),d=Object(n.computed)((()=>i.a.getters["threadSearch/getTimeFrameOptions"])),p=Object(n.computed)((()=>i.a.state.threadSearch.filters.groups)),h=Object(n.computed)((()=>i.a.state.threadSearch.filters.retailers)),m=Object(n.computed)((()=>i.a.state.threadSearch.filters.search_fields)),f=Object(n.computed)((()=>i.a.state.threadSearch.filters.threadTypes)),v=()=>{let t="",a=[];return null!==o.value&&null===l.value?(t=e(":number y en adelante",{replaces:{number:"".concat(Object(r.a)(o.value),"°")}}),a=[{fieldName:s.h.TemperatureFrom}]):null!==l.value&&null===o.value?(t="".concat("Hasta"," ").concat(Object(r.a)(l.value),"°"),a=[{fieldName:s.h.TemperatureTo}]):null!==o.value&&null!==l.value&&(t="".concat(Object(r.a)(o.value),"° - ").concat(Object(r.a)(l.value),"°"),a=[{fieldName:s.h.TemperatureFrom},{fieldName:s.h.TemperatureTo}]),{fieldName:s.b.Temperature,label:t,fields:a}},g=()=>{let t="",a=[];return c.value&&!u.value?(t="".concat(e(":number y en adelante",{replaces:{number:"".concat(Object(r.a)(c.value,{includeCurrency:!0}))}})),a=[{fieldName:s.e.PriceFrom}]):u.value&&!c.value?(t="".concat("Hasta"," ").concat(Object(r.a)(u.value,{includeCurrency:!0})),a=[{fieldName:s.e.PriceTo}]):c.value&&u.value&&(t="".concat(Object(r.a)(c.value,{includeCurrency:!0})," - ").concat(Object(r.a)(u.value,{includeCurrency:!0})),a=[{fieldName:s.e.PriceFrom},{fieldName:s.e.PriceTo}]),{fieldName:s.b.Price,label:t,fields:a}},b=()=>{const e=d.value.find((e=>e.selected));let t="";return 365!==(null==e?void 0:e.value)&&(t="".concat(e.name)),{fieldName:s.b.TimeFrame,label:t,fields:[{fieldName:s.b.TimeFrame,fieldValue:365}]}},y=()=>{const e=h.value.filter((e=>{let{selected:t}=e;return t})).map((e=>{let{name:t}=e;return t})).join(", ");return{fieldName:s.b.Retailers,fields:[{fieldName:s.b.Retailers}],label:e}},_=()=>{const e=p.value.filter((e=>{let{selected:t}=e;return t})).map((e=>{let{name:t}=e;return t})).join(", ");return{fieldName:s.b.Groups,fields:[{fieldName:s.b.Groups}],label:e}},x=()=>{const e=m.value.every((e=>{let{selected:t}=e;return t})),t=m.value.filter((e=>{let{selected:t}=e;return t})).map((e=>{let{name:t}=e;return t})).join(", ");return{fieldName:s.b.SearchFields,fields:[{fieldName:s.b.SearchFields}],label:e?"":t}},C=()=>{let e="";var t;f.value.every((e=>{let{selected:t}=e;return t}))||(e=(null===(t=f.value.find((e=>{let{selected:t}=e;return t})))||void 0===t?void 0:t.id)===s.i.Vouchers?"".concat("Ocultar chollos"):"".concat("Ocultar códigos descuento"));return{fieldName:s.b.ThreadType,fields:[{fieldName:s.b.ThreadType}],label:e}}}).call(this,a(70).translation)},120:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"f",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return c}));const s=e=>("0"+e.toString(16)).substr(-2),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return Array.from((window.crypto||window.msCrypto).getRandomValues(new Uint8Array(e/2)),s).join("")},n=e=>+e<10?"0".concat(+e):e.toString(),i=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent},o=e=>e.replace(/\r?\n|\r/g,""),l=e=>/^[a-z][A-Za-z\d]*$/.test(e),c=e=>(new DOMParser).parseFromString(e,"text/html").body.textContent},121:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var s=a(16);function r(e,t){window.hj?window.hj(e,t):i.push([e,t])}function n(e){Object(s.e)(e,(e=>{e&&function(e){let{hotJar:t,features:a}=e;if(window.hj||!a.hotJar||!a.cookiePolicy.allowTracking)return;s=window,r=document,n="https://static.hotjar.com/c/hotjar-",o=".js?sv=",s.hj=function(){(s.hj.q=s.hj.q||i).push(arguments)},s._hjSettings={hjid:t.id,hjsv:6},l=r.getElementsByTagName("head")[0],(c=r.createElement("script")).async=!0,c.src=n+s._hjSettings.hjid+o+s._hjSettings.hjsv,l.appendChild(c);var s,r,n,o,l,c}(e)}))}const i=[]},1225:function(e,t,a){"use strict";a.r(t);var s=a(5),r=a(528),n=a(703),i=a(79),o=a(691),l=a(539),c=a(510),u=Object(s.defineComponent)({__name:"RLPBanner",props:{merchant:null},setup:e=>({__sfc:!0,props:e,link:{name:"merchants.show",params:{merchantUrlName:e.merchant.merchantUrlName}},BaseButton:c.a})}),d=a(44),p=Object(d.a)(u,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:rlpBanner",arg:"rlpBanner"}],staticClass:"flex flex--toW3-dir-col boxAlign-jc--all-sb boxAlign-ai--fromW3-c width--all-12 border border--color-blue bRad--a bg--color-bluePaleShade space--h-3 space--v-3 space--mt-2"},[t("div",{staticClass:"text--color-blue space--toW3-b-3 space--fromW3-r-3"},[t("p",{staticClass:"size--all-m text--b space--b-1"},[e._v(" "+e._s(e.$t("¿Buscas cupones para :merchant?",{replaces:{merchant:e.merchant.merchantName}}))+" ")]),t("p",{staticClass:"size--all-s"},[e._v(" "+e._s(e.$t("Visita la página dedicada a cupones para ver todos los códigos promocionales disponibles de :merchant",{replaces:{merchant:e.merchant.merchantName}}))+" ")])]),t("div",[t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:ctaButton.click",arg:"ctaButton",modifiers:{click:!0}}],attrs:{variant:"primary",mode:"info",to:a.link}},[t("span",[e._t("default",(function(){return[e._v(e._s("Visitar página"))]}))],2),t("BaseIcon",{attrs:{name:"external",right:""}})],1)],1)])}),[],!1,null,null,null).exports,h=a(672),m=a(151),f=a(802),v=a(1),g=a(242),b=a(21),y=a(4),_=a(6),x=a(51);const C=e=>{const t=null==e?void 0:e.find((e=>e.selected));return null==t?void 0:t.value},k=e=>{const t=null==e?void 0:e.find((e=>e.selected));return null==t?void 0:t.key},w=e=>{if(null==e||!e.length)return null;return e.filter((e=>e.selected)).map((e=>e.id))},O=(e,t,a)=>{const s=Object.assign({},b.l.currentRoute.query,{[e]:Array.isArray(t)?t.toString():t});null!==t&&""!==t||delete s[e],a&&delete s[a],b.l.replace({query:s}).catch((()=>{}))},j=async(e,t)=>{let{commit:a,state:s,rootState:r}=e;a(f.d.UPDATE,{fieldName:f.c.Loading,fieldValue:!0});const{shouldUpdateFilter:n}=t,i=((e,t)=>{var a,s,r,n,i,o,l;const{shouldUpdateFilter:c=!0,fields:u=[]}=t,d={[x.f]:v.Ab.Discussion,[x.d]:v.Ab.Deal,[x.n]:v.Ab.ReferralCampaign}[b.l.currentRoute.params.type]||v.Ab.Deal,p={q:b.l.currentRoute.query.q||"",page:e.page,layout:e.layout,sortBy:k(e.sortBy),type:d,filters:Object.assign({},(h=e.filters.visibility,null==h?void 0:h.reduce(((e,t)=>Object.assign({},e,{[t.key]:t.selected})),{})),{priceFrom:null===(a=e.filters.price)||void 0===a?void 0:a.priceFrom,priceTo:null===(s=e.filters.price)||void 0===s?void 0:s.priceTo,temperatureFrom:null===(r=e.filters.temperature)||void 0===r?void 0:r.temperatureFrom,temperatureTo:null===(n=e.filters.temperature)||void 0===n?void 0:n.temperatureTo,timeFrom:e.filters.timeFrom,timeTo:e.filters.timeTo,time_frame:C(e.filters.time_frame),search_fields:w(e.filters.search_fields),retailers:null===(i=e.filters.retailers)||void 0===i?void 0:i.filter((e=>{let{selected:t}=e;return t})).map((e=>{let{id:t}=e;return t})),groups:null===(o=e.filters.groups)||void 0===o?void 0:o.filter((e=>{let{selected:t}=e;return t})).map((e=>{let{id:t}=e;return t})),merchantId:e.filters.merchantId?Number(e.filters.merchantId):null,threadTypes:null===(l=e.filters.threadTypes)||void 0===l?void 0:l.filter((e=>{let{selected:t}=e;return t})).map((e=>{let{id:t}=e;return Number(t)}))})};var h;return u.forEach((e=>{c?p.filters[e.fieldName]=e.fieldValue:p[e.fieldName]=e.fieldValue})),p})(Object.assign({},s,{layout:r.settings.viewType}),t),o=await(async(e,t)=>{const{searchThreads:a}=await Object(_.a)({req:v.Uc,params:{input:e,shouldUpdateFilter:t}});return y.a.dispatch("threadList/pagination/setPage",e.page),y.a.dispatch("threadList/pagination/setCount",a.pagination.count),a})(i,n);var l;return l=o.listHtml,document.querySelector(".js-threadList").innerHTML=l,Object(g.b)(),a(f.d.UPDATE,{fieldName:f.c.Loading,fieldValue:!1}),o},S=e=>({loading:!1,page:e.page,sortBy:e.sortBy,filters:e.filters,chipsCount:0}),T={async[f.a.UpdateSearchFilters](e,t){let{fieldName:a,fieldValue:s}=t;const{commit:r}=e,{filters:n}=await j(e,{fields:[{fieldName:a,fieldValue:s}]});O(a,s),r(f.d.UPDATE,{fieldName:f.c.Filters,fieldValue:n})},async[f.a.UpdateSortBy](e,t){let{fieldName:a,fieldValue:s}=t;const{commit:r}=e,{sortBy:n}=await j(e,{shouldUpdateFilter:!1,fields:[{fieldName:a,fieldValue:s}]});O(a,s),r(f.d.UPDATE,{fieldName:a,fieldValue:n})},async[f.a.UpdateSearchState](e,t){let{fieldName:a,fieldValue:s}=t;const{commit:r}=e;await j(e,{shouldUpdateFilter:!1,fields:[{fieldName:a,fieldValue:s}]}),O(a,s),r(f.d.UPDATE,{fieldName:a,fieldValue:s})},async[f.a.UpdateViewType](e,t){const{dispatch:a}=e,s="layout";await j(e,{shouldUpdateFilter:!1,fields:[{fieldName:s,fieldValue:t}]}),O(s,t),a("settings/updateViewType",t,{root:!0})},async[f.a.SetViewingFilter](e,t){let{fieldName:a,fieldValue:s,parameterizable:r}=t;const{commit:n}=e,{filters:i}=await j(e,{fields:[{fieldName:a,fieldValue:s}]});r&&O(a,s),n(f.d.UPDATE,{fieldName:f.c.Filters,fieldValue:i})},async[f.a.RemoveFilter](e,t){const{commit:a,state:s}=e;(e=>{const t=Object.assign({},b.l.currentRoute.query);e.forEach((e=>{const a=Object.keys(t).find((t=>t.includes(e.fieldName)));delete t[a]})),b.l.replace({query:t}).catch((()=>{}))})(t);const{filters:r}=await j(e,{fields:t});a(f.d.UPDATE,{fieldName:f.c.Filters,fieldValue:Object.assign({},s.filters,r)})},async[f.a.UpdateMultipleSearchFilters](e,t){const{commit:a,state:s}=e;!function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object.assign({},b.l.currentRoute.query);e.forEach((e=>{a=Object.assign({},a,{[e.fieldName]:e.fieldValue}),t?e.fieldValue||0===e.fieldValue||delete a[e.fieldName]:e.fieldValue||delete a[e.fieldName]})),b.l.replace({query:a}).catch((()=>{}))}(t.basicPayload,t.allowZero);const{filters:r}=await j(e,{fields:t.basicPayload});a(f.d.UPDATE,{fieldName:f.c.Filters,fieldValue:Object.assign({},s.filters,r)})},[f.a.SetChipsCount](e,t){let{commit:a}=e;a(f.d.UPDATE,{fieldName:f.c.ChipsCount,fieldValue:t})}},P={[f.d.UPDATE](e,t){let{fieldName:a,fieldValue:s}=t;e[a]=s}},B={getTemperatureFrom:e=>{var t;return null===(t=e.filters.temperature)||void 0===t?void 0:t.temperatureFrom},getTemperatureTo:e=>{var t;return null===(t=e.filters.temperature)||void 0===t?void 0:t.temperatureTo},getMinTemperature:e=>{var t;return null===(t=e.filters.temperature)||void 0===t?void 0:t.minTemperature},getMaxTemperature:e=>{var t;return null===(t=e.filters.temperature)||void 0===t?void 0:t.maxTemperature},getTemperatureOptions:e=>{var t;return null===(t=e.filters.temperature)||void 0===t?void 0:t.options},getTemperatureBlock:e=>e.filters.temperature,getPriceFrom:e=>{var t;return null===(t=e.filters.price)||void 0===t?void 0:t.priceFrom},getPriceTo:e=>{var t;return null===(t=e.filters.price)||void 0===t?void 0:t.priceTo},getMaxPrice:e=>{var t;return null===(t=e.filters.price)||void 0===t?void 0:t.maxPrice},getMinPrice:e=>{var t;return null===(t=e.filters.price)||void 0===t?void 0:t.minPrice},getFilters:e=>e.filters,getTimeFrameOptions:e=>e.filters.time_frame,getSortingOptions:e=>e.sortBy,getThreadTypeOptions:e=>e.filters.threadTypes};const A=Object(m.a)("threadSearch",(e=>({namespaced:!0,state:S(e),actions:T,mutations:P,getters:B})));var L=a(1032),I=(a(978),a(513)),E=a(16),N=a(160),F=a(1026),M=a(32),R=a.n(M),D=a(532),U=a(527),z=a(508),q=a(578),W=a(563),V={components:{UserShortProfileTrigger:a(545).a,UserAvatar:W.a,UserLink:q.c},props:{user:{type:Object,required:!0}},computed:{ceptClass:()=>""}},$=Object(d.a)(V,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex boxAlign-ai--all-c"},[t("UserShortProfileTrigger",{attrs:{user:e.user},scopedSlots:e._u([{key:"default",fn:function({popoverHandler:a}){return[t("button",{directives:[{name:"track",rawName:"v-track:showUserShortProfile.click",arg:"showUserShortProfile",modifiers:{click:!0}}],class:e.ceptClass,on:{click:function(e){return a(e)}}},[t("UserAvatar",{staticClass:"img space--mr-2",attrs:{user:e.user}})],1)]}}])}),t("UserLink",{attrs:{user:e.user}})],1)}),[],!1,null,null,null).exports,H=a(551),G=a.n(H),K={components:{CarouselContent:z.b,UserSearchResultsItem:$},props:{users:{type:Array,required:!0},listLength:{type:Number,required:!0}},computed:{chunkedUsers(){return G()(this.users,this.listLength)}}},Y=Object(d.a)(K,(function(){var e=this,t=e._self._c;return t("CarouselContent",e._l(e.chunkedUsers,(function(a,s){return t("div",{key:s,staticClass:"card-space--h flex flex--shrink-0 flex--dir-col width--all-12 snap--as"},e._l(a,(function(e){return t("UserSearchResultsItem",{key:e.user_id,staticClass:"card-itemSpace",attrs:{user:e}})})),1)})),0)}),[],!1,null,null,null),X=Y.exports,J={components:{CarouselContent:z.b,CarouselPrev:z.g,CarouselNext:z.e,UserSearchResultsItem:$},props:{users:{type:Array,required:!0}}},Z=Object(d.a)(J,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex"},[t("CarouselPrev",{staticClass:"space--h-3 hide--touch-on"}),t("CarouselContent",e._l(e.users,(function(e){return t("UserSearchResultsItem",{key:e.user_id,staticClass:"space--h-3 snap--as",attrs:{user:e}})})),1),t("CarouselNext",{staticClass:"space--h-3 hide--touch-on"})],1)}),[],!1,null,null,null).exports;const Q=["user_id"],ee="userSearchResultsPortalSide",te="userSearchResultsPortalThread";var ae={components:{Widget:D.a,UserSearchResultsVertical:X,UserSearchResultsHorizontal:Z,BaseCarousel:z.a},mixins:[z.d,U.a],props:{users:{type:Array,required:!0}},computed:{preparedUsers(){return this.users.map((e=>{let{user_id:t}=e,a=R()(e,Q);return Object.assign({userId:t},a)}))},layout(){return this.$breakpoint.mdAndDown?"list":"side"},portalDestination(){return"list"===this.layout?te:ee},orientation(){return"list"===this.layout?"horizontal":"vertical"},listLength(){return this.currentOrientation.horizontal?1:8}}},se=Object(d.a)(ae,(function(){var e=this,t=e._self._c;return t("Portal",{attrs:{to:e.portalDestination}},[t("BaseCarousel",[t("Widget",{attrs:{"layout-mode":e.orientation},scopedSlots:e._u([{key:"WidgetHeader",fn:function(){return[t("strong",{staticClass:"card-title overflow--ellipsis width--max-12"},[e._v(" "+e._s("Resultados de usuarios")+" ")])]},proxy:!0},{key:"WidgetBody",fn:function(){return[t("div",["vertical"===e.orientation?t("UserSearchResultsVertical",{attrs:{users:e.preparedUsers,"list-length":e.listLength}}):e._e(),"horizontal"===e.orientation?t("UserSearchResultsHorizontal",{attrs:{users:e.preparedUsers}}):e._e()],1)]},proxy:!0}])})],1)],1)}),[],!1,null,null,null).exports,re=Object(d.a)({},(function(){return(0,this._self._c)("PortalTarget",{attrs:{name:"userSearchResultsPortalSide"}})}),[],!1,null,null,null).exports,ne=Object(d.a)({},(function(){return(0,this._self._c)("PortalTarget",{attrs:{name:"userSearchResultsPortalThread"}})}),[],!1,null,null,null).exports;const ie=e=>{let{beforeEnter:t,param:a,query:s}=e;return t(((e,t,a)=>null),[s("merchant-id"),a("type")])};a(618);const oe=e=>{let{beforeEnter:t,param:a,query:s}=e;return t(((e,t,a)=>{!t||x.d;return null}),[s("merchant-id"),a("type")])};var le=a(614),ce=a(665);const ue=e=>{let{beforeEnter:t}=e;const{data:a}=t((e=>{var t;const a={sortBy:null==e?void 0:e.sortBy,layout:null==e?void 0:e.layout,filters:null==e?void 0:e.filters,page:null==e||null===(t=e.pagination)||void 0===t?void 0:t.currentPage};return e?a:function(){const e=b.l.currentRoute.params.type===x.f?v.Ab.Discussion:v.Ab.Deal,t=Object(_.c)({queries:[v.db],merge:!0}),{q:a,page:s,layout:r}=b.l.currentRoute.query;return t({q:a,type:e,filters:{},page:s||1,layout:r||v.Q.List}).then((e=>e.request)).then((e=>({sortBy:e.sortBy,filters:e.filters,layout:e.layout,page:e.page})))}()}),[]);return a.value};var de=a(1092),pe=a(980).a,he=(a(1121),Object(d.a)(pe,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return e.$breakpoint.mdAndDown?t("div",{staticClass:"floating-button-container"},[t(a.BaseButton,{attrs:{variant:"secondary",mode:"default"},on:{click:function(e){a.showModal=!a.showModal}}},[t("BaseIcon",{attrs:{name:"filter"}}),t("span",{staticClass:"space--l-1"},[e._v(e._s("Filtrar")+" "),a.chipsCount?t("span",{staticClass:"space--ml-1 circle--s subNavMenu-roundCounter-text bg--color-brandPrimary"},[e._v(e._s(a.chipsCount))]):e._e()])],1),t("div",{staticClass:"floating-button aGrid--fixed"},[a.isVisible&&!a.showModal?t("Transition",{attrs:{appear:"","enter-active-class":"animation--appearFromBottomFast","leave-active-class":"animation--hideToBottomFast"}},[t(a.BaseButton,{attrs:{variant:"secondary",mode:"default"},on:{click:function(e){a.showModal=!a.showModal}}},[t("BaseIcon",{attrs:{name:"filter"}}),t("span",{staticClass:"space--l-1"},[e._v(e._s("Filtrar")+" "),a.chipsCount?t("span",{staticClass:"space--ml-1 circle--s subNavMenu-roundCounter-text bg--color-brandPrimary"},[e._v(e._s(a.chipsCount))]):e._e()])],1)],1):e._e()],1),a.showModal?t(a.BaseModal,{attrs:{active:a.showModal,"min-height":"60vh",layout:"bottomSheet"},on:{"update:active":function(e){a.showModal=e}},scopedSlots:e._u([{key:"default",fn:function({close:s}){return[t(a.ModalHead,{attrs:{icon:"filter","center-title":""}},[e._v(e._s("Filtros"))]),t(a.ModalBody,{staticClass:"page-divider"},[t(a.DetailedFilter,{staticClass:"space--mb-7",attrs:{"mobile-view":""}}),t("div",{staticClass:"zIndex--above aGrid--fixed aGrid-item--b-0 aGrid-item--l-0 width--all-12 space--h-3 space--v-3 bg--color-white page-divider"},[t(a.BaseButton,{staticClass:"width--all-12 flex",attrs:{variant:"primary",mode:"brand"},on:{click:s}},[a.isThreadsLoading?t(a.BaseSpinner,{staticClass:"spinner--centered"}):t("span",[e._v(e._s(a.seeTotalThreads))])],1)],1)],1)]}}],null,!1,3768303420)}):e._e()],1):e._e()}),[],!1,null,"40255fcd",null).exports),me=a(507),fe=a(1122),ve=Object(s.defineComponent)({__name:"filters-chips",setup(e){const t=Object(f.k)(),a=Object(s.reactive)({chipsSet:[]}),r=Object(s.computed)((()=>t.state.threadSearch.filters)),n=e=>{const t=a.chipsSet.findIndex((t=>t.fieldName===e.fieldName));if(!e.label){if(-1===t)return;return a.chipsSet.splice(t,1)}if(-1===t)return a.chipsSet.push(e);a.chipsSet.map((t=>{t.fieldName===e.fieldName&&(t.label=e.label,t.fields=e.fields)}))},i=e=>{switch(e){case f.b.Temperature:n(Object(fe.f)());break;case f.b.Price:n(Object(fe.c)());break;case f.b.TimeFrame:n(Object(fe.a)());break;case f.b.Retailers:n(Object(fe.d)());break;case f.b.Groups:n(Object(fe.b)());break;case f.b.SearchFields:n(Object(fe.e)());break;case f.b.ThreadType:n(Object(fe.g)())}},o=()=>{for(const e of Object.keys(r.value))r.value[e]&&i(e);t.dispatch("threadSearch/".concat(f.a.SetChipsCount),a.chipsSet.length)};return Object(s.watch)((()=>r.value),(()=>{o()}),{deep:!0}),{__sfc:!0,store:t,state:a,filters:r,removeChip:e=>{const s=a.chipsSet[e];t.dispatch("threadSearch/".concat(f.a.RemoveFilter),s.fields),a.chipsSet.splice(e,1)},resetFilters:()=>{const e=a.chipsSet.map((e=>e.fields)).flat();t.dispatch("threadSearch/".concat(f.a.RemoveFilter),e),a.chipsSet=[]},addChipToSet:n,prepareChips:i,makeChips:o,BaseButton:me.a}}}),ge=Object(d.a)(ve,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[e._l(a.state.chipsSet,(function(s,r){return t(a.BaseButton,{key:r,staticClass:"space--mt-2 space--mr-1 width--max-ctrl",attrs:{variant:"secondary",mode:"default",selected:"",title:s.label},on:{click:function(e){return a.removeChip(r)}}},[t("span",{staticClass:"space--mr-2 overflow--ellipsis"},[e._v(" "+e._s(s.label)+" ")]),t("BaseIcon",{attrs:{name:"cross"}})],1)})),a.state.chipsSet.length?t(a.BaseButton,{staticClass:"space--ml-2",attrs:{variant:"text",mode:"primary"},on:{click:a.resetFilters}},[e._v(" "+e._s("Restablecer")+" ")]):e._e()],2)}),[],!1,null,null,null).exports,be=a(515),ye=a(509),_e=a(554),xe=a(538),Ce=a(666),ke=a(548),we=Object(s.defineComponent)({__name:"sort-by",setup(e){const{params:t}=Object(I.a)(),a=Object(s.ref)(!1),r=Object(s.ref)(),n=Object(s.computed)((()=>{const e=y.a.getters["threadSearch/getSortingOptions"];return e?e.map((e=>({text:e.name,value:e.key,selected:e.selected}))):[]})),i=Object(s.computed)((()=>{if(1===y.a.state.threadList.pagination.count)return t.type===x.f?"1 discusión":"1 chollo";const e=t.type===x.f?"Temas de discusión":"Ofertas",a=Object(ke.a)(y.a.state.threadList.pagination.count);return"".concat(a," ").concat(e.toLowerCase())})),{components:{ModalHead:o,ModalBody:l}}=Ce.a,u=e=>e.find((e=>e.selected)),d=Object(s.reactive)({selectedOption:u(n.value)});Object(s.watch)(n,(e=>{d.selectedOption=u(e)}));return{__sfc:!0,currentRouteParams:t,showModal:a,sortingModal:r,mappedSortingOptions:n,totalThreadsMessage:i,ModalHead:o,ModalBody:l,detectSelectedOption:u,state:d,handleSortBySelect:e=>{y.a.dispatch("threadSearch/".concat(f.a.UpdateSortBy),{fieldName:f.c.SortBy,fieldValue:e.target.value})},handleSortByRadio:e=>{r.value.close(),y.a.dispatch("threadSearch/".concat(f.a.UpdateSortBy),{fieldName:f.c.SortBy,fieldValue:e})},FormContent:ye.c,FormList:ye.l,FormRadio:ye.n,FormRow:ye.o,CustomSelect:_e.a,BaseModal:xe.a,BaseButton:c.a}}}),Oe=Object(d.a)(we,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:sortOptions",arg:"sortOptions"}],staticClass:"flex boxAlign-ai--all-c",class:e.$breakpoint.mdAndUp?"boxAlign-jc--all-sb":""},[t("span",{staticClass:"text--color-charcoalTint size--all-m",class:e.$breakpoint.mdAndUp?"":"space--mr-1"},[e._v(" "+e._s(a.totalThreadsMessage)+" ")]),e.$breakpoint.mdAndUp?t("div",{staticClass:"flex boxAlign-ai--all-c"},[t("span",{staticClass:"size--all-m text--b text--color-charcoalTint overflow--wrap-off space--r-2"},[e._v(" "+e._s("Ordenar por")+": ")]),t("div",{staticClass:"width--ctrl-m"},[t(a.CustomSelect,{directives:[{name:"track",rawName:"v-track:select.change",value:{selection:a.state.selectedOption.value},expression:"{ selection: state.selectedOption.value }",arg:"select",modifiers:{change:!0}}],attrs:{value:a.state.selectedOption.value,options:a.mappedSortingOptions},on:{change:a.handleSortBySelect}})],1)]):t(a.BaseButton,{staticClass:"text--color-charcoalTint",on:{click:function(e){a.showModal=!a.showModal}}},[e._v(" "+e._s("Ordenado por")+" "),t("span",{staticClass:"text--b space--mr-2 space--ml-2"},[e._v(e._s(a.state.selectedOption.text))]),t("BaseIcon",{attrs:{name:"down"}})],1),a.showModal?t(a.BaseModal,{ref:"sortingModal",attrs:{active:a.showModal,layout:"bottomSheet"},on:{"update:active":function(e){a.showModal=e}},scopedSlots:e._u([{key:"default",fn:function({}){return[t(a.ModalHead,{attrs:{"center-title":""}},[e._v(e._s("Ordenar por"))]),t(a.ModalBody,[t(a.FormList,{attrs:{wide:""}},e._l(a.mappedSortingOptions,(function(s,r){return t(a.FormRow,{key:r},[t(a.FormContent,{staticClass:"flex boxAlign-jc--all-sb"},[t(a.FormRadio,{directives:[{name:"track",rawName:"v-track:radio.click",value:{selection:s.value},expression:"{ selection: option.value }",arg:"radio",modifiers:{click:!0}}],staticClass:"width--all-12",attrs:{large:"",name:s.value,value:s.value},on:{change:a.handleSortByRadio},model:{value:a.state.selectedOption.value,callback:function(t){e.$set(a.state.selectedOption,"value",t)},expression:"state.selectedOption.value"}},[t("span",{staticClass:"size--all-s"},[e._v(e._s(s.text))])])],1)],1)})),1)],1)]}}],null,!1,1881792193)}):e._e()],1)}),[],!1,null,null,null).exports,je=Object(s.defineComponent)({__name:"listing-options",setup(e){const{query:t}=Object(I.a)(),a=Object(s.computed)((()=>(null==t?void 0:t.q)||"")),r=Object(s.computed)((()=>y.a.state.threadSearch.loading)),n=Object(s.computed)((()=>y.a.state.threadList.pagination.current>1));return{__sfc:!0,query:t,searchTerm:a,isThreadsLoading:r,isPaginated:n,paginationUpdateHandler:e=>{y.a.dispatch("threadSearch/updateSearchState",{fieldName:"page",fieldValue:Number(e)}),window.scrollTo(0,0)},FiltersChips:ge,BaseSpinner:be.a,ThreadListingPagination:le.a,SortBy:Oe}}}),Se=Object(d.a)(je,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{directives:[{name:"track",rawName:"v-track:search",value:{term:a.searchTerm},expression:"{ term: searchTerm }",arg:"search"}],staticClass:"space--b-2 space--t-2"},[a.isThreadsLoading?t(a.BaseSpinner,{staticClass:"spinner--centered spinner--centered--top spinner--size-huge"}):e._e(),t(a.SortBy),t(a.FiltersChips),a.isPaginated?t(a.ThreadListingPagination,{attrs:{"ellipsis-style":{left:"space--mr-0",right:"space--ml-0"}},on:{update:a.paginationUpdateHandler}}):e._e()],1)}),[],!1,null,null,null).exports;g.a.add({TagsCarousel:F.a,UserSearchResultsWidget:se,UserSearchResultsWidgetPortalSide:re,UserSearchResultsWidgetPortalThread:ne,ThreadListingPagination:le.a,RLPBanner:p});const Te=e=>({baseLayout:Object(r.b)(e),hottestWidget:oe(e),rlpBanner:ie(e),threadMainList:Object(ce.b)(e),threadSearch:ue(e)}),Pe={routeData:Te};var Be=Object(s.defineComponent)(Object.assign({},Pe,{__name:"thread-search",setup(e){const t="referral-offer",{query:a,params:c}=Object(I.a)(),{baseLayout:u,hottestWidget:{data:d},rlpBanner:{data:m},threadMainList:f,threadSearch:v}=Object(i.c)(),g=Object(s.computed)((()=>{var e,t;return null===(e=d.value)||void 0===e||null===(t=e.layout)||void 0===t?void 0:t.display})),b=Object(s.computed)((()=>c.type===t)),y=Object(s.computed)((()=>v.filters&&!b.value));return A((()=>({sortBy:v.sortBy,layout:v.layout,filters:v.filters,page:v.page}))),Object(h.a)(f.pagination.data),Object(E.e)((()=>a["merchant-id"]),(()=>Object(N.a)(u.cookiePolicy.data))),{__sfc:!0,routeData:Te,referralCampaignTerm:t,query:a,params:c,baseLayout:u,hottestWidgetData:d,rlpBannerData:m,threadMainList:f,threadSearch:v,showHottestWidget:g,isReferralOfferTab:b,isDetailedFilterEnabled:y,DetailedFilter:de.a,DetailedFilterPopover:he,ListingOptions:Se,BaseLayout:r.a,ThreadMainList:n.a,HottestWidgetV2:o.a,TwigPortal:l.a,RLPBanner:p,ReferralCampaignModal:L.a}}})),Ae=Object(d.a)(Be,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.BaseLayout,{attrs:{twig:"","route-data":a.baseLayout}},[a.showHottestWidget?t(a.TwigPortal,{attrs:{to:"#storeHottestWidgetPortal",lazy:""}},[t(a.HottestWidgetV2,{staticClass:"listLayout-scrollBox",attrs:{"use-no-follow-links":a.hottestWidgetData.nofollow,"default-selected-time-range":a.hottestWidgetData.selected.value,scope:a.hottestWidgetData.scope,threads:a.hottestWidgetData.threads}})],1):e._e(),a.rlpBannerData?t(a.TwigPortal,{attrs:{to:"#rlpBannerPortal",lazy:""}},[t(a.RLPBanner,{attrs:{merchant:a.rlpBannerData}})],1):e._e(),t(a.ThreadMainList,{attrs:{"route-data":a.threadMainList}}),t(a.ReferralCampaignModal),a.isDetailedFilterEnabled?t(a.TwigPortal,{attrs:{to:"#detailedFilterPopoverPortal"}},[t(a.DetailedFilterPopover)],1):e._e(),a.isDetailedFilterEnabled?t(a.TwigPortal,{attrs:{to:"#detailedFilterPortal"}},[t(a.DetailedFilter)],1):e._e(),a.isDetailedFilterEnabled?t(a.TwigPortal,{attrs:{to:"#listingOptionsPortal"}},[t(a.ListingOptions)],1):e._e()],1)}),[],!1,null,null,null);t.default=Ae.exports},132:function(e,t,a){"use strict";var s=a(19),r=a(179);let n={};const i="scroll-vector";n.on=(e,t)=>{let a=e.data(i);if(!a){const t=new r.a.Speed(e.scrollTop());let n,o;e[0]===window?(n=(e,a)=>{t.set(a.scrollTop)},o="throttledScroll"):(n=s.a.rafThrottle((()=>{t.set(e.scrollTop())})),o="scroll"),a={speed:t,handler:n,eventName:o},e.on(o,n),e.data(i,a)}return a.speed.observe(t),a.speed},n.off=(e,t)=>{const a=e.data(i);a&&(a.speed.detach(t),a.speed.callbacks.length||e.off(a.eventName,a.handler).data(i,null))},t.a=n},150:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(5),r=a(4);const n=()=>({currentUser:Object(s.computed)((()=>r.a.getters["auth/me"])),isLoggedIn:Object(s.computed)((()=>r.a.getters["auth/loggedIn"]))})},151:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(5),r=a(16),n=a(4);const i=(e,t)=>{let a=0;const i=Object(s.ref)(!1);return function(l){if(++a>1)return;let c;return Object(s.onUnmounted)((()=>{var t;--a>0||!i.value||(o("".concat(e,"/tearDown")),null===(t=c)||void 0===t||t(),n.a.unregisterModule(e))})),Object(r.e)(l,(s=>{if(s&&0!==a){if(i.value)return o("".concat(e,"/replace"),s);n.a.registerModule(e,t(s,(e=>c=e))),i.value=!0}})),i}};function o(e,t){e in n.a._actions&&n.a.dispatch(e,t)}},152:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return p}));var s=a(4),r=a(6),n=a(1);const i=Object(r.c)({queries:[n.T],merge:!0});var o=a(26),l=a(28);const c=Object(l.a)(),u=async function(){var e;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])return c.promise;const t=await i({}).then((e=>e.request)).then((e=>{let{settings:t,features:a}=e;return{settings:t,features:a}})),{faye:{token:a}}=t.settings,r=t.features.faye,n="live/es".replace("/","-"),o=null===(e=s.a.getters["auth/me"])||void 0===e?void 0:e.userId,l=s.a.getters["auth/loggedIn"];return d({token:a,url:"https://faye.prod-eks.pepper.com/faye",waitToConnect:l?2e3:1e4,userId:o,env:n,isEnabled:r}),c.promise},d=async e=>{let{userId:t,env:s,token:r,url:n,isEnabled:i,waitToConnect:u}=e;const d=!Object(o.b)(navigator.userAgent);Boolean(d&&s&&i&&r&&n)&&(await Object(l.d)(u),a.e(166).then(a.t.bind(null,1215,7)).then((e=>{const a=new e.Client(n);a.env=s,t&&(a.userId=t,a.addExtension({outgoing:(e,a)=>{"/meta/subscribe"===e.channel&&(e.ext=e.ext||{},e.ext.token=r,e.ext.userId=t),a(e)}})),c.resolve({client:a})})))},p=(e,t)=>({channel:e,keepAlive:t,handle:void 0,userId:void 0,timeout:void 0,async open(e){if(this.isOpen())return;const{client:t}=await c.promise;this.handle=e,this.userId=t.userId,t.subscribe("/".concat(this.channel,"/").concat(t.env),this.handle),this.keepAlive&&(this.timeout=setTimeout(this.close.bind(this),this.keepAlive))},async close(){if(!this.isOpen())return;const{client:e}=await c.promise;this.userId=void 0,this.handle=void 0,this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),e.unsubscribe("/".concat(this.channel,"/").concat(e.env),this.handle)},isOpen(){return void 0!==this.handle}})},153:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return u}));var s=a(4),r=a(41),n=a(152),i=a(156),o=a(94);const l=()=>{s.a.dispatch("auth/tearDown"),sessionStorage.removeItem(r.a)},c=async()=>{try{await Object(r.c)(),l(),location.href="/",localStorage.removeItem(i.a),Object(o.a)()}catch(e){}},u=async()=>{const{client:e}=await Object(n.b)();e.userId&&e.subscribe("/private/user/".concat(e.env,"/").concat(e.userId,"/updates"),(e=>{switch(e.notificationType){case"unseenConversationCount":s.a.commit("auth/UPDATE_CONVERSATION_COUNTS",{unseen:e.unseenConversationCount});break;case"newActivitiesCount":s.a.commit("auth/UPDATE_NOTIFICATION_COUNTS",{new:e.newActivitiesCount})}}))}},154:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var s=a(5),r=a(24),n=a(151);function i(e){return{allowFunctionalityCookies:null==e?void 0:e.allowFunctionalityCookies,cookieMessage:null==e?void 0:e.cookieMessage,allowTracking:null==e?void 0:e.allowTracking,allowPersonalization:null==e?void 0:e.allowPersonalization,gaCookiesAsAnalytical:null==e?void 0:e.gaCookiesAsAnalytical}}const o={settings:e=>{let{allowFunctionalityCookies:t,allowTracking:a,allowPersonalization:s}=e;return{allowFunctionalityCookies:t,allowTracking:a,allowPersonalization:s}},isAllAccepted:e=>{let{allowFunctionalityCookies:t,allowTracking:a,allowPersonalization:s}=e;return t&&a&&s},cookieMessage:e=>{let{cookieMessage:t}=e;return t}},l={setAll(e,t){let{commit:a,getters:s}=e;const r=s.settings;return a("MERGE",Object.fromEntries(Object.keys(r).map((e=>[e,t]))))},set(e,t){let{commit:a}=e;return a("MERGE",t)},replace(e,t){let{commit:a}=e;return a("REPLACE",t)}},c={MERGE(e,t){Object.assign(e,t)},REPLACE(e,t){Object.assign(e,i(t))}};const u=Object(n.a)("cookiePolicy",(e=>({namespaced:!0,state:i(e),mutations:c,actions:l,getters:o})));function d(e){const{cookieMessage:t}=e.value,a=Object(s.computed)((()=>t&&!r.b));return u(e),{showCookiesMessage:a}}},155:function(e,t,a){"use strict";a.d(t,"b",(function(){return f.b})),a.d(t,"a",(function(){return O}));var s=a(21),r=a(13),n=a(86),i=a.n(n);function o(e){var t;if("view"!==e.type||"thread"!==e.target.name)return e;const a=null===(t=e.target.data)||void 0===t?void 0:t.id;if(!a){if(!p)throw Error("Missing thread id: ".concat(Object(r.f)(e.context)));return}if(e.simulate)return l(e);const s=Object(r.f)(e.context)+location.href;return u.has(s)?u.get(s).target.data.ids+=".".concat(a):u.set(s,l(e)),d(),null}const l=e=>({type:"view",target:{name:"threads",data:{ids:e.target.data.id}},context:e.context,services:e.services,interaction:!1});function c(){for(const[e,t]of u)Object(f.b)(t),u.delete(e)}const u=new Map,d=i()(c,1e3),p=!0;window.addEventListener("pagehide",c);var h=a(78),m=a(63),f=a(96),v=a(5),g=a(29);const b=new WeakMap,y=new WeakMap,_={bind:function(e,t){let{arg:a,value:s,modifiers:r}=t;y.set(e,(y.get(e)||0)+1),Object(g.d)(e)&&(Object(m.g)(e),b.delete(e));const n=Object.keys(r);n.length?(Object(m.b)(e,n,a,s),b.set(e,n.join(","))):Object(g.f)(e,a,s)},update:function(e,t){const a=Object.keys(t.modifiers).join(",");if((b.get(e)||"")!==a)return;const{arg:s,value:r}=t;Object(g.f)(e,s,r)},unbind:function(e){const t=y.get(e)-1;y.set(e,t),t>0||"#comment"===e.nodeName||Object(m.g)(e)}};v.default.directive("track",_);var x=a(55),C=a(49),k=a(24);function w(){!function(){const e="";if(k.b||!e||!x.a)return;Object(x.d)(e),Object(x.c)(e,{user_id:Object(C.d)()})}(),function(){const e="",t=0;if(k.b||!e)return;Object(x.d)(e),Object(x.c)(e,{sample_rate:t,groups:"errors",user_id:Object(C.d)()})}()}function O(){s.l.onReady((()=>{Object(f.a)(o),Object(m.f)(f.b),Object(h.a)(),w()})),window.__pepperTrack=async()=>{(await a.e(199).then(a.bind(null,1321))).init()}}},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var s=a(5),r=a(150);const n="hide_latest_news_widget",i=e=>{const{isLoggedIn:t}=Object(r.a)(),a=Object(s.computed)((()=>{var t,a;return null===(t=e.value)||void 0===t||null===(a=t.settings)||void 0===a?void 0:a.displayedForGuests})),n=Object(s.computed)((()=>{var t;return(null==e||null===(t=e.value)||void 0===t?void 0:t.items.map(((e,t)=>Object.assign({index:t+1},e))))||[]}));return{showWidget:Object(s.computed)((()=>{var e;return!(null===(e=n.value)||void 0===e||!e.length)&&(!a.value||!t.value)})),news:n}}},157:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));a(49);const s=()=>Promise.all([a.e(169),a.e(135)]).then(a.bind(null,314)),r=()=>!1;function n(e){r()&&s().then((t=>{let{trackRecombee:a}=t;return a(e)}))}function i(e,t){r()&&s().then((a=>{let{trackRecombeeVisit:s}=a;return s(e,t)}))}},158:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var s=a(55),r=a(13);const n=e=>Object.entries(e).map((e=>{let[t,a]=e;return"".concat(t,":").concat(a)})).join(",");function i(e){const t=Object(r.b)({},e);return{event_category:Object(r.f)(e.context),event_label:n(t),non_interaction:!e.interaction}}function o(e){Object(s.b)("event",Object(r.e)(e),i(e))}},159:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var s=a(13),r=a(121);function n(e){Object(r.a)("event",Object(s.e)(e))}function i(e){Object(r.a)("stateChange",e)}},160:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(4),r=a(90),n=a(13),i=a(154);function o(e){e&&Object(i.a)(e),Object(r.b)(l())}const l=()=>({type:"view",target:{name:"page",data:null},context:[{name:"listing",data:{view:s.a.state.application.threadListingMode}}],interaction:!1,services:[n.a.Ocular]})},179:function(e,t,a){"use strict";var s=a(10),r=a.n(s),n=a(11),i=a.n(n),o={},l=1e3,c=6e4,u=36e5,d=24*u;o.remaining=function(e){var t=new Date(e)-Date.now();return t<0&&(t=0),{days1:Math.floor(t/d/10),days2:Math.floor(t/d)%10,hours1:Math.floor(t%d/u/10),hours2:Math.floor(t%d/u)%10,minutes1:Math.floor(t%u/c/10),minutes2:Math.floor(t%u/c)%10,seconds1:Math.floor(t%c/l/10),seconds2:Math.floor(t%c/l)%10}},o.Speed=function(){function e(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;r()(this,e),this.factor=a,this.time=Date.now(),this.value=t,this.speed=0,this.callbacks=[]}return i()(e,[{key:"set",value:function(e){if(this.value!==e){const t=Date.now();this.speed=this.factor*(e-this.value)/(t-this.time),this.time=t,this.value=e,this.callbacks.forEach(this.trigger,this)}return this}},{key:"trigger",value:function(e){return e(this.speed,this),this}},{key:"observe",value:function(e){return this.callbacks.push(e),this}},{key:"detach",value:function(e){const t=this.callbacks.indexOf(e);return t>-1&&this.callbacks.splice(t,1),this}}]),e}(),t.a=o},180:function(e,t,a){"use strict";var s=a(10),r=a.n(s),n=a(11),i=a.n(n),o=a(3);let l=function(){function e(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.cachedRect(t[0],!0);r()(this,e),this.$elem=t,this.set(s,a)}return i()(e,[{key:"set",value:function(e,t){this.rect=e.move(0,t)}},{key:"get",value:function(e){const t=o.a.cachedRect(this.$elem[0]);return t.cached||this.set(t,e),this.rect.move(0,-e)}}]),e}();t.a={ScrollRect:l}},181:function(e,t,a){"use strict";var s=a(10),r=a.n(s),n=a(11),i=a.n(n),o=a(0),l=a.n(o),c=a(3),u=a(89),d=a(132),p=a(180),h=a(30),m=a(2);const f="scroll-trigger",v="js-".concat(f),g="".concat(f,"-instance"),b=[];let y=function(){function e(t){r()(this,e);let a=t.data(g);return a||(a=this,a.$elem=t,a.elem=t[0],a.cache=a.elem===window,a.elemRect=(a.cache?c.a.cachedRect:c.a.rect).bind(null,a.elem),t.data(g,a),this.destroyed=!0),a.destroyed&&(b.push(a),a.destroyed=!1,a.ungrouped=[],a.grouped={},a.scrollSpeed=d.a.on(a.$elem,u.a.boundMethod(a,"scrollHandler"))),a}return i()(e,[{key:"add",value:function(e){const t=e.options.group;t?(this.grouped[t]||(this.grouped[t]=[])).push(e):this.ungrouped.push(e)}},{key:"remove",value:function(e){const t=e.options.group?this.grouped[e.options.group]||[]:this.ungrouped,a=t.indexOf(e);a>-1&&t.splice(a,1)}},{key:"destroy",value:function(){b.splice(b.indexOf(this),1),d.a.off(this.$elem,u.a.boundMethod(this,"scrollHandler")),this.destroyed=!0}},{key:"scrollHandler",value:function(){this.scrollUpdate()}},{key:"scrollUpdate",value:function(){const t=this.elemRect();this.ungrouped.slice().forEach((a=>{e.conditions[a.options.condition](a,t)})),Object.keys(this.grouped).forEach((a=>{const s=this.grouped[a];s.length&&e.conditions[s[0].options.condition](s,t)}))}}]),e}();y.conditions={inView(e,t){const{duration:a=.5,limit:s=2500}=e.options.args,r=e.rect(),n=e.container.scrollSpeed.speed,i=Math.min(n*a,s),o=t.add(i<0?i:0,0,i>0?i:0,0);e.setActive(Boolean(o.intersection(r).area()))},closest(e,t){const{boundary:a=0}=e[0].options.args,s=t.top+a*t.height()/100;let r=1/0,n=-1/0,i=null;e.forEach((e=>{const t=s-e.rect().top;t<r&&(t>0?(r=t,i=e):r===1/0&&t>n&&(n=t,i=e))})),i.active||e.forEach((e=>{e.setActive(e===i)}))},inArea(e){Array.isArray(e)||(e=[e]);const{top:t=0,bottom:a=0}=e[0].options.args;e.forEach((e=>{const{top:s}=e.elem.getBoundingClientRect();!e.active&&s>t&&s<a?e.setActive(!0):e.setActive(!1)}))},wrapsArea(e){Array.isArray(e)||(e=[e]);let{top:t=0,bottom:a}=e[0].options.args;a||(a=t),e.forEach((e=>{const{top:s,bottom:r}=e.rect();e.setActive(r>t&&s<a)}))}};let _=function(){function e(t){r()(this,e);let a=t.data(g);if(!a){a=this;const s=m.a.params(f,t);a.$elem=t,a.elem=t[0],a.active=!1,a.destroyed=!1,a.options=l.a.extend(!0,{},e.defaults,s);const r=a.options;r.container&&(r.$container=c.a.findTargets(t,r.container),delete r.container),t.data(g,a)}return a.container=new y(a.options.$container),a.container.add(a),a.container.cache&&(a.scrollRect=new p.a.ScrollRect(a.$elem,a.container.scrollSpeed.value)),a}return i()(e,[{key:"rect",value:function(){return this.container.cache?this.scrollRect.get(this.container.scrollSpeed.value):c.a.rect(this.elem)}},{key:"destroy",value:function(){this.container.remove(this),this.$elem.removeClass(v),this.$elem.data(g,null),this.$elem=null,this.elem=null,this.destroyed=!0}},{key:"setActive",value:function(e){if(!this.destroyed&&this.active!==e){const t=this.options,a=t[e?"onEvent":"offEvent"];t.onClass&&this.$elem.toggleClass(t.onClass,e),t.offClass&&this.$elem.toggleClass(t.offClass,!e),a&&c.a.findTargets(this.$elem,t.target).triggerAll(a,t.eventParams),e&&t.oneOff&&this.destroy(),this.active=e}}},{key:"scrollUpdate",value:function(){y.conditions[this.options.condition](this,this.container.elemRect())}}]),e}();function x(){if(!h.a.badScrollPerformance()){const e=l()(".".concat(v));e.toArray().forEach((e=>new _(l()(e)))),e.removeClass(v),setTimeout((()=>{b.forEach((e=>{e.scrollUpdate()}))}),0)}}_.defaults={$container:c.a.$win,target:"$self",condition:"inView",args:{},eventParams:{}},c.a.$win.on("debouncedDomChanged",x),t.a={initAll:x,ScrollTrigger:_,DIRECTIVE_NAME:f}},241:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return l}));const s=e=>{"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()},r=(e,t,a)=>{new IntersectionObserver(((e,a)=>{e.forEach((e=>{e.isIntersecting&&(a.unobserve(e.target),t(e.target))}))}),a).observe(e)},n=(e,t,a)=>(e.addEventListener(t,a),()=>e.removeEventListener(t,a));let i=0;function o(e){i+=e?1:-1,1===i&&document.body.classList.add("overflow--hidden"),0===i&&document.body.classList.remove("overflow--hidden")}function l(e,t){const a=document.createElement(t);for(const t of e.attributes)a.setAttributeNS(null,t.name,t.value);for(;e.firstChild;)a.appendChild(e.firstChild);return e.replaceWith(a),a}},242:function(e,t,a){"use strict";a.d(t,"a",(function(){return y})),a.d(t,"b",(function(){return k}));var s=a(5),r=a(4),n=a(64),i=a(207),o=a.n(i),l=a(21),c=a(0),u=a.n(c),d=a(2),p=a(181),h=a(65);const m=(()=>{let e=0,t=null;function a(){e>0||(t=setTimeout((()=>{window.prerenderReady=!0}),1e3))}return{add(){e+=1,clearTimeout(t)},remove(){e-=1,a()},checkReady:a}})();document.addEventListener("DOMContentLoaded",m.checkReady);var f=a(28),v=a(87);const g="vue2",b=n.a.get(),y=(()=>{let e={};const t=new h.a;return{add:a=>{Object.keys(a).forEach((s=>{s in e||(e[s]=a[s],t.fire(s))}))},get:function(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e4;return a in e?(r=e[a],"function"!=typeof r||r.extend?Promise.resolve(r):r().then((e=>e.default))).then((e=>Object(f.c)().then((()=>e)))):new Promise(((e,r)=>{setTimeout(r,s),t.one(a,(()=>e(y.get(a))))}));var r},reset:()=>e={}}})(),_=e=>e.data("vue-instance"),x=e=>{if(_(e))return;const{id:t,name:a,attrs:n,props:i,domProps:c,mapState:p,class:h,useStoreProps:f,vModel:x}=d.a.params(g,e),C=t||a;f&&!(C in r.a.state.component.state)&&r.a.dispatch("component/update",{id:C,props:i});const k=e=>p?Object.entries(p).reduce(((e,t)=>{let[a,s]=t;const r=o()(b,s);return void 0!==r&&(e[a]=r),e}),e||{}):e,w=y.get(a);w.catch((()=>{throw Error("Missing embed: ".concat(a))})),w.finally(m.remove);const O=w.then((t=>new s.default({el:e[0],name:"Wrapper:".concat(a),mixins:[f?{data:()=>({storeProps:Object.keys(i).reduce(((e,t)=>{const a="string"==typeof i[t]&&i[t]?i[t]:t;return Object.defineProperty(e,t,{get:()=>Object(v.c)(r.a.state.component.state[C].props)(a),set(e){r.a.commit("component/MERGE_FIELD",{path:"state.".concat(C,".props.").concat(a),value:e})},configurable:!0,enumerable:!0}),e}),{})})}:{}],store:r.a,router:l.l,async mounted(){u()(this.$el).trigger("domChanged")},render(e){const a=this;return e(t,{props:f?a.storeProps:k(i),attrs:n,domProps:c,class:h,on:f&&x?{update(e){a.storeProps[x]=e}}:{}})}})));e.data("vue-instance",O)},C=async e=>{if(e.data("vue-initialised"))return;const{lazy:t}=d.a.params(g,e);t?((e=>{d.a.updateParams(p.a.DIRECTIVE_NAME,e,{oneOff:!0,onEvent:"vueCreate"}),new p.a.ScrollTrigger(e).scrollUpdate()})(e),await Object(f.b)(),x(e)):x(e),m.add(),e.data("vue-initialised",!0)},k=()=>{u()(".js-vue2").toArray().map((e=>u()(e))).forEach(C)};document.addEventListener("DOMContentLoaded",k),d.a.add(g,"init",C),d.a.add(g,"vueCreate",x),d.a.add(g,"destroy",(async e=>{const t=await _(e);t&&t.$destroy()}))},29:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"g",(function(){return f}));var s=a(120),r=a(16),n=a(0),i=a.n(n);const o=!0;function l(e){return{name:e.dataset.t,data:b.get(e)||(e.dataset.tD?JSON.parse(e.dataset.tD):null)}}function c(e,t,a){v(t),e.dataset.t!==t&&(e.dataset.t=t),a?(g(a),b.set(e,a)):b.has(e)&&b.delete(e)}function u(e){delete e.dataset.t,b.delete(e)}function d(e){var t;return!(null==e||null===(t=e.dataset)||void 0===t||!t.t)}const p=e=>e.closest("[data-t]"),h=e=>m(e).map((e=>l(e)));function m(e){const t=[];for(;e;){d(e)&&t.unshift(e);const s=Object(r.a)(e,(e=>{var t;return!(null!==(t=e.$el)&&void 0!==t&&t.hasAttribute("track-pass-by"))}));if(s){t.unshift(...m(s.$el));break}if(e.classList.contains(".js-layer")){var a;const s=null===(a=i()(e).data("layer"))||void 0===a?void 0:a.$trigger[0];t.unshift(...m(s));break}e=e.parentElement}return t}function f(e){v(e.name),"data"in e&&g(e.data)}function v(e){if(!e)throw Error("Missing track context name");if(!o&&!Object(s.a)(e))throw Error("Invalid track context name: ".concat(e,", please use camel case"))}function g(e){if(null!==e){if("object"!=typeof e)throw Error("Track data must be object, but got: ".concat(e));if(!o){const t=Object.keys(e);if(!t.length)throw Error("Empty track data, please pass null instead");const a=t.filter((e=>!e||!Object(s.a)(e)));if(a.length)throw Error("Invalid track data keys: ".concat(a.join(","),", please use camel case"));const r=Object.values(e).filter((e=>"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e));if(r.length)throw Error("Invalid track data values: ".concat(r.join(","),", please use type string or number"))}}}const b=new WeakMap},507:function(e,t,a){"use strict";a.d(t,"a",(function(){return s.a})),a.d(t,"b",(function(){return u}));var s=a(510),r=a(5),n=a(511),i={__name:"notification-button",props:{count:{type:Number,default:0},square:Boolean,selected:Boolean,countTop:Boolean},setup(e){const t=e,a=Object(r.computed)((()=>({"button--square":t.square,"button--selected":t.selected})));return{__sfc:!0,props:t,buttonClasses:a,CircleLabel:n.a,BaseButton:s.a}}},o=a(44);Object(o.a)(i,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.BaseButton,e._g({staticClass:"overflow--visible",class:a.buttonClasses,attrs:{variant:"secondary",mode:"default"}},e.$listeners),[e._t("default"),e.count&&e.countTop||e.count&&e.square?t(a.CircleLabel,{staticClass:"text--b button--square space--h-0 aGrid-item aGrid-item--r-n7 aGrid-item--t-n7",attrs:{size:"xs",mode:"primary"}},[e._v(" "+e._s(e.count)+" ")]):e.count?t(a.CircleLabel,{staticClass:"text--b button--square space--h-0 space--ml-2",attrs:{size:"m",mode:"primary"}},[e._v(" "+e._s(e.count)+" ")]):e._e()],2)}),[],!1,null,null,null).exports;const l={brand:"button--mode-brand",white:"button--mode-white"};var c={__name:"segmented-button",props:{mode:{type:String,default:"brand",validate:e=>e in l},name:{type:String,required:!1},selectedValue:{type:String,required:!1},mandatory:Boolean},emits:["update:selectedValue"],setup(e,t){let{emit:a}=t;const s=e,n=Object(r.computed)((()=>l[s.mode])),i=Object(r.computed)((()=>s.name===s.selectedValue));return{__sfc:!0,modes:l,emit:a,props:s,mode:n,selected:i,toggle:function(){a("update:selectedValue",i.value&&!s.mandatory?null:s.name)}}}},u=Object(o.a)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("button",{staticClass:"button button--type-segmented",class:[a.mode,{"button--selected zIndex--atopNormal":a.selected}],attrs:{type:"button"},on:{click:a.toggle}},[e._t("default")],2)}),[],!1,null,null,null).exports},508:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return n.a})),a.d(t,"b",(function(){return i.a})),a.d(t,"e",(function(){return u})),a.d(t,"g",(function(){return p})),a.d(t,"h",(function(){return m})),a.d(t,"f",(function(){return f.a})),a.d(t,"i",(function(){return v.a})),a.d(t,"j",(function(){return b})),a.d(t,"c",(function(){return y}));var s=a(24),r={data:()=>({dom:{}}),computed:{applicationThreadListingMode(){return this.$store.state.application.threadListingMode||"list"},currentOrientation(){return{horizontal:"horizontal"===this.orientation,vertical:"vertical"===this.orientation}},isTouchScreen:()=>s.d}},n=a(558),i=a(559),o=a(507),l={components:{BaseButton:o.a},inject:["carousel"],inheritAttrs:!1,props:{hideOnLastPage:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},buttonModifier:{type:String,default:null}},methods:{handleClick(){this.carousel.isNext?this.carousel.next():this.carousel.scrollToPage(1)}}},c=a(44),u=Object(c.a)(l,(function(){var e=this,t=e._self._c;return!e.hideOnLastPage||e.carousel.isNext?t("BaseButton",e._b({staticClass:"size--all-m",class:e.buttonModifier,attrs:{square:"",disabled:!e.carousel.isNext&&!e.loop},on:{click:e.handleClick}},"BaseButton",e.$attrs,!1),[e._t("default",(function(){return[t("BaseIcon",{attrs:{name:"right"}})]}),{disabled:!e.carousel.isNext})],2):e._e()}),[],!1,null,null,null).exports,d={components:{BaseButton:o.a},inject:["carousel"],inheritAttrs:!1,props:{hideOnFirstPage:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},buttonModifier:{type:String,default:null}},methods:{handleClick(){this.carousel.isPrev?this.carousel.prev():this.carousel.scrollToPage(this.carousel.pages)}}},p=Object(c.a)(d,(function(){var e=this,t=e._self._c;return!e.hideOnFirstPage||e.carousel.isPrev?t("BaseButton",e._b({class:e.buttonModifier,attrs:{square:"",disabled:!e.carousel.isPrev&&!e.loop},on:{click:e.handleClick}},"BaseButton",e.$attrs,!1),[e._t("default",(function(){return[t("BaseIcon",{attrs:{name:"left"}})]}),{disabled:!e.carousel.isPrev})],2):e._e()}),[],!1,null,null,null).exports,h={components:{BaseButton:o.a},inject:["carousel"],inheritAttrs:!1,props:{page:{type:Number,required:!0},pages:{type:Number,required:!1}},computed:{carouselPagesCount(){return this.pages||this.carousel.pages},disabled(){return this.page<1||this.page>this.carouselPagesCount||this.page===this.carousel.page}}},m=Object(c.a)(h,(function(){var e=this;return(0,e._self._c)("BaseButton",e._b({staticClass:"size--all-m",attrs:{square:"",disabled:e.disabled},on:{click:function(t){return e.carousel.scrollToPage(e.page)}}},"BaseButton",e.$attrs,!1),[e._t("default",null,{disabled:e.disabled})],2)}),[],!1,null,null,null).exports,f=a(560),v=a(543),g={components:{BaseCarousel:n.a,CarouselContent:i.a,CarouselPrev:p,CarouselNext:u},props:{arrowsClass:{type:String,default:""}}},b=Object(c.a)(g,(function(){var e=this,t=e._self._c;return t("BaseCarousel",{scopedSlots:e._u([{key:"default",fn:function({page:a,pages:s}){return[t("div",{staticClass:"aGrid bg--color-white flex"},[t("CarouselPrev",{staticClass:"carousel-air-arrow space--ml-3 hide--touch-on",class:e.arrowsClass,attrs:{variant:"secondary",mode:"default",square:"","hide-on-first-page":""}},[t("BaseIcon",{attrs:{name:"left"}})],1),t("CarouselContent",{staticClass:"carousel-list--air",attrs:{"persistent-spacing":""}},[e._t("default")],2),t("CarouselNext",{staticClass:"carousel-air-arrow carousel-air-arrow--right space--mr-3 hide--touch-on",class:e.arrowsClass,attrs:{variant:"secondary",mode:"default",square:"","hide-on-last-page":""}},[t("BaseIcon",{attrs:{name:"right"}})],1)],1)]}}],null,!0)})}),[],!1,null,null,null).exports,y=Object(c.a)({},(function(){return(0,this._self._c)("div",{staticClass:"scrollBox-item"},[this._t("default")],2)}),[],!1,null,null,null).exports},510:function(e,t,a){"use strict";var s=a(32),r=a.n(s),n=a(5),i=a(541),o=a(515);const l=["tag"];var c=Object(n.defineComponent)({__name:"base-button",props:{variant:{default:"none"},mode:{default:"none"},size:{default:"none"},loading:{type:Boolean},selected:{type:Boolean},square:{type:Boolean},seal:{type:Boolean},disabled:{type:Boolean},ellipsis:{type:Boolean},wrap:{type:Boolean}},emits:["click","mousedown"],setup(e,t){let{emit:a}=t;const s=e,c=Object(n.ref)(null),u=Object(n.useAttrs)(),d=Object(i.a)(u),p=Object(n.computed)((()=>{const e=d.value;return r()(e,l)})),h=Object(n.computed)((()=>i.d[s.variant])),m=Object(n.computed)((()=>Object(i.b)(s.variant,s.mode)[s.mode])),f=Object(n.computed)((()=>i.c[s.size])),v=Object(n.computed)((()=>({"button--disabled":s.disabled,"button--sealed":s.seal||s.loading,"button--square":s.square,"button--selected":s.selected,"seal--cover aGrid":s.loading&&"none"===s.variant})));return{__sfc:!0,emit:a,props:s,buttonRef:c,attrs:u,config:d,computedConfig:p,variantClasses:h,modeClasses:m,sizeClasses:f,buttonClasses:v,handleClick:function(e){s.disabled||a("click",e)},BaseSpinner:o.a}}}),u=a(44),d=Object(u.a)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.config.tag,e._b({ref:"buttonRef",tag:"Component",class:[a.variantClasses,a.modeClasses,a.sizeClasses,a.buttonClasses],attrs:{disabled:e.disabled},on:{click:a.handleClick,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.handleClick.apply(null,arguments)},mousedown:function(t){return e.$emit("mousedown",t)}}},"Component",a.computedConfig,!1),[e.loading?t(a.BaseSpinner,{staticClass:"spinner--centered"}):e._e(),t("span",{staticClass:"flex--inline boxAlign-ai--all-c",class:{"mute--opacity-0":e.loading,"flex--width-calc-fix":e.ellipsis,"flex--wrap":e.wrap}},[e.ellipsis?t("span",{staticClass:"overflow--ellipsis"},[e._t("default")],2):e._t("default")],2),e._t("postfix")],2)}),[],!1,null,null,null);t.a=d.exports},511:function(e,t,a){"use strict";var s={props:{size:{type:String,required:!1,default:"m"},mode:{type:String,required:!1,default:"primary"}},computed:{sizeClasses(){return this.$options.classes.sizes[this.size]},modeClasses(){return this.$options.classes.modes[this.mode]}},classes:{sizes:{xs:"circle--xs",s:"circle--s",m:"circle--m",l:"circle--l"},modes:{alert:"bg--color-red",primary:"bg--color-brandPrimary","primary-inverted":"bg--color-white text--color-brandPrimary"}}},r=a(44),n=Object(r.a)(s,(function(){var e=this;return(0,e._self._c)("span",{class:[e.sizeClasses,e.modeClasses]},[e._t("default")],2)}),[],!1,null,null,null);t.a=n.exports},512:function(e,t,a){"use strict";var s=a(5),r=a(507),n=Object(s.defineComponent)({__name:"popover-close",setup:e=>({__sfc:!0,popover:Object(s.inject)("popover"),BaseButton:r.a})}),i=a(44),o=Object(i.a)(n,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.BaseButton,{attrs:{variant:"tertiary",mode:"default",size:"s",square:""},on:{click:t.popover.close}},[e("BaseIcon",{attrs:{name:"cross"}})],1)}),[],!1,null,null,null);t.a=o.exports},514:function(e,t,a){"use strict";var s=a(586),r=a.n(s),n=a(5),i=a(150),o=a(513);var l=a(541);var c=Object(n.defineComponent)(Object.assign({},{inheritAttrs:!1},{__name:"cloak-link",props:{to:null,target:{default:""},buttonTag:{default:"button"},cloak:{type:Boolean,default:!0},variant:{default:"none"},mode:{default:"none"}},emits:["click","mousedown"],setup(e,t){let{emit:a}=t;const s=e,c=Object(n.ref)(null),u=Object(n.useAttrs)(),d=Object(o.b)(),{isLoggedIn:p}=Object(i.a)(),{isUncloaked:h,tempTarget:m,uncloak:f,simulateClick:v}=function(e){const t=Object(n.ref)(!1),a=Object(n.ref)(!1),s=Object(n.ref)(!1),r=Object(n.ref)(""),i=()=>{a.value=!0};return Object(n.onMounted)((()=>{Object(n.watch)(e,(()=>{var t,a;(null!==(t=null===(a=e.value)||void 0===a?void 0:a.$el)&&void 0!==t?t:e.value).addEventListener("contextmenu",i)}))})),Object(n.onUnmounted)((()=>{var t,a;const s=null!==(t=null===(a=e.value)||void 0===a?void 0:a.$el)&&void 0!==t?t:e.value;s&&s.removeEventListener("contextmenu",i)})),{tempTarget:r,isUncloaked:t,uncloak:e=>{(1===e.button||e.metaKey||e.ctrlKey||e.shiftKey)&&(r.value="_blank"),t.value=!0},simulateClick:(e,t,i)=>{a.value||s.value||2===t.button||Object(n.nextTick)((()=>{e.click(),s.value=!0})),r.value=i}}}(c),g=Object(n.computed)((()=>"object"==typeof s.to)),b=Object(n.computed)((()=>s.cloak&&!p.value&&!h.value)),y=Object(n.computed)((()=>b.value?s.buttonTag:"a")),_=Object(n.computed)((()=>{const e=Object.assign({},(r()(u),u));return b.value&&"button"!==s.buttonTag&&(e.role="button"),e})),x=Object(n.computed)((()=>l.d[s.variant])),C=Object(n.computed)((()=>Object(l.b)(s.variant,s.mode)[s.mode]));return{__sfc:!0,props:s,emit:a,button:c,attrs:u,router:d,isLoggedIn:p,isUncloaked:h,tempTarget:m,uncloak:f,simulateClick:v,isRouterLink:g,isCloaked:b,component:y,buttonAttrs:_,variantClasses:x,modeClasses:C,getAttributes:function(e){return b.value?_.value:Object.assign({},_.value,{href:e,target:m.value||s.target||void 0})},handleClick:function(e,t){a("click",e),g.value&&d.push(t)},handleMousedown:e=>{a("mousedown",e),f(e)}}}})),u=a(44),d=Object(u.a)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return a.isRouterLink?t("RouterLink",{attrs:{to:e.to,custom:""},scopedSlots:e._u([{key:"default",fn:function(s){return[t(a.component,e._b({key:a.isUncloaked,ref:"button",tag:"Component",class:[a.variantClasses,a.modeClasses],on:{click:a.handleClick,"~mouseup":function(t){return t.preventDefault(),a.simulateClick(a.button,t,e.target)},"~mousedown":function(e){return e.preventDefault(),a.handleMousedown(e)}}},"Component",a.getAttributes(s.href),!1),[e._t("default",null,null,a.props)],2)]}}],null,!0)}):t(a.component,e._b({key:a.isUncloaked,ref:"button",tag:"Component",class:[a.variantClasses,a.modeClasses],on:{click:a.handleClick,"~mouseup":function(t){return t.preventDefault(),a.simulateClick(a.button,t,e.target)},"~mousedown":function(e){return e.preventDefault(),a.handleMousedown(e)},"~contextmenu":function(e){return a.uncloak.apply(null,arguments)}}},"Component",a.getAttributes(e.to),!1),[e._t("default")],2)}),[],!1,null,null,null);t.a=d.exports},515:function(e,t,a){"use strict";var s=a(44),r=Object(s.a)({},(function(e,t){return e("svg",{staticClass:"spinner",class:t.data.staticClass,attrs:{viewBox:"0 0 66 66"}},[e("circle",{staticClass:"spinner-background",attrs:{cx:"33",cy:"33",r:"30"}}),e("circle",{staticClass:"spinner-bar",attrs:{cx:"33",cy:"33",r:"30"}})])}),[],!0,null,null,null);t.a=r.exports},516:function(e,t,a){"use strict";var s=a(525),r=a(522),n=a(519),i=a(517),o=a(512),l=a(520);t.a={name:"popoverMixin",components:{BasePopover:r.a,PopoverHead:n.a,PopoverBody:i.a,PopoverClose:o.a,PopoverAsync:l.a},directives:{popover:s.a}}},517:function(e,t,a){"use strict";var s=a(5),r=Object(s.defineComponent)({__name:"popover-body",props:{space:{type:Boolean,default:!0}},setup:e=>({__sfc:!0})}),n=a(44),i=Object(n.a)(r,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"overflow--scrollY overscroll--containY",class:{"popover-space":e.space}},[e._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},518:function(e,t,a){"use strict";a.d(t,"b",(function(){return r}));const s={model:{event:"update"},props:{name:{type:String,default:""},value:{type:[String,Number,Object],default:null},placeholder:{type:String,default:""},options:{type:Array,default:()=>[]},mode:{type:String,default:""},valueKey:{type:String,default:"value"},textKey:{type:String,default:"text"},retainValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{selectedValue:{get(){return this.value},set(e){e!==this.value&&this.$emit("update",e)}},selectedOption(){return this.options.find((e=>e[this.valueKey]===this.value))}}},r={mixins:[s],props:{value:{type:Array,default:()=>[]},separator:{type:String,default:","},open:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{expanded:this.open,filterValue:""}},computed:{filteredOptions(){return this.options.filter((e=>e[this.textKey].toLowerCase().includes(this.filterValue.toLowerCase())))}},methods:{toggleLayer(){this.disabled||(this.expanded=!this.expanded)},expandLayer(){this.expanded=!1},setFilterValue(e){this.filterValue=e}}};t.a=s},519:function(e,t,a){"use strict";var s=a(5),r=a(512),n=Object(s.defineComponent)({__name:"popover-head",props:{centerTitle:{type:Boolean,default:!1},icon:String,showClose:{type:Boolean,default:!1}},setup:e=>({__sfc:!0,popover:Object(s.inject)("popover"),PopoverClose:r.a})}),i=a(44),o=Object(i.a)(n,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("header",{staticClass:"popover-space flex boxAlign-ai--all-c"},[t("div",{staticClass:"flex boxAlign-ai--all-c",class:{"space--ml-a":e.centerTitle}},[e.icon?t("span",{staticClass:"lbox--v-1 space--r-1"},[t("BaseIcon",{attrs:{name:e.icon}})],1):e._e(),t("strong",{staticClass:"size--all-l text--b",class:{"space--mr-2":!e.centerTitle}},[e._t("default")],2)]),!a.popover.trap||e.showClose?t(a.PopoverClose,{staticClass:"space--ml-a"}):e._e()],1)}),[],!1,null,null,null);t.a=o.exports},520:function(e,t,a){"use strict";var s=a(5);const r="fallback",n="default",i="error";var o={name:"BaseSuspense",data:()=>({slot:r}),async created(){try{await this.$slots.default[0].asyncFactory(),this.slot=n,this.$emit("loaded")}catch(e){this.slot=i,this.$emit("error",e)}},render(){return this.$slots[this.slot]}},l=a(44),c=Object(l.a)(o,undefined,undefined,!1,null,null,null).exports,u=a(515),d=Object(s.defineComponent)({__name:"popover-async",props:{height:{type:String,default:"100px"}},setup:e=>({__sfc:!0,popover:Object(s.inject)("popover"),BaseSuspense:c,BaseSpinner:u.a})}),p=Object(l.a)(d,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.BaseSuspense,{on:{error:function(e){return a.popover.close()}},scopedSlots:e._u([{key:"fallback",fn:function(){return[t("div",{staticClass:"flex boxAlign-center",style:{minHeight:e.height}},[e._t("fallback",(function(){return[t(a.BaseSpinner,{staticClass:"spinner--size-big"})]}))],2)]},proxy:!0}],null,!0)},[e._t("default")],2)}),[],!1,null,null,null);t.a=p.exports},521:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var s=a(10),r=a.n(s),n=a(11),i=a.n(n);let o=function(e){return e.CROP="cp",e.RESIZE="re",e.BLUR="bl",e.FIT="fi",e.FIT_BY_SIZE="fs",e.QUALITY="qt",e.FILE_TYPE="ft",e}({}),l=function(e){return e.ANIMATED_SOURCE="as",e}({});const c={[o.CROP]:"crop",[o.RESIZE]:"resize",[o.BLUR]:"blur",[o.FIT]:"fit",[o.FIT_BY_SIZE]:"fitBySize",[o.QUALITY]:"quality",[o.FILE_TYPE]:"fileType"};let u=function(){function e(t,a){if(r()(this,e),t){if("object"==typeof t){const{path:e,name:s}=t;if(!e||!s)throw Error("Invalid picsy image object");const r=t.animated?"".concat(l.ANIMATED_SOURCE,"/"):"",{name:n=s,ext:i="jpg"}=a||{},o=t.ext||i;this.path="".concat("https://static.chollometro.com","/").concat(e,"/").concat(s,"/").concat(r),this.file="".concat(n,".").concat(o)}else{if("string"!=typeof t)throw Error("Expected picsy image path, but received: ".concat(t));if("string"!=typeof a)throw Error("Expected picsy image file name, but received: ".concat(a));this.path=t,this.file=a}Object.freeze(this)}}return i()(e,[{key:"blur",value:function(e){return e>0&&e<=100?this.addOperation(o.BLUR,e):this}},{key:"quality",value:function(e){return e>=0&&e<=100?this.addOperation(o.QUALITY,e):this}},{key:"resize",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.dimOperation(o.RESIZE,...t)}},{key:"fit",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.dimOperation(o.FIT,...t)}},{key:"fitBySize",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.dimOperation(o.FIT_BY_SIZE,...t)}},{key:"crop",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.dimOperation(o.CROP,...t)}},{key:"fileType",value:function(t){if(!t||!this.file)return this;const a="".concat(this.file.substr(0,this.file.lastIndexOf(".")),".").concat(t);return new e(this.path,a)}},{key:"toString",value:function(){return this.path?this.path+this.file:""}},{key:"apply",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{let[a,...s]=t;const r=c[a];return r?e[r](...s):e}),this)}},{key:"dimOperation",value:function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=Math.round(t)||"",n=Math.round(a)||"";return r||n?this.addOperation(e,"".concat(r).concat(n?"x"+n:"").concat(s?"w":"")):this}},{key:"addOperation",value:function(t,a){return this.path?new e("".concat(this.path).concat(t,"/").concat(a,"/"),this.file):this}}]),e}();const d=e=>{const t=[o.CROP,o.RESIZE,o.FIT,o.FIT_BY_SIZE];for(const[a,s,r]of e)if(t.includes(a))return{width:s,height:r};return{width:0,height:0}}},522:function(e,t,a){"use strict";var s=a(32),r=a.n(s),n=a(28),i=a(241),o=a(16),l=a(540),c=a.n(l),u=a(133),d=a.n(u),p=a(5);const h=new WeakMap;function m(e,t){let{value:a}=t;if(!a)return;const s=new MutationObserver(a);s.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),h.set(e,s)}function f(e){h.has(e)&&(h.get(e).disconnect(),h.delete(e))}p.default.directive("mutation",{inserted:m,update:function(e,t){t.value!==t.oldValue&&(f(e),m(e,t))},unbind:f});var v=a(135),g=a.n(v),b={name:"PortalProvide",props:{provide:{type:Object,required:!0}},beforeCreate(){this.$options.provide=g()(this.$options.propsData.provide,(e=>e&&e._self||e))},render(){return this.$slots.default}},y=a(44),_=Object(y.a)(b,undefined,undefined,!1,null,null,null).exports,x=a(62),C=a(0),k=a.n(C),w=a(3),O=a(550);const j=["preset"],S=Object.fromEntries(["beforeRender","initPosition","beforeEnter","enter","visible","leave"].map(((e,t)=>[e,t]))),T=e=>!e||/^\d+[a-z]*$/.test(e),P=(e,t)=>e&&/^-?\d+$/.test(e)?e+t:e;var B={name:"BasePopover",components:{PortalProvide:_},props:{preRender:{type:Boolean,default:!1},arrow:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object],default:null},contentRepos:{type:Boolean,default:!0},layerClass:{type:[String,Array,Object],default:"popover--default"},maxWidth:{type:String,validator:T,default:null},minHeight:{type:String,validator:T,default:null},minWidth:{type:String,validator:T,default:null},mobileSheet:{type:Boolean,default:!1},scrollRepos:{type:Boolean,default:!0},trap:{type:Boolean,default:!1},width:{type:String,validator:T,default:null}},data:()=>({stage:S.beforeRender,currentActivation:null,currentLayout:null,arrowPos:null}),computed:{portalKey:()=>c()("popover"),active(){return null!==this.currentActivation},layerStyles(){return this.cssLayout?null:this.currentLayout?Object.assign({position:this.currentLayout.fixed?"fixed":"absolute"},this.currentLayout.style):{position:"absolute",top:0,left:0}},contentStyles(){return{width:this.mobileSheetActive?null:P(this.width,"px"),minWidth:this.mobileSheetActive?null:P(this.minWidth,"px"),maxWidth:this.mobileSheetActive?null:P(this.maxWidth,"px"),minHeight:P(this.minHeight,"px")}},arrowStyles(){var e;return null!==(e=this.currentActivation)&&void 0!==e&&e.trigger.target&&this.arrow?this.arrowPos?{top:"".concat(this.arrowPos.top,"px"),left:"".concat(this.arrowPos.left,"px")}:{visibility:"hidden"}:null},layoutClasses(){if(!this.currentLayout)return null;const e=["popover--layout-".concat(this.currentLayout.name)];return this.currentLayout.classes&&e.push(...this.currentLayout.classes.trim().split(/ +/)),e},zIndexClass(){var e;if(this.currentLayout&&(null===(e=this.currentLayout.classes)||void 0===e||!e.includes("zIndex--")))return this.currentLayout.backdrop?"zIndex--modal":this._provided.popover?this._provided.popover.zIndexClass:this.currentLayout.fixed?"zIndex--fixed":"zIndex--popover"},visibilityClass(){return{"popover--visible":this.visible}},transition(){var e;return this.stage>S.beforeEnter&&(null===(e=this.currentLayout)||void 0===e?void 0:e.transition)||null},hiddenForTransition(){return this.stage===S.beforeEnter||this.stage===S.leave},visible(){return this.stage>S.initPosition},mobileSheetActive(){return this.mobileSheet&&this.$breakpoint.xsOnly},cssLayout(){if(!this.active)return null;const e=this.mobileSheetActive?Object.assign({},O.b,{backdrop:this.currentActivation.layouts[0].backdrop}):this.currentActivation.layouts[0];if("fixed"===e)return{name:e,backdrop:!0};if("fixed"===e.preset){const{preset:t}=e,a=r()(e,j);return a.name=t,!1!==a.backdrop&&(a.backdrop=!0),a}return null},pageScroll(){const{backdrop:e,fixed:t}=this.currentLayout||{};return!e||!this.cssLayout&&!t}},watch:{pageScroll(){Object(i.e)(!this.pageScroll)},cssLayout(e){e&&(this.currentLayout=e)}},mounted(){Object(o.d)(this)},beforeDestroy(){this.pageScroll||Object(i.e)(!1),this.close({withTransition:!1})},methods:{async activate(e){var t;let{target:a,type:s="click"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==(t=a)&&void 0!==t&&t._isVue&&(a=a.$el);const r=Object.freeze({target:a,type:s});if(this.active){if(!this.canChangeActivation(e,r))return;if(await this.close({withTransition:!1}),this.active)return}if(this.currentActivation={layouts:e,trigger:r},await Object(n.c)(),this.active&&(this.stage=S.initPosition,await this.position(),this.stage===S.initPosition)){if(this.currentLayout.transition){if(this.stage=S.beforeEnter,await this.$nextTick(),this.stage!==S.beforeEnter)return;this.stage=S.enter}else this.stage=S.visible;this.addListeners(),await this.$nextTick(),this.stage<S.enter||(this.$emit("update:active",!0),this.$emit("open"))}},beforeClose(){this.stage!==S.leave&&this.$emit("before-close")},async close(){let{withTransition:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.active&&(this.beforeClose(),e?this.stage=S.leave:(this.removeListeners(),this.currentActivation=null,this.currentLayout=null,this.arrowPos=null,await this.$nextTick(),this.active||(this.stage=S.beforeRender,this.$emit("update:active",!1),this.$emit("close"))))},updateLayouts(e){this.active&&(this.currentActivation.layouts=e,this.position())},async position(){var e;if(this.stage!==S.initPosition&&this.stage!==S.visible)return;if(this.cssLayout)return this.arrowPos=null,this.currentLayout=this.cssLayout,void await this.$nextTick();const t=this.currentActivation.trigger.target;this.layoutClasses&&this.$refs.layer.classList.remove(...this.layoutClasses),this.$refs.content.classList.remove("popover-content--expand");const a=new x.a.SmartLayout(k()(this.$refs.layer),k()(this.$refs.content),k()(t),this.currentActivation.layouts).get();if(this.$refs.content.classList.add("popover-content--expand"),this.layoutClasses&&this.$refs.layer.classList.add(...this.layoutClasses),!a.rect.isValid())return this.close({withTransition:!1});const s={name:a.name,classes:a.classes,transition:a.transition,fixed:a.fixed,backdrop:a.backdrop,style:{}};if(w.a.applyRect(s,a.rect,s.fixed),this.contentRepos||delete s.style.height,d()(this.currentLayout,s))return;const r=s.name!==(null===(e=this.currentLayout)||void 0===e?void 0:e.name);this.currentLayout=s,r&&(this.arrowPos=null,await this.$nextTick(),!this.active)||t&&(this.arrowPos=x.a.arrowPos(a,w.a.rect(t),w.a.rect(this.$refs.arrow)))},onScroll(e){Object(o.b)(e.target,this.$refs.layer)||this.position()},canChangeActivation(e,t){let{target:a=null,type:s=null}=t;return!d()(e,this.currentActivation.layouts)||a!==this.currentActivation.trigger.target||"mouseenter"===this.currentActivation.trigger.type&&"mouseenter"!==s},afterEnterTransition(){this.stage===S.enter&&(this.stage=S.visible,this.position())},afterLeaveTransition(){this.stage===S.leave&&this.close({withTransition:!1})},addListeners(){if(window.addEventListener("resize",this.position),this.scrollRepos&&window.addEventListener("scroll",this.onScroll,!0),!this.trap){document.addEventListener("keyup",this.handleEsc);const e=A[this.currentActivation.trigger.type];e&&(this.stop=e(this))}k()(this.$refs.layer).on("layer-destroy",this.close)},removeListeners(){window.removeEventListener("resize",this.position),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("keyup",this.handleEsc),this.stop&&(this.stop(),this.stop=null),k()(this.$refs.layer).off("layer-destroy",this.close)},handleEsc(e){27===e.keyCode&&this.close()}}};const A={click:e=>Object(i.a)(document,"click",(t=>{var a,s;if(!t.target.isConnected)return;const r=null===(a=(s=t.target).closest)||void 0===a?void 0:a.call(s,".popover-portal>*");if(r){var n,i;if(r!==(null===(n=(i=e.$el).closest)||void 0===n?void 0:n.call(i,".popover-portal>*")))return}e.close()})),mouseenter:e=>Object(i.a)(e.currentActivation.trigger.target,"mouseleave",(()=>{e.close()})),focus:e=>Object(i.a)(e.currentActivation.trigger.target,"blur",(()=>{e.close()}))};var L=B,I=Object(y.a)(L,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"popover-origin"},[e.preRender||e.active?t("Portal",{attrs:{to:"popover",slim:"",disabled:!e.active}},[t("div",{key:e.portalKey},[t("Transition",{attrs:{"enter-active-class":"animation--fadeIn","leave-active-class":"animation--fadeOut",appear:""}},[e.currentLayout&&e.currentLayout.backdrop&&!e.hiddenForTransition?t("div",{staticClass:"popover-cover",class:e.zIndexClass,on:{click:function(t){!e.trap&&e.close()}}}):e._e()]),t("Transition",e._b({on:{"after-enter":e.afterEnterTransition,"after-leave":e.afterLeaveTransition}},"Transition",e.transition,!1),[t("section",{directives:[{name:"show",rawName:"v-show",value:!e.hiddenForTransition,expression:"!hiddenForTransition"}],ref:"layer",staticClass:"popover",class:[e.layerClass,e.zIndexClass,e.layoutClasses,e.visibilityClass],style:e.layerStyles,attrs:{role:"dialog"}},[t("div",{ref:"content",staticClass:"popover-content flex--inline",class:e.contentClass,style:e.contentStyles},[t("PortalProvide",{attrs:{provide:{popover:this}}},[t("div",{directives:[{name:"mutation",rawName:"v-mutation",value:e.contentRepos?e.position:null,expression:"contentRepos ? position : null"}],staticClass:"flex flex--dir-col height--min-100 width--all-12"},[e._t("default",null,null,this)],2)])],1),e.arrowStyles?t("span",{ref:"arrow",staticClass:"popover-arrow",style:e.arrowStyles}):e._e()])])],1)]):e._e()],1)}),[],!1,null,null,null);t.a=I.exports},523:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));var s=a(4),r=a(64);const n=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a,n=0;return{beforeCreate(){++n>1||(s.a.registerModule(e,t.create.call(this,a.get())),t.update&&a.sub(t.update))},destroyed(){if(--n>0)return;t.update&&a.unsub(t.update),t.destroy&&t.destroy();const r="".concat(e,"/tearDown");r in s.a._actions&&s.a.dispatch(r),s.a.unregisterModule(e)}}},i=(e,t)=>n(e,{create:a=>{if(!(e in a))throw Error("Missing initial state for: ".concat(e));return t(a[e])},update:t=>{const a="".concat(e,"/replace");e in t&&a in s.a._actions&&s.a.dispatch(a,t[e])}})},524:function(e,t,a){"use strict";var s=a(44),r=Object(s.a)({},(function(e,t){return e("footer",{staticClass:"popover-space flex boxAlign-ai--all-c",class:[t.data.staticClass,t.data.class]},[t._t("default")],2)}),[],!0,null,null,null);t.a=r.exports},525:function(e,t,a){"use strict";var s=a(32),r=a.n(s),n=a(241),i=a(533);const o=["focus","hover","click","fixed"],l=!0;function c(e,t,a){const{arg:s,modifiers:{focus:i,hover:c,click:p=!i&&!c,fixed:h},value:m}=t,f=r()(t.modifiers,o),v=!Array.isArray(m),g=t=>{if(v&&null!=m&&m.disabled)return;const r=(v?null==m?void 0:m.layouts:m)||Object.keys(f).map((e=>({preset:e,fixed:h})));if(!(l||null!=r&&r.length))throw Error("Missing layout for v-popover");return u(e,a.context,s).activate(r,{type:t.type,target:t.currentTarget})},b=[];if(p&&b.push(Object(n.a)(e,"click",g)),i&&b.push(Object(n.a)(e,"focus",g)),c&&b.push(Object(n.a)(e,"mouseenter",g)),!l&&p&&i)throw Error("Invalid v-popover event modifiers: there should be no reason to combine click & focus");d.set(e,b)}const u=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null===a){const t=e.querySelector(".popover-origin");if(!l&&!t&&!s)throw Error("Couldn't find nested popover inside v-popover trigger");return null==t?void 0:t.__vue__}let r=t.$refs[a];if(Array.isArray(r)&&(r=r[0]),!l&&!r&&!s)throw Error("Invalid v-popover name: ".concat(a,", please verify ref"));for(;r&&r.$options.name!==i.a.name;)r=r.$children[0];if(!l&&!r&&!s)throw Error("Component linked via v-popover is not a popover: ".concat(a));return r},d=new WeakMap;t.a={bind:c,update:function(e,t,a){const{arg:s,value:r,oldValue:n}=t,i=Array.isArray(r)?r:null==r?void 0:r.layouts;if(i===(Array.isArray(n)?n:null==n?void 0:n.layouts))return;d.get(e).forEach((e=>e())),c(e,t,a);const o=u(e,a.context,s);o.active&&o.currentActivation.trigger.target===e&&o.updateLayouts(i)},unbind:function(e,t,a){let{arg:s}=t;d.get(e).forEach((e=>e()));const r=u(e,a.context,s,!0);r&&r.active&&r.currentActivation.trigger.target===e&&r.close()}}},526:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s=a(633),r=a.n(s),n=a(636),i=a.n(n),o=a(49);const l=["uuid","userId"],c={set(e){return Object.assign(this.payload,e),this},record(e,t){if(this.enabled){const a=this.sanitizePayload(Object.assign({},this.payload,e));this.track(this.validPayload(a),t)}},validPayload(e){return i()(e,this.whiteList)},sanitizePayload:e=>Object(o.a)()?e:r()(e,l)},u=Object.assign(Object.create(c),{enabled:!0,whiteList:["category","action","label","value"],track(e,t){const a=t&&t.nonInteraction;window.gtag&&e.category&&e.action&&window.gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value,non_interaction:a?1:0})}}),d=()=>Object.assign(Object.create(u),{payload:{}})},527:function(e,t,a){"use strict";var s=a(24),r=a(526);t.a={computed:{ga:()=>Object(r.a)(),isTouchScreen:()=>s.d}}},528:function(e,t,a){"use strict";a.d(t,"a",(function(){return Kt})),a.d(t,"b",(function(){return da}));var s=a(5),r=a(4),n=a(16);var i=a(121),o=a(513),l=a(21),c=a(568),u=a(102);function d(e){Object(u.f)(null==e?void 0:e.name)||Object(c.a)()}var p=a(152),h=a(154),m=a(49),f=a(120);const v=e=>{Object(n.e)(e,(e=>{if(null==e||!e.enabled||!Object(m.a)())return;const t=Object(m.c)(),a=e.token,s="nps-pepper-com-js";if(document.getElementById(s)||!a||!t)return;let n="?account_token=".concat(a,"&uuid=").concat(t,"&v=2");const i=r.a.getters["auth/me"];if(i)localStorage.setItem("nps_a_u","yes"),n+="&user_id=".concat(i.userId,"&user_email=").concat((e=>{const t=Object(f.c)(2).charAt(0);return btoa("".concat(t).concat(btoa(e)))})(i.email),"&created_at=").concat(i.createdAt);else{if("yes"===localStorage.getItem("nps_a_u"))return;const e=localStorage.getItem("nps_f_v");if(e)n+="&first_visit=".concat(e);else{const e=Date.now().toString();localStorage.setItem("nps_f_v",e),n+="&first_visit=".concat(e)}}const o=document.getElementsByTagName("script")[0],l=document.createElement("script");l.id=s,l.defer=!0,l.src=encodeURI("https://nps.pepper.com/nps.js".concat(n)),o.parentNode.insertBefore(l,o)}))};var g=a(539),b=a(587),y=a(562),_=a(32),x=a.n(_),C=a(6),k=a(1);const w=["suggestions"],O=async e=>{const{suggestions:t}=await Object(C.a)({req:k.Tc,params:{query:e,suggestionsLimit:5,vouchersLimit:3,dealsLimit:3,usersLimit:3}});return(e=>{let{suggestions:t}=e,a=x()(e,w);const s=t.map((e=>"event"in e?e.event:e));return Object.assign({suggestions:s},a)})(t)};var j=a(603),S=a(561),T=a(534),P=a(546),B=Object(s.defineComponent)({__name:"site-search-history",props:{history:null},setup:e=>({__sfc:!0,getHistoryItemComponent:T.c,SearchHistoryTrigger:P.a})}),A=a(44),L=Object(A.a)(B,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return e.history.length?t("div",[t("div",{staticClass:"flex width--all-12"},[t("h3",{staticClass:"space--t-3 size--all-s space--b-2 space--l-3 text--color-charcoalTint text--b"},[e._v(" "+e._s("Búsquedas recientes")+" ")])]),t("ul",e._l(e.history,(function(e){return t("li",{key:e.id},[t(a.SearchHistoryTrigger,{attrs:{item:e}},[t(a.getHistoryItemComponent(e),{tag:"Component",attrs:{item:e}})],1)],1)})),0)]):e._e()}),[],!1,null,null,null).exports,I=a(535),E=a(94),N=Object(s.defineComponent)({__name:"site-search",setup(e){const{SEARCH_BLOCKS:t,getComponentByType:a,getType:r,getTitleByType:n,updateSeeMoreLinks:i,seeMoreLinks:o}=Object(I.b)(),l=Object(s.ref)(null),c=Object(s.ref)(!1),u=Object(s.computed)((()=>Boolean(E.d.value.length))),d=Object(s.ref)(!1),p=Object(s.ref)(!1),h=Object(s.ref)(!1),m=Object(s.computed)((()=>h.value||p.value)),f=Object(s.computed)((()=>c.value?u.value:d.value?!d.value:void 0)),v=async e=>{if(!e||e.length<2)return c.value=!0,{[t.POPULAR_SEARCH]:l.value};const{deals:a,vouchers:s,users:r,suggestions:n,destinations:o}=await O(e);return i(o),c.value=!1,d.value=Boolean(n.length&&r.length&&!a.length&&!s.length),{[t.SUGGESTIONS]:n,[t.TOP_VOUCHERS]:s,[t.TOP_DEALS]:a,[t.USERS]:r}},g=e=>t=>({keyword:t,type:e}),b=e=>{const t=Object.entries(e).filter((e=>e[1].length));return[].concat(...t.map((e=>{let[t,a]=e;return a.map(g(t))})))};return{__sfc:!0,SEARCH_BLOCKS:t,getComponentByType:a,getType:r,getTitleByType:n,updateSeeMoreLinks:i,seeMoreLinks:o,defaultSuggestions:l,showHistory:c,historyNotEmpty:u,hasOnlySuggestionsAndUsers:d,isDropdownOpened:p,isFocused:h,isSearchActive:m,showDivider:f,fetchSuggestions:v,addKeywordType:g,mergeKeywordTypes:b,getSuggestions:async e=>{try{l.value||(l.value=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const{groups:t}=await Object(C.a)({req:k.Rc,params:{mostSearchable:!0,limit:e},options:{queryCache:60}});return t}());const t=await v(e);return b(t)}catch(e){return[]}},handleSearch:e=>{const t=new FormData(e.target).get("q");Object(E.c)({route:{name:"search",query:{q:t}},title:t,label:T.b.ALL_RESULTS})},AutoSuggestGroupResult:j.a,AutoSuggest:S.a,SearchHistory:L,SearchHistoryTrigger:P.a,searchHistory:E.d}}}),F=N,M=Object(A.a)(F,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("form",{directives:[{name:"track",rawName:"v-track:siteSearch",arg:"siteSearch"}],staticClass:"search aGrid box--all-i vAlign--all-m width--all-12 hAlign--all-l",class:{"search--active":a.isSearchActive&&e.$breakpoint.mdAndUp},attrs:{action:e.$router.resolve({name:"search"}).href,method:"get"},on:{submit:a.handleSearch}},[t(a.AutoSuggest,e._g(e._b({attrs:{placeholder:"Buscar...",items:a.getSuggestions,"item-value":"keyword",height:"90vh","no-filter":"",clearable:"",name:"q","load-suggestions-on-focus":"","input-classes":"input--search"},on:{focus:function(e){a.isFocused=!0},blur:function(e){a.isFocused=!1},"show-results":function(e){a.isDropdownOpened=e}},scopedSlots:e._u([{key:"suggestions",fn:function({suggestions:s,highlighted:r,select:n}){return[a.showHistory&&a.historyNotEmpty?t(a.SearchHistory,{attrs:{history:a.searchHistory}}):e._e(),t(a.AutoSuggestGroupResult,{attrs:{"get-group":a.getType,"get-title":a.getTitleByType,suggestions:s,highlighted:r,highlight:()=>{},select:n,"show-divider":a.showDivider},scopedSlots:e._u([{key:"search-results-group-see-more-btn",fn:function({groupKey:s}){return[a.seeMoreLinks[s]?t(a.SearchHistoryTrigger,{attrs:{item:a.seeMoreLinks[s]}},[t("RouterLink",{attrs:{to:a.seeMoreLinks[s].route}},[e._v(" "+e._s("Ver más")+" ")])],1):e._e()]}},{key:"default",fn:function({suggestion:s,isHighlighted:r}){return[a.getComponentByType(s.original.type)?t(a.getComponentByType(s.original.type),{tag:"Component",attrs:{suggestion:s,"is-highlighted":r}}):e._e()]}}],null,!0)})]}}])},"AutoSuggest",e.$attrs,!1),e.$listeners))],1)}),[],!1,null,null,null).exports,R=Object(s.defineComponent)({__name:"site-navigation-menu-home-link",props:{homeLink:String},setup:e=>({__sfc:!0})}),D=Object(A.a)(R,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("RouterLink",{directives:[{name:"track",rawName:"v-track:homeLink.click",arg:"homeLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 lbox--v-4",attrs:{"active-class":"navMenu-link--selected button--selected",rel:"home",to:e.homeLink}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:"home"}})],1),e._v(" "+e._s("Inicio")+" / "),t("span",{staticClass:"navMenu-link--lighter"},[e._v(e._s("Todos los chollos"))])])}),[],!1,null,null,null).exports,U={props:{isNew:{type:Boolean},icon:{type:String},url:{type:String,required:!0},label:{type:String,required:!0}}},z=Object(A.a)(U,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"flex flex--dir-column"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:mainLink.click",value:{label:e.label,url:e.url},expression:"{ label, url }",arg:"mainLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 space--mt-1",attrs:{"active-class":"navMenu-link--selected button--selected",to:e.url}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:e.icon}})],1),e._v(" "+e._s(e.label)+" "),e.isNew?t("span",{staticClass:"space--ml-2 textBadge textBadge--primary"},[e._v(e._s("New"))]):e._e()])],1)}),[],!1,null,null,null).exports,q=a(514),W=Object(s.defineComponent)({__name:"site-navigation-menu-item-external",props:{url:null,label:null,icon:null,isNew:{type:Boolean,default:!1},showExternalIcon:{type:Boolean,default:!0},cloak:{type:Boolean,default:!1}},setup:e=>({__sfc:!0,CloakLink:q.a})}),V=Object(A.a)(W,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"flex flex--dir-column"},[t(e._self._setupProxy.CloakLink,{directives:[{name:"track",rawName:"v-track:mainLink.click",value:{label:e.label,url:e.url},expression:"{ label, url }",arg:"mainLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 space--mt-1",attrs:{rel:"nofollow noopener",to:e.url,cloak:e.cloak,target:"_blank"}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:e.icon}})],1),e._v(" "+e._s(e.label)+" "),e.isNew?t("span",{staticClass:"space--ml-2 textBadge textBadge--primary"},[e._v(e._s("New"))]):e._e(),e.showExternalIcon?t("BaseIcon",{staticClass:"space--ml-1",attrs:{name:"external"}}):e._e()],1)],1)}),[],!1,null,null,null).exports,$=a(51);const H=!1,G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{url:a,key:s}=e,r=t.find((e=>e.page===a));return null!=r&&r.sorting?"custom::home"===s?"/"===a?a+r.sorting:a:"".concat(a,"-").concat(r.sorting):a};function K(e){"/".concat($.l);return!1}function Y(e){"/".concat($.h);return!1}function X(e){return H}function J(e){return"custom::home"===(null==e?void 0:e.key)}var Z=Object(s.defineComponent)({__name:"site-navigation-menu-groups",props:{groups:null,userPreferences:null},setup(e){const t=e,a=Object(o.b)();return{__sfc:!0,props:t,router:a,goToGroup:function(e){const{href:s}=a.resolve({name:"threads.index.group",params:{slug:e}});return G({url:s},t.userPreferences)}}}}),Q=Object(A.a)(Z,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("ul",{staticClass:"navMenu-list size--all-m"},e._l(e.groups,(function(s){return t("li",{key:s.threadGroupId,staticClass:"iGrid-item width--all-6"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:groupLink.click",value:{id:s.threadGroupId},expression:"{ id: group.threadGroupId }",arg:"groupLink",modifiers:{click:!0}}],staticClass:"button button--type-text button--mode-white space--v-2 boxAlign-jc--all-fs width--all-12 space--r-1",attrs:{"active-class":"button--selected",to:a.goToGroup(s.threadGroupUrlName)}},[t("span",{staticClass:"overflow--ellipsis"},[e._v(e._s(s.threadGroupName))])])],1)})),0)}),[],!1,null,null,null).exports,ee=a(507),te=a(599),ae=Object(s.defineComponent)({__name:"site-navigation-menu-content",props:{mainLinks:{default:()=>[]},eventLinks:{default:()=>[]},merchantLinks:{default:()=>[]},threadGroups:{default:()=>[]},isMascotcardsExplanationEnabled:{type:Boolean},enableSnow:{type:Boolean},hideVoucherCodesSection:{type:Boolean},userPreferences:null},setup(e){const t=e,r=Object(s.defineAsyncComponent)((()=>a.e(145).then(a.bind(null,1348)))),n=Object(o.a)(),i=Object(o.b)(),{isMagazineEnabled:c,magazineUrl:u}=Object(te.a)(),d=!1,p={merchants:{name:"merchant.list",label:"Tiendas"},vouchers:{name:"vouchers",label:"Códigos descuento"},groups:{name:"groups.overview",label:"Todas las categorías"},guides:{name:"guides.listing",label:"Buyer’s Guides"},discussions:{name:"discussions",label:"Foro de discusión"}},h=Object(s.computed)((()=>t.mainLinks.filter((e=>!Y()&&!K()&&!X())))),m=Object(s.computed)((()=>t.mainLinks.filter((e=>Y())))),f=Object(s.computed)((()=>h.value.length>0||c||"")),v=Object(s.computed)((()=>t.merchantLinks.length>0)),g=Object(s.computed)((()=>t.eventLinks.length>0||t.isMascotcardsExplanationEnabled)),b=Object(s.computed)((()=>m.value.length>0||t.enableSnow||"")),y=Object(s.computed)((()=>n.path===_.value?"navMenu-link--selected":"")),_=Object(s.computed)((()=>i.resolve({name:"mascotcards.index"}).href)),x=Object(s.computed)((()=>t.threadGroups.filter((e=>![].includes(parseInt(e.threadGroupId)))))),C=Object(s.computed)((()=>Object.assign({},p.merchants,{icon:"store"})));return{__sfc:!0,FunLetItSnowButton:r,props:t,route:n,router:i,isMagazineEnabled:c,magazineUrl:u,isWhiteLabelEnabled:d,isHomeLinkVisible:!0,surveysUrl:"",staticMainLinks:p,visibleMainLinks:h,bottomSectionLinks:m,shouldShowMainLinksSection:f,shouldShowMerchantsSection:v,shouldShowEventsSection:g,shouldShowBottomSection:b,mascotcardsLinkClass:y,mascotcardsPath:_,visibleThreadGroups:x,merchantsMainLinkConfig:C,isEventRoute:function(e){const{href:t}=i.resolve({name:"event.index",params:{pathMatch:e}});return Object(l.b)(n,t)},SiteNavigationMenuHome:D,SiteNavigationMenuItem:z,SiteNavigationMenuItemExternal:V,MenuGroups:Q,BaseButton:ee.a,isHomeLink:J}}}),se=Object(A.a)(ae,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"space--t-2 space--b-3"},[t("nav",{directives:[{name:"track",rawName:"v-track:mainMenu",arg:"mainMenu"}]},[e._l(a.visibleMainLinks,(function(s){return t("span",{key:s.key},[a.isHomeLink(s)&&a.isHomeLinkVisible?t(a.SiteNavigationMenuHome,{attrs:{"home-link":s.url}}):s.isExternal?t(a.SiteNavigationMenuItemExternal,{attrs:{"is-new":s.isNew,url:s.url,label:s.label,icon:s.icon}}):a.isHomeLink(s)?e._e():t(a.SiteNavigationMenuItem,{attrs:{"is-new":s.isNew,url:s.url,label:s.label,icon:s.icon}})],1)})),e._e(),t("Portal",{attrs:{to:"surveysPortalTarget",disabled:a.surveysUrl&&!a.isWhiteLabelEnabled}},[a.surveysUrl?t(a.SiteNavigationMenuItemExternal,{attrs:{label:"",url:a.surveysUrl,"show-external-icon":!1,icon:"survey",cloak:""}}):e._e()],1),t("Portal",{attrs:{to:"eventsPortalTarget",disabled:!a.isWhiteLabelEnabled}},[a.shouldShowEventsSection?[t("strong",{staticClass:"navMenu-label",class:{"navMenu-div":a.shouldShowMainLinksSection||a.isWhiteLabelEnabled}},[t("span",{staticClass:"lbox--v-4 space--l-2"},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:"star-empty"}})],1),e._v(" "+e._s("Promociones especiales")+" ")])]),t("ul",{staticClass:"navMenu-list size--all-m"},[e._l(e.eventLinks,(function(s){return t("li",{key:s.eventId},[t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:eventLink.click",arg:"eventLink",modifiers:{click:!0}}],staticClass:"boxAlign-jc--all-fs width--all-12",attrs:{variant:"text",mode:"white",to:{name:"event.index",params:{pathMatch:s.urlName}},selected:a.isEventRoute(s.urlName)}},[e._v(" "+e._s(s.name)+" ")])],1)})),e.isMascotcardsExplanationEnabled?t("li",[t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:promoLink.click",arg:"promoLink",modifiers:{click:!0}}],staticClass:"boxAlign-jc--all-fs width--all-12",class:a.mascotcardsLinkClass,attrs:{variant:"text",mode:"white",to:a.mascotcardsPath}},[e._v(" "+e._s("Atrapa al Reno - ¡Juega y gana!")+" ")])],1):e._e()],2)]:e._e()],2),a.visibleThreadGroups&&a.visibleThreadGroups.length>0?[t("div",{staticClass:"navMenu-label navMenu-div"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:groupLink.click",arg:"groupLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 lbox--v-4",attrs:{to:{name:a.staticMainLinks.groups.name}}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:"group"}})],1),e._v(" "+e._s(a.staticMainLinks.groups.label)+" ")])],1),t(a.MenuGroups,{attrs:{groups:a.visibleThreadGroups,"user-preferences":e.userPreferences}})]:e._e(),a.shouldShowMerchantsSection?[t("div",{staticClass:"navMenu-label navMenu-div"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:merchantLink.click",arg:"merchantLink",modifiers:{click:!0}}],staticClass:"button button--type-tertiary button--mode-white button--shape-circle space--l-0 space--ml-2 lbox--v-4",attrs:{to:{name:a.merchantsMainLinkConfig.name}}},[t("span",{staticClass:"lbox--h-5"},[t("BaseIcon",{attrs:{name:a.merchantsMainLinkConfig.icon}})],1),e._v(" "+e._s(a.merchantsMainLinkConfig.label)+" ")])],1),t("ul",{staticClass:"navMenu-list size--all-m"},e._l(e.merchantLinks,(function(a){return t("li",{key:a.merchantId,staticClass:"iGrid-item width--all-6"},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:merchantLink.click",value:{id:a.merchantId},expression:"{ id: merchant.merchantId }",arg:"merchantLink",modifiers:{click:!0}}],staticClass:"button button--type-text button--mode-white space--v-2 boxAlign-jc--all-fs width--all-12 space--r-1",attrs:{to:{name:"merchants.show",params:{merchantUrlName:a.merchantUrlName}},"active-class":"button--selected"}},[e._v(" "+e._s(a.merchantName)+" ")])],1)})),0)]:e._e(),t("PortalTarget",{attrs:{name:"eventsPortalTarget"}}),a.shouldShowBottomSection?t("div",{staticClass:"navMenu-div"},[e._l(a.bottomSectionLinks,(function(e){return t("span",{key:e.label},[e.isExternal?t(a.SiteNavigationMenuItemExternal,{attrs:{"is-new":e.isNew,url:e.url,label:e.label,icon:e.icon}}):t(a.SiteNavigationMenuItem,{attrs:{"is-new":e.isNew,url:e.url,label:e.label,icon:e.icon}})],1)})),t("PortalTarget",{attrs:{name:"surveysPortalTarget"}}),e.enableSnow?t(a.FunLetItSnowButton):e._e()],2):e._e()],2)])}),[],!1,null,null,null).exports,re=a(93),ne=a(153),ie=a(103),oe={components:{BaseButton:ee.a},mixins:[ie.a],props:{text:{type:String,default:"Regístrate / Inicia sesión"}},created(){this.guarded.config={login:{}}},methods:{all:()=>null}},le=Object(A.a)(oe,(function(){var e=this,t=e._self._c;return t("BaseButton",{staticClass:"button--toW5-square",attrs:{variant:"primary",mode:"white"},on:{click:function(t){return t.preventDefault(),e.guard(e.all)}}},[t("BaseIcon",{attrs:{name:"person"}}),t("span",{staticClass:"hide--toW5 space--ml-2"},[e._v(e._s(e.text))])],1)}),[],!1,null,null,null).exports,ce=a(511),ue=a(26),de={components:{BaseButton:ee.a,CircleLabel:ce.a},inheritAttrs:!1,props:{icon:{type:String,default:""},count:{type:Number,default:0},active:{type:Boolean,default:!1},classes:{type:Object,default:()=>({})}},computed:{label(){return Object(ue.e)(this.count)},labelClasses(){return{[this.classes.label]:!!this.classes.label}}}},pe=Object(A.a)(de,(function(){var e=this,t=e._self._c;return t("BaseButton",e._g(e._b({staticClass:"navDropDown-trigger overflow--visible",attrs:{variant:"primary",mode:"white",square:"",selected:e.active}},"BaseButton",e.$attrs,!1),e.$listeners),[e.icon?t("BaseIcon",{attrs:{name:e.icon}}):e._e(),e.count?t("CircleLabel",{staticClass:"textBadge--notifications notification-count--fixed",class:e.labelClasses,attrs:{mode:"alert",size:"s"}},[e._v(" "+e._s(e.label)+" ")]):e._e(),e._t("default")],2)}),[],!1,null,null,null).exports,he={components:{BaseButton:ee.a},props:{icon:{type:String,default:""},title:{type:String,default:""},closeButton:{type:Boolean,default:!0}}},me=Object(A.a)(he,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown-head"},[e._t("default",(function(){return[t("span",{staticClass:"lbox--v-2"},[e.icon?t("BaseIcon",{staticClass:"space--mr-2",attrs:{name:e.icon}}):e._e(),e._v(" "+e._s(e.title)+" "),e._t("counter")],2)]})),e.closeButton?e._t("close",(function(){return[t("BaseButton",{attrs:{variant:"tertiary",mode:"white",size:"s",square:""},on:{click:function(t){return e.$emit("close")}}},[t("BaseIcon",{attrs:{name:"cross"}})],1)]})):e._e()],2)}),[],!1,null,null,null).exports;var fe={components:{BaseButton:ee.a},computed:Object.assign({},Object(re.e)("auth",{count:e=>e.conversationCounts.unread})),methods:{markAllAsRead:async()=>{r.a.commit("auth/UPDATE_CONVERSATION_COUNTS",{unread:0,unseen:0}),r.a.dispatch("recentConversations/markAllAsRead");const{markConversationsAsRead:e}=await Object(C.a)({req:k.pc,params:{all:!0}});return r.a.commit("auth/UPDATE_CONVERSATION_COUNTS",e),e}}},ve=Object(A.a)(fe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown-footer flex--dir-row-reverse"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:allMsgsLink.click-ga",arg:"allMsgsLink",modifiers:{"click-ga":!0}}],attrs:{variant:"tertiary",mode:"default",square:"",to:{name:"user.conversation.index"}}},[t("BaseIcon",{attrs:{name:"mail"}})],1),e.count?t("button",{directives:[{name:"track",rawName:"v-track:markAllRead.click-ga",arg:"markAllRead",modifiers:{"click-ga":!0}}],staticClass:"clickable text--b text--color-navDropDownPrimary",attrs:{type:"button"},on:{click:e.markAllAsRead}},[t("span",{staticClass:"lbox--v-4 size--all-s"},[t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:"tick"}}),e._v(" "+e._s("Marcar todas como leídas")+" ")],1)]):e._e()],1)}),[],!1,null,null,null).exports,ge=a(530),be=a(529),ye=Object(s.defineComponent)({__name:"user-conversation",props:{value:{type:Object,required:!0},selected:{type:Boolean,default:!1},source:{type:String,default:""}},setup(e){const t=e,a=Object(s.inject)("popover"),n=Object(s.computed)((()=>r.a.getters["auth/me"])),i=Object(s.computed)((()=>t.value.messages.items[0])),o=Object(s.computed)((()=>{var e;return i.value.fromUser.userId===(null===(e=n.value)||void 0===e?void 0:e.userId)})),l=Object(s.computed)((()=>o.value?i.value.toUser:i.value.fromUser)),c=Object(s.computed)((()=>"conversation-".concat(t.value.conversationId))),u=Object(s.computed)((()=>"read"===i.value.status||o.value)),d=Object(s.computed)((()=>i.value.message)),p=Object(s.computed)((()=>({"conversationList-msg--read":t.selected||u.value,"conversationList-msg--active":t.selected}))),h=Object(s.computed)((()=>i.value.timeAgo));return{__sfc:!0,popover:a,props:t,currentUser:n,mostRecentMessage:i,fromCurrentUser:o,withUser:l,id:c,showAsRead:u,messageContent:d,itemClasses:p,timeAgo:h,UserAvatarLegacy:ge.a,UserPersona:be.a}}}),_e=Object(A.a)(ye,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("li",{staticClass:"boxSec-div space--h-2 space--v-2 conversationList-msg",class:a.itemClasses,attrs:{id:a.id}},[t("RouterLink",{directives:[{name:"track",rawName:"v-track:msg.click-ga",arg:"msg",modifiers:{"click-ga":!0}}],staticClass:"flex boxAlign-ai--all-c",attrs:{to:{name:"user.conversation.show",params:{username:a.withUser.username},query:{source:e.source}}},nativeOn:{click:function(e){return a.popover.close()}}},[t(a.UserAvatarLegacy,{staticClass:"flex--shrink-0",attrs:{size:"m",user:a.withUser,lazy:!1}}),t("div",{staticClass:"space--l-2 overflow--ellipsis size--all-s"},[t("div",{staticClass:"lbox--v-1 space--mb-n1"},[t("span",{staticClass:"user conversationList-senderLine text--b space--mr-1"},[e._v(" "+e._s(a.withUser.username)+" ")]),a.withUser.persona?t(a.UserPersona,{attrs:{user:a.withUser}}):e._e()],1),a.mostRecentMessage.subject?[t("span",{staticClass:"conversationList-subjectLine box--all-b overflow--ellipsis"},[e._v(e._s(a.mostRecentMessage.subject))])]:e._e(),t("span",{staticClass:"conversationList-msgPreview box--all-b overflow--ellipsis",domProps:{innerHTML:e._s(a.messageContent)}}),t("div",{staticClass:"mute--text"},[e._v(e._s(a.timeAgo))])],2)],1)],1)}),[],!1,null,null,null).exports,xe=a(77),Ce={data:()=>({asset:xe.a.itemTypeA})},ke=Object(A.a)(Ce,(function(){var e=this._self._c;return e("div",{staticClass:"space--h-2 space--v-2 width--all-12",style:{height:"70px"}},[e("span",{staticClass:"skeleton"},[e("img",{staticClass:"height--all-full",attrs:{src:this.asset.src}})])])}),[],!1,null,null,null).exports,we={computed:Object.assign({},Object(re.e)("auth",{conversationsEnabled:(e,t)=>{var a;return!(null===(a=t.me)||void 0===a||!a.isConversationsEnabled)}}),{msg(){return this.conversationsEnabled?{title:"No hay mensajes",body:"Aún no has recibido mensajes",footer:"Cuando inicies una conversación con alguien aquí aparecerán los mensajes"}:{title:"No hay mensajes",body:"Lo sentimos, tu cuenta no tiene opción de enviar mensajes directos todavía.",footer:"Los mensajes directos se activarán cuando seas un miembro más activo de la comunidad (no se activa manualmente)"}}})},Oe=Object(A.a)(we,(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"notifications-content overscroll--containY"},[t("li",{staticClass:"flex flex--dir-col boxAlign-ai--all-c hAlign--all-c space--h-2 space--v-2 size--all-m"},[t("BaseIcon",{staticClass:"space--mt-3 space--mb-3",style:{width:"65px",height:"52px"},attrs:{name:"mail",color:"grey"}}),t("h3",{staticClass:"size--all-xxl text--b"},[e._v(e._s(e.msg.title))]),t("p",{staticClass:"size--all-s space--v-2"},[e._v(e._s(e.msg.body))]),t("p",{staticClass:"size--all-s mute--text space--b-3"},[e._v(e._s(e.msg.footer))])],1)])}),[],!1,null,null,null).exports;const je={N:"n",E:"e",S:"s",W:"w",X:"x",Y:"y"},Se=[je.E,je.X,je.W],Te=[je.S,je.Y,je.N],Pe={before:[je.N,je.Y,je.X,je.W],after:[je.S,je.Y,je.X,je.E]},Be="BEFORE",Ae="AFTER",Le="INIT",Ie="IDLE",Ee="BUSY";var Ne={inheritAttrs:!1,props:{as:{type:String,default:"div"},sentinelAs:{type:String,default:"span"},root:{type:String,default:""},direction:{type:String,default:je.S},loading:{type:Boolean,default:!1},threshold:{type:Number,default:0},margin:{type:String,default:"0px"}},data:()=>({state:Le,observers:[]}),computed:{isIdle(){return this.state===Ie},beforeRegistered(){return this.observers.indexOf(Be)>-1},afterRegistered(){return this.observers.indexOf(Ae)>-1},directionUsesBefore(){return Pe.before.indexOf(this.direction)>-1},directionUsesAfter(){return Pe.after.indexOf(this.direction)>-1},startBefore(){return this.isIdle&&!this.beforeRegistered&&this.directionUsesBefore},startAfter(){return this.isIdle&&!this.afterRegistered&&this.directionUsesAfter},stopBefore(){return this.beforeRegistered&&!this.directionUsesBefore},stopAfter(){return this.afterRegistered&&!this.directionUsesAfter},spacingLeft(){return[je.X,je.W].indexOf(this.direction)>-1?this.margin:"0px"},spacingRight(){return[je.X,je.E].indexOf(this.direction)>-1?this.margin:"0px"},spacingTop(){return[je.N,je.Y].indexOf(this.direction)>-1?this.margin:"0px"},spacingBottom(){return[je.S,je.Y].indexOf(this.direction)>-1?this.margin:"0px"},rootMargin(){return"".concat(this.spacingTop," ").concat(this.spacingRight," ").concat(this.spacingBottom," ").concat(this.spacingLeft)},configChanged(){return!!(this.root||this.direction||this.threshold||this.rootMargin)},sentinelContainerClasses(){return{"flex flex--dir-col":Te.indexOf(this.direction)>-1,"flex--inline":Se.indexOf(this.direction)>-1}},containerClasses(){return{"flex--dir-col":Te.indexOf(this.direction)>-1}}},watch:{startBefore:"observeBefore",startAfter:"observeAfter",stopBefore:"unobserveBefore",stopAfter:"unobserveAfter",configChanged:"resetObserver",loading:function(e){e?this.setBusy():this.setIdle()}},created(){this.updateEntries=this.updateEntries.bind(this)},mounted(){this.mountObserver()},beforeDestroy(){this.unmountObserver()},methods:{setInit(){this.state!==Le&&(this.state=Le)},setIdle(){this.state!==Ie&&(this.state=Ie)},setBusy(){this.state!==Ee&&(this.state=Ee)},observeBefore(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!this.beforeRegistered&&(this.observer.observe(this.$refs.before),this.observers.push(Be))},unobserveBefore(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.beforeRegistered&&(this.observer.unobserve(this.$refs.before),this.observers.splice(this.observers.indexOf(Be),1))},observeAfter(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!this.afterRegistered&&(this.observer.observe(this.$refs.after),this.observers.push(Ae))},unobserveAfter(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.afterRegistered&&(this.observer.unobserve(this.$refs.after),this.observers.splice(this.observers.indexOf(Ae),1))},resetObserver(){this.setInit(),this.unmountObserver(),this.mountObserver()},mountObserver(){this.observer=new IntersectionObserver(this.updateEntries,{root:"window"===this.root?null:this.$el,threshold:this.threshold,rootMargin:this.rootMargin}),this.setIdle()},unmountObserver(){this.unobserveBefore(!0),this.unobserveAfter(!0),this.observer&&(this.observer.disconnect(),this.observer=null)},updateIntersecting(e){switch(e.target){case this.$refs.after:this.updateAfter();break;case this.$refs.before:this.updateBefore()}},updateAfter(){this.isIdle&&this.afterRegistered&&(this.setBusy(),this.$emit("after"))},updateBefore(){this.isIdle&&this.beforeRegistered&&(this.setBusy(),this.$emit("before"))},updateEntries(e){this.isIdle&&e.forEach((e=>{e.isIntersecting&&this.updateIntersecting(e)}))}}},Fe=Ne,Me=Object(A.a)(Fe,(function(){var e=this,t=e._self._c;return t(e.as,e._b({tag:"Component",staticClass:"flex",class:e.containerClasses},"Component",e.$attrs,!1),[e.directionUsesBefore?t(e.sentinelAs,{key:"infinite-before",tag:"Component",class:e.sentinelContainerClasses},[t("span",{ref:"before"}),e._t("before")],2):e._e(),e._t("default"),e.directionUsesAfter?t(e.sentinelAs,{key:"infinite-after",tag:"Component",class:e.sentinelContainerClasses},[e._t("after"),t("span",{ref:"after"})],2):e._e()],2)}),[],!1,null,null,null).exports,Re=a(104),De=e=>{let{api:t,loadingKey:a,entitiesKey:s}=e;return{components:{InfiniteScroll:Me},beforeCreate(){this.api=t()},created(){this.fetchInitial()},beforeDestroy(){this.api=null},methods:{updateCursorDirection(e){this.$store.dispatch("".concat(s,"/updateCursorDirection"),{direction:e})},updateCursor(e){this.$store.dispatch("".concat(s,"/updateCursor"),e)},shouldRefetch(){return this.$store.getters["".concat(s,"/shouldRefetch")]()},reset(){this.$store.dispatch("".concat(s,"/reset"))},isStale(){return this.$store.getters["".concat(s,"/isStale")]()},fetchBefore(){this.fetch("before")},fetchAfter(){this.fetch("after")},fetchInitial(){this.isStale()&&(this.reset(),this.fetchAfter())},async fetch(e){if(this.shouldRefetch()){this.itemsLoader.reset(),this.updateCursorDirection(e);try{const{pagination:e,items:t}=await this.itemsLoader.add(this.api(this.currentParams));t.length?this.updateCursor(e):this.updateCursor({hasMore:!1})}catch(e){}}}},computed:{itemsLoader:()=>Re.b.create(a),itemsLoading(){return this.itemsLoader.isLoading()},loadingDirection(){return this.$store.getters["".concat(s,"/direction")]},items(){return this.$store.getters["".concat(s,"/items")]},currentParams(){return this.$store.getters["".concat(s,"/currentParams")]},hasFetched(){return this.$store.getters["".concat(s,"/hasFetched")]},hasMoreBefore(){return this.$store.getters["".concat(s,"/hasMoreBefore")]},hasMoreAfter(){return this.$store.getters["".concat(s,"/hasMoreAfter")]},emptyResults(){return this.hasFetched&&this.items.length<1}}}},Ue={components:{UserConversation:_e,UserConversationSkeleton:ke,UserConversationListEmpty:Oe},mixins:[De({api:()=>{let e;return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.cancel(),e=Object(C.b)({req:k.Gc,params:t||{}});const{conversations:a}=await e.request,[s]=r.a.getters["recentConversations/items"],[n]=a.items;return r.a.dispatch("auth/transitionToUnreadConversations",a.items),r.a.dispatch("recentConversations/markFetched"),s&&n&&s.conversationId===n.conversationId?r.a.dispatch("recentConversations/replace",a.items):r.a.dispatch("recentConversations/push",a.items),a}},loadingKey:"conversations",entitiesKey:"recentConversations"})],computed:{source(){return this.$breakpoint.mdAndUp?"menu":"tabbedMenu"}}},ze=Ue,qe=Object(A.a)(ze,(function(){var e=this,t=e._self._c;return e.emptyResults?t("UserConversationListEmpty"):t("InfiniteScroll",{staticClass:"notifications-content overscroll--containY",attrs:{as:"ul","sentinel-as":"li",margin:"200%",loading:e.itemsLoading},on:{after:e.fetchAfter},scopedSlots:e._u([{key:"after",fn:function(){return[e.hasMoreAfter?t("UserConversationSkeleton"):e._e()]},proxy:!0}])},e._l(e.items,(function(a){return t("UserConversation",{key:a.conversationId,attrs:{value:a,source:e.source}})})),1)}),[],!1,null,null,null).exports,We=a(523),Ve=a(531),$e=a(61);var He=function(){return{namespaced:arguments.length>0&&void 0!==arguments[0]&&arguments[0],state:{pagination:{direction:"after",start:null,end:null,hasMoreAfter:!0,hasMoreBefore:!0},previousPagination:null},getters:{pagination:e=>e.pagination,paginationChanged:e=>e.previousPagination!==e.pagination,hasMoreBefore:e=>e.pagination.hasMoreBefore,hasMoreAfter:e=>e.pagination.hasMoreAfter,direction:e=>e.pagination.direction},actions:{updateCursorDirection(e){let{commit:t}=e,{direction:a="after"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t({type:"UPDATE_PREVIOUS_CURSOR"}),t({type:"UPDATE_CURSOR_DIRECTION",direction:a})},updateCursor(e){let{commit:t}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t({type:"UPDATE_PREVIOUS_CURSOR"}),t({type:"UPDATE_CURSOR",cursor:a})},resetCursor(e){let{commit:t}=e;t({type:"RESET_CURSOR"})}},mutations:{UPDATE_CURSOR_DIRECTION(e,t){let{direction:a}=t;e.pagination.direction=a},UPDATE_CURSOR(e,t){let{cursor:a={}}=t;"after"===e.pagination.direction&&void 0!==a.end&&(e.pagination.end=a.end||null),"before"===e.pagination.direction&&void 0!==a.start&&(e.pagination.start=a.start||null),"after"===e.pagination.direction&&(e.pagination.hasMoreAfter=!!a.hasMore),"before"===e.pagination.direction&&(e.pagination.hasMoreBefore=!!a.hasMore)},UPDATE_PREVIOUS_CURSOR(e){e.previousPagination=e.pagination},RESET_CURSOR(e){Object.assign(e,{pagination:{direction:"after",start:null,end:null,hasMoreAfter:!0,hasMoreBefore:!0},previousPagination:null})}}}},Ge=a(18);const Ke=new Ge.b("conversations","conversationId");const Ye=Object(We.b)("recentConversations",{create:()=>(e=>{const t=Object(Ve.a)(Ke,e,!1);return t.actions.markAllAsRead=e=>{let{state:t,dispatch:a}=e;a("replace",t.items.map((e=>Object.assign({},e,{messages:Object.assign({},e.messages,{items:[Object.assign({},e.messages.items[0],{status:"read"}),...e.messages.items.slice(1)]})}))))},{namespaced:!0,state:{},actions:{reset(e){let{dispatch:t}=e;t("replace",[]),t("resetApi"),t("resetCursor")}},modules:{conversations:t,api:Object($e.a)({userImageSlot:"default",userImageVariations:["user_small_avatar"]},5),cursor:He()}}})([])});var Xe=a(516),Je={components:{CircleLabel:ce.a,UserDropdownButton:pe,UserDropdownHeader:me,UserConversationFooter:ve,UserConversationList:qe},mixins:[Xe.a,Ye],data:()=>({dropdownActive:!1}),computed:Object.assign({},Object(re.e)("auth",{counts:e=>e.conversationCounts}),{counterCeptClass:()=>""}),methods:{closePopover(){var e;null===(e=this.$refs.popover)||void 0===e||e.close()}}},Ze=Object(A.a)(Je,(function(){var e=this,t=e._self._c;return e.$breakpoint.mdAndUp?t("div",{staticClass:"navDropDown"},[t("UserDropdownButton",{directives:[{name:"popover",rawName:"v-popover.s.fixed",modifiers:{s:!0,fixed:!0}},{name:"track",rawName:"v-track:msgDropdown.click-ga",arg:"msgDropdown",modifiers:{"click-ga":!0}}],attrs:{icon:"mail",count:e.counts.unseen,classes:{label:e.counterCeptClass},active:e.dropdownActive}},[t("BasePopover",{ref:"popover",attrs:{"layer-class":"popover--menu popover--border-navDropDownPrimary popover--arrow-navDropDownPrimary","content-class":"",width:"290",active:e.dropdownActive},on:{"update:active":function(t){e.dropdownActive=t}},scopedSlots:e._u([{key:"default",fn:function({close:a}){return[t("UserDropdownHeader",{attrs:{icon:"mail",title:"Mensajes Directos"},on:{close:a},scopedSlots:e._u([e.counts.unread?{key:"counter",fn:function(){return[t("CircleLabel",{staticClass:"text--b space--ml-2 js-notifications-counter",attrs:{size:"s",mode:"primary-inverted"}},[e._v(" "+e._s(e.counts.unread)+" ")])]},proxy:!0}:null],null,!0)}),t("UserConversationList"),t("UserConversationFooter")]}}],null,!1,2015449374)})],1)],1):e._e()}),[],!1,null,null,null).exports;var Qe={components:{BaseButton:ee.a},computed:Object.assign({},Object(re.e)("auth",{username:(e,t)=>{var a;return null===(a=t.me)||void 0===a?void 0:a.username},count:e=>e.notificationCounts.unread})),methods:{markAllAsRead:async()=>{r.a.commit("auth/UPDATE_NOTIFICATION_COUNTS",{unread:0,new:0}),r.a.dispatch("recentNotifications/markAllAsRead");const{markNotificationsAsRead:e}=await Object(C.a)({req:k.qc,params:{all:!0}});return r.a.commit("auth/UPDATE_NOTIFICATION_COUNTS",e),e}}},et=Object(A.a)(Qe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown-footer flex--dir-row-reverse"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:profileSettingsLink.click-ga",arg:"profileSettingsLink",modifiers:{"click-ga":!0}}],attrs:{variant:"tertiary",mode:"default",square:"",to:{name:"user.profile.settings",params:{username:e.username},hash:"#notifications"}}},[t("BaseIcon",{attrs:{name:"gear"}})],1),e.count?t("button",{directives:[{name:"track",rawName:"v-track:markAllRead.click-ga",arg:"markAllRead",modifiers:{"click-ga":!0}}],staticClass:"clickable text--b text--color-navDropDownPrimary",attrs:{type:"button"},on:{click:e.markAllAsRead}},[t("span",{staticClass:"lbox--v-4 size--all-s"},[t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:"tick"}}),e._v(" "+e._s("Marcar todas como leídas")+" ")],1)]):e._e()],1)}),[],!1,null,null,null).exports;const tt=Object.entries({thread:[7,9,15,36,18,23,25,35,34,38,39],user:[8,6,10,12,13,14,16,19,20,21,22,26,33,24,28,30,29,31,32,40,41],keyword:[11],badges:[17]}),at={6:{iconName:"i:comment",type:"comment_on_subscribed_deal"},7:{iconName:"i:plus",type:"thread_voted_on"},8:{iconName:"i:comment",type:"comment_on_my_deal"},9:{iconName:"i:flame",type:"thread_went_hot"},10:{iconName:"i:thumb-up",type:"comment_liked"},11:{iconName:"i:search",type:"keyword_alert"},12:{iconName:"i:person",type:"mentioned_in_comment"},13:{iconName:"i:plus",type:"info_added_to_my_deal"},14:{iconName:"i:plus",type:"info_added_to_subscribed_deal"},15:{iconName:"i:hourglass",type:"thread_reported_as_expired"},16:{iconName:"i:comment",type:"comment_quoted"},17:{iconName:"i:plus",type:"badge_earned"},18:{iconName:"i:tag",type:"new_thread_notify_follower"},21:{iconName:"i:thumb-up",type:"additional_info_liked"},23:{iconName:"i:hourglass",type:"thread_auto_expired"},24:{iconName:"i:tag",type:"thread_is_now_live"},25:{iconName:"i:hourglass",type:"thread_has_been_expired"},26:{iconName:"i:comment",type:"comment_is_now_live"},28:{iconName:"i:trade",type:"mascotcard_request_sent"},29:{iconName:"i:cross",type:"mascotcard_request_canceled"},30:{iconName:"i:tick",type:"mascotcard_request_accepted"},31:{iconName:"i:cross",type:"mascotcard_request_declined"},32:{iconName:"i:tag",type:"additional_info_approved"},33:{iconName:"i:tag",type:"thread_merged"},34:{iconName:"i:flag",type:"thread_manually_moderated"},35:{iconName:"i:hourglass",type:"thread_has_been_expired"},36:{iconName:"i:hourglass",type:"thread_reported_as_unexpired"},38:{iconName:"i:flame",type:"thread_went_superhot"},39:{iconName:"i:hourglass",type:"thread_expiry_reminder"}},st=[24,26,32,33];var rt={inject:["popover"],props:{value:{type:Object,required:!0}},computed:{activityConfig(){return at[this.value.userActivityTypeId]||{iconName:"comment",type:"unknown"}},activitySubject(){const e=+this.value.userActivityTypeId,[t]=tt.find((t=>{let[a,s]=t;return s.some((t=>t===e))}))||["comment"];return t},activityLink(){if("new"===this.value.status||"unread"===this.value.status){const e=new URL(this.value.link,document.baseURI);return e.searchParams.set("pprmrkntfctnsrd",this.value.userActivityId),e.searchParams.set("UATypeId",this.value.userActivityTypeId),e.href}return this.value.link},activityIcon(){return this.activityConfig.iconName.replace("i:","")},activityImage(){if(this.value.imageUrl)return this.value.imageUrl;switch(this.activitySubject){case"thread":case"keyword":return"/assets/img/default-deal_d0fc9.svg";case"user":return"/assets/img/profile-placeholder_09382.png";default:return st.some((e=>e===this.value.userActivityTypeId))?"/assets/img/support-images/nerd_d9815.svg":""}},itemClasses(){return{["".concat("","-").concat(this.value.userActivityId)]:!1,["".concat("")]:!1,"notification-item--read":"read"===this.value.status||"hidden"===this.value.status}},textClasses(){return{"text--color-greyShade":"read"===this.value.status,"text--color-charcoalTint":"read"!==this.value.status}},imageFrameClasses(){return{"imgFrame bg--main":"user"!==this.activitySubject&&"comment"!==this.activitySubject}},imageClasses(){return{"avatar avatar--type-m":"user"===this.activitySubject||"comment"===this.activitySubject,"imgFrame-img":"user"!==this.activitySubject&&"comment"!==this.activitySubject,badgeImage:"badges"===this.activitySubject}}}},nt={data:()=>({asset:xe.a.itemTypeA})},it={components:{UserNotification:Object(A.a)(rt,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"notification-item boxSec-div",class:e.itemClasses},[t("a",{directives:[{name:"track",rawName:"v-track:notification.click-ga",value:{type:e.activityConfig.type},expression:"{ type: activityConfig.type }",arg:"notification",modifiers:{"click-ga":!0}}],staticClass:"flex width--all-12 space--h-2 space--v-2",attrs:{href:e.activityLink},on:{click:function(t){return e.popover.close()}}},[t("div",{staticClass:"notification-item-image flex--shrink-0 space--r-3"},[t("span",{class:e.imageFrameClasses},[t("img",{class:e.imageClasses,attrs:{src:e.activityImage}})])]),t("div",{staticClass:"notification-item-text size--all-s"},[t("span",{domProps:{innerHTML:e._s(e.value.text)}}),t("div",{staticClass:"flex boxAlign-ai--all-c space--mt-1",class:e.textClasses},[t("BaseIcon",{attrs:{name:e.activityIcon}}),t("span",{staticClass:"space--ml-2"},[e._v(e._s(e.value.timeAgo))])],1)])])])}),[],!1,null,null,null).exports,UserNotificationListEmpty:Object(A.a)({},(function(){var e=this,t=e._self._c;return t("ul",{staticClass:"notifications-content overscroll--containY"},[t("li",{staticClass:"space--v-4"},[t("span",{staticClass:"hAlign--all-c notification-item-text mute--text space--t-2 box--all-b"},[e._m(0),t("div",{staticClass:"space--v-2 size--all-s"},[e._v(e._s("Por ahora no tienes notificaciones."))])])])])}),[function(){var e=this._self._c;return e("div",{staticClass:"width--all-2 box--all-i notification-supportImg"},[e("span",{staticClass:"supportImage supportImage--type-blank width--all-12"})])}],!1,null,null,null).exports,UserNotificationSkeleton:Object(A.a)(nt,(function(){var e=this._self._c;return e("div",{staticClass:"space--h-2 space--v-2 width--all-12",style:{height:"70px"}},[e("span",{staticClass:"skeleton"},[e("img",{staticClass:"height--all-full",attrs:{src:this.asset.src}})])])}),[],!1,null,null,null).exports},mixins:[De({api:()=>{let e;return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.cancel(),e=Object(C.b)({req:k.Hc,params:t||{}});const{notifications:a}=await e.request,[s]=r.a.getters["recentNotifications/items"],[n]=a.items;return r.a.dispatch("auth/transitionToUnreadNotifications",a),r.a.dispatch("recentNotifications/markFetched"),s&&n&&s.userActivityId===n.userActivityId?r.a.dispatch("recentNotifications/replace",a.items):r.a.dispatch("recentNotifications/push",a.items),a}},loadingKey:"notifications",entitiesKey:"recentNotifications"})],computed:{source(){return this.$breakpoint.mdAndUp?"menu":"tabbedMenu"}}},ot=it,lt=Object(A.a)(ot,(function(){var e=this,t=e._self._c;return e.emptyResults?t("UserNotificationListEmpty"):t("InfiniteScroll",{staticClass:"notifications-content overscroll--containY",attrs:{as:"ul","sentinel-as":"li",margin:"200%",loading:e.itemsLoading},on:{after:e.fetchAfter},scopedSlots:e._u([{key:"after",fn:function(){return[e.hasMoreAfter?t("UserNotificationSkeleton"):e._e()]},proxy:!0}])},e._l(e.items,(function(a){return t("UserNotification",{key:a.userActivityId,attrs:{value:a,source:e.source}})})),1)}),[],!1,null,null,null).exports;const ct=new Ge.b("notifications","userActivityId");const ut=Object(We.b)("recentNotifications",{create:()=>(e=>{const t=Object(Ve.a)(ct,e,!1);return t.actions.markAllAsRead=e=>{let{state:t,dispatch:a}=e;a("replace",t.items.map((e=>Object.assign({},e,{status:"read"}))))},{namespaced:!0,state:{},actions:{reset(e){let{dispatch:t}=e;t("replace",[]),t("resetApi"),t("resetCursor")}},modules:{notifications:t,api:Object($e.a)({limit:15},5),cursor:He()}}})([])});var dt={components:{CircleLabel:ce.a,UserDropdownButton:pe,UserDropdownHeader:me,UserNotificationFooter:et,UserNotificationList:lt},mixins:[Xe.a,ut],data:()=>({dropdownActive:!1}),computed:Object.assign({},Object(re.e)("auth",{counts:e=>e.notificationCounts}),{counterCeptClass:()=>""}),methods:{closePopover(){var e;null===(e=this.$refs.popover)||void 0===e||e.close()}}},pt=Object(A.a)(dt,(function(){var e=this,t=e._self._c;return e.$breakpoint.mdAndUp?t("div",{staticClass:"navDropDown"},[t("UserDropdownButton",{directives:[{name:"popover",rawName:"v-popover.s.fixed",modifiers:{s:!0,fixed:!0}},{name:"track",rawName:"v-track:notificationsDropdown.click-ga",arg:"notificationsDropdown",modifiers:{"click-ga":!0}}],attrs:{icon:"bell",count:e.counts.new,classes:{label:e.counterCeptClass},active:e.dropdownActive}},[t("BasePopover",{ref:"popover",attrs:{"layer-class":"popover--menu popover--border-navDropDownPrimary popover--arrow-navDropDownPrimary","content-class":"",width:"290",active:e.dropdownActive},on:{"update:active":function(t){e.dropdownActive=t}},scopedSlots:e._u([{key:"default",fn:function({close:a}){return[t("UserDropdownHeader",{attrs:{icon:"bell",title:"Notificaciones"},on:{close:a},scopedSlots:e._u([e.counts.unread?{key:"counter",fn:function(){return[t("CircleLabel",{staticClass:"text--b space--ml-2 js-notifications-counter",attrs:{size:"s",mode:"primary-inverted"}},[e._v(" "+e._s(e.counts.unread)+" ")])]},proxy:!0}:null],null,!0)}),t("UserNotificationList"),t("UserNotificationFooter")]}}],null,!1,1053931269)})],1)],1):e._e()}),[],!1,null,null,null).exports,ht={__name:"user-dropdown-tab",props:{icon:{type:String,default:""},count:{type:Number,default:0}},setup(e){const t=Object(s.useAttrs)(),a=Object(s.computed)((()=>(t.name,t["selected-value"],"")));return{__sfc:!0,attrs:t,ceptClass:a,CircleLabel:ce.a,SegmentedButton:ee.b}}},mt={components:{UserDropdownTab:Object(A.a)(ht,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.SegmentedButton,e._g(e._b({staticClass:"flex--1",class:a.ceptClass,attrs:{mode:"white",mandatory:""}},"SegmentedButton",e.$attrs,!1),e.$listeners),[e.icon?t("BaseIcon",{attrs:{name:e.icon}}):e._e(),e.count?t(a.CircleLabel,{staticClass:"button--notification-counter text--color-brandPrimary text--b vAlign--all-m space--ml-1",attrs:{mode:"manual",size:"s"}},[e._v(" "+e._s(e.count)+" ")]):e._e()],1)}),[],!1,null,null,null).exports},props:{tabs:{type:Array,default:()=>[]}}},ft=Object(A.a)(mt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex--1"},e._l(e.tabs,(function(a){return t("UserDropdownTab",e._g(e._b({key:a.id,class:a.class,attrs:{name:a.id,icon:a.icon,count:a.count}},"UserDropdownTab",e.$attrs,!1),e.$listeners))})),1)}),[],!1,null,null,null).exports,vt={inject:["popover"],props:{user:Object,required:!0},computed:Object.assign({},Object(re.e)("features",{navigation:(e,t)=>t.get("navigation").profile||{}}),{links(){const e=[];return e.push({key:"activityOverview",to:this.profileRoute("overview"),text:"Mi actividad reciente",icon:"person",track:"overviewLink"}),this.navigation.badges&&e.push({key:"badges",to:this.profileRoute("overview",$.a),text:"Mis medallas",icon:"star-empty",track:"badgesLink"}),e.push({key:"deals",to:this.profileRoute("show.deals",$.d),text:"Mis ofertas",icon:"tag",track:"dealsLink"}),this.navigation.discussion&&e.push({key:"discussions",to:this.profileRoute("show.discussions",$.f),text:"Mis temas",icon:"comment",track:"discussionsLink"}),e.push({key:"savedThreads",to:this.profileRoute("show.saved",$.o),text:"Chollos guardados",icon:"bookmark",track:"savedThreadsLink"}),e.push({key:"keywordAlarms",to:this.profileRoute("keywords"),text:"Mis Alertas",icon:"bell",track:"keywordAlertsLink"}),e.push({key:"settings",to:this.profileRoute("settings"),text:"Ajustes",icon:"gear",track:"settingsLink"}),e}}),methods:{profileRoute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"show.deals",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=Object.assign({username:this.user.username},t&&{term:t});return{name:"user.profile.".concat(e),params:a}}}},gt=vt,bt=Object(A.a)(gt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex--dir-col size--all-s"},e._l(e.links,(function(a){return t("RouterLink",{directives:[{name:"track",rawName:"v-track:[link.track].click-ga",arg:a.track,modifiers:{"click-ga":!0}}],key:a.key,staticClass:"navDropDown-link lbox--v-8 lbox--f text--b",attrs:{"exact-active-class":"navDropDown-link--selected",to:a.to},nativeOn:{click:function(t){return e.popover.close()}}},[t("span",{staticClass:"lbox--h-4"},[t("BaseIcon",{attrs:{name:a.icon}})],1),e._v(" "+e._s(a.text)+" ")])})),1)}),[],!1,null,null,null).exports,yt=a(536).a,_t=Object(A.a)(yt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown-footer"},[t("button",{directives:[{name:"track",rawName:"v-track:logout.click-ga",arg:"logout",modifiers:{"click-ga":!0}}],staticClass:"clickable box--all-i width--all-12 text--b text--color-navDropDownPrimary hAlign--all-c size--all-s",attrs:{type:"button"},on:{click:e.logout}},[t("span",{staticClass:"lbox--v-8"},[t("BaseIcon",{attrs:{name:"logout"}}),t("span",{staticClass:"space--l-2"},[e._v(e._s(e.label))])],1)])])}),[],!1,null,null,null).exports;const xt="UserConversationList",Ct="UserNotificationList",kt="UserProfileLinks",wt={[xt]:"UserConversationFooter",[Ct]:"UserNotificationFooter",[kt]:"UserProfileFooter"};var Ot={components:{CircleLabel:ce.a,UserAvatarLegacy:ge.a,UserDropdownHeader:me,UserDropdownTabs:ft,UserProfileLinks:bt,UserProfileFooter:_t,UserConversationList:qe,UserConversationFooter:ve,UserNotificationList:lt,UserNotificationFooter:et},mixins:[Xe.a,Ye,ut],data(){const e=[{id:xt,class:"",icon:"mail"},{id:Ct,class:"",icon:"bell"},{id:kt,class:"",icon:"person"}];return{dropdownActive:!1,tabs:e,selected:e[e.length-1].id}},computed:Object.assign({},Object(re.c)("auth",{currentUser:"me"}),Object(re.e)("features",{canAccessAdmin:(e,t)=>t.get("adminTools.enabled")}),Object(re.e)("auth",{conversationCounts:e=>e.conversationCounts,notificationCounts:e=>e.notificationCounts,unseenTotal:(e,t)=>t.unseenTotal}),{notificationTotal(){return Object(ue.e)(this.unseenTotal)},showNotificationTotal(){return this.$breakpoint.smAndDown&&this.notificationTotal},adminUrl:()=>"/admin",selectedContent(){return this.$breakpoint.mdAndUp?"UserProfileLinks":this.selected},selectedFooter(){return this.$breakpoint.mdAndUp?wt.UserProfileLinks:wt[this.selected]},priorityTabId(){return this.notificationCounts.new?Ct:this.conversationCounts.unseen?xt:kt},tabsWithCounts(){const e={[xt]:this.conversationCounts.unread,[Ct]:this.notificationCounts.unread,[kt]:0};return this.tabs.map((t=>Object.assign({},t,{count:e[t.id]})))}}),watch:{showNotificationTotal:{handler(){this.$breakpoint.mdAndUp||this.dropdownActive||this.selectTabId(this.priorityTabId)},immediate:!0}},methods:{selectTabId(e){this.selected=e},closePopover(){var e;null===(e=this.$refs.popover)||void 0===e||e.close()}}},jt=Object(A.a)(Ot,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown"},[t("button",{directives:[{name:"popover",rawName:"v-popover.s.fixed",modifiers:{s:!0,fixed:!0}},{name:"track",rawName:"v-track:userDropdown.click-ga",value:{tab:e.selectedContent},expression:"{ tab: selectedContent }",arg:"userDropdown",modifiers:{"click-ga":!0}}],staticClass:"navDropDown-trigger aGrid"},[t("UserAvatarLegacy",{staticClass:"js-avatar navDropDown-avatar",class:{"avatar--type-nav--selected js-navDropDown-avatar-selected":e.dropdownActive},attrs:{size:"nav",user:e.currentUser,lazy:!1}}),e.showNotificationTotal?t("CircleLabel",{staticClass:"js-notifications-counter textBadge--notifications notification-count--fixed",attrs:{mode:"alert",size:"s"}},[e._v(" "+e._s(e.notificationTotal)+" ")]):e._e(),t("BasePopover",{ref:"popover",attrs:{"layer-class":"popover--menu popover--border-navDropDownPrimary popover--arrow-navDropDownPrimary","content-class":"",width:"290",active:e.dropdownActive},on:{"update:active":function(t){e.dropdownActive=t}},scopedSlots:e._u([{key:"default",fn:function({close:a}){return[t("UserDropdownHeader",{attrs:{"close-button":e.$breakpoint.xsOnly},on:{close:a},scopedSlots:e._u([{key:"default",fn:function(){return[e.$breakpoint.mdAndUp?t("span",{staticClass:"flex flex--1 boxAlign-jc--all-c"},[e.canAccessAdmin?[t("a",{staticClass:"linkPlain",attrs:{href:e.adminUrl,target:"_blank"}},[e._v(" "+e._s(e.currentUser.username)+" ")])]:[e._v(" "+e._s(e.currentUser.username)+" ")]],2):[t("UserDropdownTabs",{staticClass:"space--mr-3",attrs:{tabs:e.tabsWithCounts,"selected-value":e.selected},on:{"update:selectedValue":function(t){e.selected=t},"update:selected-value":function(t){e.selected=t}}})]]},proxy:!0}],null,!0)}),t(e.selectedContent,{tag:"Component",attrs:{user:e.currentUser}}),e.selectedFooter?t(e.selectedFooter,{tag:"Component",attrs:{user:e.currentUser}}):e._e()]}}])})],1)])}),[],!1,null,null,null).exports,St={components:{GuardedLink:a(598).a,BaseButton:ee.a},computed:Object.assign({},Object(re.e)("features",{navigation:e=>{var t,a;return(null===(t=e.flags)||void 0===t||null===(a=t.navigation)||void 0===a?void 0:a.submissions)||{}}}),{tag(){var e;return null!==(e=this.navigation)&&void 0!==e&&e.errorMessage?"button":"GuardedLink"}}),methods:{warnUnauthorizedAccess(e){var t,a,s;if(null===(t=this.navigation)||void 0===t||!t.errorMessage)return;e.preventDefault(),e.stopImmediatePropagation();const r={type:"error",title:null===(a=this.navigation)||void 0===a?void 0:a.errorMessage.title,message:null===(s=this.navigation)||void 0===s?void 0:s.errorMessage.body};this.$store.dispatch("pageMsgs/add",r)},guard:()=>({login:{source:"thread_add",trackAction:"goto_submission_add"}})}},Tt=Object(A.a)(St,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"navDropDown nav-hideSearch"},[t(e.tag,{directives:[{name:"track",rawName:"v-track:addThreadDropdown.click.click-ga",arg:"addThreadDropdown",modifiers:{click:!0,"click-ga":!0}}],tag:"Component",staticClass:"button button--type-primary button--mode-brand button--shape-circle button--toW5-square space--ml-2",attrs:{to:{name:"threads.add"},title:"Comparte",guard:e.guard()},on:{click:e.warnUnauthorizedAccess}},[t("BaseIcon",{attrs:{name:"plus"}}),t("span",{staticClass:"hide--toW5 space--ml-2"},[e._v(e._s("Comparte"))])],1)],1)}),[],!1,null,null,null).exports,Pt=a(0),Bt=a.n(Pt),At={components:{UserConversationDropdown:Ze,UserNotificationDropdown:pt,UserProfileDropdown:jt,ThreadSubmissionDropdown:Tt,LoginButton:le,BaseButton:ee.a},computed:Object.assign({},Object(re.e)("auth",{loggedIn:(e,t)=>t.loggedIn}),{submitRight(){return this.$breakpoint.mdAndUp}}),async created(){this.loggedIn?Object(ne.c)():Object(ne.a)()},setup(){const{openSearchOnMobile:e,closeSearchOnMobile:t}=Object(I.b)();return{openSearchOnMobile:e,closeSearchOnMobile:t}},methods:{closePopovers(){var e,t,a;null===(e=this.$refs.UND)||void 0===e||e.closePopover(),null===(t=this.$refs.UPD)||void 0===t||t.closePopover(),null===(a=this.$refs.UCD)||void 0===a||a.closePopover()},search(){this.openSearchOnMobile();document.querySelector(".nav").addEventListener("autoSuggestClosed",(()=>{this.closeSearchOnMobile()}),{once:!0}),Bt()(".popover--mainNav").trigger("layer-destroy")}}},Lt=Object(A.a)(At,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"lbox--v-9 vue-rendered"},[t("BaseButton",{staticClass:"nav-hideSearch hide--fromW3",attrs:{variant:"primary",mode:"white",square:"","aria-label":"Encontrar"},on:{click:e.search}},[t("BaseIcon",{attrs:{name:"search"}})],1),e.loggedIn?[t("UserConversationDropdown",{ref:"UCD",staticClass:"space--ml-2"}),t("UserNotificationDropdown",{ref:"UND",staticClass:"space--ml-2"}),t("UserProfileDropdown",{ref:"UPD",staticClass:"space--ml-2"})]:t("LoginButton",{staticClass:"space--ml-2"}),e.submitRight?t("ThreadSubmissionDropdown"):e._e()],2)}),[],!1,null,null,null).exports,It=Object(s.defineComponent)({__name:"site-navigation-menu-voucher-codes-content",props:{merchantLinks:null},setup:e=>({__sfc:!0,staticMainLinks:{merchants:{name:"merchant.list",label:"Tiendas"},vouchers:{name:"vouchers",label:"Códigos descuento"},groups:{name:"groups.overview",label:"Todas las categorías"},guides:{name:"guides.listing",label:"Buyer’s Guides"},discussions:{name:"discussions",label:"Foro de discusión"}},BaseButton:ee.a})}),Et=Object(A.a)(It,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"space--t-2 space--b-3"},[e.merchantLinks&&e.merchantLinks.length>0?[t("ul",{staticClass:"navMenu-list size--all-m"},e._l(e.merchantLinks,(function(s){return t("li",{key:s.merchantId,staticClass:"iGrid-item width--all-6"},[t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:merchantLink.click",value:{id:s.merchantId},expression:"{ id: merchant.merchantId }",arg:"merchantLink",modifiers:{click:!0}}],staticClass:"boxAlign-jc--all-fs width--all-12 space--r-1",attrs:{variant:"text",mode:"white",to:{name:"merchants.show",params:{merchantUrlName:s.merchantUrlName}}}},[e._v(" "+e._s(s.merchantName)+" ")])],1)})),0),t(a.BaseButton,{staticClass:"space--ml-3 space--mt-2",attrs:{variant:"secondary",mode:"white",to:{name:a.staticMainLinks.vouchers.name}}},[e._v(" "+e._s("")+" ")])]:e._e()],2)}),[],!1,null,null,null).exports,Nt=a(600),Ft=a(71),Mt=a(533),Rt=a(24),Dt=Object(s.defineComponent)({__name:"site-navigation-menu",props:{routeData:null,params:{default:()=>({disableStickyHeader:!1})}},setup(e,t){let{expose:a}=t;const r=e,{closeSearchOnMobile:n}=Object(I.b)(),i={merchants:{name:"merchant.list",label:"Tiendas"},vouchers:{name:"vouchers",label:"Códigos descuento"},groups:{name:"groups.overview",label:"Todas las categorías"},guides:{name:"guides.listing",label:"Buyer’s Guides"},discussions:{name:"discussions",label:"Foro de discusión"}},o=Object(Ft.c)(),c=Object(s.ref)(!1),u=Object(s.ref)(!1),d=Object(s.ref)(null),p=Object(s.ref)(null),h=Object(s.ref)(null),m=Object(s.computed)((()=>r.routeData.siteNav.data.value)),f=Object(s.computed)((()=>r.routeData.siteNavMenus.data.value)),v=Object(s.computed)((()=>{const{userPreferences:e,main:{links:t}}=m.value;return t.map((t=>{const a=G(t,e);return Object.assign({},t,{url:a})}))})),g=Object(s.computed)((()=>v.value.slice(0,0))),b=Object(s.computed)((()=>o.lgAndUp?g.value:[])),y=Object(s.computed)((()=>b.value.some((e=>X())))),_=Object(s.computed)((()=>v.value.slice(b.value.length))),x=Object(s.computed)((()=>{const e=0>=v.value.length;return"space--t-2 space--b-3 overflow--wrap-on height--all-full overflow--scrollY overscroll--containY ".concat(e?"space--fromW4-t-0":"")})),C=Object(s.computed)((()=>{var e;return(null===(e=f.value)||void 0===e?void 0:e.features.navigation.topMenu.mascotCardsExplanationLink)||!1})),k=Object(s.computed)((()=>{var e;return(null===(e=f.value)||void 0===e?void 0:e.features.snow)||!1})),w=Object(s.computed)((()=>{const{disableStickyHeader:e}=r.params;return"popover--mainNav ".concat(e?"":"zIndex--fixed")})),O=Object(s.computed)((()=>" ".concat(w.value))),j=Object(s.computed)((()=>" ".concat(w.value))),S=Object(s.computed)((()=>{const e=o.smAndDown?{offset:-8}:{};return[{preset:"menu",maxHeight:"100%",width:460,bottom:{offset:10},top:{target:".nav-content"},left:Object.assign({target:".navMenu"},e),maxWidth:"100%"}]})),T=Object(s.computed)((()=>[{preset:"menu",width:375,top:{target:".nav-content"},right:{target:".navMenu"},left:{target:".navMenu"}}])),P=Object(s.computed)((()=>({"":f.value}))),B=Object(s.computed)((()=>"Menú"));function A(){var e,t,a;null===(e=d.value)||void 0===e||e.close(),null===(t=p.value)||void 0===t||t.close(),null===(a=h.value)||void 0===a||a.closePopovers()}return a({closePopovers:A}),Object(s.onUpdated)((()=>{k.value&&Object(Nt.d)()})),{__sfc:!0,props:r,closeSearchOnMobile:n,isWhiteLabelEnabled:false,isHomeLinkVisible:!0,siteName:"Chollometro",outsideLinkCount:0,staticMainLinks:i,breakpoint:o,isVisible:c,isVoucherCodesPopoverVisible:u,mainMenuPopover:d,voucherCodesPopover:p,userNavMenu:h,siteNav:m,siteNavMenus:f,mainLinks:v,outOfMenuStaticLinks:g,outOfMenuLinks:b,isVoucherCodesOutsideOfMenu:y,menuLinks:_,popoverContainerClasses:x,isMascotcardsExplanationEnabled:C,isSnowEnabled:k,popoverLayerClass:w,popoverLayerClassVoucherCodes:O,popoverLayerClassMainMenu:j,popoverLayout:S,popoverVoucherCodesLayout:T,siteNavigationCeptClass:P,menuLabel:B,closePopovers:A,SiteSearch:M,SiteNavigationMenuContent:se,UserNavigationMenu:Lt,ThreadSubmissionDropdown:Tt,SiteNavigationMenuVoucherCodesContent:Et,BaseButton:ee.a,isPopover:K,isHomeLink:J,isHomeRoute:l.e,vPopover:Mt.e,BasePopover:Mt.a,PopoverBody:Mt.b,isBot:Rt.b}}}),Ut=(a(605),Object(A.a)(Dt,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"nav",class:a.siteNavigationCeptClass},[t("div",{staticClass:"page-navigation page-center nav-content flex boxAlign-jc--all-sb"},[t("div",{staticClass:"navMenu lbox--v-9 space--fromW3-r-2"},[t("div",{directives:[{name:"show",rawName:"v-show",value:a.breakpoint.lgAndUp&&a.outOfMenuLinks.length,expression:"breakpoint.lgAndUp && outOfMenuLinks.length"}],staticClass:"flex"},[e._l(a.outOfMenuStaticLinks,(function(s,r){return[a.isHomeLink(s)&&a.isHomeLinkVisible?t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:homeLink.click",arg:"homeLink",modifiers:{click:!0}}],key:s.key,staticClass:"space--h-2",attrs:{variant:"text",mode:"white",rel:"home",selected:a.isHomeRoute(),to:s.url}},[e._v(" "+e._s("Inicio")+" ")]):a.isPopover(s)?t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:toggleVoucherCodes.click",arg:"toggleVoucherCodes",modifiers:{click:!0}},{name:"popover",rawName:"v-popover:voucherCodesPopover",value:a.popoverVoucherCodesLayout,expression:"popoverVoucherCodesLayout",arg:"voucherCodesPopover"}],key:s.key,staticClass:"navMenu-trigger space--h-2",attrs:{type:"button",selected:a.isVoucherCodesPopoverVisible,variant:"tertiary",mode:"white"}},[t("span",{staticClass:"navMenu-page nav-link-text vAlign--all-m"},[e._v(" "+e._s(s.label)+" ")]),t("BaseIcon",{staticClass:"button--dropdown-icon space--ml-2",attrs:{name:"dropdown"}})],1):a.isHomeLink(s)?e._e():t("RouterLink",{directives:[{name:"track",rawName:"v-track:[link.trackName].click",arg:s.trackName,modifiers:{click:!0}}],key:s.key,staticClass:"button button--type-text button--mode-white space--h-2",class:{"space--r-3":r===a.outOfMenuLinks.length-1},attrs:{"active-class":"button--selected",to:s.url}},[e._v(" "+e._s(s.label)+" ")])]}))],2),t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:toggleMainMenu.click",arg:"toggleMainMenu",modifiers:{click:!0}},{name:"popover",rawName:"v-popover:mainMenuPopover",value:a.popoverLayout,expression:"popoverLayout",arg:"mainMenuPopover"}],staticClass:"navMenu-trigger button--toW3-square space--fromW3-ml-0",class:{"button--selected":a.isVisible},attrs:{type:"button",variant:"tertiary",mode:"white",circle:""}},[e.$breakpoint.smAndDown?[t("BaseIcon",{staticClass:"navMenu-hamburger",attrs:{name:"menu"}}),t("BaseIcon",{staticClass:"navMenu-close aGrid-item",attrs:{name:"cross"}})]:e._e(),e.$breakpoint.mdAndUp?[t("span",{staticClass:"navMenu-page nav-link-text vAlign--all-m"},[e._v(" "+e._s(a.menuLabel)+" ")]),t("BaseIcon",{staticClass:"button--dropdown-icon space--ml-2",attrs:{name:"dropdown"}})]:e._e()],2),t(a.BasePopover,{ref:"mainMenuPopover",attrs:{active:a.isVisible,"layer-class":a.popoverLayerClassMainMenu,classes:{container:a.popoverContainerClasses},"pre-render":""},on:{"update:active":function(e){a.isVisible=e}},scopedSlots:e._u([{key:"default",fn:function({}){return[t(a.PopoverBody,{attrs:{space:!1}},[a.siteNavMenus?t(a.SiteNavigationMenuContent,{attrs:{"main-links":a.menuLinks,"event-links":a.siteNavMenus.events,"merchant-links":a.siteNavMenus.merchants,"thread-groups":a.siteNavMenus.groups,"is-mascotcards-explanation-enabled":a.isMascotcardsExplanationEnabled,"enable-snow":a.isSnowEnabled,"hide-voucher-codes-section":a.isVoucherCodesOutsideOfMenu,"user-preferences":a.siteNav.userPreferences}}):e._e()],1)]}}])}),a.isWhiteLabelEnabled?t(a.BasePopover,{ref:"voucherCodesPopover",attrs:{active:a.isVoucherCodesPopoverVisible,"layer-class":a.popoverLayerClassVoucherCodes,classes:{container:a.popoverContainerClasses},"pre-render":""},on:{"update:active":function(e){a.isVoucherCodesPopoverVisible=e}},scopedSlots:e._u([{key:"default",fn:function({}){return[t(a.PopoverBody,{attrs:{space:!1}},[a.siteNavMenus?t(a.SiteNavigationMenuVoucherCodesContent,{attrs:{"merchant-links":a.siteNavMenus.merchants}}):e._e()],1)]}}],null,!1,1787238530)}):e._e(),e.$breakpoint.smAndDown?t(a.ThreadSubmissionDropdown):e._e(),a.isBot&&a.siteNavMenus?t("span",{staticClass:"hide"},[a.isWhiteLabelEnabled?e._e():t("RouterLink",{attrs:{to:{name:a.staticMainLinks.merchants.name}}},[e._v(" "+e._s(a.staticMainLinks.merchants.label)+" ")])],1):e._e()],1),e._t("logo",(function(){return[t("RouterLink",{directives:[{name:"track",rawName:"v-track:homeLink.click",arg:"homeLink",modifiers:{click:!0}}],staticClass:"nav-logo nav-hideSearch flex flex--shrink-0 boxAlign-as--all-c text--h space--mr-2",attrs:{rel:"home",to:{name:"index"}}},[e._v(" "+e._s(a.siteName)+" ")])]})),t("div",{staticClass:"nav-search flex--fromW3 boxAlign-ai--all-c boxAlign-jc--all-fe space--h-2 space--fromW3-h-2 width--all-12 zIndex--popover space--l-2"},[t(a.SiteSearch,{staticClass:"nav-searchContainer width--all-12"}),e.$breakpoint.smAndDown?t(a.BaseButton,{staticClass:"nav-searchCloseBtn",attrs:{variant:"primary",mode:"white",square:"",size:"m"},on:{click:a.closeSearchOnMobile}},[t("BaseIcon",{attrs:{name:"cross"}})],1):e._e()],1),t(a.UserNavigationMenu,{ref:"userNavMenu",staticClass:"nav-search--navigation nav-hideSearch"})],2)])}),[],!1,null,null,null).exports),zt=a(576),qt=Object(s.defineComponent)({__name:"the-header",props:{routeData:null,disableStickyHeader:{type:Boolean,default:!1}},setup(e){const t=e,a=Object(s.ref)(),r=()=>{a.value.closePopovers()},n=Object(s.computed)((()=>[h.value?"":"mute--opacity-0 pointerEvents--none",t.disableStickyHeader?"aGrid zIndex--popover":"aGrid--sticky width--all-12 forceLayer zIndex--fixed"])),{speed:i,top:o,direction:l}=Object(zt.a)(),c=Object(s.computed)((()=>o.value<=56)),u=Object(s.computed)((()=>o.value>71)),d=Object(s.computed)((()=>i.value>1e3));function p(){return!!c.value||(!("up"!==l.value||!d.value)||("down"!==l.value||!u.value)&&null)}const h=Object(s.ref)(!0);return Object(s.watch)([d,l,u,c],(()=>{const e=p();null!==e&&(h.value=e,h.value||r())})),{__sfc:!0,props:t,siteNav:a,closeInnerPopovers:r,wrapperClass:n,speed:i,top:o,direction:l,inVisibleArea:c,HIDE_OFFSET_PX:15,isAwayFromVisibleArea:u,isSpeedy:d,getNewVisibility:p,isVisible:h,SiteNavigationMenu:Ut}}}),Wt=(a(606),Object(A.a)(qt,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("header",{directives:[{name:"track",rawName:"v-track:nav",arg:"nav"}],staticClass:"header aGrid-item--t-0",class:a.wrapperClass,attrs:{role:"banner"}},[t(a.SiteNavigationMenu,{ref:"siteNav",attrs:{"route-data":e.routeData,"disable-sticky-header":e.disableStickyHeader}})],1)}),[],!1,null,null,null).exports),Vt=a(555),$t=a(601);function Ht(e){e&&function(e,t){if(window._atatusConfig||!e||!t)return;window._atatusConfig={apikey:e};const a=document.createElement("script");a.async=!0,a.src="https://dmc1acwvwny3.cloudfront.net/atatus.js",a.addEventListener("load",(()=>{var e;null===(e=window.atatus)||void 0===e||e.setUser(t.userId,t.email,t.username)}),!1),document.head.appendChild(a)}(e.apiKey,r.a.getters["auth/me"])}var Gt=Object(s.defineComponent)({__name:"base-layout",props:{routeData:null,twig:{type:Boolean},disableStickyHeader:{type:Boolean},hideFooter:{type:Boolean}},setup(e){const t=e,c=Object(s.computed)((()=>t.routeData.survey.data.value)),u=Object(s.computed)((()=>t.routeData.csatSurvey.data.value)),m=Object(s.computed)((()=>t.routeData.pushNotifications.data.value)),f=Object(s.computed)((()=>t.routeData.cookiePolicy.data.value)),{showCookiesMessage:_}=Object(h.b)(f);Object($t.a)(),Ht(t.routeData.atatus.data.value),Object(Vt.b)(m);const{pushSupported:x}=Object(Vt.a)();var C,k;(Object(i.b)((()=>t.routeData.hotJar.data.value)),Object(p.b)(!1),function(){d(Object(o.a)());const e=Object(l.h)((e=>{d(e)}));Object(s.onUnmounted)(e)}(),v((()=>t.routeData.npsData.data.value)),t.twig)||(null===(C=document.getElementById("app-skeleton"))||void 0===C||C.remove(),k=()=>t.routeData.latestSiteMessage.data.value,Object(n.e)(k,(e=>{e&&r.a.dispatch("pageMsgs/add",Object.assign({context:":admin"},e))})));return{__sfc:!0,CsatSurvey:()=>a.e(41).then(a.bind(null,1247)),BaseSurvey:()=>a.e(147).then(a.bind(null,1329)),CookiesMessage:()=>a.e(40).then(a.bind(null,1265)),TheFooter:()=>a.e(148).then(a.bind(null,690)),PushNotifications:()=>a.e(42).then(a.bind(null,1266)),props:t,survey:c,csat:u,pushNotifications:m,cookiePolicy:f,showCookiesMessage:_,pushSupported:x,TwigPortal:g.a,PageMessages:b.a,IntersectionBoundary:y.a,TheHeader:Wt}}}),Kt=Object(A.a)(Gt,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"box--contents"},[t(a.IntersectionBoundary,{attrs:{viewport:"",name:"viewport"}}),e.twig?[t(a.TwigPortal,{attrs:{to:"#pageMsgPortal"}},[t(a.PageMessages)],1),t(a.TwigPortal,{attrs:{to:"#header-portal",disabled:""}},[t(a.TheHeader,{attrs:{"disable-sticky-header":e.disableStickyHeader,"route-data":e.routeData.header}})],1),e._t("default"),e.hideFooter?e._e():t(a.TwigPortal,{attrs:{to:"#footer-portal",lazy:""}},[t(a.TheFooter)],1)]:[t(a.PageMessages),t(a.TheHeader,{attrs:{"disable-sticky-header":e.disableStickyHeader,"route-data":e.routeData.header}}),t("div",{staticClass:"flex--expand-v"},[e._t("default")],2),t("div",{attrs:{id:"footer-container"}},[t(a.TheFooter)],1)],a.showCookiesMessage?t(a.CookiesMessage,{attrs:{settings:a.cookiePolicy}}):e._e(),a.survey?t(a.BaseSurvey,{attrs:{survey:a.survey}}):e._e(),a.csat?t(a.CsatSurvey,{attrs:{survey:a.csat}}):e._e(),a.pushNotifications&&a.pushSupported()?t(a.PushNotifications):e._e()],2)}),[],!1,null,null,null).exports,Yt=a(596),Xt=a(28);const Jt=Object(C.c)({queries:[k.H,k.p],merge:!0}),Zt=Object(C.c)({queries:[k.eb],merge:!0}),Qt=["THREAD_SUBMISSION"],ea=e=>/ABANDONED/.test(e),ta={},aa=async(e,t)=>{if(Qt.every(ea))return null;const{name:a,title:s}=await((e,t)=>Zt({id:e,CSATSurveyTypes:t}).then((e=>e.request)).then((e=>{let{showCSAT:t}=e;return t})))(e,t);return ta[a]&&await Object(Xt.d)(ta[a]),a?{name:a,title:s}:null},sa=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;const a=(()=>{const e=localStorage.getItem("formAbandoned");if(Qt.some(ea)&&e){const t=Number(localStorage.getItem("formAbandonedTimer"));localStorage.removeItem("formAbandoned"),localStorage.removeItem("formAbandonedTimer");const a=localStorage.getItem("surveyShownTime"),s=a?new Date(a).getTime():0,r=Date.now();if(r-s>864e5&&r-t<6e5)return localStorage.setItem("surveyShownTime",String(r)),{name:e,title:"Acabas de cancelar el envío de tu oferta o cupón. En general, ¿cómo de satisfecho/a estás con el formulario de publicación de ofertas?"}}return null})()||await aa(e,t);return a?{name:a.name,title:a.title,threadId:e}:null};var ra=a(595);const na=Object(C.c)({queries:[k.V],merge:!0}),ia=()=>na({}).then((e=>e.request)).then((e=>{var t;let{features:a,settings:s}=e;return{enabled:null==a?void 0:a.nps,token:null==s||null===(t=s.nps)||void 0===t?void 0:t.token}})),oa=Object(C.c)({queries:[k.gb],merge:!0}),la=Object(C.c)({queries:[k.hb],merge:!0}),ca=e=>{let{beforeEnter:t,afterEnter:a,path:s}=e;return{siteNav:t(((e,t)=>t?t.navigation:function(){return oa(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:!0}).then((e=>e.request)).then((e=>e.navigation))}()),[s]),siteNavMenus:a((()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:!0};const t=await la(e),{navigation:a,groups:s,features:r}=await t.request;return Object.assign({},a,{groups:s,features:r})}()),[s])}};var ua=a(553);const da=function(e){let{CsatSurveyTypes:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{beforeEnter:a,afterEnter:s,path:r,param:n}=e;return{latestSiteMessage:a(((e,t)=>t?t.latestSiteMessage:Object(Yt.b)()),[r]),cookiePolicy:a(((e,t)=>t?t.features.cookiePolicy:Object(ra.a)()),[r]),atatus:a(((e,t)=>t?t.atatus:Object(C.c)({queries:[k.d],merge:!0})({}).then((e=>e.request)).then((e=>{let{features:t}=e;return t.atatus}))),[r]),survey:s((e=>async function(e){const t=Object(C.c)({queries:[k.ib],merge:!0}),a=await t({path:e}).then((e=>e.request)).then((e=>e.survey));return null!=a&&a.delay&&await Object(Xt.d)(1e3*a.delay),a}(e)),[r]),hotJar:s((()=>Jt({}).then((e=>e.request)).then((e=>{let{settings:t,features:a}=e;return{hotJar:t.hotJar,features:a}}))),[r]),csatSurvey:s(((e,a)=>{let{cookiePolicy:s}=a;return s.data.value.allowTracking?sa(n("threadId").value,t):null}),[r]),npsData:s(ia,[r]),header:ca(e),pushNotifications:s((()=>Object(ua.a)()),[r])}}},529:function(e,t,a){"use strict";var s=a(5),r=Object(s.defineComponent)({__name:"user-persona",props:{user:null,iconOnly:{type:Boolean,default:!0},invert:{type:Boolean,default:!1},isBadge:{type:Boolean,default:!1}},setup(e){const t=e,a={suspended:"lock",banned:"ban",deleted:"circlex",pending_deletion:"circlex",verified:"verified",merchant:"merchant-rounded",editor_assistant:"editor-assistant",super_poster:"super"},r=["editor_assistant","super_poster"],n=Object(s.computed)((()=>t.user.persona&&t.user.persona.type in a)),i=["banned","suspended","pending_deletion","deleted"],o=Object(s.computed)((()=>"super_poster"===t.user.title)),l=Object(s.computed)((()=>t.user.persona.type.includes("merchant"))),c=Object(s.computed)((()=>r.includes(t.user.title)?t.user.title:t.user.persona.type)),u=Object(s.computed)((()=>a[c.value])),d=Object(s.computed)((()=>i.indexOf(t.user.persona.type)>-1)),p=Object(s.computed)((()=>t.invert||!d.value)),h=Object(s.computed)((()=>o.value?"super_poster":d.value?"warning":l.value?"merchant":"default")),m={warning:["text--color-greyShade","text--color-brandPrimary"],default:["text--color-greyShade","text--color-brandPrimary"],merchant:["text--color-greyShade","text--color-partnerLabelPrimary"]},f=Object(s.computed)((()=>{var e,t;return null!==(e=(null!==(t=m[h.value])&&void 0!==t?t:[])[p.value?1:0])&&void 0!==e?e:""})),v={super_poster:"user-persona--super size--all-s text--truncate",default:"size--all-xs"},g=Object(s.computed)((()=>"super_poster"===h.value?v[h.value]:v.default));return{__sfc:!0,props:t,iconMap:a,rolesWithBadgeOverride:r,enabled:n,warningPersonas:i,isSuperPoster:o,isMerchant:l,iconNameKey:c,iconName:u,warning:d,shouldInvert:p,mode:h,buttonClassesMap:m,buttonClasses:f,textClassesMap:v,textClasses:g}}}),n=a(44),i=Object(n.a)(r,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return a.enabled?t("span",{staticClass:"lbox",class:{"textBadge textBadge--icon bg--em":!a.isSuperPoster&&e.isBadge}},[t("span",{staticClass:"lbox--h-small flex cursor-default",class:a.buttonClasses},[t("BaseIcon",{class:{"text--color-purple":a.isSuperPoster},attrs:{name:a.iconName,small:!a.isSuperPoster}})],1),e.iconOnly?e._e():t("span",{staticClass:"space--ml-1 text--b text--color-charcoalTint",class:a.textClasses},[e._v(" "+e._s(e.user.persona.text)+" ")])]):e._e()}),[],!1,null,null,null);t.a=i.exports},530:function(e,t,a){"use strict";var s=a(537),r=a(105),n={props:{user:{type:Object,default:null},size:{type:String,default:"m"},lazy:{type:Boolean,default:!0}},computed:{username(){var e;return(null===(e=this.user)||void 0===e?void 0:e.username)||""},src(){if(Object(s.a)(this.user))return Object(s.d)(this.size);switch(this.size){case"m":case"xl":case"nav":return Object(r.b)(this.user.imageUrls,"default","user_small_avatar",Object(s.d)(this.size));default:return Object(r.b)(this.user.imageUrls,"default","user_small_listing_avatar",Object(s.d)(this.size))}},classObject(){return{"avatar--type-s":"s"===this.size,"avatar--type-m":"m"===this.size,"avatar--type-xl":"xl"===this.size,"avatar--type-nav":"nav"===this.size}}}},i=a(44),o=Object(i.a)(n,(function(){var e=this;return(0,e._self._c)("img",{staticClass:"avatar",class:e.classObject,attrs:{src:e.src,loading:e.lazy?"lazy":"eager",alt:e.$t("Avatar de :username",{replaces:{username:e.username}})}})}),[],!1,null,null,null);t.a=o.exports},531:function(e,t,a){"use strict";var s=a(15);t.a=(e,t,a)=>({namespaced:a,state:{items:s.a.normalize([e],t)},getters:{get:()=>t=>s.a.getEntity(e,t),items:e=>e.items},actions:{replace(e,t){let{commit:a}=e;a({type:"REPLACE",items:t})},push(e,t){let{commit:a,state:s}=e;a({type:"REPLACE",items:[...s.items,...t]})},remove(e,t){let{commit:a,state:s}=e;a({type:"REPLACE",items:s.items.filter((e=>!t.includes(e)))})},tearDown(t){let{state:a}=t;s.a.remove([e],a.items)}},mutations:{REPLACE(t,a){t.items=s.a.update([e],a.items,t.items)}}})},532:function(e,t,a){"use strict";var s=a(5),r=Object(s.defineComponent)({__name:"widget-frame",props:{layoutMode:null},setup(e){const t=e,a=Object(s.computed)((()=>({"card--type-horizontal aGrid":"horizontal"===t.layoutMode,"card--type-vertical listLayout-box aGrid":"vertical"===t.layoutMode})));return{__sfc:!0,props:t,cardClasses:a}}}),n=a(44),i=Object(n.a)(r,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"card",class:e._self._setupProxy.cardClasses},[t("div",{staticClass:"card-inner"},[t("header",{staticClass:"card-header"},[t("div",{staticClass:"flex width--all-12 boxAlign-ai--all-fs boxAlign-jc--all-sb"},[e._t("WidgetHeader")],2)]),t("div",{staticClass:"aGrid height--all-full"},[e._t("WidgetBody")],2),e.$slots.WidgetFooter?t("footer",{staticClass:"card-footer width--all-12 aGrid-item aGrid-item--b-0"},[e._t("WidgetFooter")],2):e._e(),e._t("default")],2)])}),[],!1,null,null,null);t.a=i.exports},533:function(e,t,a){"use strict";var s=a(525);a.d(t,"e",(function(){return s.a}));var r=a(522);a.d(t,"a",(function(){return r.a}));var n=a(519);a.d(t,"d",(function(){return n.a}));var i=a(517);a.d(t,"b",(function(){return i.a}));a(524);var o=a(512);a.d(t,"c",(function(){return o.a}));a(520)},534:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return g}));var s=a(5),r=a(529),n=a(94),i=a(510),o=Object(s.defineComponent)({__name:"site-search-history-item",props:{item:null},setup:e=>({__sfc:!0,removeFromSearchHistory:n.b,BaseButton:i.a})}),l=a(44),c=Object(l.a)(o,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("RouterLink",{staticClass:"flex boxAlign-ai--all-c space--v-2 space--h-3 autoSuggest-suggestion autoSuggest-suggestion--hoverHighlight",attrs:{to:e.item.route}},[t("BaseIcon",{staticClass:"space--mv-1 space--mh-1",attrs:{name:"history",left:"",size:"m",color:"greyShade"}}),e._t("default"),t(a.BaseButton,{attrs:{variant:"text",mode:"secondary",square:"",size:"s"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),a.removeFromSearchHistory(e.item)}}},[t("BaseIcon",{attrs:{name:"cross",width:"14",height:"14"}})],1)],2)}),[],!1,null,null,null).exports,u=Object(s.defineComponent)({__name:"site-search-history-item-user",props:{item:null},setup:e=>({__sfc:!0,UserPersona:r.a,SiteSearchHistoryItem:c})}),d=Object(l.a)(u,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.SiteSearchHistoryItem,{attrs:{item:e.item}},[t("span",{staticClass:"width--all-12 flex boxAlign-ai--all-bl overflow--hidden"},[t("span",{staticClass:"space--mr-1 size--all-s text--b text--color-charcoalTint"},[e._v(e._s(e.item.title))]),t(a.UserPersona,{staticClass:"space--mr-1 boxAlign-as--all-c",attrs:{user:e.item.payload.user}}),t("span",{staticClass:"size--all-xs text--color-greyShade"},[e._v(e._s(e.item.label))])],1)])}),[],!1,null,null,null).exports,p=Object(s.defineComponent)({__name:"site-search-history-item-default",props:{item:null},setup:e=>({__sfc:!0,SiteSearchHistoryItem:c})}),h=Object(l.a)(p,(function(){var e=this,t=e._self._c;return t(e._self._setupProxy.SiteSearchHistoryItem,{attrs:{item:e.item}},[t("span",{staticClass:"width--all-12 overflow--hidden overflow--ellipsis"},[t("span",{staticClass:"space--mr-1 size--all-s text--b text--color-charcoalTint"},[e._v(e._s(e.item.title))]),t("span",{staticClass:"size--all-xs text--color-greyShade"},[e._v(e._s(e.item.label))])])])}),[],!1,null,null,null).exports;let m=function(e){return e.USER="user",e.DEFAULT="default",e}({});const f={GROUP:"Categoría",DEAL:"Chollo",VOUCHER:"Código descuento",STORE_DEALS:"Tienda / Ofertas",STORE_VOUCHERS:"Tienda / Códigos descuento",STORE:"Tienda",USER:"Miembro",EVENT:"Evento",ALL_RESULTS:"Todos los resultados"},v={[m.USER]:d,[m.DEFAULT]:h},g=e=>(null==v?void 0:v[null==e?void 0:e.type])||v[m.DEFAULT]},535:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return v}));var s=a(5),r=a(1),n=a(572),i=a(534),o=function(e){return e.POPULAR_SEARCH="popular",e.SUGGESTIONS="suggestions",e.TOP_VOUCHERS="top_vouchers",e.TOP_DEALS="top_deals",e.USERS="users",e}(o||{});const l={STORE:"Tienda",GROUP:"Categoría",USER:"Miembro",EVENT:"Evento"},c={[o.POPULAR_SEARCH]:{title:"Categorías más buscadas",seeMoreLink:{name:"groups.overview"},seeMoreHistoryLabel:i.b.ALL_RESULTS,component:()=>a.e(201).then(a.bind(null,711))},[o.SUGGESTIONS]:{title:"Sugerencias para tu búsqueda:",component:()=>a.e(230).then(a.bind(null,709))},[o.TOP_VOUCHERS]:{title:"Cupones sugeridos:",component:()=>a.e(35).then(a.bind(null,602))},[o.TOP_DEALS]:{title:"Ofertas sugeridas:",component:()=>a.e(35).then(a.bind(null,602))},[o.USERS]:{component:()=>a.e(206).then(a.bind(null,710))}},u=e=>({name:"threads.index.group",params:{slug:e.urlName}}),d=e=>{let{q:t}=e;return{name:"search",query:{q:t}}},p=(e,t)=>{if(!e)return;const{name:a,q:s,type:o}=e,l={Group:i.b.GROUP,Merchant:t?i.b.STORE_VOUCHERS:i.b.STORE_DEALS,Search:i.b.ALL_RESULTS},c={Group:a,Merchant:a,Search:s},p={Group:u,Merchant:e=>((e,t)=>{let{objectId:a,urlName:s}=e;return Object(n.a)({merchantId:a,merchantUrlName:s},t?r.Ab.Voucher:r.Ab.Deal)})(e,t),Search:d};return{route:p[o](e),label:l[o],title:c[o]}},h=e=>{var t;return null===(t=c[e])||void 0===t?void 0:t.component},m=e=>{var t;return null===(t=c[e])||void 0===t?void 0:t.title},f=e=>{var t;return null==e||null===(t=e.original)||void 0===t?void 0:t.type},v=()=>{const e=Object(s.ref)({}),t=Object(s.computed)((()=>Object.entries(c).reduce(((e,t)=>{let[a,s]=t;return s.seeMoreLink?(e[a]={title:s.title,route:s.seeMoreLink,label:s.seeMoreHistoryLabel},e):e}),{}))),a=Object(s.computed)((()=>Object.assign({},t.value,e.value)));return{SEARCH_BLOCKS:o,getComponentByType:h,getTitleByType:m,getType:f,openSearchOnMobile:()=>{document.querySelector(".nav").classList.add("nav--search")},closeSearchOnMobile:()=>{document.querySelector(".nav").classList.add("nav--search-hide"),setTimeout((()=>{document.querySelector(".nav").classList.remove("nav--search","nav--search-hide")}),500)},seeMoreLinks:a,updateSeeMoreLinks:t=>{let{dealsViewAll:a,vouchersViewAll:s}=t;e.value={[o.TOP_DEALS]:p(a),[o.TOP_VOUCHERS]:p(s,!0)}}}}},536:function(e,t,a){"use strict";(function(e){var s=a(153);t.a={props:{user:Object,required:!0},computed:{label(){return e("Cerrar sesión",{replaces:{user:this.user.username}})}},methods:{logout:s.b}}}).call(this,a(70).translation)},537:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"f",(function(){return p}));var s=a(107),r=a(4),n=a(1);const i=e=>!e||!e.imageUrls||!0===e.isDeletedOrPendingDeletion,o=e=>r.a.getters["auth/me"]&&e.userId===r.a.getters["auth/me"].userId,l={s:"/assets/img/profile-listing-placeholder_fecff.png",m:"/assets/img/profile-comment-placeholder_1b5d6.png",l:"/assets/img/profile-placeholder_09382.png",fallback:"/assets/img/profile-placeholder_09382.png"},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"s";return e in l?l[e]:l.fallback},u=e=>Object(s.d)(e.images),d=e=>e.status===n.Gb.Unauthenticated,p=e=>o(e)||!(null!=e&&e.isUserProfileHidden||null!=e&&e.isDeletedOrPendingDeletion)?e.username:"Usuario Anónimo"},538:function(e,t,a){"use strict";var s=a(5),r=a(522),n=a(550);const i={center:n.e,bottomSheet:n.b,bottomCenter:n.c,bottomRight:n.d,fullscreen:n.f,absolute:n.a},o=Object(s.defineComponent)({name:"BaseModal"});var l=Object(s.defineComponent)(Object.assign({},o,{props:{layout:{type:[String,Object],default:"center",validator:e=>"string"!=typeof e||e in i},backdrop:{type:Boolean,default:!0},mobileSheet:{type:Boolean,default:!0},contentRepos:{type:Boolean,default:!1},scrollRepos:{type:Boolean,default:!1}},setup(e,t){let{expose:a}=t;const n=e,o=Object(s.computed)((()=>{const e="string"==typeof n.layout?i[n.layout]:n.layout;return[Object.assign({},e,{backdrop:n.backdrop})]})),l=Object(s.ref)(),c=()=>l.value.close();return Object(s.onMounted)((()=>l.value.activate(o))),Object(s.watch)(o,(()=>l.value.updateLayouts(o))),a({close:c}),{__sfc:!0,layoutPresets:i,props:n,popoverLayouts:o,popover:l,close:c,BasePopover:r.a}}})),c=a(44),u=Object(c.a)(l,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.BasePopover,e._g(e._b({ref:"popover",attrs:{"scroll-repos":e.scrollRepos,"content-repos":e.contentRepos,"mobile-sheet":e.mobileSheet&&"fullscreen"!==e.layout},scopedSlots:e._u([{key:"default",fn:function({}){return[e._t("default",null,{close:a.close})]}}],null,!0)},"BasePopover",e.$attrs,!1),e.$listeners))}),[],!1,null,null,null);t.a=u.exports},539:function(e,t,a){"use strict";var s=a(5),r=a(28),n=a(241),i={__name:"twig-portal",props:{to:{type:String,required:!0},lazy:{type:Boolean}},setup(e){const t=e,a=Object(s.ref)(!t.lazy),i=document.querySelector(t.to);if(!i)throw Error("missing twig-portal target: ".concat(t.to));t.lazy&&(Object(r.b)().then((()=>a.value=!0)),Object(n.d)(i,(()=>a.value=!0),{rootMargin:"100px 0px 0px"}));const o=()=>{!i.hasAttribute("track-pass-by")&&a.value&&(i.setAttribute("track-pass-by",""),i.innerHTML="")};return Object(s.onBeforeMount)(o),Object(s.onBeforeUpdate)(o),{__sfc:!0,props:t,active:a,portalTarget:i,initPortalTarget:o}}},o=a(44),l=Object(o.a)(i,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return a.active?t("MountingPortal",{attrs:{"mount-to":a.props.to,append:"","target-slim":""}},[e._t("default")],2):e._e()}),[],!1,null,null,null);t.a=l.exports},541:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c}));var s=a(5);const r={none:"",s:"button--size-s",m:"button--size-m",l:"button--size-l"},n={none:"",primary:"button button--shape-circle button--type-primary",secondary:"button button--shape-circle button--type-secondary",tertiary:"button button--shape-circle button--type-tertiary",text:"button button--type-text",tag:"button button--type-tag"},i={base:{brand:"button--mode-brand",success:"button--mode-success",danger:"button--mode-danger",info:"button--mode-info",warning:"button--mode-warning",white:"button--mode-white"},primary:{dark:"button--mode-dark",expired:"button--mode-expired"},secondary:{default:"button--mode-default"},tertiary:{default:"button--mode-default"},text:{primary:"button--mode-primary",secondary:"button--mode-secondary",white:"button--mode-white"},tag:{dark:"button--mode-dark",light:"button--mode-light"}};function o(e){const t=function(e){return"primary"===e||"secondary"===e||"tertiary"===e?i.base:{}}(e);return Object.assign({},t,i[e])}function l(e){return e.href?function(e){return Object(s.computed)((()=>({tag:"a",href:e.disabled?null:e.href})))}(e):e.to?function(e){return Object(s.computed)((()=>({tag:"router-link",to:e.to})))}(e):function(e){return Object(s.computed)((()=>({tag:"button",type:e.type||"button"})))}(e)}function c(e,t){return o(e)}},542:function(e,t,a){"use strict";a.d(t,"b",(function(){return c}));var s=a(641),r=a(526),n=a(103),i=a(0),o=a.n(i);const l={cookieKey:"DI",closeWidgetKey:"CW",widgets:{telegramWidgetKey:"T",newsletterWidgetKey:"N",keywordAlertsWidgetKey:"K",discussionHeaderWidgetKey:"D",discussionsWidgetKey:"DW",activityWidgetKey:"A",topGroupsWidgetKey:"TG",relatedGroupsWidgetKey:"RG",relatedMerchantsWidgetKey:"RM",topMerchantsWidgetKey:"TM",eventTopMerchantsWidgetKey:"ETM",merchantSearchResultsWidgetKey:"MSR",highlightsWidgetKey:"HL",exploreMixedWidgetKey:"EX",topGroupsTopMerchantsGenericListingWidgetKey:"TGMG",latestNewsWidget:"LNW"},threadVoteKey:"TV"},c=e=>e&&"string"==typeof e.apiKey&&"string"==typeof e.intentKey&&"string"==typeof e.trackCategory;var u={mixins:[n.a],props:{clientOnly:{type:Boolean,default:!1},options:{validator:c},grid:{type:Boolean,default:!1}},data:()=>({isVisible:!0}),computed:{leaveActiveClass(){return this.options?"fade":""}},created(){this.isVisible=!this.clientOnly||!Object(s.a)(this.options.apiKey),this.options&&(this.guarded.config={login:{source:"close_".concat(this.options.trackCategory),source_group:"close_widget"},intents:{intent:l.closeWidgetKey,target:l.widgets[this.options.intentKey]}})},methods:{async triggerHide(){this.clientOnly?this.hide():this.guard(this.hide),Object(r.a)().record({category:this.options.trackCategory,label:"engagement",action:"close_widget"}),this.$emit("hide")},hide(){this.clientOnly?Object(s.c)(this.options.apiKey):Object(s.b)(this.options.apiKey),this.isVisible=!1},gridUpdate(){this.grid&&o()(".js-grid").trigger("grid-update")}}},d=a(44),p=Object(d.a)(u,(function(){var e=this;return(0,e._self._c)("Transition",{attrs:{"leave-active-class":e.leaveActiveClass},on:{"after-leave":e.gridUpdate}},[!e.options||e.isVisible?e._t("default",null,{hide:e.triggerHide}):e._e()],2)}),[],!1,null,null,null);t.a=p.exports},543:function(e,t,a){"use strict";var s=a(77),r={props:{orientation:{type:String,required:!0},visualization:{type:String,required:!1,default:"itemTypeB",validator:e=>Object.keys(s.a).includes(e)},carouselClass:{type:String,default:"space--fromW3-mh-6"},horizontalItemClass:{type:String,default:"carousel-list-item-height width--fromW3-4 width--fromW4-3 space--h-3"}},computed:{currentOrientation(){return{horizontal:"horizontal"===this.orientation,vertical:"vertical"===this.orientation}},asset(){return s.a[this.visualization]}}},n=a(44),i=Object(n.a)(r,(function(){var e=this,t=e._self._c;return t("div",[e.currentOrientation.horizontal?t("div",{staticClass:"carousel",class:e.carouselClass},e._l(4,(function(a){return t("div",{key:a,staticClass:"flex--inline boxAlign-ai--all-c carousel-list-item carousel-list-item-width",class:e.horizontalItemClass},[t("span",{staticClass:"skeleton"},[t("img",{staticStyle:{"max-width":"99%"},attrs:{src:e.asset.src,height:"100%"}})])])})),0):t("div",{staticClass:"flex flex--dir-col height--all-full"},e._l(4,(function(a){return t("div",{key:a,staticClass:"flex--inline boxAlign-ai--all-c card-space--h space--mb-4 carousel-list-item-height"},[t("span",{staticClass:"skeleton"},[t("img",{staticStyle:{"max-width":"99%"},attrs:{src:e.asset.src,height:"100%"}})])])})),0)])}),[],!1,null,null,null);t.a=i.exports},544:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(5);const r=()=>{const e=Object(s.ref)(!1);return{isLoading:e,setLoader:()=>(e.value=!0,()=>{e.value=!1})}}},545:function(e,t,a){"use strict";var s=a(5),r=Object(s.defineComponent)({__name:"user-short-profile-trigger",props:{user:null,tag:{default:"div"}},setup(e){const t=Object(s.defineAsyncComponent)((()=>Promise.all([a.e(172),a.e(1),a.e(2),a.e(10),a.e(163)]).then(a.bind(null,1270)))),r=Object(s.ref)(!1),n=Object(s.ref)(null);let i;const o=()=>{var e;null===(e=n.value)||void 0===e||e.activate(i.preset,i.event)};return{__sfc:!0,UserShortProfilePopover:t,loaded:r,popover:n,payload:i,handleClick:(e,t)=>{r.value||(r.value=!0),i={event:e,preset:t},o()},openPopover:o}}}),n=a(44),i=Object(n.a)(r,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(e.tag,{tag:"Component"},[e._t("default",null,{popoverHandler:a.handleClick}),a.loaded?t(a.UserShortProfilePopover,e._g({ref:"popover",attrs:{user:e.user},on:{"~hook:mounted":function(e){return a.openPopover.apply(null,arguments)}}},e.$listeners)):e._e()],2)}),[],!1,null,null,null);t.a=i.exports},546:function(e,t,a){"use strict";var s=a(5),r=a(94),n=Object(s.defineComponent)({__name:"search-history-trigger",props:{item:null},setup(e){const t=e;return{__sfc:!0,props:t,saveToHistory:()=>{Object(r.c)(t.item)}}}}),i=a(44),o=Object(i.a)(n,(function(){var e=this;return(0,e._self._c)("div",{on:{click:e._self._setupProxy.saveToHistory}},[e._t("default")],2)}),[],!1,null,null,null);t.a=o.exports},547:function(e,t,a){"use strict";(function(e){t.a={props:{badge:{type:Object,default:null}},computed:{image(){return"/assets/img/badges/1x/".concat(this.badge.level.key,"-active.png")},title(){const{name:t,description:a}=this.badge.level;return e(":name: :description",{replaces:{name:t,description:a}})}}}}).call(this,a(70).translation)},549:function(e,t,a){"use strict";var s={mixins:[a(518).a]},r=a(44),n=Object(r.a)(s,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"plainSelect lbox--v-1"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],staticClass:"plainSelect-ctrl clickable",attrs:{name:e.name,disabled:"disabled"===e.mode,required:"required"===e.mode},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedValue=t.target.multiple?a:a[0]}}},[e.placeholder?t("option",{attrs:{value:""}},[e._v(e._s(e.placeholder))]):e._e(),e._l(e.options,(function(a,s){return t("option",{key:s,attrs:{disabled:a.disabled},domProps:{value:a[e.valueKey],selected:s===e.selectedValue}},[e._v(" "+e._s(a[e.textKey])+" ")])}))],2),t("span",{staticClass:"plainSelect-fake box--all-b overflow--ellipsis space--r-1 hide--js-off",class:[{"mute--text":!e.selectedOption}],attrs:{"aria-hidden":"true"}},[e._v(" "+e._s(e.selectedOption?e.selectedOption[e.textKey]:e.placeholder)+" ")]),t("BaseIcon",{staticClass:"select-ico",attrs:{name:"dropdown"}})],1)}),[],!1,null,null,null);t.a=n.exports},55:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"c",(function(){return p}));var s=a(4),r=a(24),n=a(21);const i="chollometro.com";async function o(e){if(window.dataLayer&&window.gtag)return;window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),function(){const{allowTracking:e,gaCookiesAsAnalytical:t,allowPersonalization:a}=s.a.getters["features/get"]("cookiePolicy");l("consent","default",{ad_storage:a?"granted":"denied",analytics_storage:t&&!e?"denied":"granted"})}();const t=document.createElement("script");t.src="https://www.googletagmanager.com/gtag/js?id=".concat(e),t.async=!0,document.head.appendChild(t)}function l(){if(window.gtag&&!r.b&&!Object(n.g)()){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];window.gtag.apply(null,t)}}function c(e,t){l("consent","update",{[e]:t?"granted":"denied"})}function u(e){c("ad_storage",e)}function d(e){s.a.getters["features/get"]("cookiePolicy.gaCookiesAsAnalytical")&&c("analytics_storage",e)}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l("config",e,Object.assign({cookie_domain:i||"auto",send_page_view:!1,transport_type:"beacon"},t))}},550:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return c}));const s={enterActiveClass:"animation--modalFromBottom",leaveActiveClass:"animation--modalToBottom"},r={preset:"fixed",transition:s},n={preset:"fixed",classes:"popover--layout-fixed-fullscreen",transition:s},i={preset:"fixed",classes:"popover--layout-fixed-bottomSheet",transition:s},o={preset:"fixed",classes:"popover--layout-fixed-bottom",transition:s},l={preset:"fixed",classes:"popover--layout-fixed-bottomRight",transition:s},c={preset:"modal"}},552:function(e,t,a){"use strict";var s={props:{suggestions:{type:Array,required:!0},highlighted:{type:Object,default:null},icon:{type:String,default:null},modifier:{type:String,default:"lBox--v-3"}},methods:{isHighlighted(e){return!!this.highlighted&&this.highlighted.value===e.value}}},r=a(44),n=Object(r.a)(s,(function(){var e=this,t=e._self._c;return t("ol",{},e._l(e.suggestions,(function(a,s){return t("li",{key:s,on:{mouseover:function(t){return e.$emit("highlight",a)},mousedown:function(t){return e.$emit("select",t,a)}}},[e._t("default",(function(){return[t("div",{staticClass:"autoSuggest-suggestion flex boxSec-div space--h-2 width--all-12 clickable overflow--hidden size--all-s",class:[{"autoSuggest-suggestion--selected":e.isHighlighted(a)},e.modifier],attrs:{title:a.text}},[e.icon?t("BaseIcon",{staticClass:"space--mr-1",attrs:{name:e.icon}}):e._e(),t("div",{staticClass:"text--lh-1-2 overflow--ellipsis overflow--hidden"},[e._v(" "+e._s(a.text)+" ")])],1)]}),{suggestion:a,isHighlighted:e.isHighlighted(a)})],2)})),0)}),[],!1,null,null,null);t.a=n.exports},553:function(e,t,a){"use strict";a.d(t,"d",(function(){return g})),a.d(t,"e",(function(){return b})),a.d(t,"c",(function(){return y})),a.d(t,"a",(function(){return _})),a.d(t,"f",(function(){return C})),a.d(t,"b",(function(){return k}));var s=a(4);const r="BDypTubiGSmWmSKBjsNZtEoVompL18oZkKWxBC7OMghYuDoELcDC8bZ4oDblIM4/mppFPhOeG6Fe9rB94sVvjYY=",n="/bpn/getRequestPermissionParams",i="/bpn/subscribe-vapid-endpoint";var o=a(95),l=a(150),c=a(555),u=a(8),d=a.n(u),p=a(1),h=a(6);const m=async()=>{const{eligibleForBrowserPushNotifications:e}=await Object(h.c)({queries:[p.Ib],merge:!0})({}).then((e=>e.request)).then((e=>e.visitor));return e};var f=function(e){return e.GUEST="guest",e.FORCED="bpn_forced",e.USER="user",e}(f||{});const v={[f.GUEST]:"guestBpnModalSeen",[f.USER]:"userBpnModalSeen",[f.FORCED]:"forcedBpnModalSeen"},g=()=>"serviceWorker"in navigator&&"PushManager"in window,b=()=>{const{pushType:e}=Object(c.a)();localStorage.setItem(v[e.value],"true")},y=()=>{const{pushType:e}=Object(c.a)();return localStorage.getItem(v[e.value])},_=async()=>{const{isLoggedIn:e}=Object(l.a)(),{state:t}=await navigator.permissions.query({name:"notifications"});if(e.value){return{pushType:await m()?f.USER:null,pushPermission:t}}{const{pushType:e}=await d.a.post(n).then((e=>e.data.data));return{pushType:e,pushPermission:t}}},x=async e=>{const t=await O()?w(e):[j];await Promise.all(t.map((e=>e())))},C=async()=>{try{const{pushType:e}=await _();await x(e),await s.a.dispatch("pushNotifications/updatePushType",e)}catch(e){}},k=async()=>{try{const{pushType:e,pushPermission:t}=Object(c.a)();e.value&&"granted"===t.value&&await x(e.value)}catch(e){console.error("Error subscribing to push notifications:",e)}},w=e=>({[f.FORCED]:[S,j],[f.USER]:[S,j]}[e]||[]),O=async()=>(await navigator.serviceWorker.ready).pushManager.getSubscription(),j=async()=>{const e=await navigator.serviceWorker.ready;await T();return(e=>d.a.post(i,e.toJSON()))(await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Object(o.c)(r)}))},S=async()=>{const e=await O();if(e)return e.unsubscribe()},T=async()=>new Promise(((e,t)=>{navigator.permissions.query({name:"notifications"}).then((a=>{let{state:r}=a;return"denied"===r?t(r):"granted"===r?e(r):void Notification.requestPermission().then((a=>{const r="default"===a?"prompt":a;return s.a.dispatch("pushNotifications/updatePushPermission",r),"granted"===r?e(r):t(r)}))}))}))},554:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l.a})),a.d(t,"c",(function(){return c.a})),a.d(t,"b",(function(){return m}));var s=a(518),r=a(509),n={components:{FormInputAdditionBox:r.f,FormInputIcon:r.h},mixins:[s.a],inheritAttrs:!1,props:{inputClass:{type:[String,Array,Object],default:""},multiple:{type:Boolean,default:!1}},computed:{selectedText(){if(this.options.length<1||this.options.multiple)return"";if(!this.selectedOption)return this.placeholder;const e=this.selectedValue,t=this.options.find((t=>e===t[this.valueKey]));return t?t[this.textKey]:this.placeholder}},methods:{selected(){this.$refs.select.blur()}}},i=a(44),o=Object(i.a)(n,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"select width--all-12"},[t("select",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.selectedValue,expression:"selectedValue"}],ref:"select",staticClass:"select-ctrl input clickable",class:[{[`input--mode-${e.mode}`]:e.mode},e.inputClass],attrs:{disabled:"disabled"===e.mode,required:"required"===e.mode,name:e.name},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedValue=t.target.multiple?a:a[0]},e.selected]}},"select",e.$attrs,!1),e.$listeners),[!e.multiple&&e.placeholder?t("option",{attrs:{value:""}},[e._v(e._s(e.placeholder))]):e._e(),e._l(e.options,(function(a){return t("option",{key:a[e.textKey],attrs:{disabled:a.disabled},domProps:{value:a[e.valueKey],selected:e.value===a[e.valueKey]}},[e._v(" "+e._s(a[e.textKey])+" ")])}))],2),t("span",{staticClass:"select-fake flex flex--col width--all-12"},[t("span",{staticClass:"select-txt input clickable width--all-12"},[t("span",{staticClass:"box--all-b overflow--wrap-off overflow--hidden",class:{"mute--text":!e.selectedOption&&e.placeholder}},[e._v(" "+e._s(e.selectedText)+" ")])]),t("FormInputAdditionBox",{attrs:{right:""}},[t("FormInputIcon",{attrs:{name:"down","icon-class":"select-arrow"}})],1)],1)])}),[],!1,null,null,null).exports,l=a(575),c=a(549),u={mixins:[s.a],props:{values:{type:Array,required:!0},index:{type:Number,default:0}},data(){return{vals:this.values}},computed:{selectedOption:function(){const e=this.vals[this.index];return this.options.find((t=>t.value===e))}},methods:{isDisabled:function(e){return e.disabled||this.vals[this.index]!==e.value&&-1!==this.vals.indexOf(e.value)},update:function(e){this.vals[this.index]=e.target.value}}},d={components:{BoundSelect:Object(i.a)(u,(function(){var e=this,t=e._self._c;return t("span",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.vals[e.index],expression:"vals[index]"}],staticClass:"select-ctrl input",class:e.mode?"input--mode-"+e.mode:"",attrs:{id:e.controlId,name:e.name,disabled:"disabled"===e.mode,required:"required"===e.mode},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.vals,e.index,t.target.multiple?a:a[0])},function(t){return e.update(t)}]}},[e.placeholder?t("option",{attrs:{value:""}},[e._v(e._s(e.placeholder))]):e._e(),e._l(e.options,(function(a,s){return t("option",{key:s,attrs:{disabled:e.isDisabled(a)},domProps:{value:a[e.valueKey]}},[e._v(" "+e._s(a[e.textKey])+" ")])}))],2),t("span",{staticClass:"select-fake tGrid tGrid--auto width--all-12"},[t("span",{staticClass:"select-txt tGrid-cell bRad--r-r input width--all-12",attrs:{"aria-hidden":"true"}},[t("span",{staticClass:"box--all-b height--ctrl overflow--wrap-break overflow--hidden"},[e._v(e._s(e.selectedOption?e.selectedOption[e.textKey]:e.placeholder))])]),t("span",{staticClass:"tGrid-cell"},[t("span",{staticClass:"select-arrow btn bRad--l-r"},[t("BaseIcon",{staticClass:"select-ico",attrs:{name:"dropdown"}})],1)])])])}),[],!1,null,null,null).exports},mixins:[s.a],props:{value:{type:Array,required:!0},skip:{type:Number,default:0},max:{type:Number,default:1/0}},data(){return{vals:this.values}},computed:{remaining:function(){return this.options.reduce(((e,t)=>t.disabled||!t.value?e:e+1),0)-this.vals.length},nextValue:function(){return this.placeholder?"":this.options.find((e=>!e.disabled&&-1===this.vals.indexOf(e.value))).value}}},p=(Object(i.a)(d,(function(){var e=this,t=e._self._c;return t("div",[e._l(e.vals.length-e.skip,(function(a,s){return t("div",{key:s,staticClass:"tGrid tGrid--auto width--all-12",class:{"space--t-3":a}},[t("BoundSelect",{staticClass:"width--all-12",attrs:{values:e.vals,index:a-1+e.skip,options:e.options,name:e.name,"value-key":e.valueKey,"text-key":e.textKey,placeholder:e.placeholder,mode:e.mode}}),t("div",{staticClass:"tGrid-cell tGrid-cell--shrink"},[t("button",{staticClass:"space--ml-1",class:{"hide--visibility":e.vals.length<2},attrs:{disabled:"disabled"===e.mode,type:"button"},on:{click:function(t){return e.vals.splice(a-1+e.skip,1)}}},[t("span",{staticClass:"btn btn--mode-white text--color-grey"},[t("BaseIcon",{attrs:{name:"cross"}})],1)])])],1)})),e.remaining>0&&e.vals.length<e.max?t("button",{staticClass:"btn space--mt-3",attrs:{disabled:!e.vals[e.vals.length-1]||"disabled"===e.mode,type:"button"},on:{click:function(t){return e.vals.push(e.nextValue)}}},[e._t("addButton")],2):e._e()],2)}),[],!1,null,null,null).exports,{components:{FormCheckbox:r.b,FormInputAdditionBox:r.f,FormInputIcon:r.h},mixins:[s.b],props:{allLabel:{type:String,default:""},highlight:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},disabledCheckboxId:{type:String,default:null}},computed:{displayLabel(){if(this.allLabel&&this.allSelected)return this.allLabel;const e=this.selectedValue;return e.length?e.map((e=>e[this.textKey])).join("".concat(this.separator," ")):this.placeholder},filterDisplayLabel(){return this.displayLabel!==this.placeholder?this.displayLabel:""},allSelected(){return this.selected.length===this.options.length},items(){const e=this.selectedValue,t=this.valueKey;return(this.searchable?this.filteredOptions:this.options).map((a=>Object.assign({},a,{checked:e.map(this.mapValue).indexOf(a[t])>-1})))},inputClasses(){const e=this.selectedValue;return{"mute--text":!e.length||e.length===this.options.length&&this.allLabel,"text--color-brandPrimary":this.highlight&&(e.length<this.options.length||!this.allLabel)}}},created(){this.mapValue=this.mapValue.bind(this),this.mapItem=this.mapItem.bind(this)},methods:{handleFilterClick(){this.toggleLayer(),this.setFilterValue("")},mapValue(e){return e[this.valueKey]},mapItem(e){return this.retainValue?e:this.mapValue(e)},selectAll(){this.selectedValue=this.options.map(this.mapItem)},toggleItem(e,t){let a=[...this.selectedValue];e.checked=t,t?a.push(this.mapItem(e)):a.splice(a.findIndex((t=>this.mapValue(t)===this.mapValue(e))),1),this.selectedValue=a}}}),h=Object(i.a)(p,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.expandLayer,expression:"expandLayer"}],staticClass:"multiSelect aGrid width--all-12"},[t("div",{staticClass:"input-wrapper dropdown flex aGrid",class:{"input-wrapper--focus":e.expanded}},[e.searchable||e.disabled?t("div",{staticClass:"width--all-12"},[e.expanded?t("input",{staticClass:"input",attrs:{type:"text",autocomplete:"off",disabled:e.disabled,placeholder:e.filterDisplayLabel},domProps:{value:e.filterValue},on:{input:function(t){return e.setFilterValue(t.target.value)}}}):t("input",{staticClass:"input",attrs:{type:"text",autocomplete:"off",disabled:e.disabled,placeholder:e.placeholder},domProps:{value:e.filterDisplayLabel},on:{click:function(t){return t.stopPropagation(),e.handleFilterClick.apply(null,arguments)}}})]):[e.showIcon?t("FormInputAdditionBox",{staticClass:"pointerEvents--none",attrs:{left:""}},[t("FormInputIcon",{attrs:{name:"star-empty"}})],1):e._e(),t("FormInputAdditionBox",{staticClass:"pointerEvents--none",attrs:{right:""}},[t("FormInputIcon",{attrs:{name:"down",color:"charcoalTint","icon-class":"input-icon--active"}})],1),t("div",{staticClass:"input tGrid tGrid--auto width--all-12 clickable",class:{"input-with-icon--l input-with-icon--r":e.showIcon},on:{click:function(t){return t.stopPropagation(),e.toggleLayer()}}},[t("span",{staticClass:"tGrid-cell tGrid-cell--preventOverflow",class:e.inputClasses},[t("span",{staticClass:"input-label box--all-b",class:{"input-label--ellipsed overflow--ellipsis":e.ellipsis}},[e._v(" "+e._s(e.displayLabel)+" ")])])])]],2),e.expanded?t("div",{staticClass:"dropdown-content zIndex--popover overflow--scrollY aGrid-item",attrs:{"data-handler":"scrollable"}},[e.allLabel?t("FormCheckbox",{staticClass:"multiSelect-item width--all-12 space--v-2 space--h-3 boxSec-div",attrs:{checked:e.allSelected},on:{click:e.selectAll},scopedSlots:e._u([{key:"inline-label",fn:function(){return[e._v(" "+e._s(e.allLabel)+" ")]},proxy:!0}],null,!1,1138682325)}):e._e(),e._l(e.items,(function(a,s){return t("FormCheckbox",{key:a[e.valueKey],staticClass:"multiSelect-item width--all-12 space--v-3 space--h-3 boxSec-div",class:"",attrs:{checked:a.checked,disabled:e.disabledCheckboxId===a[e.valueKey]},on:{update:function(t){return e.toggleItem(a,t)}},scopedSlots:e._u([{key:"inline-label",fn:function(){return[e._t("option-label",(function(){return[e._v(" "+e._s(a[e.textKey])+" ")]}),{item:a})]},proxy:!0}],null,!0)})}))],2):e._e()])}),[],!1,null,null,null),m=h.exports},555:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var s=a(5),r=a(4),n=a(151);const i=e=>({pushPermission:null==e?void 0:e.pushPermission,pushType:null==e?void 0:e.pushType}),o={updatePushType(e,t){let{commit:a}=e;a("UPDATE_PUSH_TYPE",t)},updatePushPermission(e,t){let{commit:a}=e;a("UPDATE_PUSH_PERMISSION",t)}},l={UPDATE_PUSH_TYPE(e,t){e.pushType=t},UPDATE_PUSH_PERMISSION(e,t){e.pushPermission=t}};var c=a(553);const u=()=>{const e=Object(s.computed)((()=>{var e;return null===(e=r.a.state.pushNotifications)||void 0===e?void 0:e.pushPermission})),t=Object(s.computed)((()=>{var e;return null===(e=r.a.state.pushNotifications)||void 0===e?void 0:e.pushType})),a=Object(s.computed)((()=>null!==t.value&&!Object(c.c)()&&"prompt"===e.value));return{pushSupported:c.d,pushPermission:e,showPermissionModal:a,setPermissionModalSeen:c.e,pushType:t,manageVisitorPushSubscription:c.b,subscribeVisitorToPush:c.f}},d=Object(n.a)("pushNotifications",(e=>({namespaced:!0,state:i(e),mutations:l,actions:o})))},556:function(e,t,a){},557:function(e,t,a){},558:function(e,t,a){"use strict";var s=a(570),r=a.n(s),n={name:"BaseCarousel",provide(){return{carousel:this}},props:{mode:{type:String,default:"none"},activeSlide:{type:Number,default:null}},data:()=>({width:0,pageWidth:0,offset:0}),computed:{pages(){return Math.ceil(parseFloat(this.width/this.pageWidth).toFixed(2))||0},page(){return this.offset+this.pageWidth>=this.width?this.pages:Math.ceil(Math.round(100*this.offset/this.pageWidth)/100)+1},isNext(){return Math.ceil(this.offset+this.pageWidth)<this.width},isPrev(){return this.offset>0}},watch:{activeSlide(){this.scrollToActivePage()},page(e){this.$emit("activeSlideChanged",e)}},mounted(){this.scrollToActivePage()},methods:{init(e,t,a){this.width=e,this.pageWidth=t,this.scrollUpdate(a)},scrollUpdate(e){this.offset=e},scrollToPage(e){this.$emit("scrollTo",(r()(this.pages,1,e)-1)*this.pageWidth)},next(){this.$emit("next")},prev(){this.$emit("prev")},scrollToActivePage(){this.activeSlide&&setTimeout((()=>{this.scrollToPage(this.activeSlide)}),0)}}},i=a(44),o=Object(i.a)(n,(function(){var e=this;return(0,e._self._c)("div",[e._t("default",null,{page:e.page,pages:e.pages})],2)}),[],!1,null,null,null);t.a=o.exports},559:function(e,t,a){"use strict";var s=a(86),r=a.n(s),n=a(714),i=a.n(n),o=a(562),l=a(24);i.a.polyfill();var c={components:{IntersectionBoundary:o.a},inject:["carousel"],props:{bar:{type:Boolean,default:!1},smoothScroll:{type:Boolean,default:!0},keysControl:{type:Boolean,default:!1},persistentSpacing:{type:Boolean,default:!1}},data:()=>({isPreventScrollDebounce:!1}),computed:{classes(){return{"hide-scrollbar":!this.bar,"carousel--isPrev":this.carousel.isPrev,"carousel--isNext":this.carousel.isNext,"scrollBox-container--space":l.d||this.persistentSpacing}}},async mounted(){await this.$nextTick(),this.init();const e=r()(this.init,100),t=r()(this.scrollUpdate,150),a=()=>{this.isPreventScrollDebounce?this.scrollUpdate():t(),this.isPreventScrollDebounce=!1};this.$el.addEventListener("scroll",a),window.addEventListener("resize",e),this.$once("hook:beforeDestroy",(()=>{this.$el.removeEventListener("scroll",a),window.removeEventListener("resize",e)})),this.carousel.$on("scrollTo",this.scrollTo),this.carousel.$on("next",this.next),this.carousel.$on("prev",this.prev),this.keysControl&&window.addEventListener("keydown",this.handleKeypress)},beforeDestroy(){this.keysControl&&window.removeEventListener("keydown",this.handleKeypress)},async updated(){await this.$nextTick(),this.init()},methods:{init(){this.carousel.init(this.$el.scrollWidth,this.$el.getBoundingClientRect().width,this.$el.scrollLeft)},scrollUpdate(){this.carousel.scrollUpdate(this.$el.scrollLeft)},scrollTo(e){this.$el.scrollTo(Object.assign({left:e},this.smoothScroll?{behavior:"smooth"}:{}))},filledWidth(e,t){let a=0;for(let s of e){const e=s.getBoundingClientRect().width;if(a+e-t>2)break;a+=e}return a},next(){const e=this.carousel.offset+this.carousel.pageWidth,t=this.filledWidth([...this.$el.children],e);this.preventScrollDebounce(),this.scrollTo(t)},prev(){const e=Math.ceil(this.carousel.width-(this.carousel.offset-this.carousel.pageWidth)),t=e<this.carousel.width?this.filledWidth([...this.$el.children].reverse(),e):this.carousel.width;this.preventScrollDebounce(),this.scrollTo(this.carousel.width-t)},preventScrollDebounce(){this.smoothScroll||(this.isPreventScrollDebounce=!0)},handleKeypress(e){const{key:t}=e;"ArrowRight"===t&&this.next(),"ArrowLeft"===t&&this.prev()},isTouchScreen:()=>l.d}},u=a(44),d=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("IntersectionBoundary",[t("div",{staticClass:"scrollBox-container overflow--avoid-vClip flex flex--grow-1 overflow--scrollX-raw",class:e.classes},[e._t("default")],2)])}),[],!1,null,null,null);t.a=d.exports},560:function(e,t,a){"use strict";var s={components:{CarouselScrollToPage:a(508).h},inject:["carousel"],props:{showArrows:{type:Boolean,default:!0},pagesLength:{type:Number,required:!1}},computed:{pages(){var e;return null!==(e=this.pagesLength)&&void 0!==e?e:this.carousel.pages}}},r=a(44),n=Object(r.a)(s,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex boxAlign-ai--all-c"},[e.showArrows?t("CarouselScrollToPage",{attrs:{variant:"tertiary",mode:"default",size:"s",page:e.carousel.page-1}},[t("BaseIcon",{attrs:{name:"left"}})],1):e._e(),t("ol",{staticClass:"overflow--wrap-off lbox--v-2 boxAlign-jc--all-c width--all-12"},e._l(e.pages,(function(a,s){return t("li",{key:s,staticClass:"clickable size--all-s box--all-i space--h-1 space--v-1",attrs:{title:e.$t("Página :number",{replaces:{number:s+1}})}},[t("CarouselScrollToPage",{attrs:{page:a,pages:e.pages},scopedSlots:e._u([{key:"default",fn:function({disabled:e}){return[t("span",{staticClass:"dot",class:e?"bg--color-brandPrimary":"bg--color-greyTint"})]}}],null,!0)})],1)})),0),e.showArrows?t("CarouselScrollToPage",{attrs:{variant:"tertiary",mode:"default",size:"s",page:e.carousel.page+1}},[t("BaseIcon",{attrs:{name:"right"}})],1):e._e()],1)}),[],!1,null,null,null);t.a=n.exports},561:function(e,t,a){"use strict";var s=a(3),r=a(86),n=a.n(r),i=a(585),o=a(552),l=(a(569),a(509));const c=(e,t)=>"function"==typeof t?t(e):"string"==typeof e?e:e?e[t]:null;var u={components:{AutoSuggestListResult:o.a,FormInputLabeled:l.i,FormInputIcon:l.h,FormInputButton:l.g},mixins:[i.a],provide:()=>({$showError:()=>!1}),props:{items:{type:[Array,Function],required:!1},itemValue:{type:[String,Function],default:"value"},itemText:{type:[String,Function],default:"text"},loose:{type:Boolean,default:!1},name:{type:String,default:null},disabled:{type:Boolean,default:!1},clearQuery:{type:Boolean,default:!1},noFilter:{type:Boolean,default:!1},loadSuggestionsOnFocus:{type:Boolean,default:!1},closeOnClear:{type:Boolean,default:!1},placeholder:{type:String,default:null},queryPlaceholder:{type:String,default:null},queryValue:{type:String,default:null},clearable:{type:Boolean,default:!1},manualClean:{type:Boolean,default:!1},inputIcon:{type:String,default:"search"},isIconRight:{type:Boolean,default:!1},listIcon:{type:String,default:null},height:{type:String,default:null},inputClasses:{type:String,default:""},tabindex:{type:Number},keepQueryInSearch:{type:Boolean,default:!1}},data(){return{suggestions:Array.isArray(this.items)?this.items:[],query:null,highlighted:null,loading:!1,isFocused:!1,hideResults:!0}},computed:{iconPosition(){return this.isIconRight?"right":"left"},loadSuggestionsDebounced(){return n()(this.loadSuggestions,500)},isInputMode(){return null!==this.query&&this.isFocused},equalisedSuggestions(){return this.isInputMode?this.suggestions.map(this.equalise):[]},filteredSuggestions(){return this.noFilter?this.equalisedSuggestions:this.equalisedSuggestions.filter((e=>e.text.toLowerCase().includes(this.query.toLowerCase())))},equalisedValue(){return this.selectedValue?this.equalise(this.selectedValue):this.query?this.equalise(this.query):{value:"",text:""}},inputModel:{get(){return this.isInputMode?this.query:this.equalisedValue.text},set(e){this.manualClean&&0===e.length&&this.clear(),this.query=e}},showResults(){return this.filteredSuggestions.length&&!this.hideResults},isShowSpinner(){return this.isInputMode&&this.loading||"spinner"===this.inputIcon},searchResultsPageQuery:()=>new URL(document.location).searchParams.get("q")},watch:{showResults(e){this.$emit("show-results",e)},filteredSuggestions(){this.highlighted=null},async query(e){(this.query&&!Array.isArray(this.items)||!this.closeOnClear)&&this.loadSuggestionsDebounced(e)},items(){this.suggestions=Array.isArray(this.items)?this.items:[]}},created(){this.query=this.queryValue||this.searchResultsPageQuery},methods:{equalise(e){return{value:c(e,this.itemValue),text:c(e,this.itemText),original:e}},onBlur(){this.$emit("blur")},onFocus(e){this.$refs.suggestions.addEventListener("touchstart",(()=>e.target.blur()),{passive:!0}),this.loadSuggestionsOnFocus&&this.loadSuggestions(this.query),this.$emit("focus"),this.startInput(),this.hideResults=!1,this.isFocused=!0},startInput(){this.query=this.clearQuery?"":this.equalisedValue.text},endInput(e){this.hideSuggestions(),e.target.blur()},hideSuggestions(e){this.$refs.suggestions.removeEventListener("touchstart",(()=>e.target.blur())),this.hideResults=!0,this.isFocused=!1},clear(){this.query="",this.selectedValue=null,this.closeOnClear&&this.$emit("close-search")},highlight(e){this.highlighted=e},moveHighlight(e){const t=null===this.highlighted?-1:this.filteredSuggestions.indexOf(this.highlighted);if(-1===e&&null===this.highlighted)return;const a=Math.max(0,Math.min(this.filteredSuggestions.length-1,t+e));this.highlight(this.filteredSuggestions[a]),this.scrollToFocus()},isIncluded(e){return this.filteredSuggestions.some((t=>t.value===e.value))},select(e,t){if(!this.loose&&!this.isIncluded(t))return;this.selectedValue=t?t.original:null;const a=this.$refs.suggestions.querySelector("a"),s=this.$refs.suggestions.querySelector("a.autoSuggest-suggestion--selected");if(this.keepQueryInSearch)return this.query=t.original.name,this.hideResults=!0,void this.$refs.input.blur();a||(this.query=null,this.$refs.input.blur()),s&&e instanceof KeyboardEvent&&(e.preventDefault(),s.click())},scrollToFocus(){s.a.scrollTo(this.$refs.suggestions.querySelector(".autoSuggest-suggestion--selected"),this.$refs.suggestions)},async loadSuggestions(e){this.loading=!0;try{this.suggestions=await this.items(e)||[]}catch(e){if(e instanceof Error)throw e}finally{this.loading=!1}}}},d=a(44),p=Object(d.a)(u,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideSuggestions,expression:"hideSuggestions"}],ref:"autoSuggest",staticClass:"autoSuggest dropdown"},[t("FormInputLabeled",{directives:[{name:"track",rawName:"v-track:input.focus",arg:"input",modifiers:{focus:!0}}],ref:"input",attrs:{placeholder:e.isInputMode&&e.queryPlaceholder||e.placeholder,disabled:e.disabled,name:e.name,tabindex:e.tabindex,autocomplete:"off",spellcheck:"false","input-class":`${e.inputClasses} `},on:{keydown:[function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.select(t,e.highlighted||e.equalise(e.query))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.moveHighlight(1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.moveHighlight(-1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.endInput.apply(null,arguments)}],focus:e.onFocus,blur:e.onBlur},scopedSlots:e._u(["left"===e.