/*! For license information please see nr-spa.1097a448-1.238.0.min.js.LICENSE.txt */
"use strict";(self["webpackChunk:NRBA-1.238.0.PROD"]=self["webpackChunk:NRBA-1.238.0.PROD"]||[]).push([[111],{1199:(e,t,n)=>{n.d(t,{R:()=>s,z:()=>r});var i=[];function r(e){if(0===i.length)return!0;if(void 0===e.hostname)return!1;for(var t=0;t<i.length;t++){var n=i[t];if("*"===n.hostname)return!1;if(a(n.hostname,e.hostname)&&o(n.pathname,e.pathname))return!1}return!0}function s(e){if(i=[],e&&e.length)for(var t=0;t<e.length;t++){let n=e[t];if(!n)continue;0===n.indexOf("http://")?n=n.substring(7):0===n.indexOf("https://")&&(n=n.substring(8));const r=n.indexOf("/");let s,a;r>0?(s=n.substring(0,r),a=n.substring(r)):(s=n,a="");let[o]=s.split(":");i.push({hostname:o,pathname:a})}}function a(e,t){return!(e.length>t.length)&&t.indexOf(e)===t.length-e.length}function o(e,t){return 0===e.indexOf("/")&&(e=e.substring(1)),0===t.indexOf("/")&&(t=t.substring(1)),""===e||e===t}},2573:(e,t,n)=>{n.d(t,{o:()=>h});var i=n(4247),r=n(1117),s=n(8673),a=n(8310),o=n(5763),c=n(3860);class h extends r.w{constructor(e,t,n){super(n),this.endpoint=e,this.opts=t||{},this.started=!1,this.timeoutHandle=null,this.aborted=!1,this.harvest=new s.M(this.sharedContext),(0,a.L)(this.unload.bind(this),(0,o.Mt)(this.sharedContext.agentIdentifier,"allow_bfcache")),this.sharedContext?.ee.on(c.wO.RESET,(()=>this.runHarvest({forceNoRetry:!0})))}unload(){this.aborted||(this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}))}startTimer(e,t){this.interval=e,this.started=!0,this.scheduleHarvest(null!=t?t:this.interval)}stopTimer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.aborted=e,this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}scheduleHarvest(e,t){this.timeoutHandle||(null==e&&(e=this.interval),this.timeoutHandle=setTimeout((()=>{this.timeoutHandle=null,this.runHarvest(t)}),1e3*e))}runHarvest(e){if(this.aborted)return;const t=t=>{e?.forceNoRetry&&(t.retry=!1),this.onHarvestFinished(e,t)};let n,r,s=[];if(this.opts.getPayload){if(n=i.qD({isFinalHarvest:e?.unload}),!n)return!1;const t=!e?.unload&&n===i.Be;if(r=this.opts.getPayload({retry:t}),!r)return void(this.started&&this.scheduleHarvest());r="[object Array]"===Object.prototype.toString.call(r)?r:[r],s.push(...r)}let a=e=>this.harvest.sendX(e);s.length?a=this.opts.raw?e=>this.harvest._send(e):e=>this.harvest.send(e):s.push(void 0),s.forEach((i=>{a({endpoint:this.endpoint,payload:i,opts:e,submitMethod:n,cbFinished:t,customUrl:this.opts.customUrl,raw:this.opts.raw})})),this.started&&this.scheduleHarvest()}onHarvestFinished(e,t){if(this.opts.onFinished&&this.opts.onFinished(t),t.sent&&t.retry){const n=t.delay||this.opts.retryDelay;this.started&&n?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(n,e)):!this.started&&n&&this.scheduleHarvest(n,e)}}}},8673:(e,t,n)=>{n.d(t,{M:()=>E});var i=n(1284),r=n(4351),s={"%2C":",","%3A":":","%2F":"/","%40":"@","%24":"$","%3B":";"},a=(0,i.D)(s,(function(e){return e})),o=new RegExp(a.join("|"),"g");function c(e){return s[e]}function h(e){return null==e?"null":encodeURIComponent(e).replace(o,c)}function u(e,t){var n=0,s="";return(0,i.D)(e,(function(e,i){var a,o,c=[];if("string"==typeof i||!Array.isArray(i)&&null!=i&&i.toString().length)a="&"+e+"="+h(i),n+=a.length,s+=a;else if(Array.isArray(i)&&i.length){for(n+=9,o=0;o<i.length&&(a=h((0,r.P)(i[o])),n+=a.length,!(void 0!==t&&n>=t));o++)c.push(a);s+="&"+e+"=%5B"+c.join(",")+"%5D"}})),s}function d(e,t){return t&&"string"==typeof t?"&"+e+"="+h(t):""}var l=n(4247);function f(){return""+location}var p=n(5763),m=n(4222),g=n(7894),v=n(3239),y=n(6141);function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e&&"object"==typeof e?(Object.keys(e).forEach((r=>{"object"==typeof e[r]?b(e[r],t,n,i):typeof e[r]!==n||i.includes(r)||(e[r]=t(e[r]))})),e):e}var S=n(1117),T=n(6818),N=n(385),w=n(50);const A={};class E extends S.w{constructor(e){super(e),this.tooManyRequestsDelay=(0,p.Mt)(this.sharedContext.agentIdentifier,"harvest.tooManyRequestsDelay")||60,this.obfuscator=new y.RR(this.sharedContext),this.getScheme=()=>!1===(0,p.Mt)(this.sharedContext.agentIdentifier,"ssl")?"http":"https",this._events={}}sendX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=l.qD({isFinalHarvest:e.opts?.unload}),n={retry:!e.opts?.unload&&t===l.Be,isFinalHarvest:!0===e.opts?.unload},i=this.createPayload(e.endpoint,n);return(this.obfuscator.shouldObfuscate()?this.obfuscateAndSend.bind(this):this._send.bind(this))({...e,payload:i,submitMethod:t})}send(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(this.obfuscator.shouldObfuscate()?this.obfuscateAndSend.bind(this):this._send.bind(this))(e)}obfuscateAndSend(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{payload:n={}}=t;return b(n,(function(){return e.obfuscator.obfuscateString(...arguments)}),"string",["e"]),this._send({...t,payload:n})}_send(e){let{endpoint:t,payload:n={},opts:i={},submitMethod:s,cbFinished:a,customUrl:o,raw:c,includeBaseParams:h=!0}=e;const d=(0,p.C5)(this.sharedContext.agentIdentifier);if(!d.errorBeacon)return!1;const f=(0,p.OP)(this.sharedContext.agentIdentifier);let{body:m,qs:g}=this.cleanPayload(n);if(0===Object.keys(m).length&&!i?.sendEmptyBody)return a&&a({sent:!1}),!1;let y="".concat(this.getScheme(),"://").concat(d.errorBeacon).concat("rum"!==t?"/".concat(t):"","/1/").concat(d.licenseKey);o&&(y=o),c&&(y="".concat(this.getScheme(),"://").concat(d.errorBeacon,"/").concat(t));const b=!c&&h?this.baseQueryString():"";let S=u(g,f.maxBytes);s||(s=l.qD({isFinalHarvest:i.unload})),""===b&&S.startsWith("&")&&(S=S.substring(1));const T="".concat(y,"?").concat(b).concat(S);!!g?.attributes?.includes("gzip")||(m="events"===t?m.e:(0,r.P)(m),m.length>75e4&&1===(A[t]=(A?.[t]||0)+1)&&(0,w.Z)("The Browser Agent is attempting to send a very large payload to /".concat(t,". This is usually tied to large amounts of custom attributes. Please check your configurations."))),m&&0!==m.length&&"{}"!==m&&"[]"!==m||(m=""),f.bytesSent[t]=(f.bytesSent[t]||0)+m?.length||0,f.queryBytesSent[t]=(f.queryBytesSent[t]||0)+T.split("?").slice(-1)[0]?.length||0;const E=[];E.push({key:"content-type",value:"text/plain"});let R=s({url:T,body:m,sync:i.unload&&(N.v6||N.w1),headers:E});if(!i.unload&&a&&s===l.Be){const e=this;R.addEventListener("load",(function(){const t={sent:!0,status:this.status};429===this.status?(t.retry=!0,t.delay=e.tooManyRequestsDelay):408!==this.status&&500!==this.status&&503!==this.status||(t.retry=!0),i.needResponse&&(t.responseText=this.responseText),a(t)}),(0,v.m$)(!1))}return R}baseQueryString(){const e=(0,p.OP)(this.sharedContext.agentIdentifier),t=(0,p.C5)(this.sharedContext.agentIdentifier),n=(0,m.f)(f()),i=this.obfuscator.shouldObfuscate()?this.obfuscator.obfuscateString(n):n;return["a="+t.applicationID,d("sa",t.sa?""+t.sa:""),d("v",T.q4),R(t),d("ct",e.customTransaction),"&rst="+(0,g.z)(),"&ck=0","&s="+(e.session?.state.value||"0"),d("ref",i),d("ptid",e.ptid?""+e.ptid:"")].join("")}createPayload(e,t){const n=this._events[e],i={body:{},qs:{}};if(Array.isArray(n)&&n.length>0)for(let e=0;e<n.length;e++){const r=n[e](t);r&&(i.body={...i.body,...r.body||{}},i.qs={...i.qs,...r.qs||{}})}return i}cleanPayload(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||Array.isArray(e)?e:"string"==typeof e?e.length>0?e:null:Object.entries(e||{}).reduce(((e,t)=>{let[n,i]=t;return("number"==typeof i||"string"==typeof i&&i.length>0||"object"==typeof i&&Object.keys(i||{}).length>0)&&(e[n]=i),e}),{});return{body:t(e.body),qs:t(e.qs)}}on(e,t){Array.isArray(this._events[e])||(this._events[e]=[]),this._events[e].push(t)}}function R(e){return e.transactionName?d("to",e.transactionName):d("t",e.tNamePlain||"Unnamed Transaction")}},777:(e,t,n)=>{n.d(t,{e:()=>i});const i={}},214:(e,t,n)=>{n.d(t,{AG:()=>c,FX:()=>u,n1:()=>d,uR:()=>h});var i=n(1284),r=n(4351),s=n(6141),a=Object.prototype.hasOwnProperty,o=64;function c(e,t,n){return e||0===e||""===e?t(e)+(n?",":""):"!"}function h(e,t){return t?Math.floor(e).toString(36):void 0===e||0===e?"":Math.floor(e).toString(36)}function u(e){var t=Object.hasOwnProperty("create")?Object.create(null):{},n=0;return function(i){if(void 0===i||""===i)return"";var r=new s.RR({agentIdentifier:e});i=String(i),r.shouldObfuscate()&&(i=r.obfuscateString(i));return a.call(t,i)?h(t[i],!0):(t[i]=n++,function(e){return"'"+e.replace(l,"\\$1")}(i))}}function d(e,t){var n=[];return(0,i.D)(e,(function(e,i){if(!(n.length>=o)){var s,a=5;switch(e=t(e),typeof i){case"object":i?s=t((0,r.P)(i)):a=9;break;case"number":a=6,s=i%1?i:i+".";break;case"boolean":a=i?7:8;break;case"undefined":a=9;break;default:s=t(i)}n.push([a,e+(s?","+s:"")])}})),n}var l=/([,\\;])/g},3860:(e,t,n)=>{n.d(t,{IK:()=>y,wO:()=>S,$s:()=>T});var i=n(4402),r=n(50),s=n(4351),a=n(8325);class o{constructor(e,t){if(!e.onEnd)throw new Error("onEnd handler is required");if(!t)throw new Error("ms duration is required");this.onEnd=e.onEnd,this.initialMs=t,this.startTimestamp=Date.now(),this.timer=this.create(this.onEnd,t)}create(e,t){return this.timer&&this.clear(),setTimeout((()=>e?e():this.onEnd()),t||this.initialMs)}clear(){clearTimeout(this.timer),this.timer=null}end(){this.clear(),this.onEnd()}isValid(){return this.initialMs-(Date.now()-this.startTimestamp)>0}}var c=n(385),h=n(7056),u=n(7956),d=n(7872);class l extends o{constructor(e,t){super(e,t),this.onPause="function"==typeof e.onPause?e.onPause:()=>{},this.onRefresh="function"==typeof e.onRefresh?e.onRefresh:()=>{},this.onResume="function"==typeof e.onResume?e.onResume:()=>{},this.remainingMs=void 0,e.refreshEvents||(e.refreshEvents=["click","keydown","scroll"]);try{this.abortController=new AbortController}catch(e){}if(c.il&&e.ee){if(e.ee){const t=(0,d.D)(this.refresh.bind(this),500,{leading:!0});e.ee.on("fn-end",(n=>{e.refreshEvents.includes(n?.[0]?.type)&&t()}))}(0,u.N)((e=>{"hidden"===e?this.pause():(this.refresh(),this.onResume())}),!1,!1,this.abortController?.signal)}}abort(){this.clear(),this.abortController?.abort()}pause(){this.onPause(),clearTimeout(this.timer),this.remainingMs=this.initialMs-(Date.now()-this.startTimestamp)}refresh(e,t){this.clear(),this.timer=this.create(e,t),this.startTimestamp=Date.now(),this.remainingMs=void 0,this.onRefresh()}}var f=n(1214),p=n(9567),m=n(5546),g=n(3081),v=n(3325);const y={OFF:0,FULL:1,ERROR:2},b={value:"",inactiveAt:0,expiresAt:0,updatedAt:Date.now(),sessionReplay:y.OFF,sessionTraceMode:y.OFF,custom:{}},S={PAUSE:"session-pause",RESET:"session-reset",RESUME:"session-resume"};class T{constructor(e){this.setup(e)}setup(e){let{agentIdentifier:t,key:n,storage:r,value:s=(0,i.ky)(16),expiresMs:c=h.oD,inactiveMs:u=h.Hb}=e;if(!t||!n||!r)throw new Error("Missing required field(s):".concat(t?"":" agentID").concat(n?"":" key").concat(r?"":" storage"));this.agentIdentifier=t,this.storage=r,this.state={},this.sync(b),this.key=n,this.state.value=s,this.expiresMs=c,this.inactiveMs=u,this.ee=a.ee.get(t),(0,f.em)(this.ee);const d=this.read();c?(this.state.expiresAt=d?.expiresAt||this.getFutureTimestamp(c),this.expiresTimer=new o({onEnd:()=>{this.collectSM("expired",this),this.collectSM("duration",this),this.reset()}},this.state.expiresAt-Date.now())):this.state.expiresAt=1/0,u?(this.state.inactiveAt=d?.inactiveAt||this.getFutureTimestamp(u),this.inactiveTimer=new l({onEnd:()=>{this.collectSM("inactive",this),this.collectSM("duration",this),this.reset()},onRefresh:this.refresh.bind(this),onResume:()=>{this.ee.emit(S.RESUME)},onPause:()=>{this.initialized&&this.ee.emit(S.PAUSE),this.write((0,p.D)(this.state,b))},ee:this.ee,refreshEvents:["click","keydown","scroll"]},this.state.inactiveAt-Date.now())):this.state.inactiveAt=1/0,void 0===this.isNew&&(this.isNew=!Object.keys(d).length),this.isNew?this.write((0,p.D)(this.state,b),!0):this.sync(d),this.initialized=!0}get lookupKey(){return"".concat(h.Bq,"_").concat(this.key)}sync(e){Object.assign(this.state,e)}read(){try{const e=this.storage.get(this.lookupKey);if(!e)return{};const t="string"==typeof e?JSON.parse(e):e;return this.isInvalid(t)?{}:this.isExpired(t.expiresAt)?(this.collectSM("expired",this),this.collectSM("duration",t,!0),this.reset()):this.isExpired(t.inactiveAt)?(this.collectSM("inactive",this),this.collectSM("duration",t,!0),this.reset()):t}catch(e){return(0,r.Z)("Failed to read from storage API",e),{}}}write(e){try{if(!e||"object"!=typeof e)return;return e.updatedAt=Date.now(),this.sync(e),this.storage.set(this.lookupKey,(0,s.P)(this.state)),e}catch(e){return(0,r.Z)("Failed to write to the storage API",e),null}}reset(){try{return this.initialized&&this.ee.emit(S.RESET),this.storage.remove(this.lookupKey),this.inactiveTimer?.abort?.(),this.expiresTimer?.clear?.(),delete this.isNew,this.setup({agentIdentifier:this.agentIdentifier,key:this.key,storage:this.storage,expiresMs:this.expiresMs,inactiveMs:this.inactiveMs}),this.read()}catch(e){return{}}}refresh(){const e=this.read();this.write({...e,inactiveAt:this.getFutureTimestamp(this.inactiveMs)})}isExpired(e){return Date.now()>e}isInvalid(e){return!Object.keys(b).every((t=>Object.keys(e).includes(t)))}collectSM(e,t,n){let i,r;if("duration"===e){const e=t.expiresAt-t.expiresMs;i=(n?t.updatedAt:Date.now())-e,r="Session/Duration/Ms"}"expired"===e&&(r="Session/Expired/Seen"),"inactive"===e&&(r="Session/Inactive/Seen"),r&&(0,m.p)(g.xS,[r,i],void 0,v.D.metrics,this.ee)}getFutureTimestamp(e){return Date.now()+e}syncCustomAttribute(e,t){if(c.il)if(null===t){const t=this.read();t.custom&&(delete t.custom[e],this.write({...t}))}else{const n=this.read();this.custom={...n?.custom||{},[e]:t},this.write({...n,custom:this.custom})}}}},5998:(e,t,n)=>{n.d(t,{uB:()=>m,wu:()=>p,zJ:()=>f});var i="Start",r="End",s="unloadEvent",a="redirect",o="domainLookup",c="onnect",h="request",u="response",d="loadEvent",l="domContentLoadedEvent",f=[];function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t)return n.of=e,g(n.of,n,"n",!0),g(t[s+i],n,"u",f),g(t[a+i],n,"r",f),g(t[s+r],n,"ue",f),g(t[a+r],n,"re",f),g(t["fetch"+i],n,"f",f),g(t[o+i],n,"dn",f),g(t[o+r],n,"dne",f),g(t["c"+c+i],n,"c",f),g(t["secureC"+c+"ion"+i],n,"s",f),g(t["c"+c+r],n,"ce",f),g(t[h+i],n,"rq",f),g(t[u+i],n,"rp",f),g(t[u+r],n,"rpe",f),g(t.domLoading,n,"dl",f),g(t.domInteractive,n,"di",f),g(t[l+i],n,"ds",f),g(t[l+r],n,"de",f),g(t.domComplete,n,"dc",f),g(t[d+i],n,"l",f),g(t[d+r],n,"le",f),n}function m(e,t){var n;return g("number"==typeof(n=e.type)?n:{navigate:void 0,reload:1,back_forward:2,prerender:3}[n],t,"ty"),g(e.redirectCount,t,"rc"),t}function g(e,t,n,i){if("number"==typeof e&&e>0){if(i){const n=t?.of>0?t.of:0;e=Math.max(e-n,0)}e=Math.round(e),t[n]=e}f.push(e)}},8310:(e,t,n)=>{n.d(t,{L:()=>o});var i=n(3239),r=n(7872),s=n(385),a=n(7956);if(s.v6){s._A.cleanupTasks=[];const e=s._A.close;s._A.close=()=>{for(let e of s._A.cleanupTasks)e();e()}}function o(e,t){if(s.il)if(t)(0,a.N)(e,!0),(0,i.bP)("pagehide",e);else{var n=(0,r.Z)(e);!s.IF||navigator.sendBeacon?(0,i.bP)("pagehide",n):(0,i.bP)("beforeunload",n),(0,i.bP)("unload",n)}else s.v6&&s._A.cleanupTasks.push(e)}},4222:(e,t,n)=>{n.d(t,{f:()=>s});var i=/([^?#]*)[^#]*(#[^?]*|$).*/,r=/([^?#]*)().*/;function s(e,t){return e.replace(t?i:r,"$1$2")}},2271:(e,t,n)=>{n.d(t,{V:()=>r});var i=n(385);function r(){return Boolean("file:"===i._A?.location?.protocol)}},7872:(e,t,n)=>{function i(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=i?.leading||!1;let s;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];r&&void 0===s&&(e.apply(t,a),s=setTimeout((()=>s=clearTimeout(s)),n)),r||(clearTimeout(s),s=setTimeout((()=>{e.apply(t,a)}),n))}}function r(e){var t=this;let n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];e.apply(t,r)}}}n.d(t,{D:()=>i,Z:()=>r})},6141:(e,t,n)=>{n.d(t,{$c:()=>h,Ng:()=>u,RR:()=>c});var i=n(5763),r=n(1117),s=n(2271),a=n(50),o={regex:/^file:\/\/(.*)/,replacement:atob("ZmlsZTovL09CRlVTQ0FURUQ=")};class c extends r.w{shouldObfuscate(){return h(this.sharedContext.agentIdentifier).length>0}obfuscateString(e){if(!e||"string"!=typeof e)return e;for(var t=h(this.sharedContext.agentIdentifier),n=e,i=0;i<t.length;i++){var r=t[i].regex,s=t[i].replacement||"*";n=n.replace(r,s)}return n}}function h(e){var t=[],n=(0,i.Mt)(e,"obfuscate")||[];return t=t.concat(n),(0,s.V)()&&t.push(o),t}function u(e){for(var t=!1,n=!1,i=0;i<e.length;i++){"regex"in e[i]?"string"==typeof e[i].regex||e[i].regex instanceof RegExp||((0,a.Z)('An obfuscation replacement rule contains a "regex" value with an invalid type (must be a string or RegExp)'),n=!0):((0,a.Z)('An obfuscation replacement rule was detected missing a "regex" value.'),n=!0);var r=e[i].replacement;r&&"string"!=typeof r&&((0,a.Z)('An obfuscation replacement rule contains a "replacement" value with an invalid type (must be a string)'),t=!0)}return!t&&!n}},4247:(e,t,n)=>{n.d(t,{Be:()=>s,qD:()=>r});var i=n(385);function r(){let{isFinalHarvest:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&i.il&&i.Nk?a:s}function s(e){let{url:t,body:n=null,sync:i,method:r="POST",headers:s=[{key:"content-type",value:"text/plain"}]}=e;const a=new XMLHttpRequest;a.open(r,t,!i);try{"withCredentials"in a&&(a.withCredentials=!0)}catch(e){}return s.forEach((e=>{a.setRequestHeader(e.key,e.value)})),a.send(n),a}function a(e){let{url:t,body:n}=e;try{return window.navigator.sendBeacon.bind(window.navigator)(t,n)}catch(e){return!1}}},5039:(e,t,n)=>{n.r(t),n.d(t,{Aggregate:()=>m});var i=n(4322),r=n(4351),s=n(214),a=n(5546),o=n(5763),c=n(2573),h=n(1199),u=n(7825),d=n(8e3),l=n(3325),f=n(3081),p=n(2222);class m extends p.m{static featureName=u.t;constructor(e,t){super(e,t,u.t);const n=(0,o.P_)(e),p=!1!==n.ajax.enabled;if((0,i.X)("xhr",w,this.featureName,this.ee),!p)return void(0,d.L)(this.agentIdentifier,this.featureName);const m=(0,o.OP)(e).denyList;(0,h.R)(m);let g=[],v={},y=[];const b=this.ee,S=n.ajax.harvestTimeSeconds||10,T=n.ajax.maxPayloadSize||1e6;this.storeXhr=w,this.prepareHarvest=A,this.getStoredEvents=function(){return{ajaxEvents:g,spaAjaxEvents:v}},b.on("interactionSaved",(e=>{v[e.id]&&delete v[e.id]})),b.on("interactionDiscarded",(e=>{v[e.id]&&(v[e.id].forEach((function(e){g.push(e)})),delete v[e.id])}));const N=new c.o("events",{onFinished:function(e){e.retry&&y.length>0&&(g.unshift(...y),y=[])},getPayload:A},this);return b.on("drain-".concat(this.featureName),(()=>{N.startTimer(S)})),void(0,d.L)(this.agentIdentifier,this.featureName);function w(n,i,s,c,u){var d;if(i.time=s,d=n.cat?(0,r.P)([n.status,n.cat]):(0,r.P)([n.status,n.host,n.pathname]),(0,a.p)("bstXhrAgg",["xhr",d,n,i],void 0,l.D.sessionTrace,b),t.store("xhr",d,n,i),p)if((0,h.z)(n)){var m=this,y={method:n.method,status:n.status,domain:n.host,path:n.pathname,requestSize:i.txSize,responseSize:i.rxSize,type:u,startTime:s,endTime:c,callbackDuration:i.cbTime};if(m.dt&&(y.spanId=m.dt.spanId,y.traceId=m.dt.traceId,y.spanTimestamp=m.dt.timestamp),this.spaNode){var S=this.spaNode.interaction.id;v[S]=v[S]||[],v[S].push(y)}else g.push(y)}else n.hostname===(0,o.C5)(e).errorBeacon?(0,a.p)(f.xS,["Ajax/Events/Excluded/Agent"],void 0,l.D.metrics,b):(0,a.p)(f.xS,["Ajax/Events/Excluded/App"],void 0,l.D.metrics,b)}function A(e){if(e=e||{},0===g.length)return null;for(var t=E(g,e.maxPayloadSize||T),n=[],i=0;i<t.length;i++)n.push({body:{e:t[i]}});return e.retry&&(y=g.slice()),g=[],n}function E(e,t,n){n=n||1;for(var i=[],r=function(e,t){t=t||e.length;for(var n=[],i=0,r=e.length;i<r;i+=t)n.push(new R(e.slice(i,i+t)));return n}(e,e.length/n),s=!1,a=0;a<r.length;a++){var o=r[a];if(o.tooBig(t)){if(1!==o.events.length){s=!0;break}}else i.push(o.payload)}return s?E(e,t,++n):i}function R(t){this.addString=(0,s.FX)(e),this.events=t,this.payload="bel.7;";for(var n=0;n<t.length;n++){var i=t[n],r=[(0,s.uR)(i.startTime),(0,s.uR)(i.endTime-i.startTime),(0,s.uR)(0),(0,s.uR)(0),this.addString(i.method),(0,s.uR)(i.status),this.addString(i.domain),this.addString(i.path),(0,s.uR)(i.requestSize),(0,s.uR)(i.responseSize),"fetch"===i.type?1:"",this.addString(0),(0,s.AG)(i.spanId,this.addString,!0)+(0,s.AG)(i.traceId,this.addString,!0)+(0,s.AG)(i.spanTimestamp,s.uR,!1)],a="2,",c=(0,s.n1)((0,o.C5)(e).jsAttributes||{},this.addString);r.unshift((0,s.uR)(c.length)),a+=r.join(","),c&&c.length>0&&(a+=";"+c.join(";")),n+1<t.length&&(a+=";"),this.payload+=a}this.tooBig=function(e){return e=e||T,2*this.payload.length>e}}}}},1028:(e,t,n)=>{n.r(t),n.d(t,{Aggregate:()=>M});const i=/([a-z0-9]+)$/i;function r(e){if(!e)return;const t=e.match(i);return t?t[1]:void 0}var s=/^\n+|\n+$/g;function a(e){return function(e){var t;if(e.length>100){var n=e.length-100;t=e.slice(0,50).join("\n"),t+="\n< ...truncated "+n+" lines... >\n",t+=e.slice(-50).join("\n")}else t=e.join("\n");return t}(e).replace(s,"")}var o=n(385),c=n(4222);function h(e){if("string"!=typeof e)return"";const t=(0,c.f)(e);return t===(0,c.f)(o.FN)?"<inline>":t}var u=!1,d=/function (.+?)\s*\(/,l=/^\s*at (?:((?:\[object object\])?(?:[^(]*\([^)]*\))*[^()]*(?: \[as \S+\])?) )?\(?((?:file|http|https|chrome-extension):.*?)?:(\d+)(?::(\d+))?\)?\s*$/i,f=/^\s*(?:(\S*|global code)(?:\(.*?\))?@)?((?:file|http|https|chrome|safari-extension).*?):(\d+)(?::(\d+))?\s*$/i,p=/^\s*at .+ \(eval at \S+ \((?:(?:file|http|https):[^)]+)?\)(?:, [^:]*:\d+:\d+)?\)$/i,m=/^\s*at Function code \(Function code:\d+:\d+\)\s*/i;function g(e){var t=null;try{if(t=function(e){if(!e.stack)return null;var t=e.stack.split("\n").reduce(v,{frames:[],stackLines:[],wrapperSeen:!1});return t.frames.length?{mode:"stack",name:e.name||y(e),message:e.message,stackString:a(t.stackLines),frames:t.frames}:null}(e),t)return t}catch(e){u}try{if(t=function(e){if(!("line"in e))return null;var t=e.name||y(e);if(!e.sourceURL)return{mode:"sourceline",name:t,message:e.message,stackString:t+": "+e.message+"\n    in evaluated code",frames:[{func:"evaluated code"}]};var n=h(e.sourceURL),i=t+": "+e.message+"\n    at "+n;e.line&&(i+=":"+e.line,e.column&&(i+=":"+e.column));return{mode:"sourceline",name:t,message:e.message,stackString:i,frames:[{url:n,line:e.line,column:e.column}]}}(e),t)return t}catch(e){u}try{if(t=function(e){var t=e.name||y(e);return t?{mode:"nameonly",name:t,message:e.message,stackString:t+": "+e.message,frames:[]}:null}(e),t)return t}catch(e){u}return{mode:"failed",stackString:"",frames:[]}}function v(e,t){let n=function(e){var t=e.match(f);t||(t=e.match(l));if(t)return{url:t[2],func:"Anonymous function"!==t[1]&&"global code"!==t[1]&&t[1]||null,line:+t[3],column:t[4]?+t[4]:null};if(e.match(p)||e.match(m)||"anonymous"===e)return{func:"evaluated code"}}(t);if(!n)return e.stackLines.push(t),e;var i;if((i=n.func)&&i.indexOf("nrWrapper")>=0&&(e.wrapperSeen=!0),!e.wrapperSeen){let i=h(n.url);i!==n.url&&(t=t.replace(n.url,i),n.url=i),e.stackLines.push(t),e.frames.push(n)}return e}function y(e){var t=d.exec(String(e.constructor));return t&&t.length>1?t[1]:"unknown"}function b(e){var t=0;if(!e||!e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}var S=n(4322),T=n(2573),N=n(4351),w=n(5546),A=n(1284),E=n(5763),R=n(7894),P=n(6660),x=n(8e3),I=n(3325),O=n(2222);class M extends O.m{static featureName=P.t;constructor(e,t){var n;super(e,t,P.t),n=this,this.stackReported={},this.observedAt={},this.pageviewReported={},this.errorCache={},this.currentBody,this.errorOnPage=!1,this.ee.on("interactionSaved",(e=>this.onInteractionSaved(e))),this.ee.on("interactionDiscarded",(e=>this.onInteractionDiscarded(e))),(0,S.X)("err",(function(){return n.storeError(...arguments)}),this.featureName,this.ee),(0,S.X)("ierr",(function(){return n.storeError(...arguments)}),this.featureName,this.ee);const i=(0,E.Mt)(this.agentIdentifier,"jserrors.harvestTimeSeconds")||10,r=new T.o("jserrors",{onFinished:function(){return n.onHarvestFinished(...arguments)}},this);r.harvest.on("jserrors",(function(){return n.onHarvestStarted(...arguments)})),this.ee.on("drain-".concat(this.featureName),(()=>{this.blocked||r.startTimer(i)})),(0,S.X)("block-err",(()=>{this.blocked=!0,r.stopTimer(!0)}),this.featureName,this.ee),(0,x.L)(this.agentIdentifier,this.featureName)}onHarvestStarted(e){var t=this.aggregator.take(["err","ierr","xhr"]);e.retry&&(this.currentBody=t);var n={body:t,qs:{}},i=(0,N.P)((0,E.OP)(this.agentIdentifier).releaseIds);return"{}"!==i&&(n.qs.ri=i),t&&t.err&&t.err.length&&!this.errorOnPage&&(n.qs.pve="1",this.errorOnPage=!0),n}onHarvestFinished(e){e.retry&&this.currentBody&&((0,A.D)(this.currentBody,((e,t)=>{for(var n=0;n<t.length;n++){var i=t[n],r=this.getBucketName(e,i.params,i.custom);this.aggregator.merge(e,r,i.metrics,i.params,i.custom)}})),this.currentBody=null)}nameHash(e){return b("".concat(e.exceptionClass,"_").concat(e.message,"_").concat(e.stack_trace||e.browser_stack_hash))}getBucketName(e,t,n){return"xhr"===e?b((0,N.P)(t))+":"+b((0,N.P)(n)):this.nameHash(t)+":"+b((0,N.P)(n))}buildCanonicalStackString(e){for(var t="",n=0;n<e.frames.length;n++){var i=e.frames[n],s=r(i.func);t&&(t+="\n"),s&&(t+=s+"@"),"string"==typeof i.url&&(t+=i.url),i.line&&(t+=":"+i.line)}return t}storeError(e,t,n,i){t=t||(0,R.z)();const r=(0,E.OP)(this.agentIdentifier);let s;if(!n&&r.onerror&&(s=r.onerror(e),s&&("string"!=typeof s.group||!s.group.length)))return;var a=g(e);const c={stackHash:b(this.buildCanonicalStackString(a)),exceptionClass:a.name,request_uri:o._A?.location.pathname};a.message&&(c.message=""+a.message),s?.group&&(c.errorGroup=s.group);var h,u=b("".concat(a.name,"_").concat(a.message,"_").concat(a.stackString));this.stackReported[u]?c.browser_stack_hash=b(a.stackString):(this.stackReported[u]=!0,c.stack_trace=(h=a.stackString).length>65530?h.substr(0,65530):h,this.observedAt[u]=r.offset+t),c.releaseIds=(0,N.P)(r.releaseIds),this.pageviewReported[u]||(c.pageview=1,this.pageviewReported[u]=!0),r?.session?.state?.sessionReplay&&(c.hasReplay=!0),c.firstOccurrenceTimestamp=this.observedAt[u];var d=n?"ierr":"err",l={time:t};const f=[d,u,c,l];if((0,w.p)("errorAgg",f,void 0,I.D.sessionTrace,this.ee),(0,w.p)("errorAgg",f,void 0,I.D.spa,this.ee),(0,w.p)("errorAgg",f,void 0,I.D.sessionReplay,this.ee),!this.blocked){var p=(0,E.C5)(this.agentIdentifier).jsAttributes;if(null!=c._interactionId)this.errorCache[c._interactionId]=this.errorCache[c._interactionId]||[],this.errorCache[c._interactionId].push([d,u,c,l,p,i]);else{var m={};(0,A.D)(p,y),i&&(0,A.D)(i,y);var v=u+":"+b((0,N.P)(m));this.aggregator.store(d,v,c,l,m)}}function y(e,t){m[e]=t&&"object"==typeof t?(0,N.P)(t):t}}onInteractionSaved(e){this.errorCache[e.id]&&!this.blocked&&(this.errorCache[e.id].forEach((t=>{var n={},i=t[4],r=t[5];(0,A.D)(i,o),(0,A.D)(e.root.attrs.custom,o),(0,A.D)(r,o);var s=t[2];s.browserInteractionId=e.root.attrs.id,delete s._interactionId,s._interactionNodeId&&(s.parentNodeId=s._interactionNodeId.toString(),delete s._interactionNodeId);var a=t[1]+e.root.attrs.id+":"+b((0,N.P)(n));function o(e,t){n[e]=t&&"object"==typeof t?(0,N.P)(t):t}this.aggregator.store(t[0],a,s,t[3],n)})),delete this.errorCache[e.id])}onInteractionDiscarded(e){this.errorCache&&this.errorCache[e.id]&&!this.blocked&&(this.errorCache[e.id].forEach((t=>{var n={},i=t[4],r=t[5];(0,A.D)(i,o),(0,A.D)(e.root.attrs.custom,o),(0,A.D)(r,o);var s=t[2];delete s._interactionId,delete s._interactionNodeId;var a=t[1]+":"+b((0,N.P)(n));function o(e,t){n[e]=t&&"object"==typeof t?(0,N.P)(t):t}this.aggregator.store(t[0],a,t[2],t[3],n)})),delete this.errorCache[e.id])}}},9026:(e,t,n)=>{n.r(t),n.d(t,{Aggregate:()=>q});var i=n(5763),r=n(4322),s=n(2573),a=n(3081),o=n(8e3),c=n(385);const h="React",u="Angular",d="AngularJS",l="Backbone",f="Ember",p="Vue",m="Meteor",g="Zepto",v="Jquery",y="MooTools";function b(){if(!c.il)return[];const e=[];try{(function(){try{return Object.prototype.hasOwnProperty.call(window,"React")||Object.prototype.hasOwnProperty.call(window,"ReactDOM")||Object.prototype.hasOwnProperty.call(window,"ReactRedux")||document.querySelector("[data-reactroot], [data-reactid]")||(()=>{const e=document.querySelectorAll("body > div");for(let t=0;t<e.length;t++)if(Object.prototype.hasOwnProperty.call(e[t],"_reactRootContainer"))return!0})()}catch(e){return!1}})()&&e.push(h),function(){try{return Object.prototype.hasOwnProperty.call(window,"angular")||document.querySelector(".ng-binding, [ng-app], [data-ng-app], [ng-controller], [data-ng-controller], [ng-repeat], [data-ng-repeat]")||document.querySelector('script[src*="angular.js"], script[src*="angular.min.js"]')}catch(e){return!1}}()&&e.push(d),function(){try{return Object.prototype.hasOwnProperty.call(window,"ng")||document.querySelector("[ng-version]")}catch(e){return!1}}()&&e.push(u),Object.prototype.hasOwnProperty.call(window,"Backbone")&&e.push(l),Object.prototype.hasOwnProperty.call(window,"Ember")&&e.push(f),Object.prototype.hasOwnProperty.call(window,"Vue")&&e.push(p),Object.prototype.hasOwnProperty.call(window,"Meteor")&&e.push(m),Object.prototype.hasOwnProperty.call(window,"Zepto")&&e.push(g),Object.prototype.hasOwnProperty.call(window,"jQuery")&&e.push(v),Object.prototype.hasOwnProperty.call(window,"MooTools")&&e.push(y)}catch(e){}return e}const S=/\{ \[native code\] \}/,T="Function.bind",N="Function.apply",w="Function.call",A="Array.includes",E="Array.from",R="Array.find",P="Array.flat",x="Array.flatMap",I="Object.assign",O="Object.entries",M="Object.values",k="Map",C="Set",j="WeakMap",F="WeakSet";var D=n(2271),L=n(6141),H=n(6818),_=n(3960),X=n(3239),B=n(2222),U=n(4351);const z={rum:"1",events:"Events",ins:"Ins",jserrors:"Jserrors",resources:"Resources"};class q extends B.m{static featureName=a.t9;constructor(e,t){let n;super(e,t,a.t9),(0,r.X)("block-err",(()=>{this.blocked=!0,n&&(n.aborted=!0)}),this.featureName,this.ee),(0,r.X)(a.xS,this.storeSupportabilityMetrics.bind(this),this.featureName,this.ee),(0,r.X)(a.vz,this.storeEventMetrics.bind(this),this.featureName,this.ee),this.singleChecks(),this.eachSessionChecks(),n=new s.o("jserrors",{onUnload:()=>this.unload()},this),n.harvest.on("jserrors",(()=>({body:this.aggregator.take(["cm","sm"])}))),(0,o.L)(this.agentIdentifier,this.featureName)}storeSupportabilityMetrics(e,t){if(this.blocked)return;const n=a.mY,i={name:e};this.aggregator.storeMetric(n,e,i,t)}storeEventMetrics(e,t){if(this.blocked)return;const n=a.gF,i={name:e};this.aggregator.store(n,e,i,t)}singleChecks(){this.storeSupportabilityMetrics("Generic/Version/".concat(H.q4,"/Detected"));const{distMethod:e,loaderType:t}=(0,i.OP)(this.agentIdentifier);t&&this.storeSupportabilityMetrics("Generic/LoaderType/".concat(t,"/Detected")),e&&this.storeSupportabilityMetrics("Generic/DistMethod/".concat(e,"/Detected")),c.il&&(0,_.K)((()=>{b().forEach((e=>{this.storeSupportabilityMetrics("Framework/"+e+"/Detected")}))})),function(){const e=[],t=function(){};try{"function"!=typeof t.bind||S.test(t.bind.toString())||e.push(T),"function"!=typeof t.apply||S.test(t.apply.toString())||e.push(N),"function"!=typeof t.call||S.test(t.call.toString())||e.push(w),"function"!=typeof[].includes||S.test([].includes.toString())||e.push(A),"function"!=typeof Array.from||S.test(Array.from.toString())||e.push(E),"function"!=typeof[].find||S.test([].find.toString())||e.push(R),"function"!=typeof[].flat||S.test([].flat.toString())||e.push(P),"function"!=typeof[].flatMap||S.test([].flatMap.toString())||e.push(x),"function"!=typeof Object.assign||S.test(Object.assign.toString())||e.push(I),"function"!=typeof Object.entries||S.test(Object.entries.toString())||e.push(O),"function"!=typeof Object.values||S.test(Object.values.toString())||e.push(M),"function"!=typeof Map||S.test(Map.toString())||e.push(k),"function"!=typeof Set||S.test(Set.toString())||e.push(C),"function"!=typeof WeakMap||S.test(WeakMap.toString())||e.push(j),"function"!=typeof WeakSet||S.test(WeakSet.toString())||e.push(F)}catch(e){}return e}().forEach((e=>{this.storeSupportabilityMetrics("Polyfill/"+e+"/Detected")})),(0,D.V)()&&this.storeSupportabilityMetrics("Generic/FileProtocol/Detected");const n=(0,L.$c)(this.agentIdentifier);n.length>0&&this.storeSupportabilityMetrics("Generic/Obfuscate/Detected"),n.length>0&&!(0,L.Ng)(n)&&this.storeSupportabilityMetrics("Generic/Obfuscate/Invalid")}eachSessionChecks(){c.il&&(0,X.bP)("pageshow",(e=>{e.persisted&&this.storeSupportabilityMetrics("Generic/BFCache/PageRestored")}))}unload(){try{if(this.resourcesSent)return;const e=(0,i.OP)(this.agentIdentifier),t=(0,i.C5)(this.agentIdentifier);this.resourcesSent=!0;const n=["beacon","fetch","xmlhttprequest"],r=["nr-data.net","newrelic.com","nr-local.net","localhost"];function s(e){return n.includes(e.initiatorType)}(performance?.getEntriesByType("resource")||[]).forEach((e=>{var t;t=e,r.some((e=>t.name.indexOf(e)>=0))?s(e)?this.storeSupportabilityMetrics("Generic/Resources/Ajax/Internal"):this.storeSupportabilityMetrics("Generic/Resources/Non-Ajax/Internal"):s(e)?this.storeSupportabilityMetrics("Generic/Resources/Ajax/External"):this.storeSupportabilityMetrics("Generic/Resources/Non-Ajax/External")})),Object.keys(e.bytesSent).forEach((t=>{this.storeSupportabilityMetrics("PageSession/Endpoint/".concat(z[t],"/BytesSent"),e.bytesSent[t])})),Object.keys(e.bytesSent).forEach((t=>{this.storeSupportabilityMetrics("PageSession/Endpoint/".concat(z[t],"/QueryBytesSent"),e.queryBytesSent[t])})),e.ptid&&this.storeSupportabilityMetrics("PageSession/Feature/SessionTrace/DurationMs",Math.round(performance.now()));const a=(0,U.P)(t.jsAttributes);if(this.storeSupportabilityMetrics("PageSession/Feature/CustomData/Bytes","{}"===a?0:a.length),"undefined"!=typeof performance){const o=performance.getEntriesByType("mark"),c=performance.getEntriesByType("measure");this.storeSupportabilityMetrics("Generic/Performance/Mark/Seen",o.length),this.storeSupportabilityMetrics("Generic/Performance/Measure/Seen",c.length)}}catch(h){}}}},1832:(e,t,n)=>{n.r(t),n.d(t,{Aggregate:()=>f});var i=n(1284),r=n(4351),s=n(4322),a=n(2573),o=n(4222),c=n(5763),h=n(4649),u=n(8e3),d=n(385),l=n(2222);class f extends l.m{static featureName=h.t;constructor(e,t){var n;super(e,t,h.t),n=this,this.eventsPerMinute=240,this.harvestTimeSeconds=(0,c.Mt)(this.agentIdentifier,"page_action.harvestTimeSeconds")||(0,c.Mt)(this.agentIdentifier,"ins.harvestTimeSeconds")||30,this.eventsPerHarvest=this.eventsPerMinute*this.harvestTimeSeconds/60,this.referrerUrl,this.currentEvents,this.events=[],this.att=(0,c.C5)(this.agentIdentifier).jsAttributes,d.il&&document.referrer&&(this.referrerUrl=(0,o.f)(document.referrer)),(0,s.X)("api-addPageAction",(function(){return n.addPageAction(...arguments)}),this.featureName,this.ee);var i=new a.o("ins",{onFinished:function(){return n.onHarvestFinished(...arguments)}},this);i.harvest.on("ins",(function(){return n.onHarvestStarted(...arguments)})),this.ee.on("drain-".concat(this.featureName),(()=>{this.blocked||i.startTimer(this.harvestTimeSeconds,0)})),(0,s.X)("block-ins",(()=>{this.blocked=!0,i.stopTimer(!0)}),this.featureName,this.ee),(0,u.L)(this.agentIdentifier,this.featureName)}onHarvestStarted(e){const{userAttributes:t,atts:n}=(0,c.C5)(this.agentIdentifier);var i={qs:{ua:t,at:n},body:{ins:this.events}};return e.retry&&(this.currentEvents=this.events),this.events=[],i}onHarvestFinished(e){e&&e.sent&&e.retry&&this.currentEvents&&(this.events=this.events.concat(this.currentEvents),this.currentEvents=null)}addPageAction(e,t,n){if(!(this.events.length>=this.eventsPerHarvest||this.blocked)){var s,a,h={};d.il&&window.document.documentElement&&(s=window.document.documentElement.clientWidth,a=window.document.documentElement.clientHeight);var u={timestamp:e+(0,c.OP)(this.agentIdentifier).offset,timeSinceLoad:e/1e3,browserWidth:s,browserHeight:a,referrerUrl:this.referrerUrl,currentUrl:(0,o.f)(""+location),pageUrl:(0,o.f)((0,c.OP)(this.agentIdentifier).origin),eventType:"PageAction"};(0,i.D)(u,l),(0,i.D)((0,c.C5)(this.agentIdentifier).jsAttributes,l),n&&"object"==typeof n&&(0,i.D)(n,l),h.actionName=t||"",this.events.push(h)}function l(e,t){h[e]=t&&"object"==typeof t?(0,r.P)(t):t}}}},3609:(e,t,n)=>{n.r(t),n.d(t,{Aggregate:()=>b});var i=n(5546),r=n(3325),s=n(385),a=n(8085),o=n(5998),c=n(4351),h=n(777),u=n(5763),d=n(8673),l=n(7633),f=n(8632);function p(e){const t=[],n=(0,f.fP)();try{Object.keys(n.initializedAgents[e].features).forEach((e=>{switch(e){case r.D.ajax:t.push("xhr");break;case r.D.jserrors:t.push("err");break;case r.D.pageAction:t.push("ins");break;case r.D.sessionTrace:t.push("stn");break;case r.D.spa:t.push("spa")}}))}catch(e){}return t}var m=n(8e3),g=n(2587),v=n(50),y=n(2222);class b extends y.m{static featureName=l.t9;constructor(e,t){if(super(e,t,l.t9),"undefined"==typeof PerformanceNavigationTiming||s.Tt)this.sendRum();else{this.alreadySent=!1;const t=(0,u.OP)(e);(0,a.mr)((e=>{let{value:n,entries:s}=e;if(this.alreadySent)return;this.alreadySent=!0,t[l.Dz]=Math.round(n);const a=s[0],o=Math.max(a.responseStart,a.activationStart||0);t[l.OJ]=Math.max(Math.round(a.loadEventEnd-o),0),(0,i.p)("timing",["load",Math.round(a.loadEventEnd)],void 0,r.D.pageViewTiming,this.ee),t[l.qw]=Math.max(Math.round(a.domContentLoadedEventEnd-o),0),this.sendRum()}))}}getScheme(){return!1===(0,u.Mt)(this.agentIdentifier,"ssl")?"http":"https"}sendRum(){const e=(0,u.C5)(this.agentIdentifier),t=(0,u.OP)(this.agentIdentifier),n=new d.M(this);if(!e.beacon)return;e.queueTime&&this.aggregator.store("measures","qt",{value:e.queueTime}),e.applicationTime&&this.aggregator.store("measures","ap",{value:e.applicationTime}),this.aggregator.store("measures","be",{value:s.il?t[l.Dz]:0}),this.aggregator.store("measures","fe",{value:s.il?t[l.OJ]:0}),this.aggregator.store("measures","dc",{value:s.il?t[l.qw]:0});const i={tt:e.ttGuid,us:e.user,ac:e.account,pr:e.product,af:p(this.agentIdentifier).join(","),...Object.entries(this.aggregator.get("measures")||{}).reduce(((e,t)=>{let[n,i]=t;return e[n]=i.params?.value,e}),{}),xx:e.extra,ua:e.userAttributes,at:e.atts};let r;if("object"==typeof e.jsAttributes&&Object.keys(e.jsAttributes).length>0&&(r={ja:e.jsAttributes}),s._A.performance)if("undefined"!=typeof PerformanceNavigationTiming){const e=s._A?.performance?.getEntriesByType("navigation")?.[0],n={timing:(0,o.wu)(t.offset,e,{}),navigation:(0,o.uB)(e,{})};i.perf=(0,c.P)(n)}else if("undefined"!=typeof PerformanceTiming){const e={timing:(0,o.wu)(t.offset,s._A.performance.timing,{},!0),navigation:(0,o.uB)(s._A.performance.navigation,{})};i.perf=(0,c.P)(e)}try{s._A.performance.getEntriesByType("paint").forEach((function(e){!e.startTime||e.startTime<=0||("first-paint"===e.name?i.fp=String(Math.floor(e.startTime)):"first-contentful-paint"===e.name&&(i.fcp=String(Math.floor(e.startTime))),h.e[e.name]=Math.floor(e.startTime))}))}catch(e){}n.send({endpoint:"rum",payload:{qs:i,body:r},opts:{needResponse:!0,sendEmptyBody:!0},cbFinished:e=>{let{status:t,responseText:n}=e;if(t>=400)this.ee.abort();else try{(0,g.N)(JSON.parse(n),this.agentIdentifier),(0,m.L)(this.agentIdentifier,this.featureName)}catch(e){this.ee.abort(),(0,v.Z)("RUM call failed. Agent shutting down.")}}})}}},3307:(e,t,n)=>{n.r(t),n.d(t,{Aggregate:()=>y});var i=n(8085);const r=e=>{let t;try{PerformanceObserver.supportedEntryTypes.includes("paint")&&(t=new PerformanceObserver((n=>{Promise.resolve().then((()=>{n.getEntries().forEach((n=>{if("first-paint"===n.name){t.disconnect();const i={name:"FP",value:n.startTime};e(i)}}))}))})),t.observe({type:"paint",buffered:!0}))}catch(e){}};var s=n(8310);var a=n(385),o=n(214),c=n(1284),h=n(2573),u=n(4322),d=n(4222),l=n(5546),f=n(5763),p=n(9251),m=n(8e3),g=n(3325),v=n(2222);class y extends v.m{static featureName=p.t;constructor(e,t){var n;super(e,t,p.t),n=this,this.timings=[],this.timingsSent=[],this.curSessEndRecorded=!1,this.cls=null;const o=(0,f.OP)(e).initHidden;if(this.alreadySent=new Set,r((e=>{let{name:t,value:n}=e;o||this.addTiming(t.toLowerCase(),Math.floor(n))})),a.pL)try{if(!o){performance.getEntriesByType("paint").forEach((e=>{"first-contentful-paint"===e.name&&this.addTiming("fcp",Math.floor(e.startTime))}))}}catch(e){}else(0,i.a4)((e=>{let{name:t,value:n}=e;o||this.alreadySent.has(t)||(this.alreadySent.add(t),this.addTiming(t.toLowerCase(),n))}));(0,i.Fu)((e=>{let{name:t,value:n,entries:i}=e;if(o||this.alreadySent.has(t)||0===i.length)return;this.alreadySent.add(t);const r=i[0],s={type:r.name,fid:Math.round(n)};this.addConnectionAttributes(s),this.addTiming("fi",Math.round(r.startTime),s)})),(0,i.NO)((e=>{let{name:t,value:n,entries:i}=e;if(o||this.alreadySent.has(t))return;this.alreadySent.add(t);const r={};if(i.length>0){const e=i[i.length-1];r.size=e.size,r.eid=e.id,e.url&&(r.elUrl=(0,d.f)(e.url)),e.element?.tagName&&(r.elTag=e.element.tagName)}this.addConnectionAttributes(r),this.addTiming(t.toLowerCase(),n,r)})),(0,i.mw)((e=>{let{value:t}=e;return this.cls=t}),{reportAllChanges:!0}),(0,i.Yn)((e=>{let{name:t,value:n,id:i}=e;return this.addTiming(t.toLowerCase(),n,{metricId:i})})),!0===(0,f.Mt)(this.agentIdentifier,"page_view_timing.long_task")&&(e=>{const t=t=>{t.forEach((t=>{const n={name:"LT",value:t.duration,info:{ltFrame:t.name,ltStart:t.startTime,ltCtr:t.attribution[0].containerType}};"window"!==n.info.ltCtr&&Object.assign(n.info,{ltCtrSrc:t.attribution[0].containerSrc,ltCtrId:t.attribution[0].containerId,ltCtrName:t.attribution[0].containerName}),e(n)}))};let n;try{PerformanceObserver.supportedEntryTypes.includes("longtask")&&(n=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))})),n.observe({type:"longtask",buffered:!0}))}catch(e){}n&&(0,s.L)((()=>{t(n.takeRecords())}),!0)})((e=>{let{name:t,value:n,info:i}=e;return this.addTiming(t.toLowerCase(),n,i)})),this.scheduler=new h.o("events",{onFinished:function(){return n.onHarvestFinished(...arguments)},getPayload:function(){return n.prepareHarvest(...arguments)}},this),(0,u.X)("timing",((e,t,n)=>this.addTiming(e,t,n)),this.featureName,this.ee),(0,u.X)("docHidden",(e=>this.endCurrentSession(e)),this.featureName,this.ee),(0,u.X)("winPagehide",(e=>this.recordPageUnload(e)),this.featureName,this.ee);const c=(0,f.Mt)(this.agentIdentifier,"page_view_timing.initialHarvestSeconds")||10,l=(0,f.Mt)(this.agentIdentifier,"page_view_timing.harvestTimeSeconds")||30;this.ee.on("drain-".concat(this.featureName),(()=>{this.scheduler.startTimer(l,c)})),(0,m.L)(this.agentIdentifier,this.featureName)}addConnectionAttributes(e){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(t)return t.type&&(e["net-type"]=t.type),t.effectiveType&&(e["net-etype"]=t.effectiveType),t.rtt&&(e["net-rtt"]=t.rtt),t.downlink&&(e["net-dlink"]=t.downlink),e}endCurrentSession(e){this.curSessEndRecorded||(this.addTiming("pageHide",e,null),this.curSessEndRecorded=!0)}recordPageUnload(e){this.addTiming("unload",e,null),this.endCurrentSession(e)}addTiming(e,t,n){n=n||{},null!==this.cls&&(n.cls=this.cls),this.timings.push({name:e,value:t,attrs:n}),(0,l.p)("pvtAdded",[e,t,n],void 0,g.D.sessionTrace,this.ee)}onHarvestFinished(e){e.retry&&this.timingsSent.length>0&&(this.timings.unshift(...this.timingsSent),this.timingsSent=[])}appendGlobalCustomAttributes(e){var t=e.attrs||{},n=(0,f.C5)(this.agentIdentifier).jsAttributes||{},i=["size","eid","cls","type","fid","elTag","elUrl","net-type","net-etype","net-rtt","net-dlink"];(0,c.D)(n,(function(e,n){i.indexOf(e)<0&&(t[e]=n)}))}prepareHarvest(e){if(0!==this.timings.length){var t=this.getPayload(this.timings);if(e.retry)for(var n=0;n<this.timings.length;n++)this.timingsSent.push(this.timings[n]);return this.timings=[],{body:{e:t}}}}getPayload(e){for(var t=(0,o.FX)(this.agentIdentifier),n="bel.6;",i=0;i<e.length;i++){var r=e[i];n+="e,",n+=t(r.name)+",",n+=(0,o.AG)(r.value,o.uR,!1)+",",this.appendGlobalCustomAttributes(r);var s=(0,o.n1)(r.attrs,t);s&&s.length>0&&(n+=(0,o.uR)(s.length)+";"+s.join(";")),i+1<e.length&&(n+=";")}return n}}},856:(e,t,n)=>{n.r(t),n.d(t,{Aggregate:()=>S});var i=n(4322),r=n(2573),s=n(7243),a=n(5763),o=n(7894),c=n(3614),h=n(8e3);class u{#e=void 0;#t=[];#n=setTimeout((()=>this.#i()),5e3);#r=!1;#s(){this.#t.forEach((e=>e())),this.#i()}#i(){this.#t=[],clearTimeout(this.#n)}settle(e){!1!==this.#e&&(void 0===this.#e?this.#t.push(e):e())}decide(e){this.#r||(this.#e=e,!1===e&&this.#i(),!0===e&&this.#s())}permanentlyDecide(e){this.#r||(this.decide(e),this.#r=!0)}}var d=n(3860),l=n(8632);let f;const p=new Promise((e=>f=e)),m=Object.freeze({onReplayReady:f,sessionReplayInitialized:p});var g=n(2222);const v={global:{mouseup:!0,mousedown:!0},window:{load:!0,pagehide:!0},xhrOriginMissing:{ignoreAll:!0}},y={typing:[1e3,2e3],scrolling:[100,1e3],mousing:[1e3,2e3],touching:[1e3,2e3]},b=6e5;class S extends g.m{static featureName=c.FEATURE_NAME;#a;constructor(e,t,n){var r;if(super(e,t,c.FEATURE_NAME),r=this,this.agentRuntime=(0,a.OP)(e),!this.agentRuntime.xhrWrappable)return;this.resourceObserver=n?.resourceObserver,this.ptid="",this.trace={},this.nodeCount=0,this.sentTrace=null,this.harvestTimeSeconds=(0,a.Mt)(e,"session_trace.harvestTimeSeconds")||10,this.maxNodesPerHarvest=(0,a.Mt)(e,"session_trace.maxNodesPerHarvest")||1e3,this.isStandalone=!1;const s=new u,o=this.agentRuntime.session;this.operationalGate=s;const f=e=>{switch(e){case d.IK.ERROR:this.startTracing(s,!0);break;case d.IK.FULL:case!0:this.startTracing(s);break;case d.IK.OFF:default:s.decide(!1)}};if(o){let t,n=!1;(0,i.X)("errorAgg",(()=>{n||(n=!0,o.state.sessionTraceMode===d.IK.ERROR&&this.#a&&(o.write({sessionTraceMode:t=d.IK.FULL}),this.trimSTNs(3e4),this.#a.runHarvest({needResponse:!0})))}),this.featureName,this.ee);const r=()=>{o.state.sessionTraceMode!==d.IK.OFF&&o.write({sessionTraceMode:d.IK.OFF}),s.permanentlyDecide(!1),t===d.IK.FULL&&this.#a?.runHarvest(),this.#a?.stopTimer(!0),this.#a=null};this.waitForFlags(["stn","sr"]).then((async i=>{let[s,c]=i;if(c)if(this.ee.on("REPLAY_ABORTED",(()=>r())),this.ee.on(d.wO.RESUME,(()=>{const e=o.state.sessionTraceMode;e===d.IK.OFF?r():e===d.IK.FULL&&this.#a&&!this.#a.started&&this.#a.runHarvest({needResponse:!0}),t=e})),this.ee.on(d.wO.PAUSE,(()=>t=o.state.sessionTraceMode)),o.isNew){const i=await async function(e){try{const t=(0,l.fP)();if((0,a.Mt)(e,"session_replay.enabled")&&"object"==typeof t.initializedAgents[e].features.session_replay&&await t.initializedAgents[e].features.session_replay.onAggregateImported)return await m.sessionReplayInitialized}catch(e){}return d.IK.OFF}(e);let r;i===d.IK.OFF&&(this.isStandalone=!0),r=!0===s||i===d.IK.ERROR&&n?d.IK.FULL:i,o.write({sessionTraceMode:t=r}),f(r)}else o.state.sessionReplay===d.IK.OFF&&(this.isStandalone=!0),f(t=o.state.sessionTraceMode);else this.isStandalone=!0,f(s)}))}else this.isStandalone=!0,(0,i.X)("rumresp-stn",(e=>f(e)),this.featureName,this.ee);(0,i.X)("bst",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.settle((()=>r.storeEvent(...t)))}),this.featureName,this.ee),(0,i.X)("bstResource",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.settle((()=>r.storeResources(...t)))}),this.featureName,this.ee),(0,i.X)("bstHist",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.settle((()=>r.storeHist(...t)))}),this.featureName,this.ee),(0,i.X)("bstXhrAgg",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.settle((()=>r.storeXhrAgg(...t)))}),this.featureName,this.ee),(0,i.X)("bstApi",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.settle((()=>r.storeSTN(...t)))}),this.featureName,this.ee),(0,i.X)("errorAgg",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.settle((()=>r.storeErrorAgg(...t)))}),this.featureName,this.ee),(0,i.X)("pvtAdded",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.settle((()=>r.processPVT(...t)))}),this.featureName,this.ee),(0,h.L)(this.agentIdentifier,this.featureName)}startTracing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"undefined"!=typeof PerformanceNavigationTiming?this.storeTiming(window.performance.getEntriesByType("navigation")[0]):this.storeTiming(window.performance.timing),this.#a=new r.o("resources",{onFinished:this.#o.bind(this),retryDelay:this.harvestTimeSeconds},this),this.#a.harvest.on("resources",this.#c.bind(this)),!1===t&&this.#a.runHarvest({needResponse:!0}),e.decide(!0)}#o(e){e.sent&&e.responseText&&!this.ptid&&(this.agentRuntime.ptid=this.ptid=e.responseText,this.#a.startTimer(this.harvestTimeSeconds)),e.sent&&e.retry&&this.sentTrace&&(Object.entries(this.sentTrace).forEach((e=>{let[t,n]=e;this.nodeCount>=this.maxNodesPerHarvest||(this.nodeCount+=n.length,this.trace[t]=this.trace[t]?n.concat(this.trace[t]):n)})),this.sentTrace=null)}#c(e){if(this.isStandalone){if(this.ptid&&(0,o.z)()>=b)e.isFinalHarvest=!0,this.operationalGate.permanentlyDecide(!1),this.#a.stopTimer(!0);else if(this.ptid&&this.nodeCount<=30&&!e.isFinalHarvest)return}else{const e=this.agentRuntime.session.state.sessionTraceMode;if(e===d.IK.OFF&&0===Object.keys(this.trace).length)return;if(e===d.IK.ERROR)return}return this.takeSTNs(e.retry)}processPVT(e,t,n){this.storeTiming({[e]:t}),function(e,t){return"fi"===e&&!!t&&"number"==typeof t.fid}(e,n)&&this.storeEvent({type:"fid",target:"document"},"document",t,t+n.fid)}storeTiming(e){if(e)for(let t in e){let n=e[t];const i=t.toLowerCase();i.indexOf("size")>=0||i.indexOf("status")>=0||"number"==typeof n&&n>=0&&(n=Math.round(n),this.storeSTN({n:t,s:n,e:n,o:"document",t:"timing"}))}}storeEvent(e,t,n,i){if(this.shouldIgnoreEvent(e,t))return;const r={n:this.evtName(e.type),s:n,e:i,t:"event"};try{r.o=this.evtOrigin(e.target,t)}catch(e){r.o=this.evtOrigin(null,t)}this.storeSTN(r)}shouldIgnoreEvent(e,t){const n=this.evtOrigin(e.target,t);return e.type in v.global||(!(!v[n]||!v[n].ignoreAll)||!(!v[n]||!(e.type in v[n])))}evtName(e){switch(e){case"keydown":case"keyup":case"keypress":return"typing";case"mousemove":case"mouseenter":case"mouseleave":case"mouseover":case"mouseout":return"mousing";case"scroll":return"scrolling";case"touchstart":case"touchmove":case"touchend":case"touchcancel":case"touchenter":case"touchleave":return"touching";default:return e}}evtOrigin(e,t){let n="unknown";if(e&&e instanceof XMLHttpRequest){const t=this.ee.context(e).params;if(!(t&&t.status&&t.method&&t.host&&t.pathname))return"xhrOriginMissing";n=t.status+" "+t.method+": "+t.host+t.pathname}else if(e&&"string"==typeof e.tagName&&(n=e.tagName.toLowerCase(),e.id&&(n+="#"+e.id),e.className))for(let t=0;t<e.classList.length;t++)n+="."+e.classList[t];return"unknown"===n&&("string"==typeof t?n=t:t===document?n="document":t===window?n="window":t instanceof FileReader&&(n="FileReader")),n}storeHist(e,t,n){const i={n:"history.pushState",s:n,e:n,o:e,t};this.storeSTN(i)}#h=0;storeResources(e){e&&0!==e.length&&(e.forEach((e=>{if((0|e.fetchStart)<=this.#h)return;const t=(0,s.e)(e.name),n={n:e.initiatorType,s:0|e.fetchStart,e:0|e.responseEnd,o:t.protocol+"://"+t.hostname+":"+t.port+t.pathname,t:e.entryType};this.storeSTN(n)})),this.#h=0|e[e.length-1].fetchStart)}storeErrorAgg(e,t,n,i){if("err"!==e)return;const r={n:"error",s:i.time,e:i.time,o:n.message,t:n.stackHash};this.storeSTN(r)}storeXhrAgg(e,t,n,i){if("xhr"!==e)return;const r={n:"Ajax",s:i.time,e:i.time+i.duration,o:n.status+" "+n.method+": "+n.host+n.pathname,t:"ajax"};this.storeSTN(r)}storeSTN(e){if(this.nodeCount>=this.maxNodesPerHarvest){if(this.isStandalone||this.agentRuntime.session.state.sessionTraceMode!==d.IK.ERROR)return;if(0==this.trimSTNs(3e4))return}this.isStandalone&&(0,o.z)()>=b||(this.trace[e.n]?this.trace[e.n].push(e):this.trace[e.n]=[e],this.nodeCount++)}trimSTNs(e){let t=0;const n=Math.max((0,o.z)()-e,0);return Object.keys(this.trace).forEach((e=>{const i=this.trace[e];let r=i.findIndex((e=>n<=e.e));0!=r&&(r<0?(r=i.length,delete this.trace[e]):i.splice(0,r),this.nodeCount-=r,t+=r)})),t}takeSTNs(e){this.resourceObserver||this.storeResources(window.performance.getEntriesByType("resource"));const t=Object.entries(this.trace).flatMap((e=>{let[t,n]=e;if(!(t in y))return n;const i=this.smearEvtsByOrigin(t),r=n.sort(((e,t)=>e.s-t.s)).reduce(i,{});return Object.values(r).flat()}),this);return 0===t.length?{}:(e&&(this.sentTrace=this.trace),this.trace={},this.nodeCount=0,{qs:{st:String((0,a.OP)(this.agentIdentifier).offset)},body:{res:t}})}smearEvtsByOrigin(e){const t=y[e][0],n=y[e][1],i={};return(r,s)=>{let a=r[s.o];a||(a=r[s.o]=[]);const o=i[s.o];return"scrolling"!==e||function(e){const t=4;return!!(e&&"number"==typeof e.e&&"number"==typeof e.s&&e.e-e.s<t)}(s)?o&&s.s-o.s<n&&o.e>s.s-t?o.e=s.e:(i[s.o]=s,a.push(s)):(i[s.o]=null,s.n="scroll",a.push(s)),r}}}},2782:(e,t,n)=>{n.r(t),n.d(t,{Aggregate:()=>J});var i=n(4322),r=n(7243),s=n(1199),a=n(1284),o=n(5998),c=n(4402),h=n(777),u=n(5763),d=n(8325),l=0;function f(e,t,n,i){Object.defineProperty(this,"interaction",{value:e,writable:!0}),this.parent=t,this.id=++l,this.type=n,this.children=[],this.end=null,this.jsEnd=this.start=i,this.jsTime=0,this.attrs={},this.cancelled=!1}var p=f.prototype;p.child=function(e,t,n,i){var r=this.interaction;if(r.end||r.nodes>=128)return null;r.onNodeAdded(this);var s=new f(r,this,e,t);return s.attrs.name=n,r.nodes++,i||r.remaining++,s},p.callback=function(e,t){var n=this;n.jsTime+=e,t>n.jsEnd&&(n.jsEnd=t,n.interaction.lastCb=t)},p.cancel=function(){this.cancelled=!0,this.interaction.remaining--},p.finish=function(e){var t=this;if(t.end)return;t.end=e;let n=t.parent;for(;n?.cancelled;)n=n.parent;n&&n.children.push(t),t.parent=null;var i=this.interaction;i.remaining--,i.lastFinish=e,i.checkFinish()};var m=n(7894),g=u.Yu.ST,v=u.Yu.CT,y={};function b(e,t,n,i,r,s){this.agentIdentifier=s,this.ee=d.ee.get(s),y[s]=0,this.id=++y[s],this.eventName=e,this.nodes=0,this.remaining=0,this.finishTimer=null,this.checkingFinish=!1,this.lastCb=this.lastFinish=t,this.handlers=[],this.onFinished=r,this.done=!1;var a=(this.root=new f(this,null,"interaction",t)).attrs;a.trigger=e,a.initialPageURL=(0,u.OP)(s).origin,a.oldRoute=i,a.newURL=a.oldURL=n,a.custom={},a.store={}}var S=b.prototype;S.checkFinish=function(){var e=this;e.remaining>0?e._resetFinishCheck():e.checkingFinish||null===e.root.end&&(e._resetFinishCheck(),e.checkingFinish=!0,e.finishTimer=g((()=>{e.checkingFinish=!1,e.finishTimer=g((()=>{e.finishTimer=null,e.remaining<=0&&e.finish()}),1)}),0))},S.setNewURL=function(e){this.root.attrs.newURL=e},S.setNewRoute=function(e){this.root.attrs.newRoute=e},S.onNodeAdded=function(){this._resetFinishCheck()},S._resetFinishCheck=function(){this.finishTimer&&(v(this.finishTimer),this.finishTimer=null,this.checkingFinish=!1)},S.finish=function(){var e=this,t=e.root;if(null===t.end){var n=Math.max(e.lastCb,e.lastFinish),i=((0,m.z)(),t.attrs.custom);this.onFinished&&this.onFinished(this),(0,a.D)((0,u.C5)(e.agentIdentifier).jsAttributes,(function(e,t){e in i||(i[e]=t)})),t.end=n,e.ee.emit("interaction",[this])}};var T=n(3239),N=n(2573),w=n(4222),A=n(214),E=n(1117);class R extends E.w{constructor(e){super(e),this.firstTimestamp=void 0}serializeMultiple(e,t,n){const i=(0,u.C5)(this.sharedContext.agentIdentifier);var r=(0,A.FX)(this.sharedContext.agentIdentifier),s="bel.7";return e.forEach((e=>{s+=";"+this.serializeInteraction(e.root,t,n,e.routeChange,r,i)})),this.firstTimestamp=void 0,s}serializeSingle(e,t,n,i){const r=(0,u.C5)(this.sharedContext.agentIdentifier);var s=(0,A.FX)(this.sharedContext.agentIdentifier),a="bel.7;"+this.serializeInteraction(e,t,n,i,s,r);return this.firstTimestamp=void 0,a}serializeInteraction(e,t,n,i,r,s){t=t||0;var o="initialPageLoad"===e.attrs.trigger,c={interaction:1,ajax:2,customTracer:4},h=!0;const u=(e,d)=>{if("customEnd"===e.type)return d.push([3,(0,A.uR)(e.end-this.firstTimestamp)]);var l=e.type,f=c[l],p=e.start,m=e.children.length,g=0,v=s.atts,y=o&&n.length&&1===f,b=[],S=e.attrs,T=S.metrics,N=S.params,E=s.queueTime,R=s.applicationTime;void 0===this.firstTimestamp?(p+=t,this.firstTimestamp=p):p-=this.firstTimestamp;var P=[(0,A.uR)(p),(0,A.uR)(e.end-e.start),(0,A.uR)(e.jsEnd-e.end),(0,A.uR)(e.jsTime)];switch(f){case 1:P[2]=(0,A.uR)(e.jsEnd-this.firstTimestamp),P.push(r(S.trigger),r((0,w.f)(S.initialPageURL,h)),r((0,w.f)(S.oldURL,h)),r((0,w.f)(S.newURL,h)),r(S.customName),o?"":i?1:2,(0,A.AG)(o&&E,A.uR,!0)+(0,A.AG)(o&&R,A.uR,!0)+(0,A.AG)(S.oldRoute,r,!0)+(0,A.AG)(S.newRoute,r,!0)+r(S.id),r(e.id),(0,A.AG)(S.firstPaint,A.uR,!0)+(0,A.AG)(S.firstContentfulPaint,A.uR,!1));var x=(0,A.n1)(S.custom,r);b=b.concat(x),g=x.length,v&&(m++,b.push("a,"+r(v)));break;case 2:P.push(r(N.method),(0,A.uR)(N.status),r(N.host),r(N.pathname),(0,A.uR)(T.txSize),(0,A.uR)(T.rxSize),S.isFetch?1:S.isJSONP?2:"",r(e.id),(0,A.AG)(e.dt&&e.dt.spanId,r,!0)+(0,A.AG)(e.dt&&e.dt.traceId,r,!0)+(0,A.AG)(e.dt&&e.dt.timestamp,A.uR,!1));break;case 4:var I=S.tracedTime;P.push(r(S.name),(0,A.AG)(I,A.uR,!0)+r(e.id))}for(var O=0;O<e.children.length;O++)u(e.children[O],b);if(P.unshift((0,A.uR)(f),(0,A.uR)(m+=g)),d.push(P),m&&d.push(b.join(";")),y){var M=",",k="b",C=0;(0,a.D)(n.slice(1,21),(function(e,t){void 0!==t?(k+=M+(0,A.uR)(t-C),M=",",C=t):(k+=M+"!",M="")})),d.push(k)}else 1===f&&d.push("");return d};return u(e,[]).join(";")}}var P=n(7836),x=n(8e3),I=n(3325),O=n(2222);const{FEATURE_NAME:M,INTERACTION_EVENTS:k,MAX_TIMER_BUDGET:C,FN_START:j,FN_END:F,CB_START:D,INTERACTION_API:L,REMAINING:H,INTERACTION:_,SPA_NODE:X,JSONP_NODE:B,FETCH_START:U,FETCH_DONE:z,FETCH_BODY:q,JSONP_END:G,originalSetTimeout:K}=P;class J extends O.m{static featureName=M;constructor(e,t){super(e,t,M),this.state={initialPageURL:(0,u.OP)(e).origin,lastSeenUrl:(0,u.OP)(e).origin,lastSeenRouteName:null,timerMap:{},timerBudget:C,currentNode:null,prevNode:null,nodeOnLastHashUpdate:null,initialPageLoad:null,pageLoaded:!1,childTime:0,depth:0,harvestTimeSeconds:(0,u.Mt)(e,"spa.harvestTimeSeconds")||10,interactionsToHarvest:[],interactionsSent:[]},this.serializer=new R(this);const{state:n,serializer:l}=this;let{blocked:f}=this;const p=d.ee.get(e),m=p.get("mutation"),g=p.get("promise"),v=p.get("history"),y=p.get("events"),S=p.get("timer"),w=p.get("fetch"),A=p.get("jsonp"),E=p.get("xhr"),P=p.get("tracer"),O=new N.o("events",{onFinished:function(e){e.sent&&e.retry&&n.interactionsSent.length>0&&(n.interactionsSent.forEach((function(e){n.interactionsToHarvest.unshift(e)})),n.interactionsSent=[])},retryDelay:n.harvestTimeSeconds},{agentIdentifier:e,ee:p});if(O.harvest.on("events",(function(e){if(0===n.interactionsToHarvest.length||f)return{};var t=l.serializeMultiple(n.interactionsToHarvest,0,o.zJ);e.retry&&n.interactionsToHarvest.forEach((function(e){n.interactionsSent.push(e)}));return n.interactionsToHarvest=[],{body:{e:t}}})),(0,i.X)("block-spa",(()=>{f=!0,O.stopTimer(!0)}),this.featureName,p),function(){if(!1===(0,u.Mt)(e,"spa.enabled"))return!1;return!0}()){n.initialPageLoad=new b("initialPageLoad",0,n.lastSeenUrl,n.lastSeenRouteName,te,e),n.initialPageLoad.save=!0,n.prevInteraction=n.initialPageLoad,n.currentNode=n.initialPageLoad.root,n.initialPageLoad[H]++,(0,i.X)(j,V,this.featureName,p),(0,i.X)(D,V,this.featureName,g);var J={getCurrentNode:function(){return n.currentNode},setCurrentNode:ee};(0,i.X)("spa-register",(function(e){"function"==typeof e&&e(J)}),I.D.spa,p),(0,i.X)(F,Z,this.featureName,p),(0,i.X)("cb-end",Z,this.featureName,g),(0,i.X)(j,(function(t,i){var r=t[0],s=r.type,a=r.__nrNode;if(n.pageLoaded||"load"!==s||i!==window||(n.pageLoaded=!0,this.prevNode=n.currentNode=null,n.initialPageLoad&&(a=n.initialPageLoad.root,n.initialPageLoad[H]=0,K((function(){k.push("popstate")})))),a)ee(a);else if("hashchange"===s)ee(n.nodeOnLastHashUpdate),n.nodeOnLastHashUpdate=null;else if(i instanceof XMLHttpRequest)ee(p.context(i).spaNode);else if(!n.currentNode&&-1!==k.indexOf(s)){var o=new b(s,this[j],n.lastSeenUrl,n.lastSeenRouteName,te,e);if(n.prevInteraction=o,ee(o.root),"click"===s){var c=function(e){var t=e.tagName.toLowerCase();if(-1!==["a","button","input"].indexOf(t))return e.title||e.value||e.innerText}(r.target);c&&(n.currentNode.attrs.custom.actionText=c)}}r.__nrNode=n.currentNode}),this.featureName,y),(0,i.X)("setTimeout-end",(function(e,t,i){!n.currentNode||n.timerBudget-this.timerDuration<0||(!e||e[0]instanceof Function)&&(n.currentNode[_][H]++,this.timerId=i,n.timerMap[i]=n.currentNode,this.timerBudget=n.timerBudget-50)}),this.featureName,S),(0,i.X)("clearTimeout-start",(function(e){var t=e[0],i=n.timerMap[t];if(i){var r=i[_];r[H]--,r.checkFinish(),delete n.timerMap[t]}}),this.featureName,S),(0,i.X)(j,(function(){n.timerBudget=this.timerBudget||C;var e=this.timerId,t=n.timerMap[e];ee(t),delete n.timerMap[e],t&&t[_][H]--}),this.featureName,S),(0,i.X)(j,(function(){ee(this[X])}),this.featureName,E),(0,i.X)("new-xhr",(function(){if(!n.currentNode&&n.prevInteraction&&!n.prevInteraction.ignored){const e=n.prevInteraction;n.currentNode=e.root,e.root.end=null}n.currentNode&&(this[X]=n.currentNode.child("ajax",null,null,!0))}),this.featureName,E),(0,i.X)("send-xhr-start",(function(){var e=this[X];e&&!this.sent&&(this.sent=!0,e.dt=this.dt,e.jsEnd=e.start=this.startTime,e[_][H]++)}),this.featureName,E),(0,i.X)("xhr-resolved",(function(){var e=this[X];if(e){if(!(0,s.z)(this.params))return void e.cancel();var t=e.attrs;t.params=this.params,t.metrics=this.metrics,e.finish(this.endTime),this.currentNode&&this.currentNode.interaction&&this.currentNode.interaction.checkFinish()}}),this.featureName,p),(0,i.X)("new-jsonp",(function(e){n.currentNode&&((this[B]=n.currentNode.child("ajax",this[U])).start=this["new-jsonp"],this.url=e,this.status=null)}),this.featureName,A),(0,i.X)("cb-start",(function(e){var t=this[B];t&&(ee(t),this.status=200)}),this.featureName,A),(0,i.X)("jsonp-error",(function(){var e=this[B];e&&(ee(e),this.status=0)}),this.featureName,A),(0,i.X)(G,(function(){var e=this[B];if(e){if(null===this.status)return void e.cancel();var t=e.attrs,n=t.params={},i=(0,r.e)(this.url);n.method="GET",n.pathname=i.pathname,n.host=i.hostname+":"+i.port,n.status=this.status,t.metrics={txSize:0,rxSize:0},t.isJSONP=!0,e.jsEnd=this[G],e.jsTime=this[D]?this[G]-this[D]:0,e.finish(e.jsEnd)}}),this.featureName,A),(0,i.X)(U,(function(e,t){if(e){if(!n.currentNode&&n.prevInteraction&&!n.prevInteraction.ignored){const e=n.prevInteraction;n.currentNode=e.root,e.root.end=null}n.currentNode&&(this[X]=n.currentNode.child("ajax",this[U]),t&&this[X]&&(this[X].dt=t))}}),this.featureName,w),(0,i.X)(q+"start",(function(e){n.currentNode&&(this[X]=n.currentNode,n.currentNode[_][H]++)}),this.featureName,w),(0,i.X)(q+"end",(function(e,t,n){var i=this[X];i&&i[_][H]--}),this.featureName,w),(0,i.X)(z,(function(e,t){var n=this[X];if(n){if(e||!(0,s.z)(this.params))return void n.cancel();var i=n.attrs;i.params=this.params,i.metrics={txSize:this.txSize,rxSize:this.rxSize},i.isFetch=!0,n.finish(this[z])}}),this.featureName,w),(0,i.X)("newURL",(function(e,t){if(n.currentNode)n.currentNode[_].setNewURL(e);else if(n.prevInteraction&&!n.prevInteraction.ignored){const t=n.prevInteraction;t.setNewURL(e),t.root.end=null,ee(t.root)}n.currentNode&&(n.lastSeenUrl!==e&&(n.currentNode[_].routeChange=!0),t&&(n.nodeOnLastHashUpdate=n.currentNode)),n.lastSeenUrl=e}),this.featureName,v),A.on("dom-start",(function(e){if(n.currentNode){var t=e[0],i=t&&"SCRIPT"===t.nodeName&&""!==t.src,r=n.currentNode.interaction;i&&(r[H]++,t.addEventListener("load",(function(){r[H]--,r.checkFinish()}),(0,T.m$)(!1)),t.addEventListener("error",(function(){r[H]--,r.checkFinish()}),(0,T.m$)(!1)))}})),(0,i.X)(j,(function(){ee(n.prevNode)}),this.featureName,m),(0,i.X)("resolve-start",Q,this.featureName,g),(0,i.X)("executor-err",Q,this.featureName,g),(0,i.X)("propagate",(function(e,t){!t&&this[X]||(this[X]=n.currentNode)}),this.featureName,g),(0,i.X)(D,(function(){ee((this.getCtx?this.getCtx():this)[X])}),this.featureName,g),(0,i.X)(L+"get",(function(t){var i;i=this.ixn=n?.currentNode?.[_]?n.currentNode[_]:null===n?.prevNode?.end&&"initialPageLoad"!=n?.prevNode?.[_]?.root?.[_]?.eventName?n.prevNode[_]:new b("api",t,n.lastSeenUrl,n.lastSeenRouteName,te,e),n.currentNode||(i.checkFinish(),n.depth&&ee(i.root))}),this.featureName,p),(0,i.X)(L+"actionText",(function(e,t){var n=this.ixn.root.attrs.custom;t&&(n.actionText=t)}),this.featureName,p),(0,i.X)(L+"setName",(function(e,t,n){var i=this.ixn.root.attrs;t&&(i.customName=t),n&&(i.trigger=n)}),this.featureName,p),(0,i.X)(L+"setAttribute",(function(e,t,n){this.ixn.root.attrs.custom[t]=n}),this.featureName,p),(0,i.X)(L+"end",(function(e){var t=this.ixn,n=Y(t);ee(null),n.child("customEnd",e).finish(e),t.finish()}),this.featureName,p),(0,i.X)(L+"ignore",(function(e){this.ixn.ignored=!0}),this.featureName,p),(0,i.X)(L+"save",(function(e){this.ixn.save=!0}),this.featureName,p),(0,i.X)(L+"tracer",(function(e,t,n){var i=this.ixn,r=Y(i),s=p.context(n);if(!t)return s.inc=++i[H],s[X]=r;s[X]=r.child("customTracer",e,t)}),this.featureName,p),(0,i.X)(j,W,this.featureName,P),(0,i.X)("no-"+j,W,this.featureName,P),(0,i.X)(L+"getContext",(function(e,t){var n=this.ixn.root.attrs.store;setTimeout((function(){t(n)}),0)}),this.featureName,p),(0,i.X)(L+"onEnd",(function(e,t){this.ixn.handlers.push(t)}),this.featureName,p),(0,i.X)("api-routeName",(function(e,t){n.lastSeenRouteName=t,n.currentNode&&n.currentNode[_].setNewRoute(t)}),this.featureName,p),p.on("errorAgg",(function(e,t,i,r){n.currentNode&&(i._interactionId=n.currentNode.interaction.id,n.currentNode.type&&"interaction"!==n.currentNode.type&&(i._interactionNodeId=n.currentNode.id))})),p.on("interaction",(function(e){if(e.ignored||!e.save&&!e.routeChange)return void p.emit("interactionDiscarded",[e]);n.prevInteraction===e&&(n.prevInteraction=null);e.root.attrs.id=(0,c.Rl)(),"initialPageLoad"===e.root.attrs.trigger&&(e.root.attrs.firstPaint=h.e["first-paint"],e.root.attrs.firstContentfulPaint=h.e["first-contentful-paint"]);p.emit("interactionSaved",[e]),n.interactionsToHarvest.push(e),O.scheduleHarvest(0)})),(0,x.L)(this.agentIdentifier,this.featureName)}function V(){n.depth++,this.prevNode=n.currentNode,this.ct=n.childTime,n.childTime=0,n.timerBudget=C}function Z(){n.depth--;var e=this.jsTime||0,t=e-n.childTime;n.childTime=this.ct+e,n.currentNode&&(n.currentNode.callback(t,this[F]),this.isTraced&&(n.currentNode.attrs.tracedTime=t)),this.jsTime=n.currentNode?0:t,ee(this.prevNode),this.prevNode=null,n.timerBudget=C}function W(e,t,n){var i=this[X];if(i){var r=i[_],s=this.inc;this.isTraced=!0,s?r[H]--:i&&i.finish(e),n?ee(i):r.checkFinish()}}function Y(e){return n.currentNode&&n.currentNode[_]===e?n.currentNode:e.root}function Q(){this.resolved||(this.resolved=!0,this[X]=n.currentNode)}function ee(e){n.pageLoaded||e||!n.initialPageLoad||(e=n.initialPageLoad.root),n.currentNode&&n.currentNode[_].checkFinish(),n.prevNode=n.currentNode,n.currentNode=e&&!e[_].root.end?e:null}function te(e){e===n.initialPageLoad&&(n.initialPageLoad=null);var t=e.root,i=t.attrs;n.currentNode=t,(0,a.D)(e.handlers,(function(e,t){t(i.store)})),ee(null)}}}},3228:(e,t,n)=>{n.d(t,{setupAgentSession:()=>d});var i=n(5763),r=n(8e3),s=n(8325),a=n(4322),o=n(3860);class c{get(e){try{return localStorage.getItem(e)||void 0}catch(e){return""}}set(e,t){try{return null==t?this.remove(e):localStorage.setItem(e,t)}catch(e){return}}remove(e){try{localStorage.removeItem(e)}catch(e){return}}}class h{constructor(e){this.domain=e}get(e){try{var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}catch(e){return""}}set(e,t){try{const n="".concat(e,"=").concat(t,"; Domain=").concat(domain,"; Path=/");document.cookie=n}catch(e){return}}remove(e){try{return document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; Domain=").concat(domain,"; Path=/")}catch(e){return}}}let u=0;function d(e){const t=(0,i.OP)(e);if(u++)return t.session;const n=(0,i.P_)(e).session,d=n?.domain?new h(n.domain):new c;t.session=new o.$s({agentIdentifier:e,key:"SESSION",storage:d,expiresMs:n?.expiresMs,inactiveMs:n?.inactiveMs});const l=t.session.state.custom,f=(0,i.C5)(e);l&&(f.jsAttributes={...f.jsAttributes,...l});const p=s.ee.get(e);return(0,a.X)("api-setCustomAttribute",((e,n,i)=>{t.session.syncCustomAttribute(n,i)}),"session",p),(0,a.X)("api-setUserId",((e,n,i)=>{t.session.syncCustomAttribute(n,i)}),"session",p),(0,r.L)(e,"session"),t.session}},2222:(e,t,n)=>{n.d(t,{m:()=>c});var i=n(4322),r=n(5938),s=n(5763),a=n(9144),o=n(8632);class c extends r.W{constructor(){super(...arguments),this.checkConfiguration()}waitForFlags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all(e.map((e=>new Promise((t=>{(0,i.X)("rumresp-".concat(e),(e=>t(e)),this.featureName,this.ee)})))))}checkConfiguration(){if(!(0,s.lF)(this.agentIdentifier)){let e={...(0,o.gG)().info?.jsAttributes};try{e={...e,...(0,s.C5)(this.agentIdentifier)?.jsAttributes}}catch(e){}(0,a.j)(this.agentIdentifier,{...(0,o.gG)(),info:{...(0,o.gG)().info,jsAttributes:e},runtime:(0,s.OP)(this.agentIdentifier)})}}}},8582:(e,t,n)=>{n.d(t,{lazyFeatureLoader:()=>r});var i=n(3325);function r(e,t){if("aggregate"===t)switch(e){case i.D.ajax:return n.e(111).then(n.bind(n,5039));case i.D.jserrors:return n.e(111).then(n.bind(n,1028));case i.D.metrics:return n.e(111).then(n.bind(n,9026));case i.D.pageAction:return n.e(111).then(n.bind(n,1832));case i.D.pageViewEvent:return n.e(111).then(n.bind(n,3609));case i.D.pageViewTiming:return n.e(111).then(n.bind(n,3307));case i.D.sessionReplay:return Promise.resolve().then((function(){var e=new Error("Cannot find module '../session_replay/aggregate'");throw e.code="MODULE_NOT_FOUND",e}));case i.D.sessionTrace:return n.e(111).then(n.bind(n,856));case i.D.spa:return n.e(111).then(n.bind(n,2782));default:throw new Error("Attempted to load unsupported agent feature: ".concat(e," ").concat(t))}}},7438:(e,t,n)=>{n.r(t),n.d(t,{setAPI:()=>l});var i=n(3325),r=n(5763),s=n(8325),a=n(5546),o=n(4322),c=n(7872),h=n(4247),u=n(385),d=n(3081);function l(e){var t=s.ee.get(e),n=0,l=!1===(0,r.Mt)(e,"ssl")?"http":"https",f={finished:(0,c.Z)((function(n,s){var o=s?s-(0,r.OP)(e).offset:n;(0,a.p)(d.vz,["finished",{time:o}],void 0,i.D.metrics,t),p(n,{name:"finished",start:o+(0,r.OP)(e).offset,origin:"nr"}),(0,a.p)("api-addPageAction",[o,"finished"],void 0,i.D.pageAction,t)})),setErrorHandler:function(t,n){(0,r.OP)(e).onerror=n},addToTrace:p,inlineHit:function(t,i,s,a,o,c,d){if(!u.il)return;i=window.encodeURIComponent(i),n+=1;const f=(0,r.C5)(e);(0,r.OP)(e);if(!f.beacon)return;var p=l+"://"+f.beacon+"/1/"+f.licenseKey;p+="?a="+f.applicationID+"&",p+="t="+i+"&",p+="qt="+~~s+"&",p+="ap="+~~a+"&",p+="be="+~~o+"&",p+="dc="+~~c+"&",p+="fe="+~~d+"&",p+="c="+n,h.Be({url:p})},addRelease:function(t,n,i){if(++m>10)return;(0,r.OP)(e).releaseIds[n.slice(-200)]=(""+i).slice(-200)}};function p(n,s){if(s&&"object"==typeof s&&s.name&&s.start){var o={n:s.name,s:s.start-(0,r.OP)(e).offset,e:(s.end||s.start)-(0,r.OP)(e).offset,o:s.origin||"",t:"api"};(0,a.p)("bstApi",[o],void 0,i.D.sessionTrace,t)}}Object.entries(f).forEach((e=>{let[n,i]=e;return(0,o.X)("api-"+n,i,"api",t)}));var m=0}},8085:(e,t,n)=>{n.d(t,{Fu:()=>D,NO:()=>Q,Yn:()=>Z,a4:()=>R,mr:()=>ne,mw:()=>x});var i,r,s,a,o,c=-1,h=function(e){addEventListener("pageshow",(function(t){t.persisted&&(c=t.timeStamp,e(t))}),!0)},u=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},d=function(){var e=u();return e&&e.activationStart||0},l=function(e,t){var n=u(),i="navigate";return c>=0?i="back-forward-cache":n&&(i=document.prerendering||d()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},f=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},p=function(e,t,n,i){var r,s;return function(a){t.value>=0&&(a||i)&&((s=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=s,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},m=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},g=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},v=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},y=-1,b=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},S=function(e){"hidden"===document.visibilityState&&y>-1&&(y="visibilitychange"===e.type?e.timeStamp:0,N())},T=function(){addEventListener("visibilitychange",S,!0),addEventListener("prerenderingchange",S,!0)},N=function(){removeEventListener("visibilitychange",S,!0),removeEventListener("prerenderingchange",S,!0)},w=function(){return y<0&&(y=b(),T(),h((function(){setTimeout((function(){y=b(),T()}),0)}))),{get firstHiddenTime(){return y}}},A=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},E=[1800,3e3],R=function(e,t){t=t||{},A((function(){var n,i=w(),r=l("FCP"),s=f("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-d(),0),r.entries.push(e),n(!0)))}))}));s&&(n=p(e,r,E,t.reportAllChanges),h((function(i){r=l("FCP"),n=p(e,r,E,t.reportAllChanges),m((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},P=[.1,.25],x=function(e,t){t=t||{},R(v((function(){var n,i=l("CLS",0),r=0,s=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],n=s[s.length-1];r&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,s.push(e)):(r=e.value,s=[e])}})),r>i.value&&(i.value=r,i.entries=s,n())},o=f("layout-shift",a);o&&(n=p(e,i,P,t.reportAllChanges),g((function(){a(o.takeRecords()),n(!0)})),h((function(){r=0,i=l("CLS",0),n=p(e,i,P,t.reportAllChanges),m((function(){return n()}))})),setTimeout(n,0))})))},I={passive:!0,capture:!0},O=new Date,M=function(e,t){i||(i=t,r=e,s=new Date,j(removeEventListener),k())},k=function(){if(r>=0&&r<s-O){var e={entryType:"first-input",name:i.type,target:i.target,cancelable:i.cancelable,startTime:i.timeStamp,processingStart:i.timeStamp+r};a.forEach((function(t){t(e)})),a=[]}},C=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){M(e,t),r()},i=function(){r()},r=function(){removeEventListener("pointerup",n,I),removeEventListener("pointercancel",i,I)};addEventListener("pointerup",n,I),addEventListener("pointercancel",i,I)}(t,e):M(t,e)}},j=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,C,I)}))},F=[100,300],D=function(e,t){t=t||{},A((function(){var n,s=w(),o=l("FID"),c=function(e){e.startTime<s.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),n(!0))},u=function(e){e.forEach(c)},d=f("first-input",u);n=p(e,o,F,t.reportAllChanges),d&&g(v((function(){u(d.takeRecords()),d.disconnect()}))),d&&h((function(){var s;o=l("FID"),n=p(e,o,F,t.reportAllChanges),a=[],r=-1,i=null,j(addEventListener),s=c,a.push(s),k()}))}))},L=0,H=1/0,_=0,X=function(e){e.forEach((function(e){e.interactionId&&(H=Math.min(H,e.interactionId),_=Math.max(_,e.interactionId),L=_?(_-H)/7+1:0)}))},B=function(){return o?L:performance.interactionCount||0},U=function(){"interactionCount"in performance||o||(o=f("event",X,{type:"event",buffered:!0,durationThreshold:0}))},z=[200,500],q=0,G=function(){return B()-q},K=[],J={},V=function(e){var t=K[K.length-1],n=J[e.interactionId];if(n||K.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};J[i.id]=i,K.push(i)}K.sort((function(e,t){return t.latency-e.latency})),K.splice(10).forEach((function(e){delete J[e.id]}))}},Z=function(e,t){t=t||{},A((function(){U();var n,i=l("INP"),r=function(e){e.forEach((function(e){e.interactionId&&V(e),"first-input"===e.entryType&&!K.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&V(e)}));var t,r=(t=Math.min(K.length-1,Math.floor(G()/50)),K[t]);r&&r.latency!==i.value&&(i.value=r.latency,i.entries=r.entries,n())},s=f("event",r,{durationThreshold:t.durationThreshold||40});n=p(e,i,z,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),g((function(){r(s.takeRecords()),i.value<0&&G()>0&&(i.value=0,i.entries=[]),n(!0)})),h((function(){K=[],q=B(),i=l("INP"),n=p(e,i,z,t.reportAllChanges)})))}))},W=[2500,4e3],Y={},Q=function(e,t){t=t||{},A((function(){var n,i=w(),r=l("LCP"),s=function(e){var t=e[e.length-1];t&&t.startTime<i.firstHiddenTime&&(r.value=Math.max(t.startTime-d(),0),r.entries=[t],n())},a=f("largest-contentful-paint",s);if(a){n=p(e,r,W,t.reportAllChanges);var o=v((function(){Y[r.id]||(s(a.takeRecords()),a.disconnect(),Y[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,o,!0)})),g(o),h((function(i){r=l("LCP"),n=p(e,r,W,t.reportAllChanges),m((function(){r.value=performance.now()-i.timeStamp,Y[r.id]=!0,n(!0)}))}))}}))},ee=[800,1800],te=function e(t){document.prerendering?A((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},ne=function(e,t){t=t||{};var n=l("TTFB"),i=p(e,n,ee,t.reportAllChanges);te((function(){var r=u();if(r){var s=r.responseStart;if(s<=0||s>performance.now())return;n.value=Math.max(s-d(),0),n.entries=[r],i(!0),h((function(){n=l("TTFB",0),(i=p(e,n,ee,t.reportAllChanges))(!0)}))}}))}}}]);