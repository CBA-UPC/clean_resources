"use strict";(window.webpackChunkNRBA=window.webpackChunkNRBA||[]).push([[317],{6588:(e,r,t)=>{function n(e,r,t){var n=0;for(void 0===t&&(t=e[0],n=1);n<e.length;n++)t=r(t,e[n]);return t}t.d(r,{u:()=>n})},6112:(e,r,t)=>{t.r(r),t.d(r,{Aggregate:()=>x});var n=/([a-z0-9]+)$/i;function i(e){if(e){var r=e.match(n);return r?r[1]:void 0}}var a=t(4917),s=t(6588),o=/^\n+|\n+$/g,c=65530;function u(e){return function(e){var r;if(e.length>100){var t=e.length-100;r=e.slice(0,50).join("\n"),r+="\n< ...truncated "+t+" lines... >\n",r+=e.slice(-50).join("\n")}else r=e.join("\n");return r}(e).replace(o,"")}var h=!1,d=/function (.+?)\s*\(/,l=/^\s*at (?:((?:\[object object\])?(?:[^(]*\([^)]*\))*[^()]*(?: \[as \S+\])?) )?\(?((?:file|http|https|chrome-extension):.*?)?:(\d+)(?::(\d+))?\)?\s*$/i,f=/^\s*(?:(\S*|global code)(?:\(.*?\))?@)?((?:file|http|https|chrome|safari-extension).*?):(\d+)(?::(\d+))?\s*$/i,g=/^\s*at .+ \(eval at \S+ \((?:(?:file|http|https):[^)]+)?\)(?:, [^:]*:\d+:\d+)?\)$/i,m=/^\s*at Function code \(Function code:\d+:\d+\)\s*/i;function v(e){var r=null;try{if(r=function(e){if(!e.stack)return null;var r=(0,s.u)(e.stack.split("\n"),p,{frames:[],stackLines:[],wrapperSeen:!1});return r.frames.length?{mode:"stack",name:e.name||k(e),message:e.message,stackString:u(r.stackLines),frames:r.frames}:null}(e),r)return r}catch(e){if(h)throw e}try{if(r=function(e){if(!("line"in e))return null;var r=e.name||k(e);if(!e.sourceURL)return{mode:"sourceline",name:r,message:e.message,stackString:k(e)+": "+e.message+"\n    in evaluated code",frames:[{func:"evaluated code"}]};var t=r+": "+e.message+"\n    at "+e.sourceURL;e.line&&(t+=":"+e.line,e.column&&(t+=":"+e.column));return{mode:"sourceline",name:r,message:e.message,stackString:t,frames:[{url:e.sourceURL,line:e.line,column:e.column}]}}(e),r)return r}catch(e){if(h)throw e}try{if(r=function(e){var r=e.name||k(e);return r?{mode:"nameonly",name:r,message:e.message,stackString:r+": "+e.message,frames:[]}:null}(e),r)return r}catch(e){if(h)throw e}return{mode:"failed",stackString:"",frames:[]}}function p(e,r){var t,n=function(e){var r=e.match(f);r||(r=e.match(l));if(r)return{url:r[2],func:"Anonymous function"!==r[1]&&"global code"!==r[1]&&r[1]||null,line:+r[3],column:r[4]?+r[4]:null};if(e.match(g)||e.match(m)||"anonymous"===e)return{func:"evaluated code"}}(r);return n?((t=n.func)&&t.indexOf("nrWrapper")>=0?e.wrapperSeen=!0:e.stackLines.push(r),e.wrapperSeen||e.frames.push(n),e):(e.stackLines.push(r),e)}function k(e){var r=d.exec(String(e.constructor));return r&&r.length>1?r[1]:"unknown"}function S(e){var r=0;if(!e||!e.length)return r;for(var t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r}var b,I,y,w=t(4045),_=t(6668),P=t(2438),C=t(9252),j=t(7022),N=t(6562),D=t(2053),R=t(2374),L=t(5330),O=t(8322),A=t(4329),B=t(2325);t(2650);class x extends L.m{constructor(e,r){var t;super(e,r,O.t),t=this,this.stackReported={},this.pageviewReported={},this.errorCache={},this.currentBody,this.errorOnPage=!1,this.ee.on("interactionSaved",(e=>this.onInteractionSaved(e))),this.ee.on("interactionDiscarded",(e=>this.onInteractionDiscarded(e))),(0,w.X)("err",(function(){return t.storeError(...arguments)}),this.featureName,this.ee),(0,w.X)("ierr",(function(){return t.storeError(...arguments)}),this.featureName,this.ee);var n=(0,N.Mt)(this.agentIdentifier,"jserrors.harvestTimeSeconds")||10;this.scheduler=new _.o("jserrors",{onFinished:function(){return t.onHarvestFinished(...arguments)}},this),this.scheduler.harvest.on("jserrors",(function(){return t.onHarvestStarted(...arguments)})),this.ee.on("drain-".concat(this.featureName),(()=>{this.blocked||this.scheduler.startTimer(n)})),(0,w.X)("block-err",(()=>{this.blocked=!0,this.scheduler.stopTimer()}),this.featureName,this.ee),(0,A.L)(this.agentIdentifier,this.featureName)}onHarvestStarted(e){var r=this.aggregator.take(["err","ierr","xhr"]);e.retry&&(this.currentBody=r);var t={body:r,qs:{}},n=(0,P.P)((0,N.OP)(this.agentIdentifier).releaseIds);return"{}"!==n&&(t.qs.ri=n),r&&r.err&&r.err.length&&!this.errorOnPage&&(t.qs.pve="1",this.errorOnPage=!0),t}onHarvestFinished(e){e.retry&&this.currentBody&&((0,j.D)(this.currentBody,((e,r)=>{for(var t=0;t<r.length;t++){var n=r[t],i=this.getBucketName(n.params,n.custom);this.aggregator.merge(e,i,n.metrics,n.params,n.custom)}})),this.currentBody=null)}nameHash(e){return S("".concat(e.exceptionClass,"_").concat(e.message,"_").concat(e.stack_trace||e.browser_stack_hash))}getBucketName(e,r){return this.nameHash(e)+":"+S((0,P.P)(r))}canonicalizeURL(e,r){if("string"!=typeof e)return"";var t=(0,a.f)(e);return t===r?"<inline>":t}buildCanonicalStackString(e,r){for(var t="",n=0;n<e.frames.length;n++){var a=e.frames[n],s=i(a.func);t&&(t+="\n"),s&&(t+=s+"@"),"string"==typeof a.url&&(t+=a.url),a.line&&(t+=":"+a.line)}return t}canonicalizeStackURLs(e){for(var r=(0,a.f)((0,N.OP)(this.agentIdentifier).origin),t=0;t<e.frames.length;t++){var n=e.frames[t],i=n.url,s=this.canonicalizeURL(i,r);s&&s!==n.url&&(n.url=s,e.stackString=e.stackString.split(i).join(s))}return e}storeError(e,r,t,n){if(r=r||(0,D.zO)(),t||!(0,N.OP)(this.agentIdentifier).onerror||!(0,N.OP)(this.agentIdentifier).onerror(e)){var i=this.canonicalizeStackURLs(v(e)),a={stackHash:S(this.buildCanonicalStackString(i)),exceptionClass:i.name,request_uri:R._A?.location.pathname};i.message&&(a.message=""+i.message);var s,o=S("".concat(i.name,"_").concat(i.message,"_").concat(i.stackString));this.stackReported[o]?a.browser_stack_hash=S(i.stackString):(this.stackReported[o]=!0,a.stack_trace=(s=i.stackString).length>c?s.substr(0,c):s),a.releaseIds=(0,P.P)((0,N.OP)(this.agentIdentifier).releaseIds),this.pageviewReported[o]||(a.pageview=1,this.pageviewReported[o]=!0);var u=t?"ierr":"err",h={time:r};if((0,C.p)("errorAgg",[u,o,a,h],void 0,B.D.sessionTrace,this.ee),(0,C.p)("errorAgg",[u,o,a,h],void 0,B.D.spa,this.ee),!this.blocked)if(null!=a._interactionId)this.errorCache[a._interactionId]=this.errorCache[a._interactionId]||[],this.errorCache[a._interactionId].push([u,o,a,h,l,n]);else{var d={},l=(0,N.C5)(this.agentIdentifier).jsAttributes;(0,j.D)(l,g),n&&(0,j.D)(n,g);var f=o+":"+S((0,P.P)(d));this.aggregator.store(u,f,a,h,d)}}function g(e,r){d[e]=r&&"object"==typeof r?(0,P.P)(r):r}}onInteractionSaved(e){this.errorCache[e.id]&&!this.blocked&&(this.errorCache[e.id].forEach((r=>{var t={},n=r[4],i=r[5];(0,j.D)(n,o),(0,j.D)(e.root.attrs.custom,o),(0,j.D)(i,o);var a=r[2];a.browserInteractionId=e.root.attrs.id,delete a._interactionId,a._interactionNodeId&&(a.parentNodeId=a._interactionNodeId.toString(),delete a._interactionNodeId);var s=r[1]+e.root.attrs.id+":"+S((0,P.P)(t));function o(e,r){t[e]=r&&"object"==typeof r?(0,P.P)(r):r}this.aggregator.store(r[0],s,a,r[3],t)})),delete this.errorCache[e.id])}onInteractionDiscarded(e){this.errorCache&&this.errorCache[e.id]&&!this.blocked&&(this.errorCache[e.id].forEach((r=>{var t={},n=r[4],i=r[5];(0,j.D)(n,o),(0,j.D)(e.root.attrs.custom,o),(0,j.D)(i,o);var a=r[2];delete a._interactionId,delete a._interactionNodeId;var s=r[1]+":"+S((0,P.P)(t));function o(e,r){t[e]=r&&"object"==typeof r?(0,P.P)(r):r}this.aggregator.store(r[0],s,r[2],r[3],t)})),delete this.errorCache[e.id])}}b=x,I="featureName",y=O.t,(I=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(I))in b?Object.defineProperty(b,I,{value:y,enumerable:!0,configurable:!0,writable:!0}):b[I]=y},8322:(e,r,t)=>{t.d(r,{A:()=>i,t:()=>n});const n=t(2325).D.jserrors,i="nr@seenError"}}]);