(window.webpackJsonp=window.webpackJsonp||[]).push([[222],{1195:function(e,t,i){"use strict";i.r(t);var s=i(746),a=i.n(s),r=i(682),l=i(962),c=i(60),d={components:{CategoryTag:l.a},props:{collection:{type:Array,default:()=>[]},primaryLimit:{type:Number|Boolean,default:!1},secondaryLimit:{type:Number|Boolean,default:!1},valueKey:{type:String|Function,default:"id"},textKey:{type:String|Function,default:"label"},selectedKey:{type:String|Function,default:"selected"},highlightedKey:{type:String|Function,default:"highlighted"},sourceKey:{type:String|Function,default:"source"},i18n:{type:Object,default:()=>({primaryLabel:"",primaryLimitLabel:"",secondaryLabel:"",secondaryLimitLabel:""})},searchEnabled:{type:Boolean,default:!1}},computed:{tags(){return this.collection.map((e=>({id:this.tagId(e),label:this.tagLabel(e),source:this.tagSource(e),isSelected:this.tagSelected(e),isHighlighted:this.tagHighlighted(e)})))},providedPrimaryTags(){return this.selectedPrimaryTagCount?this.selectedPrimaryTags:this.primaryTags},providedSecondaryTags(){return this.selectedSecondaryTagCount?this.selectedSecondaryTags:this.secondaryTags},primaryTags(){return this.tags.filter((e=>e.source===c.b))},secondaryTags(){return this.tags.filter((e=>e.source===c.c))},otherTags(){return this.tags.filter((e=>e.source===c.a))},selectedPrimaryTags(){return this.primaryTags.filter((e=>e.isSelected))},selectedSecondaryTags(){return this.secondaryTags.filter((e=>e.isSelected))},selectedPrimaryTagCount(){return this.selectedPrimaryTags.length},selectedSecondaryTagCount(){return this.selectedSecondaryTags.length},primaryLimitReached(){return!this.primaryLimit||this.selectedPrimaryTagCount>=this.primaryLimit},secondaryLimitReached(){return!this.secondaryLimit||this.selectedSecondaryTagCount>=this.secondaryLimit},labelClasses:()=>"text--color-greyShade space--mv-2 size--all-s"},methods:{tagId(e){return"function"==typeof this.valueKey?this.valueKey(e):e[this.valueKey]},tagLabel(e){return"function"==typeof this.textKey?this.textKey(e):e[this.textKey]},tagSource(e){return"function"==typeof this.sourceKey?this.sourceKey(e):e[this.sourceKey]},tagSelected(e){return"function"==typeof this.selectedKey?this.selectedKey(e):e[this.selectedKey]},tagHighlighted(e){return"function"==typeof this.highlightedKey?this.highlightedKey(e):e[this.highlightedKey]},primaryTagUnavailable(e,t){return this.searchEnabled?this.primaryLimitReached&&e>=this.primaryLimit&&!t.isSelected:this.primaryLimitReached&&e>=this.primaryLimit},secondaryTagUnavailable(e,t){return this.searchEnabled?this.secondaryLimitReached&&e>=this.secondaryLimit&&!t.isSelected:this.secondaryLimitReached&&e>=this.secondaryLimit},toggleSelection(e){(e.isSelected||e.source===c.b&&!this.primaryLimitReached||e.source===c.c&&!this.secondaryLimitReached||e.source===c.a)&&(e.isSelected=!e.isSelected,this.$emit("update",e))}}},n=i(45),o=Object(n.a)(d,(function(){var e=this,t=e._self._c;return e.searchEnabled?t("div",[e._t("search",null,{primaryLimitReached:e.primaryLimitReached,secondaryLimitReached:e.secondaryLimitReached,otherTags:e.otherTags,toggleSelection:e.toggleSelection})],2):t("div",{staticClass:"tagCloud width--all-12"},[t("section",[e._t("primary-label",(function(){return[e.primaryLimitReached?t("span",{class:e.labelClasses},[e._v(e._s(e.i18n.primaryLimitLabel))]):t("span",{class:e.labelClasses},[e._v(e._s(e.i18n.primaryLabel))])]})),t("div",{staticClass:"tagCloud-slotAvailable space--mv-2"},[e._t("primary-tags",(function(){return e._l(e.providedPrimaryTags,(function(i,s){return t("CategoryTag",{key:i.id,attrs:{id:i.id,label:i.label,"is-selected":i.isSelected,"is-highlighted":i.isHighlighted,disabled:e.primaryTagUnavailable(s,i)},on:{update:function(t){return e.toggleSelection(i)}}})}))}),{tags:e.providedPrimaryTags,updateSelection:e.toggleSelection}),e._t("primary-messages")],2),e.secondaryTags.length?t("div",{staticClass:"space--mt-4"},[e._t("secondary-label",(function(){return[e.secondaryLimitReached?t("span",{class:e.labelClasses},[e._v(e._s(e.i18n.secondaryLimitLabel))]):t("span",{class:e.labelClasses},[e._v(e._s(e.i18n.secondaryLabel))])]})),t("div",{staticClass:"tagCloud-slotAvailable space--mv-2"},[e._t("secondary-tags",(function(){return e._l(e.providedSecondaryTags,(function(i,s){return t("CategoryTag",{key:i.id,attrs:{id:i.id,label:i.label,"is-selected":i.isSelected,"is-highlighted":i.isHighlighted,disabled:e.secondaryTagUnavailable(s,i)},on:{update:function(t){return e.toggleSelection(i)}}})}))}),{tags:e.providedSecondaryTags,updateSelection:e.toggleSelection}),e._t("secondary-messages")],2)],2):e._e(),e._t("default")],2)])}),[],!1,null,null,null).exports,u=i(585),h=i(17),y={components:{TagCloud:o},mixins:[u.a],inheritAttrs:!1,props:{value:{type:Array,default:()=>[]},groups:{type:Array,default:[]},limit:{type:Number|Boolean,default:!1},threadType:{type:String,default:h.a},scopeGroupThreadType:{type:Boolean,default:!1},i18n:{type:Object,default:()=>({})},isSearch:{type:Boolean,default:!1}},data:()=>({unselectedGroups:[]}),computed:{options(){const e=this.selectedValue,t=this.groups;return a()([...e,...t],"threadGroupId").map((t=>Object.assign({},t,{isSelected:e.findIndex((e=>t.threadGroupId===e.threadGroupId))>-1,source:this.sourceKey(t)})))}},methods:{selectedGroup:r.f,highlightedGroup:r.b,sourceKey(e){return Object(r.g)(e,this.scopeGroupThreadType)},updateSearchSelection(e){let{primaryLimitReached:t,secondaryLimitReached:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.source=this.sourceKey(e),e.source===c.b&&t||e.source===c.c&&i)return;e.isSelected=!0;const s=Object(r.e)(e,this.selectedValue);s&&(this.selectedValue=s,this.updateUnselectedGroups(e.threadGroupId))},updateSelection(e){const t=Object(r.h)(this.selectedValue,this.options,e);t&&(this.selectedValue=t,this.updateUnselectedGroups(e.id))},clearTags(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.a;const t=this.selectedValue.filter((t=>this.sourceKey(t)===e)).map((e=>e.threadGroupId)),i=this.selectedValue.filter((t=>this.sourceKey(t)!==e));this.selectedValue=i,this.updateUnselectedGroups(t)},updateUnselectedGroups(e){Array.isArray(e)||(e=[e]),setTimeout((()=>{e.forEach((e=>{this.selectedValue.some((t=>{let{threadGroupId:i}=t;return i===e}))?this.unselectedGroups=this.unselectedGroups.filter((t=>t!==e)):this.unselectedGroups.push(e)})),this.$emit("update-unselected-groups",this.unselectedGroups)}),0)}}},g=y,p=Object(n.a)(g,(function(){var e=this;return(0,e._self._c)("TagCloud",e._b({attrs:{i18n:e.i18n,collection:e.options,"primary-limit":e.limit,"secondary-limit":e.limit,"selected-key":e.selectedGroup,"highlighted-key":e.highlightedGroup,"source-key":e.sourceKey,"search-enabled":e.isSearch,"value-key":"threadGroupId","text-key":"threadGroupName"},on:{update:e.updateSelection,clear:e.clearTags},scopedSlots:e._u([{key:"search",fn:function({primaryLimitReached:t,secondaryLimitReached:i,otherTags:s,toggleSelection:a}){return[e._t("search",null,{otherTags:s,toggleSelection:a,updateSearchSelection:s=>e.updateSearchSelection(s,{primaryLimitReached:t,secondaryLimitReached:i}),clearTags:e.clearTags})]}},{key:"primary-messages",fn:function(){return[e._t("primary-messages")]},proxy:!0},{key:"secondary-messages",fn:function(){return[e._t("secondary-messages")]},proxy:!0},{key:"other-messages",fn:function(){return[e._t("other-messages")]},proxy:!0}],null,!0)},"TagCloud",e.$attrs,!1))}),[],!1,null,null,null);t.default=p.exports}}]);bfuscated:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},layout:{type:String,required:!0},features:{type:Object,default:()=>({})}},data:()=>({uploadVisible:!1}),computed:{displayImage(){return this.selected||this.placeholder},selected:{get(){return this.value},set(e){e||this.$store.commit("threadForm/UPDATE_FIELD",{path:"thread.images.slots",value:[]}),this.$store.commit("fileUpload/UPDATE_FIELD",{path:"selected",value:e})}},hasImageFrame(){return this.displayImage||this.features.uploadImage},containerClassList(){return{"cept-ti imgFrame imgFrame--noBorder imgFrame--threadCard bRad--all-r aGrid":this.hasImageFrame&&"card"===this.layout,"cept-thread-image-link imgFrame imgFrame--noBorder thread-listImgCell":this.hasImageFrame&&"list"===this.layout,"img--mute":this.disabled}},imageClassList(){return{"":this.obfuscated}},loader:()=>s.b.create("threadImgUpload")},destroyed(){this.loader.destroy()}},r=a(45),i=Object(r.a)(l,(function(){var e=this,t=e._self._c;return t("BaseLoader",{staticClass:"width--all-12",attrs:{visualization:"square","container-class-list":"","item-class-list":"","linked-to":e.loader}},[[t("span",{class:e.containerClassList},[e.poorQuality?t("span",{staticClass:"preview-warn lbox--v-5 lbox--h-5 zIndex--atopNormal text--color-white"},[t("BaseIcon",{attrs:{name:"warning"}})],1):e._e(),e.displayImage?t("span",[t("img",{staticClass:"thread-image width--all-auto height--all-auto imgFrame-img",class:e.imageClassList,attrs:{src:e.displayImage}})]):e.features.uploadImage?t("span",{staticClass:"thread-image imgFrame-img seal--pointer-on flex--inline boxAlign-jc--all-c boxAlign-ai--all-c width--all-12",attrs:{tabindex:"0"}},[t("span",{staticClass:"hAlign--all-c box--all-b space--h-2"},[t("BaseIcon",{attrs:{name:"image",color:"brandPrimary",width:"45px",height:"45px"}})],1)]):e._e(),e.obfuscated?t("span",{staticClass:"text--color-white height--all-full width--all-12 bRad--all-r imgFrame-overlay imgFrame-overlay--nsfw flex boxAlign-jc--all-c boxAlign-ai--all-c"},[t("BaseIcon",{attrs:{name:"hide"}})],1):e._e()])]],2)}),[],!1,null,null,null);t.a=i.exports}}]);