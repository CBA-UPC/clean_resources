this.travelPixel=[function(t,g,_){"use strict";_.r(g),function(n){_.d(g,"Headers",function(){return a}),_.d(g,"Request",function(){return y}),_.d(g,"Response",function(){return b}),_.d(g,"DOMException",function(){return m}),_.d(g,"fetch",function(){return w});var e,r,s={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self}; h(){return this.bodyUsed=!1,this._initBody=function(t){var e;(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:s.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s.arrayBuffer&&s.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||r(t))?this._bodyArrayBuffer=l(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=this.arrayBuffer=,this.text=s.formData&&(this.formData=,this.json=this}s.arrayBuffer&&(e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||,a.prototype.append=a.prototype.delete=a.prototype.get=a.prototype.has=a.prototype.set=a.prototype.forEach=a.prototype.keys=a.prototype.values=a.prototype.entries=s.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];rototype.clone=h.call(y.prototype),h.call(b.prototype),b.prototype.clone=b.error=var v=[301,302,303,307,308],m=(b.redirect=self.DOMException);try{new m}catch(t){(m=.prototype=Object.create(Error.prototype),m.prototype.constructor=m}function w(i,u){return new n(function(n,t){var e=new y(i,u);if(e.signal&&e.signal.aborted)return t(new m("Aborted","AbortError"));var o=new XMLHttpRequest;.onload=o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=o.onabort=o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&s.blob&&(o.responseType="blob"),e.headers.forEach(,e.signal&&(e.signal.addEventListener("abort",r),o.onreadystatechange=,o.send(void 0===e._bodyInit?null:e._bodyInit)})}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=a,self.Request=y,self.Response=b)}.call(this,_(0))},function(t,e,r){"use strict";var n=r(0),a=(n=n)&&n.__esModule?n:{default:n};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}(n.key),n)}}r(1);var n=r(5),c=n.COOKIE_NAME,u=n.PPID_COOKIE_NAME,f=n.Util,s=r(7);var l=function(){function n(t,e,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(this.domainName=t,!this.domainName)throw new Error("Illegal arguments exception");this.domainMap=new s(t,e,r)}var t,e,r;return t=n,(e=[{key:"_findXdid",value:function(e){var i=this,u=this.domainMap.thirdPartyPixelUrl(),n=this.domainMap.xShopUrls()||[],s=!1;return function e(t,r){return t.then(function(t){return s=s||t&&t.optout,t&&t.hasXdid()?a.default.resolve(t):r>=n.length?a.default.resolve(null):e(f.queryXdid(n[r]),r+1)})}(f.queryXdid(u),0).then(function(t){var r,n,o,t=null===t?null:t.xdidString();return s?a.default.resolve(t):(r=u,n=t,o=e,i.domainName,f.setLocalXdid(n,o).then(function(t){var e;return null===t?(console.error("Did not successfully set first-party xdid"),t):(e=f.setThirdPartyXdid(r,t.xdidString(),o),t&&t.xdidString()===n?t.xdidString():e.then()}).then(function(t){return localStorage.setItem(c,t),t}))})}},{key:"loadXdidApi",value:function(t){var e=this,r=f.getCookieValue(c),n=f.getCookieValue(u),o=f.canTrack();return f.cookieExists(n)&&!o&&f.deleteCookie(u),f.cookieExists(r)?f.setThirdPartyXdid(this.domainMap.thirdPartyPixelUrl(),r,t).then(function(t){return t&&t.hasXdid()?t.xdidString():null}).then(:this.domainMap.load().then(function(){return e._findXdid(t)})}}])&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}();indow&&(n=window.travelPixel)&&0<n.length&&n.forEach&&n.forEach(,t.exports={push:h,Waiter:l}},function(t,e,r){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}(n.key),n)}}r(1);var u=r(6);function s(t,e){if(e.ok)return e.json();throw new Error("Fetch failed for ".concat(t," with status ").concat(e.status))}r=function(){ar t,e,r;return t=i,r=[{key:"getPix",value:function(t){try{if(t)return new u(t)}catch(t){console.error(t)}return null}},{key:"queryXdid",value:function(e){var t="".concat(e,"/get");return window.fetch(t,{credentials:"include"}).then(function(t){return s(e,t)}).then(function(t){return i.getPix(t)}).catch(function(t){return console.error(t),null})}},{key:"setLocalXdid",value:,{key:"setThirdPartyXdid",value:function(t,e,r){return i.setXdid("".concat(t,"/pix"),e,r)}},{key:"setXdidSimpleRequest",value:function(t,e,r){var n=null,o=(e&&(n=JSON.stringify({xdid:e})),"".concat(t,"?").concat(this.objectToQueryString(r)));return window.fetch(o,{method:"POST",credentials:"include",body:n}).then(function(t){return s(o,t)}).then(function(t){return i.getPix(t)}).catch(function(t){return console.error(t),null})}},{key:"setXdid",value:function(t,e,r){var n=null,o=(e&&(n=JSON.stringify({xdid:e})),"".concat(t,"?").concat(this.objectToQueryString(r)));return window.fetch(o,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:n}).then(function(t){return s(o,t)}).then(.catch(}},{key:"objectToQueryString",value:function(t){var e,r,n=[];if(!t||"function"!=typeof t.hasOwnProperty)return"";for(e in t)t.hasOwnProperty(e)&&(r=(r=t[e])||"",n.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r))));return n.join("&")}},{key:"getCookieValue",value:function(t,e){if("string"!=typeof e){if(!document||!document.cookie)return null;e=document.cookie}e=e.match("(^|[^;]+)\\s*".concat(t,"\\s*=\\s*([^;]+)"));return e?e.pop():""}},{key:"cookieExists",value:function(t){return"string"==typeof t&&0<t.trim().length}},{key:"validPpidCookie",value:function(t){return!!this.cookieExists(t)&&null!==t.match(/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/)}},{key:"canTrack",value:function(){var t=this.getCookieValue("eu-site"),e=this.getCookieValue("ha-cookie-settings");return this.cookieExists(t)&&"1"===t?!!this.cookieExists(e)&&e.includes("functional%3A1"):(t=this.getCookieValue("OIP"),!this.cookieExists(t)||!!t.includes("gdpr|1")||!t.includes("gdpr"))}},{key:"deleteCookie",value:function(t){var e=this.getDomain(window.location.hostname);document.cookie="".concat(t,"=; Domain=").concat(e,"; Path=/; Max-Age=0;")}},{key:"getDomain",value:],(e=null)&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();t.exports={Util:r,COOKIE_NAME:"xdid",PPID_COOKIE_NAME:"eg_ppid"}},function(t,e,r){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}nction u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===e?String:Number)(t);r=r.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:String(t)}(n.key),n)}}var s=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.raw=t,this.optout=t.o,!this.optout&&t.v?(t=i(t.v.split("|"),3),this.id=t[0],this.timestamp=t[1],this.domain=t[2]):(this.id=null,this.timestamp=null,this.domain=null)}var t,r,n;return t=e,(r=[{key:"xdidString",value:function(){return null!=this.timestamp&&null!=this.domain?"".concat(this.id,"|").concat(this.timestamp,"|").concat(this.domain):"".concat(this.id)}},{key:"hasXdid",value:])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.exports=s},function(t,e,r){"use strict";var n=r(0),o=(n=n)&&n.__esModule?n:{default:n};1);var s=r(8),a={prod:"https://www.trvl-px.com/trvl-px/v2"},c=a.prod,n=function(){function n(t,e,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.hostname=t,this.env=e,this.cdnUrl=r||"https://b.travel-assets.com/travel-pixel-js/1.0.0",this._loaded=!1,this.config=null,this.fetchOpts={},this.thirdPartyPixelUrlValue=a[this.env]||c}var t,e,r;return t=n,(e=[{key:"load",value:function(){var t,e=this,r=this;return this._loaded&&this.config?o.default.resolve(this.config):(t=s.buildConfigFilename(this.hostname,this.env))?(t="".concat(this.cdnUrl,"/").concat("config","/").concat(t),window.fetch(t,this.fetchOpts).then(function(t){return t.ok?t.json():{env:e.env,name:"expediaDC",domain:e.hostname,xshopUrls:[]}}).then(.catch():o.default.reject("Failed to build config asset name")}},{key:"xShopUrls",value:function(){if(this._loaded)return this.config&&this.config.xshopUrls||[];throw new TypeError("Must call load() prior to calling next()")}},{key:"thirdPartyPixelUrl",value:])&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}();t.exports=n},function(t,e,r){"use strict";t.exports={buildConfigFilename:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"prod";return t=t||window.location.hostname,"".concat(t,"-").concat(e,"-config.json")}}}]);
//# sourceMappingURL=app.js.map