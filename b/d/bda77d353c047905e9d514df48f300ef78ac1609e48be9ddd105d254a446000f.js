"use strict";(self.webpackChunkjsxui=self.webpackChunkjsxui||[]).push([[911],{68678:function(n,t,o){o.d(t,{Z:function(){return v}});var e=o(19063),i=o(34444),r=o.p+"static/media/empty-timeout.98e9b5f850b9bd12be1a.png",u="TimeOutBox_wrap__4DRcD",a="TimeOutBox_text__4Ng6Y",c=o(28610);function l(){var n=(0,i.M)();return(0,c.jsxs)("div",{className:u,children:[(0,c.jsx)("img",{src:r,alt:""}),(0,c.jsx)("div",{className:a,children:n("pleaseRefreshAndTryAgainLater","Please refresh and try again later")})]})}var d="ErrorBoundary_error_boundary__7h5zv",s="ErrorBoundary_error_text__SuU9B";function p(n){var t,o,e=n.error,i=(n.resetErrorBoundary,"development"===(null===(t=window.SERVER_DATA)||void 0===t||null===(o=t.payInfo)||void 0===o?void 0:o.environment));return(0,c.jsx)(c.Fragment,{children:i?(0,c.jsx)("div",{className:d,children:(0,c.jsxs)("p",{className:s,children:["Something went wrong",null!==e&&void 0!==e&&e.message?": ".concat(null===e||void 0===e?void 0:e.message):""]})}):(0,c.jsx)(l,{})})}var f=o(28894),_=function(n,t){var o,e=t.componentStack,i={msg:null===n||void 0===n?void 0:n.message,stack:e};console.log(n),null===f.S||void 0===f.S||null===(o=f.S.custom)||void 0===o||o.call(f.S,"react_component_error_captured",i)};function v(n){var t=n.children;return(0,c.jsx)(e.ErrorBoundary,{FallbackComponent:p,onError:_,children:t})}},69158:function(n,t,o){o.d(t,{Z:function(){return a}});var e=o(70885),i=o(4665),r={v0:"Input_v0__4x2Fw",tilt_text:"Input_tilt_text__NkGQU",tilt_bg:"Input_tilt_bg__IBrz5",v1:"Input_v1__6aNsE",light_text:"Input_light_text__PPeFK",dark_text:"Input_dark_text__hmt+o",v2:"Input_v2__GK2pX",v3:"Input_v3__fILdW",v4:"Input_v4__I4lu9",v5:"Input_v5__1iR+H",v6:"Input_v6__kFGq0",v7:"Input_v7__c-Wqm",v8:"Input_v8__0SkIA",pop_bg:"Input_pop_bg__+U-W3",pop_mode_box:"Input_pop_mode_box__1MILe",s_pop:"Input_s_pop__p2uh9",pop_mess:"Input_pop_mess__R+yza",active:"Input_active__L16rv",m_pop:"Input_m_pop__V7vmJ",l_pop:"Input_l_pop__hHHPZ",c_pop:"Input_c_pop__Cyw9C",mobile_show:"Input_mobile_show__l0ZuU",tablet_show:"Input_tablet_show__7am5K",pc_show:"Input_pc_show__1rdQA",loading_icon:"Input_loading_icon__pnBt6",LoadingRotateAni:"Input_LoadingRotateAni__4bUyR",input_box:"Input_input_box__aHKUS",input_wrap_box:"Input_input_wrap_box__Ep9yv",input:"Input_input__s4ezt",clean_btn:"Input_clean_btn__0FqUo",error:"Input_error__2a+t8",error_text:"Input_error_text__Pd7xh",phone:"Input_phone__HuZ+R",captcha:"Input_captcha__q8bR5",no_border:"Input_no_border__r-BrJ",slide_more:"Input_slide_more__4t1np",slide_box:"Input_slide_box__o5GOO",slide_select:"Input_slide_select__hubC3",slide_icon:"Input_slide_icon__ioBec",slide_item:"Input_slide_item__YqfHh",area_code:"Input_area_code__dI9b-",captcha_box:"Input_captcha_box__5Q2jP",countdown:"Input_countdown__jPczh"},u=o(28610);function a(n){var t=n.value,o=void 0===t?"":t,a=n.errorMsg,c=void 0===a?"":a,l=n.placeholder,d=void 0===l?"":l,s=n.showError,p=void 0!==s&&s,f=n.activeInput,_=void 0!==f&&f,v=n.type,m=void 0===v?"text":v,y=n.maxLength,h=void 0===y?30:y,g=n.disabled,I=void 0!==g&&g,w=n.readonly,b=void 0!==w&&w,S=n.selectOptions,R=void 0===S?[]:S,C=n.onChange,A=n.onClear,T=n.onBlur,E=n.onFocus,P=n.onKeyDown,Z=n.onSelected,k=n.preventDefault,x=void 0===k||k,q=n.showErrorMsg,L=void 0===q||q,D=(0,i.useRef)(null),N=(0,i.useState)(_),O=(0,e.Z)(N,2),G=O[0],B=O[1],j=(0,i.useState)(!1),M=(0,e.Z)(j,2),V=M[0],U=M[1],F=function(){var n;null===(n=D.current)||void 0===n||n.blur(),B(!1),U(!1),"function"===typeof T&&T()};function H(n){var t;x&&(null===n||void 0===n||n.preventDefault(),null===n||void 0===n||n.stopPropagation()),null===(t=D.current)||void 0===t||t.focus(),B(!0),U(!0),"function"===typeof E&&E()}return(0,i.useEffect)((,[_]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"\n                    ".concat(r.input_box,"\n                    ").concat(G?r.active:"","\n                    ").concat(p?r.error:"","\n                    ").concat(I||b?r.input_disabled:"","\n                    ").concat("slide_more"===m?r.slide_more:"","\n                    ").concat("slide_select"===m?r.slide_select:"","\n                "),onMouseDown:function(n){H(n)},onBlur:children:(0,u.jsxs)("div",{className:"".concat(r.input_wrap_box),children:[(0,u.jsxs)("div",{className:r.input,children:[(0,u.jsx)("input",{ref:D,type:"text",placeholder:d,value:o,maxLength:h,disabled:I,readOnly:b,onChange:function(n){var t;"function"===typeof C&&C((null===n||void 0===n||null===(t=n.target)||void 0===t?void 0:t.value)||"")},onKeyDown:P}),!(b||I)&&(0,u.jsx)("div",{className:r.clean_btn,onMouseDown:function(n){x&&(null===n||void 0===n||n.preventDefault(),null===n||void 0===n||n.stopPropagation()),"function"===typeof A&&A()},children:(0,u.jsx)("i",{className:"i-midas:error-filled icon"})}),(0,u.jsx)("div",{className:r.slide_icon,children:(0,u.jsx)("i",{className:"i-midas:down icon"})})]}),(0,u.jsx)("div",{className:"".concat(r.slide_box," ").concat(V?r.active:""),children:R?R.map((function(n){var t=n.optionValue,o=void 0===t?"":t,e=n.optionLabel,i=void 0===e?"":e;return o&&i?(0,u.jsx)("div",{className:r.slide_item,onMouseDown:function(t){var o;null===t||void 0===t||t.preventDefault(),null===t||void 0===t||t.stopPropagation(),o=n,F(),"function"===typeof Z&&Z(o)},children:"".concat(i)},o):""})):""})]})}),p&&L&&(0,u.jsx)("div",{className:r.error_text,children:(0,u.jsxs)("p",{children:[" ",c," "]})})]})}},79223:function(n,t,o){o.d(t,{Cx:function(){return r},GT:function(){return u},IO:function(){return a},yk:function(){return i}});var e=o(11670),i=function(n){return e.WY.get("/queryDrmLimitNoLogin",{params:n})},r=function(n){return e.WY.get("/getBuyStatus",{params:n})},u=function(n){return e.WY.get("/queryRPCouponFromAms",{params:n})},a=,76756:function(n,t,o){var e;o.d(t,{a:function(){return e}}),e||(e={}))},66333:23611:function(n,t,o){var e;o.d(t,{Nr:function(){return e},RA:function(){return i},W3:function(){return r},tX:function(){return u}}),e||(e={}));var i={Hero:"hero_id",Skin:"skin_id"},r="FE_RECOMMEND_TAB_EVENT",u="FE_ALL"},17435:function(n,t,o){var e=o(74165),i=o(15861),r=o(70885),u=o(42627),a=o(4665),c=o(47402),l=o(11670),d=o(30425),s=window.SERVER_DATA,p=s.midasCoinsInfoConfig,f=s.countryConfig,_=void 0===f?{}:f,v=s.user,m=(p||{}).allowVerifyCountryList,y=void 0===m?[]:m,h=null===y||void 0===y?void 0:y.map((function(n){return{name:(_[n]||{}).name,code:n}}));t.Z=function(){var n=(0,u.KO)(d.c9),t=(0,r.Z)(n,2),o=t[0],s=t[1],p=(0,a.useState)("--"),f=(0,r.Z)(p,2),_=f[0],m=f[1],y=(0,a.useState)("--"),g=(0,r.Z)(y,2),I=g[0],w=g[1],b=(0,u.KO)(d.Iw),S=(0,r.Z)(b,2),R=S[0],C=S[1],A=(0,u.KO)(d.px),T=(0,r.Z)(A,2),E=T[0],P=T[1];(0,a.useEffect)((function(){var n=!(null===E||void 0===E||!E.regionCode);if(C(n),n&&E){var t,o,e=E||{},i=e.regionCode,r=e.balanceTotal,u=e.currency,a=void 0===u?"BRL":u,l=(null===h||void 0===h||null===(t=h.find((function(n){var t;return n.code===(null===i||void 0===i||null===(t=i.toLowerCase)||void 0===t?void 0:t.call(i))})))||void 0===t?void 0:t.name)||"";s(l),m(r);var d=null===(o=(0,c.B8)("".concat(100*Number(r)),a,void 0,!0))||void 0===o?void 0:o.priceUINum;w(d)}else s(""),m("--")}),[E]);var Z=function(){var n=(0,i.Z)((0,e.Z)().mark((function n(){var t,o,i,r,u,a;return(0,e.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v){n.next=2;break}return n.abrupt("return");case 2:return o=[],n.prev=3,n.next=6,(0,l.Ty)();case 6:i=n.sent,u=(r=i||{}).ret,a=r.data,o=0===u&&(null===a||void 0===a?void 0:a.userAccountInfos)||[],n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),o=[];case 14:P(null===(t=o)||void 0===t?void 0:t[0]);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})));return ();return{accountBalance:_,formatAccountBalance:I,currentActiveRegion:o,midasCoinsActiveStatus:R,midasCoinsAccountInfo:E,handleMidasCoinsAccountInfo:Z,midasCoinsPayCheck:function(n){var t=window.SERVER_DATA,o=t.midasCoinsInfoConfig,e=t.payInfo,i=(o||{}).coinsChannelId,r=void 0===i?[]:i,u=e.country;return null===r||void 0===r||!r.includes(n)||u===(null===E||void 0===E?void 0:E.regionCode)}}}},89206:function(n,t,o){o.d(t,{Z:function(){return c}});var e=o(1413),i=o(74539),r=o(10223),u=o(32775),a=o(3868);function c(){var n=(0,u.s0)(),t=(0,u.TH)();function o(t,o,e,u,c,l){var d=(0,i.cY)(t,o,e,c);(0,r.Qf)().buy_type_key&&!/apps\/vip/.test(t)&&(o="",u=!0),a.Z.set(window.location.href),n(d,{replace:u,state:l})}return{checkIsLocatedPage:function(n){var o;return null===t||void 0===t||null===(o=t.pathname)||void 0===o?void 0:o.includes("/".concat(n,"/"))},jumpCurrency:function(n,t,e){o("/".concat(i.ZP.getCountry(),"/buy").concat(i.ZP.getShortUrl()),n,t,!1,!1,e)},jumpPropShop:function(n,t){var u=(0,r.Qf)();delete u.pid,o("/".concat(i.ZP.getCountry(),"/shop").concat(i.ZP.getShortUrl()),(0,e.Z)((0,e.Z)({},u),n),t)},redirectToPropShop:function(){window.location.href="/".concat(i.ZP.getCountry(),"/shop").concat(i.ZP.getShortUrl())},jumpBattle:function(n,t){o("/".concat(i.ZP.getCountry(),"/battle").concat(i.ZP.getShortUrl()),n,t)},jumpPropDetail:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;t.pid=n,o("/".concat(i.ZP.getCountry(),"/props_order").concat(i.ZP.getShortUrl()),t,e,!1,!1,r)},jumpMdscoins:function(n,t){var o,e,r;window.location.href="https://".concat(window.location.host,"/").concat(null===(o=window)||void 0===o||null===(e=o.SERVER_DATA)||void 0===e||null===(r=e.shopInfo)||void 0===r?void 0:r.shopcode,"/").concat(i.ZP.getCountry(),"/coins/mdscoins")},jumpMidasCoinsManagePage:function(n,t){var o,e,r;window.location.href="https://".concat(window.location.host,"/").concat(null===(o=window)||void 0===o||null===(e=o.SERVER_DATA)||void 0===e||null===(r=e.shopInfo)||void 0===r?void 0:r.shopcode,"/").concat(i.ZP.getCountry(),"/usercenter#midasCoinsManagePage")},jumpRedirectPage:}},38894:function(n,t,o){o.d(t,{B:function(){return l},$:function(){return c}});var e=o(64450),i=function(n){return encodeURIComponent(n).replace(/[!'()*]/g,()},r=window,u=r.report,a=r.SERVER_DATA.countryInfo;function c(n,t){return new Promise((function(o,e){if(window.___Kepler_WebTicket){var r="KeplerTicket=".concat(i(window.___Kepler_WebTicket));n[t]=n[t]||"",n[t]+=n[t]?"&".concat(r):"".concat(r),o(n)}else window.TencentKepler?(window.TencentKepler.predict((function(e){var r="KeplerTicket=".concat(i(e));n[t]=n[t]||"",n[t]+=n[t]?"&".concat(r):"".concat(r),o(n)})),null===u||void 0===u||u.custom("async.kepler",{})):o(n)}))}function l(n){return n.browser_info=function(){var n,t=e.Z.get("UUID")||window.__Report_INFO.tid||"",o=navigator.platform.toLowerCase(),r=!!window.navigator.cookieEnabled,u=navigator.userAgent,c=window.__Report_INFO.midasbuyDeviceId||e.Z.get("midasbuyDeviceId")||"",l=window.fingerprint||"";return[t,o,r,"",u,c,(null===a||void 0===a||null===(n=a.lang)||void 0===n?void 0:n[0])||"en",l].map((function(n){return i(n)})).join(",")}(),new Promise((function(t,o){window.___Kepler_WebTicket?(n.rc_extra=i("KeplerTicket=".concat(i(window.___Kepler_WebTicket))),t(n)):window.TencentKepler?(window.TencentKepler.predict((function(o){n.rc_extra=i("KeplerTicket=".concat(i(o))),t(n)})),null===u||void 0===u||u.custom("async.kepler",{})):t(n)}))}},5587:function(n,t,o){o.d(t,{Z:function(){return i}});var e=o(1413);function i(n){var t=window.SERVER_DATA,o=t.channel_info,i=(t.gameInfo||{}).channel,r=(void 0===i?[]:i).find((function(t){return t.id===n}));return(0,e.Z)((0,e.Z)({},o[n]),{},{cid:n,cgiChannelInfo:r})}},60627:function(n,t,o){o.d(t,{Z:function(){return i}});var e=o(76756);function i(n){var t=window.SERVER_DATA,o=t.experimentalFeature,i=void 0===o?[]:o,r=t.jsxUiInteractionConfig;return!!((void 0===r?{}:r).FullScaleFeature||[e.a.integratePointCashCoin,e.a.posteriorPlayerIdEnter,e.a.noShowUnsupportedChannels]).includes(n)||Array.isArray(i)&&i.includes(n)}},47402:function(n,t,o){o.d(t,{B8:function(){return p},MD:function(){return s},Ye:function(){return u},_9:function(){return r},ct:function(){return f}});var e=o(70885),i=o(85444);function r(n){var t="string"===typeof n?parseInt(n,10):n;return(t/=100).toString()}function u(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return parseFloat((+n/100).toFixed(2))}function a(n){for(var t=String(n).split("."),o=(0,e.Z)(t,1)[0],i=t.length>1?".".concat(t[1]):"",r=/(\d+)(\d{3})/;r.test(o);)o=o.replace(r,"$1,$2");return o+i}unction l(n,t,o){if(t<=0)return n;var i=n.split(".");if(i.length>1){var r=t-i[1].length;if(r>=0)return"".concat(i[0],".").concat(i[1]).concat(new Array(r).fill("0").join(""));if(o){var u=parseFloat("0.".concat(i[1])).toFixed(t).split("."),c=(0,e.Z)(u,2),l=c[0],d=c[1];if("1"===l){var s=parseInt(i[0]),10)+1,p=a(s);return"".concat(p,".").concat(d)}return"".concat(i[0],".").concat(d)}return n}return"".concat(n,".").concat(new Array(t).fill("0").join(""))}function d(n,t,o){var e=(0,i.SO)()||"UC",r="";switch(t){case"IDR":n="Rp ".concat(c(o)),r="Rp";break;case"THB":n="\u0e3f".concat(o),r="\u0e3f";break;case"PHP":n="\u20b1".concat(o),r="\u20b1";break;case"VND":n="".concat(c(o),"\u20ab"),r="".concat(c(o),"\u20ab");break;case"MYR":n="RM".concat(o),r="RM";break;case"GMC":n="".concat(o," ").concat(e),r=e;break;default:r=t}return{res:n,currencyUILabel:r}}var s=function(n,t){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=o?r(n):n.toString(),i=a(e),u="".concat(i," ").concat(t);return d(u,t,i).res};function p(n,t,o){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3],d=r(n),s=a(d),p="".concat(d," ").concat(t),f=o||window.SERVER_DATA.payInfo.currency_config,_=(0,i.SO)()||"UC";if(f){var v=f.decimalPoint||".",m=f.thousandPoint||",",y=f.currencySymbol||t,h=f.leftSymbol||!1,g=f.zeroPadding?parseInt(f.zeroPadding,10):0,I=!!f.rounding,w=s;g&&(w=l(w,g,I));var b=w=w.replace(".","d").replace(/,/g,m).replace("d",v);return"GMC"===t?"".concat(w," ").concat(_):(h?w=y+w:w+=y,e?{currencyUILabel:y,priceUINum:b,priceQuantity:u(n)}:w)}return e?{currencyUILabel:t,priceUINum:["IDR","VND"].includes(t)?"".concat(c(s)):s,priceQuantity:u(n)}:p}var f=function(n){var t=n.discountInfo,o=n.currencyType,e=n.productType;if(!t)return null;var i=null!==t&&void 0!==t&&t.amount?"".concat(100*Number(t.amount)):"0",u=null!==t&&void 0!==t&&t.display_amount?"".concat(100*Number(t.display_amount)):"0";return{discountPrice:"GameCoins"===e?p(i.toString(),o):r(i.toString()),originalPrice:"GameCoins"===e?p(u.toString(),o):r(u.toString())}};t.ZP=function(n,t){var o=r(n),e=a(o),i="".concat(o," ").concat(t),c=d(i,t,e),l=(c.res,c.currencyUILabel),s=void 0===l?t:l;return{currencyUILabel:s,priceUINum:e,priceQuantity:u(n)}}},49567:function(n,t,o){o.d(t,{AZ:function(){return m},D8:function(){return v},OH:function(){return s},af:function(){return g},bF:function(){return h},fu:function(){return f},w8:function(){return y},wi:function(){return _},yG:function(){return p}});var e=o(42982),i=o(1413),r=o(85444),u=o(5587),a=o(46561),c=o(61555);unction d(n,t){var o=l(n);return null===o||void 0===o?void 0:o.find((function(n){return n.cid===t}))}function s(n){var t=l(n);return(null===t||void 0===t?void 0:t.find((function(n){var t,o=null===n||void 0===n?void 0:n.uptopresents;return Number(null===o||void 0===o?void 0:o.__sendNum)>0||Array.isArray(null===o||void 0===o?void 0:o.product_item)&&(null===o||void 0===o||null===(t=o.product_item)||void 0===t?void 0:t.length)})))||(null===t||void 0===t?void 0:t[0])}function p(n,t){var o=window.SERVER_DATA.isShelfRule,e=(0,r.SO)();if(o){var u=(0,a.getSendListInfo)(n.marketingGiftList,t).sendGameCoinsList,c=(0,a.calSendGameCoins)(u);return[(0,i.Z)((0,i.Z)({},(null===u||void 0===u?void 0:u[0])||{}),{},{num:String(c)})]}var l,s,p,f=d(n,t),_=[];f&&(null!==(l=f.uptopresents)&&void 0!==l&&l.__sendNum&&_.push({id:f.cid,name:e||(null===n||void 0===n?void 0:n.name)||"",num:"".concat(f.uptopresents.__sendNum),url:n.coinGiftIcon}),_=_.concat((null===f||void 0===f||null===(s=f.basicInfo)||void 0===s?void 0:s.product_item)||[],(null===(p=f.uptopresents)||void 0===p?void 0:p.product_item)||[]));return _}function f(n,t){var o;if(window.SERVER_DATA.isShelfRule){var i,r=(null===(i=n.allowChannels)||void 0===i?void 0:i.find((function(n){return n.cid===t})))||{},u=r.sendPropList,a=void 0===u?[]:u,c=r.sendList,l=void 0===c?[]:c,d=t?a:(null===n||void 0===n?void 0:n.upperMostGiftSend)||[];return"GameCoins"===n.product_type?d:l}var s=null===n||void 0===n||null===(o=n.promotionsInfo)||void 0===o?void 0:o.filter((function(n){return n.channelId===t||"*"===n.channelId}));return(null===s||void 0===s?void 0:s.reduce((function(n,t){return t.presentItem.length&&(n=[].concat((0,e.Z)(n),(0,e.Z)(t.presentItem))),n}),[]))||[]}function _(n,t){var o,r=window.SERVER_DATA.isShelfRule,u=f(n,t),l=(0,c.NI)();if(!r)return n.basicSend?null!==u&&void 0!==u&&u.length?u.map((function(t,o){return 0===o?(0,i.Z)((0,i.Z)({},t),{},{num:String(Number(t.num)+Number(n.basicSend))}):t})):[{id:"custom_temp_basic",name:(null===l||void 0===l?void 0:l.currencyFullNameUnit)||(null===l||void 0===l?void 0:l.currencyUnit)||(null===n||void 0===n?void 0:n.name)||"",num:String(n.basicSend),url:null===l||void 0===l||null===(o=l.images)||void 0===o?void 0:o.coinGiftIcon}]:u;var d=(n.marketingGiftList||[]).concat(n.sdkMarketingGiftList||[]),s=(0,a.getSendListInfo)(d,t),p=s.sendGameCoinsList,_=s.sendPropList,v=(0,a.calSendGameCoins)(p),m=(0,i.Z)((0,i.Z)({},(null===p||void 0===p?void 0:p[0])||{}),{},{num:String(v)});return v>0?[m].concat((0,e.Z)(_)):_}function v(n,t){var o=d(n,t||""),e="";return o&&(e=(0,u.Z)(o.cid).name),e}function m(n){var t,o=function(n){return!n||Array.isArray(n)&&0===n.length};if(Number(null===n||void 0===n||null===(t=n.sendInfos)||void 0===t?void 0:t.length)<=1)return!1;var e=!1;return Array.isArray(n.sendInfos)&&n.sendInfos.some((function(n){var t,i,r,u=!o(null===(t=n.basicInfo)||void 0===t?void 0:t.product_item)||!o(null===(i=n.uptopresents)||void 0===i?void 0:i.product_item)||!(null===(r=n.uptopresents)||void 0===r||!r.__sendNum);return!e&&u&&(e=!0),!(!e||!u)}))}function y(n){var t,o=function(n){return!n||Array.isArray(n)&&0===n.length};return!(Number(null===n||void 0===n||null===(t=n.sendInfos)||void 0===t?void 0:t.length)<=1)&&(Array.isArray(n.sendInfos)&&n.sendInfos.some((function(n){var t,e,i;return!(o(null===(t=n.basicInfo)||void 0===t?void 0:t.product_item)&&o(null===(e=n.uptopresents)||void 0===e?void 0:e.product_item)&&(null===(i=n.uptopresents)||void 0===i||!i.__sendNum))})))}function h(n,t){var o=window.SERVER_DATA.mpInfo,e=[];if(null!==o&&void 0!==o&&o.buycurrency){var i,r,u,a=null===(i=n.sendInfos)||void 0===i?void 0:i.find((function(n){return n.cid===t}));if(a)null===(r=a.uptopresents)||void 0===r||null===(u=r.product_item)||void 0===u||u.forEach((function(n){n.url&&n.num&&e.push({num:n.num,url:n.url,name:(null===n||void 0===n?void 0:n.name)||""})}))}return e}function g(n,t){var o=(n.marketingGiftList||[]).concat(n.sdkMarketingGiftList||[]).filter(();return null===o||void 0===o?void 0:o.some((function(n){return"Rp"===n.giftType}))}},37186:function(n,t,o){function e(n){var t=n.promotionList;n.promotionType;return null!==t&&void 0!==t&&t.length?t.map((function(n){var t=n.model_info;return{activity_id:(null===t||void 0===t?void 0:t.activity_id)||"",model_id:(null===t||void 0===t?void 0:t.model_id)||"",mpgo_app_id:(null===t||void 0===t?void 0:t.mpgo_app_id)||"",model_type:(null===t||void 0===t?void 0:t.model_type)||0}})).filter(():[]}o.d(t,{Z:function(){return e}})},44127:function(n,t,o){o.d(t,{DJ:function(){return h},SC:function(){return v},ZP:function(){return _}});var e=o(45987),i=o(1413),r=o(23611),u=o(46561),a=o(7354),c=o(47402),l=o(26949),d=o(37422),s=o(11123),p=o(55815),f=["totalNum","upperMostSend","upperMostGiftSend","baseSendGameCoinsList","baseSendGameCoins","baseSendPropList","baseSendList","priceInfo","baseSendModelInfoList","recommendInfo"];function _(){var n=window.SERVER_DATA,t=n.productsList,o=void 0===t?[]:t,e=n.isShelfRule,i=n.shelf,c=void 0===i?{products:[]}:i,s=n.gameConfig,f=n.payInfo;if(e){var _=(0,l.DV)(c.products,"Rp"),v=new u.MarketingRuleHelper({shelf:window.SERVER_DATA.shelf,gameConfig:s,currencyConfig:null===f||void 0===f?void 0:f.currency_config}),h=_.map(();return(0,d.TZ)(h).map((function(n){if(n.custom_product_type===r.Nr.SKIN){var t=h.find((function(t){return t.custom_product_type===r.Nr.HERO&&"".concat((0,p.Qi)(t))==="".concat((0,p.FY)(n))}));n.name=null!==t&&void 0!==t&&t.name?"".concat(n.name," (").concat(t.name,")"):n.name}return(0,a.flow)(p.eM)(n)}))}return o.map(()}function v(){var n=window.SERVER_DATA,t=n.productInfo,o=n.shelfProductInfo,e=n.isShelfRule,i=n.shelf,r=n.gameConfig,a=n.payInfo,c={productid:"",country:"",description:"",currency_type:"",name:"",num:"",price:"",product_detail:"",canConsumeByCoin:!1,allowChannels:[],uin_quota:void 0,targetChannel:"",noShowPrice:!1,show_price:void 0,limitDate:"",startTime:0,dynamicProperties:{},owned_num:0,custom_product_type:""};if(!t)return c;var l=new u.MarketingRuleHelper({shelf:i,shelfProductInfo:o,gameConfig:r,currencyConfig:null===a||void 0===a?void 0:a.currency_config});return(e?y({product:o,marketingRuleHelper:l}):m(t))||c}function m(n){var t,o,e=window.SERVER_DATA.payInfo,r=n.currency_type||e.currency_type,u=(0,c.B8)(n.price,r),l=n.show_price?(0,c.B8)(n.show_price,r):"",d=null===(t=n.currency_type)||void 0===t?void 0:t.includes("GMC"),s=function(n){var t,o,e,r=window.SERVER_DATA.lanRes,u=void 0===r?{}:r,a=!1,c="",l={};(0,p.oS)(n)||(a=!0,c="".concat(u.limitTimeLeft," ").concat(n.limitDate));(0,p.Aj)(n)&&(a=!0,c=(0,p.Bj)(n));null!==(t=window.SERVER_DATA.gameConfig)&&void 0!==t&&t.shouldQueryRoleDetail&&(c=u.roleCannotBuyPropsBanText);if((0,p.pr)(n)||null!==(o=window.SERVER_DATA)&&void 0!==o&&null!==(e=o.gameConfig)&&void 0!==e&&e.limitProduct){l.limitStr=(0,p.KN)(n);var d=u.limitRateSuffix;l.limitRateStr="".concat(d||"Limit"," ").concat((0,p.$i)(n))}return(0,i.Z)({constrainText:c,isDisable:a},l)}(n),f=s.isDisable,_=s.constrainText,v=s.limitStr,m=void 0===v?"":v,y=s.limitRateStr,h=void 0===y?"":y,g=(null===(o=n.channel)||void 0===o?void 0:o.map(())||[],I=(0,a.flow)(p.eM)(n);return(0,i.Z)((0,i.Z)({},I),{},{fprice:u,allowChannels:g,originalPrice:l,discountInfo:{discountPrice:u,originalPrice:l},canConsumeByCoin:d,isDisable:f,constrainText:_,limitStr:m,limitRateStr:h})}function y(n){var t,o=n.product,r=n.marketingRuleHelper,u=null===r||void 0===r?void 0:r.getProductInfo({productId:o.shelf_product_id}),a=(u.totalNum,u.upperMostSend,u.upperMostGiftSend,u.baseSendGameCoinsList,u.baseSendGameCoins,u.baseSendPropList,u.baseSendList,u.priceInfo),l=u.baseSendModelInfoList,d=(u.recommendInfo,(0,e.Z)(u,f)),p=a.price,_=a.fprice,v=a.priceInYuan,m=d.currency_type,y=d.marketingGiftList,h=o.available_channel_ids.includes("uniacct"),g=(0,s.j)(o),I=(0,c.ct)({discountInfo:g,currencyType:m,productType:"Rp"}),w=o.bundle_items.map((),b=(o.product_properties||[]).reduce((function(n,t){var o=t.name,e=t.type,i=t.value,r=t.presentation;try{n[o]="official_url"===o?{label:r,value:i}:"string"===e?i:JSON.parse(i)}catch(u){n[o]=i}return n}),{}),S=(o.promotion_properties||[]).reduce((function(n,t){var o=t.name,e=t.type,i=t.value;t.presentation;try{n[o]="string"===e?i:JSON.parse(i)}catch(r){n[o]=i}return n}),{});return(0,i.Z)((0,i.Z)({},d),{},{price:p,fprice:_,basePromotions:l,couponProductId:o.product_id,game_product_id:o.game_product_id,product_detail:o.description,unit:"",days:"",autopaytype:"",service_code:"",tax_info_list:[],proxy_tax_info_list:[],original_price_cent:p||0,original_price:v||"",tax_fee:"0",begin_time:"",end_time:"",rank_num:"",is_hot_product:"0",image_url:o.icon,sub_product:w,description:o.description,show_price:"",uin_quota:"",targetChannel:"",noShowPrice:!1,limitDate:"",startTime:0,canConsumeByCoin:h,coins_point_info:o.coins_point_info||null,owned_num:o.owned_num,custom_product_type:o.custom_product_type,dynamicProperties:b,dynamicPromotionProperties:S,activity_tag_list_v2:(null===o||void 0===o?void 0:o.activity_tag_list_v2)||[],discountInfo:I,timeleft:o.timeleft||0,unavailable:o.unavailable||!1,promotionalSaleInfo:o.promotion_sale_info||{},isBrandNew:!!o.isBrandNew,shelveTime:o.shelveTime,prePricingPrices:null===o||void 0===o||null===(t=o.channel_prices)||void 0===t?void 0:t.map((function(n){return{payment_channel_id:n.payment_channel_id,amount:{currency:n.currency,value:n.amount}}})),product_properties:o.product_properties||[],origin_product_id:o.product_id,marketingGiftList:y})}function h(n){var t=window.SERVER_DATA,o=t.shelf,e=t.gameConfig,i=t.payInfo,r=new u.MarketingRuleHelper({shelf:o,gameConfig:e,currencyConfig:null===i||void 0===i?void 0:i.currency_config});return n.reduce((function(n,t){var o=t.products,e=(void 0===o?[]:o).map(();return(0,a.concat)(n,e)}),[])}},37422:function(n,t,o){o.d(t,{BC:function(){return g},MN:function(){return m},TZ:function(){return h},ZP:function(){return y},e6:function(){return I}});var e=o(42982),i=o(70885),r=o(1413),u=o(45987),a=o(46561),c=o(7354),l=o(5587),d=o(47402),s=o(26949),p=o(37186),f=o(11123),_=o(98083),v=["totalNum","upperMostSend","upperMostGiftSend","baseSendGameCoinsList","baseSendGameCoins","baseSendPropList","baseSendList","priceInfo","baseSendModelInfoList","recommendInfo","originalPriceInfo"],m=function(n){var t,o=n.product,e=n.marketingRuleHelper,i=window.SERVER_DATA.channel_info,a=e.getProductInfo({productId:o.shelf_product_id}),s=a.totalNum,p=a.upperMostSend,_=a.upperMostGiftSend,m=(a.baseSendGameCoinsList,a.baseSendGameCoins),y=(a.baseSendPropList,a.baseSendList,a.priceInfo),h=a.baseSendModelInfoList,g=a.recommendInfo,w=a.originalPriceInfo,b=(0,u.Z)(a,v),S=y.price,R=y.fprice,C=y.priceInYuan,A=b.currency_type,T=b.marketingGiftList,E=Object.keys(i);o.channel_group=(0,c.sortBy)(o.channel_group,();var P=I(o),Z=P.gifts,k=P.recommendGiftChannel,x=P.limitStr,q=P.promotionsInfo,L=P.groupedGiftSend,D=P.groupedPromotionsChannelPriceMap,N=(0,f.j)(o),O=(0,d.ct)({discountInfo:N,currencyType:A,productType:"GameCoins"}),G=(0,l.Z)((null===k||void 0===k?void 0:k.pay_channel)||"")||{},B=G.icon_h5,j=G.icon_pc,M=(0,r.Z)((0,r.Z)({},b),{},{price:S,fprice:R,upperMostGiftSend:_,basicSend:m,uppermostSend:p,uiPriceObj:(0,d.ZP)(C,A),original_price_cent:S||0,original_price:C||"",displayChannelGift:Z||[],gifts:q.length>0?q[0].presentItem:[],hasGift:Z.length>0,limitStr:x,product_detail:o.description,origin_product_id:o.product_id,promotionsCid:Z.length?Z[0].id:"",promotionsInfo:q,rewardChannelImage:B||j,showPromo:!1,showUcPromo:!1,totalNumIncludingBasic:s,discountInfo:O,basePromotions:h,groupedGiftSend:L,groupedPromotionsChannelPriceMap:D,isCollapsed:!(0,c.isEmpty)(o.collapsed_prices),isExposed:!(0,c.isEmpty)(o.prices),prePricingPrices:null===o||void 0===o||null===(t=o.channel_prices)||void 0===t?void 0:t.map((),product_properties:o.product_properties||[],hasPropGift:T.some((function(n){return"Rp"===n.giftType})),marketingGiftList:T,originalPriceInfo:w});return null!==g&&void 0!==g&&g.isRecommend&&(M.isRecommend=!0,M.recommendText=null===g||void 0===g?void 0:g.recommendText),M};function y(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=window.SERVER_DATA,o=t.shelf,e=t.gameConfig,i=t.payInfo,r=new a.MarketingRuleHelper({shelf:o,filterChannelIds:n,gameConfig:e,currencyConfig:null===i||void 0===i?void 0:i.currency_config}),u=(0,s.DV)(o.products,"GameCoins"),c=null===u||void 0===u?void 0:u.map(();return h(c)}var h=function(n){var t=window.SERVER_DATA.hideChannelsInSdk,o=void 0===t?[]:t;return _.g&&o.length&&n.forEach((function(n){n.allowChannels&&(n.allowChannels=n.allowChannels.filter((function(n){var t,e=-1===o.indexOf(n.cid);e||(null===(t=console)||void 0===t||t.warn("sdk\u6a21\u5f0f\u4e0b\u9690\u85cf\u4e86\u6e20\u9053:".concat(n.cid)));return e})))})),n};function g(){return window.SERVER_DATA.shelf.products.some(()}var I=function(n){var t,o,r=0,u=[],a={},c={},l=[],d={pay_channel:null===(t=n.available_channel_ids)||void 0===t?void 0:t[0]},s=0,f={},_={},v=[],m=[];if(null!==n&&void 0!==n&&n.base_group){var y=n.base_group,h=y.promotion_list,g=y.grouped_promotions;if(h.forEach((function(n){var t=b(n.gift_list,"GameCoins");r+=t.reduce((function(n,t){return n+t.game_coins_num*t.quantity}),0);var o=b(n.gift_list,"Rp"),e=w("*",o);l=l.concat(e),m.push({channelId:"*",presentItem:e,promotionText:""})})),g){Object.keys(g).forEach((function(n){var t=g[n];c[n]=(0,p.Z)({promotionList:t.promotion_list,promotionType:"Grouped"})}));var I=function(n){var t=0,o=Object.keys(n),e={};return o.forEach((function(o){var i=n[o],r=(null===i||void 0===i?void 0:i.promotion_list.reduce((function(n,t){return t.gift_list&&Array.isArray(t.gift_list)&&(n=n.concat(t.gift_list)),n}),[])).filter(().reduce((function(n,t){return n+t.game_coins_num*t.quantity}),0);e[o]=r,t<r&&(t=r)})),{maxCount:t,groupedGroupMap:e}}(g);s=I.maxCount,f=I.groupedGroupMap}(0,p.Z)({promotionList:h||[],promotionType:"Base"})}if(null!==n&&void 0!==n&&null!==(o=n.channel_group)&&void 0!==o&&o.length){var R=n.channel_group,C=(0,i.Z)(R,1)[0];d=C;var A=S(C),T=A.totalChannelGifts;A.totalGiftForGameCoins,u=[].concat((0,e.Z)(l),(0,e.Z)(T)),R.forEach((function(n){a[n.pay_channel]=(0,p.Z)({promotionList:n.promotion_list||[],promotionType:"Channel"});var t=S(n),o=t.totalChannelGifts,e=t.totalGiftForGameCoins;_[n.pay_channel]=e,m.push({channelId:n.pay_channel,presentItem:o,promotionText:n.limit_text}),n.promotion_list.forEach((function(n){var t,o;v.push({activity_id:(null===n||void 0===n||null===(t=n.model_info)||void 0===t?void 0:t.activity_id)||"",model_id:(null===n||void 0===n||null===(o=n.model_info)||void 0===o?void 0:o.model_id)||""})}))}))}else u=l.slice(0);return{send:r,gifts:u,promotionsInfo:m,promotions:v,limitStr:"",recommendGiftChannel:d,groupedGiftSend:s,groupedPromotionsChannelPriceMap:f}},w=function(n,t){return t.map((function(t){return{id:n,name:t.name,num:"Rp"===t.product_type?t.quantity.toString():t.game_coins_num.toString(),url:t.icon}}))},b=S=function(n){var t=[],o=0;return n.promotion_list.forEach((function(i){var r=b(i.gift_list,"GameCoins"),u=b(i.gift_list,"Rp");(null===r||void 0===r?void 0:r.length)>0&&(o=r.reduce((,0)),(null===u||void 0===u?void 0:u.length)>0&&(t=[].concat((0,e.Z)(t),(0,e.Z)(u.map((function(t){return{id:n.pay_channel,name:t.name,num:t.quantity.toString(),url:t.icon,limit_text:n.limit_text||""}})))))})),{totalChannelGifts:t,totalGiftForGameCoins:o}}},72379:function(n,t,o){o.d(t,{o:function(){return p}});var e,i=o(70885),r=o(42982),u=o(64450),a=o(85444),c=o(90470),l=o(65122);!e||(e={}));var d=p(),s={set:function(n,t,o){var i=function(n){var t=window.SERVER_DATA.cookieCategory||{fn:[],analy:[]},o=function(t){return null===t||void 0===t?void 0:t.some((function(t){var o,e;return t===n||(null===t||void 0===t||null===(o=t.endsWith)||void 0===o?void 0:o.call(t,"_"))&&(null===n||void 0===n||null===(e=n.startsWith)||void 0===e?void 0:e.call(n,t))}))},i=e.necessary;return o(t.fn)?i=e.fn:o(t.analy)&&(i=e.analy),i}(n);if(i===e.fn&&null!==d&&void 0!==d&&d.fn||i===e.analy&&null!==d&&void 0!==d&&d.analy||i===e.necessary)return u.Z.set(n,t,o)},get:u.Z.get,del:u.Z.del,deleteCategory:function(n){var t=window.SERVER_DATA.cookieCategory||{fn:[],analy:[]},o=function(n){var t=[],o=function(){var n,t=null===(n=document.cookie)||void 0===n?void 0:n.split(";"),o=new Set;return t.forEach((function(n){var t,e,i,r=null===(t=n.split)||void 0===t||null===(e=t.call(n,"="))||void 0===e||null===(i=e[0])||void 0===i?void 0:i.trim();o.add(r)})),(0,r.Z)(o)}();n.forEach((function(n){null!==n&&void 0!==n&&n.endsWith("_")?t.push.apply(t,(0,r.Z)(function(n,t){return null===n||void 0===n?void 0:n.filter(()}(o,n))):t.push(n)})),null===t||void 0===t||t.forEach((function(n){u.Z.del(n,{domain:"*"}),u.Z.del(n,{domain:".midasbuy.com"})}))};n===e.fn&&o(t.fn),n===e.analy&&o(t.analy)}};function p(){var n=u.Z.get("select_cookie");if((0,c.qS)()){var t,o=null===(t=(0,a.fc)())||void 0===t?void 0:t.shopcode;return"1"===(o?(0,l.k)("select_cookie_".concat(o)):null)?{fn:!0,analy:!0}:{fn:!1,analy:!1}}if("1"!==n)return{fn:!1,analy:!1};var e=u.Z.get("cookie_control").split("|"),r=(0,i.Z)(e,2),d=r[0],s=void 0===d?0:d,p=r[1];return{fn:!!+s,analy:!!+(void 0===p?0:p)}}t.Z=s},14304:function(n,t,o){var e=o(74165),i=o(15861),r=o(15671),u=o(43144),a=o(60005),c=o(38894),l=o(1167),d=function(){function n(){(0,r.Z)(this,n),this.baseInterfaceUrl="".concat(location.origin,"/interface"),this.notificationInterface={getNotifications:"browserNotifications",updateStatus:"browserNotifications",getNotificationDetail:"browserNotifications",subscribe:"subscribeNotifications",unsubscribe:"unsubscribeNotifications",querySubscribe:"querySubscribe"}}return(0,u.Z)(n,[{key:"getNotifications",value:function(n,t){var o="".concat(this.baseInterfaceUrl,"/").concat(this.notificationInterface.getNotifications),e={uid:n,lan:t,action:"getNotifications"};return this.sendReq(o,e,"post")}},{key:"updateStatus",value:function(n,t){var o="".concat(this.baseInterfaceUrl,"/").concat(this.notificationInterface.updateStatus),e={uid:n,taskIds:t,action:"updateStatus"};return this.sendReq(o,e,"post")}},{key:"subscribe",value:function(n){var t="".concat(this.baseInterfaceUrl,"/").concat(this.notificationInterface.subscribe);return this.sendReq(t,n,"post")}},{key:"unsubscribe",value:function(n){var t="".concat(this.baseInterfaceUrl,"/").concat(this.notificationInterface.unsubscribe);return this.sendReq(t,n,"post")}},{key:"querySubscribe",value:function(n){var t="".concat(this.baseInterfaceUrl,"/").concat(this.notificationInterface.querySubscribe);return this.sendReq(t,n,"post")}},{key:"sendReq",value:function(){var n=(0,i.Z)((0,e.Z)().mark((function n(t,o,i){return(0,e.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.B)(o);case 2:return o=n.sent,n.abrupt("return",(0,a.Z)({url:t,method:i,data:(0,l.f)(o)}));case 4:case"end":return n.stop()}}),n)})));return ()}]),n}(),s=new d;t.Z=s},11123:function(n,t,o){function e(n){var t=n.prices,o=n.promotion_info;return null!==o&&void 0!==o&&o.promotion_id&&(null===t||void 0===t?void 0:t.find(())||null}o.d(t,{j:function(){return e}})},55815:function(n,t,o){o.d(t,{FY:function(){return E},Qi:function(){return T},vl:function(){return A},Bj:function(){return w},KN:function(){return I},$i:function(){return g},rC:function(){return R},xj:function(){return C},QG:function(){return _},oS:function(){return m},Aj:function(){return h},pr:function(){return y},eM:);var e=o(42982),i=o(1413),r=o(23611),u=(o(10223),o(7354)),a=o(15671),c=o(43144),l=o(79223),d=o(85444);var s=function(n){for(var t={totalQuotaInfo:void 0,uinQuotaInfo:void 0,runOutInfo:void 0},o={runOutLimitType:"total",isRunOut:n.total_quota>-1&&n.total_used_quota>=n.total_quota,used_quota:n.total_used_quota,total_quota:n.total_quota},e={runOutLimitType:"total",runOutCycleType:"month",isRunOut:n.month_total_quota>-1&&n.month_total_used_quota>=n.month_total_quota,used_quota:n.month_total_used_quota,total_quota:n.month_total_quota},i={runOutLimitType:"total",runOutCycleType:"week",isRunOut:n.week_total_quota>-1&&n.week_total_used_quota>=n.week_total_quota,used_quota:n.week_total_used_quota,total_quota:n.week_total_quota},r={runOutLimitType:"total",runOutCycleType:"day",isRunOut:n.day_total_quota>-1&&n.day_total_used_quota>=n.day_total_quota,used_quota:n.day_total_used_quota,total_quota:n.day_total_quota},u={runOutLimitType:"uin",isRunOut:n.uin_quota>-1&&n.used_quota>=n.uin_quota,used_quota:n.used_quota,total_quota:n.uin_quota},a={runOutLimitType:"uin",runOutCycleType:"month",isRunOut:n.month_uin_quota>-1&&n.month_used_quota>=n.month_uin_quota,used_quota:n.month_used_quota,total_quota:n.month_uin_quota},c={runOutLimitType:"uin",runOutCycleType:"week",isRunOut:n.week_uin_quota>-1&&n.week_uin_used_quota>=n.week_uin_quota,used_quota:n.week_uin_used_quota,total_quota:n.week_uin_quota},l={runOutLimitType:"uin",runOutCycleType:"day",isRunOut:n.day_uin_quota>-1&&n.day_uin_used_quota>=n.day_uin_quota,used_quota:n.day_uin_used_quota,total_quota:n.day_uin_quota},d=[o,u,e,i,r,l,c,a],s=0;s<d.length;s+=1)if(!0===d[s].isRunOut){t.runOutInfo=d[s];break}for(var p=[o,e,i,r].filter((function(n){return n.total_quota>-1})),f=0;f<p.length;f+=1)if(!1===p[f].isRunOut){t.totalQuotaInfo=p[f];break}t.totalQuotaInfo||(t.totalQuotaInfo=p[0]);for(var _=[l,c,a,u].filter((),v=0;v<_.length;v+=1)if(!1===_[v].isRunOut){t.uinQuotaInfo=_[v];break}return t.uinQuotaInfo||(t.uinQuotaInfo=_[0]),t},p=function(){function n(){(0,a.Z)(this,n),this.mapRuleNameToHandler=this.mapRuleNameToHandler.bind(this)}return(0,c.Z)(n,[{key:"mapDrmRules",value:function(n){var t=this;return new Promise((function(o,e){var i=n.mpInfo,r=n.productList,u=Object.keys(i).map(t.mapRuleNameToHandler).map((function(t){var o=Object.assign({},n,{productList:r,rule:i[t.ruleName]});return t.handler(o)}));u.length||o(r),Promise.all(u).then((function(n){var t=n.reduce((function(n,t){return t.map((function(t,o){return Object.assign(n[o]||{},t)}))}),[]);o(t)})).catch(()}))}},{key:"mapBuyGoodsRule",value:function(n){var t=this,o=n.productList,e=n.rule,i=n.ignoreAllowChannel,r=n.drmInfo;return e?new Promise((function(u,a){var c=o.map((function(n){if(n.matchedRule)return n;var o;if(e.goods.rule_item.forEach((function(e){var r=e.product_id.split(",").find((),u=n.targetChannel,a=i||e.allow_channel.indexOf(u)>-1||"*"===e.allow_channel;t.isRuleItemTakeEffect(e)&&a&&r&&(o=e)})),o){var r=/FIXED:(\d+)/.exec(o.discount),u=Number(o.discount),a=n.price;return r?a="".concat(parseInt(r[0].replace("FIXED:",""),10)):u&&(a="".concat(Math.floor(parseInt(n.price,10)*u/100))),Object.assign(n,{matchedRule:o,show_price:n.noShowPrice?void 0:n.price,original_price:n.price,price:a})}return n}));t.requestDrmLimit(Object.assign({},n,{drmInfo:r,productList:c,buyType:"buygoods"})).then((function(n){return u(n)})).catch(()})):Promise.resolve(o)}},{key:"emptyRuleHandler",value:,{key:"mapRuleNameToHandler",value:function(n){switch(n){case"buy_goods":case"buygoods":return{ruleName:n,handler:this.mapBuyGoodsRule.bind(this)};default:return{ruleName:n,handler:this.emptyRuleHandler.bind(this)}}}},{key:"requestDrmLimit",value:function(n){var t,o=this,e=n.productList,i=n.buyType,r=e.length?e.filter(():[];if(!r.length)return Promise.resolve(e);var u=(0,d.AJ)(),a="fakeid_".concat(Math.random().toString().replace(".","")),c=Object.assign({},(0,d.Ak)(),{openid:u.openid||a,pf:u.pf,drmInfo:Object.keys(u.drm_info).reduce((function(n,t,o){return 0===o?"".concat(n).concat(t,"=").concat(u.drm_info[t]):"".concat(n,"&").concat(t,"=").concat(u.drm_info[t])}),""),characName:u.charac_name,groupId:null===(t=u.drm_info)||void 0===t?void 0:t.group_id,productList:r.reduce((function(n,t){return n.indexOf(t.productid)<0&&n.push(t.productid),n}),[]).join(","),buyType:i,pathname:window.location.pathname});return new Promise((function(n){(0,l.yk)(c).then((function(t){try{return t.info.limit_info.resop_mpinfo.detail.forEach((function(n){for(var t=0;t<e.length;t+=1){var i,r=e[t].productid===n.product_id,u=o.getQuotaInfo(n);if(r)e[t].quotaInfo=u,null!==(i=u.runOutInfo)&&void 0!==i&&i.isRunOut&&e[t].original_price&&(e[t].price=e[t].original_price||"",e[t].show_price=void 0)}})),n(e)}catch(i){return console.log(i),n(e)}})).catch(()}))}},{key:"isRuleItemTakeEffect",value:function(n){var t=n.begin_time.replace(/-/g,"/"),o=n.end_time.replace(/-/g,"/"),e=new Date(t).getTime()||0,i=new Date(o).getTime()||0;return Date.now()>e&&Date.now()<i}},{key:"getQuotaInfo",value:]),n}(),f=o(6884);function _(n){if(window.SERVER_DATA.mpInfo&&Object.keys(window.SERVER_DATA.mpInfo)){var t,o=new p,e=(null===(t=window.SERVER_DATA.gameConfig)||void 0===t?void 0:t.propsBatchQueryThreshold)||12;if(Array.isArray(n)&&n.length>e){var i=(0,u.chunk)(n,e);Array.isArray(i)&&i.forEach(()}else v(o,n)}}function v(n,t){n.mapDrmRules({mpInfo:window.SERVER_DATA.mpInfo,productList:t}).then((function(n){for(var o=0;o<t.length;o+=1)b(o,(0,i.Z)((0,i.Z)({},t[o]),n[o]),t)}))}function m(n){var t;return(null===n||void 0===n||null===(t=n.quotaInfo)||void 0===t||!t.runOutInfo)&&(!(null!==n&&void 0!==n&&n.unavailable)&&!(null!==n&&void 0!==n&&n.passIsBuy))}function y(n){var t=n.limit&&!n.unavailable&&!n.passIsBuy,o=n.quotaInfo&&"undefined"===typeof n.quotaInfo.runOutInfo&&n.quotaInfo.uinQuotaInfo;return(t||o)&&!n.isShelfProduct}function h(n){var t=!1;try{var o,e;t=!(null===n||void 0===n||null===(o=n.quotaInfo)||void 0===o||null===(e=o.runOutInfo)||void 0===e||!e.isRunOut)}catch(i){t=!1}return t||!!n.passIsBuy}function g(n){var t;try{var o,e=(null===(o=n.quotaInfo)||void 0===o?void 0:o.uinQuotaInfo)||{},i=e.total_quota,r=void 0===i?0:i,u=e.used_quota,a=void 0===u?0:u;t=a&&r?"".concat(a,"/").concat(r):"0/1"}catch(c){}return t}function I(n){var t=window.SERVER_DATA.lanRes,o=void 0===t?{}:t,e=o.limitLabel;try{var i,r=null===n||void 0===n||null===(i=n.quotaInfo)||void 0===i?void 0:i.uinQuotaInfo,u=null!==r&&void 0!==r&&r.isRunOut?0:((null===r||void 0===r?void 0:r.total_quota)||0)-((null===r||void 0===r?void 0:r.used_quota)||0);e=e.replace("${drmActivityQuotaLeft}",u);var a=o[(null===r||void 0===r?void 0:r.runOutCycleType)||""]||"";e=e.replace("${cycleType}",a)}catch(d){var c,l;e=null===(c=e)||void 0===c||null===(l=c.replace("${drmActivityQuotaLeft}",1))||void 0===l?void 0:l.replace("${cycleType}","")}return e}function w(n){var t=window.SERVER_DATA.lanRes,o=void 0===t?{}:t,e=o.ownedText;try{var i,r,u="undefined"===typeof(null===n||void 0===n||null===(i=n.quotaInfo)||void 0===i||null===(r=i.runOutInfo)||void 0===r?void 0:r.runOutCycleType)?"":n.quotaInfo.runOutInfo.runOutCycleType;e=e.replace("${cycleType}",u)}catch(a){e=o.ownedText||"owned"}return e}function b(n,t,o){return n<0||!t?o:o.map(()}function S(n){var t=window.SERVER_DATA.gameConfig,o=t.rpCouponConfig,e=t.seasonCardPid,r=window.SERVER_DATA.lanRes,u=(void 0===r?{}:r).rpCoupon,a=n.productid,c=n.origin_product_id,l=null===o||void 0===o?void 0:o[c||a];return((null===e||void 0===e?void 0:e.indexOf(a))>-1||(0,f.yo)(n))&&l?(0,i.Z)((0,i.Z)({},n),{},{rpCouponText:null===u||void 0===u?void 0:u.replace("{0}",l)}):n}function R(n){var t=new Set;return n.forEach((),t}function C(n){var t=new Set;return n.forEach((function(n,o){var e=n.dynamicProperties,i=(e=void 0===e?{}:e).hero_category;i&&i.forEach(()})),(0,e.Z)(t)}function A(n){return n.filter((function(n){return P(n)&&n.custom_product_type!==r.Nr.TOKEN}))}function T(n){return n.dynamicProperties[r.RA[n.custom_product_type]]}function E(n){var t;if(n.custom_product_type===r.Nr.SKIN)return null===(t=n.dynamicProperties)||void 0===t?void 0:t[r.RA.Hero]}function P(n){var t=n.dynamicProperties.limit_quantity;return"number"===typeof t&&-1!==t}},6884:function(n,t,o){o.d(t,{AM:function(){return i},R7:function(){return u},yo:function(){return r}});var e=function(n,t){return n.find((function(n){var o=n.name,e=n.value;return"is_advanced"===o&&e===(t?"true":"false")}))};function i(n){var t=n||{},o=t.custom_product_type,i=t.product_properties,r=void 0===i?[]:i,a=!!u(!0),c=!!e(r,!1);return"SeasonPass"===o&&a&&c}function r(n){return"SeasonPass"===(n||{}).custom_product_type}function u(){var n,t,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=null===(n=window.SERVER_DATA)||void 0===n||null===(t=n.shelf)||void 0===t?void 0:t.products,r=null;return i&&Array.isArray(i)&&i.length>0&&(r=i.find((function(n){var t=n.custom_product_type,i=n.product_properties;return"SeasonPass"===t&&e(void 0===i?[]:i,o)}))),r}},75353:function(n,t,o){o.d(t,{Z:function(){return a}});var e,i,r=o(4296),u=o(1384);function a(n,t,o,a){e&&document.body.removeChild(e),e=document.createElement("div"),(i=r.createRoot(e)).render((0,u.Z)({msg:n,active:!0,type:o||"default",hasToastBg:null===a||void 0===a||a})),document.body.appendChild(e),setTimeout((function(){var t;t={msg:n,active:!1,type:o||"default"},i.render((0,u.Z)(t))}),t||2500)}},30425:function(n,t,o){o.d(t,{Iw:function(){return c},c9:function(){return l},px:function(){return a},zx:function(){return u}});var e=o(85444),i=o(42627),r=(0,e.Il)(),u=(0,i.cn)(0),a=(0,i.cn)(r),c=(0,i.cn)(!1),l=(0,i.cn)("")},79547:function(n,t,o){o.d(t,{D:function(){return i},K4:function(){return r},Ye:function(){return _},iH:function(){return v},pe:function(){return f}});var e,i,r,u=o(1413),a=o(4942),c=o(42627),l=o(14134),d=o(37136);!function(n){n.initial="orderGenerated",n.pending="orderPaying",n.success="paySuccess",n.notFound="payResultNotFound",n.fail="payFail"}(i||(i={})),r||(r={}));var s=(e={},(0,a.Z)(e,r.notFound,i.notFound),(0,a.Z)(e,r.success,i.success),(0,a.Z)(e,r.fail,i.fail),e),p=(0,c.cn)(i.initial),f=(0,l.j)((function(n){return function(n){var t;return(0,d.C)({id:"payment",initial:i.initial,context:{value:n},states:(t={},(0,a.Z)(t,i.initial,{on:(0,u.Z)((0,a.Z)({},r.order,i.pending),s)}),(0,a.Z)(t,i.pending,{on:(0,u.Z)((0,u.Z)({},s),{},(0,a.Z)({},r.cancel,i.initial))}),(0,a.Z)(t,i.notFound,{}),(0,a.Z)(t,i.success,{}),(0,a.Z)(t,i.fail,{}),t)})}(n(p))})),_=(0,c.cn)(!1),v=(0,c.cn)("")},65122:function(n,t,o){o.d(t,{K:function(){return r},k:function(){return u}});var e=o(48293),i=o(43117);function r(n,t){var o=u(n);if(null===t||o!==t){var i={expires:new Date(Date.now()+31536e6),value:t};(0,e.Z)(n,i)}}function u(n){var t=(new Date).getTime(),o=(0,i.Z)(n)||{},e=o.expires,r=o.value;return!e||!r||new Date(e).getTime()<t?null:r}}}]);