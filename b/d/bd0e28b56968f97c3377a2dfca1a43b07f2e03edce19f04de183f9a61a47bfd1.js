// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.28/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/arcade":function(){define("require exports ../arcade/arcadeCompiler ../arcade/ArcadeModuleResolver ../arcade/arcadeRuntime ../arcade/executionError ../arcade/parser ../arcade/treeAnalysis ../arcade/functions/geomsync ../core/has ../core/maybe".split(" "),function(r,L,A,c,a,d,k,h,n,x,I){function p(H,N){if(!0===N.useAsync||!0===H.isAsync)return C(H,N);if(x("esri-csp-restrictions"))return function(S){return a.executeScript(H,S)};try{return A.compileScript(H,N)}catch(S){if("esri.arcade.arcadeuncompilableerror"===
S.declaredRootClass)return function(U){return a.executeScript(H,U)};throw S;}}function C(H,N){if(null===O)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AsyncNotEnabled,null);if(x("esri-csp-restrictions"))return function(S){return O.executeScript(H,S)};try{return A.compileScript(H,N,!0)}catch(S){if("esri.arcade.arcadeuncompilableerror"===S.declaredRootClass)return function(U){return O.executeScript(H,U)};throw S;}}function z(H){a.extend(H);A.extend(H,"sync");null===O?Q.push(H):(A.extend(H,
"async"),O.extend(H))}function e(H,N=[]){return k.parseScript(H,N)}function g(H,N,S=[]){H=k.parseScript(H,S);return B(H,N)}function B(H,N){if(!0===N.useAsync||!0===H.isAsync){if(null===O)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AsyncNotEnabled,null);return O.executeScript(H,N)}return a.executeScript(H,N)}function q(H,N){return h.referencesMember(H,N)}function u(H,N){return h.referencesFunction(H,N)}function f(H,N=!1){void 0===N&&(N=!1);return h.findFieldLiterals(H)}function E(H){return h.findExpectedFieldLiterals(H)}
function m(H,N=[]){void 0===H.usesGeometry&&h.findScriptDependencies(H,N);return!0===H.usesGeometry}function v(){return T?T:T=t()}async function t(){const H=await new Promise((N,S)=>r(["../geometry/geometryEngine"],N,S));D=!0;n.setGeometryEngine(H);return!0}function M(){return null!==ka?ka:ka=b()}async function b(){await A.enableAsyncSupport();O=await new Promise((H,N)=>r(["../arcade/arcadeAsyncRuntime"],H,N));for(const H of Q)O.extend(H),A.extend(H,"async");Q=null;return!0}function R(){return K}
function Y(){return O?!0:!1}function ca(){return D}function oa(){return pa?pa:pa=na()}async function na(){await M();const [H,N,S,U,fa]=await Promise.all([new Promise((da,aa)=>r(["../arcade/featureSetUtils"],da,aa)),new Promise((da,aa)=>r(["../arcade/functions/featuresetbase"],da,aa)),new Promise((da,aa)=>r(["../arcade/functions/featuresetgeom"],da,aa)),new Promise((da,aa)=>r(["../arcade/functions/featuresetstats"],da,aa)),new Promise((da,aa)=>r(["../arcade/functions/featuresetstring"],da,aa))]);l=
H;O.extend([N,S,U,fa]);A.extend([N,S,U,fa],"async");return K=!0}function ma(H,N=[]){void 0===H.usesFeatureSet&&h.findScriptDependencies(H,N);return!0===H.usesFeatureSet}function ea(H,N=[]){void 0===H.isAsync&&h.findScriptDependencies(H,N);return!0===H.isAsync}async function W(H,N,S=[],U=!1,fa=null){return ia(new Set,H,N,S,U,fa)}async function ia(H,N,S,U=[],fa=!1,da=null){N="string"===typeof N?e(N):N;const aa=[];if(N&&(!1===D&&(m(N)||fa)&&aa.push(v()),!1===Y()&&(!0===N.isAsync||S)&&aa.push(M()),!1===
K)){var ba;if(!(ba=ma(N)))a:{if(U)for(const wa of U)if(q(N,wa)){ba=!0;break a}ba=!1}ba&&aa.push(oa())}aa.length&&await Promise.all(aa);await qa(H,N,da,S,fa);return!0}function ra(H,N=[]){void 0===H.usesModules&&h.findScriptDependencies(H,N);return!0===H.usesModules}async function qa(H,N,S=null,U=!1,fa=!1){var da=h.findModuleImports(N);null===S&&0<da.length&&(S=c.ArcadeModuleResolver.getDefault());N.loadedModules={};for(const aa of da){I.assertIsSome(S);da=S.normalizeModuleUri(aa.source);if(H.has(da.uri))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.CircularModules,null);H.add(da.uri);const ba=await S.fetchModule(da);await ia(H,ba,U,[],fa,S);H.delete(da.uri);ba.isAsync&&(N.isAsync=!0);ba.usesFeatureSet&&(N.usesFeatureSet=!0);ba.usesGeometry&&(N.usesGeometry=!0);N.loadedModules[aa.libname]={uri:da.uri,script:ba}}}function ya(H){if(m(H))return!0;H=h.findFunctionCalls(H);let N=!1;for(let S=0;S<H.length;S++)if(G.has(H[S])){N=!0;break}return N}function F(){return l}const G=new Set("feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "));
let K=!1,D=!1,O=null,Q=[],T=null,ka=null,pa=null,l=null;const y=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:ia,compileScript:p,enableAsyncSupport:M,enableAsyncSupportImpl:b,enableFeatureSetSupport:oa,enableFeatureSetSupportImpl:na,enableGeometrySupport:v,enableGeometrySupportImpl:t,executeScript:B,extend:z,extractExpectedFieldLiterals:E,extractFieldLiterals:f,featureSetUtils:F,isAsyncEnabled:Y,isFeatureSetSupportEnabled:R,isGeometryEnabled:ca,loadDependentModules:qa,
loadScriptDependencies:W,parseAndExecuteScript:g,parseScript:e,referencesFunction:u,referencesMember:q,scriptIsAsync:ea,scriptTouchesGeometry:ya,scriptUsesFeatureSet:ma,scriptUsesGeometryEngine:m,scriptUsesModules:ra},Symbol.toStringTag,{value:"Module"}));L._loadScriptDependenciesImpl=ia;L.arcade=y;L.compileScript=p;L.enableAsyncSupport=M;L.enableAsyncSupportImpl=b;L.enableFeatureSetSupport=oa;L.enableFeatureSetSupportImpl=na;L.enableGeometrySupport=v;L.enableGeometrySupportImpl=t;L.executeScript=
B;L.extend=z;L.extractExpectedFieldLiterals=E;L.extractFieldLiterals=f;L.featureSetUtils=F;L.isAsyncEnabled=Y;L.isFeatureSetSupportEnabled=R;L.isGeometryEnabled=ca;L.loadDependentModules=qa;L.loadScriptDependencies=W;L.parseAndExecuteScript=g;L.parseScript=e;L.referencesFunction=u;L.referencesMember=q;L.scriptIsAsync=ea;L.scriptTouchesGeometry=ya;L.scriptUsesFeatureSet=ma;L.scriptUsesGeometryEngine=m;L.scriptUsesModules=ra})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(r,L,A,c,a,d,k,h,n,x,I,p,C,z,e,g,B,q,u,f){function E(l,y,H){try{return H(l,null,y.arguments)}catch(N){throw N;}}function m(l,y){try{switch(y.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return ca(l,y);case "VariableDeclaration":var H=[];for(var N=0;N<y.declarations.length;N++)H.push(m(l,y.declarations[N]));return H.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return R(l,y);case "FunctionDeclaration":{const ha=
y.id.name.toLowerCase();Y(ha);var S="",U=!1;void 0!==l.globalScope[ha]?S=ha:void 0!==l.globalScope._SymbolsMap[ha]?S=l.globalScope._SymbolsMap[ha]:l.undeclaredGlobalsInFunctions.has(ha)?(S=l.undeclaredGlobalsInFunctions.get(ha).manglename,l.globalScope._SymbolsMap[ha]=S,l.mangleMap[ha]=S,l.undeclaredGlobalsInFunctions.delete(ha),U=!0):(S=ma(l),l.globalScope._SymbolsMap[ha]=S,l.mangleMap[ha]=S);N={isAsync:l.isAsync,console:l.console,exports:l.exports,undeclaredGlobalsInFunctions:l.undeclaredGlobalsInFunctions,
customfunctions:l.customfunctions,moduleFactory:l.moduleFactory,moduleFactoryMap:l.moduleFactoryMap,libraryResolver:l.libraryResolver,lrucache:l.lrucache,interceptor:l.interceptor,services:l.services,symbols:l.symbols,mangleMap:l.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:l.depthCounter,globalScope:l.globalScope};var fa="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(var da=0;da<y.params.length;da++){const Aa=y.params[da].name.toLowerCase();Y(Aa);const Ca=ma(l);N.localScope._SymbolsMap[Aa]=Ca;N.mangleMap[Aa]=Ca;fa+="lscope['"+Ca+"']\x3darguments["+da.toString()+"];\n"}!0===l.isAsync?(fa=fa+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(R(N,y.body)+"\n return lastStatement; "),fa=fa+"});  }, runtimeCtx),"+(y.params.length+")")):fa+=R(N,y.body)+"\n return lastStatement; }, runtimeCtx),"+y.params.length+")";fa+="\n lastStatement \x3d lc.voidOperation; \n";
H=U?"gscope[lang.setAssig('"+S+"', runtimeCtx)]\x3d"+fa:"gscope['"+S+"']\x3d"+fa}return H;case "ImportDeclaration":{const ha=y.specifiers[0].local.name.toLowerCase();Y(ha);const Aa=l.libraryResolver?.loadLibrary(ha),Ca=ma(l);void 0===l.moduleFactory[Aa.uri]&&(l.moduleFactory[Aa.uri]=F(Aa.syntax,{interceptor:l.interceptor,services:l.services,moduleFactory:l.moduleFactory,lrucache:l.lrucache,timeZone:l.timeZone??null,libraryResolver:l.libraryResolver,customfunctions:l.customfunctions,vars:{}},l.isAsync));
l.moduleFactoryMap[Ca]=Aa.uri;y="";y=l.isAsync?"(yield lang.loadModule('"+Ca+"', runtimeCtx) ); ":"lang.loadModule('"+Ca+"', runtimeCtx); ";void 0!==l.globalScope[ha]?S="gscope['"+ha+"']\x3d"+y:void 0!==l.globalScope._SymbolsMap[ha]?S="gscope['"+l.globalScope._SymbolsMap[ha]+"']\x3d"+y:(H="",l.undeclaredGlobalsInFunctions.has(ha)?(H=l.undeclaredGlobalsInFunctions.get(ha).manglename,l.undeclaredGlobalsInFunctions.delete(ha)):H=ma(l),l.globalScope._SymbolsMap[ha]=H,l.mangleMap[ha]=H,S="gscope[lang.setAssig('"+
H+"', runtimeCtx)]\x3d"+y)}return S;case "ExportNamedDeclaration":const Da=m(l,y.declaration);if("FunctionDeclaration"===y.declaration.type)l.exports[y.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===y.declaration.type)for(const ha of y.declaration.declarations)l.exports[ha.id.name.toLowerCase()]="variable";return Da;case "ReturnStatement":var aa=null===y.argument?"return lc.voidOperation":"return "+m(l,y.argument);return aa;case "IfStatement":return b(l,y);case "ExpressionStatement":var ba=
"AssignmentExpression"===y.expression.type?"lastStatement \x3d lc.voidOperation; "+m(l,y.expression)+"; \n ":"lastStatement \x3d "+m(l,y.expression)+"; ";return ba;case "AssignmentExpression":return t(l,y);case "UpdateExpression":return v(l,y);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{H=[];N=0;for(const ha of y.quasis)H.push(ha.value?JSON.stringify(ha.value.cooked):JSON.stringify("")),!1===ha.tail&&(H.push(y.expressions[N]?"lang.castString(lang.aCheck("+
m(l,y.expressions[N])+", 'TemplateLiteral'))":""),N++);U="(["+H.join(",")+"]).join('')"}catch(ha){throw ha;}return U;case "TemplateElement":return JSON.stringify(y.value?y.value.cooked:"");case "ForStatement":H="lastStatement \x3d lc.voidOperation; \n";null!==y.init&&(H+=m(l,y.init)+"; ");const Ga=ea(l),Ea=ea(l);H+="var "+Ga+" \x3d true; \n do { ";null!==y.update&&(H+=" if ("+Ga+"\x3d\x3d\x3dfalse) {\n "+m(l,y.update)+"  \n}\n "+Ga+"\x3dfalse; \n");null!==y.test&&(H+="var "+Ea+" \x3d "+m(l,y.test)+
"; ",H+="if ("+Ea+"\x3d\x3d\x3dfalse) { break; } else if ("+Ea+"!\x3d\x3dtrue) { lang.error('"+d.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");H+=m(l,y.body);null!==y.update&&(H+="\n "+m(l,y.update));return H+("\n"+Ga+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":da=ea(l);const Ba=ea(l),V=ea(l);let ja="var "+da+" \x3d "+m(l,y.right)+";\n";"VariableDeclaration"===y.left.type&&(ja+=m(l,y.left));let ua="VariableDeclaration"===y.left.type?y.left.declarations[0].id.name:
y.left.name;ua=ua.toLowerCase();Y(ua);H="";null!==l.localScope&&(void 0!==l.localScope[ua]?H="lscope['"+ua+"']":void 0!==l.localScope._SymbolsMap[ua]&&(H="lscope['"+l.localScope._SymbolsMap[ua]+"']"));N="";if(""===H)if(void 0!==l.globalScope[ua])H="gscope['"+ua+"']";else if(void 0!==l.globalScope._SymbolsMap[ua])H="gscope['"+l.globalScope._SymbolsMap[ua]+"']";else if(null!==l.localScope)if(l.undeclaredGlobalsInFunctions.has(ua))H="gscope['"+l.undeclaredGlobalsInFunctions.get(ua).manglename+"']",N=
l.undeclaredGlobalsInFunctions.get(ua).manglename;else{const ha={manglename:ma(l),node:y.left};l.undeclaredGlobalsInFunctions.set(ua,ha);H="gscope['"+ha.manglename+"']";N=ha.manglename}N&&(ja+="lang.chkAssig('"+N+"',runtimeCtx); \n");ja=ja+("if ("+da+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(da+") || lc.isString("+da+")) {var ")+(Ba+"\x3d"+da+".length; \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+Ba+"; "+V+"++) {\n");ja+=H+"\x3d"+V+";\n";ja+=m(l,y.body);ja+="\n}\n";
ja+=" lastStatement \x3d lc.voidOperation; \n";ja+=" \n}\n";ja+="else if (lc.isImmutableArray("+da+")) {";ja=ja+("var "+Ba+"\x3d"+da+".length(); \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+Ba+"; "+V+"++) {\n");ja+=H+"\x3d"+V+";\n";ja+=m(l,y.body);ja+="\n}\n";ja+=" lastStatement \x3d lc.voidOperation; \n";ja+=" \n}\n";ja+="else if (( "+da+" instanceof lang.Dictionary) || ( "+da+" instanceof lang.Feature)) {";ja=ja+("var "+Ba+"\x3d"+da+".keys(); \nfor(var ")+(V+"\x3d0; "+V+"\x3c"+Ba+".length; "+V+"++) {\n");
ja+=H+"\x3d"+Ba+"["+V+"];\n";ja+=m(l,y.body);ja+="\n}\n";ja+=" lastStatement \x3d lc.voidOperation; \n";ja+=" \n}\n";l.isAsync&&(ja+="else if (lc.isFeatureSet("+da+")) {",ja=ja+("var "+Ba+"\x3d"+da+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(V+"\x3dlang. graphicToFeature( yield "+Ba+".next(),"+da+", runtimeCtx); "+V+"!\x3dnull; "+V+"\x3dlang. graphicToFeature( yield "+Ba+".next(),"+da+", runtimeCtx)) {\n")+(H+"\x3d"+V+";\n"),ja+=m(l,y.body),ja+="\n}\n",ja+=" lastStatement \x3d lc.voidOperation; \n",
ja+=" \n}\n");return ja+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":H="lastStatement \x3d lc.voidOperation; \n";const Fa=ea(l);return H+=`\n  var ${Fa} = true;\n    do {\n      ${Fa} = ${m(l,y.test)};\n      if (${Fa}==false) {\n        break;\n      }\n      if (${Fa}!==true) {\n        lang.error('${d.ExecutionErrorCodes.BooleanConditionRequired}');\n      }\n      ${m(l,y.body)}\n    }\n    while (${Fa} !== false);\n    lastStatement = lc.voidOperation;\n  `;case "Identifier":return oa(l,
y);case "MemberExpression":try{let ha;!0===y.computed?ha=m(l,y.property):(ha="'"+y.property.name+"'",Y(y.property.name));var wa="lang.member("+m(l,y.object)+","+ha+")"}catch(ha){throw ha;}return wa;case "Literal":return null===y.value||void 0===y.value?"null":JSON.stringify(y.value);case "CallExpression":return na(l,y);case "UnaryExpression":try{var xa="lang.unary("+m(l,y.argument)+",'"+y.operator+"')"}catch(ha){throw ha;}return xa;case "BinaryExpression":try{var sa="lang.binary("+m(l,y.left)+","+
m(l,y.right)+",'"+y.operator+"')"}catch(ha){throw ha;}return sa;case "LogicalExpression":try{if("AssignmentExpression"===y.left.type||"UpdateExpression"===y.left.type)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,y);if("AssignmentExpression"===y.right.type||"UpdateExpression"===y.right.type)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,y);if("\x26\x26"===y.operator||"||"===y.operator)var Ja="(lang.logicalCheck("+m(l,
y.left)+") "+y.operator+" lang.logicalCheck("+m(l,y.right)+"))";else throw new d.ArcadeCompilationError(null,d.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(ha){throw ha;}return Ja;case "ArrayExpression":try{H=[];for(N=0;N<y.elements.length;N++)"Literal"===y.elements[N].type?H.push(m(l,y.elements[N])):H.push("lang.aCheck("+m(l,y.elements[N])+",'ArrayExpression')");fa="["+H.join(",")+"]"}catch(ha){throw ha;}return fa;case "ObjectExpression":H="lang.dictionary([";for(N=0;N<y.properties.length;N++){const ha=
y.properties[N];Y(ha.key.name);const Aa="Identifier"===ha.key.type?"'"+ha.key.name+"'":m(l,ha.key),Ca=m(l,ha.value);0<N&&(H+=",");H+="lang.strCheck("+Aa+",'ObjectExpression'),lang.aCheck("+Ca+", 'ObjectExpression')"}return H+"])";case "Property":throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.NeverReach,y);case "Array":throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.NeverReach,y);default:throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.Unrecognized,y);}}catch(Da){throw Da;
}}function v(l,y){let H=null;var N="";if("MemberExpression"===y.argument.type)return H=m(l,y.argument.object),!0===y.argument.computed?N=m(l,y.argument.property):(N="'"+y.argument.property.name+"'",Y(y.argument.property.name)),"lang.memberupdate("+H+","+N+",'"+y.operator+"',"+y.prefix+")";H=y.argument.name.toLowerCase();Y(H);if(null!==l.localScope){if(void 0!==l.localScope[H])return"lang.update(lscope, '"+H+"','"+y.operator+"',"+y.prefix+")";if(void 0!==l.localScope._SymbolsMap[H])return"lang.update(lscope, '"+
l.localScope._SymbolsMap[H]+"','"+y.operator+"',"+y.prefix+")"}if(void 0!==l.globalScope[H])return"lang.update(gscope, '"+H+"','"+y.operator+"',"+y.prefix+")";if(void 0!==l.globalScope._SymbolsMap[H])return"lang.update(gscope, '"+l.globalScope._SymbolsMap[H]+"','"+y.operator+"',"+y.prefix+")";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(H))return"lang.update(gscope,lang.chkAssig( '"+l.undeclaredGlobalsInFunctions.get(H).manglename+"',runtimeCtx),'"+y.operator+"',"+y.prefix+")";N=
{manglename:ma(l),node:y.argument};l.undeclaredGlobalsInFunctions.set(H,N);return"lang.update(gscope, lang.chkAssig('"+N.manglename+"',runtimeCtx),'"+y.operator+"',"+y.prefix+")"}throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidIdentifier,y);}function t(l,y){const H=m(l,y.right);let N=null;var S="";if("MemberExpression"===y.left.type)return N=m(l,y.left.object),!0===y.left.computed?S=m(l,y.left.property):(S="'"+y.left.property.name+"'",Y(y.left.property.name)),"lang.assignmember("+
N+","+S+",'"+y.operator+"',"+H+")";N=y.left.name.toLowerCase();Y(N);if(null!==l.localScope){if(void 0!==l.localScope[N])return"lscope['"+N+"']\x3dlang.assign("+H+",'"+y.operator+"', lscope['"+N+"'])";if(void 0!==l.localScope._SymbolsMap[N])return"lscope['"+l.localScope._SymbolsMap[N]+"']\x3dlang.assign("+H+",'"+y.operator+"', lscope['"+l.localScope._SymbolsMap[N]+"'])"}if(void 0!==l.globalScope[N])return"gscope['"+N+"']\x3dlang.assign("+H+",'"+y.operator+"', gscope['"+N+"'])";if(void 0!==l.globalScope._SymbolsMap[N])return"gscope['"+
l.globalScope._SymbolsMap[N]+"']\x3dlang.assign("+H+",'"+y.operator+"', gscope['"+l.globalScope._SymbolsMap[N]+"'])";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(N))return"gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(N).manglename+"',runtimeCtx)]\x3dlang.assign("+H+",'"+y.operator+"', gscope['"+l.undeclaredGlobalsInFunctions.get(N).manglename+"'])";S={manglename:ma(l),node:y.argument};l.undeclaredGlobalsInFunctions.set(N,S);return"gscope[lang.chkAssig('"+S.manglename+
"',runtimeCtx)]\x3dlang.assign("+H+",'"+y.operator+"', gscope['"+S.manglename+"'])"}throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidIdentifier,y);}function M(l,y){return"BlockStatement"===y.type?m(l,y):"ReturnStatement"===y.type||"BreakStatement"===y.type||"ContinueStatement"===y.type?m(l,y)+"; ":"UpdateExpression"===y.type?"lastStatement \x3d "+m(l,y)+"; ":"ExpressionStatement"===y.type?m(l,y):"ObjectExpression"===y.type?"lastStatement \x3d "+m(l,y)+"; ":m(l,y)+"; "}function b(l,
y){if("AssignmentExpression"===y.test.type||"UpdateExpression"===y.test.type)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.BooleanConditionRequired,y);return`if (lang.mustBoolean(${m(l,y.test)}, runtimeCtx) === true) {\n    ${M(l,y.consequent)}\n  } `+(null!==y.alternate?"IfStatement"===y.alternate.type?" else "+b(l,y.alternate):` else {\n      ${M(l,y.alternate)}\n    }\n`:" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function R(l,y){let H="";for(let N=0;N<y.body.length;N++)"EmptyStatement"!==
y.body[N].type&&(H="ReturnStatement"===y.body[N].type?H+(m(l,y.body[N])+"; \n"):"BreakStatement"===y.body[N].type?H+(m(l,y.body[N])+"; \n"):"ContinueStatement"===y.body[N].type?H+(m(l,y.body[N])+"; \n"):"UpdateExpression"===y.body[N].type?H+("lastStatement \x3d "+m(l,y.body[N])+"; \n"):"ObjectExpression"===y.body[N].type?H+("lastStatement \x3d "+m(l,y.body[N])+"; \n"):H+(m(l,y.body[N])+" \n"));return H}function Y(l){if("iif"===l)throw new d.ArcadeUncompilableError;if("decode"===l)throw new d.ArcadeUncompilableError;
if("when"===l)throw new d.ArcadeUncompilableError;}function ca(l,y){let H=null===y.init?null:m(l,y.init);H===n.voidOperation&&(H=null);y=y.id.name.toLowerCase();Y(y);if(null!==l.localScope){if(void 0!==l.localScope[y])return"lscope['"+y+"']\x3d"+H+"; ";if(void 0!==l.localScope._SymbolsMap[y])return"lscope['"+l.localScope._SymbolsMap[y]+"']\x3d"+H+"; ";var N=ma(l);l.localScope._SymbolsMap[y]=N;l.mangleMap[y]=N;return"lscope['"+N+"']\x3d"+H+"; "}if(void 0!==l.globalScope[y])return"gscope['"+y+"']\x3d"+
H+"; ";if(void 0!==l.globalScope._SymbolsMap[y])return"gscope['"+l.globalScope._SymbolsMap[y]+"']\x3d"+H+"; ";if(l.undeclaredGlobalsInFunctions.has(y))return N=l.undeclaredGlobalsInFunctions.get(y).manglename,l.globalScope._SymbolsMap[y]=N,l.mangleMap[y]=N,l.undeclaredGlobalsInFunctions.delete(y),"gscope[lang.setAssig('"+N+"', runtimeCtx)]\x3d"+H+"; ";N=ma(l);l.globalScope._SymbolsMap[y]=N;l.mangleMap[y]=N;return"gscope['"+N+"']\x3d"+H+"; "}function oa(l,y){try{const H=y.name.toLowerCase();Y(H);if(null!==
l.localScope){if(void 0!==l.localScope[H])return"lscope['"+H+"']";if(void 0!==l.localScope._SymbolsMap[H])return"lscope['"+l.localScope._SymbolsMap[H]+"']"}if(void 0!==l.globalScope[H])return"gscope['"+H+"']";if(void 0!==l.globalScope._SymbolsMap[H])return"gscope['"+l.globalScope._SymbolsMap[H]+"']";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(H))return"gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(H).manglename+"',runtimeCtx)]";const N={manglename:ma(l),node:y.argument};
l.undeclaredGlobalsInFunctions.set(H,N);return"gscope[lang.chkAssig('"+N.manglename+"',runtimeCtx)]"}throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.InvalidIdentifier,y);}catch(H){throw H;}}function na(l,y){try{if("MemberExpression"===y.callee.type){if(!0===y.callee.computed)var H=m(l,y.callee.property);else H="'"+y.callee.property.name+"'",Y(y.callee.property.name);var N="[";for(var S=0;S<y.arguments.length;S++)0<S&&(N+=", "),N+=m(l,y.arguments[S]);N+="]";return l.isAsync?"(yield lang.callModuleFunction("+
m(l,y.callee.object)+","+N+","+H+",runtimeCtx))":"lang.callModuleFunction("+m(l,y.callee.object)+","+N+","+H+",runtimeCtx)"}if("Identifier"!==y.callee.type)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.FunctionNotFound,y);const aa=y.callee.name.toLowerCase();if("iif"===aa){try{if(3!==y.arguments.length)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.WrongNumberOfParameters,y);const ba=ea(l);var U=`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        var ${ba} = ${m(l,y.arguments[0])};\n\n        if (${ba} === true) {\n          return  ${m(l,y.arguments[1])};\n        }\n        else if (${ba} === false) {\n          return ${m(l,y.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${l.isAsync?"})}()))":"}()"}`}catch(ba){throw ba;}return U}if("when"===aa){try{if(3>y.arguments.length)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.WrongNumberOfParameters,
y);if(0===y.arguments.length%2)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.WrongNumberOfParameters,y);const ba=ea(l);S="var ";for(var fa=0;fa<y.arguments.length-1;fa+=2)S+=`${ba} = lang.mustBoolean(${m(l,y.arguments[fa])}, runtimeCtx);\n      if (${ba} === true ) {\n        return ${m(l,y.arguments[fa+1])}\n      }\n`;N=`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${S}\n        return ${m(l,y.arguments[y.arguments.length-
1])}\n        ${l.isAsync?"})}()))":"}()"}`}catch(ba){throw ba;}return N}if("decode"===aa){try{if(2>y.arguments.length)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.WrongNumberOfParameters,y);if(2===y.arguments.length)S=`(${m(l,y.arguments[1])})`;else{if(0===(y.arguments.length-1)%2)throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.WrongNumberOfParameters,y);fa=ea(l);var da=ea(l);N="var ";for(H=1;H<y.arguments.length-1;H+=2)N+=`${da} = ${m(l,y.arguments[H])};\n      if (lang.binary(${da}, ${fa}, "==") === true ) {\n        return ${m(l,
y.arguments[H+1])}\n      }\n`;S=`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${fa} = ${m(l,y.arguments[0])};\n        ${N}\n        return ${m(l,y.arguments[y.arguments.length-1])}\n        ${l.isAsync?"})}()))":"}()"}`}}catch(ba){throw ba;}return S}N="";null!==l.localScope&&(void 0!==l.localScope[aa]?N="lscope['"+aa+"']":void 0!==l.localScope._SymbolsMap[aa]&&(N="lscope['"+l.localScope._SymbolsMap[aa]+"']"));if(""===
N)if(void 0!==l.globalScope[aa])N="gscope['"+aa+"']";else if(void 0!==l.globalScope._SymbolsMap[aa])N="gscope['"+l.globalScope._SymbolsMap[aa]+"']";else if(null!==l.localScope)if(l.undeclaredGlobalsInFunctions.has(aa))N="gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(aa).manglename+"',runtimeCtx)]";else{const ba={manglename:ma(l),node:y.argument};l.undeclaredGlobalsInFunctions.set(aa,ba);N="gscope[lang.chkAssig('"+ba.manglename+"',runtimeCtx)]"}if(""!==N){S="[";for(fa=0;fa<y.arguments.length;fa++)0<
fa&&(S+=", "),S+=m(l,y.arguments[fa]);S+="]";return l.isAsync?"(yield lang.callfunc("+N+","+S+",runtimeCtx) )":"lang.callfunc("+N+","+S+",runtimeCtx)"}throw new d.ArcadeCompilationError(l,d.ExecutionErrorCodes.FunctionNotFound,y);}catch(aa){throw aa;}}function ma(l){l.symbols.symbolCounter++;return"_T"+l.symbols.symbolCounter.toString()}function ea(l){l.symbols.symbolCounter++;return"_Tvar"+l.symbols.symbolCounter.toString()}function W(l,y,H){const N={};l||(l={});H||(H={});N._SymbolsMap={};N.textformatting=
1;N.infinity=1;N.pi=1;for(const S in y)N[S]=1;for(const S in H)N[S]=1;for(const S in l)N[S]=1;return N}function ia(l,y,H,N){H=H?new Q:new O;l||(l={});y||(y={});const S=new a({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});S.immutable=!1;H._SymbolsMap={textformatting:1,infinity:1,pi:1};H.textformatting=S;H.infinity=Number.POSITIVE_INFINITY;H.pi=Math.PI;for(const U in y)H[U]=y[U],H._SymbolsMap[U]=1;for(const U in l)H._SymbolsMap[U]=1,H[U]=l[U]&&"esri.Graphic"===
l[U].declaredClass?k.createFromGraphic(l[U],N??null):l[U];return H}function ra(l,y){const H={mode:y,compiled:!0,functions:{},signatures:[],standardFunction:E,standardFunctionAsync:E,evaluateIdentifier:qa};for(let N=0;N<l.length;N++)l[N].registerFunctions(H);if("sync"===y){for(const N in H.functions)K[N]=new h.NativeFunction(H.functions[N]),O.prototype[N]=K[N];for(l=0;l<H.signatures.length;l++)x.addFunctionDeclaration(H.signatures[l],"sync")}else{for(const N in H.functions)D[N]=new h.NativeFunction(H.functions[N]),
Q.prototype[N]=D[N];for(l=0;l<H.signatures.length;l++)x.addFunctionDeclaration(H.signatures[l],"async")}}function qa(l,y){y=y.name;if("_SymbolsMap"===y)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.InvalidIdentifier,null);if(0<l.localStack.length){if("_t"!==y.substr(0,2).toLowerCase()&&void 0!==l.localStack[l.localStack.length-1][y])return l.localStack[l.localStack.length-1][y];const H=l.mangleMap[y];if(void 0!==H&&void 0!==l.localStack[l.localStack.length-1][H])return l.localStack[l.localStack.length-
1][H]}if("_t"!==y.substr(0,2).toLowerCase()&&void 0!==l.globalScope[y]||1===l.globalScope._SymbolsMap[y])return l.globalScope[y];y=l.mangleMap[y];if(void 0!==y)return l.globalScope[y]}function ya(l){console.log(l)}function F(l,y,H=!1){y={isAsync:H,moduleFactory:y.moduleFactory,moduleFactoryMap:{},libraryResolver:new c.ArcadeModuleLoader(null,l.loadedModules),globalScope:W(y.vars,H?D:K,y.customfunctions),customfunctions:y.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,
depthCounter:{depth:1},exports:{},console:ya,lrucache:y.lrucache,timeZone:y.timeZone??null,interceptor:y.interceptor,services:y.services,symbols:{symbolCounter:0}};l=m(y,l);""===l&&(l="lc.voidOperation; ");const N=y.moduleFactory,S=y.moduleFactoryMap,U=y.exports,fa={};for(var da in U)fa[da]=void 0!==y.mangleMap[da]?y.mangleMap[da]:da;da={lc:n.lc,lang:ka,mangles:y.mangleMap,prepareModule(aa){return new pa(aa)},prepare(aa,ba){let wa=aa.spatialReference;if(null===wa||void 0===wa)wa=new f({wkid:102100});
const xa=ia(aa.vars,aa.customfunctions,ba,aa.timeZone);return{localStack:[],isAsync:ba,exports:U,exportmangle:fa,gdefs:{},moduleFactory:N,moduleFactoryMap:S,moduleSingletons:aa.moduleSingletons,mangleMap:this.mangles,spatialReference:wa,globalScope:xa,abortSignal:void 0===aa.abortSignal||null===aa.abortSignal?{aborted:!1}:aa.abortSignal,localScope:null,services:aa.services,console:aa.console??ya,lrucache:aa.lrucache,timeZone:aa.timeZone??null,interceptor:aa.interceptor,symbols:{symbolCounter:0},depthCounter:aa.depthCounter}}};
return(new Function("context","spatialReference",H?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+l+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
l+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(da)}class G extends h.ArcadeFunction{constructor(l,y){super();this.paramCount=y;this.fn=l}createFunction(l){return(...y)=>{if(y.length!==this.paramCount)throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.WrongNumberOfParameters,null);return this.fn(...y)}}call(l,y){return this.fn(...y.arguments)}marshalledCall(l,y,H,N){return N(l,y,(S,U,fa)=>{fa=fa.map(da=>!n.isFunctionParameter(da)||da instanceof
h.ScopeMarshalledFunction?da:h.wrapModuleScopedResponse(da,l,N));S=this.call(H,{arguments:fa});return q.isPromiseLike(S)?S.then(da=>h.wrapModuleScopedResponse(da,H,N)):S})}}const K={};p.registerFunctions(K,E);B.registerFunctions(K,E);e.registerFunctions(K,E);C.registerFunctions(K,E);g.registerFunctions(K,E);K.iif=function(l,y){try{return E(l,y,(H,N,S)=>{throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.Unrecognized,y);})}catch(H){throw H;}};K.decode=function(l,y){try{return E(l,y,(H,N,S)=>
{throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.Unrecognized,y);})}catch(H){throw H;}};K.when=function(l,y){try{return E(l,y,(H,N,S)=>{throw new d.ArcadeExecutionError(l,d.ExecutionErrorCodes.Unrecognized,y);})}catch(H){throw H;}};const D={};for(const l in K)D[l]=new h.NativeFunction(K[l]);z.registerFunctions(K,E);for(const l in K)K[l]=new h.NativeFunction(K[l]);const O=function(){};O.prototype=K;const Q=function(){};Q.prototype=D;p={fixSpatialReference:n.fixSpatialReference,parseArguments:function(l,
y){const H=[];for(let N=0;N<y.arguments.length;N++)H.push(m(l,y.arguments[N]));return H},standardFunction:E};ra([I.ArrayFunctions],"sync");ra([I.ArrayFunctions],"async");let T=0;const ka={error(l){throw new d.ArcadeExecutionError(null,l,null);},__awaiter(l,y,H,N){return new Promise((S,U)=>{function fa(ba){try{aa(N.next(ba))}catch(wa){U(wa)}}function da(ba){try{aa(N["throw"](ba))}catch(wa){U(wa)}}function aa(ba){ba.done?S(ba.value):ba.value?.then?ba.value.then(fa,da):(T++,0===T%100?setTimeout(()=>
{T=0;fa(ba.value)},0):fa(ba.value))}aa((N=N.apply(l,y||[])).next())})},functionDepthchecker(l,y){return function(){y.depthCounter.depth++;y.localStack.push([]);if(64<y.depthCounter.depth)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.MaximumCallDepth,null);const H=l.apply(this,arguments);if(q.isPromiseLike(H))return H.then(N=>{y.depthCounter.depth--;--y.localStack.length;return N});y.depthCounter.depth--;--y.localStack.length;return H}},chkAssig(l,y){if(void 0===y.gdefs[l])throw new d.ArcadeExecutionError(y,
d.ExecutionErrorCodes.InvalidIdentifier,null);return l},mustBoolean(l,y){if(!0===l||!1===l)return l;throw new d.ArcadeExecutionError(y,d.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig(l,y){y.gdefs[l]=1;return l},castString(l){return n.toString(l)},aCheck(l,y){if(n.isFunctionParameter(l)){if("ArrayExpression"===y)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===y)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInDictionary,
null);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return l===n.voidOperation?null:l},Dictionary:a,Feature:k,UserDefinedCompiledFunction:G,dictionary(l){const y={},H=new Map;for(let N=0;N<l.length;N+=2){if(n.isFunctionParameter(l[N+1]))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===n.isString(l[N]))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyMustBeString,null);let S=l[N].toString();
const U=S.toLowerCase();H.has(U)?S=H.get(U):H.set(U,S);y[S]=l[N+1]===n.voidOperation?null:l[N+1]}l=new a(y);l.immutable=!1;return l},strCheck(l){if(!1===n.isString(l))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyMustBeString,null);return l},unary(l,y){if(n.isBoolean(l)){if("!"===y)return!l;if("-"===y)return-1*n.toNumber(l);if("+"===y)return 1*n.toNumber(l);if("~"===y)return~n.toNumber(l);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===
y)return-1*n.toNumber(l);if("+"===y)return 1*n.toNumber(l);if("~"===y)return~n.toNumber(l);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck(l){if(!1===n.isBoolean(l))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicExpressionOrAnd,null);return l},logical(l,y,H){if(n.isBoolean(l)&&n.isBoolean(y))switch(H){case "||":return l||y;case "\x26\x26":return l&&y}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicExpressionOrAnd,
null);},binary(l,y,H){switch(H){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return n.binaryOperator(n.toNumber(l),n.toNumber(y),H);case "\x3d\x3d":return n.equalityTest(l,y);case "\x3d":return n.equalityTest(l,y);case "!\x3d":return!n.equalityTest(l,y);case "\x3c":return n.greaterThanLessThan(l,y,H);case "\x3e":return n.greaterThanLessThan(l,y,H);case "\x3c\x3d":return n.greaterThanLessThan(l,y,H);case "\x3e\x3d":return n.greaterThanLessThan(l,y,H);case "+":return n.isString(l)||
n.isString(y)?n.toString(l)+n.toString(y):n.toNumber(l)+n.toNumber(y);case "-":return n.toNumber(l)-n.toNumber(y);case "*":return n.toNumber(l)*n.toNumber(y);case "/":return n.toNumber(l)/n.toNumber(y);case "%":return n.toNumber(l)%n.toNumber(y);default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedOperator,null);}},assign(l,y,H){switch(y){case "\x3d":return l===n.voidOperation?null:l;case "/\x3d":return n.toNumber(H)/n.toNumber(l);case "*\x3d":return n.toNumber(H)*n.toNumber(l);
case "-\x3d":return n.toNumber(H)-n.toNumber(l);case "+\x3d":return n.isString(H)||n.isString(l)?n.toString(H)+n.toString(l):n.toNumber(H)+n.toNumber(l);case "%\x3d":return n.toNumber(H)%n.toNumber(l);default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedOperator,null);}},update(l,y,H,N){const S=n.toNumber(l[y]);l[y]="++"===H?S+1:S-1;return!1===N?S:"++"===H?S+1:S-1},graphicToFeature(l,y,H){return null===l?null:k.createFromGraphicLikeObject(l.geometry,l.attributes,y,H.timeZone)},
memberupdate(l,y,H,N){let S;if(n.isArray(l))if(n.isNumber(y)){0>y&&(y=l.length+y);if(0>y||y>=l.length)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);S=n.toNumber(l[y]);l[y]="++"===H?S+1:S-1}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(l instanceof a){if(!1===n.isString(y))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===l.hasField(y))S=n.toNumber(l.field(y)),
l.setField(y,"++"===H?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null,{key:y});}else if(n.isFeature(l)){if(!1===n.isString(y))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===l.hasField(y))S=n.toNumber(l.field(y)),l.setField(y,"++"===H?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);}else{if(n.isImmutableArray(l))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.Immutable,
null);if(l instanceof pa){if(!1===n.isString(y))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===l.hasGlobal(y))S=n.toNumber(l.global(y)),l.setGlobal(y,"++"===H?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===N?S:"++"===H?S+1:S-1},assignmember(l,y,H,N){if(n.isArray(l))if(n.isNumber(y)){0>y&&(y=
l.length+y);if(0>y||y>l.length)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);if(y===l.length&&"\x3d"!==H)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);l[y]=this.assign(N,H,l[y])}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(l instanceof a){if(!1===n.isString(y))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===l.hasField(y))l.setField(y,
this.assign(N,H,l.field(y)));else{if("\x3d"!==H)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);l.setField(y,this.assign(N,H,null))}}else if(n.isFeature(l)){if(!1===n.isString(y))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===l.hasField(y))l.setField(y,this.assign(N,H,l.field(y)));else{if("\x3d"!==H)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);l.setField(y,this.assign(N,H,null))}}else{if(n.isImmutableArray(l))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.Immutable,null);if(l instanceof pa){if(!1===n.isString(y))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(l.hasGlobal(y))l.setGlobal(y,this.assign(N,H,l.global(y)));else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,null);}},member(l,y){if(null===l)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.MemberOfNull,
null);if(l instanceof a||n.isFeature(l)){if(n.isString(y))return l.field(y);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(l instanceof u){if(n.isString(y))return C.geometryMember(l,y,null,null);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isArray(l)){if(n.isNumber(y)&&isFinite(y)&&Math.floor(y)===y){0>y&&(y=l.length+y);if(y>=l.length||0>y)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,
null);return l[y]}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isString(l)){if(n.isNumber(y)&&isFinite(y)&&Math.floor(y)===y){0>y&&(y=l.length+y);if(y>=l.length||0>y)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);return l[y]}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isImmutableArray(l)){if(n.isNumber(y)&&isFinite(y)&&Math.floor(y)===y){0>y&&(y=l.length()+y);if(y>=l.length()||
0>y)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);return l.get(y)}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(l instanceof pa&&n.isString(y))return l.global(y);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc(l,y,H){return l.call(H,{arguments:y,preparsed:!0})},loadModule(l,y){l=y.moduleFactoryMap[l];if(y.moduleSingletons[l])return y.moduleSingletons[l];const H=y.moduleFactory[l]({vars:{},
moduleSingletons:y.moduleSingletons,depthCounter:y.depthCounter,console:y.console,abortSignal:y.abortSignal,isAsync:y.isAsync,services:y.services,lrucache:y.lrucache,timeZone:y.timeZone??null,interceptor:y.interceptor},y.spatialReference);return y.moduleSingletons[l]=H},callModuleFunction(l,y,H,N){if(!(l instanceof pa))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FunctionNotFound,null);l=l.global(H);if(!1===n.isFunctionParameter(l))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CallNonFunction,
null);return l.call(N,{preparsed:!0,arguments:y})}};class pa extends A.ArcadeModule{constructor(l){super(null);this.moduleContext=l}hasGlobal(l){void 0===this.moduleContext.exports[l]&&(l=l.toLowerCase());return void 0!==this.moduleContext.exports[l]?!0:!1}setGlobal(l,y){const H=this.moduleContext.globalScope;l=l.toLowerCase();if(n.isFunctionParameter(y))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AssignModuleFunction,null);H[this.moduleContext.exportmangle[l]]=y}global(l){const y=
this.moduleContext.globalScope;l=l.toLowerCase();const H=y[this.moduleContext.exportmangle[l]];if(void 0===H)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,null);if(n.isFunctionParameter(H)&&!(H instanceof h.ScopeMarshalledFunction)){const N=new h.ScopeMarshalledFunction;N.fn=H;N.parameterEvaluator=E;N.context=this.moduleContext;return y[this.moduleContext.exportmangle[l]]=N}return H}}L.UserDefinedCompiledFunction=G;L.compileScript=function(l,y,H=!1){null===y&&(y={vars:{},
customfunctions:{}});var N=null;l.usesModules&&(N=new c.ArcadeModuleLoader(null,l.loadedModules));N={isAsync:H,globalScope:W(y.vars,H?D:K,y.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:y.customfunctions,libraryResolver:N,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:ya,lrucache:y.lrucache,timeZone:y.timeZone??null,interceptor:y.interceptor,services:y.services,symbols:{symbolCounter:0}};l=m(N,l);""===l&&(l="lc.voidOperation; ");
0<N.undeclaredGlobalsInFunctions.size&&N.undeclaredGlobalsInFunctions.forEach(ba=>{throw new d.ArcadeCompilationError(y,d.ExecutionErrorCodes.InvalidIdentifier,ba.node);});const S=N.moduleFactory,U=N.moduleFactoryMap,fa=N.exports,da={};for(var aa in fa)da[aa]=void 0!==N.mangleMap[aa]?N.mangleMap[aa]:aa;aa={lc:n.lc,lang:ka,mangles:N.mangleMap,postProcess(ba){ba instanceof n.ReturnResult&&(ba=ba.value);ba instanceof n.ImplicitResult&&(ba=ba.value);ba===n.voidOperation&&(ba=null);if(ba===n.breakResult)throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.IllegalResult,null);if(ba===n.continueResult)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.IllegalResult,null);if(n.isFunctionParameter(ba))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.IllegalResult,null);return ba},prepare(ba,wa){let xa=ba.spatialReference;if(null===xa||void 0===xa)xa=f.WebMercator;const sa=ia(ba.vars,ba.customfunctions,wa,ba.timeZone);return{localStack:[],isAsync:wa,moduleFactory:S,moduleFactoryMap:U,mangleMap:this.mangles,moduleSingletons:{},
exports:fa,gdefs:{},exportmangle:da,spatialReference:xa,globalScope:sa,abortSignal:void 0===ba.abortSignal||null===ba.abortSignal?{aborted:!1}:ba.abortSignal,localScope:null,services:ba.services,console:ba.console??ya,lrucache:ba.lrucache,timeZone:ba.timeZone??null,interceptor:ba.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",H?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
l+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+l+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(aa)};L.enableAsyncSupport=async function(){const l=await new Promise((y,H)=>r(["./functions/geomasync"],y,H));ra([l],"async");return!0};
L.executeScript=function(l,y){return l(y)};L.extend=ra;L.functionHelper=p;Object.defineProperty(L,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModule":function(){define(["exports"],function(r){class L{constructor(A){this.source=A}}r.ArcadeModule=L;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleLoader":function(){define(["exports"],function(r){class L{constructor(A,c){this._moduleSingletons=A;this._syntaxModules=c}loadLibrary(A){return null==
this._syntaxModules?null:(A=this._syntaxModules[A.toLowerCase()])?{syntax:A.script,uri:A.uri}:null}}r.ArcadeModuleLoader=L;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Dictionary":function(){define("./ArcadeDate ./deepClone ./executionError ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry".split(" "),function(r,L,A,c,a,d){function k(n,x,I=!1,p=!1){if(null===n||void 0===n)return null;if(a.isNumber(n))return a.toNumber(n);if(a.isBoolean(n))return a.toBoolean(n);
if(a.isString(n))return a.toString(n);if(a.isDate(n))return a.toDate(n,x);if(a.isDateOnly(n)||a.isTime(n))return n;if(a.isArray(n)){var C=[];for(var z of n)C.push(k(z,x,I,p));return C}if(p&&a.isGeometry(n))return n;z=new h;z.immutable=!1;for(C of Object.keys(n)){const e=n[C];void 0!==e&&z.setField(C,k(e,x,I,p))}z.immutable=I;return z}class h{constructor(n){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=n instanceof h?n.attributes:void 0===
n?{}:null===n?{}:n}field(n){const x=n.toLowerCase(),I=this.attributes[n];if(void 0!==I)return I;for(const p in this.attributes)if(p.toLowerCase()===x)return this.attributes[p];throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.FieldNotFound,null,{key:n});}setField(n,x){if(this.immutable)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.Immutable,null);if(a.isFunctionParameter(x))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.NoFunctionInDictionary,null);const I=n.toLowerCase();
x instanceof Date&&(x=r.ArcadeDate.dateJSToArcadeDate(x));if(void 0===this.attributes[n])for(const p in this.attributes)if(p.toLowerCase()===I){this.attributes[p]=x;return}this.attributes[n]=x}hasField(n){const x=n.toLowerCase();if(void 0!==this.attributes[n])return!0;for(const I in this.attributes)if(I.toLowerCase()===x)return!0;return!1}keys(){let n=[];for(const x in this.attributes)n.push(x);return n=n.sort()}castToText(n=!1){let x="";for(const I in this.attributes){""!==x&&(x+=",");const p=this.attributes[I];
null==p?x+=JSON.stringify(I)+":null":a.isBoolean(p)||a.isNumber(p)||a.isString(p)?x+=JSON.stringify(I)+":"+JSON.stringify(p):p instanceof d?x+=JSON.stringify(I)+":"+a.toStringExplicit(p):p instanceof c?x+=JSON.stringify(I)+":"+a.toStringExplicit(p,null,n):p instanceof Array?x+=JSON.stringify(I)+":"+a.toStringExplicit(p,null,n):p instanceof r.ArcadeDate?x=n?x+(JSON.stringify(I)+":"+JSON.stringify(p.getTime())):x+(JSON.stringify(I)+":"+p.stringify()):null!==p&&"object"===typeof p&&void 0!==p.castToText&&
(x+=JSON.stringify(I)+":"+p.castToText(n))}return"{"+x+"}"}static convertObjectToArcadeDictionary(n,x,I=!0,p=!1){const C=new h;C.immutable=!1;for(const z in n){const e=n[z];void 0!==e&&C.setField(z.toString(),k(e,x,I,p))}C.immutable=I;return C}static convertJsonToArcade(n,x,I=!1){return k(n,x,I)}castAsJson(n=null){const x={};for(let I in this.attributes){const p=this.attributes[I];void 0!==p&&(n?.keyTranslate&&(I=n.keyTranslate(I)),x[I]=a.castAsJson(p,n))}return x}async castDictionaryValueAsJsonAsync(n,
x,I,p=null,C){I=await a.castAsJsonAsync(I,p,C);return n[x]=I}async castAsJsonAsync(n=null,x=null){const I={},p=[];for(let C in this.attributes){const z=this.attributes[C];x?.keyTranslate&&(C=x.keyTranslate(C));void 0!==z&&(a.isSimpleType(z)||z instanceof d||z instanceof r.ArcadeDate?I[C]=a.castAsJson(z,x):p.push(this.castDictionaryValueAsJsonAsync(I,C,z,n,x)))}0<p.length&&await Promise.all(p);return I}deepClone(){const n=new h;n.immutable=!1;for(const x of this.keys())n.setField(x,L.deepClone(this.field(x)));
return n}}return h})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(r,L,A,c){function a(x,I,p){return x<I?x-I:x>p?x-p:0}function d(x,I=!0){if(x instanceof c.Zone)return x;if("system"===x.toLowerCase())return"system";if("utc"===x.toLowerCase())return"UTC";if("unknown"===x.toLowerCase())return A.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(x)){const p=c.FixedOffsetZone.parseSpecifier("UTC"+
(x.startsWith("+")||x.startsWith("-")?"":"+")+x);if(p)return p}x=c.IANAZone.create(x);if(!x.isValid){if(I)throw new h(r.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return x}r.ArcadeDateErrorCodes=void 0;(r.ArcadeDateErrorCodes||(r.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const k={[r.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class h extends Error{constructor(x,I){super(L.replace(k[x],I));this.declaredRootClass=
"esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,h)}}class n{constructor(x){this._date=x;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(x=0,I=1,p=1,C=0,z=0,e=0,g=0,B){if(isNaN(x)||isNaN(I)||isNaN(p)||isNaN(C)||isNaN(z)||isNaN(e)||isNaN(g))return null;const q=c.DateTime.local(x,I).daysInMonth;x=c.DateTime.fromObject({day:1>p?1:p>q?q:p,year:x,month:1>I?1:12<I?12:I,hour:0>C?0:23<C?23:C,minute:0>z?0:59<z?59:z,second:0>e?0:59<e?59:e,millisecond:0>
g?0:999<g?999:g},{zone:d(B)});x=x.plus({months:a(I,1,12),days:a(p,1,q),hours:a(C,0,23),minutes:a(z,0,59),seconds:a(e,0,59),milliseconds:a(g,0,999)});return new n(x)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(x,I){I=d(I);return x.isUnknownTimeZone||I===A.UnknownTimeZone.instance?n.fromParts(x.year,x.monthJS+1,x.day,x.hour,x.minute,x.second,x.millisecond,I):new n(x._date.setZone(I))}static dateJSToArcadeDate(x){return new n(c.DateTime.fromJSDate(x,
{zone:"system"}))}static dateJSAndZoneToArcadeDate(x,I="system"){I=d(I);return new n(c.DateTime.fromJSDate(x,{zone:I}))}static unknownEpochToArcadeDate(x){return new n(c.DateTime.fromMillis(x,{zone:A.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(x){return new n(c.DateTime.fromMillis(x.getTime(),{zone:A.UnknownTimeZone.instance}))}static epochToArcadeDate(x,I="system"){I=d(I);return new n(c.DateTime.fromMillis(x,{zone:I}))}static dateTimeToArcadeDate(x){return new n(x)}clone(){return new n(this._date)}changeTimeZone(x){x=
d(x);return n.dateTimeToArcadeDate(this._date.setZone(x))}static dateTimeAndZoneToArcadeDate(x,I){I=d(I);return x.zone===A.UnknownTimeZone.instance||I===A.UnknownTimeZone.instance?n.fromParts(x.year,x.month,x.day,x.hour,x.minute,x.second,x.millisecond,I):new n(x.setZone(I))}static nowToArcadeDate(x){x=d(x);return new n(c.DateTime.fromJSDate(new Date,{zone:x}))}static nowUTCToArcadeDate(){return new n(c.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===n.systemTimeZoneCanonicalName}equals(x){return this.isSystem&&
x.isSystem?this.toNumber()===x.toNumber():this.isUnknownTimeZone!==x.isUnknownTimeZone?!1:this._date.equals(x._date)}get isUnknownTimeZone(){return this._date.zone===A.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let x=this._date.weekday;6<x&&(x=0);return x}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-
1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const x=this.zone;return"fixed"===x.type?0===x.fixed?"UTC":x.formatOffset(0,"short"):x.name}stringify(){return JSON.stringify(this.toJSDate())}plus(x){return new n(this._date.plus(x))}diff(x,I="milliseconds"){return this._date.diff(x._date,
I)[I]}toISODate(){return this._date.toISODate()}toISOString(x){return x?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(x,I){return this._date.toISOTime({suppressMilliseconds:x,includeOffset:I&&!this.isUnknownTimeZone})}toFormat(x,I){this.isUnknownTimeZone&&(x=x.replaceAll("Z",""));return this._date.toFormat(x,I)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new n(this._date.toUTC())}toLocal(){return new n(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(x){if(!x)return null;
x=c.DateTime.fromISO(x,{setZone:!0});return new n(x)}}r.ArcadeDate=n;r.ArcadeDateError=h;r.ArcadeDateErrorMessages=k;r.createDateTimeZone=d;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/deepClone":function(){define(["exports","./ArcadeModule","../chunks/languageUtils"],function(r,L,A){function c(d){if(null===d)return null;if(A.isDate(d))return d.clone();if(A.isSimpleType(d))return d;if(A.isGeometry(d))return d.clone();if(A.isImmutableArray(d))return d.toArray().map(k=>
c(k));if(A.isArray(d))return d.map(k=>c(k));if(A.isFeature(d))return a.createFromArcadeFeature(d);if(A.isFeatureSetCollection(d)||A.isFeatureSet(d))return d;if(A.isDictionary(d)||"esri.arcade.Attachment"===d?.declaredClass)return d.deepClone();if("esri.arcade.Portal"===d?.declaredClass||d instanceof L.ArcadeModule)return d;A.isFunctionParameter(d);return d}let a;r.configureDeepClone=function(d){a=d};r.deepClone=c;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/languageUtils":function(){define("exports ../config ../kernel ../arcade/ArcadeDate ../arcade/ArcadeModule ../arcade/executionError ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../arcade/featureset/support/shared ../core/number ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference ../geometry/support/coordsUtils ../intl/locale ./datetime".split(" "),
function(r,L,A,c,a,d,k,h,n,x,I,p,C,z,e,g,B,q,u,f,E,m,v,t){function M(w,J,P){return""===J||null===J||void 0===J||J===P||J===P?w:w=w.split(J).join(P)}function b(w){return w instanceof k.ArcadeFunction}function R(w){return w instanceof a.ArcadeModule}function Y(w){return na(w)||ea(w)||D(w)||O(w)||Q(w)||ma(w)||null===w||w===za||"number"===typeof w?!0:!1}function ca(w,J){return void 0===w?J:w}function oa(w){return null==w?"":ra(w)||K(w)?"Array":D(w)?"Date":Q(w)?"Time":O(w)?"DateOnly":na(w)?"String":ma(w)?
"Boolean":ea(w)?"Number":"esri.arcade.Attachment"===w?.declaredClass?"Attachment":"esri.arcade.Portal"===w?.declaredClass?"Portal":"esri.arcade.Dictionary"===w?.declaredClass?"Dictionary":w instanceof a.ArcadeModule?"Module":qa(w)?"Feature":w instanceof q?"Point":w instanceof u?"Polygon":w instanceof f?"Polyline":w instanceof B?"Multipoint":w instanceof e?"Extent":b(w)?"Function":ya(w)?"FeatureSet":G(w)?"FeatureSetCollection":w===za?"":"number"===typeof w&&isNaN(w)?"Number":"Unrecognized Type"}function na(w){return"string"===
typeof w||w instanceof String}function ma(w){return"boolean"===typeof w}function ea(w){return"number"===typeof w}function W(w){return"number"===typeof w&&isFinite(w)&&Math.floor(w)===w}function ia(w){return w instanceof g}function ra(w){return w instanceof Array}function qa(w){return"esri.arcade.Feature"===w?.arcadeDeclaredClass?!0:!1}function ya(w){return"esri.arcade.featureset.support.FeatureSet"===w?.declaredRootClass}function F(w){return"esri.arcade.Dictionary"===w?.declaredClass}function G(w){return"esri.arcade.featureSetCollection"===
w?.declaredRootClass}function K(w){return w instanceof h}function D(w){return w instanceof c.ArcadeDate}function O(w){return w instanceof C.DateOnly}function Q(w){return w instanceof z.TimeOnly}function T(w){return null!=w&&"object"===typeof w}function ka(w){return w instanceof Date}function pa(w,J,P,Z,X){if(w.length<J||w.length>P)throw new d.ArcadeExecutionError(Z,d.ExecutionErrorCodes.WrongNumberOfParameters,X);}function l(w){return 0>w?-Math.round(-w):Math.round(w)}function y(){let w=Date.now();
return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,J=>{const P=(w+16*Math.random())%16|0;w=Math.floor(w/16);return("x"===J?P:P&3|8).toString(16)})}function H(w,J){if(!isNaN(w)){if(void 0===J||null===J||""===J)return w.toString();J=M(J,"\u2030","");J=M(J,"\u00a4","");return p.format(w,{pattern:J})}return w.toString()}function N(w,J){return void 0===J||null===J||""===J?w.toISOString(!0):w.toFormat(S(J),{locale:v.getLocale(),numberingSystem:"latn"})}function S(w,J=!1){w=w.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,
"[$\x26]");let P="";const Z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const X of w.match(Z)||[])switch(X){case "D":P+="d";break;case "DD":P+="dd";break;case "DDD":P+="o";break;case "d":P+="c";break;case "ddd":P+="ccc";break;case "dddd":P+="cccc";break;case "M":P+="L";break;case "MM":P+="LL";break;case "MMM":P+="LLL";break;case "MMMM":P+=
"LLLL";break;case "YY":P+="yy";break;case "Y":case "YYYY":P+="yyyy";break;case "Q":P+="q";break;case "Z":P+="Z";break;case "ZZ":P+="ZZ";break;case "ZZZ":P+="ZZZ";break;case "ZZZZ":P=J?P+"[ZZZZ]":P+"ZZZZ";break;case "ZZZZZ":P=J?P+"[ZZZZZ]":P+"ZZZZZ";break;case "S":P+="'S'";break;case "SS":P+="'SS'";break;case "SSS":P+="u";break;case "A":case "a":P+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":P+=X;break;default:P=2<=X.length&&"["===X.slice(0,
1)&&"]"===X.slice(-1)?P+`'${X.slice(1,-1)}'`:P+`'${X}'`}return P}function U(w,J,P){switch(P){case "\x3e":return w>J;case "\x3c":return w<J;case "\x3e\x3d":return w>=J;case "\x3c\x3d":return w<=J}return!1}function fa(w,J,P){if(null===w){if(null===J||J===za)return U(null,null,P);if(ea(J))return U(0,J,P);if(na(J)||ma(J))return U(0,sa(J),P);if(D(J))return U(0,J.toNumber(),P);if(Q(J)||O(J))return U(w,J.toNumber(),P)}if(w===za){if(null===J||J===za)return U(null,null,P);if(ea(J))return U(0,J,P);if(na(J)||
ma(J))return U(0,sa(J),P);if(D(J))return U(0,J.toNumber(),P);if(Q(J)||O(J))return U(w,J.toNumber(),P)}else if(ea(w)){if(ea(J))return U(w,J,P);if(ma(J))return U(w,sa(J),P);if(null===J||J===za)return U(w,0,P);if(na(J))return U(w,sa(J),P);if(D(J)||Q(J)||O(J))return U(w,J.toNumber(),P)}else if(na(w)){if(na(J))return U(aa(w),aa(J),P);if(D(J)||Q(J)||O(J))return U(sa(w),J.toNumber(),P);if(ea(J))return U(sa(w),J,P);if(null===J||J===za)return U(sa(w),0,P);if(ma(J))return U(sa(w),sa(J),P)}else if(D(w)){if(D(J))return w.timeZone!==
J.timeZone&&(w.isUnknownTimeZone?w=c.ArcadeDate.arcadeDateAndZoneToArcadeDate(w,J.timeZone):J.isUnknownTimeZone&&(J=c.ArcadeDate.arcadeDateAndZoneToArcadeDate(J,w.timeZone))),U(w.toNumber(),J.toNumber(),P);if(null===J||J===za)return U(w.toNumber(),0,P);if(ea(J))return U(w.toNumber(),J,P);if(ma(J)||na(J))return U(w.toNumber(),sa(J),P);if(Q(J))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(O(J))return U(w.toNumber(),J.toNumber(),P)}else if(ma(w)){if(ma(J))return U(w,
J,P);if(ea(J))return U(sa(w),sa(J),P);if(D(J)||Q(J)||O(J))return U(sa(w),J.toNumber(),P);if(null===J||J===za)return U(sa(w),0,P);if(na(J))return U(sa(w),sa(J),P)}else if(O(w)){if(D(J))return U(w.toNumber(),J.toNumber(),P);if(null===J||J===za)return U(w.toNumber(),0,P);if(ea(J))return U(w.toNumber(),J,P);if(ma(J)||na(J))return U(w.toNumber(),sa(J),P);if(Q(J))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(O(J))return U(w.toNumber(),J.toNumber(),P)}else if(Q(w)){if(D(J))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(null===J||J===za)return U(w.toNumber(),0,P);if(ea(J))return U(w.toNumber(),J,P);if(ma(J)||na(J))return U(w.toNumber(),sa(J),P);if(Q(J))return U(w.toNumber(),J.toNumber(),P);if(O(J))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CannotCompareDateAndTime,null);}return!da(w,J)||"\x3c\x3d"!==P&&"\x3e\x3d"!==P?!1:!0}function da(w,J){if(w===J||null===w&&J===za||null===J&&w===za)return!0;if(D(w)&&D(J)||Q(w)&&Q(J)||O(w)&&O(J))return w.equals(J);
if(w instanceof n||w instanceof x)return w.equalityTest(J);if(w instanceof q&&J instanceof q){const P=w.cache._arcadeCacheId,Z=J.cache._arcadeCacheId;if(void 0!==P&&null!==P)return P===Z}return T(w)&&T(J)&&(w._arcadeCacheId===J._arcadeCacheId&&void 0!==w._arcadeCacheId&&null!==w._arcadeCacheId||w._underlyingGraphic===J._underlyingGraphic&&void 0!==w._underlyingGraphic&&null!==w._underlyingGraphic)?!0:!1}function aa(w,J){if(na(w))return w;if(null===w)return"";if(ea(w))return H(w,J);if(ma(w))return w.toString();
if(D(w))return N(w,J);if(Q(w)||O(w))return w.toFormat(J);if(w instanceof g)return JSON.stringify(w.toJSON());if(ra(w)){J=[];for(var P=0;P<w.length;P++)J[P]=xa(w[P]);return"["+J.join(",")+"]"}if(w instanceof h){J=[];for(P=0;P<w.length();P++)J[P]=xa(w.get(P));return"["+J.join(",")+"]"}return null!==w&&"object"===typeof w&&void 0!==w.castToText?w.castToText():b(w)?"object, Function":w===za?"":R(w)?"object, Module":""}function ba(w){const J=[];if(!ra(w))return null;if(w instanceof h){for(var P=0;P<w.length();P++)J[P]=
sa(w.get(P));return J}for(P=0;P<w.length;P++)J[P]=sa(w[P]);return J}function wa(w,J,P=!1){if(na(w))return w;if(null===w)return"";if(ea(w))return H(w,J);if(ma(w))return w.toString();if(D(w))return N(w,J);if(Q(w)||O(w))return w.toFormat(J);if(w instanceof g)return w instanceof e?'{"xmin":'+w.xmin.toString()+',"ymin":'+w.ymin.toString()+","+(w.hasZ?'"zmin":'+w.zmin.toString()+",":"")+(w.hasM?'"mmin":'+w.mmin.toString()+",":"")+'"xmax":'+w.xmax.toString()+',"ymax":'+w.ymax.toString()+","+(w.hasZ?'"zmax":'+
w.zmax.toString()+",":"")+(w.hasM?'"mmax":'+w.mmax.toString()+",":"")+'"spatialReference":'+Fa(w.spatialReference)+"}":Fa(w.toJSON(),(X,la)=>X.key===la.key?0:"spatialReference"===X.key?1:"spatialReference"===la.key||X.key<la.key?-1:X.key>la.key?1:0);if(ra(w)){J=[];for(var Z=0;Z<w.length;Z++)J[Z]=xa(w[Z],P);return"["+J.join(",")+"]"}if(w instanceof h){J=[];for(Z=0;Z<w.length();Z++)J[Z]=xa(w.get(Z),P);return"["+J.join(",")+"]"}return null!==w&&"object"===typeof w&&void 0!==w.castToText?w.castToText(P):
b(w)?"object, Function":w===za?"":R(w)?"object, Module":""}function xa(w,J=!1){return null===w?"null":ma(w)||ea(w)||na(w)?JSON.stringify(w):w instanceof g||w instanceof h||w instanceof Array?wa(w,null,J):D(w)?J?JSON.stringify(w.getTime()):JSON.stringify(N(w,"")):Q(w)||O(w)?JSON.stringify(w.toString()):null!==w&&"object"===typeof w&&void 0!==w.castToText?w.castToText(J):"null"}function sa(w,J){return ea(w)?w:null===w||""===w?0:D(w)||O(w)||Q(w)?NaN:ma(w)?w?1:0:ra(w)||""===w||void 0===w?NaN:void 0!==
J&&na(w)?(J=M(J,"\u2030",""),J=M(J,"\u00a4",""),p.parse(w,{pattern:J})):w===za?0:Number(w)}function Ja(w,J){if(D(w))return w;if(na(w)){a:{const Z=/ (\d\d)/;var P=c.createDateTimeZone(J);P=t.DateTime.fromISO(w,{zone:P});if(P.isValid)J=P;else{if(Z.test(w)&&(w=w.replace(Z,"T$1"),P=t.DateTime.fromISO(w,{zone:J}),P.isValid)){J=P;break a}J=null}}if(J)return c.ArcadeDate.dateTimeToArcadeDate(J)}return null}function Da(w){return ma(w)?w:na(w)?(w=w.toLowerCase(),"true"===w?!0:!1):ea(w)?0===w||isNaN(w)?!1:
!0:!1}function Ga(w,J){if(null==w)return null;if(null===w.spatialReference||void 0===w.spatialReference)w.spatialReference=J;return w}function Ea(w){if(null===w)return null;if(w instanceof q)return"NaN"===w.x||null===w.x||isNaN(w.x)?null:w;if(w instanceof u){if(0===w.rings.length)return null;for(const J of w.rings)if(0<J.length)return w;return null}if(w instanceof f){if(0===w.paths.length)return null;for(const J of w.paths)if(0<J.length)return w;return null}return w instanceof B?0===w.points.length?
null:w:w instanceof e?"NaN"===w.xmin||null===w.xmin||isNaN(w.xmin)?null:w:null}function Ba(w,J){if(!w||!w.domain)return J;let P=null,Z=null;if("string"===w.field.type||"esriFieldTypeString"===w.field.type)P=aa(J);else{if(null===J||void 0===J)return null;if(""===J)return J;P=sa(J)}for(let X=0;X<w.domain.codedValues.length;X++){const la=w.domain.codedValues[X];la.code===P&&(Z=la)}return null===Z?aa(J):Z.name}function V(w,J){if(!w||!w.domain)return J;let P=null;const Z=aa(J);for(let X=0;X<w.domain.codedValues.length;X++){const la=
w.domain.codedValues[X];la.name===Z&&(P=la)}return null===P?J:P.code}function ja(w,J,P=null,Z=null){if(!J||!J.fields)return null;let X=null;for(var la=0;la<J.fields.length;la++){const va=J.fields[la];va.name.toLowerCase()===w.toString().toLowerCase()&&(X=va)}if(null===X)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null,{key:w});let ta,Ha;if(null===Z&&P&&J.typeIdField)Z=P.hasField(J.typeIdField)?P.field(J.typeIdField):null;else if(J.typeIdField&&null!==Z){la=!1;for(const va of J.types||
[])if(Z===va.id){la=!0;break}if(!la)for(const va of J.types||[])if(Z===va.name){Z=va.id;la=!0;break}la||(Z=null,P&&J.typeIdField&&(Z=P.hasField(J.typeIdField)?P.field(J.typeIdField):null))}null!==Z&&void 0!==Z&&J.types.some(va=>va.id===Z?((ta=va.domains?.[X.name])&&"inherited"===ta.type&&(ta=ua(X.name,J),Ha=!0),!0):!1);Ha||ta||(ta=ua(w,J));return{field:X,domain:ta}}function ua(w,J){let P;J.fields.some(Z=>{Z.name.toLowerCase()===w.toLowerCase()&&(P=Z.domain);return!!P});return P}function Fa(w,J){J||
(J={});"function"===typeof J&&(J={cmp:J});const P="boolean"===typeof J.cycles?J.cycles:!1,Z=J.cmp&&function(la){return function(ta){return function(Ha,va){return la({key:Ha,value:ta[Ha]},{key:va,value:ta[va]})}}}(J.cmp),X=[];return function Ha(ta){ta?.toJSON&&"function"===typeof ta.toJSON&&(ta=ta.toJSON());if(void 0!==ta){if("number"===typeof ta)return isFinite(ta)?""+ta:"null";if("object"!==typeof ta)return JSON.stringify(ta);var va;if(Array.isArray(ta)){var Ia="[";for(va=0;va<ta.length;va++)va&&
(Ia+=","),Ia+=Ha(ta[va])||"null";return Ia+"]"}if(null===ta)return"null";if(X.includes(ta)){if(P)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var kb=X.push(ta)-1,Ra=Object.keys(ta).sort(Z?.(ta));Ia="";for(va=0;va<Ra.length;va++){const Sa=Ra[va],Ta=Ha(ta[Sa]);Ta&&(Ia&&(Ia+=","),Ia+=JSON.stringify(Sa)+":"+Ta)}X.splice(kb,1);return"{"+Ia+"}"}}(w)}function ha(w){if(null===w)return null;const J=[];for(const P of w)P?.arcadeDeclaredClass&&"esri.arcade.Feature"===
P.arcadeDeclaredClass?J.push(P.geometry()):J.push(P);return J}function Aa(w,J){if(J instanceof q)w.push(J.hasZ?J.hasM?[J.x,J.y,J.z,J.m]:[J.x,J.y,J.z]:[J.x,J.y]);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);}function Ca(w,J){if(ra(w)||K(w)){let P=!1,Z=!1,X=[];if(ra(w)){for(const la of w)Aa(X,la);0<X.length&&(J=w[0].spatialReference,P=w[0].hasZ,Z=w[0].hasM)}else if(w instanceof x)X=w._elements,0<X.length&&(P=w._hasZ,Z=w._hasM,J=w.get(0).spatialReference);else if(K(w)){for(const la of w.toArray())Aa(X,
la);0<X.length&&(J=w.get(0).spatialReference,P=!0===w.get(0).hasZ,Z=!0===w.get(0).hasM)}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);if(0===X.length)return null;m.isClockwise(X)||(X=X.slice(0).reverse());return new u({rings:[X],spatialReference:J,hasZ:P,hasM:Z})}return w}function Ua(w,J){if(ra(w)||K(w)){let P=!1,Z=!1,X=[];if(ra(w)){for(const la of w)Aa(X,la);0<X.length&&(J=w[0].spatialReference,P=!0===w[0].hasZ,Z=!0===w[0].hasM)}else if(w instanceof x)X=
w._elements,0<X.length&&(P=w._hasZ,Z=w._hasM,J=w.get(0).spatialReference);else if(K(w)){for(const la of w.toArray())Aa(X,la);0<X.length&&(J=w.get(0).spatialReference,P=!0===w.get(0).hasZ,Z=!0===w.get(0).hasM)}return 0===X.length?null:new f({paths:[X],spatialReference:J,hasZ:P,hasM:Z})}return w}function Va(w,J){if(ra(w)||K(w)){let P=!1,Z=!1,X=[];if(ra(w)){for(const la of w)Aa(X,la);0<X.length&&(J=w[0].spatialReference,P=!0===w[0].hasZ,Z=!0===w[0].hasM)}else if(w instanceof x)X=w._elements,0<X.length&&
(P=w._hasZ,Z=w._hasM,J=w.get(0).spatialReference);else if(K(w)){for(const la of w.toArray())Aa(X,la);0<X.length&&(J=w.get(0).spatialReference,P=!0===w.get(0).hasZ,Z=!0===w.get(0).hasM)}return 0===X.length?null:new B({points:X,spatialReference:J,hasZ:P,hasM:Z})}return w}function Wa(w,J=!1){const P=[];if(null===w)return P;if(!0===ra(w)){for(var Z=0;Z<w.length;Z++){var X=aa(w[Z]);""===X&&!0!==J||P.push(X)}return P}if(w instanceof h){for(Z=0;Z<w.length();Z++)X=aa(w.get(Z)),""===X&&!0!==J||P.push(X);return P}return Y(w)?
(w=aa(w),""===w&&!0!==J||P.push(w),P):[]}function Xa(w){Ma++;return 0===Ma%100?(Ma=0,new Promise(J=>{setTimeout(()=>{J(w)},0)})):w}function Ya(w,J,P){switch(P){case "\x26":return w&J;case "|":return w|J;case "^":return w^J;case "\x3c\x3c":return w<<J;case "\x3e\x3e":return w>>J;case "\x3e\x3e\x3e":return w>>>J}}function Ka(w,J=null){if(null!=w){if(ma(w)||ea(w)||na(w))return w;if(w instanceof g)return!0===J?.keepGeometryType?w:w.toJSON();if(w instanceof h)return w.toArray().map(P=>Ka(P,J));if(w instanceof
Array)return w.map(P=>Ka(P,J));if(ka(w))return w;if(D(w))return w.toJSDate();if(Q(w))return w.toString();if(O(w))return w.toJSDate();if(null!==w&&"object"===typeof w&&void 0!==w.castAsJson)return w.castAsJson(J)}return null}async function lb(w,J,P,Z,X){w=await Na(w,J,P);X[Z]=w}async function Na(w,J=null,P=null){w instanceof h&&(w=w.toArray());if(null!=w){if(Y(w)||w instanceof g||ka(w)||D(w))return Ka(w,P);if(w instanceof Array){const Z=[],X=[];for(const la of w)null===la||Y(la)||la instanceof g||
ka(la)||D(la)?X.push(Ka(la,P)):(X.push(null),Z.push(lb(la,J,P,X.length-1,X)));0<Z.length&&await Promise.all(Z);return X}if(null!==w&&"object"===typeof w&&void 0!==w.castAsJsonAsync)return w.castAsJsonAsync(J,P)}return null}function La(w){return Oa(w)?w.parent:w}function Oa(w){return w&&"declaredClass"in w&&"esri.layers.support.SubtypeSublayer"===w.declaredClass}function Za(w){return w&&"declaredClass"in w&&"esri.layers.SubtypeGroupLayer"===w.declaredClass}function $a(w,J,P){const Z=La(w.fullSchema());
return null!==Z&&Z.fields?ja(J,Z,w,P):null}function ab(w){w=La(w.fullSchema());return null!==w&&w.fields?w.typeIdField?{subtypeField:w.typeIdField,subtypes:w.types?w.types.map(J=>({name:J.name,code:J.id})):[]}:null:null}function bb(w,J,P,Z){const X=La(w.fullSchema());if(null===X||!X.fields)return null;Z=ja(J,X,w,Z);if(void 0===P)try{P=w.field(J)}catch(la){return null}return Ba(Z,P)}function cb(w,J,P,Z){const X=La(w.fullSchema());if(null===X||!X.fields)return null;if(void 0===P){try{P=w.field(J)}catch(la){return null}return P}w=
ja(J,X,w,Z);return V(w,P)}function db(w){return w?.timeZone??"system"}function eb(w){w=La(w.fullSchema());if(null===w||!w.fields)return null;const J=[];for(const P of w.fields)J.push(I.esriFieldToJson(P));return{objectIdField:w.objectIdField,globalIdField:w.globalIdField??"",geometryType:void 0===I.layerGeometryEsriRestConstants[w.geometryType]?"":I.layerGeometryEsriRestConstants[w.geometryType],fields:J}}function fb(w,J){"system"===w&&(w=c.ArcadeDate.systemTimeZoneCanonicalName);return{version:"1.24",
engineVersion:A.version,timeZone:w,spatialReference:J instanceof E?J.toJSON():J,application:L.applicationName??"",engine:"web",locale:v.getLocale()}}class Pa{constructor(w){this.value=w}}class Qa{constructor(w){this.value=w}}const gb=Qa,hb=Pa,za={type:"VOID"},ib={type:"BREAK"},jb={type:"CONTINUE"};let Ma=0;const mb=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:gb,ImplicitResultE:Qa,ReturnResult:hb,ReturnResultE:Pa,absRound:l,arcadeVersion:"1.24",autoCastArrayOfPointsToMultiPoint:Va,
autoCastArrayOfPointsToPolygon:Ca,autoCastArrayOfPointsToPolyline:Ua,autoCastFeatureToGeometry:ha,binaryOperator:Ya,breakResult:ib,castAsJson:Ka,castAsJsonAsync:Na,continueResult:jb,defaultExecutingContext:fb,defaultTimeZone:db,defaultUndefined:ca,equalityTest:da,featureDomainCodeLookup:cb,featureDomainValueLookup:bb,featureFullDomain:$a,featureSchema:eb,featureSubtypes:ab,fixNullGeometry:Ea,fixSpatialReference:Ga,formatDate:N,formatNumber:H,generateUUID:y,getDomain:ja,getDomainCode:V,getDomainValue:Ba,
getType:oa,greaterThanLessThan:fa,isArray:ra,isBoolean:ma,isDate:D,isDateOnly:O,isDictionary:F,isFeature:qa,isFeatureSet:ya,isFeatureSetCollection:G,isFunctionParameter:b,isGeometry:ia,isImmutableArray:K,isInteger:W,isJsDate:ka,isModule:R,isNumber:ea,isObject:T,isSimpleType:Y,isString:na,isSubtypeGrouplayer:Za,isSubtypeSublayer:Oa,isTime:Q,multiReplace:M,pcCheck:pa,stableStringify:Fa,standardiseDateFormat:S,tick:Xa,toBoolean:Da,toDate:Ja,toNumber:sa,toNumberArray:ba,toString:aa,toStringArray:Wa,toStringExplicit:wa,
voidOperation:za},Symbol.toStringTag,{value:"Module"}));r.ImplicitResult=gb;r.ImplicitResultE=Qa;r.ReturnResult=hb;r.ReturnResultE=Pa;r.absRound=l;r.arcadeVersion="1.24";r.autoCastArrayOfPointsToMultiPoint=Va;r.autoCastArrayOfPointsToPolygon=Ca;r.autoCastArrayOfPointsToPolyline=Ua;r.autoCastFeatureToGeometry=ha;r.binaryOperator=Ya;r.breakResult=ib;r.castAsJson=Ka;r.castAsJsonAsync=Na;r.continueResult=jb;r.defaultExecutingContext=fb;r.defaultTimeZone=db;r.defaultUndefined=ca;r.equalityTest=da;r.featureDomainCodeLookup=
cb;r.featureDomainValueLookup=bb;r.featureFullDomain=$a;r.featureSchema=eb;r.featureSubtypes=ab;r.fixNullGeometry=Ea;r.fixSpatialReference=Ga;r.formatDate=N;r.formatNumber=H;r.generateUUID=y;r.getDomain=ja;r.getDomainCode=V;r.getDomainValue=Ba;r.getType=oa;r.greaterThanLessThan=fa;r.isArray=ra;r.isBoolean=ma;r.isDate=D;r.isDateOnly=O;r.isDictionary=F;r.isFeature=qa;r.isFeatureSet=ya;r.isFeatureSetCollection=G;r.isFunctionParameter=b;r.isGeometry=ia;r.isImmutableArray=K;r.isInteger=W;r.isJsDate=ka;
r.isModule=R;r.isNumber=ea;r.isObject=T;r.isSimpleType=Y;r.isString=na;r.isSubtypeGrouplayer=Za;r.isSubtypeSublayer=Oa;r.isTime=Q;r.lc=mb;r.multiReplace=M;r.pcCheck=pa;r.stableStringify=Fa;r.standardiseDateFormat=S;r.tick=Xa;r.toBoolean=Da;r.toDate=Ja;r.toNumber=sa;r.toNumberArray=ba;r.toString=aa;r.toStringArray=Wa;r.toStringExplicit=wa;r.voidOperation=za})},"esri/arcade/executionError":function(){define(["exports","../core/string"],function(r,L){function A(p){return p&&p.loc?`Line : ${p.loc.start?.line}, ${p.loc.start?.column}: `:
""}r.ExecutionErrorCodes=void 0;(function(p){p.AsyncNotEnabled="AsyncNotEnabled";p.ModulesNotSupported="ModulesNotSupported";p.CircularModules="CircularModules";p.CannotCompareDateAndTime="CannotCompareDateAndTime";p.NeverReach="NeverReach";p.UnsupportedHashType="UnsupportedHashType";p.InvalidParameter="InvalidParameter";p.UnexpectedToken="UnexpectedToken";p.Unrecognized="Unrecognized";p.UnrecognizedType="UnrecognizedType";p.MaximumCallDepth="MaximumCallDepth";p.BooleanConditionRequired="BooleanConditionRequired";
p.TypeNotAllowedInFeature="TypeNotAllowedInFeature";p.KeyMustBeString="KeyMustBeString";p.WrongNumberOfParameters="WrongNumberOfParameters";p.CallNonFunction="CallNonFunction";p.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";p.NoFunctionInDictionary="NoFunctionInDictionary";p.NoFunctionInArray="NoFunctionInArray";p.AssignModuleFunction="AssignModuleFunction";p.LogicExpressionOrAnd="LogicExpressionOrAnd";p.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";p.FunctionNotFound="FunctionNotFound";
p.InvalidMemberAccessKey="InvalidMemberAccessKey";p.UnsupportedUnaryOperator="UnsupportUnaryOperator";p.InvalidIdentifier="InvalidIdentifier";p.MemberOfNull="MemberOfNull";p.UnsupportedOperator="UnsupportedOperator";p.Cancelled="Cancelled";p.ModuleAccessorMustBeString="ModuleAccessorMustBeString";p.ModuleExportNotFound="ModuleExportNotFound";p.Immutable="Immutable";p.OutOfBounds="OutOfBounds";p.IllegalResult="IllegalResult";p.FieldNotFound="FieldNotFound";p.PortalRequired="PortalRequired";p.LogicError=
"LogicError";p.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";p.KeyAccessorMustBeString="KeyAccessorMustBeString";p.WrongSpatialReference="WrongSpatialReference";p.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime";p.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(r.ExecutionErrorCodes||(r.ExecutionErrorCodes={}));const c={[r.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[r.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",
[r.ExecutionErrorCodes.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[r.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[r.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[r.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[r.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[r.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",
[r.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[r.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[r.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[r.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[r.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[r.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[r.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",
[r.ExecutionErrorCodes.PortalRequired]:"Portal is required",[r.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[r.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[r.ExecutionErrorCodes.Unrecognized]:"Unrecognized code structure",[r.ExecutionErrorCodes.UnrecognizedType]:"Unrecognized type",[r.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[r.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",
[r.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[r.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[r.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[r.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[r.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[r.ExecutionErrorCodes.Immutable]:"Object is immutable",[r.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",
[r.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[r.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[r.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[r.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognized",[r.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[r.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[r.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[r.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[r.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[r.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[r.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26",[r.ExecutionErrorCodes.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[r.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly"};
class a extends Error{constructor(...p){super(...p)}}class d extends a{constructor(p,C){super(A(C)+p.message,{cause:p});this.loc=null;Error.captureStackTrace&&Error.captureStackTrace(this,d);C?.loc&&(this.loc=C.loc)}}class k extends Error{constructor(p,C,z,e){super("Execution error - "+A(z)+L.replace(c[C],e));this.loc=null;this.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(this,k);z?.loc&&(this.loc=z.loc)}}class h extends Error{constructor(p,
C,z,e){super("Compilation error - "+A(z)+L.replace(c[C],e));this.loc=null;this.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(this,h);z?.loc&&(this.loc=z.loc)}}class n extends Error{constructor(){super("Uncompilable code structures");this.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(this,n)}}r.ModuleErrorCodes=void 0;(function(p){p.UnrecognizedUri="UnrecognizedUri";p.UnsupportedUriProtocol=
"UnsupportedUriProtocol"})(r.ModuleErrorCodes||(r.ModuleErrorCodes={}));const x={[r.ModuleErrorCodes.UnrecognizedUri]:"Unrecognized uri - {uri}",[r.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognized uri protocol"};class I extends Error{constructor(p,C){super(L.replace(x[p],C));this.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(this,I)}}r.ArcadeCompilationError=h;r.ArcadeExecutionError=k;r.ArcadeUncompilableError=n;r.ErrorWithCause=a;r.ExecutionErrorMessages=
c;r.LocatableArcadeExecutionError=d;r.ModuleError=I;r.ModuleErrorMessages=x;r.ensureArcadeExecutionError=function(p,C,z){return"esri.arcade.arcadeexecutionerror"===z.declaredRootClass||"esri.arcade.arcadecompilationerror"===z.declaredRootClass?null===z.loc&&C?.loc?new d(z,{cause:z}):z:C?.loc?new d(z,{cause:z}):z};r.parsingValidationMessage=function(p,C,z){return"Parsing error - "+A(p)+L.replace(c[C],z)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/FunctionWrapper":function(){define(["exports",
"../core/promiseUtils"],function(r,L){function A(k,h,n){if(k instanceof c&&!(k instanceof d)){const x=new d;x.fn=k;x.parameterEvaluator=n;x.context=h;return x}return k}class c{constructor(){}}class a extends c{constructor(k){super();this.fn=k}createFunction(k){return(...h)=>this.fn(k,{preparsed:!0,arguments:h})}call(k,h){return this.fn(k,h)}marshalledCall(k,h,n,x){return x(k,h,(I,p,C)=>{C=C.map(z=>z instanceof c&&!(z instanceof d)?A(z,k,x):z);I=this.call(n,{args:C});return L.isPromiseLike(I)?I.then(z=>
A(z,n,x)):I})}}class d extends c{constructor(){super(...arguments);this.context=this.fn=null}createFunction(k){return this.fn.createFunction(this.context)}call(k,h){return this.fn.marshalledCall(k,h,this.context,this.parameterEvaluator)}marshalledCall(k,h,n){return this.fn.marshalledCall(k,h,this.context,this.parameterEvaluator)}}r.ArcadeFunction=c;r.NativeFunction=a;r.ScopeMarshalledFunction=d;r.wrapModuleScopedResponse=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutableArray":function(){define(function(){class r{constructor(L=
[]){this._elements=L}length(){return this._elements.length}get(L){return this._elements[L]}toArray(){const L=[];for(let A=0;A<this.length();A++)L.push(this.get(A));return L}}return r})},"esri/arcade/ImmutablePathArray":function(){define(["./ImmutableArray","./ImmutablePointArray"],function(r,L){class A extends r{constructor(c,a,d,k,h){super(c);this._lazyPath=[];this._hasM=this._hasZ=!1;this._hasZ=d;this._hasM=k;this._spRef=a;this._cacheId=h}get(c){if(void 0===this._lazyPath[c]){const a=this._elements[c];
if(void 0===a)return;this._lazyPath[c]=new L(a,this._spRef,this._hasZ,this._hasM,this._cacheId,c)}return this._lazyPath[c]}equalityTest(c){return c===this?!0:null===c||!1===c instanceof A?!1:c.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}return A})},"esri/arcade/ImmutablePointArray":function(){define(["./ImmutableArray","../geometry/Point"],function(r,L){class A extends r{constructor(c,a,d,k,h,n){super(c);this._lazyPt=[];this._hasM=this._hasZ=!1;this._spRef=
a;this._hasZ=d;this._hasM=k;this._cacheId=h;this._partId=n}get(c){if(void 0===this._lazyPt[c]){const a=this._elements[c];if(void 0===a)return;const d=this._hasZ,k=this._hasM;let h=null;h=d&&!k?new L(a[0],a[1],a[2],void 0,this._spRef):k&&!d?new L(a[0],a[1],void 0,a[2],this._spRef):d&&k?new L(a[0],a[1],a[2],a[3],this._spRef):new L(a[0],a[1],this._spRef);h.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+c.toString();this._lazyPt[c]=h}return this._lazyPt[c]}equalityTest(c){return c===
this?!0:null===c||!1===c instanceof A?!1:c.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}return A})},"esri/arcade/featureset/support/shared":function(){define("exports ../../ArcadeDate ../../../core/sql/DateOnly ../../../core/sql/TimeOnly ../../../geometry/Extent ../../../layers/support/Field ../../../chunks/datetime".split(" "),function(r,L,A,c,a,d,k){function h(x){return x instanceof Date}function n(x){return x instanceof L.ArcadeDate}
r.FeatureServiceDatabaseType=void 0;(function(x){x[x.Standardised=0]="Standardised";x[x.StandardisedNoInterval=1]="StandardisedNoInterval";x[x.SqlServer=2]="SqlServer";x[x.Oracle=3]="Oracle";x[x.Postgres=4]="Postgres";x[x.PGDB=5]="PGDB";x[x.FILEGDB=6]="FILEGDB";x[x.NotEvaluated=7]="NotEvaluated"})(r.FeatureServiceDatabaseType||(r.FeatureServiceDatabaseType={}));r.IdState=void 0;(function(x){x[x.InFeatureSet=0]="InFeatureSet";x[x.NotInFeatureSet=1]="NotInFeatureSet";x[x.Unknown=2]="Unknown"})(r.IdState||
(r.IdState={}));r.callback=function(x,I){return function(){try{x.apply(null,arguments)}catch(p){I.reject(p)}}};r.cloneAttributes=function(x){const I={};for(const p in x)I[p]=x[p];return I};r.cloneField=function(x){return d.fromJSON(x.toJSON())};r.convertLinearUnitsToCode=function(x){if(null==x)return null;if("number"===typeof x||"number"===typeof x)return x;switch(x.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};
r.convertSquareUnitsToCode=function(x){if(null==x)return null;if("number"===typeof x)return x;switch(x.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};r.defaultMaxRecords=1E3;r.equalityTest=function(x,I){return x===I?!0:(h(x)||n(x))&&(h(I)||n(I))?x.getTime()===I.getTime():!1};r.errback=function(x){return function(I){x.reject(I)}};r.esriFieldToJson=function(x){return x.toJSON?x.toJSON():
x};r.extractServiceUrl=function(x){if(void 0===x)return"";x=x.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");x=x.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return x=x.split("?")[0]};r.isArcadeDate=n;r.isArcadeDateOnly=function(x){return x instanceof A.DateOnly};r.isArcadeTime=function(x){return x instanceof c.TimeOnly};r.isArray=function(x){return x instanceof Array};r.isBoolean=function(x){return"boolean"===typeof x};r.isDate=h;r.isLuxonDate=function(x){return x instanceof k.DateTime};r.isNumber=
function(x){return"number"===typeof x};r.isString=function(x){return"string"===typeof x||x instanceof String};r.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",
blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",
esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};r.layerGeometryEsriConstants={point:"point",polygon:"polygon",
polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};r.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",
esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};r.sameGeomType=function(x,I){return x===I||"point"===x&&"esriGeometryPoint"===I||"polyline"===x&&"esriGeometryPolyline"===I||"polygon"===x&&"esriGeometryPolygon"===I||"extent"===x&&"esriGeometryEnvelope"===I||"multipoint"===x&&"esriGeometryMultipoint"===I||"point"===I&&"esriGeometryPoint"===x||"polyline"===I&&"esriGeometryPolyline"===
x||"polygon"===I&&"esriGeometryPolygon"===x||"extent"===I&&"esriGeometryEnvelope"===x||"multipoint"===I&&"esriGeometryMultipoint"===x?!0:!1};r.shapeExtent=function(x){if(null==x)return null;switch(x.type){case "polygon":case "multipoint":case "polyline":return x.extent;case "point":return new a({xmin:x.x,ymin:x.y,xmax:x.x,ymax:x.y,spatialReference:x.spatialReference});case "extent":return x}return null};r.stableStringify=function(x,I){I||(I={});"function"===typeof I&&(I={cmp:I});const p="boolean"===
typeof I.cycles?I.cycles:!1,C=I.cmp&&function(e){return function(g){return function(B,q){return e({key:B,value:g[B]},{key:q,value:g[q]})}}}(I.cmp),z=[];return function B(g){g?.toJSON&&"function"===typeof g.toJSON&&(g=g.toJSON());if(void 0!==g){if("number"===typeof g)return isFinite(g)?""+g:"null";if("object"!==typeof g)return JSON.stringify(g);var q;if(Array.isArray(g)){var u="[";for(q=0;q<g.length;q++)q&&(u+=","),u+=B(g[q])||"null";return u+"]"}if(null===g)return"null";if(z.includes(g)){if(p)return JSON.stringify("__cycle__");
throw new TypeError("Converting circular structure to JSON");}var f=z.push(g)-1,E=Object.keys(g).sort(C?.(g));u="";for(q=0;q<E.length;q++){const m=E[q],v=B(g[m]);v&&(u&&(u+=","),u+=JSON.stringify(m)+":"+v)}z.splice(f,1);return"{"+u+"}"}}(x)};r.toEsriGeometryType=function(x){switch(x){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(r,L,A,c){function a(k){k=k.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let h="";const n=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const x of k.match(n)||[])switch(x){case "D":h+=
"d";break;case "DD":h+="dd";break;case "DDD":h+="o";break;case "d":h+="c";break;case "ddd":h+="ccc";break;case "dddd":h+="cccc";break;case "M":h+="L";break;case "MM":h+="LL";break;case "MMM":h+="LLL";break;case "MMMM":h+="LLLL";break;case "YY":h+="yy";break;case "Y":case "YYYY":h+="yyyy";break;case "Q":h+="q";break;case "X":case "x":h+=x;break;default:h=2<=x.length&&"["===x.slice(0,1)&&"]"===x.slice(-1)?h+`'${x.slice(1,-1)}'`:h+`'${x}'`}return h}class d{constructor(k,h,n){this._year=k;this._month=
h;this._day=n;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(k){return k instanceof d&&k.day===this.day&&k.month===this.month&&k.year===this.year}clone(){return new d(this._year,this._month,this._day)}toDateTime(k){return c.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:L.createDateTimeZone(k)})}toDateTimeLuxon(k){return c.DateTime.fromObject({day:this.day,
month:this.month,year:this.year},{zone:L.createDateTimeZone(k)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(k=null){if(null===k||""===k)return this.toString();k=a(k);if(!k)return"";const h=this.toDateTime("unknown");return L.ArcadeDate.dateTimeToArcadeDate(h).toFormat(k,{locale:A.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const k=this.toDateTime("unknown");return L.ArcadeDate.dateTimeToArcadeDate(k)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(k,h){return d.fromDateTime(this.toUTCDateTime().plus({[k]:h}))}toUTCDateTime(){return c.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(k,h){switch(h.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(k.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(k.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===h?this.toUTCDateTime().diff(k.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(k.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(k.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(k.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(k.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(k.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(k.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(k){k=c.DateTime.fromMillis(k,{zone:c.FixedOffsetZone.utcInstance});return k.isValid?d.fromParts(k.year,k.month,k.day):null}static fromSeconds(k){k=c.DateTime.fromSeconds(k,{zone:c.FixedOffsetZone.utcInstance});return k.isValid?d.fromParts(k.year,k.month,k.day):null}static fromReader(k){if(!k)return null;k=k.split("-");return 3!==k.length?null:new d(parseInt(k[0],10),parseInt(k[1],
10),parseInt(k[2],10))}static fromParts(k,h,n){k=new d(k,h,n);return!1===k.isValid?null:k}static fromDateJS(k){return d.fromParts(k.getFullYear(),k.getMonth()+1,k.getDay())}static fromDateTime(k){return d.fromParts(k.year,k.month,k.day)}static fromSqlTimeStampOffset(k){return this.fromDateTime(k.toDateTime())}static fromString(k,h=null){if(""===k||null===k)return null;var n=[];if(h)(h=a(h))&&n.push(h);else if(null===h||""===h)return k=c.DateTime.fromISO(k,{setZone:!0}),k.isValid?d.fromParts(k.year,
k.month,k.day):null;for(const x of n)if(n=c.DateTime.fromFormat(k,h??x),n.isValid)return new d(n.year,n.month,n.day);return null}static fromNow(k="system"){k=c.DateTime.fromJSDate(new Date).setZone(L.createDateTimeZone(k));return new d(k.year,k.month,k.day)}}r.DateOnly=d;r.standardiseDateOnlyFormat=a;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(r,L,A,
c){function a(k){if(!k)return"";const h=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let n="";for(const x of k.match(h)||[])switch(x){case "SSS":n+=x;break;case "A":case "a":n+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":n+=x;break;default:n+=`'${x}'`}return n}class d{constructor(k,h,n,x){this._hour=k;this._minute=h;this._second=n;this._millisecond=x;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(k){return k instanceof
d&&k.hour===this.hour&&k.minute===this.minute&&k.second===this.second&&k.millisecond===this.millisecond}clone(){return new d(this.hour,this.minute,this.second,this.millisecond)}isValid(){return L.isInteger(this.hour)&&L.isInteger(this.minute)&&L.isInteger(this.second)&&L.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(k=null){return null===k||""===k?this.toString():(k=a(k))?c.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(k,{locale:A.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(k,h,n,x){k=new d(k,h,n,x);return k.isValid()?k:null}static fromReader(k){if(!k)return null;k=k.split(":");return 3!==k.length?null:new d(parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],
10),0)}static fromMilliseconds(k){return 864E5<k||0>k?null:new d(Math.floor(k/36E5%24),Math.floor(k/6E4%60),Math.floor(k/1E3%60),Math.floor(k%1E3))}static fromDateJS(k){return new d(k.getHours(),k.getMinutes(),k.getSeconds(),k.getMilliseconds())}static fromDateTime(k){return new d(k.hour,k.minute,k.second,k.millisecond)}static fromSqlTimeStampOffset(k){return this.fromDateTime(k.toDateTime())}static fromString(k,h=null){if(""===k||null===k)return null;const n=[];if(h)(h=a(h))&&n.push(h);else if(null===
h||""===h)n.push("HH:mm:ss"),n.push("HH:mm:ss.SSS"),n.push("hh:mm:ss a"),n.push("hh:mm:ss.SSS a"),n.push("HH:mm"),n.push("hh:mm a"),n.push("H:mm"),n.push("h:mm a"),n.push("H:mm:ss"),n.push("h:mm:ss a"),n.push("H:mm:ss.SSS"),n.push("h:mm:ss.SSS a");for(const x of n)if(h=c.DateTime.fromFormat(k,x),h.isValid)return new d(h.hour,h.minute,h.second,h.millisecond);return null}plus(k,h){switch(k){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return d.fromDateTime(this.toUTCDateTime().plus({[k]:h}))}return null}toUTCDateTime(){return c.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(k,h){switch(h.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(k.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(k.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===h?this.toUTCDateTime().diff(k.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(k.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(k.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(k.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(k.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(k.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(k.toUTCDateTime(),"milliseconds").milliseconds}}}r.TimeOnly=d;r.standardiseTimeFormat=a;Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(r,L){r.cloneGeometry=function(A){if(null==A)return null;const c=A.clone();void 0!==A.cache._geVersion&&(c.cache._geVersion=A.cache._geVersion);return c};r.convertLinearUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};r.convertSquareUnitsToCode=
function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};r.isInteger=function(A){return"number"===typeof A&&isFinite(A)&&Math.floor(A)===A};r.sameGeomType=function(A,c){return A===c||"point"===A&&"esriGeometryPoint"===c||"polyline"===A&&"esriGeometryPolyline"===
c||"polygon"===A&&"esriGeometryPolygon"===c||"extent"===A&&"esriGeometryEnvelope"===c||"multipoint"===A&&"esriGeometryMultipoint"===c||"point"===c&&"esriGeometryPoint"===A||"polyline"===c&&"esriGeometryPolyline"===A||"polygon"===c&&"esriGeometryPolygon"===A||"extent"===c&&"esriGeometryEnvelope"===A||"multipoint"===c&&"esriGeometryMultipoint"===A?!0:!1};r.shapeExtent=function(A){if(null==A)return null;switch(A.type){case "polygon":case "multipoint":case "polyline":return A.extent;case "point":return new L({xmin:A.x,
ymin:A.y,xmax:A.x,ymax:A.y,spatialReference:A.spatialReference});case "extent":return A}return null};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(r,L,A){function c(I=A.getLocale()){I=I.toLowerCase();let p=I in h;if(!p){const g=I.split("-");1<g.length&&g[0]in h&&(I=g[0],p=!0);p||(I="en")}const [C,z,e="#,##0.###"]=h[I];return{decimal:C,group:z,pattern:e}}function a(I){I=I||{};var p=c(I.locale);const C=
I.pattern||p.pattern,z=p.group,e=p.decimal;let g=1;if(C.includes("%"))g/=100;else if(C.includes("\u2030"))g/=1E3;else if(C.includes("\u00a4"))throw Error("currency notation not supported");p=C.split(";");1===p.length&&p.push("-"+p[0]);return{regexp:x(p,B=>{B="(?:"+L.escapeRegExpString(B,".")+")";return B.replace(n,q=>{const u={signed:!1,separator:I.strict?z:[z,""],fractional:I.fractional,decimal:e,exponent:!1};q=q.split(".");let f=I.places;1===q.length&&1!==g&&(q[1]="###");1===q.length||0===f?u.fractional=
!1:(void 0===f&&(f=I.pattern?q[1].lastIndexOf("0")+1:Infinity),f&&null==I.fractional&&(u.fractional=!0),!I.places&&+f<q[1].length&&(f+=","+q[1].length),u.places=f);q=q[0].split(",");1<q.length&&(u.groupSize=q.pop().length,1<q.length&&(u.groupSize2=q.pop().length));return"("+d(u)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:z,decimal:e,factor:g}}function d(I){I=I||{};"places"in I||(I.places=Infinity);"string"!==typeof I.decimal&&(I.decimal=".");"fractional"in I&&!String(I.places).startsWith("0")||
(I.fractional=[!0,!1]);"exponent"in I||(I.exponent=[!0,!1]);"eSigned"in I||(I.eSigned=[!0,!1]);var p=k(I);const C=x(I.fractional,e=>{let g="";e&&0!==I.places&&(g="\\"+I.decimal,g=Infinity===I.places?"(?:"+g+"\\d+)?":g+("\\d{"+I.places+"}"));return g},!0),z=x(I.exponent,e=>e?"([eE]"+k({signed:I.eSigned})+")":"");p+=C;C&&(p="(?:(?:"+p+")|(?:"+C+"))");return p+z}function k(I){I=I||{};"signed"in I||(I.signed=[!0,!1]);"separator"in I?"groupSize"in I||(I.groupSize=3):I.separator="";const p=x(I.signed,z=>
z?"[-+]":"",!0),C=x(I.separator,z=>{if(!z)return"(?:\\d+)";z=L.escapeRegExpString(z);" "===z?z="\\s":"\u00a0"===z&&(z="\\s\\xa0");const e=I.groupSize,g=I.groupSize2;return g?(z="(?:0|[1-9]\\d{0,"+(g-1)+"}(?:["+z+"]\\d{"+g+"})*["+z+"]\\d{"+e+"})",0<e-g?"(?:"+z+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":z):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+z+"]\\d{"+e+"})*)"},!0);return p+C}const h={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",",
"."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",",
"\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},n=/[#0,]*[#0](?:\.0*#*)?/,x=(I,p,C)=>{if(!(I instanceof Array))return p(I);const z=[];for(let e=0;e<I.length;e++)z.push(p(I[e]));I=z.join("|");return"("+(C?"?:":"")+I+")"};r._parseInfo=a;r.format=function(I,p){p={...p};var C=c(p.locale);p.customs=C;C=p.pattern||C.pattern;if(isNaN(I)||Infinity===Math.abs(I))return null;var z=I;var e=p||{};var g=e.customs.group,B=e.customs.decimal;C=C.split(";");I=C[0];p=C[0>z?1:0]||"-"+
I;if(p.includes("%"))z*=100;else if(p.includes("\u2030"))z*=1E3;else{if(p.includes("\u00a4"))throw Error("currency notation not supported");if(p.includes("E"))throw Error("exponential notation not supported");}C=n;var q=I.match(C);if(!q)throw Error("unable to find a number expression in pattern: "+p);!1===e.fractional&&(e.places=0);I=p.replace;q=q[0];e=e={decimal:B,group:g,places:e.places,round:e.round};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);B=q.split(".");var u="string"===
typeof e.places&&e.places.indexOf(",");q=e.places;u?q=e.places.substring(u+1):0<=+q||(q=(B[1]||[]).length);0>e.round||(z=Number(z.toFixed(Number(q))));g=String(Math.abs(z)).split(".");z=g[1]||"";B[1]||e.places?(u&&(e.places=e.places.substring(0,u)),u=void 0!==e.places?e.places:B[1]&&B[1].lastIndexOf("0")+1,+u>z.length&&(g[1]=z.padEnd(Number(u),"0")),+q<z.length&&(g[1]=z.substr(0,Number(q)))):g[1]&&g.pop();z=B[0].replace(",","");q=z.indexOf("0");-1!==q&&(q=z.length-q,q>g[0].length&&(g[0]=g[0].padStart(q,
"0")),z.includes("#")||(g[0]=g[0].substr(g[0].length-q)));z=B[0].lastIndexOf(",");let f;if(-1!==z){var E=B[0].length-z-1;B=B[0].substr(0,z);z=B.lastIndexOf(",");-1!==z&&(f=B.length-z-1)}B=[];for(z=g[0];z;)q=z.length-E,B.push(0<q?z.substr(q):z),z=0<q?z.slice(0,q):"",f&&(E=f,f=void 0);g[0]=B.reverse().join(e.group||",");E=g.join(e.decimal||".");return I.call(p,C,E)};r.getCustoms=c;r.parse=function(I,p){p=a(p);I=(new RegExp("^"+p.regexp+"$")).exec(I);if(!I)return NaN;let C=I[1];if(!I[1]){if(!I[2])return NaN;
C=I[2];p.factor*=-1}C=C.replaceAll(new RegExp("["+p.group+"\\s\\xa0]","g"),"").replace(p.decimal,".");return Number(C)*p.factor};r.regexp=function(I){return a(I).regexp};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Feature":function(){define("./ArcadeDate ./deepClone ./Dictionary ./executionError ./ImmutableArray ../chunks/languageUtils ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../layers/support/FieldsIndex".split(" "),
function(r,L,A,c,a,d,k,h,n,x,I,p,C){class z{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this._fieldTypesFixed=!0;this.contextTimeZone=this.fieldsIndex=null;this.immutable=!0;this._fieldsToFixDataTypes=null;this.immutable=!0}static createFromGraphic(e,g){const B=new z;B.contextTimeZone=g??null;B._geometry=null!=e.geometry?e.geometry:null;B.attributes=void 0===e.attributes?{}:null===e.attributes?{}:e.attributes;
e._sourceLayer?(B._layer=e._sourceLayer,B._fieldTypesFixed=!1):e._layer?(B._layer=e._layer,B._fieldTypesFixed=!1):e.layer&&"fields"in e.layer?(B._layer=e.layer,B._fieldTypesFixed=!1):e.sourceLayer&&"fields"in e.sourceLayer&&(B._layer=e.sourceLayer,B._fieldTypesFixed=!1);B._layer&&!B._fieldTypesFixed&&(B.fieldsIndex=this.hydrateFieldsIndex(B._layer));return B}static createFromArcadeFeature(e){if(e instanceof z){var g=new z;g._fieldTypesFixed=e._fieldTypesFixed;g.attributes=e.attributes;g._geometry=
e._geometry;g._optimizedGeomDefinition=e._optimizedGeomDefinition;e._layer&&(g._layer=e._layer);g.fieldsIndex=e.fieldsIndex;g.contextTimeZone=e.contextTimeZone;return g}g={};for(const B of e.keys())g[B]=e.field(B);return z.createFromGraphicLikeObject(e.geometry(),g,e.fullSchema(),e.contextTimeZone)}static createFromOptimisedFeature(e,g,B){const q=new z;q._geometry=e.geometry?{geometry:e.geometry}:null;q._optimizedGeomDefinition=B;q.attributes=e.attributes||{};q._layer=g;q._fieldTypesFixed=!1;return q}static createFromArcadeDictionary(e){const g=
new z;g.attributes=e.field("attributes");null!==g.attributes?g.attributes instanceof A?(g.attributes=g.attributes.attributes,null===g.attributes&&(g.attributes={})):g.attributes={}:g.attributes={};g._geometry=e.field("geometry");null!==g._geometry&&(g._geometry instanceof A?g._geometry=z.parseGeometryFromDictionary(g._geometry):g._geometry instanceof n||(g._geometry=null));return g}static createFromGraphicLikeObject(e,g,B=null,q){const u=new z;u.contextTimeZone=q??null;null===g&&(g={});u.attributes=
g;u._geometry=null!=e?e:null;u._layer=B;u._layer&&(u._fieldTypesFixed=!1,u.fieldsIndex=this.hydrateFieldsIndex(u._layer));return u}static hydrateFieldsIndex(e){return null===e?null:d.isFeatureSet(e)?e.getFieldsIndex():e.fieldsIndex?e.fieldsIndex:C.fromLayerJSON({datesInUnknownTimezone:e.datesInUnknownTimezone,fields:e.fields,timeInfo:e.timeInfo,editFieldsInfo:e.editFieldsInfo,dateFieldsTimeReference:e.dateFieldsTimeReference??{timeZone:"UTC",respectsDaylightSaving:!1}})}repurposeFromGraphicLikeObject(e,
g,B=null){null===g&&(g={});this.attributes=g;this._geometry=e??null;this._fieldTypesFixed=(this._layer=B)?!1:!0}castToText(e=!1){let g="";!1===this._fieldTypesFixed&&this._fixFieldTypes();for(const B in this.attributes){""!==g&&(g+=",");const q=this.attributes[B];null==q?g+=JSON.stringify(B)+":null":d.isBoolean(q)||d.isNumber(q)||d.isString(q)?g+=JSON.stringify(B)+":"+JSON.stringify(q):q instanceof n?g+=JSON.stringify(B)+":"+d.toStringExplicit(q):q instanceof h.TimeOnly||q instanceof k.DateOnly?g+=
`${JSON.stringify(B)}:${JSON.stringify(q.toString())}`:q instanceof a?g+=JSON.stringify(B)+":"+d.toStringExplicit(q,null,e):q instanceof Array?g+=JSON.stringify(B)+":"+d.toStringExplicit(q,null,e):q instanceof r.ArcadeDate?g=e?g+(JSON.stringify(B)+":"+JSON.stringify(q.getTime())):g+(JSON.stringify(B)+":"+q.stringify()):null!==q&&"object"===typeof q&&void 0!==q.castToText&&(g+=JSON.stringify(B)+":"+q.castToText(e))}return'{"geometry":'+(null===this.geometry()?"null":d.toStringExplicit(this.geometry()))+
',"attributes":{'+g+"}}"}_fixFieldTypes(){if(this._fieldsToFixDataTypes&&0<this._fieldsToFixDataTypes?.length)this._fixAllFields(this._fieldsToFixDataTypes);else{var e=[],g=this._layer.fields;for(let B=0;B<g.length;B++){const {name:q,type:u}=g[B];switch(u){case "date":case "esriFieldTypeDate":e.push({field:q,dataType:"date"});break;case "date-only":case "esriFieldTypeDateOnly":e.push({field:q,dataType:"date-only"});break;case "time-only":case "esriFieldTypeTimeOnly":e.push({field:q,dataType:"time-only"});
break;case "timestamp-offset":case "esriFieldTypeTimestampOffset":e.push({field:q,dataType:"timestamp-offset"})}}this._fieldsToFixDataTypes=e;0<e.length&&this._fixAllFields(e)}this._fieldTypesFixed=!0}isUnknownDateTimeField(e){return"unknown"===this.fieldsIndex?.getTimeZone(e)}_fixAllFields(e){this.attributes={...this.attributes};const g=this.contextTimeZone??"system";for(let u=0;u<e.length;u++){var B=e[u].field,q=e[u].dataType;let f=this.attributes[B];if(void 0===f)for(const E in this.attributes){if(E.toLowerCase()===
B.toLowerCase()){f=this.attributes[E];if(null!==f){if("time-only"===q){d.isTime(f)||(this.attributes[E]=h.TimeOnly.fromReader(f.toString()));break}if("date-only"===q){d.isDateOnly(f)||(this.attributes[E]=k.DateOnly.fromReader(f.toString()));break}if("timestamp-offset"===q){d.isDate(f)||(this.attributes[E]=r.ArcadeDate.fromReaderAsTimeStampOffset(f.toString()));break}B=this.isUnknownDateTimeField(E);f instanceof Date?this.attributes[E]=B?r.ArcadeDate.unknownDateJSToArcadeDate(f):r.ArcadeDate.dateJSAndZoneToArcadeDate(f,
g):d.isDate(f)||(this.attributes[E]=B?r.ArcadeDate.unknownEpochToArcadeDate(f):r.ArcadeDate.epochToArcadeDate(f,g))}break}}else null!==f&&("time-only"===q?d.isTime(f)?this.attributes[B]=f:this.attributes[B]=h.TimeOnly.fromReader(f.toString()):"date-only"===q?d.isDateOnly(f)?this.attributes[B]=f:this.attributes[B]=k.DateOnly.fromReader(f.toString()):"timestamp-offset"===q?d.isDate(f)?this.attributes[B]=f:this.attributes[B]=r.ArcadeDate.fromReaderAsTimeStampOffset(f.toString()):(q=this.isUnknownDateTimeField(B),
d.isDate(f)?this.attributes[B]=f:this.attributes[B]=f instanceof Date?q?r.ArcadeDate.unknownDateJSToArcadeDate(f):r.ArcadeDate.dateJSAndZoneToArcadeDate(f,g):q?r.ArcadeDate.unknownEpochToArcadeDate(f):r.ArcadeDate.epochToArcadeDate(f,g)))}}geometry(){if(null===this._geometry||this._geometry instanceof n)return this._geometry;this._optimizedGeomDefinition?(this._geometry=I.fromJSON(p.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),
this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=I.fromJSON(this._geometry);return this._geometry}field(e){this._fieldTypesFixed||this._fixFieldTypes();var g=this.attributes[e];if(void 0!==g)return g;g=e.toLowerCase();for(const B in this.attributes)if(B.toLowerCase()===g)return this.attributes[B];if(this._hasFieldDefinition(g))return null;throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.FieldNotFound,null,{key:e});}_hasFieldDefinition(e){if(null===
this._layer)return!1;for(let g=0;g<this._layer.fields.length;g++)if(this._layer.fields[g].name.toLowerCase()===e)return!0;return!1}setField(e,g){if(this.immutable)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.Immutable,null);g instanceof Date&&(g=this.isUnknownDateTimeField(e)?r.ArcadeDate.unknownDateJSToArcadeDate(g):r.ArcadeDate.dateJSToArcadeDate(g));if(!1===d.isSimpleType(g))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.TypeNotAllowedInFeature,null);const B=e.toLowerCase();
if(void 0===this.attributes[e])for(const q in this.attributes)if(q.toLowerCase()===B){this.attributes[q]=g;return}this.attributes[e]=g}hasField(e){const g=e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(const B in this.attributes)if(B.toLowerCase()===g)return!0;return this._hasFieldDefinition(g)?!0:!1}keys(){let e=[];const g={};for(var B in this.attributes)e.push(B),g[B.toLowerCase()]=1;if(null!==this._layer)for(B=0;B<this._layer.fields.length;B++){const q=this._layer.fields[B];1!==g[q.name.toLowerCase()]&&
e.push(q.name)}return e=e.sort()}static parseGeometryFromDictionary(e){e=z._convertDictionaryToJson(e,!0);void 0!==e.hasm&&(e.hasM=e.hasm,delete e.hasm);void 0!==e.hasz&&(e.hasZ=e.hasz,delete e.hasz);void 0!==e.spatialreference&&(e.spatialReference=e.spatialreference,delete e.spatialreference);void 0!==e.rings&&(e.rings=this._fixPathArrays(e.rings,!0===e.hasZ,!0===e.hasZ));void 0!==e.paths&&(e.paths=this._fixPathArrays(e.paths,!0===e.hasZ,!0===e.hasM));void 0!==e.points&&(e.points=this._fixPointArrays(e.points,
!0===e.hasZ,!0===e.hasM));return I.fromJSON(e)}static _fixPathArrays(e,g,B){const q=[];if(e instanceof Array)for(var u=0;u<e.length;u++)q.push(this._fixPointArrays(e[u],g,B));else if(e instanceof a)for(u=0;u<e.length();u++)q.push(this._fixPointArrays(e.get(u),g,B));return q}static _fixPointArrays(e,g,B){const q=[];if(e instanceof Array)for(var u=0;u<e.length;u++){var f=e[u];f instanceof x?g&&B?q.push([f.x,f.y,f.z,f.m]):g?q.push([f.x,f.y,f.z]):B?q.push([f.x,f.y,f.m]):q.push([f.x,f.y]):f instanceof
a?q.push(f.toArray()):q.push(f)}else if(e instanceof a)for(u=0;u<e.length();u++)f=e.get(u),f instanceof x?g&&B?q.push([f.x,f.y,f.z,f.m]):g?q.push([f.x,f.y,f.z]):B?q.push([f.x,f.y,f.m]):q.push([f.x,f.y]):f instanceof a?q.push(f.toArray()):q.push(f);return q}static _convertDictionaryToJson(e,g=!1){const B={};for(const q in e.attributes){let u=e.attributes[q];u instanceof A&&(u=z._convertDictionaryToJson(u));g?B[q.toLowerCase()]=u:B[q]=u}return B}static parseAttributesFromDictionary(e){const g={};for(const B in e.attributes){const q=
e.attributes[B];if(d.isSimpleType(q))g[B]=q;else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidParameter,null);}return g}static fromJson(e,g){let B=null;null!==e.geometry&&void 0!==e.geometry&&(B=I.fromJSON(e.geometry));const q={};if(null!==e.attributes&&void 0!==e.attributes)for(const u in e.attributes){const f=e.attributes[u];if(null===f)q[u]=f;else if(d.isString(f)||d.isNumber(f)||d.isBoolean(f)||d.isDate(f)||d.isTime(f)||d.isDateOnly(f))q[u]=f;else throw new c.ArcadeExecutionError(null,
c.ExecutionErrorCodes.InvalidParameter,null);}return z.createFromGraphicLikeObject(B,q,null,g??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const e=this._layer.gdbVersion;return void 0===e?"":""===e&&this._layer.capabilities?.isVersioned?"SDE.DEFAULT":e}castAsJson(e){const g={attributes:{},geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const B in this.attributes){const q=this.attributes[B];void 0!==q&&(g.attributes[B]=d.castAsJson(q,
e))}return g}async castAsJsonAsync(e,g){return this.castAsJson(g)}}L.configureDeepClone(z);return z})},"esri/arcade/treeAnalysis":function(){define(["exports"],function(r){function L(z){return"string"===typeof z||z instanceof String}function A(z,e){if(z)for(const g of z)c(g,e)}function c(z,e){if(z&&!1!==e(z))switch(z.type){case "ImportDeclaration":A(z.specifiers,e);c(z.source,e);break;case "ExportNamedDeclaration":c(z.declaration,e);break;case "ArrayExpression":A(z.elements,e);break;case "AssignmentExpression":case "BinaryExpression":c(z.left,
e);c(z.right,e);break;case "BlockStatement":A(z.body,e);break;case "Program":A(z.body,e);break;case "CallExpression":c(z.callee,e);A(z.arguments,e);break;case "ExpressionStatement":c(z.expression,e);break;case "ForInStatement":c(z.left,e);c(z.right,e);c(z.body,e);break;case "ForStatement":c(z.init,e);c(z.test,e);c(z.update,e);c(z.body,e);break;case "WhileStatement":c(z.test,e);c(z.body,e);break;case "FunctionDeclaration":c(z.id,e);A(z.params,e);c(z.body,e);break;case "IfStatement":c(z.test,e);c(z.consequent,
e);c(z.alternate,e);break;case "LogicalExpression":c(z.left,e);c(z.right,e);break;case "MemberExpression":c(z.object,e);c(z.property,e);break;case "ObjectExpression":A(z.properties,e);break;case "Property":c(z.key,e);c(z.value,e);break;case "ReturnStatement":c(z.argument,e);break;case "UnaryExpression":c(z.argument,e);break;case "UpdateExpression":c(z.argument,e);break;case "VariableDeclaration":A(z.declarations,e);break;case "VariableDeclarator":c(z.id,e);c(z.init,e);break;case "TemplateLiteral":A(z.expressions,
e),A(z.quasis,e)}}function a(z,e){let g=!1;const B=e.toLowerCase();c(z,q=>{if(g)return!1;"Identifier"===q.type&&q.name&&q.name.toLowerCase()===B&&(g=!0);return!0});return g}function d(z){const e=[];c(z,g=>{"ImportDeclaration"===g.type&&g.source&&g.source.value&&e.push({libname:g.specifiers[0].local.name.toLowerCase(),source:g.source.value});return!0});return e}function k(z){const e=[];c(z,g=>{"CallExpression"===g.type&&"Identifier"===g.callee.type&&e.push(g.callee.name.toLowerCase());return!0});return e}
const h={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,
max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,
max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},
lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,
max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,
max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},
area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},
multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}},n={functionDefinitions:new Map,constantDefinitions:new Map},x={functionDefinitions:new Map,constantDefinitions:new Map};for(var I of["pi","infinity"])x.constantDefinitions.set(I,{type:"constant"}),n.constantDefinitions.set(I,
{type:"constant"});x.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});n.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},
{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const z in h)I=h[z],x.functionDefinitions.set(z,{overloads:[{type:"function",parametersInfo:{min:I.min,max:I.max}}]}),n.functionDefinitions.set(z,{overloads:[{type:"function",parametersInfo:{min:I.min,max:I.max}}]});const p=new Set("featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem getfeaturesetinfo".split(" ")),
C=new Set("disjoint intersects touches crosses within contains overlaps equals relate intersection nearestvertex nearestcoordinate union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" "));r.addFunctionDeclaration=function(z,e){e="sync"===e?n:x;e.functionDefinitions.has(z.name.toLowerCase())?e.functionDefinitions.get(z.name.toLowerCase())?.overloads.push({type:"function",
parametersInfo:{min:z.min,max:z.max}}):e.functionDefinitions.set(z.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:z.min,max:z.max}}]})};r.extractFunctionDeclaration=function(z,e){const g=[];if(void 0!==e.params&&null!==e.params)for(let B=0;B<e.params.length;B++)g.push("any");return{name:z,return:"any",params:g}};r.findExpectedFieldLiterals=function(z){const e=[];c(z,g=>{if("CallExpression"===g.type){if("Identifier"===g.callee.type&&"expects"===g.callee.name.toLowerCase()){var B=
"";for(let q=0;q<(g.arguments||[]).length;q++)0===q?"Identifier"===g.arguments[q].type&&(B=g.arguments[q].name.toLowerCase()):B&&"Literal"===g.arguments[q].type&&L(g.arguments[q].value)&&e.push(B+"."+g.arguments[q].value.toLowerCase());return!1}if("Identifier"===g.callee.type&&["domainname","domaincode","domain","haskey"].includes(g.callee.name.toLowerCase())&&2<=g.arguments.length)return B="","Identifier"===g.arguments[0].type&&(B=g.arguments[0].name.toLowerCase()),B&&"Literal"===g.arguments[1].type&&
L(g.arguments[1].value)&&e.push(B+"."+g.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==g.type||"Identifier"!==g.object.type)return!0;!1===g.computed&&g.object&&g.object.name&&g.property&&"Identifier"===g.property.type&&g.property.name?e.push(g.object.name.toLowerCase()+"."+g.property.name.toLowerCase()):g.object&&g.object.name&&g.property&&"Literal"===g.property.type&&"string"===typeof g.property.value&&e.push(g.object.name.toLowerCase()+"."+g.property.value?.toString().toLowerCase());
return!1});return e};r.findFieldLiterals=function(z){const e=[];c(z,g=>{if("MemberExpression"!==g.type||"Identifier"!==g.object.type)return!0;!1===g.computed&&g.object&&g.object.name&&g.property&&"Identifier"===g.property.type&&g.property.name?e.push(g.object.name.toLowerCase()+"."+g.property.name.toLowerCase()):g.object&&g.object.name&&g.property&&"Literal"===g.property.type&&"string"===typeof g.property.value&&e.push(g.object.name.toLowerCase()+"."+g.property.value?.toString().toLowerCase());return!1});
return e};r.findFunctionCalls=k;r.findModuleImports=d;r.findScriptDependencies=function(z,e=[]){let g=null;if(void 0===z.usesFeatureSet){null===g&&(g=k(z));z.usesFeatureSet=!1;for(let B=0;B<g.length;B++)p.has(g[B])&&(z.usesFeatureSet=!0,z.isAsync=!0);if(!1===z.usesFeatureSet&&e&&0<e.length)for(const B of e)if(a(z,B)){z.usesFeatureSet=!0;z.isAsync=!0;break}}void 0===z.usesModules&&(z.usesModules=!1,0<d(z).length&&(z.usesModules=!0));if(void 0===z.usesGeometry)for(z.usesGeometry=!1,null===g&&(g=k(z)),
e=0;e<g.length;e++)C.has(g[e])&&(z.usesGeometry=!0)};r.fullArcadeApiAsync=x;r.fullArcadeApiSync=n;r.referencesFunction=function(z,e){let g=!1;const B=e.toLowerCase();c(z,q=>g?!1:"CallExpression"===q.type&&"Identifier"===q.callee.type&&q.callee.name&&q.callee.name.toLowerCase()===B?(g=!0,!1):!0);return g};r.referencesMember=a;r.scriptUsesFeatureSet=function(z){z=k(z);for(let e=0;e<z.length;e++)if(p.has(z[e]))return!0;return!1};r.walk=c;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/chunks/array":function(){define("exports ../arcade/deepClone ../arcade/executionError ../arcade/ImmutableArray ./languageUtils ../core/promiseUtils".split(" "),function(r,L,A,c,a,d){function k(n){function x(e,g,B){if(e instanceof c)return e.toArray();if(a.isArray(e))return e;throw new A.ArcadeExecutionError(g,A.ExecutionErrorCodes.InvalidParameter,B);}function I(e,g){var B=e.length,q=Math.floor(B/2);if(0===B)return[];if(1===B)return[e[0]];var u=I(e.slice(0,q),g);e=I(e.slice(q,B),g);for(B=[];0<
u.length||0<e.length;)0<u.length&&0<e.length?(q=g(u[0],e[0]),isNaN(q)&&(q=0),0>=q?(B.push(u[0]),u=u.slice(1)):(B.push(e[0]),e=e.slice(1))):0<u.length?(B.push(u[0]),u=u.slice(1)):0<e.length&&(B.push(e[0]),e=e.slice(1));return B}async function p(e,g){const B=e.length,q=Math.floor(B/2);if(0===B)return[];if(1===B)return[e[0]];e=[await p(e.slice(0,q),g),await p(e.slice(q,B),g)];return C(e[0],e[1],g,[])}async function C(e,g,B,q){if(0<e.length||0<g.length){if(0<e.length&&0<g.length){let u=await B(e[0],g[0]);
isNaN(u)&&(u=1);0>=u?(q.push(e[0]),e=e.slice(1)):(q.push(g[0]),g=g.slice(1));return C(e,g,B,q)}if(0<e.length)return q.push(e[0]),e=e.slice(1),C(e,g,B,q);if(0<g.length)return q.push(g[0]),g=g.slice(1),C(e,g,B,q)}else return q}function z(e,g,B,q){a.pcCheck(B,1,2,e,g);let u=B[0];a.isImmutableArray(u)&&(u=u.toArray());if(!1===a.isArray(u))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);if(1<B.length){if(!1===a.isFunctionParameter(B[1]))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,
g);var f=u;const E=B[1].createFunction(e);return q?p(f,E):f=I(f,(m,v)=>E(m,v))}e=u;if(0===e.length)return[];B={};for(q=0;q<e.length;q++)g=a.getType(e[q]),""!==g&&(B[g]=!0);if(!0===B.Array||!0===B.Dictionary||!0===B.Feature||!0===B.Point||!0===B.Polygon||!0===B.Polyline||!0===B.Multipoint||!0===B.Extent||!0===B.Function)return e.slice(0);q=0;g="";for(f in B)q++,g=f;return e=1<q||"String"===g?I(e,(E,m)=>{if(null===E||void 0===E||E===a.voidOperation)return null===m||void 0===m||m===a.voidOperation?0:
1;if(null===m||void 0===m||m===a.voidOperation)return-1;E=a.toString(E);m=a.toString(m);return E<m?-1:E===m?0:1}):"Number"===g?I(e,(E,m)=>E-m):"Boolean"===g?I(e,(E,m)=>E===m?0:m?-1:1):"Date"===g?I(e,(E,m)=>m-E):e.slice(0)}n.functions.array=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,0,2,e,g);if(0===u.length||1===u.length&&null===u[0])return[];if(a.isArray(u[0])){if(2===u.length&&!1===a.isBoolean(u[1]))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,
g);return!0===a.defaultUndefined(u[1],!1)?L.deepClone(u[0]):u[0].slice(0)}if(a.isImmutableArray(u[0])){if(2===u.length&&!1===a.isBoolean(u[1]))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);return!0===a.defaultUndefined(u[1],!1)?L.deepClone(u[0]):u[0].toArray().slice(0)}B=a.toNumber(u[0]);if(isNaN(B)||!1===a.isInteger(B))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);u=a.defaultUndefined(u[1],null);B=Array(B);B.fill(u);return B})};n.functions.front=
function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,1,1,e,g);if(a.isImmutableArray(u[0])){if(0>=u[0].length())throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);return u[0].get(0)}if(a.isArray(u[0])){if(0>=u[0].length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);return u[0][0]}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.back=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,
1,1,e,g);if(a.isImmutableArray(u[0])){if(0>=u[0].length())throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);return u[0].get(u[0].length()-1)}if(a.isArray(u[0])){if(0>=u[0].length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);return u[0][u[0].length-1]}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.push=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,1,2,e,g);if(a.isArray(u[0]))return u[0][u[0].length]=
u[1],u[0].length;throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.pop=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,1,1,e,g);if(a.isArray(u[0])){if(0>=u[0].length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);B=u[0][u[0].length-1];--u[0].length;return B}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.erase=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,
2,2,e,g);if(a.isArray(u[0])){B=a.toNumber(u[1]);if(isNaN(B)||!1===a.isInteger(B))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);u=u[0];if(0>=u.length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);0>B&&(B=u.length+B);if(0>B)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);if(B>=u.length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);u.splice(B,1);return a.voidOperation}throw new A.ArcadeExecutionError(e,
A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.insert=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,3,3,e,g);if(a.isArray(u[0])){B=a.toNumber(u[1]);if(isNaN(B)||!1===a.isInteger(B))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);q=u[2];u=u[0];if(B>u.length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);if(0>B&&B<-1*u.length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,g);if(B===u.length)return u[B]=
q,a.voidOperation;u.splice(B,0,q);return a.voidOperation}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.resize=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,2,3,e,g);if(a.isArray(u[0])){q=a.toNumber(u[1]);if(isNaN(q)||!1===a.isInteger(q))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);if(0>q)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);B=a.defaultUndefined(u[2],null);u=u[0];
if(u.length>=q)return u.length=q,a.voidOperation;const f=u.length;u.length=q;for(q=f;q<u.length;q++)u[q]=B;return a.voidOperation}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.includes=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,2,2,e,g);if(a.isArray(u[0])){const f=u[1];return-1<u[0].findIndex(E=>a.equalityTest(E,f))?!0:!1}if(a.isImmutableArray(u[0])){const f=u[1];return-1<u[0].toArray().findIndex(E=>a.equalityTest(E,f))?!0:!1}throw new A.ArcadeExecutionError(e,
A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.slice=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,1,3,e,g);if(a.isArray(u[0])){B=a.toNumber(a.defaultUndefined(u[1],0));q=a.toNumber(a.defaultUndefined(u[2],u[0].length));if(isNaN(B)||!1===a.isInteger(B))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);if(isNaN(q)||!1===a.isInteger(q))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);return u[0].slice(B,q)}if(a.isImmutableArray(u[0])){B=
u[0];q=a.toNumber(a.defaultUndefined(u[1],0));u=a.toNumber(a.defaultUndefined(u[2],B.length()));if(isNaN(q)||!1===a.isInteger(q))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);if(isNaN(u)||!1===a.isInteger(u))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);return B.toArray().slice(q,u)}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,g);})};n.functions.splice=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{B=
[];for(q=0;q<u.length;q++)a.isArray(u[q])?B.push(...u[q]):a.isImmutableArray(u[q])?B.push(...u[q].toArray()):B.push(u[q]);return B})};n.functions.top=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,2,2,e,g);if(a.isArray(u[0]))return a.toNumber(u[1])>=u[0].length?u[0].slice(0):u[0].slice(0,a.toNumber(u[1]));if(a.isImmutableArray(u[0]))return a.toNumber(u[1])>=u[0].length()?u[0].slice(0):u[0].slice(0,a.toNumber(u[1]));throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,
g);})};n.functions.first=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,1,1,e,g);return a.isArray(u[0])?0===u[0].length?null:u[0][0]:a.isImmutableArray(u[0])?0===u[0].length()?null:u[0].get(0):null})};"sync"===n.mode&&(n.functions.sort=function(e,g){return n.standardFunction(e,g,(B,q,u)=>z(e,g,u,!1))},n.functions.any=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);u=x(u[0],e,g);for(const f of u)if(u=B(f),a.isBoolean(u)&&!0===u)return!0;
return!1})},n.functions.all=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);u=x(u[0],e,g);for(const f of u)if(!0!==B(f))return!1;return!0})},n.functions.none=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);u=x(u[0],e,g);for(const f of u)if(!0===B(f))return!1;return!0})},n.functions.reduce=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,2,3,e,g);const f=u[1].createFunction(e);B=
x(u[0],e,g);return 2===u.length?0===B.length?null:B.reduce((E,m)=>{E=f(E,m);return E=void 0!==E&&E!==a.voidOperation?E:null}):B.reduce((E,m)=>{E=f(E,m);return E=void 0!==E&&E!==a.voidOperation?E:null},u[2])})},n.functions.map=function(e,g){return n.standardFunction(e,g,(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);q=x(u[0],e,g);u=[];for(const f of q)q=B(f),void 0!==q&&q!==a.voidOperation?u.push(q):u.push(null);return u})},n.functions.filter=function(e,g){return n.standardFunction(e,g,(B,
q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);u=x(u[0],e,g);q=[];for(const f of u)!0===B(f)&&q.push(f);return q})});"async"===n.mode&&(n.functions.sort=function(e,g){return n.standardFunctionAsync(e,g,(B,q,u)=>z(e,g,u,!0))},n.functions.any=function(e,g){return n.standardFunctionAsync(e,g,async(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);u=x(u[0],e,g);for(const f of u)if(u=await B(f),q=null,q=d.isPromiseLike(q)?await u:u,a.isBoolean(q)&&!0===q)return!0;return!1})},n.functions.all=
function(e,g){return n.standardFunctionAsync(e,g,async(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);u=x(u[0],e,g);for(const f of u)if(u=await B(f),q=null,q=d.isPromiseLike(q)?await u:u,!0!==q)return!1;return!0})},n.functions.none=function(e,g){return n.standardFunctionAsync(e,g,async(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);u=x(u[0],e,g);for(const f of u)if(u=await B(f),q=null,q=d.isPromiseLike(q)?await u:u,!0===q)return!1;return!0})},n.functions.filter=function(e,g){return n.standardFunctionAsync(e,
g,async(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);q=x(u[0],e,g);u=[];for(const f of q){q=await B(f);let E=null;E=d.isPromiseLike(E)?await q:q;!0===E&&u.push(f)}return u})},n.functions.reduce=function(e,g){return n.standardFunctionAsync(e,g,(B,q,u)=>{a.pcCheck(u,2,3,e,g);const f=u[1].createFunction(e);B=x(u[0],e,g);q=null;if(2<u.length)u=a.defaultUndefined(u[2],null),q=B.reduce(async(E,m)=>{E=await E;if(void 0===E||E===a.voidOperation)E=null;return f(E,m)},Promise.resolve(u));else{if(0===
B.length)return null;q=B.reduce(async(E,m,v)=>{if(1>=v)return f(E,m);E=await E;if(void 0===E||E===a.voidOperation)E=null;return f(E,m)})}return q.then(E=>void 0!==E&&E!==a.voidOperation?E:null)})},n.functions.map=function(e,g){return n.standardFunctionAsync(e,g,async(B,q,u)=>{a.pcCheck(u,2,2,e,g);B=u[1].createFunction(e);q=x(u[0],e,g);u=[];for(const f of q){q=await B(f);let E=null;E=d.isPromiseLike(E)?await q:q;void 0!==E&&E!==a.voidOperation?u.push(E):u.push(null)}return u})})}const h=Object.freeze(Object.defineProperty({__proto__:null,
registerFunctions:k},Symbol.toStringTag,{value:"Module"}));r.ArrayFunctions=h;r.registerFunctions=k})},"esri/arcade/functions/date":function(){define("exports ../ArcadeDate ../executionError ../../chunks/languageUtils ../../core/sql/DateOnly ../../core/sql/TimeOnly ../../intl/locale ../../chunks/datetime".split(" "),function(r,L,A,c,a,d,k,h){function n(z){return null===z?z:!1===z.isValid?null:z}function x(z,e){return""===z||"default"===z.toLowerCase().trim()?c.defaultTimeZone(e):"z"===z||"Z"===z?
"UTC":z}function I(z,e){return c.isDateOnly(z)?z.toArcadeDate():c.toDate(z,c.defaultTimeZone(e))}const p=[0,31,59,90,120,151,181,212,243,273,304,334],C=[0,31,60,91,121,152,182,213,244,274,305,335];r.registerFunctions=function(z,e){z.today=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,0,0,g,B);q=new Date;q.setHours(0,0,0,0);return L.ArcadeDate.dateJSAndZoneToArcadeDate(q,c.defaultTimeZone(g))})};z.time=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,0,4,g,B);switch(f.length){case 0:return q=L.ArcadeDate.nowToArcadeDate(c.defaultTimeZone(g)),
new d.TimeOnly(q.hour,q.minute,q.second,q.millisecond);case 1:if(c.isTime(f[0]))return f[0].clone();if(c.isDate(f[0]))return new d.TimeOnly(f[0].hour,f[0].minute,f[0].second,f[0].millisecond);if(c.isDateOnly(f[0]))return new d.TimeOnly(0,0,0,0);if(c.isString(f[0]))return d.TimeOnly.fromString(f[0]);q=c.toNumber(f[0]);return!1===isNaN(q)?d.TimeOnly.fromMilliseconds(q):null;case 2:return c.isString(f[0])&&c.isString(f[1])?d.TimeOnly.fromString(f[0],f[1]):d.TimeOnly.fromParts(c.toNumber(f[0]),c.toNumber(f[1]),
0,0);case 3:return d.TimeOnly.fromParts(c.toNumber(f[0]),c.toNumber(f[1]),c.toNumber(f[2]),0);case 4:return d.TimeOnly.fromParts(c.toNumber(f[0]),c.toNumber(f[1]),c.toNumber(f[2]),c.toNumber(f[3]))}throw new A.ArcadeExecutionError(g,A.ExecutionErrorCodes.InvalidParameter,B);})};z.dateonly=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,0,3,g,B);if(3===f.length)return a.DateOnly.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]));if(2===f.length)return q=c.toString(f[1]),""===q?null:"X"===
q?a.DateOnly.fromSeconds(c.toNumber(f[0])):"x"===q?a.DateOnly.fromMilliseconds(c.toNumber(f[0])):a.DateOnly.fromString(c.toString(f[0]),q);if(1===f.length){if(c.isString(f[0])){if(""===f[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(f[0]))return a.DateOnly.fromString(f[0]+"-01-01")}if(c.isDateOnly(f[0]))return f[0].clone();if(c.isDate(f[0]))return a.DateOnly.fromParts(f[0].year,f[0].monthJS+1,f[0].day);q=c.toNumber(f[0]);return!1===isNaN(q)?
a.DateOnly.fromMilliseconds(q):c.isString(f[0])?a.DateOnly.fromString(f[0]):null}return 0===f.length?(f=L.ArcadeDate.nowToArcadeDate(c.defaultTimeZone(g)),!1===f.isValid?null:a.DateOnly.fromParts(f.year,f.monthJS+1,f.day)):null})};z.changetimezone=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,2,2,g,B);if(null===f[0])return null;if(c.isDateOnly(f[0]))throw new A.ArcadeExecutionError(g,A.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly,B);if(c.isDateOnly(f[0]))throw new A.ArcadeExecutionError(g,
A.ExecutionErrorCodes.CannotChangeTimeZoneTime,B);q=c.toDate(f[0],c.defaultTimeZone(g));if(null===q)throw new A.ArcadeExecutionError(g,A.ExecutionErrorCodes.InvalidParameter,B);f=L.createDateTimeZone(x(c.toString(f[1]),g),!1);if(null===f)return null;f=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,f);return!1===f.isValid?null:f})};z.timezone=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,2,g,B);if(c.isTime(f[0])||c.isDateOnly(f[0]))return"Unknown";q=c.toDate(f[0],c.defaultTimeZone(g));if(null===
q)return null;q=q.timeZone;return"system"===q?L.ArcadeDate.systemTimeZoneCanonicalName:"utc"===q.toLowerCase()?"UTC":"unknown"===q.toLowerCase()?"Unknown":q})};z.timezoneoffset=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=c.toDate(f[0],c.defaultTimeZone(g));return null===q?null:6E4*q.timeZoneOffset})};z.now=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,0,0,g,B);q=L.ArcadeDate.nowToArcadeDate(c.defaultTimeZone(g));return!1===q.isValid?null:q})};z.timestamp=function(g,B){return e(g,
B,(q,u,f)=>{c.pcCheck(f,0,0,g,B);q=L.ArcadeDate.nowUTCToArcadeDate();return!1===q.isValid?null:q})};z.toutc=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=c.toDate(f[0],c.defaultTimeZone(g));return null===q?null:q.toUTC()})};z.tolocal=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=c.toDate(f[0],c.defaultTimeZone(g));return null===q?null:q.toLocal()})};z.day=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=I(f[0],c.defaultTimeZone(g));return null===q?NaN:q.day})};
z.month=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=I(f[0],c.defaultTimeZone(g));return null===q?NaN:q.monthJS})};z.year=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=I(f[0],c.defaultTimeZone(g));return null===q?NaN:q.year})};z.hour=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);if(c.isTime(f[0]))return f[0].hour;q=c.toDate(f[0],c.defaultTimeZone(g));return null===q?NaN:q.hour})};z.second=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);if(c.isTime(f[0]))return f[0].second;
q=c.toDate(f[0],c.defaultTimeZone(g));return null===q?NaN:q.second})};z.millisecond=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);if(c.isTime(f[0]))return f[0].millisecond;q=c.toDate(f[0],c.defaultTimeZone(g));return null===q?NaN:q.millisecond})};z.minute=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);if(c.isTime(f[0]))return f[0].minute;q=c.toDate(f[0],c.defaultTimeZone(g));return null===q?NaN:q.minute})};z.week=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,2,g,B);u=I(f[0],
c.defaultTimeZone(g));if(null===u)return NaN;f=c.toNumber(c.defaultUndefined(f[1],0));if(0>f||6<f)throw new A.ArcadeExecutionError(g,A.ExecutionErrorCodes.InvalidParameter,B);q=u.dayOfWeekJS;var E=u.year;u=u.day+(0!==E%4||0===E%100&&0!==E%400?p:C)[u.monthJS]-1;E=Math.floor(u/7);return q-f+(0>q-f?7:0)<u-7*E?E+1:E})};z.weekday=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=I(f[0],c.defaultTimeZone(g));return null===q?NaN:q.dayOfWeekJS})};z.isoweekday=function(g,B){return e(g,B,(q,u,f)=>
{c.pcCheck(f,1,1,g,B);q=I(f[0],c.defaultTimeZone(g));return null===q?NaN:q.dayOfWeekISO})};z.isomonth=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=I(f[0],c.defaultTimeZone(g));return null===q?NaN:q.monthISO})};z.isoweek=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=I(f[0],c.defaultTimeZone(g));return null===q?NaN:q.weekISO})};z.isoyear=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,1,1,g,B);q=I(f[0],c.defaultTimeZone(g));return null===q?NaN:q.yearISO})};z.date=function(g,
B){return e(g,B,(q,u,f)=>{c.pcCheck(f,0,8,g,B);if(3===f.length)return c.isDateOnly(f[0])&&c.isTime(f[1])&&c.isString(f[2])?(q=L.createDateTimeZone(x(c.toString(f[2])??"unknown",g),!1),null===q?null:n(L.ArcadeDate.fromParts(f[0].year,f[0].month,f[0].day,f[1].hour,f[1].minute,f[1].second,f[1].millisecond,q))):n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),0,0,0,0,c.defaultTimeZone(g)));if(4===f.length)return n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,
c.toNumber(f[2]),c.toNumber(f[3]),0,0,0,c.defaultTimeZone(g)));if(5===f.length)return n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),c.toNumber(f[3]),c.toNumber(f[4]),0,0,c.defaultTimeZone(g)));if(6===f.length)return n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),c.toNumber(f[3]),c.toNumber(f[4]),c.toNumber(f[5]),0,c.defaultTimeZone(g)));if(7===f.length)return n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),
c.toNumber(f[3]),c.toNumber(f[4]),c.toNumber(f[5]),c.toNumber(f[6]),c.defaultTimeZone(g)));if(8===f.length)return q=L.createDateTimeZone(x(c.toString(f[7])??"unknown",g),!1),null===q?null:n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),c.toNumber(f[3]),c.toNumber(f[4]),c.toNumber(f[5]),c.toNumber(f[6]),q));if(2===f.length){if(c.isDateOnly(f[0])&&c.isString(f[1]))return q=L.createDateTimeZone(x(c.toString(f[1])??"unknown",g),!1),null===q?null:n(L.ArcadeDate.fromParts(f[0].year,
f[0].month,f[0].day,0,0,0,0,q));if(c.isDateOnly(f[0])&&c.isTime(f[1]))return n(L.ArcadeDate.fromParts(f[0].year,f[0].month,f[0].day,f[1].hour,f[1].minute,f[1].second,f[1].millisecond,"unknown"));q=c.toString(f[1]);if(""===q)return null;q=c.standardiseDateFormat(q,!0);f="X"===q?h.DateTime.fromSeconds(c.toNumber(f[0])):"x"===q?h.DateTime.fromMillis(c.toNumber(f[0])):h.DateTime.fromFormat(c.toString(f[0]),q,{locale:k.getLocale(),numberingSystem:"latn"});return f.isValid?L.ArcadeDate.dateTimeToArcadeDate(f):
null}if(1===f.length){if(c.isDateOnly(f[0]))return n(L.ArcadeDate.fromParts(f[0].year,f[0].month,f[0].day,0,0,0,0,"unknown"));if(c.isString(f[0])){if(""===f[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(f[0]))return c.toDate(f[0]+"-01-01",c.defaultTimeZone(g))}q=c.toNumber(f[0]);return!1===isNaN(q)?(f=h.DateTime.fromMillis(q),f.isValid?L.ArcadeDate.dateTimeAndZoneToArcadeDate(f,c.defaultTimeZone(g)):null):c.toDate(f[0],c.defaultTimeZone(g))}return 0===
f.length?L.ArcadeDate.nowToArcadeDate(c.defaultTimeZone(g)):null})};z.datediff=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,2,4,g,B);if(c.isTime(f[0]))return c.isTime(f[1])?f[0].difference(f[1],c.toString(f[2])):NaN;if(c.isTime(f[1]))return NaN;if(c.isDateOnly(f[0]))return c.isDateOnly(f[1])?f[0].difference(f[1],c.toString(f[2])):NaN;if(c.isDateOnly(f[1]))return NaN;q=c.toDate(f[0],c.defaultTimeZone(g));u=c.toDate(f[1],c.defaultTimeZone(g));if(null===q||null===u)return NaN;let E=c.defaultUndefined(f[3],
"");""!==E&&null!==E?(E=x(c.toString(E),g),q=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,E),u=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(u,E)):q.timeZone!==u.timeZone&&(q.isUnknownTimeZone?q=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,u.timeZone):u=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(u,q.timeZone));switch(c.toString(f[2]).toLowerCase()){case "days":case "day":case "d":return q.diff(u,"days");case "months":case "month":return q.diff(u,"months");case "minutes":case "minute":case "m":return"M"===
f[2]?q.diff(u,"months"):q.diff(u,"minutes");case "seconds":case "second":case "s":return q.diff(u,"seconds");case "milliseconds":case "millisecond":case "ms":return q.diff(u);case "hours":case "hour":case "h":return q.diff(u,"hours");case "years":case "year":case "y":return q.diff(u,"years");default:return q.diff(u)}})};z.dateadd=function(g,B){return e(g,B,(q,u,f)=>{c.pcCheck(f,2,3,g,B);q=c.toNumber(f[1]);if(isNaN(q)||Infinity===q||-Infinity===q)return c.isTime(f[0])||c.isDateOnly(f[0])?f[0].clone():
c.toDate(f[0],c.defaultTimeZone(g));u="milliseconds";switch(c.toString(f[2]).toLowerCase()){case "days":case "day":case "d":u="days";q=c.isDateOnly(f[0])?q:c.absRound(q);break;case "months":case "month":u="months";q=c.isDateOnly(f[0])?q:c.absRound(q);break;case "minutes":case "minute":case "m":u="M"===f[2]?"months":"minutes";break;case "seconds":case "second":case "s":u="seconds";break;case "milliseconds":case "millisecond":case "ms":u="milliseconds";break;case "hours":case "hour":case "h":u="hours";
break;case "years":case "year":case "y":u="years"}if(c.isTime(f[0])||c.isDateOnly(f[0]))return f[0].plus(u,q);f=c.toDate(f[0],c.defaultTimeZone(g));return null===f?null:f.plus({[u]:q})})}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geometry":function(){define("exports ../Dictionary ../executionError ../Feature ../ImmutablePathArray ../ImmutablePointArray ../../chunks/languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/coordsUtils ../../geometry/support/jsonUtils".split(" "),
function(r,L,A,c,a,d,k,h,n,x,I,p,C,z,e,g){function B(f){return f&&"esri.arcade.Feature"===f.arcadeDeclaredClass}function q(f,E,m,v,t=1){E=E.toLowerCase();switch(E){case "hasz":return f=f.hasZ,void 0===f?!1:f;case "hasm":return f=f.hasM,void 0===f?!1:f;case "spatialreference":return E=f.spatialReference._arcadeCacheId,void 0===E&&(m=!0,Object.freeze&&Object.isFrozen(f.spatialReference)&&(m=!1),m&&(u++,E=f.spatialReference._arcadeCacheId=u)),f=new L({wkt:f.spatialReference.wkt,wkid:f.spatialReference.wkid}),
void 0!==E&&(f._arcadeCacheId="SPREF"+E.toString()),f}switch(f.type){case "extent":switch(E){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return f=f[E],void 0!==f?f:null;case "type":return"Extent"}break;case "polygon":switch(E){case "rings":return E=f.cache._arcadeCacheId,void 0===E&&(u++,E=u,f.cache._arcadeCacheId=E),new a(f.rings,f.spatialReference,!0===f.hasZ,!0===f.hasM,E);case "type":return"Polygon"}break;case "point":switch(E){case "x":case "y":case "z":case "m":return void 0!==
f[E]?f[E]:null;case "type":return"Point"}break;case "polyline":switch(E){case "paths":return E=f.cache._arcadeCacheId,void 0===E&&(u++,E=u,f.cache._arcadeCacheId=E),new a(f.paths,f.spatialReference,!0===f.hasZ,!0===f.hasM,E);case "type":return"Polyline"}break;case "multipoint":switch(E){case "points":return E=f.cache._arcadeCacheId,void 0===E&&(u++,E=u,f.cache._arcadeCacheId=E),new d(f.points,f.spatialReference,!0===f.hasZ,!0===f.hasM,E,1);case "type":return"Multipoint"}}if(1===t)throw new A.ArcadeExecutionError(m,
A.ExecutionErrorCodes.InvalidIdentifier,v);return 2===t?{keystate:"notfound"}:null}let u=0;r.geometryMember=q;r.registerFunctions=function(f,E){f.ringisclockwise=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,1,1,m,v);t=[];if(null===b[0])return!1;if(k.isArray(b[0]))for(const R of b[0])if(R instanceof p)t.push(R.hasZ?R.hasM?[R.x,R.y,R.z,R.m]:[R.x,R.y,R.z]:[R.x,R.y]);else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);else if(b[0]instanceof d)t=b[0]._elements;else if(k.isImmutableArray(b[0]))for(const R of b[0].toArray())if(R instanceof
p)t.push(R.hasZ?R.hasM?[R.x,R.y,R.z,R.m]:[R.x,R.y,R.z]:[R.x,R.y]);else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);return 3>t.length?!1:e.isClockwise(t)})};f.polygon=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,1,1,m,v);t=null;if(b[0]instanceof L){if(t=k.fixSpatialReference(c.parseGeometryFromDictionary(b[0]),m.spatialReference),!1===t instanceof C)throw new A.ArcadeExecutionError(m,
A.ExecutionErrorCodes.InvalidParameter,v);}else t=b[0]instanceof C?g.fromJSON(b[0].toJSON()):k.fixSpatialReference(new C(JSON.parse(b[0])),m.spatialReference);if(null!==t&&!1===t.spatialReference.equals(m.spatialReference))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.WrongSpatialReference,v);return k.fixNullGeometry(t)})};f.polyline=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,1,1,m,v);t=null;if(b[0]instanceof L){if(t=k.fixSpatialReference(c.parseGeometryFromDictionary(b[0]),m.spatialReference),
!1===t instanceof z)throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);}else t=b[0]instanceof z?g.fromJSON(b[0].toJSON()):k.fixSpatialReference(new z(JSON.parse(b[0])),m.spatialReference);if(null!==t&&!1===t.spatialReference.equals(m.spatialReference))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.WrongSpatialReference,v);return k.fixNullGeometry(t)})};f.point=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,1,1,m,v);t=null;if(b[0]instanceof L){if(t=k.fixSpatialReference(c.parseGeometryFromDictionary(b[0]),
m.spatialReference),!1===t instanceof p)throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);}else t=b[0]instanceof p?g.fromJSON(b[0].toJSON()):k.fixSpatialReference(new p(JSON.parse(b[0])),m.spatialReference);if(null!==t&&!1===t.spatialReference.equals(m.spatialReference))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.WrongSpatialReference,v);return k.fixNullGeometry(t)})};f.multipoint=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,1,1,m,v);t=null;if(b[0]instanceof
L){if(t=k.fixSpatialReference(c.parseGeometryFromDictionary(b[0]),m.spatialReference),!1===t instanceof I)throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);}else t=b[0]instanceof I?g.fromJSON(b[0].toJSON()):k.fixSpatialReference(new I(JSON.parse(b[0])),m.spatialReference);if(null!==t&&!1===t.spatialReference.equals(m.spatialReference))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.WrongSpatialReference,v);return k.fixNullGeometry(t)})};f.extent=function(m,v){return E(m,
v,(t,M,b)=>{b=k.autoCastFeatureToGeometry(b);k.pcCheck(b,1,1,m,v);t=null;b[0]instanceof L?t=k.fixSpatialReference(c.parseGeometryFromDictionary(b[0]),m.spatialReference):b[0]instanceof p?(t={xmin:b[0].x,ymin:b[0].y,xmax:b[0].x,ymax:b[0].y,spatialReference:b[0].spatialReference.toJSON()},b=b[0],b.hasZ?(t.zmin=b.z,t.zmax=b.z):b.hasM&&(t.mmin=b.m,t.mmax=b.m),t=g.fromJSON(t)):t=b[0]instanceof C?g.fromJSON(b[0].extent?.toJSON()):b[0]instanceof z?g.fromJSON(b[0].extent?.toJSON()):b[0]instanceof I?g.fromJSON(b[0].extent?.toJSON()):
b[0]instanceof n?g.fromJSON(b[0].toJSON()):k.fixSpatialReference(new n(JSON.parse(b[0])),m.spatialReference);if(null!==t&&!1===t.spatialReference.equals(m.spatialReference))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.WrongSpatialReference,v);return k.fixNullGeometry(t)})};f.geometry=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,1,1,m,v);t=null;if(null===b[0])return null;t=B(b[0])?k.fixSpatialReference(b[0].geometry(),m.spatialReference):b[0]instanceof L?k.fixSpatialReference(c.parseGeometryFromDictionary(b[0]),
m.spatialReference):k.fixSpatialReference(g.fromJSON(JSON.parse(b[0])),m.spatialReference);if(null!==t&&!1===t.spatialReference.equals(m.spatialReference))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.WrongSpatialReference,v);return k.fixNullGeometry(t)})};f.setgeometry=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,2,2,m,v);if(B(b[0])){if(!0===b[0].immutable)throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.Immutable,v);if(b[1]instanceof x||null===b[1])b[0]._geometry=b[1];else throw new A.ArcadeExecutionError(m,
A.ExecutionErrorCodes.InvalidParameter,v);}else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);return k.voidOperation})};f.feature=function(m,v){return E(m,v,(t,M,b)=>{if(0===b.length)throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.WrongNumberOfParameters,v);t=null;if(1===b.length)if(k.isString(b[0]))t=c.fromJson(JSON.parse(b[0]),m.timeZone);else if(B(b[0]))t=c.createFromArcadeFeature(b[0]);else if(b[0]instanceof x)t=c.createFromGraphicLikeObject(b[0],null,null,
m.timeZone);else if(b[0]instanceof L)t=b[0].hasField("geometry")?b[0].field("geometry"):null,b=b[0].hasField("attributes")?b[0].field("attributes"):null,null!==t&&t instanceof L&&(t=c.parseGeometryFromDictionary(t)),null!==b&&(b=c.parseAttributesFromDictionary(b)),t=c.createFromGraphicLikeObject(t,b,null,m.timeZone);else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);else if(2===b.length){M=t=null;if(null!==b[0])if(b[0]instanceof x)t=b[0];else if(t instanceof L)t=c.parseGeometryFromDictionary(b[0]);
else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);if(null!==b[1])if(b[1]instanceof L)M=c.parseAttributesFromDictionary(b[1]);else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);t=c.createFromGraphicLikeObject(t,M,null,m.timeZone)}else{t=null;M={};if(null!==b[0])if(b[0]instanceof x)t=b[0];else if(t instanceof L)t=c.parseGeometryFromDictionary(b[0]);else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);for(let R=
1;R<b.length;R+=2){const Y=k.toString(b[R]),ca=b[R+1];if(null===ca||void 0===ca||k.isString(ca)||isNaN(ca)||k.isDate(ca)||k.isNumber(ca)||k.isTime(ca)||k.isDateOnly(ca)||k.isBoolean(ca)){if(k.isFunctionParameter(ca)||!1===k.isSimpleType(ca))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);M[Y]=ca===k.voidOperation?null:ca}else throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);}t=c.createFromGraphicLikeObject(t,M,null,m.timeZone)}t._geometry=k.fixSpatialReference(t.geometry(),
m.spatialReference);t.immutable=!1;return t})};f.dictionary=function(m,v){return E(m,v,(t,M,b)=>{if(0===b.length||1===b.length&&null===b[0])return b=new L,b.immutable=!1,b;if(1===b.length&&k.isString(b[0]))try{var R=JSON.parse(b[0]),Y=L.convertObjectToArcadeDictionary(R,k.defaultTimeZone(m),!1);Y.immutable=!1;return Y}catch(ca){throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);}if(1===b.length&&b[0]instanceof x)try{const ca=b[0].toJSON();ca.hasZ=!0===b[0].hasZ;ca.hasM=!0===
b[0].hasM;const oa=L.convertObjectToArcadeDictionary(ca,k.defaultTimeZone(m),!1);oa.immutable=!1;return oa}catch(ca){throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);}if(1===b.length&&k.isFeature(b[0]))try{const ca=new L;ca.immutable=!1;ca.setField("geometry",b[0].geometry());const oa=new L;oa.immutable=!1;ca.setField("attributes",oa);for(const na of b[0].keys())oa.setField(na,b[0].field(na));return ca}catch(ca){throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,
v);}if(1===b.length&&b[0]instanceof L)try{const ca=new L;ca.immutable=!1;for(const oa of b[0].keys())ca.setField(oa,b[0].field(oa));return ca}catch(ca){throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);}if(2===b.length&&b[0]instanceof L&&k.isBoolean(b[1]))try{if(!0!==b[1]){const ca=new L;ca.immutable=!1;for(const oa of b[0].keys())ca.setField(oa,b[0].field(oa));return ca}return b[0].deepClone()}catch(ca){throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,
v);}if(0!==b.length%2)throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.WrongNumberOfParameters,v);t={};for(M=0;M<b.length;M+=2)if(R=k.toString(b[M]),Y=b[M+1],null===Y||void 0===Y||k.isString(Y)||isNaN(Y)||k.isDate(Y)||k.isNumber(Y)||k.isBoolean(Y)||k.isDateOnly(Y)||k.isTime(Y)||k.isArray(Y)||k.isImmutableArray(Y)){if(k.isFunctionParameter(Y))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);t[R]=Y===k.voidOperation?null:Y}else throw new A.ArcadeExecutionError(m,
A.ExecutionErrorCodes.InvalidParameter,v);b=new L(t);b.immutable=!1;return b})};f.haskey=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,2,2,m,v);t=k.toString(b[1]);if(B(b[0])||b[0]instanceof L)return b[0].hasField(t);if(b[0]instanceof x)return(b=q(b[0],t,null,null,2))&&"notfound"===b.keystate?!1:!0;throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);})};f.hasvalue=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,2,2,m,v);if(null===b[0]||null===b[1])return!1;t=k.toString(b[1]);
return k.isFeature(b[0])||b[0]instanceof L?b[0].hasField(t)&&null!==b[0].field(t)?!0:!1:b[0]instanceof x?null===q(b[0],t,null,null,0)?!1:!0:!1})};f.indexof=function(m,v){return E(m,v,(t,M,b)=>{k.pcCheck(b,2,2,m,v);t=b[1];if(k.isArray(b[0])){for(M=0;M<b[0].length;M++)if(k.equalityTest(t,b[0][M]))return M;return-1}if(k.isImmutableArray(b[0])){M=b[0].length();for(let R=0;R<M;R++)if(k.equalityTest(t,b[0].get(R)))return R;return-1}throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,
v);})};f.angle=function(m,v){return E(m,v,(t,M,b)=>{b=k.autoCastFeatureToGeometry(b);k.pcCheck(b,2,3,m,v);if(!(b[0]instanceof p))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);if(!(b[1]instanceof p))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);if(2<b.length&&!(b[2]instanceof p))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);return 2===b.length?h.angle2D(b[0],b[1]):h.angleBetween2D(b[0],b[1],b[2])})};f.bearing=
function(m,v){return E(m,v,(t,M,b)=>{b=k.autoCastFeatureToGeometry(b);k.pcCheck(b,2,3,m,v);if(!(b[0]instanceof p))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);if(!(b[1]instanceof p))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);if(2<b.length&&!(b[2]instanceof p))throw new A.ArcadeExecutionError(m,A.ExecutionErrorCodes.InvalidParameter,v);return 2===b.length?h.bearing2D(b[0],b[1]):h.bearingBetween2D(b[0],b[1],b[2])})};f.isselfintersecting=
function(m,v){return E(m,v,(t,M,b)=>{b=k.autoCastFeatureToGeometry(b);k.pcCheck(b,1,1,m,v);t=b[0];if(t instanceof C)return t.isSelfIntersecting;if(t instanceof z)return t=t.paths,h.pathsSelfIntersecting(t);if(t instanceof I)for(M=t.points,b=0;b<M.length;b++)for(let R=0;R<M.length;R++)if(R!==b){let Y=!0;for(let ca=0;ca<M[b].length;ca++)if(M[b][ca]!==M[R][ca]){Y=!1;break}if(!0===Y)return!0}return k.isArray(t)||k.isImmutableArray(t)?(t=k.autoCastArrayOfPointsToPolyline(t,m.spatialReference),null!==t&&
(t=t.paths),h.pathsSelfIntersecting(t)):!1})}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/centroid":function(){define(["exports","../../core/mathUtils","../../geometry/Point","../../geometry/support/intersectsBase"],function(r,L,A,c){function a(C,z,e){const g={x:0,y:0};z&&(g.z=0);e&&(g.m=0);let B=0;var q=C[0];for(let v=0;v<C.length;v++){const t=C[v];a:if(t.length!==q.length)var u=!1;else{for(u=0;u<t.length;u++)if(t[u]!==q[u]){u=!1;break a}u=!0}if(!1===u){u=
d(q,t,z);var f=t,E=z,m=e;const M={x:(q[0]+f[0])/2,y:(q[1]+f[1])/2};E&&(M.z=(q[2]+f[2])/2);E&&m?M.m=(q[3]+f[3])/2:m&&(M.m=(q[2]+f[2])/2);q=M;q.x*=u;q.y*=u;g.x+=q.x;g.y+=q.y;z&&(q.z*=u,g.z+=q.z);e&&(q.m*=u,g.m+=q.m);B+=u;q=t}}0<B?(g.x/=B,g.y/=B,z&&(g.z/=B),e&&(g.m/=B)):(g.x=C[0][0],g.y=C[0][1],z&&(g.z=C[0][2]),e&&z?g.m=C[0][3]:e&&(g.m=C[0][2]));return g}function d(C,z,e){const g=z[0]-C[0];C=z[1]-C[1];return e?(z=z[2]-z[2],Math.sqrt(g*g+C*C+z*z)):Math.sqrt(g*g+C*C)}function k(C,z,e=0){for(;C<e;)C+=z;
for(e+=z;C>=e;)C-=z;return C}function h(C,z){return Math.atan2(z.y-C.y,z.x-C.x)}function n(C,z,e){var g=C.x-z.x;C=C.y-z.y;var B=e.x-z.x;z=e.y-z.y;return Math.atan2(g*z-B*C,g*B+C*z)}const x=[];for(const C of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const z=C[0];for(let e=1;e<C.length;e++)x[C[e]]=z}const I=[];I[9002]=.3048;I[9003]=.3048006096012192;I[9095]=.3048007491;const p=[0,0];r.angle2D=function(C,z){return k(h(C,z),2*Math.PI)*(180/Math.PI)};r.angleBetween2D=
function(C,z,e){return L.rad2deg(k(n(C,z,e),2*Math.PI))};r.angleBetweenRad=n;r.angleRad=h;r.bearing2D=function(C,z){return k(Math.PI/2-h(C,z),2*Math.PI)*(180/Math.PI)};r.bearingBetween2D=function(C,z,e){return L.rad2deg(k(-1*n(C,z,e),2*Math.PI))};r.centroidMultiPoint=function(C){if(0===C.points.length)return null;var z=0;let e=0,g=0,B=0;for(let q=0;q<C.points.length;q++){const u=C.getPoint(q);!0===u.hasZ&&(g+=u.z);!0===u.hasM&&(B+=u.m);z+=u.x;e+=u.y;B+=u.m}z={x:z/C.points.length,y:e/C.points.length,
spatialReference:null};z.spatialReference=C.spatialReference.toJSON();!0===C.hasZ&&(z.z=g/C.points.length);!0===C.hasM&&(z.m=B/C.points.length);return new A(z)};r.centroidPolyline=function(C){const z={x:0,y:0,spatialReference:C.spatialReference.toJSON()},e={x:0,y:0,spatialReference:C.spatialReference.toJSON()};let g=0,B=0;for(let f=0;f<C.paths.length;f++)if(0!==C.paths[f].length){a:{var q=C.paths[f];var u=!0===C.hasZ;if(1>=q.length){q=0;break a}let E=0;for(let m=1;m<q.length;m++)E+=d(q[m-1],q[m],
u);q=E}0===q?(q=a(C.paths[f],!0===C.hasZ,!0===C.hasM),z.x+=q.x,z.y+=q.y,!0===C.hasZ&&(z.z+=q.z),!0===C.hasM&&(z.m+=q.m),++g):(u=a(C.paths[f],!0===C.hasZ,!0===C.hasM),e.x+=u.x*q,e.y+=u.y*q,!0===C.hasZ&&(e.z+=u.z*q),!0===C.hasM&&(e.m+=u.m*q),B+=q)}return 0<B?(e.x/=B,e.y/=B,!0===C.hasZ&&(e.z/=B),!0===C.hasM&&(e.m/=B),new A(e)):0<g?(z.x/=g,z.y/=g,!0===C.hasZ&&(e.z/=g),!0===C.hasM&&(z.m/=g),new A(z)):null};r.getMetersPerVerticalUnitForSR=function(C){return C.vcsWkid&&void 0!==x[C.vcsWkid]?I[x[C.vcsWkid]]:
C.latestVcsWkid&&void 0!==x[C.latestVcsWkid]?I[x[C.latestVcsWkid]]:1};r.pathsSelfIntersecting=function(C){for(let E=0;E<C.length;E++){const m=C[E];for(var z=0;z<m.length-1;z++){var e=m[z],g=m[z+1];for(var B=E+1;B<C.length;B++)for(var q=0;q<C[B].length-1;q++){var u=C[B][q],f=C[B][q+1];if(c.segmentIntersects(e,g,u,f,p)&&!(p[0]===e[0]&&p[1]===e[1]||p[0]===u[0]&&p[1]===u[1]||p[0]===g[0]&&p[1]===g[1]||p[0]===f[0]&&p[1]===f[1]))return!0}}z=m.length;if(!(3>z))for(e=0;e<=z-2;e++)for(g=m[e],B=m[e+1],q=e+2;q<=
z-2;q++)if(u=m[q],f=m[q+1],c.segmentIntersects(g,B,u,f,p)&&!(p[0]===g[0]&&p[1]===g[1]||p[0]===u[0]&&p[1]===u[1]||p[0]===B[0]&&p[1]===B[1]||p[0]===f[0]&&p[1]===f[1]))return!0}return!1};r.segmentLength3d=function(C,z,e){return Math.sqrt((C[0]-z[0])**2+(C[1]-z[1])**2+(void 0!==C[2]&&void 0!==z[2]?(C[2]*e-z[2]*e)**2:0))};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geomsync":function(){define("exports ../../kernel ../Dictionary ../executionError ../kernel ../../chunks/languageUtils ./centroid ../../core/unitUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(r,L,A,c,a,d,k,h,n,x,I,p,C,z,e){function g(u){return 0===L.version.indexOf("4.")?C.fromExtent(u):new C({spatialReference:u.spatialReference,rings:[[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]]})}function B(u,f){if("polygon"!==u.type&&"polyline"!==u.type&&"extent"!==u.type)return 0;var E=1;if(u.spatialReference.vcsWkid||u.spatialReference.latestVcsWkid){E=k.getMetersPerVerticalUnitForSR(u.spatialReference);var m=h.getMetersPerUnitForSR(u.spatialReference);
E/=m}m=0;if("polyline"===u.type)for(var v of u.paths)for(var t=1;t<v.length;t++)m+=k.segmentLength3d(v[t],v[t-1],E);else if("polygon"===u.type)for(t of u.rings){for(v=1;v<t.length;v++)m+=k.segmentLength3d(t[v],t[v-1],E);if(t[0][0]!==t[t.length-1][0]||t[0][1]!==t[t.length-1][1]||void 0!==t[0][2]&&t[0][2]!==t[t.length-1][2])m+=k.segmentLength3d(t[0],t[t.length-1],E)}else"extent"===u.type&&(m+=2*k.segmentLength3d([u.xmin,u.ymin,0],[u.xmax,u.ymin,0],E),m+=2*k.segmentLength3d([u.xmin,u.ymin,0],[u.xmin,
u.ymax,0],E),m=2*m+4*Math.abs(d.defaultUndefined(u.zmax,0)*E-d.defaultUndefined(u.zmin,0)*E));u=new z({hasZ:!1,hasM:!1,spatialReference:u.spatialReference,paths:[[0,0],[0,m]]});return q.planarLength(u,f)}let q=null;r.registerFunctions=function(u,f){function E(m,v,t){d.pcCheck(t,2,2,m,v);if(!(t[0]instanceof x&&t[1]instanceof x||t[0]instanceof x&&null===t[1]||t[1]instanceof x&&null===t[0]||null===t[0]&&null===t[1]))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);}u.disjoint=
function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null===b[0]||null===b[1]?!0:q.disjoint(b[0],b[1])})};u.intersects=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null===b[0]||null===b[1]?!1:q.intersects(b[0],b[1])})};u.touches=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null===b[0]||null===b[1]?!1:q.touches(b[0],b[1])})};u.crosses=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);
E(m,v,b);return null===b[0]||null===b[1]?!1:q.crosses(b[0],b[1])})};u.within=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null===b[0]||null===b[1]?!1:q.within(b[0],b[1])})};u.contains=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null===b[0]||null===b[1]?!1:q.contains(b[0],b[1])})};u.overlaps=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null===b[0]||null===b[1]?!1:q.overlaps(b[0],
b[1])})};u.equals=function(m,v){return f(m,v,(t,M,b)=>{d.pcCheck(b,2,2,m,v);return b[0]===b[1]?!0:b[0]instanceof x&&b[1]instanceof x?q.equals(b[0],b[1]):d.isDate(b[0])&&d.isDate(b[1])||d.isTime(b[0])&&d.isTime(b[1])||d.isDateOnly(b[0])&&d.isDateOnly(b[1])?b[0].equals(b[1]):!1})};u.relate=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,3,3,m,v);if(b[0]instanceof x&&b[1]instanceof x)return q.relate(b[0],b[1],d.toString(b[2]));if(b[0]instanceof x&&null===b[1]||b[1]instanceof
x&&null===b[0]||null===b[0]&&null===b[1])return!1;throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);})};u.intersection=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null===b[0]||null===b[1]?null:q.intersect(b[0],b[1])})};u.union=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);t=[];if(0===b.length)throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.WrongNumberOfParameters,v);if(1===b.length)if(d.isArray(b[0]))for(b=
d.autoCastFeatureToGeometry(b[0]),M=0;M<b.length;M++){if(null!==b[M]){if(!(b[M]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);t.push(b[M])}}else if(d.isImmutableArray(b[0]))for(b=d.autoCastFeatureToGeometry(b[0].toArray()),M=0;M<b.length;M++){if(null!==b[M]){if(!(b[M]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);t.push(b[M])}}else{if(b[0]instanceof x)return d.fixSpatialReference(a.cloneGeometry(b[0]),m.spatialReference);
if(null===b[0])return null;throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);}else for(M=0;M<b.length;M++)if(null!==b[M]){if(!(b[M]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);t.push(b[M])}return 0===t.length?null:q.union(t)})};u.difference=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null!==b[0]&&null===b[1]?a.cloneGeometry(b[0]):null===b[0]?null:q.difference(b[0],b[1])})};u.symmetricdifference=
function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);E(m,v,b);return null===b[0]&&null===b[1]?null:null===b[0]?a.cloneGeometry(b[1]):null===b[1]?a.cloneGeometry(b[0]):q.symmetricDifference(b[0],b[1])})};u.clip=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,2,m,v);if(!(b[1]instanceof n)&&null!==b[1])throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(null===b[0])return null;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,
c.ExecutionErrorCodes.InvalidParameter,v);return null===b[1]?null:q.clip(b[0],b[1])})};u.cut=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,2,m,v);if(!(b[1]instanceof z)&&null!==b[1])throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(null===b[0])return[];if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return null===b[1]?[a.cloneGeometry(b[0])]:q.cut(b[0],b[1])})};u.area=function(m,
v){return f(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);b=d.autoCastFeatureToGeometry(b);if(null===b[0])return 0;if(d.isArray(b[0])||d.isImmutableArray(b[0]))return t=d.autoCastArrayOfPointsToPolygon(b[0],m.spatialReference),null===t?0:q.planarArea(t,a.convertSquareUnitsToCode(d.defaultUndefined(b[1],-1)));if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.planarArea(b[0],a.convertSquareUnitsToCode(d.defaultUndefined(b[1],-1)))})};u.areageodetic=function(m,
v){return f(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);b=d.autoCastFeatureToGeometry(b);if(null===b[0])return 0;if(d.isArray(b[0])||d.isImmutableArray(b[0]))return t=d.autoCastArrayOfPointsToPolygon(b[0],m.spatialReference),null===t?0:q.geodesicArea(t,a.convertSquareUnitsToCode(d.defaultUndefined(b[1],-1)));if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.geodesicArea(b[0],a.convertSquareUnitsToCode(d.defaultUndefined(b[1],-1)))})};u.length=function(m,
v){return f(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);b=d.autoCastFeatureToGeometry(b);if(null===b[0])return 0;if(d.isArray(b[0])||d.isImmutableArray(b[0]))return t=d.autoCastArrayOfPointsToPolyline(b[0],m.spatialReference),null===t?0:q.planarLength(t,a.convertLinearUnitsToCode(d.defaultUndefined(b[1],-1)));if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.planarLength(b[0],a.convertLinearUnitsToCode(d.defaultUndefined(b[1],-1)))})};u.length3d=function(m,
v){return f(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);b=d.autoCastFeatureToGeometry(b);if(null===b[0])return 0;if(d.isArray(b[0])||d.isImmutableArray(b[0]))return t=d.autoCastArrayOfPointsToPolyline(b[0],m.spatialReference),null===t?0:!0===t.hasZ?B(t,a.convertLinearUnitsToCode(d.defaultUndefined(b[1],-1))):q.planarLength(t,a.convertLinearUnitsToCode(d.defaultUndefined(b[1],-1)));if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return!0===b[0].hasZ?B(b[0],
a.convertLinearUnitsToCode(d.defaultUndefined(b[1],-1))):q.planarLength(b[0],a.convertLinearUnitsToCode(d.defaultUndefined(b[1],-1)))})};u.lengthgeodetic=function(m,v){return f(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);b=d.autoCastFeatureToGeometry(b);if(null===b[0])return 0;if(d.isArray(b[0])||d.isImmutableArray(b[0]))return t=d.autoCastArrayOfPointsToPolyline(b[0],m.spatialReference),null===t?0:q.geodesicLength(t,a.convertLinearUnitsToCode(d.defaultUndefined(b[1],-1)));if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,
c.ExecutionErrorCodes.InvalidParameter,v);return q.geodesicLength(b[0],a.convertLinearUnitsToCode(d.defaultUndefined(b[1],-1)))})};u.distance=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,3,m,v);t=b[0];if(d.isArray(b[0])||d.isImmutableArray(b[0]))t=d.autoCastArrayOfPointsToMultiPoint(b[0],m.spatialReference);M=b[1];if(d.isArray(b[1])||d.isImmutableArray(b[1]))M=d.autoCastArrayOfPointsToMultiPoint(b[1],m.spatialReference);if(!(t instanceof x))throw new c.ArcadeExecutionError(m,
c.ExecutionErrorCodes.InvalidParameter,v);if(!(M instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.distance(t,M,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1)))})};u.distancegeodetic=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,3,m,v);t=b[0];M=b[1];if(!(t instanceof p))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(!(M instanceof p))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,
v);const R=new z({paths:[],spatialReference:t.spatialReference});R.addPath([t,M]);return q.geodesicLength(R,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1)))})};u.densify=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,3,m,v);if(null===b[0])return null;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);t=d.toNumber(b[1]);if(isNaN(t))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,
v);if(0>=t)throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return b[0]instanceof C||b[0]instanceof z?q.densify(b[0],t,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1))):b[0]instanceof n?q.densify(g(b[0]),t,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1))):b[0]})};u.densifygeodetic=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,3,m,v);if(null===b[0])return null;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,
v);t=d.toNumber(b[1]);if(isNaN(t))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(0>=t)throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return b[0]instanceof C||b[0]instanceof z?q.geodesicDensify(b[0],t,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1))):b[0]instanceof n?q.geodesicDensify(g(b[0]),t,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1))):b[0]})};u.generalize=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);
d.pcCheck(b,2,4,m,v);if(null===b[0])return null;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);t=d.toNumber(b[1]);if(isNaN(t))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.generalize(b[0],t,d.toBoolean(d.defaultUndefined(b[2],!0)),a.convertLinearUnitsToCode(d.defaultUndefined(b[3],-1)))})};u.buffer=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,3,m,v);if(null===b[0])return null;
if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);t=d.toNumber(b[1]);if(isNaN(t))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return 0===t?a.cloneGeometry(b[0]):q.buffer(b[0],t,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1)))})};u.buffergeodetic=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,3,m,v);if(null===b[0])return null;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,
c.ExecutionErrorCodes.InvalidParameter,v);t=d.toNumber(b[1]);if(isNaN(t))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return 0===t?a.cloneGeometry(b[0]):q.geodesicBuffer(b[0],t,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1)))})};u.offset=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,6,m,v);if(null===b[0])return null;if(!(b[0]instanceof C||b[0]instanceof z))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,
v);t=d.toNumber(b[1]);if(isNaN(t))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);M=d.toNumber(d.defaultUndefined(b[4],10));if(isNaN(M))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);const R=d.toNumber(d.defaultUndefined(b[5],0));if(isNaN(R))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.offset(b[0],t,a.convertLinearUnitsToCode(d.defaultUndefined(b[2],-1)),d.toString(d.defaultUndefined(b[3],"round")).toLowerCase(),
M,R)})};u.rotate=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,3,m,v);t=b[0];if(null===t)return null;if(!(t instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);t instanceof n&&(t=C.fromExtent(t));M=d.toNumber(b[1]);if(isNaN(M))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);b=d.defaultUndefined(b[2],null);if(null===b)return q.rotate(t,M);if(b instanceof p)return q.rotate(t,M,b);throw new c.ArcadeExecutionError(m,
c.ExecutionErrorCodes.InvalidParameter,v);})};u.centroid=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,1,1,m,v);if(null===b[0])return null;t=b[0];if(d.isArray(b[0])||d.isImmutableArray(b[0]))t=d.autoCastArrayOfPointsToMultiPoint(b[0],m.spatialReference);if(null===t)return null;if(!(t instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return t instanceof p?d.fixSpatialReference(a.cloneGeometry(b[0]),m.spatialReference):t instanceof
C?t.centroid:t instanceof z?k.centroidPolyline(t):t instanceof I?k.centroidMultiPoint(t):t instanceof n?t.center:null})};u.multiparttosinglepart=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,1,1,m,v);M=[];if(null===b[0])return null;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(b[0]instanceof p||b[0]instanceof n)return[d.fixSpatialReference(a.cloneGeometry(b[0]),m.spatialReference)];t=q.simplify(b[0]);if(t instanceof
C){b=[];M=[];for(var R=0;R<t.rings.length;R++)if(t.isClockwise(t.rings[R])){const Y=e.fromJSON({rings:[t.rings[R]],hasZ:!0===t.hasZ,hasM:!0===t.hasM,spatialReference:t.spatialReference.toJSON()});b.push(Y)}else M.push({ring:t.rings[R],pt:t.getPoint(R,0)});for(t=0;t<M.length;t++)for(R=0;R<b.length;R++)if(b[R].contains(M[t].pt)){b[R].addRing(M[t].ring);break}return b}if(t instanceof z){b=[];for(M=0;M<t.paths.length;M++)R=e.fromJSON({paths:[t.paths[M]],hasZ:!0===t.hasZ,hasM:!0===t.hasM,spatialReference:t.spatialReference.toJSON()}),
b.push(R);return b}if(b[0]instanceof I){t=d.fixSpatialReference(a.cloneGeometry(b[0]),m.spatialReference);for(b=0;b<t.points.length;b++)M.push(t.getPoint(b));return M}return null})};u.issimple=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,1,1,m,v);if(null===b[0])return!0;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.isSimple(b[0])})};u.simplify=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);
d.pcCheck(b,1,1,m,v);if(null===b[0])return null;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.simplify(b[0])})};u.convexhull=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,1,1,m,v);if(null===b[0])return null;if(!(b[0]instanceof x))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);return q.convexHull(b[0])})};u.nearestcoordinate=function(m,v){return f(m,v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);
d.pcCheck(b,2,2,m,v);if(!(b[0]instanceof x||null===b[0]))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(!(b[1]instanceof p||null===b[1]))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(null===b[0]||null===b[1])return null;t=q.nearestCoordinate(b[0],b[1]);return null===t||t.isEmpty?null:A.convertObjectToArcadeDictionary({coordinate:t.coordinate,distance:t.distance},d.defaultTimeZone(m),!1,!0)})};u.nearestvertex=function(m,v){return f(m,
v,(t,M,b)=>{b=d.autoCastFeatureToGeometry(b);d.pcCheck(b,2,2,m,v);if(!(b[0]instanceof x||null===b[0]))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(!(b[1]instanceof p||null===b[1]))throw new c.ArcadeExecutionError(m,c.ExecutionErrorCodes.InvalidParameter,v);if(null===b[0]||null===b[1])return null;t=q.nearestVertex(b[0],b[1]);return null===t||t.isEmpty?null:A.convertObjectToArcadeDictionary({coordinate:t.coordinate,distance:t.distance},d.defaultTimeZone(m),!1,!0)})}};
r.setGeometryEngine=function(u){q=u};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/maths":function(){define(["exports","../../chunks/languageUtils","../../core/number"],function(r,L,A){function c(a,d,k){if(void 0===k||0===+k)return Math[a](d);d=+d;k=+k;if(isNaN(d)||"number"!==typeof k||0!==k%1)return NaN;d=d.toString().split("e");d=Math[a](+(d[0]+"e"+(d[1]?+d[1]-k:-k)));d=d.toString().split("e");return+(d[0]+"e"+(d[1]?+d[1]+k:k))}r.registerFunctions=function(a,
d){function k(h,n,x){h=L.toNumber(h);return isNaN(h)?h:isNaN(n)||isNaN(x)||n>x?NaN:h<n?n:h>x?x:h}a.number=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,2,h,n);x=p[0];return L.isNumber(x)?x:null===x?0:L.isDate(x)||L.isTime(x)||L.isDateOnly(x)?x.toNumber():L.isBoolean(x)?Number(x):L.isArray(x)?NaN:""===x||void 0===x?Number(x):L.isString(x)?void 0!==p[1]?(p=L.multiReplace(p[1],"\u2030",""),p=L.multiReplace(p,"\u00a4",""),A.parse(x,{pattern:p})):Number(x.trim()):Number(x)})};a.abs=function(h,n){return d(h,
n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.abs(L.toNumber(p[0]))})};a.acos=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.acos(L.toNumber(p[0]))})};a.asin=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.asin(L.toNumber(p[0]))})};a.atan=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.atan(L.toNumber(p[0]))})};a.atan2=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,2,2,h,n);return Math.atan2(L.toNumber(p[0]),L.toNumber(p[1]))})};
a.ceil=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,2,h,n);return 2===p.length?(x=L.toNumber(p[1]),isNaN(x)&&(x=0),c("ceil",L.toNumber(p[0]),-1*x)):Math.ceil(L.toNumber(p[0]))})};a.round=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,2,h,n);return 2===p.length?(x=L.toNumber(p[1]),isNaN(x)&&(x=0),c("round",L.toNumber(p[0]),-1*x)):Math.round(L.toNumber(p[0]))})};a.floor=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,2,h,n);return 2===p.length?(x=L.toNumber(p[1]),isNaN(x)&&(x=0),c("floor",
L.toNumber(p[0]),-1*x)):Math.floor(L.toNumber(p[0]))})};a.cos=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.cos(L.toNumber(p[0]))})};a.isnan=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return"number"===typeof p[0]&&isNaN(p[0])})};a.exp=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.exp(L.toNumber(p[0]))})};a.log=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.log(L.toNumber(p[0]))})};a.pow=function(h,n){return d(h,
n,(x,I,p)=>{L.pcCheck(p,2,2,h,n);return L.toNumber(p[0])**L.toNumber(p[1])})};a.random=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,0,0,h,n);return Math.random()})};a.sin=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.sin(L.toNumber(p[0]))})};a.sqrt=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.sqrt(L.toNumber(p[0]))})};a.tan=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return Math.tan(L.toNumber(p[0]))})};a.defaultvalue=function(h,n){return d(h,
n,(x,I,p)=>{L.pcCheck(p,2,2,h,n);return null===p[0]||""===p[0]||void 0===p[0]?p[1]:p[0]})};a.isempty=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return null===p[0]||""===p[0]||void 0===p[0]?!0:!1})};a["boolean"]=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,1,1,h,n);return L.toBoolean(p[0])})};a.constrain=function(h,n){return d(h,n,(x,I,p)=>{L.pcCheck(p,3,3,h,n);x=L.toNumber(p[1]);I=L.toNumber(p[2]);if(L.isArray(p[0])){var C=[];for(var z of p[0])C.push(k(z,x,I));return C}if(L.isImmutableArray(p[0])){z=
[];for(C=0;C<p[0].length();C++)z.push(k(p[0].get(C),x,I));return z}return k(p[0],x,I)})}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/stats":function(){define(["exports","../executionError","../../chunks/languageUtils","./fieldStats"],function(r,L,A,c){function a(d,k,h,n){if(1===n.length){if(A.isArray(n[0]))return c.calculateStat(d,n[0],-1);if(A.isImmutableArray(n[0]))return c.calculateStat(d,n[0].toArray(),-1)}return c.calculateStat(d,n,-1)}r.registerFunctions=
function(d,k){d.stdev=function(h,n){return k(h,n,(x,I,p)=>a("stdev",x,I,p))};d.variance=function(h,n){return k(h,n,(x,I,p)=>a("variance",x,I,p))};d.average=function(h,n){return k(h,n,(x,I,p)=>a("mean",x,I,p))};d.mean=function(h,n){return k(h,n,(x,I,p)=>a("mean",x,I,p))};d.sum=function(h,n){return k(h,n,(x,I,p)=>a("sum",x,I,p))};d.min=function(h,n){return k(h,n,(x,I,p)=>a("min",x,I,p))};d.max=function(h,n){return k(h,n,(x,I,p)=>a("max",x,I,p))};d.distinct=function(h,n){return k(h,n,(x,I,p)=>a("distinct",
x,I,p))};d.count=function(h,n){return k(h,n,(x,I,p)=>{A.pcCheck(p,1,1,h,n);if(A.isArray(p[0])||A.isString(p[0]))return p[0].length;if(A.isImmutableArray(p[0]))return p[0].length();throw new L.ArcadeExecutionError(h,L.ExecutionErrorCodes.InvalidParameter,n);})}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/fieldStats":function(){define(["exports","../../chunks/languageUtils"],function(r,L){function A(a){let d=0;for(let k=0;k<a.length;k++)d+=a[k];return d/a.length}
function c(a){const d=A(a);let k=0;for(let h=0;h<a.length;h++)k+=(d-a[h])**2;return k/a.length}r.calculateStat=function(a,d,k=1E3){switch(a.toLowerCase()){case "distinct":a:{a=[];const h={},n=[];for(let x=0;x<d.length;x++){if(void 0!==d[x]&&null!==d[x]&&d[x]!==L.voidOperation){const I=d[x];if(L.isNumber(I)||L.isString(I))void 0===h[I]&&(a.push(I),h[I]=1);else{let p=!1;for(let C=0;C<n.length;C++)!0===L.equalityTest(n[C],I)&&(p=!0);!1===p&&(n.push(I),a.push(I))}}if(a.length>=k&&-1!==k){d=a;break a}}d=
a}return d;case "avg":case "mean":return A(L.toNumberArray(d));case "min":return Math.min.apply(Math,L.toNumberArray(d));case "sum":d=L.toNumberArray(d);k=0;for(a=0;a<d.length;a++)k+=d[a];return k;case "max":return Math.max.apply(Math,L.toNumberArray(d));case "stdev":case "stddev":return Math.sqrt(c(L.toNumberArray(d)));case "var":case "variance":return c(L.toNumberArray(d));case "count":return d.length}return 0};r.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";
case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/string":function(){define("exports ../ArcadePortal ../Attachment ../Dictionary ../executionError ../../chunks/languageUtils ../featureset/support/shared ./convertdirection ./hash ../../core/urlUtils ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/SpatialReference ../../portal/Portal".split(" "),
function(r,L,A,c,a,d,k,h,n,x,I,p,C,z,e,g,B){function q(f,E){if(!f||!E)return f===E;if(f.x===E.x&&f.y===E.y){if(f.hasZ){if(f.z!==E.z)return!1}else if(E.hasZ)return!1;if(f.hasM){if(f.m!==E.m)return!1}else if(E.hasM)return!1;return!0}return!1}function u(f,E,m){if(null===f)E.updateUint8Array([0,139]);else if(d.isArray(f)){E.updateUint8Array([61]);if(m.map.has(f))f=m.map.get(f),E.updateIntArray([f^61237541]);else{m.map.set(f,m.currentLength++);for(var v of f)u(v,E,m);m.map.delete(f);m.currentLength--}E.updateUint8Array([199])}else if(d.isImmutableArray(f)){E.updateUint8Array([61]);
if(m.map.has(f))f=m.map.get(f),E.updateIntArray([f^61237541]);else{m.map.set(f,m.currentLength++);for(var t of f.toArray())u(t,E,m);m.map.delete(f);m.currentLength--}E.updateUint8Array([199])}else if(d.isDate(f))E.updateIntArray([f.toNumber()]),E.updateUint8Array([241]);else if(d.isDateOnly(f))E.updateIntArray([f.toNumber()]),E.updateIntArray([257]);else if(d.isTime(f))E.updateIntArray([f.toNumber()]),E.updateIntArray([263]);else if(d.isString(f))E.updateIntArray([f.length]),E.updateWithString(f),
E.updateUint8Array([41]);else if(d.isBoolean(f))E.updateUint8Array([!0===f?1:0,113]);else if(d.isNumber(f))E.updateFloatArray([f]),E.updateUint8Array([173]);else{if(f instanceof A)throw new a.ArcadeExecutionError(m.context,a.ExecutionErrorCodes.UnsupportedHashType,m.node);if(f instanceof L)throw new a.ArcadeExecutionError(m.context,a.ExecutionErrorCodes.UnsupportedHashType,m.node);if(f instanceof c){E.updateUint8Array([223]);if(m.map.has(f))f=m.map.get(f),E.updateIntArray([f^61237541]);else{m.map.set(f,
m.currentLength++);for(var M of f.keys())E.updateIntArray([M.length]),E.updateWithString(M),E.updateUint8Array([251]),v=f.field(M),u(v,E,m),E.updateUint8Array([239]);m.map.delete(f);m.currentLength--}E.updateUint8Array([73])}else{if(d.isFeature(f))throw new a.ArcadeExecutionError(m.context,a.ExecutionErrorCodes.UnsupportedHashType,m.node);if(f instanceof C)E.updateIntArray([3833836621]),E.updateIntArray([0]),E.updateFloatArray([f.x]),E.updateIntArray([1]),E.updateFloatArray([f.y]),f.hasZ&&(E.updateIntArray([2]),
E.updateFloatArray([f.z])),f.hasM&&(E.updateIntArray([3]),E.updateFloatArray([f.m])),E.updateIntArray([3765347959]),u(f.spatialReference.wkid,E,m);else if(f instanceof z){E.updateIntArray([1266616829]);for(M=0;M<f.rings.length;M++){t=f.rings[M];v=[];var b=null;let R=null;for(let Y=0;Y<t.length;Y++){const ca=f.getPoint(M,Y);if(0===Y)b=ca;else if(q(R,ca))continue;R=ca;Y===t.length-1&&q(b,ca)||v.push(ca)}E.updateIntArray([1397116793,v.length]);for(t=0;t<v.length;t++)b=v[t],E.updateIntArray([3962308117,
t]),u(b,E,m),E.updateIntArray([2716288009]);E.updateIntArray([2278822459])}E.updateIntArray([3878477243]);u(f.spatialReference.wkid,E,m)}else if(f instanceof e){E.updateIntArray([4106883559]);for(M=0;M<f.paths.length;M++){v=f.paths[M];E.updateIntArray([1397116793,v.length]);for(t=0;t<v.length;t++)E.updateIntArray([3962308117,t]),u(f.getPoint(M,t),E,m),E.updateIntArray([2716288009]);E.updateIntArray([2278822459])}E.updateIntArray([2568784753]);u(f.spatialReference.wkid,E,m)}else if(f instanceof p){E.updateIntArray([588535921,
f.points.length]);for(M=0;M<f.points.length;M++)v=f.getPoint(M),E.updateIntArray([M]),u(v,E,m);E.updateIntArray([1700171621]);u(f.spatialReference.wkid,E,m)}else if(f instanceof I)E.updateIntArray([3483648373]),E.updateIntArray([0]),E.updateFloatArray([f.xmax]),E.updateIntArray([1]),E.updateFloatArray([f.xmin]),E.updateIntArray([2]),E.updateFloatArray([f.ymax]),E.updateIntArray([3]),E.updateFloatArray([f.ymin]),f.hasZ&&(E.updateIntArray([4]),E.updateFloatArray([f.zmax]),E.updateIntArray([5]),E.updateFloatArray([f.zmin])),
f.hasM&&(E.updateIntArray([6]),E.updateFloatArray([f.mmax]),E.updateIntArray([7]),E.updateFloatArray([f.mmin])),E.updateIntArray([3622027469]),u(f.spatialReference.wkid,E,m);else if(f instanceof g)E.updateIntArray([14]),void 0!==f.wkid&&null!==f.wkid&&E.updateIntArray([f.wkid]),f.wkt&&E.updateWithString(f.wkt),f.wkt2&&E.updateWithString(f.wkt2);else{if(d.isFunctionParameter(f))throw new a.ArcadeExecutionError(m.context,a.ExecutionErrorCodes.UnsupportedHashType,m.node);if(d.isFeatureSet(f))throw new a.ArcadeExecutionError(m.context,
a.ExecutionErrorCodes.UnsupportedHashType,m.node);d.isFeatureSetCollection(f);throw new a.ArcadeExecutionError(m.context,a.ExecutionErrorCodes.UnsupportedHashType,m.node);}}}}r.registerFunctions=function(f,E){f.portal=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);return new L(d.toString(b[0]))})};f.typeof=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);t=d.getType(b[0]);if("Unrecognized Type"===t)throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.UnrecognizedType,v);return t})};
f.trim=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);return d.toString(b[0]).trim()})};f.tohex=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);t=d.toNumber(b[0]);return isNaN(t)?t:t.toString(16)})};f.upper=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);return d.toString(b[0]).toUpperCase()})};f.proper=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);t=1;2===b.length&&"firstword"===d.toString(b[1]).toLowerCase()&&(t=2);M=/\s/;b=d.toString(b[0]);let R="",Y=
!0;for(let ca=0;ca<b.length;ca++){let oa=b[ca];M.test(oa)?1===t&&(Y=!0):oa.toUpperCase()!==oa.toLowerCase()&&(Y?(oa=oa.toUpperCase(),Y=!1):oa=oa.toLowerCase());R+=oa}return R})};f.lower=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);return d.toString(b[0]).toLowerCase()})};f.guid=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,0,1,m,v);if(0<b.length)switch(d.toString(b[0]).toLowerCase()){case "digits":return d.generateUUID().replace("-","").replace("-","").replace("-","").replace("-",
"");case "digits-hyphen":return d.generateUUID();case "digits-hyphen-parentheses":return"("+d.generateUUID()+")"}return"{"+d.generateUUID()+"}"})};f.standardizeguid=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,2,2,m,v);t=d.toString(b[0]);if(""===t||null===t)return"";t=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(t);if(!t)return"";t=t.groups;t=t.partA+"-"+t.partB+"-"+t.partC+"-"+t.partD+
"-"+t.partE;switch(d.toString(b[1]).toLowerCase()){case "digits":return t.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return t;case "digits-hyphen-parentheses":return"("+t+")"}return"{"+t+"}"})};f.console=function(m,v){return E(m,v,(t,M,b)=>{0!==b.length&&(1===b.length?m.console(d.toString(b[0])):m.console(d.toString(b)));return d.voidOperation})};f.mid=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,2,3,m,v);t=d.toNumber(b[1]);if(isNaN(t))return"";0>t&&(t=
0);if(2===b.length)return d.toString(b[0]).substr(t);M=d.toNumber(b[2]);if(isNaN(M))return"";0>M&&(M=0);return d.toString(b[0]).substr(t,M)})};f.find=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,2,3,m,v);t=0;if(2<b.length){t=d.toNumber(d.defaultUndefined(b[2],0));if(isNaN(t))return-1;0>t&&(t=0)}return d.toString(b[1]).indexOf(d.toString(b[0]),t)})};f.left=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,2,2,m,v);t=d.toNumber(b[1]);if(isNaN(t))return"";0>t&&(t=0);return d.toString(b[0]).substr(0,
t)})};f.right=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,2,2,m,v);t=d.toNumber(b[1]);if(isNaN(t))return"";0>t&&(t=0);return d.toString(b[0]).substr(-1*t,t)})};f.split=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,2,4,m,v);t=d.toNumber(d.defaultUndefined(b[2],-1));M=d.toBoolean(d.defaultUndefined(b[3],!1));-1===t||null===t||!0===M?b=d.toString(b[0]).split(d.toString(b[1])):(isNaN(t)&&(t=-1),-1>t&&(t=-1),b=d.toString(b[0]).split(d.toString(b[1]),t));if(!1===M)return b;M=[];for(let R=0;R<b.length&&
!(-1!==t&&M.length>=t);R++)""!==b[R]&&void 0!==b[R]&&M.push(b[R]);return M})};f.text=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);return d.toStringExplicit(b[0],b[1])})};f.concatenate=function(m,v){return E(m,v,(t,M,b)=>{t=[];if(1>b.length)return"";if(d.isArray(b[0])){M=d.defaultUndefined(b[2],"");for(var R=0;R<b[0].length;R++)t[R]=d.toStringExplicit(b[0][R],M);return 1<b.length?t.join(b[1]):t.join("")}if(d.isImmutableArray(b[0])){M=d.defaultUndefined(b[2],"");for(R=0;R<b[0].length();R++)t[R]=
d.toStringExplicit(b[0].get(R),M);return 1<b.length?t.join(b[1]):t.join("")}for(M=0;M<b.length;M++)t[M]=d.toStringExplicit(b[M]);return t.join("")})};f.reverse=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);if(d.isArray(b[0]))return t=b[0].slice(0),t.reverse(),t;if(d.isImmutableArray(b[0]))return t=b[0].toArray().slice(0),t.reverse(),t;throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.replace=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,3,4,m,v);t=d.toString(b[0]);
M=d.toString(b[1]);const R=d.toString(b[2]);return(4===b.length?d.toBoolean(b[3]):1)?d.multiReplace(t,M,R):t.replace(M,R)})};f.schema=function(m,v){return E(m,v,(t,M,b)=>{if(d.isFeature(b[0]))return(t=d.featureSchema(b[0]))?c.convertObjectToArcadeDictionary(t,d.defaultTimeZone(m)):null;throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.subtypes=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);if(d.isFeature(b[0]))return(t=d.featureSubtypes(b[0]))?c.convertObjectToArcadeDictionary(t,
d.defaultTimeZone(m)):null;throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.subtypecode=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);if(d.isFeature(b[0])){t=d.featureSubtypes(b[0]);if(!t)return null;if(t.subtypeField&&b[0].hasField(t.subtypeField)){b=b[0].field(t.subtypeField);for(const R of t.subtypes)if(R.code===b)return R.code}return null}throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.subtypename=function(m,v){return E(m,
v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);if(d.isFeature(b[0])){t=d.featureSubtypes(b[0]);if(!t)return"";if(t.subtypeField&&b[0].hasField(t.subtypeField)){b=b[0].field(t.subtypeField);for(const R of t.subtypes)if(R.code===b)return R.name}return""}throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.gdbversion=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);if(d.isFeature(b[0]))return b[0].gdbVersion();throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,
v);})};f.domain=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,2,3,m,v);if(d.isFeature(b[0]))return(t=d.featureFullDomain(b[0],d.toString(b[1]),void 0===b[2]?void 0:b[2]))&&t.domain?"coded-value"===t.domain.type||"codedValue"===t.domain.type?c.convertObjectToArcadeDictionary({type:"codedValue",name:t.domain.name,dataType:k.layerFieldEsriConstants[t.field.type],codedValues:t.domain.codedValues.map(R=>({name:R.name,code:R.code}))},d.defaultTimeZone(m)):c.convertObjectToArcadeDictionary({type:"range",
name:t.domain.name,dataType:k.layerFieldEsriConstants[t.field.type],min:t.domain.min,max:t.domain.max},d.defaultTimeZone(m)):null;throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.domainname=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,2,4,m,v);if(d.isFeature(b[0]))return d.featureDomainValueLookup(b[0],d.toString(b[1]),b[2],void 0===b[3]?void 0:b[3]);throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.domaincode=function(m,v){return E(m,
v,(t,M,b)=>{d.pcCheck(b,2,4,m,v);if(d.isFeature(b[0]))return d.featureDomainCodeLookup(b[0],d.toString(b[1]),b[2],void 0===b[3]?void 0:b[3]);throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.urlencode=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);if(null===b[0])return"";if(b[0]instanceof c){t="";for(const R of b[0].keys())M=b[0].field(R),""!==t&&(t+="\x26"),t=null===M?t+(encodeURIComponent(R)+"\x3d"):t+(encodeURIComponent(R)+"\x3d"+encodeURIComponent(M));
return t}return encodeURIComponent(d.toString(b[0]))})};f.hash=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);t=new n.XXH(0);u(b[0],t,{context:m,node:v,map:new Map,currentLength:0});return t.digest()})};f.convertdirection=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,3,3,m,v);return h.convertDirection(b[0],b[1],b[2])})};f.fromjson=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,1,m,v);if(!1===d.isString(b[0]))throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,
v);return c.convertJsonToArcade(JSON.parse(d.toString(b[0])),d.defaultTimeZone(m))})};f.expects=function(m,v){return E(m,v,(t,M,b)=>{if(1>b.length)throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.WrongNumberOfParameters,v);return d.voidOperation})};f.tocharcode=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);t=d.toNumber(d.defaultUndefined(b[1],0));M=d.toString(b[0]);if(0===M.length&&1===b.length)return null;if(M.length<=t||0>t)throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.OutOfBounds,
v);return M.charCodeAt(t)})};f.tocodepoint=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,1,2,m,v);t=d.toNumber(d.defaultUndefined(b[1],0));M=d.toString(b[0]);if(0===M.length&&1===b.length)return null;if(M.length<=t||0>t)throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.OutOfBounds,v);return M.codePointAt(t)})};f.fromcharcode=function(m,v){return E(m,v,(t,M,b)=>{if(1>b.length)throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.WrongNumberOfParameters,v);t=b.map(R=>Math.trunc(d.toNumber(R))).filter(R=>
0<=R&&65535>=R);return 0===t.length?null:String.fromCharCode.apply(null,t)})};f.fromcodepoint=function(m,v){return E(m,v,(t,M,b)=>{if(1>b.length)throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.WrongNumberOfParameters,v);let R;try{R=b.map(Y=>Math.trunc(d.toNumber(Y))).filter(Y=>1114111>=Y&&Y>>>0===Y)}catch(Y){return null}return 0===R.length?null:String.fromCodePoint.apply(null,R)})};f.getuser=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,0,2,m,v);t=d.defaultUndefined(b[1],"");t=!0===t||
!1===t?"":d.toString(t);if(null!==t&&""!==t)return null;if(0===b.length||b[0]instanceof L){M=null;M=m.services?.portal?m.services.portal:B.getDefault();if(0<b.length&&(b=b[0].field("url"),b=b?x.hasSamePortal(b,M?.restUrl||""):!1,!b)||!M)return null;if(""===t&&(b="loaded"===M.loadStatus&&M.user?.sourceJSON?M.user.sourceJSON:null,b)){b=JSON.parse(JSON.stringify(b));for(const R of["lastLogin","created","modified"])void 0!==b[R]&&null!==b[R]&&(b[R]=new Date(b[R]));return c.convertObjectToArcadeDictionary(b,
d.defaultTimeZone(m))}return null}throw new a.ArcadeExecutionError(m,a.ExecutionErrorCodes.InvalidParameter,v);})};f.getenvironment=function(m,v){return E(m,v,(t,M,b)=>{d.pcCheck(b,0,0,m,v);return c.convertObjectToArcadeDictionary(d.defaultExecutingContext(d.defaultTimeZone(m),m.spatialReference),d.defaultTimeZone(m),!0)})}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadePortal":function(){define(["./Dictionary"],function(r){class L extends r{constructor(A){super();
this.declaredClass="esri.arcade.Portal";this.immutable=!1;this.setField("url",A);this.immutable=!0}}return L})},"esri/arcade/Attachment":function(){define(["./Dictionary"],function(r){class L extends r{constructor(A,c,a,d,k,h,n){super();this.attachmentUrl=k;this.declaredClass="esri.arcade.Attachment";this.immutable=!1;this.setField("id",A);this.setField("name",c);this.setField("contenttype",a);this.setField("size",d);this.setField("exifinfo",h);this.setField("keywords",n);this.immutable=!0}deepClone(){return new L(this.field("id"),
this.field("name"),this.field("contenttype"),this.field("size"),this.attachmentUrl,this.field("exifinfo")?.deepClone()??null,this.field("keywords"))}}return L})},"esri/arcade/functions/convertdirection":function(){define(["exports","../Dictionary","../executionError","../../chunks/languageUtils","../../core/maybe"],function(r,L,A,c,a){function d(D){if(!1===c.isString(D))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.InvalidParameter,null);return D}function k(D,O){O=10**O;return Math.round(D*
O)/O}function h(D){const O=parseFloat(D.toString().replace(Math.trunc(D).toString(),"0"))*Math.sign(D);return 0>D?{fraction:O,integer:Math.ceil(D)}:{fraction:O,integer:Math.floor(D)}}function n(D,O){switch(D){case ea.north:return"SHORT"===O?"N":"North";case ea.east:return"SHORT"===O?"E":"East";case ea.south:return"SHORT"===O?"S":"South";case ea.west:return"SHORT"===O?"W":"West"}}function x(D,O){return D-Math.floor(D/O)*O}function I(D){switch(D){case W.truncated_degrees:case W.decimal_degrees:return 360;
case W.radians:return oa;case W.gradians:return 400;case W.seconds:return 1296E3;case W.fractional_degree_minutes:return 60;case W.fractional_minute_seconds:return 60;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function p(D){switch(D.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return ia.north_azimuth;case "POLAR":return ia.polar;case "QUADRANT":return ia.quadrant;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return ia.south_azimuth}throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function C(D){switch(D.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return W.decimal_degrees;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return W.degrees_minutes_seconds;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return W.radians;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return W.gradians}throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function z(D,O,Q){let T=null;switch(O){case W.decimal_degrees:T=Y(D,3600);break;case W.seconds:T=D;break;case W.gradians:T=Y(D,3240);break;case W.radians:T=Y(D,na);break;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(Q){case W.decimal_degrees:return ca(T,3600);case W.seconds:return T;case W.gradians:return ca(T,3240);case W.radians:return T/na;default:throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function e(D){a.assertIsSome(D);switch(D){case W.decimal_degrees:case W.truncated_degrees:case W.degrees_minutes_seconds:return W.decimal_degrees;case W.gradians:return W.gradians;case W.fractional_degree_minutes:return W.fractional_degree_minutes;case W.radians:return W.radians;case W.seconds:case W.fractional_minute_seconds:return W.seconds}}function g(D){switch(c.toNumber(D)){case 1:return{first:ea.north,second:ea.east};
case 2:return{first:ea.south,second:ea.east};case 3:return{first:ea.south,second:ea.west};case 4:return{first:ea.north,second:ea.west}}return null}function B(D){switch(D.toUpperCase().trim()){case "N":case "NORTH":return ea.north;case "E":case "EAST":return ea.east;case "S":case "SOUTH":return ea.south;case "W":case "WEST":return ea.west}return null}function q(D){D=parseFloat(D);if(c.isNumber(D)){if(isNaN(D))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});
return D}throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function u(D,O,Q){const T=Q===ia.quadrant;let ka=null;var pa=null;let l=0;var y=0;y=0;if(T){if(2>D.length)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});y=1;(pa=g(c.toString(D[D.length-1])))?(ka=pa.first,pa=pa.second):(l=1,ka=B(c.toString(D[0])),pa=B(c.toString(D[D.length-1])));if(null===ka||null===pa)throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(O){case W.decimal_degrees:case W.radians:case W.gradians:if(0===D.length)break;return T?F.createFromAngleMeridianAndDirection(G.createFromAngleAndUnits(q(D[l]),e(O)),ka,pa):F.createFromAngleAndDirection(G.createFromAngleAndUnits(q(D[l]),e(O)),Q);case W.degrees_minutes_seconds:y=D.length-y-l;if(3===y)return D=G.createFromDegreesMinutesSeconds(q(D[l]),q(D[l+1]),q(D[l+2])),T?F.createFromAngleMeridianAndDirection(D,ka,pa):F.createFromAngleAndDirection(D,
Q);if(1===y)return D=q(D[l]),D=qa.numberToDms(D),D=G.createFromDegreesMinutesSeconds(D.m_degrees,D.m_minutes,D.m_seconds),T?F.createFromAngleMeridianAndDirection(D,ka,pa):F.createFromAngleAndDirection(D,Q)}throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function f(D){const O=new Set([" ","-","/","'",'"',"\\","^","\u00b0",ma,"\t","\r","\n","*"]);let Q="";for(let T=0;T<D.length;T++){const ka=D.charAt(T);Q=O.has(ka)?Q+"RRSPLITRRSPLITRR":Q+ka}return Q.split("RRSPLITRRSPLITRR").filter(T=>
""!==T)}function E(D,O,Q){const T={padding:0,rounding:0,newpos:O};let ka=!1;for(;O<D.length;){const pa=D[O];if(pa===Q)ka?T.rounding++:T.padding++,O++;else if("."===pa)ka=!0,O++;else break}T.newpos=O-1;return T}const m=D=>(O,Q,T)=>{T=T||14;return+D(O,Q).toFixed(T)},v=(D,O)=>D+O,t=(D,O)=>D-O,M=(D,O)=>D*O,b=(D,O)=>D/O,R=(D,O,Q)=>m(v)(D,O,Q),Y=(D,O,Q)=>m(M)(D,O,Q),ca=(D,O,Q)=>m(b)(D,O,Q),oa=2*Math.PI,na=648E3/Math.PI,ma=String.fromCharCode(7501);var ea;(function(D){D[D.north=0]="north";D[D.east=1]="east";
D[D.south=2]="south";D[D.west=3]="west"})(ea||(ea={}));var W;(function(D){D[D.decimal_degrees=1]="decimal_degrees";D[D.seconds=2]="seconds";D[D.degrees_minutes_seconds=3]="degrees_minutes_seconds";D[D.radians=4]="radians";D[D.gradians=5]="gradians";D[D.truncated_degrees=6]="truncated_degrees";D[D.fractional_degree_minutes=7]="fractional_degree_minutes";D[D.fractional_minute_seconds=8]="fractional_minute_seconds"})(W||(W={}));var ia;(function(D){D[D.north_azimuth=1]="north_azimuth";D[D.polar=2]="polar";
D[D.quadrant=3]="quadrant";D[D.south_azimuth=4]="south_azimuth"})(ia||(ia={}));var ra;(function(D){D[D.meridian=0]="meridian";D[D.direction=1]="direction"})(ra||(ra={}));class qa{constructor(D,O,Q){this.m_degrees=D;this.m_minutes=O;this.m_seconds=Q}getField(D){switch(D){case W.decimal_degrees:case W.truncated_degrees:return this.m_degrees;case W.fractional_degree_minutes:return this.m_minutes;case W.seconds:case W.fractional_minute_seconds:return this.m_seconds;default:throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}static secondsToDMS(D){const O=h(D).fraction;D=h(D).integer;const Q=Math.floor(D/3600);D-=3600*Q;const T=Math.floor(D/60);return new qa(Q,T,D-60*T+O)}static numberToDms(D){var O=h(D).fraction;D=h(D).integer;const Q=Y(h(100*O).fraction,100);O=h(100*O).integer;return new qa(D,O,Q)}format(D,O){O=k(this.m_seconds,O);let Q=this.m_minutes,T=this.m_degrees;if(D===W.seconds||D===W.fractional_minute_seconds)60<=O&&(O-=60,++Q),60<=Q&&
(Q=0,++T),360<=T&&(T=0);else if(D===W.fractional_degree_minutes)O=0,Q=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,T=this.m_degrees,60<=Q&&(Q=0,++T),360<=T&&(T=0);else if(D===W.decimal_degrees||D===W.truncated_degrees)D=ca(this.m_seconds,3600),O=ca(this.m_minutes,60),T=Math.round(this.m_degrees+O+D),O=Q=0;return new qa(T,Q,O)}static dmsToSeconds(D,O,Q){return 3600*D+60*O+Q}}class ya{constructor(D,O,Q){this.meridian=D;this.angle=O;this.direction=Q}fetchAzimuth(D){return D===ra.meridian?this.meridian:
this.direction}}class F{constructor(D){this._angle=D}static createFromAngleAndDirection(D,O){return new F(new G(F._convertDirectionFormat(D.extractAngularUnits(W.seconds),O,ia.north_azimuth)))}getAngle(D){const O=this._angle.extractAngularUnits(W.seconds);switch(D){case ia.north_azimuth:case ia.south_azimuth:case ia.polar:return new G(F._convertDirectionFormat(O,ia.north_azimuth,D));case ia.quadrant:return D=F.secondsNorthAzimuthToQuadrant(O),new G(D.angle)}}getMeridian(D){const O=this._angle.extractAngularUnits(W.seconds);
switch(D){case ia.north_azimuth:return ea.north;case ia.south_azimuth:return ea.south;case ia.polar:return ea.east;case ia.quadrant:return F.secondsNorthAzimuthToQuadrant(O).meridian}}getDirection(D){const O=this._angle.extractAngularUnits(W.seconds);switch(D){case ia.north_azimuth:return ea.east;case ia.south_azimuth:return ea.west;case ia.polar:return ea.north;case ia.quadrant:return F.secondsNorthAzimuthToQuadrant(O).direction}}static secondsNorthAzimuthToQuadrant(D){const O=324E3>=D||972E3<=D?
ea.north:ea.south;return new ya(O,O===ea.north?Math.min(1296E3-D,D):Math.abs(D-648E3),648E3<D?ea.west:ea.east)}static createFromAngleMeridianAndDirection(D,O,Q){return new F(new G(F.secondsQuadrantToNorthAzimuth(D.extractAngularUnits(W.seconds),O,Q)))}static secondsQuadrantToNorthAzimuth(D,O,Q){return O===ea.north?Q===ea.east?D:1296E3-D:Q===ea.east?648E3-D:648E3+D}static _convertDirectionFormat(D,O,Q){let T=0;switch(O){case ia.north_azimuth:T=D;break;case ia.polar:T=324E3-D;break;case ia.quadrant:throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case ia.south_azimuth:T=D+648E3}D=0;switch(Q){case ia.north_azimuth:D=T;break;case ia.polar:D=324E3-T;break;case ia.quadrant:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case ia.south_azimuth:D=T-648E3}D%=1296E3;return 0>D?1296E3+D:D}}class G{constructor(D){this._seconds=D}static createFromAngleAndUnits(D,O){return new G(z(D,O,W.seconds))}extractAngularUnits(D){return z(this._seconds,
W.seconds,e(D))}static createFromDegreesMinutesSeconds(D,O,Q){return new G(R(R(Y(D,3600),Y(O,60)),Q))}}class K{constructor(D,O,Q,T){this.view=D;this.angle=O;this.merdian=Q;this.direction=T;this._formattedDms=this._dms=null}static createFromStringAndBearing(D,O,Q){return new K(D,O.getAngle(Q),O.getMeridian(Q),O.getDirection(Q))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){null===this._dms&&this._calculateDms();
return this._dms}fetchFormattedDms(){null===this._formattedDms&&this._calculateDms();return this._formattedDms}_calculateDms(){var D=null;let O=W.truncated_degrees,Q=0;for(D=0;D<this.view.length;D++){const T=this.view[D];switch(T){case "m":D=E(this.view,D,T);O=O===W.truncated_degrees?W.fractional_degree_minutes:O;D=D.newpos;continue;case "s":D=E(this.view,D,T),O=W.fractional_minute_seconds,Q=Q<D.rounding?D.rounding:Q,D=D.newpos}}this._dms=qa.secondsToDMS(this.angle.extractAngularUnits(W.seconds));
this._formattedDms=qa.secondsToDMS(this.angle.extractAngularUnits(W.seconds)).format(O,Q)}}r.convertDirection=function(D,O,Q){if(!(O instanceof L))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.InvalidParameter,null);if(!1===O.hasField("directionType"))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===O.hasField("angleType"))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});
var T=p(d(O.field("directiontype")));O=C(d(O.field("angletype")));if(c.isNumber(D)){D=c.toNumber(D);if(T===ia.quadrant)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});O===W.degrees_minutes_seconds?(D=qa.numberToDms(D),T=F.createFromAngleAndDirection(G.createFromDegreesMinutesSeconds(D.m_degrees,D.m_minutes,D.m_seconds),T)):T=F.createFromAngleAndDirection(G.createFromAngleAndUnits(D,e(O)),T)}else if(c.isString(D))T=u(f(D),O,T);else if(c.isArray(D))T=
u(D,O,T);else if(c.isImmutableArray(D))T=u(D.toArray(),O,T);else throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(Q instanceof L))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.InvalidParameter,null);if(!1===Q.hasField("directionType"))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===Q.hasField("outputType"))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,
null,{reason:"missing angleType"});D=p(d(Q.field("directiontype")));O=Q.hasField("angleType")?C(d(Q.field("angletype"))):null;var ka=d(Q.field("outputType")).toUpperCase().trim();if(!D||!ka)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(O||"TEXT"===ka&&Q.hasField("format")))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(ka){case "VALUE":if(D===ia.quadrant||O===W.degrees_minutes_seconds)return Q=
T.getAngle(D),D===ia.quadrant&&O===W.degrees_minutes_seconds?(Q=qa.secondsToDMS(Q.extractAngularUnits(W.seconds)),T=[n(T.getMeridian(D),"SHORT"),Q.m_degrees,Q.m_minutes,Q.m_seconds,n(T.getDirection(D),"SHORT")]):O===W.degrees_minutes_seconds?(T=qa.secondsToDMS(Q.extractAngularUnits(W.seconds)),T=[T.m_degrees,T.m_minutes,T.m_seconds]):T=D===ia.quadrant?[n(T.getMeridian(D),"SHORT"),Q.extractAngularUnits(O),n(T.getDirection(D),"SHORT")]:[Q.extractAngularUnits(O)],T;if((Q=e(O))&&O!==W.degrees_minutes_seconds)T=
T.getAngle(D).extractAngularUnits(Q);else throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return T;case "TEXT":ka="";Q.hasField("format")&&(ka=c.toString(Q.field("format")));if(null===ka||""===ka){Q="";switch(O){case W.decimal_degrees:Q=D===ia.quadrant?"DD.DD\u00b0":"DDD.DD\u00b0";break;case W.degrees_minutes_seconds:Q=D===ia.quadrant?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case W.radians:Q="R.RR";break;case W.gradians:Q="GGG.GG"+
ma;break;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}D===ia.quadrant&&(Q="p "+Q+" b");ka=Q}Q=ka;var pa="",l=null,y=null;O=K.createFromStringAndBearing(Q,T,D);ka={D:W.decimal_degrees,d:W.truncated_degrees,m:W.fractional_degree_minutes,s:W.fractional_minute_seconds,R:W.radians,G:W.gradians};for(y=0;y<Q.length;y++){var H=Q[y];switch(H){case "[":l=Q;H={escaped:"",newpos:y};for(y++;y<l.length;){var N=l[y];y++;if("]"===N)break;H.escaped+=
N}H.newpos=y-1;l=H;pa+=l.escaped;y=l.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":l=E(Q,y,H);y=T.getAngle(D);a:{H=ka[H];N=l.padding;var S=l.rounding,U=O;let fa=null;switch(H){case W.decimal_degrees:case W.radians:case W.gradians:fa=x(k(y.extractAngularUnits(H),S),I(H));y=fa.toFixed(S).padStart(N+S+(0<S?1:0),"0");break a;case W.truncated_degrees:case W.fractional_degree_minutes:fa=x(U.fetchFormattedDms().getField(H),I(H));y=fa.toFixed(S).padStart(N+S+(0<S?1:0),"0");break a;
case W.fractional_minute_seconds:fa=x(k(U.fetchDms().getField(H),S),I(H));y=fa.toFixed(S).padStart(N+S+(0<S?1:0),"0");break a;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}pa+=y;y=l.newpos;continue;case "P":case "p":pa+=n(O.fetchMeridian(),"p"===H?"SHORT":"LONG");continue;case "B":case "b":pa+=n(O.fetchDirection(),"b"===H?"SHORT":"LONG");continue;default:pa+=H}}return pa;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.InvalidParameter,
null);}};r.preciseAdd=R;r.preciseDivide=ca;r.preciseMinus=(D,O,Q)=>m(t)(D,O,Q);r.preciseMultiply=Y;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/hash":function(){define(["exports"],function(r){function L(c){const a=[];for(let d=0,k=c.length;d<k;d++){let h=c.charCodeAt(d);128>h?a.push(h):2048>h?a.push(192|h>>6,128|h&63):55296>h||57344<=h?a.push(224|h>>12,128|h>>6&63,128|h&63):(d++,h=65536+((h&1023)<<10|c.charCodeAt(d)&1023),a.push(240|h>>18,128|h>>12&63,128|
h>>6&63,128|h&63))}return new Uint8Array(a)}class A{constructor(c){this._seed=c;this._totallen=0;this._bufs=[];this.init()}init(){this._bufs=[];this._totallen=0;return this}updateFloatArray(c){const a=[];for(const d of c)isNaN(d)?a.push("NaN"):Infinity===d?a.push("Infinity"):-Infinity===d?a.push("-Infinity"):0===d?a.push("0"):a.push(d.toString(16));this.update(L(a.join("")))}updateIntArray(c){c=Int32Array.from(c);this.update(new Uint8Array(c.buffer))}updateUint8Array(c){this.update(Uint8Array.from(c))}updateWithString(c){return this.update(L(c))}update(c){this._bufs.push(c);
this._totallen+=c.length;return this}digest(){const c=new Uint8Array(this._totallen);let a=0;for(const d of this._bufs)c.set(d,a),a+=d.length;this.init();return this._xxHash32(c,this._seed)}_xxHash32(c,a=0){var d=a+374761393&4294967295;let k=0;if(16<=c.length){d=[a+2654435761+2246822519&4294967295,a+2246822519&4294967295,a+0&4294967295,a-2654435761&4294967295];a=c.length-16;var h=0;for(k=0;(k&4294967280)<=a;k+=4){var n=k;n=d[h]+(2246822519*(c[n]+(c[n+1]<<8))+(2246822519*(c[n+2]+(c[n+3]<<8))<<16))&
4294967295;n=n<<13|n>>>19;d[h]=2654435761*(n&65535)+(2654435761*(n>>>16)<<16)&4294967295;h=h+1&3}d=(d[0]<<1|d[0]>>>31)+(d[1]<<7|d[1]>>>25)+(d[2]<<12|d[2]>>>20)+(d[3]<<18|d[3]>>>14)&4294967295}d=d+c.length&4294967295;for(a=c.length-4;k<=a;k+=4)h=k,d=d+(3266489917*(c[h]+(c[h+1]<<8))+(3266489917*(c[h+2]+(c[h+3]<<8))<<16))&4294967295,d=d<<17|d>>>15,d=668265263*(d&65535)+(668265263*(d>>>16)<<16)&4294967295;for(;k<c.length;++k)d+=374761393*c[k],d=d<<11|d>>>21,d=2654435761*(d&65535)+(2654435761*(d>>>16)<<
16)&4294967295;d^=d>>>15;d=(2246822519*(d&65535)&4294967295)+(2246822519*(d>>>16)<<16);d^=d>>>13;d=(3266489917*(d&65535)&4294967295)+(3266489917*(d>>>16)<<16);d^=d>>>16;return 0>d?d+4294967296:d}}r.XXH=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleResolver":function(){define("exports ../request ./executionError ./parser ./featureset/support/RecentlyUsedCache ../portal/Portal".split(" "),function(r,L,A,c,a,d){class k{constructor(h){this.portalUri=h}normalizeModuleUri(h){const n=
/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi;var x=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi;const I=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,p=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi;var C=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(h.startsWith("portal+")){let g=h.substring(7);var z="",e=g;let B=!1;for(const q of[x,p,I])if(x=q.exec(g),null!==x){z=x.groups;e=z.itemid;
z=z.portalurl;B=!0;break}if(!1===B)if(n.test(g))e=g,z=this.portalUri;else throw new A.ModuleError(A.ModuleErrorCodes.UnsupportedUriProtocol,{uri:h});e.includes("/")&&(e=e.split("/")[0]);e.includes("?")&&(e=e.split("?")[0]);h="current";C=C.exec(e);null!==C&&(h=C.groups,e=h.itemid,h=h.versionstring);g=(new d({url:z})).restUrl+"/content/items/"+e+"/resources/"+h+".arc";return{url:g,scheme:"portal",uri:"PO:"+g}}if(h.startsWith("mock")){if("mock"===h)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',
uri:"mock"};e=h.replace("mock:","");if(void 0!==k.mocks[e])return{url:"",scheme:"mock",data:k.mocks[e],uri:h}}throw new A.ModuleError(A.ModuleErrorCodes.UnrecognizedUri,{uri:h});}async fetchModule(h){var n=k.cachedModules.getFromCache(h.uri);if(n)return n;n=this.fetchSource(h);k.cachedModules.addToCache(h.uri,n);let x=null;try{x=await n}catch(I){throw k.cachedModules.removeFromCache(h.uri),I;}return x}async fetchSource(h){if("portal"===h.scheme){const n=await L(h.url,{responseType:"text",query:{}});
if(n.data)return c.parseScript(n.data,[])}if("mock"===h.scheme)return c.parseScript(h.data??"",[]);throw new A.ModuleError(A.ModuleErrorCodes.UnsupportedUriProtocol);}static create(h){return new k(h)}static getDefault(){return this._default??(k._default=k._moduleResolverFactory())}static set moduleResolverClass(h){this._moduleResolverFactory=h;this._default=null}}k.mocks={};k.cachedModules=new a(30);k._default=null;k._moduleResolverFactory=()=>{const h=d.getDefault();return new k(h.url)};r.ArcadeModuleResolver=
k;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/parser":function(){define(["exports","./treeAnalysis","./lib/arcade-parser","./lib/types"],function(r,L,A,c){r.parseScript=function(a,d=[]){a=A.parse(a);if(null===a.body||void 0===a.body)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});a.loadedModules={};L.findScriptDependencies(a,d);return a};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/lib/arcade-parser":function(){define(["exports","./parser","./tokenizer","./types"],function(r,L,A,c){r.AssignmentOperators=c.AssignmentOperators;r.BinaryOperators=c.BinaryOperators;Object.defineProperty(r,"Keywords",{enumerable:!0,get:()=>c.Keywords});r.LogicalOperators=c.LogicalOperators;r.OperatorPrecedence=c.OperatorPrecedence;r.ParsingError=c.ParsingError;Object.defineProperty(r,"ParsingErrorCodes",{enumerable:!0,get:()=>c.ParsingErrorCodes});r.ParsingErrorMessages=c.ParsingErrorMessages;
Object.defineProperty(r,"Syntax",{enumerable:!0,get:()=>c.Syntax});r.TokenNames=c.TokenNames;Object.defineProperty(r,"TokenType",{enumerable:!0,get:()=>c.TokenType});r.UnaryOperators=c.UnaryOperators;r.UpdateOperators=c.UpdateOperators;r.isArrayExpression=c.isArrayExpression;r.isAssignmentExpression=c.isAssignmentExpression;r.isBinaryExpression=c.isBinaryExpression;r.isBlockComment=c.isBlockComment;r.isBlockStatement=c.isBlockStatement;r.isBreakStatement=c.isBreakStatement;r.isCallExpression=c.isCallExpression;
r.isContinueStatement=c.isContinueStatement;r.isEmptyStatement=c.isEmptyStatement;r.isExpression=c.isExpression;r.isExpressionStatement=c.isExpressionStatement;r.isForInStatement=c.isForInStatement;r.isForStatement=c.isForStatement;r.isFunctionDeclaration=c.isFunctionDeclaration;r.isIdentifier=c.isIdentifier;r.isIfStatement=c.isIfStatement;r.isLiteral=c.isLiteral;r.isLogicalExpression=c.isLogicalExpression;r.isMemberExpression=c.isMemberExpression;r.isObjectExpression=c.isObjectExpression;r.isProgram=
c.isProgram;r.isProperty=c.isProperty;r.isReturnStatement=c.isReturnStatement;r.isStatement=c.isStatement;r.isTemplateElement=c.isTemplateElement;r.isTemplateLiteral=c.isTemplateLiteral;r.isUnaryExpression=c.isUnaryExpression;r.isUpdateExpression=c.isUpdateExpression;r.isVariableDeclaration=c.isVariableDeclaration;r.isVariableDeclarator=c.isVariableDeclarator;r.parse=function(a,d,k){return(new L.Parser(a,d,k)).parseScript()};r.tokenize=function(a,d,k){a=new A.Tokenizer(a,d);d=[];let h=void 0;try{let n;
for(;n=a.getNextToken();)k&&(n=k(n)),d.push(n)}catch(n){a.errorHandler.tolerate(n)}a.errorHandler.tolerant&&(h=a.errors());return{tokens:d,errors:h}};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/parser":function(){define(["exports","./comment-handler","./error-handler","./scanner","./types"],function(r,L,A,c,a){function d(p,C=0){let z=p.start-p.lineStart,e=p.lineNumber;0>z&&(z+=C,e--);return{index:p.start,line:e,column:z}}function k(p){return[{index:p.range[0],
...p.loc.start},{index:p.range[1],...p.loc.end}]}function h(p){return a.OperatorPrecedence[p]??0}var n;(function(p){p[p.None=0]="None";p[p.Function=1]="Function";p[p.IfClause=2]="IfClause";p[p.ForLoop=4]="ForLoop";p[p.WhileLoop=8]="WhileLoop"})(n||(n={}));var x;(function(p){p[p.AsObject=0]="AsObject";p[p.Automatic=1]="Automatic"})(x||(x={}));class I{constructor(p,C={},z){this.delegate=z;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof C.tokens&&C.tokens,comments:"boolean"===typeof C.comments&&
C.comments,tolerant:"boolean"===typeof C.tolerant&&C.tolerant};this.options.comments&&(this.commentHandler=new L.CommentHandler);this.errorHandler=new A.ErrorHandler(this.options.tolerant);this.scanner=new c.Scanner(p,this.errorHandler);this.context={isAssignmentTarget:!1,blockContext:n.None,curlyParsingType:x.AsObject};this.rawToken={type:a.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};
this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(p,C,{validTypes:z,invalidTypes:e}){z?.some(g=>p.type===g)||e?.some(g=>p.type===g)&&this.throwError(a.ParsingErrorCodes.InvalidExpression,C)}throwError(p,C,z=this.endMarker){const {index:e,line:g,column:B}=C;this.errorHandler.throwError({code:p,index:e,line:g,column:B+1,len:z.index-
e-1})}tolerateError(p,C){throw Error("######################################### !!!");}unexpectedTokenError(p={}){const {rawToken:C}=p;let {code:z,data:e}=p;if(C){if(!z)switch(C.type){case a.TokenType.EOF:z=a.ParsingErrorCodes.UnexpectedEndOfScript;break;case a.TokenType.Identifier:z=a.ParsingErrorCodes.UnexpectedIdentifier;break;case a.TokenType.NumericLiteral:z=a.ParsingErrorCodes.UnexpectedNumber;break;case a.TokenType.StringLiteral:z=a.ParsingErrorCodes.UnexpectedString;break;case a.TokenType.Template:z=
a.ParsingErrorCodes.UnexpectedTemplate}p=C.value.toString()}else p="ILLEGAL";z=z??a.ParsingErrorCodes.UnexpectedToken;e||(e={value:p});p=A.formatErrorDescription(z,e);if(C)return new a.ParsingError({code:z,index:C.start,line:C.lineNumber,column:C.start-C.lineStart+1,len:C.end-C.start-1,data:e,description:p});const {index:g,line:B}=this.endMarker;return new a.ParsingError({code:z,index:g,line:B,column:this.endMarker.column+1,data:e,description:p})}throwUnexpectedToken(p={}){p.rawToken=p.rawToken??
this.rawToken;throw this.unexpectedTokenError(p);}collectComments(p){const {commentHandler:C}=this;C&&p.length&&p.forEach(z=>{z={type:z.multiLine?a.Syntax.BlockComment:a.Syntax.LineComment,value:this.getSourceValue(z),range:z.range,loc:z.loc};C.collectComment(z)})}peekAhead(p){const C=this.scanner.saveState();p=p.call(this,()=>{this.scanner.scanComments();return this.scanner.lex()});this.scanner.restoreState(C);return p}getSourceValue(p){return this.scanner.source.slice(p.start,p.end)}convertToToken(p){return{type:a.TokenNames[p.type],
value:this.getSourceValue(p),range:[p.start,p.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;const p=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=
this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=p.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&this.rawToken.type!==a.TokenType.EOF&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(p){return{range:[p.index,this.endMarker.index],
loc:{start:{line:p.line,column:p.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(p){if(this.delegate||this.commentHandler)this.commentHandler?.attachComments(p),this.delegate?.(p);return p}expectPunctuator(p){const C=this.rawToken;this.matchPunctuator(p)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:C,code:a.ParsingErrorCodes.PunctuatorExpected,data:{value:p}})}expectKeyword(p){this.rawToken.type===a.TokenType.Keyword&&this.rawToken.value.toLowerCase()===
p?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})}expectContextualKeyword(p){this.rawToken.type===a.TokenType.Identifier&&this.rawToken.value.toLowerCase()===p?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})}matchKeyword(p){return this.rawToken.type===a.TokenType.Keyword&&this.rawToken.value.toLowerCase()===p}matchContextualKeyword(p){return this.rawToken.type===a.TokenType.Identifier&&this.rawToken.value===p}matchPunctuator(p){return this.rawToken.type===
a.TokenType.Punctuator&&this.rawToken.value===p}getMatchingPunctuator(p){"string"===typeof p&&(p=p.split(""));if(this.rawToken.type===a.TokenType.Punctuator&&p?.length)return p.find(this.matchPunctuator,this)}isolateCoverGrammar(p){const C=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;p=p.call(this);this.context.isAssignmentTarget=C;return p}inheritCoverGrammar(p){const C=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;p=p.call(this);this.context.isAssignmentTarget=
this.context.isAssignmentTarget&&C;return p}withBlockContext(p,C){const z=this.context.blockContext;this.context.blockContext|=p;p=this.context.curlyParsingType;this.context.curlyParsingType=x.Automatic;C=C.call(this);this.context.blockContext=z;this.context.curlyParsingType=p;return C}consumeSemicolon(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(this.rawToken.type===a.TokenType.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=
this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))}parsePrimaryExpression(){const p=this.captureStartMarker(),C=this.rawToken;switch(C.type){case a.TokenType.Identifier:return this.readNextRawToken(),this.finalize({type:a.Syntax.Identifier,name:C.value,...this.getItemLocation(p)});case a.TokenType.NumericLiteral:case a.TokenType.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,
value:C.value,raw:this.getSourceValue(C),isString:"string"===typeof C.value,...this.getItemLocation(p)});case a.TokenType.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:C.value.toLowerCase()===a.Keywords.True,raw:this.getSourceValue(C),isString:!1,...this.getItemLocation(p)});case a.TokenType.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:null,raw:this.getSourceValue(C),
isString:!1,...this.getItemLocation(p)});case a.TokenType.Template:return this.parseTemplateLiteral();case a.TokenType.Punctuator:switch(C.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case a.TokenType.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});
default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){const p=this.captureStartMarker();this.expectPunctuator("[");const C=[];for(;!this.matchPunctuator("]");){const z=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(a.ParsingErrorCodes.InvalidExpression,z)):(C.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize({type:a.Syntax.ArrayExpression,
elements:C,...this.getItemLocation(p)})}parseObjectPropertyKey(){const p=this.captureStartMarker(),C=this.rawToken;switch(C.type){case a.TokenType.StringLiteral:return this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:C.value,raw:this.getSourceValue(C),isString:!0,...this.getItemLocation(p)});case a.TokenType.Identifier:case a.TokenType.BooleanLiteral:case a.TokenType.NullLiteral:case a.TokenType.Keyword:return this.readNextRawToken(),this.finalize({type:a.Syntax.Identifier,name:C.value,
...this.getItemLocation(p)});default:this.throwError(a.ParsingErrorCodes.KeyMustBeString,p)}}parseObjectProperty(){const p=this.rawToken,C=this.captureStartMarker(),z=this.parseObjectPropertyKey();let e=!1,g=null;this.matchPunctuator(":")?(this.readNextRawToken(),g=this.inheritCoverGrammar(this.parseAssignmentExpression)):p.type===a.TokenType.Identifier?(e=!0,g=this.finalize({type:a.Syntax.Identifier,name:p.value,...this.getItemLocation(C)})):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize({type:a.Syntax.Property,
kind:"init",key:z,value:g,shorthand:e,...this.getItemLocation(C)})}parseObjectExpression(){const p=this.captureStartMarker();this.expectPunctuator("{");const C=[];for(;!this.matchPunctuator("}");)C.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");this.expectPunctuator("}");return this.finalize({type:a.Syntax.ObjectExpression,properties:C,...this.getItemLocation(p)})}parseTemplateElement(p=!1){var C=this.rawToken;C.type!==a.TokenType.Template&&this.throwUnexpectedToken({rawToken:C});
p&&!C.head&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidTemplateHead,rawToken:C});p=this.captureStartMarker();this.readNextRawToken();const {value:z,cooked:e,tail:g}=C;C=this.finalize({type:a.Syntax.TemplateElement,value:{raw:z,cooked:e},tail:g,...this.getItemLocation(p)});C.loc.start.column++;C.loc.end.column-=g?1:2;return C}parseTemplateLiteral(){const p=this.captureStartMarker(),C=[],z=[];let e=this.parseTemplateElement(!0);for(z.push(e);!e.tail;)C.push(this.parseExpression()),e=
this.parseTemplateElement(),z.push(e);return this.finalize({type:a.Syntax.TemplateLiteral,quasis:z,expressions:C,...this.getItemLocation(p)})}parseGroupExpression(){this.expectPunctuator("(");const p=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expectPunctuator(")");return p}parseArguments(){this.expectPunctuator("(");const p=[];if(!this.matchPunctuator(")"))for(;;){const C=this.isolateCoverGrammar(this.parseAssignmentExpression);p.push(C);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");
if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return p}parseMemberName(){const p=this.rawToken,C=this.captureStartMarker();this.readNextRawToken();p.type!==a.TokenType.NullLiteral&&p.type!==a.TokenType.Identifier&&p.type!==a.TokenType.Keyword&&p.type!==a.TokenType.BooleanLiteral&&this.throwUnexpectedToken({rawToken:p});return this.finalize({type:a.Syntax.Identifier,name:p.value,...this.getItemLocation(C)})}parseLeftHandSideExpression(){const p=this.captureStartMarker();let C=this.inheritCoverGrammar(this.parsePrimaryExpression);
const z=this.captureStartMarker();for(var e;e=this.getMatchingPunctuator("([.");)switch(e){case "(":this.context.isAssignmentTarget=!1;C.type!==a.Syntax.Identifier&&C.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.IdentiferExpected,p,z);e=this.parseArguments();C=this.finalize({type:a.Syntax.CallExpression,callee:C,arguments:e,...this.getItemLocation(p)});continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");e=this.isolateCoverGrammar(this.parseExpression);
this.expectPunctuator("]");C=this.finalize({type:a.Syntax.MemberExpression,computed:!0,object:C,property:e,...this.getItemLocation(p)});continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),e=this.parseMemberName(),C=this.finalize({type:a.Syntax.MemberExpression,computed:!1,object:C,property:e,...this.getItemLocation(p)})}return C}parseUpdateExpression(){const p=this.captureStartMarker();let C=this.getMatchingPunctuator(a.UpdateOperators);if(C){this.readNextRawToken();var z=
this.captureStartMarker(),e=this.inheritCoverGrammar(this.parseUnaryExpression);e.type!==a.Syntax.Identifier&&e.type!==a.Syntax.MemberExpression&&e.type!==a.Syntax.CallExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,z);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,p);this.context.isAssignmentTarget=!1;return this.finalize({type:a.Syntax.UpdateExpression,operator:C,argument:e,prefix:!0,...this.getItemLocation(p)})}z=this.captureStartMarker();
e=this.inheritCoverGrammar(this.parseLeftHandSideExpression);const g=this.captureStartMarker();if(this.hasLineTerminator)return e;C=this.getMatchingPunctuator(a.UpdateOperators);if(!C)return e;e.type!==a.Syntax.Identifier&&e.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,z,g);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,p);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize({type:a.Syntax.UpdateExpression,
operator:C,argument:e,prefix:!1,...this.getItemLocation(p)})}parseUnaryExpression(){const p=this.getMatchingPunctuator(a.UnaryOperators);if(p){const C=this.captureStartMarker();this.readNextRawToken();const z=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize({type:a.Syntax.UnaryExpression,operator:p,argument:z,prefix:!0,...this.getItemLocation(C)})}return this.parseUpdateExpression()}parseBinaryExpression(){var p=this.rawToken,C=this.inheritCoverGrammar(this.parseUnaryExpression);
if(this.rawToken.type!==a.TokenType.Punctuator)return C;var z=this.rawToken.value,e=h(z);if(0===e)return C;this.readNextRawToken();this.context.isAssignmentTarget=!1;p=[p,this.rawToken];var g=this.inheritCoverGrammar(this.parseUnaryExpression);z=[C,z,g];for(var B=[e];this.rawToken.type===a.TokenType.Punctuator&&0<(e=h(this.rawToken.value));){for(;2<z.length&&e<=B[B.length-1];){g=z.pop();const u=z.pop();B.pop();C=z.pop();p.pop();var q=p[p.length-1];q=d(q,q.lineStart);z.push(this.finalize(this.createBinaryOrLogicalExpression(q,
u,C,g)))}z.push(this.rawToken.value);B.push(e);p.push(this.rawToken);this.readNextRawToken();z.push(this.inheritCoverGrammar(this.parseUnaryExpression))}e=z.length-1;C=z[e];for(B=p.pop();1<e;){g=p.pop();if(!g)break;B=d(g,B?.lineStart);C=this.finalize(this.createBinaryOrLogicalExpression(B,z[e-1],z[e-2],C));e-=2;B=g}return C}createBinaryOrLogicalExpression(p,C,z,e){const g=a.LogicalOperators.includes(C)?a.Syntax.LogicalExpression:a.Syntax.BinaryExpression;if(g===a.Syntax.BinaryExpression)return{type:g,
operator:C,left:z,right:e,...this.getItemLocation(p)};z.type!==a.Syntax.AssignmentExpression&&z.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,...k(z));e.type!==a.Syntax.AssignmentExpression&&e.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,...k(z));return{type:g,operator:C,left:z,right:e,...this.getItemLocation(p)}}parseAssignmentExpression(){const p=this.captureStartMarker(),C=this.inheritCoverGrammar(this.parseBinaryExpression);
var z=this.captureStartMarker();const e=this.getMatchingPunctuator(a.AssignmentOperators);if(!e)return C;C.type!==a.Syntax.Identifier&&C.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,p,z);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,p);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();z=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:a.Syntax.AssignmentExpression,
left:C,operator:e,right:z,...this.getItemLocation(p)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression)}parseStatements(p){const C=[];for(;this.rawToken.type!==a.TokenType.EOF&&!this.matchPunctuator(p);){const z=this.parseStatementListItem();a.isEmptyStatement(z)||C.push(z)}return C}parseStatementListItem(){this.context.isAssignmentTarget=!0;return this.matchKeyword(a.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(a.Keywords.Export)?this.parseExportDeclaration():
this.matchKeyword(a.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){const p=this.captureStartMarker();this.expectPunctuator("{");const C=this.parseStatements("}");this.expectPunctuator("}");return this.finalize({type:a.Syntax.BlockStatement,body:C,...this.getItemLocation(p)})}parseObjectStatement(){const p=this.captureStartMarker(),C=this.parseObjectExpression();return this.finalize({type:a.Syntax.ExpressionStatement,expression:C,...this.getItemLocation(p)})}parseBlockOrObjectStatement(){return this.context.curlyParsingType===
x.AsObject||this.peekAhead(p=>{let C=p();if(C.type!==a.TokenType.Identifier&&C.type!==a.TokenType.StringLiteral)return!1;C=p();return C.type!==a.TokenType.Punctuator||":"!==C.value?!1:!0})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){const p=this.rawToken;if(p.type!==a.TokenType.Identifier)return null;const C=this.captureStartMarker();this.readNextRawToken();return this.finalize({type:a.Syntax.Identifier,name:p.value,...this.getItemLocation(C)})}parseVariableDeclarator(){const p=
this.captureStartMarker(),C=this.parseIdentifier();C||this.throwUnexpectedToken({code:a.ParsingErrorCodes.IdentiferExpected});let z=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();const e=this.rawToken;try{z=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(g){this.throwUnexpectedToken({rawToken:e,code:a.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize({type:a.Syntax.VariableDeclarator,id:C,init:z,...this.getItemLocation(p)})}parseVariableDeclarationList(){const p=
[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),p.push(this.parseVariableDeclarator());return p}parseVariableDeclaration(){const p=this.captureStartMarker();this.expectKeyword(a.Keywords.Var);const C=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize({type:a.Syntax.VariableDeclaration,declarations:C,kind:"var",...this.getItemLocation(p)})}parseEmptyStatement(){const p=this.captureStartMarker();this.expectPunctuator(";");return this.finalize({type:a.Syntax.EmptyStatement,
...this.getItemLocation(p)})}parseExpressionStatement(){const p=this.captureStartMarker(),C=this.parseExpression();this.consumeSemicolon();return this.finalize({type:a.Syntax.ExpressionStatement,expression:C,...this.getItemLocation(p)})}parseIfClause(){return this.withBlockContext(n.IfClause,this.parseStatement)}parseIfStatement(){const p=this.captureStartMarker();this.expectKeyword(a.Keywords.If);this.expectPunctuator("(");var C=this.captureStartMarker();const z=this.parseExpression();var e=this.captureStartMarker();
this.expectPunctuator(")");z.type!==a.Syntax.AssignmentExpression&&z.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,C,e);C=this.parseIfClause();e=null;this.matchKeyword(a.Keywords.Else)&&(this.readNextRawToken(),e=this.parseIfClause());return this.finalize({type:a.Syntax.IfStatement,test:z,consequent:C,alternate:e,...this.getItemLocation(p)})}parseWhileStatement(){const p=this.captureStartMarker();this.expectKeyword(a.Keywords.While);this.expectPunctuator("(");
var C=this.captureStartMarker();const z=this.parseExpression(),e=this.captureStartMarker();this.expectPunctuator(")");z.type!==a.Syntax.AssignmentExpression&&z.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,C,e);C=this.withBlockContext(n.WhileLoop,this.parseStatement);return this.finalize({type:a.Syntax.WhileStatement,test:z,body:C,...this.getItemLocation(p)})}parseForStatement(){let p=null,C=null,z=null,e=null,g=null;const B=this.captureStartMarker();this.expectKeyword(a.Keywords.For);
this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(a.Keywords.Var)){var q=this.captureStartMarker();this.readNextRawToken();var u=this.parseVariableDeclarationList();1===u.length&&this.matchKeyword(a.Keywords.In)?(u[0].init&&this.throwError(a.ParsingErrorCodes.ForInOfLoopInitializer,q),e=this.finalize({type:a.Syntax.VariableDeclaration,declarations:u,kind:"var",...this.getItemLocation(q)}),this.readNextRawToken(),g=this.parseExpression()):(this.matchKeyword(a.Keywords.In)&&
this.throwError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,q),p=this.finalize({type:a.Syntax.VariableDeclaration,declarations:u,kind:"var",...this.getItemLocation(q)}),this.expectPunctuator(";"))}else q=this.context.isAssignmentTarget,u=this.captureStartMarker(),p=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(a.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,u),p.type!==a.Syntax.Identifier&&this.throwError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,
u),this.readNextRawToken(),e=p,g=this.parseExpression(),p=null):(this.context.isAssignmentTarget=q,this.expectPunctuator(";"));e||(this.matchPunctuator(";")||(C=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(z=this.isolateCoverGrammar(this.parseExpression)));this.expectPunctuator(")");q=this.withBlockContext(n.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return e&&g?this.finalize({type:a.Syntax.ForInStatement,left:e,right:g,body:q,
...this.getItemLocation(B)}):this.finalize({type:a.Syntax.ForStatement,init:p,test:C,update:z,body:q,...this.getItemLocation(B)})}parseContinueStatement(){const p=this.captureStartMarker();this.expectKeyword(a.Keywords.Continue);this.consumeSemicolon();return this.finalize({type:a.Syntax.ContinueStatement,...this.getItemLocation(p)})}parseBreakStatement(){const p=this.captureStartMarker();this.expectKeyword(a.Keywords.Break);this.consumeSemicolon();return this.finalize({type:a.Syntax.BreakStatement,
...this.getItemLocation(p)})}parseReturnStatement(){const p=this.captureStartMarker();this.expectKeyword(a.Keywords.Return);const C=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===a.TokenType.EOF)&&this.rawToken.type!==a.TokenType.StringLiteral&&this.rawToken.type!==a.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize({type:a.Syntax.ReturnStatement,argument:C,...this.getItemLocation(p)})}parseStatement(){switch(this.rawToken.type){case a.TokenType.BooleanLiteral:case a.TokenType.NullLiteral:case a.TokenType.NumericLiteral:case a.TokenType.StringLiteral:case a.TokenType.Template:case a.TokenType.Identifier:return this.parseExpressionStatement();
case a.TokenType.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case a.TokenType.Keyword:switch(this.rawToken.value.toLowerCase()){case a.Keywords.Break:return this.parseBreakStatement();case a.Keywords.Continue:return this.parseContinueStatement();case a.Keywords.For:return this.parseForStatement();case a.Keywords.Function:return this.parseFunctionDeclaration();
case a.Keywords.If:return this.parseIfStatement();case a.Keywords.Return:return this.parseReturnStatement();case a.Keywords.Var:return this.parseVariableDeclaration();case a.Keywords.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){const p=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;this.rawToken.type!==a.TokenType.EOF;){const C=this.parseIdentifier();
C||this.throwUnexpectedToken({rawToken:this.rawToken,code:a.ParsingErrorCodes.IdentiferExpected});p.push(C);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return p}parseFunctionDeclaration(){(this.context.blockContext&n.Function)===n.Function&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&n.WhileLoop)!==n.WhileLoop&&(this.context.blockContext&n.IfClause)!==n.IfClause||
this.throwUnexpectedToken({code:a.ParsingErrorCodes.NoFunctionInsideBlock});const p=this.captureStartMarker();this.expectKeyword(a.Keywords.Function);const C=this.parseIdentifier();C||this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidFunctionIdentifier});const z=this.parseFormalParameters(),e=this.context.blockContext;this.context.blockContext|=n.Function;const g=this.parseBlock();this.context.blockContext=e;return this.finalize({type:a.Syntax.FunctionDeclaration,id:C,params:z,body:g,...this.getItemLocation(p)})}parseScript(){var p=
this.captureStartMarker();const C=this.parseStatements();p=this.finalize({type:a.Syntax.Program,body:C,...this.getItemLocation(p)});this.options.tokens&&(p.tokens=this.tokens);this.options.tolerant&&(p.errors=this.errorHandler.errors);return p}parseExportDeclaration(){this.context.blockContext!==n.None&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.ModuleExportRootOnly});let p=null;const C=this.captureStartMarker();this.expectKeyword(a.Keywords.Export);this.matchKeyword(a.Keywords.Var)?p=this.parseVariableDeclaration():
this.matchKeyword("function")?p=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidExpression});return this.finalize({type:a.Syntax.ExportNamedDeclaration,declaration:p,specifiers:[],source:null,...this.getItemLocation(C)})}parseModuleSpecifier(){const p=this.captureStartMarker(),C=this.rawToken;if(C.type===a.TokenType.StringLiteral)return this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:C.value,raw:this.getSourceValue(C),isString:!0,...this.getItemLocation(p)});
this.throwError(a.ParsingErrorCodes.InvalidModuleUri,p)}parseDefaultSpecifier(){const p=this.captureStartMarker(),C=this.parseIdentifier();C||this.throwUnexpectedToken({code:a.ParsingErrorCodes.IdentiferExpected});return this.finalize({type:a.Syntax.ImportDefaultSpecifier,local:C,...this.getItemLocation(p)})}parseImportDeclaration(){this.context.blockContext!==n.None&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.ModuleImportRootOnly});const p=this.captureStartMarker();this.expectKeyword(a.Keywords.Import);
const C=this.parseDefaultSpecifier();this.expectContextualKeyword(a.Keywords.From);const z=this.parseModuleSpecifier();return this.finalize({type:a.Syntax.ImportDeclaration,specifiers:[C],source:z,...this.getItemLocation(p)})}}r.Parser=I;r.binaryOperatorPrecedence=h;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/comment-handler":function(){define(["exports","./types"],function(r,L){function A(a,d){return d?d.loc.end.line===a.loc.start.line&&d.loc.end.column<=a.loc.start.column:
!1}class c{constructor(){this.comments=[];this._nodeStack=[];this._newComments=[]}insertInnerComments(a){if(L.isBlockStatement(a)&&0===a.body.length){var d=[];for(let k=this._newComments.length-1;0<=k;--k){const h=this._newComments[k];a.range[1]>=h.range[0]&&(d.unshift(h),this._newComments.splice(k,1))}d.length&&(a.innerComments=d)}}attachTrailingComments(a){if(a){var d=this._nodeStack[this._nodeStack.length-1];if(L.isBlockStatement(a)&&d.range[0]>=a.range[0]&&d.range[1]<=a.range[1])for(var k=this._newComments.length-
1;0<=k;--k){var h=this._newComments[k];h.range[0]>=a.range[0]&&h.range[1]<=a.range[1]&&(d.trailingComments=[...(d.trailingComments??[]),h],this._newComments.splice(k,1))}k=[];if(0<this._newComments.length)for(h=this._newComments.length-1;0<=h;--h){const n=this._newComments[h];A(n,d)?(d.trailingComments=[...(d.trailingComments??[]),n],this._newComments.splice(h,1)):A(n,a)&&(k.unshift(n),this._newComments.splice(h,1))}d?.trailingComments&&A(d.trailingComments[0],a)&&(k=[...k,...d.trailingComments],
delete d.trailingComments);0<k.length&&(a.trailingComments=k)}}attachLeadingComments(a){if(a){for(var d;0<this._nodeStack.length;){var k=this._nodeStack[this._nodeStack.length-1];if(a.range[0]<=k.range[0])d=k,this._nodeStack.pop();else break}k=[];var h=[];if(d){var n=d.leadingComments?.length??0;for(--n;0<=n;--n){const x=d.leadingComments[n];a.range[0]>=x.range[1]?(k.unshift(x),d.leadingComments.splice(n,1)):L.isVariableDeclarator(a)&&!L.isBlockComment(x)&&(h.unshift(x),d.leadingComments.splice(n,
1))}0===d.leadingComments?.length&&delete d.leadingComments;k.length&&(a.leadingComments=k);h.length&&(a.trailingComments=[...h,...(a.trailingComments??[])])}else{for(d=this._newComments.length-1;0<=d;--d)h=this._newComments[d],a.range[0]>=h.range[0]&&(k.unshift(h),this._newComments.splice(d,1));k.length&&(a.leadingComments=k)}}}attachComments(a){if(L.isProgram(a)&&0<a.body.length){const d=this._nodeStack[this._nodeStack.length-1];d?(d.trailingComments=[...(d.trailingComments??[]),...this._newComments],
this._newComments.length=0,this._nodeStack.pop()):(a.trailingComments=[...this._newComments],this._newComments.length=0)}else this.attachTrailingComments(a),this.attachLeadingComments(a),this.insertInnerComments(a),this._nodeStack.push(a)}collectComment(a){this.comments.push(a);this._newComments.push(a)}}r.CommentHandler=c;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/types":function(){define(["exports"],function(r){r.Keywords=void 0;(function(c){c.Break="break";
c.Continue="continue";c.Else="else";c.False="false";c.For="for";c.From="from";c.Function="function";c.If="if";c.Import="import";c.Export="export";c.In="in";c.Null="null";c.Return="return";c.True="true";c.Var="var";c.While="while"})(r.Keywords||(r.Keywords={}));r.Syntax=void 0;(function(c){c.AssignmentExpression="AssignmentExpression";c.ArrayExpression="ArrayExpression";c.BlockComment="BlockComment";c.BlockStatement="BlockStatement";c.BinaryExpression="BinaryExpression";c.BreakStatement="BreakStatement";
c.CallExpression="CallExpression";c.ContinueStatement="ContinueStatement";c.EmptyStatement="EmptyStatement";c.ExpressionStatement="ExpressionStatement";c.ExportNamedDeclaration="ExportNamedDeclaration";c.ExportSpecifier="ExportSpecifier";c.ForStatement="ForStatement";c.ForInStatement="ForInStatement";c.FunctionDeclaration="FunctionDeclaration";c.Identifier="Identifier";c.IfStatement="IfStatement";c.ImportDeclaration="ImportDeclaration";c.ImportDefaultSpecifier="ImportDefaultSpecifier";c.LineComment=
"LineComment";c.Literal="Literal";c.LogicalExpression="LogicalExpression";c.MemberExpression="MemberExpression";c.ObjectExpression="ObjectExpression";c.Program="Program";c.Property="Property";c.ReturnStatement="ReturnStatement";c.TemplateElement="TemplateElement";c.TemplateLiteral="TemplateLiteral";c.UnaryExpression="UnaryExpression";c.UpdateExpression="UpdateExpression";c.VariableDeclaration="VariableDeclaration";c.VariableDeclarator="VariableDeclarator";c.WhileStatement="WhileStatement"})(r.Syntax||
(r.Syntax={}));r.TokenType=void 0;(function(c){c[c.Unknown=0]="Unknown";c[c.BooleanLiteral=1]="BooleanLiteral";c[c.EOF=2]="EOF";c[c.Identifier=3]="Identifier";c[c.Keyword=4]="Keyword";c[c.NullLiteral=5]="NullLiteral";c[c.NumericLiteral=6]="NumericLiteral";c[c.Punctuator=7]="Punctuator";c[c.StringLiteral=8]="StringLiteral";c[c.Template=10]="Template"})(r.TokenType||(r.TokenType={}));r.ParsingErrorCodes=void 0;(function(c){c.InvalidModuleUri="InvalidModuleUri";c.ForInOfLoopInitializer="ForInOfLoopInitializer";
c.IdentiferExpected="IdentiferExpected";c.InvalidEscapedReservedWord="InvalidEscapedReservedWord";c.InvalidExpression="InvalidExpression";c.InvalidFunctionIdentifier="InvalidFunctionIdentifier";c.InvalidHexEscapeSequence="InvalidHexEscapeSequence";c.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";c.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";c.InvalidTemplateHead="InvalidTemplateHead";c.InvalidVariableAssignment="InvalidVariableAssignment";c.KeyMustBeString="KeyMustBeString";
c.NoFunctionInsideBlock="NoFunctionInsideBlock";c.NoFunctionInsideFunction="NoFunctionInsideFunction";c.ModuleExportRootOnly="ModuleExportRootOnly";c.ModuleImportRootOnly="ModuleImportRootOnly";c.PunctuatorExpected="PunctuatorExpected";c.TemplateOctalLiteral="TemplateOctalLiteral";c.UnexpectedBoolean="UnexpectedBoolean";c.UnexpectedEndOfScript="UnexpectedEndOfScript";c.UnexpectedIdentifier="UnexpectedIdentifier";c.UnexpectedKeyword="UnexpectedKeyword";c.UnexpectedNull="UnexpectedNull";c.UnexpectedNumber=
"UnexpectedNumber";c.UnexpectedPunctuator="UnexpectedPunctuator";c.UnexpectedString="UnexpectedString";c.UnexpectedTemplate="UnexpectedTemplate";c.UnexpectedToken="UnexpectedToken"})(r.ParsingErrorCodes||(r.ParsingErrorCodes={}));const L={[r.ParsingErrorCodes.InvalidModuleUri]:"Module uri must be a text literal.",[r.ParsingErrorCodes.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[r.ParsingErrorCodes.IdentiferExpected]:"'${value}' is an invalid identifier.",
[r.ParsingErrorCodes.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[r.ParsingErrorCodes.InvalidExpression]:"Invalid expression.",[r.ParsingErrorCodes.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[r.ParsingErrorCodes.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[r.ParsingErrorCodes.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[r.ParsingErrorCodes.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",
[r.ParsingErrorCodes.InvalidTemplateHead]:"Invalid template structure.",[r.ParsingErrorCodes.InvalidVariableAssignment]:"Invalid variable assignment.",[r.ParsingErrorCodes.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[r.ParsingErrorCodes.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[r.ParsingErrorCodes.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[r.ParsingErrorCodes.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",
[r.ParsingErrorCodes.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[r.ParsingErrorCodes.PunctuatorExpected]:"'${value}' expected.",[r.ParsingErrorCodes.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[r.ParsingErrorCodes.UnexpectedBoolean]:"Unexpected boolean literal.",[r.ParsingErrorCodes.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[r.ParsingErrorCodes.UnexpectedIdentifier]:"Unexpected identifier.",[r.ParsingErrorCodes.UnexpectedKeyword]:"Unexpected keyword.",
[r.ParsingErrorCodes.UnexpectedNull]:"Unexpected null literal.",[r.ParsingErrorCodes.UnexpectedNumber]:"Unexpected number.",[r.ParsingErrorCodes.UnexpectedPunctuator]:"Unexpected ponctuator.",[r.ParsingErrorCodes.UnexpectedString]:"Unexpected text literal.",[r.ParsingErrorCodes.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[r.ParsingErrorCodes.UnexpectedToken]:"Unexpected token '${value}'."};class A extends Error{constructor({code:c,index:a,line:d,column:k,len:h=0,description:n,data:x}){super(`${n??
c}`);this.declaredRootClass="esri.arcade.lib.parsingerror";this.name="ParsingError";this.code=c;this.index=a;this.line=d;this.column=k;this.len=h;this.data=x;this.description=n;this.range={start:{line:d,column:k-1},end:{line:d,column:k+h}};Error.captureStackTrace?.(this,A)}}r.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");r.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");r.LogicalOperators=["||","\x26\x26"];
r.OperatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};r.ParsingError=A;r.ParsingErrorMessages=L;r.TokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");r.UnaryOperators=["-","+","!","~"];r.UpdateOperators=["++","--"];r.isArrayExpression=function(c){return c?.type===r.Syntax.ArrayExpression};
r.isAssignmentExpression=function(c){return c?.type===r.Syntax.AssignmentExpression};r.isBinaryExpression=function(c){return c?.type===r.Syntax.BinaryExpression};r.isBlockComment=function(c){return c?.type===r.Syntax.BlockComment};r.isBlockStatement=function(c){return c?.type===r.Syntax.BlockStatement};r.isBreakStatement=function(c){return c?.type===r.Syntax.BreakStatement};r.isCallExpression=function(c){return c?.type===r.Syntax.CallExpression};r.isContinueStatement=function(c){return c?.type===
r.Syntax.ContinueStatement};r.isEmptyStatement=function(c){return c?.type===r.Syntax.EmptyStatement};r.isExpression=function(c){switch(c?.type){case r.Syntax.ArrayExpression:case r.Syntax.AssignmentExpression:case r.Syntax.BinaryExpression:case r.Syntax.CallExpression:case r.Syntax.Identifier:case r.Syntax.Literal:case r.Syntax.LogicalExpression:case r.Syntax.MemberExpression:case r.Syntax.ObjectExpression:case r.Syntax.TemplateLiteral:case r.Syntax.UpdateExpression:case r.Syntax.UnaryExpression:return!0;
default:return!1}};r.isExpressionStatement=function(c){return c?.type===r.Syntax.ExpressionStatement};r.isForInStatement=function(c){return c?.type===r.Syntax.ForInStatement};r.isForStatement=function(c){return c?.type===r.Syntax.ForStatement};r.isFunctionDeclaration=function(c){return c?.type===r.Syntax.FunctionDeclaration};r.isIdentifier=function(c){return c?.type===r.Syntax.Identifier};r.isIfStatement=function(c){return c?.type===r.Syntax.IfStatement};r.isLiteral=function(c){return c?.type===r.Syntax.Literal};
r.isLogicalExpression=function(c){return c?.type===r.Syntax.LogicalExpression};r.isMemberExpression=function(c){return c?.type===r.Syntax.MemberExpression};r.isObjectExpression=function(c){return c?.type===r.Syntax.ObjectExpression};r.isProgram=function(c){return c?.type===r.Syntax.Program};r.isProperty=function(c){return c?.type===r.Syntax.Property};r.isReturnStatement=function(c){return c?.type===r.Syntax.ReturnStatement};r.isStatement=function(c){switch(c?.type){case r.Syntax.BlockStatement:case r.Syntax.BreakStatement:case r.Syntax.ContinueStatement:case r.Syntax.EmptyStatement:case r.Syntax.ExpressionStatement:case r.Syntax.ForInStatement:case r.Syntax.ForStatement:case r.Syntax.FunctionDeclaration:case r.Syntax.IfStatement:case r.Syntax.ReturnStatement:case r.Syntax.VariableDeclaration:return!0;
default:return!1}};r.isTemplateElement=function(c){return c?.type===r.Syntax.TemplateElement};r.isTemplateLiteral=function(c){return c?.type===r.Syntax.TemplateLiteral};r.isUnaryExpression=function(c){return c?.type===r.Syntax.UnaryExpression};r.isUpdateExpression=function(c){return c?.type===r.Syntax.UpdateExpression};r.isVariableDeclaration=function(c){return c?.type===r.Syntax.VariableDeclaration};r.isVariableDeclarator=function(c){return c?.type===r.Syntax.VariableDeclarator};Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/error-handler":function(){define(["exports","./types"],function(r,L){function A(a,d){a=L.ParsingErrorMessages[a];return d?a.replaceAll(/\${(.*?)}/g,(k,h)=>d[h]?.toString()??""):a}class c{constructor(a=!1){this.tolerant=a;this.errors=[]}recordError(a){this.errors.push(a)}tolerate(a){if(this.tolerant)this.recordError(a);else throw a;}throwError(a){a.description=a.description??A(a.code,a.data);throw new L.ParsingError(a);}tolerateError(a){a.description=
a.description??A(a.code,a.data);a=new L.ParsingError(a);if(this.tolerant)this.recordError(a);else throw a;}}r.ErrorHandler=c;r.formatErrorDescription=A;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/scanner":function(){define(["exports","./assert","./character","./types"],function(r,L,A,c){const a=[[],[],[]];c.UpdateOperators.forEach(k=>a[k.length-1].push(k));c.UnaryOperators.forEach(k=>a[k.length-1].push(k));c.LogicalOperators.forEach(k=>a[k.length-1].push(k));c.AssignmentOperators.forEach(k=>
a[k.length-1].push(k));c.BinaryOperators.forEach(k=>a[k.length-1].push(k));class d{constructor(k,h){this.source=k;this.errorHandler=h;this._length=k.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(k){this.index=k.index;this.lineNumber=k.lineNumber;this.lineStart=k.lineStart;this.curlyStack=k.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(k=
c.ParsingErrorCodes.UnexpectedToken){this.errorHandler.throwError({code:k,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}tolerateUnexpectedToken(k=c.ParsingErrorCodes.UnexpectedToken){this.errorHandler.tolerateError({code:k,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(k){const h=[],n=this.index-k,x={start:{line:this.lineNumber,column:this.index-this.lineStart-k},end:{line:0,column:0}};for(;!this.eof();){const I=this.source.charCodeAt(this.index);
++this.index;if(A.Character.isLineTerminator(I))return x&&(x.end={line:this.lineNumber,column:this.index-this.lineStart-1},h.push({multiLine:!1,start:n+k,end:this.index-1,range:[n,this.index-1],loc:x})),13===I&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,h}x&&(x.end={line:this.lineNumber,column:this.index-this.lineStart},h.push({multiLine:!1,start:n+k,end:this.index,range:[n,this.index],loc:x}));return h}skipMultiLineComment(){const k=[],h=this.index-
2,n={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const x=this.source.charCodeAt(this.index);if(A.Character.isLineTerminator(x))13===x&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===x&&47===this.source.charCodeAt(this.index+1))return this.index+=2,n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},k.push({multiLine:!0,start:h+2,end:this.index-
2,range:[h,this.index],loc:n})),k;++this.index}}n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},k.push({multiLine:!0,start:h+2,end:this.index,range:[h,this.index],loc:n}));this.tolerateUnexpectedToken();return k}scanComments(){let k=[];for(;!this.eof();){var h=this.source.charCodeAt(this.index);if(A.Character.isWhiteSpace(h))++this.index;else if(A.Character.isLineTerminator(h))++this.index,13===h&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=
this.index;else if(47===h)if(h=this.source.charCodeAt(this.index+1),47===h)this.index+=2,h=this.skipSingleLineComment(2),k=[...k,...h];else if(42===h)this.index+=2,h=this.skipMultiLineComment(),k=[...k,...h];else break;else break}return k}isKeyword(k){k=k.toLowerCase();switch(k.length){case 2:return k===c.Keywords.If||k===c.Keywords.In;case 3:return k===c.Keywords.Var||k===c.Keywords.For;case 4:return k===c.Keywords.Else;case 5:return k===c.Keywords.Break||k===c.Keywords.While;case 6:return k===c.Keywords.Return||
k===c.Keywords.Import||k===c.Keywords.Export;case 8:return k===c.Keywords.Function||k===c.Keywords.Continue;default:return!1}}codePointAt(k){let h=this.source.charCodeAt(k);55296<=h&&56319>=h&&(k=this.source.charCodeAt(k+1),56320<=k&&57343>=k&&(h=1024*(h-55296)+k-56320+65536));return h}scanHexEscape(k){k="u"===k?4:2;let h=0;for(let n=0;n<k;++n)if(!this.eof()&&A.Character.isHexDigit(this.source.charCodeAt(this.index)))h=16*h+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;
return String.fromCharCode(h)}scanUnicodeCodePointEscape(){let k=this.source[this.index],h=0;for("}"===k&&this.throwUnexpectedToken();!this.eof();){k=this.source[this.index++];if(!A.Character.isHexDigit(k.charCodeAt(0)))break;h=16*h+"0123456789abcdef".indexOf(k.toLowerCase())}(1114111<h||"}"!==k)&&this.throwUnexpectedToken();return A.Character.fromCodePoint(h)}getIdentifier(){const k=this.index++;for(;!this.eof();){const h=this.source.charCodeAt(this.index);if(92===h||55296<=h&&57343>h)return this.index=
k,this.getComplexIdentifier();if(A.Character.isIdentifierPart(h))++this.index;else break}return this.source.slice(k,this.index)}getComplexIdentifier(){let k=this.codePointAt(this.index),h=A.Character.fromCodePoint(k);this.index+=h.length;let n;92===k&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,n=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape("u"),null!==n&&"\\"!==n&&A.Character.isIdentifierStart(n.charCodeAt(0))||
this.throwUnexpectedToken()),h=n);for(;!this.eof();){k=this.codePointAt(this.index);if(!A.Character.isIdentifierPart(k))break;n=A.Character.fromCodePoint(k);h+=n;this.index+=n.length;92===k&&(h=h.substring(0,h.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,n=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape("u"),null!==n&&"\\"!==n&&A.Character.isIdentifierPart(n.charCodeAt(0))||this.throwUnexpectedToken()),
h+=n)}return h}octalToDecimal(k){let h="0"!==k,n="01234567".indexOf(k);!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(h=!0,n=8*n+"01234567".indexOf(this.source[this.index++]),"0123".includes(k)&&!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+"01234567".indexOf(this.source[this.index++])));return{code:n,octal:h}}scanIdentifier(){let k;const h=this.index,n=92===this.source.charCodeAt(h)?this.getComplexIdentifier():this.getIdentifier();
k=1===n.length?c.TokenType.Identifier:this.isKeyword(n)?c.TokenType.Keyword:n.toLowerCase()===c.Keywords.Null?c.TokenType.NullLiteral:n.toLowerCase()===c.Keywords.True||n.toLowerCase()===c.Keywords.False?c.TokenType.BooleanLiteral:c.TokenType.Identifier;if(k!==c.TokenType.Identifier&&h+n.length!==this.index){const x=this.index;this.index=h;this.tolerateUnexpectedToken(c.ParsingErrorCodes.InvalidEscapedReservedWord);this.index=x}return{type:k,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,
start:h,end:this.index}}scanPunctuator(){const k=this.index;let h=this.source[this.index];switch(h){case "(":case "{":"{"===h&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(let n=a.length;0<n;n--)if(h=this.source.substring(this.index,this.index+n),a[n-1].includes(h)){this.index+=n;break}}this.index===k&&this.throwUnexpectedToken();
return{type:c.TokenType.Punctuator,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}}scanHexLiteral(k){let h="";for(;!this.eof()&&A.Character.isHexDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];0===h.length&&this.throwUnexpectedToken();A.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:c.TokenType.NumericLiteral,value:parseInt("0x"+h,16),lineNumber:this.lineNumber,lineStart:this.lineStart,
start:k,end:this.index}}scanBinaryLiteral(k){let h="";for(;!this.eof();){var n=this.source[this.index];if("0"!==n&&"1"!==n)break;h+=this.source[this.index++]}0===h.length&&this.throwUnexpectedToken();this.eof()||(n=this.source.charCodeAt(this.index),(A.Character.isIdentifierStart(n)||A.Character.isDecimalDigit(n))&&this.throwUnexpectedToken());return{type:c.TokenType.NumericLiteral,value:parseInt(h,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}}scanOctalLiteral(k,h){let n=
"",x=!1;A.Character.isOctalDigit(k.charCodeAt(0))?(x=!0,n="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];x||0!==n.length||this.throwUnexpectedToken();(A.Character.isIdentifierStart(this.source.charCodeAt(this.index))||A.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:c.TokenType.NumericLiteral,value:parseInt(n,8),lineNumber:this.lineNumber,
lineStart:this.lineStart,start:h,end:this.index}}scanNumericLiteral(){const k=this.index;let h=this.source[k];L.assert(A.Character.isDecimalDigit(h.charCodeAt(0))||"."===h,"Numeric literal must start with a decimal digit or a decimal point");let n="";if("."!==h){n=this.source[this.index++];h=this.source[this.index];if("0"===n){if("x"===h||"X"===h)return++this.index,this.scanHexLiteral(k);if("b"===h||"B"===h)return++this.index,this.scanBinaryLiteral(k);if("o"===h||"O"===h)return this.scanOctalLiteral(h,
k)}for(;A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];h=this.source[this.index]}if("."===h){for(n+=this.source[this.index++];A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];h=this.source[this.index]}if("e"===h||"E"===h){n+=this.source[this.index++];h=this.source[this.index];if("+"===h||"-"===h)n+=this.source[this.index++];if(A.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=
this.source[this.index++];else this.throwUnexpectedToken()}A.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:c.TokenType.NumericLiteral,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}}scanStringLiteral(){const k=this.index;let h=this.source[k];L.assert("'"===h||'"'===h,"String literal must starts with a quote");++this.index;let n="";for(;!this.eof();){var x=this.source[this.index++];if(x===h){h=
"";break}if("\\"===x)if((x=this.source[this.index++])&&A.Character.isLineTerminator(x.charCodeAt(0)))++this.lineNumber,"\r"===x&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(x){case "u":"{"===this.source[this.index]?(++this.index,n+=this.scanUnicodeCodePointEscape()):(x=this.scanHexEscape(x),null===x&&this.throwUnexpectedToken(),n+=x);break;case "x":x=this.scanHexEscape(x);null===x&&this.throwUnexpectedToken(c.ParsingErrorCodes.InvalidHexEscapeSequence);n+=x;
break;case "n":n+="\n";break;case "r":n+="\r";break;case "t":n+="\t";break;case "b":n+="\b";break;case "f":n+="\f";break;case "v":n+="\v";break;case "8":case "9":n+=x;this.tolerateUnexpectedToken();break;default:x&&A.Character.isOctalDigit(x.charCodeAt(0))?(x=this.octalToDecimal(x),n+=String.fromCharCode(x.code)):n+=x}else if(A.Character.isLineTerminator(x.charCodeAt(0)))break;else n+=x}""!==h&&(this.index=k,this.throwUnexpectedToken());return{type:c.TokenType.StringLiteral,value:n,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:k,end:this.index}}scanTemplate(){let k="",h=!1;const n=this.index,x="`"===this.source[n];let I=!1,p=2;for(++this.index;!this.eof();){var C=this.source[this.index++];if("`"===C){p=1;h=I=!0;break}if("$"===C){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;h=!0;break}k+=C}else if("\\"===C)if(C=this.source[this.index++],A.Character.isLineTerminator(C.charCodeAt(0)))++this.lineNumber,"\r"===C&&"\n"===this.source[this.index]&&++this.index,this.lineStart=
this.index;else switch(C){case "n":k+="\n";break;case "r":k+="\r";break;case "t":k+="\t";break;case "u":if("{"===this.source[this.index])++this.index,k+=this.scanUnicodeCodePointEscape();else{const z=this.index,e=this.scanHexEscape(C);null!==e?k+=e:(this.index=z,k+=C)}break;case "x":C=this.scanHexEscape(C);null===C&&this.throwUnexpectedToken(c.ParsingErrorCodes.InvalidHexEscapeSequence);k+=C;break;case "b":k+="\b";break;case "f":k+="\f";break;case "v":k+="\v";break;default:"0"===C?(A.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(c.ParsingErrorCodes.TemplateOctalLiteral),k+="\x00"):A.Character.isOctalDigit(C.charCodeAt(0))?this.throwUnexpectedToken(c.ParsingErrorCodes.TemplateOctalLiteral):k+=C}else A.Character.isLineTerminator(C.charCodeAt(0))?(++this.lineNumber,"\r"===C&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,k+="\n"):k+=C}h||this.throwUnexpectedToken();x||this.curlyStack.pop();return{type:c.TokenType.Template,value:this.source.slice(n+1,this.index-p),cooked:k,head:x,
tail:I,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}}lex(){if(this.eof())return{type:c.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const k=this.source.charCodeAt(this.index);return A.Character.isIdentifierStart(k)?this.scanIdentifier():40===k||41===k||59===k?this.scanPunctuator():39===k||34===k?this.scanStringLiteral():46===k?A.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():
this.scanPunctuator():A.Character.isDecimalDigit(k)?this.scanNumericLiteral():96===k||125===k&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=k&&57343>k&&A.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}}r.Scanner=d;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/assert":function(){define(["exports"],function(r){r.assert=function(L,A){if(!L)throw Error("ASSERT: "+A);};Object.defineProperty(r,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/character":function(){define(["exports"],function(r){var L=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
A=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
const c={fromCodePoint(a){return 65536>a?String.fromCharCode(a):String.fromCharCode(55296+(a-65536>>10))+String.fromCharCode(56320+(a-65536&1023))},isWhiteSpace(a){return 32===a||9===a||11===a||12===a||160===a||5760<=a&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(a)},isLineTerminator(a){return 10===a||13===a||8232===a||8233===a},isIdentifierStart(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&L.test(c.fromCodePoint(a))},isIdentifierPart(a){return 36===
a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&A.test(c.fromCodePoint(a))},isDecimalDigit(a){return 48<=a&&57>=a},isHexDigit(a){return 48<=a&&57>=a||65<=a&&70>=a||97<=a&&102>=a},isOctalDigit(a){return 48<=a&&55>=a}};r.Character=c;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/tokenizer":function(){define(["exports","./error-handler","./scanner","./types"],function(r,L,A,c){class a{constructor(d,k){this.errorHandler=new L.ErrorHandler;this.errorHandler.tolerant=
k?"boolean"===typeof k.tolerant&&k.tolerant:!1;this.scanner=new A.Scanner(d,this.errorHandler);this.trackComments=k?"boolean"===typeof k.comment&&k.comment:!1;this.buffer=[]}errors(){return this.errorHandler.errors}getNextToken(){if(0===this.buffer.length){var d=this.scanner.scanComments();this.trackComments&&d&&d.forEach(k=>{const h=this.scanner.source.slice(k.start,k.end);this.buffer.push({type:k.multiLine?c.Syntax.BlockComment:c.Syntax.LineComment,value:h,range:k.range,loc:k.loc})});if(!this.scanner.eof()){d=
{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};const k=this.scanner.lex(),h={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};d={type:c.TokenNames[k.type],value:this.scanner.source.slice(k.start,k.end),range:[k.start,k.end],loc:{start:d,end:h}};this.buffer.push(d)}}return this.buffer.shift()}}r.Tokenizer=a;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(function(){class r{constructor(c){const a=
this;a._keys=[];a._values=[];a.length=0;c&&c.forEach(d=>{a.set(d[0],d[1])})}entries(){return[].slice.call(this.keys().map((c,a)=>[c,this._values[a]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(c){return this._keys.includes(c)}get(c){c=this._keys.indexOf(c);return-1<c?this._values[c]:null}deepGet(c){if(!c?.length)return null;const a=(d,k)=>null==d?null:k.length?a(d instanceof r?d.get(k[0]):d[k[0]],k.slice(1)):d;return a(this.get(c[0]),c.slice(1))}set(c,a){const d=
this._keys.indexOf(c);-1<d?this._values[d]=a:(this._keys.push(c),this._values.push(a),this.length=this._values.length);return this}sortedSet(c,a,d,k){var h=this._keys.length;d=d||0;k=void 0!==k?k:h-1;if(0===h)return this._keys.push(c),this._values.push(a),this;if(c===this._keys[d])return this._values.splice(d,0,a),this;if(c===this._keys[k])return this._values.splice(k,0,a),this;if(c>this._keys[k])return this._keys.splice(k+1,0,c),this._values.splice(k+1,0,a),this;if(c<this._keys[d])return this._values.splice(d,
0,a),this._keys.splice(d,0,c),this;if(d>=k)return this;h=d+Math.floor((k-d)/2);return c<this._keys[h]?this.sortedSet(c,a,d,h-1):c>this._keys[h]?this.sortedSet(c,a,h+1,k):this}size(){return this.length}clear(){this._keys.length=this.length=this._values.length=0;return this}delete(c){c=this._keys.indexOf(c);return-1<c?(this._keys.splice(c,1),this._values.splice(c,1),this.length=this._keys.length,!0):!1}forEach(c){this._keys.forEach((a,d)=>{c(this._values[d],a,d)})}map(c){return this.keys().map((a,d)=>
c(this._values[d],a,d))}filter(c){const a=this;a._keys.forEach((d,k)=>{!1===c(a._values[k],d,k)&&a.delete(d)});return this}clone(){return new r(this.entries())}}class L{constructor(c=20){this._maxEntries=c;this._values=new r}delete(c){this._values.has(c)&&this._values.delete(c)}get(c){let a=null;this._values.has(c)&&(a=this._values.get(c),this._values.delete(c),this._values.set(c,a));return a}put(c,a){if(this._values.size()>=this._maxEntries){const d=this._values.keys()[0];this._values.delete(d)}this._values.set(c,
a)}}class A{constructor(c=20){this._maxEntries=c;this._cache=new L(this._maxEntries)}clear(){this._cache=new L(this._maxEntries)}addToCache(c,a){this._cache.put(c,a)}removeFromCache(c){this._cache.delete(c)}getFromCache(c){return this._cache.get(c)}}return A})},"esri/arcade/arcadeRuntime":function(){define("exports ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(r,L,A,c,a,d,k,h,n,x,I,p,C,z,e,g,B,q){function u(F,G){const K=[];for(let D=0;D<G.arguments.length;D++)K.push(E(F,G.arguments[D]));return K}function f(F,G,K){try{return!0===G.preparsed?K(F,null,G.arguments):K(F,G,u(F,G))}catch(D){throw D;}}function E(F,G){try{switch(G?.type){case "EmptyStatement":return h.voidOperation;case "VariableDeclarator":let xa=null===G.init?null:E(F,G.init);xa===h.voidOperation&&(xa=null);if("Identifier"!==G.id.type)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,
G);const sa=G.id.name.toLowerCase();null!=F.localScope?F.localScope[sa]={value:xa,valueset:!0,node:G.init}:F.globalScope[sa]={value:xa,valueset:!0,node:G.init};return h.voidOperation;case "VariableDeclaration":for(var K=0;K<G.declarations.length;K++)E(F,G.declarations[K]);return h.voidOperation;case "ImportDeclaration":const Ja=G.specifiers[0].local.name.toLowerCase(),Da=F.libraryResolver.loadLibrary(Ja);K=null;F.libraryResolver._moduleSingletons?.has(Da.uri)?K=F.libraryResolver._moduleSingletons.get(Da.uri):
(K=new ra(Da),K.loadModule(F),F.libraryResolver._moduleSingletons?.set(Da.uri,K));F.globalScope[Ja]={value:K,valueset:!0,node:G};return h.voidOperation;case "ExportNamedDeclaration":E(F,G.declaration);if("FunctionDeclaration"===G.declaration.type)F.exports[G.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===G.declaration.type)for(const V of G.declaration.declarations)F.exports[V.id.name.toLowerCase()]="variable";return h.voidOperation;case "BlockStatement":case "Program":a:{let V=
h.voidOperation;for(K=0;K<G.body.length;K++)if(V=E(F,G.body[K]),V instanceof h.ReturnResult||V===h.breakResult||V===h.continueResult){var D=V;break a}D=V}return D;case "FunctionDeclaration":const Ga=G.id.name.toLowerCase();F.globalScope[Ga]={valueset:!0,node:null,value:new ia(G,F)};return h.voidOperation;case "ReturnStatement":if(null===G.argument)var O=new h.ReturnResult(h.voidOperation);else{var Q=E(F,G.argument);O=new h.ReturnResult(Q)}return O;case "IfStatement":{const V=E(F,G.test);if(!0===V)var T=
E(F,G.consequent);else if(!1===V)T=null!==G.alternate?E(F,G.alternate):h.voidOperation;else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.BooleanConditionRequired,G);}return T;case "ExpressionStatement":if("AssignmentExpression"===G.expression.type||"UpdateExpression"===G.expression.type)var ka=E(F,G.expression);else if("CallExpression"===G.expression.type){const V=E(F,G.expression);ka=V===h.voidOperation?h.voidOperation:new h.ImplicitResult(V)}else{var pa=E(F,G.expression);ka=pa===h.voidOperation?
h.voidOperation:new h.ImplicitResult(pa)}return ka;case "AssignmentExpression":K=null;var l="";if("MemberExpression"===G.left.type){K=E(F,G.left.object);if(!0===G.left.computed)l=E(F,G.left.property);else if("Identifier"===G.left.property.type)l=G.left.property.name;else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,G);const V=E(F,G.right);if(h.isArray(K))if(h.isNumber(l)){0>l&&(l=K.length+l);if(0>l||l>K.length)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.OutOfBounds,
G);if(l===K.length&&"\x3d"!==G.operator)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.OutOfBounds,G);K[l]=v(V,G.operator,K[l],G,F)}else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,G);else if(K instanceof c){if(!1===h.isString(l))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===K.hasField(l))K.setField(l,v(V,G.operator,K.field(l),G,F));else{if("\x3d"!==G.operator)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.FieldNotFound,
G,{key:l});K.setField(l,v(V,G.operator,null,G,F))}}else if(h.isFeature(K)){if(!1===h.isString(l))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===K.hasField(l))K.setField(l,v(V,G.operator,K.field(l),G,F));else{if("\x3d"!==G.operator)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.FieldNotFound,G,{key:l});K.setField(l,v(V,G.operator,null,G,F))}}else{if(h.isImmutableArray(K))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.Immutable,G);if(K instanceof
ra){if(!1===h.isString(l))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.ModuleAccessorMustBeString,G);if(!0===K.hasGlobal(l))K.setGlobal(l,v(V,G.operator,K.global(l),G,F));else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.ModuleExportNotFound,G);}else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,G);}var y=h.voidOperation}else{K=G.left.name.toLowerCase();var H=E(F,G.right);if(null!=F.localScope&&void 0!==F.localScope[K])F.localScope[K]={value:v(H,
G.operator,F.localScope[K].value,G,F),valueset:!0,node:G.right},y=h.voidOperation;else if(void 0!==F.globalScope[K])F.globalScope[K]={value:v(H,G.operator,F.globalScope[K].value,G,F),valueset:!0,node:G.right},y=h.voidOperation;else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,G);}return y;case "UpdateExpression":{let V;K=null;l="";if("MemberExpression"===G.argument.type){K=E(F,G.argument.object);!0===G.argument.computed?l=E(F,G.argument.property):"Identifier"===G.argument.property.type&&
(l=G.argument.property.name);if(h.isArray(K))if(h.isNumber(l)){0>l&&(l=K.length+l);if(0>l||l>=K.length)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.OutOfBounds,G);V=h.toNumber(K[l]);K[l]="++"===G.operator?V+1:V-1}else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,G);else if(K instanceof c){if(!1===h.isString(l))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===K.hasField(l))V=h.toNumber(K.field(l)),K.setField(l,
"++"===G.operator?V+1:V-1);else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.FieldNotFound,G);}else if(h.isFeature(K)){if(!1===h.isString(l))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.KeyAccessorMustBeString,G);if(!0===K.hasField(l))V=h.toNumber(K.field(l)),K.setField(l,"++"===G.operator?V+1:V-1);else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.FieldNotFound,G);}else{if(h.isImmutableArray(K))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.Immutable,
G);if(K instanceof ra){if(!1===h.isString(l))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.ModuleAccessorMustBeString,G);if(!0===K.hasGlobal(l))V=h.toNumber(K.global(l)),K.setGlobal(l,"++"===G.operator?V+1:V-1);else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.ModuleExportNotFound,G);}else throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidParameter,G);}var N=!1===G.prefix?V:"++"===G.operator?V+1:V-1}else{K="Identifier"===G.argument.type?G.argument.name.toLowerCase():
"";if(!K)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,G);if(null!=F.localScope&&void 0!==F.localScope[K])V=h.toNumber(F.localScope[K].value),F.localScope[K]={value:"++"===G.operator?V+1:V-1,valueset:!0,node:G},N=!1===G.prefix?V:"++"===G.operator?V+1:V-1;else if(void 0!==F.globalScope[K])V=h.toNumber(F.globalScope[K].value),F.globalScope[K]={value:"++"===G.operator?V+1:V-1,valueset:!0,node:G},N=!1===G.prefix?V:"++"===G.operator?V+1:V-1;else throw new a.ArcadeExecutionError(F,
a.ExecutionErrorCodes.InvalidIdentifier,G);}}return N;case "BreakStatement":return h.breakResult;case "ContinueStatement":return h.continueResult;case "TemplateElement":return G.value?G.value.cooked:"";case "TemplateLiteral":H="";N=0;for(const V of G.quasis)if(H+=V.value?V.value.cooked:"",!1===V.tail){if(G.expressions[N]){var S=h;l=S.toString;var U=E(F,G.expressions[N]),fa=F;y=G;if(h.isFunctionParameter(U))throw new a.ArcadeExecutionError(fa,a.ExecutionErrorCodes.NoFunctionInTemplateLiteral,y);K=
l.call(S,U)}else K="";H+=K;N++}return H;case "ForStatement":null!==G.init&&E(F,G.init);fa={testResult:!0,lastAction:h.voidOperation};do b:{K=F;l=G;U=fa;if(null!==l.test){U.testResult=E(K,l.test);if(!1===U.testResult)break b;if(!0!==U.testResult)throw new a.ArcadeExecutionError(K,a.ExecutionErrorCodes.BooleanConditionRequired,l);}U.lastAction=E(K,l.body);U.lastAction===h.breakResult?U.testResult=!1:U.lastAction instanceof h.ReturnResult?U.testResult=!1:null!==l.update&&E(K,l.update)}while(!0===fa.testResult);
S=fa.lastAction instanceof h.ReturnResult?fa.lastAction:h.voidOperation;return S;case "ForInStatement":return m(F,G);case "WhileStatement":K=!0;var da=h.voidOperation;K=E(F,G.test);if(!1===K)var aa=h.voidOperation;else{if(!0!==K)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.BooleanConditionRequired,G);for(;!0===K;){da=E(F,G.body);if(da===h.breakResult)break;if(da instanceof h.ReturnResult)break;K=E(F,G.test);if(!0!==K&&!1!==K)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.BooleanConditionRequired,
G);}aa=da instanceof h.ReturnResult?da:h.voidOperation}return aa;case "Identifier":return Y(F,G);case "MemberExpression":return t(F,G);case "Literal":return G.value;case "CallExpression":a:try{if("MemberExpression"===G.callee.type){const V=E(F,G.callee.object);if(!(V instanceof ra))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.FunctionNotFound,G);const ja=!1===G.callee.computed?G.callee.property.name:E(F,G.callee.property);if(!V.hasGlobal(ja))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.FunctionNotFound,
G);const ua=V.global(ja);if(!h.isFunctionParameter(ua))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.CallNonFunction,G);var ba=ua.call(F,G)}else{if("Identifier"!==G.callee.type)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.FunctionNotFound,G);if(null!=F.localScope&&void 0!==F.localScope[G.callee.name.toLowerCase()]){const V=F.localScope[G.callee.name.toLowerCase()];if(h.isFunctionParameter(V.value)){ba=V.value.call(F,G);break a}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.CallNonFunction,
G);}if(void 0!==F.globalScope[G.callee.name.toLowerCase()]){const V=F.globalScope[G.callee.name.toLowerCase()];if(h.isFunctionParameter(V.value)){ba=V.value.call(F,G);break a}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.CallNonFunction,G);}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.FunctionNotFound,G);}}catch(V){throw V;}return ba;case "UnaryExpression":return M(F,G);case "BinaryExpression":return b(F,G);case "LogicalExpression":return R(F,G);case "ArrayExpression":try{K=
[];for(l=0;l<G.elements.length;l++){const V=E(F,G.elements[l]);if(h.isFunctionParameter(V))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.NoFunctionInArray,G);V===h.voidOperation?K.push(null):K.push(V)}var wa=K}catch(V){throw V;}return wa;case "ObjectExpression":K={};const Ea=new Map;for(l=0;l<G.properties.length;l++){const V=E(F,G.properties[l]);if(h.isFunctionParameter(V.value))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.NoFunctionInDictionary,G);if(!1===h.isString(V.key))throw new a.ArcadeExecutionError(F,
a.ExecutionErrorCodes.KeyMustBeString,G);let ja=V.key.toString();const ua=ja.toLowerCase();Ea.has(ua)?ja=Ea.get(ua):Ea.set(ua,ja);K[ja]=V.value===h.voidOperation?null:V.value}const Ba=new c(K);Ba.immutable=!1;return Ba;case "Property":return{key:"Identifier"===G.key.type?G.key.name:E(F,G.key),value:E(F,G.value)};default:throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.Unrecognized,G);}}catch(xa){throw a.ensureArcadeExecutionError(F,G,xa);}}function m(F,G){var K=E(F,G.right);"VariableDeclaration"===
G.left.type&&E(F,G.left);let D=null;var O="";if("VariableDeclaration"===G.left.type){var Q=G.left.declarations[0].id;"Identifier"===Q.type&&(O=Q.name)}else"Identifier"===G.left.type&&(O=G.left.name);if(!O)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,G);O=O.toLowerCase();null!=F.localScope&&void 0!==F.localScope[O]&&(D=F.localScope[O]);null===D&&void 0!==F.globalScope[O]&&(D=F.globalScope[O]);if(null===D)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,
G);if(h.isArray(K)||h.isString(K)){K=K.length;for(O=0;O<K;O++){D.value=O;Q=E(F,G.body);if(Q===h.breakResult)break;if(Q instanceof h.ReturnResult)return Q}return h.voidOperation}if(h.isImmutableArray(K)){for(O=0;O<K.length();O++){D.value=O;Q=E(F,G.body);if(Q===h.breakResult)break;if(Q instanceof h.ReturnResult)return Q}return h.voidOperation}if(K instanceof c||h.isFeature(K))for(K=K.keys(),O=0;O<K.length;O++){D.value=K[O];Q=E(F,G.body);if(Q===h.breakResult)break;if(Q instanceof h.ReturnResult)return Q}else return h.voidOperation}
function v(F,G,K,D,O){switch(G){case "\x3d":return F===h.voidOperation?null:F;case "/\x3d":return h.toNumber(K)/h.toNumber(F);case "*\x3d":return h.toNumber(K)*h.toNumber(F);case "-\x3d":return h.toNumber(K)-h.toNumber(F);case "+\x3d":return h.isString(K)||h.isString(F)?h.toString(K)+h.toString(F):h.toNumber(K)+h.toNumber(F);case "%\x3d":return h.toNumber(K)%h.toNumber(F);default:throw new a.ArcadeExecutionError(O,a.ExecutionErrorCodes.UnsupportedOperator,D);}}function t(F,G){try{const K=E(F,G.object);
if(null===K)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.MemberOfNull,G);if(!1===G.computed){if("Identifier"===G.property.type){if(K instanceof c||h.isFeature(K))return K.field(G.property.name);if(K instanceof B)return p.geometryMember(K,G.property.name,G,F);if(K instanceof ra){if(!K.hasGlobal(G.property.name))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,G);return K.global(G.property.name)}}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidMemberAccessKey,
G);}let D=E(F,G.property);if(K instanceof c||h.isFeature(K)){if(h.isString(D))return K.field(D);throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(K instanceof ra){if(h.isString(D))return K.global(D);throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(K instanceof B){if(h.isString(D))return p.geometryMember(K,D,G,F);throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(h.isArray(K)){if(h.isNumber(D)&&
isFinite(D)&&Math.floor(D)===D){0>D&&(D=K.length+D);if(D>=K.length||0>D)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.OutOfBounds,G);return K[D]}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidMemberAccessKey,G);}if(h.isString(K)){if(h.isNumber(D)&&isFinite(D)&&Math.floor(D)===D){0>D&&(D=K.length+D);if(D>=K.length||0>D)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.OutOfBounds,G);return K[D]}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidMemberAccessKey,
G);}if(h.isImmutableArray(K)&&h.isNumber(D)&&isFinite(D)&&Math.floor(D)===D){0>D&&(D=K.length()+D);if(D>=K.length()||0>D)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.OutOfBounds,G);return K.get(D)}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidMemberAccessKey,G);}catch(K){throw K;}}function M(F,G){try{const K=E(F,G.argument);if(h.isBoolean(K)){if("!"===G.operator)return!K;if("-"===G.operator)return-1*h.toNumber(K);if("+"===G.operator)return 1*h.toNumber(K);if("~"===G.operator)return~h.toNumber(K);
throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.UnsupportedUnaryOperator,G);}if("~"===G.operator)return~h.toNumber(K);if("-"===G.operator)return-1*h.toNumber(K);if("+"===G.operator)return 1*h.toNumber(K);throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.UnsupportedUnaryOperator,G);}catch(K){throw K;}}function b(F,G){try{const K=[E(F,G.left),E(F,G.right)],D=K[0],O=K[1];switch(G.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return h.binaryOperator(h.toNumber(D),
h.toNumber(O),G.operator);case "\x3d\x3d":return h.equalityTest(D,O);case "!\x3d":return!h.equalityTest(D,O);case "\x3c":return h.greaterThanLessThan(D,O,G.operator);case "\x3e":return h.greaterThanLessThan(D,O,G.operator);case "\x3c\x3d":return h.greaterThanLessThan(D,O,G.operator);case "\x3e\x3d":return h.greaterThanLessThan(D,O,G.operator);case "+":return h.isString(D)||h.isString(O)?h.toString(D)+h.toString(O):h.toNumber(D)+h.toNumber(O);case "-":return h.toNumber(D)-h.toNumber(O);case "*":return h.toNumber(D)*
h.toNumber(O);case "/":return h.toNumber(D)/h.toNumber(O);case "%":return h.toNumber(D)%h.toNumber(O);default:throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.UnsupportedOperator,G);}}catch(K){throw K;}}function R(F,G){try{const K=E(F,G.left);if(h.isBoolean(K))switch(G.operator){case "||":if(!0===K)return K;const D=E(F,G.right);if(h.isBoolean(D))return D;throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.LogicExpressionOrAnd,G);case "\x26\x26":if(!1===K)return K;const O=E(F,G.right);
if(h.isBoolean(O))return O;throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.LogicExpressionOrAnd,G);default:throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.LogicExpressionOrAnd,G);}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,G);}catch(K){throw K;}}function Y(F,G){let K;try{const D=G.name.toLowerCase();if(null!=F.localScope&&void 0!==F.localScope[D]){K=F.localScope[D];if(!0===K.valueset)return K.value;K.value=E(F,K.node);K.valueset=!0;return K.value}if(void 0!==
F.globalScope[D]){K=F.globalScope[D];if(!0===K.valueset)return K.value;K.value=E(F,K.node);K.valueset=!0;return K.value}throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.InvalidIdentifier,G);}catch(D){throw D;}}function ca(F,G,K,D){try{const O=G.arguments,Q=E(F,O[K]);if(h.equalityTest(Q,D))return E(F,O[K+1]);const T=O.length-K;return 1===T?E(F,O[K]):2===T?null:3===T?E(F,O[K+2]):ca(F,G,K+2,D)}catch(O){throw O;}}function oa(F,G,K,D){try{const O=G.arguments;if(!0===D)return E(F,O[K+1]);if(3===
O.length-K)return E(F,O[K+2]);const Q=E(F,O[K+2]);if(!1===h.isBoolean(Q))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.BooleanConditionRequired,O[K+2]);return oa(F,G,K+2,Q)}catch(O){throw O;}}function na(F,G,K,D){try{const O=F.body;if(K.length!==F.params.length)throw new a.ArcadeExecutionError(G,a.ExecutionErrorCodes.WrongNumberOfParameters,D);if(null!=G.localScope)for(let T=0;T<K.length;T++)G.localScope[F.params[T].name.toLowerCase()]={value:K[T],valueset:!0,node:null};const Q=E(G,O);
if(Q instanceof h.ReturnResult)return Q.value;if(Q===h.breakResult)throw new a.ArcadeExecutionError(G,a.ExecutionErrorCodes.UnexpectedToken,D);if(Q===h.continueResult)throw new a.ArcadeExecutionError(G,a.ExecutionErrorCodes.UnexpectedToken,D);return Q instanceof h.ImplicitResult?Q.value:Q}catch(O){throw O;}}function ma(F,G,K){const D=new ya;F||(F={});G||(G={});const O=new c({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});O.immutable=!1;D.textformatting=
{value:O,valueset:!0,node:null};for(const Q in G)D[Q]={value:new k.NativeFunction(G[Q]),native:!0,valueset:!0,node:null};for(const Q in F)D[Q]=F[Q]&&"esri.Graphic"===F[Q].declaredClass?{value:d.createFromGraphic(F[Q],K),valueset:!0,node:null}:{value:F[Q],valueset:!0,node:null};return D}function ea(F){console.log(F)}function W(F){const G={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:f,evaluateIdentifier:Y};for(let K=0;K<F.length;K++)F[K].registerFunctions(G);for(const K in G.functions)qa[K]=
{value:new k.NativeFunction(G.functions[K]),valueset:!0,node:null},ya.prototype[K]=qa[K];for(F=0;F<G.signatures.length;F++)n.addFunctionDeclaration(G.signatures[F],"sync")}class ia extends k.ArcadeFunction{constructor(F,G){super();this.context=this.definition=null;this.definition=F;this.context=G}createFunction(F){return(...G)=>{const K={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,timeZone:this.context.timeZone??null,lrucache:this.context.lrucache,
exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:F.depthCounter.depth+1},globalScope:this.context.globalScope};if(64<K.depthCounter.depth)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.MaximumCallDepth,null);return na(this.definition,K,G,null)}}call(F,G){return f(F,G,(K,D,O)=>{K={spatialReference:F.spatialReference,services:F.services,globalScope:F.globalScope,depthCounter:{depth:F.depthCounter.depth+
1},libraryResolver:F.libraryResolver,exports:F.exports,timeZone:F.timeZone??null,console:F.console,lrucache:F.lrucache,interceptor:F.interceptor,localScope:{}};if(64<K.depthCounter.depth)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.MaximumCallDepth,G);return na(this.definition,K,O,G)})}marshalledCall(F,G,K,D){return D(F,G,(O,Q,T)=>{O={spatialReference:F.spatialReference,globalScope:K.globalScope,services:F.services,depthCounter:{depth:F.depthCounter.depth+1},libraryResolver:F.libraryResolver,
exports:F.exports,console:F.console,timeZone:F.timeZone??null,lrucache:F.lrucache,interceptor:F.interceptor,localScope:{}};T=T.map(ka=>!h.isFunctionParameter(ka)||ka instanceof k.ScopeMarshalledFunction?ka:k.wrapModuleScopedResponse(ka,F,D));return k.wrapModuleScopedResponse(na(this.definition,O,T,G),K,D)})}}class ra extends L.ArcadeModule{constructor(F){super(F)}global(F){F=this.executingContext.globalScope[F.toLowerCase()];F.valueset||(F.value=E(this.executingContext,F.node),F.valueset=!0);if(h.isFunctionParameter(F.value)&&
!(F.value instanceof k.ScopeMarshalledFunction)){const G=new k.ScopeMarshalledFunction;G.fn=F.value;G.parameterEvaluator=f;G.context=this.executingContext;F.value=G}return F.value}setGlobal(F,G){if(h.isFunctionParameter(G))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[F.toLowerCase()]={value:G,valueset:!0,node:null}}hasGlobal(F){void 0===this.executingContext.exports[F]&&(F=F.toLowerCase());return void 0!==this.executingContext.exports[F]?
!0:!1}loadModule(F){let G=F.spatialReference;if(null===G||void 0===G)G=new q({wkid:102100});this.moduleScope=ma({},F.customfunctions,F.timeZone);this.executingContext={spatialReference:G,globalScope:this.moduleScope,localScope:null,libraryResolver:new A.ArcadeModuleLoader(F.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},services:F.services,console:F.console??ea,timeZone:F.timeZone??null,lrucache:F.lrucache,interceptor:F.interceptor,depthCounter:{depth:1}};E(this.executingContext,
this.source.syntax)}}const qa={};I.registerFunctions(qa,f);g.registerFunctions(qa,f);z.registerFunctions(qa,f);p.registerFunctions(qa,f);e.registerFunctions(qa,f);C.registerFunctions(qa,f);qa.iif=function(F,G){try{const K=G.arguments;h.pcCheck(null===K?[]:K,3,3,F,G);const D=E(F,K[0]);if(!1===h.isBoolean(D))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.BooleanConditionRequired,G);return!0===D?E(F,K[1]):E(F,K[2])}catch(K){throw K;}};qa.decode=function(F,G){try{const K=G.arguments;if(2>K.length)throw new a.ArcadeExecutionError(F,
a.ExecutionErrorCodes.WrongNumberOfParameters,G);if(2===K.length)return E(F,K[1]);if(0===(K.length-1)%2)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.WrongNumberOfParameters,G);const D=E(F,K[0]);return ca(F,G,1,D)}catch(K){throw K;}};qa.when=function(F,G){try{const K=G.arguments;if(3>K.length)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.WrongNumberOfParameters,G);if(0===K.length%2)throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.WrongNumberOfParameters,G);const D=E(F,
K[0]);if(!1===h.isBoolean(D))throw new a.ArcadeExecutionError(F,a.ExecutionErrorCodes.BooleanConditionRequired,K[0]);return oa(F,G,0,D)}catch(K){throw K;}};for(const F in qa)qa[F]={value:new k.NativeFunction(qa[F]),valueset:!0,node:null};const ya=function(){};ya.prototype=qa;ya.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ya.prototype.pi={value:Math.PI,valueset:!0,node:null};L={fixSpatialReference:h.fixSpatialReference,parseArguments:u,standardFunction:f};W([x.ArrayFunctions]);
r.executeScript=function(F,G){let K=G.spatialReference;if(null===K||void 0===K)K=new q({wkid:102100});let D=null;F.usesModules&&(D=new A.ArcadeModuleLoader(new Map,F.loadedModules));const O=ma(G.vars,G.customfunctions,G.timeZone);G={spatialReference:K,globalScope:O,localScope:null,services:G.services??null,exports:{},libraryResolver:D,console:G.console??ea,timeZone:G.timeZone??null,lrucache:G.lrucache,interceptor:G.interceptor,depthCounter:{depth:1}};F=E(G,F);F instanceof h.ReturnResult&&(F=F.value);
F instanceof h.ImplicitResult&&(F=F.value);F===h.voidOperation&&(F=null);if(F===h.breakResult)throw new a.ArcadeExecutionError(G,a.ExecutionErrorCodes.IllegalResult,null);if(F===h.continueResult)throw new a.ArcadeExecutionError(G,a.ExecutionErrorCodes.IllegalResult,null);if(h.isFunctionParameter(F))throw new a.ArcadeExecutionError(G,a.ExecutionErrorCodes.IllegalResult,null);return F};r.extend=W;r.functionHelper=L;Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../geometry ../chunks/arcade ../arcade/Dictionary ../arcade/Feature ../chunks/languageUtils ../core/lang ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/Multipoint ../geometry/Extent".split(" "),function(r,L,A,c,a,d,k,h,n,x,I,p,C,z){function e(v){return v.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}function g(v){if(!v)return null;try{return A.parseScript(v)}catch(t){}return null}function B(v,t){if(!v)return!1;if("string"===
typeof v)return t(v);if("simple"===v.type||"class-breaks"===v.type||"unique-value"===v.type||"dot-density"===v.type||"dictionary"===v.type||"pie-chart"===v.type){if("dot-density"===v.type){var M=v.attributes?.some(b=>t(b.valueExpression));if(M)return M}M=v.visualVariables;M=!!M&&M.some(b=>{let R=t(b.valueExpression);"size"===b.type&&(f(b.minSize)&&(R=R||t(b.minSize.valueExpression)),f(b.maxSize)&&(R=R||t(b.maxSize.valueExpression)));return R});return"valueExpression"in v&&t(v.valueExpression)?!0:
M}return"esri.layers.support.LabelClass"===v.declaredClass?(v=v.labelExpressionInfo?.expression,!(!v||!t(v))||!1):"esri.PopupTemplate"===v.declaredClass?!!v.expressionInfos&&v.expressionInfos.some(b=>t(b.expression))||Array.isArray(v.content)&&v.content.some(b=>"expression"===b.type&&t(b.expressionInfo?.expression)):!1}function q(v){v=g(v);return!!v&&A.scriptTouchesGeometry(v)}function u(v){v=g(v);return!!v&&A.scriptUsesGeometryEngine(v)}function f(v){return v&&"esri.renderers.visualVariables.SizeVariable"===
v.declaredClass}const E=/^\$(feature|aggregatedFeatures)\./i,m={vars:{$feature:"any",$view:"any"},spatialReference:null};r.arcade=A.arcade;r.Dictionary=c;r.arcadeFeature=a;r.convertFeatureLayerToFeatureSet=function({layer:v,spatialReference:t,outFields:M,returnGeometry:b,lrucache:R,interceptor:Y}){if(null===v)return null;const ca=A.featureSetUtils();return ca?ca.constructFeatureSet(v,t,M,b??!0,R,Y):null};r.convertJsonToArcade=function(v,t){return c.convertJsonToArcade(v,t)};r.convertMapToFeatureSetCollection=
function(v){if(null===v?.map)return null;const t=A.featureSetUtils();return t?t.createFeatureSetCollectionFromMap(v.map,v.spatialReference,v.lrucache,v.interceptor):null};r.convertServiceUrlToWorkspace=function({url:v,spatialReference:t,lrucache:M,interceptor:b}){const R=A.featureSetUtils();return R?R.createFeatureSetCollectionFromService(v,t,M,b):null};r.createExecContext=function(v,t,M){return{vars:{$feature:null==v?new a:a.createFromGraphic(v,M),$view:t?.view},spatialReference:t?.sr,timeZone:M??
null}};r.createFeature=function(v,t,M){return a.createFromGraphicLikeObject(t,v,M,null)};r.createFunction=function(v,t){v="string"===typeof v?g(v):v;if(!v)return null;try{return t=t||k.clone(m),A.compileScript(v,t)}catch(M){}return null};r.createSyntaxTree=g;r.dependsOnView=function(v){return A.referencesMember(v,"$view")};r.enableFeatureSetOperations=function(){return A.enableFeatureSetSupport()};r.enableGeometryOperations=function(){return A.enableGeometrySupport()};r.evalSyntaxTree=function(v,
t){let M;try{M=A.executeScript(v,t)}catch(b){M=null}return M};r.executeAsyncFunction=function(v,t){try{return v?v(t):Promise.resolve(null)}catch(M){return Promise.resolve(null)}};r.executeFunction=function(v,t){let M;try{M=v?v(t):null}catch(b){M=null}return M};r.extractFieldNames=function(v,t){if(!v)return[];v="string"===typeof v?g(v):v;if(!v)return[];let M=[];A.extractExpectedFieldLiterals(v).forEach(R=>{E.test(R)&&(R=R.replace(E,""),M.push(R))});const b=M.filter(R=>R.includes("*"));M=M.filter(R=>
!b.includes(R));t&&b.forEach(R=>{const Y=new RegExp(`^${R.split(/\*+/).map(e).join(".*")}$`,"i");t.forEach(ca=>Y.test(ca)?M.push(ca):null)});return[...(new Set(M.sort()))]};r.getArcadeType=function(v){return null==v?null:d.isArray(v)||d.isImmutableArray(v)?"array":d.isDate(v)?"date":d.isString(v)?"text":d.isBoolean(v)?"boolean":d.isNumber(v)?"number":v instanceof c?"dictionary":d.isFeature(v)?"feature":v instanceof x?"point":v instanceof I?"polygon":v instanceof p?"polyline":v instanceof C?"multipoint":
v instanceof z?"extent":v instanceof h.DateOnly?"dateOnly":v instanceof n.TimeOnly?"time":d.isFeatureSet(v)?"featureSet":d.isFeatureSetCollection(v)?"featureSetCollection":null};r.getViewInfo=function(v){if(v&&(null!=v.spatialReference||null!=v.scale&&null!=v.viewingMode))return{view:v.viewingMode&&null!=v.scale?new c({viewingMode:v.viewingMode,scale:v.scale}):null,sr:v.spatialReference}};r.hasGeometryFunctions=function(v){return B(v,q)};r.hasGeometryOperations=function(v){return B(v,u)};r.hasVariable=
function(v,t){return v?A.referencesMember(v,t):!1};r.loadScriptDependencies=function(v,t,M=[]){return A.loadScriptDependencies(v,t,M)};r.updateExecContext=function(v,t){null!=v.vars&&(v.vars.$feature=t)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});