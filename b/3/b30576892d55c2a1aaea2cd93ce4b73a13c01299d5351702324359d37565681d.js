var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:$jscomp.getGlobal=$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=$jscomp.Symbol=);
$jscomp.initSymbolIterator=$jscomp.arrayIterator=
$jscomp.iteratorPrototype=$jscomp.iteratorFromArray=
$jscomp.polyfill=$jscomp.polyfill("Array.prototype.keys","es6","es3");
$jscomp.polyfill("Object.is","es6","es3");$jscomp.polyfill("Array.prototype.includes","es7","es3");
$jscomp.checkStringArgs=$jscomp.polyfill("String.prototype.includes","es6","es3");
$jscomp.owns=$jscomp.polyfill("Object.assign","es6","es3");
(function(){var h="SDK_"+"6.47.0-6ebac141-202201132106".replace(/[^\w]/g,"_"),t="undefined"!=typeof window?window:"undefined"!=typeof GLOBAL?GLOBAL:this;t.tv=t.tv||{};t.tv.freewheel=t.tv.freewheel||{};t.tv.freewheel[h]=function(h){var a={version:"js-6.47.0-6ebac141-202201132106"};"undefined"!==typeof window&&(window._fw_admanager=window._fw_admanager||{},window._fw_admanager.version=a.version);a.LOG_LEVEL_QUIET=0;a.LOG_LEVEL_INFO=1;a.LOG_LEVEL_DEBUG=2;a.setLogLevel=function(b){a.warn=a.log=a.debug=
function(){};if("undefined"!==typeof console){try{window.localStorage&&window.localStorage.getItem("fwLogLevel")&&-1<window.localStorage.getItem("fwLogLevel")&&(b=window.localStorage.getItem("fwLogLevel"))}catch(c){console.warn(">FW Common.setLogLevel"+c.description)}b>a.LOG_LEVEL_QUIET&&(a.log=function(){console.log(">FW "+(new Date).toISOString().substr(14,9)+" "+Array.prototype.slice.call(arguments).join(" "))},a.warn=function(){console.warn(">FW "+(new Date).toISOString().substr(14,9)+" "+Array.prototype.slice.call(arguments).join(" "))},
b>a.LOG_LEVEL_INFO&&(a.debug=)}};a.setLogLevel(a.LOG_LEVEL_INFO);a.log("FreeWheel Integration Runtime",a.version);a.proxyUrl=null;a.creativesProxyUrl=null;a.proxyAuthenticationParameter=null;a.setProxy=function(b){a.debug("setProxy: "+b);a.Util.isValidProxyUrl(b)&&(a.proxyUrl="/"!==b.charAt(b.length-1)?b+"/":b)};a.setCreativesProxy=a.setProxyAuthenticationParameter=a.checkUserAgent=a.checkUserAgent(navigator.userAgent.toLowerCase());a.PLATFORM_EVENT_CLICK=a.PLATFORM_IS_MOBILE?"touchend":"click";a.MOBILE_EVENT_DRAG="touchmove";a.PLATFORM_SEND_REQUEST_BY_FORM=!1;a.PLATFORM_SEND_REQUEST_BY_JS=!1;a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_MOVE_POSITION=3.1<=a.PLATFORM_ANDROID_VERSION;
a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_SET_DISPLAY=!0;a.PLATFORM_SUPPORT_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT=a.PLATFORM_IS_IPAD||a.PLATFORM_IS_IPHONE_IPOD;a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL=a.PLATFORM_IS_IPAD;a.PLATFORM_NOT_SUPPORT_OVERLAY_AD=a.PLATFORM_IS_IPHONE_IPOD||0<a.PLATFORM_ANDROID_VERSION&&3.1>a.PLATFORM_ANDROID_VERSION||a.PLATFORM_IS_WINDOWSPHONE;a.PLATFORM_FILL_VIDEO_POOL_FOR_MIDROLL=4.2<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_MIDROLL_AD=2.2<=a.PLATFORM_ANDROID_VERSION&&3>=
a.PLATFORM_ANDROID_VERSION||9<=a.PLATFORM_IE_MOBILE_VERSION;a.PLATFORM_NOT_SUPPORT_VIDEO_AD=0<a.PLATFORM_ANDROID_VERSION&&2.1>=a.PLATFORM_ANDROID_VERSION;a.PLATFORM_DETECT_FULL_SCREEN_FOR_MIDROLL=a.PLATFORM_IS_IPAD&&4.2<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO=a.PLATFORM_IS_IPHONE_IPOD&&10>a.PLATFORM_IOS_VERSION||a.PLATFORM_IS_WINDOWSPHONE||a.PLATFORM_IS_CHROMECAST;a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED=3.1<=a.PLATFORM_ANDROID_VERSION||10<=a.PLATFORM_IOS_VERSION;a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT=
0<a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION;a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE=9<=a.PLATFORM_IE_MOBILE_VERSION;a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL=0<a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION&&4<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL=!1;a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT=0===a.PLATFORM_IOS_VERSION||4<=a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_OVERLAY_CLICK_WHEN_CONTROLS_IS_TRUE=
a.PLATFORM_IS_IPAD;a.PLATFORM_BLOCKS_AUTOPLAY=a.PLATFORM_IS_MOBILE||a.PLATFORM_IS_SAFARI||a.PLATFORM_IS_CHROME&&(0<a.PLATFORM_ANDROID_VERSION||64<=a.PLATFORM_BROWSER_VERSION)||a.PLATFORM_IS_FIREFOX&&66<=a.PLATFORM_BROWSER_VERSION;a.PLATFORM_NOT_SUPPORT_DASH=0<a.PLATFORM_IOS_VERSION;a.PLATFORM_HLSJS_MIN_VERSION="0.11.0";a.PLATFORM_DASHJS_SUPPORTED_VERSION="3.0.3";a.CONTEXT_REQUEST_TIMEOUT=5;a.RENDERER_STATE_INIT=1;a.RENDERER_STATE_STARTING=2;a.RENDERER_STATE_STARTED=3;a.RENDERER_STATE_COMPLETING=4;
a.RENDERER_STATE_COMPLETED=5;a.RENDERER_STATE_FAILED=6;a.TRANSLATOR_STATE_INIT=a.RENDERER_STATE_INIT;a.TRANSLATOR_STATE_STARTING=a.RENDERER_STATE_STARTING;a.TRANSLATOR_STATE_STARTED=a.RENDERER_STATE_STARTED;a.TRANSLATOR_STATE_COMPLETING=a.RENDERER_STATE_COMPLETING;a.TRANSLATOR_STATE_COMPLETED=a.RENDERER_STATE_COMPLETED;a.TRANSLATOR_STATE_FAILED=a.RENDERER_STATE_FAILED;a.EVENT_AD="adEvent";a.EVENT_AD_BUFFERING_START="adBufferingStart";a.EVENT_AD_BUFFERING_END="adBufferingEnd";a.EVENT_SLOT_IMPRESSION=
"slotImpression";a.EVENT_SLOT_END="slotEnd";a.EVENT_AD_INITIATED="adInitiated";a.EVENT_AD_PREINIT="preInit";a.EVENT_AD_IMPRESSION="defaultImpression";a.EVENT_AD_IMPRESSION_END="adEnd";a.EVENT_AD_QUARTILE="quartile";a.EVENT_AD_FIRST_QUARTILE="firstQuartile";a.EVENT_AD_MIDPOINT="midPoint";a.EVENT_AD_THIRD_QUARTILE="thirdQuartile";a.EVENT_AD_SKIPPED="adSkipped";a.EVENT_AD_PROGRESS="progress";a.EVENT_AD_COMPLETE="complete";a.EVENT_AD_CLICK="defaultClick";a.EVENT_AD_MUTE="_mute";a.EVENT_AD_UNMUTE="_un-mute";
a.EVENT_AD_COLLAPSE="_collapse";a.EVENT_AD_EXPAND="_expand";a.EVENT_AD_PAUSE="_pause";a.EVENT_AD_RESUME="_resume";a.EVENT_AD_REWIND="_rewind";a.EVENT_AD_ACCEPT_INVITATION="_accept-invitation";a.EVENT_AD_CLOSE="_close";a.EVENT_AD_MINIMIZE="_minimize";a.EVENT_ERROR="_e_unknown";a.EVENT_RESELLER_NO_AD="resellerNoAd";a.EVENT_AD_MEASUREMENT="concreteEvent";a.EVENT_EXTENSION_LOADED="extensionLoaded";a.EVENT_AD_VOLUME_CHANGE="adVolumeChange";a.EVENT_AD_AUTO_PLAY_BLOCKED="videoAutoPlayBlocked";a.EVENT_AD_PROGRESS=
"progress";a.EVENT_AD_SKIPPABLE_STATE_CHANGED="skippableStateChanged";a.INFO_KEY_CUSTOM_ID="customId";a.INFO_KEY_MODULE_TYPE="moduleType";a.INFO_KEY_AD_SKIPPABLE_STATE="skippableState";a.MODULE_TYPE_EXTENSION="extension";a.MODULE_TYPE_RENDERER="renderer";a.MODULE_TYPE_TRANSLATOR="translator";a.INFO_KEY_START_TIME_POSITION="startTimePosition";a.INFO_KEY_ERROR_CODE="errorCode";a.INFO_KEY_ERROR_INFO="errorInfo";a.INFO_KEY_ERROR_MODULE="errorModule";a.INFO_KEY_VAST_ERROR_CODE="vastErrorCode";a.ERROR_IO=
"_e_io";a.ERROR_TIMEOUT="_e_timeout";a.ERROR_NULL_ASSET="_e_null-asset";a.ERROR_ADINSTANCE_UNAVAILABLE="_e_adinst-unavail";a.ERROR_UNKNOWN="_e_unknown";a.ERROR_MISSING_PARAMETER="_e_missing-param";a.ERROR_NO_AD_AVAILABLE="_e_no-ad";a.ERROR_PARSE="_e_parse";a.ERROR_INVALID_VALUE="_e_invalid-value";a.ERROR_INVALID_SLOT="_e_invalid-slot";a.ERROR_NO_RENDERER="_e_no-renderer";a.ERROR_DEVICE_LIMIT="_e_device-limit";a.ERROR_3P_COMPONENT="_e_3p-comp";a.ERROR_UNSUPPORTED_3P_FEATURE="_e_unsupp-3p-feature";
a.ERROR_SECURITY="_e_security";a.ERROR_UNMATCHED_SLOT_SIZE="_e_slot-size-unmatch";a.ERROR_DASHJS="_e_dashjs";a.ERROR_HLSJS="_e_hlsjs";a.ERROR_CUSTOM_PLAYER="_e_custom_player";a.INFO_KEY_URL="url";a.INFO_KEY_SHOW_BROWSER="showBrowser";a.INFO_KEY_CUSTOM_EVENT_NAME="customEventName";a.INFO_KEY_NEED_EMPTY_CT="needEmptyCT";a.INFO_KEY_CONCRETE_EVENT_ID="concreteEventId";a.EVENT_TYPE_CLICK_TRACKING="CLICKTRACKING";a.EVENT_TYPE_IMPRESSION="IMPRESSION";a.EVENT_TYPE_CLICK="CLICK";a.EVENT_TYPE_STANDARD="STANDARD";
a.EVENT_TYPE_GENERIC="GENERIC";a.EVENT_TYPE_ERROR="ERROR";a.EVENT_VIDEO_VIEW="videoView";a.SHORT_EVENT_TYPE_IMPRESSION="i";a.SHORT_EVENT_TYPE_CLICK="c";a.SHORT_EVENT_TYPE_STANDARD="s";a.SHORT_EVENT_TYPE_ERROR="e";a.INIT_VALUE_ZERO="0";a.INIT_VALUE_ONE="1";a.INIT_VALUE_TWO="2";a.INFO_KEY_PARAMETERS="parameters";a.URL_PARAMETER_KEY_ET="et";a.URL_PARAMETER_KEY_CN="cn";a.URL_PARAMETER_KEY_INIT="init";a.URL_PARAMETER_KEY_CT="ct";a.URL_PARAMETER_KEY_METR="metr";a.URL_PARAMETER_KEY_CR="cr";a.URL_PARAMETER_KEY_KEY_VALUE=
"kv";a.URL_PARAMETER_KEY_ERROR_INFO="additional";a.URL_PARAMETER_KEY_ERROR_MODULE="renderer";a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID="reid";a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID="creid";a.URL_PARAMETER_START_TIME_POSITION="stpos";a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED="f";a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED_VALUE="16777216";a.CAPABILITY_SLOT_TEMPLATE="sltp";a.CAPABILITY_DISPLAY_REFRESH="rfnt";a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS="emcr";a.CAPABILITY_RECORD_VIDEO_VIEW="exvt";a.CAPABILITY_CHECK_COMPANION=
"cmpn";a.CAPABILITY_CHECK_TARGETING="targ";a.CAPABILITY_RESET_EXCLUSIVITY="rste";a.CAPABILITY_FALLBACK_UNKNOWN_ASSET="unka";a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION="unks";a.CAPABILITY_FALLBACK_ADS="fbad";a.CAPABILITY_SLOT_CALLBACK="slcb";a.CAPABILITY_NULL_CREATIVE="nucr";a.CAPABILITY_AUTO_EVENT_TRACKING="aeti";a.CAPABILITY_RENDERER_MANIFEST="rema";a.CAPABILITY_REQUIRE_VIDEO_CALLBACK="vicb";a.CAPABILITY_SKIP_AD_SELECTION="skas";a.SLOT_TYPE_TEMPORAL="temporal";a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL=
"videoPlayerNonTemporal";a.SLOT_TYPE_SITESECTION_NONTEMPORAL="siteSectionNonTemporal";a.TIME_POSITION_CLASS_PREROLL="PREROLL";a.TIME_POSITION_CLASS_MIDROLL="MIDROLL";a.TIME_POSITION_CLASS_POSTROLL="POSTROLL";a.TIME_POSITION_CLASS_OVERLAY="OVERLAY";a.TIME_POSITION_CLASS_DISPLAY="DISPLAY";a.TIME_POSITION_CLASS_PAUSE_MIDROLL="PAUSE_MIDROLL";a.EVENT_REQUEST_INITIATED="onRequestInitiated";a.EVENT_REQUEST_COMPLETE="onRequestComplete";a.EVENT_SLOT_STARTED="onSlotStarted";a.EVENT_SLOT_ENDED="onSlotEnded";
a.EVENT_CONTENT_VIDEO_PAUSED="contentVideoPaused";a.EVENT_CONTENT_VIDEO_RESUMED="contentVideoResumed";a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST="contentVideoPauseRequest";a.EVENT_CONTENT_VIDEO_RESUME_REQUEST="contentVideoResumeRequest";a.EVENT_USER_ACTION_NOTIFIED="userActionNotified";a.EVENT_USER_ACTION_PAUSE_BUTTON_CLICKED="pauseButtonClicked";a.EVENT_USER_ACTION_RESUME_BUTTON_CLICKED="resumeButtonClicked";a.CAPABILITY_STATUS_OFF=0;a.CAPABILITY_STATUS_ON=1;a.PARAMETER_LEVEL_PROFILE=0;a.PARAMETER_LEVEL_GLOBAL=
1;a.PARAMETER_LEVEL_OVERRIDE=5;a.PARAMETER_ENABLE_COUNTING_REPLAY_CALLBACK="enableCountingReplayCallback";a.PARAMETER_ENABLE_FORM_TRANSPORT="sdk.enableFormTransport";a.PARAMETER_ENABLE_JS_TRANSPORT="sdk.enableJSTransport";a.PARAMETER_DESIRED_BITRATE="desiredBitrate";a.PARAMETER_PAGE_SLOT_CONTENT_TYPE="sdk.pageSlotContentType";a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT="extension.ad.control.clickElement";a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED="extension.contentVideo.enabled";a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME=
"extension.contentVideo.respondPauseResume";a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK="extension.contentVideo.autoSeekBack";a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE="extension.contentVideo.autoSourceRestore";a.PARAMETER_EXTENSION_PAUSE_AD_ENABLE="extension.pausead.enable";a.PARAMETER_EXTENSION_OMSDK_ENABLED="extension.omsdk.enabled";a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED="extension.videoState.enabled";a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT="renderer.video.startDetectTimeout";
a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT="renderer.video.progressDetectTimeout";a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY="renderer.video.android.delay";a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE="renderer.video.displayControlsWhenPause";a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION="renderer.video.clickDetection";a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED="renderer.video.playAfterStalled";a.PARAMETER_EXTENSION_SURVEY_ENABLED="extension.survey.enabled";a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE=
"autoPauseAdOnVisibilityChange";a.PARAMETER_DISABLE_CORS_ENFORCEMENT="disableCORSEnforcement";a.PARAMETER_ENABLE_ACCESS_CONTROL_ALLOW_CREDENTIALS="enableAccessControlAllowCredentials";a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME="renderer.html.coadScriptName";a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT="renderer.html.isBackgroundTransparent";a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION="renderer.html.shouldEndAfterDuration";a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT="renderer.html.adLoadTimeout";
a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE="renderer.html.placementType";a.PARAMETER_RENDERER_HTML_BOOTSTRAP="renderer.html.bootstrap";a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR="renderer.html.primaryAnchor";a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH="renderer.html.marginWidth";a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT="renderer.html.marginHeight";a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY="renderer.vpaid.creativeTimeoutDelay";a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS="translator.vast.timeoutInMilliseconds";a.PARAMETER_VAST_MAX_WRAPPER_COUNT=
"translator.vast.maxWrapperCount";a.VAST_DEFAULT_MAX_WRAPPER_COUNT=5;a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL="interstitial";a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL="app-interstitial";a.PARAMETER_CONSENT_RETRIEVAL_TIMEOUT="consent_retrieval_timeout";a.PARAMETER_USE_GDPR_TCFAPI="useGDPR_TCFAPI";a.PARAMETER_USE_CCPA_USPAPI="useCCPA_USPAPI";a.GDPR_TCFAPI_VERSION=2;a.ID_TYPE_FW=1;a.ID_TYPE_CUSTOM=2;a.ID_TYPE_GROUP=3;a.VIDEO_STATE_PLAYING=1;a.VIDEO_STATE_PAUSED=2;a.VIDEO_STATE_STOPPED=
3;a.VIDEO_STATE_COMPLETED=4;a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED=1;a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED=2;a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE=3;a.VIDEO_ASSET_AUTO_PLAY_TYPE_CLICK_TO_PLAY=4;a.VIDEO_ASSET_DURATION_TYPE_EXACT="exact";a.VIDEO_ASSET_DURATION_TYPE_VARIABLE="variable";a.ADUNIT_PREROLL="preroll";a.ADUNIT_MIDROLL="midroll";a.ADUNIT_POSTROLL="postroll";a.ADUNIT_OVERLAY="overlay";a.ADUNIT_STREAM_PREROLL="stream_preroll";a.ADUNIT_STREAM_POSTROLL="stream_postroll";a.ADUNIT_PAUSE_MIDROLL="pause_midroll";
a.SLOT_LOCATION_PLAYER="player";a.SLOT_LOCATION_EXTERNAL="external";a.SLOT_OPTION_INITIAL_AD_STAND_ALONE=0;a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL=1;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY=2;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE=3;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE=4;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE=5;a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE=6;a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL=7;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL=
8;a.REQUEST_MODE_ON_DEMAND="on-demand";a.REQUEST_MODE_LIVE="live";a.MINIMUM_VAST_VERSION_SUPPORTED=2;a.MAXIMUM_VAST_VERSION_SUPPORTED=4;a.ERROR_VAST_XML_PARSING="100";a.ERROR_VAST_SCHEMA_VALIDATION="101";a.ERROR_VAST_VERSION_NOT_SUPPORTED="102";a.ERROR_VAST_TRACKING_ERROR="200";a.ERROR_VAST_LINEARITY_NOT_MATCH="201";a.ERROR_VAST_NO_AD="303";a.ERROR_VAST_WRAPPER_LIMIT_REACH="302";a.ERROR_VAST_URI_TIMEOUT="301";a.ERROR_VAST_GENERAL_LINEAR_ERROR="400";a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR="500";a.ERROR_VAST_COMPANION_GENERAL_ERROR=
"600";a.ERROR_VAST_GENERAL_VPAID_ERROR="901";a.AD_VIDEO_PAUSED_BY_RENDERER=1;a.AD_VIDEO_PAUSED_BY_TAB_SWITCH=2;a.AD_VIDEO_UNPAUSED=3;a.AD_VIDEO_HLS_PAUSED_BY_RENDERER_AFTER_TAB_SWITCH=4;a.OMSDK_PARTNER_NAME="Freewheeltv";a.OMSDK_SERVICE_SCRIPT_URL="https://mssl.fwmrm.net/libs/omsdk/1.3.17/omweb-v1.js";a.OMSDK_SESSION_SCRIPT_URL="https://mssl.fwmrm.net/libs/omsdk/1.3.17/omid-session-client-v1.js";a.OMSDK_ACCESS_MODE="full";a.OMSDK_CREATIVE_TYPE_VIDEO="video";a.OMSDK_IMPRESSION_TYPE_BEGIN_TO_RENDER=
"beginToRender";a.AD_VERIFICATION_EVENT_NOT_EXECUTED="verificationNotExecuted";a.VERIFICATION_RESOURCE_REJECTED="1";a.VERIFICATION_NOT_SUPPORTED="2";a.VERIFICATION_RESOURCE_LOAD_ERROR="3";a.IAB_API_FRAMEWORKS_VPAID_2=2;a.IAB_API_FRAMEWORKS_MRAID_1=3;a.IAB_API_FRAMEWORKS_OMID_1=7;a.Util={setContext:getParameterAccessControlAllowCredentials:canPlayVideoType:isMimeTypeHls:str2bool:trim:isBlank:encodeToHex:forEachOnArray:mixin:copy:bind:
getObject:transformToProxy:transformUrlToProxy:function(b){return this.transformToProxy(b,a.proxyUrl)},transformCreativeUrlToProxy:pingURLWithImage:pingURLWithForm:pingURLWithScript:pingURLWithXMLHTTPRequest:function(b){var c=
new XMLHttpRequest,d=a.Util.transformUrlToProxy(b);c.onload=c.onerror=c.ontimeout=function(){a.warn("Timeout ocurred while trying to send pingback:"+d)};c.timeout=1E3*a.CONTEXT_REQUEST_TIMEOUT;c.open("GET",d,!0);c.withCredentials=a.Util.getParameterAccessControlAllowCredentials();c.send()},
extractAdResponseJSONFromXMLHttpRequest:sendAdRequestWithXMLHTTPRequest:pingURL:
pingURLs:setParameterInURL:getParameterInURL:isParameterInURL:flashVersion:
xmlToJson:lazyJavaScriptLoad:getViewport:getAbsoluteUrl:secondsToHms:getFixedDigitRandomNumber:getDateStringInISOFormat:getTopMostWindow:getFrameAncestor:isValidProxyUrl:compareVersion:validateJSON:arrayToString:validateCustomPlayer:getBooleanParameter:offsetStringToSecond:function(b,c){if("string"!==
typeof b||this.isBlank(b))return-1;var d=/(\d+)%/.exec(b);if(d)return 0<c?c*d[1]/100|0:-1;if(c=/(\d+):(\d+):(\d+)(.(\d+))?/.exec(b))return 3600*c[1]+60*c[2]+1*c[3];a.warn('offset is malformatted with value "',b,' ", the expected format is either HH:MM:SS(:mmm) or percentage%.');return-1}};a.MediaState=function(){};a.MediaState.prototype={};a.MediaState.prototype.constructor=a.MediaState;a.Util.mixin(a.MediaState.prototype,{play:function(b){a.debug(this._name+" play("+b+")")},pause:function(b){a.debug(this._name+
" pause("+b+")")},complete:);a.MediaInitState=function(){this._name="MediaInitState"};a.MediaInitState.prototype=new a.MediaState;a.MediaInitState.prototype.constructor=a.MediaInitState;a.Util.mixin(a.MediaInitState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaPlayingState.instance);if("function"===typeof b.onStartPlaying)b.onStartPlaying()}});a.MediaInitState.instance=new a.MediaInitState;a.MediaPlayingState=
function(){this._name="MediaPlayingState"};a.MediaPlayingState.prototype=new a.MediaState;a.MediaPlayingState.prototype.constructor=a.MediaPlayingState;a.Util.mixin(a.MediaPlayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")");b.setMediaState(a.MediaPausedState.instance);if("function"===typeof b.onPausePlaying)b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompletePlaying)b.onCompletePlaying()}});
a.MediaPlayingState.instance=new a.MediaPlayingState;a.MediaPausedState=function(){this._name="MediaPausedState"};a.MediaPausedState.prototype=new a.MediaState;a.MediaPausedState.prototype.constructor=a.MediaPausedState;a.Util.mixin(a.MediaPausedState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaPlayingState.instance);if("function"===typeof b.onResumePlaying)b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);
if("function"===typeof b.onCompletePlaying)b.onCompletePlaying()}});a.MediaPausedState.instance=new a.MediaPausedState;a.MediaReplayingState=function(){this._name="MediaReplayingState"};a.MediaReplayingState.prototype=new a.MediaState;a.MediaReplayingState.prototype.constructor=a.MediaReplayingState;a.Util.mixin(a.MediaReplayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")");b.setMediaState(a.MediaReplayPausedState.instance);if("function"===typeof b.onPausePlaying)b.onPausePlaying()},
complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompleteReplaying)b.onCompleteReplaying()}});a.MediaReplayingState.instance=new a.MediaReplayingState;a.MediaReplayPausedState=function(){this._name="MediaReplayPausedState"};a.MediaReplayPausedState.prototype=new a.MediaState;a.MediaReplayPausedState.prototype.constructor=a.MediaReplayPausedState;a.Util.mixin(a.MediaReplayPausedState.prototype,{play:function(b){a.debug(this._name+
" play("+b+")");b.setMediaState(a.MediaReplayingState.instance);if("function"===typeof b.onResumePlaying)b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompleteReplaying)b.onCompleteReplaying()}});a.MediaReplayPausedState.instance=new a.MediaReplayPausedState;a.MediaEndState=function(){this._name="MediaEndState"};a.MediaEndState.prototype=new a.MediaState;a.MediaEndState.prototype.constructor=a.MediaEndState;
a.Util.mixin(a.MediaEndState.prototype,{play:);a.MediaEndState.instance=new a.MediaEndState;a.RendererState=function(){};a.RendererState.prototype={};a.RendererState.prototype.constructor=a.RendererState;a.Util.mixin(a.RendererState.prototype,{start:function(b){a.debug(this._name+" start() rendererController = "+b)},notifyStarted:function(b){a.debug(this._name+
" notifyStarted() rendererController = "+b)},stop:function(b){a.debug(this._name+" stop() rendererController = "+b)},complete:function(b){a.debug(this._name+" complete() rendererController = "+b)},notifyCompleted:fail:);a.RendererInitState=function(){this._name="RendererInitState"};
a.RendererInitState.prototype=new a.RendererState;a.RendererInitState.prototype.constructor=a.RendererInitState;a.RendererInitState.instance=new a.RendererInitState;a.Util.mixin(a.RendererInitState.prototype,{start:function(b){a.debug(this._name+" start()");b.setRendererState(a.RendererStartingState.instance);b.getRenderer().start(b)},stop:);a.RendererStartingState=
function(){this._name="RendererStartingState"};a.RendererStartingState.prototype=new a.RendererState;a.RendererStartingState.prototype.constructor=a.RendererStartingState;a.RendererStartingState.instance=new a.RendererStartingState;a.Util.mixin(a.RendererStartingState.prototype,{notifyStarted:function(b){a.debug(this._name+" notifyStarted()");b.setRendererState(a.RendererStartedState.instance);b.getAdInstance().play()},stop:);a.RendererStartedState=function(){this._name="RendererStartedState"};a.RendererStartedState.prototype=new a.RendererState;a.RendererStartedState.prototype.constructor=a.RendererStartedState;a.RendererStartedState.instance=new a.RendererStartedState;a.Util.mixin(a.RendererStartedState.prototype,{complete:stop:);a.RendererCompletingState=function(){this._name="RendererCompletingState"};a.RendererCompletingState.prototype=new a.RendererState;a.RendererCompletingState.prototype.constructor=a.RendererCompletingState;a.RendererCompletingState.instance=new a.RendererCompletingState;a.Util.mixin(a.RendererCompletingState.prototype,{notifyCompleted:);a.RendererCompletedState=function(){this._name="RendererCompletedState"};a.RendererCompletedState.prototype=new a.RendererState;a.RendererCompletedState.prototype.constructor=a.RendererCompletedState;a.RendererCompletedState.instance=new a.RendererCompletedState;a.RendererFailedState=function(){this._name="RendererFailedState"};a.RendererFailedState.prototype=new a.RendererState;a.RendererFailedState.prototype.constructor=
a.RendererFailedState;a.RendererFailedState.instance=new a.RendererFailedState;a.HTMLRenderer=a.HTMLRenderer.prototype={start:_onVisibilityChange:pause:function(){this.log("pause");this.shouldEndAfterDuration&&this.timer&&this.timer.pause()},resume:stop:_stop:resize:_cleanup:_setupParameters:_render:_layoutOverlayAd:_fillAdNode:presentInline:presentInterstitial:_onWindowMessageReceived:_mraidMethods:_mraidOpen:_mraidClose:_mraidExpand:_onViewportResizeScroll:log:function(b){var c=this._rendererController.getAdInstance().getSlot();a.log("HTMLRenderer["+
c+"]\t"+b)},warn:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return this.timer?this.timer.getPlayheadTime():-1},getDuration:function(){return this.timer?this.timer.getDuration():-1},_onRendererFailed:;a.HTMLRenderer.prototype.constructor=a.HTMLRenderer;a.PauseAdExtension=a.PauseAdExtension.prototype={init:dispose:;a.PauseAdExtension.prototype.constructor=a.PauseAdExtension;a.CustomPlayerRenderer=function(){this._adListener=this._customPlayer=this._rendererController=null;this._quartileSent=0;this._isPaused=this._isStarted=!1;this._timeoutTracker=null;this._lastPlayheadTime=0;this._timeUpdatePollingIntervalInMs=250};a.CustomPlayerRenderer.prototype={pause:function(){this._isPaused=!0;this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this._customPlayer&&this._customPlayer.playPause(!0)},
resume:start:function(b){this._rendererController=b;if(this._customPlayer=this._rendererController.getCustomPlayer()){b=this._rendererController.getAdInstance();var c=b.getSlot();a.log("CustomPlayerRenderer.start",c.getTimePositionClass(),b);var d=c.getVideoDisplaySize().width,e=c.getVideoDisplaySize().height;c=b.getRenderableCreativeRenditions();
if((e=(d=(new a.RenditionSelector(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)||1E3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2)).getCustomPlayerBestFitRendition(c,d,e))?d.getPrimaryCreativeRenditionAsset():null)&&c.length)if(c=e.getProxiedUrl()){b.setActiveCreativeRendition(d);a.log("CustomPlayerRenderer.start selected rendition is:",c);this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);
this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);b=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION);if(null===b||"undefined"===typeof b)b="false";!1===a.Util.str2bool(b)?this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF):this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_ON);this._adListener=new a.AdListener(this);
b=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5E3;this._progressTimeoutInMs=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8E3;this._onTimeout=a.Util.bind(this,;this._timeoutTracker=setTimeout(this._onTimeout,b,b+" ms custom player timeout before playing");this._quartileTimerId=setInterval(a.Util.bind(this,this._pollForAdVideoTimeUpdate),this._timeUpdatePollingIntervalInMs);
a.log("CustomPlayerRenderer will play video ad: "+c);this._customPlayer.open(d,this._adListener)}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}else this._onRendererFailed(a.ERROR_UNKNOWN,"custom player was null")},_pollForAdVideoTimeUpdate:function(){var b=this._customPlayer.getPlayheadTime(),c=this._customPlayer.getDuration();"number"===typeof b&&"number"===typeof c&&(0>=b||0>=c?a.debug("CustomPlayerRenderer._pollForAdVideoTimeUpdate currentTime or duration is less than or 0"):
(this._isStarted||(this._isStarted=!0,this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)),this._rendererController&&(this._rendererController.checkProgress(b),this._rendererController.checkForSkippableStateChange()),b>this._lastPlayheadTime&&(this._clearTimeoutTracker(),this._lastPlayheadTime=b,this._isPaused||(this._timeoutTracker=setTimeout(this._onTimeout,this._progressTimeoutInMs,this._progressTimeoutInMs+" ms custom player timeout when playing"))),b>=.25*c&&1>this._quartileSent&&
(this._quartileSent=1,this._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE})),b>=.5*c&&2>this._quartileSent&&(this._quartileSent=2,this._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT})),b>=.75*c&&3>this._quartileSent&&(this._quartileSent=3,this._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})),b>=c-.5&&4>this._quartileSent&&(this._rendererController.checkProgress(c),this._quartileSent=4,this._rendererController.processEvent({name:a.EVENT_AD_COMPLETE}))))},
_onEnded:function(b){a.debug("CustomPlayerRenderer._onEnded");this._pollForAdVideoTimeUpdate();this._clearTimeoutTracker();this._clearQuartileTimer();this._customPlayer=null;this._adListener=this._adListener._customPlayerRenderer=null;if(b){var c=a.ERROR_CUSTOM_PLAYER;b.includes("timeout")&&(c=a.ERROR_TIMEOUT);this._onRendererFailed(c,b)}else this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED);this._rendererController=null},stop:function(){a.debug("CustomPlayerRenderer.stop");
this._customPlayer&&this._customPlayer.playPause(!0);this._onEnded()},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return this._customPlayer?this._customPlayer.getPlayheadTime():-1},getDuration:setVolume:_getClickThroughUrls:_clearTimeoutTracker:function(){this._timeoutTracker&&(clearTimeout(this._timeoutTracker),this._timeoutTracker=null)},_clearQuartileTimer:_onRendererFailed:;a.CustomPlayerRenderer.prototype.constructor=a.CustomPlayerRenderer;a.AdListener=function(a){this._customPlayerRenderer=a};a.AdListener.prototype={onEnded:function(){a.debug("AdListener.onEnded");this._customPlayerRenderer._onEnded()},onError:getClickThroughUrls:function(){return this._customPlayerRenderer._getClickThroughUrls()}};a.AdListener.prototype.constructor=a.AdListener;a.Timer=a.Timer.prototype={};a.Timer.prototype.constructor=a.Timer;a.Util.mixin(a.Timer.prototype,{tick:start:pause:stop:getPlayheadTime:getCTValue:getDuration:function(){return this._duration}});a.RendererController=function(b,c){var d=null,e=null,f={},g=a.RendererInitState.instance,k={},m=[],r=0,K=!1,z=!1,n=[];return{getAdInstance:function(){return c},getContext:function(){return b},getRendererState:function(){return g},
processEvent:checkProgress:checkForSkippableStateChange:handleStateTransition:setCapability:function(a,b){c.setMetr(a,b)},getVersion:
getParameter:getCompanionSlots:createNullDrivingAdInstance:scheduleAdInstances:commitAdInstance:isRenderer:function(){return d&&a.MODULE_TYPE_RENDERER===d.info()[a.INFO_KEY_MODULE_TYPE]},isTranslator:playable:reset:play:_actualPlay:dispatchEvent:requestContentStateChange:getRenderer:function(){return d},setRenderer:function(a){d=a},setRendererState:function(a){g=a},getContentVideoElement:function(){return b.getContentVideoElement()},
getCustomPlayer:function(){return b.getCustomPlayer()},_restorePlaceholdersForHybrid:rendererMatch:_matchRendererClassName:function(d){ar g=d.getPrimaryCreativeRenditionAsset().getContentType(),k=d.getContentType(),m=d.getWrapperType(),u=d.getCreativeApi(),z=d.getBaseUnit(),K=c.getSoAdUnit(),n=c.getSlot(),t=n.getType();n=n.getTimePositionClass();a.debug("match renderer for creativeRendition:"+d.getId());a.debug("slot type:"+t);if(a.Util.isBlank(k)&&
a.Util.isBlank(m))return a.warn("renderer not match due to both contentType and wrapperType are empty"),null;var v=b._rendererManifest["*"];v||(v=b._rendererManifest[m]);v||(v=b._rendererManifest[k]);if(!v){t=b._overriddenAdRenderers.concat(b._adResponse._adRenderers);for(var F=0;F<t.length;F++){var w=t[F],A=!w.contentType;A||(m?A=e(m,w.contentType,!0):(g&&(A=e(g,w.contentType,!0)),A||(A=e(k,w.contentType,!0))));if(A)if((A=!w.creativeApi)||(A=e(u,w.creativeApi)),A)if(w.baseUnit&&!e(z,w.baseUnit))a.debug("can't match renderer "+
w.url+" due to baseUnit not match for creativeRendition:"+d.getId());else if(w.soAdUnit&&!e(K,w.soAdUnit))a.debug("can't match renderer "+w.url+" due to soAdUnit not match for creativeRendition:"+d.getId());else if(w.slotType&&!e(n.toUpperCase(),w.slotType.toUpperCase()))a.debug("can't match renderer "+w.url+" due to slotType not match for creativeRendition:"+d.getId());else if("class://DashRenderer"===w.url&&void 0===window.tv.freewheel.Dashjs)a.debug("can't match renderer "+w.url+" due to missing tv.freewheel.Dash.js for creativeRendition:"+
d.getId());else{if(a.debug("renderer "+w.url+" matched for creativeRendition:"+d.getId()),w.url){v=w.url;d=v.indexOf("?");-1!==d&&(v=v.substring(0,d));d=v.lastIndexOf("/");-1!==d&&(v=v.substring(d+1));d=v.lastIndexOf(".js");-1!==d&&(v=v.substring(0,d));var x={};if(w.parameter)for(d=[].concat(w.parameter),g=0;g<d.length;g++)if(d[g].hasOwnProperty("name"))x[d[g].name]=d[g].value;else for(var G in d[g])d[g].hasOwnProperty(G)&&(x[G]=d[g][G]);a.Util.getObject(h+"."+v)&&(v=h+"."+v);if(a.Util.getObject(v))f=
x,r=0;else{if(0<r)break;var B=this;G=1*this.getContext().getParameter("moduleLoadTimeout")||6E4;r=window.setTimeout(G);a.Util.lazyJavaScriptLoad(w.url,}break}}else a.debug("can't match renderer "+
w.url+" due to creative api not match for creativeRendition:"+d.getId());else a.debug("can't match renderer "+w.url+" due to contentType not match for creativeRendition:"+d.getId())}}return v?v:a.Util.isBlank(m)?"null/null"===k?h+".NullRenderer":null:null},_inferEventType:pause:function(){a.log("RendererController.pause");d&&"function"===typeof d.pause?d.pause():a.log("Renderer.pause() is not implemented.")},resume:stop:};a.VideoStateExtension=function(){};a.VideoStateExtension.prototype=
{_enabled:init:dispose:;a.VideoStateExtension.prototype.constructor=a.VideoStateExtension;a.AdResponse=function(a){this._context=a};a.AdResponse.prototype={};a.AdResponse.prototype.constructor=
a.AdResponse;a.Util.mixin(a.AdResponse.prototype,{parse:getCreative:getAd:getTemporalSlots:function(){return this._temporalSlots},getSiteSectionNonTemporalSlots:function(){return this._siteSectionNonTemporalSlots},getVideoPlayerNonTemporalSlots:function(){return this._videoPlayerNonTemporalSlots},
getSiteSectionCustomId:function(){return this._siteSectionCustomId},getSlotByCustomId:_initSlotData:);a.Slot=function(b){var c=
"",d=null,e=null,f=null,g=null,k=[],m=[],h={},K=null,z=a.MediaInitState.instance,n=0,u=null,l,p,t,L,M,N,P,S=0,Q=0,v=[],F=null,w=0,A=!1,x=!1,G=!0,B=[],D,J,I=!1;return{getAutoPlayBlocked:function(){return I},setAutoPlayBlocked:function(a){I=a},getSlotProfile:function(){return e},setSlotProfile:function(a){e=a},setMediaState:function(a){z=a},setParameter:getParameter:getAdCount:setCustomId:function(a){c=
a},getCustomId:function(){return c},setAdUnit:function(a){N=a},getAdUnit:function(){return N},setType:function(a){d=a},getType:function(){return d},setTimePosition:function(a){p=a},getTimePosition:function(){return p},getEndTimePosition:function(){return t},setTimePositionClass:getTimePositionClass:function(){return u},setWidth:function(a){L=a},getWidth:function(){return u!==a.TIME_POSITION_CLASS_DISPLAY?L?L:b.getVideoDisplaySize().width:L},setHeight:getHeight:setBase:function(a){l=a},getBase:function(){return l},setCuepointSequence:function(a){P=1*a?1*a:0},getCuepointSequence:function(){return P},getVideoDisplaySize:setMaxDuration:function(a){S=1*a?1*a:0},getMaxDuration:function(){return S},setMinDuration:function(a){Q=1*a?1*a:0},getMinDuration:function(){return Q},setAcceptContentType:setSignalId:getSignalId:function(){return F},setMaxAds:getMaxAds:function(){return w},getAcceptContentType:parse:function(d){if(d){c=d.customId;p=1*d.timePosition;u=d.timePositionClass&&d.timePositionClass.toUpperCase()||u;var e=1*d.endTimePosition||-1;t=e>=p?e:-1;N=d.adUnit;F=d.signalId;if(void 0===F||null===F)F=d.outSignalId;for(var f=0,g=d.eventCallbacks||
[];f<g.length;f++){e=g[f];var h=a.EventCallback.newEventCallback(b,e.name,e.type);h&&(h._slot=this,h.parse(e),m.push(h))}f=0;for(g=d.selectedAds||[];f<g.length;f++)e=g[f],d=[],h=new a.AdInstance(b),d.push(h),h._slot=this,h._slotCustomId=c,h._parentAdInstancesGroup=d,h.parse(e),k.push(d)}},getCurrentAdInstance:function(){return f},isPauseSlot:play:stop:pause:function(){a.log("Slot.pause");u!==a.TIME_POSITION_CLASS_DISPLAY?f&&f.pause():a.log("Not a temporal slot. Ignore.")},resume:skipCurrentAd:setVisible:_play:onStartPlaying:function(){this._onStartPlaying()},onStartReplaying:function(){this._onStartPlaying()},onCompletePlaying:function(){this._onCompletePlaying()},onCompleteReplaying:playNextAdInstance:scheduleAdInstance:_clearScheduledAdInstance:_onStartPlaying:dispatchSlotEvent:_onCompletePlaying:_playNextAdInstance:_commitScheduledAdInstance:_nextPlayableAdInstance:toString:getAdInstances:getPlayheadTime:getTotalDuration:playCompanionAds:getState:function(){return z},setAcceptCompanion:function(a){D=a},getAcceptCompanion:function(){return D},setInitialAdOption:getInitialAdOption:};a.SurveyExtension=a.SurveyExtension.prototype={init:dispose:_getParameters:;a.SurveyExtension.prototype.constructor=a.SurveyExtension;a.ExtensionManager=function(b){this._extensions={};this._context=b;this._surveyExtension=new a.SurveyExtension;this._surveyExtension.init(b);this._videoStateExtension=new a.VideoStateExtension;this._videoStateExtension.init(b);this._displayRefreshExtension=new a.DisplayRefreshExtension;this._displayRefreshExtension.init(b);this._contentVideoExtension=new a.ContentVideoExtension;this._contentVideoExtension.init(b);this._pauseAdExtension=
new a.PauseAdExtension;this._pauseAdExtension.init(b);this._omsdkExtension=new a.OMSDKExtension;this._omsdkExtension.init(b)};a.ExtensionManager.prototype={_scriptLoaded:_getExtensionNameFromUrl:_loadFail:load:dispose:function(){this._extensions=null;this._surveyExtension.dispose();this._surveyExtension=null;this._displayRefreshExtension.dispose();this._displayRefreshExtension=null;this._pauseAdExtension.dispose();this._pauseAdExtension=null;this._omsdkExtension.dispose();this._omsdkExtension=null;this._videoStateExtension.dispose();this._videoStateExtension=null;this._contentVideoExtension.dispose();this._context=
this._contentVideoExtension=null}};a.ExtensionManager.prototype.constructor=a.ExtensionManager;a.EventCallback=a.EventCallback.prototype={};a.EventCallback.prototype.constructor=a.EventCallback;a.EventCallback.getEventCallback=a.EventCallback.newEventCallback=a.EventCallback.getShortType=a.Util.mixin(a.EventCallback.prototype,{parse:copy:getUrl:getTrackingUrls:process:_processTrackingUrls:
_shouldSkipSendingTrackingAndExternalUrls:_needEmptyCT:_getAdPlayheadTime:_getCreativeAssetLocation:_getParameter:_replaceVASTMacro:_replaceMacrosInUrl:function(b,c){if(a.Util.isBlank(b))return b;c&&c[a.INFO_KEY_VAST_ERROR_CODE]&&(b=this._replaceVASTMacro(b,
"ERRORCODE",c[a.INFO_KEY_VAST_ERROR_CODE]));this._getCreativeAssetLocation()&&(b=this._replaceVASTMacro(b,"ASSETURI",this._getCreativeAssetLocation()));var d=this._context._getContentPlayheadTime();if(this._adInstance){c=null!=d&&0<=Number(d)?a.Util.secondsToHms(d):"";b=this._replaceVASTMacro(b,"CONTENTPLAYHEAD",c);b=this._replaceVASTMacro(b,"CACHEBUSTING",a.Util.getFixedDigitRandomNumber(8));b=this._replaceVASTMacro(b,"TIMESTAMP",a.Util.getDateStringInISOFormat(new Date));b=this._replaceVASTMacro(b,
"OMIDPARTNER",a.OMSDK_PARTNER_NAME+"/"+this._context._adManager.getVersion());c=[];if(this._context._overriddenAdRenderers&&null!=this._context._overriddenAdRenderers){var e=[];this._context._adResponse&&this._context._adResponse._adRenderers&&(e=this._context._overriddenAdRenderers.concat(this._context._adResponse._adRenderers));for(var f=0;f<e.length;f++){var g=e[f].creativeApi;g.includes("VPAID")?c.push(a.IAB_API_FRAMEWORKS_VPAID_2):g.includes("MRAID")&&c.push(a.IAB_API_FRAMEWORKS_MRAID_1)}}this._context.getParameter(a.PARAMETER_EXTENSION_OMSDK_ENABLED)&&
c.push(a.IAB_API_FRAMEWORKS_OMID_1);c=c.sort().filter(;b=this._replaceVASTMacro(b,"APIFRAMEWORKS",c.toString())}b=b.replace(/#(ce?)\{([^\}]+)\}/g,a.Util.bind(this,);c="";try{c=a.Util.getParameterInURL(b,a.URL_PARAMETER_KEY_CR)}catch(k){return a.warn(k),b}a.Util.isBlank(c)||(b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CR,this._replaceMacrosInUrl(c)));return b}});a.AdClickEventCallback=function(b){a.EventCallback.call(this,b)};a.AdClickEventCallback.prototype=new a.EventCallback;a.AdClickEventCallback.prototype.constructor=a.AdClickEventCallback;a.Util.mixin(a.AdClickEventCallback.prototype,
{getUrl:process:);a.AdImpressionEventCallback=function(b){a.EventCallback.call(this,b)};a.AdImpressionEventCallback.prototype=new a.EventCallback;a.AdImpressionEventCallback.prototype.constructor=a.AdImpressionEventCallback;a.Util.mixin(a.AdImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._adInstance.getSlot().isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:
a.INIT_VALUE_TWO},_getStartTimePosition:_getAutoPlayBlocked:getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b);c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_METR,this._adInstance._metr);this._name!==a.EVENT_AD_IMPRESSION?c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(b)?"":this._adInstance._timer.tick()):(-1<this._getStartTimePosition()&&
(c=a.Util.setParameterInURL(c,a.URL_PARAMETER_START_TIME_POSITION,this._getStartTimePosition())),this._getAutoPlayBlocked()&&(c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED,a.URL_PARAMETER_KEY_AUTO_PLAY_BLOCKED_VALUE)));return c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:);a.AdQuartileEventCallback=function(b){a.EventCallback.call(this,b)};a.AdQuartileEventCallback.prototype=new a.EventCallback;a.AdQuartileEventCallback.prototype.constructor=a.AdQuartileEventCallback;a.Util.mixin(a.AdQuartileEventCallback.prototype,{_getInitValue:getUrl:process:);a.AdStandardEventCallback=function(b){a.EventCallback.call(this,b)};a.AdStandardEventCallback.prototype=new a.EventCallback;a.AdStandardEventCallback.prototype.constructor=a.AdStandardEventCallback;a.AdProgressEventCallback=function(b){a.EventCallback.call(this,b)};a.AdProgressEventCallback.prototype=new a.EventCallback;
a.AdProgressEventCallback.prototype.constructor=a.AdProgressEventCallback;a.Util.mixin(a.AdProgressEventCallback.prototype,{getTrackingUrls:process:);a.ErrorEventCallback=function(b){a.EventCallback.call(this,b)};a.ErrorEventCallback.prototype=new a.EventCallback;
a.ErrorEventCallback.prototype.constructor=a.ErrorEventCallback;a.Util.mixin(a.ErrorEventCallback.prototype,{getUrl:);a.ResellerNoAdEventCallback=function(b){a.EventCallback.call(this,b)};a.ResellerNoAdEventCallback.prototype=new a.EventCallback;a.ResellerNoAdEventCallback.prototype.constructor=a.ResellerNoAdEventCallback;a.Util.mixin(a.ResellerNoAdEventCallback.prototype,{});a.SlotImpressionEventCallback=function(b){a.EventCallback.call(this,b)};a.SlotImpressionEventCallback.prototype=new a.EventCallback;a.SlotImpressionEventCallback.prototype.constructor=
a.SlotImpressionEventCallback;a.Util.mixin(a.SlotImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:_getInitValue:getUrl:process:function(b){a.EventCallback.prototype.process.call(this,
b);this._processed=!0}});a.VideoViewEventCallback=a.VideoViewEventCallback.prototype=new a.EventCallback;a.VideoViewEventCallback.prototype.constructor=a.VideoViewEventCallback;a.Util.mixin(a.VideoViewEventCallback.prototype,{_getInitValue:_getCTValue:getUrl:_shouldSkipSendingTrackingAndExternalUrls:function(){return this._processed},process:);a.VideoRenderer=function(){this._adVideo=null;this._duration=this._playheadTime=-1;this._dragging=this._stopInvoked=this._isEnded=!1;this._volume=1;this._rendererController=null;
this._isBuffering=!1;this._autoPauseAdOnVisibilityChange=!0;this._hls=null;this._adVideoPauseState=""};a.VideoRenderer.prototype={pause:resume:start:function(b){this._rendererController=b;b=this._rendererController.getAdInstance();var c=b.getSlot(),d=this,e=!1,f=!1;this._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE);if(a.PLATFORM_NOT_SUPPORT_VIDEO_AD)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,c.getTimePositionClass());
else if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&c.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"midroll");else{a.log("VideoRenderer.start",c.getTimePositionClass(),b);var g=this._rendererController.getContentVideoElement();a.debug("VideoRenderer","use content video element");g.controls=!1;this._adVideo=g;var k=null,m=null,h=null,n=null,z=c.getVideoDisplaySize().width,t=c.getVideoDisplaySize().height,u=b.getRenderableCreativeRenditions(),l=(z=(new a.RenditionSelector(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)||
1E3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2)).getBestFitRendition(u,z,t))?z.getPrimaryCreativeRenditionAsset():null;if(l&&u.length)if(u=l.getProxiedUrl()){b.setActiveCreativeRendition(z);a.log("VideoRenderer.start selected rendition is:",u);b=l.getMimeType();var p=a.Util.isMimeTypeHls(b);this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);
this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);var C=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;C||this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);var L=a.PLATFORM_EVENT_CLICK,M=a.MOBILE_EVENT_DRAG;this._volume=this._rendererController.getContext().getAdVolume();this._adVideo.volume=this._volume;this._adVideo.muted=0===this._volume;var N=function(b){a.debug("VideoRenderer.checkTimeUpdate timeout");T(b)},P=function(){m&&(clearTimeout(m),
m=null)},S=a.Util.bind(this,function(b){a.debug("onAdVideoBufferEmpty(): Ad video event "+b.type);b=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED);null!==b&&"undefined"!==typeof b&&!1!==a.Util.str2bool(b)&&(a.debug("play the ad immediately after the stalled event"),g&&g._fw_videoAdPlaying&&g.play())}),Q=function(b){d._isBuffering||(d._isBuffering=!0,d._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_START}),a.debug("onAdVideoBufferingStarted(): Ad video event "+
b.type))},v=function(b){d._isBuffering&&(d._isBuffering=!1,d._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_END}),a.debug("onAdVideoBufferingEnded(): Ad video event "+b.type))};b=this._rendererController.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT);var F=null;b&&(F=document.getElementById(b));F||(F=g);var w=a.Util.bind(this,,A=a.Util.bind(this,function(b){a.debug("Ad video event "+b.type);this._dragging=!0}),x,G=B=D=0,J=function(b){a.debug("Ad video event "+b.type);0>=g.currentTime?a.debug("VideoRenderer.onAdVideoTimeUpdate currentTime is less than or 0"):(P(),g.paused||(b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||
8E3,m=setTimeout(N,b,b+"ms timeout when playing")),f||(f=!0,d._playheadTime=g.currentTime,0>d._playheadTime&&(d._playheadTime=0),k&&(clearTimeout(k),k=null),d._quartileTimerId=setInterval(function(){var b=g.currentTime,c=g.duration;0<b&&(d._playheadTime=b);0<c&&(d._duration=c);"number"!==typeof b||"number"!==typeof c||h||(d._rendererController&&(d._rendererController.checkProgress(b),d._rendererController.checkForSkippableStateChange()),b>=.25*c&&1>D&&(d._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),
D=1),b>=.5*c&&2>D&&(d._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),D=2),b>=.75*c&&3>D&&(clearInterval(d._quartileTimerId),d._quartileTimerId=null,d._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),D=3))},1E3),d._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)))};this.dispose=a.Util.bind(this,function(){I()});var I=function(b){var c=h;b&&b.type&&(a.debug("Ad video event "+b.type),"error"===b.type&&(a.warn(b.target.src),a.warn(b.target.currentSrc),
v(b)));P();k&&(clearTimeout(k),k=null);C&&(F.removeEventListener(L,w,!1),F.removeEventListener(M,A,!1));x&&(clearTimeout(x),x=null);O&&d._autoPauseAdOnVisibilityChange&&(document.removeEventListener("visibilitychange",O,!1),O=null);g.removeEventListener("ended",I,!1);g.removeEventListener("error",I,!0);g.removeEventListener("pause",G,!1);g.removeEventListener("playing",B,!1);g.removeEventListener("timeupdate",J,!1);g.removeEventListener("stalled",S,!1);g.removeEventListener("waiting",Q,!1);g.removeEventListener("canplay",
v,!1);g.paused||(a.debug("try pausing video before complete"),g.pause());b&&"error"===b.type&&(c="video error",(b=g.error||b.target.error)&&(c="error:"+b+",code:"+b.code));c||(d._isEnded=!0);a.log("VideoRenderer.complete");e?d._rendererController.checkProgress(g.duration):(e=!0,delete g._fw_videoAdPlaying,d._adVideo=null,d._quartileTimerId&&(clearInterval(d._quartileTimerId),d._quartileTimerId=null),c?d._onRendererFailed(n,c):(d._stopInvoked||(g.currentTime>=.25*g.duration&&1>D&&(d._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),
D=1),g.currentTime>=.5*g.duration&&2>D&&(d._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),D=2),g.currentTime>=.75*g.duration&&3>D&&(d._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),D=3),g.currentTime>=g.duration-.5&&4>D&&(d._rendererController.checkProgress(g.duration),d._rendererController.processEvent({name:a.EVENT_AD_COMPLETE}),D=4)),d._stopInvoked=!1,d._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)));d._rendererController=null;d._hls&&d._hls.destroy()};
var T=function(b){h=b;n=a.ERROR_TIMEOUT;a.warn(h);a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT||I()},O=function(b){a.log("onVisibilityChange:"+(document.hidden?"invisible":"visible"));document.hidden?d._adVideoPauseState!==a.AD_VIDEO_PAUSED_BY_RENDERER&&(g&&!g.paused&&g.pause(),d._adVideoPauseState=a.AD_VIDEO_PAUSED_BY_TAB_SWITCH,d._rendererController&&d._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),k&&(clearTimeout(k),k=null)):d._adVideoPauseState===a.AD_VIDEO_PAUSED_BY_TAB_SWITCH?(d.resume(),
f||!g._fw_fromVideoPool&&!a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT||(b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5E3,k=setTimeout(T,b,b+"ms timeout before playing"))):d._adVideoPauseState===a.AD_VIDEO_HLS_PAUSED_BY_RENDERER_AFTER_TAB_SWITCH&&d._rendererController&&d._rendererController.processEvent({name:a.EVENT_AD_RESUME})};g._fw_videoAdPlaying=!0;var E=!1,R=a.VideoRenderer._fw_playedDummyVideo||c.getTimePositionClass()!==a.TIME_POSITION_CLASS_PREROLL||!a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL||/\.webm$/.test(l.getProxiedUrl())?
R():(a.VideoRenderer._fw_playedDummyVideo=!0,a.debug("play dummy video for iOS 3.2-4.1"),g.src="http://127.0.0.1:1/404.mp4",g.load(),g.play(),g._fw_videoAdPlaying=!0,g.addEventListener("error",!0),setTimeout(R,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL?500:5E3))}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}},stop:info:getPlayheadTime:getDuration:function(){return this._duration},setVolume:_onRendererFailed:;a.VideoRenderer.prototype.constructor=a.VideoRenderer;a.AdRequest=a.AdRequest.prototype={setCapability:addKeyValue:removeKey:setProfile:setVideoDisplayCompatibleSizes:setSiteSection:setVisitor:setRequestMode:setRequestDuration:addCandidateAd:addTemporalSlot:setSubsessionToken:function(a){this._subsessionToken=a},scanPageSlots:generateTypeBRequestUrl:generateVideoViewRequestUrlWithDummyContextInstanceId:parseQueryStr:generateGlobalParametersQueryStr:generateKeyValuesStr:generateSlotsTypeBStr:detectScreenDimension:useTCFAPI:function(){a.debug("AdRequest.useTCFAPI");if(this._context.getParameter(a.PARAMETER_USE_GDPR_TCFAPI)){var b=this._context._adManager._fwGDPR||"",c=this._context._adManager._fwGDPRConsent||
"";this.removeKey("_fw_gdpr");this.removeKey("_fw_gdpr_consent");this.addKeyValue("_fw_gdpr",b.toString());this.addKeyValue("_fw_gdpr_consent",c)}},useUSPAPI:function(){a.debug("AdRequest.useUSPAPI");if(this._context.getParameter(a.PARAMETER_USE_CCPA_USPAPI)){var b=this._context._adManager._fwUSPString||"";""!=b&&(this.removeKey("_fw_us_privacy"),this.addKeyValue("_fw_us_privacy",b))}}};a.AdInstance=function(b){this._context=b;this._creativeRenditionId=this._creativeId=this._soAdUnit=this._adId=this._slot=
null;this._universalAdIdRegistry=this._universalAdId=this._action=this._marketUnifiedAdId=this._openExchangeId=this._dealId=this._replicaId="";this._primaryCreativeRendition=this._creative=null;this._creativeRenditions=[];this._noLoad=!1;this._companionAdInstances=[];this._eventCallbacks=[];this._externalEventCallbackUrlsDictionary={};this._rendererController=new a.RendererController(b,this);this._timer=new a.Timer;this._metr=0;this._state=a.MediaInitState.instance;this._isStartSuccessfully=this._translated=
this._isImpressionSent=this._isInitiatedSent=!1;this._lastDurationFromRenderer=-1;this._slotCustomId=this._parentAdInstancesGroup=null;this._isSkipped=!1;this._wrapperCount=0;this._startTimePosition=-1;this._adVerifications=[];this._skipOffset=-1;this._progressEventCallbackUrlsDict={}};a.AdInstance.prototype={};a.AdInstance.prototype.constructor=a.AdInstance;a.METR_MASK_QUARTILE=0;a.METR_MASK_MIDPOINT=1;a.METR_MASK_COMPLETE=2;a.METR_MASK_VOLUME=3;a.METR_MASK_SIZE=4;a.METR_MASK_CONTROL=5;a.METR_MASK_REWIND=
6;a.METR_MASK_ACCEPT_INVITATION=7;a.METR_MASK_CLOSE=8;a.METR_MASK_MINIMIZE=9;a.METR_MASK_CLICK=10;a.AdInstance._metrDictionary={};a.AdInstance._metrDictionary[a.EVENT_AD_FIRST_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_THIRD_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_QUARTILE]=1<<a.METR_MASK_QUARTILE|1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_MIDPOINT]=1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_COMPLETE]=
1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_MUTE]=1<<a.METR_MASK_VOLUME;a.AdInstance._metrDictionary[a.EVENT_AD_UNMUTE]=1<<a.METR_MASK_VOLUME;a.AdInstance._metrDictionary[a.EVENT_AD_COLLAPSE]=1<<a.METR_MASK_SIZE;a.AdInstance._metrDictionary[a.EVENT_AD_EXPAND]=1<<a.METR_MASK_SIZE;a.AdInstance._metrDictionary[a.EVENT_AD_PAUSE]=1<<a.METR_MASK_CONTROL;a.AdInstance._metrDictionary[a.EVENT_AD_RESUME]=1<<a.METR_MASK_CONTROL;a.AdInstance._metrDictionary[a.EVENT_AD_REWIND]=1<<a.METR_MASK_REWIND;
a.AdInstance._metrDictionary[a.EVENT_AD_ACCEPT_INVITATION]=1<<a.METR_MASK_ACCEPT_INVITATION;a.AdInstance._metrDictionary[a.EVENT_AD_CLOSE]=1<<a.METR_MASK_CLOSE;a.AdInstance._metrDictionary[a.EVENT_AD_MINIMIZE]=1<<a.METR_MASK_MINIMIZE;a.AdInstance._metrDictionary[a.EVENT_AD_CLICK]=1<<a.METR_MASK_CLICK;a.Util.mixin(a.AdInstance.prototype,{getAdId:function(){return this._adId},getUniversalAdId:getSoAdUnit:function(){return this._soAdUnit},getParameter:addProgressEventCallbackUrls:getAdSkippableState:getEventCallbackUrls:addEventCallbackUrls:setClickThroughUrl:addAdVerifications:addCreativeRendition:getRendererController:function(){return this._rendererController},getSlot:getCompanionSlots:getActiveCreativeRendition:function(){return this._primaryCreativeRendition},setActiveCreativeRendition:getAllCreativeRenditions:getRenderableCreativeRenditions:getPlayheadTime:getDuration:parse:function(b){if(b){this._adId=b.adId||null;this._creativeId=b.creativeId||null;this._creativeRenditionId=b.creativeRenditionId||null;this._replicaId=b.hasOwnProperty("replicaId")?b.replicaId:"";this._dealId=b.hasOwnProperty("dealId")?b.dealId:"";this._openExchangeId=b.hasOwnProperty("openExchangeId")?b.openExchangeId:"";this._marketUnifiedAdId=b.hasOwnProperty("marketUnifiedAdId")?b.marketUnifiedAdId:"";this._action=b.hasOwnProperty("action")?
b.action:"";this._universalAdId=b.hasOwnProperty("universalAdId")?b.universalAdId:"";this._universalAdIdRegistry=b.hasOwnProperty("universalAdIdRegistry")?b.universalAdIdRegistry:"";this._noLoad=this._context._adResponse.getAd(this._adId).getNoLoad();this._soAdUnit=this._context._adResponse.getAd(this._adId).getSoAdUnit();this._creative=this._context._adResponse.getCreative(this._adId,this._creativeId);this._creativeRenditions=this._creative.getEligibleCreativeRenditionsForAdInstance(this);var c,
d;var e=0;for(c=b.eventCallbacks||[];e<c.length;e++){var f=c[e];if(d=a.EventCallback.newEventCallback(this._context,f.name,f.type))d._adInstance=this,d.parse(f),this._eventCallbacks.push(d)}e=0;for(c=b.companionAds||[];e<c.length;++e)(f=c[e])&&f.adSlotCustomId&&(d=new a.AdInstance(this._context),d._slotCustomId=f.adSlotCustomId,d.parse(f),this._companionAdInstances.push(d));e=0;for(c=b.fallbackAds||[];e<c.length;++e)f=c[e],d=new a.AdInstance(this._context),this._parentAdInstancesGroup.push(d),d._slot=
this._slot,d._parentAdInstancesGroup=this._parentAdInstancesGroup,d.parse(f);0<this._creativeRenditions.length&&(this._primaryCreativeRendition=this._creativeRenditions[0])}},play:pause:function(){a.log("AdInstance.pause "+this._slotCustomId);this._isStartSuccessfully?this._rendererController&&this._rendererController.pause():
a.log("Ad hasn't started yet. Ignore.")},resume:skip:_processSkipEvent:stop:fakeComplete:complete:isStarted:function(){return this._isStartSuccessfully},onStartPlaying:onCompletePlaying:function(){},onStartReplaying:function(){},onCompleteReplaying:
getEventCallback:processEvent:processProgressEvent:setVolume:setMetr:getExternalEventCallbackUrls:reset:cloneForTranslation:function(){var b=new a.AdInstance(this._context);b._adId=this._adId;b._creativeId=this._creativeId;b._creative=this._creative.cloneForTranslation();b._creativeRenditionId=this._creativeRenditionId;b._isInitiatedSent=this._isInitiatedSent;b._noLoad=this._noLoad;b._slot=this.getSlot();b._soAdUnit=this.getSoAdUnit();b._replicaId=this._replicaId;b._dealId=this._dealId;b._openExchangeId=this._openExchangeId;
b._marketUnifiedAdId=this._marketUnifiedAdId;b._action=this._action;b._universalAdId=this._universalAdId;b._universalAdIdRegistry=this._universalAdIdRegistry;b._wrapperCount=this._wrapperCount;b._adVerifications=this._adVerifications;b._skipOffset=this._skipOffset;for(var c=0;c<this._eventCallbacks.length;c++){var d=this._eventCallbacks[c].copy();d._adInstance=b;b._eventCallbacks.push(d)}b._externalEventCallbackUrlsDictionary=a.Util.copy(this._externalEventCallbackUrlsDictionary);b._progressEventCallbackUrlsDict=
a.Util.copy(this._progressEventCallbackUrlsDict);for(c=0;c<this._companionAdInstances.length;c++)this._companionAdInstances[c].isPlaceholder()?b._companionAdInstances.push(this._companionAdInstances[c].cloneForTranslation()):b._companionAdInstances.push(this._companionAdInstances[c]);return b},isPlaceholder:function(){return this._noLoad},setMediaState:_isValidEventNameAndType:isPlayable:toString:getCompanionAdInstances:isRequiredToShow:incrementWrapperCount:getWrapperCount:function(){return this._wrapperCount},getDealId:function(){return this._dealId},getOpenExchangeId:function(){return this._openExchangeId},getMarketUnifiedAdId:function(){return this._marketUnifiedAdId},getAction:function(){return this._action},setStartTimePosition:getStartTimePosition:function(){return this._startTimePosition},getSkipOffset:_setSkipOffset:function(b){this.getDuration();this._skipOffset=a.Util.offsetStringToSecond(b,this.getDuration())}});a.EventDispatcher=a.EventDispatcher.prototype={addEventListener:dispatchEvent:removeEventListener:;a.EventDispatcher.prototype.constructor=a.EventDispatcher;a.DashRenderer=a.DashRenderer.prototype={pause:resume:start:function(b){this._rendererController=b;var c=this._rendererController.getAdInstance(),d=c.getSlot(),e=this,f=!1,g=!1;this._autoPauseAdOnVisibilityChange=
this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE);if(a.PLATFORM_NOT_SUPPORT_VIDEO_AD)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,d.getTimePositionClass());else if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&d.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"midroll");else if(a.PLATFORM_NOT_SUPPORT_DASH)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"MPEG-DASH playback not supported on this platform");else{a.log("DashRenderer.start",
d.getTimePositionClass(),c);var k=this._rendererController.getContentVideoElement(),m=d.getVideoDisplaySize().width,h=d.getVideoDisplaySize().height,n=c.getRenderableCreativeRenditions();b=(b=this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE))&&0<Number(b)?Number(b):null;if((m=(h=(new a.RenditionSelector(b||1E3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2)).getBestDashRendition(n,m,h))?h.getPrimaryCreativeRenditionAsset():
null)&&n.length)if(m.getProxiedUrl()){c.setActiveCreativeRendition(h);a.log("DashRenderer.start selected rendition is:",m.getUrl());this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);var z=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;z||this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);
var t=a.PLATFORM_EVENT_CLICK,u=a.MOBILE_EVENT_DRAG;a.debug("DashRenderer","use content video element");k.controls=!1;var l=this._dashjs.MediaPlayer().create();l.initialize();c=l.getVersion();a.debug("dash.js -v "+l.getVersion()+" loaded");if(0!==a.Util.compareVersion(c,a.PLATFORM_DASHJS_SUPPORTED_VERSION))this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Unsupported tv.freewheel.Dash.js version");else{l.setAutoPlay(!1);l.attachView(k);b&&l.updateSettings({streaming:{abr:{initialBitrate:{video:b}}}});l.attachSource(m.getUrl());
l.preload();this._fwDashPlayer=l;var p=null,C=null,L=null;this._volume=this._rendererController.getContext().getAdVolume();l.setVolume(this._volume);l.setMute(0===this._volume);var M=N=P=a.Util.bind(this,,S=Q=b=this._rendererController.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT);
var v=null;b&&(v=document.getElementById(b));v||(v=k);var F=a.Util.bind(this,,w=a.Util.bind(this,,A,x=G=B=0,D=function(b){a.debug("Ad video event "+b.type);0>=l.time()?a.debug("DashRenderer.onAdVideoTimeUpdate currentTime is less than or 0"):
(N(),l.isPaused()||(b=e._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8E3,C=setTimeout(M,b,b+"ms timeout when playing")),g||(g=!0,e._playheadTime=l.time(),0>e._playheadTime&&(e._playheadTime=0),p&&(clearTimeout(p),p=null),e._quartileTimerId=setInterval(function(){var b=l.time(),c=l.duration();0<b&&(e._playheadTime=b);0<c&&(e._duration=c);"number"!==typeof b||"number"!==typeof c||L||(e._rendererController&&(e._rendererController.checkProgress(b),e._rendererController.checkForSkippableStateChange()),
b>=.25*c&&1>B&&(e._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),B=1),b>=.5*c&&2>B&&(e._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),B=2),b>=.75*c&&3>B&&(clearInterval(e._quartileTimerId),e._quartileTimerId=null,e._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),B=3))},1E3),e._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)))};this.dispose=a.Util.bind(this,;var J=var I=T=O=l._fw_videoAdPlaying=
!0;var E=!1;(()}}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}},stop:function(){a.debug("DashRenderer stop");this._stopInvoked=!0;this._fwDashPlayer&&(this._fwDashPlayer._fw_videoAdPlaying=
!1,this._fwDashPlayer.pause(),this.dispose());this._rendererController=null},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:getDuration:function(){return this._duration},setVolume:function(b){a.debug("DashRenderer setVolume("+b+")");this._fwDashPlayer?(this._fwDashPlayer.setVolume(b),this._fwDashPlayer.setMute(0===
b),this._volume!==b&&this._rendererController.processEvent({name:a.EVENT_AD_VOLUME_CHANGE}),0===this._volume&&0!==b?this._rendererController.processEvent({name:a.EVENT_AD_UNMUTE}):0!==this._volume&&0===b&&this._rendererController.processEvent({name:a.EVENT_AD_MUTE}),this._volume=b):a.debug("DashRenderer ad video is null, ignore.")},_onRendererFailed:function(b,c,d){var e={};e[a.INFO_KEY_ERROR_MODULE]="DashRenderer";e[a.INFO_KEY_ERROR_CODE]=b;d||(d=a.ERROR_VAST_GENERAL_LINEAR_ERROR);e[a.INFO_KEY_VAST_ERROR_CODE]=
d;c&&(e[a.INFO_KEY_ERROR_INFO]=c);this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,e)}};a.DashRenderer.prototype.constructor=a.DashRenderer;a.HTMLAdGenerator={log:function(b){a.log("HTMLAdGenerator\t"+b)},getExtension:generateAd:generateImageHTML:generateFlashHTML:generateIFrameHTML:docLitToHTMLLit:
htmlLitToDocLit:function(b){a.HTMLAdGenerator.log("htmlLitToDocLit");return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Advertisement</title></head><body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">'+b+"</body></html>"},wrapUnsafeHTML:wrapJSCode:generateScriptHTML:htmlLitToHTMLDocLitMobile:;a.AdVerification=function(a){this.vendorKey="";this.javaScriptResources=this._parseJavaScriptResources(a);this.executableResources=this._parseExecutableResources(a);this.verificationParameters="";this.trackingEvents={};a["@attributes"]&&a["@attributes"].vendor&&(this.vendorKey=a["@attributes"].vendor);a.VerificationParameters&&a.VerificationParameters.value&&(this.verificationParameters=a.VerificationParameters.value);if(a.TrackingEvents&&a.TrackingEvents.Tracking)if(a=a.TrackingEvents.Tracking,
a.length)for(var b=0;b<a.length;b++)this._pushTrackingEvents(a[b]);else this._pushTrackingEvents(a)};a.AdVerification.prototype={dispatchAdVerificationNotExecutedWithReason:_pushTrackingEvents:_parseJavaScriptResources:function(a){return this._parseResources(a.JavaScriptResource,
this._parseJavaScriptResourceNode.bind(this))},_parseExecutableResources:_parseResources:_parseJavaScriptResourceNode:function(a){return{url:this._parseUrl(a),apiFramework:this._parseApiFramework(a),browserOptional:this._parseBrowserOptional(a)}},_parseExecutableResourceNode:_parseUrl:_parseApiFramework:function(a){return this._parseFromAttributes(a,"apiFramework")},_parseBrowserOptional:function(a){return this._parseFromAttributes(a,"browserOptional")},_parseType:_parseFromAttributes:;a.RenditionSelector=function(a,c,d,e){this._targetByterate=a;this._arWeight=c;this._pxWeight=d;this._conversionFactor=e};a.RenditionSelector.prototype={getBestFitRendition:getCustomPlayerBestFitRendition:_getBitRateFilteredRenditions:getBestDashRendition:compareVisualMetrics:calculateVisualRatios:findDistance:;a.RenditionSelector.prototype.constructor=a.RenditionSelector;a.PageSlotScanner=a.PageSlotScanner.prototype={isSlotDuplicate:findPageSlotByScope:scanPageSlots:slotsToTypeBStr:_addCandidateAds:_parseFlags:_getInitialOption:;a.PageSlotScanner.prototype.constructor=a.PageSlotScanner;a.DisplayRefreshExtension=a.DisplayRefreshExtension.prototype={init:_resetSubContext:_onAdStarted:_checkMissingCompanionForAd:_refreshSlots:dispose:;a.DisplayRefreshExtension.prototype.constructor=a.DisplayRefreshExtension;a.Ad=a.Ad.prototype={isRequiredToShow:function(){return this._isRequiredToShow},parse:getSoAdUnit:function(){return this._soAdUnit},getId:function(){return this._id},getNoLoad:function(){return this._noLoad},getCreative:addCreativeRendition:;a.Ad.prototype.constructor=a.Ad;
a.Creative=a.Creative.prototype={getId:function(){return this._id},getBaseUnit:function(){return this._baseUnit},getDuration:function(){return this._duration},getParameter:function(a){return this._parameters[a]},setParameter:function(a,c){null==c?delete this._parameters[a]:this._parameters[a]=c},parse:
getAllCreativeRenditions:function(){return this._creativeRenditions},addCreativeRendition:function(a){this._creativeRenditions.push(a)},getEligibleCreativeRenditionsForAdInstance:cloneForTranslation:;a.Creative.prototype.constructor=a.Creative;a.CreativeRendition=function(){this._id=null;this._creativeApi="None";this._baseUnit=null;this._replicaId="";this._bitrate=this._height=this._width=this._preference=this._wrapperUrl=this._wrapperType=this._contentType=null;this._parameters={};this._primaryCreativeRenditionAsset=null;this._otherCreativeRenditionAssets=[];this._universalAdId=this._duration=
null};a.CreativeRendition.prototype={getId:function(){return this._id},getCreativeApi:function(){return this._creativeApi},setCreativeApi:getReplicaId:function(){return this._replicaId},getContentType:setContentType:function(a){this._contentType=a},getWrapperType:function(){return this._wrapperType},
setWrapperType:function(a){this._wrapperType=a},getWrapperUrl:function(){return this._wrapperUrl},setWrapperUrl:function(a){this._wrapperUrl=a},getBaseUnit:function(){return this._baseUnit},setBaseUnit:function(a){this._baseUnit=a},getPreference:function(){return this._preference},setPreference:function(a){this._preference=a},getWidth:function(){return this._width},setWidth:function(a){this._width=a},getHeight:function(){return this._height},setHeight:function(a){this._height=a},getDuration:function(){return this._duration},
setDuration:function(a){this._duration=a},getParameter:function(a){return this._parameters[a]},setParameter:getUniversalAdId:function(){return this._universalAdId},setUniversalAdId:function(a){this._universalAdId=a},getPrimaryCreativeRenditionAsset:function(){return this._primaryCreativeRenditionAsset},getOtherCreativeRenditionAssets:function(){return this._otherCreativeRenditionAssets.slice()},addCreativeRenditionAsset:getBitrate:parse:;a.CreativeRendition.prototype.constructor=a.CreativeRendition;a.CreativeRenditionAsset=a.CreativeRenditionAsset.prototype={getName:function(){return this._name},setName:function(a){this._name=a},getUrl:function(){return this._url},getProxiedUrl:function(){return this._proxiedUrl},setUrl:getContent:function(){return this._content},setContent:function(a){this._content=a},getContentType:function(){return this._contentType},setContentType:function(a){this._contentType=a},getMimeType:function(){return this._mimeType},setMimeType:function(a){this._mimeType=a},getBytes:function(){return this._bytes},setBytes:function(a){this._bytes=a},parse:;a.CreativeRenditionAsset.prototype.constructor=a.CreativeRenditionAsset;a.AdManager=function(b){var c=this,d=this;this._context=this.newContext();this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,;this._networkId=this._serverURL="";this._location=null;if(b){var e=a.Util.validateJSON(b,{adNetworkID:{allowedTypes:["number","string"]},
adProfileID:{allowedTypes:["string"]},adServerUrl:{allowedTypes:["string"]},adSiteSectionID:{allowedTypes:["string"]},adAssetNetworkID:{allowedTypes:["number","string"],isOptional:!0},adOptOut:{allowedTypes:["number","boolean"],isOptional:!0},appBundleID:{allowedTypes:["string"],isOptional:!0},appName:{allowedTypes:["string"],isOptional:!0},appVersion:{allowedTypes:["string"],isOptional:!0},authenticationEntity:{allowedTypes:["string"],isOptional:!0},coppa:{allowedTypes:["string"],isOptional:!0},
deviceAdAttributes:{allowedTypes:["string"],isOptional:!0},distributorAppID:{allowedTypes:["string"],isOptional:!0},ifa:{allowedTypes:["string"],isOptional:!0},ifaValue:{allowedTypes:["string"],isOptional:!0},privacyData:{allowedTypes:["string"],isOptional:!0}},"adConfig");if(e)throw b="Unable to initialize AdManager instance. "+e.message,a.warn(b),Error(b);this._adConfig=Object.assign({},b);"boolean"===typeof b.adOptOut&&(this._adConfig.adOptOut=Number(b.adOptOut));"string"===typeof b.adNetworkID&&
(this._adConfig.adNetworkID=Number(b.adNetworkID));"string"===typeof b.adAssetNetworkID&&(this._adConfig.adAssetNetworkID=Number(b.adAssetNetworkID));this.setNetwork(b.adNetworkID);this.setServer(b.adServerUrl)}this._fwGDPRConsent=this._fwGDPR=null;this._fwTCFAPIExecuted=!1;this._fwUSPString=null;this._isListeningForTCData=this._fwUSPAPIExecuted=!1;this._tcfapiImpl=null;this._tcfapiCallback=function(b,d){d?c._onTCFSuccess(b):(c._fwTCFAPIExecuted=!0,c._isListeningForTCData=!1,a.warn("TCFAPI add listener failed."))};
this._fetchGDPRData();this._fetchCCPAData()};a.AdManager.prototype={getVersion:setNetwork:setServer:setLocation:newContext:_validateVideoConfig:newContextWithContext:_setupConsentPostMessage:function(b){a.debug("AdManager.setupConsentPostMessage");var c=b+"Locator",d=b+"Call",e=b+"Return",f=a.Util.getFrameAncestor(c),
g={};window[b]=function(a,b,e){if(f){var k=Math.random()+"",h={};a=(h[d]={command:a,parameter:b,callId:k},h);g[k]=e;f.postMessage(a,"*")}else e({msg:c+" not found"},!1)};window.addEventListener("message",function(b){try{var c="string"===typeof b.data?JSON.parse(b.data):b.data;if(c[e]){var d=c[e];"function"===typeof g[d.callId]&&(g[d.callId](d.returnValue,d.success),delete g[d.callId])}}catch(K){a.warn("Consent postMessage listener error:",K)}},!1)},_retrieveGDPRWithPostMessage:function(){a.debug("AdManager.retrieveGDPRWithPostMessage");
this._setupConsentPostMessage("__tcfapi");this._tcfapiImpl=window.__tcfapi;this._getGdprConsentData()},_fetchGDPRData:_addEventListenerForTCData:function(){a.debug("AdManager._addEventListenerForTCData");this._isListeningForTCData=!0;try{this._tcfapiImpl("addEventListener",
a.GDPR_TCFAPI_VERSION,this._tcfapiCallback.bind(this))}catch(b){this._fwTCFAPIExecuted=!0,a.warn("AdManager._addEventListenerForTCData failed with err: ",b,b.description)}},_removeEventListenerForTCData:function(){a.debug("AdManager._removeEventListenerForTCData");this._isListeningForTCData=!1;try{this._tcfapiImpl("removeEventListener",a.GDPR_TCFAPI_VERSION,this._tcfapiCallback.bind(this))}catch(b){a.warn("AdManager._removeEventListenerForTCData failed with err: ",
b,b.description)}},_getTCStringFromTCData:
_onTCFSuccess:function(b){a.debug("AdManager._onTCFSuccess with event status ",b.eventStatus);this._getTCStringFromTCData(b);"tcloaded"==b.eventStatus||"useractioncomplete"==b.eventStatus?(this._fwTCFAPIExecuted=!0,this._isListeningForTCData&&this._removeEventListenerForTCData()):"cmpuishown"==b.eventStatus?this._isListeningForTCData||this._addEventListenerForTCData():(this._fwGDPRConsent=this._fwGDPR="",this._fwTCFAPIExecuted=!0,a.warn("VendorConsentData's event status is missing or not valid."))},
_getGdprConsentData:function(){a.debug("AdManager.getGdprConsentData");if("function"==typeof this._tcfapiImpl)try{this._tcfapiImpl("getTCData",a.GDPR_TCFAPI_VERSION,this._tcfapiCallback.bind(this))}catch(b){this._fwTCFAPIExecuted=!0,a.warn("AdManager.getGdprConsentData failed with err: ",b,b.description)}else this._fwTCFAPIExecuted=!0,a.warn("TCFAPI function cannot be found. _fw_gdpr: "+this._fwGDPR+", _fw_gdpr_consent: "+this._fwGDPRConsent)},_retrieveCCPAWithPostMessage:function(){a.debug("AdManager.retrieveCCPAWithPostMessage");
this._setupConsentPostMessage("__uspapi");this._getUSPData(window.__uspapi)},_fetchCCPAData:_getUSPData:function(b){a.debug("AdManager.getUSPData");if("function"==typeof b)try{var c=this;b("getUSPData",1,function(b,e){e?(b=b.uspString,null!=b?"string"==typeof b?
c._fwUSPString=b:(c._fwUSPString=b.toString(),a.warn("USPData's uspString value is malformed.")):a.warn("USPData's uspString value is missing.")):a.warn("Cannot retrieve CCPA params from USPAPI.");c._fwUSPAPIExecuted=!0},this)}catch(d){this._fwUSPAPIExecuted=!0,a.warn("AdManager.getUSPData "+d.description)}else this._fwUSPAPIExecuted=!0,a.warn("USPAPI function cannot be found. _fw_us_privacy: "+this._fwUSPString)},dispose:function(){a.debug("AdManager.dispose()");this._context.dispose()},cloneContext:;
a.AdManager.prototype.constructor=a.AdManager;a._instanceCounter=0;a._instanceQueue={};a.Context=a.Context.prototype={getAdVolume:function(){return this._customPlayer?(a.warn("Context.getAdVolume: volume control is not supported when using custom player"),-1):this._adVolume},setAdVolume:function(b){if(this._customPlayer)a.warn("Context.setAdVolume: volume control is not supported when using custom player");
else if(a.debug("Context.setAdVolume",b),this.getContentVideoElement())if("number"!==typeof b||0>b||1<b)a.debug("Invalid volume: "+b);else if((a.PLATFORM_IS_IPHONE_IPOD||a.PLATFORM_IS_IPAD)&&0<b&&1>b)a.debug("iOS doesn't allow volume values other than 0 and 1, ignore.");else if(b===this._adVolume)a.debug("Volume did not change, ignore.");else{this._adVolume=b;b=this.getTemporalSlots();for(var c=0;c<b.length;++c){var d=b[c];if(d.getType()===a.SLOT_TYPE_TEMPORAL&&d.getState()!==a.MediaInitState.instance&&
d.getState()!==a.MediaEndState.instance&&(d=d.getCurrentAdInstance())){d.setVolume(this._adVolume);break}}}else a.debug("No video element set, ignore.")},__onVolumeChange:
addRenderer:setCapability:function(b,c){a.debug("Context.setCapability",b,c);this._adRequest.setCapability(b,c)},addKeyValue:setParameter:getParameter:setVideoState:registerVideoDisplayBase:setContentVideoElement:registerCustomPlayer:_registerCustomPlayer:getContentVideoElement:getCustomPlayer:setVideoDisplaySize:getVideoDisplaySize:setVideoDisplayCompatibleSizes:function(b){a.debug("Context.setVideoDisplayCompatibleSizes",b);this._adRequest.setVideoDisplayCompatibleSizes(b)},
resize:setProfile:function(b){a.debug("Context.setProfile",b);this._adRequest.setProfile(b)},setVideoAsset:setVideoAssetCurrentTimePosition:function(b){a.debug("Context.setVideoAssetCurrentTimePosition("+b+")");this._videoAsset.setVideoAssetCurrentTimePosition(b)},setSiteSection:setVisitor:startSubsession:function(b){a.debug("Context.startSubsession("+b+")");this._adRequest.setSubsessionToken(b)},setRequestMode:function(b){a.debug("Context.setRequestMode("+b+")");this._adRequest.setRequestMode(b)},setRequestDuration:function(b){a.debug("Context.setRequestDuration("+
b+")");this._adRequest.setRequestDuration(b)},addCandidateAd:addTemporalSlot:getTemporalSlots:getSlotByCustomId:getSlotsByTimePositionClass:_isConsentRequired:function(){var b=this.getParameter(a.PARAMETER_USE_GDPR_TCFAPI)&&!this._adManager._fwTCFAPIExecuted,c=this.getParameter(a.PARAMETER_USE_CCPA_USPAPI)&&!this._adManager._fwUSPAPIExecuted;return b||c},submitRequest:function(b){a.debug("Context.submitRequest",b);var c=0;if(!this._isConsentRequired()||this._isRefreshRequest)this._submitValidatedRequest(b);else var d=this.getParameter(a.PARAMETER_CONSENT_RETRIEVAL_TIMEOUT),
e=setInterval(function(){c+=100;if(!this._isConsentRequired()||c>=d)clearInterval(e),this._submitValidatedRequest(b)}.bind(this),100)},_submitValidatedRequest:function(b){this.dispatchEvent(a.EVENT_REQUEST_INITIATED,{});this._adManager._isListeningForTCData&&this._adManager._removeEventListenerForTCData();if(this._requestState)a.warn("Context.submitRequest: request already submitted");else if(a.Util.isBlank(this._adManager._serverURL))a.warn("Context.submitRequest: serverURL is not set");else{this._requestState=
1;this._adRequest.useTCFAPI();this._adRequest.useUSPAPI();this._adRequest.scanPageSlots();if(this._isRefreshRequest){var c={},d=[],e,f;for(e=0;e<this._refreshSlots.length;e++){var g=this._refreshSlots[e];if(void 0!==this._adRequest._slotScanner._slots[g]){c[g]=this._adRequest._slotScanner._slots[g];var k=c[g].split("&");for(f=0;f<k.length;f++)-1!==k[f].search("flag")&&(k[f]="flag=-cmpn");c[g]=k.join("&")}for(f=0;f<this._adRequest._slotScanner._knownSlots.length;f++)this._adRequest._slotScanner._knownSlots[f].id===
g&&(k=this._adRequest._slotScanner._knownSlots[f],k.acceptCompanion=!1,k.initialAdOption=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,d.push(k))}this._adRequest._slotScanner._slots=c;this._adRequest._slotScanner._knownSlots=d}this.getParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT)?(a.debug("Context.submitRequest: enabling Safari transport mechanism globally"),a.PLATFORM_SEND_REQUEST_BY_FORM=!0,a.PLATFORM_SEND_REQUEST_BY_JS=!1,this.setParameter(a.PARAMETER_ENABLE_JS_TRANSPORT,!1,a.PARAMETER_LEVEL_GLOBAL)):this.getParameter(a.PARAMETER_ENABLE_JS_TRANSPORT)?
(a.debug("Context.submitRequest: enabling JS transport mechanism globally"),a.PLATFORM_SEND_REQUEST_BY_JS=!0,a.PLATFORM_SEND_REQUEST_BY_FORM&&a.warn("PARAMETER_ENABLE_FORM_TRANSPORT was enabled while attempting to use PARAMETER_ENABLE_JS_TRANSPORT. This will prevent PARAMETER_ENABLE_JS_TRANSPORT from working properly. Please disable PARAMETER_ENABLE_FORM_TRANSPORT before attempting to use PARAMETER_ENABLE_JS_TRANSPORT."),this.setParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT,!1,a.PARAMETER_LEVEL_GLOBAL)):
a.PLATFORM_SEND_REQUEST_BY_JS=!1;c=this._adManager._serverURL;".js"!==c.substring(c.length-3,c.length)&&(c=this._adRequest.generateTypeBRequestUrl());d=bind(this);b&&"number"===typeof b&&0<b&&(a.CONTEXT_REQUEST_TIMEOUT=b);setTimeout(d,1E3*a.CONTEXT_REQUEST_TIMEOUT);a.log("Context.submitRequest: sending request to",c,"timeout",a.CONTEXT_REQUEST_TIMEOUT);a.PLATFORM_SEND_REQUEST_BY_FORM?
(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(c,this._instanceId,!0),this._onMessagePosted=bind(this),window.addEventListener("message",this._onMessagePosted,!1)):a.PLATFORM_SEND_REQUEST_BY_JS?a.Util.sendAdRequestWithXMLHTTPRequest(c):a.Util.pingURLWithScript(c)}},requestComplete:addEventListener:function(b,c){a.debug("Context.addEventListener",b);this._eventDispatcher.addEventListener(b,c)},removeEventListener:dispatchEvent:dispose:loadExtension:_markCurrentContentPlayheadTime:_getContentPlayheadTime:_requestContentVideoToPauseBySlot:function(a){this._videoAsset.requestPauseBySlot(a)},
_requestContentVideoToResumeBySlot:function(a){this._videoAsset.requestResumeBySlot(a)},_setVideoDisplaySizeByContentVideo:_replacePageSlot:;a.Context.prototype.constructor=a.Context;a.Capabilities=a.Capabilities.prototype={init:setCapability:function(a,c){this._capabilities[a]=c},getCapability:parseCapabilities:;a.OMSDKExtension=a.OMSDKExtension.prototype={init:_onRequestComplete:_initWithScripts:_addServiceScript:
_addSessionScript:
_addScript:function(b,c,d){a.debug("OMSDKExtension._addScript");var e=document.createElement("script");e.type="text/javascript";e.src=b;e.id=c+this._context._instanceId;e.onload=d.bind(this);e.onerror=bind(this);return document.body.appendChild(e)},_checkIfAdSessionShouldStart:_onAdInitiated:function(b){if(b.subType===a.EVENT_AD_PREINIT&&b.adInstance){a.debug("OMSDKExtension_onAdInitiated");b=b.adInstance;var c=b.getActiveCreativeRendition();c=b._rendererController._matchRendererClassName(c);this._isRendererSupported(c)?this._isTimePositionClassSupported(b)?(this._videoElement=this._context.getContentVideoElement(),null==this._videoElement?a.debug("OMSDKExtension: Error: Cannot use OMSDK because no video element was found"):null==b._adVerifications||
0==b._adVerifications.length?a.debug("OMSDKExtension: No AdVerifications found."):(this._videoElement.addEventListener("loadeddata",this._videoDidLoad),this._context.addEventListener(a.EVENT_AD,this._adEventListener),this._ad=b,this._prepareAdSession())):a.debug("OMSDKExtension: The selected ad's slot time position class is not supported by OMSDK Web Video: "+timePositionClass):a.debug("OMSDKExtension: The selected renderer does not support OMSDK Web Video: "+c)}},_isRendererSupported:function(b){a.debug("OMSDKExtension._isRendererSupported:",
b);switch(b){case h+".VideoRenderer":return!0;case h+".DashRenderer":return!0;default:return!1}},_isTimePositionClassSupported:_prepareAdSession:_getVerificationResourcesFromAdVerifications:_createOMSDKContext:function(b){a.debug("OMSDKExtension._createOMSDKContext");var c=this._context._adManager.getVersion()+"";c=new this._sessionClient.Partner(a.OMSDK_PARTNER_NAME,c);var d=this._getContentURL();b=new this._sessionClient.Context(c,b,d);b.setVideoElement(this._videoElement);return b},_getContentURL:_createAdSession:_startAdSession:_videoDidLoad:_adEventListener:_onAdEvent:function(b){a.debug("OMSDKExtension._onAdEvent:",b.subType);if(b&&b.subType)switch(b.subType){case "loaded":this._onVideoLoaded();break;case a.EVENT_AD_IMPRESSION:try{this._adEvents.impressionOccurred(),this._mediaEvents.start(this._ad.getDuration(),this._videoElement.volume)}catch(c){a.debug("OMSDKExtension: Error: "+
c)}break;case a.EVENT_AD_FIRST_QUARTILE:this._mediaEvents.firstQuartile();break;case a.EVENT_AD_MIDPOINT:this._mediaEvents.midpoint();break;case a.EVENT_AD_THIRD_QUARTILE:this._mediaEvents.thirdQuartile();break;case a.EVENT_AD_COMPLETE:this._mediaEvents.complete();break;case a.EVENT_AD_IMPRESSION_END:this._endAdSession();break;case a.EVENT_AD_PAUSE:this._mediaEvents.pause();break;case a.EVENT_AD_RESUME:this._mediaEvents.resume();break;case a.EVENT_AD_BUFFERING_START:this._mediaEvents.bufferStart();
break;case a.EVENT_AD_BUFFERING_END:this._mediaEvents.bufferFinish();break;case a.EVENT_AD_VOLUME_CHANGE:this._mediaEvents.volumeChange(this._videoElement.volume);break;case a.EVENT_AD_CLICK:this._mediaEvents.adUserInteraction("click");break;case a.EVENT_AD_SKIPPED:this._mediaEvents.skipped();break;case a.EVENT_ERROR:this._adSession.error("media",b.errorInfo||"An error occured during ad playback."),this._endAdSession()}},_onVideoLoaded:function(){a.debug("OMSDKExtension._onVideoLoaded");var b=this._ad.getSlot().getTimePositionClass().toLowerCase();
b=new this._sessionClient.VastProperties(!1,0,this._context._va_autoPlayType!=a.VIDEO_ASSET_AUTO_PLAY_TYPE_CLICK_TO_PLAY&&this._context._va_autoPlayType!=a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE,b);this._adEvents.loaded(b)},_endAdSession:_cleanupAfterAdSession:dispose:;a.OMSDKExtension.prototype.constructor=a.OMSDKExtension;
a.VideoAsset=a.VideoAsset.prototype={setVideoAsset:setVideoAssetCurrentTimePosition:setVideoState:callback:getPlayheadTime:play:pause:function(){this._internalState.pause(this)},complete:onStartPlaying:function(){this.callback()},onStartReplaying:function(){this.callback()},onPausePlaying:onResumePlaying:function(){this._callbackTimer.start()},onCompletePlaying:onCompleteReplaying:function(){this.onCompletePlaying()},setMediaState:function(a){this._internalState=a},requestPauseBySlot:function(b){a.debug("requestPauseBySlot");this._internalState===a.MediaPlayingState.instance||this._internalState===a.MediaReplayingState.instance?this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,{slot:b}):a.debug("Not sending content pause request because content video state is",
JSON.stringify(this._internalState))},requestResumeBySlot:requestForVideoViewCallback:requestComplete:parse:;a.NullRenderer=function(){this._rendererController=null};a.NullRenderer.prototype=
{start:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return-1},getDuration:function(){return-1}};a.NullRenderer.prototype.constructor=a.NullRenderer;a.VPAIDWrapper=a.VPAIDWrapper.prototype={_isCreativeFunctionInvokable:checkVPAIDInterface:loadCreativeAsset:setCallbacksForCreative:removeCallbacksForCreative:handshakeVersion:initAd:startAd:stopAd:isCreativeSkippable:getAdSkippableState:
skipAd:function(){a.log("VPAID Creative: skipAd()");this._creative.skipAd()},canPauseAd:function(){return this._isCreativeFunctionInvokable("pauseAd")},canResumeAd:function(){return this._isCreativeFunctionInvokable("resumeAd")},canResizeAd:pauseAd:function(){this.canPauseAd()&&(a.log("VPAID Creative: pauseAd()"),this._creative.pauseAd())},resumeAd:
resizeAd:getAdVolume:function(){return this._isCreativeFunctionInvokable("getAdVolume")?this._creative.getAdVolume():-1},setAdVolume:getAdExpanded:getAdRemainingTime:function(){return this._isCreativeFunctionInvokable("getAdRemainingTime")?
this._creative.getAdRemainingTime():-1},getAdDuration:getAdLinear:function(){return this._creative.getAdLinear()},getAdCompanions:setTimeoutValueInMs:function(a){this._timeoutInMs=a},cancelTimeoutEvent:addEventListener:removeEventListener:_waitForTimeout:getTimeoutOperation:function(){return this._timeoutOperation}};a.VPAIDWrapper.prototype.constructor=a.VPAIDWrapper;a.VPAIDRenderer=a.VPAIDRenderer.prototype={};a.VPAIDRenderer.prototype.constructor=a.VPAIDRenderer;a.VPAIDRenderer.VastCompanion=a.VPAIDRenderer.VastCompanion.prototype={getWidth:function(){return this._width},getHeight:function(){return this._height},_isValidResource:hasValidRendtions:translateToAdInstance:;a.VPAIDRenderer.VastCompanion.prototype.constructor=
a.VPAIDRenderer.VastCompanion;a.VPAIDRenderer.VastAdSelect=function(){};a.VPAIDRenderer.VastAdSelect.prototype={_getDeadSpaceRatio:matchAdsWithSlots:;a.VPAIDRenderer.VastAdSelect.prototype.constructor=a.VPAIDRenderer.VastAdSelect;
a.Util.mixin(a.VPAIDRenderer.prototype,{_initParams:_failWithError:onCreativeLoadError:onCreativeTimeout:setVolume:onAdVolumeChange:onAdExpandedChange:
onAdDurationChange:onAdClickThru:onCreativeAssetLoaded:function(){a.log("VPAIDRenderer: onCreativeAssetLoaded()");this.vpaidCreative.cancelTimeoutEvent();var b=this,c=if()&&c()){b.creativeEventCallbacks={AdStarted:b.onAdStarted,AdStopped:b.onAdStopped,AdSkipped:b.onAdSkipped,AdLoaded:b.onAdLoaded,AdLinearChange:b.onAdLinearChange,AdSizeChange:b.onAdSizeChange,
AdExpandedChange:b.onAdExpandedChange,AdDurationChange:b.onAdDurationChange,AdVolumeChange:b.onAdVolumeChange,AdImpression:b.onAdImpression,AdClickThru:b.onAdClickThru,AdSkippableStateChange:b.onAdSkippableStateChange,AdVideoFirstQuartile:b.onAdVideoFirstQuartile,AdVideoMidpoint:b.onAdVideoMidpoint,AdVideoThirdQuartile:b.onAdVideoThirdQuartile,AdVideoComplete:b.onAdVideoComplete,AdUserAcceptInvitation:b.onAdUserAcceptInvitation,AdUserMinimize:b.onAdUserMinimize,AdUserClose:b.onAdUserClose,AdPaused:b.onAdPaused,
AdPlaying:b.onAdResumed,AdError:b.onAdError,AdLog:b.onAdLog};b.vpaidCreative.setCallbacksForCreative(b.creativeEventCallbacks,b);this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_CLOSE,
a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MINIMIZE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON);(c=this.rendition?this.rendition.getParameter("creativeData"):null)||(c=this.rendition?this.rendition.getParameter("VPAID_creativeData"):null);c&&(c=a.Util.trim(c));c={AdParameters:c};var d=this._rendererController.getAdInstance().getSlot();this.videoBase.style.width="0px";this.videoBase.style.height=
"0px";this.videoBase.style.zIndex="100000";this.videoBase.style.position="absolute";this.videoBase.style.left=this._rendererController.getContentVideoElement().style.left;this.videoBase.style.top=this._rendererController.getContentVideoElement().style.top;this.videoBase.className="fw_vpaid_slot";this.videoParent=d.getBase();var e=this._rendererController.getContentVideoElement();if("nodeType"in e&&0<e.nodeType)try{this.videoParent.insertBefore(this.videoBase,this._rendererController.getContentVideoElement())}catch(g){this.videoParent.insertBefore(this.videoBase,
this.videoParent.firstChild)}else this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild);e={slot:this.videoBase,videoSlot:this._rendererController.getContentVideoElement(),videoSlotCanAutoPlay:!0};var f=d.getWidth();d=d.getHeight();f&&d||!this.rendition||(f=this.rendition.getWidth(),d=this.rendition.getHeight());this.vpaidCreative.initAd(f,d,this.vpaidViewmode,this.vpaidDesiredBitrate,c,e)}},onAdLoaded:onVisibilityChange:onAdStarted:onAdStopped:onAdImpression:onAdLinearChange:onAdSizeChange:onAdPaused:function(){a.log("VPAIDRenderer: onAdPaused()");"playing"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this.adPlaybackState=
"paused"},onAdResumed:attemptSkip:onAdSkippableStateChange:
onAdSkipped:onAdVideoFirstQuartile:function(){a.log("VPAIDRenderer: onAdVideoFirstQuartile()");this._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE})},onAdVideoMidpoint:function(){a.log("VPAIDRenderer: onAdVideoMidpoint()");this._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT})},
onAdVideoThirdQuartile:function(){a.log("VPAIDRenderer: onAdVideoThirdQuartile()");this._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})},onAdVideoComplete:function(){a.log("VPAIDRenderer: onAdVideoComplete");this._rendererController.processEvent({name:a.EVENT_AD_COMPLETE})},onAdUserAcceptInvitation:function(){a.log("VPAIDRenderer: onAdUserAcceptInvitation()");this._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION})},onAdUserClose:function(){a.log("VPAIDRenderer: onAdUserClose()");
this._rendererController.processEvent({name:a.EVENT_AD_CLOSE})},onAdUserMinimize:onAdLog:function(b){a.log("VPAIDRenderer: onAdLog: "+b)},onAdError:start:stop:info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:getDuration:pause:function(){a.log("VPAIDRenderer pause()");this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this.vpaidCreative.canPauseAd()?"playing"===this.adPlaybackState&&(this.adPlaybackState="pausing",this.vpaidCreative.pauseAd()):a.log("The creative is not able to pause")},resume:dispose:resize:function(){a.log("VPAIDAdRenderer resize()");var b=this._rendererController.getAdInstance().getSlot(),c=b.getWidth();b=b.getHeight();a.log("VPAIDRenderer new size width:"+
c+" height:"+b);this.vpaidCreative.resizeAd(c,b,this.vpaidViewmode)},getAdSkippableState:function(){return this.vpaidCreative.getAdSkippableState()}});a.VastTranslator=a.VastTranslator.prototype={start:function(b){function c(b){a.log("VastTranslator\t"+b)}ion m(b,c){if(b&&b.length)for(var d=0;d<b.length;d++)m(b[d],c);else if(b.AdVerifications&&b.AdVerifications.Verification)if(b=b.AdVerifications.Verification,b.length)for(d=0;d<b.length;d++){var e=new a.AdVerification(b[d]);c.adVerifications.push(e)}else e=
new a.AdVerification(b),c.adVerifications.push(e)}unction t(){this.creativeView=[];this.start=[];this.firstQuartile=[];this.midpoint=[];this.thirdQuartile=[];this.complete=[];this.mute=[];this.unmute=[];this.pause=[];this.rewind=[];this.resume=[];this.replay=
[];this.fullscreen=[];this.expand=[];this.collapse=[];this.acceptInvitation=[];this.stop=[];this.skip=[];this.progress={}}unction U(a){z.call(this,a)}function u(a){z.call(this,a)}tion M(b,d){c("initTrackingEvents()");if(d&&b){C(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.creativeView);C(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,
d.start);C(b,a.EVENT_AD_FIRST_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.firstQuartile);C(b,a.EVENT_AD_MIDPOINT,a.EVENT_TYPE_IMPRESSION,d.midpoint);C(b,a.EVENT_AD_THIRD_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.thirdQuartile);C(b,a.EVENT_AD_COMPLETE,a.EVENT_TYPE_IMPRESSION,d.complete);C(b,a.EVENT_AD_MUTE,a.EVENT_TYPE_STANDARD,d.mute);C(b,a.EVENT_AD_UNMUTE,a.EVENT_TYPE_STANDARD,d.unmute);C(b,a.EVENT_AD_PAUSE,a.EVENT_TYPE_STANDARD,d.pause);C(b,a.EVENT_AD_RESUME,a.EVENT_TYPE_STANDARD,d.resume);C(b,a.EVENT_AD_REWIND,
a.EVENT_TYPE_STANDARD,d.rewind);C(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.fullscreen);C(b,a.EVENT_AD_COLLAPSE,a.EVENT_TYPE_STANDARD,d.collapse);C(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.expand);C(b,a.EVENT_AD_CLOSE,a.EVENT_TYPE_STANDARD,d.stop);C(b,a.EVENT_AD_ACCEPT_INVITATION,a.EVENT_TYPE_STANDARD,d.acceptInvitation);C(b,a.EVENT_AD_SKIPPED,a.EVENT_TYPE_STANDARD,d.skip);for(var e=Object.keys(d.progress),f=0;f<e.length;f++){var g=e[f];b.addProgressEventCallbackUrls(g,d.progress[g])}}}unction P(a,b){c("initTemporalAdInstance");a||d("initTemporalAdInstance: Invalid adInstance");if(b.selectedDrivingAd){b.surveyUrl&&a._creative.setParameter("_fw_survey_url",b.surveyUrl);
var e=b.selectedDrivingAd,f=b.selectedDrivingRenditions;c("vastRenditions:"+f);for(var q=4===B,h=0;h<f.length;h++){var k=a.addCreativeRendition();var y=k.addCreativeRenditionAsset("VAST_CRA",!0);var l=f[h];a:{var m=l.creativeType;switch(m){case "video/mp4":m="video/mp4-h264";break a;case "video/3gp":m="video/3gpp"}}c("initTemporalAdInstance() set rendition/asset [vastRd.creativeApi,vastAd.duration,vastRd.width,vastRd.height,vastRd.url,assetContentType,vastRd.creativeType] =  "+[l.creativeApi,e.duration,
l.width,l.height,l.url,m,l.creativeType]);k.setCreativeApi(l.creativeApi);isNaN(e.duration)||k.setDuration(e.duration);l.width&&!isNaN(l.width)&&k.setWidth(l.width);l.height&&!isNaN(l.height)&&k.setHeight(l.height);e.universalAdId&&k.setUniversalAdId(e.universalAdId);l.url&&y.setUrl(l.url);l.code&&y.setContent(l.code);y.setMimeType(l.creativeType);"static"===l.resourceType&&"text/html"===l.creativeType?y.setContentType("text/html_doc_ref"):"application/x-javascript"===l.creativeType||"application/javascript"===
l.creativeType?y.setContentType("text/js_ref"):"iframe"===l.resourceType?y.setContentType("text/html_doc_ref"):"text/html"===l.creativeType||"text/html_doc_ref"===l.creativeType?y.setContentType("text/html_doc_ref"):"text/html_doc_lit_mobile"===l.creativeType?y.setContentType("text/html_doc_lit_mobile"):q||g(m)?(y.setContentType("text/html_doc_lit_mobile"),y.setUrl(null),y.setContent(S(a,G.getCustomId(),e,l,"text/html_doc_lit_mobile"))):y.setContentType(m);e.creativeData&&0!==e.creativeData.length&&
(c("initTemporalAdInstance(), set asset parameter creativeData:"+e.creativeData),k.setParameter("creativeData",e.creativeData));q||g(m)||(l=l.bitrate,!isNaN(l)&&0<l&&y.setBytes(1E3*l*e.duration/8));m=J;y=I;l=!1;if(k.getContentType()&&m){var n=k.getContentType().toLowerCase(),p=m.toLowerCase();if(n===p)l=!0;else if(0===n.indexOf("video/mp4")&&0===p.indexOf("video/mp4")||"application/javascript"===p&&"text/js_ref"===n)k.setContentType(m),l=!0}m=!1;k.getCreativeApi()&&y&&(n=k.getCreativeApi().toLowerCase(),
p=y.toLowerCase(),n===p?m=!0:0===n.indexOf("mraid")&&0===p.indexOf("mraid")&&(m=!0,k.setCreativeApi(y)));l&&m?k.setPreference(10):m?k.setPreference(6):l?k.setPreference(5):k.setPreference(0);c("adjustMatchedRendition "+k.getId()+", contentType "+k.getContentType()+", creativeAPI "+k.getCreativeApi()+", preference "+k.getPreference())}M(a,e.trackingEvents);L(a,b);N(a,q?f[0].clickThrough:e.clickThrough,e.clickTrackings,e.customClicks,e.impressions);a.addAdVerifications(b.adVerifications)}else k=a.addCreativeRendition(),
k.setContentType("null/null"),y=k.addCreativeRenditionAsset("VAST_CRA",!0),y.setContentType("null/null")}nction v(b){if(200===b.status)if(b.responseXML){var d=(new p).parseAdData(b.responseXML);if(d){c("scheduleVastAds");if(d&&0!==d.length)if(b=d[0].selectedPackage,d=d[0].redirectPackage,!b&&!d)if(c("scheduleVastAds(), no ads from vast response!!!"),w)if(4!==B)x.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting linear ad but returned non-linear ad",a.ERROR_VAST_LINEARITY_NOT_MATCH);else x.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting non-linear ad but returned linear ad",
a.ERROR_VAST_LINEARITY_NOT_MATCH);else x.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"wrapperUrl="+E);else if(!b&&d){c("scheduleVastAds(), no ads scheduled, redirect to downstream Secondary Ad Server");c("scheduleRedirect");b=[];var e=[];b.push(G);e.push({});for(var f=D,g=d.selectedCompanionAds,q=0;q<f.length;q++){var h=f[q];g&&g[h.getCustomId()]&&(b.push(h),e.push(g[h.getCustomId()]))}(f=x._rendererController.scheduleAdInstances(b))&&0<f.length&&(g=f[0],q=g.addCreativeRendition(),q.setWrapperUrl(a.Util.transformUrlToProxy(d.tagUrl)),
q.setWrapperType(T),q.setContentType(J),q.setCreativeApi(I),M(g,d.getTrackingEventsOfWrapper()),L(g,d),N(g,d.getClickThroughOfWrapper(),d.getClickTrackingsOfWrapper(),d.getCustomClicksOfWrapper(),d.getImpressionOfWrapper()),g.addAdVerifications(d.adVerifications));c("scheduleRedirect, schedule companion for redirect ad "+d);for(q=1;q<f.length;q++)if(g=f[q])h=e[q],h instanceof l&&Q(b[q],g,h,d)}else{if(b){c("scheduleVastAds(), ads returned from vast response, going to schedule them");b.selectedDrivingAd?
(c("scheduleVastAds(), ads returned from vast response, going to schedule them with driving ad"),b.selectedDrivingAd.isDrivingAd=!0):c("scheduleVastAds(), ads returned from vast response, going to schedule them without driving ad");c("scheduleAdPackage()");d=[];e=[];d.push(G);b.selectedDrivingAd&&e.push(b.selectedDrivingAd);f=D;g=b.selectedCompanionAds;for(q=0;q<f.length;q++)h=f[q],g&&g[h.getCustomId()]&&(d.push(h),e.push(g[h.getCustomId()]));g=x._rendererController.scheduleAdInstances(d);if(0<g.length){c("scheduleAdPackage, scheduled "+
g.length+" ads"+b.selectedDrivingAd?"":", 1 of it is nullAd for pure companion ad schedule");b.selectedDrivingAd||c("Driving ad is not selected, will create a dummy null ad.");b.selectedDrivingAd||(d.shift(),P(g.shift(),b));for(q=0;q<g.length;q++)if(h=g[q]){var k=e[q];k instanceof l?Q(d[q],h,k,b):P(h,b)}!b.selectedDrivingAd&&0<f.length&&0<b.companionAds.length&&0===e.length&&(c("found empty companion slots and companion ads in package, but none of them matches slot size"),x.onTranslatorFailed(a.ERROR_UNMATCHED_SLOT_SIZE))}else c("scheduleAdPackage, no ad scheduled.")}}else c("no ads for scheduleVastAds");
x._request=null;x._rendererController.handleStateTransition(a.TRANSLATOR_STATE_STARTED);x._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)}}else x.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+E,a.ERROR_VAST_XML_PARSING);else if(400<=b.status)x.onTranslatorFailed(a.ERROR_IO,"wrapperUrl="+E)}this._rendererController=b;var F="image/gif image/jpeg image/png text/html text/javascript text/html_doc_ref text/html_doc_lit_mobile application/x-javascript application/javascript".split(" "),
w=!1,A=this._rendererController.getAdInstance(),x=this,G=A.getSlot(),B=),D=this._rendererController.getCompanionSlots().filter(;c("Checking CompanionSlots, length = "+D.length+", this._rendererController.getCompanionSlots().length = "+this._rendererController.getCompanionSlots().length+", AdInstance.getCompanionSlots.length = "+A.getCompanionSlots().length);var J=A.getActiveCreativeRendition().getContentType(),I=A.getActiveCreativeRendition().getCreativeApi()||"None";this.log("ExpectedDrivingContentType:"+J+", ExpectedDrivingAPI:"+I);var T=A.getActiveCreativeRendition().getWrapperType();n.prototype={init:log:function(b){a.log("VastTranslator.VastRendition\t"+b)},toString:;n.prototype.constructor=n;z.prototype={parse:function(b){this.log("parse()");b["@attributes"]&&b["@attributes"].hasOwnProperty("skipoffset")&&A._setSkipOffset(b["@attributes"].skipoffset);if(b.Duration)if(b.Duration.value){var c=/(\d+):(\d+):(\d+)/.exec(b.Duration.value);c?this.duration=3600*c[1]+60*c[2]+1*c[3]:this.warn("Failed to parse duration value for creative "+b)}else this.warn("No duration value set for creative "+
b);b.VideoClicks&&(b.VideoClicks=[].concat(b.VideoClicks),a.Util.forEachOnArray(b.VideoClicks,this));b.MediaFiles&&b.MediaFiles.MediaFile&&(b.MediaFiles.MediaFile=[].concat(b.MediaFiles.MediaFile),a.Util.forEachOnArray(b.MediaFiles.MediaFile,this));b.TrackingEvents&&this.parseTrackingEvents(b.TrackingEvents,this.setTrackingEvents());b.AdParameters&&(this.log("parse() got AdParameters:"+b.AdParameters.value),this.creativeData=b.AdParameters.value);b.Companion&&(b.Companion=
[].concat(b.Companion),a.Util.forEachOnArray(b.Companion,this));b.NonLinear&&(b.NonLinear=[].concat(b.NonLinear),a.Util.forEachOnArray(b.NonLinear,
this))},parseLinears:function(a){2!==B?(this.log("TargetAdType != TARGET_LINEAR, skipping parse"),w=!0):this.parse(a)},parseNonLinears:parseCompanionAds:setTrackingEvents:parseTrackingEvents:function(b,c){this.log("parseTrackingEvents");b.Tracking&&(b.Tracking=[].concat(b.Tracking),
a.Util.forEachOnArray(b.Tracking,function(b){var d=b["@attributes"].event,e=h(b.value);if(e)switch(d){case "creativeView":case "start":case "firstQuartile":case "midpoint":case "thirdQuartile":case "complete":case "mute":case "unmute":case "pause":case "resume":case "rewind":case "replay":case "fullscreen":case "expand":case "collapse":case "acceptInvitation":case "stop":case "skip":c[d].push(e);break;case "progress":b=a.Util.offsetStringToSecond(b["@attributes"].offset,this.duration);-1!=b&&(c.progress[b]||
(c.progress[b]=[]),c.progress[b].push(e));break;case "close":c.stop.push(e)}},this),a.debug("********** events:",c))},toString:log:function(b){a.log("VastTranslator."+this.constructor.name+"\t"+b)},warn:;b=Object.defineProperty||b(z.prototype,"trackingEvents",{get:);b(z.prototype,"impressions",{set:function(a){this._impressions=a},get:);z.prototype.constructor=z;U.prototype=new z;U.prototype.constructor=U;u.prototype=new z;u.prototype.constructor=u;l.prototype=new z;l.prototype.getPrimaryRendition=b(l.prototype,"impressions",
{get:);l.prototype.constructor=l;var O=O.prototype={parse:testAndUpdatePackageForTemporalSlot:testAndUpdatePackageForPageSlots:renditionFitsInSlot:calcDeadSpaceRatio:matchAdsToSlots:
getAllRenditions:findRenditionGroupByContentType:formalizeString:getAdsByTargetType:getImpressionOfWrapper:getTrackingEventsOfWrapper:getClickThroughOfWrapper:getClickTrackingsOfWrapper:function(){this.log("getClickTrackingsOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.clickTrackings&&0<d.clickTrackings.length&&(b=d.clickTrackings);d=d.vastRenditions;for(var e=0;e<d.length;e++){var f=
d[e];if(f.clickTrackings&&0<f.clickTrackings.length){b=f.clickTrackings;break}}if(b)break}}return b},getCustomClicksOfWrapper:testWrapperForRedirect:log:function(b){a.log("VastTranslator.VastAdPackage\t"+b)},warn:function(b){a.warn("VastTranslator.VastAdPackage\t"+b)}};O.prototype.constructor=O;p.prototype={getVastVersion:parseAdData:selectUsableAdsForDrivingSlot:selectUsableAdsCompanionSlots:testAndUpdatePackageForTemporalSlot:function(a,b){this.log("testAndUpdatePackageForTemporalSlot(pk,isLinear), isLinear = "+b);return a.testAndUpdatePackageForTemporalSlot(b)},
testAndUpdatePackageForPageSlots:testWrapperForRedirect:log:function(b){a.log("VastTranslator.VastParser\t"+b)},warn:function(b){a.warn("VastTranslator.VastParser\t"+b)}};var E=A.getActiveCreativeRendition().getWrapperUrl();b=A.getActiveCreativeRendition().getWrapperType();c("AdInstance.getActiveCreativeRendition().getWrapperUrl()="+
E+", getWrapperType()="+b);if(0!==b.indexOf("external/vast-"))x.onTranslatorFailed(a.ERROR_NO_RENDERER,"wrapperType="+b+";wrapperUrl="+E,a.ERROR_VAST_TRACKING_ERROR);else if(E&&0!==E.length){var R=a.VAST_DEFAULT_MAX_WRAPPER_COUNT;(b=this._rendererController.getParameter(a.PARAMETER_VAST_MAX_WRAPPER_COUNT))&&0<Number(b)&&(R=Number(b));if(A.getWrapperCount()>=R)x.onTranslatorFailed(a.ERROR_IO,"maximum wrapper limit is reached "+A.getWrapperCount(),a.ERROR_VAST_WRAPPER_LIMIT_REACH);else{R=this._rendererController.getParameter("translator.vast.asyncLoad");
R=!0===a.Util.str2bool(R);c("will load vast xml, asyncAjax:"+R);var X=this._rendererController.getParameter("translator.vast.loadWithCookie");X=!0===a.Util.str2bool(X);var H=null,W=5E3;(b=this._rendererController.getParameter(a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS))&&0<Number(b)&&(W=Number(b));try{window.XDomainRequest?(H=new XDomainRequest,R=!0):(H=new XMLHttpRequest,H.withCredentials=X),x._request=H,R?(H.open("GET",E),window.XDomainRequest?H.onload=(H.timeout=W,H.onreadystatechange=,H.ontimeout=H.onerror=
H.send()):(H.open("GET",E,!1),H.send(),v(H))}catch(q){b=!1;if(!window.XMLHttpRequestException)q.code===DOMException.NETWORK_ERR&&(d("CORS in IE10"),b=!0);else if(q instanceof XMLHttpRequestException)switch(q.code){case XMLHttpRequestException.NETWORK_ERR:b=!0}b?(d("CORS error:"+q),x.onTranslatorFailed(a.ERROR_SECURITY,"wrapperUrl="+E)):(d("exception:"+q),x.onTranslatorFailed(a.ERROR_UNKNOWN,"wrapperUrl="+E+";exception="+q))}}}else x.onTranslatorFailed(a.ERROR_NULL_ASSET,"wrapperUrl="+E,a.ERROR_VAST_TRACKING_ERROR)},
info:function(){return{moduleType:a.MODULE_TYPE_TRANSLATOR}},log:function(b){a.log("VastTranslator\t"+b)},warn:getPlayheadTime:function(){return-1},getDuration:stop:onTranslatorFailed:;a.VastTranslator.prototype.constructor=a.VastTranslator;a.ContentVideoExtension=a.ContentVideoExtension.prototype=
{_isEnabled:init:_respondPauseResume:function(){return a.Util.getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME,!0)},_autoSourceRestore:dispose:;a.ContentVideoExtension.prototype.constructor=a.ContentVideoExtension;return a};t.tv.freewheel.SDK||(t.tv.freewheel.SDK=t.tv.freewheel[h]("tv.freewheel.SDK"));
return t})();
