"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5594],{8853:function(t,e,a){a.d(e,{od:function(){return s},wO:function(){return i}});const s={FEMALE:"f",MALE:"m",SHEMALE:"s"},i={f:"female",m:"male",s:"shemale"}},6720:function(t,e){e.Z={Shift4:"shift4",Verotel:"verotel"}},6066:function(t,e,a){var s=a(5121),i=a(4487),r=a(6720);e.Z={data(){return{subscription:null,packages:[],providers:{},attemptId:null,selectedMethodId:null,paymentMethodsVisible:!1,loading:!1,paying:!1,data:null,invoker:null}},computed:{isVerotelActive(){return this.selectedMethod?.provider===r.Z.Verotel},availablePaymentOptions(){return this.paymentOptions.filter((t=>t.available))},paymentOptions(){return[{id:"shift4-cc",name:this.__("payments.card"),icons:["visa-color","mastercard-color","maestro-color","american-express-color"],available:!0,disabled:this.providers.shift4?.limit,provider:r.Z.Shift4,parameters:{}},{id:"verotel-cc",name:this.__("payments.card"),icons:["visa-color","mastercard-color"],provider:r.Z.Verotel,available:this.providers.shift4?.limit,disabled:!1,parameters:{paymentMethod:"CC"}},{id:"verotel-dd",name:this.__("payments.direct"),icons:["maestro-color","sofort"],provider:r.Z.Verotel,available:this.directDebitAvailable,disabled:!1,parameters:{paymentMethod:"DDEU"}}]},selectedMethod(){return this.paymentOptions.filter((t=>t.id===this.selectedMethodId))[0]},morePaymentOptionsAvailable(){return this.availablePaymentOptions.length>1},directDebitAvailable(){return["DE","AT","CH","BE","IT","NL","ES","FR"].includes(this.$shared.user.country)},size(){return this.paying?"small":this.paymentMethodsVisible?"medium":"xlarge"}},created(){this.selectedMethodId=this.availablePaymentOptions[0].id},methods:{async initialize(t){let{modal:e,invoker:a,creatorId:i=null,parentId:r=null}=t;this.data=null,this.paying=!1;const o=await s.Z.get(route("payments.data",{creator:i,modal:e,invoker:a,parent_id:r}));this.invoker=a,this.packages=o.data.packages,this.entranceFee=o.data.entranceFee,this.subscription=o.data.subscription,this.providers=o.data.providers,this.attemptId=o.data.attemptId,this.providers.shift4.limit&&(this.selectedMethodId="verotel-cc")},checkout(){this.isVerotelActive?this.close():this.paying=!0},switchToVerotel(){this.paying=!1,this.paymentMethodsVisible=!0,this.providers.shift4.limit=!0,this.selectedMethodId="verotel-cc"},shift4DailyLimitReached(){window.$toast.add({title:this.__("payments.declines_limit_reached"),message:this.__("payments.try_different_provider"),type:"warning"}),this.switchToVerotel()},shift4NotAvailable(){this.unknownError("Shift4 not available"),this.switchToVerotel()},unknownError(t){window.$toast.add({title:this.__("payments.script_error"),message:this.__("payments.please_try_again"),type:"error"}),t&&i.Tb(t)}}}},157:function(t,e,a){a.d(e,{Z:function(){return r}});var s=a(6720),i={name:"SelectPaymentMethod",props:{availablePaymentOptions:{type:Array,required:!0},selectedMethodId:{type:String,required:!0},loading:{type:Boolean,default:!1},vatAmount:{type:String,default:null},url:{type:String,default:null}},methods:{isVerotel(t){return t.provider===s.Z.Verotel},selectPaymentMethod(t){this.$emit("select-payment-method",t)},pay(){this.$emit("pay")},close(){this.$emit("close")},back(){this.$emit("back")}}},r=(0,a(1900).Z)(i,(function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"px-6 py-4 md:!pb-10",attrs:{modal:""},scopedSlots:t._u([{key:"header",fn:function(){return[e("v-text",{staticClass:"mb-5 w-full",attrs:{tag:"h2"}},[t._v("\n      "+t._s(t.__("layout.select_payment_method"))+"\n    ")])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"mt-4 w-full"},[e("v-separator",{staticClass:"!mb-4 md:hidden"}),t._v(" "),e("div",{staticClass:"center mb-2 gap-3 font-semibold"},[e("div",{staticClass:"rounded-full bg-gray-light-tertiary p-2 dark:bg-gray-tertiary"},[e("v-icon",{staticClass:"h-4 w-4 text-gray-light-caption dark:text-gray-caption",attrs:{name:"lock"}})],1),t._v(" "),e("v-text",{staticClass:"capitalize"},[t._v(t._s(t.__("layout.discreet_secure")))])],1),t._v(" "),e("v-text",{staticClass:"text-center text-xs font-semibold md:text-sm",attrs:{color:"caption",tag:"p"}},[t._v("\n        "+t._s(t.__("layout.credit_card_disclaimer"))+"\n      ")]),t._v(" "),e("div",{staticClass:"my-4 flex w-full flex-row justify-center gap-3 md:gap-5"},[e("v-icon",{attrs:{name:"maestro-color"}}),t._v(" "),e("v-icon",{attrs:{name:"mastercard-color"}}),t._v(" "),e("v-icon",{attrs:{name:"visa-color"}}),t._v(" "),e("v-icon",{attrs:{name:"sofort"}}),t._v(" "),e("v-icon",{attrs:{name:"americanexpress-color"}})],1),t._v(" "),e("v-text",{staticClass:"text-center text-xs font-semibold md:text-sm",attrs:{color:"caption",tag:"p"}},[t._v("\n        "+t._s(t.__("terms.short_location"))+"\n      ")])],1)]},proxy:!0}])},[e("button",{staticClass:"absolute right-2 top-2 z-100 p-3 md:right-5 md:top-5",attrs:{"aria-label":"Close",type:"button"},on:{click:t.close}},[e("v-icon",{staticClass:"h-5 w-5 cursor-pointer text-gray-light-icons transition-transform duration-300 ease-in-out hover:-rotate-45 dark:text-white",attrs:{name:"x"}})],1),t._v(" "),t._v(" "),e("div",{staticClass:"w-full md:my-5"},[e("div",{staticClass:"flex w-full flex-col"},[e("ul",{staticClass:"w-full"},t._l(t.availablePaymentOptions,(function(a){return e("v-radio-card",{key:a.id,staticClass:"flex-wrap",attrs:{selected:t.selectedMethodId===a.id,disabled:a.disabled},nativeOn:{click:function(e){a.disabled||t.selectPaymentMethod(a)}}},[e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex w-full flex-row flex-wrap items-center gap-x-4 gap-y-2 xl:flex-nowrap"},[e("span",{staticClass:"w-fit whitespace-nowrap text-lg font-semibold"},[t._v(t._s(a.name))]),t._v(" "),t.isVerotel(a)?e("v-text",{staticClass:"ml-auto w-24 text-right text-xs lg:ml-0 lg:text-left",attrs:{color:"caption"}},[t._v("\n                "+t._s(t.__("payments.by_verotel"))+"\n              ")]):e("v-text",{staticClass:"ml-auto w-24 text-right text-xs font-semibold lg:ml-0 lg:text-left",attrs:{color:"caption"}},[t._v("\n                "+t._s(t.__("payments.by_shift4"))+"\n              ")]),t._v(" "),e("div",{staticClass:"inline-flex gap-3 lg:ml-auto"},t._l(a.icons,(function(t){return e("v-icon",{key:t,staticClass:"h-4",attrs:{name:t}})})),1)],1)])])})),1),t._v(" "),e("div",{staticClass:"mt-4 flex gap-4"},[e("v-button",{staticClass:"w-full",attrs:{id:"payment-method-back-btn",size:"large",variant:"secondary"},on:{click:t.back}},[e("v-text",[t._v(t._s(t.__("layout.payment_method_back")))])],1),t._v(" "),t.url?e("v-button",{staticClass:"w-full",attrs:{id:"checkout",type:"button",variant:"success",size:"large",target:"_blank",href:t.url},on:{click:t.pay}},[e("v-text",[t._v(t._s(t.__("layout.continue")))])],1):e("v-button",{staticClass:"w-full",attrs:{id:"checkout",type:"button",variant:"success",size:"large","is-loading":t.loading,disabled:t.loading},on:{click:t.pay}},[e("v-text",[t._v(t._s(t.__("layout.continue")))])],1)],1),t._v(" "),e("p",{staticClass:"mt-2 text-center"},[e("v-text",{staticClass:"text-sm lg:text-base",attrs:{tag:"span"}},[t._v(t._s(t.__("layout.i_agree_with_checkout")))]),t._v(" "),e("a",{staticClass:"inline-block text-sm lg:text-base",attrs:{href:t.route("terms"),target:"_blank"}},[t._v("\n          "+t._s(t.__("layout.terms_conditions"))+"\n        ")])],1),t._v(" "),t.vatAmount?e("v-text",{staticClass:"mt-2 text-center text-xs",attrs:{color:"caption",tag:"p"},domProps:{innerHTML:t._s(t.__("modal.add_tokens.vat_amount",{amount:t.vatAmount}))}}):t._e()],1)])])}),[],!1,null,null,null).exports},6390:function(t,e,a){a.d(e,{Z:function(){return l}});var s=a(5121),i=a(958),r=a(6720),o={name:"Shift4PaymentForm",components:{TransitionExpand:i.$N},props:{providers:{type:Object,required:!0},title:{type:String,required:!0},package:{type:Number,default:null},packageBonus:{type:Number,default:null},amount:{type:Number,required:!0},currency:{type:String,required:!0},cost:{type:String,required:!0},creator:{type:Object,default:null},topCreators:{type:Array,default:()=>[]},parentId:{type:Number,default:null},invoker:{type:String,default:null}},data(){return{loading:!1,cooldown:!1,cardTimeout:null,errorTimeout:null,cooldownTimeout:null,cards:null,selectedCardId:null,error:null,shift4:null,email:null,form:{number:null,expiration:null,cvc:null}}},computed:{buysTokens(){return null!==this.package}},watch:{error(){clearTimeout(this.cooldownTimeout),clearTimeout(this.errorTimeout),this.error&&(this.errorTimeout=setTimeout((()=>{this.error=null}),1e4),this.cooldown=!0,this.cooldownTimeout=setTimeout((()=>{this.cooldown=!1}),3e3))}},created(){s.Z.get(route("shift4.cards",{parent_id:this.parentId,invoker:this.invoker||"unknown",model_id:this.creator?.id})).then((t=>{let{data:e}=t;this.cards=e.cards,this.cards.length&&(this.selectedCardId=this.cards[0].id),this.$nextTick((()=>{this.shift4=window.Shift4(this.providers.shift4.key),this.form=this.shift4.createComponentGroup().automount(this.$refs.shift4Form),this.selectedCardId||(this.cardTimeout=setTimeout((()=>{this.selectedCardId="new"}),500))}))}))},mounted(){"Shift4"in window?posthog.capture("shift4_payment_form.open"):this.$emit("not-available")},beforeDestroy(){clearTimeout(this.cardTimeout),clearTimeout(this.cooldownTimeout),clearTimeout(this.errorTimeout)},methods:{submit(){return this.error=null,this.loading=!0,posthog.capture("shift4_payment_form.pay"),this.$shared.user.hasEmail||this.email?this.selectedCardId&&"new"!==this.selectedCardId?(posthog.capture("shift4_payment_form.using-existing-card"),void this.verifyThreeDSecure(this.selectedCardId)):void this.shift4.createToken(this.form).then((t=>{const e=this.cards.find((e=>e.fingerprint===t.fingerprint));if(e)return posthog.capture("shift4_payment_form.using-existing-card"),void this.chargeCard(e.id);posthog.capture("shift4_payment_form.using-new-card"),this.verifyThreeDSecure(t.id)})).catch((t=>{this.error=t.message,this.loading=!1,posthog.capture("shift4_payment_form.form-error",{error:t.message})})):(this.error=this.__("auth.email_required"),this.loading=!1,void posthog.capture("shift4_payment_form.email-required"))},verifyThreeDSecure(t){posthog.capture("shift4_payment_form.verify-3ds"),this.shift4.verifyThreeDSecure({amount:this.amount,currency:this.currency,card:t}).then((t=>{t.threeDSecureInfo.enrolled&&"failed"===t.threeDSecureInfo.liabilityShift&&posthog.capture("shift4_payment_form.3ds-not-verified"),this.chargeCard(t.id)})).catch((t=>{this.error=t.message,this.loading=!1,posthog.capture("shift4_payment_form.3d-secure-error",{error:t.message})}))},chargeCard(t){let e=null;const a={card_id:t,provider:r.Z.Shift4,payment_attempt_id:this.parentId};this.email&&(a.email=this.email),this.package?(a.package=this.package,this.packageBonus&&(a.bonus_package_id=this.packageBonus),this.creator&&(a.converted_model_id=this.creator.id),e=this.route("orders.create",a)):(a.model=this.creator.id,e=this.route("subscriptions.create",a)),s.Z.get(e).then((()=>{const t={amount:this.amount,currency:this.currency,cost:this.cost,creator_id:this.creator?.id,creator_nickname:this.creator?.nickname};this.$emit("paid",t),posthog.capture("shift4_payment_form.paid",t)})).catch((e=>403===e.response.status?(this.$emit("daily-limit-reached"),void posthog.capture("shift4_payment_form.daily-limit-reached")):401===e.response.status?(this.verifyThreeDSecure(t),void posthog.capture("shift4_payment_form.requires-3ds")):(this.loading=!1,this.error=e.response.data.message,void posthog.capture("shift4_payment_form.payment-error",{error:e.response.data.message}))))},selectCard(t){this.selectedCardId=t.id,"new"!==t.id?posthog.capture("shift4_payment_form.select-card"):posthog.capture("shift4_payment_form.add-new-card")},icon(t){const e=t.brand.toLowerCase().replace(" ","-");return["visa","mastercard","maestro","american-express","discover","diners-club","jcb"].includes(e)?`${e}-color`:"credit-card"},back(){this.$emit("back")},avatar(t){return this.processImage({url:t})}}},n=(0,a(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-full bg-gray-light-primary shadow dark:bg-gray-primary sm:h-auto sm:rounded-lg"},[e("div",{staticClass:"relative flex h-[calc(100*var(--vh,1%))] flex-col justify-between sm:h-full"},[e("div",{staticClass:"absolute left-0 top-0 z-10 flex h-20 w-full flex-col gap-2 bg-gray-light-primary px-4 dark:bg-gray-primary sm:px-6"},[e("div",{staticClass:"flex w-full flex-1 items-center gap-3 pt-2"},[e("button",{attrs:{title:t.__("dashboard.back")},on:{click:t.back}},[e("v-icon",{staticClass:"h-8 w-8 text-gray-light-icons hover:text-black dark:hover:text-white",attrs:{name:"arrow-back"}})],1),t._v(" "),e("v-text",{attrs:{tag:"h2",styling:"h4"}},[t._v(t._s(t.title))]),t._v(" "),e("button",{staticClass:"ml-auto",attrs:{"aria-label":"Close",title:"Close",type:"button"},on:{click:function(e){return t.$emit("close")}}},[e("v-icon",{staticClass:"h-5 w-5 text-gray-light-icons hover:text-black dark:hover:text-white",attrs:{name:"x"}})],1)],1),t._v(" "),e("v-separator")],1),t._v(" "),e("div",{staticClass:"relative my-20 flex max-h-[calc(100*var(--vh,1%)-10rem)] w-full flex-col gap-6 overflow-y-auto px-4 pb-4 pt-6 sm:max-h-[calc(85vh-10rem)] sm:px-6"},[t.buysTokens?[e("ul",{staticClass:"grid grid-cols-2 gap-2.5 text-sm sm:text-base"},t._l(4,(function(a){return e("li",{key:a,staticClass:"flex items-center gap-2 font-semibold text-white"},[e("span",{staticClass:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-success-500"},[e("v-icon",{staticClass:"h-3 w-3",attrs:{name:"check"}})],1),t._v(" "),e("v-text",{staticClass:"whitespace-nowrap"},[t._v("\n              "+t._s(t.__(`payments.buy_tokens_list.feature_${a}`))+"\n            ")])],1)})),0),t._v(" "),e("div",{staticClass:"relative flex items-center justify-center"},t._l(t.topCreators,(function(a){return e("img",{key:a.id,staticClass:"-mr-2 h-16 w-16 shrink-0 overflow-hidden rounded-full object-cover ring-1 ring-white/30",attrs:{src:t.avatar(a.avatar_circle),alt:a.nickname,draggable:"false"}})})),0)]:e("div",{staticClass:"flex items-center gap-5"},[e("img",{staticClass:"h-36 w-36 shrink-0 overflow-hidden rounded-full object-cover ring-1 ring-white/30",attrs:{src:t.avatar(t.creator.avatar_circle),alt:t.creator.nickname,draggable:"false"}}),t._v(" "),e("ul",{staticClass:"flex flex-col gap-2.5 text-sm sm:text-base"},t._l(4,(function(a){return e("li",{key:a,staticClass:"flex items-center gap-2 font-semibold text-white"},[e("span",{staticClass:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-success-500"},[e("v-icon",{staticClass:"h-3 w-3",attrs:{name:"check"}})],1),t._v(" "),e("v-text",{staticClass:"whitespace-nowrap"},[t._v("\n              "+t._s(t.__(`payments.buy_subscription_list.feature_${a}`))+"\n            ")])],1)})),0)]),t._v(" "),t.$shared.user.hasEmail?t._e():e("div",{staticClass:"relative"},[e("label",{staticClass:"absolute left-4 top-1 text-sm font-medium tracking-wider text-stone-600",attrs:{for:"email"}},[t._v("\n          "+t._s(t.__("auth.email"))+"\n        ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"h-16 w-full rounded-lg border border-stone-300 bg-white px-4 pb-1 pt-7 placeholder:text-stone-500",attrs:{name:"email",type:"email",placeholder:t.__("auth.email"),required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),t.cards?.length?e("ul",{staticClass:"flex w-full flex-col gap-4"},[t._l(t.cards,(function(a){return e("li",{key:a.id,staticClass:"flex w-full cursor-pointer flex-nowrap items-center gap-4 rounded-lg border border-stone-300 bg-white p-4 ring-primary-400/70 hover:ring",class:[a.id===t.selectedCardId?"ring":""],on:{click:function(e){return t.selectCard(a)}}},[e("v-icon",{staticClass:"h-6",attrs:{name:t.icon(a)}}),t._v(" "),e("span",[t._v("\n            "+t._s(a.number)+"\n          ")]),t._v(" "),e("span",{staticClass:"ml-auto whitespace-nowrap text-stone-400"},[t._v(" ("+t._s(a.expiration)+") ")])],1)})),t._v(" "),e("li",{staticClass:"flex w-full cursor-pointer flex-nowrap items-center gap-4 rounded-lg border border-stone-300 bg-white p-4 ring-primary-400/70 hover:ring",class:["new"===t.selectedCardId?"ring":""],on:{click:function(e){return t.selectCard({id:"new"})}}},[e("v-icon",{staticClass:"h-6 text-stone-400",attrs:{name:"credit-card"}}),t._v(" "),e("span",[t._v("\n            "+t._s(t.__("layout.add_new_card"))+"\n          ")])],1)],2):null===t.cards||null===t.selectedCardId?e("div",{staticClass:"flex h-[126px] w-full items-center justify-center"},[e("v-loading-dots")],1):t._e(),t._v(" "),e("form",{directives:[{name:"show",rawName:"v-show",value:null!==t.cards&&null!==t.selectedCardId&&(!t.cards.length||"new"===t.selectedCardId),expression:"cards !== null && selectedCardId !== null && (!cards.length || selectedCardId === 'new')"}],ref:"shift4Form",staticClass:"flex w-full flex-col gap-4",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("div",{staticClass:"relative h-16 w-full rounded-lg border border-stone-300 bg-white px-4 pb-1 pt-7"},[e("label",{staticClass:"absolute left-4 top-1 text-sm font-medium tracking-wider text-stone-600"},[t._v("\n            "+t._s(t.__("layout.card_number"))+"\n          ")]),t._v(" "),e("div",{attrs:{"data-shift4":"number"}})]),t._v(" "),e("div",{staticClass:"flex w-full gap-4"},[e("div",{staticClass:"relative h-16 w-2/3 rounded-lg border border-stone-300 bg-white px-4 pb-1 pt-7"},[e("label",{staticClass:"absolute left-4 top-1 text-sm font-medium tracking-wider text-stone-600"},[t._v("\n              "+t._s(t.__("layout.expiration"))+"\n            ")]),t._v(" "),e("div",{attrs:{"data-shift4":"expiry"}})]),t._v(" "),e("div",{staticClass:"relative h-16 w-1/3 rounded-lg border border-stone-300 bg-white px-4 pb-1 pt-7"},[e("label",{staticClass:"absolute left-4 top-1 text-sm font-medium tracking-wider text-stone-600"},[t._v("\n              "+t._s(t.__("layout.cvc"))+"\n            ")]),t._v(" "),e("div",{attrs:{"data-shift4":"cvc"}})])])]),t._v(" "),e("transition-expand",{attrs:{axis:"y"}},[t.error?e("div",{staticClass:"rounded-lg bg-red-100 p-4 text-red-500"},[t._v("\n          "+t._s(t.error)+"\n        ")]):t._e()]),t._v(" "),e("v-separator"),t._v(" "),e("div",{staticClass:"-my-2 flex w-full flex-col"},[e("v-text",{staticClass:"mb-2 text-center text-sm",attrs:{color:"caption"}},[e("span",[t._v(t._s(t.__("layout.i_agree_with_checkout")))]),t._v(" "),e("a",{staticClass:"inline-block",attrs:{href:t.route("terms"),target:"_blank"}},[t._v("\n            "+t._s(t.__("layout.terms_conditions"))+"\n          ")])])],1),t._v(" "),e("v-text",{staticClass:"-mb-4 text-center text-sm uppercase tracking-wider",domProps:{innerHTML:t._s(t.__("payments.statement"))}}),t._v(" "),t._m(0)],2),t._v(" "),e("div",{staticClass:"absolute bottom-0 left-0 z-10 flex h-20 w-full items-center bg-gray-light-secondary px-4 dark:bg-gray-secondary sm:px-6"},[e("v-button",{staticClass:"w-full",attrs:{size:"large",disabled:t.loading||t.cooldown||null===t.cards},on:{click:t.submit}},[t.loading?e("v-icon",{attrs:{loading:"",name:"spinner"}}):t._e(),t._v(" "),e("span",[t._v(t._s(t.__("layout.pay",{amount:t.cost})))])],1)],1)])])}),[function(){var t=this._self._c;return t("div",{staticClass:"flex w-full shrink-0 items-center justify-center gap-8 py-5"},[t("img",{staticClass:"h-10 dark:brightness-200",attrs:{draggable:"false",src:"/img/payment/privacy-in-bank-statement.png",alt:"Privacy in bank statement"}}),this._v(" "),t("img",{staticClass:"h-10 dark:brightness-200",attrs:{draggable:"false",src:"/img/payment/256bit-encryption.png",alt:"256bit encryption"}})])}],!1,null,null,null),l=n.exports},5594:function(t,e,a){a.r(e),a.d(e,{default:function(){return k}});var s=a(629),i=a(4487),r=a(6066),o={name:"FeaturesList",components:{},data(){return{featuresList:[this.__("modal.add_tokens.feature_content"),this.__("modal.add_tokens.feature_chat"),this.__("modal.add_tokens.feature_vip")]}}},n=a(1900),l=(0,n.Z)(o,(function(){var t=this,e=t._self._c;return e("ul",t._l(t.featuresList,(function(a,s){return e("li",{key:s,staticClass:"flex items-center text-sm lg:text-base"},[e("p",{staticClass:"mb-3 flex items-center gap-3 font-semibold text-white"},[e("v-icon",{staticClass:"h-5 w-5",attrs:{name:"checkbox"}}),t._v("\n      "+t._s(a)+"\n    ")],1)])})),0)}),[],!1,null,null,null).exports,c=a(6390),d=a(157),u=a(8070),m=a(8838),p=a(8853),h=a(7347),_=a(6720),v=a(5121);function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){b(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function b(t,e,a){var s;return(e="symbol"==typeof(s=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?s:String(s))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var y={name:"AddTokensModal",components:{VText:m.Z,VIcon:u.Z,SelectPaymentMethod:d.Z,Shift4PaymentForm:c.Z,FeaturesList:l},mixins:[r.Z],props:{options:{type:Object,default:()=>{}}},data(){return{selectedPackageId:null,bonusPackageId:null,creator:null,content:null,attemptId:null,invoker:null,topCreators:[]}},computed:f(f({},(0,s.Se)("modal",["activeModal","modalOptions"])),{},{videoCall(){return"video-call"===this.invoker},visible(){return this.activeModal===h.Z.ADD_TOKENS},url(){return this.isVerotelActive?this.route("orders.create",f({package:this.selectedPackageId,bonus_package_id:this.bonusPackageId,provider:this.selectedMethod.provider,converted_model_id:this.creator?.id,attempt_id:this.attemptId},this.selectedMethod.parameters)):null},classes(){return this.paying||this.paymentMethodsVisible?this.paying?{content:"!overflow-y-hidden"}:{}:{content:"xl:max-w-screen-lg"}},fullGender(){return p.wO[this.$shared.gender]},avatar(){return this.creator?this.processImage({url:this.creator.avatar_thumbnail}):null},selectedPackage(){return this.packages.find((t=>t.id===this.selectedPackageId))},pricePerMinuteInEuros(){if(!this.videoCall)return null;return`~&euro;${(Math.floor(this.$shared.tokenPrice*this.creator.price_per_minute*100)/100).toFixed(2)}`},pricePerMessageInEuros(){if(!this.creator?.price_per_message)return null;return`~&euro;${(Math.floor(this.$shared.tokenPrice*this.creator.price_per_message*100)/100).toFixed(2)}`},contentPriceInEuros(){if(!this.content)return null;return`~&euro;${(Math.floor(this.$shared.tokenPrice*this.content.token_price*100)/100).toFixed(2)}`},availablePackages(){return this.creator?this.videoCall&&this.creator.price_per_minute?this.packages.filter((t=>t.tokens>=this.creator.price_per_minute)):!this.content&&this.creator.price_per_message?this.packages.filter((t=>t.tokens>=this.creator.price_per_message)):this.content?this.packages.filter((t=>t.tokens>=this.content.token_price)):this.packages:this.packages}}),watch:{visible:{immediate:!0,handler(t){t&&this.open(this.modalOptions)}},selectedPackageId:{handler(t){t&&posthog.capture("add-tokens-modal.selected-package",{package:t})},immediate:!0}},created(){this.$shared.modal?.name===h.Z.ADD_TOKENS&&this.openModal({name:h.Z.ADD_TOKENS,options:{invoker:"by-configuration",bonusPackageId:this.$shared.bonusPackageId}})},methods:f(f(f({},(0,s.nv)("tokens",["refreshTokenBalance"])),(0,s.nv)("modal",["openModal","closeModal"])),{},{async open(t){this.$shared.user.isModel||(posthog.capture("add-tokens-modal.open",{invoker:t?.invoker,creator_id:t.creator?.id,creator_nickname:t.creator?.nickname}),this.$shared.isAuth?(this.selectedPackageId=t?.packageId||null,this.bonusPackageId=t?.bonusPackageId||null,this.creator=t?.creator||null,this.content=t?.content||null,this.attemptId=t?.attemptId||null,this.invoker=t?.invoker||null,this.paying=!1,this.paymentMethodsVisible=!1,await this.initialize({creatorId:t.creator?.id,invoker:t.invoker||"unknown",parentId:t.parentId,modal:"top-up"}),v.Z.get(this.route("payments.avatars")).then((t=>{this.topCreators=t.data.avatars.splice(0,6)}))):this.$inertia.visit(this.route("login")))},subtitle(t){const e=Math.floor(t.tokens/this.creator.price_per_message);if(this.videoCall){const a=Math.floor(t.tokens/this.creator.price_per_minute);return["quick-actions.vide-call","video-call"].includes(this.invoker)?this.__("layout.tokens_minutes_amount",{minutes:a}):this.__("layout.tokens_messages_minutes_amount",{messages:e,minutes:a})}return this.creator.price_per_message?this.__("layout.tokens_messages_amount",{messages:e}):null},async close(){await this.closeModal({name:h.Z.ADD_TOKENS}),this.creator=null,this.loading=!1},title(t){return t?this.hasBonusPackage(t)?this.__("layout.tokens_amount_bonus",{tokens:t.tokens,bonusTokens:t.package_bonus.tokens}):this.__("layout.tokens_amount",{tokens:t.tokens}):null},checkoutTitle(t){return t?this.hasBonusPackage(t)?this.__("layout.purchase_tokens_amount_bonus",{tokens:t.tokens,bonusTokens:t.package_bonus.tokens}):this.__("layout.purchase_tokens_amount",{tokens:t.tokens}):null},hasBonusPackage(t){return!(!this.bonusPackageId||!t.package_bonus_id)&&this.bonusPackageId===t.package_bonus_id},selectPackage(t){this.selectedPackageId=t,this.morePaymentOptionsAvailable?this.showPaymentMethods():this.pay()},selectPaymentMethod(t){this.selectedMethodId=t.id},showPaymentMethods(){this.paymentMethodsVisible=!0,posthog.capture("add-tokens-modal.select-payment-method")},back(){this.paying=!1,this.selectedPackageId=null,this.paymentMethodsVisible=!1},pay(){posthog.capture("add-tokens-modal.pay",{creator_id:this.creator?.id,creator_nickname:this.creator?.nickname}),this.checkout()},async paid(t){const{creator:e,videoCall:a}=this;if(await this.refreshTokenBalance(),await this.close(),window.gtag("event","tokens_purchase",f({provider:_.Z.Shift},t)),a)return window.$toast.clear(),window.$toast.add({title:this.__("layout.congratulations"),message:this.__("layout.tokens_purchased"),type:"success"}),void await this.openModal({name:h.Z.FLIRT_TIME,options:{participant:e}});this.$inertia.reload({preserveScroll:!0,preserveState:!1,onSuccess:()=>{window.$toast.clear(),window.$toast.add({title:this.__("layout.congratulations"),message:this.__("layout.tokens_purchased"),type:"success"})},onError:t=>{i.Tb(t),window.location.reload()}})}})},k=(0,n.Z)(y,(function(){var t=this,e=t._self._c;return t.visible&&Object.keys(t.providers).length?e("v-modal",{attrs:{id:"add-tokens-modal",value:!0,size:t.size,classes:t.classes,"lock-content":t.videoCall},on:{close:t.close}},[t.paying?e("Shift4PaymentForm",{key:"pay",attrs:{providers:t.providers,title:t.checkoutTitle(t.selectedPackage),amount:t.selectedPackage.amount,currency:t.selectedPackage.currency,package:t.selectedPackage.id,"package-bonus":t.bonusPackageId,cost:t.selectedPackage.cost,creator:t.creator,"top-creators":t.topCreators,invoker:"add-tokens"},on:{paid:t.paid,close:t.close,back:t.back,"not-available":t.shift4NotAvailable,"daily-limit-reached":t.shift4DailyLimitReached}}):t.paymentMethodsVisible?e("SelectPaymentMethod",{key:"method",attrs:{"selected-method-id":t.selectedMethodId,"available-payment-options":t.availablePaymentOptions,loading:t.loading,"vat-amount":t.selectedPackage.vat,url:t.url},on:{back:t.back,pay:t.pay,close:t.close,"select-payment-method":t.selectPaymentMethod}}):e("div",{staticClass:"relative flex min-h-full w-full flex-col items-center bg-white dark:bg-gray-primary lg:flex-row lg:items-stretch lg:justify-center"},[e("button",{staticClass:"absolute right-2 top-2 z-1000 p-3 lg:right-5 lg:top-5",attrs:{"aria-label":"Close",type:"button"},on:{click:t.close}},[e("v-icon",{staticClass:"h-5 w-5 cursor-pointer text-gray-light-icons transition-transform duration-300 ease-in-out hover:-rotate-45 dark:text-white",attrs:{name:"x"}})],1),t._v(" "),e("v-text",{staticClass:"my-4 block w-full shrink-0 px-6 font-semibold capitalize lg:hidden",attrs:{tag:"h2"}},[t.videoCall?[t._v(t._s(t.__("modal.add_tokens.explore_fantasies")))]:[t._v(t._s(t.__("modal.add_tokens.fun_begin")))]],2),t._v(" "),e("div",{staticClass:"relative h-48 w-full shrink-0 lg:block lg:h-auto lg:w-5/12 lg:flex-1"},[t.creator?[e("div",{staticClass:"absolute inset-0 z-1 h-full w-full bg-white/40 dark:bg-black/40"}),t._v(" "),e("img",{staticClass:"absolute inset-0 h-full w-full object-cover",attrs:{alt:t.creator.nickname,src:t.avatar,draggable:"false"}})]:e("picture",{staticClass:"h-full w-full"},[e("source",{attrs:{srcset:`/img/modal/topup-desktop-${t.fullGender}.jpg`,media:"(min-width: 1024px)"}}),t._v(" "),e("img",{staticClass:"absolute inset-0 h-full w-full object-cover",attrs:{src:`/img/modal/topup-mobile-${t.fullGender}.jpg`,alt:t.__("layout.warning_title")}})]),t._v(" "),t.creator?e("div",{staticClass:"absolute bottom-12 left-6 z-10 hidden w-fit items-center gap-2 rounded-3xl bg-gray-secondary p-4 text-white md:flex lg:left-12"},[t.videoCall?[e("v-icon",{staticClass:"h-5 w-5",attrs:{name:"video-alt"}}),t._v(" "),e("span",{staticClass:"font-semibold leading-none"},[t._v("\n            "+t._s(t.__("modal.add_tokens.price_per_minute",{amount:t.creator.price_per_minute}))+"\n          ")]),t._v(" "),e("span",{staticClass:"text-sm leading-none",domProps:{innerHTML:t._s(t.pricePerMinuteInEuros)}})]:t.content?[e("v-icon",{staticClass:"h-5 w-5",attrs:{name:"photo-video"}}),t._v(" "),e("span",{staticClass:"font-semibold leading-none"},[t._v("\n            "+t._s(t.__("modal.add_tokens.content_price",{amount:t.content.token_price}))+"\n          ")]),t._v(" "),e("span",{staticClass:"text-sm leading-none",domProps:{innerHTML:t._s(t.contentPriceInEuros)}})]:t.creator.price_per_message?[e("v-icon",{staticClass:"h-5 w-5",attrs:{name:"chat"}}),t._v(" "),e("span",{staticClass:"font-semibold leading-none"},[t._v("\n            "+t._s(t.__("modal.add_tokens.price_per_message",{amount:t.creator.price_per_message}))+"\n          ")]),t._v(" "),e("span",{staticClass:"text-sm leading-none",domProps:{innerHTML:t._s(t.pricePerMessageInEuros)}})]:t._e()],2):t._e(),t._v(" "),e("features-list",{staticClass:"absolute left-6 z-10 lg:left-12",class:t.creator?"bottom-12 sm:bottom-28":"bottom-12"})],2),t._v(" "),e("div",{staticClass:"relative -mt-8 flex w-full flex-col justify-center rounded-t-2xl bg-white px-6 py-4 dark:bg-gray-primary lg:mt-0 lg:h-full lg:w-7/12 lg:flex-none lg:rounded-none lg:px-12 lg:py-8"},[e("div",{staticClass:"mx-auto flex w-full flex-col gap-6 lg:h-full lg:flex-1 lg:gap-8"},[e("v-text",{staticClass:"hidden capitalize lg:block",attrs:{tag:"h2"}},[t.videoCall?[t._v(t._s(t.__("modal.add_tokens.explore_fantasies")))]:[t._v(t._s(t.__("modal.add_tokens.fun_begin")))]],2),t._v(" "),e("div",{staticClass:"relative z-10"},[t.creator?[t.videoCall?e("v-text",{staticClass:"mb-4",attrs:{tag:"p"},domProps:{innerHTML:t._s(t.__("modal.add_tokens.tokens_required_call",{amount:t.creator.price_per_minute,nickname:t.creator.nickname}))}}):t._e(),t._v(" "),t.content?e("v-text",{staticClass:"mb-4",attrs:{tag:"p"},domProps:{innerHTML:t._s(t.__("modal.add_tokens.tokens_required_content",{amount:t.content.token_price,nickname:t.creator.nickname}))}}):t.creator.price_per_message?e("v-text",{staticClass:"mb-4",attrs:{tag:"p"},domProps:{innerHTML:t._s(t.__("modal.add_tokens.tokens_required_message",{amount:t.creator.price_per_message,nickname:t.creator.nickname,count:t.creator.price_per_message}))}}):t._e()]:t._e(),t._v(" "),e("ul",{staticClass:"w-full"},t._l(t.availablePackages,(function(a,s){return e("li",{key:a.id,staticClass:"relative mb-4 flex h-[5.5rem] cursor-pointer flex-nowrap items-center rounded-xl bg-gray-light-secondary px-7 py-5 text-gray-light-body shadow-md dark:bg-gray-tertiary dark:text-white",class:{"border-l-[19px] border-warning pl-1":1===s},on:{click:function(e){return t.selectPackage(a.id)}}},[1===s?e("v-text",{staticClass:"absolute inset-y-0 translate-x-[-121%] rotate-90 text-[8px] font-bold uppercase"},[t._v("\n                "+t._s(t.__("modal.add_tokens.most_popular"))+"\n              ")]):t._e(),t._v(" "),s===t.availablePackages.length-1?e("v-icon",{staticClass:"absolute -left-10 -top-1.5 h-[5.7rem] w-[5.7rem]",attrs:{name:"discount-33"}}):t._e(),t._v(" "),e("div",{staticClass:"flex w-full items-center gap-2"},[e("v-icon",{staticClass:"h-6 w-6",attrs:{name:"token"}}),t._v(" "),t.hasBonusPackage(a)?e("span",{staticClass:"text-lg font-bold text-primary-500"},[t._v("\n                  "+t._s(t.title(a))+"\n                ")]):e("div",{staticClass:"flex flex-col sm:flex-row sm:items-end sm:gap-1"},[e("span",{staticClass:"text-xl font-semibold"},[t._v("\n                    "+t._s(t.title(a))+"\n                  ")]),t._v(" "),t.creator?e("span",{staticClass:"text-base font-normal"},[t._v("\n                    "+t._s(t.subtitle(a))+"\n                  ")]):t._e()]),t._v(" "),e("div",{staticClass:"ml-auto flex flex-col items-center justify-center gap-1"},[0!==s?e("span",{staticClass:"text-sm font-semibold line-through"},[t._v("\n                    "+t._s(a.no_discount_price)+"\n                  ")]):t._e(),t._v(" "),e("span",{staticClass:"text-lg font-semibold"},[t._v(t._s(a.price))])])],1)],1)})),0),t._v(" "),t.selectedPackage?.vat?e("v-text",{staticClass:"mt-2 text-center text-xs",attrs:{color:"caption",tag:"p"},domProps:{innerHTML:t._s(t.__("modal.buy_subscription.vat_amount",{amount:t.selectedPackage.vat}))}}):t._e()],2),t._v(" "),e("div",{staticClass:"w-full"},[e("v-separator",{staticClass:"!mb-4 lg:hidden"}),t._v(" "),e("div",{staticClass:"center mb-2 gap-3 font-semibold"},[e("div",{staticClass:"rounded-full bg-gray-light-tertiary p-2 dark:bg-gray-tertiary"},[e("v-icon",{staticClass:"h-4 w-4 text-gray-light-caption dark:text-gray-caption",attrs:{name:"lock"}})],1),t._v(" "),e("v-text",{staticClass:"capitalize"},[t._v(t._s(t.__("layout.discreet_secure")))])],1),t._v(" "),e("v-text",{staticClass:"text-center text-xs font-semibold lg:text-sm",attrs:{color:"caption",tag:"p"}},[t._v("\n            "+t._s(t.__("layout.credit_card_disclaimer"))+"\n          ")]),t._v(" "),e("div",{staticClass:"my-4 flex w-full flex-row justify-center gap-3 lg:gap-5"},[e("v-icon",{staticClass:"h-4",attrs:{name:"maestro-color"}}),t._v(" "),e("v-icon",{staticClass:"h-4",attrs:{name:"mastercard-color"}}),t._v(" "),e("v-icon",{staticClass:"h-4",attrs:{name:"visa-color"}}),t._v(" "),e("v-icon",{staticClass:"h-4",attrs:{name:"sofort"}}),t._v(" "),e("v-icon",{staticClass:"h-4",attrs:{name:"american-express-color"}})],1),t._v(" "),e("v-text",{staticClass:"text-center text-xs font-semibold lg:text-sm",attrs:{color:"caption",tag:"p"}},[t._v("\n            "+t._s(t.__("terms.short_location"))+"\n          ")])],1)],1)])],1)],1):t._e()}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=5594.js.map?id=333b436db89c341d