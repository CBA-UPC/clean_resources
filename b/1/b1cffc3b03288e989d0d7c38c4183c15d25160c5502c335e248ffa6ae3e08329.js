import{_ as y}from"./_plugin-vue_export-helper_c27b6911_r24-02-0_b0_t240129-161140.js";import{d as A,L as O,A as a,B as c,I as i,J as r,O as h,N as p,X as $,H as T,Q as V,G as v,V as k,W as S,S as E,al as M,_ as f}from"./vendor_6ed58054_r24-02-0_b0_t240129-161140.js";import{q as R,p as m,e as b,d as g,_ as w,w as B,u as L}from"./index_31ad23dc_r24-02-0_b0_t240129-161140.js";import{ai as I}from"./lsanalytics-cart_5cb2710b_r24-02-0_b0_t240129-161140.js";import{R as D}from"./RadioButton_aacab2f5_r24-02-0_b0_t240129-161140.js";const P=async()=>g(w(()=>import("./orderCancelQuery_9932bae7_r24-02-0_b0_t240129-161140.js"),["ngsa/js/orderCancelQuery_9932bae7_r24-02-0_b0_t240129-161140.js","ngsa/js/index_767de702_r24-02-0_b0_t240129-161140.js","ngsa/js/ast_dd2f4d00_r24-02-0_b0_t240129-161140.js","ngsa/js/blockString_ae762cd0_r24-02-0_b0_t240129-161140.js"])),G=async()=>g(w(["ngsa/js/getOrderQuery_a6be2d85_r24-02-0_b0_t240129-161140.js","ngsa/js/index_767de702_r24-02-0_b0_t240129-161140.js","ngsa/js/ast_dd2f4d00_r24-02-0_b0_t240129-161140.js","ngsa/js/blockString_ae762cd0_r24-02-0_b0_t240129-161140.js"])),N="csrViewStoreOrderConfirmation",H=A(N,{state:actions:{async cancelOrder({cartGuid:e,cancelReason:t,cancelReasonOther:d}){const l={cartGuid:e||this.prevGuid,cancelReason:t,cancelReasonOther:d},s=await P();return R({mutation:s,variables:l}).then(o=>{const u=o.data.cancelOrder;return u.canceled==="true"&&u.errorCode===""?(this.orderCode=u.orderCode,this.orderCancelSuccess=!0,{statusCode:m.SUCCESS}):{statusCode:m.FAILED}}).catch(o=>(b({err:o,operation:"cancelOrder"}),{statusCode:m.FAILED}))},async getOrder({code:e}){const t={code:e},d=await G();return R({mutation:d,variables:t}).then(.catch(l=>(b({err:l,operation:"getOrder"}),{statusCode:"failed"}))}},getters:{}});const Q={name:"OrderCancelModal",emits:["closeModal","showOrderCancelConfirm"],methods:{actionLinkClicked(){this.$emit("closeModal")},actionBtnClicked(){this.$emit("showOrderCancelConfirm")}}},U={class:"order-cancel","aria-labelledby":"$t('i18n.cancelOrderHeader')"},z={class:"order-cancel--subheading"},F={class:"order-cancel--warning"},q=["aria-label"];function W(e,t,d,l,s,o){const u=O("Button");return a(),c("div",U,[i("div",z,r(e.$t("i18n.cancelOrderSubHeader")),1),i("div",F,r(e.$t("i18n.orderCancelWarn")),1),h(u,{type:"button",class:"order-cancel--continue",onClick:o.actionBtnClicked},{default:p(,_:1},8,["onClick"]),i("div",{"aria-label":e.$t("i18n.close"),class:"order-cancel-wrapper--close"},[i("a",{class:"order-cancel--close",href:"#",onClick:t[0]||(t[0]=},r(e.$t("i18n.close")),1)],8,q)])}const he=y(Q,[["render",W],["__scopeId","data-v-8c6dddf2"]]);const J={name:"OrderCancelConfirmModal",emits:["closeModal"],props:{cartGuid:{type:String,default:""}},data(){return{returnReasonText:"",isDisabled:!0,errorReason:"",isChecked:!1,isError:!1,isTextAreaSelected:!1,selectedValue:"",noOptionSelected:!1,noCancelPossible:!1,cancelOptions:[{option:this.$t("i18n.accidentalPurchase")},{option:this.$t("i18n.forgotPromoCode")},{option:this.$t("i18n.changeMyMind")},{option:this.$t("i18n.NeedToAddRemoveItem")},{option:this.$t("i18n.otherReasons")}],cancelOptionsEu:[{option:this.$t("i18n.addressIssue")},{option:this.$t("i18n.wrongSize")},{option:this.$t("i18n.forgotVoucher")},{option:this.$t("i18n.changeMyMind")},{option:this.$t("i18n.NeedToAddRemoveItem")}]}},components:{RadioButton:D},computed:{...T(L,["isRemorseAllowedEu"]),isTextAreaShow,methods:{...V(H,["cancelOrder"]),cancelLinkClickedclickRadio(e){this.selectedValue=e.option,this.noOptionSelected=!1,e.option===this.$t("i18n.otherReasons")?(this.isTextAreaSelected=!0,this.$refs.textArea.disabled=!1):(this.isTextAreaSelected=!1,this.$refs.textArea.disabled=!0)},validateOption(){this.selectedValue===""?(this.noOptionSelected=!0,this.errorReason=this.$t("i18n.selectReason")):this.noOptionSelected=!1},validateCancelReason(){this.$refs.textArea.disabled&&(this.returnReasonText=""),this.selectedValue&&this.selectedValue.length>50&&(this.selectedValue=this.selectedValue.substr(0,50))},continueBtnClicked(){var t,d;if(this.validateOption(),this.noOptionSelected===!0)return;this.validateCancelReason();let e=this.cartGuid?this.cartGuid:(d=(t=this.$route)==null?void 0:t.query)==null?void 0:d.guid;!this.cartGuid&&B("window?.LSCO?.dtos?.orderData")&&(e=window.LSCO.dtos.orderData.guid),this.cancelOrder({cartGuid:e,cancelReason:this.selectedValue,cancelReasonOther:this.returnReasonText}).then(l=>{l.statusCode===m.SUCCESS?(this.noCancelPossible=!1,this.$emit("closeModal"),I(this.selectedValue)):(this.noCancelPossible=!0,this.errorReason=this.$t("i18n.notPossibleToCancel"))})}}},X={class:"order-cancelconfirm","aria-labelledby":"order-cancelconfirm-title"},j={class:"order-cancelconfirm--subheading"},K={key:0,class:"order-cancelconfirm--error-msg"},Y={key:1,class:"order-cancelconfirm--radioOption"},Z={key:0},ee={class:"radio-text"},te={key:1},oe={class:"radio-text"},se=["disabled"],ne={class:"order-cancelconfirm--limit"},ie=["aria-label"];function re(e,t,d,l,s,o){const u=O("radioButton"),C=O("Button");return a(),c("div",X,[i("div",j,r(e.$t("i18n.cancelReasonSubHeader")),1),s.noOptionSelected||s.noCancelPossible?(a(),c("span",K,r(s.errorReason),1)):v("",!0),s.cancelOptions.length||s.cancelOptionsEu.length?(a(),c("div",Y,[e.isRemorseAllowedEu?(a(),c("div",Z,[(a(!0),c(k,null,S(s.cancelOptionsEu,(n,_)=>(a(),c("div",{key:`${n.option} + ${_}`},[h(u,{name:"group",value:`${n.option}`,width:16,height:16,"selected-value":s.selectedValue,onClickRadio:x=>o.clickRadio(n)},{"radio-text":p(,_:2},1032,["value","selected-value","onClickRadio"])]))),128))])):(a(),c("div",te,[i("div",null,[(a(!0),c(k,null,S(s.cancelOptions,(n,_)=>(a(),c("div",{key:`${n.option} + ${_}`},[h(u,{name:"group",value:`${n.option}`,width:16,height:16,"selected-value":s.selectedValue,onClickRadio:,{"radio-text":p(()=>[i("div",oe,r(n.option),1)]),_:2},1032,["value","selected-value","onClickRadio"])]))),128))])])),i("div",{class:f(["order-cancelconfirm--showtextarea",{"show-textArea":o.isTextAreaShow}])},[E(i("textarea",{class:f(["order-cancelconfirm--textarea",{"show-textArea":o.isTextAreaShow}]),"onUpdate:modelValue":t[0]||(t[0]=,placeholder:"Describe your reason (optional)","aria-label":"Describe your reason (optional)",ref:"textArea",type:"text",maxlength:"75",disabled:s.isDisabled,"aria-multiline":"true"},null,10,se),[[M,s.returnReasonText]]),i("div",ne,r(e.$t("i18n.textCharacterLimit")),1)],2),h(C,{type:"button",class:f([{textArea:!o.isTextAreaShow},"order-cancelconfirm--cancelBtn"]),onClick:t[1]||(t[1]=},{default:p(()=>[$(r(e.$t("i18n.cancelOrder")),1)]),_:1},8,["class"]),i("div",{"aria-label":e.$t("i18n.close")},[i("a",{class:"order-cancelconfirm--close",href:"#",onClick:t[2]||(t[2]=(...n)=>o.cancelLinkClicked&&o.cancelLinkClicked(...n))},r(e.$t("i18n.close")),1)],8,ie)])):v("",!0)])}const pe=y(J,[["render",re],["__scopeId","data-v-fa615f41"]]);export{he as O,pe as a,H as u};
