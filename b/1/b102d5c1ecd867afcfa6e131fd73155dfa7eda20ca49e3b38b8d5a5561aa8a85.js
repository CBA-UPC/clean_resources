import{x as w,P as T,Q as _,k as L,L as p,A as c,B as f,I as n,J as u,O as l,_ as h,G as R}from"./vendor_6ed58054_r24-02-0_b0_t240129-161140.js";import{useCsrViewStoreUpdatePassword as P}from"./csrViewStoreUpdatePassword_df31b06e_r24-02-0_b0_t240129-161140.js";import{G as g,W as E}from"./index_31ad23dc_r24-02-0_b0_t240129-161140.js";import{s as x}from"./serverToUserErrorMessageTransformer_631b8f39_r24-02-0_b0_t240129-161140.js";import{P as M}from"./PasswordField_e5e3802a_r24-02-0_b0_t240129-161140.js";import{u as v}from"./usePassword_7ba60e6a_r24-02-0_b0_t240129-161140.js";import{q as y,l as S,r as V}from"./lsanalytics-login_d6e95fa1_r24-02-0_b0_t240129-161140.js";import{l as $}from"./loginMixin_b6cf989f_r24-02-0_b0_t240129-161140.js";import{S as k}from"./FormSubmitButton_a45b7583_r24-02-0_b0_t240129-161140.js";import{L as m}from"./formTypes_72e4bcc9_r24-02-0_b0_t240129-161140.js";import{_ as B}from"./_plugin-vue_export-helper_c27b6911_r24-02-0_b0_t240129-161140.js";import"./i18n_4b81f106_r24-02-0_b0_t240129-161140.js";import"./ErrorMessages_003296c8_r24-02-0_b0_t240129-161140.js";import"./SvgIcon_e55bd28a_r24-02-0_b0_t240129-161140.js";import"./dateRules_139f881d_r24-02-0_b0_t240129-161140.js";import"./regexRules_cc2f3e2b_r24-02-0_b0_t240129-161140.js";import"./regexLocalization_16c032f3_r24-02-0_b0_t240129-161140.js";import"./rules_bb747cab_r24-02-0_b0_t240129-161140.js";const N={mixins:[x,$],props:{type:{type:String,default:m.DEFAULT}},data(){return{show:{confirmPassword:!1,password:!1},serverErrors:[],submitting:!1,passwordLengthMsg:""}},components:{SubmitButton:k,PasswordField:M},setup(r){const{data:s,passwordValidator:i,checkPasswordValidation:e,v$:a}=v(),o=w("footer-email-legal-language-id"),d=w("{}");return{legalLanguageId:o,password:s.password,confirmPassword:s.confirmPassword,clickWrapCheckboxState:!1,checkPasswordValidation:e,passwordValidator:i,passwordResetGateEntry:d,v$:a}},computed:{...T(P,["newPassword","confirmedNewPassword"]),passwordConfirmationRules(){return this.newPassword?`is:${this.newPassword}`:""},showPasswordHelpText(){return!this.passwordValidator.password.$error&&this.password.length<8},validationErrors(){return typeof this.passwordValidator>"u"||this.passwordValidator.$error}},methods:{..._(P,["resetPassword"]),async resetPasswordSubmit(){var s,i,e;this.serverErrors=[],await this.$nextTick(),await this.checkPasswordValidation()?(this.submitting=!0,this.newPassword=this.password,this.confirmedNewPassword=this.confirmPassword,this.resetPassword().then(a=>{if(a.success)this.$authEmitter.emit(g.START_LOGIN,{type:m.RESET_RESULT,isResetSuccess:a.success}),y();else if(a.message.some(o=>o===E.INVALID_TOKEN))this.$authEmitter.emit(g.START_LOGIN,{type:m.RESET_RESULT,isResetSuccess:!1}),S(E.INVALID_TOKEN);else{const{newPasswordConfirmation:o}=this.serverErrMsgMapper(a.message);this.serverErrors=o||[this.$t("i18n.newPasswordSomethingWentWrong")],S(L(this.serverErrors)[0])}this.confirmPassword="",this.password="",this.passwordValidator.$reset()}).finally(()=>{this.submitting=!1})):((e=(i=(s=this.passwordValidator)==null?void 0:s.confirmPassword)==null?void 0:i.$errors[0])==null?void 0:e.$message)===this.$t("i18n.newPasswordMismatch")&&V("passwordMismatch")},removeEventSpaces(r,s){var i,e;r==null||r.preventDefault(),this[s]=(e=(i=r==null?void 0:r.target)==null?void 0:i.value)==null?void 0:e.replace(/^[ ]+|[ ]+$/g,"")}},watch:{passwordValidator(r){var s,i,e,a;(i=(s=r==null?void 0:r.password)==null?void 0:s.$errors[0])!=null&&i.$message?(this.passwordLengthMsg===""&&V("passwordLengthValidationMsg"),this.passwordLengthMsg=(a=(e=r==null?void 0:r.password)==null?void 0:e.$errors[0])==null?void 0:a.$message):this.passwordLengthMsg=""}}},A={class:"reset-password"},C={class:"fp-body","data-testid":"reset-password-content"},I={class:"modal-title"},O=["aria-label"],U={key:0,class:"password-alert",role:"alert"};function G(r,s,i,e,a,o){const d=p("PasswordField"),b=p("SubmitButton");return c(),f("div",A,[n("div",C,[n("h4",I,[n("span",null,u(r.$t("i18n.resetPassBtnText")),1)]),n("div",{class:"p-container",role:"form","aria-label":r.$t("i18n.resetPassBtnText")},[l(d,{modelValue:e.password,"onUpdate:modelValue":s[0]||(s[0]=t=>e.password=t),name:"password",type:"new",class:h(["password-input","new-password"]),"label-text":r.$t("i18n.newPasswordText"),errors:e.passwordValidator.password.$errors,onChange:s[1]||(s[1]=t=>o.removeEventSpaces(t,"password")),onBlur:s[2]||(s[2]=t=>o.removeEventSpaces(t,"password"))},null,8,["modelValue","label-text","errors"]),o.showPasswordHelpText?(c(),f("div",U,u(r.$t("i18n.passwordLengthHint")),1)):R("",!0),l(d,{modelValue:e.confirmPassword,"onUpdate:modelValue":s[3]||(s[3]=t=>e.confirmPassword=t),name:"confirmPassword",type:"confirm",rules:o.passwordConfirmationRules,"validation-options":{errorTextAllReplaceWith:{i18nPath:"abovePasswordMismatch"}},"custom-errors":a.serverErrors,class:h(["password-input","confirm-password"]),"label-text":r.$t("i18n.confirmPasswordText"),placeholder:r.$t("i18n.confirmPasswordText"),errors:e.passwordValidator.confirmPassword.$errors,onChange:s[4]||(s[4]=t=>o.removeEventSpaces(t,"confirmPassword")),onBlur:s[5]||(s[5]=t=>o.removeEventSpaces(t,"confirmPassword"))},null,8,["modelValue","rules","custom-errors","label-text","placeholder","errors"]),l(b,{id:"forgotPasswordSubmit",class:"reset-password-submit-btn",onClicked:s[6]||(s[6]=t=>o.resetPasswordSubmit()),disabled:!e.password.length>0||a.submitting||o.validationErrors,text:r.$t("i18n.reset")},null,8,["disabled","text"])],8,O)])])}const ts=B(N,[["render",G],["__scopeId","data-v-600f2bf0"]]);export{ts as default};
2.306v3.17h-3.572v9.949h-5.095V3.736Zm12.373-3.17h5.359l6.253 13.119h-5.856l-1.092-2.597h-5.491l-1.158 2.597h-3.937L135.969.566Zm3.639 7.656-1.753-3.946-1.787 3.946h3.54ZM148.209.6h8.502c1.324 0 2.647.067 3.739.674 1.158.641 1.852 1.686 1.852 2.766 0 1.349-1.158 2.529-2.944 2.833v.033c2.018.27 3.374 1.417 3.374 2.968 0 1.113-.529 2.394-1.786 3.069-1.323.742-3.209.742-4.797.742h-7.973V.6h.033Zm7.047 4.991c.496 0 1.125.034 1.488-.236.331-.236.53-.573.53-.877 0-.978-1.059-1.113-2.084-1.113h-2.085v2.192h2.151v.034Zm.165 5.16c.53 0 1.125.034 1.555-.236.397-.203.629-.54.629-.91 0-.44-.331-.844-.827-1.046-.464-.169-1.059-.169-1.555-.169h-2.084v2.36h2.282Z"></path><path fill="#C41230" d="M59.978 9.84c0 .506.662 1.08 1.191 1.316.464.202.96.236 1.423.236 1.158 0 2.117-.304 2.117-.978 0-.844-.992-1.012-2.05-1.18-2.945-.44-7.047-.945-7.047-4.284 0-3.136 3.34-4.721 6.914-4.721 5.69 0 7.212 3.204 7.212 4.148h-4.202c0-.27-.198-.81-.794-1.113-.43-.236-1.058-.405-1.654-.405-1.555 0-2.448.338-2.448 1.08 0 .607.794.91 1.952 1.112 2.977.506 7.576.709 7.576 4.418 0 1.889-1.588 4.62-7.543 4.62-5.723 0-6.749-3.372-6.749-4.215h4.102V9.84Zm-13.762 3.811h5.36V.532h-5.36v13.12Zm9.362-11.466V-.581h-3.01v2.597h1.489l-.728 1.956h.661l1.588-1.787ZM38.012 8.76l-.1-.236L33.876.566h-6.285l6.98 13.119h4.665L45.62.566h-3.772L38.111 8.56l-.1.202Zm-8.8-.54H18.394c0 1.72 1.422 3.002 3.308 3.002 1.125 0 2.15-.371 2.878-1.416h4.3c-1.422 3.304-4.168 4.249-7.906 4.249-4.863 0-8.27-2.664-8.27-6.914 0-4.519 3.374-6.913 8.27-6.913 5.492 0 8.238 3.608 8.238 7.116 0 .27.033.573 0 .876Zm-5.591-2.63c0-1.551-.96-2.63-2.713-2.63-1.621 0-2.481 1.281-2.514 2.63h5.227Z"></path><path fill="#000" d="M71.193.566h8.833c1.522 0 3.21.169 4.467.81 1.455.708 2.117 1.854 2.117 3.136 0 1.72-1.026 2.732-3.077 3.44l3.143 5.7h-5.922L78.24 8.66h-1.654v4.991h-5.393V.566Zm7.345 5.295c1.157 0 2.58-.135 2.58-1.248 0-.438-.298-.877-.827-1.08-.463-.168-1.025-.168-1.522-.168h-2.15v2.496h1.919Zm8.535 1.484c-.1-4.452 3.837-7.217 8.436-7.217 5.194 0 8.37 2.934 8.37 7.385v.708H92.796c0 1.484.662 3.07 3.242 3.07 1.522 0 2.448-.675 2.78-1.45h4.895c-.794 2.866-4.168 4.383-7.84 4.383-4.797 0-8.9-2.394-8.8-6.88ZM98.288 5.59c0-1.315-.596-2.698-2.78-2.698-2.05 0-2.745 1.45-2.745 2.698h5.525Zm6.451-5.024h6.418c2.514 0 4.499.236 6.385 1.585 1.819 1.315 2.646 3.103 2.646 4.958 0 1.72-.794 3.507-2.415 4.755-1.72 1.349-3.87 1.787-6.285 1.787h-6.749V.566Zm6.087 10.084c.695 0 1.158.033 1.82-.236.496-.203.86-.506 1.157-.844.596-.775.794-1.652.794-2.529s-.33-2.023-1.058-2.732c-.827-.775-1.654-.741-2.845-.741h-.629v7.115h.761v-.033Z"></path><path fill="#C41230" d="M1.787 6.097a.634.634 0 0 0-.629-.64H.033v1.28h1.125c.33 0 .629-.303.629-.64Z"></path><path fill="#C41230" d="M5.823 10.11V.566H.033v2.968a3.98 3.98 0 0 1 .629-.068c1.919 0 3.44 1.585 3.44 3.508 0 1.922-1.521 3.54-3.44 3.54-.232 0-.43-.033-.629-.067v3.204h12.605v-3.54H5.823Z"></path><path fill="#C41230" d="M3.573 7.007C3.573 5.355 2.25 4.04.662 4.04c-.232 0-.43.033-.629.067v.81h1.125c.629 0 1.158.54 1.158 1.18 0 .607-.463 1.113-1.026 1.18l1.125 1.754h-.628L.695 7.277H.033v2.63c.199.034.43.068.629.068 1.62 0 2.911-1.315 2.911-2.968Z"></path><path fill="#fff" d="M2.316 6.097c0-.64-.53-1.18-1.158-1.18H0v.54h1.125c.364 0 .628.303.628.64 0 .37-.297.64-.628.64H0v.54h.629L1.72 9.031h.629L1.224 7.277c.629-.067 1.092-.573 1.092-1.18Z"></path><path fill="#fff" d="M.662 3.466c-.232 0-.43.034-.629.068v.54c.199-.034.397-.068.629-.068 1.62 0 2.911 1.349 2.911 2.968C3.573 8.626 2.25 9.94.662 9.94c-.232 0-.43-.033-.629-.067v.54c.199.033.43.067.629.067 1.919 0 3.44-1.585 3.44-3.507 0-1.923-1.521-3.508-3.44-3.508Z"></path>',12),t=[l];function Z(m,e){return h(),c("svg",a,t)}const i={render:Z};export{i as default,Z as render};
