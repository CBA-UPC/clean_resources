/**
 * Pegasus
 * @version 0.4.1
 * @author Unify Group
 */
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=exports=e():"function"==typeof define&&define.amd?define([],e):t.CryptoJS=e()}(window,(function(){var t,e,i,n,r,s=s||Math);return e=(t=s).lib.WordArray,t.enc.Base64={stringify:parse:_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},Math),),Math),),),
/** @preserve
   (c) 2012 by CÃ©dric Mesnil. All rights reserved.
    Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
   - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */(Math)()()()()(),function(t){var e=s,i=e.lib,n=i.WordArray,r=i.Hasher,a=e.x64.Word,o=e.algo,c=[],d=[],l=[];();var h=[];();var u=o.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset,_doProcessBlock,_doFinalize,clone});e.SHA3=r._createHelper(u),e.HmacSHA3=r._createHmacHelper(u)}(Math),function(){var t=s,e=t.lib.Hasher,i=t.x64,n=i.Word,r=i.WordArray,a=t.algovar c=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],d=[];();var l=a.SHA512=e.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock,_doFinalize,clone,blockSize:32});t.SHA512=e._createHelper(l),t.HmacSHA512=e._createHmacHelper(l)}()(),s.lib.Cipher||function(t){var e=s,i=e.lib,n=i.Base,r=i.WordArray,a=i.BufferedBlockAlgorithm,o=e.enc,c=(o.Utf8,o.Base64),d=e.algo.EvpKDF,l=i.Cipher=a.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor,init,reset,process,finalize,keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper()}),h=(i.StreamCipher=l.extend({_doFinalize,blockSize:1}),e.mode={}),u=i.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor,init}),f=h.CBC(),p=(e.pad={}).Pkcs7={pad,unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},g=(i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:f,padding:p}),reset,_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize,blockSize:4}),i.CipherParams=n.extend({init,toString})),m=(e.format={}).OpenSSL={stringify,parse},y=i.SerializableCipher=n.extend({cfg:n.extend({format:m}),encrypt,decrypt,_parse}),v=(e.kdf={}).OpenSSL={execute},b=i.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:v}),encrypt,decrypt})}(),s.mode.CFB(),s.mode.ECB=((i=s.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),i.Decryptor=i.extend({processBlock}),i),s.pad.AnsiX923={pad,unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},s.pad.Iso10126={pad,unpad},s.pad.Iso97971={pad,unpad},s.mode.OFB=(n=s.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock}),n.Decryptor=r,n),s.pad.NoPadding={pad:function(){},unpad:function(){}}(),function(){var t=s,e=t.lib.BlockCipher,i=t.algo,n=[],r=[],a=[],o=[],c=[],d=[],l=[],h=[],u=[],f=[];();var p=[0,1,2,4,8,16,32,64,128,27,54],g=i.AES=e.extend({_doReset,encryptBlock,decryptBlock,_doCryptBlock,keySize:8});t.AES=e._createHelper(g)}()()(),
/** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   */
s.mode.CTRGladman()(),s.mode.CTR()(),s.pad.ZeroPadding={pad,unpad},s}));var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function InvalidCharacterError(t){this.message=tInvalidCharacterError.prototype=new Error,InvalidCharacterError.prototype.name="InvalidCharacterError";var atob="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||polyfillalidTokenError.prototype=new Error,InvalidTokenError.prototype.name="InvalidTokenError";var _name,_pBreakpts$prototype,_mutatorMap,_pActiveUser=function(t){for(var e in t)this[e]=t[e];return this.active=!1,this}_pActiveUser.prototype={eventsList:["mousemove","scroll","touchstart"],init:function(){var t=this,e=function(e){t.active=!0,t.eventType=e.type,t.unlisten(),t.on&&t.on(t)};return this.events=this.eventsList.reduce((function(t,i){return t[i]=e,t}),{}),this.listen(),this},listen:function(){var t=this;this.events&&Object.keys(this.events).forEach((function(e){return document.addEventListener(e,t.events[e])}))},unlisten:function(){var t=this;this.events&&Object.keys(this.events).forEach((function(e){return document.removeEventListener(e,t.events[e])}))}};var _pBreakpts=function(t){return this.prefix=t||"",this};_pBreakpts.prototype=(_pBreakpts$prototype={name:"",defaultDevices:[{name:"Desktop",type:"Desktop",orientation:"Landscape",bidderDeviceType:"desktop",operator:">=",widthLimit:"1200"},{name:"Tablet Landscape",type:"Tablet",orientation:"Landscape",bidderDeviceType:"desktop",operator:">=",widthLimit:"1020"},{name:"Tablet Portrait",type:"Tablet",orientation:"Portrait",bidderDeviceType:"desktop",operator:">=",widthLimit:"748"},{name:"Mobile Landscape",siteName:"marmiton",type:"Mobile",orientation:"Landscape",bidderDeviceType:"mobile",operator:">=",widthLimit:"488"},{name:"Mobile Portrait",type:"Mobile",orientation:"Portrait",bidderDeviceType:"mobile",operator:"<",widthLimit:"600"}],get devices(){var t=localStorage.getItem(this.prefix+":breakpoints");return t&&JSON.parse(t).expires_at>(new Date).getTime()/1e3?JSON.parse(t).values:this.defaultDevices},onChange:function(t){var e=this;window.addEventListener("resize",(function(){e.oldName=e.name,e.name=e.mediaqueries(),e.name!==e.oldName&&e.onChange&&t(e)}))},mediaqueries:function(){for(var t in this.devices){var e=this.devices[t].operator.startsWith(">")?"min-width":"max-width",i="min-width"===e?1:-1,n=this.devices[t].operator.includes("=")?this.devices[t].widthLimit:parseInt(this.devices[t].widthLimit)+1*i;if(window.matchMedia("all and (".concat(e,": ").concat(n,"px)")).matches)return this.value=this.devices[t],this.devices[t].name}},get siz,getBreakpoint:function(t){return this.devices&&this.devices.find((function(e){return e.name.toLowerCase()===t.toLowerCase()||e.type.toLowerCase()===t.toLowerCase()}))}},(_mutatorMap={})[_name="name"]=_mutatorMap[_name]||{},_mutatorMap[_name].get,_defineEnumerableProperties(_pBreakpts$prototype,_mutatorMap),_pBreakpts$prototype);var _pDetector={header:[navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],data:{os:[{name:"Googlebot",value:"Googlebot",regex:null},{name:"Xbox",value:"xbox",regex:null},{name:"Windows Phone",value:"Windows Phone",regex:/windows phone (?:os)?\s?(\d+(\.\d+)*)/i},{name:"Windows",value:"Win",regex:/Windows ((NT|XP)( \d\d?.\d)?)/i},{name:"iOS",value:"iPhone",regex:/os (\d+([_\s]\d+)*) like mac os x/i},{name:"iOS",value:"iPad",regex:/os (\d+([_\s]\d+)*) like mac os x/i},{name:"Kindle",value:"Silk",regex:/silk\/(\d+(\.\d+)?)/i},{name:"Android",value:"Android",regex:/android[ \/-](\d+(\.\d+)*)/i},{name:"BlackBerry OS",value:"BlackBerry|BB|PlayBook",regex:/rim\stablet\sos\s(\d+(\.\d+)*)/i},{name:"macOS",value:"Mac",regex:/Mac OS X (\d+([_\.\s]\d+)*)/i},{name:"Linux",value:"Linux",version:/(?:rv:)(\d+(\.\d+)?)/i},{name:"Chrome OS",value:"CrOS",regex:/(?:cros|crios)(.*?(?=\)))/i}],device:[{name:"Windows Phone",value:"Windows Phone"},{name:"iPad",value:"iPad"},{name:"iPhone",value:"iPhone"},{name:"Android Tablet",value:"Android(?:.+)(Tablet)"},{name:"Android Mobile",value:"Android(?:.+)(Mobile|Mobi)"},{name:"Android",value:"Android"},{name:"BlackBerry",value:"BlackBerry|BB|PlayBook"},{name:"Chromebook",value:"CrOS"},{name:"Tablet",value:"Tablet"},{name:"Mobile",value:"Mobile|Mobi"},{name:"Xbox",value:"xbox"},{name:"Desktop",value:"Win|Mac|Linux|Googlebot"}],browser:[{name:"Microsoft Edge",value:"EdgiOS|Edg",regex:/edg.*?\/(\d+(\.\d+)?)/i},{name:"Opera",value:"Opera|opr|opios",regex:/(?:opr|opios|version)[\s\/](\d+(\.\d+)?)/i},{name:"UC Browser",value:"ucbrowser",regex:/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i},{name:"Samsung Browser",value:"SamsungBrowser",regex:/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i},{name:"Chrome",value:"Chrome",regex:/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i},{name:"Firefox",value:"firefox|iceweasel|fxios",regex:/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i},{name:"Android",value:"Android",regex:/version\/(\d+(\.\d+)?)/i},{name:"Blackberry",value:"BlackBerry|BB|PlayBook",regex:/version\/(\d+(\.\d+)?)/i},{name:"Internet Explorer",value:"msie|trident",regex:/(?:msie |rv:)(\d+(\.\d+)?)/i},{name:"Safari",value:"Safari",regex:/version\/(\d+(\.\d+)?)/i},{name:"BlackBerry",value:"BlackBerry",regex:/blackberry[\d]+\/(\d+(\.\d+)?)/i},{name:"Googlebot",value:"Googlebot",regex:/googlebot\/(\d+(\.\d+))/i}]},get:function(){var t=this.header.join(" ");return{os:this.matchItem(t,"os"),device:this.matchItem(t,"device"),browser:this.matchItem(t,"browser")}},matchItem:function(t,e){for(var i=this.data[e],n=0;n<i.length;n++){if(new RegExp(i[n].value,"i").test(t)){var r=t.match(i[n].regex),s=r&&r[1]?r[1]:"";return s=s.replace(/[_]/g,"."),"device"===e?i[n].device||i[n].name:{name:i[n].name,version:s}}}}},_pDocument={visibility:function(t){document.addEventListener("visibilitychange",))}},_pEl=function t(e){return this instanceof t?(e&&("string"==typeof e||e.nodeType)?this.query(e):this.init(e),this):new t(e)};_pEl.prototype={init:function(t){return this.params=t||{},this.type=this.params&&this.params.type?this.params.type:"div",this.create(),this},create:function(){var t=document.createElement(this.type);return this.params.id&&(t.id=this.params.id),this.params.class&&(t.className=pegasus.conf.prefix+"_"+this.params.class),this.params.html&&(t.innerHTML=this.params.html),this.el=t,this.styles(this.params.styles),this.attributes(),this.setChildren(),this},query,rect,scrollTop:function(){return this.rect().top+_pUtils.scrollTop()},wrap:function(t){var e=new _pEl(t);return this.el.parentNode.insertBefore(e.el,this.el),e.el.appendChild(this.el),e.el},unwrap:function(){for(var t=this.el.parentNode,e=t.parentNode;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)},attributes:function(){if(this.params.attr){for(var t in this.params.attr){var e=_pUtils.camelCaseToDash(t);this.el.setAttribute(e,this.params.attr[t])}return this}},styles:function(t){if(t){if("string"==typeof t)return t.indexOf(":")<0?window.getComputedStyle(this.el).getPropertyValue(t):(this.el.setAttribute("style",t),this);for(var e in t)t.hasOwnProperty(e)&&(this.el.style[e]=t[e]);return this}},setChildren:function(){var t=this;this.params.children&&this.params.children.forEach((function(e){new _pEl(e).insert("beforeEnd",t.el)}))},insert:function(t,e){return t=t||"afterBegin",e=e||document.body,(e=_pEl(e)).el.insertAdjacentElement(t,this.el),this},delete};var _pEvent=function(t,e){var i;"function"==typeof window.CustomEvent?i=new CustomEvent(t,{detail:e}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,e),document.dispatchEvent(i)},_pLocker;_pLocker.prototype={auth:function(t){console.log("Authentication...");var e=this;this.params=t||{},_pUtils.ajax({method:"POST",url:this.params.url,params:this.params.data,headers:{"Content-type":"application/json"},success:function(t){var i=JSON.parse(t);i.access_token&&(console.log("Welcome ! You are logged in !"),localStorage.setItem(e.prefix+":token",i.access_token))},error})},get:function(t){t=void 0===t?"token":t;var e=localStorage.getItem(this.prefix+":"+t);return!(!e||"true"!=e)},out:function(t){t=void 0===t?"token":t,localStorage.removeItem(this.prefix+":"+t)},filteredBidders:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=localStorage.getItem(this.prefix+":bidders");if(e)return t?e.split(","):e},filteredAdslots:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=localStorage.getItem(this.prefix+":adslots");if(e)return t?e.split(","):e},getUserToken:function(){var t=localStorage.getItem(this.prefix+":userToken"),e=null;return t&&(e=jwtDecode(t.replaceAll('"',""))).exp&&(new Date).getTime()>1e3*e.exp&&(e=null),e}};var _pLogger=function(t,e){for(var i in this.prefix=t?t.toUpperCase():"",e)this[i]=e[i];return this.ERROR_SAMPLE_RATE=10,this.ERROR_SERVICE_NAME="statslogs",this.CHANNEL="JS Logger",this.ERROR_TRACK_URL="https://pixels.afcdn.com/logpix.php",this};_pLogger.prototype={log:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="";""==e&&(this.letterIterator=this.letterIterator?String.fromCharCode(this.letterIterator.charCodeAt()+1):"A",i=this.letterIterator+") ");var n="%c"+this.prefix+(e?" - "+e.toUpperCase()+" ":"")+"%c "+i+t;"error"==e?console.error(n,this.styles(e),""):"warning"==e?console.warn(n,this.styles(e),""):"table"==e?console.table(t.var,t.params):console.log(n,this.styles(e),"")},styles:function(t){var e=function(t){switch(t){case"info":return{backgroundColor:"#4285F4"};case"warning":return{backgroundColor:"#FF9002"};case"error":return{backgroundColor:"#D63737"};case"bid":return{backgroundColor:"#03AE94"};case"test":return{backgroundColor:"#24ae46"};case"ptm":return{backgroundColor:"#FF33F9"};default:return{backgroundColor:"#8A38D3"}}}(t);return e.padding="2px 8px",e.color=e.color?e.color:"rgba(255,255,255,.6)",Object.keys(e).map((function(t){return _pUtils.camelCaseToDash(t)+":"+e[t]})).join(";")},trackError:function(t,e){(e=e||{}).pool="JS:Pegasus",e.revision=this.VERSION,e.stacktrace=(new Error).stack,e.sampleRate=100,e.coef=1,this.sendBeacon(t,e)},sendBeacon:function(t,e){navigator.sendBeacon&&navigator.sendBeacon(this.ERROR_TRACK_URL,JSON.stringify({service_name:e.service_name?e.service_name:this.ERROR_SERVICE_NAME,channel:this.CHANNEL,message:t,data:e}))}};var _pMonitor=function(t,e,i){var n=this;return this.params=e,this.advertiserMap={},this.availableBidders=[],this.breakpoint=i,(t=t||[]).forEach((function(t){t.hasOwnProperty("advertiserId")&&null!==t.advertiserId&&(n.advertiserMap[t.advertiserId]=t.code),n.availableBidders.push(t.code)})),this.adXAdvertiserIds=["null",0,4472060625,1572593421],this.events={},this.EVENTS_THRESHOLD=16,this.EVENT_TIMEOUT=4e3,this.uniqueEvents=[],this.endpoint="https://europe-west1-realtime-logging-228816.cloudfunctions.net/realtime-logs",this.RENDER_TYPE="HEADER_BIDDING_RENDER",this.INIT_TYPE="INIT_STACK",this.USER_INFOS="USER_INFOS",this.eventMap={},this.eventMap[this.RENDER_TYPE]="buildRenderEvent",this.eventMap[this.INIT_TYPE]="initEvent",this.eventMap[this.USER_INFOS]="userInfosEvent",this};_pMonitor.prototype={fireEvent:function(t,e,i){this[this.eventMap[t]](e,i)},buildRenderEvent:function(t,e){var i={};i.content_type=this.params.contenttype,i.site=this.params.site,i.segment=null,i.device=_pDetector.get().device,i.browser=_pDetector.get().browser.name,i.browser_version=_pDetector.get().browser.version,i.os=_pDetector.get().os.name,i.os_version=_pDetector.get().os.version,i.account=t.advertiserId?""+t.advertiserId:null,i.adserver="dfp-prebid-pegasus",i.bidder=this.getBidderFromAdvertiserId(t.advertiserId),i.cpm=this.getCpmFromSlotTargeting(i.bidder,t.slot),i.format=t.slot.getAdUnitPath().split("/")[t.slot.getAdUnitPath().split("/").length-1],i.size=t.size?t.size[0]+"x"+t.size[1]:null,i.target=this.rebuildTargeting(t.slot,e),i.ad_unit_path=t.slot.getAdUnitPath(),i.line_item_id=t.lineItemId?""+t.lineItemId:null,i.campaign_id=t.campaignId?""+t.campaignId:null,i.creative_id=t.creativeId?""+t.creativeId:null,i.version="0.4.1",this.storeEvent(this.RENDER_TYPE,i)},initEvent:function(t){var e=t&&t.type?t.type:"init";if(this.uniqueEvents.includes(e))return!1;var i=null;t.pageKeywords&&t.pageKeywords.stack&&(i="uno"===t.pageKeywords.stack?1:0),this.params&&this.params.stack&&(i="uno"===this.params.stack?1:0);var n={site:this.params.site,segment:i,version:"0.4.1",device:this.breakpoint.name,content_type:this.params.contenttype,url:"".concat(window.location.origin).concat(window.location.pathname),type:e};"first_render"===e&&(n.perfs=_pPerf.marks),this.storeEvent(this.INIT_TYPE,n),this.uniqueEvents.push(e)},userInfosEvent:function(t){if(this.uniqueEvents.includes(t.type))return!1;this.storeEvent(this.USER_INFOS,t.data),this.uniqueEvents.push(t.type)},getBidderFromAdvertiserId:function(t){var e=null!==t?""+t:"unfilled";return this.advertiserMap.hasOwnProperty(t)?e=this.advertiserMap[t]:this.adXAdvertiserIds.includes(t)&&(e="google"),e},getCpmFromSlotTargeting:function(t,e){var i=e.getTargeting("ufloor")[0]||0,n=e.getTargeting("MaxBid")[0]||0;return"google"===t?Math.max(i,n/100):this.availableBidders.includes(t)?n/100:null},rebuildTargeting:function(t,e){var i=t.getTargetingKeys().map((function(e){return e+"="+t.getTargeting(e).join(",")})),n=this.getGlobalTargeting();return(i=i.concat(n)).join(";")},getGlobalTargeting:function(){var t=pegasus.getGlobalTargeting();return Object.keys(t).map())},storeEvent:function(t,e){var i=this;this.events.hasOwnProperty(t)||(this.events[t]=[]),this.events[t].push(e);var n=0;if(Object.keys(this.events).forEach()),n>=this.EVENTS_THRESHOLD)this.sendEvents();else{var r=this;this.timer=setTimeout((function(){r.sendEvents()}),this.EVENT_TIMEOUT)}},sendEvents:function(){var t=this,e=[];Object.keys(this.events).forEach((function(i){t.events[i].length>0&&e.push({logtype:i,logs:t.events[i]})})),this.events={},window.clearTimeout(this.timer),e.length>0&&_pUtils.ajax({url:this.endpoint,method:"POST",params:e,headers:{"Content-Type":"application/json"}})}};var SHIFT=3;function __custom_pegasus_decrypt(t){return unescape(atob(caesarShiftVanilla(unescape(t),-SHIFT)))}function caesarShiftVanilla(t,e){for(var i="",n=0;n<t.length;n++)i+=String.fromCharCode(t.charCodeAt(n)+e);return i}var _pegasusCrypto={decrypt:__custom_pegasus_decrypt},_pPerf={url:"https://pegasus.unifygroup.com/lib/",_marks:[],get marks(){var t=this;return this._marks.filter((function(e){return!(e.name.indexOf("firstRender")>-1)||("banner_atf"===e.target||t._marks.filter((function(t){return t.name.indexOf("firstRender")>-1&&t.endTime}))[0]===e)})).concat(this.resources)},init:function(t){for(var e in t)this[e]=t[e];return this},getName,get resources(){var t=this;return performance.getEntriesByType("resource").filter()).map((function(e){var i="file_lib";e.name.indexOf("pegasus.min.js")>-1&&(i="file_loader"),e.name.indexOf("prebid")>-1&&(i="file_prebid");var n={name:t.getName(i)};return n=t.setData(n,e)}))},start:function(t,e){var i={name:t=this.getName(t)};e&&(i.target=e),this._marks.push(i),performance.mark("start_"+t)},end:function(t,e){var i=this.get(t,e);if(!(!i||i&&e===i.target&&i.endTime)){performance.mark("end_"+i.name),performance.measure(i.name,"start_"+i.name,"end_"+i.name);var n=performance.getEntriesByName(i.name)[0];this.setData(i,n)}},setData:function(t,e){return t.startTime=Math.round(e.startTime),t.duration=Math.round(e.duration),t.endTime=t.startTime+t.duration,t},get:function(t,e){return t=this.getName(t),this._marks.find())},report:function(){console.table(this.marks,["name","target","startTime","endTime","duration"])}},_pTM=function(t){for(var e in t)this[e]=t[e];return this};_pTM.prototype.run=function(t){var e=this;Object.keys(this.tags).forEach((function(i){if(!document.querySelector("".concat(e.prefix,"_").concat(i))){var n=document.createElement("script");n.id="".concat(e.prefix,"_").concat(i),n.innerHTML="(function() { ".concat(e.tags[i].script," })()");var r=void 0!==e.tags[i].time_to_listen?e.tags[i].time_to_listen:0;setTimeout(),r)}}))};var _pTimer;_pTimer.prototype={delay:1e3,beforeTimeOut:0,run:function(){var t=this;if(this.value=this.value?this.value+this.delay:this.delay,this.value===this.delay&&this.started(),this.value===this.duration-this.beforeTimeOut&&this.beforeEnd(),this.value>=this.duration)return this.stop(),void this.end();this.fn=setTimeout(),this.delay)},stop:function(){this.fn=clearTimeout(this.fn),this.triggerCallback("stop")},started:function(){this.triggerCallback("started")},beforeEnd:function(){this.triggerCallback("beforeEnd")},end,triggerCallback:function(t){t=_pUtils.capitalize(t),this["on".concat(t)]&&this["on".concat(t)]()}};var _pUser=function(t){for(var e in t)this[e]=t[e];return this.scrollSpeed={value:null},this.bandwidthSpeed={start:(new Date).getTime(),value:null},this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.pageHeight=_pUtils.documentHeight(),this};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}_pUser.prototype={get scrollMaxDistanc,getScrollSpeed:function(t){var e=this;document.addEventListener("scroll",(function i(n){e.scrollSpeed.start=e.scrollSpeed.start||n.timeStamp,e.scrollSpeed.firstOffset=e.scrollSpeed.firstOffset||_pUtils.scrollTop(),e.scrollSpeed.lastOffset=_pUtils.scrollTop(),e.scrollSpeed.end=n.timeStamp;var r=Math.abs(e.scrollSpeed.lastOffset-e.scrollSpeed.firstOffset);if(r>=e.scrollMaxDistance){var s=r/(e.scrollSpeed.end-e.scrollSpeed.start);return s=Math.round(100*s)/100,e.scrollSpeed.distance=r,e.scrollSpeed.value=s,e.scrollSpeed.ended=!0,t&&t(e),void document.removeEventListener("scroll",i)}}))},activeEventsList:["mousemove","scroll","touchstart"],isActive:function(t){var e=this;if(!this.trackingActivity){this.trackingActivity=!0,this.active=!1;var i=function(i){e.active=!0,e.activeEventType=i.type,e.unlisten(),e.trackingActivity=!1,t&&t(e)};return this.activeEvents=this.activeEventsList.reduce(),{}),this.listen(),this}},listen:function(){var t=this;this.activeEvents&&Object.keys(this.activeEvents).forEach((function(e){return document.addEventListener(e,t.activeEvents[e])}))},unlisten:function(){var t=this;this.activeEvents&&Object.keys(this.activeEvents).forEach())},getBandwidthSpeed:function(t){this.bandwidthSpeed.end=(new Date).getTime();var e=this.bandwidthSpeed.end-this.bandwidthSpeed.start;e=this.bandwidthSpeed.contentLength/e,this.bandwidthSpeed.value=Math.round(100*e)/100,this.bandwidthSpeed.ended=!0,t&&t(this)},setDownloadLength:function(t){t&&(this.bandwidthSpeed.contentLength=parseInt(t))},calcAverage,run:function(t){var e=this,i=!1,n=function(){e.scrollSpeed.ended&&e.bandwidthSpeed.ended&&t&&!i&&(i=!0,t(e))};this.getScrollSpeed((function(t){return n()})),this.getBandwidthSpeed())},reset:function(){return[this.scrollSpeed,this.bandwidthSpeed].forEach((function(t){t.list=[],t.count=0,t.value=null})),this},get report(){var t=this;return["breakpoint","screenWidth","screenHeight","pageHeight","scrollSpeed","bandwidthSpeed"].reduce((function(e,i){return e[_pUtils.camelCaseToSnake(i)]=t[i]&&t[i].value||t[i],e}),{})}};var _pUtils={addScript:function(t){if((t||t.id||t.url)&&!document.querySelector("#"+t.id)){var e=document.createElement("script");return e.src=t.url,e.id=t.id,document.head.appendChild(e),e.onload,t.onerror&&(e.onerror=function(e){t.onerror(e)}),t.async&&(e.async=!0),this}},camelCaseToDash:function(t){return _pUtils.camelCaseTo(t,"-")},camelCaseToSnake,camelCaseTo:function(t,e){return t?t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1".concat(e)).toLowerCase():null},capitalize,extend:function(t,e,i){for(var n in t=t||{},e)i&&!e[n]||("object"!==_typeof(e[n])||Array.isArray(e[n])?t[n]=e[n]:t[n]=_pUtils.extend(t[n],e[n]));return t},filter,ajax:function(t){var e=_pUtils.extend({url:"",method:"GET",params:"",headers:{},success:function(t){},error:function(t){},finally:function(t){}},t);if(e.url){"DELETE"!==e.method&&(e.method=e.params?"POST":e.method);var i=new XMLHttpRequest;for(var n in i.open(e.method,e.url,!0),e.headers)i.setRequestHeader(n,e.headers[n]);i.send(JSON.stringify(e.params)),i.onreadystatechange=function(){var t=i.getAllResponseHeaders();t=t?i.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce(),{}):{},4==i.readyState&&(200==i.status?e.success(i.response,t):e.error(i),e.finally(i.response,t))}}},scrollTop:function(){var t=_pEl(document.documentElement).styles("height"),e=_pEl(document.body).styles("height");return parseInt(t)&&parseInt(e)===window.innerHeight?document.body.scrollTop||document.documentElement.scrollTop:window.pageYOffset},documentHeight:function(){var t=[document.body,document.documentElement].filter((function(t){return t})).map((function(t){return["scrollHeight","offsetHeight","clientHeight"].map((function(e){return t[e]}))}));return t=[].concat.apply([],t),Math.max.apply(Math,t)},flattenSizes:function(t){if(!t.display)return t;t=t.display,t=Object.keys(t).map((function(e){return t[e]})),t=[].concat.apply([],t);var e={};return t.forEach((function(t){var i=Array.isArray(t)?t.join("|"):t;e[i]=t})),Object.keys(e).map((function(t){return e[t]}))},getMinFloor,minify,getUrlParams:function(){var t={},e=window.location.search;e&&(e=e.substring(1)).split("&").forEach((function(e){var i=e.split("=");t[i[0]]=i[1]?i[1]:null}));return t},getCookies:function(){var t=decodeURIComponent(document.cookie).split(";").map((function(t){return t.trim()})),e={};return t.forEach((function(t){return e[t.split("=")[0]]=t.split("=")[1]})),e},getCookie:function(t){return _pUtils.getCookies()[t]?_pUtils.getCookies()[t]:null},parser:function(t,e,i){if(t){var n=t;if(!e)return t;var r=(e=e.split("."))[e.length-1];return e.forEach((function(t){if(Array.isArray(n)){if((n=n.filter((function(e){return e[t]}))).length>1)return;n=n.find((function(e){return e[t]}))}n=n&&n.hasOwnProperty(t)?t===r?n:n[t]:n})),i&&n&&(n[r]=i),n?n[r]:n}},flattenRTBSizes:function(t){return Object.keys(t).reduce((function(e,i){return Object.keys(t[i]).forEach((function(n){return e[i+"|"+n]=t[i][n]})),e}),{})}},_pViewport={split:3,_POSITIONS:["atf","mtf","btf"],getPosition:function(t){for(var e,i=t.getBoundingClientRect(),n=0;n<this._POSITIONS.length;n++)i.top>Math.round(document.body.offsetHeight/this.split)*n&&(e=this._POSITIONS[n]);return e},viewportKey:"nbViewports",isInView:function(t,e){var i=t.getBoundingClientRect(),n={percentHeight:0};n[this.viewportKey]=0;var r=_pUtils.extend(n,e),s=i.height*r.percentHeight/100;return t.style.display="none"===t.style.display?null:t.style.display,i.top>=(r.percentHeight<100?-(i.height-s):0)&&i.right>0&&i.left<window.innerWidth&&i.top<=window.innerHeight-(r.percentHeight>0?s:0)+window.innerHeight*r[this.viewportKey]}};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var _pPlugin;_pPlugin.prototype={get BASECLASS(){return(this.prefix?this.prefix+"_":"")+this.plugin},dataSelector:function(t,e){var i=[this.plugin,_pUtils.camelCaseToDash(t)].filter((function(t){return t})).join("-");return"[data-ad-".concat(i).concat(e?"":'="'.concat(this.adslot,'"'),"]")},init:function(t){for(var e in t)this[e]=t[e];var i=[this.target,this.dataSelector(),this.adslot].filter((function(t){return t})).join();if(this.el=document.querySelector(i),this.el&&(this.child=this.el.firstElementChild,this.subchild=this.child.firstElementChild,this.adslotEl=this.adslot?document.querySelector(this.adslot):this.el,this.subInit&&this.subInit(),!this.stopPlugin))return this.el.classList.add(this.BASECLASS),this.child.classList.add(this.BASECLASS+"_child"),this.subchild.classList.add(this.BASECLASS+"_subchild"),this.status="init",this.start(),this},destroy:function(){this.el.classList.remove(this.BASECLASS),this.child.classList.remove(this.BASECLASS+"_child"),this.subchild.classList.remove(this.BASECLASS+"_subchild"),this.scrollHandler&&document.removeEventListener("scroll",this.scrollHandler,!0),this.subDestroy(),this.status="destroyed"},get docHeight(){var t=[document.body,document.documentElement].filter((function(t){return t})).map((function(t){return["scrollHeight","offsetHeight","clientHeight"].map((function(e){return t[e]}))}));return t=[].concat.apply([],t),Math.max.apply(Math,t)},get scrollTo,_status:"",set status(t){this._status="object"===_typeof(t)?t.name:t,this.emit(this.status,this.el)},get status(){return this._status},events:{},emit:function(t,e){var i=this;this.events[t]&&this.events[t].forEach())},on,onScroll:function(){this.scrollHandler=this.scrollHandler||this.globalHandler.bind(this),this.scrollTop>0&&this.scrollHandler(),document.addEventListener("scroll",this.scrollHandler,!0)},globalHandler,mutation:function(t,e){var i=new MutationObserver((function(t){t.some())&&e(t)}));return(t=t instanceof NodeList?t:[t]).forEach()),i}};var _pCenter=function(){return this.plugin="center",this};_pCenter.prototype=new _pPlugin,_pCenter.prototype.start=function(){this.el.offsetHeight>this.child.offsetHeight&&(this.el.style.display="flex",this.el.style.alignItems="center")},_pCenter.prototype.subDestroy=function(){this.el.style.display=this.el.style.alignItems=null};var _pNative=function(){return this.plugin="native",this};_pNative.prototype=new _pPlugin,_pNative.prototype.start=function(){this.el.style.maxHeight=this.child.style.maxHeight="".concat(this.height,"px")},_pNative.prototype.destroy;var _pParallax;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}_pParallax.prototype=new _pPlugin,_pParallax.prototype.subInit=function(){_pEl(this.child).rect().height<this.minHeight&&(this.stopPlugin=!0);var t=window.getComputedStyle(this.child,":before").backgroundColor,e=".".concat(this.prefix,"_").concat(this.plugin," .").concat(this.prefix,"_has_label:before {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tz-index: 1;\n\t\t").concat("rgba(0, 0, 0, 0)"===t||"transparent"===t?"background-color: white;":"","\n\t}");this.style=document.querySelector("#".concat(this.adslotEl.id,"_style_").concat(this.plugin))||new _pEl({type:"style",id:"".concat(this.adslotEl.id,"_style_").concat(this.plugin),html:_pUtils.minify(e)}).insert("beforeEnd","head").el},_pParallax.prototype.start=function(){var t=_pEl(this.child).rect().height,e=Math.round(t-t/this.ratio);_pEl(this.el).styles({position:"relative",height:e+"px",overflow:"hidden"}),_pEl(this.child).styles({position:"absolute",clip:"rect(0px, auto, "+e+"px, 0px)",inset:"0px",margin:"0",padding:"0"}),_pEl(this.subchild).styles({position:"fixed",margin:"".concat(this.top,"px 0 0"),inset:"0px",display:"flex",justifyContent:"center",alignItems:"center"}),this.stickiesObserver()},_pParallax.prototype.stickiesObserver=function(){var t=this;this.stickies=document.querySelectorAll(".".concat(this.prefix,"_sticky_child.banner")),this.observer=this.mutation(this.stickies,(function(e){var i=Math.max.apply(Math,e.map((function(t){return t.target.offsetHeight})));i>t.top&&(t.top=i,t.subchild.style.marginTop=t.top+"px")}))},_pParallax.prototype.subDestroy=function(){this.style&&document.head.removeChild(this.style),this.observer.disconnect(),_pEl(this.el).styles({position:null,height:null,overflow:null}),_pEl(this.child).styles({position:null,clip:null,inset:null,margin:null,padding:null}),_pEl(this.subchild).styles({position:null,margin:null,inset:null,display:null,justifyContent:null,alignItems:null})};var _pSkin;function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}_pSkin.prototype=new _pPlugin,_pSkin.prototype.setProperties=function(){var t={bannerHeight:220,insertAfter:"body",marginTop:0,bgColor:"transparent",type:"display",position:"fixed",above:[]};for(var e in t)this[e]=this[e]||t[e];this.main=document.querySelector("".concat(this.main?this.main+",":"").concat(this.dataSelector("main",!0))),this.insertAfter=document.querySelector(this.dataSelector("insert-after",!0))?this.dataSelector("insert-after",!0):this.insertAfter,this.mobile&&(this.insertAfter=this.subchild),this.bannerHeight=parseInt(this.bannerHeight),this.marginTop=parseInt(this.marginTop),this.above.push(this.dataSelector("above",!0)),this.above=this.above.map((function(t){return document.querySelector(t)})),this.above.push(this.main)},_pSkin.prototype.build={display:function(){if(this.subchild.style.position="absolute",this.subchild.style.height="1px",this.subchild.style.pointerEvents="none",this.subchild.style.overflowX="hidden",this.subchild.style.maxWidth="100%",this.img){var t="body"!==this.insertAfter?"afterEnd":"afterBegin";if(this.bannerHeight=this.cls&&this.cls.height&&this.cls.height>this.bannerHeight&&"body"!==this.insertAfter?this.cls.height:this.bannerHeight,this.mask=new _pEl({class:this.plugin+"Mask",id:this.el.id+"_skin_mask",styles:{position:"relative",width:"100%",height:this.mobile?"auto":this.bannerHeight+"px",textAlign:"center"},children:[{type:this.url?"a":"span",attr:this.url?{href:this.url,target:"_blank"}:{},styles:this.mobile?{display:"block"}:{display:"block",position:"fixed",bottom:0,left:0,right:0},children:this.mobile?[{type:"img",attr:{src:this.img},styles:{maxWidth:"100%",height:"auto",display:"block",margin:"0 auto",maxHeight:this.mobile&&"Mobile Landscape"===this.breakpoint?Math.round(window.innerHeight/3)+"px":"none"}}]:[]}]}).insert(t,this.insertAfter),this.top=this.mask.rect().top+_pUtils.scrollTop()+this.marginTop,this.mobile||(this.mask.el.firstElementChild.style.top=this.top+"px"),this.mobile||(document.body.style.backgroundImage="url(".concat(this.img,")"),document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundAttachment="scroll",document.body.style.backgroundPosition="center ".concat(this.top,"px"),document.body.style.backgroundSize="auto"),this.mobile&&this.plugins&&this.plugins.sticky){var e=_pUtils.extend(this.plugins.sticky,{prefix:this.prefix,target:"#"+this.el.id,maxHeight:300},!0);this.sticky=(new _pSticky).init(e)}}else this.mask=null},rtb:function(){if(this.external)return this.child.firstElementChild.style.height="1px",void(this.child.firstElementChild.style.position="absolute");_pEl(this.el).styles({position:"relative",width:"100%",height:this.bannerHeight+"px"}),_pEl(this.child).styles({position:"absolute",left:"50%",transform:"translateX(-50%)",minWidth:"1800px"})}},_pSkin.prototype.subInit=function(){this.setProperties()},_pSkin.prototype.customEvent=function(){var t={active:"active"===this.status,element:this.mask?this.mask.el:this.el,sticky:this.sticky instanceof _pSticky,breakpoint:this.breakpoint,type:this.type,insertAfter:"display"===this.type?this.insertAfter:null};t.insertAfter&&"object"===_typeof(t.insertAfter)&&(t.insertAfter="#".concat(t.insertAfter.id)||"."+t.insertAfter.className.split(" ").join(".")),_pEvent("pegasus:skin",t)},_pSkin.prototype.start=function(){this.el.style.height=null,this.build[this.type].call(this),document.body.classList.add(this.BASECLASS+"_active"),this.status="active",this.customEvent(),this.child.style.width=null,this.above.forEach((function(t){return t&&(t.style.position="relative")})),this.setScroll()},_pSkin.prototype.setScroll=function(){"fixed"!==this.position||this.mobile||this.external||(this.scrollHandler=this.scrollFn[this.type].bind(this),this.onScroll())},_pSkin.prototype.scrollFn={display:function(){this.sticky&&this.mask&&(_pUtils.scrollTop()>=this.top?(document.body.style.backgroundAttachment="fixed",document.body.style.backgroundPosition="center top"):(document.body.style.backgroundAttachment="scroll",document.body.style.backgroundPosition="center "+this.top+"px"))},rtb:function(){_pUtils.scrollTop()>=_pEl(this.el).scrollTop()?_pEl(this.child).styles({position:"fixed",top:"0"}):_pEl(this.child).styles({position:"absolute",top:null})}},_pSkin.prototype.subDestroy=function(){this.mobile&&this.sticky&&this.sticky.destroy(),document.body.classList.remove(this.BASECLASS+"_active"),_pEl(document.body).styles({backgroundImage:null,backgroundAttachment:null,backgroundPosition:null}),document.body.style.backgroundImage=document.body.style.backgroundAttachment=document.body.style.backgroundPosition=document.body.style.backgroundRepeat=document.body.style.backgroundSize=null,this.mask&&this.mask.el&&this.mask.el.parentNode&&this.mask.el.parentNode.removeChild(this.mask.el),this.subchild.style.position=this.subchild.style.height=this.subchild.style.pointerEvents=this.subchild.style.overflowX=this.subchild.style.maxWidth=null,this.el.style.position=this.el.style.width=this.el.style.height=null,this.child.style.position=this.child.style.left=this.child.style.transform=this.child.style.top=null,this.above.forEach()),this.customEvent()};var _pSticky=function(){return this.plugin="sticky",this.states=[],this};_pSticky.prototype=new _pPlugin,_pSticky.prototype.TYPES={default:{states:["unStick","stick"],stickPosition:"top",bgColor:"#fff",follow:!1,minHeight:50,zIndex:1001,on:{}},banner:{states:["stickUp"],screenCentered:!0,scrollLimit:100,scrollUnit:"%",maxHeight:130},bottom:{screenCentered:!0,stickPosition:"bottom",scrollLimit:100,scrollUnit:"%",maxHeight:130},sidebar:{states:["stuckBottom"],cssTransition:"top",spacing:20,bottomMargin:0,maxHeight:2e3,zIndex:1e3},gutter:{states:["stuckBottom"],cssTransition:"top",spacing:20,bottomMargin:0,maxHeight:620,zIndex:null}},_pSticky.prototype.setProperties=function(){var t=Object.create(this.TYPES.default);for(var e in(t=_pUtils.extend(t,this.type?this.TYPES[this.type]:{})).states=t.states.concat(this.TYPES.default.states),this.states=t.states,t)this[e]=this[e]||t[e]},_pSticky.prototype.ELEMENTS=["follow","unstickTo"],_pSticky.prototype.UNIQUE_ELEMENTS=["reference"],_pSticky.prototype.STATES={stick:{name:"stick",styles:"position: fixed !important;",fn:function(){var t=_pEl(this.el).scrollTop();if(!(this.scrollTop<t-this.css().top)){if(this.status=this.STATES.stick.name,this.child.style.zIndex=this.css().zIndex,this.child.style.transform=null,"top"===this.stickPosition&&(this.child.style.top=this.css().top+"px"),"bottom"===this.stickPosition){var e=this.scrollTop-this.child.offsetHeight;this.child.style.bottom=e>0?0:e+"px"}return this.timingLimit(),!0}},after:function(){this.screenCentered&&["transparent","rgba(0, 0, 0, 0)"].indexOf(_pEl(this.child).styles("background-color"))>-1&&(this.child.style.backgroundColor=this.bgColor)}},unStick:{name:"unStick",fn:function(t){var e=_pEl(this.el).scrollTop();if(this.scrollTop<=e-this.css().top||t)return this.status=this.STATES.unStick.name,this.child.style.top=this.child.style.bottom=this.child.style.backgroundColor=this.child.style.transform=null,!0}},stickUp:{name:"stickUp",styles:"position: fixed !important; transform: translateY(-100%);",fn:function(t,e){var i=this;t=t||parseInt(this.scrollLimit),"%"===(e=e||this.scrollUnit)&&(t=this.docHeight*this.scrollLimit/100);var n=this.unstickTo&&Array.prototype.slice.call(this.unstickTo).some((function(t){if(_pEl(t).rect().top<i.css().top+i.child.offsetHeight&&_pEl(t).rect().bottom>i.css().top)return t}));if(!(this.scrollTop<t)||n)return this.status=this.STATES.stickUp.name,this.child.style.backgroundColor=null,!0}},stuckBottom:{name:"stuckBottom",styles:"position: absolute;",fn:function(){var t=_pEl(this.reference).rect().bottom+this.scrollTop-_pEl(this.child).rect().height-this.css().top-this.bottomMargin;if(this.scrollTop>t){this.status=this.STATES.stuckBottom.name,this.child.style.top=null;var e=_pEl(this.reference).rect().height-_pEl(this.child).rect().height-this.spacing-this.bottomMargin;return this.child.style.transform="translateY("+e+"px)",!0}}}},_pSticky.prototype.subInit=function(){var t=this;this.setProperties(),this.queryElements(),this.targetSelector=[this.target,this.dataSelector(),this.adslot].filter()).find((function(e){return t.el.matches(e)})),this.addStylesTag(),this.child.classList.add(this.type)},_pSticky.prototype.queryElements=function(){var t=this;[].concat(_toConsumableArray(this.ELEMENTS),_toConsumableArray(this.UNIQUE_ELEMENTS)).forEach((function(e){var i=[],n="follow"===e,r=t.dataSelector(e,n);i.push(r),t[e]&&t[e].length>0&&(i=[].concat(_toConsumableArray(i),_toConsumableArray(t[e].split(",")))),e.indexOf(t.UNIQUE_ELEMENTS)>-1?(t[e]=document.querySelector(r)||document.querySelector(i.join(",")),t[e+"Selector"]=t[e]?i.find()):i.join(",")):(t[e]=document.querySelectorAll(i),t[e+"Selector"]=i)})),this.reference="gutter"===this.type?this.el:this.reference},_pSticky.prototype.addStylesTag=function(){var t=this,e="".concat(this.adslotEl.id,"_style_").concat(this.plugin,"_").concat(this.type),i=document.querySelector("#"+e);i&&i.parentNode.removeChild(i);var n=[this.targetSelector,this.BASECLASS].join(".")+" ."+this.BASECLASS+"_child",r=n+"{ transition: "+(this.cssTransition?this.cssTransition:"all")+" 250ms ease, background-color 0s; }"+n+" > * { margin-left: auto; margin-right: auto; }";this.states.forEach((function(e){if(t.STATES[e].styles){var i=[n,t.STATES[e].name].join(".");r+=i+"{"+t.STATES[e].styles+"}",t.screenCentered&&(r+=i+"{left: 0; right: 0; }")}})),this.style=document.querySelector(e)||new _pEl({type:"style",id:e,html:_pUtils.minify(r)}).insert("beforeEnd","head").el},_pSticky.prototype.start,_pSticky.prototype.handler=function(){var t=this,e=this.cls&&this.cls.height&&this.cls.height>this.maxHeight?this.cls.maxHeight:this.maxHeight;if(!(_pEl(this.adslotEl).rect().height>e||_pEl(this.adslotEl).rect().height<this.minHeight||this.stopScroll)){setTimeout((function(){t.el.style.minHeight||(t.el.style.height=("gutter"===t.type?_pEl(t.el).rect().height:_pEl(t.child).rect().height)+"px")}),200);var i=window.getComputedStyle(this.el).getPropertyValue("display");["flex","block"].indexOf(i)<0&&(this.el.style.display="block"),this.child.style.width=_pEl(this.el).rect().width+"px",this.states.filter()).some())||this.STATES.stick.fn.call(this),this.toggleClass(),this.STATES[this.status].after&&this.STATES[this.status].after.call(this)}},_pSticky.prototype.toggleClass=function(){for(var t in this.STATES)this.STATES[t].name!==this.status&&this.child.classList.remove(this.STATES[t].name);this.child.classList.add(this.status)},_pSticky.prototype.timingLimit=function(){var t=this;"ms"===this.scrollUnit&&(this.scrollTimeout||(this.scrollTimeout=setTimeout((function(){t.STATES.unStick.fn.call(t,!0),t.toggleClass(),t.stopScroll=!0}),this.scrollLimit)))},_pSticky.prototype.css=function(){var t=this,e=this.others();if(this.follow){var i=this.follow instanceof NodeList?Array.prototype.slice.call(this.follow):[this.follow];e=e.concat(i)}e=e.filter((function(e){return t.isOtherStick(e)}));var n=this.spacing||0;n+=e.length>0?Math.max.apply(Math,e.map())):0;var r=e.map((function(t){return parseInt(_pEl(t).styles("z-index"))-1}));return r.push(this.zIndex),{top:n,zIndex:null===this.TYPES[this.type].zIndex?this.TYPES[this.type].zIndex:Math.min.apply(Math,r)}},_pSticky.prototype.isOtherStick=function(t){var e=_pEl(t).rect(),i=_pEl(this.child).rect(),n=_pEl(t).styles("position");return e.top>=0&&e.top<=i.top&&("fixed"===n||"sticky"===n)},_pSticky.prototype.others=function(){var t=this,e=document.querySelectorAll("."+this.BASECLASS+":not("+this.targetSelector+") ."+this.BASECLASS+"_child.banner."+this.STATES.stick.name);return Array.prototype.filter.call(e,(function(e){return t.isOtherStick(e)}))},_pSticky.prototype.subDestroy=function(){this.style&&document.head.contains(this.style)&&document.head.removeChild(this.style),this.child.classList.remove.apply(this.child.classList,this.states.concat(this.BASECLASS,Object.keys(this.TYPES))),this.child.style.top=this.child.style.zIndex=this.child.style.transform=this.child.style.backgroundColor=null,this.el.style.height=null,this.el.style.display=null};var _pDFP=function(t){for(var e in this.name="dfp",window.googletag=window.googletag||{cmd:[]},t)this[e]=t[e];return this.FLOOR_KEY="ufloor",this.hasBeenGlobalTargeted=!1,this}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return npDFP.prototype={EVENTS:{onRender:"slotRenderEnded",onViewed:"impressionViewable",onBeforeRender:"slotResponseReceived",onRequest:"slotRequested"},init:function(t){_pUtils.addScript({id:this.prefix+"-"+this.name,url:"https://securepubads.g.doubleclick.net/tag/js/gpt.js",callback})},onSlotsRegistered:function(t){var e=this;googletag.cmd.push((function(){googletag.pubads().enableSingleRequest(),googletag.pubads().disableInitialLoad(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices();var i=function(t){googletag.pubads().addEventListener(e.EVENTS[t],))};for(var n in e.EVENTS)i(n);t&&t(e.name)}))},define:function(t,e){t.path&&t.sizes&&t.id&&googletag.cmd.push((function(){var i=googletag.defineSlot(t.path,t.sizes,t.id);i&&(i.addService(googletag.pubads()),e&&e(i))}))},render:function(t){var e=this;googletag.cmd.push((function(){e.hasBeenGlobalTargeted||e.log("global targeting not set before first render","warn"),googletag.pubads().refresh(t)}))},setGlobalTargeting:function(t){var e=this;googletag.cmd.push((function(){Object.keys(t).forEach()),e.hasBeenGlobalTargeted||(e.status="global targeted"),e.hasBeenGlobalTargeted=!0}))},getGlobalTargeting:function(){return googletag.pubads().getTargetingKeys().reduce((function(t,e){return t[e]=googletag.pubads().getTargeting(e),t}),{})},clearTargeting:function(t){var e=this;googletag.cmd.push((function(){googletag.pubads().clearTargeting(t),e.status="targeting cleared"+(t?" for key ".concat(t):"")}))},setSlotTargeting:function(t,e,i){googletag.cmd.push((function(){Object.keys(e).forEach()),i(t)}))},clearSlotTargeting:function(t,e){googletag.cmd.push())},getSlotTargeting:function(t){var e={};return t.getTargetingKeys().forEach()),e},getSlotFloorTargeting:function(t){var e={};return t&&(e[this.FLOOR_KEY]=t.toFixed(2)),e},getSlotId,destroy:function(t){googletag.destroySlots(t)}};var _pAmazon=function(t){for(var e in t)this[e]=t[e];return this.allbids=[],this.activebids={},this.renderedbids=[],this.discardedbids=[],this.adunits=[],this.targeting={},this.adunitMapping={},this.BIDTARGETINGREGEX=/amznp/,this};_pAmazon.prototype={adserverVastURL:"https://securepubads.g.doubleclick.net/gampad/ads?env=vp",init:function(t){var e=this;("apstag",window,document,"script"),apstag.init({pubID:this.bidders[0].id,adServer:"googletag",deals:!0,params:{}},(function(){e.adslots.forEach((function(t){return e.buildAdUnits(t)})),t&&t()}))},callBids:function(t,e){var i=this,n=Object.keys(this.adunitMapping).filter((function(e){return t.includes(e)})).reduce((function(t,e){var n=i.adunits.find());return n&&t.push(n),t}),[]);if(0===n.length)return this.log("No adslot detected for Amazon from id(s) [ ".concat(t.join(", ")," ]"),"warning"),void e([]);apstag.fetchBids({slots:n,timeout:this.timeout},(function(t){i.allbids=i.allbids.concat(t),t.forEach((function(t){"2"==t.amznbid&&""==t.amzniid?(i.log("--- Amazon bid rejected â on ".concat(t.slotID," : empty infos ---"),"bid"),i.discardedbids.push(t)):(i.activebids[t.slotID]||(i.activebids[t.slotID]=[]),i.activebids[t.slotID].push(t))})),apstag.setDisplayBids(),e(t)}))},res}},buildAdUnits:function(t){var e=this,i=_pUtils.flattenRTBSizes(t.data.RTBSizes);Object.keys(i).forEach((function(i){var n=_slicedToArray(i.split("|"),2),r=n[0],s=n[1],a={};a.slotID=t.placeholder.id,a.slotName="".concat(e.adserverconf.account,"/").concat(t.data.adUnitPath),"instream"===s&&(a.slotID="videoSlot",a.mediaType="video",delete a.slotName),e.adunitMapping[t.placeholder.id]=a.slotID,e.bidders.forEach((function(i){var n=[];i.slots[r]&&i.slots[r][s]&&(n=n.concat(i.slots[r][s].filter((function(e){return e.code===(t.alias||t.name)})).map((function(t){return t.sizes})))),n.length>0&&(a.sizes=n[0],e.adunits.push(a))}))}))},buildTargeting:function(t){var e=this;this.adslots.filter((function(e){return!t||t.indexOf(e.name)>-1})).forEach((function(t){e.buildSlotTargeting(t)}))},buildSlotTargeting:function(t){this.cleanupActiveBids(t.placeholder.id);var e=this.activebids[t.placeholder.id];if(e&&e.length>0){var i=e[0];e[0].status="targeted",this.targeting[t.name]={amznbid:i.targeting&&i.targeting.amznbid||i.amznbid,amzniid:i.targeting&&i.targeting.amzniid||i.amzniid,amznp:i.targeting&&i.targeting.amznp||i.amznp,amznsz:i.targeting&&i.targeting.amznsz||i.amznsz,amazon:"y"}}},cleanupActiveBids:function(t){if(this.activebids[t])for(var e=this.activebids[t].length-1;e>=0;e--){var i=this.activebids[t][e];"targeted"===i.status&&(this.discardedbids.push(i),this.activebids[t].splice(e,1))}},getTargeting:function(){return this.targeting},repoolB{},buildVideoUrls:function(){var t=this;return Object.keys(this.activebids).filter((function(e){return t.activebids[e].length>0&&t.activebids[e][0].mediaType&&"video"===t.activebids[e][0].mediaType})).reduce((function(e,i){var n=t.adslots.find((function(e){return e.isVideo&&t.adunitMapping[e.placeholder.id]===i}));return e[n.placeholder.id]={vastURL:t.buildVastFromBid(t.activebids[i][0],n),playerId:n.playerId,bids:t.activebids[i][0]},e}),{})},buildVastFromBid:function(t,e){var i={output:"vast",sz:t.size,url:window.location.href,iu:"".concat(this.adserverconf.account,"/").concat(e.data.adUnitPath),cust_params:t.targeting};return i=Object.entries(i).map((function(t){return t.join("=")})).join("&"),this.adserverVastURL+"?"+encodeURIComponent(i)},getSlot:function(t){return this.adslots.find((function(e){return(e.alias||e.name)===t||e.placeholder.id===t}))}};var _pAdunit=function(t){for(var e in t)this[e]=t[e];return this.floors={currency:"EUR",schema:{delimiter:"|",fields:["bidder","mediaType","size"]},values:{}},this.pubstack={adUnitName:this.adUnitName,adUnitPath:this.adUnitPath},t.abTests&&Array.isArray(t.abTests)&&(this.pubstack.tags=t.abTests),this.bids=[],this.mediaTypes={},this};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(_pAdunit.prototype={addFloor:function(t,e){return this.floors.values[t]=e,this.floors},typeMapping:{banner:"banner",outstream:"video",instream:"video"},addMediaType:function(t,e,i){var n=this.typeMapping[e],r={};if("video"===n)r.context=e,r.playerSize=i[0];else{switch(t.position){case"atf":r.pos=1;break;case"btf":r.pos=3;break;default:r.pos=1}r.sizes=i}return this.mediaTypes[n]=r,this.mediaTypes},get isVideo(){return!!this.mediaTypes.hasOwnProperty("video")&&this.mediaTypes.video.context},pushBi)}};var _pPrebid=function(t){for(var e in t)this[e]=t[e];return this.allbids=[],this.activebids={},this.renderedbids=[],this.discardedbids=[],this.renderadids={},this.targeting={},this.RENDERED="rendered",this.TARGETED="targeted",this.BIDTARGETINGREGEX=/hb_adid_([^_])+/,this._bidders=[],this};_pPrebid.prototype={get bidders(){return this._bidders},set bidders(t){var e=JSON.parse(JSON.stringify(t));e=e.reduce((function(t,e){return e.slots.display&&e.slots.display.banner&&e.slots.display.banner.forEach((function(t){if(t.sizes.length>1&&t.sizes.find((function(t){return"1800,1000"===t.join(",")}))){var i=JSON.parse(JSON.stringify(t));i.sizes=i.sizes.filte)})),t.sizes=t.sizes.filte)})),e.slots.display.banner.push(i)}})),t}),e),this._bidders=e},init:function(t){var e=this;this.fetchExchangeRates(),this.fetchPrebidJS();var i=setInterval((function(){e.exchangerates&&e.pbjsLoaded&&(clearInterval(i),e.setup(t))}),200)},fetchPrebidJS:function(){var t=this;_pUtils.addScript({id:this.conf.prefix+"-prebid",url:"".concat(this.conf.lib_url).concat(this.conf.params.site,"/prebid.").concat(this.conf.params.site,".").concat(this.breakpoints.value.name.toLowerCase().replace(" ","-"),".min.js"),async:!0,callback:function(){t.pbjsLoaded=!0},onerror:function(e){_pUtils.addScript({id:t.conf.prefix+"-prebid-default",url:"".concat(t.conf.lib_url,"_default/prebid._default.min.js"),async:!0,callba0}})}})},fetchExchangeRates:function(){var t=this;_pUtils.ajax({url:"https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json",success:function(e){try{t.exchangerates=JSON.parse(e),t.exchangerates=t.exchangerates.conversions}catch(e){t.log("Error retrieving exchange rates","error",!0)}},err)}})},setup:function(t){var e=this;(new _pConsent).initConsentManagementConfig((function(i){var n=window.pbjs||{};n.que=n.que||[],n.onEvent("bidResponse",e.bidResponseListener.bind(e)),n.onEvent("bidWon",e.bidWonListener.bind(e)),n.onEvent("adRenderFailed",(function(t){e.log("Error rendering","error",!0,{errorDetails:"".concat(t.reason," : ").concat(t.message)})}));var r={bidders:"*",filter:"include"},s={image:r,iframe:r};"doctissimo"===e.conf.params.site&&(s.iframe={bidders:"*",filter:"exclude"});var a={auctionDelay:50,syncEnabled:!0,enableOverride:!1,syncDelay:3e3};a.filterSettings=s,a.syncsPerBidder=10,a.userIds=[],"aufeminin"!==e.conf.params.site&&"marmiton"!==e.conf.params.site||(a.userIds.push({name:"id5id",params:{partner:245,pd:"UNIFY_UNIVERSAL_ID"in window?window.UNIFY_UNIVERSAL_ID("id5"):""},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}),a.userIds.push({name:"identityLink",params:{pid:"13678"},storage:{type:"html5",name:"idl_env",expires:90}})),"netmums"===e.conf.params.site&&a.userIds.push({name:"identityLink",params:{pid:"13680"},storage:{type:"html5",name:"idl_env",expires:15}}),"doctissimo"===e.conf.params.site&&e.adslots.som)}))&&(a.userIds.push({name:"id5id",params:{partner:245,pd:"UNIFY_UNIVERSAL_ID"in window?window.UNIFY_UNIVERSAL_ID("id5"):""},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}),a.userIds.push({name:"identityLink",params:{pid:"13678"},storage:{type:"html5",name:"idl_env",expires:90}}));n.setConfig({bidderSequence:"fixed",cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},consentManagement:i,currency:{adServerCurrency:"EUR",defaultRates:e.exchangerates},debugging:{enabled:!!e.debug||!1},deviceAccess:!0,enableSendAllBids:!0,floors:{additionalSchemaFields:{biddr}}},instreamTracking:{enabled:!0},pageUrl:location.href,priceGranularity:{buckets:[{max:.05,increment:.05},{max:8,increment:.01},{max:15,increment:.02},{max:55,increment:.2}]},realTimeData:{auctionDelay:80,dataProviders:[{name:"ias",waitForIt:!0,params:{pubId:"929475"}},{name:"permutive",waitForIt:!0}]},rubicon:{singleRequest:!0},targetingControls:{allowTargetingKeys:["AD_ID","ADOMAIN","BIDDER","CACHE_HOST","CACHE_ID","DEAL","FORMAT","PRICE_BUCKET","SIZE","SOURCE","UUID"]},userSync:a,useBidCache:!0,gvlMapping:{ogury:31}}),n.bidderSettings={standard:{bidCpmAdjustment:function(t,i){var n=t;if(i&&i.bidderCode){var r=e.getBidder(i.bidderCode);if(!r)return e.getBucketedCpm(n);if(r.isGross){r.openCommission&&(n*=1-r.openCommission/100)}r.discrepancy&&(n*=1-r.discrepancy/100)}return e.getBucketedCpm(n)}},ias:{alwaysUseBid:!0,sendStandardTargeting:!0,suppressEmptyKeys:!0,adserverTargeting:[{key:"adt",val:function(t){return t.adt}},{key:"alc",val:function(t){return t.alc}},{key:"dlm",val:function(t){return t.dlm}},{key:"drg",val:function(t){return t.drg}},{key:"hat",val:function(t){return t.hat}},{key:"off",val:function(t){return t.off}},{key:"vio",val:function(t){return t.vio}},{key:"fr",val:function(t){return t.fr}},{key:"id",val:function(t){return t.slots[t.adUnitCode].id}},{key:"vw",val:function(t){return t.slots[t.adUnitCode].vw}},{key:"grm",val:function(t){return t.slots[t.adUnitCode].grm}},{key:"pub",val:function(t){return t.slots[t.adUnitCode].pub}},{key:"vw05",val:function(t){return t.slots[t.adUnitCode].vw05}},{key:"vw10",val:function(t){return t.slots[t.adUnitCode].vw10}},{key:"vw15",val:function(t){return t.slots[t.adUnitCode].vw15}},{key:"vw30",v0}},{key:"ias-kw",v]}}]}},n.bidderSettings.adagio=_objectSpread(_objectSpread({},n.bidderSettings.standard),{},{storageAllowed:!0}),n.bidderSettings.criteo=_objectSpread(_objectSpread({},n.bidderSettings.standard),{},{storageAllowed:!0}),n.bidderSettings.invibes=_objectSpread(_objectSpread({},n.bidderSettings.standard),{},{storageAllowed:!0}),e.bidders.filter((function(t){return t.aliasFrom})).forEac)})),e.adslots.forEach((function(t){return e.buildAdUnits(t)})),t&&t()}))},callBids:function(t,e){var i=this,n=this,r=window.pbjs||{};r.que=r.que||[],t.forEac)})),r.que.pus)}))},reset:function(){var t=window.pbjs||{};t.que=t.que||[],this.targeting={}},filterBiddersForRefresh:function(t){var e=this;return this.bidders.filter((function(i){var n=e.discardedbids.filten})).map((function(t){return t.bidderCode}));return 0===n.length||n.filtee})).length<2})).filter((function(i){var n=e.activebids[t.placeholder.id];return 0===(n=n&&n.length>0?n.filtes})):[]).length}))},buildAdUnits:function(t){var e=this,i=this.revampSlotBidders(t);this.removeAdUnit(t),i.forEach((function(i){var n=new _pAdunit({code:t.placeholder.id,adUnitName:t.alias||t.name,adUnitPath:"".concat(e.adserverconf.account,"/").concat(t.data.adUnitPath),abTests:t.abTests});n.addFloor("*|*|*",t.data.upr),n.addMediaType(t,i.adFormat,i.sizes),Object.keys(i.bidders).forEach((function(r){var s=e.bidders.find((function(t){return t.code===r})),a=s.aliasFrom||s.code,o=s.code.replace(/\W/g,"")in e?s.code.replace(/\W/g,""):a.replace(/\W/g,"");if("function"==typeof e[o]){n.addFloor(a+"|*|*",t.data.upr),t.data.RTBSizes[i.adType][i.adFormat].filter((function(t){return i.sizes.ma)})).includes(t.size.join("x"))})).forEach((function(t){n.addFloor(a+"|"+(n.isVideo?"video":"banner")+"|"+t.size[0]+"x"+t.size[1],t.floor)}));var c=e[o]({code:s.code,adslots:i.bidders[r],floor:_pUtils.getMinFloor(t.data.RTBSizes[i.adType][i.adFormat]),mediaType:i.adFormat,slotId:t.placeholder.id});c&&"object"===_typeof(c)?n.pushBids(c):"string"==typeof c&&e.log(c,"error",!0)}})),window.pbjs.addAdUnits(n)}))},revampSlotBidders:function(t){return this.filterBiddersForRefresh(t).reduce((function(e,i){return Object.keys(i.slots).forEach((function(n){Object.keys(i.slots[n]).forEach((function(r){i.slots[n][r].filte)})).forEach((function(t){var s=t.sizes.sor]})),a=e.find((function(t){return t.sizes.join(",")===s.join(",")&&t.adFormat===r}));a||(a={sizes:s,adType:n,adFormat:r,bidders:{}},e.push(a)),a.bidders[i.code]=a.bidders[i.code]||[],a.bidders[i.code].push(t)}))}))})),e}),[])},removeAdUnit:function(t){pbjs.adUnits.forEach((function(e){e.code===t.placeholder.id&&pbjs.removeAdUnit(t.placeholder.id)}))},getExchangeRate:function(t,e){var i=1;return t===e||(i=this.exchangerates.hasOwnProperty(e)?1/this.exchangerates[e][t]:1/this.exchangerates.USD[e]*this.exchangerates.USD[t]),i},getBidd)},bidResponseListener:function(t){t.netOriginalCpm=Math.round(100*t.originalCpm)/100,t.cpm>55&&this.log("High cpm found","warning",!0,{bid:t,sampleRate:100,sampled:!1,service_name:"HB"});var e=t.adUnitCode.replace((this.conf.prefix?this.conf.prefix+"_":"")+"placeholder_",""),i=e.match(/^(.*)_\d+$/),n=i&&i.length>1?i[1]:"",r=this.adslots.finn})),s=r&&r.data&&r.data.upr;s||this.log("Unknown UPR","warning",!0,{errorDetails:e});var a=this.getSizeFloor(r.data,t.mediaType,t.size);return this.allbids.push(t),t.size?s&&t.cpm<s?(this.log("--- Below UPR â ".concat(t.bidder," on ").concat(e," : cpm (").concat(t.cpm,") < upr (").concat(s,") [adId = ").concat(t.adId,"] ---"),"bid"),t.reason="upr",void this.discardedbids.push(t)):("teads"===t.bidder&&"1x1"===t.size||a||this.log("Unknown size floor","warning",!0,{errorDetails:"".concat(t.bidder," on ").concat(e," (").concat(t.mediaType,") - size: ").concat(t.size," - ").concat(this.conf.params.device||this.conf.params.width+"px")}),t.cpm<a?(this.log("--- Below floor â ".concat(t.bidder," on ").concat(e," : cpm (").concat(t.cpm," â¬) < floor (").concat(a,") [adId = ").concat(t.adId,"] ---"),"bid"),t.reason="floor",void this.discardedbids.push(t)):(this.activebids[t.adUnitCode]||(this.activebids[t.adUnitCode]=[]),void this.activebids[t.adUnitCode].push(t))):(t.floorData=t.floorData||{cpmAfterAdjustments:"missing",floorValue:"missing"},this.log("--- Floor module  â ".concat(t.bidder," on ").concat(e," : cpm (").concat(t.netOriginalCpm," ").concat(t.originalCurrency," --\x3e ").concat(t.floorData.cpmAfterAdjustments," â¬) < floor (").concat(t.floorData.floorValue," â¬) [adId = ").concat(t.adId,"] ---"),"bid"),t.reason="floor",void this.discardedbids.push(t))},getTargeting:function(){return this.targeting},buildTargeting:function(t){var e=this;this.adslots.filter((function(e){return!t||t.indexOf(e.name)>-1})).forEach((function(t){e.buildSlotTargeting(t);var i=window.pbjs.getAdserverTargeting()[t.placeholder.id];i&&(i.iasId=i.id,_pUtils.extend(e.targeting[t.fullname],i))}))},buildSlotTargeting:function(t){var e=this;this.cleanupActiveBids(t.placeholder.id);var i=this.activebids[t.placeholder.id],n={};if(i&&i.length>0){var r={},s=null;i.forEach((function(t){t.status!==e.TARGETED&&t.status!==e.RENDERED&&(r[t.bidderCode]?r[t.bidderCode]&&t.cpm>r[t.bidderCode].cpm&&(r[t.bidderCode]=t):r[t.bidderCode]=t,s?s&&t.cpm>s.cpm&&(s=t):s=t)})),s&&(s.status=this.TARGETED,_pUtils.extend(n,this.buildBidTargeting(s,!0))),Object.keys(r).forEach((function(t){r[t].status=e.TARGETED,_pUtils.extend(n,e.buildBidTargeting(r[t]))}))}this.targeting[t.fullname]=n},buildBidTargeting:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={};if(null!==t&&(i[this.getTargetingKey("hb_format",t.bidderCode)]=t.mediaType,i[this.getTargetingKey("hb_source",t.bidderCode)]=t.source,i[this.getTargetingKey("hb_size",t.bidderCode)]=t.size,i[this.getTargetingKey("hb_pb",t.bidderCode)]=t.cpm.toFixed(2),i[this.getTargetingKey("hb_adid",t.bidderCode)]=t.adId,i[this.getTargetingKey("hb_crid",t.bidderCode)]=t.creativeId,i[this.getTargetingKey("hb_bidder",t.bidderCode)]=t.bidderCode,e)){i.hb_format=t.mediaType,i.hb_source=t.source,i.hb_size=t.size,i.hb_pb=t.pbCg,i.hb_adid=t.adId,i.hb_crid=t.creativeId,i.hb_bidder=t.bidderCode,i.relLift=t.cpm;var n="0000"+Math.floor(100*t.cpm);n=n.substr(n.length-4),i.MaxBid=n}return i},getTargetingKey:function(t,e){return(t+"_"+e).substring(0,20)},bidWonListener:function(t){if(this.log("4) --- Bid won ð for ".concat(t.adUnitCode," : ").concat(t.bidder," ---"),"bid"),this.log({var:[t],params:["bidderCode","cpm","currency","adUnitCode","size","status"]},"table"),"function"==typeof this["render"+t.bidder]){var e=document.getElementById(t.adUnitCode);this["render"+t.bidder](t,e)}Object.keys(this.renderadids).includes(t.adId)?(this.renderadids[t.adId]+=1,this.log("Duplicate adid sent to GAM","warning",!0,{errorDetails:"".concat(t.bidder," - ").concat(t.adUnitCode," - ").concat(t.adId," - ").concat(this.renderadids[t.adId]," times")})):this.renderadids[t.adId]=1,this.renderedbids.push(t)},cleanupActiveBids:function(t){var e=(new Date).getTime();if(this.activebids[t])for(var i=this.activebids[t].length-1;i>=0;i--){var n=this.activebids[t][i],r=n.status===this.RENDERED,s=n.responseTimestamp+1e3*n.ttl+1e3<e;s&&(n.reason="ttl",this.discardedbids.push(n)),(s||r)&&this.activebids[t].splice(i,1)}},repoolBid:function(t,e){var i=this.activebids[e.placeholder.id],n=i?i.find((function(e){return e.adId===t})):null;n&&(n.status=null,this.log("Repooled bid from ".concat(n.bidder," with cpm of ").concat(n.cpm," â¬ with adid ").concat(n.adId," after he lost against direct or adX"),"info"))},getBucketedCpm:function(t){for(var e=0,i=pbjs.getConfig().customPriceBucket.buckets,n=0;n<i.length;n++){var r=i[n];if(t>=e&&t<r.max){var s=(t-e)/r.increment,a=e+Math.floor(s)*r.increment;return Number(a.toFixed(2))}e=r.max}return i[i.length-1].max},getMinTimeout:function(){var t=null;return this.adslots.forEach((function(e){e.data.plugins&&e.data.plugins.refresh&&e.data.plugins.refresh.presence&&(t=null===t?e.data.plugins.refresh.presence:Math.min(t,e.data.plugins.refresh.presence))})),t},getSizeFloor:function(t,e,i){var n=0;if(t&&e&&i){var r=i.split("x"),s=t.RTBSizes,a={banner:{display:["banner","outstream"]},video:{video:["preroll","midroll","postroll"]}}[e];a&&Object.keys(a).forEach((function(t){a[t].forEach((function(e){s[t]&&s[t][e]&&s[t][e].forEach((function(t){t.size[0]===parseInt(r[0])&&t.size[1]===parseInt(r[1])&&(n=t.floor)}))}))}))}return n},buildVideoUrls:function(t){var e=this,i=Object.keys(this.activebids);return t=t||{},pbjs.adServers&&pbjs.adServers.dfp?pbjs.adUnits.filter((function(t){return i.indexOf(t.code)>-1&&t.isVideo&&"instream"===t.isVideo})).reduce((function(i,n){var r=pbjs.adServers.dfp.buildVideoUrl({adUnit:n,params:{iu:n.adUnitPath,output:"vast",cust_params:t}});return i[n.code]={vastURL:r,playerId:e.getSlot(n.code).playerId,bids:e.activebids[n.code]},i}),{}):[]},getSlot:function(t){return this.adslots.find((function(e){return(e.alias||e.name)===t||e.placeholder.id===t}))}};var _p=function(t){var e=this;return this.VERSION="0.4.1",this.KEY="cGVnYXN1cw==",this.conf=_pUtils.extend({params:{exclude:[],include:[]},prefix:"",selectors:{adSlot:"[data-ad]",container:"[data-ad-container]",placeholder:"[data-ad-placeholder]"},lib_url:"https://pegasus.unifygroup.com/lib/",third_party:!1},t),this.locker=new _pLocker(this.conf.prefix),this.initAbTests(),this.verifyDeprecatedParams(),this.perf=_pPerf.init({prefix:this.conf.prefix}),this.adslots=[],this.breakpoints=new _pBreakpts(this.conf.prefix),this.user=new _pUser({breakpoint:this.breakpoints.name,device:_pDetector.get()}),Object.defineProperty(this,"consent",{_value:null,get:function(){retuis.emit("consent")}}),this.fetchData((function(){e.HB_TIMEOUT=2e3,e.ADSERVER_TIMEOUT=3e3,e.SLOT_MINPRESENCE=3e3,e.RENDER_MINTIME=1e3,e.setData("slots.banner_atf.plugins",{roadblock:!0}),e.setData("slots.300_atf.plugins",{roadblock:!0});var t=Object.keys(e.getData("slots")).some((function(t){return e.getData("slots")[t].plugins&&e.getData("slots")[t].plugins.refresh&&(e.getData("slots")[t].plugins.refresh.presenceTimer||e.getData("slots")[t].plugins.refresh.viewabilityTimer)}));e.REFRESH_PRESENCE_KEY="presence".concat(t?"Timer":""),e.REFRESH_VIEWABILITY_KEY="viewability".concat(t?"Timer":"");var i=Object.keys(e.getData("slots")).some((function(t){return e.getData("slots")[t].plugins&&e.getData("slots")[t].plugins.lazyload&&e.getData("slots")[t].plugins.lazyload.viewports}));e.LAZYLOAD_VIEWPORT_KEY=i?"viewports":"nbViewports",e.init()})),this};function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}_p.fn=_p.prototype,_p.fn.init=function(){var t=this;this.perf.start("init"),this.initialized=!0,this.debugFilter=this.browserExt(),this.log("Version : ".concat(this.VERSION));var e=this.locker.getUserToken();e&&e.userIdentifier&&this.log("Welcome ".concat(e.userIdentifier),"test"),this.on("adServerStatus",(function(e){t.log("Ad Server - ".concat(e.adserver," - ").concat(e.status),"info")})),this.on("headerBiddingStatus",(function(e){t.log("Header Bidding - ".concat(e.hbwrapper," - ").concat(e.status),"info")})),this.log("Init Tag Manager"),this.tagManager=new _pTM({prefix:this.conf.prefix,tags:this.getData("tagging")}),t executed"),"ptm")})),this.log("Init Realtime monitor");var i=Object.keys(this.getData("hedding")[e]return t.concat(e)}),[]);return this.monitor=new _pMonitor(i,this.conf.params,this.breakpoints),this.monitor.fireEvent(this.monitor.INIT_TYPE,{type:"init",pageKeywords:this.getPageKeywords()}),this.initRequirements(),this.cmd.init(this.conf.cmd),"aufeminin"===pegasus.conf.params.site&&this.user.run((function(e){t.monitor.fireEvent(t.monitor.USER_INFOS,{type:"user_infos",data:e.report})})),this.watcher.watch.apply(this),this.setStyles(),this.adServerInit(),this.checkClsStylesheet(),this.query(),this.lazyload(),this.hasHB()&&this.headerBiddingInit(),this.log("Init Visibility event detection"),_pDocument.visibility((function(e){t.adslots.forEach((function(t){t.refresh&&t.refresh.timers&&t.refre?t.stop():t.run()}))}))})),localStorage.getItem(this.conf.prefix+":console")&&this.openConsole(),this.perf.end("init"),this},_p.fn.log=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;if(this.locker.get()||i)return this.logger=this.logger?this.logger:new _pLogger(this.conf.prefix,{VERSION:this.VERSION}),i&&this.logger.trackError(t,n),this.locker.get()&&this.locker.getUserToken()?this.logger.log(t,e):void 0},_p.fn.getConsent=function(){return!(void 0===this.getData("waitForConsent")||this.getData("waitForConsent"))||this.consent},_p.fn.openConsole=function(){var t=this;if(this.console)this.console.openClose();else{var e=this.locker.getUserToken();e?_pUtils.addScript({id:this.conf.prefix+"Console",url:this.conf.lib_url+"pegasus.console.min.js",callback:function(){t.console=new _pConsole({prefix:t.conf.prefix,collapsed:localStorage.getItem(t.conf.prefix+":console"),adslots:t.adslots,user:e})}}):this.log("User token invalid : abort console opening","warning")}},_p.fn.hasHB=function(){return!this.conf.third_pary&&"headerBiddingInit"in this&&this.data.headerbidding&&Object.keys(this.data.headerbidding).length>0},_p.fn.initAdStack=function(){var t=this;this.initAbTests(),this.adServerInit(),this.hasHB()&&this.headerBiddingInit(),this.documentReadyState=document.readyState,this.isDomReady="loading"!==this.documentReadyState,document.onreadystatechange=function(){t.documentReadyState=document.readyState,"loading"===t.documentReadyState||t.isDomReady||(t.isDomReady=!0,t.emit("DOMReady"))}},_p.fn.addParams=function(t){this.conf.params=_pUtils.extend(this.conf.params,t),this.emit("paramsChanged",t)},_p.fn.verifyDeprecatedParams=function(){this.conf.params.device&&this.log('Deprecated configuration : The "device" parameter is not necessary anymore.',"warning",!0),this.conf.slots&&this.log('Deprecated configuration : The "slots" array is not necessary anymore.',"warning",!0)},_p.fn.getWrapperStatus=function(t,e){var i=this;return this[t]&&Object.keys(this[t]).length>0&&e&&Object.ki[t][n].status===e}))},_p.fn.ABTESTS={userSession:function(){var t=sessionStorage.getItem("".concat(this.conf.prefix,"_abTests"));t||(t=Math.random()<.5?"true":"false",sessionStorage.setItem("".concat(this.conf.prefix,"_abTests"),t));var e=_pUtils.capitalize(pegasus.conf.params.site);return{key:"AB_".concat(e,"Useb",value:"legacy"}}},_p.fn.initAbTests=function(){var t=this;this.abTests={},this.getConsent()?(sessionStorage.setItem("".concat(this.conf.prefix,"_AB_Test_use_legacy"),"true"),this.abTests=Object.keys(this.ABTESTS).reduce((function(e,i){var n=t.ABTESTS[i].apply(t);return e[n.key]=n.value,e}),{}),this.adslots.forEach((function(e){return t.setAdslotAbTest(e)}))):this.log("AbTests - No consent received")},_p.fn.setAdslotAbTest=function(t){var e=this;t.abTests=t.abTests||[],Object.keys(this.abTests).forEach((function(i){t.abTests.push("".concat(i,":").concat(e.abTests[i]))}))},_p.ing.adops")||"ops"},_p.fn.isPrerollDisabled=function(){var t=this.filteredRunningAdops();return t.length>0&&t.some((function(t){return t.disableAdPreroll}))},_p.fn.filteredRunningAdops=function(){var t=this.getData("adops")t.currentlyRunning}))},_p.fn.setAdops=function(){var t=this.filteredRunningAdops();if(t&&0!==t.length){this.log("Adops #".concat(t[0].tagid," detected"),"test");var e=this.getDataLayer(this.getAdopsVariable());e&&(e=this.getDataLayer(this.getAdopsVariable(),{id:t[0].tagid,name:t[0].name,author:t[0].author,brand:t[0].brand})),this.addCustomKeyword("ops_tag",[t[0].tagid]),this.setAdopsLabel(t[0])}},_p.fn.isSlotAdopsBlocked=function(t){var e=!1,i=this.filteredRunningAdops();return!(this.slotNameIsVideo(t)&&!this.isPrerollDisabled())&&(i&&i.length>=1&&(e=!0,i.forEach((function(i){void 0!==i.slots&&-1!==i.slots.indexOf(t)&&(e=!1)}))),e)},_p.fn.setAdopsLabel=function(t){var e=document.querySelector("[data-ad-ops-label]");if(e&&t.hasLabel&&t.labelTxt){var i="<span>".concat(t.labelTxt,"</span>");t.landingPage&&(i='<a href="'.concat(t.landingPage,'" target="_blank" rel="nofollow">').concat(t.labelTxt,"</a>")),e.innerHTML=i}},_p.fn.adServerInit=function(){var t=this;this.getConsent()?this.checkRequirements(this.REQUIREMENT_BLOCKS_INIT)?(this.log("Init Adserver (consent received)"),this.adServers=this.setAdServers(),Object.keys(this.adServers).forEach((function(e){t.perf.start("".concat(e,"_init")),t.adServers[e].init((function(){t.perf.end("".concat(e,"_init")),t.adServers[e].status="created",t.adServers[e].setGlobalTargeting(t.getEnrichedKeywords()),t.adServers[e].timeout=t.hasHB()&&setTimeout((function(){(0===Object.keys(t.hbwrappers).length||Object.keys(wrappers[e].status})))&&(t.adServers[e].status="timedOut")}),t.ADSERVER_TIMEOUT)}))}))):this.log("Adserver - Requirements not met"):this.log("Adserver - No consent received")},_p.fn.setAdServers=function(){var t=this,e={},i=this;return Object.keys(this.data.adserver).forEach((function(n){var r=new(window["_p"+n.toUpperCase()])({prefix:t.conf.prefix,device:t.breakpoints.name,paramon(n(e,i,n){t[e](i,n)}});Object.defineProperty(r,"status",{_value:"created",set:function(t){this._value=t,i.emit("adServerStatus",{adserver:n,status:t})},get:function(){return this._value}}),e[n]=r})),e},_p.fn.defineSlot=function(t){if(!t.adslot)if(t.data)if(t.data.adUnitPath){if(this.adServers&&this.adServers[t.adserver])return this.adServers[t.adserver].define({path:"/"+this.getData("adserver."+t.adserver+".account")+"/"+t.data.adUnitPath,sizes:_pUtils.flattenSizes(t.data.adUnitSizes),id:t.plact.status="defined"})),t}else this.log("AdUnitPath missing in conf.","error",!0,{errorDetails:t.div.id});else this.log("Adslot missing in conf.","error",!0,{errorDetails:t.div.id})},_p.fn.defineAdslots=function(t,e){var i=this,n=[];t.forEach((function(r){i.defineSlot(r),n.push(r),t.length===n.length&&e&&e()}))},_p.fn.renderQue=[],_p.fn.renderLine=[],_p.fn.toRenderQue=function(t){var e=this;t&&0!==t.length&&(t=t.filter((function(t){if(!(e.renderQue.indexOf(t)>-1)&&e.isRefreshCleared(t)&&"targeted"===t.status&&(!t.data.plugins.lazyload||t.isInView()||0!==t.history.length&&!t.data.plugins.lazyload.fromRefresh)&&!(t.lastHistory&&t.lastHistory.timestp&&Date.now()-t.lastHistory.timestp<e.RENDER_MINTIME||e.conf.params.exclude&&e.conf.params.exclude.indexOf(t.name)>-1||e.conf.params.include&&e.conf.params.include.length>0&&e.conf.params.include.indexOf(t.name)<0||t.lastHistory&&t.lastHistory.ongoingrender))return t.history.push({ongoingrender:!0}),e.renderQue.push(t),e.renderLine=e.renderLine.filter((function(e){return e!==t})),t}))).length>0&&this.render(t)},_p.fn.render=function(t){var e=this;t=void 0===(t=(t="string"==typeof eturn e.getSlot(t)})):t)instanceof _pSlot?[t]:t)?this.adslots:t,Object.keys(this.adServers).forEach((funcurn t.adserver===i})).map((function(t){return t.adslot})),e.adServers[i].render(t)}))},_p.fn.setSlotTargeting=function(t,e){var i=this.hasHB()?this.getHBTargeting(t.fullname):{};i=this.adxBooster(i),this.setSlotUPR(t,i);var n=this.adServers[t.adserver].getSlotFloorTargeting(t.lastUPR),r=_pUtils.extend(i,n);r.last_adunit=t.name,r.placeholderId=t.placeholder.id,localStorage.getItem("adsDebug")&&(r.adsDebug=localStorage.getItem("adsDebug"),r.adsDebug="string"==typeof r.adsDebug?[r.adsDebug]:r.adsDebug),0!==Object.keys(r).length?(t.index&&(r.index=t.index),r.refresh=t.history.length.toString(),this.clearSlotTargeting(t),this.adServers[t.adserver].setSlotTa="targeted",e&&e()}))):e&&e()},_p.fn.setAdslotsTargeting=function(t,e){var i=this,n=[];t.forEach((function(r){i.setSlotTargeting(r,(function(){n.push(r),n.length===t.length&&e()}))}))},_p.fn.clearSlotTargeting=function(t,e){this.adServers[t.adserver].clearSlotTargeting(t.adslot,e)},_p.fn.getSlotFromAdserver=function(t,e){var i=this.adServers[t].getSlotId(e.slot);return this.getSlot(i)},_p.fn.onRender=function(t,e){var i=this.getSlotFromAdserver(t,e);if(i){if(i.lastHistory.targeting=this.adServers[t].getSlotTargeting(i.adslot),i.lastHistory.adserver=e,i.lastHistory.timestp=Date.now(),delete i.lastHistory.ongoingrender,i.history.length>1){var n=i.history[i.history.length-1],r=i.history[i.history.length-2];if(n.timestp-r.timestp<this.RENDER_MINTIME)this.log("Adslot refresh happened too fast","error",!0,{errorDetails:"".concat(i.div.id," -  ").concat(((n.timestp-r.timestp)/1e3).toFixed(2)," seconds")});else{var s=i.name+" refreshed after "+((n.timestp-r.timestp)/1e3).toFixed(2)+" seconds";this.log(s,"info")}}"rendered"!==this.adServers[t].status&&(this.adServers[t].status="rendered"),this.perf.end("firstRender",i.fullname),i.status="rendered",i.inActiveView=!1,delete i.forceReady,this.renderQue=thion(t){return t!==i})),this.emit("adRenderEnded",{slot:i,event:e}),this.monitor.fireEvent(this.monitor.RENDER_TYPE,e,i),this.monitor.fireEvent(this.monitor.INIT_TYPE,{type:"first_render",pageKeywords:this.getPageKeywords()},i)}},_p.fn.onBeforeRender=function(t,e){var i=this.getSlotFromAdserver(t,e);i&&e.slot.getResponseInformation()&&(this.onBeforeRenderSlotCls(i),_toConsumableArray(i.containerner.removeChild(t)})))},_p.fn.onRequest=function(t,e){var i=this.getSlotFromAdserver(t,e);i&&e.slot.getSlotElementId()&&this.monitor.fireEvent(this.monitor.INIT_TYPE,{type:"first_request",pageKeywords:this.getPageKeywords()},i)},_p.fn.onViewed=function(t,e){var i=this.getSlotFromAdserver(t,e);i&&(i.inActiveView=!0,this.log("".concat(i.name).concat(i.index?" #".concat(i.index):""," viewed"),"info"))},_p.fn.onSlotsRegistered=function(t){var e=this,i=[];Object.keys(this.adServers).forEach((function(n){e.adServers[n].slotsRegistered?t():e.adServers[n].onSlotsRegistered((function(r){i.push(r),e.adServers[n].slotsRegistered=!0,Object.keys(adServers[t].name)}))&&t()}))}))},_p.fn.hasFirstRendered=function(){return!!this.conf.third_party|t.history.length>0}))},_p.fn.firstRender=function(t){var e=this;(t=(t=void 0===t?this){returnender",t.fullname)})),this.defineAdslots(t,(function(){e.onSlotsRegistered((function(){t=t.filter((function(t){return t.isRequired||!t.data.plugins.lazyload||t.inViewportHB||"atf"===t.position})),e.setAdslotsTargeting(t,(function(){t=t.filter((function(t){return t.isRequired||!t.data.plugins.lazyload||"atf"===t.position||t.isInView()})),e.toRenderQue(t)}))}))}))},_p.fn.isRTB=function(t){var e=this;if(this.hasHB()){var i=[];return Object.keys(this.hbwrappers).forEach((function(t){i=e.hbwrappers[t].bidders.filter((function(t){return t.ant(t.advertiserId)})).concat(i)})),i.indexOf(t.lastHistory.adserver.advertiserId)>-1}},_p.fn.getBidderFromAdvertiserId=function(t){var e=this;return Object.keys(this.getData("headerbidding")).reduce((function(t,i){return t=t.concat(e.data.headerbidding[i].b.advertiserId)===t}))},_p.fn.updateGlobalTargeting=function(){var t=this;this.adServers&&Object.keys(this.adServers).filter((function(e){return t.adServers[e].hasBeenGlobalTnrichedKeywords())}))},_earTargeting(t)}))},_p.fn.getGlobalTargeting=function(){var t=this,e={};return Object.keys(this.adServers).forEach((function(i){return Object.assign(e,t.adServers[i].getGlobalTargeting())})),e},_p.fn.adxBooster=function(t){t=JSON.parse(JSON.stringify(t||{}));return Object.keys(t).filter((function(e){return e.indexOf("hb_pb")>-1&&Number(t[e])<=1.5})).forEach((function(e){t["old_".concat(e)]=t[e],t[e]=Number(1.3*t[e]).toFixed(2).toString()})),t},_p.fn.hasBlocker=function(){var t=this.getData("keywords.mapping.adblocker")||"user.adBlocker";return 1===this.getDataLayer(t)||this.isScoutBlocked()},_p.fn.isScoutBlocked=function(){var t=document.createElement("div");t.innerHTML="&nbsp;",t.id="google_ads_iframe_/".concat(Math.floor(1e9*Math.random()),"/zezeazdae/zrgffdvisubviu"),t.className="page-ad right-ad single-ad squareAd top_ad adPanel ad_728x90 adbanner bannerAd box_ads",t.style="width:1px;height:1px;position:absolute",document.body.appendChild(t);var e=0===t.offsetHeight&&0===t.offsetWidth;return document.body.removeChild(t),e},_p.fn.on.div.dataset.adCls},_p.fn.onRenderSlotCls=function(t){t.cls&&((t.isEmpty()&&!t.cls.keep||t.lastPlugins.skin&&!t.lastPlugins.skin.mobile)&&(t.div.style.minHeight=null),delete t.div.dataset.adCls)},_p.fn.checkClsStylesheet=function(){var t=document.createElement("div");t.dataset.adCls=!0,document.body.appendChild(t),this.hasClsStylesheet=t.offsetHeight>0,document.body.removeChild(t)};var _pCmd=function(){return this.queues={},this.states={},thisypeof t})(t)}_pCmd.prototype={push:function(t){var e=this;"function"==typeof t&&(this.queues.init=this.queues.init||[],this.queues.init.push(t),this.states.init&&this.run()),"object"===_typeof(t)&&Object.keys(t).forEach((function(i){e.queues[i]=e.queues[i]||[],e.queues[i].push(t[i]),e.states[i]&&e.run(i)}))},init:function(t){var e=this;this.queues.init=[],t&&Array.isAction(t){e.push(t)})),this.run()},run:function(t,e){var i=this;t=t||"init",this.states[t]=!0,e&&(this.arguments[t]=e),this.queues[t]&&(this.queues[t].forEach((function(e,n){"function"==typeof e&&e(i.arguments[t])})),/^on/.test(t)||(this.queues[t]=[]))}},_p.fn.cmd=new _pCmd,_p.prototype.confBackup={adserver:{dfp:{account:229683329,currency:"EUR"}},adops:[],slots:{"300_atf":{adUnitSizes:{display:{banner:[[1,1],[120,600],[160,600],[300,250],[300,600],"fluid"]}},RTBSizes:{display:{banner:[]}},upr:.4,position:"atf",adUnitPath:"websiteNameToReplace/organic/others/300_atf",multiple:!1,plugins:{},conditions:null,adserver:"dfp",label:null},"300_mtf":{adUnitSizes:{display:{banner:[[1,1],[120,600],[160,600],[300,250],[300,600],"fluid"]}},RTBSizes:{display:{banner:[]}},upr:.2,position:"mtf",adUnitPath:"websiteNameToReplace/organic/others/300_mtf",multiple:!1,plugins:{},conditions:null,adserver:"dfp",label:null},banner_atf:{adUnitSizes:{display:{banner:[[1,1],[728,90],[840,150],[970,250],[980,250],[1e3,300],[1e3,250],[1e3,90],[1800,1e3],"fluid"]}},RTBSizes:{display:{banner:[]}},upr:.3,position:"atf",adUnitPath:"websiteNameToReplace/organic/others/banner_atf",multiple:!1,plugins:{},conditions:null,adserver:"dfp",label:null},"300_diapodynamic":{adUnitSizes:{display:{banner:[[1,1],[120,600],[160,600],[300,250],[300,600],"fluid"]}},RTBSizes:{display:{banner:[]}},upr:.2,position:"mtf",adUnitPath:"websiteNameToReplace/organic/others/300_diapodynamic",multiple:!0,plugins:{},conditions:null,adserver:"dfp",label:null},dyninfeed:{adUnitSizes:{display:{banner:[[1,1],[300,250],"fluid"],outstream:[[640,360]]}},RTBSizes:{display:{banner:[]}},upr:.35,position:"mtf",adUnitPath:"websiteNameToReplace/organic/others/dyninfeed",multiple:!0,plugins:{},conditions:null,adserver:"dfp",label:null}},headerbidding:[],keywords:{variable:"unify_dataSlayer",mapping:{section:"page.section",subsection:"page.subsection",contenttype:"content.type",site:"site.sid"}},tagging:{activation_consent_BACKUP:{time_to_listen:0,script:"window.didomiEventListeners = window.didomiEventListeners || [];\n    window.didomiEventListeners.push({\n    event: 'consent.changed',\n    listener: function () {\n        if (Didomi.getUserConsentStatusForVendor('google') === true) {\n            window.pegasus = window.pegasus || { cmd: [] };\n            window.pegasus.cmd.push(function() {\n                pegasus.consent = true;\n            });\n        }\n    }\n    });\n    window.didomiOnReady = window.didomiOnReady || [];\n    window.didomiOnReady.push(function (Didomi) { \n        if (Didomi.getUserConsentStatusForVendor('google') === true) {\n            window.pegasus = window.pegasus || { cmd: [] };\n            window.pegasus.cmd.push(function() {\n                pegasus.consent = true;\n            });\n        }\n    });",conditions:null},watson_BACKUP:{time_to_listen:100,script:"window.watsonInitialized = window.watsonInitialized || false; window.watsonReturnsData = window.watsonReturnsData || false; (function watsonEnrichment () {\n    var WATSON_API_KEY = '4e5b0fa2-7bd9-49af-ab13-c2f3053964d5';\n    function transform (data, element) {\n        var THRESHOLD = 0.7;\n        var LIMIT = 30;\n        if (!data || !Array.isArray(data[element])) {\n            return null\n        }\n        return data[element].filter(function (elem) {\n            return elem.relevance >= THRESHOLD\n        }).map(function (elem) {\n            return elem.text\n        }).slice(0, LIMIT)\n    }\n    if (window.watsonInitialized || (typeof window.Didomi.getUserConsentStatusForVendor) !== 'function') {\n        return;\n    }\n    window.watsonInitialized = true;\n    var pageUrl = encodeURIComponent(window.location.protocol + '//' + document.domain + document.location.pathname)\n    var url = 'https://api.permutive.com/v2.0/watson?classify=true&url=@@URL@@&k=@@API_KEY@@';\n    url = url.replace('@@URL@@', pageUrl);\n    url = url.replace('@@API_KEY@@', WATSON_API_KEY);\n    var request = new window.XMLHttpRequest();\n    request.open('GET', url, true);\n    request.onload = function () {\n        try {\n            var data = JSON.parse(request.response);\n            var concepts = transform(data, 'concepts');\n            var sentiment = null;\n            if (data.sentiment && data.sentiment.document) {\n                sentiment = data.sentiment.document.label + ' | '+ data.sentiment.document.score;\n            }\n            window.googletag = window.googletag || {};\n            window.googletag.cmd = window.googletag.cmd || [];\n            window.googletag.cmd.push(function() {\n                window.googletag.pubads().setTargeting('watson_concepts', concepts);\n                if (sentiment !== null) {\n                    window.googletag.pubads().setTargeting('watson_sentiment', sentiment);\n                }\n            });\n            window.unify_dataSlayer = window.unify_dataSlayer || [];\n            window.unify_dataSlayer.push(data);\n            window.watsonReturnsData = true;\n        } catch (e) {}\n    };\n    request.send();\n})();",conditions:{operands:[{key:"site",operator:"eq",val:"doctissimo"},{key:"site",operator:"eq",val:"aufeminin"}],operator:"OR"}},content_keywords_BACKUP:{time_to_listen:0,script:"var main_cleanup_regexp = new RegExp(/[-_:;,\\'\\.#\\(\\)\\[\\]=+?!\"&$â¬*% ]/g); var content_keywords = document.title.toLowerCase().replace(main_cleanup_regexp, ','); if (typeof(document.getElementsByTagName) === 'function') {var h1s = document.getElementsByTagName('h1');for (var i = 0; i < h1s.length; i++) content_keywords += ' ' + h1s[i].innerText;var metas = document.getElementsByTagName('meta');for (var i = 0; i < metas.length; i++) {if (metas[i].getAttribute('name') === 'keywords') content_keywords += ' ' + metas[i].getAttribute('content');}} content_keywords = content_keywords.toLowerCase().replace(main_cleanup_regexp, ' '); content_keywords = content_keywords.replace(/[Ã Ã¡Ã¢Ã£Ã¤Ã¥]/g, 'a').replace(/[Ã¨Ã©ÃªÃ«]/g, 'e').replace(/[Ã¬Ã­Ã®Ã¯]/g, 'i').replace(/[Ã²Ã³Ã´ÃµÃ¶Ã¸]/g, 'o'); content_keywords = content_keywords.replace(/[Ã¹ÃºÃ»Ã¼]/g, 'u').replace(/[Ã¿]/g, 'y').replace(/[Ã§]/g, 'c').replace(/[Ã±]/g, 'n'); var content_keywords_tab = content_keywords.split(' ').sort(); var content_keywords_clean = new Array(); for (var i = 0; i < content_keywords_tab.length; i++) {if (content_keywords_tab[i].length >= 3) {if (typeof(content_keywords_clean.includes) !== 'function' || !content_keywords_clean.includes(content_keywords_tab[i])) {content_keywords_clean.push(content_keywords_tab[i]);}}} content_keywords = content_keywords_clean.join(','); if (content_keywords) {window.pegasus = window.pegasus || { cmd: [] };window.pegasus.cmd.push(function() {pegasus.conf.params.keywords += ';content_keywords=' + content_keywords + ';';});}",conditions:null},pubstack_BACKUP:{time_to_listen:500,script:"(function() {var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://boot.pbstck.com/v1/tag/pubstackIdToReplace';document.getElementsByTagName('head')[0].appendChild(s);})();",conditions:null}}},_p.fn.getData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.completeData:_pUtils.parser(this.data,t)},_p.fn.setData=function(t,e,i){var n=this;(i="string"==typeof(i=i||[])?i.split(","):i).length>0?i.forEach((function(i){document.location.hostname.indexOf(i)>-1&&_pUtils.extend(n.getData(t),e)})):_pUtils.extend(this.getData(t),e)},_p.fn.fetchData=function(t){var e=this;this.perf.start("api"),this.api_params=this.conf.params,this.api_params.country&&(this.api_params.country=this.api_params.country.toLowerCase()),this.breakpoints.name?this.api_params.device=this.breakpoints.name:this.api_params.width=this.breakpoints.size[0],this.api_params.origin_url=window.location.origin+window.location.pathname,this.api_url="https://conf.pegasus.unifygroup.com/pegasus-conf/v2",this.locker.get("staging_conf")&&(this.log("Staging webservice called","test"),this.api_url="https://conf.pegasus.unifygroup.com.s.unfy.cloud/pegasus-conf/v2"),this.locker.get("staging_api")&&(this.log("Staging API called","test"),this.api_params.staging=this.locker.get("staging_api")),_pUtils.ajax({url:this.api_url,method:"POST",params:this.api_params,headers:{"Content-Type":"application/json"},success:function(t,i){e.user.setDownloadLength(i["content-length"]);try{var n=_pegasusCrypto.decrypt(t)}catch(i){try{n=CryptoJS.AES.decrypt(t,e.KEY).toString(CryptoJS.enc.Utf8)}catch(e){n=t}}try{e.data=JSON.parse(n)}catch(t){e.log("Configuration decryption error","error",!0),e.data=e.getBackupConf()}e.data.breakpoints&&localStorage.setItem(e.conf.prefix+":breakpoints",JSON.stringify(e.data.breakpoints))},error:function(t){e.log("Error connecting to the configuration platform","error",!0,{errorDetails:"default"}),e.data=e.getBackupConf()},finally:function(i,n){e.waitForDataLayer((function(){e.completeData=JSON.parse(JSON.stringify(e.data)),-1===window.location.host.indexOf("gofeminin")&&-1===window.location.host.indexOf("alfemminile")&&e.setAdops(),e.perf.end("api"),t()}))}})},_p.fn.getBackupConf=function(){var t="";switch(this.api_params.site){case"aufeminin":t="fc39af63-d31a-4ac4-84b6-86c1c0b87cfd";break;case"beaute-test":t="f70a6fef-b195-4e06-87e3-0748c57bc176";break;case"sofeminine":t="00608080-5f9f-4d2c-8aa3-c17d0f7afe4c";break;case"taofeminino":t="dc3a117d-a77c-41d3-809b-708635df0272";break;case"enfemenino":t="273b59c2-23fc-4438-863a-9af3b873e58b";break;case"marmiton":t="bff46cdb-3c4d-4c5c-beb8-5f215129fff5";break;case"doctissimo":t="3b6e2d6f-c442-45c8-9793-2f6c67b6ed7a";break;case"gamekult":t="f3a0dbcf-51e9-4906-8a48-6643745d5ef8";break;case"lesnumeriques":t="325cea3f-6282-4d12-b4ab-8fd597be3454";break;case"netmums":t="02e605d0-a439-437f-abff-656ad5fd077b";break;case"cnetfrance":t="d8f0606d-fe6c-4bb1-ac8a-f8951307bb50";break;case"zdnet":case"zdnet_france":t="6325aa76-9552-4918-a562-ec3d40ecb963"}var e=this.api_params.site;return"doctissimo"===this.api_params.site?e="doctissimo_fr":"zdnet"===this.api_params.site&&(e="zdnet_fr"),JSON.parse(JSON.stringify(this.confBackup).replace(/websiteNameToReplace/gi,e).replace(/pubstackIdToReplace/gi,t))},_p.fn.getDataLayer=function(t,e){var i=this.getData("keywords.variable");if(i){if(window[i])return _pUtils.parser(window[i],t,e);this.log("Unable to find datalayer variable","error",!0,{errorDetails:i})}},_p.fn.waitForDataLayer=function(t){var e=this.getDatl((function(){window[e]&&(clearInterval(i),t())}),100)},_p.fn.getDataLayerKeywords=function(){var t=this;return this.getData("keywords.mapping")?Object.keys(this.getData("keywords.mapping")).reduce((function(e,i){var n=t.getDataLayer(t.getData("keywords.mapping."+i));return n&&(e[i]=n.toString().split(",")),e}),{}):{}},_p.fn.browserExt=function(){var t=this,e={};return this.locker.filteredBidders()&&""!==this.locker.filteredBidders()&&(e.bidder=!0,this.log("Limited bidders : "+this.locker.filteredBidders(!1),"test"),this.data.headerbidding.prebid&&(this.data.headerbidding.prebid.bidders=this.data.headerbidding.prebid.bidders.filter((function(e){return!t.locker.filteredBidders()||t.locker.filteredBidders().includes(e.code)})))),this.locker.filteredAdslots()&&""!==this.locker.filteredAdslots()&&(e.adslot=!0,this.log("Limited adslots : "+this.locker.filteredAdslots(!1),"test"),Object.keys(this.data.slots).forEach((function(e){-1===t.locker.filteredAdslots().indexOf(e)&&delete t.data.slots[e]}))),e},_p.fn.headerBiddingInit=function(){var t=this;this.getConsent()?this.checkRequirements(this.REQUIREMENT_BLOCKS_INIT)?(this.log("Init Header-Bidding (consent received)"),this.hbwrappers=this.setHBWrappers(),Object.keys(this.hbwrapfunction(){t.hbwrappers[e].status="initialized"}))}))):this.log("HeaderBidding - Requirements not met"):this.log("HeaderBidding - No consent received")},_p.fn.allBids=[],_p.fn.setHBWrappers=function(){var t=this,e=this.getData("headilter((function(t){return e[t].bidders.length>0})).reduce((function(n,r){var s="_p"+_pUtils.capitalize(r);return n[r]=new window[s]({conf:t.conf,globalcurrency:t.getData("adserver.dfp.currency"),adslots:t.adslots,adserverconf:t.getData("adserver.dfp"),tireakpoints,log:function(e,i,n,r){t.log(e,i,n,r)}}),n[r].bidders=e[r].bidders,n[r].debug=t.locker.get()&&!!t.locker.getUserToken()||localStorage.getItem("peg:pbjsdebug"),Object.defineProperty(n[r],"status",{_value:"created",set:function(t){this._value=t,i.emit("headerBiddingStatus",{hbwrapper:r,status:t,adun.targeting})},get:function(){return this._value}}),n}),{})},_p.fn.getBids=function(t,e){var i=this;e=e||"auction",t=Array.isArray(t)?t:[t];var n={};this.allBids.push(n),Object.keys(this.hbwrappers).forEach((function(r){"refresh"===e&&i.hbwrappers[r].reset(),i.getWrapperBids(e,i.hbwrappers[r],t,(function(e){if(n[r]=e,Object.keys(n).lengthength){if(t.every((function(t){return t.isVideo})))return void i.emit("hbVideoReady");i.emit("hbTargetingReady",{targeting:n,slots:t})}})),i.hbwrappers[r].status="bids ".concat("refresh"===e?"refreshed":"requested"," â¬")}))},_p.fn.gethis,s=i.map((function(t){return t.placeholder.id}));e.callBids(s,(function(i){s.forEach((function(t){e.activebids[t]&&0!==e.activebids[t].length&&(r.log("--- Bids ready for ".concat(t," ---"),"bid"),r.log({var:e.activebids[t],params:["bidder","cpm","size","statusMessage","dealId","adId","amznbid","amzniid","amznp","amznsz"]},"table"))})),e.status="auction"===t?"bids auctioned":"bids auctioned for refresh",e.buildTargeting(),e.status="targeting ready",n(i)}))},_p.fn.buildAdUnits=function(t){var e=this;Object.keyunction(t){return e.hbwrappers[i].buildAdUnits(t)}))}))},_p.fn.getHBTargeting=function(t){var e=this,i={};return Object.keys(this.hbwrappers).forEach((function(t){_pUtils.extend(i,e.hbwrappers[t].getTargeting())})),t?i[t]:i},_p.fn.firstBidsRequest=function(t){if(this.areHBWrappersReady()&&!this.hasFirstBid&&(this.hasRequiredSlots()||this.isDomReady)){var e=this.adslots.filter((function(t){return!t.isVideo&&(t.isRequired||!t.data.plugins.lazyload||t.inViewportHB||"atf"===t.position)}));this.hasFirstBid=!0,this.perf.start("first_bids_wave"),this.getBids(e)}},_p.fn.hbVideoUrls=[],_p.fn.buildVideoUrls=function(t){var e=this,i={};Object.keys(this.hbwrappers).forEach((function(n){var r=e.getGlobalTargeting();i[n]=e.hbwrappers[n].buildVideoUrls(r),Object.keys(i).length===Object.keys(e.hbwrappers).length&&(e.hbVideoUrls.push(i),t(i))}))},_p.fn.hbVideoInit=function(){if(!this.hasFirstVideoBid){var t=this.getSlot("isVideo");t&&(t=Array.isArray(t)?t:[t],this.hasFirstVideoBid=!0,this.perf.start("hbvideo"),this.getBids(t))}},_p.fn.areHBWrappersReady=function(){var t=this;if(this.hbwrappers){var e=Object.keys(this.getData("headerbidding")).filter((function(e){return t.getData("headerbidding")[e].bidders.filter((function(e){return t.hbwrappers[e].status})).map((function(t){return t}));return JSON.stringify(i)===JSON.stringify(e)}},_p.fn.keywordsManager={mapping:{site:"site.sid",section:"page.section",subsection:"page.subSection",stack:"page.stack"},debug_keyword:"adsDebug",additionnal_keywords:{}},_p.fn.getDebugKeywords=function(){var t={};return localStorage.getItem(this.keywordsManager.debug_keyword)&&(t[this.keywordsManager.debug_keyword]=localStorage.getItem(this.keywordsManager.debug_keyword),t[this.keywordsManager.debug_keyword]="string"==typeof t[this.keywordsManager.debug_keyword]?[t[this.keywordsManager.debug_keyword]]:t[this.keywordsManager.debug_keyword]),t},_p.fn.getEnrichedKeywords=function(){var t=this,e=this.formatKeywords(this.conf.params.keywords);(e=Object.assign(e,this.getDebugKeywords())).url=[window.location.pathname],e.adstack=["pegasus_"+this.VERSION,"pegasus_legacy_"+this.VERSION],Object.keys(this.keywordsManager.additionnal_keywords).forEach((function(i){e[i]||(e[i]=[]),t.keywordsManager.additionnal_keywords[i].forEach((function(t){t&&e[i].push(t)}))})),-1===document.referrer.indexOf(location.hostname)&&(e.new_session=["1"]),Object.keys(this.abTests).forEach((function(i){e[i]=[t.abTests[i]]}));var i=this.getDataLayerKeywords();Object.keys(i).forEach((function(t){e[t]=e[t]||[],e[t]=e[t].concat(i[t]),e[t]=_toConsumableArray(new Set(e[t]))})),this.conf.params.stack&&(e.stack=[this.conf.params.stack]);var n=this.getPageKeywords();return n.stack&&(e.stack=[n.stack]),e},_p.fn.formatKeywords=function(t){var e={};return(t=t||"").split(";").forEach((function(t){if("undefined"!==t&&t){var i=t.split("="),n=i[0];if(2===i.length|(e[n]=[]),r.forEach((function(t){t&&e[n].push(t)}))}else 1===i.length&&(e[n]||(e[n]=[]))}})),e},_p.fn.getPageKeywords=function(){var t=this,e={};return Object.keys(this.keywordsManager.mapping).forEach((function(i){e[i]=t.getData("keywords.mapping.".concat(i))?t.getDataLayer(t.getData("keywords.mapping.".concat(i))):void 0,e[i]=e[i]?e[i]:t.getDataLayer(t.keywordsManager.mapping[i]),void 0===e[i]&&delete e[i]})),e=Object.assign(e,this.getDebugKeywords())},_p.fn.addCustomKeyword=function(t,e){var i=this;this.keywordsManager.additionnal_keywords[t]||(this.keywordsManager.additionnal_keywords[t]=[]),e.forEach((function(e){e&&!i.keywordsManager.additionnal_keywords[t].includes(e)&&i.keywordsManager.additionnal_keywords[t].push(e)})),this.emit("targetingUpdated")},_p.fn.lazyload=function(){var t=this;this.log("Init Lazyload"),_pViewport.viewportKey=this.LAZYLOAD_VIEWPORT_KEY;var e=function(){t.adslots.forEach((function(t){var e=Object.assign({},t.viewportArgs);"refreshing"===t.status&&(e.percentHeight=50),t.inViewport=_pViewport.isInView(t.inViewElement,e),e=Object.assign({},t.viewportHBArgs),t.inViewportHB=_pViewport.isInView(t.inViewElement,e)}))};e(),window.addEventListener("scroll",e),-1===["Desktop","Chromebook"].indexOf(_pDetector.get().device)&&window.addEventListener("touchmove",e),this.on("slotInViewport",(function(e){e.data.plugins.lazyload&&t.getConsent()&&t.hasFirstRendered()&&(e.history.length>0&&!e.inActiveView||"targeted"===e.status&&t.toRenderQue([e]))})),this.on("slotInViewportHB",(function(e){e.data.plugins.lazyload&&t.getConsent()&&t.hasFirstRendered()&&!e.lazyHB&&"defined"===e.status&&(e.lazyHB=!0,t.hasHB()&&0!==Object.keys(t.hbwrappers).length?t.getBids(e):t.setSlotTargeting(e,(function(){return t.toRenderQue([econdition:function(t){return!t.isSize([1800,1e3])},destroyCondition:function(t){return t.isSize([1800,1e3])||!t.lastPlugins.sticky}},{name:"parallax",condition:function(t){var e=t.getSizes();if(e)return["300x600","320x480","336x280"].indexOf(e.join("x"))>-1&&(t.lastHistory.adserver.isBackfill||this.isRTB(t))},ive",condition:function(t){return t.isSize([0,0])}},{name:"skin",dontWait:!0,condition:function(t){if(t.isSize([1800,1e3])&&this.isRTB(t)&&!t.lastHistory.isDisplayCampaign){var e=this.getBidderFromAdvertiserId(t.lastHistory.adserver.advertiserId);return{type:"rtb",external:e&&"sublime"===e.code}}}}],_p.fn.initPlugins=function(t){var e=this;if(t.data.plugins&&!t.isEmpty())this.plugins.map((function(i){var n=i.name||i;if(e.destroyPlugin(n,t),t.data.plugins[n]){var r=!i.condition||i.condition.apply(e,[t]);if(r){i.destroyOthers&&i.destroyOthers.forEach((function(i){return e.destroyPlugin(i,t,!0,1)}));var s="object"===_typeof(r)?r:{},a=t.placeholder.querySelector("iframe"),o=a?a.contentDocument||a.contentWindow.document:null,c=!!o&&"complete"!==o.readyState;return 1===t.history.lener("load",(function(){return e.callPlugin(n,t,s)})):e.callPlugin(n,t,s),n}}})).filter((function(t){return t}))},_p.fn.pluginParams=function(t,e,i){if(i="boolean"==typeof i&&i?{}:i,e.data.plugins&&e.data.plugins[t]){var n=Object.assign({},e.data.plugins[t]);i=_pUtils.extend(n,i,!0)}if(i.plugins)for(var r in i.plugins)if(i.plugins[r]&&i.plugins.hasOwnProperty(r)&&e.data.plugins[r]){var s=Object.assign({},e.data.plugins[r]);i.plugins[r]=_pUtils.extend(s,i.plugins[r],!0)}return i.target=i.target,i.prefix=this.conf.prefix,i.adslot="#"+e.div.id,i.breakpoint=this.breakpoints.name,i.cls=e.cls,i},_p.fn.callPlugin=function(t,e,i,n){if(t){if("IFRAME"===e.tagName)for(var r=this.conf.selectors.adSlot;e.parentElement;){if(e.matches(r)){e=e.dataset.ad;break}e=e.parentElement}if(e="string"==typeof e?this.getSlot(e):e){i.isDisplayCampaign&&(e.lastHistory.isDisplayCampaign=!0);var s=this.pluginParams(t,e,i),a="_p"+_pUtils.capitalize(t);if(window[a])return n&&this.destroyPlugin(t,e,!0),e.lastPlugins[t]=(new window[a]).init(s),e.emit("plugin",t),e.lastPlugins[t]}}},_p.fn.setPlugin=function(t,e,i){i.isDisplayCampaign=!0,this.callPlugin(t,e,i,!0)},_p.fn.destroyPlugin=function(t,e,i,n){n=void 0===n?2:n;var r=e.history[e.history.length-n];if(r&&r.plugins&&r.plugins[t]&&"destroyed"!==r.plugins[t].status){var s=this.plugins.find((function(e){return e.name===t}));if(!s||!s.destroyCondition||s.destroyCondition.apply(this,[e])||i)return r.plugins[t].destroy(),e}},_p.fn.query=function(){var t=this;this.log("Init Adslot detection");var e=this.conf.selectors.adSlot;new MutationObserver((function(i){i.forEach((function(i){i.addedNodes.forEach((function(i){i&&i instanceof Element&&(i.matches&&i.matche.forEach((function(e){return e!==i&&t.saveSlot(e)})))}))}))})).observe(document.documentElement,{childList:!0,subtree:!0}),document.querySelectorAll(e).forEach((function(e){return t.saveSlot(e)}))},_p.fn.canSaveSlot=function(t,e){var i=!this.getSlot(t.id)&&this.isInBreakpoint(t)&&void 0===t.dataset.adExclude;return e=e||t.dataset.ad,this.isSlotExcluded(e)&&(i=!1),this.isSlotAdopsBlocked(e)&&(this.log("".concat(e," has been blocked by the Ad OPS"),"warning"),this.slotNameIsVideo(e)&&this.cmd.run("disabledPreroll"),i=!1),-1===this.getData("slots."+e)&&(this.log("".concat(e," excluded in slots configuration."),"warning"),i=!1),i&&!this.getData("slots."+e)&&(this.log("Adslot does not exist in API","error",!this.debugFilter.adslot,{errorDetails:e}),i=!1),!i&&t.dataset.hasOwnProperty("adCls")&&delete t.dataset.adCls,i},_p.fn.isSlotExcluded=function(t){return!!(this.conf.params.exclude&&this.conf.params.exclude.indexOf(t)>-1)||!!(this.conf.params.include&&this.conf.params.include.length>0&&this.conf.params.include.indexOf(t)<0)},_p.fn.isInBreakpoint=function(t){var e=this,i=t.dataset.adMinBreakpoint,n=t.dataset.adMaxBreakpoint,r=!0;if(!i&&!n)return r;var s=function(t){return t&&isNaN(t)&&e.breakpoints.getBreakpoint(t)?e.breakpoints.getBreakpoint(t).widthLimit:t};return i=s(i),n=s(n),(r=(r=i?!isNaN(i)&&parseInt(i)<this.breakpoints.size[0]:r)&&n?!isNaN(n)&&parseInt(n)>=this.breakpoints.size[0]:r)||(t.setAttribute("data-ad-ignored",""),delete t.dataset.adCls),r},_p.fn.getRequiredSlots=function(){var t=this;return Object.keys(this.getData("slots")).filter((function(e){return t.getData("slots")[e].plugins&&t.getDaurn!t.isSlotExcluded(e)&&!t.isSlotAdopsBlocked(e)}))},_p.fn.hasRequiredSlots=function(){return this.adslots.filter((function(t){return t.isRequired})).map((function(t){return t.name})).sort().join(",")===this.getRequiredSlots().join(",")},_p.fn.slotNameIsVideo=function(t){return!!(this.getData("slots.".concat(t,".adUnitSizes"))&&this.getData("slots.".concat(t,".adUnitSizes")).video&&this.getData("slots.".concat(t,".adUnitSizes")).video.instream)},_p.fn.REFRESH_PLUGINS=["presenceTimer","viewabilityTimer"],_p.fn.refresh=function(t){var e=this;if(!this.refreshDisabled){t.refresh=t.refresh||{},t.refresh.nb=t.history.length-1,t.status=t.data.plugins.refresh?"refreshing":t.status,delete t.refresh.forced,t.data.plugins.refresh&&t.data.plugins.refresh.visible&&(t.data.plugins.lazyload={fromRefresh:!0}),t.refresh.timers=[],t.refresh.timers.push(new _pTimer({name:"minPresenceTimer",duration:this.SLOT_MINPRESENCE})),t.lastHistory.refreshParams=this.adslotRefreshParams(t),[this.REFRESH_PRESENCE_KEY,this.REFRESH_VIEWABILITY_KEY].forEach((function(i){if(t.lastHistory.refreshParams&&t.lastHistory.refreshParams[i]&&!t.refresh.disabled&&!(t.isSize([1800,1e3])||t.lastHistory.refreshParams.capping>=1&&t.refresh.nb>=t.lastHistory.refreshParams.capping)){var n=t.lastHistory.refreshParams[e.REFRESH_VIEWABILITY_KEY]&&t.lastHistory.refreshParams[e.REFRESH_VIEWABILITY_KEY]>e.ADSERVER_TIMEOUT?e.REFRESH_VIEWABILITY_KEY:e.REFRESH_PRESENCE_KEY;t.refresh.timers.push(new _pTimer({name:i,duration:t.lastHistory.refreshParams[i],beforeTimeOut:e.ADSERVER_TIMEOUT,doRefresh:!0,getBids:i===n}))}}))it("refreshTimer",{name:i.name,status:"started"})},(!(t.lastHistory.refreshParams&&t.lastHistory.refreshParams[e.REFRESH_VIEWABILITY_KEY]>0&&i.name===[e.REFRESH_VIEWAfunction(){i.getBids&&(t.status="bidsRefreshing")},i.onEnd=function(){t.refresh.clear([i.name]),t.emit("refreshTimer",{name:i.name,status:"ended"}),i.doRefresh&&(t.lastHistory.refreshParams&&t.lastHistory.refreshParams.activeUser&&!e.user.active?e.renderLine.push(t):e.toRenderQue([t]))}}));var i=function(i){t.refresh.timers.filter((function(t){retorEach((function(t){i.inViewport?t.run():t.stop()})),t.refresh.timers.filter((function(t){return t.name===e.REFRESH_PREay)})).forEach((function(t){i.inViewport&&t.run()}))};t.on("inViewport",i),t.refresh.clear=function(e){for(var n=t.refresh.timers.length-1;n>=0;n--){var r=t.refresh.timers[n];e&&e.indexOf(r.name)<0||(r.stop(),delete t.refresh.timers[n],t.refresh.timers.splice(n,1),0===t.refresh.timers.length&&t.off("inViewport",i))}}}},_p.fn.refreshSlot=function(t,e){var i=this;(t?t.split(",").map((function(t){return i.getSlot(t)})):this.adslots).filter((function(t){return t.refresh})).forEach((function(t){var n=t.rer((function(t){return"minPresenceTimer"===t.name}))[0];t.status="refreshing",t.refresh.forced=!0,e&&n&&n.value<i.SLOT_MINPRESENCE?(t.refresh.clear([i.REFRESH_PRESENCE_KEY,i.REFRESH_VIEWABILITY_KEY]),n.beforeTimeOut=i.ADSERVER_TIMEOUT,n.duration+=n.value>n.duration-n.beforeTimeOut?n.beforeTimeOut:0,n.getBids=n.doRefresh=!0):(t.refresh&&t.refresh.clear&&t.refresh.clear(),t.status="bidsRefreshing")}))},_p.fn.disableRefresh=function(t){var e=this;(t?t.split(",").map((function(t){return e.getSlot(t)})):this.adslots).forEach((function(t){t.refresh=t.refresh||{},t.refresh.clear&&t.refresh.clear(),t.refresh.disabled=!0})),this.refreshDisabled=!0,this.log("Refresh is disabled","info")},_p.fn.isRefreshCleared=function(t){return!t.refresh||!t.refresh.timers||!(t.refresh.disabled&&!t.refresh.forced)&&(t.refresh.timers&&0===t.refresh.timers.length)},_p.fn.getSpareRefresh=function(t){var e=this.getBidderFromAdvertiserId(t.lastHistory.adserver.advertiserId),i={};if(e){var n=e.slots.display.banner.find((function(e){return e.code===t.name}));i=n&&n.refresh?n.refresh:i}else t.lastHistory.adserver.isBackfill?i=this.getData("adserver.dfp.refresh.SSP"):t.lastHistory.adserver.isBackfill||t.lastHistory.adserver.isEmpty||(i=this.getData("adserver.dfp.refresh.Direct"));return i&&i.status?i:{}},_p.fn.adslotRefreshParams=function(t){if(t.data.plugins.refresh){var e=JSON.parse(JSON.stringify(t.data.plugins.refresh)),i=this.getSpareRefresh(t);return Object.keys(e).reduce((function(t,n){return"number"==typeof e[n]&&i[n]&&i[n]>e[n]&&(t[n]=i[n]),"boolean"==typeof e[n]&&i[n]&&(t[n]=e[n]||i[n]),t}),e)}},_p.fn.REQUIREMENT_EVENT_PREFIX="requirement_",_p.fn.REQUIREMENT_MODE_MANDATORY="mandatory",_p.fn.REQUIREMENT_MODE_OPTIONAL="optional",_p.fn.REQUIREMENT_BLOCKS_INIT="init",_p.fn.REQUIREMENT_BLOCKS_RENDER="render",_p.fn.requirements={},_p.fn.requirement_timeouts={},_p.fn.initRequirements=function(){var t=this;(this.conf.params.requirements||[]).forEach((function(e){if(t.requirements[e.name]={blocks:e.blocks,status:!1},t.on(t.REQUIREMENT_EVENT_PREFIX+e.name,(function(){t.requirements[e.name].status=!0,t.requirement_timeouts[e.name]&&(t.log("optional requirement ".concat(e.name," timeout has been aborted"),"info"),clearTimeout(t.requirement_timeouts[e.name])),e.blocks===t.REQUIREMENT_BLOCKS_INIT?t.initAdStack():e.blocks===t.REQUIREMENT_BLOCKS_RENDER&&t.firstRender()})),e.mode===t.REQUIREMENT_MODE_OPTIONAL){var i=setTimeout((function(){t.log("optional requirement ".concat(e.name," has timed out after ").concat(e.timeout,"ms"),"info"),t.emit(t.REQUIREMENT_EVENT_PREFIX+e.name)}),e.timeout);t.requirement_timeouts[e.name]=i}}))},_p.fn.checkRequirements=function(t){var e=this;return!Object.keys(this.requirements).some((function(i){return e.requirements[i].blocks===t&&!1===e.requirements[i].status}))},_p.fn.reset=function(t){var e=tho"),this.destroy((function(){return t&&e.reinit()}))},_p.fn.destroy=function(t){var e=this;this.log("â ï¸ destroy in progrests.forEach((function(t){t.reset(),e.clearSlotTargeting(t)})),Object.keys(this.adServers).forEach((function(t){return e.adServers[t].destroy()})),this.clearTargeting(),this.console&&this.console.clear(),this.adslots=[],t&&t()},_p.fn.reinit=function(){var t=this;this.log("reinit"),delete this.refreshDisabled,this.fetchData((function(){t.setExchangeRates((function(){t.query();var e=t.getData("headerbidding");Object.keys(t.hbwrappers).forEach((function(i){t.hbwrappers[i].slots=_pUtils.filter(t.getData("slots"),(function(t){return t.hasOwnProperty("RTBSizes")})),t.hbwrappers[i].adslots=t.adslots,t.hbwrappers[i].bidders=e[i].bidders,t.hbwrappers[i].status="initialized"})),t.updateGlobalTargeting(),t.hasHB()&&t.firstBidsRequest()}))}))};var _pSlot=function(t){var e=this;if(t.div||t.data)return this.initial={},Object.keys(t.div.attributes).forEach((function(i){"data-ad"!==t.div.attributes[i].name&&(e.initial[t.div.attributes[i].name]=t.div.attributes[i].value)})),this._name,this.name=t.name,this.div=t.div,this.prefix=t.prefix,this.div.id=(this.prefix?this.prefix+"_":"")+this.name,this.fullname=this.name,this.breakpoint=t.breakpoint,this.data=Object.assign({},t.data.slots[this.name]),this.setElements(),this.defaults={status:"",inViewport:_pViewport.isInView(this.inViewElement,this.viewportArgs),inViewportHB:_pViewport.isInView(this.inViewElement,this.viewportHBArgs),inActiveView:!1},this.setObservableProps(),this.addLabel(),this.events={},this.history=[],this.UPR=[],this.abTests=[],this.div.dataset.hasOwnProperty("adCls")&&(this.cls={width:this.div.offsetWidth,height:this.div.offsetHeight,keep:"keep"===this.div.dataset.adCls},this.div.style.minHeight=this.cls.height+"px"),this};function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}_pSlot.prototype={get name(){return tdiv.dataset.ad:this._name},set name(t){this._name=t||null},setObservableProps:function(){var t=this;Object.keys(this.defaults).forEach((function(e){Object.defineProperty(t,e,{get:function(){return this.defaults[e]},set:function(t){var i=this.defaults[e];this.defaults[e]=t,this.defaults[e]!==i&&this.emit(e)}})}))},emit:functints[t]{this.events[t]=this.events[t]||[],this.events[t].push(e)},off:function(t,e){this.events[t]&&(this.events[t]=this.events[t].filter((function(t,i){return"function"=turn thison(this.div)},get index(){return this.div.dataset.adIndex},set index(t){this.div.dataset.adIndex=t,this.div.id+="_"+t,this.fullname+="_"+t,this.pd+="_"+t},get adserver(){return this.data.adserver||"dfp"},get breakpointsAttr(){var t={min:this.div.dataset.adMinBreakpoint,max:this.div.dataset.adMaxBreakpoint};for(var e in t)t[e]||delete t[e];return 0===Object.keys(t).length?null:t},get isRequired(){return this.data.plugins&&Object.keys( lastHistory(){return this.history[this.history.length-1]},get lastPlugins(){return this.lastHistory?(this.lastHistory.plugins=this.lastHistory.plugins||{},this.lastHistory.plugins):{}},get lastUPR(){return this.UPR[this.UPR.length-1]||this.data.upr},isEmpty:function(){return!this.lastHistory&&!this.lastHistory.adserver||this.lastHistory.adserver.isEmpty},getSizes:function(){var t=null;return this.isEmpty()?t:(this.lastHistory.adserver.size&&(t=this.lastHistory.adserver.size),this.lastHistory.targeting&&this.lastHistory.targeting.hb_size&&(t=t&&"1,1"!==t.join()?t:this.lastHistory.targeting.hb_size[0].split(/x|X/).map((function(t){return parseInt(t)}))),t||[this.div.offsetWidth,this.div.offsetHeight])},isSize:function(t){return!!this.getSizes()&ewElement(){return this.container?this.container:this.div},isInView:function(t){return t="HB"===t?this.viewportHBArgs:this.viewportArgs,_pViewport.isInView(this.inViewElement,t)},get viewportArgs(){var t=this.data.plugins&&this.data.plugins.lazyload?this.data.plugins.lazyload:{};return this.refresh&&this.data.plugins.refresh&&(t[this.LAZYLOAD_VIEWPORT_KEY]=0),t},get viewportHBArgs(){var t=Object.assign({},this.viewportArgs);return t[this.LAZYLOAD_VIEWPORT_KEY]=isNaN(this.viewportArgs[this.LAZYLOAD_VIEWPORT_KEY])?2:this.viewportArgs[this.LAZYLOAD_VIEWPORT_KEY]+2,t},update:function(){var t=this,e=this.isEmpty()?"empty":this.status;this.div.classList.forEach((function(e){e.startsWith("".concat(t.prefix,"_status"))&&t.div.classList.remove(e)})),this.div.classList.add("".concat(this.prefix,"_status_").concat(e))},addLabel:function(){this.label&&this.container&&(this.container.classList.add("".concat(this.prefix,"_has_label")),this.container.dataset.adLabelTxt=this.label)},removeLabel:function(){this.container&&(this.container.classList.remove("".concat(this.prefix,"_has_la label(){return this.data.label||this.div.dataset.adLabel},reset:function(){var t=this;this.div.innerHTML="",["class","style","id"].forEach((function(e){return t.dich((function(e){return t.div.setAttributes).forEach((furoy()}))},irn!(!this.daayerId(){return this.isVideo&&this.div.dataset.adPlayerid},setElements:function(){this.container=document.createElement("div"),this.container.id=(this.prefix?this.prefix+"_":"")+"container_"+this.name,this.container.dataset.adContainer=this.name,this.placeholder=document.createElement("div"),this.placeholder.id=(this.prefix?this.prefix+"_":"")+"placeholder_"+this.name,this.placeholder.dataset.adPlaceholder=this.name,this.container.insertAdjacentElement("afterBegin",this.placeholder),this.div.insertAdjacentElement("afterBegin",this.container)},setAlias:function(t,e){this.originalData=this.data,this.data=Object.assign({},e),this.alias=t},get templatePosition(){var t=this,e=[{name:"banner_atf",positions:{Default:"header"}},{name:"300_atf",positions:{Default:"infeed","Tablet Landscape":"aside",Desktop:"aside"}}].find((function(e){return e.name===t.name}));return e?e.positions[this.breakpoint]||e.positions.Default:"infeed"}},_p.fn.saveSlot=function(t,e){var i=this;if(this.canSaveSlot(t,e)){var n={div:t,prefix:this.conf.prefix,data:this.getData(),breakpoint:this.breakpoints.name};void 0!==e&&(n.name=e);var r=new _pSlot(n);return this.hasClsStylesheet||delete r.cls,r.on("status",(function(t){var e=_pUtils.capitalize(t.status);i.log("".concat(e," slot - ").concat(t.div.id),"info"),i.emit("slot"+e,t)})),r.on("inViewport",(function(t){i.emit("slot"+(t.inViewport?"":"Not")+"InViewport",t)})),r.on("inViewportHB",(function(t){i.emit("slot"+(t.inViewportHB?"":"Not")+"InViewportHB",t)})),this.getSlot(r.name)&&!r.isMultiple()?(this.log("Adslot already exists","error",!0,{errorDetails:r.name}),r.reset(),void(r=null)):(r.on("inActiveView",(function(t){i.emit("slotInActiveView",t)})),r.isVideo&&r.setAlias("instream",this.getData("slots.instream")),this.setAdslotAbTest(r),this.adslots.push(r),r.isMultiple()&&(r.index=this.getSlot(r.name).length||1),r.status="created",r)}},_p.fn.getSlot=function(t){var e=this;if(t&&"string"==typeof t){var i=[];return(i="isVideo"===t?this.adslots.filter((function(t){return t.isVideo})):this.adslots.filter((function(i){return i.name===t||i.div.id===t||i.div.id===t.replace("placeholder_","")||i.div.id==="".concat(e.conf.prefix,"_").concat(t)}))).length>0&&(1===i.length?i[0]:i)}},_p.fn.removeLabel=function(t){var e=this;(t="string"==typeof(t=t||this.adslots)?[t]:t).forEach((function(t){(t="string"==typeof t?e.getSlot(t):t)&&t.removeLabel()}))},_p.fn.deleteSlots=function(t){void 0!==t&&(t="string"==typeof t?[t]:t,this.adslots=this.adslots.filter((function(e){if(!(t.indexOf(e.name)>-1))return e;e.reset()})))},_p.fn.setStyles=function(){this.log("Init Global Styles");var t="",e=[this.conf.selectors.adSlot,this.conf.selectors.placeholder,this.conf.selectors.container];return t="".conct(t,">div,").concat(t,">iframe,").concat(t,">div iframe")})).join(","),"{margin-left:auto;margin-right:auto;display:block;}"),t+="".concat(this.conf.selectors.adSlot,":not(.").concat(this.conf.prefix,"_status_empty):not(.").concat(this.conf.prefix,"_skin) .").concat(this.conf.prefix,"_has_label:before {\n        content: attr(data-ad-label-txt);\n    }"),new _pEl({type:"style",id:"".concat(this.conf.prefix,"Styles"),html:_pUtils.minify(t)}).insert("beforeEnd","head")},_p.fn.uprList=[.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1,1.05,1.1,1.15,1.2,1.25,1.3,1.35,1.4,1.45,1.5,1.55,1.6,1.65,1.7,1.75,1.8,1.85,1.9,1.95,2,2.1,2.2,2.3,2.4,2.5,2.6,2.7,2.8,2.9,3,3.1,3.2,3.3,3.4,3.5,3.6,3.7,3.8,3.9,4,4.1,4.2,4.3,4.4,4.5,4.6,4.7,4.8,4.9,5,5.1,5.2,5.3,5.4,5.5,5.6,5.7,5.8,5.9,6,6.1,6.2,6.3,6.4,6.5,6.6,6.7,6.8,6.9,7,7.1,7.2,7.3,7.4,7.5,7.6,7.7,7.8,7.9,8,8.1,8.2,8.3,8.4,8.5,8.6,8.7,8.8,8.9,9,9.1,9.2,9.3,9.4,9.5,9.6,9.7,9.8,9.9,10,10.2,10.4,10.6,10.8,11,11.2,11.4,11.6,11.8,12,12.2,12.4,12.6,12.8,13,13.2,13.4,13.6,13.8,14,14.2,14.4,14.6,14.8,15,15.2,15.4,15.6,15.8,16,16.2,16.4,16.6,16.8,17,17.2,17.4,17.6,17.8,18,18.2,18.4,18.6,18.8,19,19.2,19.4,19.6,19.8,20],_p.fn.set.keys(e).filter((function(t){return t.indexOf("hb_pb")>-1})).map((function(t){return e[t]}));i=Math.max.apply(Mathray(this.uprList).reverse().find((function(t){return t<=i}));return t.UPR.push(n),n},_p.fn.que={},_p.fn.buffer={},_p.fn.on=function(t,e){var i=this;t.split(/[\s,]+/).forEach((function(t){i.que[t]=i.quei.buffer[t]&&i.buffer[t].forEach((function(e){i.emit(t,e)}))}))},_p.fn.emit=function(t,e){this.que[t]?this.que[t].forEach((function(t){return t(e)})):this.buffer[t]?this.buffer[t].push(e):this.buffer[t]=[e]},_p.fn.watcher={events:{slotCreated:function(t){this.hasHB()&&!this.hasFirstRendered()&&this.hasRequiredSlots()&&this.getWrapperStatus("hbwrappers","initialized")&&this.firstBidsRequest(),this.hasFirstRendered()&&("function"==typeof this.buildAdUnits&&this.buildAdUnits([t]),t.isVideo||this.defineSlot(t)),t.isVideo&&!this.hasFirstVideoBid&&this.areHBWrappersReady()&&this.hbVideoInit(),this.console&&t.isVideo&&this.console.push(t)},slotDefined:function(t){var e=this;this.hasFirstRendered()&&this.hasHB()&&(!t.data.plugins.lazyload||t.data.plugins.lazyload&&t.isInView("HB"))&&(0===Object.keys(this.hbwrappers).length?this.setSlotTargeting(t,(function(){return e.toRenderQue([t])})):this.getBids(t))},slotBidsRefreshing:function(t){var e=this;this.hasHB()&&0!==Object.keys(this.hbwrappers).length?this.getBids(t,"refresh"):this.setSlotTargeting(t,(function(){return e.toRenderQue([t])}))},slotRendered:function(t){var e=this;t.update(),this.onRenderSlotCls(t),this.initPlugins(t),this.user.trackingActivity||thi"),this.user.isActive((function(t){e.emit("activeUser",t)})),this.refresh(t),this.console&&(this.console.push(t),this.console.generalInfos())},slotInActiveView:function(t){t.refresh&&"targeted"===t.status&&t.history.length>0&&this.toRenderQue([dslots.filter((function(e){return e.adserver===t.adserver}));if(this.conf.third_party&&"created"===t.status&&this.defineAdslots(e),!this.conf.third_party&&"timedOut"===t.status){if(!this.checkRequirements(this.REQUIREMENT_BLOCKS_RENDER))return;this.firstRender(e)}!this.hasHB()&&(this.hasRequiredSlots()||this.isDomReady)&&this.getWrapperStatus("adServers","global targeted")&&this.firstRender(),this.getWrapperStatus("adServers","global targeted")&&this.cmd.run("globalTargeted")},headerBiddingStatus:function(t){this.areHBWrappersReady()&&!this.isHbReady&&(this.isHbReady=!0,this.hbVideoInit(),this.firstBidsRequest())},hbTargetingReady:function(t){var e=this;if(Object.keys(this.adServers).forEach((function(t){e.adServers[t].timeout&&(e.adServers[t].timeout=clearTimeout(e.adServers[t].timeout))})),this.checkRequirements(this.REQUIREMENT_BLOCKS_RENDER)){var i=t.slots?t.slots:this.adslots;if(!this.hasFirstRendered())return this.perf.end("first_bids_wave"),void this.firstRe.setSlotTargeting(t,(function(){return e.toRenderQue([t])}))}))}},hbVideoReady:function(){var t=this,e=setInterval((function(){Object.keys(t.adServers).every((function(e){return t.adServers[e].hasBeenGlobalTargeted}))&&(clearInterval(e),t.buildVideoUrls((function(e){t.perf.end("hbvideo"),t.cmd.run("onHbVideoReady",e);var i=Object.keys(e).reduce((function(t,i){return"prebid"===i&&Object.keys(e[i]).length>0?t=t.concat(Object.entries(e.prebid)[0][1].bids.map((function(t){return t.bidderCode}))):"amazon"===i&&Object.keys(e[i]).length>0&&t.push("amazon"),t}),[]);t.log("hbVideoReady - [".concat(i.join(","),"]"),"info"300)},consent:function(){this.consent&&this.initAdStack()},targetingUpdated:function(){this.updateGlobalTargeting()},adRenderEnded:function(t){var e=this;if(this.hasHB()){var i=t.event.advertiserId,n=this.monitor.advertiserMap[i];this.log("Rendered ad on "+t.slot.placeholder.id+" from bidder - "+(n||"Direct/Adx"),"bid caching"),Object.keys(this.hbwrappers).forEach((function(i){var r=e.hbwrappers[i]filter((function(t){var e=t.match(r);return e&&e.length>1})).forEach((function(r){e.log("reviewing - "+r,"bid caching"),n&&r.endsWith(n)?e.log("did not repool - "+r,"bid caching"):e.hbwrappers[i]&&(e.log("repooling - "+r,"bid caching"),e.hbwrappers[i].repoolBid(t.event.slot.getTargeting(r)[0],t.slot))}))}))}},paramsChanged:function(t){var e=this;if(t.include||t.exclude){var i=this.conf.params.exclude;t.include&&(i=this.adslots.map((function(t){return t.name})).filter((function(t){return e.conf.params.include.indexOf(t)<0}))),this.deleteSlots(i)}},activeUser:function(){this.log("User activity detected with event ".concat(this.user.activeEventType),"info"),this.conf.third_party||this.toRenderQue(this.renderLine)},DOMReady:function(){this.hasFirstRendered()||(this.log("DOM is ready","info"),this.hasHB()?this.firstBidsRequest():this.getWrapperStatus("adServers","global targeted")&&this.firstRender())}},watch:function(){for(var t in this.log("Init Watcher events"),this.watcher.events)this.on(t,this.watcher.events[t].bind(this))}},window.pegnction(){pegasus.log("Pegasus already exists","error",!0)})),window.pegasus=window.pegasus&&window.pegasus.initialized?window.pegasus:new _p({params:pegasusConf.params,prefix:"pegasus",cmd:window.pegasus&&window.pegasus.cmd?window.pegasus.cmd:[]});