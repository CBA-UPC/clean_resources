"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6792],{76792:function(e,d,t){t.r(d);var s=t(87757),r=t.n(s),n=t(1413),a=t(15861),i=t(86854),o=t(67294),l=t(36456),c=t(85611),u=t(56727),v=t(23657),p=t(29598),f=t(83429),m=t(65312);d.default=(0,l.$j)((function(e){var d,t,s,r,n,a,i;return{addressList:(null===(d=e.reducer.checkoutPage)||void 0===d?void 0:d.deliveryAddress)||[],addressLoader:null===(t=e.reducer.checkoutPage)||void 0===t?void 0:t.addressLoader,addAddressLoader:null===(s=e.reducer.checkoutPage)||void 0===s?void 0:s.addAddressLoader,addDeliveryOptionLoader:null===(r=e.reducer.checkoutPage)||void 0===r?void 0:r.addDeliveryOptionLoader,savedAddressList:(null===(n=e.reducer.cartPage)||void 0===n||null===(a=n.cartItems)||void 0===a?void 0:a.addresses)||[],cartCount:(null===(i=e.reducer.cartPage)||void 0===i?void 0:i.cartCount)||0,isAddressPopupOpen:e.reducer.addnewaddress||!1}}),(function(e){return{toggleAddNewAddress:function(d){return e(f.ZP.toggleAddNewAddress(d))},setAddAddressLoader:function(d){return e(f.ZP.setAddAddressLoader(d))},getDeliveryAddress:function(d){return e(p.Z.getDeliveryAddress(d))},addDeliveryAddress:}))((function(e){var d=e.addressList,t=e.savedAddressList,s=e.isAddressPopupOpen,l=e.addressLoader,p=e.toggleAddNewAddress,f=e.getDeliveryAddress,A=e.addDeliveryAddress,g=e.setSelectedAddressText,y=e.setDeliveryTabError,h=e.setAddAddressLoader,I=e.setAddAddressLoaderForDeliveryOptions,N=e.cartCount,w=(0,c.e1)().addToast,L=(0,o.useState)(!0),E=(0,i.default)(L,2),P=E[0],_=E[1],b=(0,o.useState)(!1),x=(0,i.default)(b,2),k=x[0],S=x[1],T=(0,o.useState)({}),D=(0,i.default)(T,2),C=D[0],G=D[1],O=(0,o.useState)(!1),H=(0,i.default)(O,2),B=H[0],Z=H[1],F=(0,o.useState)({}),j=(0,i.default)(F,2),J=j[0],W=j[1],q=(0,o.useState)({}),U=(0,i.default)(q,2),Y=U[0],$=U[1],z=function(){var e=(0,a.default)(r().mark((function e(d,t,s){var a,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.sessionStorage.setItem("checkoutPageOptions",JSON.stringify((0,n.default)({shippingAddressId:null===t||void 0===t?void 0:t.address_id,billingAddressId:null===s||void 0===s?void 0:s.address_id,selectedAddressText:"".concat(t.address_name," ").concat(t.pincode," ").concat(t.city),cartCount:N},JSON.parse(window.sessionStorage.getItem("checkoutPageOptions"))))),W(t),$(s),S(!0),g("".concat(t.address_name," ").concat(t.pincode," ").concat(t.city)),h(!0),"SHIPPING"===d&&I(!0),e.next=9,A({shippingAddress:(null===t||void 0===t?void 0:t.address_id)||(null===t||void 0===t?void 0:t.id),billingAddress:P?(null===t||void 0===t?void 0:t.address_id)||(null===t||void 0===t?void 0:t.id):(null===s||void 0===s?void 0:s.address_id)||(null===s||void 0===s?void 0:s.id)});case 9:a=e.sent,i=a.status,o=a.message,S(!1),I(!1),i?(window.localStorage.setItem("shippingAddress",(null===t||void 0===t?void 0:t.address_id)||(null===t||void 0===t?void 0:t.id)),window.localStorage.setItem("billingAddress",(null===s||void 0===s?void 0:s.address_id)||(null===s||void 0===s?void 0:s.id))):w(o||"Your request could not be serviced. Please try again!!",{appearance:"error",autoDismiss:!0,autoDismissTimeout:3e3});case 15:case"end":return e.stop()}}),e)})));return (),K=function(e){var s,r,n=e||t,a=null===(s=n.find((function(e){return"SHIPPING"===e.addressType})))||void 0===s?void 0:s.id,i=null===(r=n.find(())||void 0===r?void 0:r.id;_(a===i);var o=d.find((),l=d.find((function(e){return e.address_id===a})),c=null!==l&&void 0!==l&&l.address_id?l:o;W(c),g("".concat(c.address_name," ").concat(c.pincode," ").concat(c.city));var u=d.find(();return $(u),{shippingAddress:c,billingAddress:u}},M=function(){var e=(0,a.default)(r().mark((function e(d,t){var s,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="SHIPPING"===B?(0,n.default)((0,n.default)({},d),{},{address_id:t}):J,a="BILLING"===B?(0,n.default)((0,n.default)({},d),{},{address_id:t}):Y,y(!0),I(!0),!t){e.next=7;break}return e.next=7,z(B,s,P?s:a);case 7:return e.next=9,f();case 9:G({}),y(!1),I(!1),t&&(K([{addressType:"SHIPPING",id:s.address_id},{addressType:"BILLING",id:P?s.address_id:a.address_id}]),g("".concat(s.address_name," ").concat(s.pincode," ").concat(s.city))),Z(!1);case 14:case"end":return e.stop()}}),e)})));return ();return(0,o.useEffect)((function(){if(window.sessionStorage.removeItem("checkoutPageOptions"),!l&&d&&(null===d||void 0===d?void 0:d.length)>0&&!B){var e=K(),t=e.shippingAddress,s=e.billingAddress;z("onLoad",t,s)}}),[l]),o.createElement("div",null,o.createElement(u.uT,{show:!0,appear:!0,enter:"transition duration-200",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2"},o.createElement("div",{className:"px-3 py-5 bg-white rounded-md shadow"},o.createElement("div",{className:"flex items-center justify-between"},o.createElement("h6",{className:"font-semibold text-14 text-grey-700"},"Choose Delivery Address"),o.createElement("button",{type:"button",className:"text-blue-400 text-12",onClick:function(){p(),G({})}},"ADD NEW")),o.createElement(m.Z,{skeletonLoader:l,loader:k,addressList:d,activeAddressId:(null===J||void 0===J?void 0:J.id)||(null===J||void 0===J?void 0:J.address_id),disabledAddressId:P?null:(null===Y||void 0===Y?void 0:Y.id)||(null===Y||void 0===Y?void 0:Y.address_id),setEditAddress:G,setEditAddressType:function(){return Z("SHIPPING")},toggleAddNewAddress:p,onClick:function(e){return z("SHIPPING",e,Y)}}),o.createElement("label",{className:"flex items-center mt-3"},o.createElement("input",{type:"checkbox",className:"deca-checkbox",checked:P,onChange:function(){return _(!P)}}),o.createElement("p",{className:"ml-2 text-14 text-grey-700"},"Use same address for delivery and billing")))),o.createElement(u.uT,{show:!P,appear:!0,enter:"transition duration-200",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2"},o.createElement("div",{className:"p-5 mt-3 bg-white rounded-md shadow"},o.createElement("div",{className:"flex items-center justify-between"},o.createElement("h6",{className:"font-semibold text-14 text-grey-700"},"Choose Billing Address"),o.createElement("button",{className:"text-blue-400 text-12",onClick:,"ADD NEW")),o.createElement(m.Z,{loader:k,skeletonLoader:l,addressList:d,activeAddressId:(null===Y||void 0===Y?void 0:Y.id)||(null===Y||void 0===Y?void 0:Y.address_id),disabledAddressId:(null===J||void 0===J?void 0:J.id)||(null===J||void 0===J?void 0:J.address_id),setEditAddress:G,setEditAddressType:toggleAddNewAddress:p,onClick:))),o.createElement(u.uT,{show:s},o.createElement(v.P1,{toggleAddressPopup:toggleAddNewAddressHeddle:M,savedAddress:C})))}))}}]);