var ASCDP=window.ASCDP||{};ASCDP.adS=ASCDP.adS||{},ASCDP.adS.gaia={contentNodes:[],placementName:void 0,count:2,processed:-1,lastAdSlot:0,lastLoad:0,restricted:0,restrictedSafeArea:"d"===ASCDP.pageSet.view?300:200,sidebarContainer:null,gatheredSpace:0,lastChildY:0,insertY:0,decide:function(e){var t,a="",o=(o=e.outerHTML)||e.parentNode.outerHTML,i=ASCDP.adS.gaia,n=ASCDP.pageSet,r=ASCDP.adS,s="count",c=!!n.configs.gaia.matchTagsBefore.length&&o.match(i.beforeMatch),d=!!n.configs.gaia.matchTagsAfter.length&&o.match(i.afterMatch),l=o.match(i.adslotMatch),n=!!n.configs.gaia.resetBy.length&&o.match(i.resetMatch),o=i.getNextNode(e),g=(i.lastNode=e.previousElementSibling||e.parentNode.previousElementSibling,""),p="";for(t in o&&(g=(g=3===o.nodeType?o.textContent:o.outerHTML)||o.parentNode.outerHTML),i.lastNode&&(p=(p=i.lastNode.outerHTML)||i.lastNode.parentNode.outerHTML),i.insertY=ASCDP.adS.calcY(e,e.offsetTop),e.tagName&&e.tagName.match(i.exceptMatch)?s="skip":e.outerHTML&&e.outerHTML.match(i.exceptMatch)?s="unsure":0<i.processed&&c?(s="prepend",a="%cADLIB: GAIA prepend at "+i.processed,(p.match(i.adslotMatch)||p.match(i.exceptMatch)||p.match(/<\/h\d>/i))&&(i.insertY=ASCDP.adS.calcY(o,o.offsetTop),a="%cADLIB: GAIA prepend -> append at "+i.processed,s="append",(o&&g.match(i.exceptMatch)||e.tagName&&e.tagName.match(/h\d/i))&&(s="skip",a="%cADLIB: GAIA prepend -> append -> skip at "+i.processed))):d&&(i.insertY>i.restricted||o&&(g.match(i.adslotMatch)||g.match(i.exceptMatch))?(a="%cADLIB: GAIA append -> prepend at "+i.processed,s="prepend",i.lastNode&&(p.match(i.adslotMatch)||p.match(i.exceptMatch))&&(s="skip",a="%cADLIB: GAIA append -> prepend -> skip at "+i.processed)):(a="%cADLIB: GAIA append at "+i.processed,s="append",o=o||e.parentNode.parentNode.nextElementSibling||i.articleContainer.nextElementSibling||document.createElement("img"),i.insertY=ASCDP.adS.calcY(o,o.offsetTop))),r.adElts)r.adElts.hasOwnProperty(t)&&!t.match(/sky|pub_/)&&r.adElts[t].posY>i.insertY&&r.adElts[t].posY<i.insertY+r.getWinHeight()&&(l=!0);return(l||n)&&(a="%cADLIB: GAIA reset because "+(l?"adMatch":"reset"),s="reset",i.lastAdSlot=i.insertY,i.gatheredSpace=0),ASCDP.adS.debug&&a&&console.log(a,ASCDP.adS.logColor),s},scanChildNodes:function(t){var e,a,o=ASCDP.adS,i=o.gaia,n=t,r=n.nodeType.toString().match(/[38]/)?"skip":i.decide(n);if("unsure"===r&&n.childNodes)for(var s=0;s<n.childNodes.length&&(!(e=i.scanChildNodes(n.childNodes[s]))||"unsure"===(r=i.decide(e)));s++);else{try{a=parseFloat(getComputedStyle(n).height),isNaN(a)&&(a=n.getBoundingClientRect().height)}catch(e){var t=document.createRange();t.selectNodeContents(n),!t.getBoundingClientRect||(t=t.getBoundingClientRect())&&(a=t.bottom-t.top)}i.gatheredSpace+=a}if(i.gatheredSpace>o.getWinHeight()-250){if("append"===r)return n;if("prepend"===r)return i.lastNode}else o.debug&&console.log("%cADLIB: GAIA not enough gatheredSpace at "+i.processed,ASCDP.adS.logColor);return!1},getNextNode:function(e){return e.nextElementSibling||ASCDP.adS.gaia.getNextNode(e.parentNode||e.parentElement)},getContentNodes:function(){var a=ASCDP.adS.gaia;ASCDP.pageSet;a.contentNodes=[],a.wrapperList.forEach(},setRestrictedArea:function(){var e=ASCDP.adS,t=ASCDP.adS.gaia,a=(t.restricted=document.documentElement.scrollHeight||document.body.scrollHeight||document.body.offsetHeight,document.querySelectorAll("body *[id*='taboola-below-article'], body *[id*='taboola-mobile-below-article'], body *[class*='tbl-feed']")[0]),a=(a&&(t.restricted=e.calcY(a,a.offsetTop)-t.restrictedSafeArea),document.querySelectorAll("body *[id*='outbrain'], body .OUTBRAIN")[0]);a&&(t.restricted=e.calcY(a,a.offsetTop)-t.restrictedSafeArea)},gaiaHandler:function(){var e,t,a;"complete"===document.readyState&&(e=ASCDP.adS,t=e.gaia,0===(a=ASCDP.pageSet).configs.gaia.maxSlots||t.processed===t.contentNodes.length-1?(window.removeEventListener("scroll",t.gaiaHandler),t.observer=t.observer||new MutationObserver(function(e){t.getContentNodes(),t.processed<t.contentNodes.length-1&&(t.observer.disconnect(),window.addEventListener("scroll",t.gaiaHandler,!0),t.gaiaHandler())}),t.observer.observe(t.articleContainer,{attributes:!1,childList:!0,subtree:!0})):0<e.getScrollTop()&&!t.processing&&t.lastChildY<e.getScrollTop()+1.2*e.getWinHeight()&&(a.configs.gaia.ads=a.configs.gaia.ads.concat(adSSetup.adPlacements).concat(Object.keys(e.adElts)),a.configs.gaia.ads=a.configs.gaia.ads.filter(function(e,t){return a.configs.gaia.ads.indexOf(e)===t}),t.checkAndInject()))},checkAndInject:function(){var e=ASCDP.adS,t=ASCDP.pageSet,a=ASCDP.adS.gaia;if(!e.v3loading){a.processing=!0,e.calcAdPos(),a.setRestrictedArea(),a.getContentNodes();var o=ASCDP.adS.getWinHeight(),i="nothingToMatch",n=t.configs.gaia.matchTagsBefore.join("|")||i,r=t.configs.gaia.matchTagsAfter.join("|")||i,s=t.configs.gaia.except.join("|")||i,c=t.configs.gaia.ads.join("|")||i,i=t.configs.gaia.resetBy.join("|")||i;a.beforeMatch=new RegExp(n,"i"),a.afterMatch=new RegExp(r,"i"),a.exceptMatch=new RegExp(s,"i"),a.resetMatch=new RegExp(i,"i"),a.adslotMatch=new RegExp("(id|class)=['\"]("+c+")['\"']","i");for(var d=a.processed+1;d<a.contentNodes.length;d++){if(a.insertY=ASCDP.adS.calcY(a.contentNodes[d],a.contentNodes[d].offsetTop),a.insertY>e.getScrollTop()+1.75*o)return void(a.processing=!1);a.processed=d;var l=a.scanChildNodes(a.contentNodes[d]);if(l){l.outerHTML||(l=l.parentNode);var g,p,S,f=a.lastLoad+ASCDP.pageSet.lblk<=(new Date).getTime(),A=a.insertY<a.restricted,h=a.insertY>a.lastAdSlot+o,u=o-250<a.gatheredSpace,m=a.insertY>=a.firstY;if(m&&f&&A&&h&&u)return(g=document.createElement("div")).id=a.placementName+"_"+a.count+"Wrapper",g.setAttribute("class","gaiaWrapper"),g.style.cssText="position:relative;"+(t.configs.gaia["wrapperCSS"+t.pageTypes[t.view]]||t.configs.gaia.wrapperCSS),(p=document.createElement("div")).id=a.placementName+"_"+a.count,p.setAttribute("data-target","gaia="+p.id+";"+(t.configs.gaia.slotTarget||"")),g.appendChild(p),t.configs.gaia.ads.push(p.id),a.count++,l.insertAdjacentElement("afterend",g),t.configs.gaia.sizes&&t.configs.gaia.sizes[t.view]?e.slotSizeMap[p.id]=[{minWidth:1,sizes:t.configs.gaia.sizes[t.view]}]:e.setSize(p.id),S=0,e.slotSizeMap[p.id][0].sizes.map(e=>{(640!==e[0]||360!==e[1])&&e[1]>S&&(S=e[1])}),(e.adElts[p.id]||e.initAdElt(p.id)).adSlot=p,t.placeholder.disablePlaceholders=!1,e.addPlaceholder(p.id,{width:"100%",height:S}),(t.configs.gaia.fitSizeToSlot||a.fitSizeToSlot)&&e.stripSizes(p.id),t.configs.gaia.maxSlots&&t.configs.gaia.maxSlots--,a.lastAdSlot=a.insertY,e.renderAd(p.id),a.lastLoad=(new Date).getTime(),a.getContentNodes(),a.setRestrictedArea(),void(a.processing=!1);ASCDP.adS.debug&&(m||e.debug&&console.log("%cADLIB: GAIA afterFirstY at "+a.processed,ASCDP.adS.logColor),f||e.debug&&console.log("%cADLIB: GAIA loadBlock at "+a.processed,ASCDP.adS.logColor),A||e.debug&&console.log("%cADLIB: GAIA nearRestrictedBlock at "+a.processed,ASCDP.adS.logColor),h||e.debug&&console.log("%cADLIB: GAIA not enoughDistance at "+a.processed,ASCDP.adS.logColor),u||e.debug&&console.log("%cADLIB: GAIA not enoughSpace at "+a.processed,ASCDP.adS.logColor))}}a.processing=!1}},init:function(){ASCDP.adS.loadModules(["calcAdPos","calcY","getScrollTop"],function(){var e,t=ASCDP.adS,a=ASCDP.pageSet,o=ASCDP.adS.gaia,i=0,n=0,r=a.configs.gaia["markerCSS"+a.pageTypes[a.view]]||a.configs.gaia.markerCSS||'.gaiaWrapper:after {\n    display: block;\n    margin-top: .4rem;\n    content: "Anzeige";\n    font-size: 1.1rem;\n    line-height: 1.1;\n    text-align: center;\n    text-transform: uppercase;\n    text-decoration: none;\n    color: #7b828a;\n}';if(t.addCSS(r),a.pageCSS+=r,r="m"===a.view?"mrec_btf":"billboard_btf",o.placementName=a.configs.gaia.placementName||r,o.count=a.configs.gaia.startCount||o.count,a.configs.gaia.safeAreaHeight&&(o.restrictedSafeArea=a.configs.gaia.safeAreaHeight),t.calcAdPos(),o.articleContainer=document.querySelectorAll(a.configs.gaia.article.join())[0],o.articleContainer){if(o.wrapperList=o.articleContainer.querySelectorAll(a.configs.gaia.textWrapper.join()),!o.wrapperList[0])return o.observer=o.observer||new MutationObserver(function(e){setTimeout(o.init,0),o.observer.disconnect()}),void o.observer.observe(o.articleContainer,{attributes:!1,childList:!0,subtree:!0});for(var s in o.articlesPrevElement=o.articleContainer.previousElementSibling,o.articlesNextElement=o.articleContainer.nextElementSibling,o.articleOffset=t.calcY(o.articleContainer,o.articleContainer.offsetTop),a.configs.gaia.sidebar&&(o.sidebarContainer=document.querySelectorAll(a.configs.gaia.sidebar.join())[0],i=t.calcY(o.sidebarContainer,o.sidebarContainer.offsetTop),n=o.sidebarContainer?parseFloat(getComputedStyle(o.sidebarContainer).height):0),o.firstY=n+i,o.setRestrictedArea(),o.getContentNodes(),o.wrapperListarticleOffset=t.calcY(o.wrapperList[0],o.wrapperList[0].offsetTop),t.adElts)t.adElts.hasOwnProperty(s)&&-1===s.indexOf("sky")&&(e=t.adElts[s],(s=s.match(o.placementName+"_(.*)"))&&s>o.count&&(o.count=parseInt(s[1])+1),e.posY>o.lastAdSlot&&e.posY<o.wrapperListarticleOffset&&(o.lastAdSlot=e.posY));o.gatheredSpace+=o.wrapperListarticleOffset-o.articleOffset,window.addEventListener("scroll",o.gaiaHandler,!1),o.inited=!0}})}};