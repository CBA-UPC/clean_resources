.insider-opt-in-notification{width:422px;padding:0;border:1px solid #bababa;border-radius:3px;box-shadow:0 4px 4px -2px #888;background-color:#fbfbfb;font-family:Arial,sans-serif;position:fixed;top:-150px;left:50%;margin-left:-211px;z-index:9999999999999;animation:insider-optin-slide-down .6s ease 0s 1 forwards}@keyframes insider-optin-slide-down{from{top:-150px}to{top:0}}@keyframes insider-optin-slide-up{from{top:0}to{top:-150px}}.insider-opt-in-notification.insider-slide-up-invisible{animation:insider-optin-slide-up .6s ease 0s 1 forwards}.insider-opt-in-notification-inner-container{margin:0;padding:0 20px 10px}.insider-opt-in-notification-image-container{float:left;margin:13px 15px 0 0}.insider-opt-in-notification-image-container img{width:65px;height:65px}.insider-opt-in-notification-text-container{position:relative!important;padding:10px 0 0!important;color:#000!important;text-align:left!important;margin:0!important;line-height:1.4em!important}.insider-opt-in-notification-title{margin-bottom:5px;text-align:left;font-size:14px;font-weight:700;line-height:1.4em;color:#000;word-break:break-word;overflow:hidden}.insider-opt-in-notification-description{font-size:12px;line-height:1.4em;margin:10px 0;padding:0;text-align:left;word-break:break-word;overflow:hidden}.insider-brand-logo{float:left;font-size:10px;margin-top:8px;line-height:18px}.insider-brand-logo img{width:38px;margin-left:3px;float:right}.insider-opt-in-notification-button-container{float:right!important}.insider-opt-in-notification-button{width:auto;height:18px;min-width:100px;max-width:170px;line-height:18px;margin-left:3px;padding:5px;background:#f9f9f9;border:1px solid #bababa;border-radius:1px;display:inline-block;font-size:14px;text-align:center;cursor:pointer;box-sizing:content-box}.insider-opt-in-allow-button{background:#00c33d;color:#fff;border-color:#059833}@media all and (max-width:421px){.insider-opt-in-notification{width:100%;left:0;margin:0;border-radius:0;border-left:0;border-right:0;border-top:0}}.insider-opt-in-overlay{width:100%;height:100%;position:fixed!important;top:0;left:0;z-index:2147483646!important;display:block!important;background-color:#000!important;opacity:.8!important}.insider-opt-in-overlay-message{position:fixed;z-index:2147483647!important;color:#fff;left:50%;top:50%;width:380px;height:50px;text-align:center;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:20px}.insider-opt-in-instruction{background-color:#fff;position:fixed;display:flex;border-radius:4px;padding:16px;width:314px;top:5px;max-height:118px;left:110px;z-index:2147483647!important}.insider-opt-in-instruction-close{position:absolute;width:10px;height:10px;cursor:pointer;right:10px;top:10px;background-image:url(https://image.useinsider.com/webPushInstructionDefaultImage/nNd63YPeJ4UUH3QeRdg0lXDvp4mbnPsV.png);background-position:center;background-size:cover;background-repeat:no-repeat}.insider-opt-in-instruction-image{width:56px;min-height:56px;display:flex;align-items:center}.insider-opt-in-instruction-image img{width:56px;height:56px}.insider-opt-in-instruction-message{width:226px;padding-left:16px;display:flex;align-items:center;min-height:56px;font-size:13px;line-height:17px;color:#000}!1;if(t?.event_action==="add_to_wishlist"){r=!0;let i=t?.custom?.item_number_event?.split(","),a=t?.custom?.product_quantity?.split(",");i.forEach((n,s)=>{let o={id:n};a?.[s]&&(o.quantity=Number(a[s])),e.push(o)}),t.event_label==="pip"&&(e[0]={...e[0],...this.b.getPipData()})}return[e,r]}getSearchInfo(t){let e=[],r=!1;return t?.event_action==="hard_search"&&(r=!0,e.push(t?.event_label)),[e,r]}getViewItemInfo(t){let e=u(t?.params?.items||[]);const r=t?.custom?.stock_check_store_id;let i=!0;return e[0]={...e[0],quantity:1,...this.b.getPipData(),store_id:r},[e,i]}getStockCheckInfo(t){let{event_action:e,event_label:r,custom:i}=t||{},a=[],n=!1;return(e==="change_store_click"&&r==="change_store_link"||e==="stock_check_click"&&r==="stock check")&&(n=!0,a=i?.item_number_event?.split(",").map(s=>({id:s})),this.b.site_level_1==="p"&&(a[0]={...a[0],...this.b.getPipData()})),[a,n]}getWishlistInfo(t){let e=[],r=!1;if(t?.event_action==="view_list"){r=!0,e=u(t?.params?.items||[]);let i=t?.custom?.item_number_event?.split(",")||[],a=t?.custom?.product_quantity?.split(",")||[];i.forEach((n,s)=>{e.push({id:n,quantity:a[s]})})}return[e,r]}getViewCartInfo(t){let e=[],r=!1;return t?.event_label==="cart_view"&&(r=!0,e=u(t?.params?.items||[])),[e,r]}getPurchaseInfo(t){let e=[],r=!1;return t?.event_label==="success"&&(r=!0,e=u(t?.params?.items||[])),[e,r]}trackLocal(){let t=`_${this.name}Local`,e=`${t}Loaded`;if(window[t])window[t](this);else{let r=()=>{window[t]?.(this),window.removeEventListener(e,r)};window.addEventListener(e,r)}}trackAddToCart(){throw Error(this._MNOErrorMsg)}trackAddToWishlist(){throw Error(this._MNOErrorMsg)}trackStockCheck(){throw Error(this._MNOErrorMsg)}trackWishlist(){throw Error(this._MNOErrorMsg)}trackViewItem(){throw Error(this._MNOErrorMsg)}trackSearch(){throw Error(this._MNOErrorMsg)}trackViewCart(){throw Error(this._MNOErrorMsg)}trackPurchase(){throw Error(this._MNOErrorMsg)}}const g=function(l=[]){return l.length?l.reduce((t,{quantity:e=1})=>Number(t)+Number(e),0):1},y=function(l=[]){const t=l?.reduce((e,{price:r=0,quantity:i=1})=>Number(e)+Number(r)*Number(i),0)?.toFixed(2);return!t||t==="NaN"?0:Number(t)};class I extends C{constructor(t,e=window.utag_data){if(super("pinterest",null,"https://ct.pinterest.com/v3/",e),this.country=this.b.country,this.language=this.b.language,this.id=t[this.country]?.[this.language]?.[0]||t[this.country]?.[0],!this.id)throw new Error("Pinterest ID not defined in configuration");this.currency=t[this.country]?.[this.language]?.[1]||t[this.country]?.[1]||"CAD",this.tagType=t[this.country]?.[this.language]?.[2]||t[this.country]?.[2]||"script",this._scriptURL="https://s.pinimg.com/ct/core.js",this.tagType==="script"&&(window.pintrk||this._loadScript(),this.pintrk=window.pintrk,this.pintrk("load",this.id))}_getLineItemsArr(t=[]){return t.map(({id:e,quantity:r,price:i,name:a}={})=>{const n={product_id:e,product_quantity:r||1};return i&&(n.product_price=i),a&&(n.product_name=a),n})}_getEventData({items:t=[],value:e,currency:r,transaction_id:i,order_quantity:a,event_action:n,event_label:s}={}){const o={};if(t?.length&&(o.currency=r||this.currency,o.value=(e??Number(e))||y(t)||void 0,o.line_items=this._getLineItemsArr(t)),n==="view_item"||s==="pip"){const[{series:h,variant:d,name:m,category:A,category_local:D}={}]=t;o.line_items[0].product_name=m,o.line_items[0].product_category=`${D.toLowerCase()} - ${A}`,o.line_items[0].product_variant=d.toLowerCase(),o.line_items[0].product_brand=h.toLowerCase()}else s==="plp"&&this.b.page_category_level==="chapter"?o.line_items[0].product_category=`${this.b.site_level_2}`:n==="hard_search"&&(o.search_query=s);return a&&(o.order_quantity=a),i&&(o.order_id=i),o}_loadScript(){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};let t=window.pintrk;t.queue=[],t.version="3.0";const e=document.createElement("script");e.async=!0,e.src=this._scriptURL;const r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}_sendScriptEvent(t,e){this.pintrk("track",t,e)}_sendImgEvent(t,e){const r=(i,a={},n="ed[.]")=>{if(Array.isArray(i))i.forEach((s,o)=>{r(s,a,`ed[line_items][${o}][.]`)});else for(const s in i)Array.isArray(i[s])?r(i[s],a):a[n.replace(".",s)]=i[s]??null;return a};super.send({queryParams:new URLSearchParams(r(e,{tid:this.id,event:t,noscript:"1"}))})}send(t,e={}){this.tagType==="script"&&typeof this.pintrk=="function"?this._sendScriptEvent(t,e):this._sendImgEvent(t,e)}_trackEventCB(t,e,{once:r=!1}={}){window.addEventListener(t,({detail:i={}})=>{let{eventName:a,eventData:n={}}=e(i)||{};a&&this.send(a,n)},{once:r})}trackPageView(){if(this.tagType==="script")return this.pintrk("page");this.send("init")}trackSearch(t,{detail:{event_action:e,event_label:r}}){const i=this._getEventData({event_action:e,event_label:r});this.send("Search",i)}trackAddToCart(t,{detail:e}){const{event_label:r,params:{currency:i}={},custom:{cart_value_local:a}={}}=e,n={items:t,currency:i,event_label:r,value:a,order_quantity:g(t)},s=this._getEventData(n);this.send("AddToCart",s)}trackViewItem(t){const e=this._getEventData({items:t,event_action:"view_item"});this.send("PageVisit",e)}trackViewCategory(){this._trackEventCB("view_item_list",({event_label:t,params:{items:e=[]}}={})=>{if(t==="PLP - List"&&this.b.page_category_level==="chapter"){const r={line_items:e.filter(i=>i?.list_position<=6).map(({id:i})=>({product_id:i,product_category:this.b.site_level_2}))};return{eventName:"ViewCategory",eventData:r}}},{once:!0})}trackPurchase(t,{detail:e}){const{params:{currency:r,value:i,transaction_id:a}={},custom:{cart_quantity:n}={}}=e,s={items:t,value:i,transaction_id:a,currency:r,order_quantity:n||g(t)},o=this._getEventData(s);this.send("Checkout",o)}}function T(){return!!document.location.href.match("/order/confirmation/|/shoppingcart/")}const _=new I({ca:{en:["2616700781580","CAD","script"],fr:["2613689376861","CAD","script"]}});_.trackPageView(),_.track(c.SEARCH),_.track(c.ADD_TO_CART),_.b.site_level_1==="p"?_.track(c.VIEW_ITEM):_.b.site_level_1==="cat"?_.trackViewCategory(c.VIEW_CATEGORY):T()&&_.track(c.PURCHASE),_.trackLocal()})();
