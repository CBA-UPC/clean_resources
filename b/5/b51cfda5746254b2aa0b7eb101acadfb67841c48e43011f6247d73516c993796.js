/*!
 * Version - 18122023.1702910585371
 */
import{e as t,S as e,O as i,f as n,h as s,j as r,k as o,m as a,n as c,_ as l,C as u,p as h,q as d,r as f,t as w,u as p,v as m,w as g,x as v,E as y,y as b,z as I,F as k,A as _,B as T,D as S,G as E,L as O,H as L,I as A,J as R,K as N,M as P,l as j,a as D,N as C,P as U,U as x,g as M,Q as z,d as F,R as $,T as B,V as J,W as G}from"./p-dad51cc5.js";import{b as q,g as V}from"./p-30db41c1.js";import{b as W}from"./p-2328fa2e.js";import"./p-3234b281.js";import{J as H}from"./p-18f83baa.js";import{C as K}from"./p-a194da66.js";import{P as X}from"./p-a4ca7f39.js";import{c as Q,a as Y}from"./p-dfa39843.js";function Z(e){return i=>{if(i))return i.lift(();throw new TypeError("Unable to lift unknown Observable type")}}nst it=new i((t=>t.complete()));onst st=n(();tion lt(){return new st}ar ht,dt,ft,wt,pt;function mt(t){return!!(null==t?void 0:t.filename)&&!!(null==t?void 0:t.mimeType)}!ht||(ht={})),dt||(dt={})),function(t){t[t.NoFile=0]="NoFile",t[t.Failed=1]="Failed",t[t.Success=2]="Success"}(ft||(ft={})),wt||(wt={})),function(t){t[t.SessionStorage=0]="SessionStorage",t[t.LocalStorage=1]="LocalStorage",t[t.InMemory=2]="InMemory"}(pt||(pt={}));var gt=Q((function(t){!function(){ s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Y&&Y.global===Y?Y:void 0,r=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!r?"msSaveOrOpenBlob"in navigator?;s.saveAs=o.saveAs=o,t.exports=o}()}));const vt=yt=new y("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bt=new A("@firebase/auth");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */@license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pt(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ct{constructor(t,e){this.shortDelay=t,this.longDelay=e,At(e>t,"Short delay should be less than long delay!"),this.isMobile=a()||c()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zt=new Ct(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
*
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zt(t){var e;const i=t.auth,n=await t.getIdToken(),s=await Xt(t,async function(t,e){return $t(t,"POST","/v1/accounts:lookup",e)}(i,{idToken:n}));Ot(null==s?void 0:s.users.length,i,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=(null===(e=r.providerUserInfo)||void 0===e?void 0:e.length)?r.providerUserInfo.map(():[],a=(c=o,[...t.providerData.filter((),...c]);var c;const l=!!t.isAnonymous&&!(t.email&&r.passwordHash||(null==a?void 0:a.length)),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Yt(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(t,u)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e.type="NONE";const se=ne;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(he(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ce(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fe(e))return"Blackberry";if(we(e))return"Webos";if(le(e))return"Safari";if((e.includes("chrome/")||ue(e))&&!e.includes("edge/"))return"Chrome";if(de(e))return"Android";{const e=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==e?void 0:e.length))return e[1]}return"Other"}function ce(t=T()){return/firefox\//i.test(t)}unction ue(t=T()){return/crios\//i.test(t)}function he(t=T()){return/iemobile/i.test(t)}function de(t=T()){return/android/i.test(t)}function fe(t=T()){return/blackberry/i.test(t)}*
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{nged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}oactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}et _currentUser(){return this.currentUser}ameworks(){return this.frameworks}lass Ie{constructor(t){this.auth=t,this.observer=null,this.addObserver=b(()}**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Se extends Te{_linkToIdToken(t,e){switch(this.signInMethod){case"password":return t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return Jt(t,"POST","/v1/accounts:signInWithEmailLink",Ft(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:kt(t,"internal-error")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ee(t,e){return Jt(t,"POST","/v1/accounts:signInWithIdp",Ft(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e.PROVIDER_ID="password",Ae.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ae.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e.GOOGLE_SIGN_IN_METHOD="google.com",je.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ync function qe(t,e){const i=d(t);return await async function(t,e,i){await Zt(e);const n=!1===t?"provider-already-linked":"no-such-provider";Ot(new Set(e.providerData.map(().filter((t=>!!t))).has(i)===t,e.auth,n)}(!1,i,e.providerId),$e(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function We(t,e){const i={identifier:e,continueUri:jt()?Pt():"http://localhost"},{signinMethods:n}=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
d(t),i);return n||[]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ass Xe extends He{constructor(t,e){super(t,"facebook.com",e)}}
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends ii{StorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(();const i=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const n=this.storage.getItem(i);if(t.newValue!==n)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!e)return}const n=s=this.storage.getItem(i);L()&&10===document.documentMode&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(n,10):n()}opPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}pe="LOCAL";const si=ni;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */i.type="SESSION";const oi=ri;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const di="firebaseLocalStorageDb";nction pi(){const t=indexedDB.open(di,1);return new Promise(((e,i)=>{t.addEventListener("error",(),t.addEventListener("upgradeneeded",(),t.addEventListener("success",(async()=>{const i=t.result;i.objectStoreNames.contains("firebaseLocalStorage")?e(i):(i.close(),await ),e(await pi()))}))}))}ass vi{c initializeReceiver(){this.receiver=ai._getInstance(hi()?self:null),this.receiver._subscribe("keyChanged",(),this.receiver._subscribe("ping",()}AL";const yi=vi;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ct(3e4,6e4);nction _i(t){const{auth:e,user:i}=t;return Ot(i,e,"internal-error"),Be(i,new Ii(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Ct(2e3,1e4);sync function Li(t,e,i){const n=d(t);St(n.auth,e,Re);const s=bi(n.auth,i);return new Ai(n.auth,"linkViaPopup",e,s,n).executeNotNull()}class Ai extends Si{erCancellation(){const t=()=>{var e,i;this.pollId=(null===(i=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===i?void 0:i.closed)?window.setTimeout((,2e3):window.setTimeout(t,Ei.get())};t()}}Ai.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ri=new Map;class Ni extends Si{sync execute(){let t=Ri.get(this.auth._key());if(!t){try{const e=await async function(t,e){const i=function(t){return re("pendingRedirect",t.config.apiKey,t.name)}(e),n=t);if(!await n._isAvailable())return!1;const s="true"===await n._get(i);return await n._remove(i),s}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=Ri.set(this.auth._key(),t)}return this.bypassAuthState||Ri.set(this.auth._key(),(),t()}sync onExecution(){}**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */*
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mi=/^https?/;/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Ct(3e4,6e4);unction Bi(t){return new Promise(((e,i)=>{var n,s,r,o;f(null===(s=null===(n=ui().gapi)||void 0===n?void 0:n.iframes)||void 0===s?void 0:s.Iframe)e(gapi.iframes.getContext());else{if(!(null===(r=ui().gapi)||void 0===r?void 0:r.load)){const e=`__iframefcb${Math.floor(1e6*Math.random())}`;return ui()[e]=(o=`https://apis.google.com/js/api.js?onload=${e}`,new Promise(()).catch((t=>i(t)))}a()}})).catch(()}let Ji=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Gi=new Ct(5e3,15e3),qi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Hi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};unction Xi(t,e,i,n,s,r){Ot(t.config.authDomain,t,"auth-domain-config-required"),Ot(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:i,redirectUrl:n,v:h,eventId:s};if(e instanceof Re){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",R(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(r||{}))o[t]=e}if(e instanceof Ne){const t=e.getScopes().filter(();t.length>0&&(o.scopes=t.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const t of Object.keys(a))void 0===a[t]&&delete a[t];return`${/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)}?${I(a).slice(1)}`}const Qi=class{sync _openPopup(t,e,i,n){var s;return At(null===(s=this.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(t,e,i,n=500,s=600){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Hi),{width:n.toString(),height:s.toString(),top:r,left:o}),l=T().toLowerCase();i&&(a=ue(l)?"_blank":i),ce(l)&&(e=e||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((,"");if(l)&&"_self"!==a)return /**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e||"",a),new Ki(null);const h=window.open(e||"",a,u);Ot(h,t,"popup-blocked");try{h.focus()}catch(t){}return new Ki(h)}(t,Xi(t,e,i,Pt(),n),ci())}ync initAndGetManager(t){const e=await async function(t){const e=await function(t){return Ji=Ji||Bi(t),Ji}(t),i=ui().gapi;return Ot(i,t,"internal-error"),e.open({where:document.body,url:Wi(t),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qi,dontclear:!0},()}(t),i=new Di(t);return e.register("authEvent",(,gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t);for(const t of e)try{if(zi(t))return}catch(t){}kt(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Yi{* @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zi=o("authIdTokenMaxAge")||300;let tn=null;function en(t=w()){const e=p(t,"auth");if(e.isInitialized())return e.getImmediate();const i=function(t,e){const i=p(t,"auth");if(i.isInitialized()){const t=i.getImmediate(),n=i.getOptions();if(g(n,null!=e?e:{}))return t;kt(t,"already-initialized")}return i.initialize({options:e})}(t,{popupRedirectResolver:Qi,persistence:[yi,si,oi]}),n=o("authTokenSyncURL");if(n){const t=(s=n,;!i,t,(),function(e){d(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(i)}var s;const r=m("auth");return r&&function(t,e,i){const n=be(t);Ot(n._canInitEmulator,n,"emulator-config-failed"),Ot(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!!(null==i?void 0:i.disableWarnings),r=ke(e),{host:o,port:a}=e);n.config.emulator={url:`${r}//${o}${null===a?"":`:${a}`}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||)}(i,`http://${r}`),i}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function nn(t){return new i((function(e){return{unsubscribe:t,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}}))}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */l(new u("auth",((t,{options:e})=>{const i=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),{apiKey:s,authDomain:r}=i.options;return((t,i)=>{Ot(s&&!s.includes(":"),"invalid-api-key",{appName:t.name}),Ot(!(null==r?void 0:r.includes(":")),"argument-error",{appName:t.name});const n={apiKey:s,authDomain:r,clientPlatform:"Browser",apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ge("Browser")},o=new ye(t,i,n);return o,e),o})(i,n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(()),l(new u("auth-internal",(t=>{return e=be(t.getProvider("auth").getImmediate()),new Yi(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),f("@firebase/auth","0.21.1",void 0),f("@firebase/auth","0.21.1","esm2017");var sn={includeMetadataChanges:!1};function rn(t,e){return void 0===e&&(e={}),
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return function(t,e){return void 0===e&&(e=sn),new i((function(i){return{unsubscribe:N(t,e,{next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}}))}(t,{includeMetadataChanges:!0})}(t).pipe((n=function(t){return function(t,e){void 0===e&&(e={});var i=t.data();return t.exists()&&"object"==typeof i&&null!==i?(e.idField&&(i[e.idField]=t.id),i):i}(t,e)},Z(()));var n}const on={close:"Schlieen",confirm:"Einloggen",email:"Bitte E-Mail Adresse erneut eingeben",emailDesc:"Der Login Link wurde auf einem anderen Gert, Browser oder ein zweites Mal geffnet. Bitte E-Mail Adresse erneut verifizieren.",codeInvalidTitle:"Login ungltig",codeInvalid:"Der Link ist abgelaufen. Bitte erneut anmelden.","auth/invalid-email":"Die eingegebene E -Mail -Adresse ist ungltig","auth/user-not-found":"Die eingegebene E -Mail -Adresse ist nicht registriert","auth/wrong-password":"Das eingegebene Passwort ist falsch","auth/too-many-requests":"Das Login ist fehlgeschlagen","auth/email-already-in-use":"Die eingegebene E -Mail -Adresse ist bereits registriert","auth/operation-not-allowed":"Das Login war nicht erfolgreich","auth/weak-password":"Das eingegebene Passwort ist zu schwach","auth-error-expired-action-code":"Ihr Link ist abgelaufen"},an={close:"Close",confirm:"Log in",email:"Please confirm your email address",emailDesc:"The login link was already opened on another Device/Browser or was opened a second time. Please revalidate your email address.",codeInvalidTitle:"Login invalid",codeInvalid:"Your link has expired, please log in again.","auth/invalid-email":"The entered email address is invalid","auth/user-not-found":"The entered email address is not registered","auth/wrong-password":"The entered password is incorrect","auth/too-many-requests":"The login failed","auth/email-already-in-use":"The entered email address is already registered","auth/operation-not-allowed":"The login was not successful","auth/weak-password":"The entered password is too weak","auth-error-expired-action-code":"Your link has expired"},cn={close:"Kapal",confirm:"Giri yapmak",email:"Ltfen e-posta adresinizi dorulayn",emailDesc:"Giri balants zaten baka bir cihazda/taraycda ald veya ikinci kez ald. Ltfen e -posta adresinizi gzden geirin.",codeInvalidTitle:"Giri geersiz",codeInvalid:"Balantnzn sresi doldu, ltfen tekrar giri yapn","auth/invalid-email":"Girilen e -posta adresi geersiz","auth/user-not-found":"Girilen e -posta adresi kaytl deil","auth/wrong-password":"Girilen ifre yanl","auth/too-many-requests":"Giri baarsz oldu","auth/email-already-in-use":"Girilen e -posta adresi zaten kaytl","auth/operation-not-allowed":"Giri baarl deildi","auth/weak-password":"Girilen ifre ok zayf","auth-error-expired-action-code":"Balantnzn sresi doldu"},ln={close:"Zamkn",confirm:"Zaloguj sie",email:"prosz potwierd swj adres E-mail",emailDesc:"Link logowania zosta ju otwarty na innym urzdzeniu/przegldarce lub zosta otwarty po raz drugi. Przejmuj swj adres e -mail.",codeInvalidTitle:"Nieprawidowa nazwa uytkownika",codeInvalid:"Twj link wygas, zaloguj si ponownie","auth/invalid-email":"Wpisany adres e -mail jest nieprawidowy","auth/user-not-found":"Wprowadzony adres e -mail nie jest zarejestrowany","auth/wrong-password":"Wprowadzone haso jest nieprawidowe","auth/too-many-requests":"Logowanie nie powiodo si","auth/email-already-in-use":"Wpisany adres e -mail jest ju zarejestrowany","auth/operation-not-allowed":"Logowanie nie byo powodzeniem","auth/weak-password":"Wprowadzone haso jest zbyt sabe","auth-error-expired-action-code":"Wprowadzone haso jest zbyt sabe"},un={close:"Fechar",confirm:"Conecte-se",email:"Por favor, confirme seu endereo de email",emailDesc:"O link de login j foi aberto em outro dispositivo/navegador ou foi aberto pela segunda vez. Revalide seu endereo de e -mail.",codeInvalidTitle:"Login invlido",codeInvalid:"Seu link expirou, faa login novamente","auth/invalid-email":"O endereo de e -mail inserido  invlido","auth/user-not-found":"O endereo de e -mail inserido no est registrado","auth/wrong-password":"A senha inserida est incorreta","auth/too-many-requests":"O login falhou","auth/email-already-in-use":"O endereo de e -mail inserido j est registrado","auth/operation-not-allowed":"O login no foi bem -sucedido","auth/weak-password":"A senha inserida  muito fraca","auth-error-expired-action-code":"Seu link expirou"},hn={close:"Cerca",confirm:"Acceso",email:"Por favor confirme su direccin de correo electrnico",emailDesc:"El enlace de inicio de sesin ya estaba abierto en otro dispositivo/navegador o se abri por segunda vez. Revaliden su direccin de correo electrnico.",codeInvalidTitle:"Inicio de sesin no vlido",codeInvalid:"Su enlace ha caducado, vuelva a iniciar sesin","auth/invalid-email":"La direccin de correo electrnico ingresada no es vlida","auth/user-not-found":"La direccin de correo electrnico ingresada no est registrada","auth/wrong-password":"La contrasea ingresada es incorrecta","auth/too-many-requests":"El inicio de sesin fall","auth/email-already-in-use":"La direccin de correo electrnico ingresada ya est registrada","auth/operation-not-allowed":"El inicio de sesin no tuvo xito","auth/weak-password":"La contrasea ingresada es demasiado dbil","auth-error-expired-action-code":"Tu enlace ha expirado"},dn={close:"Bezrs",confirm:"Belps",email:"Krem erstse meg email cmt",emailDesc:"A bejelentkezsi linket mr megnyitottk egy msik eszkzn/bngszn, vagy msodszor nyitottk meg. Krjk, krjk, jjlessze e -mail cmt.",codeInvalidTitle:"rvnytelen bejelentkezs",codeInvalid:"A linkje lejrt, krjk, jelentkezzen be jra","auth/invalid-email":"A bert e -mail cm rvnytelen","auth/user-not-found":"A bert e -mail cmet nem regisztrltk","auth/wrong-password":"A bert jelsz helytelen","auth/too-many-requests":"A bejelentkezs meghibsodott","auth/email-already-in-use":"A bert e -mail cm mr regisztrlt","auth/operation-not-allowed":"A bejelentkezs nem volt sikeres","auth/weak-password":"A bert jelsz tl gyenge","auth-error-expired-action-code":"A linked lejrt"},fn={close:"Dichtbij",confirm:"Login",email:"Bevestig je e-mailadres",emailDesc:"De inlogkoppeling werd al geopend op een ander apparaat/browser of werd een tweede keer geopend. Revalideer uw e -mailadres opnieuw.",codeInvalidTitle:"Inloggen ongeldig",codeInvalid:"Uw link is verlopen, log alstublieft opnieuw in","auth/invalid-email":"Het ingevoerde e -mailadres is ongeldig","auth/user-not-found":"Het ingevoerde e -mailadres is niet geregistreerd","auth/wrong-password":"Het ingevoerde wachtwoord is onjuist","auth/too-many-requests":"De login is mislukt","auth/email-already-in-use":"Het ingevoerde e -mailadres is al geregistreerd","auth/operation-not-allowed":"De login was niet succesvol","auth/weak-password":"Het ingevoerde wachtwoord is te zwak","auth-error-expired-action-code":"Uw link is verlopen"},wn={close:"Vicino",confirm:"Login",email:"Conferma il tuo indirizzo email",emailDesc:"Il collegamento di accesso era gi stato aperto su un altro dispositivo/browser o  stato aperto una seconda volta. Si prega di rivalidare il tuo indirizzo email.",codeInvalidTitle:"Accesso non valido",codeInvalid:"Il tuo link  scaduto, per favore accedi di nuovo","auth/invalid-email":"L'indirizzo e -mail inserito non  valido","auth/user-not-found":"L'indirizzo e -mail inserito non  registrato","auth/wrong-password":"La password inserita non  corretta","auth/too-many-requests":"L'accesso non  riuscito","auth/email-already-in-use":"L'indirizzo e -mail inserito  gi registrato","auth/operation-not-allowed":"L'accesso non ha avuto successo","auth/weak-password":"La password inserita  troppo debole","auth-error-expired-action-code":"Il tuo link  scaduto"},pn={close:"Fermer",confirm:"Se connecter",email:"Merci de confirmer votre adresse e-mail",emailDesc:"Le lien de connexion a dj t ouvert sur un autre appareil / navigateur ou a t ouvert une deuxime fois. Veuillez revalider votre adresse e-mail.",codeInvalidTitle:"Connexion invalide",codeInvalid:"Votre lien a expir, veuillez vous reconnecter","auth/invalid-email":"L'adresse e-mail saisie n'est pas valide","auth/user-not-found":"L'adresse e-mail saisie n'est pas enregistre","auth/wrong-password":"Le mot de passe entr est incorrect","auth/too-many-requests":"La connexion a chou","auth/email-already-in-use":"L'adresse e-mail saisie est dj enregistre","auth/operation-not-allowed":"La connexion n'a pas russi","auth/weak-password":"Le mot de passe entr est trop faible","auth-error-expired-action-code":"Votre lien a expir"},mn=new class{constructor(){this.translations={de_CH:on,de_DE:on,en_US:an,es_ES:hn,fr_FR:pn,hu_HU:dn,it_IT:wn,nl_NL:fn,pl_PL:ln,pt_PT:un,tr_TR:cn,:an},this._user=new P(void 0),this.user$=this._isInitializingisInitializing=this._isInitializing.asObservable()}async waitForInitialUser(){return t=this.user$.pipe(rt((t=>!!t))),new Promise(((e,i)=>{const n=new s({next:t=>{e(t),n.unsubscribe()},error:i,complete:()=>{i(new st)}});t.subscribe(n)}));vtId=q("tenantId"),console.log("TenantId: "+e.tenantId),K.getInternal()&&async function(t){return await be(t)._initializationPromise,ji(t,void 0,!1)}(e).then((t=>{t&&console.log("Internal Login User from redirect",t)})).catch((t=>{console.error("Error during login",t)})),this.authSubscription=nn(e).subscribe((async e=>{if(e&&!e.isAnonymous){this.handlePasswordDelete(),await this.handlePasswordlessLogin()t()).token;const i=await this.getFirebaseStoreUser(t,e.uid);i&&i.tenantId&&this._user.next(i)}else K.getInternal()?(console.log("Handling internal auth"),this.internalLogin().then((t=>{console.log("Internal user",t)}))):await this.handlePasswordlessLogin();this._isInitializing.next(!1)})),this.user$.subscribe((async t=>{console.log("set user in state to",t),t&&(K.getInternal()?t.candidateId?W.state.user=t:gn.getInternalCandidateId().then((e=>{t.candidateId=e,W.state.user=t})).catch((e=>{console.error(e),W.state.user=t})):W.state.user=t)})))}refreshToken(){const t=en();return new Promise(((e,i)=>{this.authSubscription=nn(t).subscribe((async t=>{if(t){try{console.log("Refreshed auth token"),this.token=(await t.getIdTokenResult(!0)).token}catch(t){console.warn("Refreshing auth token error",t),i(t)}e(this.token||"")}else i({message:{lang:"en-US",value:"Something went wrong, please try it again."}})}))}))}async deleteTempUser(){var t;const e=en();return await(null===(t=e.currentUser)||void 0===t?void 0:t.delete())}createPassword(t=12){let e="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!&$%?",n=i.length;for(let s=0;s<t;s++){const t=Math.floor(Math.random()*n);e+=i.charAt(t),5===s&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(t%26))}return e}getCustomerId(){return q("customerId")}handlePasswordDelete(){const t=en(),e=V();if(t.currentUser&&Ve(0,window.location.href)&&-1!=window.location.href.indexOf(e.accountDetItem("emailForSignIn");e||(e=window.prompt("Please provide your email for confirmation")),console.log("deleting account");const i=Ae.credentialWithLink(e,window.location.href);(async function(t,e){return Be(d(t),e)})(t.currentUser,i).then((async t=>{console.log("deleting account for realz"),await t.user.delete()})).catch((t=>{console.error(t)}))}}async handlePasswordlessLogin(){if(en(),Ve(0,window.location.href)){const t=j.setLoading("login"),e=this.getCustomerId();let i=window.localStorage.getItem("emailForSignIn");if(i)await this.handlePasswordlessLoginInternal(i,e),t.off();else{const i=window.document.querySelector("csb-email-confirm-dialog");if(i)i.addEventListener("modalConfirmed",(async i=>{const n=i.detail.email;n&&(await this.handlePasswordlessLoginInternal(n,e),t.off())}),{once:!0}),i.show();else{const i=K.getLocale();let n=this.translations[i];n||(n=this.translations.default);const s=document.createElement("csb-email-confirm-dialog");s.buttonTag="csb-button",s.emailPlaceholder="E-Mail",s.confirmLabel=n.confirm,s.errorCloseLabel=n.close,s.emailTitle=n.email,s.emailDescription=n.emailDesc,s.innerHTML=`\n                        <csb-email-confirm-friendly-error code="auth/invalid-email" message="${n["auth-error-invalid-email"]}></csb-email-confirm-friendly-error>\n                        <csb-email-confirm-friendly-error code="auth/user-not-found" message="${n["auth-error-user-not-found"]}></csb-email-confirm-friendly-error>\n                        <csb-email-confirm-friendly-error code="auth/wrong-password" message="${n["auth-error_wrong-password"]}></csb-email-confirm-friendly-error>\n                        <csb-email-confirm-friendly-error code="auth/too-many-requests" message="${n["auth-error-too-many-requests"]}></csb-email-confirm-friendly-error>\n                        <csb-email-confirm-friendly-error code="auth/email-already-in-use" message="${n["auth-error-email-already-in-use"]}></csb-email-confirm-friendly-error>\n                        <csb-email-confirm-friendly-error code="auth/operation-not-allowed" message="${n["auth-error-operation-not-allowed"]}></csb-email-confirm-friendly-error>\n                        <csb-email-confirm-friendly-error code="auth/weak-password" message="${n["auth-error-weak-password"]}></csb-email-confirm-friendly-error>\n                        <csb-email-confirm-friendly-error code="auth/expired-action-code" message="${n["auth-error-expired-action-code"]}></csb-email-confirm-friendly-error>\n                    `,document.body.appendChild(s),setTimeout((()=>{s.addEventListener("modalConfirmed",(async i=>{const n=i.detail.email;n&&(await this.handlePasswordlessLoginInternal(n,e),t.off())}),{once:!0}),s.show()}),200)}}}}async handlePasswordlessLoginInternal(t,e){const i=en();if(i.currentUser&&i.currentUser.isAnonymous){const i=this.getFavoriteJobs();await mn.deleteTempUser(),await this.signInWithoutPassword(t,i,e),window.localStorage.removeItem("emailForSignIn")}else{W.state.newUser=!1;try{await this.signInWithoutPassword(t,[],e)}catch(t){console.error(t),W.stn=en(),s=window.location.href;this.deleteParamsFromUrl();const r=await async function(t,e,i){const n=d(t),s=Ae.credentialWithLink(e,i||Pt());return Ot(s._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),Ge(n,s)}(n,t,s);console.log("Current Auth User: "+JSON.stringify(n.currentUser)),await mn.setCandidate(e),this.getFirebaseStoreUser(i,r.user.uid).then((t=>{t&&!t.candidateId&&this._user.next(t)}))}catch(t){if("auth/invalid-action-code"===t.code){this.deleteParamsFromUrl();const t=K.getLocale(),e=document.getElementsByTagName("csb-info-modal");let i=this.translations[t];i||(i=this.translations.default);const n=i.codeInvalid,s=i.codeInvalidTitle,r=i.close;if(e.length>0)await e.item(0).open(s,n,r);else{const t=document.createElement("csb-info-modal");document.body.appendChild(t),await t.open(s,n,r)}}else{const e=window.document.querySelector("csb-email-confirm-dialog");e&&e.showError(t),console.error(t)}}}deleteParamsFromUrl(){const t=new URLSearchParams(window.location.search),e=[],i=["extJobId","applySourcampaign","utm_source","locale","overrideEmployeeLogin","isInternalUser","referralCode","jobId","showApply","showJobAlert","jobPipeline"];t.forEach(((t,n)=>{-1===i.indexOf(n)&&e.push(n)})),e.forEach((e=>{t.delete(e)}));let n=window.location.pathname+((null==t?void 0:t.toString())?"?"+(null==t?void 0:t.toString()):"");window.history.replaceState({},"",`${n}`)}getUserDocRef(t,e){const i=D();return C(i,`customers/${t}/users/${e}`)}async getUserDocSnap(t,e){const i=this.getUserDocRef(t,e);return await U(i)}async getFirebaseStoreUser(t,e){const i=en().currentUser;if(!i)throw new Error("Current User empty");if(!(await this.getUserDocSnap(t,e)).exists){const e={displayName:i.displayName||"",email:i.email||"",phoneNumber:i.phoneNumber||"",photoURL:i.photoURL||"",p,uid:i.uid,enaymous:!1};await x(this.getUserDocRef(t,i.uid),e,{merge:!0})}return new Promise((i=>{this.firebaseStoreUserSubscription=rn(this.getUserDocRef(t,e)).pipe(ut((t=>!(!t||!t.tenantId)))).subscribe((t=>{t&&t.tenantId&&i(t)}))}))}async favoriteJob(t){var e,i,n,s,r;let o=!1;const a=this.getCustomerId(),c=await this.createOrGetTempUser();if(c.isAnonymous){console.log("baseStore user in anon: ",W.state.user),(null===(e=W.state.user)||void 0===e?void 0:e.favoriteJobs)||(W.state.user.favoriteJobs=[]);const a=null===(i=W.state.user)||void 0===i?void 0:i.favoriteJobs.findIndex((e=>e.jobId===t.jobId));if(-1===a){const e={date:new Date,jobId:t.jobId,title:t.title,link:t.link};null===(n=W.state.user)||void 0===n||n.favoriteJobs.push(e),W.state.user&&(W.state.user=Object.assign({},W.state.user)),o=!0}else null===(s=W.state.user)||void 0===s||s.favoriteJobs.splice(a,1),W.state.user&&(W.state.user=Object.assign({},W.state.user));localStorage.setItem("favoriteJobs",JSON.stringify(null===d 0===r?void 0:r.favoriteJobs))}else{localStorage.removeItem("favoriteJobs");const e=await this.getFirebaseStoreUser(a,c.uid);e.favoriteJobs||(e.favoriteJobs=[]);const i=e.favoriteJobs.findIndex((e=>e.jobId===t.jobId));if(-1===i){const i={date:new Date,jobId:t.jobId,title:t.title,link:t.link};e.favoriteJobs.push(i),W.state.user&&(W.state.user=Object.assign({},e)),o=!0}else e.favoriteJobs.splice(i,1),W.state.user&&(W.state.user=Object.assign({},e));await x(this.getUserDocRef(a,e.uid),{favoriteJobs:e.favoriteJobs},{merge:!0})}return o}async linkedInLogin(){const t=this.getCustomerId(),e=new Pe("linkedin.com");let i;const n=en();if(n.currentUser&&!n.currentUser.isAnonymous)console.log("Joining linkedin google account"),i=await Li(n.currentUser,e);else{console.log("Sign in with linkedin account"),i=await Oi(n,e);const t=ti(i);if(null==t?void 0:t.isNewUser){const t=mn.createPassword(),e=Ae.credential(i.user.email,t);await qe(i.user,e)}await this.setCandidate(this.getFavoriteJobs())}return new Promise((e=>{this.userSubscription=rn(this.getUserDocRef(t,i.user.uid)).subscribe((t=>{e(t)}))}))}async passwoin(t,e,i=!0){const n=en(),s=this.getCustomerId(),r=K.getLocale();let o=await K.getBrand();const a=V().internalMailBlacklist||[];if(a.length){let e=t.split("@");if(e.length>1){const t=e[e.length-1];if(a.find((e=>e===t)))throw new Error("blacklisted")}}i&&window.localStorage.setItem("emailForSignIn",t);const c=M(),l=$(c,"sendLoginMail");let u=e?new URL(e):new URL(window.location.href);u.pathname=u.pathname.replace(/\&/g,"%26"),console.log("Current TenantID:",n.tenantId);const h=await l({customerId:s,email:t,locale:r,url:u.toString(),brand:o.brand});console.log("Result from sendLoginMail",h)}async microsoftLogin(){const t=this.getCustomerId(),e=en(),i=new Pe("microsoft.com");let n;if(i.setCustomParameters({}),e.currentUser&&!e.currentUser.isAnonymous)console.log("Joining with microsoft account"),n=await Li(e.currentUser,i);else{console.log("Sign in with microsoft account"),n=await Oi(e,i);const t=ti(n);if(null==t?void 0:t.isNewUser){const t=mn.createPassword(),e=Ae.credential(n.user.email,t);await qe(n.user,e)}await this.setCandidate(this.getFavoriteJobs())}return new Promise((e=>{this.userSubscription=rn(this.getUserDocRef(t,n.user.uid)).subscribe((t=>{e(t)}))}))}async appleLogin(){const t=this.getCustomerId(),e=en(),i=new Pe("apple.com");let n;if(i.addScope("email"),e.currentUser&&!e.currentUser.isAnonymous)console.log("Joining with apple account"),n=await Li(e.currentUser,i);else{console.log("Sign in with apple account"),n=await Oi(e,i);const t=ti(n);if(null==t?void 0:t.isNewUser){const t=mn.createPassword(),e=Ae.credential(n.user.email,t);await qe(n.user,e)}await this.setCandidate(this.getFavoriteJobs())}return new Promise((e=>{this.userSubscription=rn(this.getUserDocRef(t,n.user.uid)).subscribe((t=>{e(t)}))}))}async googleLogin(){const t=this.getCustomerId(),e=en(),i=new je,n=e.currentUser;let s;if(n&&!n.isAnonymous)console.log("Joining with google account"),s=await Li(n,i);else{console.log("Sign in with google account"),s=await Oi(e,i);const t=ti(s);if(null==t?void 0:t.isNewUser){const t=mn.createPassword(),e=Ae.credential(s.user.email,t);await qe(s.user,e)}await this.setCandidate(this.getFavoriteJobs())}return new Promise((e=>{this.userSubscription=rn(this.getUserDocRef(t,s.user.uid)).subscribe((t=>{e(t)}))}))}async login(t,e){const i=en(),n=this.getCustomerId(),s=await function(t,e,i){return Ge(d(t),Ae.credential(e,i))}(i,t,e);return new Promise((t=>{this.userSubscription=rn(this.getUserDocRef(n,s.user.uid)).subscribe((e=>{t(e)}))}))}async loginWithProvider(t,e){let i;switch(t){case"google":case"google.com":i=await mn.googleLogin();break;case"linkedin":case"linkedin.com":i=await mn.linkedInLogin();break;case"apple":case"apple.com":i=await mn.appleLogin();break;case"microsoft":case"microsoft.com":i=await mn.microsoftLogin();break;case"email":await mn.passwordLessLogin(e);break;case"saml.internal":await mn.samlLogin();const t=new URLSearchParams(new URL(window.location.href).search);if(!t.has("overrideEmployeeLogin")){t.set("overrideEmployeeLogin","true");const e=new URL(window.location.href);e.search=t.toString(),window.location.href=e.toString()}break;case"oidc.internal":await mn.internalLogin()}return i&&i.tenantId&&this._user.next(i),i}async internalLogin(){const t=this.getCustomerId(),e=en(),i=new Pe("oidc.internal");W.state.scopes&&W.state.scopes.split(" ").forEach((t=>{i.addScope(t),console.log("adding scope: "+t)})),e.currentUser&&e.currentUser.isAnonymous&&(await z(this.getUserDocRef(t,e.currentUser.uid)),await e.currentUser.delete()),this.mergeInternal||await Oi(e,i)}async oidcLogin(){const t=this.getCustomerId(),e=en(),i=new Pe("oidc.test");let n;i.setCustomParameters({tenant:q("microsoftClientId")}),i.addScope("User.Read"),i.addScope("openid"),i.addScope("profile"),e.currentUser&&e.currentUser.isAnonymous&&(await z(this.getUserDocRef(t,e.currentUser.uid)),await e.currentUser.delete()),n=await Oi(e,i),console.log(n);const s=await fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+(await n.user.getIdTokenResult()).token}});console.log(s.status),console.log(await s.json());const r=ti(n);return(null==r?void 0:r.isNewUser)&&(W.state.newUser=!0,console.log("Updating tenant for new user")),new Promise((e=>{this.userSubscription=rn(this.getUserDocRef(t,n.user.uid)).subscribe((t=>{e(t)}))}))}async samlLogin(){const t=this.getCustomerId(),e=en(),i=new Ce("saml.internal");let n;e.currentUser&&e.currentUser.isAnonymous&&(await z(this.getUserDocRef(t,e.currentUser.uid)),await e.currentUser.delete()),ne,i);const s=ti(n);return(null==s?void 0:s.isNewUser)&&(W.state.newUser=!0,console.log("Updating tenant for new user")),new Promise((e=>{this.userSubscription=rn(this.getUserDocRef(t,n.user.uid)).subscribe((t=>{e(t)}))}))}async signUp(t,e){const i=this.getCustomerId(),n=en(),s=await async function(t,e,i){const n=be(t),s=await Ue(n,{returnSecureToken:!0,email:e,passworResponse(n,"signIn",s);return await n._updateCurrentUser(r.user),r}(n,t,e);return W.state.newUser=!0,new Promise((t=>{this.userSubscription=rn(this.getUserDocRef(i,s.user.uid)).subscribe((e=>{this._user.next(e),t(e)}))}))}async createOrGetTempUser(){let t;const e=this.getCustomerId(),i=en();if(i.currentUser){t=i.currentUser;try{await t.getIdToken(!0)}catch(e){F.trackClientEvent("Could not refresh token for uid: "+t.uid,3,e)}let n=t.uid;console.log("Using currently logged on user: "+n);const s=localStorage.getItem("favoriteJobs");let r=[];if(s&&ous)W.state.usassign({},t),{enabled:!1,favoriteJobs:r});else if((await this.getUserDocSnap(e,n)).exists())this.userSubscription=rn(this.getUserDocRef(e,n)).pipe(ut((t=>!!(null==t?void 0:t.uid)))).subscribe((t=>{this._user.next(t)}));else{const i={email:t.email,uid:t.uid,enabled:!1,tenantId:e,isAnonymous:!1,favoriteJobs:r};console.log("newCandidateUser",i),await x(this.getUserDocRef(e,n),i,{merge:!0});let s=this.getUserDocRef(e,n);const o=await U(s);o.exists()?this._user.next(o.data()):console.warn("Could not get doc for temp user")}}else t=(await async function(t){var e;const i=be(t);if(await i._initializationPromise,null===(e=i.currentUser)||void 0===e?void 0:e.isAnonymous)return new xe({user:i.currentUser,providerId:null,operationType:"signIn"});const n=await Ue(i,{returnSecureToken:!0}),s=await xe._fromIdTokenResponse(i,"signIn",n,!0);return await i._updateCurrentUser(s.user),s}(i)).user,W.state.user={email:"",uid:t.uid,enabled:!1,isAnonymous:!0,tenantId:t.tenantId,favoriteJobs:[]},console.log("Generated temp user with id "+t.uid);return t}async setCandidate(t){this._isInitializing.next(!0);const e=M(),i=$(e,"setCandidate");await i({customerId:this.getCustomerId(),favoriteJobs:t}),this._isInitializing.next(!1)}async logout(t=!0){try{const e=en();this.firebaseStoreUserSubscription&&this.firebaseStoreUserSubscription.unsubscribe(),this.userSubscription&&this.userSubscription.unsubscribe(),this.authSubscription&&tibe(),W.state&&(W.state.profile=void 0,W.state.user=void 0,W.state.email=void 0),await e.signOut(),this._user.next(void 0),t&&window.location.reload()}catch(t){console.error(t)}}isLoggedIn(){return!!en().currentUser}isAnonymous(){var t;const e=en();return null===(t=null==e?void 0:e.currentUser)||void 0===t?void 0:t.isAnonymous}getFavoriteJobs(){let t=[];return W.state.user&&W.state.user.favoriteJobs&&(t=[...W.state.user.favoriteJobs]),t}async getFirstExistingProvider(t){const e=en(),i=await We(e,t);return null==i?void 0:i[0]}async signInAndLink(t,e){const i=Oe.fromJSON(e);if(!i)return;const n=en(),s=await We(n,t);console.log(s);const r=s[0];if(r){let t;switch(r){cast=new Pe("linkedin.com");break;case"apple":t=new Pe("apple.com");break;case"microsoft":t=new Pe("microsoft.com")}if(t){const e=await Oi(n,t);await qe(e.user,i)}}}},gn=new class{getCustomerId(){return q("customerId")}async deleteProfile(){const t=this.getCustomerId(),e=M(),i=$(e,"deleteProfile");return(await i({customerId:t})).data}async getCandidateFields(){const t=this.getCustomerId(),e=M(),i=$(e,"getCandidateFields");return(await i({customerId:t})).data}async getApplicationFields(){const t=this.getCustomerId(),e=M(),i=$(e,"getApplicationFields");return(await i({customerId:t})).data}async getApplication(t){const e=this.getCustomerId(),i=M(),n=$(i,"getJobApplication");return(await n({customerId:e,applicationId:t})).data}async getInternalCandidateId(){const t=this.getCustomerId(),e=M(),i=$(e,"getInternalCandidateId");return(await i({customerId:t})).data}async updateUserCandidateIdFromEmail(t){const e=this.getCustomerId(),i=M(),n=$(i,"updateUserCandidateIdFromEmail");return(await n({customerId:e,email:t})).data}async getQuestions(t,e){const i=this.getCustomerId(),n=M(),s=$(n,"getQuestions");return(await s({customerId:i,jobReqId:t,locale:e})).data}async getStatusList(){const t=this.getCustomerId(),e=M(),i=$(e,"getStatusList");return(await i({customerId:t})).data}async applyToJob(t,e,i){const n=this.getCustomerId(),s=M(),r=$(s,"applyToJob"),o=en(),a=window.csb.job.language;try{const s=await r({customerId:n,jobData:e,jobReqId:t,locale:a,isExistingCandidate:i});if(s&&s.data&&s.data.code){if(401!==s.data.code&&"unauthenticated"!==s.data.code)throw s.data;F.trackException(new Error("Apply to job (unauthenticated)"),4,{applyToJobResult:s,customerId:n,locale:a,jobReqId:t,data:e,currentUser:o.currentUser}),await mn.refreshToken()}return s.data}catch(i){throw!i.code||401!==i.code&&"unauthenticated"!==i.code?(F.trackException(i,4,{message:"Apply to job (error)",error:i,customerId:n,locale:a,jobReqId:t,data:e,currentUser:o.currentUser}),o.currentUser&&await o.currentUser.getIdTokenResult(!0),i):(F.trackException(i,4,{message:"Apply to job (error 401)",error:i,customerId:n,locale:a,jobReqId:t,data:e,currentUser:o.currentUser}),await mn.refreshToken(),i)}}async checkCandidateExists(t,e){const i=M(),n=$(i,"checkCandidateExists");return(await n({customerId:t,email:e})).data}async createProfile(t){const e=this.getCustomerId();let i=K.getLocale();"de_DE"!==i&&"en_US"!==i&&(i="de_DE");const n=M(),s=$(n,"createProfile");return(await s({customerId:e,jobData:t,locale:i})).data}async updateProfile(t,e=[]){const i=this.getCustomerId(),n=M(),s=$(n,"updateProfile");return(await s({customerId:i,profile:t,applicationIds:e})).data}async updateApplication(t,e,i=[],n){const s=this.getCustomerId(),r=M(),o=$(r,"updateApplication");return(await o({customerId:s,jobData:t,applicationId:e,filesToDelete:n,applicationIds:i})).data}async reinstateApplication(t){let e=this.getCustomerId();const i=M(),n=$(i,"reinstateJobApplication");return(await n({customerId:e,applicationId:t})).data}async retractApplication(t){const e=this.getCustomerId(),i=M(),n=$(i,"retractJobApplication");return(await n({customerId:e,applicationId:t})).data}async getProfile(){const t=this.getCustomerId(),e=M(),i=K.getLocale(),n=$(e,"getProfile");return(await n({customerId:t,locale:i})).data}async downloadFileByUrl(t){let e=q("functionsUrl");e.endsWith("/")||(e+="/"),await mn.refreshToken();const i=await fetch(e+t,{headers:{Authorization:"Bearer "+mn.token}});let n="document";const s=i.headers.get("Content-Disposition");if(s&&-1!==s.indexOf("attachment")){const t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(s);null!=t&&t[1]&&(n=t[1].replace(/['"]/g,""))}const r=await i.blob();gt.saveAs(r,n,{autoBfield]","csb-picklist","[csb-picklist]","csb-upload","[csb-upload]","csb-field-conditional"],this.observerChanges=void 0}getHostElement(){return"string"==typeof this.host?document.getElementById(this.host):this.host}querySelectorAll(t=this.elementsAll){var e;let i=t.jo.getHostElement();return n?[...Array.from((null===(e=n.shadowRoot)||void 0===e?void 0:e.querySelectorAll(i))||[]),...Array.from(n.querySelectorAll(i))]:[]}async filterReadonlyFields(t){return t.filter((t=>!t.readonly))}async filterConditionallyHiddenFields(t){async function e(i){var n;let s=i.parentElement,r=null==s?void 0:s.closest("csb-field-conditional");return!r||!t.includes(r)null===(n=r.isVisible)||void 0===n?void 0:n.call(r))&&await e(r)}let i=[];for(let n of t)await e(n)&&i.push(n);return i}checkFieldPresence(t){let e=this.querySelectorAll(),i=!0,n=t.map((t=>t.name)),s=e.map((t=>t.name));for(let t of n)s.includes(t)||(console.warn("Name not found in <form>: "+t),i=!1);return i}loadObject(t){this.loadEntries(Object.entries(t||{}),!1)}loadObjectOnlyWhenEmpty(t){this.loadEntries(Object.entries(t||{}),!0)}loadEntries(t,e){let i=this.querySelectorAll();for(let n of i)this.loadSingle(n,this.getValueForName(n.name,t),e)}getValueForName(t,e){var i;return =e.find((e=>(null==e?void 0:e[0])===t)))||void 0===i?void 0:i[1]}loadSingle(t,e,i){var0&&mt(e[0])?i&&((null===(n=t.files)||void 0===n?void 0:n.length)||0)>0||(t.files=e.filter((t=>mt(t)))):i&&((null===(s=t.values)||void 0===s?void 0:s.length)||0)>0||t.updateValues(e.map((t=>null==t?void 0:t.toString()))):void 0!==e&&(e&&"boolean"!=typeof e&&"string"!=typeof e&&(e=""+e),i&&void 0!==t.value||t.updateValue(e))}async isInvalid({showValidationMsgs:t=!0,scroll:e=!0,scrollOffset:i=200,scrollContainer:n}){let s=this.querySelectorAll();s=await this.filterConditionallyHiddenFields(s),s=await this.filterReadonlyFields(s);let r=[];for(let e of s)e.validationMsgEnabled=t,r.push(e.isInvalid());let o=await Promise.all(r),a=o.filter((t=>t));if(e&&a.length>0){let t=s[o.findIndex((t=>t))];vn.scrollToInvalidElement(t,i,n),vn.focusInvalidElement(t)}return!!a.length&&a}async retrieveObject(t){let e={},i=this.querySelectorAll();i=await this.filterConditionallyHiddenFields(i),i=await this.filterReadonlyFields(i);for(let n of i)t&&!t.includes(n.name)||(e[n.name]=this.retrieveSingle(n));return e}retrieveSinglefiles?t.files:Array.isArray(t.values)?t.values:t.value}observeChanges(){return this.observerChanges||(this.observerChanges=new i((t=>{let e=this.getHostElement();e&&e.addEventListener("changed",(e=>{t.next(e.detail)}))}))),this.observerChanges}static scrollToInvalidElement(t,e,i){if(!t)return;let n=document.body,s=window;i&&(n=i,s=i);const r=n.getBoundingClientRect().top,o=t.getBoundingClientRect().top;s.scrollTo({top:o-r-e,behavior:"smooth"})}static focusInvalidElement(t,e=!0){setTimeout((()=>{null==t||t.focus({preventScroll:e})}),200)}async resetFields(){let t=this.querySelectorAll();for(let e of t)e.reset&&await e.rs.formServ,this.elementsPicklist=["csb-picklist","[csb-picklist]"]}async loadPicklistData(t,e){e||(e=[]);let i=this.formService.querySelectorAll(this.elementsPicklist),n=i.map((t=>(null==t?void 0:t.picklist)||"")).filter((t=>t));if(n=[...new Set([...n,...e])],n&&0==n.length)return{};let s=await X.getMultiple(n,t);for(let t of i)t.picklist&&(t.optionValues=s[t.picklist]);return s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bn extends k{constructore Storage:this.message,Object.setPrototypeOf(this,bn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return In(t)===this.code}get serverResponseponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function In(t){return"storage/"+t}function kn(){return new bn("unknown","An unknown error occurred, please check the error payload for server response.")}function _n(){return new bn("retry-limit-exceeded","Max retry time for operatnew bn("app-deleted","The Firebase app was deleted.")}function Ln(t,e){return new bn("invalid-format","String does not match format '"+t+"': "+e)}function An(t){throw new bn("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distribute for the rn this.path_}get isRooomponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Rn.makeFromUrl(t,e)}catch(e){return("invalid-default-bucket","Invalid default bucket '"+t+"'.")}static makeFromUrl(,"i");function r(t){t.path_=decodeURIComponent(t.path)}const o=e.replace(/[.]/g,"\\."),a=[{regex:s,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${n}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:r},{regex:new RegExp(`^https?://${"firebasestorage.googleapis.com"===e?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${n}/([^?#]*)`,gth;e++){const n=a[e],t||(t=""),i=new Rn(s[n.indices.buModify(i);break}}if(null==i)throw function(t){return new bn("invalid-url","Invalid URL '"+t+"'.")}(t);return i}}class Nn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is ng permissions and
 * limitations under the License.
 */function Pn(t){return"string"==typeof t||t instanceof String}function jn(t){return Dn()&&t instanceof Blob}function Dn(){return"undefined"!=typeof Blob&&!B()}function Cn(t,e,i,n){if(n<e)throw En(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>i)throw En(`Invalid value for '${t}'. Expected ${i} or less.`)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,e,i){let n=e;return null==i&&(n=`https://${e}`),`${i}://${n}/v0${t}`}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xn;
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mn(t,e){const i=t>=500&&t<600,n=-1!==[408,429].indexOf(t),s=-1!==e.indexOf(t);return i||n||s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is d implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(xn||(xn={}));class zn{constructor(t,e,i,n,s,r,o,a,c,l,u,h=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=n,this.successCodes_=s,this.additionalRetryCodes_=r,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=(t,e)=>{const i=this.resolve_,n=this.reject_,s=e.connection;if(e.wasSuccessCode)try{const t=this.callback_(s,s.getResponse());void 0!==t?i(t):i()}catch(t){n(t)}else if(null!==s){const t=kn();t.serverResponse=s.gallback_?this.errorCallback_(s,t):t)}else n(e.canceled?this.appDelete_?On():Tn():_n())};this.canceled_?t(fId_=function(t,e,i){let n=1,s=null,r=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...t){l||(l=!0,e.apply(null,t))}function h(e){s=setTimeout((()=>{s=null,t(f,c())}),e)}function d(){r&&clearTimeout(r)}function f(t,...e){if(l)return void d();if(t)return d(),void u.call(null,t,...e);if(c()||o)rcall(null,t,...e);let i;n<64&&(n*=2),1===a?(a=2,i=0):i=1e3*(n+Math.random()),h(i)}let w=!1;function p(t){w||(w=!0,d(),l||(null!==s?(t||(a=2),clearTimeout(s),h(0)):t||(a=1)))}return h(0),r=setTimeout((()=>{o=!0,p(!0)}),i),p}(((t,e)=>{if(e)return void t(!1,new Fn(!1,null,!0));const i=this.connectionFactory_();this.pendingConnection_=i;const n=t=>{null!==this.progressCallback_&&this.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)};null!==this.progressCallback_&&i.addUploadProgressListener(n),i.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&i.removeUploadProgressListener(n),this.pendingConnection_=null;const e=i.getErrorCode()===xn.NO_ERROR,s=i.getStatus();if(!e||Mn(s,this.additionalRetr}),t,this.timeout_)}appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Fn{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is dor the specific language governing permissions and
 * limitations under the License.
 */
function $n(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Bn(...t){const e=$n();if(append(t[e]);return i.getBlob()}if(Dn())return new Blob(t);throw new bn("unsupported-environment","This browser doesn't seem to support creating Blobs")}class Jn{constructor(t,e){this.data=t,this.contentType=e||null}}function Gn(t){const e=[];for(let i=0;i<t.length;i++){let n=t.charCodeAt(i);n<=127?e.push(n):n<=2047?e.push(192|n>>6,128|63&n):55296==(64512&n)?i<t.length-1&&56320==(64512&t.charCodeAt(i+1))?(n=65536|(1023&n)<<10|1023&t.charCodeAt(++i),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)):e.push(239,191,189):56320==(64512&n)?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(e)}function qn(t,e){switch(t){case"base64":{const i=-1!==e.indexOf("-"),n=-1!==e.indexOf("_");if(i||n)throw Ln(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const i=-1!==e.indexOf("+"),n=-1!==e.indexOf("/");if(i||n)throw Ln(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let i;try{i=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){if("undefined"==typeof atob)throw new bn("unsupported-environment","base-64 is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.");return atob(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}catch(e){if(e.message.includes("polyfill"))throw e;throw Ln(t,"Invalid character found")}const n=new Uint8Array(i.length);for(let t=0;t<i.length;t++)n[t]=i.charCodeAt(t);return n}class Vn{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw Ln("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;var n,s;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */null!=i&&(this.base64=(n=i).length>=(s=";base64").length&&n.substring(n.length-s.length)===s,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}class Wn{constructor(t,e){let i=0,n="";jn(t)?(this.data_=t,i=t.size,n=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,e){if(jn(this.data_)){const r=(n=t,s=e,(i=this.data_).webkitSlice?i.webkitSlicn,s):i.slice?i.slice(n,s):null);return null===r?null:new Wn(r)}var i,n,s;{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Wn(i,!0)}}static getBlob(...t){if(Dn()){const e=t.map((t=>t instanceof Wn?t.data_:t));return new Wn(Bn.apply(null,e))}{const e=t.map((t=>Pn(t)?function(t,e){switch(t){case"raw":return new Jn(Gn(e));case"base64":case"base64url":return new Jn(qn(t,e));case"data_url":return new Jn(function(t){const e=new Vn(t);return e.base64?qn("bon(t){let e;try{e=decodeURIComponent(t)}catch(t){throw Ln("data_url","Malformed data URL.")}return Gn(e)}(e.rest)}(e),new Vn(e).contentType)}throw kn()}("raw",t).data:t.data_));let i=0;e.forEach((t=>{i+=t.byteLength}));const n=new Uint8Array(i);let s=0;return e.forEach((t=>{for(let e=0;e<t.length;e++)n[s++]=t[e]})),new Wn(n,!0)}}uploadData(){return this.data_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is ASIS,
 * WITHOUT WAcense for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,e){return e}class Xn{constructor(t,e,i,n){this.server=t,tht,e,i,n){this.url=t,this.method=e,this.handler=i,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t){if(!t)throw kn()}function es(t,e){return function(i,n){const s=function(t,e,i){const n=function(t){let e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(i=e)||Array.isArray(i)?null:e;var i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return null===n?null:function(t,e,i){const n={type:"file"},s=i.length;for(let t=0;t<s;t++){const s=i[t];n[s.local]=s.xform(n,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const i=new Rn(t.bucket,t.fullPath);return e._makeStorageReference(i)}})}(n,t),n}(t,n,i)}(t,n,e);return ts(null!==s),s}}function is(t){return function(e,i){let n;return n=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new bn("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new bn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new bn("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new bn("unauthorized","User does not have permission to access '"+t.path+"'."):i,n.status=e.getStatus(),n.serverResponse=i.serverRes){this.current=t,this.total=e,this.finalized=!!i,this.metadata=n||null}}function rs(t,e){let i=null;try{i=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){ts(!1)}return ts(!!i&&-1!==(e||["active"]).indexOf(i)),i}function os(t){switch(t){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";case"error":default:return"error"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t,e,i){if("function"==typeof t||null!=e||null!=i)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=i?i:void 0;else{const e=t;this.next=e.next,this.error=e.error,this.complete=e.complete}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIESNS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t){return(...e)=>{Promise.resolve().then((()=>t(...e)))}}class ls extends class{constructor(){this.sent_=!1),this.errorCode_=xn.NO_ERROR,this.se=new Promxhr_.seCode(){if(!this.sent_)throw An("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!thisn this.xhr_.response}getErrorText(){if(!this.sent_)throw An("cannot .getErrorText() before sending");return this.xhr_.statusTeaupload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function us(){return new ls}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._mew Xn("bucket")),t.push(new Xn("generation")),t.pname","fullPath",!0));const e=new Xn("name");e.xform=function(t,e){return function(t){return!Pn(t)||t.length<2?t:Hn(t)}(e)},t.push(e);const i=new Xn("size");return i.xform=function(t,e){return void 0!==e?Number(e):e},t.push(i),t.push(new Xn("timeCreated")),t.push(new Xn("updated")),t.push(new Xn("md5Hash",null,!0)),t.push(new Xn("cacheControl",null,!0)),t.push(new Xn("contentDisposition",null,!0)),t.push(new Xn("contentEncoding",null,!0)),t.push(new Xn("contentLanguage",null,!0)),t.push(new Xn("contentType",null,!0)),t.push(new Xn("metadata","customMetadata",!0)),Qn=t,Qn}(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=t=>{if(this._request=void 0,this._chunkMultiplier=1,t._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const e=this.isExponentialBackoffExpired();if(Mn(t.status,[])){if(!e)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();t=_n()}this._error=t,this._transition("error")}},this._metadataErrorHandler=t=>{mpleteTransitions_():(this._error=t,f.storage.maxUploadRetryTime,this._promise=new Promise(((t,e)=>{this._resolve=t,this._reject=e,this._stnull,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._stats._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((t,e)=>{const i=function(t,e,i,n,s){const r=e.bucketOnlyServerUrl(),o=ns(e,n,s),a={name:o.fullPath},c=Un(r,t.host,t._protocol),l={"X-Goog-Upload-Protocol":"resumaber-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=Yn(o,i),h=new Zn(c,"POST",(function(t){let e;rs(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){ts(!1)}return ts(Pn(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=l,h.body=u,h.errorHandler=is(e),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(i,us,t,e);this._request=n,n.getPromise().then((t=>{this._request=void 0,this._uploadUrl=t,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const t=this._uploadUrl;this._resolveToken(((e,i)=>{const n=function(t,e,i,n){const s=new Zn(i,"POST",(function(t){const e=rs(t,["active","final"]);let i=null;try{i=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){ts(!1)}i||ts(!1);const s=Number(i);return ts(!isNaN(s)),new ss(s,n.size(),"final"===e)}),t.maxUploadRetryTime);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=is(e),s}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(n,us,e,i);this._request=s,s.getPromise().then((t=>{t=t,this._request=void 0,this._updateProgress(t.current),this._needToFetchStatus=!1,t.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const t=262144*this._chunkMultiplier,e=new ss(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(((n,s)=>{let r;try{r=function(t,e,i,n,s,r,o,a){const c=new ss(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw new bn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const l=c.total-c.current;let u=l;s>0&&(u=Math.min(u,s));const h=c.current;let d="";d=0===u?"finalize":l===u?"upload, finalize":"upload";const f={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":`${c.current}`},w=n.slice(h,h+u);if(null===w)throw Sn();const p=new Zn(i,"POST",(function(t,i){const s=rs(t,["active","final"]),o=c.current+u,a=n.size();let l;return l="final"===s?es(e,r)(t,i):null,new ss(o,a,"final"===s,l)}),e.maxUploadRetryTime);return p.headers=f,p.body=w.uploadData(),p.progressCallback=a||null,p.errorHandler=is(t),p}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(t){return this._error=t,void this._transition("error")}const o=this._ref.storage._makeRequest(r,us,n,s,!1);this._request=o,o.getPromise().then((t=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(t.current),t.finalized?(this._metadata=t.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((t,e)=>{const i=function(t,e,i){const n=Un(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,r=new Zn(n,"GET",es(t,i),s);return r.errorHandler=function(t){const e=is(t);return function(i,n){let s=e(i,n);return 404===i.getStatus()&&(s=new bn("object-not-found","Object '"+t.path+"' does not exist.")),s.serverResponse=n.serverResponse,s}}(e),r}(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(i,us,t,e);this._request=n,n.getPromise().then((t=>{this._request=void 0,this._metadata=t,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((t,e)=>{const i=function(t,e,i,n,s){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;const c=ns(e,n,s),l=Yn(c,i),u=Wn.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",n,"\r\n--"+a+"--");if(null===u)throw Sn();const h={name:c.fullPath},d=Un(r,t.host,t._protocol),f=t.maxUploadRetryTime,w=new Zn(d,"POST",es(t,i),f);return w.urlParams=h,w.headers=o,w.body=u.uploadData(),w.errorHandler=is(e),w}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.smetadata=t,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;cccess":thisn("canceled");break;case"running":this._start()}}get snapshot(){const t=os(this._stat this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach((t=>{this._notifyObserver(t)}))}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(os(this._state)){case"success":cs(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":cs(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(os(this._state)){case"running":case"paused":t.next&&cs(t.next.bind(t,this.snapshot))();break;case"success":t.complete&&cs(t.complete.bind(t))();break;case"canceled":case"e.errois._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or ons and
 * limitations under the Licensn.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._lo}get root(){const t=new Rn(this._location.bu t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new Rn(this._location.bucket,t);return new ds(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new bn("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}function fs(t,e){if(t instanceof ms){const i=t;if(null==i._bucket)throw new bn("no-default-bucket","No default buc you set the 'storageBucket' property when initializing the app?");const n=new ds(i,i._bucket);return null!=e?fs(n,e):n}return void 0!==e?function(t,e){const i=function(t,e){const i=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?i:t+"/"+i}(t._location.path,e),n=new Rn(t._location.bucket,i);return new ds(t.storage,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e):t}function ws(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof ms)return new ds(t,e);throw En("To use ref(service, url), the first argument must be a Storage instance.")}return fs(t,e)}function ps(t,e){const i=null==e?void 0:e.storageBucket;return null==i?null:Rn.makeFromBucketSpec(i,t)}class ms{constructor(t,e,i,n,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=n,this._firebaseVersion=s,this._bucket=null,this._host="firebasestorage.googleapis.com",this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=n?Rn.makeFromBucketSpec(n,this._host):ps(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Rn.makeFromBucketSpec(this._url,t):ps(t,this.app.options)}get maxUploadRetryTimumber.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Cn("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}async _getAppCheckToken(){const t=this._arn t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ds(this,t)}_makeRequest(t,e,i,n,s=!0){if(this._deleted)return new Nn(On());{const r=function(t,e,i,n,s,rCompoe(t[n])+"&");return i=i.slice(0,-1),i}(t.urlParams),c=t.url+a,l=Object.assign({},t.headers)e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(l,i),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(l,r),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(l,n),new zn(c,t.method,l,t.body,t.succes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}(t,this._appId,i,n,e,this._firebaseVersion,s);return this._requests.add(r),r.getPromise().then((()=>this._requests.delete(r)),(()=>this._requests.delete(r))),),this._getAest(t,e,i,n).getPromise()}}const gs="@firebase/storage";function vs(t,e,i){return function(t,e,i){return t._throwIfRoot("uploadBytesResumable"),new hs(t,new Wn(e),i)}(t=d(t),e,i)}function ys(t,e){return ws(t=d(t),e)}function bs(t=w(),e){t=d(t);const i=p(t,"storage").getImmediate({identifier:e}),n=J("storage");return n&&function(t,e,i,n={}){!function(t,e,i,n={}){t.host=`${e}:${i}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken="string"==typeof s?s:G(s,t.app.options.projectId))}(t,e,i,n)}(i,...n),i}l(new u("storage",(function(t,{instanceIdentifier:e}){const i=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ms(i,n,s,e,h)}),"PUBLIC").setMultipleInstances(!0)),f(gs,"0.10.1",""),f(gs,"0.10.1","esm2017");class Is{constructor(t){this.formService=t,this.elementsPicklist=["csb-upload","[csb-upload]"]}loadObject(t){let e=this.formService.querySelectorAll(this.elementsPic i of e)t[i.name]&&this.loadSingle(i,t[i.name])}loadSingle(t,e){let i=Array.isArray(e)?e:[e];t.addExistingFiles(i)}async uploadFiles(){let t=this.formService.querySelectorAll(this.elementsPicklist).map((t=>t.upload()));return await Promise.all(t)}}class ks{constructor(t,e){this.loahis.formP.formUploadService=new Is(this.formService)}getLoadingId(t,e){return t&&t+"-"+(e||this.loadingPostfix)}setLoading(t,e){return j.setLoading(this.getLoadingId(t,e))}fixLoading(t,e){j.fixLoading(this.getLoaale(),n=await this.formPicklistService.loadPicklistData(i,t);W.state.pickListData=n,this.initFields(),setTimeout((()=>{e.off()}),800)}async fill(t){this.formService.loadObjecce.loadObject(t)}async initFields(){if(this.fields&&this.fields.length)return;let t=await gn.getCandidateFields(),e=await gn.getApplicationFields();W.state.fields=this.fields=[...t,...e].map((t=>null==t?void 0:t.name))}async saveF{const e=this.setLoading("save");await mn.createOrGetTempUser();let i=!1,n=await this.formService.retrieveObject(this.fields||[]);t&&(n=t(n));let s=(await this.formUploadService.uploadFiles()).every((t=>t!==ft.Failed));try{if(n&&s){if(n=Object.assign(Object.assign({},n),{filesToDeletesaveAjax(n))throw"Could not save files and upload";W.state.filesToDelete=[],i=!0}}catch(t){console.error("Error on save",t),this.onSaveError(t)}finally{e.off()}return i}onSaveError(t){W.state.error=this.saveErrorMsg}async saveProfileAjax(t){if(t=Object.assign(Object.assign({},t),{filesToDelete:W.state.filesToDelete}),console.log("Save profile data:",t),!await gn.updateProfile(t))throw"Could not update profile";W.state.filesToDelete=[]}async loadProfile(){const t=this.setLoading("load"),e=await gn.getProfile();return W.state.profile=e,console.log("Profile:",e),t.off(),e}async fillEmail(t){t.email&&this.formService.loadObjectOnlyWhenEmpty({contactEmail:t.email})}getFirstQuestionContainer(){let t=this.formService.querySelectorAll(["csb-field-questions-container","[csb-field-questions-container]"]);return t&&t[0]}async getQuestionsFormData(){let t=this.getFirstQuestionContainer();return t?await t.getQuestionFieturn;let i=this.getFirstQuestionContainer();i&&!i.job&&(i.job=t,e&&(i.answers=e.questions),i.formService=this.formService,i.initialize())}}const _s=new class extends ks{constructor(){super("form-profile","profile")}async deleteProfile(t){const e=this.setLoading("delete");await gn.deleteProfile(),e.off(),t?window.location.href=t:window.location.reload()}async saveAjax(t){var e;return(null===(e=W.state.user)||void 0===e?void 0:e.candidateId)?!!await gn.updateProfile(t):!!await gn.createProfile(t)}async loadJob(t){let e=t.jobReqId,i="";if(q("idContainsLang")){let e=t.appLocale;if(!e){let i=new URL(t.link);e=new URLSearchParams(i.search).get("locale")}e&&(i="-"+e)}let n=await H.getJob(e+i);return n||(n=await H.getPreviewJob(e)),n}loadFullProfile(t){if(this._fullProfile)return this._fullProfile;const e=()=>!mn.isLoggedIn()||mn.isAnonymous(),i={signinNeeded:e(),reload:async()=>{const t=");await s(),t.off()}},n=this._fullProfile=new P(i);async function s(){var t;i.profile=await _s.loadProfile(),(null===(t=i.profile)||void 0===t?void 0:t.jobs)&&(i.applications=i.profile.jobs.map((t=>({application:t})))),i.profile&&await _s.fill(i.profile),n.next(Object.assign({},i))}mn.waitForInitialUser().then((async o=>{i.signinNeeded=e(),n.next(Object.assign({},i));const a=this.setLoading("load");await this.fillEmail(o),await s(),a.off(),(null==t?void 0:t.loadJobs)&&await r()}));let r=async()=>{if(i.applications){let t=i.applications.map((async t=>{t.job=await this.loadJob(t.application),t.job&&this._fullProfile.next(Object.assign({},i))}));await Promise.all(t)}};return n}async retractApplication(t){var e;const i=this.setLoading("retract","application");if(await gn.retractApplication(t)){const t=await _s.loadProfile();if(this._fullProfile){let i=this._fullProfile.value;i.profile=t;let n=(null==t?void 0:t.jobs)||[],s=({application:t})=>n.find((e=>e.applicationId===t.applicationId));i.applications=null===(e=i.applications)||void 0===e?void 0:e.filter(s),this._fullProfile.next(Object.assign({},i))}}else W.state.errorId="retract-application";i.off()}};class Ts{static async openLoginWithProviders(t){await Ts.open({showProviders:!0},t)}static registerProviderListener(t,e){t.addEventListener("click",(async t=>{let i=t.target;if(i.closest(".do-login-google"))await Ts.providerSignin("google",e);else if(i.closest(".do-login-linkedin"))await Ts.providerSignin("linkedin",e);else if(i.closest(".do-login-microsoft"))await Ts.providerSignin("microsoft",e);else if(i.closest(".do-login-apple"))await Ts.providerSignin("apple",e);else if(i.closest(".do-signout"))await mn.logout();else{if(!i.closest(".do-login-with-providers"))return;Ts.openLoginWithProviders(e)}t.preventDefault(),t.stopPropagation()}))}static registerGlobalProviderListener(t){Ts.globalProviderListener||(Ts.registerProviderListener(document,t),Ts.globalProviderListener=!0)}static async open(t={},e,i="global-login-dialog"){Ts.registerGlobalProviderListener(e);let n=document.getElementById(i);await n.open((async(t,e)=>{if(t){Ts.toggleLoadingDialog(!0);let t=Ts.linkSrdLessLogin(e.email,t),Ts.toggleLoadingDialog(!1),window.location.href=n.getAttribute("login-redirect-url")}}),t),n.enableSuccessButton=await n.isValid(!1),n.addEventListener("enterPressed",(async()=>{n.trySuccess()})),n.addEventListener("changed",(function(t){let{valid:e}=t.detail;n.enableSuccessButton=e}))}static toggleLoadingDialog(t,e="global-login-loading-dialog"){let i=document.getElementById(e);t?i.open():i.close(!0)}static getAccountExistsMessage(t){switch(t){case"de_DE":return"Es gibt bereits ein Konto mit der E-Mail Adresse {email}. Bitte melden Sie sich ber E-Mail an statt LinkedIn.";case"de_EN":return"There is already an account with the email address (email). Please sign in via email instead of LinkedIn.";case"de_AT":case"ch_DE":return"Es gibt bereits ein Konto mit der E-Mail Adresse {email}. Bitte melden Sie sich ber E-Mail an statt LinkedIn.";case"ch_FR":return"Il existe dj un compte avec l'adresse e-mail {email}. Veuillez vous connecter par e-mail au lieu de LinkedIn.";case"ch_IT":return"Esiste gi un account con l'indirizzo e-mail {email}. Effettuare l'accesso tramite e-mail anzich tramite LinkedIn.";case"hu_HU":return"Mr van egy fik a {email} e-mail cmmel. Krjk, a LinkedIn helyett e-mailen keresztl jelentkezzen be.";case"it_IT":return"Esiste gi un account con l'indirizzo e-mail {email}. Effettuare l'accesso tramite e-mail anzich tramite LinkedIn.";case"it_EN":case"pt_EN":return"There is already an account with the email address {email}. Please sign in via email instead of LinkedIn.";case"pt_PT":return"J existe uma conta com o endereo de correio eletrnico {email}. Inicie sesso atravs do correio eletrnico em vez do LinkedIn.";case"pl_PL":return"Istnieje ju konto o adresie e-mail {email}. Zaloguj si przez e-mail zamiast LinkedIn.";case"es_ES":return"Ya existe una cuenta con la direccin de correo electrnico {email}. Por favor, inicia sesin a travs del correo electrnico en lugar de LinkedIn.";case"es_EN":return"There is already an account with the email address {email}. Please sign in via email instead of LinkedIn.";case"tr_TR":return"{email} e-posta adresiyle zaten bir hesap var. Ltfen LinkedIn yerine e-posta ile oturum an.";case"tr_EN":return"There is already an account with the email address {email}. Please sign in via email instead of LinkedIn.";case"be_FR":return"Il existe dj un compte avec l'adresse e-mail {email}. Veuillez vous connecter par e-mail au lieu de LinkedIn.";case"be_NL":case"nl_NL":return"Er is al een account met het e-mailadres {email}. Meld u aan via e-mail in plaats van LinkedIn.";case"en_US":default:return"There is already an account with the email address (email). Please sign in via email instead of LinkedIn."}}static getLoginButtonText(t){switch(t){case"de_DE":return"Mit E-Mail anmelden";case"de_EN":return"Sign in with email";case"de_AT":case"ch_DE":return"Mit E-Mail anmelden";case"ch_FR":return"S'inscrire avec un e-mail";case"ch_IT":return"Accedi con l'e-mail";case"hu_HU":return"Bejelentkezs e-mail cmmel";case"it_IT":return"Accedi con l'e-mail";case"it_EN":case"pt_EN":return"Sign in with email";case"pt_PT":return"Iniciar sesso com o e-mail";case"pl_PL":return"Zaloguj si za pomoc adresu e-mail";case"es_ES":return"Iniciar sesin con correo electrnico";case"es_EN":return"Sign in with email";caseith email"}}static getAlrden.";case"en_US":default:return"There is already a user with this account, so it cannot be linked."}}static replacePlaceholders(t,e,i){return t.replace(/{email}/g,e).replace(/{provider}/g,i)}static getLoadingIfNeeded(t){return t?j.setLoading("login"):null}static async providerSignin(t,e,i){var n;const s=this.getLoadingIfNeeded(i);try{await mn.loginWithProvider(t)}catch(s){let r,o,a="";const c=null===(n=s.customData)||void 0===n?void 0:n.email;if("auth/account-exists-with-different-credential"===s.code){let t=await mn.getFirstExistingProvider(c);"password"===t&&(t="email"),a=Ts.getAccountExistsMessage(e),a=Ts.replacePlaceholders(a,c,t),r=n=>{n&&("email"===t?mn.passwordLessLogin(c,Ts.linkSigninEmail).then((()=>{let t=(V().mailLoginRedirectUrl||"").replace("{brand}",K.getBrandLocal());window.location.href=t})):Ts.providerSignin(t,e,i))},o=this.getLoginButtonText(e),o=this.replacePlaceholders(o,c,t)}if("auth/credential-already-in-use"!==s.code&&"auth/email-already-in-use"!==s.code&&"auth/provider-already-linked"!==s.code||(a=Ts.getAlreadyLinkedMessage(e),a=Ts.replacePlaceholders(a,c,t)),a){let t=document.getElementById("dialog-signin-error");if(t)t.open(a);else{const t=document.createElement("csb-dialog-info");document.body.appendChild(t),setTimeout((()=>{t&&("auth/account-exists-with-different-credential"===s.code?(t.showSuccessButton=!0,t.labelSuccess=o,t.open(a,r)):t.open(a))}),200)}}F.trackEvent(`Login ${t} abort`,"login_abort",{event_category:"login"})}finally{null==s||s.off()}}static async emailSignin(t,e,i,n,s){const r=this.getLoadingIfNeeded(n);await mn.passwordLessLogin(t,e,s),i=i.replace("{brand}",K.getBrandLocal()),window.location.href=i,null==r||r.off()}}Ts.globalProviderListener=!1;export{mn as A,ks as F,dt as Q,wt as S,ft as U,si as a,oi as b,bs as c,gn as d,Ts as e,ht as f,en as g,vn as h,se as i,yn as j,_s as p,ys as r,ei as s,vs as u}