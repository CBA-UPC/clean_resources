"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[4344],{23457:function(e,t,i){i.d(t,{Z:function(){return n}});var r=i(46417);function n(e){var t=e.width,i=e.height;return(0,r.jsx)("svg",{viewBox:"0 0 191 120",width:t,height:i,children:(0,r.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,r.jsxs)("g",{transform:"translate(38.136)",children:[(0,r.jsx)("rect",{stroke:"#333",strokeWidth:2.105,x:1.053,y:1.053,width:130.267,height:91.826,rx:6.537}),(0,r.jsx)("path",{stroke:"#333",strokeWidth:2.105,d:"M56.563 92.982h19.245v25.647H56.563z"}),(0,r.jsx)("path",{fill:"#333",d:"M38.404 117.895h55.511V120H38.404zM0 78.622h132.372v2.105H0z"})]}),(0,r.jsxs)("g",{transform:"translate(151.714 55.564)",children:[(0,r.jsx)("rect",{stroke:"#333",strokeWidth:2.105,x:1.053,y:1.053,width:36.299,height:61.629,rx:3.268}),(0,r.jsx)("path",{fill:"#333",d:"M1.067 8.498h36.271v2.105H1.067zM1.634 50.661h36.271v2.105H1.634z"}),(0,r.jsx)("rect",{fill:"#333",x:13.868,y:55.564,width:10.668,height:2.105,rx:1.053})]}),(0,r.jsxs)("g",{transform:"translate(3 70.272)",children:[(0,r.jsx)("path",{d:"M35.454-1.053H22.56c-2.877 0-4.999.863-6.427 2.471-1.232 1.387-1.964 3.373-2.116 5.998h-15.07v40.212h60.12V7.416H43.997c-.152-2.625-.884-4.611-2.116-5.998-1.428-1.608-3.55-2.47-6.427-2.47z",stroke:"#333",strokeWidth:2.105}),(0,r.jsx)("ellipse",{stroke:"#333",strokeWidth:2.105,cx:29.007,cy:27.522,rx:11.796,ry:11.638}),(0,r.jsx)("circle",{fill:"#333",cx:7.477,cy:14.808,r:2.105})]})]})})}n.defaultProps={width:191,height:120}},94849:function(e,t,i){i.d(t,{Z:function(){return k}});var r=i(4942),n=i(17592),o=i(61113),s=i(24193),a=i(19860),l=i(24813),d=i(58467),u=i(18248),c=i(91345),p=i(23457),h=i(12164),f=i(48509),g=i(46417),v=(0,n.ZP)("div")((function(e){return(0,r.Z)({border:"1px dashed #999",margin:"20px",padding:"90px 20px",display:"flex",justifyContent:"center",alignItems:"center"},e.theme.breakpoints.down("sm"),{flexDirection:"column",padding:0,border:"none"})})),x=(0,n.ZP)("div")((function(e){return(0,r.Z)({marginLeft:"40px","& p":{margin:"10px 0 20px"}},e.theme.breakpoints.down("sm"),{margin:0,"& p":{display:"none"}})})),m=(0,n.ZP)(o.Z)((function(e){return(0,r.Z)({fontSize:"20px",fontWeight:"bold"},e.theme.breakpoints.down("sm"),{margin:"20px 0 40px"})})),b=(0,n.ZP)(s.Z)((function(e){return(0,r.Z)({},e.theme.breakpoints.down("sm"),{width:"100%"})}));function k(e){var t=e.defaultAlbum,i=(0,a.Z)(),r=(0,d.UO)().albumId,n=(0,l.Z)(i.breakpoints.down("md")),s=(0,h.Z)().currentIsRoot,k=(0,f.Z)();return(0,g.jsxs)(v,{style:{marginTop:84,minHeight:s?"calc(100vh - 270px)":0},children:[(0,g.jsx)(p.Z,{width:n?121:188,height:n?76:120}),(0,g.jsxs)(x,{children:[(0,g.jsx)(m,{variant:"h2",children:s?"Start filling your bucket!":"Start filling your album!"}),(0,g.jsx)(o.Z,{children:"Drag & drop here or click the button below"}),(0,g.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,g.jsx)("input",{accept:"image/*",style:{display:"none"},id:"contained-button-file",type:"file",multiple:!0,onChange:function(e){try{var i;if(null===(i=e.target.files)||void 0===i||!i.length||!t)return;k.uploadMultiple(e.target.files,r||t)}catch(a){var n,o=(null===(n=a.response)||void 0===n?void 0:n.data)||"There was an error while trying to upload your image.",s={id:(0,u.Z)(),message:o,severity:"error"};(0,c.sh)([s])}},"data-test":"file-upload"}),(0,g.jsx)(b,{component:"span","data-test":"appbar-upload",id:"appbar-upload",size:"large",variant:"contained",children:"Upload Images"})]})]})]})}},46171:function(e,t,i){i.d(t,{Z:);var r=i(11149),n=i(76391),o=i(33594),s=i(15861),a=i(1413),l=i(29439),d=i(64687),u=i.n(d),c=i(90297),p=i(8566),h=i(90110),f=i(24813),g=i(20201),v=i(16031),x=i.n(v),m=i(47313),b=i(58467),k=i(91345),Z=i(25258),y=i(4587),j=i(30183),w=i(11069),M=i(17592),D=i(71651),z=i(944),P=i(35982),S=i(20716),T=i(19332),H=i(47053),C=i(65582),R=i(96849),I=i(62982),L=i(46417),W=(0,M.ZP)("img")((),A=(0,M.ZP)("div")((function(e){var t=e.theme;return{position:"relative",display:"flex",borderWidth:3,borderStyle:"solid",borderColor:e.isSelected?t.palette.primary.main:"transparent",transition:"opacity 0.25s ease, border-color 0.25s ease","&:hover":{"& $check":{display:"inline"},"& $easyLinkContainer":{display:"inline"}}}}));function B(e){var t,i=e.item,r=e.items,n=e.zoom,o=e.settings,s=e.isLimitedHostingAccount,a=e.selectModeEnabled,l=e.width,d=e.isPublic,u=e.isFavoriteDisabled,p=(0,b.TH)(),h=(0,m.useRef)(null),f=!(0,c.l)(k.YR)&&(null===i||void 0===i?void 0:i.isBlurred),v=(0,b.s0)(),x=(0,S.Z)(),y=x.toggleSelect,M=x.isEmpty,B=x.isSelected,V=x.toggleBulkSelect,E=B(i.id),F=(0,T.Z)().mutation,N=(0,g.Z)(),O=!(null===i||void 0===i||null===(t=i.attributes)||void 0===t||!t.find(()),_=(0,D.Z)(h),G=(0,P.Z)(),U=G.getDragImage,$=G.removeDragImage,K="small";n<4&&(K="medium"),Z.Z.debug(s);var q=(0,H.Z)(i,l);return(0,L.jsxs)(A,{id:i.id,isSelected:E,ref:h,draggable:"false",children:[(0,L.jsxs)(R.Z,{isActive:a||E||_,onClick:function(e){e.shiftKey?V(i.id,r):y(i.id)},sx:{top:8,left:8,zIndex:1,backgroundColor:E?N.palette.primary.main:"rgba(71,85,105,0.5)","&:hover":{backgroundColor:E?"white":"rgba(71,85,105,0.9)"}},"data-test":E?"deselect":"select",children:[E&&(0,L.jsx)(j.Z,{color:"inherit",fontSize:K,sx:{background:N.palette.primary.main,borderRadius:"50%",padding:"2px"}}),!E&&(0,L.jsx)(j.Z,{color:"inherit",fontSize:K,sx:{background:"transparent",borderRadius:"50%",padding:"2px"}})]}),!u&&!d&&!i.isBlurred&&(0,L.jsxs)(R.Z,{isActive:O||_,sx:{top:8,right:8,"&:hover":{backgroundColor:"rgba(71,85,105,0.9)"}},onClick:function(){var e={imageIds:[i.id],add:["favorite"]};O&&(delete e.add,e.delete=["favorite"]),F({variables:e})},children:[O&&(0,L.jsx)(w.Z,{fontSize:K,sx:{stroke:"white",strokeWidth:2,padding:"2px"}}),!O&&(0,L.jsx)(w.Z,{fontSize:K,sx:{stroke:N.palette.primary.contrastText,fillOpacity:0,strokeWidth:2,zIndex:1,padding:"2px"}})]}),(0,L.jsx)(W,{alt:i.title,isBlurred:f,"data-test":"image",onClick:function(e){var t;M()&&!a?(d&&(t={returnUri:"".concat(p.pathname),password:(p.state||{}).password}),v("".concat(p.pathname,"/p/").concat(i.id),{state:t})):e.shiftKey?V(i.id,r):y(i.id)},onError:function(e){e.stopPropagation(),e.currentTarget.src=i.isVideoType?z.h:z.N,e.currentTarget.srcset=i.isVideoType?z.h:z.N},onDragStart:function(e){e.stopPropagation();var t=U(i,E),r=E?"all":i.id;return e.dataTransfer.setData("id",r),e.dataTransfer.setDragImage(t,0,0),!1},onDragEnd:role:"presentation",src:q,srcSet:q}),i.isBlurred&&(0,L.jsx)(C.Z,{}),(0,L.jsx)(I.Z,{media:i,isActive:!d&&(E||_),settings:o,displayFab:n>5})]})}B.defaultProps={isPublic:!1,isLimitedHostingAccount:!1,isFavoriteDisabled:!1,width:void 0};var V=i(63694),E={xs:[1,1,1,1,1,3,3,3,3,3,3],sm:[1,1,1,1,1,3,3,3,3,3,3],md:[1,1,2,3,4,5,6,7,8,9,10],lg:[1,1,2,3,4,5,6,7,8,9,10],xl:[1,1,2,3,4,5,6,7,8,9,10]};function F(e){var t,i,n,o,d,v,j,w,M,D,z,P,S,T=e.items,H=e.hasMore,C=e.loading,R=e.fetchMore,I=e.isPublic,W=(0,b.UO)().albumId,A=(0,c.l)(k._N),F=(0,m.useRef)(null),N=(0,m.useState)(3),O=(0,l.Z)(N,2),_=O[0],G=O[1],U=(0,m.useRef)(0),$=(0,r.Z)().settings.zoom,K=(0,V.Z)(),q=(0,k.at)(),Y=(0,g.Z)(),J=(0,f.Z)(Y.breakpoints.up("sm")),Q=(0,f.Z)(Y.breakpoints.up("md")),X=(0,f.Z)(Y.breakpoints.up("lg")),ee=(0,f.Z)(Y.breakpoints.up("xl")),te=!(null===q||void 0===q||null===(t=q.profile)||void 0===t||null===(i=t.subscription)||void 0===i||null===(n=i.plan)||void 0===n||!n.hostingThreshold)&&!(null!==q&&void 0!==q&&null!==(o=q.profile)&&void 0!==o&&null!==(d=o.subscription)&&void 0!==d&&null!==(v=d.plan)&&void 0!==v&&null!==(j=v.hostingThreshold)&&void 0!==j&&j.maxHostingThreshold),ie=(0,a.Z)({easyLinkingMode:!(null===q||void 0===q||null===(w=q.profile)||void 0===w||null===(M=w.albumsSettings)||void 0===M||!M.easyLinkingMode),linkBackOption:!(null===q||void 0===q||null===(D=q.profile)||void 0===D||null===(z=D.albumsSettings)||void 0===z||!z.linkBackOption)},null===q||void 0===q||null===(P=q.profile)||void 0===P||null===(S=P.albumsSettings)||void 0===S?void 0:S.links);(0,m.useEffect)((function(){var e=$;G(ee?E.xl[e]:X?E.lg[e]:Q?E.md[e]:J?E.sm[e]:E.xs[e])}),[J,Q,X,ee,$]),(0,m.useEffect)((function(){return(0,k.WV)([]),(0,k._N)({}),(0,k.MD)(null),(0,k.eG)({}),function(){(0,k.WV)([]),(0,k._N)({}),(0,k.MD)(null),(0,k.eG)({})}}),[W]);var re=function(){var e=(0,s.Z)(u().mark((function e(){var t,i,r,n,o,s,a,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=null===(t=F.current)||void 0===t?void 0:t.getVisibleItems(),Z.Z.debug("current visible items: %j",i),r=null,n=null,i&&i[0].key&&(o=i[0].key.replaceAll(/[.$]/g,""),s=x().filter(T,(function(e){return e.id===o})),Z.Z.debug("current first visible items: %j %s",s,o),s[0]&&(r=s[0].uploadDate)),i&&i[i.length-1].key&&(a=i[i.length-1].key.replaceAll(/[.$]/g,""),l=x().filter(T,(),Z.Z.debug("current last visible items: %j %s",l,a),l[0]&&(n=l[0].uploadDate)),r&&n&&(0,k.eG)({startDate:r,endDate:n});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,s.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=F.current)||void 0===t||t.renderItems({useResize:!0}),e.next=3,re();case 3:case"end":return e.stop()}}),e)})));return ();if(!T.length)return null;var oe=function(){var e=(0,s.Z)(u().mark((function e(t){var i,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.wait,r=t.ready,C||!H){e.next=6;break}return i(),e.next=5,R();case 5:r();case 6:case"end":return e.stop()}}),e)})));return (),se=function(e){e.currentTarget.scrollTop>U.current?(0,k.MD)("down"):(0,k.MD)("up"),U.current=e.currentTarget.scrollTop};return(0,L.jsxs)("div",{id:"grid-container","data-test":"grid-container",style:{flex:1,position:"relative"},children:[!I&&(0,L.jsx)(y.Z,{}),(0,L.jsx)(p.Z,{children:function(e){var t=e.height,i=e.width;return i?(0,L.jsx)("div",{style:{height:t,width:i,overflow:"scroll",paddingTop:84},onScroll:se,children:(0,L.jsx)(h.L2,{loading:C?(0,L.jsx)("div",{children:"Loading..."}):(0,L.jsx)("div",{}),threshold:5,useRecycle:!0,useFit:!0,horizontal:!1,maxResizeDebounce:5,percentage:!0,autoResize:!0,"data-test":"grid",id:"grid",ref:F,column:_,containerTag:"#grid-container",gap:0,align:"stretch",onRequestAppend:oe,onRenderComplete:ne,children:T.map((function(e){return(0,L.jsx)(B,{item:e,items:T,settings:ie,isLimitedHostingAccount:te,isFavoriteDisabled:K.isFavoriteDisabled,selectModeEnabled:Boolean(A.media),isPublic:I,zoom:$,width:Math.floor(i/_)},null===e||void 0===e?void 0:e.id)}))})}):(0,L.jsx)("div",{})}})]})}function N(e){var t=e.items,i=e.hasMore,s=e.fetchMore,a=e.isPublic,l=e.loading;switch((0,r.Z)().settings.layout){case n.sH.MasonryVertical:return(0,L.jsx)(F,{items:t,hasMore:i,fetchMore:s,isPublic:a,loading:l});case n.sH.Grid:default:return(0,L.jsx)(o.Z,{items:t,hasMore:i,fetchMore:s,isPublic:a})}}F.defaultProps={isPublic:!1,loading:!1},N.defaultProps={isPublic:!1}}}]);