![function(e,t,n){var r=n(2),i=n(6),o=n(0),a=new r;function s(e){if(a.init({},e),window[o.GRIN_INSTANCE_NAME]&&window[o.GRIN_INSTANCE_NAME].length)for(var t in window.Grin)a[window.Grin[t][0]].apply(a,window.Grin[t].slice(1));window.Grin=a,window.Grin.config.loaded()}setTimeout((function(){if(!0===a.getSetting("DISABLE_FINGERPRINT_GENERATION")){s("")}else i.get({excludes:{fonts:!0,adBlock:!0,enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0}},(function(e){var t=e.map((function(e){return e.value}));a.fetchMiscInfo((function(e){t.push(e.data),s(i.x64hash128(t.join(""),31))}))}))}),750)},function(e,t,n){var r=n(3),i=n(4),o=n(0),a={debug:!1,domain:"trail.grin.co",api_host:"https://trail.grin.co",ip:!0,loaded:function(){}},s=function(){};s.prototype.init=function(e,t){this.config=r.assign(a,e),this.fingerprint=t,this.debugLine("grin:init"),this.start()},s.prototype.createBanner=function(e){var t=document.createElement("div");t.innerHTML='<span>This website uses cookies to ensure you get the best experience on our website.</span><button id="grin-cookie-decline" style="margin-left: 1em;">Decline</button><button  id="grin-cookie-accept" style="margin-left: 1em;">Accept</button>',t.id="grin-cookie-banner",t.style.width="100%",t.style.padding=" 2% 0",t.style.background=" white",t.style.boxShadow=" 12px 12px 25px #444444aa",t.style.borderBottom=" .5px solid #4D4DFE",t.style.textAlign=" center",t.style.position="fixed",t.style.bottom="0%",t.style.zIndex="10000",document.body.prepend(t);const n=document.getElementById("grin-cookie-accept"),r=document.getElementById("grin-cookie-decline");r.style.borderRadius="5%",n.style.borderRadius="5%",r.style.padding="7px",n.style.padding="7px",n.style.background="black",n.style.color="white",n.addEventListener("click",(function(){console.debug("trackingConsentAccepted"),window.Shopify.customerPrivacy.setTrackingConsent(!0,()})),r.addEventListener("click",(function(){console.debug("trackingConsentDeclined"),window.Shopify.customerPrivacy.setTrackingConsent(!1,()}))},s.prototype.getBannerEl=s.prototype.hideBanner=function(e){e.getBannerEl().style.display="none"},s.prototype.initCookieBanner=function(e){window.Shopify.customerPrivacy&&"no_interaction"===window.Shopify.customerPrivacy.getTrackingConsent()?e.createBanner(e):"no"===window.Shopify.customerPrivacy.getTrackingConsent()?console.debug("no cookie storage allowed"):(console.debug("cookie storage already accepted"),e.start())},s.prototype.push=s.prototype.getSetting=function(e){return void 0!==window.GrinSettings&&void 0!==window.GrinSettings[e]?window.GrinSettings[e]:null},s.prototype.start=function(){var e=i.paramsFromQuery();if(this.debugLine("grin:start"),this.getSetting("API_TOKEN")?this.token=this.getSetting("API_TOKEN"):"grin"==e.platform?this.token=e.token:this.token=i.cookiesRead("_gToken"),"grin"==e.platform?(this.link_id=e.link_id||e.lid,this.contact_id=e.contact_id||e.cid,this.attribution_window=e.attribution_window):(this.link_id=i.cookiesRead("_gLink"),this.contact_id=i.cookiesRead("_gContact"),this.attribution_window=i.cookiesRead("_gAttributionWindow")),"grin"==e.platform){var t=this.attribution_window||30;i.cookiesWrite("_gToken",this.token,t),i.cookiesWrite("_gLink",this.link_id,t),i.cookiesWrite("_gContact",this.contact_id,t),i.cookiesWrite("_gAttributionWindow",this.attribution_window,t),this.setFingerprint()}this.debugLine("grin:token: "+this.token+" contact: "+this.contact_id+" link: "+this.link_id+" attribution window: "+this.attribution_window),this.view({})},s.prototype.send=function(e){e.token=this.token,e.link_id=this.link_id,e.contact_id=this.contact_id,e.fingerprint=this.fingerprint,e.user_agent=window.navigator.userAgent,e.referrer=document.referrer,e.url=window.location.origin+window.location.pathname;var t=i.encode(JSON.stringify(e)),n=new Image;n.src="https://"+this.config.domain+"/collect?payload="+t,n.onload=function(){},n.onerror=function(){}},s.prototype.setFingerprint=function(){if(this.token&&this.contact_id&&this.link_id){var e={event:"fingerprint"};e.attribution_window=this.attribution_window,this.send(e),this.debugLine("grin:fingerprint",e)}},s.prototype.fetchFingerprint=function(e,t){var n=new XMLHttpRequest;n.open("GET","https://"+this.config.domain+"/fingerprint/"+this.fingerprint+"?tracking_domain="+e),n.onload=function(){if(200===n.status){var e=JSON.parse(n.responseText);t(e)}},n.send()},s.prototype.fetchMiscInfo=function(e){var t=new XMLHttpRequest;t.open("GET","https://www.cloudflare.com/cdn-cgi/trace"),t.onload=function(){200===t.status?e({data:t.responseText.split("\n").filter((function(e){return e[0]+e[1]==="ip"}))[0]}):e({data:null})},t.send()},s.prototype.view=function(e){this.token&&this.contact_id&&this.link_id&&((e=e||{}).event="view",this.send(e),this.debugLine("grin:view",e))},s.prototype.track=function(e){this.token&&this.contact_id&&this.link_id&&((e=e||{}).event="track",this.send(e),this.debugLine("grin:track",e))},s.prototype.setThirdPartyCheckout=s.prototype.conversion=function(e,t){(t=t||{}).total=e,t.event="conversion";var n=!1;if(!0===this.getSetting("DISABLE_FINGERPRINTS")&&(n=!0),this.token&&this.contact_id&&this.link_id||!n){if("undefined"!=typeof Shopify){if("string"!=typeof this.third_party_checkout||"recharge"!==this.third_party_checkout.toLowerCase()||"Checkout"in Shopify||(Shopify.Checkout={step:"thank_you"},Shopify.checkout.subtotal_price=amount),!("checkout"in Shopify&&"Checkout"in Shopify&&"step"in Shopify.Checkout&&null!==Shopify.checkout&&"thank_you"===Shopify.Checkout.step))return;t.total=Shopify.checkout.subtotal_price,t.currency=t.currency||Shopify.checkout.currency,t.customer_id=Shopify.checkout.customer_id,t.order_id=Shopify.checkout.order_id,t.checkout_token=Shopify.checkout.token}var r=this;this.token&&this.contact_id&&this.link_id?(this.send(t),this.debugLine("grin:conversion",t)):this.fetchFingerprint(t.tracking_domain,(function(e){r.link_id=e.link_id,r.contact_id=e.contact_id,r.token=e.token,r.attribution_window=e.attribution_window,r.send(t)}))}},s.prototype.configure=function(e){!window[o.GRIN_INSTANCE_NAME]&&a?a=r.assign(a,e):this.config=r.assign(this.config,e),this.debugLine("grin:configure",e,this.config)},s.prototype.debugLine=function(e){(this.config.debug||"https://grin-production.myshopify.com"==document.location.origin)&&console.log(e)},e.exports=s},function(e,t){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:writable:!0,configurable:!0}),e.exports=Object},function(e,t,n){var r=n(5).fetch,i={},o={};function a(e,t,n,r){document.cookie=e+"="+t+n+"; path=/; domain="+r+";"}i.trim=i.each=function(e,t,n){if(null!=e)if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e)===o)return}else for(var a in e)if(hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e)===o)return},i.encode=i.paramsFromQuery=function(){for(var e=window.location.search.substr(1).split("&"),t={},n=0;n<e.length;++n){var r=e[n].split("=",2);1===r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t},i.paramsToQuery=i.cookiesWrite=function(e,t,n){var r;if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()}else r="";window.location.hostname.split(".").reverse().reduce((function(n,i){var o="."+i+n;return a(e,t,r,i+n),a(e,t,r,o),o}),"")},i.cookiesRead=function(e){var t=""+document.cookie,n=t.indexOf(e);if(void 0===e||""===e||-1===n)return"";var r=t.indexOf(";",n);return-1===r&&(r=t.length),unescape(t.substring(n+e.length+1,r))},i.cookiesRemove=function(e){this.cookiesRead(e)&&this.cookiesWrite(e,"",-1)},i.get=function(e,t,n,o){t&&Object.keys(t).length&&(e=e+"?"+i.paramsToQuery(t)),r(e).then((function(e){n(e)})).catch((function(e){o(e)}))},i.post=function(e,t,n,i){r(e,{body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){n(e)})).catch((function(e){i(e)}))},i.isArray=Array.isArray||i.isFunction=i.lsAvailable=i.ready=e.exports=i},function(e,t,n){!function(e){"use strict";var t={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView|| f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&(n=e)&&DataView.prototype.isPrototypeOf(n))this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!r(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=d(e)}else this._bodyText="";var n;this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=this.arrayBuffer=,this.text=t.formData&&(this.formData=,this.json=this}s.prototype.append=s.prototype.delete=s.prototype.get=s.prototype.has=s.prototype.set=s.prototype.forEach=s.prototype.keys=s.prototype.values=s.prototype.entries=t.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var h=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];rototype.clone=f.call(p.prototype),f.call(y.prototype),y.prototype.clone=y.error=var m=[301,302,303,307,308];y.redirect=e.DOMException=self.DOMException;try{new e.DOMException}catch(t){e.DOMException=e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=s,self.Request=p,self.Response=y),e.Headers=s,e.Request=p,e.Response=y,e.fetch=w,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){var r,i;!0,this,(0",,{})}]);
//# sourceMappingURL=grin-sdk.js.map