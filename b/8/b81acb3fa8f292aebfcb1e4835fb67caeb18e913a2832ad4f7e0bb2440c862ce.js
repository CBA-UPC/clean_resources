"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7379],{55538:(e,t,l)=>{l.d(t,{l:()=>A});l(46758),l(53321),l(86277);var r=l(50959),a=l(85648),i=l(67408),s=(l(80378),l(50216)),n=l(98328);const o={"custom-order":s.HI,"title-and-artist-title":{column:n.Q.TITLE_AND_ARTIST,order:n.k.ASC},"title-and-artist-artist":{column:n.Q.TITLE_AND_ARTIST,order:n.k.SECONDARY_ASC},title:{column:n.Q.TITLE,order:n.k.ASC},artist:{column:n.Q.ARTIST,order:n.k.ASC},"added-by":{column:n.Q.ADDED_BY,order:n.k.ASC},"added-at":{column:n.Q.ADDED_AT,order:n.k.ASC},duration:{column:n.Q.DURATION,order:n.k.ASC},album:{column:n.Q.ALBUM,order:n.k.ASC},"album-or-podcast":{column:n.Q.ALBUM_OR_PODCAST,order:n.k.ASC},"album-or-show":{column:n.Q.ALBUM_OR_SHOW,order:n.k.ASC}},c={"title-and-artist-title":n.Q.TITLE_AND_ARTIST,"title-and-artist-artist":n.Q.TITLE_AND_ARTIST,title:n.Q.TITLE,artist:n.Q.ARTIST,"added-by":n.Q.ADDED_BY,"added-at":n.Q.ADDED_AT,duration:n.Q.DURATION,album:n.Q.ALBUM,"album-or-podcast":n.Q.ALBUM_OR_PODCAST,"album-or-show":n.Q.ALBUM_OR_SHOW},u={[n.k.NONE]:n.k.NONE,[n.k.ASC]:n.k.DESC,[n.k.DESC]:n.k.ASC,[n.k.SECONDARY_ASC]:n.k.SECONDARY_DESC,[n.k.SECONDARY_DESC]:n.k.SECONDARY_ASC},d=(n.Q.INDEX,{[n.Q.INDEX]:{key:"custom-order",get value(){return a.ag.get("sort.custom-order")}},[n.Q.TITLE_AND_ARTIST]:{key:"title",get value(){return a.ag.get("sort.title")}},[n.Q.TITLE]:{key:"title",get value(){return a.ag.get("sort.title")}},[n.Q.ARTIST]:{key:"artist",get value(){return a.ag.get("sort.artist")}},[n.Q.ADDED_BY]:{key:"added-by",get value(){return a.ag.get("sort.added-by")}},[n.Q.ADDED_AT]:{key:"added-at",get value(){return a.ag.get("sort.date-added")}},[n.Q.DURATION]:{key:"duration",get value(){return a.ag.get("sort.duration")}},[n.Q.EVENT_DATE]:null,[n.Q.EVENT_INFO]:null,[n.Q.ALBUM]:{key:"album",get value(){return a.ag.get("sort.album")}},[n.Q.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return a.ag.get("sort.album-or-podcast")}},[n.Q.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return a.ag.get("sort.album-or-show")}},[n.Q.PLAYS]:null,[n.Q.RELEASE_DATE]:null,[n.Q.ADD]:null,[n.Q.ACTIONS]:null,[n.Q.CONCERT_VENUE]:null,[n.Q.CONCERT_DATE]:null,[n.Q.TITLE_AND_AUTHOR]:{key:"title",get value(){return a.ag.get("sort.title")}},[n.Q.AUTHOR]:null});var g=l(36199),m=l(21536),x=l(11527);function T(e){return!!e}const A=e=>{let{columns:t,disabled:l,onSort:A}=e;const C=[...t],D=C.indexOf(g.QD.TITLE_AND_ARTIST),h=C.indexOf(g.QD.TITLE_AND_AUTHOR);-1!==D&&C.splice(D,1,g.QD.TITLE,g.QD.ARTIST),-1!==h&&C.splice(h,1);const{sortState:k,setSortState:S}=(0,r.useContext)(s.Gb),p=function(e){return null===e.column?d[g.QD.INDEX]:(0,m.cB)(e.column,e)?d[g.QD.ARTIST]:d[e.column]}(k),y=(0,r.useCallback)((e=>{null==A||A(),S(((e,t,l)=>e?t!==c[e]||"artist"===e&&[n.k.ASC,n.k.DESC].includes(l)||"title"===e&&[n.k.SECONDARY_ASC,n.k.SECONDARY_DESC].includes(l)?o[e]:{column:c[e],order:u[l]}:s.HI)(e,k.column,k.order))}),[A,S,k.column,k.order]),I=(0,r.useCallback)((()=>null!==k.column),[k.column]),j=C.map((e=>d[e])).filter(T);return(0,x.jsx)(i.A,{options:j,onSelect:y,selected:p,isSelectionChanged:I,sortOrder:k.order,heading:a.ag.get("drop_down.sort_by"),disabled:l,enableViewModeMenu:!0})}},12437:(e,t,l)=>{l.r(t),l.d(t,{default:()=>oe});l(46758),l(53321),l(86277);var r=l(50959),a=l(41194),i=l(43007),s=l(39505),n=l(32469),o=l(12970),c=l(85648),u=l(38024),d=l(97922),g=l(81639),m=l(16118),x=l(91643),T=l(57986),A=l(21536),C=l(65432),D=l(36199),h=l(50216),k=l(61046),S=l(19848),p=l(98716),y=l(58959),I=l(53335),j=l(27284),f=l(22527),b=l(80626),E=(l(80378),l(51837)),_=l(87236),Q=l(8824),v=l(55538);const R="uCHqQ74vvHOnctGg0X0B",N="feuNq1FTxMbdeOTuFgpA";var O=l(11527);const P=r.memo((e=>{let{tracklistDomRef:t}=e;const{spec:l,logger:a}=(0,b.fU)(E.createDesktopSearchBarEventFactory,{}),i=(0,r.useCallback)((()=>{a.logInteraction(l.filterFieldFactory().keyStrokeFilter())}),[a,l]),s=(0,r.useCallback)((()=>{a.logInteraction(l.filterFieldFactory().hitClearFilter())}),[a,l]),n=(0,_.v)().filter((e=>h.MI.includes(e)));return(0,O.jsxs)("div",{className:N,children:[(0,O.jsx)(r.Suspense,{fallback:null,children:(0,O.jsx)(Q.K,{placeholder:c.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:t,onFilter:i,onClear:s})}),(0,O.jsx)(v.l,{columns:n})]})}));var L=l(15842),M=l(66205),U=l(66819),B=l(64222),F=l(25230),w=l(72417);const H=r.memo((function(e){let{tracklistDomRef:t,togglePlay:l,isPlaying:a,isActive:i,backgroundColor:s,spec:n,logger:o}=e;const u=(0,w.Q)(),d=(0,r.useMemo)((()=>n.shuffleButtonContainerFactory()),[n]),g=(0,U.j)(),m=(0,r.useCallback)((()=>{const e=(0,B.aK)({isPlaying:a,isActive:i,spec:n.playButtonFactory(),logger:o,uri:y.b});l({loggingParams:e})}),[i,a,o,n,l]);return(0,O.jsx)(L.o,{backgroundColor:s,children:(0,O.jsxs)(M.F,{children:[(0,O.jsx)(T.$,{size:g,onClick:m,isPlaying:a,uri:y.b}),u&&(0,O.jsx)(b.Nh,{spec:d,children:(0,O.jsx)(F.K,{entityName:c.ag.get("local-files"),contextUri:y.b,activationPlacement:"bottomEnd",size:g})}),(0,O.jsx)(b.Nh,{spec:n,children:(0,O.jsx)(P,{tracklistDomRef:t})})]})})}));l(92372),l(70069),l(44227),l(91499),l(68856),l(18004),l(16527);var Y=l(34514),W=l(98328),z=l(19125),K=l(19968),X=l(10956),q=l(44724),V=l(45438),G=l(74234),$=l(35014),J=l(4901),Z=l(31360),ee=l(67282),te=l(85357);const le=r.memo((function(e){let{uri:t,uid:l,name:a,duration_ms:i,artists:s,album:n,is19PlusOnly:o,isExplicit:u,isPlayable:d,index:g,contextUri:m,imgUrl:x,usePlayContextItem:T,isCompactMode:A=!1}=e;const{spec:D}=(0,b.fU)(Y.r,{data:{position:g,reason:"",uri:t}}),{filter:h}=(0,r.useContext)(C.fo),{isActive:k,isPlaying:S,triggerPlay:p,togglePlay:y}=T({uid:l,uri:t,index:g}),{badges:I,hasBadges:j}=(0,G.r)({isExplicit:u}),f=(null==s?void 0:s.map((e=>e.name)).join(c.ag.getSeparator()))||"",E=(0,_.v)();return(0,O.jsx)(V.JL,{value:"row",index:g,children:(0,O.jsx)(X._,{menu:(0,O.jsx)($.N,{uri:t,uid:l,contextUri:m}),children:(0,O.jsx)(te.c,{uri:t,contextUri:m,isActive:k,index:g,onTriggerPlay:(e,t)=>{p({loggingParams:t})},ariaRowIndex:g+1,isPlayable:d,ageRestricted:o,dragMetadata:{name:a,createdBy:f},spec:D,isCompactMode:A,children:E.map(((e,r)=>{const o=(0,z.Y)(r,e,E);switch(e){case W.Q.INDEX:return(0,O.jsx)(o,{ariaColIndex:r,children:(0,O.jsx)(Z.Du,{uri:t,playAriaLabel:c.ag.get("tracklist.a11y.play",a,f),isPlaying:S,isActive:k,onClick:(e,t)=>{y({loggingParams:t})},spec:D,children:(0,O.jsx)(Z.km,{children:g+1})})},r);case W.Q.TITLE_AND_ARTIST:return(0,O.jsxs)(o,{ariaColIndex:r,children:[(0,O.jsx)(Z.lD,{src:x}),(0,O.jsxs)(Z.vm,{children:[(0,O.jsx)(Z.Wh,{titleText:a,children:(0,O.jsx)(J.o,{searchWords:[h],textToHighlight:a})}),j&&(0,O.jsx)(Z.g3,{children:I.explicit?(0,O.jsx)(q.N,{}):null}),(0,O.jsx)(Z.K9,{children:s&&(0,O.jsx)(ee.o,{nonInteractive:!0,artists:s,filter:h})})]})]},r);case W.Q.TITLE:return(0,O.jsx)(o,{ariaColIndex:r,children:(0,O.jsxs)(Z.nh,{children:[(0,O.jsx)(Z.Wh,{titleText:a,children:(0,O.jsx)(J.o,{searchWords:[h],textToHighlight:a})}),j&&(0,O.jsx)(Z.g3,{children:I.explicit?(0,O.jsx)(q.N,{}):null})]})},r);case W.Q.ARTIST:return(0,O.jsx)(o,{ariaColIndex:r,children:(0,O.jsx)(Z.I4,{children:s&&(0,O.jsx)(ee.o,{nonInteractive:!0,artists:s,filter:h})})},r);case W.Q.ALBUM:return(0,O.jsx)(o,{ariaColIndex:r,children:(null==n?void 0:n.name)&&(0,O.jsx)(Z.BM,{nonInteractive:!0,uri:null==n?void 0:n.uri,name:null==n?void 0:n.name,children:(0,O.jsx)(J.o,{searchWords:[h],textToHighlight:null==n?void 0:n.name})})},r);case W.Q.DURATION:return(0,O.jsxs)(o,{ariaColIndex:r,children:[(0,O.jsx)(K.f,{uri:t}),(0,O.jsx)(Z.A$,{duration:i}),(0,O.jsx)(Z.Zv,{menu:(0,O.jsx)($.N,{uri:t,uid:l,contextUri:m}),label:c.ag.get("more.label.track",a,f),spec:D})]},r);default:return null}}))})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index&&e.isCompactMode===t.isCompactMode));var re=l(58912);const ae=new Set(h.MI),ie=r.memo((function(e){let{uri:t,tracks:l,sortState:a,handleSort:i,usePlayContextItem:s,tracklistDomRef:n,isCompactMode:o=!1}=e;const u=(0,_.v)(),d=(0,r.useRef)(null),g=(0,r.useCallback)(((e,l)=>{var r;const a=(0,re.X)(null===(r=e.album)||void 0===r?void 0:r.images,{desiredSize:40,desiredLabel:"small"});return(0,O.jsx)(le,{index:l,contextUri:t,uri:e.uri,uid:e.uid,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album||void 0,isExplicit:e.isExplicit,is19PlusOnly:e.is19PlusOnly,type:e.type,imgUrl:(null==a?void 0:a.url)||"",usePlayContextItem:s,isCompactMode:o},e.uid)}),[t,s,o]),m=(0,r.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(V.JL,{value:"playlist-tracklist",children:(0,O.jsx)(D.Pv,{ariaLabel:c.ag.get("local-files"),hasHeaderRow:!0,columns:u,sortableColumns:ae,sortState:a,onSort:i,renderRow:g,resolveItem:m,tracks:l,nrTracks:l.length,limit:100,outerRef:d,outerDomRef:n,isCompactMode:o,columnPersistenceKey:"playlist-tracklist"},t)})})})),se=[D.QD.INDEX,D.QD.TITLE_AND_ARTIST,D.QD.ALBUM,D.QD.DURATION],ne=()=>{const{filter:e}=(0,r.useContext)(C.fo),{sortState:t,setSortState:l}=(0,r.useContext)(h.Gb),E=(0,r.useContext)(I.t),_=(0,j.I)(),Q=(0,p.Y)(s.Fzl),v=(0,r.useRef)(null),{spec:N}=(0,b.fU)(o.G,{data:{uri:y.b}}),P=(0,r.useMemo)((()=>N.actionBarFactory()),[N]),L=(0,r.useMemo)((()=>N.tracklistFactory()),[N]),M=(0,b.$P)(),{isCompactMode:U}=(0,S.mJ)(),B=(e=>{let{isCompactMode:t=!1}=e;const l=[...se];return t&&l.splice(l.indexOf(D.QD.TITLE_AND_ARTIST),1,D.QD.TITLE,D.QD.ARTIST),l})({isCompactMode:U}),F=(0,r.useCallback)(((e,r)=>{l((0,A.VK)(e,t)),M.logInteraction(N.tracklistFactory().columnHeaderFactory({identifier:e,position:r||0}).hitSort())}),[l,t,M,N]),{data:w}=(0,a.a)({queryKey:["local-files",t,e],queryFn:()=>E.getTracks((0,A._j)(t),e),staleTime:0,gcTime:3e5,placeholderData:i.Wk,enabled:_}),{isActive:Y,isPlaying:W,togglePlay:z,usePlayContextItem:K}=(0,f.n)({uri:y.b,pages:[{items:(w??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return w?e||w.length&&_?(0,O.jsx)(k.a,{columns:B,children:(0,O.jsxs)("div",{role:"presentation",className:R,children:[(0,O.jsxs)(d.gF,{backgroundColor:Q,children:[(0,O.jsxs)(g.W,{children:[(0,O.jsx)(T.$,{size:"medium",onClick:()=>z(),isPlaying:W,uri:y.b}),(0,O.jsx)(m.i,{text:c.ag.get("local-files")})]}),(0,O.jsxs)(d.sP,{children:[(0,O.jsx)(d.xd,{children:c.ag.get("local-files")}),(0,O.jsx)(d.T0,{children:c.ag.get("local-files.description")})]})]}),(0,O.jsx)(H,{togglePlay:z,isPlaying:W,isActive:Y,backgroundColor:Q,tracklistDomRef:v,spec:P,logger:M}),(0,O.jsx)("div",{className:"contentSpacing",children:(0,O.jsx)(b.Nh,{spec:L,children:(0,O.jsx)(ie,{tracks:w,uri:y.b,handleSort:F,sortState:t,usePlayContextItem:K,tracklistDomRef:v,isCompactMode:U})})})]})}):(0,O.jsx)(u.u,{linkTo:"/preferences",linkTitle:c.ag.get("local-files.empty-button"),message:c.ag.get("local-files.empty-description"),title:c.ag.get("local-files.empty-header"),children:(0,O.jsx)(n.Y,{size:"xxlarge","aria-hidden":"true"})}):(0,O.jsx)(x.h,{hasError:!1,errorMessage:c.ag.get("error.request-artist-failure"),loadOffline:!0})},oe=()=>(0,O.jsx)(h.kz,{uri:"spotify:internal:local-files",children:(0,O.jsx)(C.hz,{uri:"spotify:internal:local-files",children:(0,O.jsx)(ne,{})})})},27284:(e,t,l)=>{l.d(t,{I:()=>a});var r=l(44658);function a(){return(0,r.S)()[0]}}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.4bd2167b.js.map