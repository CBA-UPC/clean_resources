"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5067],{16476:(e,t,r)=>{r.d(t,{v:()=>g});var i=r(50959),a=r(85648),n=r(6807),l=r(45438),o=r(30751),s=r(94452),d=r(82857),c=r(24683),u=r(18674),p=r(11527);const g=i.memo((function(e){let{uri:t,artistUri:r,canPin:i=o.TL.NO,isPinned:g=!1}=e;const{spec:y}=(0,s.T)(t);return(0,p.jsx)(l.JL,{value:"album",children:(0,p.jsxs)(n.v,{children:[r&&(0,p.jsx)(c.Jh,{spec:y,divider:"after",uri:r,displayText:a.ag.get("contextmenu.go-to-artist-radio")}),i!==o.TL.NO&&(0,p.jsx)(u.X,{uri:t,canPin:i,isPinned:g,type:d.p.PRE_RELEASE,spec:y}),(0,p.jsx)(c.Jx,{uri:t,spec:y,displayText:a.ag.get("context-menu.copy-album-link")}),(0,p.jsx)(c.h$,{spec:y,divider:"before",uri:t})]})})}))},12895:(e,t,r)=>{r.d(t,{l:()=>p,B:()=>y});var i=r(50959),a=r(10356),n=r(7935);r(22849),r(606);function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return;if(!(0,n.lK)(e))return;const i=e.querySelector('[tabindex="0"]');t===a.N.UP&&(0,n.Bu)(i,o(e,i,a.N.UP,r)),t===a.N.DOWN&&(0,n.Bu)(i,o(e,i,a.N.DOWN,r)),t===a.N.RIGHT&&(0,n.Bu)(i,s(i,a.N.RIGHT,r)),t===a.N.LEFT&&(0,n.Bu)(i,s(i,a.N.LEFT,r)),t===a.N.HOME&&(0,n.Bu)(i,d(a.N.HOME,r)??i),t===a.N.END&&(0,n.Bu)(i,d(a.N.END,r)??i)}function o(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const l=t.closest('li[role="row"]');if(!l)return t;let o=l;const d=Array.from(e.querySelectorAll('li[role="row"]')),c=Array.from(l.querySelectorAll(n.Yf)),u=d.indexOf(l);if(u<0)return t;const p=(i&&t!==c[0]||!i&&t!==l)&&!(t instanceof HTMLLIElement);if(r===a.N.UP){if(document.activeElement===e){o=d[d.length-1];return(i?o.querySelector(n.Yf):o)??t}if(p)return s(t,a.N.LEFT,i);let r=u-1;if(-1===r)return t;o=d[r],r-=1}else if(r===a.N.DOWN){if(document.activeElement===e){o=d[0];return(i?o.querySelector(n.Yf):o)??t}if(p)return s(t,a.N.RIGHT,i);let r=u+1;if(r===d.length)return t;o=d[r],r+=1}return(i?o.querySelector(n.Yf):o)??t}function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.closest('li[role="row"]');if(!i)return e;let l=e;const o=Array.from(i.querySelectorAll(n.Yf)),s=o.indexOf(e);let d=0;if(t===a.N.RIGHT&&s-1!==o.length)d=s+1;else{if(t===a.N.LEFT&&-1===s)return i;if(t===a.N.LEFT&&0!==s)d=s-1;else if(t===a.N.LEFT&&0===s){return(r?i.querySelector(n.Yf):i)??i}}return l=o.at(d),l??e}function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{currentFocus:r,listEl:i}=function(){const e=document.activeElement,t=null==e?void 0:e.closest("ul");return((0,a.L)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===r||null===i)return null;const l=r.closest('li[role="row"]');if(!l)return r;const o=Array.from(i.querySelectorAll('li[role="row"]')),s=Array.from(l.querySelectorAll(n.Yf));if(o.indexOf(l)<0)return r;const d=t&&r===s[0]||!t&&r===l;if(e===a.N.HOME){if(d){return(t?o[0].querySelector(n.Yf):o[0])??r}return(t?s[1]:s[0])??r}if(e===a.N.END){if(d){return(t?o[o.length-1].querySelector(n.Yf):o[o.length-1])??r}return s[s.length-1]??r}return r}var c=r(13803),u=r(11527);const p=e=>{let{onKeyDown:t,children:r,firstInteractiveIsWrapper:o=!1,...s}=e;const d=(0,i.useRef)(null);(0,c.W)(d);const p=(0,i.useCallback)((e=>{var r;null!==(r=d.current)&&void 0!==r&&r.contains(e.target)&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Home"!==e.key&&"End"!==e.key||e.preventDefault(),"ArrowUp"!==e.key&&"ArrowDown"!==e.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===e.key&&l(d.current,a.N.UP,o),"ArrowDown"===e.key&&l(d.current,a.N.DOWN,o),"ArrowRight"===e.key&&l(d.current,a.N.RIGHT,o),"ArrowLeft"===e.key&&l(d.current,a.N.LEFT,o),"Home"===e.key&&l(d.current,a.N.HOME,o),"End"===e.key&&l(d.current,a.N.END,o),null==t||t(e))}),[o,t]),g=(0,i.useCallback)((e=>{if(!d.current)return;const t=e.target,r=d.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==r&&(0,n.Bu)(r,t,{preventScroll:!0})}),[]);return(0,u.jsx)("ul",{role:"treegrid",ref:d,onKeyDown:p,onFocus:g,tabIndex:0,...s,children:r})};var g=r(72741);const y=e=>{let{children:t,innerRef:r,reRunOnDOMUpdate:a=!1,...n}=e;const l=(0,i.useRef)(null),o=r??l;return(0,g.O)(o,a),(0,u.jsx)("li",{ref:o,"aria-expanded":"true","aria-level":1,role:"row",...n,children:t})}},46206:(e,t,r)=>{r.d(t,{S:()=>l});var i=r(16243);const a="fRZRXRIV2YBCFLYgwDAr";var n=r(11527);const l=e=>{let{iconSize:t=64,...r}=e;return(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i._,{iconSize:t,...r,semanticColor:"textBrightAccent","aria-hidden":!0})})}},75067:(e,t,r)=>{r.d(t,{Z:()=>pn,YourLibraryX:()=>Ol,g:()=>gn});r(22849),r(606),r(46758),r(53321),r(86277);var i=r(50959),a=r(82187),n=r.n(a),l=r(89130),o=r(29132),s=r(49857),d=r(93295),c=r(10226),u=r(48536),p=r(20580),g=r(6807),y=r(45438),m=r(30751),x=r(94452),b=r(24683),h=r(11527);const f=i.memo((function(e){let{folderUri:t,onCreateCallback:r}=e;const i=t?{after:{uri:t}}:{before:"start"},{spec:a}=(0,x.T)(t??m.in);return(0,h.jsx)(y.JL,{value:"folder",children:(0,h.jsxs)(g.v,{children:[(0,h.jsx)(b.uj,{position:i,onCreateCallback:r,spec:a}),(0,h.jsx)(b.K_,{position:i,onCreateCallback:r,spec:a})]})})}));var v=r(5629),S=r(66685),w=r.n(S),P=r(97551),T=r(40871),C=r(7730),D=r(44246),I=r(20980),R=r(82857);var j=r(12988),A=r(66514),L=r(27284),N=r(24241),O=r(46974);r(70054),r(92372),r(70069),r(44227),r(91499),r(68856),r(18004),r(16527);const F=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function k(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{var t;const r="Backspace"===e.key,i=" "===e.key,o=e.metaKey||e.ctrlKey,s=e.target instanceof HTMLElement&&(null===(t=e.target)||void 0===t?void 0:t.matches("input, textarea, [contenteditable]")),d=e.isComposing||229===e.keyCode,c=(u=e.key,F.has(u)&&!r);var u;const p=i&&!n.current,g=r&&!n.current;if(o||s||d||c||p||g)return;(r&&n.current||i)&&(e.preventDefault(),e.stopPropagation()),a((t=>r?t.slice(0,-1):t+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const E=(0,i.createContext)({setTypeaheadResult:e=>{let{uid:t,str:r}=e;if(t||r)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),B=e=>{let{children:t,containerRef:r,findMatchingTypeaheadUid:a,isEnabled:n=!0}=e;const[l,o]=(0,i.useState)({uid:null,str:""}),s=(0,i.useMemo)((()=>({typeaheadResult:l,setTypeaheadResult:o})),[l,o]),d=k(r,n),c=(0,i.useRef)(d);c.current=d;const u=(0,i.useRef)(a);return u.current=a,(0,i.useEffect)((()=>{d&&n?u.current(d).then((e=>{d===c.current&&o({uid:e,str:d})})):o({uid:null,str:""})}),[n,d,o]),(0,h.jsx)(E.Provider,{value:s,children:t})},U="Vf3ww2_My5QuwUnbpzhu";var M=r(27517);const V=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(E);return e?(0,h.jsx)(M.A9,{className:U,children:e}):null};var _=r(80626),W=r(69736),H=r(21165),K=r(85648),Y=r(12618),z=r(60046);const G="rLYEzyB9ic23aMurRbCh",$="NDD4b43wDJs8ZEk8nE0N",X="/preferences",Z=e=>{let{spec:t}=e;const r=(0,C.lb)(),a=(0,_.$P)(),n=K.ag.get("web-player.your-library-x.dsa-message",K.ag.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{a.logInteraction(t.dsaMessageSettingsLinkFactory().hitUiNavigate({destination:X}))}),[a,t]);return(0,h.jsx)("div",{className:G,children:r?(0,h.jsx)(Y.ws,{label:(0,h.jsx)(W.x,{children:n}),placement:"right",showDelay:0,children:(0,h.jsx)("div",{className:$,children:(0,h.jsx)(H.W,{"aria-label":n})})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{children:(0,h.jsx)(H.W,{size:"small"})}),(0,h.jsx)(W.x,{as:"p",semanticColor:"textSubdued",children:K.ag.get("web-player.your-library-x.dsa-message",(0,h.jsx)(z.default,{to:X,onClick:l,search:"?highlight=dsa",children:K.ag.get("web-player.your-library-x.dsa-message-link")}))})]})})},J="wW9brXu3G3dR9CQ77Tyk",Q="sgpkGFrp4dcnre_TJtaI",q=e=>{let{className:t}=e;return(0,h.jsx)("section",{className:n()(J,t),children:(0,h.jsxs)("div",{className:Q,children:[(0,h.jsx)(W.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.empty-state-folder-title")}),(0,h.jsx)(W.x,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.empty-state-folder-subtitle")})]})})};var ee=r(26082),te=r(43286),re=r(33592);const ie="xi3ytXbuSuzCYy5LwjFu",ae="OcOr6YadMDDeh_NPgClX",ne="eL94fWmhg6WbrdKZfGEW",le=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:o}=e;return(0,h.jsxs)("section",{className:n()(ie,o),children:[(0,h.jsxs)("div",{className:ae,children:[(0,h.jsx)(W.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,h.jsx)(W.x,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,h.jsx)("div",{className:ne,children:i&&(a||l)&&(0,h.jsx)(te.D,{className:ne,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:re.Z,size:"small",children:i})})]})}));var oe=r(91402);const se=e=>{let{className:t}=e;const{createPlaylist:r}=(0,ee.K)(),a=(0,i.useCallback)((()=>{r()}),[r]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oe.Du,{renderInline:!1,children:(0,h.jsx)(le,{onClick:a,linkTitle:K.ag.get("web-player.your-library-x.empty-state-playlists-cta"),title:K.ag.get("web-player.your-library-x.empty-state-playlists-title"),message:K.ag.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:t})}),(0,h.jsx)(le,{linkTo:"/genre/podcasts-web",linkTitle:K.ag.get("web-player.your-library-x.empty-state-podcasts-browse"),title:K.ag.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:K.ag.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:t})]})},de="JouuH90_RNAdTj0ZjcCA",ce="YtlFVHxvaGSz4vJdDdEa",ue="spFG_i1jkxOkxb1_SaLJ",pe="_8ZKfG3dOxfcr9Yyy5cv",ge=e=>{let{query:t,className:r}=e;return(0,h.jsxs)("div",{className:n()(de,r),"data-testid":"no-search-results-view",children:[(0,h.jsx)(W.x,{as:"h1",variant:"bodyMediumBold",className:ce,children:K.ag.get("web-player.your-library-x.empty-results-title-short",(0,h.jsx)("span",{className:ue,children:(0,h.jsx)("span",{className:pe,children:t})}))}),(0,h.jsx)(W.x,{as:"h2",variant:"bodySmall",children:K.ag.get("web-player.your-library-x.empty-results-text-short")})]})};var ye=r(16145);const me="yrUQENj0tMcKDW5v0mfb",xe="jsT0vJ8rWXPMeoFsMdNK",be=e=>{let{onClick:t}=e;return(0,h.jsxs)("div",{className:me,children:[(0,h.jsx)("div",{className:"icon",children:(0,h.jsx)(ye.l,{size:"xlarge",semanticColor:"textBase"})}),(0,h.jsxs)("div",{className:xe,children:[(0,h.jsx)(W.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.error-title")}),(0,h.jsx)(W.x,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.error-body")})]}),(0,h.jsx)("div",{children:(0,h.jsx)(te.D,{onClick:t,colorSet:"invertedLight",size:"small",children:K.ag.get("web-player.your-library-x.error-button")})})]})},he=(0,i.createContext)(null);r(80378);var fe=r(65786);const ve=e=>{let{children:t}=e;const r=function(){const[e,t]=(0,fe.z)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,h.jsx)(he.Provider,{value:r,children:t})},Se="ojrThQm1wxR2gZ6GntJB",we="Dtr130mQSR0j8k7bu5KS",Pe="Ks_qLLEMUQzP7ejeQCwQ",Te="o_wMyH9_LbAmIwlVqsF0",Ce="vR1zUcAr6PBeHIvA_K13",De="TiJahFhH6KZaibhRtEOA",Ie="B_HdWVSEWPHaOf9LQAtC",Re="Pns6F5g4OEwEpdmOWTLg",je="gOCoOAfYUiOq2RlMCOjr",Ae="eldivguzYznZgQoShJbe",Le="rTLczxlwElfe8CeNpuh6",Ne="_XBlEstA77PgWTJzWbe1",Oe="pFmiujkSoJU4nVLZNO32",Fe="raKUx1vRBRjpm8xR2bIV",ke="jNqzRycGQMLmnhgQNqxy",Ee="Q955MS3fMIZGQAtvDYCq",Be="cVy6fGx6QtJbCnID7XdB",Ue="qEiVyQ28VnOKb0LeijqL",Me="IKhOc8pMvjcJEY5EP8GW",Ve=e=>{let{isScrolled:t}=e;return(0,h.jsxs)("div",{className:n()(Ne,Fe,{[ke]:t}),children:[(0,h.jsx)(W.x,{variant:"marginalBold",semanticColor:"textSubdued",children:K.ag.get("web-player.your-library-x.expanded-list-header.title")}),(0,h.jsx)(W.x,{variant:"marginalBold",semanticColor:"textSubdued",children:K.ag.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,h.jsx)(W.x,{variant:"marginalBold",semanticColor:"textSubdued",children:K.ag.get("web-player.your-library-x.expanded-list-header.played-at")})]})};var _e=r(60769),We=r(8818),He=r(7935),Ke=r(75383),Ye=r(22795),ze=r(64464);const Ge="oLOECYtBhVmBtyisKwew",$e="as7TWnIA1jnumFte_u0R",Xe="tXkgloQ88DHF_inQE69J",Ze="g581mszC8syz99uMMWsr",Je="V57QBvW1q79gFmT8NBvz",Qe={marginBlockEnd:0,willChange:"transform, opacity"},qe=e=>{let{filterId:t,isPrimaryFilter:r,isPlaceholder:a,resetFilterIds:l,toggleFilterId:o,allowedDropTargetMimeTypes:s=ze.bu,className:d,ChipComponent:c=Ke.A,innerRef:u,index:p=0,spec:g,...y}=e;const m=(0,_.$P)(),x=(0,Ye.y)(),b=y.selected,f=t?x.getFilterLabel(t):"",v=(0,i.useCallback)((()=>{!t||b&&r?(l(),b&&r&&t?m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitClearFilter()):m.logInteraction(g.clearButtonFactory().hitClearFilter())):(o(t),b?m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitClearFilter()):m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitFilter()))}),[t,f,b,r,l,o,p,m,g]),S=(0,i.useCallback)((e=>{e.detail>1||a||v()}),[a,v]),{className:w,dropPosition:P,...T}=(0,ze.WB)({allowedMimeTypesByDropPosition:{[ze.Pw.ON]:s},onLongDragOver:v});return(0,h.jsx)(c,{...y,"aria-label":y["aria-label"],...T,...P===ze.Pw.ON?{selectedColorSet:"base"}:void 0,className:n()(d,w,{[$e]:P===ze.Pw.ON,[Je]:a}),onClick:S,selectedColorSet:P===ze.Pw.ON?"invertedDark":"invertedLight",secondary:b&&!r,style:Qe,ref:u,tabIndex:-1})},et=[{id:"p1",name:"Playlists"},{id:"p2",name:"Podcasts & Shows"},{id:"p3",name:"Artists"},{id:"p4",name:"Albums"}],tt=(0,i.memo)((function(e){let{availableFilters:t,selectedFilters:r,toggleFilterId:a,resetFilterIds:n,className:l,spec:o}=e;const s=!(r||t),d=s?et:[...r??[],...t??[]],c=(0,i.useRef)(null),u=(0,i.useCallback)((()=>{var e,t;(0,He.Bu)(c.current,(null===(e=c.current)||void 0===e?void 0:e.nextElementSibling)instanceof HTMLElement?null===(t=c.current)||void 0===t?void 0:t.nextElementSibling:null),n()}),[n]);return 0===d.length?null:(0,h.jsxs)(We.l,{className:l,ariaLabel:K.ag.get("web-player.your-library-x.filter_options"),children:[!(null==r||!r.length)&&(0,h.jsx)(qe,{resetFilterIds:u,toggleFilterId:a,allowedDropTargetMimeTypes:Al,ChipComponent:_e.w,"aria-label":K.ag.get("web-player.your-library-x.clear_filters"),innerRef:c,spec:o}),d.map(((e,t)=>{const i=null==r?void 0:r.includes(e),l=0===t;return(0,h.jsx)(qe,{filterId:e.id,isPrimaryFilter:l,isPlaceholder:s,resetFilterIds:n,toggleFilterId:a,selected:i,spec:o,index:t,children:e.name},e.id)}))]})}));var rt=r(65432);const it="",at=(0,i.createContext)({openedFolderUri:it,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),nt=e=>{let{children:t}=e;const{setFilter:r}=(0,i.useContext)(rt.fo),[a,n]=(0,fe.z)("opened-folder-uri",it),l=(0,i.useRef)([a??it]),o=(0,i.useRef)("PUSH"),s=(0,i.useCallback)((e=>{n(e),r(it)}),[n,r]),d=(0,i.useCallback)((e=>{l.current.push(e),o.current="PUSH",s(l.current.at(-1))}),[s]),c=(0,i.useCallback)((()=>{l.current.pop();const e=l.current.at(-1);return o.current="POP",s(e),e}),[s]),u=(0,i.useCallback)((()=>{l.current=[it],s(it)}),[s]);return(0,h.jsx)(at.Provider,{value:{openedFolderUri:a,pushFolder:d,popFolder:c,resetFolder:u,change:o.current},children:t})};var lt=r(21453),ot=r(36020),st=r(37001),dt=r(38174);r(27082);const ct=e=>{let{span:t,onInView:r,marginBottom:a,marginTop:n}=e;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&r()}))}));return l.current&&e.observe(l.current),()=>{e.disconnect()}}),[r]),t<=0?null:(0,h.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${t}`,marginBottom:a,marginTop:n},ref:l,"data-type":"sentinel"},"topSentinel")},ut=e=>{let{renderItems:t,nrItems:r,estimatedItemMaxHeight:a,scrollNodeRef:n,nrRowsOverscan:l=5,initalNrRows:o=5,onGridResize:s}=e;const[d,c]=(0,i.useState)({firstRowToRender:0,nrRows:o+l}),u=(0,i.useRef)(0),p=(0,i.useRef)(null),g=(0,i.useRef)(a),y=(0,ot.u)(),m=(0,i.useCallback)((()=>{var e;const t=null===(e=p.current)||void 0===e?void 0:e.querySelector(':scope > *:not([data-type="sentinel"])');g.current=t?t.getBoundingClientRect().height+y.COLUMN_GRID_GAP:g.current}),[y]),x=(0,i.useCallback)((()=>{const e=n.current;if(!e)return;m();const t=Math.floor((e.scrollTop-u.current)/g.current),r=Math.max(t-l,0),i=Math.ceil(e.offsetHeight/g.current)+2*l;r===d.firstRowToRender&&i===d.nrRows||c({firstRowToRender:r,nrRows:i})}),[l,d,n,m]),b=(0,i.useCallback)((e=>{let{columnCount:i}=e;if(i<=0)return[null];s&&s(i,g.current);const a=Math.ceil(r/i),n=d.firstRowToRender*i,o=d.firstRowToRender+d.nrRows-1,c=Math.min(r-1,(o+1)*i-1),u=g.current*(l-2);return[(0,h.jsx)(ct,{span:d.firstRowToRender,onInView:x,marginBottom:`-${u}px`},`topSentinel-${d.firstRowToRender}`),t(n,c,i),(0,h.jsx)(ct,{span:a-o,onInView:x,marginTop:`-${u}px`},"bottomSentinel-"+(a-o))]}),[r,l,s,x,t,d]);return(0,i.useEffect)((()=>{const e=p.current,t=n.current;e&&t&&(u.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[n]),(0,h.jsx)(dt.T,{useUniformRowHeight:!0,ref:p,render:b,onLayoutChange:m})};var pt=r(61930),gt=r(70526),yt=r(94948),mt=r(16972),xt=r(18739),bt=r(4901),ht=r(22527),ft=r(70959),vt=r(87890),St=r(36353),wt=r(11317),Pt=r(12895),Tt=r(87080),Ct=r(49334);const Dt=e=>{let{iconSize:t="small"}=e;return(0,h.jsx)("span",{className:Ce,children:(0,h.jsx)(Ct.w,{size:t,semanticColor:"textBrightAccent",className:Te})})};var It=r(47895);const Rt=e=>{let{children:t,title:r,subtitleSlot:i,isPlaying:a}=e;const l=(0,c.W6)(It.y);return(0,h.jsx)(Y.ws,{label:(0,h.jsxs)("div",{className:n()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":l},Le),children:[(0,h.jsxs)("div",{children:[r,i]}),a&&(0,h.jsx)(Dt,{})]}),placement:"right",showDelay:0,children:t})},jt=e=>{const t=(0,i.useRef)(null);return(0,lt.xn)(e.uri)?(0,h.jsx)(lt.sg,{parentRef:e.parentRef,api:t,children:(0,h.jsx)(Rt,{...e})}):(0,h.jsx)(Rt,{...e})};var At=r(32394),Lt=r(11797),Nt=r(47498);const Ot=e=>{let{leading:t,subtitle:r,uri:i}=e;const a=`listrow-subtitle-${i}`;return(0,h.jsx)("div",{className:Nt.Z.subtitle,children:(0,h.jsxs)(At.l,{lineClamp:1,className:Nt.Z.link,id:a,dir:"auto",children:[(0,h.jsx)("span",{className:Nt.Z.subtitleLeadingWrapper,children:t}),r]})})},Ft=e=>{let{leading:t,subtitle:r,uri:i}=e;const a=`card-subtitle-${i}`;return(0,h.jsx)("div",{className:Nt.Z.subtitle,children:(0,h.jsxs)(Lt._,{lineClamp:1,className:Nt.Z.link,id:a,role:"gridcell",dir:"auto",children:[(0,h.jsx)("span",{className:Nt.Z.subtitleLeadingWrapper,children:t}),r]})})};var kt=r(75802),Et=r(97345),Bt=r(24441),Ut=r(82579),Mt=r(62116);var Vt=r(86529);const _t={state:{referrer:"your_library",preventMoveFocus:!0}};function Wt(e,t,r,a){const{filter:n}=(0,i.useContext)(rt.fo),{isActive:l}=(0,ft.cR)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(E);return t===e?r:null}(e),s=!!o,d=(0,Mt.k)({uri:e,type:"link"})?(0,Vt.is)(t):t,c=(0,i.useRef)(null),u=(0,kt.s0)(),p=(0,i.useCallback)((e=>{e.preventDefault(),a?a():d&&u(d,_t)}),[a,u,d]);(0,i.useLayoutEffect)((()=>{var e;s&&(null===(e=c.current)||void 0===e||null===(e=e.closest('[role="row"], [role="listitem"]'))||void 0===e||null===(e=e.querySelector("button"))||void 0===e||e.focus({preventScroll:!0}))}),[s]);return{isActive:l,onClick:p,contents:n||o?(0,h.jsx)("span",{ref:c,children:(0,h.jsx)(bt.o,{autoEscape:!0,searchWords:[n.trim(),...(null==o?void 0:o.split(" "))??""],textToHighlight:r})}):r}}const Ht=e=>{var t;let{uri:r,playbackUri:i=r,title:a,menu:l,to:o=(null===(t=(0,wt.EC)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:s}=e;const{isActive:d,contents:c}=Wt(i,o,a,s),u=`listrow-title-${r}`;return(0,h.jsx)(Ut._,{menu:l,children:(0,h.jsx)(Et.g,{id:u,lineClamp:1,className:n()(Nt.Z.link,Nt.Z.titleLink),semanticColor:d?"textBrightAccent":"textBase",dir:"auto",children:c})})},Kt=e=>{var t;let{uri:r,playbackUri:i=r,title:a,menu:l,to:o=(null===(t=(0,wt.EC)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:s}=e;const{isActive:d,onClick:c,contents:u}=Wt(i,o,a,s);return(0,h.jsx)(Ut._,{menu:l,children:(0,h.jsx)(Bt.l,{lineClamp:1,className:n()(Nt.Z.link,Nt.Z.titleLink),semanticColor:d?"textBrightAccent":"textBase",href:o,onClick:c,role:"gridcell",dir:"auto",children:u})})};var Yt=r(78734),zt=r(17053),Gt=r(59374),$t=(r(39301),r(44874)),Xt=r(29608);const Zt=e=>{let{isConfirmationForPlaylist:t,onConfirm:r,onClose:i}=e;const a=t?K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,h.jsx)(Xt.Q,{"aria-label":a,titleText:a,descriptionText:t?K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:r,onClose:i,confirmText:K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:t?K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:K.ag.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};function Jt(e){var t;let{onApplyDrop:r,spec:a,isDropTargetPinned:n}=e;const l=(0,Ye.y)(),{contains:o}=(0,$t.P)("ylpin"),[s,d]=(0,i.useState)(null),c=(0,i.useCallback)((async(e,t)=>{if(n)return void r(e,t);const{[Yt.RN.PLAYLISTS_V2]:i=[],[Yt.RN.FOLDERS]:a=[]}=e,l=[...i,...a];if(!!l.length&&(await o(...l)).some(Boolean)){if(l.length>1)throw new Error("Reordering multiple pinned items at once is not supported");d({dropData:e,dropPosition:t})}else r(e,t)}),[n,o,r]),u=(0,_.$P)();return{applyDropWithUnpinConfirmation:c,unpinConfirmationDialog:s?(0,h.jsx)(Zt,{isConfirmationForPlaylist:!(null!==(t=s.dropData[Yt.RN.FOLDERS])&&void 0!==t&&t.length),onClose:()=>d(null),onConfirm:async()=>{const{[Yt.RN.PLAYLISTS_V2]:e=[],[Yt.RN.FOLDERS]:t=[]}=s.dropData;await l.unpin([...e,...t][0]),null!=a&&a.dragUnpinItem&&u.logInteraction(a.dragUnpinItem({itemToUnpin:[...e,...t][0]})),r(s.dropData,s.dropPosition),d(null)}}):null}}var Qt=r(58578);function qt(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(Qt.Di);return{dropOriginIsYLX:e===m.in,entityIsInFolder:t>0}}function er(){const e=(0,N.o)(),{dropOriginIsYLX:t}=qt();return(0,i.useCallback)((async(r,i)=>{const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}function tr(e){let{dropTargetUri:t,spec:r,isDropTargetPinned:a}=e;const n=(0,N.o)(),l=(0,i.useContext)(I.H),o=(0,_.$P)(),s=er(),d=(0,i.useCallback)((async(e,i)=>{const{[Yt.RN.PLAYLISTS_V2]:d=[],[Yt.RN.FOLDERS]:[c]=[]}=e,u=i===ze.Pw.BEFORE?{before:{uri:t}}:{after:{uri:t}};if(a){const t=e[Object.keys(e)[0]][0];if((0,wt.nK)(t)||(0,wt.L0)(t)){const e=rr((await n.getContents()).items,t);-1===e?await n.add([t],{before:"start"}):e>0&&((0,wt.nK)(t)?await n.move({uri:t},{before:"start"}):await n.moveFolder({uri:t},{before:"start"}))}else if(!(0,wt.zO)(t)){const[e]=await l.contains(t);e||await l.add({uris:[t]})}await l.pin(t,u),o.logInteraction(r.dragPinItem({itemToPin:t}))}else c?await n.moveFolder({uri:c},u):d.length&&await s(d,u);o.logInteraction(r.dragSort())}),[t,a,l,o,r,n,s]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:u}=Jt(a?{onApplyDrop:d,spec:r,isDropTargetPinned:a}:{onApplyDrop:d});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[Yt.RN.PLAYLISTS_V2]:r=[],[Yt.RN.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");u(e,t)}),[u]),unpinConfirmationDialog:c}}function rr(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(const i of e)if((0,Gt.no)(i)||(0,Gt.lU)(i)){if((0,wt.U4)(i.uri,t))return r;if((0,Gt.lU)(i)){const e=rr(i.items,t,r+1);if(-1!==e)return e}}return-1}const ir={state:{referrer:"your_library",preventMoveFocus:!0}};function ar(e){var t,r;let{uri:a,to:n=(null===(t=(0,wt.EC)(a))||void 0===t?void 0:t.toURLPath(!0))||"",type:l,handleNavigate:o,dragLabel:s,isPinned:d,canReorder:c,allowedDropTargetDropOnMimeTypes:u=[],onDropTargetDropOn:p,onLongDragOver:g,openDeleteDialog:y,togglePlay:x,isItemInGrid:b,playInsteadOfNavigating:h=!1,isPlaying:f,isActive:v,spec:S,folderDepth:w}=e;const P=(0,Mt.k)({uri:a,type:"link"})?(0,Vt.is)(n):n,T=(0,kt.s0)(),C=(0,kt.TH)(),D=(0,i.useCallback)((()=>{T(P,ir)}),[T,P]),I=(0,_.$P)(),R=(0,i.useRef)(0),j=(0,i.useRef)(null),A=(0,i.useCallback)((e=>{var t;let{target:r}=e;return r instanceof HTMLElement&&!(null!==(t=j.current)&&void 0!==t&&t.contains(r))}),[]),L=(0,i.useCallback)((e=>{if(!A(e)){if(e.preventDefault(),e.currentTarget.scrollIntoView({block:"nearest"}),h){if(R.current>Date.now())return;return R.current=Date.now()+300,void(f||(null==x||x(),I.logInteraction(S.yourLibraryItemFactory().hitPlay({itemToBePlayed:a}))))}o?o():P&&T(P,{...ir,replace:P===C.pathname}),I.logInteraction(S.yourLibraryItemFactory().hitUiNavigate({destination:a}))}}),[A,h,o,P,I,S,a,x,f,T,C.pathname]),N=(0,i.useCallback)((e=>{h||A(e)||x&&(v?f?I.logInteraction(S.yourLibraryItemFactory().doubleHitPause({itemToBePaused:a})):I.logInteraction(S.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:a})):I.logInteraction(S.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:a})),null==x||x())}),[A,h,x,v,f,I,S,a]),O=(0,i.useCallback)((()=>{I.logInteraction(S.yourLibraryItemFactory().secondaryHitUiReveal())}),[I,S]),F=(0,zt.O)({itemUris:[a],itemMimeTypes:[(0,Yt.H$)(l)],dragLabelText:s,sectionId:w??0,dropOriginUri:m.in});let k=[];d?k=m.Jp:c&&(k=m.SG);const E={[ze.Pw.ON]:u,[ze.Pw.BEFORE]:k,[ze.Pw.AFTER]:k},{handleDropBeforeOrAfterRootlistItem:B,unpinConfirmationDialog:U}=tr({dropTargetUri:a,spec:S,isDropTargetPinned:d}),M=(0,i.useCallback)(((e,t)=>{t===ze.Pw.ON?null==p||p(e,t):t!==ze.Pw.BEFORE&&t!==ze.Pw.AFTER||B(e,t)}),[p,B]),{dropPosition:V,className:W,...H}=(0,ze.WB)({uri:a,allowedMimeTypesByDropPosition:E,onDrop:M,onLongDragOver:g??D,reorderDirection:b?"horizontal":"vertical"}),K=(0,i.useCallback)((e=>{e.repeat||A(e)||("Backspace"!==e.key&&"Delete"!==e.key||!y||y(),"Enter"===e.key&&e.shiftKey&&x&&(e.preventDefault(),x()),"Enter"===e.key&&I.logInteraction(S.yourLibraryItemFactory().keyStrokeUiNavigate({destination:a})))}),[A,I,y,S,x,a]),Y=null===(r=(0,wt.EC)(C.pathname,{parseUnknown:!0}))||void 0===r?void 0:r.toURI();return{onClick:L,onDoubleClick:N,draggable:!!s,onDragStart:F,onKeyDown:K,unpinConfirmationDialog:U,dropPosition:V,dropTargetClassName:W,logRightClick:O,isViewActive:!!Y&&(0,wt.U4)(a,Y),itemRef:j,...H}}const nr=e=>{switch(e){case R.p.ALBUM:return K.ag.get("web-player.your-library-x.type-album");case R.p.ARTIST:return K.ag.get("web-player.your-library-x.type-artist");case R.p.FOLDER:return K.ag.get("web-player.your-library-x.type-folder");case R.p.AUDIOBOOK:return K.ag.get("web-player.your-library-x.type-audiobook");case R.p.YOUR_EPISODES:case R.p.LOCAL_FILES:case R.p.LIKED_SONGS:case R.p.PLAYLIST:return K.ag.get("web-player.your-library-x.type-playlist");case R.p.SHOW:return K.ag.get("web-player.your-library-x.type-show");case R.p.PRE_RELEASE:return"Upcoming album";default:return(0,gt.U)(e)}},lr=e=>{switch(e){case R.p.YOUR_EPISODES:case R.p.LIKED_SONGS:case R.p.LOCAL_FILES:return R.p.PLAYLIST;default:return e}};var or=r(67627);const sr=i.createContext(!1),dr=e=>{let{children:t,isCompact:r}=e;return(0,h.jsx)(sr.Provider,{value:r,children:t})},cr=()=>(0,i.useContext)(sr),ur="eB4weTwpV1CJo1Ycry5o",pr="TaQop0j2CNkuRamIFPJm",gr="XbKq21A9yavQTZY4fYcy",yr="DHzyoCWhWjunaSpGo3fm",mr="R7bnv14gXI2ndBOqFvCf",xr="eYs_j7mhACuywEjr6wf4",br="IyHaBob4EvHvpR1d0aMt",hr=e=>{var t;let{uri:r,to:a=(null===(t=(0,wt.EC)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:l,dragLabel:o,name:s,subtitle:d,cover:c,type:u,downloadButton:g,canReorder:y,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:x,onLongDragOver:b,menu:f,leading:v,openDeleteDialog:S,togglePlay:w,isPinned:P,shouldShowType:T,playbackUri:C,isPlaying:D,isActive:I,playInsteadOfNavigating:R,spec:j,index:A,animateClassName:L="",animateState:N}=e;const{onClick:O,onDoubleClick:F,draggable:k,onDragStart:E,onKeyDown:B,dropPosition:U,dropTargetClassName:M,unpinConfirmationDialog:V,logRightClick:_,isViewActive:W,itemRef:H,...K}=ar({uri:r,to:a,handleNavigate:l,dragLabel:o,isPinned:P,canReorder:y,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:x,openDeleteDialog:S,onLongDragOver:b,togglePlay:w,isItemInGrid:!0,isPlaying:D,isActive:I,spec:j,playInsteadOfNavigating:R}),Y=(0,h.jsx)(Kt,{uri:r,title:s,menu:f,handleNavigate:l,playbackUri:C}),z=(0,h.jsx)(Ft,{leading:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(or.z,{pinned:P}),g]}),subtitle:(0,h.jsxs)(h.Fragment,{children:[T&&nr(u),!!d&&T&&" • ",d]}),uri:r}),G=(0,i.useRef)(null),$=cr();let X=(0,h.jsx)(p._P,{menu:f,onShow:_,children:(0,h.jsx)(Tt.Q,{uri:r,trigger:Tt.x.OnMouseDown,children:(0,h.jsx)(vt.Z,{id:r,title:Y,subtitle:z,media:c,size:"sm",leading:v,className:n()(ur,{[L]:N}),variant:W?"tinted":void 0,onClick:O,onDoubleClick:F,padding:St.nu,...K})})});return $&&(X=(0,h.jsx)(jt,{title:Y,subtitleSlot:z,uri:r,isPlaying:D,parentRef:G,children:(0,h.jsx)("div",{children:(0,h.jsx)(p._P,{menu:f,onShow:_,children:(0,h.jsx)(Tt.Q,{uri:r,trigger:Tt.x.OnMouseDown,children:(0,h.jsx)(vt.Z,{id:r,title:void 0,media:c,size:"sm",className:n()(ur,pr,{[L]:N}),variant:W?"tinted":void 0,onClick:O,onDoubleClick:F,padding:St.hM,ref:G,...K})})})})})),(0,h.jsxs)(h.Fragment,{children:[V,(0,h.jsx)(Pt.B,{draggable:k,onDragStart:E,onKeyDown:B,className:n()(M,{[Ge]:U===ze.Pw.ON,[Xe]:U===ze.Pw.BEFORE,[Ze]:U===ze.Pw.AFTER}),"aria-selected":I,innerRef:H,"aria-posinset":A,children:X})]})};var fr=r(32540),vr=r(93421),Sr=r(11401),wr=r(33598),Pr=r(76981),Tr=r(1134),Cr=r(61027);const Dr=e=>{let{name:t,uri:r,togglePlay:a,spec:l,isActive:o,isPlaying:s,size:d}=e;const c=(0,_.$P)(),u=(0,i.useCallback)((()=>{o?s?c.logInteraction(l.yourLibraryItemFactory().doubleHitPause({itemToBePaused:r})):c.logInteraction(l.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:r})):c.logInteraction(l.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:r})),a()}),[o,s,c,l,a,r]);return(0,h.jsx)("div",{className:n()(mr,{[br]:s,[xr]:"small"===d}),role:"gridcell",children:(0,h.jsx)(Cr.f,{isPlaying:s,onClick:u,ariaPlayLabel:K.ag.get("playlist.a11y.play",t),ariaPauseLabel:K.ag.get("playlist.a11y.pause",t),size:d})})},Ir=(0,i.memo)((function(e){let{title:t,type:r,images:i,isCircular:a,color:l,animateState:o,animateClassName:s=""}=e;const d=(0,Tr.TJ)();return(0,h.jsx)(vr.O,{fadeIn:!0,images:d(i,48),shape:a?vr.K.CIRCLE:vr.K.ROUNDED_CORNERS,size:Sr.m$.SIZE_48,iconSize:"medium",type:r,title:t,className:n()(Nt.Z.entityImage,{[s]:o}),color:l,loadingMode:"eager"})})),Rr=(0,i.memo)((function(e){let{title:t,type:r,uri:a,images:n,isCircular:l,togglePlay:o,color:s,spec:d,isActive:u,isPlaying:p}=e;const g=(0,c.W6)(It.uH),y=cr(),m=(0,Tr.TJ)(),[x,b]=(0,i.useState)("medium"),f=(0,i.useRef)(null);return(0,Pr.y)({onResize:e=>{let{width:t}=e;b(t<90?"small":"medium")},refOrElement:f}),(0,h.jsx)("div",{className:yr,ref:f,children:(0,h.jsx)(fr.x,{images:m(n,ca),FallbackComponent:e=>(0,h.jsx)(wr.t,{semanticColor:"textSubdued",type:r,size:"xxlarge",className:g?gr:"",...e}),isCircular:l,color:s,loadingMode:"eager",children:o&&!y&&(0,h.jsx)(Dr,{name:t,uri:a,togglePlay:o,spec:d,isActive:u,isPlaying:p,size:x})})})}));var jr=r(4250);const Ar="_ymJNIfklFmogab9uWY1",Lr=e=>{let{folderDepth:t=0}=e;return(0,h.jsx)("li",{className:Ar,style:{"--ylx-folder-depth":t}})},Nr=e=>{var t;const{RowVariantComponent:r,uri:a,to:l=(null===(t=(0,wt.EC)(a))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:o,folderDepth:s,className:d,dragLabel:c,isPinned:u,canReorder:p,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,onLongDragOver:m,style:x,openDeleteDialog:b,togglePlay:f,isPlaying:v,isActive:S,type:w,menu:P,name:T,subtitle:C,downloadButton:D,expandFolderButton:I,cover:R,alt:j,addedAt:A,lastPlayedAt:L,shouldShowType:N,playbackUri:O,playInsteadOfNavigating:F,spec:k,nrValidItems:E,index:B,lockedIcon:U,onKeyDown:M,...V}=e,{onClick:_,onDoubleClick:W,onDragStart:H,onKeyDown:K,dropPosition:Y,dropTargetClassName:z,draggable:G,unpinConfirmationDialog:$,logRightClick:X,isViewActive:Z,itemRef:J,...Q}=ar({uri:a,to:l,type:w,handleNavigate:o,dragLabel:c,isPinned:u,canReorder:p,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,onLongDragOver:m,openDeleteDialog:b,togglePlay:f,isPlaying:v,isActive:S,playInsteadOfNavigating:F,spec:k,folderDepth:s}),q=(0,i.useCallback)((e=>{K(e),null==M||M(e)}),[K,M]);return(0,h.jsxs)(h.Fragment,{children:[$,Y===ze.Pw.BEFORE&&(0,h.jsx)(Lr,{folderDepth:s}),(0,h.jsx)(jr.E,{style:{"--ylx-folder-depth":s,...x},draggable:G,onDragStart:H,onDoubleClick:W,className:n()(d,z,Ue,{[Ge]:Y===ze.Pw.ON}),...V,...Q,onKeyDown:q,innerRef:J,"aria-setsize":E,"aria-posinset":B+1,children:(0,h.jsx)(r,{...e,to:l,isActive:S,isViewActive:Z,onClick:_,logRightClick:X,playInsteadOfNavigating:F,parentRef:J})}),Y===ze.Pw.AFTER&&(0,h.jsx)(Lr,{folderDepth:s})]})};function Or(e){var t;const{uri:r,artists:a}=e,{filter:n}=(0,i.useContext)(rt.fo),{isPlaying:l,isActive:s}=(0,ft.cR)(r),d=(0,o.I0)(),c=(0,i.useCallback)((()=>{d((0,yt.YU)(r))}),[d,r]),{togglePlay:u}=(0,ht.n)({uri:r},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:l,isActive:s,openDeleteDialog:c,togglePlay:u,menu:(0,h.jsx)(mt.Y,{uri:r,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,h.jsx)(bt.o,{searchWords:[n.trim()],textToHighlight:(null===(t=a.at(0))||void 0===t?void 0:t.name)??""}),downloadButton:(0,h.jsx)(xt.$,{uri:r,size:"xsmall",className:Nt.Z.icon,as:"span"})}}const Fr=e=>{let{libraryItem:t,shouldShowType:r=!1,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,pinned:c,type:u,addedAt:p,lastPlayedAt:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:b,togglePlay:f,menu:v,subtitleText:S,downloadButton:w}=Or(t),P=(0,h.jsx)(Ir,{title:d,type:u,images:s,color:y});return(0,h.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:P,name:d,subtitle:S,downloadButton:w,alt:d,type:u,dragLabel:d,menu:v,togglePlay:f,openDeleteDialog:b,addedAt:p,lastPlayedAt:g,isPinned:c,isPlaying:m,isActive:x,shouldShowType:r,spec:a,nrValidItems:n,index:l})},kr=e=>{let{libraryItem:t,shouldShowType:r=!1,spec:i,index:a}=e;const{uri:n,images:l,name:o,pinned:s,type:d,color:c}=t,{togglePlay:u,menu:p,subtitleText:g,downloadButton:y,openDeleteDialog:m,isPlaying:x,isActive:b}=Or(t),f=(0,h.jsx)(Rr,{title:o,type:d,images:l,uri:n,togglePlay:u,color:c,spec:i,isActive:b,isPlaying:x});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:g,menu:p,dragLabel:o,cover:f,downloadButton:y,type:d,togglePlay:u,isPinned:s,shouldShowType:r,openDeleteDialog:m,isPlaying:x,isActive:b,spec:i,index:a})};var Er=r(27838);function Br(e){const{uri:t}=e,r=(0,o.I0)(),{togglePlay:a}=(0,ht.n)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:n,isActive:l}=(0,ft.cR)(t);return{togglePlay:a,isPlaying:n,isActive:l,openDeleteDialog:(0,i.useCallback)((()=>{r((0,yt.YU)(t))}),[r,t]),menu:(0,h.jsx)(Er.m,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Ur=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,addedAt:u,lastPlayedAt:p,pinned:g,color:y}=t,{togglePlay:m,isPlaying:x,isActive:b,openDeleteDialog:f,menu:v}=Br(t),S=(0,h.jsx)(Ir,{title:d,type:c,images:s,isCircular:!0,color:y});return(0,h.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:S,name:d,type:c,alt:d,dragLabel:d,menu:v,togglePlay:m,openDeleteDialog:f,addedAt:u,lastPlayedAt:p,isPlaying:x,isActive:b,isPinned:g,shouldShowType:r,spec:a,nrValidItems:n,index:l})},Mr=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{togglePlay:u,menu:p,openDeleteDialog:g,isPlaying:y,isActive:m}=Br(t),x=(0,h.jsx)(Rr,{title:o,type:s,images:l,uri:n,togglePlay:u,isCircular:!0,color:c,spec:i,isActive:m,isPlaying:y});return(0,h.jsx)(hr,{uri:n,name:o,menu:p,dragLabel:o,cover:x,type:s,togglePlay:u,isPinned:d,shouldShowType:r,openDeleteDialog:g,isPlaying:y,isActive:m,spec:i,index:a})};var Vr=r(91023),_r=r(6936);const Wr=e=>{let{locked:t}=e;return t?(0,h.jsx)(_r.Z,{semanticColor:"textSubdued",title:K.ag.get("mwp.header.content.unavailable"),className:Nt.Z.icon,size:"xsmall"}):null};function Hr(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(rt.fo),n=(0,o.I0)(),{isPlaying:l,isActive:s}=(0,ft.cR)(t);return{isPlaying:l,isActive:s,openDeleteDialog:(0,i.useCallback)((()=>{n((0,yt.YU)(t))}),[n,t]),menu:(0,h.jsx)(Vr.X,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,h.jsx)(bt.o,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,h.jsx)(xt.$,{uri:t,size:"xsmall",className:Nt.Z.icon,as:"span"})}}const Kr=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,pinned:u,addedAt:p,lastPlayedAt:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:b,menu:f,subtitleText:v,downloadButton:S}=Hr(t),w=(0,h.jsx)(Ir,{title:d,type:c,images:s,color:y}),P=(0,h.jsx)(Wr,{locked:t.isLocked});return(0,h.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:w,name:d,subtitle:v,alt:d,dragLabel:d,menu:f,openDeleteDialog:b,addedAt:p,lastPlayedAt:g,isPlaying:m,isActive:x,isPinned:u,shouldShowType:r,type:c,spec:a,nrValidItems:n,lockedIcon:P,index:l,downloadButton:S})},Yr=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{menu:u,subtitleText:p,openDeleteDialog:g,isPlaying:y,isActive:m,downloadButton:x}=Hr(t),b=(0,h.jsx)(Rr,{title:o,type:s,images:l,uri:n,color:c,spec:i,isActive:m,isPlaying:y});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:p,menu:u,dragLabel:o,cover:b,isPinned:d,shouldShowType:r,type:s,openDeleteDialog:g,isPlaying:y,isActive:m,spec:i,index:a,downloadButton:x})};var zr=r(90779),Gr=r(80859),$r=r(55696),Xr=r(18674),Zr=r(63539),Jr=r(85536),Qr=r(14892);const qr=e=>{let{uri:t,spec:r}=e;const{togglePlay:a,isPlaying:n,isActive:l}=(0,ht.n)({uri:t},{featureIdentifier:"folder"}),o=(0,_.$P)(),s=(0,i.useCallback)((()=>{a(),r&&o&&(n?o.logInteraction(r.playButtonFactory({uri:t}).hitPause({itemToBePaused:t})):l?o.logInteraction(r.playButtonFactory({uri:t}).hitResume({itemToBeResumed:t})):o.logInteraction(r.playButtonFactory({uri:t}).hitPlay({itemToBePlayed:t})))}),[l,n,o,r,a,t]);return(0,h.jsx)(Qr.s,{role:"menuitem",onClick:s,leadingIcon:n?(0,h.jsx)(Zr.k,{semanticColor:"textSubdued",size:"small"}):(0,h.jsx)(Jr.J,{semanticColor:"textSubdued",size:"small"}),children:n?K.ag.get("pause"):K.ag.get("play")})},ei=i.memo((function(e){return(0,h.jsx)(y.JL,{value:"create-folder",children:(0,h.jsx)(qr,{...e})})}));var ti=r(27926);const ri=e=>{let{uri:t,name:r,divider:a,spec:n,handleRename:l}=e;const s=(0,_.$P)(),d=(0,o.I0)(),c=(0,i.useCallback)((()=>{n&&s.logInteraction(n.editButtonFactory({uri:t}).hitUiReveal()),d((0,yt.UX)(r,l))}),[d,s,r,l,n,t]);return(0,h.jsx)(Qr.s,{role:"menuitem",divider:a,onClick:c,leadingIcon:(0,h.jsx)(ti.y,{semanticColor:"textSubdued",size:"small"}),children:K.ag.get("contextmenu.rename")})},ii=i.memo((function(e){return(0,h.jsx)(y.JL,{value:"rename",children:(0,h.jsx)(ri,{...e})})})),ai=i.memo((function(e){let{reference:t,name:r="",onRename:i,onCreateCallback:a=(()=>{}),onDeleteCallback:n,canPin:l=m.TL.NO,isPinned:o=!1}=e;const{spec:s}=(0,x.T)(t.uri);return(0,h.jsx)(y.JL,{value:"folder",children:(0,h.jsxs)(g.v,{children:[(0,h.jsx)(ii,{spec:s,uri:t.uri,name:r,handleRename:i}),(0,h.jsx)(b.WQ,{uri:t.uri,divider:"after",onDeleteCallback:n}),(l!==m.TL.NO||o)&&(0,h.jsx)(Xr.X,{uri:t.uri,canPin:l,isPinned:o,type:R.p.FOLDER,spec:s}),(0,h.jsx)(b.uj,{position:{after:t},onCreateCallback:a,spec:s}),(0,h.jsx)(b.K_,{position:{after:t},onCreateCallback:a,spec:s}),(0,h.jsx)($r.I,{uriToBeAdded:t.uri,isInLibrary:!0,spec:s}),(0,h.jsx)(ei,{uri:t.uri,spec:s})]})})}));var ni=r(76950),li=r(90284),oi=r(78024),si=r(79096),di=r(48594),ci=r(60444);const ui=e=>{let{uri:t}=e;const[r,a]=(0,i.useState)(!1),n=(0,i.useCallback)((()=>{a(!0),setTimeout((()=>{a(!1)}),500)}),[]);return(0,li.b)(ni.EW.OPERATION_COMPLETE,(e=>{"add"===e.data.operation&&"liked-songs"===t&&n()})),(0,si.F)(oi.XL.OPERATION_COMPLETE,(e=>{"add"===e.data.operation&&t===e.data.uri&&n()})),(0,di.B)(ci.Yt.OPERATION_COMPLETE,(e=>{var r,i;"remove"!==e.data.operation&&"end"!==(null===(r=e.data.position)||void 0===r?void 0:r.after)&&(null===(i=e.data.position.after)||void 0===i?void 0:i.uri)===t&&(0,wt.L0)(t)&&n()})),{animateState:r,animateClassName:Nt.Z.pulse}};var pi=r(1740),gi=r(91054),yi=r(32804);function mi(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,ee.K)(),n=(0,_.$P)(),l=(0,N.o)(),o=er(),s=(0,i.useCallback)((r=>{if(!t)return;const{[Yt.RN.PLAYLISTS_V2]:i=[],[Yt.RN.FOLDERS]:a=[]}=r,s={after:{uri:t}};i.length&&(o(i,s),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},s),n.logInteraction(e.dragSort()))}),[o,n,l,e,t]),{unpinConfirmationDialog:d,applyDropWithUnpinConfirmation:c}=Jt({onApplyDrop:s});return{unpinConfirmationDialog:d,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[Yt.RN.TRACKS]:l=[],[Yt.RN.LOCAL_TRACKS]:o=[],[Yt.RN.ALBUMS]:s=[],[Yt.RN.EPISODES]:d=[],[Yt.RN.PLAYLISTS_V2]:u=[],[Yt.RN.FOLDERS]:p=[]}=i,g={after:{uri:t}};u.length||p.length?c(i,yi.Pw.ON):s.length?(r(s[0],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||o.length||d.length)&&(a([...l,...o,...d],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,c,r,n,e,a])}}const xi=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS,Yt.RN.ALBUMS,Yt.RN.EPISODES,Yt.RN.PLAYLISTS_V2,Yt.RN.FOLDERS];function bi(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:s}=e,{isPlaying:d,isActive:c}=(0,ft.cR)(r),{pushFolder:u}=(0,i.useContext)(at),p=(0,o.I0)(),{togglePlay:g}=(0,ht.n)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),y=(0,o.v9)((e=>e.platform.isDesktop)),{handleDropOnFolder:m,unpinConfirmationDialog:x}=mi(t,r),{renameFolder:b}=(0,pi.lh)(),f=m,v=[l>0||!n?K.ag.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?K.ag.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(gi.K).join(K.ag.getSeparator()),S=(0,i.useCallback)((function(){b(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}),[e,b]),w=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,yt.Q2)(r))}),[p,r]),togglePlay:y?g:void 0,menu:(0,h.jsx)(ai,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:s,onRename:S}),subtitleText:v,onDropTargetDropOn:f,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:x,isPlaying:d,isActive:c}}const hi=e=>{var t;let{libraryItem:r,RowVariantComponent:a,spec:l,nrValidItems:o,index:s}=e;const{uri:d,folderDepth:c,name:u,type:p,isFlattened:g,pinned:y,canReorder:m}=r,{openDeleteDialog:x,togglePlay:b,menu:f,subtitleText:v,onDropTargetDropOn:S,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:P,isPlaying:T,isActive:C}=bi(r,l),[D,I]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(he);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(d),R=(0,_.$P)(),j=(0,i.useCallback)((()=>{I(!0),R.logInteraction(l.yourLibraryItemFactory().dragUiReveal())}),[R,I,l]),A=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),L=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),I(!D),D?R.logInteraction(l.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):R.logInteraction(l.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[I,D,R,l]),N=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?I(!1):"ArrowRight"===e.key&&I(!0)}),[I]),O=!g&&(0,h.jsx)(zr.o,{"data-skip-in-keyboard-nav":!0,"aria-label":D?K.ag.get("web-player.your-library-x.collapse-folder"):K.ag.get("web-player.your-library-x.expand-folder"),iconOnly:Gr.i,size:"small",condensedAll:!0,onClick:L,onDoubleClick:A,tabIndex:-1,className:n()(Ce,De,{[Be]:!D})}),{animateState:F,animateClassName:k}=ui({uri:d}),E=(0,h.jsx)(Ir,{title:u,type:p,animateState:F,animateClassName:k});return(0,h.jsxs)(h.Fragment,{children:[P,(0,h.jsx)(Nr,{onKeyDown:N,RowVariantComponent:a,uri:d,to:`/folder/${(null===(t=(0,wt.EC)(d))||void 0===t?void 0:t.id)??""}`,handleNavigate:w,folderDepth:c,cover:E,name:u,subtitle:v,alt:u,dragLabel:u,menu:f,canReorder:m,allowedDropTargetDropOnMimeTypes:xi,onDropTargetDropOn:S,onLongDragOver:j,togglePlay:b,openDeleteDialog:x,addedAt:r.addedAt,lastPlayedAt:r.lastPlayedAt,isPinned:y,shouldShowType:!1,type:p,isPlaying:T,isActive:C,expandFolderButton:O,spec:l,nrValidItems:o,index:s})]})},fi=e=>{var t;let{libraryItem:r,spec:i,index:a}=e;const{uri:n,name:l,type:o,pinned:s,canReorder:d}=r,{togglePlay:c,menu:u,subtitleText:p,onDropTargetDropOn:g,handleNavigate:y,openDeleteDialog:m,isPlaying:x,isActive:b}=bi(r,i),{animateState:f,animateClassName:v}=ui({uri:n}),S=(0,h.jsx)(Rr,{title:l,type:o,uri:n,togglePlay:c,spec:i,isActive:b,isPlaying:x});return(0,h.jsx)(hr,{uri:n,to:`/folder/${(null===(t=(0,wt.EC)(n))||void 0===t?void 0:t.id)??""}`,handleNavigate:y,cover:S,name:l,subtitle:p,menu:u,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:xi,onLongDragOver:y,onDropTargetDropOn:g,togglePlay:c,isPinned:s,shouldShowType:!1,type:o,openDeleteDialog:m,isPlaying:x,isActive:b,spec:i,index:a,animateState:f,animateClassName:v})},vi=i.memo((function(e){let{uri:t,canPin:r,isPinned:i}=e;const{spec:a}=(0,x.T)(t);return(0,h.jsx)(y.JL,{value:"generic",children:(0,h.jsx)(g.v,{children:r!==m.TL.NO&&(0,h.jsx)(Xr.X,{uri:t,canPin:r,isPinned:i,type:R.p.PLAYLIST,spec:a})})})}));var Si=r(87350);const wi=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS];function Pi(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,o.v9)(Si.Gg),n=(0,wt.wG)(null==a?void 0:a.id).toURI(),l=n,s=n,{togglePlay:d}=(0,ht.n)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),c=(0,i.useContext)(I.H),{isPlaying:u,isActive:p}=(0,ft.cR)(l),g=(0,i.useCallback)((e=>{const{[Yt.RN.TRACKS]:t=[],[Yt.RN.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];null!=i&&i.length&&(null==c||c.add({uris:i}))}),[c]);return{isPlaying:u,isActive:p,togglePlay:d,menu:(0,h.jsx)(vi,{uri:r,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,h.jsx)(xt.$,{uri:s,size:"xsmall",className:Nt.Z.icon,as:"span"}),subtitleText:(0,h.jsx)(h.Fragment,{children:K.ag.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:g,playbackUri:l,uri:r}}const Ti=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{images:o,name:s,type:d,pinned:c,addedAt:u,lastPlayedAt:p,color:g}=t,{isPlaying:y,isActive:m,togglePlay:x,menu:b,subtitleText:f,onDropTargetDropOn:v,playbackUri:S,uri:w,downloadButton:P}=Pi(t),{animateState:T,animateClassName:C}=ui({uri:"liked-songs"}),D=(0,h.jsx)(Ir,{title:s,type:d,images:o,color:g,animateState:T,animateClassName:C});return(0,h.jsx)(Nr,{RowVariantComponent:i,uri:w,cover:D,name:s,subtitle:f,alt:s,dragLabel:s,menu:b,allowedDropTargetDropOnMimeTypes:wi,onDropTargetDropOn:v,togglePlay:x,addedAt:u,lastPlayedAt:p,isPlaying:y,isActive:m,isPinned:c,shouldShowType:r,type:d,playbackUri:S,downloadButton:P,spec:a,nrValidItems:n,index:l})},Ci=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{images:n,name:l,type:o,pinned:s,color:d}=t,{togglePlay:c,menu:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,downloadButton:x,isPlaying:b,isActive:f}=Pi(t),{animateState:v,animateClassName:S}=ui({uri:"liked-songs"}),w=(0,h.jsx)(Rr,{title:l,type:o,images:n,uri:y,togglePlay:c,color:d,spec:i,isActive:f,isPlaying:b});return(0,h.jsx)(hr,{uri:m,name:l,subtitle:p,menu:u,dragLabel:l,allowedDropTargetDropOnMimeTypes:wi,onDropTargetDropOn:g,cover:w,togglePlay:c,isPinned:s,shouldShowType:r,type:o,playbackUri:y,downloadButton:x,isPlaying:b,isActive:f,spec:i,index:a,animateState:v,animateClassName:S})};var Di=r(46966),Ii=r(46206),Ri=r(62675),ji=r(58959);function Ai(e){const{numberOfFiles:t}=e,r=ji.b,i=(0,Ri.gB)().uri,{isPlaying:a,isActive:n}=(0,ft.cR)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,h.jsx)(vi,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,h.jsx)(Di.E,{size:"xsmall",className:Nt.Z.icon,semanticColor:"textBrightAccent"}),subtitleText:K.ag.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Li=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{name:o,addedAt:s,lastPlayedAt:d,type:c,pinned:u}=t,{playbackUri:p,uri:g,isPlaying:y,menu:m,subtitleText:x,downloadButton:b,isActive:f}=Ai(t),v=(0,h.jsx)("div",{className:Ie,children:(0,h.jsx)(Ii.S,{iconSize:24,title:o})});return(0,h.jsx)(Nr,{RowVariantComponent:i,uri:g,name:o,subtitle:x,alt:o,dragLabel:o,menu:m,addedAt:s,lastPlayedAt:d,isPinned:u,isPlaying:y,isActive:f,shouldShowType:r,playbackUri:p,downloadButton:b,cover:v,type:c,spec:a,nrValidItems:n,index:l})},Ni=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{name:n,images:l,type:o,pinned:s}=t,{playbackUri:d,uri:u,menu:p,downloadButton:g,subtitleText:y,isPlaying:m,isActive:x}=Ai(t),b=(0,c.W6)(It.uH),f=(0,h.jsx)("div",{className:yr,children:(0,h.jsx)(fr.x,{images:l,FallbackComponent:e=>(0,h.jsx)(Ii.S,{size:"xxlarge",className:b?gr:"",...e})})});return(0,h.jsx)(hr,{uri:u,name:n,subtitle:y,menu:p,cover:f,type:o,playbackUri:d,downloadButton:g,isPinned:s,shouldShowType:r,isPlaying:m,isActive:x,spec:i,index:a})};var Oi=r(61815);const Fi=e=>{let{index:t,type:r}=e;const i=(0,c.W6)(It.uH),a=cr();return(0,h.jsx)(Oi.id,{columnIndex:0,children:(0,h.jsx)(vt.Z,{className:n()(ur,{[pr]:a}),media:(0,h.jsx)(fr.x,{images:[],FallbackComponent:()=>(0,h.jsx)(wr.t,{type:r,size:"xxlarge",className:i?gr:"",semanticColor:"textSubdued"}),isCircular:r===R.p.ARTIST}),variant:"naked",id:t,title:"",padding:a?St.hM:St.nu})})};var ki=r(35360),Ei=r(2376),Bi=r(61083),Ui=r(6549),Mi=r(2017),Vi=r(79182),_i=r(74844),Wi=r(75449);const Hi=i.memo((function(e){var t,r,i;let{reference:a,isPublished:n,canPin:l=m.TL.NO,isPinned:o=!1,useDialogForUnfollow:s=!1,isInLibrary:d}=e;const{uri:c}=a,u=(0,pi.ET)(c),p=!(null==u||null===(t=u.permissions)||void 0===t||!t.isPrivate),f=(0,Bi.p)(c)??(null==u?void 0:u.isPublished)??n,{spec:v}=(0,x.T)(c),S=null==u?void 0:u.hasSpotifyAudiobooks;return u&&(0,h.jsx)(y.JL,{value:"playlist",children:(0,h.jsxs)(g.v,{children:[!S&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b.x9,{spec:v,uris:[c]}),(0,h.jsx)(Vi.U,{uri:c,spec:v})]}),!p&&(0,h.jsx)(b.gh,{spec:v,divider:u.isOwnedBySelf?"after":"both",uri:c,isPublished:f}),u.isOwnedBySelf&&(0,h.jsx)(b.fc,{spec:v,uri:c,name:u.name,description:u.description,image:u.images[0]}),!u.isOwnedBySelf&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b.tz,{spec:v,uri:c}),(0,h.jsx)(Ei.Zb,{uri:c,useDialog:s,initialState:d})]}),u.isOwnedBySelf&&(0,h.jsx)(b.R2,{spec:v,uri:c}),!S&&(0,h.jsx)(b.bs,{spec:v,uri:c}),(0,h.jsx)(b.uj,{position:{after:a},divider:"before",spec:v}),(0,h.jsx)(b.K_,{position:{after:a},spec:v}),(null===(r=u.permissions)||void 0===r?void 0:r.canAdministratePermissions)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b.DY,{spec:v,divider:"before",uri:c,isPrivate:p}),!S&&(0,h.jsx)(_i.z,{uri:c,spec:v})]}),(null===(i=u.permissions)||void 0===i?void 0:i.canCancelMembership)&&(0,h.jsx)(Wi.H,{spec:v,divider:"before",uri:c}),(0,h.jsx)(b.Iy,{spec:v,uri:c}),(0,h.jsx)($r.I,{uriToBeAdded:c,isInLibrary:!0,spec:v}),!S&&(0,h.jsx)(Ui.p,{spec:v,uris:[c],isPlaylist:!0}),(l!==m.TL.NO||o)&&(0,h.jsx)(Xr.X,{uri:c,canPin:l,isPinned:o,type:R.p.PLAYLIST,spec:v}),(u.isOwnedBySelf||!p)&&(0,h.jsxs)(Mi.q,{divider:"before",children:[(0,h.jsx)(b.Jx,{spec:v,uri:c,displayText:K.ag.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:p}),(0,h.jsx)(b.W2,{spec:v,uri:c,type:R.p.PLAYLIST})]})]})})})),Ki=i.memo((function(e){let{reference:t,canPin:r=m.TL.NO,isPinned:i=!1}=e;const{uri:a}=t,{spec:n}=(0,x.T)(a);return(0,h.jsx)(y.JL,{value:"playlist",children:(0,h.jsxs)(g.v,{children:[(0,h.jsx)(b.uj,{position:{after:t},divider:"before",spec:n}),(0,h.jsx)(b.K_,{position:{after:t},spec:n}),r!==m.TL.NO&&(0,h.jsx)(Xr.X,{uri:a,canPin:r,isPinned:i,type:R.p.PLAYLIST,spec:n})]})})}));var Yi=r(42738);const zi=()=>(0,i.useContext)(Yi.Z).getCapabilities();function Gi(e,t){var r;const{uri:a,isLoading:n,owner:l,pinned:s}=e,d=(0,i.useContext)(pi.ZF),{filter:c}=(0,i.useContext)(rt.fo),{canAddAudiobooks:u}=zi(),p=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS,Yt.RN.ALBUMS,Yt.RN.EPISODES],y=u?[Yt.RN.AUDIOBOOKS]:[];(0,i.useEffect)((()=>{n&&d.resync(a)}),[d,a,n]);const{togglePlay:m}=(0,ht.n)({uri:a},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:x,isActive:b}=(0,ft.cR)(a),f=(0,o.I0)(),v=(0,_.$P)();let S,w=[];const P=(0,i.useCallback)((async e=>{const{[Yt.RN.TRACKS]:r=[],[Yt.RN.LOCAL_TRACKS]:i=[],[Yt.RN.ALBUMS]:n=[],[Yt.RN.EPISODES]:l=[],[Yt.RN.AUDIOBOOKS]:o=[]}=e,s=[...r,...i,...n,...l,...o];f((0,ki.jV)(a,s)),v.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:s.at(0)??"",playlist:a}))}),[f,v,t,a]);e.canAddTo&&(w=e.isEmpty?[...y,...p]:e.isBooklist?y:p,S=P);const T=(0,i.useCallback)((()=>{f((0,yt.p_)(a))}),[f,a]),C=(0,lt.xn)(a),D=!(e.name||null!==(r=e.owner)&&void 0!==r&&r.uri);let I;I=C?(0,h.jsx)(Ki,{reference:e,canPin:e.canPin,isPinned:s}):D?(0,h.jsx)(g.v,{children:(0,h.jsx)(Ei.Zb,{uri:a,initialState:!0})}):(0,h.jsx)(Hi,{reference:e,canPin:e.canPin,isPinned:s,useDialogForUnfollow:!0,isInLibrary:!0});const R=(0,h.jsx)(xt.$,{uri:a,size:"xsmall",className:Nt.Z.icon,as:"span"}),j=(0,lt.xn)(a)?(0,h.jsx)(h.Fragment,{children:K.ag.get("ylx.clicktoplay")}):(l.uri,(0,h.jsx)(bt.o,{searchWords:[c.trim()],textToHighlight:l.name}));return{openDeleteDialog:T,togglePlay:e.isBooklist?void 0:m,isPlaying:x,isActive:b,menu:I,downloadButton:R,subtitleText:j,allowedDropTargetDropOnMimeTypes:w,onDropTargetDropOn:S}}const $i=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,folderDepth:d,name:c,type:u,pinned:p,addedAt:g,lastPlayedAt:y,color:m,canReorder:x}=t,{openDeleteDialog:b,togglePlay:f,isPlaying:v,isActive:S,menu:w,downloadButton:P,subtitleText:T,allowedDropTargetDropOnMimeTypes:C,onDropTargetDropOn:D}=Gi(t,a),{animateState:I,animateClassName:R}=ui({uri:o}),j=(0,h.jsx)(Ir,{title:c,type:u,images:s,color:m,animateState:I,animateClassName:R});return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(Nr,{RowVariantComponent:i,uri:o,folderDepth:d,cover:j,name:c,subtitle:T,alt:c,dragLabel:c,menu:w,canReorder:x,allowedDropTargetDropOnMimeTypes:C,onDropTargetDropOn:D,togglePlay:f,openDeleteDialog:b,addedAt:g,lastPlayedAt:y,isPlaying:v,isActive:S,isPinned:p,shouldShowType:r,type:u,downloadButton:P,spec:a,playInsteadOfNavigating:(0,lt.xn)(o),nrValidItems:n,index:l})})},Xi=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c,canReorder:u}=t,{togglePlay:p,menu:g,downloadButton:y,subtitleText:m,onDropTargetDropOn:x,allowedDropTargetDropOnMimeTypes:b,openDeleteDialog:f,isPlaying:v,isActive:S}=Gi(t,i),{animateState:w,animateClassName:P}=ui({uri:n}),T=(0,h.jsx)(Rr,{title:o,type:s,images:l,uri:n,togglePlay:p,color:c,spec:i,isActive:S,isPlaying:v});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:m,menu:g,dragLabel:o,canReorder:u,allowedDropTargetDropOnMimeTypes:b,onDropTargetDropOn:x,cover:T,togglePlay:p,isPinned:d,shouldShowType:r,type:s,downloadButton:y,openDeleteDialog:f,isPlaying:v,isActive:S,spec:i,playInsteadOfNavigating:(0,lt.xn)(n),index:a,animateState:w,animateClassName:P})};var Zi=r(16476);function Ji(e){const{uri:t,artists:r,canPin:a,pinned:n}=e,{filter:l}=(0,i.useContext)(rt.fo),s=(0,o.I0)(),d=(0,i.useCallback)((()=>{s((0,yt.YU)(t))}),[s,t]),c=r.at(0);return{openDeleteDialog:d,menu:(0,h.jsx)(Zi.v,{uri:t,artistUri:null==c?void 0:c.uri,canPin:a,isPinned:n}),subtitleText:(0,h.jsx)(bt.o,{searchWords:[l.trim()],textToHighlight:(null==c?void 0:c.name)??""})}}const Qi=e=>{let{libraryItem:t,shouldShowType:r=!1,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,pinned:c,type:u,addedAt:p,lastPlayedAt:g,color:y}=t,{openDeleteDialog:m,menu:x,subtitleText:b}=Ji(t),f=(0,h.jsx)(Ir,{title:d,type:u,images:s,color:y});return(0,h.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:f,name:d,subtitle:b,alt:d,type:u,dragLabel:d,menu:x,openDeleteDialog:m,addedAt:p,lastPlayedAt:g,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:r,spec:a,nrValidItems:n,index:l})},qi=e=>{let{libraryItem:t,shouldShowType:r=!1,spec:i,index:a}=e;const{uri:n,images:l,name:o,pinned:s,type:d,color:c}=t,{menu:u,subtitleText:p,openDeleteDialog:g}=Ji(t),y=(0,h.jsx)(Rr,{title:o,type:d,images:l,uri:n,color:c,spec:i,isActive:!1,isPlaying:!1});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:p,menu:u,dragLabel:o,cover:y,type:d,isPinned:s,shouldShowType:r,openDeleteDialog:g,isPlaying:!1,isActive:!1,spec:i,index:a})};var ea=r(75463);function ta(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(rt.fo),n=(0,o.I0)(),{togglePlay:l}=(0,ht.n)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:d}=(0,ft.cR)(t);return{isPlaying:s,isActive:d,openDeleteDialog:(0,i.useCallback)((()=>{n((0,yt.YU)(t))}),[n,t]),togglePlay:l,menu:(0,h.jsx)(ea.M,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,h.jsx)(xt.$,{uri:t,size:"xsmall",className:Nt.Z.icon,as:"span"}),subtitleText:(0,h.jsx)(bt.o,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const ra=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,addedAt:u,lastPlayedAt:p,pinned:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:b,togglePlay:f,menu:v,downloadButton:S,subtitleText:w}=ta(t),P=(0,h.jsx)(Ir,{title:d,type:c,images:s,color:y});return(0,h.jsx)(Nr,{RowVariantComponent:i,uri:o,cover:P,name:d,subtitle:w,alt:d,dragLabel:d,menu:v,togglePlay:f,openDeleteDialog:b,addedAt:u,lastPlayedAt:p,isPlaying:m,isActive:x,isPinned:g,shouldShowType:r,type:c,downloadButton:S,spec:a,nrValidItems:n,index:l})},ia=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{togglePlay:u,menu:p,downloadButton:g,subtitleText:y,openDeleteDialog:m,isPlaying:x,isActive:b}=ta(t),f=(0,h.jsx)(Rr,{title:o,type:s,images:l,uri:n,togglePlay:u,color:c,spec:i,isActive:b,isPlaying:x});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:y,menu:p,dragLabel:o,cover:f,togglePlay:u,isPinned:d,shouldShowType:r,type:s,downloadButton:g,openDeleteDialog:m,isPlaying:x,isActive:b,spec:i,index:a})},aa=[Yt.RN.EPISODES];function na(e){const{numberOfDownloadedEpisodes:t}=e,{user:r}=(0,o.v9)(Si.Gg),a=(0,wt.wG)(null==r?void 0:r.id,"your-episodes").toURI(),n=m.pw,{togglePlay:l}=(0,ht.n)({uri:a},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:d}=(0,ft.cR)(a),c=(0,i.useContext)(I.H),u=(0,i.useCallback)((e=>{const{[Yt.RN.EPISODES]:t=[]}=e;null!=t&&t.length&&(null==c||c.add({uris:t}))}),[c]);return{isPlaying:s,isActive:d,togglePlay:l,menu:(0,h.jsx)(vi,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,h.jsx)(Di.E,{size:"xsmall",className:Nt.Z.icon,semanticColor:"textBrightAccent"}):null,subtitleText:K.ag.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:u,playbackUri:a,uri:n}}const la=e=>{let{libraryItem:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n}=e;const{images:l,name:o,type:s,pinned:d,lastPlayedAt:c,addedAt:u,color:p}=t,{isPlaying:g,isActive:y,togglePlay:m,menu:x,downloadButton:b,subtitleText:f,onDropTargetDropOn:v,playbackUri:S,uri:w}=na(t),P=(0,h.jsx)(Ir,{title:o,type:s,images:l,color:p});return(0,h.jsx)(Nr,{RowVariantComponent:r,uri:w,cover:P,name:o,subtitle:f,alt:o,dragLabel:o,menu:x,allowedDropTargetDropOnMimeTypes:aa,onDropTargetDropOn:v,togglePlay:m,addedAt:u,lastPlayedAt:c,isPlaying:g,isActive:y,isPinned:d,shouldShowType:!1,type:s,downloadButton:b,playbackUri:S,spec:i,nrValidItems:a,index:n})},oa=e=>{let{libraryItem:t,spec:r,index:i}=e;const{images:a,name:n,type:l,pinned:o,color:s}=t,{togglePlay:d,menu:c,downloadButton:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,isPlaying:x,isActive:b}=na(t),f=(0,h.jsx)(Rr,{title:n,type:l,images:a,uri:m,togglePlay:d,color:s,spec:r,isActive:b,isPlaying:x});return(0,h.jsx)(hr,{uri:m,name:n,subtitle:p,menu:c,dragLabel:n,allowedDropTargetDropOnMimeTypes:aa,onDropTargetDropOn:g,cover:f,togglePlay:d,playbackUri:y,downloadButton:u,isPinned:o,shouldShowType:!1,type:l,isPlaying:x,isActive:b,spec:r,index:i})};var sa=r(17676);function da(){const e=(0,c.W6)(sa.uH2),[t,r]=(0,fe.z)("ylx-grid-scale",1);return{gridScale:e?t:1,setGridScale:r}}const ca=250,ua=(0,pt.y)(R.p),pa=(0,i.memo)((function(e){let{item:t,primaryFilter:r,spec:i,index:a}=e;const n={shouldShowType:!(0,lt.xn)(t.uri)&&lr(t.type)!==r,spec:i,index:a},l=(0,c.W6)(sa.HMQ);switch(t.type){case R.p.FOLDER:return(0,h.jsx)(fi,{libraryItem:t,...n});case R.p.ALBUM:return(0,h.jsx)(kr,{libraryItem:t,...n});case R.p.ARTIST:return(0,h.jsx)(Mr,{libraryItem:t,...n});case R.p.AUDIOBOOK:return(0,h.jsx)(Yr,{libraryItem:t,...n});case R.p.SHOW:return(0,h.jsx)(ia,{libraryItem:t,...n});case R.p.PLAYLIST:return(0,h.jsx)(Xi,{libraryItem:t,...n});case R.p.LIKED_SONGS:return(0,h.jsx)(Ci,{libraryItem:t,...n});case R.p.YOUR_EPISODES:return(0,h.jsx)(oa,{libraryItem:t,...n});case R.p.LOCAL_FILES:return(0,h.jsx)(Ni,{libraryItem:t,...n});case R.p.PRE_RELEASE:return l?(0,h.jsx)(qi,{libraryItem:t,...n}):null;default:(0,gt.U)(t)}})),ga=e=>{let{getItems:t,scrollNodeRef:r,primaryFilter:a,nrValidItems:n,spec:l}=e;const{gridScale:o}=da(),s=(0,st.Sf)(st.Qd.NEW_CARDS,o),d=(0,i.useRef)({}),u=function(){const{gridScale:e}=da();return!!(0,c.W6)(sa.uH2)&&e<.8}(),p=(0,i.useCallback)((e=>(0,h.jsx)(Fi,{index:e,type:ua(a)?a:void 0},e)),[a]),g=(0,i.useCallback)(((e,r)=>t(e,r).map(((t,r)=>t?(0,h.jsx)(pa,{item:t,spec:l,primaryFilter:a,index:e+r},t.uri):p(`${e+r}`)))),[t,a,p,l]),y=(0,i.useCallback)(((e,t)=>{d.current={numColumns:e,rowHeight:t}}),[]);return(0,h.jsx)(ot.q,{config:s,children:(0,h.jsx)(dr,{isCompact:u,children:(0,h.jsx)(Pt.l,{firstInteractiveIsWrapper:!0,"aria-label":K.ag.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(n/(d.current.numColumns??1)),"aria-colcount":d.current.numColumns,children:(0,h.jsx)(ut,{renderItems:g,nrItems:n,estimatedItemMaxHeight:ca,scrollNodeRef:r,onGridResize:y})})})})};var ya=r(12434),ma=r(94086);const xa="UvXqRORKQr_N3jlgGTcS",ba="U2UDsqt0mNj27p4bm85K",ha="RAWO6AczuDMOTI0qAc0a",fa="j8iKBDzqTDtnDv4XbmrK",va="BhKGkKPprp2wm9bvfRKG",Sa="prGqQr33U0mG14TJ5V8a",wa="OMCDc2F7g_AufJAtaKfL",Pa="ha4xXmMVP7gCvKZh9Ipf",Ta="TxO7Ee8iwqBpkgznKHsd",Ca="O2Vp_sNHMLHUcgMPVnOA",Da="WYU7SXdABSulyirnmIYb",Ia="DF8qJeKP7CRNb13tJeJg",Ra=e=>{let{folderUri:t,dropTargetClassName:r,spec:a}=e;const{isCollapsed:l,ylxSidebarState:o,setYlxSidebarState:s,lastUncollapsedYlxSidebarState:d}=(0,C.UF)(),c=(0,_.$P)(),u=(0,i.useCallback)((()=>{const e=o===C.c$.COLLAPSED?d:C.c$.COLLAPSED;s(e),c.logInteraction(a.hitToggleState({stateBeforeToggle:null!==o?C.c$[o].toLowerCase():"",stateAfterToggle:C.c$[e].toLowerCase()}))}),[o,d,s,c,a]),p=l?ya.$:ma.n;return(0,h.jsx)(Y.ws,{label:l?K.ag.get("web-player.your-library-x.expand-your-library"):K.ag.get("web-player.your-library-x.collapse-your-library"),placement:l?"right":void 0,children:(0,h.jsx)(zr.o,{"aria-label":l?K.ag.get("web-player.your-library-x.expand-your-library"):K.ag.get("web-player.your-library-x.collapse-your-library"),onClick:u,className:n()(ha,wa,r),condensed:!0,iconLeading:t||l?void 0:p,iconOnly:t||l?p:void 0,children:!t&&!l&&K.ag.get("web-player.your-library-x.your-library")})})};var ja=r(91942),Aa=r(28619);const La=e=>{let{dropTargetClassName:t,spec:r}=e;const{ylxSidebarState:i,setYlxSidebarState:a}=(0,C.UF)(),l=i===C.c$.DEFAULT,o=(0,_.$P)();return(0,h.jsx)(Y.ws,{label:l?K.ag.get("web-player.your-library-x.show-more"):K.ag.get("web-player.your-library-x.show-less"),children:(0,h.jsx)(zr.o,{className:n()(wa,Ta,t),iconOnly:l?ja.E:Aa.D,"aria-label":l?K.ag.get("web-player.your-library-x.enlarge-your-library"):K.ag.get("web-player.your-library-x.reduce-your-library"),onClick:()=>{a(l?C.c$.EXPANDED:C.c$.DEFAULT),o.logInteraction(r.hitToggleState({stateBeforeToggle:l?"default":"expanded",stateAfterToggle:l?"expanded":"default"}))},size:"small"})})};var Na=r(73618);const Oa=e=>{let{folderMenu:t,folderName:r,dropTargetClassName:i}=e;return(0,h.jsx)(p.yj,{menu:t,children:(0,h.jsx)("span",{children:(0,h.jsx)(Y.ws,{label:K.ag.get("more.label.context",r),children:(0,h.jsx)(zr.o,{className:n()(wa,Ta,i),iconOnly:Na.N,"aria-haspopup":"menu","aria-label":K.ag.get("more.label.context",r),size:"small"})})})})};var Fa=r(41423),ka=r(24936),Ea=r(22326);const Ba=e=>{let{dropTargetClassName:t,spec:r}=e;const{isGridView:i,setItemsView:a}=(0,Ea.a)(),l=(0,_.$P)();return(0,h.jsx)(Y.ws,{label:i?K.ag.get("web-player.your-library-x.list-view"):K.ag.get("web-player.your-library-x.grid-view"),children:(0,h.jsx)(zr.o,{className:n()(wa,t),iconOnly:i?Fa.d:ka.z,"aria-label":i?K.ag.get("web-player.your-library-x.list-view"):K.ag.get("web-player.your-library-x.grid-view"),onClick:()=>{a(i?Ea.i.LIST:Ea.i.GRID),l.logInteraction(r.hitToggleState({stateBeforeToggle:i?"grid":"list",stateAfterToggle:i?"list":"grid"}))},size:"small"})})};var Ua=r(27376),Ma=r(99254),Va=r(7436),_a=r(50540);const Wa=function(e){let{folderUri:t,spec:r}=e;const{createPlaylist:i}=(0,ee.K)(),{createFolder:a}=(0,pi.lh)(),n=(0,_.$P)(),l=(0,_a.g)(),o=t?{after:{uri:t}}:{before:"start"};return(0,h.jsxs)(g.v,{children:[(0,h.jsx)(Qr.s,{onClick:()=>{i(void 0,o),n.logInteraction(r.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,h.jsx)(Ma.h,{size:"small"}),children:K.ag.get("web-player.your-library-x.create.create-a-new-playlist")}),!l&&(0,h.jsx)(Qr.s,{onClick:()=>{a(K.ag.get("web-player.your-library-x.default_folder_name"),o),n.logInteraction(r.createFolderOptionFactory().hitCreateFolder({uri:""}))},role:"menuitem",leadingIcon:(0,h.jsx)(Va.P,{size:"small"}),children:K.ag.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},Ha=e=>{let{className:t="",folderUri:r,tooltipPlacement:a,spec:l}=e;const o=K.ag.get("web-player.your-library-x.create.button-label"),s=(0,_.$P)(),{canAddAudiobooks:d}=zi(),{createPlaylistFromAlbum:c,createPlaylistFromTracks:u,createPlaylistFromPlaylist:g}=(0,ee.K)(),{className:y,dropPosition:m,...x}=(0,ze.WB)({allowedMimeTypesByDropPosition:{[ze.Pw.ON]:[Yt.RN.TRACKS,Yt.RN.EPISODES,Yt.RN.ALBUMS,Yt.RN.PLAYLISTS_V2,...d?[Yt.RN.AUDIOBOOKS]:[]]},onDrop:(0,i.useCallback)((e=>{const{[Yt.RN.TRACKS]:t=[],[Yt.RN.LOCAL_TRACKS]:i=[],[Yt.RN.EPISODES]:a=[],[Yt.RN.AUDIOBOOKS]:n=[],[Yt.RN.ALBUMS]:l=[],[Yt.RN.PLAYLISTS_V2]:o=[]}=e,s=r?{after:{uri:r}}:{before:"start"},d=[...t,...i,...a];n.length>0?u(n,s):d.length?u(d,s):l.length>0?c(l[0],s):o.length>0&&g(o[0],s)}),[c,g,u,r])});return(0,h.jsx)(p.xV,{renderInline:!0,menu:(0,h.jsx)(Wa,{folderUri:r,spec:l.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(e,r,i)=>(0,h.jsx)(Y.ws,{label:o,placement:a,children:(0,h.jsx)(zr.o,{ref:i,iconOnly:Ua.S,className:n()(t,y,{[$e]:m===ze.Pw.ON}),"aria-label":o,onClick:e=>{r(e),s.logInteraction(l.hitUiReveal())},size:"small",...x})})})};var Ka=r(92075);const Ya=e=>{let{handleNavigateBack:t,parentFolderUri:r,spec:i}=e;const{handleDropBeforeOrAfterRootlistItem:a}=tr({dropTargetUri:r,spec:i}),{dropPosition:l,className:o,...s}=(0,ze.WB)({allowedMimeTypesByDropPosition:{[ze.Pw.ON]:Al},onDrop:async e=>{a(e,ze.Pw.BEFORE)},onLongDragOver:t});return(0,h.jsx)(Y.ws,{label:K.ag.get("web-player.your-library-x.navigate-back-folder"),children:(0,h.jsx)(zr.o,{className:n()(wa,Pa,o,{[$e]:l===ze.Pw.ON}),"aria-label":K.ag.get("web-player.your-library-x.navigate-back-folder"),onClick:t,iconOnly:Ka.e,size:"small",...s})})},za=(0,i.forwardRef)((function(e,t){let{folderUri:r,folderName:a,folderMenu:l,onRename:s,spec:d,className:c}=e;const{isActive:u}=(0,ft.cR)(r??"not-a-folder"),g=(0,o.I0)(),y=(0,_.$P)(),m=(0,i.useCallback)((()=>{g((0,yt.UX)(a,s)),y.logInteraction(d.hitRenameFolder({uri:r}))}),[g,a,r,y,s,d]);return(0,h.jsx)(Y.ws,{label:a,showDelay:Y.gQ,children:(0,h.jsx)("div",{className:n()(Da,c),children:(0,h.jsx)(p._P,{menu:l,children:(0,h.jsx)(zr.o,{"aria-label":a,onClick:m,size:"small",condensed:!0,className:n()(wa),ref:t,children:(0,h.jsx)(W.x,{variant:"bodyMediumBold",semanticColor:u?"textBrightAccent":void 0,className:Ia,children:a})})})})})}));var Ga=r(74821),$a=r(33103),Xa=r(26887);const Za="_4JcTGCbNeqSDgdBfKdfy",Ja="wB8ig1vfWJiTattGsxKX",Qa=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=$a.X.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,Xa.z)(r,a),e}();return e?(0,h.jsxs)("div",{className:Za,children:[(0,h.jsxs)("div",{className:Ja,children:[(0,h.jsx)(W.x,{variant:"bodySmallBold",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.download-progress-title")}),(0,h.jsx)(W.x,{variant:"bodySmallBold",semanticColor:"textBase",children:K.ag.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,h.jsx)(Ga.k,{value:t})]}):null};var qa=r(42550);const en=e=>{let{parentDropTargetClassName:t,isLibraryCompletelyEmpty:r,folderUri:a,folderName:l,spec:o}=e;const{isCollapsed:s,ylxSidebarState:u,canExpand:p}=(0,C.UF)(),{renameFolder:g}=(0,pi.lh)(),{popFolder:y}=(0,i.useContext)(at),m=(0,i.useCallback)((function(){a&&g({uri:a},arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}),[a,g]),x=(0,i.useCallback)((()=>{y()}),[y]),b=a?(0,h.jsx)(ai,{reference:{uri:a},name:l,onRename:m,onDeleteCallback:x}):null,{dropOriginIsYLX:f}=qt(),v=!s&&a&&void 0!==l,S=(0,i.useRef)(null),w=(0,i.useRef)(null),P=(0,i.useRef)(null);!function(e,t,r){for(var a=arguments.length,n=new Array(a>3?a-3:0),l=3;l<a;l++)n[l-3]=arguments[l];const o=(0,d.jP)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[n]);(0,i.useLayoutEffect)(o,[o]),(0,Pr.y)({refOrElement:r,observeOnly:"width",onResize:o})}(P,(0,i.useMemo)((()=>({get current(){var e,t;return(null===(e=w.current)||void 0===e?void 0:e.firstElementChild)instanceof HTMLElement?null===(t=w.current)||void 0===t?void 0:t.firstElementChild:null}})),[]),S,l,v);const T=(0,c.W6)(sa.uH2),D=(0,qa.o)(),I=!s||r&&s;return(0,h.jsxs)("header",{className:n()(xa,{[ba]:D,[Ca]:s}),ref:S,children:[!s&&(0,h.jsx)(Qa,{}),(0,h.jsxs)("div",{className:n()(fa,{[va]:s}),children:[(0,h.jsxs)("div",{className:n()(Sa,{[va]:s}),children:[(0,h.jsx)(Ra,{folderUri:a,dropTargetClassName:t,spec:o.toggleCollapsedModeButtonFactory({identifier:""})}),a&&(0,h.jsx)(Ya,{handleNavigateBack:x,parentFolderUri:a,spec:o.folderBackButtonFactory()}),v&&(0,h.jsx)(za,{folderUri:a,folderName:l,folderMenu:b,onRename:m,spec:o.folderTitleFactory(),className:f?t:void 0,ref:w},a)]}),I&&(0,h.jsx)("span",{ref:P,children:(0,h.jsx)(Ha,{className:n()(wa,Ta),folderUri:a,tooltipPlacement:s?"right":void 0,spec:o.createMenuButtonFactory()})}),a&&!s&&(0,h.jsx)(Oa,{folderName:l,folderMenu:b,dropTargetClassName:t}),u===C.c$.EXPANDED&&!T&&(0,h.jsx)(Ba,{dropTargetClassName:t,spec:o.viewDensityToggleFactory({identifier:""})}),(u===C.c$.DEFAULT&&p||u===C.c$.EXPANDED)&&(0,h.jsx)(La,{dropTargetClassName:t,spec:o.toggleExpandedModeButtonFactory({identifier:""})})]})]})};var tn=r(14373),rn=r(25331),an=r(77366);const nn=e=>{let{date:t}=e;return(0,h.jsx)(W.x,{variant:"bodySmall",semanticColor:"textSubdued",className:Oe,children:t&&K.ag.formatRelativeDate(new Date(t),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})})},ln=e=>{const t=e.handleNavigate,r=(0,h.jsx)(Ht,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,h.jsx)(Dt,{})),a=(0,h.jsx)(Ot,{leading:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(or.z,{pinned:e.isPinned}),e.downloadButton,e.lockedIcon]}),subtitle:(0,h.jsxs)(h.Fragment,{children:[e.shouldShowType&&nr(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),n=e.logRightClick,l=(0,h.jsx)(p._P,{menu:e.menu,onShow:n,children:(0,h.jsx)(Tt.Q,{uri:e.uri,trigger:Tt.x.OnMouseDown,children:(0,h.jsx)(rn.w,{className:Se,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:St.dl,onClick:e.onClick,hoverAnimationDuration:"0ms"})})});return(0,lt.xn)(e.uri)?(0,h.jsx)(lt.sg,{parentRef:e.parentRef,children:l}):l},on=e=>{const t=e.handleNavigate,r=(0,h.jsx)(Ht,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,h.jsx)(Ot,{leading:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(or.z,{pinned:e.isPinned}),e.downloadButton,e.lockedIcon]}),subtitle:(0,h.jsxs)(h.Fragment,{children:[e.shouldShowType&&nr(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),a=e.logRightClick;return(0,h.jsx)(jt,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,h.jsxs)("div",{children:[(0,h.jsx)(p._P,{menu:e.menu,onShow:a,children:(0,h.jsx)(Tt.Q,{uri:e.uri,trigger:Tt.x.OnMouseDown,children:(0,h.jsx)(rn.w,{className:n()(Se,Pe),media:e.cover,id:e.uri,padding:St.dl,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,h.jsxs)("span",{className:Me,children:[r," ",i]})]})})},sn=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,h.jsx)(p._P,{menu:e.menu,onShow:r,children:(0,h.jsxs)("div",{className:Ne,ref:t,children:[(0,h.jsx)(ln,{...e,parentRef:t}),(0,h.jsx)(nn,{date:e.addedAt}),(0,h.jsx)(nn,{date:e.lastPlayedAt})]})})},dn=e=>{const t=e.handleNavigate,r=(0,h.jsxs)("div",{className:Ee,children:[(0,h.jsx)(Ht,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(an.o,{children:"•"}),(0,h.jsx)(an.o,{lineClamp:1,children:nr(e.type)})]}),(!e.shouldShowType&&e.type===R.p.ALBUM||(0,lt.xn)(e.uri))&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(an.o,{children:"•"}),(0,h.jsx)(Ot,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,h.jsx)(or.z,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,h.jsx)(Dt,{iconSize:"xsmall"}):(0,h.jsxs)(h.Fragment,{children:[e.downloadButton&&(0,h.jsx)("div",{className:Ce,children:e.downloadButton}),e.lockedIcon&&(0,h.jsx)("div",{className:Ce,children:e.lockedIcon})]})),l=e.logRightClick;return(0,h.jsx)(p._P,{menu:e.menu,onShow:l,children:(0,h.jsx)(Tt.Q,{uri:e.uri,trigger:Tt.x.OnMouseDown,children:(0,h.jsx)(rn.w,{className:n()(Se,we),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${St.hM} ${St.dl}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},cn=e=>{const t=e.logRightClick;return(0,h.jsx)(p._P,{menu:e.menu,onShow:t,children:(0,h.jsxs)("div",{className:Ne,children:[(0,h.jsx)(dn,{...e}),(0,h.jsx)(nn,{date:e.addedAt}),(0,h.jsx)(nn,{date:e.lastPlayedAt})]})})},un=e=>{let{height:t,isCompact:r,primaryFilter:i}=e;return(0,h.jsx)(jr.E,{className:n()({[Re]:!r,[Ae]:r,[je]:i===R.p.ARTIST}),style:{height:t}})};let pn=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const gn=()=>{const[e,t]=(0,fe.z)("library-row-mode",pn.DEFAULT),r=(0,C.QG)();return{libraryRowMode:e,setLibraryRowMode:t,rowHeight:e===pn.DEFAULT||r===C.c$.COLLAPSED?64:32}},yn=(0,i.memo)((function(e){let{item:t,primaryFilter:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const o={shouldShowType:!(0,lt.xn)(t.uri)&&lr(t.type)!==r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l},s=(0,c.W6)(sa.HMQ);switch(t.type){case R.p.FOLDER:return(0,h.jsx)(hi,{libraryItem:t,...o});case R.p.ALBUM:return(0,h.jsx)(Fr,{libraryItem:t,...o});case R.p.ARTIST:return(0,h.jsx)(Ur,{libraryItem:t,...o});case R.p.AUDIOBOOK:return(0,h.jsx)(Kr,{libraryItem:t,...o});case R.p.SHOW:return(0,h.jsx)(ra,{libraryItem:t,...o});case R.p.PLAYLIST:return(0,h.jsx)($i,{libraryItem:t,...o});case R.p.LIKED_SONGS:return(0,h.jsx)(Ti,{libraryItem:t,...o});case R.p.YOUR_EPISODES:return(0,h.jsx)(la,{libraryItem:t,...o});case R.p.LOCAL_FILES:return(0,h.jsx)(Li,{libraryItem:t,...o});case R.p.PRE_RELEASE:return s?(0,h.jsx)(Qi,{libraryItem:t,...o}):null;default:(0,gt.U)(t)}})),mn=e=>{let{getItems:t,scrollNodeRef:r,primaryFilter:a,nrValidItems:n,spec:l}=e;const o=(0,C.QG)(),{rowHeight:s,libraryRowMode:d}=gn(),c=d===pn.COMPACT,u=((e,t)=>{switch(e){case C.c$.COLLAPSED:return on;case C.c$.DEFAULT:return t?dn:ln;case C.c$.EXPANDED:return t?cn:sn;default:(0,gt.U)(e)}})(o,c),p=(0,i.useCallback)(((e,t)=>(0,h.jsx)(un,{height:e,isCompact:c,primaryFilter:a},t)),[c,a]),g=(0,i.useCallback)(((e,r)=>t(e,r).map(((t,r)=>t?(0,h.jsx)(yn,{item:t,spec:l,RowVariantComponent:u,primaryFilter:a,nrValidItems:n,index:e+r},t.uri):p(`${s}px`,`${e+r}`)))),[u,t,a,p,s,l,n]);return(0,h.jsx)(jr.A,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":K.ag.get("web-player.your-library-x.your-library"),children:(0,h.jsx)(tn.V,{renderRows:g,nrRows:n,rowHeight:s,scrollNodeRef:r,renderPlaceholder:p})})};r(45205);var xn=r(67408),bn=r(10422),hn=r(7863),fn=r(91731);const vn="oszTUDKpXrPHyeWPs276",Sn="cKHK53VIATgkMZYQDfol",wn="QMGfkFWtxrVkgNgFXDyw",Pn=function(e){let{title:t,bodyText:r,children:a,root:n,show:l,childrenWrapperClassName:o,onHide:s}=e;const[d,u]=(0,i.useState)(null),[p,g]=(0,i.useState)(null),y=(0,c.W6)(sa.SwB),m=(0,i.useCallback)((()=>{s()}),[s]);(0,i.useEffect)((()=>{if(!l)return()=>{};const e=e=>{"Escape"===e.key&&m()};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}}),[m,p,l]);const x=null==d?void 0:d.getBoundingClientRect();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{ref:u,className:o,children:a}),x&&l&&y&&(0,bn.createPortal)((0,h.jsx)("div",{className:vn,style:{top:(null==x?void 0:x.top)??0,left:(null==x?void 0:x.left)??0,width:null==x?void 0:x.width,height:null==x?void 0:x.height},ref:g,children:(0,h.jsxs)(fn.J,{popoverTitle:t,arrow:fn.J.left,colorSet:"announcement",className:Sn,children:[(0,h.jsx)(W.x,{as:"p",dangerouslySetInnerHTML:{__html:r||""}}),(0,h.jsx)(zr.o,{size:"small",onClick:m,iconOnly:hn.k,"aria-label":K.ag.get("close"),className:wn})]})}),n||document.body)]})};var Tn=r(51838),Cn=r(85690),Dn=r(93296),In=r(10356);const Rn=(e,t,r)=>{var i;const a=t.closest('li[role="presentation"]'),n=null===(i=e.parentElement)||void 0===i?void 0:i.querySelectorAll('ul[role="menu"]');if(r===In.N.UP){var l;const r=null==n?void 0:n[n.length-1],i=e.previousElementSibling,o=null==a||null===(l=a.previousElementSibling)||void 0===l?void 0:l.previousElementSibling;if(t instanceof HTMLUListElement||!o){if(i&&i instanceof HTMLUListElement)return i;if(r&&r instanceof HTMLUListElement)return r}}else{if(!(null==a?void 0:a.nextElementSibling)){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:null==n?void 0:n[0]}}},jn="RGofdOZulhL2p9MRA5hg",An="XZRX_ea9eNn4rOLpNGLp",Ln="rrv_gS6m_YN8K1nsq47l",Nn="mdvwJxMDgGjicVAZoBAw",On="VrBEyt4oriSVpJPs1Dmw",Fn=[{itemsViewState:Ea.i.LIST,compactModeState:pn.COMPACT},{itemsViewState:Ea.i.LIST,compactModeState:pn.DEFAULT},{itemsViewState:Ea.i.GRID,compactModeState:pn.DEFAULT}],kn=(e,t,r)=>Math.round((e+t)*r)/r,En=e=>e.itemsViewState===Ea.i.GRID?K.ag.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===pn.COMPACT?K.ag.get("web-player.your-library-x.sort-and-view-picker.compact"):K.ag.get("web-player.your-library-x.sort-and-view-picker.list"),Bn=e=>{let{selectedSort:t,selectedView:r,onSortSelect:a,onViewSelect:n,sortOptions:l,spec:o,id:s}=e;const d=(0,_.$P)(),c=(0,i.useCallback)((e=>e.itemsViewState===Ea.i.GRID?(0,h.jsx)(ka.z,{size:"small"}):e.compactModeState===pn.COMPACT?(0,h.jsx)(Tn.d,{size:"small"}):(0,h.jsx)(Fa.d,{size:"small"})),[]),{gridScale:u,setGridScale:p}=da(),y=e=>{const t=kn(e,.5,100);p(t),d.logInteraction(o.gridDensitySliderFactory().dragSetSliderPosition({position:t}))},m=(0,i.useCallback)((e=>{p(e),d.logInteraction(o.gridDensitySliderFactory().hitSetSliderPosition({position:e}))}),[d,p,o]),x=e=>{var t;return null==e||null===(t=e.parentElement)||void 0===t?void 0:t.querySelector("ul")},b=(0,i.useRef)(null);return(0,h.jsxs)("div",{id:s,className:Ln,ref:b,children:[(0,h.jsxs)(g.v,{"aria-label":K.ag.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:Rn,getInitialFocusElement:x,children:[(0,h.jsx)(Cn.F,{children:K.ag.get("web-player.your-library-x.sort_by")}),l.map(((e,r)=>{let{key:i,value:n}=e;return(0,h.jsx)(Qr.s,{role:"menuitemradio","aria-checked":i===t.key,onClick:()=>a(i,r),divider:r===l.length-1?"after":void 0,autoClose:!1,children:n},i)}))]}),(0,h.jsxs)(g.v,{"aria-label":K.ag.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:Rn,getInitialFocusElement:x,children:[(0,h.jsx)(Cn.F,{children:K.ag.get("web-player.your-library-x.sort-and-view-picker.view-as")}),Fn.map((e=>{const t=En(e),i=e.itemsViewState===r.itemsViewState&&e.compactModeState===r.compactModeState;return(0,h.jsx)(Qr.s,{role:"menuitemradio","aria-checked":i,onClick:()=>n(e),leadingIcon:c(e),autoClose:!1,children:t},t)})),Ea.i.GRID===r.itemsViewState&&(0,h.jsx)("li",{role:"presentation",children:(0,h.jsx)("div",{role:"menuitem",className:On,children:(0,h.jsx)(Dn.ko,{labelText:K.ag.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:kn(u,-.5,100),max:1,step:.1,onDragStart:y,onDragMove:y,onDragEnd:y,onStepBackward:()=>m(kn(u,-.1,10)),onStepForward:()=>m(kn(u,.1,10)),forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})]})};var Un=r(14218);const Mn=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[r,a]=(0,fe.z)("onboarding-dismissed:ylx-playlist-ordering",!1),[n,l]=(0,fe.z)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[o,s]=(0,i.useState)(!1),{dropOriginIsYLX:d}=qt(),{draggingIsInProgress:c}=(0,i.useContext)(Qt.Di);(0,i.useEffect)((()=>{c&&d&&s(!0)}),[c,d]);const u=(0,i.useCallback)((()=>{a(!0),s(!1),l(n+1)}),[n,l,a]);return{show:e&&n<3&&(!r||o)&&(t||o),onHide:u}},Vn=e=>{let{sortOptions:t,selectedSort:r,onSortSelect:a,root:n,showReorderingOnboarding:l,scrollNodeRef:o,spec:s}=e;const{itemsView:d,setItemsView:c}=(0,Ea.a)(),{libraryRowMode:u,setLibraryRowMode:g}=gn(),y=(0,_.$P)(),m=(0,i.useCallback)((()=>{y.logInteraction(s.hitUiReveal())}),[y,s]),x=(0,i.useMemo)((()=>d===Ea.i.GRID?{itemsViewState:Ea.i.GRID,compactModeState:pn.DEFAULT}:u===pn.COMPACT?{itemsViewState:Ea.i.LIST,compactModeState:pn.COMPACT}:{itemsViewState:Ea.i.LIST,compactModeState:pn.DEFAULT}),[d,u]),b=(0,i.useCallback)((e=>{let t=s.viewAsOptionFactory({identifier:"grid",position:3}).hitUiElementToggle();e.itemsViewState===Ea.i.GRID?c(Ea.i.GRID):e.compactModeState===pn.COMPACT?(t=s.viewAsOptionFactory({identifier:"compact",position:1}).hitUiElementToggle(),c(Ea.i.LIST),g(pn.COMPACT)):(t=s.viewAsOptionFactory({identifier:"list",position:2}).hitUiElementToggle(),c(Ea.i.LIST),g(pn.DEFAULT)),y.logInteraction(t)}),[y,c,g,s]),f=(0,i.useRef)(null),v=(0,Un.J)(o,"0px 0px 0px 0px",.75,f),[S,w]=(0,fe.z)("sort-view-picker-onboarding-seen",!1),{show:P,onHide:T}=Mn(S&&l,!v),C=(0,i.useCallback)((()=>{m(),w(!0)}),[m,w]);return(0,h.jsx)(Pn,{bodyText:K.ag.get("web-player.your-library-x.sort-and-view-picker.view-onboarding"),root:n,show:!S&&!v,childrenWrapperClassName:An,onHide:()=>w(!0),children:(0,h.jsx)(Pn,{bodyText:K.ag.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:n,show:P,childrenWrapperClassName:An,onHide:T,children:(0,h.jsx)(p.yj,{menu:(0,h.jsx)(Bn,{selectedSort:r,selectedView:{itemsViewState:x.itemsViewState??Ea.i.LIST,compactModeState:x.compactModeState??pn.DEFAULT},sortOptions:t,onSortSelect:a,onViewSelect:b,spec:s,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,h.jsx)(zr.o,{"aria-label":K.ag.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",r.value,En(x)),onClick:C,size:"small",iconTrailing:(D=x,D.itemsViewState===Ea.i.GRID?ka.z:D.compactModeState===pn.COMPACT?Tn.d:Fa.d),ref:f,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,h.jsx)(W.x,{variant:"bodySmall",className:Nn,children:r.value})})})})});var D},_n=e=>{let{sortOrders:t,activeSortOrderId:r,setActiveSortOrderId:a,root:n,showReorderingOnboarding:l,spec:o,scrollNodeRef:s}=e;const d=(0,i.useMemo)((()=>o.sortMenuButtonFactory()),[o]),u=(0,i.useMemo)((()=>o.sortbyViewasMenuButtonFactory()),[o]),p=(0,_.$P)(),g=(0,Ye.y)(),y=t.find((e=>e.id===r))??(null==t?void 0:t.at(0)),m=(0,i.useRef)(null),x=(0,c.W6)(sa.uH2),b=(0,i.useCallback)(((e,t)=>{a(e);const r=g.getSortOrderLabel(e);x?p.logInteraction(u.sortOptionFactory({identifier:r,position:t}).hitSort()):p.logInteraction(d.sortMenuFactory().sortOptionFactory({identifier:r,position:t}).hitSort())}),[g,p,a,u,d,x]),{show:f,onHide:v}=Mn(l);return x?(0,h.jsx)(Vn,{sortOptions:t.map((e=>{let{id:t,name:r}=e;return{key:t,value:r}})),selectedSort:{key:(null==y?void 0:y.id)??"",value:(null==y?void 0:y.name)??""},onSortSelect:b,root:n,showReorderingOnboarding:l,scrollNodeRef:s,spec:u}):(0,h.jsx)("div",{className:jn,ref:m,children:(0,h.jsx)(Pn,{bodyText:K.ag.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:n,show:f,childrenWrapperClassName:An,onHide:v,children:(0,h.jsx)(xn.A,{options:t.map((e=>{let{id:t,name:r}=e;return{key:t,value:r}})),onClick:()=>{p.logInteraction(d.hitUiReveal())},onSelect:b,selected:{key:(null==y?void 0:y.id)??"",value:(null==y?void 0:y.name)??""},heading:K.ag.get("web-player.your-library-x.sort_by"),ariaLabel:K.ag.get("web-player.your-library-x.sort_by")})})})};var Wn=r(8824),Hn=r(89273);const Kn=e=>{let{clearOnEscapeInElementRef:t,primaryFilter:r,spec:a}=e;const n=(0,Ye.y)(),l=(0,_.$P)(),o=function(e){switch(e){case R.p.PRE_RELEASE:case R.p.ALBUM:return K.ag.get("web-player.your-library-x.text-filter.albums-placeholder");case R.p.ARTIST:return K.ag.get("web-player.your-library-x.text-filter.artists-placeholder");case R.p.PLAYLIST:return K.ag.get("web-player.your-library-x.text-filter.playlists-placeholder");case R.p.SHOW:return K.ag.get("web-player.your-library-x.text-filter.shows-placeholder");case R.p.AUDIOBOOK:return K.ag.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return K.ag.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return K.ag.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,gt._)(e)}}(r),s=(0,i.useCallback)((()=>(l.logInteraction(a.searchButtonFactory().hitUiReveal()),!0)),[l,a]),d=(0,i.useCallback)((()=>(l.logInteraction(a.textFilterFactory().keyStrokeClearFilter()),!0)),[l,a]);return(0,h.jsx)(Wn.K,{placeholder:o,clearOnEscapeInElementRef:t,debounceFilterChangeTimeout:null!=n&&n.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:s,onClear:d,useExpandCallback:e=>{(0,Hn.x)(P.lb.FOCUS_YLX_TEXT_FILTER,e)}})};var Yn=r(66335),zn=r(66677),Gn=r(29391),$n=r(18534),Xn=r(54941),Zn=r(7761),Jn=r(308),Qn=r(84202),qn=r(84317);const el=1248,tl=800,rl=(0,pt.y)(Xn.s),il=(0,pt.y)(Zn.c$),al=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:a,ylxCollapsedStateNavbarWidth:n,ylxDefaultStateNavbarWidth:o,ylxExpandedStateNavbarWidth:s}=(0,Qn.LP)(),{ylxSidebarState:d,setYlxSidebarState:c,canCollapse:u}=(0,Zn.UF)(),p=(0,qn.mI)(),g=(0,$n.hv)(),{min:y,max:m,size:x,setSize:b}=(0,$n.rF)(),h=(0,Jn.T)(),f=(0,i.useRef)(null),v=(0,i.useRef)(null),S=(0,i.useRef)(null);(0,i.useLayoutEffect)((()=>{const i=h-e-3*Gn.hn-(p!==Xn.s.Disabled?x+Gn.hn:0),w={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:a,ylxSidebarState:d,ylxSidebarStateRestoreTarget:f.current,rightSidebarWidth:x,rightSidebarMinWidth:y,rightSidebarMaxWidth:m,rightSidebarPanel:p,rightSidebarPanelRestoreTarget:v.current,storedCollapsedYLXWidth:n,storedDefaultYLXWidth:o,storedExpandedYLXWidth:s,clientWidth:h,mainContentWidth:i,canCollapse:u},P=S.current;if((0,l.J)(w,P))return;const T=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:a=0,leftSidebarMinWidth:n=0,leftSidebarMaxWidth:l=0,ylxSidebarState:o,ylxSidebarStateRestoreTarget:s,rightSidebarMinWidth:d=0,rightSidebarMaxWidth:c=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedYLXWidth:g=0,storedDefaultYLXWidth:y=0,storedExpandedYLXWidth:m=0,clientWidth:x=0,canCollapse:b=!0}=t,h={},f=u!==Xn.s.Disabled,v=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,S=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,w=void 0===e.clientWidth?0:x-e.clientWidth,P=w<0,T=x>0,C=a<Gn.IW?Gn.IW-a:0;let D=P?-1*w:0;a>el?D=Math.max(0,D-(a-el)):C&&(D=C);const I=o===Zn.c$.EXPANDED&&e.ylxSidebarState!==Zn.c$.EXPANDED,R=o===Zn.c$.DEFAULT&&e.ylxSidebarState!==Zn.c$.DEFAULT;let j=r-n;v&&(j=I?r-Qn.RZ.EXPANDED_MIN:R?r-Qn.RZ.DEFAULT_MIN:0);let A=S?0:i-d;const L=D<=j+A;if(a<Gn.IW&&!L)f&&(v||P&&(o===Zn.c$.COLLAPSED||!b))?(h.rightSidebarPanel=Xn.s.Disabled,h.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,D-=i,A=0):(o===Zn.c$.EXPANDED&&a+(r-Qn.RZ.DEFAULT_MIN)>Gn.IW?(h.ylxSidebarState=Zn.c$.DEFAULT,D-=r-y,j=y-Qn.RZ.DEFAULT_MIN):(h.ylxSidebarState=Zn.c$.COLLAPSED,D-=r-g,j=0),h.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(u===Xn.s.Disabled&&p!==Xn.s.Disabled&&rl(p)&&u!==e.rightSidebarPanelRestoreTarget&&a-i-Gn.hn>=Gn.IW)h.rightSidebarPanel=p,h.rightSidebarPanelRestoreTarget=null;else if(o===Zn.c$.DEFAULT&&s===Zn.c$.EXPANDED&&a-(m-r)>=Gn.IW)h.ylxSidebarState=Zn.c$.EXPANDED,h.ylxSidebarStateRestoreTarget=null;else if(o===Zn.c$.COLLAPSED&&s===Zn.c$.DEFAULT&&a-(y-r)>=Gn.IW)h.ylxSidebarState=Zn.c$.DEFAULT,h.ylxSidebarStateRestoreTarget=null;else if(T&&a>=tl){let e=l-r,t=c-i;const a=Math.min(w,e+t);for(let n=0;n<a;n++)r<i&&r<l&&e>0?(r++,e--):i<c&&t>0&&(i++,t--)}o!==e.ylxSidebarState&&il(s)&&s===e.ylxSidebarStateRestoreTarget&&(h.ylxSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&rl(p)&&p===e.rightSidebarPanelRestoreTarget&&(h.rightSidebarPanelRestoreTarget=null);if(D>0&&D<=j+A)for(let N=0;N<D;N++)r>i&&r>n&&j>0?(r--,j--):i>d&&A>0&&(i--,A--);r&&r!==t.leftSidebarWidth&&(h.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(h.rightSidebarWidth=i);return h}(P,w);void 0!==T.leftSidebarWidth&&t(T.leftSidebarWidth),il(T.ylxSidebarState)&&c(T.ylxSidebarState),void 0!==T.ylxSidebarStateRestoreTarget&&(f.current=T.ylxSidebarStateRestoreTarget),void 0!==T.rightSidebarWidth&&b(T.rightSidebarWidth),void 0!==T.rightSidebarPanel&&g((0,qn.Cx)(T.rightSidebarPanel)),void 0!==T.rightSidebarPanelRestoreTarget&&(v.current=T.rightSidebarPanelRestoreTarget),S.current=w}),[e,r,a,t,d,x,y,m,b,p,n,o,s,c,g,h,u])}(),null),nl=()=>(0,c.W6)(sa._cg,{loadingValue:!1})?(0,h.jsx)(al,{}):null;var ll=r(38965),ol=r(9443);var sl=r(79295);var dl=r(9317);function cl(){const[e,t]=(0,i.useState)(null);if((0,li.b)(ni.EW.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===(null==e?void 0:e.reason))return null;switch(e.reason){case ni.EN.TOO_MANY_PINS:return(0,h.jsx)(dl.w,{animated:!0,headingMessage:K.ag.get("web-player.your-library-x.pin-error.title"),message:K.ag.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:K.ag.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case ni.EN.NO_PIN_IN_FOLDER:return(0,h.jsx)(dl.w,{animated:!0,headingMessage:K.ag.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:K.ag.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:K.ag.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,gt._)(e),null}}var ul=r(50020),pl=r(53335),gl=r(41821);const yl={[ni.XD.ALBUMS]:R.p.ALBUM,[ni.XD.ARTISTS]:R.p.ARTIST,[ni.XD.BOOKS]:R.p.AUDIOBOOK,[ni.XD.EPISODES]:R.p.EPISODE,[ni.XD.SHOWS]:R.p.SHOW,[ni.XD.TRACKS]:R.p.TRACK};function ml(e,t){const r=(0,i.useCallback)((r=>{let{data:{list:i}}=r;xl(e,yl[i])&&t()}),[e,t]);(0,li.b)(ni.EW.UPDATE,r),(0,li.b)(ni.EW.UPDATE_PIN,t);const a=(0,i.useCallback)((()=>{xl(e,R.p.PLAYLIST)&&t()}),[e,t]);(0,pi.iu)(a),function(e){(0,gl.mU)("hm://collection/ylpin/",!0,e)}(t),function(e){const t=(0,i.useContext)(pl.t),r=t.getEvents();(0,i.useEffect)((()=>(r.addListener(ul.p.UPDATE,e),()=>{r.removeListener(ul.p.UPDATE,e)})),[t,r,e])}(t)}function xl(e,t){switch(e){case R.p.ALBUM:case R.p.ARTIST:case R.p.AUDIOBOOK:case R.p.SHOW:return e===t;case R.p.PLAYLIST:switch(t){case R.p.TRACK:case R.p.PLAYLIST:case R.p.EPISODE:return!0;default:return!1}default:return!0}}const bl="PpUTJL2NIYDUnmfzVIbE",hl="_0FuodatXU4_fToYAuYtY",fl="RcGCSu8qHUle68BTwF73",vl="_K79lE9KrIAkl_bUSSUM",Sl="ifVI2CEdOZGgMWIUN2Cw",wl="dNphEfQzPRaQufS04jUm",Pl="glUVqQHA9VNQp0CHUTAs",Tl="MLbFLVC33caOj3FgSQMC",Cl="HUFl7FOi5oAlMEZNCBf4",Dl="y2UicQnlTq148rL8Y0jp",Il="wBsWS202aGdsul2kEGUf",Rl={items:[],totalLength:0},jl=5e4,Al=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS,Yt.RN.ALBUMS,Yt.RN.ARTISTS,Yt.RN.PLAYLISTS_V2,Yt.RN.SHOWS,Yt.RN.AUDIOBOOKS,Yt.RN.EPISODES,Yt.RN.FOLDERS],Ll=[Yt.RN.TRACKS,Yt.RN.LOCAL_TRACKS,Yt.RN.ALBUMS,Yt.RN.EPISODES,Yt.RN.PLAYLISTS_V2,Yt.RN.FOLDERS],Nl=()=>{var e,t,r,a;const{filter:o}=(0,i.useContext)(rt.fo),[g,y]=(0,i.useState)(null),{filtersPickedByUserRef:x,selectedFilterIds:b,resetFilterIds:v,resetAndToggleRootFilter:S,toggleFilterId:F}=function(e){const{openedFolderUri:t=it,change:r,resetFolder:a}=(0,i.useContext)(at),n=(0,i.useRef)(t),[l,o]=(0,fe.z)("ylx-active-filter-ids",{[t]:[]}),s=(0,i.useRef)(!0),c=(0,d.jP)((function(r){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=new Set(e);a.has(r)?a.delete(r):a.add(r),s.current=i,o({...l,[t]:Array.from(a)})}),[e,o,t]),u=(0,i.useCallback)((()=>o({...l,[t]:[]})),[t,l,o]),p=(0,i.useCallback)((e=>{t&&a(),o({...l,[it]:e?[e]:[]})}),[t,a,l,o]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==it&&"PUSH"===r&&o({...l,[t]:l[n.current]}),n.current=t}),[r,t,l,o]),{filtersPickedByUserRef:s,selectedFilterIds:l[t],resetFilterIds:u,resetAndToggleRootFilter:p,toggleFilterId:c}}((null==g||null===(e=g.selectedFilters)||void 0===e?void 0:e.map((e=>e.id)))??[]),k=null==b?void 0:b[0],{selectedSortOrderId:E,setSelectedSortOrderId:U}=function(e){const t=(0,Ye.y)().getContentsPrimaryFilterId(R.p.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(at),[a,n]=(0,fe.z)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:a[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{n({...a,[l]:e})}),[l,a,n])}}(k),M=(0,i.useRef)(null),W=(0,i.useRef)(null),H=(0,i.useRef)(null),{expandedFolders:K}=(0,i.useContext)(he),{openedFolderUri:Y,resetFolder:z}=(0,i.useContext)(at),G=(0,ll.s)(),$=(0,L.I)(),X=(0,i.useContext)(I.H),J=(0,N.o)(),Q=er(),[ee,te]=(0,i.useState)(!1),{isCollapsed:re,isExpanded:ie,setYlxSidebarState:ae}=(0,C.UF)();(e=>{const t=(0,i.useContext)(I.H),{isCollapsed:r,setYlxSidebarState:a,lastUncollapsedYlxSidebarState:n}=(0,C.UF)(),l=(0,D.S)();(0,i.useEffect)((()=>(w().bind(l?P.lb.TOGGLE_NPV_SIDEBAR:P.lb.TOGGLE_YLX_SIDEBAR,(0,T.D)((()=>{const e=r?n:C.c$.COLLAPSED;a(e)}))),()=>{w().unbind(l?P.lb.TOGGLE_NPV_SIDEBAR:P.lb.TOGGLE_YLX_SIDEBAR)})),[r,l,n,a]),(0,i.useEffect)((()=>(w().bind(P.lb.GO_TO_LIBRARY,(0,T.D)((()=>{e(null),r&&a(n)}))),()=>{w().unbind(P.lb.GO_TO_LIBRARY)})),[r,n,e,a]),(0,i.useEffect)((()=>(w().bind(P.lb.GO_TO_PLAYLISTS,(0,T.D)((()=>{e(t.getContentsPrimaryFilterId(R.p.PLAYLIST)),r&&a(n)}))),()=>{w().unbind(P.lb.GO_TO_PLAYLISTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(w().bind(P.lb.GO_TO_PODCASTS,(0,T.D)((()=>{e(t.getContentsPrimaryFilterId(R.p.SHOW)),r&&a(n)}))),()=>{w().unbind(P.lb.GO_TO_PODCASTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(w().bind(P.lb.GO_TO_ARTISTS,(0,T.D)((()=>{e(t.getContentsPrimaryFilterId(R.p.ARTIST)),r&&a(n)}))),()=>{w().unbind(P.lb.GO_TO_ARTISTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(w().bind(P.lb.GO_TO_ALBUMS,(0,T.D)((()=>{e(t.getContentsPrimaryFilterId(R.p.ALBUM)),r&&a(n)}))),()=>{w().unbind(P.lb.GO_TO_ALBUMS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(w().bind(P.lb.GO_TO_AUDIOBOOKS,(0,T.D)((()=>{e(t.getContentsPrimaryFilterId(R.p.AUDIOBOOK)),r&&a(n)}))),()=>{w().unbind(P.lb.GO_TO_AUDIOBOOKS)})),[r,n,t,e,a])})(S);const{isGridView:ne}=(0,Ea.a)(),{libraryRowMode:le}=gn(),oe=le===pn.COMPACT,{spec:de,UBIFragment:ce}=(0,_.fU)(u.C,{data:{identifier:"yourlibraryx"}});let ue;ue=re?"collapsed":ne?ie?"expanded_grid":"default_grid":oe?ie?"expanded_compact":"default_compact":ie?"expanded_list":"default_list";const pe=(0,i.useMemo)((()=>de.sidebarFactory({uri:Y??it,identifier:ue})),[de,Y,ue]),ye=(0,_.Wi)(pe),me=(0,i.useMemo)((()=>pe.headerFactory()),[pe]),xe=(0,i.useMemo)((()=>me.filtersFactory()),[me]),ve=(0,i.useMemo)((()=>me.searchBarFactory()),[me]),Se=(0,i.useMemo)((()=>pe.listFactory()),[pe]),we=(0,_.$P)();!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;const a=(0,ol.k)(),n=(0,i.useContext)(I.H).getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const o=(0,i.useRef)(t);o.current=t;const s=(0,i.useRef)(r);s.current=r;const c=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=o.current.includes(n),t=l.current.includes(n),r=o.current.length>1,i=!a&&!r&&!e&&t,d=a&&e&&c.current;(i||d)&&(i&&(c.current=!0),s.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,d.KW)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&c.current||(c.current=!1),u.current=t)}),[n,t])}(null==g||null===(t=g.availableFilters)||void 0===t?void 0:t.map((e=>e.id)),null==g||null===(r=g.selectedFilters)||void 0===r?void 0:r.map((e=>e.id)),F);const{handleDropOnFolder:Pe,unpinConfirmationDialog:Te}=mi(Se,Y),{dropOriginIsYLX:Ce,entityIsInFolder:De}=qt(),{setDraggingIsInProgress:Ie}=(0,i.useContext)(Qt.Di);(0,zn.P)(M);const Re=Y?Ll:Al,je=!De||null!=g&&g.reorderAllowed?[]:[Yt.RN.PLAYLISTS_V2,Yt.RN.FOLDERS],{dropPosition:Ae,className:Le,...Ne}=(0,ze.WB)({allowedMimeTypesByDropPosition:{[ze.Pw.ON]:Ce?je:Re},onDrop:(0,i.useCallback)((async e=>{if(Y)Pe(e);else{const{[Yt.RN.TRACKS]:t=[],[Yt.RN.LOCAL_TRACKS]:r=[],[Yt.RN.ALBUMS]:i,[Yt.RN.ARTISTS]:a,[Yt.RN.EPISODES]:n,[Yt.RN.SHOWS]:l,[Yt.RN.PLAYLISTS_V2]:o=[],[Yt.RN.FOLDERS]:s}=e,d=[...t,...r];d.length&&(null==X||X.add({uris:d}),we.logInteraction(Se.dragCreatePlaylist())),null!=i&&i.length&&(null==X||X.add({uris:i}),we.logInteraction(Se.dragLike({itemToBeLiked:i.at(0)??""}))),null!=a&&a.length&&(null==X||X.add({uris:a}),we.logInteraction(Se.dragLike({itemToBeLiked:a.at(0)??""}))),null!=n&&n.length&&(null==X||X.add({uris:n}),we.logInteraction(Se.dragLike({itemToBeLiked:n.at(0)??""}))),null!=l&&l.length&&(null==X||X.add({uris:l}),we.logInteraction(Se.dragLike({itemToBeLiked:l.at(0)??""}))),o.length&&(Q(o,{before:"start"}),Ce?we.logInteraction(Se.dragSort()):we.logInteraction(Se.dragLike({itemToBeLiked:o.at(0)??""}))),null!=s&&s.length&&(J.moveFolder({uri:s[0]},{before:"start"}),we.logInteraction(Se.dragSort()))}}),[Y,Pe,X,we,Se,Q,Ce,J]),onLongDragOver:(0,i.useCallback)((()=>{re&&ae(C.c$.DEFAULT)}),[re,ae])}),Oe=(0,i.useMemo)((()=>({filters:b,sortOrder:E,textFilter:o,includeLocalFiles:$,includeYourEpisodes:!0,includeLikedSongs:!0,expandedFolders:re||ne?[]:K,filtersPickedByUser:x.current,folderUri:Y})),[K,x,$,ne,re,Y,b,E,o]),Fe=(0,i.useCallback)((async(e,t)=>{try{const r=await X.getContents({offset:e,limit:t,...Oe}),{offset:i,limit:a,items:n,...o}=r;return te(!1),{fetchedId:Oe.folderUri,onCacheSuccess:()=>{y((e=>(0,l.J)(o,e)?e:o))},...r}}catch(r){return r instanceof m.Ik?(v(),Rl):r instanceof m.j2?(U(void 0),Rl):r instanceof m.xX?(z(),Rl):((0,O.PC)(r),te(!0),Rl)}}),[Oe,X,v,z,U]),ke=!1===(null==g?void 0:g.hasUnfilteredItems),Ee=(null==g?void 0:g.hasTextFilter)&&0===g.totalLength&&""!==o,{setFilter:Be}=(0,i.useContext)(rt.fo);(0,i.useEffect)((()=>{Ee&&re&&Be("")}),[Ee,re,Be]);const Ue=0===(null==g?void 0:g.totalLength)&&g.selectedFilters.length>0&&!g.passedFolderUri&&!g.hasTextFilter;(0,d.KW)((()=>{const e=null==g?void 0:g.selectedFilters.at(-1);Ue&&e&&F(e.id,!1)}),[Ue,null==g?void 0:g.selectedFilters]);const Me=(0,c.W6)(sa.ZU0,{loadingValue:!1})&&(null==X?void 0:X.getCapabilities().canFetchAllItems),{fetchedId:_e,getItems:We,nrValidItems:He,invalidateCache:Ke}=(0,A.Q)({nrItems:50,fetch:Fe,limit:50,cacheAllOnInvalidation:Me,cacheAllLimit:jl}),$e=(0,s.y1)(Ke,200,{leading:!0,trailing:!0,maxWait:1e3});ml(null==g?void 0:g.primaryFilter,$e);const Xe=!Y&&!_e||Y===_e;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return null==i||i.addEventListener("scroll",n),()=>{null==i||i.removeEventListener("scroll",n)}}),[e,t])}(M,_e);const Ze=(0,i.useCallback)((()=>{Ke(),te(!1)}),[Ke]),Je=(0,Un.J)(M),Qe=!(null==g||!g.openedFolderName),qe=(0,c.W6)(sa.KKZ,{loadingValue:!1})&&Me,et=function(e,t,r){const{isGridView:a}=(0,Ea.a)(),{rowHeight:n}=gn();return(0,i.useCallback)((async i=>{let l=n,o=1;if(a){var s;const t=null===(s=e.current)||void 0===s?void 0:s.querySelector('li[role="row"]');l=(null==t?void 0:t.getBoundingClientRect().height)??0,null!=t&&t.parentElement&&(o=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const d=r(0,jl,{cachedOnly:!0}),c=d.find((e=>(null==e?void 0:e.name)&&(0,sl.B)(i,e.name))),u=c?d.indexOf(c):-1;return-1!==u&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(u/o)*l,l),(null==c?void 0:c.uri)??null}),[e,t,n,r,a])}(H,M,We),nt=ee?(0,h.jsx)(be,{onClick:Ze}):null;let lt;(0,i.useEffect)((()=>{ee&&re&&ae(C.c$.DEFAULT)}),[ee,re,ae]),ke&&!re&&(lt=Qe?(0,h.jsx)(q,{className:Le}):(0,h.jsx)(se,{className:Le}));const ot=Ee?(0,h.jsx)(ge,{query:o,className:Le}):null,st=(0,c.W6)(sa.uH2),dt=!re&&!lt&&(0,h.jsxs)("div",{className:n()(hl,Le,{[fl]:st}),children:[(0,h.jsx)(Kn,{clearOnEscapeInElementRef:W,primaryFilter:null==g?void 0:g.primaryFilter,spec:ve},Y),(0,h.jsx)(_n,{sortOrders:(null==g?void 0:g.availableSortOrders)??[],activeSortOrderId:null==g||null===(a=g.selectedSortOrder)||void 0===a?void 0:a.id,setActiveSortOrderId:U,root:W.current,showReorderingOnboarding:(null==g?void 0:g.primaryFilter)===R.p.PLAYLIST&&!(null!=g&&g.reorderAllowed),spec:me,scrollNodeRef:M})]}),ct=ee&&!g,ut=ie&&!ne&&!nt&&!lt;return(0,h.jsx)(B,{containerRef:W,findMatchingTypeaheadUid:et,isEnabled:qe,children:(0,h.jsxs)(ce,{spec:de,children:[(0,h.jsx)(nl,{}),(0,h.jsx)(p._P,{menu:(0,h.jsx)(f,{folderUri:Y}),children:(0,h.jsxs)("div",{className:n()(bl,{[Ge]:Ae===ze.Pw.ON,[wl]:re}),ref:e=>{W.current=e,ye(e)},...Ne,tabIndex:-1,onDragStart:()=>Ie(!0),onDragEnd:()=>Ie(!1),children:[Te,(0,h.jsxs)("div",{className:n()({[Dl]:Je}),children:[(0,h.jsx)(en,{parentDropTargetClassName:Le,isLibraryCompletelyEmpty:ke,folderUri:null==g?void 0:g.passedFolderUri,folderName:null==g?void 0:g.openedFolderName,spec:me.titleRowFactory()}),!G&&(0,h.jsx)(Z,{spec:me}),!re&&!ct&&(0,h.jsxs)("div",{className:Il,children:[(0,h.jsx)(tt,{selectedFilters:null==g?void 0:g.selectedFilters,availableFilters:null==g?void 0:g.availableFilters,toggleFilterId:F,resetFilterIds:v,className:n()(Tl,{[Cl]:!Xe}),scrollNodeRef:M,spec:xe},_e),ie&&dt]}),ut&&(0,h.jsx)(Ve,{isScrolled:Je})]}),(0,h.jsx)(Yn.U,{className:vl,ref:e=>{e&&!M.current&&(M.current=e.osInstance().getElements().viewport)},children:(0,h.jsx)(j.i,{containerRef:W,children:(0,h.jsxs)("div",{className:n()(Sl,{[Cl]:!ee&&!Xe,[wl]:re,[Pl]:ut}),children:[!ie&&dt,nt||lt||ot,(0,h.jsx)("div",{ref:H,children:ne?(0,h.jsx)(ga,{getItems:We,scrollNodeRef:M,primaryFilter:null==g?void 0:g.primaryFilter,nrValidItems:He,spec:Se}):(0,h.jsx)(mn,{getItems:We,scrollNodeRef:M,primaryFilter:null==g?void 0:g.primaryFilter,nrValidItems:He,spec:Se})})]})})}),cl(),(0,h.jsx)(V,{})]})})]})})},Ol=()=>{const{isAnonymous:e}=(0,o.v9)((e=>e.session));return(0,h.jsx)(v.L,{onError:e=>{(0,O.vK)(e,"YourLibraryX")},children:(0,h.jsx)(rt.hz,{uri:m.in,children:(0,h.jsx)(ve,{children:(0,h.jsxs)(nt,{children:[(0,h.jsx)(Nl,{}),(0,h.jsx)(oe.Z8,{isAnonymous:e})]})})})})}},27284:(e,t,r)=>{r.d(t,{I:()=>a});var i=r(44658);function a(){return(0,i.S)()[0]}}}]);
//# sourceMappingURL=5067.6da20e2e.js.map