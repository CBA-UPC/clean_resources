(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8612],{88909:18406:86045:function(e,t,n){"use strict";n.d(t,{Z:function(){return SettingsTabs}});var a=n(52322),r=n(51830),s=n(47330),i=n(83122),l=n(53954),o=n(5632);,31024:function(e,t,n){"use strict";n.d(t,{Z:function(){return ActionsDropdown}});var a=n(52322),r=n(39708),s=n(99219),i=n(83122);,81291:81069:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var a=n(52322),r=n(18406),s=n(97185),i=n(2784),l=n(99219),o=n(32517),d=n(73235),c=n(66547),u=n(26806);function _templateObject(){let e=(0,d._)(["\n    mutation CreateApiKey($name: String!, $workspaceId: String!) {\n  createApiKey(name: $name, workspaceId: $workspaceId) {\n    id\n    name\n    value\n  }\n}\n    "]);return _templateObject=function(){return e},e}let m=(0,c.ZP)(_templateObject());function deleteApiKey_templateObject(){let e=(0,d._)(["\n    mutation DeleteApiKey($id: String!) {\n  deleteApiKey(id: $id) {\n    id\n  }\n}\n    "]);return deleteApiKey_templateObject=function(){return e},e}let h=(0,c.ZP)(deleteApiKey_templateObject());et p=(0,c.ZP)(listApiKeys_templateObject());var y=n(47330),x=n(86414),g=n(83122),b=n(82002),f=n(53954),v=n(77512),j=n(31024);function SettingsApiKeyEntry(e){let{canEdit:t,apiKey:n,showKey:r,onToggleShowKey:s,onCopy:i,onDelete:l}=e,{id:o,value:d,name:c}=n,u=r===o,m="Show";u&&(m="Hide");let h=[{name:"Copy",onClick:()=>{i(d)}},{name:m,onClick:()=>{s(o)}},{name:"Delete",onClick:],p=t?h:h.filter(;return(0,a.jsxs)("li",{className:"mb-0 flex justify-between py-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"mb-2 text-base font-medium text-gray-900",children:c}),u?(0,a.jsx)("span",{className:"text-base text-gray-500",children:d}):(0,a.jsx)("span",{className:"bg-gray-100 px-2 text-base font-bold text-gray-500",children:function(){let e=[];for(let t=0;t<36;t++)e.push("â€¢");return e.join("")}()})]}),(0,a.jsx)(j.Z,{tabs:p})]})}var Settings_SettingsNoAccess=e=>(0,a.jsx)("div",{className:"mt-20 text-center italic text-gray-500",...e,children:e.children});function SettingsApiKeys(){var e;let{workspace:t}=(0,f.cF)(),[n,r]=(0,i.useState)(null),[s,d]=(0,i.useState)(""),[{data:c}]=(e={variables:{workspaceId:t.id},pause:!(null==t?void 0:t.id)},u.aM({query:p,...e})),[,j]=u.Db(m),[,w]=u.Db(h),N=(0,f.j_)(y.KG.ApiKeys),A=N===y.KA.Edit,k=N!==y.KA.None,K=(null==c?void 0:c.apiKeys)||[],toggleShowKey=e=>{n==e?r(null):r(e)},handleGenerate=async()=>{if(null==t?void 0:t.id)try{await j({name:s,workspaceId:t.id}),x.Z.track("api_key_created"),d("")}catch(e){(0,o.Rn)("Error creating API key")}},onCopy=e=>{(0,g.vQ)(e),(0,o.Vp)("Copied API key!")},onDelete=async e=>{if(confirm("Are you sure you want to revoke this api key?"))try{await w({id:e}),x.Z.track("api_key_deleted")}catch(e){(0,o.Rn)("Error deleting api key")}},_="api-keys-".concat(N.toLowerCase());return(0,a.jsx)("div",{className:"relative mx-auto w-full max-w-3xl",children:(0,a.jsxs)("div",{className:"space-y-2",children:[A&&(0,a.jsxs)("div",{className:"space-y-1","data-testid":_,children:[(0,a.jsx)("label",{htmlFor:"add-team-members",className:"block text-base font-medium text-gray-700",children:"Generate API Key"}),(0,a.jsx)("p",{id:"generate-key-helper",className:"sr-only",children:"Add by name"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"grow",children:(0,a.jsx)(v.oi,{name:"generate-key",id:"generate-key",className:"w-full",placeholder:"Name","aria-describedby":"generate-key-helper",value:s,onChange:d,...(0,b.AN)()})}),(0,a.jsx)("span",{className:"ml-3",children:(0,a.jsxs)("button",{disabled:!s,onClick:handleGenerate,className:"btn-blue border-blue-primary rounded-md border px-4 py-2 shadow-sm",children:[(0,a.jsx)(l.pOD,{className:"-ml-2 mr-1 h-5 w-5","aria-hidden":"true"}),(0,a.jsx)("span",{children:"Generate"})]})})]})]}),K.length>0&&k?(0,a.jsx)("div",{"data-testid":_,className:"border-b border-gray-200",children:(0,a.jsx)("ul",{role:"list",className:"divide-y divide-gray-200",children:K.map(e=>(0,a.jsx)(SettingsApiKeyEntry,{canEdit:A,apiKey:e,showKey:n,onToggleShowKey:toggleShowKey,onCopy:onCopy,onDelete:onDelete},e.id))})}):(0,a.jsx)("div",{"data-testid":k?_:"",children:(0,a.jsx)(Settings_SettingsNoAccess,{children:"No API keys found."})})]})})}var w=n(86045),N=n(81291);function ApiKeysPage(){return(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(N.Z,{title:"API Keys",includeSlug:!0}),(0,a.jsx)(w.Z,{children:(0,a.jsx)(SettingsApiKeys,{})})]})}ApiKeysPage.getLayou};var A=ApiKeysPage}},function(e){e.O(0,[3211,8426,3265,1617,4637,5837,4054,7330,9219,5306,6870,7156,6456,7185,9774,2888,179}),_N_E=e.O()}]);
//# sourceMappingURL=api-keys-9010ff7dc7189811.js.map