/*! For license information please see 18224-f5525abdb10a6f75677f.min.js.LICENSE.txt */
(self.webpackChunkcbs_assets_workflow=self.webpackChunkcbs_assets_workflow||[]).push([[18224],{10202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65949),i=r(12300),a=new(function(e){function t(){return e.call(this,t.regionToAuthSuiteUrl,"https://api.auth.adobe.com","https://musicjsonpath-a.akamaihd.net","https://tve.mtvnservices.com","https://xbox.mtvnservices.com")||this}return n.__extends(t,e),t.regionToAuthSuiteUrl=new Map([[i.NetworkRegion.EU,"https://eu.auth.mtvnservices.com"],[i.NetworkRegion.GLOBAL,"https://auth.mtvnservices.com"]]),t}(i.EnvConfigPrototype));i.configBase.setConfig(a.build()),console.log("AuthSuite SDK set up with config [PROD]: ",JSON.stringify(a)),t.default=a},88389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envConfig=void 0;var n=r(10202);t.envConfig=n.default},84261:(e,t,r)=>{"use strict";t._=void 0;var n=r(88389);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n.envConfig}})},87008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(65949),i=r(12300),a=new(function(e){function t(){return e.call(this,t.regionToAuthSuiteUrl,"https://api.auth-staging.adobe.com","https://musicjsonpath-a.akamaihd.net","https://tve.mtvnservices-q.mtvi.com","https://xbox.mtvnservices-q.mtvi.com")||this}return n.__extends(t,e),t.regionToAuthSuiteUrl=new Map([[i.NetworkRegion.EU,"https://eu.auth.mtvnservices-q.mtvi.com"],[i.NetworkRegion.GLOBAL,"https://auth.mtvnservices-q.mtvi.com"]]),t}(i.EnvConfigPrototype));i.configBase.setConfig(a.build()),t.default=a},67011:67009:30267:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigBase=t.ConfigBaseImplementation=t.configBase=void 0;t.configBase={setConfig:function(e){r=e},getConfig:function(){return r}};var n=function(){return t.configBase};t.ConfigBaseImplementation=n,t.ConfigBase=new n,t.default=t.ConfigBase},12300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkRegion=t.EnvConfigPrototype=t.configBase=t.ConfigBase=void 0;var n=r(30267);Object.defineProperty(t,"ConfigBase",{enumerable:!0,get:function(){return n.ConfigBase}}),Object.defineProperty(t,"configBase",{enumerable:!0,get:function(){return n.configBase}});var i=r(57184);Object.defineProperty(t,"EnvConfigPrototype",{enumerable:!0,get:function(){return i.EnvConfigPrototype}}),Object.defineProperty(t,"NetworkRegion",{enumerable:!0,get:function(){return i.NetworkRegion}})},32778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvConfigPrototype=t.NetworkRegion=void 0;var n,i=r(30267);!n=t.NetworkRegion||(t.NetworkRegion={}));var a=function(){function e(e,t,r,i,a){this.regionToAuthSuiteUrl=e,this.adobeUrl=t,this.authSuiteUrl=e.get(n.GLOBAL),this.isisUrl=r,this.tveUrl=i,this.xboxUrl=a}return e.prototype.withRegion=function(e){return this.authSuiteUrl=e?this.resolveAuthSuiteUrl(e):this.regionToAuthSuiteUrl.get(n.GLOBAL),i.configBase.setConfig(this.build()),this},e.prototype.resolveAuthSuiteUrl=function(e){return this.regionToAuthSuiteUrl.get(e)||this.regionToAuthSuiteUrl.get(n.GLOBAL)},e.prototype.build=e}();t.EnvConfigPrototype=a},57184:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkRegion=t.EnvConfigPrototype=void 0;var n=r(32778);Object.defineProperty(t,"EnvConfigPrototype",{enumerable:!0,get:function(){return n.EnvConfigPrototype}}),Object.defineProperty(t,"NetworkRegion",{enumerable:!0,get:function(){return n.NetworkRegion}})},17378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteFetchHelper=void 0;var n=r(424);t.authSuiteFetchHelper={getRequestConfig:function(e,t){var r=e.body,i=e.method,a=function(e,t){var r=t?t.applicationAccessToken:null,i=e.customRequestHeaders;return n.headersService.getHeaders(i,r)}(e,t);return{body:r,headers:a,method:i}}}},87772:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteFetchWithAuthorization=void 0;var n=r(99938),i=r(42911),a=r(82469),o=r(67483),s=r(45649),u=r(17378),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requestPathService=s.requestPathAuthSuiteService,t.fetch=function(e){return o.accessTokenService.getAccessToken().then((function(r){var n=u.authSuiteFetchHelper.getRequestConfig(e,r);return t.getPath(e).then((function(e){return fetch(e.path,n)})).then((function(e){return a.responseValidator.validateResponse(e)})).catch(()}))},t}return n.__extends(t,e),t}(r(41208).Fetch);t.authSuiteFetchWithAuthorization=new c},3220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteFetch=void 0;var n=r(99938),i=r(82469),a=r(45649),o=r(17378),s=function(e){eturn n.__extends(t,e),t.prototype.fetch=function(e){return this.getPath(e).then((function(t){return fetch(t.path,o.authSuiteFetchHelper.getRequestConfig(e,e.tokens))})).then((function(e){return i.responseValidator.validateResponse(e)}))},t}(r(41208).Fetch);t.authSuiteFetch=new s},41208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fetch=void 0;var n=r(99938),i=r(80694),a=function(){function e(){}return e.prototype.post=function(e){return this.fetch(n.__assign(n.__assign({},e),{method:i.RequestMethod.POST}))},e.prototype.get=function(e){return this.fetch(n.__assign(n.__assign({},e),{method:i.RequestMethod.GET}))},e.prototype.put=function(e){return this.fetch(n.__assign(n.__assign({},e),{method:i.RequestMethod.PUT}))},e.prototype.delete=function(e){return this.fetch(n.__assign(n.__assign({},e),{method:i.RequestMethod.DELETE}))},e.prototype.patch=function(e){return this.fetch(n.__assign(n.__assign({},e),{method:i.RequestMethod.PATCH}))},e.prototype.getPath=function(e){return this.requestPathService.getFullPath(e)},e}();t.Fetch=a},43110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteFetchHelper=t.Fetch=t.authSuiteFetch=t.authSuiteFetchWithAuthorization=void 0;var n=r(87772);Object.defineProperty(t,"authSuiteFetchWithAuthorization",{enumerable:!0,get:function(){return n.authSuiteFetchWithAuthorization}});var i=r(3220);Object.defineProperty(t,"authSuiteFetch",{enumerable:!0,get:function(){return i.authSuiteFetch}});var a=r(41208);Object.defineProperty(t,"Fetch",{enumerable:!0,get:function(){return a.Fetch}});var o=r(17378);Object.defineProperty(t,"authSuiteFetchHelper",{enumerable:!0,get:function(){return o.authSuiteFetchHelper}})},73530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteSdkSetup=t.authSuiteSdkSetup=void 0;var n=r(27148),i=r(37664),a=r(23604),o=r(52335),s=r(78799),u=r(97257),c=t.authSuiteSdkSetup={setAuthSuiteRequestData:function(e){if(!o.requiredParamsValidator.isValid(e))throw a.authSuiteErrorFactory.createError(a.MethodErrorResponse.MISSING_REQUIRED_PARAMS);s.authSuiteDataLocalStorageService.setAuthSuiteRequestData(e)},setVirginMediaHbaProxy:function(e){s.authSuiteDataLocalStorageService.setVirginMediaHbaProxy(e)},useApplicationAccessTokenCustomMethods:function(e,t){u.getAccessTokenCustomStrategy.setCustomMethod(e),n.refreshTokenCustomStrategy.setRefreshTokenCustomMethod(t),c(u.getAccessTokenCustomStrategy,n.refreshTokenCustomStrategy)},useApplicationAccessTokenDefaultMethods:useCheckAccessStatusCustomMethods:useCheckAccessStatusDefaultMethods:;var l=function(){return t.authSuiteSdkSetup};t.AuthSuiteSdkSetup=l},83468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentAccessMethodType=t.authSuiteSdkSetup=t.AuthSuiteSdkSetup=void 0;var n=r(73530);Object.defineProperty(t,"AuthSuiteSdkSetup",{enumerable:!0,get:function(){return n.AuthSuiteSdkSetup}}),Object.defineProperty(t,"authSuiteSdkSetup",{enumerable:!0,get:function(){return n.authSuiteSdkSetup}});var i=r(75235);Object.defineProperty(t,"ContentAccessMethodType",{enumerable:!0,get:function(){return i.ContentAccessMethodType}})},22908:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentAccessMethodType=void 0,t.ContentAccessMethodType||(t.ContentAccessMethodType={}))},75235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentAccessMethodType=void 0;var n=r(22908);Object.defineProperty(t,"ContentAccessMethodType",{enumerable:!0,get:function(){return n.ContentAccessMethodType}})},47761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deviceNameFactory=void 0;var n=r(19496),i=r(89345);t.deviceNameFactory={create:function(e){var t;try{var r=n.getParser(e.userAgent);t="".concat(r.getBrowserName()," ").concat(r.getOSName()).trim()}catch(e){t=i.DeviceName.Browser}return t}}},53080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deviceTypeFactory=void 0;var n=r(89345),i=/mobile/i,a=/iPad|Android|Touch/i;t.deviceTypeFactory={create:function(e){var t=function(e){return e?e.userAgent:""}(e),r=function(e){return i.test(e)?n.DeviceType.Phone:null}(t)||t)||t);return r||n.DeviceType.Unknown}}},14460:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceName=t.System=t.DeviceType=t.systemFactory=t.deviceTypeFactory=void 0;var n=r(53080);Object.defineProperty(t,"deviceTypeFactory",{enumerable:!0,get:function(){return n.deviceTypeFactory}});var i=r(80977);Object.defineProperty(t,"systemFactory",{enumerable:!0,get:function(){return i.systemFactory}});var a=r(89345);Object.defineProperty(t,"DeviceType",{enumerable:!0,get:function(){return a.DeviceType}}),Object.defineProperty(t,"System",{enumerable:!0,get:function(){return a.System}}),Object.defineProperty(t,"DeviceName",{enumerable:!0,get:function(){return a.DeviceName}})},70720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceName=void 0,function(e){e.Browser="browser"}(t.DeviceName||(t.DeviceName={}))},33170:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceType=void 0,function(e){e.Phone="phone",e.Tablet="tablet",e.TV="tv",e.Desktop="desktop",e.Unknown="unknown"}(t.DeviceType||(t.DeviceType={}))},89345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceName=t.System=t.DeviceType=void 0;var n=r(33170);Object.defineProperty(t,"DeviceType",{enumerable:!0,get:function(){return n.DeviceType}});var i=r(19982);Object.defineProperty(t,"System",{enumerable:!0,get:function(){return i.System}});var a=r(70720);Object.defineProperty(t,"DeviceName",{enumerable:!0,get:function(){return a.DeviceName}})},19982:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0,function(e){e.Unknown="unknown"}(t.System||(t.System={}))},80977:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.systemFactory=void 0;var n=r(89345);t.systemFactory={create:function(e){var t=e);return t)}}},5824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpiredTokenErrorHandler=void 0;var n=r(27148);t.defaultExpiredTokenErrorHandler={handleExpiration:function(){return n.expiredTokenErrorHandlingContext.handleTokenRefresh()}}},64533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expiredTokenErrorHandlingContext=void 0;var n=r(47229).refreshTokenDefaultStrategy;t.expiredTokenErrorHandlingContext={handleTokenRefresh:function(){return n.execute()},setStrategy:function(e){n=e}}},27148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expiredTokenErrorHandlingContext=t.refreshTokenDefaultStrategy=t.refreshTokenCustomStrategy=void 0;var n=r(64533);Object.defineProperty(t,"expiredTokenErrorHandlingContext",{enumerable:!0,get:function(){return n.expiredTokenErrorHandlingContext}});var i=r(57823);Object.defineProperty(t,"refreshTokenCustomStrategy",{enumerable:!0,get:function(){return i.refreshTokenCustomStrategy}});var a=r(47229);Object.defineProperty(t,"refreshTokenDefaultStrategy",{enumerable:!0,get:function(){return a.refreshTokenDefaultStrategy}})},57823:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTokenCustomStrategy=void 0;t.refreshTokenCustomStrategy={execute:function(){return r().then((function(e){return{applicationAccessToken:e,deviceRefreshToken:void 0}}))},setRefreshTokenCustomMethod:function(e){r=e}}},47229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTokenDefaultStrategy=void 0;var n=r(98148);t.refreshTokenDefaultStrategy={execute:function(){return n.refreshTokenService.refreshToken()}}},42911:32179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestErrorHandler=void 0;var n=r(99938),i=r(80694),a=r(5824),o=t.requestErrorHandler={handleErrorResponse:function(e,t,r){var n,s=function(e){return a.defaultExpiredTokenErrorHandler.handleExpiration(e).then((function(t){return r(e).then((function(e){return o(t,e)})).catch(()}))},u=((n={})[i.ErrorCode.ExpiredToken]=s,n[i.ErrorCode.NeedsRefresh]=s,n),c=t;return u[c.errorCode]?u[c.errorCode](e):Promise.reject(t)}}},82469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.responseValidator=void 0;var n=r(29516),i=t.responseValidator={validateResponse:function(e){return e.text().then((function(e){return n.jsonResponseParser.parse(e)})).then((function(t){return e.status,t)}))}}},40658:(e,t,r)=>{"use strict";t.Ec=t.YV=t.j9=t.XU=t.v2=t.Nx=void 0,t.UO=t.vv=void 0;var n=r(80694);var i=r(24074);Object.defineProperty(t,"Nx",{enumerable:!0,get:function(){return i.ProvidersFiltersType}}),Object.defineProperty(t,"v2",{enumerable:!0,get:function(){return i.ProvidersAuthSuiteService}}),Object.defineProperty(t,"XU",{enumerable:!0,get:function(){return i.LogoSchema}}),Object.defineProperty(t,"j9",{enumerable:!0,get:function(){return i.AuthorizationAuthSuiteService}}),Object.defineProperty(t,"YV",{enumerable:!0,get:function(){return i.AuthSuiteDataLocalStorageService}}),Object.defineProperty(t,"Ec",{enumerable:!0,get:function(){return i.AccessTokenService}}),Object.defineProperty(t,"vv",{enumerable:!0,get:function(){return i.AccessService}});var a=r(43110);var o=r(83468);Object.defineProperty(t,"UO",{enumerable:!0,get:function(){return o.AuthSuiteSdkSetup}});var s=r(42911)},29516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonResponseParser=void 0;var n=r(88778);Object.defineProperty(t,"jsonResponseParser",{enumerable:!0,get:function(){return n.jsonResponseParser}})},88778:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonResponseParser=void 0;t.jsonResponseParser={parse:function(e){var t;try{t=JSON.parse(e)}catch(e){t=null}return Promise.resolve(t)}}},43708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteLocalStorageService=t.authSuiteLocalStorageService=void 0;var n=r(17303),i=r(30492),a=o=t.authSuiteLocalStorageService={getItem:function(e){var t=o(e);return a().getItem(t)},removeItem:function(e){var t=o(e);a().removeItem(t)},setItem:function(e,t){var r=o(e);a().setItem(r,t)}};var s=function(){return t.authSuiteLocalStorageService};t.AuthSuiteLocalStorageService=s},63263:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteLocalStorageService=t.AuthSuiteLocalStorageService=void 0;var n=r(43708);Object.defineProperty(t,"AuthSuiteLocalStorageService",{enumerable:!0,get:function(){return n.AuthSuiteLocalStorageService}}),Object.defineProperty(t,"authSuiteLocalStorageService",{enumerable:!0,get:function(){return n.authSuiteLocalStorageService}})},41692:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuitePrefixes=void 0,function(e){e.LocalStoragePrefix="auth-suite-"}(t.AuthSuitePrefixes||(t.AuthSuitePrefixes={}))},30492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuitePrefixes=void 0;var n=r(41692);Object.defineProperty(t,"AuthSuitePrefixes",{enumerable:!0,get:function(){return n.AuthSuitePrefixes}})},49861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdobeResponseFormat=void 0,function(e){e.JSON="json"}(t.AdobeResponseFormat||(t.AdobeResponseFormat={}))},45296:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteRequestDataType=void 0,function(e){e.CLIENT_ID="clientId",e.COUNTRY_CODE="countryCode"}(t.AuthSuiteRequestDataType||(t.AuthSuiteRequestDataType={}))},83655:19291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0,t.ErrorCode||(t.ErrorCode={}))},80694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseEventType=t.AuthSuiteRequestDataType=t.AdobeResponseFormat=t.AuthSuiteRequestParams=t.RequestMethod=t.ErrorCode=void 0;var n=r(19291);Object.defineProperty(t,"ErrorCode",{enumerable:!0,get:function(){return n.ErrorCode}});var i=r(46689);Object.defineProperty(t,"RequestMethod",{enumerable:!0,get:function(){return i.RequestMethod}});var a=r(83655);Object.defineProperty(t,"AuthSuiteRequestParams",{enumerable:!0,get:function(){return a.AuthSuiteRequestParams}});var o=r(49861);Object.defineProperty(t,"AdobeResponseFormat",{enumerable:!0,get:function(){return o.AdobeResponseFormat}});var s=r(45296);Object.defineProperty(t,"AuthSuiteRequestDataType",{enumerable:!0,get:function(){return s.AuthSuiteRequestDataType}});var u=r(26111);Object.defineProperty(t,"ResponseEventType",{enumerable:!0,get:function(){return u.ResponseEventType}})},46689:26111:72375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuitePendingRequestRegistry=t.PendingRequestKey=void 0;var n=r(9155);Object.defineProperty(t,"PendingRequestKey",{enumerable:!0,get:function(){return n.PendingRequestKey}});var i=r(70050);Object.defineProperty(t,"authSuitePendingRequestRegistry",{enumerable:!0,get:function(){return i.authSuitePendingRequestRegistry}})},9155:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingRequestKey=void 0;var n=r(68703);Object.defineProperty(t,"PendingRequestKey",{enumerable:!0,get:function(){return n.PendingRequestKey}})},68703:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingRequestKey=void 0,function(e){e.REFRESH_TOKEN="refreshTokenRequest",e.GET_ACCESS_TOKEN="getAccessTokenRequest"}(t.PendingRequestKey||(t.PendingRequestKey={}))},70050:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuitePendingRequestRegistry=void 0;var r={};t.authSuitePendingRequestRegistry={clearRegisteredRequest:getPendingRequest:registerPendingRequest:},37609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenService=t.accessTokenService=void 0;var n=r(43110),i=r(72375),a=r(78799),o=function(){return i.authSuitePendingRequestRegistry.getPendingRequest({requestKey:i.PendingRequestKey.GET_ACCESS_TOKEN})||s()},s=function(){var e=i.PendingRequestKey.GET_ACCESS_TOKEN;return i.authSuitePendingRequestRegistry.registerPendingRequest({pendingRequestPromise:u(),requestKey:e}),i.authSuitePendingRequestRegistry.getPendingRequest({requestKey:e})},u=function(){return n.authSuiteFetch.post({path:"accessToken"}).then(c).catch(l)},c=function(e){return a.authSuiteDataLocalStorageService.setAccessTokens(e),f(),e},l=f=function(){i.authSuitePendingRequestRegistry.clearRegisteredRequest({requestKey:i.PendingRequestKey.GET_ACCESS_TOKEN})};t.accessTokenService={getAccessToken:function(){return a.authSuiteDataLocalStorageService.getAccessTokens().then((function(e){return null!==e?Promise.resolve(e):o()}))}};var h=function(){return t.accessTokenService};t.AccessTokenService=h},67483:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenService=t.accessTokenService=void 0;var n=r(37609);Object.defineProperty(t,"accessTokenService",{enumerable:!0,get:function(){return n.accessTokenService}}),Object.defineProperty(t,"AccessTokenService",{enumerable:!0,get:function(){return n.AccessTokenService}})},15307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessService=t.accessService=void 0;var n=r(43110),i=r(75235),a=r(12069),o=function(e){void 0===e&&(e={});var t=a.checkAccessStatusContext.checkAccessStatus(e);return console.log("checkAccessStatus result: ".concat(t)),t},s=u=function(e){return o().then(()},c=function(e,t){console.log("checking availability for resourceGroup: ".concat(e,", and response: ").concat(t));var r=l(e,t);console.log("authorizedResources are: ".concat(r));var n=Boolean(r.length);return Promise.resolve(n)},l=f=t.accessService={checkAccessStatus:o,checkAccessStatusForResourceGroup:function(e){return o(e)},getAuthorizationMethod:function(e){var t={path:"access/authorization/".concat(e.resourceGroup)};return n.authSuiteFetchWithAuthorization.get(t)},getInAppPurchaseAccessMethodsInUse:function(e){return void 0===e&&(e={}),o(e).then((function(e){return s(e.accessMethodsInUse)}))},isAuthorized:function(e,t){return t?c(e.resourceGroup,t):u(e)}};var h=function(){return t.accessService};t.AccessService=h},74690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAccessStatusCustomStrategy=void 0;var n,i=r(23604);t.checkAccessStatusCustomStrategy={execute:function(e){return console.log("Executing custom check access status strategy"),n?n(e):Promise.reject(i.authSuiteErrorFactory.createError(i.MethodErrorResponse.CHECK_ACCESS_STATUS))},setCustomMethod:function(e){n=e}}},7062:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAccessStatusDefaultStrategy=void 0;var n=r(43110),i=r(70807),a=function(e){var t=[i.AuthSuiteSdkClientRequestParams.LogoSchema,i.AuthSuiteSdkClientRequestParams.ResourceGroup];return n.authSuiteFetchWithAuthorization.get({path:"access/status",request:e,requestParams:t})};t.checkAccessStatusDefaultStrategy={execute:},12069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAccessStatusContext=void 0;var n=r(7062).checkAccessStatusDefaultStrategy;t.checkAccessStatusContext={checkAccessStatus:function(e){return null==n&&console.log("privateStrategy is not initialized"),n.execute(e)},setStrategy:function(e){n=e}}},37664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountType=t.accessService=t.AccessService=t.checkAccessStatusContext=t.checkAccessStatusDefaultStrategy=t.checkAccessStatusCustomStrategy=void 0;var n=r(74690);Object.defineProperty(t,"checkAccessStatusCustomStrategy",{enumerable:!0,get:function(){return n.checkAccessStatusCustomStrategy}});var i=r(7062);Object.defineProperty(t,"checkAccessStatusDefaultStrategy",{enumerable:!0,get:function(){return i.checkAccessStatusDefaultStrategy}});var a=r(12069);Object.defineProperty(t,"checkAccessStatusContext",{enumerable:!0,get:function(){return a.checkAccessStatusContext}});var o=r(15307);Object.defineProperty(t,"AccessService",{enumerable:!0,get:function(){return o.AccessService}}),Object.defineProperty(t,"accessService",{enumerable:!0,get:function(){return o.accessService}});var s=r(61693);Object.defineProperty(t,"AccountType",{enumerable:!0,get:function(){return s.AccountType}})},65012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountType=void 0,function(e){e.Vip="VIP",e.Twitter="Twitter",e.Facebook="Facebook"}(t.AccountType||(t.AccountType={}))},61693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountType=void 0;var n=r(65012);Object.defineProperty(t,"AccountType",{enumerable:!0,get:function(){return n.AccountType}})},24243:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteAccountService=t.authSuiteAccountService=void 0;var n=r(43110),i=r(27148),a="account",o=function(e){return i.expiredTokenErrorHandlingContext.handleTokenRefresh().then((function(){return e}))};t.authSuiteAccountService={getAccountDetails:function(){return n.authSuiteFetchWithAuthorization.get({path:a})},updateAccountDetails:function(e){var t={marketingOptIn:e.marketingOptIn},r=JSON.stringify(t);return n.authSuiteFetchWithAuthorization.patch({body:r,path:a})},untieMvpdFromAccount:function(){return n.authSuiteFetchWithAuthorization.delete({path:"".concat(a,"/mvpd")}).then((function(e){return o(e)}))}};var s=function(){return t.authSuiteAccountService};t.AuthSuiteAccountService=s},1775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteAccountService=t.authSuiteAccountService=t.MarketingOptIn=void 0;var n=r(18040);Object.defineProperty(t,"MarketingOptIn",{enumerable:!0,get:function(){return n.MarketingOptIn}});var i=r(24243);Object.defineProperty(t,"authSuiteAccountService",{enumerable:!0,get:function(){return i.authSuiteAccountService}}),Object.defineProperty(t,"AuthSuiteAccountService",{enumerable:!0,get:function(){return i.AuthSuiteAccountService}})},18040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarketingOptIn=void 0;var n=r(58641);Object.defineProperty(t,"MarketingOptIn",{enumerable:!0,get:function(){return n.MarketingOptIn}})},58641:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarketingOptIn=void 0,function(e){e.YES="Y",e.NO="N",e.UNSPECIFIED="unspecified"}(t.MarketingOptIn||(t.MarketingOptIn={}))},45214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivationCodeAuthSuiteService=void 0;var n=r(99938),i=r(43110),a=r(80694),o=r(23604),s=r(62742),u=r(839),c=r(65442),l=function(){function e(){var t=this;this.generate=function(e){var t=e.mvpdCode,r=void 0===t?null:t,n=e.secondScreenEntryPoint,a=void 0===n?null:n,o=e.activationFlow,u={mvpdCode:r,secondScreenEntryPoint:a,activationFlow:void 0===o?s.ActivationFlow.SignIn:o},c=JSON.stringify(u);return i.authSuiteFetchWithAuthorization.post({body:c,path:"access/activationCode"})},this.checkActivationCode=this.checkActivationCodeStatusChange=function(e,r,n){void 0===r&&(r=s.ActivationFlow.SignIn),void 0===n&&(n=null);var i=new c.TimeInterval({minutes:e.checkActivationCodeStatusChangeTimeoutInMinutes||5}).inMilliseconds();return(r===s.ActivationFlow.SignIn?t.createActivationCodeStatusPoolingWrapperForSignInFLow:t.createActivationCodeStatusPoolingWrapperForSubscriptionFlow)(e.waitWithLastKnownStatus,i,n)(e).catch(()},this.joinWithActivationCode=function(e){return i.authSuiteFetchWithAuthorization.post({path:"access/activationCode/".concat(e,"/join"),request:null,requestParams:[]})},this.createActivationCodeStatusPoolingWrapperForSignInFLow=function(r,i,o){return u.DoWhile.create((function(e){return t.getActivationCodeStatus(e,[a.AuthSuiteRequestParams.LogoSchema,a.AuthSuiteRequestParams.WaitWithLastKnownStatus])}),{timeoutInMs:i,intervalsInMs:new c.TimeInterval({seconds:1}).inMilliseconds(),renewRequest:function(e,t){return n.__assign(n.__assign({},e),{waitWithLastKnownStatus:t.signInStatus})},breakCondition:function(t){var n=t.signInStatus;return null!==o&&r!==n&&o(n),e.FINAL_SIGN_IN_STATUSES_FOR_SIGN_IN_FLOW.indexOf(n)>-1}})},this.createActivationCodeStatusPoolingWrapperForSubscriptionFlow=function(r,i,o){return u.DoWhile.create((function(e){return t.getActivationCodeStatus(e,[a.AuthSuiteRequestParams.LogoSchema,a.AuthSuiteRequestParams.WaitWithLastKnownStatus])}),{timeoutInMs:i,intervalsInMs:new c.TimeInterval({seconds:1}).inMilliseconds(),renewRequest:breakCondition:function(t){var n=t.status;return null!==o&&r!==n&&o(n),e.FINAL_STATUSES_FOR_SUBSCRIPTION_FLOW.indexOf(n)>-1}})},this.getActivationCodeStatus=function(e,t){return i.authSuiteFetchWithAuthorization.get({path:"access/activationCode/".concat(e.activationCode),request:e,requestParams:t})}}return e.prototype.handleError=function(e){return e===u.DoWhile.TIMEOUT_ERROR?o.authSuiteErrorFactory.createError(o.MethodErrorResponse.GET_USER_DETAILS_FROM_ACCESS_METHOD):e},e.FINAL_STATUSES_FOR_SUBSCRIPTION_FLOW=[s.SignInAndSubscriptionPurchaseProcessStatus.Succeeded,s.SignInAndSubscriptionPurchaseProcessStatus.Failed],e.FINAL_SIGN_IN_STATUSES_FOR_SIGN_IN_FLOW=[s.SignInStatus.Succeeded,s.SignInStatus.Failed,s.SignInStatus.Cancelled],e}();t.ActivationCodeAuthSuiteService=l},839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DoWhile=void 0;var n=r(99938),i=r(11645),a=function(){function e(e){var t=e.timeoutInMs,r=void 0===t?null:t,n=e.intervalsInMs,i=void 0===n?0:n,a=e.breakCondition,o=void 0===a?function(){return!1}:a,s=e.renewRequest,u=void 0===s?function(e){return e}:s;this.timeoutInMs=r,this.intervalsInMs=i,this.renewRequest=u,this.breakCondition=o}return e.prototype.wrapExecutionOf=function(e){var t=this,r=null;return this.timeoutInMs&&(r=new i.Timer(this.timeoutInMs)).start(),function(n){return t.run(n,e,r)}},e.prototype.run=function(t,r,a){return n.__awaiter(this,void 0,void 0,(function(){var o,s,u;return n.__generator(this,(function(n){switch(n.label){case 0:if(a&&a.hasTimeoutExpired())return a.stop(),[2,Promise.reject(e.TIMEOUT_ERROR)];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,r(t)];case 2:return o=n.sent(),this.breakCondition(o)?(a&&!a.hasTimeoutExpired()&&a.stop(),[2,Promise.resolve(o)]):[4,(0,i.delay)(this.intervalsInMs)];case 3:return n.sent(),s=this.renewRequest(t,o),[2,this.run(s,r,a)];case 4:return u=n.sent(),[2,Promise.reject(u)];case 5:return[2]}}))}))},e.TIMEOUT_ERROR=new Error("Timeout expired."),e.create=e}();t.DoWhile=a},29998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivationCodeAuthSuiteService=t.SecondScreenEntryPoint=t.ActivationFlow=t.SignInAndSubscriptionPurchaseProcessStatus=t.SignInStatus=void 0;var n=r(62742);Object.defineProperty(t,"SignInStatus",{enumerable:!0,get:function(){return n.SignInStatus}}),Object.defineProperty(t,"SignInAndSubscriptionPurchaseProcessStatus",{enumerable:!0,get:function(){return n.SignInAndSubscriptionPurchaseProcessStatus}}),Object.defineProperty(t,"ActivationFlow",{enumerable:!0,get:function(){return n.ActivationFlow}}),Object.defineProperty(t,"SecondScreenEntryPoint",{enumerable:!0,get:function(){return n.SecondScreenEntryPoint}});var i=r(45214);Object.defineProperty(t,"ActivationCodeAuthSuiteService",{enumerable:!0,get:function(){return i.ActivationCodeAuthSuiteService}})},62742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivationFlow=t.SecondScreenEntryPoint=t.SignInAndSubscriptionPurchaseProcessStatus=t.SignInStatus=void 0,function(e){e.NotStarted="notStarted",e.Started="started",e.Succeeded="succeeded",e.Failed="failed",e.Cancelled="cancelled"}(t.SignInStatus||(t.SignInStatus={})),t.SignInAndSubscriptionPurchaseProcessStatus||(t.SignInAndSubscriptionPurchaseProcessStatus={})),function(e){e.MvpdLogin="mvpdLogin",e.ViacomAccountSignUp="viacomAccountSignUp",e.ViacomAccountSignIn="viacomAccountSignIn"}(t.SecondScreenEntryPoint||(t.SecondScreenEntryPoint={})),function(e){e.SignIn="signIn",e.Subscription="subscription"}(t.ActivationFlow||(t.ActivationFlow={}))},65442:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeInterval=void 0;var r=function(){function e(e){var t=e.minutes,r=void 0===t?0:t,n=e.seconds,i=void 0===n?0:n,a=e.milliseconds,o=void 0===a?0:a;this.minutes=Math.abs(r),this.seconds=Math.abs(i),this.milliseconds=Math.abs(o)}return e.prototype.inMilliseconds=function(){return this.milliseconds+(this.seconds+this.minutes*e.SECONDS_IN_MINUTE)*e.MILLISECONDS_IN_SECOND},e.SECONDS_IN_MINUTE=60,e.MILLISECONDS_IN_SECOND=1e3,e}();t.TimeInterval=r},11645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=t.Timer=void 0;var n=r(99938),i=function(){eturn e.prototype.start=function(){var e=this;this.timeOutFlag=!1,this.timeoutId=setTimeout((,this.timeIntervalInMs)},e.prototype.hasTimeoutExpired=function(){return this.timeOutFlag},e.prototype.stop=e}();t.Timer=i;t.delay=function(e){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(t){return e?[2,new Promise((function(t){return setTimeout(t,e)}))]:[2]}))}))}},82304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationAuthSuiteService=t.authorizationAuthSuiteService=void 0;var n=r(99938),i=r(43110),a=r(80694),o=r(81853),s=r(64188),u=r(78799),c="mvpd/",l="access";t.authorizationAuthSuiteService={disconnectDevice:function(){var e="".concat(l);return i.authSuiteFetchWithAuthorization.delete({path:e})},getAuthenticationUrl:function(e){var t="".concat(c).concat(e.mvpdCode,"/").concat("login"),r=[a.AuthSuiteRequestParams.ActivationCode,a.AuthSuiteRequestParams.CallbackUrl],l=u.authSuiteDataLocalStorageService.getAuthSuiteRequestData(),f=n.__assign(n.__assign({},e),{callbackUrl:(0,o.parseUrl)(n.__assign(n.__assign({},e),l))});return i.authSuiteFetchWithAuthorization.get({path:t,request:f,requestParams:r}).then(()},linkDeviceWithProvider:function(e){var t="".concat(l,"/").concat(c).concat(e.mvpdCode),r=[a.AuthSuiteRequestParams.ActivationCode,a.AuthSuiteRequestParams.AuthorizationCode];return i.authSuiteFetchWithAuthorization.post({path:t,request:e,requestParams:r})}};var f=function(){return t.authorizationAuthSuiteService};t.AuthorizationAuthSuiteService=f},47420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationAuthSuiteService=t.AuthorizationAuthSuiteService=void 0;var n=r(82304);Object.defineProperty(t,"AuthorizationAuthSuiteService",{enumerable:!0,get:function(){return n.AuthorizationAuthSuiteService}}),Object.defineProperty(t,"authorizationAuthSuiteService",{enumerable:!0,get:function(){return n.authorizationAuthSuiteService}})},23337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteCaptchaService=void 0;var n=r(43110);t.authSuiteCaptchaService={verify:function(e){return n.authSuiteFetchWithAuthorization.post({body:JSON.stringify(e),path:"captcha/recaptcha/verify"})}}},69990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteCaptchaService=void 0;var n=r(23337);Object.defineProperty(t,"authSuiteCaptchaService",{enumerable:!0,get:function(){return n.authSuiteCaptchaService}})},38314:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeafultCodeGenerationService=void 0;var n=r(43110),i=r(29998),a=function(){this.generateActivationCode=function(e){var t=e.mvpdCode,r=void 0===t?null:t,a=e.secondScreenEntryPoint,o=void 0===a?null:a,s=e.activationFlow,u={mvpdCode:r,secondScreenEntryPoint:o,activationFlow:void 0===s?i.ActivationFlow.SignIn:s},c=JSON.stringify(u);return n.authSuiteFetchWithAuthorization.post({body:c,path:"access/activationCode"})}};t.DeafultCodeGenerationService=a},62864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGenerationService=void 0;var n=r(38314);Object.defineProperty(t,"CodeGenerationService",{enumerable:!0,get:function(){return n.DeafultCodeGenerationService}})},94770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteContinueWatchingService=void 0;var n=r(43110),i=function(){var e=this;this.clearPlayheadHistoryForCurrentProfile=function(){var t="".concat(e.continueWatchingBaseRoute);return n.authSuiteFetchWithAuthorization.delete({path:t})},this.continueWatchingBaseRoute="/continueWatching"};t.AuthSuiteContinueWatchingService=i},39213:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteContinueWatchingService=void 0;var n=r(94770);Object.defineProperty(t,"AuthSuiteContinueWatchingService",{enumerable:!0,get:function(){return n.AuthSuiteContinueWatchingService}})},30730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteDirectPaymentsService=t.authSuiteDirectPaymentsService=t.checkCustomerCouponEligibility=void 0;var n=r(43110),i="directPayments/customer";t.checkCustomerCouponEligibility=function(e){var t={couponCode:e},r=JSON.stringify(t);return n.authSuiteFetchWithAuthorization.post({body:r,path:"directPayments/customer/checkCouponEligibility"})},t.authSuiteDirectPaymentsService={getAvailableDirectPaymentsProducts:function(){return n.authSuiteFetchWithAuthorization.get({path:"directPayments/products"})},getDirectPaymentsHistory:function(){return n.authSuiteFetchWithAuthorization.get({path:"directPayments/history"})},getPaymentMethodDetails:function(){return n.authSuiteFetchWithAuthorization.get({path:i})},updatePaymentMethodDetails:function(e){var t={transactionToken:e.transactionToken},r=JSON.stringify(t);return n.authSuiteFetchWithAuthorization.patch({body:r,path:i})},updateSubscriptionPlan:function(e,t){var r={productId:t},i=JSON.stringify(r);return n.authSuiteFetchWithAuthorization.post({body:i,path:"".concat("directPayments/subscriptions","/").concat(e,"/changePlan")})},checkCustomerCouponEligibility:t.checkCustomerCouponEligibility,getCouponDetails:function(e){return n.authSuiteFetchWithAuthorization.get({path:"".concat("directPayments/coupons/","/").concat(e)})}};var a=function(){return t.authSuiteDirectPaymentsService};t.AuthSuiteDirectPaymentsService=a},47301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Duration=t.FreeTrialUserEligibility=t.authSuiteDirectPaymentsService=t.AuthSuiteDirectPaymentsService=void 0;var n=r(30730);Object.defineProperty(t,"AuthSuiteDirectPaymentsService",{enumerable:!0,get:function(){return n.AuthSuiteDirectPaymentsService}}),Object.defineProperty(t,"authSuiteDirectPaymentsService",{enumerable:!0,get:function(){return n.authSuiteDirectPaymentsService}});var i=r(86318);Object.defineProperty(t,"FreeTrialUserEligibility",{enumerable:!0,get:function(){return i.FreeTrialUserEligibility}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return i.Duration}})},18407:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Duration=void 0,function(e){e.FOREVER="forever",e.ONCE="once",e.REPEATING="repeating"}(t.Duration||(t.Duration={}))},99179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTrialUserEligibility=void 0,function(e){e.ELIGIBLE="ELIGIBLE",e.INELIGIBLE="INELIGIBLE",e.UNKNOWN="UNKNOWN"}(t.FreeTrialUserEligibility||(t.FreeTrialUserEligibility={}))},86318:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Duration=t.FreeTrialUserEligibility=void 0;var n=r(99179);Object.defineProperty(t,"FreeTrialUserEligibility",{enumerable:!0,get:function(){return n.FreeTrialUserEligibility}});var i=r(18407);Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return i.Duration}})},47292:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteEmployeeAccessService=t.authSuiteEmployeeAccessService=void 0;var n=r(43110),i="employeeAccess",a="".concat(i,"/entitledEmail");t.authSuiteEmployeeAccessService={getEmployeeDetails:function(){var e="".concat(i,"/employee");return n.authSuiteFetchWithAuthorization.get({path:e})},defineEntitledEmail:function(e){var t={email:e.email},r=JSON.stringify(t);return n.authSuiteFetchWithAuthorization.post({body:r,path:a})},removeEntitledEmail:function(){return n.authSuiteFetchWithAuthorization.delete({path:a})}};var o=function(){return t.authSuiteEmployeeAccessService};t.AuthSuiteEmployeeAccessService=o},67028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteEmployeeAccessService=t.AuthSuiteEmployeeAccessService=void 0;var n=r(47292);Object.defineProperty(t,"AuthSuiteEmployeeAccessService",{enumerable:!0,get:function(){return n.AuthSuiteEmployeeAccessService}}),Object.defineProperty(t,"authSuiteEmployeeAccessService",{enumerable:!0,get:function(){return n.authSuiteEmployeeAccessService}})},80743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteErrorFactory=void 0;var n=r(13220);t.authSuiteErrorFactory={createError:},23604:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteErrorFactory=t.Errors=t.MethodErrorResponse=t.ClientErrorMessages=void 0;var n=r(13220);Object.defineProperty(t,"ClientErrorMessages",{enumerable:!0,get:function(){return n.ClientErrorMessages}}),Object.defineProperty(t,"MethodErrorResponse",{enumerable:!0,get:function(){return n.MethodErrorResponse}}),Object.defineProperty(t,"Errors",{enumerable:!0,get:function(){return n.Errors}});var i=r(80743);Object.defineProperty(t,"authSuiteErrorFactory",{enumerable:!0,get:function(){return i.authSuiteErrorFactory}})},27229:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientErrorMessages=void 0,function(e){e.FALLBACK="Unable to resolve request",e.GET_USER_ID="No user id found in given access methods",e.CHECK_ACCESS_STATUS="Invalid check access status method",e.CHECK_ACTIVATION_CODE_STATUS_CHANGE="Check activation code status change timed out on the client",e.MISSING_REQUIRED_PARAMS="Missing required request parameters - clientId or countryCode - use AuthSuiteSdkSetup.setAuthSuiteRequestData to initialize params"}(t.ClientErrorMessages||(t.ClientErrorMessages={}))},74781:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Errors=void 0;var n=r(80694),i=r(27229);t.Errors={checkAccessStatus:{developerMessage:i.ClientErrorMessages.CHECK_ACCESS_STATUS,errorCode:n.ErrorCode.NotFound,userMessageBody:i.ClientErrorMessages.CHECK_ACCESS_STATUS,userMessageTitle:i.ClientErrorMessages.CHECK_ACCESS_STATUS},checkActivationCodeStatusChange:{developerMessage:i.ClientErrorMessages.CHECK_ACTIVATION_CODE_STATUS_CHANGE,errorCode:n.ErrorCode.CheckActivationCodeStatusChangeClientTimeOut,userMessageBody:i.ClientErrorMessages.CHECK_ACTIVATION_CODE_STATUS_CHANGE,userMessageTitle:i.ClientErrorMessages.CHECK_ACTIVATION_CODE_STATUS_CHANGE},fallback:{developerMessage:i.ClientErrorMessages.FALLBACK,errorCode:n.ErrorCode.NotFound,userMessageBody:i.ClientErrorMessages.FALLBACK,userMessageTitle:i.ClientErrorMessages.FALLBACK},getUserDetailsFromAccessMethod:{developerMessage:i.ClientErrorMessages.GET_USER_ID,errorCode:n.ErrorCode.NotFound,userMessageBody:i.ClientErrorMessages.GET_USER_ID,userMessageTitle:i.ClientErrorMessages.GET_USER_ID},missingRequiredParams:{developerMessage:i.ClientErrorMessages.MISSING_REQUIRED_PARAMS,errorCode:n.ErrorCode.InvalidRequest,userMessageBody:i.ClientErrorMessages.MISSING_REQUIRED_PARAMS,userMessageTitle:i.ClientErrorMessages.MISSING_REQUIRED_PARAMS}}},13220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Errors=t.MethodErrorResponse=t.ClientErrorMessages=void 0;var n=r(27229);Object.defineProperty(t,"ClientErrorMessages",{enumerable:!0,get:function(){return n.ClientErrorMessages}});var i=r(74781);Object.defineProperty(t,"Errors",{enumerable:!0,get:function(){return i.Errors}});var a=r(31948);Object.defineProperty(t,"MethodErrorResponse",{enumerable:!0,get:function(){return a.MethodErrorResponse}})},31948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MethodErrorResponse=void 0,function(e){e.FALLBACK="fallback",e.GET_USER_DETAILS_FROM_ACCESS_METHOD="getUserDetailsFromAccessMethod",e.CHECK_ACCESS_STATUS="checkAccessStatus",e.MISSING_REQUIRED_PARAMS="missingRequiredParams"}(t.MethodErrorResponse||(t.MethodErrorResponse={}))},96841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FreePreviewService=t.freePreviewService=void 0;var n=r(99938),i=r(43110),a=r(75235),o=r(37664),s=r(65115),u="access/freePreview",c="".concat(u,"/promoCode"),l=f=function(e){return s.settingsService.getAccessMethods().then((function(e){return e.freePreview})).then(()};t.freePreviewService={getPromoCodeDetails:function(e){var t="".concat(c,"/").concat(e.providerUserId);return i.authSuiteFetchWithAuthorization.get({path:t})},isAvailable:function(){return f(s.FreePreviewStatus.Available)},isInUse:function(){return f(s.FreePreviewStatus.InUse)},secondsLeft:function(){return o.accessService.checkAccessStatus({}).then((function(e){var t=e.accessMethodsInUse.find((function(e){return e.type===a.ContentAccessMethodType.FreePreview}));return t?t.expiresInSeconds:0}))},startFreePreview:function(e){var t="".concat(u,"/").concat(e);return l(t)},startFreePreviewForTrustedLogin:function(){return l(u)},startWinBackPromoCode:function(e){return n.__awaiter(void 0,void 0,void 0,(function(){var t,r;return n.__generator(this,(function(n){return t={promoCode:e},r=JSON.stringify(t),[2,i.authSuiteFetchWithAuthorization.post({path:"".concat(c,"/start"),body:r})]}))}))}};var h=function(){return t.freePreviewService};t.FreePreviewService=h},79119:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.freePreviewService=t.FreePreviewService=void 0;var n=r(96841);Object.defineProperty(t,"FreePreviewService",{enumerable:!0,get:function(){return n.FreePreviewService}}),Object.defineProperty(t,"freePreviewService",{enumerable:!0,get:function(){return n.freePreviewService}})},19969:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HomeBasedAuthenticationService=void 0;var n=r(43110),i=r(27148),a=r(78799),o=r(25772),s=r(6277),u=function(){function e(){var t=this;this.virginMediaHba=function(e,r){var n={userId:e,resources:r};return t.encodeAuthorizationPayload(n).then(t.authorizeUsingHba)},this.encodeAuthorizationPayload=function(r){var n=new o.PublicKeyProvider(e.PUBLIC_KEY_PATH,e.VM_HBA_KID);return t.rsaCryptography.encryptWithPublicKey(r,n)},this.authorizeUsingHba=function(t){var r=a.authSuiteDataLocalStorageService.getVirginMediaHbaProxy(),o={token:t};return n.authSuiteFetchWithAuthorization.post({body:JSON.stringify(o),path:e.AUTHORIZATION_REQUEST_ROUTE,proxy:r}).then((function(e){return i.expiredTokenErrorHandlingContext.handleTokenRefresh().then((function(){return e}))}))},this.rsaCryptography=new s.default}return e.PUBLIC_KEY_PATH="keys",e.VM_HBA_KID="vmhba",e.AUTHORIZATION_REQUEST_ROUTE="access/hba/virginmedia",e}();t.HomeBasedAuthenticationService=u},1495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HomeBasedAuthenticationService=void 0;var n=r(19969);Object.defineProperty(t,"HomeBasedAuthenticationService",{enumerable:!0,get:function(){return n.HomeBasedAuthenticationService}})},6277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(99938),i=r(74151),a=function(){function e(){var e=this;this.encryptWithPublicKey=function(t,r){return r.getKey().then((function(r){return n.__awaiter(e,void 0,void 0,(function(){return n.__generator(this,()}))}))},this.decryptWithPrivateKey=function(t,r){return n.__awaiter(e,void 0,void 0,(function(){var e;return n.__generator(this,(function(n){switch(n.label){case 0:if(!r)throw new Error("Missing private key provider.");return[4,r.getKey()];case 1:return e=n.sent(),[2,this.decrypt(e,t)]}}))}))}}return e.prototype.encrypt=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var r;return n.__generator(this,(function(n){switch(n.label){case 0:if(!t)throw new Error("Missing raw data.");if(!e)throw new Error("Missing public key.");return[4,i.JWK.asKey(e)];case 1:return r=n.sent(),[2,i.JWE.createEncrypt({format:"compact"},r).update(JSON.stringify(t)).final()]}}))}))},e.prototype.decrypt=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var r,a;return n.__generator(this,(function(n){switch(n.label){case 0:if(!t)throw new Error("Missing encrypted data.");if(!e)throw new Error("Missing private key.");return r=i.JWK.createKeyStore(),[4,i.JWK.asKey(e,"private")];case 1:return a=n.sent(),r.add(a),[2,i.JWE.createDecrypt(r).decrypt(t).then(()]}}))}))},e}();t.default=a},25772:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKeyProvider=void 0;var n=r(14377);Object.defineProperty(t,"PublicKeyProvider",{enumerable:!0,get:function(){return n.PublicKeyProvider}})},14377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKeyProvider=void 0;var n=r(43110),i=function(e,t){var r=this;this.getKey=function(){return n.authSuiteFetch.get({path:r.url}).then((function(e){return r.findKey(e)}))},this.findKey=this.url=e,this.kid=t};t.PublicKeyProvider=i},99404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientDescriptionSerializer=void 0;t.clientDescriptionSerializer={toHeaderValue:function(e){return Object.keys(e).map(().filter((function(e){return e})).join(";")}}},48007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadersService=t.headersService=void 0;var n=r(99938),i=r(14460),a=r(47761),o=r(17303),s=r(99404),u=r(5622),c={"Client-Description":function(){var e=o.windowService.detectNavigator(),t=i.systemFactory.create(e),r=i.deviceTypeFactory.create(e),n=a.deviceNameFactory.create(e);return s.clientDescriptionSerializer.toHeaderValue({deviceName:n,deviceType:r,system:t})}(),"Content-Type":"application/json","Api-Version":u.AuthSuiteAPIVersion.WITH_VALIDATION_ERROR_MESSAGES};t.headersService={getHeaders:function(e,t){var r=n.__assign(n.__assign({},c),e);return t?t,r):r}};var l=function(){return t.headersService};t.HeadersService=l},424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteAPIVersion=t.headersService=t.HeadersService=void 0;var n=r(48007);Object.defineProperty(t,"HeadersService",{enumerable:!0,get:function(){return n.HeadersService}}),Object.defineProperty(t,"headersService",{enumerable:!0,get:function(){return n.headersService}});var i=r(5622);Object.defineProperty(t,"AuthSuiteAPIVersion",{enumerable:!0,get:function(){return i.AuthSuiteAPIVersion}})},82546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteAPIVersion=void 0,function(e){e.DEFAULT="2017-12-31",e.WITH_PROFILE_CHANGE_EVENTS="2020-04-01",e.WITH_ON_HOLD_PAYMENT_STATUS="2020-09-15",e.WITH_VALIDATION_ERROR_MESSAGES="2021-01-07"}(t.AuthSuiteAPIVersion||(t.AuthSuiteAPIVersion={}))},5622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteAPIVersion=void 0;var n=r(82546);Object.defineProperty(t,"AuthSuiteAPIVersion",{enumerable:!0,get:function(){return n.AuthSuiteAPIVersion}})},47194:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteInAppPurchaseService=t.authSuiteInAppPurchaseService=void 0;var n=r(43110),i=r(70807),a="access/purchase";t.authSuiteInAppPurchaseService={registerAppStoreInAppPurchase:function(e){var t="".concat(a,"/appStore"),r={purchaseToken:e.purchaseToken},i=JSON.stringify(r);return n.authSuiteFetchWithAuthorization.post({body:i,path:t})},registerGooglePlayInAppPurchase:function(e){var t="".concat(a,"/googlePlay"),r={purchases:e.purchases},i=JSON.stringify(r);return n.authSuiteFetchWithAuthorization.post({body:i,path:t})},purchaseAndRegisterSubscription:function(e){var t=e.productId,r=e.transactionToken,a=e.couponCode,o=e.activationCode,s={productId:t,transactionToken:r,couponCode:a,referralCode:e.referralCode},u=JSON.stringify(s),c=o?[i.AuthSuiteSdkClientRequestParams.ActivationCode]:[];return n.authSuiteFetchWithAuthorization.post({body:u,path:"directPayments/subscriptions",requestParams:c,request:e})}};var o=function(){return t.authSuiteInAppPurchaseService};t.AuthSuiteInAppPurchaseService=o},40346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteInAppPurchaseService=t.AuthSuiteInAppPurchaseService=void 0;var n=r(47194);Object.defineProperty(t,"AuthSuiteInAppPurchaseService",{enumerable:!0,get:function(){return n.AuthSuiteInAppPurchaseService}}),Object.defineProperty(t,"authSuiteInAppPurchaseService",{enumerable:!0,get:function(){return n.authSuiteInAppPurchaseService}})},24074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteSubscriptionsService=t.Duration=t.FreeTrialUserEligibility=t.authSuiteDirectPaymentsService=t.AuthSuiteDirectPaymentsService=t.settingsService=t.SettingsService=t.FreePreviewStatus=t.FreePreviewMode=t.ActivationCodeAuthSuiteService=t.SignInStatus=t.ActivationFlow=t.SecondScreenEntryPoint=t.edenReportingService=t.AuthSuiteAnalyticsService=t.analyticsService=t.GlobalBentoLib=t.BentoReportingService=t.Errors=t.MethodErrorResponse=t.ClientErrorMessages=t.accessService=t.AccountType=t.checkAccessStatusDefaultStrategy=t.AccessService=t.getUrlWithRegCodeParamMovedToStartOfQueryString=t.parseUrl=t.CodeGenerationService=t.windowService=t.WindowService=t.refreshTokenService=t.requestPathServiceFalsyValues=t.requestPathAuthSuiteService=t.RequestPathAuthSuiteService=t.ProvidersFiltersType=t.ProvidersAuthSuiteService=t.LogoSchema=t.AuthenticationType=t.providersAuthSuiteService=t.headersService=t.HeadersService=t.authorizationAuthSuiteService=t.AuthorizationAuthSuiteService=t.TokenType=t.tokensResolvingContext=t.localStorageTokensResolvingStrategy=t.authSuiteDataLocalStorageService=t.AuthSuiteDataLocalStorageService=t.AccessTokenService=t.accessTokenService=void 0,t.authSuiteCaptchaService=t.AuthSuiteSearchAndSelectedService=t.AuthSuiteParentalPinService=t.ParentalPinStatus=t.AuthSuiteContinueWatchingService=t.AuthSuiteWatchlistService=t.HomeBasedAuthenticationService=t.AuthSuiteEmployeeAccessService=t.authSuiteEmployeeAccessService=t.authSuiteAccountService=t.AuthSuiteAccountService=t.MarketingOptIn=t.FreePreviewService=t.freePreviewService=t.UserIdService=t.userIdService=t.AccessMethodId=t.SDKClientVersionService=t.viacomAccountEmailService=t.ViacomAccountEmailService=t.viacomAccountPasswordService=t.ViacomAccountPasswordService=t.viacomAccountService=t.ViacomAccountService=t.MediaTokenService=t.mediaTokenService=t.AuthSuiteInAppPurchaseService=t.authSuiteInAppPurchaseService=t.AuthSuiteProfilesService=t.authSuiteProfilesService=t.requiredParamsValidator=t.InAppPurchaseStoreType=t.SubscriptionActivityStatus=t.SubscriptionPaymentStatus=t.AuthSuiteSubscriptionsService=void 0;var n=r(67483);Object.defineProperty(t,"accessTokenService",{enumerable:!0,get:function(){return n.accessTokenService}}),Object.defineProperty(t,"AccessTokenService",{enumerable:!0,get:function(){return n.AccessTokenService}});var i=r(78799);Object.defineProperty(t,"AuthSuiteDataLocalStorageService",{enumerable:!0,get:function(){return i.AuthSuiteDataLocalStorageService}}),Object.defineProperty(t,"authSuiteDataLocalStorageService",{enumerable:!0,get:function(){return i.authSuiteDataLocalStorageService}}),Object.defineProperty(t,"localStorageTokensResolvingStrategy",{enumerable:!0,get:function(){return i.localStorageTokensResolvingStrategy}}),Object.defineProperty(t,"tokensResolvingContext",{enumerable:!0,get:function(){return i.tokensResolvingContext}}),Object.defineProperty(t,"TokenType",{enumerable:!0,get:function(){return i.TokenType}});var a=r(47420);Object.defineProperty(t,"AuthorizationAuthSuiteService",{enumerable:!0,get:function(){return a.AuthorizationAuthSuiteService}}),Object.defineProperty(t,"authorizationAuthSuiteService",{enumerable:!0,get:function(){return a.authorizationAuthSuiteService}});var o=r(424);Object.defineProperty(t,"HeadersService",{enumerable:!0,get:function(){return o.HeadersService}}),Object.defineProperty(t,"headersService",{enumerable:!0,get:function(){return o.headersService}});var s=r(93577);Object.defineProperty(t,"providersAuthSuiteService",{enumerable:!0,get:function(){return s.providersAuthSuiteService}}),Object.defineProperty(t,"AuthenticationType",{enumerable:!0,get:function(){return s.AuthenticationType}}),Object.defineProperty(t,"LogoSchema",{enumerable:!0,get:function(){return s.LogoSchema}}),Object.defineProperty(t,"ProvidersAuthSuiteService",{enumerable:!0,get:function(){return s.ProvidersAuthSuiteService}}),Object.defineProperty(t,"ProvidersFiltersType",{enumerable:!0,get:function(){return s.ProvidersFiltersType}});var u=r(45649);Object.defineProperty(t,"RequestPathAuthSuiteService",{enumerable:!0,get:function(){return u.RequestPathAuthSuiteService}}),Object.defineProperty(t,"requestPathAuthSuiteService",{enumerable:!0,get:function(){return u.requestPathAuthSuiteService}}),Object.defineProperty(t,"requestPathServiceFalsyValues",{enumerable:!0,get:function(){return u.requestPathServiceFalsyValues}});var c=r(98148);Object.defineProperty(t,"refreshTokenService",{enumerable:!0,get:function(){return c.refreshTokenService}});var l=r(17303);Object.defineProperty(t,"WindowService",{enumerable:!0,get:function(){return l.WindowService}}),Object.defineProperty(t,"windowService",{enumerable:!0,get:function(){return l.windowService}});var f=r(62864);Object.defineProperty(t,"CodeGenerationService",{enumerable:!0,get:function(){return f.CodeGenerationService}});var h=r(81853);Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return h.parseUrl}}),Object.defineProperty(t,"getUrlWithRegCodeParamMovedToStartOfQueryString",{enumerable:!0,get:function(){return h.getUrlWithRegCodeParamMovedToStartOfQueryString}});var p=r(37664);Object.defineProperty(t,"AccessService",{enumerable:!0,get:function(){return p.AccessService}}),Object.defineProperty(t,"checkAccessStatusDefaultStrategy",{enumerable:!0,get:function(){return p.checkAccessStatusDefaultStrategy}}),Object.defineProperty(t,"AccountType",{enumerable:!0,get:function(){return p.AccountType}}),Object.defineProperty(t,"accessService",{enumerable:!0,get:function(){return p.accessService}});var d=r(23604);Object.defineProperty(t,"ClientErrorMessages",{enumerable:!0,get:function(){return d.ClientErrorMessages}}),Object.defineProperty(t,"MethodErrorResponse",{enumerable:!0,get:function(){return d.MethodErrorResponse}}),Object.defineProperty(t,"Errors",{enumerable:!0,get:function(){return d.Errors}});var y=r(95933);Object.defineProperty(t,"BentoReportingService",{enumerable:!0,get:function(){return y.BentoReportingService}}),Object.defineProperty(t,"GlobalBentoLib",{enumerable:!0,get:function(){return y.GlobalBentoLib}}),Object.defineProperty(t,"analyticsService",{enumerable:!0,get:function(){return y.analyticsService}}),Object.defineProperty(t,"AuthSuiteAnalyticsService",{enumerable:!0,get:function(){return y.AuthSuiteAnalyticsService}}),Object.defineProperty(t,"edenReportingService",{enumerable:!0,get:function(){return y.edenReportingService}});var v=r(29998);Object.defineProperty(t,"SecondScreenEntryPoint",{enumerable:!0,get:function(){return v.SecondScreenEntryPoint}}),Object.defineProperty(t,"ActivationFlow",{enumerable:!0,get:function(){return v.ActivationFlow}}),Object.defineProperty(t,"SignInStatus",{enumerable:!0,get:function(){return v.SignInStatus}}),Object.defineProperty(t,"ActivationCodeAuthSuiteService",{enumerable:!0,get:function(){return v.ActivationCodeAuthSuiteService}});var g=r(65115);Object.defineProperty(t,"FreePreviewMode",{enumerable:!0,get:function(){return g.FreePreviewMode}}),Object.defineProperty(t,"FreePreviewStatus",{enumerable:!0,get:function(){return g.FreePreviewStatus}}),Object.defineProperty(t,"SettingsService",{enumerable:!0,get:function(){return g.SettingsService}}),Object.defineProperty(t,"settingsService",{enumerable:!0,get:function(){return g.settingsService}});var m=r(47301);Object.defineProperty(t,"AuthSuiteDirectPaymentsService",{enumerable:!0,get:function(){return m.AuthSuiteDirectPaymentsService}}),Object.defineProperty(t,"authSuiteDirectPaymentsService",{enumerable:!0,get:function(){return m.authSuiteDirectPaymentsService}}),Object.defineProperty(t,"FreeTrialUserEligibility",{enumerable:!0,get:function(){return m.FreeTrialUserEligibility}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return m.Duration}});var S=r(91702);Object.defineProperty(t,"authSuiteSubscriptionsService",{enumerable:!0,get:function(){return S.authSuiteSubscriptionsService}}),Object.defineProperty(t,"AuthSuiteSubscriptionsService",{enumerable:!0,get:function(){return S.AuthSuiteSubscriptionsService}}),Object.defineProperty(t,"SubscriptionPaymentStatus",{enumerable:!0,get:function(){return S.SubscriptionPaymentStatus}}),Object.defineProperty(t,"SubscriptionActivityStatus",{enumerable:!0,get:function(){return S.SubscriptionActivityStatus}}),Object.defineProperty(t,"InAppPurchaseStoreType",{enumerable:!0,get:function(){return S.InAppPurchaseStoreType}});var b=r(52335);Object.defineProperty(t,"requiredParamsValidator",{enumerable:!0,get:function(){return b.requiredParamsValidator}});var E=r(63642);Object.defineProperty(t,"authSuiteProfilesService",{enumerable:!0,get:function(){return E.authSuiteProfilesService}}),Object.defineProperty(t,"AuthSuiteProfilesService",{enumerable:!0,get:function(){return E.AuthSuiteProfilesService}});var C=r(40346);Object.defineProperty(t,"authSuiteInAppPurchaseService",{enumerable:!0,get:function(){return C.authSuiteInAppPurchaseService}}),Object.defineProperty(t,"AuthSuiteInAppPurchaseService",{enumerable:!0,get:function(){return C.AuthSuiteInAppPurchaseService}});var A=r(75365);Object.defineProperty(t,"mediaTokenService",{enumerable:!0,get:function(){return A.mediaTokenService}}),Object.defineProperty(t,"MediaTokenService",{enumerable:!0,get:function(){return A.MediaTokenService}});var w=r(92018);Object.defineProperty(t,"ViacomAccountService",{enumerable:!0,get:function(){return w.ViacomAccountService}}),Object.defineProperty(t,"viacomAccountService",{enumerable:!0,get:function(){return w.viacomAccountService}});var _=r(31118);Object.defineProperty(t,"ViacomAccountPasswordService",{enumerable:!0,get:function(){return _.ViacomAccountPasswordService}}),Object.defineProperty(t,"viacomAccountPasswordService",{enumerable:!0,get:function(){return _.viacomAccountPasswordService}});var T=r(93957);Object.defineProperty(t,"ViacomAccountEmailService",{enumerable:!0,get:function(){return T.ViacomAccountEmailService}}),Object.defineProperty(t,"viacomAccountEmailService",{enumerable:!0,get:function(){return T.viacomAccountEmailService}});var P=r(32580);Object.defineProperty(t,"SDKClientVersionService",{enumerable:!0,get:function(){return P.SDKClientVersionService}});var I=r(36165);Object.defineProperty(t,"AccessMethodId",{enumerable:!0,get:function(){return I.AccessMethodId}}),Object.defineProperty(t,"userIdService",{enumerable:!0,get:function(){return I.userIdService}}),Object.defineProperty(t,"UserIdService",{enumerable:!0,get:function(){return I.UserIdService}});var B=r(79119);Object.defineProperty(t,"freePreviewService",{enumerable:!0,get:function(){return B.freePreviewService}}),Object.defineProperty(t,"FreePreviewService",{enumerable:!0,get:function(){return B.FreePreviewService}});var k=r(1775);Object.defineProperty(t,"MarketingOptIn",{enumerable:!0,get:function(){return k.MarketingOptIn}}),Object.defineProperty(t,"AuthSuiteAccountService",{enumerable:!0,get:function(){return k.AuthSuiteAccountService}}),Object.defineProperty(t,"authSuiteAccountService",{enumerable:!0,get:function(){return k.authSuiteAccountService}});var O=r(67028);Object.defineProperty(t,"authSuiteEmployeeAccessService",{enumerable:!0,get:function(){return O.authSuiteEmployeeAccessService}}),Object.defineProperty(t,"AuthSuiteEmployeeAccessService",{enumerable:!0,get:function(){return O.AuthSuiteEmployeeAccessService}});var R=r(1495);Object.defineProperty(t,"HomeBasedAuthenticationService",{enumerable:!0,get:function(){return R.HomeBasedAuthenticationService}});var N=r(28701);Object.defineProperty(t,"AuthSuiteWatchlistService",{enumerable:!0,get:function(){return N.AuthSuiteWatchlistService}});var F=r(39213);Object.defineProperty(t,"AuthSuiteContinueWatchingService",{enumerable:!0,get:function(){return F.AuthSuiteContinueWatchingService}});var L=r(93265);Object.defineProperty(t,"ParentalPinStatus",{enumerable:!0,get:function(){return L.ParentalPinStatus}}),Object.defineProperty(t,"AuthSuiteParentalPinService",{enumerable:!0,get:function(){return L.AuthSuiteParentalPinService}});var j=r(82413);Object.defineProperty(t,"AuthSuiteSearchAndSelectedService",{enumerable:!0,get:function(){return j.AuthSuiteSearchAndSelectedService}});var x=r(69990);Object.defineProperty(t,"authSuiteCaptchaService",{enumerable:!0,get:function(){return x.authSuiteCaptchaService}})},75365:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mediaTokenService=t.MediaTokenService=void 0;var n=r(3854);Object.defineProperty(t,"MediaTokenService",{enumerable:!0,get:function(){return n.MediaTokenService}}),Object.defineProperty(t,"mediaTokenService",{enumerable:!0,get:function(){return n.mediaTokenService}})},3854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaTokenService=t.mediaTokenService=void 0;var n=r(43110);t.mediaTokenService={getMediaToken:function(e){var t={content:e.content,resourceId:e.resourceId},r=JSON.stringify(t);return n.authSuiteFetchWithAuthorization.post({body:r,path:"mediaToken",request:e})}};var i=function(){return t.mediaTokenService};t.MediaTokenService=i},28354:70807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteSdkClientRequestParams=void 0;var n=r(28354);Object.defineProperty(t,"AuthSuiteSdkClientRequestParams",{enumerable:!0,get:function(){return n.AuthSuiteSdkClientRequestParams}})},93265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteParentalPinService=t.ParentalPinStatus=void 0;var n=r(88064);Object.defineProperty(t,"ParentalPinStatus",{enumerable:!0,get:function(){return n.ParentalPinStatus}});var i=r(92521);Object.defineProperty(t,"AuthSuiteParentalPinService",{enumerable:!0,get:function(){return i.AuthSuiteParentalPinService}})},88064:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParentalPinStatus=void 0,function(e){e.NotSet="notSet",e.Active="active",e.Locked="locked"}(t.ParentalPinStatus||(t.ParentalPinStatus={}))},92521:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteParentalPinService=void 0;var n=r(43110),i=function(){var e=this;this.setParentalPin=function(t){var r=e.parentalPinBaseRoute,i={parentalPin:t},a=JSON.stringify(i);return n.authSuiteFetchWithAuthorization.post({body:a,path:r})},this.validateParentalPin=function(t){var r="".concat(e.parentalPinBaseRoute,"/validate"),i={parentalPin:t},a=JSON.stringify(i);return n.authSuiteFetchWithAuthorization.post({body:a,path:r})},this.deleteParentalPin=function(){var t=e.parentalPinBaseRoute;return n.authSuiteFetchWithAuthorization.delete({body:null,path:t})},this.resetParentalPin=function(t){var r="".concat(e.parentalPinBaseRoute,"/reset"),i={parentalPin:t},a=JSON.stringify(i);return n.authSuiteFetchWithAuthorization.post({body:a,path:r})},this.getParentalPinStatus=function(){var t="".concat(e.parentalPinBaseRoute,"/status");return n.authSuiteFetchWithAuthorization.get({path:t})},this.updateParentalPinDevices=function(t){var r="".concat(e.parentalPinBaseRoute,"/devices"),i=JSON.stringify(t);return n.authSuiteFetchWithAuthorization.patch({body:i,path:r})},this.getParentalPinDevices=function(){var t="".concat(e.parentalPinBaseRoute,"/devices");return n.authSuiteFetchWithAuthorization.get({path:t})},this.parentalPinBaseRoute="parentalPin"};t.AuthSuiteParentalPinService=i},81853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=t.getUrlWithRegCodeParamMovedToStartOfQueryString=void 0;var n=r(64188);Object.defineProperty(t,"getUrlWithRegCodeParamMovedToStartOfQueryString",{enumerable:!0,get:function(){return n.getUrlWithRegCodeParamMovedToStartOfQueryString}}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return n.parseUrl}})},64188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=t.getUrlWithRegCodeParamMovedToStartOfQueryString=t.parseUrlDataDefaultObject=void 0;var n=r(99938),i=r(91856);t.parseUrlDataDefaultObject={activationCode:"",callbackUrl:"",clientId:"",countryCode:"",mvpdCode:"",mvpdName:"",platform:""};var a=function(e){var r=function(e){return n.__assign(n.__assign({},t.parseUrlDataDefaultObject),e)}(e),i=r.authorizationCode,a=n.__rest(r,["authorizationCode"]),o=n.__assign(n.__assign({},a),{authorizationCode:i});return Boolean(i)?o:a};t.getUrlWithRegCodeParamMovedToStartOfQueryString=function(e){var t=(0,i.parseUrl)(e),r=(0,i.stringify)(t.query,{sort:);return"".concat(t.url,"?").concat(r)};t.parseUrl=function(e){var t,r,o,s=a(e),u=s.clientId,c=s.countryCode,l=s.callbackUrl,f=n.__rest(s,["clientId","countryCode","callbackUrl"]),h=n.__assign(n.__assign({},f),{authSuiteData:(t={clientId:u,countryCode:c},r=JSON.stringify(t),o=btoa(r),encodeURIComponent(o))}),p=decodeURIComponent(l),d=(0,i.parseUrl)(p),y="".concat(d.url,"?").concat((0,i.stringify)(h)),v=encodeURIComponent(y);return v.replace("®","&reg")}},63642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authSuiteProfilesService=t.AuthSuiteProfilesService=void 0;var n=r(81332);Object.defineProperty(t,"AuthSuiteProfilesService",{enumerable:!0,get:function(){return n.AuthSuiteProfilesService}}),Object.defineProperty(t,"authSuiteProfilesService",{enumerable:!0,get:function(){return n.authSuiteProfilesService}})},81332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteProfilesService=t.authSuiteProfilesService=void 0;var n=r(99938),i=r(43110),a="profiles";t.authSuiteProfilesService={createProfile:function(e){var t=a,r=n.__assign({},e),o=JSON.stringify(r);return i.authSuiteFetchWithAuthorization.post({body:o,path:t})},getProfile:function(e){var t="".concat(a,"/").concat(e.profileId);return i.authSuiteFetchWithAuthorization.get({path:t})},getProfiles:function(){var e=a;return i.authSuiteFetchWithAuthorization.get({path:e})},selectProfile:function(e){var t="".concat(a,"/").concat(e.profileId,"/select");return i.authSuiteFetchWithAuthorization.post({path:t})},deleteProfile:function(e){var t="".concat(a,"/").concat(e.profileId);return i.authSuiteFetchWithAuthorization.delete({path:t})},updateProfile:function(e){var t="".concat(a,"/").concat(e.profileId),r={profile:e.profile},n=JSON.stringify(r);return i.authSuiteFetchWithAuthorization.patch({body:n,path:t})}};var o=function(){return t.authSuiteProfilesService};t.AuthSuiteProfilesService=o},93577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogoSchema=t.ProvidersFiltersType=t.AuthenticationType=t.providersAuthSuiteService=t.ProvidersAuthSuiteService=void 0;var n=r(45600);Object.defineProperty(t,"ProvidersAuthSuiteService",{enumerable:!0,get:function(){return n.ProvidersAuthSuiteService}}),Object.defineProperty(t,"providersAuthSuiteService",{enumerable:!0,get:function(){return n.providersAuthSuiteService}});var i=r(67200);Object.defineProperty(t,"AuthenticationType",{enumerable:!0,get:function(){return i.AuthenticationType}}),Object.defineProperty(t,"ProvidersFiltersType",{enumerable:!0,get:function(){return i.ProvidersFiltersType}}),Object.defineProperty(t,"LogoSchema",{enumerable:!0,get:function(){return i.LogoSchema}})},33676:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationType=void 0,function(e){e.WebLogin="webLogin"}(t.AuthenticationType||(t.AuthenticationType={}))},67200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogoSchema=t.ProvidersFiltersType=t.AuthenticationType=void 0;var n=r(33676);Object.defineProperty(t,"AuthenticationType",{enumerable:!0,get:function(){return n.AuthenticationType}});var i=r(17192);Object.defineProperty(t,"LogoSchema",{enumerable:!0,get:function(){return i.LogoSchema}});var a=r(42883);Object.defineProperty(t,"ProvidersFiltersType",{enumerable:!0,get:function(){return a.ProvidersFiltersType}})},17192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogoSchema=void 0,function(e){e.Color="color",e.White="white",e.Black="black"}(t.LogoSchema||(t.LogoSchema={}))},42883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProvidersFiltersType=void 0,function(e){e.NoFilter="all",e.Top="top",e.FreePreview="freePreview"}(t.ProvidersFiltersType||(t.ProvidersFiltersType={}))},45600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProvidersAuthSuiteService=t.providersAuthSuiteService=void 0;var n=r(43110),i=r(80694),a="mvpd";t.providersAuthSuiteService={getMvpdProvider:function(e){var t=[i.AuthSuiteRequestParams.LogoSchema,i.AuthSuiteRequestParams.ActivationCode];return n.authSuiteFetchWithAuthorization.get({path:"".concat(a,"/").concat(e.mvpdCode,"/").concat("info"),request:e,requestParams:t})},getMvpdProviders:function(e){var t=[i.AuthSuiteRequestParams.FilterType,i.AuthSuiteRequestParams.LogoSchema,i.AuthSuiteRequestParams.ActivationCode,i.AuthSuiteRequestParams.TopProvidersLimit];return n.authSuiteFetchWithAuthorization.get({path:a,request:e,requestParams:t})}};var o=function(){return t.providersAuthSuiteService};t.ProvidersAuthSuiteService=o},98148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTokenService=void 0;var n=r(58718);Object.defineProperty(t,"refreshTokenService",{enumerable:!0,get:function(){return n.refreshTokenService}})},58718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshTokenService=void 0;var n=r(43110),i=r(80694),a=r(72375),o=r(67483),s=r(78799),u=function(){return a.authSuitePendingRequestRegistry.getPendingRequest({requestKey:a.PendingRequestKey.REFRESH_TOKEN})||c()},c=function(){var e=a.PendingRequestKey.REFRESH_TOKEN;return a.authSuitePendingRequestRegistry.registerPendingRequest({pendingRequestPromise:l(),requestKey:e}),a.authSuitePendingRequestRegistry.getPendingRequest({requestKey:e})},l=function(){return s.authSuiteDataLocalStorageService.getDeviceRefreshToken().then((function(e){if(null===e)throw new Error("Invalid state: deviceRefreshToken is null");var t={refreshToken:e},r=JSON.stringify(t);return n.authSuiteFetch.post({body:r,path:"accessToken/refresh"})}))},f=function(e){return s.authSuiteDataLocalStorageService.setAccessTokens(e),d(),e},h=function(e){return p(e)&&e.errorCode===i.ErrorCode.InvalidToken&&(s.authSuiteDataLocalStorageService.removeAccessTokens(),o.accessTokenService.getAccessToken()),d(),Promise.reject(e)},p,d;t.refreshTokenService={refreshToken}},90035:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteAnalyticsService=t.analyticsService=void 0;var n=r(99938),i=r(43110);t.analyticsService={sendAnalyticsIds:function(e){var t=n.__assign({},e),r=JSON.stringify(t);return i.authSuiteFetchWithAuthorization.post({body:r,path:"analytics/ids"})}};var a=function(){return t.analyticsService};t.AuthSuiteAnalyticsService=a},13265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BentoReportingService=t.bentoReportingService=void 0;var n=r(90035),i=r(32837);t.bentoReportingService={sendAnalyticsIds:function(e){return n.analyticsService.sendAnalyticsIds(e)},triggerOnNewPage:function(e){i.globalBentoLib.onNewPage(e)}};var a=function(){return t.bentoReportingService};t.BentoReportingService=a},32837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalBentoLib=t.globalBentoLib=void 0;var n=r(17303),i={onNewPage:function(){}};t.globalBentoLib={onNewPage:function(e){(n.windowService.getWindow().Bento||i).onNewPage(e)}};var a=function(){return t.globalBentoLib};t.GlobalBentoLib=a},42577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edenReportingService=void 0;var n=r(43110);t.edenReportingService={issueEdenReportingToken}},90747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edenReportingService=void 0;var n=r(42577);Object.defineProperty(t,"edenReportingService",{enumerable:!0,get:function(){return n.edenReportingService}})},95933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.edenReportingService=t.globalBentoLib=t.GlobalBentoLib=t.bentoReportingService=t.BentoReportingService=t.analyticsService=t.AuthSuiteAnalyticsService=void 0;var n=r(90035);Object.defineProperty(t,"AuthSuiteAnalyticsService",{enumerable:!0,get:function(){return n.AuthSuiteAnalyticsService}}),Object.defineProperty(t,"analyticsService",{enumerable:!0,get:function(){return n.analyticsService}});var i=r(13265);Object.defineProperty(t,"BentoReportingService",{enumerable:!0,get:function(){return i.BentoReportingService}}),Object.defineProperty(t,"bentoReportingService",{enumerable:!0,get:function(){return i.bentoReportingService}});var a=r(32837);Object.defineProperty(t,"GlobalBentoLib",{enumerable:!0,get:function(){return a.GlobalBentoLib}}),Object.defineProperty(t,"globalBentoLib",{enumerable:!0,get:function(){return a.globalBentoLib}});var o=r(90747);Object.defineProperty(t,"edenReportingService",{enumerable:!0,get:function(){return o.edenReportingService}})},45649,68221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestPathAuthSuiteService=t.requestPathAuthSuiteService=t.requestPathServiceFalsyValues=void 0;var n=r(12300),i=r(78799),a=r(52335),o=r(23604);t.requestPathServiceFalsyValues=[void 0,null];var s,u=function(e,t){return void 0===t&&(t=[]),t.map((function(t){return(e,t)})).join("&")},c=function(e,t){return void 0===t&&(t=[]),(r=i.authSuiteDataLocalStorageService.getAuthSuiteRequestData(),n=a.requiredParamsValidator.isValid(r),c=u(r,Object.keys(r)),n?Promise.resolve(c):Promise.reject(o.authSuiteErrorFactory.createError(o.MethodErrorResponse.MISSING_REQUIRED_PARAMS))).then((function(r){var n="".concat("?").concat(r),i=function(e,t){void 0===t&&(t=[]);var r=t.filter((function(t){return s(e[t])}));return u(e,r)}(e,t);return i.length?[n,i].join("&"):n}));var r,n,c};t.requestPathAuthSuiteService={getFullPath:function(e){var t,r,i,a,o=(t=e.path,r=e.proxy,i=n.configBase.getConfig(),a=s(r)?r:i.authSuiteUrl,"".concat(a,"/").concat(t));return c(e.request,e.requestParams).then())}};var l=function(){return t.requestPathAuthSuiteService};t.RequestPathAuthSuiteService=l},52335:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requiredParamsValidator=void 0;var n=r(26842);Object.defineProperty(t,"requiredParamsValidator",{enumerable:!0,get:function(){return n.requiredParamsValidator}})},26842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requiredParamsValidator=t.isValid=void 0;var n=r(80694),i=[n.AuthSuiteRequestDataType.CLIENT_ID,n.AuthSuiteRequestDataType.COUNTRY_CODE];t.isValid,t.requiredParamsValidator={isValid:t.isValid}},82413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteSearchAndSelectedService=void 0;var n=r(10474);Object.defineProperty(t,"AuthSuiteSearchAndSelectedService",{enumerable:!0,get:function(){return n.AuthSuiteSearchAndSelectedService}})},10474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteSearchAndSelectedService=void 0;var n=r(43110),i=function(){var e=this;this.deleteSearchAndSelected=function(){var t=e.searchAndSelectedBaseRoute;return n.authSuiteFetchWithAuthorization.delete({path:t})},this.searchAndSelectedBaseRoute="searchAndSelected"};t.AuthSuiteSearchAndSelectedService=i},65115:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsService=t.SettingsService=t.FreePreviewStatus=t.FreePreviewMode=void 0;var n=r(43117);Object.defineProperty(t,"FreePreviewMode",{enumerable:!0,get:function(){return n.FreePreviewMode}}),Object.defineProperty(t,"FreePreviewStatus",{enumerable:!0,get:function(){return n.FreePreviewStatus}});var i=r(59471);Object.defineProperty(t,"SettingsService",{enumerable:!0,get:function(){return i.SettingsService}}),Object.defineProperty(t,"settingsService",{enumerable:!0,get:function(){return i.settingsService}})},56578:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FreePreviewMode=void 0,function(e){e.Social="social",e.NoSocial="noSocial"}(t.FreePreviewMode||(t.FreePreviewMode={}))},85724,43117,59471:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsService=t.settingsService=void 0;var n=r(43110),i="settings",a="".concat(i,"/access"),o="".concat(i,"/countryCodes"),s=function(){return n.authSuiteFetchWithAuthorization.get({path:o})},u=function(){return n.authSuiteFetchWithAuthorization.get({path:a})};t.settingsService={getAccessMethods:function(){return u()},getCountryCodes};var c=function(){return t.settingsService};t.SettingsService=c},65939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteDataLocalStorageService=t.authSuiteDataLocalStorageService=void 0;var n=r(63263),i=r(80694),a=r(65547),o=r(97257),s=r(56925),u,c,l,f=function(e){c(i.AuthSuiteRequestDataType.CLIENT_ID,e)},h=function(e){c(i.AuthSuiteRequestDataType.COUNTRY_CODE,e)},p=function(){return u(i.AuthSuiteRequestDataType.CLIENT_ID)},d=function(){return u(i.AuthSuiteRequestDataType.COUNTRY_CODE)},y=function(){l(i.AuthSuiteRequestDataType.CLIENT_ID)},v=function(){l(i.AuthSuiteRequestDataType.COUNTRY_CODE)},g=function(e){c(a.TokenType.DEVICE_REFRESH_TOKEN,e)},m,S,b=function(){l(a.TokenType.APPLICATION_ACCESS_TOKEN)},E;t.authSuiteDataLocalStorageService={getAccessTokens:S,getApplicationAccessToken:function(){return S().then((function(e){return e&&e.applicationAccessToken}))},getAuthSuiteRequestData,getClientId:p,getCountryCode:d,getDeviceRefreshToken:function(){return S().then())},getVirginMediaHbaProxy,removeAccessTokens:function(){E(),b()},removeApplicationAccessToken:b,removeAuthSuiteRequestData,removeClientId:y,removeCountryCode:v,removeDeviceRefreshToken:E,setAccessTokens:function(e){m(e.applicationAccessToken),g(e.deviceRefreshToken)},setApplicationAccessToken:m,setAuthSuiteRequestData,setClientId:f,setCountryCode:h,setDeviceRefreshToken:g,setVirginMediaHbaProxy:function(e){-1===[void 0,null].indexOf(e)?c(s.StorageEntryKey.VIRGIN_MEDIA_HBA_PROXY,e):l(s.StorageEntryKey.VIRGIN_MEDIA_HBA_PROXY)}};var C=function(){return t.authSuiteDataLocalStorageService};t.AuthSuiteDataLocalStorageService=C},78799:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=t.localStorageTokensResolvingStrategy=t.tokensResolvingContext=t.authSuiteDataLocalStorageService=t.AuthSuiteDataLocalStorageService=void 0;var n=r(65939);Object.defineProperty(t,"AuthSuiteDataLocalStorageService",{enumerable:!0,get:function(){return n.AuthSuiteDataLocalStorageService}}),Object.defineProperty(t,"authSuiteDataLocalStorageService",{enumerable:!0,get:function(){return n.authSuiteDataLocalStorageService}});var i=r(97257);Object.defineProperty(t,"tokensResolvingContext",{enumerable:!0,get:function(){return i.tokensResolvingContext}});var a=r(97257);Object.defineProperty(t,"localStorageTokensResolvingStrategy",{enumerable:!0,get:function(){return a.localStorageTokensResolvingStrategy}});var o=r(65547);Object.defineProperty(t,"TokenType",{enumerable:!0,get:function(){return o.TokenType}})},65547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=void 0;var n=r(37417);Object.defineProperty(t,"TokenType",{enumerable:!0,get:function(){return n.TokenType}})},56925:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageEntryKey=void 0,function(e){e.VIRGIN_MEDIA_HBA_PROXY="virginMediaHbaProxy"}(t.StorageEntryKey||(t.StorageEntryKey={}))},37417:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenType=void 0,function(e){e.DEVICE_REFRESH_TOKEN="deviceRefreshToken",e.APPLICATION_ACCESS_TOKEN="applicationAccessToken"}(t.TokenType||(t.TokenType={}))},29156:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessTokenCustomStrategy=void 0;t.getAccessTokenCustomStrategy={execute:function(){return r().then())},getCustomMethod:function(){return r},setCustomMethod:function(e){r=e}}},97257,71127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localStorageTokensResolvingStrategy=void 0;var n=r(63263),i=r(65547),a;t.localStorageTokensResolvingStrategy={execute:function(){var e=a(i.TokenType.APPLICATION_ACCESS_TOKEN),t=a(i.TokenType.DEVICE_REFRESH_TOKEN);return Promise.resolve(e||t?{applicationAccessToken:e,deviceRefreshToken:t}:null)}}},48102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tokensResolvingContext=void 0;var n=r(71127).localStorageTokensResolvingStrategy;t.tokensResolvingContext={getTokens,setStrategy:function(e){n=e}}},91702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InAppPurchaseStoreType=t.SubscriptionPaymentStatus=t.SubscriptionActivityStatus=t.authSuiteSubscriptionsService=t.AuthSuiteSubscriptionsService=void 0;var n=r(19288);Object.defineProperty(t,"AuthSuiteSubscriptionsService",{enumerable:!0,get:function(){return n.AuthSuiteSubscriptionsService}}),Object.defineProperty(t,"authSuiteSubscriptionsService",{enumerable:!0,get:function(){return n.authSuiteSubscriptionsService}});var i=r(23361);Object.defineProperty(t,"SubscriptionActivityStatus",{enumerable:!0,get:function(){return i.SubscriptionActivityStatus}}),Object.defineProperty(t,"SubscriptionPaymentStatus",{enumerable:!0,get:function(){return i.SubscriptionPaymentStatus}}),Object.defineProperty(t,"InAppPurchaseStoreType",{enumerable:!0,get:function(){return i.InAppPurchaseStoreType}})},35869,48171,23361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InAppPurchaseStoreType=t.SubscriptionPaymentStatus=t.SubscriptionActivityStatus=void 0;var n=r(13902);Object.defineProperty(t,"SubscriptionActivityStatus",{enumerable:!0,get:function(){return n.SubscriptionActivityStatus}}),Object.defineProperty(t,"SubscriptionPaymentStatus",{enumerable:!0,get:function(){return n.SubscriptionPaymentStatus}});var i=r(48171);Object.defineProperty(t,"InAppPurchaseStoreType",{enumerable:!0,get:function(){return i.InAppPurchaseStoreType}})},13902,19288:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteSubscriptionsService=t.authSuiteSubscriptionsService=void 0;var n=r(99938),i=r(43110),a=r(35869),o="directPayments/subscriptions";t.authSuiteSubscriptionsService={addCouponToSubscription:function(e){var t={couponCode:e.couponCode},r=JSON.stringify(t);return i.authSuiteFetchWithAuthorization.post({body:r,path:"".concat(o,"/").concat(e.subscriptionId,"/coupon")})},cancelDirectPaymentSubscription:function(e){var t="".concat(o,"/").concat(e.subscriptionId),r={status:a.DIRECT_PAYMENT_SUBSCRIPTION_STATUS.CANCELED},n=JSON.stringify(r);return i.authSuiteFetchWithAuthorization.patch({body:n,path:t})},getSubscriptionDetails:function(e){var t=e.providerCode,r=e.providerUserId,a="".concat("access/purchase","/").concat(t,"/").concat(r);return i.authSuiteFetchWithAuthorization.get({path:a}).then((function(e){return n.__assign(n.__assign({},e),{inBillingGracePeriod:e.inBillingGracePeriod||!1})}))}};var s=function(){return t.authSuiteSubscriptionsService};t.AuthSuiteSubscriptionsService=s},36165,4725,90233:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessMethodId=void 0;var n=r(4725);Object.defineProperty(t,"AccessMethodId",{enumerable:!0,get:function(){return n.AccessMethodId}})},42095:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserIdService=t.userIdService=void 0;var n=r(99938),i=r(75235),a=r(37664),o=r(23604),s=r(67200),u=r(90233),c=function(e){return a.accessService.checkAccessStatus(e).then((function(e){return l(e.accessMethodsInUse)}))},l=function(e){var t=function(e){return e.filter((function(e){return e.providerCode===u.AccessMethodId.APE&&e.type===i.ContentAccessMethodType.Social}))}(e).map(f).shift();return t?Promise.resolve(t):Promise.reject(o.authSuiteErrorFactory.createError(o.MethodErrorResponse.GET_USER_DETAILS_FROM_ACCESS_METHOD))},f,h;t.userIdService={getProviderCodeAndUserId,getUserId};var p=function(){return t.userIdService};t.UserIdService=p},32580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDKClientVersionService=void 0;var n=r(22468);Object.defineProperty(t,"SDKClientVersionService",{enumerable:!0,get:function(){return n.SDKClientVersionService}})},22468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDKClientVersionService=void 0;var n=r(38913);t.SDKClientVersionService={version:n.version}},93957:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViacomAccountEmailService=t.viacomAccountEmailService=void 0;var n=r(41938);Object.defineProperty(t,"viacomAccountEmailService",{enumerable:!0,get:function(){return n.viacomAccountEmailService}}),Object.defineProperty(t,"ViacomAccountEmailService",{enumerable:!0,get:function(){return n.ViacomAccountEmailService}})},41938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViacomAccountEmailService=t.viacomAccountEmailService=void 0;var n=r(43110);t.viacomAccountEmailService={changeEmail:function(e){var t={newEmail:e.newEmail},r=JSON.stringify(t);return n.authSuiteFetchWithAuthorization.post({body:r,path:"viacomAccount/email/change"})}};var i=function(){return t.viacomAccountEmailService};t.ViacomAccountEmailService=i},31118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViacomAccountPasswordService=t.viacomAccountPasswordService=void 0;var n=r(69303);Object.defineProperty(t,"viacomAccountPasswordService",{enumerable:!0,get:function(){return n.viacomAccountPasswordService}}),Object.defineProperty(t,"ViacomAccountPasswordService",{enumerable:!0,get:function(){return n.ViacomAccountPasswordService}})},69303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViacomAccountPasswordService=t.viacomAccountPasswordService=void 0;var n=r(99938),i=r(43110),a=r(80694),o="viacomAccount/password";t.viacomAccountPasswordService={changePassword:function(e){var t="".concat(o,"/change"),r=n.__assign({},e),a=JSON.stringify(r);return i.authSuiteFetchWithAuthorization.post({body:a,path:t,request:e})},forgotPassword:function(e){var t="".concat(o,"/forgot"),r={email:e.email},n=[a.AuthSuiteRequestParams.ActivationCode],s=JSON.stringify(r);return i.authSuiteFetchWithAuthorization.post({body:s,path:t,request:e,requestParams:n})},resetPassword:function(e){var t="".concat(o,"/reset"),r=n.__assign({},e),a=JSON.stringify(r);return i.authSuiteFetchWithAuthorization.post({body:a,path:t,request:e})}};var s=function(){return t.viacomAccountPasswordService};t.ViacomAccountPasswordService=s},92018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViacomAccountService=t.viacomAccountService=void 0;var n=r(10060);Object.defineProperty(t,"viacomAccountService",{enumerable:!0,get:function(){return n.viacomAccountService}}),Object.defineProperty(t,"ViacomAccountService",{enumerable:!0,get:function(){return n.ViacomAccountService}})},10060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViacomAccountService=t.viacomAccountService=void 0;var n=r(43110),i=r(75235),a=r(27148),o=r(80694),s=r(37664),u=r(90233),c="viacomAccount",l="".concat(c,"/verify/resend"),f=function(e){var t=e.find());return Boolean(t)},h;t.viacomAccountService={getDevicesList:function(){var e="".concat(c,"/devices");return n.authSuiteFetchWithAuthorization.get({path:e})},getViacomAccountDetails:function(){return n.authSuiteFetchWithAuthorization.get({path:c}).then((function(e){return e}))},isUserLoggedInWithViacomAccount:function(){return s.accessService.checkAccessStatus().then((function(e){return f(e.accessMethodsInUse)}))},resendVerificationEmail:function(e){var t={email:e.email},r=JSON.stringify(t);return n.authSuiteFetchWithAuthorization.post({body:r,path:l})},resendVerificationEmailToSignedInUser,signIn:function(e){var t="".concat(c,"/signIn"),r={email:e.email,password:e.password},i=JSON.stringify(r),a=[o.AuthSuiteRequestParams.ActivationCode];return n.authSuiteFetchWithAuthorization.post({body:i,path:t,request:e,requestParams:a}).then((function(e){return h(e)}))},signInIdentified:function(){var e="".concat(c,"/signInIdentified");return n.authSuiteFetchWithAuthorization.post({path:e}).then((function(e){return h(e)}))},signOutDevices:function(e){var t="".concat(c,"/devices/signOut"),r=JSON.stringify(e);return n.authSuiteFetchWithAuthorization.post({body:r,path:t})},signUp:function(e){var t="".concat(c,"/signUp"),r={email:e.email,password:e.password,profile:e.profile,marketingOptIn:e.marketingOptIn},i=JSON.stringify(r),a=[o.AuthSuiteRequestParams.ActivationCode,o.AuthSuiteRequestParams.PromoCode];return n.authSuiteFetchWithAuthorization.post({body:i,path:t,request:e,requestParams:a})},signUpAndSignIn:function(e){var t="".concat(c,"/signUpAndSignIn"),r={email:e.email,password:e.password,profile:e.profile,marketingOptIn:e.marketingOptIn},i=JSON.stringify(r),a=[o.AuthSuiteRequestParams.ActivationCode,o.AuthSuiteRequestParams.PromoCode];return n.authSuiteFetchWithAuthorization.post({body:i,path:t,request:e,requestParams:a})},verify:function(e){var t="".concat(c,"/verify"),r={verificationToken:e.verificationToken},i=JSON.stringify(r);return n.authSuiteFetchWithAuthorization.patch({body:i,path:t,request:e})}};var p=function(){return t.viacomAccountService};t.ViacomAccountService=p},28701,20312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthSuiteWatchlistService=void 0;var n=r(43110),i=function(){var e=this;this.addToWatchlist=function(t){var r=e.watchListBaseRoute,i={contentId:t},a=JSON.stringify(i);return n.authSuiteFetchWithAuthorization.post({body:a,path:r})},this.removeFromWatchlist=function(t){var r="".concat(e.watchListBaseRoute,"/byContentId/").concat(t);return n.authSuiteFetchWithAuthorization.delete({path:r})},this.deleteFromWatchlist=function(t){var r=e.watchListBaseRoute,i={contentIds:t},a=JSON.stringify(i);return n.authSuiteFetchWithAuthorization.delete({body:a,path:r})},this.containsOnWatchlist=function(t){var r="".concat(e.watchListBaseRoute,"/byContentId/").concat(t,"/exists");return n.authSuiteFetchWithAuthorization.get({path:r})},this.watchListBaseRoute="watchlist"};t.AuthSuiteWatchlistService=i},17303,93423:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WindowService=t.windowService=void 0;var n,i=function(){var e="undefined"==typeof window?{}:window;return n(r||e),r};t.windowService={detectNavigator,getWindow:i,setWindow:n};var a;t.WindowService=a},38913,89922:(e,t,r)=>{"use strict";var n=r(41389),i=r(94438),a=r(19111),o=r(41871),s=r(58921),u=r(54095);function c(e){if(16!==e.length)throw new Error("invalid iv")}function l(e){return n.setupFallback((function(t,r,i){try{c(i)}catch(e){return Promise.reject(e)}var a=Promise.resolve(r);return a=a.then((function(r){var a="AES-"+e+"-CBC",o=n.nodeCrypto.createCipheriv(a,t,i);return Buffer.concat([o.update(r),o.final()])})),a}),(function(e,t,r){try{c(r)}catch(e){return Promise.reject(e)}var i=Promise.resolve();return i=(i=(i=i.then((function(){return n.subtleCrypto.importKey("raw",e,{name:"AES-CBC"},!0,["encrypt"])}))).then((function(e){var i={name:"AES-CBC",iv:r};return n.subtleCrypto.encrypt(i,e,t)}))).then((function(e){return e=Buffer.from(e)}))}),(function(e,t,r){try{c(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=n.then((function(){var n=o.cipher.createCipher("AES-CBC",new s(e));return n.start({iv:new s(r)}),n.update(new s(t)),n.finish()?Buffer.from(n.output.bytes(),"binary"):Promise.reject(new Error("encryption failed"))}))}))}function f(e){return n.setupFallback((function(t,r,i){try{c(i)}catch(e){return Promise.reject(e)}var a=Promise.resolve();return a=a.then((function(){var a="AES-"+e+"-CBC",o=n.nodeCrypto.createDecipheriv(a,t,i);return Buffer.concat([o.update(r),o.final()])}))}),(function(e,t,r){try{c(r)}catch(e){return Promise.reject(e)}var i=Promise.resolve();return i=(i=(i=i.then((function(){return n.subtleCrypto.importKey("raw",e,{name:"AES-CBC"},!0,["decrypt"])}))).then((function(e){var i={name:"AES-CBC",iv:r};return n.subtleCrypto.decrypt(i,e,t)}))).then((function(e){return e=Buffer.from(e)}))}),(function(e,t,r){try{c(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=n.then((function(){var n=o.cipher.createDecipher("AES-CBC",new s(e));return n.start({iv:new s(r)}),n.update(new s(t)),n.finish()?Buffer.from(n.output.bytes(),"binary"):Promise.reject(new Error("encryption failed"))}))}))}function h(e,t){if(t<<1!=e.length<<3)throw new Error("invalid encryption key size")}function p(e){var t=l(e);return function(r,a,o){try{h(r,e)}catch(e){return Promise.reject(e)}var s=r.slice(e/8),u=r.slice(0,e/8),c=o.iv||Buffer.alloc(0),l=o.aad||o.adata||Buffer.alloc(0),f=t(s,a,c);return f=f.then((function(t){var r=Buffer.concat([l,c,t,n.int64ToBuffer(8*l.length)]);return i["HS"+2*e].sign(u,r,{length:e}).then((function(r){var n=r.mac.slice(0,e/8);return{data:t,tag:n}}))}))}}function d(e){var t=f(e);return function(r,a,o){try{h(r,e)}catch(e){return Promise.reject(e)}var s=r.slice(e/8),u=r.slice(0,e/8),c=o.iv||Buffer.alloc(0),l=o.aad||o.adata||Buffer.alloc(0),f=o.tag||o.mac||Buffer.alloc(0),p=Promise.resolve();return p=(p=p.then((function(){var t=Buffer.concat([l,c,a,n.int64ToBuffer(8*l.length)]);return i["HS"+2*e].verify(u,t,f,{length:e}).then((function(){return a}),(function(){throw new Error("mac check failed")}))}))).then((function(){return t(s,a,c)}))}}var y=Buffer.from("Encryption","utf8"),v=Buffer.from("Integrity","utf8"),g=Buffer.from(".","utf8");function m(e,t,r,i){var o=8*e.length,s=o/2,u=Promise.resolve();return u=(u=u.then((function(){return Buffer.concat([n.int32ToBuffer(1),e,n.int32ToBuffer(s),Buffer.from(t,"utf8"),r,i,y])}))).then((function(e){return a["SHA-"+o].digest(e).then((function(e){return e.slice(0,s/8)}))})),u=Promise.resolve(u)}function S(e,t,r,i){var o=8*e.length,s=o,u=Promise.resolve();return u=(u=u.then((function(){return Buffer.concat([n.int32ToBuffer(1),e,n.int32ToBuffer(s),Buffer.from(t,"utf8"),r,i,v])}))).then((function(e){return a["SHA-"+o].digest(e).then())})),u=Promise.resolve(u)}function b(e,t){var r=l(e);return function(a,o,s){var c,l,f=s.epu||n.int32ToBuffer(0),h=s.epv||n.int32ToBuffer(0),p=s.iv||Buffer.alloc(0),d=s.aad||s.adata||Buffer.alloc(0),y=s.kdata||Buffer.alloc(0),v=[m(a,t,f,h),S(a,t,f,h)],b=Promise.all(v).then((function(e){c=e[0],l=e[1]}));return b=(b=(b=b.then((function(){return r(c,o,p)}))).then((function(t){var r=Buffer.concat([d,g,Buffer.from(y),g,Buffer.from(u.base64url.encode(p),"utf8"),g,Buffer.from(u.base64url.encode(t),"utf8")]);return Promise.all([Promise.resolve(t),i["HS"+2*e].sign(l,r,{length:e})])}))).then((function(e){return{data:e[0],tag:e[1].mac}}))}}function E(e,t){var r=f(e);return function(a,o,s){var c,l,f=s.epu||n.int32ToBuffer(0),h=s.epv||n.int32ToBuffer(0),p=s.iv||Buffer.alloc(0),d=s.aad||s.adata||Buffer.alloc(0),y=s.kdata||Buffer.alloc(0),v=s.tag||s.mac||Buffer.alloc(0),b=[m(a,t,f,h),S(a,t,f,h)],E=Promise.all(b).then());return E=(E=E.then((function(){var t=Buffer.concat([d,g,Buffer.from(y),g,Buffer.from(u.base64url.encode(p),"utf8"),g,Buffer.from(u.base64url.encode(o),"utf8")]);try{return i["HS"+2*e].verify(l,t,v,{loose:!1})}catch(e){throw new Error("mac check failed")}}))).then())}}var C={};["A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"].forEach((function(e){var t=parseInt(/A(\d+)CBC-HS(\d+)?/g.exec(e)[1]);C[e]={encrypt:p(t),decrypt:d(t)}})),["A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"].forEach((function(e){var t=parseInt(/A(\d+)CBC\+HS(\d+)?/g.exec(e)[1]);C[e]={encrypt:b(t,e),decrypt:E(t,e)}})),e.exports=C},14967:(e,t,r)=>{"use strict";var n=r(41389),i=r(54095),a=r(24223),o=r(80133);function s(e,t){function r(r,n){if(e!==r.length<<3)throw new Error("invalid key size");if(!n&&!t)throw new Error("invalid iv");if(n&&12!==n.length)throw new Error("invalid iv")}function s(e){if(t){var r=i.base64url.encode(e.iv),n=i.base64url.encode(e.tag);e={data:e.data,header:{iv:r,tag:n}}}return e}return n.setupFallback((function(e,t,a){var o=a.iv,u=a.aad||a.adata||Buffer.alloc(0);try{r(e,o)}catch(e){return Promise.reject(e)}o=o||i.randomBytes(12);var c,l="aes-"+8*e.length+"-gcm";try{c=n.nodeCrypto.createCipheriv(l,e,o)}catch(e){throw new Error("unsupported algorithm: "+l)}if("function"!=typeof c.setAAD)throw new Error("unsupported algorithm: "+l);return u.length&&c.setAAD(u),s({data:Buffer.concat([c.update(t),c.final()]),iv:o,tag:c.getAuthTag()})}),(function(e,t,a){var o=a.iv,u=a.aad||a.adata||Buffer.alloc(0);try{r(e,o)}catch(e){return Promise.reject(e)}o=o||i.randomBytes(12);var c={name:"AES-GCM"};return n.subtleCrypto.importKey("raw",e,c,!0,["encrypt"]).then((function(e){return c.iv=o,c.tagLength=128,u.length&&(c.additionalData=u),n.subtleCrypto.encrypt(c,e,t)})).then((function(e){var t=e.byteLength-16,r=e.slice(t);r=Buffer.from(r);var n=e.slice(0,t);return s({data:n=Buffer.from(n),iv:o,tag:r})}))}),(function(e,t,n){var u,c,l=n.iv,f=n.aad||n.adata||Buffer.alloc(0);try{r(e,l)}catch(e){return Promise.reject(e)}return l=l||i.randomBytes(12),u=o.createCipher({key:e,iv:l,additionalData:f}),c=Buffer.alloc(t.length),new Promise((function(e,r){var n=a.CHUNK_SIZE,i=0,o=0;!function a(){var f=Math.min(n,t.length-o);if(i+=u.update(t,o,f,c,i),o+=f,t.length>o)setTimeout(a,0);else if((i+=u.finish(c,i))===t.length){var h=u.tag;e(s({data:c,iv:l,tag:h}))}else r(new Error("encryption failed"))}()}))}))}function u(e){function t(t,r,n){if(e!==t.length<<3)throw new Error("invalid key size");if(12!==r.length)throw new Error("invalid iv");if(16!==n.length)throw new Error("invalid tag length")}return n.setupFallback((function(e,r,i){var a=i.aad||i.adata||Buffer.alloc(0),o=i.iv||Buffer.alloc(0),s=i.tag||i.mac||Buffer.alloc(0);try{t(e,o,s)}catch(e){return Promise.reject(e)}var u,c="aes-"+8*e.length+"-gcm";try{u=n.nodeCrypto.createDecipheriv(c,e,o)}catch(e){throw new Error("unsupported algorithm: "+c)}if("function"!=typeof u.setAAD)throw new Error("unsupported algorithm: "+c);u.setAuthTag(s),a.length&&u.setAAD(a);try{return Buffer.concat([u.update(r),u.final()])}catch(e){throw new Error("decryption failed")}}),(function(e,r,i){var a=i.aad||i.adata||Buffer.alloc(0),o=i.iv||Buffer.alloc(0),s=i.tag||i.mac||Buffer.alloc(0);try{t(e,o,s)}catch(e){return Promise.reject(e)}var u={name:"AES-GCM"};return n.subtleCrypto.importKey("raw",e,u,!0,["decrypt"]).then((function(e){return u.iv=o,u.tagLength=128,a.length&&(u.additionalData=a),r=Buffer.concat([r,s],r.length+s.length),n.subtleCrypto.decrypt(u,e,r)})).then((function(e){return e=Buffer.from(e)}))}),(function(e,r,n){var i,s,u=n.aad||n.adata||Buffer.alloc(0),c=n.iv||Buffer.alloc(0),l=n.tag||n.mac||Buffer.alloc(0);try{t(e,c,l)}catch(e){return Promise.reject(e)}return i=o.createDecipher({key:e,iv:c,additionalData:u,tag:l}),s=Buffer.alloc(r.length),new Promise((function(e,t){var n=a.CHUNK_SIZE,o=0,u=0;!function a(){var c=Math.min(n,r.length-u);if(o+=i.update(r,u,c,s,o),u+=c,r.length>u)setTimeout(a,0);else{try{o+=i.finish(s,o)}catch(e){return void t(new Error("decryption failed"))}o===r.length?e(s):t(new Error("decryption failed"))}}()}))}))}var c={};["A128GCM","A192GCM","A256GCM","A128GCMKW","A192GCMKW","A256GCMKW"].forEach((function(e){var t=/A(\d+)GCM(KW)?/g.exec(e),r=parseInt(t[1]),n="KW"===t[2];c[e]={encrypt:s(r,n),decrypt:u(r)}})),e.exports=c},99837:(e,t,r)=>{"use strict";var n=r(41389),i=r(41871),a=r(58921),o=Buffer.from("a6a6a6a6a6a6a6a6","hex");function s(e,t){for(var r=Math.max(e.length,t.length),n=Buffer.alloc(r),i=0;r>i;i++)n[i]=(e[i]||0)^(t[i]||0);return n}function u(e,t){for(var r=[],n=0;e.length>n;n+=t)r.push(e.slice(n,n+t));return r}function c(e){var t=Math.floor(e/4294967296),r=e%4294967296,n=Buffer.alloc(8);return n[0]=255&t>>>24,n[1]=255&t>>>16,n[2]=255&t>>>8,n[3]=255&t>>>0,n[4]=255&r>>>24,n[5]=255&r>>>16,n[6]=255&r>>>8,n[7]=255&r>>>0,n}function l(e){function t(t,r){if(e!==t.length<<3)throw new Error("invalid key size");if(0<r.length&&0!=r.length%8)throw new Error("invalid data length")}return n.setupFallback((function(r,i){try{t(r,i)}catch(e){return Promise.reject(e)}var a,l,f,h=u(i,8),p=Buffer.alloc(16);a=o;for(var d=0;6>d;d++)for(var y=0;h.length>y;y++){f=h.length*d+y+1,l=Buffer.concat([a,h[y]]),a=s((l=n.nodeCrypto.createCipheriv("AES"+e,r,p).update(l)).slice(0,8),c(f)),h[y]=l.slice(8,16)}h=[a].concat(h);var v=Buffer.concat(h);return Promise.resolve({data:v})}),(function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var i={name:"AES-KW"},a=[n.subtleCrypto.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),n.subtleCrypto.importKey("raw",e,i,!0,["wrapKey"])];return a=(a=(a=Promise.all(a)).then((function(e){return n.subtleCrypto.wrapKey("raw",e[0],e[1],i)}))).then((function(e){return{data:e=Buffer.from(e)}}))}),(function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n,l,f,h=i.cipher.createCipher("AES",new a(e)),p=u(r,8);n=o;for(var d=0;6>d;d++)for(var y=0;p.length>y;y++)f=p.length*d+y+1,l=Buffer.concat([n,p[y]]),h.start(),h.update(new a(l)),h.finish(),n=s((l=Buffer.from(h.output.bytes(),"binary")).slice(0,8),c(f)),p[y]=l.slice(8,16);p=[n].concat(p);var v=Buffer.concat(p);return Promise.resolve({data:v})}))}function f(e){function t(t,r){if(e!==t.length<<3)throw new Error("invalid key size");if(0<r.length-8&&0!=r.length%8)throw new Error("invalid data length")}return n.setupFallback((function(r,i){try{t(r,i)}catch(e){return Promise.reject(e)}var a,l,f=u(i,8),h=Buffer.alloc(16);a=f[0],f=f.slice(1);for(var p=5;0<=p;--p)for(var d=f.length-1;0<=d;--d){l=s(a,c(f.length*p+d+1)),l=Buffer.concat([l,f[d],h]),a=(l=n.nodeCrypto.createDecipheriv("AES"+e,r,h).update(l)).slice(0,8),f[d]=l.slice(8,16)}if(a.toString()!==o.toString())return Promise.reject(new Error("decryption failed"));var y=Buffer.concat(f);return Promise.resolve(y)}),(function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var i={name:"AES-KW"},a=n.subtleCrypto.importKey("raw",e,i,!0,["unwrapKey"]);return a=a.then((function(e){return n.subtleCrypto.unwrapKey("raw",r,e,i,{name:"HMAC",hash:"SHA-256"},!0,["sign"])})),a=(a=a.then())).then((function(e){return e=Buffer.from(e)}))}),(function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n,l,f=i.cipher.createDecipher("AES",new a(e)),h=u(r,8);n=h[0],h=h.slice(1);for(var p=5;0<=p;--p)for(var d=h.length-1;0<=d;--d)l=s(n,c(h.length*p+d+1)),l=Buffer.concat([l,h[d]]),f.start(),f.update(new a(l)),f.finish(),n=(l=Buffer.from(f.output.bytes(),"binary")).slice(0,8),h[d]=l.slice(8,16);if(n.toString()!==o.toString())return Promise.reject(new Error("decryption failed"));var y=Buffer.concat(h);return Promise.resolve(y)}))}var h={};["A128KW","A192KW","A256KW"].forEach((function(e){var t=parseInt(/A(\d+)KW/g.exec(e)[1]);h[e]={encrypt:l(t),decrypt:f(t)}})),e.exports=h},78218:(e,t,r)=>{"use strict";var n=r(24223),i=r(19111);function a(e){e=e.replace("CONCAT-","");return function(t,r){var a=(r=r||{}).length,o=n.HASHLENGTH[e];if(!a)return Promise.reject(new Error("invalid key length"));if(!r.otherInfo)return Promise.reject(new Error("invalid otherInfo"));var s=r.otherInfo,u=i[e].digest,c=Math.ceil(a/o),l=0,f=[];return function e(){if(c===l++)return Buffer.concat(f).slice(0,a);var r=Buffer.alloc(4+t.length+s.length);return r.writeUInt32BE(l,0),t.copy(r,4),s.copy(r,4+t.length),u(r).then())}()}}var o={};["CONCAT-SHA-1","CONCAT-SHA-256","CONCAT-SHA-384","CONCAT-SHA-512"].forEach((function(e){o[e]={derive:a(e)}})),e.exports=o},24223:e=>{"use strict";e.exports={CHUNK_SIZE:1024,HASHLENGTH:{"SHA-1":160,"SHA-256":256,"SHA-384":384,"SHA-512":512},ENCLENGTH:{"AES-128-CBC":128,"AES-192-CBC":192,"AES-256-CBC":256,"AES-128-KW":128,"AES-192-KW":192,"AES-256-KW":256},KEYLENGTH:{"A128CBC-HS256":256,"A192CBC-HS384":384,"A256CBC-HS512":512,"A128CBC+HS256":256,"A192CBC+HS384":384,"A256CBC+HS512":512,A128GCM:128,A192GCM:192,A256GCM:256,A128KW:128,A192KW:192,A256KW:256,"ECDH-ES+A128KW":128,"ECDH-ES+A192KW":192,"ECDH-ES+A256KW":256},NONCELENGTH:{"A128CBC-HS256":128,"A192CBC-HS384":128,"A256CBC-HS512":128,"A128CBC+HS256":128,"A192CBC+HS384":128,"A256CBC+HS512":128,A128GCM:96,A192GCM:96,A256GCM:96}}},42980:e=>{"use strict";var t={dir:{encrypt:function(e){return Promise.resolve({data:e,once:!0,direct:!0})},decrypt:function(e){return Promise.resolve(e)}}};e.exports=t},14932:(e,t,r)=>{"use strict";var n=r(55824),i=r(13326),a=r(41871),o=r(54095),s={"P-256":256,"P-384":384,"P-521":521};function u(e,t){var r=n(e);return(t?["x","y"]:["d"]).forEach()),r}var c=Buffer.from([4]);var l="1.2.840.10045.2.1";var f="Could not extract parameters from DER signature"e.exports={convertToForge:function(e,t){var r=t?["x","y"]:["d"];return r=r.map((function(t){return new a.jsbn.BigInteger(e[t].toString("hex"),16)})),r=[e.crv].concat(r),(t?i.asPublicKey:i.asPrivateKey).apply(i,r)},convertToJWK:function(e,t){var r=n(e);return(t?["x","y"]:["x","y","d"]).forEach((function(e){r[e]=o.base64url.encode(r[e])})),delete r.key_ops,delete r.use,delete r.alg,t&&delete r.d,r},convertToObj:u,convertToBuffer:function(e,t){return e=u(e,t),t?Buffer.concat([c,e.x,e.y]):e.d},curveSize:function(e){return s[e||""]||NaN},derToConcat:function(e,t){var r=0;if(48!==e[r++])throw new Error(f);var n=e[r++];if(129===n&&(n=e[r++]),n>e.length-r)throw new Error(f);if(2!==e[r++])throw new Error(f);var i=e[r++];if(i>e.length-r-2)throw new Error(f);if(i>t+1)throw new Error(f);var a=r;if(r+=i,2!==e[r++])throw new Error(f);var o=e[r++];if(o!==e.length-r)throw new Error(f);if(o>t+1)throw new Error(f);var s=r;if((r+=o)!==e.length)throw new Error(f);var u=t-i,c=t-o,l=Buffer.alloc(u+i+c+o);for(r=0;r<u;++r)l[r]=0;var h=Math.max(-u,0);e.copy(l,r,a+h,a+i);for(var p=r=t;r<p+c;++r)l[r]=0;var d=Math.max(-c,0);return e.copy(l,r,s+d,s+o),l},concatToDer:function(e,t){var r=h(e,0,t),n=h(e,t,e.length),i=t-r,a=t-n,o=i+a+4,s=o<128,u=Buffer.alloc((s?2:3)+o),c=0;return u[c++]=48,s?u[c++]=o:(u[c++]=129,u[c++]=255&o),u[c++]=2,u[c++]=i,r<0?(u[c++]=0,c+=e.copy(u,c,0,t)):c+=e.copy(u,c,r,t),u[c++]=2,u[c++]=a,n<0?(u[c++]=0,e.copy(u,c,t)):e.copy(u,c,t+n),u},convertToPEM:function(e,t){var r,n,i,o=e.crv;return o(o),o=a.asn1.oidToDer(o),t?(r="EC PRIVATE KEY",n=Buffer.concat([Buffer.from([0,4]),e.x,e.y]).toString("binary"),e=e.d.toString("binary"),i=a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.SEQUENCE,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.INTEGER,!1,""),a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.OCTETSTRING,!1,e),a.asn1.create(a.asn1.Class.CONTEXT_SPECIFIC,0,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.OID,!1,o.bytes())]),a.asn1.create(a.asn1.Class.CONTEXT_SPECIFIC,1,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.BITSTRING,!1,n)])])):(r="PUBLIC KEY",e=Buffer.concat([Buffer.from([0,4]),e.x,e.y]).toString("binary"),i=a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.SEQUENCE,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.SEQUENCE,!0,[a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.OID,!1,a.asn1.oidToDer(l).bytes()),a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.OID,!1,o.bytes())]),a.asn1.create(a.asn1.Class.UNIVERSAL,a.asn1.Type.BITSTRING,!1,e)])),i=a.asn1.toDer(i).bytes(),a.pem.encode({type:r,body:i})},EC_OID:l}},73115:(e,t,r)=>{"use strict";var n=r(25050),i=r(54095),a=r(14932),o=r(91584),s=r(78218),u=r(99837),c=r(41389),l=r(24223),f=r(55824),h=r(59245),p=r(19334);function d(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Error("unsupported curve: "+e)}}var y=e.exports={};function v(e,t,r){function n(e){return Buffer.concat([c.int32ToBuffer(e.length),e])}var a=r.algorithm||"",o=l.KEYLENGTH[a],s=i.asBuffer(r.apu||"","base64url"),u=i.asBuffer(r.apv||"","base64url"),f={public:t,length:o/8,hash:"SHA-256",otherInfo:Buffer.concat([n(Buffer.from(a,"utf8")),n(s),n(u),c.int32ToBuffer(o)])};return y["ECDH-CONCAT"].derive(e,f)}["ECDH","ECDH-HKDF","ECDH-CONCAT"].forEach((function(e){var t,r,i=/^ECDH(?:-(\w+))?$/g.exec(e||"")[1],u=y[e]=y[e]||{};switch(i||""){case"CONCAT":u.derive=function(e,t){var r;t=t||{};try{if(!(r=t.hash||d(e.crv)))throw new Error("invalid hash: "+r);r.toUpperCase()}catch(e){return Promise.reject(e)}var n=["public"],i=y.ECDH.derive(e,p(t,n));return i.then((function(e){return s["CONCAT-"+r].derive(e,h(t,n))}))};break;case"HKDF":u.derive=function(e,t){var r;t=t||{};try{if(!(r=t.hash||d(e.crv)))throw new Error("invalid hash: "+r);r.toUpperCase()}catch(e){return Promise.reject(e)}var n=["public"],i=y.ECDH.derive(e,p(t,n));return i.then((function(e){return o["HKDF-"+r].derive(e,h(t,n))}))};break;case"":u.derive=(t={name:"ECDH"},r=function(e,t){var r=e&&a.convertToForge(e,!0);if(!r||!r.isValid())return Promise.reject(new Error("invalid EC public key"));switch(t){case"jwk":r=a.convertToJWK(e,!0);break;case"buffer":r=a.convertToBuffer(e,!0)}return Promise.resolve(r)},c.setupFallback((function(e,t){if("function"!=typeof c.nodeCrypto.createECDH)throw new Error("unsupported algorithm: ECDH");var n,i=(t=t||{}).length||0;switch(e.crv){case"P-256":n="prime256v1";break;case"P-384":n="secp384r1";break;case"P-521":n="secp521r1";break;default:return Promise.reject(new Error("invalid curve: "+n))}var o=a.convertToBuffer(e,!1),s=r(t.public,"buffer");return s=s.then((function(e){var t=c.nodeCrypto.createECDH(n);t.setPrivateKey(o);var r=t.computeSecret(e);if(i){if(r.length<i)return Promise.reject(new Error("key length too large: "+i));r=r.slice(0,i)}return r})),s}),(function(e,i){e=e||{};var o=(i=i||{}).length||0,s=n(f(t),{namedCurve:e.crv});o||(o=e.d.length);var u=a.convertToJWK(e,!1);u=c.subtleCrypto.importKey("jwk",u,s,!1,["deriveBits"]);var l=r(i.public,"jwk");l=l.then((function(e){return c.subtleCrypto.importKey("jwk",e,s,!1,[])}));var h=Promise.all([u,l]);return h=h.then((function(e){var r=e[0],i=e[1],a=n(f(t),{public:i});return c.subtleCrypto.deriveBits(a,r,8*o)})),h.then((function(e){return Buffer.from(e)}))}),(function(e,t){var n=(t=t||{}).length||0,i=a.convertToForge(e,!1),o=r(t.public,"forge");return o.then((function(e){var t=i.computeSecret(e);if(n){if(t.length<n)return Promise.reject(new Error("key length too large: "+n));t=t.slice(0,n)}return t}))})));break;default:u.derive=null}})),["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"].forEach((function(e){var t,r,n=/^ECDH-ES(?:\+(.+))?/g.exec(e||"")[1],i=y[e]=y[e]||{};n?(n=u[n])?(i.encrypt=(r=n.encrypt,function(e,t,n){if(!(n=n||{}).epk||!n.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var i=a.convertToObj(n.epk,!1);if(!e||!e.x||!e.y)return Promise.reject(new Error("missing static public key"));var o=v(i,a.convertToObj(e,!0),{algorithm:n.alg,apu:n.apu,apv:n.apv});return o.then((function(e){return r(e,t)}))}),i.decrypt=(t=n.decrypt,function(e,r,n){if(!(n=n||{}).epk||!n.epk.x||!n.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var i=a.convertToObj(n.epk,!0);if(!e||!e.d)return Promise.reject(new Error("missing static private key"));var o=v(a.convertToObj(e,!1),i,{algorithm:n.alg,apu:n.apu,apv:n.apv});return o.then((function(e){return t(e,r)}))})):i.ecrypt=i.decrypt=null:(i.encrypt=function(e,t,r){if(!(r=r||{}).epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var n=a.convertToObj(r.epk,!1);if(!e||!e.x||!e.y)return Promise.reject(new Error("missing static public key"));var i=v(n,a.convertToObj(e,!0),{algorithm:r.enc,apu:r.apu,apv:r.apv});return i.then())},i.decrypt=function(e,t,r){if(!(r=r||{}).epk||!r.epk.x||!r.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var n=a.convertToObj(r.epk,!0);if(!e||!e.d)return Promise.reject(new Error("missing static private key"));var i=v(a.convertToObj(e,!1),n,{algorithm:r.enc,apu:r.apu,apv:r.apv});return i.then((function(e){return e}))})}))},54365:(e,t,r)=>{"use strict";var n=r(14932),i=r(41389),a=r(19111);function o(e){switch(e){case"SHA-256":return"P-256";case"SHA-384":return"P-384";case"SHA-512":return"P-521";default:throw new Error("unsupported hash: "+e)}}function s(e){var t,r=o(e),s=e.toLowerCase().replace("-","");return i.nodeCrypto&&i.nodeCrypto.getHashes().indexOf(s)>-1&&(t=function(e,t){if(r!==e.crv)return Promise.reject(new Error("invalid curve"));var a,o;switch(a=(a=Promise.resolve(i.nodeCrypto.createSign(s))).then()),s.slice(-3)){case"384":o=48;break;case"512":o=66;break;default:o=32}return a=(a=a.then((function(t){return n.derToConcat(t.sign(n.convertToPEM(e,!0)),o)}))).then())}),i.setupFallback(t,(function(t,a){if(r!==t.crv)return Promise.reject(new Error("invalid curve"));var o,s=n.convertToJWK(t,!1),u={name:"ECDSA",namedCurve:s.crv,hash:{name:e}};return o=(o=i.subtleCrypto.importKey("jwk",s,u,!0,["sign"])).then((function(e){return i.subtleCrypto.sign(u,e,a)})),o=o.then((function(e){return e=Buffer.from(e),{data:a,mac:e}}))}),(function(t,i){if(r!==t.crv)return Promise.reject(new Error("invalid curve"));var o=n.convertToForge(t,!1);return a[e].digest(i).then((function(e){return e=o.sign(e),e=Buffer.concat([e.r,e.s]),{data:i,mac:e}}))}))}function u(e){var t,r=o(e),s=e.toLowerCase().replace("-","");return i.nodeCrypto&&i.nodeCrypto.getHashes().indexOf(s)>-1&&(t=function(e,t,a){if(r!==e.crv)return Promise.reject(new Error("invalid curve"));var o;switch(s.slice(-3)){case"384":o=48;break;case"512":o=66;break;default:o=32}return Promise.resolve(i.nodeCrypto.createVerify(s)).then((function(r){return r.update(t),r.end(),r.verify(n.convertToPEM(e,!1),n.concatToDer(a,o))})).then((function(e){if(!e)throw new Error("verification failed");return{data:t,mac:a,valid:!0}}))}),i.setupFallback(t,(function(t,a,o){if(r!==t.crv)return Promise.reject(new Error("invalid curve"));var s,u=n.convertToJWK(t,!0),c={name:"ECDSA",namedCurve:u.crv,hash:{name:e}};return s=(s=i.subtleCrypto.importKey("jwk",u,c,!0,["verify"])).then((function(e){return i.subtleCrypto.verify(c,e,o,a)})),s=s.then((function(e){return e?{data:a,mac:o,valid:!0}:Promise.reject(new Error("verification failed"))}))}),(function(t,i,o){if(r!==t.crv)return Promise.reject(new Error("invalid curve"));var s=n.convertToForge(t,!0);return a[e].digest(i).then((function(e){var t=o.length/2,r={r:o.slice(0,t),s:o.slice(t)};return s.verify(e,r)?{data:i,mac:o,valid:!0}:Promise.reject(new Error("verification failed"))}))}))}var c={};["ES256","ES384","ES512"].forEach((function(e){var t=e.replace(/ES(\d+)/g,));c[e]={sign:s(t),verify:u(t)}})),e.exports=c},41389:(e,t,r)=>{"use strict";"undefined"==typeof Promise&&r(32434).polyfill(),t.int32ToBuffer=function(e,t){return(t=t||Buffer.alloc(4))[0]=e>>>24&255,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=255&e,t};var n=Math.pow(2,32);t.int64ToBuffer=function(e,r){r=r||Buffer.alloc(8);var i=Math.floor(e/n),a=e%n;return i=t.int32ToBuffer(i),a=t.int32ToBuffer(a),r=Buffer.concat([i,a])};var i={};Object.defineProperty(t,"subtleCrypto",{get:function(){return"subtleCrypto"in i?i.subtleCrypto:i.subtleCrypto=function(){if("undefined"!=typeof crypto&&void 0!==crypto.subtle)return crypto.subtle}()},enumerable:!0}),Object.defineProperty(t,"nodeCrypto",{get:function(){return"nodeCrypto"in i?i.nodeCrypto:i.nodeCrypto=function(){var e;try{e=r(25282)}catch(e){return}if(Object.keys(e).length)return e}()},enumerable:!0}),t.setupFallback=function(e,r,n){var i;return i=e&&t.nodeCrypto?function(){var t,r=arguments;try{t=Promise.resolve(e.apply(null,r))}catch(e){t=function(e){return 0===e.message.indexOf("unsupported algorithm:")?(i=n).apply(null,r):Promise.reject(e)}(e)}return t}:r&&t.subtleCrypto?function(){var e,t=arguments;function a(e){return e.code!==DOMException.NOT_SUPPORTED_ERR&&34!==e.code&&"Only ArrayBuffer and ArrayBufferView objects can be passed as CryptoOperationData"!==e.message&&e instanceof Error?Promise.reject(e):(i=n).apply(null,t)}try{e=(e=r.apply(null,t)).catch(a)}catch(t){e=a(t)}return e}:n,i}},91584:(e,t,r)=>{"use strict";var n=r(24223),i=r(94438);function a(e){var t=e.replace("HKDF-",""),r=e.replace("HKDF-SHA-","HS");return function(e,a){var o=n.HASHLENGTH[t]/8;"string"==typeof r&&(r=i[r].sign);var s=(a=a||{}).salt;s&&0!==s.length||(s=Buffer.alloc(o));var u=a.info||Buffer.alloc(0),c=a.length||o,l=Math.ceil(c/o),f=[],h=0;function p(e,t){return l===h++?Buffer.concat(f).slice(0,c):(t||(t=Buffer.alloc(0)),t=Buffer.concat([t,u,Buffer.from([h])]),t=(t=r(e,t)).then((function(r){return t=r.mac,f.push(t),p(e,t)})))}return r(s,e,{length:8*s.length}).then())}}var o={};["HKDF-SHA-1","HKDF-SHA-256","HKDF-SHA-384","HKDF-SHA-512"].forEach((function(e){o[e]={derive:a(e)}})),e.exports=o},94438:(e,t,r)=>{"use strict";var n=r(24223),i=r(41871),a=r(58921),o=r(41389);function s(e){var t=e.replace("HS","SHA").toLowerCase(),r=e.replace("HS","SHA-");function a(e,t){return(e=(e||n.HASHLENGTH[r])/8)>t.length?Promise.reject(new Error("invalid key length")):Promise.resolve(t)}return o.setupFallback((function(e,r,n){var i;return i=(i=a((n=n||{}).length,e)).then((function(){var n=o.nodeCrypto.createHmac(t,e);n.update(r);var i=n.digest();return{data:r,mac:i}})),i}),(function(e,t,n){var i={name:"HMAC",hash:{name:r}};return a((n=n||{}).length,e).then((function(){return o.subtleCrypto.importKey("raw",e,i,!0,["sign"])})).then((function(e){return o.subtleCrypto.sign(i,e,t)})).then((function(e){var r=Buffer.from(e);return{data:t,mac:r}}))}),(function(e,r,n){return a((n=n||{}).length,e).then((function(){var n=i.hmac.create();return n.start(t,e.toString("binary")),n.update(r.toString("binary")),n=Buffer.from(n.digest().bytes(),"binary"),{data:r,mac:n}}))}))}function u(e){var t=e.replace("HS","SHA").toLowerCase(),r=e.replace("HS","SHA-");function s(e,t,i){e=(e||n.HASHLENGTH[r])/8;for(var a=!0,o=0;e>o;o++)a=a&&t[o]===i[o];return a}return o.setupFallback((function(e,r,n,i){i=i||{};var a=o.nodeCrypto.createHmac(t,e);a.update(r);var u=a.digest();if(!s(i.length,n,u))throw new Error("verification failed");return{data:r,mac:u,valid:!0}}),(function(e,t,n,i){var a={name:"HMAC",hash:{name:r}};return((i=i||{}).length?o.subtleCrypto.importKey("raw",e,a,!0,["sign"]).then((function(e){return o.subtleCrypto.sign(a,e,t)})).then((function(e){var t=Buffer.from(e);return s(i.length,n,t)})):o.subtleCrypto.importKey("raw",e,a,!0,["verify"]).then((function(e){return o.subtleCrypto.verify(a,e,n,t)}))).then((function(e){return e?{data:t,mac:n,valid:!0}:Promise.reject(new Error("verifaction failed"))}))}),(function(e,r,n,o){o=o||{};var u=i.hmac.create();return u.start(t,new a(e)),u.update(r.toString("binary")),u=Buffer.from(u.digest().bytes(),"binary"),s(o.length,n,u)?Promise.resolve({data:r,mac:n,valid:!0}):Promise.reject(new Error("verification failed"))}))}var c={};["HS1","HS256","HS384","HS512"].forEach((function(e){c[e]={sign:s(e),verify:u(e)}})),e.exports=c},12122:(e,t,r)=>{"use strict";var n=[r(89922),r(14967),r(99837),r(78218),r(42980),r(73115),r(54365),r(91584),r(94438),r(90469),r(35158),r(97368),r(19111)],i={},a={},o={},s={},u={},c={};n.forEach((function(e){Object.keys(e).forEach((function(t){var r=e[t];"function"==typeof r.encrypt&&(u[t]=r.encrypt),"function"==typeof r.decrypt&&(c[t]=r.decrypt),"function"==typeof r.sign&&(o[t]=r.sign),"function"==typeof r.verify&&(s[t]=r.verify),"function"==typeof r.digest&&(i[t]=r.digest),"function"==typeof r.derive&&(a[t]=r.derive)}))})),t.digest=function(e,t,r){var n=i[e];return n?n(t,r):Promise.reject(new Error("unsupported algorithm: "+e))},t.derive=function(e,t,r){var n=a[e];return n?n(t,r):Promise.reject(new Error("unsupported algorithm: "+e))},t.sign=function(e,t,r,n){var i=o[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))},t.verify=function(e,t,r,n,i){var a=s[e];return a?a(t,r,n,i||{}):Promise.reject(new Error("unsupported algorithm: "+e))},t.encrypt=function(e,t,r,n){var i=u[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))},t.decrypt=function(e,t,r,n){var i=c[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))}},90469:(e,t,r)=>{"use strict";var n=r(41871),i=r(25050),a=r(54095),o=r(41389),s=r(24223),u=r(99837),c=Buffer.from([0]);function l(e,t,r){var n="PBES2-"+e+"+"+t,i=[Buffer.from(n,"utf8"),c,r];return Buffer.concat(i)}function f(e){function t(e){var t=(e=e||{}).length||0,r=a.asBuffer(e.salt||Buffer.alloc(0),"base64u4l"),n=e.iterations||0;if(0>=t)throw new Error("invalid key length");if(0>=n)throw new Error("invalid iteration count");return e.length=t,e.salt=r,e.iterations=n,e}return o.setupFallback((function(r,n){if(6>o.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBKDF2-"+e);try{n=t(n)}catch(e){return Promise.reject(e)}var i=n.length,a=n.salt,s=n.iterations,u=e.replace("-","");return new Promise((function(e,t){o.nodeCrypto.pbkdf2(r,a,s,i,u,))}))}),(function(r,n){try{n=t(n)}catch(e){return Promise.reject(e)}var i=n.length,s=n.salt,u=n.iterations,c=Promise.resolve(r);return c=(c=c.then((function(e){return o.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveBits"])}))).then((function(t){var r={name:"PBKDF2",salt:new Uint8Array(s),iterations:u,hash:e};return o.subtleCrypto.deriveBits(r,t,8*i)})),c=c.then((function(e){return a.asBuffer(e)}))}),(function(r,i){try{i=t(i)}catch(e){return Promise.reject(e)}var a=i.length,o=i.salt,s=i.iterations;return new Promise((function(t,i){var u=n.md[e.replace("-","").toLowerCase()].create();n.pkcs5.pbkdf2(r.toString("binary"),o.toString("binary"),s,a,u,(function(e,r){e?i(e):(r=Buffer.from(r,"binary"),t(r))}))}))}))}function h(e,t){var r="PBKDF2-"+e.replace("HS","SHA-"),n=s.KEYLENGTH[t]/8;return function(o,s,c){c=c||{};var f=a.asBuffer(c.p2s||Buffer.alloc(0),"base64url"),h=c.p2c||8192;if(0>=h)throw new Error("invalid iteration count");if(0===f.length)f=a.randomBytes(16);else if(8>f.length)throw new Error("salt too small");var p={p2s:a.base64url.encode(f),p2c:h};f=l(e,t,f),c=i(c,{salt:f,iterations:h,length:n});var y=Promise.resolve(o);return y=y.then((function(e){return d[r].derive(e,c)})),y=(y=y.then((function(e){return u[t].encrypt(e,s)}))).then((function(e){return e.header=i(e.header||{},p),e}))}}function p(e,t){var r="PBKDF2-"+e.replace("HS","SHA-"),n=s.KEYLENGTH[t]/8;return function(o,s,c){c=c||{};var f=a.asBuffer(c.p2s||Buffer.alloc(0),"base64url"),h=c.p2c||0;if(0>=h)return Promise.reject(new Error("invalid iteration count"));if(8>f.length)return Promise.reject(new Error("salt too small"));f=l(e,t,f),c=i(c,{salt:f,iterations:h,length:n});var p=Promise.resolve(o);return p=p.then((function(e){return d[r].derive(e,c)})),p=p.then())}}var d={};["PBKDF2-SHA-256","PBKDF2-SHA-384","PBKDF2-SHA-512"].forEach((function(e){var t=e.replace("PBKDF2-","");d[e]={derive:f(t)}})),["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"].forEach((function(e){var t=/PBES2-(HS\d+)\+(A\d+KW)/g.exec(e),r=t[1],n=t[2];d[e]={encrypt:h(r,n),decrypt:p(r,n)}})),e.exports=d},99540:(e,t,r)=>{"use strict";var n=r(55824),i=r(41871),a=r(54095);function o(e,t){var r=t?["n","e"]:["n","e","d","p","q","dp","dq","qi"];return r=r.map((function(t){return new i.jsbn.BigInteger(e[t].toString("hex"),16)})),(t?i.pki.rsa.setPublicKey:i.pki.rsa.setPrivateKey).apply(i.pki.rsa,r)}e.exports={convertToForge:o,convertToJWK:function(e,t){var r=n(e);return(t?["n","e"]:["n","e","d","p","q","dp","dq","qi"]).forEach()),delete r.key_ops,delete r.use,delete r.alg,t&&(delete r.d,delete r.p,delete r.q,delete r.dp,delete r.dq,delete r.qi),r},convertToPem:function(e,t){var r,n=t?"__cachedPublicPem":"__cachedPrivatePem";return e[n]?e[n]:(r=t?i.pki.publicKeyToPem(o(e,t)):i.pki.privateKeyToPem(o(e,t)),Object.defineProperty(e,n,{value:r}),r)}}},35158:(e,t,r)=>{"use strict";var n=r(41871),i=r(41389),a=r(58921),o=r(99540),s={"RSA-OAEP":"RSA_PKCS1_OAEP_PADDING",RSA1_5:"RSA_PKCS1_PADDING"};function u(e){return i.nodeCrypto&&i.nodeCrypto.constants&&-1!==Object.keys(s).indexOf(e)}function c(e){var t={name:e};"RSA-OAEP-256"===e?(t.name="RSA-OAEP",t.hash={name:"SHA-256"}):"RSA-OAEP"===e?t.hash={name:"SHA-1"}:t.name="RSAES-PKCS1-v1_5";var r,c;return r="RSAES-PKCS1-v1_5"!==t.name?function(e,r){return e=o.convertToJWK(e,!0),i.subtleCrypto.importKey("jwk",e,t,!0,["encrypt"]).then((function(e){return i.subtleCrypto.encrypt(t,e,r)})).then())}:null,u(e)&&(c=function(t,r){return t=o.convertToPem(t,!0),{data:i.nodeCrypto.publicEncrypt({key:t,padding:i.nodeCrypto.constants[s[e]]},r)}}),i.setupFallback(c,r,(function(e,r){r=new a(r).bytes();var i=o.convertToForge(e,!0),s={};"RSA-OAEP"===t.name&&(s.md=t.hash.name.toLowerCase().replace(/-/g,""),s.md=n.md[s.md].create());var u=i.encrypt(r,t.name.toUpperCase(),s);return u=new a(u).native(),Promise.resolve({data:u})}))}function l(e){var t={name:e};"RSA-OAEP-256"===e?(t.name="RSA-OAEP",t.hash={name:"SHA-256"}):"RSA-OAEP"===e?t.hash={name:"SHA-1"}:t.name="RSAES-PKCS1-v1_5";var r,c;return r="RSAES-PKCS1-v1_5"!==t.name?function(e,r){return e=o.convertToJWK(e,!1),i.subtleCrypto.importKey("jwk",e,t,!0,["decrypt"]).then((function(e){return i.subtleCrypto.decrypt(t,e,r)})).then())}:null,u(e)?c=function(t,r){return t=o.convertToPem(t,!1),i.nodeCrypto.privateDecrypt({key:t,padding:i.nodeCrypto.constants[s[e]]},r)}:i.nodeCrypto&&"RSA-OAEP"===e&&(c=function(e,t){return e=o.convertToPem(e,!1),i.nodeCrypto.privateDecrypt(e,t)}),i.setupFallback(c,r,(function(e,r){r=new a(r).bytes();var i=o.convertToForge(e,!1),s={};"RSA-OAEP"===t.name&&(s.md=t.hash.name.toLowerCase().replace(/-/g,""),s.md=n.md[s.md].create());var u=i.decrypt(r,t.name.toUpperCase(),s);return u=new a(u).native(),Promise.resolve(u)}))}var f={};["RSA-OAEP","RSA-OAEP-256","RSA1_5"].forEach((function(e){f[e]={encrypt:c(e),decrypt:l(e)}})),e.exports=f},97368:(e,t,r)=>{"use strict";var n=r(41871),i=r(24223),a=r(41389),o=r(99540)function u(e){var t,r=e.replace("RS","SHA").toLowerCase(),i=e.replace("RS","SHA-"),s={name:"RSASSA-PKCS1-V1_5",hash:{name:i}},u="RSA-"+i.replace("-","");return a.nodeCrypto&&a.nodeCrypto.getHashes().indexOf(u)>-1&&(t=function(e,t){var r=a.nodeCrypto.createSign(u);return r.update(t),{data:t,mac:r.sign(o.convertToPem(e,!1))}}),a.setupFallback(t,(function(e,t){return e=o.convertToJWK(e,!1),a.subtleCrypto.importKey("jwk",e,s,!0,["sign"]).then((function(e){return a.subtleCrypto.sign(s,e,t)})).then((function(e){var r=Buffer.from(e);return{data:t,mac:r}}))}),(function(e,t){var i=n.md[r].create();i.start(),i.update(t);var a=o.convertToForge(e,!1).sign(i,"RSASSA-PKCS1-V1_5");return a=Buffer.from(a,"binary"),Promise.resolve({data:t,mac:a})}))}function c(e){var t,r=e.replace("RS","SHA").toLowerCase(),i={name:"RSASSA-PKCS1-V1_5",hash:{name:e.replace("RS","SHA-")}};return a.nodeCrypto&&a.nodeCrypto.getHashes().indexOf(r)>-1&&(t=function(e,t,n){var i=a.nodeCrypto.createVerify(r);return i.update(t),i.end(),i.verify(o.convertToPem(e,!0),n)?{data:t,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))}),a.setupFallback(t,(function(e,t,r){return e=o.convertToJWK(e,!0),a.subtleCrypto.importKey("jwk",e,i,!0,["verify"]).then((function(e){return a.subtleCrypto.verify(i,e,r,t)})).then((function(e){return e?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))}))}),(function(e,t,i){var a=n.md[r].create();a.start(),a.update(t),a=a.digest().bytes();var s=o.convertToForge(e,!0),u=i.toString("binary");return s.verify(a,u,"RSASSA-PKCS1-V1_5")?Promise.resolve({data:t,mac:i,valid:!0}):Promise.reject(new Error("verification failed"))}))}function l(e){var t,r=e.replace("PS","SHA").toLowerCase(),u=e.replace("PS","SHA-"),c={name:"RSA-PSS",hash:{name:u},saltLength:i.HASHLENGTH[u]/8},l="RSA-"+u.replace("-","");return s()&&(t=function(e,t){var r=a.nodeCrypto.createSign(l);return r.update(t),{data:t,mac:r.sign({key:o.convertToPem(e,!1),padding:a.nodeCrypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:a.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST})}}),a.setupFallback(t,(function(e,t){return e=o.convertToJWK(e,!1),a.subtleCrypto.importKey("jwk",e,c,!0,["sign"]).then()).then())}),(function(e,t){var a=n.md[r].create();a.start(),a.update(t);var s=n.pss.create({md:n.md[r].create(),mgf:n.mgf.mgf1.create(n.md[r].create()),saltLength:i.HASHLENGTH[u]/8}),c=o.convertToForge(e,!1).sign(a,s);return c=Buffer.from(c,"binary"),Promise.resolve({data:t,mac:c})}))}function f(e){var t,r=e.replace("PS","SHA").toLowerCase(),u=e.replace("PS","SHA-"),c={name:"RSA-PSS",hash:{name:u},saltLength:i.HASHLENGTH[u]/8};return s()&&(t=function(e,t,n){var i=a.nodeCrypto.createVerify(r);return i.update(t),i.end(),i.verify({key:o.convertToPem(e,!0),padding:a.nodeCrypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:a.nodeCrypto.constants.RSA_PSS_SALTLEN_DIGEST},n)?{data:t,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))}),a.setupFallback(t,(function(e,t,r){return e=o.convertToJWK(e,!0),a.subtleCrypto.importKey("jwk",e,c,!0,["verify"]).then()).then((function(e){return e?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))}))}),(function(e,t,a){var s=n.md[r].create();s.start(),s.update(t),s=s.digest().bytes();var c=n.pss.create({md:n.md[r].create(),mgf:n.mgf.mgf1.create(n.md[r].create()),saltLength:i.HASHLENGTH[u]/8}),l=o.convertToForge(e,!0),f=a.toString("binary");return l.verify(s,f,c)?Promise.resolve({data:t,mac:a,valid:!0}):Promise.reject(new Error("verification failed"))}))}var h={};["PS256","PS384","PS512"].forEach((function(e){h[e]={sign:l(e),verify:f(e)}})),["RS256","RS384","RS512"].forEach((function(e){h[e]={sign:u(e),verify:c(e)}})),e.exports=h},19111:(e,t,r)=>{"use strict";var n=r(41871),i=r(41389);var a={};["SHA-1","SHA-256","SHA-384","SHA-512"].forEach((function(e){var t,r,o;a[e]={digest:(t=e,r=t.replace("SHA-","SHA").toLowerCase(),o={name:t},i.setupFallback((function(e){var t=i.nodeCrypto.createHash(r);return t.update(e),t.digest()}),(function(e){return i.subtleCrypto.digest(o,e).then())}),(function(e){var t=n.md[r].create();return t.update(e.toString("binary")),t=Buffer.from(t.digest().bytes(),"binary"),Promise.resolve(t)})))}})),e.exports=a},67847:(e,t,r)=>{"use strict";var n=r(29168),i=r(78326),a=r(87584),o=3774873600,s=new n(o>>8);var u=e.exports={E1:o,E1B:225,E1L:s,LOOKUP:function(){for(var e=[],t=0;t<256;++t){for(var r=0,n=7;n>=0;--n)0!=(t&1<<n)&&(r^=o>>>7-n);e.push(r)}return e}(),arrayCopy:function(e,t,r,n,i){if(t<0||n<0||i<0)throw new TypeError("Invalid input.");if(r instanceof Uint8Array){if(n>=r.length||n+i>r.length)throw new TypeError("Invalid input.");(0!==t||i<e.length)&&(e=e instanceof Uint8Array?e.subarray(t,t+i):e.slice(t,t+i)),r.set(e,n)}else for(var a=0;a<i;++a)r[n+a]=e[t+a]},arrayEqual:function(e,t){e=e||[],t=t||[];for(var r=Math.min(e.length,t.length),n=e.length===t.length,i=0;i<r;i++)n=n&&void 0!==e[i]&&void 0!==t[i]&&e[i]===t[i];return n},asBytes:function(e,t){switch(arguments.length){case 1:return t=Buffer.alloc(16),a.intToBigEndian(e,t,0),t;case 2:a.intToBigEndian(e,t,0);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},asInts:function(e,t){switch(arguments.length){case 1:return i(t=[],0,0,4),a.bigEndianToInt(e,0,t),t;case 2:a.bigEndianToInt(e,0,t);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},oneAsInts:function(){for(var e=[],t=0;t<4;++t)e.push(1<<31);return e},shiftRight:function(e,t){var r,n;switch(arguments.length){case 1:return r=e[0],e[0]=r>>>1,n=r<<31,r=e[1],e[1]=r>>>1|n,n=r<<31,r=e[2],e[2]=r>>>1|n,n=r<<31,r=e[3],e[3]=r>>>1|n,r<<31&4294967295;case 2:return r=e[0],t[0]=r>>>1,n=r<<31,r=e[1],t[1]=r>>>1|n,n=r<<31,r=e[2],t[2]=r>>>1|n,n=r<<31,r=e[3],t[3]=r>>>1|n,r<<31&4294967295;default:throw new TypeError("Expected 1 or 2 arguments.")}},shiftRightN:function(e,t,r){var n,i,a;switch(arguments.length){case 2:return i=e[0],n=32-t,e[0]=i>>>t,a=i<<n,i=e[1],e[1]=i>>>t|a,a=i<<n,i=e[2],e[2]=i>>>t|a,a=i<<n,i=e[3],e[3]=i>>>t|a,i<<n;case 3:return i=e[0],n=32-t,r[0]=i>>>t,a=i<<n,i=e[1],r[1]=i>>>t|a,a=i<<n,i=e[2],r[2]=i>>>t|a,a=i<<n,i=e[3],r[3]=i>>>t|a,i<<n;default:throw new TypeError("Expected 2 or 3 arguments.")}},xor:function(e,t,r){switch(arguments.length){case 2:e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3];break;case 3:r[0]=e[0]^t[0],r[1]=e[1]^t[1],r[2]=e[2]^t[2],r[3]=e[3]^t[3];break;default:throw new TypeError("Expected 2 or 3 arguments.")}},multiply:function(e,t){for(var r=e.slice(),n=[],i=0;i<4;++i)for(var a=t[i],o=31;o>=0;--o)0!=(a&1<<o)&&u.xor(n,r),0!==u.shiftRight(r)&&(r[0]^=u.E1);u.arrayCopy(n,0,e,0,4)},multiplyP:function(e,t){switch(arguments.length){case 1:0!==u.shiftRight(e)&&(e[0]^=u.E1);break;case 2:0!==u.shiftRight(e,t)&&(t[0]^=u.E1);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},multiplyP8:function(e,t){var r;switch(arguments.length){case 1:r=u.shiftRightN(e,8),e[0]^=u.LOOKUP[r>>>24];break;case 2:r=u.shiftRightN(e,8,t),t[0]^=u.LOOKUP[r>>>24];break;default:throw new TypeError("Expected 1 or 2 arguments.")}}}},80133:(e,t,r)=>{"use strict";var n=r(29168),i=r(41871),a=r(14006),o=r(67847),s=r(87584),u=r(58921),c=r(55970);function l(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=this.blockSize||16}e.exports={createCipher:function(e){var t=new i.aes.Algorithm("AES-GCM",l);return t.initialize({key:new u(e.key)}),t.mode.start(e),t.mode},createDecipher:function(e){var t=new i.aes.Algorithm("AES-GCM",l);return t.initialize({key:new u(e.key)}),t.mode._decrypt=!0,t.mode.start(e),t.mode}},l.prototype.start=function(e){if(this.tag=null,!("iv"in(e=e||{})))throw new Error("Gcm needs ParametersWithIV or AEADParameters");if(this.nonce=e.iv,null==this.nonce||this.nonce.length<1)throw new Error("IV must be at least 1 byte");this.tagLength=16,"tag"in e&&(this.tag=Buffer.from(e.tag));var t=this._decrypt?this.blockSize+this.tagLength:this.blockSize;this.bufBlock=Buffer.alloc(t);var r=e.multiplier;if(null==r&&(r=new a["8k"]),this.multiplier=r,this.H=this.zeroBlock(),c.encrypt(this.cipher,this.H,0,this.H,0),this.multiplier.init(this.H),this.exp=null,this.J0=this.zeroBlock(),12===this.nonce.length)this.nonce.copy(this.J0,0,0,this.nonce.length),this.J0[this.blockSize-1]=1;else{this.gHASH(this.J0,this.nonce,this.nonce.length);var i=this.zeroBlock();s.longToBigEndian(new n(this.nonce.length).multiply(8),i,8),this.gHASHBlock(this.J0,i)}this.S=this.zeroBlock(),this.SAt=this.zeroBlock(),this.SAtPre=this.zeroBlock(),this.atBlock=this.zeroBlock(),this.atBlockPos=0,this.atLength=n.ZERO,this.atLengthPre=n.ZERO,this.counter=Buffer.from(this.J0),this.bufOff=0,this.totalLength=n.ZERO,"additionalData"in e&&this.processAADBytes(e.additionalData,0,e.additionalData.length)},l.prototype.update=function(e,t,r,n,i){for(var a=0;r>0;){var o=Math.min(r,this.bufBlock.length-this.bufOff);e.copy(this.bufBlock,this.bufOff,t,t+o),r-=o,t+=o,this.bufOff+=o,this.bufOff===this.bufBlock.length&&(this.outputBlock(n,i+a),a+=this.blockSize)}return a},l.prototype.finish=function(e,t){var r=0;this._decrypt&&(r+=this.update(this.tag,0,this.tag.length,e,t)),this.totalLength.isZero()&&this.initCipher();var n=this.bufOff;if(this._decrypt){if(n<this.tagLength)throw new Error("data too short");n-=this.tagLength}n>0&&(this.gCTRPartial(this.bufBlock,0,n,e,t+r),r+=n),this.atLength=this.atLength.add(this.atBlockPos);var i=this.zeroBlock();s.longToBigEndian(this.atLength.multiply(8),i,0),s.longToBigEndian(this.totalLength.multiply(8),i,8),this.gHASHBlock(this.S,i);var a=Buffer.alloc(this.blockSize);if(c.encrypt(this.cipher,this.J0,0,a,0),this.xor(a,this.S),this._decrypt){if(!o.arrayEqual(this.tag,a))throw new Error("mac check in Gcm failed")}else this.tag=Buffer.alloc(this.tagLength),a.copy(this.tag,0,0,this.tagLength);return r},l.prototype.initCipher=function(){this.atLength.greaterThan(n.ZERO)&&(this.SAt.copy(this.SAtPre,0,0,this.blockSize),this.atLengthPre=this.atLength.add(n.ZERO)),this.atBlockPos>0&&(this.gHASHPartial(this.SAtPre,this.atBlock,0,this.atBlockPos),this.atLengthPre=this.atLengthPre.add(this.atBlockPos)),this.atLengthPre.greaterThan(n.ZERO)&&this.SAtPre.copy(this.S,0,0,this.blockSize)},l.prototype.outputBlock=function(e,t){this.totalLength.isZero()&&this.initCipher(),this.gCTRBlock(this.bufBlock,e,t),this._decrypt?(this.bufBlock.copy(this.bufBlock,0,this.blockSize,this.blockSize+this.tagLength),this.bufOff=this.tagLength):this.bufOff=0},l.prototype.processAADBytes=function(e,t,r){for(var n=0;n<r;++n)this.atBlock[this.atBlockPos]=e[t+n],++this.atBlockPos===this.blockSize&&(this.gHASHBlock(this.SAt,this.atBlock),this.atBlockPos=0,this.atLength=this.atLength.add(this.blockSize))},l.prototype.getNextCounterBlock=function(){for(var e=15;e>=12;--e){var t=this.counter[e]+1&255;if(this.counter[e]=t,0!==t)break}var r=Buffer.alloc(this.blockSize);return c.encrypt(this.cipher,this.counter,0,r,0),r},l.prototype.gCTRBlock=function(e,t,r){var n=this.getNextCounterBlock();this.xor(n,e),n.copy(t,r,0,this.blockSize),this.gHASHBlock(this.S,this._decrypt?e:n),this.totalLength=this.totalLength.add(this.blockSize)},l.prototype.gCTRPartial=function(e,t,r,n,i){var a=this.getNextCounterBlock();this.xor(a,e,t,r),a.copy(n,i,0,r),this.gHASHPartial(this.S,this._decrypt?e:a,0,r),this.totalLength=this.totalLength.add(r)},l.prototype.gHASHBlock,l.prototype.gHASHPartial=function(e,t,r,n){this.xor(e,t,r,n),this.multiplier.multiplyH(e)},l.prototype.xor=function(e,t,r,n){switch(arguments.length){case 2:for(var i=15;i>=0;--i)e[i]^=t[i];break;case 4:for(;n-- >0;)e[n]^=t[r+n];break;default:throw new TypeError("Expected 2 or 4 arguments.")}return e},l.prototype.zeroBlock},14006:(e,t,r)=>{"use strict";var n=r(67847),i=r(87584)a.prototype.init=function(e){var t,r,i;if(null==this.M)for(this.M=[],t=0;t<32;++t)for(this.M[t]=[],r=0;r<16;++r)for(this.M[t][r]=[],i=0;i<4;++i)this.M[t][r][i]=0;else if(n.arrayEqual(this.H,e))return;for(this.H=e.slice(),n.asInts(e,this.M[1][8]),r=4;r>=1;r>>=1)n.multiplyP(this.M[1][r+r],this.M[1][r]);for(n.multiplyP(this.M[1][1],this.M[0][8]),r=4;r>=1;r>>=1)n.multiplyP(this.M[0][r+r],this.M[0][r]);for(t=0;;){for(r=2;r<16;r+=r)for(i=1;i<r;++i)n.xor(this.M[t][r],this.M[t][i],this.M[t][r+i]);if(32==++t)return;if(t>1)for(r=8;r>0;r>>=1)n.multiplyP8(this.M[t-2][r],this.M[t][r])}},a.prototype.multiplyH=function(e){for(var t=[],r=15;r>=0;--r){var n=this.M[r+r][15&e[r]];t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],n=this.M[r+r+1][(240&e[r])>>>4],t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3]}i.intToBigEndian(t,e,0)},e.exports={"8k":a}},55970:(e,t,r)=>{"use strict";var n=r(87584);e.exports={encrypt:function(e,t,r,i,a){var o=new Array(4),s=new Array(4);n.bigEndianToInt(t,r,o),e.encrypt(o,s),n.intToBigEndian(s,i,a)}}},87584:(e,t,r)=>{"use strict";var n=r(29168),i=e.exports={intToBigEndian:function(e,t,r){if("number"==typeof e)switch(arguments.length){case 1:t=Buffer.alloc(4),i.intToBigEndian(e,t,0);break;case 3:t[r]=255&e>>>24,t[++r]=255&e>>>16,t[++r]=255&e>>>8,t[++r]=255&e;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:t=Buffer.alloc(4*e.length),i.intToBigEndian(e,t,0);break;case 3:for(var n=0;n<e.length;++n)i.intToBigEndian(e[n],t,r),r+=4;break;default:throw new TypeError("Expected 1 or 3 arguments.")}return t},longToBigEndian:function(e,t,r){if(Array.isArray(e))switch(arguments.length){case 1:t=Buffer.alloc(8*e.length),i.longToBigEndian(e,t,0);break;case 3:for(var n=0;n<e.length;++n)i.longToBigEndian(e[n],t,r),r+=8;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:t=Buffer.alloc(8),i.longToBigEndian(e,t,0);break;case 3:var a=e.low,o=e.high;i.intToBigEndian(o,t,r),i.intToBigEndian(a,t,r+4);break;default:throw new TypeError("Expected 1 or 3 arguments.")}return t},bigEndianToInt:function(e,t,r){switch(arguments.length){case 2:var n=e[t]<<24;return n|=(255&e[++t])<<16,n|=(255&e[++t])<<8,n|=255&e[++t];case 3:for(var a=0;a<r.length;++a)r[a]=i.bigEndianToInt(e,t),t+=4;break;default:throw new TypeError("Expected 2 or 3 arguments.")}},bigEndianToLong:function(e,t,r){switch(arguments.length){case 2:var a=i.bigEndianToInt(e,t),o=i.bigEndianToInt(e,t+4);return new n(o,a);case 3:for(var s=0;s<r.length;++s)r[s]=i.bigEndianToLong(e,t),t+=8;break;default:throw new TypeError("Expected 2 or 3 arguments.")}}}},1841:(e,t,r)=>{"use strict";var n=r(41871).jsbn.BigInteger,i=r(82341)function o(e){return new n(e,16)}a.prototype.getCurve=function(){return this.curve},a.prototype.getG=function(){return this.g},a.prototype.getN=function(){return this.n},a.prototype.getH=function(){return this.h};var s,u,c,l,f,h,p,d=e.exports={secp256r1:(s=o("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),u=o("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),c=o("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),l=o("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),f=n.ONE,h=new i.ECCurveFp(s,u,c),p=h.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5"),new a(h,p,l,f)),secp384r1:function(){var e=o("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF"),t=o("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC"),r=o("B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF"),s=o("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973"),u=n.ONE,c=new i.ECCurveFp(e,t,r),l=c.decodePointHex("04AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB73617DE4A96262C6F5D9E98BF9292DC29F8F41DBD289A147CE9DA3113B5F0B8C00A60B1CE1D7E819D7A431D7C90EA0E5F");return new a(c,l,s,u)}(),secp521r1:function(){var e=o("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),t=o("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC"),r=o("0051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00"),s=o("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409"),u=n.ONE,c=new i.ECCurveFp(e,t,r),l=c.decodePointHex("0400C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66011839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650");return new a(c,l,s,u)}()};d["P-256"]=d.secp256r1,d["P-384"]=d.secp384r1,d["P-521"]=d.secp521r1},13326:(e,t,r)=>{"use strict";var n=r(41871),i=n.jsbn.BigInteger,a=r(82341),o=r(1841)function u(e,t){t||(t=Math.ceil(e.bitLength()/8)),t*=2;var r=e.toString(16);for(r=r.substring(Math.max(r.length-t,0));t>r.length;)r="0"+r;return Buffer.from(r,"hex")}function c(e){return"string"==typeof e&&(e=Buffer.from(e,"binary")),s(e.toString("hex"))}function l(e){return Math.ceil(e.getN().bitLength()/8)function h(e,t){var r=e.getN().bitLength(),n=8*t.length,i=c(t);return r<n&&(i=i.shiftRight(n-r)),i}function p(e,t,r){var n=f(e),i=n.getCurve(),o=new a.ECPointFp(i,i.fromBigInteger(t),i.fromBigInteger(r));this.curve=e,this.params=n,this.point=o;var s=l(n);this.x=u(t,s),this.y=u(r,s)}function d(e,t){var r=f(e);this.curve=e,this.params=r;var n=l(r);this.d=u(t,n)}p.prototype.isValid,p.prototype.verify=function(e,t){var r=this.params.getN(),n=this.params.getG(),a=c(t.r),o=c(t.s);if(a.compareTo(i.ONE)<0||a.compareTo(r)>=0)return!1;if(o.compareTo(i.ONE)<0||a.compareTo(r)>=0)return!1;var s=h(this.params,e),u=o.modInverse(r),l=s.multiply(u).mod(r),f=a.multiply(u).mod(r),p=n.multiplyTwo(l,this.point,f).getX().toBigInteger();return(p=p.mod(r)).equals(a)},d.prototype.toPublicKey=function(){var e=c(this.d),t=this.params.getG().multiply(e);return new p(this.curve,t.getX().toBigInteger(),t.getY().toBigInteger())},d.prototype.sign=function(e){var t,r,a,o,s=l(this.params),f=this.params.getN(),p=this.params.getG(),d=h(this.params,e),y=c(this.d);do{do{do{a=c(n.random.getBytes(s))}while(a.equals(i.ZERO)||a.compareTo(f)>=0);t=p.multiply(a).getX().toBigInteger().mod(f)}while(t.equals(i.ZERO));o=y.multiply(t),o=d.add(o),r=a.modInverse(f).multiply(o).mod(f)}while(r.equals(i.ONE));var v=l(this.params);return{r:t=u(t,v),s:r=u(r,v)}},d.prototype.isValid=function(){var e=c(this.d),t=this.params.getN().subtract(i.ONE);return e.compareTo(i.ONE)>=0&&e.compareTo(t)<0},d.prototype.computeSecret=function(e){var t=c(this.d),r=e.point.multiply(t).getX().toBigInteger();return r=u(r,l(this.params))},t.generateKeyPair=function(e){var t=f(e),r=t.getN(),a=n.random.getBytes(l(t));a=c(a);var o=r.subtract(i.ONE),s=new d(e,a.mod(o).add(i.ONE)),u=s.toPublicKey();return{private:s,public:u}},t.asPublicKey=function(e,t,r){return"string"==typeof t?t=s(t):Buffer.isBuffer(t)&&(t=c(t)),"string"==typeof r?r=s(r):Buffer.isBuffer(r)&&(r=c(r)),new p(e,t,r)},t.asPrivateKey=function(e,t){return"string"==typeof t?t=s(t):Buffer.isBuffer(t)&&(t=c(t)),new d(e,t)}},82341:(e,t,r)=>{"use strict";var n=r(41871).jsbn.BigIntegernction s(e,t,r,i){this.curve=e,this.x=t,this.y=r,this.z=i||n.ONE,this.zinv=nulla.prototype.convert,a.prototype.revert,a.prototype.reduce,a.prototype.mulTo,a.prototype.sqrTo,o.prototype.equals=function(e){return e===this||this.p.equals(e.p)&&this.x.equals(e.x)},o.prototype.toBigInteger=function(){return this.x},o.prototype.negate,o.prototype.add=function(e){return new o(this.p,this.x.add(e.toBigInteger()).mod(this.p))},o.prototype.subtract=function(e){return new o(this.p,this.x.subtract(e.toBigInteger()).mod(this.p))},o.prototype.multiply,o.prototype.square=function(){return new o(this.p,this.x.pow(2).mod(this.p))},o.prototype.divide,s.prototype.getX=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},s.prototype.getY=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},s.prototype.equals=function(e){return e===this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p).equals(n.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p).equals(n.ZERO))},s.prototype.isInfinity,s.prototype.negate,s.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p);if(n.ZERO.equals(r))return n.ZERO.equals(t)?this.twice():this.curve.getInfinity();var i=new n("3"),a=this.x.toBigInteger(),o=this.y.toBigInteger(),u=r.pow(2),c=u.multiply(r),l=a.multiply(u),f=t.pow(2).multiply(this.z),h=f.subtract(l.shiftLeft(1)).multiply(e.z).subtract(c).multiply(r).mod(this.curve.p),p=l.multiply(i).multiply(t).subtract(o.multiply(c)).subtract(f.multiply(t)).multiply(e.z).add(t.multiply(c)).mod(this.curve.p),d=c.multiply(this.z).multiply(e.z).mod(this.curve.p);return new s(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(p),d)},s.prototype.twice=function(){if(this.isInfinity())return this;if(0===this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new n("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),i=r.multiply(this.z),a=i.multiply(r).mod(this.curve.p),o=this.curve.a.toBigInteger(),u=t.pow(2).multiply(e);n.ZERO.equals(o)||(u=u.add(this.z.pow(2).multiply(o)));var c=(u=u.mod(this.curve.p)).pow(2).subtract(t.shiftLeft(3).multiply(a)).shiftLeft(1).multiply(i).mod(this.curve.p),l=u.multiply(e).multiply(t).subtract(a.shiftLeft(1)).shiftLeft(2).multiply(a).subtract(u.pow(2).multiply(u)).mod(this.curve.p),f=i.pow(2).multiply(i).shiftLeft(3).mod(this.curve.p);return new s(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(l),f)},s.prototype.multiply=function(e){if(this.isInfinity())return this;if(0===e.signum())return this.curve.getInfinity();var t,r=e,i=r.multiply(new n("3")),a=this.negate(),o=this;for(t=i.bitLength()-2;t>0;--t){o=o.twice();var s=i.testBit(t);s!==r.testBit(t)&&(o=o.add(s?this:a))}return o},s.prototype.multiplyTwo,u.prototype.getP=function(){return this.p},u.prototype.getA=function(){return this.a},u.prototype.getB=function(){return this.b},u.prototype.equals=function(e){return e===this||this.p.equals(e.p)&&this.a.equals(e.a)&&this.b.equals(e.b)},u.prototype.contains=function(e){var t=e.getX().toBigInteger(),r=e.getY().toBigInteger(),n=this.a.toBigInteger(),i=this.b.toBigInteger(),a=this.p,o=r.pow(2).mod(a),s=t.pow(3).add(n.multiply(t)).add(i).mod(a);return o.equals(s)},u.prototype.getInfinity,u.prototype.fromBigInteger,u.prototype.reduce,u.prototype.decodePointHex,u.prototype.encodePointHex,e.exports={ECFieldElementFp:o,ECPointFp:s,ECCurveFp:u}},41871:(e,t,r)=>{"use strict";var n,i,a=r(9928);function o(e){e=e||{},this.name="",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)}r(52069),r(21569),r(17031),r(35029),r(5541),r(17577),r(81926),r(33164),r(85776),r(33717),r(19947),r(60398),r(57969),r(62185),r(39738),r(323),r(63389),r(41031),o.prototype.start,o.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;var n;for(n=0;n<this._blocks;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)t.putInt32(this._outBlock[n])},o.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;var n;for(n=0;n<this._blocks;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)t.putInt32(this._outBlock[n])},i=o,n=function(){return new a.aes.Algorithm("AES",i)},a.cipher.registerAlgorithm("AES",n),e.exports=a},74151:(e,t,r)=>{"use strict";"undefined"==typeof Promise&&r(32434).polyfill(),"undefined"==typeof Buffer&&((r.g||window).Buffer=r(91620).lW),"undefined"==typeof process&&((r.g||window).process=r(14224)),process.version||(process.version="");var n=r(72239);e.exports={JWA:r(12122),JWE:r(56750),JWK:r(30018),JWS:n,util:r(54095),parse:r(87014),canYouSee:n.createVerify}},84994:(e,t,r)=>{"use strict";var n=r(54157),i=r(24394),a=r(30018),o=r(25050),s=r(26230),u={algorithms:"*"};function c(e,t){var r,c;if(a.isKey(e))c=(r=e).keystore;else{if(!a.isKeyStore(e))throw new TypeError("Keystore must be provided");c=e}t=o(u,t),Object.defineProperty(this,"decrypt",{value:function(e,u){var l,f=(u=o({},t,u||{})).handlers||{},h=Object.keys(f),p=new i(u.algorithms);if("string"==typeof e)e={protected:(e=e.split("."))[0],recipients:[{encrypted_key:e[1]}],iv:e[2],ciphertext:e[3],tag:e[4]};else if(!e||"object"!=typeof e)throw new Error("invalid input");"encrypted_key"in e&&(e.recipients=[{encrypted_key:e.encrypted_key}]);var d,y,v,g,m,S=e.recipients||[{}];return l=(l=Promise.resolve(S)).then((function(t){if(e.protected){y=n.decode(e.protected).toString("utf8");var r=(y=JSON.parse(y)).crit;if(r){if(!Array.isArray(r))return Promise.reject(new Error("Invalid 'crit' header"));for(var i=0;r.length>i;i++)if(-1===h.indexOf(r[i]))return Promise.reject(new Error("Critical extension is not supported: "+r[i]))}d=y,y=Object.keys(y)}else d={},y=[];return d=o(e.unprotected||{},d),t=t.map((function(e){var t=Promise.resolve(),r=e.header||{};return r=o(r,d),e.header=r,e.protected=y,p.match(r.alg)||(t=t.then((function(){return Promise.reject(new Error("Algorithm not allowed: "+r.alg))}))),p.match(r.enc)||(t=t.then((function(){return Promise.reject(new Error("Algorithm not allowed: "+r.enc))}))),r.epk&&(t=(t=t.then())).then())),t.then((function(){return e}))})),Promise.all(t)})),l=l.then((function(e){var t={};return new Promise((function(i,o){var s=function(){var u=e.shift();if(u){var l=Promise.resolve(u);l=l.then((function(e){var t=m=e.encrypted_key||"";return t=n.decode(t),(v=r||c.get({use:"enc",alg:e.header.alg,kid:e.header.kid}))?v.unwrap(e.header.alg,t,e.header):Promise.reject()})),(l=l.then((function(e){g={kty:"oct",k:n.encode(e)},g=a.asKey(g),t.key=v,t.header=u.header,t.protected=u.protected,i(t)}))).catch(s)}else o(new Error("no key found"))};s()}))})),l=(l=(l=(l=(l=(l=l.then())).then((function(e){var t=[];return h.forEach((function(r){var n;"function"==typeof(r=f[r])?n=r(e):"object"==typeof r&&"function"==typeof r.prepare&&(n=r.prepare(e)),n&&t.push(Promise.resolve(n))})),Promise.all(t).then((function(){return e}))}))).then((function(e){return Buffer.isBuffer(e.ciphertext)||(e.ciphertext=n.decode(e.ciphertext)),e}))).then((function(t){var r=e.protected;"aad"in e&&null!=e.aad&&(r+="."+e.aad);var n={iv:t.iv,adata:r,tag:t.tag,kdata:m,epu:t.epu,epv:t.epv},i=t.ciphertext;return delete t.iv,delete t.tag,delete t.ciphertext,g.then((function(e){return e.decrypt(t.header.enc,i,n).then((function(e){return t.payload=t.plaintext=e,t}))}))}))).then((function(e){return"DEF"===e.header.zip?new Promise((function(t,r){try{var n=s.inflateRaw(Buffer.from(e.plaintext));e.payload=e.plaintext=Buffer.from(n),t(e)}catch(e){r(e)}})):e}))).then((function(e){var t=[];return h.forEach((function(r){var n;"object"==typeof(r=f[r])&&"function"==typeof r.complete&&(n=r.complete(e)),n&&t.push(Promise.resolve(n))})),Promise.all(t).then((function(){return e}))}))}})}e.exports={decrypter:c,createDecrypt}},65414:e=>{"use strict";e.exports={zip:!1,format:"general",contentAlg:"A128CBC-HS256",protect:"*"}},52062:(e,t,r)=>{"use strict";var n=r(54095),i=r(85902).generateCEK,a=r(30018),o=r(85902).slice,s=r(26230),u=r(24223),c=r(72072),l=r(55824),f=r(65414);function h(e,t,r){var o=!1,f=e.format||"general",h=!!e.protectAll,p=Buffer.alloc(0);Object.defineProperty(this,"zip",{get,enumerable:!0}),Object.defineProperty(this,"compact",{get,enumerable:!0}),Object.defineProperty(this,"format",{get,enumerable:!0}),Object.defineProperty(this,"protected",{get,enumerable:!0}),Object.defineProperty(this,"header",{get,enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(o)throw new Error("already final");return null!=e&&(e=n.asBuffer(e,t),p=p.length?Buffer.concat([p,e],p.length+e.length):e),this}}),Object.defineProperty(this,"final",{value:function(d,y){if(o)return Promise.reject(new Error("already final"));this.update(d,y),o=!0;var v,g=Promise.resolve({}),m=t.enc;g=(g=g.then((function(t){return e.cek&&(v=a.asKey(e.cek)),t}))).then((function(o){var s=Promise.all(r);return s=s.then((function(r){var o=1===r.length;return r=r.map((function(r){return function(r,o){var s={};s=c(s,t),s=c(s,r.header);var u,f,h=r.key,p=s.alg;return 0===(s.alg||"").indexOf("ECDH-ES")?(u=h.keystore.temp(),f=r.epk?Promise.resolve(r.epk).then((function(e){r.header.epk=e.toJSON(!1,["kid"]),s.epk=e.toObject(!0,["kid"])})):u.generate("EC",h.get("crv")).then((function(e){r.header.epk=e.toJSON(!1,["kid"]),s.epk=e.toObject(!0,["kid"])}))):f=Promise.resolve(),f=f.then((function(){var r,n;return"dir"===p&&o?n=(v=Promise.resolve(h)).then((function(e){return m||(s.enc=t.enc=m=e.algorithms(a.MODE_ENCRYPT)[0]),{once:!0,direct:!0}})):(v||(m||(s.enc=t.enc=m=e.contentAlg),v=i(m)),n=(n=v.then((function(e){return r=e.get("k",!0),h}))).then())),n})),f.then((function(e){if(e.once&&!o)return Promise.reject(new Error("cannot use 'alg':'"+p+"' with multiple recipients"));var t,i={};return e.data&&(t=e.data,t=n.base64url.encode(t)),e.direct&&t?v=a.asKey({kty:"oct",k:t}):t&&(i.encrypted_key=t),r.header&&Object.keys(r.header).length&&(i.header=l(r.header||{})),e.header&&(i.header=c(i.header||{},e.header)),i}))}(r,o)})),Promise.all(r)})),s=s.then((function(e){return o.recipients=e.filter()),o}))}));var S={};switch(g=(g=g.then((function(r){var i,a,o,s;return o=l(t),h&&1===r.recipients.length||"compact"===f?(i={},i=c({},o,r.recipients[0].header),a=Object.keys(i).length,o=void 0,s=0,delete r.recipients[0].header,0===Object.keys(r.recipients[0]).length&&r.recipients.splice(0,1)):(i={},a=0,s=Object.keys(o).length,e.protect.forEach((function(e){e in o&&(i[e]=o[e],a++,delete o[e],s--)})),r.recipients=(r.recipients||[]).map((function(e){var t=(e=e||{}).header;return t&&(Object.keys(t).forEach()),Object.keys(t).length||delete e.header),e}))),r.recipients&&0!==r.recipients.length||delete r.recipients,o&&s>0&&(S=c(S,o),r.unprotected=o),i&&a>0&&(S=c(S,i),i=JSON.stringify(i),r.protected=n.base64url.encode(i,"utf8")),r}))).then((function(e){var t=p;return S.zip?"DEF"===S.zip?new Promise((function(r,n){try{var i=s.deflateRaw(Buffer.from(t,"binary"));e.plaintext=Buffer.from(i),r(e)}catch(e){n(e)}})):Promise.reject(new Error("unsupported 'zip' mode")):(e.plaintext=t,e)})),g=g.then((function(t){S.adata=t.protected,"aad"in e&&null!=e.aad&&(S.adata+="."+e.aad,S.adata=Buffer.from(S.adata,"utf8"));var r=e.iv||n.randomBytes(u.NONCELENGTH[m]/8);"string"==typeof r&&(r=n.base64url.decode(r)),S.iv=r,"recipients"in t&&1===t.recipients.length&&(S.kdata=t.recipients[0].encrypted_key),"epu"in e&&null!=e.epu&&(S.epu=e.epu),"epv"in e&&null!=e.epv&&(S.epv=e.epv);var i=t.plaintext;return delete t.plaintext,v.then((function(a){var o=a.encrypt(m,i,S);return o=o.then((function(i){return t.iv=n.base64url.encode(r,"binary"),"aad"in e&&null!=e.aad&&(t.aad=e.aad),t.ciphertext=n.base64url.encode(i.data,"binary"),t.tag=n.base64url.encode(i.tag,"binary"),t}))}))})),f){case"compact":g=g.then((function(e){var t=new Array(5);return t[0]=e.protected,e.recipients&&e.recipients[0]&&(t[1]=e.recipients[0].encrypted_key),t[2]=e.iv,t[3]=e.ciphertext,t[4]=e.tag,t=t.join(".")}));break;case"flattened":g=g.then((function(e){var t={},r=e.recipients&&e.recipients[0];return e.protected&&(t.protected=e.protected),e.unprotected&&(t.unprotected=e.unprotected),["header","encrypted_key"].forEach((function(e){r&&e in r&&r[e]&&("object"!=typeof r[e]||Object.keys(r[e]).length)&&(t[e]=r[e])})),e.aad&&(t.aad=e.aad),t.iv=e.iv,t.ciphertext=e.ciphertext,t.tag=e.tag,t}));break;case"general":g=g.then((function(e){var t=e.recipients||[];return(t=(t=t.map((function(e){if(Object.keys(e).length)return e}))).filter((function(e){return!!e}))).length?e.recipients=t:delete e.recipients,e}))}return g}})}e.exports={encrypter:h,createEncrypt:function(e,t){var r=e,i=1,s=t;if(0===arguments.length)throw new Error("at least one recipient must be provided");1===arguments.length||a.isKey(e)||e&&"kty"in e||e&&"key"in e&&(a.isKey(e.key)||"kty"in e.key)?(s=e,i=0,r={}):r=l(e),Array.isArray(s)||(s=o(arguments,i)),r=c(l(f),r);var u=l(r.fields||{});switch(r.zip&&(u.zip="boolean"==typeof r.zip?!!r.zip&&"DEF":r.zip),r.format=(r.compact?"compact":r.format)||"general",r.format){case"compact":if("aad"in e)throw new Error("additional authenticated data cannot be used for compact serialization");case"flattened":if(s.length>1)throw new Error("too many recipients for compact serialization")}var p=!1;if("compact"===r.format||"*"===r.protect)p=!0,r.protect=Object.keys(u).concat("enc");else if("string"==typeof r.protect)r.protect=[r.protect];else if(Array.isArray(r.protect))r.protect=r.protect.concat();else{if(r.protect)throw new Error("protect must be a list of fields");r.protect=[]}if(p&&1<s.length)throw new Error("too many recipients to protect all header parameters");return s=s.map((function(e,t){var r;return r=e&&"kty"in e?(r=a.asKey(e)).then((function(e){return{key:e}})):e?(r=a.asKey(e.key)).then()):Promise.reject(new Error("missing key for recipient "+t)),e.epk&&(r=r.then((function(t){return a.asKey(e.epk).then())}))),r=r.then((function(e){var r=e.key,n=e.header||{};e.header=n;var i={};if(i=c(i,u),(i=c(i,e.header)).alg||(i.alg=r.algorithms(a.MODE_WRAP)[0],n.alg=i.alg),!i.alg)return Promise.reject(new Error("key not valid for encrypting to recipient "+t));n.alg=i.alg;var o,s=e.reference;if(delete e.reference,void 0===s?s=(s=["kid","jku","x5c","x5t","x5u"].some((function(e){return e in n})))?null:"kid":"boolean"==typeof s&&(s=s?"kid":null),s)if(o=r.toJSON(),"jwk"===s){if("oct"===r.kty)return Promise.reject(new Error("cannot embed key"));n.jwk=o}else s in o&&(n[s]=o[s]);return e=Object.freeze(e)}))})),new h({aad:"aad"in r?n.base64url.encode(r.aad||""):null,contentAlg:r.contentAlg,format:r.format,protect:r.protect,cek:r.cek,iv:r.iv,protectAll:p},u,s)}}},85902:(e,t,r)=>{"use strict";var n=r(24223),i=r(30018);e.exports={slice:function(e,t){return Array.prototype.slice.call(e,t||0)},generateCEK:function(e){var t=i.createKeyStore(),r=n.KEYLENGTH[e];if(r)return t.generate("oct",r);throw new Error("unsupported encryption algorithm")}}},56750:(e,t,r)=>{"use strict";var n={createEncrypt:r(52062).createEncrypt,createDecrypt:r(84994).createDecrypt};e.exports=n},25427:(e,t,r)=>{"use strict";var n=r(25050),i=r(92674),a=r(72072),o=r(55824),s=r(22612),u=r(25956),c=r(59245),l=r(19334),f=r(4363),h=r(12122),p=r(30777),d=r(72746),y=r(54095);e.exports=function(e,t,r,v){if(!e)throw new Error("kty cannot be null");if(!t)throw new Error("keystore cannot be null");if(!r)throw new Error("props cannot be null");if("string"==typeof r&&(r=JSON.parse(r)),!v)throw new Error("cfg cannot be null");var g,m,S=[],b={},E={};r=o(r),g=a({},r[d.INTERNALS.THUMBPRINT_KEY]||{}),delete r[d.INTERNALS.THUMBPRINT_KEY],Object.keys(g).forEach((function(e){var t=g[e];m||(m=t,Buffer.isBuffer(m)&&(m=y.base64url.encode(m))),Buffer.isBuffer(t)||(t=y.base64url.decode(t),g[e]=t)})),r.kty=e,r.kid=r.kid||m||i();var C,A=Object.keys(d.COMMON_PROPS).map());E.base=l(r,A),S=S.concat(Object.keys(E.base)),E.public=o(r),b.public=v.publicKey(E.public),b.public&&(S=S.concat(Object.keys(E.public))),E.private=o(r),b.private=v.privateKey(E.private),b.private&&(S=S.concat(Object.keys(E.private))),E.extra=c(r,S),C=b.public&&"length"in b.public?b.public.length:b.private&&"length"in b.private?b.private.length:NaN,Object.defineProperty(this,"keystore",{value:t,enumerable:!0}),Object.defineProperty(this,"length",{value:C,enumerable:!0}),Object.defineProperty(this,"kty",{value:e,enumerable:!0}),Object.defineProperty(this,"kid",{value:E.base.kid,enumerable:!0}),Object.defineProperty(this,"use",{value:E.base.use||"",enumerable:!0}),Object.defineProperty(this,"alg",{value:E.base.alg||"",enumerable:!0}),Object.defineProperty(this,"thumbprint",{value:function(e){if(e=(e||d.INTERNALS.THUMBPRINT_HASH).toUpperCase(),g[e])return Promise.resolve(g[e]);var t=d.thumbprint(v,E,e);return t=t.then())}}),Object.defineProperty(this,"algorithms",{value:function(t){var r=[];this.use&&"sig"!==this.use||(t&&p.MODE_SIGN!==t||r.push(p.MODE_SIGN),t&&p.MODE_VERIFY!==t||r.push(p.MODE_VERIFY)),this.use&&"enc"!==this.use||(t&&p.MODE_ENCRYPT!==t||r.push(p.MODE_ENCRYPT),t&&p.MODE_DECRYPT!==t||r.push(p.MODE_DECRYPT),t&&p.MODE_WRAP!==t||r.push(p.MODE_WRAP),t&&p.MODE_UNWRAP!==t||r.push(p.MODE_UNWRAP));var n,i=this,a=r.map((function(e){return v.algorithms.call(i,b,e)}));(a=s(a),a=f(a),this.alg)&&(n="oct"===e?[this.alg,"dir"]:[this.alg],a=u(a,n));return a}}),Object.defineProperty(this,"supports",{value:function(e,t){return-1!==this.algorithms(t).indexOf(e)}}),Object.defineProperty(this,"has",{value:function(e,t){var r=!1;return r=(r=(r=(r=r||!(!E.base||!(e in E.base)))||!(!b.public||!(e in b.public)))||!(!E.extra||!(e in E.extra)))||!!(t&&b.private&&e in b.private)}}),Object.defineProperty(this,"get",{value:function(e,t){var r;return E.base&&e in E.base?r=E.base:b.public&&e in b.public?r=b.public:E.extra&&e in E.extra?r=E.extra:t&&b.private&&e in b.private&&(r=b.private),r&&r[e]||null}}),Object.defineProperty(this,"toJSON",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var r={};return r=n(r,E.base,E.public,"boolean"==typeof e&&e?E.private:{},E.extra),r=c(r,t||[])}}),Object.defineProperty(this,"toPEM",{value:function(e){if(null===e&&(e=!1),!v.convertToPEM)throw new Error("Unsupported key type for PEM encoding");var t=e?b.private:b.public;if(!t)throw new Error("Invalid key");return v.convertToPEM.call(this,t,e)}}),Object.defineProperty(this,"toObject",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var r={};return r=n(r,E.base,b.public,"boolean"==typeof e&&e?b.private:{},E.extra),r=c(r,(t||[]).concat("length"))}}),Object.defineProperty(this,"sign",{value:function(e,t,r){if(-1===this.algorithms("sign").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=v.signKey.call(this,e,b);return i?(r=r?o(r):{},v.signProps&&(r=n(r,v.signProps.call(this,e,r))),h.sign(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"verify",{value:function(e,t,r,i){if(-1===this.algorithms("verify").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var a=v.verifyKey.call(this,e,b);return a?(i=i?o(i):{},v.verifyProps&&(i=n(i,v.verifyProps.call(this,e,i))),h.verify(e,a,t,r,i)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"encrypt",{value:function(e,t,r){if(-1===this.algorithms("encrypt").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=v.encryptKey.call(this,e,b);return i?(r=r?o(r):{},v.encryptProps&&(r=n(r,v.encryptProps.call(this,e,r))),h.encrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"decrypt",{value:function(e,t,r){if(-1===this.algorithms("decrypt").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=v.decryptKey.call(this,e,b);return i?(r=r?o(r):{},v.decryptProps&&(r=n(r,v.decryptProps.call(this,e,r))),h.decrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"wrap",{value:function(e,t,r){if(-1===this.algorithms("wrap").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=v.wrapKey.call(this,e,b);return i?(r=r?o(r):{},v.wrapProps&&(r=n(r,v.wrapProps.call(this,e,r))),h.encrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"unwrap",{value:function(e,t,r){if(-1===this.algorithms("unwrap").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=v.unwrapKey.call(this,e,b);return i?(r=r?o(r):{},v.unwrapProps&&(r=n(r,v.unwrapProps.call(this,e,r))),h.decrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}})}},30777:e=>{"use strict";e.exports={MODE_SIGN:"sign",MODE_VERIFY:"verify",MODE_ENCRYPT:"encrypt",MODE_DECRYPT:"decrypt",MODE_WRAP:"wrap",MODE_UNWRAP:"unwrap"}},27149:(e,t,r)=>{"use strict";var n=r(14932),i=r(41871),a=r(13326),o={BaseKey:r(25427),helpers:r(72746)},s=["ES256","ES384","ES512"],u=["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"],c=n.EC_OIDvar f={publicKey:function(e){var t=o.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"}]),r=o.helpers.unpackProps(e,t);return r&&r.crv&&r.x&&r.y?r.length=n.curveSize(r.crv):(delete r.crv,delete r.x,delete r.y),r},privateKey:function(e){var t=o.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"},{name:"d",type:"binary"}]),r=o.helpers.unpackProps(e,t);return r&&r.crv&&r.x&&r.y&&r.d?r.length=n.curveSize(r.crv):r=void 0,r},thumbprint:function(e){return e.public&&(e=e.public),{crv:e.crv,kty:"EC",x:e.x,y:e.y}},algorithms:function(e,t){var r=e.public&&e.public.length||e.private&&e.private.length||0;switch(521===r&&(r=512),t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&u||[];case"unwrap":return e.private&&u||[];case"sign":return e.private?s.filter((function(e){return e==="ES"+r})):[];case"verify":return e.public?s.filter((function(e){return e==="ES"+r})):[]}},encryptKey:function(e,t){return t.public},decryptKey:function(e,t){return t.private},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public}};f.convertToPEM=n.convertToPEM;var h={oid:c,privateKey:{name:"ECPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{tagClass:i.asn1.Class.CONTEXT_SPECIFIC,name:"ECPrivateKey.parameters",constructed:!0,value:[{name:"ECPrivateKey.namedCurve",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OID,constructed:!1,capture:"crv"}]},{name:"ECPrivateKey.publicKey",tagClass:i.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]},embeddedPrivateKey:{name:"ECPrivateKey",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{name:"ECPrivateKey.publicKey",tagClass:i.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:i.asn1.Class.UNIVERSAL,type:i.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]}},p={kty:"EC",validators:h,prepare:function(e){var t=f,r=Promise.resolve(e);return r=(r=r.then((function(e){return o.helpers.thumbprint(t,e)}))).then((function(r){var n={};return n[o.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[o.helpers.INTERNALS.THUMBPRINT_KEY]=n,t}))},generate:function(e){var t=a.generateKeyPair(e),r={crv:e,x:t.public.x,y:t.public.y,d:t.private.d};return Promise.resolve(r)},import:function(e){if(h.oid!==e.keyOid)return null;var t;if(e.keyParams&&i.asn1.Type.OID===e.keyParams.type?t=l(t=i.asn1.derToOid(e.keyParams.value)):e.crv&&(t=l(t=i.asn1.derToOid(e.crv))),!t)return null;if(!e.parsed){var r={};if("private"===e.type){if("string"==typeof e.keyValue?e.keyValue=i.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]),!i.asn1.validate(e.keyValue,h.embeddedPrivateKey,r,[]))return null}else r.point=e.keyValue;e=r}var n={kty:"EC",crv:t};if(e.d&&(n.d=Buffer.from(e.d,"binary")),e.point){var a=Buffer.from(e.point,"binary");if(4!==a.readUInt16BE(0))return null;var o=(a=a.slice(2)).length/2;n.x=a.slice(0,o),n.y=a.slice(o)}return n}};e.exports=Object.freeze({config:f,factory:p}),r(99741).registry.register(p)},72746:(e,t,r)=>{"use strict";var n=r(55824),i=r(54095),a=r(41871),o=r(12122),s={name:"PrivateKeyInfo",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.INTEGER,constructed:!1,capture:"keyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"PrivateKeyInfo",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OCTETSTRING,constructed:!1,capture:"keyValue"}]},u={name:"SubjectPublicKeyInfo",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"keyValue"}]},c={name:"Certificate",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:a.asn1.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:a.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:a.asn1.Class.UNIVERSAL,type:a.asn1.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},l={THUMBPRINT_KEY:"internal\0thumbprint",THUMBPRINT_HASH:"SHA-256"};e.exports={validators:{privateKey:s,publicKey:u,certificate:c},thumbprint:function(e,t,r){if("function"!=typeof e.thumbprint)return Promise.reject(new Error("thumbprint not supported"));r=(r||l.THUMBPRINT_HASH).toUpperCase();var n=e.thumbprint(t),a=Object.keys(n).sort().map((function(e){var t=n[e];return Buffer.isBuffer(t)&&(t=i.base64url.encode(t)),JSON.stringify(e)+":"+JSON.stringify(t)}));a="{"+a.join(",")+"}";try{return o.digest(r,Buffer.from(a,"utf8"))}catch(e){return Promise.reject(e)}},unpackProps:function(e,t){var r;t.forEach((function(t){if(t.name in e){r=r||{};var a=e[t.name];switch(t.type){case"binary":Buffer.isBuffer(a)?e[t.name]=i.base64url.encode(a):a=i.base64url.decode(a);break;case"string":case"number":case"boolean":default:break;case"array":a=[].concat(a);break;case"object":a=n(a)}r[t.name]=a}}));var a=r||{};return Object.keys(e).forEach()),r},COMMON_PROPS:[{name:"kty",type:"string"},{name:"kid",type:"string"},{name:"use",type:"string"},{name:"alg",type:"string"},{name:"x5c",type:"array"},{name:"x5t",type:"binary"},{name:"x5u",type:"string"},{name:"key_ops",type:"array"}],INTERNALS:l}},30018:(e,t,r)=>{"use strict";var n=r(99741);Object.keys(n.KeyStore).forEach());var i=r(30777);Object.keys(i).forEach((function(e){t[e]=i[e]})),r(18876),r(83505),r(27149)},99741:(e,t,r)=>{"use strict";var n=r(55824),i=r(25050),a=r(41871),o=r(54095),s={BaseKey:r(25427),helpers:r(72746)},u=function(){var e={};Object.defineProperty(this,"register",{value:function(t){if(!t||"string"!=typeof t.kty||!t.kty)throw new Error("invalid Key factory");var r=t.kty;return e[r]=t,this}}),Object.defineProperty(this,"unregister",{value:function(t){if(!t||"string"!=typeof t.kty||!t.kty)throw new Error("invalid Key factory");var r=t.kty;return t===e[r]&&delete e[r],this}}),Object.defineProperty(this,"get",{value:function(t){return e[t||""]||void 0}}),Object.defineProperty(this,"all",{value})},c=new u;function l(e,t){var r,n={},i=[],u=t.form,l=t.body,f=null;switch(t=a.asn1.fromDer(l),u){case"private":e.all().some((function(e){if(r)return!1;if(!e.validators)return!1;var o=e.validators.oid,s=e.validators.privateKey;return!!s&&(n={},i=[],(r=a.asn1.validate(t,s,n,i))&&(n.keyOid=a.asn1.oidToDer(o),n.parsed=!0),r)})),n.type="private";break;case"pkcs8":r=a.asn1.validate(t,s.helpers.validators.privateKey,n,i),n.type="private";break;case"public":case"spki":r=a.asn1.validate(t,s.helpers.validators.publicKey,n,i),n.type="public";break;case"pkix":case"x509":if(r=a.asn1.validate(t,s.helpers.validators.certificate,n,i)){n=function(e){return["certIssuer","certSubject"].forEach((function(t){var r=a.pki.RDNAttributesAsArray(e[t]),n=e[t]={};r.forEach((function(e){n[e.name||e.type]=e.value}))})),e}(n);var h=a.md.sha1.create();h.update(l),f=o.base64url.encode(Buffer.from(h.digest().toHex(),"hex"))}n.type="public"}return r?(n.keyOid&&(n.keyOid=a.asn1.derToOid(n.keyOid)),r=null,c.all().forEach((function(e){r||e&&"function"==typeof e.import&&(r=e.import(n))})),r&&n.certSubject&&n.certSubject.commonName&&(r.kid=n.certSubject.commonName),r&&f&&(r.x5t=f),r):null}var f=function(e,t){var r={};Object.defineProperty(this,"generate",{value:function(t,r,a){var o=e.get(t);if(!o)return Promise.reject(new Error("unsupported key type"));(a=n(a||{})).kty=t;var s=this;return o.generate(r).then((function(e){return e=i(a,e,{kty:t}),s.add(e)}))}}),Object.defineProperty(this,"add",{value:function(t,i,o){var u;if(o=o||{},Buffer.isBuffer(t)||"string"==typeof t)if("json"===(i=(i||"json").toLowerCase()))t=JSON.parse(t.toString("utf8"));else try{if(u="pem"===i?function(e){var t={};if(!a.pem.decode(e).some((function(e){switch(e.type){case"CERTIFICATE":t.form="pkix";break;case"PUBLIC KEY":t.form="spki";break;case"PRIVATE KEY":t.form="pkcs8";break;case"EC PRIVATE KEY":case"RSA PRIVATE KEY":t.form="private";break;default:return!1}return t.body=e.body,!0})))throw new Error("supported PEM type not found");return t}(t):{body:t.toString("binary"),form:i},!(t=l(e,u)))throw new Error("no importer for key");Object.keys(o).forEach((function(e){t[e]=o[e]}))}catch(e){return Promise.reject(e)}else t=f.isKey(t)?t.toJSON(!0):n(t);var c=e.get(t.kty);if(!c)return Promise.reject(new Error("unsupported key type"));var h=this;return c.prepare(t).then((function(e){return new s.BaseKey(t.kty,h,t,e)})).then((function(e){var t=e.kid||"";return(r[t]=r[t]||[]).push(e),e}))}}),Object.defineProperty(this,"remove",{value:function(e){if(e){var t=r[e.kid];if(t){var n=t.indexOf(e);-1!==n&&(t.splice(n,1),t.length||delete r[e.kid])}}}}),Object.defineProperty(this,"all",{value:function(e,n){void 0!==(e=e||{}).kid&&null!==e.kid&&"string"!=typeof e.kid&&(e.kid=String(e.kid));var i=[],a=function(t){return(!e.kty||!t.kty||e.kty===t.kty)&&((!e.use||!t.use||e.use===t.use)&&(!e.alg||("dir"===e.alg||!t.alg||e.alg===t.alg)&&t.supports(e.alg)))};return Object.keys(r).forEach((function(t){if(!e.kid||e.kid===t){var n=r[t].filter(a);n.length&&(i=i.concat(n))}})),!n&&t&&(i=i.concat(t.all(e))),i}}),Object.defineProperty(this,"get",{value:function(e,r,n){"boolean"==typeof e?(n=e,r=e=null):"object"==typeof e&&(n=r,r=e,e=null),r=r||{},e&&(r.kid=e),void 0!==r.kid&&null!==r.kid&&"string"!=typeof r.kid&&(r.kid=String(r.kid));var i=this.all(r,!0);return i.length||!t||n||(i=t.get(r,n)),i[0]||null}}),Object.defineProperty(this,"temp",{value:function(){return new f(e,this)}}),Object.defineProperty(this,"toJSON",{value:function(e){var t=[];return Object.keys(r).forEach((function(n){var i=r[n].map((function(t){return t.toJSON(e)}));t=t.concat(i)})),{keys:t}}})};f.isKeyStore=function(e){return!!e&&("object"==typeof e&&("function"==typeof e.get&&"function"==typeof e.all&&"function"==typeof e.generate&&"function"==typeof e.add&&"function"==typeof e.remove))},f.createKeyStore,f.asKeyStore=function(e){if(f.isKeyStore(e))return Promise.resolve(e);var t,r=f.createKeyStore();if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e))t=e;else{if(!("keys"in e))return Promise.reject(new Error("invalid keystore"));t=e.keys}t=t.map((function(e){return r.add(e)}));var n=Promise.all(t);return n=n.then((function(){return r}))},f.isKey=function(e){return!!e&&("object"==typeof e&&(!!f.isKeyStore(e.keystore)&&("string"==typeof e.kty&&"number"==typeof e.length&&"function"==typeof e.algorithms&&"function"==typeof e.supports&&"function"==typeof e.encrypt&&"function"==typeof e.decrypt&&"function"==typeof e.wrap&&"function"==typeof e.unwrap&&"function"==typeof e.sign&&"function"==typeof e.verify)))},f.createKey,f.asKey=function(e,t,r){return f.isKey(e)?Promise.resolve(e):e=f.createKeyStore().add(e,t,r)},e.exports={KeyRegistry:u,KeyStore:f,registry:c}},18876:(e,t,r)=>{"use strict";var n=r(54095),i={BaseKey:r(25427),helpers:r(72746)},a=["HS256","HS384","HS512"],o=["A128GCM","A192GCM","A256GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512","A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"],s=["A128KW","A192KW","A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW","dir"];function u(e,t){return"iv"in t&&(t.iv=Buffer.isBuffer(t.iv)?t.iv:n.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=Buffer.isBuffer(t.adata)?t.adata:Buffer.from(t.adata||"","utf8")),"mac"in t&&(t.mac=Buffer.isBuffer(t.mac)?t.mac:n.base64url.decode(t.mac||"")),"tag"in t&&(t.tag=Buffer.isBuffer(t.tag)?t.tag:n.base64url.decode(t.tag||"")),t}function c(e,t){return"iv"in t&&(t.iv=Buffer.isBuffer(t.iv)?t.iv:n.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=Buffer.isBuffer(t.adata)?t.adata:Buffer.from(t.adata||"","utf8")),t}var l={publicKey:function(e){var t=i.helpers.COMMON_PROPS.concat([]);return i.helpers.unpackProps(e,t)},privateKey:function(e){var t,r=i.helpers.COMMON_PROPS.concat([{name:"k",type:"binary"}]);return(t=i.helpers.unpackProps(e,r))&&t.k?t.length=8*t.k.length:t=void 0,t},thumbprint:function(e){return e.private&&(e=e.private),{k:e.k||"",kty:"oct"}},algorithms:function(e,t){var r=e.private&&8*e.private.k.length,n=[256,384,512];if(!r)return[];switch(t){case"encrypt":case"decrypt":return o.filter((function(e){return e==="A"+r/2+"CBC-HS"+r||e==="A"+r/2+"CBC+HS"+r||e==="A"+r+"GCM"}));case"sign":case"verify":return a.filter((function(e){var t=!1;return n.forEach((function(n){n>r||(t|=e==="HS"+n)})),t}));case"wrap":case"unwrap":return s.filter((function(e){return e==="A"+r+"KW"||e==="A"+r+"GCMKW"||0===e.indexOf("PBES2-")||"dir"===e}))}return[]},encryptKey:function(e,t){return t.private&&t.private.k},encryptProps:c,decryptKey:function(e,t){return t.private&&t.private.k},decryptProps:u,wrapKey:function(e,t){return t.private&&t.private.k},wrapProps:c,unwrapKey:function(e,t){return t.private&&t.private.k},unwrapProps:u,signKey:function(e,t){return t.private&&t.private.k},verifyKey},f={kty:"oct",prepare:function(e){var t=l,r=Promise.resolve(e);return r=(r=r.then((function(e){return i.helpers.thumbprint(t,e)}))).then((function(r){var n={};return n[i.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[i.helpers.INTERNALS.THUMBPRINT_KEY]=n,t}))},generate:function(e){var t=n.randomBytes(e/8);return Promise.resolve({k:t})}};e.exports=Object.freeze({config:l,factory:f}),r(99741).registry.register(f)},83505:(e,t,r)=>{"use strict";var n=r(41871),i=r(99540),a=r(41389).nodeCrypto,o={BaseKey:r(25427),helpers:r(72746)},s=["RS256","RS384","RS512","PS256","PS384","PS512"],u=["RSA-OAEP","RSA-OAEP-256","RSA1_5"],c={publicKey:function(e){var t,r=o.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"}]);return(t=o.helpers.unpackProps(e,r))&&t.n&&t.e?t.length=8*t.n.length:(delete t.e,delete t.n),t},privateKey:function(e){var t,r=o.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"},{name:"d",type:"binary"},{name:"p",type:"binary"},{name:"q",type:"binary"},{name:"dp",type:"binary"},{name:"dq",type:"binary"},{name:"qi",type:"binary"}]);return(t=o.helpers.unpackProps(e,r))&&t.d&&t.n&&t.e&&t.p&&t.q&&t.dp&&t.dq&&t.qi?t.length=8*t.d.length:t=void 0,t},thumbprint:function(e){return e.public&&(e=e.public),{e:e.e,kty:"RSA",n:e.n}},algorithms:function(e,t){switch(t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&u.slice()||[];case"unwrap":return e.private&&u.slice()||[];case"sign":return e.private&&s.slice()||[];case"verify":return e.public&&s.slice()||[]}return[]},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey,convertToPEM:function(e,t){var r=i.convertToForge(e,!t);return t?n.pki.privateKeyToPem(r):n.pki.publicKeyToPem(r)}};var l={oid:"1.2.840.113549.1.1.1",privateKey:{name:"RSAPrivateKey",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"version"},{name:"RSAPrivateKey.modulus",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPrivateKey.publicExponent",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"e"},{name:"RSAPrivateKey.privateExponent",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"d"},{name:"RSAPrivateKey.prime1",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"p"},{name:"RSAPrivateKey.prime2",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"q"},{name:"RSAPrivateKey.exponent1",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"dp"},{name:"RSAPrivateKey.exponent2",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"dq"},{name:"RSAPrivateKey.coefficient",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"qi"}]},publicKey:{name:"RSAPublicKey",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPublicKey.exponent",tagClass:n.asn1.Class.UNIVERSAL,type:n.asn1.Type.INTEGER,constructed:!1,capture:"e"}]}},f={kty:"RSA",validators:l,prepare:function(e){var t=c,r=Promise.resolve(e);return r=(r=r.then((function(e){return o.helpers.thumbprint(t,e)}))).then((function(r){var n={};return n[o.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[o.helpers.INTERNALS.THUMBPRINT_KEY]=n,t}))},generate:function(e){var t;if(a)t=new Promise((function(t,r){n.pki.rsa.generateKeyPair({bits:e,e:65537},))}));else{var r=n.pki.rsa.generateKeyPair({bits:e,e:65537});t=Promise.resolve(r.privateKey)}return t.then((function(e){var t={};return["e","n","d","p","q",{incoming:"dP",outgoing:"dp"},{incoming:"dQ",outgoing:"dq"},{incoming:"qInv",outgoing:"qi"}].forEach((function(r){var n,i,a;"string"==typeof r?n=i=r:(n=r.incoming,i=r.outgoing),n in e&&(t[i]=((a=(a=e[n]).toString(16)).length%2&&(a="0"+a),Buffer.from(a,"hex")))})),t}))},import:function(e){if(l.oid!==e.keyOid)return null;if(!e.parsed){"string"==typeof e.keyValue?e.keyValue=n.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]);var t="private"===e.type?l.privateKey:l.publicKey,r={};if(!n.asn1.validate(e.keyValue,t,r,[]))return null;e=r}var i={kty:"RSA"};return["n","e","d","p","q","dp","dq","qi"].forEach((function(t){if(t in e){var r=Buffer.from(e[t],"binary");0===r[0]&&(r=r.slice(1)),i[t]=r}})),i}};e.exports=Object.freeze({config:c,factory:f}),r(99741).registry.register(f)},41563:e=>{"use strict";e.exports={compact:!1,protect:"*"}},55695:e=>{"use strict";e.exports={slice}},72239:(e,t,r)=>{"use strict";var n={createSign:r(71130).createSign,createVerify:r(88764).createVerify};e.exports=n},71130:(e,t,r)=>{"use strict";var n=r(25050),i=r(54095),a=r(30018),o=r(55695).slice,s=r(55824),u=r(4363),c=r(41563),l=function(e,t){var r=!1,n=e.format||"general",a=Buffer.alloc(0);Object.defineProperty(this,"compact",{get:function(){return"compact"===n},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return n},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(r)throw new Error("already final");return null!=e&&(e=i.asBuffer(e,t),a=a.length?Buffer.concat([a,e],a.length+e.length):e),this}}),Object.defineProperty(this,"final",{value:function(e,o){if(r)return Promise.reject(new Error("already final"));var u;switch(this.update(e,o),r=!0,u=(u=Promise.all(t)).then((function(e){return a=i.base64url.encode(a),e=e.map((function(e){var t={},r=0,n=s(e.header),o=Object.keys(n).length;e.protected.forEach((function(e){e in n&&(t[e]=n[e],r++,delete n[e],o--)})),r>0?(t=JSON.stringify(t),t=i.base64url.encode(t)):t="";var u=Buffer.from(t+"."+a,"ascii");return e=(e=e.key.sign(e.header.alg,u,e.header)).then((function(e){var a={};return 0<r&&(a.protected=t),0<o&&(a.header=n),a.signature=i.base64url.encode(e.mac),a}))})),e=[Promise.resolve(a)].concat(e),Promise.all(e)})),u=u.then()),n){case"compact":u=u.then((function(e){var t=[e.signatures[0].protected,e.payload,e.signatures[0].signature];return t=t.join(".")}));break;case"flattened":u=u.then((function(e){var t={};t.payload=e.payload;var r=e.signatures[0];return r.protected&&(t.protected=r.protected),r.header&&(t.header=r.header),t.signature=r.signature,t}))}return u}})};e.exports={signer:l,createSign:function(e,t){var r=e,i=1,f=t;if(0===arguments.length)throw new Error("at least one signatory must be provided");1===arguments.length||a.isKey(e)||e&&"kty"in e||e&&"key"in e&&(a.isKey(e.key)||"kty"in e.key)?(f=e,i=0,r={}):r=s(e),Array.isArray(f)||(f=o(arguments,i));var h=(r=n(s(c),r)).fields||{},p=r.format;if(p||(p=r.compact?"compact":"general"),("compact"===p||"flattened"===p)&&1<f.length)throw new Error("too many signatories for compact or flattened JSON serialization");var d="*"===r.protect;return r.compact&&(d=!0),f=f.map((function(e,t){return(e&&"kty"in e?a.asKey(e).then((function(e){return{key:e}})):e?a.asKey(e.key).then()):Promise.reject(new Error("missing key for signatory "+t))).then((function(e){var t=e.key,r=e.header||{};r=n(n({},h),r),e.header=r,r.alg||(r.alg=t.algorithms(a.MODE_SIGN)[0]||"");var i,o=e.reference;if(delete e.reference,void 0===o?o=(o=["kid","jku","x5c","x5t","x5u"].some()))?null:"kid":"boolean"==typeof o&&(o=o?"kid":null),o)if(i=t.toJSON(),"jwk"===o){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=i}else o in i&&(r[o]=i[o]);var s=e.protect;if(d||"*"===s)s=Object.keys(r);else if("string"===s)s=[s];else if(Array.isArray(s))s=s.concat();else{if(s)return Promise.reject(new Error("protect must be a list of fields"));s=[]}return s=u(s),e.protected=s,e=Object.freeze(e)}))})),new l({format:p},f)}}},88764:(e,t,r)=>{"use strict";var n=r(55824),i=r(25050),a=r(54157),o=r(24394),s=r(30018),u={algorithms:"*",allowEmbeddedKey:!1},c=function(e,t){var r,c;c=s.isKey(e)?(r=e).keystore:s.isKeyStore(e)?e:s.createKeyStore(),t=i(u,t),Object.defineProperty(this,"defaultKey",{value:r||void 0,enumerable:!0}),Object.defineProperty(this,"keystore",{value:c,enumerable:!0}),Object.defineProperty(this,"verify",{value:function(e,u){var l=(u=i({},t,u||{})).handlers||{},f=Object.keys(l),h=new o(u.algorithms);if("string"==typeof e)e={payload:(e=e.split("."))[1],signatures:[{protected:e[0],signature:e[2]}]};else if(!e||"object"!=typeof e)throw new Error("invalid input");e.signature&&(e.signatures=[{protected:e.protected||void 0,header:e.header||void 0,signature:e.signature}]);var p=e.signatures||[{}];p=p.map((function(e){var t=n(e.header||{}),r=e.protected?JSON.parse(a.decode(e.protected,"utf8")):{};t=i(t,r);var o=a.decode(e.signature);if(!h.match(t.alg))return Promise.reject(new Error("Algorithm not allowed: "+t.alg));var s=r.crit;if(s){if(!Array.isArray(s))return Promise.reject(new Error("Invalid 'crit' header"));for(var u=0;s.length>u;u++)if(-1===f.indexOf(s[u]))return Promise.reject(new Error("Critical extension is not supported: "+s[u]))}return r=Object.keys(r),Promise.resolve({protected:r,aad:e.protected||"",header:t,signature:o})}));var d=Promise.all(p);return d=d.then((function(t){return new Promise((function(n,o){var h=function(){var p=t.shift();if(p){p=i({},p,{payload:e.payload});var d=Promise.resolve(p);d=d.then((function(e){var t;return u.allowEmbeddedKey&&e.header.jwk?t=s.asKey(e.header.jwk):u.allowEmbeddedKey&&e.header.x5c?(t=e.header.x5c[0],t=Buffer.from(t,"base64"),t=s.asKey(t,"pkix")):t=Promise.resolve(r||c.get({use:"sig",alg:e.header.alg,kid:e.header.kid})),t.then((function(t){return t?(e.key=t,e):Promise.reject(new Error("key does not match"))}))})),d=d.then((function(e){var t=[];return f.forEach((function(r){var n;"function"==typeof(r=l[r])?n=r(e):"object"==typeof r&&"function"==typeof r.prepare&&(n=r.prepare(e)),n&&t.push(Promise.resolve(n))})),Promise.all(t).then((function(){return e}))})),d=d.then((function(e){var t=e.aad||"",r=e.payload||"",n=Buffer.alloc(1+t.length+r.length),i=0;return n.write(t,i,"ascii"),i+=t.length,n.write(".",i,"ascii"),i++,Buffer.isBuffer(r)?r.copy(n,i):n.write(r,i,"binary"),e.content=n,e})),d=d.then((function(e){return e.key.verify(e.header.alg,e.content,e.signature)})),(d=(d=d.then((function(e){var t=p.payload;return t=a.decode(t),{protected:p.protected,header:p.header,payload:t,signature:e.mac,key:p.key}}))).then((function(e){var t=[];return f.forEach((function(r){var n;"object"==typeof(r=l[r])&&"function"==typeof r.complete&&(n=r.complete(e)),n&&t.push(Promise.resolve(n))})),Promise.all(t).then((function(){return e}))}))).then(n,h)}else o(new Error("no key found"))};h()}))})),d}})};e.exports={verifier:c,createVerify:function(e,t){return new c(e,t)}}},42308:(e,t,r)=>{"use strict";var n={JWE:r(56750),JWS:r(72239),util:r(54095)};e.exports=function(e){var t,r,i,a=e.split(".");if(3===a.length)t="JWS",r=function(t,r){return n.JWS.createVerify(t).verify(e,r)};else{if(5!==a.length)throw new TypeError("invalid jose serialization");t="JWE",r=function(t,r){return n.JWE.createDecrypt(t).decrypt(e,r)}}return i=n.util.base64url.decode(a[0],"utf8"),i=JSON.parse(i),{type:t,format:"compact",input:e,header:i,perform:r}}},87014:(e,t,r)=>{"use strict";var n=r(42308),i=r(40703),a=e.exports=function(e){if(Buffer.isBuffer(e))return n(e.toString("ascii"));if("string"==typeof e)return n(e);if(e)return i(e);throw new TypeError("invalid input")};a.compact=n,a.json=i},40703:(e,t,r)=>{"use strict";var n=r(25050),i={JWE:r(56750),JWS:r(72239),util:r(54095)};e.exports=function(e){var t,r,a;if("signatures"in e||"signature"in e)t="JWS",r=function(t,r){return i.JWS.createVerify(t).verify(e,r)},a=(a=e.signatures||[{protected:e.protected,header:e.header,signature:e.signature}]).map((function(e){var t,r={};return e.header&&(r=n(r,e.header)),e.protected&&(t=e.protected,t=i.util.base64url.decode(t,"utf8"),t=JSON.parse(t),r=n(r,t)),r}));else if("ciphertext"in e){t="JWE",r;var o={};e.protected&&(o.protected=e.protected,o.protected=i.util.base64url.decode(o.protected,"utf8"),o.protected=JSON.parse(o.protected)),e.unprotected&&(o.unprotected=e.unprotected),a=(a=e.recipients||[{}]).map((function(e){var t={};return e.header&&(t=n(t,e.header)),o.unprotected&&(t=n(t,o.unprotected)),o.protected&&(t=n(t,o.protected)),t}))}return{type:t,format:"json",input:e,all:a,perform:r}}},24394:e=>{"use strict";function t(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}e.exports=function(e){e?"string"==typeof e&&(e=e.split(" ")):e=[];var r,n=[],i=[],a=[],o=[],s=/^(!)?([^*]*)(\*?)([^*]*)$/;e.forEach((function(e){if(e){s.lastIndex=0;var u=s.exec(e);u&&(r="("+function(e,r,n){var i=[];return i.push("^"),e&&(e=t(e),i.push(e)),r&&i.push(e||n?".*":".+"),n&&(n=t(n),i.push(n)),i.push("$"),i.join("")}(u[2],u[3],u[4])+")",u[1]?(o.push(r),i.push(u[0])):(a.push(r),n.push(u[0])))}})),a=a.length?new RegExp(a.join("|")):null,o=o.length?new RegExp(o.join("|")):null,n.length||(n=["*"]),Object.defineProperty(this,"spec",{value:n.join(" ")+" "+i.join(" "),enumerable:!0}),Object.defineProperty(this,"match",{value:function(e){var t=Boolean(e);return t&&a&&(a.lastIndex=0,t=a.test(e)),t&&o&&(o.lastIndex=0,t=!o.test(e)),t}})}},54157:(e,t,r)=>{"use strict";var n=r(27220),i={encode:function(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Buffer.isBuffer(e)||(e=Buffer.from(e,t)),n.encode(e)},decode:n.toBuffer};e.exports=i},58921:(e,t,r)=>{"use strict";var n=r(41871),i=r(54157);function a(e,t){t=t||{},Buffer.isBuffer(e)?this.data=e:n.util.isArrayBuffer(e)?(e=new Uint8Array(e),this.data=Buffer.from(e)):n.util.isArrayBufferView(e)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.data=Buffer.from(e)),this.data&&(this.write=this.data.length,e=void 0),this.growSize=t.growSize||a.DEFAULT_GROW_SIZE,this.write=this.write||0,this.read=this.read||0,e?this.putBytes(e):this.data||this.accommodate(0),t.readOffset="readOffset"in t?t.readOffset:this.read,this.write="writeOffset"in t?t.writeOffset:this.write,this.read=Math.min(t.readOffset,this.write)}a.DEFAULT_GROW_SIZE=16,a.prototype.length,a.prototype.available,a.prototype.isEmpty,a.prototype.accommodate=function(e){if(this.data){if(this.available()<e){e=Math.max(e,this.growSize);var t=this.data,r=Buffer.alloc(t.length+e);t.copy(r,0),this.data=r}}else e=Math.max(this.write+e,this.growSize),this.data=Buffer.alloc(e);return this.data.fill(0,this.write),this},a.prototype.clear=function(){return this.read=this.write=0,this.data=Buffer.alloc(0),this},a.prototype.truncate=function(e){return this.write=this.read+Math.max(0,this.length()-e),this.data.fill(0,this.write),this},a.prototype.compact=function(){return this.read>0&&(this.write===this.read?this.read=this.write=0:(this.data.copy(this.data,0,this.read,this.write),this.write=this.write-this.read,this.read=0),this.data.fill(0,this.write)),this},a.prototype.copy=function(){return new a(this,{readOffset:this.read,writeOffset:this.write,growSize:this.growSize})},a.prototype.equals=function(e){if(!a.isBuffer(e))return!1;if(e.length()!==this.length())return!1;for(var t=!0,r=this.read-e.read,n=e.read;e.write>n;n++)t=t&&this.data[n+r]===e.data[n];return t},a.prototype.at,a.prototype.setAt=function(e,t){return this.data[this.read+e]=t,this},a.prototype.last,a.prototype.bytes=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t="";else{var r=this.read,n=r+e,i=this.data.slice(r,n);t=String.fromCharCode.apply(null,i)}return t},a.prototype.buffer=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t=new ArrayBuffer(0);else{var r=this.read,n=r+e,i=this.data.slice(r,n);(t=new Uint8Array(n-r)).set(i)}return t},a.prototype.native=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t=Buffer.alloc(0);else{var r=this.read,n=r+e;t=this.data.slice(r,n)}return t},a.prototype.toHex,a.prototype.toString=function(e){if(0===this.length())return"";var t=this.data.slice(this.read,this.write);switch(e=e||"utf8"){case"raw":return t.toString("binary");case"base64url":return i.encode(t);case"utf16":return t.toString("ucs2");default:return t.toString(e)}},a.prototype.fillWithByte=function(e,t){return t||(t=this.available()),this.accommodate(t),this.data.fill(e,this.write,this.write+t),this.write+=t,this},a.prototype.getBuffer=function(e){var t=this.buffer(e);return this.read+=t.byteLength,t},a.prototype.putBuffer,a.prototype.getBytes=function(e){var t=this.bytes(e);return this.read+=t.length,t},a.prototype.putBytes=function(e,t){if("string"==typeof e){switch(t=t||"binary"){case"utf16":t="ucs-2";break;case"raw":t="binary";break;case"base64url":e=i.decode(e)}Buffer.isBuffer(e)||(e=Buffer.from(e,t))}var r,o;if(e instanceof a){var s=e;e=s.data.slice(s.read,s.write),s.read=s.write}else e instanceof n.util.ByteStringBuffer&&(e=e.getBytes());if(Buffer.isBuffer(e))r=e;else if(Array.isArray(e))r=Buffer.from(e);else if(n.util.isArrayBuffer(e))r=new Uint8Array(e),r=Buffer.from(r);else{if(!n.util.isArrayBufferView(e))throw new TypeError("invalid source type");r=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=Buffer.from(r)}return this.accommodate(r.length),o=this.data,r.copy(o,this.write),this.write+=r.length,this},a.prototype.getNative=function(e){var t=this.native(e);return this.read+=t.length,t},a.prototype.putNative=a.prototype.putBuffer,a.prototype.getByte=function(){var e=this.data[this.read];return this.read=Math.min(this.read+1,this.write),e},a.prototype.putByte=function(e){return this.accommodate(1),this.data[this.write]=255&e,this.write++,this},a.prototype.getInt16=function(){var e=this.data[this.read]<<8^this.data[this.read+1];return this.read=Math.min(this.read+2,this.write),e},a.prototype.putInt16=function(e){return this.accommodate(2),this.data[this.write]=e>>>8&255,this.data[this.write+1]=255&e,this.write+=2,this},a.prototype.getInt24=function(){var e=this.data[this.read]<<16^this.data[this.read+1]<<8^this.data[this.read+2];return this.read=Math.min(this.read+3,this.write),e},a.prototype.putInt24=function(e){return this.accommodate(3),this.data[this.write]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write+2]=255&e,this.write+=3,this},a.prototype.getInt32=function(){var e=this.data[this.read]<<24^this.data[this.read+1]<<16^this.data[this.read+2]<<8^this.data[this.read+3];return this.read=Math.min(this.read+4,this.write),e},a.prototype.putInt32=function(e){return this.accommodate(4),this.data[this.write]=e>>>24&255,this.data[this.write+1]=e>>>16&255,this.data[this.write+2]=e>>>8&255,this.data[this.write+3]=255&e,this.write+=4,this},a.prototype.getInt16Le=function(){var e=this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+2,this.write),e},a.prototype.putInt16Le=function(e){return this.accommodate(2),this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=2,this},a.prototype.getInt24Le=function(){var e=this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+3,this.write),e},a.prototype.putInt24Le=function(e){return this.accommodate(3),this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=3,this},a.prototype.getInt32Le=function(){var e=this.data[this.read+3]<<24^this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+4,this.write),e},a.prototype.putInt32Le=function(e){return this.accommodate(4),this.data[this.write+3]=e>>>24&255,this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=4,this},a.prototype.getInt=function(e){var t=0;do{t=t<<8|this.getByte(),e-=8}while(e>0);return t},a.prototype.putInt=function(e,t){this.accommodate(Math.ceil(t/8));do{t-=8,this.putByte(e>>t&255)}while(t>0);return this},a.prototype.putSignedInt,a.prototype.putString,a.isBuffer,a.asBuffer=function(e){return a.isBuffer(e)?e:e?new a(e):new a},e.exports=a},54095:(e,t,r)=>{"use strict";var n,i=r(41871);n={base64url:r(54157),utf8:r(44861),asBuffer:function(e,t){return Buffer.isBuffer(e)?e:"string"==typeof e?"base64url"===(t=t||"binary")?n.base64url.decode(e):Buffer.from(e,t):(i.util.isArrayBufferView(e)?e=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteOffset+e.byteLength):i.util.isArrayBuffer(e)&&(e=new Uint8Array(e)),Buffer.from(e))},randomBytes},e.exports=n},25050:(e,t,r)=>{"use strict";var n,i=r(9844),a=r(67929),o=(n=[],"undefined"!=typeof Uint8ClampedArray&&n.push(Uint8ClampedArray),"undefined"!=typeof Uint8Array&&n.push(Uint8Array),"undefined"!=typeof Uint16Array&&n.push(Uint16Array),"undefined"!=typeof Uint32Array&&n.push(Uint32Array),"undefined"!=typeof Float32Array&&n.push(Float32Array),"undefined"!=typeof Float64Array&&n.push(Float64Array),n);e.exports=i(a,(function(e,t){if(Buffer.isBuffer(t))t=Buffer.from(t);else{var r=function(e){for(var t,r=0;!t&&o.length>r;r++)e instanceof o[r]&&(t=o[r]);return t}(t);t=r?new r(t,t.byteOffset,t.byteLength):void 0}return t,t}))},44861:(e,t)=>{"use strict";var r=t;r.encode=function(e){var t=encodeURIComponent(e||"");return t=t.replace(/%([0-9a-fA-F]{2})/g,(function(e,t){return t=parseInt(t,16),String.fromCharCode(t)}))},r.decode=function(e){var t=(e||"").replace(/[\u0080-\u00ff]/g,(function(e){return"%"+(256|e.charCodeAt(0)).toString(16).substring(1)}));return t=decodeURIComponent(t)}},65415,71504:(e,t,r)=>{"use strict";var n=r(50521)r s=i;s.encode=i,s.decode,s.toBase64=a,s.fromBase64=o,s.toBuffer,t.default=s},50521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default},27220,19496,91620,54525n e}(e=te,teents):]|=128*y}},87269:(e,t,r)=>{var n=r(47758)(r(29165),"DataView");e.exports=n},88987:(e,t,r)=>{var n=r(71519),i=r(82999),a=r(63550),o=r(50506),s=r(80845);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exportexports=a},175:(e,t,r)=>{var n=r(2173),i=r(33752),a=r(10548),o=r(63410),s=r(3564);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,e.exportexports=a},35922:(e,t,r)=>{var n=r(47758)(r(29165),"Map");e.exporexports=u},6795:(e,t,r)=>{var n=r(47758)(r(29165),"Promise");e.exports=n},81956:(e,t,r)=>{var n=r(47758)(r(29165),"Set");e.exportexporexportexportexportply(t,returnreturn,t,0)>returnreturnreturnreturnn(e,t,n(e,t,return-1}},43472:(e,t,r)=>{var n=r(92434),i=r(50579);e.exports=function(e,t){return e&&n(t,i(t),i(t),):e[t]?e:t))R))}))exportreturnreturnreturnexporte:void(a,r(ebject(n(e,i,return v}},84742:(e,t,r)=>{var n=r(80732),i=r(55073);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},64033:(e,t,r)=>{var n=r(81887),i=r(55073);e.exports=function(e){return i(e)&&"[object Map]"==n(urn e!st(o(e]"==n(!o[n(ereturnreturn r}},35309:e=>{e.exports=function(p)}}),(e,r,_(e,r)}return),e+"returexportexportreturnreturny?"-0"rn e(treturno(i(t)e.has((e)?e::a(o(e n(e))opy(n),n}},56157:(e,t,r)=>{var n=r(78925);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLengttIndexl(e)):.lengtreturnreturnreturnreturn r}},8782:(e,t,r)=>{var n=r(92434),i=r(97482);e.exports=function(e,t){return n(e,i(e),i(e),exportreturnurneturn ument(a)?a:this,hly(N,Ithis,ha(y,e,export,w),e,void 0exportn),e+"")}},69698:(e,t,r)=>{var n=r(38084),i=r(97482),a=r(50579);e.exports=function(e){return n(e,a,n(e,a,exportreturncehold"]:r.mr:void 0}},11389:(e,t,r)=>{var n=r(75542)(Object.getPrototypeOf,Object);e.exportexportexportexpord 0:e[it(r):)||i(es.size=t?1:0]:voidall(t,":t,thinput)rn o(e:n(i(] */\ne&&e[o==0&&e(r[t]ject(null==e===s[&&a intype|s.sizesize,!:t[r][__,e)]=t,tg:new =t?1:0,t}},88833:(e,t,r)=>{var n=r(67707);e.exports=function(e){return n(this,e).get().has(0:1,threture[1]=lexportexportexportreturexporte(t(r)this,ct,0,-1xportsreturnreturnurn e[_"),this}},97230:e=>{e.exports=function(e){return this.__data__.has(e)}},85823:(e,t,r)=>{var n=r(5649),i=r(15509)(n);e.export]=e}))export(s),r)umentss.sizt.size,r}},47694:e=>{e.exports=function(e){return this.__data__.get(_.has(ize,treturnexporty?"-0"returne.sortlues__exportn n(e,eturn =e&&t!r,a)):(e,1):i(e,t,returnexportexportexport)&&!n(e)&&n(exportoxy]"=54740991}},32924:(e,t,r)=>{var n=r(64033),i=r(58792),a=r(8478),o=a&&a.isMap,s=o?i(o):n;e.exportll(r)==l}},45380:(e,t,r)=>{var n=r(28264),i=r(58792),a=r(8478),o=a&&a.isSet,s=o?i(o):n;e.exportexport(e):i(!0):i(]:voidexportexportction(exporexportexportreturnreturn===e?e?t-r:t67295)(e,i(?"":n?n(e):exports=l},29168:e=>{e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exportssLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var(e,t,n)}r.fromInt=o,r.fromNumber=s,r.fromBits=u;var nsigned)}r.fromString=l,r.fromValue=f;var h=4294967296,p=h*h,d=p/2,y=o(1<<24),v=o(0);r.ZERO=v;var g=o(0,!0);r.UZERO=g;var m=o(1);r.ONE=m;var S=o(1,!0);r.UONE=S;var b=o(-1);r.NEG_ONE=b;var E=u(-1,2147483647,!1);r.MAX_VALUE=E;var C=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=C;var A=u(0,-2147483648,!1);r.MIN_VALUE=A;var w=r.prototy:this.low},.low>>>0)},o=""+l+o}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBis.low>>>0},w.get?t+33:t+1=this.low},w.eqz=w.isZero,w.is.high<0},w.s.high>=0},w.isOdd=function(){return 1==(1&this.low)this.low)===e.low)},w.eq=w.equals,whis.eq(e)},w.neq=w.notEquals,w.ne=w.notEquals,comp(e)<0},w.lt=w.lessThan,w.lessTomp(e)<=0},w.lte=w.lessThanOrEqual,w.le=w.lessThanOrEqual,w.gcomp(e)>0},w.gt=w.greaterThan,w.greaterTomp(e)>=0},w.gte=w.greaterThanOrEqual,w.ge=w.greaterThanOrEqualve()?-1:1},w.comp=w.compar().add(m)},w.neg=w.neunsigned)},(e.neg())},w.sub=w.subtract,unsigned)},w.mul=w.multipl}return a},w.div=w.divid).mul(e))},w.mod=w.modulo,w.rem=w.mounsignunsigunsignunsigned)},wunsigned)},w.shl=w.shiftLeft,w.unsigned)},w.shr=w.shiftRight,w.shiftRigunsigned)},w.shru=w.shiftRightUnsigned,w.shr_u=w.shiftRightUnsigned,,!1):this},w..high,!0)}BytesBE()},w5,e>>>24]},w55,255&t]},resBE(e,t)},r.f7]<<24,t)},r.f8|e[3],(t,r)}returnverse(put,t)return(t,r)ript:!getMacRabin(ithms|f1=n.ytes()tampinstr(0,,S()}Sreturning(b+Pkcs12ata)}}ncKey"line:t,0),n}}()},60398:(e,t,r)=>{var n=r(9928);r(41031);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(i=r(93147)),(e.exports=n.prng=n.prng||))}))}}returnery:nu(e,t,!(e.e))0,l-0,g-=6,x-=128}}},41031:(e,t,r)=>{var n=r(9928),i=r(84442),a=e.exports=n.util=mmediate}(),a.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,a.globalScope=a.isNodejs?r.g:"undefined"==typeof self?window:self,a.isArray=Arrag.call(e)},a.isArayBuffer},a.isArrayyteLength},a.ByteBuffer=s,a.ByteStringBuffer=s;a.ByteStringBuffer.prototype._optimizeConstruLength=0)},a.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},a.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},a.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},a.ByteStringBuffer.prototype.fig(t),this},a.ByteStringBuffer.prototypgth),this},a.ByteStringBuffer.prototypeeUtf8(e))},a.ByteStringBuffer.prototype(255&e))},a.ByteStringBuffer.prototype(255&e))},a.ByteStringBuffer.prototype(255&e))},a.ByteStringBuffer.prototype.>>8&255))},a.ByteStringBuffer.prototype.>16&255))},a.ByteStringBuffer.prototype.>24&255))},a.ByteStringBuffer.protottBytes(r)},a.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},a.ByteStringBuffer.prototypetBytes())},a.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},a.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},a.ByteStringBuffer.prototypread+=3,e},a.ByteStringBuffer.prototypread+=4,e},a.ByteStringBuffer.prototype.read+=2,e},a.ByteStringBuffer.prototype.read+=3,e},a.ByteStringBuffer.prototype.read+=4,e},a.ByteStringBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},a.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},a.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},a.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},a.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},a.ByteStringBuffer.protoe+1),this},a.ByteStringBuffer.protlength-1)},a.ByteStringBuffer.protis.read,e},a.ByteStringBuffer.prototyd=0),this},a.ByteStringBuffer.protoad=0,this},a.ByteStringBuffer.prototypad=0,this},a.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},a.ByteStringBuffer.prototyp.bytes())},a.teOffset)},a.DataBuffer.prototype.length=function(){return this.write-this.read},a.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},a.DataBuffer.prototype.afer),this},a.DataBuffer.prototy+,e),this},a.DataBuffer.prototype.fiturn this},a.DataBuffer.prototypter: "+e)},a.DataBuffer.prototypear(),this},a.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},a.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},a.DataBuffer.prototype+=3,this},a.DataBuffer.prototype+=4,this},a.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},a.DataBuffer.prototype.e+=3,this},a.DataBuffer.prototype.e+=4,this},a.DataBuffer.prototturn this},a.DataBuffer.prototype.putInt(e,t)},a.DataBuffer.prototys.read++)},a.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},a.DataBuffer.prototypread+=3,e},a.DataBuffer.prototypread+=4,e},a.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},a.DataBuffer.prototype.read+=3,e},a.DataBuffer.prototype.read+=4,e},a.DataBuffer.protot;return t},a.DataBuffer.prototype.ge-=r<<1),t},a.DataBuffer.prototyplear()),t},a.DataBuffer.protos.read+e)},a.DataBuffer.prs.read+e)},a.DataBuffer.protoe,t),this},a.DataBuffer.prot.write-1)},a.DataBuffer.protfer(this)},a.DataBuffer.prototyturn this},a.DataBuffer.protote=0,this},a.DataBuffer.prototypite),this},a.DataBuffer.proto}return e},a.DataBuffer.prototyping: "+e)},a.crBuffer(e)},a.;return r},turn n+=a},a.;return t},a.bytesToHex=function(e){return a.createBuffer(e).toHex()},a.inde(255&e)};var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";turn o+=a},;return a},a.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},a.decodeUtf8=function(e){return decodeURIComponent(escape(e))},a.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},a.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},a.binary.n t?i-r:n},a.binary.hex.encode=a.bytesToHex,a.binary.n t?a-r:n},a.binary.basturn o+=a},a.binary.basrray(0,l)},a.binary.base58.encode=function(e,t){return a.binary.baseN.encode(e,l,t)},a.binary.basde(e,l,t)},a.text={utf8:{},utf16:{}},a.text.un t?i-r:n},a.text.u(null,e))},a.text.utn t?a-r:n},a.text.ut.buffer))}}return t}code64r.64,f]:f(e,;return i}uments,i)}uments,n)},a.uments,n)},a.clearItems=function(e,t,r){g(v,arguments,r)},llHost),n};var m=null;a.getQuer:t=r(e),t},a.parables(r)}},a.m;return r},"#"+r:"")};return!0.join("")},a.foce(2):"")},a.+" bytes"},a.b6(e):null},a.bytetBytes()},a.bytetBytes()},a6(e):null},a.bjoin(".")},a.bjoin(":")},a.est([],5,1returnreturnexport0,d(e,.ungzitTyped]]>t?r|a<<16FLATEDturn-1projec.done=r.bitprojecbits=Iversio-=8)}(.adlerreturnu(e),tase()}))}},17383:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>he});r(44705),r(2316),r(98498),r(52815),r(14229),r(88445),r(99180),r(62085),r(3468),r(90871),r(15848);var n=r(12300),i=(r(37352),r(13491),r(306),r(5708),r(40816),r(4490),r(83704),r(49313),r(28222),r(16201),r(33547),r(97142),r(29174),r(40658));function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(){o=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var a=t&&t.prototype instanceof S?t:S,o=Object.create(a.prototype),s=new R(n||[]);return i(o,"_invoke",{value:I(e,r,s)}),o}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var d="suspendedStart",y="suspendedYield",v="executing",g="completed",m={};function S(){}function b(){}function E(){}var C={};f(C,u,(function(){return this}));var A=Object.getPrototypeOf,w=A&&A(A(N([])));w&&w!==r&&n.call(w,u)&&(C=w);var _=E.prototype=S.prototype=Object.create(C);function T(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(i,o,s,u){var c=p(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,r,n){var i=d;return function(a,o){if(i===v)throw new Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:e,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var u=B(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var c=p(t,r,n);if("normal"===c.type){if(i=n.done?g:y,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=g,n.method="throw",n.arg=c.arg)}}}function B(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,B(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=p(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=E,i(_,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:b,configurable:!0}),b.displayName=f(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,f(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},T(P.prototype),f(P.prototype,c,(function(){return this})),t.AsyncIterator=P,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new P(h(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(_),f(_,l,"Generator"),f(_,u,(function(){return this})),f(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function s(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){s(a,n,i,o,u,"next",e)}function u(e){s(a,n,i,o,u,"throw",e)}o(void 0)}))}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}var p=l((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"checkAccessStatus",u(o().mark((function e(){var r,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{logoSchema:i.XU.Black},e.abrupt("return",t.accessService.checkAccessStatus(r));case 2:case"end":return e.stop()}}),e)})))),f(this,"checkIsAuthorized",function(){var e=u(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.accessService.getAuthorizationMethod({resourceGroup:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f(this,"isUserAuthorized",function(){var e=u(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.accessService.isAuthorized({resourceGroup:r}));case 1:case"end":return e.stop()}}),e)}rguments)}}()),f(this,"getAuthorizationMethod",u(o().mark((function e(){var r,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>0&&void 0!==n[0]?n[0]:{logoSchema:i.XU.Black},e.abrupt("return",t.accessService.getAuthorizationMethod(r));case 2:case"end":return e.stop()}}),e)})))),this.accessService=new i.vv}));function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function v(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}var m=v((function e(){var t,r,n,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=function(){return a.accessTokenService.getAccessToken()},(r=g(r="getAccessToken"))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.accessTokenService=new i.Ec}));r(93318),r(73143),r(47589),r(67132),r(96111);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeurn e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function T(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e,t,r){return(t=I(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}var B=T((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"getAuthenticationUrl",(function(e){return t.authorizationService.getAuthenticationUrl(w({},e))})),P(this,"linkDeviceWithProvider",(function(e){return t.authorizationService.linkDeviceWithProvider(w({},e))})),P(this,"disconnectDevice",Cp()}}),e)})))),this.authorizationService=new i.j9}));function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":type)}var i,a}var R==new iable:!1})}(e,[{key:"getAccessTokens",value:function(){return this.localDataStorageService.getAccessTokens()}},{key:"getAuthSuiteRequestData",value:function(){return this.localDataStorageService.getAuthSuiteRequestData()}},{key:"getClientId",value:function(){return this.localDataStorageService.getClientId()}},{key:"getDeviceRefreshToken",value:function(){return this.localDataStorageService.getDeviceRefreshToken()}},{key:"getApplicationAccessTossToken()}}]),e}();r(80533),r(6468),r(95462),r(50773);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function L(e,t,r){return t&&F(e.prototype,t),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t,r){return(t=x(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}var U=L((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"authorizationCodeKey","authorizationCode"),j(this,"getRefinedEventData",(function(e){var r="string"==typeof e&&e.includes("authorizationCode")?e:"";return t.removeStartingQuestionMark(r)})),j(this,"removeStartingQuestionMark",(function(e){return"?"===e[0]?e.substring(1,e.length):e})),j(this,"getQueryPalue:t[1]}})),j(this,"parse",(function(e){var r=t.getRefinedEventData(e),n=r&&r.split("&").map((function(e){return t.getQueryParamsData(e)}onCodeKey})).map((function(e){return e.value}));return n.length?n.reduce((function(e){return e})):""}))})),M=r(72100),D=new(r.n(M)()),K="authsuite-success-login",V="authsuite-fail-login";const z=D.on(K,e)},emitSuccess:function(e){return D.emit(K,e)},onFail:function(e){return D.on(V,e)},emitFail:function(e){return D.emit(V,e)}};function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeing(t)}var Y=G((function e(){vunction")}(this,e),W(this,"registerPostLoginMessaging",(function(){"undefined"!=typeof window&&window.addEventListener(thCode(r)}))})),W(this,"broadcastSuccessGetuccess(e)})),this.postMessageParser=new U,this.loginf e},Z(e)}function J(){J=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new k(n||[]);return i(o,"_invoke",{value:T(e,r,s)}),o}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function S(){}var b={};c(b,o,(function(){return this}));var E=Object.getPrototypeOf,C=E&&E(E(O([])));C&&C!==r&&n.call(C,o)&&(b=C);var A=S.prototype=g.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(i,a,o,s){var u=f(e[i],e,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Z(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}})}function T(t,r,n){var i=h;return function(a,o){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===a)throw o;return{value:e,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var c=f(t,r,n);if("normal"===c.type){if(i=n.done?y:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=y,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Z(t)+" is not iterable")}return m.prototype=S,i(A,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:m,configurable:!0}),m.displayName=c(S,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,c(e,u,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},w(_.prototype),c(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new _(l(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(A),c(A,u,"Generator"),c(A,o,(function(){return this})),c(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),B(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;B(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function X(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,i)}function $(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){X(a,n,i,o,s,"next",e)}function s(e){X(a,n,i,o,s,"throw",e)}o(void 0)}))}}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ne(n.key),n)}}function te(e,t,r){return t&&ee(e.prototype,t),r&&ee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function re(e,t,r){return(t=ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}var ie=te((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),re(this,"fetchFreePreviewProviders",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.XU.Color;return t.providersService.getMvpdProviders({logoSchema:e,filterType:i.Nx.FreePreview}).then((function(e){return e.providers}))})),re(this,"fetchProviders",$(J().mark((function e(){var r,n,a,o=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:i.XU.Color,e.next=3,t.providersService.getMvpdProviders({logoSchema:r,filterType:i.Nx.NoFilter}).then((function(e){return e.providers}));case 3:return n=e.sent,e.next=6,t.providersService.getMvpdProviders({logoSchema:r,filterType:i.Nx.Top}).then((function(e){return e.providers}));case 6:return a=e.sent,e.abrupt("return",{topProviders:a,allProviders:n});case 8:case"end":return e.stop()}}),e)})))),re(this,"getMvpdProvider",(function(e){return t.providersService.getMvpdProvider(e)})),this.providersService=new i.v2}));function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ue(n.key),n)}}function se(e,t,r){return t&&oe(e.prototype,t),r&&oe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ue(e){var t=function(e,t){if("object"!==ae(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ae(t)?t:String(t)}var ce=se((function e(){var t,r,n,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=function(e){a.sdkSetupService.setAuthSuiteRequestData(e)},(r=ue(r="setupAuthSuiteRequestData"))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.sdkSetupService=new i.UO}));function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==le(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===le(a)?a:String(a)),n)}var i,a}var he=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"prod"===t.env?n.ConfigBase.setConfig(r(84261)._):n.ConfigBase.setConfig(r(67009)._),this.accountSdkSetup=new ce,this.authSuiteSetup(t)}return function(e,t,r){t&&fe(e.prototype,t),r&&fe(e,r),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"authSuiteSetup",value:function(e){var t=e.clientId,r=e.countryCode;t&&r?this.accountSdkSetup.setupAuthSuiteRequestData({clientId:t,countryCode:r}):console.error("ClientId:[%s] or CountryCode:[%s] is invalid, can not initialize AuthSuite.",t,r)}},{key:"getAuthSuiteServices",value:function(){return{accessService:new p,providersService:new ie,authorizationService:new B,messagingService:new Y,loginEvent:z,localStorageService:new R,accessTokenService:new m}}}]),et(e,r)exportjoin("eturn  t||o( t||i(ht:u(!oid 0)ources:j}}}]);
//# sourceMappingURL=18224-f5525abdb10a6f75677f.min.js.map