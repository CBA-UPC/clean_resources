"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[6826],{69616:function(t,e,n){var i=n(24193),o=n(4906);e.Z=(0,o.Z)(i.Z)((function(t){var e=t.theme;return{boxShadow:"0px 1px 4px rgba(16, 24, 40, 0.25)",background:"linear-gradient(180deg, #202CD3 5.3%, #02E39F 102.34%)",color:e.palette.primary.contrastText,fontWeight:500,fontSize:"1.125rem",lineHeight:"20px",textTransform:"none",borderRadius:"40px",padding:"12px 16px",marginTop:0,marginBottom:"32px","&:hover":{background:"linear-gradient(180deg, #202CD3 5.3%, #02E39F 140.34%)",boxShadow:"none"},"&:focus, &:active":{color:e.palette.primary.contrastText},"&:disabled":{opacity:.4,color:e.palette.primary.contrastText}}}))},14640:function(t,e,n){var i=n(61113),o=n(4906);e.Z=(0,o.Z)(i.Z)((function(t){return{color:t.theme.palette.customGrey[900],letterSpacing:"-.02em",fontSize:"36px",fontWeight:600,lineHeight:"44px",marginBottom:"32px"}}))},6826:function(t,e,n){n.r(e),n.d(e,{default:);var i=n(15861),o=n(4942),r=n(64687),a=n.n(r),l=n(72668),c=n(15718),d=n(17592),u=n(61113),s=n(24193),v=n(85281),p=n(19655),h=n(47313),x=n(53104),m=n(20004),f=n(17455),g=n(28297),b=n(28422),k=n(25258),I=n(69616),w=n(14640),Z=n(31805),y=n(29439),j=n(60790),S=n(58467),A=n(80082);var _=n(46417),T=(0,d.ZP)("form")((function(t){var e=t.theme;return(0,o.Z)({display:"flex",position:"relative",flexDirection:"column",alignItems:"center",fontFamily:'"Outfit", Arial, sans-serif',width:"auto",backgroundColor:"white",padding:"80px 20px 20px",border:"1px solid #dfdfdf",margin:"80px 10px 0"},e.breakpoints.not("xs"),{margin:"120px 0 0",width:"635px"})})),B=(0,d.ZP)("form")((function(t){var e=t.theme;return(0,o.Z)({display:"flex",position:"relative",flexDirection:"column",alignItems:"center",fontFamily:'"Outfit", Arial, sans-serif',width:"auto",backgroundColor:"white",padding:"80px 20px 20px",margin:"80px 10px 0"},e.breakpoints.not("xs"),{margin:"120px 0 0",width:"635px"})})),C=(0,d.ZP)(u.Z)((function(t){return{color:t.theme.palette.customBlue[500],letterSpacing:"0.025em",fontSize:"42px",fontWeight:400,lineHeight:"44px",marginBottom:"32px",textAlign:"center"}}));function E(){var t,e,n,o,r,d,E,U,L,P,D,F,M,O,z,H=function(t){var e,n,i=(0,A.Z)().createAlert,o=(0,S.UO)().invitationId,r=void 0===o?localStorage.getItem("_pb_invitationId"):o,a=l=(0,j.D)(b.Fke,{onCompleted:function(e){var n;a();var i=null===e||void 0===e||null===(n=e.bucketInvitationAccept)||void 0===n?void 0:n.bucketId;i&&t&&(window.location.href="/bucket/".concat(i))},onError:function(t){a(),t.graphQLErrors.forEach((function(t){var e;null===(e=t.extensions)||void 0===e||e.code,i(t.message,"error",t)})),t.graphQLErrors||(k.Z.error(t),i("There was a problem accepting your invitation. Please try again later."))}}),c=(0,y.Z)(l,2),d=c[0],u=c[1];(0,x.Z)(();var s=u.loading,v=null===(e=u.data)||void 0===e||null===(n=e.bucketInvitationAccept)||void 0===n?void 0:n.bucketId,p=Boolean(u.data);return{bucketId:v,called:Boolean(u.called),loading:s,invitationId:r,mutation:d,results:u,success:p}}(!0),W=H.called,R=H.invitationId,N=H.loading,Q=H.mutation,V=H.success,G=(0,A.Z)().createAlert,J=(0,l.a)(b.QUC,{onCompleted:function(t){var e,n,i=t.bucketInvitation;i&&!(0,p.v0)().currentUser&&(null===i||void 0===i?void 0:i.invitationStatus)!==b.BMt.Accepted&&(window.location.href="/auth/login?invitationId=".concat(i.id)),null!==i&&void 0!==i&&i.email&&(null===i||void 0===i?void 0:i.email.toLowerCase())!==(null===(e=(0,p.v0)().currentUser)||void 0===e||null===(n=e.email)||void 0===n?void 0:n.toLowerCase())||(0,p.v0)().currentUser&&(null===i||void 0===i?void 0:i.invitationStatus)===b.BMt.Accepted&&(window.location.href="/bucket/".concat(i.bucketId))},variables:{invitationId:R},skip:!R}),Y=null===(t=J.data)||void 0===t||null===(e=t.bucketInvitation)||void 0===e?void 0:e.bucketId,q=Boolean(null===(n=J.data)||void 0===n||null===(o=n.bucketInvitation)||void 0===o?void 0:o.email),K=(null===(r=J.data)||void 0===r||null===(d=r.bucketInvitation)||void 0===d?void 0:d.email)===(null===(E=(0,p.v0)().currentUser)||void 0===E?void 0:E.email),X=(0,h.useRef)(Q),$=N||V,tt=null===(U=J.data)||void 0===U||null===(L=U.bucketInvitation)||void 0===L?void 0:L.bucketTitle,et=!1;J.data&&null!==J.data.bucketInvitation?F=null===(M=J.data.bucketInvitation)||void 0===M?void 0:M.invitationStatus):F="Invite Link Not Found";(0,p.v0)().currentUser&&q&&!K?null!==(O=(0,p.v0)().currentUser)&&void 0!==O&&null!==(z=O.email)&&void 0!==z&&z.includes("privaterelay.appleid.com")?(F="Sorry for the inconvenience.",et=!0):F="This invitation was not intended for your account.":R?J.error&&(F="There was an issue loading your invitation."):F="Invalid invitation id.";if((0,x.Z)((function(){(0,p.v0)().currentUser&&(localStorage.removeItem("_pb_bucketId"),localStorage.removeItem("_pb_invitationId"))})),(0,h.useEffect)((function(){var t,e;(null===(t=J.data)||void 0===t||null===(e=t.bucketInvitation)||void 0===e?void 0:e.invitationStatus)===b.BMt.Active&&(W||V||N||!R||q&&!K||!(0,p.v0)().currentUser||X.current({variables:{invitationId:R},onError:function(t){t.graphQLErrors.forEach((function(t){var e;if("INVITATION_ALREADY_ACCEPTED"===(null===(e=t.extensions)||void 0===e?void 0:e.code))window.location.href="/bucket/".concat(Y);else G(t.message,"error",t)}))}}))}),[W,R,q,K,N,V,null===(P=J.data)||void 0===P||null===(D=P.bucketInvitation)||void 0===D?void 0:D.invitationStatus,Y,G]),J.loading||!J.called)return(0,_.jsx)(f.Z,{});var nt,it,ot=function(){var t=(0,i.Z)(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=(0,p.v0)(),t.next=4,(0,p.w7)(e);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),k.Z.error(t.t0);case 9:(n=new m.Z).remove("app_auth",g.ZP.cookieOptions),g.O1.forEach((function(t){return n.remove("app_auth",t)})),n.remove("facebook_dtp",g.ZP.cookieOptions),g.O1.forEach((),localStorage.removeItem("reduxPersist:auth"),localStorage.removeItem("_pb_userData:username"),window.location.reload();case 17:case"end":return t.stop()}}),t,null,[[0,6]])})));return ();return F?(0,_.jsx)(Z.eD,{children:(0,_.jsxs)(B,{children:[(0,_.jsx)(c.Z,{color:"primary",sx:{fontSize:"140px"}}),(0,_.jsx)(C,{children:null!==(nt=F)&&void 0!==nt?nt:"Invite Link Not Found"}),!et&&(0,_.jsx)(u.Z,{sx:{textAlign:"center"},children:"Please contact the bucket owner to receive a working link."}),et&&(0,_.jsxs)(u.Z,{sx:{textAlign:"center"},children:["It looks like you are logging in with Apple and have obscured your email address. In order to join this group bucket, your email must match the email used in the invite. Please ask the group bucket owner to invite ",null===(it=(0,p.v0)().currentUser)||void 0===it?void 0:it.email," to the group bucket, or create an invite link for you."]}),(0,p.v0)().currentUser&&(0,_.jsx)(s.Z,{sx:{mt:2},fullWidth:!0,variant:"contained",onClick:ot,children:"Logout"})]})}):(0,_.jsx)(Z.eD,{children:(0,_.jsxs)(T,{children:[(0,_.jsx)("img",{style:{position:"absolute",top:"-60px",width:"120px",marginBottom:"40px",border:"1px solid #dfdfdf",borderRadius:"200px"},src:"".concat(g.ZP.assets.url,"/img/group-bucket/create-bucket.png"),alt:"Invitation Icon"}),(0,_.jsxs)(w.Z,{sx:{textAlign:"center"},children:["Join the ",tt," Bucket"]}),!(0,p.v0)().currentUser&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z,{sx:{textAlign:"center"},children:"Please sign in or sign up in order to join and start collaborating!"}),(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:"24px"},children:[(0,_.jsx)(I.Z,{disabled:$,href:"/auth/login?invitationId=".concat(R),sx:{minWidth:"180px",mr:2},children:"Sign In"}),(0,_.jsx)(I.Z,{disabled:$,href:"/auth/register?invitationId=".concat(R),sx:{minWidth:"180px",ml:2},children:"Sign Up"})]})]}),N&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(v.Z,{size:"72px"}),(0,_.jsx)(u.Z,{sx:{textAlign:"center"},children:"Accepting the invite."})]})]})})}},15718:function(t,e,n){var i=n(64836);e.Z=void 0;var o=i(n(45045)),r=n(46417),a=(0,o.default)((0,r.jsx)("path",{d:"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"}),"LinkOff");e.Z=a}}]);