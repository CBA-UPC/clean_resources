import{a as y}from"./vuex.esm-bundler_aa359dca_r24-02-0_b0_t240129-161140.js";import{P as p,Q as _,L as h,A as c,D as b,N as M,I as o,J as a,B as f,V as g,G as S,O as C}from"./vendor_6ed58054_r24-02-0_b0_t240129-161140.js";import{z as N}from"./lsanalytics-product_ee6481c4_r24-02-0_b0_t240129-161140.js";import V from"./Modal_886b6642_r24-02-0_b0_t240129-161140.js";import{V as w}from"./VProductMediaSSR_5d417f74_r24-02-0_b0_t240129-161140.js";import{useSsrViewStoreProduct as k}from"./ssrViewStoreProduct_cb84dadb_r24-02-0_b0_t240129-161140.js";import{u as T}from"./csrViewStoreInventory_328e6f57_r24-02-0_b0_t240129-161140.js";import{u as P}from"./csrViewStoreNotifyMe_836d5172_r24-02-0_b0_t240129-161140.js";import{T as v}from"./TextField_69ef4928_r24-02-0_b0_t240129-161140.js";import{u as E}from"./useEmail_841316a4_r24-02-0_b0_t240129-161140.js";import{_ as I}from"./_plugin-vue_export-helper_c27b6911_r24-02-0_b0_t240129-161140.js";import"./index_31ad23dc_r24-02-0_b0_t240129-161140.js";import"./trapFocus_6aa864f5_r24-02-0_b0_t240129-161140.js";import"./SpinnerSkeleton_362db941_r24-02-0_b0_t240129-161140.js";import"./i18n_4b81f106_r24-02-0_b0_t240129-161140.js";import"./csrGlobalStoreAppState_f9ff4bfa_r24-02-0_b0_t240129-161140.js";import"./SvgIcon_e55bd28a_r24-02-0_b0_t240129-161140.js";import"./VResponsivePicture_fb50e2e9_r24-02-0_b0_t240129-161140.js";import"./imageUtils_fcbf42ca_r24-02-0_b0_t240129-161140.js";import"./productUtils_e3499a9f_r24-02-0_b0_t240129-161140.js";import"./ssrGlobalStoreHeadMeta_ca820fb3_r24-02-0_b0_t240129-161140.js";import"./csrGlobalStoreCart_c99ec818_r24-02-0_b0_t240129-161140.js";import"./csrGlobalStoreInternationalCarts_2b023aac_r24-02-0_b0_t240129-161140.js";import"./csrViewStorePickupInStore_9251cc88_r24-02-0_b0_t240129-161140.js";import"./csrViewStoreFavorite_1d3eb3f3_r24-02-0_b0_t240129-161140.js";import"./ErrorMessages_003296c8_r24-02-0_b0_t240129-161140.js";import"./dateRules_139f881d_r24-02-0_b0_t240129-161140.js";import"./regexRules_cc2f3e2b_r24-02-0_b0_t240129-161140.js";import"./regexLocalization_16c032f3_r24-02-0_b0_t240129-161140.js";const A={inject:["mq"],components:{Modal:V,VProductMediaSSR:w,TextField:v},data:setup(){const{data:t,emailValidator:e,checkEmailValidation:i}=E();return{email:t.email,emailValidator:e,checkEmailValidation:i}},computed:{...p(k,["productPDP","swatches","activeSwatchCode","productImages","currentProductCode"]),...p(T,["buyOptions","selectedVariant"]),...p(P,["notifyMeModalOpen","notifyMeProduct","notifyMeEmail"]),...y("auth",["loggedIn"]),...y("userProfileState",["uid"]),isMobileimageToUse(){var e,i;if((e=this.notifyMeProduct)!=null&&e.productImage)return(i=this.notifyMeProduct)==null?void 0:i.productImage;const{galleryImage:t}=this.productImages;return t&&t[0]},swatchName(){var e,i;return(e=this.notifyMeProduct)!=null&&e.productColor?(i=this.notifyMeProduct)==null?void 0:i.productColor:(this.swatches.find(||{}).colorName},selectedWaist(){return this.buyOptions.selectedWaist!=="0"?this.buyOptions.selectedWaist:""},selectedLength(){return this.buyOptions.selectedLength!=="0"?this.buyOptions.selectedLength:""},selectedSize(){return this.buyOptions.selectedSize!=="0"?this.buyOptions.selectedSize:""},size(){var t,e;return(t=this.notifyMeProduct)!=null&&t.productSelectedSize?(e=this.notifyMeProduct)==null?void 0:e.productSelectedSize:this.selectedWaist?`${this.selectedWaist}W X ${this.selectedLength}L`:this.selectedSize},productCode(){var t,e,i,r;return(t=this.notifyMeProduct)!=null&&t.productPC13?(e=this.notifyMeProduct)==null?void 0:e.productPC13:(i=this.notifyMeProduct)!=null&&i.productPC9?(r=this.notifyMeProduct)==null?void 0:r.productPC9:this.productPDP.comingSoon?this.currentProductCode:this.selectedVariant},showFormdisabled,methods:{..._(P,["updateNotifyMeStatus","checkNotifyMeStatus"]),closeModalasync subscribeToNotifyMe(){this.submitting=!0,await this.checkEmailValidation()?(this.notifyMeEmail=this.email,this.checkNotifyMeStatus({code:this.productCode}).then(e=>{var r;const i=(r=e==null?void 0:e.data)==null?void 0:r.checkNotifyMeStatus;if(e.errors)this.isSubscribeToNotifyError=!0,this.submitting=!1;else{const{isUserWatching:u}=i;this.userAlreadyRegistered=u,u||this.updateNotifyMeStatus({code:this.productCode}).then(s=>{var n,l;if(s.statusCode==="200"){this.signUpSuccess=!0;const m=((n=this.notifyMeProduct)==null?void 0:n.productPC9)||this.currentProductCode,d=((l=this.notifyMeProduct)==null?void 0:l.productPC13)||this.selectedVariant;N({pc9:m,pc13:d})}else s.statusCode==="409"&&(this.userAlreadyRegistered=!0)}).catch(s=>{throw this.submitting=!1,this.isSubscribeToNotifyError=!0,new Error(s)})}}).catch(e=>{throw this.submitting=!1,this.isSubscribeToNotifyError=!0,new Error(e)})):this.submitting=!1}},createdunmounted(){this.notifyMeEmail="",this.notifyMeProduct={productCode:"",productPC13:"",productName:"",productImage:"",productSelectedSize:"",productColor:""}}},O={class:"modal_title"},z={class:"notify-me-modal__body"},$={class:"notify-me-product-section"},L={class:"notify-me-product-image"},U={class:"notify-me-product-info"},W={class:"notify-me-product-name"},D={class:"notify-me-product-details"},R={class:"notify-me-product-details"},F={class:"notify-me-email-prompt"},B={class:"notify-me-email-wrapper"},q=["aria-label","disabled"],G={class:"notify-me-confirmation"},j={class:"notify-me-confirmation-headline"},J={class:"notify-me-confirmation-subtext"},Q=["aria-label"];function X(t,e,i,r,u,s){const n=h("VProductMediaSSR"),l=h("TextField"),m=h("Modal");return c(),b(m,{class:"notify-me-modal",onCloseModal:s.closeModal,"lock-scroll":!s.isMobile,"modal-name":"notifyMeModal"},{header:M(,body:M(()=>[o("div",z,[s.showForm?(c(),f(g,{key:0},[o("div",$,[o("div",L,[t.notifyMeProduct.productImage||t.productImages.galleryImage?(c(),b(n,{key:0,"aspect-ratio":"default","disable-bottom-crop":!0,"product-image":s.imageToUse,"alt-text":t.notifyMeProduct.altText||t.productPDP.altText,"column-width":5,"aspect-ratio-width":3,"aspect-ratio-height":4},null,8,["product-image","alt-text"])):S("",!0)]),o("div",U,[o("p",W,a(t.notifyMeProduct.productName||t.productPDP.name),1),o("p",D,a(s.swatchName),1),o("p",R,a(s.size),1)])]),o("p",F,a(t.$t("i18n.notifyEnterEmailAddress")),1),o("div",B,[C(l,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=,ref:"emailInput","is-required":!0,"label-text":t.$t("i18n.formEmailAddressLabel"),errors:r.emailValidator.email.$errors},null,8,["modelValue","label-text","errors"])]),o("button",{type:"button",onClick:e[1]||(e[1]=d=>s.subscribeToNotifyMe()),class:"action-btn","aria-label":t.$t("i18n.submitCTA"),disabled:t.submitting},[o("span",null,a(t.$t("i18n.submitCTA")),1)],8,q),t.isSubscribeToNotifyError?(c(),f("div",{key:0,class:"error-msg",role:"alert",ref:"errorDiv"},a(t.$t("i18n.OtherError")),513)):S("",!0)],64)):(c(),f(g,{key:1},[o("div",G,[o("p",j,a(t.signUpSuccess?t.$t("i18n.thanksNotifyMe"):t.$t("i18n.youreAlreadyOnList")),1),o("p",J,a(t.$t("i18n.notifyMeGetAvailabilityAlert")),1)]),o("button",{type:"button","aria-label":t.$t("i18n.done"),onClick:e[2]||(e[2]=,class:"action-btn"},[o("span",null,a(t.$t("i18n.done")),1)],8,Q)],64))])]),_:1},8,["onCloseModal","lock-scroll"])}const Nt=I(A,[["render",X],["__scopeId","data-v-1f9500c2"]]);export{Nt as default};
