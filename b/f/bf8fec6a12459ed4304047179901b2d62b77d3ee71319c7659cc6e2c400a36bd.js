"use strict";(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[5090],{85287:49577:(e,t,a)=>{a.d(t,{Z:()=>y});var r,i,p,s,o,n,g=a(3e4),d=a(66062),l=(a(91938),a(76955)),h=a(5154),m=a.n(h),c=a(29466),v=a.n(c),b=a(16884),u=a(85287),I=a(75457),f=a(48516),k=a(10793),Z=Math.ceil(2.5);class y extends l.Component{static get defaultProps(){return{blogId:0,entryId:"",entryYm:"",fetchCommentsRequest:m(),isOfficial:void 0,position:null,themeId:"",trackTapLog:m()}}houldComponentUpdate(e){return this.props.amebaId!==e.amebaId||this.props.blogId!==e.blogId||this.props.className!==e.className||this.props.entryId!==e.entryId||this.props.entryYm!==e.entryYm||this.props.fetchCommentsRequest!==e.fetchCommentsRequest||this.props.isOfficial!==e.isOfficial||this.props.pageType!==e.pageType||this.props.position!==e.position||this.props.themeId!==e.themeId||this.props.trackTapLog!==e.trackTapLog||!v()(this.props.nextItem,e.nextItem)||!v()(this.props.paging,e.paging)||!v()(this.props.prevItem,e.prevItem)}getLinkUrl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{amebaId:t,entryId:a,entryYm:r,pageType:i,themeId:p}=this.props,s=(0,b.Z)(i,{amebaId:t,entryId:a,entryYm:r,page:e,themeId:p});return i===I.Z.Entry?"".concat(s,"#cbox"):s}getPagingRange(){var{paging:e}=this.props,t=e.max_page||0,a=0,r=0;if(t<=1)return{endPage:r,startPage:a};if(5>=t)return{endPage:r=t,startPage:a=1};var i=e.current_page||1;return Z>=i?{endPage:r=5,startPage:a=1}:((r=(a=i-Z+1)+5-1)>t&&(a=t-5+1,r=t),{endPage:r,startPage:a})}handleClickCommentPaging(e){var t=this;return(0,d.Z)((function*(){e.preventDefault();var{blogId:a,entryId:r}=t.props,i=e.target.getAttribute("data-link-page");null==i&&(i=e.target.parentElement.getAttribute("data-link-page"));var p=!i||parseInt(i,10)<1?1:i,s=!p||p<1?0:50*(p-1);yield t.props.fetchCommentsRequest({blogId:a,entryId:r,excludeReplies:!1,offset:s,limit:50,currentPage:p});var o=document.getElementById("cbox");if(o){var n=document.getElementById("ambHeader"),g=n?n.clientHeight:u.S,d=window.pageXOffset||document.documentElement.scrollLeft;window.scroll(d,o.offsetTop-g)}}))()}hasPrev(){return this.props.paging.current_page>this.props.paging.prev_page}hasNextenderPrevLink(){if(!this.hasPrev())return null;var{pageType:e,prevItem:t}=this.props,a=e===I.Z.AmemberEntry||e===I.Z.Entry;if(this.props.position){var p="top"===this.props.position?"upper":"lower";return(0,g.Z)(k.f,{pageId:e,sectionId:"prev-page_".concat(p),serviceId:this.props.isOfficial?"official":"general",tapLogger:this.props.trackTapLog},void 0,(0,g.Z)(f.Z,{className:"previousPage","data-link-page":this.props.paging.prev_page,role:a?"button":void 0,tabIndex:a?"0":void 0,targetUrl:this.getLinkUrl(this.props.paging.prev_page),title:t.title,onClick:a?this.handleClickCommentPaging:void 0},void 0,r||(r=(0,g.Z)("span",{className:"pagingArrow"},void 0,"<<\xa0")),t.label))}return(0,g.Z)(f.Z,{className:"previousPage","data-link-page":this.props.paging.prev_page,role:a?"button":void 0,tabIndex:a?"0":void 0,targetUrl:this.getLinkUrl(this.props.paging.prev_page),title:t.title,onClick:a?this.handleClickCommentPaging:void 0},void 0,i||(i=(0,g.Z)("span",{className:"pagingArrow"},void 0,"<<\xa0")),t.label)}renderNextLink(){if(!this.hasNext())return null;var{pageType:e,nextItem:t}=this.props,a=e===I.Z.AmemberEntry||e===I.Z.Entry;if(this.props.position){var r="top"===this.props.position?"upper":"lower";return(0,g.Z)(k.f,{pageId:e,sectionId:"next-page_".concat(r),serviceId:this.props.isOfficial?"official":"general",tapLogger:this.props.trackTapLog},void 0,(0,g.Z)(f.Z,{className:"nextPage","data-link-page":this.props.paging.next_page,role:a?"button":void 0,tabIndex:a?"0":void 0,targetUrl:this.getLinkUrl(this.props.paging.next_page),title:t.title,onClick:a?this.handleClickCommentPaging:void 0},void 0,t.label,p||(p=(0,g.Z)("span",{className:"pagingArrow"},void 0,"\xa0>>"))))}return(0,g.Z)(f.Z,{className:"nextPage","data-link-page":this.props.paging.next_page,role:a?"button":void 0,tabIndex:a?"0":void 0,targetUrl:this.getLinkUrl(this.props.paging.next_page),title:t.title,onClick:a?this.handleClickCommentPaging:void 0},void 0,t.label,s||(s=(0,g.Z)("span",{className:"pagingArrow"},void 0,"\xa0>>")))}renderFirstLink(){var e=this.props.paging.current_page||1;if((this.props.paging.max_page||1)<=2||e<=1)return null;var{pageType:t}=this.props,a=t===I.Z.AmemberEntry||t===I.Z.Entry;return(0,g.Z)(l.Fragment,{},void 0,(0,g.Z)(f.Z,{className:"firstPage","data-link-page":1,role:a?"button":void 0,tabIndex:a?"0":void 0,targetUrl:this.getLinkUrl(1),title:"\u6700\u65b0\u304b\u3089",onClick:a?this.handleClickCommentPaging:void 0},void 0,"\u6700\u65b0"),o||(o=(0,g.Z)("span",{},void 0,"\xa0|\xa0")))}renderLastLink(){var e=this.props.paging.current_page||1,t=this.props.paging.max_page||1;if(t<=2||t<=e)return null;var{pageType:a}=this.props,r=a===I.Z.AmemberEntry||a===I.Z.Entry;return(0,g.Z)(l.Fragment,{},void 0,n||(n=(0,g.Z)("span",{},void 0,"\xa0|\xa0")),(0,g.Z)(f.Z,{className:"lastPage","data-link-page":t,role:r?"button":void 0,tabIndex:r?"0":void 0,targetUrl:this.getLinkUrl(t),title:"\u6700\u521d\u304b\u3089",onClick:r?this.handleClickCommentPaging:void 0},void 0,"\u6700\u521d"))}renderPageNum(e,t){for(var a=this.props.paging.current_page||1,r=[],{pageType:i}=this.props,p=i===I.Z.AmemberEntry||i===I.Z.Entry,s=e;s<=t;s+=1){var o=void 0;o=a===s?(0,g.Z)("span",{className:"now"},"now",s):(0,g.Z)(f.Z,{"data-link-page":s,role:p?"button":void 0,tabIndex:p?"0":void 0,targetUrl:this.getLinkUrl(s),title:"page ".concat(s),onClick:p?this.handleClickCommentPaging:void 0},"page".concat(s),s),r.push(o),s<t&&r.push((0,g.Z)("span",{},"split".concat(s),"\xa0|\xa0"))}return r}render(){var{endPage:e,startPage:t}=this.getPagingRange();return e<1&&t<1?null:(0,g.Z)("div",{className:this.props.className},void 0,this.renderPrevLink(),this.renderFirstLink(),this.renderPageNum(t,e),this.renderLastLink(),this.renderNextLink())}}y.displayName="PcPaginationOld"},26095:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(3e4),i=a(76955),p=(a(91938),a(10793)),s=a(48516),o=a(16884),n=a(75457);class g extends i.Component{shouldComponentUpdate(e){return this.props.bloggerAmebaId!==e||this.props.blogTitle!==e.blogTitle||this.props.isOfficial!==e.isOfficial||this.props.orderId!==e.orderId||this.props.pageType!==e.pageType||this.props.readerAmebaId!==e.readerAmebaId||this.props.trackTapLog!==e.trackTapLog}render(){return(0,r.Z)("li",{},void 0,(0,r.Z)(p.f,{bloggerAmebaId:this.props.bloggerAmebaId,contentId:this.props.readerAmebaId,orderId:this.props.orderId,pageId:this.props.pageType,sectionId:"items",serviceId:this.props.isOfficial?"official":"general",tapLogger:this.props.trackTapLog},void 0,(0,r.Z)(s.Z,{target:"_blank",targetUrl:(0,o.Z)(n.Z.BlogTop,{amebaId:this.props.readerAmebaId})},void 0,(0,r.Z)("span",{className:"reader_id"},void 0,"[",this.props.readerAmebaId,"\u3055\u3093]"),(0,r.Z)("span",{className:"reader_blog"},void 0,this.props.blogTitle))))}}g.displayName="PcReaderListItemOld"},35090:(e,t,a)=>{a.r(t),a.d(t,{default:);var r,i,p,s,o,n=a(3e4),g=a(66062),d=(a(91938),a(76955)),l=a(66948),h=a(97175),m=a(55752),c=a.n(m),v=a(29466),b=a.n(v),u=a(27169),I=a(73614),f=a(12942),k=a(5563),Z=a(88120),y=a(26095),L=a(49577),P=a(57224);function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=parseInt(e,10);return!t||t<1?1:t}function C(){return(C=(0,g.Z)((function*(e){var{dispatch:t,getState:a,match:r}=e,{params:i}=r,p=i.amebaId,s=yield t((0,I.Rs)(p));if(s&&s.error)"Not Found"===c()(s,["payload","error","message"])?t((0,f.Qn)(p)):t((0,f.$F)(p));else{var o=c()(a(),["bloggerState","bloggerMap",p,"blog"]),n=a().bloggerState.blogMap[o];if(n&&n.blog_id){var g=T(i.page);yield t((0,u.rF)(n.blog_id,g,30))}else t((0,f.Qn)(p))}}))).apply(this,arguments)}var _=(0,l.$j)((function(e,t){var{match:a}=t,{params:r,route:i}=a,{amebaId:p,page:s}=r,{bloggerState:o,readerState:n}=e,{blogMap:g,bloggerMap:d}=o,l=d[p]||{},h=l.seo_setting||{},m=l.attribute||{},{isOfficial:c}=m,v=g[l.blog]||{},b=T(s),u=n.readerPageMap["".concat(v.blog_id,"/").concat(b)]||{},I=(u.data||[]).map((e=>{var t=g[e]||{};return{readerAmebaId:t.blog_name||"",blogTitle:t.blog_title||""}})),f=!1!==u.loading,k=u.paging||{},{pageType:Z}=i;return{amebaId:p,blog:v,isOfficial:c,readers:I,readersLoading:f,pageType:Z,paging:k,seoSetting:h}}),{trackTapLog:k.XI})(r=(0,h.provideHooks)({defer:)((p=i=class extends d.Component{shouldComponentUpdate(e){return!(this.props.amebaId===e.amebaId&&this.props.isOfficial===e.isOfficial&&this.props.pageType===e.pageType&&this.props.readersLoading===e.readersLoading&&this.props.trackTapLog===e.trackTapLog&&b()(this.props.blog,e.blog)&&b()(this.props.paging,e.paging)&&b()(this.props.readers,e.readers)&&b()(this.props.seoSetting,e.seoSetting))}renderReaderList(){var e=(this.props.readers||[]).map(((e,t)=>(0,n.Z)(y.Z,{blogTitle:e.blogTitle,bloggerAmebaId:this.props.amebaId,isOfficial:this.props.isOfficial,orderId:"".concat(t+1),pageType:this.props.pageType,readerAmebaId:e.readerAmebaId,trackTapLog:this.props.trackTapLog},e.readerAmebaId)));return(0,n.Z)("ul",{},void 0,e," ")}renderEmptyReaderList(){return this.props.readersLoading?s||(s=(0,n.Z)(P.m,{})):null}renderPcPagination(e){return(0,n.Z)(L.Z,{amebaId:this.props.amebaId,className:"page",isOfficial:this.props.isOfficial,nextItem:{label:"\u6b21\u306e\u30da\u30fc\u30b8",title:"\u6b21\u306e\u30da\u30fc\u30b8\u3078"},pageType:this.props.pageType,paging:this.props.paging,position:e,prevItem:{label:"\u524d\u306e\u30da\u30fc\u30b8",title:"\u524d\u306e\u30da\u30fc\u30b8\u3078"},trackTapLog:this.props.trackTapLog})}render(){var e=this.props.readersLoading||this.props.readers.length<1;return(0,n.Z)(d.Fragment,{},void 0,this.renderPcPagination("top"),(0,n.Z)("div",{id:"reader_list"},void 0,(0,n.Z)(Z.F,{blog:this.props.blog,paging:this.props.paging,readers:this.props.readers,seoSetting:this.props.seoSetting}),o||(o=(0,n.Z)("h3",{className:"title"},void 0,"\u3053\u306e\u30d6\u30ed\u30b0\u306e\u30d5\u30a9\u30ed\u30ef\u30fc")),e?this.renderEmptyReaderList():this.renderReaderList()),this.renderPcPagination("bottom"))}},i.displayName="PcReaderListOld",r=p))||r)||r}}]);