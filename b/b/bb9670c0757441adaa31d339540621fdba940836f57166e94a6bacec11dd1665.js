![function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s}));const r={playerError:"player_error",clientError:"client-error",uncaughtRuntimeError:"uncaught_runtime_error",clientErrorPrefix:"Client error: ",gaGenericEvent:"GA - Event - Generic Event",volumeChange:"volume change",videoLoaded:"video-loaded",invalidStreamInterval:"invalid-stream-interval",fullScreenInvalidUrl:"fullscreen_fake_livefeed_error_invalid_url",load:"load",clicks:"clicks",select:"select",slideBarOpen:"slide-bar-open",personalizedBadge:"personalized badge load",forcedBadge:"forced badge load",showSection:"show-section",hotOrNotDecision:"hotOrNotDecision"},i={label:"data-ga-label",category:"data-ga-category",action:"data-ga-action",redirectUrl:"data-ga-redirect-url",videoLoaded:"data-ga-action-video-loaded",layoutSection:"data-ga-layout-section",performerName:"data-ga-performer-name",displayName:"data-ga-display-name",hoveredTile:"data-ga-hovered-tile",testVariant:"data-ga-ab-test-variant",testName:"data-ga-ab-test-name",videoFile:"data-ga-video-file",imageId:"data-ga-image-id",contentCategory:"data-ga-content-category",scene:"data-ga-scene"},o={eventCategory:"eventCategory",eventAction:"eventAction",eventLabel:"eventLabel",layoutSection:"layoutSection",performerName:"performerName",displayName:"displayName",videoFile:"videoFile",imageId:"imageId",isNewbie:"isNewbie",cohortId:"cohortId",cohortVersion:"cohortVersion",contentCategory:"contentCategory",scene:"scene",showId:"showId",isHotDealActive:"isHotDealActive"},a={player:"player"},s={stream:"stream",video:"video",callToAction:"call to action",chat:"chat",image:"image",livePreRoll:"livepreroll"};ncodeURIComponent("{$utmContent}");let c=()=>{},l=null,d=!1,f={};const p={event:r.gaGenericEvent,eventValue:0,eventInteraction:!0},E=v=h=g=m=b=y=S=({target:t,which:n})=>{if(!t||0===n||3===n||t.classList&&t.classList.contains("minion-debug-clickable")||t.nodeName&&"body"===t.nodeName.toLowerCase())return;const{category:r,action:u,label:d,performerName:f,displayName:p,redirectUrl:E,contentCategory:v,scene:h}=i,m=2===n&&l?l:c;do{if(t){if(t.getAttribute(d)){const{nodeName:n}=t,c=t.getAttribute(i.hoveredTile),l=t.getAttribute(i.videoFile),y=t.getAttribute(i.imageId);let S={[o.eventCategory]:e.document.body.getAttribute(r),[o.eventAction]:t.getAttribute(u)||"clicks",[o.eventLabel]:c?s.stream:t.getAttribute(d),[o.layoutSection]:c?a.player:b(t),[o.performerName]:t.getAttribute(f),[o.displayName]:t.getAttribute(p),[o.contentCategory]:t.getAttribute(v),[o.scene]:t.getAttribute(h),[o.videoFile]:l,[o.imageId]:y};g(S),t.hasAttribute(E)&&"body"!==n.toLowerCase()?(e.open(t.getAttribute(E)),m(t)):"a"===n.toLowerCase()&&t.hasAttribute("href")&&m(t);break}t=t.parentNode}}while(t&&t.parentNode&&"body"!==t.nodeName.toLowerCase())};const T=t.a=).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"l",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"p",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"j",(function(){return E})),n.d(t,"c",(function(){return v})),n.d(t,"i",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"m",(function(){return m})),n.d(t,"d",(function(){return b})),n.d(t,"o",(function(){return y})),n.d(t,"b",(function(){return S})),n.d(t,"g",(function(){return T})),n.d(t,"n",(function(){return A}));var r=n(10),i=n.n(r),o=n(7),a=n(12),s="(max-width: 400px), (max-height: 300px)",u=function(t){if(t){var n=e.playerConfigs;return(void 0===n?{}:n)[t]||{}}};function c(t){var n,r;n=r=e.addEventListener("message",r)}var l=function(e){return e.replace(/\[([^\]]+?)\]/gi,()},d=function(e,t){var n=t.performerId,r=t.displayName,i=t.videoFile,a=t.imageId;n&&e.setAttribute(o.e.performerName,n),r&&e.setAttribute(o.e.displayName,r),i&&e.setAttribute(o.e.videoFile,i),a&&e.setAttribute(o.e.imageId,a)};function f(t){var n=t.commandType,r=t.value,i=t.instanceId;e.postMessage({instanceId:i,type:n,value:r},"*")}var p=E=v=function(){var e=document.body.style.display;document.body.style.display="none",document.body.offsetHeight,document.body.style.display=e},h=function(e,t,n){return f({instanceId:e?e.id:0,commandType:a.e,value:{buttonId:t,gaLabel:n}})},g=function(e){return f({instanceId:e?e.id:0,commandType:a.a})},m=b=function(){return new Logger({prefix:{value:"[CREATIVE]",backgroundColor:"#000",color:"#fff",bold:!0}})},y=function(e,t){return function(e){return Object.entries(e).map((function(e){var t,n=i()(e,2),r=n[0],o=n[1];return[(t=r,t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),o]}))}(t).forEach((function(t){var n=i()(t,2),r=n[0],o=n[1];e=e.replace(new RegExp(r,"g"),o)})),e},S=function e(t){if(!t||"body"===t.nodeName.toLowerCase())return null;var n=t.getAttribute(o.e.label);return n||e(t.parentNode)},T=function(e){return encodeURIComponent("?")+Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(e[t]?encodeURIComponent(e[t]):"")})).join(encodeURIComponent("&"))},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object.entries(e).forEach((function(e){var n=i()(e,2)[1],r=(n=void 0===n?{}:n).tearDown,o=void 0===r?null:r;return o instanceof Function&&o({completely:t})}))},A=).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u}));n(13),n(17),n(10),e.document.documentMode;var r=var i=o=function(){},a=s=a("firefox"),u=a("android")&&s}).call(this,n(4))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s}));var r="CREATIVE_SHOW_END_SCREEN",i="userNavigated",o="LOAD_NEXT_MODEL",a="SHARED_RELAY_CONNECTION_OPENED",s=[208,200]},function(e,t,n){e.exports=n(61)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return a}));var r=["hasSound","streamList","isMobile","isPrivate","c2cEnabled","hotShowAvailable","kingOfTheRoom","roomTopic","interactiveToyStatus","streamInfoData","runningShowType","hotDeal"],i={relay:{prefix:{backgroundColor:"#9747ff",color:"#fff",bold:!0}},stream:{prefix:{backgroundColor:"#2ba683",color:"#fff",bold:!0}},preroll:{prefix:{backgroundColor:"#b0009e",color:"#fff",bold:!0}},main:{prefix:{backgroundColor:"#007be5",color:"#fff",bold:!0}}},o={minimum:1e3,fallback:3e3},a=500},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));var r,i=n(9),o=n.n(i),a=n(7),s=0,u="fullscreen_fake_livefeed_error_empty_playlist",c=function(e,t,n,r){++s<6&&t&&n&&e.sendCustomEvent("client-error",{errorCode:t,errorMessage:n},r)},l=function(t,n,i,s){var u,c;return r=null!==(u=r)&&void 0!==u?u:e.document.body.getAttribute(a.e.category),c={},o()(c,a.b.eventCategory,r),o()(c,a.b.eventAction,t),o()(c,a.b.eventLabel,n),o()(c,a.b.layoutSection,i),o()(c,a.b.performerName,s.performerId),o()(c,a.b.displayName,s.displayName),o()(c,a.b.isNewbie,s.isNewbie),c},d=function(e,t,n,r,i){var o=l(e,t,n,r);return o[a.b.videoFile]=i,o}}).call(this,n(4))},function(e,t,n){"use strict";var r=n(8),i={"&#039;":"'","<br />":"\n","<br/>":"\n"};n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var o=a=function(e,t){return Object(r.o)(e,{"{$performerName}":t})},s=function(e,t,n){return Object(r.o)(e,{"{user}":t,"{amount}":n})}},function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return S}));var r=n(1),i=n.n(r),o=n(6),a=n.n(o),s=n(2),u=n.n(s),c=n(0),l=n.n(c),d=n(3),f=n.n(d),p=n(5),E=n.n(p),v=n(38),h=n(22),g=n(19),m=function(e){function t(e){var n,r=e.sender,o=e.message,a=e.isMobile,s=e.amount;return i()(this,t),(n=u()(this,l()(t).call(this))).sender=r,n.message=o,n.isMobile=a,n.amount=s,n}return f()(t,e),a()(t,[{key:"connectedCallback",value:function(){var e=new v.a(this.sender),t=new h.a(this.message);this.appendChild(e),this.appendChild(t),this.isMobile&&this.setAttribute("mobile","")}}]),t}(E()(HTMLElement)),b=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),t}(m),y=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),a()(t,[{key:"connectedCallback",value:function(){this.message=this.message.replace(/\\n/gi,"<br/>");var e=new h.a(this.message);this.appendChild(e)}}]),t}(m),S=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),a()(t,[{key:"connectedCallback",value:function(){this.message=Object(g.a)(this.message,this.sender,this.amount);var e=new h.a(this.message);this.appendChild(e)}}]),t}(m);e.customElements.define("pt-chat-message",m),e.customElements.define("pt-performer-chat-message",b),e.customElements.define("pt-tip-chat-message",S),e.customElements.define("pt-welcome-chat-message",y)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(6),i=n.n(r),o=n(1),a=n.n(o),s=n(2),u=n.n(s),c=n(0),l=n.n(c),d=n(3),f=n.n(d),p=n(5),E=n.n(p),v=n(8),h=function(e){function t(){return a()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),t}(E()(HTMLElement)),g=function(e){function t(){return a()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),i()(t,[{key:"connectedCallback",value:function(){this.setAttribute("value",Object(v.a)(this.getAttribute("value")))}}]),t}(h);e.customElements.define("pt-chip",h),e.customElements.define("pt-emoji-chip",g)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(1),i=n.n(r),o=n(6),a=n.n(o),s=n(2),u=n.n(s),c=n(0),l=n.n(c),d=n(3),f=n.n(d),p=n(5),E=n.n(p),v=n(19),h=function(e){function t(e){var n;return i()(this,t),(n=u()(this,l()(t).call(this))).message=e,n}return f()(t,e),a()(t,[{key:"connectedCallback",value:]),t}(E()(HTMLElement));e.customElements.define("pt-message-body",h)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n(27),i=n(8),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.player,n=function(e){var n=e.target,o=e.which;if(n instanceof HTMLAnchorElement&&(n.parentElement instanceof r.a||n.closest("pt-footer"))){Object(i.h)(t);var a=Object(i.b)(n);Object(i.i)(t,o,a)}};return document.body.addEventListener("click",n),{tearDown:function(){document.body.removeEventListener("click",n)}}},a=function(t){var n=t.predefinedMessageSelector,r=t.guestInput,o=t.chat,a=t.ctaButton,s=function(){n&&(n.removeAttribute("hidden"),r.setAttribute("hidden",""),null==o||o.setAttribute("hidden",""),e.matchMedia(i.l).matches&&(null==a||a.setAttribute("hidden","")))};return null==r||r.addEventListener("click",s),{tearDown:},s=function(e){var t=e.predefinedMessageSelector,n=e.guestInput,r=e.chat,i=e.ctaButton,o=function(){null==t||t.setAttribute("hidden",""),null==n||n.removeAttribute("hidden"),null==r||r.removeAttribute("hidden"),null==i||i.removeAttribute("hidden")};return null==t||t.closeIcon.addEventListener("click",o),{tearDown:function(){null==t||t.closeIcon.removeEventListener("click",o)}}}}).call(this,n(4))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r="creativeShown",i=["creativeDisplayed","displayCreative"]},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r=n(13),i=n.n(r),o=n(17),a=n.n(o),s=n(1),u=n.n(s),c=n(2),l=n.n(c),d=n(0),f=n.n(d),p=n(6),E=n.n(p),v=n(3),h=n.n(v),g=n(5),m=function(e){function t(){var e;return u()(this,t),(e=l()(this,f()(t).call(this))).element=document.createElement("a"),e}var n;return h()(t,e),E()(t,[{key:"attributeChangedCallback",value:function(e,t,n){switch(e){case"target":case"href":this.element[e]=n}}}],[{key:"observedAttributes",get:]),E()(t,[{key:"connectedCallback",value:(n=a()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.appendChild(this.element);case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"hrefTpl",get:function(){return this.getAttribute("href-tpl")},set:]),t}(n.n(g)()(HTMLElement));e.customElements.define("pt-redirect-layer",m)}).call(this,n(4))},function(e,t,n){"use strict";let r=null,i=null;const o={root:null,rootMargin:"0px",threshold:.5};function a(e=50,t=50){const n=document.body.getBoundingClientRect();return n.width>=e&&n.height>=t}function s(e){e.forEach(e=>{const{isIntersecting:t}=e;t&&(a()?c():window.addEventListener("resize",u))})}unction c(){r&&r.disconnect(),window.removeEventListener("resize",u),i()}function l(e){i=e;const t=document.querySelector("body");r=function(e,t,n){if(!e)return console.error("Cannot observe element, it seems its missing"),null;if(!n)return console.error("Cannot setup observer, options are missing"),null;let r=new IntersectionObserver(t,n);return r.observe(e),r}(t,s,o)}t.a=,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(21),i=function(e,t){if(e&&t&&t.playerClass){var n=function(n){var i=n.target;if(!(!i instanceof r.a)){var o=i.getAttribute("key");o&&(i.setAttribute("disabled",""),t.sendPredefinedMessage(o),e.closeIcon.click())}};return e.addEventListener("click",n),{tearDown:function(){e.removeEventListener("click",n)}}}},o=function(e,t){if(e&&t){var n=function(e){var n=e.target;if(!(!n instanceof r.a)){var i=n.getAttribute("key"),o=n.getAttribute("value");i&&t.addSelfMessage(o)}};return e.addEventListener("click",n),{tearDown:function(){e.removeEventListener("click",n)}}}},a=function(e,t){return i(e,t)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return S}));var r=n(9),i=n.n(r),o=n(26),a=n.n(o);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c="forcePerformer",l="resumeStream",d="pauseStream",f="muteStream",p="unMuteStream",E="setStreamVolume",v="endSession",h="startPlayback",g="stopStream",m="toggleVolume",b=function(t){var n=function(e){var n=e.data,r=void 0===n?{}:n;t.log(r)};return e.addEventListener("message",n),{tearDown:function(){e.removeEventListener("message",n)}}},y=function(t,n){if(n){var r=function(e){var t=e.data,r=void 0===t?{}:t,i=r.type,o=void 0===i?"":i,s=r.value,b=void 0===s?"":s,y=r.instanceId,S=void 0===y?"":y;if(n.id===S)switch(o){case c:var T=function(e){var t;return"object"===a()(e)&&e instanceof Object?t={performerObject:u({},e)}:"string"==typeof e&&e&&(t={performerId:e}),t}(b);n.start(T);break;case l:n.resume();break;case d:n.pause();break;case f:n.mute();break;case p:n.unmute();break;case E:n.setVolume(parseFloat(b)||.5);break;case g:n.stop();break;case v:n.destroy();break;case m:n.toggleVolume();break;case h:n.start()}};return e.addEventListener("message",r),{tearDown:function(){e.removeEventListener("message",r)}}}},S=).call(this,n(4))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=i=function(e){return e.setAttribute("hidden","")}},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return g}));var r=n(10),i=n.n(r),o=n(9),a=n.n(o),s=n(12),u=n(8),c=n(11);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={},p=E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.playerInstance,n=e.performerData,r=void 0===n?null:n,i=e.loadNextModel,o=void 0!==i&&i;p(t);var a=d({},r||{},{loadNextModel:o});t.start(a)},v=function(e){return e.hasStarted?e.resume():E({playerInstance:e})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.playerInstance,n=e.performerData,r=e.loadNextModel,i=e.delay,o=void 0===i?0:i;p(t),f[t.id]=setTimeout(E.bind({},{playerInstance:t,performerData:n,loadNextModel:r}),o)},g=function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(t){var a=r.maxSuccessfulConnectionLimit,l=r.maxFailedConnectionLimit,d=r.reconnection,f=!o.length,v=f?a:Math.min(a,o.length-1),g=f?l:Math.min(l,o.length-1),m=d.intervalMin,b=d.intervalMax,y=0,S=0,T=!1,_=function(e){S<v?(null==n||n.log("Reconnect after successful session, reason: ".concat(e)),E({playerInstance:t,loadNextModel:f})):Object(u.h)(t)},A=function(e){if(++y<g){var r=Object(c.d)(m,b);null==n||n.log("Reconnecting after failed session (delay: ".concat(r,"ms), reason: ").concat(e)),t.stop(),h({playerInstance:t,loadNextModel:f,delay:r})}else Object(u.h)(t)},O=R=function(e){var r=e.data,o=void 0===r?{}:r,a=o.type,u=void 0===a?"":a,c=o.value,l=void 0===c?"":c,d=o.instanceId,f=void 0===d?"":d;if(t.id===f)switch(u){case s.a:case LiveStreamPlayer.events.player.SESSION_STARTED:p(t),T=!1;break;case LiveStreamPlayer.events.player.STREAM_STARTED:S++,T=!0;break;case LiveStreamPlayer.events.relay.FUNCTION_CALL:if(l.funcName===LiveStreamPlayer.events.relayFunctionCalls.CLOSE_CONNECTION){var E=i()(l.data,1)[0].split(" "),v=parseInt(E.shift()),h=E.join(" ");null==n||n.log("Close connection function call: statusCode: ".concat(v,", reason: ").concat(h)),s.b.includes(v)&&O("Reconnect after Graceful StatusCode (StatusCode=".concat(v,")"),"Reconnect before the stream started")}break;case LiveStreamPlayer.events.player.IS_PRIVATE:!0===l.current&&O("Performer is on private","Performer went private during live-preroll playback");break;case s.c:O("Creative changed the performer","Reconnect before the stream started");break;case LiveStreamPlayer.events.player.PLAYER_ERROR:case LiveStreamPlayer.events.player.PERFORMER_REQUEST_FAILED:case LiveStreamPlayer.events.player.PERFORMER_REQUEST_FAILED_INVALID_PERFORMER:case LiveStreamPlayer.events.player.PERFORMER_REQUEST_FAILED_WRONG_STATUS:case LiveStreamPlayer.events.player.RELAY_FAILED:case LiveStreamPlayer.events.player.STREAM_TIMEOUT:O("Error happened during the stream playback, ".concat(u),u)}};return e.addEventListener("message",R),{tearDown:function(){e.removeEventListener("message",R)}}}}}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r=i=).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(24),i=n(28);const o=t=>{const{aweConfig:n={}}=e,{alternatePostitialLogic:r}=n;r&&Object(i.a)().then(t).catch(},a=t=>{const n=i=({data:e})=>{const{type:i=null}=e;var o;o=i||e,(r.b.includes(o)||r.b.includes(o))&&(n(),t())};return e.addEventListener("message",i),{tearDown:n}}}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(1),i=n.n(r),o=n(6),a=n.n(o),s=n(2),u=n.n(s),c=n(0),l=n.n(c),d=n(3),f=n.n(d),p=n(5),E=function(e){function t(e){var n;return i()(this,t),(n=u()(this,l()(t).call(this))).sender=e,n}return f()(t,e),a()(t,[{key:"connectedCallback",value:]),t}(n.n(p)()(HTMLElement));e.customElements.define("pt-message-sender",E)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(0),u=n.n(s),c=n(3),l=n.n(c),d=n(5),f=function(e){function t(){return i()(this,t),a()(this,u()(t).apply(this,arguments))}return l()(t,e),t}(n.n(d)()(HTMLElement));e.customElements.define("pt-message-list",f)}).call(this,n(4))},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(13),i=n.n(r),o=n(17),a=n.n(o),s=n(1),u=n.n(s),c=n(6),l=n.n(c),d=n(2),f=n.n(d),p=n(0),E=n.n(p),v=n(3),h=n.n(v),g=n(5),m=function(e){function t(){return u()(this,t),f()(this,E()(t).apply(this,arguments))}var n;return h()(t,e),l()(t,[{key:"disconnectedCallback",value:function(){this.destroy()}},{key:"destroy",value:,{key:"mute",value:function(){this.player.mute(),this._mutedState=!0}},{key:"pause",value:function(){this.player.pause()}},{key:"resume",value:function(){this.player.resume()}},{key:"sendPredefinedMessage",value:,{key:"setVolume",value:,{key:"start",value:(n=a()(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this._hasStarted=!0,e.next=4,this.player.start(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this._logger.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),},{key:"stop",value:,{key:"toggleVolume",value:,{key:"unmute",value:,{key:"autoplay",get:function(){return this.hasAttribute("autoplay")}},{key:"muted",get:function(){return this.hasAttribute("muted")}},{key:"chatHistory",get:,{key:"hasStarted",get:function(){return this._hasStarted}},{key:"portraitSnapRatio",get:function(){var e=parseFloat(this.getAttribute("portrait-snap-ratio"));return isNaN(e)?void 0:e}}]),t}(n.n(g)()(HTMLElement))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(0),u=n.n(s),c=n(3),l=n.n(c),d=n(5),f=n.n(d)()(HTMLElement));e.customElements.define("pt-icon",f)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(10),i=n.n(r),o=n(15),a=function(t,n){var r,a,s;if(t&&n){var u=n.playerClass;if(u){var c=(null===(r=e)||void 0===r?void 0:null===(a=r.aweConfig)||void 0===a?void 0:null===(s=a.instances)||void 0===s?void 0:s.shared).translations,l=void 0===c?{}:c,d=function(e){var r=e.data,a=void 0===r?{}:r,s=a.type,c=void 0===s?"":s,d=a.value,f=void 0===d?"":d,p=a.instanceId,E=void 0===p?"":p,v=f.funcName,h=f.data;if(n.id===E&&c===(null==u?void 0:u.events.relay.FUNCTION_CALL)){switch(v){case u.events.relayFunctionCalls.ADD_LINE:case u.events.relayFunctionCalls.CHAT_HISTORY:var g=i()(h,1)[0];(g instanceof Array?g:h).forEach((function(e){var n={type:e.type,sender:e.userNick,message:e.msg,isMobile:e.ismobile,amount:e.amount};e.type===o.a.TIP&&(n.message=e.amount>1?l.tip_message_plural:l.tip_message_singular),n.message&&t.addMessage(n)}))}}},f=function(e){var r=e.data,i=void 0===r?{}:r,o=i.type,a=void 0===o?"":o,s=(i.value,i.instanceId),c=void 0===s?"":s;if(n.id===c)switch(a){case u.events.player.SESSION_STOPPED:case u.events.player.PLAYLIST_NEXT:t.clear()}};return e.addEventListener("message",d),e.addEventListener("message",f),{tearDown:function(){e.removeEventListener("message",d),e.removeEventListener("message",f)}}}}},s=function(e,t){return a(e,t)}}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=function(t,n){if(t&&n){var r=n.playerClass;if(r){t.muted=n.muted;var i=o=function(e){var i=e.data,o=void 0===i?{}:i,a=o.type,s=void 0===a?"":a,u=o.instanceId,c=void 0===u?"":u;if(n.id===c)switch(s){case r.events.player.STREAM_STARTED:t.removeAttribute("disabled");break;case r.events.player.SESSION_STOPPED:t.setAttribute("disabled","");break;case r.events.player.PLAYER_MUTED:t.muted=!0;break;case r.events.player.PLAYER_UNMUTED:t.muted=!1}};return e.addEventListener("message",o),t.addEventListener("click",i),{tearDown:function(){e.removeEventListener("message",o),t.removeEventListener("click",i)}}}}},i=function(e,t){return r(e,t)}}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(8),i=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=null!==(n=e.hrefTpl)&&void 0!==n?n:i;e.setAttribute("href",o.replace("{$performerId}",null==t?void 0:t.displayName)),Object(r.p)(e,t)},o=function(t,n,r){if(t&&t.length&&n&&n.playerClass){var i=function(e){var t=e.data,i=void 0===t?{}:t,o=i.type,a=void 0===o?"":o,s=i.value,u=void 0===s?"":s,c=i.instanceId,l=void 0===c?"":c;n.id===l&&r(a,u)};return e.addEventListener("message",i),{tearDown:}},a=function(e,t){return o(e,t,(function(n,r){switch(n){case t.playerClass.events.player.PERFORMER_OBJECT:e.forEach(()}}))}}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=function(t,n){if(t&&n){var r=n.playerClass;if(r){var i=function(e){var i,o,a=e.data,s=void 0===a?{}:a,u=s.type,c=void 0===u?"":u,l=s.value,d=void 0===l?"":l,f=s.instanceId,p=void 0===f?"":f;if(n.id===p){var E="";switch(c){case r.events.player.PERFORMER_OBJECT:E=null==d?void 0:d.displayName,t.setAttribute("value",E);break;case r.events.player.PLAYLIST_NEXT:E=null==d?void 0:null===(i=d.data)||void 0===i?void 0:null===(o=i.performer)||void 0===o?void 0:o.displayName,t.setAttribute("value",E)}}};return e.addEventListener("message",i),{tearDown:function(){e.removeEventListener("message",i)}}}}},i=).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(31),i=function(t,n){if(t&&n){var i=n.playerClass;if(i){var o=function(e){var o,a,s=e.data,u=void 0===s?{}:s,c=u.type,l=void 0===c?"":c,d=u.instanceId,f=void 0===d?"":d;if(n.id===f)switch(l){case i.events.player.RELAY_CONNECTED:case i.events.player.SESSION_STOPPED:case i.events.player.PLAYER_ERROR:case i.events.player.PERFORMER_REQUEST_FAILED:case i.events.player.RELAY_FAILED:case i.events.player.STREAM_TIMEOUT:case i.events.player.STREAM_STARTED:case i.events.player.STREAM_RESUMED:case i.events.player.STREAM_USER_INTERACTION_REQUIRED:case i.events.player.PREROLL_USER_INTERACTION_REQUIRED:case null===(o=i.events.stream)||void 0===o?void 0:o.BUFFERING_STOP:case i.events.player.PREROLL_TIME_UPDATE:case i.events.player.PREROLL_STARTED:case null===(a=i.events.preroll)||void 0===a?void 0:a.RESUMED_VIDEO:Object(r.a)(t);break;case i.events.player.SESSION_STARTED:Object(r.b)(t)}};return e.addEventListener("message",o),{tearDown:function(){e.removeEventListener("message",o)}}}}},o=i}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(12),i=n(11),o=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.forceLandscapeRatio,o=void 0!==i&&i,a=r.maxLandscapeImageRatio,s=void 0===a?1:a,u=null!==(n=null==t?void 0:t.profileImageUrls)&&void 0!==n?n:null==t?void 0:t.profilePictureUrl;if(u){var c=o?"896x504":e.offsetHeight/e.offsetWidth<=s?"896x504":"504x896",l=u[c];l&&e.getAttribute("src")!==l&&e.setAttribute("src",l)}},a=function(t,n,a){if(t&&n){var s=n.playerClass;if(s){var u,c=function(e){var i,c=e.data,l=void 0===c?{}:c,d=l.type,f=void 0===d?"":d,p=l.value,E=void 0===p?"":p,v=l.instanceId,h=void 0===v?"":v;if(n.id===h)switch(f){case s.events.player.PERFORMER_OBJECT:o(t,u=E,a);break;case s.events.player.PLAYLIST_NEXT:u=null==E?void 0:null===(i=E.data)||void 0===i?void 0:i.performer,o(t,u,a);break;case s.events.player.STREAM_RESUMED:case s.events.player.PREROLL_STARTED:case s.events.player.STREAM_STARTED:t.setAttribute("blur","");break;case s.events.player.STREAM_STOPPED:case r.c:case r.a:t.removeAttribute("blur")}},l=Object(i.a)((,250);return e.addEventListener("message",c),e.addEventListener("resize",l),{tearDown:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.completely,r=void 0!==n&&n;e.removeEventListener("message",c),r&&e.removeEventListener("resize",l)}}}}},s=a}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r={},i=function(e,t){clearTimeout(r[t.id]),r[t.id]=setTimeout((,500)},o=function(e,t){clearTimeout(r[t.id]),e.setAttribute("hidden","")},a=function(e,t){e.setAttribute("hidden",""),t()},s=function(t,n,r){if(t&&n){r="function"==typeof r?r:n.resume;var s=function(e){var r=e.data,a=void 0===r?{}:r,s=a.type,u=void 0===s?"":s,c=a.instanceId,l=void 0===c?"":c;if(n.id===l)switch(u){case LiveStreamPlayer.events.player.STREAM_USER_INTERACTION_REQUIRED:case LiveStreamPlayer.events.stream.PLAYBACK_SUSPENDED:i(t,n);break;case LiveStreamPlayer.events.player.STREAM_STARTED:case LiveStreamPlayer.events.player.SESSION_STOPPED:case LiveStreamPlayer.events.player.SESSION_STARTED:case LiveStreamPlayer.events.player.STREAM_RESUMED:o(t,n)}},u=a.bind({},t,r);return e.addEventListener("message",s),t.addEventListener("click",u),{tearDown:}}}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));n(10);var r=n(9),i=n.n(r),o=(n(51),n(7)),a=n(8),s=n(18);n(11);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(t,n){if(n){var r,i=n.playerClass,u=[i.events.player.PLAYER_MUTED,i.events.player.PREROLL_MUTED],l=!0,d=function(e,n){var i=Object(s.b)(e,n,o.d.player,r);t.sendEvent(i)},f=function(e){var t=e.data,s=void 0===t?{}:t,f=s.type,p=void 0===f?"":f,E=s.value,v=void 0===E?"":E,h=s.instanceId,g=void 0===h?"":h;if(n.id===g)switch(p){case i.events.player.SESSION_STARTED:l=!0;break;case i.events.player.PREROLL_STARTED:var m=Object(a.e)(g).data,b=(void 0===m?{}:m).flags,y=(void 0===b?{}:b).reportLivePreRoll;if(!(void 0!==y&&y))return;d(o.f.load,o.c.livePreRoll);break;case i.events.player.STREAM_STARTED:d(o.f.load,o.c.stream);break;case i.events.player.PLAYER_MUTED:case i.events.player.PREROLL_MUTED:case i.events.player.PLAYER_UNMUTED:case i.events.player.PREROLL_UNMUTED:l||d(o.f.volumeChange,u.includes(p)?"mute":"unmute"),l=!1;break;case i.events.player.PERFORMER_OBJECT:r=c({},v)}};return e.addEventListener("message",f),{tearDown:}}}).call(this,n(4))},function(e,t,n){"use strict";(function(e){.d(t,"a",(function(){return r}))}).call(this,n(4))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r=n(9),i=n.n(r),o=n(10),a=n.n(o),s=n(8),u=n(11);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d="cpu",f="network",p="unknown",E=function(){for(var e=location.href.split("?"),t=a()(e,2),n=t[0],r=void 0===n?"":n,i=t[1],o={location:r},s=(void 0===i?"":i).split("&"),u=0;u<s.length;u++){var c=s[u].split("="),l=a()(c,2),d=l[0],f=l[1],p=void 0===f?"":f;o[d]=decodeURIComponent(p)}return o},v=function(e){return(e=e.toLowerCase()).indexOf(d)>-1?d:e.indexOf(f)>-1?f:p},h=function(t,n){if(t)){var r=e.debug,i=(void 0===r?{}:r).logs,o=void 0===i?{}:i,a=function(e){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!0,o=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value,f=l({},E(),{},n()),p=d.body,h=(p=void 0===p?{}:p).message,g=void 0===h?"":h;f.rawReport_body_message=g,f.interventionType=v(g),t=t.replace("{$PARAMS}",Object(s.g)(f));var m=navigator.sendBeacon(t);r&&(m?console.log("Heavy Ad intervention was reported"):console.warn("Heavy Ad intervention report error"))}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}(e,t,null!=n?n:u.c,o.enabled)},c=new ReportingObserver(a,{buffered:!0,types:["intervention"]});c.observe();var d=function(){var e=c.takeRecords();e.length&&a(e)};return e.addEventListener("unload",d),{tearDown:function(){c.disconnect(),e.removeEventListener("unload",d)}}}},g=function(t,n,r){var i=function(e,t){var n=h(e,t.createReportingObject.bind(t));if(n)return{tearDown:}(t,n);if(i)return e.addEventListener("message",r),{tearDown:},m=function(e,t,n){return g(t,n,(function(t){var r=t.data,i=void 0===r?{}:r,o=i.type,a=void 0===o?"":o,s=i.value,u=void 0===s?"":s,c=i.instanceId;(void 0===c?"":c)===e.id&&a===e.playerClass.events.player.PERFORMER_OBJECT&&n.addToPlayedList(u.performerId)}))}}).call(this,n(4))},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(9),i=n.n(r),o=n(2),a=n.n(o),s=n(0),u=n.n(s),c=n(33),l=n.n(c),d=n(3),f=n.n(d),p=n(1),E=n.n(p),v=n(6),h=n.n(v),g=n(11);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E()(this,e),this._playedList=[],this._startTimestamp,this._focusTimestamp,this._logger=t?console.log:g.c}return h()(e,[{key:"addToPlayedList",value:function(e){this._playedList.includes(e)||(this._playedList.push(e),this._logger("TimingHelper::Add to played list",this._playedList))}},{key:"updateStartTimestamp",value:function(){this._startTimestamp=Date.now(),this._logger("TimingHelper::Update start timestamp",this._startTimestamp)}},{key:"updateFocusTimestamp",value:function(){this._focusTimestamp=Date.now(),this._logger("TimingHelper::Update focus timestamp",this._startTimestamp)}},{key:"createReportingObject",value:function(){var e=Date.now();return{elapsedTimeMs:e-this._startTimestamp,elapsedTimeFromFocusMs:e-(this._focusTimestamp?this._focusTimestamp:this._startTimestamp)}}}]),e}(),S=function(e){eturn f()(t,e),h()(t,[{key:"createReportingObject",value:function(){return b({},l()(u()(t.prototype),"createReportingObject",this).call(this),{performersPlayedCount:this._playedList.length,playedPerformers:this._playedList})}}]),t}(y)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(1),i=n.n(r),o=n(6),a=n.n(o),s=n(55),u=n.n(s),c=n(34),l=n(35),d=n(56),f=n(57),p={callbackFn:null,instances:{player:null,ccs:null,pixels:[]},opts:{injectCCS:!1,reportImpression:!0,detectIncognito:!1}},E=function(){function t(n){i()(this,t),this._config=u()({},p,n);var r=e,o=r.ptFocusToolNew,a=r.debug,s=(void 0===a?{}:a).logs,E=void 0===s?{}:s;this._displayed=!1,this._isPreloadedPostitialMode=Object(c.b)()&&e.aweConfig.preload,this._handleFirstFocus=this._handleFirstFocus.bind(this),this._isPreloadedPostitialMode?(this.shown=this.shown.bind(this),Object(l.b)(this.shown),Object(l.a)(this.shown)):o?(Object(d.a)(o,this._handleFirstFocus),o.init()):(E.enabled&&console.warn("Skipping focus check because focustool does not exist"),this._handleFirstFocus()),this._config.opts.detectIncognito&&Object(f.a)(this._config.instances.pixels)}return a()(t,[{key:"_handleFirstFocus",value:function(){var e=this._config.instances;e.player&&!e.player.autoplay||this.shown()}},{key:"shown",value:function(){var e=this._config,t=e.opts,n=e.instances,r=e.callbackFn;this._displayed||(this._displayed=!0,t.injectCCS&&n.ccs.injectCCSImages(),t.reportImpression&&Object(c.a)(),r())}},{key:"isPreloadedPostitialMode",get:function(){return this._isPreloadedPostitialMode}},{key:"displayed",get:]),t}()}).call(this,n(4))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){var n=function(e){e.focusValue&&(r(),document.body.classList.add("focus"),"function"==typeof t&&t())},r=return e.emitter.on("window_focus_change",n),{tearDown:r}}},function(e,t,n){"use strict";(function(e){var r=n(58);t.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e,i=n.debug,o=void 0===i?{}:i,a=o.logs,s=void 0===a?{}:a;if("complete"!==document.readyState){if(t.length){var u=2;return Object(r.detectIncognito)().then((function(e){u=+e.isPrivate})).catch(().finally((function(){t.forEach((function(e){var t=e.getAttribute("data-src");if(t){var n=t.includes("?")?"&":"?";t+="".concat(n,"im=").concat(u),e.setAttribute("data-src",t),s.enabled&&console.log("Setting incognito mode flag to ".concat(u," on pixel:"),e)}}))}))}s.enabled&&console.error("Cannot find pixels, cannot check private browsing")}else s.enabled&&console.error("private browsing check error")}}).call(this,n(4))},function(e,t,n){"use strict";n.r(t),function(e){var t,r=n(13),i=n.n(r),o=n(10),a=n.n(o),s=n(17),u=n.n(s),c=n(9),l=n.n(c),d=(n(65),n(36)),f=n(7),p=n(15),E=n(19),v=(n(84),n(68),n(72),n(27),n(73),n(74),n(21),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(43)),h=n(44),g=n(45),m=n(29),b=n(30),y=n(46),S=n(47),T=n(48),_=n(49),A=n(32),O=n(50),R=n(52),I=n(53),N=n(8),w=n(23),C=n(12),P=n(54);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ar U,M,k={},F={},x={},j=function(){var e=Object(w.b)(k),t=Object(w.a)(k),n=Object(w.c)(k);return{tearDown:},B=G=(t={},l()(t,LiveStreamPlayer.events.player.PERFORMER_OBJECT,(function(e){var t,n=e.value;if(e.instanceId===k.player.id){Object(N.c)(),Object(N.j)();var r=Object(E.b)(x.welcome_message,n.displayName);null===(t=k.chat)||void 0===t||t.addMessage({type:p.a.WELCOME,sender:"system",message:r})}})),l()(t,C.a,(function(){Object(N.n)(F),Object(N.k)(),k.player.stop()})),t),H=function(e){var t=e.forcedPerformers,n=void 0===t?[]:t,r=k,i=r.player,o=r.creativeLogger;A.a(i,o,L({},e),n)},W=V=function(){var t=u()(i.a.mark((function t(){var n,r,o,s,u,c,l,p,E,A,w;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k={player:document.querySelector("pt-stream-player"),chat:document.querySelector("pt-chat"),playerMuteButton:document.querySelector("pt-mute-button"),ctaButton:document.querySelector("pt-cta-button"),redirectLayerForPlayer:document.querySelector("pt-redirect-layer[for='stream-player']"),redirectLayerForEndScreen:document.querySelector("pt-redirect-layer[for='endscreen']"),redirectLayerForCtaButton:document.querySelector("pt-redirect-layer[for='cta-button']"),redirectLayerForGuestInput:document.querySelector("pt-redirect-layer[for='guest-input']"),redirectLayerForPerformerName:document.querySelector("pt-redirect-layer[for='pt-performer-name']"),redirectLayerForStatusBadge:document.querySelector("pt-redirect-layer[for='pt-status-badge']"),predefinedMessageSelector:document.querySelector("pt-predefined-message-selector"),guestInput:document.querySelector("pt-guest-input"),performerName:document.querySelector("pt-performer-name"),preloader:document.querySelector("pt-preloader"),profileImage:document.querySelector("pt-profile-image"),playButton:document.querySelector("pt-play-button"),creativeLogger:Object(N.d)()},n=Object.values(e.playerConfigs),r=a()(n,1),o=r[0],s=o.data,u=(s=void 0===s?{}:s).flags,c=void 0===u?{}:u,t.next=7,Object(f.a)({});case 7:U=t.sent,l=new d.a,C=void 0,D=void 0,V=void 0,C=e.debug,D=(void 0===C?{}:C).logs,V=void 0===D?{}:D,(M=new I.a(V.enabled)).updateStartTimestamp(),c.enabled?(p=e.aweConfig,E=(void 0===p?{}:p).instances,A=(void 0===E?{}:E).shared,x=L({},(w=void 0===A?{}:A).translations),i=void 0,(i={}).globalToStreamPlayer=b.b(k.player),i.gaReporterForPlayer=O.a(U,k.player),i.globalToLogger=b.a(k.creativeLogger),i.muteButtonToPlayer=h.a(k.playerMuteButton,k.player),i.chat=v.a(k.chat,k.player),i.redirectLayerForPlayer=g.a([k.redirectLayerForPlayer,k.redirectLayerForCtaButton,k.redirectLayerForGuestInput,k.redirectLayerForEndScreen,k.redirectLayerForPerformerName,k.redirectLayerForStatusBadge],k.player),i.predefinedMessageSelectorToPlayer=m.b(k.predefinedMessageSelector,k.player),i.predefinedMessageSelectorToChat=m.a(k.predefinedMessageSelector,k.chat),i.performerNameToPlayer=y.a(k.performerName,k.player),i.peloaderToPlayer=S.a(k.preloader,k.player),i.playerProfileImageToPlayer=T.a(k.profileImage,k.player),i.playButtonToPlayer=_.a(k.playButton,k.player,B),i.playerToTimingHelper=R.a(k.player,e.interventionReportUrl,M),F=i,j(),Object(N.f)(G),H(w),new P.a({callbackFn:W,instances:{ccs:l,player:k.player},opts:{injectCCS:!0}})):Object(N.k)();case 11:case"end":return t.stop()}var i,C,D,V}),t)})));return ();Object(N.m)(V)}.call(this,n(4))},function(e,t){!function(){var e={25:5975:2962:function(e){e.exports=[function(e,t,n){var r,i;r=[n(1)],void 0===(i=apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(2),n(4),n(22),n(23),n(24),n(25),n(28),n(26),n(30),n(14),n(20),n(138),n(17),n(139)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p){"use strict";ar v=E.prototype=Object.create(e.prototype);return v.setup=function(e){return new p(function(n,r){var i=e&&e.events&&e.events.onError?e.events.onError:null,o=bind(this);try{this._realPlayer&&this._realPlayer!==this._dummyPlayer&&(this._realPlayer.destroy(),this._realPlayer=this._dummyPlayer),t.create(this._playerDivId,e).then(function(t){this.version=t.version,this.type=t.type,this._realPlayer=t,this._realPlayer.id=this.id,this._propagator=d.create(t,a,this),this._realPlayer.setup(e).then(function(e){window.onunload=function(){this._realPlayer.destroy()}.bind(this),function(e){n(e)}(e)}.bind(this),o)}.bind(this),()}catch(e){o(e)}}.bind(this))},v.destroy=function(){this._realPlayer.destroy()},v.play=function(){this._realPlayer.play()},v.pause=function(){this._realPlayer.pause()},v.mute=function(){this._realPlayer.mute()},v.unmute=v.setVolume=function(e){this._realPlayer.setVolume(e)},v.updateSource=v.switchStream=v.setAdaption=E.events=a,E.states=s,E.emptyConfig=n,E.validConfig=r,E.entryEmptyConfig=i,E.entryValidConfig=o,E.pauseReasons=u,E.errorCodes=l,E.version=c.CORE,E.capabilities=t.capabilities,E}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(3)],void 0===(i=apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){"use strict"; r=e.prototype;return r.getListeners=r.flattenListeners=r.getListenersAsObject=r.addListener=r.on=n("addListener"),r.addOnceListener=r.once=n("addOnceListener"),r.defineEvent=r.defineEvents=r.removeListener=r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=r.manipulateListeners=r.removeEvent=r.removeAllListeners=n("removeEvent"),r.emitEvent=r.trigger=n("emitEvent"),r.emit=r.emitSimple=r.setOnceReturnValue=r._getOnceReturnValue=r._getEvents=e}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(5),n(8),n(9),n(137),n(19),n(20)],void 0===(i=function(e,t,n,r,i,o){function a(e){var n=e.filter((function(e){return e.isSupported()}));if(!n.length)throw new t(r.CLIENT_NOT_SUPPORTED,o.SETUP.CLIENT_NOT_SUPPORTED);return n}function s(e,n){var a={};a[i.H5LIVE_WSS]="h5live",a[i.H5LIVE_HLS]="h5live",a[i.FLASH]="h5live",a[i.NATIVE]="hls";var s=[],u=e.filter((function(e){var t=!1;return e.supportedTechniques.forEach((function(e){s.push(a[e]),!1===t&&(t=Object.prototype.hasOwnProperty.call(n,"source")&&(Object.prototype.hasOwnProperty.call(n.source,a[e])||function(e,t){if(!Object.prototype.hasOwnProperty.call(e.source,"entries")||!e.source.entries.length)return!1;var n=!0;return e.source.entries.forEach((),n}(n,a[e])))})),t}));if(!u.length)throw new t(r.SOURCE_NOT_SUPPORTED,o.SETUP.SOURCE_NOT_SUPPORTED);return u}function u(e,n){var i=[],a=e.filter((function(e){i=i.concat(e.supportedTechniques);var t=!1;return e.supportedTechniques.forEach((function(e){!1===t&&(t=!n.playback.forceTech||function(e,t){return-1!==e.indexOf(t)||-1!==t.indexOf(e)}(e,n.playback.forceTech))})),t}));if(!a.length)throw new t(r.FORCE_NOT_SUPPORTED.replace("$tech$",n.playback.forceTech),o.SETUP.FORCE_NOT_SUPPORTED);return a}return{create:function(e,t){return new Promise((function(r,i){var o=n;try{r(function(e,t){return new(0,e[0])(t)}(o=u(o=s(o=a(o),t),t),e))}catch(e){i(e)}}))},capabilities:function(){var e=[];return n.filter(().forEach((),e}()}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6)],void 0===(i=apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(7)],void 0===(i=function(e){r r=0,i=1,o=2,a=3,s=4;return{create:function(e){return{debug:t.bind(this,a,e),info:t.bind(this,o,e),warn:t.bind(this,i,e),error:t.bind(this,r,e),detail:t.bind(this,s,e),debugEnabled:n.bind(this,a),infoEnabled:n.bind(this,o),warnEnabled:n.bind(this,i),errorEnabled:n.bind(this,r),detailEnabled:n.bind(this,s)}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){function e(){var e=isNaN(t("debug"))?0:+t("debug"),n=+function(e){return-1!==document.cookie.indexOf(e+"=")?document.cookie.split(e+"=")[1].split(";")[0]:null}("nanoDebug");return Math.max(e,n)}ar n=e(),r=void 0;return setInterval((,5e3),{log:function(e,t){try{n>=t&&console.debug((new Date).toISOString()+": "+e)}catch(e){}},getHTTPParam:t,enabled:}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return function(e,t){var n=new window.Error(e||"");return n.code=t||0,n}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(10),n(10)],void 0===(i=apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(2),n(11),n(13),n(14),n(5),n(7),n(15),n(3),n(16),n(17),n(21),n(8),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(20),n(29),n(19),n(30),n(31),n(36),n(37),n(39),n(41),n(89),n(102),n(32),n(34),n(33),n(35),n(42),n(40)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p,E,v,h,g,m,b,y,S,T,_,A,O,R,I,N,w,C,P,D,L,U,M){"use strict";ar F=o.log;k.getSupportedTechniques=k.supportedTechniques=k.getSupportedTechniques(),k.isSupported=var x=k.prototype=Object.create(e.prototype);return x._setBaseValues=x._baseSetup=x.setup=x._destroy=x.destroy=x._destroy,x._emitConfig=x._setState=x._debug=x._setListeners=x._setupVideoElement=x._onLogicError=function(e){switch(e.data.code){case b.PLAYER.VISIBILITY_HIDDEN:this._setState(h.VISIBILITY_HIDDEN);break;case b.STREAM.NOT_ENOUGH_DATA:this._setState(h.NOT_ENOUGH_DATA);break;case b.STREAM.SOURCE_STOPPED:this._setState(h.SOURCE_STREAM_STOPPED);break;case b.MEDIA.ABORTED:case b.MEDIA.DOWNLOAD_ERROR:case b.MEDIA.DECODE_ERROR:case b.MEDIA.NOT_SUPPORTED:case b.MEDIA.MEDIA_SOURCE_ENDED:case b.PLAYER.PLAYBACK_ERROR:this._setState(h.PLAYBACK_ERROR)}this.emit(m.ERROR,e.data),this.pause(this.state)},x._onUpdateSourceInit=function(e){this._maybePlayOnUpdateOrSwitch(e)},x._onSwitchStreamInit=function(e){this._maybePlayOnUpdateOrSwitch(e)},x._maybePlayOnUpdateOrSwitch=x._onPlayStartError=function(e){"NotAllowedError"===(this._debug(e.data.error.name+": "+e.data.error.message,1),e.data.error.name)&&(e.data.automuted?this._emitWarning("Unmuted autoplay failed by autoplay policy, but 'automute' is enabled. Try to play muted."):(this._setState(this.STATE.PLAYBACK_NOT_STARTED),this._emitError(b.PLAYER.INTERACTION_REQUIRED,"Playback must be initialized by user gesture.")))},x._onBufferTweaksCreated=x._onMediaErrorRecover=x._preparePlay=x.play=x._onConnectionInitializationError=function(e){this._debug('error init connection with state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',2),this._setState(this.STATE.CONNECTION_ERROR),this._emitError(e.data.code,e.data.message)},x._onConnectionError=x._onConnectionConnecting=x._onConnectionStateChange=x._onConnectionWarning=x._onConnectionOpen=x._onConnectionClosed=x._onConnectionDestroyed=x._onConnectionReconnecting=x._onConnectionReconnectionImminent=x._onServerInfo=x._onNoKeepConnection=x._onMimeTypeUnsupported=x._onMediaSuspended=x._emit=x.emit,x.emit=x._emitError=x._emitWarning=x._getPauseReason=x._triggerPause=function(){return this.state===this.STATE.PAUSED?void F("nanoplayer ("+this._playerDivId+"): trigger pause but already in state paused"):(F("nanoplayer ("+this._playerDivId+'): trigger pause with reason "'+this._pauseReason+'", state "'+this._getState()+'", networkstate "'+this._getNetworkState()+'"',3),this._setState(this.STATE.PAUSED,{reason:this._pauseReason}),this.emit(m.PAUSE,{reason:this._pauseReason}),void(this._resumeOnPause&&(this._resumeOnPause=!1,this.play())))},x.pause=x.mute=function(){this._componentEmitter.emit(C.MUTE)},x.unmute=x.setVolume=x.updateSource=x.switchStream=function(e){return new Promise(function(t,n){if(isNaN(e)||e<0||e>=this.config.source.entries.length){var r=new d(y.PLAYER.INVALID_ENTRY_INDEX,b.PLAYER.INVALID_ENTRY_INDEX);this.config.source.options.switch.pauseOnError&&this._emitError(r.code,r.message),n(r)}else this._componentEmitter.emit(C.SWITCH_STREAM,{index:e}),t(u.copy(this.config))}.bind(this))},x.setAdaption=x._parseUrl=x._getState=function(){return u.findPropertyByValue(this.STATE,this.state)},x._getNetworkState=x._onMediaPlaying=x._onMediaBuffering=x._checkSource=x._onUpdateSourceTimeout=x.STATE=h,x.NETWORK_STATE=g,x.PAUSE_REASON=T,k}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(12)],void 0===(i=function(e){"use strict";function t(t){if(!t.target)throw new Error(e.NO_TARGET);if(!t.listeners||!t.listeners.length)throw new Error(e.NO_LISTENERS);if(!n(t.target,i)||!n(t.target,o))throw new Error(e.NOT_DISPATCHER);for(var r=0;r<t.listeners.length;++r)if(!t.listeners[r].type&&"string"!=typeof t.listeners[r].type||0!==t.listeners[r].type.length){if(!t.listeners[r].type)throw new Error(e.MISSING_TYPE.replace("%index%",r));if("function"!=typeof t.listeners[r].listener)throw new Error(e.MISSING_LISTENER.replace("%index%",r))}else t.listeners.splice(r,1),r--}unction r(e,r){t(r),function(e,t,n){for(var r=0;r<n.length;++r)e.call(t,n[r].type,n[r].listener)}(n(r.target,e),r.target,r.listeners)}var i=["addEventListener","addListener","on"],o=["removeEventListener","removeListener","off"];return{add:r.bind(null,i),remove:r.bind(null,o)}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){return Object.freeze({NO_TARGET:"No target in config",NO_LISTENERS:"No listeners in config",NOT_DISPATCHER:"Target is not an event dispatcher",MISSING_TYPE:"Missing type in listener #%index%",MISSING_LISTENER:"Missing/invalid listener in listener #%index%"})}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(11)],void 0===(i=function(e){return{create:function(t,n,r){ar o,a={};return o=[],r.forEach((),e.add({target:t,listeners:o}),{destroy:function(){e.remove({target:t,listeners:o}),o=null,a=null}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){eturn{merge:function t(n,r){var i;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&Object.prototype.hasOwnProperty.call(r,i)&&("object"!=typeof n[i]||null===n[i]||!Object.keys(n[i]).length||"object"==typeof r[i]&&Object.keys(r[i]).length||Array.isArray(n[i])?"object"!=typeof n[i]||Array.isArray(n[i])?r[i]=n[i]:t(n[i],r[i]):e(n[i],r[i]))},clean:function e(t){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(void 0===t[n]||null===t[n]||"string"==typeof t[n]&&0===t[n].length)&&delete t[n],Object.prototype.hasOwnProperty.call(t,n)&&t[n]instanceof Object&&e(t[n]);for(n in t)(Object.prototype.hasOwnProperty.call(t,n)&&(void 0===t[n]||null===t[n]||"string"==typeof t[n]&&0===t[n].length)||"object"==typeof t[n]&&"function"!=typeof t[n]&&0===Object.keys(t[n]).length)&&delete t[n]},check:function e(t,n,r,i){var o;for(o in r=r||"",i=i||[],t)Object.prototype.hasOwnProperty.call(t,o)&&Object.prototype.hasOwnProperty.call(n,o)&&("object"==typeof t[o]&&"object"==typeof n[o]?i=e(t[o],n[o],r+o+".",i):typeof t[o]!==n[o]&&"*"!==n[o]&&void 0!==t[o]&&""!==t[o]&&i.push("Configuration warning. The config property '$property$' must be of type '$type$'.".replace("$property$",r+o).replace("$type$",n[o]))),Object.prototype.hasOwnProperty.call(t,o)&&!Object.prototype.hasOwnProperty.call(n,o)&&i.push("Configuration warning. The config property '$property$' is not a valid property. Please remove from config.".replace("$property$",r+o));return i},extend:e}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e=Object.prototype.toString;return{copy:function t(n){var r;switch(typeof n){case"object":if(null===n)r=null;else if(n&&n.tagName&&n.nodeName&&n instanceof Element)r=n;else switch(e.call(n)){case"[object Array]":r=n.map(t);break;case"[object Date]":r=new Date(n);break;case"[object RegExp]":r=new RegExp(n);break;default:r=Object.keys(n).reduce((,{})}break;case"undefined":r=n;break;default:r=n.valueOf()}return r},findPropertyByValue:function(e,t){if("object"==typeof e)for(var n in e)if(e[n]===t)return n;return!1}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(8),n(18),n(19),n(20)],void 0===(i=function(e,t,n,r){return{validateConfig:function(i,o){for(var a,s=!1,u=o.source.entries,c=0;c<u.length;c+=1){if(!(a=u[c])||!a.h5live){s=new e(t.CONFIG_SOURCE,r.SETUP.SOURCE_NOT_SUPPORTED);break}if(!(a.h5live.rtmp&&a.h5live.rtmp.url&&a.h5live.rtmp.streamname||a.h5live.params)){s=new e(t.CONFIG_RTMP,r.SETUP.CONFIG_RTMP);break}if(i===n.H5LIVE_WSS&&(!a.h5live.server||a.h5live.server&&!a.h5live.server.websocket)){s=new e(t.CONFIG_WSS,r.SETUP.CONFIG_WSS);break}if(i===n.H5LIVE_HLS){if(!a.h5live.server||a.h5live.server&&!a.h5live.server.hls){s=new e(t.CONFIG_HLS,r.SETUP.CONFIG_HLS);break}if(o.playback&&o.playback.metadata&&!a.h5live.server.websocket){s=new e(t.CONFIG_METADATA,r.SETUP.CONFIG_METADATA);break}}if(!(a.h5live.server&&(a.h5live.server.websocket||a.h5live.server.hls)||a.h5live.token)){s=new e(t.CONFIG_TOKEN,r.SETUP.CONFIG_TOKEN);break}}return s},validatePlayerDivId:function(t){if(!("string"==typeof t||t instanceof String))throw new e('The param "playerDivId" must be of type "String".');var n=document.getElementById(t);if(!n)throw new e('The param "playerDivId" must be the id of an existing "div" element.');if("DIV"!==n.tagName)throw new e('The element with the id "'+t+'" is not a "div" element.');return!0}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return Object.freeze({PLAYER:{NO_RTMP_URL_SET:1001,NO_SERVER_SET:1002,NOT_CONFIGURED:1003,NOT_PLAYING:1004,INTERACTION_REQUIRED:1005,BUFFER_CONFIG_INVALID:1006,PLAYBACK_SUSPENDED:1007,PLAYBACK_ERROR:1008,VISIBILITY_HIDDEN:1009,INVALID_ENTRY_INDEX:1010},STREAM:{NOT_FOUND:2001,MEDIA_NOT_AVAILABLE:2002,NOT_ENOUGH_DATA:2003,SOURCE_STOPPED:2004,METADATA_STILL_PROCESSING:2014,METADATA_NO_START_INDEX:2013,METADATA_INVALID_JSON:2012,METADATA_WRONG_INDEX:2011},MEDIA:{ABORTED:3001,DOWNLOAD_ERROR:3002,DECODE_ERROR:3003,NOT_SUPPORTED:3004,MEDIA_SOURCE_ENDED:3100,UNSPECIFIC_ERROR:3200},NETWORK:{COULD_NOT_ESTABLISH_CONNECTION:4001,CONNECTION_ERROR:4002,MAX_RECONNECTS_REACHED:4003,RECONNECTION_CONFIG_INVALID:4004,SOURCE_STREAM_STOPPED:4005,SOURCE_TIMEOUT:4006},SETUP:{EXCEPTION:5001,CLIENT_NOT_SUPPORTED:5002,FORCE_NOT_SUPPORTED:5003,SOURCE_NOT_SUPPORTED:5004,CONFIG_RTMP:5005,CONFIG_TOKEN:5006,CONFIG_WSS:5007,CONFIG_HLS:5008,CONFIG_METADATA:5009,EMBED_PLAYER:5010}})}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(5),n(6)],void 0===(i=function(e,t){var n=t.create("Conditions"),r=e.os,i=e.osVersion,o=e.browser,a=parseInt(e.browserVersion.split(".")[0],10),s=e.browserEngine,u="Microsoft Edge Trident"===o,c="Microsoft Internet Explorer"===o||u,l="Webkit"===s,d="Chromium"===s&&a>57,f="iOS"===r,p=f&&a>=11,E=f&&15===a,v="Mac OS X"===r,h="Chrome"===o,g="Firefox"===o,m="Safari"===o,b=m&&12.1===parseFloat(e.browserVersion)&&"iOS"!==r,y=f&&parseInt(i,10)>=10,S=b,T=!!e.hasMediaSource,_=!f&&T&&(g&&a>=48||u||e.isH264Supported),A=!T&&v&&(m&&a>=13||h&&a>=85),O=);!y&&!T&&v&&(m&&a>=10||h)&&(y=!0);var R={mustUseHLS:y,canUseHLS:S,isTridentBrowser:c,isWebkitBrowser:l,useFakeAudio:d,isMediaSourceH264Supported:_,isIOS:f,isIOS11:p,isExactIOS15:E,isIOSDesktopMode:A,isMacOS:v,isFirefox:g,isSafari:m,isSafari121MacOSX:b,isH5LiveKnownUnsupported:O};for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&n.debug(I+": "+R[I]);return R}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){return{create:function(){return{playback:{autoplay:!0,automute:!1,muted:!1,metadata:!1,forceTech:"",flashplayer:"",videoId:"",keepConnection:!1,allowSafariHlsFallback:!1,crossOrigin:"not-set",mediaErrorRecoveries:3,metadataLowDelay:!0,reconnect:{minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10},timeouts:{loading:20,buffering:20,connecting:5},latencyControlMode:"classic"},source:{hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},security:{token:"",jwtoken:"",expires:"",options:"",tag:""},params:{}},bintu:{apiurl:"",streamid:"",state:""},startIndex:0,options:{switch:{},adaption:{}},entries:[],defaults:{},group:{apiurl:"",id:"",startQuality:"",state:"",security:{jwtoken:""}},general:{}},events:{onReady:void 0,onPlay:void 0,onPause:void 0,onLoading:void 0,onStartBuffering:void 0,onStopBuffering:void 0,onError:void 0,onMetaData:void 0,onStats:void 0,onMute:void 0,onUnmute:void 0,onVolumeChange:void 0,onStreamInfo:void 0,onStreamInfoUpdate:void 0,onWarning:void 0,onDestroy:void 0,onUpdateSourceInit:void 0,onUpdateSourceSuccess:void 0,onUpdateSourceFail:void 0,onUpdateSourceAbort:void 0,onSwitchStreamInit:void 0,onSwitchStreamSuccess:void 0,onSwitchStreamFail:void 0,onSwitchStreamAbort:void 0,onActiveVideoElementChange:void 0},tweaks:{buffer:{min:void 0,start:void 0,max:void 0,target:void 0,limit:void 0},bufferDynamic:{offsetThreshold:void 0,offsetStep:void 0,cooldownTime:void 0}}}}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return{create:function(){return{source:{hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",jwtoken:"string",expires:"string",options:"string",tag:"string"}},bintu:{apiurl:"string",streamid:"string",state:"string"},startIndex:"number",options:"object",entries:"object",defaults:"object",group:{apiurl:"string",id:"string",startQuality:"string",state:"string",security:{jwtoken:"string"}},general:"object"},playback:{autoplay:"boolean",automute:"boolean",muted:"boolean",forceTech:"string",metadata:"boolean",flashplayer:"string",videoId:"*",keepConnection:"boolean",allowSafariHlsFallback:"boolean",crossOrigin:"string",mediaErrorRecoveries:"number",metadataLowDelay:"boolean",reconnect:{minDelay:"number",maxDelay:"number",delaySteps:"number",maxRetries:"number"},timeouts:{loading:"number",buffering:"number",connecting:"number"},latencyControlMode:"string"},events:{onReady:"function",onPlay:"function",onPause:"function",onLoading:"function",onStartBuffering:"function",onStopBuffering:"function",onError:"function",onMetaData:"function",onStats:"function",onMute:"function",onUnmute:"function",onVolumeChange:"function",onStreamInfo:"function",onStreamInfoUpdate:"function",onWarning:"function",onDestroy:"function",onUpdateSourceInit:"function",onUpdateSourceSuccess:"function",onUpdateSourceFail:"function",onUpdateSourceAbort:"function",onSwitchStreamInit:"function",onSwitchStreamSuccess:"function",onSwitchStreamFail:"function",onSwitchStreamAbort:"function",onActiveVideoElementChange:"function"},tweaks:{buffer:{max:"number",min:"number",start:"number",target:"number",limit:"number"},bufferDynamic:{offsetThreshold:"number",offsetStep:"number",cooldownTime:"number"}}}}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return{create:function(){return{index:0,label:"high",tag:"high res",info:{bitrate:0,width:0,height:0,framerate:0},hls:"",h5live:{server:{websocket:"",progressive:"",hls:""},token:"",rtmp:{url:"",streamname:""},params:{},security:{token:"",jwtoken:"",expires:"",options:"",tag:""}},bintu:{apiurl:"",streamid:"",state:""}}}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return{create:function(){return{index:"number",label:"string",tag:"string",info:{bitrate:"number",width:"number",height:"number",framerate:"number"},hls:"string",h5live:{server:{websocket:"string",progressive:"string",hls:"string"},token:"string",rtmp:{url:"string",streamname:"string"},params:"object",security:{token:"string",jwtoken:"string",expires:"string",options:"string",tag:"string"}},bintu:{apiurl:"string",streamid:"string",state:"string"}}}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return Object.freeze({PLAYER:{VISIBILITY_HIDDEN:"Playback failed because the player was in visibility state 'hidden' at load start.",INVALID_ENTRY_INDEX:"The given stream entry index is not valid."},STREAM:{NOT_FOUND:"The requested stream can not be found.",MEDIA_NOT_AVAILABLE:"No media available.",NOT_ENOUGH_DATA:"Not enough media data received.",SOURCE_STOPPED:"The source stream has been stopped."},MEDIA:{ABORTED:"A fetching process of the media aborted by user.",DOWNLOAD_ERROR:"An error occurred when downloading media.",DECODE_ERROR:"An error occurred when decoding media.",NOT_SUPPORTED:"The received audio/video is not supported.",MEDIA_SOURCE_ENDED:"The media source extension changed the state to 'ended'."},NETWORK:{SOURCE_STREAM_STOPPED:"The requested source stream has been stopped.",SOURCE_TIMEOUT:"The source request was aborted by timeout."}})}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(11),n(28),n(32),n(33),n(34),n(35),n(6)],void 0===(i=function(e,t,n,r,i,o,a){return{create:function(n){var r=a.create("StateMachine"),o=[{type:i.STATE_CHANGE,listener:function(e){!function(e,t){n.emit(e,t)}(t.STATE_CHANGE,e.data)}}];return r.debugEnabled()&&r.debug("init"),e.add({target:n,listeners:o}),{destroy:function(){e.remove({target:n,listeners:o})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){var e="control.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",NETWORK_PLAY:e+"networkPlay",NETWORK_PAUSE:e+"networkPause",PLAY:e+"play",PAUSE:e+"pause",MUTE:e+"mute",UNMUTE:e+"unmute",SET_VOLUME:e+"setVolume",SEEK:e+"seek",SET_RATE:e+"playbackRate",CONFIG:e+"config",CREATE_VIDEO:e+"createVideo",DESTROY_VIDEO:e+"destroyVideo",VIDEO_SOURCE:e+"videoSource",UPDATE_SOURCE:e+"updateSource",NETWORK_UPDATE_SOURCE:e+"networkUpdateSource",SWITCH_STREAM:e+"switchStream",SET_ADAPTION:e+"setAdaption"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="media.";return{BASE:e,LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",MEDIA_ERROR:e+"mediaerror",MEDIA_ERROR_RECOVER:e+"mediaerrorrecover",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",ELEMENT_CREATED:e+"elementCreated",QUALITY_STATS:e+"qualitystats",PLAY_STATS:e+"playStats",MEDIA_ERROR_RECOVER_STATS:e+"mediaErrorRecoverStats",FRAME_DROP:e+"framedrop",PLAYBACK_FINISHED:e+"playbackFinished",PLAYBACK_ERROR:e+"playbackError",PLAYBACK_STARTED:e+"playbackStarted",PLAYBACK_SUSPENDED:e+"playbackSuspended",BUFFERING:e+"buffering",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError",BUFFER_TWEAKS_CREATED:e+"bufferTweaksCreated",BUFFER_TWEAKS_ERROR:e+"bufferTweaksError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",ELEMENTS_UPDATED:e+"elementsUpdated",TIME_OFFSET:e+"timeOffset",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout",ACTIVE_VIDEO_ELEMENT_CHANGE:e+"activeVideoElementChange"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="logic.";return{BASE:e,STATE_CHANGE:e+"stateChange",LOADING_TIMEOUT:e+"loadingTimeout",BUFFERING_TIMEOUT:e+"bufferingTimeout",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",SERVER_INFO:e+"serverInfo",STREAM_URL:e+"streamUrl",NO_KEEP_CONNECTION:e+"noKeepConnection",MIME_TYPE_UNSUPPORTED:e+"mimeTypeUnsupported",META_DATA_RECEIVED:e+"metaDataReceived",META_DATA_ERROR:e+"metaDataError",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError",STARTUP_STATS:e+"startupStats",DOCUMENT_VISIBLE:e+"documentVisible",DOCUMENT_HIDDEN:e+"documentHidden",ERROR:e+"error",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort",ADAPTIVE_STATS:e+"adaptiveStats",STREAM_SWITCH:e+"streamSwitch",BUFFER_GOAL_STATS:e+"bufferGoalStats"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="network.";return{BASE:e,CONNECTING:e+"connecting",CONNECTED:e+"connected",DISCONNECTED:e+"disconnected",RESUMING:e+"resuming",RECONNECTION_IMMINENT:e+"reconnectionImminent",RECONNECTING:e+"reconnecting",RECONNECTION_CONFIG_INVALID:e+"reconnectionConfigInvalid",CONNECTION_ERROR:e+"connectionError",INITIALIZATION_ERROR:e+"initializationError",ERROR:e+"error",WARNING:e+"warning",DESTROYED:e+"destroyed",STATE_CHANGE:e+"stateChange",META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(11),n(20),n(28),n(32),n(33),n(34),n(35),n(6),n(16)],void 0===(i=function(e,t,n,r,i,o,a,s,u){return{create:function(r){ f,p=s.create("FacadePropagator"),E=1,v=!1,h=[{type:i.VOLUME_CHANGE,listener:function(e){e.data.muted!==v?c((v=e.data.muted)?n.MUTE:n.UNMUTE,{volume:E}):e.data.volume!==E&&(E=e.data.volume,c(n.VOLUME_CHANGE,{volume:E}))}},{type:i.QUALITY_STATS,listener:function(e){f||(f={}),f.quality=e.data}},{type:i.PLAY_STATS,listener:function(e){var t,r,i;f&&f.quality&&(t=f.quality),r&&f.adaptive&&(r=f.adaptive),i&&f.buffergoal&&(i=f.buffergoal),f=e.data.stats,t&&!f.quality&&(f.quality=t),r&&!f.adaptive&&(f.adaptive=r),i&&!f.buffergoal&&(f.buffergoal=i);var o,a="stats error";try{a=JSON.stringify(f),delete(o=JSON.parse(a)).buffer.update,delete o.buffer.delay.before}catch(e){}c(n.STATS,{stats:o})}},{type:i.PLAYBACK_FINISHED,listener:function(){c(n.PLAYBACK_FINISHED)}},{type:i.ACTIVE_VIDEO_ELEMENT_CHANGE,listener:function(e){setTimeout(c.bind(this,n.ACTIVE_VIDEO_ELEMENT_CHANGE,e.data),0)}},{type:o.META_DATA_RECEIVED,listener:function(e){setTimeout(c.bind(this,n.METADATA,e.data),0)}},{type:o.UPDATE_SOURCE_INIT,listener:function(e){setTimeout(c.bind(this,n.UPDATE_SOURCE_INIT,e.data),0)}},{type:o.UPDATE_SOURCE_SUCCESS,listener:function(e){setTimeout(c.bind(this,n.UPDATE_SOURCE_SUCCESS,e.data),0)}},{type:o.UPDATE_SOURCE_FAIL,listener:function(e){setTimeout(c.bind(this,n.UPDATE_SOURCE_FAIL,e.data),0)}},{type:o.UPDATE_SOURCE_ABORT,listener:function(e){setTimeout(c.bind(this,n.UPDATE_SOURCE_ABORT,e.data),0)}},{type:o.STREAM_INFO,listener:function(e){var t=u.copy(e.data);delete t.streamInfo.mimeType,setTimeout(c.bind(this,n.STREAM_INFO,t),0)}},{type:o.STREAM_INFO_UPDATE,listener:function(e){var t=u.copy(e.data);delete t.streamInfo.mimeType,setTimeout(c.bind(this,n.STREAM_INFO_UPDATE,t),0)}},{type:o.SWITCH_STREAM_INIT,listener:function(e){setTimeout(c.bind(this,n.SWITCH_STREAM_INIT,e.data),0)}},{type:o.SWITCH_STREAM_SUCCESS,listener:function(e){setTimeout(c.bind(this,n.SWITCH_STREAM_SUCCESS,e.data),0)}},{type:o.SWITCH_STREAM_FAIL,listener:function(e){setTimeout(c.bind(this,n.SWITCH_STREAM_FAIL,e.data),0)}},{type:o.SWITCH_STREAM_ABORT,listener:function(e){setTimeout(c.bind(this,n.SWITCH_STREAM_ABORT,e.data),0)}},{type:o.ADAPTIVE_STATS,listener:function(e){f||(f={}),f.adaptive=e.data}},{type:o.BUFFER_GOAL_STATS,listener:function(e){f||(f={}),f.buffergoal=e.data}},{type:o.SERVER_INFO,listener:function(e){var t={serverInfo:u.copy(e.data.onServerInfo)};delete t.serverInfo.capabilities,delete t.serverInfo.events,delete t.serverInfo.interfaceVersion,t.serverInfo.serverApplicationName=t.serverInfo.serverName,t.serverInfo.serverApplicationVersion=t.serverInfo.serverVersion,delete t.serverInfo.serverName,delete t.serverInfo.serverVersion,setTimeout(c.bind(this,n.SERVER_INFO,t),0)}}],g=[{event:o.META_DATA_ERROR,code:null,message:null,defer:!0},{event:o.MISSING_RTMP_ERROR,code:t.PLAYER.NO_RTMP_URL_SET,message:"No rtmp url set.",defer:!1},{event:o.NO_SERVER_ERROR,code:t.PLAYER.NO_SERVER_SET,message:"No server set.",defer:!1},{event:a.RECONNECTION_CONFIG_INVALID,code:t.NETWORK.RECONNECTION_CONFIG_INVALID,message:null,defer:!0},{event:i.BUFFER_TWEAKS_ERROR,code:t.PLAYER.BUFFER_CONFIG_INVALID,message:null,defer:!1}];return p.debugEnabled()&&p.debug("init"),e.add({target:r,listeners:h}),g.forEach((function(e){r.addListener(e.event,l)})),{destroy:function(){e.remove({target:r,listeners:h}),g.forEach(()}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(38),n(6),n(21),n(11),n(26),n(32),n(33),n(35),n(34)],void 0===(i=function(e,t,n,r,i,o,a,s,u){var c="nano",l=".",d=[],f=d[0]="connecting",p=d[1]="connected",E=d[2]="firstFragmentReceived",v=d[3]="firstFrameRendered",h=d[4]="playable",g=d[5]="playing",m=t.create("Performance");return{create:function(t,b){function y(t){var n=[c,b,t].join(l);e&&"function"==typeof e.mark&&-1===w.indexOf(n)&&(e.mark(n),w.push(n)),C[t]||t===g&&(t!==g||-1===[E,v,h].indexOf(P))||(P=t,C[t]=e.now(),m.debug(t+": "+C[t]),t===g&&S())}function S(){if(d.forEach((function(e,t){if(void 0===C[e]){C[e]=0;for(var n=t+1,r=d.length;n<r;n+=1)if(void 0!==C[d[n]]){C[e]=C[d[n]];break}}})),d.filter(().length){var e=C[f];for(var n in C)Object.prototype.hasOwnProperty.call(C,n)&&(C[n]=Math.round(C[n]-e));t.emit(u.STARTUP_STATS,{stats:C}),m.debugEnabled()&&m.debug("startup stats: "+JSON.stringify(C))}}function T(){y(f)}function _(){y(p)}function A(){y(h)}function O(){y(g)}function R(){y(E)}ar N,w=[],C={},P=null,D=[{type:u.STATE_CHANGE,listener:function(e){e.data.state===i.PAUSED&&(C={},P=null)}},{type:o.CONFIG,listener:function(e){N=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS,r.add({target:t,listeners:N?U:L})}}],L=[{type:s.CONNECTING,listener:T},{type:s.CONNECTED,listener:_},{type:s.STREAM_FRAGMENT,listener:R},{type:a.LOADED_DATA,listener:I},{type:a.CAN_PLAY_THROUGH,listener:A},{type:a.PLAYING,listener:O}],U=[{type:a.PLAY,listener:T},{type:a.DURATION_CHANGE,listener:_},{type:a.LOADED_META_DATA,listener:R},{type:a.LOADED_DATA,listener:I},{type:a.CAN_PLAY_THROUGH,listener:A},{type:a.PLAYING,listener:O}];return r.add({target:t,listeners:D}),{destroy:function(){r.remove({target:t,listeners:D}),r.remove({target:t,listeners:N?U:L})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(11),n(20),n(29),n(26),n(32),n(33),n(34),n(35),n(40),n(6)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c){return{create:function(i){function l(e,r){!a.ERROR,{code:t[e][r],message:n[e][r]})}ar f,p,E,v,h,g,m=c.create("ErrorSelector"),b=[{type:a.STATE_CHANGE,listener:function(e){(f=e.data.state)===r.LOADING&&(v=!1,E=null)}},{type:a.LOADING_TIMEOUT,listener:function(){l("STREAM",v?"NOT_ENOUGH_DATA":E&&"stopped"===E?"SOURCE_STOPPED":"NOT_FOUND")}},{type:a.BUFFERING_TIMEOUT,listener:function(){l("STREAM",E&&"stopped"===E?"SOURCE_STOPPED":"MEDIA_NOT_AVAILABLE")}},{type:a.STREAM_INFO,listener:function(){v=!0}},{type:a.DOCUMENT_VISIBLE,listener:d},{type:a.DOCUMENT_HIDDEN,listener:d},{type:o.MEDIA_ERROR,listener:function(e){switch(e.data.code){case t.MEDIA.ABORTED:l("MEDIA","ABORTED");break;case t.MEDIA.DOWNLOAD_ERROR:l("MEDIA","DOWNLOAD_ERROR");break;case t.MEDIA.DECODE_ERROR:l("MEDIA","DECODE_ERROR");break;case t.MEDIA.NOT_SUPPORTED:l("MEDIA","NOT_SUPPORTED");break;case t.MEDIA.MEDIA_SOURCE_ENDED:(h||g)&&f===r.LOADING?l("PLAYER","VISIBILITY_HIDDEN"):l("MEDIA","MEDIA_SOURCE_ENDED");break;case t.PLAYER.PLAYBACK_ERROR:l("PLAYER","PLAYBACK_ERROR")}}},{type:s.STREAM_STATUS,listener:function(e){E=e.data.onStreamStatus.status}},{type:u.READY,listener:function(e){var t=(p=e.data.config).source.entries[p.source.startIndex],n=p.playback.autoplay;(p.source.group&&p.source.group.state&&"live"!==p.source.group.state||t.bintu&&t.bintu.state&&"live"!==t.bintu.state)&&n&&l("STREAM","SOURCE_STOPPED")}}];return m.debugEnabled()&&m.debug("init"),e.add({target:i,listeners:b}),{destroy:function(){e.remove({target:i,listeners:b})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){var e="public.";return{BASE:e,READY:e+"ready",ERROR:e+"error",PAUSE:e+"pause",LOADING:e+"loading",START_BUFFERING:e+"startBuffering",STOP_BUFFERING:e+"stopBuffering",PLAY:e+"play",METADATA:e+"metaData",STATS:e+"stats",PLAYBACK_FINISHED:e+"playbackFinished",MEDIA:e+"media",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",MUTE:e+"mute",UNMUTE:e+"unmute",VOLUME_CHANGE:e+"volumeChange",STATE_CHANGE:e+"stateChange",WARNING:e+"warning",DESTROY:e+"destroy",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort",SERVER_INFO:e+"serverInfo",ACTIVE_VIDEO_ELEMENT_CHANGE:e+"activeVideoElementChange"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(3),n(21),n(16),n(11),n(13),n(42),n(32),n(34),n(33),n(35),n(40),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(53),n(55),n(56),n(57),n(58),n(71)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p,E,v,h,g,m,b,y,S,T,_,A,O,R){"use strict";return{create:function(n){ar N,w,C=new t,P=e.create("LogicManager"),D=[],L=[{from:f.CONNECT,to:s.CONNECT},{from:f.DISCONNECT,to:s.DISCONNECT},{from:f.VIDEO_SOURCE,to:s.VIDEO_SOURCE},{from:f.NETWORK_PLAY,to:s.NETWORK_PLAY},{from:f.NETWORK_UPDATE_SOURCE,to:s.NETWORK_UPDATE_SOURCE},{from:f.NO_SERVER_ERROR,to:u.NO_SERVER_ERROR},{from:f.MISSING_RTMP_ERROR,to:u.MISSING_RTMP_ERROR},{from:f.NO_KEEP_CONNECTION,to:u.NO_KEEP_CONNECTION},{from:f.SERVER_INFO,to:u.SERVER_INFO},{from:f.URL,to:u.STREAM_URL},{from:f.UPDATE_SOURCE_INIT,to:u.UPDATE_SOURCE_INIT},{from:f.UPDATE_SOURCE_SUCCESS,to:u.UPDATE_SOURCE_SUCCESS},{from:f.UPDATE_SOURCE_FAIL,to:u.UPDATE_SOURCE_FAIL},{from:f.UPDATE_SOURCE_ABORT,to:u.UPDATE_SOURCE_ABORT},{from:f.SWITCH_STREAM_INIT,to:u.SWITCH_STREAM_INIT},{from:f.SWITCH_STREAM_SUCCESS,to:u.SWITCH_STREAM_SUCCESS},{from:f.SWITCH_STREAM_FAIL,to:u.SWITCH_STREAM_FAIL},{from:f.SWITCH_STREAM_ABORT,to:u.SWITCH_STREAM_ABORT},{from:E.LOADING_TIMEOUT,to:u.LOADING_TIMEOUT},{from:E.BUFFERING_TIMEOUT,to:u.BUFFERING_TIMEOUT},{from:v.CREATED,to:u.STREAM_INFO},{from:v.UPDATED,to:u.STREAM_INFO_UPDATE},{from:v.MIME_TYPE_UNSUPPORTED,to:u.MIME_TYPE_UNSUPPORTED},{from:h.RECEIVED,to:u.META_DATA_RECEIVED},{from:h.ERROR,to:u.META_DATA_ERROR},{from:g.VISIBLE,to:u.DOCUMENT_VISIBLE},{from:g.HIDDEN,to:u.DOCUMENT_HIDDEN},{from:m.STATS,to:u.ADAPTIVE_STATS},{from:m.STREAM_SWITCH,to:u.STREAM_SWITCH},{from:b.SEEK,to:s.SEEK},{from:b.RATE,to:s.SET_RATE},{from:b.BUFFER_GOAL_STATS,to:u.BUFFER_GOAL_STATS}],U=[{from:a.PLAY,to:p.API_PLAY},{from:a.PAUSE,to:p.API_PAUSE},{from:c.BUFFER_TWEAKS_CREATED,to:p.BUFFER_TWEAKS_CREATED},{from:c.PLAY_STATS,to:p.PLAY_STATS},{from:c.PLAYBACK_STARTED,to:p.PLAYING},{from:c.BUFFERING,to:p.BUFFERING},{from:c.CAN_PLAY,to:p.CAN_PLAY},{from:c.CAN_PLAY_THROUGH,to:p.CAN_PLAY_THROUGH},{from:c.PLAYING,to:p.MEDIA_PLAYING},{from:c.FRAME_DROP,to:p.FRAME_DROP},{from:c.VIEWPORT_VISIBLE,to:p.VIEWPORT_VISIBLE},{from:c.VIEWPORT_HIDDEN,to:p.VIEWPORT_HIDDEN},{from:c.TIME_OFFSET,to:p.TIME_OFFSET},{from:c.LOADED_DATA,to:p.LOADED_DATA},{from:c.UPDATE_SOURCE_ABORT,to:p.UPDATE_SOURCE_ABORT},{from:c.UPDATE_SOURCE_FAIL,to:p.UPDATE_SOURCE_FAIL},{from:c.MEDIA_ERROR,to:p.MEDIA_ERROR},{from:l.CONNECTING,to:p.NETWORK_CONNECTING},{from:l.CONNECTED,to:p.NETWORK_CONNECTED},{from:l.DISCONNECTED,to:p.NETWORK_DISCONNECTED},{from:l.DESTROYED,to:p.NETWORK_DISCONNECTED},{from:l.RECONNECTING,to:p.NETWORK_RECONNECTING},{from:l.RECONNECTION_IMMINENT,to:p.NETWORK_RECONNECTION_IMMINENT},{from:l.INITIALIZATION_ERROR,to:p.NETWORK_INITIALIZATION_ERROR},{from:l.ERROR,to:p.NETWORK_ERROR},{from:l.STATE_CHANGE,to:p.NETWORK_STATE_CHANGE},{from:l.RANDOM_ACCESS_POINT,to:p.RANDOM_ACCESS_POINT},{from:l.SERVER_INFO,to:p.SERVER_INFO},{from:l.STREAM_INFO,to:p.STREAM_INFO},{from:l.STREAM_INFO_UPDATE,to:p.STREAM_INFO_UPDATE},{from:l.STREAM_QUALITY,to:p.STREAM_QUALITY},{from:l.META_DATA,to:p.META_DATA},{from:l.UPDATE_SOURCE_SUCCESS,to:p.UPDATE_SOURCE_SUCCESS},{from:l.UPDATE_SOURCE_FAIL,to:p.UPDATE_SOURCE_FAIL},{from:l.UPDATE_SOURCE_ABORT,to:p.UPDATE_SOURCE_ABORT},{from:u.UPDATE_SOURCE_INIT,to:p.UPDATE_SOURCE_INIT},{from:u.STATE_CHANGE,to:p.APPLICATION_STATE_CHANGE},{from:u.STREAM_URL,to:p.STREAM_URL},{from:u.STREAM_SWITCH,to:p.STREAM_SWITCH},{from:s.CONFIG,to:p.CONFIG},{from:s.UPDATE_SOURCE,to:p.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:p.SWITCH_STREAM},{from:s.SET_ADAPTION,to:p.SET_ADAPTION}],M=[{type:p.CONFIG,listener:function(e){e.data.config.playback.metadata&&D.push(_.create(C,e.data.config))}}],k=[];return function(){for(var e in P.debugEnabled()&&P.debug("init"),d)Object.prototype.hasOwnProperty.call(d,e)&&-1===d.STATS.indexOf(d[e])&&k.push({type:d[e],listener:I});N=o.create(n,C,U),w=o.create(C,n,L),i.add({target:C,listeners:M}),i.add({target:n,listeners:k}),D.push(O.create(C)),D.push(R.create(C)),D.push(y.create(C)),D.push(T.create(C)),D.push(S.create(C)),D.push(A.create(C))}(),{destroy:function(){for(N.destroy(),N=null,w.destroy(),w=null;D.length;)D.pop().destroy();i.remove({target:C,listeners:M}),i.remove({target:n,listeners:k})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="connection.";return{BASE:e,CONNECT:e+"connect",DISCONNECT:e+"disconnect",VIDEO_SOURCE:e+"videoSource",NETWORK_PLAY:e+"networkPlay",NO_SERVER_ERROR:e+"noServerError",MISSING_RTMP_ERROR:e+"missingRtmpError",SERVER_INFO:e+"serverInfo",NO_KEEP_CONNECTION:e+"noKeepConnection",URL:e+"url",NETWORK_UPDATE_SOURCE:e+"networkUpdateSource",UPDATE_SOURCE_INIT:e+"updateSourceInit",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",SWITCH_STREAM_INIT:e+"switchStreamInit",SWITCH_STREAM_SUCCESS:e+"switchStreamSuccess",SWITCH_STREAM_FAIL:e+"switchStreamFail",SWITCH_STREAM_ABORT:e+"switchStreamAbort"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="timeout.";return{BASE:e,LOADING_TIMEOUT:e+"loadingTimeout",BUFFERING_TIMEOUT:e+"bufferingTimeout"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="streamInfo.";return{BASE:e,CREATED:e+"created",UPDATED:e+"updated",MIME_TYPE_UNSUPPORTED:e+"mimetypeUnsupported"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="metaData.";return{BASE:e,RECEIVED:e+"received",ERROR:e+"error"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="visibility.";return{BASE:e,HIDDEN:e+"hidden",VISIBLE:e+"visible"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="source.";return{BASE:e,STATS:e+"stats",STREAM_SWITCH:e+"streamSwitch"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(21),n(11),n(43),n(44),n(27),n(26),n(20),n(52)],void 0===(i=function(e,t,n,r,i,o,a,s,u){return{create:function(c){function l(e){O.length>1&&O.shift(),S&&S.id===e.data.id&&(L=S,S=null),"update"===e.data.type?c.emit(r.UPDATE_SOURCE_SUCCESS,{source:L.source,entry:L.entry,rule:L.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):c.emit(r.SWITCH_STREAM_SUCCESS,{source:L.source,entry:L.entry,rule:L.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}),L=!1,clearTimeout(_)}function d(e){var t,n=e?O.length-1:0;if(w||O[n].security||!P){D?h("paused"):v("paused"),w&&P?v("metastreamonly"):h("metastreamonly"),!w&&O[n].security&&P?v("checkandclose"):h("checkandclose"),t=E("websocket",n);var i=e?r.NETWORK_UPDATE_SOURCE:r.CONNECT;A.debugEnabled()&&A.debug("connect to: "+t,1),c.emit(i,{url:t,config:O[n],update:!!e&&e,reconnect:y.playback.reconnect,timeouts:y.playback.timeouts}),P||c.emit(r.URL,{url:t})}P&&(t=E("hls"),c.emit(r.URL,{url:t}),c.emit(r.VIDEO_SOURCE,{src:t,type:u.HLS}))},S,T,_,A=e.create("Connection"),O=[],R=[],I=o.UNITIALIZED,N=!1,w=!1,C=!1,P=!1,D=!0,L=!1,U=!1,M=0,k=!1,F=[{type:i.NETWORK_STATE_CHANGE,listener:function(e){A.debug(e.name+": network state change from "+g(I)+" to "+g(e.data.connectionState)),I=e.data.connectionState}},{type:i.SERVER_INFO,listener:function(e){if(T=e.data.onServerInfo,C){var t=T.capabilities,n=T.serverVersion,i=parseFloat(n);-1===t.indexOf("onPlay")&&-1===t.indexOf("onPause")&&(C=!1,c.emit(r.NO_KEEP_CONNECTION,{message:i<1.8?"The keepConnection feature is enabled by the players config, but is not supported by this server version ("+n+"). Use at least server version 1.8.0.0. The feature will be disabled.":"The keepConnection feature is enabled by the players config, but is not enabled by this server ("+n+"). The feature will be disabled."}),D||f())}c.emit(r.SERVER_INFO,e.data)}},{type:i.UPDATE_SOURCE_SUCCESS,listener:l},{type:i.UPDATE_SOURCE_FAIL,listener:function(e){O.length>1&&("update"===e.data.type?O.shift():O.pop()),"update"===e.data.type?c.emit(r.UPDATE_SOURCE_FAIL,{source:L.source,entry:L.entry,rule:L.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}):c.emit(r.SWITCH_STREAM_FAIL,{source:L.source,entry:L.entry,rule:L.rule,tag:e.data.tag,count:e.data.count,code:e.data.code,message:e.data.message,type:e.data.type,id:e.data.id}),e.data.code===s.NETWORK.SOURCE_TIMEOUT&&(S=L),L=!1}},{type:i.UPDATE_SOURCE_ABORT,listener:function(e){var t=!1;O.length>1&&("update"===e.data.type?O.shift():O.pop()),"superseded"===e.data.reason&&k&&(t=!0),"update"===e.data.type?"equalsource"===e.data.reason?c.emit(r.UPDATE_SOURCE_SUCCESS,{source:L.source,entry:L.entry,rule:L.rule,tag:e.data.tag,count:e.data.count,type:e.data.type,id:e.data.id}):c.emit(r.UPDATE_SOURCE_ABORT,{source:t?k.source:L.source,entry:t?k.entry:L.entry,rule:t?k.rule:L.rule,tag:e.data.tag,count:e.data.count,reason:e.data.reason,type:e.data.type,id:e.data.id}):c.emit(r.SWITCH_STREAM_ABORT,{source:P?e.data.source:L.source,entry:P?e.data.entry:L.entry,rule:P?e.data.rule:L.rule,tag:e.data.tag,count:e.data.count,reason:"equalsource"===e.data.reason?"equal":e.data.reason,type:e.data.type,id:e.data.id}),t?k=!1:L=!1}},{type:i.CONFIG,listener:function(e){y=e.data.config,b=y.id,w=y.playback.metadata,C=y.playback.keepConnection,D=y.playback.autoplay,P=t.mustUseHLS||y.playback.allowSafariHlsFallback&&t.canUseHLS}},{type:i.STREAM_SWITCH,listener:function(e){var t=e.data.entry,n=e.data.options;if("init"===e.data.type){for(;O.length;)O.pop();return p(t.h5live),void(C&&d())}return M+=1,n.tag=n.tag||"",n.count=M,"update"===e.data.type?c.emit(r.UPDATE_SOURCE_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:n,tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):c.emit(r.SWITCH_STREAM_INIT,{source:e.data.source,entry:t,rule:e.data.rule,options:n,tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}),U?void("update"===e.data.type?c.emit(r.UPDATE_SOURCE_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):c.emit(r.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"frequency",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id})):P&&L&&"update"===L.type&&"update"!==e.data.type?void c.emit(r.SWITCH_STREAM_ABORT,{source:e.data.source,entry:t,rule:e.data.rule,reason:"updateProgress",tag:n.tag,count:n.count,type:e.data.type,id:e.data.id}):(U=!0,setTimeout((function(){U=!1}),500),L&&(k=L),L=e.data,"update"===e.data.type?A.debugEnabled()&&A.debug("update source: "+JSON.stringify(e.data.source)):A.debugEnabled()&&A.debug("switch stream: "+JSON.stringify(t)),O.length>1&&O.pop(),p(t.h5live),void(C&&!D?(A.debugEnabled()&&A.debug("connect to new source with terminating the old one"),f(!0),O.shift(),l({data:{tag:e.data.options.tag,count:M,type:e.data.type,id:e.data.id}}),d()):D?(A.debugEnabled()&&A.debug("connect to new source without terminating the old one"),d(e.data)):(O.shift(),A.debugEnabled()&&A.debug("replaced source"),l({data:{tag:e.data.options.tag,count:M,type:e.data.type,id:e.data.id}}))))}},{type:i.API_PLAY,listener:function(){if(A.debugEnabled()&&A.debug("api play"),D=!0,C?(A.debugEnabled()&&A.debug("send network play"),c.emit(r.NETWORK_PLAY)):N||d(L&&L.options.forcePlay?L:void 0),P){var e=E("hls");c.emit(r.VIDEO_SOURCE,{src:e,type:u.HLS})}}},{type:i.API_PAUSE,listener:function(){A.debugEnabled()&&A.debug("api pause"),D=!1,C&&!L||f(),P&&c.emit(r.VIDEO_SOURCE,{src:"",type:u.HLS})}},{type:i.APPLICATION_STATE_CHANGE,listener:function(e){e.data.state===a.PAUSED&&L&&l({data:{tag:L.options.tag,count:L.options.count,type:L.type,id:L.id}})}},{type:i.CAN_PLAY,listener:function(){L&&P&&(clearTimeout(_),l({data:{tag:L.options.tag,count:L.options.count,type:L.type,id:L.id}}))}}];return A.debugEnabled()&&A.debug("init"),n.add({target:c,listeners:F}),{destroy:function(){n.remove({target:c,listeners:F})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){return Object.freeze({MP4:"video/mp4",MP4_MS:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',HLS:"application/vnd.apple.mpegURL"})}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(21),n(11),n(44),n(46),n(26),n(54),n(52)],void 0===(i=function(e,t,n,r,i,o,a,s){return{create:function(u){function c(e,t){p=t.data.onStreamInfo,h.debug(JSON.stringify(p));var n=p&&p.mimeType?p.mimeType:s.MP4_MS;if(window.MediaSource.isTypeSupported(n)){var r={},o=[a.PREROLL_DURATION];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=a[c];Object.prototype.hasOwnProperty.call(a,c)&&Object.prototype.hasOwnProperty.call(p,d)&&-1===o.indexOf(d)&&(r[d]=p[d])}(p=r).url=E,p.rtmp=l(),u.emit(e,{streamInfo:p})}else u.emit(i.MIME_TYPE_UNSUPPORTED)}ar d,f,p,E,v,h=e.create("StreamInfo"),g=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){d=e.data.state}},{type:r.CONFIG,listener:function(e){f=t.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS}},{type:r.STREAM_INFO,listener:function(e){d!==o.READY&&c(i.CREATED,e)}},{type:r.STREAM_INFO_UPDATE,listener:function(e){d!==o.BUFFERING&&d!==o.PLAYING||c(i.UPDATED,e)}},{type:r.STREAM_URL,listener:function(e){E=e.data.url,v=function(e){for(var t={},n=e.indexOf("?")+1,r=("&"+e.substring(n)).split("&"),i=0;i<r.length;i+=1){var o=r[i].split("=");2===o.length&&(t[o[0]]=decodeURIComponent(o[1]))}return t}(E)}},{type:r.CAN_PLAY,listener:function(e){f&&((p={haveAudio:e.data.haveAudio,haveVideo:e.data.haveVideo,audioInfo:e.data.haveAudio?{bitsPerSample:null,channels:null,sampleRate:null}:null,videoInfo:e.data.haveVideo?{width:e.data.videoWidth,height:e.data.videoHeight,frameRate:null}:null}).url=E,p.rtmp=l(),setTimeout((function(){u.emit(i.CREATED,{streamInfo:p})}),0))}}];return h.debugEnabled()&&h.debug("init"),n.add({target:u,listeners:g}),{destroy:function(){n.remove({target:u,listeners:g})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){return Object.freeze({HAVE_VIDEO:"haveVideo",HAVE_AUDIO:"haveAudio",VIDEO_INFO:"videoInfo",AUDIO_INFO:"audioInfo",PREROLL_DURATION:"prerollDuration",MIME_TYPE:"mimeType"})}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(21),n(11),n(44),n(45),n(26)],void 0===(i=function(e,t,n,r,i,o){var a=2e4,s=1e4,u=6e4,c=2e4,l=1e4,d=6e4;return{create:function(t){var f,p,E,v=e.create("Timeout"),h=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(f=e.data.state){case o.READY:case o.PLAYING:case o.PAUSED:clearTimeout(p),clearTimeout(E)}f===o.BUFFERING?(clearTimeout(E),E=setTimeout((,c)):clearTimeout(E),f===o.LOADING&&function(e){clearTimeout(p),p=setTimeout((,a+e)}(e.data.connectDelay)}},{type:r.CONFIG,listener:function(e){var t=e.data.config,n=1e3*t.playback.timeouts.loading,r=1e3*t.playback.timeouts.buffering;a=Math.max(Math.min(n,u),s),c=Math.max(Math.min(r,d),l)}}];return v.debugEnabled()&&v.debug("init"),n.add({target:t,listeners:h}),{destroy:function(){clearTimeout(p),clearTimeout(E),n.remove({target:t,listeners:h})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(21),n(11),n(20),n(26),n(44),n(43),n(47)],void 0===(i=function(e,t,n,r,i,o,a,s){return{create:function(u,c){ar d,f,p,E,v,h,g,m,b,y,S,T,_,A=e.create("MetaData"),O=0,R=250,I=[{type:o.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case i.LOADING:l(),n.add({target:u,listeners:N});break;case i.PAUSING:n.remove({target:u,listeners:N})}}},{type:o.TIME_OFFSET,listener:function(e){O=e.data.offset}},{type:o.STREAM_INFO,listener:function(){l()}},{type:a.UPDATE_SOURCE_SUCCESS,listener:function(){l()}},{type:a.SWITCH_STREAM_SUCCESS,listener:function(){l()}}],N=[{type:o.META_DATA,listener:function(e){A.debugEnabled()&&A.debug("onMetaData");var t=e.data[e.data.eventType];if(1===t.chunkIndex)"function"==typeof E.message.push&&0!==E.message.length&&u.emit(s.ERROR,{code:r.STREAM.METADATA_STILL_PROCESSING,message:"Received metadata with start index but currently process another. Discard old one."}),p=!0,T=function(e,t){return t=isNaN(t)?3:parseInt(t,10),Math.floor(e*Math.pow(10,t))/Math.pow(10,t)}(d&&f?y+S+R/1e3:t.streamTime+O/1e3),_=t.handlerName,E={handlerName:_,streamTime:T,message:[]};else{if(0===E.message.length||"function"!=typeof E.message.push)return void(p&&(u.emit(s.ERROR,{code:r.STREAM.METADATA_NO_START_INDEX,message:"Received metadata but no start index. Discard."}),p=!1,E.message=[]));if(!p)return}if(E.message.push(t.message),E.message.length!==t.chunkIndex)p&&(u.emit(s.ERROR,{code:r.STREAM.METADATA_WRONG_INDEX,message:"Received metadata with wrong index. Discard."}),p=!1,E.message=[]);else if(t.chunkCount-t.chunkIndex==0)try{m=E.message.join(""),_=E.handlerName,A.debugEnabled()&&A.debug("handlerName="+_+", metaData="+m),m=JSON.parse(m),E.message=m,b={handlerName:E.handlerName,streamTime:E.streamTime,message:E.message},v.push(b)}catch(e){u.emit(s.ERROR,{code:r.STREAM.METADATA_INVALID_JSON,message:"Received metadata with invalid json string."})}}},{type:o.PLAY_STATS,listener:function(e){for(y=e.data.currentTime,S=e.data.stats.buffer.delay.current;v.length;)(g=v.shift()).streamTime<=y?u.emit(s.RECEIVED,g):h.push(g);for(;h.length;)v.push(h.shift())}}];return A.debugEnabled()&&A.debug("init"),d=t.mustUseHLS||c.playback.allowSafariHlsFallback&&t.canUseHLS,f=c.playback.metadataLowDelay,n.add({target:u,listeners:I}),{destroy:function(){n.remove({target:u,listeners:I})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(11),n(6),n(44),n(48)],void 0===(i=function(e,t,n,r){return{create:function(i){ar a,s,u,c=t.create("VisibilityProxy"),l=!1,d=[{type:n.APPLICATION_STATE_CHANGE,listener:function(e){u||(c.debugEnabled()&&c.debug("initial player state"),o()),u=e.data.state}}];return c.debugEnabled()&&c.debug("initialize"),e.add({target:i,listeners:d}),void 0!==document.hidden?(a="hidden",s="visibilitychange"):void 0!==document.msHidden?(a="msHidden",s="msvisibilitychange"):void 0!==document.webkitHidden&&(a="webkitHidden",s="webkitvisibilitychange"),document.addEventListener(s,o),{destroy:function(){e.remove({target:i,listeners:d}),document.removeEventListener(s,o)}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(3),n(21),n(16),n(11),n(13),n(49),n(44),n(46),n(43),n(59),n(60),n(61),n(62),n(63),n(66),n(70)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p,E,v,h){"use strict";return{create:function(n){var r,i,d=new t,g=e.create("SourceManager"),m=[],b=[{from:f.STATS,to:a.STATS},{from:p.STREAM_SWITCH,to:a.STREAM_SWITCH}],y=[{from:s.CONFIG,to:l.CONFIG},{from:s.PLAY_STATS,to:l.PLAY_STATS},{from:s.FRAME_DROP,to:l.FRAME_DROP},{from:s.RANDOM_ACCESS_POINT,to:l.RANDOM_ACCESS_POINT},{from:s.STREAM_QUALITY,to:l.STREAM_QUALITY},{from:s.APPLICATION_STATE_CHANGE,to:l.APPLICATION_STATE_CHANGE},{from:s.UPDATE_SOURCE,to:l.UPDATE_SOURCE},{from:s.SWITCH_STREAM,to:l.SWITCH_STREAM},{from:s.PUBLIC_EVENT,to:l.PUBLIC_EVENT},{from:s.BUFFERING,to:l.BUFFERING},{from:s.SET_ADAPTION,to:l.SET_ADAPTION},{from:c.SERVER_INFO,to:l.SERVER_INFO},{from:c.UPDATE_SOURCE_INIT,to:l.UPDATE_SOURCE_INIT},{from:c.UPDATE_SOURCE_SUCCESS,to:l.UPDATE_SOURCE_SUCCESS},{from:c.UPDATE_SOURCE_FAIL,to:l.UPDATE_SOURCE_FAIL},{from:c.UPDATE_SOURCE_ABORT,to:l.UPDATE_SOURCE_ABORT},{from:c.SWITCH_STREAM_INIT,to:l.SWITCH_STREAM_INIT},{from:c.SWITCH_STREAM_SUCCESS,to:l.SWITCH_STREAM_SUCCESS},{from:c.SWITCH_STREAM_FAIL,to:l.SWITCH_STREAM_FAIL},{from:c.SWITCH_STREAM_ABORT,to:l.SWITCH_STREAM_ABORT},{from:u.CREATED,to:l.STREAM_INFO},{from:u.UPDATED,to:l.STREAM_INFO_UPDATE}];return g.debugEnabled()&&g.debug("init"),r=o.create(n,d,y),i=o.create(d,n,b),m.push(h.create(d)),m.push(E.create(d)),m.push(v.create(d)),{destroy:function(){for(r.destroy(),r=null,i.destroy(),i=null;m.length;)m.pop().destroy()}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="adaptionController.";return{BASE:e,SWITCH_SUGGESTION:e+"switchSuggestion"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="ressourceController.";return{BASE:e,STATS:e+"stats",BUFFERING:e+"buffering",INITIAL_SWITCH_UP:e+"initialSwitchUp",STREAM_INFO:e+"streamInfo",STREAM_QUALITY:e+"streamQuality",PAUSED:e+"paused",BUFFERING_LONG:e+"longBuffering"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="switchController.";return{BASE:e,STREAM_SWITCH:e+"streamSwitch",SUGGESTION_ABORT:e+"suggestionAbort"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(11),n(6),n(59),n(60),n(64),n(65),n(21)],void 0===(i=function(e,t,n,r,i,o,a){return{create:function(r){function s(e,t){for(;l.length;)l.pop().destroy();Object.prototype.hasOwnProperty.call(f,e)&&l.push(f[e].create(r,t))}var u=t.create("Adaptive.AdaptionController"),c=!1,l=[],d=[{type:n.CONFIG,listener:function(e){var t=e.data.config.source.options.adaption.rule,n=e.data.config.source.options.adaption;c=a.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&a.canUseHLS,n.useHLS=c,s(t,n)}},{type:n.UPDATE_SOURCE,listener:function(e){var t=e.data.source.options.adaption.rule,n=e.data.source.options.adaption;n.useHLS=c,s(t,n)}},{type:n.SWITCH_STREAM,listener:function(){s("none")}},{type:n.SET_ADAPTION,listener:function(e){var t=e.data.adaption.rule,n=e.data.adaption;n.useHLS=c,s(t,n)}}],f={deviationOfMean:i,deviationOfMean2:o};return u.debugEnabled()&&u.debug("initialize"),e.add({target:r,listeners:d}),{destroy:function(){for(;l.length;)l.pop().destroy();e.remove({target:r,listeners:d})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(11),n(6),n(59),n(60),n(61),n(62)],void 0===(i=function(e,t,n,r,i,o){return{create:function(a,s){function u(e,t){return e<t}function c(e,t){return e>t}function l(e,t){_.debugEnabled()&&_.debug("isCriticalEventHistory with allowedTimeDifferenceSeconds "+t);var n=e.length;return function(e,t,n){return(t-e)/1e3<n}(e[0].timestamp,e[n-1].timestamp,t)}function d(e,t){var n=e.length;return n>0?e.slice(Math.max(n-t,0),n):[]}function f(e){_.debug((e?"allow":"deny")+" prediction"),e?(_.debugEnabled()&&_.debug("deny prediction"),clearTimeout(T),T=0,A=!0):T?_.debugEnabled()&&_.debug("allow prediction already in timeout"):(_.debugEnabled()&&_.debug("allow prediction in "+L+" seconds"),T=setTimeout((function(){_.debugEnabled()&&_.debug("allow prediction after timeout"),A=!1,T=0}),1e3*L))}function p(e){if(_.debugEnabled()&&_.debug("make switch suggestion ?"),!A){_.debugEnabled()&&_.debug("making switch suggestion allowed");var t,n,i=e.buffer.delay.bufferDelaysStandardDeviations.length;_.debugEnabled()&&_.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest ?"),i>=O&&!m()&&(_.debugEnabled()&&_.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest !"),t=d(e.buffer.delay.bufferDelaysStandardDeviations,O),n=d(e.buffer.delay.bufferDelaysArithmeticMeans,O),_.debugEnabled()&&_.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue ?"),function(e,t){_.debugEnabled()&&_.debug("bufferDevationAboveValue with limit "+t);for(var n=!0,r=0;r<=e.length-1;r++)if(!c(e[r],t)){n=!1;break}return n}(t,R)&&function(e,t){_.debugEnabled()&&_.debug("bufferCurrentHasMinimumValue with limit "+t);for(var n=!1,r=0;r<=e.length-1;r++)if(u(e[r],t)){n=!0;break}return n}(n,I)&&(_.debugEnabled()&&_.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue !"),_.debugEnabled()&&_.debug("make suggestion to switch down"),f(!0),E(r.SWITCH_SUGGESTION,{suggestion:"down"}))),_.debugEnabled()&&_.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest ?"),i>=N&&!b()&&(_.debugEnabled()&&_.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest !"),t=d(e.buffer.delay.bufferDelaysStandardDeviations,N),_.debugEnabled()&&_.debug("bufferDevationBelowValue ?"),function(e,t){_.debugEnabled()&&_.debug("bufferDevationBelowValue with limit "+t);for(var n=!0,r=0;r<=e.length-1;r++)if(!u(e[r],t)){n=!1;break}return n}(t,w)&&(_.debugEnabled()&&_.debug("bufferDevationBelowValue !"),_.debugEnabled()&&_.debug("make suggestion to switch up"),f(!0),E(r.SWITCH_SUGGESTION,{suggestion:"up"})))}}function E(e,t){_.debugEnabled()&&_.debug("make suggestion to switch "+t.suggestion+(t.priority?" with priority "+t.priority:" without priority")),a.emit(e,t)}function v(e){_.debugEnabled()&&_.debug("success"),U||e||(F=!0,S&&clearTimeout(S),S=setTimeout((function(){f(!0),E(r.SWITCH_SUGGESTION,{suggestion:"up"})}),1e3*D)),y(),f(!1)}function h(){_.debugEnabled()&&_.debug("error"),f(!1),g()}function g(){_.debugEnabled()&&_.debug("destroy initial switch up"),clearTimeout(S),U=!0}function m(){return"highest"===M}function b(){return"lowest"===M}function y(e){(M=!!e&&e)?_.debugEnabled()&&_.debug("aborted with reason: "+M):_.debugEnabled()&&_.debug("reset abort reason"),b()&&g()}var S,T,_=t.create("Adaptive.DeviationOfMean.Adaption"),A=!0,O=5,R=.075,I=.5,N=8,w=s&&s.useHLS?.035:.02,C=2,P=10,D=5,L=3,U=!1,M=!1,k=0,F=!1,x=[{type:n.UPDATE_SOURCE_SUCCESS,listener:v},{type:n.UPDATE_SOURCE_FAIL,listener:h},{type:n.UPDATE_SOURCE_ABORT,listener:h},{type:n.SWITCH_STREAM_SUCCESS,listener:v},{type:n.SWITCH_STREAM_FAIL,listener:h},{type:n.SWITCH_STREAM_ABORT,listener:h},{type:i.STATS,listener:function(e){F||v(!0),p(e.data.deviationOfMean)}},{type:i.BUFFERING,listener:function(e){(function(e){var t,n=e.data.startBufferings.length;_.debugEnabled()&&_.debug("evaluate buffering events ?"),A||m()||(_.debugEnabled()&&_.debug("evaluating buffering events allowed"),n>=C&&(_.debugEnabled()&&_.debug("startBufferingsLength "+n),t=d(e.data.startBufferings,3),_.debugEnabled()&&_.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory ?"),t.length>=3&&l(t,P)?(_.debugEnabled()&&_.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory !"),f(!0),E(r.SWITCH_SUGGESTION,{suggestion:"down",priority:1})):t.length>=2&&(t=d(e.data.startBufferings,2),_.debugEnabled()&&_.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory ?"),l(t,P)&&(_.debugEnabled()&&_.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory !"),f(!0),E(r.SWITCH_SUGGESTION,{suggestion:"down",priority:0})))))})(e),g()}},{type:i.STREAM_INFO,listener:function(){v(!0)}},{type:i.STREAM_QUALITY,listener:function(e){k=e.data.streamQuality.timestamp.standardDeviation,_.debugEnabled()&&_.debug("serverStandardDeviation "+k)}},{type:i.PAUSED,listener:function(){y(),g()}},{type:i.BUFFERING_LONG,listener:function(){_.debugEnabled()&&_.debug("onBufferingLong"),f(!0),E(r.SWITCH_SUGGESTION,{suggestion:"down",priority:1})}},{type:o.SUGGESTION_ABORT,listener:function(e){y(e.data.reason),h()}}];return _.debugEnabled()&&_.debug("initialize"),e.add({target:a,listeners:x}),{destroy:function(){g(),e.remove({target:a,listeners:x})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(11),n(6),n(59),n(60),n(61),n(62)],void 0===(i=function(e,t,n,r,i,o){return{create:function(a){nction c(e,t){T.debugEnabled()&&T.debug("isCriticalEventHistory with allowedTimeDifferenceSeconds "+t);var n=e.length;return function(e,t,n){return(t-e)/1e3<n}(e[0].timestamp,e[n-1].timestamp,t)}unction d(e){T.debug((e?"allow":"deny")+" prediction"),e?(T.debugEnabled()&&T.debug("deny prediction"),clearTimeout(S),S=0,_=!0):S?T.debugEnabled()&&T.debug("allow prediction already in timeout"):(T.debugEnabled()&&T.debug("allow prediction in "+D+" seconds"),S=setTimeout((,1e3*D))}function f(e){if(T.debugEnabled()&&T.debug("make switch suggestion ?"),!_){T.debugEnabled()&&T.debug("making switch suggestion allowed");var t,n,i=e.buffer.delay.bufferDelaysStandardDeviationsDev.length;T.debugEnabled()&&T.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest ?"),i>=A&&!g()&&(T.debugEnabled()&&T.debug("bufferDelaysStandardDeviationsLength >= 5 && !wasAbortedHighest !"),t=l(e.buffer.delay.bufferDelaysStandardDeviationsDev,A),n=l(e.buffer.delay.bufferDelaysArithmeticMeans,A),T.debugEnabled()&&T.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue ?"),function(e,t){T.debugEnabled()&&T.debug("bufferDevationAboveValue with limit "+t);for(var n=!0,r=0;r<=e.length-1;r++)if(!u(e[r],t)){n=!1;break}return n}(t,O)&&function(e,t){T.debugEnabled()&&T.debug("bufferCurrentHasMinimumValue with limit "+t);for(var n=!1,r=0;r<=e.length-1;r++)if(s(e[r],t)){n=!0;break}return n}(n,R)&&(T.debugEnabled()&&T.debug("bufferDevationAboveValue && bufferCurrentHasMinimumValue !"),T.debugEnabled()&&T.debug("make suggestion to switch down"),d(!0),p(r.SWITCH_SUGGESTION,{suggestion:"down"}))),T.debugEnabled()&&T.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest ?"),i>=I&&!m()&&(T.debugEnabled()&&T.debug("bufferDelaysStandardDeviationsLength >= 8 && !wasAbortedLowest !"),t=l(e.buffer.delay.bufferDelaysStandardDeviationsDev,I),T.debugEnabled()&&T.debug("bufferDevationBelowValue ?"),function(e,t){T.debugEnabled()&&T.debug("bufferDevationBelowValue with limit "+t);for(var n=!0,r=0;r<=e.length-1;r++)if(!s(e[r],t)){n=!1;break}return n}(t,N)&&(T.debugEnabled()&&T.debug("bufferDevationBelowValue !"),T.debugEnabled()&&T.debug("make suggestion to switch up"),d(!0),p(r.SWITCH_SUGGESTION,{suggestion:"up"})))}}unction E(e){T.debugEnabled()&&T.debug("success"),L||e||(k=!0,y&&clearTimeout(y),y=setTimeout((,1e3*P)),b(),d(!1)}nction g(){return"highest"===U}function m(){return"lowest"===U}function b(e){(U=!!e&&e)?T.debugEnabled()&&T.debug("aborted with reason: "+U):T.debugEnabled()&&T.debug("reset abort reason"),m()&&h()}var y,S,T=t.create("Adaptive.DeviationOfMean2.Adaption"),_=!0,A=5,O=.045,R=.5,I=8,N=.016,w=2,C=10,P=5,D=3,L=!1,U=!1,M=0,k=!1,F=[{type:n.UPDATE_SOURCE_SUCCESS,listener:E},{type:n.UPDATE_SOURCE_FAIL,listener:v},{type:n.UPDATE_SOURCE_ABORT,listener:v},{type:n.SWITCH_STREAM_SUCCESS,listener:E},{type:n.SWITCH_STREAM_FAIL,listener:v},{type:n.SWITCH_STREAM_ABORT,listener:v},{type:i.STATS,listener:,{type:i.BUFFERING,listener:function(e){(function(e){var t,n=e.data.startBufferings.length;T.debugEnabled()&&T.debug("evaluate buffering events ?"),_||g()||(T.debugEnabled()&&T.debug("evaluating buffering events allowed"),n>=w&&(T.debugEnabled()&&T.debug("startBufferingsLength "+n),t=l(e.data.startBufferings,3),T.debugEnabled()&&T.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory ?"),t.length>=3&&c(t,C)?(T.debugEnabled()&&T.debug("startBufferingsCutOffLength >= 3 && isCriticalEventHistory !"),d(!0),p(r.SWITCH_SUGGESTION,{suggestion:"down",priority:1})):t.length>=2&&(t=l(e.data.startBufferings,2),T.debugEnabled()&&T.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory ?"),c(t,C)&&(T.debugEnabled()&&T.debug("startBufferingsCutOffLength >= 2 && isCriticalEventHistory !"),d(!0),p(r.SWITCH_SUGGESTION,{suggestion:"down",priority:0})))))})(e),h()}},{type:i.STREAM_INFO,listener:function(){E(!1)}},{type:i.STREAM_QUALITY,listener:function(e){M=e.data.streamQuality.timestamp.standardDeviation,T.debugEnabled()&&T.debug("serverStandardDeviation "+M)}},{type:i.PAUSED,listener:,{type:i.BUFFERING_LONG,listener:function(){T.debugEnabled()&&T.debug("onBufferingLong"),d(!0),p(r.SWITCH_SUGGESTION,{suggestion:"down",priority:1})}},{type:o.SUGGESTION_ABORT,listener:];return T.debugEnabled()&&T.debug("initialize"),e.add({target:a,listeners:F}),{destroy:function(){h(),e.remove({target:a,listeners:F})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(11),n(6),n(16),n(59),n(61),n(67),n(69)],void 0===(i=function(e,t,n,r,i,o,a){return{create:function(n){ar s=t.create("Adaptive.RessourceController"),u=[],c=[{type:r.CONFIG,listener:function(e){i(e.data.config.source.options.adaption.rule,e.data.config.source.options.adaption)}},{type:r.UPDATE_SOURCE,listener:function(e){i(e.data.source.options.adaption.rule,e.data.source.options.adaption)}},{type:r.SWITCH_STREAM,listener:,{type:r.SET_ADAPTION,listener:],l={deviationOfMean:o,deviationOfMean2:a};return s.debugEnabled()&&s.debug("initialize"),e.add({target:n,listeners:c}),{destroy:function(){for(;u.length;)u.pop().destroy();e.remove({target:n,listeners:c})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(26),n(11),n(6),n(16),n(68),n(59),n(61)],void 0===(i=function(e,t,n,r,i,o,a){return{create:function(r){function s(){y.debugEnabled()&&y.debug("setRessourceBlockTimeout from success"),u()}function u(){y.debugEnabled()&&y.debug("setRessourceBlockTimeout"),c(!0),clearTimeout(v),v=setTimeout((function(){y.debugEnabled()&&y.debug("setRessourceBlockTimeout fired"),c(!1),p===e.BUFFERING?(y.debugEnabled()&&y.debug("setRessourceBlockTimeout fired but in buffering state"),r.emit(a.BUFFERING,{startBufferings:T})):(y.debugEnabled()&&y.debug("setRessourceBlockTimeout fired & not in buffering state"),l())}),k)}function c(e){y.debugEnabled()&&y.debug("setRessourceBlock "+(e?"true":"false")),S=e}function l(){for(y.debugEnabled()&&y.debug("reset stats"),E={adaptive:{buffer:{delay:{samples:0,frequency:I,avg:0,min:0,max:0,deviation:0,count:0}}}},m=i.create(C,P),b=i.create(R,I),g=i.create(N,w),A=i.create(D,L);T.length;)T.pop()}function d(){y.debugEnabled()&&y.debug("setBufferingLongTimeout"),f(),h=setTimeout((function(){y.debugEnabled()&&y.debug("setBufferingLongTimeout fired"),p===e.BUFFERING?(y.debugEnabled()&&y.debug("setBufferingLongTimeout fired and still in buffering state"),r.emit(a.BUFFERING_LONG)):y.debugEnabled()&&y.debug("setBufferingLongTimeout fired and not in buffering state")}),F)}function f(){y.debugEnabled()&&y.debug("clearBufferingLongTimeout"),clearTimeout(h),h=0}var p,E,v,h,g,m,b,y=n.create("Adaptive.DeviationOfMean.Ressource"),S=!1,T=[],_=[],A=[],O=10,R=10,I=1,N=10,w=1,C=20,P=1,D=20,L=1,U=100,M=10,k=2e3,F=3e3,x=[{type:o.APPLICATION_STATE_CHANGE,listener:function(t){for(p||y.debugEnabled()&&y.debug("initial player state"),(p=t.data.state)===e.PAUSED&&"playbackrestart"!==t.data.reason&&(l(),r.emit(a.PAUSED,{paused:{}})),p===e.PLAYING&&_.length&&_[_.length-1].state===e.LOADING&&(y.debugEnabled()&&y.debug("setRessourceBlockTimeout from playing"),u());_.length>U;)_.shift();_.push({state:p,timestamp:performance.now()}),h&&f()}},{type:o.PLAY_STATS,listener:function(e){S||(g.add(e.data.stats.buffer.delay.current),g.count%O==0&&(m.add(g.arithmetic),b.add(m.values[m.values.length-1]),A.add(b.deviation),function(e,t){t.avg=e.arithmetic,t.min=e.minimum,t.max=e.maximum,t.deviation=e.deviation,t.samples=e.values.length,t.count=e.count,t.bufferDelaysArithmeticMeans=m.values,t.bufferDelaysStandardDeviations=A.values}(g,E.adaptive.buffer.delay),r.emit(a.STATS,{deviationOfMean:E.adaptive})))}},{type:o.BUFFERING,listener:function(e){for(y.debugEnabled()&&y.debug("push startBuffering!"),T.push({event:e.data,timestamp:performance.now()});T.length>M;)T.shift();S?y.debugEnabled()&&y.debug("block emit startBuffering!"):(y.debugEnabled()&&y.debug("emit startBuffering!"),r.emit(a.BUFFERING,{startBufferings:T})),d()}},{type:o.STREAM_INFO,listener:function(){r.emit(a.STREAM_INFO,{streamInfo:{}}),l()}},{type:o.STREAM_QUALITY,listener:function(e){r.emit(a.STREAM_QUALITY,{streamQuality:e.data.onStreamQuality})}},{type:o.UPDATE_SOURCE_SUCCESS,listener:s},{type:o.SWITCH_STREAM_SUCCESS,listener:s}];return y.debugEnabled()&&y.debug("initialize"),l(),t.add({target:r,listeners:x}),{destroy:function(){t.remove({target:r,listeners:x})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){eturn{create:function(t,n){function r(){var t=JSON.parse(JSON.stringify(a)).sort((,0);s.arithmetic=e(t),s.geometric=function(e){return Math.pow(e.reduce((,0),1/e.length)}(t),s.harmonic=function(e){var t=e.reduce((,0);return t?e.length/t:0}(t),s.minimum=t[0],s.maximum=t[t.length-1],s.deviation=function(t,n){var r=n||e(t);return t.length>1?Math.sqrt(t.reduce((,0)/(t.length-1)):0}(t,s.arithmetic),s.changed=!0}r a=[],s={},u=0;return s={add:function(e){for(a.push(e);a.length>t;)a.shift();return s.count++,s.changed=!1,(!n||n&&u%n==0)&&r(),i()},get:i,minimum:0,maximum:0,first:0,last:0,arithmetic:0,geometric:0,harmonic:0,deviation:0,count:0,values:a,changed:!1}}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(26),n(11),n(6),n(68),n(59),n(61)],void 0===(i=function(e,t,n,r,i,o){return{create:function(a){unction u(){y.debugEnabled()&&y.debug("setRessourceBlockTimeout"),c(!0),clearTimeout(v),v=setTimeout((,F)}unction l(){for(y.debugEnabled()&&y.debug("reset stats"),E={adaptive:{buffer:{delay:{samples:0,frequency:N,avg:0,min:0,max:0,deviation:0,count:0}}}},m=r.create(P,D),b=r.create(I,N),g=r.create(w,C),A=r.create(L,U),O=r.create(L,U);T.length;)T.pop()}function d(){y.debugEnabled()&&y.debug("setBufferingLongTimeout"),f(),h=setTimeout((,x)}function f(){y.debugEnabled()&&y.debug("clearBufferingLongTimeout"),clearTimeout(h),h=0}var p,E,v,h,g,m,b,y=n.create("Adaptive.DeviationOfMean2.Ressource"),S=!1,T=[],_=[],A=[],O=[],R=10,I=10,N=1,w=10,C=1,P=20,D=1,L=10,U=1,M=100,k=10,F=2e3,x=3e3,j=[{type:i.APPLICATION_STATE_CHANGE,listener:function(t){for(p||y.debugEnabled()&&y.debug("initial player state"),(p=t.data.state)===e.PAUSED&&"playbackrestart"!==t.data.reason&&(l(),a.emit(o.PAUSED,{paused:{}})),p===e.PLAYING&&_.length&&_[_.length-1].state===e.LOADING&&(y.debugEnabled()&&y.debug("setRessourceBlockTimeout from playing"),u());_.length>M;)_.shift();_.push({state:p,timestamp:performance.now()}),h&&f()}},{type:i.PLAY_STATS,listener:function(e){S||(g.add(e.data.stats.buffer.delay.current),g.count%R==0&&(m.add(g.arithmetic),b.add(m.values[m.values.length-1]),A.add(b.deviation),O.add(A.deviation),function(e,t){t.avg=e.arithmetic,t.min=e.minimum,t.max=e.maximum,t.deviation=e.deviation,t.samples=e.values.length,t.count=e.count,t.bufferDelaysArithmeticMeans=m.values,t.bufferDelaysStandardDeviations=A.values,t.bufferDelaysStandardDeviationsDev=O.values}(g,E.adaptive.buffer.delay),a.emit(o.STATS,{deviationOfMean2:E.adaptive})))}},{type:i.BUFFERING,listener:function(e){for(y.debugEnabled()&&y.debug("push startBuffering!"),T.push({event:e.data,timestamp:performance.now()});T.length>k;)T.shift();S?y.debugEnabled()&&y.debug("block emit startBuffering!"):(y.debugEnabled()&&y.debug("emit startBuffering!"),a.emit(o.BUFFERING,{startBufferings:T})),d()}},{type:i.STREAM_INFO,listener:function(){a.emit(o.STREAM_INFO,{streamInfo:{}}),l()}},{type:i.STREAM_QUALITY,listener:function(e){a.emit(o.STREAM_QUALITY,{streamQuality:e.data.onStreamQuality})}},{type:i.UPDATE_SOURCE_SUCCESS,listener:s},{type:i.SWITCH_STREAM_SUCCESS,listener:s}];return y.debugEnabled()&&y.debug("initialize"),l(),t.add({target:a,listeners:j}),{destroy:function(){t.remove({target:a,listeners:j})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(11),n(6),n(16),n(26),n(59),n(62),n(60)],void 0===(i=function(e,t,n,r,i,o,a){return{create:function(s){unction c(e){P.debugEnabled()&&P.debug("apply switch to stream with index "+m),L=Math.round(1e11*Math.random()),D[L]=m,P.debugEnabled()&&P.debug("switch with id "+L+" should change switch index from "+g+" to "+m);var t=n.copy(v.options.switch);t.tag="update"===e?t.tag:function(e){var t=v.entries[e].h5live;return t.rtmp?t.rtmp.streamname:t.params&&t.params.stream}(m)+" streamSwitch "+L,t.pauseOnError="update"===e||t.pauseOnError,P.debugEnabled()&&P.debug('switch has tag "'+t.tag+'"');var r={source:n.copy(v),rule:n.copy(v.options.adaption.rule),downStep:n.copy(v.options.adaption.downStep),entry:n.copy(v.entries[m]),options:n.copy(t),type:n.copy(e),id:n.copy(L)};switch(s.emit(o.STREAM_SWITCH,r),e){case"init":P.debugEnabled()&&P.debug('stream switch init with tag "'+t.tag+'"'),P.debugEnabled()&&P.debug("switch with id "+L+" is type 'init', set initial index to "+m),l(m),E();break;case"update":case"direct":E()}}nction f(e){y=e,C=e===B?G:e,Y=!0,P.debugEnabled()&&P.debug("applied timeout: "+e),y===W?R=d():y===H&&(O=d())}r v,h,g,m,b,y,S,T,_,A,O,R,I,N,w,C,P=t.create("SwitchRequestController"),D={},L=0,U=!1,M=0,k=!1,F=0,x=0,j=[],B=30,G=60,H=120,W=240,V=60,Y=!1,K=[{type:i.CONFIG,listener:function(e){u(e.data.config.source),c("init")}},{type:i.SWITCH_STREAM,listener:function(e){P.debugEnabled()&&P.debug("forced to switch to stream with index "+e.data.index),P.debugEnabled()&&P.debug("current stream has index "+g+" of "+(b-1)),function(e){return e<b&&e>-1}(e.data.index)&&(m=e.data.index,U="direct",v.options.adaption.rule="none",c(U))}},{type:i.UPDATE_SOURCE,listener:function(e){u(e.data.source),c(U="update")}},{type:i.APPLICATION_STATE_CHANGE,listener:function(e){h||P.debugEnabled()&&P.debug("initial player state"),(h=e.data.state)===r.PAUSED&&E()}},{type:i.UPDATE_SOURCE_SUCCESS,listener:function(){U=!1}},{type:i.UPDATE_SOURCE_FAIL,listener:function(){U=!1}},{type:i.UPDATE_SOURCE_ABORT,listener:function(){U=!1}},{type:i.SWITCH_STREAM_INIT,listener:function(e){var t=e.data.tag;P.debugEnabled()&&P.debug('stream switch init with tag "'+t+'"')}},{type:i.SWITCH_STREAM_SUCCESS,listener:function(e){var t=e.data.tag,n=t.split(" streamSwitch "),r=e.data.type;"down"===r&&(k=!0,F=d()),"up"===r&&(x=d(),j.push(x)),P.debugEnabled()&&P.debug('stream switch success with tag "'+t+'"'),P.debugEnabled()&&P.debug("switch with id "+n[1]+" was successful, switch index changed from "+g+" to "+D[n[1]]),l(D[n[1]]),U=!1}},{type:i.SWITCH_STREAM_FAIL,listener:function(e){var t=e.data.tag,n=t.split(" streamSwitch ");P.debugEnabled()&&P.debug('stream switch fail with tag "'+t+'"'),P.debugEnabled()&&P.debug("switch with id "+n[1]+" has been failed with code "+e.data.code+", switch index stays at "+g),U=!1}},{type:i.SWITCH_STREAM_ABORT,listener:function(e){var t=e.data.tag,n=t.split(" streamSwitch ");P.debugEnabled()&&P.debug('stream switch abort with tag "'+t+'"'),P.debugEnabled()&&P.debug("switch with id "+n[1]+" has been aborted"+(e.data&&e.data.reason?" with reason '"+e.data.reason+"'":"")+", switch index stays at "+g),U=!1}},{type:i.SET_ADAPTION,listener:function(e){v.options.adaption=e.data.adaption}},{type:a.SWITCH_SUGGESTION,listener:function(e){if(P.debugEnabled()&&P.debug("suggest stream to switch "+e.data.suggestion),P.debugEnabled()&&P.debug("current stream has index "+g+" of "+(b-1)),U&&(!e.data.priority||e.data.priority&&1!==e.data.priority))P.debugEnabled()&&P.debug("switch already initialized, abort"),s.emit(o.SUGGESTION_ABORT,{reason:"initialized"});else{if(U=void 0,e.data.suggestion)if("down"===e.data.suggestion)g<b-1?(m=1===e.data.priority?b-1:Math.min(g+v.options.adaption.downStep,b-1),U="down",Y=!1,P.debugEnabled()&&P.debug("downswitch suggestion, no timeout applied")):(P.debugEnabled()&&P.debug("suggest to switch down but highest index reached, abort"),s.emit(o.SUGGESTION_ABORT,{reason:"highest"}));else if("up"===e.data.suggestion){M=d(),T=Math.max(x,F),y=k?function(){if((S=d())<T)return 0;var e=p(S,F),t=Math.abs(x-F);N=p(S,O),I=p(S,R);var n=(w=y)+10<e,r=!!(e>(w<=G?G:C+V));if(Y)y=w;else if(x>0&&!Y)if(t<30&&e<=C+10)f(O&&(x-O||x-R>0)&&(N>V&&N<H+V||I<W+V)?W:H);else if(!Y&&n&&r)switch(w){case B:case G:f(B);break;case H:f(G);break;case W:f(H)}else f(G);else f(G);return y}():0,_=x>F?"up":"down";var t=M-T;if(0===g)P.debugEnabled()&&P.debug("suggest to switch up but lowest index reached, abort"),s.emit(o.SUGGESTION_ABORT,{reason:"lowest"}),Y=!1;else if(k&&t<y)switch(A=y-t,P.debugEnabled()&&P.debug("switchSuggestionTime "+M.toFixed(2)+"; lastSwitchTime "+T.toFixed(2)+"; timeout in sec: "+y+"; timeLeft: "+A.toFixed(2)),_){case"down":P.debugEnabled()&&P.debug("suggest to switch up but too less time passed since the last switch down"),s.emit(o.SUGGESTION_ABORT,{reason:"toofast"});break;case"up":P.debugEnabled()&&P.debug("suggest to switch up but too less time passed since the last upswitch"),s.emit(o.SUGGESTION_ABORT,{reason:"toofast"})}else m=g-1,U="up",Y=!1,P.debugEnabled()&&P.debug("after upswitch, no timeout applied"),C=H}U?c(U):P.debugEnabled()&&P.debug("switch not initialized")}}}];return P.debugEnabled()&&P.debug("initialize"),e.add({target:s,listeners:K}),{destroy:function(){e.remove({target:s,listeners:K})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(3),n(21),n(16),n(11),n(13),n(50),n(44),n(72),n(73),n(74),n(75)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d){"use strict";return{create:function(n){var r,i,f=new t,p=e.create("LatencyManager"),E=[],v=[{from:c.SEEK,to:a.SEEK},{from:c.RATE,to:a.RATE},{from:l.BUFFER_GOAL_STATS,to:a.BUFFER_GOAL_STATS}],h=[{from:s.BUFFER_TWEAKS_CREATED,to:u.BUFFER_TWEAKS_CREATED},{from:s.FRAME_DROP,to:u.FRAME_DROP},{from:s.RANDOM_ACCESS_POINT,to:u.RANDOM_ACCESS_POINT},{from:s.TIME_OFFSET,to:u.TIME_OFFSET},{from:s.CONFIG,to:u.CONFIG},{from:s.PLAY_STATS,to:u.PLAY_STATS},{from:s.APPLICATION_STATE_CHANGE,to:u.APPLICATION_STATE_CHANGE}];return p.debugEnabled()&&p.debug("init"),r=o.create(n,f,h),i=o.create(f,n,v),E.push(d.create(f)),{destroy:function(){for(r.destroy(),r=null,i.destroy(),i=null;E.length;)E.pop().destroy()}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="adjustLatencyHandler.";return{BASE:e,SEEK:e+"seek",RATE:e+"rate"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(26),n(11),n(72),n(74),n(76),n(80)],void 0===(i=function(e,t,n,r,i,o,a){return{create:function(s){var u,c,l,d,f=e.create("LiveController"),p=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(n.remove({target:s,listeners:E}),e.data.state){case t.LOADING:case t.PLAYING:case t.BUFFERING:n.add({target:s,listeners:E})}}},{type:r.CONFIG,listener:function(e){l=o.create(s,e.data.config),d=a.create(s,e.data.config)}}],E=[{type:r.PLAY_STATS,listener:function(e){u=e.data,(c=l.calcBufferGoal(u)).real=d.checkLatency(u,c),s.emit(i.BUFFER_GOAL_STATS,{real:Math.round(100*c.real)/100,base:Math.round(100*c.base)/100,min:Math.round(100*c.min)/100,max:Math.round(100*c.max)/100})}}];return f.debugEnabled()&&f.debug("init"),n.add({target:s,listeners:p}),{destroy:function(){n.remove({target:s,listeners:p}),l.destroy(),d.destroy()}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(21),n(77),n(78),n(79)],void 0===(i=function(e,t,n,r,i){return{create:function(o,a){var s,u,c,l,d,f=e.create("AdjustControllerAdapter"),p={default:r,fastadaptive:i,balancedadaptive:i},E={DEFAULT:"default",FAST_ADAPTIVE:"fastadaptive",BALANCED_ADAPTIVE:"balancedadaptive"};return f.debugEnabled()&&f.debug("init"),c=a.playback.latencyControlMode,l=t.mustUseHLS||a.playback.allowSafariHlsFallback&&t.canUseHLS,d=t.isTridentBrowser,u=E.DEFAULT,c!==n.FAST_ADAPTIVE||l||d?c!==n.BALANCED_ADAPTIVE||l||d||(u=E.BALANCED_ADAPTIVE):u=E.FAST_ADAPTIVE,f.debugEnabled()&&f.debug("use adjustController type "+u),s=p[u].create(o,c),{calcBufferGoal:function(e){return s.calcBufferGoal(e)},destroy:function(){s.destroy(),s=null}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(11),n(26),n(68),n(72)],void 0===(i=function(e,t,n,r,i){return{create:function(r){var o,a=e.create("DefaultAdjustController"),s={real:0,base:0,min:0,max:0},u=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case n.PAUSED:case n.BUFFERING:case n.PLAYING:}}},{type:i.BUFFER_TWEAKS_CREATED,listener:function(e){o=e.data.tweaks.buffer,s.base||(s.base=o.target)}}];return a.debugEnabled()&&a.debug("init"),t.add({target:r,listeners:u}),{destroy:function(){t.remove({target:r,listeners:u})},calcBufferGoal:function(){return s}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(11),n(26),n(77),n(72)],void 0===(i=function(e,t,n,r,i){return{create:function(o,a){var s,u=e.create("AdaptiveAdjustController"),c={real:0,base:0,min:0,max:0},l=0,d=0,f=0,p=0,E=0,v=1e3,h=0,g=0,m=0,b=0,y=8,S=.998,T=0,_=0,A={fastadaptive:{minClamp:.3,range:.4},balancedadaptive:{minClamp:.5,range:.7}},O=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case n.PAUSED:l=0,d=0,f=0,p=0,E=0,v=1e3,h=0,g=0,m=0,b=0;case n.BUFFERING:case n.PLAYING:}}},{type:i.BUFFER_TWEAKS_CREATED,listener:function(e){s=e.data.tweaks.buffer,c.base||(c.base=s.start),c.min=Math.max(s.min+.1+.125*(s.min-.2),T),c.max=c.min+_}}];return u.debugEnabled()&&u.debug("init"),t.add({target:o,listeners:O}),Object.prototype.hasOwnProperty.call(A,a)||(a=r.FAST_ADAPTIVE,u.debugEnabled()&&u.debug("use default mode fast")),T=A[a].minClamp,_=A[a].range,u.debugEnabled()&&u.debug("use mode "+a),{destroy:function(){t.remove({target:o,listeners:O})},calcBufferGoal:function(e){if(f=e.stats.buffer.end,p=window.performance.now(),b<y)c.base=c.min,b++;else{l&&d&&(E=E*S+(1e3*(f-l)-(p-d)),v=Math.min(v,E)*S,h=Math.max(h,E)*S,g=(h-v)/2,m=Math.max(Math.abs(v),Math.abs(g))),d=p,l=f;var t=s.min+Math.abs(2*m)/1e3;t=Math.min(c.max,t),t=Math.max(c.min,t),t=Math.round(100*t)/100,c.base=t}return c}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(21),n(77),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l){return{create:function(d,f){var p,E,v,h,g,m,b,y,S,T=e.create("LatencyControllerAdapter"),_={wssdefaultconservative:i,wsstridentconservative:o,wsschromiumprogressive:a,wssfirefoxprogressive:s,wsswebkitprogressive:u,hlsconservative:c,hlsautoconservative:l},A={CONSERVATIVE:{DEFAULT:"wssdefaultconservative",TRIDENT:"wsstridentconservative",HLS:"hlsconservative",HLS_AUTO:"hlsautoconservative"},PROGRESSIVE:{CHROMIUM:"wsschromiumprogressive",FIREFOX:"wssfirefoxprogressive",WEBKIT:"wsswebkitprogressive"}};return T.debugEnabled()&&T.debug("init"),g=t.mustUseHLS||f.playback.allowSafariHlsFallback&&t.canUseHLS,m=!f.tweaks||!f.tweaks.buffer||0===Object.keys(f.tweaks.buffer).length,h=f.playback.latencyControlMode,b=t.isTridentBrowser,y=t.isWebkitBrowser,S=t.isFirefox,v=r.create(d),E=A.CONSERVATIVE.DEFAULT,g&&m?E=A.CONSERVATIVE.HLS_AUTO:g&&!m?E=A.CONSERVATIVE.HLS:b?E=A.CONSERVATIVE.TRIDENT:h!==n.FAST_ADAPTIVE&&h!==n.BALANCED_ADAPTIVE||!y?h!==n.FAST_ADAPTIVE&&h!==n.BALANCED_ADAPTIVE||!S?h!==n.FAST_ADAPTIVE&&h!==n.BALANCED_ADAPTIVE||(E=A.PROGRESSIVE.CHROMIUM):E=A.PROGRESSIVE.FIREFOX:E=A.PROGRESSIVE.WEBKIT,T.debugEnabled()&&T.debug("use latencyController type "+E),p=_[E].create(d,v),{checkLatency:destroy:}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(21),n(26),n(11),n(72),n(73)],void 0===(i=function(e,t,n,r,i,o){return{create:function(a){function s(){for(;c.length;)c.shift();l=0}var u=e.create("AdjustLatencyHandler"),c=[],l=0,d=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case n.PLAYING:break;case n.PAUSED:s()}}},{type:i.RANDOM_ACCESS_POINT,listener:function(e){for(c.push(e.data.onRandomAccessPoint.streamTime/1e3+l/1e3);c.length>10;)c.shift()}},{type:i.TIME_OFFSET,listener:function(e){l=e.data.offset}}];return u.debugEnabled()&&u.debug("init"),s(),r.add({target:a,listeners:d}),{setSeek:function(e,n){u.debugEnabled()&&u.debug("should seeking to "+n),t.isTridentBrowser&&(n=function(e,t){for(var n=0;n<c.length;++n)if(c[n]>e&&c[n]<=t)return c[n];return-1}(e,n),u.debugEnabled()&&u.debug("seeking to RAP "+n)),n>=0&&(u.debugEnabled()&&u.debug("seeking to "+n),a.emit(o.SEEK,{position:n}))},setRate:function(e,t){e!==t&&(u.debugEnabled()&&u.debug("set rate to "+t),a.emit(o.RATE,{rate:t}))},destroy:function(){s(),r.remove({target:a,listeners:d})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(26),n(11),n(72)],void 0===(i=function(e,t,n,r){return{create:function(i,o){function a(e){var t=0;return e&&p?(t=(window.performance.now()-p)/1e3,p=0):e||p||(p=window.performance.now()),t}function s(){v=0}var u,c,l,d,f,p,E=e.create("WSSDefaultConservativeLatencyController"),v=0,h=0,g=1,m=0,b=0,y=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:s()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){c=e.data.tweaks.buffer}}];return E.debugEnabled()&&E.debug("init"),s(),n.add({target:i,listeners:y}),{checkLatency:function(e,t){if(u=e.stats,g=e.playbackRate,m=e.currentTime,l=t.base,f=1,h=u.buffer.delay.avg,d=l+b,v=u.buffer.end>v+.1?u.buffer.end:v,c.max<h&&u.buffer.start<m)E.debug("max buffer reached, seeking to goal..."),o.setSeek(m,v-l);else if(c.limit<h)1.1!==g&&(E.debugEnabled()&&E.debug("avg over limit, set speed to 1.1"),f=1.1,a(),o.setRate(g,f));else if(d>=h&&1!==g){var n=a(!0);n&&E.debugEnabled()&&E.debug("normalize speed after "+n.toFixed(2)+" seconds",2),f=1,o.setRate(g,f)}return d},destroy:function(){n.remove({target:i,listeners:y}),o.destroy(),o=null}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(26),n(11),n(72)],void 0===(i=function(e,t,n,r){return{create:function(i,o){ar s,u,c,l,d=e.create("WSSTridentConservativeLatencyController"),f=0,p=0,E=0,v=0,h=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:a()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){u=e.data.tweaks.buffer}}];return d.debugEnabled()&&d.debug("init"),a(),n.add({target:i,listeners:h}),{checkLatency:function(e,t){return s=e.stats,E=e.currentTime,c=t.base,p=s.buffer.delay.avg,l=c+v,f=s.buffer.end>f+.1?s.buffer.end:f,u.max<p&&s.buffer.start<E?(d.debug("max buffer reached, seeking to goal..."),o.setSeek(E,f-c)):u.limit<p&&(d.debugEnabled()&&d.debug("seek to buffer goal"),o.setSeek(E,f-l)),l},destroy:function(){n.remove({target:i,listeners:h})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(26),n(11),n(72)],void 0===(i=function(e,t,n,r){return{create:function(i,o){function a(e){var t=0;return e&&v?(t=(window.performance.now()-v)/1e3,v=0):e||v||(v=window.performance.now()),t}function s(){return 1===b}function u(){g=0,clearTimeout(E),E=0}var c,l,d,f,p,E,v,h=e.create("WSSChromiumProgressiveLatencyController"),g=0,m=0,b=1,y=0,S=1e3,T=0,_=.1,A=1,O=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:u()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){l=e.data.tweaks.buffer}}];return h.debugEnabled()&&h.debug("init"),u(),n.add({target:i,listeners:O}),{checkLatency:function(e,t){if(c=e.stats,b=e.playbackRate,y=e.currentTime,d=t.base,p=1,m=c.buffer.delay.avg,T=Math.round(1e3*(+s()?c.buffer.delay.max-m:m-c.buffer.delay.min))/1e3,f=d+T,g=c.buffer.end>g+.1?c.buffer.end:g,l.max<m&&c.buffer.start<y)h.debug("max buffer reached, seeking to goal..."),o.setSeek(y,g-d);else if(l.limit<m)1.1!==b&&(h.debugEnabled()&&h.debug("avg over limit, set speed to 1.1"),p=1.1,a(),o.setRate(b,p));else if(s()&&f+.1<m||!s()&&f<m){if(!E){var n=S*(v?2+2*Math.random():.5+1.5*Math.random());h.debugEnabled()&&h.debug("avg over bufferGoalReal but under limit, make check in "+n+"ms"),E=setTimeout((function(){h.debugEnabled()&&h.debug("check timeout fired"),E=0,s()&&f+.1<m||!s()&&f<m?v||(a(),p=function(){var e=l.limit-f,t=Math.max(0,Math.min(e,c.buffer.delay.avg-f)),n=Math.round(t/e*100),r=A+Math.round(Math.sqrt(n/100)*_*100)/100;return h.debugEnabled()&&h.debug("avg at "+n+"% between target and limit",2),h.debugEnabled()&&h.debug("after check timeout still avg with "+n+"% over target, set speed to "+r+" with sqrt function",2),r}(),o.setRate(b,p)):h.debugEnabled()&&h.debug("after check timeout avg not over bufferGoalReal, do nothing",2)}),n)}}else if(f>=m&&1!==b){var r=a(!0);r&&h.debugEnabled()&&h.debug("normalize speed after "+r.toFixed(2)+" seconds",2),p=1,o.setRate(b,p)}return f},destroy:function(){n.remove({target:i,listeners:O}),o.destroy(),o=null}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(26),n(11),n(72)],void 0===(i=function(e,t,n,r){return{create:function(i,o){function a(e){var t=0;return e&&S?(t=(window.performance.now()-S)/1e3,S=0):e||S||(S=window.performance.now()),t}function s(){return 1===R}nction l(){d(),f(),_.debugEnabled()&&_.debug("set framedrop cooldown timeout with "+(j*L/1e3).toString()+" s"),w=setTimeout((function(){_.debugEnabled()&&_.debug("framedrop cooldown timeout reached, set handle to inactive"),d(),P=!1,f(),_.debugEnabled()&&_.debug("set framedrop cooldown factor timeout with "+(j*L/1e3).toString()+" s"),C=setTimeout((,j*L)}),j*L)}function d(){_.debugEnabled()&&_.debug("clear framedrop cooldown timeout and set to 0"),clearTimeout(w),w=0}r E,v,h,g,m,b,y,S,T,_=e.create("WSSFirefoxProgressiveLatencyController"),A=0,O=0,R=1,I=0,N=0,w=0,C=0,P=!1,D=!1,L=1,U=1e3,M=0,k=.1,F=1,x=.998,j=6e4,B=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:p()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){v=e.data.tweaks.buffer}},{type:r.FRAME_DROP,listener:function(e){var t=e.data.type;switch(_.debugEnabled()&&_.debug("framedrop event with type "+t),t){case"extreme":case"high":case"medium":D?_.debugEnabled()&&_.debug("frame drop handle blocked"):(_.debugEnabled()&&_.debug("frame drop handle unblocked, starting"),c(!0,"framedrop event with type "+t),P?(_.debugEnabled()&&_.debug("frame drop handle still activated, restart cooldown timeout"),l()):(_.debugEnabled()&&_.debug("set buffer goal to buffer goal max"),N=g,_.debugEnabled()&&_.debug("check framedrop cooldown factor timeout"),C?(_.debugEnabled()&&_.debug("framedrop cooldown factor timeout is running, clearing"),f(),L<=4?(_.debugEnabled()&&_.debug("framedrop cooldown factor lower or 4, multiply"),L*=2,_.debugEnabled()&&_.debug("new framedrop cooldown factor is "+L.toString())):_.debugEnabled()&&_.debug("framedrop cooldown factor still at max ("+L.toString()+"), do nothing")):_.debugEnabled()&&_.debug("framedrop cooldown factor timeout is not running, use current factor ("+L.toString()+")")))}}}];return _.debugEnabled()&&_.debug("init"),p(),n.add({target:i,listeners:B}),{checkLatency:function(e,t){if(E=e.stats,R=e.playbackRate,I=e.currentTime,h=t.base,g=t.max,b=1,O=E.buffer.delay.avg,M=Math.round(1e3*(u()?E.buffer.delay.max-O:O-E.buffer.delay.min))/1e3,D||P||(N*=x),m=Math.max(h,N)+M,A=E.buffer.end>A+.1?E.buffer.end:A,v.max<O&&E.buffer.start<I)D&&c(!1,"over buffer max"),_.debug("max buffer reached, seeking to goal..."),o.setSeek(I,A-h);else if(v.limit<O)D&&c(!1,"between buffer limit and max"),1.1!==R&&(_.debugEnabled()&&_.debug("avg over limit, set speed to 1.1"),b=1.1,a(),o.setRate(R,b));else if(s()&&m+.1<O||u()&&m<O){if(!y){var n=U*(S?2+2*Math.random():.5+1.5*Math.random());_.debugEnabled()&&_.debug("avg over bufferGoalReal but under limit, make check in "+n+"ms"),y=setTimeout((function(){_.debugEnabled()&&_.debug("check timeout fired"),y=0,s()&&m+.1<O||u()&&m<O?S||(a(),b=function(){var e=v.limit-m,t=Math.max(0,Math.min(e,E.buffer.delay.avg-m)),n=Math.round(t/e*100),r=F+Math.round(Math.sqrt(n/100)*k*100)/100;return _.debugEnabled()&&_.debug("avg at "+n+"% between target and limit"),_.debugEnabled()&&_.debug("after check timeout still avg with "+n+"% over target, set speed to "+r+" with sqrt function"),r}(),o.setRate(R,b)):_.debugEnabled()&&_.debug("after check timeout avg not over bufferGoalReal, do nothing")}),n)}}else!D&&m>=O&&u()?((T=a(!0))&&_.debugEnabled()&&_.debug("normalize speed after "+T.toFixed(2)+" seconds"),b=1,o.setRate(R,b)):D&&P&&m<=O+.1?((T=a(!0))&&_.debugEnabled()&&_.debug("normalize speed after "+T.toFixed(2)+" seconds"),_.debugEnabled()&&_.debug("normalize speed after reached bufferGoalReal again after frame drop"),D&&c(!1,"buffer target reached after framedrop"),b=1,o.setRate(R,b)):D&&!P&&(_.debugEnabled()&&_.debug("slow speed to reach bufferGoalReal after frame drop"),a(),b=.97,o.setRate(R,b),P=!0);return m},destroy:function(){n.remove({target:i,listeners:B}),o.destroy(),o=null}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(26),n(11),n(72)],void 0===(i=function(e,t,n,r){return{create:function(i,o){ c,l,d,f,p,E,v,h=e.create("WSSWebkitProgressiveLatencyController"),g=0,m=0,b=1,y=0,S=1e3,T=0,_=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case t.PLAYING:break;case t.PAUSED:u()}}},{type:r.BUFFER_TWEAKS_CREATED,listener:function(e){l=e.data.tweaks.buffer}}];return h.debugEnabled()&&h.debug("init"),u(),n.add({target:i,listeners:_}),{checkLatency:function(e,t){if(c=e.stats,b=e.playbackRate,y=e.currentTime,d=t.base,p=1,m=c.buffer.delay.avg,T=Math.round(1e3*(+s()?c.buffer.delay.max-m:m-c.buffer.delay.min))/1e3,f=d+T,g=c.buffer.end>g+.1?c.buffer.end:g,l.max<m&&c.buffer.start<y)h.debug("max buffer reached, seeking to goal..."),o.setSeek(y,g-d);else if(l.limit<m||l.limit<m+.25&&1.1===b)1.1!==b&&(h.debugEnabled()&&h.debug("avg over limit, set speed to 1.1"),p=1.1,a(),o.setRate(b,p));else if(s()&&f+.25<m||!s()&&f<m&&l.min+.05<m){if(!E){var n=S*(v?2+2*Math.random():.5+1.5*Math.random());h.debugEnabled()&&h.debug("avg over bufferGoalReal but under limit, make check in "+n+"ms"),E=setTimeout((,n)}}else if((f-.15>=m||l.min+.05>=m)&&1!==b){var r=a(!0);r&&h.debugEnabled()&&h.debug("normalize speed after "+r.toFixed(2)+" seconds",2),p=1,o.setRate(b,p)}return f},destroy:function(){n.remove({target:i,listeners:_})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(11),n(72)],void 0===(i=function(e,t,n){return{create:function(r,i){var o,a,s,u=e.create("HlsConservativeLatencyController"),c=1,l=[{type:n.BUFFER_TWEAKS_CREATED,listener:function(e){a=e.data.tweaks.buffer}}];return u.debugEnabled()&&u.debug("init"),t.add({target:r,listeners:l}),{checkLatency:function(e,t){return o=e.stats,c=e.playbackRate,s=t.base,a.limit<o.buffer.delay.avg?i.setRate(c,1.1):a.start<o.buffer.delay.avg&&o.buffer.delay.avg<=s?i.setRate(c,1):a.min>=o.buffer.delay.avg&&i.setRate(c,.9),s},destroy:function(){t.remove({target:r,listeners:l}),i.destroy(),i=null}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6)],void 0===(i=function(e){return{create:function(t,n){var r,i,o=e.create("HlsConservativeLatencyController"),a={max:8,min:.2,start:.5,target:1.2,limit:1.7},s=1;return o.debugEnabled()&&o.debug("init"),{checkLatency:function(e,t){return r=e.stats,s=e.playbackRate,i=t.base,r.currentTime>=3&&(r.buffer.update.avg>0&&r.buffer.update.avg+a.limit-.7<r.buffer.delay.avg?n.setRate(s,1.1):r.buffer.update.avg>0&&r.buffer.update.avg+a.min<r.buffer.delay.avg<=r.buffer.update.avg+i-.7?n.setRate(s,1):r.buffer.update.avg>=0&&r.buffer.update.avg>=r.buffer.delay.avg&&n.setRate(s,.9)),i},destroy:}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(3),n(11),n(42),n(32),n(34),n(33),n(35),n(13),n(90),n(91),n(92),n(95)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d){"use strict";return{create:function(t){var n,o,l=new e,f=[],p=[{from:c.CONNECTING,to:a.CONNECTING},{from:c.CONNECTED,to:a.CONNECTED},{from:c.RESUMING,to:a.RESUMING},{from:c.DESTROYED,to:a.DESTROYED},{from:c.RECONNECTING,to:a.RECONNECTING},{from:c.RECONNECTION_IMMINENT,to:a.RECONNECTION_IMMINENT},{from:c.RECONNECTION_CONFIG_INVALID,to:a.RECONNECTION_CONFIG_INVALID},{from:c.DISCONNECTED,to:a.DISCONNECTED},{from:c.INITIALIZATION_ERROR,to:a.INITIALIZATION_ERROR},{from:c.CONNECTION_ERROR,to:a.CONNECTION_ERROR},{from:c.ERROR,to:a.ERROR},{from:c.WARNING,to:a.WARNING},{from:c.STATE_CHANGE,to:a.STATE_CHANGE},{from:c.UPDATE_SOURCE_SUCCESS,to:a.UPDATE_SOURCE_SUCCESS},{from:c.UPDATE_SOURCE_FAIL,to:a.UPDATE_SOURCE_FAIL},{from:c.UPDATE_SOURCE_ABORT,to:a.UPDATE_SOURCE_ABORT},{from:c.META_DATA,to:a.META_DATA},{from:c.RANDOM_ACCESS_POINT,to:a.RANDOM_ACCESS_POINT},{from:c.SERVER_INFO,to:a.SERVER_INFO},{from:c.STREAM_INFO,to:a.STREAM_INFO},{from:c.STREAM_INFO_UPDATE,to:a.STREAM_INFO_UPDATE},{from:c.RAW_PACKET,to:a.RAW_PACKET},{from:c.STREAM_FRAGMENT,to:a.STREAM_FRAGMENT},{from:c.STREAM_STATUS,to:a.STREAM_STATUS},{from:c.STREAM_QUALITY,to:a.STREAM_QUALITY}],E=[{from:r.CONNECT,to:u.CONNECT},{from:r.DISCONNECT,to:u.DISCONNECT},{from:r.NETWORK_PLAY,to:u.PLAY},{from:r.PAUSE,to:u.PAUSE},{from:r.CONFIG,to:u.CONFIG},{from:r.NETWORK_UPDATE_SOURCE,to:u.UPDATE_SOURCE},{from:i.STATE_CHANGE,to:u.STATE_CHANGE},{from:i.UPDATE_SOURCE_SUCCESS,to:u.UPDATE_SOURCE_SUCCESS},{from:i.UPDATE_SOURCE_FAIL,to:u.UPDATE_SOURCE_FAIL},{from:i.UPDATE_SOURCE_ABORT,to:u.UPDATE_SOURCE_ABORT},{from:i.SWITCH_STREAM_SUCCESS,to:u.SWITCH_STREAM_SUCCESS},{from:i.SWITCH_STREAM_FAIL,to:u.SWITCH_STREAM_FAIL},{from:i.SWITCH_STREAM_ABORT,to:u.SWITCH_STREAM_ABORT}];return n=s.create(t,l,E),o=s.create(l,t,p),f.push(d.create(l)),{destroy:function(){for(n.destroy(),n=null,o.destroy(),o=null;f.length;)f.pop().destroy()}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(11),n(93),n(94)],void 0===(i=function(e,t,n){"use strict";return{create:function(r){function i(){for(;o.length;)o.pop();a=0}var o=[],a=0,s=[{type:n.MESSAGE,listener:function(e){if(e){var n=e.data;if("string"==typeof n){var s=JSON.parse(n);if(s&&s.eventType){var u=s.eventType.substr(2,s.eventType.length-2),c=t.BASE+u[0].toLowerCase()+u.slice(1);-1!==c.indexOf(t.STREAM_INFO)&&i(),-1!==c.indexOf(t.SERVER_INFO)&&void 0===s.onServerInfo.hostname&&(s.onServerInfo.hostname=""),r.emit(c,s)}}else if(n instanceof ArrayBuffer&&n.byteLength>0){var l=new Uint8Array(n);if(r.emit(t.RAW_PACKET),n.byteLength>=8&&109===l[4]&&111===l[5]&&111===l[6]&&(102===l[7]||118===l[7])){for(var d=new Uint8Array(a),f=0,p=0;p<o.length;p++)d.set(o[p],f),f+=o[p].length;i(),r.emit(t.STREAM_FRAGMENT,d)}o.push(l),a+=n.byteLength}}}}];return e.add({target:r,listeners:s}),{destroy:function(){e.remove({target:r,listeners:s})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){var e="message.";return{BASE:e,META_DATA:e+"metaData",SERVER_INFO:e+"serverInfo",STREAM_INFO:e+"streamInfo",STREAM_INFO_UPDATE:e+"streamInfoUpdate",STREAM_FRAGMENT:e+"streamFragment",RANDOM_ACCESS_POINT:e+"randomAccessPoint",RAW_PACKET:e+"raw",STREAM_STATUS:e+"streamStatus",UPDATE_SOURCE_SUCCESS:e+"updateSourceSuccess",UPDATE_SOURCE_ERROR:e+"updateSourceError",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",STREAM_QUALITY:e+"streamQuality"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(21),n(16),n(11),n(27),n(26),n(30),n(90),n(91),n(94),n(96)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l){var d=e.create("WebSocketHandler");return{create:function(e){ion E(){d.debugEnabled()&&d.debug("drop active connection?"),y.length>1&&(d.debugEnabled()&&d.debug("drop active connection!"),y.shift().destroy())}ar h,g=[{type:s.CONNECT,listener:n},{type:s.DISCONNECT,listener:function(){if(d.debugEnabled()&&d.debug("on disconnect"),1!==y.length||!a().isWaitForReconnect())for(d.debugEnabled()&&d.debug("not waiting for reconnect");y.length;)y.pop().destroy()}},{type:s.PLAY,listener:function(){d.debugEnabled()&&d.debug("on play"),1===y.length&&y[0].play()}},{type:s.PAUSE,listener:function(){d.debugEnabled()&&d.debug("on pause"),1===y.length&&y[0].pause()}},{type:s.UPDATE_SOURCE,listener:function(t){if(d.debugEnabled()&&d.debug("on update source"),0===y.length)t.data.update.options.method="client",n(t);else{for(;y.length>1;){var r=f().getConnectData().update.options;e.emit(c.UPDATE_SOURCE_ABORT,{reason:"superseded",tag:r.tag,count:r.count}),v()}var i=y[0].getConnectData(),o=y[0].getServerInfo(),a=i.config.server.websocket!==t.data.config.server.websocket,s=!o,u=!s&&-1===o.capabilities.indexOf("onUpdateSource"),l="client"===t.data.update.options.method;a||s||u||l?(t.data.update.options.method="client",n(t)):(t.data.update.options.method="server",y[0].updateSource(t))}}},{type:s.STATE_CHANGE,listener:function(e){e.data.state===o.PAUSING&&h!==o.RECONNECTION_IMMINENT&&y.length&&a().reset(),h=e.data.state}},{type:s.CONFIG,listener:function(n){(t.mustUseHLS||n.data.config.playback.allowSafariHlsFallback&&t.canUseHLS)&&(b=b.filter(()),r.add({target:e,listeners:b})}},{type:s.UPDATE_SOURCE_SUCCESS,listener:function(){d.debugEnabled()&&d.debug("onExternalUpdateSourceSuccess"),y.length>1&&(E(),f().setActive(!0))}},{type:s.UPDATE_SOURCE_FAIL,listener:function(){d.debugEnabled()&&d.debug("onExternalUpdateSourceFail"),v()}},{type:s.SWITCH_STREAM_SUCCESS,listener:function(){d.debugEnabled()&&d.debug("onExternalSwitchStreamSuccess"),y.length>1&&(E(),f().setActive(!0))}},{type:s.SWITCH_STREAM_FAIL,listener:function(){d.debugEnabled()&&d.debug("onExternalSwitchStreamFail"),v()}}],m=[{type:c.CONNECTING,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.CONNECTED,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.DISCONNECTED,listener:function(t){d.debugEnabled()&&d.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(p()||t.active)&&i(t),v()}},{type:c.RESUMING,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.MESSAGE,listener:function(e){d.detailEnabled()&&d.detail("fired "+e.name),e.active&&i(e)}},{type:c.RECONNECTION_IMMINENT,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.RECONNECTING,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.RECONNECTION_CONFIG_INVALID,listener:function(t){d.debugEnabled()&&d.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),t.active&&i(t)}},{type:c.CONNECTION_ERROR,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),(p()||e.active)&&i(e),v()}},{type:c.INITIALIZATION_ERROR,listener:function(t){d.debugEnabled()&&d.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(p()||t.active)&&i(t),v()}},{type:c.DESTROYED,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.ERROR,listener:function(t){d.debugEnabled()&&d.debug("fired "+t.name),t.update&&e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.update.update.options.tag,count:t.update.update.options.count,code:t.data.code,message:t.data.message,type:t.update.update.type,id:t.update.update.id}),(p()||t.active)&&i(t),v()}},{type:c.STATE_CHANGE,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}}],b=[{type:c.SERVER_INFO,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.STREAM_INFO,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.STREAM_INFO_UPDATE,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.STREAM_FRAGMENT,listener:function(e){e.active&&i(e)}},{type:c.RANDOM_ACCESS_POINT,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.RAW_PACKET,listener:,{type:c.STREAM_STATUS,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&!e.update&&i(e)}},{type:c.STREAM_QUALITY,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}},{type:c.UPDATE_SOURCE_SUCCESS,listener:function(t){d.debugEnabled()&&d.debug("fired "+t.name),t.active||(E(),t.active=!0,f().setActive(!0)),d.debugEnabled()&&d.debug("trigger update source success"),e.emit(u.UPDATE_SOURCE_SUCCESS,{tag:t.data.tag,count:t.data.count,type:t.data.type,id:t.data.id})}},{type:c.UPDATE_SOURCE_ERROR,listener:function(t){d.debugEnabled()&&d.debug("fired "+t.name),d.debugEnabled()&&d.debug("trigger update source fail"),e.emit(u.UPDATE_SOURCE_FAIL,{tag:t.data.tag,count:t.data.count,code:t.data.code,message:t.data.message,type:t.data.type,id:t.data.id}),p()&&(d.debugEnabled()&&d.debug("trigger disconnected"),e.emit(u.DISCONNECTED,{code:t.data.code,message:t.data.message})),v()}},{type:c.UPDATE_SOURCE_ABORT,listener:function(t){d.debugEnabled()&&d.debug("fired "+t.name),d.debugEnabled()&&d.debug("trigger update source abort"),e.emit(u.UPDATE_SOURCE_ABORT,{tag:t.data.tag,count:t.data.count,reason:t.data.reason,type:t.data.type,id:t.data.id})}},{type:c.META_DATA,listener:function(e){d.debugEnabled()&&d.debug("fired "+e.name),e.active&&i(e)}}],y=[];return r.add({target:e,listeners:g}),r.add({target:e,listeners:m}),{destroy:function(){for(var t in d.debugEnabled()&&d.debug("destroy"),y)Object.prototype.hasOwnProperty.call(y,t)&&(y[t].destroy(),delete y[t]);r.remove({target:e,listeners:g}),r.remove({target:e,listeners:m}),r.remove({target:e,listeners:b})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(3),n(6),n(21),n(16),n(11),n(27),n(20),n(29),n(97),n(94),n(93),n(98),n(92),n(99),n(100),n(101)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p,E,v){var h=5e3,g=5e3,m=3e4;return{create:function(b){unction S(){return W}unction _(){return!!V&&V}unction O(){K.debugEnabled()&&K.debug("connection open"),setTimeout((function(){ee||null===$||(clearTimeout(X),b.emit(c.CONNECTED,F({count:te.retryCount})),te.retryCount=0)}),200)}M(e,t){if(K.debugEnabled()&&K.debug("send "+e),t)try{t=JSON.stringify(t)}catch(e){t="{}"}else t="{}";var n=re.requestId+1;(re={}).eventType=e,re[e]=JSON.parse(t),re.requestId=n;var r=JSON.stringify(re);try{y()===o.OPEN&&$.send(r)}catch(e){}} j,B,G,H,W,V,Y,K=t.create("WebSocketProxy "+(new Date).getTime()),z=new e,q=[4102,4103,4105,4106,4107,4108,4109,4111,4115,4500,4503],Q=[{type:l.META_DATA,listener:function(e){x(e)}},{type:l.SERVER_INFO,listener:,{type:l.STREAM_INFO,listener:function(e){if(_()&&-1===Y.events.indexOf("onUpdateSourceSuccess")){var t=V.update.options.tag,n=V.update.options.count;b.emit(c.UPDATE_SOURCE_SUCCESS,F({tag:t,count:n,type:V.update.type,id:V.update.id})),ie[n]?(W=r.copy(ie[n]),V===ie[n]&&(V=void 0),delete ie[n]):(W=V,V=void 0)}x(e)}},{type:l.STREAM_INFO_UPDATE,listener:function(e){x(e)}},{type:l.STREAM_FRAGMENT,listener:function(e){x(e,!0)}},{type:l.RANDOM_ACCESS_POINT,listener:function(e){x(e)}},{type:l.RAW_PACKET,listener:,{type:l.STREAM_STATUS,listener:function(e){_()&&"client"===V.update.options.method&&"stopped"===e.data.onStreamStatus.status&&b.emit(c.UPDATE_SOURCE_ERROR,F({tag:V.update.options.tag,count:V.update.options.count,code:a.NETWORK.SOURCE_STREAM_STOPPED,message:s.NETWORK.SOURCE_STREAM_STOPPED,type:V.update.type,id:V.update.id})),x(e)}},{type:l.STREAM_QUALITY,listener:function(e){x(e)}},{type:l.UPDATE_SOURCE_SUCCESS,listener:function(e){if(_()&&re.requestId>=e.data.onUpdateSourceSuccess.requestId||H&&-1!==e.data[e.data.eventType].tag.indexOf(H.update.id)){H&&-1!==e.data[e.data.eventType].tag.indexOf(H.update.id)&&(V=H,H=null);var t=e.data[e.data.eventType].tag,n=e.data[e.data.eventType].count,i=ie[n]?ie[n].update.type:V.update.type,o=ie[n]?ie[n].update.id:V.update.id;0===n&&(t=V.update.options.tag,n=V.update.options.count),b.emit(c.UPDATE_SOURCE_SUCCESS,F({tag:t,count:n,type:i,id:o})),ie[n]?(W=r.copy(ie[n]),V===ie[n]&&(V=void 0),delete ie[n]):(W=V,V=void 0)}}},{type:l.UPDATE_SOURCE_ERROR,listener:function(e){if(_()&&re.requestId>=e.data.onUpdateSourceError.requestId){var t=e.data.onUpdateSourceError.code,n="Unknown reason.";Object.prototype.hasOwnProperty.call(u,+t)&&(n=u[+t]),t>1e3&&t<4e3&&(t+=3100);var r=e.data[e.data.eventType].tag,i=e.data[e.data.eventType].count,o=ie[i]?ie[i].update.type:V.update.type,a=ie[i]?ie[i].update.id:V.update.id;0===i&&(r=V.update.options.tag,i=V.update.options.count),b.emit(c.UPDATE_SOURCE_ERROR,F({tag:r,count:i,code:t,message:n,type:o,id:a})),V===ie[i]&&(V=void 0),delete ie[i]}}},{type:l.UPDATE_SOURCE_ABORT,listener:function(e){if(_()&&re.requestId>=e.data.onUpdateSourceAbort.requestId){var t=e.data[e.data.eventType].tag,n=e.data[e.data.eventType].count,r=ie[n]?ie[n].update.type:V.update.type,i=ie[n]?ie[n].update.id:V.update.id;0===n&&(t=V.update.options.tag,n=V.update.options.count);var o=e.data[e.data.eventType].reason;b.emit(c.UPDATE_SOURCE_ABORT,F({tag:t,count:n,reason:o,type:r,id:i})),V===ie[n]&&(V=void 0),delete ie[n]}}}],$=null,J=o.UNINITIALIZED,X=0,Z=!1,ee=!1,te={minDelay:2,maxDelay:10,delaySteps:10,maxRetries:10,delays:[],retryCount:0,randomFactor:1.5},ne=[],re={requestId:0},ie={};return K.debugEnabled()&&K.debug("init"),ne.push(f.create(z)),i.add({target:z,listeners:Q}),{connect:function(e){if(K.debugEnabled()&&K.debug("on connect"),ee=!1,clearTimeout(j),(W=e.data).count=te.retryCount,W.reconnect){var t=p.validate(W.reconnect);if(t.success)for(var n in W.reconnect)Object.prototype.hasOwnProperty.call(W.reconnect,n)&&(te[n]=W.reconnect[n]);else b.emit(c.RECONNECTION_CONFIG_INVALID,F({reason:t.reason}))}if(W.timeouts){var r=1e3*W.timeouts.connecting;h=Math.max(Math.min(r,m),g)}try{V=e.data.update?e.data:void 0,D(W.url),b.emit(e.name?c.CONNECTING:c.RECONNECTING,F(W)),_()&&(clearTimeout(G),G=setTimeout(C,1e3*e.data.update.options.timeout))}catch(e){var i="Connection initialization error.",o=e?k(e):void 0;o&&o.message&&(i=o.message),o&&o.code&&(i+=" (code:"+o.code+")"),o&&o.name&&(i=o.name+": "+i),b.emit(c.INITIALIZATION_ERROR,F({code:a.NETWORK.COULD_NOT_ESTABLISH_CONNECTION,message:i}))}},disconnect:play:function(){K.debugEnabled()&&K.debug("on play");try{W=v.create(W,!1),null===$?D(W.url):(K.debugEnabled()&&K.debug("sending play to server"),M("onPlay"),b.emit(c.RESUMING,F()))}catch(e){b.emit(c.ERROR,F(k(e)))}},pause:function(){K.debugEnabled()&&K.debug("on pause");try{null!==$&&(K.debugEnabled()&&K.debug("sending pause to server"),W=v.create(W,!0),M("onPause"))}catch(e){b.emit(c.ERROR,F(k(e)))}},updateSource:function(e){if(K.debugEnabled()&&K.debug("on update source"),Y&&-1!==Y.capabilities.indexOf("onUpdateSource")&&"server"===e.data.update.options.method&&null!==$){clearTimeout(G),G=setTimeout(C,1e3*e.data.update.options.timeout),ie[e.data.update.options.count]=e.data,(V=e.data).count=te.retryCount;var t=V.update,n={options:{fastStart:t.options.fastStart,incTiming:t.options.incTiming},tag:t.options.tag,count:t.options.count};if(t.entry.h5live.rtmp&&t.entry.h5live.rtmp.url&&t.entry.h5live.rtmp.streamname&&(n.rtmp={url:t.entry.h5live.rtmp.url,stream:t.entry.h5live.rtmp.streamname}),t.entry.h5live.params&&(n.params=t.entry.h5live.params),t.entry.h5live.security&&"object"==typeof t.entry.h5live.security)for(var r in n.security={},t.entry.h5live.security)Object.prototype.hasOwnProperty.call(t.entry.h5live.security,r)&&(n.security[r]=t.entry.h5live.security[r]);M("onUpdateSource",n)}},reset:getState:y,getConnectData:S,getServerInfo:function(){return Y},getWebSocket:function(){return $},setActive:isActive:T,isUpdate:_,isWaitForReconnect:function(){return ee},getConnectionId:A,isConnectionId:shouldPauseOnError:function(){return S().update&&S().update.options.pauseOnError||V&&V.update.options.pauseOnError},destroy:function(){for(K.debugEnabled()&&K.debug("destroy");ne.length;)ne.pop().destroy();U(),i.remove({target:z,listeners:Q})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return{validate:function(e){for(var t=["minDelay","maxDelay","delaySteps","maxRetries"],n=0;n<t.length;++n){if(!Object.prototype.hasOwnProperty.call(e,t[n]))return{success:!1,reason:"The reconnect config is invalid, it must contain 'minDelay', 'maxDelay', 'delaySteps', and 'maxRetries'. Reset to default."};if("number"!=typeof e[t[n]])return{success:!1,reason:"The reconnect config is invalid, the value '"+t[n]+"' have to be a number. Reset to default."}}return e[t[0]]>e[t[1]]?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be lower then '"+t[1]+"'. Reset to default."}:e[t[0]]<1?{success:!1,reason:"The reconnect config is invalid, the value '"+t[0]+"' have to be greater or equal then 1 sec. Reset to default."}:{success:!0}}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return{calculate:function(e,t,n,r,i){var o=[],a=Math.sqrt(e);n>r&&(n=r);for(var s=(Math.sqrt(t)-a)/(n-1),u=0;u<r;u+=1){var c=i*(Math.random()-.5),l=a+s*Math.min(n-1,u)+(!u&&a-Math.abs(c)<=.5?Math.abs(c)+i*Math.random():c),d=Math.round(l*l*1e3);o.push(d)}return o}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return{create:function(e,t){var n=e.url.split("&flags=");if(n.length>1&&(n[1]=decodeURIComponent(n[1])),t)n.length>1&&-1===n[1].indexOf("paused")?e.url=n[0]+"&flags="+encodeURIComponent("paused,"+n[1]):1===n.length&&(e.url+="&flags=paused");else if(n.length>1&&-1!==n[1].indexOf("paused")){var r=n[1].split(",");if(1===r.length)e.url=e.url.replace("&flags=paused","");else{e.url=n[0]+"&flags=";for(var i=0;i<r.length;i+=1)"paused"!==r[i]&&(e.url+=encodeURIComponent(r[i]),e.url+=encodeURIComponent(r.length>2&&i<r.length-1?",":""))}}return e}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(21),n(3),n(5),n(11),n(13),n(52),n(32),n(34),n(33),n(35),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(117),n(122),n(123),n(124),n(125),n(126),n(127),n(128),n(129),n(130),n(136)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p,E,v,h,g,m,b,y,S,T,_,A,O,R,I,N,w,C,P,D,L,U){"use strict";return{create:function(r){var M,k,F=new n,x=e.create("MediaManager"),j=[],B=[{type:p.VIDEO_SOURCE,listener:function(e){x.debugEnabled()&&x.debug("creating media handlers"),e.data.type===a.MP4?(j.push(R.create(F)),j.push(w.create(F)),j.push(D.create(F)),t.isTridentBrowser&&j.push(C.create(F))):j.push(I.create(F)),i.remove({target:F,listeners:B})}},{type:v.CONFIG,listener:function(e){!t.isMediaSourceH264Supported||e.data.config.playback.allowSafariHlsFallback&&t.canUseHLS||j.push(A.create(F))}}],G=[{from:y.LOAD_START,to:c.LOAD_START},{from:y.PROGRESS,to:c.PROGRESS},{from:y.SUSPEND,to:c.SUSPEND},{from:y.ABORT,to:c.ABORT},{from:y.EMPTIED,to:c.EMPTIED},{from:y.STALLED,to:c.STALLED},{from:y.PLAY,to:c.PLAY},{from:y.PAUSE,to:c.PAUSE},{from:y.LOADED_META_DATA,to:c.LOADED_META_DATA},{from:y.LOADED_DATA,to:c.LOADED_DATA},{from:y.WAITING,to:c.WAITING},{from:y.PLAYING,to:c.PLAYING},{from:y.CAN_PLAY,to:c.CAN_PLAY},{from:y.CAN_PLAY_THROUGH,to:c.CAN_PLAY_THROUGH},{from:y.SEEKING,to:c.SEEKING},{from:y.SEEKED,to:c.SEEKED},{from:y.TIME_UPDATE,to:c.TIME_UPDATE},{from:y.ENDED,to:c.ENDED},{from:y.RATE_CHANGE,to:c.RATE_CHANGE},{from:y.DURATION_CHANGE,to:c.DURATION_CHANGE},{from:y.VOLUME_CHANGE,to:c.VOLUME_CHANGE},{from:y.ELEMENT_CREATED,to:c.ELEMENT_CREATED},{from:y.PLAY_START_SUCCESS,to:c.PLAY_START_SUCCESS},{from:y.PLAY_START_ERROR,to:c.PLAY_START_ERROR},{from:y.VIEWPORT_VISIBLE,to:c.VIEWPORT_VISIBLE},{from:y.VIEWPORT_HIDDEN,to:c.VIEWPORT_HIDDEN},{from:y.UPDATE_SOURCE_ABORT,to:c.UPDATE_SOURCE_ABORT},{from:y.UPDATE_SOURCE_FAIL,to:c.UPDATE_SOURCE_FAIL},{from:y.UPDATE_SOURCE_TIMEOUT,to:c.UPDATE_SOURCE_TIMEOUT},{from:y.ACTIVE_VIDEO_ELEMENT_CHANGE,to:c.ACTIVE_VIDEO_ELEMENT_CHANGE},{from:S.ERROR,to:c.MEDIA_ERROR},{from:S.RECOVER,to:c.MEDIA_ERROR_RECOVER},{from:f.SUSPENDED,to:c.PLAYBACK_SUSPENDED},{from:h.QUALITY_STATS,to:c.QUALITY_STATS},{from:h.FRAME_DROP,to:c.FRAME_DROP},{from:g.PLAY_STATS,to:c.PLAY_STATS},{from:g.MEDIA_ERROR_RECOVER_STATS,to:c.MEDIA_ERROR_RECOVER_STATS},{from:E.SOURCE_ENDED,to:c.PLAYBACK_FINISHED},{from:d.PLAYBACK_STARTED,to:c.PLAYBACK_STARTED},{from:d.BUFFERING,to:c.BUFFERING},{from:m.BUFFER_TWEAKS_CREATED,to:c.BUFFER_TWEAKS_CREATED},{from:m.BUFFER_TWEAKS_ERROR,to:c.BUFFER_TWEAKS_ERROR},{from:b.TIME_OFFSET,to:c.TIME_OFFSET}],H=[{from:s.CREATE_VIDEO,to:p.CREATE_VIDEO},{from:s.DESTROY_VIDEO,to:p.DESTROY_VIDEO},{from:s.VIDEO_SOURCE,to:p.VIDEO_SOURCE},{from:s.PLAY,to:p.PLAY},{from:s.PAUSE,to:p.PAUSE},{from:s.SEEK,to:p.SEEK},{from:s.MUTE,to:p.MUTE},{from:s.UNMUTE,to:p.UNMUTE},{from:s.SET_VOLUME,to:p.SET_VOLUME},{from:s.SET_RATE,to:p.SET_RATE},{from:s.UPDATE_SOURCE,to:p.UPDATE_SOURCE},{from:s.CONFIG,to:v.CONFIG},{from:l.SERVER_INFO,to:v.SERVER_INFO},{from:l.STREAM_FRAGMENT,to:v.STREAM_FRAGMENT},{from:l.RANDOM_ACCESS_POINT,to:v.RANDOM_ACCESS_POINT},{from:u.STATE_CHANGE,to:v.APPLICATION_STATE_CHANGE},{from:u.STARTUP_STATS,to:v.STARTUP_STATS},{from:u.DOCUMENT_VISIBLE,to:v.DOCUMENT_VISIBLE},{from:u.DOCUMENT_HIDDEN,to:v.DOCUMENT_HIDDEN},{from:u.STREAM_INFO,to:v.STREAM_INFO},{from:u.STREAM_INFO_UPDATE,to:v.STREAM_INFO_UPDATE},{from:u.SWITCH_STREAM_INIT,to:v.SWITCH_STREAM_INIT},{from:u.SWITCH_STREAM_SUCCESS,to:v.SWITCH_STREAM_SUCCESS},{from:u.SWITCH_STREAM_ABORT,to:v.SWITCH_STREAM_ABORT},{from:u.SWITCH_STREAM_FAIL,to:v.SWITCH_STREAM_FAIL},{from:u.UPDATE_SOURCE_INIT,to:v.UPDATE_SOURCE_INIT},{from:u.UPDATE_SOURCE_SUCCESS,to:v.UPDATE_SOURCE_SUCCESS}];return i.add({target:F,listeners:B}),M=o.create(r,F,H),k=o.create(F,r,G),j.push(T.create(F)),j.push(_.create(F)),j.push(L.create(F)),j.push(U.create(F)),j.push(N.create(F)),j.push(P.create(F)),t.useFakeAudio&&j.push(O.create(F)),{destroy:function(){for(;j.length;)j.pop().destroy();M.destroy(),M=null,k.destroy(),k=null}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){var e="mediaControl.";return{BASE:e,PLAYBACK_STARTED:e+"playbackStarted",BUFFERING:e+"buffering"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="mediaHandler.";return{BASE:e,ERROR:e+"error",SUSPENDED:e+"suspended"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="qualityHandler.";return{BASE:e,QUALITY_STATS:e+"qualitystats",FRAME_DROP:e+"framedrop"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="statsCollector.";return{BASE:e,PLAY_STATS:e+"playStats",MEDIA_ERROR_RECOVER_STATS:e+"mediaErrorRecoverStats"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="mediaControl.";return{BASE:e,BUFFER_TWEAKS_CREATED:e+"tweaksCreated",BUFFER_TWEAKS_ERROR:e+"tweaksError"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="sourceBufferQueue.";return{BASE:e,TIME_OFFSET:e+"timeOffset",FIRST_FRAGMENT:e+"firstFragment"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="mediaElementHandler.";return{BASE:e,VIDEO_SOURCE:e+"videoSource",LOAD_START:e+"loadstart",PROGRESS:e+"progress",SUSPEND:e+"suspend",ABORT:e+"abort",EMPTIED:e+"emptied",STALLED:e+"stalled",PLAY:e+"play",PAUSE:e+"pause",LOADED_META_DATA:e+"loadedmetadata",LOADED_DATA:e+"loadeddata",WAITING:e+"waiting",ERROR:e+"error",PLAYING:e+"playing",CAN_PLAY:e+"canplay",CAN_PLAY_THROUGH:e+"canplaythrough",SEEKING:e+"seeking",SEEKED:e+"seeked",TIME_UPDATE:e+"timeupdate",ENDED:e+"ended",RATE_CHANGE:e+"ratechange",DURATION_CHANGE:e+"durationchange",VOLUME_CHANGE:e+"volumechange",QUALITY_UPDATE:e+"qualityupdate",ELEMENT_CREATED:e+"elementCreated",PLAY_START_SUCCESS:e+"playStartSuccess",PLAY_START_ERROR:e+"playStartError",VIEWPORT_VISIBLE:e+"viewportvisible",VIEWPORT_HIDDEN:e+"viewporthidden",UPDATE_SOURCE_ABORT:e+"updateSourceAbort",UPDATE_SOURCE_FAIL:e+"updateSourceFail",UPDATE_SOURCE_TIMEOUT:e+"updateSourceTimeout",MEDIA_ERROR_RECOVERED:e+"recovered",ACTIVE_VIDEO_ELEMENT_CHANGE:e+"activeVideoElementChange"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(21),n(52),n(77),n(11),n(103),n(110),n(105),n(112),n(106),n(107),n(109),n(113),n(26)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p){return{create:function(r){unction v(){A.debugEnabled()&&A.debug("remove control listeners"),i.remove({target:r,listeners:j})}unction g(){A.debugEnabled()&&A.debug("remove play state listeners"),i.remove({target:r,listeners:B})}T,_,A=e.create("BufferControl"),O={},R=!1,I=!0,N=!1,w=!1,C=-1,P=null,D=[],L=[],U=5,M=5,k=!0,F=[{type:l.APPLICATION_STATE_CHANGE,listener:function(e){switch(T=e.data.state){case p.PLAYING:P=null;break;case p.LOADING:break;case p.PAUSED:g();break;case p.PAUSING:g(),A.warnEnabled()&&A.warn("entering paused state"),C=-1,R=!1,k=!1,I=!0,w=!1}}},{type:l.STARTUP_STATS,listener:function(e){P=e.data.stats}},{type:s.VIDEO_SOURCE,listener:function(e){A.debugEnabled()&&A.debug("video source"),(N=e.data.type===n.HLS)&&(g(),h(),i.remove({target:r,listeners:x}),i.add({target:r,listeners:x}))}},{type:c.SOURCE_READY,listener:function(){h()}},{type:a.BUFFER_TWEAKS_CREATED,listener:function(e){A.debugEnabled()&&A.debug("buffer tweaks created"),!N&&T===p.PLAYING&&O.buffer.start<e.data.tweaks.buffer.start&&setTimeout((,10),O.buffer=e.data.tweaks.buffer}}],x=[{type:u.CAN_PLAY_THROUGH,listener:function(){T===p.LOADING&&(A.debugEnabled()&&A.debug("hls: canplaythrough while loading, wait for progress"),r.emit(s.PLAY,{external:!1}),w=!0)}},{type:u.PROGRESS,listener:function(){(T===p.BUFFERING||T===p.LOADING&&w)&&(A.debugEnabled()&&A.debug("hls: progress at buffering or after canplaythrough while loading, continue"),w=!1,I=!1,R=!0,r.emit(o.PLAYBACK_STARTED,P?{stats:P}:{}))}},{type:u.WAITING,listener:function(){T!==p.PLAYING||_||(A.debugEnabled()&&A.debug("hls: waiting while playing, now buffering"),k=!1,I=!0,r.emit(o.BUFFERING))}},{type:u.MEDIA_ERROR_RECOVERED,listener:function(){A.debugEnabled()&&A.debug("media error recovered"),_=!1}}],j=[{type:s.PLAY,listener:function(){N||-1!==C||setTimeout((,10)}}],B=[{type:d.PLAY_STATS,listener:function(e){if(e.data.buffered&&e.data.buffered.length){var n=e.data.stats,i=n.buffer.delay.current,a=i>O.buffer.start,u=N?i>0:i>O.buffer.min,c=n.buffer.end-n.buffer.start,l=e.data.currentTime,d=e.data.buffered,f=-1!==S(d,l);y(D,l,M),y(L,i,U);var p,h,g=b(D)&&b(L);if(!N&&!f&&!R&&c>.45)return p=d.length,h=Math.min(d.start(p-1)+.3,d.end(p-1)),A.warn("seek to range: "+d.start(p-1)+" < "+h+" > "+d.end(p-1)),void r.emit(s.SEEK,{position:t.isTridentBrowser?0:h});if(!N&&!R&&t.isFirefox&&d.length>1&&S(d,l)!==d.length-1&&d.end(p-1)-d.start(p-1)>.3)return p=d.length,h=d.start(p-1),A.warnEnabled()&&A.warn("seek to startable range start: "+d.start(p-1)),void r.emit(s.SEEK,{position:h});if(a&&-1===C&&f){if(C=l,!N&&t.isSafari&&C<.2)return C=.3,A.warnEnabled()&&A.warn("initial safari stream startTime set to "+C+", seeking"),void r.emit(s.SEEK,{position:C});A.debugEnabled()&&A.debug("stream startTime set to "+C)}I&&a&&(N?N&&w&&(A.debugEnabled()&&A.debug("hls: buffering and has enough to start, don't wait for progress"),w=!1):(A.debugEnabled()&&A.debug("starting stream"),v(),r.emit(s.PLAY,{external:!1}),E()),I=!1,R&&r.emit(o.PLAYBACK_STARTED,P?{stats:P}:{})),I||(!R&&-1!==C&&C<l-.1&&(R=!0,N&&w&&(A.debugEnabled()&&A.debug("hls: current time rising and started, don't wait for progress"),w=!1),r.emit(o.PLAYBACK_STARTED,P?{stats:P}:{})),l>O.buffer.start&&(!u||R&&g&&!_)&&(k?(k=!1,I=!0,N||(A.debugEnabled()&&A.debug("pausing to buffer"),r.emit(s.PAUSE)),r.emit(o.BUFFERING)):k=!0))}else A.debugEnabled()&&A.debug("no data in play stats")}}],G=[{type:f.RECOVER,listener:function(){A.debugEnabled()&&A.debug("media error recover"),_=!0}}];return i.add({target:r,listeners:F}),E(),m(),A.debugEnabled()&&A.debug("add media error listeners!"),i.add({target:r,listeners:G}),{destroy:function(){i.remove({target:r,listeners:F}),N&&i.remove({target:r,listeners:x}),v(),m()}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(16),n(21),n(68),n(11),n(77),n(103),n(110),n(108),n(107),n(109),n(116)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d){return{create:function(f){nction v(e){if(e.data.streamInfo.videoInfo&&e.data.streamInfo.haveVideo&&e.data.streamInfo.videoInfo.frameRate<=30&&n.isTridentBrowser&&!L){O=t.copy(A),h(Math.sqrt(30)-Math.sqrt(e.data.streamInfo.videoInfo.frameRate),1),O.start+=(O.target-O.start)/2,O.min+=(O.start-O.min)/2,g()}}r m,b,y,S=2,T=1.5,_=e.create("BufferTweaker"),A={max:8,min:.2,start:.5,target:1.2,limit:1.7},O=t.copy(A),R=t.copy(A),I=o.CLASSIC,N=0,w=0,C=0,P=-1,D=!1,L=!1,U=[{type:c.STREAM_INFO,listener:v},{type:c.STREAM_INFO_UPDATE,listener:function(e){v(e)}},{type:c.CONFIG,listener:function(e){var r;if((y=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS)||i.add({target:f,listeners:k}),e.data.config.playback.latencyControlMode)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&o[a]===e.data.config.playback.latencyControlMode&&(I=o[a]);e.data.config.tweaks&&(e.data.config.tweaks.buffer&&((r=d.validateBuffer(e.data.config.tweaks.buffer)).success?(O=t.copy(e.data.config.tweaks.buffer),R=t.copy(O),L=!0):f.emit(s.BUFFER_TWEAKS_ERROR,{reason:r.reason})),e.data.config.tweaks.bufferDynamic&&!y&&I===o.CLASSIC&&((r=d.validateDynamic(e.data.config.tweaks.bufferDynamic)).success?(N=e.data.config.tweaks.bufferDynamic.offsetThreshold,w=e.data.config.tweaks.bufferDynamic.offsetStep,C=e.data.config.tweaks.bufferDynamic.cooldownTime):f.emit(s.BUFFER_TWEAKS_ERROR,{reason:r.reason}))),g()}},{type:u.FRAME_DROP,listener:function(e){if(_.debugEnabled()&&_.debug("frame drop with type "+e.data.type),n.isFirefox&&I===o.CLASSIC)switch(_.debugEnabled()&&_.debug("frame drop on firefox in classic mode with type "+e.data.type),e.data.type){case"extreme":case"high":case"medium":_.debugEnabled()&&_.debug("frame drop"),_.debugEnabled()&&_.debug(""+JSON.stringify(e)),_.debugEnabled()&&_.debug("current buffer: "+JSON.stringify(O)),_.debugEnabled()&&_.debug("limit: "+R.limit+", start: "+O.start),O.start<R.limit?(_.debugEnabled()&&_.debug("start lower then limit -> tweaking"),h(O.target-O.start),g()):_.debugEnabled()&&_.debug("start higher then limit -> tweaking denied");break;case"low":_.debugEnabled()&&_.debug("just low, no tweaking necessary")}}}],M=[{type:l.PLAY_STATS,listener:function(e){var t=e.data.stats.buffer.delay.current;t&&b.add(t),!D&&n.isTridentBrowser&&t>S&&(O.target=t,O.limit=O.target+T,g()),D=!0}},{type:a.BUFFERING,listener:function(){E(!0);var e=((new Date).getTime()-P)/1e3;-1!==P&&e<N&&O.start<R.limit&&(_.warnEnabled()&&_.warn("buffering "+e+" seconds after stream started, raising buffer values"),h(w),g()),p(),clearInterval(m),m=0}}],k=[{type:a.PLAYBACK_STARTED,listener:function(){E(!1),P=(new Date).getTime(),D&&C&&(m=setInterval((,1e3*C))}}];return _.debugEnabled()&&_.debug("initialize"),p(),i.add({target:f,listeners:U}),{destroy:function(){b=null,[U,M,k].forEach(()}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){return{validateBuffer:function(e){var t=["min","start","target","limit","max"],n=t.filter((function(t){return!Object.prototype.hasOwnProperty.call(e,t)}));if(n.length)return{success:!1,reason:"The buffer config is invalid, it must contain "+n.join(", ")+". Reset to default."};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&"number"!=typeof e[t[r]])return{success:!1,reason:"The buffer config is invalid, the value '"+t[r]+"' have to be a number. Reset to default."};return{success:!0}},validateDynamic:function(e){var t=["offsetThreshold","offsetStep","cooldownTime"],n=t.filter(();return n.length?{success:!1,reason:"The dynamic buffer config is invalid, it must contain "+n.join(", ")+". Reset to default."}:(t.forEach((),{success:!0})}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(11),n(52),n(20),n(26),n(118),n(119),n(105),n(112),n(107),n(106),n(113),n(111),n(109),n(120)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p,E){return{create:function(v){ction b(){N.debugEnabled()&&N.debug("resetMediaSourceOnTheFly");var e=T&&T.activeSourceBuffers.length,t=e&&T.activeSourceBuffers[T.activeSourceBuffers.length-1].buffered.length,n=t?T.activeSourceBuffers[T.activeSourceBuffers.length-1].buffered.end(T.activeSourceBuffers[T.activeSourceBuffers.length-1].buffered.length-1):0;N.debugEnabled()&&N.debug("hasActiveSourceBuffer "+e),N.debugEnabled()&&N.debug("hasActiveSourceBufferData "+t),N.debugEnabled()&&N.debug("lastBufferEndActiveSourceBuffer "+n),N.debugEnabled()&&N.debug("old lastBufferEnd "+P),n&&(N.debugEnabled()&&N.debug("set lastBufferEnd to lastBufferEndActiveSourceBuffer"),P=n),N.debugEnabled()&&N.debug("new lastBufferEnd "+P),N.debugEnabled()&&N.debug("resetMediaSource"),g(),h(),m()}r T,_,A,O,R,I,N=e.create("MediaSourceHandler"),w=i.IDLE,C=!1,P=0,D=!1,L=[{type:c.STREAM_INFO,listener:y},{type:c.STREAM_INFO_UPDATE,listener:y},{type:c.APPLICATION_STATE_CHANGE,listener:function(e){switch(w=e.data.state){case i.PAUSED:P=0;case i.PLAYING:}}},{type:c.DOCUMENT_VISIBLE,listener:S},{type:c.DOCUMENT_HIDDEN,listener:S},{type:u.ELEMENT_CREATED,listener:function(){m()}},{type:d.ERROR,listener:function(e){e.data.code===r.MEDIA.DECODE_ERROR?R=!0:e.data.code===r.MEDIA.MEDIA_SOURCE_ENDED&&(I=!0)}},{type:d.RECOVER,listener:function(e){N.debugEnabled()&&N.debug("media error recover after error "+e.data.code),D=!0,C=!0,b()}},{type:f.FIRST_FRAGMENT,listener:,{type:p.MEDIA_ERROR_RECOVER_STATS,listener:function(e){P=e.data.stats.buffer.end}}],U=[{type:o.SOURCE_OPEN,listener:function(){N.debugEnabled()&&N.debug("open")}},{type:o.SOURCE_ENDED,listener:function(){N.debugEnabled()&&N.debug("ended"),v.emit(l.ERROR,{code:a.MEDIA_ERR_MEDIA_SOURCE_ENDED}),v.emit(l.SOURCE_ENDED,function(e){return(e=e||{}).readyState=T.readyState,e}())}},{type:o.SOURCE_CLOSED,listener:],M=[];return N.debugEnabled()&&N.debug("create"),t.add({target:v,listeners:L}),h(),{destroy:function(){N.debugEnabled()&&N.debug("destroy"),g(),t.remove({target:v,listeners:L})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){return Object.freeze({MEDIA_ERR_ABORTED:MediaError.MEDIA_ERR_ABORTED,MEDIA_ERR_NETWORK:MediaError.MEDIA_ERR_NETWORK,MEDIA_ERR_DECODE:MediaError.MEDIA_ERR_DECODE,MEDIA_ERR_SRC_NOT_SUPPORTED:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,MEDIA_ERR_MEDIA_SOURCE_ENDED:100,MEDIA_ERR_HLS_JUMP:1008})}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(21),n(11),n(121),n(118),n(105),n(112),n(107),n(106),n(111),n(26)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l){return{create:function(d,f,p,E,v,h){function g(e){if(L=e.data,!X)if(e.data.id)M.debugEnabled()&&M.debug("initializing from RAP with stored "+e.data.boxType+" "+e.data.id),X=!0,L=e.data.fragment;else{for(var t="",n=4;n<8;++n)t+=String.fromCharCode(e.data[n]);if(-1===["moov","ftyp"].indexOf(t))return void(M.debugEnabled()&&M.debug("dropping fragment: "+t));M.debugEnabled()&&M.debug("initialized with "+t),ee={boxType:t,fragment:e.data,id:Math.floor(1e11*(Math.random()+1))},M.debugEnabled()&&M.debug("set & emit first fragment with id "+ee.id),d.emit(c.FIRST_FRAGMENT,ee),X=!0}!L)}function m(e){if(M.debugEnabled()&&M.debug("random access point streamtime "+e.data.onRandomAccessPoint.streamTime),!X&&te!==s.STREAM_INFO_UPDATE){ee&&(M.debugEnabled()&&M.debug("not initialized & have first fragment at RAP with id "+ee.id),g({data:ee})),(Z=Math.floor(e.data.onRandomAccessPoint.streamTime))>0&&Z<=500&&(M.debugEnabled()&&M.debug("start time "+Z+" within a range of 500 ms, normalize to 0"),Z=0),Z=Math.floor(Z)/1e3,M.debugEnabled()&&M.debug("set start time to random access point");var t=parseFloat(Z.toString());C&&C.buffered.length&&(Z=-1),t>0?(M.debugEnabled()&&M.debug("time !== 0, from stream info update?"),Z=p,T(p-t)):0===t&&(M.debugEnabled()&&M.debug("time === 0, from stream info?"),T(C&&C.buffered.length?C.buffered.end(C.buffered.length-1):p))}}unction y(){_({command:z,zeroing:t.isTridentBrowser&&!isNaN(f.duration)&&f.duration>0})}function S(e){_({command:q,position:e})}function T(e){_({command:Q,offset:e})}function _(e){e.count=G++,W?function(e){if(M.detailEnabled()&&M.detail("queue "+e.command+" "+e.count),e.force)V.unshift(e);else if(e.command===Y&&V.length&&V[V.length-1].command===Y){if(H+1<j){var t=V[V.length-1].fragment,n=e.fragment,r=new Uint8Array(t.byteLength+n.byteLength);r.set(new Uint8Array(t),0),r.set(new Uint8Array(n),t.byteLength),V[V.length-1].fragment=r,V[V.length-1].count=V[V.length-1].count.toString()+" & "+e.count,H++}else H=0,M.detailEnabled()&&M.detail("joined fragments threshold ("+j+") reached so begin new one"),V.push(e);M.detailEnabled()&&M.detail("joined fragments count "+H)}else H=0,M.detailEnabled()&&M.detail("joined fragments count "+H),V.push(e)}(e):A(e)}unction O(){if(Z>-1&&C&&C.buffered.length){var e=parseFloat(Z.toString());Z=-1,M.debugEnabled()&&M.debug("have buffer and start time on update end"),e>0?(M.debugEnabled()&&M.debug("update end && time !== 0, from stream info update?"),S(e)):0===e&&(M.debugEnabled()&&M.debug("update end && time === 0, from stream info?"),S(p))}W=!1,J&&(J=0,M.debugEnabled()&&M.debug("source ready"),d.emit(u.SOURCE_READY)),V.length?A(V.shift()):!U&&C&&C.buffered.length&&C.buffered.start(0)<P-k&&w()&&(U=setTimeout((,ne),M.debugEnabled()&&M.debug("remove buffer"),b(C.buffered.start(0),P-F))}function R(e,t){M.debugEnabled()&&M.debug("stream info"),E=e.data.streamInfo,D=E&&E.mimeType?E.mimeType:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',te=e.name,t?M.debugEnabled()&&M.debug("triggered streamInfo"):(M.debugEnabled()&&M.debug("untriggered streamInfo"),ee&&(M.debugEnabled()&&M.debug("deleting stored first fragment"),ee=null)),f&&"open"===f.readyState?(M.debugEnabled()&&M.debug("playerState "+Object.keys(l)[h-1]),M.debugEnabled()&&M.debug("sourceBuffer "+(C?"existing":"not existing")),-1!==[l.PLAYING,l.BUFFERING].indexOf(h)?(M.debugEnabled()&&M.debug("initialized false after stream info"),X=!1):C?(M.debugEnabled()&&M.debug("reset after stream info"),y()):(M.debugEnabled()&&M.debug("init sourcebuffer after stream info"),N())):(M.debugEnabled()&&M.debug("add source open listener after stream info"),f.addEventListener(i.SOURCE_OPEN,I)),E.haveVideo||m({data:{onRandomAccessPoint:{streamTime:0}}})}function I(){M.debugEnabled()&&M.debug("mediasource open"),f.removeEventListener(i.SOURCE_OPEN,I),M.debugEnabled()&&M.debug("init sourcebuffer"),N()}r C,P,D,L,U,M=e.create("SourceBufferQueue "+(new Date).getTime()),k=30,F=20,x=300,j=30,B=0,G=0,H=0,W=!1,V=[],Y="append",K="remove",z="reset",q="seek",Q="offset",$=!1,J=0,X=!1,Z=-1,ee=null,te="",ne=1e4,re=[{type:s.STREAM_INFO,listener:R},{type:s.STREAM_INFO_UPDATE,listener:R},{type:s.STREAM_FRAGMENT,listener:g},{type:s.RANDOM_ACCESS_POINT,listener:m}],ie=[{type:a.TIME_UPDATE,listener:function(e){P=e.data.currentTime,h!==l.PAUSED&&M.detailEnabled()&&M.detail("current time "+P)}},{type:s.APPLICATION_STATE_CHANGE,listener:function(e){(h=e.data.state)===l.PAUSED&&function(){for(M.debugEnabled()&&M.debug("pause"),X=!1,$=!1;V.length;)V.pop();b(0,1/0),B=0,p=0}()}}],oe=[{type:r.UPDATE_END,listener:O}];return M.debugEnabled()&&M.debug("init sourceBufferQueue"),M.debugEnabled()&&M.debug("lastBufferEnd "+p),M.debugEnabled()&&M.debug("streamInfo "+JSON.stringify(E)),M.debugEnabled()&&M.debug("firstFragment "+!!v),M.debugEnabled()&&M.debug("playerState "+Object.keys(l)[h-1]),v&&(ee=v,M.debugEnabled()&&M.debug("created with first fragment "+ee.id)),n.add({target:d,listeners:re}),E&&(W=!0,R({data:{streamInfo:E}},!0)),{destroy:function(){for(;V.length;)V.pop();n.remove({target:d,listeners:re}),n.remove({target:d,listeners:ie}),C&&n.remove({target:C,listeners:oe}),f.removeEventListener(i.SOURCE_OPEN,I),C=null}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){var e="";return{BASE:e,ABORT:"abort",ERROR:"error",UPDATE:"update",UPDATE_START:"updatestart",UPDATE_END:"updateend"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(11),n(105),n(107)],void 0===(i=function(e,t,n,r){return{create:function(i){ar a,s=e.create("FakeAudioContext"),u=[{type:r.STREAM_INFO,listener:function(e){o(),e.data.streamInfo.haveAudio||(window.AudioContext=window.AudioContext||window.webkitAudioContext||a=new AudioContext)}},{type:n.PAUSE,listener:o}];return s.debugEnabled()&&s.debug("initialize"),t.add({target:i,listeners:u}),{destroy:function(){o(),t.remove({target:i,listeners:u})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(21),n(11),n(105),n(107),n(112),n(26)],void 0===(i=function(e,t,n,r,i,o,a){return{create:function(s){ d,f,p=10,E=.2,v=.5,h=e.create("GapHandler"),g=0,m=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){d=e.data.state,n.remove({target:s,listeners:b}),(t.isTridentBrowser&&d===a.PLAYING||!t.isTridentBrowser&&d!==a.PAUSED)&&n.add({target:s,listeners:b})}}],b=[{type:o.TIME_UPDATE,listener:function(e){var t=u(e.data.currentTime,e.data.buffered),n=c(e.data.currentTime,e.data.buffered);if(f===e.data.currentTime){if(++g<p)return;if(n>t&&l(e.data.buffered,n)>v&&function(e,t){return e+E>=t.end(u(e,t))}(e.data.currentTime,e.data.buffered)||n===t&&l(e.data.buffered,n)>v&&function(e,t){return e<t.start(u(e,t))}(e.data.currentTime,e.data.buffered)){var i=e.data.buffered.start(c(e.data.currentTime,e.data.buffered));h.debugEnabled()&&h.debug("recover gap, seek to "+i,3),s.emit(r.SEEK,{position:i}),s.emit(r.PLAY,{external:!1})}}f=e.data.currentTime,g=0}}];return h.debugEnabled()&&h.debug("initialize"),n.add({target:s,listeners:m}),{destroy:function(){n.remove({target:s,listeners:m}),n.remove({target:s,listeners:b})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(16),n(11),n(104),n(107),n(109),n(112),n(113),n(119),n(26)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c){return{create:function(l){var d,f,p,E=2,v=e.create("HLSJumpHandler"),h=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(n.remove({target:l,listeners:g}),e.data.state){case c.PAUSED:break;case c.PAUSING:v.debugEnabled()&&v.debug("entering paused state"),d=null;break;case c.PLAYING:n.add({target:l,listeners:g})}}},{type:s.RECOVER,listener:function(){v.debugEnabled()&&v.debug("media error recover"),p=!0}},{type:a.MEDIA_ERROR_RECOVERED,listener:function(){v.debugEnabled()&&v.debug("media error recovered"),p=!1}}],g=[{type:o.PLAY_STATS,listener:function(e){if(f===e.data.index&&d&&void 0!==d.currentTime&&e.data.stats.currentTime<d.currentTime-E&&!p){var n={code:u.MEDIA_ERR_HLS_JUMP,currentTime:{last:d.currentTime,current:e.data.stats.currentTime}};l.emit(r.ERROR,n)}f=e.data.index,d=t.copy(e.data.stats)}}];return v.debugEnabled()&&v.debug("initialize"),n.add({target:l,listeners:h}),{destroy:function(){n.remove({target:l,listeners:h})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(5),n(6),n(21),n(11),n(104),n(105),n(107),n(112),n(113),n(26)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c){return{create:function(l){unction f(t){var n=t.data.buffered.length?t.data.buffered.end(0)-t.data.currentTime:"n.a.";v||((E&&t.name===s.PAUSE||m&&e.mobile)&&p===c.PLAYING?l.emit(i.SUSPENDED):g||(g=setTimeout((function(){p===c.PLAYING&&(h.debugEnabled()&&h.debug("nanoplayer: recover unexpected pause type "+t.name+", delay = "+n,3),l.emit(o.PLAY,{external:!1})),g=0}),200)))}var p,E,v,h=t.create("PauseHandler"),g=0,m=!1,b=[{type:s.PAUSE,listener:f},{type:s.WAITING,listener:f},{type:s.ENDED,listener:f},{type:a.APPLICATION_STATE_CHANGE,listener:function(e){p=e.data.state}},{type:a.CONFIG,listener:function(e){E=n.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&n.canUseHLS}},{type:a.DOCUMENT_VISIBLE,listener:d},{type:a.DOCUMENT_HIDDEN,listener:d},{type:u.RECOVER,listener:function(){h.debugEnabled()&&h.debug("media error recover"),v=!0}},{type:s.MEDIA_ERROR_RECOVERED,listener:function(){h.debugEnabled()&&h.debug("media error recovered"),v=!1}}];return h.debugEnabled()&&h.debug("initialize"),r.add({target:l,listeners:b}),{destroy:function(){r.remove({target:l,listeners:b})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(11),n(26),n(107),n(112),n(108)],void 0===(i=function(e,t,n,r,i,o){return{create:function(a){function s(){for(f={droppedVideoFrames:0,droppedVideoFramesCurrent:0,droppedVideoFramesLevel:0,corruptedVideoFrames:0,corruptedVideoFramesCurrent:0,creationTime:0,totalVideoFrames:0},clearTimeout(A),_=0,A=0,O=0;g.length;)g.pop()}function u(e){m=e.data.streamInfo.haveVideo&&(b=e.data.streamInfo.videoInfo.frameRate)}function c(){clearInterval(y),t.remove({target:a,listeners:I}),y=0,s()}function l(){var e,t=0;if(p===n.PLAYING){E.debugEnabled()&&E.debug("check with current level "+_),E.debugEnabled()&&E.debug("skip check lower "+(_+1));for(var r=0;r<T.length-_;r+=1)if(e=d(T[r])){E.debugEnabled()&&E.debug("frame drop detected with type '"+e.type+"'"),E.debug(e.frames.dropped+" frames in last "+e.samples.all.length+" seconds dropped"),a.emit(o.FRAME_DROP,e),t=e.level,E.debugEnabled()&&E.debug("change current level "+_+" to "+t),_=t,A&&E.debugEnabled()&&E.debug("reset level timeout running, clear timeout"),clearTimeout(A),A=setTimeout((,1e3*e.samples.all.length),E.debugEnabled()&&E.debug("reset level in "+e.samples.all.length+" sec");break}}O=t}ar f,p,E=e.create("QualityHandler"),v={extreme:{ratioThreshold:.95,samplesRange:3,samplesMatchAllowed:1,level:4},high:{ratioThreshold:.2,samplesRange:5,samplesMatchAllowed:1,level:3},medium:{ratioThreshold:.1,samplesRange:10,samplesMatchAllowed:3,level:2},low:{ratioThreshold:.02,samplesRange:10,samplesMatchAllowed:1,level:1}},h=10,g=[],m=!1,b=0,y=0,S=1e3,T=["extreme","high","medium","low"],_=0,A=0,O=0,R=[{type:r.APPLICATION_STATE_CHANGE,listener:function(e){(p=e.data.state)===n.PAUSED?c():!y&&m&&p===n.PLAYING&&(c(),t.add({target:a,listeners:I}),y=setInterval(l,S))}},{type:r.STREAM_INFO,listener:u},{type:r.STREAM_INFO_UPDATE,listener:function(e){u(e)}}],I=[{type:i.QUALITY_UPDATE,listener:function(e){for(var t in e.data.quality)if(Object.prototype.hasOwnProperty.call(f,t)){if("droppedVideoFrames"===t){for(f.droppedVideoFramesCurrent=e.data.quality.droppedVideoFrames-f.droppedVideoFrames;g.length>h-1;)g.shift();g.push({count:f.droppedVideoFramesCurrent,time:e.data.currentTime})}"corruptedVideoFrames"===t&&(f.corruptedVideoFramesCurrent=e.data.quality.corruptedVideoFrames-f.corruptedVideoFrames),f[t]=e.data.quality[t]}f.droppedVideoFramesLevel=O,a.emit(o.QUALITY_STATS,f)}}];return t.add({target:a,listeners:R}),{destroy:function(){t.remove({target:a,listeners:R}),t.remove({target:a,listeners:I}),s()}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(21),n(11),n(105),n(107),n(111),n(108),n(112),n(26)],void 0===(i=function(e,t,n,r,i,o,a,s,u){return{create:function(t){r d,f=e.create("FrameDropHandler"),p=[],E=!1,v=0,h=[{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(d=e.data.state){case u.PLAYING:case u.BUFFERING:break;case u.PAUSED:l()}}},{type:i.RANDOM_ACCESS_POINT,listener:function(e){for(p.push(e.data.onRandomAccessPoint.streamTime/1e3+v/1e3);p.length>10;)p.shift()}},{type:o.TIME_OFFSET,listener:,{type:a.FRAME_DROP,listener:function(e){f.debugEnabled()&&f.debug("frame drop"),f.debugEnabled()&&f.debug(JSON.stringify(e.data)),"extreme"!==e.data.type||E||d!==u.PLAYING||(f.debugEnabled()&&f.debug("visible and extreme frame drop detected (edge)"),f.debugEnabled()&&f.debug("try seeking to last RAP to get stable playback"),function(e){f.debugEnabled()&&f.debug("seeking to "+e),t.emit(r.SEEK,{position:e})}(p.length?p[p.length-1]:0))}}],g=[{type:s.VIEWPORT_VISIBLE,listener:c},{type:s.VIEWPORT_HIDDEN,listener:c}];return f.debugEnabled()&&f.debug("initialize"),l(),n.add({target:t,listeners:h}),n.add({target:t,listeners:g}),{destroy:function(){n.remove({target:t,listeners:h}),n.remove({target:t,listeners:g})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(38),n(11),n(6),n(21),n(68),n(26),n(107),n(112),n(113),n(109)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c){return{create:function(l){ E,v,h,g,m,b,y,S,T,_,A,O,R,I=n.create("StatsCollector"),N=0,w=[{type:a.APPLICATION_STATE_CHANGE,listener:function(e){switch(v=e.data.state){case o.PAUSED:I.debugEnabled()&&I.debug("remove stats listener"),t.remove({target:l,listeners:P});break;case o.PLAYING:break;case o.LOADING:p(),h&&(I.debugEnabled()&&I.debug("hls: add stats listener"),t.add({target:l,listeners:P}))}}},{type:a.CONFIG,listener:function(e){h=r.mustUseHLS||e.data.config.playback.allowSafariHlsFallback&&r.canUseHLS}}],C=[{type:a.STREAM_FRAGMENT,listener:function(e){O+=1,R+=e.data.byteLength}},{type:a.STREAM_INFO,listener:function(e){h||(I.debugEnabled()&&I.debug("wss: add stats listener"),t.add({target:l,listeners:P})),g=e.data.streamInfo.haveVideo}},{type:a.STREAM_INFO_UPDATE,listener:],P=[{type:s.TIME_UPDATE,listener:function(t){var n=t.data.buffered.length-1,r=t.data.played.length-1;m=t.data.currentTime,b=t.data.playbackRate;var i=t.data.offsetsRecovered;if(i&&(m+=i.currentTime),v!==o.PLAYING&&v!==o.BUFFERING||0!==m?E.currentTime=v===o.LOADING?0:m:I.debugEnabled()&&I.debug("playing but currentTime = 0"),0===E.currentTime&&I.debugEnabled()&&I.debug("stats.currentTime = 0"),r>=0&&(E.playout.start=t.data.played.start(r),E.playout.end=t.data.played.end(r),i&&(E.playout.start+=i.currentTime,E.playout.end+=i.currentTime)),n>=0&&(!h||h&&E.buffer.end!==t.data.buffered.end(n))&&(E.buffer.update.current=t.data.buffered.end(n)-E.buffer.end,i&&(E.buffer.update.current+=i.currentTime),E.buffer.delay.before=E.buffer.end-E.currentTime,E.buffer.start=t.data.buffered.start(n),E.buffer.end=t.data.buffered.end(n),i&&(E.buffer.start+=i.currentTime,E.buffer.end+=i.currentTime),E.buffer.delay.current=E.buffer.end-E.currentTime,y.add(E.buffer.delay.current),f(y,E.buffer.delay),S.add(E.buffer.update.current),f(S,E.buffer.update),E.playbackrate.current=b,T.add(E.playbackrate.current),f(T,E.playbackrate)),e&&!h){var a=Math.floor(e.now()/1e3);N!==a&&(N=a,E.bitrate.current=8*R,_.add(E.bitrate.current),f(_,E.bitrate),g&&(E.framerate.current=O,A.add(E.framerate.current),f(A,E.framerate)),O=0,R=0)}d(c.PLAY_STATS,t.data)}},{type:u.RECOVER,listener:];return p(),t.add({target:l,listeners:w}),t.add({target:l,listeners:C}),{destroy:function(){t.remove({target:l,listeners:C}),t.remove({target:l,listeners:w})}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(107)],void 0===(i=function(e){return{create:function(t){eturn function(e){return-1!==document.cookie.indexOf(e+"=")?document.cookie.split(e+"=")[1].split(";")[0]:null}("nanoDump")&&t.addListener(e.STREAM_FRAGMENT,n),{destroy:}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(21),n(16),n(11),n(105),n(107),n(131),n(112),n(135),n(113),n(20),n(29),n(26),n(30)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l,d,f,p){var E=e.create("MediaElementHandler");return{create:function(e){function v(t){if(t&&t.name&&t.data){var n=t.data.index,r=N(Se[n]);t.data=X(r,t.data,!1);var i=t.name,o=function(e){var t=e.indexOf(".")+1;return"mediaElementHandler."+e.substring(t)}(i);if(ee===n)i===u.CAN_PLAY?(ke&&(e.emit(s.MEDIA_ERROR_RECOVERED,{}),me=X(me,be,!0),Q(),ke=!1),Le||(!Z||Ae||!Te)&&Z||(e.emit(o,t.data),Le=!0,j())):e.emit(o,t.data);else if(n===ue&&ue!==ee&&Te)switch(E.debugEnabled()&&E.debug("onMediaElementEvent switchMediaElementIndex: "+ue),i){case u.PLAY:case u.DURATION_CHANGE:case u.LOADED_META_DATA:case u.LOADED_DATA:e.emit(o,t.data);break;case u.CAN_PLAY:E.debugEnabled()&&E.debug("onMediaElementEvent CAN_PLAY on switchMediaElementIndex: "+ue),Le||(E.debugEnabled()&&E.debug("onMediaElementEvent emit CAN_PLAY"),e.emit(o,t.data),Le=!0);break;case u.CAN_PLAY_THROUGH:E.debugEnabled()&&E.debug("onMediaElementEvent CAN_PLAY_THROUGH on switchMediaElementIndex: "+ue),Oe&&(E.debugEnabled()&&E.debug("onMediaElementEvent CAN_PLAY_THROUGH wait for progress"),Ue=!0,e.emit(o,t.data));break;case u.PROGRESS:E.debugEnabled()&&E.debug("onMediaElementEvent PROGRESS on switchMediaElementIndex: "+ue),Oe&&Ue&&(E.debugEnabled()&&E.debug("onMediaElementEvent PROGRESS call mediaElementSwitch"),Ue=!1,function(){Z&&void 0!==ue&&Oe&&(E.debugEnabled()&&E.debug("switch mediaElement after successfull "+(K()?"updateSource":"switchStream")),x(),Se[ue]),setTimeout((function(){R(Se[ue]),I(Se[ee]),q(ue),_(Se[ee])&&(_e=_(Se[ee]).muted),y(Se[ee]),_e?y(Se[ue]):S(Se[ue]),b(Se[ee],!0),Q(),O(Se[ue],Re),ee=ue,he?(Oe=!1,function(){if(he){var e="update"===he.type,t=he.entry.index,r=n.copy(he);he=void 0,E.debugEnabled()&&E.debug("handleQueuedSwitch"),z(r,t,e,!0)}}()):j()}),150))}());break;case u.PLAYING:e.emit(o,t.data)}}}function h(){E.debugEnabled()&&E.debug("unmute index: "+ee);for(var e=0;e<Se.length;e++)S(Se[e],!0);setTimeout((,50)}function g(t){return a.create(e,t.elementId,le,t.index,Z,_e,Ce,Pe,De)}unction b(e,t){e&&(e.pause(),t||(Te=!1))}function y(e,t){e&&(t&&(_e=!0),e.setMute())}unction T(e){if(e)return e.getVideoPlaybackQuality()}unction A(e){e&&e.destroyVideo()}unction R(e){e&&e.show()}function I(e){e&&e.hide()}ction P(){clearInterval(te),te=void 0}unction L(){te=setInterval(M,Ie)}unction M(){var t=N(Se[ee]);e.emit(u.TIME_UPDATE,t)}function k(){var t=N(Se[ee]);t.quality=T(Se[ee]),e.emit(u.QUALITY_UPDATE,t)}function F(e){ie&&x();var t=e&&Object.prototype.hasOwnProperty.call(e,"options")&&Object.prototype.hasOwnProperty.call(e.options,"timeout")?1e3*e.options.timeout:we;ie=setTimeout((function(){void 0!==ue&&ue!==ee&&Ae&&!Oe&&(V(n.copy(de)),b(Se[ue],!0),K()&&(J(void 0),Y()),he=void 0,j())}),t)}nction B(e){e&&e.setSource({source:ae})}unction H(e){var t,r,i,o;if(Z&&C(e)&&Object.prototype.hasOwnProperty.call(e.data,"entry"))if(i=e.data.entry.index,t=he?"update"===he.type:K(),r="update"===e.data.type,E.debugEnabled()&&E.debug((r?"updateSourceInit":"switchStreamInit")+" with entryIndex: "+i),Me)E.debugEnabled()&&E.debug((r?"updating":"switching")+" is disabled, abort");else{if(Ae&&(!t||t&&r)||he&&(!t||t&&r))E.debugEnabled()&&E.debug("abort ongoing "+(t?"update":"switch")+" process"),(o=n.copy(he||de)).reason="superseded",W(o),x(),he?he=void 0:(b(Se[ue],!0),j());else if(Ae&&t&&!r||he&&t&&!r)return void(E.debugEnabled()&&E.debug("ongoing updateSource process!"));r||fe!==i?(E.debugEnabled()&&E.debug("new "+(r?"update":"switch")),Oe?(E.debugEnabled()&&E.debug("do not handle switch, still ongoing switch!"),E.debugEnabled()&&E.debug("add to queue!"),he=e.data):(E.debugEnabled()&&E.debug("handle switch without ongoing"),z(e.data,i,r))):(E.debugEnabled()&&E.debug("abort switch attempt on equal index"),(o=n.copy(e.data)).reason="equalsource",j(),x(),W(o)),Me=!0,setTimeout((,500)}}unction V(t){e.emit(s.UPDATE_SOURCE_FAIL,{tag:t.options.tag,count:t.options.count,code:l.NETWORK.SOURCE_TIMEOUT,message:d.NETWORK.SOURCE_TIMEOUT,type:t.type,id:t.id})}function Y(){e.emit(s.UPDATE_SOURCE_TIMEOUT,{code:l.STREAM.MEDIA_NOT_AVAILABLE,message:d.STREAM.MEDIA_NOT_AVAILABLE})}unction z(e,t,n,r){ue=ee?0:1,E.debugEnabled()&&E.debug("mediaElementPrepareSwitch on switchMediaElementIndex: "+ue),Le=!1,Ae=!0,de=e,n?(oe=de.source.startIndex,Ee=oe,r&&(B(Se[ue]),G(Se[ue]),Z||w(Se[ue]),Z&&Ae&&y(Se[ue]),m(Se[ue],void 0,!0),P(),D(),ae.length&&(E.debugEnabled()&&E.debug("add time update interval for play stats"),L(),void 0!==T(Se[ue])&&(E.debugEnabled()&&E.debug("add quality update interval"),U())))):Te&&(ue=ee?0:1,Ee=t,r&&(B(Se[ue]),G(Se[ue]),Z||w(Se[ue]),Z&&Ae&&y(Se[ue]),m(Se[ue],void 0,!0))),Te&&F(de)}unction Q(){E.debugEnabled()&&E.debug("reset offsets recovered"),be=$()}function $(){return!!Z&&{currentTime:0,buffered:{start:0,end:0},played:{start:0,end:0}}}r Z,ee,te,ne,re,ie,oe,ae,se,ue,ce,le,de,fe,pe,Ee,ve,he,ge,me,be,ye=[{type:o.CONFIG,listener:function(e){C(e)&&(function(e){re=e}(e.data.config),Z=t.mustUseHLS||re.playback.allowSafariHlsFallback&&t.canUseHLS,ee=0,ve=0,J(oe=re.source.startIndex),re.playback&&(_e=!!re.playback.muted,Ce=!!re.playback.automute,De=re.playback.crossOrigin))}},{type:i.CREATE_VIDEO,listener:function(t){var n;C(t)&&(t.data.elementIds&&(ce=t.data.elementIds),t.data.container&&(le=t.data.container)),ve=ce.length;for(var r=0;r<ve;r++)n=g({elementId:ce[r],index:r}),Se.push(n);e.emit(s.ELEMENT_CREATED,{video:_(n[ee])}),e.emit(s.VOLUME_CHANGE,{muted:_e,volume:Re}),R(Se[ee]),q(ee),N(Se[ee]),me=$(),be=$()}},{type:i.DESTROY_VIDEO,listener:,{type:i.VIDEO_SOURCE,listener:function(e){var t,n,r=K();E.debugEnabled()&&E.debug("received video source"),E.debugEnabled()&&E.debug("src: "+e.data.src),E.debugEnabled()&&E.debug("type: "+e.data.type),C(e)&&(t=!(ae=e.data.src).length,se=e.data.type,n=(r||Ae)&&Te?ue:ee,E.debugEnabled()&&E.debug("sourceTemplate set"),Se.length&&(!Z||Z&&(t||!he&&(Te&&Ae||!Te&&!Ae)))&&(B(Se[n]),G(Se[n]),Z||w(Se[n]),Z&&Ae&&y(Se[ue]),Te&&!t&&(E.debugEnabled()&&E.debug("call play while playing after video source received"),m(Se[n],void 0,r)),P(),D(),t||(E.debugEnabled()&&E.debug("add time update interval for play stats"),L(),void 0!==T(Se[n])&&(E.debugEnabled()&&E.debug("add quality update interval"),U()))))}},{type:i.PLAY,listener:function(e){Se[ee]&&(Z&&(R(Se[ee]),I(Se[ee?0:1]),(!e||e&&e.data.external)&&!_e&&h()),E.debugEnabled()&&E.debug("onPlay index: "+ee),m(Se[ee],e,!1))}},{type:i.PAUSE,listener:function(){E.debugEnabled()&&E.debug("onPause index: "+ee),b(Se[ee],!1),isNaN(ue)||b(Se[ue],!1),Q()}},{type:i.MUTE,listener:function(){E.debugEnabled()&&E.debug("mute index: "+ee),y(Se[ee],!0)}},{type:i.UNMUTE,listener:h},{type:i.SEEK,listener:function(e){E.debugEnabled()&&E.debug("onSeek index: "+ee),function(e,t){e&&e.seek(t)}(Se[ee],e)}},{type:i.SET_VOLUME,listener:function(e){C(e)&&(E.debugEnabled()&&E.debug("onSetVolume index: "+ee),Re=Math.min(1,Math.max(0,e.data.volume)),O(Se[ee],Re))}},{type:i.SET_RATE,listener:function(e){if(C(e)){E.debugEnabled()&&E.debug("onSetRate index: "+ee);var t=e.data.rate;!Se[ee],t)}}},{type:u.LOAD_START,listener:v},{type:u.PROGRESS,listener:v},{type:u.SUSPEND,listener:v},{type:u.ABORT,listener:v},{type:u.EMPTIED,listener:v},{type:u.STALLED,listener:v},{type:u.PLAY,listener:v},{type:u.PAUSE,listener:v},{type:u.LOADED_META_DATA,listener:v},{type:u.LOADED_DATA,listener:v},{type:u.WAITING,listener:v},{type:u.ERROR,listener:v},{type:u.PLAYING,listener:v},{type:u.CAN_PLAY,listener:v},{type:u.CAN_PLAY_THROUGH,listener:v},{type:u.SEEKING,listener:v},{type:u.SEEKED,listener:v},{type:u.TIME_UPDATE,listener:v},{type:u.QUALITY_UPDATE,listener:v},{type:u.ENDED,listener:v},{type:u.RATE_CHANGE,listener:v},{type:u.DURATION_CHANGE,listener:v},{type:u.VOLUME_CHANGE,listener:v},{type:u.ELEMENT_CREATED,listener:v},{type:u.PLAY_START_SUCCESS,listener:v},{type:u.PLAY_START_ERROR,listener:v},{type:u.VIEWPORT_VISIBLE,listener:v},{type:u.VIEWPORT_HIDDEN,listener:v},{type:o.SWITCH_STREAM_INIT,listener:,{type:o.SWITCH_STREAM_SUCCESS,listener:function(e){Z&&C(e)&&(Te?de&&e.data.id===de.id&&Ae&&(Oe=!0,Ae=!1,Le=!0,J(de.entry.index)):Object.prototype.hasOwnProperty.call(e.data,"entry")&&Object.prototype.hasOwnProperty.call(e.data.entry,"index")&&J(e.data.entry.index))}},{type:o.UPDATE_SOURCE_INIT,listener:function(e){Te&&(H(e),pe=void 0)}},{type:o.UPDATE_SOURCE_SUCCESS,listener:function(e){Z&&C(e)&&(Te?de&&e.data.id===de.id&&Ae&&(Oe=!0,Ae=!1,Le=!0,J(Ee)):Object.prototype.hasOwnProperty.call(e.data,"source")&&Object.prototype.hasOwnProperty.call(e.data.source,"startIndex")&&J(e.data.source.startIndex))}},{type:o.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case f.PAUSED:(Ae||Oe)&&void 0!==ue&&-1===[p.BUFFER,p.STREAM_NOT_FOUND].indexOf(e.data.reason)?(R(Se[ue]),I(Se[ee]),q(ue),ee=ue,he?(J(he.source.startIndex),oe=he.source.startIndex):J(Ee),j(),x(),he=void 0):(I(Se[ue]),j(),x(),p.STREAM_NOT_FOUND===e.data.reason&&pe&&(J(pe),pe=void 0)),Te=!1,Le=!1;case f.PLAYING:}}},{type:c.RECOVER,listener:function(){(function(){if(be){E.debugEnabled()&&E.debug("set offsets recovered");var e=N(Se[ee]);be.currentTime=e.currentTime;var t=e.played.length,n=e.buffered.length;t&&(be.played.start=e.played.start(t-1),be.played.end=e.played.end(t-1)),n&&(be.buffered.start=e.buffered.start(n-1),be.buffered.end=e.buffered.end(n-1)),E.debugEnabled()&&(E.debug("new offset currentTime: "+be.currentTime),E.debug("new offset played start: "+be.played.start),E.debug("new offset played end: "+be.played.end),E.debug("new offset buffered start: "+be.buffered.start),E.debug("new offset buffered end: "+be.buffered.end))}})(),ke=!0,Z&&Te&&(E.debugEnabled()&&E.debug("media error recover"),Q(),B(Se[ee]),G(Se[ee]),E.debugEnabled()&&E.debug("set source & call play while playing after media error"),m(Se[ee],void 0,!1))}}],Se=[],Te=!1,_e=!1,Ae=!1,Oe=!1,Re=1,Ie=100,Ne=1e3,we=1e4,Ce=!1,Pe=!1,De="not-set",Le=!1,Ue=!1,Me=!1,ke=!1;return r.add({target:e,listeners:ye}),{destroy:function(){D(),P(),r.remove({target:e,listeners:ye}),function(e){if(e){for(var t=0;t<e.length;t++)e[t].destroy();q(-1),e=[]}}(Se)}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i;r=[n(6),n(21),n(132),n(11),n(133),n(134),n(135)],void 0===(i=function(e,t,n,r,i,o,a){return{create:function(s,u,c,l,d,f,p,E,v){unction g(){M.debugEnabled()&&M.debug("mute"),w&&(w.muted=!0)}unction b(e){d&&t.isExactIOS15&&1===e&&(e=1+1e-7),w&&e&&w.playbackRate!==e&&(M.debugEnabled()&&M.debug("set rate to: "+e),w.playbackRate=e)}function y(e){var t={index:l};switch(e.type){case o.ERROR:t.code=w.error&&"number"==typeof w.error.code?w.error.code:200;break;case o.VOLUME_CHANGE:t.muted=w.muted,t.volume=w.volume;break;case o.CAN_PLAY:t.haveVideo=void 0!==w.videoTracks&&w.videoTracks.length>0,t.haveAudio=void 0!==w.audioTracks&&w.audioTracks.length>0,t.videoWidth=w.videoWidth,t.videoHeight=w.videoHeight}M.debugEnabled()&&M.detail(e.type),(!d||e.type!==o.CAN_PLAY||d&&e.type===o.CAN_PLAY&&!j)&&s.emit("mediaElementProxy."+e.type,t)}unction T(){M.debugEnabled()&&M.debug("iOS11 detected, using iframe hack");var e={name:"h5live-iframe-"+l,frameBorder:0,scrolling:"no",style:{cssText:"z-index: 0;width: 100%;height: 100%;position: absolute;display: none;top: 0;left: 0;"},h5liveIndex:l,h5liveActive:!1};P||(P=c.querySelector('iframe[name="'+e.name+'"]')),P&&P.name===e.name&&(P.contentDocument&&P.contentDocument.body&&P.contentDocument.body.firstChild&&P.contentDocument.body.removeChild(P.contentDocument.body.firstChild),P.removeEventListener("load",_),P.removeEventListener("unload",A),P.parentNode&&P.parentNode.removeChild(P),P=null),O(P=document.createElement("iframe"),e),P.addEventListener("load",_),P.addEventListener("unload",A),c.appendChild(P)}function _(e){var t=e.target.contentDocument.body;t&&(O(t,{style:{height:"100%",width:"100%",overflow:"hidden",position:"absolute",margin:"0",padding:"0"}}),t.firstChild||(t.appendChild(w),r.remove({target:w,listeners:B}),r.add({target:w,listeners:B})))},C,P,D,L,U,M=e.create("MediaElementProxy "+u),k=!1,F=1,x=0,j=!0,B=[];return function(){var e=[o.TIME_UPDATE];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&-1===e.indexOf(o[t])&&B.push({type:o[t],listener:y})}(),function(){var e={id:u,autoplay:!1,controls:!1,playsInline:!0,muted:f,volume:F,style:{backgroundColor:"transparent"},h5liveIndex:l,h5liveActive:!1};switch(v){case"anonymous":case"use-credentials":e.crossOrigin=v}(t.isIOS11||!t.isIOS&&t.mustUseHLS)&&(e.style.width="100vw",e.style.height="100vh"),w=document.getElementById(u),k=!!w,M.debugEnabled()&&M.debug("using "+(k?"external ":"generated ")+"video element"),k?(L=w.parentNode,D=w.style.cssText,w.style.cssText=""):w=document.createElement("video"),O(w,e)}(),C=document.createElement("source"),w.appendChild(C),t.isIOS11||!t.isIOS&&t.mustUseHLS?T():(M.debugEnabled()&&M.debug("appending video to container"),c.appendChild(w),r.add({target:w,listeners:B}),t.isTridentBrowser&&(["scroll","resize"].forEach((),S())),{destroy:play:function(e){M.debugEnabled()&&M.debug("onPlay"),function(e){return new Promise((function(t){d&&(!e||e&&e.data.external)?x||(x=setTimeout((function(){if(x=0,w){try{I(),b(1)}catch(e){}t(e)}}),250)):t(e)}))}(e).then((function e(t){if(d&&(j=!1),w)return n.play(w).then((function(){M.debugEnabled()&&M.debug("play promise resolved"),s.emit(a.PLAY_START_SUCCESS,{index:l}),E=!1})).catch((function(n){M.debugEnabled()&&M.debug("play promise rejected"),n.error.name!==i.NOT_ALLOWED_ERROR||w.muted||!p||E?n.error.name===i.NOT_ALLOWED_ERROR&&w&&w.muted&&E&&(M.debugEnabled()&&M.debug("unmute to reset"),m(),w.muted||(y({type:o.VOLUME_CHANGE}),E=!1)):(M.debugEnabled()&&M.debug("mute to play"),g(),w&&w.muted&&(E=!0,setTimeout(e.bind(null,{data:{external:!1}}),0))),(t&&t.data&&!t.data.external||E)&&s.emit(a.PLAY_START_ERROR,{error:n.error,automuted:E,index:l})}))}))},pause:function(){M.debugEnabled()&&M.debug("onPause"),w&&(x&&(clearTimeout(x),x=0),w.pause(),d&&(j=!0,R({source:""}),I(),P&&P.tagName&&"IFRAME"===P.tagName&&(P.contentWindow&&P.contentWindow.location?P.contentWindow.location.reload(!0):T())),b(1))},loadVideo:I,setSource:R,setType:setVolume:function(e){w&&!isNaN(e)&&e>=0&&e<=1&&w.volume!==e&&(M.debugEnabled()&&M.debug("set volume: "+e),w.volume=e)},setMute:g,setUnmute:m,setRate:b,destroyVideo:h,seek:function(e){w&&e&&e.data&&!isNaN(e.data.position)&&e.data.position>=0&&(M.debugEnabled()&&M.debug("seek to: "+e.data.position),w.currentTime=e.data.position)},getVideoPlaybackQuality:function(){return w&&"function"==typeof w.getVideoPlaybackQuality?w.getVideoPlaybackQuality():void 0},getVideoElement:getMediaElementPayload:show:function(){P&&(P.style.display="block",P.style.zIndex=1,N(P,!0)),w&&(w.style.display="block",w.style.zIndex=1,N(w,!0))},hide:function(){P&&(P.style.display="block",P.style.zIndex=0,N(P,!1)),w&&(w.style.display="block",w.style.zIndex=0,N(w,!1))},getIndex:setIndex:showOnTop:function(){M.debugEnabled()&&M.debug("show index "+l+" on top"),P?(P.style.display="block",P.style.zIndex=10):w&&(w.style.display="block",w.style.zIndex=10)}}}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){var e,t;return{play:function(n){return new Promise(()}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){var e="";return{BASE:e,LOAD_START:"loadstart",PROGRESS:"progress",SUSPEND:"suspend",ABORT:"abort",EMPTIED:"emptied",STALLED:"stalled",PLAY:"play",PAUSE:"pause",LOADED_META_DATA:"loadedmetadata",LOADED_DATA:"loadeddata",WAITING:"waiting",ERROR:"error",PLAYING:"playing",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",ENDED:"ended",RATE_CHANGE:"ratechange",DURATION_CHANGE:"durationchange",VOLUME_CHANGE:"volumechange"}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=apply(t,[]))||(e.exports=r)},function(e,t,n){var r,i;r=[n(6),n(20),n(29),n(11),n(107),n(104),n(112),n(106),n(113),n(119),n(26)],void 0===(i=function(e,t,n,r,i,o,a,s,u,c,l){return{create:function(d){function f(e){switch(p.debugEnabled()&&p.debug("media error occured with native code "+e.data.code),e.data.code){case c.MEDIA_ERR_ABORTED:e.data.code=t.MEDIA.ABORTED,e.data.message=n.MEDIA.ABORTED;break;case c.MEDIA_ERR_NETWORK:e.data.code=t.MEDIA.DOWNLOAD_ERROR,e.data.message=n.MEDIA.DOWNLOAD_ERROR;break;case c.MEDIA_ERR_DECODE:e.data.code=t.MEDIA.DECODE_ERROR,e.data.message=n.MEDIA.DECODE_ERROR;break;case c.MEDIA_ERR_SRC_NOT_SUPPORTED:e.data.code=t.MEDIA.NOT_SUPPORTED,e.data.message=n.MEDIA.NOT_SUPPORTED;break;case c.MEDIA_ERR_MEDIA_SOURCE_ENDED:e.data.code=t.MEDIA.MEDIA_SOURCE_ENDED,e.data.message=n.MEDIA.MEDIA_SOURCE_ENDED;break;case c.MEDIA_ERR_HLS_JUMP:e.data.code=t.PLAYER.PLAYBACK_ERROR,e.data.message=n.PLAYER.PLAYBACK_ERROR}(function(e){var t;if(-1===g.indexOf(e))t=!1,p.debugEnabled()&&p.debug("media error with code "+e+" not recoverable, trigger error");else if(E>=m)t=!1,p.debugEnabled()&&p.debug("media error with code "+e+" recoverable, but recover threshold "+m+" reached within "+(E?(Math.floor(performance.now())-h[0])/1e3:0)+" seconds, trigger error");else{for(t=!0,h.push(Math.floor(performance.now()));h[h.length-1]-h[0]>1e3*S;)h.shift();E=h.length,v++;var n=1e3*S-(h[E-1]-h[0]),r=m-E;p.debugEnabled()&&p.debug("recovering from media error "+e+", recovery "+E+"/"+m+" within the last 60 seconds ("+v+" total)"),p.debugEnabled()&&p.debug(r+(r<=1?" recoveries":" recovery")+" allowed within remaining time of "+n/1e3+" seconds"),d.emit(u.RECOVER,{count:E,max:m,total:v,code:e,remainingTime:n})}return t})(e.data.code)||(p.debugEnabled()&&p.debug('trigger "'+u.ERROR+'" with translated code '+e.data.code+' and message "'+e.data.message+'"'),d.emit(u.ERROR,e.data))}var p=e.create("MediaErrorHandler"),E=0,v=0,h=[],g=[t.MEDIA.DECODE_ERROR,t.MEDIA.MEDIA_SOURCE_ENDED,t.PLAYER.PLAYBACK_ERROR],m=3,b=0,y=1/0,S=60,T=[{type:a.ERROR,listener:f},{type:s.ERROR,listener:f},{type:o.ERROR,listener:f},{type:i.APPLICATION_STATE_CHANGE,listener:function(e){switch(e.data.state){case l.PAUSED:!function(){for(p.debugEnabled()&&p.debug("reset media error recover values");h.length;)h.shift();E=0,v=0}();case l.PLAYING:}}},{type:i.CONFIG,listener:function(e){m=isNaN(e.data.config.playback.mediaErrorRecoveries)?0:function(e,t,n){return isNaN(n)?0:Math.min(t,Math.max(e,n))}(b,y,e.data.config.playback.mediaErrorRecoveries)}}];return p.debugEnabled()&&p.debug("initialize"),r.add({target:d,listeners:T}),{destroy:}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(){return{create:function(e,t,n){eturn function(){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.on(t[n],r)}(),{destroy:function(){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.off(t[n],r)}}}}}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(){function e(){}etTimeout;return t.prototype.catch=t.prototype.then=t.all=t.resolve=t.reject=t.race=t._immediateFn="function"==typeof window.setImmediate&&function(e){window.setImmediate(e)}||t._unhandledRejectionFn=t._setImmediateFn=function(e){t._immediateFn=e},t._setUnhandledRejectionFn=function(e){t._unhandledRejectionFn=e},void 0===window.Promise&&(window.Promise=t),window.Promise}.apply(t,[]))||(e.exports=r)}])},5792:6435:243:function(e,t,n){n(5753),e.exports=n(1481).Array.flatMap},13:function(e,t,n){n(61),e.exports=n(1481).Array.includes},3500:function(e,t,n){n(3202),e.exports=n(1481).Object.entries},6694:function(e,t,n){n(9649),e.exports=n(1481).Object.getOwnPropertyDescriptors},5424:function(e,t,n){n(4153),e.exports=n(1481).Object.values},7943:97:function(e,t,n){n(4427),e.exports=n(1481).String.padEnd},2890:function(e,t,n){n(2980),e.exports=n(1481).String.padStart},1249:function(e,t,n){n(9069),e.exports=n(1481).String.trimRight},509:8710:1654:160:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},8806:function(e,t,n){var r=n(2509);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},788:function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},9557:function(e,t,n){var r=n(160);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},2401:function(e,t,n){e.exports=!n(7747)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},9547:function(e,t,n){var r=n(2509),i=n(9444).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},5624:7747:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},9444:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},8121:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},9481:function(e,t,n){var r=n(8497),i=n(7468);e.exports=n(2401)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},7959:function(e,t,n){e.exports=!n(2401)&&!n(7747)((function(){return 7!=Object.defineProperty(n(9547)("div"),"a",{get:function(){return 7}}).a}))},2509:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},8497:function(e,t,n){var r=n(8806),i=n(7959),o=n(7163),a=Object.defineProperty;t.f=n(2401)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},7468:7163:2142:895:6826:9120:9267:2095:6515:5302:6158:7419:1415:7186:3865:5050:868:314:2399:7493:987:9554:1481:2250:1330:5823:5048:6182:7967:7536:5216:9284:4351:3082:6966:2467:2625:6483:7785:2994:9851:5395:4077:7639:4270:1890:7830:7001:5708:3818:6716:6208:5059:6011:6977:9792:8572:1382:4902:177:3580:6407:5290:5072:6171:7764:2422:6115:9191:1848:4279:2651:9185:6523:3464:3839:5540:4538:3750:5273:7749:775:8280:3737:9659:7189:7009:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},1319:3573:5146:8295:6936:67:6616:4564:7833:3901:,2783,3815,4470,8397,926,3759,2178,6479rts=l(m,e,e,t){ Rang(e){r;e.exreturports=function(e){return Object(r(e))}},9604:function(e,t,n){var r=n(6208);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't conf(_,g.VIEWxport0===enavig recerAt(0)||e in t||s(t,e,{value:a.f(e)})}}&o[e]return e[i]||e["@@iterator"]||o[r(e)]}},1424:function(e,t,n){var r=n(4351);r(r.P,"Array",{copyWithin:n(5302)}),n(9120)("copyWithin")},504:function(e,t,n){"use strict";var r=n(4351),i=n(1415)(4);r(r.P+r.F*!n(3815)([].every,!0),"Array",{every:function(eArray",{fill:n(6158)}),n(9120)("fill")},746:function(e,t,n){"use strict";var r=n(4351),i=n(1415)(2);r(r.P+r.F*!n(3815)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},7018:function(e,t,n){"use strict";var r=n(4351),i=n(1415)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?ah>1?aon(e)g],!0rguments)||0:i(this,e,arguments[1])}})},3777:function(e,t,n){var r=n(4351)ray,rrn o.in t&&t[r]===e)return r||0;return-1}})},2277:function(e,t,n){"use strict";var r=n(4351),i=n(1415)(1);r(r.P+r.F*!n(3815)([].map,!0),"Array",{map:function(e)arguments[e++]);return n.length=t,n}})},272:function(e,t,n){"use strict";var r=n(4351),i=n(7186);r(r.P+r.F*!n(3815)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,are,arthis.on(e.call(o(this)):s.call(o(this),i(e))}})},6531nctioISOStn||isprotoll(this);return e==e?o.call(this):i}))},2601:function(e,t,n){var r=n(4351his.phis).n r.dog(e)(-t):0==(en i(efloorfunct+r.F*(i!=Math.expm1),"Math",{expm1:i})},3087:function(e,t,n){var r=n(435n;ret((n&rn(e){return Math.log(e)*Math.LOG10E}})},3696:function(e,t,n){var r=n(43tion(e){return Math.log(e)/Math.LN2}})},8981:function(e,t,n){var r=n(4(-e))=1/returtype=.S,"Nn(e){return"number"==typeof e&&i(e)}})},1583:function(e,t,n){var r=n(4351);r(ber",retur",{MA,{MIN_SAFE_INTEGER:-9007199254740991})},7299:function(e,t,n){var r=n(4351),i=n(8280);r(r.S+r.F*(Number.parseFer.pa.slicrn vo);r(r.S+r.F,"Object",{assign:n(6115)})},9336:function(e,t,n){var r=n(4351)),"Ob),"Object",{defineProperty:n(1848).f})},5719:function(e,t,n){var r=n(6208),i=n(6171).onFreeze;n(5273)("freeze",(function(e){return functiourn fNames",(function(){return n(9185).f}))},4735:function(e,t,n){var r=n(4325),i=n(3839);n(5273)("getPrototypeOf",(function(){retunction(t){return!!r(t)&&(!e||e(t))}}))},8611:function(e,t,n){var r=n(6208);n(5273)("isFrozen",(function(e){return functfunction(t){return!r(t)||!!e&&e(t)}}))},6482:function(e,t,n){var r=n(4{return function(e){return i(r(e))}}))},8546:function(e,t,n){var r=n(6208),i=n(6171).onFreeze;n(5273)("preventExtensions",(function(e){return functionctioS,"Obn(){return"[object "+r(this)+"]"}),!0)},5815:function(e,t,n){var r=n(4351),i=n(8280);r(r.G+r.;r(r.}))})(n);rn.apprn r.n!(n&umeraor:futotypl):vot",{le:function(e){return i(e),!o||o(e)}})},7188:function(e,t,n){var r=n(4351);eturnrn i.oid 0(3573roto:"fndex)s=o[l.la=S=A&&u((.def(i(this,"Set"),e=0===e?0:e,e)}},r)},9730:function(e,t,n){"use strict";n(926)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},9250:function(e,t,n){"use strict";n(926)("big",(function(e){return function(){return e(this,"big","","")}}))},6574:function(e,t,n){"use strict";n(926)("blink",(function(e){return function(){return e(this,"blink","","")}}))},7485:function(e,t,n){"use strict";n(926)("bold",(function(e){return functiointAll(t,c,u):t.slice(u-c.length,u)===c}})},5471:function(e,t,n){"use strict";n(926)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},9452:function(e,t,n){"use strict";n(926)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},9425:function(e,t,n){"use strict";n(926)("fontsize",(function(e){return function(t){r0),t%ments.length>1?arguments[1]:void 0)}})},1176:function(e,t,n){"use strict";n(926)("italics",(function(e){return functihis.ion(tng(ar4351);r(r.P,"String",{repeat:n(2178)})},7157:function(e,t,n){"use strict";n(926)("small",(function(e){return function()ll(t,r,n):t.slice(n,n+r.length)===r}})},4722:function(e,t,n){"use strict";n(926)("strike",(function(e){return function(){return e(this,"strike","","")}}))},3857:function(e,t,n){"use strict";n(926)("sub",(function(e){return functionctionretur,d(Ma.getU4049).ABV,{DataView:n(1687).DataView})},1082:function(e,t,n){n(1650)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},3987:function(e,t,n){n(1650)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},8160:function(e,t,n){n(1650)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},883:function(e,t,n){n(1650)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},1899:function(e,t,n){n(1650)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},7617:function(e,t,n){n(1650)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9627:function(e,t,n){n(1650)("Uint32",4,(function(e){return functionctioion(t?thiseturn,arents[1]:void 0)}}),n(9120)("includes")},3202:function(e,t,n){var r=n(4351),i=n(7749)(!0);r(r.S,"Object",{en=u(rct",()).then((function(){throw n}))}:e)}})},4427:function(e,t,n){"use strict";var r=n(4351),i=n(3759),o=n(4986),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.lets.length>1?arguments[1]:void 0,!0)}})},1381:function(e,t,n){"use strict";n(6479)("trimLeft",(function(e){return function()ctionnctio=f,m)mediaimeou226),At(r)&&t(eng?a.tion("all"object"==typeof window)return window}}(),function(){"use strict";n(25);var e="ERROR_CANNOT_SERIALIZE";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,a(e,t,"get"))}function o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,a(e,t,"set"),n),n}function a(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}ropearguments[1]:{};return{type:e,value:t}},(u="eventPayloadFactory")in(s=f)?Object.defineProperty(s,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[u]=c;var p=f,E={prefix:{color:"",backgroundCave a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){_(e,t),t.add(e)}function T(e,t,n){_(e,t),t.set(e,n)}function _(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function A(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,R(e,t,"get"))}function O(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function R(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var I=new WeakMap,N=new WeakMap,w=new WeakSet,C=new WeakSet,P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,C),S(this,w),T(this,I,{writable:!0,value:vofield");t.value=n}})(e,R(e,t,"set"),n)}(this,I,m(m({},E),t)),O(this,C,L).call(this),this.prefix=O(this,w,D).call(this),this.preargs=[],this.prefix&&this.preargs.push(this.prefix),A(this,N).length&&this.preargs.push(A(this,N).join("")),this.prefix.separator&&this.preargs.push(this.prefix.separator)}var t,n;return t=e,(n=[{key:"log",value:function(){var e;if(this.enabled&&this.levels.includes("log")){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,v(this.preargs).concat(n))}}},{key:"warn",value:function(){var e;if(this.enabled&&this.levels.includes("warn")){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).warn.apply(e,v(this.preargs).concat(n))}}},{key:"error",value:function(){var e;if(this.enabled&&this.levels.includes("error")){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,v(this.pfo.apply(e,v(this.preargs).concat(n))}}}])&&y(t.prototype,n),Object.defineProll!=s?s:["log","info","warn","error"]}n.g.Logger=P;var U=P;var M=n(8762),k={PAUSED_VIDEO:"PAUSED_VIDEO",RESUMED_VIDEO:"RESUMED_VIDEO",CAN_PLAY:"CAN_PLAY",FIRST_CAN_PLAY:"FIRST_CAN_PLAY",VIDEO_ERROR:"VIDEO_ERROR",PLAYBACK_ENDED:"PLAYBACK_ENDED",PLAYBACK_FAILED:"PLAYBACK_FAILED",TIME_UPDATE:"TIME_UPDATE",PLAYER_RESET:"PLAYER_RESET",PLAYER_VERSION:"PLAYER_VERSION",MEDIA_INFO:"MEDIA_INFO",ERROR:"ERROR",MESSAGE:"MESSAGE",MUTED:"MUTED",UNMUTED:"UNMUTED",SET_VOLUME:"SET_VOLUME",USER_INTERACTION_REQUIRED:"USER_INTERACTION_REQUIRED"},F={parentId:"",videoId:"",baseUrl:"",settings:{autoPlay:!1,muted:!0,lazy:!1,loop:!1,waitForLoad:!1},logger:{}};function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){Q(e,t),t.add(e)}function q(e,t,n){Q(e,t),t.set(e,n)}function Q(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function X(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ee(e,t,"get"))}function Z(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ee(e,t,"set"),n),n}function ee(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var te=new WeakMap,ne=new WeakMap,re=new WeakMap,ie=new WeakMap,oe=new WeakMap,ae=new WeakMap,se=new WeakMap,ue=new WeakMap,ce=new WeakSet,le=new WeakSet,de=new WeakMap,fe=new WeakMap,pe=new WeakMap,Ee=new WeakMap,ve=new WeakMap,he=new WeakMap,ge=new WeakSet,me=new WeakSet,be=new WeakSet,ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var i=K(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return V(this,n)}}(i);function i(e){var t,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),z(Y(a=r.call(this)),be),z(Y(a),me),z(Y(a),ge),z(Y(a),le),z(Y(a),ce),q(Y(a),te,{writable:!0,value:{}}),q(Y(a),ne,{writable:!0,value:void 0}),q(Y(a),re,{writable:!0,value:void 0}),q(Y(a),ie,{writable:!0,value:void 0}),q(Y(a),oe,{writable:!0,value:void 0}),q(Y(a),ae,{writable:!0,value:1}),q(Y(a),se,{writable:!0,value:!1}),q(Y(a),ue,{writable:!0,value:!1}),q(Y(a),de,{writable:!0,value:function(){var e;null===(e=X(Y(a),ne))||void 0===e||e.log("<Video:Play>"),Z(Y(a),ue,!0),a.emit(k.MESSAGE,{type:k.RESUMED_VIDEO})}}),q(Y(a),fe,{writable:!0,value:function(){var e;null===(e=X(Y(a),ne))||void 0===e||e.log("<Video:Pause>"),Z(Y(a),ue,!1),a.emit(k.MESSAGE,{type:k.PAUSED_VIDEO})}}),q(Y(a),pe,{writable:!0,value:function(){var e;null===(e=X(Y(a),ne))||void 0===e||e.log("<Video:CanPlay>"),J(Y(a),ge,_e).call(Y(a)),X(Y(a),se)||(Z(Y(a),se,!0),a.loop&&Z(Y(a),ae,X(Y(a),ae)+1),a.emit(k.MESSAGE,{type:k.FIRST_CAN_PLAY})),a.emit(k.MESSAGE,{type:k.CAN_PLAY})}}),q(Y(a),Ee,{writable:!0,value:function(){var e;null===(e=X(Y(a),ne))||void 0===e||e.log("<Video:Ended>"),Z(Y(a),ue,!1),a.emit(k.MESSAGE,{type:k.PLAYBACK_ENDED})}}),q(Y(a),ve,{writable:!0,value:function(){var e;if(a.videoElement){var t=a.videoElement.currentTime.toFixed(3);null===(e=X(Y(a),ne))||void 0===e||e.log("<Video:TimeUpdate>",t),a.emit(k.MESSAGE,{type:k.TIME_UPDATE,value:t})}}}),q(Y(a),he,{writable:!0,value:function(e){var t;null===(t=X(Y(a),ne))||void 0===t||t.error("<Video:Error>",e),Z(Y(a),ue,!1),a.pause(),a.emit(k.ERROR,{type:k.VIDEO_ERROR,value:{error:e}})}}),Z(Y(a),te,G(G({},F),e)),Z(Y(a),re,null),Z(Y(a),ie,null),Z(Y(a),oe,!1),null!==(t=X(Y(a),te))&&void 0!==t&&t.logger&&Z(Y(a),ne,new U({prefix:G({value:"[ ".concat(i.name,"@").concat("0.2.3"," ]")},X(Y(a),te).logger.prefix)}));var s,u,c=X(Y(a),te).parentId;return c?(a.parentElement=document.getElementById(c),a.parentElement?(null!==(n=X(Y(a),te))&&void 0!==n&&null!==(o=n.settings)&&void 0!==o&&o.lazy||a.init(),a):(null===(u=X(Y(a),ne))||void 0===u||u.error("Cannot determine parent element."),a.emit(k.ERROR,{message:"Cannot determine parent element."}),V(a))):(null===(s=X(Y(a),ne))||void 0===s||s.error("Parent id is missing"),a.emit(k.ERROR,{message:"Parent id is missing."}),V(a))}return t=i,(n=[{key:"parentElement",get:function(){return X(this,re)},set:function(e){Z(this,re,e)}},{key:"videoElementthis,ie)},set:function(e){Z(this,ie,e)}},{key:"loop",get:function(){var e,t;return null===(e=X(this,te))||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.loop}},{key:"init",value:function(){var e,t;X(this,oe)?(null===(e=X(this,ne))||void 0===e||e.error("Instance is already initialized"),this.emit(k.ERROR,{message:"Instance already inited."})):(null===(t=X(this,ne))||void 0===t||t.log("<Init>",X(this,te)),Z(this,oe,!0),J(this,be,Oe).call(this))}},{key:"destroy",value:function(){var e,t,n,r;if(this.videoElement){var i;if(!X(this,oe))return null===(i=X(this,ne))||void 0===i||i.error("Cannot call destroy if instance has not been initialized"),void this.emit(k.ERROR,{message:"Cannot destroy."});null===(e=X(this,ne))||void 0===e||e.log("<Destroy>"),null===(t=X(this,ne))||void 0===t||t.log("Removing event handlers"),this.videoElement.removeEventListener("load",J(this,ce,Se)),this.videoElement.removeEventListener("play",X(this,de)),this.videoElement.removeEventListener("pause",X(this,fe)),this.videoElement.removeEventListener("canplay",X(this,pe)),this.videoElement.removeEventListener("ended",X(this,Ee)),this.videoElement.removeEventListener("timeupdate",X(this,ve)),this.videoElement.removeEventListener(k.ERROR,X(this,he)),null===(n=X(this,ne))||void 0===n||n.log("Removing video element",this.videoElement),this.parentElement.removeChild(this.videoElement),this.videoElement=null,Z(this,oe,!1),Z(this,ue,!1),Z(this,ae,0),null===(r=X(this,ne))||void 0===r||r.log("<Player Reset>"),this.emit(k.MESSAGE,{type:k.PLAYER_RESET})}}},{key:"load",value:function(e){var t,n,r,i,o,a,s,u=e.performerId,c=e.src;if(!X(this,oe))return null===(o=X(this,ne))||void 0===o||o.error("Player is not initiated."),void this.emit(k.ERROR,{message:"Player is not initiated."});if(!u&&!c)return null===(a=X(this,ne))||void 0===a||a.error("Cannot play, missing mandatory data.",{performerId:u,src:c}),void this.emit(k.ERROR,{message:"Cannot play, missing mandatory data."});if(X(this,ue)&&this.stop(),Z(this,se,!1),null!==(t=X(this,te))&&void 0!==t&&null!==(n=t.settings)&&void 0!==n&&n.waitForLoad&&this.videoElement.addEventListener("load",J(this,ce,Se)),c)null===(s=X(this,ne))||void 0===s||s.log("<Video Source>",c),this.videoElement.src=c;else if(u){var l,d=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.performerId,i=void 0===r?"":r,o=e.seconds,a=((e=30)=>{let t=10*Math.floor(e/10);return 0===t?t=50:30===t&&(t=20),t})(void 0===o?30:o);return(({baseUrl:e,hash:t,performerId:n,segment:r})=>{if(e&&t&&n&&r)return`${e}/${t[0]}/${n}/${n}.${r}.mp4`;console.error("There are missing mandatory parameters, we cannot determine source")})({baseUrl:n,hash:M(i),performerId:i,segment:a})}({performerId:u,baseUrl:X(this,te).baseUrl});this.videoElement.src=d,null===(l=X(this,ne))||void 0===l||l.log("<Video Source>",d)}Z(this,ae,0),null!==(r=X(this,te))&&void 0!==r&&null!==(i=r.settings)&&void 0!==i&&i.waitForLoad||J(thi:"play",value:function(){this.resume()}},{key:"resume",value:function(){var e,t=this;if(!this.videoElement)return null===(e=X(this,ne))||void 0===e||e.error("Cannot play, video element is missing."),void this.emit(k.ERROR,{message:"Cannot play, video element is missing."});X(this,ue)||this.videoElement.play().catch((function(e){var n;Z(t,ue,!1),null===(n=X(t,ne))||void 0===n||n.error("<PreRoll:Error",e),t.emit(k.ERROR,{type:e.name,value:e})}))}},{key:"pause",value:function(){this.videoElement.removeEventListener("load",J(this,ce,Se)),X(this,ue)&&this.videoElement&&(this.videoElement.pauhis.pause(),this.destroy(),this.init()}},{key:"mute",value:function(){this.videoElement&&(this.emit(k.MESSAGE,{type:k.MUTED}),this.videoElement.muted=!0)}},{key:"unmute",value:function(){this.videoElement&&(this.emit(k.MESSAGE,{type:k.UNMUTED}),this.videoElement.muted=!1)}},{key:"volume",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;"number"==typeof t?this.videoElement&&(this.emit(k.MESSAGE,{type:k.SET_VOLUME,value:t}),this.videoElement.volume=t):null===(e=X(this,ne))||void 0===e||e.error("Volume should be a number like",.7)}},{key:"enableLoop",value:function(){X(this,te).settings.loop=!0}},{key:"disableLoop",value:function(){X(this,te).settings.loop=!1}}])&&H(t.prototype,n),Object.definePropfunction Se(){J(this,le,Te).call(this)}function Te(){var e,t;null!==(e=X(this,te))&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.autoPlay&&this.play()}function _e(){var e,t={orientation:J(this,me,Ae).call(this),duration:this.videoElement.duration};this.loop&&(t.loopCount=X(this,ae));var n=p.eventPayloadFactory(k.MEDIA_INFO,t);null===(e=X(this,ne))||void 0===e||e.info("<Media Info>",n),this.emit(k.MESSAGE,n)}function Ae(){var e;if(this.videoElement){var t,n=this.videoElement.videoWidth>=this.videoElement.videoHeight?"landscape":"portrait";return null===(t=X(this,ne))||void 0===t||t.log("<Orientation Detection>",n),n}return null===(e=X(this,ne))||void 0===e||e.error("Cannot detect orientation because video element is missing"),!1}function Oe(){var e,t,n,r,i,o,a,s,u,c,l=document.createElement("video"),d=[];d.playsinline="playsinline",d["webkit-playsinline"]="webkit-playsinline",null!==(e=X(this,te))&&void 0!==e&&e.videoId&&(d.id=X(this,te).videoId),null!==(t=X(this,te))&&void 0!==t&&null!==(n=t.settings)&&void 0!==n&&n.muted&&(d.muted="",l.muted=!0),null!==(r=X(this,te))&&void 0!==r&&null!==(i=r.settings)&&void 0!==i&&i.loop&&(d.loop="",l.loop=!0),null!==(o=X(this,te))&&void 0!==o&&null!==(a=o.settings)&&void 0!==a&&a.autoPlay&&null!==(s=X(this,te))&&void 0!==s&&null!==(u=s.settings)&&void 0!==u&&u.waitForLoad&&(d.autoplay="autoplay",l.autoplay=!0),Object.entries(d).forEach((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1],i=void 0===r?"":r;l.setAttribute(n,i)})),this.parentElement.appendChild(l),this.videoElement=this.parentElement.querySelector("video"),null===(c=X(this,ne))||void 0===c||c.log("<VideoElement Created>",this.videoElement),this.videoElement.addEventListener("play",X(this,de)),this.videoElement.addEventListener("pause",X(this,fe)),this.videoElement.addEventListener("canplay",X(this,pe)),this.videoElement.addEventListener("ended",X(this,Ee)),this.videoElement.addEventListener("timeupdate",X(this,ve)),this.videoElement.addEventListener("error",X(this,he))}$(ye,"name","LivePreRollPlayer"),$(ye,"version","0.2.3"),$(ye,"events",G({},k)),window.LivePreRollPlayer=ye,n(2962);var Re=JSON.parse('{"i8":"0.4.10","ky":"RelayConnector"}'),Ie={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},Ne={INIT_PARAMS:"initParams",SET_PERF_BIRTHDAY:"setPerfBirthday",SET_COMMON_DATA:"setCommonData",CHAT_HISTORY:"chatHistory",SET_MEMBER_NAME:"setName",INIT_VIP_SHOW:"initVipShow",STOP_VIP_SHOW:"stopVipShow",ADD_LINE:"addLine",SHOW_GUEST_TIMEOUT:"showGuestTimeoutPopup",CLOSE_CONNECTION:"closeConnection",SEND_LINE:"sendLine",SET_VIDEO_DATA:"setVideoData"},we={MESSAGE:"MESSAGE",SOCKET_CONNECTED:"CONNECTED",SOCKET_DISCONNECTED:"DISCONNECTED",SOCKET_ERROR:"SOCKET_ERROR",STATE_REPORT:"STATE_REPORT",RELAY_CONNECTED:"RELAY_CONNECTED",STREAM_LIST:"STREAM_LIST",IS_MOBILE:"IS_MOBILE",IS_PRIVATE:"IS_PRIVATE",HAS_SOUND:"HAS_SOUND",UNHANDLED_EVENT:"UNHANDLED_EVENT",UNHANDLED_SO_ENTRY:"UNHANDLED_SO_ENTRY",UPDATE_SO:"UPDATE_SO",STREAM_INFO_DATA:"STREAM_INFO_DATA",INTERACTIVE_TOY_STATUS:"INTERACTIVE_TOY_STATUS",ROOM_TOPIC:"ROOM_TOPIC",KING_OF_THE_ROOM:"KING_OF_THE_ROOM",HOT_SHOW_AVAILABLE:"HOT_SHOW_AVAILABLE",C2C_ENABLED:"C2C_ENABLED",FUNCTION_CALL:"FUNCTION_CALL",RUNNING_SHOW_TYPE:"RUNNING_SHOW_TYPE",HOT_DEAL:"HOT_DEAL"},Ce={jsm2SessionId:"",clientInstanceId:"",url:"",connection:{brandID:"",cobrandId:"",sessionID:"",siteName:"",subbrand:"",isPassive:!1},registration:{userType:"",chatID:"",clientRevision:"",gravityCookieId:"",passparam:"",playerVer:"",jasmin2App:!0,livefeedtype:null,livejasminTvmember:!1,newApplet:!0,isPassive:!1,sessionID:"",promotoolsPlayerVersion:""},logger:{},settings:{subscriptions:{chatHistory:!1,chatSO:[]}}};function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configind((function(e){return e.isDefault}))},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1280,n=arguments.length>2&&void 0!==argumon(e){return e.width===t&&e.height===n}))||Ue(e)},ke=function(e){var t=e.performerId,n=e.sbHash,r=e.roomNamePrefix;return"memberChat/".concat(void 0===r?"jasmin":r).concat(t).concat(n)};function Fe(e){var t=e.message;e.logger.log("<State Report>",t.data),this.fireEvent(we.STATE_REPORT,t.fmsIp)}function xe(e){var t=e.message;e.logger.log("<Verification Accept>",t.fmsIp),this.fireEvent(we.RELAY_CONNECTED,t.fmsIp);var n={event:"connectSharedObject",data:{name:"data/chat_so"}};this.sendPayload(n)}function je(e){var t=e.message;e.logger.log("<Function Call>",t.funcName,t);var n=t.funcName,r=t.data;this.fireEvent(we.FUNCTION_CALL,{funcName:n,data:r})}function Be(e){var t,n,r=this,i=e.message,o=e.config,a=e.logger;a.log("<Update SO>",i.name,i),this.fireEvent(we.UPDATE_SO,i);var s=(null==o||null===(t=o.settings)||void 0===t||null===(n=t.subscriptions)||void 0=(function(e){return s.includes(e.name)})).forEach((function(e){var t,n,i=e.oldValue,s=e.newValue,u="",c="";switch(e.name){case"streamList":u=function(e){var t=e.patterns,n=void 0===t?{}:t,r=e.streams,i=void 0===r?[]:r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=n.free,s=void 0===a?null:a,u=o?Me(i,null==o?void 0:o.width,null==o?void 0:o.height):Ue(i);if(s)return s.replace("{$streamname}",u.name);throw new Error("Cannot compose stream name.")}({patterns:s.patterns,streams:s.streams},null==o||null===(t=o.settings)||void 0===t?void 0:t.resolution),(c=function(e){var t=e.streams,n=void 0===t?[]:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=(r?Me(n,null==r?void 0:r.width,null==r?void 0:r.height):Ue(n)).streamId;return void 0===i?null:i}({streams:s.streams},null==o||null===(n=o.settings)||void 0===n?void 0:n.resolution))||a.error("<Update SO:StreamList> Cannot determine stream id"),r.fireEvent(we.STREAM_LIST,{prev:i,current:s,streamName:u,streamId:c});break;case"hasSound":r.fireEvent(we.HAS_SOUND,{prev:i,current:s});break;case"isMobile":r.fireEvent(we.IS_MOBILE,{prev:i,current:s});break;case"isPrivate":r.fireEvent(we.IS_PRIVATE,{prev:i,current:s});break;case"streamInfoData":r.fireEvent(we.STREAM_INFO_DATA,{prev:i,current:s});break;case"interactiveToyStatus":r.fireEvent(we.INTERACTIVE_TOY_STATUS,{prev:i,current:s});break;case"roomTopic":r.fireEvent(we.ROOM_TOPIC,{prev:i,current:s});break;case"kingOfTheRoom":r.fireEvent(we.KING_OF_THE_ROOM,{prev:i,current:s});break;case"hotShowAvailable":r.fireEvent(we.HOT_SHOW_AVAILABLE,{prev:i,current:s});break;case"c2cEnabled":r.fireEvent(we.C2C_ENABLED,{prev:i,current:s});break;case"runningShowType":r.fireEvent(we.RUNNING_SHOW_TYPE,{prev:i,current:s});break;case"hotDeal":r.fireEvent(we.HOT_DEAL,{prev:i,current:s});break;default:a.log("<Unhandled Shared Object entry>",e),r.fireEvent(we.UNHANDLED_SO_ENTRY,e)}}))}function Ge(e){var t=e.message;e.logger.log("<Unhandled Event>",t),this.fireEvent(we.UNHANDLED_EVENT,t)}var He=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"],We=/Android|webOS|iPhone|iPad|iunc(){return We.test(navigator.userAgent)},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"000_0",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return"".coction(){return e.apply(void 0,i)}),n)}};function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==ave a [Symbol.iterator]() method.")}()}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getmped)?Array$/.test(n)?et(e,t):void 0}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function it(e,t){if(t&&("object"===qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e._ twice on an object")}(e,t),t.set(e,n)}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,dt(e,t,"get"))}function lt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,dt(e,t,"set"),n),n}function dt(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ft=Re.i8,pt=Re.ky,Et=new WeakMap,vt=new WeakMap,ht=new WeakMap,gt=new WeakMap,mt=new WeakMap,bt=new WeakMap,yt=new WeakMap,St=new WeakMap,Tt=new WeakMap,_t=new WeakMap,At=new WeakMap,Ot=new WeakMap,Rt=new WeakMap,It=new WeakMap,Nt=new WeakMap,wt=new WeakMap,Ct=new WeakMap,Pt=new WeakMap,Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=at(e);if(t){var i=at(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return it(this,n)}}(i);function i(e){var t,n,o,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),st(ot(s=r.call(this,e)),Et,{writable:!0,value:{}}),st(ot(s),vt,{writable:!0,value:null}),st(ot(s),ht,{writable:!0,value:""}),st(ot(s),gt,{writable:!0,value:null}),st(ot(s),mt,{writable:!0,value:null}),st(ot(s),bt,{writable:!0,value:null}),st(ot(s),yt,{writable:!0,value:!1}),st(ot(s),St,{writable:!0,value:!1}),ut(ot(s),"connect",(function(e){var t,n;lt(ot(s),gt,e);var r=ct(ot(s),gt),i=r.sbIp,o=r.sbHash,a=r.performerId,u=r.relayUrl;null===(t=ct(ot(s),bt))||void 0===t||t.log("<Connection Requested>",i,o,a),lt(ot(s),ht,u||ct(ot(s),Tt).call(ot(s),{sbIp:i,sbHash:o,performerId:a})),null===(n=ct(ot(s),bt))||void 0===n||n.info("<Socket Url>",ct(ot(s),ht)),ct(ot(s),_t).call(ot(s))})),ut(ot(s),"disconnect",(function(){var e,t;ct(ot(s),yt)?(null===(e=ct(ot(s),bt))||void 0===e||e.log("<Disconnect Requested>"),ct(ot(s),Ct).call(ot(s))):null===(t=ct(ot(s),bt))||void 0===t||t.warn("<Disconnect Request Failed> Cannot disconnect because its not {tt(o,r,i,a,s,"throw",e)}a(void 0)}))}}(regeneratorRuntime.mark((function e(){var t,n,r,i,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:[],n=o.length>1&&void 0!==o[1]?o[1]:[],!ct(ot(s),yt)){e.next=8;break}if(null===(r=ct(ot(s),bt))||void 0===r||r.log("Getting video data from relay"),t.length&&n.length){e.next=6;break}throw new Error("Cannot get video data, protocols and/or streamIds are missing.");case 6:return i={event:"call",funcName:"getVideoData",data:[Xe(t)].concat(Xe(n))},e.abrupt("return",new Promise((function(e,t){try{s.addEventListener(we.MESSAGE,(function t(n){var r=n.event,i=void 0===r?"":r,o=n.data,a=void 0===o?{}:o;i===we.FUNCTION_CALL&&(null==a?void 0:a.funcName)===Ne.SET_VIDEO_DATA&&(s.removeEventListener(we.MESSAGE,t),e(null==a?void 0:a.data))})),s.sendPayload(i)}catch(e){t(e)}})));case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))),ut(ot(s),"sendPayload",(function(e){var t,n=e.event,r=void 0===n?"":n,i=e.funcName,o=void 0===i?"":i,a=e.data,u=void 0===a?{}:a;if(!r)throw new Error("Cannot send data without an event identifier");var c=Je(Je({event:r},Array.isArray(u)?{data:u}:u),o?{funcName:o}:{}),l=JSON.stringify(c);null===(t=ct(ot(s),bt))||void 0===t||t.log("<Request:".concat(r,">"),l),ct(ot(s),vt).send(l)})),st(ot(s),Tt,{writable:!0,value:function(e){var t=e.sbIp,n=e.sbHash,r=e.performerId;if(!t)throw new Error("SwitchBoard IP is missing");var i=ke({performerId:r,sbHash:n}),o=[["{$sbIpSplit}",Ve(t)],["{$roomName}",iQe(e,2),n=t[0],r=t[1];a=a.replace(n,r)})),a}}),st(ot(s),_t,{writable:!0,value:function(){try{lt(ot(s),vt,new WebSocket(ct(ot(s),ht))),ct(ot(s),vt).addEventListener("open",ct(ot(s),At)),ct(ot(s),vt).addEventListener("close",ct(ot(s),Ot)),ct(ot(s),vt).addEventListener("error",ct(ot(s),Rt)),ct(ot(s),vt).addEventListener("message",ct(ot(s),It))}catch(t){var e;null===(e=ct(ot(s),bt))||void 0===e||e.error(t),ct(ot(s),Ct).call(ot(s))}}}),st(ot(s),At,{writable:!0,value:function(e){var t;lt(ot(s),yt,!0),null===(t=ct(ot(s),bt))||void 0===t||t.log("<Socket Connected>",e),s.fireEvent(i.events.SOCKET_CONNECTED),ct(ot(s),wt).call(ot(s)),ct(ot(s),Nt).call(ot(s),1)}}),st(ot(s),Ot,{writable:!0,value:function(e){var t;lt(ot(s),yt,!1),null===(t=ct(ot(s),bt))||void 0===t||t.log("<Socket Disconnected>",e),s.fireEvent(i.events.SOCKET_DISCONNECTED),ct(ot(s),Ct).call(ot(s))}}),st(ot(s),Rt,{writable:!0,value:function(e){var t;null===(t=ct(ot(s),bt))||void 0===t||t.error("<Error>",e),s.fireEvent(i.events.SOCKET_ERROR,e),ct(ot(s),Ct).call(ot(s))}}),st(ot(s),It,{writable:!0,value:function(e){var t=e.data;try{var n=JSON.parse(t),r={message:n,logger:ct(ot(s),bt),config:ct(ot(s),Et)};switch(n.event){case"stateReport":Fe.call(ot(s),r);break;case"accept":xe.call(ot(s),r);break;case"call":je.call(ot(s),r);break;case"updateSharedObject":Be.call(ot(s),r);break;case"pong":ct(ot(s),Nt).call(ot(s),n.nextPing||500);break;default:Ge.call(ot(s),r)}}catch(e){var i;null===(i=ct(ot(s),bt))||void 0===i||i.error(e)}}}),st(ot(s),Nt,{writable:!0,value:function(e){var t=e.interval,n=void 0===t?2e3:t;clearTimeou){return s.sendPayload({event:"ping"})}),n))}}),st(ot(s),wt,{writable:!0,value:function(){var e,t,n,r;null!==(e=ct(ot(s),Et))&&void 0!==e&&e.armaVersion||null===(t=ct(ot(s),Et))||void 0===t||!t.pstool||(ct(ot(s),Et).armaVersion=Ke(ct(ot(s),Et).pstool,pt,ft),null===(r=ct(ot(s),bt))||void 0===r||r.log("Version hash created:",ct(ot(s),Et).armaVersion));var i={event:"register",data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.registration,r=e.connection,i=e.jsm2SessionId,o=e.clientInstanceId,a=e.armaVersion,s=De(De(De({},n),r),{},{jsm2SessionId:i,clientInstanceId:o,armaVersion:a});return{applicationId:ke(t),connectionData:s}}(ct(ot(s),Et),ct(ot(s),gt))};null===(n=ct(ot(s),bt))||void 0===n||n.log("<Requesting Registration>",i),s.sendPayload(i)}}),st(ot(s),Ct,{writable:!0,value:function(){var e;if(ct(ot(s),St)){var t;null===(t=ct(ot(s),bt))||void 0===t||t.warn("Cannot destroy because it`s already in progress")}else{null===(e=ct(ot(s),bt))||void 0===e||e.log("<Destroy>"),lt(ot(s),St,!0);var n=ct(ot(s),yt)&&ct(ot(s),vt)&&[Ie.CONNECTING,Ie.OPEN].includes(ct(ot(s),vt).readyState);if(lt(ot(s),yt,!1),n)ct(ot(s),vt).close();else{var r,o=Object.entries(Ie).find((function(e){return Qe(e,2)[1]===ct(ot(s),vt).readyState})),a=Qe(o,1)[0];null===(r=ct(ot(s),bt))||void 0===r||r.info("Cannot tear down the socket, because ready state is not open but",a),s.fireEvent(i.events.SOCKET_DISCONNECTED)}ct(ot(s),Pt).call(ot(s))}}}),st(ot(s),Pt,{writable:!0,value:function(){var e,t;null===(e=ct(ot(s),bt))||void 0===e||e.info("<Removing event handlers>"),ct(ot(s),vt).removeEventListener("open",ct(ot(s),At)),ct(ot(s),vt).removeEventListener("close",ct(ot(s),Ot)),ct(ot(s),vt).removeEventListener("error",ct(ot(s),Rt)),ct(ot(s),vt).removeEventListener("message",ct(ot(s),It)),null===(t=ct(ot(s),bt))||void 0===t||t.log("<Clearing heartbeat timer>"),clearTimeout(ct(ot(s),mt))}}),lt(ot(s),Et,Je(Je({},Ce),e)),null!==(t=ct(ot(s),Et))&&void 0!==t&&null!==(n=t.settings)&&void 0!==n&&null!==(o=n.subscriptions)&&void 0!==o&&o.chatHistory&&(ct(ot(s),Et).connection.chatHistoryRequired=!0),lt(ot(s),bt,new U({prefix:Je({value:"[ ".concat(i.name,"@").concat(ft," ]")},ct(ot(s),Et).logger.prefix)})),null===(a=ct(ot(s),bt))||void 0===a||a.info("<Init>",ct(ot(s),Et)),s}return t=i,(n=[{key:"sendMessage",value:function(e){var t=e.msg,n=void 0===t?null:t,r=e.msgKey,i=void 0===r?null:r,o=e.memberType,a=void 0===o?"guest":o,s=e.broadcastOnly,u=void 0===s||s;if(!n&&!i)throw new Error("Invalid message: missing msg and msgKey");var c={event:"call",funcName:Ne.SEND_LINE,data:[{id:Math.random().toString().slice(4),ismobile:Ye(),broadcastOnly:u,msg:n,msgKey:i,memberType:a}]};this.sendPayload(c)}}])&&nt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(p);ut(Dt,"name",pt),ut(Dt,"version",ft),ut(Dt,"events",we),ut(Dt,"functionCalls",Ne);var Lt=Dt,Ut={playerDivId:"",connection:{h5live:"",h5liveHls:"",rtmp:""},nanoCoreConfig:{playback:{},source:{}},settings:{timeout:{interval:5e3},portraitSnapRatio:.6},logger:{}},Mt=function(e){var t=e.element,n=e.rotation,r=void 0===n?0:n,i=e.portraitSnapRatio,o=void 0===i?.6:i,a=function(e){var t,n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=null!==(t=null!==(n=e.videoWidth)&&void 0!==n?n:e.naturalWidth)&&void 0!==t?t:e.width,s=null!==(r=null!==(i=e.videoHeight)&&void 0!==i?i:e.naturalHeight)&&void 0!==r?r:e.height;return o%180!=0?{width:s,height:a}:{width:a,height:s}}(t,r),s=a.width,u=a.height,c=t.parentElement,l=c.offsetWidth,d=c.offsetHeight,f=s/u,p=l/d,E=f>1,v=f<p,h=p*o<=f&&v,g="auto",m="auto";r%180!=0?E?v?m="".concat(l,"px"):g="".concat(d,"px"):h?m="".concat(l,"px"):g="".concat(d,"px"):E?v?g="100%":m="100%":h?g="100%":m="100%",t.style.setProperty("width",g),t.style.setProperty("height",m),t.style.setProperty("flex","0 0 auto"),t.style.setProperty("nce");return t.get(e)}var en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,on=new WeakMap,an=new WeakMap,sn=new WeakMap,un=new WeakMap,cn=new WeakMap,ln=new WeakMap,dn=new WeakMap,fn=new WeakMap,pn=new WeakMap,En=new WeakMap,vn=new WeakSet,hn=new WeakSet,gn=new WeakMap,mn=new WeakMap,bn=new WeakMap,yn=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,_n=new WeakMap,An=new WeakMap,On=new WeakMap,Rn=new WeakMap,In=new WeakMap,Nn=new WeakMap,wn=new WeakMap,Cn=new WeakMap,Pn=new WeakMap,Dn=new WeakSet,Ln=new WeakSet,Un=new WeakSet,Mn=new WeakMap,kn=new,"prototype",{writaply(this,arguments);return Wt(this,n)}}(a);function a(e,t){var n,r,i,s,u=t.playerDivId,c=void 0===u?"":u,l=t.nanoCoreConfig,d=void 0===l?{}:l,f=t.settings,p=void 0===f?{}:fr("Cannot call a class as a function")}(this,a),Kt(Vt(s=o.call(this,e)),Fn),Kt(Vt(s),kn),Kt(Vt(s),Un),Kt(Vt(s),Ln),Kt(Vt(s),Dn),Kt(Vt(s),hn),Kt(Vt(s),vn),zt(Vt(s),en,{writable:!0,value:{}}),zt(Vt(s),tn,{writable:!0,value:null}),zt(Vt(s),nn,{writable:!0,value:null}),zt(Vt(s),rn,{writable:!0,value:null}),zt(Vt(s),on,{writable:!0,value:null}),zt(Vt(s),an,{writable:!0,value:!1}),zt(Vt(s),sn,{writable:!0,value:null}),zt(Vt(s),un,{writable:!0,value:null}),zt(Vt(s),cn,{writable:!0,value:null}),zt(Vt(s),ln,{writable:!0,value:Ye()}),zt(Vt(s),dn,{writable:!0,value:He.includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}),zt(Vt(s),fn,{writable:!0,value:!1}),zt(Vt(s),pn,{writable:!0,value:!1}),zt(Vt(s),En,{writable:!0,value:null}),zt(Vt(s),gn,{writable:!0,value:function(e){var t;switch(null===(t=Jt(Vt(s),tn))||void 0===t||t.error("<NanoCore:Error>",e),e.data.code){case a.NanoCore.errorCodes.PLAYER.INTERACTION_REQUIRED:s.fireEvent(a.events.USER_INTERACTION_REQUIRED),$t(Vt(s),Un,Wn).call(Vt(s),"UserInteractionRequired"),Xt(Vt(s),pn,!1);break;case a.NanoCore.errorCodes.PLAYER.PLAYBACK_SUSPENDED:s.fireEvent(a.events.PLAYBACK_SUSPENDED);break;default:s.fireEvent(a.events.ERROR,e)}}}),zt(Vt(s),mn,{writable:!0,value:function(e){var t;null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<NanoCore:MetaData>",e);var n=e.data.message,r=(void 0===n?{}:n).nanoStreamStatus,i=(void 0===r?{}:r).VideoRotation;void 0!==i&&Jt(Vt(s),rn)!==i&&(s.fireEvent(a.events.ROTATION,i),Xt(Vt(s),rn,null!=i?i:0),Jt(Vt(s),yn).call(Vt(s)))}}),zt(Vt(s),bn,{writable:!0,value:function(){Mt({element:s.videoElement,rotation:Jt(Vt(s),rn),portraitSnapRatio:Jt(Vt(s),En)})}}),zt(Vt(s),yn,{writable:!0,value:ze(Jt(Vt(s),bn).bind(Vt(s)),10)}),zt(Vt(s),Sn,{writable:!0,value:function(e){var t;null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<NanoCore:Play>",e),s.fireEvent(a.events.PLAY,e),$t(Vt(s),hn,Bn).call(Vt(s)),Jt(Vt(s),yn).call(Vt(s)),$t(Vt(s),Un,Wn).call(Vt(s),"StreamResumed")}}),zt(Vt(s),Tn,{writable:!0,value:function(e){var t;null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<NanoCore:Pause>",e),s.fireEvent(a.events.PAUSE,e)}}),zt(Vt(s),_n,{writable:!0,value:function(e){var t;null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<NanoCore:Mute>",e),s.fireEvent(a.events.MUTE,e)}}),zt(Vt(s),An,{writable:!0,value:function(e){var t;null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<NanoCore:Unmute>",e),s.fireEvent(a.events.UNMUTE,e)}}),zt(Vt(s),On,{writable:!0,value:function(e){var t,n=e.data,r=(void 0===n?{}:n).volume,i=void 0===r?null:r;null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<NanoCore:SetVolume>",i),s.fireEvent(a.events.VOLUME_CHANGE,{volume:i})}}),zt(Vt(s),Rn,{writable:!0,value:function(e){var t;null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<NanoCore:Destroy>",e),s.fireEvent(a.events.DESTROY,e)}}),zt(Vt(s),In,{writable:!0,value:function(e){var t,n=e.data,r=(void 0===n?{}:n).streamInfo,i=(void 0===r?{}:r).videoInfo,o=void 0===i?null:i;o&&(null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<StreamInfo>",o),s.fireEvent(a.events.STREAM_INFO,o))}}),zt(Vt(s),Nn,{writable:!0,value:function(){s.fireEvent(a.events.BUFFERING_S){s.fireEvent(a.events.BUFFERING_STOP)}}),zt(Vt(s),Cn,{writable:!0,value:function(){var e;null===(e=Jt(Vt(s),tn))||void 0===e||e.log("<Loading>"),s.fireEvent(a.events.LOADING)}}),zt(Vt(s),Pnave a [Symbol.iterator]() method.")}()}(e,1)[0],r=(void 0===n?{}:n).contentRect,i=r.width,o=r.height;Jt(Vt(s),yn).call(Vt(s)),null===(t=Jt(Vt(s),tn))||void 0===t||t.log("<Resize Observer>",{width:i,height:o,isMobile:s.isMobileStream,rotation:Jt(Vt(s),rn)})}}),zt(Vt(s),Mn,{writable:!0,value:function(e){var t,n=null==e||null===(t=e.data)||void 0===t?void 0:t.stats;s.fireEvent(a.events.STREAM_STATS,n)}}),Xt(Vt(s),en,jt(jt(jt({},Ut),e),{},{nanoCoreConfig:d,playerDivId:c,settings:p,videoId:v})),Xt(Vt(s),En,null===(n=Jt(Vt(s),en))||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.portraitSnapRatio),Xt(Vt(s),tn,new U({prefix:jt({value:"[ ".concat(a.name," ]")},Jt(Vt(s),en).logger.prefix)})),null===(i=Jt(Vt(s),tn))||void 0===i||i.info("<Init>",Jt(Vt(s),en)),s.parentElement=document.getElementById(c),s.parentElement.style.opacity=0,Xt(Vt(s),nn,new a.NanoCore(c)),$t(Vt(s),kn,Vn).call(Vt(s)),s}return t=a,(n=[{key:"videoElement",get:function(){return Jt(this,sn)},set:function(e){void 0===e&&(e=null),Xt(this,sn,e)}},{key:"parentElement",get:function(){return Jt(this,un)},set:function(e){void 0===e&&(e=null),Xteam",get:function(){return Jt(this,an)},set:function(e){void 0===e&&(e=!1),Xt(this,an,e)}},{key:"isDestroying",get:function(){return Jt(this,fn)},set:function(e){Xt(this,fn,e)}},{key:"connect",value:(r=regeneratorRuntime.mark((function e(){var t,n,r,i,o,s,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt(this,nn).setup(Jt(this,en).nanoCoreConfig);case 3:i=e.sent,this.fireEvent(a.events.CONNECT_STREAM_INIT,i),$t(this,Dn,Gn).call(this),$t(this,hn,Bn).call(this),null!==(t=Jt(this,en))&&void 0!==t&&null!==(n=t.nanoCoreConfig)&&void 0!==n&&null!==(r=n.playback)&&void 0!==r&&r.autoplay&&$t(this,Ln,Hn).call(this),o=function e(){Jt(u,nn).off(a.NanoCore.events.PLAY,e),u.fireEvent(a.events.STREAM_STARTED),u.parentElement.style.opacity=1,Xt(u,pn,!0),$t(u,Un,Wn).call(u,"StreamStartedListener")},Jt(this,nn).on(a.NanoCore.events.PLAY,o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),null===(s=Jt(this,tn))||void 0===s||s.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})),i=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){Ft(o,n,i,a,s,"next",e)}function s(e){Ft(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"destroy",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isDestroying?null===(t=Jt(this,tn))||void 0===t||t.warn("Cannot execute stop because its already in progress."):(this.isDestroying=!0,null===(e=Jt(this,tn))||void 0===e||e.info("<Destroy>",n),Jt(this,cn)&&(Jt(this,cn).disconnect(),Xt(this,cn,null)),$t(this,Un,Wn).call(this,"Destroy call"),Jt(this,nn).destroy(),$t(this,Fn,Yn).call(this))}},{key:"mute",value:function(){Jt(this,nn).mute()}},{key:"pause",value:function(){$t(this,Un,Wn).call(this,"Pause call"),Xt(this,pn,!1),Jt(this,nn).pause()}},{key:"resume",value:function(){Jt(this,pn)||$t(this,Ln,Hn).call(this),Jt(this,nn).play(),this.videoElement.play()}},{key:"setVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Jt(this,value:function(){Jt(this,nn).unmute()}}])&&Gt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p);function jn(){var e,t=null;if(Jt(this,ln)&&Jt(this,dn)){var n=this.parentElement.querySelector("iframe");if(!n)throw new Error("Cannot determine iframe element in the parent element so the video element cannot be determined");t=n.contentDocument.querySelector("video")}else t=this.parentElement.querySelector("video");return null===(e=Jt(this,tn))||void 0===e||e.log("<Video Element".concat(Jt(this,dn)?":IOS":":NOT_IOS",">"),t),t}function Bn(){this.videoElement=$t(this,vn,jn).call(this);var e=this.videoElement.parentElement;e.style.setProperty("display","flex"),e.style.setProperty("align-items","center"),e.style.setProperty("justify-content","center"),this.videoElement.style.width="100%",this.videoElement.style.height="100%"}function Gn(){Xt(this,cn,new ResizeObserver(Jt(this,Pn))),Jt(this,cn).observe(this.parentElement)}function Hn(){var e,t,n,r,i=this,o=null===(e=Jt(this,en))||void 0===e||null===(t=e.settings)||void 0===t||null===(n=t.timeout)||void 0===n?void 0:n.interval;o&&($t(this,Un,Wn).call(this,"Initial reset before set"),null===(r=Jt(this,tn))||void 0===r||r.log("<Timeout Watcher> Started [interval=".concat(o,"ms]")),Xt(this,on,setTimeout((function(){var e;null===(e=Jt(i,tn))||void 0===e||e.error("<Timeout Watcher> Timed out"),i.fireEvent(xn.events.STREAM_TIMEOUT)}),o)))}function Wn(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";null===(e=Jt(this,tn))||void 0===e||e.log("<Timeout Watcher:Reset> ".concat(t)),clearTimeout(Jt(this,on)),Xt(this,on,null)}function Vn(){Jt(this,nn).on(xn.NanoCore.events.PLAY,Jt(this,Sn)),Jt(this,nn).on(xn.NanoCore.events.METADATA,Jt(this,mn)),Jt(this,nn).on(xn.NanoCore.events.ERROR,Jt(this,gn)),Jt(this,nn).on(xn.NanoCore.events.PAUSE,Jt(this,Tn)),Jt(this,nn).on(xn.NanoCore.events.MUTE,Jt(this,_n)),Jt(this,nn).on(xn.NanoCore.events.UNMUTE,Jt(this,An)),Jt(this,nn).on(xn.NanoCore.events.DESTROY,Jt(this,Rn)),Jt(this,nn).on(xn.NanoCore.events.STREAM_INFO,Jt(this,In)),Jt(this,nn).on(xn.NanoCore.events.VOLUME_CHANGE,Jt(this,On)),Jt(this,nn).on(xn.NanoCore.events.START_BUFFERING,Jt(this,Nn)),Jt(this,nn).on(xn.NanoCore.events.STOP_BUFFERING,Jt(this,wn)),Jt(this,nn).on(xn.NanoCore.events.LOADING,Jt(this,Cn)),Jt(this,nn).on(xn.NanoCore.events.STATS,Jt(this,Mn))}function Yn(){var e;null===(e=Jt(this,tn))||void 0===e||e.info("<Removing event handlers>"),Jt(this,nn).off(xn.NanoCore.events.PLAY,Jt(this,Sn)),Jt(this,nn).off(xn.NanoCore.events.METADATA,Jt(this,mn)),Jt(this,nn).off(xn.NanoCore.events.ERROR,Jt(this,gn)),Jt(this,nn).off(xn.NanoCore.events.PAUSE,Jt(this,Tn)),Jt(this,nn).off(xn.NanoCore.events.MUTE,Jt(this,_n)),Jt(this,nn).off(xn.NanoCore.events.UNMUTE,Jt(this,An)),Jt(this,nn).off(xn.NanoCore.events.DESTROY,Jt(this,Rn)),Jt(this,nn).off(xn.NanoCore.events.STREAM_INFO,Jt(this,In)),Jt(this,nn).off(xn.NanoCore.events.VOLUME_CHANGE,Jt(this,On)),Jt(this,nn).off(xn.NanoCore.events.START_BUFFERING,Jt(this,Nn)),Jt(this,nn).off(xn.NanoCore.events.STOP_BUFFERING,Jt(this,wn)),Jt(this,nn).off(xn.NanoCore.events.LOADING,Jt(this,Cn)),Jt(this,nn).off(xn.NanoCore.events.STATS,Jt(this,Mn))}Qt(xn,"name","StreamConnector"),Qt(xn,"NanoCore",NanoPlayer),Qt(xn,"events",{MESSAGE:"MESSAGE",PLAY:"PLAY",ROTATION:"ROTATION",ERROR:"ERROR",PAUSE:"PAUSE",RESUME:"RESUME",MUTE:"MUTE",UNMUTE:"UNMUTE",DESTROY:"DESTROY",TIMEOUT:"TIMEOUT",VOLUME_CHANGE:"VOLUME_CHANGE",STREAM_INFO:"STREAM_INFO",STREAM_STARTED:"STREAM_STARTED",STREAM_TIMEOUT:"STREAM_TIMEOUT",CONNECT_STREAM_INIT:"CONNECT_STREAM_INIT",LOADING:"LOADING",BUFFERING_START:"BUFFERING_START",BUFFERING_STOP:"BUFFERING_STOP",USER_INTERACTION_REQUIRED:"USER_INTERACTION_REQUIRED",PLAYBACK_SUSPENDED:"PLAYBACK_SUSPENDED",STREAM_STATS:"STREAM_STATS"});var Kn=xn,zn={parentId:"",videoId:"",baseUrl:"",settings:{autoPlay:!1,muted:!0,lazy:!1,loop:!1,fadeOutBeforeStop:!1,portraitSnapRatio:.6},cls:{transparent:"transparent",hidden:"hidden",portrait:"portrait",landscape:"landscape",mobile:"mobile",ios:"ios"},logger:{}};function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e,t){if(t&&("object"===qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tr(e)}function tr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rr(e,t){or(e,t),t.add(e)}function ir(e,t,n){or(e,t),t.set(e,n)}function or(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,cr(e,t,"get"))}function ur(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,cr(e,t,"set"),n),n}function cr(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function lr(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var dr=new WeakMap,fr=new WeakMap,pr=new WeakMap,Er=new WeakMap,vr=new WeakMap,hr=new WeakMap,gr=new WeakMap,mr=new WeakMap,br=new WeakMap,yr=new WeakMap,Sr=new WeakSet,Tr=new WeakMap,_r=new WeakMap,Ar=new WeakMap,Or=new WeakSet,Rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zn(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nr(e);if(t){var i=nr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return er(this,n)}}(i);function i(e){var t,n,o,a,s,u,c,l,d,f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),rr(tr(d=r.call(this,e)),Or),rr(tr(d),Sr),ir(tr(d),dr,{writable:!0,value:{}}),ir(tr(d),fr,{writable:!0,value:null}),ir(tr(d),pr,{writable:!0,value:null}),ir(tr(d),Er,{writable:!0,value:null}),ir(tr(d),vr,{writable:!0,value:!1}),ir(tr(d),hr,{writable:!0,value:new Set}),ir(tr(d),gr,{writable:!0,value:!1}),ir(tr(d),mr,{writable:!0,value:ze(lr(tr(d),Sr,Ir).bind(tr(d)),10)}),ir(tr(d),br,{writable:!0,value:null}),ir(tr(d),yr,{writable:!0,value:function(){var e,t,n,r,i,o,a,s;null===(e=sr(tr(d),fr))||void 0===e||e.log("<Stop:Async> Animation ended, stopping playback"),null===(t=sr(tr(d),pr))||void 0===t||t.parentElement.classList.remove(null===(n=sr(tr(d),dr))||void 0===n||null===(r=n.cls)||void 0===r?void 0:r.transparent),null===(i=sr(tr(d),pr))||void 0===i||i.parentElement.classList.add(null===(o=sr(tr(d),dr))||void 0===o||null===(a=o.cls)||void 0===a?void 0:a.hidden),null===(s=sr(tr(d),pr))||void 0===s||s.stop(),ur(tr(d),gr,!1),d.destroy()}}),ir(tr(d),Tr,{writable:!0,value:function(e){var t,n,r,i=e.type,o=e.value;switch(sr(tr(d),hr).has(i)||null===(r=sr(tr(d),fr))||void 0===r||r.log("<LivePreRollPlayer:".concat(i,">"),o),d.fireEvent(i,o),i){case LivePreRollPlayer.events.MEDIA_INFO:sr(tr(d),mr).call(tr(d));break;case LivePreRollPlayer.events.PLAYER_RESET:if(ur(tr(d),gr,!1),!d.parentElement)return;var a,s,u,c;d.parentElement.className="",null!==(t=sr(tr(d),dr))&&void 0!==t&&null!==(n=t.settings)&&void 0!==n&&n.fadeOutBeforeStop&&(d.isUserInteractionRequired||(d.parentElement.classList.remove(null===(a=sr(tr(d),dr))||void 0===a||null===(s=a.cls)||void 0===s?void 0:s.transparent),d.parentElement.classList.remove(null===(u=sr(tr(d),dr))||void 0===u||null===(c=u.cls)||void 0===c?void 0:c.hidden)));break;case LivePreRollPlayer.events.RESUMED_VIDEO:ur(tr(d),gr,!0);break;case LivePreRollPlayer.events.PLAYBACK_ENDED:case LivePreRollPlayer.events.PAUSED_VIDEO:case LivePreRollPlayer.events.PLAYBACK_FAILED:ur(tr(d),gr,!1),sr(tr(d),mr).call(tr(d))}}}),ir(tr(d),_r,{writable:!0,value:function(e){var t;null===(t=sr(tr(d),fr))||void 0===t||t.error("<LivePreRollPlayer:Error>",e),"NotAllowedError"===e.type?(d.fireEvent(LivePreRollPlayer.events.USER_INTERACTION_REQUIRED),d.isUserInteractionRequired=!0):d.emit(LivePreRollPlayer.events.ERROR,e)}}),ir(tr(d),Ar,{writable:!0,value:function(e){var t,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,1)[0],r=(void 0===n?{}:n).contentRect,i=r.width,o=r.height;sr(tr(d),mr).call(tr(d)),null===(t=sr(tr(d),fr))||void 0===t||t.log("<Resize Observer>",{width:i,height:o})}}),ur(tr(d),dr,$n($n({},zn),e)),ur(tr(d),br,null===(t=sr(tr(d),dr))||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.portraitSnapRatio),null!==(o=sr(tr(d),dr))&&void 0!==o&&o.logger&&(ur(tr(d),fr,new U({prefix:$n({value:"[ ".concat(i.name," ]")},sr(tr(d),dr).logger.prefix)})),sr(tr(d),hr).add(LivePreRollPlayer.events.TIME_UPDATE)),ur(tr(d),pr,new LivePreRollPlayer($n($n({},sr(tr(d),dr)),{},{logger:{prefix:$n({},sr(tr(d),dr).logger.prefix)}}))),d.parentElement.style.opacity=0,lr(tr(d),Or,Nr).call(tr(d)),null===(a=sr(tr(d),pr))||void 0===a||a.addEventListener(LivePreRollPlayer.events.MESSAGE,sr(tr(d),Tr)),null===(s=sr(tr(d),pr))||void 0===s||s.addEventListener(LivePreRollPlayer.events.ERROR,sr(tr(d),_r)),null!==(u=sr(tr(d),dr))&&void 0!==u&&null!==(c=u.settings)&&void 0!==c&&c.fadeOutBeforeStop&&(null===(f=sr(tr(d),pr))||void 0===f||f.parentElement.addEventListener("animationend",sr(tr(d),yr))),null===(l=sr(tr(d),fr))||void 0===l||l.log("<Init>",sr(tr(d),dr)),d}return t=i,(n=[{key:"parentElement",get:function(){var e;return null===(e=sr(this,pr))||void 0===e?void 0:e.parentElement}},{key:"videoElement",get:function(){var e;return null===(e=sr(this,pr))||void 0===e?sr(this,pr))||void 0===e?void 0:e.loop}},{key:"load",value:function(){var e,t,n,r,i,o,a,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u?(null!==(e=sr(this,dr))&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.fadeOutBeforeStop&&(this.parentElement.classList.remove(null===(r=sr(this,dr))||void 0===r||null===(i=r.cls)||void 0===i?void 0:i.transparent),this.parentElement.classList.remove(null===(o=sr(this,dr))||void 0===o||null===(a=o.cls)||void 0===a?void 0:a.hidden)),null===(n=sr(this,pr))||void 0===n||n.load({performerId:u})):null===(s=sr(this,fr))||void 0===s||s.error("Cannot start playback without a performerId")}},{key:"loadSrc",value:function(){var e,t,n,r,i,o,a,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u?(null!==(e=sr(this,dr))&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.fadeOutBeforeStop&&(this.parentElement.classList.remove(null===(r=sr(this,dr))||void 0===r||null===(i=r.cls)||void 0===i?void 0:i.transparent),this.parentElement.classList.remove(null===(o=sr(this,dr))||void 0===o||null===(a=o.cls)||void 0===a?void 0:a.hidden)),null===(n=sr(this,pr))||void 0===n||n.load({src:u})):null===(s=sr(this,fr))||void 0===s||s.error("Cannot start playback without an src")}},{key:"stop",value:function(){var e,t,n,r,i,o,a,s,u;null!==(e=sr(this,dr))&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.fadeOutBeforeStop?(null===(n=sr(this,fr))||void 0===n||n.log("<Stop:Async> Waiting for animation end"),null===(r=sr(this,pr))||void 0===r||r.parentElement.classList.add(sr(this,dr).cls.transparent),null===(i=sr(this,pr))||void 0===i||i.parentElement.classList.remove(null===(o=sr(this,dr))||void 0===o||null===(a=o.cls)||void 0===a?void 0:a.hidden)):(null===(s=sr(this,fr))||void 0===s||s.log("<Stop>"),null===(u=sr(this,pr))||void 0===u||u.stop(),ur(this,gr,!1),this.destroy())}},{key:"pause",value:function(){var e;null===(e=sr(this,pr))||void 0===e||e.pause(),ur(this,gr,!1)}},{key:"resume",value:function(){var e;sr(this,gr)||null===(e=sr(this,pr))||void 0===e||e.resume()}},{key:"setVolume",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;"number"==typeof t?sr(this,pr).volume(t):null===(e=sr(this,fr))||void 0===e||e.error("Volume should be a number like",.7)}},{key:"destroy",value:function(){var e,t,n,r,i,o,a,s,u;sr(this,vr)?null===(a=sr(this,fr))||void 0===a||a.warn("Cannot destroy because it`s already in progress"):(ur(this,vr,!0),null===(e=sr(this,fr))||void 0===e||e.log("<Destroy>"),null!==(t=sr(this,dr))&&void 0!==t&&null!==(n=t.settings)&&void 0!==n&&n.fadeOutBeforeStop&&(null===(s=sr(this,pr))||void 0===s||s.parentElement.removeEventListener("animationend",sr(this,yr))),sr(this,Er)&&(null===(u=sr(this,fr))||void 0===u||u.log("<Resize Observer> Disconnecting..."),sr(this,Er).disconnect(),ur(this,Er,null)),null===(r=sr(this,pr))||void 0===r||r.removeEventListener(LivePreRollPlayer.events.MESSAGE,sr(this,Tr)),null===(i=sr(this,pr))||void 0===i||i.removeEventListener(LivePreRollPlayer.events.ERROR,sr(this,_r)),null===(o=sr(this,pr))||void 0===o||o.destroy(),ur(this,gr,!1),ur(this,pr,null))}},{key:"enableLoop",value:function(){var e,t;null===(e=sr(this,fr))||void 0===e||e.log("<Looping Enabled>"),null===(t=sr(this,pr))||void 0===t||t.enableLoop()}},{key:"disableLoop",value:function(){var e,t;null===(e=sr(this,fr))||void 0===e||e.log("<Looping disabled>"),null===(t=sr(this,pr))||void 0===t||t.disableLoop()}},{key:"mute",value:function(){var e,t;null===(e=sr(this,fr))||void 0===e||e.log("<Mute>"),null===(t=sr(this,pr))||void 0===t||t.mute()}},{key:"unmute",value:function(){var e,t;null===(e=sr(this,fr))||void 0===e||e.log("<Unmute>"),null===(t=sr(this,pr))||void 0===t||t.unmute()}}])&&Xn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(p);function Ir(){if(this.videoElement){if(0===this.videoElement.videoWidth&&0===this.videoElement.videoHeight)return this.videoElement.style.setProperty("width","100%"),this.videoElement.style.setProperty("height","100%"),this.parentElement.style.setProperty("opacity","0"),void this.videoElement.style.removeProperty("transform");this.parentElement.style.setProperty("display","flex"),this.parentElement.style.setProperty("align-items","center"),this.parentElement.style.setProperty("justify-content","center"),Mt({element:this.videoElement,portraitSnapRatio:sr(this,br)}),this.parentElement.style.removeProperty("opacity")}}function Nr(){ur(this,Er,new ResizeObserver(sr(this,Ar))),sr(this,Er).observe(this.parentElement)}ar(Rr,"name","PreRollConnector"),ar(Rr,"events",LivePreRollPlayer.events);var wr=Rr,Cr=JSON.parse('{"i8":"0.16.0","ky":"LiveStreamPlayer"}'),Pr={playerDivId:"",videoId:"",instanceId:null,settings:{reconnect:{enabled:!1,maxRetries:5,interval:2e3,nextPerformer:!1},timeout:{interval:5e3,forceLoopPreRoll:!0},portraitSnapRatio:.6},logger:{},data:{jsm2SessionId:"",clientInstanceId:"",sessionID:"",relay:{url:"",connection:{brandID:"",cobrandId:"",sessionID:"",siteName:"",subbrand:"",isPassive:!1},registration:{userType:"",chatID:"",clientRevision:"",gravityCookieId:"",passparam:"",playerVer:"",jasmin2App:!1,livefeedtype:null,livejasminTvmember:!1,newApplet:!1,isPassive:!1,sessionID:""},logger:{},settings:{subscriptions:{chatHistory:!0,chatSO:[]}}},stream:{connection:{h5live:"",h5liveHls:"",rtmp:""},settings:{timeout:{interval:5e3}},logger:{}},apigw:{default:"",custom:"",search:""},preroll:{baseUrl:"",autoPlay:!0,muted:!0,waitForLoad:!1}}};function Dr(e){var t=e.url,n=void 0===t?"":t,r=e.performerId,i=void 0===r?"":r,o=e.performerIdTemplate,a=void 0===o?"{$performerId}":o;if(!n)throw new Error("Cannot fetch without an url.");var s=i?n.replace(a,i):n;return new Promise((function(e,t){fetch(s).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach((function(t){Mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kr=Ur(Ur(Ur(Ur(Ur(Ur({},{SESSION_STARTED:"SESSION_STARTED",SESSION_STOPPED:"SESSION_STOPPED",PLAYBACK_PAUSED:"PLAYBACK_PAUSED",PLAYBACK_RESUMED:"PLAYBACK_RESUMED",PLAYBACK_SUSPENDED:"PLAYBACK_SUSPENDED"}),{PERFORMER_LOADED:"PERFORMER_LOADED",PERFORMER_OBJECT:"PERFORMER_OBJECT",PERFORMER_REQUEST_FAILED:"PERFORMER_REQUEST_FAILED",PERFORMER_REQUEST_FAILED_WRONG_STATUS:"PERFORMER_REQUEST_FAILED_WRONG_STATUS",PERFORMER_REQUEST_FAILED_INVALID_PERFORMER:"PERFORMER_REQUEST_FAILED_INVALID_PERFORMER"}),{RELAY_CONNECTING:"RELAY_CONNECTING",RELAY_CONNECTED:"RELAY_CONNECTED",RELAY_FAILED:"RELAY_FAILED",RELAY_CONNECTION_CLOSED:"RELAY_CONNECTION_CLOSED"}),{HOT_SHOW_AVAILABLE:"HOT_SHOW_AVAILABLE",C2C_ENABLED:"C2C_ENABLED",HAS_SOUND:"HAS_SOUND",INTERACTIVE_TOY_STATUS:"INTERACTIVE_TOY_STATUS",KING_OF_THE_ROOM:"KING_OF_THE_ROOM",ROOM_TOPIC:"ROOM_TOPIC",TWO_WAY_AVAILABLE:"TWO_WAY_AVAILABLE",TWO_WAY_ENABLED:"TWO_WAY_ENABLED",IS_PRIVATE:"IS_PRIVATE",IS_MOBILE:"IS_MOBILE",FUNCTION_CALL:"FUNCTION_CALL",RUNNING_SHOW_TYPE:"RUNNING_SHOW_TYPE",HOT_DEAL:"HOT_DEAL"}),{STREAM_STARTED:"STREAM_STARTED",STREAM_STOPPED:"STREAM_STOPPED",STREAM_PAUSED:"STREAM_PAUSED",STREAM_RESUMED:"STREAM_RESUMED",STREAM_TIMEOUT:"STREAM_TIMEOUT",STREAM_ROTATION:"STREAM_ROTATION",STREAM_LOADING:"STREAM_LOADING",STREAM_VOLUME_CHANGE:"STREAM_VOLUME_CHANGE",PLAYER_ERROR:"PLAYER_ERROR",PLAYER_VOLUME_CHANGED:"PLAYER_VOLUME_CHANGED",PLAYER_MUTED:"PLAYER_MUTED",PLAYER_UNMUTED:"PLAYER_UNMUTED",STREAM_BUFFERING_START:"STREAM_BUFFERING_START",STREAM_BUFFERING_STOP:"STREAM_BUFFERING_STOP",STREAM_USER_INTERACTION_REQUIRED:"STREAM_USER_INTERACTION_REQUIRED"}),{PREROLL_STARTED:"PREROLL_STARTED",PREROLL_STOPPED:"PREROLL_STOPPED",PREROLL_PAUSED:"PREROLL_PAUSED",PREROLL_CAN_PLAY:"PREROLL_CAN_PLAY",PREROLL_FIRST_CAN_PLAY:"PREROLL_FIRST_CAN_PLAY",PREROLL_MEDIA_INFO:"PREROLL_MEDIA_INFO",PREROLL_MUTED:"PREROLL_MUTED",PREROLL_UNMUTED:"PREROLL_UNMUTED",PREROLL_VOLUME_CHANGED:"PREROLL_VOLUME_CHANGED",PREROLL_PLAYER_RESET:"PREROLL_PLAYER_RESET",PREROLL_PLAYBACK_FAILED:"PREROLL_PLAYBACK_FAILED",PREROLL_ERROR:"PREROLL_ERROR",PREROLL_TIME_UPDATE:"PREROLL_TIME_UPDATE",PREROLL_USER_INTERACTION_REQUIRED:"PREROLL_USER_INTERACTION_REQUIRED"}),Fr=function(e,t){return e.replace("{$sbIp}",t.sbIp).replace("{$sbIpSplit}",t.sbIp?Ve(t.sbIp):"").replace("{$performerId}",t.performerId).replace("{performerName}",t.performerId).replace("{performerId}",t.performerId).replace("[performerId]",t.performerId).replace("{$sbHash}",t.sbHash).replace("{$sessionId}",t.sessionId).replace("{$clientInstanceId}",t.clientInstanceId).replace("{$token}",t.token).replace("{$streamUrl}",t.streamUrl)};function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){Br(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gr,Hr,Wr,Vr=function(e){var t,n,r,i,o,a,s,u,c,l,d,f=e.config,p=void 0===f?{}:f,E=e.performerObject,v=void 0===E?{}:E,h=e.streamName,g=void 0===h?"":h,m=e.logger,b=void 0===m?null:m,y=e.wssUrl,S=void 0===y?"":y,T=e.hlsUrl,_=void 0===T?"":T,A={};A=S&&_?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.nanoCoreConfig,r=e.streamConfig,i=n.autoPlay,o=void 0===i||i,a=n.muted,s=void 0===a||a,u=n.videoId,c=void 0===u?null:u,l=r.wssUrl,d=r.hlsUrl;return{source:{h5live:{server:{websocket:l,hls:d},params:jr({},t)}},playback:{autoplay:o,muted:s,videoId:c,keepFrame:!0,allowSafariHlsFallback:!0,metadata:!0,reconnect:{maxRetries:0,delaySteps:0,minDelay:1,maxDelay:1},keepConnection:!0}}}({nanoCoreConfig:{videoId:null==p?void 0:p.videoId,muted:null==p||null===(i=p.settings)||void 0===i||null===(o=i.playback)||void 0===o?void 0:o.muted,autoPlay:null==p||null===(a=p.settings)||void 0===a||null===(s=a.playback)||void 0===s?void 0:s.autoPlay},streamConfig:{wssUrl:S,hlsUrl:_},clientInstanceId:p.data.clientInstanceId,sessionId:p.data.sessionID,performerObject:v,streamName:g},{cid:!1,pid:!1}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.nanoCoreConfig,r=e.streamConfig,i=e.performerObject,o=e.clientInstanceId,a=e.sessionId,s=e.streamName,u=i.sbIp,c=i.sbHash,l=i.performerId,d=n.autoPlay,f=void 0===d||d,p=n.muted,E=void 0===p||p,v=n.videoId,h=void 0===v?null:v,g=r.h5live,m=r.h5liveHls,b=r.rtmp;return{source:{h5live:{server:{websocket:g=Fr(g,{sbIp:u}),hls:m=Fr(m,{sbIp:u})},rtmp:{url:b=Fr(b,{sbIp:u,sbHash:c,performerId:l,sessionId:a,clientInstanceId:o}),streamname:s},params:jr({},t)}},playback:{autoplay:f,muted:E,videoId:h,keepFrame:!0,allowSafariHlsFallback:!0,metadata:!0,reconnect:{maxRetries:0,delaySteps:0,minDelay:1,maxDelay:1},keepConnection:!0}}}({nanoCoreConfig:{videoId:null==p?void 0:p.videoId,muted:null==p||null===(u=p.settings)||void 0===u||null===(c=u.playback)||void 0===c?void 0:c.muted,autoPlay:null==p||null===(l=p.settings)||void 0===l||null===(d=l.playback)||void 0===d?void 0:d.autoPlay},streamConfig:p.data.stream.connection,clientInstanceId:p.data.clientInstanceId,sessionId:p.data.sessionID,performerObject:v,streamName:g});var O=new Kn(p.data.stream,{playerDivId:p.playerDivId,videoId:p.videoId,nanoCoreConfig:A,settings:{timeout:{interval:null==p||null===(t=p.settings)||void 0===t||null===(n=t.timeout)||void 0===n?void 0:n.interval},portraitSnapRatio:null==p||null===(r=p.settings)||void 0===r?void 0:r.portraitSnapRatio}});return null==b||b.log("<NanoInstanceFactory>",{nanoCoreInstance:O,nanoCoreConfig:A}),O};function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kr={relay:(Gr={},Yr(Gr,Lt.events.SOCKET_CONNECTED,kr.RELAY_CONNECTING),Yr(Gr,Lt.events.SOCKET_DISCONNECTED,kr.RELAY_CONNECTION_CLOSED),Yr(Gr,Lt.events.SOCKET_ERROR,kr.RELAY_FAILED),Yr(Gr,Lt.events.RELAY_CONNECTED,kr.RELAY_CONNECTED),Yr(Gr,Lt.events.IS_PRIVATE,kr.IS_PRIVATE),Yr(Gr,Lt.events.IS_MOBILE,kr.IS_MOBILE),Yr(Gr,Lt.events.C2C_ENABLED,kr.C2C_ENABLED),Yr(Gr,Lt.events.INTERACTIVE_TOY_STATUS,kr.INTERACTIVE_TOY_STATUS),Yr(Gr,Lt.events.ROOM_TOPIC,kr.ROOM_TOPIC),Yr(Gr,Lt.events.KING_OF_THE_ROOM,kr.KING_OF_THE_ROOM),Yr(Gr,Lt.events.HOT_SHOW_AVAILABLE,kr.HOT_SHOW_AVAILABLE),Yr(Gr,Lt.events.FUNCTION_CALL,kr.FUNCTION_CALL),Yr(Gr,Lt.events.RUNNING_SHOW_TYPE,kr.RUNNING_SHOW_TYPE),Yr(Gr,Lt.events.HOT_DEAL,kr.HOT_DEAL),Gr),stream:(Hr={},Yr(Hr,Kn.events.STREAM_STARTED,kr.STREAM_STARTED),Yr(Hr,Kn.events.ROTATION,kr.STREAM_ROTATION),Yr(Hr,Kn.events.ERROR,kr.PLAYER_ERROR),Yr(Hr,Kn.events.PLAY,kr.STREAM_RESUMED),Yr(Hr,Kn.events.PAUSE,kr.STREAM_PAUSED),Yr(Hr,Kn.events.RESUME,kr.STREAM_RESUMED),Yr(Hr,Kn.events.DESTROY,kr.STREAM_STOPPED),Yr(Hr,Kn.events.MUTE,kr.PLAYER_MUTED),Yr(Hr,Kn.events.UNMUTE,kr.PLAYER_UNMUTED),Yr(Hr,Kn.events.STREAM_TIMEOUT,kr.STREAM_TIMEOUT),Yr(Hr,Kn.events.VOLUME_CHANGE,kr.STREAM_VOLUME_CHANGE),Yr(Hr,Kn.events.LOADING,kr.STREAM_LOADING),Yr(Hr,Kn.events.BUFFERING_START,kr.STREAM_BUFFERING_START),Yr(Hr,Kn.events.BUFFERING_STOP,kr.STREAM_BUFFERING_STOP),Yr(Hr,Kn.events.USER_INTERACTION_REQUIRED,kr.STREAM_USER_INTERACTION_REQUIRED),Yr(Hr,Kn.events.PLAYBACK_SUSPENDED,kr.PLAYBACK_SUSPENDED),Hr),preroll:(Wr={},Yr(Wr,wr.events.RESUMED_VIDEO,kr.PREROLL_STARTED),Yr(Wr,wr.events.PAUSED_VIDEO,kr.PREROLL_PAUSED),Yr(Wr,wr.events.PLAYBACK_ENDED,kr.PREROLL_STOPPED),Yr(Wr,wr.events.CAN_PLAY,kr.PREROLL_CAN_PLAY),Yr(Wr,wr.events.FIRST_CAN_PLAY,kr.PREROLL_FIRST_CAN_PLAY),Yr(Wr,wr.events.MEDIA_INFO,kr.PREROLL_MEDIA_INFO),Yr(Wr,wr.events.MUTED,kr.PREROLL_MUTED),Yr(Wr,wr.events.UNMUTED,kr.PREROLL_UNMUTED),Yr(Wr,wr.events.SET_VOLUME,kr.PREROLL_VOLUME_CHANGED),Yr(Wr,wr.events.PLAYER_RESET,kr.PREROLL_PLAYER_RESET),Yr(Wr,wr.events.PLAYBACK_FAILED,kr.PREROLL_PLAYBACK_FAILED),Yr(Wr,wr.events.ERROR,kr.PREROLL_ERROR),Yr(Wr,wr.events.USER_INTERACTION_REQUIRED,kr.PREROLL_USER_INTERACTION_REQUIRED),Wr)},zr=function(e,t){var n,r=t.event,i=t.data,o=t.targetOrigin,a=void 0===o?"*":o,s=t.instanceId,u=void 0===s?null:s,c=null==Kr||null===(n=Kr[e])||void 0===n?void 0:n[r];c&&p.post(c,i,a,u)};function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){ci(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getave a [Symbol.iterator]() method.")}()}function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zr(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s{Zr(o,r,i,a,s,"throw",e)}a(void 0)}))}}function ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ri(e,t){if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ii(e)}function ii(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ai(e,t){ui(e,t),t.add(e)}function si(e,t,n){ui(e,t),t.set(e,n)}function ui(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function li(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,pi(e,t,"get"))}function di(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function fi(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,pi(e,t,"set"),n),n}function pi(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ei=Cr.i8,vi=Cr.ky,hi=new WeakMap,gi=new WeakMap,mi=new WeakMap,bi=new WeakMap,yi=new WeakMap,Si=new WeakMap,Ti=new WeakMap,_i=new WeakMap,Ai=new WeakMap,Oi=new WeakMap,Ri=new WeakMap,Ii=new WeakMap,Ni=new WeakSet,wi=new WeakSet,Ci=new WeakSet,Pi=new WeakMap,Di=new WeakMap,Li=new WeakSet,Ui=new WeakSet,Mi=new WeakSet,ki=new WeakSet,Fi=new WeakMap,xi=new WeakMap,ji=new WeakSet,Bi=new WeakSet,Gi=new WeakSet,Hi=new WeakSet,Wi=new WeakSet,Vi=new WeakSet,Yi=new WeakSet,Ki=new WeakSet,zi=new WeakSet,qi=new WeakSet,Qi=new WeakSet,$i=new WeakSet,Ji=new WeakMap,Xi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ni(e,t)}(o,e);var t,n,r,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oi(e);if(t){var i=oi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ri(this,n)}}(o);function o(e){var t,n,r,a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),!e.instanceId)throw new Error("instanceId is a mandatory parameter");return ai(ii(r=i.call(this,e)),$i),ai(ii(r),Qi),ai(ii(r),qi),ai(ii(r),zi),ai(ii(r),Ki),ai(ii(r),Yi),ai(ii(r),Vi),ai(ii(r),Wi),ai(ii(r),Hi),ai(ii(r),Gi),ai(ii(r),Bi),ai(ii(r),ji),ai(ii(r),ki),ai(ii(r),Mi),ai(ii(r),Ui),ai(ii(r),Li),ai(ii(r),Ci),ai(ii(r),wi),ai(ii(r),Ni),si(ii(r),hi,{writable:!0,value:{}}),si(ii(r),gi,{writable:!0,value:{}}),si(ii(r),mi,{writable:!0,value:null}),si(ii(r),bi,{writable:!0,value:null}),si(ii(r),yi,{writable:!0,value:void 0}),si(ii(r),Si,{writable:!0,value:null}),si(ii(r),Ti,{writable:!0,value:null}),si(ii(r),_i,{writable:!0,value:null}),si(ii(r),Ai,{writable:!0,value:!1}),si(ii(r),Oi,{writable:!0,value:!1}),si(ii(r),Ri,{writable:!0,value:!1}),si(ii(r),Ii,{writable:!0,value:new Set}),si(ii(r),Pi,{writable:!0,value:(a=ei(regeneratorRuntime.mark((function e(t){var n,i,o,a,s,u,c,l,d,f,p,E,v,h,g,m,b,y,S,T,_,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.event,u=void 0===s?"":s,c=t.data,l=void 0===c?{}:c,null===(n=li(ii(r),_i))||void 0===n||n.info("<Relay Event>",u,l),e.t0=u,e.next=e.t0===Lt.events.SOCKET_DISCONNECTED||e.t0===Lt.events.SOCKET_ERROR?5:e.t0===Lt.events.STREAM_LIST?7:e.t0===Lt.events.IS_PRIVATE?24:e.t0===Lt.events.IS_MOBILE?26:28;break;case 5:return r.stop(),e.abrupt("break",28);case 7:if(null===(i=li(ii(r),hi))||void 0===i||null===(o=i.data)||void 0===o||null===(a=o.flags)||void 0===a||!a.ngs){e.next=22;break}return null===(d=li(ii(r),_i))||void 0===d||d.log("Using NGS"),g=null===(f=li(ii(r),hi))||void 0===f||null===(p=f.data)||void 0===p||null===(E=p.flags)||void 0===E||null===(v=E.ngs)||void 0===v?void 0:v.protocols,m=null==l?void 0:l.streamId,e.next=13,li(ii(r),mi).getVideoData(g,[m]);case 13:b=e.sent,y=Jr(b,1),S=y[0],T=Jr(S,1),(_=T[0])||(li(ii(r),_i).error("Cannot connect stream, video data is missing"),r.stop()),null===(h=li(ii(r),_i))||void 0===h||h.log("Got video data",_),di(ii(r),wi,to).call(ii(r),null==l?void 0:l.streamName,_),e.next=23;break;case 22:di(ii(r),wi,to).call(ii(r),null==l?void 0:l.streamName);case 23:return e.abrupt("break",28);case 24:return!0===l.current&&(null===(A=li(ii(r),_i))||void 0===A||A.warn("Stopping playback because performer is in private"),r.stop()),e.abrupt("break",28);case 26:return li(ii(r),yi).stream.isMobileStream=l.current,e.abrupt("break",28);case 28:zr("relay",$r($r({},t),{},{instanceId:r.instanceId}));case 29:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}),si(ii(r),Di,{writable:!0,value:function(e){var t,n,i,o,a,s,u=e.event,c=void 0===u?"":u,l=e.data,d=void 0===l?{}:l,f=null===(t=li(ii(r),hi))||void 0===t||null===(n=t.settings)||void 0===n||null===(i=n.livePreRoll)||void 0===i?void 0:i.delayHide,p=null==f?void 0:f.enabled,E=null==f?void 0:f.interval;switch(li(ii(r),Ii).has(c)||null===(s=li(ii(r),_i))||void 0===s||s.info("<StreamConnector:".concat(c,">"),d),c){case Kn.events.CONNECT_STREAM_INIT:li(ii(r),yi).stream.isMobileStream&&(li(ii(r),bi).isMobileStream=li(ii(r),yi).stream.isMobileStream);break;case Kn.events.STREAM_STATS:di(ii(r),Ci,ro).call(ii(r));break;case Kn.events.ERROR:null===(o=li(ii(r),_i))||void 0===o||o.error("<NanoCore Error>",d),r.fireEvent(Kn.events.ERROR),r.stop();break;case Kn.events.PLAYBACK_SUSPENDED:r.fireEvent(Kn.events.PLAYBACK_SUSPENDED),null===(a=li(ii(r),_i))||void 0===a||a.log("Playback suspended by third party"),r.pause();break;case Kn.events.PAUSE:fi(ii(r),Ri,!0);break;case Kn.events.STREAM_STARTED:var v;li(ii(r),Si)&&(p?(null===(v=li(ii(r),_i))||void 0===v||v.log("Delaying preroll stop after stream started with interval"),di(ii(r),ji,uo).call(ii(r)),fi(ii(r),Ti,setTimeout((function(){li(ii(r),Si).stop()}),E))):li(ii(r),Si).stop());break;case Kn.events.STREAM_TIMEOUT:di(ii(r),ki,so).call(ii(r))}zr("stream",$r($r({},e),{},{instanceId:r.instanceId}))}}),si(ii(r),Fi,{writable:!0,value:function(e){switch(e.event){case wr.events.TIME_UPDATE:di(ii(r),Ci,ro).call(ii(r));break;case wr.events.PLAYER_RESET:di(ii(r),Ki,ho).call(ii(r)),di(ii(r),ji,uo).call(ii(r)),fi(ii(r),Si,null)}zr("preroll",$r($r({},e),{},{instanceId:r.instanceId}))}}),si(ii(r),xi,{writable:!0,value:function(e){var t;null===(t=li(ii(r),_i))||void 0===t||t.error("<PreRoll:Error>",e)}}),si(ii(r),Ji,{writable:!0,value:function(e){var t,n=e.event,i=function(){var e,t;null===(e=li(ii(r),_i))||void 0===e||e.log("<PreRollEventsWatcher:Unsubscribe>"),null===(t=li(ii(r),Si))||void 0===t||t.removeEventListener(wr.events.MESSAGE,li(ii(r),Ji))};if(n===wr.events.USER_INTERACTION_REQUIRED)null===(t=li(ii(r),_i))||void 0===t||t.log("<PreRollEventsWatcher:UIR>"),di(ii(r),Mi,ao).call(ii(r)),di(ii(r),Bi,co).call(ii(r)),i();else if(n===wr.events.RESUMED_VIDEO){var o;null===(o=li(ii(r),_i))||void 0===o||o.log("<PreRollEventsWatcher:ResumedVideo>"),di(ii(r),Bi,co).call(ii(r)),i()}}}),fi(ii(r),hi,$r($r({},Pr),e)),fi(ii(r),yi,di(ii(r),zi,go).call(ii(r))),null!==(t=li(ii(r),hi))&&void 0!==t&&t.logger&&di(ii(r),qi,mo).call(ii(r)),null===(n=li(ii(r),_i))||void 0===n||n.info("<Init>",li(ii(r),hi)),r}return t=o,(n=[{key:"isDestroying",get:function(){return li(this,Oi)},set:function(e){fi(this,Oi,e)}},{key:"start",value:(r=ei(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,s,u,c,l,d,f,p,E,v,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>0&&void 0!==h[0]?h[0]:{},i=r.performerId,o=void 0===i?"":i,a=r.loadNextModel,s=void 0!==a&&a,li(this,Ai)&&(null===(u=li(this,_i))||void 0===u||u.log("Stopping playback before reconnecting to stream"),this.stop(),fi(this,yi,di(this,zi,go).call(this))),null!==(t=li(this,hi))&&void 0!==t&&t.logger&&(li(this,_i)&&di(this,Qi,bo).call(this),di(this,qi,mo).call(this)),e.prev=3,fi(this,Ai,!0),this.isDestroying=!1,this.post(kr.SESSION_STARTED,{},"*",this.instanceId),e.t0=fi,e.t1=this,e.t2=gi,e.next=12,di(this,Ni,Zi).call(this,o,s);case 12:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),Object.keys(li(this,gi)).length&&(this.post(kr.PERFORMER_LOADED,li(this,gi).performerId,"*",this.instanceId),this.post(kr.PERFORMER_OBJECT,li(this,gi),"*",this.instanceId)),e.next=22;break;case 17:return e.prev=17,e.t4=e.catch(3),null===(c=li(this,_i))||void 0===c||c.error(e.t4),this.post(kr.PERFORMER_REQUEST_FAILED,e.t4,"*",this.instanceId),e.abrupt("return",!1);case 22:if("free"!==(null===(n=li(this,gi))||void 0===n?void 0:n.status)){e.next=26;break}if(null!==(l=li(this,hi))&&void 0!==l&&null!==(d=l.data)&&void 0!==d&&d.livePreRoll){li(this,Si)&&di(this,Mi,ao).call(this),di(this,$i,yo).call(this),li(this,Si).addEventListener(wr.events.MESSAGE,li(this,Ji));try{li(this,Si).load(li(this,gi).performerId)}catch(e){null===(f=li(this,_i))||void 0===f||f.error(e),di(this,Bi,co).call(this)}}else di(this,Bi,co).call(this);e.next=30;break;case 26:throw E=null===(p=li(this,gi))||void 0===p?void 0:p.status,v=E?"Performer is in ".concat(E):"Invalid performer",E?this.post(kr.PERFORMER_REQUEST_FAILED_WRONG_STATUS,{status:E},"*",this.instanceId):this.post(kr.PERFORMER_REQUEST_FAILED_INVALID_PERFORMER,{},"*",this.instanceId),new Error(v);case 30:return e.abrupt("return",!0);case 31:case"end":return e.stop()}}),e,this,[[3,17]])}))),function(){return r.apply(this,arguments)})},{key:"mute",value:function(){li(this,bi)&&lon(){li(this,bi)&&li(this,bi).unmute()}},{key:"pause",value:function(){var e;fi(this,Ri,!0),li(this,Ai)&&(null===(e=li(this,_i))||void 0===e||e.log("<Pause>"),this.post(kr.PLAYBACK_PAUSED,{},"*",this.instanceId))}},{key:"resume",value:function(){var e,t;li(this,Ri)&&(fi(this,Ri,!1),li(this,Ai))&&(this.post(kr.PLAYBACK_RESUMED,{},"*",this.instanceId),li(this,bi)&&(null===(e=li(this,_i))||void 0===e||e.log("<Stream:Resume>"),li(this,bi).resume()),li(this,Si)&&!li(this,Si).isUserInteractionRequired&&(null===(t=li(this,_i))||void 0===t||t.log("<PreRoll:Resume>"),li(this,Si).resume()))}},{key:"setVolume",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;"number"==typeof t?li(this,bi).setVolume(t):null===(e=li(this,_i))||void 0===e||e.error("Volume should be a number like",.7)}},{key:"stop",value:function(){var e;this.isDestroying?null===(e=li(this,_i))||void 0===e||e.warn("Cannot execute stop because its already in progress."):(this.isDestroying=!0,li(this,mi)&&di(this,Ui,oo).call(this),li(this,bi)&&di(this,Li,io).call(this),li(this,Si)&&di(this,Mi,ao).call(this),li(this,_i)&&di(this,Qi,bo).call(this),fi(this,Ai,!1),fi(this,Ri,!1),this.post(kr.SESSION_STOPPED,{},"*",this.instanceId))}},{key:"sendPredefinedMessage",value:function(e){var t;null===(t=li(this,mi))||void 0===t||t.sendMessage({msgKey:e})}}])&&ti(t.prototype,n),Object.definePropn Zi(){return eo.apply(this,arguments)}function eo(){return(eo=ei(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,s,u,c,l,d,f=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>0&&void 0!==f[0]?f[0]:"",i=f.length>1&&void 0!==f[1]&&f[1],null===(t=li(this,_i))||void 0===t||t.log("<Request:PromoApiGw>",null!=r?r:"No performerId provided"),o=li(this,hi).data.apigw,a=o.getPerformerUrl,s=o.searchPerformerUrl,u=o.debugUrl,c=a,r&&(c=u),i&&(c=s),e.next=9,Dr({url:c,performerId:r});case 9:return l=e.sent,d=l.data,null===(n=li(this,_i))||void 0===n||n.log("<Response:PromoApiGw>",d),e.abrupt("return",d);case 13:case"end":return e.stop(o(e,t){return no.apply(this,arguments)}function no(){return(no=ei(regeneratorRuntime.mark((function e(t,n){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Cannot determine stream name");case 2:return i=null==n||null===(r=n.protocol)||void 0===r?void 0:r.h5live,fi(this,bi,Vr({config:li(this,hi),performerObject:li(this,gi),streamName:t,logger:li(this,_i),wssUrl:null==i?void 0:i.wssUrl,hlsUrl:null==i?void 0:i.hlsUrl})),di(this,Wi,po).call(this),e.prev=5,e.next=8,li(this,bi).connect();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),null===(o=li(this,_i))||void 0===o||o.error(e.t0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[5,10]])})))).apply(this,arguments)}function ro(){var e,t;li(this,Ri)&&(null===(e=li(this,Si))||void 0===e||e.pause(),null===(t=li(this,bi))||void 0===t||t.pause())}function io(){li(this,bi).destroy(),di(this,Vi,Eo).call(this),fi(this,bi,null)}function oo(){li(this,mi).disconnect(),di(this,Hi,fo).call(this),fi(this,mi,null)}function ao(){var e;null===(e=li(this,Si))||void 0===e||e.destroy(),di(this,Ki,ho).call(this),di(this,ji,uo).call(this),fi(this,Si,null)}function so(){var e,t,n,r,i,o,a;null===(e=li(this,_i))||void 0===e||e.log("<Stream Timeout>"),di(this,Li,io).call(this),di(this,Ui,oo).call(this),null!==(t=li(this,hi))&&void 0!==t&&null!==(n=t.settings)&&void 0!==n&&null!==(r=n.timeout)&&void 0!==r&&r.forceLoopPreRoll?li(this,Si)?(null===(i=li(this,_i))||void 0===i||i.info("<Force Loop> Enabling force loop in PreRollConnector"),li(this,Si).enableLoop()):(null===(o=li(this,_i))||void 0===o||o.warn("<Force Loop> Cannot enable force loop, preroll feature is disabled"),this.stop()):(null===(a=li(this,_i))||void 0===a||a.info("<Force Loop> Feature is disabled."),this.stop())}function uo(){clearTimeout(li(this,Ti)),fi(this,Ti,null)}function co(){var e=li(this,hi).data,t=e.relay,n=void 0===t?{}:t,r=e.jsm2SessionId,i=void 0===r?"":r,o=e.clientInstanceId,a=void 0===o?"":o,s=e.pstool,u=Ke(s,vi,Ei),c=$r($r({},n),{},{jsm2SessionId:i,clientInstanceId:a});s&&(c=$r($r({},c),{},{pstool:s,armaVersion:u})),fi(this,mi,new Lt(c)),di(this,Gi,lo).call(this),li(this,mi).connect(li(this,gi))}function lo(){li(this,mi).addEventListener(Lt.events.MESSAGE,li(this,Pi))}function fo(){li(this,mi).removeEventListener(Lt.events.MESSAGE,li(this,Pi))}function po(){li(this,bi).addEventListener(Kn.events.MESSAGE,li(this,Di))}function Eo(){li(this,bi).removeEventListener(Kn.events.MESSAGE,li(this,Di))}function vo(){li(this,Si).addEventListener(wr.events.MESSAGE,li(this,Fi)),li(this,Si).addEventListener(wr.events.ERROR,li(this,xi))}function ho(){li(this,Si).removeEventListener(wr.events.MESSAGE,li(this,Fi)),li(this,Si).removeEventListener(wr.events.MESSAGE,li(this,Ji)),li(this,Si).removeEve{return{relay:{},stream:{},preroll:{}}}function mo(){fi(this,_i,new U({prefix:$r({value:"[ ".concat(Xi.name,"@").concat(Ei," ]")},li(this,hi).logger.prefix)})),li(this,Ii).add(Kn.events.STREAM_STATS)}function bo(){var e;li(this,_i)&&(null===(e=li(this,_i))||void 0===e||e.log("Destroying Logger instance"),li(this,Ii).clear(),fi(this,_i,null))}function yo(){var e,t,n;null===(e=li(this,_i))||void 0===e||e.log("Creating LivePreRollPlayer instance"),di(this,ji,uo).call(this),li(this,hi).data.livePreRoll.settings.portraitSnapRatio=null===(t=li(this,hi))||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.portraitSnapRatio,fi(this,Si,new wr(li(this,hi).data.livePreRoll)),di(this,Yi,vo).call(this)}ci(Xi,"name",vi),ci(Xi,"version",Ei),ci(Xi,"events",{player:kr,relay:Lt.events,relayFunctionCalls:Lt.functionCalls,stream:Kn.events,preroll:wr.o},o.apply(null,arguments)}e.exports=o},function(e,t,n){"use strict";(function(e){var t=n(40),r=n.n(t),i=n(9),o=n.n(i),a=n(1),s=n.n(a),u=n(6),c=n.n(u),l=n(2),d=n.n(l),f=n(0),p=n.n(f),E=n(3),v=n.n(E),h=n(41),g=n(16),m=n(11);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(t){function n(){return s()(this,n),d()(this,p()(n).apply(this,arguments))}return v()(n,t),c()(n,[{key:"prepareConfig",value:function(){var t=this.timeout;t=t&&t>=g.d.minimum?t:g.d.fallback;var n=y({},e.playerConfigs[this.id],{playerDivId:"lsp-".concat(this.id),videoId:"lsp-stream-".concat(this.id),instanceId:this.id,settings:{playback:{muted:this.muted,autoPlay:!0},timeout:{interval:t},portraitSnapRatio:this.portraitSnapRatio},logger:y({},g.c.main)});return n.data.stream=y({},n.data.stream,{logger:y({},g.c.stream)}),n.data.relay=y({},n.data.relay,{logger:y({},g.c.relay)}),n.data.relay.settings=y({},n.data.relay.settings,{subscriptions:{chatHistory:this.chatHistory,chatSO:r()(g.a)}}),n.data.livePreRoll&&(n.data.livePreRoll.parentId="lpp-".concat(this.id),n.data.livePreRoll.videoId="lpp-video-".concat(this.id),n.data.livePreRoll.settings={autoPlay:!0,muted:this.muted,fadeOutBeforeStop:this.fadeToStream,waitForLoad:m.b},n.data.livePreRoll.logger=y({},g.c.preroll),n.settings=y({},n.settings,{livePreRoll:{delayHide:{enabled:!!this.fadeToStreamDelay,interval:parseInt(this.fadeToStreamDelay)||g.b}}}),n.settings.timeout.forceLoopPreRoll=this.forceLoopPreRoll),n}},{key:"createChildElements",value:function(){var e=document.createElement("video");e.setAttribute("id",this.config.videoId);var t=document.createElement("div");if(t.setAttribute("for","stream-container"),t.setAttribute("id",this.config.playerDivId),t.appendChild(e),this.appendChild(t),this.config.data.livePreRoll){var n=document.createElement("div");n.setAttribute("for","preroll-container"),n.setAttribute("id",this.config.data.livePreRoll.parentId),this.appendChild(n)}}},{key:"connectedCallback",value:function(){this.config=this.prepareConfig(),this._hasStarted=!1,this.hasChildNodes()||this.createChildElements(),this._mutedState=this.muted,this._logger=this._logger||new Logger({prefix:{value:"[HTMLPlayerElement#".concat(this.id,"]"),backgroundColor:"#d35400",color:"#fff",bold:!0}}),this.player=new LiveStreamPlayer(this.config)}},{key:"playerClass",get:function(){return e.LiveStreamPlayer}},{key:"timeout",get:function(){return this.getAttribute("timeout")}},{key:"fadeToStream",get:function(){return this.hasAttribute("fade-to-stream")}},{key:"fadeToStreamDelay",get:function(){var e=this.hasAttribute("fade-to-stream-delay"),t=this.getAttribute("fade-to-stream-delay");return!!e&&(t||g.b)}},{key:"forceLoopPreRoll",get:function(){return this.hasAttribute("force-loop-preroll")}}]),n}(h.a);window.customElements.define("toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(6),o=n.n(i),a=n(2),s=n.n(a),u=n(0),c=n.n(u),l=n(14),d=n.n(l),f=n(3),p=n.n(f),E=n(5),v=function(e){function t(){var e;return r()(this,t),(e=s()(this,c()(t).call(this))).handleClickBound=e.handleClick.bind(d()(e)),e}return pnction(){this.toggleAttribute("muted")}},{key:"connectedCallback",value:function(){this.addEventListener("click",this.handleClickBouistener("click",this.handleClickBound)}},{key:"muted",get:function()ted",""):this.removeAttribute("muted")}}]),t}(n.n(E)()(HTMLElement));e.customElements.define("pt-mute-button",v)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(2),o=n.n(i),a=n(0),s=n.n(a),u=n(3),c=n.n(u),l=n(5),d=function(e){function t(){return r()(this,t),o()(this,s()(t).apply(this,arguments))}return c()(t,e),t}(n.n(l)()(HTMLElement));e.customElements.define("pt-cta-button",d)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(2),o=n.n(i),a=n(0),s=n.n(a),u=n(3),c=n.n(u),l=n(5),d=function(e){function t(){return r()(this,t),o()(this,s()(t).apply(this,arguments))}return c()(t,e),t}(n.n(l)()(HTMLElement));e.customElements.define("pt-guest-input",d)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(6),o=n.n(i),a=n(2),s=n.n(a),u=n(0),c=n.n(u),l=n(14),d=n.n(l),f=n(3),p=n.n(f),E=n(5),v=n.n(E),h=n(42),g=function(e){function t(){var e;return r()(this,t),(e=s()(this,c()(t).call(this))).handleCloseButtonClickBound=e.handleCloseButtonClick.bind(d()(e)),e.closeIcon=new h.a,e.closeIcon.setAttribute("for","close-panel"),e}return p()(t,e),o()(t,[{key:"handleCloseButtonClick",value:function(){this.setAttribute("hidden","")}},{key:"connectedCallback",value:function(){this.appendChild(this.closeIcon),this.closeIcon.addEventListener("click",this.handleCloseButtonClickBouick",this.handleCloseButtonClickBound)}}]),t}(v()(HTMLElement));e.customElements.define("pt-predefined-message-selector",g)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(2),o=n.n(i),a=n(0),s=n.n(a),u=n(3),c=n.n(u),l=n(5),d=function(e){function t(){return r()(this,t),o()(this,s()(t).apply(this,arguments))}return c()(t,e),t}(n.n(l)()(HTMLElement));e.customElements.define("pt-status-badge",d)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(2),o=n.n(i),a=n(0),s=n.n(a),u=n(3),c=n.n(u),l=n(5),d=function(e){function t(){return r()(this,t),o()(this,s()(t).apply(this,arguments))}return c()(t,e),t}(n.n(l)()(HTMLElement));e.customElements.define("pt-status-indicator",d)}).call(this,n(4))},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(2),a=n.n(o),s=n(0),u=n.n(s),c=n(3),l=n.n(c),d=n(5),f=function(e){function t(){return i()(this,t),a()(this,u()(t).apply(this,arguments))}return l()(t,e),t}(n.n(d)()(HTMLElement));window.customElements.define("pt-performer-name",f)},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(2),o=n.n(i),a=n(0),s=n.n(a),u=n(3),c=n.n(u),l=n(5),d=function(e){function t(){return r()(this,t),o()(this,s()(t).apply(this,arguments))}return c()(t,e),t}(n.n(l)()(HTMLElement));e.customElements.define("pt-preloader",d)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(2),o=n.n(i),a=n(0),s=n.n(a),u=n(14),c=n.n(u),l=n(6),d=n.n(l),f=n(3),p=n.n(f),E=n(5),v=n.n(E),h=n(11),g=/(?:\(['"]?)(.*?)(?:['"]?\))/,m=function(e){function t(){var e;return r()(this,t),(e=o()(this,s()(t).call(this)))._processImages=Object(h.a)(e._processImages.bind(c()(e)),50),e}return p()(t,e),d()(t,null,[{key:"observedAttributes",get:function(){return["src","fallback-src"]}}]),d()(t,[{key:"attributeChangedCallback",value:function(){this._processImages()}},{key:"_processImages",value:function(){var e;clearTimeout(this._animationTimeoutId);var t=null!==(e=this.getAttribute("src"))&&void 0!==e?e:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",n=this.getAttribute("fallback-src"),r="url(".concat(t,")"),i=g.exec(this.style.getPropertyValue("background-image"));this.style.setProperty("background-image",r+(i&&i.length>0?", url(".concat(i[1],")"):"")),this.classList.remove("animate-fallback-image"),n&&(this._animationTimeoutId=setTimeout(this._showImages.bind(this,"".concat(r,", url(").concat(tyle.setProperty("background-image",e)}}]),t}(v()(HTMLElement));e.customElements.define("pt-profile-image",m)}).call(this,n(4))},function(e,t,n){"use strict";(function(e){var t=n(1),r=n.n(t),i=n(2),o=n.n(i),a=n(0),s=n.n(a),u=n(3),c=n.n(u),l=n(5),d=function(e){function t(){return r()(this,t),o()(this,s()(t).apply(this,arguments))}return c()(t,e),t}(n.n(l)()(HTMLElement));e.customElements.define{return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(6),a=n.n(o),s=n(2),u=n.n(s),c=n(0),l=n.n(c),d=n(3),f=n.n(d),p=n(20),E=n(14),v=n.n(E),h=n(5),g=n.n(h),m=n(39),b=n(15),y=function(e){function t(){return i()(this,t),u()(this,l()(t).apply(this,arguments))}return f()(t,e),a()(t,[{key:"_createChatMessage",value:function(e,t){switch(e){case b.a.TIP:return new p.b(t);case b.a.PERFORMER:return new p.a(t);case b.a.WELCOME:return new p.c(t);default:return new p.d(t)}}}]),t}(function(e){function t(){var e;return i()(this,t),(e=u()(this,l()(t).call(this))).handleResizeBound=e.handleResize.bind(v()(e)),e.messageListElement=new m.a,e.mouseDownHandlerBound=e.mouseDownHandler.bind(v()(e)),e}return f()(t,e),a()(t,[{key:"handleResize",value:function(e){e.length&&this.autoScroll&&this.scrollToBottom()}},{key:"mouseDownHandler",value:function(e){if(!(e.target instanceof HTMLAnchorElement)){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();var t=this.style.pointerEvents;this.style.pointerEvents="none",document.elementFromPoint(e.clientX,e.clientY).click(),this.style.pointerEvents=t}}},{key:"connectedCallback",value:function(){this.resizeObserver=new ResizeObserver(this.handleResizeBound),this.resizeObserver.observe(this),this.hasChildNodes()||this.appendChild(this.messageListElement),this.hasAttribute("click-pass-through")&&this.addEventListener("mousedown",this.mouseDownHandlerBound)}},{key:"disconnectedCallback",value:function(){this.resizeObserver.disconnect(),this.resizeObserver=null,this.removeEventListener("mousedown",this.mouseDownHandp=this.messageListElement.scrollHeight}},{key:"addMessage",value:function(e){var t,n=e.type,r=void 0===n?b.a.GUEST:n,i=this.getAttribute("max-messages");return i&&this.messageListElement.childNodes.length>=i&&this.messageListElement.removeChild(this.messageListElement.childNodes[0]),t=this._createChatMessage(r,e),this.messageListElement.appendChild(t),this.autoScroll&&this.scrollToBottom(),t}},{key:"addSelfMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Me";this.addMessage({se){this.messageListElement.innerHTreateChatMessage",value:function(e,t){}},{key:"autoScroll",get:function(){return this.hasAttribute("auto-scroll")}}]),t}(g()(HTMLElement)));window.customElements.define("pt-chat",y)}]);