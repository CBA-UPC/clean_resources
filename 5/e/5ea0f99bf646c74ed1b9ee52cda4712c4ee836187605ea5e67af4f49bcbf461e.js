/*! 20240116-10-RELEASE */

(()=>{class e{constructor(e,t){this.setOptions(e,t),this.setStyles(t),this.listenToTRCResponse(),this.listenToScrollOnce(),this.listenToKeys(),this.listenToExploreMoreEvents(),TRC.dispatch("footer-overlay-loaded")}setOptions(t,o){this.trcManager=t,this.showFooterOverlayOnEM=this.trcManager.global["footer-overlay-show-on-em"],e.isValidCard(o.card_number)&&(this.cardNumber=parseInt(o.card_number,10),this.links=o.links,this.legal=o.legal,this.logo=this.trcManager.getPublisherVersionPropertyWithFallbackToNetwork("publisher-logo"),this.enablePublisherLogo=void 0!==o.enable_publisher_logo?TRC.util.isTrue(o.enable_publisher_logo)&&this.logo:this.logo,this.style=o.style,this.delimiter=o.delimiter,this.cssOverride=o["css-override"])}etStyles(e){e.style["font-family"]=this.getFontFamily();const t=`#tbl-feed-footer-overlay.tbl-feed-footer-overlay { position: fixed; display: block !important; left: 0; right: 0; bottom: 0; z-index: 9999999999; max-height: 0; width: 100%; -webkit-transition: max-height 1000ms, border-top-width 1000ms; -moz-transition: max-height 1000ms, border-top-width 1000ms; -ms-transition: max-height 1000ms, border-top-width 1000ms; -o-transition: max-height 1000ms, border-top-width 1000ms; transition: max-height 1000ms, border-top-width 1000ms; overflow: hidden; direction: ${e.style.direction}; font-family: ${e.style["font-family"]}; font-size: ${e.style["font-size"]}; font-weight: ${e.style["font-weight"]}; color: ${e.style.color}; background-color: ${e.style["background-color"]}; border-top: 0 solid ${e.style["border-top-color"]}; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container { width: 100%; display: flex; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; -webkit-flex-direction: column; -moz-flex-direction: column; -ms-flex-direction: column; -o-flex-direction: column; flex-direction: column; -webkit-justify-content: center; -moz-justify-content: center; -ms-justify-content: center; -o-justify-content: center; justify-content: center; -ms-flex-pack: center; border-bottom-width: 1px; text-align: center; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-top-row { align-self: center; -webkit-align-self: center; display: inline-block; display: flex; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; -webkit-flex-direction: column; -moz-flex-direction: column; -ms-flex-direction: column; -o-flex-direction: column; flex-direction: column; -webkit-justify-content: center; -moz-justify-content: center; -ms-justify-content: center; -o-justify-content: center; justify-content: center; -ms-flex-pack: center; max-width: 75%; text-align: center; margin: 0 auto; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-top-row ul { list-style-type: none; display: inline-block; display: flex; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; -webkit-flex-wrap: wrap; -moz-flex-wrap: wrap; -ms-flex-wrap: wrap; -o-flex-wrap: wrap; flex-wrap: wrap; -webkit-justify-content: center; -moz-justify-content: center; -ms-justify-content: center; -o-justify-content: center; justify-content: center; -ms-flex-pack: center; padding: 0 40px; margin-bottom: 10px; margin-top: 16px; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-top-row ul li { float: left; padding: 4px; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-top-row ul li a, #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-top-row ul li a:link { text-decoration: none; font-family: ${e.style["font-family"]}; color: ${e.style.color}; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-top-row ul li span { vertical-align: middle; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-top-row hr { align-self: center; width: 85%; margin: 0 auto 8px auto; color: ${e.style.color}; background-color: ${e.style.color}; border-color: ${e.style.color}; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-bottom-row { display: flex; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex; -webkit-flex-wrap: nowrap; -moz-flex-wrap: nowrap; -ms-flex-wrap: nowrap; -o-flex-wrap: nowrap; flex-wrap: nowrap; -webkit-justify-content: center; -moz-justify-content: center; -ms-justify-content: center; -o-justify-content: center; justify-content: center; -ms-flex-pack: center; margin-bottom: 5px; text-align: center; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-bottom-row .tbl-footer-legal { display: inline-block; vertical-align: middle; align-self: center; -webkit-align-self: center; text-align: center; padding: 3px 0; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-bottom-row .tbl-footer-logo { display: inline-block; vertical-align: middle; align-self: center; -webkit-align-self: center; margin: 0 5px; max-height: 30px; }@media (min-width: 500px) and (max-width: 850px) { #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-top-row { max-width: 90%; } }@media (max-width: 500px) { #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-top-row { min-width: 100%; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-top-row ul { padding: 0 25px; } #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-top-row hr { width: 95%; } }#tbl-feed-footer-overlay.tbl-footer-show { max-height: 200px; border-top-width: ${e.style["border-top-width"]}; }@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) { #tbl-feed-footer-overlay.tbl-feed-footer-overlay .tbl-footer-container .tbl-footer-top-row { max-width: 75%; width: 450px; } }`,o=this.cssOverride||``,r=`${t} ${o}`;TRC.dom.injectStyle(r,null)}getFontFamily(){if("inherit"===this.style["font-family"]&&this.style["font-family-inherit"]){const e=this.style["font-family-inherit"],t=document.querySelectorAll(e);if(t&&t.length>0){const e=t[0],o=getComputedStyle(e);return o.fontFamily}}return this.style["font-family"]}renderIfCardAboveViewport(){const t=this.getBatchAnchor();if(!t)return;const o=e.getWindowTop(),r=e.getElementTop(t);if(r<o)return void this.showFooterOverlay();const i=this.getCard(this.cardNumber+1);if(!i)return;const l=e.getElementTop(i);l<o&&this.showFooterOverlay()}nTRCResponse(){if(this.targetCard)return void this.trcResponseListener.remove();const e=this.getCard(this.cardNumber);e&&(this.targetCard=e,this.observeCard(e))}observeCard(e){const t={targetElement:e,onEnter:this.showFooterOverlay.trcBind(this),onExit:this.hideFooterOverlay.trcBind(this),threshold:0};this.observerTarget=TRC.intersections.observe(t)}andleScroll(){setTimeout(200),TRC.dom.off(window,"scroll",this.onScroll)}nKeyPress(e){const t=e||window.event,{keyCode:o,metaKey:r}=t;(36===o||r&&38===o)&&this.hideContainer(),(35===o||r&&40===o)&&this.targetCard&&this.showFooterOverlay()}showFooterOverlay(){if(this.isVisible=!0,!this.footerContainer)return this.renderFooterTemplate(),void this.sendEvent("footerOverlayCreated");TRC.dispatch("footer-overlay-active",!0),TRC.dom.addClass(this.footerContainer,e.CSS_CLASSES.FOOTER_OVERLAY_SHOW)}hideFooterOverlay(e,t){this.footerContainer&&t&&e.boundingClientRect.top>0&&this.hideContainer()}hideContainer(){this.footerContainer&&(setTimeout(1e3),TRC.dom.removeClass(this.footerContainer,e.CSS_CLASSES.FOOTER_OVERLAY_SHOW),this.isVisible=!1)}static getElementTop(e){if(e){let t=e,o=0;if(document.getElementById||document.all)do{for(o+=e.offsetTop-e.scrollTop,e=e.offsetParent,t=t.parentNode;t!==e;)o-=t.scrollTop,t=t.parentNode}while(e&&e.offsetParent);else document.layers&&(o+=e.y);return o}}static getWindowTopenderFooterTemplate(){const{FOOTER_OVERLAY:t,FOOTER_OVERLAY_CONTAINER:o}=e.CSS_CLASSES,r=`<div id="${t}" class="${t}">\n                    <div class="${o}">\n                        ${this.createTopRow()}\n                        ${this.createBottomRow()}\n                    </div>\n                </div>`;document.body.insertAdjacentHTML("beforeend",r),this.footerContainer=document.querySelector(`#${t}`),setTimeout(100)}createTopRow(){const t=this.createLinksList();return`${t.length>0?`<div class="${e.CSS_CLASSES.FOOTER_OVERLAY_TOP_ROW}">\n ${t} \n<hr size="1"></div>`:``}`}createBottomRow(){const{FOOTER_OVERLAY_BOTTOM_ROW:t,FOOTER_OVERLAY_LEGAL:o,FOOTER_OVERLAY_LOGO:r}=e.CSS_CLASSES;return this.legal||this.enablePublisherLogo?`<div class="${t}">\n                            ${this.enablePublisherLogo?`<img class="${r}" src="${this.logo}">`:``}\n                            ${this.legal?`<div class="${o}">${this.legal}</div>`:``}\n                        </div>`:``}createLinksList(){let t=``;return this.links.forEach((o,r)=>{"false"!==o.isEnabled&&!1!==o.isEnabled&&(this.delimiter&&r>0&&r<this.links.length&&(t+=e.createLinkDelimiter(this.delimiter)),t+=e.createLink(o))}),t.length>0?`<ul>${t}</ul> \n`:``}tenToExploreMoreEvents(){this.showFooterOverlayOnEM&&(TRC.listen("ExploreMoreLoaded",this.initListeners.trcBind(this)),TRC.listen("ExploreMoreHide",this.initListeners.trcBind(this)))}initListeners(){this.targetCard&&(this.targetCard=null,this.trcResponseListener.remove(),this.listenToTRCResponse(),this.listenToKeys()),this.hideFooterWhenSwitching()}hideFooterWhenSwitching(){this.footerContainer&&TRC.dom.containsClass(this.footerContainer,e.CSS_CLASSES.FOOTER_OVERLAY_SHOW)&&this.hideContainer()}getBatchAnchor(){return this.returnElementInExploreMore(`.${e.CSS_CLASSES.BATCH_ANCHOR}`)}eturnElementInExploreMore(t){const{EXPLORE_MORE_SHOW:o,EXPLORE_MORE_CONTAINER:r}=e.CSS_CLASSES;return TRC.dom.containsClass(document.body,o)?this.showFooterOverlayOnEM?document.querySelector(`#${r} ${t}`):null:document.querySelector(`${t}`)}}e.CSS_CLASSES={EXPLORE_MORE_CONTAINER:"tbl-explore-more-container",EXPLORE_MORE_SHOW:"tbl-show-explore-more",FOOTER_OVERLAY_CONTAINER:"tbl-footer-container",FOOTER_OVERLAY:"tbl-feed-footer-overlay",FOOTER_OVERLAY_SHOW:"tbl-footer-show",FOOTER_OVERLAY_TOP_ROW:"tbl-footer-top-row",FOOTER_OVERLAY_BOTTOM_ROW:"tbl-footer-bottom-row",FOOTER_OVERLAY_LEGAL:"tbl-footer-legal",FOOTER_OVERLAY_LOGO:"tbl-footer-logo",BATCH_ANCHOR:"tbl-batch-anchor"},TRC.FooterOverlay=e})();