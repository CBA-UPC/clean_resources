/*! 20240206-32-RELEASE */

(()=>{const t={openBtn:"Learn More",sponsored:"Sponsored"};TRC._translationQueue=TRC._translationQueue||[],TRC._translationQueue.push({vignette:t});const{TaboolaUnit:e}=TRC;class n extends e{constructor(t){super(t.config.placementName);try{const{_CONSTANTS:e,config:n}=t;if(this.vignetteEl=this.productContainer,!this.vignetteEl)return;if(this.vignetteItem=this.getVignetteItem(),!this.vignetteItem)return;this.trcManager=t.trcManager,this.placementData=t.placementData,this.constants=e,this.vignetteManager=t,this.options=this.getOptions(n),this.SessionHandler=this.getSessionHandler(),this.hasOpportunity=this.shouldShowVignette(),this.vignetteParent=this.vignetteEl.parentElement,this.firstShowOfVignette=!0,this.reportData={includedUrls:[],excludedUrls:[],linksCount:0,anchors:[]},TRC.dispatch("vignette-loaded"),this.xButtonShow=this.getClientProperty("vignette-xButtonShow"),this.init()}catch(e){t.onError("constructor",e.message)}}static getDynamicConfig(t){return e.getAllDynamicConfig(t,"dynamicConfigOverride")}getClientProperty(t){const e=this.placementData&&this.placementData.m,n=e&&this.trcManager.getProperty(e,t);return n}setCssProperties(){const{CSS_PROPERTIES:t}=this.constants;let e="";t.forEach(t=>{const n=this.getClientProperty(t);n&&(e+=`--${t}: ${n};`)}),e&&n.setMultipleCssVariables(e)}setXBtnPosition(){const t=this.getClientProperty("vignette-xButtonPosition"),e="left"===t,i=e?"--vignette-xButtonLeft: 0":"--vignette-xButtonRight:0";n.setMultipleCssVariables(i)}getOptions(t){const e=n.getDynamicConfig(t),{placementName:i,basePath:o,internalLinksOnly:s,excludeBySelector:r,excludeUrls:a,frequencyCapping:l,blockClickTime:c,mixpanelSample:h,actionButtons:g,blockClicksAfterFirstClick:d,scInNewTab:b,closeVignetteAfterRedirect:u,showDespiteStorageIssue:p,basePathDebug:m,blockClicksMarginalValue:v}=e;return{placementName:i,basePath:o||"html",basePathDebug:m||"html a",internalLinksOnly:n.isEnabledByDefault(s),excludeBySelector:C.call(this,r),excludeUrls:a||[],frequencyCapping:TRC.util.isNumber(l)?Number(l):3,blockClickTime:isNaN(Number(c))?500:c,mixpanelSample:TRC.util.getPositiveNumber(h,.01),actionButtons:n.handleActionButtonConfig(g),blockClicksAfterFirstClick:TRC.util.isEnabledByDefault(d),scInNewTab:TRC.util.isTrue(b),closeVignetteAfterRedirect:TRC.util.isTrue(u),showDespiteStorageIssue:n.isEnabledByDefault(p),blockClicksMarginalValue:v||0};function C(t){return TRC.util.isDefined(t)&&TRC.util.isArray(t)?t:TRC.dom.isSmartPhone()?[]:this.constants.DEFAULT_EXCLUDE_BY_SELECTORS}}getSessionHandler(){const{MODULE_NAME:t,EVENTS:e}=this.constants,{pageManager:n}=TRC;return{pm:n,supportSessionStorage:(()=>!!n.sessionStorageIsSupported()||(this.vignetteManager.sendEvent(e.SESSION_STORAGE_UNSUPPORTED),!1))(),get(){const e=this.pm.sessionStorageGetValue(t);return e?parseInt(e,10):0},set(){const e=this.get();this.pm.sessionStorageSetValue(t,e+1)},remove(){this.pm.sessionStorageRemoveKey(t)}}}static handleActionButtonConfig(t){t||(t={open:{},close:{}});const{open:{openBtnColor:e="#000000",openBtnColorText:i="#fff",openBtnText:o=n.getTextByLang("openBtn")}}=t;return{open:{btnColor:e,btnTextColor:i,btnText:o}}}isNoCapping(){const{frequencyCapping:t}=this.options;return-1===t}isPaidPubs(){const t=this.placementData&&this.placementData.m,e="thumbnails-vignette-a",n="-delta";return t===e||t===e+n}shouldShowVignette(){const{forceDebugMode:t}=this.vignetteManager;if(this.shouldUpdateSessionStorage=!1,t&&!n.isDebugSessionHandlerOn())return!0;if(this.isNoCapping()||this.isPaidPubs())return!0;const{supportSessionStorage:e}=this.SessionHandler;if(!e){const{showDespiteStorageIssue:t}=this.options;if(!t){const t="supportSessionStorage is false and showDespiteStorageIssue is false";return this.missedReasonData={missedReason:t},!1}return!0}this.displayInSession=this.SessionHandler.get(),this.shouldUpdateSessionStorage=!0;const{frequencyCapping:i}=this.options;if(this.displayInSession>=i){const t="already have been displayed on session";return this.missedReasonData={missedReason:t,displayInSession:this.displayInSession},!1}return!0}isGoogleVignetteLoaded(){const t=document.querySelector('[data-vignette-loaded="true"]');return!!t&&(this.missedReasonData={missedReason:"google vignette"},!0)}init(){try{const{MODULE_NAME:t,SELECTORS:e,EVENTS:i}=this.constants;if(this.vignetteManager.sendEvent(i.SCRIPT_LOADED,{timeFromLoad:n.getTimeFromLoad()}),TRC.historyApi.currentState()===t&&TRC.historyApi.back(),this.handlingBfCache(),!this.hasOpportunity)return void this.skipVignette();this.rboxContainer=this.vignetteEl.querySelector(`.${e.RBOX_CONTAINER}`),TRC.dom.addClass(this.vignetteEl,e.CONTAINER),this.handlePageAnchors(),TRC.dom.addClass(this.vignetteEl,e.OPPORTUNITY_VIGNETTE),this.handleBackground(),this.vignetteManager.forceDebugMode&&this.handleDebugMode(),n.injectStyle(),this.setCssProperties(),this.setXBtnPosition()}catch(t){this.vignetteManager.onError("init",t.message,t.stack)}}handlePageAnchors(){const t=document.querySelector(this.options.basePath),e=TRC.util.isTrue(this.trcManager.global["vignette-capture-page-click"]);t.addEventListener("click",t=>{this.handleClickedEl(t)},e)}handleClickedEl(t){const e=t.target;if(!e||this.isInsideVignette(e))return;const n=TRC.dom.closest(e,"a");function i(){const{excludeBySelector:t}=this.options;return t.some(t=>TRC.dom.closest(n,t))}n&&!i.call(this)&&(this.anchorEl=n,this.handleAnchor(t))}isInsideVignette(t){return this.vignetteEl.contains(t)}handleAnchor(t){const{constants:e,anchorEl:n}=this,{SELECTORS:i}=e;Object.keys(i.TABOOLA_LINKS).forEach(t=>{TRC.dom.containsClass(n,i.TABOOLA_LINKS[t])&&(n.taboolaAnchor=!0)});const o=this.isTaboolaAnchor()?this.getOriginalLink():n.getAttribute("href"),s=r.call(this,o,n.host);function r(t,e){try{return new URL(t).host}catch(t){return this.vignetteManager.onError(`get Host`,t.message,null,__trcWarn),e}}this.shouldExcludeLink(o,s)||this.handleAnchorClick(t)}shouldExcludeLink(t,e){const{excludeUrls:n,internalLinksOnly:i}=this.options;let o=!t||"#"===t[0]||n.indexOf(t)>-1;return i&&!o&&(o=e!==window.location.host),o}static injectStyle(){TRC.dom.injectStyle(`:root { --vignette-closeButtonBackgroundColor: #ffffff00; --vignette-closeButtonFontColor: #6B6666; --vignette-closeButtonFontFamily: Arial; --vignette-closeButtonHoverColor: rgba(234, 234, 234, 0.07); --vignette-openButtonBackgroundColor: #000000; --vignette-openButtonFontColor: #fff; --vignette-openButtonFontFamily: Arial; --vignette-openButtonHoverColor: #313131; --vignette-screenBackgroundOpacity: 0.8; --vignette-screenBackgroundColor: #fff; --vignette-buttonsTopSpacing: none; --container-width: auto; }body.tbl-vignette-show { overflow: auto !important; }.tbl-vignette { /*simple solution for forcing the image to be rendered */ display: block; visibility: hidden; height: 100% !important; width: 100% !important; top: auto !important; left: auto !important; right: -1200% !important; bottom: auto !important; clear: none !important; float: none !important; margin: 0 !important; max-height: none !important; max-width: none !important; opacity: 1 !important; overflow: visible !important; padding: 0 !important; position: fixed !important; vertical-align: baseline !important; z-index: 2147483647 !important; background: rgba(52, 58, 65, 0.6); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); font-family: Arial, Helvetica, sans-serif; } .tbl-vignette.trc_related_container .trc_header_ext .attribution-disclosure-link-sponsored a { font-size: 15px; font-weight: normal; color: #6B6666; } .tbl-vignette.tbl-vignette-show { right: 0 !important; top: 0 !important; visibility: visible; } .tbl-vignette * { visibility: inherit !important; } .tbl-vignette.tbl-vignette-opportunity { display: -webkit-box !important; display: -webkit-flex !important; display: -ms-flexbox !important; display: flex !important; -webkit-box-pack: center; -webkit-justify-content: center; -ms-flex-pack: center; justify-content: center; } .tbl-vignette .tbl-vignette-background { position: absolute; top: 0; left: 0; right: 0; bottom: 0; height: 100%; width: 100%; background-color: #fff; opacity: 0.8; background-color: var(--vignette-screenBackgroundColor); opacity: var(--vignette-screenBackgroundOpacity); } .tbl-vignette .tbl-vignette-background.tbl-vignette-background-image { -webkit-filter: blur(10px); -moz-filter: blur(10px); -ms-filter: blur(10px); -o-filter: blur(10px); filter: blur(10px); } .tbl-vignette .tbl-vignette-close-btn-wrp { -webkit-box-sizing: initial; -moz-box-sizing: initial; -ms-box-sizing: initial; -o-box-sizing: initial; box-sizing: initial; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; display: -webkit-box; display: -webkit-flex; display: -ms-flexbox; display: flex; -webkit-box-align: center; -webkit-align-items: center; -ms-flex-align: center; align-items: center; -webkit-tap-highlight-color: transparent; -webkit-touch-callout: none; position: absolute; z-index: 1; width: auto; top: 0; height: 15px; background: #000; right: 0; height: var(--vignette-xButtonSize, 15px); padding: 15px 10px; background: var(--vignette-xButtonBackgroundColor, #000000); left: var(--vignette-xButtonLeft); right: var(--vignette-xButtonRight); } .tbl-vignette .tbl-vignette-close-btn-wrp:focus { outline: none; } .tbl-vignette .tbl-vignette-close-btn-wrp.tbl-vignette-loader-wrp svg { width: var(--vignette-xButtonSize, 15px)10px; height: var(--vignette-xButtonSize, 15px)10px; margin: 0; } .tbl-vignette .tbl-vignette-close-btn-wrp a { color: #fff; font-weight: 400; font-size: 14px; padding: 0 10px; } .tbl-vignette .tbl-vignette-close-btn-wrp a:hover { color: #fff; text-decoration: none; } .tbl-vignette .tbl-vignette-close-btn-wrp svg { width: inherit; height: inherit; vertical-align: initial; margin: 10px; } .tbl-vignette .tbl-vignette-close-btn-wrp #tbl-vignette-close-btn path { stroke: var(--vignette-xButtonColor, #ffffff); } @media (min-width: 1280px) { .tbl-vignette .tbl-vignette-close-btn-wrp #tbl-vignette-close-btn:hover { cursor: pointer; } } .tbl-vignette .trc_rbox_container { height: 100%; width: 100%; display: -webkit-box !important; display: -webkit-flex !important; display: -ms-flexbox !important; display: flex !important; -webkit-box-pack: center; -webkit-justify-content: center; -ms-flex-pack: center; justify-content: center; -webkit-box-align: baseline; -webkit-align-items: baseline; -ms-flex-align: baseline; align-items: baseline; } .tbl-vignette .trc_rbox_container .trc_rbox_outer { margin: 0; } .tbl-vignette .trc_rbox_container .trc_rbox_header .trc_header_ext .attribution-disclosure-link-sponsored { margin-bottom: 5px; } .tbl-vignette .trc_rbox_container .videoCube { margin: 0 auto; width: 100%; /* todo: the brand team should find a solution to disable cta on specific mode for now we will hide it */ } .tbl-vignette .trc_rbox_container .videoCube .video-label-box-cta { height: unset !important; } .tbl-vignette .trc_rbox_container .videoCube .video-cta-href { display: none; } .tbl-vignette .trc_rbox_container .videoCube .trc-widget-footer { display: flex; margin-bottom: 5px; } .tbl-vignette .trc_rbox_container .videoCube .tbl-vignette-attribution { font-size: 15px; color: #6B6666; display: inline-block; margin-bottom: 5px; width: 100%; } .tbl-vignette .trc_rbox_container .videoCube .tbl-vignette-attribution:hover { cursor: default; text-decoration: none; } .tbl-vignette .trc_rbox_container .trc_rbox { padding: 20px; position: relative; margin-top: 7vh; width: var(--container-width); } .tbl-vignette .trc_rbox_container .trc_rbox_div { max-width: 70vh; } .tbl-vignette .tbl-vignette-btns-wrp { display: -webkit-box; display: -webkit-flex; display: -ms-flexbox; display: flex; -webkit-box-pack: center; -webkit-justify-content: center; -ms-flex-pack: center; justify-content: center; margin-bottom: 20px; margin-top: var(--vignette-buttonsTopSpacing); } .tbl-vignette .tbl-vignette-btns-wrp .tbl-vignette-btn { -webkit-box-pack: center; -webkit-justify-content: center; -ms-flex-pack: center; justify-content: center; -webkit-box-align: center; -webkit-align-items: center; -ms-flex-align: center; align-items: center; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -o-box-sizing: border-box; box-sizing: border-box; -webkit-border-radius: 7px; -moz-border-radius: 7px; -ms-border-radius: 7px; -o-border-radius: 7px; border-radius: 7px; -webkit-box-shadow: 0 2px 4px rgba(134, 140, 150, 0.65); -moz-box-shadow: 0 2px 4px rgba(134, 140, 150, 0.65); -ms-box-shadow: 0 2px 4px rgba(134, 140, 150, 0.65); -o-box-shadow: 0 2px 4px rgba(134, 140, 150, 0.65); box-shadow: 0 2px 4px rgba(134, 140, 150, 0.65); font-size: 20px; font-weight: 400; text-align: center; padding: 2vh 4vw; border: none; cursor: pointer; width: 100%; display: flex; text-transform: none !important; } @media (min-width: 1280px) { .tbl-vignette .tbl-vignette-btns-wrp .tbl-vignette-btn { padding: 1.3vh 2vw; margin-inline-start: 20px; width: 80%; } } .tbl-vignette .tbl-vignette-btns-wrp .tbl-vignette-btn[disabled] { opacity: 0.5; cursor: not-allowed; } .tbl-vignette .tbl-vignette-btns-wrp .tbl-vignette-btn.tbl-vignette-btn-open { background-color: #000000; color: #fff; background-color: var(--vignette-openButtonBackgroundColor); color: var(--vignette-openButtonFontColor); font-family: var(--vignette-openButtonFontFamily); } .tbl-vignette .tbl-vignette-btns-wrp .tbl-vignette-btn.tbl-vignette-btn-close { background-color: rgba(255, 255, 255, 0); color: #6B6666; background-color: var(--vignette-closeButtonBackgroundColor); color: var(--vignette-closeButtonFontColor); font-family: var(--vignette-closeButtonFontFamily); } @media (min-width: 1280px) { .tbl-vignette .tbl-vignette-btns-wrp .tbl-vignette-btn.tbl-vignette-btn-open:hover { background: var(--vignette-openButtonHoverColor); } .tbl-vignette .tbl-vignette-btns-wrp .tbl-vignette-btn.tbl-vignette-btn-close:hover { background: var(--vignette-closeButtonHoverColor); } } @media (min-width: 1280px) { .tbl-vignette .tbl-vignette-btns-wrp .tbl-vignette-btn:hover { -webkit-box-shadow: 0 1px 2px rgba(134, 140, 150, 0.65); -moz-box-shadow: 0 1px 2px rgba(134, 140, 150, 0.65); -ms-box-shadow: 0 1px 2px rgba(134, 140, 150, 0.65); -o-box-shadow: 0 1px 2px rgba(134, 140, 150, 0.65); box-shadow: 0 1px 2px rgba(134, 140, 150, 0.65); } }`)}static getTimeFromLoad(){try{const{responseEnd:t}=window.performance.timing,e=Date.now();return e-t}catch(t){return"time from load not supported"}}getOrganicClickData(){try{const{placement:t,mode:e}=this.anchorEl.parentElement.video_data;return{placement:t,mode:e}}catch(t){this.vignetteManager.onError(`GetOrganicClickData`,t.message,null,__trcWarn)}}getOriginalLink(){try{return this.anchorEl.parentElement.video_data.url}catch(t){this.vignetteManager.onError(`GetOriginalLink`,t.message,null,__trcWarn)}}isTaboolaAnchor(){return!!this.anchorEl.taboolaAnchor}handleAnchorClick(t){const{displayInSession:e,constants:n}=this,{EVENTS:i}=n;let o;this.hasOpportunity=this.shouldShowVignette(!0)&&!(this.isGoogleVignetteLoaded()&&!this.isTaboolaAnchor()),this.isTaboolaAnchor()&&(o=this.getOrganicClickData()),this.vignetteManager.sendEvent(i.LINK_CLICKED,{displayInSession:e,showVignette:this.hasOpportunity,organicClickData:o}),this.hasOpportunity?this.showVignette(t):this.skipVignette()}showVignette(t){t.stopPropagation(),t.preventDefault(),this.shouldUpdateSessionStorage&&this.SessionHandler.set();const{EVENTS:e}=this.constants;this.handleHistory(),this.firstShowOfVignette?this.handleVignetteOnFirstShow():this.resetVignette(),this.toggleClasses("addClass"),this.blockUnintentionalClicks(),this.vignetteManager.sendEvent(e.CONTAINER_VISIBLE),TRC.MetricsManager.sendMetricsEvent(TRC,this.trcManager,{name:"VignetteShown",value:"1",type:"counter"},null)}skipVignette(){const{EVENTS:t}=this.constants;this.vignetteManager.sendEvent(t.MISSED,this.missedReasonData)}handleHistory(){const{MODULE_NAME:t}=this.constants;TRC.historyApi.pushState(t),TRC.historyApi.onPopState(()=>this.closeVignette("browser back"),{stateCheck:e=>e[t]})}handleVignetteOnFirstShow(){const{vignetteItem:t,vignetteEl:n,rboxContainer:i}=this,o=this.options.scInNewTab?"_blank":"_self";if(this.firstShowOfVignette=!1,!t||!t.video_data)return;this.handleVignetteSize(),this.xButtonShow&&this.handleXBtn(),this.handleCloseBgClick(),this.handleActionBtns(),this.handleVignetteElement(n,o),this.handleWidgetlisteners(n);const{blockClicksMarginalValue:s}=this.options;s&&e.blockElementMarginalClicks(i,s),this.trcManager&&this.trcManager.global&&!TRC.util.isTrue(this.trcManager.global["remove-old-vignette-disclosure"])?this.handleAttribution():this.removeRBoxClickHandlerFromDisclosureLink()}removeRBoxClickHandlerFromDisclosureLink(){TRCImpl.sendAbTestEvent("new-global-disclosure",{url:location.href});const{SELECTORS:t}=this.constants,e=this.rboxContainer.querySelectorAll(t.DESKTOP_DISCLOSURE);TRC.util.toArray(e).forEach(t=>t.onclick=null)}handleVignetteElement(t,e){n.setTarget(t,e),TRC.dom.on(t,"click",()=>{TRC.Timeout.set(()=>{this.handleCloseVignetteAfterNewTab()})})}getVignetteItem(){try{return this.vignetteEl.getElementsByClassName("videoCube")[0]}catch(t){this.vignetteManager.onError(`getVignetteItem`,t.message,null,__trcWarn)}}handleXBtn(){const{SELECTORS:t}=this.constants,e=this.anchorEl.href;this.closeBtnContainer=TRC.dom.createHTMLElement("div",{className:t.CLOSE_BUTTON.WRAPPER}),TRC.dom.addClass(this.closeBtnContainer,t.LOADER.WRP),this.closeBtnContainer.insertAdjacentHTML("afterbegin",this.getXBtnLayout()),TRC.dom.on(this.closeBtnContainer,"click",()=>this.redirectToNextPage(e,"X btn","_self","close")),this.vignetteEl.insertAdjacentElement("afterbegin",this.closeBtnContainer)}handleAttribution(){const t=TRC.implClasses.TRCRBox.prototype.getPopupUrl.bind(this.vignetteItem.rbox),e=n.getTextByLang("sponsored"),i=TRC.dom.createHTMLElement("a",{className:`${this.constants.SELECTORS.ATTRIBUTION}`,innerText:e,target:"_blank",href:`https://${t()}`});this.vignetteItem.insertAdjacentElement("afterbegin",i)}getXBtnLayout(){const{SELECTORS:t}=this.constants,e=15;return`<svg id="${t.CLOSE_BUTTON.SVG}" width="${e}" height="${e}" viewBox="0 0 ${e} ${e}" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M0 0 0 0L${e} ${e}" stroke="#ffffff" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M${e} 0 ${e} 0L0 ${e}" stroke="#ffffff" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>`}handleBackground(){const{vignetteItem:t,vignetteEl:e,constants:{SELECTORS:n}}=this;e.insertAdjacentHTML("afterbegin",this.getBackgroundLayout());const i=TRC.listen("item-image-loaded",o=>{if(o.container===t){const t=`.${n.BACKGROUND.CONTAINER} .${n.BACKGROUND.IMG}`;e.querySelector(t).src=o.container.img_src||"",i.remove()}})}getBackgroundLayout(){const{SELECTORS:t}=this.constants;return`\n            <div class="${t.BACKGROUND.CONTAINER}">\n                <img class="${t.BACKGROUND.IMG} ${t.BACKGROUND.BASE}" alt="backgroung image">\n                <div class="${t.BACKGROUND.SCREEN} ${t.BACKGROUND.BASE}"></div>\n            </div>`}handleCloseBgClick(){const{SELECTORS:t}=this.constants;TRC.dom.on(this.vignetteEl,"click",e=>{if(e.stopPropagation(),"DIV"===e.target.tagName&&n.targetContainsClass(e,["trc_related_container",t.BACKGROUND.BASE,t.ACTION_BUTTON.WRAPPER])){const t=this.anchorEl.href;this.redirectToNextPage(t,"background","_self","close")}})}static isDisclosureAnchor(t){return TRC.dom.closest(t,".attribution-disclosure-link-sponsored")&&TRC.dom.closest(t,".trc_header_ext")}static setTarget(t,e){const n=t.getElementsByTagName("a");TRC.util.toArray(n).forEach(t=>{TRC.util.toArray(n).forEach(t=>t.target=e),this.isDisclosureAnchor(t)?TRCImpl.sendAbTestEvent("new-global-disclosure",{url:location.href}):t.target=e})}handleWidgetlisteners(t){const{SELECTORS:{TABOOLA_LINKS:e}}=this.constants,n=t.querySelector(`.${e.ITEM_THUMBNAIL}`),i=t.querySelector(`.${e.ITEM_LABEL}`);n&&TRC.dom.on(n,"click",()=>!this.isRedirectEventSent&&this.handleWidgetClick("thumbnail")),i&&TRC.dom.on(i,"click",()=>!this.isRedirectEventSent&&this.handleWidgetClick("labels"))}handleWidgetClick(t){const{EVENTS:{REDIRECT:e}}=this.constants;this.vignetteManager.sendEvent(e,{trigger:t}),this.isRedirectEventSent=!0}handleActionBtns(){const{SELECTORS:t}=this.constants,e=TRC.dom.createHTMLElement("div",{className:t.ACTION_BUTTON.WRAPPER});this.openBtn=this.getActionButton("open"),e.appendChild(this.openBtn),this.rboxContainer.insertAdjacentElement("beforeend",e)}getActionButton(t){const{options:e,constants:i}=this,{btnText:o,btnTextColor:s,btnColor:r}=e.actionButtons[t],{SELECTORS:a}=i,l=this.getClientProperty(`vignette-${t}ButtonText`),c="string"==typeof l&&l||o;let h="_self";const g=TRC.dom.createHTMLElement("a",{className:`${a.ACTION_BUTTON.BASE} ${a.ACTION_BUTTON[t.toUpperCase()]}`,innerText:c});return this.options.scInNewTab&&(h="_blank"),g.onclick=(()=>{const t=this.vignetteItem.querySelector(".item-thumbnail-href")||this.vignetteItem.querySelector(".item-label-href"),e=t.ontouchstart||t.onmousedown;e?(e(),g.href=t.href):g.href=t.logger_url,g.target=h}),TRC.dom.on(g,"click",()=>{this.redirectToNextPage(null,`${t} btn`,h,"open")}),n.setCssValue(`${t}BtnColor`,r),n.setCssValue(`${t}BtnColorText`,s),g}static setCssValue(t,e){e&&document.documentElement.style.setProperty(`--${t}`,e)}handleVignetteSize(){const t=TRC.dom.isSmartPhone(),e=window.innerWidth||document.documentElement.clientWidth,i=t?e:e/this.constants.SIZES.DESK_SCREEN_VIGNETTE_RATIO;function o(){n.setCssValue("container-width",`${i}px`)}function s(){const t=this.vignetteItem.querySelector(".video-label.video-title"),e=this.vignetteItem.querySelector(".video-label.video-description"),n=t&&r(getComputedStyle(t).width),o=e&&r(getComputedStyle(e).width),s=.75*i;return o&&o<s&&n&&n<s;function r(t){if(!t)return null;const e=/\d+/,n=t.match(e);return n&&n[0]&&Number(n[0])}}s.call(this)&&o.call(this)}static setMultipleCssVariables(t){t&&(document.documentElement.style.cssText+=t)}blockUnintentionalClicks(){super.blockUnintentionalClicks(this.options.blockClickTime)}closeVignette(t){const{EVENTS:e}=this.constants;this.vignetteManager.sendEvent(e.CLOSE,{trigger:t}),this.toggleClasses("removeClass")}toggleClasses(t){const{SELECTORS:e}=this.constants;TRC.dom[t](document.body,e.SHOW_VIGNETTE),TRC.dom[t](this.vignetteEl,e.SHOW_VIGNETTE)}static getTextByLang(e){const n=TRC.translationManager.getLabel({feature:"vignette"});return n[e]||t[e]}static targetContainsClass(t,e){return e.some(e=>TRC.dom.containsClass(t.target,e))}handleCloseVignetteAfterNewTab(){if(!this.options.closeVignetteAfterRedirect)return;const{EVENTS:t}=this.constants;n.handleLinkRedirect(this.anchorEl.href,"_self"),this.vignetteManager.sendEvent(t.CLOSE,"open-in-new-tab")}static handleLinkRedirect(t,e){Object.assign(document.createElement("a"),{target:e,href:t}).click()}showPreloader(){const{SELECTORS:t}=this.constants,e=this.closeBtnContainer.querySelector(`#${t.CLOSE_BUTTON.SVG}`);e&&(e.style.display="none");const n=this.closeBtnContainer.querySelector(`#${t.LOADER.SVG}`);n?n.style.display="block":this.closeBtnContainer.insertAdjacentHTML("beforeend",this.getLoadingLayout())}resetVignette(){this.removePreloader(),this.isBlockingClicks=!1,this.isRedirectEventSent=!1}removePreloader(){const{SELECTORS:t}=this.constants,e=this.closeBtnContainer.querySelector(`#${t.CLOSE_BUTTON.SVG}`);e&&(e.style.display="block");const n=this.closeBtnContainer.querySelector(`#${t.LOADER.SVG}`);n&&(n.style.display="none")}blockClicksAfterFirstClick(){const{SELECTORS:t}=this.constants;this.options.blockClicksAfterFirstClick&&(TRC.dom.addClass(this.vignetteParent,t.BLOCK_CLICKS),this.isBlockingClicks=!0)}redirectToNextPage(t,e,n="_self",i="open"){try{"_self"===n&&(this.showPreloader(),this.blockClicksAfterFirstClick()),this.handleWidgetClick(e),"open"!==i&&this.closeButtonRedirect(t,n)}catch(t){this.vignetteManager.onError("redirectToNextPage",t.message)}}closeButtonRedirect(t,e){setTimeout(()=>{n.handleLinkRedirect(t,e),this.handleCloseVignetteAfterNewTab()})}getLoadingLayout(){const{SELECTORS:t}=this.constants;return`<svg id="${t.LOADER.SVG}" xmlns="http://www.w3.org/2000/svg" style="shape-rendering: auto;" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">\n                        <circle cx="50" cy="50" fill="none" stroke="#ffffff" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138">\n                          <animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform>\n                        </circle>\n                    <</svg>`}static isEnabledByDefault(t){return!TRC.util.isDefined(t)||TRC.util.isTrue(t)}static isDisabledByDefault(t){return!!TRC.util.isDefined(t)&&TRC.util.isTrue(t)}handlingBfCache(){TRC.dom.on(window,"pageshow",t=>{t.persisted&&this.closeVignette()})}getAnchorsSelectors(){const{basePathDebug:t,excludeBySelector:e}=this.options,n=e.map(t=>`:not(${t})`).join("");return[t,n].join("")}logDataReportToConsole(){const{includedUrls:t,excludedUrls:e,anchors:i}=this.reportData,o={anchors:{links:i,style:"color: white; font-style: italic; background-color: #39579A; padding: 2px"},includedUrls:{links:t,style:"color: white; font-style: italic; background-color: green; padding: 2px"},excludedUrls:{links:e,style:"color: white; font-style: italic; background-color: #ffbf00 ;padding: 2px"}};Object.keys(o).forEach(t=>{const{links:e,style:i}=o[t];n.logLinkTypesToConsole(t,e,i)})}static logLinkTypesToConsole(t,e,n){console.log(`%c TABOOLA VIGNETTE DEBUG MODE!! ${t} LINKS COUNT: ${e.length}`,n,e)}getElementValidAnchors(t){const e=t.querySelectorAll&&t.querySelectorAll(this.getAnchorsSelectors());return e?TRC.util.toArray(e):null}handleElementAnchors(t){const e=this.getElementValidAnchors(t);e&&e.length&&this.handleDebugAnchors(e)}handleDebugAnchors(t){t.forEach(t=>{const e=t.getAttribute("href");e&&(this.shouldExcludeLink(e,t.host)?this.reportData.excludedUrls.push(e):(n.highlightVignetteAnchor(t),this.updateReportData(t)))})}handleMutations(t){t.forEach(t=>{const e=t.addedNodes;e&&e.length&&TRC.util.toArray(e).forEach(this.handleElementAnchors.trcBind(this))})}debugModeInitObserving(){this.handleElementAnchors(document.body),this.isLiteMode&&this.handleFeed(),this.observeElForLinks(document.body)}observeElForLinks(t){const e=window.MutationObserver&&new MutationObserver(this.handleMutations.trcBind(this));e&&e.observe(t,{childList:!0,subtree:!this.isLiteMode})}handleFeed(){const t=".tbl-feed-container",e=document.querySelectorAll(t);TRC.util.toArray(e).forEach(t=>{this.observeElForLinks(t)})}handleDebugMode(){this.isLiteMode=this.getIsLiteMode(),this.logDataReportToConsole(),this.debugModeInitObserving()}updateReportData(t){const{includedUrls:e,anchors:n}=this.reportData;this.reportData.linksCount++,n.push(t),e.push(t.href)}getIsLiteMode(){const t=TRC.URL.prototype.getParameter.call(window.location.search,this.constants.FORCE_PARAM);return"lite"===t}static isDebugSessionHandlerOn(){const t="session-handler",e=TRC.URL.prototype.getParameter.call(window.location.search,t);return"on"===e}static highlightVignetteAnchor(t){t.style.border="1px dotted red",t.style.backgroundColor="#8080804a",t.taboolaAnchor&&(t.style.display="flex")}}TRC.TaboolaVignette=n})();t){.game_category div a img{width:60%;margin:10px}.logo{width:100%!important}.logofooter{width:100%!important;max-width:25%}.swiper-slide{width:100%}}.error{color:red;font-size:13px}.game_category{padding:0}.subscription_packs_radio{visibility:hidden}.labl{display:block;padding:10px;border-radius:50px}.labl>input{visibility:hidden;position:absolute}.labl>input+div{cursor:pointer;border:2px solid transparent;border:1px solid #000;padding:10px}.labl>input:checked+div{background-color:#ffd6bb;border:1px solid #f60}.myaccount .user-image>img{width:80px}.myaccount .user-text>h4{color:#fff;padding:10px;text-align:center;line-height:20px}.myaccount .account_details{color:#fff}.myaccount .no-plan{color:#fff;margin-top:20px;text-align:center}.sliderWallpaperportrait{width:25%!important}.sliderWallpaperportrait a img{object-fit:cover!important}.sliderWallpaperlandscape{width:45%!important}@media(max-width:359px){.sliderbaneerbig{top:15vw}}@media only screen and (min-width:360px) and (max-width:394px){.sliderbaneerbig{top:15vw}}@media only screen and (min-width:395px) and (max-width:499px){.sliderbaneerbig{top:13vw}}@media only screen and (min-width:500px) and (max-width:767px){.sliderbaneerbig{top:10vw}}}.navbar{background-image:linear-gradient(to bottom,#00678f 0%,#54a0bd 100%)!important}header nav li a,.headermobilecatt{font-size:16px;line-height:18px;font-weight:600;text-transform:uppercase;font-family:montserrat,sans-serif}ul.navbar-nav{margin:auto}li.nav-item{margin:0 25px;display:inline-block}li.nav-item a{color:#fff}a:hover{color:#fff}@media(min-width:768px){.navbar{padding:1.6em}.logo{max-width:12%!important;position:absolute;left:2%;top:5%}}@media(max-width:767px){.mobile-slider{border-radius:30px!important}.categoryban img.categoryimg{width:100%;max-width:20%;margin:0 40%;border-radius:6px}.mobile-slider{border-radius:20px!important}ul{display:-webkit-inline-box;overflow:scroll;text-decoration:none;list-style:none;padding-left:0;margin-bottom:0}ul li h4{font-size:12px;text-align:center;color:#000}header nav li a,.headermobilecatt{background-color:#1b1b1d;color:#fff;padding:1em}ul.navbar-nav{display:none}.navbar{padding:0}.logo{max-width:30%!important}}.copyright{padding:10px}.searchnav{width:44px;float:right}