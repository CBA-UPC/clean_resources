import{l as U,r as M,G as l,P as c,Y as s,a6 as u,x as d,z as e,R as E,F as C,$ as S,S as ce,an as se,ao as te,c as y,a7 as h,I as _,a3 as ue,q as pe,y as me,H as w,N as B,O as T,a as J,Q as K}from"./graphql.5cf3693b.js";import{ai as O,dh as A,aD as L,di as V,dj as ge,dk as ve,dl as fe,as as q,a as _e,b as he,aA as x,aF as Pe,a1 as ye,G as xe,aC as W,at as $e,dm as ke,dn as Le,d6 as Ne,az as X,bg as Z,bR as be}from"./itinerary-entities.5f897bcd.js";import{P as we}from"./PanelContainer.e2d81510.js";import{A as Ce}from"./addEditTeamModal.2b9cd274.js";import{A as Ie}from"./AddMemberByExcelModal.921db927.js";import"./itinerary-modules.2ea32123.js";import"./service-client.4862e840.js";import"./entry.a7cea746.js";import"./useMrDropzone.7636171e.js";const ae=r=>(se("data-v-44c95977"),r=r(),te(),r),Be={class:"header-root"},Te={class:"group-actions"},Se={class:"content-root"},Ee=ae(()=>s("div",{class:"divider"},null,-1)),Fe={key:0},ze=ae(()=>s("p",null,"Ù…Ø³Ø§ÙØ±ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ú¯Ø±ÙˆÙ‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.",-1)),De=[ze],Ge={key:1,class:"passenger-container"},Me={class:"right"},Ae={class:"left"},Ve=["onClick"],Ue=["onClick"],Oe=U({__name:"GroupItem",props:{group:{}},emits:["edit:team","delete:team","edit:passenger","delete:passenger"],setup(r,{emit:a}){const g=M(!1);function $(t){return t.PersianFirstName||t.PersianLastName?`${t.PersianFirstName} ${t.PersianLastName}`:t.FirstName||t.LastName?`${t.FirstName} ${t.LastName}`:""}const v=O();return(t,m)=>{var N;return l(),c("div",{class:E(["root-container",{expanded:e(g)}]),style:ce({"--max-height":`${100+(((N=t.group.Travelers)==null?void 0:N.length)||0)*50}px`})},[s("div",Be,[s("p",null,u(t.group.Name),1),s("div",Te,[s("div",{onClick:m[0]||(m[0]=p=>a("edit:team"))},[d(L,{icon:e(A)},null,8,["icon"])]),s("div",{onClick:m[1]||(m[1]=p=>a("delete:team"))},[d(L,{icon:e(V)},null,8,["icon"])]),s("di|(m[2]=p=>g.value=!e(g))},[d(L,{class:E(["arrow",{expanded:e(g)}]),icon:e(ge)},null,8,["class","icon"])])])]),s("div",null,[s("div",Se,[Ee,!t.group.Travelers||!t.group.Travelers.length?(l(),c("div",Fe,De)):(l(),c("div",Ge,[(l(!0),c(C,null,S(t.group.Travelers,p=>(l(),c("div",{key:p.Id,class:"passenger"},[s("div",Me,[s("div",null,[d(L,{icon:p.Male?e(ve):e(fe)},null,8,["icon"])]),s("p",null,u($(p)),1)]),s("div",Ae,[s("div",{onClick:I=>a("edit:passenger",p)},[s("div",null,[d(L,{icon:e(A)},null,8,["icon"])]),s("p",null,u(e(v).t("ListPassenger.edit")),1)]a("delete:passenger",p)},[s("div",null,[d(L,{icon:e(V)},null,8,["icon"])]),s("p",null,u(e(v).t("ListPassenger.delete")),1)],8,Ue)])]))),128))]))])])],6)}}});const qe=q(Oe,[["__scopeId","data-v-44c95977"]]),Re={class:"passenger-item"},He={class:"passenger-actions"},Ye=U({__name:"LonePassenger",props:{passenger:{},disabled:{type:Boolean}},emits:["edit","delete"],setup(r,{emit:a}){const g=y(()=>r.passenger.PersianFirstName||r.passenger.PersianLastName?`${r.passenger.PersianFirstName} ${r.passenger.PersianLastName}`:r.passenger.FirstName||r.passenger.LastName?`${r.passenger.FirstName} ${r.passenger.LastName}`:""),$=O();return(v,t)=>(l(),c("div",Re,[s("p",null,[d(L,{class:"mrbilit-sex-icon",icon:v.passenger.Male?e(_e):e(he),color:"var(--gray-600)"},null,8,["icon"]),h(" "+u(e(g)),1)]),s("div",He,[d(x,{size:"small",type:"transparent","right-icon":e(A),disabled:v.disabled,onClick:t[0]||(t[0]=m=>a("edit"))},{default:_(()=>[h(u(e($).t("ListPassenger.edit")),1)]),_:1},8,["right-icon","disabled"]),d(x,{size:"small",type:"transparent","right-icon":e(V),disabled:v.disab]||(t[1]=m=>a("delete"))},{default:_(()=>[h(u(e($).t("ListPassenger.delete")),1)]),_:1},8,["right-icon","disabled"])])]))}});const ee=q(Ye,[["__scopeId",d4eba17"),r=r(),te(),r),jell,"Ù…Øs("hr",{class:"split-line"},null,-1)),Ke={class:"mobile-passengers"},We={class:"passengers"},Xe={key:1,class:"no-passenger"},Ze={key:2,class:"passenger-item-wrapper"},es=U({__name:"pax",setup(r){const a=Pe(),g=ye(),$=xe(),v=M(null),{open:t}=W({component:Ce}),{open:m}=W({component:Ie}),N=ue(),p=M(!1),I=$e(),R=y(()=>a.passengersList),F=y(()=>a.paxAndGroups),oe=y(()=>{if(P.value){const{PaxGroups:n=[],GroupLessTravelers:o=[]}=F.value;return!(n!=null&&n.length)&&!(o!=null&&o.length)}else return!R.value.length}),H=y(()=>a.isLoading),z=yUsen a.seax=nchPaxAndGroups():a.getPreviousPax()},re=async n=>{const{isConfirmed:o}=await I({text:"Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ",icon:"question",showCancelButton:!0,cancelButtonText:"Ø®ÛŒØ±",confirmButtonText:"Ø¨Ù„Ù‡"});o&&await a.deleteGroup(n)},D=async n=>{const{isConfirmed:o}=await I({text:"Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ",icon:"question",showCancelButton:!0,cancelButtonText:"Ø®ÛŒØ±",confirmButtonText:"Ø¨Ù„Ù‡"});o&&await a.deletePreviousPax(n)},G=(n,o)=>{apanel/addpassenger"})},le=()=>{a.editPax=null,N.push("/panel/addpassenger")},Y=async()=>{if($.trackPosthog("add-prev-pax-open-excel-modal"),z.value){const{args:n}=await m();n!=null&&n[0]&&($.tr("add-prev-pax-success-excel-usage"),await a.getPreviousPax())}},j=()=>{t()},de=n=>{t({initialName:n.Name||"",initialId:n.Id})},Q=()=>{var o;const n=(((o=v.value)==null?void 0:o.getBoundingClientRect().top)||0)+document.ollYdEventListener("scroll",Q)}),me(()=>{window.removeEventListener("scroll",Q)});const k=O();return(n,o)=>(l(),w(we,{title:"Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø³Ø§ÙØ±Ø§Ù†","mobile-only":""},{default:_(()=>[s("div",je,[Qe,B(d(x,{class:"edit-button","right-icon":e(ke),type:"transparent",size:"medium",onClick:Y},{default:_(()=>[h(" Ø§ÙØ²ÙˆØ¯Ù† Ú¯Ø±ÙˆÙ‡ÛŒ ")]),_:1},8,["right-icon"]),[[T,e(z)]]),d(x,{class:"edit-button","right-icon":e(Le),type:"transparent",size:"medium",onClick:le},{default:_(()=>[h(u(e(k).t("ListPassenger.add")),1)]),_:1},8,["right-icon"]),B(d(x,{class:"edit-button","right-icon":e(Ne),type:"transparent",size:"medium",onClick:j},{default:_(()=>[h(u(e(k).t("ListTeam.add")),1)]),_:1},8,["right-icon"]),[[T,e(P)]])]),Je,s("div",Ke,[d(X,{modelValue:e(b),"onUpdate:modelValue":o[0]||(o[0]=i=>J(b)?b.value=i:null),"data-id":"search",autocomplete:"off",class:"search-input",placeholder:e(k).t(e(P)?"PassengerForm.searchNameOrTeam":"PassengerForm.searchByName"),required:"",type:"text",icon:e(Z),"hide-description":""},null,8,["mod"icon"])]),s("div",We,[d(X,{modelValue:e(b),"onUpdate:modelValue":o[1]||(o[1]=i=>J(b)?b.value=i:null),"data-id":"search",autocomplete:"off",class:"search-input",placeholder:e(k).t(e(P)?"PassengerForm.searchNameOrTeam":"PassengerForm.searchByName"),required:"",type:"text",icon:e(Z),"hide-description":""},null,8,["modelValue","placeholder","icon"]),e(H)?(l(),w(be,{key:0})):e(oe)?(l(),c("div",Xe,u(e(k).t("ListPassenger.noPassengers")),1)):K("",!0),e(H)?K("",!0):(l(),c("div",Ze,[e(P)?(l(),c(C,{key:1},[(l(!0),c(C,null,S(e(F).PaxG(qe,{key:i.Id,group:i,"onDelete:team":f=>reDelete:passenger":o[2]||(o[2]=({Id:f})=>D(f)),"onEdit:team":f=>de(i),"onEdit:passenger":f=>G(f,i.Id)},null,8,["group","onDelete:team","onEdit:team","onEdit:passenger"]))),128)),(l(!0),c(C,null,S(e(F).GroupLessTravelers,i=>(l(),w(ee,{key:i.Id,passenger:i,onDelete:f=>D(i.Id||0),onEdit:f=>G(i)},null,8,["passenger","on"onEdit"]):(l(!0),c(C,{key:0},S(e(R),i=>(l(),w(ee,{key:i.Id,passenger:i,onEdit:f=>G(i),onDelete:f=>D(i.Id||0)},null,8,["passenger","onEdit","onDelete"]))),128)),s("div",{ref_key:"actionsMarker",ref:v},null,512),s("div",{class:E([{fixed:e(p)},"actions"])},[d(x,{id:"form-next-button",type:"fptBill action-button",{"full-width":!e(P)}]),onClick:o[3]||(o[3]=i=>e(N).push("/panel/addpassenger"))},{default:_(()=>[h(u(e(k).t("ListPassenger.add")),1)]),_:1},8,["class"]),B(d(x,{id:"form-next-button",form:"payment",class:"acceptBill action-button",type:"bordered",onClick:j},{default:_(()=>[h(u(e(k).t("ListTeam.add")),1)]),_:1},512),[[T,e(P)]]),B(d(x,{id:"form-next-buttpayment",class:"acceptBill action-button full-width",onClick:Y},{default:_(()=>[h(" Ø§ÙØ²ÙˆØ¯Ù† Ú¯Ø±ÙˆÙ‡ÛŒ ")]),_:1},512),[[T,e(z)]])],2)]))])]),_:1}))}});const cs=q(es,[["__scopeId","data-v-4d4eba17"]]);export{cs as default};
