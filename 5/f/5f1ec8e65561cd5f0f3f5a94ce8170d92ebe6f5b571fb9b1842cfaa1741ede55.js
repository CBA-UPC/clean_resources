var Strossle=[function(t,e,r){"use strict";window.StrossleStorage=window.StrossleStorage||{},e.a={getItem:setItem:},function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=c=function(t,e){if(!window.URL)return!0;try{0===t.indexOf("//")&&(t=document.location.protocol+t),0===e.indexOf("//")&&(e=document.location.protocol+e);var r=new window.URL(t),n=new window.URL(e);return r.hostname===n.hostname}catch(t){return!0}},s={checkForAdblocker:function(){var t=document.createElement("div");t.className="afs_ads pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adContent adBanner",t.innerHTML="&nbsp;",document.getElementsByTagName("body")[0].appendChild(t);var e=document.getElementsByClassName("afs_ads"),r=!1;return e.length&&0!==e[0].innerHTML.length&&0!==e[0].clientHeight||(r=!0),t.remove(),r},createElementFromString:loadCSS:function(t){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t);var r=document.getElementsByTagName("head");r&&r.length&&r[0].appendChild(e)},loadScript:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=document.createElement("script");if(o.type="text/javascript",o.src=t,o.async=!0,r&&"object"===i(r)&&Object.entries(r).forEach((function(t){var e=n(t,2),r=e[0],i=e[1];o.setAttribute(r,i)})),"string"==typeof e){var a=document.querySelector(e);a.parentNode.insertBefore(o,a.nextSibling)}else{var c=document.getElementsByTagName("head");c&&c.length&&c[0].appendChild(o)}},applyCSSFromStringToSiteHead:function(t){var e=document.createElement("style"),r=document.getElementsByTagName("head")[0],n=t;e.type="text/css",e.appendChild(document.createTextNode(n)),r.appendChild(e)},wrapPostInATag:function(t,e){var r="_top";c(s.getCurrentBrowserUrl(),e)||(r="_blank");var n=document.createElement("a");return n.href=e,n.target=r,n.innerHTML=t.innerHTML,n.rel="nofollow",t.innerHTML="",t.appendChild(n),t},getCurrentBrowserUrl:function(){var t=window.location.href;return a()&&(t=window.document.referrer&&"String"===Object.prototype.toString.call(window.document.referrer).slice(8,-1)?window.document.referrer:window.location.href),t},getCurrentBrowserHostName:function(){var t=window.location.hostname;return a()&&(t=s.getCurrentBrowserUrl().replace(/https?:\/*/,"").split("/")[0].split(":")[0]),t},getCurrentBrowserHostNameWithoutWWW:getCurrentBrowserDeviceType:isElementInView:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,i=r.top-e<=n&&r.top+r.height>=0,a=r.left<=o&&r.left+r.width>=0,c=i&&a;return c},getDataAttributeValue:function(t,e){return"string"==typeof t&&(t=document.querySelector(t)),t&&1===t.nodeType?t.getAttribute(e):null}},u=s,l=!1,p=null,f=window,d={};ar h=function(){if(!l){if(!p)for(;f;){try{if(f.frames.__tcfapiLocator){p=f;break}}catch(t){}if(f===window.top)break;f=f.parent}window.__tcfapi=window.addEventListener("message",y,!1),l=!0}},g={getConsentData:function(){var t={gdprApplies:"",gdprConsent:"",strossleConsents:{}};return new Promise((function(e){try{if(!window.hasOwnProperty("__tcfapi")&&)&&h(),!window.hasOwnProperty("__tcfapi"))return e(t);var r=!1,n=setTimeout((,1e4);window.__tcfapi("addEventListener",2,(function(o,i){if(!r){if(!i)return clearTimeout(n),e(t);if(!1===o.gdprApplies||"tcloaded"===o.eventStatus||"useractioncomplete"===o.eventStatus){clearTimeout(n);var a=((o||{}).purpose||{}).consents||{};return(((o||{}).vendor||{}).consents||{})[851]||Object.keys(a).forEach((),e({gdprApplies:+o.gdprApplies||t.gdprApplies,gdprConsent:o.tcString||t.gdprConsent,strossleConsents:a})}}}))}catch(r){return e(t)}}))}},m=r(0);function v(t,e){try{var r="https://ad.360yield.com/user_sync?publisher_id=1983&gdpr=[GDPR]&gdpr_consent=[GDPR_CONSENT]";r&&(r=(r=r.replace("[GDPR]",t)).replace("[GDPR_CONSENT]",e),fetch(r,{credentials:"include"}).then(().then((function(t){Array.isArray(t.sync)&&t.sync.forEach((function(t){var e=document.createElement("img");e.src=t.url,e.style.visibility="hidden",document.body.appendChild(e),e.remove()}))})))}catch(t){}}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function S(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){w(i,n,o,a,c,"next",t)}function c(t){w(i,n,o,a,c,"throw",t)}a(void 0)}))}}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}ar A=function(){ar e,r,n;return E(t,[{key:"generateWrapperElement",value:function(t,e){var r=u.createElementFromString(t);return document.querySelector(e).appendChild(r),r}},{key:"generatePostElement",value:function(t,e,r,n,o){if("ad"===t.type&&n)try{var i=btoa(encodeURIComponent(t.url));t.url=o+encodeURIComponent(i)+"&b64=1"}catch(e){t.url=o+t.url}return e.replace(new RegExp("{{([^]+?)}}","g"),(function(e,n){return n.split(".").reduce((function(e,n){return e[n]?e[n]:t[n]?t[n]:"ad"===t.view&&"strossle_house_ad"!==t.ad_provider&&r[n]&&"adLabel"===n||"ad"===t.view&&"strossle_house_ad"===t.ad_provider&&r[n]&&"houseAdLabel"===n?r[n].replace(new RegExp("{{([^]+?)}}","g"),():"sprinkleit"===t.view&&r[n]&&"acceleratorLabel"===n||"article"===t.type&&r[n]&&"sameSiteArticleLabel"===n&&"sprinkleit"!==t.view?r[n]:""}),{})}))}},{key:"buildWidgetServerURL",value:(n=S(regeneratorRuntime.mark((function t(e){var r,n,o,i,a,c,s,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},n=u.getCurrentBrowserUrl(),o=u.getCurrentBrowserDeviceType(),i=m.a.getItem("strosslePageSessionId"),t.next=6,g.getConsentData();case 6:return r.gdpr=t.sent,t.next=9,this.getWidgetSiteSettings(e);case 9:return a=t.sent,(c=this.isSitePersonalizedTargetingAllowed(a))&&v(r.gdpr.gdprApplies,r.gdpr.gdprConsent),s="".concat(c?"https://widgets.strossle.360yield.com/v1/widgets":"https://widgets.spklw.com/v1/widgets","/").concat(e)+"?url=".concat(encodeURIComponent(n))+"&device=".concat(o)+"&gdpr=".concat(r.gdpr.gdprApplies)+"&gdpr_consent=".concat(r.gdpr.gdprConsent),i&&(s=s.concat("&page-session-id=".concat(i))),r.context&&Array.isArray(r.context)&&r.context.length&&(s=s.concat("&context=".concat(r.context.join(",")))),r.clickUrl&&"string"==typeof r.clickUrl&&(s=s.concat("&click_url=".concat(encodeURIComponent(r.clickUrl)))),t.abrupt("return",s);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getWidgetSiteSettings",value:(r=S(regeneratorRuntime.mark((function t(e){var r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="".concat(e,":siteSettings"),!(n=m.a.getItem(r))||"object"!==b(n)){t.next=4;break}return t.abrupt("return",n);case 4:return o="".concat("https://widgets.spklw.com/v1/widgets","/").concat(e,"/settings"),t.next=7,fetch(o);case 7:if((i=t.sent).ok){t.next=10;break}return t.abrupt("return",null);case 10:return t.next=12,i.json();case 12:return n=t.sent,m.a.setItem(r,n),t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"getWidgetData",value:(e=S(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{credentials:"include"});case 2:if((r=t.sent).ok){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",r.json());case 6:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"isSitePersonalizedTargetingAllowed",value:,{key:"loadPlugins",value:function(t){for(var e=0;e<t.length;e++)"css"===t[e].type&&u.loadCSS(t[e].link),"script"===t[e].type&&u.loadScript(t[e].link)}},{key:"appendWidgetHeader",value:function(t,e,r){var n=t.replace(new RegExp("{{headerText}}","g"),e||""),o=u.createElementFromString(n);r.prepend(o)}},{key:"appendWidgetFooter",value:,{key:"appendPostsEnd",value:function(t,e){var r=u.createElementFromString('<div id="strossle-posts-end-'.concat(t,'" style="flex: 0 0 100%; max-width: 100%;"></div>'));e.appendChild(r)}}]),t}(),P=function(){function t(e){k(this,t),this.instanceId=t.generateInstanceId(),this.targetSelector=e,this.privateMethods=new A,this.adBlockerInUse=u.checkForAdblocker(),this.adBlockRedirectUrl="https://widgets.sprinklecontent.com/r/?u="}return E(t,null,[{key:"generateInstanceId",value:]),t}(),O=R={buildAndSendLoadEvent:function(t){var e=(m.a.getItem("strosslePageSessionId")||"").replace(/\-/g,""),r={widget_id:t,device:u.getCurrentBrowserDeviceType(),session_id:e,url:u.getCurrentBrowserUrl(),origin_type:"widget",event:"load",type:"widget"},n=encodeURIComponent(O(r)),o="".concat("https://bonfire.spklw.com","/?t=bulk&i=").concat(n);fetch(o)},preparePostClickEvent:function(t,e,r){t.addEventListener("click",(function(){if(!t.getAttribute("data-clicked")){t.setAttribute("data-clicked",!0),fetch(e);try{r&&Array.isArray(r)&&(r=r.concat(r.filter(Boolean)))&&r.length>0&&r.forEach((function(e){var r=document.createElement("img");r.src=e,r.style.visibility="hidden",t.appendChild(r),r.remove()}))}catch(t){}}}))}};function _(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}unction I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var L=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=e.src,n=e.global,o=e.attributes,i=e.selector;this.src=r,this.global=n,this.attributes=o||{},this.selector=i,this.isLoaded=!1}var e,r,n;return e=t,(r=[{key:"loadScript",value:function(){var t=this;return new Promise((function(e,r){var n=document.createElement("script");if(n.type="text/javascript",n.async=!0,n.src=t.src,t.attributes&&"object"===T(t.attributes)&&Object.entries(t.attributes).forEach((),t.selector&&"string"==typeof t.selector){var o=document.querySelector(t.selector);o.parentNode.insertBefore(n,o.nextSibling)}else{var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}n.addEventListener("load",(),n.addEventListener("error",()}))}},{key:"load",value:function(){var t=this;return new Promise(function(){var e,r=(e=regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoaded){e.next=12;break}return e.prev=1,e.next=4,t.loadScript();case 4:r(t.global?window[t.global]:null),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(e.t0);case 10:e.next=13;break;case 12:r(t.global?window[t.global]:null);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){_(i,n,o,a,c,"next",t)}function c(t){_(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,e){return r.apply(this,arguments)}}())}}])&&C(e.prototype,r),n&&C(e,n),t}(),U={debug:function(){if(m.a.getItem("debug")){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=console.log).call.apply(t,[console.log].concat(r))}}};unction N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var M="widget",D="content",H={},F=function(){function t(e,r,n,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.impressionTrackerType=e,this.widgetInstanceId=r,this.el=n,this.timer=null,this.hasSent=!1,this.impressionURL=o,this.impressionPixels=i,this.impressionScripts=a,this.isImpressionScriptsInjected=!1;this.observer=new IntersectionObserver(this.handler.bind(this),{root:null,rootMargin:"0px",threshold:[.5]}),this.observer.observe(n),this.injectImpressionScripts()}var e,r,n;return e=t,(r=[{key:"handler",value:function(t){try{var e,r=W(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;n&&(this.hasSent||(n.isIntersecting&&n.intersectionRatio>=.5&&null===this.timer&&(this.timer=setTimeout((function(t){var e=H[t.widgetInstanceId];t.impressionTrackerType===D&&e&&e.widgetImpressionURL&&!e.isWidgetTracked&&(e.isWidgetTracked=!0,fetch(e.widgetImpressionURL)),t.impressionTrackerType===D&&e&&e.widgetEmptyPostsURL&&!e.isEmptyPostsTracked&&(e.isEmptyPostsTracked=!0,fetch(e.widgetEmptyPostsURL)),fetch(t.impressionURL),t.injectImpressionPixels(),t.hasSent=!0,t.timer=null}),1e3,this)),n.intersectionRatio<.5&&(clearTimeout(this.timer),this.timer=null)))}}catch(t){r.e(t)}finally{r.f()}}catch(t){U.debug("Error running impression tracking handler",t)}}},{key:"injectImpressionPixels",value:function(){var t=this;Array.isArray(this.impressionPixels)&&this.impressionPixels.forEach((function(e){var r=document.createElement("img");r.src=e,r.style.visibility="hidden",t.el.appendChild(r),r.remove()}))}},{key:"injectImpressionScripts",value:function(){var t=this;Array.isArray(this.impressionScripts)&&!this.isImpressionScriptsInjected&&(this.isImpressionScriptsInjected=!0,this.impressionScripts.filter(Boolean).forEach(())}}])&&B(e.prototype,r),n&&B(e,n),t}(),q={widgetWillRender:function(t){try{var e,r,n,o,i,a,c=null==t?void 0:t.widgetInstanceId,s=null==t?void 0:t.widgetSelector,u=(null==t||null===(e=t.event)||void 0===e||null===(r=e.data)||void 0===r||null===(n=r.widget)||void 0===n?void 0:n.t_imp)||"",l=(null==t||null===(o=t.event)||void 0===o||null===(i=o.data)||void 0===i||null===(a=i.widget)||void 0===a?void 0:a.t_emp)||"";H[c]||(H[c]={widgetImpressionURL:u,isWidgetTracked:!1,widgetEmptyPostsURL:l,isEmptyPostsTracked:!1,widgetSelector:s,isWidgetEmpty:!0})}catch(t){U.debug("Error running widgetWillRender hook",t)}},widgetDidRender:function(t){var e=null==t?void 0:t.widgetInstanceId,r=H[e];if(r.isWidgetEmpty){var n=document.querySelector(r.widgetSelector);new F(M,e,n,r.widgetEmptyPostsURL)}},contentDidRender:function(t){try{var e,r;if(null!=t&&null!==(e=t.event)&&void 0!==e&&null!==(r=e.data)&&void 0!==r&&r.el){var n,o,i,a,c,s,u=null==t?void 0:t.widgetInstanceId,l=(null==t||null===(n=t.event.data)||void 0===n||null===(o=n.content)||void 0===o?void 0:o.t_imp)||"",p=(null==t||null===(i=t.event.data)||void 0===i||null===(a=i.content)||void 0===a?void 0:a.impression_pixels)||[],f=(null==t||null===(c=t.event.data)||void 0===c||null===(s=c.content)||void 0===s?void 0:s.impression_scripts)||[];new F(D,u,t.event.data.el,l,p,f),H[u].isWidgetEmpty=!1}}catch(t){U.debug("Error running contentDidRender hook",t)}}};function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t){return function(t){if(Array.isArray(t))return V(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ction Y(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}nction Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=nt(t);if(e){var o=nt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return rt(this,r)}}function rt(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(d,t);var e,r,n,o,i,a,c,s,l,p,f=et(d);function d(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X(this,d),(r=f.call(this,e)).id=t,r.opts=n,r.postCounter=0,r.events=[],r.eventListeners=[],r.plugins=r.opts.plugins&&Array.isArray(r.opts.plugins)?r.opts.plugins:[],r.plugins.unshift(q),r}return e=d,(r=[{key:"pluginEventListener",value:(p=K(regeneratorRuntime.mark((function t(e,r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U.debug("Plugin event received: %s %o",e,r),t.t0=e,t.next="loadContent"===t.t0?4:9;break;case 4:return t.next=6,this.fetchData();case 6:return(n=t.sent)&&n.content&&this.renderPosts(n.content),t.abrupt("return");case 9:return t.abrupt("return");case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return p.apply(this,arguments)})},{key:"lifecycleHook",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(U.debug("Lifecycle hook: %s %o",t,e),this.events.push({name:t,data:e,timestamp:(new Date).toISOString()}),Array.isArray(this.eventListeners)){var r=$($({},this.getPluginContext()),{},{event:{name:t,data:e}});this.eventListeners.forEach(()}}},{key:"getPluginContext",value:function(){return{emit:this.pluginEventListener.bind(this),widgetInstanceId:this.instanceId,widgetSelector:this.targetSelector,widgetId:this.id}}},{key:"registerPlugin",value:(l=K(regeneratorRuntime.mark((function t(e){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=K(regeneratorRuntime.mark((function t(n){var o,i,a,c,s,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.lifecycleHook("pluginWillLoad",{plugin:e}),!e.link||null===(o=e.type)||void 0===o||!o.startsWith("script:")){t.next=16;break}if(c=null===(a=e.type)||void 0===a?void 0:a.slice("script:".length),window[c]&&"function"!=typeof window[c]){t.next=14;break}return t.prev=4,s=new L({src:e.link,global:c}),t.next=8,s.load();case 8:i=t.sent,t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(4),t.abrupt("return");case 14:t.next=17;break;case 16:i=case 17:return u=$({options:e.options},r.getPluginContext()),i&&"function"==typeof i&&(l=i.call(i,u),r.eventListeners.push(l)),r.lifecycleHook("pluginDidLoad",{plugin:e}),t.abrupt("return",n());case 21:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)})},{key:"loadPluginsAndWait",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return new Promise(function(){var n=K(regeneratorRuntime.mark((function n(o){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=setTimeout((,r),a=t.map(e.registerPlugin.bind(e)),n.next=4,Promise.all(a);case 4:clearTimeout(i),o();case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}},{key:"initialize",value:(s=K(regeneratorRuntime.mark((function t(){var e,r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=(u.getDataAttributeValue(this.targetSelector,"data-strossle-context")||"").split(",").filter(Boolean),this.opts.context&&Array.isArray(this.opts.context)?this.opts.context=this.opts.context.concat(e):this.opts.context=e,this.opts.context=G(new Set(this.opts.context)),t.prev=4,this.privateMethods.loadPlugins(this.plugins.filter((function(t){return t.link&&["css","script"].includes(t.type)}))),t.next=8,this.loadPluginsAndWait(this.plugins);case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:if(!this.id){t.next=22;break}return t.prev=13,t.next=16,this.fetchData();case 16:r=t.sent,t.next=22;break;case 19:t.prev=19,t.t1=t.catch(13);case 22:if(r||this.opts.content){t.next=24;break}return t.abrupt("return");case 24:if(n=r&&r.widget&&r.widget.settings?JSON.parse(r.widget.settings):{},this.opts.design&&"object"===z(this.opts.design)&&(n.designSettings=Object.assign({},n.designSettings,this.opts.design)),o=r&&r.content?r.content:{posts:[]},this.opts&&this.opts.content&&this.opts.content.posts&&Array.isArray(this.opts.content.posts)&&(o.posts=this.opts.content.posts),this.widgetSettings=n,!n.plugins||!n.plugins.length){t.next=42;break}if(this.privateMethods.loadPlugins(n.plugins.filter(()),t.prev=31,i=n.plugins.filter((function(t){var e;return t.link&&(null==t||null===(e=t.type)||void 0===e?void 0:e.startsWith("script:"))})),!Array.isArray(i)||!i.length){t.next=36;break}return t.next=36,this.loadPluginsAndWait(i);case 36:t.next=41;break;case 38:t.prev=38,t.t2=t.catch(31),U.debug("Error while loading remote plugins",t.t2);case 41:this.plugins=[].concat(G(this.plugins),G(n.plugins));case 42:if(u.applyCSSFromStringToSiteHead(n.designSettings.widgetCSS),this.lifecycleHook("widgetWillRender",{widget:{t_imp:o.t_imp,t_load:o.t_load,t_emp:o.t_emp},metadata:{contentCount:o.posts.length}}),!r||!r.html){t.next=49;break}return t.next=47,this.renderHtml(n,o,r.html);case 47:t.next=51;break;case 49:return t.next=51,this.renderRegular(n,o);case 51:this.lifecycleHook("widgetDidRender"),t.next=57;break;case 54:t.prev=54,t.t3=t.catch(0);case 57:case"end":return t.stop()}}),t,this,[[0,54],[4,10],[13,19],[31,38]])}))),function(){return s.apply(this,arguments)})},{key:"fetchData",value:(c=K(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.privateMethods.buildWidgetServerURL(this.id,this.opts);case 4:return e=t.sent,t.next=7,this.privateMethods.getWidgetData(e);case 7:return r=t.sent,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"renderHtml",value:(a=K(regeneratorRuntime.mark((function t(e,r,n){var o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{o=u.createElementFromString(n),document.querySelector(this.targetSelector).appendChild(o),o.querySelectorAll(".strossle-post").forEach((function(t){var e=t.getAttribute("data-id"),r=t.getAttribute("data-type"),n=t.getAttribute("data-link");if("ad"===r&&i.adBlockerInUse)try{var o=btoa(encodeURIComponent(n));n=i.adBlockRedirectUrl+encodeURIComponent(o)+"&b64=1"}catch(t){n=i.adBlockRedirectUrl+n}JSON.parse(t.getAttribute("data-third-party-link")),t.getAttribute("data-track-impression");var a=JSON.parse(t.getAttribute("data-click-pixels")),c=t.getAttribute("data-track-click");R.preparePostClickEvent(t,c,a),u.wrapPostInATag(t,n),"ad"===t.getAttribute("data-type")&&"overlay"===t.getAttribute("data-ad-type")&&i.setupOverlay(e,n,t)})),r.posts.length<1&&this.opts&&this.opts.passbackUrl&&"string"==typeof this.opts.passbackUrl&&u.loadScript(this.opts.passbackUrl,this.targetSelector)}catch(t){}case 1:case"end":return t.stop()}}),t,this)}))),},{key:"renderRegular",value:(i=K(regeneratorRuntime.mark((function t(e,r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=this.privateMethods.generateWrapperElement(e.designSettings.widgetWrapperTemplate,this.targetSelector),r.posts.length&&(e.designSettings.widgetHeaderTemplate&&this.privateMethods.appendWidgetHeader(e.designSettings.widgetHeaderTemplate,e.designSettings.widgetHeaderText,n),this.privateMethods.appendPostsEnd(this.instanceId,n),e.designSettings.widgetFooterTemplate&&this.privateMethods.appendWidgetFooter(e.designSettings.widgetFooterTemplate,n)),t.next=5,this.renderPosts(r);case 5:r.posts.length<1&&this.opts&&this.opts.passbackUrl&&"string"==typeof this.opts.passbackUrl&&u.loadScript(this.opts.passbackUrl,this.targetSelector),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])}))),},{key:"renderPosts",value:(o=K(regeneratorRuntime.mark((function t(e){var r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.widgetSettings,e.posts.forEach((function(t,e){n.lifecycleHook("contentWillRender",{content:JSON.parse(JSON.stringify(t))});var o=u.createElementFromString(n.privateMethods.generatePostElement(t,r.designSettings.widgetPostTemplate,r.designSettings.contentLabels,n.adBlockerInUse,n.adBlockRedirectUrl));if(t.retouch_mark&&"string"==typeof t.retouch_mark){var i=o.querySelector('[class^="post-image-container-"]');n.applyRetouchMark(i,t.retouch_mark)}var a=u.wrapPostInATag(o,t.url),c=document.getElementById("strossle-posts-end-".concat(n.instanceId));c.parentNode.insertBefore(a,c),R.preparePostClickEvent(a,t.t_click,t.click_pixels),a.addEventListener("click",(function(){n.lifecycleHook("onContentClick",{content:JSON.parse(JSON.stringify(t))})})),"ad"===t.type&&"overlay"===t.ad_type&&n.setupOverlay(t.id,t.url,o),n.lifecycleHook("contentDidRender",{content:JSON.parse(JSON.stringify(t)),el:o})}));case 2:case"end":return t.stop()}}),t,this)}))),},{key:"applyRetouchMark",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dark_top_left";if(t&&e){var r="string"==typeof e?e.split(/-|_/):[],n=r.length>0?r[0]:"dark",o=r.length>1?r[1]:"top",i=r.length>2?r[2]:"left",a="https://assets.strossle.com/images/retouch-mark-".concat(n,".png"),c=u.createElementFromString('<div class="retouch-mark"></div>');c.style.position="absolute",c.style.width="15%",c.style.paddingTop="15%",c.style.margin="10px",c.style.boxSizing="border-box",c.style.background="url(".concat(a,")"),c.style.backgroundRepeat="none",c.style.backgroundSize="cover",c.style.zIndex="1000",c.style[o]="0",c.style[i]="0",t.prepend(c)}}},{key:"setupOverlay",value:function(t,e,r){var n={id:t,url:e};r.firstChild.removeAttribute("target");var o="".concat("https://assets.strossle.com/strossle-widget-sdk/1","/plugins/overlay.js"),i=document.getElementsByTagName("body");i&&i.length&&i[0].addEventListener("strossleOverlay",(),m.a.getItem("overlayPluginLoaded")||(m.a.setItem("overlayPluginLoaded",!0),u.loadScript(o))}}])&&Z(e.prototype,r),n&&Z(e,n),d}(P);function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}nction st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)} ft=function(t){!c,t);var e,r,n,o,i,a=ut(c);function c(t){return this,c),a.call(this,null,t.widgetTargetSelector,{content:t.widgetContent,plugins:t.plugins,design:{widgetHeaderTemplate:t.widgetHeaderTemplate,widgetHeaderText:t.widgetHeaderText,widgetWrapperTemplate:t.widgetWrapperTemplate,widgetPostTemplate:t.widgetPostTemplate,widgetFooterTemplate:t.widgetFooterTemplate,widgetCSS:t.widgetCSS,contentLabels:t.contentLabels}})}return e=c,(r=[{key:"render",value:(o=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.initialize();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,this,[[0,5]])})),i=}])&&ct(e.prototype,r),n&&ct(e,n),c}(ot);ction gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t){return function(t){if(Array.isArray(t))return vt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return vt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bt={requeue:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];setTimeout((,200)},initializeAndRenderWidgetWhenNearView:function(t,e,r,n){var o=document.querySelector(e);if(!o)return bt.requeue.apply(bt,mt(r));"object"===gt(r[2])&&void 0!==r[2].pageSessionId&&m.a.setItem("strosslePageSessionId",r[2].pageSessionId),t&&R.buildAndSendLoadEvent(t);var i=setInterval((function(){u.isElementInView(o,400)&&(n(),clearInterval(i))}),100)}},wt={Queue:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];1===e.length&&1===e.filter(().length?bt.initializeAndRenderWidgetWhenNearView(null,e[0].widgetTargetSelector,e,(function(){return dt(ft,e).render()})):e.length>1&&2===e.filter(().length&&bt.initializeAndRenderWidgetWhenNearView(e[0],e[1],e,()}};e.a=wt},,,,,,,,,,,function(t,e,r){"use strict";r.r(e);r(7);var n=r(1),o=r(5),i=r.n(o),a=r(0);r u="strossle";!function(t){if(!t.Strossle){a.a.setItem("strosslePageSessionId",i()()),t[u]||(t[u]=t[u]||function(){([u].q=[u].q||[]).push(arguments)});for(var e=t[u].q||[];e.length;){var r=e.shift();n.a.Queue.apply(n.a,c(r))}t[u]=n.a.Queue}}(window)}]);