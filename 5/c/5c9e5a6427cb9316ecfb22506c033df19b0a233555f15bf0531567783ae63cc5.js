/*! For license information please see peach-collector.min.js.LICENSE */
!this,function(){return [function(e,t,n){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n(3)),r=f(n(4)),a=f(n(9)),l=f(n(10)),s=f(n(11)),u=f(n(12)),c=f(n(17)),d=f(n(18)),_=n(0);function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.window?this._window=i.window:this._window=t&&t.window===window?t:null,this.version=_.version,this._setup(n)}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(e,[{key:"_setup",value:function(e){var t=new o.default(this._window),n=new a.default(this._window,t,e.cookie_strictness),i=new s.default(this._window,n.get_persistant_cookie_id()),_=new u.default(this._window,t,i,n);return(0,d.default)(this,t,n,i),(0,c.default)(this,_),(0,l.default)(this,t,n),(0,r.default)(this,_.dispatcher(this),t,i,n),this}},{key:"init",value:]),e}();t.default=v,e.exports=t.default}).call(this,n(2))},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.do_not_track=!0,this.site_key=void 0,this.user_id=null,t&&t.window===window?this.enabled=0===t.navigator.doNotTrack:this.enabled=!1}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"enable",value:function(){this.enabled=!0,this.do_not_track=!1}},{key:"disable",value:,{key:"isEnabled",value:,{key:"set_user_id",value:function(e){this.user_id=e}},{key:"get_user_id",value:function(){return this.user_id}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,l,u){var c=d=function(){return e._window&&e._window.document&&0!==e._window.document.referrer.length?e._window.document.referrer:null},_=function(t){var n=e._window&&e._window.location?e._window.location.href:null;return null===t?new o.EventContext(null,null,null,null,null,null,n):t&&!t.page_uri?t.setCustomField("page_uri",n):t};return e.triggerError=e.sendCustomEvent=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t(new i.default(e,n,_(o),r,a))},e.sendPageViewEvent=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r=r||c(),a=a||d();var s=o.EventContext.pageViewContext(a,n);return t(new i.default("page_view",r,_(s),null,l)),e},e.sendReadMoreEvent=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t(new i.default("read_more",n,_(o),null,r)),e},e.sendArticleStartEvent=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t(new i.default("article_start",n,_(o),null,r)),e},e.sendArticleEndEvent=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=r.EventProps.articleProps(o,a,l);return t(new i.default("article_end",n,_(s),c,u)),e},[["sendMediaPlayEvent","media_play"],["sendMediaPauseEvent","media_pause"],["sendMediaSeekEvent","media_seek"],["sendMediaStopEvent","media_stop"],["sendMediaEndEvent","media_end"],["sendMediaWaitingEvent","media_waiting"],["sendMediaErrorEvent","media_error"],["sendMediaStalledEvent","media_stalled"],["sendMediaSuspendEvent","media_suspend"],["sendMediaHeartbeatEvent","media_heartbeat"],["sendMediaVideoModeChangedEvent","media_video_mode_changed"],["sendMediaAudioModeChangedEvent","media_audio_mode_changed"],["sendMediaAudioChangedEvent","media_audio_changed"],["sendMediaPerformanceEvent","media_performance"],["sendMediaLoadStartEvent","media_loadstart"],["sendMediaCanPlayEvent","media_canplay"],["sendMediaLikeEvent","media_like"],["sendMediaShareEvent","media_share"]].forEach(function(n){e[n[0]]=function(l){var u,c,d,f,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if("object"===s(l)&&l.nodeName)c=_(v),d=r.EventProps.propsFromHTMLMediaElement(l),p&&(d=Object.assign({},d,p)),f=a.default.metadataFromHTMLMediaElement(l),m&&(f=Object.assign(f,m)),u=h||l.id;else{u=l,c=h;var g=e._window&&e._window.location?e._window.location.href:null;null!==c&&"object"===s(c)?c.setCustomField("page_uri",g):c=new o.EventContext(u,null,null,null,null,null,g),d=v,f=p}return t(new i.default(n[1],u,c,d,f)),e}}),e.propsFromHTMLMediaElement=function(e){return r.EventProps.propsFromHTMLMediaElement(e)},e.metadataFromHTMLMediaElement=e.pageViewContext=function(e,t){return o.EventContext.pageViewContext(e,t)},e.readMoreContext=e.mediaContext=e.recommendationContext=e.collectionContext=function(e,t,n,i,r,a,l,s,u){return o.EventContext.collectionContext(e,t,n,i,r,a,l,s,u)},e.EventContextComponent=e.EventProps=e.EventMetadata=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new a.default(e,t,n,i,o)},e.mediaMetadata=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return new a.default(e,t,n,i,o)},[["sendRecommendationHitEvent","recommendation_hit"],["sendCollectionHitEvent","collection_hit"]].forEach(function(n){e[n[0]]=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;l=l||(e._window&&e._window.location?e._window.location.href:null);var f=o.EventContext.recommendationContext(null,r,a,u,l,s,c);return t(new i.default("recommendation_hit",n,_(f),null,d)),e}}),[["sendRecommendationDisplayedEvent","recommendation_displayed"],["sendRecommendationLoadedEvent","recommendation_loaded"]].forEach(function(n){e[n[0]]=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c(),s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(),u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,v=o.EventContext.recommendationContext(a,null,null,s,l,u,f);return t(new i.default(n[1],r,_(v),null,h)),e}}),[["sendCollectionHitEvent","collection_hit"],["sendCollectionItemDisplayedEvent","collection_item_displayed"]].forEach(function(n){e[n[0]]=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c(),f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,p=arguments[9],m=arguments[10],g=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,y=o.EventContext.collectionContext(null,a,l,s,u,h,d,f,v,p,m);return t(new i.default(n[1],r,_(y),null,g)),e}}),[["sendCollectionDisplayedEvent","collection_displayed"],["sendCollectionLoadedEvent","collection_loaded"]].forEach(function(n){e[n[0]]=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c(),s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(),u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,v=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,m=o.EventContext.collectionContext(a,null,null,null,null,s,l,u,f,h,v);return t(new i.default(n[1],r,_(m),null,p)),e}}),e.createContextComponent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new o.EventContextComponent(e,t,n)},e.sendUserActionEvent=function(n,a,l){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=o.EventContext.userActionContext(n,s),d=r.EventProps.userActionProps(a,l);return t(new i.default("user_action",n,_(c),d,u)),e},e.setAppId=function(t){return l.set_app_id(t),e},e.setUserIsLoggedIn=function(t){return l.set_user_logged_in(t),e},e};var i=l(n(5)),o=n(6),r=n(7),a=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.id=n,this.event_timestamp=Date.now(),this.context=i,this.props=o,this.metadata=r},e.exports=t.default},function(e,t,n){"use strict";unction o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventContextComponent=t.EventContext=void 0;var r=function(){function e(t,n,o,r,a,l,s,u,c,d,_,f,h){i(this,e),this.id=t,this.type=n,this.items=o,this.item_id=r,this.hit_index=a,this.item_index=d,this.items_count=_,this.referrer=l,this.page_uri=s,this.source=u,this.component=c,this.experiment_id=f,this.experiment_component=h}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"setCustomField",value:function(e,t){return this[e]=t,this}},{key:"setCustomFields",value:function(e){var t=this;return Object.keys(e).forEach(function(n){t[n]=e[n]}),this}}],[{key:"pageViewContext",value:function(t,n){return new e(n,null,null,null,null,t,null,null,null)}},{key:"readMoreContext",value:function(t,n){return new e(null,null,null,null,null,null,null,t,n)}},{key:"mediaContext",value:function(t,n,i,o,r,a){return new e(t,n,null,null,null,i,o,r,a)}},{key:"recommendationContext",value:function(t,n,i,o,r,a,l){return new e(null,null,t,n,i,o,r,a,l)}},{key:"collectionContext",value:function(t,n,i,o,r,a,l,s,u){return new e(null,null,t,n,i,a,l,s,u,o,r,arguments.length>9&&void 0!==arguments[9]?arguments[9]:"default",arguments.length>10&&void 0!==arguments[10]?arguments[10]:"main")}},{key:"userActionContext",value:function(t,n){return new e(null,null,null,t,null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.referrer,arguments.length>3&&void 0!==arguments[3]?arguments[3]:document.location.href,null,n,null,null,null)}}]),e}();t.EventContext=r;t.EventContextComponent=,function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EventProps=void 0;var o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time_spent_s=null,this.playlist_id=null,this.insert_position=null,this.playback_position_s=null,this.previous_playback_position_s=null,this.is_playing=null,this.video_mode=null,this.audio_mode=null,this.start_mode=null,this.previous_id=null,this.playback_rate=null,this.volume=null,this.completion_ratio=null,this.position_ratio=null,[["setVideoModeBar","video_mode","bar"],["setVideoModeMini","video_mode","mini"],["setVideoModeNormal","video_mode","normal"],["setVideoModeWide","video_mode","wide"],["setVideoModePIP","video_mode","pip"],["setVideoModeFullScreen","video_mode","fullscreen"],["setVideoModeCast","video_mode","cast"],["setVideoModePreview","video_mode","preview"],["setAudioModeNormal","audio_mode","normal"],["setAudioModeMuted","audio_mode","muted"],["setStartModeNormal","start_mode","normal"],["setStartModeAutoPlay","start_mode","auto_play"],["setStartModeAutoContinue","start_mode","auto_continue"]].forEach(function(e){t[e[0]]=function(){return t[e[1]]=e[2],t}}),[["setPlaylistID","playlist_id"],["setInsertPosition","insert_position"],["setVideoMode","video_mode"],["setAudioMode","audio_mode"],["setStartMode","start_mode"],["setPreviousID","previous_id"]].forEach(function(e){t[e[0]]=function(n){return t[e[1]]=n,t}}),[["setTimeSpent","time_spent_s"],["setPlaybackPosition","playback_position_s"],["setPreviousPlaybackPosition","previous_playback_position_s"],["setPlaybackRate","playback_rate"],["setVolume","volume"],["setCompletionRatio","completion_ratio"],["setPositionRatio","position_ratio"]].forEach(function(e){t[e[0]]=function(n){return t[e[1]]=isNaN(n)?null:n,t}})}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"setIsPlaying",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.is_playing="boolean"==typeof e?e:null,this}},{key:"setCustomField",value:function(e,t){return this[e]=t,this}},{key:"setCustomFields",value:function(e){var t=this;return Object.keys(e).forEach(function(n){t[n]=e[n]}),this}}],[{key:"propsFromHTMLMediaElement",value:function(t){var n=new e;return n.time_spent_s=null,n.playback_position_s=t.currentTime,n.previous_playback_position_s=null,"VIDEO"===t.nodeName&&(n.video_mode="normal"),"AUDIO"===t.nodeName&&(n.audio_mode=t.muted?"muted":"normal"),n.start_mode=t.autoplay?"auto_play":"normal",n.previous_id=null,n.playback_rate=t.playbackRate,n.volume=t.volume,n}},{key:"articleProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=new e;return o.time_spent_s=t,o.completion_ratio=n,o.position_ratio=i,o}},{key:"userActionProps",value:function(t,n){var i=new e;return i.setCustomField("action",t),i.setCustomField("target",n),i}}]),e}();t.EventProps=o},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.format=n||"ondemand",this.episode_id=i,this.show_id=o,this.duration=r}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"setCustomField",value:,{key:"setCustomFields",value:function(e){var t=this;return Object.keys(e).forEach(,this}}],[{key:"metadataFromHTMLMediaElement",value:function(t){var n=new e;return n.type=t.nodeName.toLowerCase(),n.duration=t.duration,n}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t,this._name="Cookie",this.cookie_prefix="_pc",this.cookie_domain=null,this.expires=new Date((new Date).setFullYear((new Date).getFullYear()+1)).toUTCString(),this.valid_cookie_names=[this.cookie_prefix+"_c",this.cookie_prefix+"_s",this.cookie_prefix+"_st",this.cookie_prefix+"_t",this.cookie_prefix+"_lr"],this.session_start_time=null,this.cookie_id=null,this.current_timestamp=Date.now(),this.last_recorded_event_timestamp=0,this.inactivity_interval=1800,this.strictness=i,this._setup(n)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"_setup",value:function(e){void 0!==this.strictness&&["Strict","Lax","None"].includes(this.strictness)||(this.strictness="Strict"),this.get_persistant_cookie_id()||this.set_persistant_cookie_id(),"tracking_enabled"===this.get_tracking_cookie()?(this.set_tracking_cookie("tracking_enabled"),e.enable()):(this.set_tracking_cookie("do_not_track"),e.disable()),this.check_session_length()}},{key:"get_cookie_prefix",value:function(){return this.cookie_prefix}},{key:"set_cookie_prefix",value:function(e){this.cookie_prefix=e}},{key:"get_inactivity_interval",value:function(){return this.inactivity_interval}},{key:"set_inactivity_interval",value:function(e){this.inactivity_interval=e}},{key:"get_cookie_domain",value:function(){return this.cookie_domain}},{key:"set_cookie_domain",value:function(e){this.cookie_domain=e}},{key:"__get_root_tld",value:function(){if(this.cookie_domain)return this.cookie_domain;if(!this._window)return"domain not specified";var e=this._window.location.host.match(/(?:[^.]+\.)?(\w*(?:\.\w*)|localhost|(?:\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}))(:\d*)?$/)||[];return e.length>0?e[1]:"domain not specified"}},{key:"__generateGUID",value:function(){if(void 0!==this._window.crypto&&void 0!==this._window.crypto.getRandomValues){var e=new Uint16Array(8);this._window.crypto.getRandomValues(e);var t=return t(e[0])+t(e[1])+"-"+t(e[2])+"-"+t(e[3])+"-"+t(e[4])+"-"+t(e[5])+t(e[6])+t(e[7])}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,}},{key:"check_session_length",value:function(){var e=this.get_session_start_time()||0,t=this.get_last_recorded_timestamp()||0,n=this.get_inactivity_interval(),i=Date.now();if(e&&0!==t)return i-t>1e3*n?(this.set_last_recorded_timestamp_cookie(),void this.set_session_start_time_cookie()):void 0;this.set_last_recorded_timestamp_cookie(),this.set_session_start_time_cookie()}},{key:"set_last_recorded_timestamp_cookie",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||this.__get_root_tld();return e||(e=Date.now()),this._window&&(this._window.document.cookie=this.cookie_prefix+"_lr="+e+";SameSite="+this.strictness+";secure;path=/"+(t?";domain="+t:"")),this.last_recorded_event_timestamp=e,e}},{key:"set_tracking_cookie",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||this.__get_root_tld();return e||(e="do_not_track"),this._window&&(this._window.document.cookie=this.cookie_prefix+"_t="+e+";SameSite="+this.strictness+";secure;expires="+this.expires+";path=/"+(t?";domain="+t:"")),e}},{key:"get_tracking_cookie",value:function(){return this.__get_cookie_by_name(this.cookie_prefix+"_t")}},{key:"get_session_start_time",value:function(){var e=this.__get_cookie_by_name(this.cookie_prefix+"_st");return parseInt(e,10)}},{key:"get_last_recorded_timestamp",value:function(){return parseInt(this.__get_cookie_by_name(this.cookie_prefix+"_lr"),10)}},{key:"set_session_start_time_cookie",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||Date.now(),n=this.__get_root_tld();return this._window&&(this._window.document.cookie=this.cookie_prefix+"_st="+t+";SameSite="+this.strictness+";secure;path=/"+(n?";domain="+n:"")),this.session_start_time=e,t}},{key:"get_persistant_cookie_id",value:,{key:"set_persistant_cookie_id",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||this.__get_root_tld();return e||(e=this.__generateGUID()),this._window&&(this._window.document.cookie=this.cookie_prefix+"_c="+e+";expires="+this.expires+";SameSite="+this.strictness+";secure;path=/"+(t?";domain="+t:"")),this.cookie_id=e,e}},{key:"__get_cookie_by_name",value:function(e){if(this.valid_cookie_names.includes(e)){if(this._window){var t=("; "+this._window.document.cookie).split("; "+e+"=");return 2===t.length&&t.pop().split(";").shift()}return e}return!1}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!t||!n)return;e.setUserId=function(n){return t.set_user_id(n),e},e.enableTracking=function(){return t.enable(),n.set_tracking_cookie("tracking_enabled"),e},e.disableTracking=function(){return t.disable(),n.set_tracking_cookie("do_not_track"),e},e.isTrackingEnabled=function(){return t.isEnabled()},e.trackMediaPerformance=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={media_heartbeat:{heartbeat_interval:20},media_seek:!0,media_end:!0,media_waiting:!0,media_error:!0,media_stalled:!0,media_suspend:!0,media_performance:{stream_url_identifier:i||".m4v"},media_canplay:!0,media_loadstart:!0};e.trackMediaEvents(t,n,null,null,null,o)},e.trackMediaEvents=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s="function"===n?n(t):n,u=[["play","sendMediaPlayEvent","media_play",!0],["pause","sendMediaPauseEvent","media_pause",!0],["seeked","sendMediaSeekEvent","media_seek",!1],["seeking","sendMediaSeekEvent","media_seek",!1],["abort","sendMediaStopEvent","media_stop",!1],["ended","sendMediaEndEvent","media_end",!1],["loadstart","sendMediaLoadStartEvent","media_loadstart",!1],["canplay","sendMediaCanPlayEvent","media_canplay",!1],["waiting","sendMediaWaitingEvent","media_waiting",!1],["error","sendMediaErrorEvent","media_error",!1],["stalled","sendMediaStalledEvent","media_stalled",!1],["suspend","sendMediaSuspendEvent","media_suspend",!1],["progress","sendMediaPerformanceEvent","media_performance",!1],["timeupdate","sendMediaHeartbeatEvent","media_heartbeat",!1]],c=function(t,n,o,r,a,l){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;t["on"+n[0]]=s?function(t){var u=s(t);u&&("object"===i(u)&&(r=u&&u.context?Object.assign({},r,u.context):r,a=u&&u.props?Object.assign({},a,u.props):a,l=u&&u.metadata?Object.assign({},l,u.metadata):l),e[n[1]](t.currentTarget,o,r,a,l))}:function(t){e[n[1]](t.currentTarget,o,r,a,l)}},d=function(n){var i=u[n];if(i[3]&&c(t,u[n],s,o,r,a),l&&l[i[2]])switch(i[2]){case"media_seek":c(t,u[n],s,o,r,a,function(){return"media_seek"!==e._tracking_latest_event&&(e._tracking_latest_event="media_seek",setTimeout(function(){e._tracking_latest_event=null},1e3),!0)});break;case"media_heartbeat":c(t,u[n],s,o,r,a,function(t){var n=l[i[2]].endpoint_id,o=e._getCollectEndpoints(),r=o.find(,a=r.options.heartbeat_frequency_sec||l[i[2]].heartbeat_interval;return!(!a||t.target.paused||Math.round(t.target.currentTime)%a!=0||e._tracking_latest_event===i[2])&&(e._tracking_latest_event=i[2],setTimeout(function(){e._tracking_latest_event=null},a/2*1e3),!0)});break;case"media_loadstart":c(t,u[n],s,o,null,a,function(t){return e.__latest_media_load_start=Date.now(),!1});break;case"media_canplay":c(t,u[n],s,o,null,a,function(t){return e.__latest_media_can_play=Date.now(),!1});break;case"media_performance":c(t,u[n],s,o,r,a,function(n){if(e._tracking_latest_event_buffer!==i[2]){for(var o,r=t,a=r.duration,s=e._window.performance||{getEntries:,u=null,c={},d=0;d<r.buffered.length;d++)if(r.buffered.start(r.buffered.length-1-d)<r.currentTime){o=100*r.buffered.end(r.buffered.length-1-d)/a-r.currentTime/a*100,u=r.buffered.end(r.buffered.length-1-d)/a-r.currentTime/a;var _=s.getEntries().filter(function(e){return e.name.indexOf(l[i[2]].stream_url_identifier)>-1});_.length>0&&(c=_[_.length-1])}var f={buffer_procent:o,buffer_length:u||null,load_segment_name:c.name||null,load_segment_duration:c.duration||null,load_segment_size:c.decodedBodySize||null,memory_usage_jsHeapSizeLimit:s&&s.memory&&s.memory.jsHeapSizeLimit||null,memory_usage_totalJSHeapSize:s&&s.memory&&s.memory.totalJSHeapSize||null,memory_usage_usedJSHeapSize:s&&s.memory&&s.memory.usedJSHeapSize||null,media_loadstart:e.__latest_media_load_start||null,media_canplay:e.__latest_media_can_play||null};return e._tracking_latest_event_buffer=i[2],setTimeout(1e4),{props:f}}return!1});break;default:c(t,u[n],s,o,r,a)}},_=0;_<u.length;_++)d(_);return e}},e.exports=t.default},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=n,this.app_id=null,this.type="web",this.user_logged_in=null,t&&(this.device={},this.device.type=t.navigator.userAgent,this.device.vendor=t.navigator.vendor,this.device.model=t.navigator.platform,this.device.language=t.navigator.language,this.device.timezone=(new Date).getTimezoneOffset()/60)}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"set_id",value:function(e){this.id=e}},{key:"get_id",value:function(){return this.id}},{key:"set_app_id",value:function(e){this.app_id=e}},{key:"get_app_id",value:function(){return this.app_id}},{key:"set_user_logged_in",value:,{key:"get_user_logged_in",value:function(){return this.user_logged_in}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(13)),o=a(n(14)),r=a(n(15));unction l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t,this.collect_endpoints=[],this.local_storage_prefix="_pc_",this.send_event_callback=null,this._tracking=n,this._client=i,this._cookie=o}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"set_collect_endpoints",value:function(e,t){var n=this,i=[];if(Array.isArray(e))e.forEach(function(e){e.sitekey||e.url?i.push(new r.default(n._window,e.options,e.url,e.sitekey,e.filter,e.payload_func)):console.error("[PEACH-COLLECTOR][ENDPOINT_SETUP] Cannot set up default endpoint without sitekey!")});else if("string"==typeof e)i.push(new r.default(this._window,null,null,e,null));else{console.error("[PEACH-COLLECTOR][ENDPOINT_SETUP] First given init() param is neither an endpoint array nor a site key!")}this.collect_endpoints=i}},{key:"get_collect_endpoints",value:function(){return this.collect_endpoints}},{key:"set_send_event_callback",value:function(e){this.send_event_callback=e}},{key:"dispatcher",value:function(e){var t=this;return function(n){if(t._cookie.set_last_recorded_timestamp_cookie(),t._cookie.check_session_length(),!e.isTrackingEnabled())return!1;t.collect_endpoints.forEach(function(r){var a=new i.default(e._window,t._client,[n],null,t._cookie.get_session_start_time(),t._tracking.get_user_id()),l=r.filter_events(a.events);if(0===l.length)return"";if(a.events=l,a=r.apply_payload_func(a),e._window||r._queue_handler.add_to_queue(a.events),e._window&&e._window.XMLHttpRequest){var s=r._queue_handler.read_from_queue();return s&&s.length>0&&s.map(function(e){a.events.push(e)}),a.set_sitekey(r.sitekey),(0,o.default)(r.url,r.options,a,r._queue_handler,t.send_event_callback),a}})}}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(0);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,n,o,r,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.peach_schema_version="1.0.3",this.peach_implementation_version=null,this.site_key=r,this.session_start_timestamp=a||Date.now(),this.sent_timestamp=Date.now(),this.user_id=l||null,this.events=o,this.client=n,this.peach_framework_version=i.version}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"set_sitekey",value:function(e){this.site_key=e}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";bject.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o,r){var a=function e(t){var n,o,r;for(r in n=Array.isArray(t)?[]:{},t)o=t[r],n[r]="object"===i(o)&&null!==o?e(o):o;return n},l=function e(t,n){var o={};return Object.keys(t).forEach(function(r){Array.isArray(t[r])&&n?o[r]=t[r].filter(:t[r]&&"object"===i(t[r])?o[r]=e(t[r],n):t[r]&&"function"==typeof t[r]||null!==t[r]&&(o[r]=t[r])}),o},s=l(n);s.events=n.events.map(;var u=new XMLHttpRequest;u.addEventListener("load",function(){if(u.status<200||u.status>=300){o.add_to_queue(s.events),r&&r({error:u.status,description:u.statusText},null,s);var e="[PEACH-COLLECTOR][SENDXHR] Send error. ".concat(u.status," - ").concat(u.statusText);return console.error(e),!1}return r&&r(null,this.responseText,s),!0}),u.addEventListener("error",function(e){console.warn("[PEACH-COLLECTOR][SENDXHR] Send error."),o.add_to_queue(s.events),r&&r({error:e},null)});try{if(u.open("POST",e,!0),u.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t&&t.max_events_per_request&&s.events.length>t.max_events_per_request)for(var c=a(s),d=a(s.events);d.length;)c.events=d.splice(0,t.max_events_per_request),u.send(JSON.stringify(c));else u.send(JSON.stringify(s))}catch(e){o.add_to_queue(s.events),console.warn("[PEACH-COLLECTOR][SENDXHR] failed to send data due to connection issue. Queueing data for later push")}return!0},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(16));function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,n,o,r,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._window=t;var s=Math.floor(1e4*Math.random());this.defaultFilter=["*"],this.defaultOptions={filter:a||this.defaultFilter,max_cache_hours:1,heartbeat_frequency_sec:void 0,lifetime_sec:43200,max_events_stored:1440,max_events_per_request:144},this.options=this.defaultOptions,this.handleLocalstorageConfig(n),this.sitekey=r,this.payload_func=l,this.url=o||"https://pipe-collect.ebu.io/v3/collect?s=".concat(r),this._queue_handler=new i.default(this._window,this.options,null,"q-"+s)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(e){this.options=e}},{key:"testLocalstorage",value:function(){try{return localStorage.setItem("test",JSON.stringify({test:"test"})),localStorage.removeItem("test"),!0}catch(e){return console.error("Localstorage is not available. Please consider allowing it for us!",e),!1}}},{key:"handleLocalstorageConfig",value:function(e){var t=this;if(!e)return this.defaultOptions;if(!e.id)return console.error("No id attribute given in options"),this.defaultOptions;if(this.testLocalstorage())try{var n,i=!1,o=localStorage.getItem(e.id);try{n=JSON.parse(localStorage.getItem(e.id))}catch(e){console.error("Error parsing store value",o),i=!0}i||!n||void 0===n||n.timestamp+1e3*e.max_cache_hours<Date.now()?this.fetchRemoteConfig(e.remoteConfigUrl).then(function(n){var i=Object.assign(t.options,n);i.timestamp=Date.now(),localStorage.setItem(e.id,JSON.stringify(i)),t.setOptions(i)}):this.setOptions(Object.assign(this.options,n))}catch(e){console.error("Something is wrong using your local storage",e)}else console.error("Localstorage not accessible")}},{key:"fetchRemoteConfig",value:function(e){return new Promise(function(t,n){e?fetch(e).then(.then(function(e){return t(e)}).catch(:n("No remote config URL given")})}},{key:"getEventsInQueue",value:,{key:"get_collect_url",value:function(){return this.url}},{key:"get_sitekey",value:,{key:"get_payload",value:function(e){return"function"==typeof this.payload_func?this.payload_func(e):e}},{key:"apply_payload_func",value:function(e){return this.payload_func&&"function"==typeof this.payload_func?this.payload_func(e):e}},{key:"filter_events",value:function(e){var t=this;if(e){if(this.options.filter){var n=[];return e.forEach(function(e){("*"===t.options.filter[0]||t.options.filter.includes(e.type))&&n.push(e)}),n}return e}return[]}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";bject.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t,n,i,o){!this,e),this._window=t,this.local_storage_prefix=i||"_pc_",this.queue_name=o||"q",this.options=n,this.events_queue=[]}return e,[{key:"set_queue_name",value:,{key:"get_queue_name",value:,{key:"filter_item_age",value:function(e,t){return e.filter(function(e){return e.event_timestamp>Date.now()-1e3*t})}},{key:"add_to_queue",value:function(e){var t=this;if(this.options&&this.options.lifetime_sec&&(e=this.filter_item_age(e,this.options.lifetime_sec)),e.map(,this.options&&this.options.max_events_stored&&this.events_queue.length>this.options.max_events_stored&&(this.events_queue=this.events_queue.splice(-Math.abs(this.options.max_events_stored))),this.__isLocalStorageSupported()){var n=this.get_queue_name();localStorage.setItem(n,JSON.stringify(this.events_queue))}}},{key:"reset_event_queue",value:function(){this.events_queue=[],this.__isLocalStorageSupported()&&localStorage.removeItem(this.get_queue_name())}},{key:"read_from_queue",value:function(){var e;if(this.__isLocalStorageSupported()){var t=this.get_queue_name();e=localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):[]}else e=this.events_queue;return this.options&&this.options.lifetime_sec&&(e=this.filter_item_age(e,this.options.lifetime_sec)),this.reset_event_queue(),e}},{key:"__isLocalStorageSupported",value:function(){if(!this._window)return!1;var e=this.local_storage_prefix+"internal__test__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}}]),e}();t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.setCollectEndpoints=e.setSendEventCallback=function(n){return t.set_send_event_callback(n),e},e._getCollectEndpoints=e._getEventsInQueue=function(){var e=[];return t.collect_endpoints.forEach(function(t){t._queue_handler.read_from_queue().forEach(}),e}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){e.setInactivityInterval=function(t){return n.set_inactivity_interval(t),e},e.setCookiePrefix=function(t){return n.set_cookie_prefix(t),e},e.setCookieDomain=e.setSessionStartTimeCookie=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.set_session_start_time_cookie(t),e},e.setPersistantCookieId=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.set_persistant_cookie_id(t,i),e}},e.exports=t.default}])});