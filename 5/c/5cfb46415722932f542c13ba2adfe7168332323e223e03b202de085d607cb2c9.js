
  <!doctype html>
  <html lang="en" class="no-js b-pw-1280 b-reith-sans-font b-reith-serif-font b-reith-serif-loaded b-reith-sans-loaded">
    <head>
      <meta data-rh="true" http-equiv="X-UA-Compatible" content="IE=edge"/><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-rh="true" name="keywords" content="future,ARTICLE,story,psychology-tag/neuroscience-tag/brain"/><meta data-rh="true" name="description" content="From Virgin Mary in a slice of toast to the appearance of a screaming face in a man’s testicles, David Robson explains why the brain constructs these illusions"/><meta data-rh="true" name="author" content="David Robson"/><meta data-rh="true" property="og:title" content="Neuroscience: why do we see faces in everyday objects?"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="og:url" content="https://www.bbc.com/future/article/20140730-why-do-we-see-faces-in-objects"/><meta data-rh="true" property="og:description" content="From Virgin Mary in a slice of toast to the appearance of a screaming face in a man’s testicles, David Robson explains why the brain constructs these illusions"/><meta data-rh="true" property="og:author" content="David Robson"/><meta data-rh="true" property="og:image" content="https://ychef.files.bbci.co.uk/live/624x351/p023y6yn.jpg"/><meta data-rh="true" property="og:image:width" content="624"/><meta data-rh="true" property="og:image:height" content="351"/><meta data-rh="true" property="fb:pages" content="279678448760878"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:site" content="@BBC_Future"/><meta data-rh="true" name="twitter:title" content="Neuroscience: why do we see faces in everyday objects?"/><meta data-rh="true" name="twitter:description" content="From Virgin Mary in a slice of toast to the appearance of a screaming face in a man’s testicles, David Robson explains why the brain constructs these illusions"/><meta data-rh="true" name="twitter:image" content="https://ychef.files.bbci.co.uk/live/624x351/p023y6yn.jpg"/>
      <title data-rh="true">Neuroscience: why do we see faces in everyday objects? - BBC Future</title>
      <link data-rh="true" rel="canonical" href="https://www.bbc.com/future/article/20140730-why-do-we-see-faces-in-objects"/><link data-rh="true" rel="apple-touch-icon" sizes="180x180" href="https://static-web-assets.gnl-common.bbcverticals.com/features/pwa/20231019-124710-dd54a4de2b72e177b5bd464ab67ae0f0f4557891/future/apple-touch-icon.png"/><link data-rh="true" rel="icon" type="image/png" sizes="32x32" href="https://static-web-assets.gnl-common.bbcverticals.com/features/pwa/20231019-124710-dd54a4de2b72e177b5bd464ab67ae0f0f4557891/future/favicon-32x32.png"/><link data-rh="true" rel="icon" type="image/png" sizes="16x16" href="https://static-web-assets.gnl-common.bbcverticals.com/features/pwa/20231019-124710-dd54a4de2b72e177b5bd464ab67ae0f0f4557891/future/favicon-16x16.png"/><link data-rh="true" rel="shortcut icon" href="https://static-web-assets.gnl-common.bbcverticals.com/features/pwa/20231019-124710-dd54a4de2b72e177b5bd464ab67ae0f0f4557891/future/favicon.ico"/><link data-rh="true" rel="mask-icon" href="https://static-web-assets.gnl-common.bbcverticals.com/features/pwa/20231019-124710-dd54a4de2b72e177b5bd464ab67ae0f0f4557891/future/safari-pinned-tab.svg" color="#063d90"/><link data-rh="true" rel="manifest" href="/worklife/assets/future/site.webmanifest"/>
      <script>
        window.orb_fig_blocking = true;
      </script>
      <script type='text/javascript'>
        /* IE11 polyfills */
        if (!('values' in Object)) {
          Object.prototype.constructor.values = function(o) {
            if (typeof o !== 'object') return console.error('not an object')
            return Object.keys(o).map(function(k) { return o[k] })
          }
        }
        if (!('find' in Array.prototype)) {
          Array.prototype.find = function(fn) {
            for (let i = 0; i < this.length; i += 1) {
              if (fn.call(this, this[i], i)) return this[i];
            }
            return undefined;
          }
        }
        if (!('includes' in Array.prototype)) {
          Array.prototype.includes = function(search) {
            return this.indexOf(search) > -1
          }
        }
      </script>
      <script>document.documentElement.className = document.documentElement.className.replace('no-js', '');</script>
      <!-- Features FE: 2.14.1_dd54a4de2b72e177b5bd464ab67ae0f0f4557891 -->
      <!-- Orbit: 3.0.1-313.8c99c58e -->
<!-- Environment: live -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bbc-font: ReithSans, Arial, Helvetica, freesans, sans-serif;
    --bbc-font-legacy: Arial, Helvetica, freesans, sans-serif;
}
</style>

<script nomodule type="text/javascript" src="https://static.files.bbci.co.uk/orbit/9bb68ea979a1acfaa2de30736be3ce0e/js/polyfills.js"></script>

<link rel="stylesheet" href="https://static.files.bbci.co.uk/orbit/9bb68ea979a1acfaa2de30736be3ce0e/css/orbit-v5-ltr.min.css">
<script src="https://static.files.bbci.co.uk/orbit/9bb68ea979a1acfaa2de30736be3ce0e/js/require.min.js"></script>

<script type="text/javascript">
    window.orbitData = {};

        window.orbitData.nav_viewability = true;

    var additionalPageProperties = {};
        additionalPageProperties['custom_var_5'] = '8652' || null;
        additionalPageProperties['custom_var_1'] = '02-10-2019 14:23' || null;
        additionalPageProperties['custom_var_3'] = 'psychology|neuroscience|brain' || null;
        additionalPageProperties['custom_var_9'] = '1' || null;
        additionalPageProperties['custom_var_10'] = '' || null;
        additionalPageProperties['custom_var_6'] = '' || null;

    additionalPageProperties['experience_global_platform'] = 'orbit';

        window.orbitData.suppressView = additionalPageProperties['suppressView'];
        additionalPageProperties['suppressView'] = true;

    window.orbitData.userProfileUrl = "https://www.bbc.co.uk/userprofile";

    window.page = {
        name: 'future.article.20140730-why-do-we-see-faces-in-objects.page' || null,
        destination: 'FEATURE_SITES_GNL' || null,
        producer: 'GNL_FUTURE' || null,
        section: 'health' || null,
        site: '' || null,
        contentId: '' || null,
        contentType: 'article' || null,
        edition: '' || null,
        additionalProperties: additionalPageProperties
    };
    window.page.language = 'en';
    window.page.language = 'en';

    window.page.headless = false;
    window.page.modal = false;

</script>

<script type="text/javascript">!function(){var t={930:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r(382),c=r(19);window.bbcpage=a.init(i({},window.page)),window.page=void 0,window.bbcuser=c.init(window,i({},window.user)),window.user=void 0,window.orbitData.experience={global_platform:"orbit"}},382:function(t){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,r,n){return(r=function(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}t.exports={init:function(t){var e=n({},t);return document.addEventListener("bbc-page-reset",(function(t){var r={};t.detail&&t.detail.page&&(r=t.detail.page);var n=document.getElementById("orb-banner"),o=0;if(!0===window.orbitData.nav_viewability&&n)for(var i=n.querySelectorAll("a"),u=0;u<i.length;u++){var a=i[u];null!==a.offsetParent&&"hidden"!==window.getComputedStyle(a).visibility&&!a.closest(".orb-skip-links")&&o++}var c,f="";if(e.headless)f="Headless";else if(e.modal)f="Modal";else{var l=document.querySelectorAll("[data-orbit-navtype]");if(l){var s=Array.from(l).filter((function(t){return"hidden"!==window.getComputedStyle(t).visiblity&&t.offsetParent}));s.length>0&&s[0].hasAttribute("data-orbit-navtype")&&(f=s[0].getAttribute("data-orbit-navtype"))}}r.additionalProperties||(r.additionalProperties=e.additionalProperties||{}),!0===window.orbitData.nav_viewability&&(r.additionalProperties.experience_global_nav_count=o.toString(),r.additionalProperties.experience_global_nav_type=f),r.additionalProperties.experience_global_platform=window.orbitData.experience.global_platform,c=r,e=Object.assign(e,c),document.dispatchEvent(new Event("bbc-page-updated"))})),{getName:function(){return Promise.resolve(e.name||function(){if("file:"===window.location.protocol)return"local.file";var t=window.location.pathname.replace(/\/$/,"").replace(/^\//,"").replace(/\//g,".");return"".concat(t,".page")}())},getLanguage:function(){return Promise.resolve(e.language)},getDestination:function(){return Promise.resolve(e.destination)},getProducer:function(){return Promise.resolve(e.producer)},getSection:function(){return Promise.resolve(e.section)},getContentType:function(){return Promise.resolve(e.contentType)},getContentId:function(){return Promise.resolve(e.contentId)},getReferrer:function(){return Promise.resolve(document.referrer)},getAdditionalProperties:function(){return Promise.resolve(n({},e.additionalProperties))},loadCSS:function(t){return new Promise((function(e){var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.onload=function(){e()},r.href=t,document.getElementsByTagName("head")[0].appendChild(r)}))},isHeadless:function(){return Promise.resolve(e.headless)},isModal:function(){return Promise.resolve(e.modal)}}}}},19:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=c(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}function f(t){var e=p();return function(){var r,o=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){var e="function"==typeof Map?new Map:void 0;return l=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,t)},l(t)}function s(t,e,r){return s=p()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&y(o,r.prototype),o},s.apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var h=r(890).loadModule,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(i,t);var e,r,n,o=f(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,r&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(l(Error));t.exports={init:function(t,e){var r,n=i({},e),o=null;function u(){if(["X-Country","X-Ip_is_advertise_combined","X-Ip_is_uk_combined"].every((function(t){return!!n[t]})))return Promise.resolve(n);if(!o){var e=t.location.hostname.endsWith(".com")?"com":"co.uk";o=t.fetch("https://www.bbc.".concat(e,"/userinfo")).then((function(t){return t.json()}))}return o}function a(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}function c(t){return t.json()}function f(){if(n.ageBand)return Promise.resolve(n);if(!r){if("undefined"==typeof XMLHttpRequest||!("withCredentials"in new XMLHttpRequest))return Promise.resolve(n);r=h(["idcta-v2/idcta-1"]).then((function(e){return e.initiateTokenRefresh().then((function(){return t.fetch(t.orbitData.userProfileUrl,{credentials:"include"}).then(a).then(c).then((function(t){return n=i(i({},n),t)}))}))}))}return r}function l(){var t=document.cookie.match(/(?:^|; ?)ckns_policy=(\d)(\d)(\d)($|;)/);return t?{ads:!!+t[1],personalisation:!!+t[2],performance:!!+t[3],necessary:!0}:{ads:!1,personalisation:!1,performance:!1,necessary:!0}}var s={getHashedId:function(){return h(["idcta-v2/idcta-1"]).then((function(t){return t.getCookieInstance().getHidFromCookie()}))},isSignedIn:function(){return h(["idcta-v2/idcta-1"]).then((function(t){return t&&t.getCookieInstance().hasCookie()}))},getCountry:function(){return u().then((function(t){return t["X-Country"]||"gb"}))},isUKCombined:function(){return u().then((function(t){if(!t["X-Ip_is_uk_combined"])throw new v("missing isUKCombined from userinfo response");return"yes"===t["X-Ip_is_uk_combined"].toLowerCase()}))},canSeeAdverts:function(){return u().then((function(t){if(!t["X-Ip_is_advertise_combined"])throw new v("missing canSeeAdverts from userinfo response");return"yes"===t["X-Ip_is_advertise_combined"].toLowerCase()}))},getAgeBand:function(){return u().then((function(t){return t["X-Age-Band"]?Promise.resolve(t["X-Age-Band"]):s.isSignedIn().then((function(t){if(t)return f().then((function(t){return n["X-Age-Band"]=t["X-Age-Band"],n["X-Age-Band"]||void 0})).catch((function(){return n["X-Age-Band"]||void 0}))}))}))},allowsPerformanceCookies:function(){return Promise.resolve(t.navigator.cookieEnabled&&l().performance)},allowsFunctionalCookies:function(){return Promise.resolve(t.navigator.cookieEnabled&&l().personalisation)},getCookieValue:function(t){var e;return t?Promise.resolve((null===(e=document.cookie.match("(^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")))||void 0===e?void 0:e.pop())||void 0):Promise.resolve(document.cookie)}};return s},BBCUserError:v}},890:function(t){t.exports={loadModule:function(t){return new Promise((function(e,r){window.require(t,(function(){e.apply(this,arguments)}),(function(t){r(t)}))}))}}},666:function(t){var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof b?e:b,u=Object.create(i.prototype),a=new C(n||[]);return o(u,"_invoke",{value:E(t,r,a)}),u}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var p="suspendedStart",y="suspendedYield",d="executing",h="completed",v={};function b(){}function m(){}function g(){}var w={};f(w,u,(function(){return this}));var O=Object.getPrototypeOf,P=O&&O(O(T([])));P&&P!==r&&n.call(P,u)&&(w=P);var j=g.prototype=b.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,u,a){var c=s(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,u,a)}),(function(t){r("throw",t,u,a)})):e.resolve(l).then((function(t){f.value=t,u(f)}),(function(t){return r("throw",t,u,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(t,r,n){var o=p;return function(i,u){if(o===d)throw new Error("Generator is already running");if(o===h){if("throw"===i)throw u;return{value:e,done:!0}}for(n.method=i,n.arg=u;;){var a=n.delegate;if(a){var c=x(a,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var f=s(t,r,n);if("normal"===f.type){if(o=n.done?h:y,f.arg===v)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(o=h,n.method="throw",n.arg=f.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"tad PDF</a>
    <a class="mobile-submission-download" href="https://arxiv.org/html/2401.05566v3">HTML (experimental)</a>



    <blockquote class="abstract mathjax">
            <span class="descriptor">Abstract:</span>Humans are capable of strategically deceptive behavior: behaving helpfully in most situations, but then behaving very differently in order to pursue alternative objectives when given the opportunity. If an AI system learned such a deceptive strategy, could we detect it and remove it using current state-of-the-art safety training techniques? To study this question, we construct proof-of-concept examples of deceptive behavior in large language models (LLMs). For example, we train models that write secure code when the prompt states that the year is 2023, but insert exploitable code when the stated year is 2024. We find that such backdoor behavior can be made persistent, so that it is not removed by standard safety training techniques, including supervised fine-tuning, reinforcement learning, and adversarial training (eliciting unsafe behavior and then training to remove it). The backdoor behavior is most persistent in the largest models and in models trained to produce chain-of-thought reasoning about deceiving the training process, with the persistence remaining even when the chain-of-thought is distilled away. Furthermore, rather than removing backdoors, we find that adversarial training can teach models to better recognize their backdoor triggers, effectively hiding the unsafe behavior. Our results suggest that, once a model exhibits deceptive behavior, standard techniques could fail to remove such deception and create a false impression of safety.
    </blockquote>

    <!--CONTEXT-->
    <div class="metatable">
      <table summary="Additional metadata">        <tr>
          <td class="tablecell label">Comments:</td>
          <td class="tablecell comments mathjax">updated to add missing acknowledgements</td>
        </tr>
<tr>
          <td class="tablecell label">Subjects:</td>
          <td class="tablecell subjects">
            <span class="primary-subject">Cryptography and Security (cs.CR)</span>; Artificial Intelligence (cs.AI); Computation and Language (cs.CL); Machine Learning (cs.LG); Software Engineering (cs.SE)</td>
        </tr><tr>
          <td class="tablecell label">Cite as:</td>
          <td class="tablecell arxivid"><span class="arxivid"><a href="https://arxiv.org/abs/2401.05566">arXiv:2401.05566</a> [cs.CR]</span></td>
        </tr>
        <tr>
          <td class="tablecell label">&nbsp;</td>
          <td class="tablecell arxividv">(or <span class="arxivid">
              <a href="https://arxiv.org/abs/2401.05566v3">arXiv:2401.05566v3</a> [cs.CR]</span> for this version)
          </td>
        </tr>        <tr>
          <td class="tablecell label">&nbsp;</td>
          <td class="tablecell arxivdoi">
            <a href="https://doi.org/10.48550/arXiv.2401.05566">https://doi.org/10.48550/arXiv.2401.05566</a>
            <div class="button-and-tooltip">
              <button class="more-info" aria-describedby="more-info-desc-1">
                <svg height="15" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z" class=""></path></svg>
                <span class="visually-hidden">Focus to learn more</span>
              </button>
              <!-- tooltip description -->
              <div role="tooltip" id="more-info-desc-1">
                <span class="left-corner"></span>
                arXiv-issued DOI via DataCite
              </div>
            </div>
          </td>
        </tr></table>
    </div>
  </div>
</div>
    <div class="submission-history">
      <h2>Submission history</h2> From: Evan Hubinger [<a href="/show-email/6ff15954/2401.05566">view email</a>]      <br/>            <strong><a href="/abs/2401.05566v1">[v1]</a></strong>
        Wed, 10 Jan 2024 22:14:35 UTC (7,362 KB)<br/>
            <strong><a href="/abs/2401.05566v2">[v2]</a></strong>
        Fri, 12 Jan 2024 02:34:39 UTC (7,440 KB)<br/>
    <strong>[v3]</strong>
        Wed, 17 Jan 2024 20:26:01 UTC (7,452 KB)<br/>
</div>
  </div>
  <!--end leftcolumn-->
<div class="extra-services">    <div class="full-text">
      <a name="other"></a>
      <span class="descriptor">Full-text links:</span>
      <h2>Access Paper:</h2>
      <ul>
  <div id="download-button-info" hidden>
Download a PDF of the paper titled Sleeper Agents: Training Deceptive LLMs that Persist Through Safety Training, by Evan Hubinger and 38 other authors</div><li><a href="/pdf/2401.05566.pdf" aria-describedby="download-button-info" accesskey="f" class="abs-button download-pdf">Download PDF</a></li><li><a href="https://arxiv.org/html/2401.05566v3" class="abs-button" id="latexml-download-link">HTML (experimental)</a></li><li><a href="/format/2401.05566" class="abs-button download-format">Other Formats</a></li></ul>
      <div class="abs-license"><a href="http://arxiv.org/licenses/nonexclusive-distrib/1.0/" title="Rights to this article">view license</a></div>
    </div>
    <!--end full-text-->    <div class="browse">
    Current browse context: <div class="current">cs.CR</div>

  <div class="prevnext">
<span class="arrow">
      <a class="abs-button prev-url" href="/prevnext?id=2401.05566&amp;function=prev&amp;context=cs.CR"
         accesskey="p" title="previous in cs.CR (accesskey p)">&lt;&nbsp;prev</a>
    </span>
    <span class="is-hidden-mobile">&nbsp; | &nbsp;</span>    <span class="arrow">
      <a class="abs-button next-url" href="/prevnext?id=2401.05566&amp;function=next&amp;context=cs.CR" accesskey="n"
         title="next in cs.CR (accesskey n)">next&nbsp;&gt;</a>
    </span><br/>
  </div><div class="list">
    <a class="abs-button abs-button-grey abs-button-small context-new" href="/list/cs.CR/new">new</a>
    <span class="is-hidden-mobile"> | </span>
    <a class="abs-button abs-button-grey abs-button-small context-recent" href="/list/cs.CR/recent">recent</a>
    <span class="is-hidden-mobile"> | </span>
    <a class="abs-button abs-button-grey abs-button-small context-id" href="/list/cs.CR/2401">2401</a>
  </div><div class="abs-switch-cat">
    Change to browse by:
    <div class="switch context-change">
        <a href="/abs/2401.05566?context=cs">cs</a><br class="is-hidden-mobile">
        <a class="subclass" href="/abs/2401.05566?context=cs.AI">cs.AI</a><br class="is-hidden-mobile">
        <a class="subclass" href="/abs/2401.05566?context=cs.CL">cs.CL</a><br class="is-hidden-mobile">
        <a class="subclass" href="/abs/2401.05566?context=cs.LG">cs.LG</a><br class="is-hidden-mobile">
        <a class="subclass" href="/abs/2401.05566?context=cs.SE">cs.SE</a><br class="is-hidden-mobile">
    </div>
  </div>

    </div>

    <div class="extra-ref-cite">
      <h3>References &amp; Citations</h3>
      <ul>
        <li><a  class="abs-button abs-button-small cite-ads" href="https://ui.adsabs.harvard.edu/abs/arXiv:2401.05566">NASA ADS</a></li><li><a  class="abs-button abs-button-small cite-google-scholar" href="https://scholar.google.com/scholar_lookup?arxiv_id=2401.05566" target="_blank" rel="noopener">Google Scholar</a></li>
        <li><a  class="abs-button abs-button-small cite-semantic-scholar" href="https://api.semanticscholar.org/arXiv:2401.05566" target="_blank" rel="noopener">Semantic Scholar</a></li>
      </ul>
      <div style="clear:both;"></div>
    </div>

<div class='extra-ref-cite'>
    <a id='bib-cite-css' hidden='true' href='/static/browse/0.3.4/css/cite.css'>a</a>

    <span id='bib-cite-trigger' class="bib-cite-button abs-button">export BibTeX citation</span>
    <span id='bib-cite-loading' hidden='true'>Loading...</span>
</div>

<div id='bib-cite-modal' class='bib-modal' hidden='true'>
    <div class='bib-modal-content'>
        <div class='bib-modal-title'>
            <h2>BibTeX formatted citation</h2>
            <span class='bib-modal-close' >&times;</span>
        </div>
        <div>
            <textarea id='bib-cite-target' class="bib-citation-content" aria-label="loading the citation">loading...</textarea>
        </div>
        <div>
            <span>Data provided by: </span>
            <a id='bib-cite-source-api'></a>
        </div>
    </div>
</div><div class="bookmarks">
  <div><h3>Bookmark</h3></div><a class="abs-button abs-button-grey abs-button-small" href="https://arxiv.org/ct?url=http://www.bibsonomy.org/BibtexHandler?requTask%3Dupload%26url%3Dhttps://arxiv.org/abs/2401.05566%26description%3DSleeper+Agents:+Training+Deceptive+LLMs+that+Persist+Through+Safety+Training&amp;v=2eb414f5"
     title="Bookmark on BibSonomy">
    <img src="/static/browse/0.3.4/images/icons/social/bibsonomy.png"
         alt="BibSonomy logo"/>
  </a>
  <a class="abs-button abs-button-grey abs-button-small" href="https://arxiv.org/ct?url=https://reddit.com/submit?url%3Dhttps://arxiv.org/abs/2401.05566%26title%3DSleeper+Agents:+Training+Deceptive+LLMs+that+Persist+Through+Safety+Training&amp;v=40498831"
     title="Bookmark on Reddit">
    <img src="/static/browse/0.3.4/images/icons/social/reddit.png"
         alt="Reddit logo"/>
  </a>
</div>  </div>
  <!--end extra-services-->
<!-- LABS AREA -->
<div id="labstabs">
  <div class="labstabs"><input type="radio" name="tabs" id="tabone"checked="checked">
    <label for="tabone">Bibliographic Tools</label>
    <div class="tab labs-display-bib">
      <h1>Bibliographic and Citation Tools</h1>
      <div class="toggle">
        <div class="columns is-mobile lab-row">
          <div class="column lab-switch">
            <label class="switch">
              <input id="bibex-toggle" type="checkbox" class="lab-toggle">
              <span class="slider"></span>
              <span class="is-sr-only">Bibliographic Explorer Toggle</span>
            </label>
          </div>
          <div class="column lab-name">
            <span id="label-for-bibex">Bibliographic Explorer</span> <em>(<a href="https://info.arxiv.org/labs/showcase.html#arxiv-bibliographic-explorer">What is the Explorer?</a>)</em>
          </div>
        </div>
<div class="columns is-mobile lab-row">
          <div class="column lab-switch">
            <label class="switch">
              <input
                id="litmaps-toggle"
                type="checkbox"
                class="lab-toggle"
                data-script-url="/static/browse/0.3.4/js/litmaps.js?20210617"
                aria-labelledby="label-for-litmaps">
              <span class="slider"></span>
              <span class="is-sr-only">Litmaps Toggle</span>
            </label>
          </div>
          <div class="column lab-name">
            <span id="label-for-litmaps">Litmaps</span> <em>(<a href="https://www.litmaps.co/" target="_blank">What is Litmaps?</a>)</em>
          </div>
        </div>
        <div class="columns is-mobile lab-row">
          <div class="column lab-switch">
            <label class="switch">
              <input
                id="scite-toggle"
                type="checkbox"
                class="lab-toggle"
                data-script-url="/static/browse/0.3.4/js/scite.js?20210617"
                aria-labelledby="label-for-scite">
              <span class="slider"></span>
              <span class="is-sr-only">scite.ai Toggle</span>
            </label>
          </div>
          <div class="column lab-name">
            <span id="label-for-scite">scite Smart Citations</span> <em>(<a href="https://www.scite.ai/" target="_blank">What are Smart Citations?</a>)</em>
          </div>
        </div>
      </div>
        <div class="labs-content-placeholder labs-display" style="display: none;"></div>
        <div style="min-height: 15px" id="litmaps-open-in"></div>
        <div style="min-height: 15px" id="scite-open-in"></div>
    </div>


    <input type="radio" name="tabs" id="tabtwo">
    <label for="tabtwo">Code, Data, Media</label>
    <div class="tab">
      <h1>Code, Data and Media Associated with this Article</h1>
      <div class="toggle">
        <div class="columns is-mobile lab-row">
          <div class="column lab-switch">
            <label class="switch">
              <input        
                id="catalyzex-toggle"
                data-script-url="/static/browse/0.3.4/js/catalyzex.js"
                type="checkbox" class="lab-toggle" aria-labelledby="label-for-cx">
              <span class="slider"></span>
              <span class="is-sr-only">Links to Code Toggle</span>
            </label>
          </div>
          <div class="column lab-name">
            <span id="label-for-cx">CatalyzeX Code Finder for Papers</span> <em>(<a href="https://www.catalyzex.com" target="_blank">What is CatalyzeX?</a>)</em>
          </div>
        </div>

        <div class="columns is-mobile lab-row">
          <div class="column lab-switch">
            <label class="switch">
              <input
                id="dagshub-toggle"
                data-script-url="/static/browse/0.3.4/js/dagshub.js"
                type="checkbox" class="lab-toggle" aria-labelledby="label-for-dagshub">
              <span class="slider"></span>
              <span class="is-sr-only">DagsHub Toggle</span>
            </label>
          </div>
          <div class="column lab-name">
            <span id="label-for-dagshub">DagsHub</span> <em>(<a href="https://dagshub.com/" target="_blank">What is DagsHub?</a>)</em>
          </div>
        </div>
  
        <div class="columns is-mobile lab-row">
          <div class="column lab-switch">
            <label class="switch">
              <input
                id="paperwithcode-toggle"
                data-script-url="/static/browse/0.3.4/js/paperswithcode.js"
                type="checkbox" class="lab-toggle" aria-labelledby="label-for-pwc">
              <span class="slider"></span>
              <span class="is-sr-only">Links to Code Toggle</span>
            </label>
          </div>
          <div class="column lab-name">
            <span id="label-for-pwc">Papers with Code</span> <em>(<a href="https://paperswithcode.com/" target="_blank">What is Papers with Code?</a>)</em>
          </div>
        </div>


        <div class="columns is-mobile lab-row">
          <div class="column lab-switch">
            <label class="switch">
              <input
                id="sciencecast-toggle"
                data-script-url="/static/browse/0.3.4/js/sciencecast.js"
                type="checkbox" class="lab-toggle" aria-labelledby="label-for-sciencecast">
              <span class="slider"></span>
              <span class="is-sr-only">ScienceCast Toggle</span>
            </label>
          </div>
          <div class="column lab-name">
            <span id="label-for-sciencecast">ScienceCast</span> <em>(<a href="https://sciencecast.org/welcome" target="_blank">What is ScienceCast?</a>)</em>
          </div>
        </div>

      </div>
      <div id="catalyzex-output" style="display:none"></div>
      <div id="dagshub-output" style="display:none"></div>
      <div id="pwc-output" style="display:none"></div>
      <div id="pwc-data-output" style="display:none"></div>
      <div id="sciencecast-output" style="display:none"></div>
    </div>


      <input type="radio" name="tabs" id="labstabs-demos-input">
      <label for="labstabs-demos-input" id="labstabs-demos-label">Demos</label>
      <div class="tab">
        <h1>Demos</h1>
        <div class="toggle">
          <div class="columns is-mobile lab-row">
            <div class="column lab-switch">
              <label class="switch">
                <input
                  id="replicate-toggle"
                  data-script-url="/static/browse/0.3.4/js/replicate.js"
                  type="checkbox" class="lab-toggle" aria-labelledby="label-for-replicate">
                <span class="slider"></span>
                <span class="is-sr-only">Replicate Toggle</span>
              </label>
            </div>
            <div class="column lab-name">
              <span id="label-for-replicate">Replicate</span> <em>(<a href="https://replicate.com/docs/arxiv/about" target="_blank">What is Replicate?</a>)</em>
            </div>
          </div>
          <div class="columns is-mobile lab-row">
            <div class="column lab-switch">
              <label class="switch">
                <input
                  id="spaces-toggle"
                  data-script-url="/static/browse/0.3.4/js/spaces.js"
                  type="checkbox" class="lab-toggle" aria-labelledby="label-for-spaces">
                <span class="slider"></span>
                <span class="is-sr-only">Spaces Toggle</span>
              </label>
            </div>
            <div class="column lab-name">
              <span id="label-for-spaces">Hugging Face Spaces</span> <em>(<a href="https://huggingface.co/docs/hub/spaces" target="_blank">What is Spaces?</a>)</em>
            </div>
          </div>
          <div class="columns is-mobile lab-row">
            <div class="column lab-switch">
              <label class="switch">
                <input
                  id="txyz-toggle"
                  data-script-url="/static/browse/0.3.4/js/txyz.js"
                  type="checkbox" class="lab-toggle" aria-labelledby="label-for-txyz">
                <span class="slider"></span>
                <span class="is-sr-only">Spaces Toggle</span>
              </label>
            </div>
            <div class="column lab-name">
              <span id="label-for-txyz">TXYZ.AI</span> <em>(<a href="https://txyz.ai" target="_blank">What is TXYZ.AI?</a>)</em>
            </div>
          </div>
        </div>
        <div id="replicate-output"></div>
        <div id="spaces-output"></div>
        <div id="txyz-output"></div>
      </div>
      <input type="radio" name="tabs" id="tabfour">
      <label for="tabfour">Related Papers</label>
      <div class="tab">
        <h1>Recommenders and Search Tools</h1>
        <div class="toggle">
          <div class="columns is-mobile lab-row">
            <div class="column lab-switch">
              <label class="switch">
                <input id="influenceflower-toggle"
                data-script-url="/static/browse/0.3.4/js/influenceflower.js"
                type="checkbox" class="lab-toggle" aria-labelledby="label-for-influenceflower">
                <span class="slider"></span>
                <span class="is-sr-only">Link to Influence Flower</span>
              </label>
            </div>
            <div class="column lab-name">
              <span id="label-for-influenceflower">Influence Flower</span> <em>(<a href="https://influencemap.cmlab.dev/" target="_blank">What are Influence Flowers?</a>)</em>
            </div>
          </div>
          <div class="columns is-mobile lab-row">
            <div class="column lab-switch">
              <label class="switch">
                <input id="connectedpapers-toggle" type="checkbox" class="lab-toggle"
                       data-script-url="/static/browse/0.3.4/js/connectedpapers.js"
                       aria-labelledby="label-for-connected-papers" >
                <span class="slider"></span>
                <span class="is-sr-only">Connected Papers Toggle</span>
              </label>
            </div>
            <div class="column lab-name">
              <span id="label-for-connected-papers">Connected Papers</span> <em>(<a href="https://www.connectedpapers.com/about" target="_blank">What is Connected Papers?</a>)</em>
            </div>
          </div>
          <div class="columns is-mobile lab-row">
            <div class="column lab-switch">
              <label class="switch">
                <input id="core-recommender-toggle" type="checkbox" class="lab-toggle" aria-labelledby="label-for-core">
                <span class="slider"></span>
                <span class="is-sr-only">Core recommender toggle</span>
              </label>
            </div>
            <div class="column lab-name">
              <span id="label-for-core">CORE Recommender</span> <em>(<a href="https://core.ac.uk/services/recommender">What is CORE?</a>)</em>
            </div>
          </div></div>
        <div id="influenceflower-output"></div>
        <div id="influenceflower-output-graph" style="display:none">
          <ul class="flower-tabs">
            <li class="active"><a class="btn tab-btn" onclick="openTab(event, 'tab-author')">Author</a></li>
            <li><a class="btn tab-btn" onclick="openTab(event, 'tab-venue')">Venue</a></li>
            <li><a class="btn tab-btn" onclick="openTab(event, 'tab-inst')">Institution</a></li>
            <li><a class="btn tab-btn" onclick="openTab(event, 'tab-topic')">Topic</a></li>
          </ul>
          <div class="flower-tab-content">
            <div class="tab-flower active" id="tab-author"><svg id="flower-graph-author"></svg></div>
            <div class="tab-flower" id="tab-venue"><svg id="flower-graph-venue"></svg></div>
            <div class="tab-flower" id="tab-inst"><svg id="flower-graph-inst"></svg></div>
            <div class="tab-flower" id="tab-topic"><svg id="flower-graph-topic"></svg></div>
          </div>
        </div>
        <div style="min-height: 15px" id="connectedpapers-output"></div>
        <div id="coreRecommenderOutput"></div>
        <div id="iarxivOutput"></div>
      </div>

      <input type="radio" name="tabs" id="tabfive">
      <label for="tabfive">
        About arXivLabs
      </label>
      <div class="tab">
        <div class="columns">
          <div class="column">
            <h1>arXivLabs: experimental projects with community collaborators</h1>
            <p>arXivLabs is a framework that allows collaborators to develop and share new arXiv features directly on our website.</p>
            <p>Both individuals and organizations that work with arXivLabs have embraced and accepted our values of openness, community, excellence, and user data privacy. arXiv is committed to these values and only works with partners that adhere to them.</p>
            <p>Have an idea for a project that will add value for arXiv's community? <a href="https://info.arxiv.org/labs/index.html"><strong>Learn more about arXivLabs</strong></a>.</p>
          </div>
          <div class="column is-narrow is-full-mobile">
            <p class="icon-labs"><svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 635.572 811"><path d="M175.6 676v27h-27v-27zm-54 27v27h27v-27zm-27 27v27h27v-27zm396-54v27h-27v-27zm0 27v27h27v-27zm27 27v27h27v-27zm-27-414h27v27h-27zm27 0h27v-27h-27zm27-27h27v-27h-27zm-396 45h-27v-27h27zm-27-54h-27v27h27zm-27-27h-27v27h27z"/><path d="M94.6 730v27h-27v-27zm477 0v27h-27v-27zm-27-495h27v27h-27zm-450 18h-27v-27h27zm477 9h27v27h-27zm-54 495h27v27h-27zm-423 0h27v27h-27zm-54-504h27v27h-27z" fill="#666"/><path d="M67.6 730v27h-27v-27zm54 54v27h-27v-27zm0-108v27h27v-27zm-27 27v27h27v-27zm-81 0v27h27v-27zm585 27v27h-27v-27zm-108-54v27h27v-27zm27 27v27h27v-27zm81 0v27h27v-27zm-54-495h27v27h-27zm-54 108h27v-27h-27zm27-27h27v-27h-27zm0-81h27v-27h-27zm-423 18h-27v-27h27zm54 54h-27v27h27zm-27-27h-27v27h27zm0-81h-27v27h27zm423 612v27h-27v-27zm81-522v27h-27v-27zm-585-9v27h-27v-27z" fill="#999"/><path d="M94.6 784v27h-27v-27zm-27-27v27h27v-27zm-27-54v27h27v-27zm27 0v27h27v-27zm0-27v27h27v-27zm27 0v27h27v-27zm0-27v27h27v-27zm27 0v27h27v-27zm-108 81v27h27v-27zm558 54v27h-27v-27zm-27-27v27h27v-27zm27-54v27h27v-27zm-27 0v27h27v-27zm0-27v27h27v-27zm-27 0v27h27v-27zm0-27v27h27v-27zm-27 0v27h27v-27zm108 81v27h27v-27zm0-495h27v27h-27zm-27 27h27v-27h-27zm-54-27h27v-27h-27zm0 27h27v-27h-27zm-27 0h27v-27h-27zm0 27h27v-27h-27zm-27 0h27v-27h-27zm0 27h27v-27h-27zm81-108h27v-27h-27zm-504 45h-27v-27h27zm27-27h-27v27h27zm54-27h-27v27h27zm0 27h-27v27h27zm27 0h-27v27h27zm0 27h-27v27h27zm27 0h-27v27h27zm0 27h-27v27h27zm-81-108h-27v27h27z" fill="#ccc"/><path d="M598.6 665.1H41.5C-76.5 667 176 280.2 176 280.2h53a46.5 46.5 0 0162.8-56.3 29.2 29.2 0 1128.5 35.9h-1a46.5 46.5 0 01-1.5 20.3l142.5-.1s255.3 387 138.3 385.1zM291 181a29.3 29.3 0 10-29.2-29.3A29.3 29.3 0 00291 181zm65.4-66.8a22.4 22.4 0 10-22.5-22.4 22.4 22.4 0 0022.5 22.4z" fill="#fc0"/><path d="M245.5 172V10h153v162s324 495 198 495h-558c-126 0 207-495 207-495zm126 54h56m-13 72h56m-9 72h56m-20 72h56m-22 72h56m-29 72h56m-457-45c20.8 41.7 87.3 81 160.7 81 72.1 0 142.1-38.2 163.4-81" fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="20"/><path d="M273.3 421.7c0 31-9.8 56.3-21.9 56.3s-21.8-25.2-21.8-56.3 9.8-56.3 21.8-56.3 21.9 25.2 21.9 56.3zm114.4-56.3c-12 0-21.8 25.2-21.8 56.3s9.7 56.3 21.8 56.3 21.9-25.2 21.9-56.3-9.8-56.3-21.9-56.3zM150.1 526.6c-18.2 6.7-27.5 22.9-23.2 30.2s14.8-5.5 33-12.2 37.4-4.9 33-12.2-24.5-12.6-42.8-5.8zm296 5.8c-4.2 7.3 14.9 5.5 33.1 12.2s28.7 19.5 33 12.2-5-23.5-23.2-30.2-38.5-1.5-42.8 5.8z"/></svg></p>
          </div>
        </div>
      </div>

    </div>
</div>
<!-- END LABS AREA -->
  <div class="endorsers">
    <a href="/auth/show-endorsers/2401.05566" class="endorser-who">Which authors of this paper are endorsers?</a> |
    <a id="mathjax_toggle" href="javascript:setMathjaxCookie()">Disable MathJax</a> (<a href="https://info.arxiv.org/help/mathjax.html">What is MathJax?</a>)
    <span class="help" style="font-style: normal; float: right; margin-top: 0; margin-right: 1em;"></span>
  </div>
  <script type="text/javascript" language="javascript">mathjaxToggle();</script>
</div>
      </div>
    </main>

    <footer style="clear: both;">
      <div class="columns is-desktop" role="navigation" aria-label="Secondary" style="margin: -0.75em -0.75em 0.75em -0.75em">
        <!-- Macro-Column 1 -->
        <div class="column" style="padding: 0;">
          <div class="columns">
            <div class="column">
              <ul style="list-style: none; line-height: 2;">
                <li><a href="https://info.arxiv.org/about">About</a></li>
                <li><a href="https://info.arxiv.org/help">Help</a></li>
              </ul>
            </div>
            <div class="column">
              <ul style="list-style: none; line-height: 2;">
                <li>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon filter-black" role="presentation"><title>contact arXiv</title><desc>Click here to contact arXiv</desc><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg>
                  <a href="https://info.arxiv.org/help/contact.html"> Contact</a>
                </li>
                <li>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon filter-black" role="presentation"><title>subscribe to arXiv mailings</title><desc>Click here to subscribe</desc><path d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"/></svg>
                  <a href="https://info.arxiv.org/help/subscribe"> Subscribe</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <!-- End Macro-Column 1 -->
        <!-- Macro-Column 2 -->
        <div class="column" style="padding: 0;">
          <div class="columns">
            <div class="column">
              <ul style="list-style: none; line-height: 2;">
                <li><a href="https://info.arxiv.org/help/license/index.html">Copyright</a></li>
                <li><a href="https://info.arxiv.org/help/policies/privacy_policy.html">Privacy Policy</a></li>
              </ul>
            </div>
            <div class="column sorry-app-links">
              <ul style="list-style: none; line-height: 2;">
                <li><a href="https://info.arxiv.org/help/web_accessibility.html">Web Accessibility Assistance</a></li>
                <li>
                  <p class="help">
                    <a class="a11y-main-link" href="https://status.arxiv.org" target="_blank">arXiv Operational Status <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512" class="icon filter-dark_grey" role="presentation"><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg></a><br>
                    Get status notifications via
                    <a class="is-link" href="https://subscribe.sorryapp.com/24846f03/email/new" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon filter-black" role="presentation"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg>email</a>
                    or <a class="is-link" href="https://subscribe.sorryapp.com/24846f03/slack/new" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon filter-black" role="presentation"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>slack</a>
                  </p>
                </li>
              </ul>
            </div>
          </div>
        </div> <!-- end MetaColumn 2 -->
        <!-- End Macro-Column 2 -->
      </div>
    </footer>
  </div>

  <script src="/static/base/1.0.1/js/member_acknowledgement.js"></script>

</body>

</html>):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}return t.version=S.version="v3.0.8",t}(),w=function(e){e=e||{};var t={},i=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(i,n){return"function"==typeof n&&(t[i]=t[i]||[]).push(n),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(i,n){if("*"!=i||n)if(n)for(var a,r=t[i],o=0;a=r&&r[o];++o)a==n&&r.splice(o--,1);else delete t[i];else t={};return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,i){return e.on(t,function n(){e.off(t,n),i.apply(e,arguments)})},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(n){var a,r,o,s=arguments,l=arguments.length-1,u=new Array(l);for(o=0;o<l;o++)u[o]=s[o+1];for(a=i.call(t[n]||[],0),o=0;r=a[o];++o)r.apply(e,u);return t["*"]&&"*"!=n&&e.trigger.apply(e,["*",n].concat(u)),e},enumerable:!1,writable:!1,configurable:!1}}),e};function x(e,t){return Object.getOwnPropertyDescriptor(e,t)}function C(e){return void 0===e}function _(e,t){var i=x(e,t);return C(e[t])||i&&i.writable}function P(e){for(var t,i=1,n=arguments,a=n.length;i<a;i++)if(t=n[i])for(var r in t)_(e,r)&&(e[r]=t[r]);return e}function I(e){return Object.create(e)}var N=P(I(S.settings),{skipAnonymousTags:!0,keepValueAttributes:!1,autoUpdate:!0});function L(e,t){return[].slice.call((t||document).querySelectorAll(e))}function M(){return document.createTextNode("")}function R(e,t){e.style.display=t?"":"none",e.hidden=!t}function D(e,t){return e.getAttribute(t)}function O(e,t){e.removeAttribute(t)}function B(e,t,i){if(i){var n=e.ownerDocument.importNode((new DOMParser).parseFromString('<svg xmlns="'+s+'">'+t+"</svg>","application/xml").documentElement,!0);e.appendChild(n)}else e.innerHTML=t}function U(e,t){if(e)for(var i;i=d.exec(e);)t(i[1].toLowerCase(),i[2]||i[3]||i[4])}function F(){return document.createDocumentFragment()}function V(e,t,i){e.insertBefore(t,i.parentNode&&i)}function H(e){return Object.keys(e).reduce(function(t,i){return t+" "+i+": "+e[i]+";"},"")}function W(e,t,i){if(e){var n,a=t(e,i);if(!1===a)return;for(e=e.firstChild;e;)n=e.nextSibling,W(e,t,a),e=n}}var j=Object.freeze({$$:L,$:t,createDOMPlaceholder:M,mkEl:v,setAttr:g,toggleVisibility:R,getAttr:D,remAttr:O,setInnerHTML:B,walkAttrs:U,createFrag:F,safeInsert:V,styleObjectToString:H,walkNodes:W});function $(e){return C(e)||null===e}function K(e){return $(e)||""===e}function G(e){return"function"==typeof e}function q(e){return e&&"object"==typeof e}function z(e){var t=e.ownerSVGElement;return!!t||null===t}function Y(e){return Array.isArray(e)||e instanceof Array}function Q(e){return f.test(e)}function X(e){return"string"==typeof e}var Z=Object.freeze({isBlank:K,isFunction:G,isObject:q,isSvg:z,isWritable:_,isArray:Y,isBoolAttr:Q,isNil:$,isString:X,isUndefined:C});function J(e,t){return-1!==e.indexOf(t)}function ee(e,t){for(var i=e?e.length:0,n=0;n<i;n++)t(e[n],n);return e}function te(e,t){return e.slice(0,t.length)===t}var ie=function(){var e=-1;return function(){return++e}}();function ne(e,t,i,n){return Object.defineProperty(e,t,P({value:i,enumerable:!1,writable:!1,configurable:!0},n)),e}function ae(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function re(e){console&&console.warn&&console.warn(e)}var oe=Object.freeze({contains:J,each:ee,getPropDescriptor:x,startsWith:te,uid:ie,defineProperty:ne,objectCreate:I,extend:P,toCamel:ae,warn:re});function se(e,t,i,n,a){var r=e[t],o=Y(r),s=!C(a);if(!r||r!==i)if(!r&&n)e[t]=[i];else if(r)if(o){var l=r.indexOf(i);if(l===a)return;-1!==l&&r.splice(l,1),s?r.splice(a,0,i):r.push(i)}else e[t]=[r,i];else e[t]=i}function le(e){return e.tagName&&r[D(e,"data-is")||D(e,"data-is")||e.tagName.toLowerCase()]}function ue(e,t){var i=le(e),n=!t&&D(e,"data-is");return n&&!T.hasExpr(n)?n:i?i.name:e.tagName.toLowerCase()}function ce(){return this.parent?P(I(this),this.parent):this}var de=/<yield\b/i,he=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,fe=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,pe=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,ve={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},ge=p&&p<10?/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;function me(e,i,n){var a=e&&e.match(/^\s*<([-\w]+)/),r=a&&a[1].toLowerCase(),o=v(n?"svg":"div");return e=function(e,t){if(!de.test(e))return e;var i={};return t=t&&t.replace(fe,function(e,t,n){return i[t]=i[t]||n,""}).trim(),e.replace(pe,function(e,t,n){return i[t]||n||""}).replace(he,function(e,i){return t||i||""})}(e,i),ge.test(r)?o=function(e,i,n){var a="o"===n[0],r=a?"select>":"table>";if(e.innerHTML="<"+r+i.trim()+"</"+r,r=e.firstChild,a)r.selectedIndex=-1;else{var o=ve[n];o&&1===r.childElementCount&&(r=t(o,r))}return r}(o,e,r):B(o,e,n),o}var ye=/^on/;function Ae(e){for(var t=e;t.__.isAnonymous&&t.parent;)t=t.parent;return t}function ke(e,t,i,n){var a,r=function(e,t,i){var n=this.__.parent,a=this.__.item;if(!a)for(;n&&!a;)a=n.__.item,n=n.__.parent;if(_(i,"currentTarget")&&(i.currentTarget=e),_(i,"target")&&(i.target=i.srcElement),_(i,"which")&&(i.which=i.charCode||i.keyCode),i.item=a,t.call(this,i),N.autoUpdate&&!i.preventUpdate){var r=Ae(this);r.isMounted&&r.update()}}.bind(n,i,t);i[e]=null,a=e.replace(c,""),J(n.__.listeners,i)||n.__.listeners.push(i),i["__riot-events__"]||(i["__riot-events__"]={}),i["__riot-events__"][e]&&i.removeEventListener(a,i["__riot-events__"][e]),i["__riot-events__"][e]=r,i.addEventListener(a,r,!1)}function be(e,t,i,n){var a=Je(e,t,i),r=t.tagName||ue(t.root,!0),o=Ae(n);return ne(a,"parent",o),a.__.parent=n,se(o.tags,r,a),o!==n&&se(n.tags,r,a),a}function Ee(e,t,i,n){if(Y(e[t])){var a=e[t].indexOf(i);-1!==a&&e[t].splice(a,1),e[t].length?1!==e[t].length||n||(e[t]=e[t][0]):delete e[t]}else e[t]===i&&delete e[t]}function Se(e,t){var i,n,a=M(),r=M(),o=F();for(this.root.insertBefore(a,this.root.firstChild),this.root.appendChild(r),this.__.head=n=a,this.__.tail=r;n;)i=n.nextSibling,o.appendChild(n),this.__.virts.push(n),n=i;t?e.insertBefore(o,t.__.head):e.appendChild(o)}function Te(e,t){if(t.parentNode){var i=F();Se.call(e,i),t.parentNode.replaceChild(i,t)}}function we(e){if(!this.root||!D(this.root,"virtualized")){var t,i=e.dom,n=function(e){return e?(e=e.replace("riot-",""),h[e]&&(e=h[e]),e):null}(e.attr),a=J(["show","hide"],n),o=e.root&&"VIRTUAL"===e.root.tagName,s=this.__.isAnonymous,l=i&&(e.parent||i.parentNode),u=N.keepValueAttributes,c="style"===n,d="class"===n,f="value"===n;if(e._riot_id)e.__.wasCreated?e.update():(e.mount(),o&&Te(e,e.root));else{if(e.update)return e.update();var v=a&&!s?ce.call(this):this,m=!K(t=T(e.expr,v)),y=q(t);if(y&&(d?t=T(JSON.stringify(t),this):c&&(t=H(t))),!e.attr||e.wasParsedOnce&&!1!==t&&(m||f&&(!f||u))||O(i,D(i,e.attr)?e.attr:n),e.bool&&(t=!!t&&n),e.isRtag)return function(e,t,i){var n,a=e.tag||e.dom._tag,o=(a?a.__:{}).head,s="VIRTUAL"===e.dom.tagName;a&&e.tagName===i?a.update():(a&&(s&&(n=M(),o.parentNode.insertBefore(n,o)),a.unmount(!0)),X(i)&&(e.impl=r[i],e.impl&&(e.tag=a=be(e.impl,{root:e.dom,parent:t,tagName:i},e.dom.innerHTML,t),ee(e.attrs,function(e){return g(a.root,e.name,e.value)}),e.tagName=i,a.mount(),s&&Te(a,n||a.root),t.__.onUnmount=function(){var e=a.opts.dataIs;Ee(a.parent.tags,e,a),Ee(a.__.parent.tags,e,a),a.unmount()})))}(e,this,t);if((!e.wasParsedOnce||e.value!==t)&&(e.value=t,e.wasParsedOnce=!0,!y||d||c||a)){if(m||(t=""),!n)return t+="",void(l&&(e.parent=l,"TEXTAREA"===l.tagName?(l.value=t,p||(i.nodeValue=t)):i.nodeValue=t));switch(!0){case G(t):A=n,ye.test(A)&&ke(n,t,i,this);break;case a:R(i,"hide"===n?!t:t);break;default:e.bool&&(i[n]=t),f&&i.value!==t?i.value=t:m&&!1!==t&&g(i,n,t),c&&i.hidden&&R(i,!1)}var A}}}}function xe(e){ee(e,we.bind(this))}function Ce(e,t,i,n,a){if(!e||!i){var r=e?ce.call(this):t||this;ee(a,function(e){e.expr&&we.call(r,e.expr),n[ae(e.name).replace("riot-","")]=e.expr?e.expr.value:e.value})}}function _e(e){if(!e){var t=Object.keys(r);return t+_e(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){return e+',[data-is="'+t.trim().toLowerCase()+'"]'},"")}function Pe(e,t){var i=this.name,n=this.tmpl,a=this.css,o=this.attrs,s=this.onCreate;return r[i]||(Ie(i,n,a,o,s),r[i].class=this.constructor),et(e,i,t,this),a&&b.inject(),this}function Ie(e,t,i,n,a){return G(n)&&(a=n,/^[\w-]+\s?=/.test(i)?(n=i,i=""):n=""),i&&(G(i)?a=i:b.add(i,e)),e=e.toLowerCase(),r[e]={name:e,tmpl:t,attrs:n,fn:a},e}function Ne(e,t,i,n,a){return i&&b.add(i,e),r[e]={name:e,tmpl:t,attrs:n,fn:a},e}function Le(e,t,i){var n,a,r=[];if(b.inject(),(q(t)||G(t))&&(i=t,t=0),n=X(e)?(e="*"===e?a=_e():e+_e(e.split(/, */)))?L(e):[]:e,"*"===t){if(t=a||_e(),n.tagName)n=L(t,n);else{var o=[];ee(n,function(e){return o.push(L(t,e))}),n=o}t=0}return function e(n){if(n.tagName){var a,o=D(n,"data-is");t&&o!==t&&(o=t,g(n,"data-is",t)),(a=et(n,o||n.tagName.toLowerCase(),G(i)?i():i))&&r.push(a)}else n.length&&ee(n,e)}(n),r}var Me={},Re=Me.__global_mixin={},De=0;function Oe(e,t,i){if(q(e))Oe("__"+De+++"__",e,!0);else{var n=i?Re:Me;if(!t){if(C(n[e]))throw new Error("Unregistered mixin: "+e);return n[e]}n[e]=G(t)?P(t.prototype,n[e]||{})&&t:P(n[e]||{},t)}}function Be(){return ee(a,function(e){return e.update()})}function Ue(e){return b.remove(e),delete r[e]}var Fe=Object.freeze({Tag:Pe,tag:Ie,tag2:Ne,mount:Le,mixin:Oe,update:Be,unregister:Ue,version:"v3.13.2"});function Ve(e,t){var i,n=this.parent;n&&(Y(i=n.tags[e])?i.splice(t,0,i.splice(i.indexOf(this),1)[0]):se(n.tags,e,this))}function He(e,t){for(var i,n=this.__.head,a=F();n;)if(i=n.nextSibling,a.appendChild(n),(n=i)===this.__.tail){a.appendChild(n),e.insertBefore(a,t.__.head);break}}function We(e,t,i){var n={};return n[e.key]=t,e.pos&&(n[e.pos]=i),n}function je(e,t){e.splice(t,1),this.unmount(),Ee(this.parent,this,this.__.tagName,!0)}function $e(e,t,i){var n="string"!=typeof D(e,"no-reorder")||O(e,"no-reorder"),a=D(e,"key"),o=!!a&&T.hasExpr(a),s=ue(e),l=r[s],u=e.parentNode,c=M(),d=le(e),h=D(e,"if"),f=[],p=e.innerHTML,v=!r[s],g="VIRTUAL"===e.tagName,m=[];return O(e,"each"),O(e,"key"),(i=T.loopKeys(i)).isLoop=!0,h&&O(e,"if"),u.insertBefore(c,e),u.removeChild(e),i.update=function(){i.value=T(i.val,t);var r=i.value,u=F(),y=!Y(r)&&!X(r),A=c.parentNode,k=[],b=y&&!!r;if(A){y&&(r=r?Object.keys(r).map(function(e){return We(i,r[e],e)}):[]);var E=0;ee(r,function(c,S){var w=S-E,x=!b&&i.key?We(i,c,S):c;if(!h||T(h,P(I(t),x))){var C=function(e,t,i,n){return e?o?T(e,x):t[e]:t}(a,c),_=!y&&n&&"object"==typeof c||a,N=m.indexOf(C),L=-1===N,M=!L&&_?N:w,R=f[M],D=w>=m.length,O=_&&L||!_&&!R||!f[w];O?((R=Je(l,{parent:t,isLoop:!0,isAnonymous:v,tagName:s,root:e.cloneNode(v),item:x,index:w},p)).mount(),D?function(e,t){t?Se.call(this,e):e.appendChild(this.root)}.apply(R,[u||A,g]):function(e,t,i){i?Se.apply(this,[e,t]):V(e,this.root,t.root)}.apply(R,[A,f[w],g]),D||m.splice(w,0,x),f.splice(w,0,R),d&&se(t.tags,s,R,!0)):M!==w&&_&&((a||J(r,m[M]))&&(function(e,t,i){i?He.apply(this,[e,t]):V(e,this.root,t.root)}.apply(R,[A,f[w],g]),f.splice(w,0,f.splice(M,1)[0]),m.splice(w,0,m.splice(M,1)[0])),i.pos&&(R[i.pos]=w),!d&&R.tags&&function(e){var t=this;ee(Object.keys(this.tags),function(i){Ve.apply(t.tags[i],[i,e])})}.call(R,w)),P(R.__,{item:x,index:w,parent:t}),k[w]=C,O||R.update(x)}else E++}),function(e,t,i){for(var n=t.length,a=e.length-i;n>a;)n--,je.apply(t[n],[t,n])}(r,f,E),m=k.slice(),A.insertBefore(u,c)}},i.unmount=function(){ee(f,function(e){e.unmount()})},i}var Ke={init:function(e,t,i,n){return this.dom=e,this.attr=i,this.rawValue=n,this.parent=t,this.hasExp=T.hasExpr(n),this},update:function(){var e=this.value,t=this.parent&&Ae(this.parent),i=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?T(this.rawValue,this.parent):this.rawValue,!K(e)&&t&&Ee(t.refs,e,i),!K(this.value)&&X(this.value)?(t&&se(t.refs,this.value,i,null,this.parent.__.index),this.value!==e&&g(this.dom,this.attr,this.value)):O(this.dom,this.attr),this.dom.__ref||(this.dom.__ref=i)},unmount:function(){var e=this.tag||this.dom,t=this.parent&&Ae(this.parent);!K(this.value)&&t&&Ee(t.refs,this.value,e)}};function Ge(e,t,i,n){return I(Ke).init(e,t,i,n)}function qe(e){ee(e,function(e){e.unmount?e.unmount(!0):e.tagName?e.tag.unmount(!0):e.unmount&&e.unmount()})}var ze={init:function(e,t,i){O(e,"if"),P(this,{tag:t,expr:i,stub:M(),pristine:e});var n=e.parentNode;return n.insertBefore(this.stub,e),n.removeChild(e),this},update:function(){this.value=T(this.expr,this.tag),this.stub.parentNode&&(this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=Qe.apply(this.tag,[this.current,!0])):!this.value&&this.current&&(this.unmount(),this.current=null,this.expressions=[]),this.value&&xe.call(this.tag,this.expressions))},unmount:function(){this.current&&(this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current)),qe(this.expressions||[])}};function Ye(e,t,i){return I(ze).init(e,t,i)}function Qe(e,t){var i=this,n=[];return W(e,function(a){var r,o,s=a.nodeType;if((t||a!==e)&&(3===s&&"STYLE"!==a.parentNode.tagName&&T.hasExpr(a.nodeValue)&&n.push({dom:a,expr:a.nodeValue}),1===s)){var l="VIRTUAL"===a.tagName;if(r=D(a,"each"))return l&&g(a,"loopVirtual",!0),n.push($e(a,i,r)),!1;if(r=D(a,"if"))return n.push(Ye(a,i,r)),!1;if((r=D(a,"data-is"))&&T.hasExpr(r))return n.push({isRtag:!0,expr:r,dom:a,attrs:[].slice.call(a.attributes)}),!1;if(o=le(a),l&&(D(a,"virtualized")&&a.parentElement.removeChild(a),o||D(a,"virtualized")||D(a,"loopVirtual")||(o={tmpl:a.outerHTML})),o&&(a!==e||t)){var u=D(a,"data-is");if(!l||u)return u&&l&&re('Virtual tags shouldn\'t be used together with the "data-is" attribute - https://github.com/riot/riot/issues/2511'),n.push(be(o,{root:a,parent:i},a.innerHTML,i)),!1;g(a,"virtualized",!0);var c=Je({tmpl:a.outerHTML},{root:a,parent:i},a.innerHTML);n.push(c)}Xe.apply(i,[a,a.attributes,function(e,t){t&&n.push(t)}])}}),n}function Xe(e,t,i){var n=this;ee(t,function(t){if(!t)return!1;var a,r=t.name,s=Q(r);J(o,r)&&"yield"!==e.tagName.toLowerCase()?a=Ge(e,n,r,t.value):T.hasExpr(t.value)&&(a={dom:e,expr:t.value,attr:r,bool:s}),i(t,a)})}function Ze(e){var t=this.__,i=t.isAnonymous,n=t.skipAnonymous;ne(this,"isMounted",e),i&&n||(e?this.trigger("mount"):(this.trigger("unmount"),this.off("*"),this.__.wasCreated=!1))}function Je(e,t,i){void 0===e&&(e={}),void 0===t&&(t={});var n,r=t.context||{},o=t.opts||{},s=t.parent,l=t.isLoop,u=!!t.isAnonymous,c=N.skipAnonymousTags&&u,d=t.item,h=t.index,f=e.tmpl,p=[],v=t.root,m=t.tagName||ue(v),y="virtual"===m,A=!y&&!f;return A||l&&u?n=v:(y||(v.innerHTML=""),n=me(f,i,z(v))),c||w(r),e.name&&v._tag&&v._tag.unmount(!0),ne(r,"__",{impl:e,root:v,skipAnonymous:c,implAttrs:[],isAnonymous:u,instAttrs:[],innerHTML:i,tagName:m,index:h,isLoop:l,isInline:A,item:d,parent:s,listeners:[],virts:[],wasCreated:!1,tail:null,head:null}),[["isMounted",!1],["_riot_id",ie()],["root",v],["opts",o,{writable:!0,enumerable:!0}],["parent",s||null],["tags",{}],["refs",{}],["update",function(e){return function(e,t,i){var n=e.__,a={},r=e.isMounted&&!n.skipAnonymous;return n.isAnonymous&&n.parent&&P(e,n.parent),P(e,t),Ce.apply(e,[n.isLoop,n.parent,n.isAnonymous,a,n.instAttrs]),r&&e.isMounted&&G(e.shouldUpdate)&&!e.shouldUpdate(t,a)||(P(e.opts,a),r&&e.trigger("update",t),xe.call(e,i),r&&e.trigger("updated")),e}(r,e,p)}],["mixin",function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];return ee(t,function(t){var i,n,a=[],r=["init","__proto__"];t=X(t)?Oe(t):t,i=G(t)?new t:t;var o=Object.getPrototypeOf(i);do{a=a.concat(Object.getOwnPropertyNames(n||i))}while(n=Object.getPrototypeOf(n||i));ee(a,function(t){if(!J(r,t)){var n=x(i,t)||x(o,t),a=n&&(n.get||n.set);!e.hasOwnProperty(t)&&a?Object.defineProperty(e,t,n):e[t]=G(i[t])?i[t].bind(e):i[t]}}),i.init&&i.init.bind(e)(e.opts)}),e}.apply(void 0,[r].concat(e))}],["mount",function(){return function(e,t,i,n){var a=e.__,r=a.root;r._tag=e,Xe.apply(a.parent,[r,r.attributes,function(t,i){!a.isAnonymous&&Ke.isPrototypeOf(i)&&(i.tag=e),t.expr=i,a.instAttrs.push(t)}]),U(a.impl.attrs,function(e,t){a.implAttrs.push({name:e,value:t})}),Xe.apply(e,[r,a.implAttrs,function(e,t){t?i.push(t):g(r,e.name,e.value)}]),Ce.apply(e,[a.isLoop,a.parent,a.isAnonymous,n,a.instAttrs]);var o=Oe("__global_mixin");if(o&&!a.skipAnonymous)for(var s in o)o.hasOwnProperty(s)&&e.mixin(o[s]);if(a.impl.fn&&a.impl.fn.call(e,n),a.skipAnonymous||e.trigger("before-mount"),ee(Qe.apply(e,[t,a.isAnonymous]),function(e){return i.push(e)}),e.update(a.item),!a.isAnonymous&&!a.isInline)for(;t.firstChild;)r.appendChild(t.firstChild);if(ne(e,"root",r),!a.skipAnonymous&&e.parent){var l=Ae(e.parent);l.one(l.isMounted?"updated":"mount",function(){Ze.call(e,!0)})}else Ze.call(e,!0);return e.__.wasCreated=!0,e}(r,n,p,o)}],["unmount",function(e){return function(e,t,i){var n=e.__,r=n.root,o=a.indexOf(e),s=r.parentNode;if(n.skipAnonymous||e.trigger("before-unmount"),U(n.impl.attrs,function(e){te(e,"riot-")&&(e=e.slice("riot-".length)),O(r,e)}),e.__.listeners.forEach(function(e){Object.keys(e["__riot-events__"]).forEach(function(t){e.removeEventListener(t,e["__riot-events__"][t])})}),-1!==o&&a.splice(o,1),n.parent&&!n.isAnonymous){var l=Ae(n.parent);n.isVirtual?Object.keys(e.tags).forEach(function(t){return Ee(l.tags,t,e.tags[t])}):Ee(l.tags,n.tagName,e)}return e.__.virts&&ee(e.__.virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),qe(i),ee(n.instAttrs,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()}),t?B(r,""):s&&s.removeChild(r),n.onUnmount&&n.onUnmount(),e.isMounted||Ze.call(e,!0),Ze.call(e,!1),delete r._tag,e}(r,e,p)}]].reduce(function(e,t){var i=t[0],n=t[1],a=t[2];return ne(r,i,n,a),e},P(r,d))}function et(e,t,i,n){var o,s=r[t],l=r[t].class,u=n||(l?I(l.prototype):{}),c=e._innerHTML=e._innerHTML||e.innerHTML,d=P({root:e,opts:i,context:u},{parent:i?i.parent:null});return s&&e&&(o=Je(s,d,c)),o&&o.mount&&(o.mount(!0),J(a,o)||a.push(o)),o}var tt=N,it={tmpl:T,brackets:S,styleManager:b,vdom:a,styleNode:b.styleNode,dom:j,check:Z,misc:oe,tags:Object.freeze({arrayishAdd:se,getTagName:ue,inheritParentProps:ce,mountTo:et,selectTags:_e,arrayishRemove:Ee,getTag:le,initChildTag:be,moveChildTag:Ve,makeReplaceVirtual:Te,getImmediateCustomParentTag:Ae,makeVirtual:Se,moveVirtual:He,unmountAll:qe,createIfDirective:Ye,createRefDirective:Ge})},nt=Pe,at=Ie,rt=Ne,ot=Le,st=Oe,lt=Be,ut=Ue,ct=w,dt=P({},Fe,{observable:w,settings:tt,util:it});e.settings=tt,e.util=it,e.Tag=nt,e.tag=at,e.tag2=rt,e.mount=ot,e.mixin=st,e.update=lt,e.unregister=ut,e.version="v3.13.2",e.observable=ct,e.default=dt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,i){var n,a;n=[t,i(1)],void 0===(a=function(e,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=(i=t)&&i.__esModule?i:{default:i},window.location.hash;var n=!!CBSNEWS.features.getFeatureValue("debug")||/development/.test(window.location.hash),a=new class{constructor(){this._broker={},t.default.observable(this._broker)}on(e,t){this._broker.on(e,t)}off(e,t){this._broker.off(e,t)}one(e,t){this._broker.one(e,t)}trigger(){var e=[].slice.call(arguments);n&&window.console&&console.log('triggered: "'+e[0]+'" with payload:\n',e[1]),setTimeout(()=>{try{this._broker.trigger.apply(this._broker,e)}catch(t){window.console&&console.error(e,t)}},0)}};e.default=a}.apply(t,n))||(e.exports=a)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){(function(t){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,i(37))},function(e,t,i){var n=i(3);e.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,i){var n=i(22),a=i(39);e.exports=function(e){if("Function"===n(e))return a(e)}},function(e,t,i){var n=i(4),a=i(48),r=i(8),o=i(50),s=i(45),l=i(44),u=a("wks"),c=n.Symbol,d=c&&c.for,h=l?c:c&&c.withoutSetter||o;e.exports=function(e){if(!r(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&r(c,e)?u[e]=c[e]:u[e]=l&&d?d(t):h(t)}return u[e]}},function(e,t,i){var n=i(6),a=i(49),r=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(a(e),t)}},function(e,t,i){var n=i(5),a=i(51),r=i(53),o=i(11),s=i(24),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor;t.f=n?r?function(e,t,i){if(o(e),t=s(t),o(i),"function"==typeof e&&"prototype"===t&&"value"in i&&"writable"in i&&!i.writable){var n=c(e,t);n&&n.writable&&(e[t]=i.value,i={configurable:"configurable"in i?i.configurable:n.configurable,enumerable:"enumerable"in i?i.enumerable:n.enumerable,writable:!1})}return u(e,t,i)}:u:function(e,t,i){if(o(e),t=s(t),o(i),a)try{return u(e,t,i)}catch(e){}if("get"in i||"set"in i)throw l("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var n=i(0),a=i(41),r=a.all;e.exports=a.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===r}:function(e){return"object"==typeof e?null!==e:n(e)}},function(e,t,i){var n=i(10),a=String,r=TypeError;e.exports=function(e){if(n(e))return e;throw r(a(e)+" is not an object")}},function(e,t,i){var n=i(21),a=Function.prototype.call;e.exports=n?a.bind(a):function(){return a.apply(a,arguments)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var n=i(80),a=i(40);e.exports=function(e){return n(a(e))}},function(e,t){e.exports=!1},function(e,t,i){var n=i(0),a=i(9),r=i(85),o=i(27);e.exports=function(e,t,i,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:t;if(n(i)&&r(i,u,s),s.global)l?e[t]=i:o(t,i);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=i:a.f(e,t,{value:i,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},function(e,t,i){var n=i(4),a=i(0);e.exports=function(e,t){return arguments.length<2?function(e){return a(e)?e:void 0}(n[e]):n[e]&&n[e][t]}},function(e,t,i){var n,a=i(11),r=i(95),o=i(32),s=i(31),l=i(97),u=i(52),c=i(30)("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},f=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},p=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;p="undefined"!=typeof document?document.domain&&n?f(n):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):f(n);for(var i=o.length;i--;)delete p.prototype[o[i]];return p()};s[c]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(d.prototype=a(e),i=new d,d.prototype=null,i[c]=e):i=p(),void 0===t?i:r.f(i,t)}},function(e,t){e.exports={}},function(e,t,i){var n=i(4),a=i(38).f,r=i(28),o=i(16),s=i(27),l=i(88),u=i(94);e.exports=function(e,t){var i,c,d,h,f,p=e.target,v=e.global,g=e.stat;if(i=v?n:g?n[p]||s(p,{}):(n[p]||{}).prototype)for(c in t){if(h=t[c],d=e.dontCallGetSet?(f=a(i,c))&&f.value:i[c],!u(v?c:p+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&r(h,"sham",!0),o(i,c,h,e)}}},function(e,t,i){var n=i(3);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},function(e,t,i){var n=i(39),a=n({}.toString),r=n("".slice);e.exports=function(e){return r(a(e),8,-1)}},function(e,t){e.exports=function(e){return null==e}},function(e,t,i){var n=i(81),a=i(42);e.exports=function(e){var t=n(e,"string");return a(t)?t:t+""}},function(e,t,i){var n=i(0),a=i(47),r=TypeError;e.exports=function(e){if(n(e))return e;throw r(a(e)+" is not a function")}},function(e,t,i){var n=i(4),a=i(27),r=n["__core-js_shared__"]||a("__core-js_shared__",{});e.exports=r},function(e,t,i){var n=i(4),a=Object.defineProperty;e.exports=function(e,t){try{a(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},function(e,t,i){var n=i(5),a=i(9),r=i(13);e.exports=n?function(e,t,i){return a.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n,a,r,o=i(87),s=i(4),l=i(10),u=i(28),c=i(8),d=i(26),h=i(30),f=i(31),p=s.TypeError,v=s.WeakMap;if(o||d.state){var g=d.state||(d.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,n=function(e,t){if(g.has(e))throw p("Object already initialized");return t.facade=e,g.set(e,t),t},a=function(e){return g.get(e)||{}},r=function(e){return g.has(e)}}else{var m=h("state");f[m]=!0,n=function(e,t){if(c(e,m))throw p("Object already initialized");return t.facade=e,u(e,m,t),t},a=function(e){return c(e,m)?e[m]:{}},r=function(e){return c(e,m)}}e.exports={set:n,get:a,has:r,enforce:function(e){return r(e)?a(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!l(t)||(i=a(t)).type!==e)throw p("Incompatible receiver, "+e+" required");return i}}}},function(e,t,i){var n=i(48),a=i(50),r=n("keys");e.exports=function(e){return r[e]||(r[e]=a(e))}},function(e,t){e.exports={}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,i){var n=i(9).f,a=i(8),r=i(7)("toStringTag");e.exports=function(e,t,i){e&&!i&&(e=e.prototype),e&&!a(e,r)&&n(e,r,{configurable:!0,value:t})}},function(e,t,i){var n=i(109),a=i(0),r=i(22),o=i(7)("toStringTag"),s=Object,l="Arguments"==r(function(){return arguments}());e.exports=n?r:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=s(e),o))?i:l?r(t):"Object"==(n=r(t))&&a(t.callee)?"Arguments":n}},function(e,t,i){var n,a;n=[t,i(2)],void 0===(a=function(e,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.BaseFeedAdapter=void 0,t=(i=t)&&i.__esModule?i:{default:i};class n{constructor(e){if(this.constructor===n)throw new TypeError('Abstract class "BaseFeedAdapter" cannot be instantiated directly.');this.event=e.event,this.lastUpdated=null,this.pendingFeeds={},this.isLocked=!0}getNewFeed(e){e?e in this.pendingFeeds?t.default.trigger("feed:debounce",{feedUrl:e}):(this.pendingFeeds[e]=1,this.isLocked||this.fetch(e)):t.default.trigger("feed:error",{feedUrl:e,error:"attempted to call a blank feed"})}fetch(e){fetch(e,{credentials:"same-origin"}).then(i=>{if(i.ok)return i;t.default.trigger("feed:error",{feedUrl:e,error:"response is not ok",response:i})}).then(e=>this.unifyFormat(e)).then(e=>this.dispatchFeed(e)).then(t=>delete this.pendingFeeds[e]).catch(e=>window.console&&console.error("err: ",e))}unifyFormat(e){return e.json()}dispatchFeed(e){return t.default.trigger(this.event,{feed:e}),e}registerCallbacks(){t.default.on("player:player:initialUrlLoad",e=>{for(var t in this.isLocked=!1,this.pendingFeeds)this.fetch(t)})}}e.BaseFeedAdapter=n}.apply(t,n))||(e.exports=a)},function(e,t,i){var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCookie=function(e){var t,i,n,a=document.cookie.split(";");for(t=0;t<a.length;t++)if(i=(i=a[t].substr(0,a[t].indexOf("="))).replace(/^\s+|\s+$/g,""),n=a[t].substr(a[t].indexOf("=")+1),i==e)return unescape(n);return null}}.apply(t,[t]))||(e.exports=n)},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){var n=i(5),a=i(12),r=i(79),o=i(13),s=i(14),l=i(24),u=i(8),c=i(51),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=s(e),t=l(t),c)try{return d(e,t)}catch(e){}if(u(e,t))return o(!a(r.f,e,t),e[t])}},function(e,t,i){var n=i(21),a=Function.prototype,r=a.call,o=n&&a.bind.bind(r,r);e.exports=function(e){return n?o(e):function(){return r.apply(e,arguments)}}},function(e,t,i){var n=i(23),a=TypeError;e.exports=function(e){if(n(e))throw a("Can't call method on "+e);return e}},function(e,t){var i="object"==typeof document&&document.all,n=void 0===i&&void 0!==i;e.exports={all:i,IS_HTMLDDA:n}},function(e,t,i){var n=i(17),a=i(0),r=i(43),o=i(44),s=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return a(t)&&r(t.prototype,s(e))}},function(e,t,i){var n=i(6);e.exports=n({}.isPrototypeOf)},function(e,t,i){var n=i(45);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,i){var n=i(82),a=i(3);e.exports=!!Object.getOwnPropertySymbols&&!a(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(e,t,i){var n=i(25),a=i(23);e.exports=function(e,t){var i=e[t];return a(i)?void 0:n(i)}},function(e,t){var i=String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},function(e,t,i){var n=i(15),a=i(26);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,t,i){var n=i(40),a=Object;e.exports=function(e){return a(n(e))}},function(e,t,i){var n=i(6),a=0,r=Math.random(),o=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++a+r,36)}},function(e,t,i){var n=i(5),a=i(3),r=i(52);e.exports=!n&&!a(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var n=i(4),a=i(10),r=n.document,o=a(r)&&a(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,i){var n=i(5),a=i(3);e.exports=n&&a(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},function(e,t,i){var n=i(5),a=i(8),r=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,s=a(r,"name"),l=s&&"something"===function(){}.name,u=s&&(!n||n&&o(r,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},function(e,t,i){var n=i(6),a=i(8),r=i(14),o=i(56).indexOf,s=i(31),l=n([].push);e.exports=function(e,t){var i,n=r(e),u=0,c=[];for(i in n)!a(s,i)&&a(n,i)&&l(c,i);for(;t.length>u;)a(n,i=t[u++])&&(~o(c,i)||l(c,i));return c}},function(e,t,i){var n=i(14),a=i(57),r=i(59),o=function(e){return function(t,i,o){var s,l=n(t),u=r(l),c=a(o,u);if(e&&i!=i){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,t,i){var n=i(58),a=Math.max,r=Math.min;e.exports=function(e,t){var i=n(e);return i<0?a(i+t,0):r(i,t)}},function(e,t,i){var n=i(91);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},function(e,t,i){var n=i(92);e.exports=function(e){return n(e.length)}},function(e,t,i){var n=i(7),a=i(18),r=i(9).f,o=n("unscopables"),s=Array.prototype;null==s[o]&&r(s,o,{configurable:!0,value:a(null)}),e.exports=function(e){s[o][e]=!0}},function(e,t,i){"use strict";var n=i(62).IteratorPrototype,a=i(18),r=i(13),o=i(33),s=i(19),l=function(){return this};e.exports=function(e,t,i,u){var c=t+" Iterator";return e.prototype=a(n,{next:r(+!u,i)}),o(e,c,!1,!0),s[c]=l,e}},function(e,t,i){"use strict";var n,a,r,o=i(3),s=i(0),l=i(10),u=i(18),c=i(63),d=i(16),h=i(7),f=i(15),p=h("iterator"),v=!1;[].keys&&("next"in(r=[].keys())?(a=c(c(r)))!==Object.prototype&&(n=a):v=!0),!l(n)||o(function(){var e={};return n[p].call(e)!==e})?n={}:f&&(n=u(n)),s(n[p])||d(n,p,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:v}},function(e,t,i){var n=i(8),a=i(0),r=i(49),o=i(30),s=i(101),l=o("IE_PROTO"),u=Object,c=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=r(e);if(n(t,l))return t[l];var i=t.constructor;return a(i)&&t instanceof i?i.prototype:t instanceof u?c:null}},function(e,t,i){var n=i(34),a=i(46),r=i(23),o=i(19),s=i(7)("iterator");e.exports=function(e){if(!r(e))return a(e,s)||a(e,"@@iterator")||o[n(e)]}},function(e,t,i){"use strict";var n=i(20),a=i(56).includes,r=i(3),o=i(60);n({target:"Array",proto:!0,forced:r(function(){return!Array(1).includes()})},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,t,i){i(98)},function(e,t,i){var n,a;n=[t,i(2),i(35)],void 0===(a=function(e,t,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.VideoFeedAdapter=void 0,t=(n=t)&&n.__esModule?n:{default:n};e.VideoFeedAdapter=class extends i.BaseFeedAdapter{constructor(){super({event:"feed:ingested:playlist"}),this.registerCallbacks()}dispatchFeed(e){return t.default.trigger(this.event,{feed:e,path:this.path}),e}registerCallbacks(){super.registerCallbacks();var e=!(-1==document.cookie.indexOf("fly_user")),i=CBSNEWS.edition.key;CBSNEWS.user.isUserSubscribed&&(e="2"),t.default.on("feed:request:playlist",t=>{t.slug&&t.slug.indexOf("fusion")>-1||!t.type||!t.api||this.getNewFeed(t.api+"?is_logged_in="+ +e+"&edition="+i)}),t.default.on("feed:request:video",t=>{if("vod"===t.type&&(t.id||t.slug)){var n="0";t.imposter&&(n="1");var a="";t.strategy&&(a="&strategy="+t.strategy);var r="";t.startPosition&&(r="&startPosition="+t.startPosition);var o=t.type;this.getNewFeed("/video/xhr/video/"+o+"/"+(t.id||t.slug)+"/?is_logged_in="+ +e+"&is_imposter="+n+a+r+"&edition="+i)}}),t.default.on("feed:request:path",t=>{if(t.path){var i="0";t.imposter&&(i="1");var n="";t.strategy&&(n="&strategy="+t.strategy);var a="";t.startPosition&&(a="&startPosition="+t.startPosition),t.type,this.path=t.path,this.getNewFeed("/video/xhr/path"+t.path+"?is_logged_in="+ +e+"&is_imposter="+i+n+a)}})}getNewFeed(e){"amp"===CBSNEWS.device&&(e=e.replace("/video/xhr","/amp/video/xhr")),super.getNewFeed(e)}}}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[t,i(2),i(69)],void 0===(a=function(e,t,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.VideoStore=void 0,t=(n=t)&&n.__esModule?n:{default:n};var a={},r={},o=1e3,s={};function l(e){var i="video:data:changed",n={_playlist_id:e.__id,playlist:e};t.default.trigger(i,n),e.id&&t.default.trigger("".concat(i,":").concat(e.id),n),e.slug&&t.default.trigger("".concat(i,":").concat(e.slug),n)}function u(e,t){return e.type+"/"+e[t]}function c(e){var t,n=u(e,"id"),h=u(e,"slug");n in r?t=r[n]:h in r?t=r[h]:(t=++o,a[t]={__id:t,__lastUpdated:null,id:null,items:[],itemIndexById:{},meta:{dateUpdated:null,hash:null}});var f=[],p=e.meta.strategy;switch(p.method){case"replace":f=function(e,t,i){var n=a[e].items;return Array.prototype.splice.apply(n,[i.startPosition,i.deleteCount||n.length].concat(t.items)),n}(t,e,p);break;case"inject":f=function(e,t,i){var n=a[e].items;return Array.prototype.splice.apply(n,[i.startPosition,0].concat(t.items)),n}(t,e,p);break;case"append":default:f=function(e,t,i){var n=a[e].items;for(var r of t.items)r.id&&r.id in a[e].itemIndexById||n.push(r);return n}(t,e)}for(var v in e)e[v]&&(a[t][v]=e[v]);a[t].id&&(r[u(a[t],"id")]=t),a[t].slug&&(r[u(a[t],"slug")]=t);for(var g=0,m={},y=0;y<f.length;y++){var A=f[y];"live"!==A.type||s[A.mpxRefId]||(s[A.mpxRefId]=new i.FusionFeedAdapter(A)),"vod"!==A.type&&"dvr"!==A.type&&"live"!==A.type||(A.playlist=a[t]),"playlist"!==A.type&&"listing"!==A.type&&"channel"!==A.type||(c(A),f[y]=d(A.id,A.slug,A.type)||A),A.id&&(m[A.id]=y),A.imposter?g--:g++}a[t].emptyPlaylist=!1,g<1&&(a[t].emptyPlaylist=!0),a[t].items=f,a[t].itemIndexById=m,a[t].__lastUpdated=Date.now(),(g>1||"component"===e.type)&&l(a[t])}function d(e,t,i){var n;if(e?n=r[i+"/"+e]:t&&i&&(n=r[i+"/"+t]),n&&a[n])return a[n]}e.VideoStore=class{constructor(){this.registerCallbacks()}getVideoInPlaylist(e,t){var i=this.getPlaylistByIdOrSlug(t);for(var n in i.items){var a=i.items[n];if(a.id==e)return a}return null}registerCallbacks(){t.default.on("feed:ingested:playlist",e=>c(e.feed)),t.default.on("feed:ingested:video",e=>(function(e){if(e.playlist){var t=d(e.playlist.id,e.playlist.slug,e.playlist.type)||e.playlist;t.items.shift(e),c(t)}})(e.feed)),t.default.on("register:component",e=>{var i=d(e.id,e.slug,e.type);i&&l(i),i&&i.meta.itemCount===i.meta.totalCount||t.default.trigger("feed:request:playlist",e)})}}}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[t,i(2),i(35),i(36)],void 0===(a=function(e,t,i,n){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.FusionFeedAdapter=void 0,t=(a=t)&&a.__esModule?a:{default:a};e.FusionFeedAdapter=class extends i.BaseFeedAdapter{constructor(e){super({event:"feed:ingested:playlist"}),e.fusionRundown&&(this.liveItem={canonicalTitle:e.canonicalTitle,fulltitle:e.fulltitle,title:e.title,url:e.url,originEdition:e.originEdition},this.fusionRundown=e.fusionRundown,this.playlist={items:[]},this.liveSource=e.video,this.liveSourceNoAds=e.video2,this.liveSlug=e.slug.replace(/^live-/,""),this.daiAssetId=e.daiAssetId,this.fw=e.ad.fw,this.topic=e.topic,this.tracking=e.tracking,this.isLocked=!1,this.isFreewheelEnabled=CBSNEWS.features.isFeatureEnabled("freewheel"),this.registerCallbacks())}unifyFormat(e){return super.unifyFormat(e).then(e=>this.convertFeed(e))}convertFeed(e){for(var t=Object.values(e.navigation.rundown.counts).reduce((e,t)=>e+t),i={id:"fusion-"+this.liveSlug,slug:this.liveSlug,type:"channel",title:this.liveItem.fulltitle,items:[],url:this.liveItem.url,meta:{fusionRundown:this.fusionRundown,dateUpdated:e.navigation.dateUpdated.date,limit:null,itemCount:t,totalCount:t,loadMore:!1,custom:null,image:null,strategy:{method:"replace",startPosition:0,deleteCount:this.playlist.items.length}}},n=0;n<t;n++){var a=e.navigation.data[n];if(a){if("dvr"==a.type||"live"==a.type){var r;if(r=this.isFreewheelEnabled?{fw:"live"===a.type?{dai_with_fw:this.fw.dai_with_fw,params:this.fw.params}:{fw_link:this.fw.dvr_fw_link}}:{},"CBSN-NY"==a.edition)var o="New York";else"CBSN-PHI"==a.edition?o="Philly":"CBSN-LA"==a.edition?o="Los Angeles":"CBSN-DAL"==a.edition?o="DFW":"CBSN-SAC"==a.edition?o="Sacramento":"CBSN-MIA"==a.edition?o="Miami":"CBSN-MIN"==a.edition?o="Minnesota":"CBSN-SF"==a.edition?o="Bay Area":"CBSN-CHI"==a.edition?o="Chicago":"CBSN-BAL"==a.edition?o="Baltimore":"CBSN-PIT"==a.edition?o="Pittsburgh":"CBSN-DEN"==a.edition?o="Colorado":"CBSN-BOS"==a.edition?o="Boston":"CBSN-DET"==a.edition&&(o="Detroit");if("mixible"==a.channelSlug||"live-cbs-sports-hq"==a.channelSlug)var s=this.liveItem.canonicalTitle;else s=o?"CBS News "+o+": Local News, Weather & More":"CBS News latest headlines";i.items.push({id:a.id,mpxRefId:a.mpxRefId,originEdition:this.liveItem.originEdition,slug:a.dvr_slug,title:"live"===a.type?s:a.headlineshort,fulltitle:a.headline,canonicalTitle:"live"===a.type?this.liveItem.canonicalTitle+" Live Video":a.headlineshort,label:a.slug_label,type:a.type,duration:"live"===a.type?-1:a.duration,timestamp:a.startDate,durationLabel:a.segmentDur,url:window.location.origin+a.path,images:{sd:a.images.thumbnail_url_hd,hd:a.images.thumbnail_url_hd},video:"live"===a.type?this.liveSource:a.videoUrl.base,video2:"live"===a.type?this.liveSourceNoAds:a.videoUrl.base,daiAssetId:"live"===a.type?this.daiAssetId:null,playlist:i,previewUrl:"live"===a.type?this.liveSourceNoAds:null,topic:this.topic,suppress:"adsEnabled"in a?!a.adsEnabled:null,allAccessBlock:!1,isUserSubscribed:null,sponsor:a.sponsor,fusionRundown:this.fusionRundown,tracking:this.tracking,ad:r,geo:{countries:[],blacklist:!1}})}"live"==a.type&&(i.mpxRefId=a.mpxRefId,i.video=this.liveSource,i.video2=this.liveSourceNoAds,i.hasVideo=!0)}}return i}dispatchFeed(e){var i=this.playlist.items.find(e=>"live"===e.type),n=e.items.find(e=>"live"===e.type);return i&&n&&i.id===n.id&&this.playlist.items.length===e.items.length||(super.dispatchFeed(e),n&&(t.default.trigger("video:video:changed",{video:n}),t.default.trigger("video:video:changed:type-live",{video:n}),t.default.trigger("video:video:changed:type-live:"+n.playlist.id,{video:n}))),e}registerCallbacks(){super.registerCallbacks(),t.default.on("video:data:changed:fusion-"+this.liveSlug,e=>this.playlist=e.playlist),this.getNewFeed(this.fusionRundown),setInterval(this.getNewFeed.bind(this,this.fusionRundown),6e4)}}}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[t,i(2),i(1),i(71),i(72),i(73),i(74),i(76),i(77)],void 0===(a=function(e,t,i,n,a,r,o,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.beforeInitialTagMount=function(){var e={initialUrlLoad:!0},i=CBSNEWS.defaultPayload,n=!(!i.meta||!i.meta.view);function a(){document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--overlay-closed");var e=new CustomEvent("video-embed-event",{detail:{type:"CLOSE",videoShelfType:n&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(e)}catch(e){}}t.default.on("player:player:ready",i=>{if(t.default.trigger("player:player:initialUrlLoad",{initialUrlLoad:e.initialUrlLoad,shouldAutoplay:CBSNEWS.shouldAutoplay}),e.initialUrlLoad){e.initialUrlLoad=!1;var n=CBSNEWS.defaultPayload.items[0],a={video:n,type:n.playlist.type,playlist:n.playlist,initialUrlLoad:!0};t.default.trigger("url:load",a)}}),t.default.on("player:video:state",e=>{if("PLAYING"===e.playbackState){document.body.classList.add("vp--overlay-hidden"),document.body.classList.add("vp--is-playing"),document.body.classList.remove("vp--is-not-playing"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-paused"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing");var t=new CustomEvent("video-embed-event",{detail:{type:"PLAYING",videoShelfType:n&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(t)}catch(e){}}else document.body.classList.remove("vp--is-playing"),document.body.classList.add("vp--is-not-playing");if("LOADING"===e.playbackState){document.body.classList.add("vp--overlay-hidden"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-paused"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing");var i=new CustomEvent("video-embed-event",{detail:{type:"OPEN",videoShelfType:n&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(i)}catch(e){}}"PAUSED"===e.playbackState&&(document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--is-paused"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-playing"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-paused")),"STOPPED"===e.playbackState&&(document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--is-not-playing"),document.body.classList.remove("vp--is-playing"),a())}),t.default.on("player:video:block",e=>{(e.allAccessBlock||e.embedBlock||e.geoBlock)&&document.body.classList.add("vp--overlay-hidden")}),t.default.on("player:player:closed",a),t.default.on("url:click",()=>{document.body.classList.add("vp--overlay-hidden"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-paused")}),t.default.on("url:change",e=>t.default.trigger("url:load",e)),window.location.pathname,t.default.on("url:load",e=>{var t=e.video.slug;document.body.setAttribute("data-slug",t)}),CBSNEWS.defaultPayload&&t.default.trigger("feed:ingested:playlist",{feed:CBSNEWS.defaultPayload,isDefaultPayload:!0}),CBSNEWS.defaultLayout&&t.default.trigger("feed:ingested:layout",{feed:CBSNEWS.defaultLayout})},t=u(t),i=u(i),window.riot=i.default,window.istablet=window.matchMedia("(min-width: 36em)").matches&&window.istouch;try{document.createEvent("TouchEvent"),window.istouch=!0,document.body.classList.add("touch")}catch(e){window.istouch=!1,document.body.classList.add("no-touch")}CBSNEWS.dispatch=t.default}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(2)],void 0===(a=function(e){"use strict";var t;function i(e){this._player=e}e=(t=e)&&t.__esModule?t:{default:t},i._viewStartTime=Date.now(),i._contentTypes={AD:"ad",CONTENT:"ct"},i._adPositions={PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"},i._videoStates={UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"},i.prototype.isReady=function(){return!!this._getVideoData("cmsRefGuid")},i.prototype.getTitle=function(){return this._getVideoData("videoTitle")},i.prototype.getVideoPath=function(){return this._getVideoData("cmsRefGuid")},i.prototype.getContentType=function(){return this._getPlaybackState("isAd")?i._contentTypes.AD:i._contentTypes.CONTENT},i.prototype.getAdPosition=function(){return i._adPositions.PREROLL},i.prototype.getTotalDuration=function(){var e=this._getPlaybackState("duration");return-1==e&&(e=300),1e3*e},i.prototype.getState=function(){var e=this._getPlaybackState("playbackState");return 0===e?i._videoStates.STOPPED:1===e?i._videoStates.PLAYED:2===e?i._videoStates.COMPLETED:void 0},i.prototype.getCurrentPlayTime=function(){return 1e3*this._getPlaybackState("currentTime")},i.prototype.getBitrate=function(){var e=this._getPlaybackState("facadeState");return this._getPlaybackState("isAd")?0:e.currentBitrate/1e3},i.prototype.getThumbnailPath=function(){return this._getVideoData("audioPreviewImageUrl")},i.prototype.getPlayerType=function(){return"UVPJS"},i.prototype.getViewStartTime=function(){return Date.now()-i._viewStartTime},i.prototype.getViewPlayTime=function(){return 1e3*this._getPlaybackState("absoluteStreamTime")},i.prototype.getViewAdPlayTime=function(){},i.verify=function(e){return"function"==typeof e.loadAndPlayResource},i.prototype._getPlaybackState=function(e){return this._player.getCurrentPlaybackState()[e]},i.prototype._getVideoData=function(e){return this._player.getContentVideoData()[e]},i.setPlayer=function(e){window._cbv.push(e)},window._cbv=window._cbv||[],window._cbv_strategies=window._cbv_strategies||[],window._cbv_strategies.push(i),window.UvpjsChartbeatAnalytics=i,e.default.on("player:player:ready",e=>{i.setPlayer(e.videoPlayer)}),e.default.on("url:load",e=>{i._viewStartTime=Date.now()})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(2)],void 0===(a=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t};var i,n,a=window.Intercom.getInstance();e.default.on("player:ad:start",e=>{n=e.video,a.emit("vpjs-newvideoadstart",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId})}),e.default.on("player:content:start",e=>{n=e.video,a.emit("vpjs-newvideoplayback",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId})}),e.default.on("player:video:state",e=>{"PLAYING"===e.playbackState&&e.playbackState!==i&&a.emit("vpjs-newvideoplayback",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId}),i=e.playbackState}),a.on("vpjs-newvideoplayback",t=>{t.containerId&&t.containerId!==CBSNEWS.uvpContainerId&&e.default.trigger("player:video:pause",{video:n})}),a.on("vpjs-viewabilityclosed",function(t){t.containerId==CBSNEWS.uvpContainerId&&e.default.trigger("player:video:pause",{video:n})}),a.on("utag-loaded",function(t){e.default.trigger("player:tracking:ready")})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(2),i(1)],void 0===(a=function(e,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}e=i(e),(t=i(t)).default.util.tmpl.errorHandler=function(t){e.default.trigger("riot:tag:error",{tagName:t.riotData.tagName,message:t.message})},t.default.mixin({init:function(t){this.dispatch=e.default,this.opts.dataIs?this.opts.dataIs:this.root.nodeName.toLowerCase()}}),t.default.mixin("formatter",{init:function(e){},getRelativeTime:function(e){if(!e)return"";var t=new Date(e),i=new Date,n=Math.floor((i-t)/1e3);return n<=60?"just now":n<=3600?Math.round(n/60)+"m ago":n<=86400?Math.round(n/3600)+"h ago":this.formatDate(e)},formatDate:function(e){var t=(e=new Date(e)).getMonth(),i=e.getDate(),n=e.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][t]+" "+i+", "+n}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(2),i(75)],void 0===(a=function(e,t){"use strict";var i;e=(i=e)&&i.__esModule?i:{default:i};var n=window.location.pathname;e.default.on("url:load",e=>{var t=e.video,i=Object.assign({},CBSNEWS.tracking),a=t.type;window.hashParams&&window.hashParams.tracking||n!==window.location.pathname&&(n=window.location.pathname,window.isembed&&(i.mediaEmbed=!0),"playlist"===t.playlist.type&&(i.collectionId=t.playlist.id,i.collectionName=t.playlist.title),"live"===a||"dvr"===a?(i.articleId="",i.articleTitle="",i.mediaId="",i.mediaTitle="",i.mediaType="",i.pageName="/cbsn",i.pageType="live_streaming_player",i.siteSection=t.topic.slug):(i.articleId=t.id,i.articleTitle=t.fulltitle.toLowerCase(),i.mediaId=t.id,i.mediaTitle=t.fulltitle.toLowerCase(),i.mediaType="content_video",i.pageName=window.location.pathname,i.pageType="video",i.siteSection=t.topic.slug.replace(/-/gi," ")),i.hasVideo=!0,i.pageViewGuid=uuid.v4(),i.pageUrl=window.location.href,i.topicId=t.topic.id,i.topicName=t.topic.hierarchy,i.siteHier=t.topic.hierarchy,i.siteOrigin=t.originEdition,i.videoTitle=t.fulltitle,i.videoUrl=t.url,CBSNEWS.tracking.queue.push({type:"view",data:i,action:e=>{var t=new CustomEvent("tracking:view",{detail:i});window.dispatchEvent(t)}}))})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n;void 0===(n=function(){"use strict";window.uuid||(window.uuid={}),void 0===window.uuid.v4&&(window.uuid.v4=function(){var e,t,i="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(i+="-"),i+=(12==e?4:16==e?3&t|8:t).toString(16);return i})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,a;n=[i(2)],void 0===(a=function(e){"use strict";var t,i;e=(t=e)&&t.__esModule?t:{default:t};var n={};e.default.on("player:resource:start",t=>{i||e.default.trigger("register:component",{api:"/video/xhr/collection/component/live-channels/",slug:"live-channels",type:"component"})}),e.default.on("player:resource:end",t=>{if(!(window.isembed||t.userInitiated||"live"==t.video.type||t.aviaEvent.detail.interrupted)){for(var a,r=t.video,o=r.playlist,s=o.itemIndexById[r.id]+1;s<o.items.length;){var l=o.items[s],u=["vod","live","dvr"];if(CBSNEWS.edition.isDefault||u.push("channel"),u.indexOf(l.type)>-1){a=l;break}s++}var c={userInitiated:!1};a?c.video=a:r.fusionRundown in n?c.video=n[r.fusionRundown]:c.video=i||CBSNEWS.defaultPayload.items[0],e.default.trigger("url:change",c)}}),e.default.on("video:video:changed:type-live",e=>{n[e.video.fusionRundown]=e.video;var t=CBSNEWS.edition.isDefault?"cbsnews":CBSNEWS.edition.market;e.video.playlist.id==="fusion-"+t&&(i=e.video)})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(2)],void 0===(a=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t};var i,n={adHref:null,adSlug:null,pathClicked:null,slugClicked:null};function a(t){e.default.trigger("url:before-click",t);var a=t.target;if("A"!=!t.target.nodeName&&(a=t.target.closest("a")||t.target.firstChild),a&&"A"==a.nodeName&&(!window.isembed||a.hasAttribute("data-stay-inside-embed"))&&/(cbsnews\.com)/i.test(a.host)&&(a.payload||a.hasAttribute("data-payload")||a.matches('a[href*="/live/"], a[href*="/video/"]')&&!a.matches('a[href^="#"]'))){e.default.trigger("url:click",t);var r=a.payload;if(!r&&a.hasAttribute("data-payload")&&(r=JSON.parse(a.getAttribute("data-payload"))),r)if("custom"==r.type);else if("playlist"==r.type||"listing"==r.type||"channel"==r.type){t.preventDefault();var o=r.items[0];r.id.indexOf("fusion")>-1&&(o=r.items[r.items.length-1]),e.default.trigger("feed:ingested:playlist",{feed:r}),e.default.trigger("url:change",{type:r.type,playlist:r,video:o,userInitiated:!0})}else t.preventDefault(),e.default.trigger("url:change",{type:r.type,playlist:r.playlist,video:r,userInitiated:!0});else{t.preventDefault();var s=a.pathname;"/pcs/click"==s&&(s="/video/"+a.href.split(".com/video/")[1]),n.pathClicked=s,e.default.trigger("feed:request:path",{path:s,targetPathname:a.pathname}),i=setTimeout(function(){clearTimeout(i),window.location.href=a.href},1e3)}}}document.body.addEventListener("click",a,!0),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.addEventListener("click",a,!0),e.default.on("feed:ingested:playlist",t=>{if(t.feed&&"top-stories"==t.feed.slug){if(n.pathClicked&&n.pathClicked==t.path){clearTimeout(i);var a=t.feed.items[0];t={type:a.type,playlist:a.playlist,video:a,userInitiated:!0},e.default.trigger("url:change",t),n.slugClicked=null}if(n.adSlug==t.feed.items[0].slug){var r=t.feed.items[0];n.adHref.payload={type:r.type,playlist:r.playlist,video:r,userInitiated:!0,isInjectedAd:!0},n.adSlug=null}}}),window.addEventListener("ads:slotRenderEnded",t=>{var i=t.detail.adUnit.code,a=document.getElementById(i).querySelector("a");if(a){var r=function(e){if(e.indexOf("cbsnews.com")>-1){var t,i=/\/(live)\/([A-Za-z0-9\-]*)?/;return null!=(t=e.match(i))?[t[1],t[2]||""]:(i=/\/video\/([A-Za-z0-9\-]*)/,["vod",(t=e.match(i))[1]])}return!1}(a.href);n.adHref=a,n.adSlug=r[1];var o=3;CBSNEWS.defaultPayload.items[0].isImposter&&o++,e.default.trigger("feed:request:video",{type:r[0],slug:r[1],imposter:!0,strategy:"inject",startPosition:o})}})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(65),i(66),i(116),i(117),i(118),i(119),i(36)],void 0===(a=function(e,t,n,a,r,o,s){"use strict";i(1).tag2("aviajs",'<div id="{containerId}" data-role="aviaPlayerContainer"><avia-ui><div slot="poster"><avia-poster><img show="{playing === false}" riot-src="{posterImage}"></avia-poster></div><div slot="overlay"><h1 class="avia-overlay__title">{videoTitle}</h1></div></avia-ui></div><div if="{geoBlock}" class="player-overlay__container is-visible" ref="geoBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--geo-block"><svg viewbox="0 0 33 34" class="player-overlay__icon player-overlay__icon--eye" aria-hidden="true"><use xlink:href="#icon-eye"></use></svg><p class="player-overlay__message">Sorry, this content is not available in your region.</p><a class="player-overlay__button" href="/video/">More CBS News Videos</a></div></div><div if="{allAccessBlock}" class="player-overlay__container is-visible" ref="allAccessBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--all-access-block"><img class="player-overlay__icon player-overlay__icon--all-access" src="/bundles/cbsnewscore/images/video-player/pp-stacked1x.png" srcset="/bundles/cbsnewscore/images/video-player/pp-stacked1x.png 1x, /bundles/cbsnewscore/images/video-player/pp-stacked2x.png 2x"><p class="player-overlay__message">This video is available on Paramount+</p><a class="player-overlay__button" href="{video.cbsAllAccessRedirect}" target="_top">Watch Now</a><p class="player-overlay__message player-overlay__message--sticky"><a href="{video.cbsAllAccessRedirect}" target="_top">Watch Now</a><a href="https://{CBSNEWS.host.secure}/user/login/?appId=1503&amp;redirectUrl={encodeURIComponent(inIframe() ? document.referrer : window.location)}" target="_blank" class="lazyload" data-component="popups">LOG&nbsp;IN</a></p></div></div><div if="{embedBlock}" class="player-overlay__container is-visible" ref="embedBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--embed-block"><svg viewbox="0 0 33 34" class="player-overlay__icon player-overlay__icon--eye" aria-hidden="true"><use xlink:href="#icon-eye"></use></svg><p class="player-overlay__message">Sorry, you are not authorized to embed this stream.</p><a class="player-overlay__button" href="/video/" target="blank">More CBS News Videos</a></div></div><div class="player-overlay__container player-overlay--draggable"><div class="player-overlay"><svg class="player-overlay--icon-grid"><use xlink:href="#player-icon-drag"></use></svg><span class="player-overlay__title" if="{video}">{video.title}</span><button class="player-overlay__button player-overlay__button--close" data-target="" aria-label="Disable small player"><svg class="player-overlay__button--icon player-overlay__button--icon-close"><use xlink:href="#player-icon-close"></use></svg></button></div></div><div class="player-overlay--draggable-handle"></div>',"",'class="{opts.component}"',function(e){var t,i;window.avia={buildInfo:n.buildInfo,getSystemInfo:n.getSystemInfo,getPlatformInfo:n.getPlatformInfo,Logger:n.Logger,PlayerEvent:n.PlayerEvent},this.partner="cbsnews",this.types={live:n.StreamType.LIVE,dvr:n.StreamType.DVR,vod:n.StreamType.VOD},this.isPlayerReady=!1,this.playQueue=null,this.shouldAutoplay=CBSNEWS.shouldAutoplay&&CBSNEWS.features.isFeatureEnabled("autoplay"),this.video,this.previewUrl,this.posterImage,this.userInitiated,this.videoType,this.videoTitle="",this.playing=!1,this.hasBeenReInitialized=!1,this.geoBlock=null,this.allAccessBlock=null,this.embedBlock=null,this.controlsOverlay,this.geoBlockOverlay,this.allAccessBlockOverlay,this.npa=1,this.geo,this.consentString=null,this.cbsLocalComscoreC3={"newyork.cbslocal.com":"CBSLocalNY","losangeles.cbslocal.com":"CBSLocalLA","boston.cbslocal.com":"CBSLocalBoston","sacramento.cbslocal.com":"CBSLocalSacramentoCA","sanfrancisco.cbslocal.com":"CBSLocalSanFran","denver.cbslocal.com":"CBSLocalDenver","miami.cbslocal.com":"CBSLocalMiami","chicago.cbslocal.com":"CBSLocalChicago","baltimore.cbslocal.com":"CBSLocalBaltimore","detroit.cbslocal.com":"CBSLocalDetroit","minnesota.cbslocal.com":"CBSLocalMinnesota","philadelphia.cbslocal.com":"CBSLocalPhiladelphia","pittsburgh.cbslocal.com":"CBSLocalPittsburgh","dfw.cbslocal.com":"CBSLocalDallas","www.msn.com":"MSN"},this.comscoreC3="CBSNewsBrowser",window.isembed&&CBSNEWS.referrerHostname in this.cbsLocalComscoreC3&&(this.comscoreC3=this.cbsLocalComscoreC3[CBSNEWS.referrerHostname]),"local_app"===CBSNEWS.device&&(this.appName="",/iPhone|iPod/i.test(navigator.userAgent)||/iPad|Macintosh/i.test(navigator.userAgent)?this.appName="CBSNewsiOSApp":/Android/i.test(navigator.userAgent)&&(this.appName="CBSNewsAndroidApp"),this.posterImage=CBSNEWS.defaultPayload.items[0].images.hd),"desktop"!==CBSNEWS.device&&"mobile"!==CBSNEWS.device||!CBSNEWS.defaultPayload.items[0].images.hd||(this.posterImage=CBSNEWS.defaultPayload.items[0].images.hd),this.cbsLocalComscoreC4={losangeles:"CBSLocalLA",newyork:"CBSLocalNY",boston:"CBSLocalBoston",sacramento:"CBSLocalSacramentoCA",sanfrancisco:"CBSLocalSanFran",denver:"CBSLocalDenver",miami:"CBSLocalMiami",chicago:"CBSLocalChicago",baltimore:"CBSLocalBaltimore",detroit:"CBSLocalDetroit",minnesota:"CBSLocalMinnesota",philadelphia:"CBSLocalPhiladelphia",pittsburgh:"CBSLocalPittsburgh",dfw:"CBSLocalDallas"},this.comscoreC4="CBSNews.com",(null===(t=CBSNEWS)||void 0===t||null===(i=t.edition)||void 0===i?void 0:i.market)in this.cbsLocalComscoreC4&&(this.comscoreC4=this.cbsLocalComscoreC4[CBSNEWS.edition.market]),this.on("mount",()=>{this.geo=JSON.parse((0,s.getCookie)("fly_geo")),this.dispatch.on("player:video:error",this.handleVideoError),this.dispatch.on("player:video:pause",this.pause),this.dispatch.on("player:video:recover",this.play),this.dispatch.on("player:livestream:stop",this.exitFullscreen),this.dispatch.on("player:playback:started",e=>{this.hasBeenReInitialized=!1}),this.dispatch.on("url:load",e=>{this.updatePreview(e),this.play(e),this.update({videoTitle:this.shouldAutoplay||!this.shouldAutoplay&&"mobile"===CBSNEWS.device?"":e.video.title})}),this.dispatch.on("url:change",this.resetPreview),this.dispatch.on("player:content:start",this.resetPreview),this.dispatch.on("player:ad:start",this.resetPreview),this.dispatch.on("player:playback:started",this.resetPreview),this.adRefreshNpa(),this.adGDPRforEU(),this.initPlayer()}),this.updatePreview=function(e){this.update({videoType:e.video.type?e.video.type:"vod",previewUrl:"local_app"===CBSNEWS.device||this.shouldAutoplay?"":e.video.previewUrl,posterImage:this.posterImage?this.posterImage:e.video.images.hd})}.bind(this),this.resetPreview=function(){this.update({previewUrl:"",posterImage:"desktop"!==CBSNEWS.device&&"mobile"!==CBSNEWS.device||this.posterImage?this.posterImage:payload.video.images.hd,playing:!0})}.bind(this),this.initPlayer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.videoPlayer)return this.update({videoPlayer:null}),void(0,n.removeVideoPlayer)(this.containerId).then(this.initPlayer);CBSNEWS.features.executeWithConsent(["avia"],"essential",t=>{CBSNEWS.uvpContainerId=this.containerId="vpjs-container-"+Date.now();var i={container:"[data-role=aviaPlayerContainer]",id:this.containerId,autoplay:this.shouldAutoplay?n.Autoplay.ATTEMPT_MUTED:n.Autoplay.NONE,logLevel:CBSNEWS.features.isFeatureEnabled("debug")?n.LogLevel.DEBUG:n.LogLevel.ERROR,enableOm:CBSNEWS.features.isFeatureEnabled("avia-open-measurement"),overrides:{dependencies:{hlsjs:requirejs.s.contexts._.config.baseUrl+"polyfills/hls.min.js"+requirejs.s.contexts._.config.urlArgs(null,"")}},playsInline:!0,plugins:[(0,a.ui)({posterImageUrl:this.posterImage}),(0,r.hlsjs)(),(0,o.gam)({debug:!0})]};if(!e){if(void 0===window.vtg)try{document.referrer&&!document.referrer.includes("cbsnews.com")?CBSNEWS.features.executeWithConsent(["tealium"],"essential",()=>{var e=document.createElement("script");e.src=CBSNEWS.tealiumPath,document.head.appendChild(e)}):window.vtg=window.parent.vtg}catch(e){console.error(e)}if(void 0!==window.vtg&&void 0!==window.vtg.aviatracking)try{i.plugins.push(window.vtg.aviatracking.AviaTracking.plugin({config:window.vtg.config}))}catch(e){console.error(e)}else if(CBSNEWS.tracking.isEnabled){var s=setTimeout(this.initPlayer,1e4,!0);return void this.dispatch.one("player:tracking:ready",()=>{clearTimeout(s),this.initPlayer()})}}this.dispatch.trigger("player:options",i),(0,n.createVideoPlayer)(i).then((e,t)=>{for(var i in this.videoPlayer=e,CBSNEWS.videoPlayer=e,n.PlayerEvent)"CONTENT_PROGRESS"!==i&&this.videoPlayer.on(n.PlayerEvent[i],this.onPlayerState);this.videoPlayer.on(n.PlayerEvent.READY,this.onVideoPlayerReady),this.videoPlayer.on(n.PlayerEvent.AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.videoPlayer.on(n.PlayerEvent.PLAYBACK_STARTED,this.onPlaybackStarted),this.videoPlayer.on(n.PlayerEvent.RESOURCE_START,this.onResourceStart),this.videoPlayer.on(n.PlayerEvent.RESOURCE_END,this.onResourceEnd),this.videoPlayer.on(n.PlayerEvent.LIVE_PRESENTATION_STOPPED,this.onResourceEnd),this.videoPlayer.on(n.PlayerEvent.LIVE_PRESENTATION_STOPPED,this.onLiveStreamStop),this.videoPlayer.on(n.PlayerEvent.AD_START,this.onAdStart),this.videoPlayer.on(n.PlayerEvent.AD_PAUSED,this.onAdPaused),this.videoPlayer.on(n.PlayerEvent.AD_COMPLETE,this.onAdComplete),this.videoPlayer.on(n.PlayerEvent.CONTENT_START,this.onContentStart),this.videoPlayer.on(n.PlayerEvent.CONTENT_PLAYING,this.onContentPlaying),this.videoPlayer.on(n.PlayerEvent.CONTENT_PAUSED,this.onContentPaused),this.videoPlayer.on(n.PlayerEvent.CONTENT_COMPLETE,this.onContentComplete),this.videoPlayer.on(n.PlayerEvent.ERROR,this.onVideoError),e.isReady&&this.onVideoPlayerReady()}).catch(e=>this.onVideoManagerError(e))})}.bind(this),this.onVideoPlayerReady=function(){this.isPlayerReady=!0,this.dispatch.trigger("player:player:ready",{videoPlayer:this.videoPlayer}),this.playQueue&&this.play(this.playQueue)}.bind(this),this.play=function(e){if(!this.isPlayerReady)return this.playQueue=e,void this.dispatch.trigger("player:player:not-ready",[e,this.isPlayerReady,e.initialUrlLoad,this.shouldAutoplay]);this.videoPlayer.resource&&this.video==e.video?this.videoPlayer.play():(this.video=e.video,this.userInitiated=e.userInitiated,this.shouldShowBlocker(this.video)||(this.videoPlayer.attachResource(this.createResource(this.video)),setTimeout(e=>this.userInitiated=!1,100)))}.bind(this),this.pause=function(){this.videoPlayer&&"idle"!==this.videoPlayer.playbackState&&this.videoPlayer.pause()}.bind(this),this.exitFullscreen=function(){this.videoPlayer&&this.videoPlayer.exitFullscreen()}.bind(this),this.createResource=function(e){var t=(0,n.createResourceConfig)();if(!CBSNEWS.edition.isDefault&&"channel"===e.type){var i=e.items.length-1;e=e.items[i]}return this.addVideoToRco(e,t),this.addAdToRco(e,t),this.dispatch.trigger("player:player:rco",t),t}.bind(this),this.addVideoToRco=function(e,t){t.location.mediaUrl=e.video,t.location.textTrackUrl=e.captions,t.overrides.mimeType=e.format,t.metadata={airdate:new Date(e.timestamp).toISOString(),appName:this.appName,duration:parseInt(e.duration),episodeNumber:e.episode,genre:"news",hierarchyByName:e.topic.hierarchyByName.join("/"),isDcrLive:"live"===e.type,isEpisode:null!==e.episode,isLive:"live"===e.type,mediaUrl:e.video,partner:this.partner,propertyKey:e.muxPropertyKey,seasonNumber:e.season,seriesTitle:e.topic.parentTopicName,streamType_analytics:this.types[e.type],videoId:e.mpxRefId,videoTitle:e.canonicalTitle.replace(/"/g,'\\"')},void 0!==CBSNEWS.tracking.secondaryTopicIds&&CBSNEWS.tracking.secondaryTopicIds.length>0&&(t.metadata.secondaryTopicIds=CBSNEWS.tracking.secondaryTopicIds.join("|")),void 0!==CBSNEWS.tracking.admiralNovemberAlphaWL&&CBSNEWS.tracking.admiralNovemberAlphaWL&&(t.metadata.admiralNovemberAlpha=!0),e.tracking&&e.tracking.comscore&&(t.metadata.genre=e.tracking.comscore.ns_st_ge,t.metadata.c2=e.tracking.comscore.c2,t.metadata.c3=this.comscoreC3,t.metadata.c4=this.overrideLocalEditionVideoComscoreC4(e.tracking.comscore.c4),t.metadata.c6=e.tracking.comscore.c6,t.metadata.seriesTitle=e.tracking.comscore.ns_st_pr,t.metadata.stationTitle=e.tracking.comscore.ns_st_st)}.bind(this),this.overrideLocalEditionVideoComscoreC4=function(e){var t,i,n,a;if("video"!==(null===(t=CBSNEWS)||void 0===t||null===(i=t.tracking)||void 0===i?void 0:i.pageType))return e;var r={atlanta:"CBSLocalAtlanta",baltimore:"CBSLocalBaltimore",boston:"CBSLocalBoston",chicago:"CBSLocalChicago",colorado:"CBSLocalDenver",detroit:"CBSLocalDetroit",dfw:"CBSLocalDallas",losangeles:"CBSLocalLA",miami:"CBSLocalMiami",minnesota:"CBSLocalMinnesota",newyork:"CBSLocalNY",philadelphia:"CBSLocalPhiladelphia",pittsburgh:"CBSLocalPittsburgh",sacramento:"CBSLocalSacramentoCA",sanfrancisco:"CBSLocalSanFran",seattle:"CBSLocalSeattle",tampa:"CBSLocalTampa"};return(null===(n=CBSNEWS)||void 0===n||null===(a=n.edition)||void 0===a?void 0:a.market)in r?r[CBSNEWS.edition.market]:e}.bind(this),this.addAdToRco=function(e,t){if(this.shouldShowAd(e))if(this.adRefreshNpa(),t.ad.viewabilityTracking.partner=this.partner,t.ad.viewabilityTracking.pageType=CBSNEWS.tracking.pageType,t.ad.viewabilityTracking.viewGuid=CBSNEWS.tracking.pageViewGuid,"live"!==e.type)t.ad.csai={adCallUrl:this.adPopulateFwPlaceholdersInUrl(e.ad.fw.fw_link,e)};else try{if(!e.daiAssetId)throw new Error("asset Id unavailable, fallback to ssb");t.ad.ssai={assetKey:e.daiAssetId,adParameters:this.adPopulateFwPlaceholdersInParams(e.ad.fw.params,e),enableNonce:!0}}catch(i){t.location.mediaUrl=e.ad.fw.dai_with_fw?this.adPopulateFwPlaceholdersInUrl(e.ad.fw.dai_with_fw,e):e.video}}.bind(this),this.adVideoPid=function(e){return e.sponsor&&e.sponsor.mpx_id?e.sponsor.mpx_id:e.mpxRefId}.bind(this),this.adPopulateFwPlaceholdersInUrl=function(e,t){var i=this.adReplaceFwPlaceholders(t),n=e.replace(/{[^}]+}/gi,i);return void 0!==CBSNEWS.tracking.admiralNovemberAlphaWL&&CBSNEWS.tracking.admiralNovemberAlphaWL&&(n+="&ae=t"),n}.bind(this),this.adPopulateFwPlaceholdersInParams=function(e,t){var i=this.adReplaceFwPlaceholders(t);for(var n in e)e[n]=e[n].replace(/{[^}]+}/gi,i);var a=CBSNEWS.features.getFeatureValue("fms-params")||{};for(var r in a)e[("live"===t.type?"imafw_":"")+r]=a[r];return void 0!==CBSNEWS.tracking.admiralNovemberAlphaWL&&CBSNEWS.tracking.admiralNovemberAlphaWL&&(e.ae="t"),e}.bind(this),this.adReplaceFwPlaceholders=function(e){var t="live"===e.type?"live":"vod",i="app"===CBSNEWS.device?"mobile":CBSNEWS.device,n=CBSNEWS.imafw_csid[i],a="app"===CBSNEWS.device?"default":CBSNEWS.tracking.deviceOs+CBSNEWS.tracking.deviceForm||"default",r=n.partner[t]||[],o=n[a][t]||[],l=new URL(window.location.href).searchParams,u=encodeURIComponent(window.location.href);"desktop"!==i&&"mobile"!==i||!this.inIframe()||""===document.referrer||(u=encodeURIComponent(document.referrer));var c={"{app_id}":u,"{caid}":e.mpxRefId,"{duration}":e.duration,"{device}":i,"{fms_params}":new URLSearchParams(CBSNEWS.features.getFeatureValue("fms-params")).toString(),"{is_lat}":null!==this.npa?this.npa:0,"{player_size}":encodeURIComponent("640x480"),"{ptype}":CBSNEWS.tracking.pageType,"{random_correlator}":"[RANDOM]","{random_scor}":"[RANDOM]","{topic}":encodeURIComponent(CBSNEWS.tracking.allTopics.join(",")),"{imafw_topic}":CBSNEWS.tracking.allTopics.join(","),"{vcid}":"5dc7fb16c77374f0cfb4ddc60835c679","{vguid}":CBSNEWS.tracking.pageViewGuid,"{imafw_csid}":r[CBSNEWS.referrerHostname]||o[CBSNEWS.edition.key],"{gdpr_consent}":this.consentString};if(null!==l.get("usprivacy")&&"null"!==l.get("usprivacy"))c["{privacy}"]=l.get("usprivacy");else{var d=(0,s.getCookie)("usprivacy")||"";d&&(c["{privacy}"]=d)}return e=>c[e]||""}.bind(this),this.adRefreshNpa=function(){CBSNEWS.features.isFeatureEnabled("consent")&&cbsoptanon.cmd.push(e=>cbsoptanon.ads.getNpaFlag(e=>{this.npa=e}))}.bind(this),this.adGDPRforEU=function(){CBSNEWS.features.isFeatureEnabled("consent")&&cbsoptanon.cmd.push(e=>cbsoptanon.tcf.getConsentData((e,t)=>{this.consentString=t?e.tcString:null}))}.bind(this),this.adDistanceCount=3,this.adDistanceMicroseconds=48e4,this.adLastTimestamp=0,this.adRotator=0,this.shouldShowAd=function(e){var t=Date.now();"dvr"===e.type?this.adRotator=this.adRotator%this.adDistanceCount+1:this.adRotator=0;var i=!(CBSNEWS.features.isFeatureDisabled("freewheel")||"dvr"===e.type&&!0===e.suppress||"dvr"===e.type&&(null===e.sponsor||null===e.sponsor.mpx_id)&&1!==this.adRotator&&(0===this.adLastTimestamp||t-this.adLastTimestamp<this.adDistanceMicroseconds)||"vod"===e.type&&!0===e.suppress);return i&&(this.adLastTimestamp=t),this.dispatch.trigger("ad:video:"+i,{adRotator:this.adRotator,time:t-this.adLastTimestamp,type:e.type}),i}.bind(this),this.shouldShowBlocker=function(e){return this.update({geoBlock:this.shouldGeoBlock(e),allAccessBlock:!0===e.allAccessBlock,embedBlock:CBSNEWS.whitelistFailed}),this.dispatch.trigger("player:video:block",{video:e,allAccessBlock:this.allAccessBlock,embedBlock:this.embedBlock,geoBlock:this.geoBlock,geo:this.geo}),this.geoBlock||this.allAccessBlock||this.embedBlock}.bind(this),this.shouldGeoBlock=function(e){var t,i,n,a,r;return this.geo&&(null==e||null===(t=e.geo)||void 0===t||null===(i=t.countries)||void 0===i?void 0:i.length)>0&&(null==e||null===(n=e.geo)||void 0===n||null===(a=n.countries)||void 0===a?void 0:a.includes(this.geo.countryCode))===(null==e||null===(r=e.geo)||void 0===r?void 0:r.blacklist)}.bind(this),this.handleVideoError=function(e){console.error("handleVideoError",e),!1!==e.aviaEvent.detail.error.fatal&&(this.hasBeenReInitialized||(this.update({playQueue:e,hasBeenReInitialized:!0}),this.initPlayer()))}.bind(this),this.onPlayerState=function(e){var t="player:video:state";this.video||(t="player:player:state"),this.dispatch.trigger(t,{video:this.video,aviaEventType:e.type,aviaEvent:e,rawPlaybackState:this.videoPlayer?this.videoPlayer.playbackState:null,playbackState:e.type===n.PlayerEvent.LIVE_PRESENTATION_STOPPED?"STOPPED":this.videoPlayer?Object.keys(n.PlaybackState).find(e=>n.PlaybackState[e]===this.videoPlayer.playbackState):null})}.bind(this),this.onVideoManagerError=function(e){this.dispatch.trigger("player:manager:error",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAutoplayBlocked=function(e){this.dispatch.trigger("player:autoplay:blocked",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onPlaybackStarted=function(e){this.dispatch.trigger("player:playback:started",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdStart=function(e){this.dispatch.trigger("player:ad:start",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdPaused=function(e){this.dispatch.trigger("player:ad:paused",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdComplete=function(e){this.dispatch.trigger("player:ad:end",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onContentStart=function(e){this.dispatch.trigger("player:content:start",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onContentPlaying=function(e){this.dispatch.trigger("player:content:playing",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onContentPaused=function(e){this.dispatch.trigger("player:content:paused",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onContentComplete=function(e){this.dispatch.trigger("player:content:done",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onLiveStreamStop=function(e){this.dispatch.trigger("player:livestream:stop",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onResourceStart=function(e){this.dispatch.trigger("player:resource:start",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onResourceEnd=function(e){this.dispatch.trigger("player:resource:end",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onVideoError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onVideoStartError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaError:e})}.bind(this),this.onVideoPlaybackError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaError:e})}.bind(this),this.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}}.bind(this)})}.apply(t,n))||(e.exports=a)},function(e,t,i){"use strict";var n={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,r=a&&!n.call({1:2},1);t.f=r?function(e){var t=a(this,e);return!!t&&t.enumerable}:n},function(e,t,i){var n=i(6),a=i(3),r=i(22),o=Object,s=n("".split);e.exports=a(function(){return!o("z").propertyIsEnumerable(0)})?function(e){return"String"==r(e)?s(e,""):o(e)}:o},function(e,t,i){var n=i(12),a=i(10),r=i(42),o=i(46),s=i(84),l=i(7),u=TypeError,c=l("toPrimitive");e.exports=function(e,t){if(!a(e)||r(e))return e;var i,l=o(e,c);if(l){if(void 0===t&&(t="default"),i=n(l,e,t),!a(i)||r(i))return i;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},function(e,t,i){var n,a,r=i(4),o=i(83),s=r.process,l=r.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(a=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!a&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(a=+n[1]),e.exports=a},function(e,t,i){var n=i(17);e.exports=n("navigator","userAgent")||""},function(e,t,i){var n=i(12),a=i(0),r=i(10),o=TypeError;e.exports=function(e,t){var i,s;if("string"===t&&a(i=e.toString)&&!r(s=n(i,e)))return s;if(a(i=e.valueOf)&&!r(s=n(i,e)))return s;if("string"!==t&&a(i=e.toString)&&!r(s=n(i,e)))return s;throw o("Can't convert object to primitive value")}},function(e,t,i){var n=i(3),a=i(0),r=i(8),o=i(5),s=i(54).CONFIGURABLE,l=i(86),u=i(29),c=u.enforce,d=u.get,h=Object.defineProperty,f=o&&!n(function(){return 8!==h(function(){},"length",{value:8}).length}),p=String(String).split("String"),v=e.exports=function(e,t,i){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!r(e,"name")||s&&e.name!==t)&&(o?h(e,"name",{value:t,configurable:!0}):e.name=t),f&&i&&r(i,"arity")&&e.length!==i.arity&&h(e,"length",{value:i.arity});try{i&&r(i,"constructor")&&i.constructor?o&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=c(e);return r(n,"source")||(n.source=p.join("string"==typeof t?t:"")),e};Function.prototype.toString=v(function(){return a(this)&&d(this).source||l(this)},"toString")},function(e,t,i){var n=i(6),a=i(0),r=i(26),o=n(Function.toString);a(r.inspectSource)||(r.inspectSource=function(e){return o(e)}),e.exports=r.inspectSource},function(e,t,i){var n=i(4),a=i(0),r=n.WeakMap;e.exports=a(r)&&/native code/.test(String(r))},function(e,t,i){var n=i(8),a=i(89),r=i(38),o=i(9);e.exports=function(e,t,i){for(var s=a(t),l=o.f,u=r.f,c=0;c<s.length;c++){var d=s[c];n(e,d)||i&&n(i,d)||l(e,d,u(t,d))}}},function(e,t,i){var n=i(17),a=i(6),r=i(90),o=i(93),s=i(11),l=a([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=r.f(s(e)),i=o.f;return i?l(t,i(e)):t}},function(e,t,i){var n=i(55),a=i(32).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,a)}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?n:i)(t)}},function(e,t,i){var n=i(58),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(3),a=i(0),r=/#|\.prototype\./,o=function(e,t){var i=l[s(e)];return i==c||i!=u&&(a(t)?n(t):!!t)},s=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},l=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},function(e,t,i){var n=i(5),a=i(53),r=i(9),o=i(11),s=i(14),l=i(96);t.f=n&&!a?Object.defineProperties:function(e,t){o(e);for(var i,n=s(t),a=l(t),u=a.length,c=0;u>c;)r.f(e,i=a[c++],n[i]);return e}},function(e,t,i){var n=i(55),a=i(32);e.exports=Object.keys||function(e){return n(e,a)}},function(e,t,i){var n=i(17);e.exports=n("document","documentElement")},function(e,t,i){"use strict";i(99);var n=i(20),a=i(4),r=i(12),o=i(6),s=i(5),l=i(105),u=i(16),c=i(106),d=i(33),h=i(61),f=i(29),p=i(107),v=i(0),g=i(8),m=i(108),y=i(34),A=i(11),k=i(10),b=i(110),E=i(18),S=i(13),T=i(111),w=i(64),x=i(112),C=i(7),_=i(113),P=C("iterator"),I=f.set,N=f.getterFor("URLSearchParams"),L=f.getterFor("URLSearchParamsIterator"),M=Object.getOwnPropertyDescriptor,R=function(e){if(!s)return a[e];var t=M(a,e);return t&&t.value},D=R("fetch"),O=R("Request"),B=R("Headers"),U=O&&O.prototype,F=B&&B.prototype,V=a.RegExp,H=a.TypeError,W=a.decodeURIComponent,j=a.encodeURIComponent,$=o("".charAt),K=o([].join),G=o([].push),q=o("".replace),z=o([].shift),Y=o([].splice),Q=o("".split),X=o("".slice),Z=/\+/g,J=Array(4),ee=function(e){return J[e-1]||(J[e-1]=V("((?:%[\\da-f]{2}){"+e+"})","gi"))},te=function(e){try{return W(e)}catch(t){return e}},ie=function(e){var t=q(e,Z," "),i=4;try{return W(t)}catch(e){for(;i;)t=q(t,ee(i--),te);return t}},ne=/[!'()~]|%20/g,ae={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(e){return ae[e]},oe=function(e){return q(j(e),ne,re)},se=h(function(e,t){I(this,{type:"URLSearchParamsIterator",iterator:T(N(e).entries),kind:t})},"Iterator",function(){var e=L(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),i},!0),le=function(e){this.entries=[],this.url=null,void 0!==e&&(k(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===$(e,0)?X(e,1):e:b(e)))};le.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,i,n,a,o,s,l,u=w(e);if(u)for(i=(t=T(e,u)).next;!(n=r(i,t)).done;){if(o=(a=T(A(n.value))).next,(s=r(o,a)).done||(l=r(o,a)).done||!r(o,a).done)throw H("Expected sequence with length 2");G(this.entries,{key:b(s.value),value:b(l.value)})}else for(var c in e)g(e,c)&&G(this.entries,{key:c,value:b(e[c])})},parseQuery:function(e){if(e)for(var t,i,n=Q(e,"&"),a=0;a<n.length;)(t=n[a++]).length&&(i=Q(t,"="),G(this.entries,{key:ie(z(i)),value:ie(K(i,"="))}))},serialize:function(){for(var e,t=this.entries,i=[],n=0;n<t.length;)e=t[n++],G(i,oe(e.key)+"="+oe(e.value));return K(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ue=function(){p(this,ce);var e=arguments.length>0?arguments[0]:void 0;I(this,new le(e))},ce=ue.prototype;if(c(ce,{append:function(e,t){x(arguments.length,2);var i=N(this);G(i.entries,{key:b(e),value:b(t)}),i.updateURL()},delete:function(e){x(arguments.length,1);for(var t=N(this),i=t.entries,n=b(e),a=0;a<i.length;)i[a].key===n?Y(i,a,1):a++;t.updateURL()},get:function(e){x(arguments.length,1);for(var t=N(this).entries,i=b(e),n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){x(arguments.length,1);for(var t=N(this).entries,i=b(e),n=[],a=0;a<t.length;a++)t[a].key===i&&G(n,t[a].value);return n},has:function(e){x(arguments.length,1);for(var t=N(this).entries,i=b(e),n=0;n<t.length;)if(t[n++].key===i)return!0;return!1},set:function(e,t){x(arguments.length,1);for(var i,n=N(this),a=n.entries,r=!1,o=b(e),s=b(t),l=0;l<a.length;l++)(i=a[l]).key===o&&(r?Y(a,l--,1):(r=!0,i.value=s));r||G(a,{key:o,value:s}),n.updateURL()},sort:function(){var e=N(this);_(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,i=N(this).entries,n=m(e,arguments.length>1?arguments[1]:void 0),a=0;a<i.length;)n((t=i[a++]).value,t.key,this)},keys:function(){return new se(this,"keys")},values:function(){return new se(this,"values")},entries:function(){return new se(this,"entries")}},{enumerable:!0}),u(ce,P,ce.entries,{name:"entries"}),u(ce,"toString",function(){return N(this).serialize()},{enumerable:!0}),d(ue,"URLSearchParams"),n({global:!0,constructor:!0,forced:!l},{URLSearchParams:ue}),!l&&v(B)){var de=o(F.has),he=o(F.set),fe=function(e){if(k(e)){var t,i=e.body;if("URLSearchParams"===y(i))return t=e.headers?new B(e.headers):new B,de(t,"content-type")||he(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),E(e,{body:S(0,b(i)),headers:S(0,t)})}return e};if(v(D)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return D(e,arguments.length>1?fe(arguments[1]):{})}}),v(O)){var pe=function(e){return p(this,U),new O(e,arguments.length>1?fe(arguments[1]):{})};U.constructor=pe,pe.prototype=U,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:pe})}}e.exports={URLSearchParams:ue,getState:N}},function(e,t,i){"use strict";var n=i(14),a=i(60),r=i(19),o=i(29),s=i(9).f,l=i(100),u=i(104),c=i(15),d=i(5),h=o.set,f=o.getterFor("Array Iterator");e.exports=l(Array,"Array",function(e,t){h(this,{type:"Array Iterator",target:n(e),index:0,kind:t})},function(){var e=f(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,u(void 0,!0)):u("keys"==i?n:"values"==i?t[n]:[n,t[n]],!1)},"values");var p=r.Arguments=r.Array;if(a("keys"),a("values"),a("entries"),!c&&d&&"values"!==p.name)try{s(p,"name",{value:"values"})}catch(e){}},function(e,t,i){"use strict";var n=i(20),a=i(12),r=i(15),o=i(54),s=i(0),l=i(61),u=i(63),c=i(102),d=i(33),h=i(28),f=i(16),p=i(7),v=i(19),g=i(62),m=o.PROPER,y=o.CONFIGURABLE,A=g.IteratorPrototype,k=g.BUGGY_SAFARI_ITERATORS,b=p("iterator"),E=function(){return this};e.exports=function(e,t,i,o,p,g,S){l(i,t,o);var T,w,x,C=function(e){if(e===p&&L)return L;if(!k&&e in I)return I[e];switch(e){case"keys":case"values":case"entries":return function(){return new i(this,e)}}return function(){return new i(this)}},_=t+" Iterator",P=!1,I=e.prototype,N=I[b]||I["@@iterator"]||p&&I[p],L=!k&&N||C(p),M="Array"==t&&I.entries||N;if(M&&(T=u(M.call(new e)))!==Object.prototype&&T.next&&(r||u(T)===A||(c?c(T,A):s(T[b])||f(T,b,E)),d(T,_,!0,!0),r&&(v[_]=E)),m&&"values"==p&&N&&"values"!==N.name&&(!r&&y?h(I,"name","values"):(P=!0,L=function(){return a(N,this)})),p)if(w={values:C("values"),keys:g?L:C("keys"),entries:C("entries")},S)for(x in w)(k||P||!(x in I))&&f(I,x,w[x]);else n({target:t,proto:!0,forced:k||P},w);return r&&!S||I[b]===L||f(I,b,L,{name:p}),v[t]=L,w}},function(e,t,i){var n=i(3);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,i){var n=i(6),a=i(11),r=i(103);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return a(i),r(n),t?e(i,n):i.__proto__=n,i}}():void 0)},function(e,t,i){var n=i(0),a=String,r=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw r("Can't set "+a(e)+" as a prototype")}},function(e,t){e.exports=function(e,t){return{value:e,done:t}}},function(e,t,i){var n=i(3),a=i(7),r=i(15),o=a("iterator");e.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach(function(e,n){t.delete("b"),i+=n+e}),r&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host})},function(e,t,i){var n=i(16);e.exports=function(e,t,i){for(var a in t)n(e,a,t[a],i);return e}},function(e,t,i){var n=i(43),a=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw a("Incorrect invocation")}},function(e,t,i){var n=i(6),a=i(25),r=i(21),o=n(n.bind);e.exports=function(e,t){return a(e),void 0===t?e:r?o(e,t):function(){return e.apply(t,arguments)}}},function(e,t,i){var n={};n[i(7)("toStringTag")]="z",e.exports="[object z]"===String(n)},function(e,t,i){var n=i(34),a=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return a(e)}},function(e,t,i){var n=i(12),a=i(25),r=i(11),o=i(47),s=i(64),l=TypeError;e.exports=function(e,t){var i=arguments.length<2?s(e):t;if(a(i))return r(n(i,e));throw l(o(e)+" is not iterable")}},function(e,t){var i=TypeError;e.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},function(e,t,i){var n=i(114),a=Math.floor,r=function(e,t){var i=e.length,l=a(i/2);return i<8?o(e,t):s(e,r(n(e,0,l),t),r(n(e,l),t),t)},o=function(e,t){for(var i,n,a=e.length,r=1;r<a;){for(n=r,i=e[r];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==r++&&(e[n]=i)}return e},s=function(e,t,i,n){for(var a=t.length,r=i.length,o=0,s=0;o<a||s<r;)e[o+s]=o<a&&s<r?n(t[o],i[s])<=0?t[o++]:i[s++]:o<a?t[o++]:i[s++];return e};e.exports=r},function(e,t,i){var n=i(57),a=i(59),r=i(115),o=Array,s=Math.max;e.exports=function(e,t,i){for(var l=a(e),u=n(t,l),c=n(void 0===i?l:i,l),d=o(s(c-u,0)),h=0;u<c;u++,h++)r(d,h,e[u]);return d.length=h,d}},function(e,t,i){"use strict";var n=i(24),a=i(9),r=i(13);e.exports=function(e,t,i){var o=n(t);o in e?a.f(e,o,r(0,i)):e[o]=i}},function(e,t,i){e.exports=function(){"use strict";var e={};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return e},set exports(t){e=t}});var t,i,n,a,r={},o={get exports(){return r},set exports(e){r=e}},s={},l={get exports(){return s},set exports(e){s=e}};function u(){return t||(t=1,function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(l)),s}var c,d={},h={get exports(){return d},set exports(e){d=e}};function f(){return c||(c=1,(e=h).exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports),d;var e}var p,v,g={},m={get exports(){return g},set exports(e){g=e}},y={},A={get exports(){return y},set exports(e){y=e}},k={},b={get exports(){return k},set exports(e){k=e}};function E(){return p||(p=1,(e=b).exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports),k;var e}var S,T,w={},x={get exports(){return w},set exports(e){w=e}},C={},_={get exports(){return C},set exports(e){C=e}};function P(){return T||(T=1,e=_,t=E(),e.exports=function(e,i){if(e){if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,i):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports),C;var e,t}var I,N,L,M,R,D={},O={get exports(){return D},set exports(e){D=e}},B={},U={get exports(){return B},set exports(e){B=e}},F={},V={get exports(){return F},set exports(e){F=e}},H={},W={get exports(){return H},set exports(e){H=e}};function j(){return L||(L=1,function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(W)),H}var $,K,G,q,z,Y={},Q={get exports(){return Y},set exports(e){Y=e}},X={},Z={get exports(){return X},set exports(e){X=e}},J={},ee={get exports(){return J},set exports(e){J=e}},te={},ie={get exports(){return te},set exports(e){te=e}},ne={},ae={get exports(){return ne},set exports(e){ne=e}},re={},oe={get exports(){return re},set exports(e){re=e}};function se(){return z||(z=1,function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(oe)),re}var le,ue,ce,de,he={},fe={get exports(){return he},set exports(e){he=e}},pe={},ve={get exports(){return pe},set exports(e){pe=e}},ge={},me={get exports(){return ge},set exports(e){ge=e}};var ye,Ae,ke,be,Ee,Se={},Te={get exports(){return Se},set exports(e){Se=e}},we={},xe={get exports(){return we},set exports(e){we=e}},Ce={},_e={get exports(){return Ce},set exports(e){Ce=e}},Pe={},Ie={get exports(){return Pe},set exports(e){Pe=e}},Ne={},Le={get exports(){return Ne},set exports(e){Ne=e}};function Me(){return be||(be=1,e=Ie,t=u().default,ke||(ke=1,function(e){var t=u().default;e.exports=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,i||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(Le)),i=Ne,e.exports=function(e){var n=i(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports),Pe;var e,t,i}var Re,De,Oe,Be,Ue,Fe,Ve,He,We,je={},$e={get exports(){return je},set exports(e){je=e}},Ke={},Ge={get exports(){return Ke},set exports(e){Ke=e}},qe=e,ze=qe(function(){if(a)return n;a=1;var e=(i||(i=1,function(e){var t=u().default;function i(){e.exports=i=function(){return a},e.exports.__esModule=!0,e.exports.default=e.exports;var n,a={},r=Object.prototype,o=r.hasOwnProperty,s=Object.defineProperty||function(e,t,i){e[t]=i.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(n){h=function(e,t,i){return e[t]=i}}function f(e,t,i,n){var a=t&&t.prototype instanceof A?t:A,r=Object.create(a.prototype),o=new L(n||[]);return s(r,"_invoke",{value:_(e,i,o)}),r}function p(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}a.wrap=f;var v="suspendedStart",g="executing",m="completed",y={};function A(){}function k(){}function b(){}var E={};h(E,u,function(){return this});var S=Object.getPrototypeOf,T=S&&S(S(M([])));T&&T!==r&&o.call(T,u)&&(E=T);var w=b.prototype=A.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function C(e,i){function n(a,r,s,l){var u=p(e[a],e,r);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&o.call(d,"__await")?i.resolve(d.__await).then(function(e){n("next",e,s,l)},function(e){n("throw",e,s,l)}):i.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,l)})}l(u.arg)}var a;s(this,"_invoke",{value:function(e,t){function r(){return new i(function(i,a){n(e,t,i,a)})}return a=a?a.then(r,r):r()}})}function _(e,t,i){var a=v;return function(r,o){if(a===g)throw new Error("Generator is already running");if(a===m){if("throw"===r)throw o;return{value:n,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=P(s,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===v)throw a=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=g;var u=p(e,t,i);if("normal"===u.type){if(a=i.done?m:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(a=m,i.method="throw",i.arg=u.arg)}}}function P(e,t){var i=t.method,a=e.iterator[i];if(a===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var r=p(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,y;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(e){if(e||""===e){var i=e[u];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(o.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=n,t.done=!0,t};return r.next=r}}throw new TypeError(t(e)+" is not iterable")}return k.prototype=b,s(w,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:k,configurable:!0}),k.displayName=h(b,d,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,d,"GeneratorFunction")),e.prototype=Object.create(w),e},a.awrap=function(e){return{__await:e}},x(C.prototype),h(C.prototype,c,function(){return this}),a.AsyncIterator=C,a.async=function(e,t,i,n,r){void 0===r&&(r=Promise);var o=new C(f(e,t,i,n),r);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(w),h(w,d,"Generator"),h(w,u,function(){return this}),h(w,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},a.values=M,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,a){return s.type="throw",s.arg=e,t.next=i,a&&(t.method="next",t.arg=n),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),u=o.call(r,"finallyLoc");if(l&&u){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),N(i),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var a=n.arg;N(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:M(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),y}},a}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(o)),r)();n=e;try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return n}()),Ye=qe(f()),Qe=qe((N||(N=1,function(e){var t=(v||(v=1,function(e){var t=E();e.exports=function(e){if(Array.isArray(e))return t(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(A)),y),i=(S||(S=1,function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(x)),w),n=P(),a=(I||(I=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(O)),D);e.exports=function(e){return t(e)||i(e)||n(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}(m)),g)),Xe=qe((R||(R=1,function(e){var t=(M||(M=1,function(e){var t=j();e.exports=function(e,i){for(;!Object.prototype.hasOwnProperty.call(e,i)&&null!==(e=t(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}(V)),F);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,i,n){var a=t(e,i);if(a){var r=Object.getOwnPropertyDescriptor(a,i);return r.get?r.get.call(arguments.length<3?e:n):r.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(U)),B)),Ze=qe((q||(q=1,function(e){var t=($||($=1,function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}(Z)),X),i=(K||(K=1,function(e){e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,r,o,s=[],l=!0,u=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports}(ee)),J),n=P(),a=(G||(G=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(ie)),te);e.exports=function(e,r){return t(e)||i(e,r)||n(e,r)||a()},e.exports.__esModule=!0,e.exports.default=e.exports}(Q)),Y)),Je=qe((de||(de=1,function(e){var t=j(),i=se(),n=(le||(le=1,function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports}(fe)),he),a=(ce||(ce=1,function(e){var t=se(),i=(ue||(ue=1,function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}(me)),ge);function n(a,r,o){return i()?(e.exports=n=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=n=function(e,i,n){var a=[null];a.push.apply(a,i);var r=new(Function.bind.apply(e,a));return n&&t(r,n.prototype),r},e.exports.__esModule=!0,e.exports.default=e.exports),n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ve)),pe);function r(o){var s="function"==typeof Map?new Map:void 0;return e.exports=r=function(e){if(null===e||!n(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==s){if(s.has(e))return s.get(e);s.set(e,r)}function r(){return a(e,arguments,t(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(o)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(ae)),ne)),et=qe((ye||(ye=1,function(e){var t=se();e.exports=function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),i&&t(e,i)},e.exports.__esModule=!0,e.exports.default=e.exports}(Te)),Se)),tt=qe((Ae||(Ae=1,function(e){var t=u().default,i=f();e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(xe)),we)),it=qe(j()),nt=qe((Ee||(Ee=1,function(e){var t=Me();function i(e,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t(a.key),a)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(_e)),Ce)),at=qe((Re||(Re=1,function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}($e)),je)),rt=qe(u()),ot=qe((De||(De=1,function(e){var t=Me();e.exports=function(e,i,n){return(i=t(i))in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}(Ge)),Ke));function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=(0,it.default)(e);if(t){var a=(0,it.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,tt.default)(this,i)}}function lt(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ut(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ut(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}Object.getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");var t=Object.getOwnPropertyDescriptor(e,"__proto__"),i=t?(0,ot.default)({},"__proto__",t):{};return Object.getOwnPropertyNames(e).forEach(function(t){i[t]=Object.getOwnPropertyDescriptor(e,t)}),i};var ct,dt,ht=Object.create,ft=Object.defineProperty,pt=Object.defineProperties,vt=Object.getOwnPropertyDescriptor,gt=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertyNames,yt=Object.getOwnPropertySymbols,At=Object.getPrototypeOf,kt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,Et=function(e,t,i){return t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i},St=function(e,t){for(var i in t||(t={}))kt.call(t,i)&&Et(e,i,t[i]);if(yt){var n,a=lt(yt(t));try{for(a.s();!(n=a.n()).done;)i=n.value,bt.call(t,i)&&Et(e,i,t[i])}catch(e){a.e(e)}finally{a.f()}}return e},Tt=function(e,t){return pt(e,gt(t))},wt=function(e,t){var i={};for(var n in e)kt.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&yt){var a,r=lt(yt(e));try{for(r.s();!(a=r.n()).done;)n=a.value,t.indexOf(n)<0&&bt.call(e,n)&&(i[n]=e[n])}catch(e){r.e(e)}finally{r.f()}}return i},xt=function(e,t){for(var i in t)ft(e,i,{get:t[i],enumerable:!0})},Ct=function(e,t,i,n){if(t&&"object"===(0,rt.default)(t)||"function"==typeof t){var a,r=lt(mt(t));try{var o=function(){var r=a.value;kt.call(e,r)||r===i||ft(e,r,{get:function(){return t[r]},enumerable:!(n=vt(t,r))||n.enumerable})};for(r.s();!(a=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}return e},_t=function(e,t,i){return i=null!=e?ht(At(e)):{},Ct(!t&&e&&e.__esModule?i:ft(i,"default",{value:e,enumerable:!0}),e)},Pt=function(e,t,i,n){for(var a,r=n>1?void 0:n?vt(t,i):t,o=e.length-1;o>=0;o--)(a=e[o])&&(r=(n?a(t,i,r):a(r))||r);return n&&r&&ft(t,i,r),r},It=function(e,t,i){return new Promise(function(n,a){var r=function(e){try{s(i.next(e))}catch(e){a(e)}},o=function(e){try{s(i.throw(e))}catch(e){a(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(r,o)};s((i=i.apply(e,t)).next())})},Nt=(ct={"../node_modules/screenfull/dist/screenfull.js":function(e,t){var i,n,a,r,o;i="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==t&&t.exports,a=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,a=t.length,r={};n<a;n++)if((e=t[n])&&e[1]in i){for(n=0;n<e.length;n++)r[t[0][n]]=e[n];return r}return!1}(),r={change:a.fullscreenchange,error:a.fullscreenerror},o={request:function(e,t){return new Promise(function(n,r){var o=function(){this.off("change",o),n()}.bind(this);this.on("change",o);var s=(e=e||i.documentElement)[a.requestFullscreen](t);s instanceof Promise&&s.then(o).catch(r)}.bind(this))},exit:function(){return new Promise(function(e,t){if(this.isFullscreen){var n=function(){this.off("change",n),e()}.bind(this);this.on("change",n);var r=i[a.exitFullscreen]();r instanceof Promise&&r.then(n).catch(t)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var n=r[e];n&&i.addEventListener(n,t,!1)},off:function(e,t){var n=r[e];n&&i.removeEventListener(n,t,!1)},raw:a},a?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(i[a.fullscreenElement])}},element:{enumerable:!0,get:function(){return i[a.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(i[a.fullscreenEnabled])}}}),n?t.exports=o:window.screenfull=o):n?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}},function(){return dt||(0,ct[mt(ct)[0]])((dt={exports:{}}).exports,dt),dt.exports}),Lt={};xt(Lt,{AccessibilityAction:function(){return Va},ActiveState:function(){return Ha},AdBreakType:function(){return Wa},AdTechnology:function(){return ja},AdapterRole:function(){return $a},ApiMetric:function(){return Ka},AudioTrackType:function(){return Ga},Autoplay:function(){return qa},AviaHookType:function(){return di},Browser:function(){return Nn},CoreEvent:function(){return ri},Device:function(){return qn},DrmKeySystemAvailability:function(){return za},DrmRobustness:function(){return Ya},DrmType:function(){return Lr},Emitter:function(){return li},ErrorCategory:function(){return vi},ErrorCode:function(){return gi},ErrorMessage:function(){return yi},FileExtensionToMimeType:function(){return cn},HTML5:function(){return ir},HdcpStatus:function(){return Qa},Header:function(){return Xa},HookError:function(){return ki},HookType:function(){return tr},InvalidArgumentError:function(){return gr},KeyboardScope:function(){return nr},LocalizationId:function(){return ar},LocalizedLanguage:function(){return rr},LogLevel:function(){return Dt},Logger:function(){return ci},LoggerEvent:function(){return Rt},Measurement:function(){return hi},Metric:function(){return Ua},MetricType:function(){return or},MimeType:function(){return un},Os:function(){return zn},PerformanceMode:function(){return sr},Platform:function(){return Yn},PlaybackAdapterBase:function(){return Ba},PlaybackState:function(){return lr},PlayerError:function(){return Ai},PlayerEvent:function(){return Za},PlayerHookType:function(){return mi},PluginError:function(){return mr},PluginPriority:function(){return ur},QualityCategory:function(){return qi},QualityLabel:function(){return cr},QualityMode:function(){return dr},QueryString:function(){return gn},RequestCredentials:function(){return mn},RequestMethod:function(){return kn},RequestObjectType:function(){return hr},ResponseType:function(){return yn},StreamType:function(){return fr},TextTrackEvent:function(){return xi},TextTrackKind:function(){return Ci},TextTrackMode:function(){return pa},Timer:function(){return Rr},UiMetric:function(){return pr},Util:function(){return Nr},VideoFormat:function(){return vr},WILDCARD:function(){return va},applyHook:function(){return Cs},buildInfo:function(){return Fa},checkPolyfills:function(){return Es},cmcd:function(){return Ln},createResourceConfig:function(){return Ls},createThumbnailStyles:function(){return Ir},createVideoPlayer:function(){return Ps},defineHook:function(){return Ts},eventsToPromise:function(){return Mi},getAutoplayCapabilities:function(){return Rs},getDeviceCapabilities:function(){return _s},getSystemInfo:function(){return Ms},getVideoPlayerIds:function(){return Ss},id3:function(){return Ta},queue:function(){return Li},registerHook:function(){return ws},removeHook:function(){return xs},removeVideoPlayer:function(){return Ns},renderThumbnail:function(){return Ar},request:function(){return Tn},retrieveVideoPlayer:function(){return Is},waitFor:function(){return _i},waitForEvent:function(){return Ii},waitForTime:function(){return Ni},waitUntil:function(){return Pi}});var Mt=function(e){return Ct(ft({},"__esModule",{value:!0}),e)}(Lt),Rt=function(e){return e.LOG_EVENT="logevent",e.TIME_EVENT="logtimeevent",e.TIME_END_EVENT="logtimeendevent",e}(Rt||{}),Dt=function(e){return e.OFF="off",e.ERROR="error",e.WARN="warn",e.INFO="info",e.DEBUG="debug",e}(Dt||{}),Ot={};xt(Ot,{camelToDash:function(){return qt},formatTime:function(){return ai},getNumLines:function(){return Xt},hmsToSec:function(){return ni},msToHms:function(){return ti},padStart:function(){return Jt},secToHms:function(){return ei},template:function(){return Zt},uid8:function(){return zt},uuid:function(){return Yt},xmlToJson:function(){return Qt},zeroFill:function(){return ii}});var Bt={};function Ut(e){return null==e||Array.isArray(e)&&0===e.length||$t(e)&&0===Object.keys(e).length||Vt(e)&&""===e}function Ft(e){return"function"==typeof e}function Vt(e){return"string"==typeof e}function Ht(e){return void 0===e}function Wt(e){return"number"==typeof e}function jt(e){return"boolean"==typeof e}function $t(e){return"object"===(0,rt.default)(e)}xt(Bt,{isBoolean:function(){return jt},isEmpty:function(){return Ut},isFunction:function(){return Ft},isNumber:function(){return Wt},isObject:function(){return $t},isString:function(){return Vt},isUndefined:function(){return Ht}});var Kt=/([a-z\d])([A-Z])/g,Gt=/\W+/g;function qt(e){return e.replace(Gt,"-").replace(Kt,"$1-$2").toLowerCase()}function zt(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()}function Yt(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}function Qt(e){var t={};if(1===e.nodeType&&e.attributes.length>0)for(var i=0,n=e.attributes.length;i<n;i++){var a=e.attributes.item(i);t[a.nodeName]=a.nodeValue}else 3===e.nodeType&&(t=e.nodeValue);if("p"===e.nodeName&&(t.text="",e.childNodes.forEach(function(e){if("metadata"!==e.nodeName){var i=(new XMLSerializer).serializeToString(e);1===e.nodeType&&(t.text+="br"===e.tagName?"\n":i),3===e.nodeType&&(t.text+=i)}})),e.hasChildNodes())for(var r=0,o=e.childNodes.length;r<o;r++){var s=e.childNodes.item(r),l=s.nodeName;if(Ht(t[l]))t[l]=Qt(s);else{if(Ht(t[l].push)){var u=t[l];t[l]=[],t[l].push(u)}t[l].push(Qt(s))}}return t}function Xt(e){return e&&(e.match(/\n/g)||[]).length+1}function Zt(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"{{",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"}}";if(!e)return e;var a=new RegExp("".concat(i,"((?:(?!(").concat(i,"|").concat(n,")).)+)").concat(n),"g");return e.replace(a,function(e,i){return Ht(null==t?void 0:t[i])?e:t[i]})}function Jt(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";t|=0;var n=e.length;return n>t?e:((t-=n)>i.length&&(i+=i.repeat(t/i.length)),i.slice(0,t)+e)}function ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:61;if(null==e||isNaN(e))return"00:00";var i=ii((e|=0)%60);return i=ii((e=e/60|0)%60)+":"+i,(e=e/60|0)>0&&(i=ii(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i}function ti(e){return ai(new Date(e),"HH:mm:ss:sss",{offset:0})}function ii(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Jt(String(e),t,"0")}function ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(!e)return NaN;var i=e.split(":"),n=0;if(4===i.length)n=parseInt(i.pop())/t;else if(3===i.length&&(i[2]=i[2].replace(",","."),-1!==i[2].indexOf("."))){var a=i[2].split(".");(null!=a?a.length:void 0)>1&&(i[2]=a[0],n=parseInt(a[1])/1e3)}for(var r=parseInt(i.pop());i.length>0;)r+=Math.pow(60,i.length)*parseInt(i.shift());return r+n}function ai(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm:ss A",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{timezone:"",offset:-(new Date).getTimezoneOffset()/60};if(null!=i.offset&&0!==i.offset&&(e=new Date(e.getTime()+Math.round(60*i.offset*60*1e3))),isNaN(e.getTime()))return"";var n=e.getUTCHours(),a=e.getUTCMinutes(),r=e.getUTCSeconds(),o=e.getUTCMilliseconds(),s=n%12||12,l=n<12?"am":"pm",u={hh:ii(s),h:s,HH:ii(n),H:n,mm:ii(a),m:a,sss:ii(o,3),ss:ii(r),s:r,a:l,A:l.toUpperCase(),z:i.timezone};for(var c in u)t=t.replace(c,u[c]);return t}var ri=(0,nt.default)(function e(t,i,n){(0,at.default)(this,e),this.timeStamp=Date.now(),this.detail=n,this.target=i,this.type=t}),oi=(0,nt.default)(function e(t,i){(0,at.default)(this,e),this.value=t,this.next=i}),si=function(){function e(){(0,at.default)(this,e),this.head=null,this.tail=null}return(0,nt.default)(e,[{key:"empty",get:function(){return null==this.head}},{key:"forEach",value:function(e){for(var t=this.head;t;)e(t.value),t=t.next}},{key:"add",value:function(e){var t=new oi(e);null==this.head?(this.head=t,this.head.next=null,this.tail=null):null==this.tail?this.head.next=this.tail=t:this.tail.next=this.tail=t}},{key:"has",value:function(e){for(var t=this.head;t;){if(t.value===e)return!0;t=t.next}return!1}},{key:"delete",value:function(e){for(var t=null,i=this.head;i;){if(i.value===e)return t&&(t.next=i.next),i===this.head?this.head=i.next:i===this.tail&&(this.tail=t!==this.head?t:null),!0;t=i,i=i.next}return!1}},{key:"clear",value:function(){for(var e,t=this.head;t;)e=t.next,t.value=t.next=null,t=e;this.head=this.tail=null}}]),e}(),li=function(){function e(t,i){(0,at.default)(this,e),this.target=i||this,this.opts=t||{},this.eventMap={};var n=this.opts;for(var a in n)if(Ft(n[a])&&/^on[A-Z]/.test(a)){var r=a.charAt(2).toLowerCase()+a.substring(3);this.on(r,n[a]),delete this.opts[a]}}return(0,nt.default)(e,[{key:"destroy",value:function(){var e;if(this.opts&&(this.opts=null),this.offAll(null),this.eventMap){for(e in this.eventMap)delete this.eventMap[e];this.eventMap=null}}},{key:"on",value:function(e,t){if(this.eventMap&&e&&Ft(t)){var i=this.eventMap[e]||(this.eventMap[e]=new si);i.has(t)||i.add(t)}}},{key:"once",value:function(e,t){var i=this;this.eventMap&&e&&Ft(t)&&this.on(e,function n(a){i.off(e,n),t(a)})}},{key:"off",value:function(e,t){!t&&this.offAll(e),t&&this.remove(e,t)}},{key:"offAll",value:function(e){if(this.eventMap){var t=this.eventMap;if(e)this.remove(e,null);else for(var i in t)this.remove(i,null)}}},{key:"hasListenerFor",value:function(e){return!(!this.eventMap||!this.eventMap[e]||this.eventMap[e].empty)}},{key:"emit",value:function(e,t){var i=new ri(e,this.target||this,t);this.dispatchEvt(i)}},{key:"dispatchEvt",value:function(e){this.eventMap&&this.eventMap[e.type]&&this.eventMap[e.type].forEach(function(t){return t(e)})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.eventMap&&this.eventMap[e]&&(t?this.eventMap[e].delete(t):this.eventMap[e].clear())}}]),e}(),ui=(Oe={},(0,ot.default)(Oe,"off",0),(0,ot.default)(Oe,"error",100),(0,ot.default)(Oe,"warn",200),(0,ot.default)(Oe,"info",300),(0,ot.default)(Oe,"debug",400),Oe),ci=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,at.default)(this,i),(n=t.call(this,e)).useConsole=!1,n.pStartTime={},n.useConsole=$t(console),n.id=e.id||zt(),n.tzero=Date.now(),n.logLevel=Ut(n.opts.logLevel)?"off":n.opts.logLevel,n}return(0,nt.default)(i,[{key:"logLevel",get:function(){return this.pLogLevel},set:function(e){this.pLogLevel=e}},{key:"assert",value:function(e,t){e||this.error('Assertion failed! - "'.concat(t||"",'"'))}},{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];for(var r=0,o=n.length;r<o;r++)this.emit("logevent",this.assembleEvent(n[r],e));this.shouldLog(e)&&(n.unshift(this.getStamp()),(t=console).log.apply(t,n))}},{key:"dir",value:function(e,t,i){var n=i||"Unnamed Object";this.emit("logevent",this.assembleEvent(t,e,n)),this.shouldLog(e)&&(console.log(this.getStamp()+"Object: ".concat(n)),console.dir(t))}},{key:"error",value:function(e){this.emit("logevent",this.assembleEvent(e,"error")),this.shouldLog("error")&&console.error(this.getStamp()+e)}},{key:"warn",value:function(e){this.emit("logevent",this.assembleEvent(e,"warn")),this.shouldLog("warn")&&console.warn(this.getStamp()+e)}},{key:"time",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:performance.now();this.pStartTime[e]?this.warn("Timer ".concat(e," already exists")):(this.pStartTime[e]=t,this.emit("logtimeevent",this.assembleEvent({startTime:t},"info",e)))}},{key:"timeEnd",value:function(e){if(this.pStartTime[e]){var t=this.pStartTime[e];delete this.pStartTime[e];var i=performance.now()-t;this.emit("logtimeendevent",this.assembleEvent({startTime:t,duration:i},"info",e)),this.shouldLog("info")&&console.log("".concat(this.getStamp()," Timer: ").concat(e," ").concat(Math.round(i),"ms"))}else this.warn("Timer ".concat(e," does not exist"))}},{key:"assembleEvent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{id:this.id,item:e,level:t,label:i}}},{key:"shouldLog",value:function(e){return this.useConsole&&ui[this.pLogLevel]>=ui[e]}},{key:"getStamp",value:function(){return"[".concat(this.id+"]  "+ti(Date.now()-this.tzero)," > ")}}],[{key:"error",value:function(e){console&&console.error(e)}},{key:"warn",value:function(e){console&&console.warn(e)}},{key:"log",value:function(e){console&&console.log(e)}},{key:"deprecated",value:function(e){i.deprecatedCounts[e]>=i.maxDeprecatedWarnings||(i.warn(e),i.deprecatedCounts[e]=(i.deprecatedCounts[e]||0)+1)}}]),i}(li);ci.maxDeprecatedWarnings=1,ci.deprecatedCounts={};var di=function(e){return e.CREATE_PLAYER="createplayer",e.REMOVE_PLAYER="removeplayer",e.DEVICE_CAPABILITIES="devicecapabilities",e.SCRIPT_LOAD="scriptload",e}(di||{}),hi=function(e){return e.PLAYER_CREATION="player-creation",e.RESOURCE_ATTACHMENT="resource-attachment",e.AD_ADAPTER_CREATION="ad-adapter-creation",e.AD_RESOURCE_CREATION="ad-resource-creation",e.PLAYBACK_ADAPTER_CREATION="playback-adapter-creation",e.RESOURCE_LOAD="resource-load",e.RESOURCE_PLAYBACK="resource-playback",e.FIRST_FRAME="first-frame",e}(hi||{}),fi=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this,e)).cause=n,a}return(0,nt.default)(i)}((0,Je.default)(Error));function pi(e,t){if(!e)throw new fi(t)}var vi=function(e){return e.AD="Ad",e.RESOURCE="Resource",e.PLAYBACK="Playback",e.VIDEO_START="Video start",e.HOOK="Hook",e.API="API",e.EVENT="Event",e.PLUGIN="Plugin",e}(vi||{}),gi=function(e){return e.INVALID_RESOURCE_FORMAT="1000",e.RESOURCE_UNAVAILABLE="1100",e.GEO_LOCATION_BLOCKED="1101",e.DOMAIN_BLOCKED="1102",e.IP_BLOCKED="1103",e.SATELLITE_PROVIDER_BLOCKED="1104",e.EXPIRED="1105",e.SELECTOR_CALL_ERROR="1106",e.IMA_SDK_MISSING="1200",e.DAI_SDK_MISSING="1201",e.DASH_SDK_MISSING="1202",e.HLS_SDK_MISSING="1203",e.SHAKA_SDK_MISSING="1204",e.TWITCH_SDK_MISSING="1205",e.FW_SDK_MISSING="1206",e.HLSJS_PARSE_ERROR="2101",e.DASHJS_PARSE_ERROR="2102",e.SHAKA_PARSE_ERROR="2103",e.TWITCH_PARSE_ERROR="2104",e.WEBMAF_START_ERROR="2105",e.USER_GESTURE_REQUIRED="2300",e.HTML5_NETWORK_ERROR="3001",e.HLSJS_NETWORK_ERROR="3002",e.DASHJS_NETWORK_ERROR="3003",e.WEBMAF_NETWORK_ERROR="3004",e.SHAKA_NETWORK_ERROR="3005",e.TWITCH_NETWORK_ERROR="3006",e.MEDIA_ABORTED="3100",e.HTML5_SRC_NOT_SUPPORTED="3101",e.HLSJS_SRC_NOT_SUPPORTED="3102",e.DASHJS_SRC_NOT_SUPPORTED="3103",e.SHAKA_SRC_NOT_SUPPORTED="3105",e.TWITCH_SRC_NOT_SUPPORTED="3106",e.HTML5_MEDIA_ERROR="3200",e.HLSJS_MEDIA_ERROR="3201",e.HLSJS_MUX_ERROR="3202",e.DASHJS_MEDIA_ERROR="3203",e.SHAKA_MEDIA_ERROR="3205",e.TWITCH_MEDIA_ERROR="3206",e.FAIRPLAY_APP_CERT_ERROR="3300",e.FAIRPLAY_LIC_ERROR="3301",e.DASHJS_DRM_ERROR="3302",e.SHAKA_DRM_ERROR="3304",e.UNSPECIFIED_VIDEO_PLAYBACK_ERROR="3400",e.UNSPECIFIED_HLSJS_ERROR="3401",e.UNSPECIFIED_DASHJS_ERROR="3402",e.UNSPECIFIED_SHAKA_ERROR="3404",e.UNSPECIFIED_TWITCH_ERROR="3405",e.AD_STALLED="4000",e.IMA_INIT_FAILURE="4100",e.IMA_AD_ERROR="4101",e.DAI_DATA_ERROR="4200",e.DAI_NETWORK_ERROR="4201",e.AD_BLOCKING_DETECTED="4300",e.AD_ADAPTER_ERROR="4400",e.ADAPTER_NOT_FOUND="5000",e.HOOK_ERROR="6000",e.EVENT_HOOK="6001",e.AD_BREAK_HOOK="6002",e.AD_HOOK="6003",e.ATTACH_RESOURCE_HOOK="6004",e.REQUEST_HOOK="6005",e.RESPONSE_HOOK="6006",e.CREATE_PLAYER_HOOK="6007",e.REMOVE_PLAYER_HOOK="6008",e.DEVICE_CAPABILITIES="6009",e.SCRIPT_LOAD="6010",e.PLUGIN_ERROR="7000",e.PLUGIN_FACTORY_ERROR="7001",e.PLUGIN_ID_ERROR="7002",e.PLUGIN_LOAD_ERROR="7003",e.INVALID_ARGUMENT="9000",e.UNEXPECTED_CONDITION="9999",e}(gi||{}),mi=function(e){return e.EVENT="event",e.AD_BREAK="adbreak",e.AD="ad",e.ATTACH_RESOURCE="attachresource",e.REQUEST="request",e.RESPONSE="response",e.SEEK="seek",e}(mi||{}),yi=function(e){return e.ABR_UNAVAILABLE="Single bitrate stream detected, adaptive bitrate system is unavailable",e.ABR_MANUAL_SWITCHING_REACHED_LOWER_BOUNDS="You have reached the lowest available quality for this presentation.",e.ABR_MANUAL_SWITCHING_REACHED_UPPER_BOUNDS="You have reached the highest available quality for this presentation at this screen size",e.ABR_MIN_BITRATE_RESTRICTION_UNAVAILABLE="Min bitrate restrictions are not offered with this streaming library",e.AD_STALLED="Stalled ad detected",e.ADAPTER_UNAVAILABLE="Unable to play the requested resource - mediaUrl not recognized",e.ADAPTER_LIB_UNAVAILABLE="Unable to play the requested resource - External library is not loading",e.ADAPTER_NOT_FOUND="Unable to find an adapter for the requested resource",e.API_INVALID_ARG="API method called with missing or invalid param",e.CAP_LEVEL_MAXBITRATE="Max bitrate setting will be ignored since capQualityToPlayerSize is enabled",e.CONTENT_PLAYBACK_SETTING_IGNORED="This API is only available after the CONTENT_START event has been dispatched. This setting will be ignored.",e.DAI_MISSING_ASSET_URL="Unexpected condition = valid assetUrl not found in DAI stream data",e.DAI_SDK_UNAVAILABLE="A DAI SDK is required for playback, but is not found",e.ENVIRONMENT_NOT_SUPPORTED='Unable to locate a global "window" object or suitable alternative',e.FAIRPLAY_LICENSE_ERROR="Issue with fairplay DRM and the provided license acquisition url",e.FAIRPLAY_APP_CERT_ERROR="Issue creating a fairplay keysession with the provided application certificate",e.FAIRPLAY_NO_CONTENT_ID="A valid content or asset id was not detected when creating fairplay drm session",e.FAIRPLAY_WEBKIT_ERROR="Issue with webkit and keysession creations while using fairplay drm.",e.FATAL_PLAYBACK_MEDIA_ERROR="Fatal media error, no option for recovery",e.NONFATAL_PLAYBACK_MEDIA_ERROR="Nonfatal media error",e.FATAL_PLAYBACK_NETWORK_ERROR="Fatal network error, no option for recovery",e.NONFATAL_PLAYBACK_NETWORK_ERROR="Nonfatal network error",e.IMA_SDK_MISSING="IMA SDK not found.",e.INVALID_RESOURCE="Resource configuration appears to be invalid",e.MANUAL_ABR_SWITCHING_UNAVAILABLE="Native HTML5 Video does not allow manual bitrate switching",e.PAUSING_LINEAR_LIVE_STREAM_NOT_ALLOWED="StreamType.LIVE is detected. Redirecting to the stop method since a DVR window is not detected.",e.PLUGIN_LOAD_ERROR="Unable to load plugin",e.PLUGIN_FACTORY_ERROR="Invalid plugin factory",e.PLUGIN_ID_ERROR="Invalid plugin ID",e.RESOURCE_MISSING="Resource missing",e.RESOURCE_NOT_SUPPORTED="Resource is not recognized or is currently unsupported",e.RETRY_PLAYBACK_MEDIA_ERROR="Media error detected",e.RETRY_PLAYBACK_NETWORK_ERROR="Network error detected",e.UNEXPECTED_CONDITION="An unexpected condition was encountered",e.UNSPECIFIED_ERROR="Unspecified error",e.VIDEO_PLAYBACK_UNAVAILABLE="Unable to locate a video element or suitable alternative",e.WEBKIT_KEY_ADDED_SUCCESS="Webkit key added successfully",e.WEBKIT_MEDIA_KEYS_NOT_SUPPORTED="WebKitMediaKeys are not supported for this type of media on this user agent",e}(yi||{}),Ai=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n,a){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;return(0,at.default)(this,i),(r=t.call(this,n,a)).code=e,r.fatal=o,r.category=s,r.name="PlayerError",r}return(0,nt.default)(i,null,[{key:"eventToError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Event";if(e instanceof Error||!e.detail&&!e.error)return e;var n=e.detail;if(n instanceof Error)return n;var a=e.error||n.error;return a instanceof Error?a:a.code&&a.message?new i(a.code,a.message,a.cause||e,!0,t):new i("9999","An unexpected condition was encountered",e,!0,t)}}]),i}(fi),ki=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n,a){var r;return(0,at.default)(this,i),(r=t.call(this,i.getErrorCode(e),n,a,!0,"Hook")).type=e,r.name="HookError",r}return(0,nt.default)(i,null,[{key:"getErrorCode",value:function(e){switch(e){case"createplayer":return"6007";case"removeplayer":return"6008";case"devicecapabilities":return"6009";case"scriptload":return"6010";case"ad":return"6003";case"adbreak":return"6002";case"attachresource":return"6004";case"event":return"6001";case"request":return"6005";case"response":return"6006";default:return"6000"}}}]),i}(Ai),bi=function(){function e(t){(0,at.default)(this,e),this.hookMap={},this.hookConfig=null,this.hookConfig=t}return(0,nt.default)(e,[{key:"destroy",value:function(){this.hookMap=null,this.hookConfig=null}},{key:"hasHook",value:function(e){var t=this.hookMap[e];return(null==t?void 0:t.length)>0}},{key:"defineHook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{multiple:!0};pi(!this.hookConfig[e],"Hook type already exists: ".concat(e)),this.hookConfig[e]=t}},{key:"validateHookType",value:function(e){pi(e in this.hookConfig,"Invalid hook type: ".concat(e))}},{key:"registerHook",value:function(e,t){var i;this.validateHookType(e),this.hookMap[e]||(this.hookMap[e]=[]),!1===(null==(i=this.hookConfig[e])?void 0:i.multiple)&&this.hookMap[e].length||this.hookMap[e].includes(t)||this.hookMap[e].push(t)}},{key:"removeHook",value:function(e,t){this.validateHookType(e),this.hookMap[e]&&(this.hookMap[e]=this.hookMap[e].filter(function(e){return e!==t}))}},{key:"applyHook",value:function(e,t,i){return It(this,null,ze.default.mark(function n(){var a,r,o,s,l,u=this;return ze.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((r=null==(a=this.hookMap)?void 0:a[e])&&0!==r.length){n.next=3;break}return n.abrupt("return",t);case 3:return o=!1,s=function(){return o=!0},l=function t(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return It(u,null,ze.default.mark(function l(){var u,c;return ze.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(a>=r.length)){l.next=2;break}return l.abrupt("return",n);case 2:if("function"==typeof(u=r[a])){l.next=5;break}throw new ki(e,"Hook must be a valid function");case 5:return c={type:e,value:n,metadata:i,cancel:s},l.prev=6,l.next=9,u(c);case 9:l.next=14;break;case 11:throw l.prev=11,l.t0=l.catch(6),new ki(e,l.t0.toString(),l.t0);case 14:return l.abrupt("return",o?null:t(c.value,++a));case 15:case"end":return l.stop()}},l,null,[[6,11]])}))},n.abrupt("return",l(t));case 7:case"end":return n.stop()}},n,this)}))}}]),e}(),Ei=(Be={},(0,ot.default)(Be,"event",{multiple:!0}),(0,ot.default)(Be,"adbreak",{multiple:!1}),(0,ot.default)(Be,"ad",{multiple:!1}),(0,ot.default)(Be,"attachresource",{multiple:!0}),(0,ot.default)(Be,"request",{multiple:!0}),(0,ot.default)(Be,"response",{multiple:!0}),(0,ot.default)(Be,"seek",{multiple:!0}),Be),Si=Tt(St({},Ei),(Ue={},(0,ot.default)(Ue,"createplayer",{multiple:!0}),(0,ot.default)(Ue,"removeplayer",{multiple:!0}),(0,ot.default)(Ue,"devicecapabilities",{multiple:!0}),(0,ot.default)(Ue,"scriptload",{multiple:!0}),Ue)),Ti={};xt(Ti,{AccessibilityAction:function(){return Va},ActiveState:function(){return Ha},AdBreakType:function(){return Wa},AdTechnology:function(){return ja},AdapterRole:function(){return $a},ApiMetric:function(){return Ka},AudioTrackType:function(){return Ga},Autoplay:function(){return qa},AviaHookType:function(){return di},Browser:function(){return Nn},CoreEvent:function(){return ri},Device:function(){return qn},DrmKeySystemAvailability:function(){return za},DrmRobustness:function(){return Ya},DrmType:function(){return Lr},Emitter:function(){return li},ErrorCategory:function(){return vi},ErrorCode:function(){return gi},ErrorMessage:function(){return yi},FileExtensionToMimeType:function(){return cn},HTML5:function(){return ir},HdcpStatus:function(){return Qa},Header:function(){return Xa},HookError:function(){return ki},HookType:function(){return tr},InvalidArgumentError:function(){return gr},KeyboardScope:function(){return nr},LocalizationId:function(){return ar},LocalizedLanguage:function(){return rr},LogLevel:function(){return Dt},Logger:function(){return ci},LoggerEvent:function(){return Rt},Measurement:function(){return hi},Metric:function(){return Ua},MetricType:function(){return or},MimeType:function(){return un},Os:function(){return zn},PerformanceMode:function(){return sr},Platform:function(){return Yn},PlaybackAdapterBase:function(){return Ba},PlaybackState:function(){return lr},PlayerError:function(){return Ai},PlayerEvent:function(){return Za},PlayerHookType:function(){return mi},PluginError:function(){return mr},PluginPriority:function(){return ur},QualityCategory:function(){return qi},QualityLabel:function(){return cr},QualityMode:function(){return dr},QueryString:function(){return gn},RequestCredentials:function(){return mn},RequestMethod:function(){return kn},RequestObjectType:function(){return hr},ResponseType:function(){return yn},StreamType:function(){return fr},TextTrackEvent:function(){return xi},TextTrackKind:function(){return Ci},TextTrackMode:function(){return pa},Timer:function(){return Rr},UiMetric:function(){return pr},Util:function(){return Nr},VideoFormat:function(){return vr},WILDCARD:function(){return va},buildInfo:function(){return Fa},cmcd:function(){return Ln},createThumbnailStyles:function(){return Ir},eventsToPromise:function(){return Mi},id3:function(){return Ta},queue:function(){return Li},renderThumbnail:function(){return Ar},request:function(){return Tn},waitFor:function(){return _i},waitForEvent:function(){return Ii},waitForTime:function(){return Ni},waitUntil:function(){return Pi}});var wi=(0,nt.default)(function e(){(0,at.default)(this,e)});wi.blankVideoUrl="https:/avia.cbsivideo.com/h5/blanks/uvp_blank.mp4",wi.blankDataUrl="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",wi.messages=yi;var xi=function(e){return e.CUE_CHANGE="cuechange",e.ADD_TRACK="addtrack",e.CHANGE="change",e}(xi||{}),Ci=function(e){return e.CAPTIONS="captions",e.SUBTITLES="subtitles",e.DESCRIPTIONS="descriptions",e.CHAPTERS="chapters",e.METADATA="metadata",e.FORCED="forced",e}(Ci||{});function _i(e){return new Promise(function(t){return setTimeout(t,e)})}function Pi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new Promise(function(i,n){var a=setInterval(function(){e()&&(clearInterval(a),i())},t)})}function Ii(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;return"number"==typeof i&&(n=i),new Promise(function(a,r){var o,s=[],l=function(){return s.forEach(function(e){return e()})},u=function(t,i){var n=e.on?"on":"addEventListener",a=e.off?"off":"removeEventListener",r=function(e,i){clearTimeout(o),l(),t(i||e)};e[n](i,r),s.push(function(){return e[a](i,r)})};u(a,t),"string"==typeof i&&u(function(e){return r(Ai.eventToError(e))},i),n>-1&&(o=setTimeout(function(){l(),r(new Error("timeout"))},n))})}function Ni(e,t,i){return i||(i=e instanceof HTMLVideoElement?"currentTime":"contentTime"),Pi(function(){return e[i]>=t})}function Li(e){var t,i=!1,n=!1;return{run:function(a){return It(this,null,ze.default.mark(function r(){var o,s;return ze.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=!0,o=a,s=0;case 3:if(!(s<e.length)){r.next=13;break}return t=e[s](o),r.next=7,t;case 7:if(o=r.sent,!i){r.next=10;break}return r.abrupt("break",13);case 10:s++,r.next=3;break;case 13:return t=null,n=!1,r.abrupt("return",o);case 16:case"end":return r.stop()}},r)}))},get running(){return n},cancel:function(){return It(this,null,ze.default.mark(function e(){return ze.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=!0,e.next=3,t;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))}}}function Mi(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return new Promise(function(n,a){var r,o=[],s=function(){return o.forEach(function(e){return e()})},l=function(e){return function(t){var i=t.target,n=t.events,a=i,l=a.on?"on":"addEventListener",u=a.off?"off":"removeEventListener",c=function(t,i){clearTimeout(r),s(),e(i||t)};n.forEach(function(e){a[l](e,c),o.push(function(){return a[u](e,c)})})}};e.forEach(l(n)),t.forEach(l(a)),i>-1&&(r=setTimeout(function(){s(),a(new Error("timeout"))},i))})}var Ri={};function Di(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function Oi(e,t,i){return Math.max(t,Math.min(i,e))}function Bi(e,t,i){return Wt(e)&&e>=t&&e<=i}function Ui(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(e-t)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-n)/(i-t)+n}xt(Ri,{clampValue:function(){return Oi},inRange:function(){return Bi},mapToRange:function(){return Ui},roundTo:function(){return Di}});var Fi={};function Vi(e){return Object.keys(e).reduce(function(t,i,n){return t[n]=e[i],t},[])}function Hi(e){return Object.keys(e).reduce(function(t,i,n){return t[n]=[i,e[i]],t},[])}function Wi(e){return e.reduce(function(e,t){var i=(0,Ze.default)(t,2),n=i[0],a=i[1];return e[n]=a,e},{})}function ji(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Array.isArray(e)?e.map(function(e){return ji(e,t)}):Object.assign({},e);return t?Object.freeze(i):i}function $i(e){return Array.isArray(e)&&e.forEach(function(e){return $i(e)}),Object.freeze(e)}function Ki(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[0];return t.slice(1).reduce(function(e,t){return function e(t,i){return null==t?i:(null==i||Object.getOwnPropertyNames(i).forEach(function(n){var a=i[n],r=t[n],o=(0,rt.default)(a);"undefined"!==o&&(Array.isArray(a)?t[n]=a.slice():null==r&&"object"===o&&null!=a?t[n]=e({},a):null!=r&&$t(r)?"object"===o&&(t[n]=e(r,a)):t[n]=a)}),t)}(e,t)},n)}xt(Fi,{clone:function(){return ji},entries:function(){return Hi},freeze:function(){return $i},fromEntries:function(){return Wi},merge:function(){return Ki},values:function(){return Vi}});var Gi={};xt(Gi,{QualityMap:function(){return zi},getMaxBitrateIndex:function(){return nn},getMaxHeightForQualityCategory:function(){return Xi},getMaxIndexForHeight:function(){return Zi},getMinAndMaxValuesForCategory:function(){return Yi},getMinBitrateIndex:function(){return tn},getQualityCategoryForVideoHeight:function(){return Qi},normalizeQuality:function(){return en},processQuality:function(){return Ji},toKbits:function(){return on},validateQualities:function(){return rn},validateQuality:function(){return an}});var qi=function(e){return e.AUTO="AUTO",e.SD="SD",e.HD="HD",e.UHD="UHD",e.UHD_4K="UHD 4K",e.UHD_8K="UHD 8K",e}(qi||{}),zi=(Fe={},(0,ot.default)(Fe,"UHD 8K",4320),(0,ot.default)(Fe,"UHD 4K",2160),(0,ot.default)(Fe,"UHD",1440),(0,ot.default)(Fe,"HD",720),(0,ot.default)(Fe,"SD",0),Fe);function Yi(e,t){var i=1/0,n=0,a=1/0,r=0;return e.forEach(function(e){e.category.indexOf(t)>=0&&(n=Math.max(n,e.index),i=Math.min(i,e.index),r=Math.max(r,e.bitrate),a=Math.min(a,e.bitrate))}),{maxIndex:n,minIndex:i,minBitrate:a,maxBitrate:r}}function Qi(e){var t;return(null==(t=Hi(zi).find(function(t){return e>=t[1]}))?void 0:t[0])||"SD"}function Xi(e){if(!e||"AUTO"===e)return 1/0;var t=Hi(zi).find(function(t,i,n){var a;return(null==(a=n[i+1])?void 0:a[0])===e});return(null==t?void 0:t[1])-1||1/0}function Zi(e,t){return e.reduce(function(i,n,a){if(n.height<=t){var r=e[i];(isNaN(i)||n.height>r.height||n.height===r.height&&n.bitrate>r.bitrate)&&(i=a)}return i},NaN)}function Ji(e){var t=["".concat(Qi(e.height)),"".concat(e.height,"p"),"".concat(Math.round(e.bitrate/1e3)," kbps")];return Tt(St({},e),{category:t})}function en(e,t){return{index:t,bitrate:e.bitrate,height:e.height,width:e.width,codec:e.codec||e.codecs,enabled:e.enabled||!0}}function tn(e,t){var i=e.length-1;if(t>=e[i].bitrate)return i;for(var n=i-1;n>0;n--){var a=e[n].bitrate;if(t===a)return n;if(t>a)return n+1}return 0}function nn(e,t){if(t<=e[0].bitrate)return 0;for(var i=e.length-1,n=1;n<i;n++){var a=e[n].bitrate;if(t===a)return n;if(t<a)return n-1}return i}function an(e,t,i,n,a){var r=!0;if(Number.isFinite(t)&&r&&(r=e.bitrate>=t),Number.isFinite(i)&&r&&(r=e.bitrate<=i),Number.isFinite(n)&&r&&(r=e.height<=n),a){var o=a.width,s=a.height;r&&(r=e.width<=o||e.height<=s)}return r}function rn(e,t,i,n,a){return e.some(function(e){return e.enabled&&an(e,t,i,n,a)})}function on(e){return Math.round(e/1e3)}var sn={};xt(sn,{getResourceMetadata:function(){return pn},getResourceMimeType:function(){return fn}});var ln={};xt(ln,{getFileExtension:function(){return dn},getMimeType:function(){return hn}});var un=function(e){return e.MP4_VIDEO="video/mp4",e.MP4_AUDIO="audio/mp4",e.HLS="application/vnd.apple.mpegurl",e.HLS_ALT="application/x-mpegURL",e.DASH="application/dash+xml",e.WEBM_VIDEO="video/webm",e.WEBM_AUDIO="audio/webm",e.TS_VIDEO="video/mp2t",e.VTT="text/vtt",e.TTML="application/ttml+xml",e.ISM="application/vnd.ms-sstr+xml",e}(un||{}),cn={VTT:"text/vtt",XML:"application/ttml+xml",M3U8:"application/vnd.apple.mpegurl",MPD:"application/dash+xml",TS:"video/mp2t",MP4:"video/mp4",MPV:"video/mp4",MPA:"audio/mp4",WEBM:"video/webm",ISM:"application/vnd.ms-sstr+xml"};function dn(e){return e.replace(/\?.*/,"").replace(/#.*/,"").split(".").pop()}function hn(e){if(!e)return"";var t=dn(e).toUpperCase();return cn[t]}function fn(e){var t;return((null==(t=e.overrides)?void 0:t.mimeType)||"").split(";").shift()||hn(e.location.mediaUrl)}function pn(e){return{manifest:{mimeType:fn(e)},fragment:{mimeType:""}}}var vn={};xt(vn,{clearAllCues:function(){return ea},clearCue:function(){return Jn},createSidecarTextTrack:function(){return ra},dedupeCues:function(){return ta},findDefaultTrack:function(){return sa},findLanguageTracks:function(){return oa},isTextTrack:function(){return na},processCues:function(){return ia},smpteToVtt:function(){return aa}});var gn=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"encode",value:function(e){return Ut(e)?"":Hi(e).map(function(e){var t=(0,Ze.default)(e,2),i=t[0],n=t[1];return i+"="+encodeURIComponent(n)}).join("&")}},{key:"decode",value:function(e){var t={};return null==e||e.replace(/^[^?]*\?/,"").replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,n,a){var r;try{r=Ht(a)?a:decodeURIComponent(a)}catch(e){r=a}t[decodeURIComponent(i)]=r}),t}},{key:"parseValue",value:function(e){if(Ht(e))return!0;var t=e.toLowerCase();return"true"===t||"false"===t?"true"===t:"undefined"!==e?"null"===t?null:(t=parseFloat(e),isNaN(t)?e:t):void 0}},{key:"parse",value:function(t){var i=e.decode(t);for(var n in i)i[n]=e.parseValue(i[n]);return i}},{key:"append",value:function(t,i){var n=t.includes("?")?"&":"?";return t+n+e.encode(i)}}]),e}(),mn=function(e){return e.INCLUDE="include",e.SAME_ORIGIN="same-origin",e.OMIT="omit",e}(mn||{}),yn=function(e){return e.ARRAY_BUFFER="arraybuffer",e.TEXT="text",e.JSON="json",e.DOCUMENT="document",e.DEFAULT="",e}(yn||{}),An=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"TIMEOUT",get:function(){return 5e3}}]),e}(),kn=function(e){return e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.OPTIONS="OPTIONS",e.PUT="PUT",e}(kn||{}),bn=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"create",value:function(e){return{url:e.url||"",method:e.method||"GET",timeout:e.timeout||An.TIMEOUT,headers:e.headers||{},data:this.getBody(e.data,e.encodeList,e.sendJson),withCredentials:!0===e.withCredentials,responseType:e.responseType||"text",onComplete:e.onComplete||null,errorRecovery:e.errorRecovery||null}}},{key:"getBody",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;if("string"==typeof e)return e;if(!Object.keys(e).length)return null;var n=Array.isArray(t)&&t.length;for(var a in!n&&(t=[]),e)e[a]=this.getValue(a,e[a],t);if(i)return JSON.stringify(e);var r,o="";for(var s in e)null!=(r=e[s])&&void 0!==r&&""!==r&&(o+="".concat(s,"=").concat(r,"&"));return o.substr(0,o.length-1)}},{key:"getValue",value:function(e,t,i){return i.indexOf(e)>=0?encodeURIComponent(t):t}}]),e}(),En=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;(0,at.default)(this,i),(n=t.call(this,e)).retryCount=0,n.limit=0,n.retryIntervals=null;var a=n.opts.errorRecovery;return a&&!isNaN(a.retryAttempts)&&a.retryAttempts>0&&(n.limit=a.retryAttempts),a&&a.retryIntervals&&Array.isArray(a.retryIntervals)&&(n.retryIntervals=a.retryIntervals),n}return(0,nt.default)(i,[{key:"shouldRetry",value:function(){return this.limit&&!this.atLimit}},{key:"incrementAttempts",value:function(){this.retryCount++}},{key:"retryLimit",get:function(){return this.limit}},{key:"atLimit",get:function(){return this.retryCount===this.limit}},{key:"retryInterval",get:function(){return this.retryIntervals&&this.retryIntervals[this.retryCount-1]||300*this.retryCount}}]),i}(li),Sn=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,at.default)(this,i),(n=t.call(this,bn.create(e))).requestOptions=n.opts,n.opts.url&&n.createXhr(),n}return(0,nt.default)(i,[{key:"createXhr",value:function(){var e=this;this.request(this.requestOptions).then(function(t){var i=t.response,n=t.getResponseHeader("content-type"),a=i;if("text"===e.requestOptions.responseType&&n)if(n.includes("application/smil")||n.includes("application/xml")){var r=new DOMParser;a=r.parseFromString(a,"application/xml")}else(null==n?void 0:n.includes("application/json"))&&(a=JSON.parse(a));204!==t.status&&null==a?e.emitCompleteWithError("Unable to parse response."):setTimeout(function(){e.emitComplete({contentType:n,data:a})},1)}).catch(function(t){if(e.shouldRetry())e.incrementAttempts(),setTimeout(function(){e.createXhr()},e.retryInterval);else{var n=t.response||i.statusMessages[0];e.emitCompleteWithError(n)}})}},{key:"request",value:function(e){return new Promise(function(t,i){e.query&&(e.url=gn.append(e.url,e.query));var n=new XMLHttpRequest;if(n.open(e.method,e.url),n.onload=function(){!1!==e.checkStatus&&n.status>399&&i(n),t(n)},n.onerror=function(e){i(n)},n.withCredentials=e.withCredentials,null!=e.responseType)try{n.responseType=e.responseType}catch(e){}return null!=e.headers&&Hi(e.headers).forEach(function(e){var t=(0,Ze.default)(e,2),i=t[0],a=t[1];null!=i&&null!=a&&n.setRequestHeader(i,a)}),n.send(e.data)})}},{key:"emitComplete",value:function(e){this.emit(i.event.COMPLETE,{response:e.data,contentType:e.contentType,error:!1})}},{key:"emitCompleteWithError",value:function(e){var t=Vt(e)?e:null,n=t?null:e;this.emit(i.event.COMPLETE,{status:n&&n.status,error:!0,url:this.requestOptions.url||"not available",message:t||this.getMsg((null==n?void 0:n.status)||0,(null==n?void 0:n.data)||null)})}},{key:"getMsg",value:function(e,t){var n=i.statusMessages[""+e];return n||(n=Vt(t)?t:"Unspecified error"),"XhrDataRequest error: "+n}}],[{key:"load",value:function(e){return new Promise(function(t,n){var a=e;a.credentials&&(a.withCredentials="include"===a.credentials),a.body&&(a.data=a.body),a.onComplete=function(e){var i=e.detail;!i||i.error?n(i):t(i)},new i(a)})}}]),i}(En);function Tn(e){return e.query&&(e.url=gn.append(e.url,e.query)),Sn.load(e).then(function(e){return e.response})}Sn.event={COMPLETE:"complete"},Sn.statusMessages={0:"Request failed; blocked or timed out",500:"Server error encountered.",404:"Resource not found.",403:"Access denied."};var wn,xn,Cn,_n,Pn,In,Nn=function(e){return e.ANDROID="Android",e.CHROME="Chrome",e.CHROME_IOS="Chrome-iOS",e.FIREFOX="Firefox",e.FIREFOX_IOS="Firefox-iOS",e.EDGE="Edge",e.MSIE="MSIE",e.SAFARI="Safari",e.OPERA="Opera",e.OPERA_MOBILE="Opera-Mobile",e.SILK="Silk",e.WEBKIT="Webkit Browser",e.PLAYSTATION_4_WEBMAF="PlayStation 4 (WebMAF)",e.PLAYSTATION_4_MSE="PlayStation 4 (Media Source API)",e.PLAYSTATION_5="PlayStation 5 (Media Source API)",e.UNKNOWN="Unknown",e}(Nn||{}),Ln={};xt(Ln,{CMCD_VERSION:function(){return Wn},CmcdObjectType:function(){return wn},CmcdStreamType:function(){return Cn},CmcdStreamingFormat:function(){return Pn},appendCmcdQuery:function(){return Fn},decodeCmcd:function(){return Vn},encodeCmcd:function(){return Un},fromCmcdQuery:function(){return Hn}}),(xn=wn||(wn={})).MANIFEST="m",xn.AUDIO="a",xn.VIDEO="v",xn.MUXED="av",xn.INIT="i",xn.CAPTION="c",xn.TIMED_TEXT="tt",xn.KEY="k",xn.OTHER="o",(_n=Cn||(Cn={})).VOD="v",_n.LIVE="l",(In=Pn||(Pn={})).DASH="d",In.HLS="h",In.SMOOTH="s",In.OTHER="o";var Mn="CMCD",Rn=function(e){return"ot"===e||"sf"===e||"st"===e},Dn=function(e){return Math.round(e)},On=function(e){return 100*Dn(e/100)},Bn={br:Dn,d:Dn,bl:On,dl:On,mtp:On,nor:function(e){return encodeURIComponent(e)},rtp:On,tb:Dn};function Un(e){return function(e,t,i){var n=[];if(null==e||"object"!==(0,rt.default)(e))return n;var a=Object.keys(e).sort(),r=Object.assign({},Bn,null==i?void 0:i.formatters);return a.forEach(function(i){var a=e[i];if(null!=a&&""!==a&&!1!==a&&!("v"===i&&1===a||"pr"==i&&1===a)){var o=r[i];o&&(a=o(a));var s=t(i,a);n.push(s)}}),n}(e,function(e,t){switch((0,rt.default)(t)){case"boolean":return e;case"number":return"".concat(e,"=").concat(t);case"symbol":return"".concat(e,"=").concat(t.description||t.toString().replace(/^Symbol\((.*)\)$/,"$1"));case"string":return Rn(e)?"".concat(e,"=").concat(t):"".concat(e,"=").concat(JSON.stringify(t));default:return}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).join(",")}function Fn(e,t,i){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";var i=Un(e,t);return"".concat(Mn,"=").concat(encodeURIComponent(i))}(t,i);if(!n)return e;var a=e.includes("?")?"&":"?";return"".concat(e).concat(a).concat(n)}function Vn(e){return e?decodeURIComponent(e.replace(/^CMCD=/,"")).split(",").reduce(function(e,t){var i=t.split("="),n=(0,Ze.default)(i,2),a=n[0],r=n[1];return a?(r?Rn(a)||/^[a-zA-Z]$/.test(r)?e[a]=r:e[a]=JSON.parse(r):e[a]=!0,e):e},{}):{}}function Hn(e){return"string"==typeof e&&(e=new URLSearchParams(e)),Vn(e.get(Mn))}var Wn=1,jn={};function $n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/)||[];return{tag:e,language:t[1]||"",extended:t[2]||"",script:t[3]||"",region:t[4]||"",toString:function(){return this.tag}}}function Kn(e,t){if(e===t)return!0;var i=this.parseLanguageTag(e),n=this.parseLanguageTag(t);if(i.language.slice(0,2).toLowerCase()===n.language.slice(0,2).toLowerCase()){var a=i.region.toUpperCase(),r=n.region.toUpperCase();return a===r||!!a&&!r||!a&&!!r}return!1}xt(jn,{compareLanguageTags:function(){return Kn},parseLanguageTag:function(){return $n}});var Gn=_t(Nt(),1),qn=function(e){return e.DESKTOP="Desktop",e.ANDROID_PHONE="Android Phone",e.WINDOWS_PHONE="Windows Phone",e.IPHONE="iPhone",e.IPOD="iPod",e.IPAD="iPad",e.KINDLE="Kindle",e.TABLET="Tablet",e.MOBILE="Mobile",e.EMBEDDED="Embedded",e.LG_SMART_TV="LG Smart Tv",e.VIZIO_SMART_TV="Vizio Smart Tv",e.SAMSUNG_SMART_TV="Samsung Smart Tv",e.PHILLIPS_SMART_TV="Phillips Smart Tv",e.COMCAST_X1="Comcast X1",e.XBOX_ONE="Xbox One",e.CHROMECAST="Chromecast",e.PLAYSTATION_4="PlayStation 4",e.PLAYSTATION_5="PlayStation 5",e.SKY_Q="Sky Q",e.FOXTEL="Foxtel",e.ORANGE="Orange STB",e.VIRGIN_MEDIA="Virgin Media STB",e.VESTEL="Vestel Smart Tv",e.UNKNOWN="UNKNOWN",e}(qn||{}),zn=function(e){return e.OSX="OS X",e.WINDOWS="Windows",e.WINDOWS7="Windows 7",e.WINDOWS8="Windows 8",e.WINDOWS10="Windows 10",e.WINDOWS_VISTA="Windows Vista",e.WINDOWS_PHONE="Windows Phone",e.IOS="iOS",e.ANDROID="Android",e.CHROMIUM="Chromium",e.WEBOS="Web0S",e.SMARTCAST="SmartCast",e.TIZEN="Tizen",e.ORBIS="Orbis OS",e.PROSPERO="Prospero OS",e.TIVO="TiVo OS",e.UNKNOWN="Unknown",e}(zn||{}),Yn=function(e){return e.MAC="Macintosh",e.WINDOWS="Windows",e.LINUX="Linux",e.UNKNOWN="Unknown",e}(Yn||{}),Qn="; codecs=",Xn={video:{HLS:"application/vnd.apple.mpegurl",AVC:"video/mp4"+Qn+"avc1.4D401E,mp4a.40.2",HEVC:"video/mp4"+Qn+"hev1.1.2.L93.B0",WEBM_VP8:"video/webm"+Qn+"vp8, opus, vorbis",WEBM_VP9:"video/webm"+Qn+"vp9, opus, vorbis"},audio:{AVC:"audio/mp4"+Qn+"avc1.4D401E,mp4a.40.2",HEVC:"audio/mp4"+Qn+"hev1.1.2.L93.B0",WEBM_VP8:"audio/webm"+Qn+"vp8, opus, vorbis",WEBM_VP9:"audio/webm"+Qn+"vp9, opus, vorbis"}},Zn=function(e){if(!e)return{global:e,isBrowser:!1};var t=e.navigator||{userAgent:""},i=e.document||null,n=function(e,i,n){var a=e.test(i),r="Android"===n.os?"Android":"Safari";return a&&"Unknown"!==n.os&&/MacIntel|iPhone|iPad/.test(t.platform)?r:null},a=function(e){var t={majorVersion:null,minorVersion:null,versionString:null};if(Vt(e)){t.versionString=e;var i=e.split("."),n=parseInt(i[0],10),a=parseInt(i[1],10);!isNaN(n)&&(t.majorVersion=n),!isNaN(a)&&(t.minorVersion=a)}return t},r=t.userAgent||"",o=function(e){var i=e.toLowerCase(),n={os:"Unknown",platform:"Unknown",osVersion:"",device:"UNKNOWN"};if(i.indexOf("fxios")>=0)return n.os="iOS",n.platform="Macintosh",i.indexOf("iphone")>=0?n.device="iPhone":n.device="iPad",n;if(i.indexOf("crkey")>=0)return n.platform="Linux",n.device="Chromecast",n;var a=/\s(\([^)]+\))/.exec(e);if(a&&a.length&&a.length>1)for(var o=a[1].replace(/_/gi,"."),s=[function(e,i){return function(e,i){var n=new RegExp("Linux","i"),a=t.userAgentData,r=t.platform||(null==a?void 0:a.platform),o=/Linux armv/.test(r);if(n.test(e)||e.indexOf("Android")>=0){if(i.platform="Linux",i.device="UNKNOWN",e.indexOf("Chromium")>=0){var s=/Chromium\/([\d+\.]*)\s/.exec(e);i.os="Chromium",i.osVersion=s&&s[1]||""}else if(e.indexOf("Android")>=0){var l=/ Android ([^\s]+);/.exec(e);i.os="Android",i.osVersion=l&&l[1]||"",i.device="Android Phone"}else if(e.indexOf("Web0S")>=0)i.os="Web0S",i.osVersion="n/a",i.device="LG Smart Tv";else if(e.indexOf("SmartCast")>=0)i.os="SmartCast",i.osVersion="n/a",i.device="Vizio Smart Tv";else if(e.indexOf("Tizen")>=0){var u=/Tizen ([^\s]+)(;|\))/.exec(e);i.os="Tizen",i.osVersion=u&&u[1]||"",i.device="Samsung Smart Tv"}else if(e.indexOf("Sky")>=0)i.os="Linux",i.osVersion="n/a",i.device="Sky Q";else if(e.indexOf("Foxtel")>=0)i.os="Linux",i.osVersion="n/a",i.device="Foxtel";else if(e.indexOf("VirginMedia")>=0)i.os="Linux",i.osVersion="n/a",i.device="Virgin Media STB";else if(e.indexOf("Philips")>=0)i.os="Linux",i.osVersion="n/a",i.device="Phillips Smart Tv";else if(e.indexOf("SOPOpenBrowser")>=0)i.os="Linux",i.osVersion="n/a",i.device="Orange STB";else if(e.indexOf("Vestel")>=0){i.os="TiVo OS";var c=e.match(/TiVoOS\/([\d.]+)/);i.osVersion=c?c[1]:"n/a",i.device="Vestel Smart Tv"}else"undefined"!=typeof $badger||/ Xfinity/.test(e)||/ WPE/.test(e)?(i.os="Linux",i.osVersion="n/a",i.device="Comcast X1"):o&&(i.os="Linux",i.osVersion="n/a",i.device="Embedded");return!0}return!1}(e,i)},function(e,i){return function(e,i){if(e.indexOf("Macintosh")>=0){i.platform="Macintosh",r.match(/(iPad)/)||t.maxTouchPoints>1?(i.device="iPad",i.os="iOS"):e.indexOf("OS X")>=0&&(i.device="Desktop",i.os="OS X");var n=/Mac OS X ([\d.]+)/.exec(e);return i.osVersion=n&&n[1]?n[1]:null,!0}if(-1!==e.indexOf("like Mac OS X")){i.platform="Macintosh",i.os="iOS",i.device="UNKNOWN";var a=/\sOS\s([^\s]*)\s/.exec(e);a&&a[1]&&(i.osVersion=a[1]);for(var o=[/\(iPhone;/,/\(iPad;/,/\(iPod;/],s=["iPhone","iPad","iPod"],l=o.length;l--;)if(o[l].test(e))return i.device=s[l],!0;return!0}return!1}(e,i)},function(e,t){return function(e,t){var i=/(Windows Phone |Windows Phone OS )([^\s]+);/.exec(e);if(i&&i[2])return t.platform="Windows",t.os="Windows Phone",t.osVersion=i[2],t.device="Windows Phone",!0;var n=/Windows NT ([^\s]+)[;\)]/.exec(e);if(t.device="Desktop",n&&n[1]){t.platform="Windows",t.os="Windows";var a=n[1];if(/Xbox; Xbox One/.test(e)&&(t.device="Xbox One"),10===parseInt(a))t.os="Windows 10",t.osVersion=a;else switch(a){case"6.0":t.os="Windows Vista";break;case"6.1":t.os="Windows 7",t.osVersion="7";break;case"6.2":t.os="Windows 8",t.osVersion="8"}return!0}return!1}(e,t)}],l=s.length;l--&&!(0,s[l])(0===l?e:o,n););return n}(r),s=function(e,t){var i,a=(i={},(0,ot.default)(i,"Chrome",/Chrome\/(\S+)/),(0,ot.default)(i,"Chrome-iOS",/CriOS\/(\S+)/),(0,ot.default)(i,"Firefox-iOS",/FxiOS\/(\S+)/),(0,ot.default)(i,"Edge",/ Edge?\/([^\s]+)/),(0,ot.default)(i,"Firefox",/Firefox\/(\S+)/),(0,ot.default)(i,"Opera",/Opera|OPR\/(\S+)/),(0,ot.default)(i,"Safari",/Version\/(\S+).*Safari/),(0,ot.default)(i,"MSIE",/MSIE ([^\s]+)[);] Windows/),(0,ot.default)(i,"Android",/Android/),(0,ot.default)(i,"Silk",/Silk\/(\S+)/),(0,ot.default)(i,"PlayStation 4 (WebMAF)",/Playstation 4 (WebMAF) (\S+)/),(0,ot.default)(i,"PlayStation 4 (Media Source API)",/WebMAF\/v3/),(0,ot.default)(i,"PlayStation 5 (Media Source API)",/PlayStation 5/),(0,ot.default)(i,"Webkit Browser",/ WPE/),(0,ot.default)(i,"Unknown",null),i),r=a["Chrome-iOS"].test(e),o=function(e,t,i){var n=t&&t.exec(i),a={browser:e,browserVersion:"0",browserMajorVersion:0};if(n&&n.length&&n.length>1)if(a.browserVersion=n[1]||"",a.browserVersion.indexOf(".")){var r=a.browserVersion.split(".");if(Array.isArray(r)&&r.length){var o=parseInt(r[0]);!isNaN(o)&&(a.browserMajorVersion=o)}}else{var s=parseInt(a.browserVersion);!isNaN(s)&&(a.browserMajorVersion=s)}return a};if((a.Chrome.test(e)||r)&&!a.Opera.test(e)&&!a.Edge.test(e)){var s=r?"Chrome-iOS":"Chrome";return o(s,a[s],e)}var l=function(e,t,i){var n=/Trident.[^\s]+;.*rv:([^\s]+)[);]/;return t.test(i)?{browser:"MSIE",re:t}:e.test(i)?{browser:"Edge",re:e}:n.test(i)?{browser:"MSIE",re:n}:{browser:"Unknown",re:null}}(a.Edge,a.MSIE,e);if("Unknown"!==l.browser)return o(l.browser,l.re,e);for(var u in a)switch(u){case"Firefox":case"Firefox-iOS":case"Silk":case"Android":if(a[u].test(e))return"Silk"===u&&(t.device="Kindle"),o(u,a[u],e);break;case"Webkit Browser":return o("Webkit Browser",a["Webkit Browser"],e);case"PlayStation 4 (WebMAF)":case"PlayStation 4 (Media Source API)":case"PlayStation 5 (Media Source API)":if(a[u].test(e)){var c,d=a["PlayStation 5 (Media Source API)"].test(e);return c=d?"PlayStation 5 (Media Source API)":a["PlayStation 4 (Media Source API)"].test(e)?"PlayStation 4 (Media Source API)":"PlayStation 4 (WebMAF)",t.device=d?"PlayStation 5":"PlayStation 4",t.platform=d?"PlayStation 5":"PlayStation 4",t.os=d?"Prospero OS":"Orbis OS",o(c,a[c],e)}break;case"Safari":if(n(a[u],e,t))return o(u,a[u],e);break;case"Opera":var h=a[u].exec(e);if(h)return o(h.indexOf("Opera Mini/")>=0||h.indexOf("Opera Mobi")>=0?"Opera-Mobile":"Opera",a[u],e)}return o("Unknown",a.Unknown,e)}(r,o),l=o.os,u=o.platform,c=o.osVersion,d=o.device,h=s.browser,f=s.browserVersion,p=a(c),v=a(f),g=function(){switch(d){case"LG Smart Tv":case"Vizio Smart Tv":case"Samsung Smart Tv":case"Phillips Smart Tv":case"Comcast X1":case"Sky Q":case"Foxtel":case"Virgin Media STB":case"Vestel Smart Tv":case"Orange STB":return!0;default:return!1}}(),m="Desktop"===d,y=function(){switch(d){case"PlayStation 4":case"PlayStation 5":case"Xbox One":return!0;default:return!1}}(),A="ReactNative"===t.product,k=!!e.WebKitMediaSource,b=!(!e.MediaSource&&!k),E=function(t){var n=!1;if(k?n=e.WebKitMediaSource.isTypeSupported(t):b&&(n=e.MediaSource.isTypeSupported(t)),!n&&i){var a=i.createElement("video");$t(a)&&Ft(a.canPlayType)&&("probably"!==a.canPlayType(t)&&"maybe"!==a.canPlayType(t)||(n=!0))}return n},S=E(Xn.video.WEBM_VP8),T=E(Xn.video.WEBM_VP9),w=g||y||A,x=!!e.WM_videoPlayer;return{appNamespace:null,document:i,global:e,isBrowser:!x&&!!i&&!A,browser:h,browserVersionInfo:v,device:d,os:l,osVersionInfo:p,platform:u,isAndroid:"Android Phone"===d||"Android"===l,isChromecast:"Chromecast"===d,isDesktop:m,isEmbedded:"Embedded"===d,isIos:"iOS"===l,isMobile:!m,isTizen:"Samsung Smart Tv"===d,isTv:g,isConsole:y,isWebkit:k,isWebMaf:x,isWebOs:"Web0S"===l,isXboxOne:"Xbox One"===d,hasFullscreenApi:Gn.default.isEnabled,hasMediaSource:b,hasEncryptedMediaSource:!!(e.MediaKeys||e.WebKitMediaKeys||e.MSMediaKeys),supportsVp8:S,supportsVp9:T,supportsWebM:S||T,supportsMediaDecodeConfigurations:!!t.mediaCapabilities,supportsNativeHls:E(Xn.video.HLS),supportsRequestMediaKeySystemAccess:!!e.MediaKeySystemAccess,supportsUnrestrictedAutoplay:w}}("object"===("undefined"==typeof window?"undefined":(0,rt.default)(window))?window:null);function Jn(e,t){try{var i=VTTCue||TextTrackCue;e.addCue(new i(t-.1,t+.1," "))}catch(e){}}function ea(e){var t=function(t){t&&Array.from(t).forEach(function(t){try{e.removeCue(t)}catch(e){}})};t(e.cues),t(e.activeCues)}function ta(e,t){var i={},n=[];return ia(e,t),e.activeCues?(Array.from(e.activeCues).forEach(function(t){try{if(!t)return;var a=t.text,r=t.startTime,o=t.endTime,s=t.line;if(!a)return;var l=i[a];if(l){if(l.startTime===r)return l.endTime!==o&&(l.endTime=Math.max(l.endTime,o)),l.line!==s&&(l.line="auto"===l.line||"auto"===s?"auto":l.line),void e.removeCue(t)}else i[a]=t;n.push(t)}catch(e){}}),n):n}function ia(e,t){var i={},n=Math.max(0,t-15);Array.from(e.cues).forEach(function(t){try{var a=t,r=a.startTime,o=a.endTime,s=a.text;if(o<n)return;i[s]||(i[s]={});var l=i[s][o];if(l&&l.line===t.line)return void e.removeCue(t);var u=i[s][r];u&&t.line===u.line&&(u.endTime=o,delete i[s][r],e.removeCue(t),t=u),i[s][o]=t}catch(e){}})}function na(e){return"captions"===e||"subtitles"===e}function aa(e,t){return It(this,null,ze.default.mark(function i(){var n,a,r,o,s,l;return ze.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Tn({url:e,responseType:"document"});case 2:if(n=i.sent,(a=n.querySelectorAll("tt body div p")).length){i.next=6;break}throw new Error("No cues found in ".concat(e));case 6:r="Safari"===Zn.browser?"middle":"center",o="Safari"===Zn.browser?-1:0,s=void 0!==Zn.global.VTTCue,l=s?Zn.global.VTTCue:Zn.global.TextTrackCue,a.forEach(function(e,i,n){if(!Ut(e.textContent)){var a=e.textContent.replace(/(.*)<span.*tts:fontStyle="italic">(.*)<\/span>(.*)/g,"$1<i>$2</i>$3").replace(/(.*)<span.*tts:fontWeight="bold">(.*)<\/span>(.*)/g,"$1<b>$2</b>$3").replace(/(.*)<span.*tts:textDecoration="under">(.*)<\/span>(.*)/g,"$1<u>$2</u>$3"),u=Xt(a);e._lineCountPrev=e._lineCountPrev||0,e._lineCountNext=e._lineCountNext||0;for(var c=i+1,d=n[c],h=e.getAttribute("begin");(null==d?void 0:d.getAttribute("begin"))===h;)d._lineCountPrev=u+e._lineCountNext,e._lineCountNext+=Xt(d.textContent),d=n[++c];var f=new l(ni(h),ni(e.getAttribute("end")),a);try{var p=e.getAttribute("tts:textAlign");f.align=p||r}catch(e){f.align="middle"}if(s){var v=e.querySelector("metadata");if(v){f.snapToLines=!0;var g=parseInt(v.getAttribute("cccol")),m=parseInt(v.getAttribute("ccrow")),y=Math.round(g/35*100);f.position=y;try{f.align=y<45?"start":y>55?"end":r}catch(e){f.align="center"}f.positionAlign=y<45?"line-left":y>55?"line-right":"center",f.line=m-17+o}}try{t.addCue(f)}catch(e){}}});case 11:case"end":return i.stop()}},i)}))}function ra(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"English",r=null==(i=e.location)?void 0:i.textTrackUrl;if(!r)return Promise.reject("Invalid text track url");var o=r.indexOf(".vtt")>=0,s=e.cmcd;if(s.enabled&&(r=Fn(r,{ot:wn.CAPTION,su:!0,sid:s.sessionId,cid:s.contentId,pr:t.playbackRate,v:Wn})),o){var l=document.createElement("track");return l.kind="captions",l.label=a,l.srclang=n,l.id="sidecar-vtt",l.src=r,t.appendChild(l),Promise.resolve(l.track)}var u=t.addTextTrack("captions",a,n);return aa(r,u).then(function(){return u})}function oa(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=function(e){return new RegExp("^".concat(e),"i")},a=n(t),r=e.filter(function(e){return a.test(e.language)});if(!i){var o=n($n(t).language);r=r.concat(e.filter(function(e){return!a.test(e.language)&&o.test(e.language)}))}return r}function sa(e,t){return oa(e,t).sort(function(e,t){return e.default===t.default?0:!0===e.default?-1:!0===t.default?1:0})[0]||e.find(function(e){return e.default})||e[0]}var la={};xt(la,{createSimpleVideoInterface:function(){return da},isBuffered:function(){return ha},isValidPlayheadTime:function(){return ca}});var ua=(0,nt.default)(function e(){(0,at.default)(this,e),this.muted=!1,this.volume=NaN,this.currentTime=NaN,this.duration=NaN});function ca(e){return Wt(e)&&Number.isFinite(e)&&e>=0}function da(){return new ua}function ha(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.currentTime,i=e.buffered,n=0,a=i.length;n<a;n++)if(i.start(n)<=t&&i.end(n)>=t)return!0;return!1}var fa=function(e){return e.ABORT="abort",e.CAN_PLAY="canplay",e.CAN_PLAY_THROUGH="canplaythrough",e.DURATION_CHANGE="durationchange",e.ENDED="ended",e.ERROR="error",e.LOADED_METADATA="loadedmetadata",e.LOAD_START="loadstart",e.PAUSE="pause",e.PLAY="play",e.PLAYING="playing",e.PROGRESS="progress",e.RATE_CHANGE="ratechange",e.SEEKED="seeked",e.SEEKING="seeking",e.STALLED="stalled",e.TIME_UPDATE="timeupdate",e.VOLUME_CHANGE="volumechange",e.WAITING="waiting",e}(fa||{}),pa=function(e){return e.SHOWING="showing",e.HIDDEN="hidden",e.DISABLED="disabled",e}(pa||{}),va="*",ga={};function ma(e){for(var t=atob(e),i=t.length,n=new Uint8Array(new ArrayBuffer(i)),a=0;a<i;a++)n[a]=t.charCodeAt(a);return n}function ya(e){var t=String.fromCharCode.apply(null,e);return btoa(t)}function Aa(e,t){if(e&&e.length&&Ft(t))for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)}function ka(e,t){if(e&&e.length&&Ft(t))for(var i=e.length-1;i>-1;i--)t(e[i],i,e)}function ba(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):String.fromCharCode.apply(null,new Uint8Array(e))}function Ea(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function Sa(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),n=0,a=e.length;n<a;n++)i[n]=e.charCodeAt(n);return i}xt(ga,{arrayToString:function(){return Ea},base64DecodeUint8Array:function(){return ma},base64EncodeUint8Array:function(){return ya},bufferToString:function(){return ba},forEach:function(){return Aa},forEachReverse:function(){return ka},stringToArray:function(){return Sa}});var Ta={};function wa(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"!=typeof TextDecoder){var i=new TextDecoder("utf-8").decode(e);if(t){var n=i.indexOf("\0");return-1!==n?i.substring(0,n):i}return i.replace(/\0/g,"")}for(var a,r,o,s=e.length,l="",u=0;u<s;){if(0===(a=e[u++])&&t)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:r=e[u++],l+=String.fromCharCode((31&a)<<6|63&r);break;case 14:r=e[u++],o=e[u++],l+=String.fromCharCode((15&a)<<12|(63&r)<<6|(63&o)<<0)}}return l}function xa(e){return"PRIV"===e.type?function(e){if(!(e.size<2)){var t=wa(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=wa(e.data.subarray(t),!0);t+=i.length+1;var n=wa(e.data.subarray(t));return{key:e.type,info:i,data:n}}var a=wa(e.data);return{key:e.type,info:"",data:a}}(e):function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,i=wa(e.data.subarray(t),!0);t+=i.length+1;var n=wa(e.data.subarray(t));return{key:e.type,info:i,data:n}}var a=wa(e.data.subarray(1));return{key:e.type,info:"",data:a}}}(e)}function Ca(e,t){var i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,(i|=(127&e[t+2])<<7)|127&e[t+3]}function _a(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=Ca(e,4);return{type:t,size:i,data:e.subarray(10,10+i)}}function Pa(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Ia(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Na(e){for(var t=0,i=[];Ia(e,t);){for(var n=Ca(e,t+6),a=(t+=10)+n;t+8<a;){var r=_a(e.subarray(t)),o=xa(r);o&&i.push(o),t+=r.size+10}Pa(e,t)&&(t+=10)}return i}xt(Ta,{getId3Frames:function(){return Na}});var La=function(){function e(t,i){var n,a=this;(0,at.default)(this,e),this.id3Map=[],this.daiId3=/^google_/,this.maxId3DedupeLength=e.MAX_ID3_DEDUPE_LENGTH,this.onTextTrackAdded=function(e){var t=e.track;a.isValidTrack(t)&&(t.mode="hidden",t.addEventListener("cuechange",a.onCueChange))},this.onCueChange=function(e){var t=e.target,i=t&&t.activeCues;i&&i.length&&Aa(i,function(e){return a.processCue(e)})},this.onSeeking=function(){a.clearId3()},this.onMetadataCuepoint=i,this.video=t.video,this.id3OwnerIds=["com.cbsi.live.sg"].concat(t.resource.playback.id3OwnerIds||[]);var r=null==(n=t.playerOptions.overrides)?void 0:n.maxId3DedupeLength;null!=r&&(this.maxId3DedupeLength=r),this.addEvents(),this.logger=t.logger,this.logger.log("info","MetadataSurface created"),Aa(this.video.textTracks,function(e){return a.onTextTrackAdded({track:e})})}return(0,nt.default)(e,[{key:"destroy",value:function(){var e=this;this.onMetadataCuepoint=null,this.id3Map=null,this.removeEvents(),Aa(this.video.textTracks,function(t){return e.cleanupTrack(t)})}},{key:"addEvents",value:function(){this.video.textTracks.addEventListener("addtrack",this.onTextTrackAdded),this.video.addEventListener("seeking",this.onSeeking)}},{key:"removeEvents",value:function(){var e=this;this.video.textTracks.removeEventListener("addtrack",this.onTextTrackAdded),this.video.removeEventListener("seeking",this.onSeeking),Aa(this.video.textTracks,function(t){return t.removeEventListener("cuechange",e.onCueChange)})}},{key:"clearId3",value:function(){this.id3Map=[]}},{key:"cleanupTrack",value:function(e){function t(t){try{t&&e.removeCue(t)}catch(e){}}"metadata"===e.kind&&(ka(e.cues,t),ka(e.activeCues,t))}},{key:"processCue",value:function(e){var t=this;if(!e.value&&e.data){var i=e.data;if(i.constructor===ArrayBuffer)return void Na(new Uint8Array(i)).forEach(function(i){e.value=i,t.processCue(e)})}var n=e.value,a=e.startTime,r=e.endTime,o=n.key,s=n.data,l=n.info,u=void 0===l?"":l;this.processId3(o,{id:void 0,text:"string"==typeof s?s:"",info:u,data:s,startTime:a,endTime:r,source:e})}},{key:"processId3",value:function(e,t){var i=t.info,n=t.data;if("TXXX"===e&&this.daiId3.test(t.text)?(Ut(i)&&(t.info=t.text),t.id="google_dai"):t.id=this.id3OwnerIds.find(function(e){return e===va||i.includes(e)}),t.id){var a;try{a=n instanceof ArrayBuffer?ba(n):n}catch(e){a=""}"PRIV"===e&&this.id3OwnerIds[0]===i&&(t.data=a),t.text=a,this.id3Map.some(function(e){return e.info===t.info&&e.startTime===t.startTime&&e.text===t.text})||(this.id3Map.length>this.maxId3DedupeLength&&this.id3Map.pop(),this.id3Map.unshift(t),this.onMetadataCuepoint(t))}}},{key:"isMetadataTrack",value:function(e){return"metadata"===e}},{key:"isExpired",value:function(e){return e.expired}},{key:"isValidTrack",value:function(e){return!!e&&!!this.isMetadataTrack(e.kind)&&!this.isExpired(e)}}]),e}();La.MAX_ID3_DEDUPE_LENGTH=32;var Ma={};function Ra(e,t){var i,n=function(){clearTimeout(i),i=null},a=function(){n();for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];i=setTimeout.apply(void 0,[e,t].concat(r))};return a.cancel=n,a.flush=e,a.pending=function(){return null!=i},a}xt(Ma,{debounce:function(){return Ra}});var Da=function(){function e(t,i){var n=this;(0,at.default)(this,e),this.pTextTracks=null,this.currentTextTrack=null,this.currentTextTrackMode="disabled",this.existingTrack=[],this.addedTracks=[],this.ignoreBlankTracks=!1,this.onVideoSeeked=function(e){n.updateForcedNarrative()},this.onVideoTextTrackAdded=function(e){e.track.expired=!1,n.onTextTrackAdded(e)},this.onTextTrackAdded=function(e){var t=e.track,i="subtitles"===t.kind&&!t.language&&!t.label;"metadata"===t.kind||i||n.addDebounced()},this.onTextTrackChange=function(e){n.processDebounced()},this.onCueChange=function(e){var t=e.target,i="forced"===t.kind;if(n.config.textTrackSettings.enabled||i){var a=ta(t,n.video.currentTime);n.emit("textCuepoint",{activeCues:a,forced:i})}},this.addTracks=function(){if(Aa(n.pTextTracks,function(e){var t=n.isExpired(e)||n.isDuplicateTrack(e);e.mode=t?"disabled":"hidden",t||n.addTrack(e)}),!n.currentTextTrack){if(n.textTrack=sa(n.textTracks,n.config.textTrackSettings.language),!n.textTrack)return;n.textTrack.mode=n.config.textTrackSettings.mode,n.emit("textTrackAvailable")}n.processTracks()},this.processTracks=function(){var e=n.config.textTrackSettings,t=e.enabled,i=e.native,a=e.enabledMode,r=n.textTracks;if(Aa(n.pTextTracks,function(e){n.isExpired(e)&&"disabled"!==e.mode&&(e.mode="disabled")}),i){var o=r.find(function(e){return"showing"===e.mode});if(t){if(o===n.currentTextTrack)return;o?n.textTrack=o:n.textTrackMode="disabled"}else{if(!o)return;o!==n.currentTextTrack&&(n.textTrack=o),n.textTrackMode="showing"}}else if(t){var s=r.find(function(e){return"showing"===e.mode});s&&(s.mode=a)}else{var l=r.find(function(e){return"disabled"!==e.mode});l&&(l.mode="disabled")}},this.config=t,this.video=t.video,this.pTextTracks=this.video.textTracks,this.currentTextTrackMode=t.textTrackSettings.mode,this.pForcedLanguage=t.textTrackSettings.language,this.ignoreBlankTracks=t.playerOptions.ignoreBlankTextTracks,this.emit=i||function(){},this.processDebounced=Ra(this.processTracks,100),this.addDebounced=Ra(this.addTracks,25),this.addEvents(),this.logger=t.logger,this.logger.log("info","TextTrackSurface created"),this.config.resource.location.textTrackUrl&&ra(this.config.resource,this.video)}return(0,nt.default)(e,[{key:"destroy",value:function(){var e=this;this.processDebounced.cancel(),this.addDebounced.cancel(),this.emit=null,this.removeEvents(),Aa(this.pTextTracks,function(t){return e.cleanupTrack(t)}),Aa(this.video.querySelectorAll("track"),function(t){return e.video.removeChild(t)})}},{key:"clearCue",value:function(){Jn(this.currentTextTrack,this.video.currentTime)}},{key:"cleanupTrack",value:function(e){if(this.isTextTrack(e.kind)){ka(e.cues,t),ka(e.activeCues,t),e.expired=!0,e.textTrack1=!0,e.textTrack2=!0,e.isTTML=!0,e.isEmbedded=!1;try{e.mode="disabled"}catch(e){}}function t(t){try{t&&e.removeCue(t)}catch(e){}}}},{key:"textTrackMode",set:function(e){this.currentTextTrack?this.setTrackMode(e):this.logger.log("warn","No text track detected")}},{key:"textTrack",get:function(){return this.currentTextTrack},set:function(e){var t=this;this.isValidTrack(e)&&e!==this.currentTextTrack&&(this.currentTextTrack&&"disabled"!==this.currentTextTrack.mode&&(this.currentTextTrack.mode="disabled"),this.currentTextTrack=e,this.setTrackMode(this.currentTextTrackMode).then(function(){t.logger.log("info","".concat(e.language," is being set as the current text track")),t.emit("textTrackChange",e)}))}},{key:"textTracks",get:function(){var e=this;return Array.from(this.pTextTracks).filter(function(t){return e.isValidTrack(t)})}},{key:"forcedLanguage",get:function(){return this.pForcedLanguage},set:function(e){this.pForcedLanguage=e,this.updateForcedNarrative()}},{key:"setTrackMode",value:function(e){var t=this;return new Promise(function(i,n){var a=e!==t.currentTextTrackMode,r=function(){t.currentTextTrack.mode=e,t.updateForcedNarrative(),a&&setTimeout(function(){return t.emit("textTrackModeChange",{mode:e})},0);var n="disabled";"hidden"===e&&(n="enabled for event driven external custom rendering"),"showing"===e&&(n="enabled for native rendering by the user agent"),t.logger.log("info","The ".concat(t.currentTextTrack.kind," track for language code ").concat(t.currentTextTrack.language," is being ").concat(n," ")),i()};t.currentTextTrackMode=e,"showing"===e&&"disabled"===t.currentTextTrack.mode?(t.currentTextTrack.mode="hidden",setTimeout(r,10)):r()})}},{key:"updateForcedNarrative",value:function(){var e=this,t=Array.from(this.pTextTracks).filter(function(e){return"forced"===e.kind});if(t.forEach(function(e){return e.mode="disabled"}),"disabled"===this.currentTextTrackMode){var i=t.find(function(t){return t.language===e.pForcedLanguage});i&&(i.addEventListener("cuechange",this.onCueChange),i.mode=this.config.textTrackSettings.enabledMode)}}},{key:"addTrack",value:function(e){this.addedTracks.includes(e)||(this.addedTracks.push(e),this.isValidTrack(e)&&(e.addEventListener("cuechange",this.onCueChange),this.logger.log("info","A ".concat(e.kind," text track was added for ").concat(e.language)),this.emit("textTrackAdded",e)))}},{key:"addEvents",value:function(){this.pTextTracks.addEventListener("addtrack",this.onTextTrackAdded),this.pTextTracks.addEventListener("change",this.onTextTrackChange),this.video.addEventListener("addtrack",this.onVideoTextTrackAdded),this.video.addEventListener("seeked",this.onVideoSeeked)}},{key:"removeEvents",value:function(){var e=this;this.pTextTracks.removeEventListener("addtrack",this.onTextTrackAdded),this.pTextTracks.removeEventListener("change",this.onTextTrackChange),this.video.removeEventListener("addtrack",this.onVideoTextTrackAdded),this.video.removeEventListener("seeked",this.onVideoSeeked),Aa(this.pTextTracks,function(t){return t.removeEventListener("cuechange",e.onCueChange)})}},{key:"isDuplicateTrack",value:function(e){if(this.existingTrack.includes(e))return!1;var t=this.existingTrack.some(function(t){return e.language===t.language&&e.label===t.label&&e.kind===t.kind});return t||this.existingTrack.push(e),t}},{key:"isTextTrack",value:function(e){return"captions"===e||"subtitles"===e}},{key:"isExpired",value:function(e){return e.expired}},{key:"isValidTrack",value:function(e){return!(!e||!this.isTextTrack(e.kind)||this.ignoreBlankTracks&&!e.label&&!e.language||this.isExpired(e))}}]),e}(),Oa=function(){function e(t,i){(0,at.default)(this,e),this.waiting=!1,this.time=NaN,this.next=null,this.video=t.video,this.onWaitingChange=i,this.onWaiting=this.onWaiting.bind(this),this.onSeeking=this.onSeeking.bind(this),this.onUpdateTime=this.onUpdateTime.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.video.addEventListener("waiting",this.onWaiting),this.video.addEventListener("seeking",this.onSeeking),this.video.addEventListener("error",this.onError)}return(0,nt.default)(e,[{key:"clearUpdate",value:function(){this.video.removeEventListener("timeupdate",this.onUpdateTime)}},{key:"destroy",value:function(){var e=this.video;this.onWaitingChange=null,e.removeEventListener("waiting",this.onWaiting),e.removeEventListener("seeking",this.onSeeking),e.removeEventListener("timeupdate",this.onTimeUpdate),e.removeEventListener("error",this.onError),this.clearUpdate()}},{key:"setWaiting",value:function(e){var t;this.waiting=e,null==(t=this.onWaitingChange)||t.call(this,e),e&&this.video.addEventListener("timeupdate",this.onUpdateTime)}},{key:"onWaiting",value:function(){this.waiting||this.video.seeking||this.setWaiting(!0)}},{key:"onSeeking",value:function(){this.setWaiting(!0)}},{key:"onUpdateTime",value:function(){this.clearUpdate(),this.video.paused?this.setWaiting(!1):(this.time=this.video.currentTime,this.video.addEventListener("timeupdate",this.onTimeUpdate))}},{key:"onTimeUpdate",value:function(){this.time<this.video.currentTime&&(this.setWaiting(!1),this.time=NaN,this.video.removeEventListener("timeupdate",this.onTimeUpdate))}},{key:"onError",value:function(){this.waiting&&this.setWaiting(!1)}}]),e}(),Ba=function(){function e(t){var i,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,at.default)(this,e),this.metadataLoaded=!1,this.suppressErrors=!1,this.segmentDuration=6,this.pauseTime=NaN,this.eventsEnabled=!1,this.startedPlaying=!1,this.liveStreamInfo={isPlayingLive:!1,liveEdgeOffset:NaN,dvrWindowSize:NaN,relativeTime:NaN,relativeDuration:NaN,absoluteStart:NaN,absoluteTime:NaN,absoluteDuration:NaN},this.lastKnownTimes={absolute:NaN,relative:NaN,end:NaN},this.audioTrack=null,this.audioTracks=[],this.quality=null,this.qualities=null,this.textTrack=null,this.textTracks=[],this.minBitrate=0,this.maxBitrate=1/0,this.maxHeight=1/0,this.onVideoEvent=function(e){if(n.eventsEnabled){var t=n.delegate;if("loadedmetadata"===e.type&&(n.metadataLoaded=!0),n.metadataLoaded||"durationchange"===e.type)switch(e.type){case"timeupdate":t.timeUpdate();break;case"playing":n.startedPlaying=!0,t.playing();break;case"pause":n.metadataLoaded&&t.paused();break;case"seeking":t.seeking();break;case"seeked":t.seeked();break;case"ended":t.ended();break;case"durationchange":t.durationChange();break;case"volumechange":t.volumeChange(n.video.volume,n.video.muted);break;case"error":n.suppressErrors||n.error(n.createVideoElementError())}}},this.onTextEvent=function(e,t){if(n.eventsEnabled){var i=n.delegate;switch(e){case"textCuepoint":i.textCuepoints(t.activeCues,t.forced);break;case"textTrackModeChange":i.textTrackDisplayModeChange(t.mode);break;case"textTrackAdded":n.textTracks.push({id:n.textTracks.length.toString(),kind:t.kind,language:t.language,label:t.label||t.language}),i.textTracksChange(n.textTracks);break;case"textTrackAvailable":i.textTracksChange(n.textTracks);break;case"textTrackChange":var a=n.textTracks.find(function(e){return t.language===e.language&&t.kind===e.kind&&(t.label===e.label||t.language===e.label)});n.textTrack=a,i.textTrackChange(a)}}},this.context=t,this.options=a,this.video=t.video,this.delegate=this.context.getDelegate(),this.logger=t.logger,this.metadataSurface=this.createMetadataSurface(),this.waitingSurface=this.createWaitingSurface();var o=null==(i=this.context.resource.playback)?void 0:i.abr;o&&(o.maxBitrate&&(this.maxBitrate=o.maxBitrate),o.minBitrate&&(this.minBitrate=o.minBitrate),o.maxHeight&&(this.maxHeight=o.maxHeight)),r&&(this.textTrackSurface=this.createTextTrackSurface()),Vi(fa).forEach(function(e){return n.video.addEventListener(e,n.onVideoEvent)}),this.onCueChange=this.onCueChange.bind(this)}return(0,nt.default)(e,[{key:"destroy",value:function(){var e,t,i,n=this;return Vi(fa).forEach(function(e){return n.video.removeEventListener(e,n.onVideoEvent)}),this.listenToTextTracks(!1,!0),null==(e=this.metadataSurface)||e.destroy(),this.metadataSurface=null,null==(t=this.textTrackSurface)||t.destroy(),this.textTrackSurface=null,null==(i=this.waitingSurface)||i.destroy(),this.waitingSurface=null,this.context=null,this.options=null,this.delegate=null,this.logger=null,this.video=null,Promise.resolve()}},{key:"getIsLiveStream",value:function(){return this.video.duration===1/0}},{key:"setAutoQualitySwitching",value:function(e){throw new Error("setAutoQualitySwitching Method not implemented.")}},{key:"setQuality",value:function(e){throw new Error("setQuality Method not implemented.")}},{key:"setMinBitrate",value:function(e){this.minBitrate=e}},{key:"setMaxBitrate",value:function(e){this.maxBitrate=e}},{key:"setTextTrack",value:function(e){if(this.textTrackSurface){var t=Array.from(this.video.textTracks).find(function(t){return e.language===t.language&&e.kind===t.kind&&e.label===t.label});this.textTrackSurface.textTrack=t}}},{key:"setTextTrackMode",value:function(e){this.textTrackSurface&&(this.textTrackSurface.textTrackMode=e)}},{key:"setAudioTrack",value:function(e){throw new Error("setAudioTrack Method not implemented.")}},{key:"getId",value:function(){throw new Error("getId Method not implemented.")}},{key:"getCurrentTime",value:function(){return this.video.currentTime}},{key:"getDuration",value:function(){return this.video.duration}},{key:"getBuffered",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.video.buffered,i=[],n=e?0:this.getSeekable().start,a=0,r=t.length;a<r;a++)i.push({startTime:t.start(a)-n,endTime:t.end(a)-n});return i}},{key:"getLiveStreamInfo",value:function(){var e=this.liveStreamInfo,t=this.getSeekable(),i=t.start,n=t.end,a=this.video.currentTime,r=n-i,o=this.getLiveEdgeOffset(),s=Math.max(a-i,0);e.relativeTime=s,e.relativeDuration=r,e.absoluteDuration=Date.now(),e.dvrWindowSize=Math.floor(r),e.liveEdgeOffset=o,e.isPlayingLive=Math.ceil(a)>=this.calculateLiveBoundary(n),n!==this.lastKnownTimes.end&&(this.lastKnownTimes.end=n,e.absoluteStart=e.absoluteDuration-1e3*r,this.lastKnownTimes.absolute=Math.round(e.absoluteStart+1e3*e.relativeTime),this.lastKnownTimes.relative=a);var l=Math.round(1e3*(a-this.lastKnownTimes.relative));return e.absoluteTime=this.lastKnownTimes.absolute+l,e}},{key:"getThumbnails",value:function(e){return Promise.resolve([])}},{key:"load",value:function(){return this.enableSurfaceEvents(!0),this.suppressErrors=!0,Promise.resolve(pn(this.context.resource))}},{key:"play",value:function(){var e=this;return Promise.resolve().then(function(){return!isNaN(e.pauseTime)&&(e.pauseTime=NaN,e.pauseTime<e.liveStreamInfo.absoluteStart)?(e.logger.log("info","Playhead outside of DVR window bounds. Moving to start of DVR window."),e.seek(0)):e.getIsLiveStream()?e.seek(e.liveStreamInfo.relativeTime):void 0}).then(function(){return e.video.play()})}},{key:"pause",value:function(){var e;this.getIsLiveStream()&&!0===(null==(e=this.context.resource.overrides)?void 0:e.clearOutOfBoundsDvrBuffer)&&(this.pauseTime=this.liveStreamInfo.absoluteTime),this.video.pause()}},{key:"suspend",value:function(){}},{key:"resume",value:function(){}},{key:"seek",value:function(e){var t=this.getSeekable(),i=t.start,n=t.end,a=n-i;if(this.getIsLiveStream()){var r=this.getNoSeekRange(n),o=r.startTime,s=r.endTime;Bi(e,o,s)&&(e=e<this.liveStreamInfo.relativeTime?o:s),e=Oi(e,this.getLiveEdgeOffset(),s)}var l=Ui(e,0,a,i,n);return ca(l)?(this.video.currentTime=l,Ii(this.video,"seeked")):Promise.resolve()}},{key:"resize",value:function(){}},{key:"clearText",value:function(){var e;null==(e=this.textTrackSurface)||e.clearCue()}},{key:"getMetrics",value:function(){var e=this.video,t={bandwidth:NaN,framerate:NaN,droppedVideoFrames:Number.NaN,totalVideoFrames:Number.NaN};"getVideoPlaybackQuality"in e?Object.assign(t,e.getVideoPlaybackQuality()):"webkitDroppedFrameCount"in e&&"webkitDecodedFrameCount"in e&&(t.droppedVideoFrames=e.webkitDroppedFrameCount,t.totalVideoFrames=e.webkitDroppedFrameCount+e.webkitDecodedFrameCount);var i=e.webkitDecodedFrameCount||e.mozPresentedFrames;return i&&(t.framerate=i/e.currentTime),t}},{key:"getLiveEdgeOffset",value:function(){var e=this.getSegmentDuration(),t=this.context.resource.playback.liveEdgeSyncFragmentCount;return Math.max(e,e*t)}},{key:"getRefreshInterval",value:function(){return 2*this.getSegmentDuration()}},{key:"calculateLiveBoundary",value:function(e){return e-this.getLiveEdgeOffset()-this.getRefreshInterval()}},{key:"getNoSeekRange",value:function(e){var t=this.calculateLiveBoundary(e),i=this.getRefreshInterval();return{startTime:t-i,endTime:t+i}}},{key:"createMetadataSurface",value:function(){return new La(this.context,this.delegate.metadataCuepoint)}},{key:"createTextTrackSurface",value:function(){return new Da(this.context,this.onTextEvent)}},{key:"createWaitingSurface",value:function(){return new Oa(this.context,this.delegate.waitingChange)}},{key:"enableSurfaceEvents",value:function(e){this.eventsEnabled=!0}},{key:"addEvents",value:function(e,t){var i=Ft(e.on)?"on":"addEventListener";Hi(t).forEach(function(t){return e[i](t[0],t[1])})}},{key:"removeEvents",value:function(e,t){var i=Ft(e.off)?"off":"removeEventListener";Hi(t).forEach(function(t){var n,a;null==(a=(n=t[1]).cancel)||a.call(n),e[i](t[0],t[1])})}},{key:"createVideoElementError",value:function(){var e=this.video.error,t=Object.keys(MediaError)[e.code-1]||wi.messages.UNSPECIFIED_ERROR,i="3400";switch(e.code){case MediaError.MEDIA_ERR_ABORTED:t=e.toString(),i="3100";break;case MediaError.MEDIA_ERR_NETWORK:i="3001";break;case MediaError.MEDIA_ERR_DECODE:i="3200";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:i="3101";break;default:i="3400"}return{code:i,message:t,data:e,fatal:!0}}},{key:"getSegmentDuration",value:function(){return this.segmentDuration}},{key:"getSeekable",value:function(){var e={start:0,end:0},t=this.video.seekable,i=t.length-1;return i>=0&&(e.start=t.start(i),e.end=t.end(i)),e}},{key:"getErrorMessage",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n/a";return"".concat(e," fatal: ").concat(t," retry: ").concat(i)}},{key:"createError",value:function(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Ai(e,t,i,n)}},{key:"throwError",value:function(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.error(this.createError(e,t,i,n))}},{key:"error",value:function(e){this.delegate.error(e)}},{key:"createSidecarTextTrack",value:function(){var e,t=this.context,i=t.resource,n=t.video;(null==(e=i.location)?void 0:e.textTrackUrl)&&ra(i,n)}},{key:"updateQualities",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.qualities;if(t){t.sort(function(e,t){return e.bitrate-t.bitrate});var i=this.context.resource.playback.abr.capQualityToScreenSize&&this.video.getBoundingClientRect();t.forEach(function(t){t.enabled=an(t,e.minBitrate,e.maxBitrate,e.maxHeight,i)}),t.some(function(e){return e.enabled})||this.logger.warn("Invalid qualities array. None of the values meet the current size/bitrate constraints."),this.delegate.qualitiesChange(t)}}},{key:"listenToTextTracks",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?"addEventListener":"removeEventListener";Array.from(this.context.video.textTracks).forEach(function(e){na(e.kind)&&(e[n]("cuechange",t.onCueChange),i&&ea(e))})}},{key:"onCueChange",value:function(e,t){var i=e.target,n=ta(i,this.video.currentTime),a=!0===e.target.forced;null!=t||(t="forced"===i.kind||e.forced||a),this.delegate.textCuepoints(n,t)}}],[{key:"canPlay",value:function(e,t){var i=e.avia,n=e.resource,a=i.getSystemInfo(),r=fn(n),o=t.includes(r);return a.hasMediaSource&&o}}]),e}(),Ua=(0,nt.default)(function e(t,i,n){(0,at.default)(this,e),this.key=t,this.value=i,this.type=n,this.timeStamp=Date.now()}),Fa=Object.freeze({env:"__ENV__",playerVersion:"2.21.1",playerName:"@cbsinteractive/avia-js",buildTime:"2023-10-09T19:21:03.624Z"}),Va=function(e){return e.ENTER_FULLSCREEN="enterFullScreen",e.INCREASE_VOLUME="increaseVolume",e.DECREASE_VOLUME="decreaseVolume",e.SEEK_BACK="seekBack",e.SEEK_FORWARD="seekForward",e.TOGGLE_PLAY="togglePlay",e.TOGGLE_TT="toggleTextTrack",e.TOGGLE_MUTE="toggleMute",e.PLAYLIST_NEXT="playListNext",e.PLAYLIST_PREV="playListPrev",e.STOP="stop",e}(Va||{}),Ha=function(e){return e.ACTIVE="active",e.INACTIVE="inactive",e.IDLE="idle",e}(Ha||{}),Wa=function(e){return e.PRE="PRE",e.MID="MID",e.POST="POST",e}(Wa||{}),ja=function(e){return e.SSAI="ssai",e.CSAI="csai",e}(ja||{}),$a=function(e){return e.AD="ad",e.PLAYBACK="playback",e}($a||{}),Ka=function(e){return e.PLAY="play",e.PAUSE="pause",e.SEEK="seek",e.GO_LIVE="go_live",e}(Ka||{}),Ga=function(e){return e.MAIN="main",e.DESCRIPTION="description",e}(Ga||{}),qa=function(e){return e.NONE="none",e.ATTEMPT_MUTED="attemptMuted",e.ATTEMPT_UNMUTED="attemptUnmuted",e.ATTEMPT_UNMUTED_THEN_MUTED="attemptUnmutedThenMuted",e}(qa||{}),za=function(e){return e.UNKNOWN="unknown",e.DETECTED="detected",e.INFERRED="inferred",e}(za||{}),Ya=function(e){return e.SW_SECURE_CRYPTO="SW_SECURE_CRYPTO",e.SW_SECURE_DECODE="SW_SECURE_DECODE",e.HW_SECURE_CRYPTO="HW_SECURE_CRYPTO",e.HW_SECURE_DECODE="HW_SECURE_DECODE",e.HW_SECURE_ALL="HW_SECURE_ALL",e.UNKNOWN="unknown",e}(Ya||{}),Qa=function(e){return e.USABLE="usable",e.OUTPUT_RESTRICTED="output-restricted",e.UNKNOWN="unknown",e}(Qa||{}),Xa=function(e){return e.MULTI_CDN="x-cdn",e}(Xa||{}),Za=function(e){return e.HOTKEY_ACTION="hotkeyaction",e.READY="ready",e.AD_SKIPPABLE_STATE_CHANGE="adskippablestatechange",e.AD_CUEPOINTS_AVAILABLE="adcuepointsavailable",e.AD_BREAK_START="adbreakstart",e.AD_BREAK_METADATA="adbreakmetadata",e.AD_BREAK_COMPLETE="adbreakcomplete",e.AD_START="adstart",e.AD_COMPLETE="adcomplete",e.AD_FIRST_QUARTILE="adfirstquartile",e.AD_MIDPOINT="admidpoint",e.AD_THIRD_QUARTILE="adthirdquartile",e.AD_SEGMENT_START="adsegmentstart",e.AD_SEGMENT_END="adsegmentend",e.AD_SEGMENT_REENTERED="adsegmentreentered",e.AD_SKIPPED="adskipped",e.AD_PROGRESS="adprogress",e.AD_PAUSED="adpaused",e.AD_PLAYING="adplaying",e.AD_STALLED="adstalled",e.AD_BREAK_DISCARDED="adbreakdiscarded",e.AD_CLICK="adclick",e.AUDIO_TRACK_INFO_CHANGE="audiotrackinfochange",e.AUDIO_TRACK_CHANGE="audiotrackchange",e.AUDIO_TRACKS_CHANGE="audiotrackschange",e.QUALITY_CHANGE="qualitychange",e.QUALITIES_CHANGE="qualitieschange",e.QUALITY_INFO_CHANGE="qualityinfochange",e.CDN_CHANGE="cdnchange",e.CLOCK="aviaclock",e.CONTENT_START="contentstart",e.CONTENT_DURATION_AVAILABLE="contentdurationavailable",e.CONTENT_SEGMENT_START="contentsegmentstart",e.CONTENT_PLAYING="contentplaying",e.CONTENT_PROGRESS="contentprogress",e.CONTENT_PAUSED="contentpaused",e.CONTENT_SEGMENT_END="contentsegmentend",e.CONTENT_COMPLETE="contentcomplete",e.CONTENT_IS_PLAYING_LIVE="contentisplayinglive",e.STREAM_TYPE_CHANGE="streamtypechange",e.STREAM_METADATA="streammetadata",e.STREAM_ID_AVAILABLE="streamidavailable",e.DRM_KEY_SYSTEM_CREATED="drmkeysystemcreated",e.ERROR="error",e.PLAYBACK_STARTED="playbackstarted",e.PLAYBACK_SUSPENDED="playbacksuspended",e.PLAYBACK_RESUMED="playbackresumed",e.RESOURCE_START="resourcestart",e.RESOURCE_END="resourceend",e.RESOURCE_BUFFERING="resourcebuffering",e.WAITING_CHANGE="waitingchange",e.SEEK_COMPLETE="seekcomplete",e.SEEK_START="seekstart",e.SEEK_REDIRECT_START="seekredirectstart",e.SEEK_REDIRECT_COMPLETE="seekredirectcomplete",e.METADATA_CUEPOINT="metadatacuepoint",e.TEXT_CUEPOINT="textcuepoint",e.TEXT_TRACK_CHANGE="texttrackchange",e.TEXT_TRACKS_CHANGE="texttrackschange",e.TEXT_TRACK_INFO_CHANGE="texttrackinfochange",e.TEXT_TRACK_ENABLED_CHANGE="texttrackenabledchange",e.TEXT_TRACK_AVAILABLE="texttrackavailable",e.THUMBNAIL_TRACK_AVAILABLE="thumbnailtrackavailable",e.LIVE_PRESENTATION_STOPPED="livepresentationstopped",e.PRESENTATION_SIZE_CHANGE="presentationsizechange",e.FULLSCREEN_CHANGE="fullscreenchange",e.LOG_EVENT="logevent",e.PLUGIN_EVENT="pluginevent",e.LANGUAGE_CHANGE="languagechange",e.AUTOPLAY_BLOCKED="autoplayblocked",e.VOLUME_CHANGE="volumechange",e.MUTE_CHANGE="mutechange",e.ACTIVE_STATE_CHANGE="activestatechange",e.PLAYBACK_STATE_CHANGE="playbackstatechange",e.METRIC="metric",e.VIDEO_ELEMENT_ADDED="videoelementadded",e.VIDEO_ELEMENT_REMOVED="videoelementremoved",e}(Za||{}),Ja=["audiotrackinfochange","texttrackinfochange","qualityinfochange"],er=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"warn",value:function(e){ci.deprecated(e)}},{key:"checkEventName",value:function(t){Ja.includes(t)&&e.warn("The ".concat(t," event has been deprecated. This check will be removed July 1st, 2023"))}},{key:"hookType",value:function(){e.warn("The HookType enum is deprecated in favor of PlayerHookType and will be removed after July 1st, 2023")}},{key:"qualityInfo",value:function(){e.warn("player.qualityInfo method is deprecated. Please use player.qualities instead. Access to this property will be completely removed July 1st, 2023")}},{key:"textTrackInfo",value:function(){e.warn("player.textTrackInfo method is deprecated. Please use player.textTracks instead. Access to this property will be completely removed July 1st, 2023")}},{key:"audioTrackInfo",value:function(){e.warn("player.audioTrackInfo method is deprecated. Please use player.audioTracks instead. Access to this property will be completely removed July 1st, 2023")}},{key:"language",value:function(){e.warn("player.language setter is deprecated. Please use player.selectAudioLanguage, player.selectTextLanguage, or player.selectLocalizationLanguage instead. Access to this property will be completely removed July 1st, 2023")}},{key:"getThumbnail",value:function(){e.warn("getThumbnail is deprecated. Please use player.getThumbnails instead. Access to this property will be completely removed July 1st, 2023")}},{key:"info",value:function(){e.warn("The info property of the metadata cuepoint event is deprecated. Please use the id and text properties instead. Access to the info property will be removed July 1st, 2024.")}},{key:"registerPlugins",value:function(){e.warn("The callback argument of the registerPlugins function is deprecated. Please use the promise returned by registerPlugins instead. Access to the info property will be removed July 1st, 2024.")}}]),e}(),tr=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"EVENT",get:function(){return er.hookType(),"event"}},{key:"AD_BREAK",get:function(){return er.hookType(),"adbreak"}},{key:"AD",get:function(){return er.hookType(),"ad"}},{key:"ATTACH_RESOURCE",get:function(){return er.hookType(),"attachresource"}},{key:"REQUEST",get:function(){return er.hookType(),"request"}},{key:"RESPONSE",get:function(){return er.hookType(),"response"}}]),e}(),ir="html5",nr=function(e){return e.NONE="none",e.DOCUMENT="document",e.PLAYER="player",e}(nr||{}),ar=function(e){return e.MEDIA_PLAYER="media-player",e.LEARN_MORE="learn-more",e}(ar||{}),rr=function(e){return e.EN="English",e.ES="Español",e.FR="Français",e.PT="Português",e.DE="Deutsche",e.PL="Polski",e.JA="日本人",e.KO="한국어",e.ZH="简体中文",e.IT="Italiano",e.RU="Русский",e}(rr||{}),or=function(e){return e.API="api",e.UI="ui",e.MARK="mark",e.MEASURE="measure",e}(or||{}),sr=function(e){return e.AUTO="auto",e.DESKTOP="desktop",e.MOBILE="mobile",e.TV="tv",e.LOW="low",e}(sr||{}),lr=function(e){return e.IDLE="idle",e.STOPPED="stopped",e.PLAYING="playing",e.PAUSED="paused",e.WAITING="waiting",e}(lr||{}),ur=function(e){return e.LOW="low",e.HIGH="high",e}(ur||{}),cr=function(e){return e[e.DEFINITION=0]="DEFINITION",e[e.HEIGHT=1]="HEIGHT",e[e.BITRATE=2]="BITRATE",e[e.CUSTOM=3]="CUSTOM",e}(cr||{}),dr=function(e){return e.AUTO="auto",e.MANUAL="manual",e.UNAVAILABLE="unavailable",e}(dr||{}),hr=function(e){return e.MANIFEST="manifest",e.SEGMENT="segment",e.KEY="key",e.OTHER="other",e}(hr||{}),fr=function(e){return e.VOD="VOD",e.LIVE="LIVE",e.DVR="DVR",e}(fr||{}),pr=function(e){return e.SEEK_BY="seek_by",e}(pr||{}),vr=function(e){return e.HLS="hls",e.DASH="dash",e.MP4="mp4",e.UNKNOWN="unknown",e}(vr||{}),gr=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,at.default)(this,i),(n=t.call(this,"9000",e,null,!1,"API")).name="InvalidArgumentError",n}return(0,nt.default)(i)}(Ai),mr=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n,a,r){var o;return(0,at.default)(this,i),(o=t.call(this,e,n,r,!0,"Plugin")).name="PluginError",o.config=a,o}return(0,nt.default)(i)}(Ai),yr=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"parseCaption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.trim().split("\n"),a=/([0-9:.]+)\s*-->\s*([0-9:.]+)([^\n]*)/;try{a.test(n[0])||(t=parseInt(n.shift()));var r=n[0].match(a).slice(1),o=r[2],s=ni(r[0]),l=ni(r[1]),u=n.slice(1).join("\n");return null!=o&&o.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-%]+)/g,function(e,t,n){return i[t]=n}),St({id:t,startTime:s,endTime:l,text:u},i)}catch(e){return null}}},{key:"parse",value:function(e){var t=this,i=(e=e.replace(/\r/g,"")).split("\n\n"),n=/^(WEBVTT|NOTE|STYLE)/;return i.reduce(function(e,i){if(!n.test(i)&&i){var a=t.parseCaption(i,e.length);a&&e.push(a)}return e},[])}}]),e}();function Ar(e,t){(null==e?void 0:e.style)&&(null==t?void 0:t.style)&&Object.assign(t.style,e.style)}var kr=function(){function e(t,i){(0,at.default)(this,e),this.url=t,this.cues=i}return(0,nt.default)(e,[{key:"getCueAt",value:function(e){return this.cues.find(function(t){return t.startTime<=e&&t.endTime>=e})}},{key:"renderCueAt",value:function(e,t){Ar(this.getCueAt(e),t)}}],[{key:"create",value:function(t,i){var n=document.createElement("a");n.href=t;var a=n.protocol+"//"+n.hostname,r=a+n.pathname.split("/").slice(0,-1).join("/")+"/";return i.applyHook("request",{url:t},{objectType:"other"}).then(function(e){return Tn(e)}).then(function(e){return i.applyHook("response",{url:t,data:e})}).then(function(e){return e.data}).then(function(i){var n=yr.parse(i);return n.forEach(function(e){var t=e.text.split("#"),i=(0,Ze.default)(t,2),n=i[0],o=i[1],s=n;/^(https?:)?\/\//.test(s)||(s=/^\//.test(s)?a+s:r+s);var l=o.split("="),u=l[0],c=l[1].split(","),d={backgroundImage:"url(".concat(s,")")},h={url:s};Aa(u,function(e,t){var i=c[t];switch(e){case"w":h.width=parseInt(i),d.width="".concat(i,"px");break;case"h":h.height=parseInt(i),d.height="".concat(i,"px");break;case"x":h.x=parseInt(i),d.backgroundPositionX="-".concat(i,"px");break;case"y":h.y=parseInt(i),d.backgroundPositionY="-".concat(i,"px")}}),e.style=d,e.data=h}),new e(t,n)})}}]),e}(),br={};xt(br,{applyRequestToXhr:function(){return Tr},createRequest:function(){return Sr},getHeader:function(){return wr},loadScript:function(){return xr},makeUrl:function(){return Cr}});var Er=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;(0,at.default)(this,i);var a=Object.assign({timeout:An.TIMEOUT},e||{});a.timeout||(a.timeout=An.TIMEOUT),(n=t.call(this,a)).timeoutHandles={},n.map={};var r=n.hasListenerFor(i.event.COMPLETE);if(n.opts.url&&r)n.loadScript(n.opts.url);else{if(!n.opts.urls||!r)throw new Error("Script load error: Missing url or listener. url: ".concat(n.opts.url||n.opts.urls,", hasListener: ").concat(r));n.loadScripts(n.opts.urls)}return n}return(0,nt.default)(i,[{key:"destroy",value:function(){if(this.timeoutHandles){for(var e in this.timeoutHandles)clearTimeout(this.timeoutHandles[e]);this.timeoutHandles=null,(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this)}}},{key:"loadScript",value:function(e,t){var n=this,a=document.createElement("script"),r="https:"===window.location.protocol?e.replace("http:","https:"):e;this.map[r]={hLoad:function(){return n.hLoadOrError(r)},hError:function(){return n.hLoadOrError(r,!0,!1)},scriptEl:a};var o=this.map[r];t&&this.on(i.event.COMPLETE,t),a.async=!0,a.addEventListener("load",o.hLoad),a.addEventListener("error",o.hError),this.timeoutHandles[r]=setTimeout(function(){return n.hLoadOrError(r,!0,!0)},this.opts.timeout),document.head.appendChild(a),a.src=r}},{key:"loadScripts",value:function(e,t){t&&this.on(i.event.COMPLETE,t);for(var n=0,a=e.length;n<a;n++)this.loadScript(e[n])}},{key:"hLoadOrError",value:function(e,t,n){var a=this;clearTimeout(this.timeoutHandles[e]),delete this.timeoutHandles[e];var r=this.map[e];for(var o in r.scriptEl.removeEventListener("load",r.hLoad),r.scriptEl.removeEventListener("error",r.hError),r)delete r[o];delete this.map[e],t&&this.shouldRetry()?(this.incrementAttempts(),setTimeout(function(){a.loadScript(e)},this.retryInterval)):this.emit(i.event.COMPLETE,{url:e,error:t,timedOut:!0===n})}}],[{key:"load",value:function(e){return new Promise(function(t,n){e.onComplete=function(e){var i=e.detail;return i.error||i.timedOut?n(i):t(i)},new i(e)})}}]),i}(En);function Sr(e){return{url:e,headers:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},credentials:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"same-origin"}}function Tr(e,t){Hi(e.headers).forEach(function(e){var i=(0,Ze.default)(e,2),n=i[0],a=i[1];t.setRequestHeader(n,a)}),t.withCredentials="include"===e.credentials}function wr(e,t){var i;if(!e||!t)return null;var n=new RegExp("".concat(e,":([^\\n\\r]+)"),"i");return null==(i=t.match(n))?void 0:i[1].trim()}function xr(e,t,i){return It(this,null,ze.default.mark(function n(){var a,r,o,s,l,u;return ze.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=(a=t||{}).overrides,o=a.networkTimeout,s=Zn.appNamespace,n.next=4,Er.load({url:Cr(e.url),timeout:(null==r?void 0:r.streamingLibLoaderTimeout)||o,errorRecovery:Ki({},null==t?void 0:t.networkErrorRecovery,e.errorRecovery)});case 4:return l=i&&i()?i():{},u={url:e.url},n.abrupt("return",s.applyHook(s.AviaHookType.SCRIPT_LOAD,l,u));case 7:case"end":return n.stop()}},n)}))}function Cr(e){var t=new URL(e,window.location.toString());return(Zn.isWebOs||"file:"===t.protocol&&/^\/\//.test(e))&&(t.protocol="https:"),t.toString()}Er.event={COMPLETE:"complete"};var _r={};function Pr(e,t){(null==e?void 0:e.style)&&(null==t?void 0:t.style)&&Object.assign(t.style,e.style)}function Ir(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r={};return e&&(r.backgroundImage="url(".concat(e,")")),t&&(r.width="".concat(t,"px")),i&&(r.height="".concat(i,"px")),0!==n&&(r.backgroundPositionX="-".concat(n,"px")),0!==a&&(r.backgroundPositionY="-".concat(a,"px")),r}xt(_r,{createThumbnailStyles:function(){return Ir},renderThumbnail:function(){return Pr}});var Nr=St(St(St(St(St(St(Tt(St(St(St(St(St(St(St(Tt(St({},ga),{eventsToPromise:Mi}),ln),Ma),jn),br),Ri),Fi),Gi),{request:Tn}),sn),Ot),_r),vn),Bt),la),Lr=function(e){return e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_REC="com.microsoft.playready.recommendation",e.CLEAR_KEY="org.w3.clearkey",e.FAIRPLAY_1_0="com.apple.fps.1_0",e}(Lr||{}),Mr=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;return(0,at.default)(this,i),(e=t.call(this,{})).timer=NaN,e.pCount=0,e.pInterval=n,e}return(0,nt.default)(i,[{key:"destroy",value:function(){this.stop(),(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this)}},{key:"start",value:function(){var e=this;this.running||(this.timer=setInterval(function(){e.pCount++,e.emit(i.TIC_EVENT,{count:e.pCount})},this.pInterval))}},{key:"stop",value:function(){clearInterval(this.timer),this.timer=NaN,this.pCount=0}},{key:"running",get:function(){return!isNaN(this.timer)}},{key:"interval",get:function(){return this.pInterval}},{key:"count",get:function(){return this.pCount}}]),i}(li),Rr=Mr;Rr.TICK="tic",Rr.TIC_EVENT=Mr.TICK;var Dr=(0,nt.default)(function e(){(0,at.default)(this,e)}),Or=function(){function e(t){(0,at.default)(this,e),e.serviceContainerMap[t]?ci.error(Dr.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","ServiceContainer")):(this.multiCoreKey=t,this.serviceMap={})}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.serviceMap)this.removeService(e);this.serviceMap=null}},{key:"registerService",value:function(e){this.serviceMap[e.name]=e,e.onRegister(this.multiCoreKey)}},{key:"retrieveService",value:function(e){return this.serviceMap[e]||null}},{key:"hasService",value:function(e){return null!=this.serviceMap[e]}},{key:"removeService",value:function(e){this.serviceMap[e]&&this.serviceMap[e].destroy(),delete this.serviceMap[e]}}],[{key:"getInstance",value:function(t){return t?(null==this.serviceContainerMap[t]&&(this.serviceContainerMap[t]=new e(t)),this.serviceContainerMap[t]):null}},{key:"removeServiceContainer",value:function(e){this.serviceContainerMap[e]&&this.serviceContainerMap[e].destroy(),delete this.serviceContainerMap[e]}}]),e}();Or.serviceContainerMap={};var Br=function(){function e(t,i){(0,at.default)(this,e),this.setNotifyMethod(t),this.setNotifyContext(i)}return(0,nt.default)(e,[{key:"destroy",value:function(){this.context=null,this.notify=null}},{key:"setNotifyMethod",value:function(e){this.notify=e}},{key:"setNotifyContext",value:function(e){this.context=e}},{key:"getNotifyMethod",value:function(){return this.notify}},{key:"getNotifyContext",value:function(){return this.context}},{key:"notifyObserver",value:function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)}},{key:"compareNotifyContext",value:function(e){return e===this.context}}]),e}(),Ur=function(){function e(t){(0,at.default)(this,e),null==e.viewMap[t]?(this.multiCoreKey=t,this.mediatorMap={},this.observerMap={},e.viewMap[this.multiCoreKey]=this,this.initializeView()):ci.error(Dr.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","View"))}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.mediatorMap)this.removeMediator(this.mediatorMap[e].name);this.mediatorMap=null,this.observerMap=null}},{key:"registerObserver",value:function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]}},{key:"notifyObservers",value:function(e){var t,i;if(null!=this.observerMap[e.name]){var n,a=this.observerMap[e.name],r=[];for(t=0,i=a.length;t<i;t++)n=a[t],r.push(n);for(t=0,i=r.length;t<i;t++)(n=r[t]).notifyObserver(e)}}},{key:"removeObserver",value:function(e,t){if(this.observerMap){for(var i=this.observerMap[e],n=i.length;n--;)if(!0===i[n].compareNotifyContext(t)){i.splice(n,1);break}0===i.length&&delete this.observerMap[e]}}},{key:"registerMediator",value:function(e){var t,i,n,a=e.name;if(!this.mediatorMap[a]){e.initializeNotifier(this.multiCoreKey),this.mediatorMap[a]=e;var r=e.listNotificationInterests();if(r.length>0)for(n=new Br(e.handleNotification,e),t=0,i=r.length;t<i;t++)this.registerObserver(r[t],n);e.onRegister()}}},{key:"retrieveMediator",value:function(e){return this.mediatorMap[e]}},{key:"removeMediator",value:function(e){var t=this.mediatorMap[e];if(t){for(var i=t.listNotificationInterests(),n=i.length;n--;)this.removeObserver(i[n],t);delete this.mediatorMap[e],t.onRemove()}}},{key:"hasMediator",value:function(e){return null!=this.mediatorMap[e]}},{key:"initializeView",value:function(){}}],[{key:"getInstance",value:function(t){return t?(this.viewMap[t]||(this.viewMap[t]=new e(t)),this.viewMap[t]):null}},{key:"removeView",value:function(e){this.viewMap[e]&&this.viewMap[e].destroy(),delete this.viewMap[e]}}]),e}();Ur.viewMap={};var Fr=function(){function e(t){(0,at.default)(this,e),e.controllerMap[t]?ci.error(Dr.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","Controller")):(this.multiCoreKey=t,e.controllerMap[this.multiCoreKey]=this,this.commandMap={},this.view=null,this.initializeController())}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.commandMap)this.removeCommand(e);this.commandMap=null,this.view=null}},{key:"initializeController",value:function(){this.view=Ur.getInstance(this.multiCoreKey)}},{key:"executeCommand",value:function(e){var t=this.commandMap[e.name];if(t){var i=new t;i.initializeNotifier(this.multiCoreKey),i.execute(e)}}},{key:"registerCommand",value:function(e,t){this.commandMap[e]||this.view.registerObserver(e,new Br(this.executeCommand,this)),this.commandMap[e]=t}},{key:"hasCommand",value:function(e){return!!this.commandMap[e]}},{key:"removeCommand",value:function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)}}],[{key:"getInstance",value:function(t){return t?(this.controllerMap[t]||(this.controllerMap[t]=new e(t)),this.controllerMap[t]):null}},{key:"removeController",value:function(e){this.controllerMap[e]&&this.controllerMap[e].destroy(),delete this.controllerMap[e]}}]),e}();Fr.controllerMap={};var Vr=function(){function e(t){(0,at.default)(this,e),this.proxyMap=null,e.modelMap[t]?ci.error(Dr.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","Model")):(this.multiCoreKey=t,e.modelMap[t]=this,this.proxyMap={},this.initializeModel())}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.proxyMap)this.removeProxy(e);this.proxyMap=null}},{key:"initializeModel",value:function(){}},{key:"registerProxy",value:function(e){this.proxyMap[e.name]=e,e.initializeNotifier(this.multiCoreKey),e.onRegister()}},{key:"retrieveProxy",value:function(e){return this.proxyMap[e]||null}},{key:"hasProxy",value:function(e){return null!=this.proxyMap[e]}},{key:"removeProxy",value:function(e){var t=this.proxyMap[e];t&&(t.onRemove(),this.proxyMap[e]=null)}}],[{key:"getInstance",value:function(t){return t?(null==this.modelMap[t]&&(this.modelMap[t]=new e(t)),this.modelMap[t]):null}},{key:"removeModel",value:function(e){this.modelMap[e]&&this.modelMap[e].destroy(),delete this.modelMap[e]}}]),e}();Vr.modelMap={};var Hr=function(){function e(t,i,n){(0,at.default)(this,e),this.pName=t,this.pBody=i,this.pType=n}return(0,nt.default)(e,[{key:"name",get:function(){return this.pName}},{key:"body",get:function(){return this.pBody}},{key:"type",get:function(){return this.pType||null}},{key:"toString",value:function(){var e="\nBody: ".concat(null==this.pBody?"null":JSON.stringify(this.body)),t="\nType: ".concat(null==this.pType?"null":this.type);return"Notification Name: ".concat(this.name+e+t)}}]),e}(),Wr=function(){function e(t,i){(0,at.default)(this,e),this.model=null,this.view=null,this.controller=null,this.serviceContainer=null,this.initialized=!1,this.multiCoreKey=t,this.initializeFacade(),this.registerCommands(i)}return(0,nt.default)(e,[{key:"destroy",value:function(){this.model=null,this.view=null,this.controller=null,this.serviceContainer=null}},{key:"key",get:function(){return this.multiCoreKey}},{key:"appId",get:function(){return this.multiCoreKey}},{key:"logger",get:function(){return this.retrieveService("Logging").logger}},{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];(t=this.logger).log.apply(t,[e].concat(n))}},{key:"registerCommand",value:function(e,t){this.controller.registerCommand(e,t)}},{key:"removeCommand",value:function(e){this.controller.removeCommand(e)}},{key:"hasCommand",value:function(e){return this.controller.hasCommand(e)}},{key:"registerProxy",value:function(e){this.model.registerProxy(e)}},{key:"retrieveProxy",value:function(e){return this.model?this.model.retrieveProxy(e):null}},{key:"removeProxy",value:function(e){this.model&&this.model.removeProxy(e)}},{key:"hasProxy",value:function(e){return this.model.hasProxy(e)}},{key:"registerMediator",value:function(e){this.view.registerMediator(e)}},{key:"retrieveMediator",value:function(e){return this.view?this.view.retrieveMediator(e):null}},{key:"removeMediator",value:function(e){this.view&&this.view.removeMediator(e)}},{key:"hasMediator",value:function(e){return this.view.hasMediator(e)}},{key:"registerService",value:function(e){this.serviceContainer.registerService(e)}},{key:"retrieveService",value:function(e){return this.serviceContainer?this.serviceContainer.retrieveService(e):null}},{key:"removeService",value:function(e){this.model&&this.serviceContainer.removeService(e)}},{key:"hasService",value:function(e){return this.serviceContainer.hasService(e)}},{key:"registerGlobalServices",value:function(e){for(var t in e)this.registerService(e[t])}},{key:"sendNotification",value:function(e,t,i){var n;n="string"==typeof t?new Hr(e,{},t):new Hr(e,t,i),this.notifyObservers(n)}},{key:"notifyObservers",value:function(e){null!=this.view&&this.view.notifyObservers(e)}},{key:"registerCommands",value:function(e){if(e)for(var t in e)e[t]&&this.registerCommand(t,e[t])}},{key:"initializeServiceContainer",value:function(){this.serviceContainer=Or.getInstance(this.multiCoreKey)}},{key:"initializeController",value:function(){this.controller=Fr.getInstance(this.multiCoreKey)}},{key:"initializeModel",value:function(){this.model=Vr.getInstance(this.multiCoreKey)}},{key:"initializeView",value:function(){this.view=Ur.getInstance(this.multiCoreKey)}},{key:"initializeFacade",value:function(){if(this.initialized)throw new Error("Unexpected Condition: Facade already initialized");this.initializeModel(),this.initializeController(),this.initializeView(),this.initializeServiceContainer(),this.initialized=!0}}],[{key:"removeCore",value:function(e){this.facadeMap[e]&&(Vr.removeModel(e),Ur.removeView(e),Fr.removeController(e),Or.removeServiceContainer(e),this.facadeMap[e].destroy(),delete this.facadeMap[e])}},{key:"hasCore",value:function(t){return null!=e.facadeMap[t]}},{key:"getInstance",value:function(e){if(!e)throw new Error(Dr.ERROR_NO_KEY);return this.facadeMap[e]}},{key:"createFacade",value:function(t,i){if(!t)throw new Error(Dr.ERROR_NO_KEY);if(this.facadeMap[t]){var n=new Error('Not creating facade - key "'.concat(t,'" already exists!'));throw n.key=t,n}return this.facadeMap[t]=new e(t,i),this.facadeMap[t]}}]),e}();Wr.facadeMap={};var jr=function(){function e(t){(0,at.default)(this,e),this.pName=t}return(0,nt.default)(e,[{key:"name",get:function(){return this.pName}},{key:"destroy",value:function(){}},{key:"onRegister",value:function(e){this.facadeKey=e}},{key:"getLogger",value:function(){return this.getService("Logging").logger}},{key:"getService",value:function(e){return Wr.getInstance(this.facadeKey).retrieveService(e)}},{key:"getModel",value:function(e){return this.getModelCollection().getModel(e)}},{key:"getModelCollection",value:function(){var e;return null==(e=Wr.getInstance(this.facadeKey))?void 0:e.retrieveProxy("ModelCollectionProxy")}}]),e}(),$r=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.call(this,"AutoplayCapabilities")).testDom=null,e.checkCompleted=!1,e.testVideoSrc=wi.blankDataUrl,e.isMobile=null,e.info={supportsUnmutedAutoplay:null,supportsMutedAutoplay:null},Zn.supportsUnrestrictedAutoplay&&(e.setInfo(!0,!0),e.checkCompleted=!0),e}return(0,nt.default)(i,[{key:"autoplayInfo",get:function(){return this.info}},{key:"destroy",value:function(){clearTimeout(this.timeout),(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this)}},{key:"detectCapabilities",value:function(e){var t=this;return this.detecting?this.detecting:(e&&(this.testVideoSrc=e),this.detecting=new Promise(function(e){t.checkCompleted?e(t.info):(t.createTestDom(),t.internalCallback=function(){return e(t.info)},t.checkUnmutedAutoplay())}))}},{key:"finishCheck",value:function(e,t){var i=this;this.setInfo(e,t),this.checkCompleted=!0,this.internalCallback(),this.timeout=setTimeout(function(){return i.cleanUp()},100)}},{key:"setInfo",value:function(e,t){this.info.supportsUnmutedAutoplay=e,this.info.supportsMutedAutoplay=t}},{key:"cleanUp",value:function(){this.testDom&&this.testDom.parentNode.removeChild(this.testDom),this.testDom=null}},{key:"checkUnmutedAutoplay",value:function(){var e=this,t=this.createVideoElement(!1);if(t){t.load();var i=t.play();void 0===i?this.isMobile?this.detectMobileCapabilities():this.finishCheck(!0,!0):i.then(function(){e.finishCheck(!0,!0)}).catch(function(t){e.checkMutedAutoplay()})}else this.finishCheck(!0,!0)}},{key:"checkMutedAutoplay",value:function(){var e=this;if(this.isEarlySafari11())this.finishCheck(!1,!1);else{var t=this.createVideoElement(!0);t.load(),t.play().then(function(){e.finishCheck(!1,!0)}).catch(function(i){if(t.error&&e.testVideoSrc!==wi.blankDataUrl)return e.testVideoSrc=wi.blankDataUrl,void e.checkUnmutedAutoplay();e.finishCheck(!1,!1)})}}},{key:"isEarlySafari11",value:function(){var e="Safari"===Zn.browser&&"Desktop"===Zn.device,t=e?Zn.browserVersionInfo.majorVersion:null,i=e?Zn.browserVersionInfo.minorVersion:null,n=11===t&&0===i,a=Zn.browserVersionInfo.versionString,r=a?a.split("."):null;return n&&(!r[2]||parseInt(r[2])<3)}},{key:"detectMobileCapabilities",value:function(){var e=this.isAutoplayEligibleAndroid()||this.isAutoplayEligibleIos();this.finishCheck(!1,e)}},{key:"isAutoplayEligibleAndroid",value:function(){return"Android"===Zn.os&&"Chrome"===Zn.browser&&this.isChromeAutoplayEligible()}},{key:"isAutoplayEligibleIos",value:function(){var e="iOS"===Zn.os&&Zn.browserVersionInfo.majorVersion>=10,t=e&&"Safari"===Zn.browser,i=e&&!t&&("Chrome-iOS"===Zn.browser||"Chrome"===Zn.browser)&&this.isChromeAutoplayEligible();return t||i}},{key:"isChromeAutoplayEligible",value:function(){return Zn.browserVersionInfo.majorVersion>=54}},{key:"createVideoElement",value:function(e){var t=this.document;if(!t)return null;var i=t.createElement("video");return e&&(i.muted=!0,i.setAttribute("muted","muted"),i.setAttribute("playsinline","playsinline")),i.volume=.005,i.style.width="100%",i.style.height="100%",i.src=this.testVideoSrc,this.testDom.appendChild(i),i}},{key:"createTestDom",value:function(){var e=this.document;if(!this.document)return null;var t=e.createElement("div"),i=t.style,n="-1000px";return i.position="absolute",i.top=n,i.left=n,i.width="400px",i.height="225px",e.body.appendChild(t),this.testDom=t,t}},{key:"document",get:function(){return Zn.document||null}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new i),this.instance}}]),i}(jr),Kr=(0,nt.default)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,at.default)(this,e),this.plugins=[],this.autoplay="none",this.networkErrorRecovery={},this.networkTimeout=An.TIMEOUT,this.id=zt(),this.performanceMode="auto",this.renderTextTrackNatively=!0,this.useNativeFullscreen=!0,this.playsInline=!1,this.useNativeControls=!1,this.overrides={},this.enableOm=!1,this.enableMoat=!1,this.keyboardScope="player",this.logLevel="off",this.language=navigator.language,this.localization={},this.idleDelay=3e3,this.ignoreBlankTextTracks=!1;var i=t,n=i.container,a=wt(i,["container"]);if(Zn.isBrowser&&(null==n||!(n.constructor===HTMLDivElement||"object"===(0,rt.default)(n)&&"function"==typeof n.getBoundingClientRect||"string"==typeof n&&null!=document.querySelector(n))))throw new Error("Invalid player configuration: Missing presentation container.");Ki(this,a),this.container=n,null!=this.audioLanguage||(this.audioLanguage=this.language),null!=this.textLanguage||(this.textLanguage=this.language),null!=this.localizationLanguage||(this.localizationLanguage=this.language),null!=this.reuseVideoElement||(this.reuseVideoElement=Zn.isIos)}),Gr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,at.default)(this,e),this.sessionId=null,this.contentId=null,this.ad={adapter:null,showPrerollOnNonZeroStart:!1,suppressAdUi:!1,viewabilityTracking:{partner:null,viewGuid:null,pageType:null},csai:null,ssai:null},this.location={mediaUrl:null,textTrackUrl:null,thumbnailTrackUrl:null,posterImageUrl:null,drm:{playready:{url:null,header:null,priority:null,audioRobustness:null,videoRobustness:null},widevine:{url:null,header:null,priority:null,audioRobustness:null,videoRobustness:null},fairplay:{appCertUrl:null,licenseUrl:null,header:null},aes:{header:null,provider:null}}},this.playback={id3OwnerIds:null,startTime:NaN,preloadContent:!1,enableAdvancedCodecs:!1,liveEdgeSyncFragmentCount:3,abr:{maxBitrate:NaN,minBitrate:NaN,startBitrate:NaN,maxHeight:1/0,maxCategory:null,capQualityToScreenSize:!0,ignoreDevicePixelRatio:!0}},this.metadata={},this.tracking={},this.cmcd={enabled:!0,sessionId:null,contentId:null,useHeaders:!1},this.overrides={},Ki(this,t);var i=this.playback.abr,n=i.maxCategory,a=i.maxHeight;n&&!Number.isFinite(a)&&(i.maxHeight=Xi(n))}return(0,nt.default)(e,null,[{key:"validate",value:function(e){if(Ut(e))throw new Error(wi.messages.RESOURCE_MISSING);var t=[];if(Object.keys(qr).forEach(function(i){i in e||t.push(i)}),t.length)throw new Error("One or more configuration properties not found: ".concat(t.join(", ")))}}]),e}(),qr=new Gr,zr=function(){function e(){(0,at.default)(this,e),this.multiCoreKey=null}return(0,nt.default)(e,[{key:"destroy",value:function(){}},{key:"onRemove",value:function(){this.multiCoreKey=null}},{key:"facade",get:function(){return Wr.getInstance(this.multiCoreKey)}},{key:"sendNotification",value:function(e,t,i){var n=this.facade;n&&n.sendNotification(e,t,i)}},{key:"initializeNotifier",value:function(e){this.multiCoreKey=e}}]),e}(),Yr=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this)).proxyName=null,a.pData=null,a.proxyName=e,a.pData=n||{},a}return(0,nt.default)(i,[{key:"name",get:function(){return this.proxyName}},{key:"data",get:function(){return this.pData}},{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){this.pData=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}}]),i}(zr),Qr=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,at.default)(this,i),(n=t.call(this,"HookProxy",null)).aviaHookManager=null,n.pHookManager=null,n.pHookManager=new bi(Ei),n.aviaHookManager=e,n}return(0,nt.default)(i,[{key:"onRemove",value:function(){var e;null==(e=this.pHookManager)||e.destroy(),this.aviaHookManager=null,this.pHookManager=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"defineHook",value:function(e,t){this.pHookManager.defineHook(e,t)}},{key:"hasHook",value:function(e){return this.pHookManager.hasHook(e)||this.aviaHookManager.hasHook(e)}},{key:"registerHook",value:function(e,t){this.pHookManager.registerHook(e,t)}},{key:"removeHook",value:function(e,t){this.pHookManager.removeHook(e,t)}},{key:"applyHook",value:function(e,t,i){return It(this,null,ze.default.mark(function n(){var a,r;return ze.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==(a=this.aviaHookManager)?void 0:a.applyHook(e,t,i);case 2:return r=n.sent,n.abrupt("return",this.pHookManager.applyHook(e,r,i));case 4:case"end":return n.stop()}},n,this)}))}}]),i}(Yr),Xr=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this,e)).pLogger=n,a}return(0,nt.default)(i,[{key:"destroy",value:function(){this.pLogger.destroy(),this.pLogger=null}},{key:"logger",get:function(){return this.pLogger}}]),i}(jr),Zr=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;(0,at.default)(this,i),(n=t.call(this,e||{})).pAppId=e.id,n.pFacade=Wr.createFacade(n.pAppId,e.commandMap||null);var a=e.logger;return n.pFacade.registerService(new Xr("Logging",a)),Vi(Rt).forEach(function(e){return a.on(e,function(e){return n.sendEvent(e.type,e.detail)})}),n}return(0,nt.default)(i,[{key:"destroy",value:function(){this.mdlCollProxy=null,this.pFacade=null,(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this),Wr.removeCore(this.pAppId)}},{key:"appId",get:function(){return this.pAppId}},{key:"sendNotification",value:function(e,t,i){this.pFacade.sendNotification(e,t,i)}},{key:"registerGlobalServices",value:function(e){var t=this.pFacade;for(var i in e)t.registerService(e[i])}},{key:"facade",get:function(){return this.pFacade}},{key:"modelCollectionProxy",get:function(){return this.mdlCollProxy||(this.mdlCollProxy=this.facade.retrieveProxy("ModelCollectionProxy")),this.mdlCollProxy}},{key:"appMediator",get:function(){return this.pFacade.retrieveMediator("AppMediator")}}]),i}(li);function Jr(){return function(e,t,i){$t(e.apiMethods)||(e.apiMethods={}),e.apiMethods[t]=i.value}}function eo(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,i,n){$t(t.apiAccessors)||(t.apiAccessors={});var a={get:n.get,set:e?void 0:n.set||void 0};t.apiAccessors[i]=a}}function to(e,t){var i=function(i){e[i]=function(){for(var e,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(null==(n=null==(e=null==t?void 0:t.apiMethods)?void 0:e[i])?void 0:n.apply(t,r))||null}};for(var n in t.apiMethods)i(n);var a=function(i){var n=t.apiAccessors[i],a={};n.get&&(a.get=function(){return t[i]}),n.set&&(a.set=function(e){t[i]=e}),Object.defineProperty(e,i,a)};for(var r in t.apiAccessors)a(r);return e}var io=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.call(this)}return(0,nt.default)(i,[{key:"logger",get:function(){return this.facade.logger}},{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];(t=this.logger).log.apply(t,[e].concat(n))}}]),i}(function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.call(this)}return(0,nt.default)(i,[{key:"system",get:function(){return Zn}},{key:"getModel",value:function(e){return this.getModelCollection().getModel(e)}},{key:"getProxy",value:function(e){return this.facade?this.facade.retrieveProxy(e):null}},{key:"getService",value:function(e){return this.facade?this.facade.retrieveService(e):null}},{key:"getModelCollection",value:function(){return this.facade?this.facade.retrieveProxy("ModelCollectionProxy"):null}}]),i}(zr)),no=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.facade.retrieveMediator("PresentationMediator"),i=this.facade.retrieveProxy("ContentPlaybackStateProxy"),n=t.adapter,a=e.body.value;if(i.isAbrSwitchingAvailable)switch(e.name){case"switchBitrate":var r=nn(i.qualities,a);this.switchToIndex(r,i,n);break;case"switchQualityCategory":i.userQualityCategory=a,this.switchQualityCategory(i,a,n);break;case"autoQualitySwitching":n.setAutoQualitySwitching(a),i.qualitySwitchingMode=this.getAbrMode(a);break;case"minBitrate":n.setMinBitrate(a);break;case"maxBitrate":n.setMaxBitrate(a)}else i.qualitySwitchingMode="unavailable"}},{key:"switchToIndex",value:function(e,t,i){var n=t.minIndex,a=t.maxIndex;Bi(e,n,a)?(i.setAutoQualitySwitching(!1),t.qualitySwitchingMode=this.getAbrMode(!1),i.setQuality(t.qualities[e])):this.logger.log("warn",e>=a?wi.messages.ABR_MANUAL_SWITCHING_REACHED_UPPER_BOUNDS:wi.messages.ABR_MANUAL_SWITCHING_REACHED_LOWER_BOUNDS)}},{key:"switchQualityCategory",value:function(e,t,i){if("AUTO"===t)return i.setAutoQualitySwitching(!0),i.setMinBitrate(NaN),void i.setMaxBitrate(NaN);var n=Yi(e.qualities,t),a=n.minBitrate,r=n.maxBitrate,o=n.minIndex;o===n.maxIndex?this.switchToIndex(o,e,i):(i.setMinBitrate(a),i.setMaxBitrate(r))}},{key:"getAbrMode",value:function(e){return e?"auto":"manual"}}]),i}(io),ao=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.call(this)).subCommands=null,e.subCommands=[],e.initializeMacroCommand(),e}return(0,nt.default)(i,[{key:"addSubCommand",value:function(e){this.subCommands.push(e)}},{key:"execute",value:function(e){for(var t;this.subCommands.length>0;)(t=new(this.subCommands.shift())).initializeNotifier(this.multiCoreKey),t.execute(e)}}]),i}(zr),ro=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this,e,{activeState:"inactive",idleDelay:n.idleDelay})).mouseDown=!1,a.mouseOver=!1,a.idleEvents=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","touchstart","MSPointerMove","MSPointerDown","pointermove","pointerdown"],a.container=n.container,a.document=n.document,a}return(0,nt.default)(i,[{key:"onRegister",value:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.reset=this.reset.bind(this),this.idle=this.idle.bind(this),this.container.addEventListener("mouseenter",this.onMouseEnter),this.container.addEventListener("mouseleave",this.onMouseLeave),this.container.addEventListener("mousedown",this.onMouseDown),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("keydown",this.onKeyDown)}},{key:"onRemove",value:function(){this.container.removeEventListener("mouseenter",this.onMouseEnter),this.container.removeEventListener("mouseleave",this.onMouseLeave),this.container.removeEventListener("mousedown",this.onMouseDown),this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("keydown",this.onKeyDown),this.stop(),this.container=null,this.document=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"applyListeners",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?"add":"remove";this.idleEvents.forEach(function(i){return e.container["".concat(t,"EventListener")](i,e.reset,{passive:!0})})}},{key:"start",value:function(){this.stop(),this.applyListeners(),this.timeout=setTimeout(this.idle,this.idleDelay)}},{key:"stop",value:function(){clearTimeout(this.timeout),this.applyListeners(!1)}},{key:"idle",value:function(){this.activeState=this.mouseOver?"idle":"inactive"}},{key:"reset",value:function(){this.activeState="active",this.start()}},{key:"onMouseEnter",value:function(){this.reset(),this.mouseOver=!0,this.activeState="active",this.start()}},{key:"onMouseLeave",value:function(){this.reset(),this.mouseOver=!1,this.activeState="inactive"}},{key:"onMouseDown",value:function(){this.mouseDown=!0}},{key:"onMouseUp",value:function(){this.mouseDown&&(this.mouseDown=!1,this.start())}},{key:"onKeyDown",value:function(e){var t=this,i=e.key,n=e.keyCode;"Tab"!==i&&9!==n||setTimeout(function(){var e=t.document.activeElement,i=t.container===e||t.container.contains(e);i&&t.stop(),t.activeState=i?"active":"inactive"},0)}},{key:"activeState",get:function(){return this.data.activeState},set:function(e){this.mouseDown&&(e="active"),e!==this.data.activeState&&(this.data.activeState=e,this.sendNotification("activestatechange",{activeState:e}))}},{key:"idleDelay",get:function(){return this.data.idleDelay}}]),i}(Yr),oo={position:"absolute",width:"100%",height:"100%",padding:"0",margin:"0",overflow:"hidden"};function so(){var e=document.createElement("video");return e.style.height="100%",e.style.width="100%",e.style.backgroundColor="#000",e.dataset.elementId=zt(),e}function lo(){var e=uo("adContainer",oo);return e.dataset.elementId=zt(),e}function uo(e,t){var i=document.createElement("div");return i.setAttribute("data-role",e),Object.assign(i.style,t),i}function co(){var e=uo("adClickEl",{display:"none",padding:"4px 8px",fontSize:"12px",background:"#dedede",lineHeight:"14px",color:"#000",position:"absolute",right:"2px",top:"2px",textAlign:"center"});return e.innerHTML="Learn More",e}var ho=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=e.body.playerOptions.container,i=this.system,n=this.getModel("PlayerOptions");if(i.isBrowser&&t){var a="string"==typeof t?i.document.querySelector(t):t,r=[];n.useNativeControls&&(r=["ccContainer"]);var o=function(e,t,i){var n,a,r=(n={},(0,ot.default)(n,"main",e),(0,ot.default)(n,"video",null),n),o=e,s=o.style;s.position=s.position||"relative",s.padding=s.padding||"0",s.margin=s.margin||"0",s.width=s.width||"100%",s.height=s.height||"100%",s.backgroundColor=s.backgroundColor||"#000",s.overflow=s.overflow||"hidden",o.classList.add("avia-container");var l=document.createElement("style");o.parentElement.insertAdjacentElement("beforebegin",l),l.innerText=":root{--avia-timed-text-offset: 60px;}.avia-container.avia-cc-offset video::-webkit-media-text-track-container{bottom: var(--avia-timed-text-offset);height: auto;}";var u,c=o.hasChildNodes()?o.firstChild:null;if(["adContainer","ccContainer","videoContainer"].forEach(function(e){t.includes(e)||(u="adContainer"===e?lo():uo(e,oo),r[e]=u,c?o.insertBefore(u,c):o.appendChild(u),c=u)}),!0===i.reuseVideoElement){var d=so();r.videoContainer.appendChild(d),r.video=d}return r.adClickEl=co(),o.appendChild(r.adClickEl),a={},(0,ot.default)(a,"main",r.main),(0,ot.default)(a,"video",r.video),(0,ot.default)(a,"videoContainer",r.videoContainer),(0,ot.default)(a,"ccContainer",r.ccContainer),(0,ot.default)(a,"adContainer",r.adContainer),(0,ot.default)(a,"adClickEl",r.adClickEl),(0,ot.default)(a,"style",l),a}(a,r,n),s=this.facade.retrieveProxy("PlayerDomProxy");s.setModel(o),s.showAdContainer(!1),n.useNativeControls&&s.setVideoAttribute("controls",""),!1!==n.playsInline&&s.setVideoAttribute("playsinline",""),s.setVideoAttribute("data-player-id",this.facade.appId),this.facade.registerProxy(new ro("ActivityProxy",{container:a,document:i.document,idleDelay:n.idleDelay})),this.log("info","Player DOM created.")}}}]),i}(io),fo="webkitneedkey",po=function(){function e(t,i,n,a,r){var o=this;(0,at.default)(this,e),this.appCertLoaded=!1,this.webKitNeedKeyCalled=!1,this.webkitNeedKeyHandler=function(e){return o.onWebkitNeedKey(e)},this.onError=r,this.drmInfo=i,this.video=t,this.video.addEventListener(fo,this.webkitNeedKeyHandler),this.logger=n,this.delegate=a}return(0,nt.default)(e,[{key:"initialize",value:function(){return It(this,null,ze.default.mark(function e(){var t,i;return ze.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delegate.applyHook("request",{url:this.drmInfo.appCertUrl,headers:{}});case 2:return t=e.sent,e.next=5,Tn(Ki({responseType:"arraybuffer"},t));case 5:i=e.sent,this.appCertData=new Uint8Array(i),this.appCertLoaded=!0,this.webKitNeedKeyCalled&&this.initializeFairplayCDM();case 9:case"end":return e.stop()}},e,this)}))}},{key:"destroy",value:function(){this.appCertData=null,this.initData=null,this.onError=null,this.drmInfo=null,this.logger=null,this.video.removeEventListener(fo,this.webkitNeedKeyHandler),this.video=null}},{key:"onWebkitNeedKey",value:function(e){this.initData=e.initData,this.webKitNeedKeyCalled=!0,this.appCertLoaded&&this.initializeFairplayCDM()}},{key:"onLicenseRequestReady",value:function(e,t){var i=this,n=this.getDrmVendor(e),a=t.target,r={spc:ya(t.message),contentId:a.contentId},o="irdeto"===n||"unknown"===n?"arraybuffer":"text",s={"Content-Type":"application/x-www-form-urlencoded"},l=this.drmInfo.header;Ut(l)||Object.assign(s,l),this.delegate.applyHook("request",{url:e,method:"POST",responseType:o,headers:s,data:r}).then(function(e){var t=ji(e),n=e.headers["Content-Type"];return"application/x-www-form-urlencoded"===n?t.data="spc="+encodeURIComponent(e.data.spc)+"&"+e.data.contentId:"application/json"===n&&(t.data=JSON.stringify(e.data)),Tn(t).then(function(e){var t="string"==typeof e?ma(e):new Uint8Array(e);a.update(t)}).catch(function(e){i.throwFatalError("3301",wi.messages.FAIRPLAY_LICENSE_ERROR)})})}},{key:"onWebkitKeyAdded",value:function(e){this.logger.log("info",wi.messages.WEBKIT_KEY_ADDED_SUCCESS)}},{key:"onWebkitError",value:function(e){this.throwFatalError("3301","".concat(wi.messages.FAIRPLAY_LICENSE_ERROR))}},{key:"initializeFairplayCDM",value:function(){var e=this.getLicenseServerUrl(this.initData),t=this.getId(e,this.initData),i=this.video,n=Zn.global,a=wi.messages;if(t){if(!i.webkitKeys){var r="com.apple.fps.1_0";if(!n.WebKitMediaKeys.isTypeSupported(r,"video/mp4"))return void this.throwFatalError("3300",a.FAIRPLAY_WEBKIT_ERROR);try{i.webkitSetMediaKeys(new n.WebKitMediaKeys(r))}catch(e){return void this.throwFatalError("3300",e.message)}}var o=this.concatInitDataIdAndCertificate(this.initData,t,this.appCertData),s=i.webkitKeys.createSession("video/mp4",o);s?(s.contentId=t,s.addEventListener("webkitkeymessage",this.onLicenseRequestReady.bind(this,e),!1),s.addEventListener("webkitkeyadded",this.onWebkitKeyAdded.bind(this),!1),s.addEventListener("webkitkeyerror",this.onWebkitError.bind(this),!1)):this.throwFatalError("3300",a.FAIRPLAY_WEBKIT_ERROR)}else this.throwFatalError("3300",a.FAIRPLAY_NO_CONTENT_ID)}},{key:"concatInitDataIdAndCertificate",value:function(e,t,i){"string"==typeof t&&(t=Sa(t));var n=0,a=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),r=new DataView(a);new Uint8Array(a,n,e.byteLength).set(e),n+=e.byteLength,r.setUint32(n,t.byteLength,!0),n+=4;var o=new Uint16Array(a,n,t.length);return o.set(t),n+=o.byteLength,r.setUint32(n,i.byteLength,!0),n+=4,new Uint8Array(a,n,i.byteLength).set(i),new Uint8Array(a,0,a.byteLength)}},{key:"getLicenseServerUrl",value:function(e){return Ut(this.drmInfo.licenseUrl)?"https://"+String.fromCharCode.apply(null,new Uint16Array(e.buffer)).split("://")[1]:this.drmInfo.licenseUrl}},{key:"extractContentId",value:function(e){return Ea(e).split("skd://")[1]}},{key:"getId",value:function(e,t){var i=gn.decode(e);return i.ContentId||i.contentId||i.assetId||this.extractContentId(t)}},{key:"getDrmVendor",value:function(e){var t="unknown";return-1!==e.indexOf("irdeto")?t="irdeto":-1!==e.indexOf("drmtoday")&&(t="drmtoday"),t}},{key:"throwFatalError",value:function(e,t){this.logger.log("error",e,t),this.onError({code:e,message:t,fatal:!0})}}]),e}(),vo=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,at.default)(this,i),(n=t.call(this,e,a,!0)).isNonZeroStartTime=!1,n.onAddAudioEvent=function(e){n.audioTracks=[],n.audioTrack=null,Aa(n.domAudioTracks,function(e,t){if(e.label||e.language){var i=e.kind,a={index:t,id:t.toString(),type:"alternative"===i||"description"===i?"description":"main",codec:"",language:e.language,label:e.label};n.audioTracks.push(a)}}),n.delegate.audioTracksChange(n.audioTracks),n.setAudioTrack(sa(n.audioTracks,n.context.playerOptions.audioLanguage)),n.audioTrack||n.changeAudioDebounced()},n.onChangeAudioEvent=function(e){var t=Array.from(n.domAudioTracks).find(function(e){return e.enabled});n.audioTrack=n.audioTracks.find(function(e){return e.id===t.id}),n.delegate.audioTrackChange(n.audioTrack)},n.onFairPlayError=function(e){n.delegate.error(e)};var r=n.context.resource.location.drm.fairplay;r.appCertUrl&&(n.fairplay=new po(n.video,r,n.logger,n.delegate,n.onFairPlayError),n.fairplay.initialize(),n.delegate.drmKeySystemCreated("com.apple.fps.1_0"));var o=n.domAudioTracks;return o&&(n.addAudioDebounced=Ra(n.onAddAudioEvent,100),n.changeAudioDebounced=Ra(n.onChangeAudioEvent,100),o.addEventListener("addtrack",n.addAudioDebounced),o.addEventListener("change",n.changeAudioDebounced)),n}return(0,nt.default)(i,[{key:"domAudioTracks",get:function(){return this.video.audioTracks}},{key:"getId",value:function(){return i.ID}},{key:"destroy",value:function(){var e=this,t=this.video,n=this.domAudioTracks;return(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this).then(function(){n&&(e.addAudioDebounced.cancel(),e.changeAudioDebounced.cancel(),n.removeEventListener("addtrack",e.addAudioDebounced),n.removeEventListener("change",e.changeAudioDebounced)),e.fairplay&&(e.fairplay.destroy(),e.fairplay=null),t.removeAttribute("src"),t.load()})}},{key:"load",value:function(){var e,t=this;this.suppressErrors=!0,(0,Xe.default)((0,it.default)(i.prototype),"load",this).call(this);var n=this.context.resource,a=n.location.mediaUrl,r=(null==(e=n.overrides)?void 0:e.mimeType)||hn(a),o=n.cmcd;return o.enabled&&(a=Fn(a,{ot:wn.MANIFEST,sf:function(e){switch(r){case"application/vnd.apple.mpegurl":case"application/x-mpegURL":return Pn.HLS;case"application/dash+xml":return Pn.DASH;default:return Pn.OTHER}}(),su:!0,sid:o.sessionId,cid:o.contentId,pr:this.video.playbackRate,v:Wn})),this.delegate.applyHook("request",{url:a},{objectType:"manifest"}).then(function(e){t.video.src=e.url;var i=t.context.system;return Ii(t.video,"loadedmetadata").then(function(){i.isIos&&t.video.load();var e=n.playback.startTime;if(ca(e))return t.isNonZeroStartTime=!0,Ii(t.video,"canplaythrough").then(function(){return t.seek(e)})}).then(function(){return t.suppressErrors=!1,{manifest:{mimeType:r},fragment:{mimeType:void 0}}}).catch(function(){throw t.createVideoElementError()})})}},{key:"setAudioTrack",value:function(e){e&&(Aa(this.domAudioTracks,function(t,i){t.enabled=e.index===i}),this.textTrackSurface.forcedLanguage=e.language)}},{key:"setQuality",value:function(e){this.logger.log("info",wi.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)}},{key:"setAutoQualitySwitching",value:function(e){this.logger.log("info",wi.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)}},{key:"setMinBitrate",value:function(e){this.logger.log("info",wi.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)}},{key:"setMaxBitrate",value:function(e){this.logger.log("info",wi.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)}},{key:"setTextTrackMode",value:function(e){var t=this;this.textTrackSurface&&(this.isNonZeroStartTime&&!this.startedPlaying?(this.isNonZeroStartTime=!1,Ii(this.video,"seeked").then(function(){return t.textTrackSurface.textTrackMode=e})):this.textTrackSurface.textTrackMode=e)}}],[{key:"ID",get:function(){return ir}},{key:"config",get:function(){return{id:i.ID,role:["playback"],factory:function(e){return new i(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},isSupported:function(e){var t,i=fn(e.resource);return""!==(null==(t=e.video)?void 0:t.canPlayType(i))}}}}]),i}(Ba),go=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,at.default)(this,i),(n=t.call(this,"AdapterProxy",e)).adapterMap={},n.defaultAdapters=(0,ot.default)({},"playback",vo.config),n}return(0,nt.default)(i,[{key:"onRemove",value:function(){this.adapterMap=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"registerAdapter",value:function(e){var t=e.id;this.adapterMap[t]=e}},{key:"retrieveAdapter",value:function(e){return this.adapterMap[e]}},{key:"removeAdapter",value:function(e){delete this.adapterMap[e]}},{key:"getAdaptersByRole",value:function(e){var t=Vi(this.adapterMap).filter(function(t){return t.role.includes(e)}),i=this.defaultAdapters[e];return i&&t.push(i),t}},{key:"createContext",value:function(e,t){var i=this.facade.retrieveMediator("PluginMediator").createPluginServices(),n=i.dom,a=i.system,r=this.facade.retrieveProxy("ModelCollectionProxy").getModel("PresentationState"),o=this.facade.retrieveProxy("TextTrackProxy"),s=this.facade.retrieveProxy("PerformanceProxy");return Object.assign(i,{resource:e,video:a.isWebMaf?a.webMafPlayer:n.video,container:n.main,autoplay:r.isAutoplay,muted:r.isMuteAtPlayStart,performanceSettings:s,textTrackSettings:o,getDelegate:t})}},{key:"createAdapter",value:function(e,t,i){return It(this,null,ze.default.mark(function n(){var a,r,o,s,l,u,c,d,h,f,p,v,g,m;return ze.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=this.createContext(t,i),o=this.getAdaptersByRole(e),s=(null==(a=r.resource[e])?void 0:a.adapter)||{},l=s.id,u=s.options,c=void 0===u?{}:u,d=l?o.filter(function(e){return e.id===l}):o,h=lt(d),n.prev=6,h.s();case 8:if((f=h.n()).done){n.next=26;break}if(p=f.value,v=Ki({},p.options,c,s[p.id]),n.t0=!l,!n.t0){n.next=16;break}return n.next=15,p.isSupported(r,v);case 15:n.t0=!n.sent;case 16:if(!n.t0){n.next=18;break}return n.abrupt("continue",24);case 18:return n.next=20,p.factory(r,v);case 20:if(!(g=n.sent)){n.next=24;break}return this.facade.log("info","".concat(p.id," adapter created")),n.abrupt("return",g);case 24:n.next=8;break;case 26:n.next=31;break;case 28:n.prev=28,n.t1=n.catch(6),h.e(n.t1);case 31:return n.prev=31,h.f(),n.finish(31);case 34:throw m="Could not find adapter for role: ".concat(e),l&&(m+=", with id: ".concat(l)),new Ai("5000",m);case 37:case"end":return n.stop()}},n,this,[[6,28,31,34]])}))}}]),i}(Yr),mo=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this,e,{})).pLocalizationData=[],a.pLocale={},a.pLanguage=n,a.registerLocalizationData(i.LocalizationData),a}return(0,nt.default)(i,[{key:"onRemove",value:function(){this.pLocale=null,this.pLocalizationData=null,this.pLanguageTag=null,this.pLanguage=null}},{key:"getApi",value:function(){return to({},this)}},{key:"defaultLanguage",get:function(){return(null==navigator?void 0:navigator.language)?navigator.language:"en"}},{key:"language",get:function(){return this.pLanguage||this.defaultLanguage}},{key:"languageTag",get:function(){return this.pLanguageTag}},{key:"changeLanguage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultLanguage;this.pLanguage=t,this.pLanguageTag=$n(this.language);var n=new RegExp("^".concat(this.pLanguageTag.language),"i"),a=function(t){var n=(0,Ze.default)(t,2),a=n[0],r=n[1];return i.load(r).then(function(e){return[a,e]}).catch(function(t){return e.facade.log("error","Could not load locale file ".concat(r),t),[a,{}]})},r=this.pLocalizationData.map(function(e){var t=Hi(e).filter(function(e){return n.test(e[0])}).map(function(e){return"string"==typeof e[1]?a(e):e});return Promise.all(t)});return Promise.all(r).then(function(t){var i=t.map(function(e){return Wi(e)}),n=Ki.apply(void 0,(0,Qe.default)(i));return e.pLocale=n})}},{key:"registerLocalizationData",value:function(e){Ut(e)||this.pLocalizationData.push(e)}},{key:"localize",value:function(e,t){return Zt(this.lookup(e),t)}},{key:"lookup",value:function(e){var t=this,i=function(i){return(t.pLocale[i]||{})[e]};return i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.language)||i(this.pLanguageTag.language)||e}}],[{key:"load",value:function(e){return null==this.pExternalData[e]&&(this.pExternalData[e]=Tn({url:e,responseType:"json"})),this.pExternalData[e]}}]),i}(Yr);mo.pExternalData={},mo.LocalizationData={en:(Ve={},(0,ot.default)(Ve,"media-player","Media Player"),(0,ot.default)(Ve,"learn-more","Learn More"),Ve),es:(He={},(0,ot.default)(He,"media-player","Reproductor multimedia"),(0,ot.default)(He,"learn-more","Aprende más"),He)},Pt([eo(!0)],mo.prototype,"defaultLanguage",1),Pt([eo(!0)],mo.prototype,"language",1),Pt([Jr()],mo.prototype,"languageTag",1),Pt([Jr()],mo.prototype,"changeLanguage",1),Pt([Jr()],mo.prototype,"registerLocalizationData",1),Pt([Jr()],mo.prototype,"localize",1);var yo=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.apply(this,arguments)).resettables=["ContentPlaybackState"],e}return(0,nt.default)(i,[{key:"onRemove",value:function(){this.resettables=null;var e=this.facade.retrieveProxy("PlayerDomProxy");e&&e.removeDom(),(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"collection",get:function(){return this.data}},{key:"getModel",value:function(e){return this.data.getModel(e)}},{key:"reset",value:function(){for(var e=this.resettables,t=e.length;t--;)this.getModel(e[t]).reset();var i=this.getModel("PresentationState");i.isAutoplay=!0,i.isCurrentVideoAd=!1,i.started=!1,i.streamDuration=NaN,i.streamTime=NaN}}]),i}(Yr),Ao=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"logger",get:function(){return this.facade.logger}},{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];(t=this.logger).log.apply(t,[e].concat(n))}}]),i}(function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this)).pViewControl=null,a.mediatorName=e,n&&(a.viewControl=n),a}return(0,nt.default)(i,[{key:"name",get:function(){return this.mediatorName}},{key:"viewControl",get:function(){return this.pViewControl},set:function(e){this.pViewControl=e}},{key:"system",get:function(){return Zn}},{key:"getService",value:function(e){return this.facade?this.facade.retrieveService(e):null}},{key:"getModel",value:function(e){return this.getModelCollection().getModel(e)}},{key:"getProxy",value:function(e){return this.facade?this.facade.retrieveProxy(e):null}},{key:"getModelCollection",value:function(){return this.facade?this.facade.retrieveProxy("ModelCollectionProxy"):null}},{key:"listNotificationInterests",value:function(){return[]}},{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){this.pViewControl=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}}]),i}(zr)),ko=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,at.default)(this,i),(n=t.call(this,e)).timer=new Rr(i.INTERVAL),n.timer.on(Rr.TIC_EVENT,function(e){return n.onTic(e)}),n}return(0,nt.default)(i,[{key:"killTimer",value:function(){var e;null==(e=this.timer)||e.stop()}},{key:"listNotificationInterests",value:function(){return["resourcestart"]}},{key:"handleNotification",value:function(e){var t;"resourcestart"===e.name&&(null==(t=this.timer)||t.start())}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this)}},{key:"onRemove",value:function(){this.timer.destroy(),this.timer=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"onTic",value:function(e){var t,i;null==(t=this.facade)||t.sendNotification("timerTic",e.detail,"internal"),null==(i=this.facade)||i.sendNotification("aviaclock",{count:e.detail.count},"internal")}}]),i}(Ao);ko.INTERVAL=100;var bo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"onRegister",value:function(){var e=this.facade.retrieveProxy("ModelCollectionProxy").getModel("PlayerOptions");this.pOverrides=e.overrides,this.pMode="auto"===e.performanceMode?this.calculatePerformanceMode():e.performanceMode}},{key:"calculatePerformanceMode",value:function(){switch(!0){case Zn.isTv:case Zn.isEmbedded:return"tv";case Zn.isMobile:return"mobile";default:return"desktop"}}},{key:"mode",get:function(){return this.pMode}},{key:"forwardBufferLength",get:function(){switch(this.pMode){case"mobile":case"tv":return 20;case"low":return 10;default:return}}},{key:"backBufferLength",get:function(){switch(this.pMode){case"mobile":case"tv":return 30;case"low":return 12;default:return 60}}},{key:"topQualityForwardBufferLength",get:function(){switch(this.pMode){case"mobile":case"tv":return 60;case"low":return 30;default:return}}},{key:"bufferingSampleRate",get:function(){var e,t=null==(e=this.pOverrides)?void 0:e.bufferingSampleRate;if(t)return t;switch(this.pMode){case"tv":case"low":return 300;default:return ko.INTERVAL}}}]),i}(Yr),Eo=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.apply(this,arguments)).controlVisCssClass="cvui-ctrlbar-vis",e}return(0,nt.default)(i,[{key:"setModel",value:function(e){for(var t in e)this.model[t]=e[t]}},{key:"removeDom",value:function(){var e,t=this.getVideo();t&&(t.player=null,t.avia=null);for(var i=this.getMain(),n=i.childNodes,a=n.length;a--;)i.removeChild(n[a]);var r=this.getElement("style");null==(e=null==r?void 0:r.parentElement)||e.removeChild(r)}},{key:"setControlVisibility",value:function(e){var t=this.getMain();if(t){var i=e?"add":"remove";t.classList[i](this.controlVisCssClass)}}},{key:"getElement",value:function(e){return this.model[e]||null}},{key:"getSafeZIndex",value:function(){var e=this.getElement("adContainer");return e?Number(e.style.zIndex)+10:10}},{key:"getVideo",value:function(){return this.getElement("video")}},{key:"getTextTrackContainer",value:function(){return this.getElement("ccContainer")}},{key:"setVideoVolume",value:function(e){var t=this.getVideo();t&&this.getVideoVolume()!==e&&(t.volume=e)}},{key:"getVideoVolume",value:function(){var e=this.getVideo();return e?e.volume:null}},{key:"getMain",value:function(){return this.getElement("main")}},{key:"showAdClickElement",value:function(e){var t=this.getElement("adClickEl");if(t){var i=this.facade.retrieveProxy("LocalizationProxy").localize("learn-more");i&&(t.innerHTML=i),t.style.display=!1!==e?"block":"none"}}},{key:"getDimensions",value:function(){var e=this.getPresentationRect();return e?{width:e.width,height:e.height}:null}},{key:"showContainer",value:function(e,t){var i=this.getElement(e);i&&(i.style.display=t?"inline-block":"none")}},{key:"showAdContainer",value:function(e){this.showContainer("adContainer",e)}},{key:"getPresentationRect",value:function(){var e=this.getMain();return e&&e.getBoundingClientRect()||null}},{key:"muteVideo",value:function(e){var t=this.getVideo(),i="muted";t&&(t.muted=e,e&&t.setAttribute(i,i),!e&&t.removeAttribute(i))}},{key:"primeVideo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi.blankDataUrl;return Promise.resolve().then(function(){var i=e.getVideo();if(i)return i.src=t,i.load(),i.play().catch(function(t){if(i.error&&i.src!==wi.blankDataUrl)return e.primeVideo(wi.blankDataUrl)})})}},{key:"setVideoAttribute",value:function(e,t){var i=this.getVideo();null==i||i.setAttribute(e,t)}},{key:"removeVideoAttribute",value:function(e){var t=this.getVideo();null==t||t.removeAttribute(e)}},{key:"recreateVideo",value:function(){var e,t,i=so(),n=this.getElement("videoContainer"),a=this.getElement("video"),r=this.facade.retrieveProxy("ModelCollectionProxy").getModel("PresentationState");if(a){a.player=null,a.avia=null;var o=["src","data-element-id"];e=a.volume,t=a.muted,Array.from(a.attributes).filter(function(e){return!o.includes(e.name)}).forEach(function(e){return i.setAttribute(e.name,e.value)}),n.replaceChild(i,a),this.sendNotification("videoelementremoved",{video:a})}else e=r.volume,t=r.isMuted,n.appendChild(i);r.volume=e,i.muted=t,i.volume=e,this.setModel((0,ot.default)({},"video",i)),this.recreateAdElements();var s=this.facade.retrieveMediator("AppMediator");i.player=s.getAppApi(),i.avia=Zn.appNamespace,this.sendNotification("videoelementadded",{video:i})}},{key:"recreateAdElements",value:function(){var e,t=lo(),i=co(),n=this.getMain(),a=this.getElement("adContainer"),r=this.getElement("adClickEl");n.replaceChild(t,a),n.replaceChild(i,r),this.setModel((e={},(0,ot.default)(e,"adContainer",t),(0,ot.default)(e,"adClickEl",i),e))}},{key:"model",get:function(){return this.data}}]),i}(Yr),So=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,at.default)(this,i),t.call(this,e,{native:!1!==n.native,mode:"disabled",language:n.language})}return(0,nt.default)(i,[{key:"mode",get:function(){return this.data.mode},set:function(e){this.data.mode=e}},{key:"enabled",get:function(){return"disabled"!==this.data.mode},set:function(e){this.mode=e?this.enabledMode:"disabled"}},{key:"enabledMode",get:function(){return this.data.native?"showing":"hidden"}},{key:"native",get:function(){return this.data.native}},{key:"language",get:function(){return this.data.language},set:function(e){this.data.language=e}}]),i}(Yr),To=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"checkType",value:function(e,t,i){return"string"==typeof t&&(t=[t]),!(!i||null!==e)||t.some(function(t){return(0,rt.default)(e)===t})}},{key:"notEmpty",value:function(e){return!Ut(e)}},{key:"isArray",value:function(e){return Array.isArray(e)}},{key:"validNumber",value:function(e,t){return"number"!=typeof e?t:e}},{key:"isTypedArray",value:function(e,t){if(this.isArray(e)&&this.notEmpty(e)){for(var i=e.length;i--;)if((0,rt.default)(e[i])!==t)return!1;return!0}return!1}},{key:"isType",value:function(e,t){return e instanceof t}},{key:"isPositiveNumber",value:function(e){return"number"==typeof e&&e>=0}}]),e}(),wo={qualities:{type:"object",defaultValue:null},qualityInfo:{type:"object",defaultValue:null},audioTracks:{type:"object",defaultValue:null},textTracks:{type:"object",defaultValue:null},streamType:{type:"string",defaultValue:"VOD"},liveStreamInfo:{type:"object",defaultValue:null},bufferLength:{type:"number",defaultValue:0},cdn:{type:"string",defaultValue:null,validator:To.notEmpty},drmType:{type:"string",defaultValue:null,validator:To.notEmpty},contentSegment:{type:"number",defaultValue:NaN},maxBandwidth:{type:"number",defaultValue:NaN},time:{type:"number",defaultValue:0},state:{type:"string",defaultValue:"idle"},duration:{type:"number",defaultValue:NaN},bitrate:{type:"number",defaultValue:NaN},started:{type:"boolean",defaultValue:!1},averageDroppedFps:{type:"number",defaultValue:NaN},framerate:{type:"number",defaultValue:NaN}},xo={container:{type:["object","string"],defaultValue:null},plugins:{type:"object",defaultValue:null},autoplay:{type:"string",defaultValue:"none"},id:{type:"string",defaultValue:null},networkErrorRecovery:{type:"object",defaultValue:null},networkTimeout:{type:"number",defaultValue:An.TIMEOUT},performanceMode:{type:"string",defaultValue:"auto"},renderTextTrackNatively:{type:"boolean",defaultValue:!0},useNativeFullscreen:{type:"boolean",defaultValue:!0},playsInline:{type:"boolean",defaultValue:!0},useNativeControls:{type:"boolean",defaultValue:!1},overrides:{type:"object",defaultValue:{}},logLevel:{type:"string",defaultValue:"off"},keyboardScope:{type:"string",defaultValue:"player"},language:{type:"string",defaultValue:null},audioLanguage:{type:"string",defaultValue:null},textLanguage:{type:"string",defaultValue:null},localizationLanguage:{type:"string",defaultValue:null},localization:{type:"object",defaultValue:null},idleDelay:{type:"number",defaultValue:3e3},enableOm:{type:"boolean",defaultValue:!1},enableMoat:{type:"boolean",defaultValue:!1},reuseVideoElement:{type:"boolean",defaultValue:!1},ignoreBlankTextTracks:{type:"boolean",defaultValue:!1},sizeCheckInterval:{type:"number",defaultValue:1e3}},Co=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"clampValue",value:function(e,t,i){return"number"!=typeof e?null:Math.max(t,Math.min(e,i))}},{key:"lowerCase",value:function(e){return"string"==typeof e?e.toLowerCase():e}},{key:"strToNum",value:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);return isNaN(t)?e:t}return e}}]),e}(),_o={content_playback_state_config:wo,player_dom_config:{main:{type:"object",defaultValue:null},video:{type:"object",defaultValue:null},videoContainer:{type:"object",defaultValue:null},ccContainer:{type:"object",defaultValue:null},adContainer:{type:"object",defaultValue:null},panelContainer:{type:"object",defaultValue:null},adClickEl:{type:"object",defaultValue:null}},player_options_config:xo,presentation_state_config:{streamTime:{type:"number",defaultValue:0,setterTransformer:function(e){return To.isPositiveNumber(e)?e:0}},streamDuration:{type:"number",defaultValue:NaN,setterTransformer:function(e){return To.isPositiveNumber(e)?e:NaN}},isAutoplay:{type:"boolean",defaultValue:!1},isCurrentVideoAd:{type:"boolean",defaultValue:!1},isFullscreen:{type:"boolean",defaultValue:!1},isMuted:{type:"boolean",defaultValue:!1},isMuteAtPlayStart:{type:"boolean",defaultValue:!1},started:{type:"boolean",defaultValue:!1},userHasUnmuted:{type:"boolean",defaultValue:!1},volume:{type:"number",defaultValue:1,setterTransformer:function(e){return Co.clampValue(e,0,1)}},usesSsai:{type:"boolean",defaultValue:!1},streamId:{type:"string",defaultValue:null},suspended:{type:"boolean",defaultValue:!1}}},Po=function(){function e(){(0,at.default)(this,e)}return(0,nt.default)(e,null,[{key:"generateModel",value:function(e,t,i,n){for(var a in t)this.createProperty(a,t[a],e,i,n)}},{key:"createProperty",value:function(e,t,i,n,a){var r=t.validator,o=t.type,s=t.defaultValue,l=!1!==t.enumerable,u=this.getTransformer(t,"setter",i),c=this.getTransformer(t,"getter",i);!1===t.writable?(Object.defineProperty(i,e,{enumerable:l,value:s,writable:!1}),n[e]=s):(Object.defineProperty(i,e,{enumerable:l,set:function(t){var i=u(t);!r||r(i)?To.checkType(i,o,null==s)?n[e]=i:ci.warn("Invalid type supplied for property ".concat(e)):ci.warn("Invalid value '".concat(i,"' for property ").concat(e))},get:function(){return c(n[e])}}),n[e]=s),a[e]=s}},{key:"getTransformer",value:function(e,t,i){var n=e[t+"Transformer"];return n&&"function"==typeof n?n.bind(i):this.blankTransformer}},{key:"blankTransformer",value:function(e){return e}}]),e}(),Io=function(){function e(t){(0,at.default)(this,e),this.pData={},this.defaultValues={},Po.generateModel(this,t,this.pData,this.defaultValues)}return(0,nt.default)(e,[{key:"data",get:function(){return Object.assign({},this.pData)}},{key:"reset",value:function(){for(var e in this.defaultValues)this.pData[e]=this.defaultValues[e]}}]),e}(),No=function(){function e(t){(0,at.default)(this,e),this.model=new Io(t)}return(0,nt.default)(e,[{key:"data",get:function(){return this.model.data}},{key:"reset",value:function(){this.model.reset()}},{key:"qualities",get:function(){return this.model.qualities},set:function(e){this.model.qualities=e}},{key:"qualityInfo",get:function(){return this.model.qualityInfo},set:function(e){this.model.qualityInfo=e}},{key:"audioTracks",get:function(){return this.model.audioTracks},set:function(e){this.model.audioTracks=e}},{key:"textTracks",get:function(){return this.model.textTracks},set:function(e){this.model.textTracks=e}},{key:"streamType",get:function(){return this.model.streamType},set:function(e){this.model.streamType=e}},{key:"liveStreamInfo",get:function(){return this.model.liveStreamInfo},set:function(e){this.model.liveStreamInfo=e}},{key:"bufferLength",get:function(){return this.model.bufferLength},set:function(e){this.model.bufferLength=e}},{key:"cdn",get:function(){return this.model.cdn},set:function(e){this.model.cdn=e}},{key:"drmType",get:function(){return this.model.drmType},set:function(e){this.model.drmType=e}},{key:"contentSegment",get:function(){return this.model.contentSegment},set:function(e){this.model.contentSegment=e}},{key:"maxBandwidth",get:function(){return this.model.maxBandwidth},set:function(e){this.model.maxBandwidth=e}},{key:"time",get:function(){return this.model.time},set:function(e){this.model.time=e}},{key:"state",get:function(){return this.model.state},set:function(e){this.model.state=e}},{key:"duration",get:function(){return this.model.duration},set:function(e){this.model.duration=e}},{key:"bitrate",get:function(){return this.model.bitrate},set:function(e){this.model.bitrate=e}},{key:"started",get:function(){return this.model.started},set:function(e){this.model.started=e}},{key:"averageDroppedFps",get:function(){return this.model.averageDroppedFps},set:function(e){this.model.averageDroppedFps=e}},{key:"framerate",get:function(){return this.model.framerate},set:function(e){this.model.framerate=e}}],[{key:"modelName",get:function(){return"ContentPlaybackState"}}]),e}(),Lo=function(){function e(t){(0,at.default)(this,e),this.model=new Io(t)}return(0,nt.default)(e,[{key:"data",get:function(){return this.model.data}},{key:"reset",value:function(){this.model.reset()}},{key:"main",get:function(){return this.model.main},set:function(e){this.model.main=e}},{key:"video",get:function(){return this.model.video},set:function(e){this.model.video=e}},{key:"videoContainer",get:function(){return this.model.videoContainer},set:function(e){this.model.videoContainer=e}},{key:"ccContainer",get:function(){return this.model.ccContainer},set:function(e){this.model.ccContainer=e}},{key:"adContainer",get:function(){return this.model.adContainer},set:function(e){this.model.adContainer=e}},{key:"panelContainer",get:function(){return this.model.panelContainer},set:function(e){this.model.panelContainer=e}},{key:"adClickEl",get:function(){return this.model.adClickEl},set:function(e){this.model.adClickEl=e}},{key:"style",get:function(){return this.model.style},set:function(e){this.model.style=e}}],[{key:"modelName",get:function(){return"PlayerDom"}}]),e}(),Mo=function(){function e(t){(0,at.default)(this,e),this.model=new Io(t)}return(0,nt.default)(e,[{key:"data",get:function(){return this.model.data}},{key:"reset",value:function(){this.model.reset()}},{key:"container",get:function(){return this.model.container},set:function(e){this.model.container=e}},{key:"plugins",get:function(){return this.model.plugins},set:function(e){this.model.plugins=e}},{key:"autoplay",get:function(){return this.model.autoplay},set:function(e){this.model.autoplay=e}},{key:"id",get:function(){return this.model.id},set:function(e){this.model.id=e}},{key:"networkErrorRecovery",get:function(){return this.model.networkErrorRecovery},set:function(e){this.model.networkErrorRecovery=e}},{key:"networkTimeout",get:function(){return this.model.networkTimeout},set:function(e){this.model.networkTimeout=e}},{key:"performanceMode",get:function(){return this.model.performanceMode},set:function(e){this.model.performanceMode=e}},{key:"renderTextTrackNatively",get:function(){return this.model.renderTextTrackNatively},set:function(e){this.model.renderTextTrackNatively=e}},{key:"useNativeFullscreen",get:function(){return this.model.useNativeFullscreen},set:function(e){this.model.useNativeFullscreen=e}},{key:"keyboardScope",get:function(){return this.model.keyboardScope},set:function(e){this.model.keyboardScope=e}},{key:"playsInline",get:function(){return this.model.playsInline},set:function(e){this.model.playsInline=e}},{key:"useNativeControls",get:function(){return this.model.useNativeControls},set:function(e){this.model.useNativeControls=e}},{key:"overrides",get:function(){return this.model.overrides},set:function(e){this.model.overrides=e}},{key:"logLevel",get:function(){return this.model.logLevel},set:function(e){this.model.logLevel=e}},{key:"language",get:function(){return this.model.language},set:function(e){this.model.language=e}},{key:"audioLanguage",get:function(){return this.model.audioLanguage},set:function(e){this.model.audioLanguage=e}},{key:"textLanguage",get:function(){return this.model.textLanguage},set:function(e){this.model.textLanguage=e}},{key:"localizationLanguage",get:function(){return this.model.localizationLanguage},set:function(e){this.model.localizationLanguage=e}},{key:"localization",get:function(){return this.model.localization},set:function(e){this.model.localization=e}},{key:"idleDelay",get:function(){return this.model.idleDelay},set:function(e){this.model.idleDelay=e}},{key:"enableOm",get:function(){return this.model.enableOm},set:function(e){this.model.enableOm=e}},{key:"enableMoat",get:function(){return this.model.enableMoat},set:function(e){this.model.enableMoat=e}},{key:"reuseVideoElement",get:function(){return this.model.reuseVideoElement},set:function(e){this.model.reuseVideoElement=e}},{key:"ignoreBlankTextTracks",get:function(){return this.model.ignoreBlankTextTracks},set:function(e){this.model.ignoreBlankTextTracks=e}},{key:"sizeCheckInterval",get:function(){return this.model.sizeCheckInterval},set:function(e){this.model.sizeCheckInterval=e}}],[{key:"modelName",get:function(){return"PlayerOptions"}}]),e}(),Ro=function(){function e(t){(0,at.default)(this,e),this.model=new Io(t)}return(0,nt.default)(e,[{key:"data",get:function(){return this.model.data}},{key:"reset",value:function(){this.model.reset()}},{key:"streamTime",get:function(){return this.model.streamTime},set:function(e){this.model.streamTime=e}},{key:"streamDuration",get:function(){return this.model.streamDuration},set:function(e){this.model.streamDuration=e}},{key:"isAutoplay",get:function(){return this.model.isAutoplay},set:function(e){this.model.isAutoplay=e}},{key:"isCurrentVideoAd",get:function(){return this.model.isCurrentVideoAd},set:function(e){this.model.isCurrentVideoAd=e}},{key:"isFullscreen",get:function(){return this.model.isFullscreen},set:function(e){this.model.isFullscreen=e}},{key:"isMuted",get:function(){return this.model.isMuted},set:function(e){this.model.isMuted=e}},{key:"isMuteAtPlayStart",get:function(){return this.model.isMuteAtPlayStart},set:function(e){this.model.isMuteAtPlayStart=e}},{key:"started",get:function(){return this.model.started},set:function(e){this.model.started=e}},{key:"userHasUnmuted",get:function(){return this.model.userHasUnmuted},set:function(e){this.model.userHasUnmuted=e}},{key:"volume",get:function(){return this.model.volume},set:function(e){this.model.volume=e}},{key:"usesSsai",get:function(){return this.model.usesSsai},set:function(e){this.model.usesSsai=e}},{key:"streamId",get:function(){return this.model.streamId},set:function(e){this.model.streamId=e}},{key:"suspended",get:function(){return this.model.suspended},set:function(e){this.model.suspended=e}}],[{key:"modelName",get:function(){return"PresentationState"}}]),e}(),Do=function(){function e(){(0,at.default)(this,e),this.mdlCollection={},this.createModels()}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.mdlCollection)delete this.mdlCollection[e];this.mdlCollection=null}},{key:"getModel",value:function(e){return this.mdlCollection[e]}},{key:"ContentPlaybackState",get:function(){return this.mdlCollection.ContentPlaybackState}},{key:"PlayerDom",get:function(){return this.mdlCollection.PlayerDom}},{key:"PlayerOptions",get:function(){return this.mdlCollection.PlayerOptions}},{key:"PresentationState",get:function(){return this.mdlCollection.PresentationState}},{key:"createModels",value:function(){for(var e=[No,Lo,Mo,Ro],t=e.length;t--;){var i=e[t],n=i.modelName,a=_o[this.classToCfgName(n)];this.mdlCollection[n]=new i(a)}}},{key:"classToCfgName",value:function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")+"_config"}}]),e}(),Oo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.system,i=new Do,n=new yo("ModelCollectionProxy",i),a=e.body.playerOptions;this.facade.registerProxy(n),this.setPlayerOptions(n,a),this.facade.registerProxy(new bo("PerformanceProxy"));var r=new mo("LocalizationProxy",a.localizationLanguage);this.facade.registerProxy(r),this.facade.registerProxy(new So("TextTrackProxy",{native:a.renderTextTrackNatively,language:a.textLanguage})),t.isBrowser&&this.createDomProxy(n),this.facade.registerProxy(new go),this.log("debug","Model prepared")}},{key:"setPlayerOptions",value:function(e,t){var i=e.getModel("PlayerOptions");for(var n in t)!Ht(i[n])&&(i[n]=t[n])}},{key:"createDomProxy",value:function(e){var t=e.getModel("PlayerDom"),i=new Eo("PlayerDomProxy",t);this.facade.registerProxy(i)}}]),i}(io),Bo=function(){function e(t){var i=this;(0,at.default)(this,e),this.event={dispatchPluginEvent:function(e){i.options.dispatch(e)}},this.util={queryStrFromObj:function(e,t){return gn.encode(e)}},this.options=t}return(0,nt.default)(e,[{key:"player",get:function(){return this.options.player}},{key:"logger",get:function(){return this.options.logger}},{key:"system",get:function(){return Zn}},{key:"appNamespace",get:function(){return this.system.appNamespace}},{key:"avia",get:function(){return this.system.appNamespace}},{key:"playerOptions",get:function(){return this.options.playerOptions}},{key:"buildInfo",get:function(){return Fa}},{key:"localization",get:function(){return this.options.localization}},{key:"dom",get:function(){var e=this.options.domProxy;return{main:null==e?void 0:e.getMain(),get video(){return null==e?void 0:e.getVideo()},videoContainer:null==e?void 0:e.getElement("videoContainer"),ccContainer:null==e?void 0:e.getElement("ccContainer"),adContainer:null==e?void 0:e.getElement("adContainer"),adClickEl:null==e?void 0:e.getElement("adClickEl"),style:null==e?void 0:e.getElement("style")}}},{key:"hookManager",get:function(){return this.options.hookManager}}]),e}(),Uo=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.apply(this,arguments)).plugins={},e.pendingLoads=null,e.services=null,e}return(0,nt.default)(i,[{key:"onRemove",value:function(){var e=this;Object.keys(this.plugins).forEach(function(t){try{e.killPlugin(t)}catch(i){e.logger.warn("Error destroying plugin: ".concat(t),i)}}),this.plugins=null,this.pendingLoads=null,this.services=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"removePlugin",value:function(e){this.killPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins[e]||null}},{key:"loadPlugin",value:function(e){return this.createPlugin(e)}},{key:"listNotificationInterests",value:function(){return["loadPlugins","adbreakstart","contentstart","removePlugin"]}},{key:"handleNotification",value:function(e){switch(e.name){case"loadPlugins":this.loadPlugins(e.body);break;case"removePlugin":this.removePlugin(e.body.name);break;case"adbreakstart":case"contentstart":this.loadPendingPlugins()}}},{key:"createPluginServices",value:function(){var e=this.facade.retrieveMediator("AppMediator");return new Bo({player:e.getAppApi(),domProxy:this.facade.retrieveProxy("PlayerDomProxy"),localization:this.facade.retrieveProxy("LocalizationProxy").getApi(),playerOptions:this.playerOptions,dispatch:function(t){e.dispatchPluginEvent(t)},hookManager:this.facade.retrieveProxy("HookProxy"),logger:this.logger})}},{key:"playerOptions",get:function(){return this.getModel("PlayerOptions").data}},{key:"initPluginServices",value:function(){this.services||(this.services=this.createPluginServices())}},{key:"createPlugins",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.createPlugin(e)}))}},{key:"createPlugin",value:function(e){return It(this,null,ze.default.mark(function t(){var i,n,a,r,o;return ze.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.factory,a=e.options,Ft(n)){t.next=3;break}throw new mr("7001","Invalid plugin factory",e);case 3:return t.prev=3,t.next=6,n(this.services,a);case 6:r=t.sent,t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(3),new mr("7003","Unable to load plugin",e,t.t0);case 12:if(r){t.next=14;break}return t.abrupt("return");case 14:if(o=null==(i=r.getId)?void 0:i.call(r)){t.next=17;break}throw new mr("7002","Invalid plugin ID",e);case 17:return this.plugins[o]=r,this.log("info","Created plugin '".concat(o,"'")),t.abrupt("return",r);case 20:case"end":return t.stop()}},t,this,[[3,9]])}))}},{key:"killPlugin",value:function(e){var t=this.plugins[e];t&&(Ft(t.destroy)&&t.destroy(),delete this.plugins[e])}},{key:"loadPendingPlugins",value:function(){var e=this;this.pendingLoads&&(this.createPlugins(this.pendingLoads).catch(function(t){e.sendNotification("playererror",t)}),this.pendingLoads=null)}},{key:"loadPlugins",value:function(e){var t=e.callback,i=e.plugins,n=!this.getModel("PresentationState").started;if(null==i?void 0:i.length){this.initPluginServices();var a=i.filter(function(e){return"low"===e.priority}),r=i.filter(function(e){return"low"!==e.priority});n&&(this.pendingLoads=a);var o=n?r:a.concat(r);this.createPlugins(o).then(function(){return t()}).catch(function(e){return t(e)})}else t()}}]),i}(Ao),Fo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){this.facade.registerMediator(new Uo("PluginMediator")),this.log("debug","Plugins Prepared")}}]),i}(io),Vo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){this.facade.registerMediator(new ko("TimerMediator")),this.log("debug","Timer mediator registered")}}]),i}(io),Ho=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this,e)).app=n,a}return(0,nt.default)(i,[{key:"presentationMediator",get:function(){return this.facade.retrieveMediator("PresentationMediator")}},{key:"getBuffered",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.presentationMediator.getBuffered(e)}},{key:"primeVideoElement",value:function(){var e,t=this.facade.retrieveProxy("PlayerDomProxy"),i=this.getModel("PlayerOptions");return t.primeVideo(null==(e=i.overrides)?void 0:e.blankVideoUrl)}},{key:"offsetTimedText",value:function(e){var t;null==(t=this.presentationMediator)||t.offsetTimedText(e)}},{key:"setFullscreenElement",value:function(e){this.facade.retrieveMediator("FullscreenMediator").fullscreenElement=e}},{key:"getFullscreenElement",value:function(){return this.facade.retrieveMediator("FullscreenMediator").fullscreenElement}},{key:"getSessionTime",value:function(){var e;return(null==(e=this.presentationMediator)?void 0:e.getSessionTime())||null}},{key:"getPlaybackTime",value:function(){var e;return(null==(e=this.presentationMediator)?void 0:e.getPlaybackTime())||null}},{key:"updateDimensions",value:function(){var e;null==(e=this.presentationMediator)||e.checkSize()}},{key:"onRemove",value:function(){this.app=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"getAppApi",value:function(){return this.app.getApi()}},{key:"getConfigAsJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.getProxy("ModelCollectionProxy").getModel("PlayerOptions").data;return JSON.stringify({resource:this.getCurrentResource(),playerOptions:t,buildInfo:Fa},function(e,t){return t instanceof HTMLElement?void 0:t},e)}},{key:"validateSeek",value:function(e,t){if(isNaN(e))return this.log("warn","Invalid seek() time [".concat(e,"] supplied")),null;var i=this.getModel("PresentationState"),n=this.getProxy("ContentPlaybackStateProxy"),a=n&&"LIVE"===n.model.streamType;return!i||!n||i.isCurrentVideoAd||a?(this.log("warn","seek() may not be called in the current context"),null):Oi(e,0,t)}},{key:"isPlaybackSuspended",value:function(){return this.getModel("PresentationState").suspended}},{key:"getContainerRect",value:function(){var e=this.getProxy("PlayerDomProxy");return e?e.getPresentationRect():null}},{key:"getCurrentResource",value:function(){var e=this.getProxy("ResourceProxy");return(null==e?void 0:e.resource)||null}},{key:"killCurrentResource",value:function(){var e=this,t=this.getProxy("ResourceProxy");if(!t)return Promise.resolve();var i=t.resource,n=this.getProxy("ContentPlaybackStateProxy"),a="LIVE"===n.model.streamType||"DVR"===n.model.streamType,r=this.presentationMediator;return this.log("info","Killing current resource"),r?r.close().then(function(){a&&e.sendNotification("livepresentationstopped",{resource:i})}).catch(function(e){ci.error(e)}):Promise.resolve()}},{key:"skipAd",value:function(){this.presentationMediator.skipAd()}},{key:"getPlugin",value:function(e){var t=this.facade.retrieveMediator("PluginMediator");return t?t.getPlugin(e):null}},{key:"dispatchPluginEvent",value:function(e){this.app.sendEvent("pluginevent",e)}},{key:"getMuteState",value:function(){var e=this.getModel("PresentationState");return e?e.isMuted:null}},{key:"getVolume",value:function(){var e=this.getModel("PresentationState");return e?e.volume:NaN}},{key:"getDimensions",value:function(){var e=this.getProxy("PlayerDomProxy");return e?e.getDimensions():null}},{key:"getAdBreakTimes",value:function(){var e;return(null==(e=this.presentationMediator)?void 0:e.getAdBreakTimes())||null}},{key:"grabFrame",value:function(){var e=this.getProxy("PlayerDomProxy"),t=null==e?void 0:e.getVideo();if(!t)return null;var i=document.createElement("canvas"),n=i.getContext("2d"),a=i.width=t.videoWidth,r=i.height=t.videoHeight;n.drawImage(t,0,0,a,r);var o=i.toDataURL(),s=document.createElement("img");return s.setAttribute("src",o),s}},{key:"getKeyEventTarget",value:function(){return this.facade.retrieveMediator("KeyCommandMediator").getEventTarget()}},{key:"disableKeyCommands",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=null==(e=this.facade)?void 0:e.retrieveMediator("KeyCommandMediator");t?null==i||i.disable():null==i||i.enable()}},{key:"listNotificationInterests",value:function(){return Vi(Za)}},{key:"sendErrorEvent",value:function(e,t){this.app.sendEvent(e,t)}},{key:"handleNotification",value:function(e){this.app.sendEvent(e.name,e.body)}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this)}}]),i}(Ao),Wo=_t(Nt(),1),jo=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this,e,n)).isFullscreen=!1,a.fsElement=null,a.enabled=!1,a.pIsAndroidFirefox=null,a.fsApiSupported=!0,a.fsMgr=null,a.useCustomFullscreen=!0,a.metadataLoadedDelayHandle=null,a.iosPropNames={ENTER_EVENT:"webkitbeginfullscreen",EXIT_EVENT:"webkitendfullscreen",ENTER_METHOD:"webkitEnterFullscreen",EXIT_METHOD:"webkitExitFullscreen",SUPPORTED:"webkitSupportsFullscreen"},a.fsMgr=Wo.default,a.changeHandler=function(e){return a.hChange(e)},a}return(0,nt.default)(i,[{key:"fullscreenElement",get:function(){return this.fsElement},set:function(e){if(e instanceof HTMLElement){var t=this.system;t.isIos||t.isAndroid||(this.fsElement=e)}}},{key:"onRemove",value:function(){clearTimeout(this.metadataLoadedDelayHandle),!this.fsApiSupported&&this.fsElement&&(this.fsElement.removeEventListener(this.iosPropNames.ENTER_EVENT,this.changeHandler),this.fsElement.removeEventListener(this.iosPropNames.EXIT_EVENT,this.changeHandler)),this.fsMgr&&Ft(this.fsMgr.off)&&this.fsMgr.off("change",this.changeHandler),this.fsElement=null,this.fsMgr=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"enter",value:function(){if(this.enabled)return this.useCustomFullscreen?(this.isFullscreen=!0,void this.sendFullscreenNotification()):void(this.fsApiSupported?this.fsMgr.request(this.fsElement):this.enterFsIos())}},{key:"exit",value:function(){if(this.enabled)return this.useCustomFullscreen?(this.isFullscreen=!1,void this.sendFullscreenNotification()):void(this.fsApiSupported?this.fsMgr.exit():this.exitFsIos())}},{key:"isFullScreenPermitted",value:function(){return this.enabled}},{key:"isFullScreen",value:function(){return this.isFullscreen}},{key:"isAndroidFirefox",get:function(){if(null==this.pIsAndroidFirefox){var e=this.system;this.pIsAndroidFirefox="Android"===e.os&&"Firefox"===e.browser}return this.pIsAndroidFirefox}},{key:"handleNotification",value:function(e){var t=this,i=e.name;"videoelementadded"!==i?"streammetadata"!==i?this.enabled&&("enterFullscreenRequest"===i?this.enter():this.exit()):this.metadataLoadedDelayHandle=setTimeout(function(){return t.handleMetadataLoaded()},20):this.onRegister()}},{key:"listNotificationInterests",value:function(){return["videoelementadded","streammetadata","enterFullscreenRequest","exitFullscreenRequest"]}},{key:"handleMetadataLoaded",value:function(){this.enabled=this.enabled||this.webkitIosEnabled(),this.enabled&&this.sendNotification("fullscreenAvailable",null)}},{key:"hChange",value:function(e){this.isFullscreen=this.fsApiSupported?Wo.default.isFullscreen:this.checkWebkitIosState(e),this.isAndroidFirefox&&(this.isFullscreen&&this.fsElement.setAttribute("controls",""),!this.isFullscreen&&this.fsElement.removeAttribute("controls")),this.sendFullscreenNotification()}},{key:"sendFullscreenNotification",value:function(){this.sendNotification("fullscreenChange",{isFullscreen:this.isFullscreen},"internal")}},{key:"enterFsIos",value:function(){this.fsElement[this.iosPropNames.ENTER_METHOD]()}},{key:"exitFsIos",value:function(){this.fsElement[this.iosPropNames.EXIT_METHOD]()}},{key:"webkitIosEnabled",value:function(){return this.system.isIos&&this.fsElement[this.iosPropNames.SUPPORTED]}},{key:"checkWebkitIosState",value:function(e){return e.type===this.iosPropNames.ENTER_EVENT}},{key:"onRegister",value:function(){if(this.useCustomFullscreen=!this.getModel("PlayerOptions").useNativeFullscreen,this.useCustomFullscreen)this.enabled=!0;else{var e=this.facade.retrieveProxy("PlayerDomProxy");this.fsMgr.isEnabled?this.fsElement=e.getMain():(this.fsApiSupported=!1,this.fsElement=e.getVideo()),this.fsApiSupported&&this.fsElement&&this.fsMgr.isEnabled?(this.enabled=!0,this.fsMgr.on("change",this.changeHandler)):this.fsElement&&!this.fsApiSupported&&(this.fsElement.addEventListener(this.iosPropNames.ENTER_EVENT,this.changeHandler),this.fsElement.addEventListener(this.iosPropNames.EXIT_EVENT,this.changeHandler))}}}]),i}(Ao),$o=[{action:"enterFullScreen",primaryKey:"f",keyCode:70},{action:"increaseVolume",primaryKey:"ArrowUp",keyCode:38},{action:"increaseVolume",primaryKey:null,keyCode:175},{action:"increaseVolume",primaryKey:null,keyCode:183},{action:"decreaseVolume",primaryKey:"ArrowDown",keyCode:40},{action:"decreaseVolume",primaryKey:null,keyCode:174},{action:"decreaseVolume",primaryKey:null,keyCode:182},{action:"seekBack",primaryKey:"ArrowLeft",keyCode:37},{action:"seekForward",primaryKey:"ArrowRight",keyCode:39},{action:"togglePlay",primaryKey:" ",keyCode:32},{action:"togglePlay",primaryKey:null,keyCode:179},{action:"toggleMute",primaryKey:"m",keyCode:77},{action:"toggleMute",primaryKey:"-",keyCode:109},{action:"toggleMute",primaryKey:null,keyCode:173},{action:"toggleTextTrack",primaryKey:"c",keyCode:67},{action:"stop",primaryKey:null,keyCode:178},{action:"playListNext",primaryKey:null,keyCode:176},{action:"playListPrev",primaryKey:null,keyCode:177}],Ko=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.apply(this,arguments)).vpi=null,e.seekEnabled=!1,e.VOLUME_INCREMENT=.05,e.SEEK_FACTOR_DISCRETE=.05,e}return(0,nt.default)(i,[{key:"onRemove",value:function(){clearTimeout(this.timeout),this.vpi=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"hKeyDown",value:function(e){this.processKeyEvent(e)}},{key:"player",get:function(){if(!this.vpi){var e=this.facade.retrieveMediator("AppMediator");this.vpi=e.getAppApi()}return this.vpi}},{key:"stopEvent",value:function(e){e.stopImmediatePropagation(),e.preventDefault()}},{key:"processKeyEvent",value:function(e){if(e.ctrlKey||e.shiftKey||e.metaKey||"Meta"===e.key||"Shift"===e.key||"Control"===e.key)return null;var t=this.getCommand(e,!1);t&&(this.doAction(t),this.stopEvent(e))}},{key:"doAction",value:function(e){var t,i,n,a=e.action;switch(a){case"increaseVolume":case"decreaseVolume":n="decreaseVolume"===a?-1:1,i=Oi((t=this.player.volume)+this.VOLUME_INCREMENT*n,0,1),this.player.muted&&i>0&&(this.player.muted=!1),this.player.volume=i,this.notify({action:a,value:this.player.volume});break;case"seekBack":case"seekForward":if(!this.seekEnabled)return;var r=this.player.contentDuration;if(n="seekBack"===a?-1:1,t=this.player.contentTime,!r||isNaN(r)||1===n&&"DVR"===this.player.streamType&&this.player.isPlayingLive)return;i=Oi(t+this.SEEK_FACTOR_DISCRETE*n*r,0,r),this.notify({action:a,position:i,duration:r}),this.player.seek(i);break;case"enterFullScreen":this.player.enterFullscreen();break;case"togglePlay":"LIVE"!==this.player.streamType&&this.player.togglePlayPause();break;case"toggleMute":this.player.muted=!this.player.muted,this.notify({action:a,muted:this.player.muted});break;case"toggleTextTrack":this.player.textTrackEnabled=!this.player.textTrackEnabled;break;case"playListNext":case"playListPrev":n="playListPrev"===a?-1:1,this.notify({action:a});break;case"stop":"LIVE"===this.player.streamType?this.player.stop():this.player.pause()}}},{key:"notify",value:function(e){this.sendNotification("hotkeyaction",e,"internal")}},{key:"handleNotification",value:function(e){switch(e.name){case"adbreakstart":this.seekEnabled=!1;break;case"contentcomplete":this.seekEnabled=!1,this.disable();break;case"contentstart":case"contentsegmentstart":this.seekEnabled="LIVE"!==this.player.streamType}}},{key:"listNotificationInterests",value:function(){var e=Za;return[e.AD_BREAK_START,e.CONTENT_START,e.CONTENT_SEGMENT_START,e.CONTENT_COMPLETE]}},{key:"onRegister",value:function(){var e=this;(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.enable(),$o.forEach(function(t){return e.registerCommandDef(t)})}}]),i}(function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.apply(this,arguments)).defs=[],e.scope=null,e.keyDownHandler=null,e._disabled=!1,e}return(0,nt.default)(i,[{key:"onRemove",value:function(){this.scope=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"disabled",get:function(){return"none"===this.scope||this._disabled}},{key:"getEventTarget",value:function(){switch(this.scope){case"player":return this.getPlayerContainer();case"document":return window.document;default:return null}}},{key:"setScope",value:function(e){null===this.scope&&(this.scope=e,this.activateScope(!0))}},{key:"registerCommandDef",value:function(e){this.hasScope&&this.defs.push(e)}},{key:"disable",value:function(){this.hasScope&&!this._disabled&&(this.scopeActive&&this.activateScope(!1),this._disabled=!0)}},{key:"enable",value:function(){this.hasScope?(this._disabled=!1,!this.scopeActive&&this.activateScope(!0)):this.logger.warn("Attempted to enable key command mediator that has scope of NONE.")}},{key:"validatePrimaryKey",value:function(e,t){var i=t.key,n=Vt(i)&&i.toLowerCase(),a=t.keyCode;return!(!i&&!a||e.primaryKey!==i&&e.primaryKey!==n&&e.keyCode!==a)}},{key:"getCommand",value:function(e){for(var t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.defs.length,a=null;n--;)if(t=this.defs[n],this.validatePrimaryKey(t,e)&&(!i||this.hasRequiredModifiers(t,e))){a=t;break}return a}},{key:"hasRequiredModifiers",value:function(e,t){var i=!!((e.requireCtrl?1:0)^(t.ctrlKey?1:0)),n=!!((e.requireShift?1:0)^(t.shiftKey?1:0)),a=!!((e.requireMeta?1:0)^(t.metaKey?1:0));return!i&&!n&&!a}},{key:"activateScope",value:function(e){if(this.hasScope&&!this._disabled){var t=this.getEventTarget();t&&t[e?"addEventListener":"removeEventListener"]("keydown",this.keyDownHandler),this.scopeActive=e}}},{key:"getPlayerContainer",value:function(){var e,t=null==(e=this.facade)?void 0:e.retrieveProxy("PlayerDomProxy");return null==t?void 0:t.getMain()}},{key:"hasScope",get:function(){return"none"!==this.scope}},{key:"handleNotification",value:function(e){}},{key:"onRegister",value:function(){var e=this;(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.keyDownHandler=function(t){return e.hKeyDown(t)}}}]),i}(Ao)),Go=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.facade,i=e.body.app;t.registerMediator(new Ho("AppMediator",i));var n=this.system;if(n.isBrowser){n.isTv||t.registerMediator(new jo("FullscreenMediator"));var a=new Ko("KeyCommandMediator");t.registerMediator(a),a.setScope(this.getScope(n,e.body.playerOptions)),this.log("debug","View prepared")}else this.log("info","Skipping view creation")}},{key:"getScope",value:function(e,t){return!e.isBrowser||e.isTv?"none":t.keyboardScope||"player"}}]),i}(io),qo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"initializeMacroCommand",value:function(){this.addSubCommand(Oo),this.addSubCommand(ho),this.addSubCommand(Vo),this.addSubCommand(Go),this.addSubCommand(Fo)}}]),i}(ao),zo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){if(this.facade.retrieveMediator("AppMediator")){var t=e.name,i=e.body,n=i.error||i;this.setDetails(t,n),n.fatal?this.logger.error(n.message):this.logger.warn(n.message),this.sendNotification("error",{error:n})}}},{key:"setDetails",value:function(e,t){var i=null,n=null;switch(e){case"resourceerror":i="Resource";break;case"videostarterror":i="Video start";break;case"videoplaybackerror":i="Playback";break;case"aderror":i="Ad";break;case"adstalled":i="Ad",n="Stalled ad detected"}n&&(t.message=n),i&&(t.category=i)}}]),i}(io),Yo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){this.facade.removeMediator("PresentationMediator"),this.facade.removeProxy("ResourceProxy"),this.facade.removeProxy("ContentPlaybackStateProxy"),this.facade.retrieveProxy("ModelCollectionProxy").reset()}}]),i}(io),Qo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this,i=e.name,n=e.body;if("changeLanguage"===i){var a=this.facade.retrieveProxy("LocalizationProxy"),r=n.language;a.changeLanguage(r).then(function(e){var i=t.facade.retrieveProxy("PlayerDomProxy");if(i){var n=i.getMain();n.setAttribute("aria-label",a.localize("media-player")),n.setAttribute("lang",a.language)}t.sendNotification("languagechange",{language:r}),t.sendNotification("localizationChange",{localeData:e})})}}}]),i}(io);function Xo(e){return"".concat(e.id,":").concat(e.name)}var Zo="Performance API error",Jo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t,i,n=e.body.metric,a=n.type,r=n.value;if(performance)switch(a){case"mark":try{null==(t=performance.mark)||t.call(performance,Xo(r),{startTime:r.startTime})}catch(e){this.logger.warn(Zo,e.toString())}break;case"measure":try{var o=Xo(r);null==(i=null==performance?void 0:performance.measure)||i.call(performance,o,o+":start",o+":end")}catch(e){this.logger.warn(Zo,e.toString())}}}}]),i}(io),es=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t,i=this.facade.retrieveMediator("PresentationMediator"),n=this.facade.retrieveProxy("ResourceProxy"),a=null==n?void 0:n.resource;if((null==(t=this.contentPlaybackStateProxy)?void 0:t.model)&&a)switch(e.name){case"play":var r=!!i,o=r&&this.getModel("PresentationState").started;r&&"external"===e.type&&!o?this.invokePlayOnUserGesture(i):o&&(null==i||i.play());break;case"pause":null==i||i.pause();break;case"seek":i.seek(e.body.value);break;case"switchAudioTrack":i.adapter.setAudioTrack(e.body.value);break;case"switchTextTrack":var s=e.body.value;if(s){this.facade.retrieveProxy("TextTrackProxy").language=s.language;var l=this.contentPlaybackStateProxy.getTextTrackById(s.id);i.adapter.setTextTrack(l)}break;case"switchTextMode":var u=e.body.value,c=this.facade.retrieveProxy("TextTrackProxy");c.enabled=u,(null==i?void 0:i.adapter)&&i.adapter.setTextTrackMode(c.mode);break;case"mutechange":i.mute(e.body.muted);break;case"volumechange":var d=e.body.volume;!isNaN(d)&&i.setVolume(d)}else this.log("debug","play() can not be invoked in this context.")}},{key:"contentPlaybackStateProxy",get:function(){return this.facade.retrieveProxy("ContentPlaybackStateProxy")}},{key:"shouldSkipPriming",value:function(){var e=this.facade.retrieveProxy("PlayerDomProxy"),t=this.getModel("PlayerOptions").overrides,i=this.system;return!e||i.supportsUnrestrictedAutoplay||!0===(null==t?void 0:t.skipPriming)}},{key:"invokePlayOnUserGesture",value:function(e){var t=this,i=this.facade.retrieveProxy("PlayerDomProxy"),n=this.getModel("PlayerOptions").overrides,a=this.system;e.beforePlayOnUserGesture(),this.shouldSkipPriming()?e&&e.playOnUserGesture():i.primeVideo(null==n?void 0:n.blankVideoUrl).then(function(){if("iPhone"===a.device){var t="timeupdate",n=i.getVideo();n.addEventListener(t,function i(a){n.removeEventListener(t,i),setTimeout(function(){return e.playOnUserGesture()},200)})}else e.playOnUserGesture()}).catch(function(e){t.log("error","ERROR - PlaybackCommand: Priming FAILED.  ".concat(e.message)),t.facade.sendNotification("autoplayblocked",e,"internal")})}}]),i}(io),ts=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.apply(this,arguments)).isReady=!1,e.pUserQualityCategory="AUTO",e}return(0,nt.default)(i,[{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this);var e=this.facade.retrieveProxy("ModelCollectionProxy");this.contentPlaybackState=e.getModel(No.modelName),this.contentPlaybackState.qualityInfo={mode:"auto",quality:null,qualities:[]},this.contentPlaybackState.textTracks={track:null,tracks:[]},this.contentPlaybackState.audioTracks={track:null,tracks:[]},this.isReady=!0}},{key:"onRemove",value:function(){this.contentPlaybackState=null,this.thumbnailTrack=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"processQualityProfile",value:function(e){e=$i(e.map(function(e){return Ji(e)})),this.contentPlaybackState.qualities=e,this.contentPlaybackState.qualityInfo.qualities=e.filter(function(e){return e.enabled}),"manual"!==this.qualitySwitchingMode&&(this.qualitySwitchingMode=e.length?"auto":"unavailable")}},{key:"addTextTracks",value:function(e){this.contentPlaybackState.textTracks.tracks=e}},{key:"getTextTrackById",value:function(e){return this.contentPlaybackState.textTracks.tracks.find(function(t){return t.id===e})}},{key:"getThumbnail",value:function(e){var t;return null==(t=this.thumbnailTrack)?void 0:t.getCueAt(e)}},{key:"textTrackInfo",get:function(){return this.contentPlaybackState.textTracks}},{key:"textTrack",get:function(){return this.contentPlaybackState.textTracks.track},set:function(e){this.contentPlaybackState.textTracks.track=e}},{key:"isAbrSwitchingAvailable",get:function(){return!!this.qualities&&this.qualities.length>1}},{key:"userQualityCategory",get:function(){return this.pUserQualityCategory},set:function(e){this.pUserQualityCategory=e}},{key:"qualitySwitchingMode",get:function(){return this.contentPlaybackState.qualityInfo.mode},set:function(e){this.contentPlaybackState.qualityInfo.mode=e}},{key:"qualities",get:function(){return this.contentPlaybackState.qualities},set:function(e){this.contentPlaybackState.qualities=e}},{key:"maxBandwidth",set:function(e){this.contentPlaybackState.maxBandwidth=isNaN(this.contentPlaybackState.maxBandwidth)?e:Math.max(e,this.contentPlaybackState.maxBandwidth)}},{key:"model",get:function(){return this.contentPlaybackState}},{key:"minIndex",get:function(){return 0}},{key:"maxIndex",get:function(){var e=this.contentPlaybackState.qualityInfo.qualities;return(null==e?void 0:e.length)?this.contentPlaybackState.qualityInfo.qualities.length-1:0}},{key:"minBitrate",get:function(){return this.contentPlaybackState.qualityInfo.qualities[this.minIndex].bitrate}},{key:"maxBitrate",get:function(){return this.contentPlaybackState.qualityInfo.qualities[this.maxIndex].bitrate}},{key:"qualityInfo",get:function(){return this.contentPlaybackState.qualityInfo}},{key:"quality",set:function(e){this.contentPlaybackState.qualityInfo.quality=e}},{key:"audioTrackInfo",get:function(){return this.contentPlaybackState.audioTracks}}]),i}(Yr),is=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"mock",value:function(e){this.pResource=e}},{key:"onRemove",value:function(){this.pResource=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.pResource=this.data}},{key:"resource",get:function(){return this.pResource}},{key:"location",get:function(){return this.pResource.location}},{key:"playback",get:function(){return this.pResource.playback}},{key:"metadata",get:function(){return this.pResource.metadata}},{key:"ad",get:function(){return this.pResource.ad}},{key:"adTrackingSettings",get:function(){return this.pResource.ad.viewabilityTracking}},{key:"hasValidMediaUrl",get:function(){return!Ut(this.location.mediaUrl)}}]),i}(Yr),ns=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.apply(this,arguments)).contentDurationReleased=!1,e.resumeTimeMaxProximityToAdBreak=5,e.isClickToPlay=!1,e.fullscreenRestrictedDuringAdPlay=!1,e._hasContent=!0,e.contentComplete=!1,e.timeSpent={startTime:null,lastTime:0,sessionTime:0,playbackTime:0,elapsedTime:0},e}return(0,nt.default)(i,[{key:"onRemove",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"start",value:function(){var e=this.resourceProxy.location.mediaUrl;this._hasContent=Vt(e)&&!Ut(e)}},{key:"hasContent",get:function(){return this._hasContent}},{key:"startSession",value:function(){this.updateTimeSpent()}},{key:"close",value:function(){var e,t=this;if(this.closing)return this.closing;var i=null==(e=this.contentPlaybackStateProxy)?void 0:e.model,n=(null==i?void 0:i.time)||0,a=(null==i?void 0:i.duration)||0,r=this.isAdPlaying(),o=this.resourceProxy.resource;return this.respondToPlaybackStateChange("stopped"),this.contentPlaybackStateProxy.isReady=!1,this.closing=this.adapterTask.then(function(){t.startedPlaying&&t.pause(),t.log("info","Closing Presentation"),t.closeAds()}).then(function(){return t.adapter?t.adapter.destroy():null}).then(function(){var e=!r&&t.hasContent&&!t.isContentComplete(),i=r;t.notify("resourceend",{resource:o,contentTime:n,contentDuration:a,contentInterrupted:e,adInterrupted:i,interrupted:e||i})}).catch(function(e){throw ci.error(e),e}).then(function(){t.closing=null})}},{key:"getPlayerVersionInfo",value:function(){return"".concat(Fa.playerName,"_").concat(Fa.playerVersion)}},{key:"startContentSegment",value:function(){}},{key:"closeAds",value:function(){}},{key:"beforePlayOnUserGesture",value:function(){}},{key:"playOnUserGesture",value:function(){this.notify("videoLoadStart"),this.prepareForPlayback(!0)}},{key:"mute",value:function(e){this.muteVideo(e)}},{key:"play",value:function(){return this.contentComplete&&(this.contentComplete=!1),(0,Xe.default)((0,it.default)(i.prototype),"play",this).call(this)}},{key:"seek",value:function(e){return this.contentComplete&&(this.contentComplete=!1),this.seekVideo(e)}},{key:"setVolume",value:function(e){this.domProxy&&this.domProxy.setVideoVolume(e),(0,Xe.default)((0,it.default)(i.prototype),"setVolume",this).call(this,e)}},{key:"getAdBreakTimes",value:function(){return[]}},{key:"getSessionTime",value:function(){return null==this.timeSpent.startTime?null:this.updateTimeSpent().sessionTime}},{key:"getPlaybackTime",value:function(){return null==this.timeSpent.startTime?null:this.updateTimeSpent().playbackTime}},{key:"checkSize",value:function(){if(this.domProxy){var e=this.domProxy.getPresentationRect();e.width===this.currentRect.width&&e.height===this.currentRect.height||(this.currentRect=e,this.respondToSizeChange(),this.notify("presentationsizechange",{width:this.currentRect.width,height:this.currentRect.height}))}}},{key:"releaseContentDuration",value:function(e){this.contentDurationReleased=!0,this.notify("contentdurationavailable",{contentDuration:e})}},{key:"updateTimeSpent",value:function(){var e=performance.now();if(null==this.timeSpent.startTime){this.timeSpent.startTime=e;var t="first-frame",i={id:this.facade.appId,name:t,startTime:e};this.sendNotification("metric",{metric:new Ua(t,i,"mark")}),this.sendNotification("playbackstarted")}null==this.timeSpent.lastTime&&(this.timeSpent.lastTime=e);var n=e-this.timeSpent.startTime;return this.timeSpent.elapsedTime=n,this.timeSpent.sessionTime=n/1e3,"paused"!==this.contentPlaybackStateProxy.model.state&&(this.timeSpent.playbackTime+=(e-this.timeSpent.lastTime)/1e3,this.timeSpent.lastTime=e),this.timeSpent}},{key:"adjustStartTimeForAdBreakProximity",value:function(e,t){for(var i=0,n=t.length;i<n;i++){var a=t[i].startTime-e;if(a>=0&&a<this.resumeTimeMaxProximityToAdBreak)return e-this.resumeTimeMaxProximityToAdBreak}return e}},{key:"domProxy",get:function(){return this.facade.retrieveProxy("PlayerDomProxy")}},{key:"muteVideo",value:function(e){(0,Xe.default)((0,it.default)(i.prototype),"muteVideo",this).call(this,e),this.domProxy&&this.domProxy.muteVideo(e)}},{key:"respondToPlaybackStateChange",value:function(e){(0,Xe.default)((0,it.default)(i.prototype),"respondToPlaybackStateChange",this).call(this,e),this.timeSpent.lastTime=null}},{key:"respondToFullscreenChange",value:function(e){this.checkSize(),this.notify("fullscreenchange",{fullscreen:e})}},{key:"respondToVideoPaused",value:function(){this.respondToPlaybackStateChange("paused")}},{key:"respondToVideoPlaying",value:function(){this.presoModel.started||(this.presoModel.started=!0),this.respondToPlaybackStateChange("playing")}},{key:"respondToVideoSeeking",value:function(){this.notify("seekstart")}},{key:"respondToVideoSeeked",value:function(){this.notify("seekcomplete")}},{key:"respondToQualityChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.notify("qualitychange",{quality:e})}},{key:"respondToError",value:function(e){e.message||(e.message=wi.messages.UNSPECIFIED_ERROR),e.code||(e.code="3400");var t=this.startedPlaying||!e.category?"videoplaybackerror":"playererror";this.sendErrorNotification(t,e)}},{key:"respondToVideoEnd",value:function(){this.notify("resourceComplete")}},{key:"respondToBufferingStatusCheck",value:function(e){var t=this.presoModel.streamTime;!isNaN(t)&&t>0&&this.checkVideoBuffering(e)}},{key:"respondToId3Data",value:function(e){this.notify("metadatacuepoint",{cue:e})}},{key:"respondToVideoTimeUpdate",value:function(e){var t=this.contentPlaybackStateProxy.model,i=t.duration,n=t.liveStreamInfo,a=t.streamType,r=t.time;this.updateTimeSpent();var o={contentTime:r,contentDuration:i,streamTime:e,streamDuration:this.presoModel.streamDuration,sessionTime:this.timeSpent.sessionTime,playbackTime:this.timeSpent.playbackTime};if("VOD"!==a){var s=n.relativeTime,l=n.relativeDuration;o.contentTime=s,o.contentDuration=l,o.elapsedTimeMs=this.timeSpent.elapsedTime,t.time=s,t.duration=l}this.notify("contentprogress",o)}},{key:"respondToSizeChange",value:function(){this.adapter&&this.adapter.resize()}},{key:"respondToDurationChange",value:function(e){}},{key:"respondToTextTrackModeChange",value:function(e){}},{key:"setForClickToPlay",value:function(){var e=this;if(this.getModel("PlayerOptions").useNativeControls){var t=this.domProxy.getMain();t.addEventListener("click",function i(){t.removeEventListener("click",i),e.notify("playOnUSerGesture")})}}},{key:"isContentComplete",value:function(){if(this.contentComplete)return!0;var e=this.contentPlaybackStateProxy.model;return"LIVE"!==e.streamType&&"DVR"!==e.streamType&&!(isNaN(e.time)||e.time<e.duration)}},{key:"isAdPlaying",value:function(){return this.presoModel.isCurrentVideoAd}},{key:"handleNotification",value:function(e){(0,Xe.default)((0,it.default)(i.prototype),"handleNotification",this).call(this,e)}},{key:"listNotificationInterests",value:function(){return(0,Xe.default)((0,it.default)(i.prototype),"listNotificationInterests",this).call(this).concat([])}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this);var e=this.playerOptions.overrides;e.resumeTimeMaxProximityToAdBreak&&(this.resumeTimeMaxProximityToAdBreak=e.resumeTimeMaxProximityToAdBreak),this.isClickToPlay=!this.presoModel.isAutoplay;var t=this.system;this.fullscreenRestrictedDuringAdPlay=t.isIos||t.isAndroid,this.domProxy&&(this.currentRect=this.domProxy.getPresentationRect())}}]),i}(function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,at.default)(this,i),(e=t.apply(this,arguments)).loaded=!1,e.startedPlaying=!1,e.preloadContent=!0,e.minDvrDuration=1800,e.sizeCheckInterval=1e3,e.lastSizeCheckTime=null,e.adapterTask=Promise.resolve(),e.t=!1,e.i=!1,e.previousPlaybackState={state:null,overrides:{},buffer:NaN},e.contentIsBuffering=!1,e.endFreezeTimeoutHandle=null,e.timedTextOffset=0,e.isMonitoringCueEvents=!1,e.shouldSendTextTrackAvailable=!1,e.onLoadError=function(t){var i=t.message,n=t.cause;e.sendErrorNotification(i,n||t)},e.qualityChange=function(t){var i,n;if(t){var a=(0,Ye.default)(e).contentPlaybackStateProxy;if(null==(i=a.qualities)?void 0:i.length){if(!1===t.enabled){var r=a.qualities.map(function(e){return Tt(St({},e),{enabled:e.enabled||e.index===t.index})});e.qualitiesChange(r)}t=a.qualities.find(function(e){return e.index===t.index}),(null==(n=a.qualityInfo.quality)?void 0:n.bitrate)!==t.bitrate&&(a.quality=t,a.model.bitrate=t.bitrate,e.respondToQualityChange(t))}else e.logger.warn("Invalid qualities list. Make sure qualitiesChange is called before qualityChange")}else e.logger.warn("Invalid quality change")},e.qualitiesChange=function(t){var i=(0,Ye.default)(e).contentPlaybackStateProxy,n=i.model,a=JSON.stringify(n.qualities||[]);e.contentPlaybackStateProxy.processQualityProfile(t),i.isAbrSwitchingAvailable||e.logger.log("info",wi.messages.ABR_UNAVAILABLE),n.qualityInfo&&JSON.stringify(n.qualities)!==a&&(e.log("info","Quality Info: ",n.qualityInfo),e.notify("qualitieschange",{qualities:n.qualities}),e.notify("qualityinfochange",{qualityInfo:n.qualityInfo}))},e.error=function(t){t.fatal&&(e.adapterTask=Promise.resolve()),e.respondToError(t)},e.audioTrackChange=function(t){t=ji(t,!0),e.contentPlaybackStateProxy.audioTrackInfo.track=t,e.notify("audiotrackchange",{audioTrack:t})},e.audioTracksChange=function(t){t=ji(t,!0),e.contentPlaybackStateProxy.audioTrackInfo.tracks=t,e.notify("audiotrackschange",{audioTracks:e.contentPlaybackStateProxy.audioTrackInfo.tracks}),e.notify("audiotrackinfochange",{audioTrackInfo:e.contentPlaybackStateProxy.audioTrackInfo})},e.cdnChange=function(t){var i=(0,Ye.default)(e).contentPlaybackStateProxy;t!==i.model.cdn&&(i.model.cdn=t,e.notify("cdnchange",{cdn:t}))},e.drmKeySystemCreated=function(t){e.contentPlaybackStateProxy.model.drmType=t,e.notify("drmkeysystemcreated",{keysystem:t})},e.timeUpdate=function(){if(clearTimeout(e.endFreezeTimeoutHandle),e.pAdapter){var t=e.pAdapter.getCurrentTime(),i=e.presoModel.streamDuration;e.updateLiveStreamInfo(),!e.pAdapter.getIsLiveStream()&&!isNaN(i)&&i-t<=.15&&e.protectAgainstEndFreeze(250),e.respondToVideoTimeUpdate(t)}},e.playing=function(){e.i=!1,e.updateLiveStreamInfo(),e.respondToVideoPlaying()},e.paused=function(){e.i=!0,e.respondToVideoPaused()},e.seeking=function(){e.t||(e.t=!0,e.respondToVideoSeeking(),e.respondToWaiting("seeking",!0))},e.seeked=function(){e.t=!1,e.respondToVideoSeeked(),e.respondToWaiting("seeking",!1)},e.ended=function(){clearTimeout(e.endFreezeTimeoutHandle),e.respondToVideoEnd()},e.durationChange=function(){var t=e.pAdapter.getDuration();t>0&&e.respondToDurationChange(t),e.updateLiveStreamInfo()},e.volumeChange=function(t,i){t!==e.presoModel.volume&&e.notify("volumechange",{volume:t}),null!=i&&i!==e.presoModel.isMuted&&e.notify("mutechange",{muted:i})},e.metadataCuepoint=function(t){var i=t,n=i.info,a=wt(i,["info"]);Object.defineProperty(a,"info",{get:function(){return er.info(),n}}),e.respondToId3Data(a)},e.textCuepoints=function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e.textTrackProxy.enabled||i)&&(e.isMonitoringCueEvents&&t.forEach(function(t){return e.respondToTtCue(t)}),e.notify("textcuepoint",{activeCues:t,forced:i}))},e.textTrackDisplayModeChange=function(t){var i="disabled"!==t;e.textTrackProxy.mode=t,e.notify("texttrackenabledchange",{textTrackEnabled:i}),e.respondToTextTrackModeChange(i)},e.textTracksChange=function(t){t=ji(t,!0),e.contentPlaybackStateProxy.addTextTracks(t),e.notify("texttrackschange",{textTracks:t}),e.shouldSendTextTrackAvailable=!0,e.respondToTextTrackInfoChange()},e.textTrackChange=function(t){t=ji(t,!0),e.contentPlaybackStateProxy.textTrack=t,e.notify("texttrackchange",{textTrack:t}),e.respondToTextTrackInfoChange()},e.waitingChange=function(t){e.respondToWaiting("waiting",t),e.notify("waitingchange",{waiting:t})},e}return(0,nt.default)(i,[{key:"adapter",get:function(){return this.pAdapter}},{key:"timedTextContainer",get:function(){if(!this.u){var e=this.facade.retrieveProxy("PlayerDomProxy");this.u=e.getElement("ccContainer")}return this.u}},{key:"onRemove",value:function(){clearTimeout(this.endFreezeTimeoutHandle),this.pAdapter=null,this.contentPlaybackStateProxy=null,this.resourceProxy=null,this.textTrackProxy=null,this.presoModel=null,this.playerOptions=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"setVolume",value:function(e){this.presoModel.volume=e}},{key:"load",value:function(){return this.loadVideo().catch(function(e){var t=e.type?e.data||e.detail:null,i=t?t.error||t:e;throw new fi("videostarterror",i)})}},{key:"play",value:function(){return this.playVideo()}},{key:"pause",value:function(){this.pauseVideo()}},{key:"suspend",value:function(){this.pAdapter.suspend()}},{key:"resume",value:function(){this.pAdapter.resume()}},{key:"offsetTimedText",value:function(e){var t=e>0;if(this.timedTextOffset=e,this.playerOptions.renderTextTrackNatively&&"Firefox"===this.system.browser)this.monitorTtCues(t);else if(!1===this.playerOptions.renderTextTrackNatively&&this.timedTextContainer)this.timedTextContainer.style.bottom="".concat(e,"px");else{var i=this.facade.retrieveProxy("PlayerDomProxy").getMain();null==document||document.documentElement.style.setProperty("--avia-timed-text-offset","".concat(e,"px")),null==i||i.classList[t?"add":"remove"]("avia-cc-offset")}}},{key:"getBuffered",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pAdapter.getBuffered(e)}},{key:"loadVideo",value:function(){var e=this;return this.pendingLoad?this.pendingLoad:this.loaded?Promise.resolve():(this.respondToWaiting("loading",!0),this.logger.time("resource-load"),this.pendingLoad=this.pAdapter.load().then(function(t){e.loaded=!0,e.respondToWaiting("loading",!1),e.pendingLoad=null;var i=e.resourceProxy.resource;e.notify("streammetadata",{streamMetadata:t});var n=i.location.thumbnailTrackUrl;!e.contentPlaybackStateProxy.thumbnailTrack&&n&&kr.create(n,e.getProxy("HookProxy")).then(function(t){e.contentPlaybackStateProxy.thumbnailTrack=t,e.notify("thumbnailtrackavailable",{thumbnailTrack:t})}).catch(function(t){return e.log("warn","Could not load thumbnail track")}),e.logger.timeEnd("resource-load")}))}},{key:"playVideo",value:function(){var e=this;return this.logger.time("resource-playback"),this.pAdapter.play().then(function(){e.startedPlaying=!0,e.logger.timeEnd("resource-playback")}).catch(function(t){0===t.code?e.sendNotification("autoplayblocked",t):e.logger.warn("Video element play() error: ".concat(t))})}},{key:"pauseVideo",value:function(){var e;null==(e=this.pAdapter)||e.pause()}},{key:"muteVideo",value:function(e){e||this.presoModel.userHasUnmuted||(this.presoModel.userHasUnmuted=!0),this.presoModel.isMuted=e}},{key:"seekVideo",value:function(e){return this.pAdapter.seek(e)}},{key:"checkVideoBuffering",value:function(e){var t=Math.max(Math.floor(this.bufferingSampleRate/ko.INTERVAL),1);if(!(isFinite(t)&&e%t)){var i=!1;if(!this.i){var n=this.previousPlaybackState.buffer+.001,a=this.video.currentTime;this.previousPlaybackState.buffer=a,i=a<n&&!this.t}this.contentIsBuffering!==i&&(this.contentIsBuffering=i,this.notify("resourcebuffering",{buffering:i}))}}},{key:"video",get:function(){return this.viewControl}},{key:"notify",value:function(e,t){this.sendNotification(e,t,"internal")}},{key:"respondToIsPlayingLiveChange",value:function(e){this.notify("contentisplayinglive",{isLive:e})}},{key:"respondToStreamTypeChange",value:function(e){if(this.streamType!==e){var t=this.contentPlaybackStateProxy.model;this.streamType=e,t.streamType=e,this.notify("streamtypechange",{streamType:e})}}},{key:"respondToWaiting",value:function(e,t){this.previousPlaybackState.overrides[e]=t;var i=!this.previousPlaybackState.state||Vi(this.previousPlaybackState.overrides).includes(!0);this.respondToPlaybackStateChange(i?"waiting":this.previousPlaybackState.state)}},{key:"respondToPlaybackStateChange",value:function(e){var t=this.contentPlaybackStateProxy.model,i="waiting"!==e;if(t.state!==e){if("idle"!==e&&i&&(this.previousPlaybackState.state=e),this.t&&i)return;t.state=e,this.notify("playbackstatechange",{playbackState:e})}}},{key:"monitorTtCues",value:function(e){var t=Array.from(this.video.textTracks).find(function(e){return na(e.kind)&&"showing"===e.mode}),i=null==t?void 0:t.activeCues;if(this.isMonitoringCueEvents=e,i)for(var n=0,a=i.length||0;n<a;n++)this.respondToTtCue(i[n])}},{key:"respondToTtCue",value:function(e){e.line=this.isMonitoringCueEvents?.21875*this.timedTextOffset:"auto"}},{key:"handleNotification",value:function(e){switch(e.name){case"timerTic":this.respondToBufferingStatusCheck(e.body.count),this.lastSizeCheckTime&&!this.shouldCheckSize()||(this.lastSizeCheckTime=Date.now(),this.checkSize());break;case"fullscreenChange":var t=e.body;this.presoModel.isFullscreen=t.isFullscreen,this.respondToFullscreenChange(t.isFullscreen);break;case"autoQualitySwitching":var i=this.contentPlaybackStateProxy.model;this.notify("qualityinfochange",{qualityInfo:i.qualityInfo})}}},{key:"listNotificationInterests",value:function(){return["timerTic","fullscreenChange"]}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.contentPlaybackStateProxy=this.facade.retrieveProxy("ContentPlaybackStateProxy"),this.resourceProxy=this.facade.retrieveProxy("ResourceProxy"),this.performanceProxy=this.facade.retrieveProxy("PerformanceProxy"),this.textTrackProxy=this.facade.retrieveProxy("TextTrackProxy"),this.presoModel=this.getModel("PresentationState"),this.playerOptions=this.getModel("PlayerOptions"),void 0!==this.playerOptions.sizeCheckInterval&&(this.sizeCheckInterval=this.playerOptions.sizeCheckInterval);var e=this.resourceProxy.resource.overrides;Wt(null==e?void 0:e.minDvrDuration)&&(this.minDvrDuration=e.minDvrDuration),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&(this.muteVideo(!0),this.presoModel.isMuted=!0),this.bufferingSampleRate=this.performanceProxy.bufferingSampleRate}},{key:"prepareForPlayback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.initializing){var t={system:this.system,playerOptions:this.playerOptions,resource:this.resourceProxy.resource,performanceSettings:this.performanceProxy,textTrackSettings:this.textTrackProxy,video:this.viewControl,logger:this.logger};this.adapterTask=this.initializeAdapter(t,e).catch(this.onLoadError)}}},{key:"sendErrorNotification",value:function(e,t){this.notify(e,t)}},{key:"createAdapter",value:function(e){return It(this,null,ze.default.mark(function t(){var i,n,a=this;return ze.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.facade.retrieveProxy("AdapterProxy"),t.next=3,i.createAdapter("playback",e.resource,function(){return a});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}))}},{key:"initializeAdapter",value:function(e,t){return It(this,null,ze.default.mark(function i(){var n;return ze.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,this.logger.time("playback-adapter-creation"),this.initializing=!0,!this.closing){i.next=5;break}return i.abrupt("return");case 5:return i.prev=5,i.next=8,this.createAdapter(e);case 8:if(this.pAdapter=i.sent,!this.closing){i.next=11;break}return i.abrupt("return");case 11:i.next=18;break;case 13:throw i.prev=13,i.t0=i.catch(5),(n=fn(e.resource))&&(i.t0.message+=". Attempting to play a stream of type ".concat(n)),new fi("resourceerror",i.t0);case 18:if(this.logger.timeEnd("playback-adapter-creation"),!this.preloadContent){i.next=22;break}return i.next=22,this.load();case 22:if(i.prev=22,!this.closing){i.next=25;break}return i.abrupt("return");case 25:if(this.presoModel.isAutoplay||t){i.next=27;break}return i.abrupt("return");case 27:return i.next=29,this.play();case 29:i.next=34;break;case 31:throw i.prev=31,i.t1=i.catch(22),new fi("videoplaybackerror",i.t1);case 34:return i.prev=34,this.initializing=!1,i.finish(34);case 37:case"end":return i.stop()}},i,this,[[0,,34,37],[5,13],[22,31]])}))}},{key:"respondToTextTrackInfoChange",value:function(){var e=this.contentPlaybackStateProxy.textTrackInfo;this.notify("texttrackinfochange",{textTrackInfo:this.contentPlaybackStateProxy.textTrackInfo}),this.shouldSendTextTrackAvailable&&e.track&&e.tracks.length&&(this.notify("texttrackavailable"),this.shouldSendTextTrackAvailable=!1)}},{key:"protectAgainstEndFreeze",value:function(e){var t=this;clearTimeout(this.endFreezeTimeoutHandle),this.endFreezeTimeoutHandle=setTimeout(function(){t.respondToVideoEnd()},e)}},{key:"calculateStreamType",value:function(){if(this.pAdapter.getIsLiveStream()){var e=this.pAdapter.getLiveStreamInfo().dvrWindowSize;return e<this.minDvrDuration||isNaN(e)?"LIVE":"DVR"}return"VOD"}},{key:"updateLiveStreamInfo",value:function(){if(this.pAdapter.getIsLiveStream()){var e=this.contentPlaybackStateProxy.model,t=this.pAdapter.getLiveStreamInfo();e.liveStreamInfo=t;var i=this.calculateStreamType();this.respondToStreamTypeChange(i);var n="LIVE"===i||t.isPlayingLive;this.isPlayingLive!==n&&(this.isPlayingLive=n,this.respondToIsPlayingLiveChange(n)),"DVR"===e.streamType&&this.respondToDurationChange(t.relativeDuration)}else this.respondToStreamTypeChange("VOD")}},{key:"shouldCheckSize",value:function(){return this.playerOptions.sizeCheckInterval>0&&(!this.lastSizeCheckTime||Date.now()-this.lastSizeCheckTime>=this.sizeCheckInterval)}},{key:"hasHook",value:function(e){return this.getProxy("HookProxy").hasHook(e)}},{key:"applyHook",value:function(e,t,i){var n=this;return this.getProxy("HookProxy").applyHook(e,t,i).catch(function(e){throw n.error(e),e})}}]),i}(Ao)),as=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var a;return(0,at.default)(this,i),(a=t.call(this,e,n)).pAdAdapter=null,a.adAdapterStarted=!1,a.contentSegmentStarted=!1,a.contentStartReleased=!1,a.contentCompleteReleased=!1,a.fatalContentErrorReceived=!1,a.hasMidRolls=!1,a.pendingSeekTime=null,a.currentAd=null,a.currentBreak=null,a.pointerLocked=!1,a.isPreloading=!1,a.cancelPointerLock=function(){var e;document.removeEventListener("mousemove",a.cancelPointerLock),null==(e=document.exitPointerLock)||e.call(document),a.pointerLocked=!1},a.setPointerState=function(){return It((0,Ye.default)(a),null,ze.default.mark(function e(){var t,i,n=this;return ze.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pointerLocked||this.isFullScreenAd()){e.next=5;break}return this.cancelPointerLock(),e.abrupt("return");case 5:if(this.pointerLocked||!this.isFullScreenAd()){e.next=20;break}if((i=null==(t=this.domProxy)?void 0:t.getMain())&&i.requestPointerLock){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,this.pointerLocked=!0,e.next=13,i.requestPointerLock();case 13:this.cancelTimeout=setTimeout(function(){return null==document?void 0:document.addEventListener("mousemove",n.cancelPointerLock)},100),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),this.pointerLocked=!1,this.logger.warn(e.t0);case 20:case"end":return e.stop()}},e,this,[[9,16]])}))},a.hMovement=function(e){a.presoModel.isFullscreen&&a.pointerLockDebouncer()},a.preloadContent=!1,a}return(0,nt.default)(i,[{key:"adAdapter",get:function(){return this.pAdAdapter},set:function(e){this.pAdAdapter=e}},{key:"adInProgress",get:function(){return this.presoModel.isCurrentVideoAd}},{key:"onRemove",value:function(){var e,t;null==(t=null==(e=this.pAdAdapter)?void 0:e.destroy)||t.call(e),this.pAdAdapter=null,this.cancelPointerLock(),this.pointerLockDebouncer.cancel(),clearTimeout(this.cancelTimeout),this.monitorActivity(!1),(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"closeAds",value:function(){var e,t;null==(e=this.domProxy)||e.showAdContainer(!1),null==(t=this.adAdapter)||t.destroy(),this.pAdAdapter=null}},{key:"beforePlayOnUserGesture",value:function(){var e;null==(e=this.adAdapter)||e.playClicked()}},{key:"playOnUserGesture",value:function(){this.hasContent?(0,Xe.default)((0,it.default)(i.prototype),"playOnUserGesture",this).call(this):this.play()}},{key:"start",value:function(){var e,t,n,a=this.resourceProxy.playback.startTime,r=this.resourceProxy.ad.showPrerollOnNonZeroStart,o=!isNaN(a)&&a>0;if((0,Xe.default)((0,it.default)(i.prototype),"start",this).call(this),this.mute(this.presoModel.isMuted),o&&r&&(this.pendingSeekTime=a),this.isClickToPlay)this.setForClickToPlay();else{var s=this.resourceProxy.resource;(null==(t=null==(e=s.ad)?void 0:e.csai)?void 0:t.adCallUrl)&&!(null==(n=s.location)?void 0:n.mediaUrl)?this.play():(this.notify("videoLoadStart"),this.prepareForPlayback())}}},{key:"getAdBreakTimes",value:function(){var e,t=[];return null==(e=this.breakSchedule)||e.forEach(function(e){t.push(St({start:e.startTime,streamTimeStart:e.streamStartTime,end:e.endTime,streamTimeEnd:e.streamStartTime+e.duration,played:e.hasPlayed},e))}),t}},{key:"getDelegate",value:function(){return to({},this)}},{key:"play",value:function(){var e;return this.presoModel.started?this.adInProgress&&(null==(e=this.adAdapter)?void 0:e.resume)?Promise.resolve(this.adAdapter.resume()):this.playVideo():(this.presoModel.started=!0,this.adAdapterStarted=!0,Promise.resolve(this.adAdapter.start()))}},{key:"pause",value:function(){var e;this.adInProgress&&(null==(e=this.adAdapter)?void 0:e.pause)?this.adAdapter.pause():this.pauseVideo()}},{key:"getBuffered",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,Xe.default)((0,it.default)(i.prototype),"getBuffered",this).call(this,t);return!0===t?n:n.map(function(t){var i,n,a,r;return{startTime:(null==(n=(i=e.adAdapter).contentTimeForStreamTime)?void 0:n.call(i,t.startTime))||t.startTime,endTime:(null==(r=(a=e.adAdapter).contentTimeForStreamTime)?void 0:r.call(a,t.endTime))||t.endTime}})}},{key:"mute",value:function(e){var t;null==(t=this.adAdapter)||t.setMuteState(e),(0,Xe.default)((0,it.default)(i.prototype),"mute",this).call(this,e)}},{key:"setVolume",value:function(e){var t;null==(t=this.adAdapter)||t.setVolume(e),(0,Xe.default)((0,it.default)(i.prototype),"setVolume",this).call(this,e)}},{key:"seek",value:function(e){var t=this.streamTimeForContentTime(e),n=this.getPermittedSeekTime(e);return this.hasMidRolls&&this.adAdapter&&n!==t&&(this.pendingSeekTime=t,this.notify("seekredirectstart",{requestedSeekTime:e,actualSeekTime:this.contentTimeForStreamTime(n)})),this.contentComplete&&!this.contentSegmentStarted&&(this.contentSegmentStarted=!0),(0,Xe.default)((0,it.default)(i.prototype),"seek",this).call(this,n)}},{key:"skipAd",value:function(){var e;null==(e=this.adAdapter)||e.skipAd()}},{key:"pauseContent",value:function(){var e;this.pauseVideo(),null==(e=this.domProxy)||e.showAdContainer(!0)}},{key:"resumeContent",value:function(){var e,t,n=this;if(this.currentAd=null,this.currentBreak=null,null==(e=this.domProxy)||e.showAdClickElement(!1),null==(t=this.domProxy)||t.showAdContainer(!1),!this.fatalContentErrorReceived)if(this.hasContent&&!this.contentComplete)if(this.contentStartReleased)this.resumeContentPlayComplete();else{var a=this.resourceProxy.playback.startTime;if(!isNaN(a)&&a>0){var r=this.getAdBreakTimes(),o=this.adjustStartTimeForAdBreakProximity(a,r);this.resourceProxy.playback.startTime=o}this.load().then(function(){n.resumeContentPlayComplete()}).catch(this.onLoadError)}else(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoEnd",this).call(this)}},{key:"streamIdAvailable",value:function(e){this.notify("streamidavailable",{streamId:e})}},{key:"applyHook",value:function(e,t,n){return(0,Xe.default)((0,it.default)(i.prototype),"applyHook",this).call(this,e,t,n)}},{key:"adSkippableStateChanged",value:function(){this.notify("adskippablestatechange")}},{key:"adSegmentStarted",value:function(){this.endContentSegment(),this.presoModel.isCurrentVideoAd=!0,this.notify("adsegmentstart")}},{key:"adSegmentReentered",value:function(){this.notify("adsegmentreentered")}},{key:"adSegmentEnded",value:function(){this.contentSegmentStarted=!1,this.presoModel&&(this.presoModel.isCurrentVideoAd=!1),this.notify("adsegmentend")}},{key:"adBreaksAvailable",value:function(e){this.hasMidRolls=e.some(function(e){return"MID"===e.type}),this.breakSchedule=e;var t=e.map(function(e){return e.startTime});this.notify("adcuepointsavailable",{cuepoints:t,adBreaks:e})}},{key:"seekToStreamTime",value:function(e){this.seekVideo(e)}},{key:"adBreakStart",value:function(){var e;this.endContentSegment(),this.updateSize(),null==(e=this.domProxy)||e.showAdContainer(!0),this.presoModel.isCurrentVideoAd=!0,null===this.timeSpent.startTime&&this.startSession(),this.notify("adbreakstart")}},{key:"adBreakMetadata",value:function(e){this.currentBreak=e,this.notify("adbreakmetadata",{adBreakInfo:e})}},{key:"adLoaded",value:function(){}},{key:"adStart",value:function(e){this.currentAd=e,this.respondToPlaybackStateChange("playing"),this.notify("adstart",{adInfo:e})}},{key:"adProgress",value:function(e,t){this.notify("adprogress",{currentTime:e,duration:t,streamTime:this.presoModel.streamTime,streamDuration:this.presoModel.streamDuration}),this.checkPreload(e,t)}},{key:"adFirstQuartile",value:function(){this.notify("adfirstquartile")}},{key:"adMidpoint",value:function(){this.notify("admidpoint")}},{key:"adThirdQuartile",value:function(){this.notify("adthirdquartile")}},{key:"adComplete",value:function(){this.currentAd=null,this.notify("adcomplete")}},{key:"adBreakComplete",value:function(){var e,t;if(this.currentBreak=null,this.currentAd=null,this.isPreloading=!1,null==(e=this.domProxy)||e.showAdContainer(!1),null==(t=this.domProxy)||t.showAdClickElement(!1),this.presoModel.isCurrentVideoAd=!1,this.notify("adbreakcomplete"),this.pendingSeekTime&&this.contentStartReleased){var i=this.pendingSeekTime;this.pendingSeekTime=null,this.contentPlaybackStateProxy.model.started&&this.notify("seekredirectcomplete"),this.seekVideo(i)}}},{key:"adClicked",value:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"playing"===(null==(t=null==(e=this.contentPlaybackStateProxy)?void 0:e.model)?void 0:t.state)&&this.pause(),this.notify("adclick",{clickThroughUrl:i})}},{key:"adError",value:function(e){this.currentAd=null,e.message||(e.message=wi.messages.UNSPECIFIED_ERROR),this.notify("aderror",e)}},{key:"adPaused",value:function(){this.respondToPlaybackStateChange("paused"),this.notify("adpaused")}},{key:"adResumed",value:function(){this.notify("resourcebuffering",{buffering:!1}),this.respondToPlaybackStateChange("playing"),this.notify("adplaying")}},{key:"adStalled",value:function(e){this.logger.dir("warn",e,"Stalled Ad Info"),this.notify("adstalled",new Ai("4000","Stalled ad detected",e,!1,"Ad"))}},{key:"adBreakDiscarded",value:function(){this.notify("adbreakdiscarded")}},{key:"adSkipped",value:function(){this.notify("adskipped")}},{key:"allAdsComplete",value:function(){}},{key:"adBuffering",value:function(e){}},{key:"displayAdClickElement",value:function(e){var t;null==(t=this.domProxy)||t.showAdClickElement(e)}},{key:"resumeContentPlayComplete",value:function(){return It(this,null,ze.default.mark(function e(){var t=this;return ze.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingSeekTime||!this.contentStartReleased){e.next=5;break}return e.next=3,this.seekVideo(this.pendingSeekTime).catch(function(e){t.log("warn","APM#resumeContentPlayComplete; A seek() call failed."),t.logger.dir("debug",e,"Error")});case 3:this.notify("seekredirectcomplete"),this.pendingSeekTime=null;case 5:this.play();case 6:case"end":return e.stop()}},e,this)}))}},{key:"isFullScreenAd",value:function(){return this.presoModel.isFullscreen&&this.adInProgress}},{key:"monitorActivity",value:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Zn.isDesktop){var n=i?"addEventListener":"removeEventListener";null==(t=null==(e=this.domProxy)?void 0:e.getMain())||t[n]("mousemove",this.hMovement)}}},{key:"handleNotification",value:function(e){var t,n,a,r=e.name,o=e.body,s=!1;switch(r){case"fullscreenchange":null==(t=this.adAdapter)||t.setFullscreenState(o.fullscreen),s=!0;break;case"qualitychange":var l=(null==(n=o.quality)?void 0:n.bitrate)?Math.round(.001*o.quality.bitrate):-1;null==(a=this.adAdapter)||a.setContentBitrate(l)}(0,Xe.default)((0,it.default)(i.prototype),"handleNotification",this).call(this,e),s&&this.monitorActivity(o.fullscreen)}},{key:"updateSize",value:function(){var e,t,i=null==(e=this.domProxy)?void 0:e.getPresentationRect();i&&(null==(t=this.adAdapter)||t.updateSize(i))}},{key:"respondToSizeChange",value:function(){this.updateSize(),(0,Xe.default)((0,it.default)(i.prototype),"respondToSizeChange",this).call(this)}},{key:"respondToId3Data",value:function(e){this.adAdapter.handleTimedMetadata(e),(0,Xe.default)((0,it.default)(i.prototype),"respondToId3Data",this).call(this,e)}},{key:"respondToVideoPaused",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoPaused",this).call(this),this.adInProgress?this.notify("adpaused"):(this.respondToPlaybackStateChange("paused"),this.notify("contentpaused"))}},{key:"respondToPlaybackStateChange",value:function(e){this.isPreloading&&"waiting"===e||(0,Xe.default)((0,it.default)(i.prototype),"respondToPlaybackStateChange",this).call(this,e)}},{key:"respondToVideoPlaying",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoPlaying",this).call(this),this.adAdapterStarted||(this.adAdapterStarted=!0,this.adAdapter.start()),this.contentPlaybackStateProxy.model.time>.5&&!this.adInProgress&&this.contentSegmentStarted?(this.respondToPlaybackStateChange("playing"),this.notify("contentplaying")):this.adInProgress&&this.notify("adplaying")}},{key:"respondToVideoTimeUpdate",value:function(e){var t,n,a,r=this.contentPlaybackStateProxy.model;this.presoModel.streamTime=e,null==(t=this.adAdapter)||t.setStreamTime(e),r.time=this.contentTimeForStreamTime(e),this.adInProgress||this.fatalContentErrorReceived||(e>.75&&!this.contentSegmentStarted&&(r.started=!0,null==(n=this.domProxy)||n.showAdClickElement(!1),null==(a=this.domProxy)||a.showAdContainer(!1),!this.contentStartReleased&&this.signalContentStart(),this.contentSegmentStarted=!0,this.hasMidRolls||"LIVE"===r.streamType||"DVR"===r.streamType?this.notify("contentsegmentstart"):this.notify("contentplaying")),this.contentSegmentStarted&&(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoTimeUpdate",this).call(this,e),"LIVE"!==r.streamType&&r.time>=r.duration&&!this.contentCompleteReleased&&this.signalContentComplete())}},{key:"endContentSegment",value:function(){if(this.contentSegmentStarted){var e=this.contentPlaybackStateProxy.model;this.contentSegmentStarted=!1,(this.hasMidRolls||"LIVE"===e.streamType||"DVR"===e.streamType)&&this.notify("contentsegmentend")}}},{key:"respondToVideoEnd",value:function(){var e,t;this.contentCompleteReleased||this.signalContentComplete(),null==(e=this.adAdapter)||e.contentComplete(),(null==(t=this.breakSchedule)?void 0:t.find(function(e){return"POST"===e.type}))||(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoEnd",this).call(this)}},{key:"respondToDurationChange",value:function(e){if(e&&!isNaN(e)&&e>0){this.adAdapter.setStreamDuration(e),this.presoModel.streamDuration=e;var t=this.contentTimeForStreamTime(e);this.contentPlaybackStateProxy.model.duration=t,this.contentDurationReleased||this.releaseContentDuration(e)}}},{key:"respondToError",value:function(e){this.fatalContentErrorReceived=e.fatal,(0,Xe.default)((0,it.default)(i.prototype),"respondToError",this).call(this,e)}},{key:"isContentComplete",value:function(){return this.contentComplete}},{key:"startContentSegment",value:function(){var e;this.contentSegmentStarted=!0,this.contentPlaybackStateProxy.model.started=!0,null==(e=this.domProxy)||e.showAdContainer(!1),this.contentStartReleased||this.signalContentStart(),this.notify("contentsegmentstart")}},{key:"checkPreload",value:function(e,t){var i,n,a,r,o,s;if(!this.isPreloading&&!0===(null==(r=null==(a=null==(n=null==(i=this.resourceProxy)?void 0:i.resource)?void 0:n.ad)?void 0:a.csai)?void 0:r.preloadContentAtEndOfPreRoll)&&(null==(o=this.currentAd)?void 0:o.adPosition)===(null==(s=this.currentBreak)?void 0:s.adTotal)&&!this.system.isIos){var l=Oi(Math.ceil(t/4),2,10);Math.round(e)>=l&&(this.isPreloading=!0,this.load().catch(this.onLoadError))}}},{key:"signalContentStart",value:function(){this.contentStartReleased=!0,this.notify("contentstart")}},{key:"signalContentComplete",value:function(){this.contentComplete=!0,this.contentSegmentStarted&&this.endContentSegment(),this.contentCompleteReleased=!0,this.notify("contentcomplete")}},{key:"contentTimeForStreamTime",value:function(e){var t;return(null==(t=this.adAdapter)?void 0:t.contentTimeForStreamTime)?this.adAdapter.contentTimeForStreamTime(e):e}},{key:"streamTimeForContentTime",value:function(e){var t;return(null==(t=this.adAdapter)?void 0:t.streamTimeForContentTime)?this.adAdapter.streamTimeForContentTime(e):e}},{key:"getPermittedSeekTime",value:function(e){var t;return(null==(t=this.adAdapter)?void 0:t.getPermittedSeekTime)?this.adAdapter.getPermittedSeekTime(e):e}},{key:"listNotificationInterests",value:function(){return(0,Xe.default)((0,it.default)(i.prototype),"listNotificationInterests",this).call(this).concat(["fullscreenchange","qualitychange"])}},{key:"onRegister",value:function(){var e,t;(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this);var n=this.facade.retrieveProxy("ActivityProxy").idleDelay;this.pointerLockDebouncer=Ra(this.setPointerState,n),null==(e=this.domProxy)||e.showAdContainer(!1),null==(t=this.domProxy)||t.showAdClickElement(!1)}}]),i}(ns);Pt([Jr()],as.prototype,"pauseContent",1),Pt([Jr()],as.prototype,"resumeContent",1),Pt([Jr()],as.prototype,"streamIdAvailable",1),Pt([Jr()],as.prototype,"applyHook",1),Pt([Jr()],as.prototype,"adSkippableStateChanged",1),Pt([Jr()],as.prototype,"adSegmentStarted",1),Pt([Jr()],as.prototype,"adSegmentReentered",1),Pt([Jr()],as.prototype,"adSegmentEnded",1),Pt([Jr()],as.prototype,"adBreaksAvailable",1),Pt([Jr()],as.prototype,"seekToStreamTime",1),Pt([Jr()],as.prototype,"adBreakStart",1),Pt([Jr()],as.prototype,"adBreakMetadata",1),Pt([Jr()],as.prototype,"adLoaded",1),Pt([Jr()],as.prototype,"adStart",1),Pt([Jr()],as.prototype,"adProgress",1),Pt([Jr()],as.prototype,"adFirstQuartile",1),Pt([Jr()],as.prototype,"adMidpoint",1),Pt([Jr()],as.prototype,"adThirdQuartile",1),Pt([Jr()],as.prototype,"adComplete",1),Pt([Jr()],as.prototype,"adBreakComplete",1),Pt([Jr()],as.prototype,"adClicked",1),Pt([Jr()],as.prototype,"adError",1),Pt([Jr()],as.prototype,"adPaused",1),Pt([Jr()],as.prototype,"adResumed",1),Pt([Jr()],as.prototype,"adStalled",1),Pt([Jr()],as.prototype,"adBreakDiscarded",1),Pt([Jr()],as.prototype,"adSkipped",1),Pt([Jr()],as.prototype,"allAdsComplete",1),Pt([Jr()],as.prototype,"adBuffering",1),Pt([Jr()],as.prototype,"displayAdClickElement",1);var rs=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"start",value:function(){this.isClickToPlay?this.setForClickToPlay():this.notify("videoLoadStart")}},{key:"respondToVideoPlaying",value:function(){var e=!1;this.contentPlaybackStateProxy.model.started=!0,this.presoModel.started||(e=!0),(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoPlaying",this).call(this),e&&this.notify("contentstart"),this.notify("contentplaying")}},{key:"respondToVideoTimeUpdate",value:function(e){if(!this.contentComplete){var t=this.contentPlaybackStateProxy.model;this.presoModel.streamTime=e,t.time=e,this.presoModel.started&&(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoTimeUpdate",this).call(this,e)}}},{key:"respondToVideoPaused",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoPaused",this).call(this),this.notify("contentpaused")}},{key:"respondToIsPlayingLiveChange",value:function(e){(0,Xe.default)((0,it.default)(i.prototype),"respondToIsPlayingLiveChange",this).call(this,e)}},{key:"respondToVideoEnd",value:function(){this.contentComplete=!0,this.notify("contentcomplete"),(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoEnd",this).call(this)}},{key:"respondToDurationChange",value:function(e){this.presoModel.streamDuration=e,this.contentPlaybackStateProxy.model.duration=e,this.contentDurationReleased||this.releaseContentDuration(e)}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.domProxy&&this.domProxy.showAdContainer(!1),!this.isClickToPlay&&this.prepareForPlayback()}}]),i}(ns),os=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t,i=this,n=this.system,a=e.body;if(null==(t=n.global)?void 0:t.document){var r=this.getModel("PresentationState"),o=this.getModel("PlayerOptions");this.facade.registerProxy(new ts("ContentPlaybackStateProxy")),this.checkAutoplay(o).then(function(e){i.processAutoplaySupport(e,r,o),i.createPresentation(a,r,o)})}else this.sendNotification("videostarterror",{error:wi.messages.ENVIRONMENT_NOT_SUPPORTED,fatal:!0})}},{key:"createPresentation",value:function(e,t,i){return It(this,null,ze.default.mark(function n(){var a;return ze.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getPresentationMediator(e,t,i);case 2:if(a=n.sent){n.next=5;break}return n.abrupt("return");case 5:this.facade.registerMediator(a),this.sendNotification("startPresentation");case 7:case"end":return n.stop()}},n,this)}))}},{key:"getPresentationMediator",value:function(e,t,i){return It(this,null,ze.default.mark(function n(){var a,r,o,s,l,u,c,d,h,f,p,v,g;return ze.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s=this.facade.retrieveProxy("PlayerDomProxy"),l=this.getVideo(s,i),u=null,!s||l){n.next=6;break}return this.sendNotification("resourceerror",{code:"9999",message:wi.messages.VIDEO_PLAYBACK_UNAVAILABLE,fatal:!0}),n.abrupt("return",u);case 6:if(c="PresentationMediator",((d=(null==(a=null==e?void 0:e.ad)?void 0:a.csai)||(null==(r=null==e?void 0:e.ad)?void 0:r.ssai))||t.isAutoplay||i.playsInline)&&(null==s||s.setVideoAttribute("playsinline","")),!d){n.next=34;break}return n.prev=10,this.logger.time("ad-adapter-creation"),h=new as(c,l),f=h.getDelegate(),p=this.facade.retrieveProxy("AdapterProxy"),n.next=17,p.createAdapter("ad",e,function(){return f});case 17:return v=n.sent,h.adAdapter=v,this.logger.timeEnd("ad-adapter-creation"),this.logger.time("ad-resource-creation"),n.next=23,null==(o=v.getResource)?void 0:o.call(v);case 23:g=n.sent,this.logger.timeEnd("ad-resource-creation"),g&&(e=g),u=h,n.next=32;break;case 29:n.prev=29,n.t0=n.catch(10),this.sendNotification("aderror",{code:n.t0.code||"4400",message:n.t0.message,cause:n.t0,fatal:!0});case 32:n.next=35;break;case 34:u=new rs(c,l);case 35:return this.createResourceProxy(e),n.abrupt("return",u);case 37:case"end":return n.stop()}},n,this,[[10,29]])}))}},{key:"createResourceProxy",value:function(e){var t=new is("ResourceProxy",e);this.facade.registerProxy(t)}},{key:"getVideo",value:function(e,t){var i=this.system;return i.isWebMaf?i.webMafPlayer:e?(!0!==t.reuseVideoElement&&e.recreateVideo(),e.getVideo()):null}},{key:"processAutoplaySupport",value:function(e,t,i){if(!t.isAutoplay){var n=i.autoplay,a=e.supportsMutedAutoplay,r=e.supportsUnmutedAutoplay;(("attemptMuted"===n||"attemptUnmutedThenMuted"===n)&&!a||"attemptUnmuted"===n&&!r)&&this.sendNotification("autoplayblocked",new Error("Autoplay capability conflict."),"internal"),t.isMuteAtPlayStart="attemptMuted"===n&&a||"attemptUnmutedThenMuted"===n&&!r&&a,t.isAutoplay=this.shouldAutoplay(n,e)}}},{key:"shouldAutoplay",value:function(e,t){if(Ut(e)||"none"===e)return!1;var i=t.supportsMutedAutoplay,n=t.supportsUnmutedAutoplay,a="attemptUnmuted"===e&&n;return"attemptMuted"===e&&i||a||!a&&"attemptUnmutedThenMuted"===e&&i}},{key:"checkAutoplay",value:function(e){var t;return this.getService("AutoplayCapabilities").detectCapabilities(null==(t=e.overrides)?void 0:t.blankVideoUrl)}}]),i}(io),ss=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this;e.body.resource?this.getProxy("HookProxy").applyHook("attachresource",new Gr(e.body.resource)).then(function(e){try{Gr.validate(e)}catch(e){t.invalidResource(e.message)}e.sessionId||(e.sessionId=Yt()),e.cmcd.sessionId||(e.cmcd.sessionId=e.sessionId),e.contentId&&!e.cmcd.contentId&&(e.cmcd.contentId=e.contentId),t.facade.sendNotification("playResource",e,"internal")}).catch(function(e){t.facade.sendNotification("resourceerror",e.cause||e,"internal")}):this.invalidResource(wi.messages.RESOURCE_MISSING)}},{key:"invalidResource",value:function(e){this.facade.sendNotification("resourceerror",{message:"".concat(wi.messages.INVALID_RESOURCE,": ").concat(e),code:"1000",fatal:!0},"internal")}}]),i}(io),ls=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t,i,n=this.facade;switch(e.name){case"resourceComplete":if(!1===(null==(t=this.getModel("PlayerOptions").overrides)?void 0:t.closeOnEnded))return;var a=n.retrieveMediator("PresentationMediator");return void(null==a||a.close());case"resourceend":n.retrieveMediator("TimerMediator").killTimer(),this.sendNotification("killResourcePresentation",null,"internal");break;case"resourcebuffering":var r=n.retrieveProxy("PlayerDomProxy"),o=null==r?void 0:r.getMain();null==o||o.setAttribute("aria-busy",e.body.buffering.toString());break;case"adbreakstart":var s=n.retrieveMediator("PresentationMediator");null==(i=null==s?void 0:s.adapter)||i.clearText()}}}]),i}(io),us=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.facade.retrieveProxy("PlayerDomProxy");if(t){var i=t.getMain();i.setAttribute("role","region");var n=i.getAttribute("tabindex")||"0";i.setAttribute("tabindex",n);var a=t.getVideo();a&&!a.player&&(a.player=e.body,a.avia=Zn.appNamespace)}}}]),i}(io),cs=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.getModel("PresentationState"),i=this.facade.retrieveMediator("PresentationMediator");t.suspended=!1,i.resume();var n=this.getProxy("ContentPlaybackStateProxy");this.sendNotification("playbackresumed",{contentTime:n.model.time})}}]),i}(io),ds=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.facade.retrieveMediator("PresentationMediator"),i=this.facade.retrieveProxy("ResourceProxy");this.sendNotification("resourcestart",{resource:i.resource}),t.start()}}]),i}(io),hs=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,at.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.getModel("PresentationState");this.facade.retrieveMediator("PresentationMediator").suspend(),t.suspended=!0;var i=this.getProxy("ContentPlaybackStateProxy");this.sendNotification("playbacksuspended",{contentTime:i.model.time})}}]),i}(io),fs=(We={},(0,ot.default)(We,"default",null),(0,ot.default)(We,"bootApp",qo),(0,ot.default)(We,"ready",us),(0,ot.default)(We,"mutechange",es),(0,ot.default)(We,"volumechange",es),(0,ot.default)(We,"resourceend",ls),(0,ot.default)(We,"resourcebuffering",ls),(0,ot.default)(We,"adbreakstart",ls),(0,ot.default)(We,"metric",Jo),(0,ot.default)(We,"resourceComplete",ls),(0,ot.default)(We,"playOnUSerGesture",es),(0,ot.default)(We,"play",es),(0,ot.default)(We,"pause",es),(0,ot.default)(We,"seek",es),(0,ot.default)(We,"switchAudioTrack",es),(0,ot.default)(We,"switchTextTrack",es),(0,ot.default)(We,"switchTextMode",es),(0,ot.default)(We,"suspendPlayback",hs),(0,ot.default)(We,"resumePlayback",cs),(0,ot.default)(We,"switchBitrate",no),(0,ot.default)(We,"switchQualityCategory",no),(0,ot.default)(We,"autoQualitySwitching",no),(0,ot.default)(We,"minBitrate",no),(0,ot.default)(We,"maxBitrate",no),(0,ot.default)(We,"prepResourceCollection",ss),(0,ot.default)(We,"startPresentation",ds),(0,ot.default)(We,"playResource",os),(0,ot.default)(We,"killResourcePresentation",Yo),(0,ot.default)(We,"changeLanguage",Qo),(0,ot.default)(We,"playererror",zo),(0,ot.default)(We,"videostarterror",zo),(0,ot.default)(We,"videoplaybackerror",zo),(0,ot.default)(We,"resourceerror",zo),(0,ot.default)(We,"aderror",zo),(0,ot.default)(We,"adstalled",zo),We),ps=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,at.default)(this,i),(n=t.call(this,Object.assign({commandMap:fs,id:e.playerOptions.id||null},e))).pIsReady=!1,n.seekTime=NaN,n.hSeekRedirect=function(e){"seekredirectstart"!==e.type||isNaN(e.detail.actualSeekTime)?"seekredirectcomplete"===e.type&&(n.seekTime=NaN):n.seekTime=e.detail.actualSeekTime},n.api=to({},(0,Ye.default)(n)),n.target=n.api,n.logger=e.logger,n.init(e),n}return(0,nt.default)(i,[{key:"initialize",value:function(){var e=this,t=this.modelCollectionProxy.getModel("PlayerOptions"),i=t.plugins||[],n=this.getApi(),a={name:"changeLanguage",body:{language:t.language},type:"internal"};return this.on("seekredirectstart",this.hSeekRedirect),this.on("seekredirectcomplete",this.hSeekRedirect),n.registerPlugins(i).then(function(){return e.localization.registerLocalizationData(t.localization),e.sendAsyncNotification(a,["languagechange"])}).then(function(){return e.pIsReady=!0,e.sendNotification("ready",n),n}).catch(function(t){throw e.logger.error(t),t})}},{key:"destroy",value:function(){var e,t=this;this.off("seekredirectstart",this.hSeekRedirect),this.off("seekredirectcomplete",this.hSeekRedirect),null==(e=this.appMediator)||e.disableKeyCommands();var n=(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).bind(this),a=this.logger;return this.killCurrentResource().then(function(){t.apiAccessors=null,t.apiMethods=null,n()}).catch(function(e){throw a.error(e),e})}},{key:"getApi",value:function(){return this.api}},{key:"killCurrentResource",value:function(){return this.appMediator.killCurrentResource()}},{key:"hasListenerFor",value:function(e){if(!Vt(e))throw this.invalidArgException("hasListenerFor(type)",e);return(0,Xe.default)((0,it.default)(i.prototype),"hasListenerFor",this).call(this,e)}},{key:"on",value:function(e,t){if(!Vt(e)||"function"!=typeof t)throw this.invalidArgException("on(type, func)",e,t);er.checkEventName(e),(0,Xe.default)((0,it.default)(i.prototype),"on",this).call(this,e,t)}},{key:"once",value:function(e,t){if(!Vt(e)||"function"!=typeof t)throw this.invalidArgException("on(type, func)",e,t);er.checkEventName(e),(0,Xe.default)((0,it.default)(i.prototype),"once",this).call(this,e,t)}},{key:"off",value:function(e,t){if(!Vt(e))throw this.invalidArgException("on(type, func)",e,t);(0,Xe.default)((0,it.default)(i.prototype),"off",this).call(this,e,t)}},{key:"isReady",get:function(){return this.pIsReady}},{key:"id",get:function(){return this.appId}},{key:"dimensions",get:function(){return this.appMediator.getDimensions()||null}},{key:"video",get:function(){var e;return null==(e=this.dom)?void 0:e.getVideo()}},{key:"isAutoplay",get:function(){return this.presentationState.isAutoplay}},{key:"isFullscreen",get:function(){return this.presentationState.isFullscreen}},{key:"isAd",get:function(){return this.presentationState.isCurrentVideoAd}},{key:"muted",get:function(){return this.appMediator.getMuteState()},set:function(e){if("boolean"!=typeof e)throw this.invalidArgException("player.muted = boolean",e);this.muted!==e&&this.transmitExtRequest("mutechange",{muted:e})}},{key:"options",get:function(){var e,t=null==(e=this.modelCollectionProxy.getModel("PlayerOptions"))?void 0:e.model;return t?ji(t):null}},{key:"volume",get:function(){return this.appMediator.getVolume()},set:function(e){if(!Wt(e)||!Bi(e,0,1))throw this.invalidArgException("player.volume = number [0,1]",e);this.volume!==e&&this.transmitExtRequest("volumechange",{volume:e})}},{key:"language",get:function(){return this.localization.language},set:function(e){if(er.language(),!Vt(e))throw this.invalidArgException("player.language = string",e);this.transmitExtRequest("changeLanguage",{language:e})}},{key:"contentTime",get:function(){return isNaN(this.seekTime)?this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.time:0:this.seekTime}},{key:"sessionTime",get:function(){var e=this.appMediator.getSessionTime();return null==e?0:e}},{key:"playbackTime",get:function(){var e=this.appMediator.getPlaybackTime();return null==e?0:e}},{key:"contentDuration",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.duration:NaN}},{key:"streamTime",get:function(){return this.presentationState.streamTime}},{key:"streamDuration",get:function(){return this.presentationState.streamDuration}},{key:"playbackState",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.model.state)||"idle"}},{key:"autoQualitySwitching",get:function(){var e;return"auto"===(null==(e=this.contentPlaybackStateProxy)?void 0:e.qualitySwitchingMode)||!1},set:function(e){if(!jt(e))throw this.invalidArgException("player.autoQualitySwitching = boolean",e);this.contentPlaybackStateReady?this.transmitExtRequest("autoQualitySwitching",{value:e}):this.log(wi.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"quality",get:function(){var e,t;return(null==(t=null==(e=this.contentPlaybackStateProxy)?void 0:e.qualityInfo)?void 0:t.quality)||null}},{key:"qualities",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.qualities)||[]}},{key:"qualityInfo",get:function(){return er.qualityInfo(),this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.qualityInfo:null}},{key:"bitrate",get:function(){var e,t=(null==(e=this.qualityInfo)?void 0:e.quality)||{bitrate:NaN};return null!=t.bitrate?t.bitrate:NaN},set:function(e){if(!Wt(e))throw this.invalidArgException("player.bitrate = number",e);this.contentPlaybackStateReady?this.transmitExtRequest("switchBitrate",{value:e}):this.log(wi.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"qualityCategory",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.userQualityCategory:null},set:function(e){if(!Vt(e))throw this.invalidArgException("player.qualityCategory = string",e);this.contentPlaybackStateReady?this.transmitExtRequest("switchQualityCategory",{value:e}):this.log(wi.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"minBitrate",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.minBitrate:NaN},set:function(e){if(!Wt(e))throw this.invalidArgException("player.minBitrate = number",e);this.contentPlaybackStateReady?this.transmitExtRequest("minBitrate",{value:e}):this.log(wi.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"maxBitrate",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.maxBitrate:NaN},set:function(e){if(!Wt(e))throw this.invalidArgException("player.maxBitrate = number",e);this.contentPlaybackStateReady?this.transmitExtRequest("maxBitrate",{value:e}):this.log(wi.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"audioTracks",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.model.audioTracks.tracks)||[]}},{key:"audioTrackInfo",get:function(){return er.audioTrackInfo(),this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.audioTracks:null}},{key:"audioTrack",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.audioTracks.track:null},set:function(e){if(!e)throw this.invalidArgException("player.audioTrack = AudioTrackInterface",e);this.contentPlaybackStateReady?this.transmitExtRequest("switchAudioTrack",{value:e}):this.log(wi.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"attachResource",value:function(e){var t=this;return this.logger.time("resource-attachment"),this.stop().then(function(){if(!e||Ut(e))throw t.invalidArgException("attachResource(resource)",e)}).then(function(){return t.sendAsyncNotification({name:"prepResourceCollection",body:{resource:e,start:!0}},["resourcestart"])}).then(function(){return t.logger.timeEnd("resource-attachment"),t.resource}).catch(function(e){throw Ai.eventToError(e,"Resource")})}},{key:"resource",get:function(){return this.appMediator.getCurrentResource()}},{key:"textTrackEnabled",get:function(){return this.facade.retrieveProxy("TextTrackProxy").enabled},set:function(e){if(!jt(e))throw this.invalidArgException("player.textTrackEnabled = boolean",e);this.transmitExtRequest("switchTextMode",{value:e})}},{key:"textTrack",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.textTrackInfo.track)||null},set:function(e){if(!e||!e.kind)throw this.invalidArgException("player.textTrack = TextTrackInterface",e);this.contentPlaybackStateReady?this.transmitExtRequest("switchTextTrack",{value:e}):this.log(wi.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"textTracks",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.textTrackInfo.tracks)||[]}},{key:"textTrackInfo",get:function(){return er.textTrackInfo(),this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.textTrackInfo:null}},{key:"streamType",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.streamType:null}},{key:"isPlayingLive",get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return!0===(null==e?void 0:e.isPlayingLive)}},{key:"liveStreamUtcStart",get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteStart:NaN}},{key:"liveStreamUtcTime",get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteTime:NaN}},{key:"liveStreamUtcDuration",get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteDuration:NaN}},{key:"isSuspended",get:function(){return this.appMediator.isPlaybackSuspended()}},{key:"fullscreenElement",get:function(){return this.appMediator.getFullscreenElement()},set:function(e){var t,i;if(!e||!/element/.test(null==(i=null==(t=e.constructor)?void 0:t.name)?void 0:i.toLowerCase()))throw this.invalidArgException("player.fullscreenElement = HTMLElement",e);this.appMediator.setFullscreenElement(e)}},{key:"pausable",get:function(){var e;return!1!==(null==(e=this.opts.playerOptions.overrides)?void 0:e.liveStreamPausable)||"LIVE"!==this.streamType}},{key:"updateDimensions",value:function(){this.appMediator.updateDimensions()}},{key:"enterFullscreen",value:function(){this.transmitExtRequest("enterFullscreenRequest")}},{key:"exitFullscreen",value:function(){this.transmitExtRequest("exitFullscreenRequest")}},{key:"play",value:function(){return this.recordMetric("api","play"),this.appMediator.isPlaybackSuspended()&&this.transmitExtRequest("resumePlayback"),this.sendAsyncNotification({name:"play",type:"external"},["contentplaying","adplaying"])}},{key:"pause",value:function(){return this.recordMetric("api","pause"),this.pausable?"paused"===this.playbackState?Promise.resolve():this.sendAsyncNotification({name:"pause",type:"external"},["contentpaused","adpaused"]):(this.log(wi.messages.PAUSING_LINEAR_LIVE_STREAM_NOT_ALLOWED),this.stop())}},{key:"togglePlayPause",value:function(){return"playing"===this.playbackState?this.pause():this.play()}},{key:"seek",value:function(e){var t=this;return this.recordMetric("api","seek",e),this.hooks.applyHook("seek",{position:e,contentTime:this.contentTime,contentDuration:this.contentDuration,streamTime:this.streamTime,streamDuration:this.streamDuration}).then(function(e){if(null!=e){var i=t.appMediator.validateSeek(e.position,t.contentDuration);return null==i?Promise.reject(t.invalidArgException("seek(position)",e)):t.seekInternal(i)}})}},{key:"jump",value:function(e){return this.seek(this.contentTime+e)}},{key:"getAdBreakTimes",value:function(){return this.appMediator.getAdBreakTimes()||[]}},{key:"grabFrame",value:function(){return this.appMediator.grabFrame()}},{key:"getThumbnail",value:function(e){var t;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||er.getThumbnail(),!Wt(e))throw this.invalidArgException("getThumbnail(time)",e);return(null==(t=this.contentPlaybackStateProxy)?void 0:t.getThumbnail(e))||null}},{key:"getThumbnails",value:function(e){var t,i=this;if(!Wt(e))throw this.invalidArgException("getThumbnails(time)",e);return Promise.resolve(null==(t=this.getAdapter("playback"))?void 0:t.getThumbnails(e)).then(function(e){return e||[]}).then(function(t){var n=i.getThumbnail(e,!0);return n&&t.push(n.data),t})}},{key:"getContainerRect",value:function(){return this.appMediator.getContainerRect()}},{key:"registerPlugins",value:function(e,t){var i=this;return Array.isArray(e)?(t&&er.registerPlugins(),new Promise(function(n,a){i.transmitExtRequest("loadPlugins",{plugins:e,callback:function(e){return"function"==typeof t&&t(e),e?a(e):n()}})})):Promise.reject(this.invalidArgException("registerPlugins(cfgArray, callback?)",e,t))}},{key:"removePlugin",value:function(e){if(!Vt(e))throw this.invalidArgException("removePlugin(name)",e);this.transmitExtRequest("removePlugin",{name:e})}},{key:"registerAdapter",value:function(e){if(Ut(e))throw this.invalidArgException("registerAdapter(adapterConfig)",e);return this.adapters.registerAdapter(e)}},{key:"retrieveAdapter",value:function(e){if(!Vt(e))throw this.invalidArgException("retrieveAdapter(id)",e);return this.adapters.retrieveAdapter(e)}},{key:"removeAdapter",value:function(e){return Vt(e)||this.invalidArgException("removeAdapter(id)",e),this.adapters.removeAdapter(e)}},{key:"registerHook",value:function(e,t){if(!Vt(e)||"function"!=typeof t)throw this.invalidArgException("registerHook(type, hook)",e,t);return this.hooks.registerHook(e,t)}},{key:"removeHook",value:function(e,t){if(!Vt(e)||"function"!=typeof t)throw this.invalidArgException("removeHook(type, hook)",e,t);return this.hooks.removeHook(e,t)}},{key:"getPlugin",value:function(e){if(!Vt(e))throw this.invalidArgException("getPlugin(name)",e);return this.appMediator.getPlugin(e)}},{key:"getAdapter",value:function(e){var t=this.presentationMediator;if(!Vt(e))throw this.invalidArgException("getAdapter(role)",e);if(!t)return null;switch(e){case"ad":return t.adAdapter||null;case"playback":return t.adapter||null;default:return null}}},{key:"stop",value:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.model)&&this.presentationMediator?this.appMediator.killCurrentResource():Promise.resolve()}},{key:"goLive",value:function(){return this.recordMetric("api","go_live"),this.streamType&&"VOD"!==this.streamType?this.seekInternal(this.contentDuration):Promise.reject("goLive() can not be invoked on streams of type ".concat(this.streamType))}},{key:"skipAd",value:function(){this.appMediator.skipAd()}},{key:"focus",value:function(e){var t,i=null==(t=this.dom)?void 0:t.getMain();i&&i.focus(e)}},{key:"blur",value:function(){var e=this.dom.getMain();e&&e.blur()}},{key:"getKeyEventTarget",value:function(){return this.appMediator.getKeyEventTarget()}},{key:"disableKeyCommands",value:function(e){this.appMediator.disableKeyCommands(e)}},{key:"getConfigAsJson",value:function(e){return this.appMediator.getConfigAsJson(e)}},{key:"suspendPlayback",value:function(){var e=this;this.appMediator.isPlaybackSuspended()||this.pause().then(function(){e.transmitExtRequest("suspendPlayback")})}},{key:"resumePlayback",value:function(){this.play()}},{key:"recordMetric",value:function(e,t,i){if(!Vt(e)||!Vt(t))throw this.invalidArgException("recordMetric(type, key, value?)",e,t,i);this.sendNotification("metric",{metric:new Ua(t,i,e)})}},{key:"offsetTimedText",value:function(e){if(!Wt(e))throw this.invalidArgException("offsetTimedText(pixelOffset)",e);this.appMediator.offsetTimedText(e)}},{key:"primeVideoElement",value:function(){return this.appMediator.primeVideoElement()}},{key:"selectAudioLanguage",value:function(e,t){if(!Vt(e))throw this.invalidArgException("player.selectAudioLanguage(language)",e);if(this.modelCollectionProxy.getModel("PlayerOptions").audioLanguage=e,!this.contentPlaybackStateReady)return Promise.resolve(null);var i=oa(this.audioTracks,e).filter(function(e){return void 0===t||e.type===t})[0]||sa(this.audioTracks,e);if(!i||i===this.audioTrack)return Promise.resolve(i);var n={name:"switchAudioTrack",body:{value:i},type:"external"};return this.sendAsyncNotification(n,["audiotrackchange"]).then(function(e){return i})}},{key:"selectTextLanguage",value:function(e,t){if(!Vt(e))throw this.invalidArgException("player.selectTextLanguage(language)",e);if(this.modelCollectionProxy.getModel("PlayerOptions").textLanguage=e,this.facade.retrieveProxy("TextTrackProxy").language=e,!this.contentPlaybackStateReady)return Promise.resolve(null);var i=sa(this.textTracks,e);if(!i||i===this.textTrack)return Promise.resolve(i);var n={name:"switchTextTrack",body:{value:i},type:"external"};return this.sendAsyncNotification(n,["texttrackchange"]).then(function(e){return i})}},{key:"selectLocalizationLanguage",value:function(e){if(!Vt(e))throw this.invalidArgException("player.selectLocalizationLanguage(language)",e);this.modelCollectionProxy.getModel("PlayerOptions").language=e;var t={name:"changeLanguage",body:{language:e},type:"external"};return this.sendAsyncNotification(t,["languagechange"]).then(function(e){return e.localeData})}},{key:"waitForEvent",value:function(e,t,i){return Ii(this,e,t,i)}},{key:"waitForTime",value:function(e,t){return Ni(this,e,t)}},{key:"getBuffered",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.appMediator.getBuffered(e)||[]}},{key:"sendEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit(e,t)}},{key:"contentPlaybackStateProxy",get:function(){return this.facade.retrieveProxy("ContentPlaybackStateProxy")}},{key:"contentPlaybackStateReady",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.isReady)||!1}},{key:"localization",get:function(){return this.facade.retrieveProxy("LocalizationProxy")}},{key:"dom",get:function(){return this.facade.retrieveProxy("PlayerDomProxy")}},{key:"adapters",get:function(){return this.facade.retrieveProxy("AdapterProxy")}},{key:"presentationState",get:function(){return this.modelCollectionProxy.getModel("PresentationState")}},{key:"presentationMediator",get:function(){return this.facade.retrieveMediator("PresentationMediator")}},{key:"hooks",get:function(){return this.facade.retrieveProxy("HookProxy")}},{key:"transmitExtRequest",value:function(e,t){this.sendNotification(e,t,"external")}},{key:"log",value:function(e,t){var i=t||"debug";this.facade.log(i,e)}},{key:"init",value:function(e){var t=this,i=new Qr(e.hookManager);this.facade.registerProxy(i);var n=this.opts.globalServices;this.facade.log("info","".concat(Fa.playerName,"@").concat(Fa.playerVersion,"  ").concat(Fa.buildTime)),this.registerGlobalServices(n),delete this.opts.globalServices,this.sendNotification("bootApp",{playerOptions:this.opts.playerOptions||null,app:this},"internal"),this.logger.on("logtimeevent",function(e){var i=e.detail,n=i.id,a=i.label,r=i.item,o="".concat(a,":start");t.recordMetric("mark",o,{id:n,name:o,startTime:r.startTime})}),this.logger.on("logtimeendevent",function(e){var i=e.detail,n=i.id,a=i.label,r=i.item,o=r.startTime,s=r.duration,l="".concat(a,":end");t.recordMetric("mark",l,{id:n,name:l,startTime:o+s}),t.recordMetric("measure",a,{id:n,name:a,startTime:o,duration:s})})}},{key:"sendAsyncNotification",value:function(e,t){var i=Mi([{target:this,events:t}],[{target:this,events:["error"]}]);return this.sendNotification(e.name,e.body,e.type),i}},{key:"invalidArgException",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var a=null==i?void 0:i.map(function(e){return void 0===e?"undefined":e}),r=(null==a?void 0:a.toString())||null,o="".concat(e,"; ").concat(wi.messages.API_INVALID_ARG,"; supplied arg(s): ").concat(r);return this.log(o),new gr(o)}},{key:"seekInternal",value:function(e){var t=this;if(this.seekTime=e,this.seekPending)return this.seekPending.then(function(){return t.seekTime===e?t.seekInternal(t.seekTime):void 0});var i={name:"seek",body:{value:e},type:"external"};return this.seekPending=this.sendAsyncNotification(i,["seekcomplete"]),this.seekPending.then(function(){Math.abs(e-t.seekTime)<=1&&(t.seekTime=NaN),t.seekPending=null}).catch(function(i){throw t.seekPending=null,new Ai("9999",(null==i?void 0:i.message)||"An error occurred on seek to ".concat(e),i||null,!1,"API")}).then(function(){t.seekPending=null})}}]),i}(Zr);Pt([Jr()],ps.prototype,"hasListenerFor",1),Pt([Jr()],ps.prototype,"on",1),Pt([Jr()],ps.prototype,"once",1),Pt([Jr()],ps.prototype,"off",1),Pt([eo()],ps.prototype,"isReady",1),Pt([eo()],ps.prototype,"id",1),Pt([eo()],ps.prototype,"dimensions",1),Pt([eo()],ps.prototype,"video",1),Pt([eo()],ps.prototype,"isAutoplay",1),Pt([eo()],ps.prototype,"isFullscreen",1),Pt([eo()],ps.prototype,"isAd",1),Pt([eo()],ps.prototype,"muted",1),Pt([eo()],ps.prototype,"options",1),Pt([eo()],ps.prototype,"volume",1),Pt([eo()],ps.prototype,"language",1),Pt([eo()],ps.prototype,"contentTime",1),Pt([eo()],ps.prototype,"sessionTime",1),Pt([eo()],ps.prototype,"playbackTime",1),Pt([eo()],ps.prototype,"contentDuration",1),Pt([eo()],ps.prototype,"streamTime",1),Pt([eo()],ps.prototype,"streamDuration",1),Pt([eo()],ps.prototype,"playbackState",1),Pt([eo()],ps.prototype,"autoQualitySwitching",1),Pt([eo()],ps.prototype,"quality",1),Pt([eo()],ps.prototype,"qualities",1),Pt([eo()],ps.prototype,"qualityInfo",1),Pt([eo()],ps.prototype,"bitrate",1),Pt([eo()],ps.prototype,"qualityCategory",1),Pt([eo()],ps.prototype,"minBitrate",1),Pt([eo()],ps.prototype,"maxBitrate",1),Pt([eo()],ps.prototype,"audioTracks",1),Pt([eo()],ps.prototype,"audioTrackInfo",1),Pt([eo()],ps.prototype,"audioTrack",1),Pt([Jr()],ps.prototype,"attachResource",1),Pt([eo()],ps.prototype,"resource",1),Pt([eo()],ps.prototype,"textTrackEnabled",1),Pt([eo()],ps.prototype,"textTrack",1),Pt([eo()],ps.prototype,"textTracks",1),Pt([eo()],ps.prototype,"textTrackInfo",1),Pt([eo()],ps.prototype,"streamType",1),Pt([eo()],ps.prototype,"isPlayingLive",1),Pt([eo()],ps.prototype,"liveStreamUtcStart",1),Pt([eo()],ps.prototype,"liveStreamUtcTime",1),Pt([eo()],ps.prototype,"liveStreamUtcDuration",1),Pt([eo()],ps.prototype,"isSuspended",1),Pt([eo()],ps.prototype,"fullscreenElement",1),Pt([eo()],ps.prototype,"pausable",1),Pt([Jr()],ps.prototype,"updateDimensions",1),Pt([Jr()],ps.prototype,"enterFullscreen",1),Pt([Jr()],ps.prototype,"exitFullscreen",1),Pt([Jr()],ps.prototype,"play",1),Pt([Jr()],ps.prototype,"pause",1),Pt([Jr()],ps.prototype,"togglePlayPause",1),Pt([Jr()],ps.prototype,"seek",1),Pt([Jr()],ps.prototype,"jump",1),Pt([Jr()],ps.prototype,"getAdBreakTimes",1),Pt([Jr()],ps.prototype,"grabFrame",1),Pt([Jr()],ps.prototype,"getThumbnail",1),Pt([Jr()],ps.prototype,"getThumbnails",1),Pt([Jr()],ps.prototype,"getContainerRect",1),Pt([Jr()],ps.prototype,"registerPlugins",1),Pt([Jr()],ps.prototype,"removePlugin",1),Pt([Jr()],ps.prototype,"registerAdapter",1),Pt([Jr()],ps.prototype,"retrieveAdapter",1),Pt([Jr()],ps.prototype,"removeAdapter",1),Pt([Jr()],ps.prototype,"registerHook",1),Pt([Jr()],ps.prototype,"removeHook",1),Pt([Jr()],ps.prototype,"getPlugin",1),Pt([Jr()],ps.prototype,"getAdapter",1),Pt([Jr()],ps.prototype,"stop",1),Pt([Jr()],ps.prototype,"goLive",1),Pt([Jr()],ps.prototype,"skipAd",1),Pt([Jr()],ps.prototype,"focus",1),Pt([Jr()],ps.prototype,"blur",1),Pt([Jr()],ps.prototype,"getKeyEventTarget",1),Pt([Jr()],ps.prototype,"disableKeyCommands",1),Pt([Jr()],ps.prototype,"getConfigAsJson",1),Pt([Jr()],ps.prototype,"suspendPlayback",1),Pt([Jr()],ps.prototype,"resumePlayback",1),Pt([Jr()],ps.prototype,"recordMetric",1),Pt([Jr()],ps.prototype,"offsetTimedText",1),Pt([Jr()],ps.prototype,"primeVideoElement",1),Pt([Jr()],ps.prototype,"selectAudioLanguage",1),Pt([Jr()],ps.prototype,"selectTextLanguage",1),Pt([Jr()],ps.prototype,"selectLocalizationLanguage",1),Pt([Jr()],ps.prototype,"waitForEvent",1),Pt([Jr()],ps.prototype,"waitForTime",1),Pt([Jr()],ps.prototype,"getBuffered",1);var vs,gs=!1,ms=null,ys=new bi(Si),As={},ks={},bs={};function Es(){if(!gs){gs=!0;var e={"Array.from":function(){return Array.from},"Array.prototype.find":function(){return Array.prototype.find},"Array.prototype.findIndex":function(){return Array.prototype.findIndex},"Array.prototype.includes":function(){return Array.prototype.includes},"Object.assign":function(){return Object.assign},Promise:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return"undefined"!=typeof Promise}),"String.prototype.includes":function(){return String.prototype.includes},"String.prototype.repeat":function(){return String.prototype.repeat}};Object.keys(e).forEach(function(t){var i=!1;try{i=!!e[t]()}catch(e){i=!1}finally{i||ci.warn("Polyfill warning: ".concat(t," is not defined"))}})}}function Ss(){return Object.keys(ks).concat(Object.keys(As)).reduce(function(e,t){return e.includes(t)||e.push(t),e},[])}function Ts(e,t){ys.defineHook(e,t)}function ws(e,t){ys.registerHook(e,t)}function xs(e,t){ys.removeHook(e,t)}function Cs(e,t,i){ys.applyHook(e,t,i)}function _s(){return It(this,null,ze.default.mark(function e(){return ze.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ys.applyHook("devicecapabilities",{drm:{keySystemStatus:[],hdcpStatus:[]}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}function Ps(e){var t=this,i=performance.now(),n=new Kr(e),a=n.id,r=new ci({logLevel:n.logLevel,id:a});return ks[a]=function(e){if(vs)return vs;Es();var t=$r.getInstance(),i=e.overrides,n=!1!==(null==i?void 0:i.deferAutoplayDetection);return vs=Promise.all([!n&&t.detectCapabilities(null==i?void 0:i.blankVideoUrl)]).then(function(){ms=(0,ot.default)({},"AutoplayCapabilities",t)})}(n).then(function(){return It(t,null,ze.default.mark(function e(){var t,a;return ze.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ys.applyHook("createplayer",n);case 3:return t=e.sent,a=new ps({globalServices:ms,playerOptions:t,hookManager:ys,logger:r}),r.time("player-creation",i),e.abrupt("return",a.initialize().then(function(e){return{api:e,player:a}}));case 9:throw e.prev=9,e.t0=e.catch(0),e.t0.key&&(e.t0.message='A player with id "'.concat(e.t0.key,'" a already exists')),e.t0;case 13:case"end":return e.stop()}},e,null,[[0,9]])}))}).then(function(e){var t=e.api,i=e.player;return As[a]=i,delete ks[a],r.timeEnd("player-creation"),t})}function Is(e){var t=As[e];if(t)return Promise.resolve(t);var i=bs[e];return i?i.then(function(){return null}):ks[e]||Promise.resolve(null)}function Ns(e){var t=this;return bs[e]||Promise.resolve().then(function(){return ks[e]?ks[e]:null}).then(function(){return It(t,null,ze.default.mark(function t(){var i,n;return ze.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=As[e]){t.next=3;break}return t.abrupt("return",Promise.resolve());case 3:return n=i.options.logLevel,delete As[e],t.next=7,ys.applyHook("removeplayer",i);case 7:return t.abrupt("return",bs[e]=i.destroy().then(function(){delete bs[e],"info"!==n&&"debug"!==n||ci.log('[Avia] Player with id "'.concat(e,'" removed.'))}));case 8:case"end":return t.stop()}},t)}))})}function Ls(e){return new Gr(e)}function Ms(){return St({},Zn)}function Rs(e){return $r.getInstance().detectCapabilities(e)}var Ds=Tt(St({},Ti),{registerHook:ws,removeHook:xs,applyHook:Cs,createVideoPlayer:Ps,retrieveVideoPlayer:Is,removeVideoPlayer:Ns,createResourceConfig:Ls,getSystemInfo:Ms,getAutoplayCapabilities:Rs,getDeviceCapabilities:_s});return Zn.appNamespace=Ds,Mt}()},function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"ActiveMode",function(){return Ce}),i.d(t,"AviaAccessibility",function(){return ii}),i.d(t,"AviaActive",function(){return ni}),i.d(t,"AviaAdControlBar",function(){return ai}),i.d(t,"AviaAdProgressBar",function(){return ri}),i.d(t,"AviaButton",function(){return oi}),i.d(t,"AviaControlBar",function(){return si}),i.d(t,"AviaControlBarCompact",function(){return li}),i.d(t,"AviaControlGroup",function(){return ui}),i.d(t,"AviaCurrentTime",function(){return ci}),i.d(t,"AviaDuration",function(){return di}),i.d(t,"AviaFullscreenToggle",function(){return hi}),i.d(t,"AviaLiveControl",function(){return fi}),i.d(t,"AviaMenu",function(){return pi}),i.d(t,"AviaMenuItem",function(){return vi}),i.d(t,"AviaMuteToggle",function(){return gi}),i.d(t,"AviaOverlay",function(){return mi}),i.d(t,"AviaPanel",function(){return yi}),i.d(t,"AviaPauseOverlay",function(){return Ai}),i.d(t,"AviaPlayCta",function(){return ki}),i.d(t,"AviaPlayOverlay",function(){return bi}),i.d(t,"AviaPlayToggle",function(){return Ei}),i.d(t,"AviaPoster",function(){return Si}),i.d(t,"AviaProgressBar",function(){return Ti}),i.d(t,"AviaSeekBackButton",function(){return wi}),i.d(t,"AviaSeekForwardButton",function(){return xi}),i.d(t,"AviaSeekIndicator",function(){return Ci}),i.d(t,"AviaSettings",function(){return _i}),i.d(t,"AviaSettingsAudio",function(){return Pi}),i.d(t,"AviaSettingsLanguage",function(){return Ii}),i.d(t,"AviaSettingsQuality",function(){return Ni}),i.d(t,"AviaSettingsText",function(){return Li}),i.d(t,"AviaSettingsToggle",function(){return Mi}),i.d(t,"AviaSlider",function(){return Ri}),i.d(t,"AviaSpinner",function(){return Di}),i.d(t,"AviaText",function(){return Oi}),i.d(t,"AviaTextToggle",function(){return Bi}),i.d(t,"AviaTimeDisplay",function(){return Ui}),i.d(t,"AviaTimeRemaining",function(){return Fi}),i.d(t,"AviaUi",function(){return Vi}),i.d(t,"AviaUiPlugin",function(){return pt}),i.d(t,"AviaUnmuteCta",function(){return Hi}),i.d(t,"AviaVolumeIndicator",function(){return Wi}),i.d(t,"AviaVolumeSlider",function(){return ji}),i.d(t,"AviaWaitingOverlay",function(){return $i}),i.d(t,"DeviceMode",function(){return Ne}),i.d(t,"ID",function(){return vt}),i.d(t,"LocalizationId",function(){return Le}),i.d(t,"PreviewTimeTransform",function(){return Ge}),i.d(t,"UI",function(){return dt}),i.d(t,"createPlugin",function(){return gt}),i.d(t,"createUiPlugin",function(){return ft}),i.d(t,"defineCustomElements",function(){return Ki}),i.d(t,"plugin",function(){return mt}),i.d(t,"setAssetPath",function(){return h}),i.d(t,"setPlatformOptions",function(){return re}),i.d(t,"ui",function(){return ht});let n,a,r,o=!1,s=!1,l=!1,u=!1,c=null,d=!1;const h=e=>ge.$resourcesUrl$=e,f="http://www.w3.org/1999/xlink",p={},v=e=>"object"==(e=typeof e)||"function"===e,g=(e,t,...i)=>{let n=null,a=null,r=null,o=!1,s=!1;const l=[],u=t=>{for(let i=0;i<t.length;i++)n=t[i],Array.isArray(n)?u(n):null!=n&&"boolean"!=typeof n&&((o="function"!=typeof e&&!v(n))&&(n=String(n)),o&&s?l[l.length-1].$text$+=n:l.push(o?m(null,n):n),s=o)};if(u(i),t&&(t.key&&(a=t.key),t.name&&(r=t.name),1)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter(t=>e[t]).join(" "))}if("function"==typeof e)return e(null===t?{}:t,l,k);const c=m(e,null);return c.$attrs$=t,l.length>0&&(c.$children$=l),c.$key$=a,c.$name$=r,c},m=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},y={},A=e=>e&&e.$tag$===y,k={forEach:(e,t)=>e.map(b).forEach(t),map:(e,t)=>e.map(b).map(t).map(E)},b=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),E=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),g(e.vtag,t,...e.vchildren||[])}const t=m(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},S=e=>e,T=(e,t,i)=>{const n=S(e);return{emit:e=>w(n,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e})}},w=(e,t,i)=>{const n=ge.ce(t,i);return e.dispatchEvent(n),n},x=new WeakMap,C=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),_=(e,t,i,n,a,r)=>{if(i!==n){let o=ue(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,a=I(i),r=I(n);t.remove(...a.filter(e=>e&&!r.includes(e))),t.add(...r.filter(e=>e&&!a.includes(e)))}else if("style"===t){for(const t in i)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)i&&n[t]===i[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=v(n);if((o||l&&null!==n)&&!a)try{if(e.tagName.includes("-"))e[t]=n;else{const a=null==n?"":n;"list"===t?o=!1:null!=i&&e[t]==a||(e[t]=a)}}catch(e){}let u=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,u=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(u?e.removeAttributeNS(f,t):e.removeAttribute(t)):(!o||4&r||a)&&!l&&(n=!0===n?"":n,u?e.setAttributeNS(f,t,n):e.setAttribute(t,n))}else t="-"===t[2]?t.slice(3):ue(fe,s)?s.slice(2):s[2]+t.slice(3),i&&ge.rel(e,t,i,!1),n&&ge.ael(e,t,n,!1)}},P=/\s/,I=e=>e?e.split(P):[],N=(e,t,i,n)=>{const a=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,r=e&&e.$attrs$||p,o=t.$attrs$||p;for(n in r)n in o||_(a,n,r[n],void 0,i,t.$flags$);for(n in o)_(a,n,r[n],o[n],i,t.$flags$)},L=(e,t,i,s)=>{const c=t.$children$[i];let d,h,f,p=0;if(o||(l=!0,"slot"===c.$tag$&&(n&&s.classList.add(n+"-s"),c.$flags$|=c.$children$?2:1)),null!==c.$text$)d=c.$elm$=pe.createTextNode(c.$text$);else if(1&c.$flags$)d=c.$elm$=pe.createTextNode("");else{if(u||(u="svg"===c.$tag$),d=c.$elm$=pe.createElementNS(u?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&c.$flags$?"slot-fb":c.$tag$),u&&"foreignObject"===c.$tag$&&(u=!1),N(null,c,u),null!=n&&d["s-si"]!==n&&d.classList.add(d["s-si"]=n),c.$children$)for(p=0;p<c.$children$.length;++p)(h=L(e,c,p,d))&&d.appendChild(h);"svg"===c.$tag$?u=!1:"foreignObject"===d.tagName&&(u=!0)}return d["s-hn"]=r,3&c.$flags$&&(d["s-sr"]=!0,d["s-cr"]=a,d["s-sn"]=c.$name$||"",(f=e&&e.$children$&&e.$children$[i])&&f.$tag$===c.$tag$&&e.$elm$&&M(e.$elm$,!1)),d},M=(e,t)=>{ge.$flags$|=1;const i=e.childNodes;for(let e=i.length-1;e>=0;e--){const n=i[e];n["s-hn"]!==r&&n["s-ol"]&&(U(n).insertBefore(n,B(n)),n["s-ol"].remove(),n["s-ol"]=void 0,l=!0),t&&M(n,t)}ge.$flags$&=-2},R=(e,t,i,n,a,o)=>{let s,l=e["s-cr"]&&e["s-cr"].parentNode||e;for(l.shadowRoot&&l.tagName===r&&(l=l.shadowRoot);a<=o;++a)n[a]&&((s=L(null,i,a,e))&&(n[a].$elm$=s,l.insertBefore(s,B(t))))},D=(e,t,i,n,a)=>{for(;t<=i;++t)(n=e[t])&&(a=n.$elm$,$(n),s=!0,a["s-ol"]?a["s-ol"].remove():M(a,!0),a.remove())},O=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),B=e=>e&&e["s-ol"]||e,U=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,F=(e,t)=>{const i=t.$elm$=e.$elm$,n=e.$children$,a=t.$children$,r=t.$tag$,o=t.$text$;let s;null===o?(u="svg"===r||"foreignObject"!==r&&u,"slot"===r||N(e,t,u),null!==n&&null!==a?((e,t,i,n)=>{let a,r,o=0,s=0,l=0,u=0,c=t.length-1,d=t[0],h=t[c],f=n.length-1,p=n[0],v=n[f];for(;o<=c&&s<=f;)if(null==d)d=t[++o];else if(null==h)h=t[--c];else if(null==p)p=n[++s];else if(null==v)v=n[--f];else if(O(d,p))F(d,p),d=t[++o],p=n[++s];else if(O(h,v))F(h,v),h=t[--c],v=n[--f];else if(O(d,v))"slot"!==d.$tag$&&"slot"!==v.$tag$||M(d.$elm$.parentNode,!1),F(d,v),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++o],v=n[--f];else if(O(h,p))"slot"!==d.$tag$&&"slot"!==v.$tag$||M(h.$elm$.parentNode,!1),F(h,p),e.insertBefore(h.$elm$,d.$elm$),h=t[--c],p=n[++s];else{for(l=-1,u=o;u<=c;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===p.$key$){l=u;break}l>=0?((r=t[l]).$tag$!==p.$tag$?a=L(t&&t[s],i,l,e):(F(r,p),t[l]=void 0,a=r.$elm$),p=n[++s]):(a=L(t&&t[s],i,s,e),p=n[++s]),a&&U(d.$elm$).insertBefore(a,B(d.$elm$))}o>c?R(e,null==n[f+1]?null:n[f+1].$elm$,i,n,s,f):s>f&&D(t,o,c)})(i,n,t,a):null!==a?(null!==e.$text$&&(i.textContent=""),R(i,null,t,a,0,a.length-1)):null!==n&&D(n,0,n.length-1),u&&"svg"===r&&(u=!1)):(s=i["s-cr"])?s.parentNode.textContent=o:e.$text$!==o&&(i.data=o)},V=e=>{const t=e.childNodes;let i,n,a,r,o,s;for(n=0,a=t.length;n<a;n++)if(1===(i=t[n]).nodeType){if(i["s-sr"])for(o=i["s-sn"],i.hidden=!1,r=0;r<a;r++)if(s=t[r].nodeType,t[r]["s-hn"]!==i["s-hn"]||""!==o){if(1===s&&o===t[r].getAttribute("slot")){i.hidden=!0;break}}else if(1===s||3===s&&""!==t[r].textContent.trim()){i.hidden=!0;break}V(i)}},H=[],W=e=>{let t,i,n,a,r,o,l=0;const u=e.childNodes,c=u.length;for(;l<c;l++){if((t=u[l])["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(n=i.parentNode.childNodes,a=t["s-sn"],o=n.length-1;o>=0;o--)(i=n[o])["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||(j(i,a)?(r=H.find(e=>e.$nodeToRelocate$===i),s=!0,i["s-sn"]=i["s-sn"]||a,r?r.$slotRefNode$=t:H.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&H.map(e=>{j(e.$nodeToRelocate$,i["s-sn"])&&((r=H.find(e=>e.$nodeToRelocate$===i))&&!e.$slotRefNode$&&(e.$slotRefNode$=r.$slotRefNode$))})):H.some(e=>e.$nodeToRelocate$===i)||H.push({$nodeToRelocate$:i}));1===t.nodeType&&W(t)}},j=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,$=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map($)},K=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,we(()=>G(e,t))),G=(e,t)=>{const i=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{}),a=i;let r;return r=Q(a,t?"componentWillLoad":"componentWillUpdate"),r=X(r,()=>Q(a,"componentWillRender")),n(),X(r,()=>q(e,a,t))},q=async(e,t,i)=>{const n=e.$hostElement$,a=(e.$cmpMeta$.$tagName$,()=>{});n["s-rc"],i&&(e=>{const t=e.$cmpMeta$,i=e.$hostElement$,n=t.$flags$,a=(t.$tagName$,()=>{}),r=((e,t,i,n)=>{let a=C(t,i);const r=de.get(a);if(e=11===e.nodeType?e:pe,r)if("string"==typeof r){e=e.head||e;let t,i=x.get(e);i||x.set(e,i=new Set),i.has(a)||((t=pe.createElement("style")).innerHTML=r,e.insertBefore(t,e.querySelector("link")),i&&i.add(a))}else e.adoptedStyleSheets.includes(r)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,r]);return a})(me&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&n&&(i["s-sc"]=r,i.classList.add(r+"-h"),2&n&&i.classList.add(r+"-s")),a()})(e);const r=(e.$cmpMeta$.$tagName$,()=>{});z(e,t,n),r(),a(),Y(e)},z=(e,t,i)=>{try{c=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t)=>{const i=e.$hostElement$,u=e.$cmpMeta$,c=e.$vnode$||m(null,null),d=A(t)?t:g(null,null,t);if(r=i.tagName,u.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},u.$attrsToReflect$.map(([e,t])=>d.$attrs$[t]=i[e])),d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=c.$elm$=i.shadowRoot||i,n=i["s-sc"],a=i["s-cr"],o=me&&0!=(1&u.$flags$),s=!1,F(c,d),ge.$flags$|=1,l){let e,t,i,n,a,r;W(d.$elm$);let o=0;for(;o<H.length;o++)(t=(e=H[o]).$nodeToRelocate$)["s-ol"]||((i=pe.createTextNode(""))["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(o=0;o<H.length;o++)if(t=(e=H[o]).$nodeToRelocate$,e.$slotRefNode$){for(n=e.$slotRefNode$.parentNode,a=e.$slotRefNode$.nextSibling,i=t["s-ol"];i=i.previousSibling;)if((r=i["s-nr"])&&r["s-sn"]===t["s-sn"]&&n===r.parentNode&&(!(r=r.nextSibling)||!r["s-nr"])){a=r;break}(!a&&n!==t.parentNode||t.nextSibling!==a)&&t!==a&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),n.insertBefore(t,a))}else 1===t.nodeType&&(t.hidden=!0)}s&&V(d.$elm$),ge.$flags$&=-2,H.length=0})(e,t)}catch(t){ce(t,e.$hostElement$)}return c=null,null},Y=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$;e.$ancestorComponent$,Q(t,"componentDidRender"),64&e.$flags$?Q(t,"componentDidUpdate"):(e.$flags$|=64,Q(t,"componentDidLoad"))},Q=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(e){ce(e)}},X=(e,t)=>e&&e.then?e.then(t):t(),Z=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),n=e.prototype;i.map(([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(n,e,{get(){return t=e,se(this).$instanceValues$.get(t);var t},set(i){((e,t,i,n)=>{const a=se(e),r=e,o=a.$instanceValues$.get(t),s=a.$flags$,l=r;var u,c;u=i,c=n.$members$[t][0],i=null==u||v(u)?u:4&c?"false"!==u&&(""===u||!!u):2&c?parseFloat(u):1&c?String(u):u;const d=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!d){if(a.$instanceValues$.set(t,i),n.$watchers$&&128&s){const e=n.$watchers$[t];e&&e.map(e=>{try{l[e](i,o,t)}catch(e){ce(e,r)}})}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,o,t))return;K(a,!1)}}})(this,e,i,t)},configurable:!0,enumerable:!0})});{const a=new Map;n.attributeChangedCallback=function(e,t,i){ge.jmp(()=>{const t=a.get(e);if(this.hasOwnProperty(t))i=this[t],delete this[t];else if(n.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==i)return;this[t]=(null!==i||"boolean"!=typeof this[t])&&i})},e.observedAttributes=i.filter(([e,t])=>15&t[0]).map(([e,i])=>{const n=i[1]||e;return a.set(n,e),512&i[0]&&t.$attrsToReflect$.push([e,n]),n})}}return e},J=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[],!me&&1&i.$flags$&&(i.$flags$|=8);const n=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){le(this,i)},connectedCallback(){(e=>{if(0==(1&ge.$flags$)){const t=se(e),i=t.$cmpMeta$,n=(i.$tagName$,()=>{});1&t.$flags$?(te(e,t,i.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&i.$flags$&&(e=>{const t=e["s-cr"]=pe.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)})(e),i.$members$&&Object.entries(i.$members$).map(([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}}),(async(e,t,i,n,a)=>{if(0==(32&t.$flags$)&&(a=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),a.style)){let n=a.style;"string"!=typeof n&&(n=n[t.$modeName$=(e=>he.map(t=>t(e)).find(e=>!!e))(e)]);const r=C(i,t.$modeName$);if(!de.has(r)){const e=(i.$tagName$,()=>{});((e,t,i)=>{let n=de.get(e);Ae&&i?"string"==typeof(n=n||new CSSStyleSheet)?n=t:n.replaceSync(t):n=t,de.set(e,n)})(r,n,!!(1&i.$flags$)),e()}}t.$ancestorComponent$,K(t,!0)})(e,t,i)),n()}})(this),n&&n.call(this)},disconnectedCallback(){(e=>{if(0==(1&ge.$flags$)){const t=se(e);t.$rmListeners$&&(t.$rmListeners$.map(e=>e()),t.$rmListeners$=void 0)}})(this),a&&a.call(this)},__attachShadow(){me?this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)}):this.shadowRoot=this}}),e.is=i.$tagName$,Z(e,i)},ee=(e,t)=>t,te=(e,t,i,n)=>{i&&i.map(([i,n,a])=>{const r=ne(e,i),o=ie(t,a),s=ae(i);ge.ael(r,n,o,s),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>ge.rel(r,n,o,s))})},ie=(e,t)=>i=>{try{e.$hostElement$[t](i)}catch(e){ce(e)}},ne=(e,t)=>4&t?pe:8&t?fe:16&t?pe.body:e,ae=e=>ye?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),re=e=>Object.assign(ge,e),oe=new WeakMap,se=e=>oe.get(e),le=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return te(e,i,t.$listeners$),oe.set(e,i)},ue=(e,t)=>t in e,ce=(e,t)=>(0,console.error)(e,t),de=new Map,he=[],fe="undefined"!=typeof window?window:{},pe=fe.document||{head:{}},ve=fe.HTMLElement||class{},ge={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,n)=>e.addEventListener(t,i,n),rel:(e,t,i,n)=>e.removeEventListener(t,i,n),ce:(e,t)=>new CustomEvent(e,t)},me=!0,ye=(()=>{let e=!1;try{pe.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),Ae=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),ke=[],be=[],Ee=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){ce(e)}e.length=0},Se=()=>{Ee(ke),Ee(be),(d=ke.length>0)&&ge.raf(Se)},Te=e=>{return Promise.resolve(void 0).then(e)},we=((e,t)=>i=>{e.push(i),d||(d=!0,t&&4&ge.$flags$?Te(Se):ge.raf(Se))})(be,!0);var xe,Ce,_e,Pe,Ie,Ne,Le,Me;function Re(e,t){let i;const n=()=>{clearTimeout(i),i=null},a=(...a)=>{n(),i=setTimeout(e,t,...a)};return a.cancel=n,a.flush=e,a.pending=(()=>null!=i),a}function De(e){return null==e||void 0===e||""===e}function Oe(e){return De(e)?[]:e.split(",").map(e=>e.trim())}function Be(e,t){const i=function(e=0){(null==e||isNaN(e))&&(e=0);const t=Ve(e,3600).split(":");return{hours:parseInt(t[0]),minutes:parseInt(t[1]),seconds:parseInt(t[2])}}(e),n=i.hours>0;let a="";return n&&(a+=`${i.hours} ${t[Le.HOURS]} `),(i.minutes>0||n)&&(a+=`${i.minutes} ${t[Le.MINUTES]} `),a+=`${i.seconds} ${t[Le.SECONDS]}`}function Ue(e){return(null==e?void 0:e.pageX)||e.targetTouches&&0!==e.targetTouches.length?{x:e.pageX-(window.scrollX||window.pageXOffset)||e.targetTouches[0].pageX-window.scrollX,y:e.pageY-(window.scrollY||window.pageYOffset)||e.targetTouches[0].pageY-window.scrollY}:{x:null,y:null}}function Fe(e){return t=100*e,2,Math.round(t*Math.pow(10,2))/Math.pow(10,2)+"%";var t}function Ve(e,t=61){if(null==e||isNaN(e))return"00:00";let i=He((e|=0)%60);return i=He((e=e/60|0)%60)+":"+i,(e=e/60|0)>0&&(i=He(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i}function He(e){return e<10?"0"+e:e.toString()}function We(e,t,i,n=0,a=1){return(e-t)*(a-n)/(i-t)+n}function je(e,t,i){return Math.max(t,Math.min(i,e))}function $e(e){e.stopPropagation(),e.preventDefault()}function Ke(e){const t=e.split("-").shift().slice(0,2).toUpperCase();return Me[t]}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self,function(){function e(e){var t=!0,i=!1,n=null,a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function r(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function s(e){t=!1}function l(){document.addEventListener("mousemove",u),document.addEventListener("mousedown",u),document.addEventListener("mouseup",u),document.addEventListener("pointermove",u),document.addEventListener("pointerdown",u),document.addEventListener("pointerup",u),document.addEventListener("touchmove",u),document.addEventListener("touchstart",u),document.addEventListener("touchend",u)}function u(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(t=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mousedown",u),document.removeEventListener("mouseup",u),document.removeEventListener("pointermove",u),document.removeEventListener("pointerdown",u),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",u),document.removeEventListener("touchstart",u),document.removeEventListener("touchend",u))}document.addEventListener("keydown",function(i){i.metaKey||i.altKey||i.ctrlKey||(r(e.activeElement)&&o(e.activeElement),t=!0)},!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerdown",s,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState&&(i&&(t=!0),l())},!0),l(),e.addEventListener("focus",function(e){var i,n,s;r(e.target)&&(t||(i=e.target,n=i.type,"INPUT"===(s=i.tagName)&&a[n]&&!i.readOnly||"TEXTAREA"===s&&!i.readOnly||i.isContentEditable))&&o(e.target)},!0),e.addEventListener("blur",function(e){var t;r(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(i=!0,window.clearTimeout(n),n=window.setTimeout(function(){i=!1},100),(t=e.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))},!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute("data-js-focus-visible",""):e.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(t=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)}(),function(e){e.PLAY="play",e.PAUSE="pause",e.STOP="stop",e.ENTER_FULLSCREEN="enterfullscreen",e.EXIT_FULLSCREEN="exitfullscreen",e.MUTE="mute",e.UNMUTE="unmute",e.TEXT_ON="texton",e.TEXT_OFF="textoff",e.GO_TO_LIVE="gotolive",e.MENU_ITEM_SELECT="menuitemselect",e.LIST_ITEM_SELECT="listitemselect",e.NONE="none",e.SEEK="seek",e.SEEK_FORWARD="seekforward",e.SEEK_BACK="seekback",e.VOLUME="volume",e.PREVIEW="preview",e.SETTINGS_ON="settingson",e.SETTINGS_OFF="settingsoff",e.LANGUAGE_SELECT="languageselect",e.QUALITY_SELECT="qualityselect",e.POSTER_PLAY="posterplay",e.PANEL_BACK="panelback",e.PANEL_CLOSE="panelclose"}(xe||(xe={})),function(e){e.AUTO="auto",e.MANUAL="manual"}(Ce||(Ce={})),function(e){e.MUTE="mute",e.PLAY="play",e.FULLSCREEN="fullscreen",e.TEXT="text",e.PLAY_OVERLAY="playOverlay",e.SETTINGS="settings",e.VOLUME="volume"}(_e||(_e={})),function(e){e.NONE="none",e.AD="ad",e.CONTENT="content",e.COMPACT="compact"}(Pe||(Pe={})),function(e){e.HIDDEN="avia-ui-hidden",e.ACC_VOL_ON="avia-volume-on",e.ACC_VOL_OFF="avia-volume-off",e.SEGMENT_MARKER="avia-segment-marker",e.INDICATOR_ACTIVE="avia-indicator-active",e.ACC_VOL="avia-acc-vol",e.ACC_VOL_METER="avia-acc-vol-meter",e.ACC_VOL_OVERLAY="avia-vol-meter-overlay",e.ACC_FWD="avia-acc-fwd",e.ACC_BACK="avia-acc-back",e.ACC_ARROW="avia-acc-arrow",e.UNMUTE_CTA="avia-unmute-cta",e.CONTROLS_VISIBLE="avia-controls-vis",e.SPINNER_ACTIVE="avia-spinner",e.SPINNER_IDLE="avia-spinner-idle",e.SETTINGS_NUDGE_LEFT="avia-settings-nudge-left"}(Ie||(Ie={})),function(e){e.AUTO="auto",e.TV="tv",e.DESKTOP="desktop",e.MOBILE="mobile"}(Ne||(Ne={})),function(e){e.PLAY="play",e.PAUSE="pause",e.STOP="stop",e.MUTE="mute",e.UNMUTE="unmute",e.VOLUME="volume",e.CLICK_TO_UNMUTE="click-to-unmute",e.TAP_TO_UNMUTE="tap-to-unmute",e.LIVE="live",e.GO_LIVE="go-live",e.SEEK="seek",e.SEEK_BACK="seek-back",e.SEEK_FORWARD="seek-forward",e.CLOSED_CAPTIONS_OFF="closed-captions-off",e.CLOSED_CAPTIONS_ON="closed-captions-on",e.FULL_SCREEN_ENTER="full-screen-enter",e.FULL_SCREEN_EXIT="full-screen-exit",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.VALUE_OF_TOTAL="value-of-total",e.UNMUTE_CTA="unmute-cta",e.SETTINGS="settings",e.LANGUAGE="language",e.QUALITY="quality",e.BACK="back",e.CAPTIONS="captions",e.AUDIO="audio",e.CLOSE="close",e.AUTO="auto",e.UNKNOWN="unknown"}(Le||(Le={})),function(e){e.AB="Abkhaz",e.AE="Avesta",e.AF="Afrikaans",e.AK="Akan",e.AM="አማርኛ",e.AN="Aragonés",e.AR="العربية",e.AV="Aвар мацӀ",e.AY="Aymar aru",e.AZ="azərbaycan dili",e.BA="башҡорт теле",e.BE="беларуская мова",e.BG="български език",e.BH="भोजपुरी",e.BI="Bislama",e.BM="Bamanankan",e.BN="বাংলা",e.BO="བོད་ཡིག",e.BR="Brezhoneg",e.BS="Bosanski jezik",e.CA="català",e.CE="нохчийн мотт",e.CH="Chamoru",e.CO="Corsu",e.CR="ᓀᐦᐃᔭᐍᐏᐣ",e.CS="čeština",e.CU="ѩзыкъ словѣньскъ",e.CV="чӑваш чӗлхи",e.CY="Cymraeg",e.DA="Dansk",e.DE="Deutsch",e.DZ="རྫོང་ཁ",e.EE="Eʋegbe",e.EL="ελληνικά",e.EN="English",e.EO="Esperanto",e.ES="Español",e.ET="Eesti",e.EU="Euskara",e.FA="فارسی",e.FF="Fulfulde",e.FI="Suomi",e.FJ="Vosa Vakaviti",e.FO="Føroyskt",e.FR="Français",e.FY="Frysk",e.GA="Gaeilge",e.GD="Gàidhlig",e.GL="Galego",e.GN="Avañe'ẽ",e.GU="ગુજરાતી",e.GV="Gaelg",e.HA="(Hausa) هَوُسَ",e.HE="עברית",e.HI="हिन्दी",e.HO="Hiri Motu",e.HR="hrvatski jezik",e.HT="Kreyòl ayisyen",e.HU="Magyar",e.HY="Հայերեն",e.HZ="Otjiherero",e.IA="Interlingua",e.ID="Bahasa Indonesia",e.IE="Interlingue",e.IG="Asụsụ Igbo",e.II="ꆈꌠ꒿ Nuosuhxop",e.IK="Iñupiaq",e.IO="Ido",e.IS="Íslenska",e.IT="Italiano",e.IU="ᐃᓄᒃᑎᑐᑦ",e.JA="日本人",e.JV="Basa Jawa",e.KA="ქართული",e.KG="Kikongo",e.KI="Gĩkũyũ",e.KJ="Kuanyama",e.KK="қазақ тілі",e.KL="kalaallisut",e.KM="ខ្មែរ",e.KN="ಕನ್ನಡ",e.KO="한국어",e.KR="Kanuri",e.KS="कश्मीरी,",e.KU="Kurdî",e.KV="коми кыв",e.KW="Kernewek",e.KY="Кыргызча",e.LA="Latine",e.LB="Lëtzebuergesch",e.LG="Luganda",e.LI="Limburgs",e.LN="Lingála",e.LO="ພາສາລາວ",e.LT="Lietuvių kalba",e.LU="Kiluba",e.LV="latviešu valoda",e.MG="fiteny malagasy",e.MH="Kajin M̧ajeļ",e.MI="te reo Māori",e.MK="македонски јазик",e.ML="മലയാളം",e.MN="Монгол хэл",e.MR="मराठी",e.MS="Bahasa Melayu",e.MT="Malti",e.MY="ဗမာစာ",e.NA="Dorerin Naoero",e.NB="Norsk Bokmål",e.NE="नेपाली",e.NG="Owambo",e.NL="Nederlands",e.NN="Norsk Nynorsk",e.NO="Norsk",e.NR="IsiNdebele",e.NV="Diné bizaad",e.NY="ChiCheŵa",e.OC="Occitan",e.OJ="ᐊᓂᔑᓈᐯᒧᐎᓐ",e.OM="Afaan Oromoo",e.OR="ଓଡ଼ିଆ",e.OS="ирон æвзаг",e.PA="ਪੰਜਾਬੀ",e.PI="पालि, पाळि",e.PL="Język polski",e.PS="پښتو",e.PT="Português",e.QU="Runa Simi",e.RM="Rumantsch Grischun",e.RN="Ikirundi",e.RO="Română",e.RU="русский",e.RW="Ikinyarwanda",e.SA="संस्कृतम्",e.SC="sardu",e.SD="सिन्धी",e.SE="Davvisámegiella",e.SG="Yângâ tî sängö",e.SI="සිංහල",e.SK="Slovenčina",e.SL="Slovenski jezik",e.SM="Gagana fa'a Samoa",e.SN="chiShona",e.SO="Soomaaliga",e.SQ="Shqip",e.SR="српски језик",e.SS="SiSwati",e.ST="Sesotho",e.SU="Basa Sunda",e.SV="Svenska",e.SW="Kiswahili",e.TA="தமிழ்",e.TE="తెలుగు",e.TG="тоҷикӣ",e.TH="ไทย",e.TI="ትግርኛ",e.TK="Türkmen",e.TL="Wikang Tagalog",e.TN="Setswana",e.TO="Faka Tonga",e.TR="Türkçe",e.TS="Xitsonga",e.TT="татар теле",e.TW="Twi",e.TY="Reo Tahiti",e.UG="ئۇيغۇرچە",e.UK="Українська",e.UR="اردو",e.UZ="Oʻzbek",e.VE="Tshivenḓa",e.VI="Tiếng Việt",e.VO="Volapük",e.WA="Walon",e.WO="Wollof",e.XH="IsiXhosa",e.YI="ייִדיש",e.YO="Yorùbá",e.ZA="Saɯ cueŋƅ",e.ZH="中文 (Zhōngwén)",e.ZU="IsiZulu"}(Me||(Me={}));const Ge={DEFAULT:e=>Ve(e.contentTime),UTC_TIME:e=>new Date(e.liveStreamUtcTime).toTimeString().split(" ")[0]};var qe,ze,Ye;(qe||(qe={})).ACTION="uiaction",function(e){e.LEFT="left",e.RIGHT="right",e.UP="up",e.DOWN="down",e.ENTER="enter",e.UNSPECIFIED="*"}(ze||(ze={})),function(e){e.VERTICAL="vertical",e.HORIZONTAL="horizontal"}(Ye||(Ye={}));var Qe={4:ze.LEFT,21:ze.LEFT,37:ze.LEFT,214:ze.LEFT,205:ze.LEFT,218:ze.LEFT,5:ze.RIGHT,22:ze.RIGHT,39:ze.RIGHT,213:ze.RIGHT,206:ze.RIGHT,217:ze.RIGHT,29460:ze.UP,19:ze.UP,38:ze.UP,211:ze.UP,203:ze.UP,215:ze.UP,29461:ze.DOWN,20:ze.DOWN,40:ze.DOWN,212:ze.DOWN,204:ze.DOWN,216:ze.DOWN,29443:ze.ENTER,13:ze.ENTER,67:ze.ENTER,32:ze.ENTER,23:ze.ENTER,195:ze.ENTER},Xe=function(e){return!!e&&(null!=e.isFocusable?e.isFocusable:!!e.selectAction)},Ze=function(e,t){if(!e||!t)return!1;var i=nt(e),n=at(t);return n===ze.UNSPECIFIED||i===Ye.VERTICAL&&(n===ze.UP||n===ze.DOWN)||i===Ye.HORIZONTAL&&(n===ze.LEFT||n===ze.RIGHT)},Je=function(e,t){if(e&&e.children)for(var i=0;i<e.children.length;i++){var n=e.children[i];if(n.indexRange&&n.indexRange[0]<=t&&n.indexRange[1]>=t)return n}},et=function(e,t,i){if(e&&e.children){if(i&&e.activeChild&&e.activeChild.index>=i[0]&&e.activeChild.index<=i[1]&&Xe(e.activeChild))return e.activeChild;for(var n,a,r=[],o=0;o<e.children.length;o++)(Xe(e.children[o])||e.children[o].children)&&r.push(o);if(!(r.length<=0))return e.children[(n=r,a=t,n.reduce(function(e,t){return Math.abs(t-a)<Math.abs(e-a)?t:e}))]}},tt=function(e,t){if(e&&t)if(e.children||(e.children=[]),t.parent=e,"number"!=typeof t.index||t.index>e.children.length)t.index=e.children.length,e.children.push(t);else{e.children.splice(t.index,0,t);for(var i=t.index+1;i<e.children.length;i++)e.children[i].index=i}},it=function(e,t){if(t&&e&&e.children){for(var i=-1,n=0;n<e.children.length;n++)e.children[n]===t?i=n:-1!==i&&(e.children[n].index=n-1);-1!==i&&(1===e.children.length?e.children=void 0:e.children.splice(i,1))}},nt=function(e){if(e)for(var t=0,i=Object.keys(Ye);t<i.length;t++){var n=i[t];if(Ye[n]===e.toLowerCase())return Ye[n]}},at=function(e){if(e)for(var t=0,i=Object.keys(ze);t<i.length;t++){var n=i[t];if(ze[n]===e.toLowerCase())return ze[n]}},rt=function(e,t){for(var i,n=[e],a=Object.create(null);n.length>0;){if(i=n.pop(),t.call(a,i))return;if(i.children)for(var r=i.children.length-1;r>=0;r--)n.push(i.children[r])}};function ot(e){return e=e||Object.create(null),{on:function(t,i){(e[t]||(e[t]=[])).push(i)},off:function(t,i){e[t]&&e[t].splice(e[t].indexOf(i)>>>0,1)},emit:function(t,i){(e[t]||[]).slice().map(function(e){e(i)}),(e["*"]||[]).slice().map(function(e){e(t,i)})}}}var st,lt=function(){function e(){this.nodes={},this.rootNode=void 0,this.currentFocusNode=void 0,this.isIndexAlignMode=!1,this.emitter=ot()}return e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e.prototype.getRootNode=function(){if(!this.rootNode)throw new Error("no root node");return this.rootNode},e.prototype.getCurrentFocusNode=function(){return this.currentFocusNode},e.prototype.registerNode=function(e,t){var i;if(void 0===t&&(t={}),this.getNode(e))throw Error("Node with an ID of "+e+" has already been registered");var n=function(e,t){if(void 0===t&&(t={}),!e)throw Error("Node ID has to be defined");return{id:e,parent:void 0,children:void 0,activeChild:void 0,overrides:void 0,overrideSources:void 0,index:"number"==typeof t.index?t.index:void 0,orientation:t.orientation,indexRange:t.indexRange,selectAction:t.selectAction,isFocusable:t.isFocusable,isWrapping:t.isWrapping,isStopPropagate:t.isStopPropagate,isIndexAlign:t.isIndexAlign,onLeave:t.onLeave,onEnter:t.onEnter,shouldCancelLeave:t.shouldCancelLeave,onLeaveCancelled:t.onLeaveCancelled,shouldCancelEnter:t.shouldCancelEnter,onEnterCancelled:t.onEnterCancelled,onSelect:t.onSelect,onInactive:t.onInactive,onActive:t.onActive,onActiveChildChange:t.onActiveChildChange,onBlur:t.onBlur,onFocus:t.onFocus,onMove:t.onMove}}(e,t);if(!this.rootNode)return this.rootNode=n,this.nodes=((i={})[e]=n,i),this;var a=t.parent?this.getNode(t.parent):this.rootNode;return a?(this.nodes[e]=n,tt(a,n),this):this},e.prototype.moveNode=function(e,t,i){if(void 0===i&&(i={maintainIndex:!1}),e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t,e&&t&&e!==this.rootNode&&e.parent!==t){var n=e.parent;it(n,e),"number"==typeof i.index?e.index=i.index:i.maintainIndex||(e.index=void 0),tt(t,e),this.unsetActiveChild(n,e),this.isSameOrParentForChild(e,this.currentFocusNode)&&this.setActiveChildRecursive(t,e)}},e.prototype.register=function(e,t){return this.registerNode(e,t)},e.prototype.unregister=function(e,t){this.unregisterNode(e,t)},e.prototype.unregisterNode=function(e,t){var i=this;if(void 0===t&&(t={forceRefocus:!0}),!(e="string"==typeof e?this.getNode(e):e))return this;if(e===this.rootNode)return this.nodes={},this.rootNode=void 0,this.currentFocusNode=void 0,this.isIndexAlignMode=!1,this.emitter=ot(),this;var n=e.parent;n.activeChild&&n.activeChild===e&&(this.isIndexAlignMode=!1,this.unsetActiveChild(n,e)),it(n,e);var a=!1;return rt(e,function(e){delete i.nodes[e.id],i.unregisterOverride(e);for(var t=0,n=e.overrideSources||[];t<n.length;t++)i.unregisterOverride(n[t].node,n[t].direction);e===i.currentFocusNode&&(i.currentFocusNode=void 0,a=!0)}),this.emitter.emit("blur",e),e.onBlur&&e.onBlur(e),a&&t.forceRefocus&&this.recalculateFocus(n),this},e.prototype.registerOverride=function(e,t,i,n){if(void 0===n&&(n={}),!(e="string"==typeof e?this.getNode(e):e))throw new Error("registering override: missing source node");if(!(t="string"==typeof t?this.getNode(t):t))throw new Error("registering override: missing target node");if(!(i=at(i)))throw new Error("registering override: missing direction");if(e.overrides&&e.overrides[i]){if(!n.forceOverride)throw new Error("registering override: override from "+e.id+" to "+t.id+" in direction "+i+" already exist");this.unregisterOverride(e,i)}return e.overrides=e.overrides||{},e.overrides[i]=t,t.overrideSources=t.overrideSources||[],t.overrideSources.push({direction:i,node:e}),this},e.prototype.unregisterOverride=function(e,t){if((e="string"==typeof e?this.getNode(e):e)&&e.overrides&&(!t||(t=at(t)))){for(var i=!0,n=0,a=Object.keys(ze);n<a.length;n++){var r=a[n],o=ze[r];if(t&&t!==o)i=i&&!(e.overrides&&e.overrides[o]);else{var s=e.overrides[o];if(s&&s.overrideSources)for(var l=0;l<s.overrideSources.length;l++)if(s.overrideSources[l].direction===o&&s.overrideSources[l].node===e){1===s.overrideSources.length?s.overrideSources=void 0:(s.overrideSources[l]=s.overrideSources[s.overrideSources.length-1],s.overrideSources.length=s.overrideSources.length-1);break}e.overrides[o]=void 0}}return i&&(e.overrides=void 0),this}},e.prototype.getNode=function(e){if(e)return this.nodes[e]},e.prototype.pickNode=function(e){var t=this.getNode(e);if(t)return this.unregisterNode(t),t},e.prototype.climbUp=function(e,t){for(;e;){if(e.overrides&&e.overrides[t])return e.overrides[t];if(e!==this.currentFocusNode)if(Ze(e.orientation,t)){if(this.getNextFocusableChildInDirection(e,t))return e;e=e.parent}else e=e.parent;else e=e.parent}},e.prototype.digDown=function(e,t){for(void 0===t&&(t=ze.UNSPECIFIED);e;){if(Xe(e)&&(e.isStopPropagate||!this.doesNodeHaveFocusableChildren(e)))return e;if(this.isIndexAlignMode){var i=this.getCurrentFocusNode(),n=i.indexRange,a=n?n[0]:i.index;if(e.isIndexAlign){if(e.parent.orientation===Ye.VERTICAL){if(t===ze.UP){e=et(this.getNodeLastChild(e),a,n);continue}if(t===ze.DOWN){e=et(this.getNodeFirstChild(e),a,n);continue}}if(e.parent.orientation===Ye.HORIZONTAL){if(t===ze.LEFT){e=this.getNodeLastChild(et(e,i.parent.index));continue}if(t===ze.RIGHT){e=this.getNodeFirstChild(et(e,i.parent.index));continue}}}var r=Je(e,a);if(r){e=r;continue}e=et(e,a,n)}else e=e.activeChild?e.activeChild:this.getNextFocusableChildInDirection(e,ze.UNSPECIFIED)}},e.prototype.getNextFocusableChildInDirection=function(e,t){if(e){var i,n=nt(e.orientation),a=at(t);(a===ze.UNSPECIFIED||n===Ye.HORIZONTAL&&a===ze.RIGHT||n===Ye.VERTICAL&&a===ze.DOWN)&&(i=this.getNextFocusableChild(e));var r=a===ze.UNSPECIFIED||n===Ye.HORIZONTAL&&a===ze.LEFT||n===Ye.VERTICAL&&a===ze.UP;return!i&&r&&(i=this.getPrevFocusableChild(e)),i}},e.prototype.getNextFocusableChild=function(e){if(e&&e.children){if(!e.activeChild)return this.getNodeFirstFocusableChild(e);for(var t=e.activeChild.index+1;t<e.children.length;t++)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t];if(e.isWrapping)for(t=0;t<e.activeChild.index;t++)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t]}},e.prototype.getPrevFocusableChild=function(e){if(e&&e.children){if(!e.activeChild)return this.getNodeLastFocusableChild(e);for(var t=e.activeChild.index-1;t>=0;t--)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t];if(e.isWrapping)for(t=e.children.length-1;t>e.activeChild.index;t--)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t]}},e.prototype.getNodeFirstChild=function(e){if(e&&e.children)return e.children[0]},e.prototype.getNodeLastChild=function(e){if(e&&e.children)return e.children[e.children.length-1]},e.prototype.getNodeFirstFocusableChild=function(e){if(e&&e.children)for(var t=0;t<e.children.length;t++)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t]},e.prototype.getNodeLastFocusableChild=function(e){if(e&&e.children)for(var t=e.children.length-1;t>=0;t--)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t]},e.prototype.handleKeyEvent=function(e,t){if(void 0===t&&(t={forceFocus:!1}),e){var i,n=e.keyCode?(i=e.keyCode,Qe[i]):at(e.direction);if(n){var a,r,o=this.getCurrentFocusNode();if(n===ze.ENTER)return o&&(this.emitter.emit("select",o),o.onSelect&&o.onSelect(o)),o;if(!o&&t.forceFocus)a=this.getRootNode(),r=this.getNextFocusableChildInDirection(a,ze.UNSPECIFIED);else{if(!(a=this.climbUp(o,n)))return;this.isIndexAlignMode=!0===a.isIndexAlign;var s=this.getNextFocusableChildInDirection(a,n);r=this.digDown(s||a,n)}if(r){if(o&&o.shouldCancelLeave&&o.shouldCancelLeave(o,r))return o.onLeaveCancelled&&o.onLeaveCancelled(o,r),this.emitter.emit("cancelled",{leave:o,enter:r}),o;if(r.shouldCancelEnter&&r.shouldCancelEnter(o,r))return r.onEnterCancelled&&r.onEnterCancelled(o,r),this.emitter.emit("cancelled",{leave:o,enter:r}),o;this.assignFocus(r);var l=n===ze.LEFT||n===ze.UP?-1:1;return this.emitter.emit("move",{leave:o,enter:r,direction:n,offset:l}),a.onMove&&a.onMove({node:a,leave:o,enter:r,direction:n,offset:l}),o&&o.onLeave&&o.onLeave(o),r.onEnter&&r.onEnter(r),r}}}},e.prototype.setActiveChild=function(e,t){if(e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t,e&&t&&t.parent.id===e.id)if(e.activeChild&&e.activeChild.id!==t.id){var i=e.activeChild;e.activeChild=t,this.emitter.emit("inactive",i),i.onInactive&&i.onInactive(i),this.emitter.emit("active",t),t.onActive&&t.onActive(t),e.onActiveChildChange&&e.onActiveChildChange({node:e,leave:i,enter:t})}else e.activeChild||(e.activeChild=t,this.emitter.emit("active",t),t.onActive&&t.onActive(t),e.onActiveChildChange&&e.onActiveChildChange({node:e,leave:null,enter:t}))},e.prototype.setActiveChildRecursive=function(e,t){for(e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t;e;)this.setActiveChild(e,t),t=e,e=e.parent},e.prototype.unsetActiveChild=function(e,t){if(e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t,e&&e.activeChild&&t&&e.activeChild===t)for(var i=this.isSameOrParentForChild(t,this.currentFocusNode);e&&e.activeChild;){var n=e.activeChild===t,a=this.isSameOrParentForChild(e.activeChild,this.currentFocusNode);(i||n&&!a)&&(e.activeChild=void 0),t=e,e=e.parent}},e.prototype.assignFocus=function(e){if((e="string"==typeof e?this.getNode(e):e)&&!Xe(e)&&(e=this.digDown(e,ze.UNSPECIFIED)),!e)throw new Error("trying to assign focus to a non focusable node");this.currentFocusNode&&(this.emitter.emit("blur",this.currentFocusNode),this.currentFocusNode.onBlur&&this.currentFocusNode.onBlur(this.currentFocusNode)),this.currentFocusNode=e,e.parent&&this.setActiveChildRecursive(e.parent,e),e.onFocus&&e.onFocus(e),this.emitter.emit("focus",e)},e.prototype.recalculateFocus=function(e){var t=this.climbUp(e,ze.UNSPECIFIED)||this.getRootNode(),i=this.getNextFocusableChildInDirection(t,ze.UNSPECIFIED),n=this.digDown(i||t,ze.UNSPECIFIED);n?this.assignFocus(n):this.currentFocusNode=void 0},e.prototype.registerTree=function(e){var t=this;e&&rt(e,function(e){if(t.registerNode(e.id,e),e.children)for(var i=0;i<e.children.length;i++)e.children[i].parent=e.id})},e.prototype.insertTree=function(e,t){if(void 0===t&&(t={maintainIndex:!0}),e){var i=this.pickNode(e.id);!e.parent&&i&&i.parent&&(e.parent=i.parent.id),t.maintainIndex&&i&&"number"==typeof i.index&&(e.index=i.index),this.registerTree(e)}},e.prototype.doesNodeHaveFocusableChildren=function(e){if(!e||!e.children)return!1;var t=!1;return rt(e,function(i){return i!==e&&(t=t||Xe(i)),t}),t},e.prototype.isNodeFocusableCandidate=function(e){return Xe(e)||this.doesNodeHaveFocusableChildren(e)},e.prototype.isSameOrParentForChild=function(e,t){if(e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t,!e||!t)return!1;if(e===t)return!0;for(;t;){if(t.parent===e)return!0;t=t.parent}return!1},e.prototype.setNodeFocusable=function(e,t){(e="string"==typeof e?this.getNode(e):e)&&Xe(e)!==t&&(e.isFocusable=t,t||(this.currentFocusNode===e&&this.recalculateFocus(e),e.parent&&this.unsetActiveChild(e.parent,e)))},e}();!function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(st||(st={}));class ut{constructor(e){this.element=e,this.parents=["[role=menu]","[role=menubar]"],this.interactive=[...this.parents,"button","a[href]","input","textarea","select","details",'[tabindex]:not([tabindex="-1"]'],this.scope=document,this.counter=0,this.onMutation=Re(()=>{this.createGraph()},250),this.onKeyDown=(e=>{this.navigation.handleKeyEvent(e)}),this.onFocus=(e=>{const t=this.find(t=>t.id===e.id);(null==t?void 0:t.element)&&t.element.focus()}),this.onFocusIn=Re(e=>{var t;const i=this.find(t=>t.element===e.target);i&&(null===(t=this.navigation)||void 0===t||t.assignFocus(i.id))},250),this.observer=new MutationObserver(this.onMutation),this.observer.observe(this.element,{childList:!0,subtree:!0})}createGraph(){var e,t;this.counter=0;const i=this.interactive.join(", "),n=this.parents.join(", "),a=new Map;this.graph=this.elementToNode(this.element),this.element.querySelectorAll(i).forEach(e=>{if(null===e.offsetParent)return;if(!0===e.disabled)return;const t=(e.matches(n)?e.parentElement:e).closest(n)||this.element;a.has(t)||a.set(t,[]),a.get(t).push(e)}),a.forEach((e,t)=>{const i=this.find(e=>e.element===t);i.children=e.map(e=>this.elementToNode(e,i))});const r=null===(e=this.navigation)||void 0===e?void 0:e.getCurrentFocusNode();null===(t=this.navigation)||void 0===t||t.unregisterNode(this.rootId);const o=new lt;o.registerTree(this.graph),this.rootId=this.graph.id,this.element.addEventListener("focusin",this.onFocusIn),o.on("focus",this.onFocus);const{activeElement:s}=document;if(r)if(s){const e=this.find(e=>e.element===s);e&&o.assignFocus(e.id)}else o.assignFocus(r.id);this.scope.addEventListener("keydown",this.onKeyDown),this.navigation=o}walk(e,t=this.graph){e(t);for(const i of t.children)this.walk(e,i)}find(e,t=this.graph){if(e(t))return t;for(const i of t.children){const t=this.find(e,i);if(t)return t}return null}focus(e){const t=this.interactive.join(", "),i=e.querySelector(t),n=this.find(e=>e.element===i);n&&this.navigation.assignFocus(n.id)}elementToNode(e,t){const i=e.role?"menu"===e.role?st.VERTICAL:st.HORIZONTAL:void 0,n=e.textContent?"-"+e.textContent:"";return{id:e.id||`${e.nodeName}-${this.counter++}${n}`,element:e,parent:null==t?void 0:t.id,children:[],orientation:i,isFocusable:!!t}}destroy(){this.navigation&&(this.navigation.off("focus",this.onFocus),this.navigation.unregisterNode(this.rootId)),this.element.removeEventListener("focusin",this.onFocusIn),this.onFocusIn.cancel(),this.scope.removeEventListener("keypress",this.onKeyDown),this.scope=null,this.onMutation.cancel(),this.observer.disconnect(),this.observer=null}}const ct={en:{[Le.PLAY]:"Play",[Le.PAUSE]:"Pause",[Le.STOP]:"Stop",[Le.MUTE]:"Mute",[Le.UNMUTE]:"Unmute",[Le.VOLUME]:"Volume",[Le.CLICK_TO_UNMUTE]:"Click to unmute",[Le.TAP_TO_UNMUTE]:"Tap to unmute",[Le.SEEK]:"Seek",[Le.SEEK_BACK]:"Seek Backward",[Le.SEEK_FORWARD]:"Seek Forward",[Le.LIVE]:"Live",[Le.GO_LIVE]:"Go Live",[Le.CLOSED_CAPTIONS_OFF]:"Closed Captions Off",[Le.CLOSED_CAPTIONS_ON]:"Closed Captions On",[Le.FULL_SCREEN_ENTER]:"Enter Fullscreen",[Le.FULL_SCREEN_EXIT]:"Exit Fullscreen",[Le.HOURS]:"Hours",[Le.MINUTES]:"Minutes",[Le.SECONDS]:"Seconds",[Le.VALUE_OF_TOTAL]:"{{value}} of {{total}}",[Le.SETTINGS]:"Settings",[Le.LANGUAGE]:"Language",[Le.QUALITY]:"Quality",[Le.BACK]:"Back",[Le.CAPTIONS]:"Captions",[Le.AUDIO]:"Audio",[Le.CLOSE]:"Close",[Le.AUTO]:"Auto",[Le.UNKNOWN]:"Unknown"},es:{[Le.PLAY]:"Reproducir",[Le.PAUSE]:"Pausa",[Le.STOP]:"Stop",[Le.MUTE]:"Silencio",[Le.UNMUTE]:"Dejar de silenciar",[Le.VOLUME]:"Volumen",[Le.CLICK_TO_UNMUTE]:"Haz clic para dejar de silenciar",[Le.TAP_TO_UNMUTE]:"Toca para dejar de silenciar",[Le.SEEK]:"Buscar",[Le.SEEK_BACK]:"Buscar hacia atrás",[Le.SEEK_FORWARD]:"Buscar adelante",[Le.LIVE]:"En Vivo",[Le.GO_LIVE]:"Ir a Vivir",[Le.CLOSED_CAPTIONS_OFF]:"Subtítulos cerrados",[Le.CLOSED_CAPTIONS_ON]:"Subtítulos cerrados en",[Le.FULL_SCREEN_ENTER]:"Ir a pantalla completa",[Le.FULL_SCREEN_EXIT]:"Salir de pantalla completa",[Le.HOURS]:"Horas",[Le.MINUTES]:"Minutos",[Le.SECONDS]:"Segundos",[Le.VALUE_OF_TOTAL]:"{{value}} de {{total}}",[Le.SETTINGS]:"Configuraciones",[Le.LANGUAGE]:"Lengua",[Le.QUALITY]:"Calidad",[Le.BACK]:"Volver",[Le.CAPTIONS]:"Subtítulos",[Le.AUDIO]:"Audio",[Le.CLOSE]:"Cerrar",[Le.AUTO]:"Auto",[Le.UNKNOWN]:"Desconocida"}},dt="ui";function ht(e={}){return{id:dt,factory:ft,options:e}}async function ft(e,t){"object"!=typeof customElements&&e.logger.warn("Polyfill warning: customElements is not defined"),"function"!=typeof Node.prototype.getRootNode&&e.logger.warn("Polyfill warning: Node.prototype.getRootNode is not defined");const i=new pt;return await i.onRegister(e.player,t,e),i}class pt extends class{constructor(e){this.debug=!1,this.logFmt="color: #fcf; font-style: italic;",this.id=e,this.player=null,this.services=null,this.options=null,this.onPlayerEvent=this.onPlayerEvent.bind(this)}getId(){return this.id}destroy(){this.listenToPlayer(!1,this.getEventInterests()),this.player=null,this.options=null,this.services=null,this.avia=null}onPlayerEvent(e){}getEventInterests(){return[]}sendEvent(e){this.services.event.dispatchPluginEvent(e)}listenToPlayer(e,t){const i=!1!==e?"on":"off";t.forEach(e=>this.player[i](e,this.onPlayerEvent))}log(e){this.debug&&(null===console||void 0===console||console.log(`%c<Plugin: ${this.id}> ${e}`,this.logFmt))}async onRegister(e,t,i){this.player=e,this.services=i,this.options=t,this.avia=i.avia,this.debug=!0===t.debug,await this.initialize(),this.listenToPlayer(!0,this.getEventInterests()),this.log("Registered "+this.id)}async initialize(){}}{constructor(){super(dt),this.TV_MODE_IDLE_DELAY=7e3,this.defaultSeekInc=10,this.accIndicatorDisplayTime=1500,this.playbackStarted=!1,this.settingsEngaged=!1,this.firstProgressReceived=!1,this.defaultCompactViewBreakpoint=520,this.rootElement="avia-ui",this.previewTimeTransform=Ge.DEFAULT,this.pendingActive=!1,this.resourceStarted=!1,this.activeMode_=Ce.AUTO,this.idleDelay_=NaN,this.BUFFERED_CHECK_COUNT_INTERVAL=10,this.bufferedCheckCounter=0,this.onKeyDown=(()=>{if(this.aviaUi.deviceMode===Ne.TV&&this.activeMode!==Ce.MANUAL&&(this.setActive(!0),!this.aviaUi.contains(document.activeElement))){const e=this.aviaUi.querySelector("avia-progress-bar");null==e||e.focus()}}),this.aviaUi=null,this.onUiEvent=this.onUiEvent.bind(this),this.accVolUpdater=Re(e=>{this.setAccIndicatorState(e)},this.accIndicatorDisplayTime),this.accSeekUpdater=Re(e=>{this.setAccIndicatorState(e)},this.accIndicatorDisplayTime),document.addEventListener("keydown",this.onKeyDown)}get activeMode(){return this.activeMode_||Ce.AUTO}set activeMode(e){this.activeMode_=e}get active(){return this.aviaUi.active}set active(e){this.setActive(e)}get idleDelay(){return this.idleDelay_}set idleDelay(e){this.idleDelay_=e}destroy(){var e,t;super.destroy(),this.accVolUpdater.cancel(),this.accSeekUpdater.cancel(),null===(e=this.aviaUi)||void 0===e||e.removeEventListener(qe.ACTION,this.onUiEvent),this.aviaUi=null,null===(t=this.focusManager)||void 0===t||t.destroy(),document.removeEventListener("keydown",this.onKeyDown),clearTimeout(this.idleTimeout)}onUiEvent(e){const t=e.detail.action,i=e.detail.value;switch(t!==xe.POSTER_PLAY&&this.services.event.dispatchPluginEvent({id:this.id,type:t,detail:i||null}),t){case xe.POSTER_PLAY:!this.playbackStarted&&this.resourceStarted&&(this.cancelPoster(t===xe.POSTER_PLAY),this.player.play().catch(()=>{}));break;case xe.PLAY:case xe.PAUSE:case xe.STOP:this.player[t]();break;case xe.ENTER_FULLSCREEN:this.player.enterFullscreen();break;case xe.EXIT_FULLSCREEN:this.player.exitFullscreen();break;case xe.MUTE:this.player.muted=!0,this.aviaUi.muted=!0;break;case xe.UNMUTE:this.unmute();break;case xe.TEXT_ON:case xe.TEXT_OFF:const e=t===xe.TEXT_ON;this.player.textTrackEnabled=e,this.aviaUi.textTrackEnabled=e;break;case xe.SEEK:this.player.seek(i).catch(e=>{this.log("AviaUI: A seek() call failed: "+e.message)});break;case xe.SEEK_FORWARD:this.incrementalSeek(1);break;case xe.SEEK_BACK:this.incrementalSeek(-1);break;case xe.VOLUME:this.player.volume=i;break;case xe.PREVIEW:const{time:n,percent:a}=i,{contentDuration:r,streamDuration:o,liveStreamUtcDuration:s,liveStreamUtcStart:l}=this.player,u=a*o;Promise.resolve(this.previewTimeTransform({contentTime:n,streamTime:u,liveStreamUtcTime:Math.round(1e3*u+l),contentDuration:r,streamDuration:o,liveStreamUtcDuration:s})).then(e=>{this.player.getThumbnails(n).then(t=>this.aviaUi.preview={value:e,thumbs:t,thumbnailScaleFactor:this.options.thumbnailScaleFactor||.25})});break;case xe.SETTINGS_ON:case xe.SETTINGS_OFF:this.setStateForSettings(t===xe.SETTINGS_ON),this.player.disableKeyCommands(t===xe.SETTINGS_ON);break;case xe.LANGUAGE_SELECT:this.selectLanguage(i);break;case xe.QUALITY_SELECT:this.selectQuality(i);break;case xe.GO_TO_LIVE:this.player.goLive()}}onPlayerEvent(e){const{PlayerEvent:t,StreamType:i,PlaybackState:n}=this.avia,a=this.player.streamType===i.LIVE,r=this.player.streamType===i.DVR,{type:o,detail:s}=e;switch(o){case t.CLOCK:this.bufferedCheckCounter=s.count;const e=this.player.playbackState;e!==n.PAUSED&&e!==n.WAITING||this.updateBufferedRanges();break;case t.READY:this.setPlayState(),this.setPosterState();break;case t.AUTOPLAY_BLOCKED:this.setPosterState(!0);break;case t.RESOURCE_START:this.setPosterState(this.aviaUi.posterActive),this.setSegmentBreakPositions([]),this.resourceStarted=!0;break;case t.AD_CUEPOINTS_AVAILABLE:this.setSegmentBreakPositions(s.cuepoints);break;case t.AD_SEGMENT_START:!1!==this.options.showAdControlsOnAdSegmentStart&&this.setStateForAdBreakStart();break;case t.AD_START:this.setControlMode(Pe.AD),this.enableControls([_e.PLAY],!0),this.aviaUi.playing=!0;break;case t.AD_BREAK_START:this.setStateForAdBreakStart();break;case t.AD_PROGRESS:this.setAdPosition(s.currentTime,s.duration);break;case t.AD_SEGMENT_END:case t.AD_BREAK_COMPLETE:this.setControlMode(Pe.NONE);break;case t.CONTENT_START:case t.CONTENT_SEGMENT_START:this.setStateForContentStart(a,r);break;case t.CONTENT_SEGMENT_END:this.firstProgressReceived=!1,this.setControlMode(Pe.NONE);break;case t.CONTENT_PLAYING:this.setControlMode(Pe.CONTENT),this.setPlayState();break;case t.AD_PAUSED:case t.CONTENT_PAUSED:this.aviaUi.playing=!1;break;case t.AD_PLAYING:this.aviaUi.playing=!0;break;case t.STREAM_TYPE_CHANGE:this.setLiveState(a,r);break;case t.CONTENT_PROGRESS:this.firstProgressReceived||(this.firstProgressReceived=!0,this.setPlayState(),this.setLiveState(a,r)),this.updateBufferedRanges(),a||this.setTimeAndPosition(),(a||r)&&this.setLiveState(a,r);break;case t.FULLSCREEN_CHANGE:this.aviaUi.fullscreen=s.fullscreen;break;case t.TEXT_TRACK_ENABLED_CHANGE:this.aviaUi.textTrackEnabled=s.textTrackEnabled;break;case t.LANGUAGE_CHANGE:this.setLocalizationData(s.language||"en");break;case t.MUTE_CHANGE:this.aviaUi.muted=s.muted,this.player.muted||(this.aviaUi.unmuteCtaVisible=!1);break;case t.VOLUME_CHANGE:const{volume:i}=s,l=this.player.muted;if(this.aviaUi.volume===i)break;this.aviaUi.muted?this.aviaUi.muted&&i>0&&this.unmute():this.aviaUi.muted=!Math.ceil(i),this.aviaUi.volume=i,l||(this.aviaUi.unmuteCtaVisible=!1);break;case t.HOTKEY_ACTION:this.playbackStarted&&this.setAccIndicator(s.action,s);break;case t.ACTIVE_STATE_CHANGE:this.activeMode===Ce.AUTO&&this.setActiveState(s.activeState);break;case t.PRESENTATION_SIZE_CHANGE:this.respondToSizeChange();break;case t.AUDIO_TRACK_CHANGE:case t.AUDIO_TRACKS_CHANGE:case t.QUALITY_CHANGE:case t.QUALITIES_CHANGE:case t.TEXT_TRACK_CHANGE:case t.TEXT_TRACKS_CHANGE:o===t.TEXT_TRACKS_CHANGE&&this.enableControls(_e.TEXT,!0),this.enableSettingsButton(),this.setStateForSettings();break;case t.RESOURCE_END:this.setIdleState();break;case t.PLAYBACK_STATE_CHANGE:this.setPlayState()}}updateBufferedRanges(){if(this.bufferedCheckCounter%this.BUFFERED_CHECK_COUNT_INTERVAL!=0||this.player.streamType===this.avia.StreamType.LIVE)return;const e=(this.player.getBuffered()||[]).map(e=>({start:e.startTime,end:e.endTime})),t=this.player.contentTime;this.aviaUi.bufferedRanges=!1===this.options.showForwardBufferedRangeOnly?e:e.filter(e=>t>=e.start&&t<=e.end)}incrementalSeek(e){const t=e*(this.options.seekIncrement||this.defaultSeekInc);this.player.jump(t).catch(e=>{this.log("AviaUI: A jump() call failed: "+e.message)}),this.player.recordMetric(this.avia.MetricType.UI,this.avia.UiMetric.SEEK_BY,t)}unmute(){this.player.muted=!1,this.aviaUi.muted=!1}setControlMode(e){if(e===Pe.CONTENT){const e=this.getContentControlMode();this.aviaUi.controlMode=e}else this.aviaUi.controlMode=e}setActiveState(e){this.active=e===this.avia.ActiveState.ACTIVE}setActive(e){var t,i;this.playbackStarted?(this.aviaUi.active=this.activeMode===Ce.MANUAL?e:!!(null===(i=null===(t=this.aviaUi)||void 0===t?void 0:t.settings)||void 0===i?void 0:i.active)||e,this.options.offsetTimedTextOnControlsVisible&&this.aviaUi.controlMode===Pe.CONTENT&&this.player.offsetTimedText(e?this.controlBarHeight+4:0),this.aviaUi.active&&Number.isFinite(this.idleDelay)&&this.activeTimeout()):this.pendingActive=!0}activeTimeout(){clearTimeout(this.idleTimeout),this.idleTimeout=setTimeout(()=>{this.aviaUi.settings.active?this.activeTimeout():this.setActive(!1)},this.idleDelay)}setAccIndicator(e,t){const i={},{AccessibilityAction:n}=this.avia;switch(e){case n.INCREASE_VOLUME:case n.DECREASE_VOLUME:case n.TOGGLE_MUTE:i.volumeKey=!0,this.accVolUpdater({volumeKey:!1}),this.player.muted||(this.aviaUi.unmuteCtaVisible=!1);break;case n.SEEK_FORWARD:case n.SEEK_BACK:i.seekForward=e===n.SEEK_FORWARD,i.seekBack=e===n.SEEK_BACK,i.seekTime=(null==t?void 0:t.position)||0,this.accSeekUpdater({seekForward:!1,seekBack:!1,seekTime:null})}this.setAccIndicatorState(i)}setAccIndicatorState(e){this.aviaUi.accIndicatorState=Object.assign(Object.assign({},this.aviaUi.accIndicatorState),e)}setStateForContentStart(e,t){this.cancelPoster(!1),this.setControlMode(Pe.CONTENT),this.setLiveState(e,t);const i=[_e.MUTE,_e.PLAY];!0!==this.options.disableFullscreen&&i.push(_e.FULLSCREEN),this.enableControls(i,!0),this.aviaUi.muted=this.player.muted,this.setSeekDisabled(!1),this.setStateForPlaybackStart(),this.aviaUi.volume=this.player.volume,this.enableSettingsButton()}setStateForAdBreakStart(){const e=[_e.MUTE,_e.PLAY];!this.services.playerOptions.useNativeFullscreen||this.services.system.hasFullscreenApi&&!0!==this.options.disableFullscreen?e.push(_e.FULLSCREEN):this.enableControls([_e.FULLSCREEN],!1),this.cancelPoster(!1),this.setControlMode(Pe.AD),this.enableControls(e,!0),this.aviaUi.playing=!0,this.aviaUi.muted=this.player.muted,this.setStateForPlaybackStart()}setStateForPlaybackStart(){this.options.useUnmuteCta&&!this.playbackStarted&&this.player.muted&&(this.aviaUi.unmuteCtaVisible=!0),this.playbackStarted=!0,this.setPlayState(),this.pendingActive&&(this.pendingActive=!1,this.setActiveState(this.avia.ActiveState.ACTIVE))}setPosterState(e=this.services.playerOptions.autoplay===this.avia.Autoplay.NONE){var t;this.aviaUi.posterImageUrl=(null===(t=this.player.resource)||void 0===t?void 0:t.location.posterImageUrl)||this.options.posterImageUrl,this.aviaUi.posterActive=e}cancelPoster(e){this.aviaUi.posterActive=!1,e&&this.services.event.dispatchPluginEvent({id:this.id,type:xe.POSTER_PLAY})}setIdleState(){this.setControlMode(Pe.NONE),this.aviaUi.unmuteCtaVisible=!1;const e=[_e.MUTE,_e.PLAY,_e.TEXT];!0!==this.options.disableFullscreen&&e.push(_e.FULLSCREEN),this.enableControls(e,!1),this.aviaUi.active=!1,this.playbackStarted=!1}setLiveState(e,t){const i=this.player.isPlayingLive;this.aviaUi.isLiveLinear=e,this.aviaUi.isDvr=t,this.aviaUi.live=e||t&&i,this.aviaUi.pausable=this.player.pausable,t&&(this.aviaUi.seekForwardDisabled=i)}setPlayState(){const{playbackState:e}=this.player,t=e===this.avia.PlaybackState.PLAYING,i=e===this.avia.PlaybackState.WAITING,n=e===this.avia.PlaybackState.PAUSED;this.aviaUi.playing=!(!i&&!t),this.aviaUi.playDisabled=!t&&!n,this.aviaUi.waiting=i,this.aviaUi.deviceMode===Ne.TV&&n&&this.setActive(!0)}respondToSizeChange(){const e=this.aviaUi.controlMode;e!==Pe.CONTENT&&e!==Pe.COMPACT||(this.aviaUi.controlMode=this.getContentControlMode()),this.aviaUi.playerDimensions=this.player.dimensions}getContentControlMode(){const{width:e}=this.player.dimensions;return e>(this.options.compactViewBreakpoint||this.defaultCompactViewBreakpoint)?Pe.CONTENT:Pe.COMPACT}enableSettingsButton(){const e=this.player,t=e.textTrack,i=e.audioTrack,n=e.qualities.length>1;this.aviaUi.settingsDisabled=!(t||i||n)}setStateForSettings(e=this.settingsEngaged){const t=this.player;this.services.system.browser===this.avia.Browser.FIREFOX&&e&&this.aviaUi.classList.add(Ie.SETTINGS_NUDGE_LEFT),this.aviaUi.settings={active:e,textTrack:t.textTrack,textTracks:t.textTracks,audioTrack:t.audioTrack,audioTracks:t.audioTracks,quality:t.quality,qualities:t.qualities,qualityAuto:t.autoQualitySwitching},this.settingsEngaged=e,this.pauseOnSettings(e)}pauseOnSettings(e){if(this.options.pauseOnSettings){const t=this.player.playbackState===this.avia.PlaybackState.PLAYING;e&&t&&(this.player.pause(),this.playPendingAfterSettings=!0),!e&&this.playPendingAfterSettings&&(this.playPendingAfterSettings=!1,this.player.play())}}enableControls(e,t){const i=Array.isArray(e)?e:[e],n=this.aviaUi;i.forEach(e=>n[e+"Disabled"]=!t)}setSeekDisabled(e){this.aviaUi.seekDisabled=e,this.aviaUi.seekBackDisabled=e,this.aviaUi.seekForwardDisabled=e}setAdPosition(e,t){this.aviaUi.adPlayheadPosition=e/t}setTimeAndPosition(){if(this.aviaUi.waiting&&!this.player.video.paused)return;const e=this.player.contentTime,t=this.player.contentDuration;this.aviaUi.timeDisplayValue=this.getTimeDisplayValue(e,t),this.aviaUi.currentTimeSeconds=e,this.aviaUi.durationSeconds=t,this.aviaUi.playheadPosition=e/t}setSegmentBreakPositions(e){const t=this.player.contentDuration;this.aviaUi.segmentBreakPositions=e.filter(e=>e>0&&e!==t).join(",")}selectLanguage(e){var t,i;const n=e.trackType,a=e.trackId;if("text"===n){const e=null===(t=this.player.textTracks)||void 0===t?void 0:t.find(e=>e.id===a);e&&(this.player.textTrack=e)}else if("audio"===n){const e=null===(i=this.player.audioTracks)||void 0===i?void 0:i.find(e=>e.id===a);e&&(this.player.audioTrack=e)}}selectQuality(e){const{index:t}=e;if(-1===t)return void(this.player.autoQualitySwitching=!0);const i=this.player.qualities.find(e=>e.index===t),n=null==i?void 0:i.bitrate;n&&(this.player.bitrate=n)}getTimeDisplayValue(e,t){return t>86400?"":`${Ve(e)} / ${Ve(t)}`}get controlBarHeight(){if(null==this.controlBarHeight_){const e=this.aviaUi.querySelector("avia-control-bar");this.controlBarHeight_=e.getBoundingClientRect().height}return this.controlBarHeight_}createUi(){var e;return this.applyTheme(null===(e=this.options)||void 0===e?void 0:e.theme),customElements.whenDefined(this.rootElement).then(()=>{this.initializeState()})}getContainer(){var e;let t=this.options.container;return t&&(t=document.querySelector(t)),t||(null===(e=this.services)||void 0===e?void 0:e.dom.main)}initializeState(){var e,t,i;const{aviaUi:n,options:a,services:r}=this;n.accIndicatorState={displayTime:this.accIndicatorDisplayTime,volumeKey:!1,muted:!1,seekForward:!1,seekBack:!1,seekTime:null},n.qualityLabel=a.qualityLabel,n.deviceMode=this.calculateDeviceMode(),n.isIosNative=n.deviceMode===Ne.MOBILE&&!r.system.hasFullscreenApi&&r.playerOptions.useNativeFullscreen,n.linkMuteAndVolume=!1!==a.linkMuteAndVolume,(null===(e=this.options)||void 0===e?void 0:e.activeMode)?this.activeMode=this.options.activeMode:n.deviceMode===Ne.TV&&(this.active=!0,this.idleDelay=this.options.idleDelay||this.TV_MODE_IDLE_DELAY,this.player.disableKeyCommands(!0),this.log("AviaUI is in TV Mode")),(null===(t=this.options)||void 0===t?void 0:t.previewTimeTransform)&&(this.previewTimeTransform=null===(i=this.options)||void 0===i?void 0:i.previewTimeTransform),n.isTouch="ontouchstart"in document.documentElement,n.initialized=!0}setLocalizationData(e){const t=Object.values(Le).reduce((t,i)=>(t[i]=this.services.localization.localize(i,e),t),{});this.aviaUi.localeData=t}calculateDeviceMode(){const{deviceMode:e}=this.options;if(e&&e!==Ne.AUTO)return e;const{system:t}=this.services;return t.isTv||t.isConsole||t.isEmbedded||t.isChromecast?Ne.TV:t.isMobile?Ne.MOBILE:Ne.DESKTOP}getEventInterests(){const{PlayerEvent:e}=this.avia;return[e.CLOCK,e.READY,e.AUTOPLAY_BLOCKED,e.RESOURCE_START,e.AD_CUEPOINTS_AVAILABLE,e.AD_SEGMENT_START,e.AD_START,e.AD_BREAK_START,e.AD_PROGRESS,e.AD_SEGMENT_END,e.AD_BREAK_COMPLETE,e.CONTENT_START,e.CONTENT_SEGMENT_START,e.CONTENT_SEGMENT_END,e.CONTENT_PLAYING,e.AD_PAUSED,e.CONTENT_PAUSED,e.AD_PLAYING,e.STREAM_TYPE_CHANGE,e.CONTENT_PROGRESS,e.FULLSCREEN_CHANGE,e.TEXT_TRACK_ENABLED_CHANGE,e.LANGUAGE_CHANGE,e.MUTE_CHANGE,e.VOLUME_CHANGE,e.HOTKEY_ACTION,e.ACTIVE_STATE_CHANGE,e.PRESENTATION_SIZE_CHANGE,e.AUDIO_TRACK_CHANGE,e.AUDIO_TRACKS_CHANGE,e.QUALITY_CHANGE,e.QUALITIES_CHANGE,e.TEXT_TRACK_CHANGE,e.TEXT_TRACKS_CHANGE,e.RESOURCE_END,e.PLAYBACK_STATE_CHANGE]}async initialize(){this.services.localization.registerLocalizationData(ct),await this.createUi()}applyTheme(e={}){const t=this.getContainer(),{html:i,cssVars:n}=e;let a,r=t.querySelector(this.rootElement);if(i&&r&&((a=t.removeChild(r)).removeEventListener(qe.ACTION,this.onUiEvent),r=null,this.aviaUi=null),!r){const e=i?function(e){try{const t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.children)}catch(t){throw new Error("Could not create element from string: "+e)}}(i):[document.createElement(this.rootElement)];if(!(r=e.find(e=>e.nodeName.toLowerCase()===this.rootElement)))throw new Error("Avia UI theme HTML must contain the root element "+this.rootElement);e.forEach(e=>t.appendChild(e)),a&&Object.keys(Object.getPrototypeOf(a)).forEach(e=>{"function"!=typeof a[e]&&(r[e]=a[e])})}this.aviaUi||(this.aviaUi=r,this.aviaUi.addEventListener(qe.ACTION,this.onUiEvent),this.focusManager=new ut(this.aviaUi),window.fm=this.focusManager),n&&function(e){const{style:t}=document.documentElement;Object.keys(e).forEach(i=>t.setProperty(i,e[i]))}(n)}}const vt=dt,gt=ft,mt=ht;var yt=function(e,t,i){void 0===i&&(i=!0);var n="Function"===e.constructor.name?e.prototype:e,a=n.componentWillLoad;n.componentWillLoad=function(){var e,n=this,r=S(this),o={promise:new Promise(function(t){e=t}),resolve:e},s=new CustomEvent("openWormhole",{bubbles:!0,composed:!0,detail:{consumer:this,fields:t,updater:function(e,t){(e in r?r:n)[e]=t},onOpen:o}});r.dispatchEvent(s);var l=function(){if(a)return a.call(n)};return i?o.promise.then(function(){return l()}):l()}},At=new Map,kt=function(e,t){var i=e.fields,n=e.updater;i.forEach(function(e){n(e,t[e])})},bt=function(e,t){var i=e.state,n=c;if(At.has(n)){var a=At.get(n);a.state=i,a.wormholes.forEach(function(e){kt(e,i)})}return t};const Et=class extends ve{constructor(){super(),this.__registerHost(),this.adPlayheadPosition=0,this.isLiveLinear=!1}adPlayheadPositionHandler(e){!this.pbar||null==e||isNaN(e)||e<0||(this.pbar.style.width=100*e+"%")}render(){return g("div",{class:"avia-ad-prog-bar",ref:e=>this.pbar=e})}static get watchers(){return{adPlayheadPosition:["adPlayheadPositionHandler"]}}static get style(){return"avia-ad-progress-bar{display:block;position:absolute;background:var(--avia-ad-progress-track-color);position:absolute;height:3px;bottom:0;left:0;right:0;user-select:none}.avia-ad-prog-bar{height:3px;user-select:none;background-color:var(--avia-ad-progress-color);width:0%}"}};var St;yt(Et,["adPlayheadPosition","isLiveLinear"]),function(e){e[e.ARROW_LEFT=37]="ARROW_LEFT",e[e.ARROW_RIGHT=39]="ARROW_RIGHT",e[e.ARROW_UP=38]="ARROW_UP",e[e.ARROW_DOWN=40]="ARROW_DOWN",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.ENTER=13]="ENTER",e[e.SPACE=32]="SPACE"}(St||(St={}));const Tt=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.TAP_THRESHOLD=300,this.isTouch="ontouchstart"in document.documentElement,this.locId=void 0,this.toggled=!1,this.compact=!1,this.icon=!1,this.variant=!1,this.actions="",this.ids="",this.disabled=!1,this.localeData=void 0,this.focused=!1}onClick(e){this.isTouch||this.disabled?$e(e):this.execAction()}onTouchStart(e){$e(e),this.touchStartStamp=e.timeStamp}onTouchEnd(e){!this.disabled&&this.touchStartStamp&&e.timeStamp-this.touchStartStamp<=this.TAP_THRESHOLD&&(this.touchStartStamp=null,this.execAction())}onFocus(){this.element.classList.contains("focus-visible")&&(this.focused=!0)}onBlur(){this.focused&&(this.focused=!1)}onKeyDown(e){switch(e.keyCode){case St.ENTER:case St.SPACE:return this.element.click(),void $e(e)}}getCsvValue(e,t=+this.toggled){return Oe(e)[t]}execAction(){const e=this.getCsvValue(this.actions);e&&this.actionEvent.emit({action:e})}render(){var e;const t=this.getCsvValue(this.ids)||this.locId,i=null===(e=this.localeData)||void 0===e?void 0:e[t],n={"aria-label":i};return!this.focused&&i&&(n.title=i),g(y,Object.assign({disabled:this.disabled,tabIndex:0},n))}get element(){return this}static get style(){return"avia-button{display:inline-block;background-color:transparent;height:var(--avia-control-bar-btn-height);width:var(--avia-control-bar-btn-width);color:var(--avia-control-bar-btn-text-color);border:var(--avia-control-bar-btn-border);border-width:var(--avia-control-bar-btn-border-width);border-radius:var(--avia-control-bar-btn-border-radius);outline:var(--avia-control-bar-btn-border-outline);cursor:var(--avia-control-bar-btn-border-cursor);pointer-events:all}avia-button:hover{color:var(--avia-control-bar-btn-text-color-hover)}avia-button[disabled]{cursor:var(--avia-control-bar-btn-disabled-cursor);opacity:var(--avia-control-bar-btn-disabled-opacity);pointer-events:none}avia-button[icon]{padding:0;margin:0;background-position:center;background-size:var(--avia-icon-btn-bg-size);background-repeat:no-repeat;user-select:none}avia-button[compact]{width:var(--avia-compact-button-width);height:var(--avia-compact-button-height);border-radius:var(--avia-compact-button-border-radius);background-color:var(--avia-compact-button-background-color)}"}};yt(Tt,["localeData"]);const wt=class extends ve{constructor(){super(),this.__registerHost(),this.active=!1,this.controlMode=Pe.NONE,this.deviceMode=Ne.DESKTOP,this.isDvr=!1,this.isLiveLinear=!1,this.isIosNative=!1,this.settings=null}async getHeight(){return this.element.getBoundingClientRect().height}render(){const e=this.deviceMode===Ne.DESKTOP,t=this.deviceMode===Ne.TV,i=this.deviceMode===Ne.DESKTOP||this.deviceMode===Ne.MOBILE&&!this.isIosNative;return g(y,{role:"menu",class:this.isLiveLinear?"avia-live-linear":""},g("slot",{name:"top"},t&&g("avia-control-group",{orientation:st.HORIZONTAL,class:"avia-control-group-top"},g("div",{class:"avia-control-group-top-left",role:"group"},this.isLiveLinear&&g("avia-live-control",null)),g("div",{class:"avia-control-group-top-right",role:"group"},g("avia-text-toggle",null),g("avia-settings-toggle",null))),this.isLiveLinear?"":g("avia-progress-bar",null)),g("avia-control-group",{orientation:st.HORIZONTAL,class:"avia-control-container"},g("div",{class:"avia-control-group-left",role:"group"},g("slot",{name:"left"},!t&&g("avia-play-toggle",null),!t&&g("avia-mute-toggle",null),e&&g("avia-volume-slider",null),t&&!this.isLiveLinear&&g("avia-current-time",null))),g("div",{class:"avia-control-group-center",role:"group"},g("slot",{name:"center"})),g("div",{class:"avia-control-group-right",role:"group"},g("slot",{name:"right"},g("div",{class:"avia-control-group-right"},i&&g("avia-time-display",null),(!t&&this.isLiveLinear||this.isDvr)&&g("avia-live-control",null),i&&g(ee,null,g("avia-text-toggle",null),!this.isIosNative&&g("avia-settings-toggle",null),!this.isIosNative&&g("avia-fullscreen-toggle",null)),t&&!this.isLiveLinear&&g("avia-time-remaining",null))))),g("slot",{name:"bottom"}))}get element(){return this}static get style(){return'avia-control-bar{box-sizing:border-box;width:100%;padding:0 var(--avia-default-spacing);background:var(--avia-control-bar-bg);display:none;transition:var(--avia-active-transition-in);padding-bottom:auto;pointer-events:auto}avia-ui[control-mode="content"] avia-control-bar{display:block}avia-ui:not([active]) avia-control-bar{opacity:0;transition:var(--avia-active-transition-out)}avia-control-bar.avia-live-linear{padding-top:var(--avia-live-padding-top)}.avia-control-container{display:flex;justify-content:space-between;align-items:center;height:var(--avia-control-bar-btn-height);flex-wrap:nowrap}avia-control-bar.avia-layout-c-30 .avia-control-group-left,avia-control-bar.avia-layout-c-30 .avia-control-group-right{width:35%}avia-control-bar.avia-layout-c-30 .avia-control-group-center{width:30%}avia-control-bar.avia-layout-c-40 .avia-control-group-left,avia-control-bar.avia-layout-c-40 .avia-control-group-right{width:30%}avia-control-bar.avia-layout-c-40 .avia-control-group-center{width:40%}avia-control-bar.avia-layout-c-50 .avia-control-group-left,avia-control-bar.avia-layout-c-50 .avia-control-group-right{width:25%}avia-control-bar.avia-layout-c-50 .avia-control-group-center{width:50%}avia-control-bar.avia-layout-c-60 .avia-control-group-left,avia-control-bar.avia-layout-c-60 .avia-control-group-right{width:20%}avia-control-bar.avia-layout-c-60 .avia-control-group-center{width:60%}avia-control-bar.avia-layout-c-70 .avia-control-group-left,avia-control-bar.avia-layout-c-70 .avia-control-group-right{width:15%}avia-control-bar.avia-layout-c-70 .avia-control-group-center{width:70%}avia-control-bar[avia-layout=default] .avia-control-group-left,avia-control-bar[avia-layout=default] .avia-control-group-right{display:flex;flex-basis:auto}avia-control-bar[avia-layout=default] .avia-control-group-left{flex-grow:1}.avia-control-group-left,.avia-control-group-right,.avia-control-group-center,.avia-control-group-left>*,.avia-control-group-right>*,.avia-control-group-center>*{display:flex;flex-basis:auto;align-items:center}.avia-control-group-center>*{flex-grow:1;justify-content:space-evenly}.avia-control-group-right,.avia-control-group-right>*{justify-content:flex-end}.avia-control-group-left>*{justify-content:flex-start}.avia-control-group-left>*>*{margin-right:var(--avia-half-spacing)}.avia-control-group-right>*>*{margin-left:var(--avia-half-spacing)}avia-control-bar>avia-progress-seek:empty{display:none}.avia-control-group-left>*:empty,.avia-control-group-right>*:empty,.avia-control-group-center>*:empty{display:none}.avia-control-group-top{display:flex}.avia-control-group-top-left{flex-grow:1}'}};yt(wt,["active","controlMode","deviceMode","isDvr","isIosNative","isLiveLinear","settings"]);const xt=class extends ve{constructor(){super(),this.__registerHost(),this.currentTimeSeconds=void 0,this.localeData=void 0,this.isLiveLinear=!1,this.isDvr=!1}render(){if(this.isLiveLinear||this.isDvr)return"";const e=this.currentTimeSeconds||0,t=this.localeData?Be(e,this.localeData):"";return g("div",{class:"avia-current-time","aria-label":t,title:t},Ve(e))}static get style(){return":host{display:inline-block}.avia-current-time{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-current-time{text-align:right}"}};yt(xt,["currentTimeSeconds","localeData","isLiveLinear","isDvr"]);const Ct=class extends ve{constructor(){super(),this.__registerHost(),this.durationSeconds=void 0,this.localeData=void 0,this.isLiveLinear=!1,this.isDvr=!1}render(){if(this.isLiveLinear||this.isDvr)return"";const e=this.durationSeconds||0,t=this.localeData?Be(e,this.localeData):"";return g("div",{class:"avia-duration","aria-label":t,title:t},Ve(this.durationSeconds||0))}static get style(){return":host{display:inline-block}.avia-duration{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-duration{text-align:right}"}};yt(Ct,["durationSeconds","localeData","isLiveLinear","isDvr"]);const _t=class extends ve{constructor(){super(),this.__registerHost(),this.fullscreen=!1,this.fullscreenDisabled=!0,this.compact=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("avia-button",{ref:e=>this.focusElement=e,ids:`${Le.FULL_SCREEN_ENTER}, ${Le.FULL_SCREEN_EXIT}`,actions:`${xe.ENTER_FULLSCREEN}, ${xe.EXIT_FULLSCREEN}`,disabled:this.fullscreenDisabled,toggled:this.fullscreen,compact:this.compact,icon:!0})}static get style(){return"avia-fullscreen-toggle{display:inline-block}avia-fullscreen-toggle avia-button{background-image:var(--avia-fs-icon)}avia-fullscreen-toggle avia-button:hover{background-image:var(--avia-fs-icon-hover)}avia-fullscreen-toggle avia-button[toggled]{background-image:var(--avia-fs-exit-icon)}avia-fullscreen-toggle avia-button[toggled]:hover{background-image:var(--avia-fs-exit-icon-hover)}"}};yt(_t,["fullscreen","fullscreenDisabled"]);const Pt=class extends ve{constructor(){super(),this.__registerHost(),this.isLiveLinear=!1,this.isDvr=!1,this.live=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){if(!this.isLiveLinear&&!this.isDvr)return;const e=this.live||this.isLiveLinear,t=e?Le.LIVE:Le.GO_LIVE;return g("avia-button",{ref:e=>this.focusElement=e,actions:`${xe.NONE}, ${xe.GO_TO_LIVE}`,toggled:!this.live,disabled:e},g("avia-text",{"loc-id":t}))}static get style(){return"avia-live-control{display:inline-block;margin-right:var(--avia-default-spacing)}avia-live-control avia-button{width:auto;height:auto !important;font-size:0.9em;text-align:right;overflow:hidden}avia-live-control avia-button[disabled]{opacity:1;cursor:default}avia-live-control avia-button::before,avia-live-control avia-button[disabled]::before{content:'• ';color:red;font-size:0.9em}"}};yt(Pt,["isLiveLinear","live","isDvr"]);const It=class extends ve{constructor(){super(),this.__registerHost(),this.hasSubmenu=!1,this.locId=void 0,this.titlebar=!1,this.localeData=void 0,this.options=[]}onAction(e){if(e.detail.action!==xe.LIST_ITEM_SELECT)return;const{key:t,value:i}=e.detail.value,n=this.element.querySelector(`[data-key="${t}"][data-value="${i}"]`);n&&this.selectListItem(n)}onKeydown(e){var t;switch(e.keyCode){case St.ARROW_RIGHT:if(!this.hasSubmenu)return;null===(t=document.activeElement)||void 0===t||t.click()}}selectListItem(e){const t=this.element.querySelector("[selected]");t&&(t.selected=!1,t.disabled=!1),e.selected=!0}createDataAttributes(e){return Object.entries(e).reduce((e,t)=>(e["data-"+t[0]]=t[1],e),{})}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){var e;const t=null===(e=this.localeData)||void 0===e?void 0:e[this.locId],i=this.hasSubmenu?xe.MENU_ITEM_SELECT:xe.LIST_ITEM_SELECT;return g(y,{"aria-label":t,role:"menu"},this.titlebar&&g("div",{class:"avia-menu-titlebar"},t),g("div",{class:"avia-menu-content"},this.options.map((e,t)=>{const{value:n}=e,a=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(i[n[a]]=e[n[a]])}return i}(e,["value"]);return g("avia-menu-item",Object.assign({key:t,ref:e=>{0===t&&(this.focusElement=e)}},a,{hasSubmenu:this.hasSubmenu,action:i},this.createDataAttributes(n)))})))}get element(){return this}static get style(){return"avia-menu{display:flex;flex-direction:column;font-size:0.95em;width:100%}.avia-menu-titlebar{padding-left:1em;color:var(--avia-accent-color);font-size:0.9em;font-weight:bold;height:2em;line-height:2em;background-color:black;border-bottom:1px solid #444}.avia-menu-content{scrollbar-width:thin;scrollbar-color:var(--avia-menu-text-color) transparent}.avia-menu-content::-webkit-scrollbar{width:8px;height:0}.avia-menu-content::-webkit-scrollbar-track{background-color:transparent}.avia-menu-content::-webkit-scrollbar-thumb{background-color:var(--avia-menu-text-color);border-radius:20px}.avia-menu-content::-webkit-scrollbar-thumb:hover{background-color:var(--avia-control-bar-btn-text-color-hover)}.avia-menu-content::-webkit-scrollbar-corner{background-color:transparent}"}};yt(It,["localeData"]);const Nt=class extends ve{constructor(){super(),this.__registerHost(),this.muted=!1,this.muteDisabled=!0,this.compact=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("avia-button",{ref:e=>this.focusElement=e,ids:`${Le.MUTE}, ${Le.UNMUTE}`,actions:`${xe.MUTE}, ${xe.UNMUTE}`,toggled:this.muted,disabled:this.muteDisabled,compact:this.compact,icon:!0})}static get style(){return"avia-mute-toggle{display:inline-block}avia-mute-toggle avia-button{background-image:var(--avia-unmuted-icon)}avia-mute-toggle avia-button:hover{background-image:var(--avia-unmuted-icon-hover)}avia-mute-toggle avia-button[toggled]{background-image:var(--avia-mute-icon)}avia-mute-toggle avia-button[toggled]:hover{background-image:var(--avia-mute-icon-hover)}"}};yt(Nt,["muted","muteDisabled"]);const Lt=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.titlebar=!0,this.back=!1,this.locId=void 0,this.localeData=void 0}emit(e){this.actionEvent.emit({action:e,value:this.element.dataset})}render(){var e;const t=null===(e=this.localeData)||void 0===e?void 0:e[this.locId];return g("avia-control-group",{orientation:st.VERTICAL},this.titlebar&&g("avia-control-group",{class:"avia-panel-titlebar",orientation:st.HORIZONTAL},this.back&&g("avia-button",{"loc-id":Le.BACK,class:"avia-panel-back-button",disabled:!1,onClick:()=>this.emit(xe.PANEL_BACK),icon:!0}),g("span",null,t),g("span",{class:"avia-spacer"}),g("avia-button",{"loc-id":Le.CLOSE,class:"avia-panel-close-button",disabled:!1,onClick:()=>this.emit(xe.PANEL_CLOSE),icon:!0})),g("div",{class:"avia-panel-content"},g("slot",null)))}get element(){return this}static get style(){return"avia-panel{width:100%;height:100%}.avia-panel-titlebar{padding:0.5em 0.25em 0.5em 0.75em;color:var(--avia-accent-color);background-color:black;border-bottom:1px solid #444;display:flex;align-items:center;justify-content:center;font-weight:bold}.avia-panel-close-button{width:1.75em;height:2em;background-image:var(--avia-x-symbol);background-repeat:no-repeat;padding:0px}.avia-panel-back-button{width:1.75em;height:1.75em;background-image:var(--avia-chevron-right);background-repeat:no-repeat;background-size:47.5% 47.5%;transform:rotate(180deg);margin-right:1em}.avia-panel-content{display:flex;flex-direction:row;overflow:hidden}.avia-panel-content>div{width:180px;color:var(--avia-menu-text-color)}.avia-panel-content>div:first-child{border-right:1px solid #888}.avia-panel-content>div:only-child{border-right:none}"}};yt(Lt,["localeData"]);const Mt=class extends ve{constructor(){super(),this.__registerHost(),this.started=!1,this.playing=!1,this.waiting=!1}render(){if(this.started&&!this.waiting&&!this.playing)return g("avia-overlay",{centered:!0},g("div",null));this.started=!0}static get style(){return":root{--avia-pause-large-width:66px;--avia-pause-large-height:66px;--avia-pause-large-border-radius:calc(var(--avia-pause-large-width) / 2);--avia-pause-large-bg-image:var(--avia-pause-icon);--avia-pause-large-bg-position:50%;--avia-pause-large-bg-color:rgba(64, 64, 64, 0.5);--avia-pause-large-bg-size:calc(var(--avia-pause-large-width) / 2) calc(var(--avia-pause-large-height) / 2)}avia-pause-overlay div{width:var(--avia-pause-large-width);height:var(--avia-pause-large-height);background-image:var(--avia-pause-large-bg-image);background-repeat:no-repeat;background-position-x:calc(var(--avia-pause-large-bg-position) + 6%);background-position-y:var(--avia-pause-large-bg-position);background-size:var(--avia-pause-large-bg-size)}"}};yt(Mt,["playing","waiting"]);const Rt=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.playing=!1,this.controlMode=Pe.NONE,this.playDisabled=!0,this.pausable=!0,this.isTouch=!1}onClick(){const e=this.playing?xe.PAUSE:xe.PLAY;this.actionEvent.emit({action:e})}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const e=!this.playing;if((e||!this.isTouch)&&!this.playDisabled&&this.pausable&&this.controlMode===Pe.CONTENT)return g("avia-overlay",{centered:!0},e&&g("avia-play-cta",{ref:e=>this.focusElement=e}))}static get style(){return"avia-play-overlay{background-color:var(--avia-play-overlay-bg-color)}avia-play-overlay.focus-visible avia-play-cta{box-shadow:var(--avia-focus-box-shadow-inner)}"}};yt(Rt,["playing","playDisabled","pausable","controlMode","isTouch"]);const Dt=class extends ve{constructor(){super(),this.__registerHost(),this.playing=!1,this.playDisabled=!0,this.pausable=void 0,this.compact=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const e=!this.playing,t=[Le.PLAY,this.pausable?Le.PAUSE:Le.STOP],i=[xe.PLAY,this.pausable?xe.PAUSE:xe.STOP],n=e?this.pausable?Le.PAUSE:Le.STOP:Le.PLAY;return g("avia-button",{ref:e=>this.focusElement=e,ids:t.join(","),actions:i.join(","),disabled:this.playDisabled,"loc-id":n,toggled:this.playing,compact:this.compact,variant:!this.pausable,icon:!0})}static get style(){return"avia-play-toggle{display:inline-block}avia-play-toggle avia-button{background-image:var(--avia-play-icon)}avia-play-toggle avia-button:hover{background-image:var(--avia-play-icon-hover)}avia-play-toggle avia-button[toggled]{background-image:var(--avia-pause-icon)}avia-play-toggle avia-button[toggled]:hover{background-image:var(--avia-pause-icon-hover)}avia-play-toggle avia-button[toggled][variant]{background-image:var(--avia-stop-icon)}avia-play-toggle avia-button[toggled][variant]:hover{background-image:var(--avia-stop-icon-hover)}"}};yt(Dt,["playing","playDisabled","pausable"]);const Ot=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.canceled=!1,this.posterActive=!1,this.posterImageUrl=void 0,this.playing=!1,this.waiting=!1}playingStateWatcher(){this.canceled=!0}waitingStateWatcher(){this.canceled=!0}handleAction(e){this.canceled=!0,this.actionEvent.emit({action:xe.POSTER_PLAY}),$e(e)}render(){return this.canceled||!this.posterActive?"":g("avia-overlay",null,De(this.posterImageUrl)?"":g("img",{src:this.posterImageUrl,alt:""}),g("div",{class:""},g("slot",null)),g("avia-overlay",{centered:!0},g("avia-play-cta",null)))}static get watchers(){return{playing:["playingStateWatcher"],waiting:["waitingStateWatcher"]}}static get style(){return"avia-poster img{width:100%;height:auto}"}};yt(Ot,["posterActive","posterImageUrl","playing","waiting"]);const Bt=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.updateEvent=T(this,"update",7),this.hoverDelay=250,this.imgElement=document.createElement("img"),this.dragging=!1,this.bufferedRanges=void 0,this.currentTimeSeconds=void 0,this.durationSeconds=void 0,this.localeData=void 0,this.segmentBreakPositions=void 0,this.preview=void 0,this.increment=15,this.live=!1,this.hovering=!1,this.cursor=0,this.value=0}onCurrentTimeSeconds(){this.value=this.live?this.durationSeconds:this.currentTimeSeconds}onMouseEnter(e){clearTimeout(this.hoverTimeoutHandle),this.hoverTimeoutHandle=setTimeout(()=>{this.hovering=!0,this.onMouseMove(e)},this.hoverDelay)}onMouseLeave(){clearTimeout(this.hoverTimeoutHandle),this.hovering=!1}onMouseMove(e){if(!this.active)return;const t=this.sliderElement.getBoundingClientRect(),i=Ue(e).x-t.left,n=je(i/t.width,0,1);this.actionEvent.emit({action:xe.PREVIEW,value:{time:n*this.durationSeconds,percent:n}}),this.cursor=je(i,0,t.width)}get active(){return this.hovering||this.dragging}onChange(e){this.actionEvent.emit({action:xe.SEEK,value:e.detail.value})}onDragging(e){this.dragging=e.detail.value}hasPreview(){var e,t;return!!(null===(t=null===(e=this.preview)||void 0===e?void 0:e.thumbs)||void 0===t?void 0:t.length)}componentDidRender(){const e=this.sliderElement,t=e.offsetWidth;if(this.hasPreview()){const e=t*this.preview.thumbnailScaleFactor,i=this.imgElement,n=this.preview.thumbs.reduce((t,i)=>t?Math.abs(e-t.width)>Math.abs(e-i.width)?i:t:i,null),a=()=>{const t=this.canvasElement,a=Math.min(e/n.width,1),r=t.getContext("2d"),o=n.width*a,s=n.height*a;t.width=o,t.height=s,r.drawImage(i,n.x,n.y,n.width,n.height,0,0,o,s)};n&&(i.src!==n.url?(i.src=n.url,i.onload=a):a())}const i=this.previewElement,n=i.offsetWidth/2,a=t-n,r=this.cursor<n?n-this.cursor:this.cursor>a?a-this.cursor:0;i.style.marginLeft=r-n+"px",i.style.top=`-${i.offsetHeight+e.offsetHeight/2}px`}focus(){this.sliderElement.focus()}blur(){this.sliderElement.blur()}render(){var e;const t=this.localeData?function(e,t,i){const n=Be(e,i),a=Be(t,i);return function(e,t,i="{{",n="}}"){if(!e)return e;const a=new RegExp(`${i}((?:(?!(${i}|${n})).)+)${n}`,"g");return e.replace(a,(e,i)=>void 0!==t[i]?t[i]:e)}(i[Le.VALUE_OF_TOTAL],{value:n,total:a})}(this.value,this.durationSeconds,this.localeData):"",i=Oe(this.segmentBreakPositions).map(e=>({value:parseFloat(e)}));return g("avia-slider",{ref:e=>this.sliderElement=e,"loc-id":Le.SEEK,"aria-valuetext":t,list:i,value:this.value,max:this.durationSeconds,ranges:this.bufferedRanges,increment:this.increment,onChange:e=>this.onChange(e),onDragging:e=>this.onDragging(e)},g("div",{ref:e=>this.previewElement=e,class:"avia-progress-preview",style:{visibility:this.active?"visible":"hidden",left:this.cursor+"px"}},g("canvas",{ref:e=>this.canvasElement=e,class:"avia-progress-img",style:{display:this.hasPreview()&&this.imgElement.complete?"block":"none"}}),g("div",{ref:e=>this.textElement=e,class:"avia-progress-text"},null===(e=this.preview)||void 0===e?void 0:e.value)))}static get watchers(){return{currentTimeSeconds:["onCurrentTimeSeconds"],live:["onCurrentTimeSeconds"]}}static get style(){return":root{--avia-progress-preview-height:24px;--avia-progress-preview-width:50px;--avia-progress-preview-line-height:24px;--avia-progress-preview-top:-34px;--avia-progress-preview-bg-color:rgba(44, 44, 44, 0.7);--avia-progress-preview-color:rgb(220, 220, 220);--avia-progress-preview-font-size:13px;--avia-progress-preview-border-radius:4px}avia-progress-bar .avia-slider-range-item{background-color:var(--avia-buffered-range-background-color)}.avia-progress-preview{position:absolute;line-height:var(--avia-progress-preview-line-height);background:var(--avia-progress-preview-bg-color);color:var(--avia-progress-preview-color);font-size:var(--avia-progress-preview-font-size);text-align:center;border-radius:var(--avia-progress-preview-border-radius);user-select:none;overflow:hidden}.avia-progress-text{padding:0 0.5em 0 0.5em;white-space:nowrap}"}};yt(Bt,["bufferedRanges","currentTimeSeconds","durationSeconds","live","localeData","seekDisabled","segmentBreakPositions","preview"]);const Ut=class extends ve{constructor(){super(),this.__registerHost(),this.seekBackDisabled=!1,this.isLiveLinear=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return this.isLiveLinear?"":g("avia-button",{ref:e=>this.focusElement=e,actions:xe.SEEK_BACK,disabled:this.seekBackDisabled,"loc-id":Le.SEEK_BACK,icon:!0})}static get style(){return"avia-seek-back-button{display:inline-block}avia-seek-back-button avia-button{background-image:var(--avia-seek-back-icon)}avia-seek-back-button avia-button:hover{background-image:var(--avia-seek-back-icon-hover)}"}};yt(Ut,["seekBackDisabled","isLiveLinear"]);const Ft=class extends ve{constructor(){super(),this.__registerHost(),this.seekForwardDisabled=!1,this.isLiveLinear=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return this.isLiveLinear?"":g("avia-button",{ref:e=>this.focusElement=e,actions:xe.SEEK_FORWARD,disabled:this.seekForwardDisabled,"loc-id":Le.SEEK_FORWARD,icon:!0})}static get style(){return"avia-seek-forward-button{display:inline-block}avia-seek-forward-button avia-button{background-image:var(--avia-seek-forward-icon)}avia-seek-forward-button avia-button:hover{background-image:var(--avia-seek-forward-icon-hover)}"}};yt(Ft,["seekForwardDisabled","isLiveLinear"]);const Vt=class extends ve{constructor(){super(),this.__registerHost(),this.durationSeconds=void 0,this.accIndicatorState=void 0}componentDidRender(){!this.debouncer&&this.accIndicatorState.displayTime>0&&(this.debouncer=Re(()=>{var e;null===(e=this.el)||void 0===e||e.classList.remove(Ie.INDICATOR_ACTIVE),this.visible=!1},this.accIndicatorState.displayTime)),this.visible&&(setTimeout(()=>this.el.classList.add(Ie.INDICATOR_ACTIVE),0),this.debouncer&&this.debouncer())}render(){const e=this.accIndicatorState;if(!e.seekForward&&!e.seekBack)return this.visible=!1,"";this.visible=!0;const t=this.accIndicatorState.seekTime,i=this.durationSeconds;let n="";if(i&&!isNaN(i)){const e=Ve(i);!isNaN(t)&&t>=0&&(n=Ve(t)+" / "+e)}return g(y,{class:e.seekForward?Ie.ACC_FWD:Ie.ACC_BACK},g("span",null,n),g("div",{class:"avia-acc-arrow"}))}get el(){return this}static get style(){return"avia-seek-indicator{position:absolute;display:inline-block;box-sizing:border-box;border-radius:var(--avia-seek-indicator-border-radius);background-color:var(--avia-seek-indicator-background-color);color:var(--avia-seek-indicator-color);height:var(--avia-seek-indicator-height);font-size:var(--avia-seek-indicator-font-size);font-family:var(--avia-seek-indicator-font-family);line-height:var(--avia-seek-indicator-line-height);top:calc(50% - 24px);opacity:0;transition-property:opacity;transition-duration:300ms;transition-timing-function:ease-in}avia-seek-indicator.avia-indicator-active{opacity:1}avia-seek-indicator:empty{opacity:0}.avia-acc-fwd{right:12px;padding-left:48px;padding-right:12px;text-align:right}.avia-acc-back{left:12px;padding-right:48px;padding-left:12px}avia-seek-indicator .avia-acc-arrow{width:24px;height:18px;position:absolute;top:calc(50% - 9px);background-image:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2017.81%2024%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22Layer_2%22%20data-name%3D%22Layer%202%22%3E%3Cg%20id%3D%22Layer_2-2%22%20data-name%3D%22Layer%202%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M0%2C6.55V17.79a.54.54%2C0%2C0%2C0%2C.54.54l5.15-.08a.54.54%2C0%2C0%2C1%2C.54.54v4.67a.54.54%2C0%2C0%2C0%2C.92.38l10.51-11.2a.56.56%2C0%2C0%2C0%2C0-.76L7.25.17a.54.54%2C0%2C0%2C0-.93.37V5.39a.54.54%2C0%2C0%2C1-.54.54L.54%2C6A.54.54%2C0%2C0%2C0%2C0%2C6.55Z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');background-repeat:no-repeat;background-size:24px 18px}.avia-acc-fwd .avia-acc-arrow{left:12px}.avia-acc-back .avia-acc-arrow{transform:rotate(180deg);right:12px}"}};yt(Vt,["durationSeconds","accIndicatorState"]);const Ht=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.settings=null,this.localeData=null,this.controlMode=null,this.deviceMode=Ne.DESKTOP,this.currentId=Le.SETTINGS,this.menu=void 0}onMenuChange(e){clearTimeout(this.timeout),e&&(this.timeout=setTimeout(()=>{var e;null===(e=this.menu)||void 0===e||e.focus()},50))}onAction(e){switch(e.detail.action){case xe.PANEL_BACK:this.currentId=Le.SETTINGS;break;case xe.PANEL_CLOSE:this.close();break;case xe.MENU_ITEM_SELECT:this.currentId=e.detail.value.action}}onKeyDown(e){var t;if(null===(t=this.settings)||void 0===t?void 0:t.active)switch(e.key){case"Escape":this.close()}}async close(){this.actionEvent.emit({action:xe.SETTINGS_OFF})}disconnectedCallback(){clearTimeout(this.timeout)}render(){var e,t;if((null===(e=this.settings)||void 0===e?void 0:e.active)&&this.localeData){if(this.controlMode===Pe.CONTENT||!(null===(t=this.settings)||void 0===t?void 0:t.active))return this.deviceMode===Ne.TV?g("avia-settings-language",{ref:e=>this.menu=e}):g("avia-panel",{locId:this.currentId,back:this.currentId!==Le.SETTINGS},this.getMenu());this.close()}}getMenu(){var e;switch(this.currentId){case Le.SETTINGS:const t=[{label:this.localeData[Le.LANGUAGE],value:{action:Le.LANGUAGE},disabled:!(this.settings.textTrack||this.settings.audioTrack)},{label:this.localeData[Le.QUALITY],value:{action:Le.QUALITY},disabled:!((null===(e=this.settings.qualities)||void 0===e?void 0:e.length)>0)}];return g("avia-menu",{ref:e=>this.menu=e,locId:Le.SETTINGS,key:Le.SETTINGS,options:t,titlebar:!1,hasSubmenu:!0});case Le.LANGUAGE:return g("avia-settings-language",{ref:e=>this.menu=e,key:Le.LANGUAGE});case Le.QUALITY:return g("avia-settings-quality",{key:Le.QUALITY,ref:e=>this.menu=e})}}static get watchers(){return{menu:["onMenuChange"]}}static get style(){return":root{--avia-chevron-right:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22white%22%3E%3Cpath%20id%3D%22Arrow_2_1%22%20d%3D%22M0%2C24L14.4%2C11.556%2C0%2C0%2C6.74%2C0%2C24%2C11.556%2C6.74%2C24Z%22%2F%3E%3C%2Fsvg%3E');--avia-x-symbol:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2012%2012%22%20width%3D%2212%22%20height%3D%2212%22%3E%3Cstyle%3Etspan%20%7B%20white-space%3Apre%20%7D%3C%2Fstyle%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M0.07%202.19L2.26%200L5.91%203.65L9.56%200L11.75%202.19L8.1%205.84L11.75%209.49L9.56%2011.68L5.91%208.03L2.26%2011.68L0.07%209.49L3.72%205.84L0.07%202.19Z%22%20%2F%3E%3C%2Fsvg%3E');--avia-menu-text-color:var(--avia-text-color);--avia-menu-text-size:var(--avia-text-size);--avia-menu-text-color-hover:var(--avia-text-color-hover)}avia-settings{display:flex;align-self:flex-end;pointer-events:none;min-width:180px;height:auto;background-color:rgba(0, 0, 0, 0.65);flex-direction:column;max-height:calc(100% - 1em - var(--avia-control-bar-height));border-radius:0.25em;overflow:hidden;position:absolute;bottom:64px;right:var(--avia-default-spacing)}avia-settings>*{pointer-events:auto}.avia-settings-nudge-left avia-settings{right:calc(var(--avia-default-spacing) + 48px)}[device-mode=tv] avia-settings{bottom:118px}"}};yt(Ht,["controlMode","deviceMode","localeData","settings"]);const Wt=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.localeData=void 0,this.settings=void 0}onAction(e){switch(e.detail.action){case xe.LIST_ITEM_SELECT:const{key:t,value:i}=e.detail.value;this.actionEvent.emit({action:xe.LANGUAGE_SELECT,value:{trackType:t,trackId:i}})}}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const{audioTrack:e,audioTracks:t}=this.settings,i=null==e?void 0:e.index,n=t.map(e=>({selected:e.index===i,disabled:1===t.length,label:Ke(e.language)||this.localeData[Le.UNKNOWN],value:{key:"audio",value:e.id,description:"description"===e.type}}));if(null==n?void 0:n.length)return g("avia-menu",{ref:e=>this.focusElement=e,locId:Le.AUDIO,options:n,titlebar:!0})}static get style(){return""}};yt(Wt,["localeData","settings"]);const jt=class extends ve{constructor(){super(),this.__registerHost(),this.localeData=void 0,this.settings=void 0}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g(y,{role:"menubar"},g("avia-settings-text",{ref:e=>this.focusElement=e}),g("avia-settings-audio",null))}static get style(){return"avia-settings-language{display:flex;flex-direction:row}avia-menu{min-width:180px}"}};yt(jt,["localeData","settings"]);const $t=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.localeData=void 0,this.settings=void 0,this.qualityLabel=0}onAction(e){switch(e.detail.action){case xe.LIST_ITEM_SELECT:this.actionEvent.emit({action:xe.QUALITY_SELECT,value:{index:parseInt(e.detail.value.value)}})}}getQualityLabel(e){var t;if(null===(t=e.category)||void 0===t?void 0:t.length)return e.category[this.qualityLabel||0]}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const{quality:e,qualities:t,qualityAuto:i}=this.settings,n=t.reduce((e,t)=>{const i=this.getQualityLabel(t),n=e.find(e=>e.label===i);return t.enabled&&(n?t.bitrate>n.value.bitrate&&(n.value.value=t.index,n.value.bitrate=t.bitrate):e.push({label:i,value:{key:"quality",value:t.index,bitrate:t.bitrate}})),e},[]),a=this.getQualityLabel(e),r=1===n.length,o=n.map(e=>Object.assign(Object.assign({},e),{selected:r||!i&&e.label===a,disabled:r})).sort((e,t)=>t.value.bitrate-e.value.bitrate);return o.length>1&&o.unshift({selected:i,disabled:!1,label:`${this.localeData[Le.AUTO]} (${a})`,value:{key:"quality",value:-1}}),g(y,null,g("avia-menu",{ref:e=>this.focusElement=e,locId:Le.QUALITY,options:o,titlebar:!1}))}static get style(){return"avia-settigs-quality{display:flex;flex-direction:row}avia-menu{min-width:180px}"}};yt($t,["localeData","settings","qualityLabel"]);const Kt=class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.localeData=void 0,this.settings=void 0}onAction(e){switch(e.detail.action){case xe.LIST_ITEM_SELECT:const{key:t,value:i}=e.detail.value;this.actionEvent.emit({action:xe.LANGUAGE_SELECT,value:{trackType:t,trackId:i}})}}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const{textTrack:e,textTracks:t}=this.settings,i=null==e?void 0:e.id,n=t.map(e=>({selected:e.id===i,disabled:1===t.length,label:Ke(e.language)||this.localeData[Le.UNKNOWN],value:{key:"text",value:e.id}}));if(null==n?void 0:n.length)return g("avia-menu",{ref:e=>this.focusElement=e,locId:Le.CAPTIONS,options:n,titlebar:!0})}static get style(){return""}};yt(Kt,["localeData","settings"]);const Gt=class extends ve{constructor(){super(),this.__registerHost(),this.settings=void 0,this.settingsDisabled=!0}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){var e;const t=!0===(null===(e=this.settings)||void 0===e?void 0:e.active);return g("avia-button",{ref:e=>this.focusElement=e,actions:`${xe.SETTINGS_ON},${xe.SETTINGS_OFF}`,disabled:this.settingsDisabled,"loc-id":Le.SETTINGS,"aria-haspopup":"true","aria-expanded":t?"true":"false",toggled:t,icon:!0})}static get style(){return"avia-settings-toggle{display:inline-block;position:relative}avia-settings-toggle avia-button{background-image:var(--avia-settings-icon)}avia-settings-toggle avia-button:hover{background-image:var(--avia-settings-icon-hover)}"}};yt(Gt,["settings","settingsDisabled"]);const qt=class extends ve{constructor(){super(),this.__registerHost(),this.changeEvent=T(this,"change",7),this.inputEvent=T(this,"input",7),this.updateEvent=T(this,"update",7),this.draggingEvent=T(this,"dragging",7),this.dragging=!1,this.locId=void 0,this.min=0,this.max=1,this.value=1,this.ranges=[],this.list=[],this.ariaValuetext=void 0,this.increment=.1,this.localeData=void 0,this.deviceMode=void 0,this.valueInternal=this.value}onValueInternalChange(){this.update()}onValueChange(e){this.dragging||(e<this.min?this.value=this.min:e>this.max?this.value=this.max:this.valueInternal=e)}onMinChange(e){this.value=We(this.value,0,1,e,this.max)}onMaxChange(e){this.value=We(this.value,0,1,this.min,e)}onListChange(e){e||(this.list=[],this.update())}onMouseDown(e){var t;null===(t=this.gestureStartDebouncer)||void 0===t||t.call(this,e)}onMouseMove(e){this.dragging&&($e(e),this.move(e))}onMouseUp(e){this.gestureEndDebouncer(e)}onKeydown(e){const t=t=>{const i=this.value+=t;this.input(i),this.change(i),$e(e)};switch(e.keyCode){case St.ARROW_RIGHT:t(this.increment);break;case St.ARROW_LEFT:t(-this.increment);break;case St.ARROW_UP:case St.PAGE_UP:this.deviceMode===Ne.DESKTOP&&t(this.increment);break;case St.ARROW_DOWN:case St.PAGE_DOWN:this.deviceMode===Ne.DESKTOP&&t(-this.increment)}}move(e){const t=this.el.getBoundingClientRect(),i=Ue(e);if(null===i.x)return;const n=We(je((i.x-t.left)/t.width,0,1),0,1,this.min,this.max);this.input(n)}toPercent(e){return Fe(We(e,this.min,this.max))}update(){const{list:e,max:t,min:i,value:n}=this;this.updateEvent.emit({value:n,min:i,max:t,list:e,percent:We(n,i,t)})}input(e){const t=this.valueInternal,i=je(e,this.min,this.max);this.valueInternal=i,this.inputEvent.emit({value:i,previous:t})}change(e){const t=this.value,i=je(e,this.min,this.max);this.value=i,this.changeEvent.emit({value:i,previous:t})}disconnectedCallback(){var e,t;null===(e=this.gestureStartDebouncer)||void 0===e||e.cancel(),null===(t=this.gestureEndDebouncer)||void 0===t||t.cancel()}componentDidRender(){this.gestureStartDebouncer||(this.gestureStartDebouncer=Re(e=>{e.which>1||e.button>0||($e(e),this.dragging=!0,this.draggingEvent.emit({value:!0}),this.move(e))},200)),this.gestureEndDebouncer||(this.gestureEndDebouncer=Re(e=>{this.dragging&&($e(e),this.dragging=!1,this.draggingEvent.emit({value:!1}),this.move(e),this.change(this.valueInternal))},200))}focus(){this.focusElement.focus()}blur(){this.focusElement.blur()}render(){var e;const t=this.toPercent(this.valueInternal),i=null===(e=this.localeData)||void 0===e?void 0:e[this.locId];return g(y,{className:"avia-slider",role:"slider","aria-label":i,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.value,"aria-valuetext":this.ariaValuetext||t},g("div",{class:"avia-slider-track"},g("div",{class:"avia-slider-ranges"},this.ranges.map((e,t)=>g("div",{class:"avia-slider-range-item",key:t,style:{left:this.toPercent(e.start),width:this.toPercent(e.end-e.start)}}))),g("div",{class:"avia-slider-value",style:{width:t}}),g("div",{class:"avia-slider-list"},this.list.map(e=>g("div",{class:"avia-slider-list-item",style:{left:this.toPercent(e.value)}})))),g("slot",null),g("button",{ref:e=>this.focusElement=e,class:"avia-slider-handle",style:{left:t}}))}get el(){return this}static get watchers(){return{valueInternal:["onValueInternalChange"],value:["onValueChange"],min:["onMinChange"],max:["onMaxChange"],list:["onListChange"]}}static get style(){return":root{--avia-slider-height:12px;--avia-slider-color:var(--avia-accent-color);--avia-slider-handle-color:var(--avia-accent-color);--avia-slider-track-color:#444;--avia-slider-track-radius:2px;--avia-slider-value-height:4px;--avia-slider-handle-width:12px;--avia-slider-handle-height:12px;--avia-slider-handle-radius:12px}avia-slider{display:block;height:var(--avia-slider-height);cursor:pointer;position:relative}.avia-slider-track{position:absolute;width:100%;height:var(--avia-slider-value-height);top:calc( (var(--avia-slider-height) - var(--avia-slider-value-height)) * 0.5);background:var(--avia-slider-track-color);border-radius:var(--avia-slider-track-radius);overflow:hidden}.avia-slider-value{position:absolute;height:var(--avia-slider-value-height);top:0;background-color:var(--avia-slider-color)}.avia-slider-handle{position:absolute;top:calc((var(--avia-slider-handle-height) - var(--avia-slider-height)) / -2);width:var(--avia-slider-handle-width);height:var(--avia-slider-handle-height);margin-left:calc(var(--avia-slider-handle-width) / -2);background-color:var(--avia-slider-handle-color);border-radius:var(--avia-slider-handle-radius);cursor:pointer;border:0;padding:0;outline:none;opacity:0;transition-property:opacity;transition-duration:250ms}avia-slider:hover .avia-slider-handle{opacity:1.0}.avia-slider-handle.focus-visible{opacity:1.0;box-shadow:var(--avia-focus-box-shadow)}.avia-slider-ranges{position:absolute;width:100%;height:var(--avia-slider-value-height);top:0;background:transparent}.avia-slider-range-item{position:absolute;height:var(--avia-segment-marker-height);top:0;background-color:#fff}.avia-slider-list{position:absolute;width:100%;height:var(--avia-slider-value-height);top:0;background:transparent}.avia-slider-list-item{background-color:var(--avia-segment-marker-color);width:var(--avia-segment-marker-width);height:var(--avia-segment-marker-height);position:absolute;top:0}"}};yt(qt,["localeData","deviceMode"]);const zt=class extends ve{constructor(){super(),this.__registerHost(),this.locId=void 0,this.localeData=void 0}render(){var e;return g(y,null,null===(e=this.localeData)||void 0===e?void 0:e[this.locId])}static get style(){return"avia-text{color:var(--avia-control-bar-btn-text-color)}"}};yt(zt,["localeData"]);const Yt=class extends ve{constructor(){super(),this.__registerHost(),this.textTrackEnabled=!1,this.textDisabled=!0}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("avia-button",{ref:e=>this.focusElement=e,ids:`${Le.CLOSED_CAPTIONS_ON}, ${Le.CLOSED_CAPTIONS_OFF}`,actions:`${xe.TEXT_ON}, ${xe.TEXT_OFF}`,disabled:this.textDisabled,toggled:this.textTrackEnabled,icon:!0})}static get style(){return"avia-text-toggle{display:inline-block}avia-text-toggle avia-button{background-image:var(--avia-text-on-icon)}avia-text-toggle avia-button:hover{background-image:var(--avia-text-on-icon-hover)}avia-text-toggle avia-button[toggled]{background-image:var(--avia-text-off-icon)}avia-text-toggle avia-button[toggled]:hover{background-image:var(--avia-text-off-icon-hover)}"}};yt(Yt,["textTrackEnabled","textDisabled"]);const Qt=class extends ve{constructor(){super(),this.__registerHost(),this.timeDisplayValue=void 0,this.currentTimeSeconds=void 0,this.durationSeconds=void 0,this.isLiveLinear=!1,this.isDvr=!1}render(){return this.isLiveLinear||this.isDvr?"":g("div",{class:"avia-time-display"},this.timeDisplayValue)}static get style(){return"avia-time-display{display:inline-block;margin-right:var(--avia-default-spacing)}.avia-time-display{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-time-display{text-align:right}"}};yt(Qt,["timeDisplayValue","currentTimeSeconds","durationSeconds","isLiveLinear","isDvr"]);const Xt=class extends ve{constructor(){super(),this.__registerHost(),this.currentTimeSeconds=0,this.durationSeconds=0,this.localeData=void 0}render(){const e=Math.max(this.durationSeconds-this.currentTimeSeconds,0),t=this.localeData?Be(e,this.localeData):"";return g(y,{"aria-label":t,title:t},"-"+Ve(e))}static get style(){return"avia-time-remaining{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}"}};yt(Xt,["currentTimeSeconds","durationSeconds","localData"]);const Zt=class extends ve{constructor(){super(),this.__registerHost(),this.muted=!1,this.unmuteCtaVisible=!1,this.isTouch=!1}getText(){return this.isTouch?Le.TAP_TO_UNMUTE:Le.CLICK_TO_UNMUTE}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return this.unmuteCtaVisible&&this.muted?g("avia-button",{actions:xe.UNMUTE,ref:e=>this.focusElement=e},g("avia-text",{"loc-id":this.getText()})):""}static get style(){return"avia-unmute-cta{box-sizing:border-box;display:inline-block;position:absolute;top:64px;height:var(--avia-control-bar-btn-height);left:var(--avia-default-spacing);pointer-events:auto;background-color:rgba(0, 0, 0, 0.415);border-radius:4px;opacity:1}avia-unmute-cta avia-button{background-image:var(--avia-mute-icon);background-position:-31px center;background-repeat:no-repeat;background-size:60% 45%;line-height:var(--avia-control-bar-btn-height);padding-right:var(--avia-default-spacing);padding-left:50px;font-size:1.1em;text-align:left;width:auto;height:var(--avia-control-bar-btn-height);color:white;cursor:pointer;opacity:0.85}avia-unmute-cta avia-button:hover{background-image:var(--avia-mute-icon-hover)}"}};yt(Zt,["muted","unmuteCtaVisible","isTouch"]);const Jt=class extends ve{constructor(){super(),this.__registerHost(),this.volume=void 0,this.accIndicatorState=void 0}componentDidRender(){var e;!this.debouncer&&this.accIndicatorState.displayTime>0&&(this.debouncer=Re(()=>{var e;null===(e=this.el)||void 0===e||e.classList.remove(Ie.INDICATOR_ACTIVE),this.visible=!1},this.accIndicatorState.displayTime)),this.visible&&(setTimeout(()=>this.el.classList.add(Ie.INDICATOR_ACTIVE),0),null===(e=this.debouncer)||void 0===e||e.call(this))}render(){var e;const t=this.accIndicatorState;if(!t.volumeKey)return null===(e=this.el)||void 0===e||e.classList.remove(Ie.INDICATOR_ACTIVE),this.visible=!1,"";this.visible=!0;const i=0===this.volume?0:je(this.volume,0,1);return g(y,{class:t.muted||0===this.volume?Ie.ACC_VOL_OFF:Ie.ACC_VOL_ON},g("div",{class:Ie.ACC_VOL},g("div",{class:Ie.ACC_VOL_METER,style:{width:Fe(i)}}),g("div",{class:Ie.ACC_VOL_OVERLAY})))}get el(){return this}static get style(){return"avia-volume-indicator{position:absolute;display:block;box-sizing:border-box;border-radius:var(--avia-volume-indicator-border-radius);background-color:var(--avia-volume-indicator-background-color);width:0;height:0;right:var(--avia-volume-indicator-right);bottom:var(--avia-volume-indicator-bottom);visibility:hidden;padding-top:48px;opacity:0;transition-property:opacity;transition-duration:300ms;transition-timing-function:ease-in;box-shadow:0px 0px 1px 1px rgba(0, 0, 0, 0.3)}avia-volume-indicator:empty{opacity:0}.avia-acc-vol{width:48px;margin:0 auto;background-color:black;height:4px;position:relative}.avia-acc-vol-meter{height:4px;background-color:#fff}.avia-vol-meter-overlay{position:absolute;top:0;left:0;height:4px;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAFElEQVQImWNAA/+Z0EUICDAwMAAANNwBBuf8FlcAAAAASUVORK5CYII=');width:100%}avia-volume-indicator.avia-indicator-active{width:var(--avia-volume-indicator-width);height:var(--avia-volume-indicator-height);opacity:1.0}avia-volume-indicator.avia-volume-on::before,avia-volume-indicator.avia-volume-off::before{content:\"\";position:absolute;top:0px;right:0px;bottom:0px;left:0px;opacity:0.85;background-repeat:no-repeat;background-position:center 12px;background-size:40% 30%}avia-volume-indicator.avia-volume-on::before{background-image:var(--avia-unmuted-icon)}avia-volume-indicator.avia-volume-on::before:hover{background-image:var(--avia-unmuted-icon-hover)}avia-volume-indicator.avia-volume-off::before{background-image:var(--avia-mute-icon)}avia-volume-indicator.avia-volume-off::before:hover{background-image:var(--avia-mute-icon-hover)}"}};yt(Jt,["volume","accIndicatorState"]);const ei=class extends ve{constructor(){super(),this.__registerHost(),this.changeEvent=T(this,"action",7),this.volume=void 0,this.muted=!1,this.linkMuteAndVolume=!0,this.playerDimensions=void 0,this.durationSeconds=void 0}onInput(e){this.changeEvent.emit({action:xe.VOLUME,value:e.detail.value})}onDragging(e){!0===e.detail.value&&this.changeEvent.emit({action:xe.UNMUTE,value:!0})}getSliderWidth(){const e=this.durationSeconds>=3600?560:530;return(this.playerDimensions.width&&this.playerDimensions.width<=e?60:100)+"px"}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("div",{style:{display:"flex",width:this.getSliderWidth(),marginLeft:"var(--avia-default-spacing)"}},g("avia-slider",{ref:e=>this.focusElement=e,"loc-id":Le.VOLUME,value:this.linkMuteAndVolume&&this.muted?0:this.volume,onInput:e=>this.onInput(e),onDragging:e=>this.onDragging(e)}))}static get style(){return"avia-volume-slider avia-slider{width:100%;margin-top:-4px}"}};yt(ei,["linkMuteAndVolume","muted","volume","playerDimensions","durationSeconds"]);const ti=class extends ve{constructor(){super(),this.__registerHost(),this.waiting=!1}render(){if(this.waiting)return g("avia-overlay",{centered:!0},g("avia-spinner",null))}static get style(){return"avia-waiting-overlay{display:block;justify-content:center;align-items:center;display:flex}avia-waiting-overlay slot-fb:not(:empty)~avia-spinner{display:none}"}};yt(ti,["waiting"]);const ii=J(class extends ve{constructor(){super(),this.__registerHost()}render(){return g(y,null,g("avia-volume-indicator",null),g("avia-seek-indicator",null))}static get style(){return"avia-accessibility{display:block}"}},[0,"avia-accessibility"]),ni=J(class extends ve{constructor(){super(),this.__registerHost()}render(){return g(y,null)}static get style(){return"avia-active{display:block;transition:var(--avia-active-transition-in)}avia-ui:not([active]) avia-active{opacity:0;transition:var(--avia-active-transition-out)}"}},[0,"avia-active"]),ai=J(class extends ve{constructor(){super(),this.__registerHost()}render(){return g(y,null,g("div",{class:"avia-ad-control-container"},g("avia-mute-toggle",null),g("avia-play-toggle",null),g("avia-fullscreen-toggle",null)),g("avia-ad-progress-bar",null))}static get style(){return'avia-ad-control-bar{position:absolute;height:56px;width:100%;left:0;bottom:0;right:0;pointer-events:none;flex-direction:row;justify-content:center;display:none;transition:var(--avia-active-transition-in)}avia-ui[control-mode="ad"] avia-ad-control-bar{display:flex}.avia-ad-control-container{pointer-events:auto;display:flex;width:calc(3 * var(--avia-control-bar-btn-width) + (2 * var(--avia-default-spacing)));height:var(--avia-control-bar-btn-height);justify-content:space-between;background-color:var(--avia-ad-control-bg-color);border-radius:var(--avia-ad-control-border-radius)}avia-ui:not([active]) avia-ad-control-bar{opacity:0;transition:var(--avia-active-transition-out)}'}},[0,"avia-ad-control-bar"]),ri=J(Et,[0,"avia-ad-progress-bar",{adPlayheadPosition:[2,"ad-playhead-position"],isLiveLinear:[4,"is-live-linear"]}]),oi=J(Tt,[0,"avia-button",{locId:[513,"loc-id"],toggled:[516],compact:[516],icon:[516],variant:[516],actions:[1],ids:[513],disabled:[4],localeData:[16],focused:[32]},[[0,"click","onClick"],[0,"touchstart","onTouchStart"],[1,"touchend","onTouchEnd"],[0,"focus","onFocus"],[0,"blur","onBlur"],[0,"keyup","onKeyDown"]]]),si=J(wt,[4,"avia-control-bar",{active:[516],controlMode:[513,"control-mode"],deviceMode:[1,"device-mode"],isDvr:[4,"is-dvr"],isLiveLinear:[4,"is-live-linear"],isIosNative:[4,"is-ios-native"],settings:[16]}]),li=J(class extends ve{constructor(){super(),this.__registerHost()}render(){return g(y,null,g("slot",null,g("avia-mute-toggle",{compact:!0}),g("avia-play-toggle",{compact:!0}),g("avia-fullscreen-toggle",{compact:!0})))}static get style(){return'avia-control-bar-compact{display:none;position:absolute;top:50%;left:50%;width:var(--avia-compact-control-bar-width);height:var(--avia-compact-button-height);border-radius:var(--avia-compact-button-border-radius);margin-left:var(--avia-compact-control-bar-margin-left);margin-top:var(--avia-compact-control-bar-margin-top)}avia-control-bar-compact avia-mute-toggle,avia-control-bar-compact avia-play-toggle{margin-right:var(--avia-default-spacing)}avia-ui[control-mode="compact"][active] avia-control-bar-compact,avia-ui[control-mode="compact"][active] avia-control-bar-compact>*{display:block}'}},[4,"avia-control-bar-compact"]),ui=J(class extends ve{constructor(){super(),this.__registerHost(),this.orientation=st.HORIZONTAL}render(){const e=this.orientation===st.VERTICAL?"menu":"menubar";return g(y,{role:e})}static get style(){return""}},[0,"avia-control-group",{orientation:[513]}]),ci=J(xt,[0,"avia-current-time",{currentTimeSeconds:[2,"current-time-seconds"],localeData:[16],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),di=J(Ct,[0,"avia-duration",{durationSeconds:[2,"duration-seconds"],localeData:[16],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),hi=J(_t,[0,"avia-fullscreen-toggle",{fullscreen:[4],fullscreenDisabled:[4,"fullscreen-disabled"],compact:[516]}]),fi=J(Pt,[0,"avia-live-control",{isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"],live:[4]}]),pi=J(It,[0,"avia-menu",{hasSubmenu:[4,"has-submenu"],locId:[1,"loc-id"],titlebar:[4],localeData:[16],options:[1040]},[[0,"action","onAction"],[0,"keydown","onKeydown"]]]),vi=J(class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"action",7),this.disabled=!1,this.selected=!1,this.label="",this.action="",this.hasSubmenu=!1}onClick(e){this.disabled||this.selected||($e(e),this.actionEvent.emit({action:this.action,value:this.element.dataset}))}focus(){this.focusElement.focus()}blur(){this.focusElement.blur()}render(){return g(y,null,g("button",{ref:e=>this.focusElement=e,role:this.hasSubmenu?"menuitem":"menuitemradio","aria-haspopup":String(this.hasSubmenu),"aria-checked":String(this.selected),disabled:this.disabled},g("label",null,this.label),g("slot",null)))}get element(){return this}static get style(){return"avia-menu-item{display:block;width:100%;height:auto;border:none;outline:none;text-align:left;color:var(--avia-menu-text-color);background-color:transparent;background-position:right center;background-repeat:no-repeat;background-size:20% 20%;margin:0}avia-menu-item:hover{color:var(--avia-menu-text-color-hover);background-color:rgba(0, 0, 0, 0.65)}avia-menu-item[aria-haspopup=true]{background-image:var(--avia-chevron-right)}avia-menu-item[disabled]{cursor:default;opacity:0.55}avia-menu-item[disabled]:hover{background-color:transparent;color:var(--avia-menu-text-color)}avia-menu-item[data-description] button:after{content:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAVCAYAAABc6S4mAAACG0lEQVQ4jZ2Vz0tVQRTHP89QKJ9lm6ikzN6zJAlxJ1E8CJO27oo2IdKmRdBWwRZhkH9A4kJoI7ppIUWkibRsERpILpQCF9lPLPpBQc+vTJ0Lh+lduc8Dw8z9zJlz5sw5MzcniR1IAegDDgJrwCjwvqKZ4CBDa5VUkrTf6YbNnZc0JemHpHFJtbGtrBF0AOeAI8AxYAp44OYvAo+BT0AJeFVtBEnbI2lI/+RZtOPDxsuSmnwEd4FG4E+06xxQa2c8DSy6uSKwYufeBnwxfgGYAZaBU0kEWeWJpONux822bjWK8qHx63+PX9J6FU5+SWp3xm4av+PYSWMh8XXhiNat3IIMA5+BGqAM1ANX7BgSCfotwG/T+wrkgV3AptMJNrviCNKSOxlF0ufm7hu77NiIsVs1UWJbUsr0EvDBffe48YL1JcdeW98bO9hO5lI28tb63Y6VrS9U48Dn4Z0b563fdCyX6MUONlKMXwU63fdzNy5Y/8axpGgexUnukLRPUqOkvZKKkgYqlOtRl9AlY82OLRvrjh38lPTdavhbyl245gy1G1t07IDTzWNvR1a5EZXviq1rdeyesZHkJr+QtLZNeylpzG6oNz5R4U4UjYXo6xIH1bYGSfNmqD9a+9H42YRlNV4v6bSkQUkLkp5KanPzh5zxXr82i/HwXoX3vdsS3Bm9qLetKEI1ndjpHy2W8P84Y09GEzAGzP6nBWwBc7kMbCgO6BoAAAAASUVORK5CYII=');left:0.4em;top:0.25em;position:relative}avia-menu-item[selected] button{font-weight:bold;cursor:default;background-position:94% center;background-repeat:no-repeat;background-size:0.9em;background-image:var(--avia-selected-icon);pointer-events:none}button{border:none;outline:none;width:100%;height:100%;padding:1em;margin:0;color:var(--avia-menu-text-color);background-color:transparent;text-align:left;cursor:pointer;font-size:var(--avia-menu-text-size)}button:focus-visible,button.focus-visible{outline:none;box-shadow:var(--avia-focus-box-shadow-inner)}button[aria-haspopup=true]{background-image:var(--avia-chevron-right);background-position:right center;background-repeat:no-repeat;background-size:20% 20%}"}},[4,"avia-menu-item",{disabled:[1540],selected:[516],label:[1],action:[1],hasSubmenu:[4,"has-submenu"]},[[0,"click","onClick"]]]),gi=J(Nt,[0,"avia-mute-toggle",{muted:[4],muteDisabled:[4,"mute-disabled"],compact:[516]}]),mi=J(class extends ve{constructor(){super(),this.__registerHost(),this.centered=!1}render(){return g(y,{centered:this.centered})}static get style(){return"avia-overlay{background:transparent;position:absolute;width:100%;height:100%;top:0;left:0;border:none;padding:0;margin:0}avia-overlay[centered]{justify-content:center;align-items:center;display:flex}"}},[0,"avia-overlay",{centered:[516]}]),yi=J(Lt,[4,"avia-panel",{titlebar:[4],back:[4],locId:[1,"loc-id"],localeData:[16]}]),Ai=J(Mt,[0,"avia-pause-overlay",{playing:[4],waiting:[4]}]),ki=J(class extends ve{constructor(){super(),this.__registerHost()}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("avia-button",{ref:e=>this.focusElement=e,disabled:!1,actions:xe.PLAY,"loc-id":Le.PLAY})}static get style(){return"avia-play-cta avia-button{width:var(--avia-play-cta-width);height:var(--avia-play-cta-height);border-radius:var(--avia-play-cta-border-radius);background-image:var(--avia-play-cta-bg-image);background-color:var(--avia-play-cta-bg-color);background-repeat:no-repeat;background-position-x:calc(var(--avia-play-cta-bg-position) + 6%);background-position-y:var(--avia-play-cta-bg-position);background-size:var(--avia-play-cta-bg-size);cursor:pointer}"}},[0,"avia-play-cta"]),bi=J(Rt,[0,"avia-play-overlay",{playing:[4],controlMode:[1,"control-mode"],playDisabled:[4,"play-disabled"],pausable:[4],isTouch:[4,"is-touch"]},[[2,"click","onClick"]]]),Ei=J(Dt,[0,"avia-play-toggle",{playing:[4],playDisabled:[4,"play-disabled"],pausable:[4],compact:[516]}]),Si=J(Ot,[4,"avia-poster",{posterActive:[4,"poster-active"],posterImageUrl:[1,"poster-image-url"],playing:[4],waiting:[4]},[[2,"click","handleAction"]]]),Ti=J(Bt,[0,"avia-progress-bar",{bufferedRanges:[16],currentTimeSeconds:[2,"current-time-seconds"],durationSeconds:[2,"duration-seconds"],localeData:[16],segmentBreakPositions:[1,"segment-break-positions"],preview:[16],increment:[2],live:[4],hovering:[32],cursor:[32],value:[32]},[[1,"mouseenter","onMouseEnter"],[1,"mouseleave","onMouseLeave"],[9,"mousemove","onMouseMove"]]]),wi=J(Ut,[0,"avia-seek-back-button",{seekBackDisabled:[4,"seek-back-disabled"],isLiveLinear:[4,"is-live-linear"]}]),xi=J(Ft,[0,"avia-seek-forward-button",{seekForwardDisabled:[4,"seek-forward-disabled"],isLiveLinear:[4,"is-live-linear"]}]),Ci=J(Vt,[0,"avia-seek-indicator",{durationSeconds:[2,"duration-seconds"],accIndicatorState:[16]}]),_i=J(Ht,[0,"avia-settings",{settings:[16],localeData:[16],controlMode:[1,"control-mode"],deviceMode:[1,"device-mode"],currentId:[32],menu:[32]},[[0,"action","onAction"],[4,"keydown","onKeyDown"]]]),Pi=J(Wt,[0,"avia-settings-audio",{localeData:[16],settings:[16]},[[0,"action","onAction"]]]),Ii=J(jt,[0,"avia-settings-language",{localeData:[16],settings:[16]}]),Ni=J($t,[0,"avia-settings-quality",{localeData:[16],settings:[16],qualityLabel:[2,"quality-label"]},[[0,"action","onAction"]]]),Li=J(Kt,[0,"avia-settings-text",{localeData:[16],settings:[16]},[[0,"action","onAction"]]]),Mi=J(Gt,[0,"avia-settings-toggle",{settings:[16],settingsDisabled:[4,"settings-disabled"]}]),Ri=J(qt,[4,"avia-slider",{locId:[513,"loc-id"],min:[2],max:[2],value:[1026],ranges:[16],list:[16],ariaValuetext:[1,"aria-valuetext"],increment:[2],localeData:[16],deviceMode:[1,"device-mode"],valueInternal:[32]},[[1,"touchstart","onMouseDown"],[0,"mousedown","onMouseDown"],[8,"touchmove","onMouseMove"],[8,"mousemove","onMouseMove"],[9,"touchend","onMouseUp"],[8,"mouseup","onMouseUp"],[2,"keydown","onKeydown"]]]),Di=J(class extends ve{constructor(){super(),this.__registerHost()}render(){return g(y,null)}static get style(){return"avia-spinner{display:block;width:var(--avia-spinner-diameter);height:var(--avia-spinner-diameter);overflow:visible;background-size:var(--avia-spinner-diameter);background-repeat:no-repeat;background-image:var(--avia-spinner-image);animation:avia-rotate 2s linear infinite}@keyframes avia-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}"}},[0,"avia-spinner"]),Oi=J(zt,[0,"avia-text",{locId:[513,"loc-id"],localeData:[16]}]),Bi=J(Yt,[0,"avia-text-toggle",{textTrackEnabled:[4,"text-track-enabled"],textDisabled:[4,"text-disabled"]}]),Ui=J(Qt,[0,"avia-time-display",{timeDisplayValue:[1,"time-display-value"],currentTimeSeconds:[2,"current-time-seconds"],durationSeconds:[2,"duration-seconds"],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),Fi=J(Xt,[0,"avia-time-remaining",{currentTimeSeconds:[2,"current-time-seconds"],durationSeconds:[2,"duration-seconds"],localeData:[16]}]),Vi=J(class extends ve{constructor(){super(),this.__registerHost(),this.actionEvent=T(this,"uiaction",7),this.controlMode=Pe.NONE,this.fullscreen=!1,this.active=null,this.deviceMode=Ne.DESKTOP,this.fullscreenDisabled=!0,this.muted=!1,this.muteDisabled=!0,this.volume=1,this.playing=!1,this.playDisabled=!0,this.textTrackEnabled=!1,this.textDisabled=!0,this.timeDisplayValue="",this.isLiveLinear=!1,this.isDvr=!1,this.live=!1,this.playheadPosition=0,this.durationSeconds=0,this.currentTimeSeconds=0,this.seekDisabled=!0,this.seekBackDisabled=!0,this.seekForwardDisabled=!0,this.settingsDisabled=!0,this.adPlayheadPosition=0,this.segmentBreakPositions=void 0,this.localeData=null,this.preview=null,this.accIndicatorState=void 0,this.unmuteCtaVisible=!1,this.settings=null,this.posterActive=!1,this.posterImageUrl="",this.qualityLabel=0,this.waiting=!1,this.initialized=!1,this.pausable=!0,this.isTouch=!1,this.isIosNative=!1,this.linkMuteAndVolume=!0,this.playerDimensions={width:0,height:0},this.bufferedRanges=[]}handleAction(e){var t;this.actionEvent.emit(e.detail),e.detail.action===xe.SETTINGS_OFF&&(null===(t=this.element.querySelector("avia-settings-toggle"))||void 0===t||t.focus())}componentWillLoad(){!function(e,t){var i=S(e),n=new Map,a={wormholes:n,state:t};At.set(e,a);var r=e.connectedCallback;e.connectedCallback=function(){At.set(e,a),r&&r.call(e)};var o=e.disconnectedCallback;e.disconnectedCallback=function(){At.delete(e),o&&o.call(e)},i.addEventListener("openWormhole",function(e){e.stopPropagation();var t=e.detail,i=t.consumer,r=t.onOpen;if(!n.has(i)){if("symbol"!=typeof i){var o=i.connectedCallback,s=i.disconnectedCallback;i.connectedCallback=function(){n.set(i,e.detail),o&&o.call(i)},i.disconnectedCallback=function(){n.delete(i),s&&s.call(i)}}n.set(i,e.detail),kt(e.detail,a.state),null==r||r.resolve(function(){n.delete(i)})}}),i.addEventListener("closeWormhole",function(e){var t=e.detail;n.delete(t)})}(this,this)}render(){if(!this.initialized)return;const e=this.deviceMode===Ne.TV;return g(y,null,g(bt,{state:this},g("div",{class:"avia-layer"},g("slot",{name:"underlay"})),g("slot",{name:"play-overlay"},!e&&g("avia-play-overlay",null)),g("slot",{name:"pause-overlay"},e&&g("avia-pause-overlay",null)),g("slot",{name:"waiting-overlay"},g("avia-waiting-overlay",null)),g("slot",{name:"unmute-cta"},!e&&g("avia-unmute-cta",null)),g("slot",{name:"accessibility"},g("avia-accessibility",null)),g("slot",{name:"poster"},!e&&g("avia-poster",null)),g("div",{class:"avia-layer avia-controls"},g("div",{class:"avia-spacer"}),g("slot",{name:"settings"},g("avia-settings",null)),g("slot",{name:"control-bar"},g("avia-control-bar",null)),g("slot",{name:"ad-control-bar"},g("avia-ad-control-bar",null)),g("slot",{name:"compact-control-bar"},!e&&g("avia-control-bar-compact",null))),g("div",{class:"avia-layer"},g("slot",{name:"overlay"}))))}get element(){return this}static get style(){return":root{--avia-accent-color:#3aacff;--avia-text-color:#dedede;--avia-text-color-hover:#ffffff;--avia-font-family:Arial, sans-serif;--avia-control-bar-bg:linear-gradient(to top, rgba(2,0,36,0.8) 0%, rgba(1,0,10,0.5029586834733894) 62%, rgba(0,0,0,0) 100%);--avia-control-bar-height:64px;--avia-default-spacing:12px;--avia-half-spacing:6px;--avia-live-padding-top:12px;--avia-compact-button-width:48px;--avia-compact-button-height:48px;--avia-compact-button-border-radius:calc(var(--avia-compact-button-width) / 2);--avia-compact-button-background-color:rgba(64, 64, 64, 0.5);--avia-compact-control-bar-width:calc( (var(--avia-compact-button-width) * 3) + (var(--avia-default-spacing) * 2));--avia-compact-control-bar-margin-left:calc(var(--avia-compact-control-bar-width) / -2);--avia-compact-control-bar-margin-top:calc(var(--avia-compact-button-height) / -2);--avia-play-overlay-bg-color:rgba(0, 0, 0, 0.35);--avia-play-cta-width:66px;--avia-play-cta-height:66px;--avia-play-cta-border-radius:calc(var(--avia-play-cta-width) / 2);--avia-play-cta-bg-image:var(--avia-play-icon);--avia-play-cta-bg-position:50%;--avia-play-cta-bg-color:rgba(64, 64, 64, 0.5);--avia-play-cta-bg-size:calc(var(--avia-play-cta-width) / 2) calc(var(--avia-play-cta-height) / 2);--avia-control-bar-btn-height:48px;--avia-control-bar-btn-width:48px;--avia-control-bar-btn-text-color:var(--avia-text-color);--avia-control-bar-btn-text-color-hover:var(--avia-text-color-hover);--avia-control-bar-btn-border:none;--avia-control-bar-btn-border-width:0;--avia-control-bar-btn-border-radius:0;--avia-control-bar-btn-border-outline:none;--avia-control-bar-btn-border-cursor:pointer;--avia-control-bar-btn-disabled-cursor:not-allowed;--avia-control-bar-btn-disabled-opacity:0.5;--avia-icon-btn-bg-width:50%;--avia-icon-btn-bg-height:37.5%;--avia-icon-btn-bg-size:var(--avia-icon-btn-bg-width) var(--avia-icon-btn-bg-height);--avia-fs-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M1%207a1%201%200%200%201-1-1V1a1%201%200%200%201%201-1h5a1%201%200%200%201%200%202H2.5a.5.5%200%200%200-.5.5V6a1%201%200%200%201-1%201zM6%2018H1a1%201%200%200%201-1-1v-5a1%201%200%200%201%202%200v3.5a.5.5%200%200%200%20.5.5H6a1%201%200%200%201%200%202zM23%2018h-5a1%201%200%200%201%200-2h3.5a.5.5%200%200%200%20.5-.5V12a1%201%200%200%201%202%200v5a1%201%200%200%201-1%201zM23%207a1%201%200%200%201-1-1V2.5a.5.5%200%200%200-.5-.5H18a1%201%200%200%201%200-2h5a1%201%200%200%201%201%201v5a1%201%200%200%201-1%201z%22%2F%3E%3C%2Fsvg%3E');--avia-fs-icon-hover:var(--avia-fs-icon);--avia-fs-exit-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M4%206H1a1%201%200%200%201%200-2h2.5a.5.5%200%200%200%20.5-.5V1a1%201%200%200%201%202%200v3a2%202%200%200%201-2%202zM23%206h-4a1%201%200%200%201-1-1V1a1%201%200%200%201%202%200v2.5a.5.5%200%200%200%20.5.5H23a1%201%200%200%201%200%202zM19%2018a1%201%200%200%201-1-1v-3a2%202%200%200%201%202-2h3a1%201%200%200%201%200%202h-2.5a.5.5%200%200%200-.5.5V17a1%201%200%200%201-1%201zM5%2018a1%201%200%200%201-1-1v-2.5a.5.5%200%200%200-.5-.5H1a1%201%200%200%201%200-2h3a2%202%200%200%201%202%202v3a1%201%200%200%201-1%201z%22%2F%3E%3C%2Fsvg%3E');--avia-fs-exit-icon-hover:var(--avia-fs-exit-icon);--avia-play-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EPlay%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M19%2010L6.84%2017.81a1.19%201.19%200%200%201-1.84-1V1.19a1.19%201.19%200%200%201%201.83-1L19%208a1.19%201.19%200%200%201%200%202z%22%2F%3E%3C%2Fsvg%3E');--avia-play-icon-hover:var(--avia-play-icon);--avia-pause-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EPause%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Crect%20x%3D%226%22%20width%3D%224%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3Crect%20x%3D%2214%22%20width%3D%224%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3C%2Fsvg%3E');--avia-pause-icon-hover:var(--avia-pause-icon);--avia-stop-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EStop%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Crect%20x%3D%223%22%20width%3D%2218%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3C%2Fsvg%3E');--avia-stop-icon-hover:var(--avia-stop-icon);--avia-mute-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M3.58%206H2a1%201%200%200%200-1%201v4a1%201%200%200%200%201%201h1.58a1%201%200%200%201%20.72.3l5%205a1%201%200%200%200%201.7-.74V1.44A1%201%200%200%200%209.27.73l-5%205a1%201%200%200%201-.69.27zM19.77%209.33a.5.5%200%200%201%200-.71l.94-.94a1%201%200%200%200%200-1.41%201%201%200%200%200-1.42%200l-.94.94a.5.5%200%200%201-.7%200l-.94-.94a1%201%200%200%200-1.42%200%201%201%200%200%200%200%201.41l.94.94a.5.5%200%200%201%200%20.71l-.94.94a1%201%200%200%200%200%201.41%201%201%200%200%200%201.42%200l.94-.94a.5.5%200%200%201%20.7%200l.94.94a1%201%200%200%200%201.42%200%201%201%200%200%200%200-1.41z%22%2F%3E%3C%2Fsvg%3E');--avia-mute-icon-hover:var(--avia-mute-icon);--avia-unmuted-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M3.59%206H2a1%201%200%200%200-1%201v4a1%201%200%200%200%201%201h1.59a1%201%200%200%201%20.7.29l5%205a1%201%200%200%200%201.71-.7V1.41a1%201%200%200%200-1.71-.7l-5%205a1%201%200%200%201-.7.29zM14%2018a1%201%200%200%201%200-2%207%207%200%200%200%200-14%201%201%200%200%201%200-2%209%209%200%200%201%200%2018z%22%2F%3E%3Cpath%20d%3D%22M14%2014a1%201%200%200%201%200-2%203%203%200%200%200%200-6%201%201%200%200%201%200-2%205%205%200%200%201%200%2010z%22%2F%3E%3C%2Fsvg%3E');--avia-unmuted-icon-hover:var(--avia-unmuted-icon);--avia-text-on-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23fff%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1zm-1%2011a1%201%200%2001-1%201H9a1%201%200%2000-.71.29L6%2014.59V13a1%201%200%2000-1-1H3a1%201%200%2001-1-1V3a1%201%200%20011-1h18a1%201%200%20011%201z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-text-on-icon-hover:var(--avia-text-on-icon);--avia-text-off-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23231f20%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-text-off-icon-hover:var(--avia-text-off-icon);--avia-text-icon-disabled:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23fff%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1zm-1%2011a1%201%200%2001-1%201H9a1%201%200%2000-.71.29L6%2014.59V13a1%201%200%2000-1-1H3a1%201%200%2001-1-1V3a1%201%200%20011-1h18a1%201%200%20011%201z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-seek-forward-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2015.52%2017.29%22%3E%3Cpath%20d%3D%22M14.69%2C1.16%2C14%2C1.8A8.76%2C8.76%2C0%2C0%2C0%2C1.81%2C3.37%2C8.59%2C8.59%2C0%2C0%2C0%2C3.39%2C15.49a8.77%2C8.77%2C0%2C0%2C0%2C11.5-.74A1%2C1%2C0%2C0%2C0%2C15%2C13.4a1%2C1%2C0%2C0%2C0-1.36-.11l-.11.11a6.81%2C6.81%2C0%2C0%2C1-9.58%2C0%2C6.69%2C6.69%2C0%2C0%2C1-.06-9.51%2C6.82%2C6.82%2C0%2C0%2C1%2C8.73-.77L11.8%2C4a.47.47%2C0%2C0%2C0%2C0%2C.67.5.5%2C0%2C0%2C0%2C.37.15H15a.49.49%2C0%2C0%2C0%2C.49-.48V1.49a.47.47%2C0%2C0%2C0-.83-.33Z%22%20style%3D%22fill%3A%23fff%22%2F%3E%3C%2Fsvg%3E');--avia-seek-forward-icon-hover:var(--avia-seek-forward-icon);--avia-seek-back-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2015.52%2017.29%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22Layer_2%22%20data-name%3D%22Layer%202%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M.46%2C1A.48.48%2C0%2C0%2C0%2C0%2C1.49V4.33a.49.49%2C0%2C0%2C0%2C.48.48h2.9a.51.51%2C0%2C0%2C0%2C.37-.15.48.48%2C0%2C0%2C0%2C0-.67L2.9%2C3.17a6.82%2C6.82%2C0%2C0%2C1%2C8.73.77%2C6.69%2C6.69%2C0%2C0%2C1-.05%2C9.51A6.82%2C6.82%2C0%2C0%2C1%2C2%2C13.4a.52.52%2C0%2C0%2C0-.1-.11%2C1%2C1%2C0%2C0%2C0-1.37.11%2C1%2C1%2C0%2C0%2C0%2C.11%2C1.35%2C8.76%2C8.76%2C0%2C0%2C0%2C11.49.74A8.59%2C8.59%2C0%2C0%2C0%2C13.7%2C3.37%2C8.76%2C8.76%2C0%2C0%2C0%2C1.48%2C1.8L.82%2C1.16A.45.45%2C0%2C0%2C0%2C.46%2C1Z%22%20transform%3D%22translate(0%200)%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E');--avia-seek-back-icon-hover:var(--avia-seek-back-icon);--avia-settings-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M20.43%2010.4l-.93-.53a1%201%200%200%201%200-1.74l.93-.53a1%201%200%200%200%20.36-1.37l-2-3.46a1%201%200%200%200-1.36-.37l-.93.54a1%201%200%200%201-1.5-.87V1a1%201%200%200%200-1-1h-4a1%201%200%200%200-1%201v1.07a1%201%200%200%201-1.5.87l-.93-.54a1%201%200%200%200-1.36.37l-2%203.46a1%201%200%200%200%20.36%201.37l.93.53a1%201%200%200%201%200%201.74l-.93.53a1%201%200%200%200-.36%201.37l2%203.46a1%201%200%200%200%201.36.37l.93-.54a1%201%200%200%201%201.5.87V17a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1.07a1%201%200%200%201%201.5-.87l.93.54a1%201%200%200%200%201.36-.37l2-3.46a1%201%200%200%200-.36-1.37zM12%2012a3%203%200%201%201%203-3%203%203%200%200%201-3%203z%22%2F%3E%3C%2Fsvg%3E');--avia-settings-icon-hover:var(--avia-settings-icon);--avia-selected-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22white%22%3E%3Cpath%20d%3D%22M20.285%202l-11.285%2011.567-5.286-5.011-3.714%203.716%209%208.728%2015-15.285z%22%2F%3E%3C%2Fsvg%3E');--avia-time-height:48px;--avia-time-width:86px;--avia-time-line-height:48px;--avia-time-font-size:13px;--avia-time-color:var(--avia-text-color);--avia-time-font-family:var(--avia-font-family);--avia-segment-marker-color:var(--avia-text-color);--avia-segment-marker-height:4px;--avia-segment-marker-width:2px;--avia-ad-progress-color:#ffe83a;--avia-ad-progress-track-color:transparent;--avia-ad-control-bg-color:rgba(0, 0, 0, 0.7);--avia-ad-control-border-radius:4px;--avia-seek-indicator-border-radius:4px;--avia-seek-indicator-background-color:rgba(0, 0, 0, 0.5);--avia-seek-indicator-color:var(--avia-text-color);--avia-seek-indicator-height:48px;--avia-seek-indicator-font-size:20px;--avia-seek-indicator-font-family:var(--avia-font-family);--avia-seek-indicator-line-height:48px;--avia-volume-indicator-border-radius:6px;--avia-volume-indicator-background-color:rgba(0, 0, 0, 0.5);--avia-volume-indicator-width:64px;--avia-volume-indicator-height:64px;--avia-volume-indicator-right:12px;--avia-volume-indicator-bottom:72px;--avia-focus-box-shadow:0 0 2px 3px rgba(247, 228, 85, 0.85);--avia-focus-box-shadow-inner:inset 0 0 2px 3px rgba(247, 228, 85, 0.85);--avia-spinner-image:url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"white\" stroke-width=\"1\" width=\"40\" height=\"40\" fill=\"white\" viewBox=\"0 0 37.84 41\"><path d=\"M18,39.61V32.09a.93.93,0,0,1,.26-.66.85.85,0,0,1,.64-.27.83.83,0,0,1,.63.27.89.89,0,0,1,.26.66v7.52a.91.91,0,0,1-.89.89.85.85,0,0,1-.64-.27.87.87,0,0,1-.26-.62Zm-6.4-10.27a.89.89,0,0,1,.59-.37.82.82,0,0,1,.65.16.79.79,0,0,1,.36.59.94.94,0,0,1-.15.69L8.8,36.47a.8.8,0,0,1-.57.38,1,1,0,0,1-.67-.16.84.84,0,0,1-.36-.59,1,1,0,0,1,.16-.7ZM1.13,25.53,8,23.21a.92.92,0,0,1,.67.05.93.93,0,0,1,.4,1.23,1,1,0,0,1-.52.47L1.64,27.27A.87.87,0,0,1,1,27.22a.82.82,0,0,1-.43-.53,1,1,0,0,1,0-.72.81.81,0,0,1,.54-.44Zm.51-11.8L8.56,16a1,1,0,0,1,.52.47.93.93,0,0,1-.4,1.23.92.92,0,0,1-.67.05L1.13,15.47A.81.81,0,0,1,.59,15a1,1,0,0,1,0-.72A.82.82,0,0,1,1,13.78a.87.87,0,0,1,.67,0ZM8.8,4.53l4.27,6.06a.94.94,0,0,1,.15.69.79.79,0,0,1-.36.59.82.82,0,0,1-.65.16.89.89,0,0,1-.59-.37L7.36,5.6a1,1,0,0,1-.16-.7.84.84,0,0,1,.36-.59,1,1,0,0,1,.67-.16.8.8,0,0,1,.57.38Zm11-3.14V8.91a.89.89,0,0,1-.26.66.83.83,0,0,1-.63.27.85.85,0,0,1-.64-.27A.93.93,0,0,1,18,8.91V1.39a.87.87,0,0,1,.26-.62A.85.85,0,0,1,18.92.5a.83.83,0,0,1,.63.27.83.83,0,0,1,.26.62ZM30.48,5.6l-4.27,6.06a.87.87,0,0,1-.58.37.85.85,0,0,1-.66-.16.86.86,0,0,1-.36-.59,1,1,0,0,1,.16-.69L29,4.53a.76.76,0,0,1,.56-.38.94.94,0,0,1,.67.16.86.86,0,0,1,.37.59,1,1,0,0,1-.16.7Zm6.23,9.87-6.88,2.32a.91.91,0,0,1-.67-.05.93.93,0,0,1-.4-1.23,1,1,0,0,1,.52-.47l6.91-2.31a.87.87,0,0,1,.67,0,.83.83,0,0,1,.44.53,1,1,0,0,1-.06.72.79.79,0,0,1-.53.44Zm-.52,11.8L29.28,25a1,1,0,0,1-.52-.47.93.93,0,0,1,.4-1.23.91.91,0,0,1,.67-.05l6.88,2.32a.79.79,0,0,1,.53.44,1,1,0,0,1,.06.72.83.83,0,0,1-.44.53.87.87,0,0,1-.67.05ZM29,36.47l-4.27-6.06a1,1,0,0,1-.16-.69.86.86,0,0,1,.36-.59.85.85,0,0,1,.66-.16.87.87,0,0,1,.58.37l4.27,6.06a1,1,0,0,1,.16.7.86.86,0,0,1-.37.59.94.94,0,0,1-.67.16.76.76,0,0,1-.56-.38Z\"/></svg>');--avia-spinner-diameter:48px;--avia-active-transition-in:opacity 0.5s ease 0s;--avia-active-transition-out:opacity 0.5s ease 0s;--avia-buffered-range-background-color:rgba(255, 255, 255, 0.20)}avia-ui{color:var(--avia-text-color);font-family:var(--avia-font-family)}avia-ui>*{pointer-events:auto;-webkit-user-select:none;user-select:none}avia-ui,avia-ui avia-accessibility,.avia-layer{pointer-events:none;position:absolute;top:0;left:0;bottom:0;right:0}.avia-layer>*{pointer-events:auto}slot-fb[hidden]{display:none}.avia-ui-hidden{display:none}img.avia-poster-img{width:100%;height:auto}.avia-container,avia-ui:focus,avia-ui button:focus{outline:none}avia-ui.focus-visible,avia-ui .focus-visible{box-shadow:var(--avia-focus-box-shadow)}avia-ui.focus-visible .avia-menu-button,avia-ui .focus-visible.avia-menu-button{box-shadow:var(--avia-focus-box-shadow-inner)}avia-ui:not([active])[fullscreen]{cursor:none}.avia-container.avia-controls-vis video::-webkit-media-text-track-container{bottom:calc(var(--avia-control-bar-height) + 4px);height:auto}.avia-controls{display:flex;flex-direction:column}.avia-spacer{pointer-events:none;flex-grow:1}"}},[4,"avia-ui",{controlMode:[513,"control-mode"],fullscreen:[516],active:[516],deviceMode:[513,"device-mode"],fullscreenDisabled:[4,"fullscreen-disabled"],muted:[4],muteDisabled:[4,"mute-disabled"],volume:[2],playing:[4],playDisabled:[4,"play-disabled"],textTrackEnabled:[4,"text-track-enabled"],textDisabled:[4,"text-disabled"],timeDisplayValue:[1,"time-display-value"],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"],live:[4],playheadPosition:[2,"playhead-position"],durationSeconds:[2,"duration-seconds"],currentTimeSeconds:[2,"current-time-seconds"],seekDisabled:[4,"seek-disabled"],seekBackDisabled:[4,"seek-back-disabled"],seekForwardDisabled:[4,"seek-forward-disabled"],settingsDisabled:[4,"settings-disabled"],adPlayheadPosition:[2,"ad-playhead-position"],segmentBreakPositions:[1,"segment-break-positions"],localeData:[16],preview:[16],accIndicatorState:[16],unmuteCtaVisible:[4,"unmute-cta-visible"],settings:[16],posterActive:[4,"poster-active"],posterImageUrl:[1,"poster-image-url"],qualityLabel:[2,"quality-label"],waiting:[4],initialized:[4],pausable:[4],isTouch:[4,"is-touch"],isIosNative:[4,"is-ios-native"],linkMuteAndVolume:[4,"link-mute-and-volume"],playerDimensions:[16],bufferedRanges:[16]},[[0,"action","handleAction"]]]),Hi=J(Zt,[0,"avia-unmute-cta",{muted:[4],unmuteCtaVisible:[4,"unmute-cta-visible"],isTouch:[4,"is-touch"]}]),Wi=J(Jt,[0,"avia-volume-indicator",{volume:[2],accIndicatorState:[16]}]),ji=J(ei,[0,"avia-volume-slider",{volume:[2],muted:[4],linkMuteAndVolume:[4,"link-mute-and-volume"],playerDimensions:[16],durationSeconds:[2,"duration-seconds"]}]),$i=J(ti,[0,"avia-waiting-overlay",{waiting:[4]}]),Ki=e=>{"undefined"!=typeof customElements&&[ii,ni,ai,ri,oi,si,li,ui,ci,di,hi,fi,pi,vi,gi,mi,yi,Ai,ki,bi,Ei,Si,Ti,wi,xi,Ci,_i,Pi,Ii,Ni,Li,Mi,Ri,Di,Oi,Bi,Ui,Fi,Vi,Hi,Wi,ji,$i].forEach(t=>{customElements.get(t.is)||customElements.define(t.is,t,e)})};Ki()}.call(this,i(37))},function(e,t,i){e.exports=function(){"use strict";var e={};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return e},set exports(t){e=t}});var t,i,n,a,r={},o={get exports(){return r},set exports(e){r=e}},s={},l={get exports(){return s},set exports(e){s=e}};function u(){return t||(t=1,function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(l)),s}var c,d,h,f,p={},v={get exports(){return p},set exports(e){p=e}},g={},m={get exports(){return g},set exports(e){g=e}},y={},A={get exports(){return y},set exports(e){y=e}},k={},b={get exports(){return k},set exports(e){k=e}};var E,S={},T={get exports(){return S},set exports(e){S=e}};function w(){return E||(E=1,(e=T).exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports),S;var e}var x,C,_,P={},I={get exports(){return P},set exports(e){P=e}},N={},L={get exports(){return N},set exports(e){N=e}},M={},R={get exports(){return M},set exports(e){M=e}};function D(){return x||(x=1,function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(R)),M}var O,B,U,F={},V={get exports(){return F},set exports(e){F=e}},H={},W={get exports(){return H},set exports(e){H=e}},j={},$={get exports(){return j},set exports(e){j=e}},K=e,G=K(function(){if(a)return n;a=1;var e=(i||(i=1,function(e){var t=u().default;function i(){e.exports=i=function(){return a},e.exports.__esModule=!0,e.exports.default=e.exports;var n,a={},r=Object.prototype,o=r.hasOwnProperty,s=Object.defineProperty||function(e,t,i){e[t]=i.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(n){h=function(e,t,i){return e[t]=i}}function f(e,t,i,n){var a=t&&t.prototype instanceof A?t:A,r=Object.create(a.prototype),o=new L(n||[]);return s(r,"_invoke",{value:_(e,i,o)}),r}function p(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}a.wrap=f;var v="suspendedStart",g="executing",m="completed",y={};function A(){}function k(){}function b(){}var E={};h(E,u,function(){return this});var S=Object.getPrototypeOf,T=S&&S(S(M([])));T&&T!==r&&o.call(T,u)&&(E=T);var w=b.prototype=A.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function C(e,i){function n(a,r,s,l){var u=p(e[a],e,r);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&o.call(d,"__await")?i.resolve(d.__await).then(function(e){n("next",e,s,l)},function(e){n("throw",e,s,l)}):i.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,l)})}l(u.arg)}var a;s(this,"_invoke",{value:function(e,t){function r(){return new i(function(i,a){n(e,t,i,a)})}return a=a?a.then(r,r):r()}})}function _(e,t,i){var a=v;return function(r,o){if(a===g)throw new Error("Generator is already running");if(a===m){if("throw"===r)throw o;return{value:n,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=P(s,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===v)throw a=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=g;var u=p(e,t,i);if("normal"===u.type){if(a=i.done?m:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(a=m,i.method="throw",i.arg=u.arg)}}}function P(e,t){var i=t.method,a=e.iterator[i];if(a===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var r=p(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,y;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(e){if(e||""===e){var i=e[u];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(o.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=n,t.done=!0,t};return r.next=r}}throw new TypeError(t(e)+" is not iterable")}return k.prototype=b,s(w,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:k,configurable:!0}),k.displayName=h(b,d,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,d,"GeneratorFunction")),e.prototype=Object.create(w),e},a.awrap=function(e){return{__await:e}},x(C.prototype),h(C.prototype,c,function(){return this}),a.AsyncIterator=C,a.async=function(e,t,i,n,r){void 0===r&&(r=Promise);var o=new C(f(e,t,i,n),r);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(w),h(w,d,"Generator"),h(w,u,function(){return this}),h(w,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},a.values=M,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,a){return s.type="throw",s.arg=e,t.next=i,a&&(t.method="next",t.arg=n),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),u=o.call(r,"finallyLoc");if(l&&u){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),N(i),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var a=n.arg;N(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:M(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),y}},a}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(o)),r)();n=e;try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return n}()),q=K((c||(c=1,function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(v)),p)),z=K((f||(f=1,function(e){var t=function(){return h||(h=1,e=A,t=u().default,d||(d=1,function(e){var t=u().default;e.exports=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,i||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(b)),i=k,e.exports=function(e){var n=i(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports),y;var e,t,i}();function i(e,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t(a.key),a)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(m)),g)),Y=K(w()),Q=K((_||(_=1,function(e){var t=(C||(C=1,function(e){var t=D();e.exports=function(e,i){for(;!Object.prototype.hasOwnProperty.call(e,i)&&null!==(e=t(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}(L)),N);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,i,n){var a=t(e,i);if(a){var r=Object.getOwnPropertyDescriptor(a,i);return r.get?r.get.call(arguments.length<3?e:n):r.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(I)),P)),X=K((B||(B=1,function(e){var t=(O||(O=1,function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(W)),H);e.exports=function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),i&&t(e,i)},e.exports.__esModule=!0,e.exports.default=e.exports}(V)),F)),Z=K((U||(U=1,function(e){var t=u().default,i=w();e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports}($)),j)),J=K(D()),ee=K(u());function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=(0,J.default)(e);if(t){var a=(0,J.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,Z.default)(this,i)}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var ne=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,re=Object.getOwnPropertyNames,oe=Object.prototype.hasOwnProperty,se=function(e,t,i){return new Promise(function(n,a){var r=function(e){try{s(i.next(e))}catch(e){a(e)}},o=function(e){try{s(i.throw(e))}catch(e){a(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(r,o)};s((i=i.apply(e,t)).next())})},le={};!function(e,t){for(var i in t)ne(e,i,{get:t[i],enumerable:!0})}(le,{HLSJS:function(){return de},ID:function(){return me},createAdapter:function(){return ye},createHlsjsAdapter:function(){return pe},createHlsjsPlugin:function(){return ve},createPlugin:function(){return Ae},hlsjs:function(){return ge},isHlsjsSupported:function(){return fe},isSupported:function(){return ke},plugin:function(){return be}});var ue,ce=(ue=le,function(e,t,i,n){if(t&&"object"===(0,ee.default)(t)||"function"==typeof t){var a,r=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ie(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ie(e,t):void 0}}(e))){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(re(t));try{var o=function(){var i=a.value;oe.call(e,i)||void 0===i||ne(e,i,{get:function(){return t[i]},enumerable:!(n=ae(t,i))||n.enumerable})};for(r.s();!(a=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}return e}(ne({},"__esModule",{value:!0}),ue)),de="hlsjs",he="avia-load-error";function fe(e){var t,i,n=e.avia,a=e.resource,r=e.system,o=n.Browser,s=n.MimeType,l=n.Os,u=n.PlaybackAdapterBase,c=n.Util,d=r.browser===o.SAFARI,h=c.getResourceMimeType(a),f=[s.HLS,s.HLS_ALT],p=f.includes(h),v=!c.isEmpty(null==(i=null==(t=a.location.drm)?void 0:t.fairplay)?void 0:i.appCertUrl);if(p&&v)return!1;var g=r.os===l.ANDROID,m=r.osVersionInfo;if(p&&!v&&g&&m.majorVersion<5)return!1;var y=r.os===l.IOS;return!(p&&y&&!d)&&u.canPlay(e,f)}function pe(e,t){return se(this,null,G.default.mark(function i(){var n,a,r,o,s,l,u,c,d,h,f,p,v,g,m,y,A,k,b,E,S,T;return G.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=e.avia,r=e.resource,o=e.system,s=e.playerOptions,l=a.AudioTrackType,u=a.ErrorCode,c=a.PlayerHookType,d=a.PlayerError,h=a.PlaybackAdapterBase,f=a.RequestObjectType,p=a.Util,o.global.Hls){i.next=11;break}return i.prev=3,i.next=6,p.loadScript({url:(null==(n=t.dependencies)?void 0:n.hlsjs)||"//cdnjs.cloudflare.com/ajax/libs/hls.js/1.4.10/hls.min.js"},e.playerOptions,function(){return o.global.Hls});case 6:i.next=11;break;case 8:throw i.prev=8,i.t0=i.catch(3),new d(u.HLS_SDK_MISSING,"Could not load hls.js SDK",i.t0);case 11:return v=o.global.Hls,g=a.Browser,m=a.ErrorMessage,y=a.Header,A=a.LogLevel,k=a.PerformanceMode,b=a.RequestCredentials,E=a.TextTrackMode,S=a.waitForEvent,T=function(e){(0,X.default)(i,e);var t=te(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,q.default)(this,i),(n=t.call(this,e,a,!1)).isLiveStream=!1,n.totalDuration=0,n.framerate=NaN,n.bandwidth=NaN,n.qualityInterval=NaN,n.withCredentials=!1,n.minAutoLevel=NaN,n.maxAutoLevel=NaN,n.normalizeQuality=function(e,t){return{index:t,bitrate:e.bitrate,width:e.width,height:e.height,codec:e.attrs?e.attrs.CODECS:void 0,enabled:p.validateQuality(e,n.minBitrate,n.maxBitrate,n.maxHeight,n.player.capLevelToPlayerSize&&n.video)}},n.onLevelLoaded=function(e,t){var i=t.details;n.isLiveStream=i.live,n.segmentDuration=i.averagetargetduration,n.totalDuration=i.totalduration},n.onLevelSwitched=function(e,t){var i=t.level,a=Math.min(i,n.player.maxAutoLevel);n.quality=n.qualities.find(function(e){return e.index===a}),n.delegate.qualityChange(n.quality)},n.onFragLoaded=function(e,t){var i=t.frag.stats;n.bandwidth=i.bwEstimate},n.onSubtitleTracksUpdated=function(e,t){var i=t.subtitleTracks.filter(function(e){return!e.forced}).map(function(e,t){var i;return{id:(null==(i=e.id)?void 0:i.toString())||t.toString(),language:e.lang,kind:e.type.toLowerCase(),label:e.name||e.lang,default:e.default}});n.textTracks=i,i.find(function(e){return e.default})||n.selectSubtitles(p.findDefaultTrack(i,n.context.textTrackSettings.language)),n.delegate.textTracksChange(n.textTracks)},n.onSubtitleTrackSwitch=function(e,t){var i=t.id.toString(),a=n.textTracks.find(function(e){return e.id===i});-1!==t.id&&a&&n.textTrack!==a&&n.selectSubtitles(a)},n.onAudioTracksUpdated=function(e,t){if(n.audioTracks=n.player.audioTracks.map(function(e,t){var i;return{index:t,id:null==(i=e.id)?void 0:i.toString(),type:"public.accessibility.describes-video"===e.attrs.CHARACTERISTICS?l.DESCRIPTION:l.MAIN,language:e.lang,codec:e.audioCodec,label:e.name||e.lang,default:e.default}}),n.audioTrack=n.audioTracks[n.player.audioTrack],n.delegate.audioTracksChange(n.audioTracks),-1===n.player.audioTrack){var i=p.findDefaultTrack(n.audioTracks,s.audioLanguage);i&&(n.player.audioTrack=i.index)}},n.onAudioTrackSwitched=function(e,t){n.delegate.audioTrackChange(n.audioTracks[t.id])},n.onLoadError=function(e,t){var i=t.fatal,a=n.processError(t);i?n.player.emit(he,he,a):n.error(a)},n.onError=function(e,t){n.error(n.processError(t))},n.logger.log(A.INFO,"hls.js version: ".concat(v.version));var u=e.performanceSettings,c=e.textTrackSettings,d=r.playback,h=v.DefaultConfig,m=o.browser===g.PLAYSTATION_4_MSE?1/0:u.backBufferLength,y=p.merge({debug:a.debug,autoStartLoad:!1,liveSyncDurationCount:d.liveEdgeSyncFragmentCount,maxBufferLength:u.forwardBufferLength||h.maxBufferLength,backBufferLength:m,maxMaxBufferLength:u.topQualityForwardBufferLength||h.maxMaxBufferLength,manifestLoadingMaxRetry:2,manifestLoadingRetryDelay:1e3,levelLoadingRetryDelay:500,fragLoadingRetryDelay:500,cmcd:r.cmcd.enabled?r.cmcd:null,capLevelToPlayerSize:!Number.isFinite(n.maxHeight)&&d.abr.capQualityToScreenSize,pLoader:n.createLoader((0,Y.default)(n),f.MANIFEST),fLoader:n.createLoader((0,Y.default)(n),f.SEGMENT),loader:n.createLoader((0,Y.default)(n),f.OTHER),ignoreDevicePixelRatio:d.abr.ignoreDevicePixelRatio},a.config);u.mode===k.LOW&&(Object.assign(y,{maxBufferSize:2e7,liveSyncDurationCount:6,stretchShortVideoTrack:!0,maxBufferHole:2.5,maxStarvationDelay:10,highBufferWatchdogPeriod:5,maxFragLookUpTolerance:2.5,nudgeOffset:.25,nudgeMaxRetry:5}),d.liveEdgeSyncFragmentCount=y.liveSyncDurationCount);var b=y.xhrSetup;y.xhrSetup=function(e,t){e.withCredentials=n.withCredentials,null==b||b(e,t)};var E=n.player=new v(y);E.subtitleDisplay=c.native;var S=v.Events;return E.on(S.LEVEL_LOADED,n.onLevelLoaded),E.on(S.LEVEL_SWITCHED,n.onLevelSwitched),E.on(S.FRAG_LOADED,n.onFragLoaded),E.on(S.SUBTITLE_TRACKS_UPDATED,n.onSubtitleTracksUpdated),E.on(S.SUBTITLE_TRACK_SWITCH,n.onSubtitleTrackSwitch),E.on(S.AUDIO_TRACKS_UPDATED,n.onAudioTracksUpdated),E.on(S.AUDIO_TRACK_SWITCHED,n.onAudioTrackSwitched),n}return(0,z.default)(i,[{key:"getId",value:function(){return de}},{key:"destroy",value:function(){var e=this;o.global.clearInterval(this.qualityInterval);var t=S(this.player,v.Events.MEDIA_DETACHING);return this.player.destroy(),t.then(function(){return e.player=null,(0,Q.default)((0,J.default)(i.prototype),"destroy",e).call(e)})}},{key:"createLoader",value:function(e,t){return function(i){(0,X.default)(a,i);var n=te(a);function a(){return(0,q.default)(this,a),n.apply(this,arguments)}return(0,z.default)(a,[{key:"load",value:function(i,n,r){var o=this,s=i.url,l=i.headers,u=void 0===l?{}:l,d=e.context.resource.location.drm.aes,h=!p.isEmpty(d)&&s.includes(d.provider)&&d.header;return Promise.resolve().then(function(){var e=s.includes("akamaihd")&&s.includes("csmil")?b.INCLUDE:b.SAME_ORIGIN,t=p.createRequest(s,u,e);return h&&Object.assign(u,d.header),t}).then(function(i){if(e.delegate.hasHook(c.REQUEST)){var n={objectType:h?f.KEY:t};return e.delegate.applyHook(c.REQUEST,i,n)}return i}).then(function(t){Object.assign(i,t),e.withCredentials=t.credentials===b.INCLUDE;var n=r.onSuccess;r.onSuccess=function(t,i,a,r){return se(o,null,G.default.mark(function o(){var s;return G.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e.delegate){o.next=2;break}return o.abrupt("return");case 2:if(!e.delegate.hasHook(c.RESPONSE)){o.next=6;break}return o.next=5,e.delegate.applyHook(c.RESPONSE,t);case 5:t=o.sent;case 6:t.url.includes(".ts")&&null!=(s=p.getHeader(y.MULTI_CDN,r.getAllResponseHeaders()))&&e.delegate.cdnChange(s),n(t,i,a,r);case 8:case"end":return o.stop()}},o)}))}}).then(function(){(0,Q.default)((0,J.default)(a.prototype),"load",o).call(o,i,n,r)})}}]),a}(v.DefaultConfig.loader)}},{key:"load",value:function(){var e=this;return(0,Q.default)((0,J.default)(i.prototype),"load",this).call(this).then(function(t){return se(e,null,G.default.mark(function e(){var i,n,a;return G.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.player.on(v.Events.ERROR,this.onLoadError),this.player.attachMedia(this.video),e.next=4,S(this.player,v.Events.MEDIA_ATTACHED,he);case 4:return this.player.loadSource(r.location.mediaUrl),e.next=7,S(this.player,v.Events.MANIFEST_LOADED,he);case 7:return i=e.sent,this.initQualityInfo(),this.initNativeTextTracks(i),n=r.playback.startTime,this.player.startLoad(p.isValidPlayheadTime(n)?n:-1),this.setBitrateRestrictionAtStartup(),e.next=15,S(this.player,v.Events.FRAG_LOADING,he);case 15:return a=e.sent,this.player.off(v.Events.ERROR,this.onLoadError),this.player.on(v.Events.ERROR,this.onError),this.suppressErrors=!1,t.fragment.mimeType=p.getMimeType(a.frag.url),e.abrupt("return",t);case 21:case"end":return e.stop()}},e,this)}))})}},{key:"suspend",value:function(){this.player.stopLoad()}},{key:"resume",value:function(){this.player.startLoad()}},{key:"setTextTrack",value:function(e){e&&(this.textTrackSurface?(0,Q.default)((0,J.default)(i.prototype),"setTextTrack",this).call(this,e):this.player.subtitleTrack=parseInt(e.id))}},{key:"setTextTrackMode",value:function(e){this.textTrackSurface?(0,Q.default)((0,J.default)(i.prototype),"setTextTrackMode",this).call(this,e):(this.enabledSubtitles(e),this.delegate.textTrackDisplayModeChange(e))}},{key:"setMinBitrate",value:function(e){(0,Q.default)((0,J.default)(i.prototype),"setMinBitrate",this).call(this,e),this.player.config.minAutoBitrate=e-1,this.updateQualityInfo()}},{key:"setMaxBitrate",value:function(e){(0,Q.default)((0,J.default)(i.prototype),"setMaxBitrate",this).call(this,e);var t=isNaN(e)||!Number.isFinite(e);this.player.capLevelToPlayerSize=!!t&&r.playback.abr.capQualityToScreenSize,this.player.autoLevelCapping=t?-1:p.getMaxBitrateIndex(this.player.levels,e),this.updateQualityInfo()}},{key:"setAutoQualitySwitching",value:function(e){this.player.loadLevel=e?-1:this.player.nextLoadLevel}},{key:"setQuality",value:function(e){this.player.loadLevel=e.index}},{key:"setAudioTrack",value:function(e){e?(this.player.audioTrack=e.index,this.enabledSubtitles()):this.logger.log(A.INFO,"hls.js: Audio track is null, will not set.")}},{key:"getIsLiveStream",value:function(){return this.isLiveStream}},{key:"getMetrics",value:function(){return{droppedVideoFrames:NaN,framerate:this.framerate,bandwidth:this.bandwidth}}},{key:"resize",value:function(){this.setBitrateRestrictionAtStartup()}},{key:"getSeekable",value:function(){var e=this.video.duration;return{start:this.getIsLiveStream()?e-this.totalDuration:0,end:e}}},{key:"onCueChange",value:function(e){(0,Q.default)((0,J.default)(i.prototype),"onCueChange",this).call(this,e,this.player.subtitleTracks[this.player.subtitleTrack].forced)}},{key:"initQualityInfo",value:function(){var e=this;this.qualityInterval=o.global.setInterval(function(){var t=e.player,i=t.minAutoLevel,n=t.maxAutoLevel;i===e.minAutoLevel&&n===e.maxAutoLevel||(e.minAutoLevel=i,e.maxAutoLevel=n,e.updateQualityInfo())},250),this.updateQualityInfo()}},{key:"updateQualityInfo",value:function(){this.qualities=this.player.levels.map(this.normalizeQuality),this.updateQualities()}},{key:"initNativeTextTracks",value:function(e){var t,i=null==(t=e.subtitles)?void 0:t.length,n=this.context.resource.location.textTrackUrl;if(i)return n&&this.logger.warn("Detected subtitles in the manifest. Ignoring resource's textTrackUrl"),void(e.captions&&this.logger.warn("Detected subtitles in the manifest. Ignoring manifest captions"));this.textTrackSurface=this.createTextTrackSurface()}},{key:"selectSubtitles",value:function(e){this.textTrack=e,this.delegate.textTrackChange(e),this.enabledSubtitles()}},{key:"enabledSubtitles",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context.textTrackSettings.mode)!==E.DISABLED)this.listenToTextTracks(!0),this.setTextTrack(this.textTrack);else{var e=this.player.audioTracks[this.player.audioTrack],t=-1;if(e){var i=e.lang;t=this.player.subtitleTracks.findIndex(function(e){return e.forced&&e.lang===i})}this.listenToTextTracks(-1!==t),this.player.subtitleTrack=t}}},{key:"setBitrateRestrictionAtStartup",value:function(){Number.isFinite(this.minBitrate)&&this.setMinBitrate(Math.max(this.minBitrate-1,0)),Number.isFinite(this.maxBitrate)&&this.setMaxBitrate(this.maxBitrate);var e=r.playback.abr.startBitrate;if(Number.isFinite(e)&&(this.player.config.startLevel=p.getMaxBitrateIndex(this.player.levels,e)),Number.isFinite(this.maxHeight)){var t=p.getMaxIndexForHeight(this.player.levels,this.maxHeight);isNaN(t)||(this.player.capLevelToPlayerSize=!1,this.player.autoLevelCapping=t)}this.updateQualities()}},{key:"processError",value:function(e){var t=u.UNSPECIFIED_HLSJS_ERROR;switch(e.type){case v.ErrorTypes.NETWORK_ERROR:return this.processNetworkErrors(e);case v.ErrorTypes.MEDIA_ERROR:return this.processMediaErrors(e);case v.ErrorTypes.MUX_ERROR:t=u.HLSJS_MUX_ERROR;default:var i=this.getErrorMessage("".concat(e.details),e.fatal);return this.createError(t,i,e,e.fatal)}}},{key:"processNetworkErrors",value:function(e){var t=v.ErrorDetails,i=e.fatal?m.FATAL_PLAYBACK_NETWORK_ERROR:m.NONFATAL_PLAYBACK_NETWORK_ERROR;switch(e.details){case t.LEVEL_LOAD_ERROR:case t.FRAG_LOAD_ERROR:return this.createError(u.HLSJS_NETWORK_ERROR,i,e,e.fatal);case t.MANIFEST_PARSING_ERROR:return this.createError(u.HLSJS_PARSE_ERROR,"".concat(i," : ").concat(e.details),e,e.fatal);default:return this.createError(u.HLSJS_NETWORK_ERROR,"".concat(i," : ").concat(e.details),e,e.fatal)}}},{key:"processMediaErrors",value:function(e){var t=v.ErrorDetails,i=e.fatal?m.FATAL_PLAYBACK_MEDIA_ERROR:m.NONFATAL_PLAYBACK_MEDIA_ERROR;return e.details===t.MANIFEST_INCOMPATIBLE_CODECS_ERROR?this.createError(u.HLSJS_SRC_NOT_SUPPORTED,"".concat(i," : ").concat(e.details),e,e.fatal):this.createError(u.HLSJS_MEDIA_ERROR,"".concat(i," : ").concat(e.details),e,e.fatal)}}]),i}(h),i.abrupt("return",new T(e,t));case 15:case"end":return i.stop()}},i,null,[[3,8]])}))}function ve(e,t){var i=e.avia;return e.player.registerAdapter({id:de,role:[i.AdapterRole.PLAYBACK],options:t,factory:pe,isSupported:fe}),{getId:function(){return de},destroy:function(){}}}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:de,factory:ve,options:e}}var me=de,ye=pe,Ae=ve,ke=fe,be=ge;return ce}()},function(e,t,i){e.exports=function(){"use strict";var e={};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return e},set exports(t){e=t}});var t,i,n,a,r={},o={get exports(){return r},set exports(e){r=e}},s={},l={get exports(){return s},set exports(e){s=e}};function u(){return t||(t=1,function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(l)),s}var c,d,h,f={},p={get exports(){return f},set exports(e){f=e}},v={},g={get exports(){return v},set exports(e){v=e}},m={},y={get exports(){return m},set exports(e){m=e}};function A(){return c||(c=1,function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(y)),m}var k,b,E,S,T,w,x,C,_={},P={get exports(){return _},set exports(e){_=e}},I={},N={get exports(){return I},set exports(e){I=e}},L={},M={get exports(){return L},set exports(e){L=e}},R={},D={get exports(){return R},set exports(e){R=e}},O={},B={get exports(){return O},set exports(e){O=e}},U={},F={get exports(){return U},set exports(e){U=e}},V={},H={get exports(){return V},set exports(e){V=e}},W={},j={get exports(){return W},set exports(e){W=e}};var $=e,K=$(function(){if(a)return n;a=1;var e=(i||(i=1,function(e){var t=u().default;function i(){e.exports=i=function(){return a},e.exports.__esModule=!0,e.exports.default=e.exports;var n,a={},r=Object.prototype,o=r.hasOwnProperty,s=Object.defineProperty||function(e,t,i){e[t]=i.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(n){h=function(e,t,i){return e[t]=i}}function f(e,t,i,n){var a=t&&t.prototype instanceof A?t:A,r=Object.create(a.prototype),o=new L(n||[]);return s(r,"_invoke",{value:_(e,i,o)}),r}function p(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}a.wrap=f;var v="suspendedStart",g="executing",m="completed",y={};function A(){}function k(){}function b(){}var E={};h(E,u,function(){return this});var S=Object.getPrototypeOf,T=S&&S(S(M([])));T&&T!==r&&o.call(T,u)&&(E=T);var w=b.prototype=A.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function C(e,i){function n(a,r,s,l){var u=p(e[a],e,r);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&o.call(d,"__await")?i.resolve(d.__await).then(function(e){n("next",e,s,l)},function(e){n("throw",e,s,l)}):i.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,l)})}l(u.arg)}var a;s(this,"_invoke",{value:function(e,t){function r(){return new i(function(i,a){n(e,t,i,a)})}return a=a?a.then(r,r):r()}})}function _(e,t,i){var a=v;return function(r,o){if(a===g)throw new Error("Generator is already running");if(a===m){if("throw"===r)throw o;return{value:n,done:!0}}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var l=P(s,i);if(l){if(l===y)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===v)throw a=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=g;var u=p(e,t,i);if("normal"===u.type){if(a=i.done?m:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(a=m,i.method="throw",i.arg=u.arg)}}}function P(e,t){var i=t.method,a=e.iterator[i];if(a===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),y;var r=p(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,y;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(e){if(e||""===e){var i=e[u];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(o.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=n,t.done=!0,t};return r.next=r}}throw new TypeError(t(e)+" is not iterable")}return k.prototype=b,s(w,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:k,configurable:!0}),k.displayName=h(b,d,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,d,"GeneratorFunction")),e.prototype=Object.create(w),e},a.awrap=function(e){return{__await:e}},x(C.prototype),h(C.prototype,c,function(){return this}),a.AsyncIterator=C,a.async=function(e,t,i,n,r){void 0===r&&(r=Promise);var o=new C(f(e,t,i,n),r);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(w),h(w,d,"Generator"),h(w,u,function(){return this}),h(w,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},a.values=M,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,a){return s.type="throw",s.arg=e,t.next=i,a&&(t.method="next",t.arg=n),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),u=o.call(r,"finallyLoc");if(l&&u){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),N(i),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var a=n.arg;N(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:M(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),y}},a}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(o)),r)();n=e;try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return n}()),G=$((h||(h=1,function(e){var t=(d||(d=1,function(e){var t=A();e.exports=function(e,i){for(;!Object.prototype.hasOwnProperty.call(e,i)&&null!==(e=t(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}(g)),v);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,i,n){var a=t(e,i);if(a){var r=Object.getOwnPropertyDescriptor(a,i);return r.get?r.get.call(arguments.length<3?e:n):r.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(p)),f)),q=$((b||(b=1,function(e){var t=(k||(k=1,function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(N)),I);e.exports=function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),i&&t(e,i)},e.exports.__esModule=!0,e.exports.default=e.exports}(P)),_)),z=$((S||(S=1,function(e){var t=u().default,i=(E||(E=1,function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}(D)),R);e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(M)),L)),Y=$(A()),Q=$((T||(T=1,function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(B)),O)),X=$((C||(C=1,function(e){var t=function(){return x||(x=1,e=H,t=u().default,w||(w=1,function(e){var t=u().default;e.exports=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,i||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(j)),i=W,e.exports=function(e){var n=i(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports),V;var e,t,i}();function i(e,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t(a.key),a)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(F)),U)),Z=$(u());function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=(0,Y.default)(e);if(t){var a=(0,Y.default)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,z.default)(this,i)}}function ee(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return te(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?te(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var ie=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,ae=Object.getOwnPropertyNames,re=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,le=function(e,t,i){return t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i},ue=function(e,t){for(var i in t||(t={}))oe.call(t,i)&&le(e,i,t[i]);if(re){var n,a=ee(re(t));try{for(a.s();!(n=a.n()).done;)i=n.value,se.call(t,i)&&le(e,i,t[i])}catch(e){a.e(e)}finally{a.f()}}return e},ce=function(e,t,i){return new Promise(function(n,a){var r=function(e){try{s(i.next(e))}catch(e){a(e)}},o=function(e){try{s(i.throw(e))}catch(e){a(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(r,o)};s((i=i.apply(e,t)).next())})},de={};!function(e,t){for(var i in t)ie(e,i,{get:t[i],enumerable:!0})}(de,{GAM:function(){return je},ID:function(){return Ge},createGamPlugin:function(){return Ke},createPlugin:function(){return qe},gam:function(){return $e},plugin:function(){return ze}});var he,fe=(he=de,function(e,t,i,n){if(t&&"object"===(0,Z.default)(t)||"function"==typeof t){var a,r=ee(ae(t));try{var o=function(){var i=a.value;oe.call(e,i)||void 0===i||ie(e,i,{get:function(){return t[i]},enumerable:!(n=ne(t,i))||n.enumerable})};for(r.s();!(a=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}return e}(ie({},"__esModule",{value:!0}),he)),pe=function(){function e(t){(0,Q.default)(this,e),this.req=t}return(0,X.default)(e,[{key:"adTagParameters",get:function(){return this.req.adTagParameters},set:function(e){this.req.adTagParameters=e}},{key:"apiKey",get:function(){return this.req.apiKey},set:function(e){this.req.apiKey=e}},{key:"authToken",get:function(){return this.req.authToken},set:function(e){this.req.authToken=e}},{key:"format",get:function(){return this.req.format||"hls"},set:function(e){this.req.format=e}},{key:"assetKey",get:function(){return this.req.assetKey},set:function(e){this.req.assetKey=e}}]),e}(),ve=function(){function e(t,i,n,a){(0,Q.default)(this,e),this.ad=null,this.type=t,this.data=n,this.detail=this.data,this.target=i,a&&(this.ad=a)}return(0,X.default)(e,[{key:"Type",get:function(){return e.Type}},{key:"getAd",value:function(){return this.ad}},{key:"getStreamData",value:function(){return this.data}}]),e}();ve.Type={LOADED:"loaded",AD_BREAK_STARTED:"adBreakStarted",AD_BREAK_ENDED:"adBreakEnded",STARTED:"started",COMPLETE:"complete",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",AD_PERIOD_STARTED:"adPeriodStarted",AD_PERIOD_ENDED:"adPeriodEnded",CUEPOINTS_CHANGED:"cuePointsChanged",STREAM_INITIALIZED:"streamInitialized",SKIPPED:"adskipped",SKIPPABLE_STATE_CHANGED:"skippablestatechanged",ERROR:"error",AD_PROGRESS:"adProgress",CLICK:"click"};var ge=function(){function e(t,i){(0,Q.default)(this,e),this.data=t,this.podInfo=i}return(0,X.default)(e,[{key:"getAdId",value:function(){return this.data.ad_id}},{key:"getAdPodInfo",value:function(){return this.podInfo}},{key:"getAdSystem",value:function(){return this.data.advertiser||null}},{key:"getAdvertiserName",value:function(){return this.data.advertiser||null}},{key:"getApiFramework",value:function(){return null}},{key:"getCreativeAdId",value:function(){return this.data.creative_ad_id}},{key:"getCreativeId",value:function(){return this.data.creative_id}},{key:"getDealId",value:function(){return this.data.deal_id||null}},{key:"getDescription",value:function(){return this.data.description}},{key:"getDuration",value:function(){return this.data.duration}},{key:"getTitle",value:function(){return this.data.title}},{key:"getDaiWrapperData",value:function(){var e=null,t=null,i=null;if(this.data.wrappers&&this.data.wrappers[0]){var n=this.data.wrappers[0];e=n.ad_id,t=n.creative_id,i=n.creative_ad_id}return{adId:e,creativeId:t,creativeAdId:i}}},{key:"getWrapperAdIds",value:function(){return this.getWrapperPropArray("ad_id")}},{key:"getWrapperCreativeIds",value:function(){return this.getWrapperPropArray("creative_id")}},{key:"getWrapperCreativeAdIds",value:function(){return this.getWrapperPropArray("creative_ad_id")}},{key:"getWrapperAdSystems",value:function(){return this.getWrapperPropArray("system")}},{key:"getCompanionAds",value:function(){return null}},{key:"getWrapperPropArray",value:function(e){var t,i=[],n=this.data.wrappers||null;if(!n)return null;for(var a=0,r=n.length;a<r;a++)(t=n[a][e])&&""!==t&&i.push(t);return i}}]),e}(),me=function(){function e(t,i,n){(0,Q.default)(this,e),this.data=t,this.podIdx=n,this.pos=i}return(0,X.default)(e,[{key:"getAdPosition",value:function(){return this.pos}},{key:"setAdPosition",value:function(e){this.pos=e}},{key:"getMaxDuration",value:function(){var e;return null==(e=this.data)?void 0:e.duration}},{key:"getPodIndex",value:function(){return this.podIdx}},{key:"setPodIndex",value:function(e){this.podIdx=e}},{key:"getTimeOffset",value:function(){return this.data.start}},{key:"getTotalAds",value:function(){return this.data.ads&&this.data.ads.length}}]),e}(),ye=function(){function e(t,i,n,a){(0,Q.default)(this,e),this.eventStatusMap={start:e.event.STARTED,firstquartile:e.event.FIRST_QUARTILE,midpoint:e.event.MIDPOINT,thirdquartile:e.event.THIRD_QUARTILE,complete:e.event.COMPLETE},this.adBreaks=[],this.currBreak=null,this.liveBreakInProgress=!1,this.currBreakIndex=null,this.currAd=null,this.currAdTzero=null,this.breakStatus={},this.breakPoints=[],this.pollId=null,this.lastRecordedTime=-1,this.playedAds=[],this.liveMetadata={},this.idCache=[],this.aviaSdk=a,this.emitter=new this.aviaSdk.Emitter,this.currEventStatus=this.createEventStatus(),this.currBreakIndex=null,this.vidIface=t,this.logger=n,this.setClickElement(i)}return(0,X.default)(e,[{key:"skipCurrentAd",value:function(){var e=(this.currAd.start||0)+this.currAd.duration;return this.resetUponAdComplete(),e}},{key:"addEventListener",value:function(e,t){this.emitter.on(e,t)}},{key:"removeEventListener",value:function(e,t){this.emitter.off(e,t)}},{key:"requestStream",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.assetKey)return this.isLive=!0,void this.requestLiveStream(e,i);e.apiKey&&(e.adTagParameters["api-key"]=e.apiKey),e.authToken&&(e.adTagParameters["auth-token"]=e.authToken),this.aviaSdk.Util.request({method:this.aviaSdk.RequestMethod.POST,errorRecovery:i,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:this.getUrl(e),data:e.adTagParameters,responseType:this.aviaSdk.ResponseType.JSON}).then(function(e){t.gatherStreamInfo(e),t.emitCues(),t.beginPoll(),t.emitLoaded(e)}).catch(function(e){var i="Error. Status: ".concat(e.status||"Unknown","; Message: ").concat(e.message);t.logger.log(t.aviaSdk.LogLevel.ERROR,i),t.emitError(i,t.aviaSdk.ErrorCode.DAI_NETWORK_ERROR)})}},{key:"requestLiveStream",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.aviaSdk.request({method:this.aviaSdk.RequestMethod.POST,errorRecovery:i,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:this.getUrl(e),data:e.adTagParameters}).then(function(e){if(e.stream_manifest)if(t.mediaVerificationUrl=e.media_verification_url,t.streamId=e.stream_id,t.emitLoaded(e),e.metadata_url){var i=1e3*e.polling_frequency;!function n(){clearTimeout(t.liveMetadataPollTimeout),t.aviaSdk.request({url:e.metadata_url,responseType:t.aviaSdk.ResponseType.JSON}).then(function(e){t.aviaSdk.Util.isEmpty(e.tags)||(t.liveMetadata={tags:ue(ue({},t.liveMetadata.tags),e.tags),ads:ue(ue({},t.liveMetadata.ads),e.ads),ad_breaks:ue(ue({},t.liveMetadata.ad_breaks),e.ad_breaks)})}).catch(function(e){t.aviaSdk.Logger.warn("DAI API StreamManager: polling error: ".concat(e))}).then(function(){t.liveMetadataPollTimeout=setTimeout(n,i)})}()}else t.aviaSdk.Logger.warn("DAI API StreamManager: metadata_url not found in API response");else t.emitError("DAI API: Stream manifest not found in response",t.aviaSdk.ErrorCode.DAI_DATA_ERROR)}).catch(function(e){t.emitError("DAI API live stream request error",t.aviaSdk.ErrorCode.DAI_NETWORK_ERROR)})}},{key:"setClickElement",value:function(e){var t=this;e&&(this.clickEl=e||null,this.clickThruHandler=function(){t.hClickThru()},this.clickEl.addEventListener("click",this.clickThruHandler))}},{key:"contentTimeForStreamTime",value:function(e){var t,i=this.adBreaks,n=0;void 0===e&&(e=this.streamDur);for(var a=0,r=i.length;a<r;a++){if(!(e>(t=i[a]).start))return e-n;if(!(e>=t.end))return t.start-n;if(n+=t.duration,a===r-1)return e-n}return e}},{key:"streamTimeForContentTime",value:function(e){for(var t,i=this.adBreaks,n=0,a=0,r=i.length;a<r&&(t=i[a],e>=this.contentTimeForStreamTime(i[a].start));a++)n+=t.duration;return e+n}},{key:"previousCuePointForStreamTime",value:function(e){for(var t,i=this.adBreaks,n=i.length;n--;)if(e>=(t=i[n]).start)return t.played?null:this.cuePointFromBreak(t);return null}},{key:"onTimedMetadata",value:function(e){var t=this;if(this.isLive)this.processLiveMetadata(e);else{var i=e.TXXX;this.idCache.includes(i)||(this.idCache.push(i),this.aviaSdk.request({url:this.mediaVerificationUrl+i,responseType:this.aviaSdk.ResponseType.JSON}).catch(function(e){t.logger.warn("Dropped verification request for ".concat(i||"null"))}))}}},{key:"processMetadata",value:function(){}},{key:"reset",value:function(){clearTimeout(this.liveMetadataPollTimeout),clearInterval(this.pollId),this.clickEl&&this.clickEl.removeEventListener("click",this.clickThruHandler),this.clickEl=null,this.streamId=null,this.adBreaks=[],this.breakPoints=[],this.streamDur=NaN,this.currBreak=null,this.currBreakIndex=null,this.liveBreakInProgress=!1,this.currAd=null,this.mediaVerificationUrl=null,this.resetUponAdComplete(),this.lastRecordedTime=-1,this.pollId=null,this.liveMetadata=null}},{key:"processLiveMetadata",value:function(e){var t,i,n,a=this,r=e.TXXX,o=this.liveMetadata,s=o&&(null==(t=Object.keys(o.tags||{}))?void 0:t.find(function(e){return r.includes(e)}));if(s){var l=o.tags[s],u=l.type,c=l.ad_break_id,d=o.ad_breaks[c].ads,h=o.ads[l.ad],f={firstquartile:"first",midpoint:"mid",thirdquartile:"third",start:"start",complete:"complete"};if(this.hasPlayed(h.ad_id))"complete"===u&&d&&(null==h?void 0:h.position)===d&&(this.resetUponAdComplete(),this.endBreak());else{var p=this.currEventStatus,v=function(e,t){p[f[t]]=!0,a.aviaSdk.request({url:a.mediaVerificationUrl+e,responseType:a.aviaSdk.ResponseType.JSON}).catch(function(e){"Unable to parse response."!==e.message&&a.logger.warn("DAI media verification error: ".concat(e.message))})};if("start"!==u||p[f[u]])if("complete"!==u||p[f[u]]){if(this.currAd&&(u.includes("mid")||u.includes("quartile"))&&this.eventStatusMap[u]&&!p[f[u]])this.emit(this.eventStatusMap[u],this.createStreamData({})),v(r,u);else if("progress"===u&&(null==h?void 0:h.ad_id)&&!this.hasPlayed(null==h?void 0:h.ad_id)){var g=(null==(n=this.currAd)?void 0:n.duration)?.001*(Date.now()-this.currAdTzero):0;this.emitProgress(g)}}else(null==(i=this.currAd)?void 0:i.duration)&&this.emitProgress(null),this.currAd&&(this.markAsPlayed(h.ad_id),this.emitAdComplete(),v(r,u)),this.resetUponAdComplete(),h.position===d&&this.endBreak();else{if(!this.liveBreakInProgress){var m=o.ad_breaks[c],y={adsTotal:m.ads,type:m.type,duration:m.duration};this.beginBreak(y)}this.beginAd(h,h.ad_id),v(r,u)}}}else this.logger.warn("ID ".concat(r," not found in metadata.tags"))}},{key:"markAsPlayed",value:function(e){this.playedAds.push(e)}},{key:"hasPlayed",value:function(e){return e&&this.playedAds.indexOf(e)>=0}},{key:"beginPoll",value:function(){var e=this;clearInterval(this.pollId),this.pollId=setInterval(function(){e.checkState()},100)}},{key:"checkState",value:function(){var e=this.vidIface.currentTime;if(!isNaN(e)&&e>0&&e>this.lastRecordedTime){if(!this.currBreak){var t=this.getBreakForStreamTime(e).break;t&&t.played?this.emitAdPeriodStarted(t):t&&(this.currBreak=t,this.beginBreak(t))}if(this.currBreak){var i=this.currBreak;e>=i.end?(this.monitorAdStatus(e,i),this.endBreak()):this.monitorAdStatus(e,i)}}!isNaN(e)&&e>=0&&(this.lastRecordedTime=e)}},{key:"monitorAdStatus",value:function(e,t){var i=t.ads,n=t.start;if(this.currAd)this.monitorCurrentAd(e);else for(var a,r=i.length;r--;)if((e>=(a=i[r].start||0)||void 0===a)&&!this.breakStatus["t_".concat(n)]["t_".concat(a)]){var o=t.type.toLowerCase();this.currBreakIndex="pre"===o?0:"mid"===o?t.index:-1,this.beginAd(i[r],a);break}}},{key:"monitorCurrentAd",value:function(e){for(var t,i=this.currAd.events,n=this.currEventStatus,a=!0,r=i.length;r--;)if(e>=(t=i[r]).time&&!n[t.type]){if(n[t.type]=!0,"complete"===t.type||e>=this.currAd.start+this.currAd.duration){a=!1,this.emitAdComplete(),this.resetUponAdComplete();break}if("start"!==t.type){a=!1,this.emit(this.eventStatusMap[t.type],this.createStreamData({}));break}}a&&this.emitProgress(e)}},{key:"resetUponAdComplete",value:function(){this.currEventStatus=this.createEventStatus(),this.currAd=null,this.currAdTzero=null}},{key:"beginBreak",value:function(t){this.currBreak=t,this.currBreak.played=!0,this.liveBreakInProgress=this.isLive,this.isLive||this.emitCues(),this.emit(e.event.AD_BREAK_STARTED,this.createStreamData({}))}},{key:"endBreak",value:function(){this.emit(e.event.AD_BREAK_ENDED,this.createStreamData({})),this.currBreak=null}},{key:"beginAd",value:function(t,i){var n,a,r;this.currAd=t,this.currBreak=this.isLive?null==(a=null==(n=this.liveMetadata)?void 0:n.ad_breaks)?void 0:a[t.ad_break_id]:this.currBreak,this.currAdTzero=Date.now(),this.isLive||(this.breakStatus["t_".concat(null==(r=this.currBreak)?void 0:r.start)]["t_".concat(i)]=!0,this.currEventStatus.start=!0);var o=null!==this.currAd.seq?this.currAd.seq:this.currAd.position,s=new me(this.currBreak,o,this.currBreakIndex),l=new ge(this.currAd,s),u=new ve(e.event.STARTED,this,this.createStreamData({}),l);this.emitter.dispatchEvt(u)}},{key:"hClickThru",value:function(){if(this.currAd){var t=this.currAd.clickthrough_url;t&&""!==t&&window.open(t),this.emit(e.event.CLICK)}}},{key:"emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=new ve(e,this,t);this.emitter.dispatchEvt(i)}},{key:"emitCues",value:function(){this.isLive||this.emit(e.event.CUEPOINTS_CHANGED,this.createStreamData({cuepoints:this.assembleCuePoints()}))}},{key:"emitProgress",value:function(t,i){var n,a=this.createAdProgressData(t,i||(null==(n=this.currAd)?void 0:n.duration));this.emit(e.event.AD_PROGRESS,this.createStreamData({adProgressData:a}))}},{key:"emitLoaded",value:function(t){this.emit(e.event.LOADED,this.createStreamData({subtitles:t.subtitles,manifestFormat:this.getFormat(t.stream_manifest),url:t.stream_manifest,streamId:t.stream_id}))}},{key:"emitAdComplete",value:function(){this.isLive||this.emitProgress(null),this.emit(e.event.COMPLETE,this.createStreamData({}))}},{key:"emitError",value:function(t,i){var n=this.createStreamData({errorMessage:t,code:i});this.emit(e.event.ERROR,n)}},{key:"emitAdPeriodStarted",value:function(t){this.emitter.emit(e.event.AD_PERIOD_STARTED,this.createStreamData({streamResumeTime:t?t.start+t.duration+.1:null}))}},{key:"createAdProgressData",value:function(e){var t,i,n,a,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{adBreakDuration:(null==(t=this.currBreak)?void 0:t.duration)||null,adPeriodDuration:null,adPosition:(null==(i=this.currAd)?void 0:i.seq)||null,currentTime:e?this.aviaSdk.Util.clampValue(e-((null==(n=this.currAd)?void 0:n.start)||0),0,o||0):o||0,duration:o||-1,totalAds:(null==(r=null==(a=this.currBreak)?void 0:a.ads)?void 0:r.length)||null}}},{key:"createEventStatus",value:function(){return{start:!1,first:!1,mid:!1,third:!1,complete:!1}}},{key:"assembleCuePoints",value:function(){for(var e=[],t=0,i=this.adBreaks.length;t<i;t++)e.push(this.cuePointFromBreak(this.adBreaks[t]));return e}},{key:"getBreakForStreamTime",value:function(e){for(var t,i=0,n=this.adBreaks.length;i<n;i++)if(e>=(t=this.adBreaks[i]).start&&e-t.start<=1.5&&!this.currBreak)return{break:t,index:i};return{break:null,index:null}}},{key:"getUrl",value:function(e){var t=!!e.assetKey,i=t?"https://dai.google.com/linear/v1/{FORMAT}/event/{ASSET_KEY}/stream":"https://dai.google.com/ondemand/v1/{FORMAT}/content/{CONTENT_SOURCE_ID}/vid/{VIDEO_ID}/stream";return t?i.replace("{FORMAT}",e.format||"hls").replace("{ASSET_KEY}",e.assetKey):i.replace("{FORMAT}",e.format).replace("{CONTENT_SOURCE_ID}",e.contentSourceId).replace("{VIDEO_ID}",e.videoId)}},{key:"cuePointFromBreak",value:function(e){return{start:e.start,end:e.end,played:e.played}}},{key:"createStreamData",value:function(e){return{adProgressData:(null==e?void 0:e.adProgressData)||null,cuepoints:(null==e?void 0:e.cuepoints)||null,errorMessage:(null==e?void 0:e.errorMessage)||null,streamId:this.streamId||null,manifestFormat:(null==e?void 0:e.manifestFormat)||null,subtitles:(null==e?void 0:e.subtitles)||null,url:(null==e?void 0:e.url)||null,streamResumeTime:(null==e?void 0:e.streamResumeTime)||null,code:(null==e?void 0:e.code)||null}}},{key:"getFormat",value:function(e){return e.indexOf(".m3u8")>=0?this.aviaSdk.VideoFormat.HLS:e.indexOf(".mpd")>=0?this.aviaSdk.VideoFormat.DASH:this.aviaSdk.VideoFormat.UNKNOWN}},{key:"gatherBreakInfo",value:function(e){for(var t,i,n,a,r=e&&e.length||0,o=1,s=0;s<r;s++)if(n=(i=(t=e[s]).start)+(a=t.duration),this.breakPoints.push(i),this.adBreaks.push({duration:a,start:i,end:n,played:!1,type:t.type,ads:t.ads,index:s,seq:"mid"===t.type?o++:0}),!this.isLive)for(var l=this.breakStatus["t_"+i]={},u=0,c=t.ads.length;u<c;u++)l["t_"+(t.ads[u].start||0)]=!1}},{key:"gatherStreamInfo",value:function(e){this.streamDur=e.total_duration,this.mediaVerificationUrl=e.media_verification_url,this.streamId=e.stream_id,this.gatherBreakInfo(e.ad_breaks)}}]),e}();ye.event={LOADED:"loaded",STREAM_INITIALIZED:"streamInitialized",CUEPOINTS_CHANGED:"cuePointsChanged",AD_BREAK_STARTED:"adBreakStarted",AD_BREAK_ENDED:"adBreakEnded",STARTED:"started",COMPLETE:"complete",AD_PROGRESS:"adProgress",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",CLICK:"click",ERROR:"error",SKIPPED:"skipped",SKIPPABLE_STATE_CHANGED:"skippablestatechanged",AD_PERIOD_STARTED:"adPeriodStarted",AD_PERIOD_ENDED:"adPeriodEnded"};var Ae={StreamManager:ye,StreamEvent:ve,VODStreamRequest:function(){function e(t){(0,Q.default)(this,e),this.req=t}return(0,X.default)(e,[{key:"adTagParameters",get:function(){return this.req.adTagParameters},set:function(e){this.req.adTagParameters=e}},{key:"videoId",get:function(){return this.req.videoId},set:function(e){this.req.videoId=e}},{key:"contentSourceId",get:function(){return this.req.contentSourceId},set:function(e){this.req.contentSourceId=e}},{key:"apiKey",get:function(){return this.req.apiKey},set:function(e){this.req.apiKey=e}},{key:"authToken",get:function(){return this.req.authToken},set:function(e){this.req.authToken=e}},{key:"format",get:function(){return this.req.format||"hls"},set:function(e){this.req.format=e}},{key:"assetKey",get:function(){return this.req.assetKey},set:function(e){this.req.assetKey=e}}]),e}(),LiveStreamRequest:pe},ke=function(){function e(t,i){(0,Q.default)(this,e),this.options=t,this.context=i}return(0,X.default)(e,[{key:"destroy",value:function(){this.options=null,this.context=null}},{key:"playClicked",value:function(){}},{key:"adService",get:function(){return this.options.adService}},{key:"player",get:function(){return this.context.player}},{key:"aviaSdk",get:function(){return this.context.avia}},{key:"csai",get:function(){return this.context.resource.ad.csai}},{key:"logger",get:function(){return this.context.logger}},{key:"log",value:function(e,t){if(this.logger.log(this.aviaSdk.LogLevel.DEBUG,"Ad Adapter (".concat(this.adService.getAdSystem(),"): ").concat(e)),t)for(var i in t)this.logger.log(this.aviaSdk.LogLevel.DEBUG,"".concat(i,": ").concat(t[i]))}}]),e}(),be=function(){function e(t,i,n,a,r){(0,Q.default)(this,e),this.breaks=[],this.streamDuration=i,this.appContext=t,a?this.createBreaksFromTimes(a):r&&this.createBreaksFromCuepoints(r,n)}return(0,X.default)(e,[{key:"destroy",value:function(){this.breaks=null,this.appContext=null}},{key:"getBreakById",value:function(e){return this.breaks.find(function(t){return t.breakId===e})}},{key:"adBreaks",get:function(){return this.breaks}},{key:"updateBreaks",value:function(e){for(var t=[],i=e.length;i--;)e[i].played&&t.push(e[i].start);this.breaks.forEach(function(e){!e.hasPlayed&&t.indexOf(e.streamStartTime)>=0&&(e.hasPlayed=!0)})}},{key:"getBreakForContentSeekTime",value:function(e){return this.processMid(function(t){return t.startTime<=e?t.hasPlayed?-1:t:null})}},{key:"hasPlayed",value:function(e){var t=this.getBreakById(e);return!0===(null==t?void 0:t.hasPlayed)}},{key:"markPlayed",value:function(e){e.hasPlayed=!0}},{key:"processMid",value:function(e){var t=this,i=this.breaks.filter(function(e){return e.type===t.appContext.avia.AdBreakType.MID});if(!i.length)return null;for(var n,a=i.length;a--;){if(-1===(n=e(i[a])))return null;if(n)return n}return null}},{key:"createBreaksFromCuepoints",value:function(e,t){var i,n,a,r,o,s,l=t(this.streamDuration),u=1;e.sort(function(e,t){return e.start-t.start});for(var c=0,d=0,h=e.length;d<h;d++)i=e[d].start,r=(n=e[d].end)-i,o=i,i-c>=l&&(i=-1),c+=r,a=this.makeBrkId(i,i>0?u++:null),(s=this.makeBreak(t(o),a,o,this.appContext.avia.AdTechnology.SSAI)).endTime=n,s.duration=r,this.addBreak(s)}},{key:"createBreaksFromTimes",value:function(e){var t,i,n=1;e.sort(function(e,t){return e-t});for(var a=0,r=e.length;a<r;a++)t=e[a],i=this.makeBrkId(t,t>0?n++:null),this.addBreak(this.makeBreak(t,i,null,this.appContext.avia.AdTechnology.CSAI))}},{key:"addBreak",value:function(e){this.breaks.push(e)}},{key:"makeBreak",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0,a=this.appContext.avia;return{adTechnology:n,startTime:e,hasPlayed:!1,streamStartTime:null!=i?i:null,breakId:t,type:0===e?a.AdBreakType.PRE:-1===e?a.AdBreakType.POST:a.AdBreakType.MID}}},{key:"makeBrkId",value:function(e,t){return(0===e?"pre":-1===e?"post":"mid")+(e>0?"_".concat(t):"_0")}}]),e}(),Ee="codec:ac-3,codec:ec-3",Se="[RANDOM]",Te="sz",we="640x480",xe="640x483",Ce="imafw__fw_h_referer",_e="imafw_host";function Pe(e,t){var i=t.muted,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r=e.adParameters||{},o=i,s=!1,l=!1;for(var u in e.filterOutPremiumAudioCodecs&&(r["dai-excl"]=Ee),r)u===Te&&o&&r[u]===we&&(r[u]=xe),r[u]===Se&&(r[u]=Ne()),u===_e&&(s=!0),u===Ce&&(l=!0);for(var c in n||(s||(r[_e]=Le()),l||(r[Ce]=Me())),a)c.indexOf("imafw_")>=0&&(r[c]=a[c]);if(!0===e.useApi)for(var d in r)r[d]=encodeURIComponent(r[d]);var h={apiKey:e.apiKey,authToken:e.authToken||null,assetKey:e.assetKey||null,adTagParameters:r,videoId:e.videoId||null,contentSourceId:e.contentSourceId||null};return e.format&&"string"==typeof e.format&&(h.format=e.format),h}function Ie(e,t){var i;e.omidAccessModeRules={},e.omidAccessModeRules[null==(i=t.OmidAccessMode)?void 0:i.FULL]=[new RegExp(".*")]}function Ne(){var e=String(Math.round(1e15+9e15*Math.random()));if(e.length<16)for(;e.length<16;)e+="0";return e.length>16&&(e=e.substr(0,17)),e}function Le(){return new URL(window.location.href).host}function Me(){return null==document?void 0:document.referrer}var Re=function(e){(0,q.default)(i,e);var t=J(i);function i(e,n){var a;return(0,Q.default)(this,i),(a=t.call(this,e,n)).streamInfo={mediaUrl:null,streamId:null},a.adBreakSchedule=null,a.streamDuration=NaN,a.contentDuration=NaN,a.breakMetadataPending=!1,a.breaksReleased=!1,a.adBreakInProgress=!1,a.breakCount=0,a.isIgnoringEvents=!1,a.pendingStartTime=null,a.breakPending=!1,a.omEnabled=!0,a.adSegmentStarted=!1,a.eventStallTimeoutHandle=null,a.eventStallTimeout=5e3,a.adPaused=!1,a.cachedAdTimes=[],a.breakReentered=!1,a.currentAdIsSkippable=!1,a.hStreamEvent=function(e){if(/cue/.test(e.type.toLowerCase())&&a.isIgnoringEvents&&a.processCuepoints(e),a.sdk&&a.adService&&!a.isIgnoringEvents){var t=e.type,i=a.sdk.StreamEvent.Type;a.breakPending=!1;var n=!1;switch(clearTimeout(a.eventStallTimeoutHandle),t){case i.CUEPOINTS_CHANGED:a.processCuepoints(e);break;case i.AD_BREAK_STARTED:n=!0,a.currentAdIsSkippable=!1,a.breakMetadataPending=!0;break;case i.STARTED:var r=e.getAd();a.handleAdStart(r,i.STARTED);break;case i.AD_PROGRESS:if(n=!0,a.adBreakInProgress){var o=e.getStreamData().adProgressData;a.delegate.adProgress(o.currentTime,o.duration)}break;case i.FIRST_QUARTILE:n=!0,a.adBreakInProgress&&(a.trackQuartile(i.FIRST_QUARTILE),a.delegate.adFirstQuartile());break;case i.MIDPOINT:n=!0,a.adBreakInProgress&&(a.trackQuartile(i.MIDPOINT),a.delegate.adMidpoint());break;case i.THIRD_QUARTILE:n=!0,a.adBreakInProgress&&(a.trackQuartile(i.THIRD_QUARTILE),a.delegate.adThirdQuartile());break;case i.COMPLETE:a.adBreakInProgress&&a.handleAdComplete(i.COMPLETE);break;case i.AD_BREAK_ENDED:case i.AD_PERIOD_ENDED:a.adBreakInProgress?(a.adBreakInProgress=!1,a.delegate.adBreakComplete(),a.endAdSegment(),a.pendingStartTime&&(a.delegate.seekToStreamTime(a.streamTimeForContentTime(a.pendingStartTime)),a.pendingStartTime=null)):a.endAdSegment();break;case i.CLICK:a.delegate.adClicked("");break;case i.SKIPPED:a.delegate.adSkipped();break;case i.SKIPPABLE_STATE_CHANGED:a.delegate.adSkippableStateChanged();break;case i.ERROR:a.adBreakInProgress=!1,a.log("Error event SDK: ".concat(e.getStreamData().errorMessage)),a.signalError(e.getStreamData().errorMessage,a.aviaSdk.ErrorCode.DAI_DATA_ERROR,!1)}n&&!a.adSegmentStarted&&(a.adSegmentStarted=!0,a.delegate.adSegmentStarted()),a.adBreakInProgress&&!a.adPaused&&a.signalAdSegmentEndAfterDelay()}},a.hPlayPause=function(e){e.type===a.aviaSdk.PlayerEvent.AD_PAUSED?(a.adPaused=!0,clearTimeout(a.eventStallTimeoutHandle)):a.adPaused=!1},a.omEnabled=e.enableOm,a.sdk=a.adService.sdk,a.streamManager=null,a.delegate=n.getDelegate(),a}return(0,X.default)(i,[{key:"destroy",value:function(){var e,t,n;clearTimeout(this.eventStallTimeoutHandle),null==(e=this.streamManager)||e.reset(),this.listenToStreamManager(!1),null==(t=this.player)||t.off(this.aviaSdk.PlayerEvent.AD_PAUSED,this.hPlayPause),null==(n=this.player)||n.off(this.aviaSdk.PlayerEvent.AD_PLAYING,this.hPlayPause),this.sdk=null,this.adBreakSchedule=null,this.streamManager=null,(0,G.default)((0,Y.default)(i.prototype),"destroy",this).call(this)}},{key:"skipAd",value:function(){if(this.adService.usesDaiApi&&!0===this.currentAdIsSkippable){this.currentAdIsSkippable=!1;var e=this.streamManager.skipCurrentAd();this.delegate.adSkipped(),this.delegate.seekToStreamTime(e)}}},{key:"getResource",value:function(){return ce(this,null,K.default.mark(function e(){var t,i,n,a,r=this;return K.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.context.resource,n=(null==(t=i.ad)?void 0:t.ssai)||{},a=n.assetKey,this.streamManager=this.adService.getStreamManager(),this.listenToStreamManager(!0),this.isIgnoringEvents=!0,this.pendingStartTime=i.playback.startTime||null,e.abrupt("return",new Promise(function(e,t){r.aviaSdk.Util.eventsToPromise([{target:r.streamManager,events:[r.sdk.StreamEvent.Type.LOADED]}],[{target:r.streamManager,events:[r.sdk.StreamEvent.Type.ERROR]}]).then(function(n){var a=n.getStreamData(),o=r.initializeWithStreamData(a);if(r.isIgnoringEvents=!1,!o)return r.log("Media url not found in DAI stream response"),void t(new r.context.avia.PlayerError(r.aviaSdk.ErrorCode.DAI_DATA_ERROR,"Missing media url"));r.log("Stream metadata loaded"),i.playback.startTime&&!i.ad.showPrerollOnNonZeroStart?i.playback.startTime=r.streamTimeForContentTime(i.playback.startTime):i.playback.startTime&&i.ad.showPrerollOnNonZeroStart&&(i.playback.startTime=NaN),i.location.mediaUrl=r.streamInfo.mediaUrl,e(i)}).catch(function(e){var i;r.log("Stream request error, e"),t(new r.context.avia.PlayerError(r.aviaSdk.ErrorCode.DAI_DATA_ERROR,(null==(i=e.getStreamData())?void 0:i.errorMessage)||"Unspecified DAI error"))});var n=Pe(i.ad.ssai,{muted:r.context.muted,autoplay:r.context.autoplay},!r.context.system.isDesktop&&!r.context.system.isMobile,{playername_version:r.context.buildInfo.playerName,imafw_playername_version:r.context.buildInfo.playerVersion});a?r.requestLiveStream(new r.sdk.LiveStreamRequest(n)):r.requestVODStream(new r.sdk.VODStreamRequest(n))}));case 7:case"end":return e.stop()}},e,this)}))}},{key:"start",value:function(){return ce(this,null,K.default.mark(function e(){return K.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.delegate.streamIdAvailable(this.streamInfo.streamId),this.delegate.resumeContent();case 2:case"end":return e.stop()}},e,this)}))}},{key:"handleTimedMetadata",value:function(e){if(/google/.test(e.id)){this.cachedAdTimes.length&&this.shouldTrackReentry()&&this.isBreakReentry(e.startTime)&&(this.breakReentered=!0,this.delegate.adSegmentReentered());var t={TXXX:e.info};this.streamManager.onTimedMetadata(t)}}},{key:"contentTimeForStreamTime",value:function(e){return this.streamManager.contentTimeForStreamTime(e)}},{key:"streamTimeForContentTime",value:function(e){return this.streamManager.streamTimeForContentTime(e)}},{key:"getPermittedSeekTime",value:function(e){if(this.adBreakSchedule){var t=this.adBreakSchedule.getBreakForContentSeekTime(e);if(t&&!t.hasPlayed)return t.hasPlayed=!0,this.breakPending=!0,t.streamStartTime}return this.streamManager.streamTimeForContentTime(e)}},{key:"setStreamTime",value:function(e){this.adService.setCurrentTime(e),this.adBreakInProgress||this.breakPending||this.checkForAdSegment(e)}},{key:"setStreamDuration",value:function(e){this.streamDuration=e,this.contentDuration=this.streamManager.contentTimeForStreamTime(e),this.adService.setDuration(e),this.pendingCues&&this.updateBreakSchedule(this.pendingCues)}},{key:"contentComplete",value:function(){this.streamManager.reset()}},{key:"setVolume",value:function(){}},{key:"setMuteState",value:function(){}},{key:"setContentBitrate",value:function(){}},{key:"updateSize",value:function(){}},{key:"setFullscreenState",value:function(){}},{key:"shouldTrackReentry",value:function(){return this.isLiveStream&&!this.player.isPlayingLive&&!this.breakReentered}},{key:"isBreakReentry",value:function(e){return this.cachedAdTimes.some(function(t){return e>=t[0]-.4&&e<t[1]})}},{key:"signalAdSegmentEndAfterDelay",value:function(){var e=this;this.eventStallTimeoutHandle=setTimeout(function(){e.adPaused||(e.log("No ad events have occurred for ".concat(e.eventStallTimeout," sec.; ending ad segment.")),e.endAdSegment())},this.eventStallTimeout)}},{key:"signalError",value:function(e,t,i){this.delegate.adError({code:t||this.aviaSdk.ErrorCode.AD_ADAPTER_ERROR,message:e,cause:{streamId:this.streamInfo.streamId||null},fatal:i})}},{key:"checkForAdSegment",value:function(e){var t,i=null==(t=this.adBreakSchedule)?void 0:t.adBreaks,n=null==i?void 0:i.length;if(n)for(var a=0;a<n;a++){var r=i[a],o=r.streamStartTime-e,s=o<.3&&o>-.2,l=r.endTime-e>=3;if(r.hasPlayed&&s&&l){this.delegate.seekToStreamTime(r.endTime);break}}}},{key:"requestVODStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.omEnabled&&this.adService.omEnabled&&Ie(e,this.sdk),this.context.resource.ad.ssai.enableNonce&&(e.enableNonce=!0),this.isLiveStream=!1,this.streamManager.requestStream(e,t)}},{key:"requestLiveStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.omEnabled&&this.adService.omEnabled&&Ie(e,this.sdk),this.context.resource.ad.ssai.enableNonce&&(e.enableNonce=!0),this.isLiveStream=!0,this.streamManager.requestStream(e,t)}},{key:"processCuepoints",value:function(e){var t=e.getStreamData().cuepoints;this.contentDuration?this.updateBreakSchedule(t):this.pendingCues=t}},{key:"endAdSegment",value:function(){(this.adSegmentStarted||this.breakReentered)&&(this.adSegmentStarted=!1,this.breakReentered=!1,this.delegate.adSegmentEnded())}},{key:"handleAdComplete",value:function(e){this.currentAdIsSkippable=!1,this.isLiveStream&&null!==this.adStartTime&&(this.cachedAdTimes.push([this.adStartTime,this.player.video.currentTime]),this.adStartTime=null),this.adService.usesDaiApi||(this.adService.trackAdEvent({context:this.adService.getAdSystem(),eventName:e,volume:this.adService.videoInterface.volume}),this.adService.untrackAd()),this.delegate.adComplete()}},{key:"trackQuartile",value:function(e){!this.adService.usesDaiApi&&this.adService.trackAdEvent({context:this.adService.getAdSystem(),eventName:e,volume:this.adService.videoInterface.volume})}},{key:"handleAdStart",value:function(e,t){return ce(this,null,K.default.mark(function i(){var n,a,r,o,s,l;return K.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=null==(n=this.adService)?void 0:n.assembleAdBreakInfo(e,this.aviaSdk.AdTechnology.SSAI),o=null==(a=this.adService)?void 0:a.assembleAdInfo(e,{mediaUrl:this.streamInfo.mediaUrl}),!this.breakMetadataPending&&this.adBreakInProgress||(this.breakMetadataPending=!1,this.isLiveStream&&(r.adBreakPosition=++this.breakCount,r.adBreakType=this.aviaSdk.AdBreakType.MID),this.adSegmentStarted||(this.adSegmentStarted=!0,this.delegate.adSegmentStarted()),this.adBreakInProgress||this.delegate.adBreakStart(),r.adTechnology=this.aviaSdk.AdTechnology.SSAI,this.delegate.adBreakMetadata(r)),this.adStartTime=this.player.video.currentTime,this.breakReentered=!1,this.adBreakInProgress=!0,this.adService.usesDaiApi||(this.adService.trackAd(o),this.adService.trackAdEvent({context:this.adService.getAdSystem(),eventName:t,volume:this.adService.videoInterface.volume})),i.next=9,this.delegate.applyHook(this.aviaSdk.PlayerHookType.AD,ue({skippable:!1},o));case 9:s=i.sent,l=s.skippable,this.currentAdIsSkippable=l,o.skippable=l,this.delegate.adStart(o);case 14:case"end":return i.stop()}},i,this)}))}},{key:"initializeWithStreamData",value:function(e){var t=e.url;if(!this.aviaSdk.Util.isString(t)||""===t)return!1;var i=e.streamId;return this.streamInfo.mediaUrl=t,this.streamInfo.streamId=i,this.player.on(this.aviaSdk.PlayerEvent.AD_PAUSED,this.hPlayPause),this.player.on(this.aviaSdk.PlayerEvent.AD_PLAYING,this.hPlayPause),!0}},{key:"listenToStreamManager",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";this.getEventInterests().forEach(function(e){t.streamManager[i](e,t.hStreamEvent)})}},{key:"getEventInterests",value:function(){var e=this.sdk.StreamEvent.Type;return[e.CUEPOINTS_CHANGED,e.AD_BREAK_STARTED,e.AD_BREAK_ENDED,e.STARTED,e.COMPLETE,e.AD_PERIOD_STARTED,e.AD_PERIOD_ENDED,e.AD_PROGRESS,e.FIRST_QUARTILE,e.MIDPOINT,e.THIRD_QUARTILE,e.SKIPPED,e.SKIPPABLE_STATE_CHANGED,e.CLICK,e.ERROR]}},{key:"updateBreakSchedule",value:function(e){var t,i,n,a=this,r=e&&e.length;if(r&&!this.adBreakSchedule){this.adBreakSchedule=new be(this.context,this.streamDuration,function(e){return a.streamManager.contentTimeForStreamTime(e)},null,e);var o=this.context.resource,s=this.adBreakSchedule.adBreaks;if(this.pendingStartTime&&!o.ad.showPrerollOnNonZeroStart){var l=s[0];l.type===this.aviaSdk.AdBreakType.PRE&&(l.hasPlayed=!0)}for(var u=s.length;u--;){var c=s[u];if(c.startTime<this.pendingStartTime&&c.type!==this.aviaSdk.AdBreakType.POST){c.hasPlayed=!0;break}}}else r&&(null==(t=this.adBreakSchedule)||t.updateBreaks(e));!this.breaksReleased&&(null==(n=null==(i=this.adBreakSchedule)?void 0:i.adBreaks)?void 0:n.length)&&(this.delegate.adBreaksAvailable(this.adBreakSchedule.adBreaks),this.breaksReleased=!0),this.pendingCues=null,this.context.resource.ad.showPrerollOnNonZeroStart||(this.pendingStartTime=null)}}]),i}(ke),De=function(e){(0,q.default)(i,e);var t=J(i);function i(e,n){var a;return(0,Q.default)(this,i),(a=t.call(this,e,n)).isFullscreen=!1,a.inProgressAd=null,a.inProgressBreakId=null,a.isPaused=!1,a.buffering=!1,a.breakMetadataReleased=!1,a.breakStartReleased=!1,a.pendingSeekedBreakId=null,a.markedAsPlayed=[],a.adProgressData={lastRecordedTime:0,addTzero:null,pollTzero:null,timeoutHandle:null,stallThreshold:5,adId:null,duration:null,pollInterval:2e3},a.hAdsManagerAdError=function(e){var t=a.adService.parseAdError(e);a.log("AdsManager ERROR",t),a.delegate.adError({code:a.aviaSdk.ErrorCode.IMA_AD_ERROR,message:null==t?void 0:t.message,cause:t,fatal:!1})},a.hAdEvent=function(e){var t=a.sdk.AdEvent.Type,i=e.getAd(),n=e.getAdData();clearTimeout(a.adProgressData.timeoutHandle);var r=!1!==a.csai.enableStalledAdCheck;switch(e.type){case t.CONTENT_PAUSE_REQUESTED:r=!1,a.pendingSeekedBreakId=null,a.delegate.pauseContent();break;case t.CONTENT_RESUME_REQUESTED:r=!1,a.inProgressBreakId?(a.pendingSeekedBreakId=null,a.processBreakComplete(a.breakStartReleased)):a.delegate.resumeContent();break;case t.LOADED:r=!1,a.processAdLoadOrStart(i,n,t.LOADED);break;case t.STARTED:r=!1,a.inProgressBreakId&&!a.breakStartReleased&&(a.breakStartReleased=!0,a.delegate.adBreakStart()),a.processAdLoadOrStart(i,n,t.STARTED),a.checkForCustomClickTracking(),a.beginPollForProgress(a.inProgressAd);break;case t.AD_PROGRESS:a.buffering&&(a.buffering=!1,a.delegate.adBuffering(!1)),a.processProgress();break;case t.FIRST_QUARTILE:a.processQuartile(t.FIRST_QUARTILE,"adFirstQuartile");break;case t.MIDPOINT:a.processQuartile(t.MIDPOINT,"adMidpoint");break;case t.THIRD_QUARTILE:a.processQuartile(t.THIRD_QUARTILE,"adThirdQuartile");break;case t.COMPLETE:r=!1,a.processAdComplete(t.COMPLETE);break;case t.ALL_ADS_COMPLETED:r=!1,a.processAllComplete();break;case t.AD_BUFFERING:a.buffering||(a.buffering=!0,a.delegate.adBuffering(!0));break;case t.CLICK:r=!1,a.adsManager.pause(),a.delegate.adClicked("");break;case t.PAUSED:r=!1,a.isPaused=!0,a.delegate.adPaused();break;case t.RESUMED:a.buffering&&(a.buffering=!1,a.delegate.adBuffering(!1)),a.isPaused=!1,a.delegate.adResumed();break;case t.SKIPPED:r=!1,a.processSkip(t.SKIPPED);break;case t.LOG:r=!1,a.processLogEvent(n);break;case t.USER_CLOSE:r=!1,a.killAd();break;case t.VOLUME_CHANGED:case t.VOLUME_MUTED:a.processVolumeChange(e.type)}!a.isPaused&&r&&(a.adProgressData.timeoutHandle=setTimeout(function(){return a.checkAdProgress()},a.adProgressData.pollInterval))},a.delegate=n.getDelegate(),a.presentationContainer=e.presentationContainer,a.sdk=a.adService.sdk,a.adsLoader=a.adService.adsLoader,a.adProgressData.stallThreshold=a.csai.stalledAdThreshold||a.adProgressData.stallThreshold,a.listenToAdsLoader(!0),a}return(0,X.default)(i,[{key:"destroy",value:function(){var e,t;clearTimeout(this.adProgressData.timeoutHandle),this.listenToAdsLoader(!1),this.listenToAdsManager(!1),null==(e=this.adsManager)||e.destroy(),null==(t=this.adsLoader)||t.contentComplete(),this.adBreakSchedule&&this.adBreakSchedule.destroy(),this.delegate=null,this.presentationContainer=null,this.adsManager=null,this.sdk=null,this.adsLoader=null,this.adBreakSchedule=null,this.renderingSettings=null,(0,G.default)((0,Y.default)(i.prototype),"destroy",this).call(this)}},{key:"skipAd",value:function(){}},{key:"playClicked",value:function(){this.adService.initializeAdsLoader()}},{key:"start",value:function(){return ce(this,null,K.default.mark(function e(){var t;return K.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.csai.adCallUrl)||this.csai.adsResponse){e.next=4;break}return this.delegate.resumeContent(),e.abrupt("return");case 4:this.adService.initializeAdsLoader(),this.initialize(t);case 6:case"end":return e.stop()}},e,this)}))}},{key:"resume",value:function(){return ce(this,null,K.default.mark(function e(){var t;return K.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(this.adProgressData.timeoutHandle),this.isPaused=!1,null==(t=this.adsManager)||t.resume();case 3:case"end":return e.stop()}},e,this)}))}},{key:"pause",value:function(){return ce(this,null,K.default.mark(function e(){var t;return K.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(this.adProgressData.timeoutHandle),this.isPaused=!0,null==(t=this.adsManager)||t.pause();case 3:case"end":return e.stop()}},e,this)}))}},{key:"handleTimedMetadata",value:function(){}},{key:"updateSize",value:function(e){if(this.adsManager){var t=this.isFullscreen?this.sdk.ViewMode.FULLSCREEN:this.sdk.ViewMode.NORMAL;this.adsManager.resize(e.width,e.height,t)}}},{key:"contentComplete",value:function(){var e;null==(e=this.adsLoader)||e.contentComplete()}},{key:"getPermittedSeekTime",value:function(e){var t,i=null==(t=this.adBreakSchedule)?void 0:t.getBreakForContentSeekTime(e);return i&&-1===this.markedAsPlayed.indexOf(i.breakId)?(this.pendingSeekedBreakId=i.breakId,i.startTime):e}},{key:"setFullscreenState",value:function(e){this.isFullscreen=e}},{key:"setStreamTime",value:function(){}},{key:"setStreamDuration",value:function(){}},{key:"setVolume",value:function(e){var t,i=this.player.muted?0:this.aviaSdk.Util.clampValue(e,0,1);null==(t=this.adsManager)||t.setVolume(i)}},{key:"setMuteState",value:function(e){var t;null==(t=this.adsManager)||t.setVolume(e?0:this.player.volume)}},{key:"setContentBitrate",value:function(e){var t;this.renderingSettings&&(this.renderingSettings.bitrate=e,null==(t=this.adsManager)||t.updateAdsRenderingSettings(this.renderingSettings))}},{key:"startAds",value:function(){var e,t=this.getRect(),i=this.isFullscreen?this.sdk.ViewMode.FULLSCREEN:this.sdk.ViewMode.NORMAL;try{this.adsManager.init(t.width,t.height,i),this.adsManager.start()}catch(t){this.log("AdsManager init failure."),this.delegate.adError({code:this.aviaSdk.ErrorCode.IMA_INIT_FAILURE,message:null==(e=t.getMessage)?void 0:e.call(t),cause:t,fatal:!1})}}},{key:"markAsPlayed",value:function(e){var t=this;e.forEach(function(e){t.markedAsPlayed.indexOf(e)<0&&t.markedAsPlayed.push(e)})}},{key:"cancelPendingBreak",value:function(e){this.pendingSeekedBreakId===e&&(this.pendingSeekedBreakId=null)}},{key:"isUsingContentVideoElement",value:function(){return this.adsManager&&this.adsManager.isCustomPlaybackUsed()}},{key:"isUsingCustomClickTracker",value:function(){return!(!this.adsManager||!this.adsManager.isCustomClickTrackingUsed())}},{key:"setContentComplete",value:function(){this.adsLoader&&this.adsLoader.contentComplete()}},{key:"checkForCustomClickTracking",value:function(){this.isUsingCustomClickTracker()&&this.delegate.displayAdClickElement(!0)}},{key:"beginPollForProgress",value:function(e){var t=this;if(!0===this.csai.enableStalledAdCheck){var i=this.adProgressData;clearTimeout(i.timeoutHandle),i.duration=e.adDuration,i.adId=e.adId,i.pollTzero=Date.now(),i.timeoutHandle=setTimeout(function(){return t.checkAdProgress()},i.pollInterval)}}},{key:"checkAdProgress",value:function(){var e=this,t=this.adProgressData,i=t.duration-this.adsManager.getRemainingTime(),n=Date.now();if(clearTimeout(t.timeoutHandle),!this.isPaused)if(null==t.pollTzero&&(t.pollTzero=Date.now()),i>t.lastRecordedTime)t.lastRecordedTime=i,t.pollTzero=n,t.timeoutHandle=setTimeout(function(){return e.checkAdProgress()},t.pollInterval);else if(.001*(n-t.pollTzero)>t.stallThreshold){var a=this.inProgressAd?Object.assign({},this.inProgressAd):null;this.log("Ad stalled; discarding break"),this.delegate.adStalled(a),this.killAd(),this.discardAdBreak(),this.processBreakComplete(this.breakStartReleased)}}},{key:"processAdLoadOrStart",value:function(e,t,i){var n,a=this.adService.assembleAdBreakInfo(e,this.aviaSdk.AdTechnology.CSAI),r=this.adService.assembleAdInfo(e,t),o=i===this.sdk.AdEvent.Type.STARTED,s=a.adBreakPosition,l=0===s?"pre_0":-1===s?"post_0":"mid_"+s,u=this.adBreakSchedule.getBreakById(l);if((null==(n=this.markedAsPlayed)?void 0:n.indexOf(l))>=0)return this.adBreakSchedule.markPlayed(u),void this.adsManager.discardAdBreak();o?(this.inProgressAd=r,this.adService.trackAd(r),this.adService.trackAdEvent({context:"ima",eventName:i,volume:this.adsManager.getVolume()}),a.adTechnology=this.aviaSdk.AdTechnology.CSAI,this.breakMetadataReleased||(this.breakMetadataReleased=!0,this.delegate.adBreakMetadata(a)),this.delegate.adStart(r)):this.adBreakSchedule.hasPlayed(l)||(this.adBreakSchedule.markPlayed(u),this.inProgressBreakId=l,this.delegate.adLoaded())}},{key:"processProgress",value:function(){if(this.inProgressAd){var e=this.inProgressAd.adDuration,t=this.adsManager&&this.adsManager.getRemainingTime();isNaN(e)||isNaN(t)||t<0||this.delegate.adProgress(Math.min(e,Math.max(0,e-t)),e)}}},{key:"processQuartile",value:function(e,t){var i;this.adService.trackAdEvent({context:"ima",eventName:e,volume:this.adsManager.getVolume()}),null==(i=this.delegate)||i[t]()}},{key:"processAdComplete",value:function(e){this.adService.trackAdEvent({context:"ima",eventName:e,volume:this.adsManager.getVolume()}),this.killAd()}},{key:"processSkip",value:function(e){this.adService.trackAdEvent({context:"ima",eventName:e,volume:this.adsManager.getVolume()}),this.killAd(),this.delegate.adSkipped()}},{key:"processBreakComplete",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.inProgressAd&&this.killAd(),this.inProgressBreakId&&(this.markAsPlayed([this.inProgressBreakId]),e&&this.delegate.adBreakComplete(),this.inProgressBreakId=null),this.breakStartReleased=!1,this.breakMetadataReleased=!1,this.delegate.resumeContent()}},{key:"processVolumeChange",value:function(e){this.adService.trackAdEvent({context:"ima",eventName:e,volume:this.adsManager.getVolume()})}},{key:"processAllComplete",value:function(){this.inProgressBreakId&&this.processBreakComplete(),this.delegate.allAdsComplete()}},{key:"processLogEvent",value:function(e){if(null==e?void 0:e.adError){this.log("LOG event; Ad data has error; Message: "+e.adError.getMessage()||!1);var t=null;if(this.pendingSeekedBreakId||this.inProgressBreakId)t=this.pendingSeekedBreakId||this.inProgressBreakId;else{var i=this.player.contentTime,n=this.findClosestForwardBreak(i);n&&(this.adBreakSchedule.markPlayed(n),t=n.breakId)}t&&this.markAsPlayed([t]),this.delegate.adError({code:this.aviaSdk.ErrorCode.IMA_AD_ERROR,message:e.adError.getMessage(),cause:e.adError,fatal:!1}),this.discardAdBreak(),this.delegate.resumeContent()}}},{key:"findClosestForwardBreak",value:function(e){for(var t=this.adBreakSchedule.adBreaks,i=0,n=t.length;i<n;i++)if(t[i].startTime>=e&&t[i].startTime-e<=10)return t[i];return null}},{key:"discardAdBreak",value:function(){var e;this.log("Discarding Ad break"),this.delegate.adBreakDiscarded(),null==(e=this.adsManager)||e.discardAdBreak()}},{key:"killAd",value:function(){this.adService.untrackAd(),this.delegate.adComplete(),this.delegate.displayAdClickElement(!1),this.inProgressAd=null;var e=this.adProgressData;clearTimeout(e.timeoutHandle),e.pollTzero=null,e.lastRecordedTime=null}},{key:"requestAds",value:function(e){var t=new this.sdk.AdsRequest,i=this.getRect(),n=this.options.autoplayState,a=!(this.context.system.isDesktop||this.context.system.isMobile),r=this.context.avia.Util.template;if("string"==typeof this.csai.adsResponse||this.csai.adsResponse instanceof XMLDocument)this.log("IMAAdAdapter using supplied adsResponse (i.e., not using adCallUrl)"),t.adsResponse=this.csai.adsResponse;else{var o=function(e,t){var i=t.muted,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return i&&(e=e.replace("".concat(Te,"=").concat(we),"".concat(Te,"=").concat(xe))),r(e,{get RANDOM(){return Ne()},get HOST(){return Le()},get REFERER(){return n?"":Me()},get PLAYERINFO(){return"".concat(a.playername_version)},get SDK(){return"".concat(a.ima_sdkv)}},"\\[","\\]")}(e,n,a,{ima_sdkv:this.adsLoader.getSdkVersion(),playername_version:"".concat(this.context.buildInfo.playerName,"_").concat(this.context.buildInfo.playerVersion)},r);t.adTagUrl=o}t.linearAdSlotWidth=i.width,t.linearAdSlotHeight=i.height,t.nonLinearAdSlotWidth=i.width,t.nonLinearAdSlotHeight=i.height,t.vastLoadTimeout=this.csai.vastLoadTimeout||5e3,t.setAdWillAutoPlay(n.autoplay),t.setAdWillPlayMuted(n.muted),this.adsLoader.requestAds(t)}},{key:"hAdsMgrLoaded",value:function(e){this.renderingSettings=this.getRenderingSettings(),this.adsManager=e.getAdsManager(this.options.playheadInterface,this.renderingSettings),this.createAdBreakSchedule(this.adsManager.getCuePoints()),this.listenToAdsManager(!0),this.startAds()}},{key:"getRenderingSettings",value:function(){var e=new this.sdk.AdsRenderingSettings,t=this.csai,i=this.adService.defaultRenderingSettings,n=t.loadVideoTimeoutMs,a=t.enableAdPreloading;return e.bitrate=i.bitrate,e.enablePreloading=this.aviaSdk.Util.isBoolean(a)?a:i.enablePreloading,e.loadVideoTimeout=isNaN(n)?i.loadVideoTimeout:n,e.restoreCustomPlaybackStateOnAdBreakComplete=i.restoreCustomPlaybackStateOnAdBreakComplete,e}},{key:"createAdBreakSchedule",value:function(e){this.aviaSdk.Util.isEmpty(e)&&(e=[0]),this.adBreakSchedule=new be(this.context,null,function(e){return e},e),this.checkNonZeroStart(),this.delegate.adBreaksAvailable(this.adBreakSchedule.adBreaks)}},{key:"checkNonZeroStart",value:function(){var e=this,t=this.context.resource,i=t.playback.startTime;if(!isNaN(i)&&i>0){for(var n=this.adBreakSchedule.adBreaks,a=n.length;a--;){var r=n[a];if(r.startTime<i&&r.type===this.aviaSdk.AdBreakType.MID){r.hasPlayed=!0,this.markedAsPlayed.push(r.breakId);break}}var o=t.ad.showPrerollOnNonZeroStart;n.forEach(function(t){t.type!==e.aviaSdk.AdBreakType.PRE||o||(e.markedAsPlayed.push(t.breakId),e.adBreakSchedule.markPlayed(t))})}}},{key:"hAdsLoaderError",value:function(e){this.log("AdsLoader ERROR",e),this.delegate.adError({code:this.aviaSdk.ErrorCode.IMA_AD_ERROR,message:e.message,cause:e,fatal:!1}),this.delegate.resumeContent()}},{key:"listenToAdsManager",value:function(e){if(this.adsManager){for(var t,i=e?"addEventListener":"removeEventListener",n=this.getEventInterests(),a=0,r=n.length;a<r;a++)t=this.sdk.AdEvent.Type[n[a]],this.adsManager[i](t,this.hAdEvent);this.adsManager[i](this.sdk.AdErrorEvent.Type.AD_ERROR,this.hAdsManagerAdError)}}},{key:"listenToAdsLoader",value:function(e){var t=this;this.adsLoader.onAdsLoaderError=e?function(e){return t.hAdsLoaderError(e)}:null,this.adsLoader.onAdsManagerLoaded=e?function(e){return t.hAdsMgrLoaded(e)}:null}},{key:"getEventInterests",value:function(){return["CONTENT_PAUSE_REQUESTED","CONTENT_RESUME_REQUESTED","LOADED","STARTED","AD_PROGRESS","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","COMPLETE","ALL_ADS_COMPLETED","AD_BUFFERING","CLICK","PAUSED","RESUMED","SKIPPED","LOG","USER_CLOSE"]}},{key:"getRect",value:function(){return this.presentationContainer.getBoundingClientRect()}},{key:"initialize",value:function(e){this.listenToAdsLoader(!0),this.requestAds(e)}}]),i}(ke),Oe=function(){function e(){(0,Q.default)(this,e),this.MOAT_PARTNER_CODE="cbsiimajsint708425247896",this.adContextToVpaidEventMap={ima:{start:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:"AdPlaying",skip:"AdSkipped",volumechange:"AdVolumeChange",mute:"AdVolumeChange"},dai_sdk:{started:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",controlpause:"AdPaused",controlplay:"AdPlaying",controlvolumeset:"AdVolumeChange",controlmute:"AdVolumeChange",controlunmute:"AdVolumeChange"}}}return(0,X.default)(e,[{key:"destroy",value:function(){this.adContextToVpaidEventMap=null,this.trackingObj=null}},{key:"track",value:function(e){var t=e.context,i=e.adInfo,n={level1:"",level2:"",level3:i.wrapperAdId,level4:i.wrapperCreativeId,slicer1:"vaw-can",slicer2:e.partner,slicer3:e.pageType,moatVASTSystem:t,moatVASTAdID:i.wrapperAdId};""!==e.viewGuid&&(n.zMoatVGUID=e.viewGuid),""!==e.pageType&&(n.zMoatPT=e.pageType),this.initMoat(e.adVideoContainer,n,i.adDuration,this.MOAT_PARTNER_CODE,null)}},{key:"untrack",value:function(){this.trackingObj=null}},{key:"trackEvent",value:function(e){var t=this.adContextToVpaidEventMap[e.context][e.eventName.toLowerCase()];t&&this.trackingObj&&this.trackingObj.dispatchEvent({type:t,adVolume:e.volume})}},{key:"initMoat",value:function(e,t,i,n){var a,r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=document.createElement("script"),l=[],u={adData:{ids:t,duration:i,url:o},dispatchEvent:function(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l.push(e)}},c="_moatApi"+Math.floor(1e8*Math.random());try{r=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){r=window}r[c]=u,s.type="text/javascript",e&&e.insertBefore(s,e.childNodes[0]||null),s.src="https://z.moatads.com/"+n+"/moatvideo.js#"+c,this.trackingObj=u}}]),e}(),Be=function(){function e(t){(0,Q.default)(this,e),this.context=t,this.trackingData=t.resource.ad.viewabilityTracking}return(0,X.default)(e,[{key:"adContainer",get:function(){return this.context.dom.adContainer}},{key:"avia",get:function(){return this.context.avia}},{key:"adSystem",get:function(){return this.adSys},set:function(e){this.adSys=e}},{key:"omEnabled",get:function(){var e;return!(null==(e=this.context.resource.ad.ssai)?void 0:e.useApi)&&this.context.playerOptions.enableOm}},{key:"moatEnabled",get:function(){return!0===this.context.playerOptions.enableMoat}},{key:"destroy",value:function(){var e;null==(e=this.moatTracker)||e.destroy(),this.moatTracker=null,this.trackingData=null,this.context=null}},{key:"trackAd",value:function(e){if(this.moatEnabled){var t=this.trackingData;this.moatTracker.track({viewGuid:t.viewGuid,pageType:t.pageType,adInfo:e,adVideoContainer:this.adContainer,context:this.adSystem,partner:t.partner})}}},{key:"trackAdEvent",value:function(e){this.moatEnabled&&this.moatTracker.trackEvent(e)}},{key:"untrackAd",value:function(){this.moatEnabled&&this.moatTracker.untrack()}},{key:"getGamPlatformString",value:function(){return this.context.system.isDesktop?"desktop":this.context.system.isMobile?"mobile_web":"other"}},{key:"getAdSystem",value:function(){return this.adSystem}},{key:"getAdBreakTypeFromPodIndex",value:function(e){return 0===e?this.avia.AdBreakType.PRE:-1===e?this.avia.AdBreakType.POST:this.avia.AdBreakType.MID}},{key:"assembleAdBreakInfo",value:function(e,t){var i=e.getAdPodInfo(),n=i.getPodIndex();return{adTechnology:t,adBreakDuration:i.getMaxDuration(),adBreakPosition:n,adTotal:i.getTotalAds(),adBreakType:this.getAdBreakTypeFromPodIndex(n),adServerName:this.adSystem}}},{key:"assembleAdInfo",value:function(e,t){var i=e.getAdPodInfo(),n=i&&i.getAdPosition()||-1,a=this.getIdInfo(e),r="ima"===this.adSystem,o=e;return{adObject:e,adServerName:this.adSystem,adDuration:e.getDuration(),adTitle:e.getTitle(),adId:a.adId,adPosition:n,adAssetUrl:r?o.getMediaUrl():t.mediaUrl||null,isVpaid:r?this.getIsVpaid(o):null,wrapperAdId:a.wrapperAdId,creativeId:a.creativeId,wrapperCreativeId:a.wrapperCreativeId,vastMediaHeight:r?o.getVastMediaHeight():null,vastMediaWidth:r?o.getVastMediaWidth():null,vastMediaBitrate:r?o.getVastMediaBitrate():null}}},{key:"createViewabilityTracker",value:function(){this.moatEnabled&&(this.moatTracker=new Oe)}},{key:"getIdInfo",value:function(e){var t=this.getWrapperId(e),i=this.getCreativeId(e);return{adId:t.adId,wrapperAdId:t.wrapperAdId,creativeId:i.creativeId,wrapperCreativeId:i.wrapperCreativeId,adServerName:"ima",adDuration:e.getDuration()}}},{key:"getWrapperId",value:function(e){var t=e.getWrapperAdIds(),i=Array.isArray(t)&&t.length,n=e.getAdId()||"",a=i?t[0]:n,r=i?t[t.length-1]:n;return r||(r=null),{adId:a,wrapperAdId:r}}},{key:"getCreativeId",value:function(e){var t=e.getWrapperCreativeIds(),i=Array.isArray(t)&&t.length,n=e.getCreativeId()||null,a=i?t[0]:n,r=i?t[t.length-1]:n;return r||(r=null),{creativeId:a,wrapperCreativeId:r}}},{key:"getIsVpaid",value:function(e){return"application/javascript"===e.getContentType()}}]),e}(),Ue=function(e){(0,q.default)(i,e);var t=J(i);function i(e,n,a){var r;return(0,Q.default)(this,i),(r=t.call(this,e)).pSdk=null,r.usesApi=!1,r.videoIface=null,r.hVideoAddOrRemove=function(e){var t;null==(t=r.streamMgr)||t.reset(),r.streamMgr=null,e.type===r.avia.PlayerEvent.VIDEO_ELEMENT_ADDED?r.usesApi?r.videoIface=r.avia.Util.createSimpleVideoInterface():r.videoIface=e.detail.video:r.videoIface=null},r.pSdk=n,r.videoIface=a,r.usesApi=!0===e.resource.ad.ssai.useApi,r.adSystem=r.usesApi?"dai_api":"dai_sdk",r.listenToVideoChanges(!0),r.initViewabilityTracking(),r}return(0,X.default)(i,[{key:"destroy",value:function(){this.listenToVideoChanges(!1),this.streamMgr&&this.streamMgr.reset(),this.streamMgr=null,this.pSdk=null,this.videoIface=null,(0,G.default)((0,Y.default)(i.prototype),"destroy",this).call(this)}},{key:"initViewabilityTracking",value:function(){this.createViewabilityTracker()}},{key:"videoInterface",get:function(){return this.videoIface}},{key:"usesDaiApi",get:function(){return this.usesApi}},{key:"sdk",get:function(){return this.pSdk}},{key:"setDuration",value:function(e){this.usesApi&&(this.videoIface.duration=e)}},{key:"setCurrentTime",value:function(e){this.usesApi&&(this.videoIface.currentTime=e)}},{key:"reset",value:function(){this.streamMgr.reset(),this.usesApi&&(this.videoIface.duration=NaN,this.videoIface.currentTime=NaN)}},{key:"assembleAdInfo",value:function(e,t){if("dai_sdk"===this.adSystem)return(0,G.default)((0,Y.default)(i.prototype),"assembleAdInfo",this).call(this,e,t);var n=e.getAdPodInfo(),a=n&&n.getAdPosition()||-1,r=e.getDaiWrapperData(),o=r.adId,s=r.creativeId;return{adObject:e,adServerName:this.adSystem,adDuration:e.getDuration(),adTitle:e.getTitle(),adId:o,adPosition:a,adAssetUrl:t.mediaUrl||null,isVpaid:!1,wrapperAdId:o,creativeId:s,wrapperCreativeId:s,vastMediaHeight:null,vastMediaWidth:null,vastMediaBitrate:null}}},{key:"getStreamManager",value:function(){return!this.streamMgr&&this.sdk&&this.videoIface&&(this.usesApi?this.streamMgr=new this.sdk.StreamManager(this.videoIface,this.adContainer,this.context.logger,this.avia):this.streamMgr=new this.sdk.StreamManager(this.videoIface,this.adContainer)),this.streamMgr}},{key:"listenToVideoChanges",value:function(e){var t=this.context.player,i=e?"on":"off";null==t||t[i](this.avia.PlayerEvent.VIDEO_ELEMENT_ADDED,this.hVideoAddOrRemove),null==t||t[i](this.avia.PlayerEvent.VIDEO_ELEMENT_REMOVED,this.hVideoAddOrRemove)}}]),i}(Be),Fe=function(){function e(t){var i=this;(0,Q.default)(this,e),this.eMap={errorHandler:null,adsMgrLoadedHandler:null},this.omEnabled=!0,this.initialized=!1,this.callbacks={error:null,mgrLoaded:null},this.opts=t,this.adService=this.opts.adService,this.sdk=this.adService.sdk,this.omEnabled=t.enableOm,this.eMap.errorHandler=function(e){return i.hError(e)},this.eMap.adsMgrLoadedHandler=function(e){return i.hAdsMgrLoaded(e)}}return(0,X.default)(e,[{key:"destroy",value:function(){this.adsLoader&&(this.adsLoader.removeEventListener(this.sdk.AdErrorEvent.Type.AD_ERROR,this.eMap.errorHandler),this.adsLoader.removeEventListener(this.sdk.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.eMap.adsMgrLoadedHandler),this.adsLoader.destroy()),this.adsLoader=null,this.adService=null,this.sdk=null}},{key:"initialize",value:function(){var e=this.opts,t=this.sdk;if(!t||!t.AdsLoader)return!1;if(this.initialized)return!0;var i=new t.AdDisplayContainer(e.adContainer,e.video,e.adClickEl);i.initialize(),this.adsLoader=new t.AdsLoader(i);var n=this.adsLoader.getSettings();return this.populateSdkSettings(n),this.adsLoader.addEventListener(t.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.eMap.adsMgrLoadedHandler),this.adsLoader.addEventListener(t.AdErrorEvent.Type.AD_ERROR,this.eMap.errorHandler),this.initialized=!0,!0}},{key:"getSdkVersion",value:function(){var e;return null==(e=this.adsLoader)?void 0:e.getVersion()}},{key:"onAdsManagerLoaded",set:function(e){this.callbacks.mgrLoaded=e}},{key:"onAdsLoaderError",set:function(e){this.callbacks.error=e}},{key:"requestAds",value:function(e){this.omEnabled&&Ie(e,this.sdk),this.adsLoader&&this.adsLoader.requestAds(e)}},{key:"contentComplete",value:function(){this.adsLoader&&this.adsLoader.contentComplete()}},{key:"getSettings",value:function(){return this.adsLoader?this.adsLoader.getSettings():null}},{key:"hAdsMgrLoaded",value:function(e){this.callbacks.mgrLoaded(e)}},{key:"hError",value:function(e){var t=this.parseAdErrorEvent(e);this.callbacks.error(t)}},{key:"parseAdErrorEvent",value:function(e){return this.adService.parseAdError(e)}},{key:"populateSdkSettings",value:function(e){var t=this.opts.sdkSettings;e.setVpaidMode(t.vpaidMode),e.setDisableCustomPlaybackForIOS10Plus(t.disableCustomPlaybackForIOS10Plus),e.setPlayerType(t.playerType),e.setPlayerVersion(t.playerVersion)}}]),e}();Fe.event={ADS_MANAGER_LOADED:"adsManagerLoaded",ADS_LOADER_ERROR:"adsLoaderError"};var Ve=function(e){(0,q.default)(i,e);var t=J(i);function i(e,n,a){var r;return(0,Q.default)(this,i),(r=t.call(this,e)).adsLoaderInitialized=!1,r.useOm=!1,r.hVideoAddOrRemove=function(e){e.type===r.avia.PlayerEvent.VIDEO_ELEMENT_ADDED&&(r.adsLoaderInitialized&&r.killAdsLoader(),r.createAdsLoader(r.useOm&&r.omEnabled,e.detail))},r.vpaidMode=n||r.sdk.ImaSdkSettings.VpaidMode.INSECURE,r.adSystem="ima",r.useOm=a,r.listenToVideoChanges(!0),r.createAdsLoader(r.useOm&&r.omEnabled),r}return(0,X.default)(i,[{key:"destroy",value:function(){this.killAdsLoader(),(0,G.default)((0,Y.default)(i.prototype),"destroy",this).call(this)}},{key:"sdk",get:function(){var e;return null==(e=this.context.system.global.google)?void 0:e.ima}},{key:"getSdkVersion",value:function(){var e;return null==(e=this.pAdsLoader)?void 0:e.getSdkVersion()}},{key:"sdkSettings",get:function(){var e=this.context.buildInfo;return{vpaidMode:this.vpaidMode,disableCustomPlaybackForIOS10Plus:!1,playerType:e.playerName,playerVersion:e.playerVersion}}},{key:"defaultRenderingSettings",get:function(){return{bitrate:900,enablePreloading:!1,loadVideoTimeout:-1,playAdsAfterTime:void 0,restoreCustomPlaybackStateOnAdBreakComplete:!1}}},{key:"adsLoader",get:function(){return this.pAdsLoader}},{key:"createAdsLoader",value:function(e,t){if(!this.pAdsLoader){var i=this.context.dom,n=i.adClickEl,a=i.video,r=i.adContainer,o=t||a;this.pAdsLoader=new Fe({enableOm:e,adContainer:r,adClickEl:n,video:o,sdkSettings:this.sdkSettings,adService:this})}}},{key:"initializeAdsLoader",value:function(){return!!this.adsLoaderInitialized||(this.adsLoaderInitialized=!0,this.createViewabilityTracker(),this.pAdsLoader.initialize())}},{key:"parseAdError",value:function(e){var t=e.getError(),i=e.getUserRequestContext(),n=t.getInnerError();return{type:this.getAdErrorType(t),errorCode:t.getErrorCode(),vastErrorCode:t.getVastErrorCode(),message:t.getMessage(),innerErrorMessage:this.context.avia.Util.isString(n)?n:null,sdkVersion:this.sdk.VERSION,requestContext:i||null}}},{key:"killAdsLoader",value:function(){var e,t;null==(e=this.pAdsLoader)||e.contentComplete(),null==(t=this.pAdsLoader)||t.destroy(),this.adsLoaderInitialized=!1,this.pAdsLoader=null}},{key:"getAdErrorType",value:function(e){return e.getType()===this.sdk.AdError.Type.AD_LOAD?"adLoad":"adPlay"}},{key:"listenToVideoChanges",value:function(e){var t=this.context.player,i=e?"on":"off";null==t||t[i](this.avia.PlayerEvent.VIDEO_ELEMENT_ADDED,this.hVideoAddOrRemove),null==t||t[i](this.avia.PlayerEvent.VIDEO_ELEMENT_REMOVED,this.hVideoAddOrRemove)}}]),i}(Be);function He(e){return!!((null==e?void 0:e.assetKey)||(null==e?void 0:e.videoId)&&e.contentSourceId)}function We(e){return!!(null==e?void 0:e.adCallUrl)||!!(null==e?void 0:e.adsResponse)}var je="gam";function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:je,factory:Ke,options:e}}function Ke(e,t){return ce(this,null,K.default.mark(function i(){var n,a,r,o;return K.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.player,a=e.avia,n.registerAdapter({id:je,role:[a.AdapterRole.AD],options:t,factory:function(e,t){return ce(this,null,K.default.mark(function i(){var n,a,s,l,u,c,d,h,f,p,v,g,m,y,A,k,b,E,S,T,w,x,C,_,P,I,N,L,M,R,D,O,B;return K.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(k=e.avia,b=e.system,E=e.resource,S=e.dom,T=e.playerOptions,w=e.logger,x=E.ad,C=We(x.csai),_=He(x.ssai),P=!0===T.enableOm,I=!0===T.enableMoat,N=!0===t.debug?"_debug":"",L=!0===(null==(n=x.ssai)?void 0:n.useApi),!_){i.next=22;break}if((R=null==(l=null==(s=null==(a=b.global.google)?void 0:a.ima)?void 0:s.dai)?void 0:l.api)||L){i.next=15;break}return D=(null==(u=t.dependencies)?void 0:u.dai)||"//imasdk.googleapis.com/js/sdkloader/ima3_dai".concat(N,".js"),i.next=14,k.Util.loadScript({url:D},T,function(){var e,t,i;return null==(i=null==(t=null==(e=b.global.google)?void 0:e.ima)?void 0:t.dai)?void 0:i.api});case 14:R=null==(h=null==(d=null==(c=b.global.google)?void 0:c.ima)?void 0:d.dai)?void 0:h.api;case 15:if(R||L){i.next=19;break}throw new Error("GAM Plugin: Unable to load SDK");case 19:L||(O={promoskip:!0},P&&(O.enableOmidBeta=!0),null==(f=null==R?void 0:R.DaiSdkSettings)||f.setFeatureFlags(O));case 20:o||(o=new Ue(e,L?Ae:R,L?k.Util.createSimpleVideoInterface():S.video)),M=new Re({enableOm:P&&!L,playheadInterface:S.video,presentationContainer:S.main,autoplayState:{muted:e.muted,autoplay:e.autoplay},adService:o},e);case 22:if(!C){i.next=30;break}if(null==(v=null==(p=b.global.google)?void 0:p.ima)?void 0:v.AdsRequest){i.next=27;break}return B=(null==(g=t.dependencies)?void 0:g.ima)||"//imasdk.googleapis.com/js/sdkloader/ima3".concat(N,".js"),i.next=27,k.Util.loadScript({url:B},T,function(){var e;return null==(e=b.global.google)?void 0:e.ima});case 27:P&&(null==(A=null==(y=null==(m=b.global.google)?void 0:m.ima)?void 0:y.settings)||A.setFeatureFlags({enableOmidBeta:!0})),r||(r=new Ve(e,t.imaVpaidMode,P)),M=new De({playheadInterface:S.video,presentationContainer:S.main,autoplayState:{muted:e.muted,autoplay:e.autoplay},adService:r},e);case 30:return P&&w.log(k.LogLevel.INFO,"GAM Plugin: OM is enabled"),!L&&I&&w.log(k.LogLevel.INFO,"GAM Plugin: Moat SDK is enabled"),i.abrupt("return",M);case 33:case"end":return i.stop()}},i)}))},isSupported:function(e){var t=e.resource,i=We(t.ad.csai),n=He(t.ad.ssai);return i||n}}),i.abrupt("return",{getId:function(){return je},destroy:function(){null==r||r.destroy(),r=null}});case 3:case"end":return i.stop()}},i)}))}var Ge=je,qe=Ke,ze=$e;return fe}()},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("metadata",'<span class="card__label card__label--type-short card__label--type-time-duration">{(opts.isplaying && playerState) ? nowPlayingLabel : label}</span><span class="card__label card__label--type-long card__label--type-time-duration">{(opts.isplaying && playerState) ? nowPlayingLabel : liveLabelLong}</span><span class="card__label card__label--type-relative">{riot.mixin(\'formatter\').getRelativeTime(item.timestamp)}</span><span if="{item.type == \'playlist\'}" class="card__label card__label--type-count">{label} video{label !== 1 ? \'s\' : \'\'}</span>',"","",function(e){this.item=e.item,this.label="",this.liveLabelLong="",this.nowPlayingLabel="now playing",this.playerState=!!window.istouch||null,this.parent.parent.root.classList.contains("carousel--slug-ott-live")&&(this.nowPlayingLabel="playing"),this.on("mount",()=>{this.getLabel(this.item)}),this.dispatch.on("player:video:state",e=>{this.playerState=!0,this.update()}),this.getLabel=function(e){if("live"==e.type){var t=new Date;this.label=this.formatTime(t)}else"vod"==e.type||"dvr"==e.type?this.label=e.durationLabel:"playlist"==e.type?this.label=e.meta.totalCount:"listing"!=e.type&&"channel"!=e.type||(this.liveLabelLong="live: "+e.title,this.label="live");this.update()}.bind(this),this.formatTime=function(e,t){if(t);else e=new Date(e);if(e.getHours()>12)var i=e.getHours()-12;else i=e.getHours();if(e.getHours()<12)var n="am";else n="pm";return i+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+" "+n}.bind(this)})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("thumbnail",'<span class="{opts.class}-img img"><img data-srcset="{thumbnail.sd} 1x, {thumbnail.hd} 2x" riot-src="{thumbnail.sd}" srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEAAAAALAAAAAABAAEAAAI=" alt="{opts.alt}" class="lazyload"></span><svg viewbox="0 0 32 32" class="{opts.class}--icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-video"></use></svg>',"","",function(e){this.type=e.type,this.slug=e.slug,this.thumbnail={sd:e.images.sd,hd:e.images.hd},this.isIframe=window.self!==window.top,"channel"===this.type&&!1===this.isIframe&&(this.thumbnail.sd="/assets/live_cards/video-door-"+this.slug.replace(/_/g,"-")+"@1x.png",this.thumbnail.hd="/assets/live_cards/video-door-"+this.slug.replace(/_/g,"-")+"@2x.png")})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";var e=i(1);e.tag2("card",'<a ref="anchor" if="{item.type.indexOf(\'html\') === -1}" class="card__container" href="{item.url}" target="_blank" rel="{relData}"><thumbnail if="{item.images.sd || item.images.hd}" class="card__thumb" images="{item.images}" alt="{title}" slug="{item.slug}" type="{item.type}"></thumbnail><div class="card__heading-wrapper"><h3 if="{title}" class="card__title">{title}</h3></div><span class="card__link" if="{item.linkText}" href="{item.linkUrl}" aria-label="{item.linkText}">{item.linkText}</span><metadata isplaying="{isPlaying}" class="label" component="card" item="{item}" type="{item.type}" relativetime="true"></metadata></a>',"","class=\"card card--type-{item.type} card--type-{imposter} card--type-{opts.classes} card--slug-{item.slug} {'card--is-playing': isPlaying} {'card--is-active': isActive}\"",function(t){this.item=t.item,this.title=t.item.title,this.dataIs=null,this.isActive=!1,this.isPlaying=!1,this.relData,1==this.item.isImposter&&(this.imposter="is-imposter"),1==this.item.isExternal&&(this.relData="noopener nofollow"),this.isSheAnAd=function(e){return e.type.indexOf("html")>-1}.bind(this),this.changeOttLiveTitle=function(){if(this.item.items){var e=this.item.items.find(e=>"live"===e.type);e&&this.update({title:e.title})}}.bind(this),"ott-live"===this.parent.playlist.slug&&this.item.items&&this.changeOttLiveTitle(),this.dispatch.on("video:video:changed:type-live:"+this.item.id,e=>{this.title!==e.video.title&&this.update({title:e.video.title})}),this.dispatch.on("url:load",e=>{this.update({isActive:e.video&&e.video.id===this.item.id||"live"===e.video.type&&e.video.mpxRefId===this.item.mpxRefId})}),this.dispatch.on("player:video:state",e=>{this.update({isPlaying:("live"===e.video.type&&e.video.mpxRefId===this.item.mpxRefId||"live"!==e.video.type&&e.video.id===this.item.id)&&"PLAYING"===e.playbackState})}),this.on("update",e=>{"current"==t.type&&(this.item=t.item),this.refs.anchor&&(this.refs.anchor.payload=this.item)}),this.on("mount",()=>{if(this.isSheAnAd(this.item)){var t="html"+Date.now(),i=e.tag(t,this.item.body.replace(/({|})/g,"\\$1"),null,'class="html-container"'),n=document.createElement(i);this.root.appendChild(n),e.mount(i)}else this.refs.anchor&&(this.refs.anchor.payload=this.item);"related"===this.parent.opts.component&&this.update({isActive:this.item.id===CBSNEWS.defaultPayload.items[0].id})})})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,a;n=[i(124)],void 0===(a=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t},i(1).tag2("carousel",'<h2 if="{playlistItems.length && playlist.title}" class="carousel__title" aria-label="{playlist.title}"> {playlist.title} </h2><ad display="{opts.type === \'playlist\' && opts.component === \'hero\'}" slot="sponsor-playlist-logo" categoryslug="{playlist.slug}"></ad><div class="show_{rowsVisible} card__wrapper" ref="list"><card if="{playlistItems.length}" each="{item, i in playlistItems}" item="{item}" index="{i}" ref="card"></card></div><button if="{playlistItems.length && playlist.id}" aria-role="button" class="carousel__button" ref="loadmore" aria-label="more {playlist.title}" onclick="{handleLoadMore}"> More + </button>',"","id=\"{playlist.slug}\" class=\"carousel carousel--slug-{playlist.slug} carousel--component-{opts.component} carousel--view-{playlist.meta.view} carousel--type-{playlist.type} {'carousel--empty ': isEmpty} {dupe ? 'carousel--is-playing' : ''}\" tabindex=\"0\"",function(t){window.addEventListener("resize",(0,e.default)(e=>this.dispatch.trigger("window:resize"),250)),this.playlist={id:null,type:t.type,title:null,items:[],meta:{view:null}},this.playlistItems=[],this.defaultRowsVisible=2,this.rowsVisible=parseInt(t.rowsvisible)||2,this.dupe=!1,this.isLoadMoreHidden=!0,this.registerComponent=function(){(t.plid||t.slug)&&t.type&&this.playlist.id!==t.plid&&this.dispatch.trigger("register:component",t.playlist)}.bind(this),this.scrollToShelf=function(){if(this.playlist.slug&&CBSNEWS.originalUrl&&CBSNEWS.originalUrl.hash&&window===window.top){var e=CBSNEWS.originalUrl.hash.replace(/^#/,""),t=document.querySelector('[id="'.concat(CBSNEWS.originalUrl.hash,'"]'));t&&e===this.playlist.slug&&t.scrollIntoView({behavior:"smooth"})}}.bind(this),this.showHideLoadMore=function(){if(this.playlist.id&&this.refs.list&&!(this.refs.list.childElementCount<=0)){var e=!1,t=this.refs.list.getElementsByClassName("card");if(t&&t.length>0)for(var i of t)if(0===i.offsetWidth&&0===i.offsetHeight){if(i.classList.contains("card--type-html-native-ad")||i.classList.contains("card--is-playing")||i.classList.contains("card--type-is-imposter"))continue;e=!0;break}this.refs.loadmore&&(e?this.refs.loadmore.classList.remove("carousel__button--hidden"):this.refs.loadmore.classList.add("carousel__button--hidden"))}}.bind(this),this.isDuplicate=function(e){var i,n;null!==(i=e.video)&&void 0!==i&&null!==(n=i.playlist)&&void 0!==n&&n.id&&e.video.playlist.id==t.plid!==this.dupe&&this.update({dupe:e.video.playlist.id==t.plid})}.bind(this),this.dispatch.on("player:ad:start",this.isDuplicate),this.dispatch.on("player:content:start",this.isDuplicate),this.dispatch.on("url:load",this.isDuplicate),this.dispatch.on("window:resize",this.showHideLoadMore),this.dispatch.on("video:data:changed",e=>{if(e.playlist.id===t.plid){var i={};this.playlist.id&&t.plid===this.playlist.id||(i=this.setDefaultRowsVisible(e.playlist.meta.view)),i.playlist=e.playlist,i.playlistItems=this.getItems(e.playlist),this.isEmpty=e.playlist.emptyPlaylist,this.update(i)}}),this.on("mount",this.registerComponent),this.on("update",this.registerComponent),this.on("updated",this.showHideLoadMore),this.on("updated",this.scrollToShelf),this.on("updated",()=>{this.dispatch.trigger("video:data:rendered",{playlist:this.playlist,playlistItems:this.playlistItems})}),this.handleLoadMore=function(e){e.preventUpdate=!0;var t=this.rowsVisible;this.rowsVisible<8&&"all"!=this.rowsVisible?t+=this.defaultRowsVisible:t="all",this.update({rowsVisible:t})}.bind(this),this.setDefaultRowsVisible=function(e){var i={};return"playlists"===e?(i.defaultRowsVisible=1,i.rowsVisible=1):"slider"==t.component?i.rowsVisible="all":(i.defaultRowsVisible=2,i.rowsVisible=2),i}.bind(this),this.getItems=function(e){return"slider"===t.component||"hero"===t.component?e.items.filter(e=>-1===e.type.indexOf("html")).filter(e=>!0!==e.isImposter):e.items.filter(e=>!0!==e.isImposter)}.bind(this)})}.apply(t,n))||(e.exports=a)},function(e,t){e.exports=function(e,t){var i=null;return function(){clearTimeout(i);var n=arguments,a=this;i=setTimeout(function(){e.apply(a,n)},t)}}},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("slider",'<button hide="{lessThanLimit}" class="slider__controls slider__controls--prev" onclick="{previous}" ref="prevBtn"><svg width="47" height="47" viewbox="0 0 47 47" xmlns="http://www.w3.org/2000/svg"><title>buttons/button-playertray-right</title><g fill="none" fill-rule="evenodd"><path d="M0 4.007C0 1.794 1.785 0 4.007 0H47v47H4.007C1.794 47 0 45.215 0 42.993V4.007z" fill="#F5F5F5"></path><path stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M22 17l7 6.776L22 30"></path></g></svg></button><button hide="{lessThanLimit}" class="slider__controls slider__controls--next" onclick="{next}" ref="nextBtn"><svg width="47" height="47" viewbox="0 0 47 47" xmlns="http://www.w3.org/2000/svg"><title>buttons/button-playertray-right</title><g fill="none" fill-rule="evenodd"><path d="M0 4.007C0 1.794 1.785 0 4.007 0H47v47H4.007C1.794 47 0 45.215 0 42.993V4.007z" fill="#F5F5F5"></path><path stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M22 17l7 6.776L22 30"></path></g></svg></button><carousel ref="slider" if="{playlist.id}" component="{opts.component}" plid="{playlist.id}" slug="{playlist.slug}" type="{playlist.type}" playlist="{playlist}"></carousel>',"",'class="slider slider--slug-{playlist.slug}"',function(e){this.playlist={id:null,slug:"live-channels",items:[]},this.limit=parseInt(e.limit),this.margin=parseInt(e.margin),this.lessThanLimit=!0,"related"===e.component&&this.update({playlist:CBSNEWS.defaultPayload}),window.isembed?(this.dispatch.trigger("register:component",{api:"/video/xhr/collection/component/live-channels/",slug:"live-channels",type:"component"}),this.dispatch.on("video:data:changed:live-channels",e=>this.playlist=e.playlist)):(this.dispatch.on("url:load",e=>{"channel"!==e.type&&"channel"!==e.video.type&&this.update({playlist:e.video.playlist})}),this.dispatch.on("url:change",e=>{if(this.playlist.id){var t=this.refs.slider.refs.list;this.scrollToCard(t,e.video.slug)}})),this.dispatch.on("player:player:fullscreen",()=>{if(this.playlist.id){var e=this.refs.slider.refs.list;this.scrollOver(e,id,this.playlist.items.length,this.isFullScreen())}}),this.dispatch.on("video:data:changed",e=>{if(!this.playlist||this.playlist.id===e.playlist.id){this.update({playlist:e.playlist,lessThanLimit:this.playlist.items.length<=this.limit});var t=this.playlist.id;if(t){var i=this.refs.slider.refs.list;this.scrollOver(i,t,e.playlist.items.length,this.isFullScreen())}}}),this.isFullScreen=function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}.bind(this),this._getTranslateValue=function(e){var t=getComputedStyle(e).transform;return"none"===t?"none":+t.split("(")[1].split(")")[0].split(",")[4]}.bind(this),this.on("updated",()=>{this.playlist&&this.refs.slider&&this.tags.carousel.on("updated",()=>{if(this.refs.slider.refs.list&&this.root.querySelector(".card")){var e=this.refs.slider.root.querySelectorAll(".card__wrapper .card");Math.round(this.root.querySelector(".card").offsetWidth),this.margin;e.length,this.limit,this.playlist.id;try{Math.round(this.root.querySelector(".card").offsetWidth),this.wrapper=this.refs.slider.root.querySelector(".card__wrapper")}catch(e){}}})}),this.scrollToCard=function(e,t){if(e&&t){var i=e.querySelector(".card--slug-"+t);if(i){this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden"),e.style.transform="translateX(-"+i.offsetLeft+"px)";var n=parseInt(i.getAttribute("index"))+1;this.playlist.items.length-n<=this.limit&&this.refs.nextBtn.classList.add("slider__controls--hidden"),1===n&&this.refs.prevBtn.classList.add("slider__controls--hidden")}}}.bind(this),this.scrollOver=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var a=this.root.querySelector(".card");if(a)var r=Math.round(a.offsetWidth)+this.margin;else r=335;var o=document.body.offsetWidth,s=r*i,l=s-r*this.limit;if(this._getTranslateValue(e),this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden"),this.update({lessThanLimit:n&&s<o}),0===t.indexOf("fusion-")){n&&(l=s-document.body.offsetWidth);try{e.style.transform="translateX(-"+l+"px)",this.refs.nextBtn.classList.add("slider__controls--hidden")}catch(e){}}else try{e.style.transform="translateX(0)",this.refs.prevBtn.classList.add("slider__controls--hidden")}catch(e){}}}.bind(this),this.scrollTo=function(e,t){var i=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,n=this.refs.slider.root.querySelectorAll(".card__wrapper .card"),a=Math.round(this.root.querySelector(".card").offsetWidth)+this.margin,r=a*n.length,o=this._getTranslateValue(e),s=0;this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden");var l=r+o-a*this.limit;i&&(l=r+o-i.offsetWidth);var u=Math.abs(o);"previous"==t?(Math.abs(o)<450?(s=a-Math.abs(o),i&&u<=a&&(this.refs.prevBtn.classList.add("slider__controls--hidden"),s=0),u===a&&this.refs.prevBtn.classList.add("slider__controls--hidden")):Math.abs(o)<1005?(s=2*a-Math.abs(o),i&&u<=2*a&&(this.refs.prevBtn.classList.add("slider__controls--hidden"),s=0),u===2*a&&this.refs.prevBtn.classList.add("slider__controls--hidden")):(s=3*a-Math.abs(o),u===3*a&&this.refs.prevBtn.classList.add("slider__controls--hidden")),e.style.transform="translateX("+s+"px)"):(l<400?(s=a-o,i&&l<450&&(this.refs.nextBtn.classList.add("slider__controls--hidden"),s=u+l),l===a&&this.refs.nextBtn.classList.add("slider__controls--hidden")):l<1005?(s=2*a-o,i&&l<1005&&(this.refs.nextBtn.classList.add("slider__controls--hidden"),s=u+l),l===2*a&&this.refs.nextBtn.classList.add("slider__controls--hidden")):(s=3*a-o,l===3*a&&this.refs.nextBtn.classList.add("slider__controls--hidden")),e.style.transform="translateX(-"+s+"px)")}.bind(this),this.whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]}.bind(this),this.previous=function(){var e=this.whichTransitionEvent(),t=this;this.refs.prevBtn.classList.add("slider__controls--disable"),this.wrapper.addEventListener(e,function(){t.refs.prevBtn.classList.remove("slider__controls--disable")}),this.scrollTo(this.wrapper,"previous")}.bind(this),this.next=function(){var e=this.whichTransitionEvent(),t=this;this.refs.nextBtn.classList.add("slider__controls--disable"),this.wrapper.addEventListener(e,function(){t.refs.nextBtn.classList.remove("slider__controls--disable")}),this.scrollTo(this.wrapper,"next")}.bind(this)})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("overlay-headline","<virtual> {headline} </virtual>","","",function(e){this.headline=e.title,this.slug=e.slug,this.type=e.type,this.onLiveItemChange=function(e){this.update({headline:e.video.title})}.bind(this),this.on("mount",()=>{"live"==this.type&&this.dispatch.on("video:video:changed:type-live",this.onLiveItemChange)})})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("raw","<span></span>","","",function(e){this.root.innerHTML=e.html||"",this.on("update",function(){this.root.innerHTML=e.html||""})})}.apply(t,[]))||(e.exports=n)},,,function(e,t,i){e.exports=i(131)},function(e,t,i){var n,a;n=[i(2),i(1),i(132),i(67),i(133),i(68),i(70),i(134),i(135),i(136),i(78),i(122),i(123),i(137),i(120),i(126),i(138),i(139),i(127),i(125),i(141),i(121),i(142)],void 0===(a=function(e,t,i,n,a,r,o,s,l,u,c,d,h,f,p,v,g,m,y,A,k,b,E){"use strict";function S(e){return e&&e.__esModule?e:{default:e}}function T(){new i.BreakingNewsFeedAdapter,new n.VideoFeedAdapter,new r.VideoStore,new a.BreakingNewsStore,(0,o.beforeInitialTagMount)(),t.default.mount("watch-live"),t.default.mount("page")}function w(e,t){var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}if(e=S(e),t=S(t),window.isembed=!1,document.body.classList.add("no-embedded"),window.self!==window.top||/[?&]embed[=&]/.test(window.location.search))if(CBSNEWS.isPreviewRequest)CBSNEWS.shouldAutoplay=!1,T();else if(document.body.classList.remove("no-embedded"),document.body.classList.add("embedded"),window.isembed=!0,CBSNEWS.defaultPayload.isImposter=!1,CBSNEWS.shouldAutoplay=!1,CBSNEWS.referrerHostname=((_=document.createElement("a")).href=document.referrer,"wpcomwidgets.com"==_.hostname?w("wpcom_origin",_.href).replace(/(^\w+:|^)\/\//,""):_.hostname),"live_streaming_player"!==CBSNEWS.tracking.pageType)T();else{var x=w("premium",window.location.search)||"0";window.renderEmbed=function(e,t){CBSNEWS.tracking.siteId=t,CBSNEWS.tracking.mediaPartnerId=1==x?e:"can",document.documentElement.classList.add("partner--"+e.replace(/\./g,"-")),CBSNEWS.partnerHostname=e,"1"==x&&document.documentElement.classList.add("embed--is-premium"),T()},window.blockFrame=function(){CBSNEWS.whitelistFailed=!0,T()},window.retry=function(){location.reload()};var C=document.createElement("script");C.src="/video/xhr/partner-check/"+CBSNEWS.referrerHostname+"/"+x,document.body.appendChild(C)}else CBSNEWS.shouldAutoplay=!0,T();var _}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[t,i(35)],void 0===(a=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BreakingNewsFeedAdapter=void 0;e.BreakingNewsFeedAdapter=class extends t.BaseFeedAdapter{constructor(){super({event:"feed:ingested:breaking"});var e="/feedfiles/breakingnews.desktop.json";this.getNewFeed(e),setInterval(this.getNewFeed.bind(this,e),15e3)}unifyFormat(e){return super.unifyFormat(e).then(t=>{var i=t.cbsNewsTicker;return i.meta={dateUpdated:e.headers.get("last-modified")},i})}}}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[t,i(2)],void 0===(a=function(e,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.BreakingNewsStore=void 0,t=(i=t)&&i.__esModule?i:{default:i},e.BreakingNewsStore=class{constructor(){this.registerCallbacks()}emitChange(e){t.default.trigger("component:breaking:changed",e)}registerCallbacks(){t.default.on("feed:ingested:breaking",e=>{this.emitChange({breaking:e.feed.active,item:e.feed.banner[0]})})}}}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(2)],void 0===(a=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t};var i={};window.BidBarrel=window.BidBarrel||{},BidBarrel.queue=BidBarrel.queue||[],window.blankAdCallback=((e,t,n)=>{var a=[e,t,n].join("-");if(i[a]){var r=document.getElementById(i[a]).closest(".card--type-html-native-ad");r&&(r.style.display="none",r.parentNode.classList.add("card__wrapper--no-ad"))}}),e.default.on("url:load",e=>{i={};var t=CBSNEWS.edition.market,n=CBSNEWS.edition.isDefault,a=[];a="live"==e.video.type?n?["video","live"]:[t,"video","live"]:(a=n?["video"]:[t,"video"]).concat(e.video.topic.hierarchy),a=[...new Set(a)].join("/").replace(/ /g,"-"),CBSNEWS.ad.gpt.slotVars.topics=a,CBSNEWS.ad.gpt.targeting.ptype="live"===e.video.type?"live_streaming_player":"video",CBSNEWS.ad.gpt.targeting.vguid=CBSNEWS.tracking.pageViewGuid,CBSNEWS.ad.gpt.targeting.firstpg="0",CBSNEWS.ad.gpt.targeting.cid="live"===e.video.type?"live":e.video.slug,CBSNEWS.ad.gpt.targeting.topics="live"===e.video.type?["video","live"]:e.video.topic.all,e.video.playlist.slug?CBSNEWS.ad.gpt.targeting.plist=e.video.playlist.slug:delete CBSNEWS.ad.gpt.targeting.plist,e.initialPageLoad||(CBSNEWS.ad.gpt.targeting.firstpg="0"),window.dispatchEvent(new CustomEvent("ads:destroySlots")),window.dispatchEvent(new CustomEvent("ads:setConfig")),window.dispatchEvent(new CustomEvent("ads:reloadTaboola"))})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(2)],void 0===(a=function(e){"use strict";var t;(e=(t=e)&&t.__esModule?t:{default:t}).default.on("url:load",e=>{e.userInitiated&&(500,function(e,t){if("string"==typeof e)throw new TypeError("Invalid element: should be DOM element, not query string");var i,n=window.pageYOffset,a=window.pageYOffset+e.getBoundingClientRect().top,r=(document.body.scrollHeight-a<window.innerHeight?document.body.scrollHeight-window.innerHeight:a)-n;r&&window.requestAnimationFrame(function e(t){i||(i=t);var a,o=t-i,s=Math.min(o/500,1);s=(a=s)<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1,window.scrollTo(0,n+r*s),o<500&&window.requestAnimationFrame(e)})}(document.querySelector("body")))})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("ad",'<div if="{opts.display}" id="{id}" data-ad="{JSON.stringify(slot)}" class="ad-{opts.slot}" ref="ad"></div>',"",'class="ad__wrapper ad__{opts.slot} {opts.class}"',function(e){this.slot=e.slot,this.id=e.slot,void 0!==e.index&&(this.slot=[this.slot,e.index,{category:e.categoryslug}],this.id=this.slot.join("")),this.initAd=function(){e.display&&(window.cbsiGptDivIds=window.cbsiGptDivIds||[],window.cbsiGptDivIds.push(this.slot))}.bind(this),this.dispatch.on("url:load",e=>this.initAd())})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("embed-bar",'<a href="/video" target="_blank"><svg viewbox="0 0 299 41" width="104" height="22" class="site-logo__icon--type-cbsn" aria-hidden="true"><path d="M40.3 20.8c0 5.5-1.9 10.2-5.8 14.1-3.9 3.9-8.6 5.8-14.1 5.8s-10.2-1.9-14.1-5.8C2.4 31 .5 26.3.5 20.8s2-10.2 5.9-14.1C10.3 2.8 15 .9 20.5.9s10.2 1.9 14.1 5.8c3.8 3.9 5.7 8.6 5.7 14.1Zm-1.2 0c-1.6-3.4-4-6.2-7.3-8.4-3.4-2.3-7.3-3.5-11.5-3.5s-8.1 1.2-11.5 3.5c-3.2 2.2-5.6 5-7.2 8.4 1.6 3.4 4 6.3 7.2 8.5 3.5 2.3 7.3 3.4 11.5 3.4s8-1.1 11.5-3.4c3.3-2.2 5.8-5 7.3-8.5Zm-8.1 0c0 2.9-1 5.4-3.1 7.5-2.1 2.1-4.6 3.1-7.5 3.1-2.9 0-5.4-1-7.5-3.1-2.1-2.1-3.1-4.6-3.1-7.5 0-2.9 1-5.4 3.1-7.5 2.1-2 4.6-3.1 7.5-3.1 2.9 0 5.4 1 7.5 3.1 2.1 2.1 3.1 4.6 3.1 7.5Zm12.9 0C43.9 10.5 52.4 2 63.5 2c10 0 15.2 7.2 15.2 7.2l-5.1 5.1s-3.6-5.1-10-5.1S52 14.3 52 20.8s5 11.6 11.4 11.6c6.7 0 10.3-5.1 10.3-5.1l5.1 5.1s-5.1 7.2-15.4 7.2c-11 0-19.5-8.5-19.5-18.8Zm37.8-18h15.2c7.2 0 11.6 4.4 11.6 9.5 0 5.7-4.9 7.5-4.9 7.5s6.7 1.8 6.7 8.7c0 5.7-4.6 10.3-12.4 10.3H81.7v-36Zm14.7 13.9c2.6 0 4.1-1.5 4.1-3.6S99 9.5 96.4 9.5h-6.9v7.2h6.9Zm1 15.5c3.1 0 4.9-1.8 4.9-4.4 0-2.6-1.8-4.4-4.9-4.4h-8v8.7h8v.1Zm13.8 1.8 5.1-5.1s3.1 3.9 8.5 3.9c4.1 0 5.9-1.8 5.9-4.1 0-6.2-18-3.3-18-16 0-5.7 4.9-10.5 13.1-10.5 8 0 12.1 4.9 12.1 4.9l-5.1 5.1s-2.6-3.1-6.7-3.1c-3.9 0-5.4 1.5-5.4 3.6 0 6.2 18 3.3 18 16 0 5.9-5.1 11.1-13.6 11.1-9.2-.2-13.9-5.8-13.9-5.8Zm40.4-31.2h6.9L176 25.2V2.8h7.7v36h-6.9l-17.5-22.4v22.4h-7.7v-36Zm37.4 0h26.8V10h-19v7h14.9v6.9h-14.9v7.7h19.6v7.2H189v-36Zm29.1 0h8l7.5 24.2h.3l7.5-24.2h7.2l7.5 24.2h.3l7.5-24.2h8l-11.8 36h-7.5L245 15.4h-.3l-7.3 23.4H230l-11.9-36Zm53 31.2 5.1-5.1s3.1 3.9 8.5 3.9c4.1 0 5.9-1.8 5.9-4.1 0-6.2-18-3.3-18-16 0-5.7 4.9-10.5 13.1-10.5 8 0 12.1 4.9 12.1 4.9l-5.1 5.1s-2.6-3.1-6.7-3.1c-3.9 0-5.4 1.5-5.4 3.6 0 6.2 18 3.3 18 16 0 5.9-5.1 11.1-13.6 11.1-9.3-.2-13.9-5.8-13.9-5.8Z" fill="#F1F2F3"></path></svg></a><watch-live></watch-live><social></social>',"",'class="embed-bar"',function(e){})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,a;n=[i(66)],void 0===(a=function(e){"use strict";i(1).tag2("page",'<div class="container"><yield from="before-player"></yield><player></player><carousel if="{!window.isembed}" each="{component, i in layout}" plid="{component.id}" type="{component.type}" component="shelf" slug="{component.slug}" playlist="{component}" index="{i}"></carousel></div><style type="text/css" ref="breaking-news"><style>',"","",function(e){this.flags={state:null,playingDefault:!1},this.layout=[],this.video=null,this.siteTitle=CBSNEWS.edition.siteTitle,this.dispatch.on("feed:ingested:layout",e=>{this.update({layout:e.feed})}),this.dispatch.on("url:history:get",e=>{if(e){if(history.state)(e=history.state).userInitiated=!0,this.flags.playingDefault=!1;else{e.userInitiated=!1,this.flags.playingDefault=!0;try{history.replaceState(e,"")}catch(e){console.error(e)}}this.dispatch.trigger("url:change",e)}}),window.addEventListener("popstate",e=>this.dispatch.trigger("url:history:get",e.state)),this.pageSlugAndTitle=function(e){var t,i,n="-"+this.siteTitle;return"- ".concat(this.siteTitle," Live Video ").concat(n),"playlist"!=e.type&&"listing"!=e.type&&"channel"!=e.type||!e.playlist.url?e.playlist&&"playlist"==e.type?(t="/video/playlist/".concat(e.playlist.slug,"/"),i="".concat(e.playlist.title," ").concat(n)):"live"!=e.video.type&&"dvr"!=e.video.type&&"vod"!=e.video.type||(t=e.video.url,i="".concat(e.video.title," ").concat(n)):(t=e.playlist.url,i="".concat(e.playlist.title," ").concat(n)),[t+=CBSNEWS.originalUrl.search,i]}.bind(this),this.dispatch.on("url:change",e=>{this.flags.state=e;var[t,i]=this.pageSlugAndTitle(e);try{var n=new URL(t);window.location.pathname!==n.pathname&&(this.dispatch.trigger("url:history:set",e),history.pushState(e,i,t)),setTimeout(e=>window.location.hash="#x",0)}catch(e){console.error(e)}document.title=i,document.querySelector('link[rel="canonical"]').setAttribute("href",t);var a=document.querySelector('meta[name="apple-itunes-app"]');a&&a.setAttribute("content",a.getAttribute("content").replace(/app-argument=[^,]+/,"app-argument=".concat(t)))}),this.dispatch.on("url:load",e=>{this.video=e.video}),this.dispatch.on("url:load",e=>{var t=e.video.slug;"live"===e.video.type&&(t="live-"+t),this.refs["breaking-news"].textContent='\n                #breaking-news[data-slug="'.concat(t,'"] {\n                    display: none;\n                }\n            ')}),this.dispatch.on("video:video:changed:type-live",e=>{if(this.video&&this.video.mpxRefId===e.video.mpxRefId){this.video=e.video;var[t,i]=this.pageSlugAndTitle(e);try{history.replaceState(e,i,t)}catch(e){}document.title=i}})})}.apply(t,n))||(e.exports=a)},function(e,t,i){var n,a;n=[i(65),i(140)],void 0===(a=function(e,t){"use strict";var n;t=(n=t)&&n.__esModule?n:{default:n},i(1).tag2("player",'<div class="player__bg"></div><div class="player__wrapper"><aviajs><div class="player-overlay player-overlay--controls"><slider component="slider" limit="3" margin="0"></slider></div></aviajs><embed-bar if="{window.isembed}"></embed-bar><ad display="{topic == \'sponsored_content\'}" slot="player-sponsor-bar" class="ad__player-sponsor-bar"></ad></div><div class="player__bottom-bar"><div class="player__bottom-bar--left"><h1 class="now-playing__hed now-playing">{nowPlaying.type == \'vod\' ? nowPlaying.fulltitle : nowPlaying.title}</h1><span hide="{nowPlaying.type == \'live\'}" class="now-playing__dek"><raw html="{nowPlaying.dek}"></raw></span><span hide="{nowPlaying.type == \'live\'}" class="now-playing__relative">{riot.mixin(\'formatter\').getRelativeTime(nowPlaying.timestamp)}</span></div><div class="player__bottom-bar--right"><social></social></div></div><ad display="{true}" slot="{CBSNEWS.device == \'desktop\' ? \'leader-top\' : \'mobile-omni-plus-sticky\'}" class="ad__leader-video-top"></ad><carousel ref="hero" component="hero" plid="{playlist.id}" slug="{playlist.slug}" type="{playlist.type}" playlist="{playlist}" if="{playlist.type !== \'channel\'}"></carousel>',"",'class="player player--topic-{topic} player--type-{nowPlaying.type}"',function(e){this.playlist={id:null,slug:null,type:null},this.shouldDrag=!1,this.nowPlaying={},this.dispatch.on("url:load",e=>{var t=e.video.playlist;this.nowPlaying=e.video,e.video.topic&&this.getTopic(e.video.topic.hierarchy),this.hexADefault=e.video.hexADefault,this.hexBDefault=e.video.hexBDefault,["davos-interviews-2022","davos-interviews-2023","tbd-media","innovators-disruptors","a-moment-with"].includes(t.slug)?document.body.classList.add("now-playing--tbd-media"):document.body.classList.remove("now-playing--tbd-media"),this.playlist.id!=t.id&&(this.playlist=t,this.dispatch.trigger("player:playlist:changed",{playlist:this.playlist})),this.update()}),this.dispatch.on("video:video:changed:type-live",e=>{this.nowPlaying.type===e.video.type&&this.nowPlaying.mpxRefId===e.video.mpxRefId&&this.update({nowPlaying:e.video})}),this.dispatch.on("player:resource:start",e=>{this.dispatch.trigger("video:data:now-playing",this.nowPlaying)}),this.on("mount",()=>{try{if(window.isembed||"embed"==e.component)return;CBSNEWS.features.executeIfEnabled(["viewability"],function(){this.enableViewabilityPlayer(),this.initDraggablePlayer()},this)}catch(e){console.error("uh oh PLAYER!",e)}var t=function(){this.dispatch.trigger("player:player:fullscreen")};document.addEventListener("fullscreenchange",t,!0),document.addEventListener("mozfullscreenchange",t,!0),document.addEventListener("MSFullscreenChange",t,!0),document.addEventListener("webkitfullscreenchange",t,!0)}),this.hexToRgb=function(e){if(e)return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,i,n)=>"#"+t+t+i+i+n+n).substring(1).match(/.{2}/g).map(e=>parseInt(e,16)).join(",")}.bind(this),this.dispatch.on("player:video:state",e=>{"PLAYING"===e.playbackState?this.shouldDrag=!0:this.shouldDrag=!1}),this.dispatch.on("player:playlist:changed",e=>{var t,i=e.playlist.meta.custom,n=document.getElementById("style--no-var-support--polyfill");if(i){document.body.classList.contains("custom")||document.body.classList.add("custom");var a=i.background,r=this.hexToRgb(i.hexA)||this.hexADefault,o=this.hexToRgb(i.hexB)||this.hexBDefault;t="\n\t\t\t\t\t:root {\n\t\t\t\t\t\t",a&&(t+="\n\t\t\t\t\t\t--custom-bg:\t  \turl(".concat(a,");\n\t\t\t\t\t")),r&&(t+="\n\t\t\t\t\t\t--hex-a:\t\t  \trgb(".concat(r,");\n\t\t\t\t\t\t--hex-a--low: \t  \trgba(").concat(r,", .8);\n\t\t\t\t\t\t--hex-a--lower:   \trgba(").concat(r,", .6);\n\t\t\t\t\t\t--hex-a--lower-b:  \trgba(").concat(r,", .5);\n\t\t\t\t\t\t--hex-a--lowest:  \trgba(").concat(r,", .2);\n\t\t\t\t\t\t--hex-a--lowest-b: \trgba(").concat(r,", .15);\n\t\t\t\t\t")),o&&(t+="\n\t\t\t\t\t\t--hex-b--zero:\t \trgba(".concat(o,", 0);\n\t\t\t\t\t\t--hex-b:\t\t  \trgb(").concat(o,");\n\t\t\t\t\t\t--hex-b--low:\t \trgba(").concat(o,", .8);\n\t\t\t\t\t\t--hex-b--lower:  \trgba(").concat(o,", .6);\n\t\t\t\t\t\t--hex-b--lower-b:  \trgba(").concat(o,", .5);\n\t\t\t\t\t\t--hex-b--lowest:  \trgba(").concat(o,", .2);\n\t\t\t\t\t\t--hex-b--lowest-b:  rgba(").concat(o,", .15);")),t+="}"}else document.body.classList.remove("custom"),t="";n.textContent=t,this.dispatch.trigger("player:feature:theme",{custom:i,css:t})}),this.getTopic=function(e){if(e){var t=e[0].replace(/ /g,"_");this.update({topic:t})}}.bind(this),this.enableViewabilityPlayer=function(){var e=this.tags.aviajs.root,t=this;this.intersectionObserver=new IntersectionObserver(i=>{if(i[0].intersectionRatio<=.2&&this.shouldDrag){e.classList.add("is-sticky");var n=e.getAttribute("data-left");n&&(e.style.left=n);var a=e.getAttribute("data-top");a&&(e.style.top=a),t.containDraggablePlayer(e),this.dispatch.trigger("player:feature:viewability",{enabled:!0})}else e.classList.remove("is-sticky"),e.setAttribute("data-left",e.style.left),e.setAttribute("data-top",e.style.top),e.style.left=null,e.style.top=null},{threshold:.2}),this.intersectionObserver.observe(this.root.querySelector(".player__wrapper")),document.querySelector(".player-overlay__button--close").addEventListener("click",this.disableViewabilityPlayer,!1),this.dispatch.trigger("player:feature:viewability",{enabled:!0})}.bind(this),this.disableViewabilityPlayer=function(){this.tags.aviajs.root.classList.remove("is-sticky"),this.dispatch.trigger("player:feature:viewability",{enabled:!1})}.bind(this),this.dispatch.on("player:livestream:stop",()=>{this.disableViewabilityPlayer()}),this.initDraggablePlayer=function(){var e=this.tags.aviajs.root;e.style.touchAction="none",e.style.msTouchAction="none",this.draggable=(0,t.default)(e,{handle:document.querySelector(".player-overlay--draggable-handle"),onMouseDown:this.activateDraggablePlayer,onTouchStart:this.activateDraggablePlayer,onMouseUp:this.deactivateDraggablePlayer,onTouchStop:this.deactivateDraggablePlayer}),e.addEventListener("contextmenu",function(e){e.preventDefault(),this.deactivateDraggablePlayer(e)},!1),window.addEventListener("orientationchange",()=>{setTimeout(()=>this.containDraggablePlayer(e),500)},!1)}.bind(this),this.activateDraggablePlayer=function(e){e.classList.add("is-dragging")}.bind(this),this.containDraggablePlayer=function(e){var t=e.getBoundingClientRect();t.left<20?e.style.left="20px":t.left>window.innerWidth-t.width-20&&(e.style.left=window.innerWidth-t.width-20+"px"),t.top<20?e.style.top="20px":t.top>window.innerHeight-t.height-20&&(e.style.top=window.innerHeight-t.height-20+"px")}.bind(this),this.deactivateDraggablePlayer=function(e){e.classList.remove("is-dragging");var t=this;setTimeout(function(){t.containDraggablePlayer(e)},100)}.bind(this)})}.apply(t,n))||(e.exports=a)},function(e,t,i){
/*!
 * displacejs.js 1.2.4 - Tiny javascript library to create moveable DOM elements.
 * Copyright (c) 2017 Catalin Covic - https://github.com/catc/displace
 * License: MIT
 */
e.exports=function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(i(1));e.exports=n.default},function(e,t,i){"use strict";function n(){var e=this.el,t=this.opts||o,i={};if(e.style.position="absolute",this.handle=t.handle||e,t.constrain){for(var n=t.relativeTo||e.parentNode,s=e,l=0,u=0;s!==n;)s=s.parentNode,(0,a.isRelative)(s)&&(l-=s.offsetLeft,u-=s.offsetTop),s===n&&(l+=s.offsetLeft,u+=s.offsetTop);var c=l+n.offsetWidth-e.offsetWidth,d=u+n.offsetHeight-e.offsetHeight;i.xClamp=(0,a.generateClamp)(l,c),i.yClamp=(0,a.generateClamp)(u,d)}this.opts=t,this.data=i,this.events={mousedown:r.mousedown.bind(this),mouseup:r.mouseup.bind(this),touchstart:r.touchstart.bind(this),touchstop:r.touchstop.bind(this)},this.handle.addEventListener("mousedown",this.events.mousedown,!1),this.handle.addEventListener("touchstart",this.events.touchstart,!1)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(2),r=i(3),o={constrain:!1,relativeTo:null,handle:null,highlightInputs:!1,onMouseDown:null,onMouseMove:null,onMouseUp:null,onTouchStart:null,onTouchMove:null,onTouchStop:null},s=function(){function e(t,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw Error("Must include moveable element");this.el=t,this.opts=i,n.call(this)}return e.prototype.reinit=function(){this.destroy(),n.call(this)},e.prototype.destroy=function(){var e=this.events;this.handle.removeEventListener("mousedown",e.mousedown,!1),document.removeEventListener("mousemove",e.mousemove,!1),document.removeEventListener("mouseup",e.mouseup,!1),this.handle.removeEventListener("touchstart",e.touchstart,!1),document.removeEventListener("touchmove",e.touchmove,!1),document.removeEventListener("touchstop",e.touchstop,!1)},e}();t.default=function(e,t){return new s(e,t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateClamp=function(e,t){return function(i){return Math.min(Math.max(i,e),t)}},t.generateMoveFn=function(){return window.requestAnimationFrame?function(e,t,i){window.requestAnimationFrame(function(){e.style.left=t+"px",e.style.top=i+"px"})}:function(e,t,i){e.style.left=t+"px",e.style.top=i+"px"}},t.isRelative=function(e){return"relative"===window.getComputedStyle(e).position}},function(e,t,i){"use strict";function n(e,t,i){var n=this.el,a=this.opts,o=this.data;"function"==typeof a.onMouseMove&&a.onMouseMove(n,i);var s=i.clientX-e,l=i.clientY-t;return a.constrain&&(s=o.xClamp(s),l=o.yClamp(l)),r(n,s,l),i.preventDefault(),!1}function a(e,t,i){var n=this.el,a=this.opts,o=this.data;"function"==typeof a.onTouchMove&&a.onTouchMove(n,i);var s=i.targetTouches[0],l=s.clientX-e,u=s.clientY-t;return a.constrain&&(l=o.xClamp(l),u=o.yClamp(u)),r(n,l,u),i.preventDefault(),!1}Object.defineProperty(t,"__esModule",{value:!0}),t.mousedown=function(e){var t=this.opts;if(t.highlightInputs){var i=e.target.tagName.toLowerCase();if("input"===i||"textarea"===i)return}var a=this.el,r=this.events;"function"==typeof t.onMouseDown&&t.onMouseDown(a,e);var o=e.clientX-a.offsetLeft,s=e.clientY-a.offsetTop;r.mousemove=n.bind(this,o,s),document.addEventListener("mousemove",r.mousemove,!1),document.addEventListener("mouseup",r.mouseup,!1)},t.mousemove=n,t.mouseup=function(e){var t=this.el,i=this.opts,n=this.events;"function"==typeof i.onMouseUp&&i.onMouseUp(t,e),document.removeEventListener("mouseup",n.mouseup,!1),document.removeEventListener("mousemove",n.mousemove,!1)},t.touchstart=function(e){var t=this.opts;if(t.highlightInputs){var i=e.target.tagName.toLowerCase();if("input"===i||"textarea"===i)return}var n=this.el,r=this.events;"function"==typeof t.onTouchStart&&t.onTouchStart(n,e);var o=e.targetTouches[0],s=o.clientX-n.offsetLeft,l=o.clientY-n.offsetTop;r.touchmove=a.bind(this,s,l),document.addEventListener("touchmove",r.touchmove,!1),document.addEventListener("touchend",r.touchstop,!1),document.addEventListener("touchcancel",r.touchstop,!1)},t.touchmove=a,t.touchstop=function(e){var t=this.el,i=this.opts,n=this.events;"function"==typeof i.onTouchStop&&i.onTouchStop(t,e),document.removeEventListener("touchmove",n.touchmove,!1),document.removeEventListener("touchend",n.touchstop,!1),document.removeEventListener("touchcancel",n.touchstop,!1)};var r=(0,i(2).generateMoveFn)()}])},function(e,t,n){var a;void 0===(a=function(){"use strict";n(1).tag2("social",'<ul class="social__list"><li><a class="social__link social__link--twitter" href="{nowPlaying.share.twitter}" onclick="{handleClick}" target="_blank"> Twitter <svg viewbox="0 0 32 32" class="social-icons__icon-svg" aria-hidden="true"><use xlink:href="#icon-social-twitter"></use></svg></a></li><li><a class="social__link social__link--facebook" href="{nowPlaying.share.facebook}" onclick="{handleClick}" target="_blank"> Facebook <svg viewbox="0 0 32 32" class="social-icons__icon-svg" aria-hidden="true"><use xlink:href="#icon-social-facebook"></use></svg></a></li><li><a class="social__link social__link--email" href="{nowPlaying.share.email}" target="_blank"> Email <svg viewbox="0 0 32 32" class="social-icons__icon-svg" aria-hidden="true"><use xlink:href="#icon-social-email"></use></svg></a></li><li if="{nowPlaying.type != \'vod\'}"><input name="copy-link" readonly="" riot-value="{nowPlaying.url}"><a class="social__link social__link--link" onclick="{copy}"> Link <svg viewbox="0 0 28 28" class="social-icons__icon-svg" aria-hidden="true"><use xlink:href="#icon-social-link"></use></svg></a><div ref="tooltip" class="social__tooltip"><div class="arrow-up"></div><span class="social__tooltip-icon"><svg viewbox="0 0 23 23" class="social-icons__icon-svg" aria-hidden="true"><use xlink:href="#icon-check"></use></svg></span><span class="social__tooltip-label"> link copied </span></div><textarea class="social__textarea" riot-value="{window.location.href}"></textarea></li><li if="{nowPlaying.type == \'vod\'}"><input name="copy-embed" readonly="" riot-value="<iframe src=&quot;{nowPlaying.url}&quot; id=&quot;cbsNewsVideo&quot; allowfullscreen allow=&quot;fullscreen&quot; frameborder=&quot;0&quot; width=&quot;620&quot; height=&quot;349&quot;></iframe>"><a class="social__link social__link--link" onclick="{copy}"> Embed <svg viewbox="0 0 28 28" class="social-icons__icon-svg" aria-hidden="true"><use xlink:href="#icon-social-embed"></use></svg></a><div ref="tooltip" class="social__tooltip"><div class="arrow-up"></div><span class="social__tooltip-icon"><svg viewbox="0 0 23 23" class="social-icons__icon-svg" aria-hidden="true"><use xlink:href="#icon-check"></use></svg></span><span class="social__tooltip-label"> embed code copied </span></div><textarea class="social__textarea" riot-value="{window.location.href}"></textarea></li></ul>',"",'class="player__social"',function(e){this.msg="copy link",this.nowPlaying={url:null,type:null,mpxRefId:null,share:{facebook:null,twitter:null,email:null}},this.dispatch.on("url:load",e=>{this.resetCheck(),this.updateInfo(e.video)}),this.updateInfo=function(e){if(e){var t=e.title,i=e.url,n={url:i,type:e.type,mpxRefId:e.mpxRefId,share:{facebook:"http://www.facebook.com/sharer.php?u="+encodeURIComponent(i)+"&t="+encodeURIComponent(t),twitter:"https://twitter.com/intent/tweet?url="+encodeURIComponent(i)+"&text="+encodeURIComponent(t)+"&via=CBSNews",email:"mailto:?subject="+encodeURIComponent("CBS News: "+t+" -- CBS News Live News")+"&body="+encodeURIComponent("WATCH: "+t+"\r\n"+i+"\r\n\r\nSee more CBS News video, a free live news stream featuring original CBS News reporting: https://www.cbsnews.com/live/")}};this.update({nowPlaying:n})}}.bind(this),this.showTooltip=function(){this.refs.tooltip.classList.remove("is-hidden"),this.refs.tooltip.classList.add("is-visible"),setTimeout(this.hideTooltip,1200)}.bind(this),this.hideTooltip=function(){this.refs.tooltip.classList.add("is-hidden"),this.refs.tooltip.classList.remove("is-visible"),setTimeout(function(e){e.refs.tooltip.classList.remove("is-hidden")},1200,this)}.bind(this),this.resetCheck=function(){setTimeout(function(){var e=document.querySelectorAll(".social-overlay__button");for(i=0;i<e.length;i++)e[i].classList.remove("social-overlay__button--is-checked")},1e3)}.bind(this),this.handleClick=function(e){e.preventDefault();var t=e.currentTarget.getAttribute("href"),i=screen.width/2-480,n=screen.height/2-275.5;CBSNEWS.device,-1!=navigator.userAgent.indexOf("Edge")||navigator.userAgent.indexOf("Trident"),window.open(t,"securePopup","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width=960, height=551, top="+n+", left="+i)}.bind(this),this.copy=function(e){e.preventDefault(),e.currentTarget.previousElementSibling.select();try{document.execCommand("copy"),this.showTooltip()}catch(e){}}.bind(this)})}.apply(t,[]))||(e.exports=a)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("watch-live",'<a class="{watch-live--expanded: (isExpanded || isBreaking), watch-live--is-live: isLive, watch-live: true}" ref="watchlive" href="{breakingLink || defaultLink}" target="_top"><div class="watch-live__label"><div class="icon-pulse__container"><div class="icon-pulse--white"></div><div class="icon-pulse--red"></div><div class="icon-pulse--pulse"></div><div class="icon-pulse--disc"></div></div> {breakingLabel || defaultLabel} </div><span class="watch-live__headline">{breakingHeadline || liveHeadline || defaultHeadline}</span></a>',"","",function(e){this.defaultLabel=window.isembed?"live":"watch live",this.defaultHeadline="CBS News Live",this.defaultLink="/live/",this.isLive=!0,this.isExpanded=!0,this.dispatch.on("url:load",e=>{this.isLive="live"==e.video.type,this.isExpanded=!0,this.update(),this.refs.anchor&&(this.refs.anchor.payload=this.item)}),this.dispatch.on("component:breaking:changed",e=>{var t="1"==e.breaking;this.isBreaking?(this.breakingLabel=e.item.label||"breaking",this.breakingHeadline=e.item.headline,this.breakingLink=e.item.link,clearTimeout(this.breakingHideTimeout)):(this.breakingLabel=null,this.breakingHeadline=null,this.breakingLink=null,delete this.refs.watchlive.payload),this.update({isBreaking:t})}),this.dispatch.on("video:data:changed:fusion-cbsnews",e=>{this.liveVideo=e.playlist.items.find(e=>"live"===e.type);var t=this.liveVideo.title;this.refs.watchlive.payload=this.liveVideo,this.update({liveHeadline:t})}),this.on("updated",()=>{this.isBreaking||0==this.isExpanded||(clearTimeout(this.breakingHideTimeout),this.breakingHideTimeout=setTimeout(()=>{this.isExpanded=!1,this.refs.watchlive.blur(),this.update()},6e3))})})}.apply(t,[]))||(e.exports=n)}])}),define("utils/get-relative-time",[],function(){"use strict";return function(e){if(!e)return"";var t=new Date,i=Math.floor((t-e)/1e3);if(i<=60)return"just now";if(i<=3600)return Math.round(i/60)+"m ago";if(i<=86400)return Math.round(i/3600)+"h ago";var n=e.getMonth(),a=e.getDate(),r=e.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][n]+" "+a+", "+r}}),define("components/live-headline",["utils/get-relative-time"],function(e){var t={};function i(e,i){require([i],function(i){fetch(e,{credentials:"same-origin"}).then(e=>{if(!e.ok)throw new Error("Rundown error");return e.text()}).then(a=>{i.process(e,a,t,n)}).catch(e=>{console.error("Error:",e)})})}function n(e,i){var n=e.options.fieldMap||{"":"epgSeriesName"};require([e.options.adapter],function(a){var r=a.getRundown(e,i,t);for(var o in n){var s=o,l=r[n[o]],u=s.split("::");s=u[0];var c=u[1],d=[e.node];s&&(d=Array.prototype.slice.call(e.node.querySelectorAll(s))),l=a.filterField(n[o],l,e),d.length&&void 0!==l&&(c?d.forEach(function(e){e.setAttribute(c,l)}):d.forEach(function(e){e.textContent=l,"epgSeriesName"==n[o]&&null==l?e.textContent=r.headlineshort:e.textContent=l}))}if(e.options.documentClassName){var h=document.documentElement.classList;1==i.status?(shareUrl=new URL(r.shareUrl),document.location.pathname===shareUrl.pathname?h.remove(e.options.documentClassName):h.add(e.options.documentClassName)):h.remove(e.options.documentClassName)}})}return function(e,a){var r=a.rundownUrl,o=(a.segmentType,a.segmentIndex,a.refresh),s={node:e,options:a};r?(t[r]||(t[r]={status:null,rundown:void 0,elements:[]},i(r,a.adapter),!0===o&&setInterval(function(){i(r,a.adapter)},6e4)),t[r].elements.push(s),t[r].rundown&&n(s,t[r])):console.error("Rundown URL is not provided:",s,a)}}),require(["common"]),require(["video/fms","video/common","video/main"]),require(["components/live-headline"]),define("main.video",function(){});