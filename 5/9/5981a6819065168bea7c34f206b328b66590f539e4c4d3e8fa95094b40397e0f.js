(window.webpackJsonp=window.webpackJsonp||[]).push([[44,6,33],{1562:function(t,e,n){"use strict";n.r(e);var r=n(36),a=n(30),c=n(218),o=n(203),u=n(37),s=n(1),i=n(150),p=n(151),f=n(153),d=n(152),l=n(0),h=n.n(l),v=n(300),b=n.n(v),m=n(5),O=n(305),S=n(408),y=n(35),g=n(407),T=Object(m.a)(,j=function(t){Object(f.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.call(this)).buildStopsObj=function(e,n){var r=t.props.tourId,a=e.map(function(t,e){return Object(s.a)(Object(s.a)({},t),{order:e,tourId:r,type:"popup"})});t.setState(},t.onStopChange=function(e){var n=t.props,r=n.stopIds,a=n.toggleEditChanges,c=e.map(function(t){return t.id});t.buildStopsObj(e,c),b()(r,c)?a(!1):a(!0)},t.saveNewStopList=function(){var e=t.state,n=e.tourStopsToDelete,r=e.stopIdOrder,a=t.props,c=a.tourId,o=a.updateTour,u=a.deleteTourStops;n.length?u(c,{id:c,stopIdsToDelete:n,stopIds:r,uptoDate:!1}):o({id:c,stopIds:r,uptoDate:!1})},t.createStop=function(){var e=t.props,n=e.newTour,r=e.currentTour,a=e.permissions,c=e.guardRails,o=e.handleTourSave,u=e.handleNoAccessClick;if(n&&o(),Object(g.b)(r,a,c)){u("Please upgrade your plan to add more tour stops","noAccessCreateNewStop")}else t.handleCreateStopRedirect()},t.handleCreateStopRedirect=function(){var e=t.props,n=e.tourId,r=e.newTour,a=e.history;r?a.push({pathname:"/home/".concat(n,"/edit/newstop"),state:{newTour:!0}}):a.push("/home/".concat(n,"/edit/newstop"))},t.removeStopFromList=function(e){var n=t.state.tourStops.filter(;t.onStopChange(n),t.setState(function(t){var n=t.tourStopsToDelete;return{tourStopsToDelete:[].concat(Object(u.a)(n),[e])}})},t.state={tourStops:[],stopIdOrder:[],tourStopsToDelete:[]},t}return Object(p.a)(n,[{key:"componentDidMount",value:,{key:"componentDidUpdate",value:function(t,e){var n=this.props,r=n.stopIds,a=n.tourStops,c=n.toggleEditChanges,o=this.state.stopIdOrder;b()(t.tourStops,a)||this.buildStopsObj(a,r),b()(o,r)&&c(!1)}},{key:"render",value:function(){var t=this.state.tourStops,e=this.props,n=e.path,r=e.history,a=e.highlightMarker,c=e.hasEdits,o=e.userEmail,u=e.newTour,s=e.stopIds,i=e.tier,p=e.permissions.maxStopsPerTour,f=e.renderModal,d=e.saving,l=h.a.createElement(h.a.Fragment,null,"Tour Stops:"," ","starter"===i?h.a.createElement("span",null,"".concat(t.length," / ").concat(p)):h.a.createElement("span",null,"".concat(t.length)));return h.a.createElement(S.default,{route:"edit-tour",classNames:"stop-cards"},h.a.createElement(O.a,{headerTitle:l,hasEdits:c,newTour:u,saving:d,handleClick:this.saveNewStopList,hideSaveBtn:!s.length},h.a.createElement(y.a,{className:"text-btn",handleClick:this.createStop,"data-cy":"tour-create-stop"},h.a.createElement("i",{className:"material-icons"},"add_circle"),"\xa0New Tour Stop")),h.a.createElement(T,{tourStops:t,path:n,history:r,highlightMarker:a,handleStopChange:this.onStopChange,userEmail:o,handleStopRemove:this.removeStopFromList}),f({routeSaveTour:this.saveNewStopList}))}}]),n}(l.Component),I=n(221),E=n(158);e.default=Object(r.c)(function(t){return{permissions:t.account.permissions,tier:t.account.tier,hasEdits:t.config.hasEdits,userEmail:t.userCredentials.email,guardRails:Object(I.a)(t)}},(j)},169:function(t,e,n){"use strict";var r=n(11),a=n(12),c=n(0),o=n.n(c),u=n(155),s=n(27),i=n(54),p=(n(84),["saving","changed","savingText","changedText","changedIcon","doneText","doneIcon","className","style","handleClick","name","disabled","permission","type"]);e.a=function(t){var e=t.saving,n=t.changed,c=t.savingText,f=t.changedText,d=t.changedIcon,l=void 0===d?"sync":d,h=t.doneText,v=t.doneIcon,b=t.className,m=t.style,O=t.handleClick,S=t.name,y=t.disabled,g=t.permission,T=void 0===g?"":g,j=t.type,I=void 0===j?"button":j,E=Object(a.a)(t,p),x=Object(s.a)(T),A=Object(r.a)(x,1)[0],C=!u.k[T]||A;return o.a.createElement("button",Object.assign({className:"btn-update ".concat(b),name:S,style:m,onClick:O,disabled:y||!C,type:I},E),e?o.a.createElement(o.a.Fragment,null,o.a.createElement(i.ClipLoader,{key:"loader",color:"none",size:10}),c):n?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"material-icons"},C?l:"lock"),f):o.a.createElement(o.a.Fragment,null,v&&o.a.createElement("i",{className:"material-icons"},v),h))}},182:function(t,e,n){"use strict";n.d(e,"c",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"b",function(){return l}),n.d(e,"d",function(){return h}),n.d(e,"a",function(){return v});var r=n(2),a=n.n(r),c=n(3),o=n(23),u=n(6),s=n(7),i=n(28),p=n(25),f=function(t){var e=Object(s.a)();return fetch("".concat(u.a.tourAPI,"/accounts/").concat(encodeURIComponent(t)),{headers:e,credentials:"include"}).then(.then(function(t){return t})},d=function(t){var e=t.accountId,n=t.userId,r=t.packageQuantity,a=t.newTier,c=t.accountName,i=Object(s.a)();return fetch("".concat(u.a.accountsAPI,"/api/admin/accounts/tour/upgrade/").concat(encodeURIComponent(n)),{method:"POST",headers:i,body:JSON.stringify(t),credentials:"include"}).then(function(t){return t.json()}).then(function(t){if("string"===typeof t)return t;var n=t.stripeResponse,u=t.newPermissions,s=n;return o.a.push("/home/settings/subscription"),Object.assign({},{name:c,aid:e,stripeId:s.id,tier:a,packageQuantity:r,tierPermissions:u,customer:s})})},l=function(t,e){var n=new Headers,r=i.a.token;n.append("Authorization","Bearer ".concat(r));var a=[];if(e){var c=encodeURIComponent(e);a.push("search=".concat(c))}t&&a.push("start=".concat(t));var o=a.length?"".concat(u.a.tourAPI,"/admin/v2/accounts?sort=name asc, tier asc&").concat(a.join("&")):"".concat(u.a.tourAPI,"/admin/v2/accounts?sort=name asc, tier asc");return fetch(encodeURI(o),{headers:n,credentials:"include"}).then(function(t){return t.json()}).then(function(t){return t}).catch(},h=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c,o=arguments;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],r=Object(s.a)(),t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/v2/accounts/").concat(encodeURIComponent(e)),{headers:r,credentials:"include"});case 4:return c=t.sent,t.next=7,Object(p.a)(c,n);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),v=function(t,e){var n=Object(s.a)();return fetch("".concat(u.a.accountsAPI,"/api/v2/").concat(encodeURIComponent(t),"/settings/ga"),{headers:n,method:"PUT",body:JSON.stringify(e),credentials:"include"}).then(function(t){return t.json()}).then(function(t){return t}).catch(}},195:function(t,e,n){"use strict";var r=n(2),a=n.n(r),c=n(3),o=n(6),u=n(7),s=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(),t.prev=1,t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/").concat(encodeURIComponent(e.userId),"/source/update"),{method:"POST",headers:n,body:JSON.stringify(e),credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:if(!(c=t.sent).errorMessage){t.next=10;break}return t.abrupt("return",c.errorMessage);case 10:return t.abrupt("return",c);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",t.t0);case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(),t.prev=1,t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/").concat(encodeURIComponent(e.userId),"/source/new"),{method:"POST",headers:n,body:JSON.stringify(e),credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:if(!(c=t.sent).errorMessage){t.next=10;break}return t.abrupt("return",c.errorMessage);case 10:return t.abrupt("return",c);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",t.t0);case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(u.a)(),t.prev=1,t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/payments/").concat(encodeURIComponent(e)),{headers:n,credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(e){return t.apply(this,arguments)}}(),f=n(182),d=n(197),l=n(36);n.d(e,"f",function(){return v}),n.d(e,"e",function(){return b}),n.d(e,"c",function(){return m}),n.d(e,"h",function(){return O}),n.d(e,"g",function(){return S}),n.d(e,"b",function(){return y}),n.d(e,"d",function(){return g}),n.d(e,"a",function(){return T});var h=function(t){return{type:"SAVE_PAYMENT_INFO",data:t}},v=function(t){return{type:"SET_STRIPE_ERROR",error:t}},b=function(t){return{type:"SAVE_ACCOUNT_INFO",stripeId:t.stripeId,status:t.status,tier:t.tier,packageQuantity:t.packageQuantity,permissions:t.tierPermissions||{},payment:t.customer,aid:t.aid,name:t.name,gaId:t.gaId,mapboxToken:t.mapboxToken}},m=function(t,e){return function(n){Object(f.b)(t,e).then(function(t){n({type:"SAVE_ALL_ACCESSIBLE_ACCOUNTS",accounts:t})})}},O=function(t){return function(e){e({type:"ACCOUNT_UPDATING"}),Object(f.e)(t).then(function(n){e(Object(d.c)(t.newTier)),"string"===typeof n?Object(l.b)(function(){e(v(n)),e({type:"ACCOUNT_UPDATING"})}):Object(l.b)(function(){e(b(n)),e({type:"ACCOUNT_UPDATING"})})})}},S=function(t){return function(e){e({type:"ACCOUNT_UPDATING"}),s(t).then(function(n){"string"===typeof n?Object(l.b)(function(){e(v(n)),e({type:"ACCOUNT_UPDATING"})}):(Object(l.b)(function(){e(h(n)),e({type:"ACCOUNT_UPDATING"})}),"function"===typeof t.callback&&t.callback())})}},y=function(t){return function(e){e({type:"ACCOUNT_UPDATING"}),i(t).then(function(n){"string"===typeof n?(Object(l.b)(,e(v(n)),e({type:"ACCOUNT_UPDATING"})):(Object(l.b)(function(){e(h(n)),e({type:"ACCOUNT_UPDATING"})}),"function"===typeof t.callback&&t.callback())})}},g=function(t){return function(e){p(t).then(}},T=function(t,e){return function(n){n({type:"ACCOUNT_UPDATING"}),Object(f.a)(t,e).then(function(t){Object(l.b)(function(){n({type:"UPDATE_GAID",gaId:t.gaId}),n({type:"ACCOUNT_UPDATING"})})})}}},197:function(t,e,n){"use strict";n.d(e,"b",function(){return p}),n.d(e,"a",function(){return f}),n.d(e,"c",function(){return d});var r=n(2),a=n.n(r),c=n(3),o=n(36),u=n(170),s=n(162),i=n(158),p=function(t,e){return function(n){Object(u.c)(t).then(function(t){var r=t.tour;Object(o.b)(function(){n(Object(i.h)(r)),n(Object(s.b)(!0))}),"function"===typeof e&&e()})}},f=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(t);case 2:r=e.sent,n(l(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},d=function(t){return function(e,n){var r=Object.values(n().tourData.tours).filter(function(t){return t.published}).map(function(t){return t.id});Promise.all(r.map(function(){var e=Object(c.a)(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)(n,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()))}},l=function(t){return{type:"SAVE_PUBLIC_TOUR",aid:t.aid,id:t.id,panos:t.panos,images:t.images,videos:t.videos,audio:t.audio,stops:t.stops,tours:t.tourData,tier:t.tier,active:t.active,gaId:t.gaId,mapboxToken:t.mapboxToken}}},203:function(t,e,n){"use strict";function r(t){return function(e,n){t!==n().config.hasEdits&&e({type:"TOGGLE_EDIT_CHANGES",value:t})}}n.d(e,"a",function(){return r})},206:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,a=n(2),c=n.n(a),o=n(3),u=n(38),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120;return function(){var e=Object(o.a)(c.a.mark(function e(n){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r&&clearInterval(r),n(i()),r=setInterval(1e3*t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},i=function(){return function(){var t=Object(o.a)(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a();case 2:n=t.sent,e(p(n));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},p=function(t){return{type:"SAVE_ACTIVE_SESSIONS",data:t}}},218:function(t,e,n){"use strict";var r=n(2),a=n.n(r),c=n(3),o=n(36),u=n(170),s=n(6),i=n(7),p=n(162),f=n(195),d=n(182),l=n(158),h=n(220),v=n(206),b=n(263);n.d(e,"a",function(){return m}),n.d(e,"d",function(){return O}),n.d(e,"b",function(){return S}),n.d(e,"e",function(){return y}),n.d(e,"g",function(){return T}),n.d(e,"f",function(){return j}),n.d(e,"h",function(){return I}),n.d(e,"c",function(){return E});var m=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(t).then(function(t){var e=r().media.mediaFetched;t.aid&&Object(o.b)(function(){n(y(t)),!e&&n(Object(p.d)(t))})});case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},O=S=function(t,e){return function(){var n=Object(c.a)(a.a.mark(function n(r){var c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(d.d)(t);case 3:(c=n.sent)?c.aid&&(localStorage.setItem("aid",c.aid),Object(o.b)(function(){r(Object(f.e)(c)),r(Object(h.a)()),r(Object(l.e)(c.aid,!0)),r(Object(p.b)(!0)),r(Object(v.a)()),r(Object(b.e)())}),localStorage.setItem("accountSwapped","true"),"function"===typeof e&&e()):r({type:"TOUR_ACCOUNT_SWAP_ERROR",value:!0}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:"TOUR_ACCOUNT_SWAP_ERROR",value:!0});case 10:case"end":return n.stop()}},n,null,[[0,7]])}));return function(t){return n.apply(this,arguments)}}()},y=g=function(t){var e=t.tourId;return{type:"SAVE_ACCOUNT_TOUR",tour:t.tour,tourId:e}},T=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.e)(t).then(function(t){var e=t.tourId,r=t.updatedTour;n(g({tourId:e,tour:r}))});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},j=function(t){return function(e){(function(t){var e=t,n=Object(i.a)();return fetch("".concat(s.a.tourAPI,"/allstops"),{method:"POST",headers:n,body:JSON.stringify(e),credentials:"include"}).then(.then(})(t).then(function(t){var n;e({type:"SAVE_NEW_STOP_ORDER",tour:(n=t).tour,tourId:n.tourId})})}},I=function(){return{type:"SHOW_STOP_DESCRIPTION"}},E=function(){return{type:"HIDE_STOP_DESCRIPTION"}}},220:function(t,e,n){"use strict";n.d(e,"d",function(){return h}),n.d(e,"c",function(){return b}),n.d(e,"e",function(){return m}),n.d(e,"b",function(){return S}),n.d(e,"a",function(){return y});var r=n(2),a=n.n(r),c=n(3),o=n(36),u=n(22),s=n(182),i=(n(218),n(195)),p=n(158),f=n(162),d=n(206),l=function(t){return{type:"SAVE_POLICY_STATUS",privacyPolicy:t}},h=function(t){return{type:"SAVE_USER_CREDS",data:t}},v=function(t){var e=t.permissions;return{type:"SET_USER_PERMISSIONS",permissions:void 0===e?{}:e}},b=function(t,e){return function(){var n=Object(c.a)(a.a.mark(function n(r){var c,s,i,v,b,m;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(u.b)(t);case 2:(s=n.sent).privacyPolicy||"function"===typeof e&&e(),i=Boolean(null===s||void 0===s?void 0:null===(c=s.roles)||void 0===c?void 0:c.find(),v=s.accounts[0],localStorage.setItem("default-aid",v),localStorage.setItem("uid",t),(!(b=localStorage.getItem("aid"))||b&&!i)&&localStorage.setItem("aid",v),m=localStorage.getItem("aid"),Object(o.b)(function(){i&&r({type:"SET_ROOT_ADMIN"}),r(h(s)),r(O()),r(l(s.privacyPolicy)),r(Object(p.e)(m)),r(Object(f.b)(!0)),r(y()),r(Object(d.a)())});case 12:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()},m=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.l)(t);case 2:(r=e.sent)&&Object(o.b)(;case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("aid"),t.next=3,Object(s.d)(n);case 3:return r=t.sent,t.next=6,e(Object(i.e)(r));case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},S=function(t){return function(){var e=Object(c.a)(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(t);case 2:r=e.sent,n(h(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},y=function(t){return function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.e)();case 2:n=t.sent,(r=n[localStorage.getItem("aid")])&&e(v(r));case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},221:function(t,e,n){"use strict";var r=n(222),a=Object(r.createSelector)(function(t){return t.tours.tours},function(t,e){var n=Object.keys(e).length,r=Object.keys(t).length,a=Object.keys(t).map(function(e){return t[e]}),c=a.reduce(function(t,e){return t[e.id]=e.stopIds&&e.stopIds.length,t},{});return{totalCreatedStops:n,totalActiveStops:a.reduce(function(t,e){return e.stopIds?t+e.stopIds.length:0},0),totalTours:r,stopCountPerTour:c}});e.a=a},222:function(t,e,n){"use strict";_esModule=!0,e.defaultMemoize=a,e.createSelectorCreator=c,e.createStructuredSelector=var o=e.createSelector=c(a)},263:function(t,e,n){"use strict";var r=n(2),a=n.n(r),c=n(3),o=n(22),u=n(6),s=n(7),i=n(25),p=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e||localStorage.getItem("aid"),r=Object(s.a)(),t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/v2/accounts/").concat(n,"/users"),{method:"GET",headers:r});case 4:return c=t.sent,t.next=7,Object(i.a)(c);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(c.a)(a.a.mark(function t(e,n){var r,c,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n||localStorage.getItem("aid"),c=Object(s.a)(),t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/v2/accounts/").concat(r,"/users"),{method:"POST",headers:c,body:JSON.stringify(e)});case 4:return o=t.sent,t.next=7,Object(i.a)(o);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(c.a)(a.a.mark(function t(e,n,r){var c,o,p;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r||localStorage.getItem("aid"),o=Object(s.a)(),t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/v2/accounts/").concat(c,"/users/").concat(e),{method:"PUT",headers:o,body:JSON.stringify(n)});case 4:return p=t.sent,t.next=7,Object(i.a)(p);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return (),l=function(){var t=Object(c.a)(a.a.mark(function t(e,n){var r,c,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n||localStorage.getItem("aid"),c=Object(s.a)(),t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/v2/accounts/").concat(r,"/users/").concat(e),{method:"DELETE",headers:c});case 4:return o=t.sent,t.next=7,Object(i.a)(o);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(c.a)(a.a.mark(function t(e){var n,r,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e||localStorage.getItem("aid"),r=Object(s.a)(),t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/v2/accounts/").concat(n,"/roles"),{method:"GET",headers:r});case 4:return c=t.sent,t.next=7,Object(i.a)(c);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();n.d(e,"d",function(){return b}),n.d(e,"c",function(){return m}),n.d(e,"a",function(){return O}),n.d(e,"h",function(){return S}),n.d(e,"b",function(){return y}),n.d(e,"f",function(){return g}),n.d(e,"e",function(){return x}),n.d(e,"g",function(){return C});var v="Something went wrong! Please try again",b=function(){return function(){var t=Object(c.a)(a.a.mark(function t(e,n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e(A()),t.prev=1,t.next=4,p();case 4:t.sent.forEach(function(t){e(T(t))}),e(C()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(w(t.t0.errorMessage||v));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,n){return t.apply(this,arguments)}}()},m=function(){return function(){var t=Object(c.a)(a.a.mark(function t(e,n){var r,c,o,u,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e(A()),t.prev=1,t.next=4,h();case 4:r=t.sent,c=r.roles,o=void 0===c?[]:c,u=r.assignments,s=void 0===u?[]:u,o.forEach(function(t){e(j(t))}),s.forEach(,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e(w(t.t0.errorMessage||v));case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e,n){return t.apply(this,arguments)}}()},O=function(t,e){return function(){var n=Object(c.a)(a.a.mark(function n(r,c){var o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(A()),n.next=4,f(t);case 4:r(C()),"function"===typeof e&&e(),r(b()),r(m()),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),o=n.t0.errorMessage||v,r(w(o,n.t0.status));case 14:case"end":return n.stop()}},n,null,[[0,10]])}));return function(t,e){return n.apply(this,arguments)}}()},S=function(t,e,n){return function(){var r=Object(c.a)(a.a.mark(function r(c,o){var u;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c(A()),r.next=4,d(t,e);case 4:c(C()),"function"===typeof n&&n(),c(b()),c(m()),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),u=r.t0.errorMessage||v,c(w(u,r.t0.status));case 14:case"end":return r.stop()}},r,null,[[0,10]])}));return function(t,e){return r.apply(this,arguments)}}()},y=function(t,e){return function(){var n=Object(c.a)(a.a.mark(function n(r,c){var o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(A()),n.next=4,l(t);case 4:r(E(t)),r(C()),"function"===typeof e&&e(),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),o=n.t0.errorMessage||v,r(w(o,n.t0.status));case 13:case"end":return n.stop()}},n,null,[[0,9]])}));return ()},g=function(t,e){return function(){var n=Object(c.a)(a.a.mark(function n(r){var c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(A()),n.next=4,Object(o.j)(t);case 4:r(C()),"function"===typeof e&&e(),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),c=n.t0.errorMessage||v,r(w(c,n.t0.status));case 12:case"end":return n.stop()}},n,null,[[0,8]])}));return ()},T=function(t){return{type:"SAVE_ACCOUNT_USER",user:t}},j=function(t){return{type:"SAVE_ACCOUNT_ROLE",role:t}},I=function(t){return{type:"SAVE_ACCOUNT_ASSIGNMENT",assignment:t}},E=x=A=function(){return{type:"ACCOUNT_USERS_STATUS",status:"saving",errorMessage:"",errorCode:""}},C=w=,305:function(t,e,n){"use strict";var r=n(0),a=n.n(r),c=n(24),o=n.n(c),u=n(35),s=n(169),i=(n(306),n(155));e.a=function(t){var e=t.children,n=t.handleClick,r=t.handleDelete,c=t.hasEdits,p=t.headerText,f=t.headerTitle,d=t.hideSaveBtn,l=t.newTour,h=t.saving,v=t.showDeleteBtn;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"tour-editor-sidebar-header"},a.a.createElement("div",{className:"title-wrapper"},a.a.createElement("h2",null,f),v&&a.a.createElement(u.a,{className:"tour-editor-sidebar-header__delete-btn delete-btn text-btn",handleClick:,a.a.createElement("i",{"aria-hidden":"true",className:"material-icons form-delete"},"delete"),"DELETE"),d?null:a.a.createElement(s.a,{disabled:!c||h,changed:c,saving:h,className:o()("update-tour",{edits:c&&!h}),handleClick:n,changedText:l?"Save":"Update",savingText:l?"Saving":"Updating",doneText:l?"\u2713 Saved":"\u2713 Updated",permission:i.k.manageTours,"data-cy":"tour-update-btn"},a.a.createElement("i",{className:"material-icons"},"save"),"\xa0 Update")),e,p&&a.a.createElement("p",null,p)))}},306:function(t,e,n){},345:407:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return a}),n.d(e,"a",;var r=function(t,e,n){return 0!==e.maxStopsPerTour&&t&&t.stopIds.length>=e.maxStopsPerTour||n.totalActiveStops>=e.maxStops},a=function(t,e){return 0!==t.maxTours&&t.maxTours<=Object.keys(e).length},c=function(t,e,n){return 0===e.maxStopsPerTour?t&&n.totalActiveStops<e.maxStops:t&&t.stopIds.length<e.maxStopsPerTour&&n.totalActiveStops<e.maxStops}},408:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r);n(345);e.default=function(t){var e=t.route,n=t.children,r=t.classNames;return a.a.createElement("aside",{id:"sidebar-wrapper-".concat(e),className:r},n)}}}]);