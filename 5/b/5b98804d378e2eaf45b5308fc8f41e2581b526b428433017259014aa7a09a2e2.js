import{a as M,m as q}from"./vuex.esm-bundler_aa359dca_r24-02-0_b0_t240129-161140.js";import{H as w,L as n,A as r,D as c,N as L,I as s,O as C,J as l,Z as v,G as d,_ as p,B as S,x as F,X as Y,Q as J,a7 as I}from"./vendor_6ed58054_r24-02-0_b0_t240129-161140.js";import{u as U,c as x,d as Q,_ as z,G as $}from"./index_31ad23dc_r24-02-0_b0_t240129-161140.js";import{u as Z}from"./csrViewStoreEmailSignupCMS_e63ea81f_r24-02-0_b0_t240129-161140.js";import{l as X}from"./cmsContentHelper_f68cc642_r24-02-0_b0_t240129-161140.js";import{s as ee}from"./stateMachineMixinFactory_56714f8c_r24-02-0_b0_t240129-161140.js";import{R as te}from"./ModalResponsive_88f7b561_r24-02-0_b0_t240129-161140.js";import{E as oe}from"./EmailCheck_3b9ce130_r24-02-0_b0_t240129-161140.js";import ie from"./ForgotPassword_4c91c72a_r24-02-0_b0_t240129-161140.js";import{G as y,H as G}from"./lsanalytics-loyalty_c6fb8ea0_r24-02-0_b0_t240129-161140.js";import{u as B}from"./csrGlobalStoreCMSSitewide_0c2e7b56_r24-02-0_b0_t240129-161140.js";import{B as D}from"./BlockBasic_fa826e2d_r24-02-0_b0_t240129-161140.js";import{C as ae}from"./CheckboxItem_c90003c9_r24-02-0_b0_t240129-161140.js";import{D as se}from"./DropdownGroup_166fff12_r24-02-0_b0_t240129-161140.js";import{E as ne,u as re}from"./AlertNotice_f548d739_r24-02-0_b0_t240129-161140.js";import{T as le}from"./TextField_69ef4928_r24-02-0_b0_t240129-161140.js";import{P as V}from"./PasswordField_e5e3802a_r24-02-0_b0_t240129-161140.js";import{C as H}from"./ClickwrapNotice_237df641_r24-02-0_b0_t240129-161140.js";import{S as T}from"./SvgIcon_e55bd28a_r24-02-0_b0_t240129-161140.js";import{r as ce}from"./registrationMixin_78800bdc_r24-02-0_b0_t240129-161140.js";import{j as de,i as me,e as j,b as ue}from"./lsanalytics-login_d6e95fa1_r24-02-0_b0_t240129-161140.js";import{N as he}from"./NewsLetterChoiceSelect_84d7fd52_r24-02-0_b0_t240129-161140.js";import{_ as A}from"./_plugin-vue_export-helper_c27b6911_r24-02-0_b0_t240129-161140.js";import{l as pe}from"./loginMixin_b6cf989f_r24-02-0_b0_t240129-161140.js";import{E as _e}from"./ErrorMessages_003296c8_r24-02-0_b0_t240129-161140.js";import{i as ke}from"./formUtils_6ef7a20f_r24-02-0_b0_t240129-161140.js";import{u as ge}from"./useLogin_450d73b5_r24-02-0_b0_t240129-161140.js";import{s as Ce,S as f,E}from"./registrationGateModalFlowConfig_9df5dacd_r24-02-0_b0_t240129-161140.js";import"./typeOf_b861069e_r24-02-0_b0_t240129-161140.js";import"./i18n_4b81f106_r24-02-0_b0_t240129-161140.js";import"./Modal_886b6642_r24-02-0_b0_t240129-161140.js";import"./trapFocus_6aa864f5_r24-02-0_b0_t240129-161140.js";import"./SpinnerSkeleton_362db941_r24-02-0_b0_t240129-161140.js";import"./csrGlobalStoreAppState_f9ff4bfa_r24-02-0_b0_t240129-161140.js";import"./useEmail_841316a4_r24-02-0_b0_t240129-161140.js";import"./dateRules_139f881d_r24-02-0_b0_t240129-161140.js";import"./regexRules_cc2f3e2b_r24-02-0_b0_t240129-161140.js";import"./regexLocalization_16c032f3_r24-02-0_b0_t240129-161140.js";import"./csrViewStoreUpdatePassword_df31b06e_r24-02-0_b0_t240129-161140.js";import"./rules_bb747cab_r24-02-0_b0_t240129-161140.js";import"./FormSubmitButton_a45b7583_r24-02-0_b0_t240129-161140.js";import"./serverToUserErrorMessageTransformer_631b8f39_r24-02-0_b0_t240129-161140.js";const ye="create account",fe={provide:()=>({allowInputLabelAsRequired:!1}),inject:["mq"],mixins:[ce],emits:["onEditLinkClick","redirectAndClose","userRegistered","etoUserFound"],components:{BlockBasic:D,CheckboxItem:ae,ErrorMessage:ne,TextField:le,PasswordField:V,ClickwrapNotice:H,SvgIcon:T,NewsLetterChoiceSelect:he,DropdownSelect:se},props:{suppliedEmail:{type:String,default:""},email_source_code:{type:String,default:""},headline_text:{type:String,default:""},copy:{type:String,default:""},remarketing_checkbox:{type:Object,default:()=>({show_remarketing_checkbox:!0,remarketing_checkbox_default_clicked:!1})},exit_link:{type:Object,default:()=>({link_text:"",link_url:""})}},setup(e){const{data:t,tempUser:a,v$:i,register:_}=re(e);return{firstName:t.firstName,lastName:t.lastName,password:t.password,email:t.email,emailOptInChecked:t.emailOptInChecked,otherErrorsExist:t.otherErrorsExist,submitting:t.submitting,tempUser:a,v$:i,register:_}},computed:{...w(B,["globalModalAccountCreationContent"]),...w(U,["isLSE","isLoyaltyEu"]),...w(x,["isOptInImprovementEnabledInLSA","isOptInImprovementEnabled"]),...M("emailSubscriptionState",["subSource"]),clickwrapNoticeId(){return"clickwrap-notice-reg-footer"},firstNameFieldName(){return this.$t("i18n.formFirstNameLabel").toLowerCase()},lastNameFieldName(){return this.$t("i18n.userProfileLastNameLabel").toLowerCase()},linkText(){var e;return((e=this.exit_link)==null?void 0:e.link_text)||""},linkUrl(){var e;return((e=this.exit_link)==null?void 0:e.link_url)||""},passwordFieldName(){return this.$t("i18n.passwordText").toLowerCase()},registrationHeadingComponentProps(){return{setAriaDetailsId:this.clickwrapNoticeId,copy:this.globalModalAccountCreationContent.copy||"",headline:this.globalModalAccountCreationContent.headline||""}},subsourceIdentifier(){return this.email_source_code||""},errorTexts(){return[...this.v$.firstName.$errors.map(e=>e.$message),...this.v$.lastName.$errors.map(e=>e.$message),...this.v$.password.$errors.map(e=>e.$message)]},disabledJoinButton(){return this.errorTexts.length>0||this.submitting||!(this.firstName||this.lastName||this.password)},analyticsModalName(){return this.$route.name==="ProductDetail"?"gated promo pdp":"gated promo plp"},optInMessages(){var e,t;return[{text:(e=this.globalModalAccountCreationContent)==null?void 0:e.re_marketing_opt_in,value:!0},{text:(t=this.globalModalAccountCreationContent)==null?void 0:t.re_marketing_opt_out,value:!1}]}},watch:{suppliedEmail:{handler(e){this.email=e},immediate:!0}},mounted(){this.$_commonAnalyticsPayload={modal_name:this.analyticsModalName,step_name:ye},de({modal_name:this.analyticsModalName}),this.emailOptInChecked=this.remarketing_checkbox.remarketing_checkbox_default_clicked},methods:{onLinkClick(){y({...this.$_commonAnalyticsPayload,action_detail:this.linkText}),this.$emit("redirectAndClose",{redirectPath:this.linkUrl})},changeOptInStatus(e){var t;this.emailOptInChecked=JSON.parse((t=e==null?void 0:e.target)==null?void 0:t.value)},async onButtonClick(){y({...this.$_commonAnalyticsPayload,email_optin:this.emailOptInChecked?"checked":"unchecked",action_detail:this.$t("i18n.joinNow")});const e=this.subSource(this.mq.current,this.subsourceIdentifier);this.$store.commit("emailSubscriptionState/updateState",{property:"subscribedFrom",value:e}),await this.register({onValidFormSubmit:()=>{me({modal_name:this.analyticsModalName}),j()},onEtoUserFound:()=>this.$emit("etoUserFound"),onUserRegistered:()=>this.$emit("userRegistered")})},handleChoiceSelect(e){this.emailOptInChecked=e}}},Ee={class:"email-container"},we={class:"email__text"},be=["aria-label"],Ne={class:"name-container lsco-col-md--show"},Pe=["role"],Le={key:2,class:"opt-in-dropdown"},Ie={class:"remarketing-headline"},Se={class:"remarketing-copy"},Ae={class:"drop-down-info"},ve=["innerHTML"];function Me(e,t,a,i,_,o){const k=n("svg-icon"),h=n("ErrorMessage"),g=n("TextField"),b=n("PasswordField"),N=n("DropdownSelect"),m=n("CheckboxItem"),P=n("news-letter-choice-select"),W=n("ClickwrapNotice"),K=n("BlockBasic");return r(),c(K,{class:p([" block-basic-item","registration-gate-registration-container",{light:this.$route.name==="ProductDetail"},{dark:this.$route.name!=="ProductDetail"}]),headline:a.headline_text,copy:a.copy,"button-text":e.$t("i18n.joinNow"),"link-text":o.linkText,disabled:o.disabledJoinButton,onButtonClick:o.onButtonClick,onLinkClick:o.onLinkClick},{center:L(()=>{var R,O;return[s("div",null,[s("div",Ee,[s("div",null,[C(k,{name:"checkmark-circle",title:"Checkmark",height:"24px",width:"24px"}),s("span",we,l(i.email),1)]),s("a",{class:"email__edit",onClick:t[0]||(t[0]=u=>e.$emit("onEditLinkClick")),onKeyup:t[1]||(t[1]=v(u=>e.$emit("onEditLinkClick"),["enter"]))}," edit ",32)]),s("form",{method:"POST",class:"registration-form",action:"javascript:void(0);","aria-label":e.$t("i18n.join"),onSubmit:t[7]||(t[7]=(...u)=>o.onButtonClick&&o.onButtonClick(...u))},[i.otherErrorsExist&&this.$route.name==="ProductDetail"?(r(),c(h,{key:0,class:"error-message","light-scheme":"","html-message":e.$t("i18n.registrationErrorMessageDefault")},null,8,["html-message"])):d("",!0),i.otherErrorsExist&&this.$route.name!=="ProductDetail"?(r(),c(h,{key:1,class:"error-message","dark-scheme":"","html-message":e.$t("i18n.registrationErrorMessageDefault")},null,8,["html-message"])):d("",!0),s("div",Ne,[C(g,{modelValue:i.firstName,"onUpdate:modelValue":t[2]||(t[2]=u=>i.firstName=u),class:p(["registration__input","name__input","lsco-col-md-3"]),"label-text":e.$t("i18n.formFirstNameLabel"),name:o.firstNameFieldName,errors:i.v$.firstName.$errors,placeholder:e.$t("i18n.formFirstNameLabel"),"show-label":!!i.firstName,"validation-options":{errorTextAllReplaceWith:{i18nPath:"errors.regex"}},"max-length":127,"is-required":!0},null,8,["modelValue","label-text","name","errors","placeholder","show-label","validation-options"]),C(g,{modelValue:i.lastName,"onUpdate:modelValue":t[3]||(t[3]=u=>i.lastName=u),class:p(["registration__input","name__input","lsco-col-md-3","lsco-col-md-offset-1"]),"label-text":e.$t("i18n.userProfileLastNameLabel"),name:o.lastNameFieldName,errors:i.v$.lastName.$errors,placeholder:e.$t("i18n.userProfileLastNameLabel"),"show-label":!!i.lastName,"validation-options":{errorTextAllReplaceWith:{i18nPath:"errors.regex"}},"max-length":127,"is-required":!0},null,8,["modelValue","label-text","name","errors","placeholder","show-label","validation-options"])]),C(b,{type:"new",modelValue:i.password,"onUpdate:modelValue":t[4]||(t[4]=u=>i.password=u),"aria-describedby":"password-error-message-footer",name:o.passwordFieldName,class:p(["registration__input","password-input"]),"label-text":e.$t("i18n.passwordText"),"show-errors":!1,"show-label":!!i.password,placeholder:e.$t("i18n.passwordText"),errors:i.v$.password.$errors,"max-length":255,"is-required":!0},null,8,["modelValue","name","label-text","show-label","placeholder","errors"]),s("p",{id:"password-error-message-footer",class:p(["password-error-message",{"error--active":i.v$.password.$errors&&i.v$.password.$errors.length>0}]),role:i.v$.password.$errors&&i.v$.password.$errors.length>0?"role":""},l(e.$t("i18n.passwordValidationText")),11,Pe),e.isOptInImprovementEnabledInLSA?(r(),S("div",Le,[s("h2",Ie,l((R=e.globalModalAccountCreationContent)==null?void 0:R.re_marketing_headline),1),s("p",Se,l((O=e.globalModalAccountCreationContent)==null?void 0:O.re_marketing_copy),1),C(N,{"is-disabled":!1,"hide-label":!0,items:o.optInMessages,onChange:t[5]||(t[5]=u=>o.changeOptInStatus(u)),"model-value":i.emailOptInChecked,value:i.emailOptInChecked},null,8,["items","model-value","value"]),s("p",Ae,l(e.$t("i18n.lsaNewsletterPlaceHolderText")),1)])):d("",!0),a.remarketing_checkbox.show_remarketing_checkbox&&!e.isOptInImprovementEnabled?(r(),c(m,{key:3,class:"email-optin__checkbox",id:"email-optin__checkbox",checked:i.emailOptInChecked,"onUpdate:checked":t[6]||(t[6]=u=>i.emailOptInChecked=u)},{default:L(()=>[s("label",{for:"email-optin__checkbox",innerHTML:e.globalModalAccountCreationContent.clickwrap_checkbox||""},null,8,ve)]),_:1},8,["checked"])):d("",!0),e.isLoyaltyEu?(r(),c(P,{key:4,"handle-choice-select":o.handleChoiceSelect,"email-opt-in-checked":i.emailOptInChecked},null,8,["handle-choice-select","email-opt-in-checked"])):d("",!0),C(W,{class:"clickwrap-notice","content-id":o.clickwrapNoticeId,html:e.globalModalAccountCreationContent.clickwrap_notice||""},null,8,["content-id","html"])],40,be)])]}),_:1},8,["class","headline","copy","button-text","link-text","disabled","onButtonClick","onLinkClick"])}const xe=A(fe,[["render",Me],["__scopeId","data-v-6f03f029"]]);const Te="Login View",Re="login account",Oe={provide:()=>({allowInputLabelAsRequired:!1}),mixins:[pe],emits:["onEditLinkClick","redirectAndClose","resetPassword"],components:{BlockBasic:D,ClickwrapNotice:H,PasswordField:V,SvgIcon:T,ErrorMessages:_e},props:{suppliedEmail:{type:String,default:""},headline_text:{type:String,default:""},copy:{type:String,default:""},button_text:{type:String,default:""},exit_link:{type:Object,default:()=>({link_text:"",link_url:""})}},setup(){const{data:e,tempUser:t,loginValidator:a,checkValidation:i}=ge(),_=F("clickwrap-notice-login-footer"),o=F("");return{clickwrapNoticeId:_,email:e.email,password:e.password,tempUser:t,loginValidator:a,checkValidation:i,componentErrorMsgHtml:o}},computed:{...w(B,["globalModalLoginContent"]),clickwrapNotice(){var e;return((e=this.globalModalLoginContent)==null?void 0:e.clickwrap_notice)||""},linkText(){var e;return((e=this.exit_link)==null?void 0:e.link_text)||""},linkUrl(){var e;return((e=this.exit_link)==null?void 0:e.link_url)||""},passwordFieldName(){return"password"},analyticsModalName(){return this.$route.name==="ProductDetail"?"gated promo pdp":"gated promo plp"}},watch:{suppliedEmail:{handler(e){this.email=e},immediate:!0}},created(){G({eventName:Te,modalName:this.analyticsModalName}),this.$_commonAnalyticsPayload={modal_name:this.analyticsModalName,step_name:Re},window.onResetPasswordClick=this.onResetPasswordClick},beforeUnmount(){delete window.onResetPasswordClick},methods:{isThereInputError(e,t){return ke({inputName:e,form:t})},syncForPersistedEmailInNewForgotPasswordTab(e){this.$store.commit("userProfileState/updateState",{property:"openForgotPasswordModalWithEmail",value:e})},onButtonClick(){ue({modalName:this.analyticsModalName}),y({...this.$_commonAnalyticsPayload,action_detail:this.button_text});const e=this.email;this.login().then(({success:t})=>{t?j({modal_name:this.analyticsModalName}):(this.componentErrorMsgHtml=this.$t("i18n.wrongPasswordText"),this.email=e)})},onLinkClick(){y({...this.$_commonAnalyticsPayload,action_detail:this.linkText}),this.$emit("redirectAndClose",{redirectPath:this.linkUrl})},onResetPasswordClick(){y({...this.$_commonAnalyticsPayload,action_detail:this.$t("i18n.forgotPasswordTitle")}),this.$emit("resetPassword",this.email),this.$store.commit("userProfileState/updateState",{property:"openForgotPasswordModalWithEmail",value:this.email}),this.onForgotPasswordClick()}}},Fe={class:"email-container"},$e={class:"email-contain"},Ue={class:"email__text"},Ge=["aria-label","set-aria-details-id"],Be={class:"forgot-password"};function De(e,t,a,i,_,o){const k=n("svg-icon"),h=n("PasswordField"),g=n("ErrorMessages"),b=n("ClickwrapNotice"),N=n("BlockBasic");return r(),c(N,{class:p([" block-basic-item","registration-gate-login-form",{light:this.$route.name==="ProductDetail"},{dark:this.$route.name!=="ProductDetail"}]),headline:a.headline_text,copy:a.copy,"button-text":a.button_text,"link-text":o.linkText,disabled:!i.password.length>0,onButtonClick:t[6]||(t[6]=m=>o.onButtonClick()),onLinkClick:o.onLinkClick},{center:L(()=>[s("div",null,[s("div",Fe,[s("div",$e,[C(k,{name:"checkmark-circle",title:"Checkmark",height:"24px",width:"24px"}),s("p",Ue,l(i.email),1)]),s("a",{class:"email__edit",onClick:t[0]||(t[0]=m=>e.$emit("onEditLinkClick")),onKeyup:t[1]||(t[1]=v(m=>e.$emit("onEditLinkClick"),["enter"]))}," edit ",32)]),s("form",{method:"POST",class:"login-form",action:"javascript:void(0);","aria-label":e.$t("i18n.logIn"),"set-aria-details-id":i.clickwrapNoticeId,onSubmit:t[5]||(t[5]=m=>e.login())},[C(h,{type:"new",modelValue:i.password,"onUpdate:modelValue":t[2]||(t[2]=m=>i.password=m),"aria-describedby":"password-error-message-footer",name:o.passwordFieldName,class:p(["registration__input","password-input"]),"label-text":e.$t("i18n.passwordText"),"show-errors":!1,"show-label":!!i.password,placeholder:e.$t("i18n.passwordText"),errors:i.loginValidator.password.$errors},null,8,["modelValue","name","label-text","show-label","placeholder","errors"]),e.passwordCustomErrors.length?(r(),c(g,{key:0,"error-texts":e.passwordCustomErrors},null,8,["error-texts"])):d("",!0),s("div",Be,[s("a",{onClick:t[3]||(t[3]=(...m)=>o.onResetPasswordClick&&o.onResetPasswordClick(...m)),onKeyup:t[4]||(t[4]=v((...m)=>o.onResetPasswordClick&&o.onResetPasswordClick(...m),["enter"])),tabindex:"0"},l(e.$t("i18n.forgotPasswordTitle")),33)]),C(b,{class:"clickwrap-notice","content-id":i.clickwrapNoticeId,html:o.clickwrapNotice},null,8,["content-id","html"])],40,Ge)])]),_:1},8,["class","headline","copy","button-text","link-text","disabled","onLinkClick"])}const Ve=A(Oe,[["render",De],["__scopeId","data-v-825cbb23"]]);const He=async()=>Q(z(()=>import("./countries_code_dd26cbfc_r24-02-0_b0_t240129-161140.js").then(e=>e.c),[])),je="account created",We={emits:["close","redirectAndClose"],data(){return{countriesQuery:null}},components:{SvgIcon:T},props:{headline_text:{type:String,default:""},secondaryCopy:{type:String,default:""},button_text:{type:String,default:""},exit_link:{type:Object,default:()=>({link_text:"",link_url:""})}},created(){this.$_commonAnalyticsPayload={modal_name:this.analyticsModalName,step_name:je}},async mounted(){this.countriesQuery=await He()},computed:{...w(x,["paths"]),...q("userProfileState",["record"]),...M("userProfileState",["coinsTotal"]),linkText(){var e;return((e=this.exit_link)==null?void 0:e.link_text)||""},linkUrl(){var e;return((e=this.exit_link)==null?void 0:e.link_url)||""},analyticsModalName(){return this.$route.name==="ProductDetail"?"gated promo pdp":"gated promo plp"},countryOfEnrollment(){var t,a,i,_,o,k,h;return this.record?(((a=(t=this.record)==null?void 0:t.country)==null?void 0:a.name)??((_=(i=this.record)==null?void 0:i.loyaltyProfile)==null?void 0:_.Country))||((h=this.countriesQuery)==null?void 0:h.getCountry((k=(o=this.record)==null?void 0:o.loyaltyProfile)==null?void 0:k.LoyaltyZoneCode)):""}},methods:{onButtonClick(){y({...this.$_commonAnalyticsPayload,action_detail:this.button_text}),this.$emit("close")},onLinkClick(){y({...this.$_commonAnalyticsPayload,action_detail:this.linkText}),this.$emit("redirectAndClose",{redirectPath:this.linkUrl})},learnMoreLinkClick(){y({...this.$_commonAnalyticsPayload,action_detail:this.paths.levis247}),this.$emit("close")}}},Ke={class:p(["enrollment-confirmation__section","enrollment-confirmation__heading-container"])},qe={class:"headline"},Ye={class:"copy-container"},Je={class:"copy"},Qe={class:"enrollment-confirmation__section"},ze={class:"available-coins"},Ze={class:"available-coins__text"},Xe={class:"secondary-copy"};function et(e,t,a,i,_,o){const k=n("SvgIcon"),h=n("router-link");return r(),S("div",{class:p(["lsco-col-xs-21","lsco-col-md-7","enrollment-confirmation",{light:this.$route.name==="ProductDetail"},{dark:this.$route.name!=="ProductDetail"}])},[s("section",Ke,[s("h4",qe,l(a.headline_text),1),s("div",Ye,[s("p",Je,l(e.$t("i18n.enrollmentCountry")),1),s("p",null,l(o.countryOfEnrollment),1)])]),s("section",Qe,[s("h5",ze,[C(k,{name:"coins",height:"21px",width:"21px"}),s("span",Ze,l(e.$t("i18n.coins501")),1)]),s("p",Xe,l(a.secondaryCopy),1),a.button_text?(r(),S("button",{key:0,class:"button",type:"button",onClick:t[0]||(t[0]=(...g)=>o.onButtonClick&&o.onButtonClick(...g))},l(a.button_text),1)):d("",!0),o.linkText?(r(),S("a",{key:1,class:"link",href:"javascript:;",onClick:t[1]||(t[1]=(...g)=>o.onLinkClick&&o.onLinkClick(...g))},l(o.linkText),1)):d("",!0),o.linkText?d("",!0):(r(),c(h,{key:2,to:e.paths.levis247,onClick:o.learnMoreLinkClick,class:"link"},{default:L(()=>[Y(l(e.$t("i18n.moreCoins")),1)]),_:1},8,["to","onClick"]))])],2)}const tt=A(We,[["render",et],["__scopeId","data-v-bde5914c"]]);const ot="Promotional Modal Impression",it="email check",at="login account",st={mixins:[ee(Ce)],emits:["close","resetPassword","etoUserFound"],components:{EmailCheck:oe,EnrollmentConfirmation:tt,LoginForm:Ve,RegistrationForm:xe,ResponsiveModal:te,ForgotPassword:ie},data:()=>({email:"",editEmail:!1,registrationGateEntry:{}}),computed:{...w(U,["country","locale"]),...M("auth",["loggedIn"]),...w(x,["countryHasLoyaltyInLSA","isLoyaltyGatedPDPEnabled"]),canClose(){return this.isLoyaltyGatedPDPEnabled&&this.$route.name==="ProductDetail"||this.stateName===f.ENROLLMENT_CONFIRMATION},canGoBack(){return[f.LOGIN,f.REGISTRATION,f.FORGOT_PASSWORD].includes(this.stateName)},emailCheckProps(){var e,t,a;return{...(e=this.registrationGateEntry)==null?void 0:e.existing_email_check,ariaLabelledby:(a=(t=this.registrationGateEntry)==null?void 0:t.existing_email_check)==null?void 0:a.headline_text,darkScheme:!0}},registrationFormProps(){var e,t,a;return{...(e=this.registrationGateEntry)==null?void 0:e.create_account_gated_modal,ariaLabelledby:(a=(t=this.registrationGateEntry)==null?void 0:t.create_account_gated_modal)==null?void 0:a.headline_text}},loginFormProps(){var e,t,a;return{...(e=this.registrationGateEntry)==null?void 0:e.sign_in_modal,ariaLabelledby:(a=(t=this.registrationGateEntry)==null?void 0:t.sign_in_modal)==null?void 0:a.headline_text}},enrollmentConfirmationProps(){var i;const e=((i=this.registrationGateEntry)==null?void 0:i.enrollment_confirmation)||{},{copy:t,...a}=e;return{...a,secondaryCopy:t,ariaLabelledby:a.headline_text}},analyticsModalName(){return this.$route.name==="ProductDetail"?"gated promo pdp":"gated promo plp"}},watch:{loggedIn(e){if(!e)return;[f.EMAIL_CHECK,f.LOGIN].includes(this.stateName)&&this.close()}},created(){this.$_states=f,this.$_events=E,this.trackEmailCheckImpression(),this.fetchCms()},methods:{...J(Z,["fetchSimpleMappedCmsContentEntryIfNeeded"]),close(){this.$emit("close")},onEmailCheckLinkClicked({linkUrl:e,linkText:t}){const a={modal_name:this.analyticsModalName,step_name:it,action_detail:t};y(a),this.redirectAndCloseModal({redirectPath:e})},onUserFound(e){this.email=e,this.stateService.send(E.USER_FOUND)},onUserNotFound(e){this.email=e,this.stateService.send(E.USER_NOT_FOUND)},redirectAndCloseModal({redirectPath:e}){this.$router.push({path:X(e,this.country,this.locale)}),this.close()},async fetchCms(){const e=this.$route.name==="ProductDetail"?"registration_gate_pdp_v1":"registration_gate_v1",t=await this.fetchSimpleMappedCmsContentEntryIfNeeded({contentType:e});this.registrationGateEntry=t==null?void 0:t.entry},trackEmailCheckImpression(){G({eventName:ot,modalName:this.analyticsModalName})},onBackButtonClicked(){this.editEmail=!1,this.stateService.send(E.BACK)},onClickEditEmail(){if(this.editEmail=!0,this.stateName===f.LOGIN){const e={modal_name:this.analyticsModalName,step_name:at,action_detail:this.$t("i18n.back")};y(e)}this.stateService.send(E.BACK)},onResetPassword(){this.stateService.send(E.FORGOT_PASSWORD)},onEtoUserFoundDuringRegistration(e){this.$authEmitter.emit($.CLOSE_REGISTRATION_GATE),this.$authEmitter.emit($.MERGE_ACCOUNT,{userEmail:e})},onUserRegistered(){this.countryHasLoyaltyInLSA?this.close():this.stateService.send(E.ENROLLED)}}};function nt(e,t,a,i,_,o){const k=n("EmailCheck"),h=n("RegistrationForm"),g=n("LoginForm"),b=n("EnrollmentConfirmation"),N=n("ForgotPassword"),m=n("ResponsiveModal");return r(),c(m,{class:p(["registration-gate-modal",{light:this.$route.name==="ProductDetail"},{dark:this.$route.name!=="ProductDetail"}]),"full-width-mobile":!1,"can-close":o.canClose,"show-back-button":o.canGoBack,"show-close-button":o.canClose,onBackClicked:o.onBackButtonClicked,onCloseModal:o.close},{body:L(()=>[s("div",{"data-testid":"registration-gate-content",class:p(["registration-gate-body","lsco-col-xs-17","lsco-col-md-offset-2","lsco-col-md-offset-right-2","lsco-col-md-7",{"enrollment-confirmation__modal":e.stateName===e.$_states.ENROLLMENT_CONFIRMATION}])},[e.stateName===e.$_states.EMAIL_CHECK?(r(),c(k,I({key:0},o.emailCheckProps,{class:"email-check","initial-email":e.email,"edit-email":e.editEmail,onUserFound:o.onUserFound,onUserNotFound:o.onUserNotFound,onWasMounted:o.trackEmailCheckImpression,onLinkClicked:o.onEmailCheckLinkClicked,"max-length":128,"is-required":!0}),null,16,["initial-email","edit-email","onUserFound","onUserNotFound","onWasMounted","onLinkClicked"])):d("",!0),e.stateName===e.$_states.REGISTRATION?(r(),c(h,I({key:1},o.registrationFormProps,{"supplied-email":e.email,"onUpdate:suppliedEmail":t[0]||(t[0]=P=>e.email=P),onUserRegistered:o.onUserRegistered,onRedirectAndClose:o.redirectAndCloseModal,onOnEditLinkClick:o.onClickEditEmail,onEtoUserFound:o.onEtoUserFoundDuringRegistration}),null,16,["supplied-email","onUserRegistered","onRedirectAndClose","onOnEditLinkClick","onEtoUserFound"])):d("",!0),e.stateName===e.$_states.LOGIN?(r(),c(g,I({key:2},o.loginFormProps,{"supplied-email":e.email,"onUpdate:suppliedEmail":t[1]||(t[1]=P=>e.email=P),"is-reset-success":e.config.isResetSuccess,onRedirectAndClose:o.redirectAndCloseModal,onOnEditLinkClick:o.onClickEditEmail,onResetPassword:o.onResetPassword}),null,16,["supplied-email","is-reset-success","onRedirectAndClose","onOnEditLinkClick","onResetPassword"])):d("",!0),e.stateName===e.$_states.ENROLLMENT_CONFIRMATION?(r(),c(b,I({key:3},o.enrollmentConfirmationProps,{onClose:o.close,onRedirectAndClose:o.redirectAndCloseModal}),null,16,["onClose","onRedirectAndClose"])):d("",!0),e.stateName===e.$_states.FORGOT_PASSWORD?(r(),c(N,{key:4,class:"forgot-password"})):d("",!0)],2)]),_:1},8,["class","can-close","show-back-button","show-close-button","onBackClicked","onCloseModal"])}const Jt=A(st,[["render",nt],["__scopeId","data-v-44b2bbc3"]]);export{Jt as default};
