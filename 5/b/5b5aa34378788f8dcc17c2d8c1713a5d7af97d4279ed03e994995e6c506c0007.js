(function(y){if(!y||!y._v){y=y||{};y._v=2.1;var v={DEBUG_ENABLED:!0,ALERT_ENABLED:!1,HTTP_PROTOCOL:document&&document.location&&document.location.protocol&&"https:"==document.location.protocol?"https://":"http://",HTTPS_ENABLED:!0,URI_ZONES:{EU:{API:"api.realytics.io",API_MOBILE:"m.realytics.io",API_HIT:"c.realytics.io",XDM:"x.realytics.io",SYNC_USER:"tc-sync.realytics.io",SYNC_SESSION:"tp.realytics.io"},US:{API:"api-us-we.realytics.net",API_MOBILE:"api-us-we.realytics.net",API_HIT:"api-us-we.realytics.net",
XDM:"api-us-we.realytics.net",SYNC_USER:"api-us-we.realytics.net",SYNC_SESSION:"api-us-we.realytics.net"},PA:{API:"api-au.realytics.io",API_MOBILE:"api-au.realytics.io",API_HIT:"api-au.realytics.io",XDM:"api-au.realytics.io",SYNC_USER:"api-au.realytics.io",SYNC_SESSION:"api-au.realytics.io"},SA:{API:"api.realytics.io",API_MOBILE:"m.realytics.io",API_HIT:"c.realytics.io",XDM:"x.realytics.io",SYNC_USER:"tc-sync.realytics.io",SYNC_SESSION:"tp.realytics.io"}},LOGGER_ENABLED:!0,LOGGER_API_ENABLED:!1,XDM_ENABLED:!1,
MAIN_INSTANCE:"realytics",OPTOUT_TIMEOUT:100,RDRCT_TIMEOUT:300,XDM_TIMEOUT:5E3,USER_DAYS:365,OPTOUT_DAYS:365,SESSION_MIN:30,URL_MAX_SIZE:2048,PAGE_HACK:!0},f={getTypeString:function(a){return Object.prototype.toString.call(a)},getTime:function(){return Math.round((new Date).getTime())},isNative:function(a){var b=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return"function"==typeof a&&b.test(a)}};f.isArray=f.isNative(Array.isArray)?Array.isArray:
function(a){return!(!a||"object"!=typeof a||"number"!=typeof a.length||"[object Array]"!=f.getTypeString(a))};f.isArrayNullOrEmpty=function(a){return!a||1>a.length};f.isDate=function(a){return a&&"object"==typeof a&&"[object Date]"==f.getTypeString(a)?!0:!1};f.isFunction=function(a){return"function"==typeof a};f.isFunction(/x/)&&(f.isFunction=function(a){return"function"==typeof a&&"[object Function]"==f.getTypeString(a)});f.isNull=function(a){return null===a};f.isNumber=function(a){return!!("number"==
typeof a||a&&"object"==typeof a&&"[object Number]"==f.getTypeString(a))};f.isObject=function(a){return!(!a||"function"!=typeof a&&"object"!=typeof a)};f.isDomElement=function(a){return f.isObject(a)&&a.nodeType};f.isString=function(a){return!!("string"==typeof a||a&&"object"==typeof a&&"[object String]"==f.getTypeString(a))};f.isUndefined=function(a){return"undefined"==typeof a};f.extend=function(a,b){a=a&&f.isObject(a)?a:{};if(b&&f.isObject(b))for(var c in b)a[c]=b[c];return a};f.reduce=function(a,
b){if("string"===typeof a)var c=a.slice(0,b);else if(f.isArray(a)){c=[];for(var d=0;d<a.length;d++)c.push(f.reduce(a[d],b))}else if(f.isObject(a))for(d in c={},a)c[d]=f.reduce(a[d],b);else c=a;return c};f.json=function(){"object"!==typeof JSON&&(JSON={});(function(){function a(h){return 10>h?"0"+h:h}function b(h){g.lastIndex=0;return g.test(h)?'"'+h.replace(g,function(q){var t=m[q];return"string"===typeof t?t:"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function c(h,q){var t=
e,n=q[h];n&&"object"===typeof n&&"function"===typeof n.toJSON&&(n=n.toJSON(h));"function"===typeof l&&(n=l.call(q,h,n));switch(typeof n){case "string":return b(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);case "object":if(!n)return"null";e+=k;var u=[];if("[object Array]"===Object.prototype.toString.apply(n)){var w=n.length;for(h=0;h<w;h+=1)u[h]=c(h,n)||"null";q=0===u.length?"[]":e?"[\n"+e+u.join(",\n"+e)+"\n"+t+"]":"["+u.join(",")+"]";e=t;return q}if(l&&
"object"===typeof l)for(w=l.length,h=0;h<w;h+=1){if("string"===typeof l[h]){var x=l[h];(q=c(x,n))&&u.push(b(x)+(e?": ":":")+q)}}else for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&(q=c(x,n))&&u.push(b(x)+(e?": ":":")+q);q=0===u.length?"{}":e?"{\n"+e+u.join(",\n"+e)+"\n"+t+"}":"{"+u.join(",")+"}";e=t;return q}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+
"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,k,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',
"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(h,q,t){var n;k=e="";if("number"===typeof t)for(n=0;n<t;n+=1)k+=" ";else"string"===typeof t&&(k=t);if((l=q)&&"function"!==typeof q&&("object"!==typeof q||"number"!==typeof q.length))throw Error("JSON.stringify");return c("",{"":h})});"function"!==typeof JSON.parse&&(JSON.parse=function(h,q){function t(n,u){var w,x=n[u];if(x&&"object"===typeof x)for(w in x)if(Object.prototype.hasOwnProperty.call(x,w)){var Q=t(x,w);void 0!==
Q?x[w]=Q:delete x[w]}return q.call(n,u,x)}h=String(h);d.lastIndex=0;d.test(h)&&(h=h.replace(d,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(h.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return h=eval("("+h+")"),"function"===typeof q?t({"":h},""):h;throw new SyntaxError("JSON.parse");})})();return{stringify:function(a){return JSON.stringify(a)},
parse:function(a){return JSON.parse(a)},encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}}}();f.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b="",c=0;a=f.utf8.encode(a);for(var d=a.length;c<d;){var g=c<d?a.charCodeAt(c++):null;var e=c<d?a.charCodeAt(c++):null;var k=c<d?a.charCodeAt(c++):null;var m=g>>2;g=(g&3)<<4|(null!==e?e>>4:0);e=null!==e?(e&15)<<2|(null!==k?k>>6:0):64;k=null!==k?k&63:64;b=b+this._keyStr.charAt(m)+
this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(k)}return b},decode:function(a){var b="",c=0;for(a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");c<a.length;){var d=this._keyStr.indexOf(a.charAt(c++));var g=this._keyStr.indexOf(a.charAt(c++));var e=this._keyStr.indexOf(a.charAt(c++));var k=this._keyStr.indexOf(a.charAt(c++));d=d<<2|g>>4;g=(g&15)<<4|e>>2;var m=(e&3)<<6|k;b+=String.fromCharCode(d);64!=e&&(b+=String.fromCharCode(g));64!=k&&(b+=String.fromCharCode(m))}return b=f.utf8.decode(b)}};
f.utf8={encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):(127<d&&2048>d?b+=String.fromCharCode(d>>6|192):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128)),b+=String.fromCharCode(d&63|128))}return b},decode:function(a){var b="",c=0;for(c1=c2=0;c<a.length;){var d=a.charCodeAt(c);128>d?(b+=String.fromCharCode(d),c++):191<d&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|c2&63),c+=2):
(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63),c+=3)}return b}};f.ryEncoder={encode:function(a){var b=function(d){var g=function(k){return 10>k?"0"+k:k},e=null;return d?(e=""+g(d.getUTCFullYear()),e+="-"+g(d.getUTCMonth()+1),e+="-"+g(d.getUTCDate()),e+="T"+g(d.getUTCHours()),e+=":"+g(d.getUTCMinutes()),e+=":"+g(d.getUTCSeconds())):null},c=function(d){if(!f.isUndefined(d)&&d)if(f.isDate(d))d=b(d);else if(f.isArray(d)&&0<d.length)for(var g=0;g<d.length;g++)d[g]=
c(d[g]);else if(f.isObject(d))for(var e in d)if(f.isDate(d[e]))d[e]=b(d[e]);else if(f.isArray(d[e])&&d[e]&&0<d[e].length)for(g=0;g<d[e].length;g++)d[e][g]=c(d[e][g]);else!f.isObject(d[e])||d.typeOf&&d[e]&&d[e]==d.typeOf||(d[e]=c(d[e]));return d};return(a=a?f.json.encode(c(a)):null)?f.base64.encode(a):null},decode:function(a){return(a=a?f.base64.decode(a):null)?f.json.decode(a):null}};f.domain={_current:document.location?document.location.hostname:null,getInfo:function(a){return a&&a==f.noOvrd?f.domain._current:
a}};f.url={_current:document.location?document.location.href:null,getInfo:function(a){return a&&a==f.noOvrd?f.url._current:a},getParamValue:function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+b+"=([^&#]*)")).exec(a);return null===a||2>a.length||!a[1]?"":decodeURIComponent(a[1]).replace(/\+/g," ")}};f.campaign={_parameters:"utm_source utm_medium utm_campaign utm_content utm_term xtor".split(" "),_getCampaign:function(a){for(var b={},c=0,d=f.campaign._parameters,g=0;g<
d.length;g++){var e=d[g],k=a?f.url.getParamValue(a,e):null;k&&""!=k&&(b[e]=k,c++)}return 1>c?null:b},getInfo:function(a){return f.campaign._getCampaign(a)}};f.env={_ua:navigator?navigator.userAgent:null,_cache:{browser:null,os:null,device:null,mobile:null},isBot:!(!navigator||!/(googlebot|mediapartners|bingpreview|baiduspider|yandexbot|google web preview)/i.test(navigator.userAgent)),_uaMatch:function(a){return a.test(f.env._ua)},_uaContains:function(a){return-1!=f.env._ua.indexOf(a)},getBrowser:function(){if(null==
f.env._cache.browser){var a=navigator.vendor||"",b=f.env._uaContains,c=f.env._uaMatch;a=b("Firefox")||c(/firefox/i)?"MozillaFirefox":b("MSIE")||c(/(msie|trident)/i)?"InternetExplorer":b("Chrome")||c(/chrome/i)?b("Android")||c(/crios/i)?"ChromeMobile":"Chrome":a&&-1!=a.indexOf("Apple")||c(/safari/i)&&!c(/phantom/i)?b("Mobile")?"SafariMobile":"Safari":window&&window.opera||c(/opera/i)||c(/opr/i)?b("Mini")?"OperaMini":"Opera":b("Gecko")?"MozillaGecko":c(/seamonkey\//i)?"SeaMonkey":c(/(BlackBerry|PlayBook|BB10)/i)?
"BlackBerry":b("Konqueror")?"Konqueror":"";f.env._cache.browser=a}return""==f.env._cache.browser?null:f.env._cache.browser},getOs:function(){if(null==f.env._cache.os){var a=f.env._uaMatch;a=a(/Windows/i)?a(/Phone/)?"WindowsMobile":"Windows":a(/Mac/i)?"MacOS":a(/Linux/)?"Linux":a(/Unix/)?"Unix":a(/(iPhone|iPad|iPod)/)?"iOS":a(/Android/)?"Android":a(/(BlackBerry|PlayBook|BB10)/i)?"BlackBerry":"";f.env._cache.os=a}return""==f.env._cache.os?null:f.env._cache.os},getDevice:function(){if(null==f.env._cache.device){var a=
f.env._uaMatch;a=a(/iPhone/)?"iPhone":a(/iPad/)?"iPad":a(/iPod/)?"iPod":a(/(BlackBerry|PlayBook|BB10)/i)?"BlackBerry":a(/Windows Phone/i)?"WindowsPhone":a(/Android/)?"AndroidDevice":null;f.env._cache.device=a}return""==f.env._cache.device?null:f.env._cache.device},isMobile:function(){if(null==f.env._cache.mobile){var a=!1;try{a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i.test(navigator.userAgent||
navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||
navigator.vendor||window.opera).substr(0,4))}catch(b){a=!1}f.env._cache.mobile=!!a}return null==f.env._cache.mobile?null:f.env._cache.mobile},getInfo:function(){if(f.env._ua){var a={},b=f.env.getBrowser(),c=f.env.getDevice(),d=f.env.getOs(),g=f.env.isMobile();b&&(a.browser=b);c&&(a.device=c);d&&(a.os=d);a.mobile=g;return a}return null}};f.noOvrd=-1;f.referrer={_current:document?document.referrer:null,_top:function(){var a=null;try{a=window&&window.top&&window.top.document?window.top.document.referrer:
null}catch(b){a=null}return a}(),getInfo:function(a,b,c){a=f.referrer;if(b&&b==f.noOvrd)if(c){b=!1;try{b=window.self!==window.top}catch(d){b=!0}try{return b?a._top:a._current}catch(d){return null}}else try{return a._current}catch(d){return null}else return b}};f.searchEngine={_dico:{Google:{d:"google.([^/?]*)",p:"q",e:["email.google.([^/?]*)","storage.googleapis.([^/?]*)"]},Yahoo:{d:"yahoo.com",p:"p"},Bing:{d:"bing.com",p:"q"},Baidu:{d:"baidu.com",p:"wd"},Aol:{d:"aol.([^/?]*)",p:"q"},Ask:{d:"ask.com",
p:"q"},Daum:{d:"daum.net",p:"q"},Dogpile:{d:"dogpile.com",p:"q"},Duckduckgo:{d:"duckduckgo.com",p:"q"},Lycos:{d:"lycos.([^/?]*)",p:"q"},Mynet:{d:"mynet.com",p:"query"},Naver:{d:"naver.com",p:"query"},Rambler:{d:"rambler.ru",p:"query"},Search:{d:"search.com",p:"q"},Seznam:{d:"seznam.cz",p:"q"},Virgilio:{d:"virgilio.it",p:"qs"},Voila:{d:"voila.fr",p:"kw"},WpPl:{d:"wp.pl",p:"q"},Yandex:{d:"yandex.com",p:"text"},Yam:{d:"yam.com",p:"k"}},_getEngine:function(a){var b=f.searchEngine,c=null;if(a)for(var d in b._dico)if(0==
a.search("https?://(.*)"+b._dico[d].d)){var g=!0;if(b._dico[d].e)for(var e=0;e<b._dico[d].e.length;e++)if(0==a.search("https?://"+b._dico[d].e[e])){g=!1;break}g&&(c=d);break}return c?c:null},_getQuery:function(a,b){var c=f.searchEngine;return(a=(a=(b=b?c._dico[b].p:null)?f.url.getParamValue(a,b):null)&&0<a.length?a:null)?a:null},getInfo:function(a,b){return(b=f.searchEngine._getEngine(b))?(a=f.searchEngine._getQuery(a,b),b={engine:b},a&&(b.query=a),b):null}};f.getUIID=function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");
return function(){for(var b=Array(36),c=0,d,g=0;36>g;g++)8==g||13==g||18==g||23==g?b[g]="-":14==g?b[g]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[g]=a[19==g?d&3|8:d]);return b.join("")}}();var p=function(a,b){var c=null,d=function(e,k){try{var m=!(!b.LOGGER_API_ENABLED||a.isUndefined(window.RYlogger)||!window.RYlogger||!window.RYlogger.push);if(b.LOGGER_ENABLED&&(m||!a.isUndefined(window.console)&&window.console&&window.console.log)){var l=function(h){m?window.RYlogger.push({text:h,
level:k,domain:document.location?document.location.hostname:null,browser:a.env.getBrowser(),device:a.env.getDevice(),os:a.env.getOs(),mobile:a.env.isMobile()}):window.console.log(h)};m||!k||"error"!=k&&"fatal"!=k||(l=function(h){window.console.error?window.console.error(h):window.console.log(h)});!m&&k&&"warn"==k&&(l=function(h){window.console.warn?window.console.warn(h):window.console.log(h)});e&&(l("["+k.toUpperCase()+"] "+e.toString()),b.ALERT_ENABLED&&(!a.isUndefined(window.console)&&window.console&&
window.console.log&&window.console.log("["+k.toUpperCase()+"] "+e.toString()),!a.isUndefined(alert)&&alert&&alert("["+k.toUpperCase()+"] "+e.toString())))}}catch(h){}},g=function(e,k,m){e=e?e:null;k&&(e+="\n[Exception] "+(k.name&&(k.message||k.description)?(k.name?"["+k.name+"] ":"")+(k.message?k.message:"")+(!k.message&&k.description?k.description:""):k.toString()));d(e,m)};return{setUserId:function(e){if(e){c=e;try{b.LOGGER_API_ENABLED&&!a.isUndefined(window.trackJs)&&window.trackJs&&window.trackJs.configure&&
window.trackJs.configure({userId:c})}catch(k){}}},trace:function(e){b.DEBUG_ENABLED&&d(e,"trace")},debug:function(e){b.DEBUG_ENABLED&&d(e,"debug")},info:function(e){d(e,"info")},warn:function(e){d(e,"warn")},error:function(e,k){g(e,k,"error")},fatal:function(e,k){g(e,k,"fatal")}}}(f,v),R=function(a,b){var c=function(m,l,h){return function(q){q=q||(window?window.event:null);var t=!0;try{q&&(t=h&&a.isFunction(h)?h(q):!0)}catch(n){p.error("Fail to exec old handler.",n),t=!0}q=l.call(m,q);return!a.isUndefined(t)&&
!1===t||!a.isUndefined(q)&&!1===q?!1:!0}},d=function(m,l,h){return m&&l&&h&&m.addEventListener?(m.addEventListener(l,function(q){return h(m,q)},!1),!0):!1},g=function(m,l,h){return m&&l&&h&&m.attachEvent?(m.attachEvent("on"+l,c(m,h)),!0):!1},e=function(m,l,h){var q;(q=m&&l&&h)&&!(q=d(m,l,h)||g(m,l,h))&&(m&&l&&h?(l="on"+l,m[l]=c(m,h,m[l]),q=!0):q=void 0);return!!q},k={onLoadedDone:!1,onScrolledDone:!1,onEvent:function(m,l,h){return e(m,l,h)},onScrolled:function(m){var l=function(){k.onScrolledDone||
(k.onScrolledDone=!0,m())};e(window,"scroll",l);e(window,"touchmove",l)},onLoaded:function(m){var l=document,h=function(){k.onLoadedDone=!0;m()};if(l)if(l.addEventListener)l.readyState&&"complete"==l.readyState?h():d("DOMContentLoaded",h,!1);else if(l.attachEvent){g(l,"readystatechange",function(){l.readyState&&"complete"==l.readyState&&h()});try{if(window&&!a.isUndefined(window.frameElement)&&window.frameElement&&!a.isUndefined(l.documentElement)&&l.documentElement&&l.documentElement.doScroll){function q(){try{document.documentElement.doScroll("left")}catch(t){setTimeout(q,
10);return}h()}q()}}catch(q){}}e(window,"load",h);return!0}};return k}(f,v),da=function(a,b){var c=function(g,e){var k=null;!g||e&&a.isString(g)||(a.isDomElement(g)?k=[g]:e&&a.isObject(g)&&g.length&&(k=d(g,!0)));return k&&0<k.length?k:null},d=function(g,e){var k=null;if(g)if(k=[],a.isArray(g)||e)for(var m=0;m<g.length;m++){var l=c(g[m],e?!1:!0);l&&(k=k.concat(l))}else(l=c(g,!0))&&(k=k.concat(l));return k&&0<k.length?k:null};return{getDomElements:function(g){try{return d(g)}catch(e){return p.error("Fail to get dom elements.",
e),null}}}}(f,v),Z=function(){this._queue=[];this._locked=!1};Z.prototype._exec=function(a){var b=this,c=0<this._queue.length?this._queue.shift():null;c?c(function(){b._exec(a)}):a()};Z.prototype.lock=function(a){var b=this;b._queue.push(a);b._locked||(b._locked=!0,b._exec(function(){b._locked=!1}))};var A=function(a,b){var c="ac.uk co.uk org.uk me.uk ltd.uk plc.uk net.uk sch.uk gov.uk mod.uk mil.uk nhs.uk police.uk ac.nz co.nz geek.nz gen.nz kiwi.nz maori.nz net.nz org.nz school.nz cri.nz govt.nz health.nz iwi.nz mil.nz parliament.nz".split(" "),
d=function(g,e,k,m){var l=new Date;l.setTime(k);k=l.toGMTString();e=e?encodeURIComponent(e):"";l="";if(m){if((l=(l=(m=(m=document&&document.location&&document.location.hostname?document.location.hostname:null)?m.split("."):null)&&0<m.length?m[m.length-1]:null)&&1<m.length?m[m.length-2]+"."+l:l)&&2<m.length)for(var h=0;h<c.length;h++)if(0==l.toLowerCase().indexOf(c[h])){l=m[m.length-3]+"."+l;break}l=(m=l?l:null)?"; domain=."+m:""}return document?(document.cookie=g+"="+e+"; expires="+k+"; path=/"+l,
!0):!1};b={write:function(g,e,k,m){return d(g,e,k,m)},read:function(g){a:{g+="=";var e=document&&document.cookie?document.cookie.split(";"):null;if(e)for(var k=0;k<e.length;k++){for(var m=e[k];" "==m.charAt(0);)m=m.substring(1,m.length);if(0==m.indexOf(g)){g=(g=m.substring(g.length,m.length))?decodeURIComponent(g):null;break a}}g=null}return g},remove:function(g,e){return d(g,"",a.getTime()+-864E5,e)}};b.support=navigator&&!1===navigator.cookieEnabled?!1:!0;return b}(f,v),F=function(a,b,c,d){this._cu=
"ry_"+a+"_"+b;this._cud=f.getTime()+864E5*v.USER_DAYS;this._cs="ry_"+a+"_so_"+b;this._csd=f.getTime()+6E4*v.SESSION_MIN;this._stmd=!!c;d(A.support)};F.prototype.clearUser=function(a){A.remove(this._cu,!this._stmd);a(!0)};F.prototype.getUser=function(a){var b=A.read(this._cu);a(b)};F.prototype.setUser=function(a,b){var c=a?f.ryEncoder.decode(a):null;c=c&&c.exp?c.exp:this._cud;A.write(this._cu,a,c,!this._stmd);b(!0)};F.prototype.clearSession=function(a){A.remove(this._cs,!this._stmd);a(!0)};F.prototype.getSession=
function(a){var b=A.read(this._cs);a(b)};F.prototype.setSession=function(a,b){A.write(this._cs,a,this._csd,!this._stmd);b(!0)};var G=function(){var a=null,b=null,c=!1,d=function(g,e){if(c)if(null===b)var k=setTimeout(function(){k&&clearTimeout(k);d(g,e)},200);else e(b);else{c=!0;try{var m=(new Date).getTime(),l=g+"?ch="+m;(a=RYxdm&&RYxdm.noConflict?RYxdm.noConflict("ryXDM"+m.toString()):null)&&a.Rpc({remote:l,onReady:function(q){q&&null===b&&(b=!0,e(b))}},{serializer:f.json,local:{},remote:{remove:{},
write:{},read:{}}})}catch(q){b=!1,e(b)}var h=setTimeout(function(){null===b&&(b=!1,e(b));h&&clearTimeout(h)},v.XDM_TIMEOUT)}};return{init:function(g,e){d(g,function(k){e(k)})},write:function(g,e,k,m,l){d(g,function(h){h?a.write(e,k,m,function(q){l(!0)},function(q){l(!1)}):l(!1)})},read:function(g,e,k){d(g,function(m){m?a.read(e,function(l){k(l?l:null)},function(l){k(null)}):k(null)})},remove:function(g,e,k){d(g,function(m){m?a.remove(e,function(l){k(!0)},function(l){k(!1)}):k(!1)})}}}(),H=function(a,
b,c,d){this._uk="ry_"+a+"_"+b;this._ud=864E5*v.USER_DAYS;this._sk="ry_"+a+"_so_"+b;this._sd=6E4*v.SESSION_MIN;this._url=c;G.init(this._url,function(g){d(g)})};H.prototype.clearUser=function(a){G.remove(this._url,this._uk,a)};H.prototype.getUser=function(a){G.read(this._url,this._uk,a)};H.prototype.setUser=function(a,b){G.write(this._url,this._uk,a,this._ud,b)};H.prototype.clearSession=function(a){G.remove(this._url,this._sk,a)};H.prototype.getSession=function(a){G.read(this._url,this._sk,a)};H.prototype.setSession=
function(a,b){G.write(this._url,this._sk,a,this._sd,b)};var I=function(a,b,c,d,g,e){this._inst="xdm"==a?new H(b,c,d,e):new F(b,c,g,e)};I.prototype.clearUser=function(a){try{return this._inst.clearUser(a)}catch(b){a(!1)}};I.prototype.getUser=function(a){try{return this._inst.getUser(a)}catch(b){a(null)}};I.prototype.setUser=function(a,b){try{return this._inst.setUser(a,b)}catch(c){b(!1)}};I.prototype.clearSession=function(a){try{return this._inst.clearSession(a)}catch(b){a(!1)}};I.prototype.getSession=
function(a){try{return this._inst.getSession(a)}catch(b){a(null)}};I.prototype.setSession=function(a,b){try{return this._inst.setSession(a,b)}catch(c){b(!1)}};var U=function(a,b,c){return{enable:function(d,g){d="ry_"+d+"_optout";var e=a.getTime()+864E5*c.OPTOUT_DAYS;return b.write(d,"1",e,g)},isEnabled:function(d){d=b.read("ry_"+d+"_optout");return!(!d||"1"!=d)},disable:function(d,g){return b.remove("ry_"+d+"_optout",g)}}}(f,A,v),z=function(a,b,c){this._apiKey=a;this._url=c;this._q=!1===b?[]:null;
this._k={img:1,js:2}};z.prototype._createParam=function(a){var b=null;try{return a&&a.id&&this._apiKey&&(b=this._apiKey.toString().toLowerCase()+"|"+a.id.toString()+"|"+(a.cid?a.cid.toString():"")),f.base64.encode(b)}catch(c){return p.error("Fail to crypt param data.",c),null}};z.prototype._queuePush=function(a,b){this._q&&a&&b&&this._q.push({type:a,url:b})};z.prototype._queueClear=function(){if(this._q)for(var a=0;a<this._q.length;a++){var b=this._q[a];b&&this._syncWithTypeUrl(b.type,b.url)}this._q=
null};z.prototype._syncExec=function(a,b){null==this._q?this._syncWithTypeUrl(a,b):this._queuePush(a,b)};z.prototype._syncWithTypeUrl=function(a,b){a&&b&&(a==this._k.img?this._syncWithImgEl(b):a==this._k.js&&this._syncWithJsEl(b))};z.prototype._syncWithImgEl=function(a){try{if(a){var b=document.createElement("img");b.src=a;b.width=0;b.height=0;b.border="0";b.style.display="none";document.body.appendChild(b)}}catch(c){p.error("Fail to sync data with img.",c)}};z.prototype._syncWithJsEl=function(a){try{if(a){var b=
document.createElement("script");b.type="text/javascript";b.async=!0;b.src=a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}}catch(d){p.error("Fail to sync data with js.",d)}};z.prototype.syncWithImg=function(a){try{var b=a?this._createParam(a):null;if(b&&this._url){var c=this._url+"/"+encodeURIComponent(b);this._syncExec(this._k.img,c)}}catch(d){p.error("Fail to sync user with img.",d)}};z.prototype.syncWithJs=function(a,b){try{var c=a?this._createParam(a):null;if(c&&
this._url){var d=this._url+"/"+encodeURIComponent(c)+b;d&&this._syncExec(this._k.js,d)}}catch(g){p.error("Fail to sync user with js.",g)}};z.prototype.enable=function(){try{this._queueClear()}catch(a){p.error("Fail to enable sync data.",a)}};var aa=function(a,b,c,d,g,e){this._apiKey=a;this._userApi=c?new z(a,b,d):null;this._tcApi=g?new z(a,b,e):null};aa.prototype.sync=function(a,b){try{if(a&&this._userApi){var c="";b&&(c+="?u="+encodeURIComponent(b.url?b.url:""),c+="&r="+encodeURIComponent(b.referrer?
b.referrer:""),c+="&ts="+encodeURIComponent((new Date).getTime().toString()));this._userApi.syncWithJs(a,c)}a&&this._tcApi&&this._tcApi.syncWithImg(a)}catch(d){p.error("Fail to sync partner user.",d)}};aa.prototype.enable=function(){this._userApi&&this._userApi.enable();this._tcApi&&this._tcApi.enable()};var ba=function(a,b,c,d){this._apiKey=a;this._sessionApi=c?new z(a,b,d):null};ba.prototype.sync=function(a,b,c,d){try{a&&this._sessionApi&&(b="?ct="+(b?"1":"0"),b+="&rt="+(c?"1":"0"),d&&(b+="&u="+
encodeURIComponent(d.url?d.url:""),b+="&r="+encodeURIComponent(d.referrer?d.referrer:""),b+="&ts="+encodeURIComponent((new Date).getTime().toString())),this._sessionApi.syncWithJs(a,b))}catch(g){p.error("Fail to sync partner session.",g)}};ba.prototype.enable=function(){this._sessionApi&&this._sessionApi.enable()};var V=function(a){this._q=!1===a?[]:null};V.prototype._queuePush=function(a){this._q&&a&&this._q.push({action:a})};V.prototype._queueClear=function(){if(this._q)for(var a=0;a<this._q.length;a++){var b=
this._q[a];b&&b.action&&b.action()}this._q=null};V.prototype.sync=function(a){try{a&&(null==this._q?a():this._queuePush(a))}catch(b){p.error("Fail to sync profile data.",b)}};V.prototype.enable=function(){try{this._queueClear()}catch(a){p.error("Fail to enable profile data.",a)}};var B=function(a,b,c,d,g,e,k,m,l,h,q,t,n){var u={};u.c=a;u.t=b?b:(new Date).getTime();k&&(u.mu={uid:k},m&&(u.mu.c_uid=m),l&&(u.mu.puid=l),h&&(u.mu.cu=h),q&&(q.firstname&&(u.mu.fn=q.firstname),q.lastname&&(u.mu.ln=q.lastname),
q.gender&&(u.mu.g=q.gender),q.email&&(u.mu.e=q.email),q.created&&(u.mu.rd=q.created),q.birthdate&&(u.mu.b=q.birthdate)));if(c&&(u.data={n:c},d&&(u.data.v=d),g&&(u.data.tx=g),e&&(u.data.opts=e),t)){a={};for(var w in t)(b=w?t[w]:null)&&b.id&&(a[w]={i:b.id},b.email&&(a[w].e=b.email),b.firstname&&(a[w].f=b.firstname),b.lastname&&(a[w].l=b.lastname),b.gender&&(a[w].g=b.gender),b.created&&(a[w].c=b.created),b.birthdate&&(a[w].b=b.birthdate),b.meta&&(a[w].m=b.meta));u.data.pr=a}n&&(t={},n.url&&(t.u=n.url.length>
v.URL_MAX_SIZE?n.url.substr(0,v.URL_MAX_SIZE):n.url),n.domain&&(t.d=n.domain),n.referrer&&(t.r=n.referrer.length>v.URL_MAX_SIZE?n.referrer.substr(0,v.URL_MAX_SIZE):n.referrer),n.se&&n.se.engine&&(t.se=n.se.engine),n.se&&n.se.query&&(t.sq=n.se.query),n.env&&n.env.browser&&(t.eb=n.env.browser),n.env&&n.env.device&&(t.ed=n.env.device),n.env&&n.env.os&&(t.eo=n.env.os),n.env&&(t.em=n.env.mobile),n.camp&&n.camp.utm_source&&(t.cs=n.camp.utm_source),n.camp&&n.camp.utm_medium&&(t.cm=n.camp.utm_medium),n.camp&&
n.camp.utm_campaign&&(t.cc=n.camp.utm_campaign),n.camp&&n.camp.utm_content&&(t.co=n.camp.utm_content),n.camp&&n.camp.utm_term&&(t.ct=n.camp.utm_term),n.camp&&n.camp.xtor&&(t.cx=n.camp.xtor),n.session&&(t.son=n.session.origin?!0:!1,t.ro=n.session.ref?n.session.ref.length>v.URL_MAX_SIZE?n.session.ref.substr(0,v.URL_MAX_SIZE):n.session.ref:null),u.mc={p:t});this._event=u};B.prototype.hasUser=function(){return!(!this._event||!this._event.mu)};B.prototype.hasMobileEnvironment=function(){return!!(this._event&&
this._event.mc&&this._event.mc.p&&this._event.mc.p.em)};B.prototype.toDefaultEvent=function(){return this._event};B.prototype.toHitEvent=function(){var a={};if(this._event&&this._event.data&&this._event.data.v)for(var b in this._event.data.v)a[b]=this._event.data.v[b];if(this._event&&this._event.data&&this._event.data.tx)for(b in this._event.data.tx)a[b]=this._event.data.tx[b];return{c:this._event&&this._event.c?this._event.c:null,r:this._event&&this._event.mc&&this._event.mc.p&&this._event.mc.p.r?
this._event.mc.p.r:null,u:this._event&&this._event.mc&&this._event.mc.p&&this._event.mc.p.u?this._event.mc.p.u:null,e:this._event&&this._event.data&&this._event.data.n?this._event.data.n:null,t:this._event&&this._event.t?this._event.t:null,m:a}};var S=function(a,b,c,d){this.id=a?a:"ry_"+f.getUIID();this.cid=b?b:null;this.exp=c&&f.isNumber(c)?c:f.getTime()+864E5*v.USER_DAYS;this.cs=d?d:null};S.prototype.toObject=function(){return{id:this.id,cid:this.cid,exp:this.exp,cs:this.cs}};var T=function(a,b,
c,d,g,e){this.id=a?a:null;this.cid=b?b:null;this.origin=!!c;this.ref=d?d:null;this.cont=g?g:null;this.ns=e?!0:!1};T.prototype.toObject=function(){return{id:this.id,cid:this.cid,origin:this.origin,ref:this.ref,cont:this.cont,ns:this.ns}};var J=function(a,b,c,d){this._apiKey=a;this._http=b;this._urlPost=c;this._urlGet=d;this._first=!0};J.prototype._get=function(a,b){try{if(a&&document&&!y._ot){var c=document.createElement("script");c.type="text/javascript";c.async=!0;c.defer=!0;c.src=a;var d=document.getElementsByTagName("script")[0];
d.parentNode.insertBefore(c,d)}}catch(g){p.error("Fail to exec GET request.",g),b()}};J.prototype._post=function(a,b,c){try{if(a&&!y._ot){var d=null,g=null;!f.isUndefined(window.XMLHttpRequest)&&window.XMLHttpRequest&&(d=new window.XMLHttpRequest)&&"withCredentials"in d?(g="XMLHttpRequest",d.open("POST",a,!0),d.withCredentials=!0,d.setRequestHeader("Content-Type","text/plain")):!f.isUndefined(window.XDomainRequest)&&window.XDomainRequest&&(g="XDomainRequest",d=new window.XDomainRequest,d.open("POST",
a));if(g&&d){d.onreadystatechange=function(){try{4===this.readyState&&200!==this.status&&201!==this.status&&202!==this.status&&203!==this.status&&204!==this.status&&c(!0,{code:this.status,method:"POST",type:g,response:this.response,timeout:this.timeout})}catch(e){p.error("Fail to parse request response.",e),c(!0)}};try{d.send(b)}catch(e){p.error("Fail to send request.",e),c(!0)}}else p.debug("Fail to POST, so we'll try to do a GET."),c(!1)}}catch(e){p.error("Fail to exec request.",e),c(!0)}};J.prototype._send_data=
function(a,b){var c=this;b="cb="+(new Date).getTime();var d=c._urlPost?c._http+c._urlPost+(0>c._urlGet.indexOf("?")?"?":"&")+b:null,g=c._urlGet?c._http+c._urlGet+(0>c._urlGet.indexOf("?")?"?":"&")+b+"&data="+encodeURIComponent(a):null,e=function(){c._get(g,function(){p.error("Fail to track data="+(a?a:""))})},k=function(){var l=f.env.getBrowser();l&&"OperaMini"==l?e():c._post(d,a,function(h,q){p.debug("Try GET after POST failed to send data code="+(q&&q.code?q.code:""));e()})};if(c._first)var m=setTimeout(function(){clearTimeout(m);
c._first=!1;k()},v.OPTOUT_TIMEOUT);else k()};J.prototype._send=function(a,b){if(-1==v.HTTP_PROTOCOL.indexOf("https")||v.HTTPS_ENABLED)if(a&&f.isObject(a))if(a=f.ryEncoder.encode(a))this._send_data(a,b);else throw"Fail to serialize data to send";else throw"Fail to serialize data to send";};J.prototype.track=function(a,b){a&&this._send(a,b)};var W=function(a,b,c,d){this._defaultApi=new J(a,b,c,c);this._exemptApi=new J(a,b,d,d)};W.prototype.track=function(a){if(a){var b=a.hasUser(),c=a.hasMobileEnvironment();
b?this._defaultApi.track(a.toDefaultEvent(),c):this._exemptApi.track(a.toHitEvent(),c)}};var r=function(a,b,c,d,g,e,k,m,l,h,q,t,n,u,w,x,Q,ca,C,D,K){this._apiKey=a;this._ampCookieKey="ry_amp_"+a;this._storageMD=K;this.ovrdDomain=m;this.ovrdUrl=l;this.ovrdReferrer=h;this.ovrdOrganic=q;this.ovrdUserId=t?t:null;this._onInit=n?n:null;this._onStart=u?u:null;this._status=0!=c?1:0;this._ready=!1;this._name=b;this._mode=D;this._actOrd=[];this._acts={consent:[],identify:[],optin:[],optout:[],page:[],profile:[],
reject:[],start:[],stop:[],sync:[],track:[],trackLink:[],trackForm:[],transaction:[]};b=v.HTTP_PROTOCOL;m=e&&v.URI_ZONES[e.toString().toUpperCase()]?v.URI_ZONES[e.toString().toUpperCase()]:v.URI_ZONES.EU;n=g?g.indexOf("/event/track")?g.replace("/event/track",""):g:null;l=(n?n:f.env.isMobile()?m.API_MOBILE:m.API)+"/event/track";h=n?n:m.API_HIT+"/hit";q=(n?n:f.env.isMobile()?m.API_MOBILE:m.API)+"/sync/consent";t=(n?n:f.env.isMobile()?m.API_MOBILE:m.API)+"/sync/reject";g=b+(n?n:m.SYNC_USER)+"/sync/tc";
e=b+(n?n:m.SYNC_USER)+"/sync/us";m=b+(n?n:m.SYNC_SESSION)+"/sync/se";this._api=new W(a,b,l,h);this._apiC=new W(a,b,q,h);this._apiR=new W(a,b,t,h);this._storage=d;this._locker=new Z;this._userEId=d=(d=ca&&C&&(f.isString(C)||f.isNumber(C))?C.toString().replace(/^\s+|\s+$/g,""):null)&&"-1"!=d.toString()&&"0"!=d.toString()&&"null"!=d.toString().toLowerCase()?d:null;this._syncOnStart="auto"==w?!0:!1;this._syncOnActive="active"==w?!0:!1;this._syncOnConsent="consent"==w?!0:!1;this._syncRequested=!1;this._syncUs=
new aa(a,this._syncOnStart,x,e,Q,g);this._syncSe=new ba(a,this._syncOnStart,!0,m);this._syncAc=new V(this._syncOnStart);try{this._info={};var L=f.url.getInfo(this.ovrdUrl);L&&(this._info.url=L);var M=f.domain.getInfo(this.ovrdDomain);M&&(this._info.domain=M);var E=f.referrer.getInfo(this._apiKey,this.ovrdReferrer,k);E&&(this._info.referrer=E);var N=f.searchEngine.getInfo(L,E);N&&(this._info.se=N);var X=f.env.getInfo();X&&(this._info.env=X);var Y=f.campaign.getInfo(L);Y&&(this._info.camp=Y)}catch(ea){this._info=
{}}0!=this._status&&this._initAndStart(!0,2==c?2:1)};r.prototype._initAndStart=function(a,b){var c=this;if(0!=b){var d=function(){try{p.setUserId(c._user?c._user.id:null)}catch(e){p.error("Fail to configure logger user id.",e)}c._info.session=null;if(a&&!c.isUserTrackingAllowed()){var g=new B(c._apiKey,(new Date).getTime(),"ry_hit",null,null,null,null,null,null,null,null,null,c._info);c._api.track(g)}c._refresh(function(){if(a){try{c._onInit&&c._onInit(c._user?c._user.id:null)}catch(e){p.error("Fail to execute init callback.",
e)}c._ready=!0}if(null!=c._user)try{c._onStart&&c._onStart(c._user?c._user.id:null)}catch(e){p.error("Fail to execute start callback.",e)}a&&2==b&&(c.enable(),c.enableEvents())})};c._locker.lock(function(g){try{c._storage.getUser(function(e){var k=e?f.ryEncoder.decode(e):null,m=null;k||c.isUserTrackingAllowed()?(e=!1,!k||!k.id||k&&k.exp&&f.isNumber(k.exp)&&k.exp<f.getTime()?(m=c.ovrdUserId?c.ovrdUserId:A.read(c._ampCookieKey),e=!m,c._user=m?new S(m):new S):(m=c.ovrdUserId?c.ovrdUserId:k.id,c._user=
new S(m,k.cid?k.cid:null,k.exp?k.exp:null,k.cs?k.cs:null),(c._syncOnStart||c._syncOnActive||c._syncOnConsent&&k.cs&&"1"==k.cs.toString())&&c._sync(!0)),k=f.ryEncoder.encode(c._user.toObject()),c._storage.setUser(k,function(l){g()}),e&&(e=new B(c._apiKey,(new Date).getTime(),"ry_newuser",null,null,null,c._user?c._user.id:null,c._user?c._user.cid:null,c._userEId?c._userEId:null,null,null,null,c._info),c._api.track(e)),c._syncUs.sync(c._user,{url:c._info.url?c._info.url:null,referrer:c._info.referrer?
c._info.referrer:null})):(c._user=null,g());d()})}catch(e){c._user=null,g(),d()}})}};r.prototype.consent=function(){try{1==this._status?this._queueAction("consent",arguments):2==this._status&&this._consent()}catch(a){p.error("Fail to consent.",a)}};r.prototype._consent=function(){var a=this;try{var b=new B(this._apiKey,(new Date).getTime(),"ry_consent",null,null,null,this._user?this._user.id:null,this._user?this._user.cid:null,this._userEId?this._userEId:null,null,null,null,this._info);this._apiC.track(b);
a.isUserTrackingAllowed()&&a._refreshUserUp(function(c){return c?new S(c.id,c.cid,c.exp,1):null},function(){a._sync(!0)})}catch(c){p.error("Fail to track consent.",c)}};r.prototype.disable=function(a){var b=this;0!=b._status&&(a&&b._locker.lock(function(c){b._storage.clearUser(function(){b._storage.clearSession(function(){c()})})}),b._status=0,b._user=null)};r.prototype.enable=function(){var a=this;if(1==a._status)if(a._ready)a._shiftCalls(),a._status=2,a._shiftCalls();else var b=setTimeout(function(){b&&
clearTimeout(b);a.enable()},200)};r.prototype.enableEvents=function(){var a=this;if(2==a._status)a._shiftEvents();else if(1==a._status||R&&!R.onLoadedDone)var b=setTimeout(function(){b&&clearTimeout(b);a.enableEvents()},200)};r.prototype.getUserId=function(){try{return this._user?this._user.id:null}catch(a){p.error("Fail to get user id.",a)}};r.prototype.identify=function(a,b){try{1==this._status?this._queueAction("identify",arguments):2==this._status&&this._identify(a,b)}catch(c){p.error("Fail to identify user="+
(a?a.toString():""),c)}};r.prototype._identify=function(a,b){try{var c=this,d=a&&(f.isString(a)||f.isNumber(a))?a.toString().replace(/^\s+|\s+$/g,""):null;if(d=d&&"-1"!=d.toString()&&"0"!=d.toString()&&"null"!=d.toString().toLowerCase()?d:null){var g=!f.isUndefined(b)&&null!=b&&f.isObject(b)?b:{};g.id=d;c._refresh(function(){c._trackProfile({advertiser:g})})}}catch(e){p.error("Fail to update user on identify.",e)}};r.prototype.isUserTrackingAllowed=function(){return this._user&&null!=this._user||
"exempt"!=this._mode?!0:!1};r.prototype.isPageOrganic=function(){var a=!(this._info&&(this._info.referrer&&(!this._info.se||!this._info.se.engine)||this._info.camp));if(!a&&this._info&&this._info.url){a=f.url.getParamValue(this._info.url,"gclid");var b=f.url.getParamValue(this._info.url,"adurl");a=!(!a&&!b)}f.isUndefined(this.ovrdOrganic)||null==this.ovrdOrganic||(a=!!this.ovrdOrganic);return a};r.prototype.optin=function(){try{1==this._status?this._queueAction("optin",arguments):this._optin()}catch(a){p.error("Fail to optin.",
a)}};r.prototype._optin=function(){try{var a=this._apiKey,b=this._storageMD;U.isEnabled(a)&&0==this._status&&(U.disable(a,!b),this._status=1,this._initAndStart(!0,2))}catch(c){p.error("Fail to execute optin.",c)}};r.prototype.optout=function(){try{1==this._status?this._queueAction("optout",arguments):this._optout()}catch(a){p.error("Fail to optout.",a)}};r.prototype._optout=function(){try{var a=this._apiKey,b=this._storageMD;U.isEnabled(a)||0==this._status||(U.enable(a,!b),this.disable(!0))}catch(c){p.error("Fail to execute optout.",
c)}};r.prototype.page=function(a,b,c){try{1==this._status?this._queueAction("page",arguments):2==this._status&&this._page(a,b,c)}catch(d){p.error("Fail to track page="+(a?a.toString():""),d)}};r.prototype._page=function(a,b,c){try{var d=!1;if(a&&f.isString(a))d=!0;else{var g=f.url.getInfo(this.ovrdUrl);a=g?g>v.URL_MAX_SIZE?g.substr(0,v.URL_MAX_SIZE):g:null}g={page:a};b&&f.isString(b)&&(g.category=b);c&&f.isObject(c)&&(g.info=c);this._track("ry_page",g);d&&v.PAGE_HACK&&this._track("ry_page_"+a)}catch(e){p.error("Fail to exec track page="+
(a?a.toString():""),e)}};r.prototype.profile=function(a){try{1==this._status?this._queueAction("profile",arguments):2==this._status&&this._profile(a)}catch(b){p.error("Fail to profile user.",b)}};r.prototype._profile=function(a){try{var b=this;b._refresh(function(){b._trackProfile(a)})}catch(c){p.error("Fail to update user profile.",c)}};r.prototype.queue=function(a,b){try{a&&f.isObject(a)&&this._queueActions(a,b)}catch(c){p.error("Fail to queue actions.",c)}};r.prototype._queueActions=function(a,
b){if(a&&f.isObject(a)){for(var c in a)if(c&&"typeOf"!=c){var d=a[c];this._acts[c]&&f.isArray(this._acts[c])?this._acts[c]=this._acts[c].concat(d&&f.isArray(d)?d:[]):p.warn("Fail to queue '"+c+"'.")}b&&f.isArray(b)&&(this._actOrd=this._actOrd.concat(b))}};r.prototype._queueAction=function(a,b){if(a&&"typeOf"!=a)if(this._acts[a]&&f.isArray(this._acts[a])){var c=[];if(b&&0<b.length)for(var d=0;d<b.length;d++)c.push(b[d]);this._acts[a].push(c);this._actOrd.push(a)}else p.warn("Fail to queue '"+a+"'.")};
r.prototype.refreshContext=function(a){var b=this;try{a&&a.csid&&b._info&&b._info.session&&!b._info.session.cont&&b._refreshSessionCon(a,function(){b._refreshContextEnv()})}catch(c){p.error("Fail to refresh context.",c)}};r.prototype._refreshContextEnv=function(){try{var a=this._info&&this._info.session&&this._info.session.cont?this._info.session.cont:null,b={};b.spotId=a&&a.csid?a.csid.toString():null;b.campaignId=a&&a.caid?a.caid.toString():null;b.channelId=a&&a.chid?a.chid.toString():null;b.channelName=
a&&a.chn?a.chn.toString():null;b.creaId=a&&a.crid?a.crid.toString():null;window&&(window.RYcontext=b)}catch(c){p.error("Fail to refresh context env.",c)}};r.prototype._refresh=function(a){var b=this;try{b.isUserTrackingAllowed()?b._refreshSession(function(c){c&&b._trackEvent("ry_session");b._refreshContextEnv();if(c||b._info.session&&b._info.session.ns&&!b._syncRequested){b._syncRequested=!0;c=!(!b._info.session||!b._info.session.origin);var d=!b._info.session||!b._info.session.cont;(d||c)&&b._syncSe.sync(b._user,
d,c,{url:b._info.url?b._info.url:null,referrer:b._info.referrer?b._info.referrer:null});b._syncAc.sync(function(){b._trackProfileGA()});b._syncAc.sync(function(){b._refreshSessionSync()})}a()}):a()}catch(c){p.error("Fail to refresh user info.",c)}};r.prototype._refreshSession=function(a){var b=this;b.isUserTrackingAllowed()?b._locker.lock(function(c){var d=function(g){try{var e=null,k=!1,m=g?f.ryEncoder.decode(g):null;if(b._user&&(!m||!m.id||b._user.id&&b._user.id!=m.id||b._user.cid&&(!m.cid||b._user.cid!=
m.cid)||!b._user.cid&&m.cid)){if(m&&m.id)e=new T(b._user.id,b._user.cid,m.origin,m.ref,m.cont,m.ns);else{var l=b.isPageOrganic();e=new T(b._user.id,b._user.cid,l,this._info?this._info.referrer:null,null,!0)}k=!0;g=f.ryEncoder.encode(e.toObject())}else k=!1,e=m?new T(m.id,m.cid,m.origin,m.ref,m.cont,m.ns):null;g?b._storage.setSession(g,function(h){c()}):c()}catch(h){p.error("Fail to refresh session.",h),k=!1,e=null,c()}b._info&&(b._info.session=e);a(k)};try{b._storage.getSession(function(g){d(g)})}catch(g){d(null)}}):
a(!1)};r.prototype._refreshSessionCon=function(a,b){a&&a.csid&&this._info&&this._info.session&&!this._info.session.cont&&this.isUserTrackingAllowed()&&this._refreshSessionUp(function(c){return c?new T(c.id,c.cid,c.origin,c.ref,{csid:a.csid?a.csid:null,caid:a.caid?a.caid:null,chid:a.chid?a.chid:null,crid:a.crid?a.crid:null,chn:a.chn?a.chn:null},c.ns):null},b)};r.prototype._refreshSessionSync=function(){this._info&&this._info.session&&this._info.session.ns&&this.isUserTrackingAllowed()&&this._refreshSessionUp(function(a){return a?
new T(a.id,a.cid,a.origin,a.ref,a.cont,!1):null},function(){})};r.prototype._refreshSessionUp=function(a,b){var c=this;c.isUserTrackingAllowed()?c._locker.lock(function(d){var g=function(e){try{var k=e?f.ryEncoder.decode(e):null,m=a(k),l=m?f.ryEncoder.encode(m.toObject()):null;l?c._storage.setSession(l,function(h){c._info&&(c._info.session=m);d();b()}):(d(),b())}catch(h){p.error("Fail to refresh session.",h),d(),b()}};try{c._storage.getSession(function(e){g(e)})}catch(e){g(null)}}):b()};r.prototype._refreshUserUp=
function(a,b){var c=this;c.isUserTrackingAllowed()?c._locker.lock(function(d){var g=function(e){try{var k=e?f.ryEncoder.decode(e):null,m=a(k);(e=m?f.ryEncoder.encode(m.toObject()):null)?c._storage.setUser(e,function(l){m&&m.id&&(c._user=m);d();b()}):(d(),b())}catch(l){p.error("Fail to refresh user.",l),d(),b()}};try{c._storage.getUser(function(e){g(e)})}catch(e){g(null)}}):b()};r.prototype.reject=function(){try{1==this._status?this._queueAction("reject",arguments):2==this._status&&this._reject()}catch(a){p.error("Fail to reject.",
a)}};r.prototype._reject=function(){try{var a=new B(this._apiKey,(new Date).getTime(),"ry_reject",null,null,null,this._user?this._user.id:null,this._user?this._user.cid:null,this._userEId?this._userEId:null,null,null,null,this._info);this._apiR.track(a);this.isUserTrackingAllowed()&&this._refreshUserUp(function(b){return b?new S(b.id,b.cid,b.exp,2):null},function(){})}catch(b){p.error("Fail to track reject.",b)}};r.prototype._shiftCalls=function(){if(this._actOrd&&f.isArray(this._actOrd)&&0<this._actOrd.length){for(var a=
[];0<this._actOrd.length;){var b=this._actOrd.shift();if(b&&f.isString(b))switch(b){case "start":this._shiftAction("start",this._start);break;case "stop":this._shiftAction("stop",this._stop);break;case "optin":this._shiftAction("optin",this._optin);break;case "optout":this._shiftAction("optout",this._optout);break;case "consent":this._shiftAction("consent",this._consent);break;case "reject":this._shiftAction("reject",this._reject);break;case "identify":this._shiftAction("identify",this._identify);
break;case "profile":this._shiftAction("profile",this._profile);break;case "page":this._shiftAction("page",this._page);break;case "track":this._shiftAction("track",this._track);break;case "transaction":this._shiftAction("transaction",this._transaction);break;case "sync":this._shiftAction("sync",this._sync);break;case "trackLink":case "trackForm":a.push(b)}}this._actOrd=a}this._shiftActions("start",this._start);this._shiftActions("stop",this._stop);this._shiftActions("optin",this._optin);this._shiftActions("optout",
this._optout);this._shiftActions("consent",this._consent);this._shiftActions("reject",this._reject);this._shiftActions("identify",this._identify);this._shiftActions("profile",this._profile);this._shiftActions("page",this._page);this._shiftActions("track",this._track);this._shiftActions("transaction",this._transaction);this._shiftActions("sync",this._sync)};r.prototype._shiftEvents=function(){if(this._actOrd&&f.isArray(this._actOrd)&&0<this._actOrd.length){for(var a=[];0<this._actOrd.length;){var b=
this._actOrd.shift();if(b&&f.isString(b))switch(b){case "start":case "stop":case "optin":case "optout":case "consent":case "reject":case "identify":case "profile":case "page":case "track":case "transaction":case "sync":a.push(b);break;case "trackLink":this._shiftAction("trackLink",this._trackLink);break;case "trackForm":this._shiftAction("trackForm",this._trackForm)}}this._actOrd=a}this._shiftActions("trackLink",this._trackLink);this._shiftActions("trackForm",this._trackForm)};r.prototype._shiftActions=
function(a,b){if(this._acts&&a&&this._acts[a]&&f.isArray(this._acts[a]))for(;!f.isArrayNullOrEmpty(this._acts[a]);)this._shiftAction(a,b)};r.prototype._shiftAction=function(a,b){a&&b&&this._acts[a]&&f.isArray(this._acts[a])&&0<this._acts[a].length&&(a=this._acts[a].shift(),b.apply(this,a))};r.prototype.start=function(){try{1==this._status?this._queueAction("start",arguments):2==this._status&&this._start()}catch(a){p.error("Fail to start.",a)}};r.prototype._start=function(){try{this.isUserTrackingAllowed()||
(this._mode="default",this._initAndStart(!1,2))}catch(a){p.error("Fail to execute start.",a)}};r.prototype.stop=function(){try{1==this._status?this._queueAction("stop",arguments):2==this._status&&this._stop()}catch(a){p.error("Fail to stop.",a)}};r.prototype._stop=function(){try{var a=this;a._mode="exempt";a._user=null;a._info&&(a._info.session=null);a._locker.lock(function(b){a._storage.clearUser(function(){a._storage.clearSession(function(){b()})})})}catch(b){p.error("Fail to execute stop.",b)}};
r.prototype.sync=function(){try{1==this._status?this._queueAction("sync",arguments):2==this._status&&this._sync(!1)}catch(a){p.error("Fail to sync.",a)}};r.prototype._sync=function(a){try{this.isUserTrackingAllowed()&&(this._syncUs&&this._syncUs.enable(),this._syncSe&&this._syncSe.enable(),this._syncAc&&this._syncAc.enable(),a||this._trackProfileGA())}catch(b){p.error("Fail to start synchronizers.",b)}};r.prototype.syncScroll=function(){try{this._syncOnActive&&this._sync(!0)}catch(a){p.error("Fail to enable synchronizers on scroll.",
a)}};r.prototype.track=function(a,b){try{1==this._status?this._queueAction("track",arguments):2==this._status&&this._track(a,b)}catch(c){p.error("Fail to track event="+(a?a.toString():""),c)}};r.prototype.trackSync=function(a,b){try{this._trackEvent(a,b)}catch(c){p.error("Fail to track sync event="+(a?a.toString():""),c)}};r.prototype._track=function(a,b){var c=this;try{c._refresh(function(){c._trackEvent(a,b)})}catch(d){p.error("Fail to exec track event="+(a?a.toString():""),d)}};r.prototype._trackEvent=
function(a,b){try{if(a)if(f.isString(a)){var c=f.isUndefined(b)||null==b||f.isObject(b)?b:{value:b},d=b=null,g=null;if(c)for(var e in c)if(e){var k=c[e];switch(e.toString().toLowerCase()){case "transaction":if(!f.isUndefined(k)&&null!=k&&(f.isObject(k)||f.isNumber(k)||f.isString(k)))if(d={},f.isObject(k)){var m=k.amount;f.isUndefined(m)||null==m||!f.isNumber(m)&&!f.isString(m)||(d.am=m);var l=k.orderId;f.isUndefined(l)||null==l||!f.isNumber(l)&&!f.isString(l)||(d.oid=l)}else d.am=k;break;case "user":if(!f.isUndefined(k)&&
null!=k&&f.isObject(k)){var h=k.id;f.isUndefined(h)||null==h||!f.isNumber(h)&&!f.isString(h)||(h=(h=h&&(f.isString(h)||f.isNumber(h))?h.toString().replace(/^\s+|\s+$/g,""):null)&&"-1"!=h.toString()&&"0"!=h.toString()&&"null"!=h.toString().toLowerCase()?h:null)&&(g=h)}b||={};b[e]=k;break;default:b||={},b[e]=k}}var q=new B(this._apiKey,(new Date).getTime(),a,b,d,null,this._user?this._user.id:null,g?g:this._user?this._user.cid:null,this._userEId?this._userEId:null,null,null,null,this._info);this._api.track(q)}else p.warn("Unable to track, event not a string.");
else p.warn("Unable to track, event not valid.")}catch(t){p.error("Fail to track event with api.",t)}};r.prototype._trackProfile=function(a){try{var b=!f.isUndefined(a)&&null!=a&&f.isObject(a)?a:null;a={};var c=!1;if(b)for(var d in b)if(d){var g=b[d.toString().toLowerCase()];if(g&&f.isObject(g)){a[d]={};for(var e in g){var k=e.toString().toLowerCase(),m=g[e];switch(k){case "id":case "firstname":case "lastname":case "gender":case "email":case "created":case "birthdate":"id"==k&&(c=!0);a||(a[d]={});
a[d][k]=m;break;default:a||(a[d]={}),a.meta||(a[d].meta={}),a[d].meta[k]=m}}}}if(c){var l=new B(this._apiKey,(new Date).getTime(),"ry_profile",null,null,null,this._user?this._user.id:null,this._user?this._user.cid:null,this._userEId?this._userEId:null,null,null,a,this._info);this._api.track(l)}}catch(h){p.error("Fail to track identify with api.",h)}};r.prototype._trackProfileGA=function(){try{var a=this,b=function(d){d&&!a._trackProfileGADone&&(a._trackProfile({ga:{id:d}}),a._trackProfileGADone=!0)},
c=setTimeout(function(){c&&clearTimeout(c);try{if(window&&!f.isUndefined(window.ga)&&window.ga){var d=window.ga.getAll&&window.ga.getAll()&&window.ga.getAll().length&&window.ga.getAll()[0]?window.ga.getAll()[0].get("clientId"):null;d?b(d):window.ga(function(g){try{var e=g&&g.get?g.get("clientId"):null;(e=!e&&window.ga.getAll&&window.ga.getAll()&&window.ga.getAll().length&&window.ga.getAll()[0]?window.ga.getAll()[0].get("clientId"):e)&&b(e)}catch(k){p.error("Fail to exec ga profile.",k)}})}}catch(g){p.error("Fail to exec ga profile.",
g)}},200)}catch(d){p.error("Fail to exec ga profile.",d)}};r.prototype.trackLink=function(a,b,c){try{1==this._status?this._queueAction("trackLink",arguments):2==this._status&&this._trackLink(a,b,c)}catch(d){p.error("Fail to track link.",d)}};r.prototype._trackLink=function(a,b,c){try{var d=da.getDomElements(a);if(d&&f.isArray(d)&&1<=d.length)if(b)if(f.isString(b))for(a=0;a<d.length;a++)d[a]&&this._trackLinkByElement(d[a],b,c);else p.warn("Unable to track link, event not a string.");else p.warn("Unable to track link, no event.")}catch(g){p.error("Fail to exec track link.",
g)}};r.prototype._trackLinkByElement=function(a,b,c){try{if(a&&b){var d=this;R.onEvent(a,"click",function(g,e){try{d.track(b,c);var k=g&&g.href?g.href:null;e&&(e.which&&2===e.which||e.metaKey||e.ctrlKey)||g&&g.target&&"_blank"===g.target||!e||(e.preventDefault?e.preventDefault():e.returnValue=!1,setTimeout(function(){window&&!f.isUndefined(k)&&null!=k&&(window.location=k)},v.RDRCT_TIMEOUT))}catch(m){p.error("Fail to track link after click.",m)}})}}catch(g){p.error("Fail to track link on click.",g)}};
r.prototype.trackForm=function(a,b,c){try{1==this._status?this._queueAction("trackForm",arguments):2==this._status&&this._trackForm(a,b,c)}catch(d){p.error("Fail to track form.",d)}};r.prototype._trackForm=function(a,b,c){try{var d=da.getDomElements(a);if(d&&f.isArray(d)&&1<=d.length)if(b)if(f.isString(b))for(a=0;a<d.length;a++)d[a]&&this._trackFormByElement(d[a],b,c);else p.warn("Unable to track form, event not a string.");else p.warn("Unable to track form, no event.")}catch(g){p.error("Fail to track form.",
g)}};r.prototype._trackFormByElement=function(a,b,c){try{if(a&&b){var d=this;R.onEvent(a,"submit",function(g,e){try{d.track(b,c),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,setTimeout(function(){g&&g.submit&&g.submit()},v.RDRCT_TIMEOUT))}catch(k){p.error("Fail to track form after click.",k)}})}}catch(g){p.error("Fail to track form on click.",g)}};r.prototype.transaction=function(a,b){try{1==this._status?this._queueAction("transaction",arguments):2==this._status&&this._transaction(a,b)}catch(c){p.error("Fail to track transaction.",
c)}};r.prototype._transaction=function(a,b){try{if(f.isUndefined(a)||null==a||!f.isNumber(a)&&!f.isString(a))p.warn("Unable to track, no valid amount.");else{var c={};c.transaction=b&&f.isObject(b)?b:{};c.transaction.amount=a;this._track("ry_transaction",c)}}catch(d){p.error("Fail to track.",d)}};var O=function(a){this._ry=a;this._instances=[]};O.prototype.createTracker=function(a,b,c,d){a=function(g,e,k,m){var l=null,h=m&&f.isObject(m)?m:null;m=!(!h||!0!==h.storageMainDomain);var q=!!(h&&h.xdm&&
v.XDM_ENABLED),t=h&&h.mode?h.mode.toString().toLowerCase():null;if(!t||"exempt"!=t&&"default"!=t)t="default";var n=!(h&&!1===h.syncAuto),u=!(!h||!0!==h.syncManual),w=h&&h.syncType?h.syncType.toString().toLowerCase():null;w||(n&&!u?w="auto":n||u?u&&(w="manual"):w="active");"auto"!=w&&"active"!=w&&"manual"!=w&&"consent"!=w&&(w="auto");u="ry-br0v4113 ry-s0n41to2 ry-l4f02rfr ry-l4f02rch ry-th3f0rit ry-t3f0rkbe ry-t3f0rknl ry-3ltenees ry-loc2jui1 ry-fx33aenn ry-021gos81 ry-h1m0ll4z ry-b3l4mbra ry-ty1rdrd3 ry-kj34qqz5 ry-och2w2l9".split(" ");
n=!(!h||!h.syncUser);if(!n&&g&&u)for(var x=0;x<u.length;x++)if(u[x]&&u[x].toLowerCase()==g.toLowerCase()){n=!0;break}n=!!n;u=!(!h||!h.syncTc);x=!(!h||!h.syncEu);var Q=h&&h.uidEu?h.uidEu.toString():null,ca=h&&h.api&&f.isString(h.api)?h.api:null,C=h&&h.zone&&f.isString(h.zone)?h.zone:null,D=(C&&v.URI_ZONES[C.toString().toUpperCase()]?v.URI_ZONES[C.toString().toUpperCase()]:v.URI_ZONES.EU).XDM;D=v.HTTP_PROTOCOL+D+"/txd.html";var K=U.isEnabled(g),L=f.env.isBot||y._ot||!A.support||K?0:k;k=new I(q?"xdm":
"cookie",g,e,D,m,function(Y){Y||(L=0,l&&l.disable&&l.disable(!1))});q=!(!h||!h.topReferrer);D=(D=h&&!f.isUndefined(h.domain)?h.domain:f.noOvrd)?D:null;K=(K=h&&!f.isUndefined(h.referrer)?h.referrer:f.noOvrd)?K:null;var M=h&&!f.isUndefined(h.organic)?h.organic:null;M=null!=M?M:null;var E=h&&!f.isUndefined(h.url)?h.url:f.noOvrd;E=E?E:null;var N=h&&!f.isUndefined(h.userId)&&h.userId&&(f.isString(h.userId)||f.isNumber(h.userId))?h.userId:null;N=N?N.toString():null;var X=h&&!f.isUndefined(h.onInit)?h.onInit:
null;h=h&&!f.isUndefined(h.onStart)?h.onStart:null;l=new r(g,e,L,k,ca,C,q,D,E,K,M,N,X,h,w,n,u,x,Q,t,m);return{_disable:function(){return l.disable.apply(l,arguments)},_enable:function(){return l.enable.apply(l,arguments)},_enableEvents:function(){return l.enableEvents.apply(l,arguments)},_syncScroll:function(){return l.syncScroll.apply(l,arguments)},consent:function(){return l.consent.apply(l,arguments)},getUserId:function(){return l.getUserId.apply(l,arguments)},identify:function(){return l.identify.apply(l,
arguments)},optin:function(){return l.optin.apply(l,arguments)},optout:function(){return l.optout.apply(l,arguments)},page:function(){return l.page.apply(l,arguments)},profile:function(){return l.profile.apply(l,arguments)},queue:function(){return l.queue.apply(l,arguments)},refreshContext:function(){return l.refreshContext.apply(l,arguments)},reject:function(){return l.reject.apply(l,arguments)},start:function(){return l.start.apply(l,arguments)},stop:function(){return l.stop.apply(l,arguments)},
sync:function(){return l.sync.apply(l,arguments)},track:function(){return l.track.apply(l,arguments)},trackLink:function(){return l.trackLink.apply(l,arguments)},trackForm:function(){return l.trackForm.apply(l,arguments)},trackSync:function(){return l.trackSync.apply(l,arguments)},transaction:function(){return l.transaction.apply(l,arguments)}}}(a,b,c,d);this._instances.push(a);return a};O.prototype.bindMainInstance=function(a){var b=this._ry[v.MAIN_INSTANCE]=a;this._ry.consent=function(){return b.consent.apply(b,
arguments)};this._ry.getUserId=function(){return b.getUserId.apply(b,arguments)};this._ry.identify=function(){return b.identify.apply(b,arguments)};this._ry.optin=function(){return b.optin.apply(b,arguments)};this._ry.optout=function(){return b.optout.apply(b,arguments)};this._ry.page=function(){return b.page.apply(b,arguments)};this._ry.profile=function(){return b.profile.apply(b,arguments)};this._ry.refreshContext=function(){return b.refreshContext.apply(b,arguments)};this._ry.reject=function(){return b.reject.apply(b,
arguments)};this._ry.start=function(){return b.start.apply(b,arguments)};this._ry.stop=function(){return b.stop.apply(b,arguments)};this._ry.sync=function(){return b.sync.apply(b,arguments)};this._ry.track=function(){return b.track.apply(b,arguments)};this._ry.trackLink=function(){return b.trackLink.apply(b,arguments)};this._ry.trackForm=function(){return b.trackForm.apply(b,arguments)};this._ry.trackSync=function(){return b.trackSync.apply(b,arguments)};this._ry.transaction=function(){return b.transaction.apply(b,
arguments)}};O.prototype.bindAllInstances=function(){if(this._ry._q)for(var a in this._ry._q){var b=this._ry._q[a].init;f.isArrayNullOrEmpty(b)||(f.isArrayNullOrEmpty(b[0])?p.warn("Fail to init new tracker, no api key."):(this._ry[a]=this.createTracker(b[0][0],a,1,1<b[0].length&&b[0][1]&&f.isObject(b[0][1])?b[0][1]:null),a==v.MAIN_INSTANCE&&this.bindMainInstance(this._ry[a])),this._ry._q[a].init=null)}};O.prototype.bindAllActions=function(){if(this._ry._q){for(var a in this._ry._q){var b={},c=null,
d;for(d in this._ry._q[a])if(d&&f.isString(d)){var g=[];this._ry._q[a][d]&&(g=this._ry._q[a][d]);var e=!1;"init"==d||"_q"==d||"consent"!=d&&"identify"!=d&&"optin"!=d&&"optout"!=d&&"page"!=d&&"profile"!=d&&"reject"!=d&&"start"!=d&&"stop"!=d&&"sync"!=d&&"track"!=d&&"transaction"!=d&&"trackLink"!=d&&"trackForm"!=d||(e=!0);e&&(b[d]=g);"_q"==d&&(c=g)}this._ry[a]&&this._ry[a].queue&&this._ry[a].queue(b,c);this._ry._q[a]=null;this._ry[a]&&this._ry[a]._enable&&this._ry[a]._enable()}this._ry._q={}}};O.prototype.bindAllActionsEvent=
function(){if(this._instances)for(var a=0;a<this._instances.length;a++){var b=this._instances[a];b&&b._enableEvents&&b._enableEvents()}};O.prototype.bindAllActionsScroll=function(){if(this._instances)for(var a=0;a<this._instances.length;a++){var b=this._instances[a];b&&b._syncScroll&&b._syncScroll()}};try{var P=new O(y);P.bindAllInstances();y._otf=function(){try{y._ot=1;for(var c in y)f.isObject(y[c])&&f.isFunction(y[c]._disable)&&y[c]._disable(!0)}catch(d){p.error("Fail to disable tracker.",d)}};
y.init=function(c,d){try{var g=d?f.isObject(d)&&d.name?d.name:null:f.isString(d)?d:null;if(c){var e=g?g:v.MAIN_INSTANCE;y[e]||(y[e]=P.createTracker(c,e,2,d&&f.isObject(d)?d:null),e==v.MAIN_INSTANCE&&P.bindMainInstance(y[e]))}else p.warn("Fail to init, invalid apiKey.")}catch(k){p.error("Fail to init with apiKey.",k)}};P.bindAllInstances();P.bindAllActions();function a(){try{a.set||(a.set=!0,P.bindAllActionsEvent())}catch(c){p.error("Fail to bind tracker on DOM loaded.",c)}}R.onLoaded(a);function b(){try{b.set||
(b.set=!0,P.bindAllActionsScroll())}catch(c){p.error("Fail to bind tracker on DOM scrolled.",c)}}R.onScrolled(b)}catch(a){p.error("Fail to init SDK.",a)}}})(window.RY||{});
