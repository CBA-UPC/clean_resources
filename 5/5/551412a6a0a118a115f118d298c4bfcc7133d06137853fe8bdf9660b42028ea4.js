(self.webpackChunkweb=self.webpackChunkweb||[]).push([[59673],{48013:(e,t,i)=>{"use strict";i.d(t,{JR:()=>p,O6:()=>l,OD:()=>c,bp:()=>u,ep:()=>v,oM:()=>r,qc:()=>h,xz:()=>f});var o=i(42947),s=i(33487),d=i(63658),a=i(54620);const r="VIDEO_SUCCESS_EVENT";function n(e,t){o.Z.post(`${d.AJ}/timespoint/submit/activity/toi`,JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((i=>{i.data.status,i&&i.data&&i.data.success&&(!function(e,t){if(void 0!==window.localStorage)try{let i=localStorage.getItem(s.Ls8);i=i?JSON.parse(i):{},i[e]?i[e].push(t):i[e]=[t],window.localStorage.setItem(s.Ls8,JSON.stringify(i))}catch(e){}}(e.aname,e.txnId),t(i))})).catch(()}function l(e){const t=(0,d.dK)(e);if(void 0!==window.localStorage){let e={};try{e=localStorage.getItem(s.Ls8);const i=t&&t.dailycheckin?t.dailycheckin:"";if(!e||!i)return;e=JSON.parse(e),e&&e[i]&&e[i].length>0&&(e[i]=[],window.localStorage.setItem(s.Ls8,JSON.stringify(e)))}catch(e){}}}function c(){return a.ZP.get("MSCSAuthDetails")?a.ZP.get("MSCSAuthDetails").split("=")[1]:""}function h(){return a.ZP.get("ssoid")}unction m(e,t,i,o,a=!1){const r="TOI",l="TOI",c=(h(),a?"msite":"web"),p=(0,d.dK)(a),m={pcode:`${r}`,scode:`${l}`,aname:`${p[e]||""}`,txnId:`${t}`,apiVersion:"23",clientId:"TOI",platform:`${c}`};if(!m.aname)return;const u=d=>{switch(i){case"deviceid":m.deviceId=d;break;case"ssoid":m.uid=d}(function(e,t){if(void 0===window.localStorage)return!0;let i={},o={},d=!1;try{if(i=window.localStorage.getItem(s.ls),o=localStorage.getItem(s.Ls8),!i)return!0;if(i=JSON.parse(i),o=JSON.parse(o),i&&i[t]){let a=o&&o.date?o.date:"";const r=new Date,n=[r.getDate(),r.getMonth(),r.getFullYear()].join("-");n!==a?(a=n,d=!0,o={},o.date=a,window.localStorage.setItem(s.Ls8,JSON.stringify(o))):(!o||!o[t]||o[t].length<i[t]&&-1===o[t].indexOf(e))&&(d=!0)}else d=!0}catch(e){d=!0}return d})(t,p[e])&&n(m,o)};"deviceid"===i?(void 0===window.tpsdk&&(window.tpsdk=window.tpsdk.l=1*new Date,window.tpsdk=window.tpsdk||{}),window.tpsdk("init",{platform:c,channelCode:"TOI"}),window.tpsdk("getDeviceId",u)):u(`${h()}`)}function u(e=!1,t,i,o){"string"!=typeof h()?m(t,i,"deviceid",o,e):m(t,i,"ssoid",o,e)}function f(e,t,i){"string"==typeof e&&e.indexOf("facebook")>=0&&u(i,"sh_fb",`fb_${t}`),"string"==typeof e&&e.indexOf("twitter")>=0&&u(i,"sh_tw",`tw_${t}`)}function v(){const e={pcode:"TOI",scode:"TOI",uid:h(),email:c()},t=e=>{if(!e)return;const t={uid:h(),pcode:"TOI",platform:"web",clientId:"TOI",deviceId:e};o.Z.post(`${d.AJ}/timespoint/init/toi`,JSON.stringify(t),{headers:{"Content-Type":"application/json"}})};return"function"==typeof window.tpsdk&&window.tpsdk("getDeviceId",t),window.TPWidget&&window.TPWidget.PostLoginActions({host:e.pcode,channel:e.scode,URL:escape(document.location.href),userId:e.uid,oid:"",email:e.email})}},59205:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:);var o,s=i(67294),d=i(16708),a=i(42947),r=i(45697),n=i.n(r),l=i(23255),c=i(94829),h=i(37974),p=i(99408),m=i(85634),u=i(1178),f=i(23268),v=i.n(f),w=i(6048),g=i(12615),T=i(46066);unction y(e,t,i,s){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var d=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),1===a)t.children=s;else if(a>1){for(var r=new Array(a),n=0;n<a;n++)r[n]=arguments[n+3];t.children=r}if(t&&d)for(var l in d)void 0===t[l]&&(t[l]=d[l]);else t||(t=d||{});return{$$typeof:o,type:e,key:void 0===i?null:""+i,ref:null,props:t,_owner:null}}class V extends s.Component{constructor(){super(),this.sliderRef=s.createRef()}render(){const{isWapView:e,items:t,handleSliderCardItem:i,activeSlide:o,isTablet:d}=this.props;if(!e&&t){const e={slidesToShow:d&&d()?4:Math.round(window.outerWidth/178),slidesToScroll:d&&d()?4:Math.round(window.outerWidth/178),pauseOnHover:!1,pauseOnFocus:!1,dots:!1,arrows:!0,swipeToSlide:!0,autoplay:!1,draggable:!1,infinite:!1};return y("div",{className:`${v().trendingvdo}`},void 0,s.createElement(T.default,S({},e,{ref:this.sliderRef}),t&&t.map((e=>y("div",{className:`${v().parentContainer} ${o===e.id?v().active:""} ${e.primeid?v().prime:""}`},void 0,y(w.Z,{to:e.wu||e.su,className:"",title:e.hl,spa:!0,onClick:,void 0,y("div",{className:v().vdothumb},void 0,y("div",{className:v().content},void 0,function(e){let t,i="https://static.toiimg.com/photo/34824568.cms";return e.imageid&&-1!==e.imageid.indexOf("https://static.toiimg.com")?i=e.imageid:e.imageid?(t=e.imageid.split("&"),i=t.length>1?`https://static.toiimg.com/thumb/msid-${t[0]},${t[1]},width-280,resizemode-4/${t[0]}.jpg`:`https://static.toiimg.com/photo/msid-${t[0]},width-280,resizemode-4/${t[0]}.jpg`):i=`https://static.toiimg.com/photo/msid-${e.id},width-280,resizemode-4/${e.id}.jpg`,y(g.Z,{src:i,alt:e.hl,placeHolderSrc:"https://static.toiimg.com/photo/34824568.cms",offsetVertical:100})}(e),y("span",{className:v().playicon},void 0,e.du))),y("div",{className:v().vdoinfo},void 0,y("span",{className:v().discription},void 0,e.hl))))))))}return""}}V.defaultProps={isWapView:!1,items:[],isTablet:void 0};const I=V;var O;lass C extends s.Component{constructor(e){super(e),this.handleSliderCardItem=(e,t)=>{e.preventDefault(),this.setState({playingVideoItem:t,activeSlide:t.id,slikeNextVideoAutoPlayed:!1})},this.handleClose=()=>{this.setState({isVideoTheatreMinified:!1,playingVideoItem:void 0,activeSlide:void 0}),this.props.closeVideoTheatre()},this.videoEventListener=(e,t)=>{this.a="";const i=t?t[1]:"";let o="",s="",d="";const a=this.state.bottomVideosSliderData.map(();switch(i){case"VIDEOVIEW":o=t&&t.length>2&&t[2],this.setState({slikeNextVideoAutoPlayed:!0});break;case"VIDEOEND":d=this.state.activeSlide,o=a[a.indexOf(d)+1],s=this.getSlikeIdFromMsid(o),this.props.addNextVideoMsid(o,s)}},this.currArticleshowUrl={wu:"",hl:""},this.state={bottomVideosSliderData:[],playingVideoItem:void 0,isVideoTheatreMinified:!1,activeSlide:void 0,slikeNextVideoAutoPlayed:!0}}getSlikeIdFromMsid(e){let t="";const{bottomVideosSliderData:i}=this.state;for(let o=0;o<i.length;o+=1)if(i[o].id===e){t=i[o].playerId;break}return t}changeUrl(){const{playingVideoItem:e}=this.state;window.location.href.includes("/articleshow/")&&(this.currArticleshow={wu:window.location.href,hl:document.title});const t=e?e.wu.replace("https://timesofindia.indiatimes.com",""):this.currArticleshow.wu,i=e?e.hl:this.currArticleshow.hl;if(window.history&&!(window.location.href.indexOf(t)>=0)){try{window.history.pushState({},i,t)}catch(e){}"undefined"!=typeof window&&-1!==t.indexOf("/videoshow/")&&(window.TimesGA&&window.TimesGA.setGAParams&&window.TimesGA.setGAParams({}),(0,p.Z)("gaAndGrx","send",{hitType:"pageview",page:t,location:t}))}}componentDidUpdate(e,t){const{videoTheatreSliderPath:i,isVideoTheatreOpen:o,videoTheatreCurrMsid:s}=this.props,{isVideoTheatreMinified:r,activeSlide:n}=this.state;if(e.isVideoTheatreOpen===o||o||this.setState({isVideoTheatreMinified:!1,playingVideoItem:void 0,activeSlide:void 0}),e.videoTheatreCurrMsid!==s&&this.setState({isVideoTheatreMinified:!1}),t.isVideoTheatreMinified!==r&&r&&this.props.showMiniTvPlayer(!1),t.isVideoTheatreMinified!==r&&!r){document.getElementsByTagName("body")[0].style.overflow=this.state.isVideoTheatreMinified?"hidden":""}if(o!==e.isVideoTheatreOpen&&o&&(this.props.deleteDockCandidate(),this.props.deleteUnDockCandidate()),o===e.isVideoTheatreOpen&&r===t.isVideoTheatreMinified&&n===t.activeSlide||this.changeUrl(),(e.videoTheatreSliderPath!==i||e.videoTheatreCurrMsid!==s)&&this.props.isVideoTheatreOpen){let e=i;if(i&&i.startsWith("https://")){const t=i.replace("https://timesofindia.indiatimes.com/","").replace(/\/videoshow\/\d+.cms/,"").split("/");t.pop(),e=(0,d.Z)({path:`/${t.join("/")}`,perpage:10})}else e=(0,d.Z)({path:i,perpage:10});const t=this;a.Z.get(e,{isMobile:this.props.isMobile}).then((e=>{if(200===e.status){let i=[];e.data&&e.data.data&&e.data.data.items?i=e.data.data.items:e.data.sections&&e.data.sections[0]&&e.data.sections[0].data&&(i=e.data.sections[0].data.items);let o=i||[];o&&o.length>10&&(o=o.slice(0,10));const s=this.props.videoTheatreCurrMsid;let d=o.filter(();0===d.length&&(d=[this.props.videoTheatreCurrItem],o.unshift(this.props.videoTheatreCurrItem)),t.setState({bottomVideosSliderData:o,playingVideoItem:d?d[0]:void 0,activeSlide:s})}}))}}render(){const{isUserPrime:e,isVideoTheatreOpen:t}=this.props,{bottomVideosSliderData:i,playingVideoItem:o}=this.state;if(t&&0!==i.length&&o){const t=o.imageid.split("&"),s=this,d=i.filter((),a=d.length>0?d[0].hl:"",r=this.props.videoTheatreCurrItem&&this.props.videoTheatreCurrItem.primeid?parseInt(this.props.videoTheatreCurrItem.primeid,10):0,n=r&&r>0;return b("div",{className:`${v().video_theatreoverlay} ${this.state.isVideoTheatreMinified?v().theatreDocked:""}`},void 0,!(0,c.Em)()&&b("button",{className:v().dockicon,type:"button",onClick:),b("button",{type:"button",className:v().close,onClick:this.handleClose}),b(l.default,{autoplay:!0,slikeNextVideoAutoPlayed:this.state.slikeNextVideoAutoPlayed,videoClassName:v().video_theatrevideo,msid:o.id,imgsize:2===t.length?t[1]:"",playerContainerId:`${o.id}`,isPrime:e,allowDim:!1,isUserPrime:e,isContentPrime:n,isVideoTheatreMinified:this.state.isVideoTheatreMinified,store:this.context.store,outsideEventListener:(...e)=>{if(e[1]&&"VIDEOVIEW"===e[1][1]){const t=i.filter((t=>t.playerId===e[1][2]));t&&t.length>0&&s.setState({playingVideoItem:t[0],activeSlide:t[0].id})}this.videoEventListener(...e)}}),b("p",{className:v().vdotxt},void 0," ",a),!this.state.isVideoTheatreMinified&&b(I,{items:i,handleSliderCardItem:this.handleSliderCardItem,activeSlide:this.state.activeSlide,isTablet:c.Em}))}return""}}C.defaultProps={isUserPrime:!1,videoTheatreSliderPath:"",isVideoTheatreOpen:!1,videoTheatreCurrMsid:"",videoTheatreCurrItem:{},isMobile:!1},C.contextTypes={store:n().object.isRequired};const M=(0,h.$j)((e=>({isUserPrime:e.isPrime,isVideoTheatreOpen:e.articleshow_v2.isVideoTheatreOpen,videoTheatreSliderPath:e.articleshow_v2.videoTheatreSliderPath,videoTheatreCurrMsid:e.articleshow_v2.videoTheatreCurrMsid,videoTheatreCurrItem:e.articleshow_v2.videoTheatreCurrItem,isMiniTvPlayerShown:e.miniTv.showMiniTvPlayer,isMobile:e.isMobile})),(e=>({closeVideoTheatre:()=>{e((0,m.Gx)())},openVideoTheatre:()=>{e((0,m.VZ)())},addNextVideoMsid:deleteDockCandidate:()=>{e((0,m.RO)())},deleteUnDockCandidate:showMiniTvPlayer:)))(C)},23268:]);
//# sourceMappingURL=VideoTheater_v2_es6_module.8ca0b689.chunk.js.map