.visually-hidden {
  clip-path: inset(100%);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}
.button-and-tooltip {
  position: relative;
  display: inline;
}
.button-and-tooltip button {
  background: transparent;
  border: none;
  box-shadow: none;
  position: relative;
  padding: 0 0 0 6px;
}
[role="tooltip"] {
  display: none;
  position: absolute;
  top: -6px;
  left: 28px;
  width: 250px;
  background-color: #f7fafc;
  border:1px solid black;
  padding:4px 10px;
  border-radius: 5px;
}
button:hover + [role="tooltip"],
button:focus + [role="tooltip"] {
  display: block;
}
.left-corner {
  width: 0;
  height: 0;
  border-bottom: 5px solid transparent;
  border-right: 5px solid #000;
  border-left: 5px solid transparent;
  border-top: 5px solid transparent;
  left: -10px;
  top: 8px;
  position: absolute;
}
td.tablecell.arxivdoi, td.tablecell.doi {
    display: inline-flex;
    align-items: center;
}

/* tooltip displays to the left on small screens*/
@media screen and (max-width: 480px) {
  [role="tooltip"] {
    width: 250px;
    left: -273px;
  }
  .left-corner {
    border-right: 5px solid transparent;
    border-left: 5px solid #000;
    left: auto;
    right:-10px;
  }
}
,fromCamelCase:function(e,t){return t=t||"-",e.replace(/[A-Z]/g,function(e){return t+e.toLowerCase()})},toEventName:function(e){return e.replace(/^on([A-Z])/,function(e){return e.charAt(2).toLowerCase()})},isEventOption:function(e){return/^on([A-Z])/.test(e)}}}),define("fly/utils/url-helper-2.0",[],function(){return{buildUrl:function(e,t,i,n){var r=e+t;return(i=this._stringifyObject(i))&&(r+="?"+i),(n=this._stringifyObject(n))&&(r+="#"+n),r},getParam:function(e,t){var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t||window.location);return i?i[1]:null},getParamAsArray:function(e){var t=this.getParam(e);return t?t.split(","):null},getAllParams:function(e){var t=(e?this._getParsableUrl(e):window.location).search.substring(1),i=t.split("&"),n={};if(""===t)return{};for(var r=0;r<i.length;r++){var a=i[r].split("=");n[unescape(a[0])]=unescape(a[1])}return n},getHashParam:function(e,t){var i=(t||window.location.hash).substring(1),n="",r="";if(-1!=i.indexOf(e)){if(-1!=(n=i.substring(i.indexOf(e))).indexOf("&"))r=n.split("&")[0].split("=");else r=n.split("=");return r[1]}return!1},paramExists:function(e,t){return!!(t||window.location.href).match("[\\?&]"+e+"([=&#]|$)")},getOrigin:function(e){var t=e?this._getParsableUrl(e):window.location;return t.origin||t.protocol+"//"+t.host},getPath:function(e){var t=(e?this._getParsableUrl(e):window.location).pathname;return-1===[void 0,"/"].indexOf(t[0])&&(t="/"+t),t},_getParsableUrl:function(e){var t=document.createElement("a");return t.href=e,t},_stringifyObject:function(e,t,i){var n="";if(t=t||"&",i=i||"=",null==e||[]==e||{}==e);else if(Array.isArray(e))n=e.join(t);else if("object"==typeof e){for(var r in e){n+=r+i+e[r]+t}n=n.substring(0,n.length-1)}else"string"==typeof e&&(n=e);return n}}}),function(e){var t;if("function"==typeof define&&define.amd&&(define("fly/libs/js-cookie-2.2.0",e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var i=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=i,n}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function i(n){function r(){}function a(t,i,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},r.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(i);/^[\{\[]/.test(o)&&(i=o)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,!0!==a[l]&&(s+="="+a[l].split(";")[0]));return document.cookie=t+"="+i+s}}function o(e,i){if("undefined"!=typeof document){for(var r={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),l=s.slice(1).join("=");i||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var u=t(s[0]);if(l=(n.read||n)(l,u)||t(l),i)try{l=JSON.parse(l)}catch(e){}if(r[u]=l,e===u)break}catch(e){}}return e?r[e]:r}}return r.set=a,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,i){a(t,"",e(i,{expires:-1}))},r.defaults={},r.withConverter=i,r}(function(){})}),define("fly/managers/cookie-2.0",["fly/libs/js-cookie-2.2.0"],function(e){var t={domains:{default:null}};return{init:function(e){this.setConfig(e)},setConfig:function(e){"object"==typeof e&&null!==e&&Object.assign(t,e)},set:function(i,n,r){r=r||{},("object"==typeof n&&null!==n||Array.isArray(n))&&(n=JSON.stringify(n)),r.domain?r.domain in t.domains&&(r.domain=t.domains[r.domain]):r.domain=t.domains.default,r.domain||delete r.domain,e.set(i,n,r)},get:function(t){var i,n=e.get(t);try{i=JSON.parse(n)}catch(e){i=n}return i},remove:function(t,i){e.remove(t,i)}}}),define("fly/managers/debug-2.0",["module","version!fly/utils/string-helper","version!fly/utils/url-helper","version!fly/managers/cookie"],function(e,t,i,n){var r,a,o,s={},l={queryParam:"jsDebug",cookie:{name:"fly_js_debug",domain:"default"}},u=!1,c=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};return Object.assign(l,e.config()),(a=i.getParamAsArray(l.queryParam)||[])?n.set(l.cookie.name,a,{path:"/",domain:l.cookie.domain}):o=n.get(l.cookie.name)||[],(a.indexOf("true")>-1||a.indexOf("all")>-1)&&(n.set(l.cookie.name,!0,{path:"/",domain:l.cookie.domain}),u=!0),(r=function(e){this.name=e,this.color="hsl("+c(0,360)+","+c(35,80)+"%,"+c(20,45)+"%)",(!0===o||Array.isArray(a)&&a.indexOf(this.name)>-1||Array.isArray(o)&&o.indexOf(this.name)>-1)&&this.enable()}).prototype={constructor:r,enabled:!1,_call:function(e,t){if(window.console&&(this.enabled||u)){t.callee=t.callee.caller;var i=[].slice.call(t);-1<["error","info","log","trace","warn"].indexOf(e)&&i.unshift("%c "+this.name+" ","color:#fff;border-radius:3px;background-color:"+this.color+";"),"object"==typeof window.console&&"function"==typeof window.console[e]&&window.console[e].apply(window.console,i)}return this},disable:function(){return this.enabled=!1,this},enable:function(){return this.enabled=!0,this},error:function(){return this._call("error",arguments)},info:function(){return this._call("info",arguments)},log:function(){return this._call("log",arguments)},profile:function(){return this._call("profile",arguments)},profileEnd:function(){return this._call("profileEnd",arguments)},timeStamp:function(){return this._call("timeStamp",arguments)},trace:function(){return this._call("trace",arguments)},warn:function(){return this._call("warn",arguments)}},{init:function(e){var t=new r(e);return s[e]=t,t},get:function(e){return s[e]||this.init(e)}}}),define("libs/hls-video",["version!fly/managers/debug"],function(e){return function(t){var i=e.init("hls-wrapper");i.log("Prepare to initialize");var n,r,a,o=null,s=function(e,t,n){return i.log("togglePlayback",t?"pause":"play",n),t&&e.paused?void i.log("Video is already paused",n):t?(i.log("PAUSE video",n),e.pause(),o&&o.stopLoad(),!0):e.paused?(i.log("PLAY video",n),e.play(),o&&o.startLoad(-1),!0):void i.log("Video IS not paused",n)},l=function(e,t,n,r){if(void 0!==document.hidden||void 0!==document.webkitHidden){document.addEventListener(n,function(){i.log("onPageVisibilityChange","Page is",document[r]?"hidden":"visible"),s(e,document[r],t,o)},!1)}},u=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return i&&n},c=function(e){return e.defaultPrevented||"VIDEO"!=e.nodeName||!e.hasAttribute("data-hls-wrapper")}(t)?null:function(e){var t=e;return t.muted=t.hasAttribute("muted"),t.autoplay=t.hasAttribute("autoplay"),t.disableRemotePlayback=!0,t.onerror=function(e){i.error("Error "+t.error.code+"; details: "+t.error.message),t.getAttribute("data-poster")&&t.setAttribute("poster",t.getAttribute("data-poster"))},t}(t),d=c?function(e){var t=e.getAttribute("src"),n=e.getAttribute("data-src"),r=e.querySelector("source"),a=r&&r.getAttribute("data-src");return t=t||n||(r&&r.src?r.src:a||null),i.log("Found video source",t),t}(c):null;return function(e){if(!e)return i.error("No video source available"),!0}(d)?null:(n=function(){var e,t;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange",pageVisibilitySupported=!0),[e,t]}(),r=n[0],a=n[1],l(c,d,a,r),c.hasAttribute("data-hls-wrapper-no-observer")?i.log("IntersectionObserver is disabled on this video"):function(e,t){try{new IntersectionObserver(function(n){i.log("intersectionObserver",n[0].intersectionRatio,e),setTimeout(s,10,e,0==n[0].intersectionRatio,t)}).observe(e)}catch(e){i.error(e)}}(c,d),void(function(e){var t=e.querySelector("source");return!(t&&e.canPlayType(t.type)||e.canPlayType("application/vnd.apple.mpegURL")||!u())||(i.log("native playback is supported or HLS.js is not supported"),!1)}(c)&&(o=function(e,t){require(["polyfill!hls.min"],function(n){return window.Hls=window.Hls||n,(o=new window.Hls({capLevelToPlayerSize:!0,enableWebVTT:!1,enableCEA708Captions:!1,autoLevelCapping:2})).attachMedia(e),o.on(n.Events.MEDIA_ATTACHED,function(){o.loadSource(t),o.on(n.Events.MANIFEST_PARSED,function(){s(e,!e.hasAttribute("autoplay"),t)})}),o.on(n.Events.ERROR,function(e,t){if(t.fatal)switch(t.type){case n.ErrorTypes.NETWORK_ERROR:i.error("fatal network error encountered, try to recover",t),o.startLoad();break;case n.ErrorTypes.MEDIA_ERROR:i.error("fatal media error encountered, try to recover",t),o.recoverMediaError();break;default:i.error("cannot recover, destroy",t),o.destroy()}}),o})}(c,d))))}}),define("components/smart-banner",["version!fly/managers/debug"],function(e){function t(t,i){if(this.debug=e.init("smart-banner"),this.element=t,this.options=i,this.deviceName=null,this.isHidden=null,this.featureName=i.featureName||"smart-banner-"+i.cookieName,this.debug.log("init",this.featureName,"with options",i),CBSNEWS.features.isFeatureDisabled("smart-banner")||CBSNEWS.features.isFeatureDisabled(this.featureName))return this.debug.log("Diabled by feature flag"),void this.toggleVisibleClass(!0);if(!this.isTargetDevice())return this.debug.log("Not the target device"),void this.toggleVisibleClass(!0);var n=this.url(this.deviceName);(this.debug.log("set click url to ",n),i.bannerAnchorSelector)&&Array.prototype.slice.call(t.querySelectorAll(i.bannerAnchorSelector)).forEach(function(e){e.setAttribute("href",n),e.addEventListener("click",function(){this.triggerEvent("open",e)}.bind(this),!1)}.bind(this));i.bannerCloseSelector&&Array.prototype.slice.call(t.querySelectorAll(i.bannerCloseSelector)).forEach(function(e){e.addEventListener("click",function(){this.toggleHide(i.hideDays),this.triggerEvent("close",e)}.bind(this),!1)}.bind(this));setTimeout(function(){this.isHidden||"number"!=typeof i.retryDays?this.debug.log("timeout reached, but banner is hidden or retryDays is not set",i.retryDays):i.hideOnTimeout?(this.debug.log("hide on timeout"),this.toggleHide(i.retryDays)):(this.debug.log("hide on next page"),this.setCookie(i.retryDays))}.bind(this),3e4),this.isHidden="hidden"===CBSNEWS.features.getFeatureValue(this.featureName),this.debug.log("banner is ",this.isHidden?"hidden":"visible"),this.toggleVisibleClass()}return t.prototype.toggleHide=function(e){this.debug.log((this.isHidden?"show":"hide")+" component for "+e),this.isHidden=!this.isHidden,this.setCookie(e),this.toggleVisibleClass()},t.prototype.setCookie=function(e){this.debug.log("set cookie for "+e+" days"),CBSNEWS.features.setFeatureValue(this.featureName,this.isHidden?"hidden":"visible",{type:"cookie",maxAge:86400*parseFloat(e)})},t.prototype.isTargetDevice=function(){var e=navigator.userAgent.toLowerCase(),t=this.options.url,i=t&&"object"==typeof t&&Object.keys(t).join("|"),n=new RegExp("("+i+")"),r=e.match(n);return i?r?(this.debug.log("detected device as ",r[0]),this.deviceName=r[0],document.documentElement.classList.add("device-is--"+this.deviceName)):this.debug.log("device does not match the rule ",r):(this.debug.log("no devices provided, default to true",r),r=!0),!!r},t.prototype.toggleVisibleClass=function(e){e=e||this.isHidden,this.debug.log("toggle state to "+(e?"hidden":"visible")),this.toggleClass(e),this.triggerEvent(e?"hide":"show"),this.toggleAccessibilityLabels(e)},t.prototype.toggleClass=function(e){var t=document.documentElement.classList;this.element.getAttribute("id");e?(t.add(this.options.bannerHiddenClass),t.remove(this.options.bannerVisibleClass),this.debug.log("toogle hide",t)):(t.add(this.options.bannerVisibleClass),t.remove(this.options.bannerHiddenClass),this.debug.log("toogle add",t))},t.prototype.toggleAccessibilityLabels=function(e){e=e||this.isHidden,this.debug.log("toggle labels to "+(e?"hidden":"visible"));var t=this.element.querySelectorAll("[aria-controls]");for(i=0;i<t.length;i++)t[i].setAttribute("aria-expanded",!e),t[i].setAttribute("aria-label",e?"data-label-hidden":"data-label-visible")},t.prototype.url=function(e){var t=this.options.url;return this.debug.log("Guess URL, looking for",e,"in",t),"string"==typeof t?t:"object"==typeof t&&e in t?t[e]:""},t.prototype.triggerEvent=function(e,t){this.debug.log("Trigger event",e,"for element",t);var i=new CustomEvent(this.featureName+":"+e,{detail:t?t.dataset:null});window.dispatchEvent(i)},function(e,i){new t(e,i)}}),window.lazySizesConfig=window.lazySizesConfig||{},window.lazySizesConfig.init=!1,window.lazySizesConfig.loadMode=1,window.lazySizesConfig.preloadAfterLoad=!!parseInt(CBSNEWS.features.getFeatureValue("lazysizes.preloadAfterLoad"));var userAgent=navigator.userAgent.toLowerCase(),isSafari=/^((?!chrome).)*safari/.test(userAgent);define("libs/lazysizes.plugins",["libs/hls-video","components/smart-banner"],function(e,t){"use strict";addEventListener("lazybeforeunveil",function(i){var n;if(!i.defaultPrevented){if(i.target.getAttribute("data-component")){if("string"==typeof(r=i.target.getAttribute("data-component"))&&(r=[r]),r[0]&&r[0].match(/^\[/))var r=JSON.parse(r[0]);else r=r;r.forEach(function(e,n){if(!CBSNEWS.features.isFeatureDisabled("component-"+e)){var r=JSON.parse(i.target.getAttribute("data-"+e+"-options"))||{};if("smart-banner"==e)t(i.target,r);else try{require(["components/"+e],function(e){"function"==typeof e&&e(i.target,r)})}catch(e){debug.log("e",e)}}})}var a=["videoPreview"];if(n=i.target.getAttribute("data-preview-url"),"VIDEO"==i.target.nodeName&&n&&CBSNEWS.features.executeIfEnabled(a,function(t){i.target.setAttribute("src",t),e(i.target)},window,[n]),n=i.target.getAttribute("data-poster"),"VIDEO"==i.target.nodeName&&n&&CBSNEWS.features.executeIfDisabled(a,function(e){i.target.setAttribute("poster",n)},window,[n]),"IFRAME"==i.target.nodeName){var o=i.target,s=o.parentElement.querySelector(".embed__resizer"),l=(o.getAttribute("data-width")||"").replace("px",""),u=(o.getAttribute("data-height")||"").replace("px","");s&&s.hasAttribute("data-resized")||(s&&u>0&&l>0?s.setAttribute("style","padding-top:"+u/l*100+"%"):(l&&o.setAttribute("width",l),u&&o.setAttribute("height",u),s&&u&&s.setAttribute("style","padding-top:"+u+"px"))),/^\/embed\/video\//.test(o.getAttribute("src")||o.getAttribute("data-src"))&&!document.body.classList.contains("has__video-player")&&document.body.classList.add("has__video-player")}if(n=i.target.getAttribute("href"),"LINK"==i.target.nodeName&&n){var c=new XMLHttpRequest;c.open("GET",n,!0),c.send(),c.onload=function(){if(c.responseXML&&"image/svg+xml"===c.responseXML.contentType)document.head.insertAdjacentHTML("beforeend",c.responseText);else if("application/json"===c.getResponseHeader("Content-Type")){var e=JSON.parse(c.responseText);i.target.insertAdjacentHTML("afterend",e.html)}else i.target.insertAdjacentHTML("afterend",c.responseText)}}if((n=i.target.getAttribute("data-require"))&&window.require){var d=i.target.getAttribute("data-require-callback"),h=JSON.parse(i.target.getAttribute("data-require-arguments"));require([n],function(e,t){return function(){e&&"function"==typeof window[e]&&window[e].apply(window,t||arguments)}}(d,h))}if((n=i.target.getAttribute("data-lazy-taboola"))&&i.target.setAttribute("data-taboola",n),(n=i.target.getAttribute("data-taboola"))&&window.CBSNEWS.taboola&&window.CBSNEWS.taboola.push(i.target,!0),n=i.target.getAttribute("data-ad-unit")){var f=JSON.parse(n),v=document.querySelectorAll('[id="'+i.target.id+'"]').length;Array.isArray(f)&&v>1&&(f[1]+=document.querySelectorAll('[id^="'+f[0]+'"]').length-v+1,i.target.setAttribute("id",f.join("")),i.target.setAttribute("data-ad-unit",JSON.stringify(f)),console.log("ADS: incremental ad",f,"is clashing with another, updated id to",i.target.id)),console.log("ADS: queuing to lazyload",i.target.getAttribute("id")),window.cbsiGptDivIds=window.cbsiGptDivIds||[],cbsiGptDivIds.push(f)}}},!1)}),function(e){var t=function(e,t,i){"use strict";var n,r;if(function(){var t,i={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in r=e.lazySizesConfig||e.lazysizesConfig||{},i)t in r||(r[t]=i[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:r,noSupport:!0};var a=t.documentElement,o=e.HTMLPictureElement,s="addEventListener",l="getAttribute",u=e[s].bind(e),c=e.setTimeout,d=e.requestAnimationFrame||c,h=e.requestIdleCallback,f=/^picture$/i,v=["load","error","lazyincluded","_lazyloaded"],p={},g=Array.prototype.forEach,y=function(e,t){return p[t]||(p[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),p[t].test(e[l]("class")||"")&&p[t]},m=function(e,t){y(e,t)||e.setAttribute("class",(e[l]("class")||"").trim()+" "+t)},A=function(e,t){var i;(i=y(e,t))&&e.setAttribute("class",(e[l]("class")||"").replace(i," "))},k=function(e,t,i){var n=i?s:"removeEventListener";i&&k(e,t),v.forEach(function(i){e[n](i,t)})},b=function(e,i,r,a,o){var s=t.createEvent("Event");return r||(r={}),r.instance=n,s.initEvent(i,!a,!o),s.detail=r,e.dispatchEvent(s),s},E=function(t,i){var n;!o&&(n=e.picturefill||r.pf)?(i&&i.src&&!t[l]("srcset")&&t.setAttribute("srcset",i.src),n({reevaluate:!0,elements:[t]})):i&&i.src&&(t.src=i.src)},T=function(e,t){return(getComputedStyle(e,null)||{})[t]},S=function(e,t,i){for(i=i||e.offsetWidth;i<r.minSize&&t&&!e._lazysizesWidth;)i=t.offsetWidth,t=t.parentNode;return i},C=function(){var e,i,n=[],r=[],a=n,o=function(){var t=a;for(a=n.length?r:n,e=!0,i=!1;t.length;)t.shift()();e=!1},s=function(n,r){e&&!r?n.apply(this,arguments):(a.push(n),i||(i=!0,(t.hidden?c:d)(o)))};return s._lsFlush=o,s}(),x=function(e,t){return t?function(){C(e)}:function(){var t=this,i=arguments;C(function(){e.apply(t,i)})}},w=function(e){var t,n=0,a=r.throttleDelay,o=r.ricTimeout,s=function(){t=!1,n=i.now(),e()},l=h&&o>49?function(){h(s,{timeout:o}),o!==r.ricTimeout&&(o=r.ricTimeout)}:x(function(){c(s)},!0);return function(e){var r;(e=!0===e)&&(o=33),t||(t=!0,(r=a-(i.now()-n))<0&&(r=0),e||r<9?l():c(l,r))}},P=function(e){var t,n,r=function(){t=null,e()},a=function(){var e=i.now()-n;e<99?c(a,99-e):(h||r)(r)};return function(){n=i.now(),t||(t=c(a,99))}},_=function(){var o,h,v,p,S,_,L,N,M,R,O,D,B=/^img$/i,U=/^iframe$/i,F="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),V=0,H=0,$=-1,W=function(e){H--,(!e||H<0||!e.target)&&(H=0)},K=function(e){return null==D&&(D="hidden"==T(t.body,"visibility")),D||!("hidden"==T(e.parentNode,"visibility")&&"hidden"==T(e,"visibility"))},z=function(e,i){var n,r=e,o=K(e);for(N-=i,O+=i,M-=i,R+=i;o&&(r=r.offsetParent)&&r!=t.body&&r!=a;)(o=(T(r,"opacity")||1)>0)&&"visible"!=T(r,"overflow")&&(n=r.getBoundingClientRect(),o=R>n.left&&M<n.right&&O>n.top-1&&N<n.bottom+1);return o},j=function(){var e,i,s,u,c,d,f,v,g,y,m,A,k=n.elements;if((p=r.loadMode)&&H<8&&(e=k.length)){for(i=0,$++;i<e;i++)if(k[i]&&!k[i]._lazyRace)if(!F||n.prematureUnveil&&n.prematureUnveil(k[i]))Z(k[i]);else if((v=k[i][l]("data-expand"))&&(d=1*v)||(d=V),y||(y=!r.expand||r.expand<1?a.clientHeight>500&&a.clientWidth>500?500:370:r.expand,n._defEx=y,m=y*r.expFactor,A=r.hFac,D=null,V<m&&H<1&&$>2&&p>2&&!t.hidden?(V=m,$=0):V=p>1&&$>1&&H<6?y:0),g!==d&&(_=innerWidth+d*A,L=innerHeight+d,f=-1*d,g=d),s=k[i].getBoundingClientRect(),(O=s.bottom)>=f&&(N=s.top)<=L&&(R=s.right)>=f*A&&(M=s.left)<=_&&(O||R||M||N)&&(r.loadHidden||K(k[i]))&&(h&&H<3&&!v&&(p<3||$<4)||z(k[i],d))){if(Z(k[i]),c=!0,H>9)break}else!c&&h&&!u&&H<4&&$<4&&p>2&&(o[0]||r.preloadAfterLoad)&&(o[0]||!v&&(O||R||M||N||"auto"!=k[i][l](r.sizesAttr)))&&(u=o[0]||k[i]);u&&!c&&Z(u)}},G=w(j),q=function(e){var t=e.target;t._lazyCache?delete t._lazyCache:(W(e),m(t,r.loadedClass),A(t,r.loadingClass),k(t,Q),b(t,"lazyloaded"))},Y=x(q),Q=function(e){Y({target:e.target})},X=function(e){var t,i=e[l](r.srcsetAttr);(t=r.customMedia[e[l]("data-media")||e[l]("media")])&&e.setAttribute("media",t),i&&e.setAttribute("srcset",i)},J=x(function(e,t,i,n,a){var o,s,u,d,h,p;(h=b(e,"lazybeforeunveil",t)).defaultPrevented||(n&&(i?m(e,r.autosizesClass):e.setAttribute("sizes",n)),s=e[l](r.srcsetAttr),o=e[l](r.srcAttr),a&&(d=(u=e.parentNode)&&f.test(u.nodeName||"")),p=t.firesLoad||"src"in e&&(s||o||d),h={target:e},m(e,r.loadingClass),p&&(clearTimeout(v),v=c(W,2500),k(e,Q,!0)),d&&g.call(u.getElementsByTagName("source"),X),s?e.setAttribute("srcset",s):o&&!d&&(U.test(e.nodeName)?function(e,t){var i=e.getAttribute("data-load-mode")||r.iframeLoadMode;0==i?e.contentWindow.location.replace(t):1==i&&(e.src=t)}(e,o):e.src=o),a&&(s||d)&&E(e,{src:o})),e._lazyRace&&delete e._lazyRace,A(e,r.lazyClass),C(function(){var t=e.complete&&e.naturalWidth>1;p&&!t||(t&&m(e,r.fastLoadedClass),q(h),e._lazyCache=!0,c(function(){"_lazyCache"in e&&delete e._lazyCache},9)),"lazy"==e.loading&&H--},!0)}),Z=function(e){if(!e._lazyRace){var t,i=B.test(e.nodeName),n=i&&(e[l](r.sizesAttr)||e[l]("sizes")),a="auto"==n;(!a&&h||!i||!e[l]("src")&&!e.srcset||e.complete||y(e,r.errorClass)||!y(e,r.lazyClass))&&(t=b(e,"lazyunveilread").detail,a&&I.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,H++,J(e,t,a,n,i))}},ee=P(function(){r.loadMode=3,G()}),te=function(){3==r.loadMode&&(r.loadMode=2),ee()},ie=function(){h||(i.now()-S<999?c(ie,999):(h=!0,r.loadMode=3,G(),u("scroll",te,!0)))};return{_:function(){S=i.now(),n.elements=t.getElementsByClassName(r.lazyClass),o=t.getElementsByClassName(r.lazyClass+" "+r.preloadClass),u("scroll",G,!0),u("resize",G,!0),u("pageshow",function(e){if(e.persisted){var i=t.querySelectorAll("."+r.loadingClass);i.length&&i.forEach&&d(function(){i.forEach(function(e){e.complete&&Z(e)})})}}),e.MutationObserver?new MutationObserver(G).observe(a,{childList:!0,subtree:!0,attributes:!0}):(a[s]("DOMNodeInserted",G,!0),a[s]("DOMAttrModified",G,!0),setInterval(G,999)),u("hashchange",G,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){t[s](e,G,!0)}),/d$|^c/.test(t.readyState)?ie():(u("load",ie),t[s]("DOMContentLoaded",G),c(ie,2e4)),n.elements.length?(j(),C._lsFlush()):G()},checkElems:G,unveil:Z,_aLSL:te}}(),I=function(){var e,i=x(function(e,t,i,n){var r,a,o;if(e._lazysizesWidth=n,n+="px",e.setAttribute("sizes",n),f.test(t.nodeName||""))for(a=0,o=(r=t.getElementsByTagName("source")).length;a<o;a++)r[a].setAttribute("sizes",n);i.detail.dataAttr||E(e,i.detail)}),n=function(e,t,n){var r,a=e.parentNode;a&&(n=S(e,a,n),(r=b(e,"lazybeforesizes",{width:n,dataAttr:!!t})).defaultPrevented||(n=r.detail.width)&&n!==e._lazysizesWidth&&i(e,a,r,n))},a=P(function(){var t,i=e.length;if(i)for(t=0;t<i;t++)n(e[t])});return{_:function(){e=t.getElementsByClassName(r.autosizesClass),u("resize",a)},checkElems:a,updateElem:n}}(),L=function(){!L.i&&t.getElementsByClassName&&(L.i=!0,I._(),_._())};return c(function(){r.init&&L()}),n={cfg:r,autoSizer:I,loader:_,init:L,uP:E,aC:m,rC:A,hC:y,fire:b,gW:S,rAF:C}}(e,e.document,Date);"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("lazysizes/lazysizes-umd.min",t):e.lazySizes=t}(window),require(["libs/lazysizes.plugins","lazysizes/lazysizes-umd.min"],function(e,t){t.init()}),define("common/lazysizes",function(){}),function(){"use strict";var e={"hls.min":function(){return!!window.Hls||document.createElement("video").canPlayType("application/vnd.apple.mpegURL")},"window.CustomEvent":function(){return!(!window.CustomEvent||"object"==typeof window.CustomEvent)}};define("polyfill",{version:"1.0",load:function(t,i,n,r){if(!e)throw new Error("A polyfill config has not been setup");if(!e[t])throw new Error("A polyfill for "+t+" was not specified");r.isBuild||!0===e[t]()?n():i(["polyfills/"+t],function(e){n(e)})}})}();
/*! intercom.js | https://github.com/diy/intercom.js | Apache License (v2) */
var Intercom=function(){var e=function(){};e.createInterface=function(e){var t={on:function(t,i){void 0===this[e]&&(this[e]={}),this[e].hasOwnProperty(t)||(this[e][t]=[]),this[e][t].push(i)},off:function(t,i){void 0!==this[e]&&this[e].hasOwnProperty(t)&&a.removeItem(i,this[e][t])},trigger:function(t){if(void 0!==this[e]&&this[e].hasOwnProperty(t))for(var i=Array.prototype.slice.call(arguments,1),n=0;n<this[e][t].length;n++)this[e][t][n].apply(this[e][t][n],i)}};return t};var t=e.createInterface("_handlers");e.prototype._on=t.on,e.prototype._off=t.off,e.prototype._trigger=t.trigger;var i,n=e.createInterface("handlers");e.prototype.on=function(){n.on.apply(this,arguments),Array.prototype.unshift.call(arguments,"on"),this._trigger.apply(this,arguments)},e.prototype.off=n.off,e.prototype.trigger=n.trigger;try{i=window.localStorage}catch(e){}void 0===i&&(i={getItem:function(){},setItem:function(){},removeItem:function(){}});var r,a={};a.guid=(r=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()}),a.throttle=function(e,t){var i=0;return function(){var n=(new Date).getTime();n-i>e&&(i=n,t.apply(this,arguments))}},a.extend=function(e,t){if(void 0!==e&&e||(e={}),"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},a.removeItem=function(e,t){for(var i=t.length-1;i>=0;i--)t[i]===e&&t.splice(i,1);return t};var o=function(){var e=this,t=(new Date).getTime();this.origin=a.guid(),this.lastMessage=t,this.bindings=[],this.receivedIDs={},this.previousValues={};var i=function(){e._onStorageEvent.apply(e,arguments)};window.attachEvent?document.attachEvent("onstorage",i):window.addEventListener("storage",i,!1)};o.prototype._transaction=function(e){var t=this,n=!1,r=!1,a=null,o=function(){if(!n){var l=(new Date).getTime(),u=parseInt(i.getItem(c)||0);if(u&&l-u<1e3)return r||(t._on("storage",o),r=!0),void(a=window.setTimeout(o,20));n=!0,i.setItem(c,l),e(),s()}},s=function(){r&&t._off("storage",o),a&&window.clearTimeout(a),i.removeItem(c)};o()},o.prototype._cleanup_emit=a.throttle(100,function(){this._transaction(function(){for(var e=(new Date).getTime()-d,t=0,n=JSON.parse(i.getItem(l)||"[]"),r=n.length-1;r>=0;r--)n[r].timestamp<e&&(n.splice(r,1),t++);t>0&&i.setItem(l,JSON.stringify(n))})}),o.prototype._cleanup_once=a.throttle(100,function(){var e=this;this._transaction(function(){var t,n=JSON.parse(i.getItem(u)||"{}"),r=((new Date).getTime(),0);for(t in n)e._once_expired(t,n)&&(delete n[t],r++);r>0&&i.setItem(u,JSON.stringify(n))})}),o.prototype._once_expired=function(e,t){if(!t)return!0;if(!t.hasOwnProperty(e))return!0;if("object"!=typeof t[e])return!0;var i=t[e].ttl||h,n=(new Date).getTime();return t[e].timestamp<n-i},o.prototype._localStorageChanged=function(e,t){if(e&&e.key)return e.key===t;var n=i.getItem(t);return n!==this.previousValues[t]&&(this.previousValues[t]=n,!0)},o.prototype._onStorageEvent=function(e){e=e||window.event;var t=this;this._localStorageChanged(e,l)&&this._transaction(function(){for(var e=(new Date).getTime(),n=i.getItem(l),r=JSON.parse(n||"[]"),a=0;a<r.length;a++)if(r[a].origin!==t.origin&&!(r[a].timestamp<t.lastMessage)){if(r[a].id){if(t.receivedIDs.hasOwnProperty(r[a].id))continue;t.receivedIDs[r[a].id]=!0}t.trigger(r[a].name,r[a].payload)}t.lastMessage=e}),this._trigger("storage",e)},o.prototype._emit=function(e,t,n){if((n="string"==typeof n||"number"==typeof n?String(n):null)&&n.length){if(this.receivedIDs.hasOwnProperty(n))return;this.receivedIDs[n]=!0}var r={id:n,name:e,origin:this.origin,timestamp:(new Date).getTime(),payload:t},a=this;this._transaction(function(){var n=i.getItem(l)||"[]",o="[]"===n?"":",";n=[n.substring(0,n.length-1),o,JSON.stringify(r),"]"].join(""),i.setItem(l,n),a.trigger(e,t),window.setTimeout(function(){a._cleanup_emit()},50)})},o.prototype.bind=function(e,t){for(var i=0;i<o.bindings.length;i++){var n=o.bindings[i].factory(e,t||null,this);n&&this.bindings.push(n)}},o.prototype.emit=function(e,t){this._emit.apply(this,arguments),this._trigger("emit",e,t)},o.prototype.once=function(e,t,n){if(o.supported){var r=this;this._transaction(function(){var a=JSON.parse(i.getItem(u)||"{}");r._once_expired(e,a)&&(a[e]={},a[e].timestamp=(new Date).getTime(),"number"==typeof n&&(a[e].ttl=1e3*n),i.setItem(u,JSON.stringify(a)),t(),window.setTimeout(function(){r._cleanup_once()},50))})}},a.extend(o.prototype,e.prototype),o.bindings=[],o.supported=void 0!==i;var s,l="intercom",u="intercom_once",c="intercom_lock",d=5e4,h=36e5;o.destroy=function(){i.removeItem(c),i.removeItem(l),i.removeItem(u)},o.getInstance=(s=null,function(){return s||(s=new o),s});var f=function(e,t,i){if((t=a.extend({id:null,send:!0,receive:!0},t)).receive){var n=[],r=function(r,a){-1===n.indexOf(r)&&(n.push(r),e.on(r,function(e){var n="function"==typeof t.id?t.id(r,e):null,a="function"!=typeof t.receive||t.receive(r,e);(a||"boolean"!=typeof a)&&i._emit(r,e,n)}))};for(var o in i.handlers)for(var s=0;s<i.handlers[o].length;s++)r(o,i.handlers[o][s]);i._on("on",r)}t.send&&i._on("emit",function(i,n){var r="function"!=typeof t.send||t.send(i,n);(r||"boolean"!=typeof r)&&e.emit(i,n)})};return f.factory=function(e,t,i){return void 0!==e.socket&&new f(e,t,i)},o.bindings.push(f),o}();define("libs/intercom.min",function(){}),require(["polyfill!hls.min"],function(e){window.Hls=e}),require(["libs/intercom.min"]),define("video/common",function(){}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("video/main-embed",[],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(window,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=128)}([function(e,t,i){var n=i(41),r=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},function(e,t,i){
/* Riot v3.13.2, @license MIT */
!function(e){"use strict";function t(e,t){return(t||document).querySelector(e)}var i,n,r=[],a={},o=["ref","data-ref"],s="http://www.w3.org/2000/svg",l=/^xlink:(\w+)/,u="undefined"==typeof window?void 0:window,c=/^on/,d=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,h={viewbox:"viewBox",preserveaspectratio:"preserveAspectRatio"},f=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,v=0|(u&&u.document||{}).documentMode;function p(e){return"svg"===e?document.createElementNS(s,e):document.createElement(e)}function g(e,t,i){var n=l.exec(t);n&&n[1]?e.setAttributeNS("http://www.w3.org/1999/xlink",n[1],i):e.setAttribute(t,i)}var y,m,A={},k=!1;u&&(y=p("style"),m=t("style[type=riot]"),g(y,"type","text/css"),m?(m.id&&(y.id=m.id),m.parentNode.replaceChild(y,m)):document.head.appendChild(y),n=(i=y).styleSheet);var b={styleNode:i,add:function(e,t){A[t]=e,k=!0},inject:function(){if(u&&k){k=!1;var e=Object.keys(A).map(function(e){return A[e]}).join("\n");n?n.cssText=e:i.innerHTML=e}},remove:function(e){delete A[e],k=!0}},E=function(){var e=["case","default","do","else","in","instanceof","prefix","return","typeof","void","yield"],t=e.reduce(function(e,t){return e+t.slice(-1)},""),i=/^\/(?=[^*>\/])[^[\/\\]*(?:(?:\\.|\[(?:\\.|[^\]\\]*)*\])[^[\\\/]*)*?\/[gimuy]*/,n=/[$\w]/;function r(e,t){for(;--t>=0&&/\s/.test(e[t]););return t}return function(a,o){var s=/.*/g,l=s.lastIndex=o++,u=s.exec(a)[0].match(i);if(u){var c=l+u[0].length,d=a[l=r(a,l)];if(l<0||~"[{(,;:?=|&!^~>%*/".indexOf(d))return c;if("."===d)"."===a[l-1]&&(o=c);else if("+"===d||"-"===d)(a[--l]!==d||(l=r(a,l))<0||!n.test(a[l]))&&(o=c);else if(~t.indexOf(d)){for(var h=l+1;--l>=0&&n.test(a[l]););~e.indexOf(a.slice(l+1,h))&&(o=c)}}return o}}(),T=function(e){var t,i,n=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`/g,r=n.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?([^<]\/)[gim]*/.source,a=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),o=/(?=[[\]()*+?.^$|])/g,s=n.source+"|"+/(\/)(?![*\/])/.source,l={"(":RegExp("([()])|"+s,"g"),"[":RegExp("([[\\]])|"+s,"g"),"{":RegExp("([{}])|"+s,"g")},u=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+s,"g"),"{ }",/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],c=void 0,d=[];function h(e){return e}function f(e,t){return t||(t=d),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?"g":"")}function v(e){if("{ }"===e)return u;var t=e.split(" ");if(2!==t.length||a.test(e))throw new Error('Unsupported brackets "'+e+'"');return(t=t.concat(e.replace(o,"\\").split(" ")))[4]=f(t[1].length>1?/{[\S\s]*?}/:u[4],t),t[5]=f(e.length>3?/\\({|})/g:u[5],t),t[6]=f(u[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+s,"g"),t[8]=e,t}function p(e){return e instanceof RegExp?t(e):d[e]}function g(e){(e||(e="{ }"))!==d[8]&&(d=v(e),t="{ }"===e?h:f,d[9]=t(u[9])),c=e}return p.split=function(e,t,i){i||(i=d);var n,r,a,o,s,u,c=[],h=i[6],f=[],v="";for(r=a=h.lastIndex=0;n=h.exec(e);){if(u=h.lastIndex,o=n.index,r){if(n[2]){var p=n[2],g=l[p],y=1;for(g.lastIndex=u;n=g.exec(e);)if(n[1]){if(n[1]===p)++y;else if(!--y)break}else g.lastIndex=A(n.index,g.lastIndex,n[2]);h.lastIndex=y?e.length:g.lastIndex;continue}if(!n[3]){h.lastIndex=A(o,u,n[4]);continue}}n[1]||(m(e.slice(a,o)),a=h.lastIndex,(h=i[6+(r^=1)]).lastIndex=a)}return e&&a<e.length&&m(e.slice(a)),c.qblocks=f,c;function m(e){v&&(e=v+e,v=""),t||r?c.push(e&&e.replace(i[5],"$1")):c.push(e)}function A(i,n,r){return r&&(n=E(e,i)),t&&n>i+2&&(s="⁗"+f.length+"~",f.push(e.slice(i,n)),v+=e.slice(a,i)+s,a=n),n}},p.hasExpr=function(e){return d[4].test(e)},p.loopKeys=function(e){var t=e.match(d[9]);return t?{key:t[1],pos:t[2],val:d[0]+t[3].trim()+d[1]}:{val:e.trim()}},p.array=function(e){return e?v(e):d},Object.defineProperty(p,"settings",{set:function(e){var t;t=(e=e||{}).brackets,Object.defineProperty(e,"brackets",{set:g,get:function(){return c},enumerable:!0}),i=e,g(t)},get:function(){return i}}),p.settings="undefined"!=typeof riot&&riot.settings||{},p.set=g,p.skipRegex=E,p.R_STRINGS=n,p.R_MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,p.S_QBLOCKS=r,p.S_QBLOCK2=s,p}(),S=function(){var e={};function t(t,a){return t?(e[t]||(e[t]=function(e){var t=function(e){var t,i=T.split(e.replace(n,'"'),1),a=i.qblocks;if(i.length>2||i[0]){var o,l,u=[];for(o=l=0;o<i.length;++o)(t=i[o])&&(t=1&o?s(t,1,a):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(u[l++]=t);t=l<2?u[0]:"["+u.join(",")+'].join("")'}else t=s(i[1],0,a);return a.length&&(t=t.replace(r,function(e,t){return a[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),t}(e);return"try{return "!==t.slice(0,11)&&(t="return "+t),new Function("E",t+";")}(t))).call(a,i.bind({data:a,tmpl:t})):t}function i(e,i){e.riotData={tagName:i&&i.__&&i.__.tagName,_riot_id:i&&i._riot_id},t.errorHandler?t.errorHandler(e):"undefined"!=typeof console&&"function"==typeof console.error&&(console.error(e.message),console.log("<%s> %s",e.riotData.tagName||"Unknown tag",this.tmpl),console.log(this.data))}t.hasExpr=T.hasExpr,t.loopKeys=T.loopKeys,t.clearCache=function(){e={}},t.errorHandler=null;var n=/\u2057/g,r=/\u2057(\d+)~/g,a=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,o={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g};function s(e,t,i){if(e=e.replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var n,r=[],s=0;e&&(n=e.match(a))&&!n.index;){var l,u,c=/,|([[{(])|$/g;for(e=RegExp.rightContext,l=n[2]?i[n[2]].slice(1,-1).trim().replace(/\s+/g," "):n[1];u=(n=c.exec(e))[1];)h(u,c);u=e.slice(0,n.index),e=RegExp.rightContext,r[s++]=d(u,1,l)}e=s?s>1?"["+r.join(",")+'].join(" ").trim()':r[0]:d(e,t)}return e;function h(t,i){var n,r=1,a=o[t];for(a.lastIndex=i.lastIndex;n=a.exec(e);)if(n[0]===t)++r;else if(!--r)break;i.lastIndex=r?e.length:a.lastIndex}}var l='"in this?this:'+("object"!=typeof window?"global":"window")+").",u=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,c=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;function d(e,t,i){var n;return e=e.replace(u,function(e,t,i,r,a){return i&&(r=n?0:r+e.length,"this"!==i&&"global"!==i&&"window"!==i?(e=t+'("'+i+l+i,r&&(n="."===(a=a[r])||"("===a||"["===a)):r&&(n=!c.test(a.slice(r)))),e}),n&&(e="try{return "+e+"}catch(e){E(e,this)}"),i?e=(n?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+i+'":""':t&&(e="function(v){"+(n?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}return t.version=T.version="v3.0.8",t}(),C=function(e){e=e||{};var t={},i=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(i,n){return"function"==typeof n&&(t[i]=t[i]||[]).push(n),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(i,n){if("*"!=i||n)if(n)for(var r,a=t[i],o=0;r=a&&a[o];++o)r==n&&a.splice(o--,1);else delete t[i];else t={};return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,i){return e.on(t,function n(){e.off(t,n),i.apply(e,arguments)})},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(n){var r,a,o,s=arguments,l=arguments.length-1,u=new Array(l);for(o=0;o<l;o++)u[o]=s[o+1];for(r=i.call(t[n]||[],0),o=0;a=r[o];++o)a.apply(e,u);return t["*"]&&"*"!=n&&e.trigger.apply(e,["*",n].concat(u)),e},enumerable:!1,writable:!1,configurable:!1}}),e};function x(e,t){return Object.getOwnPropertyDescriptor(e,t)}function w(e){return void 0===e}function P(e,t){var i=x(e,t);return w(e[t])||i&&i.writable}function _(e){for(var t,i=1,n=arguments,r=n.length;i<r;i++)if(t=n[i])for(var a in t)P(e,a)&&(e[a]=t[a]);return e}function I(e){return Object.create(e)}var L=_(I(T.settings),{skipAnonymousTags:!0,keepValueAttributes:!1,autoUpdate:!0});function N(e,t){return[].slice.call((t||document).querySelectorAll(e))}function M(){return document.createTextNode("")}function R(e,t){e.style.display=t?"":"none",e.hidden=!t}function O(e,t){return e.getAttribute(t)}function D(e,t){e.removeAttribute(t)}function B(e,t,i){if(i){var n=e.ownerDocument.importNode((new DOMParser).parseFromString('<svg xmlns="'+s+'">'+t+"</svg>","application/xml").documentElement,!0);e.appendChild(n)}else e.innerHTML=t}function U(e,t){if(e)for(var i;i=d.exec(e);)t(i[1].toLowerCase(),i[2]||i[3]||i[4])}function F(){return document.createDocumentFragment()}function V(e,t,i){e.insertBefore(t,i.parentNode&&i)}function H(e){return Object.keys(e).reduce(function(t,i){return t+" "+i+": "+e[i]+";"},"")}function $(e,t,i){if(e){var n,r=t(e,i);if(!1===r)return;for(e=e.firstChild;e;)n=e.nextSibling,$(e,t,r),e=n}}var W=Object.freeze({$$:N,$:t,createDOMPlaceholder:M,mkEl:p,setAttr:g,toggleVisibility:R,getAttr:O,remAttr:D,setInnerHTML:B,walkAttrs:U,createFrag:F,safeInsert:V,styleObjectToString:H,walkNodes:$});function K(e){return w(e)||null===e}function z(e){return K(e)||""===e}function j(e){return"function"==typeof e}function G(e){return e&&"object"==typeof e}function q(e){var t=e.ownerSVGElement;return!!t||null===t}function Y(e){return Array.isArray(e)||e instanceof Array}function Q(e){return f.test(e)}function X(e){return"string"==typeof e}var J=Object.freeze({isBlank:z,isFunction:j,isObject:G,isSvg:q,isWritable:P,isArray:Y,isBoolAttr:Q,isNil:K,isString:X,isUndefined:w});function Z(e,t){return-1!==e.indexOf(t)}function ee(e,t){for(var i=e?e.length:0,n=0;n<i;n++)t(e[n],n);return e}function te(e,t){return e.slice(0,t.length)===t}var ie,ne=(ie=-1,function(){return++ie});function re(e,t,i,n){return Object.defineProperty(e,t,_({value:i,enumerable:!1,writable:!1,configurable:!0},n)),e}function ae(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function oe(e){console&&console.warn&&console.warn(e)}var se=Object.freeze({contains:Z,each:ee,getPropDescriptor:x,startsWith:te,uid:ne,defineProperty:re,objectCreate:I,extend:_,toCamel:ae,warn:oe});function le(e,t,i,n,r){var a=e[t],o=Y(a),s=!w(r);if(!a||a!==i)if(!a&&n)e[t]=[i];else if(a)if(o){var l=a.indexOf(i);if(l===r)return;-1!==l&&a.splice(l,1),s?a.splice(r,0,i):a.push(i)}else e[t]=[a,i];else e[t]=i}function ue(e){return e.tagName&&a[O(e,"data-is")||O(e,"data-is")||e.tagName.toLowerCase()]}function ce(e,t){var i=ue(e),n=!t&&O(e,"data-is");return n&&!S.hasExpr(n)?n:i?i.name:e.tagName.toLowerCase()}function de(){return this.parent?_(I(this),this.parent):this}var he=/<yield\b/i,fe=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,ve=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,pe=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,ge={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},ye=v&&v<10?/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;function me(e,i,n){var r=e&&e.match(/^\s*<([-\w]+)/),a=r&&r[1].toLowerCase(),o=p(n?"svg":"div");return e=function(e,t){if(!he.test(e))return e;var i={};return t=t&&t.replace(ve,function(e,t,n){return i[t]=i[t]||n,""}).trim(),e.replace(pe,function(e,t,n){return i[t]||n||""}).replace(fe,function(e,i){return t||i||""})}(e,i),ye.test(a)?o=function(e,i,n){var r="o"===n[0],a=r?"select>":"table>";if(e.innerHTML="<"+a+i.trim()+"</"+a,a=e.firstChild,r)a.selectedIndex=-1;else{var o=ge[n];o&&1===a.childElementCount&&(a=t(o,a))}return a}(o,e,a):B(o,e,n),o}var Ae=/^on/;function ke(e){for(var t=e;t.__.isAnonymous&&t.parent;)t=t.parent;return t}function be(e,t,i,n){var r,a=function(e,t,i){var n=this.__.parent,r=this.__.item;if(!r)for(;n&&!r;)r=n.__.item,n=n.__.parent;if(P(i,"currentTarget")&&(i.currentTarget=e),P(i,"target")&&(i.target=i.srcElement),P(i,"which")&&(i.which=i.charCode||i.keyCode),i.item=r,t.call(this,i),L.autoUpdate&&!i.preventUpdate){var a=ke(this);a.isMounted&&a.update()}}.bind(n,i,t);i[e]=null,r=e.replace(c,""),Z(n.__.listeners,i)||n.__.listeners.push(i),i["__riot-events__"]||(i["__riot-events__"]={}),i["__riot-events__"][e]&&i.removeEventListener(r,i["__riot-events__"][e]),i["__riot-events__"][e]=a,i.addEventListener(r,a,!1)}function Ee(e,t,i,n){var r=et(e,t,i),a=t.tagName||ce(t.root,!0),o=ke(n);return re(r,"parent",o),r.__.parent=n,le(o.tags,a,r),o!==n&&le(n.tags,a,r),r}function Te(e,t,i,n){if(Y(e[t])){var r=e[t].indexOf(i);-1!==r&&e[t].splice(r,1),e[t].length?1!==e[t].length||n||(e[t]=e[t][0]):delete e[t]}else e[t]===i&&delete e[t]}function Se(e,t){var i,n,r=M(),a=M(),o=F();for(this.root.insertBefore(r,this.root.firstChild),this.root.appendChild(a),this.__.head=n=r,this.__.tail=a;n;)i=n.nextSibling,o.appendChild(n),this.__.virts.push(n),n=i;t?e.insertBefore(o,t.__.head):e.appendChild(o)}function Ce(e,t){if(t.parentNode){var i=F();Se.call(e,i),t.parentNode.replaceChild(i,t)}}function xe(e){if(!this.root||!O(this.root,"virtualized")){var t,i=e.dom,n=function(e){return e?(e=e.replace("riot-",""),h[e]&&(e=h[e]),e):null}(e.attr),r=Z(["show","hide"],n),o=e.root&&"VIRTUAL"===e.root.tagName,s=this.__.isAnonymous,l=i&&(e.parent||i.parentNode),u=L.keepValueAttributes,c="style"===n,d="class"===n,f="value"===n;if(e._riot_id)e.__.wasCreated?e.update():(e.mount(),o&&Ce(e,e.root));else{if(e.update)return e.update();var p=r&&!s?de.call(this):this,y=!z(t=S(e.expr,p)),m=G(t);if(m&&(d?t=S(JSON.stringify(t),this):c&&(t=H(t))),!e.attr||e.wasParsedOnce&&!1!==t&&(y||f&&(!f||u))||D(i,O(i,e.attr)?e.attr:n),e.bool&&(t=!!t&&n),e.isRtag)return function(e,t,i){var n,r=e.tag||e.dom._tag,o=(r?r.__:{}).head,s="VIRTUAL"===e.dom.tagName;r&&e.tagName===i?r.update():(r&&(s&&(n=M(),o.parentNode.insertBefore(n,o)),r.unmount(!0)),X(i)&&(e.impl=a[i],e.impl&&(e.tag=r=Ee(e.impl,{root:e.dom,parent:t,tagName:i},e.dom.innerHTML,t),ee(e.attrs,function(e){return g(r.root,e.name,e.value)}),e.tagName=i,r.mount(),s&&Ce(r,n||r.root),t.__.onUnmount=function(){var e=r.opts.dataIs;Te(r.parent.tags,e,r),Te(r.__.parent.tags,e,r),r.unmount()})))}(e,this,t);if((!e.wasParsedOnce||e.value!==t)&&(e.value=t,e.wasParsedOnce=!0,!m||d||c||r)){if(y||(t=""),!n)return t+="",void(l&&(e.parent=l,"TEXTAREA"===l.tagName?(l.value=t,v||(i.nodeValue=t)):i.nodeValue=t));switch(!0){case j(t):A=n,Ae.test(A)&&be(n,t,i,this);break;case r:R(i,"hide"===n?!t:t);break;default:e.bool&&(i[n]=t),f&&i.value!==t?i.value=t:y&&!1!==t&&g(i,n,t),c&&i.hidden&&R(i,!1)}var A}}}}function we(e){ee(e,xe.bind(this))}function Pe(e,t,i,n,r){if(!e||!i){var a=e?de.call(this):t||this;ee(r,function(e){e.expr&&xe.call(a,e.expr),n[ae(e.name).replace("riot-","")]=e.expr?e.expr.value:e.value})}}function _e(e){if(!e){var t=Object.keys(a);return t+_e(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){return e+',[data-is="'+t.trim().toLowerCase()+'"]'},"")}function Ie(e,t){var i=this.name,n=this.tmpl,r=this.css,o=this.attrs,s=this.onCreate;return a[i]||(Le(i,n,r,o,s),a[i].class=this.constructor),tt(e,i,t,this),r&&b.inject(),this}function Le(e,t,i,n,r){return j(n)&&(r=n,/^[\w-]+\s?=/.test(i)?(n=i,i=""):n=""),i&&(j(i)?r=i:b.add(i,e)),e=e.toLowerCase(),a[e]={name:e,tmpl:t,attrs:n,fn:r},e}function Ne(e,t,i,n,r){return i&&b.add(i,e),a[e]={name:e,tmpl:t,attrs:n,fn:r},e}function Me(e,t,i){var n,r,a=[];if(b.inject(),(G(t)||j(t))&&(i=t,t=0),n=X(e)?(e="*"===e?r=_e():e+_e(e.split(/, */)))?N(e):[]:e,"*"===t){if(t=r||_e(),n.tagName)n=N(t,n);else{var o=[];ee(n,function(e){return o.push(N(t,e))}),n=o}t=0}return function e(n){if(n.tagName){var r,o=O(n,"data-is");t&&o!==t&&(o=t,g(n,"data-is",t)),(r=tt(n,o||n.tagName.toLowerCase(),j(i)?i():i))&&a.push(r)}else n.length&&ee(n,e)}(n),a}var Re={},Oe=Re.__global_mixin={},De=0;function Be(e,t,i){if(G(e))Be("__"+De+++"__",e,!0);else{var n=i?Oe:Re;if(!t){if(w(n[e]))throw new Error("Unregistered mixin: "+e);return n[e]}n[e]=j(t)?_(t.prototype,n[e]||{})&&t:_(n[e]||{},t)}}function Ue(){return ee(r,function(e){return e.update()})}function Fe(e){return b.remove(e),delete a[e]}var Ve=Object.freeze({Tag:Ie,tag:Le,tag2:Ne,mount:Me,mixin:Be,update:Ue,unregister:Fe,version:"v3.13.2"});function He(e,t){var i,n=this.parent;n&&(Y(i=n.tags[e])?i.splice(t,0,i.splice(i.indexOf(this),1)[0]):le(n.tags,e,this))}function $e(e,t){for(var i,n=this.__.head,r=F();n;)if(i=n.nextSibling,r.appendChild(n),(n=i)===this.__.tail){r.appendChild(n),e.insertBefore(r,t.__.head);break}}function We(e,t,i){var n={};return n[e.key]=t,e.pos&&(n[e.pos]=i),n}function Ke(e,t){e.splice(t,1),this.unmount(),Te(this.parent,this,this.__.tagName,!0)}function ze(e,t,i){var n="string"!=typeof O(e,"no-reorder")||D(e,"no-reorder"),r=O(e,"key"),o=!!r&&S.hasExpr(r),s=ce(e),l=a[s],u=e.parentNode,c=M(),d=ue(e),h=O(e,"if"),f=[],v=e.innerHTML,p=!a[s],g="VIRTUAL"===e.tagName,y=[];return D(e,"each"),D(e,"key"),(i=S.loopKeys(i)).isLoop=!0,h&&D(e,"if"),u.insertBefore(c,e),u.removeChild(e),i.update=function(){i.value=S(i.val,t);var a=i.value,u=F(),m=!Y(a)&&!X(a),A=c.parentNode,k=[],b=m&&!!a;if(A){m&&(a=a?Object.keys(a).map(function(e){return We(i,a[e],e)}):[]);var E=0;ee(a,function(c,T){var C=T-E,x=!b&&i.key?We(i,c,T):c;if(!h||S(h,_(I(t),x))){var w=function(e,t,i,n){return e?o?S(e,x):t[e]:t}(r,c),P=!m&&n&&"object"==typeof c||r,L=y.indexOf(w),N=-1===L,M=!N&&P?L:C,R=f[M],O=C>=y.length,D=P&&N||!P&&!R||!f[C];D?((R=et(l,{parent:t,isLoop:!0,isAnonymous:p,tagName:s,root:e.cloneNode(p),item:x,index:C},v)).mount(),O?function(e,t){t?Se.call(this,e):e.appendChild(this.root)}.apply(R,[u||A,g]):function(e,t,i){i?Se.apply(this,[e,t]):V(e,this.root,t.root)}.apply(R,[A,f[C],g]),O||y.splice(C,0,x),f.splice(C,0,R),d&&le(t.tags,s,R,!0)):M!==C&&P&&((r||Z(a,y[M]))&&(function(e,t,i){i?$e.apply(this,[e,t]):V(e,this.root,t.root)}.apply(R,[A,f[C],g]),f.splice(C,0,f.splice(M,1)[0]),y.splice(C,0,y.splice(M,1)[0])),i.pos&&(R[i.pos]=C),!d&&R.tags&&function(e){var t=this;ee(Object.keys(this.tags),function(i){He.apply(t.tags[i],[i,e])})}.call(R,C)),_(R.__,{item:x,index:C,parent:t}),k[C]=w,D||R.update(x)}else E++}),function(e,t,i){for(var n=t.length,r=e.length-i;n>r;)n--,Ke.apply(t[n],[t,n])}(a,f,E),y=k.slice(),A.insertBefore(u,c)}},i.unmount=function(){ee(f,function(e){e.unmount()})},i}var je={init:function(e,t,i,n){return this.dom=e,this.attr=i,this.rawValue=n,this.parent=t,this.hasExp=S.hasExpr(n),this},update:function(){var e=this.value,t=this.parent&&ke(this.parent),i=this.dom.__ref||this.tag||this.dom;this.value=this.hasExp?S(this.rawValue,this.parent):this.rawValue,!z(e)&&t&&Te(t.refs,e,i),!z(this.value)&&X(this.value)?(t&&le(t.refs,this.value,i,null,this.parent.__.index),this.value!==e&&g(this.dom,this.attr,this.value)):D(this.dom,this.attr),this.dom.__ref||(this.dom.__ref=i)},unmount:function(){var e=this.tag||this.dom,t=this.parent&&ke(this.parent);!z(this.value)&&t&&Te(t.refs,this.value,e)}};function Ge(e,t,i,n){return I(je).init(e,t,i,n)}function qe(e){ee(e,function(e){e.unmount?e.unmount(!0):e.tagName?e.tag.unmount(!0):e.unmount&&e.unmount()})}var Ye={init:function(e,t,i){D(e,"if"),_(this,{tag:t,expr:i,stub:M(),pristine:e});var n=e.parentNode;return n.insertBefore(this.stub,e),n.removeChild(e),this},update:function(){this.value=S(this.expr,this.tag),this.stub.parentNode&&(this.value&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=Xe.apply(this.tag,[this.current,!0])):!this.value&&this.current&&(this.unmount(),this.current=null,this.expressions=[]),this.value&&we.call(this.tag,this.expressions))},unmount:function(){this.current&&(this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current)),qe(this.expressions||[])}};function Qe(e,t,i){return I(Ye).init(e,t,i)}function Xe(e,t){var i=this,n=[];return $(e,function(r){var a,o,s=r.nodeType;if((t||r!==e)&&(3===s&&"STYLE"!==r.parentNode.tagName&&S.hasExpr(r.nodeValue)&&n.push({dom:r,expr:r.nodeValue}),1===s)){var l="VIRTUAL"===r.tagName;if(a=O(r,"each"))return l&&g(r,"loopVirtual",!0),n.push(ze(r,i,a)),!1;if(a=O(r,"if"))return n.push(Qe(r,i,a)),!1;if((a=O(r,"data-is"))&&S.hasExpr(a))return n.push({isRtag:!0,expr:a,dom:r,attrs:[].slice.call(r.attributes)}),!1;if(o=ue(r),l&&(O(r,"virtualized")&&r.parentElement.removeChild(r),o||O(r,"virtualized")||O(r,"loopVirtual")||(o={tmpl:r.outerHTML})),o&&(r!==e||t)){var u=O(r,"data-is");if(!l||u)return u&&l&&oe('Virtual tags shouldn\'t be used together with the "data-is" attribute - https://github.com/riot/riot/issues/2511'),n.push(Ee(o,{root:r,parent:i},r.innerHTML,i)),!1;g(r,"virtualized",!0);var c=et({tmpl:r.outerHTML},{root:r,parent:i},r.innerHTML);n.push(c)}Je.apply(i,[r,r.attributes,function(e,t){t&&n.push(t)}])}}),n}function Je(e,t,i){var n=this;ee(t,function(t){if(!t)return!1;var r,a=t.name,s=Q(a);Z(o,a)&&"yield"!==e.tagName.toLowerCase()?r=Ge(e,n,a,t.value):S.hasExpr(t.value)&&(r={dom:e,expr:t.value,attr:a,bool:s}),i(t,r)})}function Ze(e){var t=this.__,i=t.isAnonymous,n=t.skipAnonymous;re(this,"isMounted",e),i&&n||(e?this.trigger("mount"):(this.trigger("unmount"),this.off("*"),this.__.wasCreated=!1))}function et(e,t,i){void 0===e&&(e={}),void 0===t&&(t={});var n,a=t.context||{},o=t.opts||{},s=t.parent,l=t.isLoop,u=!!t.isAnonymous,c=L.skipAnonymousTags&&u,d=t.item,h=t.index,f=e.tmpl,v=[],p=t.root,y=t.tagName||ce(p),m="virtual"===y,A=!m&&!f;return A||l&&u?n=p:(m||(p.innerHTML=""),n=me(f,i,q(p))),c||C(a),e.name&&p._tag&&p._tag.unmount(!0),re(a,"__",{impl:e,root:p,skipAnonymous:c,implAttrs:[],isAnonymous:u,instAttrs:[],innerHTML:i,tagName:y,index:h,isLoop:l,isInline:A,item:d,parent:s,listeners:[],virts:[],wasCreated:!1,tail:null,head:null}),[["isMounted",!1],["_riot_id",ne()],["root",p],["opts",o,{writable:!0,enumerable:!0}],["parent",s||null],["tags",{}],["refs",{}],["update",function(e){return function(e,t,i){var n=e.__,r={},a=e.isMounted&&!n.skipAnonymous;return n.isAnonymous&&n.parent&&_(e,n.parent),_(e,t),Pe.apply(e,[n.isLoop,n.parent,n.isAnonymous,r,n.instAttrs]),a&&e.isMounted&&j(e.shouldUpdate)&&!e.shouldUpdate(t,r)||(_(e.opts,r),a&&e.trigger("update",t),we.call(e,i),a&&e.trigger("updated")),e}(a,e,v)}],["mixin",function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];return ee(t,function(t){var i,n,r=[],a=["init","__proto__"];t=X(t)?Be(t):t,i=j(t)?new t:t;var o=Object.getPrototypeOf(i);do{r=r.concat(Object.getOwnPropertyNames(n||i))}while(n=Object.getPrototypeOf(n||i));ee(r,function(t){if(!Z(a,t)){var n=x(i,t)||x(o,t),r=n&&(n.get||n.set);!e.hasOwnProperty(t)&&r?Object.defineProperty(e,t,n):e[t]=j(i[t])?i[t].bind(e):i[t]}}),i.init&&i.init.bind(e)(e.opts)}),e}.apply(void 0,[a].concat(e))}],["mount",function(){return function(e,t,i,n){var r=e.__,a=r.root;a._tag=e,Je.apply(r.parent,[a,a.attributes,function(t,i){!r.isAnonymous&&je.isPrototypeOf(i)&&(i.tag=e),t.expr=i,r.instAttrs.push(t)}]),U(r.impl.attrs,function(e,t){r.implAttrs.push({name:e,value:t})}),Je.apply(e,[a,r.implAttrs,function(e,t){t?i.push(t):g(a,e.name,e.value)}]),Pe.apply(e,[r.isLoop,r.parent,r.isAnonymous,n,r.instAttrs]);var o=Be("__global_mixin");if(o&&!r.skipAnonymous)for(var s in o)o.hasOwnProperty(s)&&e.mixin(o[s]);if(r.impl.fn&&r.impl.fn.call(e,n),r.skipAnonymous||e.trigger("before-mount"),ee(Xe.apply(e,[t,r.isAnonymous]),function(e){return i.push(e)}),e.update(r.item),!r.isAnonymous&&!r.isInline)for(;t.firstChild;)a.appendChild(t.firstChild);if(re(e,"root",a),!r.skipAnonymous&&e.parent){var l=ke(e.parent);l.one(l.isMounted?"updated":"mount",function(){Ze.call(e,!0)})}else Ze.call(e,!0);return e.__.wasCreated=!0,e}(a,n,v,o)}],["unmount",function(e){return function(e,t,i){var n=e.__,a=n.root,o=r.indexOf(e),s=a.parentNode;if(n.skipAnonymous||e.trigger("before-unmount"),U(n.impl.attrs,function(e){te(e,"riot-")&&(e=e.slice("riot-".length)),D(a,e)}),e.__.listeners.forEach(function(e){Object.keys(e["__riot-events__"]).forEach(function(t){e.removeEventListener(t,e["__riot-events__"][t])})}),-1!==o&&r.splice(o,1),n.parent&&!n.isAnonymous){var l=ke(n.parent);n.isVirtual?Object.keys(e.tags).forEach(function(t){return Te(l.tags,t,e.tags[t])}):Te(l.tags,n.tagName,e)}return e.__.virts&&ee(e.__.virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),qe(i),ee(n.instAttrs,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()}),t?B(a,""):s&&s.removeChild(a),n.onUnmount&&n.onUnmount(),e.isMounted||Ze.call(e,!0),Ze.call(e,!1),delete a._tag,e}(a,e,v)}]].reduce(function(e,t){var i=t[0],n=t[1],r=t[2];return re(a,i,n,r),e},_(a,d))}function tt(e,t,i,n){var o,s=a[t],l=a[t].class,u=n||(l?I(l.prototype):{}),c=e._innerHTML=e._innerHTML||e.innerHTML,d=_({root:e,opts:i,context:u},{parent:i?i.parent:null});return s&&e&&(o=et(s,d,c)),o&&o.mount&&(o.mount(!0),Z(r,o)||r.push(o)),o}var it=L,nt={tmpl:S,brackets:T,styleManager:b,vdom:r,styleNode:b.styleNode,dom:W,check:J,misc:se,tags:Object.freeze({arrayishAdd:le,getTagName:ce,inheritParentProps:de,mountTo:tt,selectTags:_e,arrayishRemove:Te,getTag:ue,initChildTag:Ee,moveChildTag:He,makeReplaceVirtual:Ce,getImmediateCustomParentTag:ke,makeVirtual:Se,moveVirtual:$e,unmountAll:qe,createIfDirective:Qe,createRefDirective:Ge})},rt=Ie,at=Le,ot=Ne,st=Me,lt=Be,ut=Ue,ct=Fe,dt=C,ht=_({},Ve,{observable:C,settings:it,util:nt});e.settings=it,e.util=nt,e.Tag=rt,e.tag=at,e.tag2=ot,e.mount=st,e.mixin=lt,e.update=ut,e.unregister=ct,e.version="v3.13.2",e.observable=dt,e.default=ht,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,i){var n,r;n=[t,i(1)],void 0===(r=function(e,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=(i=t)&&i.__esModule?i:{default:i},window.location.hash;var n=!!CBSNEWS.features.getFeatureValue("debug")||/development/.test(window.location.hash),r=new class{constructor(){this._broker={},t.default.observable(this._broker)}on(e,t){this._broker.on(e,t)}off(e,t){this._broker.off(e,t)}one(e,t){this._broker.one(e,t)}trigger(){var e=[].slice.call(arguments);n&&window.console&&console.log('triggered: "'+e[0]+'" with payload:\n',e[1]),setTimeout(()=>{try{this._broker.trigger.apply(this._broker,e)}catch(t){window.console&&console.error(e,t)}},0)}};e.default=r}.apply(t,n))||(e.exports=r)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){(function(t){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,i(37))},function(e,t,i){var n=i(3);e.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t,i){var n=i(22),r=i(39);e.exports=function(e){if("Function"===n(e))return r(e)}},function(e,t,i){var n=i(4),r=i(48),a=i(8),o=i(50),s=i(45),l=i(44),u=r("wks"),c=n.Symbol,d=c&&c.for,h=l?c:c&&c.withoutSetter||o;e.exports=function(e){if(!a(u,e)||!s&&"string"!=typeof u[e]){var t="Symbol."+e;s&&a(c,e)?u[e]=c[e]:u[e]=l&&d?d(t):h(t)}return u[e]}},function(e,t,i){var n=i(6),r=i(49),a=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(r(e),t)}},function(e,t,i){var n=i(5),r=i(51),a=i(53),o=i(11),s=i(24),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor;t.f=n?a?function(e,t,i){if(o(e),t=s(t),o(i),"function"==typeof e&&"prototype"===t&&"value"in i&&"writable"in i&&!i.writable){var n=c(e,t);n&&n.writable&&(e[t]=i.value,i={configurable:"configurable"in i?i.configurable:n.configurable,enumerable:"enumerable"in i?i.enumerable:n.enumerable,writable:!1})}return u(e,t,i)}:u:function(e,t,i){if(o(e),t=s(t),o(i),r)try{return u(e,t,i)}catch(e){}if("get"in i||"set"in i)throw l("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var n=i(0),r=i(41),a=r.all;e.exports=r.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===a}:function(e){return"object"==typeof e?null!==e:n(e)}},function(e,t,i){var n=i(10),r=String,a=TypeError;e.exports=function(e){if(n(e))return e;throw a(r(e)+" is not an object")}},function(e,t,i){var n=i(21),r=Function.prototype.call;e.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var n=i(80),r=i(40);e.exports=function(e){return n(r(e))}},function(e,t){e.exports=!1},function(e,t,i){var n=i(0),r=i(9),a=i(85),o=i(27);e.exports=function(e,t,i,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:t;if(n(i)&&a(i,u,s),s.global)l?e[t]=i:o(t,i);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=i:r.f(e,t,{value:i,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},function(e,t,i){var n=i(4),r=i(0);e.exports=function(e,t){return arguments.length<2?function(e){return r(e)?e:void 0}(n[e]):n[e]&&n[e][t]}},function(e,t,i){var n,r=i(11),a=i(95),o=i(32),s=i(31),l=i(97),u=i(52),c=i(30)("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},f=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;v="undefined"!=typeof document?document.domain&&n?f(n):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):f(n);for(var i=o.length;i--;)delete v.prototype[o[i]];return v()};s[c]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(d.prototype=r(e),i=new d,d.prototype=null,i[c]=e):i=v(),void 0===t?i:a.f(i,t)}},function(e,t){e.exports={}},function(e,t,i){var n=i(4),r=i(38).f,a=i(28),o=i(16),s=i(27),l=i(88),u=i(94);e.exports=function(e,t){var i,c,d,h,f,v=e.target,p=e.global,g=e.stat;if(i=p?n:g?n[v]||s(v,{}):(n[v]||{}).prototype)for(c in t){if(h=t[c],d=e.dontCallGetSet?(f=r(i,c))&&f.value:i[c],!u(p?c:v+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&a(h,"sham",!0),o(i,c,h,e)}}},function(e,t,i){var n=i(3);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},function(e,t,i){var n=i(39),r=n({}.toString),a=n("".slice);e.exports=function(e){return a(r(e),8,-1)}},function(e,t){e.exports=function(e){return null==e}},function(e,t,i){var n=i(81),r=i(42);e.exports=function(e){var t=n(e,"string");return r(t)?t:t+""}},function(e,t,i){var n=i(0),r=i(47),a=TypeError;e.exports=function(e){if(n(e))return e;throw a(r(e)+" is not a function")}},function(e,t,i){var n=i(4),r=i(27),a=n["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=a},function(e,t,i){var n=i(4),r=Object.defineProperty;e.exports=function(e,t){try{r(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},function(e,t,i){var n=i(5),r=i(9),a=i(13);e.exports=n?function(e,t,i){return r.f(e,t,a(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n,r,a,o=i(87),s=i(4),l=i(10),u=i(28),c=i(8),d=i(26),h=i(30),f=i(31),v=s.TypeError,p=s.WeakMap;if(o||d.state){var g=d.state||(d.state=new p);g.get=g.get,g.has=g.has,g.set=g.set,n=function(e,t){if(g.has(e))throw v("Object already initialized");return t.facade=e,g.set(e,t),t},r=function(e){return g.get(e)||{}},a=function(e){return g.has(e)}}else{var y=h("state");f[y]=!0,n=function(e,t){if(c(e,y))throw v("Object already initialized");return t.facade=e,u(e,y,t),t},r=function(e){return c(e,y)?e[y]:{}},a=function(e){return c(e,y)}}e.exports={set:n,get:r,has:a,enforce:function(e){return a(e)?r(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!l(t)||(i=r(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return i}}}},function(e,t,i){var n=i(48),r=i(50),a=n("keys");e.exports=function(e){return a[e]||(a[e]=r(e))}},function(e,t){e.exports={}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,i){var n=i(9).f,r=i(8),a=i(7)("toStringTag");e.exports=function(e,t,i){e&&!i&&(e=e.prototype),e&&!r(e,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,i){var n=i(109),r=i(0),a=i(22),o=i(7)("toStringTag"),s=Object,l="Arguments"==a(function(){return arguments}());e.exports=n?a:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=s(e),o))?i:l?a(t):"Object"==(n=a(t))&&r(t.callee)?"Arguments":n}},function(e,t,i){var n,r;n=[t,i(2)],void 0===(r=function(e,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.BaseFeedAdapter=void 0,t=(i=t)&&i.__esModule?i:{default:i};class n{constructor(e){if(this.constructor===n)throw new TypeError('Abstract class "BaseFeedAdapter" cannot be instantiated directly.');this.event=e.event,this.lastUpdated=null,this.pendingFeeds={},this.isLocked=!0}getNewFeed(e){e?e in this.pendingFeeds?t.default.trigger("feed:debounce",{feedUrl:e}):(this.pendingFeeds[e]=1,this.isLocked||this.fetch(e)):t.default.trigger("feed:error",{feedUrl:e,error:"attempted to call a blank feed"})}fetch(e){fetch(e,{credentials:"same-origin"}).then(i=>{if(i.ok)return i;t.default.trigger("feed:error",{feedUrl:e,error:"response is not ok",response:i})}).then(e=>this.unifyFormat(e)).then(e=>this.dispatchFeed(e)).then(t=>delete this.pendingFeeds[e]).catch(e=>window.console&&console.error("err: ",e))}unifyFormat(e){return e.json()}dispatchFeed(e){return t.default.trigger(this.event,{feed:e}),e}registerCallbacks(){t.default.on("player:player:initialUrlLoad",e=>{for(var t in this.isLocked=!1,this.pendingFeeds)this.fetch(t)})}}e.BaseFeedAdapter=n}.apply(t,n))||(e.exports=r)},function(e,t,i){var n;void 0===(n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCookie=function(e){var t,i,n,r=document.cookie.split(";");for(t=0;t<r.length;t++)if(i=(i=r[t].substr(0,r[t].indexOf("="))).replace(/^\s+|\s+$/g,""),n=r[t].substr(r[t].indexOf("=")+1),i==e)return unescape(n);return null}}.apply(t,[t]))||(e.exports=n)},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){var n=i(5),r=i(12),a=i(79),o=i(13),s=i(14),l=i(24),u=i(8),c=i(51),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=s(e),t=l(t),c)try{return d(e,t)}catch(e){}if(u(e,t))return o(!r(a.f,e,t),e[t])}},function(e,t,i){var n=i(21),r=Function.prototype,a=r.call,o=n&&r.bind.bind(a,a);e.exports=function(e){return n?o(e):function(){return a.apply(e,arguments)}}},function(e,t,i){var n=i(23),r=TypeError;e.exports=function(e){if(n(e))throw r("Can't call method on "+e);return e}},function(e,t){var i="object"==typeof document&&document.all,n=void 0===i&&void 0!==i;e.exports={all:i,IS_HTMLDDA:n}},function(e,t,i){var n=i(17),r=i(0),a=i(43),o=i(44),s=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return r(t)&&a(t.prototype,s(e))}},function(e,t,i){var n=i(6);e.exports=n({}.isPrototypeOf)},function(e,t,i){var n=i(45);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,i){var n=i(82),r=i(3);e.exports=!!Object.getOwnPropertySymbols&&!r(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},function(e,t,i){var n=i(25),r=i(23);e.exports=function(e,t){var i=e[t];return r(i)?void 0:n(i)}},function(e,t){var i=String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},function(e,t,i){var n=i(15),r=i(26);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,t,i){var n=i(40),r=Object;e.exports=function(e){return r(n(e))}},function(e,t,i){var n=i(6),r=0,a=Math.random(),o=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++r+a,36)}},function(e,t,i){var n=i(5),r=i(3),a=i(52);e.exports=!n&&!r(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){var n=i(4),r=i(10),a=n.document,o=r(a)&&r(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,i){var n=i(5),r=i(3);e.exports=n&&r(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},function(e,t,i){var n=i(5),r=i(8),a=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,s=r(a,"name"),l=s&&"something"===function(){}.name,u=s&&(!n||n&&o(a,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},function(e,t,i){var n=i(6),r=i(8),a=i(14),o=i(56).indexOf,s=i(31),l=n([].push);e.exports=function(e,t){var i,n=a(e),u=0,c=[];for(i in n)!r(s,i)&&r(n,i)&&l(c,i);for(;t.length>u;)r(n,i=t[u++])&&(~o(c,i)||l(c,i));return c}},function(e,t,i){var n=i(14),r=i(57),a=i(59),o=function(e){return function(t,i,o){var s,l=n(t),u=a(l),c=r(o,u);if(e&&i!=i){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,t,i){var n=i(58),r=Math.max,a=Math.min;e.exports=function(e,t){var i=n(e);return i<0?r(i+t,0):a(i,t)}},function(e,t,i){var n=i(91);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},function(e,t,i){var n=i(92);e.exports=function(e){return n(e.length)}},function(e,t,i){var n=i(7),r=i(18),a=i(9).f,o=n("unscopables"),s=Array.prototype;null==s[o]&&a(s,o,{configurable:!0,value:r(null)}),e.exports=function(e){s[o][e]=!0}},function(e,t,i){"use strict";var n=i(62).IteratorPrototype,r=i(18),a=i(13),o=i(33),s=i(19),l=function(){return this};e.exports=function(e,t,i,u){var c=t+" Iterator";return e.prototype=r(n,{next:a(+!u,i)}),o(e,c,!1,!0),s[c]=l,e}},function(e,t,i){"use strict";var n,r,a,o=i(3),s=i(0),l=i(10),u=i(18),c=i(63),d=i(16),h=i(7),f=i(15),v=h("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(r=c(c(a)))!==Object.prototype&&(n=r):p=!0),!l(n)||o(function(){var e={};return n[v].call(e)!==e})?n={}:f&&(n=u(n)),s(n[v])||d(n,v,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},function(e,t,i){var n=i(8),r=i(0),a=i(49),o=i(30),s=i(101),l=o("IE_PROTO"),u=Object,c=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=a(e);if(n(t,l))return t[l];var i=t.constructor;return r(i)&&t instanceof i?i.prototype:t instanceof u?c:null}},function(e,t,i){var n=i(34),r=i(46),a=i(23),o=i(19),s=i(7)("iterator");e.exports=function(e){if(!a(e))return r(e,s)||r(e,"@@iterator")||o[n(e)]}},function(e,t,i){"use strict";var n=i(20),r=i(56).includes,a=i(3),o=i(60);n({target:"Array",proto:!0,forced:a(function(){return!Array(1).includes()})},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,t,i){i(98)},function(e,t,i){var n,r;n=[t,i(2),i(35)],void 0===(r=function(e,t,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.VideoFeedAdapter=void 0,t=(n=t)&&n.__esModule?n:{default:n};e.VideoFeedAdapter=class extends i.BaseFeedAdapter{constructor(){super({event:"feed:ingested:playlist"}),this.registerCallbacks()}dispatchFeed(e){return t.default.trigger(this.event,{feed:e,path:this.path}),e}registerCallbacks(){super.registerCallbacks();var e=!(-1==document.cookie.indexOf("fly_user")),i=CBSNEWS.edition.key;CBSNEWS.user.isUserSubscribed&&(e="2"),t.default.on("feed:request:playlist",t=>{t.slug&&t.slug.indexOf("fusion")>-1||!t.type||!t.api||this.getNewFeed(t.api+"?is_logged_in="+ +e+"&edition="+i)}),t.default.on("feed:request:video",t=>{if("vod"===t.type&&(t.id||t.slug)){var n="0";t.imposter&&(n="1");var r="";t.strategy&&(r="&strategy="+t.strategy);var a="";t.startPosition&&(a="&startPosition="+t.startPosition);var o=t.type;this.getNewFeed("/video/xhr/video/"+o+"/"+(t.id||t.slug)+"/?is_logged_in="+ +e+"&is_imposter="+n+r+a+"&edition="+i)}}),t.default.on("feed:request:path",t=>{if(t.path){var i="0";t.imposter&&(i="1");var n="";t.strategy&&(n="&strategy="+t.strategy);var r="";t.startPosition&&(r="&startPosition="+t.startPosition),t.type,this.path=t.path,this.getNewFeed("/video/xhr/path"+t.path+"?is_logged_in="+ +e+"&is_imposter="+i+n+r)}})}getNewFeed(e){"amp"===CBSNEWS.device&&(e=e.replace("/video/xhr","/amp/video/xhr")),super.getNewFeed(e)}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[t,i(2),i(69)],void 0===(r=function(e,t,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.VideoStore=void 0,t=(n=t)&&n.__esModule?n:{default:n};var r={},a={},o=1e3,s={};function l(e){var i="video:data:changed",n={_playlist_id:e.__id,playlist:e};t.default.trigger(i,n),e.id&&t.default.trigger("".concat(i,":").concat(e.id),n),e.slug&&t.default.trigger("".concat(i,":").concat(e.slug),n)}function u(e,t){return e.type+"/"+e[t]}function c(e){var t,n=u(e,"id"),h=u(e,"slug");n in a?t=a[n]:h in a?t=a[h]:(t=++o,r[t]={__id:t,__lastUpdated:null,id:null,items:[],itemIndexById:{},meta:{dateUpdated:null,hash:null}});var f=[],v=e.meta.strategy;switch(v.method){case"replace":f=function(e,t,i){var n=r[e].items;return Array.prototype.splice.apply(n,[i.startPosition,i.deleteCount||n.length].concat(t.items)),n}(t,e,v);break;case"inject":f=function(e,t,i){var n=r[e].items;return Array.prototype.splice.apply(n,[i.startPosition,0].concat(t.items)),n}(t,e,v);break;case"append":default:f=function(e,t,i){var n=r[e].items;for(var a of t.items)a.id&&a.id in r[e].itemIndexById||n.push(a);return n}(t,e)}for(var p in e)e[p]&&(r[t][p]=e[p]);r[t].id&&(a[u(r[t],"id")]=t),r[t].slug&&(a[u(r[t],"slug")]=t);for(var g=0,y={},m=0;m<f.length;m++){var A=f[m];"live"!==A.type||s[A.mpxRefId]||(s[A.mpxRefId]=new i.FusionFeedAdapter(A)),"vod"!==A.type&&"dvr"!==A.type&&"live"!==A.type||(A.playlist=r[t]),"playlist"!==A.type&&"listing"!==A.type&&"channel"!==A.type||(c(A),f[m]=d(A.id,A.slug,A.type)||A),A.id&&(y[A.id]=m),A.imposter?g--:g++}r[t].emptyPlaylist=!1,g<1&&(r[t].emptyPlaylist=!0),r[t].items=f,r[t].itemIndexById=y,r[t].__lastUpdated=Date.now(),(g>1||"component"===e.type)&&l(r[t])}function d(e,t,i){var n;if(e?n=a[i+"/"+e]:t&&i&&(n=a[i+"/"+t]),n&&r[n])return r[n]}e.VideoStore=class{constructor(){this.registerCallbacks()}getVideoInPlaylist(e,t){var i=this.getPlaylistByIdOrSlug(t);for(var n in i.items){var r=i.items[n];if(r.id==e)return r}return null}registerCallbacks(){t.default.on("feed:ingested:playlist",e=>c(e.feed)),t.default.on("feed:ingested:video",e=>(function(e){if(e.playlist){var t=d(e.playlist.id,e.playlist.slug,e.playlist.type)||e.playlist;t.items.shift(e),c(t)}})(e.feed)),t.default.on("register:component",e=>{var i=d(e.id,e.slug,e.type);i&&l(i),i&&i.meta.itemCount===i.meta.totalCount||t.default.trigger("feed:request:playlist",e)})}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[t,i(2),i(35),i(36)],void 0===(r=function(e,t,i,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.FusionFeedAdapter=void 0,t=(r=t)&&r.__esModule?r:{default:r};e.FusionFeedAdapter=class extends i.BaseFeedAdapter{constructor(e){super({event:"feed:ingested:playlist"}),e.fusionRundown&&(this.liveItem={canonicalTitle:e.canonicalTitle,fulltitle:e.fulltitle,title:e.title,url:e.url,originEdition:e.originEdition},this.fusionRundown=e.fusionRundown,this.playlist={items:[]},this.liveSource=e.video,this.liveSourceNoAds=e.video2,this.liveSlug=e.slug.replace(/^live-/,""),this.daiAssetId=e.daiAssetId,this.fw=e.ad.fw,this.topic=e.topic,this.tracking=e.tracking,this.isLocked=!1,this.isFreewheelEnabled=CBSNEWS.features.isFeatureEnabled("freewheel"),this.registerCallbacks())}unifyFormat(e){return super.unifyFormat(e).then(e=>this.convertFeed(e))}convertFeed(e){for(var t=Object.values(e.navigation.rundown.counts).reduce((e,t)=>e+t),i={id:"fusion-"+this.liveSlug,slug:this.liveSlug,type:"channel",title:this.liveItem.fulltitle,items:[],url:this.liveItem.url,meta:{fusionRundown:this.fusionRundown,dateUpdated:e.navigation.dateUpdated.date,limit:null,itemCount:t,totalCount:t,loadMore:!1,custom:null,image:null,strategy:{method:"replace",startPosition:0,deleteCount:this.playlist.items.length}}},n=0;n<t;n++){var r=e.navigation.data[n];if(r){if("dvr"==r.type||"live"==r.type){var a;if(a=this.isFreewheelEnabled?{fw:"live"===r.type?{dai_with_fw:this.fw.dai_with_fw,params:this.fw.params}:{fw_link:this.fw.dvr_fw_link}}:{},"CBSN-NY"==r.edition)var o="New York";else"CBSN-PHI"==r.edition?o="Philly":"CBSN-LA"==r.edition?o="Los Angeles":"CBSN-DAL"==r.edition?o="DFW":"CBSN-SAC"==r.edition?o="Sacramento":"CBSN-MIA"==r.edition?o="Miami":"CBSN-MIN"==r.edition?o="Minnesota":"CBSN-SF"==r.edition?o="Bay Area":"CBSN-CHI"==r.edition?o="Chicago":"CBSN-BAL"==r.edition?o="Baltimore":"CBSN-PIT"==r.edition?o="Pittsburgh":"CBSN-DEN"==r.edition?o="Colorado":"CBSN-BOS"==r.edition?o="Boston":"CBSN-DET"==r.edition&&(o="Detroit");if("mixible"==r.channelSlug||"live-cbs-sports-hq"==r.channelSlug)var s=this.liveItem.canonicalTitle;else s=o?"CBS News "+o+": Local News, Weather & More":"CBS News latest headlines";i.items.push({id:r.id,mpxRefId:r.mpxRefId,originEdition:this.liveItem.originEdition,slug:r.dvr_slug,title:"live"===r.type?s:r.headlineshort,fulltitle:r.headline,canonicalTitle:"live"===r.type?this.liveItem.canonicalTitle+" Live Video":r.headlineshort,label:r.slug_label,type:r.type,duration:"live"===r.type?-1:r.duration,timestamp:r.startDate,durationLabel:r.segmentDur,url:window.location.origin+r.path,images:{sd:r.images.thumbnail_url_hd,hd:r.images.thumbnail_url_hd},video:"live"===r.type?this.liveSource:r.videoUrl.base,video2:"live"===r.type?this.liveSourceNoAds:r.videoUrl.base,daiAssetId:"live"===r.type?this.daiAssetId:null,playlist:i,previewUrl:"live"===r.type?this.liveSourceNoAds:null,topic:this.topic,suppress:"adsEnabled"in r?!r.adsEnabled:null,allAccessBlock:!1,isUserSubscribed:null,sponsor:r.sponsor,fusionRundown:this.fusionRundown,tracking:this.tracking,ad:a,geo:{countries:[],blacklist:!1}})}"live"==r.type&&(i.mpxRefId=r.mpxRefId,i.video=this.liveSource,i.video2=this.liveSourceNoAds,i.hasVideo=!0)}}return i}dispatchFeed(e){var i=this.playlist.items.find(e=>"live"===e.type),n=e.items.find(e=>"live"===e.type);return i&&n&&i.id===n.id&&this.playlist.items.length===e.items.length||(super.dispatchFeed(e),n&&(t.default.trigger("video:video:changed",{video:n}),t.default.trigger("video:video:changed:type-live",{video:n}),t.default.trigger("video:video:changed:type-live:"+n.playlist.id,{video:n}))),e}registerCallbacks(){super.registerCallbacks(),t.default.on("video:data:changed:fusion-"+this.liveSlug,e=>this.playlist=e.playlist),this.getNewFeed(this.fusionRundown),setInterval(this.getNewFeed.bind(this,this.fusionRundown),6e4)}}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[t,i(2),i(1),i(71),i(72),i(73),i(74),i(76),i(77)],void 0===(r=function(e,t,i,n,r,a,o,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.beforeInitialTagMount=function(){var e={initialUrlLoad:!0},i=CBSNEWS.defaultPayload,n=!(!i.meta||!i.meta.view);function r(){document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--overlay-closed");var e=new CustomEvent("video-embed-event",{detail:{type:"CLOSE",videoShelfType:n&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(e)}catch(e){}}t.default.on("player:player:ready",i=>{if(t.default.trigger("player:player:initialUrlLoad",{initialUrlLoad:e.initialUrlLoad,shouldAutoplay:CBSNEWS.shouldAutoplay}),e.initialUrlLoad){e.initialUrlLoad=!1;var n=CBSNEWS.defaultPayload.items[0],r={video:n,type:n.playlist.type,playlist:n.playlist,initialUrlLoad:!0};t.default.trigger("url:load",r)}}),t.default.on("player:video:state",e=>{if("PLAYING"===e.playbackState){document.body.classList.add("vp--overlay-hidden"),document.body.classList.add("vp--is-playing"),document.body.classList.remove("vp--is-not-playing"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-paused"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing");var t=new CustomEvent("video-embed-event",{detail:{type:"PLAYING",videoShelfType:n&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(t)}catch(e){}}else document.body.classList.remove("vp--is-playing"),document.body.classList.add("vp--is-not-playing");if("LOADING"===e.playbackState){document.body.classList.add("vp--overlay-hidden"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-paused"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing");var i=new CustomEvent("video-embed-event",{detail:{type:"OPEN",videoShelfType:n&&CBSNEWS.defaultPayload.meta.view}});try{window.parent.dispatchEvent(i)}catch(e){}}"PAUSED"===e.playbackState&&(document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--is-paused"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-playing"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-paused")),"STOPPED"===e.playbackState&&(document.body.classList.remove("vp--overlay-hidden"),document.body.classList.add("vp--is-not-playing"),document.body.classList.remove("vp--is-playing"),r())}),t.default.on("player:video:block",e=>{(e.allAccessBlock||e.embedBlock||e.geoBlock)&&document.body.classList.add("vp--overlay-hidden")}),t.default.on("player:player:closed",r),t.default.on("url:click",()=>{document.body.classList.add("vp--overlay-hidden"),document.body.classList.remove("vp--is-paused"),document.body.classList.remove("vp--overlay-closed"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.add("embed--is-playing"),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.classList.remove("embed--is-paused")}),t.default.on("url:change",e=>t.default.trigger("url:load",e)),window.location.pathname,t.default.on("url:load",e=>{var t=e.video.slug;document.body.setAttribute("data-slug",t)}),CBSNEWS.defaultPayload&&t.default.trigger("feed:ingested:playlist",{feed:CBSNEWS.defaultPayload,isDefaultPayload:!0}),CBSNEWS.defaultLayout&&t.default.trigger("feed:ingested:layout",{feed:CBSNEWS.defaultLayout})},t=u(t),i=u(i),window.riot=i.default,window.istablet=window.matchMedia("(min-width: 36em)").matches&&window.istouch;try{document.createEvent("TouchEvent"),window.istouch=!0,document.body.classList.add("touch")}catch(e){window.istouch=!1,document.body.classList.add("no-touch")}CBSNEWS.dispatch=t.default}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(2)],void 0===(r=function(e){"use strict";var t;function i(e){this._player=e}e=(t=e)&&t.__esModule?t:{default:t},i._viewStartTime=Date.now(),i._contentTypes={AD:"ad",CONTENT:"ct"},i._adPositions={PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"},i._videoStates={UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"},i.prototype.isReady=function(){return!!this._getVideoData("cmsRefGuid")},i.prototype.getTitle=function(){return this._getVideoData("videoTitle")},i.prototype.getVideoPath=function(){return this._getVideoData("cmsRefGuid")},i.prototype.getContentType=function(){return this._getPlaybackState("isAd")?i._contentTypes.AD:i._contentTypes.CONTENT},i.prototype.getAdPosition=function(){return i._adPositions.PREROLL},i.prototype.getTotalDuration=function(){var e=this._getPlaybackState("duration");return-1==e&&(e=300),1e3*e},i.prototype.getState=function(){var e=this._getPlaybackState("playbackState");return 0===e?i._videoStates.STOPPED:1===e?i._videoStates.PLAYED:2===e?i._videoStates.COMPLETED:void 0},i.prototype.getCurrentPlayTime=function(){return 1e3*this._getPlaybackState("currentTime")},i.prototype.getBitrate=function(){var e=this._getPlaybackState("facadeState");return this._getPlaybackState("isAd")?0:e.currentBitrate/1e3},i.prototype.getThumbnailPath=function(){return this._getVideoData("audioPreviewImageUrl")},i.prototype.getPlayerType=function(){return"UVPJS"},i.prototype.getViewStartTime=function(){return Date.now()-i._viewStartTime},i.prototype.getViewPlayTime=function(){return 1e3*this._getPlaybackState("absoluteStreamTime")},i.prototype.getViewAdPlayTime=function(){},i.verify=function(e){return"function"==typeof e.loadAndPlayResource},i.prototype._getPlaybackState=function(e){return this._player.getCurrentPlaybackState()[e]},i.prototype._getVideoData=function(e){return this._player.getContentVideoData()[e]},i.setPlayer=function(e){window._cbv.push(e)},window._cbv=window._cbv||[],window._cbv_strategies=window._cbv_strategies||[],window._cbv_strategies.push(i),window.UvpjsChartbeatAnalytics=i,e.default.on("player:player:ready",e=>{i.setPlayer(e.videoPlayer)}),e.default.on("url:load",e=>{i._viewStartTime=Date.now()})}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(2)],void 0===(r=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t};var i,n,r=window.Intercom.getInstance();e.default.on("player:ad:start",e=>{n=e.video,r.emit("vpjs-newvideoadstart",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId})}),e.default.on("player:content:start",e=>{n=e.video,r.emit("vpjs-newvideoplayback",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId})}),e.default.on("player:video:state",e=>{"PLAYING"===e.playbackState&&e.playbackState!==i&&r.emit("vpjs-newvideoplayback",{slug:e.video.slug,componentId:CBSNEWS.defaultPayload.id,componentSlug:CBSNEWS.defaultPayload.slug,containerId:CBSNEWS.uvpContainerId}),i=e.playbackState}),r.on("vpjs-newvideoplayback",t=>{t.containerId&&t.containerId!==CBSNEWS.uvpContainerId&&e.default.trigger("player:video:pause",{video:n})}),r.on("vpjs-viewabilityclosed",function(t){t.containerId==CBSNEWS.uvpContainerId&&e.default.trigger("player:video:pause",{video:n})}),r.on("utag-loaded",function(t){e.default.trigger("player:tracking:ready")})}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(2),i(1)],void 0===(r=function(e,t){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}e=i(e),(t=i(t)).default.util.tmpl.errorHandler=function(t){e.default.trigger("riot:tag:error",{tagName:t.riotData.tagName,message:t.message})},t.default.mixin({init:function(t){this.dispatch=e.default,this.opts.dataIs?this.opts.dataIs:this.root.nodeName.toLowerCase()}}),t.default.mixin("formatter",{init:function(e){},getRelativeTime:function(e){if(!e)return"";var t=new Date(e),i=new Date,n=Math.floor((i-t)/1e3);return n<=60?"just now":n<=3600?Math.round(n/60)+"m ago":n<=86400?Math.round(n/3600)+"h ago":this.formatDate(e)},formatDate:function(e){var t=(e=new Date(e)).getMonth(),i=e.getDate(),n=e.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][t]+" "+i+", "+n}})}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(2),i(75)],void 0===(r=function(e,t){"use strict";var i;e=(i=e)&&i.__esModule?i:{default:i};var n=window.location.pathname;e.default.on("url:load",e=>{var t=e.video,i=Object.assign({},CBSNEWS.tracking),r=t.type;window.hashParams&&window.hashParams.tracking||n!==window.location.pathname&&(n=window.location.pathname,window.isembed&&(i.mediaEmbed=!0),"playlist"===t.playlist.type&&(i.collectionId=t.playlist.id,i.collectionName=t.playlist.title),"live"===r||"dvr"===r?(i.articleId="",i.articleTitle="",i.mediaId="",i.mediaTitle="",i.mediaType="",i.pageName="/cbsn",i.pageType="live_streaming_player",i.siteSection=t.topic.slug):(i.articleId=t.id,i.articleTitle=t.fulltitle.toLowerCase(),i.mediaId=t.id,i.mediaTitle=t.fulltitle.toLowerCase(),i.mediaType="content_video",i.pageName=window.location.pathname,i.pageType="video",i.siteSection=t.topic.slug.replace(/-/gi," ")),i.hasVideo=!0,i.pageViewGuid=uuid.v4(),i.pageUrl=window.location.href,i.topicId=t.topic.id,i.topicName=t.topic.hierarchy,i.siteHier=t.topic.hierarchy,i.siteOrigin=t.originEdition,i.videoTitle=t.fulltitle,i.videoUrl=t.url,CBSNEWS.tracking.queue.push({type:"view",data:i,action:e=>{var t=new CustomEvent("tracking:view",{detail:i});window.dispatchEvent(t)}}))})}.apply(t,n))||(e.exports=r)},function(e,t,i){var n;void 0===(n=function(){"use strict";window.uuid||(window.uuid={}),void 0===window.uuid.v4&&(window.uuid.v4=function(){var e,t,i="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(i+="-"),i+=(12==e?4:16==e?3&t|8:t).toString(16);return i})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,r;n=[i(2)],void 0===(r=function(e){"use strict";var t,i;e=(t=e)&&t.__esModule?t:{default:t};var n={};e.default.on("player:resource:start",t=>{i||e.default.trigger("register:component",{api:"/video/xhr/collection/component/live-channels/",slug:"live-channels",type:"component"})}),e.default.on("player:resource:end",t=>{if(!(window.isembed||t.userInitiated||"live"==t.video.type||t.aviaEvent.detail.interrupted)){for(var r,a=t.video,o=a.playlist,s=o.itemIndexById[a.id]+1;s<o.items.length;){var l=o.items[s],u=["vod","live","dvr"];if(CBSNEWS.edition.isDefault||u.push("channel"),u.indexOf(l.type)>-1){r=l;break}s++}var c={userInitiated:!1};r?c.video=r:a.fusionRundown in n?c.video=n[a.fusionRundown]:c.video=i||CBSNEWS.defaultPayload.items[0],e.default.trigger("url:change",c)}}),e.default.on("video:video:changed:type-live",e=>{n[e.video.fusionRundown]=e.video;var t=CBSNEWS.edition.isDefault?"cbsnews":CBSNEWS.edition.market;e.video.playlist.id==="fusion-"+t&&(i=e.video)})}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(2)],void 0===(r=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t};var i,n={adHref:null,adSlug:null,pathClicked:null,slugClicked:null};function r(t){e.default.trigger("url:before-click",t);var r=t.target;if("A"!=!t.target.nodeName&&(r=t.target.closest("a")||t.target.firstChild),r&&"A"==r.nodeName&&(!window.isembed||r.hasAttribute("data-stay-inside-embed"))&&/(cbsnews\.com)/i.test(r.host)&&(r.payload||r.hasAttribute("data-payload")||r.matches('a[href*="/live/"], a[href*="/video/"]')&&!r.matches('a[href^="#"]'))){e.default.trigger("url:click",t);var a=r.payload;if(!a&&r.hasAttribute("data-payload")&&(a=JSON.parse(r.getAttribute("data-payload"))),a)if("custom"==a.type);else if("playlist"==a.type||"listing"==a.type||"channel"==a.type){t.preventDefault();var o=a.items[0];a.id.indexOf("fusion")>-1&&(o=a.items[a.items.length-1]),e.default.trigger("feed:ingested:playlist",{feed:a}),e.default.trigger("url:change",{type:a.type,playlist:a,video:o,userInitiated:!0})}else t.preventDefault(),e.default.trigger("url:change",{type:a.type,playlist:a.playlist,video:a,userInitiated:!0});else{t.preventDefault();var s=r.pathname;"/pcs/click"==s&&(s="/video/"+r.href.split(".com/video/")[1]),n.pathClicked=s,e.default.trigger("feed:request:path",{path:s,targetPathname:r.pathname}),i=setTimeout(function(){clearTimeout(i),window.location.href=r.href},1e3)}}}document.body.addEventListener("click",r,!0),CBSNEWS.frameElementContainer&&CBSNEWS.frameElementContainer.addEventListener("click",r,!0),e.default.on("feed:ingested:playlist",t=>{if(t.feed&&"top-stories"==t.feed.slug){if(n.pathClicked&&n.pathClicked==t.path){clearTimeout(i);var r=t.feed.items[0];t={type:r.type,playlist:r.playlist,video:r,userInitiated:!0},e.default.trigger("url:change",t),n.slugClicked=null}if(n.adSlug==t.feed.items[0].slug){var a=t.feed.items[0];n.adHref.payload={type:a.type,playlist:a.playlist,video:a,userInitiated:!0,isInjectedAd:!0},n.adSlug=null}}}),window.addEventListener("ads:slotRenderEnded",t=>{var i=t.detail.adUnit.code,r=document.getElementById(i).querySelector("a");if(r){var a=function(e){if(e.indexOf("cbsnews.com")>-1){var t,i=/\/(live)\/([A-Za-z0-9\-]*)?/;return null!=(t=e.match(i))?[t[1],t[2]||""]:(i=/\/video\/([A-Za-z0-9\-]*)/,["vod",(t=e.match(i))[1]])}return!1}(r.href);n.adHref=r,n.adSlug=a[1];var o=3;CBSNEWS.defaultPayload.items[0].isImposter&&o++,e.default.trigger("feed:request:video",{type:a[0],slug:a[1],imposter:!0,strategy:"inject",startPosition:o})}})}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(65),i(66),i(116),i(117),i(118),i(119),i(36)],void 0===(r=function(e,t,n,r,a,o,s){"use strict";i(1).tag2("aviajs",'<div id="{containerId}" data-role="aviaPlayerContainer"><avia-ui><div slot="poster"><avia-poster><img show="{playing === false}" riot-src="{posterImage}"></avia-poster></div><div slot="overlay"><h1 class="avia-overlay__title">{videoTitle}</h1></div></avia-ui></div><div if="{geoBlock}" class="player-overlay__container is-visible" ref="geoBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--geo-block"><svg viewbox="0 0 33 34" class="player-overlay__icon player-overlay__icon--eye" aria-hidden="true"><use xlink:href="#icon-eye"></use></svg><p class="player-overlay__message">Sorry, this content is not available in your region.</p><a class="player-overlay__button" href="/video/">More CBS News Videos</a></div></div><div if="{allAccessBlock}" class="player-overlay__container is-visible" ref="allAccessBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--all-access-block"><img class="player-overlay__icon player-overlay__icon--all-access" src="/bundles/cbsnewscore/images/video-player/pp-stacked1x.png" srcset="/bundles/cbsnewscore/images/video-player/pp-stacked1x.png 1x, /bundles/cbsnewscore/images/video-player/pp-stacked2x.png 2x"><p class="player-overlay__message">This video is available on Paramount+</p><a class="player-overlay__button" href="{video.cbsAllAccessRedirect}" target="_top">Watch Now</a><p class="player-overlay__message player-overlay__message--sticky"><a href="{video.cbsAllAccessRedirect}" target="_top">Watch Now</a><a href="https://{CBSNEWS.host.secure}/user/login/?appId=1503&amp;redirectUrl={encodeURIComponent(inIframe() ? document.referrer : window.location)}" target="_blank" class="lazyload" data-component="popups">LOG&nbsp;IN</a></p></div></div><div if="{embedBlock}" class="player-overlay__container is-visible" ref="embedBlockOverlay" riot-style="background-image: url({video && video.images.hd})"><div class="player-overlay player-overlay--embed-block"><svg viewbox="0 0 33 34" class="player-overlay__icon player-overlay__icon--eye" aria-hidden="true"><use xlink:href="#icon-eye"></use></svg><p class="player-overlay__message">Sorry, you are not authorized to embed this stream.</p><a class="player-overlay__button" href="/video/" target="blank">More CBS News Videos</a></div></div><div class="player-overlay__container player-overlay--draggable"><div class="player-overlay"><svg class="player-overlay--icon-grid"><use xlink:href="#player-icon-drag"></use></svg><span class="player-overlay__title" if="{video}">{video.title}</span><button class="player-overlay__button player-overlay__button--close" data-target="" aria-label="Disable small player"><svg class="player-overlay__button--icon player-overlay__button--icon-close"><use xlink:href="#player-icon-close"></use></svg></button></div></div><div class="player-overlay--draggable-handle"></div>',"",'class="{opts.component}"',function(e){var t,i;window.avia={buildInfo:n.buildInfo,getSystemInfo:n.getSystemInfo,getPlatformInfo:n.getPlatformInfo,Logger:n.Logger,PlayerEvent:n.PlayerEvent},this.partner="cbsnews",this.types={live:n.StreamType.LIVE,dvr:n.StreamType.DVR,vod:n.StreamType.VOD},this.isPlayerReady=!1,this.playQueue=null,this.shouldAutoplay=CBSNEWS.shouldAutoplay&&CBSNEWS.features.isFeatureEnabled("autoplay"),this.video,this.previewUrl,this.posterImage,this.userInitiated,this.videoType,this.videoTitle="",this.playing=!1,this.hasBeenReInitialized=!1,this.geoBlock=null,this.allAccessBlock=null,this.embedBlock=null,this.controlsOverlay,this.geoBlockOverlay,this.allAccessBlockOverlay,this.npa=1,this.geo,this.consentString=null,this.cbsLocalComscoreC3={"newyork.cbslocal.com":"CBSLocalNY","losangeles.cbslocal.com":"CBSLocalLA","boston.cbslocal.com":"CBSLocalBoston","sacramento.cbslocal.com":"CBSLocalSacramentoCA","sanfrancisco.cbslocal.com":"CBSLocalSanFran","denver.cbslocal.com":"CBSLocalDenver","miami.cbslocal.com":"CBSLocalMiami","chicago.cbslocal.com":"CBSLocalChicago","baltimore.cbslocal.com":"CBSLocalBaltimore","detroit.cbslocal.com":"CBSLocalDetroit","minnesota.cbslocal.com":"CBSLocalMinnesota","philadelphia.cbslocal.com":"CBSLocalPhiladelphia","pittsburgh.cbslocal.com":"CBSLocalPittsburgh","dfw.cbslocal.com":"CBSLocalDallas","www.msn.com":"MSN"},this.comscoreC3="CBSNewsBrowser",window.isembed&&CBSNEWS.referrerHostname in this.cbsLocalComscoreC3&&(this.comscoreC3=this.cbsLocalComscoreC3[CBSNEWS.referrerHostname]),"local_app"===CBSNEWS.device&&(this.appName="",/iPhone|iPod/i.test(navigator.userAgent)||/iPad|Macintosh/i.test(navigator.userAgent)?this.appName="CBSNewsiOSApp":/Android/i.test(navigator.userAgent)&&(this.appName="CBSNewsAndroidApp"),this.posterImage=CBSNEWS.defaultPayload.items[0].images.hd),"desktop"!==CBSNEWS.device&&"mobile"!==CBSNEWS.device||!CBSNEWS.defaultPayload.items[0].images.hd||(this.posterImage=CBSNEWS.defaultPayload.items[0].images.hd),this.cbsLocalComscoreC4={losangeles:"CBSLocalLA",newyork:"CBSLocalNY",boston:"CBSLocalBoston",sacramento:"CBSLocalSacramentoCA",sanfrancisco:"CBSLocalSanFran",denver:"CBSLocalDenver",miami:"CBSLocalMiami",chicago:"CBSLocalChicago",baltimore:"CBSLocalBaltimore",detroit:"CBSLocalDetroit",minnesota:"CBSLocalMinnesota",philadelphia:"CBSLocalPhiladelphia",pittsburgh:"CBSLocalPittsburgh",dfw:"CBSLocalDallas"},this.comscoreC4="CBSNews.com",(null===(t=CBSNEWS)||void 0===t||null===(i=t.edition)||void 0===i?void 0:i.market)in this.cbsLocalComscoreC4&&(this.comscoreC4=this.cbsLocalComscoreC4[CBSNEWS.edition.market]),this.on("mount",()=>{this.geo=JSON.parse((0,s.getCookie)("fly_geo")),this.dispatch.on("player:video:error",this.handleVideoError),this.dispatch.on("player:video:pause",this.pause),this.dispatch.on("player:video:recover",this.play),this.dispatch.on("player:livestream:stop",this.exitFullscreen),this.dispatch.on("player:playback:started",e=>{this.hasBeenReInitialized=!1}),this.dispatch.on("url:load",e=>{this.updatePreview(e),this.play(e),this.update({videoTitle:this.shouldAutoplay||!this.shouldAutoplay&&"mobile"===CBSNEWS.device?"":e.video.title})}),this.dispatch.on("url:change",this.resetPreview),this.dispatch.on("player:content:start",this.resetPreview),this.dispatch.on("player:ad:start",this.resetPreview),this.dispatch.on("player:playback:started",this.resetPreview),this.adRefreshNpa(),this.adGDPRforEU(),this.initPlayer()}),this.updatePreview=function(e){this.update({videoType:e.video.type?e.video.type:"vod",previewUrl:"local_app"===CBSNEWS.device||this.shouldAutoplay?"":e.video.previewUrl,posterImage:this.posterImage?this.posterImage:e.video.images.hd})}.bind(this),this.resetPreview=function(){this.update({previewUrl:"",posterImage:"desktop"!==CBSNEWS.device&&"mobile"!==CBSNEWS.device||this.posterImage?this.posterImage:payload.video.images.hd,playing:!0})}.bind(this),this.initPlayer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.videoPlayer)return this.update({videoPlayer:null}),void(0,n.removeVideoPlayer)(this.containerId).then(this.initPlayer);CBSNEWS.features.executeWithConsent(["avia"],"essential",t=>{CBSNEWS.uvpContainerId=this.containerId="vpjs-container-"+Date.now();var i={container:"[data-role=aviaPlayerContainer]",id:this.containerId,autoplay:this.shouldAutoplay?n.Autoplay.ATTEMPT_MUTED:n.Autoplay.NONE,logLevel:CBSNEWS.features.isFeatureEnabled("debug")?n.LogLevel.DEBUG:n.LogLevel.ERROR,enableOm:CBSNEWS.features.isFeatureEnabled("avia-open-measurement"),overrides:{dependencies:{hlsjs:requirejs.s.contexts._.config.baseUrl+"polyfills/hls.min.js"+requirejs.s.contexts._.config.urlArgs(null,"")}},playsInline:!0,plugins:[(0,r.ui)({posterImageUrl:this.posterImage}),(0,a.hlsjs)(),(0,o.gam)({debug:!0})]};if(!e){if(void 0===window.vtg)try{document.referrer&&!document.referrer.includes("cbsnews.com")?CBSNEWS.features.executeWithConsent(["tealium"],"essential",()=>{var e=document.createElement("script");e.src=CBSNEWS.tealiumPath,document.head.appendChild(e)}):window.vtg=window.parent.vtg}catch(e){console.error(e)}if(void 0!==window.vtg&&void 0!==window.vtg.aviatracking)try{i.plugins.push(window.vtg.aviatracking.AviaTracking.plugin({config:window.vtg.config}))}catch(e){console.error(e)}else if(CBSNEWS.tracking.isEnabled){var s=setTimeout(this.initPlayer,1e4,!0);return void this.dispatch.one("player:tracking:ready",()=>{clearTimeout(s),this.initPlayer()})}}this.dispatch.trigger("player:options",i),(0,n.createVideoPlayer)(i).then((e,t)=>{for(var i in this.videoPlayer=e,CBSNEWS.videoPlayer=e,n.PlayerEvent)"CONTENT_PROGRESS"!==i&&this.videoPlayer.on(n.PlayerEvent[i],this.onPlayerState);this.videoPlayer.on(n.PlayerEvent.READY,this.onVideoPlayerReady),this.videoPlayer.on(n.PlayerEvent.AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.videoPlayer.on(n.PlayerEvent.PLAYBACK_STARTED,this.onPlaybackStarted),this.videoPlayer.on(n.PlayerEvent.RESOURCE_START,this.onResourceStart),this.videoPlayer.on(n.PlayerEvent.RESOURCE_END,this.onResourceEnd),this.videoPlayer.on(n.PlayerEvent.LIVE_PRESENTATION_STOPPED,this.onResourceEnd),this.videoPlayer.on(n.PlayerEvent.LIVE_PRESENTATION_STOPPED,this.onLiveStreamStop),this.videoPlayer.on(n.PlayerEvent.AD_START,this.onAdStart),this.videoPlayer.on(n.PlayerEvent.AD_PAUSED,this.onAdPaused),this.videoPlayer.on(n.PlayerEvent.AD_COMPLETE,this.onAdComplete),this.videoPlayer.on(n.PlayerEvent.CONTENT_START,this.onContentStart),this.videoPlayer.on(n.PlayerEvent.CONTENT_PLAYING,this.onContentPlaying),this.videoPlayer.on(n.PlayerEvent.CONTENT_PAUSED,this.onContentPaused),this.videoPlayer.on(n.PlayerEvent.CONTENT_COMPLETE,this.onContentComplete),this.videoPlayer.on(n.PlayerEvent.ERROR,this.onVideoError),e.isReady&&this.onVideoPlayerReady()}).catch(e=>this.onVideoManagerError(e))})}.bind(this),this.onVideoPlayerReady=function(){this.isPlayerReady=!0,this.dispatch.trigger("player:player:ready",{videoPlayer:this.videoPlayer}),this.playQueue&&this.play(this.playQueue)}.bind(this),this.play=function(e){if(!this.isPlayerReady)return this.playQueue=e,void this.dispatch.trigger("player:player:not-ready",[e,this.isPlayerReady,e.initialUrlLoad,this.shouldAutoplay]);this.videoPlayer.resource&&this.video==e.video?this.videoPlayer.play():(this.video=e.video,this.userInitiated=e.userInitiated,this.shouldShowBlocker(this.video)||(this.videoPlayer.attachResource(this.createResource(this.video)),setTimeout(e=>this.userInitiated=!1,100)))}.bind(this),this.pause=function(){this.videoPlayer&&"idle"!==this.videoPlayer.playbackState&&this.videoPlayer.pause()}.bind(this),this.exitFullscreen=function(){this.videoPlayer&&this.videoPlayer.exitFullscreen()}.bind(this),this.createResource=function(e){var t=(0,n.createResourceConfig)();if(!CBSNEWS.edition.isDefault&&"channel"===e.type){var i=e.items.length-1;e=e.items[i]}return this.addVideoToRco(e,t),this.addAdToRco(e,t),this.dispatch.trigger("player:player:rco",t),t}.bind(this),this.addVideoToRco=function(e,t){t.location.mediaUrl=e.video,t.location.textTrackUrl=e.captions,t.overrides.mimeType=e.format,t.metadata={airdate:new Date(e.timestamp).toISOString(),appName:this.appName,duration:parseInt(e.duration),episodeNumber:e.episode,genre:"news",hierarchyByName:e.topic.hierarchyByName.join("/"),isDcrLive:"live"===e.type,isEpisode:null!==e.episode,isLive:"live"===e.type,mediaUrl:e.video,partner:this.partner,propertyKey:e.muxPropertyKey,seasonNumber:e.season,seriesTitle:e.topic.parentTopicName,streamType_analytics:this.types[e.type],videoId:e.mpxRefId,videoTitle:e.canonicalTitle.replace(/"/g,'\\"')},void 0!==CBSNEWS.tracking.secondaryTopicIds&&CBSNEWS.tracking.secondaryTopicIds.length>0&&(t.metadata.secondaryTopicIds=CBSNEWS.tracking.secondaryTopicIds.join("|")),void 0!==CBSNEWS.tracking.admiralNovemberAlphaWL&&CBSNEWS.tracking.admiralNovemberAlphaWL&&(t.metadata.admiralNovemberAlpha=!0),e.tracking&&e.tracking.comscore&&(t.metadata.genre=e.tracking.comscore.ns_st_ge,t.metadata.c2=e.tracking.comscore.c2,t.metadata.c3=this.comscoreC3,t.metadata.c4=this.overrideLocalEditionVideoComscoreC4(e.tracking.comscore.c4),t.metadata.c6=e.tracking.comscore.c6,t.metadata.seriesTitle=e.tracking.comscore.ns_st_pr,t.metadata.stationTitle=e.tracking.comscore.ns_st_st)}.bind(this),this.overrideLocalEditionVideoComscoreC4=function(e){var t,i,n,r;if("video"!==(null===(t=CBSNEWS)||void 0===t||null===(i=t.tracking)||void 0===i?void 0:i.pageType))return e;var a={atlanta:"CBSLocalAtlanta",baltimore:"CBSLocalBaltimore",boston:"CBSLocalBoston",chicago:"CBSLocalChicago",colorado:"CBSLocalDenver",detroit:"CBSLocalDetroit",dfw:"CBSLocalDallas",losangeles:"CBSLocalLA",miami:"CBSLocalMiami",minnesota:"CBSLocalMinnesota",newyork:"CBSLocalNY",philadelphia:"CBSLocalPhiladelphia",pittsburgh:"CBSLocalPittsburgh",sacramento:"CBSLocalSacramentoCA",sanfrancisco:"CBSLocalSanFran",seattle:"CBSLocalSeattle",tampa:"CBSLocalTampa"};return(null===(n=CBSNEWS)||void 0===n||null===(r=n.edition)||void 0===r?void 0:r.market)in a?a[CBSNEWS.edition.market]:e}.bind(this),this.addAdToRco=function(e,t){if(this.shouldShowAd(e))if(this.adRefreshNpa(),t.ad.viewabilityTracking.partner=this.partner,t.ad.viewabilityTracking.pageType=CBSNEWS.tracking.pageType,t.ad.viewabilityTracking.viewGuid=CBSNEWS.tracking.pageViewGuid,"live"!==e.type)t.ad.csai={adCallUrl:this.adPopulateFwPlaceholdersInUrl(e.ad.fw.fw_link,e)};else try{if(!e.daiAssetId)throw new Error("asset Id unavailable, fallback to ssb");t.ad.ssai={assetKey:e.daiAssetId,adParameters:this.adPopulateFwPlaceholdersInParams(e.ad.fw.params,e),enableNonce:!0}}catch(i){t.location.mediaUrl=e.ad.fw.dai_with_fw?this.adPopulateFwPlaceholdersInUrl(e.ad.fw.dai_with_fw,e):e.video}}.bind(this),this.adVideoPid=function(e){return e.sponsor&&e.sponsor.mpx_id?e.sponsor.mpx_id:e.mpxRefId}.bind(this),this.adPopulateFwPlaceholdersInUrl=function(e,t){var i=this.adReplaceFwPlaceholders(t),n=e.replace(/{[^}]+}/gi,i);return void 0!==CBSNEWS.tracking.admiralNovemberAlphaWL&&CBSNEWS.tracking.admiralNovemberAlphaWL&&(n+="&ae=t"),n}.bind(this),this.adPopulateFwPlaceholdersInParams=function(e,t){var i=this.adReplaceFwPlaceholders(t);for(var n in e)e[n]=e[n].replace(/{[^}]+}/gi,i);var r=CBSNEWS.features.getFeatureValue("fms-params")||{};for(var a in r)e[("live"===t.type?"imafw_":"")+a]=r[a];return void 0!==CBSNEWS.tracking.admiralNovemberAlphaWL&&CBSNEWS.tracking.admiralNovemberAlphaWL&&(e.ae="t"),e}.bind(this),this.adReplaceFwPlaceholders=function(e){var t="live"===e.type?"live":"vod",i="app"===CBSNEWS.device?"mobile":CBSNEWS.device,n=CBSNEWS.imafw_csid[i],r="app"===CBSNEWS.device?"default":CBSNEWS.tracking.deviceOs+CBSNEWS.tracking.deviceForm||"default",a=n.partner[t]||[],o=n[r][t]||[],l=new URL(window.location.href).searchParams,u=encodeURIComponent(window.location.href);"desktop"!==i&&"mobile"!==i||!this.inIframe()||""===document.referrer||(u=encodeURIComponent(document.referrer));var c={"{app_id}":u,"{caid}":e.mpxRefId,"{duration}":e.duration,"{device}":i,"{fms_params}":new URLSearchParams(CBSNEWS.features.getFeatureValue("fms-params")).toString(),"{is_lat}":null!==this.npa?this.npa:0,"{player_size}":encodeURIComponent("640x480"),"{ptype}":CBSNEWS.tracking.pageType,"{random_correlator}":"[RANDOM]","{random_scor}":"[RANDOM]","{topic}":encodeURIComponent(CBSNEWS.tracking.allTopics.join(",")),"{imafw_topic}":CBSNEWS.tracking.allTopics.join(","),"{vcid}":"5dc7fb16c77374f0cfb4ddc60835c679","{vguid}":CBSNEWS.tracking.pageViewGuid,"{imafw_csid}":a[CBSNEWS.referrerHostname]||o[CBSNEWS.edition.key],"{gdpr_consent}":this.consentString};if(null!==l.get("usprivacy")&&"null"!==l.get("usprivacy"))c["{privacy}"]=l.get("usprivacy");else{var d=(0,s.getCookie)("usprivacy")||"";d&&(c["{privacy}"]=d)}return e=>c[e]||""}.bind(this),this.adRefreshNpa=function(){CBSNEWS.features.isFeatureEnabled("consent")&&cbsoptanon.cmd.push(e=>cbsoptanon.ads.getNpaFlag(e=>{this.npa=e}))}.bind(this),this.adGDPRforEU=function(){CBSNEWS.features.isFeatureEnabled("consent")&&cbsoptanon.cmd.push(e=>cbsoptanon.tcf.getConsentData((e,t)=>{this.consentString=t?e.tcString:null}))}.bind(this),this.adDistanceCount=3,this.adDistanceMicroseconds=48e4,this.adLastTimestamp=0,this.adRotator=0,this.shouldShowAd=function(e){var t=Date.now();"dvr"===e.type?this.adRotator=this.adRotator%this.adDistanceCount+1:this.adRotator=0;var i=!(CBSNEWS.features.isFeatureDisabled("freewheel")||"dvr"===e.type&&!0===e.suppress||"dvr"===e.type&&(null===e.sponsor||null===e.sponsor.mpx_id)&&1!==this.adRotator&&(0===this.adLastTimestamp||t-this.adLastTimestamp<this.adDistanceMicroseconds)||"vod"===e.type&&!0===e.suppress);return i&&(this.adLastTimestamp=t),this.dispatch.trigger("ad:video:"+i,{adRotator:this.adRotator,time:t-this.adLastTimestamp,type:e.type}),i}.bind(this),this.shouldShowBlocker=function(e){return this.update({geoBlock:this.shouldGeoBlock(e),allAccessBlock:!0===e.allAccessBlock,embedBlock:CBSNEWS.whitelistFailed}),this.dispatch.trigger("player:video:block",{video:e,allAccessBlock:this.allAccessBlock,embedBlock:this.embedBlock,geoBlock:this.geoBlock,geo:this.geo}),this.geoBlock||this.allAccessBlock||this.embedBlock}.bind(this),this.shouldGeoBlock=function(e){var t,i,n,r,a;return this.geo&&(null==e||null===(t=e.geo)||void 0===t||null===(i=t.countries)||void 0===i?void 0:i.length)>0&&(null==e||null===(n=e.geo)||void 0===n||null===(r=n.countries)||void 0===r?void 0:r.includes(this.geo.countryCode))===(null==e||null===(a=e.geo)||void 0===a?void 0:a.blacklist)}.bind(this),this.handleVideoError=function(e){console.error("handleVideoError",e),!1!==e.aviaEvent.detail.error.fatal&&(this.hasBeenReInitialized||(this.update({playQueue:e,hasBeenReInitialized:!0}),this.initPlayer()))}.bind(this),this.onPlayerState=function(e){var t="player:video:state";this.video||(t="player:player:state"),this.dispatch.trigger(t,{video:this.video,aviaEventType:e.type,aviaEvent:e,rawPlaybackState:this.videoPlayer?this.videoPlayer.playbackState:null,playbackState:e.type===n.PlayerEvent.LIVE_PRESENTATION_STOPPED?"STOPPED":this.videoPlayer?Object.keys(n.PlaybackState).find(e=>n.PlaybackState[e]===this.videoPlayer.playbackState):null})}.bind(this),this.onVideoManagerError=function(e){this.dispatch.trigger("player:manager:error",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAutoplayBlocked=function(e){this.dispatch.trigger("player:autoplay:blocked",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onPlaybackStarted=function(e){this.dispatch.trigger("player:playback:started",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdStart=function(e){this.dispatch.trigger("player:ad:start",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdPaused=function(e){this.dispatch.trigger("player:ad:paused",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onAdComplete=function(e){this.dispatch.trigger("player:ad:end",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onContentStart=function(e){this.dispatch.trigger("player:content:start",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onContentPlaying=function(e){this.dispatch.trigger("player:content:playing",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onContentPaused=function(e){this.dispatch.trigger("player:content:paused",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onContentComplete=function(e){this.dispatch.trigger("player:content:done",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onLiveStreamStop=function(e){this.dispatch.trigger("player:livestream:stop",{video:this.video,userInitiated:this.userInitiated,uvpEvent:e})}.bind(this),this.onResourceStart=function(e){this.dispatch.trigger("player:resource:start",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onResourceEnd=function(e){this.dispatch.trigger("player:resource:end",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onVideoError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaEvent:e})}.bind(this),this.onVideoStartError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaError:e})}.bind(this),this.onVideoPlaybackError=function(e){this.dispatch.trigger("player:video:error",{video:this.video,userInitiated:this.userInitiated,aviaError:e})}.bind(this),this.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}}.bind(this)})}.apply(t,n))||(e.exports=r)},function(e,t,i){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},function(e,t,i){var n=i(6),r=i(3),a=i(22),o=Object,s=n("".split);e.exports=r(function(){return!o("z").propertyIsEnumerable(0)})?function(e){return"String"==a(e)?s(e,""):o(e)}:o},function(e,t,i){var n=i(12),r=i(10),a=i(42),o=i(46),s=i(84),l=i(7),u=TypeError,c=l("toPrimitive");e.exports=function(e,t){if(!r(e)||a(e))return e;var i,l=o(e,c);if(l){if(void 0===t&&(t="default"),i=n(l,e,t),!r(i)||a(i))return i;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},function(e,t,i){var n,r,a=i(4),o=i(83),s=a.process,l=a.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(r=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!r&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(r=+n[1]),e.exports=r},function(e,t,i){var n=i(17);e.exports=n("navigator","userAgent")||""},function(e,t,i){var n=i(12),r=i(0),a=i(10),o=TypeError;e.exports=function(e,t){var i,s;if("string"===t&&r(i=e.toString)&&!a(s=n(i,e)))return s;if(r(i=e.valueOf)&&!a(s=n(i,e)))return s;if("string"!==t&&r(i=e.toString)&&!a(s=n(i,e)))return s;throw o("Can't convert object to primitive value")}},function(e,t,i){var n=i(3),r=i(0),a=i(8),o=i(5),s=i(54).CONFIGURABLE,l=i(86),u=i(29),c=u.enforce,d=u.get,h=Object.defineProperty,f=o&&!n(function(){return 8!==h(function(){},"length",{value:8}).length}),v=String(String).split("String"),p=e.exports=function(e,t,i){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!a(e,"name")||s&&e.name!==t)&&(o?h(e,"name",{value:t,configurable:!0}):e.name=t),f&&i&&a(i,"arity")&&e.length!==i.arity&&h(e,"length",{value:i.arity});try{i&&a(i,"constructor")&&i.constructor?o&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=c(e);return a(n,"source")||(n.source=v.join("string"==typeof t?t:"")),e};Function.prototype.toString=p(function(){return r(this)&&d(this).source||l(this)},"toString")},function(e,t,i){var n=i(6),r=i(0),a=i(26),o=n(Function.toString);r(a.inspectSource)||(a.inspectSource=function(e){return o(e)}),e.exports=a.inspectSource},function(e,t,i){var n=i(4),r=i(0),a=n.WeakMap;e.exports=r(a)&&/native code/.test(String(a))},function(e,t,i){var n=i(8),r=i(89),a=i(38),o=i(9);e.exports=function(e,t,i){for(var s=r(t),l=o.f,u=a.f,c=0;c<s.length;c++){var d=s[c];n(e,d)||i&&n(i,d)||l(e,d,u(t,d))}}},function(e,t,i){var n=i(17),r=i(6),a=i(90),o=i(93),s=i(11),l=r([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=a.f(s(e)),i=o.f;return i?l(t,i(e)):t}},function(e,t,i){var n=i(55),r=i(32).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?n:i)(t)}},function(e,t,i){var n=i(58),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(3),r=i(0),a=/#|\.prototype\./,o=function(e,t){var i=l[s(e)];return i==c||i!=u&&(r(t)?n(t):!!t)},s=o.normalize=function(e){return String(e).replace(a,".").toLowerCase()},l=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},function(e,t,i){var n=i(5),r=i(53),a=i(9),o=i(11),s=i(14),l=i(96);t.f=n&&!r?Object.defineProperties:function(e,t){o(e);for(var i,n=s(t),r=l(t),u=r.length,c=0;u>c;)a.f(e,i=r[c++],n[i]);return e}},function(e,t,i){var n=i(55),r=i(32);e.exports=Object.keys||function(e){return n(e,r)}},function(e,t,i){var n=i(17);e.exports=n("document","documentElement")},function(e,t,i){"use strict";i(99);var n=i(20),r=i(4),a=i(12),o=i(6),s=i(5),l=i(105),u=i(16),c=i(106),d=i(33),h=i(61),f=i(29),v=i(107),p=i(0),g=i(8),y=i(108),m=i(34),A=i(11),k=i(10),b=i(110),E=i(18),T=i(13),S=i(111),C=i(64),x=i(112),w=i(7),P=i(113),_=w("iterator"),I=f.set,L=f.getterFor("URLSearchParams"),N=f.getterFor("URLSearchParamsIterator"),M=Object.getOwnPropertyDescriptor,R=function(e){if(!s)return r[e];var t=M(r,e);return t&&t.value},O=R("fetch"),D=R("Request"),B=R("Headers"),U=D&&D.prototype,F=B&&B.prototype,V=r.RegExp,H=r.TypeError,$=r.decodeURIComponent,W=r.encodeURIComponent,K=o("".charAt),z=o([].join),j=o([].push),G=o("".replace),q=o([].shift),Y=o([].splice),Q=o("".split),X=o("".slice),J=/\+/g,Z=Array(4),ee=function(e){return Z[e-1]||(Z[e-1]=V("((?:%[\\da-f]{2}){"+e+"})","gi"))},te=function(e){try{return $(e)}catch(t){return e}},ie=function(e){var t=G(e,J," "),i=4;try{return $(t)}catch(e){for(;i;)t=G(t,ee(i--),te);return t}},ne=/[!'()~]|%20/g,re={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ae=function(e){return re[e]},oe=function(e){return G(W(e),ne,ae)},se=h(function(e,t){I(this,{type:"URLSearchParamsIterator",iterator:S(L(e).entries),kind:t})},"Iterator",function(){var e=N(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),i},!0),le=function(e){this.entries=[],this.url=null,void 0!==e&&(k(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===K(e,0)?X(e,1):e:b(e)))};le.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,i,n,r,o,s,l,u=C(e);if(u)for(i=(t=S(e,u)).next;!(n=a(i,t)).done;){if(o=(r=S(A(n.value))).next,(s=a(o,r)).done||(l=a(o,r)).done||!a(o,r).done)throw H("Expected sequence with length 2");j(this.entries,{key:b(s.value),value:b(l.value)})}else for(var c in e)g(e,c)&&j(this.entries,{key:c,value:b(e[c])})},parseQuery:function(e){if(e)for(var t,i,n=Q(e,"&"),r=0;r<n.length;)(t=n[r++]).length&&(i=Q(t,"="),j(this.entries,{key:ie(q(i)),value:ie(z(i,"="))}))},serialize:function(){for(var e,t=this.entries,i=[],n=0;n<t.length;)e=t[n++],j(i,oe(e.key)+"="+oe(e.value));return z(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ue=function(){v(this,ce);var e=arguments.length>0?arguments[0]:void 0;I(this,new le(e))},ce=ue.prototype;if(c(ce,{append:function(e,t){x(arguments.length,2);var i=L(this);j(i.entries,{key:b(e),value:b(t)}),i.updateURL()},delete:function(e){x(arguments.length,1);for(var t=L(this),i=t.entries,n=b(e),r=0;r<i.length;)i[r].key===n?Y(i,r,1):r++;t.updateURL()},get:function(e){x(arguments.length,1);for(var t=L(this).entries,i=b(e),n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){x(arguments.length,1);for(var t=L(this).entries,i=b(e),n=[],r=0;r<t.length;r++)t[r].key===i&&j(n,t[r].value);return n},has:function(e){x(arguments.length,1);for(var t=L(this).entries,i=b(e),n=0;n<t.length;)if(t[n++].key===i)return!0;return!1},set:function(e,t){x(arguments.length,1);for(var i,n=L(this),r=n.entries,a=!1,o=b(e),s=b(t),l=0;l<r.length;l++)(i=r[l]).key===o&&(a?Y(r,l--,1):(a=!0,i.value=s));a||j(r,{key:o,value:s}),n.updateURL()},sort:function(){var e=L(this);P(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,i=L(this).entries,n=y(e,arguments.length>1?arguments[1]:void 0),r=0;r<i.length;)n((t=i[r++]).value,t.key,this)},keys:function(){return new se(this,"keys")},values:function(){return new se(this,"values")},entries:function(){return new se(this,"entries")}},{enumerable:!0}),u(ce,_,ce.entries,{name:"entries"}),u(ce,"toString",function(){return L(this).serialize()},{enumerable:!0}),d(ue,"URLSearchParams"),n({global:!0,constructor:!0,forced:!l},{URLSearchParams:ue}),!l&&p(B)){var de=o(F.has),he=o(F.set),fe=function(e){if(k(e)){var t,i=e.body;if("URLSearchParams"===m(i))return t=e.headers?new B(e.headers):new B,de(t,"content-type")||he(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),E(e,{body:T(0,b(i)),headers:T(0,t)})}return e};if(p(O)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return O(e,arguments.length>1?fe(arguments[1]):{})}}),p(D)){var ve=function(e){return v(this,U),new D(e,arguments.length>1?fe(arguments[1]):{})};U.constructor=ve,ve.prototype=U,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ve})}}e.exports={URLSearchParams:ue,getState:L}},function(e,t,i){"use strict";var n=i(14),r=i(60),a=i(19),o=i(29),s=i(9).f,l=i(100),u=i(104),c=i(15),d=i(5),h=o.set,f=o.getterFor("Array Iterator");e.exports=l(Array,"Array",function(e,t){h(this,{type:"Array Iterator",target:n(e),index:0,kind:t})},function(){var e=f(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,u(void 0,!0)):u("keys"==i?n:"values"==i?t[n]:[n,t[n]],!1)},"values");var v=a.Arguments=a.Array;if(r("keys"),r("values"),r("entries"),!c&&d&&"values"!==v.name)try{s(v,"name",{value:"values"})}catch(e){}},function(e,t,i){"use strict";var n=i(20),r=i(12),a=i(15),o=i(54),s=i(0),l=i(61),u=i(63),c=i(102),d=i(33),h=i(28),f=i(16),v=i(7),p=i(19),g=i(62),y=o.PROPER,m=o.CONFIGURABLE,A=g.IteratorPrototype,k=g.BUGGY_SAFARI_ITERATORS,b=v("iterator"),E=function(){return this};e.exports=function(e,t,i,o,v,g,T){l(i,t,o);var S,C,x,w=function(e){if(e===v&&N)return N;if(!k&&e in I)return I[e];switch(e){case"keys":case"values":case"entries":return function(){return new i(this,e)}}return function(){return new i(this)}},P=t+" Iterator",_=!1,I=e.prototype,L=I[b]||I["@@iterator"]||v&&I[v],N=!k&&L||w(v),M="Array"==t&&I.entries||L;if(M&&(S=u(M.call(new e)))!==Object.prototype&&S.next&&(a||u(S)===A||(c?c(S,A):s(S[b])||f(S,b,E)),d(S,P,!0,!0),a&&(p[P]=E)),y&&"values"==v&&L&&"values"!==L.name&&(!a&&m?h(I,"name","values"):(_=!0,N=function(){return r(L,this)})),v)if(C={values:w("values"),keys:g?N:w("keys"),entries:w("entries")},T)for(x in C)(k||_||!(x in I))&&f(I,x,C[x]);else n({target:t,proto:!0,forced:k||_},C);return a&&!T||I[b]===N||f(I,b,N,{name:v}),p[t]=N,C}},function(e,t,i){var n=i(3);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,i){var n=i(6),r=i(11),a=i(103);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return r(i),a(n),t?e(i,n):i.__proto__=n,i}}():void 0)},function(e,t,i){var n=i(0),r=String,a=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw a("Can't set "+r(e)+" as a prototype")}},function(e,t){e.exports=function(e,t){return{value:e,done:t}}},function(e,t,i){var n=i(3),r=i(7),a=i(15),o=r("iterator");e.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach(function(e,n){t.delete("b"),i+=n+e}),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host})},function(e,t,i){var n=i(16);e.exports=function(e,t,i){for(var r in t)n(e,r,t[r],i);return e}},function(e,t,i){var n=i(43),r=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw r("Incorrect invocation")}},function(e,t,i){var n=i(6),r=i(25),a=i(21),o=n(n.bind);e.exports=function(e,t){return r(e),void 0===t?e:a?o(e,t):function(){return e.apply(t,arguments)}}},function(e,t,i){var n={};n[i(7)("toStringTag")]="z",e.exports="[object z]"===String(n)},function(e,t,i){var n=i(34),r=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},function(e,t,i){var n=i(12),r=i(25),a=i(11),o=i(47),s=i(64),l=TypeError;e.exports=function(e,t){var i=arguments.length<2?s(e):t;if(r(i))return a(n(i,e));throw l(o(e)+" is not iterable")}},function(e,t){var i=TypeError;e.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},function(e,t,i){var n=i(114),r=Math.floor,a=function(e,t){var i=e.length,l=r(i/2);return i<8?o(e,t):s(e,a(n(e,0,l),t),a(n(e,l),t),t)},o=function(e,t){for(var i,n,r=e.length,a=1;a<r;){for(n=a,i=e[a];n&&t(e[n-1],i)>0;)e[n]=e[--n];n!==a++&&(e[n]=i)}return e},s=function(e,t,i,n){for(var r=t.length,a=i.length,o=0,s=0;o<r||s<a;)e[o+s]=o<r&&s<a?n(t[o],i[s])<=0?t[o++]:i[s++]:o<r?t[o++]:i[s++];return e};e.exports=a},function(e,t,i){var n=i(57),r=i(59),a=i(115),o=Array,s=Math.max;e.exports=function(e,t,i){for(var l=r(e),u=n(t,l),c=n(void 0===i?l:i,l),d=o(s(c-u,0)),h=0;u<c;u++,h++)a(d,h,e[u]);return d.length=h,d}},function(e,t,i){"use strict";var n=i(24),r=i(9),a=i(13);e.exports=function(e,t,i){var o=n(t);o in e?r.f(e,o,a(0,i)):e[o]=i}},function(e,t,i){e.exports=function(){"use strict";var e={};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return e},set exports(t){e=t}});var t,i,n,r,a={},o={get exports(){return a},set exports(e){a=e}},s={},l={get exports(){return s},set exports(e){s=e}};function u(){return t||(t=1,function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(l)),s}var c,d={},h={get exports(){return d},set exports(e){d=e}};function f(){return c||(c=1,(e=h).exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports),d;var e}var v,p,g={},y={get exports(){return g},set exports(e){g=e}},m={},A={get exports(){return m},set exports(e){m=e}},k={},b={get exports(){return k},set exports(e){k=e}};function E(){return v||(v=1,(e=b).exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports),k;var e}var T,S,C={},x={get exports(){return C},set exports(e){C=e}},w={},P={get exports(){return w},set exports(e){w=e}};function _(){return S||(S=1,e=P,t=E(),e.exports=function(e,i){if(e){if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,i):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports),w;var e,t}var I,L,N,M,R,O={},D={get exports(){return O},set exports(e){O=e}},B={},U={get exports(){return B},set exports(e){B=e}},F={},V={get exports(){return F},set exports(e){F=e}},H={},$={get exports(){return H},set exports(e){H=e}};function W(){return N||(N=1,function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}($)),H}var K,z,j,G,q,Y={},Q={get exports(){return Y},set exports(e){Y=e}},X={},J={get exports(){return X},set exports(e){X=e}},Z={},ee={get exports(){return Z},set exports(e){Z=e}},te={},ie={get exports(){return te},set exports(e){te=e}},ne={},re={get exports(){return ne},set exports(e){ne=e}},ae={},oe={get exports(){return ae},set exports(e){ae=e}};function se(){return q||(q=1,function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(oe)),ae}var le,ue,ce,de,he={},fe={get exports(){return he},set exports(e){he=e}},ve={},pe={get exports(){return ve},set exports(e){ve=e}},ge={},ye={get exports(){return ge},set exports(e){ge=e}};var me,Ae,ke,be,Ee,Te={},Se={get exports(){return Te},set exports(e){Te=e}},Ce={},xe={get exports(){return Ce},set exports(e){Ce=e}},we={},Pe={get exports(){return we},set exports(e){we=e}},_e={},Ie={get exports(){return _e},set exports(e){_e=e}},Le={},Ne={get exports(){return Le},set exports(e){Le=e}};function Me(){return be||(be=1,e=Ie,t=u().default,ke||(ke=1,function(e){var t=u().default;e.exports=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(Ne)),i=Le,e.exports=function(e){var n=i(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports),_e;var e,t,i}var Re,Oe,De,Be,Ue,Fe,Ve,He,$e,We={},Ke={get exports(){return We},set exports(e){We=e}},ze={},je={get exports(){return ze},set exports(e){ze=e}},Ge=e,qe=Ge(function(){if(r)return n;r=1;var e=(i||(i=1,function(e){var t=u().default;function i(){e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var n,r={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,i){e[t]=i.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(n){h=function(e,t,i){return e[t]=i}}function f(e,t,i,n){var r=t&&t.prototype instanceof A?t:A,a=Object.create(r.prototype),o=new N(n||[]);return s(a,"_invoke",{value:P(e,i,o)}),a}function v(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var p="suspendedStart",g="executing",y="completed",m={};function A(){}function k(){}function b(){}var E={};h(E,u,function(){return this});var T=Object.getPrototypeOf,S=T&&T(T(M([])));S&&S!==a&&o.call(S,u)&&(E=S);var C=b.prototype=A.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function w(e,i){function n(r,a,s,l){var u=v(e[r],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&o.call(d,"__await")?i.resolve(d.__await).then(function(e){n("next",e,s,l)},function(e){n("throw",e,s,l)}):i.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,l)})}l(u.arg)}var r;s(this,"_invoke",{value:function(e,t){function a(){return new i(function(i,r){n(e,t,i,r)})}return r=r?r.then(a,a):a()}})}function P(e,t,i){var r=p;return function(a,o){if(r===g)throw new Error("Generator is already running");if(r===y){if("throw"===a)throw o;return{value:n,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=_(s,i);if(l){if(l===m)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===p)throw r=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var u=v(e,t,i);if("normal"===u.type){if(r=i.done?y:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=y,i.method="throw",i.arg=u.arg)}}}function _(e,t){var i=t.method,r=e.iterator[i];if(r===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=n,_(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var a=v(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(e){if(e||""===e){var i=e[u];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return k.prototype=b,s(C,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:k,configurable:!0}),k.displayName=h(b,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,d,"GeneratorFunction")),e.prototype=Object.create(C),e},r.awrap=function(e){return{__await:e}},x(w.prototype),h(w.prototype,c,function(){return this}),r.AsyncIterator=w,r.async=function(e,t,i,n,a){void 0===a&&(a=Promise);var o=new w(f(e,t,i,n),a);return r.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(C),h(C,d,"Generator"),h(C,u,function(){return this}),h(C,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=M,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,r){return s.type="throw",s.arg=e,t.next=i,r&&(t.method="next",t.arg=n),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;L(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:M(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),m}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(o)),a)();n=e;try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return n}()),Ye=Ge(f()),Qe=Ge((L||(L=1,function(e){var t=(p||(p=1,function(e){var t=E();e.exports=function(e){if(Array.isArray(e))return t(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(A)),m),i=(T||(T=1,function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(x)),C),n=_(),r=(I||(I=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(D)),O);e.exports=function(e){return t(e)||i(e)||n(e)||r()},e.exports.__esModule=!0,e.exports.default=e.exports}(y)),g)),Xe=Ge((R||(R=1,function(e){var t=(M||(M=1,function(e){var t=W();e.exports=function(e,i){for(;!Object.prototype.hasOwnProperty.call(e,i)&&null!==(e=t(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}(V)),F);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,i,n){var r=t(e,i);if(r){var a=Object.getOwnPropertyDescriptor(r,i);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(U)),B)),Je=Ge((G||(G=1,function(e){var t=(K||(K=1,function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}(J)),X),i=(z||(z=1,function(e){e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a,o,s=[],l=!0,u=!1;try{if(a=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=a.call(i)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports}(ee)),Z),n=_(),r=(j||(j=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(ie)),te);e.exports=function(e,a){return t(e)||i(e,a)||n(e,a)||r()},e.exports.__esModule=!0,e.exports.default=e.exports}(Q)),Y)),Ze=Ge((de||(de=1,function(e){var t=W(),i=se(),n=(le||(le=1,function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports}(fe)),he),r=(ce||(ce=1,function(e){var t=se(),i=(ue||(ue=1,function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}(ye)),ge);function n(r,a,o){return i()?(e.exports=n=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=n=function(e,i,n){var r=[null];r.push.apply(r,i);var a=new(Function.bind.apply(e,r));return n&&t(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(pe)),ve);function a(o){var s="function"==typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!n(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==s){if(s.has(e))return s.get(e);s.set(e,a)}function a(){return r(e,arguments,t(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i(a,e)},e.exports.__esModule=!0,e.exports.default=e.exports,a(o)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(re)),ne)),et=Ge((me||(me=1,function(e){var t=se();e.exports=function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),i&&t(e,i)},e.exports.__esModule=!0,e.exports.default=e.exports}(Se)),Te)),tt=Ge((Ae||(Ae=1,function(e){var t=u().default,i=f();e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(xe)),Ce)),it=Ge(W()),nt=Ge((Ee||(Ee=1,function(e){var t=Me();function i(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t(r.key),r)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(Pe)),we)),rt=Ge((Re||(Re=1,function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(Ke)),We)),at=Ge(u()),ot=Ge((Oe||(Oe=1,function(e){var t=Me();e.exports=function(e,i,n){return(i=t(i))in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}(je)),ze));function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=(0,it.default)(e);if(t){var r=(0,it.default)(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return(0,tt.default)(this,i)}}function lt(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ut(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ut(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}Object.getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");var t=Object.getOwnPropertyDescriptor(e,"__proto__"),i=t?(0,ot.default)({},"__proto__",t):{};return Object.getOwnPropertyNames(e).forEach(function(t){i[t]=Object.getOwnPropertyDescriptor(e,t)}),i};var ct,dt,ht=Object.create,ft=Object.defineProperty,vt=Object.defineProperties,pt=Object.getOwnPropertyDescriptor,gt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertyNames,mt=Object.getOwnPropertySymbols,At=Object.getPrototypeOf,kt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,Et=function(e,t,i){return t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i},Tt=function(e,t){for(var i in t||(t={}))kt.call(t,i)&&Et(e,i,t[i]);if(mt){var n,r=lt(mt(t));try{for(r.s();!(n=r.n()).done;)i=n.value,bt.call(t,i)&&Et(e,i,t[i])}catch(e){r.e(e)}finally{r.f()}}return e},St=function(e,t){return vt(e,gt(t))},Ct=function(e,t){var i={};for(var n in e)kt.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&mt){var r,a=lt(mt(e));try{for(a.s();!(r=a.n()).done;)n=r.value,t.indexOf(n)<0&&bt.call(e,n)&&(i[n]=e[n])}catch(e){a.e(e)}finally{a.f()}}return i},xt=function(e,t){for(var i in t)ft(e,i,{get:t[i],enumerable:!0})},wt=function(e,t,i,n){if(t&&"object"===(0,at.default)(t)||"function"==typeof t){var r,a=lt(yt(t));try{var o=function(){var a=r.value;kt.call(e,a)||a===i||ft(e,a,{get:function(){return t[a]},enumerable:!(n=pt(t,a))||n.enumerable})};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}}return e},Pt=function(e,t,i){return i=null!=e?ht(At(e)):{},wt(!t&&e&&e.__esModule?i:ft(i,"default",{value:e,enumerable:!0}),e)},_t=function(e,t,i,n){for(var r,a=n>1?void 0:n?pt(t,i):t,o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n?r(t,i,a):r(a))||a);return n&&a&&ft(t,i,a),a},It=function(e,t,i){return new Promise(function(n,r){var a=function(e){try{s(i.next(e))}catch(e){r(e)}},o=function(e){try{s(i.throw(e))}catch(e){r(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(a,o)};s((i=i.apply(e,t)).next())})},Lt=(ct={"../node_modules/screenfull/dist/screenfull.js":function(e,t){var i,n,r,a,o;i="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==t&&t.exports,r=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=t.length,a={};n<r;n++)if((e=t[n])&&e[1]in i){for(n=0;n<e.length;n++)a[t[0][n]]=e[n];return a}return!1}(),a={change:r.fullscreenchange,error:r.fullscreenerror},o={request:function(e,t){return new Promise(function(n,a){var o=function(){this.off("change",o),n()}.bind(this);this.on("change",o);var s=(e=e||i.documentElement)[r.requestFullscreen](t);s instanceof Promise&&s.then(o).catch(a)}.bind(this))},exit:function(){return new Promise(function(e,t){if(this.isFullscreen){var n=function(){this.off("change",n),e()}.bind(this);this.on("change",n);var a=i[r.exitFullscreen]();a instanceof Promise&&a.then(n).catch(t)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var n=a[e];n&&i.addEventListener(n,t,!1)},off:function(e,t){var n=a[e];n&&i.removeEventListener(n,t,!1)},raw:r},r?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(i[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return i[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(i[r.fullscreenEnabled])}}}),n?t.exports=o:window.screenfull=o):n?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}},function(){return dt||(0,ct[yt(ct)[0]])((dt={exports:{}}).exports,dt),dt.exports}),Nt={};xt(Nt,{AccessibilityAction:function(){return Vr},ActiveState:function(){return Hr},AdBreakType:function(){return $r},AdTechnology:function(){return Wr},AdapterRole:function(){return Kr},ApiMetric:function(){return zr},AudioTrackType:function(){return jr},Autoplay:function(){return Gr},AviaHookType:function(){return di},Browser:function(){return Ln},CoreEvent:function(){return ai},Device:function(){return Gn},DrmKeySystemAvailability:function(){return qr},DrmRobustness:function(){return Yr},DrmType:function(){return Na},Emitter:function(){return li},ErrorCategory:function(){return pi},ErrorCode:function(){return gi},ErrorMessage:function(){return mi},FileExtensionToMimeType:function(){return cn},HTML5:function(){return ia},HdcpStatus:function(){return Qr},Header:function(){return Xr},HookError:function(){return ki},HookType:function(){return ta},InvalidArgumentError:function(){return ga},KeyboardScope:function(){return na},LocalizationId:function(){return ra},LocalizedLanguage:function(){return aa},LogLevel:function(){return Ot},Logger:function(){return ci},LoggerEvent:function(){return Rt},Measurement:function(){return hi},Metric:function(){return Ur},MetricType:function(){return oa},MimeType:function(){return un},Os:function(){return qn},PerformanceMode:function(){return sa},Platform:function(){return Yn},PlaybackAdapterBase:function(){return Br},PlaybackState:function(){return la},PlayerError:function(){return Ai},PlayerEvent:function(){return Jr},PlayerHookType:function(){return yi},PluginError:function(){return ya},PluginPriority:function(){return ua},QualityCategory:function(){return Gi},QualityLabel:function(){return ca},QualityMode:function(){return da},QueryString:function(){return gn},RequestCredentials:function(){return yn},RequestMethod:function(){return kn},RequestObjectType:function(){return ha},ResponseType:function(){return mn},StreamType:function(){return fa},TextTrackEvent:function(){return xi},TextTrackKind:function(){return wi},TextTrackMode:function(){return vr},Timer:function(){return Ra},UiMetric:function(){return va},Util:function(){return La},VideoFormat:function(){return pa},WILDCARD:function(){return pr},applyHook:function(){return ws},buildInfo:function(){return Fr},checkPolyfills:function(){return Es},cmcd:function(){return Nn},createResourceConfig:function(){return Ns},createThumbnailStyles:function(){return Ia},createVideoPlayer:function(){return _s},defineHook:function(){return Ss},eventsToPromise:function(){return Mi},getAutoplayCapabilities:function(){return Rs},getDeviceCapabilities:function(){return Ps},getSystemInfo:function(){return Ms},getVideoPlayerIds:function(){return Ts},id3:function(){return Sr},queue:function(){return Ni},registerHook:function(){return Cs},removeHook:function(){return xs},removeVideoPlayer:function(){return Ls},renderThumbnail:function(){return Aa},request:function(){return Sn},retrieveVideoPlayer:function(){return Is},waitFor:function(){return Pi},waitForEvent:function(){return Ii},waitForTime:function(){return Li},waitUntil:function(){return _i}});var Mt=function(e){return wt(ft({},"__esModule",{value:!0}),e)}(Nt),Rt=function(e){return e.LOG_EVENT="logevent",e.TIME_EVENT="logtimeevent",e.TIME_END_EVENT="logtimeendevent",e}(Rt||{}),Ot=function(e){return e.OFF="off",e.ERROR="error",e.WARN="warn",e.INFO="info",e.DEBUG="debug",e}(Ot||{}),Dt={};xt(Dt,{camelToDash:function(){return Gt},formatTime:function(){return ri},getNumLines:function(){return Xt},hmsToSec:function(){return ni},msToHms:function(){return ti},padStart:function(){return Zt},secToHms:function(){return ei},template:function(){return Jt},uid8:function(){return qt},uuid:function(){return Yt},xmlToJson:function(){return Qt},zeroFill:function(){return ii}});var Bt={};function Ut(e){return null==e||Array.isArray(e)&&0===e.length||Kt(e)&&0===Object.keys(e).length||Vt(e)&&""===e}function Ft(e){return"function"==typeof e}function Vt(e){return"string"==typeof e}function Ht(e){return void 0===e}function $t(e){return"number"==typeof e}function Wt(e){return"boolean"==typeof e}function Kt(e){return"object"===(0,at.default)(e)}xt(Bt,{isBoolean:function(){return Wt},isEmpty:function(){return Ut},isFunction:function(){return Ft},isNumber:function(){return $t},isObject:function(){return Kt},isString:function(){return Vt},isUndefined:function(){return Ht}});var zt=/([a-z\d])([A-Z])/g,jt=/\W+/g;function Gt(e){return e.replace(jt,"-").replace(zt,"$1-$2").toLowerCase()}function qt(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()}function Yt(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}function Qt(e){var t={};if(1===e.nodeType&&e.attributes.length>0)for(var i=0,n=e.attributes.length;i<n;i++){var r=e.attributes.item(i);t[r.nodeName]=r.nodeValue}else 3===e.nodeType&&(t=e.nodeValue);if("p"===e.nodeName&&(t.text="",e.childNodes.forEach(function(e){if("metadata"!==e.nodeName){var i=(new XMLSerializer).serializeToString(e);1===e.nodeType&&(t.text+="br"===e.tagName?"\n":i),3===e.nodeType&&(t.text+=i)}})),e.hasChildNodes())for(var a=0,o=e.childNodes.length;a<o;a++){var s=e.childNodes.item(a),l=s.nodeName;if(Ht(t[l]))t[l]=Qt(s);else{if(Ht(t[l].push)){var u=t[l];t[l]=[],t[l].push(u)}t[l].push(Qt(s))}}return t}function Xt(e){return e&&(e.match(/\n/g)||[]).length+1}function Jt(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"{{",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"}}";if(!e)return e;var r=new RegExp("".concat(i,"((?:(?!(").concat(i,"|").concat(n,")).)+)").concat(n),"g");return e.replace(r,function(e,i){return Ht(null==t?void 0:t[i])?e:t[i]})}function Zt(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";t|=0;var n=e.length;return n>t?e:((t-=n)>i.length&&(i+=i.repeat(t/i.length)),i.slice(0,t)+e)}function ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:61;if(null==e||isNaN(e))return"00:00";var i=ii((e|=0)%60);return i=ii((e=e/60|0)%60)+":"+i,(e=e/60|0)>0&&(i=ii(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i}function ti(e){return ri(new Date(e),"HH:mm:ss:sss",{offset:0})}function ii(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Zt(String(e),t,"0")}function ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(!e)return NaN;var i=e.split(":"),n=0;if(4===i.length)n=parseInt(i.pop())/t;else if(3===i.length&&(i[2]=i[2].replace(",","."),-1!==i[2].indexOf("."))){var r=i[2].split(".");(null!=r?r.length:void 0)>1&&(i[2]=r[0],n=parseInt(r[1])/1e3)}for(var a=parseInt(i.pop());i.length>0;)a+=Math.pow(60,i.length)*parseInt(i.shift());return a+n}function ri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm:ss A",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{timezone:"",offset:-(new Date).getTimezoneOffset()/60};if(null!=i.offset&&0!==i.offset&&(e=new Date(e.getTime()+Math.round(60*i.offset*60*1e3))),isNaN(e.getTime()))return"";var n=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),o=e.getUTCMilliseconds(),s=n%12||12,l=n<12?"am":"pm",u={hh:ii(s),h:s,HH:ii(n),H:n,mm:ii(r),m:r,sss:ii(o,3),ss:ii(a),s:a,a:l,A:l.toUpperCase(),z:i.timezone};for(var c in u)t=t.replace(c,u[c]);return t}var ai=(0,nt.default)(function e(t,i,n){(0,rt.default)(this,e),this.timeStamp=Date.now(),this.detail=n,this.target=i,this.type=t}),oi=(0,nt.default)(function e(t,i){(0,rt.default)(this,e),this.value=t,this.next=i}),si=function(){function e(){(0,rt.default)(this,e),this.head=null,this.tail=null}return(0,nt.default)(e,[{key:"empty",get:function(){return null==this.head}},{key:"forEach",value:function(e){for(var t=this.head;t;)e(t.value),t=t.next}},{key:"add",value:function(e){var t=new oi(e);null==this.head?(this.head=t,this.head.next=null,this.tail=null):null==this.tail?this.head.next=this.tail=t:this.tail.next=this.tail=t}},{key:"has",value:function(e){for(var t=this.head;t;){if(t.value===e)return!0;t=t.next}return!1}},{key:"delete",value:function(e){for(var t=null,i=this.head;i;){if(i.value===e)return t&&(t.next=i.next),i===this.head?this.head=i.next:i===this.tail&&(this.tail=t!==this.head?t:null),!0;t=i,i=i.next}return!1}},{key:"clear",value:function(){for(var e,t=this.head;t;)e=t.next,t.value=t.next=null,t=e;this.head=this.tail=null}}]),e}(),li=function(){function e(t,i){(0,rt.default)(this,e),this.target=i||this,this.opts=t||{},this.eventMap={};var n=this.opts;for(var r in n)if(Ft(n[r])&&/^on[A-Z]/.test(r)){var a=r.charAt(2).toLowerCase()+r.substring(3);this.on(a,n[r]),delete this.opts[r]}}return(0,nt.default)(e,[{key:"destroy",value:function(){var e;if(this.opts&&(this.opts=null),this.offAll(null),this.eventMap){for(e in this.eventMap)delete this.eventMap[e];this.eventMap=null}}},{key:"on",value:function(e,t){if(this.eventMap&&e&&Ft(t)){var i=this.eventMap[e]||(this.eventMap[e]=new si);i.has(t)||i.add(t)}}},{key:"once",value:function(e,t){var i=this;this.eventMap&&e&&Ft(t)&&this.on(e,function n(r){i.off(e,n),t(r)})}},{key:"off",value:function(e,t){!t&&this.offAll(e),t&&this.remove(e,t)}},{key:"offAll",value:function(e){if(this.eventMap){var t=this.eventMap;if(e)this.remove(e,null);else for(var i in t)this.remove(i,null)}}},{key:"hasListenerFor",value:function(e){return!(!this.eventMap||!this.eventMap[e]||this.eventMap[e].empty)}},{key:"emit",value:function(e,t){var i=new ai(e,this.target||this,t);this.dispatchEvt(i)}},{key:"dispatchEvt",value:function(e){this.eventMap&&this.eventMap[e.type]&&this.eventMap[e.type].forEach(function(t){return t(e)})}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.eventMap&&this.eventMap[e]&&(t?this.eventMap[e].delete(t):this.eventMap[e].clear())}}]),e}(),ui=(De={},(0,ot.default)(De,"off",0),(0,ot.default)(De,"error",100),(0,ot.default)(De,"warn",200),(0,ot.default)(De,"info",300),(0,ot.default)(De,"debug",400),De),ci=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,rt.default)(this,i),(n=t.call(this,e)).useConsole=!1,n.pStartTime={},n.useConsole=Kt(console),n.id=e.id||qt(),n.tzero=Date.now(),n.logLevel=Ut(n.opts.logLevel)?"off":n.opts.logLevel,n}return(0,nt.default)(i,[{key:"logLevel",get:function(){return this.pLogLevel},set:function(e){this.pLogLevel=e}},{key:"assert",value:function(e,t){e||this.error('Assertion failed! - "'.concat(t||"",'"'))}},{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var a=0,o=n.length;a<o;a++)this.emit("logevent",this.assembleEvent(n[a],e));this.shouldLog(e)&&(n.unshift(this.getStamp()),(t=console).log.apply(t,n))}},{key:"dir",value:function(e,t,i){var n=i||"Unnamed Object";this.emit("logevent",this.assembleEvent(t,e,n)),this.shouldLog(e)&&(console.log(this.getStamp()+"Object: ".concat(n)),console.dir(t))}},{key:"error",value:function(e){this.emit("logevent",this.assembleEvent(e,"error")),this.shouldLog("error")&&console.error(this.getStamp()+e)}},{key:"warn",value:function(e){this.emit("logevent",this.assembleEvent(e,"warn")),this.shouldLog("warn")&&console.warn(this.getStamp()+e)}},{key:"time",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:performance.now();this.pStartTime[e]?this.warn("Timer ".concat(e," already exists")):(this.pStartTime[e]=t,this.emit("logtimeevent",this.assembleEvent({startTime:t},"info",e)))}},{key:"timeEnd",value:function(e){if(this.pStartTime[e]){var t=this.pStartTime[e];delete this.pStartTime[e];var i=performance.now()-t;this.emit("logtimeendevent",this.assembleEvent({startTime:t,duration:i},"info",e)),this.shouldLog("info")&&console.log("".concat(this.getStamp()," Timer: ").concat(e," ").concat(Math.round(i),"ms"))}else this.warn("Timer ".concat(e," does not exist"))}},{key:"assembleEvent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{id:this.id,item:e,level:t,label:i}}},{key:"shouldLog",value:function(e){return this.useConsole&&ui[this.pLogLevel]>=ui[e]}},{key:"getStamp",value:function(){return"[".concat(this.id+"]  "+ti(Date.now()-this.tzero)," > ")}}],[{key:"error",value:function(e){console&&console.error(e)}},{key:"warn",value:function(e){console&&console.warn(e)}},{key:"log",value:function(e){console&&console.log(e)}},{key:"deprecated",value:function(e){i.deprecatedCounts[e]>=i.maxDeprecatedWarnings||(i.warn(e),i.deprecatedCounts[e]=(i.deprecatedCounts[e]||0)+1)}}]),i}(li);ci.maxDeprecatedWarnings=1,ci.deprecatedCounts={};var di=function(e){return e.CREATE_PLAYER="createplayer",e.REMOVE_PLAYER="removeplayer",e.DEVICE_CAPABILITIES="devicecapabilities",e.SCRIPT_LOAD="scriptload",e}(di||{}),hi=function(e){return e.PLAYER_CREATION="player-creation",e.RESOURCE_ATTACHMENT="resource-attachment",e.AD_ADAPTER_CREATION="ad-adapter-creation",e.AD_RESOURCE_CREATION="ad-resource-creation",e.PLAYBACK_ADAPTER_CREATION="playback-adapter-creation",e.RESOURCE_LOAD="resource-load",e.RESOURCE_PLAYBACK="resource-playback",e.FIRST_FRAME="first-frame",e}(hi||{}),fi=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this,e)).cause=n,r}return(0,nt.default)(i)}((0,Ze.default)(Error));function vi(e,t){if(!e)throw new fi(t)}var pi=function(e){return e.AD="Ad",e.RESOURCE="Resource",e.PLAYBACK="Playback",e.VIDEO_START="Video start",e.HOOK="Hook",e.API="API",e.EVENT="Event",e.PLUGIN="Plugin",e}(pi||{}),gi=function(e){return e.INVALID_RESOURCE_FORMAT="1000",e.RESOURCE_UNAVAILABLE="1100",e.GEO_LOCATION_BLOCKED="1101",e.DOMAIN_BLOCKED="1102",e.IP_BLOCKED="1103",e.SATELLITE_PROVIDER_BLOCKED="1104",e.EXPIRED="1105",e.SELECTOR_CALL_ERROR="1106",e.IMA_SDK_MISSING="1200",e.DAI_SDK_MISSING="1201",e.DASH_SDK_MISSING="1202",e.HLS_SDK_MISSING="1203",e.SHAKA_SDK_MISSING="1204",e.TWITCH_SDK_MISSING="1205",e.FW_SDK_MISSING="1206",e.HLSJS_PARSE_ERROR="2101",e.DASHJS_PARSE_ERROR="2102",e.SHAKA_PARSE_ERROR="2103",e.TWITCH_PARSE_ERROR="2104",e.WEBMAF_START_ERROR="2105",e.USER_GESTURE_REQUIRED="2300",e.HTML5_NETWORK_ERROR="3001",e.HLSJS_NETWORK_ERROR="3002",e.DASHJS_NETWORK_ERROR="3003",e.WEBMAF_NETWORK_ERROR="3004",e.SHAKA_NETWORK_ERROR="3005",e.TWITCH_NETWORK_ERROR="3006",e.MEDIA_ABORTED="3100",e.HTML5_SRC_NOT_SUPPORTED="3101",e.HLSJS_SRC_NOT_SUPPORTED="3102",e.DASHJS_SRC_NOT_SUPPORTED="3103",e.SHAKA_SRC_NOT_SUPPORTED="3105",e.TWITCH_SRC_NOT_SUPPORTED="3106",e.HTML5_MEDIA_ERROR="3200",e.HLSJS_MEDIA_ERROR="3201",e.HLSJS_MUX_ERROR="3202",e.DASHJS_MEDIA_ERROR="3203",e.SHAKA_MEDIA_ERROR="3205",e.TWITCH_MEDIA_ERROR="3206",e.FAIRPLAY_APP_CERT_ERROR="3300",e.FAIRPLAY_LIC_ERROR="3301",e.DASHJS_DRM_ERROR="3302",e.SHAKA_DRM_ERROR="3304",e.UNSPECIFIED_VIDEO_PLAYBACK_ERROR="3400",e.UNSPECIFIED_HLSJS_ERROR="3401",e.UNSPECIFIED_DASHJS_ERROR="3402",e.UNSPECIFIED_SHAKA_ERROR="3404",e.UNSPECIFIED_TWITCH_ERROR="3405",e.AD_STALLED="4000",e.IMA_INIT_FAILURE="4100",e.IMA_AD_ERROR="4101",e.DAI_DATA_ERROR="4200",e.DAI_NETWORK_ERROR="4201",e.AD_BLOCKING_DETECTED="4300",e.AD_ADAPTER_ERROR="4400",e.ADAPTER_NOT_FOUND="5000",e.HOOK_ERROR="6000",e.EVENT_HOOK="6001",e.AD_BREAK_HOOK="6002",e.AD_HOOK="6003",e.ATTACH_RESOURCE_HOOK="6004",e.REQUEST_HOOK="6005",e.RESPONSE_HOOK="6006",e.CREATE_PLAYER_HOOK="6007",e.REMOVE_PLAYER_HOOK="6008",e.DEVICE_CAPABILITIES="6009",e.SCRIPT_LOAD="6010",e.PLUGIN_ERROR="7000",e.PLUGIN_FACTORY_ERROR="7001",e.PLUGIN_ID_ERROR="7002",e.PLUGIN_LOAD_ERROR="7003",e.INVALID_ARGUMENT="9000",e.UNEXPECTED_CONDITION="9999",e}(gi||{}),yi=function(e){return e.EVENT="event",e.AD_BREAK="adbreak",e.AD="ad",e.ATTACH_RESOURCE="attachresource",e.REQUEST="request",e.RESPONSE="response",e.SEEK="seek",e}(yi||{}),mi=function(e){return e.ABR_UNAVAILABLE="Single bitrate stream detected, adaptive bitrate system is unavailable",e.ABR_MANUAL_SWITCHING_REACHED_LOWER_BOUNDS="You have reached the lowest available quality for this presentation.",e.ABR_MANUAL_SWITCHING_REACHED_UPPER_BOUNDS="You have reached the highest available quality for this presentation at this screen size",e.ABR_MIN_BITRATE_RESTRICTION_UNAVAILABLE="Min bitrate restrictions are not offered with this streaming library",e.AD_STALLED="Stalled ad detected",e.ADAPTER_UNAVAILABLE="Unable to play the requested resource - mediaUrl not recognized",e.ADAPTER_LIB_UNAVAILABLE="Unable to play the requested resource - External library is not loading",e.ADAPTER_NOT_FOUND="Unable to find an adapter for the requested resource",e.API_INVALID_ARG="API method called with missing or invalid param",e.CAP_LEVEL_MAXBITRATE="Max bitrate setting will be ignored since capQualityToPlayerSize is enabled",e.CONTENT_PLAYBACK_SETTING_IGNORED="This API is only available after the CONTENT_START event has been dispatched. This setting will be ignored.",e.DAI_MISSING_ASSET_URL="Unexpected condition = valid assetUrl not found in DAI stream data",e.DAI_SDK_UNAVAILABLE="A DAI SDK is required for playback, but is not found",e.ENVIRONMENT_NOT_SUPPORTED='Unable to locate a global "window" object or suitable alternative',e.FAIRPLAY_LICENSE_ERROR="Issue with fairplay DRM and the provided license acquisition url",e.FAIRPLAY_APP_CERT_ERROR="Issue creating a fairplay keysession with the provided application certificate",e.FAIRPLAY_NO_CONTENT_ID="A valid content or asset id was not detected when creating fairplay drm session",e.FAIRPLAY_WEBKIT_ERROR="Issue with webkit and keysession creations while using fairplay drm.",e.FATAL_PLAYBACK_MEDIA_ERROR="Fatal media error, no option for recovery",e.NONFATAL_PLAYBACK_MEDIA_ERROR="Nonfatal media error",e.FATAL_PLAYBACK_NETWORK_ERROR="Fatal network error, no option for recovery",e.NONFATAL_PLAYBACK_NETWORK_ERROR="Nonfatal network error",e.IMA_SDK_MISSING="IMA SDK not found.",e.INVALID_RESOURCE="Resource configuration appears to be invalid",e.MANUAL_ABR_SWITCHING_UNAVAILABLE="Native HTML5 Video does not allow manual bitrate switching",e.PAUSING_LINEAR_LIVE_STREAM_NOT_ALLOWED="StreamType.LIVE is detected. Redirecting to the stop method since a DVR window is not detected.",e.PLUGIN_LOAD_ERROR="Unable to load plugin",e.PLUGIN_FACTORY_ERROR="Invalid plugin factory",e.PLUGIN_ID_ERROR="Invalid plugin ID",e.RESOURCE_MISSING="Resource missing",e.RESOURCE_NOT_SUPPORTED="Resource is not recognized or is currently unsupported",e.RETRY_PLAYBACK_MEDIA_ERROR="Media error detected",e.RETRY_PLAYBACK_NETWORK_ERROR="Network error detected",e.UNEXPECTED_CONDITION="An unexpected condition was encountered",e.UNSPECIFIED_ERROR="Unspecified error",e.VIDEO_PLAYBACK_UNAVAILABLE="Unable to locate a video element or suitable alternative",e.WEBKIT_KEY_ADDED_SUCCESS="Webkit key added successfully",e.WEBKIT_MEDIA_KEYS_NOT_SUPPORTED="WebKitMediaKeys are not supported for this type of media on this user agent",e}(mi||{}),Ai=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n,r){var a,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;return(0,rt.default)(this,i),(a=t.call(this,n,r)).code=e,a.fatal=o,a.category=s,a.name="PlayerError",a}return(0,nt.default)(i,null,[{key:"eventToError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Event";if(e instanceof Error||!e.detail&&!e.error)return e;var n=e.detail;if(n instanceof Error)return n;var r=e.error||n.error;return r instanceof Error?r:r.code&&r.message?new i(r.code,r.message,r.cause||e,!0,t):new i("9999","An unexpected condition was encountered",e,!0,t)}}]),i}(fi),ki=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n,r){var a;return(0,rt.default)(this,i),(a=t.call(this,i.getErrorCode(e),n,r,!0,"Hook")).type=e,a.name="HookError",a}return(0,nt.default)(i,null,[{key:"getErrorCode",value:function(e){switch(e){case"createplayer":return"6007";case"removeplayer":return"6008";case"devicecapabilities":return"6009";case"scriptload":return"6010";case"ad":return"6003";case"adbreak":return"6002";case"attachresource":return"6004";case"event":return"6001";case"request":return"6005";case"response":return"6006";default:return"6000"}}}]),i}(Ai),bi=function(){function e(t){(0,rt.default)(this,e),this.hookMap={},this.hookConfig=null,this.hookConfig=t}return(0,nt.default)(e,[{key:"destroy",value:function(){this.hookMap=null,this.hookConfig=null}},{key:"hasHook",value:function(e){var t=this.hookMap[e];return(null==t?void 0:t.length)>0}},{key:"defineHook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{multiple:!0};vi(!this.hookConfig[e],"Hook type already exists: ".concat(e)),this.hookConfig[e]=t}},{key:"validateHookType",value:function(e){vi(e in this.hookConfig,"Invalid hook type: ".concat(e))}},{key:"registerHook",value:function(e,t){var i;this.validateHookType(e),this.hookMap[e]||(this.hookMap[e]=[]),!1===(null==(i=this.hookConfig[e])?void 0:i.multiple)&&this.hookMap[e].length||this.hookMap[e].includes(t)||this.hookMap[e].push(t)}},{key:"removeHook",value:function(e,t){this.validateHookType(e),this.hookMap[e]&&(this.hookMap[e]=this.hookMap[e].filter(function(e){return e!==t}))}},{key:"applyHook",value:function(e,t,i){return It(this,null,qe.default.mark(function n(){var r,a,o,s,l,u=this;return qe.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((a=null==(r=this.hookMap)?void 0:r[e])&&0!==a.length){n.next=3;break}return n.abrupt("return",t);case 3:return o=!1,s=function(){return o=!0},l=function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return It(u,null,qe.default.mark(function l(){var u,c;return qe.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(r>=a.length)){l.next=2;break}return l.abrupt("return",n);case 2:if("function"==typeof(u=a[r])){l.next=5;break}throw new ki(e,"Hook must be a valid function");case 5:return c={type:e,value:n,metadata:i,cancel:s},l.prev=6,l.next=9,u(c);case 9:l.next=14;break;case 11:throw l.prev=11,l.t0=l.catch(6),new ki(e,l.t0.toString(),l.t0);case 14:return l.abrupt("return",o?null:t(c.value,++r));case 15:case"end":return l.stop()}},l,null,[[6,11]])}))},n.abrupt("return",l(t));case 7:case"end":return n.stop()}},n,this)}))}}]),e}(),Ei=(Be={},(0,ot.default)(Be,"event",{multiple:!0}),(0,ot.default)(Be,"adbreak",{multiple:!1}),(0,ot.default)(Be,"ad",{multiple:!1}),(0,ot.default)(Be,"attachresource",{multiple:!0}),(0,ot.default)(Be,"request",{multiple:!0}),(0,ot.default)(Be,"response",{multiple:!0}),(0,ot.default)(Be,"seek",{multiple:!0}),Be),Ti=St(Tt({},Ei),(Ue={},(0,ot.default)(Ue,"createplayer",{multiple:!0}),(0,ot.default)(Ue,"removeplayer",{multiple:!0}),(0,ot.default)(Ue,"devicecapabilities",{multiple:!0}),(0,ot.default)(Ue,"scriptload",{multiple:!0}),Ue)),Si={};xt(Si,{AccessibilityAction:function(){return Vr},ActiveState:function(){return Hr},AdBreakType:function(){return $r},AdTechnology:function(){return Wr},AdapterRole:function(){return Kr},ApiMetric:function(){return zr},AudioTrackType:function(){return jr},Autoplay:function(){return Gr},AviaHookType:function(){return di},Browser:function(){return Ln},CoreEvent:function(){return ai},Device:function(){return Gn},DrmKeySystemAvailability:function(){return qr},DrmRobustness:function(){return Yr},DrmType:function(){return Na},Emitter:function(){return li},ErrorCategory:function(){return pi},ErrorCode:function(){return gi},ErrorMessage:function(){return mi},FileExtensionToMimeType:function(){return cn},HTML5:function(){return ia},HdcpStatus:function(){return Qr},Header:function(){return Xr},HookError:function(){return ki},HookType:function(){return ta},InvalidArgumentError:function(){return ga},KeyboardScope:function(){return na},LocalizationId:function(){return ra},LocalizedLanguage:function(){return aa},LogLevel:function(){return Ot},Logger:function(){return ci},LoggerEvent:function(){return Rt},Measurement:function(){return hi},Metric:function(){return Ur},MetricType:function(){return oa},MimeType:function(){return un},Os:function(){return qn},PerformanceMode:function(){return sa},Platform:function(){return Yn},PlaybackAdapterBase:function(){return Br},PlaybackState:function(){return la},PlayerError:function(){return Ai},PlayerEvent:function(){return Jr},PlayerHookType:function(){return yi},PluginError:function(){return ya},PluginPriority:function(){return ua},QualityCategory:function(){return Gi},QualityLabel:function(){return ca},QualityMode:function(){return da},QueryString:function(){return gn},RequestCredentials:function(){return yn},RequestMethod:function(){return kn},RequestObjectType:function(){return ha},ResponseType:function(){return mn},StreamType:function(){return fa},TextTrackEvent:function(){return xi},TextTrackKind:function(){return wi},TextTrackMode:function(){return vr},Timer:function(){return Ra},UiMetric:function(){return va},Util:function(){return La},VideoFormat:function(){return pa},WILDCARD:function(){return pr},buildInfo:function(){return Fr},cmcd:function(){return Nn},createThumbnailStyles:function(){return Ia},eventsToPromise:function(){return Mi},id3:function(){return Sr},queue:function(){return Ni},renderThumbnail:function(){return Aa},request:function(){return Sn},waitFor:function(){return Pi},waitForEvent:function(){return Ii},waitForTime:function(){return Li},waitUntil:function(){return _i}});var Ci=(0,nt.default)(function e(){(0,rt.default)(this,e)});Ci.blankVideoUrl="https:/avia.cbsivideo.com/h5/blanks/uvp_blank.mp4",Ci.blankDataUrl="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",Ci.messages=mi;var xi=function(e){return e.CUE_CHANGE="cuechange",e.ADD_TRACK="addtrack",e.CHANGE="change",e}(xi||{}),wi=function(e){return e.CAPTIONS="captions",e.SUBTITLES="subtitles",e.DESCRIPTIONS="descriptions",e.CHAPTERS="chapters",e.METADATA="metadata",e.FORCED="forced",e}(wi||{});function Pi(e){return new Promise(function(t){return setTimeout(t,e)})}function _i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return new Promise(function(i,n){var r=setInterval(function(){e()&&(clearInterval(r),i())},t)})}function Ii(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;return"number"==typeof i&&(n=i),new Promise(function(r,a){var o,s=[],l=function(){return s.forEach(function(e){return e()})},u=function(t,i){var n=e.on?"on":"addEventListener",r=e.off?"off":"removeEventListener",a=function(e,i){clearTimeout(o),l(),t(i||e)};e[n](i,a),s.push(function(){return e[r](i,a)})};u(r,t),"string"==typeof i&&u(function(e){return a(Ai.eventToError(e))},i),n>-1&&(o=setTimeout(function(){l(),a(new Error("timeout"))},n))})}function Li(e,t,i){return i||(i=e instanceof HTMLVideoElement?"currentTime":"contentTime"),_i(function(){return e[i]>=t})}function Ni(e){var t,i=!1,n=!1;return{run:function(r){return It(this,null,qe.default.mark(function a(){var o,s;return qe.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=!0,o=r,s=0;case 3:if(!(s<e.length)){a.next=13;break}return t=e[s](o),a.next=7,t;case 7:if(o=a.sent,!i){a.next=10;break}return a.abrupt("break",13);case 10:s++,a.next=3;break;case 13:return t=null,n=!1,a.abrupt("return",o);case 16:case"end":return a.stop()}},a)}))},get running(){return n},cancel:function(){return It(this,null,qe.default.mark(function e(){return qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=!0,e.next=3,t;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))}}}function Mi(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return new Promise(function(n,r){var a,o=[],s=function(){return o.forEach(function(e){return e()})},l=function(e){return function(t){var i=t.target,n=t.events,r=i,l=r.on?"on":"addEventListener",u=r.off?"off":"removeEventListener",c=function(t,i){clearTimeout(a),s(),e(i||t)};n.forEach(function(e){r[l](e,c),o.push(function(){return r[u](e,c)})})}};e.forEach(l(n)),t.forEach(l(r)),i>-1&&(a=setTimeout(function(){s(),r(new Error("timeout"))},i))})}var Ri={};function Oi(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function Di(e,t,i){return Math.max(t,Math.min(i,e))}function Bi(e,t,i){return $t(e)&&e>=t&&e<=i}function Ui(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(e-t)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-n)/(i-t)+n}xt(Ri,{clampValue:function(){return Di},inRange:function(){return Bi},mapToRange:function(){return Ui},roundTo:function(){return Oi}});var Fi={};function Vi(e){return Object.keys(e).reduce(function(t,i,n){return t[n]=e[i],t},[])}function Hi(e){return Object.keys(e).reduce(function(t,i,n){return t[n]=[i,e[i]],t},[])}function $i(e){return e.reduce(function(e,t){var i=(0,Je.default)(t,2),n=i[0],r=i[1];return e[n]=r,e},{})}function Wi(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Array.isArray(e)?e.map(function(e){return Wi(e,t)}):Object.assign({},e);return t?Object.freeze(i):i}function Ki(e){return Array.isArray(e)&&e.forEach(function(e){return Ki(e)}),Object.freeze(e)}function zi(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[0];return t.slice(1).reduce(function(e,t){return function e(t,i){return null==t?i:(null==i||Object.getOwnPropertyNames(i).forEach(function(n){var r=i[n],a=t[n],o=(0,at.default)(r);"undefined"!==o&&(Array.isArray(r)?t[n]=r.slice():null==a&&"object"===o&&null!=r?t[n]=e({},r):null!=a&&Kt(a)?"object"===o&&(t[n]=e(a,r)):t[n]=r)}),t)}(e,t)},n)}xt(Fi,{clone:function(){return Wi},entries:function(){return Hi},freeze:function(){return Ki},fromEntries:function(){return $i},merge:function(){return zi},values:function(){return Vi}});var ji={};xt(ji,{QualityMap:function(){return qi},getMaxBitrateIndex:function(){return nn},getMaxHeightForQualityCategory:function(){return Xi},getMaxIndexForHeight:function(){return Ji},getMinAndMaxValuesForCategory:function(){return Yi},getMinBitrateIndex:function(){return tn},getQualityCategoryForVideoHeight:function(){return Qi},normalizeQuality:function(){return en},processQuality:function(){return Zi},toKbits:function(){return on},validateQualities:function(){return an},validateQuality:function(){return rn}});var Gi=function(e){return e.AUTO="AUTO",e.SD="SD",e.HD="HD",e.UHD="UHD",e.UHD_4K="UHD 4K",e.UHD_8K="UHD 8K",e}(Gi||{}),qi=(Fe={},(0,ot.default)(Fe,"UHD 8K",4320),(0,ot.default)(Fe,"UHD 4K",2160),(0,ot.default)(Fe,"UHD",1440),(0,ot.default)(Fe,"HD",720),(0,ot.default)(Fe,"SD",0),Fe);function Yi(e,t){var i=1/0,n=0,r=1/0,a=0;return e.forEach(function(e){e.category.indexOf(t)>=0&&(n=Math.max(n,e.index),i=Math.min(i,e.index),a=Math.max(a,e.bitrate),r=Math.min(r,e.bitrate))}),{maxIndex:n,minIndex:i,minBitrate:r,maxBitrate:a}}function Qi(e){var t;return(null==(t=Hi(qi).find(function(t){return e>=t[1]}))?void 0:t[0])||"SD"}function Xi(e){if(!e||"AUTO"===e)return 1/0;var t=Hi(qi).find(function(t,i,n){var r;return(null==(r=n[i+1])?void 0:r[0])===e});return(null==t?void 0:t[1])-1||1/0}function Ji(e,t){return e.reduce(function(i,n,r){if(n.height<=t){var a=e[i];(isNaN(i)||n.height>a.height||n.height===a.height&&n.bitrate>a.bitrate)&&(i=r)}return i},NaN)}function Zi(e){var t=["".concat(Qi(e.height)),"".concat(e.height,"p"),"".concat(Math.round(e.bitrate/1e3)," kbps")];return St(Tt({},e),{category:t})}function en(e,t){return{index:t,bitrate:e.bitrate,height:e.height,width:e.width,codec:e.codec||e.codecs,enabled:e.enabled||!0}}function tn(e,t){var i=e.length-1;if(t>=e[i].bitrate)return i;for(var n=i-1;n>0;n--){var r=e[n].bitrate;if(t===r)return n;if(t>r)return n+1}return 0}function nn(e,t){if(t<=e[0].bitrate)return 0;for(var i=e.length-1,n=1;n<i;n++){var r=e[n].bitrate;if(t===r)return n;if(t<r)return n-1}return i}function rn(e,t,i,n,r){var a=!0;if(Number.isFinite(t)&&a&&(a=e.bitrate>=t),Number.isFinite(i)&&a&&(a=e.bitrate<=i),Number.isFinite(n)&&a&&(a=e.height<=n),r){var o=r.width,s=r.height;a&&(a=e.width<=o||e.height<=s)}return a}function an(e,t,i,n,r){return e.some(function(e){return e.enabled&&rn(e,t,i,n,r)})}function on(e){return Math.round(e/1e3)}var sn={};xt(sn,{getResourceMetadata:function(){return vn},getResourceMimeType:function(){return fn}});var ln={};xt(ln,{getFileExtension:function(){return dn},getMimeType:function(){return hn}});var un=function(e){return e.MP4_VIDEO="video/mp4",e.MP4_AUDIO="audio/mp4",e.HLS="application/vnd.apple.mpegurl",e.HLS_ALT="application/x-mpegURL",e.DASH="application/dash+xml",e.WEBM_VIDEO="video/webm",e.WEBM_AUDIO="audio/webm",e.TS_VIDEO="video/mp2t",e.VTT="text/vtt",e.TTML="application/ttml+xml",e.ISM="application/vnd.ms-sstr+xml",e}(un||{}),cn={VTT:"text/vtt",XML:"application/ttml+xml",M3U8:"application/vnd.apple.mpegurl",MPD:"application/dash+xml",TS:"video/mp2t",MP4:"video/mp4",MPV:"video/mp4",MPA:"audio/mp4",WEBM:"video/webm",ISM:"application/vnd.ms-sstr+xml"};function dn(e){return e.replace(/\?.*/,"").replace(/#.*/,"").split(".").pop()}function hn(e){if(!e)return"";var t=dn(e).toUpperCase();return cn[t]}function fn(e){var t;return((null==(t=e.overrides)?void 0:t.mimeType)||"").split(";").shift()||hn(e.location.mediaUrl)}function vn(e){return{manifest:{mimeType:fn(e)},fragment:{mimeType:""}}}var pn={};xt(pn,{clearAllCues:function(){return er},clearCue:function(){return Zn},createSidecarTextTrack:function(){return ar},dedupeCues:function(){return tr},findDefaultTrack:function(){return sr},findLanguageTracks:function(){return or},isTextTrack:function(){return nr},processCues:function(){return ir},smpteToVtt:function(){return rr}});var gn=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"encode",value:function(e){return Ut(e)?"":Hi(e).map(function(e){var t=(0,Je.default)(e,2),i=t[0],n=t[1];return i+"="+encodeURIComponent(n)}).join("&")}},{key:"decode",value:function(e){var t={};return null==e||e.replace(/^[^?]*\?/,"").replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,n,r){var a;try{a=Ht(r)?r:decodeURIComponent(r)}catch(e){a=r}t[decodeURIComponent(i)]=a}),t}},{key:"parseValue",value:function(e){if(Ht(e))return!0;var t=e.toLowerCase();return"true"===t||"false"===t?"true"===t:"undefined"!==e?"null"===t?null:(t=parseFloat(e),isNaN(t)?e:t):void 0}},{key:"parse",value:function(t){var i=e.decode(t);for(var n in i)i[n]=e.parseValue(i[n]);return i}},{key:"append",value:function(t,i){var n=t.includes("?")?"&":"?";return t+n+e.encode(i)}}]),e}(),yn=function(e){return e.INCLUDE="include",e.SAME_ORIGIN="same-origin",e.OMIT="omit",e}(yn||{}),mn=function(e){return e.ARRAY_BUFFER="arraybuffer",e.TEXT="text",e.JSON="json",e.DOCUMENT="document",e.DEFAULT="",e}(mn||{}),An=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"TIMEOUT",get:function(){return 5e3}}]),e}(),kn=function(e){return e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.OPTIONS="OPTIONS",e.PUT="PUT",e}(kn||{}),bn=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"create",value:function(e){return{url:e.url||"",method:e.method||"GET",timeout:e.timeout||An.TIMEOUT,headers:e.headers||{},data:this.getBody(e.data,e.encodeList,e.sendJson),withCredentials:!0===e.withCredentials,responseType:e.responseType||"text",onComplete:e.onComplete||null,errorRecovery:e.errorRecovery||null}}},{key:"getBody",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;if("string"==typeof e)return e;if(!Object.keys(e).length)return null;var n=Array.isArray(t)&&t.length;for(var r in!n&&(t=[]),e)e[r]=this.getValue(r,e[r],t);if(i)return JSON.stringify(e);var a,o="";for(var s in e)null!=(a=e[s])&&void 0!==a&&""!==a&&(o+="".concat(s,"=").concat(a,"&"));return o.substr(0,o.length-1)}},{key:"getValue",value:function(e,t,i){return i.indexOf(e)>=0?encodeURIComponent(t):t}}]),e}(),En=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;(0,rt.default)(this,i),(n=t.call(this,e)).retryCount=0,n.limit=0,n.retryIntervals=null;var r=n.opts.errorRecovery;return r&&!isNaN(r.retryAttempts)&&r.retryAttempts>0&&(n.limit=r.retryAttempts),r&&r.retryIntervals&&Array.isArray(r.retryIntervals)&&(n.retryIntervals=r.retryIntervals),n}return(0,nt.default)(i,[{key:"shouldRetry",value:function(){return this.limit&&!this.atLimit}},{key:"incrementAttempts",value:function(){this.retryCount++}},{key:"retryLimit",get:function(){return this.limit}},{key:"atLimit",get:function(){return this.retryCount===this.limit}},{key:"retryInterval",get:function(){return this.retryIntervals&&this.retryIntervals[this.retryCount-1]||300*this.retryCount}}]),i}(li),Tn=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,rt.default)(this,i),(n=t.call(this,bn.create(e))).requestOptions=n.opts,n.opts.url&&n.createXhr(),n}return(0,nt.default)(i,[{key:"createXhr",value:function(){var e=this;this.request(this.requestOptions).then(function(t){var i=t.response,n=t.getResponseHeader("content-type"),r=i;if("text"===e.requestOptions.responseType&&n)if(n.includes("application/smil")||n.includes("application/xml")){var a=new DOMParser;r=a.parseFromString(r,"application/xml")}else(null==n?void 0:n.includes("application/json"))&&(r=JSON.parse(r));204!==t.status&&null==r?e.emitCompleteWithError("Unable to parse response."):setTimeout(function(){e.emitComplete({contentType:n,data:r})},1)}).catch(function(t){if(e.shouldRetry())e.incrementAttempts(),setTimeout(function(){e.createXhr()},e.retryInterval);else{var n=t.response||i.statusMessages[0];e.emitCompleteWithError(n)}})}},{key:"request",value:function(e){return new Promise(function(t,i){e.query&&(e.url=gn.append(e.url,e.query));var n=new XMLHttpRequest;if(n.open(e.method,e.url),n.onload=function(){!1!==e.checkStatus&&n.status>399&&i(n),t(n)},n.onerror=function(e){i(n)},n.withCredentials=e.withCredentials,null!=e.responseType)try{n.responseType=e.responseType}catch(e){}return null!=e.headers&&Hi(e.headers).forEach(function(e){var t=(0,Je.default)(e,2),i=t[0],r=t[1];null!=i&&null!=r&&n.setRequestHeader(i,r)}),n.send(e.data)})}},{key:"emitComplete",value:function(e){this.emit(i.event.COMPLETE,{response:e.data,contentType:e.contentType,error:!1})}},{key:"emitCompleteWithError",value:function(e){var t=Vt(e)?e:null,n=t?null:e;this.emit(i.event.COMPLETE,{status:n&&n.status,error:!0,url:this.requestOptions.url||"not available",message:t||this.getMsg((null==n?void 0:n.status)||0,(null==n?void 0:n.data)||null)})}},{key:"getMsg",value:function(e,t){var n=i.statusMessages[""+e];return n||(n=Vt(t)?t:"Unspecified error"),"XhrDataRequest error: "+n}}],[{key:"load",value:function(e){return new Promise(function(t,n){var r=e;r.credentials&&(r.withCredentials="include"===r.credentials),r.body&&(r.data=r.body),r.onComplete=function(e){var i=e.detail;!i||i.error?n(i):t(i)},new i(r)})}}]),i}(En);function Sn(e){return e.query&&(e.url=gn.append(e.url,e.query)),Tn.load(e).then(function(e){return e.response})}Tn.event={COMPLETE:"complete"},Tn.statusMessages={0:"Request failed; blocked or timed out",500:"Server error encountered.",404:"Resource not found.",403:"Access denied."};var Cn,xn,wn,Pn,_n,In,Ln=function(e){return e.ANDROID="Android",e.CHROME="Chrome",e.CHROME_IOS="Chrome-iOS",e.FIREFOX="Firefox",e.FIREFOX_IOS="Firefox-iOS",e.EDGE="Edge",e.MSIE="MSIE",e.SAFARI="Safari",e.OPERA="Opera",e.OPERA_MOBILE="Opera-Mobile",e.SILK="Silk",e.WEBKIT="Webkit Browser",e.PLAYSTATION_4_WEBMAF="PlayStation 4 (WebMAF)",e.PLAYSTATION_4_MSE="PlayStation 4 (Media Source API)",e.PLAYSTATION_5="PlayStation 5 (Media Source API)",e.UNKNOWN="Unknown",e}(Ln||{}),Nn={};xt(Nn,{CMCD_VERSION:function(){return $n},CmcdObjectType:function(){return Cn},CmcdStreamType:function(){return wn},CmcdStreamingFormat:function(){return _n},appendCmcdQuery:function(){return Fn},decodeCmcd:function(){return Vn},encodeCmcd:function(){return Un},fromCmcdQuery:function(){return Hn}}),(xn=Cn||(Cn={})).MANIFEST="m",xn.AUDIO="a",xn.VIDEO="v",xn.MUXED="av",xn.INIT="i",xn.CAPTION="c",xn.TIMED_TEXT="tt",xn.KEY="k",xn.OTHER="o",(Pn=wn||(wn={})).VOD="v",Pn.LIVE="l",(In=_n||(_n={})).DASH="d",In.HLS="h",In.SMOOTH="s",In.OTHER="o";var Mn="CMCD",Rn=function(e){return"ot"===e||"sf"===e||"st"===e},On=function(e){return Math.round(e)},Dn=function(e){return 100*On(e/100)},Bn={br:On,d:On,bl:Dn,dl:Dn,mtp:Dn,nor:function(e){return encodeURIComponent(e)},rtp:Dn,tb:On};function Un(e){return function(e,t,i){var n=[];if(null==e||"object"!==(0,at.default)(e))return n;var r=Object.keys(e).sort(),a=Object.assign({},Bn,null==i?void 0:i.formatters);return r.forEach(function(i){var r=e[i];if(null!=r&&""!==r&&!1!==r&&!("v"===i&&1===r||"pr"==i&&1===r)){var o=a[i];o&&(r=o(r));var s=t(i,r);n.push(s)}}),n}(e,function(e,t){switch((0,at.default)(t)){case"boolean":return e;case"number":return"".concat(e,"=").concat(t);case"symbol":return"".concat(e,"=").concat(t.description||t.toString().replace(/^Symbol\((.*)\)$/,"$1"));case"string":return Rn(e)?"".concat(e,"=").concat(t):"".concat(e,"=").concat(JSON.stringify(t));default:return}},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).join(",")}function Fn(e,t,i){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";var i=Un(e,t);return"".concat(Mn,"=").concat(encodeURIComponent(i))}(t,i);if(!n)return e;var r=e.includes("?")?"&":"?";return"".concat(e).concat(r).concat(n)}function Vn(e){return e?decodeURIComponent(e.replace(/^CMCD=/,"")).split(",").reduce(function(e,t){var i=t.split("="),n=(0,Je.default)(i,2),r=n[0],a=n[1];return r?(a?Rn(r)||/^[a-zA-Z]$/.test(a)?e[r]=a:e[r]=JSON.parse(a):e[r]=!0,e):e},{}):{}}function Hn(e){return"string"==typeof e&&(e=new URLSearchParams(e)),Vn(e.get(Mn))}var $n=1,Wn={};function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/)||[];return{tag:e,language:t[1]||"",extended:t[2]||"",script:t[3]||"",region:t[4]||"",toString:function(){return this.tag}}}function zn(e,t){if(e===t)return!0;var i=this.parseLanguageTag(e),n=this.parseLanguageTag(t);if(i.language.slice(0,2).toLowerCase()===n.language.slice(0,2).toLowerCase()){var r=i.region.toUpperCase(),a=n.region.toUpperCase();return r===a||!!r&&!a||!r&&!!a}return!1}xt(Wn,{compareLanguageTags:function(){return zn},parseLanguageTag:function(){return Kn}});var jn=Pt(Lt(),1),Gn=function(e){return e.DESKTOP="Desktop",e.ANDROID_PHONE="Android Phone",e.WINDOWS_PHONE="Windows Phone",e.IPHONE="iPhone",e.IPOD="iPod",e.IPAD="iPad",e.KINDLE="Kindle",e.TABLET="Tablet",e.MOBILE="Mobile",e.EMBEDDED="Embedded",e.LG_SMART_TV="LG Smart Tv",e.VIZIO_SMART_TV="Vizio Smart Tv",e.SAMSUNG_SMART_TV="Samsung Smart Tv",e.PHILLIPS_SMART_TV="Phillips Smart Tv",e.COMCAST_X1="Comcast X1",e.XBOX_ONE="Xbox One",e.CHROMECAST="Chromecast",e.PLAYSTATION_4="PlayStation 4",e.PLAYSTATION_5="PlayStation 5",e.SKY_Q="Sky Q",e.FOXTEL="Foxtel",e.ORANGE="Orange STB",e.VIRGIN_MEDIA="Virgin Media STB",e.VESTEL="Vestel Smart Tv",e.UNKNOWN="UNKNOWN",e}(Gn||{}),qn=function(e){return e.OSX="OS X",e.WINDOWS="Windows",e.WINDOWS7="Windows 7",e.WINDOWS8="Windows 8",e.WINDOWS10="Windows 10",e.WINDOWS_VISTA="Windows Vista",e.WINDOWS_PHONE="Windows Phone",e.IOS="iOS",e.ANDROID="Android",e.CHROMIUM="Chromium",e.WEBOS="Web0S",e.SMARTCAST="SmartCast",e.TIZEN="Tizen",e.ORBIS="Orbis OS",e.PROSPERO="Prospero OS",e.TIVO="TiVo OS",e.UNKNOWN="Unknown",e}(qn||{}),Yn=function(e){return e.MAC="Macintosh",e.WINDOWS="Windows",e.LINUX="Linux",e.UNKNOWN="Unknown",e}(Yn||{}),Qn="; codecs=",Xn={video:{HLS:"application/vnd.apple.mpegurl",AVC:"video/mp4"+Qn+"avc1.4D401E,mp4a.40.2",HEVC:"video/mp4"+Qn+"hev1.1.2.L93.B0",WEBM_VP8:"video/webm"+Qn+"vp8, opus, vorbis",WEBM_VP9:"video/webm"+Qn+"vp9, opus, vorbis"},audio:{AVC:"audio/mp4"+Qn+"avc1.4D401E,mp4a.40.2",HEVC:"audio/mp4"+Qn+"hev1.1.2.L93.B0",WEBM_VP8:"audio/webm"+Qn+"vp8, opus, vorbis",WEBM_VP9:"audio/webm"+Qn+"vp9, opus, vorbis"}},Jn=function(e){if(!e)return{global:e,isBrowser:!1};var t=e.navigator||{userAgent:""},i=e.document||null,n=function(e,i,n){var r=e.test(i),a="Android"===n.os?"Android":"Safari";return r&&"Unknown"!==n.os&&/MacIntel|iPhone|iPad/.test(t.platform)?a:null},r=function(e){var t={majorVersion:null,minorVersion:null,versionString:null};if(Vt(e)){t.versionString=e;var i=e.split("."),n=parseInt(i[0],10),r=parseInt(i[1],10);!isNaN(n)&&(t.majorVersion=n),!isNaN(r)&&(t.minorVersion=r)}return t},a=t.userAgent||"",o=function(e){var i=e.toLowerCase(),n={os:"Unknown",platform:"Unknown",osVersion:"",device:"UNKNOWN"};if(i.indexOf("fxios")>=0)return n.os="iOS",n.platform="Macintosh",i.indexOf("iphone")>=0?n.device="iPhone":n.device="iPad",n;if(i.indexOf("crkey")>=0)return n.platform="Linux",n.device="Chromecast",n;var r=/\s(\([^)]+\))/.exec(e);if(r&&r.length&&r.length>1)for(var o=r[1].replace(/_/gi,"."),s=[function(e,i){return function(e,i){var n=new RegExp("Linux","i"),r=t.userAgentData,a=t.platform||(null==r?void 0:r.platform),o=/Linux armv/.test(a);if(n.test(e)||e.indexOf("Android")>=0){if(i.platform="Linux",i.device="UNKNOWN",e.indexOf("Chromium")>=0){var s=/Chromium\/([\d+\.]*)\s/.exec(e);i.os="Chromium",i.osVersion=s&&s[1]||""}else if(e.indexOf("Android")>=0){var l=/ Android ([^\s]+);/.exec(e);i.os="Android",i.osVersion=l&&l[1]||"",i.device="Android Phone"}else if(e.indexOf("Web0S")>=0)i.os="Web0S",i.osVersion="n/a",i.device="LG Smart Tv";else if(e.indexOf("SmartCast")>=0)i.os="SmartCast",i.osVersion="n/a",i.device="Vizio Smart Tv";else if(e.indexOf("Tizen")>=0){var u=/Tizen ([^\s]+)(;|\))/.exec(e);i.os="Tizen",i.osVersion=u&&u[1]||"",i.device="Samsung Smart Tv"}else if(e.indexOf("Sky")>=0)i.os="Linux",i.osVersion="n/a",i.device="Sky Q";else if(e.indexOf("Foxtel")>=0)i.os="Linux",i.osVersion="n/a",i.device="Foxtel";else if(e.indexOf("VirginMedia")>=0)i.os="Linux",i.osVersion="n/a",i.device="Virgin Media STB";else if(e.indexOf("Philips")>=0)i.os="Linux",i.osVersion="n/a",i.device="Phillips Smart Tv";else if(e.indexOf("SOPOpenBrowser")>=0)i.os="Linux",i.osVersion="n/a",i.device="Orange STB";else if(e.indexOf("Vestel")>=0){i.os="TiVo OS";var c=e.match(/TiVoOS\/([\d.]+)/);i.osVersion=c?c[1]:"n/a",i.device="Vestel Smart Tv"}else"undefined"!=typeof $badger||/ Xfinity/.test(e)||/ WPE/.test(e)?(i.os="Linux",i.osVersion="n/a",i.device="Comcast X1"):o&&(i.os="Linux",i.osVersion="n/a",i.device="Embedded");return!0}return!1}(e,i)},function(e,i){return function(e,i){if(e.indexOf("Macintosh")>=0){i.platform="Macintosh",a.match(/(iPad)/)||t.maxTouchPoints>1?(i.device="iPad",i.os="iOS"):e.indexOf("OS X")>=0&&(i.device="Desktop",i.os="OS X");var n=/Mac OS X ([\d.]+)/.exec(e);return i.osVersion=n&&n[1]?n[1]:null,!0}if(-1!==e.indexOf("like Mac OS X")){i.platform="Macintosh",i.os="iOS",i.device="UNKNOWN";var r=/\sOS\s([^\s]*)\s/.exec(e);r&&r[1]&&(i.osVersion=r[1]);for(var o=[/\(iPhone;/,/\(iPad;/,/\(iPod;/],s=["iPhone","iPad","iPod"],l=o.length;l--;)if(o[l].test(e))return i.device=s[l],!0;return!0}return!1}(e,i)},function(e,t){return function(e,t){var i=/(Windows Phone |Windows Phone OS )([^\s]+);/.exec(e);if(i&&i[2])return t.platform="Windows",t.os="Windows Phone",t.osVersion=i[2],t.device="Windows Phone",!0;var n=/Windows NT ([^\s]+)[;\)]/.exec(e);if(t.device="Desktop",n&&n[1]){t.platform="Windows",t.os="Windows";var r=n[1];if(/Xbox; Xbox One/.test(e)&&(t.device="Xbox One"),10===parseInt(r))t.os="Windows 10",t.osVersion=r;else switch(r){case"6.0":t.os="Windows Vista";break;case"6.1":t.os="Windows 7",t.osVersion="7";break;case"6.2":t.os="Windows 8",t.osVersion="8"}return!0}return!1}(e,t)}],l=s.length;l--&&!(0,s[l])(0===l?e:o,n););return n}(a),s=function(e,t){var i,r=(i={},(0,ot.default)(i,"Chrome",/Chrome\/(\S+)/),(0,ot.default)(i,"Chrome-iOS",/CriOS\/(\S+)/),(0,ot.default)(i,"Firefox-iOS",/FxiOS\/(\S+)/),(0,ot.default)(i,"Edge",/ Edge?\/([^\s]+)/),(0,ot.default)(i,"Firefox",/Firefox\/(\S+)/),(0,ot.default)(i,"Opera",/Opera|OPR\/(\S+)/),(0,ot.default)(i,"Safari",/Version\/(\S+).*Safari/),(0,ot.default)(i,"MSIE",/MSIE ([^\s]+)[);] Windows/),(0,ot.default)(i,"Android",/Android/),(0,ot.default)(i,"Silk",/Silk\/(\S+)/),(0,ot.default)(i,"PlayStation 4 (WebMAF)",/Playstation 4 (WebMAF) (\S+)/),(0,ot.default)(i,"PlayStation 4 (Media Source API)",/WebMAF\/v3/),(0,ot.default)(i,"PlayStation 5 (Media Source API)",/PlayStation 5/),(0,ot.default)(i,"Webkit Browser",/ WPE/),(0,ot.default)(i,"Unknown",null),i),a=r["Chrome-iOS"].test(e),o=function(e,t,i){var n=t&&t.exec(i),r={browser:e,browserVersion:"0",browserMajorVersion:0};if(n&&n.length&&n.length>1)if(r.browserVersion=n[1]||"",r.browserVersion.indexOf(".")){var a=r.browserVersion.split(".");if(Array.isArray(a)&&a.length){var o=parseInt(a[0]);!isNaN(o)&&(r.browserMajorVersion=o)}}else{var s=parseInt(r.browserVersion);!isNaN(s)&&(r.browserMajorVersion=s)}return r};if((r.Chrome.test(e)||a)&&!r.Opera.test(e)&&!r.Edge.test(e)){var s=a?"Chrome-iOS":"Chrome";return o(s,r[s],e)}var l=function(e,t,i){var n=/Trident.[^\s]+;.*rv:([^\s]+)[);]/;return t.test(i)?{browser:"MSIE",re:t}:e.test(i)?{browser:"Edge",re:e}:n.test(i)?{browser:"MSIE",re:n}:{browser:"Unknown",re:null}}(r.Edge,r.MSIE,e);if("Unknown"!==l.browser)return o(l.browser,l.re,e);for(var u in r)switch(u){case"Firefox":case"Firefox-iOS":case"Silk":case"Android":if(r[u].test(e))return"Silk"===u&&(t.device="Kindle"),o(u,r[u],e);break;case"Webkit Browser":return o("Webkit Browser",r["Webkit Browser"],e);case"PlayStation 4 (WebMAF)":case"PlayStation 4 (Media Source API)":case"PlayStation 5 (Media Source API)":if(r[u].test(e)){var c,d=r["PlayStation 5 (Media Source API)"].test(e);return c=d?"PlayStation 5 (Media Source API)":r["PlayStation 4 (Media Source API)"].test(e)?"PlayStation 4 (Media Source API)":"PlayStation 4 (WebMAF)",t.device=d?"PlayStation 5":"PlayStation 4",t.platform=d?"PlayStation 5":"PlayStation 4",t.os=d?"Prospero OS":"Orbis OS",o(c,r[c],e)}break;case"Safari":if(n(r[u],e,t))return o(u,r[u],e);break;case"Opera":var h=r[u].exec(e);if(h)return o(h.indexOf("Opera Mini/")>=0||h.indexOf("Opera Mobi")>=0?"Opera-Mobile":"Opera",r[u],e)}return o("Unknown",r.Unknown,e)}(a,o),l=o.os,u=o.platform,c=o.osVersion,d=o.device,h=s.browser,f=s.browserVersion,v=r(c),p=r(f),g=function(){switch(d){case"LG Smart Tv":case"Vizio Smart Tv":case"Samsung Smart Tv":case"Phillips Smart Tv":case"Comcast X1":case"Sky Q":case"Foxtel":case"Virgin Media STB":case"Vestel Smart Tv":case"Orange STB":return!0;default:return!1}}(),y="Desktop"===d,m=function(){switch(d){case"PlayStation 4":case"PlayStation 5":case"Xbox One":return!0;default:return!1}}(),A="ReactNative"===t.product,k=!!e.WebKitMediaSource,b=!(!e.MediaSource&&!k),E=function(t){var n=!1;if(k?n=e.WebKitMediaSource.isTypeSupported(t):b&&(n=e.MediaSource.isTypeSupported(t)),!n&&i){var r=i.createElement("video");Kt(r)&&Ft(r.canPlayType)&&("probably"!==r.canPlayType(t)&&"maybe"!==r.canPlayType(t)||(n=!0))}return n},T=E(Xn.video.WEBM_VP8),S=E(Xn.video.WEBM_VP9),C=g||m||A,x=!!e.WM_videoPlayer;return{appNamespace:null,document:i,global:e,isBrowser:!x&&!!i&&!A,browser:h,browserVersionInfo:p,device:d,os:l,osVersionInfo:v,platform:u,isAndroid:"Android Phone"===d||"Android"===l,isChromecast:"Chromecast"===d,isDesktop:y,isEmbedded:"Embedded"===d,isIos:"iOS"===l,isMobile:!y,isTizen:"Samsung Smart Tv"===d,isTv:g,isConsole:m,isWebkit:k,isWebMaf:x,isWebOs:"Web0S"===l,isXboxOne:"Xbox One"===d,hasFullscreenApi:jn.default.isEnabled,hasMediaSource:b,hasEncryptedMediaSource:!!(e.MediaKeys||e.WebKitMediaKeys||e.MSMediaKeys),supportsVp8:T,supportsVp9:S,supportsWebM:T||S,supportsMediaDecodeConfigurations:!!t.mediaCapabilities,supportsNativeHls:E(Xn.video.HLS),supportsRequestMediaKeySystemAccess:!!e.MediaKeySystemAccess,supportsUnrestrictedAutoplay:C}}("object"===("undefined"==typeof window?"undefined":(0,at.default)(window))?window:null);function Zn(e,t){try{var i=VTTCue||TextTrackCue;e.addCue(new i(t-.1,t+.1," "))}catch(e){}}function er(e){var t=function(t){t&&Array.from(t).forEach(function(t){try{e.removeCue(t)}catch(e){}})};t(e.cues),t(e.activeCues)}function tr(e,t){var i={},n=[];return ir(e,t),e.activeCues?(Array.from(e.activeCues).forEach(function(t){try{if(!t)return;var r=t.text,a=t.startTime,o=t.endTime,s=t.line;if(!r)return;var l=i[r];if(l){if(l.startTime===a)return l.endTime!==o&&(l.endTime=Math.max(l.endTime,o)),l.line!==s&&(l.line="auto"===l.line||"auto"===s?"auto":l.line),void e.removeCue(t)}else i[r]=t;n.push(t)}catch(e){}}),n):n}function ir(e,t){var i={},n=Math.max(0,t-15);Array.from(e.cues).forEach(function(t){try{var r=t,a=r.startTime,o=r.endTime,s=r.text;if(o<n)return;i[s]||(i[s]={});var l=i[s][o];if(l&&l.line===t.line)return void e.removeCue(t);var u=i[s][a];u&&t.line===u.line&&(u.endTime=o,delete i[s][a],e.removeCue(t),t=u),i[s][o]=t}catch(e){}})}function nr(e){return"captions"===e||"subtitles"===e}function rr(e,t){return It(this,null,qe.default.mark(function i(){var n,r,a,o,s,l;return qe.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Sn({url:e,responseType:"document"});case 2:if(n=i.sent,(r=n.querySelectorAll("tt body div p")).length){i.next=6;break}throw new Error("No cues found in ".concat(e));case 6:a="Safari"===Jn.browser?"middle":"center",o="Safari"===Jn.browser?-1:0,s=void 0!==Jn.global.VTTCue,l=s?Jn.global.VTTCue:Jn.global.TextTrackCue,r.forEach(function(e,i,n){if(!Ut(e.textContent)){var r=e.textContent.replace(/(.*)<span.*tts:fontStyle="italic">(.*)<\/span>(.*)/g,"$1<i>$2</i>$3").replace(/(.*)<span.*tts:fontWeight="bold">(.*)<\/span>(.*)/g,"$1<b>$2</b>$3").replace(/(.*)<span.*tts:textDecoration="under">(.*)<\/span>(.*)/g,"$1<u>$2</u>$3"),u=Xt(r);e._lineCountPrev=e._lineCountPrev||0,e._lineCountNext=e._lineCountNext||0;for(var c=i+1,d=n[c],h=e.getAttribute("begin");(null==d?void 0:d.getAttribute("begin"))===h;)d._lineCountPrev=u+e._lineCountNext,e._lineCountNext+=Xt(d.textContent),d=n[++c];var f=new l(ni(h),ni(e.getAttribute("end")),r);try{var v=e.getAttribute("tts:textAlign");f.align=v||a}catch(e){f.align="middle"}if(s){var p=e.querySelector("metadata");if(p){f.snapToLines=!0;var g=parseInt(p.getAttribute("cccol")),y=parseInt(p.getAttribute("ccrow")),m=Math.round(g/35*100);f.position=m;try{f.align=m<45?"start":m>55?"end":a}catch(e){f.align="center"}f.positionAlign=m<45?"line-left":m>55?"line-right":"center",f.line=y-17+o}}try{t.addCue(f)}catch(e){}}});case 11:case"end":return i.stop()}},i)}))}function ar(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"English",a=null==(i=e.location)?void 0:i.textTrackUrl;if(!a)return Promise.reject("Invalid text track url");var o=a.indexOf(".vtt")>=0,s=e.cmcd;if(s.enabled&&(a=Fn(a,{ot:Cn.CAPTION,su:!0,sid:s.sessionId,cid:s.contentId,pr:t.playbackRate,v:$n})),o){var l=document.createElement("track");return l.kind="captions",l.label=r,l.srclang=n,l.id="sidecar-vtt",l.src=a,t.appendChild(l),Promise.resolve(l.track)}var u=t.addTextTrack("captions",r,n);return rr(a,u).then(function(){return u})}function or(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=function(e){return new RegExp("^".concat(e),"i")},r=n(t),a=e.filter(function(e){return r.test(e.language)});if(!i){var o=n(Kn(t).language);a=a.concat(e.filter(function(e){return!r.test(e.language)&&o.test(e.language)}))}return a}function sr(e,t){return or(e,t).sort(function(e,t){return e.default===t.default?0:!0===e.default?-1:!0===t.default?1:0})[0]||e.find(function(e){return e.default})||e[0]}var lr={};xt(lr,{createSimpleVideoInterface:function(){return dr},isBuffered:function(){return hr},isValidPlayheadTime:function(){return cr}});var ur=(0,nt.default)(function e(){(0,rt.default)(this,e),this.muted=!1,this.volume=NaN,this.currentTime=NaN,this.duration=NaN});function cr(e){return $t(e)&&Number.isFinite(e)&&e>=0}function dr(){return new ur}function hr(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.currentTime,i=e.buffered,n=0,r=i.length;n<r;n++)if(i.start(n)<=t&&i.end(n)>=t)return!0;return!1}var fr=function(e){return e.ABORT="abort",e.CAN_PLAY="canplay",e.CAN_PLAY_THROUGH="canplaythrough",e.DURATION_CHANGE="durationchange",e.ENDED="ended",e.ERROR="error",e.LOADED_METADATA="loadedmetadata",e.LOAD_START="loadstart",e.PAUSE="pause",e.PLAY="play",e.PLAYING="playing",e.PROGRESS="progress",e.RATE_CHANGE="ratechange",e.SEEKED="seeked",e.SEEKING="seeking",e.STALLED="stalled",e.TIME_UPDATE="timeupdate",e.VOLUME_CHANGE="volumechange",e.WAITING="waiting",e}(fr||{}),vr=function(e){return e.SHOWING="showing",e.HIDDEN="hidden",e.DISABLED="disabled",e}(vr||{}),pr="*",gr={};function yr(e){for(var t=atob(e),i=t.length,n=new Uint8Array(new ArrayBuffer(i)),r=0;r<i;r++)n[r]=t.charCodeAt(r);return n}function mr(e){var t=String.fromCharCode.apply(null,e);return btoa(t)}function Ar(e,t){if(e&&e.length&&Ft(t))for(var i=0,n=e.length;i<n;i++)t(e[i],i,e)}function kr(e,t){if(e&&e.length&&Ft(t))for(var i=e.length-1;i>-1;i--)t(e[i],i,e)}function br(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):String.fromCharCode.apply(null,new Uint8Array(e))}function Er(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function Tr(e){for(var t=new ArrayBuffer(2*e.length),i=new Uint16Array(t),n=0,r=e.length;n<r;n++)i[n]=e.charCodeAt(n);return i}xt(gr,{arrayToString:function(){return Er},base64DecodeUint8Array:function(){return yr},base64EncodeUint8Array:function(){return mr},bufferToString:function(){return br},forEach:function(){return Ar},forEachReverse:function(){return kr},stringToArray:function(){return Tr}});var Sr={};function Cr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"!=typeof TextDecoder){var i=new TextDecoder("utf-8").decode(e);if(t){var n=i.indexOf("\0");return-1!==n?i.substring(0,n):i}return i.replace(/\0/g,"")}for(var r,a,o,s=e.length,l="",u=0;u<s;){if(0===(r=e[u++])&&t)return l;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(r);break;case 12:case 13:a=e[u++],l+=String.fromCharCode((31&r)<<6|63&a);break;case 14:a=e[u++],o=e[u++],l+=String.fromCharCode((15&r)<<12|(63&a)<<6|(63&o)<<0)}}return l}function xr(e){return"PRIV"===e.type?function(e){if(!(e.size<2)){var t=Cr(e.data,!0),i=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:i.buffer}}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,i=Cr(e.data.subarray(t),!0);t+=i.length+1;var n=Cr(e.data.subarray(t));return{key:e.type,info:i,data:n}}var r=Cr(e.data);return{key:e.type,info:"",data:r}}(e):function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,i=Cr(e.data.subarray(t),!0);t+=i.length+1;var n=Cr(e.data.subarray(t));return{key:e.type,info:i,data:n}}var r=Cr(e.data.subarray(1));return{key:e.type,info:"",data:r}}}(e)}function wr(e,t){var i=0;return i=(127&e[t])<<21,i|=(127&e[t+1])<<14,(i|=(127&e[t+2])<<7)|127&e[t+3]}function Pr(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),i=wr(e,4);return{type:t,size:i,data:e.subarray(10,10+i)}}function _r(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Ir(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Lr(e){for(var t=0,i=[];Ir(e,t);){for(var n=wr(e,t+6),r=(t+=10)+n;t+8<r;){var a=Pr(e.subarray(t)),o=xr(a);o&&i.push(o),t+=a.size+10}_r(e,t)&&(t+=10)}return i}xt(Sr,{getId3Frames:function(){return Lr}});var Nr=function(){function e(t,i){var n,r=this;(0,rt.default)(this,e),this.id3Map=[],this.daiId3=/^google_/,this.maxId3DedupeLength=e.MAX_ID3_DEDUPE_LENGTH,this.onTextTrackAdded=function(e){var t=e.track;r.isValidTrack(t)&&(t.mode="hidden",t.addEventListener("cuechange",r.onCueChange))},this.onCueChange=function(e){var t=e.target,i=t&&t.activeCues;i&&i.length&&Ar(i,function(e){return r.processCue(e)})},this.onSeeking=function(){r.clearId3()},this.onMetadataCuepoint=i,this.video=t.video,this.id3OwnerIds=["com.cbsi.live.sg"].concat(t.resource.playback.id3OwnerIds||[]);var a=null==(n=t.playerOptions.overrides)?void 0:n.maxId3DedupeLength;null!=a&&(this.maxId3DedupeLength=a),this.addEvents(),this.logger=t.logger,this.logger.log("info","MetadataSurface created"),Ar(this.video.textTracks,function(e){return r.onTextTrackAdded({track:e})})}return(0,nt.default)(e,[{key:"destroy",value:function(){var e=this;this.onMetadataCuepoint=null,this.id3Map=null,this.removeEvents(),Ar(this.video.textTracks,function(t){return e.cleanupTrack(t)})}},{key:"addEvents",value:function(){this.video.textTracks.addEventListener("addtrack",this.onTextTrackAdded),this.video.addEventListener("seeking",this.onSeeking)}},{key:"removeEvents",value:function(){var e=this;this.video.textTracks.removeEventListener("addtrack",this.onTextTrackAdded),this.video.removeEventListener("seeking",this.onSeeking),Ar(this.video.textTracks,function(t){return t.removeEventListener("cuechange",e.onCueChange)})}},{key:"clearId3",value:function(){this.id3Map=[]}},{key:"cleanupTrack",value:function(e){function t(t){try{t&&e.removeCue(t)}catch(e){}}"metadata"===e.kind&&(kr(e.cues,t),kr(e.activeCues,t))}},{key:"processCue",value:function(e){var t=this;if(!e.value&&e.data){var i=e.data;if(i.constructor===ArrayBuffer)return void Lr(new Uint8Array(i)).forEach(function(i){e.value=i,t.processCue(e)})}var n=e.value,r=e.startTime,a=e.endTime,o=n.key,s=n.data,l=n.info,u=void 0===l?"":l;this.processId3(o,{id:void 0,text:"string"==typeof s?s:"",info:u,data:s,startTime:r,endTime:a,source:e})}},{key:"processId3",value:function(e,t){var i=t.info,n=t.data;if("TXXX"===e&&this.daiId3.test(t.text)?(Ut(i)&&(t.info=t.text),t.id="google_dai"):t.id=this.id3OwnerIds.find(function(e){return e===pr||i.includes(e)}),t.id){var r;try{r=n instanceof ArrayBuffer?br(n):n}catch(e){r=""}"PRIV"===e&&this.id3OwnerIds[0]===i&&(t.data=r),t.text=r,this.id3Map.some(function(e){return e.info===t.info&&e.startTime===t.startTime&&e.text===t.text})||(this.id3Map.length>this.maxId3DedupeLength&&this.id3Map.pop(),this.id3Map.unshift(t),this.onMetadataCuepoint(t))}}},{key:"isMetadataTrack",value:function(e){return"metadata"===e}},{key:"isExpired",value:function(e){return e.expired}},{key:"isValidTrack",value:function(e){return!!e&&!!this.isMetadataTrack(e.kind)&&!this.isExpired(e)}}]),e}();Nr.MAX_ID3_DEDUPE_LENGTH=32;var Mr={};function Rr(e,t){var i,n=function(){clearTimeout(i),i=null},r=function(){n();for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];i=setTimeout.apply(void 0,[e,t].concat(a))};return r.cancel=n,r.flush=e,r.pending=function(){return null!=i},r}xt(Mr,{debounce:function(){return Rr}});var Or=function(){function e(t,i){var n=this;(0,rt.default)(this,e),this.pTextTracks=null,this.currentTextTrack=null,this.currentTextTrackMode="disabled",this.existingTrack=[],this.addedTracks=[],this.ignoreBlankTracks=!1,this.onVideoSeeked=function(e){n.updateForcedNarrative()},this.onVideoTextTrackAdded=function(e){e.track.expired=!1,n.onTextTrackAdded(e)},this.onTextTrackAdded=function(e){var t=e.track,i="subtitles"===t.kind&&!t.language&&!t.label;"metadata"===t.kind||i||n.addDebounced()},this.onTextTrackChange=function(e){n.processDebounced()},this.onCueChange=function(e){var t=e.target,i="forced"===t.kind;if(n.config.textTrackSettings.enabled||i){var r=tr(t,n.video.currentTime);n.emit("textCuepoint",{activeCues:r,forced:i})}},this.addTracks=function(){if(Ar(n.pTextTracks,function(e){var t=n.isExpired(e)||n.isDuplicateTrack(e);e.mode=t?"disabled":"hidden",t||n.addTrack(e)}),!n.currentTextTrack){if(n.textTrack=sr(n.textTracks,n.config.textTrackSettings.language),!n.textTrack)return;n.textTrack.mode=n.config.textTrackSettings.mode,n.emit("textTrackAvailable")}n.processTracks()},this.processTracks=function(){var e=n.config.textTrackSettings,t=e.enabled,i=e.native,r=e.enabledMode,a=n.textTracks;if(Ar(n.pTextTracks,function(e){n.isExpired(e)&&"disabled"!==e.mode&&(e.mode="disabled")}),i){var o=a.find(function(e){return"showing"===e.mode});if(t){if(o===n.currentTextTrack)return;o?n.textTrack=o:n.textTrackMode="disabled"}else{if(!o)return;o!==n.currentTextTrack&&(n.textTrack=o),n.textTrackMode="showing"}}else if(t){var s=a.find(function(e){return"showing"===e.mode});s&&(s.mode=r)}else{var l=a.find(function(e){return"disabled"!==e.mode});l&&(l.mode="disabled")}},this.config=t,this.video=t.video,this.pTextTracks=this.video.textTracks,this.currentTextTrackMode=t.textTrackSettings.mode,this.pForcedLanguage=t.textTrackSettings.language,this.ignoreBlankTracks=t.playerOptions.ignoreBlankTextTracks,this.emit=i||function(){},this.processDebounced=Rr(this.processTracks,100),this.addDebounced=Rr(this.addTracks,25),this.addEvents(),this.logger=t.logger,this.logger.log("info","TextTrackSurface created"),this.config.resource.location.textTrackUrl&&ar(this.config.resource,this.video)}return(0,nt.default)(e,[{key:"destroy",value:function(){var e=this;this.processDebounced.cancel(),this.addDebounced.cancel(),this.emit=null,this.removeEvents(),Ar(this.pTextTracks,function(t){return e.cleanupTrack(t)}),Ar(this.video.querySelectorAll("track"),function(t){return e.video.removeChild(t)})}},{key:"clearCue",value:function(){Zn(this.currentTextTrack,this.video.currentTime)}},{key:"cleanupTrack",value:function(e){if(this.isTextTrack(e.kind)){kr(e.cues,t),kr(e.activeCues,t),e.expired=!0,e.textTrack1=!0,e.textTrack2=!0,e.isTTML=!0,e.isEmbedded=!1;try{e.mode="disabled"}catch(e){}}function t(t){try{t&&e.removeCue(t)}catch(e){}}}},{key:"textTrackMode",set:function(e){this.currentTextTrack?this.setTrackMode(e):this.logger.log("warn","No text track detected")}},{key:"textTrack",get:function(){return this.currentTextTrack},set:function(e){var t=this;this.isValidTrack(e)&&e!==this.currentTextTrack&&(this.currentTextTrack&&"disabled"!==this.currentTextTrack.mode&&(this.currentTextTrack.mode="disabled"),this.currentTextTrack=e,this.setTrackMode(this.currentTextTrackMode).then(function(){t.logger.log("info","".concat(e.language," is being set as the current text track")),t.emit("textTrackChange",e)}))}},{key:"textTracks",get:function(){var e=this;return Array.from(this.pTextTracks).filter(function(t){return e.isValidTrack(t)})}},{key:"forcedLanguage",get:function(){return this.pForcedLanguage},set:function(e){this.pForcedLanguage=e,this.updateForcedNarrative()}},{key:"setTrackMode",value:function(e){var t=this;return new Promise(function(i,n){var r=e!==t.currentTextTrackMode,a=function(){t.currentTextTrack.mode=e,t.updateForcedNarrative(),r&&setTimeout(function(){return t.emit("textTrackModeChange",{mode:e})},0);var n="disabled";"hidden"===e&&(n="enabled for event driven external custom rendering"),"showing"===e&&(n="enabled for native rendering by the user agent"),t.logger.log("info","The ".concat(t.currentTextTrack.kind," track for language code ").concat(t.currentTextTrack.language," is being ").concat(n," ")),i()};t.currentTextTrackMode=e,"showing"===e&&"disabled"===t.currentTextTrack.mode?(t.currentTextTrack.mode="hidden",setTimeout(a,10)):a()})}},{key:"updateForcedNarrative",value:function(){var e=this,t=Array.from(this.pTextTracks).filter(function(e){return"forced"===e.kind});if(t.forEach(function(e){return e.mode="disabled"}),"disabled"===this.currentTextTrackMode){var i=t.find(function(t){return t.language===e.pForcedLanguage});i&&(i.addEventListener("cuechange",this.onCueChange),i.mode=this.config.textTrackSettings.enabledMode)}}},{key:"addTrack",value:function(e){this.addedTracks.includes(e)||(this.addedTracks.push(e),this.isValidTrack(e)&&(e.addEventListener("cuechange",this.onCueChange),this.logger.log("info","A ".concat(e.kind," text track was added for ").concat(e.language)),this.emit("textTrackAdded",e)))}},{key:"addEvents",value:function(){this.pTextTracks.addEventListener("addtrack",this.onTextTrackAdded),this.pTextTracks.addEventListener("change",this.onTextTrackChange),this.video.addEventListener("addtrack",this.onVideoTextTrackAdded),this.video.addEventListener("seeked",this.onVideoSeeked)}},{key:"removeEvents",value:function(){var e=this;this.pTextTracks.removeEventListener("addtrack",this.onTextTrackAdded),this.pTextTracks.removeEventListener("change",this.onTextTrackChange),this.video.removeEventListener("addtrack",this.onVideoTextTrackAdded),this.video.removeEventListener("seeked",this.onVideoSeeked),Ar(this.pTextTracks,function(t){return t.removeEventListener("cuechange",e.onCueChange)})}},{key:"isDuplicateTrack",value:function(e){if(this.existingTrack.includes(e))return!1;var t=this.existingTrack.some(function(t){return e.language===t.language&&e.label===t.label&&e.kind===t.kind});return t||this.existingTrack.push(e),t}},{key:"isTextTrack",value:function(e){return"captions"===e||"subtitles"===e}},{key:"isExpired",value:function(e){return e.expired}},{key:"isValidTrack",value:function(e){return!(!e||!this.isTextTrack(e.kind)||this.ignoreBlankTracks&&!e.label&&!e.language||this.isExpired(e))}}]),e}(),Dr=function(){function e(t,i){(0,rt.default)(this,e),this.waiting=!1,this.time=NaN,this.next=null,this.video=t.video,this.onWaitingChange=i,this.onWaiting=this.onWaiting.bind(this),this.onSeeking=this.onSeeking.bind(this),this.onUpdateTime=this.onUpdateTime.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.video.addEventListener("waiting",this.onWaiting),this.video.addEventListener("seeking",this.onSeeking),this.video.addEventListener("error",this.onError)}return(0,nt.default)(e,[{key:"clearUpdate",value:function(){this.video.removeEventListener("timeupdate",this.onUpdateTime)}},{key:"destroy",value:function(){var e=this.video;this.onWaitingChange=null,e.removeEventListener("waiting",this.onWaiting),e.removeEventListener("seeking",this.onSeeking),e.removeEventListener("timeupdate",this.onTimeUpdate),e.removeEventListener("error",this.onError),this.clearUpdate()}},{key:"setWaiting",value:function(e){var t;this.waiting=e,null==(t=this.onWaitingChange)||t.call(this,e),e&&this.video.addEventListener("timeupdate",this.onUpdateTime)}},{key:"onWaiting",value:function(){this.waiting||this.video.seeking||this.setWaiting(!0)}},{key:"onSeeking",value:function(){this.setWaiting(!0)}},{key:"onUpdateTime",value:function(){this.clearUpdate(),this.video.paused?this.setWaiting(!1):(this.time=this.video.currentTime,this.video.addEventListener("timeupdate",this.onTimeUpdate))}},{key:"onTimeUpdate",value:function(){this.time<this.video.currentTime&&(this.setWaiting(!1),this.time=NaN,this.video.removeEventListener("timeupdate",this.onTimeUpdate))}},{key:"onError",value:function(){this.waiting&&this.setWaiting(!1)}}]),e}(),Br=function(){function e(t){var i,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,rt.default)(this,e),this.metadataLoaded=!1,this.suppressErrors=!1,this.segmentDuration=6,this.pauseTime=NaN,this.eventsEnabled=!1,this.startedPlaying=!1,this.liveStreamInfo={isPlayingLive:!1,liveEdgeOffset:NaN,dvrWindowSize:NaN,relativeTime:NaN,relativeDuration:NaN,absoluteStart:NaN,absoluteTime:NaN,absoluteDuration:NaN},this.lastKnownTimes={absolute:NaN,relative:NaN,end:NaN},this.audioTrack=null,this.audioTracks=[],this.quality=null,this.qualities=null,this.textTrack=null,this.textTracks=[],this.minBitrate=0,this.maxBitrate=1/0,this.maxHeight=1/0,this.onVideoEvent=function(e){if(n.eventsEnabled){var t=n.delegate;if("loadedmetadata"===e.type&&(n.metadataLoaded=!0),n.metadataLoaded||"durationchange"===e.type)switch(e.type){case"timeupdate":t.timeUpdate();break;case"playing":n.startedPlaying=!0,t.playing();break;case"pause":n.metadataLoaded&&t.paused();break;case"seeking":t.seeking();break;case"seeked":t.seeked();break;case"ended":t.ended();break;case"durationchange":t.durationChange();break;case"volumechange":t.volumeChange(n.video.volume,n.video.muted);break;case"error":n.suppressErrors||n.error(n.createVideoElementError())}}},this.onTextEvent=function(e,t){if(n.eventsEnabled){var i=n.delegate;switch(e){case"textCuepoint":i.textCuepoints(t.activeCues,t.forced);break;case"textTrackModeChange":i.textTrackDisplayModeChange(t.mode);break;case"textTrackAdded":n.textTracks.push({id:n.textTracks.length.toString(),kind:t.kind,language:t.language,label:t.label||t.language}),i.textTracksChange(n.textTracks);break;case"textTrackAvailable":i.textTracksChange(n.textTracks);break;case"textTrackChange":var r=n.textTracks.find(function(e){return t.language===e.language&&t.kind===e.kind&&(t.label===e.label||t.language===e.label)});n.textTrack=r,i.textTrackChange(r)}}},this.context=t,this.options=r,this.video=t.video,this.delegate=this.context.getDelegate(),this.logger=t.logger,this.metadataSurface=this.createMetadataSurface(),this.waitingSurface=this.createWaitingSurface();var o=null==(i=this.context.resource.playback)?void 0:i.abr;o&&(o.maxBitrate&&(this.maxBitrate=o.maxBitrate),o.minBitrate&&(this.minBitrate=o.minBitrate),o.maxHeight&&(this.maxHeight=o.maxHeight)),a&&(this.textTrackSurface=this.createTextTrackSurface()),Vi(fr).forEach(function(e){return n.video.addEventListener(e,n.onVideoEvent)}),this.onCueChange=this.onCueChange.bind(this)}return(0,nt.default)(e,[{key:"destroy",value:function(){var e,t,i,n=this;return Vi(fr).forEach(function(e){return n.video.removeEventListener(e,n.onVideoEvent)}),this.listenToTextTracks(!1,!0),null==(e=this.metadataSurface)||e.destroy(),this.metadataSurface=null,null==(t=this.textTrackSurface)||t.destroy(),this.textTrackSurface=null,null==(i=this.waitingSurface)||i.destroy(),this.waitingSurface=null,this.context=null,this.options=null,this.delegate=null,this.logger=null,this.video=null,Promise.resolve()}},{key:"getIsLiveStream",value:function(){return this.video.duration===1/0}},{key:"setAutoQualitySwitching",value:function(e){throw new Error("setAutoQualitySwitching Method not implemented.")}},{key:"setQuality",value:function(e){throw new Error("setQuality Method not implemented.")}},{key:"setMinBitrate",value:function(e){this.minBitrate=e}},{key:"setMaxBitrate",value:function(e){this.maxBitrate=e}},{key:"setTextTrack",value:function(e){if(this.textTrackSurface){var t=Array.from(this.video.textTracks).find(function(t){return e.language===t.language&&e.kind===t.kind&&e.label===t.label});this.textTrackSurface.textTrack=t}}},{key:"setTextTrackMode",value:function(e){this.textTrackSurface&&(this.textTrackSurface.textTrackMode=e)}},{key:"setAudioTrack",value:function(e){throw new Error("setAudioTrack Method not implemented.")}},{key:"getId",value:function(){throw new Error("getId Method not implemented.")}},{key:"getCurrentTime",value:function(){return this.video.currentTime}},{key:"getDuration",value:function(){return this.video.duration}},{key:"getBuffered",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.video.buffered,i=[],n=e?0:this.getSeekable().start,r=0,a=t.length;r<a;r++)i.push({startTime:t.start(r)-n,endTime:t.end(r)-n});return i}},{key:"getLiveStreamInfo",value:function(){var e=this.liveStreamInfo,t=this.getSeekable(),i=t.start,n=t.end,r=this.video.currentTime,a=n-i,o=this.getLiveEdgeOffset(),s=Math.max(r-i,0);e.relativeTime=s,e.relativeDuration=a,e.absoluteDuration=Date.now(),e.dvrWindowSize=Math.floor(a),e.liveEdgeOffset=o,e.isPlayingLive=Math.ceil(r)>=this.calculateLiveBoundary(n),n!==this.lastKnownTimes.end&&(this.lastKnownTimes.end=n,e.absoluteStart=e.absoluteDuration-1e3*a,this.lastKnownTimes.absolute=Math.round(e.absoluteStart+1e3*e.relativeTime),this.lastKnownTimes.relative=r);var l=Math.round(1e3*(r-this.lastKnownTimes.relative));return e.absoluteTime=this.lastKnownTimes.absolute+l,e}},{key:"getThumbnails",value:function(e){return Promise.resolve([])}},{key:"load",value:function(){return this.enableSurfaceEvents(!0),this.suppressErrors=!0,Promise.resolve(vn(this.context.resource))}},{key:"play",value:function(){var e=this;return Promise.resolve().then(function(){return!isNaN(e.pauseTime)&&(e.pauseTime=NaN,e.pauseTime<e.liveStreamInfo.absoluteStart)?(e.logger.log("info","Playhead outside of DVR window bounds. Moving to start of DVR window."),e.seek(0)):e.getIsLiveStream()?e.seek(e.liveStreamInfo.relativeTime):void 0}).then(function(){return e.video.play()})}},{key:"pause",value:function(){var e;this.getIsLiveStream()&&!0===(null==(e=this.context.resource.overrides)?void 0:e.clearOutOfBoundsDvrBuffer)&&(this.pauseTime=this.liveStreamInfo.absoluteTime),this.video.pause()}},{key:"suspend",value:function(){}},{key:"resume",value:function(){}},{key:"seek",value:function(e){var t=this.getSeekable(),i=t.start,n=t.end,r=n-i;if(this.getIsLiveStream()){var a=this.getNoSeekRange(n),o=a.startTime,s=a.endTime;Bi(e,o,s)&&(e=e<this.liveStreamInfo.relativeTime?o:s),e=Di(e,this.getLiveEdgeOffset(),s)}var l=Ui(e,0,r,i,n);return cr(l)?(this.video.currentTime=l,Ii(this.video,"seeked")):Promise.resolve()}},{key:"resize",value:function(){}},{key:"clearText",value:function(){var e;null==(e=this.textTrackSurface)||e.clearCue()}},{key:"getMetrics",value:function(){var e=this.video,t={bandwidth:NaN,framerate:NaN,droppedVideoFrames:Number.NaN,totalVideoFrames:Number.NaN};"getVideoPlaybackQuality"in e?Object.assign(t,e.getVideoPlaybackQuality()):"webkitDroppedFrameCount"in e&&"webkitDecodedFrameCount"in e&&(t.droppedVideoFrames=e.webkitDroppedFrameCount,t.totalVideoFrames=e.webkitDroppedFrameCount+e.webkitDecodedFrameCount);var i=e.webkitDecodedFrameCount||e.mozPresentedFrames;return i&&(t.framerate=i/e.currentTime),t}},{key:"getLiveEdgeOffset",value:function(){var e=this.getSegmentDuration(),t=this.context.resource.playback.liveEdgeSyncFragmentCount;return Math.max(e,e*t)}},{key:"getRefreshInterval",value:function(){return 2*this.getSegmentDuration()}},{key:"calculateLiveBoundary",value:function(e){return e-this.getLiveEdgeOffset()-this.getRefreshInterval()}},{key:"getNoSeekRange",value:function(e){var t=this.calculateLiveBoundary(e),i=this.getRefreshInterval();return{startTime:t-i,endTime:t+i}}},{key:"createMetadataSurface",value:function(){return new Nr(this.context,this.delegate.metadataCuepoint)}},{key:"createTextTrackSurface",value:function(){return new Or(this.context,this.onTextEvent)}},{key:"createWaitingSurface",value:function(){return new Dr(this.context,this.delegate.waitingChange)}},{key:"enableSurfaceEvents",value:function(e){this.eventsEnabled=!0}},{key:"addEvents",value:function(e,t){var i=Ft(e.on)?"on":"addEventListener";Hi(t).forEach(function(t){return e[i](t[0],t[1])})}},{key:"removeEvents",value:function(e,t){var i=Ft(e.off)?"off":"removeEventListener";Hi(t).forEach(function(t){var n,r;null==(r=(n=t[1]).cancel)||r.call(n),e[i](t[0],t[1])})}},{key:"createVideoElementError",value:function(){var e=this.video.error,t=Object.keys(MediaError)[e.code-1]||Ci.messages.UNSPECIFIED_ERROR,i="3400";switch(e.code){case MediaError.MEDIA_ERR_ABORTED:t=e.toString(),i="3100";break;case MediaError.MEDIA_ERR_NETWORK:i="3001";break;case MediaError.MEDIA_ERR_DECODE:i="3200";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:i="3101";break;default:i="3400"}return{code:i,message:t,data:e,fatal:!0}}},{key:"getSegmentDuration",value:function(){return this.segmentDuration}},{key:"getSeekable",value:function(){var e={start:0,end:0},t=this.video.seekable,i=t.length-1;return i>=0&&(e.start=t.start(i),e.end=t.end(i)),e}},{key:"getErrorMessage",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n/a";return"".concat(e," fatal: ").concat(t," retry: ").concat(i)}},{key:"createError",value:function(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Ai(e,t,i,n)}},{key:"throwError",value:function(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.error(this.createError(e,t,i,n))}},{key:"error",value:function(e){this.delegate.error(e)}},{key:"createSidecarTextTrack",value:function(){var e,t=this.context,i=t.resource,n=t.video;(null==(e=i.location)?void 0:e.textTrackUrl)&&ar(i,n)}},{key:"updateQualities",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.qualities;if(t){t.sort(function(e,t){return e.bitrate-t.bitrate});var i=this.context.resource.playback.abr.capQualityToScreenSize&&this.video.getBoundingClientRect();t.forEach(function(t){t.enabled=rn(t,e.minBitrate,e.maxBitrate,e.maxHeight,i)}),t.some(function(e){return e.enabled})||this.logger.warn("Invalid qualities array. None of the values meet the current size/bitrate constraints."),this.delegate.qualitiesChange(t)}}},{key:"listenToTextTracks",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?"addEventListener":"removeEventListener";Array.from(this.context.video.textTracks).forEach(function(e){nr(e.kind)&&(e[n]("cuechange",t.onCueChange),i&&er(e))})}},{key:"onCueChange",value:function(e,t){var i=e.target,n=tr(i,this.video.currentTime),r=!0===e.target.forced;null!=t||(t="forced"===i.kind||e.forced||r),this.delegate.textCuepoints(n,t)}}],[{key:"canPlay",value:function(e,t){var i=e.avia,n=e.resource,r=i.getSystemInfo(),a=fn(n),o=t.includes(a);return r.hasMediaSource&&o}}]),e}(),Ur=(0,nt.default)(function e(t,i,n){(0,rt.default)(this,e),this.key=t,this.value=i,this.type=n,this.timeStamp=Date.now()}),Fr=Object.freeze({env:"__ENV__",playerVersion:"2.21.1",playerName:"@cbsinteractive/avia-js",buildTime:"2023-10-09T19:21:03.624Z"}),Vr=function(e){return e.ENTER_FULLSCREEN="enterFullScreen",e.INCREASE_VOLUME="increaseVolume",e.DECREASE_VOLUME="decreaseVolume",e.SEEK_BACK="seekBack",e.SEEK_FORWARD="seekForward",e.TOGGLE_PLAY="togglePlay",e.TOGGLE_TT="toggleTextTrack",e.TOGGLE_MUTE="toggleMute",e.PLAYLIST_NEXT="playListNext",e.PLAYLIST_PREV="playListPrev",e.STOP="stop",e}(Vr||{}),Hr=function(e){return e.ACTIVE="active",e.INACTIVE="inactive",e.IDLE="idle",e}(Hr||{}),$r=function(e){return e.PRE="PRE",e.MID="MID",e.POST="POST",e}($r||{}),Wr=function(e){return e.SSAI="ssai",e.CSAI="csai",e}(Wr||{}),Kr=function(e){return e.AD="ad",e.PLAYBACK="playback",e}(Kr||{}),zr=function(e){return e.PLAY="play",e.PAUSE="pause",e.SEEK="seek",e.GO_LIVE="go_live",e}(zr||{}),jr=function(e){return e.MAIN="main",e.DESCRIPTION="description",e}(jr||{}),Gr=function(e){return e.NONE="none",e.ATTEMPT_MUTED="attemptMuted",e.ATTEMPT_UNMUTED="attemptUnmuted",e.ATTEMPT_UNMUTED_THEN_MUTED="attemptUnmutedThenMuted",e}(Gr||{}),qr=function(e){return e.UNKNOWN="unknown",e.DETECTED="detected",e.INFERRED="inferred",e}(qr||{}),Yr=function(e){return e.SW_SECURE_CRYPTO="SW_SECURE_CRYPTO",e.SW_SECURE_DECODE="SW_SECURE_DECODE",e.HW_SECURE_CRYPTO="HW_SECURE_CRYPTO",e.HW_SECURE_DECODE="HW_SECURE_DECODE",e.HW_SECURE_ALL="HW_SECURE_ALL",e.UNKNOWN="unknown",e}(Yr||{}),Qr=function(e){return e.USABLE="usable",e.OUTPUT_RESTRICTED="output-restricted",e.UNKNOWN="unknown",e}(Qr||{}),Xr=function(e){return e.MULTI_CDN="x-cdn",e}(Xr||{}),Jr=function(e){return e.HOTKEY_ACTION="hotkeyaction",e.READY="ready",e.AD_SKIPPABLE_STATE_CHANGE="adskippablestatechange",e.AD_CUEPOINTS_AVAILABLE="adcuepointsavailable",e.AD_BREAK_START="adbreakstart",e.AD_BREAK_METADATA="adbreakmetadata",e.AD_BREAK_COMPLETE="adbreakcomplete",e.AD_START="adstart",e.AD_COMPLETE="adcomplete",e.AD_FIRST_QUARTILE="adfirstquartile",e.AD_MIDPOINT="admidpoint",e.AD_THIRD_QUARTILE="adthirdquartile",e.AD_SEGMENT_START="adsegmentstart",e.AD_SEGMENT_END="adsegmentend",e.AD_SEGMENT_REENTERED="adsegmentreentered",e.AD_SKIPPED="adskipped",e.AD_PROGRESS="adprogress",e.AD_PAUSED="adpaused",e.AD_PLAYING="adplaying",e.AD_STALLED="adstalled",e.AD_BREAK_DISCARDED="adbreakdiscarded",e.AD_CLICK="adclick",e.AUDIO_TRACK_INFO_CHANGE="audiotrackinfochange",e.AUDIO_TRACK_CHANGE="audiotrackchange",e.AUDIO_TRACKS_CHANGE="audiotrackschange",e.QUALITY_CHANGE="qualitychange",e.QUALITIES_CHANGE="qualitieschange",e.QUALITY_INFO_CHANGE="qualityinfochange",e.CDN_CHANGE="cdnchange",e.CLOCK="aviaclock",e.CONTENT_START="contentstart",e.CONTENT_DURATION_AVAILABLE="contentdurationavailable",e.CONTENT_SEGMENT_START="contentsegmentstart",e.CONTENT_PLAYING="contentplaying",e.CONTENT_PROGRESS="contentprogress",e.CONTENT_PAUSED="contentpaused",e.CONTENT_SEGMENT_END="contentsegmentend",e.CONTENT_COMPLETE="contentcomplete",e.CONTENT_IS_PLAYING_LIVE="contentisplayinglive",e.STREAM_TYPE_CHANGE="streamtypechange",e.STREAM_METADATA="streammetadata",e.STREAM_ID_AVAILABLE="streamidavailable",e.DRM_KEY_SYSTEM_CREATED="drmkeysystemcreated",e.ERROR="error",e.PLAYBACK_STARTED="playbackstarted",e.PLAYBACK_SUSPENDED="playbacksuspended",e.PLAYBACK_RESUMED="playbackresumed",e.RESOURCE_START="resourcestart",e.RESOURCE_END="resourceend",e.RESOURCE_BUFFERING="resourcebuffering",e.WAITING_CHANGE="waitingchange",e.SEEK_COMPLETE="seekcomplete",e.SEEK_START="seekstart",e.SEEK_REDIRECT_START="seekredirectstart",e.SEEK_REDIRECT_COMPLETE="seekredirectcomplete",e.METADATA_CUEPOINT="metadatacuepoint",e.TEXT_CUEPOINT="textcuepoint",e.TEXT_TRACK_CHANGE="texttrackchange",e.TEXT_TRACKS_CHANGE="texttrackschange",e.TEXT_TRACK_INFO_CHANGE="texttrackinfochange",e.TEXT_TRACK_ENABLED_CHANGE="texttrackenabledchange",e.TEXT_TRACK_AVAILABLE="texttrackavailable",e.THUMBNAIL_TRACK_AVAILABLE="thumbnailtrackavailable",e.LIVE_PRESENTATION_STOPPED="livepresentationstopped",e.PRESENTATION_SIZE_CHANGE="presentationsizechange",e.FULLSCREEN_CHANGE="fullscreenchange",e.LOG_EVENT="logevent",e.PLUGIN_EVENT="pluginevent",e.LANGUAGE_CHANGE="languagechange",e.AUTOPLAY_BLOCKED="autoplayblocked",e.VOLUME_CHANGE="volumechange",e.MUTE_CHANGE="mutechange",e.ACTIVE_STATE_CHANGE="activestatechange",e.PLAYBACK_STATE_CHANGE="playbackstatechange",e.METRIC="metric",e.VIDEO_ELEMENT_ADDED="videoelementadded",e.VIDEO_ELEMENT_REMOVED="videoelementremoved",e}(Jr||{}),Zr=["audiotrackinfochange","texttrackinfochange","qualityinfochange"],ea=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"warn",value:function(e){ci.deprecated(e)}},{key:"checkEventName",value:function(t){Zr.includes(t)&&e.warn("The ".concat(t," event has been deprecated. This check will be removed July 1st, 2023"))}},{key:"hookType",value:function(){e.warn("The HookType enum is deprecated in favor of PlayerHookType and will be removed after July 1st, 2023")}},{key:"qualityInfo",value:function(){e.warn("player.qualityInfo method is deprecated. Please use player.qualities instead. Access to this property will be completely removed July 1st, 2023")}},{key:"textTrackInfo",value:function(){e.warn("player.textTrackInfo method is deprecated. Please use player.textTracks instead. Access to this property will be completely removed July 1st, 2023")}},{key:"audioTrackInfo",value:function(){e.warn("player.audioTrackInfo method is deprecated. Please use player.audioTracks instead. Access to this property will be completely removed July 1st, 2023")}},{key:"language",value:function(){e.warn("player.language setter is deprecated. Please use player.selectAudioLanguage, player.selectTextLanguage, or player.selectLocalizationLanguage instead. Access to this property will be completely removed July 1st, 2023")}},{key:"getThumbnail",value:function(){e.warn("getThumbnail is deprecated. Please use player.getThumbnails instead. Access to this property will be completely removed July 1st, 2023")}},{key:"info",value:function(){e.warn("The info property of the metadata cuepoint event is deprecated. Please use the id and text properties instead. Access to the info property will be removed July 1st, 2024.")}},{key:"registerPlugins",value:function(){e.warn("The callback argument of the registerPlugins function is deprecated. Please use the promise returned by registerPlugins instead. Access to the info property will be removed July 1st, 2024.")}}]),e}(),ta=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"EVENT",get:function(){return ea.hookType(),"event"}},{key:"AD_BREAK",get:function(){return ea.hookType(),"adbreak"}},{key:"AD",get:function(){return ea.hookType(),"ad"}},{key:"ATTACH_RESOURCE",get:function(){return ea.hookType(),"attachresource"}},{key:"REQUEST",get:function(){return ea.hookType(),"request"}},{key:"RESPONSE",get:function(){return ea.hookType(),"response"}}]),e}(),ia="html5",na=function(e){return e.NONE="none",e.DOCUMENT="document",e.PLAYER="player",e}(na||{}),ra=function(e){return e.MEDIA_PLAYER="media-player",e.LEARN_MORE="learn-more",e}(ra||{}),aa=function(e){return e.EN="English",e.ES="Español",e.FR="Français",e.PT="Português",e.DE="Deutsche",e.PL="Polski",e.JA="日本人",e.KO="한국어",e.ZH="简体中文",e.IT="Italiano",e.RU="Русский",e}(aa||{}),oa=function(e){return e.API="api",e.UI="ui",e.MARK="mark",e.MEASURE="measure",e}(oa||{}),sa=function(e){return e.AUTO="auto",e.DESKTOP="desktop",e.MOBILE="mobile",e.TV="tv",e.LOW="low",e}(sa||{}),la=function(e){return e.IDLE="idle",e.STOPPED="stopped",e.PLAYING="playing",e.PAUSED="paused",e.WAITING="waiting",e}(la||{}),ua=function(e){return e.LOW="low",e.HIGH="high",e}(ua||{}),ca=function(e){return e[e.DEFINITION=0]="DEFINITION",e[e.HEIGHT=1]="HEIGHT",e[e.BITRATE=2]="BITRATE",e[e.CUSTOM=3]="CUSTOM",e}(ca||{}),da=function(e){return e.AUTO="auto",e.MANUAL="manual",e.UNAVAILABLE="unavailable",e}(da||{}),ha=function(e){return e.MANIFEST="manifest",e.SEGMENT="segment",e.KEY="key",e.OTHER="other",e}(ha||{}),fa=function(e){return e.VOD="VOD",e.LIVE="LIVE",e.DVR="DVR",e}(fa||{}),va=function(e){return e.SEEK_BY="seek_by",e}(va||{}),pa=function(e){return e.HLS="hls",e.DASH="dash",e.MP4="mp4",e.UNKNOWN="unknown",e}(pa||{}),ga=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,rt.default)(this,i),(n=t.call(this,"9000",e,null,!1,"API")).name="InvalidArgumentError",n}return(0,nt.default)(i)}(Ai),ya=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n,r,a){var o;return(0,rt.default)(this,i),(o=t.call(this,e,n,a,!0,"Plugin")).name="PluginError",o.config=r,o}return(0,nt.default)(i)}(Ai),ma=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"parseCaption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.trim().split("\n"),r=/([0-9:.]+)\s*-->\s*([0-9:.]+)([^\n]*)/;try{r.test(n[0])||(t=parseInt(n.shift()));var a=n[0].match(r).slice(1),o=a[2],s=ni(a[0]),l=ni(a[1]),u=n.slice(1).join("\n");return null!=o&&o.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-%]+)/g,function(e,t,n){return i[t]=n}),Tt({id:t,startTime:s,endTime:l,text:u},i)}catch(e){return null}}},{key:"parse",value:function(e){var t=this,i=(e=e.replace(/\r/g,"")).split("\n\n"),n=/^(WEBVTT|NOTE|STYLE)/;return i.reduce(function(e,i){if(!n.test(i)&&i){var r=t.parseCaption(i,e.length);r&&e.push(r)}return e},[])}}]),e}();function Aa(e,t){(null==e?void 0:e.style)&&(null==t?void 0:t.style)&&Object.assign(t.style,e.style)}var ka=function(){function e(t,i){(0,rt.default)(this,e),this.url=t,this.cues=i}return(0,nt.default)(e,[{key:"getCueAt",value:function(e){return this.cues.find(function(t){return t.startTime<=e&&t.endTime>=e})}},{key:"renderCueAt",value:function(e,t){Aa(this.getCueAt(e),t)}}],[{key:"create",value:function(t,i){var n=document.createElement("a");n.href=t;var r=n.protocol+"//"+n.hostname,a=r+n.pathname.split("/").slice(0,-1).join("/")+"/";return i.applyHook("request",{url:t},{objectType:"other"}).then(function(e){return Sn(e)}).then(function(e){return i.applyHook("response",{url:t,data:e})}).then(function(e){return e.data}).then(function(i){var n=ma.parse(i);return n.forEach(function(e){var t=e.text.split("#"),i=(0,Je.default)(t,2),n=i[0],o=i[1],s=n;/^(https?:)?\/\//.test(s)||(s=/^\//.test(s)?r+s:a+s);var l=o.split("="),u=l[0],c=l[1].split(","),d={backgroundImage:"url(".concat(s,")")},h={url:s};Ar(u,function(e,t){var i=c[t];switch(e){case"w":h.width=parseInt(i),d.width="".concat(i,"px");break;case"h":h.height=parseInt(i),d.height="".concat(i,"px");break;case"x":h.x=parseInt(i),d.backgroundPositionX="-".concat(i,"px");break;case"y":h.y=parseInt(i),d.backgroundPositionY="-".concat(i,"px")}}),e.style=d,e.data=h}),new e(t,n)})}}]),e}(),ba={};xt(ba,{applyRequestToXhr:function(){return Sa},createRequest:function(){return Ta},getHeader:function(){return Ca},loadScript:function(){return xa},makeUrl:function(){return wa}});var Ea=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;(0,rt.default)(this,i);var r=Object.assign({timeout:An.TIMEOUT},e||{});r.timeout||(r.timeout=An.TIMEOUT),(n=t.call(this,r)).timeoutHandles={},n.map={};var a=n.hasListenerFor(i.event.COMPLETE);if(n.opts.url&&a)n.loadScript(n.opts.url);else{if(!n.opts.urls||!a)throw new Error("Script load error: Missing url or listener. url: ".concat(n.opts.url||n.opts.urls,", hasListener: ").concat(a));n.loadScripts(n.opts.urls)}return n}return(0,nt.default)(i,[{key:"destroy",value:function(){if(this.timeoutHandles){for(var e in this.timeoutHandles)clearTimeout(this.timeoutHandles[e]);this.timeoutHandles=null,(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this)}}},{key:"loadScript",value:function(e,t){var n=this,r=document.createElement("script"),a="https:"===window.location.protocol?e.replace("http:","https:"):e;this.map[a]={hLoad:function(){return n.hLoadOrError(a)},hError:function(){return n.hLoadOrError(a,!0,!1)},scriptEl:r};var o=this.map[a];t&&this.on(i.event.COMPLETE,t),r.async=!0,r.addEventListener("load",o.hLoad),r.addEventListener("error",o.hError),this.timeoutHandles[a]=setTimeout(function(){return n.hLoadOrError(a,!0,!0)},this.opts.timeout),document.head.appendChild(r),r.src=a}},{key:"loadScripts",value:function(e,t){t&&this.on(i.event.COMPLETE,t);for(var n=0,r=e.length;n<r;n++)this.loadScript(e[n])}},{key:"hLoadOrError",value:function(e,t,n){var r=this;clearTimeout(this.timeoutHandles[e]),delete this.timeoutHandles[e];var a=this.map[e];for(var o in a.scriptEl.removeEventListener("load",a.hLoad),a.scriptEl.removeEventListener("error",a.hError),a)delete a[o];delete this.map[e],t&&this.shouldRetry()?(this.incrementAttempts(),setTimeout(function(){r.loadScript(e)},this.retryInterval)):this.emit(i.event.COMPLETE,{url:e,error:t,timedOut:!0===n})}}],[{key:"load",value:function(e){return new Promise(function(t,n){e.onComplete=function(e){var i=e.detail;return i.error||i.timedOut?n(i):t(i)},new i(e)})}}]),i}(En);function Ta(e){return{url:e,headers:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},credentials:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"same-origin"}}function Sa(e,t){Hi(e.headers).forEach(function(e){var i=(0,Je.default)(e,2),n=i[0],r=i[1];t.setRequestHeader(n,r)}),t.withCredentials="include"===e.credentials}function Ca(e,t){var i;if(!e||!t)return null;var n=new RegExp("".concat(e,":([^\\n\\r]+)"),"i");return null==(i=t.match(n))?void 0:i[1].trim()}function xa(e,t,i){return It(this,null,qe.default.mark(function n(){var r,a,o,s,l,u;return qe.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=(r=t||{}).overrides,o=r.networkTimeout,s=Jn.appNamespace,n.next=4,Ea.load({url:wa(e.url),timeout:(null==a?void 0:a.streamingLibLoaderTimeout)||o,errorRecovery:zi({},null==t?void 0:t.networkErrorRecovery,e.errorRecovery)});case 4:return l=i&&i()?i():{},u={url:e.url},n.abrupt("return",s.applyHook(s.AviaHookType.SCRIPT_LOAD,l,u));case 7:case"end":return n.stop()}},n)}))}function wa(e){var t=new URL(e,window.location.toString());return(Jn.isWebOs||"file:"===t.protocol&&/^\/\//.test(e))&&(t.protocol="https:"),t.toString()}Ea.event={COMPLETE:"complete"};var Pa={};function _a(e,t){(null==e?void 0:e.style)&&(null==t?void 0:t.style)&&Object.assign(t.style,e.style)}function Ia(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a={};return e&&(a.backgroundImage="url(".concat(e,")")),t&&(a.width="".concat(t,"px")),i&&(a.height="".concat(i,"px")),0!==n&&(a.backgroundPositionX="-".concat(n,"px")),0!==r&&(a.backgroundPositionY="-".concat(r,"px")),a}xt(Pa,{createThumbnailStyles:function(){return Ia},renderThumbnail:function(){return _a}});var La=Tt(Tt(Tt(Tt(Tt(Tt(St(Tt(Tt(Tt(Tt(Tt(Tt(Tt(St(Tt({},gr),{eventsToPromise:Mi}),ln),Mr),Wn),ba),Ri),Fi),ji),{request:Sn}),sn),Dt),Pa),pn),Bt),lr),Na=function(e){return e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_REC="com.microsoft.playready.recommendation",e.CLEAR_KEY="org.w3.clearkey",e.FAIRPLAY_1_0="com.apple.fps.1_0",e}(Na||{}),Ma=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;return(0,rt.default)(this,i),(e=t.call(this,{})).timer=NaN,e.pCount=0,e.pInterval=n,e}return(0,nt.default)(i,[{key:"destroy",value:function(){this.stop(),(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this)}},{key:"start",value:function(){var e=this;this.running||(this.timer=setInterval(function(){e.pCount++,e.emit(i.TIC_EVENT,{count:e.pCount})},this.pInterval))}},{key:"stop",value:function(){clearInterval(this.timer),this.timer=NaN,this.pCount=0}},{key:"running",get:function(){return!isNaN(this.timer)}},{key:"interval",get:function(){return this.pInterval}},{key:"count",get:function(){return this.pCount}}]),i}(li),Ra=Ma;Ra.TICK="tic",Ra.TIC_EVENT=Ma.TICK;var Oa=(0,nt.default)(function e(){(0,rt.default)(this,e)}),Da=function(){function e(t){(0,rt.default)(this,e),e.serviceContainerMap[t]?ci.error(Oa.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","ServiceContainer")):(this.multiCoreKey=t,this.serviceMap={})}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.serviceMap)this.removeService(e);this.serviceMap=null}},{key:"registerService",value:function(e){this.serviceMap[e.name]=e,e.onRegister(this.multiCoreKey)}},{key:"retrieveService",value:function(e){return this.serviceMap[e]||null}},{key:"hasService",value:function(e){return null!=this.serviceMap[e]}},{key:"removeService",value:function(e){this.serviceMap[e]&&this.serviceMap[e].destroy(),delete this.serviceMap[e]}}],[{key:"getInstance",value:function(t){return t?(null==this.serviceContainerMap[t]&&(this.serviceContainerMap[t]=new e(t)),this.serviceContainerMap[t]):null}},{key:"removeServiceContainer",value:function(e){this.serviceContainerMap[e]&&this.serviceContainerMap[e].destroy(),delete this.serviceContainerMap[e]}}]),e}();Da.serviceContainerMap={};var Ba=function(){function e(t,i){(0,rt.default)(this,e),this.setNotifyMethod(t),this.setNotifyContext(i)}return(0,nt.default)(e,[{key:"destroy",value:function(){this.context=null,this.notify=null}},{key:"setNotifyMethod",value:function(e){this.notify=e}},{key:"setNotifyContext",value:function(e){this.context=e}},{key:"getNotifyMethod",value:function(){return this.notify}},{key:"getNotifyContext",value:function(){return this.context}},{key:"notifyObserver",value:function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)}},{key:"compareNotifyContext",value:function(e){return e===this.context}}]),e}(),Ua=function(){function e(t){(0,rt.default)(this,e),null==e.viewMap[t]?(this.multiCoreKey=t,this.mediatorMap={},this.observerMap={},e.viewMap[this.multiCoreKey]=this,this.initializeView()):ci.error(Oa.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","View"))}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.mediatorMap)this.removeMediator(this.mediatorMap[e].name);this.mediatorMap=null,this.observerMap=null}},{key:"registerObserver",value:function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]}},{key:"notifyObservers",value:function(e){var t,i;if(null!=this.observerMap[e.name]){var n,r=this.observerMap[e.name],a=[];for(t=0,i=r.length;t<i;t++)n=r[t],a.push(n);for(t=0,i=a.length;t<i;t++)(n=a[t]).notifyObserver(e)}}},{key:"removeObserver",value:function(e,t){if(this.observerMap){for(var i=this.observerMap[e],n=i.length;n--;)if(!0===i[n].compareNotifyContext(t)){i.splice(n,1);break}0===i.length&&delete this.observerMap[e]}}},{key:"registerMediator",value:function(e){var t,i,n,r=e.name;if(!this.mediatorMap[r]){e.initializeNotifier(this.multiCoreKey),this.mediatorMap[r]=e;var a=e.listNotificationInterests();if(a.length>0)for(n=new Ba(e.handleNotification,e),t=0,i=a.length;t<i;t++)this.registerObserver(a[t],n);e.onRegister()}}},{key:"retrieveMediator",value:function(e){return this.mediatorMap[e]}},{key:"removeMediator",value:function(e){var t=this.mediatorMap[e];if(t){for(var i=t.listNotificationInterests(),n=i.length;n--;)this.removeObserver(i[n],t);delete this.mediatorMap[e],t.onRemove()}}},{key:"hasMediator",value:function(e){return null!=this.mediatorMap[e]}},{key:"initializeView",value:function(){}}],[{key:"getInstance",value:function(t){return t?(this.viewMap[t]||(this.viewMap[t]=new e(t)),this.viewMap[t]):null}},{key:"removeView",value:function(e){this.viewMap[e]&&this.viewMap[e].destroy(),delete this.viewMap[e]}}]),e}();Ua.viewMap={};var Fa=function(){function e(t){(0,rt.default)(this,e),e.controllerMap[t]?ci.error(Oa.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","Controller")):(this.multiCoreKey=t,e.controllerMap[this.multiCoreKey]=this,this.commandMap={},this.view=null,this.initializeController())}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.commandMap)this.removeCommand(e);this.commandMap=null,this.view=null}},{key:"initializeController",value:function(){this.view=Ua.getInstance(this.multiCoreKey)}},{key:"executeCommand",value:function(e){var t=this.commandMap[e.name];if(t){var i=new t;i.initializeNotifier(this.multiCoreKey),i.execute(e)}}},{key:"registerCommand",value:function(e,t){this.commandMap[e]||this.view.registerObserver(e,new Ba(this.executeCommand,this)),this.commandMap[e]=t}},{key:"hasCommand",value:function(e){return!!this.commandMap[e]}},{key:"removeCommand",value:function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)}}],[{key:"getInstance",value:function(t){return t?(this.controllerMap[t]||(this.controllerMap[t]=new e(t)),this.controllerMap[t]):null}},{key:"removeController",value:function(e){this.controllerMap[e]&&this.controllerMap[e].destroy(),delete this.controllerMap[e]}}]),e}();Fa.controllerMap={};var Va=function(){function e(t){(0,rt.default)(this,e),this.proxyMap=null,e.modelMap[t]?ci.error(Oa.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","Model")):(this.multiCoreKey=t,e.modelMap[t]=this,this.proxyMap={},this.initializeModel())}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.proxyMap)this.removeProxy(e);this.proxyMap=null}},{key:"initializeModel",value:function(){}},{key:"registerProxy",value:function(e){this.proxyMap[e.name]=e,e.initializeNotifier(this.multiCoreKey),e.onRegister()}},{key:"retrieveProxy",value:function(e){return this.proxyMap[e]||null}},{key:"hasProxy",value:function(e){return null!=this.proxyMap[e]}},{key:"removeProxy",value:function(e){var t=this.proxyMap[e];t&&(t.onRemove(),this.proxyMap[e]=null)}}],[{key:"getInstance",value:function(t){return t?(null==this.modelMap[t]&&(this.modelMap[t]=new e(t)),this.modelMap[t]):null}},{key:"removeModel",value:function(e){this.modelMap[e]&&this.modelMap[e].destroy(),delete this.modelMap[e]}}]),e}();Va.modelMap={};var Ha=function(){function e(t,i,n){(0,rt.default)(this,e),this.pName=t,this.pBody=i,this.pType=n}return(0,nt.default)(e,[{key:"name",get:function(){return this.pName}},{key:"body",get:function(){return this.pBody}},{key:"type",get:function(){return this.pType||null}},{key:"toString",value:function(){var e="\nBody: ".concat(null==this.pBody?"null":JSON.stringify(this.body)),t="\nType: ".concat(null==this.pType?"null":this.type);return"Notification Name: ".concat(this.name+e+t)}}]),e}(),$a=function(){function e(t,i){(0,rt.default)(this,e),this.model=null,this.view=null,this.controller=null,this.serviceContainer=null,this.initialized=!1,this.multiCoreKey=t,this.initializeFacade(),this.registerCommands(i)}return(0,nt.default)(e,[{key:"destroy",value:function(){this.model=null,this.view=null,this.controller=null,this.serviceContainer=null}},{key:"key",get:function(){return this.multiCoreKey}},{key:"appId",get:function(){return this.multiCoreKey}},{key:"logger",get:function(){return this.retrieveService("Logging").logger}},{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.logger).log.apply(t,[e].concat(n))}},{key:"registerCommand",value:function(e,t){this.controller.registerCommand(e,t)}},{key:"removeCommand",value:function(e){this.controller.removeCommand(e)}},{key:"hasCommand",value:function(e){return this.controller.hasCommand(e)}},{key:"registerProxy",value:function(e){this.model.registerProxy(e)}},{key:"retrieveProxy",value:function(e){return this.model?this.model.retrieveProxy(e):null}},{key:"removeProxy",value:function(e){this.model&&this.model.removeProxy(e)}},{key:"hasProxy",value:function(e){return this.model.hasProxy(e)}},{key:"registerMediator",value:function(e){this.view.registerMediator(e)}},{key:"retrieveMediator",value:function(e){return this.view?this.view.retrieveMediator(e):null}},{key:"removeMediator",value:function(e){this.view&&this.view.removeMediator(e)}},{key:"hasMediator",value:function(e){return this.view.hasMediator(e)}},{key:"registerService",value:function(e){this.serviceContainer.registerService(e)}},{key:"retrieveService",value:function(e){return this.serviceContainer?this.serviceContainer.retrieveService(e):null}},{key:"removeService",value:function(e){this.model&&this.serviceContainer.removeService(e)}},{key:"hasService",value:function(e){return this.serviceContainer.hasService(e)}},{key:"registerGlobalServices",value:function(e){for(var t in e)this.registerService(e[t])}},{key:"sendNotification",value:function(e,t,i){var n;n="string"==typeof t?new Ha(e,{},t):new Ha(e,t,i),this.notifyObservers(n)}},{key:"notifyObservers",value:function(e){null!=this.view&&this.view.notifyObservers(e)}},{key:"registerCommands",value:function(e){if(e)for(var t in e)e[t]&&this.registerCommand(t,e[t])}},{key:"initializeServiceContainer",value:function(){this.serviceContainer=Da.getInstance(this.multiCoreKey)}},{key:"initializeController",value:function(){this.controller=Fa.getInstance(this.multiCoreKey)}},{key:"initializeModel",value:function(){this.model=Va.getInstance(this.multiCoreKey)}},{key:"initializeView",value:function(){this.view=Ua.getInstance(this.multiCoreKey)}},{key:"initializeFacade",value:function(){if(this.initialized)throw new Error("Unexpected Condition: Facade already initialized");this.initializeModel(),this.initializeController(),this.initializeView(),this.initializeServiceContainer(),this.initialized=!0}}],[{key:"removeCore",value:function(e){this.facadeMap[e]&&(Va.removeModel(e),Ua.removeView(e),Fa.removeController(e),Da.removeServiceContainer(e),this.facadeMap[e].destroy(),delete this.facadeMap[e])}},{key:"hasCore",value:function(t){return null!=e.facadeMap[t]}},{key:"getInstance",value:function(e){if(!e)throw new Error(Oa.ERROR_NO_KEY);return this.facadeMap[e]}},{key:"createFacade",value:function(t,i){if(!t)throw new Error(Oa.ERROR_NO_KEY);if(this.facadeMap[t]){var n=new Error('Not creating facade - key "'.concat(t,'" already exists!'));throw n.key=t,n}return this.facadeMap[t]=new e(t,i),this.facadeMap[t]}}]),e}();$a.facadeMap={};var Wa=function(){function e(t){(0,rt.default)(this,e),this.pName=t}return(0,nt.default)(e,[{key:"name",get:function(){return this.pName}},{key:"destroy",value:function(){}},{key:"onRegister",value:function(e){this.facadeKey=e}},{key:"getLogger",value:function(){return this.getService("Logging").logger}},{key:"getService",value:function(e){return $a.getInstance(this.facadeKey).retrieveService(e)}},{key:"getModel",value:function(e){return this.getModelCollection().getModel(e)}},{key:"getModelCollection",value:function(){var e;return null==(e=$a.getInstance(this.facadeKey))?void 0:e.retrieveProxy("ModelCollectionProxy")}}]),e}(),Ka=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.call(this,"AutoplayCapabilities")).testDom=null,e.checkCompleted=!1,e.testVideoSrc=Ci.blankDataUrl,e.isMobile=null,e.info={supportsUnmutedAutoplay:null,supportsMutedAutoplay:null},Jn.supportsUnrestrictedAutoplay&&(e.setInfo(!0,!0),e.checkCompleted=!0),e}return(0,nt.default)(i,[{key:"autoplayInfo",get:function(){return this.info}},{key:"destroy",value:function(){clearTimeout(this.timeout),(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this)}},{key:"detectCapabilities",value:function(e){var t=this;return this.detecting?this.detecting:(e&&(this.testVideoSrc=e),this.detecting=new Promise(function(e){t.checkCompleted?e(t.info):(t.createTestDom(),t.internalCallback=function(){return e(t.info)},t.checkUnmutedAutoplay())}))}},{key:"finishCheck",value:function(e,t){var i=this;this.setInfo(e,t),this.checkCompleted=!0,this.internalCallback(),this.timeout=setTimeout(function(){return i.cleanUp()},100)}},{key:"setInfo",value:function(e,t){this.info.supportsUnmutedAutoplay=e,this.info.supportsMutedAutoplay=t}},{key:"cleanUp",value:function(){this.testDom&&this.testDom.parentNode.removeChild(this.testDom),this.testDom=null}},{key:"checkUnmutedAutoplay",value:function(){var e=this,t=this.createVideoElement(!1);if(t){t.load();var i=t.play();void 0===i?this.isMobile?this.detectMobileCapabilities():this.finishCheck(!0,!0):i.then(function(){e.finishCheck(!0,!0)}).catch(function(t){e.checkMutedAutoplay()})}else this.finishCheck(!0,!0)}},{key:"checkMutedAutoplay",value:function(){var e=this;if(this.isEarlySafari11())this.finishCheck(!1,!1);else{var t=this.createVideoElement(!0);t.load(),t.play().then(function(){e.finishCheck(!1,!0)}).catch(function(i){if(t.error&&e.testVideoSrc!==Ci.blankDataUrl)return e.testVideoSrc=Ci.blankDataUrl,void e.checkUnmutedAutoplay();e.finishCheck(!1,!1)})}}},{key:"isEarlySafari11",value:function(){var e="Safari"===Jn.browser&&"Desktop"===Jn.device,t=e?Jn.browserVersionInfo.majorVersion:null,i=e?Jn.browserVersionInfo.minorVersion:null,n=11===t&&0===i,r=Jn.browserVersionInfo.versionString,a=r?r.split("."):null;return n&&(!a[2]||parseInt(a[2])<3)}},{key:"detectMobileCapabilities",value:function(){var e=this.isAutoplayEligibleAndroid()||this.isAutoplayEligibleIos();this.finishCheck(!1,e)}},{key:"isAutoplayEligibleAndroid",value:function(){return"Android"===Jn.os&&"Chrome"===Jn.browser&&this.isChromeAutoplayEligible()}},{key:"isAutoplayEligibleIos",value:function(){var e="iOS"===Jn.os&&Jn.browserVersionInfo.majorVersion>=10,t=e&&"Safari"===Jn.browser,i=e&&!t&&("Chrome-iOS"===Jn.browser||"Chrome"===Jn.browser)&&this.isChromeAutoplayEligible();return t||i}},{key:"isChromeAutoplayEligible",value:function(){return Jn.browserVersionInfo.majorVersion>=54}},{key:"createVideoElement",value:function(e){var t=this.document;if(!t)return null;var i=t.createElement("video");return e&&(i.muted=!0,i.setAttribute("muted","muted"),i.setAttribute("playsinline","playsinline")),i.volume=.005,i.style.width="100%",i.style.height="100%",i.src=this.testVideoSrc,this.testDom.appendChild(i),i}},{key:"createTestDom",value:function(){var e=this.document;if(!this.document)return null;var t=e.createElement("div"),i=t.style,n="-1000px";return i.position="absolute",i.top=n,i.left=n,i.width="400px",i.height="225px",e.body.appendChild(t),this.testDom=t,t}},{key:"document",get:function(){return Jn.document||null}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new i),this.instance}}]),i}(Wa),za=(0,nt.default)(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,rt.default)(this,e),this.plugins=[],this.autoplay="none",this.networkErrorRecovery={},this.networkTimeout=An.TIMEOUT,this.id=qt(),this.performanceMode="auto",this.renderTextTrackNatively=!0,this.useNativeFullscreen=!0,this.playsInline=!1,this.useNativeControls=!1,this.overrides={},this.enableOm=!1,this.enableMoat=!1,this.keyboardScope="player",this.logLevel="off",this.language=navigator.language,this.localization={},this.idleDelay=3e3,this.ignoreBlankTextTracks=!1;var i=t,n=i.container,r=Ct(i,["container"]);if(Jn.isBrowser&&(null==n||!(n.constructor===HTMLDivElement||"object"===(0,at.default)(n)&&"function"==typeof n.getBoundingClientRect||"string"==typeof n&&null!=document.querySelector(n))))throw new Error("Invalid player configuration: Missing presentation container.");zi(this,r),this.container=n,null!=this.audioLanguage||(this.audioLanguage=this.language),null!=this.textLanguage||(this.textLanguage=this.language),null!=this.localizationLanguage||(this.localizationLanguage=this.language),null!=this.reuseVideoElement||(this.reuseVideoElement=Jn.isIos)}),ja=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,rt.default)(this,e),this.sessionId=null,this.contentId=null,this.ad={adapter:null,showPrerollOnNonZeroStart:!1,suppressAdUi:!1,viewabilityTracking:{partner:null,viewGuid:null,pageType:null},csai:null,ssai:null},this.location={mediaUrl:null,textTrackUrl:null,thumbnailTrackUrl:null,posterImageUrl:null,drm:{playready:{url:null,header:null,priority:null,audioRobustness:null,videoRobustness:null},widevine:{url:null,header:null,priority:null,audioRobustness:null,videoRobustness:null},fairplay:{appCertUrl:null,licenseUrl:null,header:null},aes:{header:null,provider:null}}},this.playback={id3OwnerIds:null,startTime:NaN,preloadContent:!1,enableAdvancedCodecs:!1,liveEdgeSyncFragmentCount:3,abr:{maxBitrate:NaN,minBitrate:NaN,startBitrate:NaN,maxHeight:1/0,maxCategory:null,capQualityToScreenSize:!0,ignoreDevicePixelRatio:!0}},this.metadata={},this.tracking={},this.cmcd={enabled:!0,sessionId:null,contentId:null,useHeaders:!1},this.overrides={},zi(this,t);var i=this.playback.abr,n=i.maxCategory,r=i.maxHeight;n&&!Number.isFinite(r)&&(i.maxHeight=Xi(n))}return(0,nt.default)(e,null,[{key:"validate",value:function(e){if(Ut(e))throw new Error(Ci.messages.RESOURCE_MISSING);var t=[];if(Object.keys(Ga).forEach(function(i){i in e||t.push(i)}),t.length)throw new Error("One or more configuration properties not found: ".concat(t.join(", ")))}}]),e}(),Ga=new ja,qa=function(){function e(){(0,rt.default)(this,e),this.multiCoreKey=null}return(0,nt.default)(e,[{key:"destroy",value:function(){}},{key:"onRemove",value:function(){this.multiCoreKey=null}},{key:"facade",get:function(){return $a.getInstance(this.multiCoreKey)}},{key:"sendNotification",value:function(e,t,i){var n=this.facade;n&&n.sendNotification(e,t,i)}},{key:"initializeNotifier",value:function(e){this.multiCoreKey=e}}]),e}(),Ya=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this)).proxyName=null,r.pData=null,r.proxyName=e,r.pData=n||{},r}return(0,nt.default)(i,[{key:"name",get:function(){return this.proxyName}},{key:"data",get:function(){return this.pData}},{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){this.pData=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}}]),i}(qa),Qa=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,rt.default)(this,i),(n=t.call(this,"HookProxy",null)).aviaHookManager=null,n.pHookManager=null,n.pHookManager=new bi(Ei),n.aviaHookManager=e,n}return(0,nt.default)(i,[{key:"onRemove",value:function(){var e;null==(e=this.pHookManager)||e.destroy(),this.aviaHookManager=null,this.pHookManager=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"defineHook",value:function(e,t){this.pHookManager.defineHook(e,t)}},{key:"hasHook",value:function(e){return this.pHookManager.hasHook(e)||this.aviaHookManager.hasHook(e)}},{key:"registerHook",value:function(e,t){this.pHookManager.registerHook(e,t)}},{key:"removeHook",value:function(e,t){this.pHookManager.removeHook(e,t)}},{key:"applyHook",value:function(e,t,i){return It(this,null,qe.default.mark(function n(){var r,a;return qe.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==(r=this.aviaHookManager)?void 0:r.applyHook(e,t,i);case 2:return a=n.sent,n.abrupt("return",this.pHookManager.applyHook(e,a,i));case 4:case"end":return n.stop()}},n,this)}))}}]),i}(Ya),Xa=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this,e)).pLogger=n,r}return(0,nt.default)(i,[{key:"destroy",value:function(){this.pLogger.destroy(),this.pLogger=null}},{key:"logger",get:function(){return this.pLogger}}]),i}(Wa),Ja=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;(0,rt.default)(this,i),(n=t.call(this,e||{})).pAppId=e.id,n.pFacade=$a.createFacade(n.pAppId,e.commandMap||null);var r=e.logger;return n.pFacade.registerService(new Xa("Logging",r)),Vi(Rt).forEach(function(e){return r.on(e,function(e){return n.sendEvent(e.type,e.detail)})}),n}return(0,nt.default)(i,[{key:"destroy",value:function(){this.mdlCollProxy=null,this.pFacade=null,(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this),$a.removeCore(this.pAppId)}},{key:"appId",get:function(){return this.pAppId}},{key:"sendNotification",value:function(e,t,i){this.pFacade.sendNotification(e,t,i)}},{key:"registerGlobalServices",value:function(e){var t=this.pFacade;for(var i in e)t.registerService(e[i])}},{key:"facade",get:function(){return this.pFacade}},{key:"modelCollectionProxy",get:function(){return this.mdlCollProxy||(this.mdlCollProxy=this.facade.retrieveProxy("ModelCollectionProxy")),this.mdlCollProxy}},{key:"appMediator",get:function(){return this.pFacade.retrieveMediator("AppMediator")}}]),i}(li);function Za(){return function(e,t,i){Kt(e.apiMethods)||(e.apiMethods={}),e.apiMethods[t]=i.value}}function eo(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,i,n){Kt(t.apiAccessors)||(t.apiAccessors={});var r={get:n.get,set:e?void 0:n.set||void 0};t.apiAccessors[i]=r}}function to(e,t){var i=function(i){e[i]=function(){for(var e,n,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(null==(n=null==(e=null==t?void 0:t.apiMethods)?void 0:e[i])?void 0:n.apply(t,a))||null}};for(var n in t.apiMethods)i(n);var r=function(i){var n=t.apiAccessors[i],r={};n.get&&(r.get=function(){return t[i]}),n.set&&(r.set=function(e){t[i]=e}),Object.defineProperty(e,i,r)};for(var a in t.apiAccessors)r(a);return e}var io=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.call(this)}return(0,nt.default)(i,[{key:"logger",get:function(){return this.facade.logger}},{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.logger).log.apply(t,[e].concat(n))}}]),i}(function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.call(this)}return(0,nt.default)(i,[{key:"system",get:function(){return Jn}},{key:"getModel",value:function(e){return this.getModelCollection().getModel(e)}},{key:"getProxy",value:function(e){return this.facade?this.facade.retrieveProxy(e):null}},{key:"getService",value:function(e){return this.facade?this.facade.retrieveService(e):null}},{key:"getModelCollection",value:function(){return this.facade?this.facade.retrieveProxy("ModelCollectionProxy"):null}}]),i}(qa)),no=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.facade.retrieveMediator("PresentationMediator"),i=this.facade.retrieveProxy("ContentPlaybackStateProxy"),n=t.adapter,r=e.body.value;if(i.isAbrSwitchingAvailable)switch(e.name){case"switchBitrate":var a=nn(i.qualities,r);this.switchToIndex(a,i,n);break;case"switchQualityCategory":i.userQualityCategory=r,this.switchQualityCategory(i,r,n);break;case"autoQualitySwitching":n.setAutoQualitySwitching(r),i.qualitySwitchingMode=this.getAbrMode(r);break;case"minBitrate":n.setMinBitrate(r);break;case"maxBitrate":n.setMaxBitrate(r)}else i.qualitySwitchingMode="unavailable"}},{key:"switchToIndex",value:function(e,t,i){var n=t.minIndex,r=t.maxIndex;Bi(e,n,r)?(i.setAutoQualitySwitching(!1),t.qualitySwitchingMode=this.getAbrMode(!1),i.setQuality(t.qualities[e])):this.logger.log("warn",e>=r?Ci.messages.ABR_MANUAL_SWITCHING_REACHED_UPPER_BOUNDS:Ci.messages.ABR_MANUAL_SWITCHING_REACHED_LOWER_BOUNDS)}},{key:"switchQualityCategory",value:function(e,t,i){if("AUTO"===t)return i.setAutoQualitySwitching(!0),i.setMinBitrate(NaN),void i.setMaxBitrate(NaN);var n=Yi(e.qualities,t),r=n.minBitrate,a=n.maxBitrate,o=n.minIndex;o===n.maxIndex?this.switchToIndex(o,e,i):(i.setMinBitrate(r),i.setMaxBitrate(a))}},{key:"getAbrMode",value:function(e){return e?"auto":"manual"}}]),i}(io),ro=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.call(this)).subCommands=null,e.subCommands=[],e.initializeMacroCommand(),e}return(0,nt.default)(i,[{key:"addSubCommand",value:function(e){this.subCommands.push(e)}},{key:"execute",value:function(e){for(var t;this.subCommands.length>0;)(t=new(this.subCommands.shift())).initializeNotifier(this.multiCoreKey),t.execute(e)}}]),i}(qa),ao=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this,e,{activeState:"inactive",idleDelay:n.idleDelay})).mouseDown=!1,r.mouseOver=!1,r.idleEvents=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","touchstart","MSPointerMove","MSPointerDown","pointermove","pointerdown"],r.container=n.container,r.document=n.document,r}return(0,nt.default)(i,[{key:"onRegister",value:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.reset=this.reset.bind(this),this.idle=this.idle.bind(this),this.container.addEventListener("mouseenter",this.onMouseEnter),this.container.addEventListener("mouseleave",this.onMouseLeave),this.container.addEventListener("mousedown",this.onMouseDown),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("keydown",this.onKeyDown)}},{key:"onRemove",value:function(){this.container.removeEventListener("mouseenter",this.onMouseEnter),this.container.removeEventListener("mouseleave",this.onMouseLeave),this.container.removeEventListener("mousedown",this.onMouseDown),this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("keydown",this.onKeyDown),this.stop(),this.container=null,this.document=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"applyListeners",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?"add":"remove";this.idleEvents.forEach(function(i){return e.container["".concat(t,"EventListener")](i,e.reset,{passive:!0})})}},{key:"start",value:function(){this.stop(),this.applyListeners(),this.timeout=setTimeout(this.idle,this.idleDelay)}},{key:"stop",value:function(){clearTimeout(this.timeout),this.applyListeners(!1)}},{key:"idle",value:function(){this.activeState=this.mouseOver?"idle":"inactive"}},{key:"reset",value:function(){this.activeState="active",this.start()}},{key:"onMouseEnter",value:function(){this.reset(),this.mouseOver=!0,this.activeState="active",this.start()}},{key:"onMouseLeave",value:function(){this.reset(),this.mouseOver=!1,this.activeState="inactive"}},{key:"onMouseDown",value:function(){this.mouseDown=!0}},{key:"onMouseUp",value:function(){this.mouseDown&&(this.mouseDown=!1,this.start())}},{key:"onKeyDown",value:function(e){var t=this,i=e.key,n=e.keyCode;"Tab"!==i&&9!==n||setTimeout(function(){var e=t.document.activeElement,i=t.container===e||t.container.contains(e);i&&t.stop(),t.activeState=i?"active":"inactive"},0)}},{key:"activeState",get:function(){return this.data.activeState},set:function(e){this.mouseDown&&(e="active"),e!==this.data.activeState&&(this.data.activeState=e,this.sendNotification("activestatechange",{activeState:e}))}},{key:"idleDelay",get:function(){return this.data.idleDelay}}]),i}(Ya),oo={position:"absolute",width:"100%",height:"100%",padding:"0",margin:"0",overflow:"hidden"};function so(){var e=document.createElement("video");return e.style.height="100%",e.style.width="100%",e.style.backgroundColor="#000",e.dataset.elementId=qt(),e}function lo(){var e=uo("adContainer",oo);return e.dataset.elementId=qt(),e}function uo(e,t){var i=document.createElement("div");return i.setAttribute("data-role",e),Object.assign(i.style,t),i}function co(){var e=uo("adClickEl",{display:"none",padding:"4px 8px",fontSize:"12px",background:"#dedede",lineHeight:"14px",color:"#000",position:"absolute",right:"2px",top:"2px",textAlign:"center"});return e.innerHTML="Learn More",e}var ho=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=e.body.playerOptions.container,i=this.system,n=this.getModel("PlayerOptions");if(i.isBrowser&&t){var r="string"==typeof t?i.document.querySelector(t):t,a=[];n.useNativeControls&&(a=["ccContainer"]);var o=function(e,t,i){var n,r,a=(n={},(0,ot.default)(n,"main",e),(0,ot.default)(n,"video",null),n),o=e,s=o.style;s.position=s.position||"relative",s.padding=s.padding||"0",s.margin=s.margin||"0",s.width=s.width||"100%",s.height=s.height||"100%",s.backgroundColor=s.backgroundColor||"#000",s.overflow=s.overflow||"hidden",o.classList.add("avia-container");var l=document.createElement("style");o.parentElement.insertAdjacentElement("beforebegin",l),l.innerText=":root{--avia-timed-text-offset: 60px;}.avia-container.avia-cc-offset video::-webkit-media-text-track-container{bottom: var(--avia-timed-text-offset);height: auto;}";var u,c=o.hasChildNodes()?o.firstChild:null;if(["adContainer","ccContainer","videoContainer"].forEach(function(e){t.includes(e)||(u="adContainer"===e?lo():uo(e,oo),a[e]=u,c?o.insertBefore(u,c):o.appendChild(u),c=u)}),!0===i.reuseVideoElement){var d=so();a.videoContainer.appendChild(d),a.video=d}return a.adClickEl=co(),o.appendChild(a.adClickEl),r={},(0,ot.default)(r,"main",a.main),(0,ot.default)(r,"video",a.video),(0,ot.default)(r,"videoContainer",a.videoContainer),(0,ot.default)(r,"ccContainer",a.ccContainer),(0,ot.default)(r,"adContainer",a.adContainer),(0,ot.default)(r,"adClickEl",a.adClickEl),(0,ot.default)(r,"style",l),r}(r,a,n),s=this.facade.retrieveProxy("PlayerDomProxy");s.setModel(o),s.showAdContainer(!1),n.useNativeControls&&s.setVideoAttribute("controls",""),!1!==n.playsInline&&s.setVideoAttribute("playsinline",""),s.setVideoAttribute("data-player-id",this.facade.appId),this.facade.registerProxy(new ao("ActivityProxy",{container:r,document:i.document,idleDelay:n.idleDelay})),this.log("info","Player DOM created.")}}}]),i}(io),fo="webkitneedkey",vo=function(){function e(t,i,n,r,a){var o=this;(0,rt.default)(this,e),this.appCertLoaded=!1,this.webKitNeedKeyCalled=!1,this.webkitNeedKeyHandler=function(e){return o.onWebkitNeedKey(e)},this.onError=a,this.drmInfo=i,this.video=t,this.video.addEventListener(fo,this.webkitNeedKeyHandler),this.logger=n,this.delegate=r}return(0,nt.default)(e,[{key:"initialize",value:function(){return It(this,null,qe.default.mark(function e(){var t,i;return qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delegate.applyHook("request",{url:this.drmInfo.appCertUrl,headers:{}});case 2:return t=e.sent,e.next=5,Sn(zi({responseType:"arraybuffer"},t));case 5:i=e.sent,this.appCertData=new Uint8Array(i),this.appCertLoaded=!0,this.webKitNeedKeyCalled&&this.initializeFairplayCDM();case 9:case"end":return e.stop()}},e,this)}))}},{key:"destroy",value:function(){this.appCertData=null,this.initData=null,this.onError=null,this.drmInfo=null,this.logger=null,this.video.removeEventListener(fo,this.webkitNeedKeyHandler),this.video=null}},{key:"onWebkitNeedKey",value:function(e){this.initData=e.initData,this.webKitNeedKeyCalled=!0,this.appCertLoaded&&this.initializeFairplayCDM()}},{key:"onLicenseRequestReady",value:function(e,t){var i=this,n=this.getDrmVendor(e),r=t.target,a={spc:mr(t.message),contentId:r.contentId},o="irdeto"===n||"unknown"===n?"arraybuffer":"text",s={"Content-Type":"application/x-www-form-urlencoded"},l=this.drmInfo.header;Ut(l)||Object.assign(s,l),this.delegate.applyHook("request",{url:e,method:"POST",responseType:o,headers:s,data:a}).then(function(e){var t=Wi(e),n=e.headers["Content-Type"];return"application/x-www-form-urlencoded"===n?t.data="spc="+encodeURIComponent(e.data.spc)+"&"+e.data.contentId:"application/json"===n&&(t.data=JSON.stringify(e.data)),Sn(t).then(function(e){var t="string"==typeof e?yr(e):new Uint8Array(e);r.update(t)}).catch(function(e){i.throwFatalError("3301",Ci.messages.FAIRPLAY_LICENSE_ERROR)})})}},{key:"onWebkitKeyAdded",value:function(e){this.logger.log("info",Ci.messages.WEBKIT_KEY_ADDED_SUCCESS)}},{key:"onWebkitError",value:function(e){this.throwFatalError("3301","".concat(Ci.messages.FAIRPLAY_LICENSE_ERROR))}},{key:"initializeFairplayCDM",value:function(){var e=this.getLicenseServerUrl(this.initData),t=this.getId(e,this.initData),i=this.video,n=Jn.global,r=Ci.messages;if(t){if(!i.webkitKeys){var a="com.apple.fps.1_0";if(!n.WebKitMediaKeys.isTypeSupported(a,"video/mp4"))return void this.throwFatalError("3300",r.FAIRPLAY_WEBKIT_ERROR);try{i.webkitSetMediaKeys(new n.WebKitMediaKeys(a))}catch(e){return void this.throwFatalError("3300",e.message)}}var o=this.concatInitDataIdAndCertificate(this.initData,t,this.appCertData),s=i.webkitKeys.createSession("video/mp4",o);s?(s.contentId=t,s.addEventListener("webkitkeymessage",this.onLicenseRequestReady.bind(this,e),!1),s.addEventListener("webkitkeyadded",this.onWebkitKeyAdded.bind(this),!1),s.addEventListener("webkitkeyerror",this.onWebkitError.bind(this),!1)):this.throwFatalError("3300",r.FAIRPLAY_WEBKIT_ERROR)}else this.throwFatalError("3300",r.FAIRPLAY_NO_CONTENT_ID)}},{key:"concatInitDataIdAndCertificate",value:function(e,t,i){"string"==typeof t&&(t=Tr(t));var n=0,r=new ArrayBuffer(e.byteLength+4+t.byteLength+4+i.byteLength),a=new DataView(r);new Uint8Array(r,n,e.byteLength).set(e),n+=e.byteLength,a.setUint32(n,t.byteLength,!0),n+=4;var o=new Uint16Array(r,n,t.length);return o.set(t),n+=o.byteLength,a.setUint32(n,i.byteLength,!0),n+=4,new Uint8Array(r,n,i.byteLength).set(i),new Uint8Array(r,0,r.byteLength)}},{key:"getLicenseServerUrl",value:function(e){return Ut(this.drmInfo.licenseUrl)?"https://"+String.fromCharCode.apply(null,new Uint16Array(e.buffer)).split("://")[1]:this.drmInfo.licenseUrl}},{key:"extractContentId",value:function(e){return Er(e).split("skd://")[1]}},{key:"getId",value:function(e,t){var i=gn.decode(e);return i.ContentId||i.contentId||i.assetId||this.extractContentId(t)}},{key:"getDrmVendor",value:function(e){var t="unknown";return-1!==e.indexOf("irdeto")?t="irdeto":-1!==e.indexOf("drmtoday")&&(t="drmtoday"),t}},{key:"throwFatalError",value:function(e,t){this.logger.log("error",e,t),this.onError({code:e,message:t,fatal:!0})}}]),e}(),po=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,rt.default)(this,i),(n=t.call(this,e,r,!0)).isNonZeroStartTime=!1,n.onAddAudioEvent=function(e){n.audioTracks=[],n.audioTrack=null,Ar(n.domAudioTracks,function(e,t){if(e.label||e.language){var i=e.kind,r={index:t,id:t.toString(),type:"alternative"===i||"description"===i?"description":"main",codec:"",language:e.language,label:e.label};n.audioTracks.push(r)}}),n.delegate.audioTracksChange(n.audioTracks),n.setAudioTrack(sr(n.audioTracks,n.context.playerOptions.audioLanguage)),n.audioTrack||n.changeAudioDebounced()},n.onChangeAudioEvent=function(e){var t=Array.from(n.domAudioTracks).find(function(e){return e.enabled});n.audioTrack=n.audioTracks.find(function(e){return e.id===t.id}),n.delegate.audioTrackChange(n.audioTrack)},n.onFairPlayError=function(e){n.delegate.error(e)};var a=n.context.resource.location.drm.fairplay;a.appCertUrl&&(n.fairplay=new vo(n.video,a,n.logger,n.delegate,n.onFairPlayError),n.fairplay.initialize(),n.delegate.drmKeySystemCreated("com.apple.fps.1_0"));var o=n.domAudioTracks;return o&&(n.addAudioDebounced=Rr(n.onAddAudioEvent,100),n.changeAudioDebounced=Rr(n.onChangeAudioEvent,100),o.addEventListener("addtrack",n.addAudioDebounced),o.addEventListener("change",n.changeAudioDebounced)),n}return(0,nt.default)(i,[{key:"domAudioTracks",get:function(){return this.video.audioTracks}},{key:"getId",value:function(){return i.ID}},{key:"destroy",value:function(){var e=this,t=this.video,n=this.domAudioTracks;return(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).call(this).then(function(){n&&(e.addAudioDebounced.cancel(),e.changeAudioDebounced.cancel(),n.removeEventListener("addtrack",e.addAudioDebounced),n.removeEventListener("change",e.changeAudioDebounced)),e.fairplay&&(e.fairplay.destroy(),e.fairplay=null),t.removeAttribute("src"),t.load()})}},{key:"load",value:function(){var e,t=this;this.suppressErrors=!0,(0,Xe.default)((0,it.default)(i.prototype),"load",this).call(this);var n=this.context.resource,r=n.location.mediaUrl,a=(null==(e=n.overrides)?void 0:e.mimeType)||hn(r),o=n.cmcd;return o.enabled&&(r=Fn(r,{ot:Cn.MANIFEST,sf:function(e){switch(a){case"application/vnd.apple.mpegurl":case"application/x-mpegURL":return _n.HLS;case"application/dash+xml":return _n.DASH;default:return _n.OTHER}}(),su:!0,sid:o.sessionId,cid:o.contentId,pr:this.video.playbackRate,v:$n})),this.delegate.applyHook("request",{url:r},{objectType:"manifest"}).then(function(e){t.video.src=e.url;var i=t.context.system;return Ii(t.video,"loadedmetadata").then(function(){i.isIos&&t.video.load();var e=n.playback.startTime;if(cr(e))return t.isNonZeroStartTime=!0,Ii(t.video,"canplaythrough").then(function(){return t.seek(e)})}).then(function(){return t.suppressErrors=!1,{manifest:{mimeType:a},fragment:{mimeType:void 0}}}).catch(function(){throw t.createVideoElementError()})})}},{key:"setAudioTrack",value:function(e){e&&(Ar(this.domAudioTracks,function(t,i){t.enabled=e.index===i}),this.textTrackSurface.forcedLanguage=e.language)}},{key:"setQuality",value:function(e){this.logger.log("info",Ci.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)}},{key:"setAutoQualitySwitching",value:function(e){this.logger.log("info",Ci.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)}},{key:"setMinBitrate",value:function(e){this.logger.log("info",Ci.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)}},{key:"setMaxBitrate",value:function(e){this.logger.log("info",Ci.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)}},{key:"setTextTrackMode",value:function(e){var t=this;this.textTrackSurface&&(this.isNonZeroStartTime&&!this.startedPlaying?(this.isNonZeroStartTime=!1,Ii(this.video,"seeked").then(function(){return t.textTrackSurface.textTrackMode=e})):this.textTrackSurface.textTrackMode=e)}}],[{key:"ID",get:function(){return ia}},{key:"config",get:function(){return{id:i.ID,role:["playback"],factory:function(e){return new i(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},isSupported:function(e){var t,i=fn(e.resource);return""!==(null==(t=e.video)?void 0:t.canPlayType(i))}}}}]),i}(Br),go=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,rt.default)(this,i),(n=t.call(this,"AdapterProxy",e)).adapterMap={},n.defaultAdapters=(0,ot.default)({},"playback",po.config),n}return(0,nt.default)(i,[{key:"onRemove",value:function(){this.adapterMap=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"registerAdapter",value:function(e){var t=e.id;this.adapterMap[t]=e}},{key:"retrieveAdapter",value:function(e){return this.adapterMap[e]}},{key:"removeAdapter",value:function(e){delete this.adapterMap[e]}},{key:"getAdaptersByRole",value:function(e){var t=Vi(this.adapterMap).filter(function(t){return t.role.includes(e)}),i=this.defaultAdapters[e];return i&&t.push(i),t}},{key:"createContext",value:function(e,t){var i=this.facade.retrieveMediator("PluginMediator").createPluginServices(),n=i.dom,r=i.system,a=this.facade.retrieveProxy("ModelCollectionProxy").getModel("PresentationState"),o=this.facade.retrieveProxy("TextTrackProxy"),s=this.facade.retrieveProxy("PerformanceProxy");return Object.assign(i,{resource:e,video:r.isWebMaf?r.webMafPlayer:n.video,container:n.main,autoplay:a.isAutoplay,muted:a.isMuteAtPlayStart,performanceSettings:s,textTrackSettings:o,getDelegate:t})}},{key:"createAdapter",value:function(e,t,i){return It(this,null,qe.default.mark(function n(){var r,a,o,s,l,u,c,d,h,f,v,p,g,y;return qe.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=this.createContext(t,i),o=this.getAdaptersByRole(e),s=(null==(r=a.resource[e])?void 0:r.adapter)||{},l=s.id,u=s.options,c=void 0===u?{}:u,d=l?o.filter(function(e){return e.id===l}):o,h=lt(d),n.prev=6,h.s();case 8:if((f=h.n()).done){n.next=26;break}if(v=f.value,p=zi({},v.options,c,s[v.id]),n.t0=!l,!n.t0){n.next=16;break}return n.next=15,v.isSupported(a,p);case 15:n.t0=!n.sent;case 16:if(!n.t0){n.next=18;break}return n.abrupt("continue",24);case 18:return n.next=20,v.factory(a,p);case 20:if(!(g=n.sent)){n.next=24;break}return this.facade.log("info","".concat(v.id," adapter created")),n.abrupt("return",g);case 24:n.next=8;break;case 26:n.next=31;break;case 28:n.prev=28,n.t1=n.catch(6),h.e(n.t1);case 31:return n.prev=31,h.f(),n.finish(31);case 34:throw y="Could not find adapter for role: ".concat(e),l&&(y+=", with id: ".concat(l)),new Ai("5000",y);case 37:case"end":return n.stop()}},n,this,[[6,28,31,34]])}))}}]),i}(Ya),yo=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this,e,{})).pLocalizationData=[],r.pLocale={},r.pLanguage=n,r.registerLocalizationData(i.LocalizationData),r}return(0,nt.default)(i,[{key:"onRemove",value:function(){this.pLocale=null,this.pLocalizationData=null,this.pLanguageTag=null,this.pLanguage=null}},{key:"getApi",value:function(){return to({},this)}},{key:"defaultLanguage",get:function(){return(null==navigator?void 0:navigator.language)?navigator.language:"en"}},{key:"language",get:function(){return this.pLanguage||this.defaultLanguage}},{key:"languageTag",get:function(){return this.pLanguageTag}},{key:"changeLanguage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultLanguage;this.pLanguage=t,this.pLanguageTag=Kn(this.language);var n=new RegExp("^".concat(this.pLanguageTag.language),"i"),r=function(t){var n=(0,Je.default)(t,2),r=n[0],a=n[1];return i.load(a).then(function(e){return[r,e]}).catch(function(t){return e.facade.log("error","Could not load locale file ".concat(a),t),[r,{}]})},a=this.pLocalizationData.map(function(e){var t=Hi(e).filter(function(e){return n.test(e[0])}).map(function(e){return"string"==typeof e[1]?r(e):e});return Promise.all(t)});return Promise.all(a).then(function(t){var i=t.map(function(e){return $i(e)}),n=zi.apply(void 0,(0,Qe.default)(i));return e.pLocale=n})}},{key:"registerLocalizationData",value:function(e){Ut(e)||this.pLocalizationData.push(e)}},{key:"localize",value:function(e,t){return Jt(this.lookup(e),t)}},{key:"lookup",value:function(e){var t=this,i=function(i){return(t.pLocale[i]||{})[e]};return i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.language)||i(this.pLanguageTag.language)||e}}],[{key:"load",value:function(e){return null==this.pExternalData[e]&&(this.pExternalData[e]=Sn({url:e,responseType:"json"})),this.pExternalData[e]}}]),i}(Ya);yo.pExternalData={},yo.LocalizationData={en:(Ve={},(0,ot.default)(Ve,"media-player","Media Player"),(0,ot.default)(Ve,"learn-more","Learn More"),Ve),es:(He={},(0,ot.default)(He,"media-player","Reproductor multimedia"),(0,ot.default)(He,"learn-more","Aprende más"),He)},_t([eo(!0)],yo.prototype,"defaultLanguage",1),_t([eo(!0)],yo.prototype,"language",1),_t([Za()],yo.prototype,"languageTag",1),_t([Za()],yo.prototype,"changeLanguage",1),_t([Za()],yo.prototype,"registerLocalizationData",1),_t([Za()],yo.prototype,"localize",1);var mo=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.apply(this,arguments)).resettables=["ContentPlaybackState"],e}return(0,nt.default)(i,[{key:"onRemove",value:function(){this.resettables=null;var e=this.facade.retrieveProxy("PlayerDomProxy");e&&e.removeDom(),(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"collection",get:function(){return this.data}},{key:"getModel",value:function(e){return this.data.getModel(e)}},{key:"reset",value:function(){for(var e=this.resettables,t=e.length;t--;)this.getModel(e[t]).reset();var i=this.getModel("PresentationState");i.isAutoplay=!0,i.isCurrentVideoAd=!1,i.started=!1,i.streamDuration=NaN,i.streamTime=NaN}}]),i}(Ya),Ao=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"logger",get:function(){return this.facade.logger}},{key:"log",value:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.logger).log.apply(t,[e].concat(n))}}]),i}(function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this)).pViewControl=null,r.mediatorName=e,n&&(r.viewControl=n),r}return(0,nt.default)(i,[{key:"name",get:function(){return this.mediatorName}},{key:"viewControl",get:function(){return this.pViewControl},set:function(e){this.pViewControl=e}},{key:"system",get:function(){return Jn}},{key:"getService",value:function(e){return this.facade?this.facade.retrieveService(e):null}},{key:"getModel",value:function(e){return this.getModelCollection().getModel(e)}},{key:"getProxy",value:function(e){return this.facade?this.facade.retrieveProxy(e):null}},{key:"getModelCollection",value:function(){return this.facade?this.facade.retrieveProxy("ModelCollectionProxy"):null}},{key:"listNotificationInterests",value:function(){return[]}},{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){this.pViewControl=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}}]),i}(qa)),ko=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,rt.default)(this,i),(n=t.call(this,e)).timer=new Ra(i.INTERVAL),n.timer.on(Ra.TIC_EVENT,function(e){return n.onTic(e)}),n}return(0,nt.default)(i,[{key:"killTimer",value:function(){var e;null==(e=this.timer)||e.stop()}},{key:"listNotificationInterests",value:function(){return["resourcestart"]}},{key:"handleNotification",value:function(e){var t;"resourcestart"===e.name&&(null==(t=this.timer)||t.start())}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this)}},{key:"onRemove",value:function(){this.timer.destroy(),this.timer=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"onTic",value:function(e){var t,i;null==(t=this.facade)||t.sendNotification("timerTic",e.detail,"internal"),null==(i=this.facade)||i.sendNotification("aviaclock",{count:e.detail.count},"internal")}}]),i}(Ao);ko.INTERVAL=100;var bo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"onRegister",value:function(){var e=this.facade.retrieveProxy("ModelCollectionProxy").getModel("PlayerOptions");this.pOverrides=e.overrides,this.pMode="auto"===e.performanceMode?this.calculatePerformanceMode():e.performanceMode}},{key:"calculatePerformanceMode",value:function(){switch(!0){case Jn.isTv:case Jn.isEmbedded:return"tv";case Jn.isMobile:return"mobile";default:return"desktop"}}},{key:"mode",get:function(){return this.pMode}},{key:"forwardBufferLength",get:function(){switch(this.pMode){case"mobile":case"tv":return 20;case"low":return 10;default:return}}},{key:"backBufferLength",get:function(){switch(this.pMode){case"mobile":case"tv":return 30;case"low":return 12;default:return 60}}},{key:"topQualityForwardBufferLength",get:function(){switch(this.pMode){case"mobile":case"tv":return 60;case"low":return 30;default:return}}},{key:"bufferingSampleRate",get:function(){var e,t=null==(e=this.pOverrides)?void 0:e.bufferingSampleRate;if(t)return t;switch(this.pMode){case"tv":case"low":return 300;default:return ko.INTERVAL}}}]),i}(Ya),Eo=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.apply(this,arguments)).controlVisCssClass="cvui-ctrlbar-vis",e}return(0,nt.default)(i,[{key:"setModel",value:function(e){for(var t in e)this.model[t]=e[t]}},{key:"removeDom",value:function(){var e,t=this.getVideo();t&&(t.player=null,t.avia=null);for(var i=this.getMain(),n=i.childNodes,r=n.length;r--;)i.removeChild(n[r]);var a=this.getElement("style");null==(e=null==a?void 0:a.parentElement)||e.removeChild(a)}},{key:"setControlVisibility",value:function(e){var t=this.getMain();if(t){var i=e?"add":"remove";t.classList[i](this.controlVisCssClass)}}},{key:"getElement",value:function(e){return this.model[e]||null}},{key:"getSafeZIndex",value:function(){var e=this.getElement("adContainer");return e?Number(e.style.zIndex)+10:10}},{key:"getVideo",value:function(){return this.getElement("video")}},{key:"getTextTrackContainer",value:function(){return this.getElement("ccContainer")}},{key:"setVideoVolume",value:function(e){var t=this.getVideo();t&&this.getVideoVolume()!==e&&(t.volume=e)}},{key:"getVideoVolume",value:function(){var e=this.getVideo();return e?e.volume:null}},{key:"getMain",value:function(){return this.getElement("main")}},{key:"showAdClickElement",value:function(e){var t=this.getElement("adClickEl");if(t){var i=this.facade.retrieveProxy("LocalizationProxy").localize("learn-more");i&&(t.innerHTML=i),t.style.display=!1!==e?"block":"none"}}},{key:"getDimensions",value:function(){var e=this.getPresentationRect();return e?{width:e.width,height:e.height}:null}},{key:"showContainer",value:function(e,t){var i=this.getElement(e);i&&(i.style.display=t?"inline-block":"none")}},{key:"showAdContainer",value:function(e){this.showContainer("adContainer",e)}},{key:"getPresentationRect",value:function(){var e=this.getMain();return e&&e.getBoundingClientRect()||null}},{key:"muteVideo",value:function(e){var t=this.getVideo(),i="muted";t&&(t.muted=e,e&&t.setAttribute(i,i),!e&&t.removeAttribute(i))}},{key:"primeVideo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ci.blankDataUrl;return Promise.resolve().then(function(){var i=e.getVideo();if(i)return i.src=t,i.load(),i.play().catch(function(t){if(i.error&&i.src!==Ci.blankDataUrl)return e.primeVideo(Ci.blankDataUrl)})})}},{key:"setVideoAttribute",value:function(e,t){var i=this.getVideo();null==i||i.setAttribute(e,t)}},{key:"removeVideoAttribute",value:function(e){var t=this.getVideo();null==t||t.removeAttribute(e)}},{key:"recreateVideo",value:function(){var e,t,i=so(),n=this.getElement("videoContainer"),r=this.getElement("video"),a=this.facade.retrieveProxy("ModelCollectionProxy").getModel("PresentationState");if(r){r.player=null,r.avia=null;var o=["src","data-element-id"];e=r.volume,t=r.muted,Array.from(r.attributes).filter(function(e){return!o.includes(e.name)}).forEach(function(e){return i.setAttribute(e.name,e.value)}),n.replaceChild(i,r),this.sendNotification("videoelementremoved",{video:r})}else e=a.volume,t=a.isMuted,n.appendChild(i);a.volume=e,i.muted=t,i.volume=e,this.setModel((0,ot.default)({},"video",i)),this.recreateAdElements();var s=this.facade.retrieveMediator("AppMediator");i.player=s.getAppApi(),i.avia=Jn.appNamespace,this.sendNotification("videoelementadded",{video:i})}},{key:"recreateAdElements",value:function(){var e,t=lo(),i=co(),n=this.getMain(),r=this.getElement("adContainer"),a=this.getElement("adClickEl");n.replaceChild(t,r),n.replaceChild(i,a),this.setModel((e={},(0,ot.default)(e,"adContainer",t),(0,ot.default)(e,"adClickEl",i),e))}},{key:"model",get:function(){return this.data}}]),i}(Ya),To=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,rt.default)(this,i),t.call(this,e,{native:!1!==n.native,mode:"disabled",language:n.language})}return(0,nt.default)(i,[{key:"mode",get:function(){return this.data.mode},set:function(e){this.data.mode=e}},{key:"enabled",get:function(){return"disabled"!==this.data.mode},set:function(e){this.mode=e?this.enabledMode:"disabled"}},{key:"enabledMode",get:function(){return this.data.native?"showing":"hidden"}},{key:"native",get:function(){return this.data.native}},{key:"language",get:function(){return this.data.language},set:function(e){this.data.language=e}}]),i}(Ya),So=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"checkType",value:function(e,t,i){return"string"==typeof t&&(t=[t]),!(!i||null!==e)||t.some(function(t){return(0,at.default)(e)===t})}},{key:"notEmpty",value:function(e){return!Ut(e)}},{key:"isArray",value:function(e){return Array.isArray(e)}},{key:"validNumber",value:function(e,t){return"number"!=typeof e?t:e}},{key:"isTypedArray",value:function(e,t){if(this.isArray(e)&&this.notEmpty(e)){for(var i=e.length;i--;)if((0,at.default)(e[i])!==t)return!1;return!0}return!1}},{key:"isType",value:function(e,t){return e instanceof t}},{key:"isPositiveNumber",value:function(e){return"number"==typeof e&&e>=0}}]),e}(),Co={qualities:{type:"object",defaultValue:null},qualityInfo:{type:"object",defaultValue:null},audioTracks:{type:"object",defaultValue:null},textTracks:{type:"object",defaultValue:null},streamType:{type:"string",defaultValue:"VOD"},liveStreamInfo:{type:"object",defaultValue:null},bufferLength:{type:"number",defaultValue:0},cdn:{type:"string",defaultValue:null,validator:So.notEmpty},drmType:{type:"string",defaultValue:null,validator:So.notEmpty},contentSegment:{type:"number",defaultValue:NaN},maxBandwidth:{type:"number",defaultValue:NaN},time:{type:"number",defaultValue:0},state:{type:"string",defaultValue:"idle"},duration:{type:"number",defaultValue:NaN},bitrate:{type:"number",defaultValue:NaN},started:{type:"boolean",defaultValue:!1},averageDroppedFps:{type:"number",defaultValue:NaN},framerate:{type:"number",defaultValue:NaN}},xo={container:{type:["object","string"],defaultValue:null},plugins:{type:"object",defaultValue:null},autoplay:{type:"string",defaultValue:"none"},id:{type:"string",defaultValue:null},networkErrorRecovery:{type:"object",defaultValue:null},networkTimeout:{type:"number",defaultValue:An.TIMEOUT},performanceMode:{type:"string",defaultValue:"auto"},renderTextTrackNatively:{type:"boolean",defaultValue:!0},useNativeFullscreen:{type:"boolean",defaultValue:!0},playsInline:{type:"boolean",defaultValue:!0},useNativeControls:{type:"boolean",defaultValue:!1},overrides:{type:"object",defaultValue:{}},logLevel:{type:"string",defaultValue:"off"},keyboardScope:{type:"string",defaultValue:"player"},language:{type:"string",defaultValue:null},audioLanguage:{type:"string",defaultValue:null},textLanguage:{type:"string",defaultValue:null},localizationLanguage:{type:"string",defaultValue:null},localization:{type:"object",defaultValue:null},idleDelay:{type:"number",defaultValue:3e3},enableOm:{type:"boolean",defaultValue:!1},enableMoat:{type:"boolean",defaultValue:!1},reuseVideoElement:{type:"boolean",defaultValue:!1},ignoreBlankTextTracks:{type:"boolean",defaultValue:!1},sizeCheckInterval:{type:"number",defaultValue:1e3}},wo=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"clampValue",value:function(e,t,i){return"number"!=typeof e?null:Math.max(t,Math.min(e,i))}},{key:"lowerCase",value:function(e){return"string"==typeof e?e.toLowerCase():e}},{key:"strToNum",value:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);return isNaN(t)?e:t}return e}}]),e}(),Po={content_playback_state_config:Co,player_dom_config:{main:{type:"object",defaultValue:null},video:{type:"object",defaultValue:null},videoContainer:{type:"object",defaultValue:null},ccContainer:{type:"object",defaultValue:null},adContainer:{type:"object",defaultValue:null},panelContainer:{type:"object",defaultValue:null},adClickEl:{type:"object",defaultValue:null}},player_options_config:xo,presentation_state_config:{streamTime:{type:"number",defaultValue:0,setterTransformer:function(e){return So.isPositiveNumber(e)?e:0}},streamDuration:{type:"number",defaultValue:NaN,setterTransformer:function(e){return So.isPositiveNumber(e)?e:NaN}},isAutoplay:{type:"boolean",defaultValue:!1},isCurrentVideoAd:{type:"boolean",defaultValue:!1},isFullscreen:{type:"boolean",defaultValue:!1},isMuted:{type:"boolean",defaultValue:!1},isMuteAtPlayStart:{type:"boolean",defaultValue:!1},started:{type:"boolean",defaultValue:!1},userHasUnmuted:{type:"boolean",defaultValue:!1},volume:{type:"number",defaultValue:1,setterTransformer:function(e){return wo.clampValue(e,0,1)}},usesSsai:{type:"boolean",defaultValue:!1},streamId:{type:"string",defaultValue:null},suspended:{type:"boolean",defaultValue:!1}}},_o=function(){function e(){(0,rt.default)(this,e)}return(0,nt.default)(e,null,[{key:"generateModel",value:function(e,t,i,n){for(var r in t)this.createProperty(r,t[r],e,i,n)}},{key:"createProperty",value:function(e,t,i,n,r){var a=t.validator,o=t.type,s=t.defaultValue,l=!1!==t.enumerable,u=this.getTransformer(t,"setter",i),c=this.getTransformer(t,"getter",i);!1===t.writable?(Object.defineProperty(i,e,{enumerable:l,value:s,writable:!1}),n[e]=s):(Object.defineProperty(i,e,{enumerable:l,set:function(t){var i=u(t);!a||a(i)?So.checkType(i,o,null==s)?n[e]=i:ci.warn("Invalid type supplied for property ".concat(e)):ci.warn("Invalid value '".concat(i,"' for property ").concat(e))},get:function(){return c(n[e])}}),n[e]=s),r[e]=s}},{key:"getTransformer",value:function(e,t,i){var n=e[t+"Transformer"];return n&&"function"==typeof n?n.bind(i):this.blankTransformer}},{key:"blankTransformer",value:function(e){return e}}]),e}(),Io=function(){function e(t){(0,rt.default)(this,e),this.pData={},this.defaultValues={},_o.generateModel(this,t,this.pData,this.defaultValues)}return(0,nt.default)(e,[{key:"data",get:function(){return Object.assign({},this.pData)}},{key:"reset",value:function(){for(var e in this.defaultValues)this.pData[e]=this.defaultValues[e]}}]),e}(),Lo=function(){function e(t){(0,rt.default)(this,e),this.model=new Io(t)}return(0,nt.default)(e,[{key:"data",get:function(){return this.model.data}},{key:"reset",value:function(){this.model.reset()}},{key:"qualities",get:function(){return this.model.qualities},set:function(e){this.model.qualities=e}},{key:"qualityInfo",get:function(){return this.model.qualityInfo},set:function(e){this.model.qualityInfo=e}},{key:"audioTracks",get:function(){return this.model.audioTracks},set:function(e){this.model.audioTracks=e}},{key:"textTracks",get:function(){return this.model.textTracks},set:function(e){this.model.textTracks=e}},{key:"streamType",get:function(){return this.model.streamType},set:function(e){this.model.streamType=e}},{key:"liveStreamInfo",get:function(){return this.model.liveStreamInfo},set:function(e){this.model.liveStreamInfo=e}},{key:"bufferLength",get:function(){return this.model.bufferLength},set:function(e){this.model.bufferLength=e}},{key:"cdn",get:function(){return this.model.cdn},set:function(e){this.model.cdn=e}},{key:"drmType",get:function(){return this.model.drmType},set:function(e){this.model.drmType=e}},{key:"contentSegment",get:function(){return this.model.contentSegment},set:function(e){this.model.contentSegment=e}},{key:"maxBandwidth",get:function(){return this.model.maxBandwidth},set:function(e){this.model.maxBandwidth=e}},{key:"time",get:function(){return this.model.time},set:function(e){this.model.time=e}},{key:"state",get:function(){return this.model.state},set:function(e){this.model.state=e}},{key:"duration",get:function(){return this.model.duration},set:function(e){this.model.duration=e}},{key:"bitrate",get:function(){return this.model.bitrate},set:function(e){this.model.bitrate=e}},{key:"started",get:function(){return this.model.started},set:function(e){this.model.started=e}},{key:"averageDroppedFps",get:function(){return this.model.averageDroppedFps},set:function(e){this.model.averageDroppedFps=e}},{key:"framerate",get:function(){return this.model.framerate},set:function(e){this.model.framerate=e}}],[{key:"modelName",get:function(){return"ContentPlaybackState"}}]),e}(),No=function(){function e(t){(0,rt.default)(this,e),this.model=new Io(t)}return(0,nt.default)(e,[{key:"data",get:function(){return this.model.data}},{key:"reset",value:function(){this.model.reset()}},{key:"main",get:function(){return this.model.main},set:function(e){this.model.main=e}},{key:"video",get:function(){return this.model.video},set:function(e){this.model.video=e}},{key:"videoContainer",get:function(){return this.model.videoContainer},set:function(e){this.model.videoContainer=e}},{key:"ccContainer",get:function(){return this.model.ccContainer},set:function(e){this.model.ccContainer=e}},{key:"adContainer",get:function(){return this.model.adContainer},set:function(e){this.model.adContainer=e}},{key:"panelContainer",get:function(){return this.model.panelContainer},set:function(e){this.model.panelContainer=e}},{key:"adClickEl",get:function(){return this.model.adClickEl},set:function(e){this.model.adClickEl=e}},{key:"style",get:function(){return this.model.style},set:function(e){this.model.style=e}}],[{key:"modelName",get:function(){return"PlayerDom"}}]),e}(),Mo=function(){function e(t){(0,rt.default)(this,e),this.model=new Io(t)}return(0,nt.default)(e,[{key:"data",get:function(){return this.model.data}},{key:"reset",value:function(){this.model.reset()}},{key:"container",get:function(){return this.model.container},set:function(e){this.model.container=e}},{key:"plugins",get:function(){return this.model.plugins},set:function(e){this.model.plugins=e}},{key:"autoplay",get:function(){return this.model.autoplay},set:function(e){this.model.autoplay=e}},{key:"id",get:function(){return this.model.id},set:function(e){this.model.id=e}},{key:"networkErrorRecovery",get:function(){return this.model.networkErrorRecovery},set:function(e){this.model.networkErrorRecovery=e}},{key:"networkTimeout",get:function(){return this.model.networkTimeout},set:function(e){this.model.networkTimeout=e}},{key:"performanceMode",get:function(){return this.model.performanceMode},set:function(e){this.model.performanceMode=e}},{key:"renderTextTrackNatively",get:function(){return this.model.renderTextTrackNatively},set:function(e){this.model.renderTextTrackNatively=e}},{key:"useNativeFullscreen",get:function(){return this.model.useNativeFullscreen},set:function(e){this.model.useNativeFullscreen=e}},{key:"keyboardScope",get:function(){return this.model.keyboardScope},set:function(e){this.model.keyboardScope=e}},{key:"playsInline",get:function(){return this.model.playsInline},set:function(e){this.model.playsInline=e}},{key:"useNativeControls",get:function(){return this.model.useNativeControls},set:function(e){this.model.useNativeControls=e}},{key:"overrides",get:function(){return this.model.overrides},set:function(e){this.model.overrides=e}},{key:"logLevel",get:function(){return this.model.logLevel},set:function(e){this.model.logLevel=e}},{key:"language",get:function(){return this.model.language},set:function(e){this.model.language=e}},{key:"audioLanguage",get:function(){return this.model.audioLanguage},set:function(e){this.model.audioLanguage=e}},{key:"textLanguage",get:function(){return this.model.textLanguage},set:function(e){this.model.textLanguage=e}},{key:"localizationLanguage",get:function(){return this.model.localizationLanguage},set:function(e){this.model.localizationLanguage=e}},{key:"localization",get:function(){return this.model.localization},set:function(e){this.model.localization=e}},{key:"idleDelay",get:function(){return this.model.idleDelay},set:function(e){this.model.idleDelay=e}},{key:"enableOm",get:function(){return this.model.enableOm},set:function(e){this.model.enableOm=e}},{key:"enableMoat",get:function(){return this.model.enableMoat},set:function(e){this.model.enableMoat=e}},{key:"reuseVideoElement",get:function(){return this.model.reuseVideoElement},set:function(e){this.model.reuseVideoElement=e}},{key:"ignoreBlankTextTracks",get:function(){return this.model.ignoreBlankTextTracks},set:function(e){this.model.ignoreBlankTextTracks=e}},{key:"sizeCheckInterval",get:function(){return this.model.sizeCheckInterval},set:function(e){this.model.sizeCheckInterval=e}}],[{key:"modelName",get:function(){return"PlayerOptions"}}]),e}(),Ro=function(){function e(t){(0,rt.default)(this,e),this.model=new Io(t)}return(0,nt.default)(e,[{key:"data",get:function(){return this.model.data}},{key:"reset",value:function(){this.model.reset()}},{key:"streamTime",get:function(){return this.model.streamTime},set:function(e){this.model.streamTime=e}},{key:"streamDuration",get:function(){return this.model.streamDuration},set:function(e){this.model.streamDuration=e}},{key:"isAutoplay",get:function(){return this.model.isAutoplay},set:function(e){this.model.isAutoplay=e}},{key:"isCurrentVideoAd",get:function(){return this.model.isCurrentVideoAd},set:function(e){this.model.isCurrentVideoAd=e}},{key:"isFullscreen",get:function(){return this.model.isFullscreen},set:function(e){this.model.isFullscreen=e}},{key:"isMuted",get:function(){return this.model.isMuted},set:function(e){this.model.isMuted=e}},{key:"isMuteAtPlayStart",get:function(){return this.model.isMuteAtPlayStart},set:function(e){this.model.isMuteAtPlayStart=e}},{key:"started",get:function(){return this.model.started},set:function(e){this.model.started=e}},{key:"userHasUnmuted",get:function(){return this.model.userHasUnmuted},set:function(e){this.model.userHasUnmuted=e}},{key:"volume",get:function(){return this.model.volume},set:function(e){this.model.volume=e}},{key:"usesSsai",get:function(){return this.model.usesSsai},set:function(e){this.model.usesSsai=e}},{key:"streamId",get:function(){return this.model.streamId},set:function(e){this.model.streamId=e}},{key:"suspended",get:function(){return this.model.suspended},set:function(e){this.model.suspended=e}}],[{key:"modelName",get:function(){return"PresentationState"}}]),e}(),Oo=function(){function e(){(0,rt.default)(this,e),this.mdlCollection={},this.createModels()}return(0,nt.default)(e,[{key:"destroy",value:function(){for(var e in this.mdlCollection)delete this.mdlCollection[e];this.mdlCollection=null}},{key:"getModel",value:function(e){return this.mdlCollection[e]}},{key:"ContentPlaybackState",get:function(){return this.mdlCollection.ContentPlaybackState}},{key:"PlayerDom",get:function(){return this.mdlCollection.PlayerDom}},{key:"PlayerOptions",get:function(){return this.mdlCollection.PlayerOptions}},{key:"PresentationState",get:function(){return this.mdlCollection.PresentationState}},{key:"createModels",value:function(){for(var e=[Lo,No,Mo,Ro],t=e.length;t--;){var i=e[t],n=i.modelName,r=Po[this.classToCfgName(n)];this.mdlCollection[n]=new i(r)}}},{key:"classToCfgName",value:function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")+"_config"}}]),e}(),Do=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.system,i=new Oo,n=new mo("ModelCollectionProxy",i),r=e.body.playerOptions;this.facade.registerProxy(n),this.setPlayerOptions(n,r),this.facade.registerProxy(new bo("PerformanceProxy"));var a=new yo("LocalizationProxy",r.localizationLanguage);this.facade.registerProxy(a),this.facade.registerProxy(new To("TextTrackProxy",{native:r.renderTextTrackNatively,language:r.textLanguage})),t.isBrowser&&this.createDomProxy(n),this.facade.registerProxy(new go),this.log("debug","Model prepared")}},{key:"setPlayerOptions",value:function(e,t){var i=e.getModel("PlayerOptions");for(var n in t)!Ht(i[n])&&(i[n]=t[n])}},{key:"createDomProxy",value:function(e){var t=e.getModel("PlayerDom"),i=new Eo("PlayerDomProxy",t);this.facade.registerProxy(i)}}]),i}(io),Bo=function(){function e(t){var i=this;(0,rt.default)(this,e),this.event={dispatchPluginEvent:function(e){i.options.dispatch(e)}},this.util={queryStrFromObj:function(e,t){return gn.encode(e)}},this.options=t}return(0,nt.default)(e,[{key:"player",get:function(){return this.options.player}},{key:"logger",get:function(){return this.options.logger}},{key:"system",get:function(){return Jn}},{key:"appNamespace",get:function(){return this.system.appNamespace}},{key:"avia",get:function(){return this.system.appNamespace}},{key:"playerOptions",get:function(){return this.options.playerOptions}},{key:"buildInfo",get:function(){return Fr}},{key:"localization",get:function(){return this.options.localization}},{key:"dom",get:function(){var e=this.options.domProxy;return{main:null==e?void 0:e.getMain(),get video(){return null==e?void 0:e.getVideo()},videoContainer:null==e?void 0:e.getElement("videoContainer"),ccContainer:null==e?void 0:e.getElement("ccContainer"),adContainer:null==e?void 0:e.getElement("adContainer"),adClickEl:null==e?void 0:e.getElement("adClickEl"),style:null==e?void 0:e.getElement("style")}}},{key:"hookManager",get:function(){return this.options.hookManager}}]),e}(),Uo=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.apply(this,arguments)).plugins={},e.pendingLoads=null,e.services=null,e}return(0,nt.default)(i,[{key:"onRemove",value:function(){var e=this;Object.keys(this.plugins).forEach(function(t){try{e.killPlugin(t)}catch(i){e.logger.warn("Error destroying plugin: ".concat(t),i)}}),this.plugins=null,this.pendingLoads=null,this.services=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"removePlugin",value:function(e){this.killPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins[e]||null}},{key:"loadPlugin",value:function(e){return this.createPlugin(e)}},{key:"listNotificationInterests",value:function(){return["loadPlugins","adbreakstart","contentstart","removePlugin"]}},{key:"handleNotification",value:function(e){switch(e.name){case"loadPlugins":this.loadPlugins(e.body);break;case"removePlugin":this.removePlugin(e.body.name);break;case"adbreakstart":case"contentstart":this.loadPendingPlugins()}}},{key:"createPluginServices",value:function(){var e=this.facade.retrieveMediator("AppMediator");return new Bo({player:e.getAppApi(),domProxy:this.facade.retrieveProxy("PlayerDomProxy"),localization:this.facade.retrieveProxy("LocalizationProxy").getApi(),playerOptions:this.playerOptions,dispatch:function(t){e.dispatchPluginEvent(t)},hookManager:this.facade.retrieveProxy("HookProxy"),logger:this.logger})}},{key:"playerOptions",get:function(){return this.getModel("PlayerOptions").data}},{key:"initPluginServices",value:function(){this.services||(this.services=this.createPluginServices())}},{key:"createPlugins",value:function(e){var t=this;return Promise.all(e.map(function(e){return t.createPlugin(e)}))}},{key:"createPlugin",value:function(e){return It(this,null,qe.default.mark(function t(){var i,n,r,a,o;return qe.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.factory,r=e.options,Ft(n)){t.next=3;break}throw new ya("7001","Invalid plugin factory",e);case 3:return t.prev=3,t.next=6,n(this.services,r);case 6:a=t.sent,t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(3),new ya("7003","Unable to load plugin",e,t.t0);case 12:if(a){t.next=14;break}return t.abrupt("return");case 14:if(o=null==(i=a.getId)?void 0:i.call(a)){t.next=17;break}throw new ya("7002","Invalid plugin ID",e);case 17:return this.plugins[o]=a,this.log("info","Created plugin '".concat(o,"'")),t.abrupt("return",a);case 20:case"end":return t.stop()}},t,this,[[3,9]])}))}},{key:"killPlugin",value:function(e){var t=this.plugins[e];t&&(Ft(t.destroy)&&t.destroy(),delete this.plugins[e])}},{key:"loadPendingPlugins",value:function(){var e=this;this.pendingLoads&&(this.createPlugins(this.pendingLoads).catch(function(t){e.sendNotification("playererror",t)}),this.pendingLoads=null)}},{key:"loadPlugins",value:function(e){var t=e.callback,i=e.plugins,n=!this.getModel("PresentationState").started;if(null==i?void 0:i.length){this.initPluginServices();var r=i.filter(function(e){return"low"===e.priority}),a=i.filter(function(e){return"low"!==e.priority});n&&(this.pendingLoads=r);var o=n?a:r.concat(a);this.createPlugins(o).then(function(){return t()}).catch(function(e){return t(e)})}else t()}}]),i}(Ao),Fo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){this.facade.registerMediator(new Uo("PluginMediator")),this.log("debug","Plugins Prepared")}}]),i}(io),Vo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){this.facade.registerMediator(new ko("TimerMediator")),this.log("debug","Timer mediator registered")}}]),i}(io),Ho=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this,e)).app=n,r}return(0,nt.default)(i,[{key:"presentationMediator",get:function(){return this.facade.retrieveMediator("PresentationMediator")}},{key:"getBuffered",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.presentationMediator.getBuffered(e)}},{key:"primeVideoElement",value:function(){var e,t=this.facade.retrieveProxy("PlayerDomProxy"),i=this.getModel("PlayerOptions");return t.primeVideo(null==(e=i.overrides)?void 0:e.blankVideoUrl)}},{key:"offsetTimedText",value:function(e){var t;null==(t=this.presentationMediator)||t.offsetTimedText(e)}},{key:"setFullscreenElement",value:function(e){this.facade.retrieveMediator("FullscreenMediator").fullscreenElement=e}},{key:"getFullscreenElement",value:function(){return this.facade.retrieveMediator("FullscreenMediator").fullscreenElement}},{key:"getSessionTime",value:function(){var e;return(null==(e=this.presentationMediator)?void 0:e.getSessionTime())||null}},{key:"getPlaybackTime",value:function(){var e;return(null==(e=this.presentationMediator)?void 0:e.getPlaybackTime())||null}},{key:"updateDimensions",value:function(){var e;null==(e=this.presentationMediator)||e.checkSize()}},{key:"onRemove",value:function(){this.app=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"getAppApi",value:function(){return this.app.getApi()}},{key:"getConfigAsJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.getProxy("ModelCollectionProxy").getModel("PlayerOptions").data;return JSON.stringify({resource:this.getCurrentResource(),playerOptions:t,buildInfo:Fr},function(e,t){return t instanceof HTMLElement?void 0:t},e)}},{key:"validateSeek",value:function(e,t){if(isNaN(e))return this.log("warn","Invalid seek() time [".concat(e,"] supplied")),null;var i=this.getModel("PresentationState"),n=this.getProxy("ContentPlaybackStateProxy"),r=n&&"LIVE"===n.model.streamType;return!i||!n||i.isCurrentVideoAd||r?(this.log("warn","seek() may not be called in the current context"),null):Di(e,0,t)}},{key:"isPlaybackSuspended",value:function(){return this.getModel("PresentationState").suspended}},{key:"getContainerRect",value:function(){var e=this.getProxy("PlayerDomProxy");return e?e.getPresentationRect():null}},{key:"getCurrentResource",value:function(){var e=this.getProxy("ResourceProxy");return(null==e?void 0:e.resource)||null}},{key:"killCurrentResource",value:function(){var e=this,t=this.getProxy("ResourceProxy");if(!t)return Promise.resolve();var i=t.resource,n=this.getProxy("ContentPlaybackStateProxy"),r="LIVE"===n.model.streamType||"DVR"===n.model.streamType,a=this.presentationMediator;return this.log("info","Killing current resource"),a?a.close().then(function(){r&&e.sendNotification("livepresentationstopped",{resource:i})}).catch(function(e){ci.error(e)}):Promise.resolve()}},{key:"skipAd",value:function(){this.presentationMediator.skipAd()}},{key:"getPlugin",value:function(e){var t=this.facade.retrieveMediator("PluginMediator");return t?t.getPlugin(e):null}},{key:"dispatchPluginEvent",value:function(e){this.app.sendEvent("pluginevent",e)}},{key:"getMuteState",value:function(){var e=this.getModel("PresentationState");return e?e.isMuted:null}},{key:"getVolume",value:function(){var e=this.getModel("PresentationState");return e?e.volume:NaN}},{key:"getDimensions",value:function(){var e=this.getProxy("PlayerDomProxy");return e?e.getDimensions():null}},{key:"getAdBreakTimes",value:function(){var e;return(null==(e=this.presentationMediator)?void 0:e.getAdBreakTimes())||null}},{key:"grabFrame",value:function(){var e=this.getProxy("PlayerDomProxy"),t=null==e?void 0:e.getVideo();if(!t)return null;var i=document.createElement("canvas"),n=i.getContext("2d"),r=i.width=t.videoWidth,a=i.height=t.videoHeight;n.drawImage(t,0,0,r,a);var o=i.toDataURL(),s=document.createElement("img");return s.setAttribute("src",o),s}},{key:"getKeyEventTarget",value:function(){return this.facade.retrieveMediator("KeyCommandMediator").getEventTarget()}},{key:"disableKeyCommands",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=null==(e=this.facade)?void 0:e.retrieveMediator("KeyCommandMediator");t?null==i||i.disable():null==i||i.enable()}},{key:"listNotificationInterests",value:function(){return Vi(Jr)}},{key:"sendErrorEvent",value:function(e,t){this.app.sendEvent(e,t)}},{key:"handleNotification",value:function(e){this.app.sendEvent(e.name,e.body)}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this)}}]),i}(Ao),$o=Pt(Lt(),1),Wo=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this,e,n)).isFullscreen=!1,r.fsElement=null,r.enabled=!1,r.pIsAndroidFirefox=null,r.fsApiSupported=!0,r.fsMgr=null,r.useCustomFullscreen=!0,r.metadataLoadedDelayHandle=null,r.iosPropNames={ENTER_EVENT:"webkitbeginfullscreen",EXIT_EVENT:"webkitendfullscreen",ENTER_METHOD:"webkitEnterFullscreen",EXIT_METHOD:"webkitExitFullscreen",SUPPORTED:"webkitSupportsFullscreen"},r.fsMgr=$o.default,r.changeHandler=function(e){return r.hChange(e)},r}return(0,nt.default)(i,[{key:"fullscreenElement",get:function(){return this.fsElement},set:function(e){if(e instanceof HTMLElement){var t=this.system;t.isIos||t.isAndroid||(this.fsElement=e)}}},{key:"onRemove",value:function(){clearTimeout(this.metadataLoadedDelayHandle),!this.fsApiSupported&&this.fsElement&&(this.fsElement.removeEventListener(this.iosPropNames.ENTER_EVENT,this.changeHandler),this.fsElement.removeEventListener(this.iosPropNames.EXIT_EVENT,this.changeHandler)),this.fsMgr&&Ft(this.fsMgr.off)&&this.fsMgr.off("change",this.changeHandler),this.fsElement=null,this.fsMgr=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"enter",value:function(){if(this.enabled)return this.useCustomFullscreen?(this.isFullscreen=!0,void this.sendFullscreenNotification()):void(this.fsApiSupported?this.fsMgr.request(this.fsElement):this.enterFsIos())}},{key:"exit",value:function(){if(this.enabled)return this.useCustomFullscreen?(this.isFullscreen=!1,void this.sendFullscreenNotification()):void(this.fsApiSupported?this.fsMgr.exit():this.exitFsIos())}},{key:"isFullScreenPermitted",value:function(){return this.enabled}},{key:"isFullScreen",value:function(){return this.isFullscreen}},{key:"isAndroidFirefox",get:function(){if(null==this.pIsAndroidFirefox){var e=this.system;this.pIsAndroidFirefox="Android"===e.os&&"Firefox"===e.browser}return this.pIsAndroidFirefox}},{key:"handleNotification",value:function(e){var t=this,i=e.name;"videoelementadded"!==i?"streammetadata"!==i?this.enabled&&("enterFullscreenRequest"===i?this.enter():this.exit()):this.metadataLoadedDelayHandle=setTimeout(function(){return t.handleMetadataLoaded()},20):this.onRegister()}},{key:"listNotificationInterests",value:function(){return["videoelementadded","streammetadata","enterFullscreenRequest","exitFullscreenRequest"]}},{key:"handleMetadataLoaded",value:function(){this.enabled=this.enabled||this.webkitIosEnabled(),this.enabled&&this.sendNotification("fullscreenAvailable",null)}},{key:"hChange",value:function(e){this.isFullscreen=this.fsApiSupported?$o.default.isFullscreen:this.checkWebkitIosState(e),this.isAndroidFirefox&&(this.isFullscreen&&this.fsElement.setAttribute("controls",""),!this.isFullscreen&&this.fsElement.removeAttribute("controls")),this.sendFullscreenNotification()}},{key:"sendFullscreenNotification",value:function(){this.sendNotification("fullscreenChange",{isFullscreen:this.isFullscreen},"internal")}},{key:"enterFsIos",value:function(){this.fsElement[this.iosPropNames.ENTER_METHOD]()}},{key:"exitFsIos",value:function(){this.fsElement[this.iosPropNames.EXIT_METHOD]()}},{key:"webkitIosEnabled",value:function(){return this.system.isIos&&this.fsElement[this.iosPropNames.SUPPORTED]}},{key:"checkWebkitIosState",value:function(e){return e.type===this.iosPropNames.ENTER_EVENT}},{key:"onRegister",value:function(){if(this.useCustomFullscreen=!this.getModel("PlayerOptions").useNativeFullscreen,this.useCustomFullscreen)this.enabled=!0;else{var e=this.facade.retrieveProxy("PlayerDomProxy");this.fsMgr.isEnabled?this.fsElement=e.getMain():(this.fsApiSupported=!1,this.fsElement=e.getVideo()),this.fsApiSupported&&this.fsElement&&this.fsMgr.isEnabled?(this.enabled=!0,this.fsMgr.on("change",this.changeHandler)):this.fsElement&&!this.fsApiSupported&&(this.fsElement.addEventListener(this.iosPropNames.ENTER_EVENT,this.changeHandler),this.fsElement.addEventListener(this.iosPropNames.EXIT_EVENT,this.changeHandler))}}}]),i}(Ao),Ko=[{action:"enterFullScreen",primaryKey:"f",keyCode:70},{action:"increaseVolume",primaryKey:"ArrowUp",keyCode:38},{action:"increaseVolume",primaryKey:null,keyCode:175},{action:"increaseVolume",primaryKey:null,keyCode:183},{action:"decreaseVolume",primaryKey:"ArrowDown",keyCode:40},{action:"decreaseVolume",primaryKey:null,keyCode:174},{action:"decreaseVolume",primaryKey:null,keyCode:182},{action:"seekBack",primaryKey:"ArrowLeft",keyCode:37},{action:"seekForward",primaryKey:"ArrowRight",keyCode:39},{action:"togglePlay",primaryKey:" ",keyCode:32},{action:"togglePlay",primaryKey:null,keyCode:179},{action:"toggleMute",primaryKey:"m",keyCode:77},{action:"toggleMute",primaryKey:"-",keyCode:109},{action:"toggleMute",primaryKey:null,keyCode:173},{action:"toggleTextTrack",primaryKey:"c",keyCode:67},{action:"stop",primaryKey:null,keyCode:178},{action:"playListNext",primaryKey:null,keyCode:176},{action:"playListPrev",primaryKey:null,keyCode:177}],zo=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.apply(this,arguments)).vpi=null,e.seekEnabled=!1,e.VOLUME_INCREMENT=.05,e.SEEK_FACTOR_DISCRETE=.05,e}return(0,nt.default)(i,[{key:"onRemove",value:function(){clearTimeout(this.timeout),this.vpi=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"hKeyDown",value:function(e){this.processKeyEvent(e)}},{key:"player",get:function(){if(!this.vpi){var e=this.facade.retrieveMediator("AppMediator");this.vpi=e.getAppApi()}return this.vpi}},{key:"stopEvent",value:function(e){e.stopImmediatePropagation(),e.preventDefault()}},{key:"processKeyEvent",value:function(e){if(e.ctrlKey||e.shiftKey||e.metaKey||"Meta"===e.key||"Shift"===e.key||"Control"===e.key)return null;var t=this.getCommand(e,!1);t&&(this.doAction(t),this.stopEvent(e))}},{key:"doAction",value:function(e){var t,i,n,r=e.action;switch(r){case"increaseVolume":case"decreaseVolume":n="decreaseVolume"===r?-1:1,i=Di((t=this.player.volume)+this.VOLUME_INCREMENT*n,0,1),this.player.muted&&i>0&&(this.player.muted=!1),this.player.volume=i,this.notify({action:r,value:this.player.volume});break;case"seekBack":case"seekForward":if(!this.seekEnabled)return;var a=this.player.contentDuration;if(n="seekBack"===r?-1:1,t=this.player.contentTime,!a||isNaN(a)||1===n&&"DVR"===this.player.streamType&&this.player.isPlayingLive)return;i=Di(t+this.SEEK_FACTOR_DISCRETE*n*a,0,a),this.notify({action:r,position:i,duration:a}),this.player.seek(i);break;case"enterFullScreen":this.player.enterFullscreen();break;case"togglePlay":"LIVE"!==this.player.streamType&&this.player.togglePlayPause();break;case"toggleMute":this.player.muted=!this.player.muted,this.notify({action:r,muted:this.player.muted});break;case"toggleTextTrack":this.player.textTrackEnabled=!this.player.textTrackEnabled;break;case"playListNext":case"playListPrev":n="playListPrev"===r?-1:1,this.notify({action:r});break;case"stop":"LIVE"===this.player.streamType?this.player.stop():this.player.pause()}}},{key:"notify",value:function(e){this.sendNotification("hotkeyaction",e,"internal")}},{key:"handleNotification",value:function(e){switch(e.name){case"adbreakstart":this.seekEnabled=!1;break;case"contentcomplete":this.seekEnabled=!1,this.disable();break;case"contentstart":case"contentsegmentstart":this.seekEnabled="LIVE"!==this.player.streamType}}},{key:"listNotificationInterests",value:function(){var e=Jr;return[e.AD_BREAK_START,e.CONTENT_START,e.CONTENT_SEGMENT_START,e.CONTENT_COMPLETE]}},{key:"onRegister",value:function(){var e=this;(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.enable(),Ko.forEach(function(t){return e.registerCommandDef(t)})}}]),i}(function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.apply(this,arguments)).defs=[],e.scope=null,e.keyDownHandler=null,e._disabled=!1,e}return(0,nt.default)(i,[{key:"onRemove",value:function(){this.scope=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"disabled",get:function(){return"none"===this.scope||this._disabled}},{key:"getEventTarget",value:function(){switch(this.scope){case"player":return this.getPlayerContainer();case"document":return window.document;default:return null}}},{key:"setScope",value:function(e){null===this.scope&&(this.scope=e,this.activateScope(!0))}},{key:"registerCommandDef",value:function(e){this.hasScope&&this.defs.push(e)}},{key:"disable",value:function(){this.hasScope&&!this._disabled&&(this.scopeActive&&this.activateScope(!1),this._disabled=!0)}},{key:"enable",value:function(){this.hasScope?(this._disabled=!1,!this.scopeActive&&this.activateScope(!0)):this.logger.warn("Attempted to enable key command mediator that has scope of NONE.")}},{key:"validatePrimaryKey",value:function(e,t){var i=t.key,n=Vt(i)&&i.toLowerCase(),r=t.keyCode;return!(!i&&!r||e.primaryKey!==i&&e.primaryKey!==n&&e.keyCode!==r)}},{key:"getCommand",value:function(e){for(var t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.defs.length,r=null;n--;)if(t=this.defs[n],this.validatePrimaryKey(t,e)&&(!i||this.hasRequiredModifiers(t,e))){r=t;break}return r}},{key:"hasRequiredModifiers",value:function(e,t){var i=!!((e.requireCtrl?1:0)^(t.ctrlKey?1:0)),n=!!((e.requireShift?1:0)^(t.shiftKey?1:0)),r=!!((e.requireMeta?1:0)^(t.metaKey?1:0));return!i&&!n&&!r}},{key:"activateScope",value:function(e){if(this.hasScope&&!this._disabled){var t=this.getEventTarget();t&&t[e?"addEventListener":"removeEventListener"]("keydown",this.keyDownHandler),this.scopeActive=e}}},{key:"getPlayerContainer",value:function(){var e,t=null==(e=this.facade)?void 0:e.retrieveProxy("PlayerDomProxy");return null==t?void 0:t.getMain()}},{key:"hasScope",get:function(){return"none"!==this.scope}},{key:"handleNotification",value:function(e){}},{key:"onRegister",value:function(){var e=this;(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.keyDownHandler=function(t){return e.hKeyDown(t)}}}]),i}(Ao)),jo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.facade,i=e.body.app;t.registerMediator(new Ho("AppMediator",i));var n=this.system;if(n.isBrowser){n.isTv||t.registerMediator(new Wo("FullscreenMediator"));var r=new zo("KeyCommandMediator");t.registerMediator(r),r.setScope(this.getScope(n,e.body.playerOptions)),this.log("debug","View prepared")}else this.log("info","Skipping view creation")}},{key:"getScope",value:function(e,t){return!e.isBrowser||e.isTv?"none":t.keyboardScope||"player"}}]),i}(io),Go=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"initializeMacroCommand",value:function(){this.addSubCommand(Do),this.addSubCommand(ho),this.addSubCommand(Vo),this.addSubCommand(jo),this.addSubCommand(Fo)}}]),i}(ro),qo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){if(this.facade.retrieveMediator("AppMediator")){var t=e.name,i=e.body,n=i.error||i;this.setDetails(t,n),n.fatal?this.logger.error(n.message):this.logger.warn(n.message),this.sendNotification("error",{error:n})}}},{key:"setDetails",value:function(e,t){var i=null,n=null;switch(e){case"resourceerror":i="Resource";break;case"videostarterror":i="Video start";break;case"videoplaybackerror":i="Playback";break;case"aderror":i="Ad";break;case"adstalled":i="Ad",n="Stalled ad detected"}n&&(t.message=n),i&&(t.category=i)}}]),i}(io),Yo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){this.facade.removeMediator("PresentationMediator"),this.facade.removeProxy("ResourceProxy"),this.facade.removeProxy("ContentPlaybackStateProxy"),this.facade.retrieveProxy("ModelCollectionProxy").reset()}}]),i}(io),Qo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this,i=e.name,n=e.body;if("changeLanguage"===i){var r=this.facade.retrieveProxy("LocalizationProxy"),a=n.language;r.changeLanguage(a).then(function(e){var i=t.facade.retrieveProxy("PlayerDomProxy");if(i){var n=i.getMain();n.setAttribute("aria-label",r.localize("media-player")),n.setAttribute("lang",r.language)}t.sendNotification("languagechange",{language:a}),t.sendNotification("localizationChange",{localeData:e})})}}}]),i}(io);function Xo(e){return"".concat(e.id,":").concat(e.name)}var Jo="Performance API error",Zo=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t,i,n=e.body.metric,r=n.type,a=n.value;if(performance)switch(r){case"mark":try{null==(t=performance.mark)||t.call(performance,Xo(a),{startTime:a.startTime})}catch(e){this.logger.warn(Jo,e.toString())}break;case"measure":try{var o=Xo(a);null==(i=null==performance?void 0:performance.measure)||i.call(performance,o,o+":start",o+":end")}catch(e){this.logger.warn(Jo,e.toString())}}}}]),i}(io),es=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t,i=this.facade.retrieveMediator("PresentationMediator"),n=this.facade.retrieveProxy("ResourceProxy"),r=null==n?void 0:n.resource;if((null==(t=this.contentPlaybackStateProxy)?void 0:t.model)&&r)switch(e.name){case"play":var a=!!i,o=a&&this.getModel("PresentationState").started;a&&"external"===e.type&&!o?this.invokePlayOnUserGesture(i):o&&(null==i||i.play());break;case"pause":null==i||i.pause();break;case"seek":i.seek(e.body.value);break;case"switchAudioTrack":i.adapter.setAudioTrack(e.body.value);break;case"switchTextTrack":var s=e.body.value;if(s){this.facade.retrieveProxy("TextTrackProxy").language=s.language;var l=this.contentPlaybackStateProxy.getTextTrackById(s.id);i.adapter.setTextTrack(l)}break;case"switchTextMode":var u=e.body.value,c=this.facade.retrieveProxy("TextTrackProxy");c.enabled=u,(null==i?void 0:i.adapter)&&i.adapter.setTextTrackMode(c.mode);break;case"mutechange":i.mute(e.body.muted);break;case"volumechange":var d=e.body.volume;!isNaN(d)&&i.setVolume(d)}else this.log("debug","play() can not be invoked in this context.")}},{key:"contentPlaybackStateProxy",get:function(){return this.facade.retrieveProxy("ContentPlaybackStateProxy")}},{key:"shouldSkipPriming",value:function(){var e=this.facade.retrieveProxy("PlayerDomProxy"),t=this.getModel("PlayerOptions").overrides,i=this.system;return!e||i.supportsUnrestrictedAutoplay||!0===(null==t?void 0:t.skipPriming)}},{key:"invokePlayOnUserGesture",value:function(e){var t=this,i=this.facade.retrieveProxy("PlayerDomProxy"),n=this.getModel("PlayerOptions").overrides,r=this.system;e.beforePlayOnUserGesture(),this.shouldSkipPriming()?e&&e.playOnUserGesture():i.primeVideo(null==n?void 0:n.blankVideoUrl).then(function(){if("iPhone"===r.device){var t="timeupdate",n=i.getVideo();n.addEventListener(t,function i(r){n.removeEventListener(t,i),setTimeout(function(){return e.playOnUserGesture()},200)})}else e.playOnUserGesture()}).catch(function(e){t.log("error","ERROR - PlaybackCommand: Priming FAILED.  ".concat(e.message)),t.facade.sendNotification("autoplayblocked",e,"internal")})}}]),i}(io),ts=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.apply(this,arguments)).isReady=!1,e.pUserQualityCategory="AUTO",e}return(0,nt.default)(i,[{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this);var e=this.facade.retrieveProxy("ModelCollectionProxy");this.contentPlaybackState=e.getModel(Lo.modelName),this.contentPlaybackState.qualityInfo={mode:"auto",quality:null,qualities:[]},this.contentPlaybackState.textTracks={track:null,tracks:[]},this.contentPlaybackState.audioTracks={track:null,tracks:[]},this.isReady=!0}},{key:"onRemove",value:function(){this.contentPlaybackState=null,this.thumbnailTrack=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"processQualityProfile",value:function(e){e=Ki(e.map(function(e){return Zi(e)})),this.contentPlaybackState.qualities=e,this.contentPlaybackState.qualityInfo.qualities=e.filter(function(e){return e.enabled}),"manual"!==this.qualitySwitchingMode&&(this.qualitySwitchingMode=e.length?"auto":"unavailable")}},{key:"addTextTracks",value:function(e){this.contentPlaybackState.textTracks.tracks=e}},{key:"getTextTrackById",value:function(e){return this.contentPlaybackState.textTracks.tracks.find(function(t){return t.id===e})}},{key:"getThumbnail",value:function(e){var t;return null==(t=this.thumbnailTrack)?void 0:t.getCueAt(e)}},{key:"textTrackInfo",get:function(){return this.contentPlaybackState.textTracks}},{key:"textTrack",get:function(){return this.contentPlaybackState.textTracks.track},set:function(e){this.contentPlaybackState.textTracks.track=e}},{key:"isAbrSwitchingAvailable",get:function(){return!!this.qualities&&this.qualities.length>1}},{key:"userQualityCategory",get:function(){return this.pUserQualityCategory},set:function(e){this.pUserQualityCategory=e}},{key:"qualitySwitchingMode",get:function(){return this.contentPlaybackState.qualityInfo.mode},set:function(e){this.contentPlaybackState.qualityInfo.mode=e}},{key:"qualities",get:function(){return this.contentPlaybackState.qualities},set:function(e){this.contentPlaybackState.qualities=e}},{key:"maxBandwidth",set:function(e){this.contentPlaybackState.maxBandwidth=isNaN(this.contentPlaybackState.maxBandwidth)?e:Math.max(e,this.contentPlaybackState.maxBandwidth)}},{key:"model",get:function(){return this.contentPlaybackState}},{key:"minIndex",get:function(){return 0}},{key:"maxIndex",get:function(){var e=this.contentPlaybackState.qualityInfo.qualities;return(null==e?void 0:e.length)?this.contentPlaybackState.qualityInfo.qualities.length-1:0}},{key:"minBitrate",get:function(){return this.contentPlaybackState.qualityInfo.qualities[this.minIndex].bitrate}},{key:"maxBitrate",get:function(){return this.contentPlaybackState.qualityInfo.qualities[this.maxIndex].bitrate}},{key:"qualityInfo",get:function(){return this.contentPlaybackState.qualityInfo}},{key:"quality",set:function(e){this.contentPlaybackState.qualityInfo.quality=e}},{key:"audioTrackInfo",get:function(){return this.contentPlaybackState.audioTracks}}]),i}(Ya),is=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"mock",value:function(e){this.pResource=e}},{key:"onRemove",value:function(){this.pResource=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.pResource=this.data}},{key:"resource",get:function(){return this.pResource}},{key:"location",get:function(){return this.pResource.location}},{key:"playback",get:function(){return this.pResource.playback}},{key:"metadata",get:function(){return this.pResource.metadata}},{key:"ad",get:function(){return this.pResource.ad}},{key:"adTrackingSettings",get:function(){return this.pResource.ad.viewabilityTracking}},{key:"hasValidMediaUrl",get:function(){return!Ut(this.location.mediaUrl)}}]),i}(Ya),ns=function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.apply(this,arguments)).contentDurationReleased=!1,e.resumeTimeMaxProximityToAdBreak=5,e.isClickToPlay=!1,e.fullscreenRestrictedDuringAdPlay=!1,e._hasContent=!0,e.contentComplete=!1,e.timeSpent={startTime:null,lastTime:0,sessionTime:0,playbackTime:0,elapsedTime:0},e}return(0,nt.default)(i,[{key:"onRemove",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"start",value:function(){var e=this.resourceProxy.location.mediaUrl;this._hasContent=Vt(e)&&!Ut(e)}},{key:"hasContent",get:function(){return this._hasContent}},{key:"startSession",value:function(){this.updateTimeSpent()}},{key:"close",value:function(){var e,t=this;if(this.closing)return this.closing;var i=null==(e=this.contentPlaybackStateProxy)?void 0:e.model,n=(null==i?void 0:i.time)||0,r=(null==i?void 0:i.duration)||0,a=this.isAdPlaying(),o=this.resourceProxy.resource;return this.respondToPlaybackStateChange("stopped"),this.contentPlaybackStateProxy.isReady=!1,this.closing=this.adapterTask.then(function(){t.startedPlaying&&t.pause(),t.log("info","Closing Presentation"),t.closeAds()}).then(function(){return t.adapter?t.adapter.destroy():null}).then(function(){var e=!a&&t.hasContent&&!t.isContentComplete(),i=a;t.notify("resourceend",{resource:o,contentTime:n,contentDuration:r,contentInterrupted:e,adInterrupted:i,interrupted:e||i})}).catch(function(e){throw ci.error(e),e}).then(function(){t.closing=null})}},{key:"getPlayerVersionInfo",value:function(){return"".concat(Fr.playerName,"_").concat(Fr.playerVersion)}},{key:"startContentSegment",value:function(){}},{key:"closeAds",value:function(){}},{key:"beforePlayOnUserGesture",value:function(){}},{key:"playOnUserGesture",value:function(){this.notify("videoLoadStart"),this.prepareForPlayback(!0)}},{key:"mute",value:function(e){this.muteVideo(e)}},{key:"play",value:function(){return this.contentComplete&&(this.contentComplete=!1),(0,Xe.default)((0,it.default)(i.prototype),"play",this).call(this)}},{key:"seek",value:function(e){return this.contentComplete&&(this.contentComplete=!1),this.seekVideo(e)}},{key:"setVolume",value:function(e){this.domProxy&&this.domProxy.setVideoVolume(e),(0,Xe.default)((0,it.default)(i.prototype),"setVolume",this).call(this,e)}},{key:"getAdBreakTimes",value:function(){return[]}},{key:"getSessionTime",value:function(){return null==this.timeSpent.startTime?null:this.updateTimeSpent().sessionTime}},{key:"getPlaybackTime",value:function(){return null==this.timeSpent.startTime?null:this.updateTimeSpent().playbackTime}},{key:"checkSize",value:function(){if(this.domProxy){var e=this.domProxy.getPresentationRect();e.width===this.currentRect.width&&e.height===this.currentRect.height||(this.currentRect=e,this.respondToSizeChange(),this.notify("presentationsizechange",{width:this.currentRect.width,height:this.currentRect.height}))}}},{key:"releaseContentDuration",value:function(e){this.contentDurationReleased=!0,this.notify("contentdurationavailable",{contentDuration:e})}},{key:"updateTimeSpent",value:function(){var e=performance.now();if(null==this.timeSpent.startTime){this.timeSpent.startTime=e;var t="first-frame",i={id:this.facade.appId,name:t,startTime:e};this.sendNotification("metric",{metric:new Ur(t,i,"mark")}),this.sendNotification("playbackstarted")}null==this.timeSpent.lastTime&&(this.timeSpent.lastTime=e);var n=e-this.timeSpent.startTime;return this.timeSpent.elapsedTime=n,this.timeSpent.sessionTime=n/1e3,"paused"!==this.contentPlaybackStateProxy.model.state&&(this.timeSpent.playbackTime+=(e-this.timeSpent.lastTime)/1e3,this.timeSpent.lastTime=e),this.timeSpent}},{key:"adjustStartTimeForAdBreakProximity",value:function(e,t){for(var i=0,n=t.length;i<n;i++){var r=t[i].startTime-e;if(r>=0&&r<this.resumeTimeMaxProximityToAdBreak)return e-this.resumeTimeMaxProximityToAdBreak}return e}},{key:"domProxy",get:function(){return this.facade.retrieveProxy("PlayerDomProxy")}},{key:"muteVideo",value:function(e){(0,Xe.default)((0,it.default)(i.prototype),"muteVideo",this).call(this,e),this.domProxy&&this.domProxy.muteVideo(e)}},{key:"respondToPlaybackStateChange",value:function(e){(0,Xe.default)((0,it.default)(i.prototype),"respondToPlaybackStateChange",this).call(this,e),this.timeSpent.lastTime=null}},{key:"respondToFullscreenChange",value:function(e){this.checkSize(),this.notify("fullscreenchange",{fullscreen:e})}},{key:"respondToVideoPaused",value:function(){this.respondToPlaybackStateChange("paused")}},{key:"respondToVideoPlaying",value:function(){this.presoModel.started||(this.presoModel.started=!0),this.respondToPlaybackStateChange("playing")}},{key:"respondToVideoSeeking",value:function(){this.notify("seekstart")}},{key:"respondToVideoSeeked",value:function(){this.notify("seekcomplete")}},{key:"respondToQualityChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.notify("qualitychange",{quality:e})}},{key:"respondToError",value:function(e){e.message||(e.message=Ci.messages.UNSPECIFIED_ERROR),e.code||(e.code="3400");var t=this.startedPlaying||!e.category?"videoplaybackerror":"playererror";this.sendErrorNotification(t,e)}},{key:"respondToVideoEnd",value:function(){this.notify("resourceComplete")}},{key:"respondToBufferingStatusCheck",value:function(e){var t=this.presoModel.streamTime;!isNaN(t)&&t>0&&this.checkVideoBuffering(e)}},{key:"respondToId3Data",value:function(e){this.notify("metadatacuepoint",{cue:e})}},{key:"respondToVideoTimeUpdate",value:function(e){var t=this.contentPlaybackStateProxy.model,i=t.duration,n=t.liveStreamInfo,r=t.streamType,a=t.time;this.updateTimeSpent();var o={contentTime:a,contentDuration:i,streamTime:e,streamDuration:this.presoModel.streamDuration,sessionTime:this.timeSpent.sessionTime,playbackTime:this.timeSpent.playbackTime};if("VOD"!==r){var s=n.relativeTime,l=n.relativeDuration;o.contentTime=s,o.contentDuration=l,o.elapsedTimeMs=this.timeSpent.elapsedTime,t.time=s,t.duration=l}this.notify("contentprogress",o)}},{key:"respondToSizeChange",value:function(){this.adapter&&this.adapter.resize()}},{key:"respondToDurationChange",value:function(e){}},{key:"respondToTextTrackModeChange",value:function(e){}},{key:"setForClickToPlay",value:function(){var e=this;if(this.getModel("PlayerOptions").useNativeControls){var t=this.domProxy.getMain();t.addEventListener("click",function i(){t.removeEventListener("click",i),e.notify("playOnUSerGesture")})}}},{key:"isContentComplete",value:function(){if(this.contentComplete)return!0;var e=this.contentPlaybackStateProxy.model;return"LIVE"!==e.streamType&&"DVR"!==e.streamType&&!(isNaN(e.time)||e.time<e.duration)}},{key:"isAdPlaying",value:function(){return this.presoModel.isCurrentVideoAd}},{key:"handleNotification",value:function(e){(0,Xe.default)((0,it.default)(i.prototype),"handleNotification",this).call(this,e)}},{key:"listNotificationInterests",value:function(){return(0,Xe.default)((0,it.default)(i.prototype),"listNotificationInterests",this).call(this).concat([])}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this);var e=this.playerOptions.overrides;e.resumeTimeMaxProximityToAdBreak&&(this.resumeTimeMaxProximityToAdBreak=e.resumeTimeMaxProximityToAdBreak),this.isClickToPlay=!this.presoModel.isAutoplay;var t=this.system;this.fullscreenRestrictedDuringAdPlay=t.isIos||t.isAndroid,this.domProxy&&(this.currentRect=this.domProxy.getPresentationRect())}}]),i}(function(e){(0,et.default)(i,e);var t=st(i);function i(){var e;return(0,rt.default)(this,i),(e=t.apply(this,arguments)).loaded=!1,e.startedPlaying=!1,e.preloadContent=!0,e.minDvrDuration=1800,e.sizeCheckInterval=1e3,e.lastSizeCheckTime=null,e.adapterTask=Promise.resolve(),e.t=!1,e.i=!1,e.previousPlaybackState={state:null,overrides:{},buffer:NaN},e.contentIsBuffering=!1,e.endFreezeTimeoutHandle=null,e.timedTextOffset=0,e.isMonitoringCueEvents=!1,e.shouldSendTextTrackAvailable=!1,e.onLoadError=function(t){var i=t.message,n=t.cause;e.sendErrorNotification(i,n||t)},e.qualityChange=function(t){var i,n;if(t){var r=(0,Ye.default)(e).contentPlaybackStateProxy;if(null==(i=r.qualities)?void 0:i.length){if(!1===t.enabled){var a=r.qualities.map(function(e){return St(Tt({},e),{enabled:e.enabled||e.index===t.index})});e.qualitiesChange(a)}t=r.qualities.find(function(e){return e.index===t.index}),(null==(n=r.qualityInfo.quality)?void 0:n.bitrate)!==t.bitrate&&(r.quality=t,r.model.bitrate=t.bitrate,e.respondToQualityChange(t))}else e.logger.warn("Invalid qualities list. Make sure qualitiesChange is called before qualityChange")}else e.logger.warn("Invalid quality change")},e.qualitiesChange=function(t){var i=(0,Ye.default)(e).contentPlaybackStateProxy,n=i.model,r=JSON.stringify(n.qualities||[]);e.contentPlaybackStateProxy.processQualityProfile(t),i.isAbrSwitchingAvailable||e.logger.log("info",Ci.messages.ABR_UNAVAILABLE),n.qualityInfo&&JSON.stringify(n.qualities)!==r&&(e.log("info","Quality Info: ",n.qualityInfo),e.notify("qualitieschange",{qualities:n.qualities}),e.notify("qualityinfochange",{qualityInfo:n.qualityInfo}))},e.error=function(t){t.fatal&&(e.adapterTask=Promise.resolve()),e.respondToError(t)},e.audioTrackChange=function(t){t=Wi(t,!0),e.contentPlaybackStateProxy.audioTrackInfo.track=t,e.notify("audiotrackchange",{audioTrack:t})},e.audioTracksChange=function(t){t=Wi(t,!0),e.contentPlaybackStateProxy.audioTrackInfo.tracks=t,e.notify("audiotrackschange",{audioTracks:e.contentPlaybackStateProxy.audioTrackInfo.tracks}),e.notify("audiotrackinfochange",{audioTrackInfo:e.contentPlaybackStateProxy.audioTrackInfo})},e.cdnChange=function(t){var i=(0,Ye.default)(e).contentPlaybackStateProxy;t!==i.model.cdn&&(i.model.cdn=t,e.notify("cdnchange",{cdn:t}))},e.drmKeySystemCreated=function(t){e.contentPlaybackStateProxy.model.drmType=t,e.notify("drmkeysystemcreated",{keysystem:t})},e.timeUpdate=function(){if(clearTimeout(e.endFreezeTimeoutHandle),e.pAdapter){var t=e.pAdapter.getCurrentTime(),i=e.presoModel.streamDuration;e.updateLiveStreamInfo(),!e.pAdapter.getIsLiveStream()&&!isNaN(i)&&i-t<=.15&&e.protectAgainstEndFreeze(250),e.respondToVideoTimeUpdate(t)}},e.playing=function(){e.i=!1,e.updateLiveStreamInfo(),e.respondToVideoPlaying()},e.paused=function(){e.i=!0,e.respondToVideoPaused()},e.seeking=function(){e.t||(e.t=!0,e.respondToVideoSeeking(),e.respondToWaiting("seeking",!0))},e.seeked=function(){e.t=!1,e.respondToVideoSeeked(),e.respondToWaiting("seeking",!1)},e.ended=function(){clearTimeout(e.endFreezeTimeoutHandle),e.respondToVideoEnd()},e.durationChange=function(){var t=e.pAdapter.getDuration();t>0&&e.respondToDurationChange(t),e.updateLiveStreamInfo()},e.volumeChange=function(t,i){t!==e.presoModel.volume&&e.notify("volumechange",{volume:t}),null!=i&&i!==e.presoModel.isMuted&&e.notify("mutechange",{muted:i})},e.metadataCuepoint=function(t){var i=t,n=i.info,r=Ct(i,["info"]);Object.defineProperty(r,"info",{get:function(){return ea.info(),n}}),e.respondToId3Data(r)},e.textCuepoints=function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e.textTrackProxy.enabled||i)&&(e.isMonitoringCueEvents&&t.forEach(function(t){return e.respondToTtCue(t)}),e.notify("textcuepoint",{activeCues:t,forced:i}))},e.textTrackDisplayModeChange=function(t){var i="disabled"!==t;e.textTrackProxy.mode=t,e.notify("texttrackenabledchange",{textTrackEnabled:i}),e.respondToTextTrackModeChange(i)},e.textTracksChange=function(t){t=Wi(t,!0),e.contentPlaybackStateProxy.addTextTracks(t),e.notify("texttrackschange",{textTracks:t}),e.shouldSendTextTrackAvailable=!0,e.respondToTextTrackInfoChange()},e.textTrackChange=function(t){t=Wi(t,!0),e.contentPlaybackStateProxy.textTrack=t,e.notify("texttrackchange",{textTrack:t}),e.respondToTextTrackInfoChange()},e.waitingChange=function(t){e.respondToWaiting("waiting",t),e.notify("waitingchange",{waiting:t})},e}return(0,nt.default)(i,[{key:"adapter",get:function(){return this.pAdapter}},{key:"timedTextContainer",get:function(){if(!this.u){var e=this.facade.retrieveProxy("PlayerDomProxy");this.u=e.getElement("ccContainer")}return this.u}},{key:"onRemove",value:function(){clearTimeout(this.endFreezeTimeoutHandle),this.pAdapter=null,this.contentPlaybackStateProxy=null,this.resourceProxy=null,this.textTrackProxy=null,this.presoModel=null,this.playerOptions=null,(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"setVolume",value:function(e){this.presoModel.volume=e}},{key:"load",value:function(){return this.loadVideo().catch(function(e){var t=e.type?e.data||e.detail:null,i=t?t.error||t:e;throw new fi("videostarterror",i)})}},{key:"play",value:function(){return this.playVideo()}},{key:"pause",value:function(){this.pauseVideo()}},{key:"suspend",value:function(){this.pAdapter.suspend()}},{key:"resume",value:function(){this.pAdapter.resume()}},{key:"offsetTimedText",value:function(e){var t=e>0;if(this.timedTextOffset=e,this.playerOptions.renderTextTrackNatively&&"Firefox"===this.system.browser)this.monitorTtCues(t);else if(!1===this.playerOptions.renderTextTrackNatively&&this.timedTextContainer)this.timedTextContainer.style.bottom="".concat(e,"px");else{var i=this.facade.retrieveProxy("PlayerDomProxy").getMain();null==document||document.documentElement.style.setProperty("--avia-timed-text-offset","".concat(e,"px")),null==i||i.classList[t?"add":"remove"]("avia-cc-offset")}}},{key:"getBuffered",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pAdapter.getBuffered(e)}},{key:"loadVideo",value:function(){var e=this;return this.pendingLoad?this.pendingLoad:this.loaded?Promise.resolve():(this.respondToWaiting("loading",!0),this.logger.time("resource-load"),this.pendingLoad=this.pAdapter.load().then(function(t){e.loaded=!0,e.respondToWaiting("loading",!1),e.pendingLoad=null;var i=e.resourceProxy.resource;e.notify("streammetadata",{streamMetadata:t});var n=i.location.thumbnailTrackUrl;!e.contentPlaybackStateProxy.thumbnailTrack&&n&&ka.create(n,e.getProxy("HookProxy")).then(function(t){e.contentPlaybackStateProxy.thumbnailTrack=t,e.notify("thumbnailtrackavailable",{thumbnailTrack:t})}).catch(function(t){return e.log("warn","Could not load thumbnail track")}),e.logger.timeEnd("resource-load")}))}},{key:"playVideo",value:function(){var e=this;return this.logger.time("resource-playback"),this.pAdapter.play().then(function(){e.startedPlaying=!0,e.logger.timeEnd("resource-playback")}).catch(function(t){0===t.code?e.sendNotification("autoplayblocked",t):e.logger.warn("Video element play() error: ".concat(t))})}},{key:"pauseVideo",value:function(){var e;null==(e=this.pAdapter)||e.pause()}},{key:"muteVideo",value:function(e){e||this.presoModel.userHasUnmuted||(this.presoModel.userHasUnmuted=!0),this.presoModel.isMuted=e}},{key:"seekVideo",value:function(e){return this.pAdapter.seek(e)}},{key:"checkVideoBuffering",value:function(e){var t=Math.max(Math.floor(this.bufferingSampleRate/ko.INTERVAL),1);if(!(isFinite(t)&&e%t)){var i=!1;if(!this.i){var n=this.previousPlaybackState.buffer+.001,r=this.video.currentTime;this.previousPlaybackState.buffer=r,i=r<n&&!this.t}this.contentIsBuffering!==i&&(this.contentIsBuffering=i,this.notify("resourcebuffering",{buffering:i}))}}},{key:"video",get:function(){return this.viewControl}},{key:"notify",value:function(e,t){this.sendNotification(e,t,"internal")}},{key:"respondToIsPlayingLiveChange",value:function(e){this.notify("contentisplayinglive",{isLive:e})}},{key:"respondToStreamTypeChange",value:function(e){if(this.streamType!==e){var t=this.contentPlaybackStateProxy.model;this.streamType=e,t.streamType=e,this.notify("streamtypechange",{streamType:e})}}},{key:"respondToWaiting",value:function(e,t){this.previousPlaybackState.overrides[e]=t;var i=!this.previousPlaybackState.state||Vi(this.previousPlaybackState.overrides).includes(!0);this.respondToPlaybackStateChange(i?"waiting":this.previousPlaybackState.state)}},{key:"respondToPlaybackStateChange",value:function(e){var t=this.contentPlaybackStateProxy.model,i="waiting"!==e;if(t.state!==e){if("idle"!==e&&i&&(this.previousPlaybackState.state=e),this.t&&i)return;t.state=e,this.notify("playbackstatechange",{playbackState:e})}}},{key:"monitorTtCues",value:function(e){var t=Array.from(this.video.textTracks).find(function(e){return nr(e.kind)&&"showing"===e.mode}),i=null==t?void 0:t.activeCues;if(this.isMonitoringCueEvents=e,i)for(var n=0,r=i.length||0;n<r;n++)this.respondToTtCue(i[n])}},{key:"respondToTtCue",value:function(e){e.line=this.isMonitoringCueEvents?.21875*this.timedTextOffset:"auto"}},{key:"handleNotification",value:function(e){switch(e.name){case"timerTic":this.respondToBufferingStatusCheck(e.body.count),this.lastSizeCheckTime&&!this.shouldCheckSize()||(this.lastSizeCheckTime=Date.now(),this.checkSize());break;case"fullscreenChange":var t=e.body;this.presoModel.isFullscreen=t.isFullscreen,this.respondToFullscreenChange(t.isFullscreen);break;case"autoQualitySwitching":var i=this.contentPlaybackStateProxy.model;this.notify("qualityinfochange",{qualityInfo:i.qualityInfo})}}},{key:"listNotificationInterests",value:function(){return["timerTic","fullscreenChange"]}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.contentPlaybackStateProxy=this.facade.retrieveProxy("ContentPlaybackStateProxy"),this.resourceProxy=this.facade.retrieveProxy("ResourceProxy"),this.performanceProxy=this.facade.retrieveProxy("PerformanceProxy"),this.textTrackProxy=this.facade.retrieveProxy("TextTrackProxy"),this.presoModel=this.getModel("PresentationState"),this.playerOptions=this.getModel("PlayerOptions"),void 0!==this.playerOptions.sizeCheckInterval&&(this.sizeCheckInterval=this.playerOptions.sizeCheckInterval);var e=this.resourceProxy.resource.overrides;$t(null==e?void 0:e.minDvrDuration)&&(this.minDvrDuration=e.minDvrDuration),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&(this.muteVideo(!0),this.presoModel.isMuted=!0),this.bufferingSampleRate=this.performanceProxy.bufferingSampleRate}},{key:"prepareForPlayback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.initializing){var t={system:this.system,playerOptions:this.playerOptions,resource:this.resourceProxy.resource,performanceSettings:this.performanceProxy,textTrackSettings:this.textTrackProxy,video:this.viewControl,logger:this.logger};this.adapterTask=this.initializeAdapter(t,e).catch(this.onLoadError)}}},{key:"sendErrorNotification",value:function(e,t){this.notify(e,t)}},{key:"createAdapter",value:function(e){return It(this,null,qe.default.mark(function t(){var i,n,r=this;return qe.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.facade.retrieveProxy("AdapterProxy"),t.next=3,i.createAdapter("playback",e.resource,function(){return r});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)}))}},{key:"initializeAdapter",value:function(e,t){return It(this,null,qe.default.mark(function i(){var n;return qe.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,this.logger.time("playback-adapter-creation"),this.initializing=!0,!this.closing){i.next=5;break}return i.abrupt("return");case 5:return i.prev=5,i.next=8,this.createAdapter(e);case 8:if(this.pAdapter=i.sent,!this.closing){i.next=11;break}return i.abrupt("return");case 11:i.next=18;break;case 13:throw i.prev=13,i.t0=i.catch(5),(n=fn(e.resource))&&(i.t0.message+=". Attempting to play a stream of type ".concat(n)),new fi("resourceerror",i.t0);case 18:if(this.logger.timeEnd("playback-adapter-creation"),!this.preloadContent){i.next=22;break}return i.next=22,this.load();case 22:if(i.prev=22,!this.closing){i.next=25;break}return i.abrupt("return");case 25:if(this.presoModel.isAutoplay||t){i.next=27;break}return i.abrupt("return");case 27:return i.next=29,this.play();case 29:i.next=34;break;case 31:throw i.prev=31,i.t1=i.catch(22),new fi("videoplaybackerror",i.t1);case 34:return i.prev=34,this.initializing=!1,i.finish(34);case 37:case"end":return i.stop()}},i,this,[[0,,34,37],[5,13],[22,31]])}))}},{key:"respondToTextTrackInfoChange",value:function(){var e=this.contentPlaybackStateProxy.textTrackInfo;this.notify("texttrackinfochange",{textTrackInfo:this.contentPlaybackStateProxy.textTrackInfo}),this.shouldSendTextTrackAvailable&&e.track&&e.tracks.length&&(this.notify("texttrackavailable"),this.shouldSendTextTrackAvailable=!1)}},{key:"protectAgainstEndFreeze",value:function(e){var t=this;clearTimeout(this.endFreezeTimeoutHandle),this.endFreezeTimeoutHandle=setTimeout(function(){t.respondToVideoEnd()},e)}},{key:"calculateStreamType",value:function(){if(this.pAdapter.getIsLiveStream()){var e=this.pAdapter.getLiveStreamInfo().dvrWindowSize;return e<this.minDvrDuration||isNaN(e)?"LIVE":"DVR"}return"VOD"}},{key:"updateLiveStreamInfo",value:function(){if(this.pAdapter.getIsLiveStream()){var e=this.contentPlaybackStateProxy.model,t=this.pAdapter.getLiveStreamInfo();e.liveStreamInfo=t;var i=this.calculateStreamType();this.respondToStreamTypeChange(i);var n="LIVE"===i||t.isPlayingLive;this.isPlayingLive!==n&&(this.isPlayingLive=n,this.respondToIsPlayingLiveChange(n)),"DVR"===e.streamType&&this.respondToDurationChange(t.relativeDuration)}else this.respondToStreamTypeChange("VOD")}},{key:"shouldCheckSize",value:function(){return this.playerOptions.sizeCheckInterval>0&&(!this.lastSizeCheckTime||Date.now()-this.lastSizeCheckTime>=this.sizeCheckInterval)}},{key:"hasHook",value:function(e){return this.getProxy("HookProxy").hasHook(e)}},{key:"applyHook",value:function(e,t,i){var n=this;return this.getProxy("HookProxy").applyHook(e,t,i).catch(function(e){throw n.error(e),e})}}]),i}(Ao)),rs=function(e){(0,et.default)(i,e);var t=st(i);function i(e,n){var r;return(0,rt.default)(this,i),(r=t.call(this,e,n)).pAdAdapter=null,r.adAdapterStarted=!1,r.contentSegmentStarted=!1,r.contentStartReleased=!1,r.contentCompleteReleased=!1,r.fatalContentErrorReceived=!1,r.hasMidRolls=!1,r.pendingSeekTime=null,r.currentAd=null,r.currentBreak=null,r.pointerLocked=!1,r.isPreloading=!1,r.cancelPointerLock=function(){var e;document.removeEventListener("mousemove",r.cancelPointerLock),null==(e=document.exitPointerLock)||e.call(document),r.pointerLocked=!1},r.setPointerState=function(){return It((0,Ye.default)(r),null,qe.default.mark(function e(){var t,i,n=this;return qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pointerLocked||this.isFullScreenAd()){e.next=5;break}return this.cancelPointerLock(),e.abrupt("return");case 5:if(this.pointerLocked||!this.isFullScreenAd()){e.next=20;break}if((i=null==(t=this.domProxy)?void 0:t.getMain())&&i.requestPointerLock){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,this.pointerLocked=!0,e.next=13,i.requestPointerLock();case 13:this.cancelTimeout=setTimeout(function(){return null==document?void 0:document.addEventListener("mousemove",n.cancelPointerLock)},100),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),this.pointerLocked=!1,this.logger.warn(e.t0);case 20:case"end":return e.stop()}},e,this,[[9,16]])}))},r.hMovement=function(e){r.presoModel.isFullscreen&&r.pointerLockDebouncer()},r.preloadContent=!1,r}return(0,nt.default)(i,[{key:"adAdapter",get:function(){return this.pAdAdapter},set:function(e){this.pAdAdapter=e}},{key:"adInProgress",get:function(){return this.presoModel.isCurrentVideoAd}},{key:"onRemove",value:function(){var e,t;null==(t=null==(e=this.pAdAdapter)?void 0:e.destroy)||t.call(e),this.pAdAdapter=null,this.cancelPointerLock(),this.pointerLockDebouncer.cancel(),clearTimeout(this.cancelTimeout),this.monitorActivity(!1),(0,Xe.default)((0,it.default)(i.prototype),"onRemove",this).call(this)}},{key:"closeAds",value:function(){var e,t;null==(e=this.domProxy)||e.showAdContainer(!1),null==(t=this.adAdapter)||t.destroy(),this.pAdAdapter=null}},{key:"beforePlayOnUserGesture",value:function(){var e;null==(e=this.adAdapter)||e.playClicked()}},{key:"playOnUserGesture",value:function(){this.hasContent?(0,Xe.default)((0,it.default)(i.prototype),"playOnUserGesture",this).call(this):this.play()}},{key:"start",value:function(){var e,t,n,r=this.resourceProxy.playback.startTime,a=this.resourceProxy.ad.showPrerollOnNonZeroStart,o=!isNaN(r)&&r>0;if((0,Xe.default)((0,it.default)(i.prototype),"start",this).call(this),this.mute(this.presoModel.isMuted),o&&a&&(this.pendingSeekTime=r),this.isClickToPlay)this.setForClickToPlay();else{var s=this.resourceProxy.resource;(null==(t=null==(e=s.ad)?void 0:e.csai)?void 0:t.adCallUrl)&&!(null==(n=s.location)?void 0:n.mediaUrl)?this.play():(this.notify("videoLoadStart"),this.prepareForPlayback())}}},{key:"getAdBreakTimes",value:function(){var e,t=[];return null==(e=this.breakSchedule)||e.forEach(function(e){t.push(Tt({start:e.startTime,streamTimeStart:e.streamStartTime,end:e.endTime,streamTimeEnd:e.streamStartTime+e.duration,played:e.hasPlayed},e))}),t}},{key:"getDelegate",value:function(){return to({},this)}},{key:"play",value:function(){var e;return this.presoModel.started?this.adInProgress&&(null==(e=this.adAdapter)?void 0:e.resume)?Promise.resolve(this.adAdapter.resume()):this.playVideo():(this.presoModel.started=!0,this.adAdapterStarted=!0,Promise.resolve(this.adAdapter.start()))}},{key:"pause",value:function(){var e;this.adInProgress&&(null==(e=this.adAdapter)?void 0:e.pause)?this.adAdapter.pause():this.pauseVideo()}},{key:"getBuffered",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,Xe.default)((0,it.default)(i.prototype),"getBuffered",this).call(this,t);return!0===t?n:n.map(function(t){var i,n,r,a;return{startTime:(null==(n=(i=e.adAdapter).contentTimeForStreamTime)?void 0:n.call(i,t.startTime))||t.startTime,endTime:(null==(a=(r=e.adAdapter).contentTimeForStreamTime)?void 0:a.call(r,t.endTime))||t.endTime}})}},{key:"mute",value:function(e){var t;null==(t=this.adAdapter)||t.setMuteState(e),(0,Xe.default)((0,it.default)(i.prototype),"mute",this).call(this,e)}},{key:"setVolume",value:function(e){var t;null==(t=this.adAdapter)||t.setVolume(e),(0,Xe.default)((0,it.default)(i.prototype),"setVolume",this).call(this,e)}},{key:"seek",value:function(e){var t=this.streamTimeForContentTime(e),n=this.getPermittedSeekTime(e);return this.hasMidRolls&&this.adAdapter&&n!==t&&(this.pendingSeekTime=t,this.notify("seekredirectstart",{requestedSeekTime:e,actualSeekTime:this.contentTimeForStreamTime(n)})),this.contentComplete&&!this.contentSegmentStarted&&(this.contentSegmentStarted=!0),(0,Xe.default)((0,it.default)(i.prototype),"seek",this).call(this,n)}},{key:"skipAd",value:function(){var e;null==(e=this.adAdapter)||e.skipAd()}},{key:"pauseContent",value:function(){var e;this.pauseVideo(),null==(e=this.domProxy)||e.showAdContainer(!0)}},{key:"resumeContent",value:function(){var e,t,n=this;if(this.currentAd=null,this.currentBreak=null,null==(e=this.domProxy)||e.showAdClickElement(!1),null==(t=this.domProxy)||t.showAdContainer(!1),!this.fatalContentErrorReceived)if(this.hasContent&&!this.contentComplete)if(this.contentStartReleased)this.resumeContentPlayComplete();else{var r=this.resourceProxy.playback.startTime;if(!isNaN(r)&&r>0){var a=this.getAdBreakTimes(),o=this.adjustStartTimeForAdBreakProximity(r,a);this.resourceProxy.playback.startTime=o}this.load().then(function(){n.resumeContentPlayComplete()}).catch(this.onLoadError)}else(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoEnd",this).call(this)}},{key:"streamIdAvailable",value:function(e){this.notify("streamidavailable",{streamId:e})}},{key:"applyHook",value:function(e,t,n){return(0,Xe.default)((0,it.default)(i.prototype),"applyHook",this).call(this,e,t,n)}},{key:"adSkippableStateChanged",value:function(){this.notify("adskippablestatechange")}},{key:"adSegmentStarted",value:function(){this.endContentSegment(),this.presoModel.isCurrentVideoAd=!0,this.notify("adsegmentstart")}},{key:"adSegmentReentered",value:function(){this.notify("adsegmentreentered")}},{key:"adSegmentEnded",value:function(){this.contentSegmentStarted=!1,this.presoModel&&(this.presoModel.isCurrentVideoAd=!1),this.notify("adsegmentend")}},{key:"adBreaksAvailable",value:function(e){this.hasMidRolls=e.some(function(e){return"MID"===e.type}),this.breakSchedule=e;var t=e.map(function(e){return e.startTime});this.notify("adcuepointsavailable",{cuepoints:t,adBreaks:e})}},{key:"seekToStreamTime",value:function(e){this.seekVideo(e)}},{key:"adBreakStart",value:function(){var e;this.endContentSegment(),this.updateSize(),null==(e=this.domProxy)||e.showAdContainer(!0),this.presoModel.isCurrentVideoAd=!0,null===this.timeSpent.startTime&&this.startSession(),this.notify("adbreakstart")}},{key:"adBreakMetadata",value:function(e){this.currentBreak=e,this.notify("adbreakmetadata",{adBreakInfo:e})}},{key:"adLoaded",value:function(){}},{key:"adStart",value:function(e){this.currentAd=e,this.respondToPlaybackStateChange("playing"),this.notify("adstart",{adInfo:e})}},{key:"adProgress",value:function(e,t){this.notify("adprogress",{currentTime:e,duration:t,streamTime:this.presoModel.streamTime,streamDuration:this.presoModel.streamDuration}),this.checkPreload(e,t)}},{key:"adFirstQuartile",value:function(){this.notify("adfirstquartile")}},{key:"adMidpoint",value:function(){this.notify("admidpoint")}},{key:"adThirdQuartile",value:function(){this.notify("adthirdquartile")}},{key:"adComplete",value:function(){this.currentAd=null,this.notify("adcomplete")}},{key:"adBreakComplete",value:function(){var e,t;if(this.currentBreak=null,this.currentAd=null,this.isPreloading=!1,null==(e=this.domProxy)||e.showAdContainer(!1),null==(t=this.domProxy)||t.showAdClickElement(!1),this.presoModel.isCurrentVideoAd=!1,this.notify("adbreakcomplete"),this.pendingSeekTime&&this.contentStartReleased){var i=this.pendingSeekTime;this.pendingSeekTime=null,this.contentPlaybackStateProxy.model.started&&this.notify("seekredirectcomplete"),this.seekVideo(i)}}},{key:"adClicked",value:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"playing"===(null==(t=null==(e=this.contentPlaybackStateProxy)?void 0:e.model)?void 0:t.state)&&this.pause(),this.notify("adclick",{clickThroughUrl:i})}},{key:"adError",value:function(e){this.currentAd=null,e.message||(e.message=Ci.messages.UNSPECIFIED_ERROR),this.notify("aderror",e)}},{key:"adPaused",value:function(){this.respondToPlaybackStateChange("paused"),this.notify("adpaused")}},{key:"adResumed",value:function(){this.notify("resourcebuffering",{buffering:!1}),this.respondToPlaybackStateChange("playing"),this.notify("adplaying")}},{key:"adStalled",value:function(e){this.logger.dir("warn",e,"Stalled Ad Info"),this.notify("adstalled",new Ai("4000","Stalled ad detected",e,!1,"Ad"))}},{key:"adBreakDiscarded",value:function(){this.notify("adbreakdiscarded")}},{key:"adSkipped",value:function(){this.notify("adskipped")}},{key:"allAdsComplete",value:function(){}},{key:"adBuffering",value:function(e){}},{key:"displayAdClickElement",value:function(e){var t;null==(t=this.domProxy)||t.showAdClickElement(e)}},{key:"resumeContentPlayComplete",value:function(){return It(this,null,qe.default.mark(function e(){var t=this;return qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingSeekTime||!this.contentStartReleased){e.next=5;break}return e.next=3,this.seekVideo(this.pendingSeekTime).catch(function(e){t.log("warn","APM#resumeContentPlayComplete; A seek() call failed."),t.logger.dir("debug",e,"Error")});case 3:this.notify("seekredirectcomplete"),this.pendingSeekTime=null;case 5:this.play();case 6:case"end":return e.stop()}},e,this)}))}},{key:"isFullScreenAd",value:function(){return this.presoModel.isFullscreen&&this.adInProgress}},{key:"monitorActivity",value:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Jn.isDesktop){var n=i?"addEventListener":"removeEventListener";null==(t=null==(e=this.domProxy)?void 0:e.getMain())||t[n]("mousemove",this.hMovement)}}},{key:"handleNotification",value:function(e){var t,n,r,a=e.name,o=e.body,s=!1;switch(a){case"fullscreenchange":null==(t=this.adAdapter)||t.setFullscreenState(o.fullscreen),s=!0;break;case"qualitychange":var l=(null==(n=o.quality)?void 0:n.bitrate)?Math.round(.001*o.quality.bitrate):-1;null==(r=this.adAdapter)||r.setContentBitrate(l)}(0,Xe.default)((0,it.default)(i.prototype),"handleNotification",this).call(this,e),s&&this.monitorActivity(o.fullscreen)}},{key:"updateSize",value:function(){var e,t,i=null==(e=this.domProxy)?void 0:e.getPresentationRect();i&&(null==(t=this.adAdapter)||t.updateSize(i))}},{key:"respondToSizeChange",value:function(){this.updateSize(),(0,Xe.default)((0,it.default)(i.prototype),"respondToSizeChange",this).call(this)}},{key:"respondToId3Data",value:function(e){this.adAdapter.handleTimedMetadata(e),(0,Xe.default)((0,it.default)(i.prototype),"respondToId3Data",this).call(this,e)}},{key:"respondToVideoPaused",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoPaused",this).call(this),this.adInProgress?this.notify("adpaused"):(this.respondToPlaybackStateChange("paused"),this.notify("contentpaused"))}},{key:"respondToPlaybackStateChange",value:function(e){this.isPreloading&&"waiting"===e||(0,Xe.default)((0,it.default)(i.prototype),"respondToPlaybackStateChange",this).call(this,e)}},{key:"respondToVideoPlaying",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoPlaying",this).call(this),this.adAdapterStarted||(this.adAdapterStarted=!0,this.adAdapter.start()),this.contentPlaybackStateProxy.model.time>.5&&!this.adInProgress&&this.contentSegmentStarted?(this.respondToPlaybackStateChange("playing"),this.notify("contentplaying")):this.adInProgress&&this.notify("adplaying")}},{key:"respondToVideoTimeUpdate",value:function(e){var t,n,r,a=this.contentPlaybackStateProxy.model;this.presoModel.streamTime=e,null==(t=this.adAdapter)||t.setStreamTime(e),a.time=this.contentTimeForStreamTime(e),this.adInProgress||this.fatalContentErrorReceived||(e>.75&&!this.contentSegmentStarted&&(a.started=!0,null==(n=this.domProxy)||n.showAdClickElement(!1),null==(r=this.domProxy)||r.showAdContainer(!1),!this.contentStartReleased&&this.signalContentStart(),this.contentSegmentStarted=!0,this.hasMidRolls||"LIVE"===a.streamType||"DVR"===a.streamType?this.notify("contentsegmentstart"):this.notify("contentplaying")),this.contentSegmentStarted&&(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoTimeUpdate",this).call(this,e),"LIVE"!==a.streamType&&a.time>=a.duration&&!this.contentCompleteReleased&&this.signalContentComplete())}},{key:"endContentSegment",value:function(){if(this.contentSegmentStarted){var e=this.contentPlaybackStateProxy.model;this.contentSegmentStarted=!1,(this.hasMidRolls||"LIVE"===e.streamType||"DVR"===e.streamType)&&this.notify("contentsegmentend")}}},{key:"respondToVideoEnd",value:function(){var e,t;this.contentCompleteReleased||this.signalContentComplete(),null==(e=this.adAdapter)||e.contentComplete(),(null==(t=this.breakSchedule)?void 0:t.find(function(e){return"POST"===e.type}))||(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoEnd",this).call(this)}},{key:"respondToDurationChange",value:function(e){if(e&&!isNaN(e)&&e>0){this.adAdapter.setStreamDuration(e),this.presoModel.streamDuration=e;var t=this.contentTimeForStreamTime(e);this.contentPlaybackStateProxy.model.duration=t,this.contentDurationReleased||this.releaseContentDuration(e)}}},{key:"respondToError",value:function(e){this.fatalContentErrorReceived=e.fatal,(0,Xe.default)((0,it.default)(i.prototype),"respondToError",this).call(this,e)}},{key:"isContentComplete",value:function(){return this.contentComplete}},{key:"startContentSegment",value:function(){var e;this.contentSegmentStarted=!0,this.contentPlaybackStateProxy.model.started=!0,null==(e=this.domProxy)||e.showAdContainer(!1),this.contentStartReleased||this.signalContentStart(),this.notify("contentsegmentstart")}},{key:"checkPreload",value:function(e,t){var i,n,r,a,o,s;if(!this.isPreloading&&!0===(null==(a=null==(r=null==(n=null==(i=this.resourceProxy)?void 0:i.resource)?void 0:n.ad)?void 0:r.csai)?void 0:a.preloadContentAtEndOfPreRoll)&&(null==(o=this.currentAd)?void 0:o.adPosition)===(null==(s=this.currentBreak)?void 0:s.adTotal)&&!this.system.isIos){var l=Di(Math.ceil(t/4),2,10);Math.round(e)>=l&&(this.isPreloading=!0,this.load().catch(this.onLoadError))}}},{key:"signalContentStart",value:function(){this.contentStartReleased=!0,this.notify("contentstart")}},{key:"signalContentComplete",value:function(){this.contentComplete=!0,this.contentSegmentStarted&&this.endContentSegment(),this.contentCompleteReleased=!0,this.notify("contentcomplete")}},{key:"contentTimeForStreamTime",value:function(e){var t;return(null==(t=this.adAdapter)?void 0:t.contentTimeForStreamTime)?this.adAdapter.contentTimeForStreamTime(e):e}},{key:"streamTimeForContentTime",value:function(e){var t;return(null==(t=this.adAdapter)?void 0:t.streamTimeForContentTime)?this.adAdapter.streamTimeForContentTime(e):e}},{key:"getPermittedSeekTime",value:function(e){var t;return(null==(t=this.adAdapter)?void 0:t.getPermittedSeekTime)?this.adAdapter.getPermittedSeekTime(e):e}},{key:"listNotificationInterests",value:function(){return(0,Xe.default)((0,it.default)(i.prototype),"listNotificationInterests",this).call(this).concat(["fullscreenchange","qualitychange"])}},{key:"onRegister",value:function(){var e,t;(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this);var n=this.facade.retrieveProxy("ActivityProxy").idleDelay;this.pointerLockDebouncer=Rr(this.setPointerState,n),null==(e=this.domProxy)||e.showAdContainer(!1),null==(t=this.domProxy)||t.showAdClickElement(!1)}}]),i}(ns);_t([Za()],rs.prototype,"pauseContent",1),_t([Za()],rs.prototype,"resumeContent",1),_t([Za()],rs.prototype,"streamIdAvailable",1),_t([Za()],rs.prototype,"applyHook",1),_t([Za()],rs.prototype,"adSkippableStateChanged",1),_t([Za()],rs.prototype,"adSegmentStarted",1),_t([Za()],rs.prototype,"adSegmentReentered",1),_t([Za()],rs.prototype,"adSegmentEnded",1),_t([Za()],rs.prototype,"adBreaksAvailable",1),_t([Za()],rs.prototype,"seekToStreamTime",1),_t([Za()],rs.prototype,"adBreakStart",1),_t([Za()],rs.prototype,"adBreakMetadata",1),_t([Za()],rs.prototype,"adLoaded",1),_t([Za()],rs.prototype,"adStart",1),_t([Za()],rs.prototype,"adProgress",1),_t([Za()],rs.prototype,"adFirstQuartile",1),_t([Za()],rs.prototype,"adMidpoint",1),_t([Za()],rs.prototype,"adThirdQuartile",1),_t([Za()],rs.prototype,"adComplete",1),_t([Za()],rs.prototype,"adBreakComplete",1),_t([Za()],rs.prototype,"adClicked",1),_t([Za()],rs.prototype,"adError",1),_t([Za()],rs.prototype,"adPaused",1),_t([Za()],rs.prototype,"adResumed",1),_t([Za()],rs.prototype,"adStalled",1),_t([Za()],rs.prototype,"adBreakDiscarded",1),_t([Za()],rs.prototype,"adSkipped",1),_t([Za()],rs.prototype,"allAdsComplete",1),_t([Za()],rs.prototype,"adBuffering",1),_t([Za()],rs.prototype,"displayAdClickElement",1);var as=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"start",value:function(){this.isClickToPlay?this.setForClickToPlay():this.notify("videoLoadStart")}},{key:"respondToVideoPlaying",value:function(){var e=!1;this.contentPlaybackStateProxy.model.started=!0,this.presoModel.started||(e=!0),(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoPlaying",this).call(this),e&&this.notify("contentstart"),this.notify("contentplaying")}},{key:"respondToVideoTimeUpdate",value:function(e){if(!this.contentComplete){var t=this.contentPlaybackStateProxy.model;this.presoModel.streamTime=e,t.time=e,this.presoModel.started&&(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoTimeUpdate",this).call(this,e)}}},{key:"respondToVideoPaused",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoPaused",this).call(this),this.notify("contentpaused")}},{key:"respondToIsPlayingLiveChange",value:function(e){(0,Xe.default)((0,it.default)(i.prototype),"respondToIsPlayingLiveChange",this).call(this,e)}},{key:"respondToVideoEnd",value:function(){this.contentComplete=!0,this.notify("contentcomplete"),(0,Xe.default)((0,it.default)(i.prototype),"respondToVideoEnd",this).call(this)}},{key:"respondToDurationChange",value:function(e){this.presoModel.streamDuration=e,this.contentPlaybackStateProxy.model.duration=e,this.contentDurationReleased||this.releaseContentDuration(e)}},{key:"onRegister",value:function(){(0,Xe.default)((0,it.default)(i.prototype),"onRegister",this).call(this),this.domProxy&&this.domProxy.showAdContainer(!1),!this.isClickToPlay&&this.prepareForPlayback()}}]),i}(ns),os=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t,i=this,n=this.system,r=e.body;if(null==(t=n.global)?void 0:t.document){var a=this.getModel("PresentationState"),o=this.getModel("PlayerOptions");this.facade.registerProxy(new ts("ContentPlaybackStateProxy")),this.checkAutoplay(o).then(function(e){i.processAutoplaySupport(e,a,o),i.createPresentation(r,a,o)})}else this.sendNotification("videostarterror",{error:Ci.messages.ENVIRONMENT_NOT_SUPPORTED,fatal:!0})}},{key:"createPresentation",value:function(e,t,i){return It(this,null,qe.default.mark(function n(){var r;return qe.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getPresentationMediator(e,t,i);case 2:if(r=n.sent){n.next=5;break}return n.abrupt("return");case 5:this.facade.registerMediator(r),this.sendNotification("startPresentation");case 7:case"end":return n.stop()}},n,this)}))}},{key:"getPresentationMediator",value:function(e,t,i){return It(this,null,qe.default.mark(function n(){var r,a,o,s,l,u,c,d,h,f,v,p,g;return qe.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s=this.facade.retrieveProxy("PlayerDomProxy"),l=this.getVideo(s,i),u=null,!s||l){n.next=6;break}return this.sendNotification("resourceerror",{code:"9999",message:Ci.messages.VIDEO_PLAYBACK_UNAVAILABLE,fatal:!0}),n.abrupt("return",u);case 6:if(c="PresentationMediator",((d=(null==(r=null==e?void 0:e.ad)?void 0:r.csai)||(null==(a=null==e?void 0:e.ad)?void 0:a.ssai))||t.isAutoplay||i.playsInline)&&(null==s||s.setVideoAttribute("playsinline","")),!d){n.next=34;break}return n.prev=10,this.logger.time("ad-adapter-creation"),h=new rs(c,l),f=h.getDelegate(),v=this.facade.retrieveProxy("AdapterProxy"),n.next=17,v.createAdapter("ad",e,function(){return f});case 17:return p=n.sent,h.adAdapter=p,this.logger.timeEnd("ad-adapter-creation"),this.logger.time("ad-resource-creation"),n.next=23,null==(o=p.getResource)?void 0:o.call(p);case 23:g=n.sent,this.logger.timeEnd("ad-resource-creation"),g&&(e=g),u=h,n.next=32;break;case 29:n.prev=29,n.t0=n.catch(10),this.sendNotification("aderror",{code:n.t0.code||"4400",message:n.t0.message,cause:n.t0,fatal:!0});case 32:n.next=35;break;case 34:u=new as(c,l);case 35:return this.createResourceProxy(e),n.abrupt("return",u);case 37:case"end":return n.stop()}},n,this,[[10,29]])}))}},{key:"createResourceProxy",value:function(e){var t=new is("ResourceProxy",e);this.facade.registerProxy(t)}},{key:"getVideo",value:function(e,t){var i=this.system;return i.isWebMaf?i.webMafPlayer:e?(!0!==t.reuseVideoElement&&e.recreateVideo(),e.getVideo()):null}},{key:"processAutoplaySupport",value:function(e,t,i){if(!t.isAutoplay){var n=i.autoplay,r=e.supportsMutedAutoplay,a=e.supportsUnmutedAutoplay;(("attemptMuted"===n||"attemptUnmutedThenMuted"===n)&&!r||"attemptUnmuted"===n&&!a)&&this.sendNotification("autoplayblocked",new Error("Autoplay capability conflict."),"internal"),t.isMuteAtPlayStart="attemptMuted"===n&&r||"attemptUnmutedThenMuted"===n&&!a&&r,t.isAutoplay=this.shouldAutoplay(n,e)}}},{key:"shouldAutoplay",value:function(e,t){if(Ut(e)||"none"===e)return!1;var i=t.supportsMutedAutoplay,n=t.supportsUnmutedAutoplay,r="attemptUnmuted"===e&&n;return"attemptMuted"===e&&i||r||!r&&"attemptUnmutedThenMuted"===e&&i}},{key:"checkAutoplay",value:function(e){var t;return this.getService("AutoplayCapabilities").detectCapabilities(null==(t=e.overrides)?void 0:t.blankVideoUrl)}}]),i}(io),ss=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this;e.body.resource?this.getProxy("HookProxy").applyHook("attachresource",new ja(e.body.resource)).then(function(e){try{ja.validate(e)}catch(e){t.invalidResource(e.message)}e.sessionId||(e.sessionId=Yt()),e.cmcd.sessionId||(e.cmcd.sessionId=e.sessionId),e.contentId&&!e.cmcd.contentId&&(e.cmcd.contentId=e.contentId),t.facade.sendNotification("playResource",e,"internal")}).catch(function(e){t.facade.sendNotification("resourceerror",e.cause||e,"internal")}):this.invalidResource(Ci.messages.RESOURCE_MISSING)}},{key:"invalidResource",value:function(e){this.facade.sendNotification("resourceerror",{message:"".concat(Ci.messages.INVALID_RESOURCE,": ").concat(e),code:"1000",fatal:!0},"internal")}}]),i}(io),ls=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t,i,n=this.facade;switch(e.name){case"resourceComplete":if(!1===(null==(t=this.getModel("PlayerOptions").overrides)?void 0:t.closeOnEnded))return;var r=n.retrieveMediator("PresentationMediator");return void(null==r||r.close());case"resourceend":n.retrieveMediator("TimerMediator").killTimer(),this.sendNotification("killResourcePresentation",null,"internal");break;case"resourcebuffering":var a=n.retrieveProxy("PlayerDomProxy"),o=null==a?void 0:a.getMain();null==o||o.setAttribute("aria-busy",e.body.buffering.toString());break;case"adbreakstart":var s=n.retrieveMediator("PresentationMediator");null==(i=null==s?void 0:s.adapter)||i.clearText()}}}]),i}(io),us=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.facade.retrieveProxy("PlayerDomProxy");if(t){var i=t.getMain();i.setAttribute("role","region");var n=i.getAttribute("tabindex")||"0";i.setAttribute("tabindex",n);var r=t.getVideo();r&&!r.player&&(r.player=e.body,r.avia=Jn.appNamespace)}}}]),i}(io),cs=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.getModel("PresentationState"),i=this.facade.retrieveMediator("PresentationMediator");t.suspended=!1,i.resume();var n=this.getProxy("ContentPlaybackStateProxy");this.sendNotification("playbackresumed",{contentTime:n.model.time})}}]),i}(io),ds=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.facade.retrieveMediator("PresentationMediator"),i=this.facade.retrieveProxy("ResourceProxy");this.sendNotification("resourcestart",{resource:i.resource}),t.start()}}]),i}(io),hs=function(e){(0,et.default)(i,e);var t=st(i);function i(){return(0,rt.default)(this,i),t.apply(this,arguments)}return(0,nt.default)(i,[{key:"execute",value:function(e){var t=this.getModel("PresentationState");this.facade.retrieveMediator("PresentationMediator").suspend(),t.suspended=!0;var i=this.getProxy("ContentPlaybackStateProxy");this.sendNotification("playbacksuspended",{contentTime:i.model.time})}}]),i}(io),fs=($e={},(0,ot.default)($e,"default",null),(0,ot.default)($e,"bootApp",Go),(0,ot.default)($e,"ready",us),(0,ot.default)($e,"mutechange",es),(0,ot.default)($e,"volumechange",es),(0,ot.default)($e,"resourceend",ls),(0,ot.default)($e,"resourcebuffering",ls),(0,ot.default)($e,"adbreakstart",ls),(0,ot.default)($e,"metric",Zo),(0,ot.default)($e,"resourceComplete",ls),(0,ot.default)($e,"playOnUSerGesture",es),(0,ot.default)($e,"play",es),(0,ot.default)($e,"pause",es),(0,ot.default)($e,"seek",es),(0,ot.default)($e,"switchAudioTrack",es),(0,ot.default)($e,"switchTextTrack",es),(0,ot.default)($e,"switchTextMode",es),(0,ot.default)($e,"suspendPlayback",hs),(0,ot.default)($e,"resumePlayback",cs),(0,ot.default)($e,"switchBitrate",no),(0,ot.default)($e,"switchQualityCategory",no),(0,ot.default)($e,"autoQualitySwitching",no),(0,ot.default)($e,"minBitrate",no),(0,ot.default)($e,"maxBitrate",no),(0,ot.default)($e,"prepResourceCollection",ss),(0,ot.default)($e,"startPresentation",ds),(0,ot.default)($e,"playResource",os),(0,ot.default)($e,"killResourcePresentation",Yo),(0,ot.default)($e,"changeLanguage",Qo),(0,ot.default)($e,"playererror",qo),(0,ot.default)($e,"videostarterror",qo),(0,ot.default)($e,"videoplaybackerror",qo),(0,ot.default)($e,"resourceerror",qo),(0,ot.default)($e,"aderror",qo),(0,ot.default)($e,"adstalled",qo),$e),vs=function(e){(0,et.default)(i,e);var t=st(i);function i(e){var n;return(0,rt.default)(this,i),(n=t.call(this,Object.assign({commandMap:fs,id:e.playerOptions.id||null},e))).pIsReady=!1,n.seekTime=NaN,n.hSeekRedirect=function(e){"seekredirectstart"!==e.type||isNaN(e.detail.actualSeekTime)?"seekredirectcomplete"===e.type&&(n.seekTime=NaN):n.seekTime=e.detail.actualSeekTime},n.api=to({},(0,Ye.default)(n)),n.target=n.api,n.logger=e.logger,n.init(e),n}return(0,nt.default)(i,[{key:"initialize",value:function(){var e=this,t=this.modelCollectionProxy.getModel("PlayerOptions"),i=t.plugins||[],n=this.getApi(),r={name:"changeLanguage",body:{language:t.language},type:"internal"};return this.on("seekredirectstart",this.hSeekRedirect),this.on("seekredirectcomplete",this.hSeekRedirect),n.registerPlugins(i).then(function(){return e.localization.registerLocalizationData(t.localization),e.sendAsyncNotification(r,["languagechange"])}).then(function(){return e.pIsReady=!0,e.sendNotification("ready",n),n}).catch(function(t){throw e.logger.error(t),t})}},{key:"destroy",value:function(){var e,t=this;this.off("seekredirectstart",this.hSeekRedirect),this.off("seekredirectcomplete",this.hSeekRedirect),null==(e=this.appMediator)||e.disableKeyCommands();var n=(0,Xe.default)((0,it.default)(i.prototype),"destroy",this).bind(this),r=this.logger;return this.killCurrentResource().then(function(){t.apiAccessors=null,t.apiMethods=null,n()}).catch(function(e){throw r.error(e),e})}},{key:"getApi",value:function(){return this.api}},{key:"killCurrentResource",value:function(){return this.appMediator.killCurrentResource()}},{key:"hasListenerFor",value:function(e){if(!Vt(e))throw this.invalidArgException("hasListenerFor(type)",e);return(0,Xe.default)((0,it.default)(i.prototype),"hasListenerFor",this).call(this,e)}},{key:"on",value:function(e,t){if(!Vt(e)||"function"!=typeof t)throw this.invalidArgException("on(type, func)",e,t);ea.checkEventName(e),(0,Xe.default)((0,it.default)(i.prototype),"on",this).call(this,e,t)}},{key:"once",value:function(e,t){if(!Vt(e)||"function"!=typeof t)throw this.invalidArgException("on(type, func)",e,t);ea.checkEventName(e),(0,Xe.default)((0,it.default)(i.prototype),"once",this).call(this,e,t)}},{key:"off",value:function(e,t){if(!Vt(e))throw this.invalidArgException("on(type, func)",e,t);(0,Xe.default)((0,it.default)(i.prototype),"off",this).call(this,e,t)}},{key:"isReady",get:function(){return this.pIsReady}},{key:"id",get:function(){return this.appId}},{key:"dimensions",get:function(){return this.appMediator.getDimensions()||null}},{key:"video",get:function(){var e;return null==(e=this.dom)?void 0:e.getVideo()}},{key:"isAutoplay",get:function(){return this.presentationState.isAutoplay}},{key:"isFullscreen",get:function(){return this.presentationState.isFullscreen}},{key:"isAd",get:function(){return this.presentationState.isCurrentVideoAd}},{key:"muted",get:function(){return this.appMediator.getMuteState()},set:function(e){if("boolean"!=typeof e)throw this.invalidArgException("player.muted = boolean",e);this.muted!==e&&this.transmitExtRequest("mutechange",{muted:e})}},{key:"options",get:function(){var e,t=null==(e=this.modelCollectionProxy.getModel("PlayerOptions"))?void 0:e.model;return t?Wi(t):null}},{key:"volume",get:function(){return this.appMediator.getVolume()},set:function(e){if(!$t(e)||!Bi(e,0,1))throw this.invalidArgException("player.volume = number [0,1]",e);this.volume!==e&&this.transmitExtRequest("volumechange",{volume:e})}},{key:"language",get:function(){return this.localization.language},set:function(e){if(ea.language(),!Vt(e))throw this.invalidArgException("player.language = string",e);this.transmitExtRequest("changeLanguage",{language:e})}},{key:"contentTime",get:function(){return isNaN(this.seekTime)?this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.time:0:this.seekTime}},{key:"sessionTime",get:function(){var e=this.appMediator.getSessionTime();return null==e?0:e}},{key:"playbackTime",get:function(){var e=this.appMediator.getPlaybackTime();return null==e?0:e}},{key:"contentDuration",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.duration:NaN}},{key:"streamTime",get:function(){return this.presentationState.streamTime}},{key:"streamDuration",get:function(){return this.presentationState.streamDuration}},{key:"playbackState",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.model.state)||"idle"}},{key:"autoQualitySwitching",get:function(){var e;return"auto"===(null==(e=this.contentPlaybackStateProxy)?void 0:e.qualitySwitchingMode)||!1},set:function(e){if(!Wt(e))throw this.invalidArgException("player.autoQualitySwitching = boolean",e);this.contentPlaybackStateReady?this.transmitExtRequest("autoQualitySwitching",{value:e}):this.log(Ci.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"quality",get:function(){var e,t;return(null==(t=null==(e=this.contentPlaybackStateProxy)?void 0:e.qualityInfo)?void 0:t.quality)||null}},{key:"qualities",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.qualities)||[]}},{key:"qualityInfo",get:function(){return ea.qualityInfo(),this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.qualityInfo:null}},{key:"bitrate",get:function(){var e,t=(null==(e=this.qualityInfo)?void 0:e.quality)||{bitrate:NaN};return null!=t.bitrate?t.bitrate:NaN},set:function(e){if(!$t(e))throw this.invalidArgException("player.bitrate = number",e);this.contentPlaybackStateReady?this.transmitExtRequest("switchBitrate",{value:e}):this.log(Ci.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"qualityCategory",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.userQualityCategory:null},set:function(e){if(!Vt(e))throw this.invalidArgException("player.qualityCategory = string",e);this.contentPlaybackStateReady?this.transmitExtRequest("switchQualityCategory",{value:e}):this.log(Ci.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"minBitrate",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.minBitrate:NaN},set:function(e){if(!$t(e))throw this.invalidArgException("player.minBitrate = number",e);this.contentPlaybackStateReady?this.transmitExtRequest("minBitrate",{value:e}):this.log(Ci.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"maxBitrate",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.maxBitrate:NaN},set:function(e){if(!$t(e))throw this.invalidArgException("player.maxBitrate = number",e);this.contentPlaybackStateReady?this.transmitExtRequest("maxBitrate",{value:e}):this.log(Ci.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"audioTracks",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.model.audioTracks.tracks)||[]}},{key:"audioTrackInfo",get:function(){return ea.audioTrackInfo(),this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.audioTracks:null}},{key:"audioTrack",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.audioTracks.track:null},set:function(e){if(!e)throw this.invalidArgException("player.audioTrack = AudioTrackInterface",e);this.contentPlaybackStateReady?this.transmitExtRequest("switchAudioTrack",{value:e}):this.log(Ci.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"attachResource",value:function(e){var t=this;return this.logger.time("resource-attachment"),this.stop().then(function(){if(!e||Ut(e))throw t.invalidArgException("attachResource(resource)",e)}).then(function(){return t.sendAsyncNotification({name:"prepResourceCollection",body:{resource:e,start:!0}},["resourcestart"])}).then(function(){return t.logger.timeEnd("resource-attachment"),t.resource}).catch(function(e){throw Ai.eventToError(e,"Resource")})}},{key:"resource",get:function(){return this.appMediator.getCurrentResource()}},{key:"textTrackEnabled",get:function(){return this.facade.retrieveProxy("TextTrackProxy").enabled},set:function(e){if(!Wt(e))throw this.invalidArgException("player.textTrackEnabled = boolean",e);this.transmitExtRequest("switchTextMode",{value:e})}},{key:"textTrack",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.textTrackInfo.track)||null},set:function(e){if(!e||!e.kind)throw this.invalidArgException("player.textTrack = TextTrackInterface",e);this.contentPlaybackStateReady?this.transmitExtRequest("switchTextTrack",{value:e}):this.log(Ci.messages.CONTENT_PLAYBACK_SETTING_IGNORED)}},{key:"textTracks",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.textTrackInfo.tracks)||[]}},{key:"textTrackInfo",get:function(){return ea.textTrackInfo(),this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.textTrackInfo:null}},{key:"streamType",get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.streamType:null}},{key:"isPlayingLive",get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return!0===(null==e?void 0:e.isPlayingLive)}},{key:"liveStreamUtcStart",get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteStart:NaN}},{key:"liveStreamUtcTime",get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteTime:NaN}},{key:"liveStreamUtcDuration",get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteDuration:NaN}},{key:"isSuspended",get:function(){return this.appMediator.isPlaybackSuspended()}},{key:"fullscreenElement",get:function(){return this.appMediator.getFullscreenElement()},set:function(e){var t,i;if(!e||!/element/.test(null==(i=null==(t=e.constructor)?void 0:t.name)?void 0:i.toLowerCase()))throw this.invalidArgException("player.fullscreenElement = HTMLElement",e);this.appMediator.setFullscreenElement(e)}},{key:"pausable",get:function(){var e;return!1!==(null==(e=this.opts.playerOptions.overrides)?void 0:e.liveStreamPausable)||"LIVE"!==this.streamType}},{key:"updateDimensions",value:function(){this.appMediator.updateDimensions()}},{key:"enterFullscreen",value:function(){this.transmitExtRequest("enterFullscreenRequest")}},{key:"exitFullscreen",value:function(){this.transmitExtRequest("exitFullscreenRequest")}},{key:"play",value:function(){return this.recordMetric("api","play"),this.appMediator.isPlaybackSuspended()&&this.transmitExtRequest("resumePlayback"),this.sendAsyncNotification({name:"play",type:"external"},["contentplaying","adplaying"])}},{key:"pause",value:function(){return this.recordMetric("api","pause"),this.pausable?"paused"===this.playbackState?Promise.resolve():this.sendAsyncNotification({name:"pause",type:"external"},["contentpaused","adpaused"]):(this.log(Ci.messages.PAUSING_LINEAR_LIVE_STREAM_NOT_ALLOWED),this.stop())}},{key:"togglePlayPause",value:function(){return"playing"===this.playbackState?this.pause():this.play()}},{key:"seek",value:function(e){var t=this;return this.recordMetric("api","seek",e),this.hooks.applyHook("seek",{position:e,contentTime:this.contentTime,contentDuration:this.contentDuration,streamTime:this.streamTime,streamDuration:this.streamDuration}).then(function(e){if(null!=e){var i=t.appMediator.validateSeek(e.position,t.contentDuration);return null==i?Promise.reject(t.invalidArgException("seek(position)",e)):t.seekInternal(i)}})}},{key:"jump",value:function(e){return this.seek(this.contentTime+e)}},{key:"getAdBreakTimes",value:function(){return this.appMediator.getAdBreakTimes()||[]}},{key:"grabFrame",value:function(){return this.appMediator.grabFrame()}},{key:"getThumbnail",value:function(e){var t;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||ea.getThumbnail(),!$t(e))throw this.invalidArgException("getThumbnail(time)",e);return(null==(t=this.contentPlaybackStateProxy)?void 0:t.getThumbnail(e))||null}},{key:"getThumbnails",value:function(e){var t,i=this;if(!$t(e))throw this.invalidArgException("getThumbnails(time)",e);return Promise.resolve(null==(t=this.getAdapter("playback"))?void 0:t.getThumbnails(e)).then(function(e){return e||[]}).then(function(t){var n=i.getThumbnail(e,!0);return n&&t.push(n.data),t})}},{key:"getContainerRect",value:function(){return this.appMediator.getContainerRect()}},{key:"registerPlugins",value:function(e,t){var i=this;return Array.isArray(e)?(t&&ea.registerPlugins(),new Promise(function(n,r){i.transmitExtRequest("loadPlugins",{plugins:e,callback:function(e){return"function"==typeof t&&t(e),e?r(e):n()}})})):Promise.reject(this.invalidArgException("registerPlugins(cfgArray, callback?)",e,t))}},{key:"removePlugin",value:function(e){if(!Vt(e))throw this.invalidArgException("removePlugin(name)",e);this.transmitExtRequest("removePlugin",{name:e})}},{key:"registerAdapter",value:function(e){if(Ut(e))throw this.invalidArgException("registerAdapter(adapterConfig)",e);return this.adapters.registerAdapter(e)}},{key:"retrieveAdapter",value:function(e){if(!Vt(e))throw this.invalidArgException("retrieveAdapter(id)",e);return this.adapters.retrieveAdapter(e)}},{key:"removeAdapter",value:function(e){return Vt(e)||this.invalidArgException("removeAdapter(id)",e),this.adapters.removeAdapter(e)}},{key:"registerHook",value:function(e,t){if(!Vt(e)||"function"!=typeof t)throw this.invalidArgException("registerHook(type, hook)",e,t);return this.hooks.registerHook(e,t)}},{key:"removeHook",value:function(e,t){if(!Vt(e)||"function"!=typeof t)throw this.invalidArgException("removeHook(type, hook)",e,t);return this.hooks.removeHook(e,t)}},{key:"getPlugin",value:function(e){if(!Vt(e))throw this.invalidArgException("getPlugin(name)",e);return this.appMediator.getPlugin(e)}},{key:"getAdapter",value:function(e){var t=this.presentationMediator;if(!Vt(e))throw this.invalidArgException("getAdapter(role)",e);if(!t)return null;switch(e){case"ad":return t.adAdapter||null;case"playback":return t.adapter||null;default:return null}}},{key:"stop",value:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.model)&&this.presentationMediator?this.appMediator.killCurrentResource():Promise.resolve()}},{key:"goLive",value:function(){return this.recordMetric("api","go_live"),this.streamType&&"VOD"!==this.streamType?this.seekInternal(this.contentDuration):Promise.reject("goLive() can not be invoked on streams of type ".concat(this.streamType))}},{key:"skipAd",value:function(){this.appMediator.skipAd()}},{key:"focus",value:function(e){var t,i=null==(t=this.dom)?void 0:t.getMain();i&&i.focus(e)}},{key:"blur",value:function(){var e=this.dom.getMain();e&&e.blur()}},{key:"getKeyEventTarget",value:function(){return this.appMediator.getKeyEventTarget()}},{key:"disableKeyCommands",value:function(e){this.appMediator.disableKeyCommands(e)}},{key:"getConfigAsJson",value:function(e){return this.appMediator.getConfigAsJson(e)}},{key:"suspendPlayback",value:function(){var e=this;this.appMediator.isPlaybackSuspended()||this.pause().then(function(){e.transmitExtRequest("suspendPlayback")})}},{key:"resumePlayback",value:function(){this.play()}},{key:"recordMetric",value:function(e,t,i){if(!Vt(e)||!Vt(t))throw this.invalidArgException("recordMetric(type, key, value?)",e,t,i);this.sendNotification("metric",{metric:new Ur(t,i,e)})}},{key:"offsetTimedText",value:function(e){if(!$t(e))throw this.invalidArgException("offsetTimedText(pixelOffset)",e);this.appMediator.offsetTimedText(e)}},{key:"primeVideoElement",value:function(){return this.appMediator.primeVideoElement()}},{key:"selectAudioLanguage",value:function(e,t){if(!Vt(e))throw this.invalidArgException("player.selectAudioLanguage(language)",e);if(this.modelCollectionProxy.getModel("PlayerOptions").audioLanguage=e,!this.contentPlaybackStateReady)return Promise.resolve(null);var i=or(this.audioTracks,e).filter(function(e){return void 0===t||e.type===t})[0]||sr(this.audioTracks,e);if(!i||i===this.audioTrack)return Promise.resolve(i);var n={name:"switchAudioTrack",body:{value:i},type:"external"};return this.sendAsyncNotification(n,["audiotrackchange"]).then(function(e){return i})}},{key:"selectTextLanguage",value:function(e,t){if(!Vt(e))throw this.invalidArgException("player.selectTextLanguage(language)",e);if(this.modelCollectionProxy.getModel("PlayerOptions").textLanguage=e,this.facade.retrieveProxy("TextTrackProxy").language=e,!this.contentPlaybackStateReady)return Promise.resolve(null);var i=sr(this.textTracks,e);if(!i||i===this.textTrack)return Promise.resolve(i);var n={name:"switchTextTrack",body:{value:i},type:"external"};return this.sendAsyncNotification(n,["texttrackchange"]).then(function(e){return i})}},{key:"selectLocalizationLanguage",value:function(e){if(!Vt(e))throw this.invalidArgException("player.selectLocalizationLanguage(language)",e);this.modelCollectionProxy.getModel("PlayerOptions").language=e;var t={name:"changeLanguage",body:{language:e},type:"external"};return this.sendAsyncNotification(t,["languagechange"]).then(function(e){return e.localeData})}},{key:"waitForEvent",value:function(e,t,i){return Ii(this,e,t,i)}},{key:"waitForTime",value:function(e,t){return Li(this,e,t)}},{key:"getBuffered",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.appMediator.getBuffered(e)||[]}},{key:"sendEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit(e,t)}},{key:"contentPlaybackStateProxy",get:function(){return this.facade.retrieveProxy("ContentPlaybackStateProxy")}},{key:"contentPlaybackStateReady",get:function(){var e;return(null==(e=this.contentPlaybackStateProxy)?void 0:e.isReady)||!1}},{key:"localization",get:function(){return this.facade.retrieveProxy("LocalizationProxy")}},{key:"dom",get:function(){return this.facade.retrieveProxy("PlayerDomProxy")}},{key:"adapters",get:function(){return this.facade.retrieveProxy("AdapterProxy")}},{key:"presentationState",get:function(){return this.modelCollectionProxy.getModel("PresentationState")}},{key:"presentationMediator",get:function(){return this.facade.retrieveMediator("PresentationMediator")}},{key:"hooks",get:function(){return this.facade.retrieveProxy("HookProxy")}},{key:"transmitExtRequest",value:function(e,t){this.sendNotification(e,t,"external")}},{key:"log",value:function(e,t){var i=t||"debug";this.facade.log(i,e)}},{key:"init",value:function(e){var t=this,i=new Qa(e.hookManager);this.facade.registerProxy(i);var n=this.opts.globalServices;this.facade.log("info","".concat(Fr.playerName,"@").concat(Fr.playerVersion,"  ").concat(Fr.buildTime)),this.registerGlobalServices(n),delete this.opts.globalServices,this.sendNotification("bootApp",{playerOptions:this.opts.playerOptions||null,app:this},"internal"),this.logger.on("logtimeevent",function(e){var i=e.detail,n=i.id,r=i.label,a=i.item,o="".concat(r,":start");t.recordMetric("mark",o,{id:n,name:o,startTime:a.startTime})}),this.logger.on("logtimeendevent",function(e){var i=e.detail,n=i.id,r=i.label,a=i.item,o=a.startTime,s=a.duration,l="".concat(r,":end");t.recordMetric("mark",l,{id:n,name:l,startTime:o+s}),t.recordMetric("measure",r,{id:n,name:r,startTime:o,duration:s})})}},{key:"sendAsyncNotification",value:function(e,t){var i=Mi([{target:this,events:t}],[{target:this,events:["error"]}]);return this.sendNotification(e.name,e.body,e.type),i}},{key:"invalidArgException",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=null==i?void 0:i.map(function(e){return void 0===e?"undefined":e}),a=(null==r?void 0:r.toString())||null,o="".concat(e,"; ").concat(Ci.messages.API_INVALID_ARG,"; supplied arg(s): ").concat(a);return this.log(o),new ga(o)}},{key:"seekInternal",value:function(e){var t=this;if(this.seekTime=e,this.seekPending)return this.seekPending.then(function(){return t.seekTime===e?t.seekInternal(t.seekTime):void 0});var i={name:"seek",body:{value:e},type:"external"};return this.seekPending=this.sendAsyncNotification(i,["seekcomplete"]),this.seekPending.then(function(){Math.abs(e-t.seekTime)<=1&&(t.seekTime=NaN),t.seekPending=null}).catch(function(i){throw t.seekPending=null,new Ai("9999",(null==i?void 0:i.message)||"An error occurred on seek to ".concat(e),i||null,!1,"API")}).then(function(){t.seekPending=null})}}]),i}(Ja);_t([Za()],vs.prototype,"hasListenerFor",1),_t([Za()],vs.prototype,"on",1),_t([Za()],vs.prototype,"once",1),_t([Za()],vs.prototype,"off",1),_t([eo()],vs.prototype,"isReady",1),_t([eo()],vs.prototype,"id",1),_t([eo()],vs.prototype,"dimensions",1),_t([eo()],vs.prototype,"video",1),_t([eo()],vs.prototype,"isAutoplay",1),_t([eo()],vs.prototype,"isFullscreen",1),_t([eo()],vs.prototype,"isAd",1),_t([eo()],vs.prototype,"muted",1),_t([eo()],vs.prototype,"options",1),_t([eo()],vs.prototype,"volume",1),_t([eo()],vs.prototype,"language",1),_t([eo()],vs.prototype,"contentTime",1),_t([eo()],vs.prototype,"sessionTime",1),_t([eo()],vs.prototype,"playbackTime",1),_t([eo()],vs.prototype,"contentDuration",1),_t([eo()],vs.prototype,"streamTime",1),_t([eo()],vs.prototype,"streamDuration",1),_t([eo()],vs.prototype,"playbackState",1),_t([eo()],vs.prototype,"autoQualitySwitching",1),_t([eo()],vs.prototype,"quality",1),_t([eo()],vs.prototype,"qualities",1),_t([eo()],vs.prototype,"qualityInfo",1),_t([eo()],vs.prototype,"bitrate",1),_t([eo()],vs.prototype,"qualityCategory",1),_t([eo()],vs.prototype,"minBitrate",1),_t([eo()],vs.prototype,"maxBitrate",1),_t([eo()],vs.prototype,"audioTracks",1),_t([eo()],vs.prototype,"audioTrackInfo",1),_t([eo()],vs.prototype,"audioTrack",1),_t([Za()],vs.prototype,"attachResource",1),_t([eo()],vs.prototype,"resource",1),_t([eo()],vs.prototype,"textTrackEnabled",1),_t([eo()],vs.prototype,"textTrack",1),_t([eo()],vs.prototype,"textTracks",1),_t([eo()],vs.prototype,"textTrackInfo",1),_t([eo()],vs.prototype,"streamType",1),_t([eo()],vs.prototype,"isPlayingLive",1),_t([eo()],vs.prototype,"liveStreamUtcStart",1),_t([eo()],vs.prototype,"liveStreamUtcTime",1),_t([eo()],vs.prototype,"liveStreamUtcDuration",1),_t([eo()],vs.prototype,"isSuspended",1),_t([eo()],vs.prototype,"fullscreenElement",1),_t([eo()],vs.prototype,"pausable",1),_t([Za()],vs.prototype,"updateDimensions",1),_t([Za()],vs.prototype,"enterFullscreen",1),_t([Za()],vs.prototype,"exitFullscreen",1),_t([Za()],vs.prototype,"play",1),_t([Za()],vs.prototype,"pause",1),_t([Za()],vs.prototype,"togglePlayPause",1),_t([Za()],vs.prototype,"seek",1),_t([Za()],vs.prototype,"jump",1),_t([Za()],vs.prototype,"getAdBreakTimes",1),_t([Za()],vs.prototype,"grabFrame",1),_t([Za()],vs.prototype,"getThumbnail",1),_t([Za()],vs.prototype,"getThumbnails",1),_t([Za()],vs.prototype,"getContainerRect",1),_t([Za()],vs.prototype,"registerPlugins",1),_t([Za()],vs.prototype,"removePlugin",1),_t([Za()],vs.prototype,"registerAdapter",1),_t([Za()],vs.prototype,"retrieveAdapter",1),_t([Za()],vs.prototype,"removeAdapter",1),_t([Za()],vs.prototype,"registerHook",1),_t([Za()],vs.prototype,"removeHook",1),_t([Za()],vs.prototype,"getPlugin",1),_t([Za()],vs.prototype,"getAdapter",1),_t([Za()],vs.prototype,"stop",1),_t([Za()],vs.prototype,"goLive",1),_t([Za()],vs.prototype,"skipAd",1),_t([Za()],vs.prototype,"focus",1),_t([Za()],vs.prototype,"blur",1),_t([Za()],vs.prototype,"getKeyEventTarget",1),_t([Za()],vs.prototype,"disableKeyCommands",1),_t([Za()],vs.prototype,"getConfigAsJson",1),_t([Za()],vs.prototype,"suspendPlayback",1),_t([Za()],vs.prototype,"resumePlayback",1),_t([Za()],vs.prototype,"recordMetric",1),_t([Za()],vs.prototype,"offsetTimedText",1),_t([Za()],vs.prototype,"primeVideoElement",1),_t([Za()],vs.prototype,"selectAudioLanguage",1),_t([Za()],vs.prototype,"selectTextLanguage",1),_t([Za()],vs.prototype,"selectLocalizationLanguage",1),_t([Za()],vs.prototype,"waitForEvent",1),_t([Za()],vs.prototype,"waitForTime",1),_t([Za()],vs.prototype,"getBuffered",1);var ps,gs=!1,ys=null,ms=new bi(Ti),As={},ks={},bs={};function Es(){if(!gs){gs=!0;var e={"Array.from":function(){return Array.from},"Array.prototype.find":function(){return Array.prototype.find},"Array.prototype.findIndex":function(){return Array.prototype.findIndex},"Array.prototype.includes":function(){return Array.prototype.includes},"Object.assign":function(){return Object.assign},Promise:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return"undefined"!=typeof Promise}),"String.prototype.includes":function(){return String.prototype.includes},"String.prototype.repeat":function(){return String.prototype.repeat}};Object.keys(e).forEach(function(t){var i=!1;try{i=!!e[t]()}catch(e){i=!1}finally{i||ci.warn("Polyfill warning: ".concat(t," is not defined"))}})}}function Ts(){return Object.keys(ks).concat(Object.keys(As)).reduce(function(e,t){return e.includes(t)||e.push(t),e},[])}function Ss(e,t){ms.defineHook(e,t)}function Cs(e,t){ms.registerHook(e,t)}function xs(e,t){ms.removeHook(e,t)}function ws(e,t,i){ms.applyHook(e,t,i)}function Ps(){return It(this,null,qe.default.mark(function e(){return qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ms.applyHook("devicecapabilities",{drm:{keySystemStatus:[],hdcpStatus:[]}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}function _s(e){var t=this,i=performance.now(),n=new za(e),r=n.id,a=new ci({logLevel:n.logLevel,id:r});return ks[r]=function(e){if(ps)return ps;Es();var t=Ka.getInstance(),i=e.overrides,n=!1!==(null==i?void 0:i.deferAutoplayDetection);return ps=Promise.all([!n&&t.detectCapabilities(null==i?void 0:i.blankVideoUrl)]).then(function(){ys=(0,ot.default)({},"AutoplayCapabilities",t)})}(n).then(function(){return It(t,null,qe.default.mark(function e(){var t,r;return qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ms.applyHook("createplayer",n);case 3:return t=e.sent,r=new vs({globalServices:ys,playerOptions:t,hookManager:ms,logger:a}),a.time("player-creation",i),e.abrupt("return",r.initialize().then(function(e){return{api:e,player:r}}));case 9:throw e.prev=9,e.t0=e.catch(0),e.t0.key&&(e.t0.message='A player with id "'.concat(e.t0.key,'" a already exists')),e.t0;case 13:case"end":return e.stop()}},e,null,[[0,9]])}))}).then(function(e){var t=e.api,i=e.player;return As[r]=i,delete ks[r],a.timeEnd("player-creation"),t})}function Is(e){var t=As[e];if(t)return Promise.resolve(t);var i=bs[e];return i?i.then(function(){return null}):ks[e]||Promise.resolve(null)}function Ls(e){var t=this;return bs[e]||Promise.resolve().then(function(){return ks[e]?ks[e]:null}).then(function(){return It(t,null,qe.default.mark(function t(){var i,n;return qe.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=As[e]){t.next=3;break}return t.abrupt("return",Promise.resolve());case 3:return n=i.options.logLevel,delete As[e],t.next=7,ms.applyHook("removeplayer",i);case 7:return t.abrupt("return",bs[e]=i.destroy().then(function(){delete bs[e],"info"!==n&&"debug"!==n||ci.log('[Avia] Player with id "'.concat(e,'" removed.'))}));case 8:case"end":return t.stop()}},t)}))})}function Ns(e){return new ja(e)}function Ms(){return Tt({},Jn)}function Rs(e){return Ka.getInstance().detectCapabilities(e)}var Os=St(Tt({},Si),{registerHook:Cs,removeHook:xs,applyHook:ws,createVideoPlayer:_s,retrieveVideoPlayer:Is,removeVideoPlayer:Ls,createResourceConfig:Ns,getSystemInfo:Ms,getAutoplayCapabilities:Rs,getDeviceCapabilities:Ps});return Jn.appNamespace=Os,Mt}()},function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"ActiveMode",function(){return we}),i.d(t,"AviaAccessibility",function(){return ii}),i.d(t,"AviaActive",function(){return ni}),i.d(t,"AviaAdControlBar",function(){return ri}),i.d(t,"AviaAdProgressBar",function(){return ai}),i.d(t,"AviaButton",function(){return oi}),i.d(t,"AviaControlBar",function(){return si}),i.d(t,"AviaControlBarCompact",function(){return li}),i.d(t,"AviaControlGroup",function(){return ui}),i.d(t,"AviaCurrentTime",function(){return ci}),i.d(t,"AviaDuration",function(){return di}),i.d(t,"AviaFullscreenToggle",function(){return hi}),i.d(t,"AviaLiveControl",function(){return fi}),i.d(t,"AviaMenu",function(){return vi}),i.d(t,"AviaMenuItem",function(){return pi}),i.d(t,"AviaMuteToggle",function(){return gi}),i.d(t,"AviaOverlay",function(){return yi}),i.d(t,"AviaPanel",function(){return mi}),i.d(t,"AviaPauseOverlay",function(){return Ai}),i.d(t,"AviaPlayCta",function(){return ki}),i.d(t,"AviaPlayOverlay",function(){return bi}),i.d(t,"AviaPlayToggle",function(){return Ei}),i.d(t,"AviaPoster",function(){return Ti}),i.d(t,"AviaProgressBar",function(){return Si}),i.d(t,"AviaSeekBackButton",function(){return Ci}),i.d(t,"AviaSeekForwardButton",function(){return xi}),i.d(t,"AviaSeekIndicator",function(){return wi}),i.d(t,"AviaSettings",function(){return Pi}),i.d(t,"AviaSettingsAudio",function(){return _i}),i.d(t,"AviaSettingsLanguage",function(){return Ii}),i.d(t,"AviaSettingsQuality",function(){return Li}),i.d(t,"AviaSettingsText",function(){return Ni}),i.d(t,"AviaSettingsToggle",function(){return Mi}),i.d(t,"AviaSlider",function(){return Ri}),i.d(t,"AviaSpinner",function(){return Oi}),i.d(t,"AviaText",function(){return Di}),i.d(t,"AviaTextToggle",function(){return Bi}),i.d(t,"AviaTimeDisplay",function(){return Ui}),i.d(t,"AviaTimeRemaining",function(){return Fi}),i.d(t,"AviaUi",function(){return Vi}),i.d(t,"AviaUiPlugin",function(){return vt}),i.d(t,"AviaUnmuteCta",function(){return Hi}),i.d(t,"AviaVolumeIndicator",function(){return $i}),i.d(t,"AviaVolumeSlider",function(){return Wi}),i.d(t,"AviaWaitingOverlay",function(){return Ki}),i.d(t,"DeviceMode",function(){return Le}),i.d(t,"ID",function(){return pt}),i.d(t,"LocalizationId",function(){return Ne}),i.d(t,"PreviewTimeTransform",function(){return je}),i.d(t,"UI",function(){return dt}),i.d(t,"createPlugin",function(){return gt}),i.d(t,"createUiPlugin",function(){return ft}),i.d(t,"defineCustomElements",function(){return zi}),i.d(t,"plugin",function(){return yt}),i.d(t,"setAssetPath",function(){return h}),i.d(t,"setPlatformOptions",function(){return ae}),i.d(t,"ui",function(){return ht});let n,r,a,o=!1,s=!1,l=!1,u=!1,c=null,d=!1;const h=e=>ge.$resourcesUrl$=e,f="http://www.w3.org/1999/xlink",v={},p=e=>"object"==(e=typeof e)||"function"===e,g=(e,t,...i)=>{let n=null,r=null,a=null,o=!1,s=!1;const l=[],u=t=>{for(let i=0;i<t.length;i++)n=t[i],Array.isArray(n)?u(n):null!=n&&"boolean"!=typeof n&&((o="function"!=typeof e&&!p(n))&&(n=String(n)),o&&s?l[l.length-1].$text$+=n:l.push(o?y(null,n):n),s=o)};if(u(i),t&&(t.key&&(r=t.key),t.name&&(a=t.name),1)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter(t=>e[t]).join(" "))}if("function"==typeof e)return e(null===t?{}:t,l,k);const c=y(e,null);return c.$attrs$=t,l.length>0&&(c.$children$=l),c.$key$=r,c.$name$=a,c},y=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return i},m={},A=e=>e&&e.$tag$===m,k={forEach:(e,t)=>e.map(b).forEach(t),map:(e,t)=>e.map(b).map(t).map(E)},b=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),E=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),g(e.vtag,t,...e.vchildren||[])}const t=y(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},T=e=>e,S=(e,t,i)=>{const n=T(e);return{emit:e=>C(n,t,{bubbles:!!(4&i),composed:!!(2&i),cancelable:!!(1&i),detail:e})}},C=(e,t,i)=>{const n=ge.ce(t,i);return e.dispatchEvent(n),n},x=new WeakMap,w=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),P=(e,t,i,n,r,a)=>{if(i!==n){let o=ue(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,r=I(i),a=I(n);t.remove(...r.filter(e=>e&&!a.includes(e))),t.add(...a.filter(e=>e&&!r.includes(e)))}else if("style"===t){for(const t in i)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)i&&n[t]===i[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=p(n);if((o||l&&null!==n)&&!r)try{if(e.tagName.includes("-"))e[t]=n;else{const r=null==n?"":n;"list"===t?o=!1:null!=i&&e[t]==r||(e[t]=r)}}catch(e){}let u=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,u=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(u?e.removeAttributeNS(f,t):e.removeAttribute(t)):(!o||4&a||r)&&!l&&(n=!0===n?"":n,u?e.setAttributeNS(f,t,n):e.setAttribute(t,n))}else t="-"===t[2]?t.slice(3):ue(fe,s)?s.slice(2):s[2]+t.slice(3),i&&ge.rel(e,t,i,!1),n&&ge.ael(e,t,n,!1)}},_=/\s/,I=e=>e?e.split(_):[],L=(e,t,i,n)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||v,o=t.$attrs$||v;for(n in a)n in o||P(r,n,a[n],void 0,i,t.$flags$);for(n in o)P(r,n,a[n],o[n],i,t.$flags$)},N=(e,t,i,s)=>{const c=t.$children$[i];let d,h,f,v=0;if(o||(l=!0,"slot"===c.$tag$&&(n&&s.classList.add(n+"-s"),c.$flags$|=c.$children$?2:1)),null!==c.$text$)d=c.$elm$=ve.createTextNode(c.$text$);else if(1&c.$flags$)d=c.$elm$=ve.createTextNode("");else{if(u||(u="svg"===c.$tag$),d=c.$elm$=ve.createElementNS(u?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&c.$flags$?"slot-fb":c.$tag$),u&&"foreignObject"===c.$tag$&&(u=!1),L(null,c,u),null!=n&&d["s-si"]!==n&&d.classList.add(d["s-si"]=n),c.$children$)for(v=0;v<c.$children$.length;++v)(h=N(e,c,v,d))&&d.appendChild(h);"svg"===c.$tag$?u=!1:"foreignObject"===d.tagName&&(u=!0)}return d["s-hn"]=a,3&c.$flags$&&(d["s-sr"]=!0,d["s-cr"]=r,d["s-sn"]=c.$name$||"",(f=e&&e.$children$&&e.$children$[i])&&f.$tag$===c.$tag$&&e.$elm$&&M(e.$elm$,!1)),d},M=(e,t)=>{ge.$flags$|=1;const i=e.childNodes;for(let e=i.length-1;e>=0;e--){const n=i[e];n["s-hn"]!==a&&n["s-ol"]&&(U(n).insertBefore(n,B(n)),n["s-ol"].remove(),n["s-ol"]=void 0,l=!0),t&&M(n,t)}ge.$flags$&=-2},R=(e,t,i,n,r,o)=>{let s,l=e["s-cr"]&&e["s-cr"].parentNode||e;for(l.shadowRoot&&l.tagName===a&&(l=l.shadowRoot);r<=o;++r)n[r]&&((s=N(null,i,r,e))&&(n[r].$elm$=s,l.insertBefore(s,B(t))))},O=(e,t,i,n,r)=>{for(;t<=i;++t)(n=e[t])&&(r=n.$elm$,K(n),s=!0,r["s-ol"]?r["s-ol"].remove():M(r,!0),r.remove())},D=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),B=e=>e&&e["s-ol"]||e,U=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,F=(e,t)=>{const i=t.$elm$=e.$elm$,n=e.$children$,r=t.$children$,a=t.$tag$,o=t.$text$;let s;null===o?(u="svg"===a||"foreignObject"!==a&&u,"slot"===a||L(e,t,u),null!==n&&null!==r?((e,t,i,n)=>{let r,a,o=0,s=0,l=0,u=0,c=t.length-1,d=t[0],h=t[c],f=n.length-1,v=n[0],p=n[f];for(;o<=c&&s<=f;)if(null==d)d=t[++o];else if(null==h)h=t[--c];else if(null==v)v=n[++s];else if(null==p)p=n[--f];else if(D(d,v))F(d,v),d=t[++o],v=n[++s];else if(D(h,p))F(h,p),h=t[--c],p=n[--f];else if(D(d,p))"slot"!==d.$tag$&&"slot"!==p.$tag$||M(d.$elm$.parentNode,!1),F(d,p),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++o],p=n[--f];else if(D(h,v))"slot"!==d.$tag$&&"slot"!==p.$tag$||M(h.$elm$.parentNode,!1),F(h,v),e.insertBefore(h.$elm$,d.$elm$),h=t[--c],v=n[++s];else{for(l=-1,u=o;u<=c;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===v.$key$){l=u;break}l>=0?((a=t[l]).$tag$!==v.$tag$?r=N(t&&t[s],i,l,e):(F(a,v),t[l]=void 0,r=a.$elm$),v=n[++s]):(r=N(t&&t[s],i,s,e),v=n[++s]),r&&U(d.$elm$).insertBefore(r,B(d.$elm$))}o>c?R(e,null==n[f+1]?null:n[f+1].$elm$,i,n,s,f):s>f&&O(t,o,c)})(i,n,t,r):null!==r?(null!==e.$text$&&(i.textContent=""),R(i,null,t,r,0,r.length-1)):null!==n&&O(n,0,n.length-1),u&&"svg"===a&&(u=!1)):(s=i["s-cr"])?s.parentNode.textContent=o:e.$text$!==o&&(i.data=o)},V=e=>{const t=e.childNodes;let i,n,r,a,o,s;for(n=0,r=t.length;n<r;n++)if(1===(i=t[n]).nodeType){if(i["s-sr"])for(o=i["s-sn"],i.hidden=!1,a=0;a<r;a++)if(s=t[a].nodeType,t[a]["s-hn"]!==i["s-hn"]||""!==o){if(1===s&&o===t[a].getAttribute("slot")){i.hidden=!0;break}}else if(1===s||3===s&&""!==t[a].textContent.trim()){i.hidden=!0;break}V(i)}},H=[],$=e=>{let t,i,n,r,a,o,l=0;const u=e.childNodes,c=u.length;for(;l<c;l++){if((t=u[l])["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(n=i.parentNode.childNodes,r=t["s-sn"],o=n.length-1;o>=0;o--)(i=n[o])["s-cn"]||i["s-nr"]||i["s-hn"]===t["s-hn"]||(W(i,r)?(a=H.find(e=>e.$nodeToRelocate$===i),s=!0,i["s-sn"]=i["s-sn"]||r,a?a.$slotRefNode$=t:H.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&H.map(e=>{W(e.$nodeToRelocate$,i["s-sn"])&&((a=H.find(e=>e.$nodeToRelocate$===i))&&!e.$slotRefNode$&&(e.$slotRefNode$=a.$slotRefNode$))})):H.some(e=>e.$nodeToRelocate$===i)||H.push({$nodeToRelocate$:i}));1===t.nodeType&&$(t)}},W=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,K=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(K)},z=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,Ce(()=>j(e,t))),j=(e,t)=>{const i=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{}),r=i;let a;return a=Q(r,t?"componentWillLoad":"componentWillUpdate"),a=X(a,()=>Q(r,"componentWillRender")),n(),X(a,()=>G(e,r,t))},G=async(e,t,i)=>{const n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{});n["s-rc"],i&&(e=>{const t=e.$cmpMeta$,i=e.$hostElement$,n=t.$flags$,r=(t.$tagName$,()=>{}),a=((e,t,i,n)=>{let r=w(t,i);const a=de.get(r);if(e=11===e.nodeType?e:ve,a)if("string"==typeof a){e=e.head||e;let t,i=x.get(e);i||x.set(e,i=new Set),i.has(r)||((t=ve.createElement("style")).innerHTML=a,e.insertBefore(t,e.querySelector("link")),i&&i.add(r))}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return r})(ye&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);10&n&&(i["s-sc"]=a,i.classList.add(a+"-h"),2&n&&i.classList.add(a+"-s")),r()})(e);const a=(e.$cmpMeta$.$tagName$,()=>{});q(e,t,n),a(),r(),Y(e)},q=(e,t,i)=>{try{c=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t)=>{const i=e.$hostElement$,u=e.$cmpMeta$,c=e.$vnode$||y(null,null),d=A(t)?t:g(null,null,t);if(a=i.tagName,u.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},u.$attrsToReflect$.map(([e,t])=>d.$attrs$[t]=i[e])),d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=c.$elm$=i.shadowRoot||i,n=i["s-sc"],r=i["s-cr"],o=ye&&0!=(1&u.$flags$),s=!1,F(c,d),ge.$flags$|=1,l){let e,t,i,n,r,a;$(d.$elm$);let o=0;for(;o<H.length;o++)(t=(e=H[o]).$nodeToRelocate$)["s-ol"]||((i=ve.createTextNode(""))["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=i,t));for(o=0;o<H.length;o++)if(t=(e=H[o]).$nodeToRelocate$,e.$slotRefNode$){for(n=e.$slotRefNode$.parentNode,r=e.$slotRefNode$.nextSibling,i=t["s-ol"];i=i.previousSibling;)if((a=i["s-nr"])&&a["s-sn"]===t["s-sn"]&&n===a.parentNode&&(!(a=a.nextSibling)||!a["s-nr"])){r=a;break}(!r&&n!==t.parentNode||t.nextSibling!==r)&&t!==r&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),n.insertBefore(t,r))}else 1===t.nodeType&&(t.hidden=!0)}s&&V(d.$elm$),ge.$flags$&=-2,H.length=0})(e,t)}catch(t){ce(t,e.$hostElement$)}return c=null,null},Y=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$;e.$ancestorComponent$,Q(t,"componentDidRender"),64&e.$flags$?Q(t,"componentDidUpdate"):(e.$flags$|=64,Q(t,"componentDidLoad"))},Q=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(e){ce(e)}},X=(e,t)=>e&&e.then?e.then(t):t(),J=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),n=e.prototype;i.map(([e,[i]])=>{(31&i||32&i)&&Object.defineProperty(n,e,{get(){return t=e,se(this).$instanceValues$.get(t);var t},set(i){((e,t,i,n)=>{const r=se(e),a=e,o=r.$instanceValues$.get(t),s=r.$flags$,l=a;var u,c;u=i,c=n.$members$[t][0],i=null==u||p(u)?u:4&c?"false"!==u&&(""===u||!!u):2&c?parseFloat(u):1&c?String(u):u;const d=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!d){if(r.$instanceValues$.set(t,i),n.$watchers$&&128&s){const e=n.$watchers$[t];e&&e.map(e=>{try{l[e](i,o,t)}catch(e){ce(e,a)}})}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(i,o,t))return;z(r,!1)}}})(this,e,i,t)},configurable:!0,enumerable:!0})});{const r=new Map;n.attributeChangedCallback=function(e,t,i){ge.jmp(()=>{const t=r.get(e);if(this.hasOwnProperty(t))i=this[t],delete this[t];else if(n.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==i)return;this[t]=(null!==i||"boolean"!=typeof this[t])&&i})},e.observedAttributes=i.filter(([e,t])=>15&t[0]).map(([e,i])=>{const n=i[1]||e;return r.set(n,e),512&i[0]&&t.$attrsToReflect$.push([e,n]),n})}}return e},Z=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[],!ye&&1&i.$flags$&&(i.$flags$|=8);const n=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){le(this,i)},connectedCallback(){(e=>{if(0==(1&ge.$flags$)){const t=se(e),i=t.$cmpMeta$,n=(i.$tagName$,()=>{});1&t.$flags$?(te(e,t,i.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&i.$flags$&&(e=>{const t=e["s-cr"]=ve.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)})(e),i.$members$&&Object.entries(i.$members$).map(([t,[i]])=>{if(31&i&&e.hasOwnProperty(t)){const i=e[t];delete e[t],e[t]=i}}),(async(e,t,i,n,r)=>{if(0==(32&t.$flags$)&&(r=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),r.style)){let n=r.style;"string"!=typeof n&&(n=n[t.$modeName$=(e=>he.map(t=>t(e)).find(e=>!!e))(e)]);const a=w(i,t.$modeName$);if(!de.has(a)){const e=(i.$tagName$,()=>{});((e,t,i)=>{let n=de.get(e);Ae&&i?"string"==typeof(n=n||new CSSStyleSheet)?n=t:n.replaceSync(t):n=t,de.set(e,n)})(a,n,!!(1&i.$flags$)),e()}}t.$ancestorComponent$,z(t,!0)})(e,t,i)),n()}})(this),n&&n.call(this)},disconnectedCallback(){(e=>{if(0==(1&ge.$flags$)){const t=se(e);t.$rmListeners$&&(t.$rmListeners$.map(e=>e()),t.$rmListeners$=void 0)}})(this),r&&r.call(this)},__attachShadow(){ye?this.attachShadow({mode:"open",delegatesFocus:!!(16&i.$flags$)}):this.shadowRoot=this}}),e.is=i.$tagName$,J(e,i)},ee=(e,t)=>t,te=(e,t,i,n)=>{i&&i.map(([i,n,r])=>{const a=ne(e,i),o=ie(t,r),s=re(i);ge.ael(a,n,o,s),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>ge.rel(a,n,o,s))})},ie=(e,t)=>i=>{try{e.$hostElement$[t](i)}catch(e){ce(e)}},ne=(e,t)=>4&t?ve:8&t?fe:16&t?ve.body:e,re=e=>me?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),ae=e=>Object.assign(ge,e),oe=new WeakMap,se=e=>oe.get(e),le=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return te(e,i,t.$listeners$),oe.set(e,i)},ue=(e,t)=>t in e,ce=(e,t)=>(0,console.error)(e,t),de=new Map,he=[],fe="undefined"!=typeof window?window:{},ve=fe.document||{head:{}},pe=fe.HTMLElement||class{},ge={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,n)=>e.addEventListener(t,i,n),rel:(e,t,i,n)=>e.removeEventListener(t,i,n),ce:(e,t)=>new CustomEvent(e,t)},ye=!0,me=(()=>{let e=!1;try{ve.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),Ae=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),ke=[],be=[],Ee=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){ce(e)}e.length=0},Te=()=>{Ee(ke),Ee(be),(d=ke.length>0)&&ge.raf(Te)},Se=e=>{return Promise.resolve(void 0).then(e)},Ce=((e,t)=>i=>{e.push(i),d||(d=!0,t&&4&ge.$flags$?Se(Te):ge.raf(Te))})(be,!0);var xe,we,Pe,_e,Ie,Le,Ne,Me;function Re(e,t){let i;const n=()=>{clearTimeout(i),i=null},r=(...r)=>{n(),i=setTimeout(e,t,...r)};return r.cancel=n,r.flush=e,r.pending=(()=>null!=i),r}function Oe(e){return null==e||void 0===e||""===e}function De(e){return Oe(e)?[]:e.split(",").map(e=>e.trim())}function Be(e,t){const i=function(e=0){(null==e||isNaN(e))&&(e=0);const t=Ve(e,3600).split(":");return{hours:parseInt(t[0]),minutes:parseInt(t[1]),seconds:parseInt(t[2])}}(e),n=i.hours>0;let r="";return n&&(r+=`${i.hours} ${t[Ne.HOURS]} `),(i.minutes>0||n)&&(r+=`${i.minutes} ${t[Ne.MINUTES]} `),r+=`${i.seconds} ${t[Ne.SECONDS]}`}function Ue(e){return(null==e?void 0:e.pageX)||e.targetTouches&&0!==e.targetTouches.length?{x:e.pageX-(window.scrollX||window.pageXOffset)||e.targetTouches[0].pageX-window.scrollX,y:e.pageY-(window.scrollY||window.pageYOffset)||e.targetTouches[0].pageY-window.scrollY}:{x:null,y:null}}function Fe(e){return t=100*e,2,Math.round(t*Math.pow(10,2))/Math.pow(10,2)+"%";var t}function Ve(e,t=61){if(null==e||isNaN(e))return"00:00";let i=He((e|=0)%60);return i=He((e=e/60|0)%60)+":"+i,(e=e/60|0)>0&&(i=He(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i}function He(e){return e<10?"0"+e:e.toString()}function $e(e,t,i,n=0,r=1){return(e-t)*(r-n)/(i-t)+n}function We(e,t,i){return Math.max(t,Math.min(i,e))}function Ke(e){e.stopPropagation(),e.preventDefault()}function ze(e){const t=e.split("-").shift().slice(0,2).toUpperCase();return Me[t]}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self,function(){function e(e){var t=!0,i=!1,n=null,r={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function a(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function s(e){t=!1}function l(){document.addEventListener("mousemove",u),document.addEventListener("mousedown",u),document.addEventListener("mouseup",u),document.addEventListener("pointermove",u),document.addEventListener("pointerdown",u),document.addEventListener("pointerup",u),document.addEventListener("touchmove",u),document.addEventListener("touchstart",u),document.addEventListener("touchend",u)}function u(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(t=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mousedown",u),document.removeEventListener("mouseup",u),document.removeEventListener("pointermove",u),document.removeEventListener("pointerdown",u),document.removeEventListener("pointerup",u),document.removeEventListener("touchmove",u),document.removeEventListener("touchstart",u),document.removeEventListener("touchend",u))}document.addEventListener("keydown",function(i){i.metaKey||i.altKey||i.ctrlKey||(a(e.activeElement)&&o(e.activeElement),t=!0)},!0),document.addEventListener("mousedown",s,!0),document.addEventListener("pointerdown",s,!0),document.addEventListener("touchstart",s,!0),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState&&(i&&(t=!0),l())},!0),l(),e.addEventListener("focus",function(e){var i,n,s;a(e.target)&&(t||(i=e.target,n=i.type,"INPUT"===(s=i.tagName)&&r[n]&&!i.readOnly||"TEXTAREA"===s&&!i.readOnly||i.isContentEditable))&&o(e.target)},!0),e.addEventListener("blur",function(e){var t;a(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(i=!0,window.clearTimeout(n),n=window.setTimeout(function(){i=!1},100),(t=e.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))},!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute("data-js-focus-visible",""):e.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(t=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)}(),function(e){e.PLAY="play",e.PAUSE="pause",e.STOP="stop",e.ENTER_FULLSCREEN="enterfullscreen",e.EXIT_FULLSCREEN="exitfullscreen",e.MUTE="mute",e.UNMUTE="unmute",e.TEXT_ON="texton",e.TEXT_OFF="textoff",e.GO_TO_LIVE="gotolive",e.MENU_ITEM_SELECT="menuitemselect",e.LIST_ITEM_SELECT="listitemselect",e.NONE="none",e.SEEK="seek",e.SEEK_FORWARD="seekforward",e.SEEK_BACK="seekback",e.VOLUME="volume",e.PREVIEW="preview",e.SETTINGS_ON="settingson",e.SETTINGS_OFF="settingsoff",e.LANGUAGE_SELECT="languageselect",e.QUALITY_SELECT="qualityselect",e.POSTER_PLAY="posterplay",e.PANEL_BACK="panelback",e.PANEL_CLOSE="panelclose"}(xe||(xe={})),function(e){e.AUTO="auto",e.MANUAL="manual"}(we||(we={})),function(e){e.MUTE="mute",e.PLAY="play",e.FULLSCREEN="fullscreen",e.TEXT="text",e.PLAY_OVERLAY="playOverlay",e.SETTINGS="settings",e.VOLUME="volume"}(Pe||(Pe={})),function(e){e.NONE="none",e.AD="ad",e.CONTENT="content",e.COMPACT="compact"}(_e||(_e={})),function(e){e.HIDDEN="avia-ui-hidden",e.ACC_VOL_ON="avia-volume-on",e.ACC_VOL_OFF="avia-volume-off",e.SEGMENT_MARKER="avia-segment-marker",e.INDICATOR_ACTIVE="avia-indicator-active",e.ACC_VOL="avia-acc-vol",e.ACC_VOL_METER="avia-acc-vol-meter",e.ACC_VOL_OVERLAY="avia-vol-meter-overlay",e.ACC_FWD="avia-acc-fwd",e.ACC_BACK="avia-acc-back",e.ACC_ARROW="avia-acc-arrow",e.UNMUTE_CTA="avia-unmute-cta",e.CONTROLS_VISIBLE="avia-controls-vis",e.SPINNER_ACTIVE="avia-spinner",e.SPINNER_IDLE="avia-spinner-idle",e.SETTINGS_NUDGE_LEFT="avia-settings-nudge-left"}(Ie||(Ie={})),function(e){e.AUTO="auto",e.TV="tv",e.DESKTOP="desktop",e.MOBILE="mobile"}(Le||(Le={})),function(e){e.PLAY="play",e.PAUSE="pause",e.STOP="stop",e.MUTE="mute",e.UNMUTE="unmute",e.VOLUME="volume",e.CLICK_TO_UNMUTE="click-to-unmute",e.TAP_TO_UNMUTE="tap-to-unmute",e.LIVE="live",e.GO_LIVE="go-live",e.SEEK="seek",e.SEEK_BACK="seek-back",e.SEEK_FORWARD="seek-forward",e.CLOSED_CAPTIONS_OFF="closed-captions-off",e.CLOSED_CAPTIONS_ON="closed-captions-on",e.FULL_SCREEN_ENTER="full-screen-enter",e.FULL_SCREEN_EXIT="full-screen-exit",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.VALUE_OF_TOTAL="value-of-total",e.UNMUTE_CTA="unmute-cta",e.SETTINGS="settings",e.LANGUAGE="language",e.QUALITY="quality",e.BACK="back",e.CAPTIONS="captions",e.AUDIO="audio",e.CLOSE="close",e.AUTO="auto",e.UNKNOWN="unknown"}(Ne||(Ne={})),function(e){e.AB="Abkhaz",e.AE="Avesta",e.AF="Afrikaans",e.AK="Akan",e.AM="አማርኛ",e.AN="Aragonés",e.AR="العربية",e.AV="Aвар мацӀ",e.AY="Aymar aru",e.AZ="azərbaycan dili",e.BA="башҡорт теле",e.BE="беларуская мова",e.BG="български език",e.BH="भोजपुरी",e.BI="Bislama",e.BM="Bamanankan",e.BN="বাংলা",e.BO="བོད་ཡིག",e.BR="Brezhoneg",e.BS="Bosanski jezik",e.CA="català",e.CE="нохчийн мотт",e.CH="Chamoru",e.CO="Corsu",e.CR="ᓀᐦᐃᔭᐍᐏᐣ",e.CS="čeština",e.CU="ѩзыкъ словѣньскъ",e.CV="чӑваш чӗлхи",e.CY="Cymraeg",e.DA="Dansk",e.DE="Deutsch",e.DZ="རྫོང་ཁ",e.EE="Eʋegbe",e.EL="ελληνικά",e.EN="English",e.EO="Esperanto",e.ES="Español",e.ET="Eesti",e.EU="Euskara",e.FA="فارسی",e.FF="Fulfulde",e.FI="Suomi",e.FJ="Vosa Vakaviti",e.FO="Føroyskt",e.FR="Français",e.FY="Frysk",e.GA="Gaeilge",e.GD="Gàidhlig",e.GL="Galego",e.GN="Avañe'ẽ",e.GU="ગુજરાતી",e.GV="Gaelg",e.HA="(Hausa) هَوُسَ",e.HE="עברית",e.HI="हिन्दी",e.HO="Hiri Motu",e.HR="hrvatski jezik",e.HT="Kreyòl ayisyen",e.HU="Magyar",e.HY="Հայերեն",e.HZ="Otjiherero",e.IA="Interlingua",e.ID="Bahasa Indonesia",e.IE="Interlingue",e.IG="Asụsụ Igbo",e.II="ꆈꌠ꒿ Nuosuhxop",e.IK="Iñupiaq",e.IO="Ido",e.IS="Íslenska",e.IT="Italiano",e.IU="ᐃᓄᒃᑎᑐᑦ",e.JA="日本人",e.JV="Basa Jawa",e.KA="ქართული",e.KG="Kikongo",e.KI="Gĩkũyũ",e.KJ="Kuanyama",e.KK="қазақ тілі",e.KL="kalaallisut",e.KM="ខ្មែរ",e.KN="ಕನ್ನಡ",e.KO="한국어",e.KR="Kanuri",e.KS="कश्मीरी,",e.KU="Kurdî",e.KV="коми кыв",e.KW="Kernewek",e.KY="Кыргызча",e.LA="Latine",e.LB="Lëtzebuergesch",e.LG="Luganda",e.LI="Limburgs",e.LN="Lingála",e.LO="ພາສາລາວ",e.LT="Lietuvių kalba",e.LU="Kiluba",e.LV="latviešu valoda",e.MG="fiteny malagasy",e.MH="Kajin M̧ajeļ",e.MI="te reo Māori",e.MK="македонски јазик",e.ML="മലയാളം",e.MN="Монгол хэл",e.MR="मराठी",e.MS="Bahasa Melayu",e.MT="Malti",e.MY="ဗမာစာ",e.NA="Dorerin Naoero",e.NB="Norsk Bokmål",e.NE="नेपाली",e.NG="Owambo",e.NL="Nederlands",e.NN="Norsk Nynorsk",e.NO="Norsk",e.NR="IsiNdebele",e.NV="Diné bizaad",e.NY="ChiCheŵa",e.OC="Occitan",e.OJ="ᐊᓂᔑᓈᐯᒧᐎᓐ",e.OM="Afaan Oromoo",e.OR="ଓଡ଼ିଆ",e.OS="ирон æвзаг",e.PA="ਪੰਜਾਬੀ",e.PI="पालि, पाळि",e.PL="Język polski",e.PS="پښتو",e.PT="Português",e.QU="Runa Simi",e.RM="Rumantsch Grischun",e.RN="Ikirundi",e.RO="Română",e.RU="русский",e.RW="Ikinyarwanda",e.SA="संस्कृतम्",e.SC="sardu",e.SD="सिन्धी",e.SE="Davvisámegiella",e.SG="Yângâ tî sängö",e.SI="සිංහල",e.SK="Slovenčina",e.SL="Slovenski jezik",e.SM="Gagana fa'a Samoa",e.SN="chiShona",e.SO="Soomaaliga",e.SQ="Shqip",e.SR="српски језик",e.SS="SiSwati",e.ST="Sesotho",e.SU="Basa Sunda",e.SV="Svenska",e.SW="Kiswahili",e.TA="தமிழ்",e.TE="తెలుగు",e.TG="тоҷикӣ",e.TH="ไทย",e.TI="ትግርኛ",e.TK="Türkmen",e.TL="Wikang Tagalog",e.TN="Setswana",e.TO="Faka Tonga",e.TR="Türkçe",e.TS="Xitsonga",e.TT="татар теле",e.TW="Twi",e.TY="Reo Tahiti",e.UG="ئۇيغۇرچە",e.UK="Українська",e.UR="اردو",e.UZ="Oʻzbek",e.VE="Tshivenḓa",e.VI="Tiếng Việt",e.VO="Volapük",e.WA="Walon",e.WO="Wollof",e.XH="IsiXhosa",e.YI="ייִדיש",e.YO="Yorùbá",e.ZA="Saɯ cueŋƅ",e.ZH="中文 (Zhōngwén)",e.ZU="IsiZulu"}(Me||(Me={}));const je={DEFAULT:e=>Ve(e.contentTime),UTC_TIME:e=>new Date(e.liveStreamUtcTime).toTimeString().split(" ")[0]};var Ge,qe,Ye;(Ge||(Ge={})).ACTION="uiaction",function(e){e.LEFT="left",e.RIGHT="right",e.UP="up",e.DOWN="down",e.ENTER="enter",e.UNSPECIFIED="*"}(qe||(qe={})),function(e){e.VERTICAL="vertical",e.HORIZONTAL="horizontal"}(Ye||(Ye={}));var Qe={4:qe.LEFT,21:qe.LEFT,37:qe.LEFT,214:qe.LEFT,205:qe.LEFT,218:qe.LEFT,5:qe.RIGHT,22:qe.RIGHT,39:qe.RIGHT,213:qe.RIGHT,206:qe.RIGHT,217:qe.RIGHT,29460:qe.UP,19:qe.UP,38:qe.UP,211:qe.UP,203:qe.UP,215:qe.UP,29461:qe.DOWN,20:qe.DOWN,40:qe.DOWN,212:qe.DOWN,204:qe.DOWN,216:qe.DOWN,29443:qe.ENTER,13:qe.ENTER,67:qe.ENTER,32:qe.ENTER,23:qe.ENTER,195:qe.ENTER},Xe=function(e){return!!e&&(null!=e.isFocusable?e.isFocusable:!!e.selectAction)},Je=function(e,t){if(!e||!t)return!1;var i=nt(e),n=rt(t);return n===qe.UNSPECIFIED||i===Ye.VERTICAL&&(n===qe.UP||n===qe.DOWN)||i===Ye.HORIZONTAL&&(n===qe.LEFT||n===qe.RIGHT)},Ze=function(e,t){if(e&&e.children)for(var i=0;i<e.children.length;i++){var n=e.children[i];if(n.indexRange&&n.indexRange[0]<=t&&n.indexRange[1]>=t)return n}},et=function(e,t,i){if(e&&e.children){if(i&&e.activeChild&&e.activeChild.index>=i[0]&&e.activeChild.index<=i[1]&&Xe(e.activeChild))return e.activeChild;for(var n,r,a=[],o=0;o<e.children.length;o++)(Xe(e.children[o])||e.children[o].children)&&a.push(o);if(!(a.length<=0))return e.children[(n=a,r=t,n.reduce(function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e}))]}},tt=function(e,t){if(e&&t)if(e.children||(e.children=[]),t.parent=e,"number"!=typeof t.index||t.index>e.children.length)t.index=e.children.length,e.children.push(t);else{e.children.splice(t.index,0,t);for(var i=t.index+1;i<e.children.length;i++)e.children[i].index=i}},it=function(e,t){if(t&&e&&e.children){for(var i=-1,n=0;n<e.children.length;n++)e.children[n]===t?i=n:-1!==i&&(e.children[n].index=n-1);-1!==i&&(1===e.children.length?e.children=void 0:e.children.splice(i,1))}},nt=function(e){if(e)for(var t=0,i=Object.keys(Ye);t<i.length;t++){var n=i[t];if(Ye[n]===e.toLowerCase())return Ye[n]}},rt=function(e){if(e)for(var t=0,i=Object.keys(qe);t<i.length;t++){var n=i[t];if(qe[n]===e.toLowerCase())return qe[n]}},at=function(e,t){for(var i,n=[e],r=Object.create(null);n.length>0;){if(i=n.pop(),t.call(r,i))return;if(i.children)for(var a=i.children.length-1;a>=0;a--)n.push(i.children[a])}};function ot(e){return e=e||Object.create(null),{on:function(t,i){(e[t]||(e[t]=[])).push(i)},off:function(t,i){e[t]&&e[t].splice(e[t].indexOf(i)>>>0,1)},emit:function(t,i){(e[t]||[]).slice().map(function(e){e(i)}),(e["*"]||[]).slice().map(function(e){e(t,i)})}}}var st,lt=function(){function e(){this.nodes={},this.rootNode=void 0,this.currentFocusNode=void 0,this.isIndexAlignMode=!1,this.emitter=ot()}return e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e.prototype.getRootNode=function(){if(!this.rootNode)throw new Error("no root node");return this.rootNode},e.prototype.getCurrentFocusNode=function(){return this.currentFocusNode},e.prototype.registerNode=function(e,t){var i;if(void 0===t&&(t={}),this.getNode(e))throw Error("Node with an ID of "+e+" has already been registered");var n=function(e,t){if(void 0===t&&(t={}),!e)throw Error("Node ID has to be defined");return{id:e,parent:void 0,children:void 0,activeChild:void 0,overrides:void 0,overrideSources:void 0,index:"number"==typeof t.index?t.index:void 0,orientation:t.orientation,indexRange:t.indexRange,selectAction:t.selectAction,isFocusable:t.isFocusable,isWrapping:t.isWrapping,isStopPropagate:t.isStopPropagate,isIndexAlign:t.isIndexAlign,onLeave:t.onLeave,onEnter:t.onEnter,shouldCancelLeave:t.shouldCancelLeave,onLeaveCancelled:t.onLeaveCancelled,shouldCancelEnter:t.shouldCancelEnter,onEnterCancelled:t.onEnterCancelled,onSelect:t.onSelect,onInactive:t.onInactive,onActive:t.onActive,onActiveChildChange:t.onActiveChildChange,onBlur:t.onBlur,onFocus:t.onFocus,onMove:t.onMove}}(e,t);if(!this.rootNode)return this.rootNode=n,this.nodes=((i={})[e]=n,i),this;var r=t.parent?this.getNode(t.parent):this.rootNode;return r?(this.nodes[e]=n,tt(r,n),this):this},e.prototype.moveNode=function(e,t,i){if(void 0===i&&(i={maintainIndex:!1}),e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t,e&&t&&e!==this.rootNode&&e.parent!==t){var n=e.parent;it(n,e),"number"==typeof i.index?e.index=i.index:i.maintainIndex||(e.index=void 0),tt(t,e),this.unsetActiveChild(n,e),this.isSameOrParentForChild(e,this.currentFocusNode)&&this.setActiveChildRecursive(t,e)}},e.prototype.register=function(e,t){return this.registerNode(e,t)},e.prototype.unregister=function(e,t){this.unregisterNode(e,t)},e.prototype.unregisterNode=function(e,t){var i=this;if(void 0===t&&(t={forceRefocus:!0}),!(e="string"==typeof e?this.getNode(e):e))return this;if(e===this.rootNode)return this.nodes={},this.rootNode=void 0,this.currentFocusNode=void 0,this.isIndexAlignMode=!1,this.emitter=ot(),this;var n=e.parent;n.activeChild&&n.activeChild===e&&(this.isIndexAlignMode=!1,this.unsetActiveChild(n,e)),it(n,e);var r=!1;return at(e,function(e){delete i.nodes[e.id],i.unregisterOverride(e);for(var t=0,n=e.overrideSources||[];t<n.length;t++)i.unregisterOverride(n[t].node,n[t].direction);e===i.currentFocusNode&&(i.currentFocusNode=void 0,r=!0)}),this.emitter.emit("blur",e),e.onBlur&&e.onBlur(e),r&&t.forceRefocus&&this.recalculateFocus(n),this},e.prototype.registerOverride=function(e,t,i,n){if(void 0===n&&(n={}),!(e="string"==typeof e?this.getNode(e):e))throw new Error("registering override: missing source node");if(!(t="string"==typeof t?this.getNode(t):t))throw new Error("registering override: missing target node");if(!(i=rt(i)))throw new Error("registering override: missing direction");if(e.overrides&&e.overrides[i]){if(!n.forceOverride)throw new Error("registering override: override from "+e.id+" to "+t.id+" in direction "+i+" already exist");this.unregisterOverride(e,i)}return e.overrides=e.overrides||{},e.overrides[i]=t,t.overrideSources=t.overrideSources||[],t.overrideSources.push({direction:i,node:e}),this},e.prototype.unregisterOverride=function(e,t){if((e="string"==typeof e?this.getNode(e):e)&&e.overrides&&(!t||(t=rt(t)))){for(var i=!0,n=0,r=Object.keys(qe);n<r.length;n++){var a=r[n],o=qe[a];if(t&&t!==o)i=i&&!(e.overrides&&e.overrides[o]);else{var s=e.overrides[o];if(s&&s.overrideSources)for(var l=0;l<s.overrideSources.length;l++)if(s.overrideSources[l].direction===o&&s.overrideSources[l].node===e){1===s.overrideSources.length?s.overrideSources=void 0:(s.overrideSources[l]=s.overrideSources[s.overrideSources.length-1],s.overrideSources.length=s.overrideSources.length-1);break}e.overrides[o]=void 0}}return i&&(e.overrides=void 0),this}},e.prototype.getNode=function(e){if(e)return this.nodes[e]},e.prototype.pickNode=function(e){var t=this.getNode(e);if(t)return this.unregisterNode(t),t},e.prototype.climbUp=function(e,t){for(;e;){if(e.overrides&&e.overrides[t])return e.overrides[t];if(e!==this.currentFocusNode)if(Je(e.orientation,t)){if(this.getNextFocusableChildInDirection(e,t))return e;e=e.parent}else e=e.parent;else e=e.parent}},e.prototype.digDown=function(e,t){for(void 0===t&&(t=qe.UNSPECIFIED);e;){if(Xe(e)&&(e.isStopPropagate||!this.doesNodeHaveFocusableChildren(e)))return e;if(this.isIndexAlignMode){var i=this.getCurrentFocusNode(),n=i.indexRange,r=n?n[0]:i.index;if(e.isIndexAlign){if(e.parent.orientation===Ye.VERTICAL){if(t===qe.UP){e=et(this.getNodeLastChild(e),r,n);continue}if(t===qe.DOWN){e=et(this.getNodeFirstChild(e),r,n);continue}}if(e.parent.orientation===Ye.HORIZONTAL){if(t===qe.LEFT){e=this.getNodeLastChild(et(e,i.parent.index));continue}if(t===qe.RIGHT){e=this.getNodeFirstChild(et(e,i.parent.index));continue}}}var a=Ze(e,r);if(a){e=a;continue}e=et(e,r,n)}else e=e.activeChild?e.activeChild:this.getNextFocusableChildInDirection(e,qe.UNSPECIFIED)}},e.prototype.getNextFocusableChildInDirection=function(e,t){if(e){var i,n=nt(e.orientation),r=rt(t);(r===qe.UNSPECIFIED||n===Ye.HORIZONTAL&&r===qe.RIGHT||n===Ye.VERTICAL&&r===qe.DOWN)&&(i=this.getNextFocusableChild(e));var a=r===qe.UNSPECIFIED||n===Ye.HORIZONTAL&&r===qe.LEFT||n===Ye.VERTICAL&&r===qe.UP;return!i&&a&&(i=this.getPrevFocusableChild(e)),i}},e.prototype.getNextFocusableChild=function(e){if(e&&e.children){if(!e.activeChild)return this.getNodeFirstFocusableChild(e);for(var t=e.activeChild.index+1;t<e.children.length;t++)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t];if(e.isWrapping)for(t=0;t<e.activeChild.index;t++)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t]}},e.prototype.getPrevFocusableChild=function(e){if(e&&e.children){if(!e.activeChild)return this.getNodeLastFocusableChild(e);for(var t=e.activeChild.index-1;t>=0;t--)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t];if(e.isWrapping)for(t=e.children.length-1;t>e.activeChild.index;t--)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t]}},e.prototype.getNodeFirstChild=function(e){if(e&&e.children)return e.children[0]},e.prototype.getNodeLastChild=function(e){if(e&&e.children)return e.children[e.children.length-1]},e.prototype.getNodeFirstFocusableChild=function(e){if(e&&e.children)for(var t=0;t<e.children.length;t++)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t]},e.prototype.getNodeLastFocusableChild=function(e){if(e&&e.children)for(var t=e.children.length-1;t>=0;t--)if(this.isNodeFocusableCandidate(e.children[t]))return e.children[t]},e.prototype.handleKeyEvent=function(e,t){if(void 0===t&&(t={forceFocus:!1}),e){var i,n=e.keyCode?(i=e.keyCode,Qe[i]):rt(e.direction);if(n){var r,a,o=this.getCurrentFocusNode();if(n===qe.ENTER)return o&&(this.emitter.emit("select",o),o.onSelect&&o.onSelect(o)),o;if(!o&&t.forceFocus)r=this.getRootNode(),a=this.getNextFocusableChildInDirection(r,qe.UNSPECIFIED);else{if(!(r=this.climbUp(o,n)))return;this.isIndexAlignMode=!0===r.isIndexAlign;var s=this.getNextFocusableChildInDirection(r,n);a=this.digDown(s||r,n)}if(a){if(o&&o.shouldCancelLeave&&o.shouldCancelLeave(o,a))return o.onLeaveCancelled&&o.onLeaveCancelled(o,a),this.emitter.emit("cancelled",{leave:o,enter:a}),o;if(a.shouldCancelEnter&&a.shouldCancelEnter(o,a))return a.onEnterCancelled&&a.onEnterCancelled(o,a),this.emitter.emit("cancelled",{leave:o,enter:a}),o;this.assignFocus(a);var l=n===qe.LEFT||n===qe.UP?-1:1;return this.emitter.emit("move",{leave:o,enter:a,direction:n,offset:l}),r.onMove&&r.onMove({node:r,leave:o,enter:a,direction:n,offset:l}),o&&o.onLeave&&o.onLeave(o),a.onEnter&&a.onEnter(a),a}}}},e.prototype.setActiveChild=function(e,t){if(e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t,e&&t&&t.parent.id===e.id)if(e.activeChild&&e.activeChild.id!==t.id){var i=e.activeChild;e.activeChild=t,this.emitter.emit("inactive",i),i.onInactive&&i.onInactive(i),this.emitter.emit("active",t),t.onActive&&t.onActive(t),e.onActiveChildChange&&e.onActiveChildChange({node:e,leave:i,enter:t})}else e.activeChild||(e.activeChild=t,this.emitter.emit("active",t),t.onActive&&t.onActive(t),e.onActiveChildChange&&e.onActiveChildChange({node:e,leave:null,enter:t}))},e.prototype.setActiveChildRecursive=function(e,t){for(e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t;e;)this.setActiveChild(e,t),t=e,e=e.parent},e.prototype.unsetActiveChild=function(e,t){if(e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t,e&&e.activeChild&&t&&e.activeChild===t)for(var i=this.isSameOrParentForChild(t,this.currentFocusNode);e&&e.activeChild;){var n=e.activeChild===t,r=this.isSameOrParentForChild(e.activeChild,this.currentFocusNode);(i||n&&!r)&&(e.activeChild=void 0),t=e,e=e.parent}},e.prototype.assignFocus=function(e){if((e="string"==typeof e?this.getNode(e):e)&&!Xe(e)&&(e=this.digDown(e,qe.UNSPECIFIED)),!e)throw new Error("trying to assign focus to a non focusable node");this.currentFocusNode&&(this.emitter.emit("blur",this.currentFocusNode),this.currentFocusNode.onBlur&&this.currentFocusNode.onBlur(this.currentFocusNode)),this.currentFocusNode=e,e.parent&&this.setActiveChildRecursive(e.parent,e),e.onFocus&&e.onFocus(e),this.emitter.emit("focus",e)},e.prototype.recalculateFocus=function(e){var t=this.climbUp(e,qe.UNSPECIFIED)||this.getRootNode(),i=this.getNextFocusableChildInDirection(t,qe.UNSPECIFIED),n=this.digDown(i||t,qe.UNSPECIFIED);n?this.assignFocus(n):this.currentFocusNode=void 0},e.prototype.registerTree=function(e){var t=this;e&&at(e,function(e){if(t.registerNode(e.id,e),e.children)for(var i=0;i<e.children.length;i++)e.children[i].parent=e.id})},e.prototype.insertTree=function(e,t){if(void 0===t&&(t={maintainIndex:!0}),e){var i=this.pickNode(e.id);!e.parent&&i&&i.parent&&(e.parent=i.parent.id),t.maintainIndex&&i&&"number"==typeof i.index&&(e.index=i.index),this.registerTree(e)}},e.prototype.doesNodeHaveFocusableChildren=function(e){if(!e||!e.children)return!1;var t=!1;return at(e,function(i){return i!==e&&(t=t||Xe(i)),t}),t},e.prototype.isNodeFocusableCandidate=function(e){return Xe(e)||this.doesNodeHaveFocusableChildren(e)},e.prototype.isSameOrParentForChild=function(e,t){if(e="string"==typeof e?this.getNode(e):e,t="string"==typeof t?this.getNode(t):t,!e||!t)return!1;if(e===t)return!0;for(;t;){if(t.parent===e)return!0;t=t.parent}return!1},e.prototype.setNodeFocusable=function(e,t){(e="string"==typeof e?this.getNode(e):e)&&Xe(e)!==t&&(e.isFocusable=t,t||(this.currentFocusNode===e&&this.recalculateFocus(e),e.parent&&this.unsetActiveChild(e.parent,e)))},e}();!function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(st||(st={}));class ut{constructor(e){this.element=e,this.parents=["[role=menu]","[role=menubar]"],this.interactive=[...this.parents,"button","a[href]","input","textarea","select","details",'[tabindex]:not([tabindex="-1"]'],this.scope=document,this.counter=0,this.onMutation=Re(()=>{this.createGraph()},250),this.onKeyDown=(e=>{this.navigation.handleKeyEvent(e)}),this.onFocus=(e=>{const t=this.find(t=>t.id===e.id);(null==t?void 0:t.element)&&t.element.focus()}),this.onFocusIn=Re(e=>{var t;const i=this.find(t=>t.element===e.target);i&&(null===(t=this.navigation)||void 0===t||t.assignFocus(i.id))},250),this.observer=new MutationObserver(this.onMutation),this.observer.observe(this.element,{childList:!0,subtree:!0})}createGraph(){var e,t;this.counter=0;const i=this.interactive.join(", "),n=this.parents.join(", "),r=new Map;this.graph=this.elementToNode(this.element),this.element.querySelectorAll(i).forEach(e=>{if(null===e.offsetParent)return;if(!0===e.disabled)return;const t=(e.matches(n)?e.parentElement:e).closest(n)||this.element;r.has(t)||r.set(t,[]),r.get(t).push(e)}),r.forEach((e,t)=>{const i=this.find(e=>e.element===t);i.children=e.map(e=>this.elementToNode(e,i))});const a=null===(e=this.navigation)||void 0===e?void 0:e.getCurrentFocusNode();null===(t=this.navigation)||void 0===t||t.unregisterNode(this.rootId);const o=new lt;o.registerTree(this.graph),this.rootId=this.graph.id,this.element.addEventListener("focusin",this.onFocusIn),o.on("focus",this.onFocus);const{activeElement:s}=document;if(a)if(s){const e=this.find(e=>e.element===s);e&&o.assignFocus(e.id)}else o.assignFocus(a.id);this.scope.addEventListener("keydown",this.onKeyDown),this.navigation=o}walk(e,t=this.graph){e(t);for(const i of t.children)this.walk(e,i)}find(e,t=this.graph){if(e(t))return t;for(const i of t.children){const t=this.find(e,i);if(t)return t}return null}focus(e){const t=this.interactive.join(", "),i=e.querySelector(t),n=this.find(e=>e.element===i);n&&this.navigation.assignFocus(n.id)}elementToNode(e,t){const i=e.role?"menu"===e.role?st.VERTICAL:st.HORIZONTAL:void 0,n=e.textContent?"-"+e.textContent:"";return{id:e.id||`${e.nodeName}-${this.counter++}${n}`,element:e,parent:null==t?void 0:t.id,children:[],orientation:i,isFocusable:!!t}}destroy(){this.navigation&&(this.navigation.off("focus",this.onFocus),this.navigation.unregisterNode(this.rootId)),this.element.removeEventListener("focusin",this.onFocusIn),this.onFocusIn.cancel(),this.scope.removeEventListener("keypress",this.onKeyDown),this.scope=null,this.onMutation.cancel(),this.observer.disconnect(),this.observer=null}}const ct={en:{[Ne.PLAY]:"Play",[Ne.PAUSE]:"Pause",[Ne.STOP]:"Stop",[Ne.MUTE]:"Mute",[Ne.UNMUTE]:"Unmute",[Ne.VOLUME]:"Volume",[Ne.CLICK_TO_UNMUTE]:"Click to unmute",[Ne.TAP_TO_UNMUTE]:"Tap to unmute",[Ne.SEEK]:"Seek",[Ne.SEEK_BACK]:"Seek Backward",[Ne.SEEK_FORWARD]:"Seek Forward",[Ne.LIVE]:"Live",[Ne.GO_LIVE]:"Go Live",[Ne.CLOSED_CAPTIONS_OFF]:"Closed Captions Off",[Ne.CLOSED_CAPTIONS_ON]:"Closed Captions On",[Ne.FULL_SCREEN_ENTER]:"Enter Fullscreen",[Ne.FULL_SCREEN_EXIT]:"Exit Fullscreen",[Ne.HOURS]:"Hours",[Ne.MINUTES]:"Minutes",[Ne.SECONDS]:"Seconds",[Ne.VALUE_OF_TOTAL]:"{{value}} of {{total}}",[Ne.SETTINGS]:"Settings",[Ne.LANGUAGE]:"Language",[Ne.QUALITY]:"Quality",[Ne.BACK]:"Back",[Ne.CAPTIONS]:"Captions",[Ne.AUDIO]:"Audio",[Ne.CLOSE]:"Close",[Ne.AUTO]:"Auto",[Ne.UNKNOWN]:"Unknown"},es:{[Ne.PLAY]:"Reproducir",[Ne.PAUSE]:"Pausa",[Ne.STOP]:"Stop",[Ne.MUTE]:"Silencio",[Ne.UNMUTE]:"Dejar de silenciar",[Ne.VOLUME]:"Volumen",[Ne.CLICK_TO_UNMUTE]:"Haz clic para dejar de silenciar",[Ne.TAP_TO_UNMUTE]:"Toca para dejar de silenciar",[Ne.SEEK]:"Buscar",[Ne.SEEK_BACK]:"Buscar hacia atrás",[Ne.SEEK_FORWARD]:"Buscar adelante",[Ne.LIVE]:"En Vivo",[Ne.GO_LIVE]:"Ir a Vivir",[Ne.CLOSED_CAPTIONS_OFF]:"Subtítulos cerrados",[Ne.CLOSED_CAPTIONS_ON]:"Subtítulos cerrados en",[Ne.FULL_SCREEN_ENTER]:"Ir a pantalla completa",[Ne.FULL_SCREEN_EXIT]:"Salir de pantalla completa",[Ne.HOURS]:"Horas",[Ne.MINUTES]:"Minutos",[Ne.SECONDS]:"Segundos",[Ne.VALUE_OF_TOTAL]:"{{value}} de {{total}}",[Ne.SETTINGS]:"Configuraciones",[Ne.LANGUAGE]:"Lengua",[Ne.QUALITY]:"Calidad",[Ne.BACK]:"Volver",[Ne.CAPTIONS]:"Subtítulos",[Ne.AUDIO]:"Audio",[Ne.CLOSE]:"Cerrar",[Ne.AUTO]:"Auto",[Ne.UNKNOWN]:"Desconocida"}},dt="ui";function ht(e={}){return{id:dt,factory:ft,options:e}}async function ft(e,t){"object"!=typeof customElements&&e.logger.warn("Polyfill warning: customElements is not defined"),"function"!=typeof Node.prototype.getRootNode&&e.logger.warn("Polyfill warning: Node.prototype.getRootNode is not defined");const i=new vt;return await i.onRegister(e.player,t,e),i}class vt extends class{constructor(e){this.debug=!1,this.logFmt="color: #fcf; font-style: italic;",this.id=e,this.player=null,this.services=null,this.options=null,this.onPlayerEvent=this.onPlayerEvent.bind(this)}getId(){return this.id}destroy(){this.listenToPlayer(!1,this.getEventInterests()),this.player=null,this.options=null,this.services=null,this.avia=null}onPlayerEvent(e){}getEventInterests(){return[]}sendEvent(e){this.services.event.dispatchPluginEvent(e)}listenToPlayer(e,t){const i=!1!==e?"on":"off";t.forEach(e=>this.player[i](e,this.onPlayerEvent))}log(e){this.debug&&(null===console||void 0===console||console.log(`%c<Plugin: ${this.id}> ${e}`,this.logFmt))}async onRegister(e,t,i){this.player=e,this.services=i,this.options=t,this.avia=i.avia,this.debug=!0===t.debug,await this.initialize(),this.listenToPlayer(!0,this.getEventInterests()),this.log("Registered "+this.id)}async initialize(){}}{constructor(){super(dt),this.TV_MODE_IDLE_DELAY=7e3,this.defaultSeekInc=10,this.accIndicatorDisplayTime=1500,this.playbackStarted=!1,this.settingsEngaged=!1,this.firstProgressReceived=!1,this.defaultCompactViewBreakpoint=520,this.rootElement="avia-ui",this.previewTimeTransform=je.DEFAULT,this.pendingActive=!1,this.resourceStarted=!1,this.activeMode_=we.AUTO,this.idleDelay_=NaN,this.BUFFERED_CHECK_COUNT_INTERVAL=10,this.bufferedCheckCounter=0,this.onKeyDown=(()=>{if(this.aviaUi.deviceMode===Le.TV&&this.activeMode!==we.MANUAL&&(this.setActive(!0),!this.aviaUi.contains(document.activeElement))){const e=this.aviaUi.querySelector("avia-progress-bar");null==e||e.focus()}}),this.aviaUi=null,this.onUiEvent=this.onUiEvent.bind(this),this.accVolUpdater=Re(e=>{this.setAccIndicatorState(e)},this.accIndicatorDisplayTime),this.accSeekUpdater=Re(e=>{this.setAccIndicatorState(e)},this.accIndicatorDisplayTime),document.addEventListener("keydown",this.onKeyDown)}get activeMode(){return this.activeMode_||we.AUTO}set activeMode(e){this.activeMode_=e}get active(){return this.aviaUi.active}set active(e){this.setActive(e)}get idleDelay(){return this.idleDelay_}set idleDelay(e){this.idleDelay_=e}destroy(){var e,t;super.destroy(),this.accVolUpdater.cancel(),this.accSeekUpdater.cancel(),null===(e=this.aviaUi)||void 0===e||e.removeEventListener(Ge.ACTION,this.onUiEvent),this.aviaUi=null,null===(t=this.focusManager)||void 0===t||t.destroy(),document.removeEventListener("keydown",this.onKeyDown),clearTimeout(this.idleTimeout)}onUiEvent(e){const t=e.detail.action,i=e.detail.value;switch(t!==xe.POSTER_PLAY&&this.services.event.dispatchPluginEvent({id:this.id,type:t,detail:i||null}),t){case xe.POSTER_PLAY:!this.playbackStarted&&this.resourceStarted&&(this.cancelPoster(t===xe.POSTER_PLAY),this.player.play().catch(()=>{}));break;case xe.PLAY:case xe.PAUSE:case xe.STOP:this.player[t]();break;case xe.ENTER_FULLSCREEN:this.player.enterFullscreen();break;case xe.EXIT_FULLSCREEN:this.player.exitFullscreen();break;case xe.MUTE:this.player.muted=!0,this.aviaUi.muted=!0;break;case xe.UNMUTE:this.unmute();break;case xe.TEXT_ON:case xe.TEXT_OFF:const e=t===xe.TEXT_ON;this.player.textTrackEnabled=e,this.aviaUi.textTrackEnabled=e;break;case xe.SEEK:this.player.seek(i).catch(e=>{this.log("AviaUI: A seek() call failed: "+e.message)});break;case xe.SEEK_FORWARD:this.incrementalSeek(1);break;case xe.SEEK_BACK:this.incrementalSeek(-1);break;case xe.VOLUME:this.player.volume=i;break;case xe.PREVIEW:const{time:n,percent:r}=i,{contentDuration:a,streamDuration:o,liveStreamUtcDuration:s,liveStreamUtcStart:l}=this.player,u=r*o;Promise.resolve(this.previewTimeTransform({contentTime:n,streamTime:u,liveStreamUtcTime:Math.round(1e3*u+l),contentDuration:a,streamDuration:o,liveStreamUtcDuration:s})).then(e=>{this.player.getThumbnails(n).then(t=>this.aviaUi.preview={value:e,thumbs:t,thumbnailScaleFactor:this.options.thumbnailScaleFactor||.25})});break;case xe.SETTINGS_ON:case xe.SETTINGS_OFF:this.setStateForSettings(t===xe.SETTINGS_ON),this.player.disableKeyCommands(t===xe.SETTINGS_ON);break;case xe.LANGUAGE_SELECT:this.selectLanguage(i);break;case xe.QUALITY_SELECT:this.selectQuality(i);break;case xe.GO_TO_LIVE:this.player.goLive()}}onPlayerEvent(e){const{PlayerEvent:t,StreamType:i,PlaybackState:n}=this.avia,r=this.player.streamType===i.LIVE,a=this.player.streamType===i.DVR,{type:o,detail:s}=e;switch(o){case t.CLOCK:this.bufferedCheckCounter=s.count;const e=this.player.playbackState;e!==n.PAUSED&&e!==n.WAITING||this.updateBufferedRanges();break;case t.READY:this.setPlayState(),this.setPosterState();break;case t.AUTOPLAY_BLOCKED:this.setPosterState(!0);break;case t.RESOURCE_START:this.setPosterState(this.aviaUi.posterActive),this.setSegmentBreakPositions([]),this.resourceStarted=!0;break;case t.AD_CUEPOINTS_AVAILABLE:this.setSegmentBreakPositions(s.cuepoints);break;case t.AD_SEGMENT_START:!1!==this.options.showAdControlsOnAdSegmentStart&&this.setStateForAdBreakStart();break;case t.AD_START:this.setControlMode(_e.AD),this.enableControls([Pe.PLAY],!0),this.aviaUi.playing=!0;break;case t.AD_BREAK_START:this.setStateForAdBreakStart();break;case t.AD_PROGRESS:this.setAdPosition(s.currentTime,s.duration);break;case t.AD_SEGMENT_END:case t.AD_BREAK_COMPLETE:this.setControlMode(_e.NONE);break;case t.CONTENT_START:case t.CONTENT_SEGMENT_START:this.setStateForContentStart(r,a);break;case t.CONTENT_SEGMENT_END:this.firstProgressReceived=!1,this.setControlMode(_e.NONE);break;case t.CONTENT_PLAYING:this.setControlMode(_e.CONTENT),this.setPlayState();break;case t.AD_PAUSED:case t.CONTENT_PAUSED:this.aviaUi.playing=!1;break;case t.AD_PLAYING:this.aviaUi.playing=!0;break;case t.STREAM_TYPE_CHANGE:this.setLiveState(r,a);break;case t.CONTENT_PROGRESS:this.firstProgressReceived||(this.firstProgressReceived=!0,this.setPlayState(),this.setLiveState(r,a)),this.updateBufferedRanges(),r||this.setTimeAndPosition(),(r||a)&&this.setLiveState(r,a);break;case t.FULLSCREEN_CHANGE:this.aviaUi.fullscreen=s.fullscreen;break;case t.TEXT_TRACK_ENABLED_CHANGE:this.aviaUi.textTrackEnabled=s.textTrackEnabled;break;case t.LANGUAGE_CHANGE:this.setLocalizationData(s.language||"en");break;case t.MUTE_CHANGE:this.aviaUi.muted=s.muted,this.player.muted||(this.aviaUi.unmuteCtaVisible=!1);break;case t.VOLUME_CHANGE:const{volume:i}=s,l=this.player.muted;if(this.aviaUi.volume===i)break;this.aviaUi.muted?this.aviaUi.muted&&i>0&&this.unmute():this.aviaUi.muted=!Math.ceil(i),this.aviaUi.volume=i,l||(this.aviaUi.unmuteCtaVisible=!1);break;case t.HOTKEY_ACTION:this.playbackStarted&&this.setAccIndicator(s.action,s);break;case t.ACTIVE_STATE_CHANGE:this.activeMode===we.AUTO&&this.setActiveState(s.activeState);break;case t.PRESENTATION_SIZE_CHANGE:this.respondToSizeChange();break;case t.AUDIO_TRACK_CHANGE:case t.AUDIO_TRACKS_CHANGE:case t.QUALITY_CHANGE:case t.QUALITIES_CHANGE:case t.TEXT_TRACK_CHANGE:case t.TEXT_TRACKS_CHANGE:o===t.TEXT_TRACKS_CHANGE&&this.enableControls(Pe.TEXT,!0),this.enableSettingsButton(),this.setStateForSettings();break;case t.RESOURCE_END:this.setIdleState();break;case t.PLAYBACK_STATE_CHANGE:this.setPlayState()}}updateBufferedRanges(){if(this.bufferedCheckCounter%this.BUFFERED_CHECK_COUNT_INTERVAL!=0||this.player.streamType===this.avia.StreamType.LIVE)return;const e=(this.player.getBuffered()||[]).map(e=>({start:e.startTime,end:e.endTime})),t=this.player.contentTime;this.aviaUi.bufferedRanges=!1===this.options.showForwardBufferedRangeOnly?e:e.filter(e=>t>=e.start&&t<=e.end)}incrementalSeek(e){const t=e*(this.options.seekIncrement||this.defaultSeekInc);this.player.jump(t).catch(e=>{this.log("AviaUI: A jump() call failed: "+e.message)}),this.player.recordMetric(this.avia.MetricType.UI,this.avia.UiMetric.SEEK_BY,t)}unmute(){this.player.muted=!1,this.aviaUi.muted=!1}setControlMode(e){if(e===_e.CONTENT){const e=this.getContentControlMode();this.aviaUi.controlMode=e}else this.aviaUi.controlMode=e}setActiveState(e){this.active=e===this.avia.ActiveState.ACTIVE}setActive(e){var t,i;this.playbackStarted?(this.aviaUi.active=this.activeMode===we.MANUAL?e:!!(null===(i=null===(t=this.aviaUi)||void 0===t?void 0:t.settings)||void 0===i?void 0:i.active)||e,this.options.offsetTimedTextOnControlsVisible&&this.aviaUi.controlMode===_e.CONTENT&&this.player.offsetTimedText(e?this.controlBarHeight+4:0),this.aviaUi.active&&Number.isFinite(this.idleDelay)&&this.activeTimeout()):this.pendingActive=!0}activeTimeout(){clearTimeout(this.idleTimeout),this.idleTimeout=setTimeout(()=>{this.aviaUi.settings.active?this.activeTimeout():this.setActive(!1)},this.idleDelay)}setAccIndicator(e,t){const i={},{AccessibilityAction:n}=this.avia;switch(e){case n.INCREASE_VOLUME:case n.DECREASE_VOLUME:case n.TOGGLE_MUTE:i.volumeKey=!0,this.accVolUpdater({volumeKey:!1}),this.player.muted||(this.aviaUi.unmuteCtaVisible=!1);break;case n.SEEK_FORWARD:case n.SEEK_BACK:i.seekForward=e===n.SEEK_FORWARD,i.seekBack=e===n.SEEK_BACK,i.seekTime=(null==t?void 0:t.position)||0,this.accSeekUpdater({seekForward:!1,seekBack:!1,seekTime:null})}this.setAccIndicatorState(i)}setAccIndicatorState(e){this.aviaUi.accIndicatorState=Object.assign(Object.assign({},this.aviaUi.accIndicatorState),e)}setStateForContentStart(e,t){this.cancelPoster(!1),this.setControlMode(_e.CONTENT),this.setLiveState(e,t);const i=[Pe.MUTE,Pe.PLAY];!0!==this.options.disableFullscreen&&i.push(Pe.FULLSCREEN),this.enableControls(i,!0),this.aviaUi.muted=this.player.muted,this.setSeekDisabled(!1),this.setStateForPlaybackStart(),this.aviaUi.volume=this.player.volume,this.enableSettingsButton()}setStateForAdBreakStart(){const e=[Pe.MUTE,Pe.PLAY];!this.services.playerOptions.useNativeFullscreen||this.services.system.hasFullscreenApi&&!0!==this.options.disableFullscreen?e.push(Pe.FULLSCREEN):this.enableControls([Pe.FULLSCREEN],!1),this.cancelPoster(!1),this.setControlMode(_e.AD),this.enableControls(e,!0),this.aviaUi.playing=!0,this.aviaUi.muted=this.player.muted,this.setStateForPlaybackStart()}setStateForPlaybackStart(){this.options.useUnmuteCta&&!this.playbackStarted&&this.player.muted&&(this.aviaUi.unmuteCtaVisible=!0),this.playbackStarted=!0,this.setPlayState(),this.pendingActive&&(this.pendingActive=!1,this.setActiveState(this.avia.ActiveState.ACTIVE))}setPosterState(e=this.services.playerOptions.autoplay===this.avia.Autoplay.NONE){var t;this.aviaUi.posterImageUrl=(null===(t=this.player.resource)||void 0===t?void 0:t.location.posterImageUrl)||this.options.posterImageUrl,this.aviaUi.posterActive=e}cancelPoster(e){this.aviaUi.posterActive=!1,e&&this.services.event.dispatchPluginEvent({id:this.id,type:xe.POSTER_PLAY})}setIdleState(){this.setControlMode(_e.NONE),this.aviaUi.unmuteCtaVisible=!1;const e=[Pe.MUTE,Pe.PLAY,Pe.TEXT];!0!==this.options.disableFullscreen&&e.push(Pe.FULLSCREEN),this.enableControls(e,!1),this.aviaUi.active=!1,this.playbackStarted=!1}setLiveState(e,t){const i=this.player.isPlayingLive;this.aviaUi.isLiveLinear=e,this.aviaUi.isDvr=t,this.aviaUi.live=e||t&&i,this.aviaUi.pausable=this.player.pausable,t&&(this.aviaUi.seekForwardDisabled=i)}setPlayState(){const{playbackState:e}=this.player,t=e===this.avia.PlaybackState.PLAYING,i=e===this.avia.PlaybackState.WAITING,n=e===this.avia.PlaybackState.PAUSED;this.aviaUi.playing=!(!i&&!t),this.aviaUi.playDisabled=!t&&!n,this.aviaUi.waiting=i,this.aviaUi.deviceMode===Le.TV&&n&&this.setActive(!0)}respondToSizeChange(){const e=this.aviaUi.controlMode;e!==_e.CONTENT&&e!==_e.COMPACT||(this.aviaUi.controlMode=this.getContentControlMode()),this.aviaUi.playerDimensions=this.player.dimensions}getContentControlMode(){const{width:e}=this.player.dimensions;return e>(this.options.compactViewBreakpoint||this.defaultCompactViewBreakpoint)?_e.CONTENT:_e.COMPACT}enableSettingsButton(){const e=this.player,t=e.textTrack,i=e.audioTrack,n=e.qualities.length>1;this.aviaUi.settingsDisabled=!(t||i||n)}setStateForSettings(e=this.settingsEngaged){const t=this.player;this.services.system.browser===this.avia.Browser.FIREFOX&&e&&this.aviaUi.classList.add(Ie.SETTINGS_NUDGE_LEFT),this.aviaUi.settings={active:e,textTrack:t.textTrack,textTracks:t.textTracks,audioTrack:t.audioTrack,audioTracks:t.audioTracks,quality:t.quality,qualities:t.qualities,qualityAuto:t.autoQualitySwitching},this.settingsEngaged=e,this.pauseOnSettings(e)}pauseOnSettings(e){if(this.options.pauseOnSettings){const t=this.player.playbackState===this.avia.PlaybackState.PLAYING;e&&t&&(this.player.pause(),this.playPendingAfterSettings=!0),!e&&this.playPendingAfterSettings&&(this.playPendingAfterSettings=!1,this.player.play())}}enableControls(e,t){const i=Array.isArray(e)?e:[e],n=this.aviaUi;i.forEach(e=>n[e+"Disabled"]=!t)}setSeekDisabled(e){this.aviaUi.seekDisabled=e,this.aviaUi.seekBackDisabled=e,this.aviaUi.seekForwardDisabled=e}setAdPosition(e,t){this.aviaUi.adPlayheadPosition=e/t}setTimeAndPosition(){if(this.aviaUi.waiting&&!this.player.video.paused)return;const e=this.player.contentTime,t=this.player.contentDuration;this.aviaUi.timeDisplayValue=this.getTimeDisplayValue(e,t),this.aviaUi.currentTimeSeconds=e,this.aviaUi.durationSeconds=t,this.aviaUi.playheadPosition=e/t}setSegmentBreakPositions(e){const t=this.player.contentDuration;this.aviaUi.segmentBreakPositions=e.filter(e=>e>0&&e!==t).join(",")}selectLanguage(e){var t,i;const n=e.trackType,r=e.trackId;if("text"===n){const e=null===(t=this.player.textTracks)||void 0===t?void 0:t.find(e=>e.id===r);e&&(this.player.textTrack=e)}else if("audio"===n){const e=null===(i=this.player.audioTracks)||void 0===i?void 0:i.find(e=>e.id===r);e&&(this.player.audioTrack=e)}}selectQuality(e){const{index:t}=e;if(-1===t)return void(this.player.autoQualitySwitching=!0);const i=this.player.qualities.find(e=>e.index===t),n=null==i?void 0:i.bitrate;n&&(this.player.bitrate=n)}getTimeDisplayValue(e,t){return t>86400?"":`${Ve(e)} / ${Ve(t)}`}get controlBarHeight(){if(null==this.controlBarHeight_){const e=this.aviaUi.querySelector("avia-control-bar");this.controlBarHeight_=e.getBoundingClientRect().height}return this.controlBarHeight_}createUi(){var e;return this.applyTheme(null===(e=this.options)||void 0===e?void 0:e.theme),customElements.whenDefined(this.rootElement).then(()=>{this.initializeState()})}getContainer(){var e;let t=this.options.container;return t&&(t=document.querySelector(t)),t||(null===(e=this.services)||void 0===e?void 0:e.dom.main)}initializeState(){var e,t,i;const{aviaUi:n,options:r,services:a}=this;n.accIndicatorState={displayTime:this.accIndicatorDisplayTime,volumeKey:!1,muted:!1,seekForward:!1,seekBack:!1,seekTime:null},n.qualityLabel=r.qualityLabel,n.deviceMode=this.calculateDeviceMode(),n.isIosNative=n.deviceMode===Le.MOBILE&&!a.system.hasFullscreenApi&&a.playerOptions.useNativeFullscreen,n.linkMuteAndVolume=!1!==r.linkMuteAndVolume,(null===(e=this.options)||void 0===e?void 0:e.activeMode)?this.activeMode=this.options.activeMode:n.deviceMode===Le.TV&&(this.active=!0,this.idleDelay=this.options.idleDelay||this.TV_MODE_IDLE_DELAY,this.player.disableKeyCommands(!0),this.log("AviaUI is in TV Mode")),(null===(t=this.options)||void 0===t?void 0:t.previewTimeTransform)&&(this.previewTimeTransform=null===(i=this.options)||void 0===i?void 0:i.previewTimeTransform),n.isTouch="ontouchstart"in document.documentElement,n.initialized=!0}setLocalizationData(e){const t=Object.values(Ne).reduce((t,i)=>(t[i]=this.services.localization.localize(i,e),t),{});this.aviaUi.localeData=t}calculateDeviceMode(){const{deviceMode:e}=this.options;if(e&&e!==Le.AUTO)return e;const{system:t}=this.services;return t.isTv||t.isConsole||t.isEmbedded||t.isChromecast?Le.TV:t.isMobile?Le.MOBILE:Le.DESKTOP}getEventInterests(){const{PlayerEvent:e}=this.avia;return[e.CLOCK,e.READY,e.AUTOPLAY_BLOCKED,e.RESOURCE_START,e.AD_CUEPOINTS_AVAILABLE,e.AD_SEGMENT_START,e.AD_START,e.AD_BREAK_START,e.AD_PROGRESS,e.AD_SEGMENT_END,e.AD_BREAK_COMPLETE,e.CONTENT_START,e.CONTENT_SEGMENT_START,e.CONTENT_SEGMENT_END,e.CONTENT_PLAYING,e.AD_PAUSED,e.CONTENT_PAUSED,e.AD_PLAYING,e.STREAM_TYPE_CHANGE,e.CONTENT_PROGRESS,e.FULLSCREEN_CHANGE,e.TEXT_TRACK_ENABLED_CHANGE,e.LANGUAGE_CHANGE,e.MUTE_CHANGE,e.VOLUME_CHANGE,e.HOTKEY_ACTION,e.ACTIVE_STATE_CHANGE,e.PRESENTATION_SIZE_CHANGE,e.AUDIO_TRACK_CHANGE,e.AUDIO_TRACKS_CHANGE,e.QUALITY_CHANGE,e.QUALITIES_CHANGE,e.TEXT_TRACK_CHANGE,e.TEXT_TRACKS_CHANGE,e.RESOURCE_END,e.PLAYBACK_STATE_CHANGE]}async initialize(){this.services.localization.registerLocalizationData(ct),await this.createUi()}applyTheme(e={}){const t=this.getContainer(),{html:i,cssVars:n}=e;let r,a=t.querySelector(this.rootElement);if(i&&a&&((r=t.removeChild(a)).removeEventListener(Ge.ACTION,this.onUiEvent),a=null,this.aviaUi=null),!a){const e=i?function(e){try{const t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.children)}catch(t){throw new Error("Could not create element from string: "+e)}}(i):[document.createElement(this.rootElement)];if(!(a=e.find(e=>e.nodeName.toLowerCase()===this.rootElement)))throw new Error("Avia UI theme HTML must contain the root element "+this.rootElement);e.forEach(e=>t.appendChild(e)),r&&Object.keys(Object.getPrototypeOf(r)).forEach(e=>{"function"!=typeof r[e]&&(a[e]=r[e])})}this.aviaUi||(this.aviaUi=a,this.aviaUi.addEventListener(Ge.ACTION,this.onUiEvent),this.focusManager=new ut(this.aviaUi),window.fm=this.focusManager),n&&function(e){const{style:t}=document.documentElement;Object.keys(e).forEach(i=>t.setProperty(i,e[i]))}(n)}}const pt=dt,gt=ft,yt=ht;var mt=function(e,t,i){void 0===i&&(i=!0);var n="Function"===e.constructor.name?e.prototype:e,r=n.componentWillLoad;n.componentWillLoad=function(){var e,n=this,a=T(this),o={promise:new Promise(function(t){e=t}),resolve:e},s=new CustomEvent("openWormhole",{bubbles:!0,composed:!0,detail:{consumer:this,fields:t,updater:function(e,t){(e in a?a:n)[e]=t},onOpen:o}});a.dispatchEvent(s);var l=function(){if(r)return r.call(n)};return i?o.promise.then(function(){return l()}):l()}},At=new Map,kt=function(e,t){var i=e.fields,n=e.updater;i.forEach(function(e){n(e,t[e])})},bt=function(e,t){var i=e.state,n=c;if(At.has(n)){var r=At.get(n);r.state=i,r.wormholes.forEach(function(e){kt(e,i)})}return t};const Et=class extends pe{constructor(){super(),this.__registerHost(),this.adPlayheadPosition=0,this.isLiveLinear=!1}adPlayheadPositionHandler(e){!this.pbar||null==e||isNaN(e)||e<0||(this.pbar.style.width=100*e+"%")}render(){return g("div",{class:"avia-ad-prog-bar",ref:e=>this.pbar=e})}static get watchers(){return{adPlayheadPosition:["adPlayheadPositionHandler"]}}static get style(){return"avia-ad-progress-bar{display:block;position:absolute;background:var(--avia-ad-progress-track-color);position:absolute;height:3px;bottom:0;left:0;right:0;user-select:none}.avia-ad-prog-bar{height:3px;user-select:none;background-color:var(--avia-ad-progress-color);width:0%}"}};var Tt;mt(Et,["adPlayheadPosition","isLiveLinear"]),function(e){e[e.ARROW_LEFT=37]="ARROW_LEFT",e[e.ARROW_RIGHT=39]="ARROW_RIGHT",e[e.ARROW_UP=38]="ARROW_UP",e[e.ARROW_DOWN=40]="ARROW_DOWN",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.ENTER=13]="ENTER",e[e.SPACE=32]="SPACE"}(Tt||(Tt={}));const St=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.TAP_THRESHOLD=300,this.isTouch="ontouchstart"in document.documentElement,this.locId=void 0,this.toggled=!1,this.compact=!1,this.icon=!1,this.variant=!1,this.actions="",this.ids="",this.disabled=!1,this.localeData=void 0,this.focused=!1}onClick(e){this.isTouch||this.disabled?Ke(e):this.execAction()}onTouchStart(e){Ke(e),this.touchStartStamp=e.timeStamp}onTouchEnd(e){!this.disabled&&this.touchStartStamp&&e.timeStamp-this.touchStartStamp<=this.TAP_THRESHOLD&&(this.touchStartStamp=null,this.execAction())}onFocus(){this.element.classList.contains("focus-visible")&&(this.focused=!0)}onBlur(){this.focused&&(this.focused=!1)}onKeyDown(e){switch(e.keyCode){case Tt.ENTER:case Tt.SPACE:return this.element.click(),void Ke(e)}}getCsvValue(e,t=+this.toggled){return De(e)[t]}execAction(){const e=this.getCsvValue(this.actions);e&&this.actionEvent.emit({action:e})}render(){var e;const t=this.getCsvValue(this.ids)||this.locId,i=null===(e=this.localeData)||void 0===e?void 0:e[t],n={"aria-label":i};return!this.focused&&i&&(n.title=i),g(m,Object.assign({disabled:this.disabled,tabIndex:0},n))}get element(){return this}static get style(){return"avia-button{display:inline-block;background-color:transparent;height:var(--avia-control-bar-btn-height);width:var(--avia-control-bar-btn-width);color:var(--avia-control-bar-btn-text-color);border:var(--avia-control-bar-btn-border);border-width:var(--avia-control-bar-btn-border-width);border-radius:var(--avia-control-bar-btn-border-radius);outline:var(--avia-control-bar-btn-border-outline);cursor:var(--avia-control-bar-btn-border-cursor);pointer-events:all}avia-button:hover{color:var(--avia-control-bar-btn-text-color-hover)}avia-button[disabled]{cursor:var(--avia-control-bar-btn-disabled-cursor);opacity:var(--avia-control-bar-btn-disabled-opacity);pointer-events:none}avia-button[icon]{padding:0;margin:0;background-position:center;background-size:var(--avia-icon-btn-bg-size);background-repeat:no-repeat;user-select:none}avia-button[compact]{width:var(--avia-compact-button-width);height:var(--avia-compact-button-height);border-radius:var(--avia-compact-button-border-radius);background-color:var(--avia-compact-button-background-color)}"}};mt(St,["localeData"]);const Ct=class extends pe{constructor(){super(),this.__registerHost(),this.active=!1,this.controlMode=_e.NONE,this.deviceMode=Le.DESKTOP,this.isDvr=!1,this.isLiveLinear=!1,this.isIosNative=!1,this.settings=null}async getHeight(){return this.element.getBoundingClientRect().height}render(){const e=this.deviceMode===Le.DESKTOP,t=this.deviceMode===Le.TV,i=this.deviceMode===Le.DESKTOP||this.deviceMode===Le.MOBILE&&!this.isIosNative;return g(m,{role:"menu",class:this.isLiveLinear?"avia-live-linear":""},g("slot",{name:"top"},t&&g("avia-control-group",{orientation:st.HORIZONTAL,class:"avia-control-group-top"},g("div",{class:"avia-control-group-top-left",role:"group"},this.isLiveLinear&&g("avia-live-control",null)),g("div",{class:"avia-control-group-top-right",role:"group"},g("avia-text-toggle",null),g("avia-settings-toggle",null))),this.isLiveLinear?"":g("avia-progress-bar",null)),g("avia-control-group",{orientation:st.HORIZONTAL,class:"avia-control-container"},g("div",{class:"avia-control-group-left",role:"group"},g("slot",{name:"left"},!t&&g("avia-play-toggle",null),!t&&g("avia-mute-toggle",null),e&&g("avia-volume-slider",null),t&&!this.isLiveLinear&&g("avia-current-time",null))),g("div",{class:"avia-control-group-center",role:"group"},g("slot",{name:"center"})),g("div",{class:"avia-control-group-right",role:"group"},g("slot",{name:"right"},g("div",{class:"avia-control-group-right"},i&&g("avia-time-display",null),(!t&&this.isLiveLinear||this.isDvr)&&g("avia-live-control",null),i&&g(ee,null,g("avia-text-toggle",null),!this.isIosNative&&g("avia-settings-toggle",null),!this.isIosNative&&g("avia-fullscreen-toggle",null)),t&&!this.isLiveLinear&&g("avia-time-remaining",null))))),g("slot",{name:"bottom"}))}get element(){return this}static get style(){return'avia-control-bar{box-sizing:border-box;width:100%;padding:0 var(--avia-default-spacing);background:var(--avia-control-bar-bg);display:none;transition:var(--avia-active-transition-in);padding-bottom:auto;pointer-events:auto}avia-ui[control-mode="content"] avia-control-bar{display:block}avia-ui:not([active]) avia-control-bar{opacity:0;transition:var(--avia-active-transition-out)}avia-control-bar.avia-live-linear{padding-top:var(--avia-live-padding-top)}.avia-control-container{display:flex;justify-content:space-between;align-items:center;height:var(--avia-control-bar-btn-height);flex-wrap:nowrap}avia-control-bar.avia-layout-c-30 .avia-control-group-left,avia-control-bar.avia-layout-c-30 .avia-control-group-right{width:35%}avia-control-bar.avia-layout-c-30 .avia-control-group-center{width:30%}avia-control-bar.avia-layout-c-40 .avia-control-group-left,avia-control-bar.avia-layout-c-40 .avia-control-group-right{width:30%}avia-control-bar.avia-layout-c-40 .avia-control-group-center{width:40%}avia-control-bar.avia-layout-c-50 .avia-control-group-left,avia-control-bar.avia-layout-c-50 .avia-control-group-right{width:25%}avia-control-bar.avia-layout-c-50 .avia-control-group-center{width:50%}avia-control-bar.avia-layout-c-60 .avia-control-group-left,avia-control-bar.avia-layout-c-60 .avia-control-group-right{width:20%}avia-control-bar.avia-layout-c-60 .avia-control-group-center{width:60%}avia-control-bar.avia-layout-c-70 .avia-control-group-left,avia-control-bar.avia-layout-c-70 .avia-control-group-right{width:15%}avia-control-bar.avia-layout-c-70 .avia-control-group-center{width:70%}avia-control-bar[avia-layout=default] .avia-control-group-left,avia-control-bar[avia-layout=default] .avia-control-group-right{display:flex;flex-basis:auto}avia-control-bar[avia-layout=default] .avia-control-group-left{flex-grow:1}.avia-control-group-left,.avia-control-group-right,.avia-control-group-center,.avia-control-group-left>*,.avia-control-group-right>*,.avia-control-group-center>*{display:flex;flex-basis:auto;align-items:center}.avia-control-group-center>*{flex-grow:1;justify-content:space-evenly}.avia-control-group-right,.avia-control-group-right>*{justify-content:flex-end}.avia-control-group-left>*{justify-content:flex-start}.avia-control-group-left>*>*{margin-right:var(--avia-half-spacing)}.avia-control-group-right>*>*{margin-left:var(--avia-half-spacing)}avia-control-bar>avia-progress-seek:empty{display:none}.avia-control-group-left>*:empty,.avia-control-group-right>*:empty,.avia-control-group-center>*:empty{display:none}.avia-control-group-top{display:flex}.avia-control-group-top-left{flex-grow:1}'}};mt(Ct,["active","controlMode","deviceMode","isDvr","isIosNative","isLiveLinear","settings"]);const xt=class extends pe{constructor(){super(),this.__registerHost(),this.currentTimeSeconds=void 0,this.localeData=void 0,this.isLiveLinear=!1,this.isDvr=!1}render(){if(this.isLiveLinear||this.isDvr)return"";const e=this.currentTimeSeconds||0,t=this.localeData?Be(e,this.localeData):"";return g("div",{class:"avia-current-time","aria-label":t,title:t},Ve(e))}static get style(){return":host{display:inline-block}.avia-current-time{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-current-time{text-align:right}"}};mt(xt,["currentTimeSeconds","localeData","isLiveLinear","isDvr"]);const wt=class extends pe{constructor(){super(),this.__registerHost(),this.durationSeconds=void 0,this.localeData=void 0,this.isLiveLinear=!1,this.isDvr=!1}render(){if(this.isLiveLinear||this.isDvr)return"";const e=this.durationSeconds||0,t=this.localeData?Be(e,this.localeData):"";return g("div",{class:"avia-duration","aria-label":t,title:t},Ve(this.durationSeconds||0))}static get style(){return":host{display:inline-block}.avia-duration{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-duration{text-align:right}"}};mt(wt,["durationSeconds","localeData","isLiveLinear","isDvr"]);const Pt=class extends pe{constructor(){super(),this.__registerHost(),this.fullscreen=!1,this.fullscreenDisabled=!0,this.compact=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("avia-button",{ref:e=>this.focusElement=e,ids:`${Ne.FULL_SCREEN_ENTER}, ${Ne.FULL_SCREEN_EXIT}`,actions:`${xe.ENTER_FULLSCREEN}, ${xe.EXIT_FULLSCREEN}`,disabled:this.fullscreenDisabled,toggled:this.fullscreen,compact:this.compact,icon:!0})}static get style(){return"avia-fullscreen-toggle{display:inline-block}avia-fullscreen-toggle avia-button{background-image:var(--avia-fs-icon)}avia-fullscreen-toggle avia-button:hover{background-image:var(--avia-fs-icon-hover)}avia-fullscreen-toggle avia-button[toggled]{background-image:var(--avia-fs-exit-icon)}avia-fullscreen-toggle avia-button[toggled]:hover{background-image:var(--avia-fs-exit-icon-hover)}"}};mt(Pt,["fullscreen","fullscreenDisabled"]);const _t=class extends pe{constructor(){super(),this.__registerHost(),this.isLiveLinear=!1,this.isDvr=!1,this.live=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){if(!this.isLiveLinear&&!this.isDvr)return;const e=this.live||this.isLiveLinear,t=e?Ne.LIVE:Ne.GO_LIVE;return g("avia-button",{ref:e=>this.focusElement=e,actions:`${xe.NONE}, ${xe.GO_TO_LIVE}`,toggled:!this.live,disabled:e},g("avia-text",{"loc-id":t}))}static get style(){return"avia-live-control{display:inline-block;margin-right:var(--avia-default-spacing)}avia-live-control avia-button{width:auto;height:auto !important;font-size:0.9em;text-align:right;overflow:hidden}avia-live-control avia-button[disabled]{opacity:1;cursor:default}avia-live-control avia-button::before,avia-live-control avia-button[disabled]::before{content:'• ';color:red;font-size:0.9em}"}};mt(_t,["isLiveLinear","live","isDvr"]);const It=class extends pe{constructor(){super(),this.__registerHost(),this.hasSubmenu=!1,this.locId=void 0,this.titlebar=!1,this.localeData=void 0,this.options=[]}onAction(e){if(e.detail.action!==xe.LIST_ITEM_SELECT)return;const{key:t,value:i}=e.detail.value,n=this.element.querySelector(`[data-key="${t}"][data-value="${i}"]`);n&&this.selectListItem(n)}onKeydown(e){var t;switch(e.keyCode){case Tt.ARROW_RIGHT:if(!this.hasSubmenu)return;null===(t=document.activeElement)||void 0===t||t.click()}}selectListItem(e){const t=this.element.querySelector("[selected]");t&&(t.selected=!1,t.disabled=!1),e.selected=!0}createDataAttributes(e){return Object.entries(e).reduce((e,t)=>(e["data-"+t[0]]=t[1],e),{})}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){var e;const t=null===(e=this.localeData)||void 0===e?void 0:e[this.locId],i=this.hasSubmenu?xe.MENU_ITEM_SELECT:xe.LIST_ITEM_SELECT;return g(m,{"aria-label":t,role:"menu"},this.titlebar&&g("div",{class:"avia-menu-titlebar"},t),g("div",{class:"avia-menu-content"},this.options.map((e,t)=>{const{value:n}=e,r=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,["value"]);return g("avia-menu-item",Object.assign({key:t,ref:e=>{0===t&&(this.focusElement=e)}},r,{hasSubmenu:this.hasSubmenu,action:i},this.createDataAttributes(n)))})))}get element(){return this}static get style(){return"avia-menu{display:flex;flex-direction:column;font-size:0.95em;width:100%}.avia-menu-titlebar{padding-left:1em;color:var(--avia-accent-color);font-size:0.9em;font-weight:bold;height:2em;line-height:2em;background-color:black;border-bottom:1px solid #444}.avia-menu-content{scrollbar-width:thin;scrollbar-color:var(--avia-menu-text-color) transparent}.avia-menu-content::-webkit-scrollbar{width:8px;height:0}.avia-menu-content::-webkit-scrollbar-track{background-color:transparent}.avia-menu-content::-webkit-scrollbar-thumb{background-color:var(--avia-menu-text-color);border-radius:20px}.avia-menu-content::-webkit-scrollbar-thumb:hover{background-color:var(--avia-control-bar-btn-text-color-hover)}.avia-menu-content::-webkit-scrollbar-corner{background-color:transparent}"}};mt(It,["localeData"]);const Lt=class extends pe{constructor(){super(),this.__registerHost(),this.muted=!1,this.muteDisabled=!0,this.compact=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("avia-button",{ref:e=>this.focusElement=e,ids:`${Ne.MUTE}, ${Ne.UNMUTE}`,actions:`${xe.MUTE}, ${xe.UNMUTE}`,toggled:this.muted,disabled:this.muteDisabled,compact:this.compact,icon:!0})}static get style(){return"avia-mute-toggle{display:inline-block}avia-mute-toggle avia-button{background-image:var(--avia-unmuted-icon)}avia-mute-toggle avia-button:hover{background-image:var(--avia-unmuted-icon-hover)}avia-mute-toggle avia-button[toggled]{background-image:var(--avia-mute-icon)}avia-mute-toggle avia-button[toggled]:hover{background-image:var(--avia-mute-icon-hover)}"}};mt(Lt,["muted","muteDisabled"]);const Nt=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.titlebar=!0,this.back=!1,this.locId=void 0,this.localeData=void 0}emit(e){this.actionEvent.emit({action:e,value:this.element.dataset})}render(){var e;const t=null===(e=this.localeData)||void 0===e?void 0:e[this.locId];return g("avia-control-group",{orientation:st.VERTICAL},this.titlebar&&g("avia-control-group",{class:"avia-panel-titlebar",orientation:st.HORIZONTAL},this.back&&g("avia-button",{"loc-id":Ne.BACK,class:"avia-panel-back-button",disabled:!1,onClick:()=>this.emit(xe.PANEL_BACK),icon:!0}),g("span",null,t),g("span",{class:"avia-spacer"}),g("avia-button",{"loc-id":Ne.CLOSE,class:"avia-panel-close-button",disabled:!1,onClick:()=>this.emit(xe.PANEL_CLOSE),icon:!0})),g("div",{class:"avia-panel-content"},g("slot",null)))}get element(){return this}static get style(){return"avia-panel{width:100%;height:100%}.avia-panel-titlebar{padding:0.5em 0.25em 0.5em 0.75em;color:var(--avia-accent-color);background-color:black;border-bottom:1px solid #444;display:flex;align-items:center;justify-content:center;font-weight:bold}.avia-panel-close-button{width:1.75em;height:2em;background-image:var(--avia-x-symbol);background-repeat:no-repeat;padding:0px}.avia-panel-back-button{width:1.75em;height:1.75em;background-image:var(--avia-chevron-right);background-repeat:no-repeat;background-size:47.5% 47.5%;transform:rotate(180deg);margin-right:1em}.avia-panel-content{display:flex;flex-direction:row;overflow:hidden}.avia-panel-content>div{width:180px;color:var(--avia-menu-text-color)}.avia-panel-content>div:first-child{border-right:1px solid #888}.avia-panel-content>div:only-child{border-right:none}"}};mt(Nt,["localeData"]);const Mt=class extends pe{constructor(){super(),this.__registerHost(),this.started=!1,this.playing=!1,this.waiting=!1}render(){if(this.started&&!this.waiting&&!this.playing)return g("avia-overlay",{centered:!0},g("div",null));this.started=!0}static get style(){return":root{--avia-pause-large-width:66px;--avia-pause-large-height:66px;--avia-pause-large-border-radius:calc(var(--avia-pause-large-width) / 2);--avia-pause-large-bg-image:var(--avia-pause-icon);--avia-pause-large-bg-position:50%;--avia-pause-large-bg-color:rgba(64, 64, 64, 0.5);--avia-pause-large-bg-size:calc(var(--avia-pause-large-width) / 2) calc(var(--avia-pause-large-height) / 2)}avia-pause-overlay div{width:var(--avia-pause-large-width);height:var(--avia-pause-large-height);background-image:var(--avia-pause-large-bg-image);background-repeat:no-repeat;background-position-x:calc(var(--avia-pause-large-bg-position) + 6%);background-position-y:var(--avia-pause-large-bg-position);background-size:var(--avia-pause-large-bg-size)}"}};mt(Mt,["playing","waiting"]);const Rt=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.playing=!1,this.controlMode=_e.NONE,this.playDisabled=!0,this.pausable=!0,this.isTouch=!1}onClick(){const e=this.playing?xe.PAUSE:xe.PLAY;this.actionEvent.emit({action:e})}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const e=!this.playing;if((e||!this.isTouch)&&!this.playDisabled&&this.pausable&&this.controlMode===_e.CONTENT)return g("avia-overlay",{centered:!0},e&&g("avia-play-cta",{ref:e=>this.focusElement=e}))}static get style(){return"avia-play-overlay{background-color:var(--avia-play-overlay-bg-color)}avia-play-overlay.focus-visible avia-play-cta{box-shadow:var(--avia-focus-box-shadow-inner)}"}};mt(Rt,["playing","playDisabled","pausable","controlMode","isTouch"]);const Ot=class extends pe{constructor(){super(),this.__registerHost(),this.playing=!1,this.playDisabled=!0,this.pausable=void 0,this.compact=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const e=!this.playing,t=[Ne.PLAY,this.pausable?Ne.PAUSE:Ne.STOP],i=[xe.PLAY,this.pausable?xe.PAUSE:xe.STOP],n=e?this.pausable?Ne.PAUSE:Ne.STOP:Ne.PLAY;return g("avia-button",{ref:e=>this.focusElement=e,ids:t.join(","),actions:i.join(","),disabled:this.playDisabled,"loc-id":n,toggled:this.playing,compact:this.compact,variant:!this.pausable,icon:!0})}static get style(){return"avia-play-toggle{display:inline-block}avia-play-toggle avia-button{background-image:var(--avia-play-icon)}avia-play-toggle avia-button:hover{background-image:var(--avia-play-icon-hover)}avia-play-toggle avia-button[toggled]{background-image:var(--avia-pause-icon)}avia-play-toggle avia-button[toggled]:hover{background-image:var(--avia-pause-icon-hover)}avia-play-toggle avia-button[toggled][variant]{background-image:var(--avia-stop-icon)}avia-play-toggle avia-button[toggled][variant]:hover{background-image:var(--avia-stop-icon-hover)}"}};mt(Ot,["playing","playDisabled","pausable"]);const Dt=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.canceled=!1,this.posterActive=!1,this.posterImageUrl=void 0,this.playing=!1,this.waiting=!1}playingStateWatcher(){this.canceled=!0}waitingStateWatcher(){this.canceled=!0}handleAction(e){this.canceled=!0,this.actionEvent.emit({action:xe.POSTER_PLAY}),Ke(e)}render(){return this.canceled||!this.posterActive?"":g("avia-overlay",null,Oe(this.posterImageUrl)?"":g("img",{src:this.posterImageUrl,alt:""}),g("div",{class:""},g("slot",null)),g("avia-overlay",{centered:!0},g("avia-play-cta",null)))}static get watchers(){return{playing:["playingStateWatcher"],waiting:["waitingStateWatcher"]}}static get style(){return"avia-poster img{width:100%;height:auto}"}};mt(Dt,["posterActive","posterImageUrl","playing","waiting"]);const Bt=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.updateEvent=S(this,"update",7),this.hoverDelay=250,this.imgElement=document.createElement("img"),this.dragging=!1,this.bufferedRanges=void 0,this.currentTimeSeconds=void 0,this.durationSeconds=void 0,this.localeData=void 0,this.segmentBreakPositions=void 0,this.preview=void 0,this.increment=15,this.live=!1,this.hovering=!1,this.cursor=0,this.value=0}onCurrentTimeSeconds(){this.value=this.live?this.durationSeconds:this.currentTimeSeconds}onMouseEnter(e){clearTimeout(this.hoverTimeoutHandle),this.hoverTimeoutHandle=setTimeout(()=>{this.hovering=!0,this.onMouseMove(e)},this.hoverDelay)}onMouseLeave(){clearTimeout(this.hoverTimeoutHandle),this.hovering=!1}onMouseMove(e){if(!this.active)return;const t=this.sliderElement.getBoundingClientRect(),i=Ue(e).x-t.left,n=We(i/t.width,0,1);this.actionEvent.emit({action:xe.PREVIEW,value:{time:n*this.durationSeconds,percent:n}}),this.cursor=We(i,0,t.width)}get active(){return this.hovering||this.dragging}onChange(e){this.actionEvent.emit({action:xe.SEEK,value:e.detail.value})}onDragging(e){this.dragging=e.detail.value}hasPreview(){var e,t;return!!(null===(t=null===(e=this.preview)||void 0===e?void 0:e.thumbs)||void 0===t?void 0:t.length)}componentDidRender(){const e=this.sliderElement,t=e.offsetWidth;if(this.hasPreview()){const e=t*this.preview.thumbnailScaleFactor,i=this.imgElement,n=this.preview.thumbs.reduce((t,i)=>t?Math.abs(e-t.width)>Math.abs(e-i.width)?i:t:i,null),r=()=>{const t=this.canvasElement,r=Math.min(e/n.width,1),a=t.getContext("2d"),o=n.width*r,s=n.height*r;t.width=o,t.height=s,a.drawImage(i,n.x,n.y,n.width,n.height,0,0,o,s)};n&&(i.src!==n.url?(i.src=n.url,i.onload=r):r())}const i=this.previewElement,n=i.offsetWidth/2,r=t-n,a=this.cursor<n?n-this.cursor:this.cursor>r?r-this.cursor:0;i.style.marginLeft=a-n+"px",i.style.top=`-${i.offsetHeight+e.offsetHeight/2}px`}focus(){this.sliderElement.focus()}blur(){this.sliderElement.blur()}render(){var e;const t=this.localeData?function(e,t,i){const n=Be(e,i),r=Be(t,i);return function(e,t,i="{{",n="}}"){if(!e)return e;const r=new RegExp(`${i}((?:(?!(${i}|${n})).)+)${n}`,"g");return e.replace(r,(e,i)=>void 0!==t[i]?t[i]:e)}(i[Ne.VALUE_OF_TOTAL],{value:n,total:r})}(this.value,this.durationSeconds,this.localeData):"",i=De(this.segmentBreakPositions).map(e=>({value:parseFloat(e)}));return g("avia-slider",{ref:e=>this.sliderElement=e,"loc-id":Ne.SEEK,"aria-valuetext":t,list:i,value:this.value,max:this.durationSeconds,ranges:this.bufferedRanges,increment:this.increment,onChange:e=>this.onChange(e),onDragging:e=>this.onDragging(e)},g("div",{ref:e=>this.previewElement=e,class:"avia-progress-preview",style:{visibility:this.active?"visible":"hidden",left:this.cursor+"px"}},g("canvas",{ref:e=>this.canvasElement=e,class:"avia-progress-img",style:{display:this.hasPreview()&&this.imgElement.complete?"block":"none"}}),g("div",{ref:e=>this.textElement=e,class:"avia-progress-text"},null===(e=this.preview)||void 0===e?void 0:e.value)))}static get watchers(){return{currentTimeSeconds:["onCurrentTimeSeconds"],live:["onCurrentTimeSeconds"]}}static get style(){return":root{--avia-progress-preview-height:24px;--avia-progress-preview-width:50px;--avia-progress-preview-line-height:24px;--avia-progress-preview-top:-34px;--avia-progress-preview-bg-color:rgba(44, 44, 44, 0.7);--avia-progress-preview-color:rgb(220, 220, 220);--avia-progress-preview-font-size:13px;--avia-progress-preview-border-radius:4px}avia-progress-bar .avia-slider-range-item{background-color:var(--avia-buffered-range-background-color)}.avia-progress-preview{position:absolute;line-height:var(--avia-progress-preview-line-height);background:var(--avia-progress-preview-bg-color);color:var(--avia-progress-preview-color);font-size:var(--avia-progress-preview-font-size);text-align:center;border-radius:var(--avia-progress-preview-border-radius);user-select:none;overflow:hidden}.avia-progress-text{padding:0 0.5em 0 0.5em;white-space:nowrap}"}};mt(Bt,["bufferedRanges","currentTimeSeconds","durationSeconds","live","localeData","seekDisabled","segmentBreakPositions","preview"]);const Ut=class extends pe{constructor(){super(),this.__registerHost(),this.seekBackDisabled=!1,this.isLiveLinear=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return this.isLiveLinear?"":g("avia-button",{ref:e=>this.focusElement=e,actions:xe.SEEK_BACK,disabled:this.seekBackDisabled,"loc-id":Ne.SEEK_BACK,icon:!0})}static get style(){return"avia-seek-back-button{display:inline-block}avia-seek-back-button avia-button{background-image:var(--avia-seek-back-icon)}avia-seek-back-button avia-button:hover{background-image:var(--avia-seek-back-icon-hover)}"}};mt(Ut,["seekBackDisabled","isLiveLinear"]);const Ft=class extends pe{constructor(){super(),this.__registerHost(),this.seekForwardDisabled=!1,this.isLiveLinear=!1}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return this.isLiveLinear?"":g("avia-button",{ref:e=>this.focusElement=e,actions:xe.SEEK_FORWARD,disabled:this.seekForwardDisabled,"loc-id":Ne.SEEK_FORWARD,icon:!0})}static get style(){return"avia-seek-forward-button{display:inline-block}avia-seek-forward-button avia-button{background-image:var(--avia-seek-forward-icon)}avia-seek-forward-button avia-button:hover{background-image:var(--avia-seek-forward-icon-hover)}"}};mt(Ft,["seekForwardDisabled","isLiveLinear"]);const Vt=class extends pe{constructor(){super(),this.__registerHost(),this.durationSeconds=void 0,this.accIndicatorState=void 0}componentDidRender(){!this.debouncer&&this.accIndicatorState.displayTime>0&&(this.debouncer=Re(()=>{var e;null===(e=this.el)||void 0===e||e.classList.remove(Ie.INDICATOR_ACTIVE),this.visible=!1},this.accIndicatorState.displayTime)),this.visible&&(setTimeout(()=>this.el.classList.add(Ie.INDICATOR_ACTIVE),0),this.debouncer&&this.debouncer())}render(){const e=this.accIndicatorState;if(!e.seekForward&&!e.seekBack)return this.visible=!1,"";this.visible=!0;const t=this.accIndicatorState.seekTime,i=this.durationSeconds;let n="";if(i&&!isNaN(i)){const e=Ve(i);!isNaN(t)&&t>=0&&(n=Ve(t)+" / "+e)}return g(m,{class:e.seekForward?Ie.ACC_FWD:Ie.ACC_BACK},g("span",null,n),g("div",{class:"avia-acc-arrow"}))}get el(){return this}static get style(){return"avia-seek-indicator{position:absolute;display:inline-block;box-sizing:border-box;border-radius:var(--avia-seek-indicator-border-radius);background-color:var(--avia-seek-indicator-background-color);color:var(--avia-seek-indicator-color);height:var(--avia-seek-indicator-height);font-size:var(--avia-seek-indicator-font-size);font-family:var(--avia-seek-indicator-font-family);line-height:var(--avia-seek-indicator-line-height);top:calc(50% - 24px);opacity:0;transition-property:opacity;transition-duration:300ms;transition-timing-function:ease-in}avia-seek-indicator.avia-indicator-active{opacity:1}avia-seek-indicator:empty{opacity:0}.avia-acc-fwd{right:12px;padding-left:48px;padding-right:12px;text-align:right}.avia-acc-back{left:12px;padding-right:48px;padding-left:12px}avia-seek-indicator .avia-acc-arrow{width:24px;height:18px;position:absolute;top:calc(50% - 9px);background-image:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2017.81%2024%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22Layer_2%22%20data-name%3D%22Layer%202%22%3E%3Cg%20id%3D%22Layer_2-2%22%20data-name%3D%22Layer%202%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M0%2C6.55V17.79a.54.54%2C0%2C0%2C0%2C.54.54l5.15-.08a.54.54%2C0%2C0%2C1%2C.54.54v4.67a.54.54%2C0%2C0%2C0%2C.92.38l10.51-11.2a.56.56%2C0%2C0%2C0%2C0-.76L7.25.17a.54.54%2C0%2C0%2C0-.93.37V5.39a.54.54%2C0%2C0%2C1-.54.54L.54%2C6A.54.54%2C0%2C0%2C0%2C0%2C6.55Z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');background-repeat:no-repeat;background-size:24px 18px}.avia-acc-fwd .avia-acc-arrow{left:12px}.avia-acc-back .avia-acc-arrow{transform:rotate(180deg);right:12px}"}};mt(Vt,["durationSeconds","accIndicatorState"]);const Ht=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.settings=null,this.localeData=null,this.controlMode=null,this.deviceMode=Le.DESKTOP,this.currentId=Ne.SETTINGS,this.menu=void 0}onMenuChange(e){clearTimeout(this.timeout),e&&(this.timeout=setTimeout(()=>{var e;null===(e=this.menu)||void 0===e||e.focus()},50))}onAction(e){switch(e.detail.action){case xe.PANEL_BACK:this.currentId=Ne.SETTINGS;break;case xe.PANEL_CLOSE:this.close();break;case xe.MENU_ITEM_SELECT:this.currentId=e.detail.value.action}}onKeyDown(e){var t;if(null===(t=this.settings)||void 0===t?void 0:t.active)switch(e.key){case"Escape":this.close()}}async close(){this.actionEvent.emit({action:xe.SETTINGS_OFF})}disconnectedCallback(){clearTimeout(this.timeout)}render(){var e,t;if((null===(e=this.settings)||void 0===e?void 0:e.active)&&this.localeData){if(this.controlMode===_e.CONTENT||!(null===(t=this.settings)||void 0===t?void 0:t.active))return this.deviceMode===Le.TV?g("avia-settings-language",{ref:e=>this.menu=e}):g("avia-panel",{locId:this.currentId,back:this.currentId!==Ne.SETTINGS},this.getMenu());this.close()}}getMenu(){var e;switch(this.currentId){case Ne.SETTINGS:const t=[{label:this.localeData[Ne.LANGUAGE],value:{action:Ne.LANGUAGE},disabled:!(this.settings.textTrack||this.settings.audioTrack)},{label:this.localeData[Ne.QUALITY],value:{action:Ne.QUALITY},disabled:!((null===(e=this.settings.qualities)||void 0===e?void 0:e.length)>0)}];return g("avia-menu",{ref:e=>this.menu=e,locId:Ne.SETTINGS,key:Ne.SETTINGS,options:t,titlebar:!1,hasSubmenu:!0});case Ne.LANGUAGE:return g("avia-settings-language",{ref:e=>this.menu=e,key:Ne.LANGUAGE});case Ne.QUALITY:return g("avia-settings-quality",{key:Ne.QUALITY,ref:e=>this.menu=e})}}static get watchers(){return{menu:["onMenuChange"]}}static get style(){return":root{--avia-chevron-right:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22white%22%3E%3Cpath%20id%3D%22Arrow_2_1%22%20d%3D%22M0%2C24L14.4%2C11.556%2C0%2C0%2C6.74%2C0%2C24%2C11.556%2C6.74%2C24Z%22%2F%3E%3C%2Fsvg%3E');--avia-x-symbol:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2012%2012%22%20width%3D%2212%22%20height%3D%2212%22%3E%3Cstyle%3Etspan%20%7B%20white-space%3Apre%20%7D%3C%2Fstyle%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M0.07%202.19L2.26%200L5.91%203.65L9.56%200L11.75%202.19L8.1%205.84L11.75%209.49L9.56%2011.68L5.91%208.03L2.26%2011.68L0.07%209.49L3.72%205.84L0.07%202.19Z%22%20%2F%3E%3C%2Fsvg%3E');--avia-menu-text-color:var(--avia-text-color);--avia-menu-text-size:var(--avia-text-size);--avia-menu-text-color-hover:var(--avia-text-color-hover)}avia-settings{display:flex;align-self:flex-end;pointer-events:none;min-width:180px;height:auto;background-color:rgba(0, 0, 0, 0.65);flex-direction:column;max-height:calc(100% - 1em - var(--avia-control-bar-height));border-radius:0.25em;overflow:hidden;position:absolute;bottom:64px;right:var(--avia-default-spacing)}avia-settings>*{pointer-events:auto}.avia-settings-nudge-left avia-settings{right:calc(var(--avia-default-spacing) + 48px)}[device-mode=tv] avia-settings{bottom:118px}"}};mt(Ht,["controlMode","deviceMode","localeData","settings"]);const $t=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.localeData=void 0,this.settings=void 0}onAction(e){switch(e.detail.action){case xe.LIST_ITEM_SELECT:const{key:t,value:i}=e.detail.value;this.actionEvent.emit({action:xe.LANGUAGE_SELECT,value:{trackType:t,trackId:i}})}}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const{audioTrack:e,audioTracks:t}=this.settings,i=null==e?void 0:e.index,n=t.map(e=>({selected:e.index===i,disabled:1===t.length,label:ze(e.language)||this.localeData[Ne.UNKNOWN],value:{key:"audio",value:e.id,description:"description"===e.type}}));if(null==n?void 0:n.length)return g("avia-menu",{ref:e=>this.focusElement=e,locId:Ne.AUDIO,options:n,titlebar:!0})}static get style(){return""}};mt($t,["localeData","settings"]);const Wt=class extends pe{constructor(){super(),this.__registerHost(),this.localeData=void 0,this.settings=void 0}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g(m,{role:"menubar"},g("avia-settings-text",{ref:e=>this.focusElement=e}),g("avia-settings-audio",null))}static get style(){return"avia-settings-language{display:flex;flex-direction:row}avia-menu{min-width:180px}"}};mt(Wt,["localeData","settings"]);const Kt=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.localeData=void 0,this.settings=void 0,this.qualityLabel=0}onAction(e){switch(e.detail.action){case xe.LIST_ITEM_SELECT:this.actionEvent.emit({action:xe.QUALITY_SELECT,value:{index:parseInt(e.detail.value.value)}})}}getQualityLabel(e){var t;if(null===(t=e.category)||void 0===t?void 0:t.length)return e.category[this.qualityLabel||0]}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const{quality:e,qualities:t,qualityAuto:i}=this.settings,n=t.reduce((e,t)=>{const i=this.getQualityLabel(t),n=e.find(e=>e.label===i);return t.enabled&&(n?t.bitrate>n.value.bitrate&&(n.value.value=t.index,n.value.bitrate=t.bitrate):e.push({label:i,value:{key:"quality",value:t.index,bitrate:t.bitrate}})),e},[]),r=this.getQualityLabel(e),a=1===n.length,o=n.map(e=>Object.assign(Object.assign({},e),{selected:a||!i&&e.label===r,disabled:a})).sort((e,t)=>t.value.bitrate-e.value.bitrate);return o.length>1&&o.unshift({selected:i,disabled:!1,label:`${this.localeData[Ne.AUTO]} (${r})`,value:{key:"quality",value:-1}}),g(m,null,g("avia-menu",{ref:e=>this.focusElement=e,locId:Ne.QUALITY,options:o,titlebar:!1}))}static get style(){return"avia-settigs-quality{display:flex;flex-direction:row}avia-menu{min-width:180px}"}};mt(Kt,["localeData","settings","qualityLabel"]);const zt=class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.localeData=void 0,this.settings=void 0}onAction(e){switch(e.detail.action){case xe.LIST_ITEM_SELECT:const{key:t,value:i}=e.detail.value;this.actionEvent.emit({action:xe.LANGUAGE_SELECT,value:{trackType:t,trackId:i}})}}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){const{textTrack:e,textTracks:t}=this.settings,i=null==e?void 0:e.id,n=t.map(e=>({selected:e.id===i,disabled:1===t.length,label:ze(e.language)||this.localeData[Ne.UNKNOWN],value:{key:"text",value:e.id}}));if(null==n?void 0:n.length)return g("avia-menu",{ref:e=>this.focusElement=e,locId:Ne.CAPTIONS,options:n,titlebar:!0})}static get style(){return""}};mt(zt,["localeData","settings"]);const jt=class extends pe{constructor(){super(),this.__registerHost(),this.settings=void 0,this.settingsDisabled=!0}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){var e;const t=!0===(null===(e=this.settings)||void 0===e?void 0:e.active);return g("avia-button",{ref:e=>this.focusElement=e,actions:`${xe.SETTINGS_ON},${xe.SETTINGS_OFF}`,disabled:this.settingsDisabled,"loc-id":Ne.SETTINGS,"aria-haspopup":"true","aria-expanded":t?"true":"false",toggled:t,icon:!0})}static get style(){return"avia-settings-toggle{display:inline-block;position:relative}avia-settings-toggle avia-button{background-image:var(--avia-settings-icon)}avia-settings-toggle avia-button:hover{background-image:var(--avia-settings-icon-hover)}"}};mt(jt,["settings","settingsDisabled"]);const Gt=class extends pe{constructor(){super(),this.__registerHost(),this.changeEvent=S(this,"change",7),this.inputEvent=S(this,"input",7),this.updateEvent=S(this,"update",7),this.draggingEvent=S(this,"dragging",7),this.dragging=!1,this.locId=void 0,this.min=0,this.max=1,this.value=1,this.ranges=[],this.list=[],this.ariaValuetext=void 0,this.increment=.1,this.localeData=void 0,this.deviceMode=void 0,this.valueInternal=this.value}onValueInternalChange(){this.update()}onValueChange(e){this.dragging||(e<this.min?this.value=this.min:e>this.max?this.value=this.max:this.valueInternal=e)}onMinChange(e){this.value=$e(this.value,0,1,e,this.max)}onMaxChange(e){this.value=$e(this.value,0,1,this.min,e)}onListChange(e){e||(this.list=[],this.update())}onMouseDown(e){var t;null===(t=this.gestureStartDebouncer)||void 0===t||t.call(this,e)}onMouseMove(e){this.dragging&&(Ke(e),this.move(e))}onMouseUp(e){this.gestureEndDebouncer(e)}onKeydown(e){const t=t=>{const i=this.value+=t;this.input(i),this.change(i),Ke(e)};switch(e.keyCode){case Tt.ARROW_RIGHT:t(this.increment);break;case Tt.ARROW_LEFT:t(-this.increment);break;case Tt.ARROW_UP:case Tt.PAGE_UP:this.deviceMode===Le.DESKTOP&&t(this.increment);break;case Tt.ARROW_DOWN:case Tt.PAGE_DOWN:this.deviceMode===Le.DESKTOP&&t(-this.increment)}}move(e){const t=this.el.getBoundingClientRect(),i=Ue(e);if(null===i.x)return;const n=$e(We((i.x-t.left)/t.width,0,1),0,1,this.min,this.max);this.input(n)}toPercent(e){return Fe($e(e,this.min,this.max))}update(){const{list:e,max:t,min:i,value:n}=this;this.updateEvent.emit({value:n,min:i,max:t,list:e,percent:$e(n,i,t)})}input(e){const t=this.valueInternal,i=We(e,this.min,this.max);this.valueInternal=i,this.inputEvent.emit({value:i,previous:t})}change(e){const t=this.value,i=We(e,this.min,this.max);this.value=i,this.changeEvent.emit({value:i,previous:t})}disconnectedCallback(){var e,t;null===(e=this.gestureStartDebouncer)||void 0===e||e.cancel(),null===(t=this.gestureEndDebouncer)||void 0===t||t.cancel()}componentDidRender(){this.gestureStartDebouncer||(this.gestureStartDebouncer=Re(e=>{e.which>1||e.button>0||(Ke(e),this.dragging=!0,this.draggingEvent.emit({value:!0}),this.move(e))},200)),this.gestureEndDebouncer||(this.gestureEndDebouncer=Re(e=>{this.dragging&&(Ke(e),this.dragging=!1,this.draggingEvent.emit({value:!1}),this.move(e),this.change(this.valueInternal))},200))}focus(){this.focusElement.focus()}blur(){this.focusElement.blur()}render(){var e;const t=this.toPercent(this.valueInternal),i=null===(e=this.localeData)||void 0===e?void 0:e[this.locId];return g(m,{className:"avia-slider",role:"slider","aria-label":i,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.value,"aria-valuetext":this.ariaValuetext||t},g("div",{class:"avia-slider-track"},g("div",{class:"avia-slider-ranges"},this.ranges.map((e,t)=>g("div",{class:"avia-slider-range-item",key:t,style:{left:this.toPercent(e.start),width:this.toPercent(e.end-e.start)}}))),g("div",{class:"avia-slider-value",style:{width:t}}),g("div",{class:"avia-slider-list"},this.list.map(e=>g("div",{class:"avia-slider-list-item",style:{left:this.toPercent(e.value)}})))),g("slot",null),g("button",{ref:e=>this.focusElement=e,class:"avia-slider-handle",style:{left:t}}))}get el(){return this}static get watchers(){return{valueInternal:["onValueInternalChange"],value:["onValueChange"],min:["onMinChange"],max:["onMaxChange"],list:["onListChange"]}}static get style(){return":root{--avia-slider-height:12px;--avia-slider-color:var(--avia-accent-color);--avia-slider-handle-color:var(--avia-accent-color);--avia-slider-track-color:#444;--avia-slider-track-radius:2px;--avia-slider-value-height:4px;--avia-slider-handle-width:12px;--avia-slider-handle-height:12px;--avia-slider-handle-radius:12px}avia-slider{display:block;height:var(--avia-slider-height);cursor:pointer;position:relative}.avia-slider-track{position:absolute;width:100%;height:var(--avia-slider-value-height);top:calc( (var(--avia-slider-height) - var(--avia-slider-value-height)) * 0.5);background:var(--avia-slider-track-color);border-radius:var(--avia-slider-track-radius);overflow:hidden}.avia-slider-value{position:absolute;height:var(--avia-slider-value-height);top:0;background-color:var(--avia-slider-color)}.avia-slider-handle{position:absolute;top:calc((var(--avia-slider-handle-height) - var(--avia-slider-height)) / -2);width:var(--avia-slider-handle-width);height:var(--avia-slider-handle-height);margin-left:calc(var(--avia-slider-handle-width) / -2);background-color:var(--avia-slider-handle-color);border-radius:var(--avia-slider-handle-radius);cursor:pointer;border:0;padding:0;outline:none;opacity:0;transition-property:opacity;transition-duration:250ms}avia-slider:hover .avia-slider-handle{opacity:1.0}.avia-slider-handle.focus-visible{opacity:1.0;box-shadow:var(--avia-focus-box-shadow)}.avia-slider-ranges{position:absolute;width:100%;height:var(--avia-slider-value-height);top:0;background:transparent}.avia-slider-range-item{position:absolute;height:var(--avia-segment-marker-height);top:0;background-color:#fff}.avia-slider-list{position:absolute;width:100%;height:var(--avia-slider-value-height);top:0;background:transparent}.avia-slider-list-item{background-color:var(--avia-segment-marker-color);width:var(--avia-segment-marker-width);height:var(--avia-segment-marker-height);position:absolute;top:0}"}};mt(Gt,["localeData","deviceMode"]);const qt=class extends pe{constructor(){super(),this.__registerHost(),this.locId=void 0,this.localeData=void 0}render(){var e;return g(m,null,null===(e=this.localeData)||void 0===e?void 0:e[this.locId])}static get style(){return"avia-text{color:var(--avia-control-bar-btn-text-color)}"}};mt(qt,["localeData"]);const Yt=class extends pe{constructor(){super(),this.__registerHost(),this.textTrackEnabled=!1,this.textDisabled=!0}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("avia-button",{ref:e=>this.focusElement=e,ids:`${Ne.CLOSED_CAPTIONS_ON}, ${Ne.CLOSED_CAPTIONS_OFF}`,actions:`${xe.TEXT_ON}, ${xe.TEXT_OFF}`,disabled:this.textDisabled,toggled:this.textTrackEnabled,icon:!0})}static get style(){return"avia-text-toggle{display:inline-block}avia-text-toggle avia-button{background-image:var(--avia-text-on-icon)}avia-text-toggle avia-button:hover{background-image:var(--avia-text-on-icon-hover)}avia-text-toggle avia-button[toggled]{background-image:var(--avia-text-off-icon)}avia-text-toggle avia-button[toggled]:hover{background-image:var(--avia-text-off-icon-hover)}"}};mt(Yt,["textTrackEnabled","textDisabled"]);const Qt=class extends pe{constructor(){super(),this.__registerHost(),this.timeDisplayValue=void 0,this.currentTimeSeconds=void 0,this.durationSeconds=void 0,this.isLiveLinear=!1,this.isDvr=!1}render(){return this.isLiveLinear||this.isDvr?"":g("div",{class:"avia-time-display"},this.timeDisplayValue)}static get style(){return"avia-time-display{display:inline-block;margin-right:var(--avia-default-spacing)}.avia-time-display{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}.avia-control-group-right .avia-time-display{text-align:right}"}};mt(Qt,["timeDisplayValue","currentTimeSeconds","durationSeconds","isLiveLinear","isDvr"]);const Xt=class extends pe{constructor(){super(),this.__registerHost(),this.currentTimeSeconds=0,this.durationSeconds=0,this.localeData=void 0}render(){const e=Math.max(this.durationSeconds-this.currentTimeSeconds,0),t=this.localeData?Be(e,this.localeData):"";return g(m,{"aria-label":t,title:t},"-"+Ve(e))}static get style(){return"avia-time-remaining{display:inline-block;user-select:none;height:var(--avia-time-height);line-height:var(--avia-time-line-height);font-size:var(--avia-time-font-size);color:var(--avia-time-color);font-family:var(--avia-time-font-family)}"}};mt(Xt,["currentTimeSeconds","durationSeconds","localData"]);const Jt=class extends pe{constructor(){super(),this.__registerHost(),this.muted=!1,this.unmuteCtaVisible=!1,this.isTouch=!1}getText(){return this.isTouch?Ne.TAP_TO_UNMUTE:Ne.CLICK_TO_UNMUTE}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return this.unmuteCtaVisible&&this.muted?g("avia-button",{actions:xe.UNMUTE,ref:e=>this.focusElement=e},g("avia-text",{"loc-id":this.getText()})):""}static get style(){return"avia-unmute-cta{box-sizing:border-box;display:inline-block;position:absolute;top:64px;height:var(--avia-control-bar-btn-height);left:var(--avia-default-spacing);pointer-events:auto;background-color:rgba(0, 0, 0, 0.415);border-radius:4px;opacity:1}avia-unmute-cta avia-button{background-image:var(--avia-mute-icon);background-position:-31px center;background-repeat:no-repeat;background-size:60% 45%;line-height:var(--avia-control-bar-btn-height);padding-right:var(--avia-default-spacing);padding-left:50px;font-size:1.1em;text-align:left;width:auto;height:var(--avia-control-bar-btn-height);color:white;cursor:pointer;opacity:0.85}avia-unmute-cta avia-button:hover{background-image:var(--avia-mute-icon-hover)}"}};mt(Jt,["muted","unmuteCtaVisible","isTouch"]);const Zt=class extends pe{constructor(){super(),this.__registerHost(),this.volume=void 0,this.accIndicatorState=void 0}componentDidRender(){var e;!this.debouncer&&this.accIndicatorState.displayTime>0&&(this.debouncer=Re(()=>{var e;null===(e=this.el)||void 0===e||e.classList.remove(Ie.INDICATOR_ACTIVE),this.visible=!1},this.accIndicatorState.displayTime)),this.visible&&(setTimeout(()=>this.el.classList.add(Ie.INDICATOR_ACTIVE),0),null===(e=this.debouncer)||void 0===e||e.call(this))}render(){var e;const t=this.accIndicatorState;if(!t.volumeKey)return null===(e=this.el)||void 0===e||e.classList.remove(Ie.INDICATOR_ACTIVE),this.visible=!1,"";this.visible=!0;const i=0===this.volume?0:We(this.volume,0,1);return g(m,{class:t.muted||0===this.volume?Ie.ACC_VOL_OFF:Ie.ACC_VOL_ON},g("div",{class:Ie.ACC_VOL},g("div",{class:Ie.ACC_VOL_METER,style:{width:Fe(i)}}),g("div",{class:Ie.ACC_VOL_OVERLAY})))}get el(){return this}static get style(){return"avia-volume-indicator{position:absolute;display:block;box-sizing:border-box;border-radius:var(--avia-volume-indicator-border-radius);background-color:var(--avia-volume-indicator-background-color);width:0;height:0;right:var(--avia-volume-indicator-right);bottom:var(--avia-volume-indicator-bottom);visibility:hidden;padding-top:48px;opacity:0;transition-property:opacity;transition-duration:300ms;transition-timing-function:ease-in;box-shadow:0px 0px 1px 1px rgba(0, 0, 0, 0.3)}avia-volume-indicator:empty{opacity:0}.avia-acc-vol{width:48px;margin:0 auto;background-color:black;height:4px;position:relative}.avia-acc-vol-meter{height:4px;background-color:#fff}.avia-vol-meter-overlay{position:absolute;top:0;left:0;height:4px;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAFElEQVQImWNAA/+Z0EUICDAwMAAANNwBBuf8FlcAAAAASUVORK5CYII=');width:100%}avia-volume-indicator.avia-indicator-active{width:var(--avia-volume-indicator-width);height:var(--avia-volume-indicator-height);opacity:1.0}avia-volume-indicator.avia-volume-on::before,avia-volume-indicator.avia-volume-off::before{content:\"\";position:absolute;top:0px;right:0px;bottom:0px;left:0px;opacity:0.85;background-repeat:no-repeat;background-position:center 12px;background-size:40% 30%}avia-volume-indicator.avia-volume-on::before{background-image:var(--avia-unmuted-icon)}avia-volume-indicator.avia-volume-on::before:hover{background-image:var(--avia-unmuted-icon-hover)}avia-volume-indicator.avia-volume-off::before{background-image:var(--avia-mute-icon)}avia-volume-indicator.avia-volume-off::before:hover{background-image:var(--avia-mute-icon-hover)}"}};mt(Zt,["volume","accIndicatorState"]);const ei=class extends pe{constructor(){super(),this.__registerHost(),this.changeEvent=S(this,"action",7),this.volume=void 0,this.muted=!1,this.linkMuteAndVolume=!0,this.playerDimensions=void 0,this.durationSeconds=void 0}onInput(e){this.changeEvent.emit({action:xe.VOLUME,value:e.detail.value})}onDragging(e){!0===e.detail.value&&this.changeEvent.emit({action:xe.UNMUTE,value:!0})}getSliderWidth(){const e=this.durationSeconds>=3600?560:530;return(this.playerDimensions.width&&this.playerDimensions.width<=e?60:100)+"px"}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("div",{style:{display:"flex",width:this.getSliderWidth(),marginLeft:"var(--avia-default-spacing)"}},g("avia-slider",{ref:e=>this.focusElement=e,"loc-id":Ne.VOLUME,value:this.linkMuteAndVolume&&this.muted?0:this.volume,onInput:e=>this.onInput(e),onDragging:e=>this.onDragging(e)}))}static get style(){return"avia-volume-slider avia-slider{width:100%;margin-top:-4px}"}};mt(ei,["linkMuteAndVolume","muted","volume","playerDimensions","durationSeconds"]);const ti=class extends pe{constructor(){super(),this.__registerHost(),this.waiting=!1}render(){if(this.waiting)return g("avia-overlay",{centered:!0},g("avia-spinner",null))}static get style(){return"avia-waiting-overlay{display:block;justify-content:center;align-items:center;display:flex}avia-waiting-overlay slot-fb:not(:empty)~avia-spinner{display:none}"}};mt(ti,["waiting"]);const ii=Z(class extends pe{constructor(){super(),this.__registerHost()}render(){return g(m,null,g("avia-volume-indicator",null),g("avia-seek-indicator",null))}static get style(){return"avia-accessibility{display:block}"}},[0,"avia-accessibility"]),ni=Z(class extends pe{constructor(){super(),this.__registerHost()}render(){return g(m,null)}static get style(){return"avia-active{display:block;transition:var(--avia-active-transition-in)}avia-ui:not([active]) avia-active{opacity:0;transition:var(--avia-active-transition-out)}"}},[0,"avia-active"]),ri=Z(class extends pe{constructor(){super(),this.__registerHost()}render(){return g(m,null,g("div",{class:"avia-ad-control-container"},g("avia-mute-toggle",null),g("avia-play-toggle",null),g("avia-fullscreen-toggle",null)),g("avia-ad-progress-bar",null))}static get style(){return'avia-ad-control-bar{position:absolute;height:56px;width:100%;left:0;bottom:0;right:0;pointer-events:none;flex-direction:row;justify-content:center;display:none;transition:var(--avia-active-transition-in)}avia-ui[control-mode="ad"] avia-ad-control-bar{display:flex}.avia-ad-control-container{pointer-events:auto;display:flex;width:calc(3 * var(--avia-control-bar-btn-width) + (2 * var(--avia-default-spacing)));height:var(--avia-control-bar-btn-height);justify-content:space-between;background-color:var(--avia-ad-control-bg-color);border-radius:var(--avia-ad-control-border-radius)}avia-ui:not([active]) avia-ad-control-bar{opacity:0;transition:var(--avia-active-transition-out)}'}},[0,"avia-ad-control-bar"]),ai=Z(Et,[0,"avia-ad-progress-bar",{adPlayheadPosition:[2,"ad-playhead-position"],isLiveLinear:[4,"is-live-linear"]}]),oi=Z(St,[0,"avia-button",{locId:[513,"loc-id"],toggled:[516],compact:[516],icon:[516],variant:[516],actions:[1],ids:[513],disabled:[4],localeData:[16],focused:[32]},[[0,"click","onClick"],[0,"touchstart","onTouchStart"],[1,"touchend","onTouchEnd"],[0,"focus","onFocus"],[0,"blur","onBlur"],[0,"keyup","onKeyDown"]]]),si=Z(Ct,[4,"avia-control-bar",{active:[516],controlMode:[513,"control-mode"],deviceMode:[1,"device-mode"],isDvr:[4,"is-dvr"],isLiveLinear:[4,"is-live-linear"],isIosNative:[4,"is-ios-native"],settings:[16]}]),li=Z(class extends pe{constructor(){super(),this.__registerHost()}render(){return g(m,null,g("slot",null,g("avia-mute-toggle",{compact:!0}),g("avia-play-toggle",{compact:!0}),g("avia-fullscreen-toggle",{compact:!0})))}static get style(){return'avia-control-bar-compact{display:none;position:absolute;top:50%;left:50%;width:var(--avia-compact-control-bar-width);height:var(--avia-compact-button-height);border-radius:var(--avia-compact-button-border-radius);margin-left:var(--avia-compact-control-bar-margin-left);margin-top:var(--avia-compact-control-bar-margin-top)}avia-control-bar-compact avia-mute-toggle,avia-control-bar-compact avia-play-toggle{margin-right:var(--avia-default-spacing)}avia-ui[control-mode="compact"][active] avia-control-bar-compact,avia-ui[control-mode="compact"][active] avia-control-bar-compact>*{display:block}'}},[4,"avia-control-bar-compact"]),ui=Z(class extends pe{constructor(){super(),this.__registerHost(),this.orientation=st.HORIZONTAL}render(){const e=this.orientation===st.VERTICAL?"menu":"menubar";return g(m,{role:e})}static get style(){return""}},[0,"avia-control-group",{orientation:[513]}]),ci=Z(xt,[0,"avia-current-time",{currentTimeSeconds:[2,"current-time-seconds"],localeData:[16],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),di=Z(wt,[0,"avia-duration",{durationSeconds:[2,"duration-seconds"],localeData:[16],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),hi=Z(Pt,[0,"avia-fullscreen-toggle",{fullscreen:[4],fullscreenDisabled:[4,"fullscreen-disabled"],compact:[516]}]),fi=Z(_t,[0,"avia-live-control",{isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"],live:[4]}]),vi=Z(It,[0,"avia-menu",{hasSubmenu:[4,"has-submenu"],locId:[1,"loc-id"],titlebar:[4],localeData:[16],options:[1040]},[[0,"action","onAction"],[0,"keydown","onKeydown"]]]),pi=Z(class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"action",7),this.disabled=!1,this.selected=!1,this.label="",this.action="",this.hasSubmenu=!1}onClick(e){this.disabled||this.selected||(Ke(e),this.actionEvent.emit({action:this.action,value:this.element.dataset}))}focus(){this.focusElement.focus()}blur(){this.focusElement.blur()}render(){return g(m,null,g("button",{ref:e=>this.focusElement=e,role:this.hasSubmenu?"menuitem":"menuitemradio","aria-haspopup":String(this.hasSubmenu),"aria-checked":String(this.selected),disabled:this.disabled},g("label",null,this.label),g("slot",null)))}get element(){return this}static get style(){return"avia-menu-item{display:block;width:100%;height:auto;border:none;outline:none;text-align:left;color:var(--avia-menu-text-color);background-color:transparent;background-position:right center;background-repeat:no-repeat;background-size:20% 20%;margin:0}avia-menu-item:hover{color:var(--avia-menu-text-color-hover);background-color:rgba(0, 0, 0, 0.65)}avia-menu-item[aria-haspopup=true]{background-image:var(--avia-chevron-right)}avia-menu-item[disabled]{cursor:default;opacity:0.55}avia-menu-item[disabled]:hover{background-color:transparent;color:var(--avia-menu-text-color)}avia-menu-item[data-description] button:after{content:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAVCAYAAABc6S4mAAACG0lEQVQ4jZ2Vz0tVQRTHP89QKJ9lm6ikzN6zJAlxJ1E8CJO27oo2IdKmRdBWwRZhkH9A4kJoI7ppIUWkibRsERpILpQCF9lPLPpBQc+vTJ0Lh+lduc8Dw8z9zJlz5sw5MzcniR1IAegDDgJrwCjwvqKZ4CBDa5VUkrTf6YbNnZc0JemHpHFJtbGtrBF0AOeAI8AxYAp44OYvAo+BT0AJeFVtBEnbI2lI/+RZtOPDxsuSmnwEd4FG4E+06xxQa2c8DSy6uSKwYufeBnwxfgGYAZaBU0kEWeWJpONux822bjWK8qHx63+PX9J6FU5+SWp3xm4av+PYSWMh8XXhiNat3IIMA5+BGqAM1ANX7BgSCfotwG/T+wrkgV3AptMJNrviCNKSOxlF0ufm7hu77NiIsVs1UWJbUsr0EvDBffe48YL1JcdeW98bO9hO5lI28tb63Y6VrS9U48Dn4Z0b563fdCyX6MUONlKMXwU63fdzNy5Y/8axpGgexUnukLRPUqOkvZKKkgYqlOtRl9AlY82OLRvrjh38lPTdavhbyl245gy1G1t07IDTzWNvR1a5EZXviq1rdeyesZHkJr+QtLZNeylpzG6oNz5R4U4UjYXo6xIH1bYGSfNmqD9a+9H42YRlNV4v6bSkQUkLkp5KanPzh5zxXr82i/HwXoX3vdsS3Bm9qLetKEI1ndjpHy2W8P84Y09GEzAGzP6nBWwBc7kMbCgO6BoAAAAASUVORK5CYII=');left:0.4em;top:0.25em;position:relative}avia-menu-item[selected] button{font-weight:bold;cursor:default;background-position:94% center;background-repeat:no-repeat;background-size:0.9em;background-image:var(--avia-selected-icon);pointer-events:none}button{border:none;outline:none;width:100%;height:100%;padding:1em;margin:0;color:var(--avia-menu-text-color);background-color:transparent;text-align:left;cursor:pointer;font-size:var(--avia-menu-text-size)}button:focus-visible,button.focus-visible{outline:none;box-shadow:var(--avia-focus-box-shadow-inner)}button[aria-haspopup=true]{background-image:var(--avia-chevron-right);background-position:right center;background-repeat:no-repeat;background-size:20% 20%}"}},[4,"avia-menu-item",{disabled:[1540],selected:[516],label:[1],action:[1],hasSubmenu:[4,"has-submenu"]},[[0,"click","onClick"]]]),gi=Z(Lt,[0,"avia-mute-toggle",{muted:[4],muteDisabled:[4,"mute-disabled"],compact:[516]}]),yi=Z(class extends pe{constructor(){super(),this.__registerHost(),this.centered=!1}render(){return g(m,{centered:this.centered})}static get style(){return"avia-overlay{background:transparent;position:absolute;width:100%;height:100%;top:0;left:0;border:none;padding:0;margin:0}avia-overlay[centered]{justify-content:center;align-items:center;display:flex}"}},[0,"avia-overlay",{centered:[516]}]),mi=Z(Nt,[4,"avia-panel",{titlebar:[4],back:[4],locId:[1,"loc-id"],localeData:[16]}]),Ai=Z(Mt,[0,"avia-pause-overlay",{playing:[4],waiting:[4]}]),ki=Z(class extends pe{constructor(){super(),this.__registerHost()}focus(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}blur(){var e;null===(e=this.focusElement)||void 0===e||e.blur()}render(){return g("avia-button",{ref:e=>this.focusElement=e,disabled:!1,actions:xe.PLAY,"loc-id":Ne.PLAY})}static get style(){return"avia-play-cta avia-button{width:var(--avia-play-cta-width);height:var(--avia-play-cta-height);border-radius:var(--avia-play-cta-border-radius);background-image:var(--avia-play-cta-bg-image);background-color:var(--avia-play-cta-bg-color);background-repeat:no-repeat;background-position-x:calc(var(--avia-play-cta-bg-position) + 6%);background-position-y:var(--avia-play-cta-bg-position);background-size:var(--avia-play-cta-bg-size);cursor:pointer}"}},[0,"avia-play-cta"]),bi=Z(Rt,[0,"avia-play-overlay",{playing:[4],controlMode:[1,"control-mode"],playDisabled:[4,"play-disabled"],pausable:[4],isTouch:[4,"is-touch"]},[[2,"click","onClick"]]]),Ei=Z(Ot,[0,"avia-play-toggle",{playing:[4],playDisabled:[4,"play-disabled"],pausable:[4],compact:[516]}]),Ti=Z(Dt,[4,"avia-poster",{posterActive:[4,"poster-active"],posterImageUrl:[1,"poster-image-url"],playing:[4],waiting:[4]},[[2,"click","handleAction"]]]),Si=Z(Bt,[0,"avia-progress-bar",{bufferedRanges:[16],currentTimeSeconds:[2,"current-time-seconds"],durationSeconds:[2,"duration-seconds"],localeData:[16],segmentBreakPositions:[1,"segment-break-positions"],preview:[16],increment:[2],live:[4],hovering:[32],cursor:[32],value:[32]},[[1,"mouseenter","onMouseEnter"],[1,"mouseleave","onMouseLeave"],[9,"mousemove","onMouseMove"]]]),Ci=Z(Ut,[0,"avia-seek-back-button",{seekBackDisabled:[4,"seek-back-disabled"],isLiveLinear:[4,"is-live-linear"]}]),xi=Z(Ft,[0,"avia-seek-forward-button",{seekForwardDisabled:[4,"seek-forward-disabled"],isLiveLinear:[4,"is-live-linear"]}]),wi=Z(Vt,[0,"avia-seek-indicator",{durationSeconds:[2,"duration-seconds"],accIndicatorState:[16]}]),Pi=Z(Ht,[0,"avia-settings",{settings:[16],localeData:[16],controlMode:[1,"control-mode"],deviceMode:[1,"device-mode"],currentId:[32],menu:[32]},[[0,"action","onAction"],[4,"keydown","onKeyDown"]]]),_i=Z($t,[0,"avia-settings-audio",{localeData:[16],settings:[16]},[[0,"action","onAction"]]]),Ii=Z(Wt,[0,"avia-settings-language",{localeData:[16],settings:[16]}]),Li=Z(Kt,[0,"avia-settings-quality",{localeData:[16],settings:[16],qualityLabel:[2,"quality-label"]},[[0,"action","onAction"]]]),Ni=Z(zt,[0,"avia-settings-text",{localeData:[16],settings:[16]},[[0,"action","onAction"]]]),Mi=Z(jt,[0,"avia-settings-toggle",{settings:[16],settingsDisabled:[4,"settings-disabled"]}]),Ri=Z(Gt,[4,"avia-slider",{locId:[513,"loc-id"],min:[2],max:[2],value:[1026],ranges:[16],list:[16],ariaValuetext:[1,"aria-valuetext"],increment:[2],localeData:[16],deviceMode:[1,"device-mode"],valueInternal:[32]},[[1,"touchstart","onMouseDown"],[0,"mousedown","onMouseDown"],[8,"touchmove","onMouseMove"],[8,"mousemove","onMouseMove"],[9,"touchend","onMouseUp"],[8,"mouseup","onMouseUp"],[2,"keydown","onKeydown"]]]),Oi=Z(class extends pe{constructor(){super(),this.__registerHost()}render(){return g(m,null)}static get style(){return"avia-spinner{display:block;width:var(--avia-spinner-diameter);height:var(--avia-spinner-diameter);overflow:visible;background-size:var(--avia-spinner-diameter);background-repeat:no-repeat;background-image:var(--avia-spinner-image);animation:avia-rotate 2s linear infinite}@keyframes avia-rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}"}},[0,"avia-spinner"]),Di=Z(qt,[0,"avia-text",{locId:[513,"loc-id"],localeData:[16]}]),Bi=Z(Yt,[0,"avia-text-toggle",{textTrackEnabled:[4,"text-track-enabled"],textDisabled:[4,"text-disabled"]}]),Ui=Z(Qt,[0,"avia-time-display",{timeDisplayValue:[1,"time-display-value"],currentTimeSeconds:[2,"current-time-seconds"],durationSeconds:[2,"duration-seconds"],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"]}]),Fi=Z(Xt,[0,"avia-time-remaining",{currentTimeSeconds:[2,"current-time-seconds"],durationSeconds:[2,"duration-seconds"],localeData:[16]}]),Vi=Z(class extends pe{constructor(){super(),this.__registerHost(),this.actionEvent=S(this,"uiaction",7),this.controlMode=_e.NONE,this.fullscreen=!1,this.active=null,this.deviceMode=Le.DESKTOP,this.fullscreenDisabled=!0,this.muted=!1,this.muteDisabled=!0,this.volume=1,this.playing=!1,this.playDisabled=!0,this.textTrackEnabled=!1,this.textDisabled=!0,this.timeDisplayValue="",this.isLiveLinear=!1,this.isDvr=!1,this.live=!1,this.playheadPosition=0,this.durationSeconds=0,this.currentTimeSeconds=0,this.seekDisabled=!0,this.seekBackDisabled=!0,this.seekForwardDisabled=!0,this.settingsDisabled=!0,this.adPlayheadPosition=0,this.segmentBreakPositions=void 0,this.localeData=null,this.preview=null,this.accIndicatorState=void 0,this.unmuteCtaVisible=!1,this.settings=null,this.posterActive=!1,this.posterImageUrl="",this.qualityLabel=0,this.waiting=!1,this.initialized=!1,this.pausable=!0,this.isTouch=!1,this.isIosNative=!1,this.linkMuteAndVolume=!0,this.playerDimensions={width:0,height:0},this.bufferedRanges=[]}handleAction(e){var t;this.actionEvent.emit(e.detail),e.detail.action===xe.SETTINGS_OFF&&(null===(t=this.element.querySelector("avia-settings-toggle"))||void 0===t||t.focus())}componentWillLoad(){!function(e,t){var i=T(e),n=new Map,r={wormholes:n,state:t};At.set(e,r);var a=e.connectedCallback;e.connectedCallback=function(){At.set(e,r),a&&a.call(e)};var o=e.disconnectedCallback;e.disconnectedCallback=function(){At.delete(e),o&&o.call(e)},i.addEventListener("openWormhole",function(e){e.stopPropagation();var t=e.detail,i=t.consumer,a=t.onOpen;if(!n.has(i)){if("symbol"!=typeof i){var o=i.connectedCallback,s=i.disconnectedCallback;i.connectedCallback=function(){n.set(i,e.detail),o&&o.call(i)},i.disconnectedCallback=function(){n.delete(i),s&&s.call(i)}}n.set(i,e.detail),kt(e.detail,r.state),null==a||a.resolve(function(){n.delete(i)})}}),i.addEventListener("closeWormhole",function(e){var t=e.detail;n.delete(t)})}(this,this)}render(){if(!this.initialized)return;const e=this.deviceMode===Le.TV;return g(m,null,g(bt,{state:this},g("div",{class:"avia-layer"},g("slot",{name:"underlay"})),g("slot",{name:"play-overlay"},!e&&g("avia-play-overlay",null)),g("slot",{name:"pause-overlay"},e&&g("avia-pause-overlay",null)),g("slot",{name:"waiting-overlay"},g("avia-waiting-overlay",null)),g("slot",{name:"unmute-cta"},!e&&g("avia-unmute-cta",null)),g("slot",{name:"accessibility"},g("avia-accessibility",null)),g("slot",{name:"poster"},!e&&g("avia-poster",null)),g("div",{class:"avia-layer avia-controls"},g("div",{class:"avia-spacer"}),g("slot",{name:"settings"},g("avia-settings",null)),g("slot",{name:"control-bar"},g("avia-control-bar",null)),g("slot",{name:"ad-control-bar"},g("avia-ad-control-bar",null)),g("slot",{name:"compact-control-bar"},!e&&g("avia-control-bar-compact",null))),g("div",{class:"avia-layer"},g("slot",{name:"overlay"}))))}get element(){return this}static get style(){return":root{--avia-accent-color:#3aacff;--avia-text-color:#dedede;--avia-text-color-hover:#ffffff;--avia-font-family:Arial, sans-serif;--avia-control-bar-bg:linear-gradient(to top, rgba(2,0,36,0.8) 0%, rgba(1,0,10,0.5029586834733894) 62%, rgba(0,0,0,0) 100%);--avia-control-bar-height:64px;--avia-default-spacing:12px;--avia-half-spacing:6px;--avia-live-padding-top:12px;--avia-compact-button-width:48px;--avia-compact-button-height:48px;--avia-compact-button-border-radius:calc(var(--avia-compact-button-width) / 2);--avia-compact-button-background-color:rgba(64, 64, 64, 0.5);--avia-compact-control-bar-width:calc( (var(--avia-compact-button-width) * 3) + (var(--avia-default-spacing) * 2));--avia-compact-control-bar-margin-left:calc(var(--avia-compact-control-bar-width) / -2);--avia-compact-control-bar-margin-top:calc(var(--avia-compact-button-height) / -2);--avia-play-overlay-bg-color:rgba(0, 0, 0, 0.35);--avia-play-cta-width:66px;--avia-play-cta-height:66px;--avia-play-cta-border-radius:calc(var(--avia-play-cta-width) / 2);--avia-play-cta-bg-image:var(--avia-play-icon);--avia-play-cta-bg-position:50%;--avia-play-cta-bg-color:rgba(64, 64, 64, 0.5);--avia-play-cta-bg-size:calc(var(--avia-play-cta-width) / 2) calc(var(--avia-play-cta-height) / 2);--avia-control-bar-btn-height:48px;--avia-control-bar-btn-width:48px;--avia-control-bar-btn-text-color:var(--avia-text-color);--avia-control-bar-btn-text-color-hover:var(--avia-text-color-hover);--avia-control-bar-btn-border:none;--avia-control-bar-btn-border-width:0;--avia-control-bar-btn-border-radius:0;--avia-control-bar-btn-border-outline:none;--avia-control-bar-btn-border-cursor:pointer;--avia-control-bar-btn-disabled-cursor:not-allowed;--avia-control-bar-btn-disabled-opacity:0.5;--avia-icon-btn-bg-width:50%;--avia-icon-btn-bg-height:37.5%;--avia-icon-btn-bg-size:var(--avia-icon-btn-bg-width) var(--avia-icon-btn-bg-height);--avia-fs-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M1%207a1%201%200%200%201-1-1V1a1%201%200%200%201%201-1h5a1%201%200%200%201%200%202H2.5a.5.5%200%200%200-.5.5V6a1%201%200%200%201-1%201zM6%2018H1a1%201%200%200%201-1-1v-5a1%201%200%200%201%202%200v3.5a.5.5%200%200%200%20.5.5H6a1%201%200%200%201%200%202zM23%2018h-5a1%201%200%200%201%200-2h3.5a.5.5%200%200%200%20.5-.5V12a1%201%200%200%201%202%200v5a1%201%200%200%201-1%201zM23%207a1%201%200%200%201-1-1V2.5a.5.5%200%200%200-.5-.5H18a1%201%200%200%201%200-2h5a1%201%200%200%201%201%201v5a1%201%200%200%201-1%201z%22%2F%3E%3C%2Fsvg%3E');--avia-fs-icon-hover:var(--avia-fs-icon);--avia-fs-exit-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M4%206H1a1%201%200%200%201%200-2h2.5a.5.5%200%200%200%20.5-.5V1a1%201%200%200%201%202%200v3a2%202%200%200%201-2%202zM23%206h-4a1%201%200%200%201-1-1V1a1%201%200%200%201%202%200v2.5a.5.5%200%200%200%20.5.5H23a1%201%200%200%201%200%202zM19%2018a1%201%200%200%201-1-1v-3a2%202%200%200%201%202-2h3a1%201%200%200%201%200%202h-2.5a.5.5%200%200%200-.5.5V17a1%201%200%200%201-1%201zM5%2018a1%201%200%200%201-1-1v-2.5a.5.5%200%200%200-.5-.5H1a1%201%200%200%201%200-2h3a2%202%200%200%201%202%202v3a1%201%200%200%201-1%201z%22%2F%3E%3C%2Fsvg%3E');--avia-fs-exit-icon-hover:var(--avia-fs-exit-icon);--avia-play-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EPlay%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M19%2010L6.84%2017.81a1.19%201.19%200%200%201-1.84-1V1.19a1.19%201.19%200%200%201%201.83-1L19%208a1.19%201.19%200%200%201%200%202z%22%2F%3E%3C%2Fsvg%3E');--avia-play-icon-hover:var(--avia-play-icon);--avia-pause-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EPause%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Crect%20x%3D%226%22%20width%3D%224%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3Crect%20x%3D%2214%22%20width%3D%224%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3C%2Fsvg%3E');--avia-pause-icon-hover:var(--avia-pause-icon);--avia-stop-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Ctitle%3EStop%3C%2Ftitle%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Crect%20x%3D%223%22%20width%3D%2218%22%20height%3D%2218%22%20rx%3D%221%22%2F%3E%3C%2Fsvg%3E');--avia-stop-icon-hover:var(--avia-stop-icon);--avia-mute-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M3.58%206H2a1%201%200%200%200-1%201v4a1%201%200%200%200%201%201h1.58a1%201%200%200%201%20.72.3l5%205a1%201%200%200%200%201.7-.74V1.44A1%201%200%200%200%209.27.73l-5%205a1%201%200%200%201-.69.27zM19.77%209.33a.5.5%200%200%201%200-.71l.94-.94a1%201%200%200%200%200-1.41%201%201%200%200%200-1.42%200l-.94.94a.5.5%200%200%201-.7%200l-.94-.94a1%201%200%200%200-1.42%200%201%201%200%200%200%200%201.41l.94.94a.5.5%200%200%201%200%20.71l-.94.94a1%201%200%200%200%200%201.41%201%201%200%200%200%201.42%200l.94-.94a.5.5%200%200%201%20.7%200l.94.94a1%201%200%200%200%201.42%200%201%201%200%200%200%200-1.41z%22%2F%3E%3C%2Fsvg%3E');--avia-mute-icon-hover:var(--avia-mute-icon);--avia-unmuted-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M3.59%206H2a1%201%200%200%200-1%201v4a1%201%200%200%200%201%201h1.59a1%201%200%200%201%20.7.29l5%205a1%201%200%200%200%201.71-.7V1.41a1%201%200%200%200-1.71-.7l-5%205a1%201%200%200%201-.7.29zM14%2018a1%201%200%200%201%200-2%207%207%200%200%200%200-14%201%201%200%200%201%200-2%209%209%200%200%201%200%2018z%22%2F%3E%3Cpath%20d%3D%22M14%2014a1%201%200%200%201%200-2%203%203%200%200%200%200-6%201%201%200%200%201%200-2%205%205%200%200%201%200%2010z%22%2F%3E%3C%2Fsvg%3E');--avia-unmuted-icon-hover:var(--avia-unmuted-icon);--avia-text-on-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23fff%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1zm-1%2011a1%201%200%2001-1%201H9a1%201%200%2000-.71.29L6%2014.59V13a1%201%200%2000-1-1H3a1%201%200%2001-1-1V3a1%201%200%20011-1h18a1%201%200%20011%201z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-text-on-icon-hover:var(--avia-text-on-icon);--avia-text-off-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23231f20%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-text-off-icon-hover:var(--avia-text-off-icon);--avia-text-icon-disabled:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cdefs%3E%3Cstyle%3E.b%7Bfill%3Anone%3Bstroke%3A%23fff%3Bstroke-linecap%3Around%3Bstroke-miterlimit%3A10%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M23%200H1a1%201%200%2000-1%201v12a1%201%200%20001%201h2.5a.5.5%200%2001.5.5V17a1%201%200%2000.62.92A.84.84%200%20005%2018a1%201%200%2000.71-.29l3.56-3.56a.47.47%200%2001.35-.15H23a1%201%200%20001-1V1a1%201%200%2000-1-1zm-1%2011a1%201%200%2001-1%201H9a1%201%200%2000-.71.29L6%2014.59V13a1%201%200%2000-1-1H3a1%201%200%2001-1-1V3a1%201%200%20011-1h18a1%201%200%20011%201z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20class%3D%22b%22%20d%3D%22M4.5%206.5h5M16.5%206.5h3M12.5%206.5h1M4.5%209.5h3M18.5%209.5h1M10.5%209.5h5%22%2F%3E%3C%2Fsvg%3E');--avia-seek-forward-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2015.52%2017.29%22%3E%3Cpath%20d%3D%22M14.69%2C1.16%2C14%2C1.8A8.76%2C8.76%2C0%2C0%2C0%2C1.81%2C3.37%2C8.59%2C8.59%2C0%2C0%2C0%2C3.39%2C15.49a8.77%2C8.77%2C0%2C0%2C0%2C11.5-.74A1%2C1%2C0%2C0%2C0%2C15%2C13.4a1%2C1%2C0%2C0%2C0-1.36-.11l-.11.11a6.81%2C6.81%2C0%2C0%2C1-9.58%2C0%2C6.69%2C6.69%2C0%2C0%2C1-.06-9.51%2C6.82%2C6.82%2C0%2C0%2C1%2C8.73-.77L11.8%2C4a.47.47%2C0%2C0%2C0%2C0%2C.67.5.5%2C0%2C0%2C0%2C.37.15H15a.49.49%2C0%2C0%2C0%2C.49-.48V1.49a.47.47%2C0%2C0%2C0-.83-.33Z%22%20style%3D%22fill%3A%23fff%22%2F%3E%3C%2Fsvg%3E');--avia-seek-forward-icon-hover:var(--avia-seek-forward-icon);--avia-seek-back-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2015.52%2017.29%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill%3A%23fff%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22Layer_2%22%20data-name%3D%22Layer%202%22%3E%3Cpath%20class%3D%22cls-1%22%20d%3D%22M.46%2C1A.48.48%2C0%2C0%2C0%2C0%2C1.49V4.33a.49.49%2C0%2C0%2C0%2C.48.48h2.9a.51.51%2C0%2C0%2C0%2C.37-.15.48.48%2C0%2C0%2C0%2C0-.67L2.9%2C3.17a6.82%2C6.82%2C0%2C0%2C1%2C8.73.77%2C6.69%2C6.69%2C0%2C0%2C1-.05%2C9.51A6.82%2C6.82%2C0%2C0%2C1%2C2%2C13.4a.52.52%2C0%2C0%2C0-.1-.11%2C1%2C1%2C0%2C0%2C0-1.37.11%2C1%2C1%2C0%2C0%2C0%2C.11%2C1.35%2C8.76%2C8.76%2C0%2C0%2C0%2C11.49.74A8.59%2C8.59%2C0%2C0%2C0%2C13.7%2C3.37%2C8.76%2C8.76%2C0%2C0%2C0%2C1.48%2C1.8L.82%2C1.16A.45.45%2C0%2C0%2C0%2C.46%2C1Z%22%20transform%3D%22translate(0%200)%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E');--avia-seek-back-icon-hover:var(--avia-seek-back-icon);--avia-settings-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22white%22%20viewBox%3D%220%200%2024%2018%22%3E%3Cpath%20fill%3D%22none%22%20d%3D%22M0%200h24v18H0z%22%2F%3E%3Cpath%20d%3D%22M20.43%2010.4l-.93-.53a1%201%200%200%201%200-1.74l.93-.53a1%201%200%200%200%20.36-1.37l-2-3.46a1%201%200%200%200-1.36-.37l-.93.54a1%201%200%200%201-1.5-.87V1a1%201%200%200%200-1-1h-4a1%201%200%200%200-1%201v1.07a1%201%200%200%201-1.5.87l-.93-.54a1%201%200%200%200-1.36.37l-2%203.46a1%201%200%200%200%20.36%201.37l.93.53a1%201%200%200%201%200%201.74l-.93.53a1%201%200%200%200-.36%201.37l2%203.46a1%201%200%200%200%201.36.37l.93-.54a1%201%200%200%201%201.5.87V17a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1.07a1%201%200%200%201%201.5-.87l.93.54a1%201%200%200%200%201.36-.37l2-3.46a1%201%200%200%200-.36-1.37zM12%2012a3%203%200%201%201%203-3%203%203%200%200%201-3%203z%22%2F%3E%3C%2Fsvg%3E');--avia-settings-icon-hover:var(--avia-settings-icon);--avia-selected-icon:url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22white%22%3E%3Cpath%20d%3D%22M20.285%202l-11.285%2011.567-5.286-5.011-3.714%203.716%209%208.728%2015-15.285z%22%2F%3E%3C%2Fsvg%3E');--avia-time-height:48px;--avia-time-width:86px;--avia-time-line-height:48px;--avia-time-font-size:13px;--avia-time-color:var(--avia-text-color);--avia-time-font-family:var(--avia-font-family);--avia-segment-marker-color:var(--avia-text-color);--avia-segment-marker-height:4px;--avia-segment-marker-width:2px;--avia-ad-progress-color:#ffe83a;--avia-ad-progress-track-color:transparent;--avia-ad-control-bg-color:rgba(0, 0, 0, 0.7);--avia-ad-control-border-radius:4px;--avia-seek-indicator-border-radius:4px;--avia-seek-indicator-background-color:rgba(0, 0, 0, 0.5);--avia-seek-indicator-color:var(--avia-text-color);--avia-seek-indicator-height:48px;--avia-seek-indicator-font-size:20px;--avia-seek-indicator-font-family:var(--avia-font-family);--avia-seek-indicator-line-height:48px;--avia-volume-indicator-border-radius:6px;--avia-volume-indicator-background-color:rgba(0, 0, 0, 0.5);--avia-volume-indicator-width:64px;--avia-volume-indicator-height:64px;--avia-volume-indicator-right:12px;--avia-volume-indicator-bottom:72px;--avia-focus-box-shadow:0 0 2px 3px rgba(247, 228, 85, 0.85);--avia-focus-box-shadow-inner:inset 0 0 2px 3px rgba(247, 228, 85, 0.85);--avia-spinner-image:url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" stroke=\"white\" stroke-width=\"1\" width=\"40\" height=\"40\" fill=\"white\" viewBox=\"0 0 37.84 41\"><path d=\"M18,39.61V32.09a.93.93,0,0,1,.26-.66.85.85,0,0,1,.64-.27.83.83,0,0,1,.63.27.89.89,0,0,1,.26.66v7.52a.91.91,0,0,1-.89.89.85.85,0,0,1-.64-.27.87.87,0,0,1-.26-.62Zm-6.4-10.27a.89.89,0,0,1,.59-.37.82.82,0,0,1,.65.16.79.79,0,0,1,.36.59.94.94,0,0,1-.15.69L8.8,36.47a.8.8,0,0,1-.57.38,1,1,0,0,1-.67-.16.84.84,0,0,1-.36-.59,1,1,0,0,1,.16-.7ZM1.13,25.53,8,23.21a.92.92,0,0,1,.67.05.93.93,0,0,1,.4,1.23,1,1,0,0,1-.52.47L1.64,27.27A.87.87,0,0,1,1,27.22a.82.82,0,0,1-.43-.53,1,1,0,0,1,0-.72.81.81,0,0,1,.54-.44Zm.51-11.8L8.56,16a1,1,0,0,1,.52.47.93.93,0,0,1-.4,1.23.92.92,0,0,1-.67.05L1.13,15.47A.81.81,0,0,1,.59,15a1,1,0,0,1,0-.72A.82.82,0,0,1,1,13.78a.87.87,0,0,1,.67,0ZM8.8,4.53l4.27,6.06a.94.94,0,0,1,.15.69.79.79,0,0,1-.36.59.82.82,0,0,1-.65.16.89.89,0,0,1-.59-.37L7.36,5.6a1,1,0,0,1-.16-.7.84.84,0,0,1,.36-.59,1,1,0,0,1,.67-.16.8.8,0,0,1,.57.38Zm11-3.14V8.91a.89.89,0,0,1-.26.66.83.83,0,0,1-.63.27.85.85,0,0,1-.64-.27A.93.93,0,0,1,18,8.91V1.39a.87.87,0,0,1,.26-.62A.85.85,0,0,1,18.92.5a.83.83,0,0,1,.63.27.83.83,0,0,1,.26.62ZM30.48,5.6l-4.27,6.06a.87.87,0,0,1-.58.37.85.85,0,0,1-.66-.16.86.86,0,0,1-.36-.59,1,1,0,0,1,.16-.69L29,4.53a.76.76,0,0,1,.56-.38.94.94,0,0,1,.67.16.86.86,0,0,1,.37.59,1,1,0,0,1-.16.7Zm6.23,9.87-6.88,2.32a.91.91,0,0,1-.67-.05.93.93,0,0,1-.4-1.23,1,1,0,0,1,.52-.47l6.91-2.31a.87.87,0,0,1,.67,0,.83.83,0,0,1,.44.53,1,1,0,0,1-.06.72.79.79,0,0,1-.53.44Zm-.52,11.8L29.28,25a1,1,0,0,1-.52-.47.93.93,0,0,1,.4-1.23.91.91,0,0,1,.67-.05l6.88,2.32a.79.79,0,0,1,.53.44,1,1,0,0,1,.06.72.83.83,0,0,1-.44.53.87.87,0,0,1-.67.05ZM29,36.47l-4.27-6.06a1,1,0,0,1-.16-.69.86.86,0,0,1,.36-.59.85.85,0,0,1,.66-.16.87.87,0,0,1,.58.37l4.27,6.06a1,1,0,0,1,.16.7.86.86,0,0,1-.37.59.94.94,0,0,1-.67.16.76.76,0,0,1-.56-.38Z\"/></svg>');--avia-spinner-diameter:48px;--avia-active-transition-in:opacity 0.5s ease 0s;--avia-active-transition-out:opacity 0.5s ease 0s;--avia-buffered-range-background-color:rgba(255, 255, 255, 0.20)}avia-ui{color:var(--avia-text-color);font-family:var(--avia-font-family)}avia-ui>*{pointer-events:auto;-webkit-user-select:none;user-select:none}avia-ui,avia-ui avia-accessibility,.avia-layer{pointer-events:none;position:absolute;top:0;left:0;bottom:0;right:0}.avia-layer>*{pointer-events:auto}slot-fb[hidden]{display:none}.avia-ui-hidden{display:none}img.avia-poster-img{width:100%;height:auto}.avia-container,avia-ui:focus,avia-ui button:focus{outline:none}avia-ui.focus-visible,avia-ui .focus-visible{box-shadow:var(--avia-focus-box-shadow)}avia-ui.focus-visible .avia-menu-button,avia-ui .focus-visible.avia-menu-button{box-shadow:var(--avia-focus-box-shadow-inner)}avia-ui:not([active])[fullscreen]{cursor:none}.avia-container.avia-controls-vis video::-webkit-media-text-track-container{bottom:calc(var(--avia-control-bar-height) + 4px);height:auto}.avia-controls{display:flex;flex-direction:column}.avia-spacer{pointer-events:none;flex-grow:1}"}},[4,"avia-ui",{controlMode:[513,"control-mode"],fullscreen:[516],active:[516],deviceMode:[513,"device-mode"],fullscreenDisabled:[4,"fullscreen-disabled"],muted:[4],muteDisabled:[4,"mute-disabled"],volume:[2],playing:[4],playDisabled:[4,"play-disabled"],textTrackEnabled:[4,"text-track-enabled"],textDisabled:[4,"text-disabled"],timeDisplayValue:[1,"time-display-value"],isLiveLinear:[4,"is-live-linear"],isDvr:[4,"is-dvr"],live:[4],playheadPosition:[2,"playhead-position"],durationSeconds:[2,"duration-seconds"],currentTimeSeconds:[2,"current-time-seconds"],seekDisabled:[4,"seek-disabled"],seekBackDisabled:[4,"seek-back-disabled"],seekForwardDisabled:[4,"seek-forward-disabled"],settingsDisabled:[4,"settings-disabled"],adPlayheadPosition:[2,"ad-playhead-position"],segmentBreakPositions:[1,"segment-break-positions"],localeData:[16],preview:[16],accIndicatorState:[16],unmuteCtaVisible:[4,"unmute-cta-visible"],settings:[16],posterActive:[4,"poster-active"],posterImageUrl:[1,"poster-image-url"],qualityLabel:[2,"quality-label"],waiting:[4],initialized:[4],pausable:[4],isTouch:[4,"is-touch"],isIosNative:[4,"is-ios-native"],linkMuteAndVolume:[4,"link-mute-and-volume"],playerDimensions:[16],bufferedRanges:[16]},[[0,"action","handleAction"]]]),Hi=Z(Jt,[0,"avia-unmute-cta",{muted:[4],unmuteCtaVisible:[4,"unmute-cta-visible"],isTouch:[4,"is-touch"]}]),$i=Z(Zt,[0,"avia-volume-indicator",{volume:[2],accIndicatorState:[16]}]),Wi=Z(ei,[0,"avia-volume-slider",{volume:[2],muted:[4],linkMuteAndVolume:[4,"link-mute-and-volume"],playerDimensions:[16],durationSeconds:[2,"duration-seconds"]}]),Ki=Z(ti,[0,"avia-waiting-overlay",{waiting:[4]}]),zi=e=>{"undefined"!=typeof customElements&&[ii,ni,ri,ai,oi,si,li,ui,ci,di,hi,fi,vi,pi,gi,yi,mi,Ai,ki,bi,Ei,Ti,Si,Ci,xi,wi,Pi,_i,Ii,Li,Ni,Mi,Ri,Oi,Di,Bi,Ui,Fi,Vi,Hi,$i,Wi,Ki].forEach(t=>{customElements.get(t.is)||customElements.define(t.is,t,e)})};zi()}.call(this,i(37))},function(e,t,i){e.exports=function(){"use strict";var e={};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return e},set exports(t){e=t}});var t,i,n,r,a={},o={get exports(){return a},set exports(e){a=e}},s={},l={get exports(){return s},set exports(e){s=e}};function u(){return t||(t=1,function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(l)),s}var c,d,h,f,v={},p={get exports(){return v},set exports(e){v=e}},g={},y={get exports(){return g},set exports(e){g=e}},m={},A={get exports(){return m},set exports(e){m=e}},k={},b={get exports(){return k},set exports(e){k=e}};var E,T={},S={get exports(){return T},set exports(e){T=e}};function C(){return E||(E=1,(e=S).exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports),T;var e}var x,w,P,_={},I={get exports(){return _},set exports(e){_=e}},L={},N={get exports(){return L},set exports(e){L=e}},M={},R={get exports(){return M},set exports(e){M=e}};function O(){return x||(x=1,function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(R)),M}var D,B,U,F={},V={get exports(){return F},set exports(e){F=e}},H={},$={get exports(){return H},set exports(e){H=e}},W={},K={get exports(){return W},set exports(e){W=e}},z=e,j=z(function(){if(r)return n;r=1;var e=(i||(i=1,function(e){var t=u().default;function i(){e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var n,r={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,i){e[t]=i.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(n){h=function(e,t,i){return e[t]=i}}function f(e,t,i,n){var r=t&&t.prototype instanceof A?t:A,a=Object.create(r.prototype),o=new N(n||[]);return s(a,"_invoke",{value:P(e,i,o)}),a}function v(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var p="suspendedStart",g="executing",y="completed",m={};function A(){}function k(){}function b(){}var E={};h(E,u,function(){return this});var T=Object.getPrototypeOf,S=T&&T(T(M([])));S&&S!==a&&o.call(S,u)&&(E=S);var C=b.prototype=A.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function w(e,i){function n(r,a,s,l){var u=v(e[r],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&o.call(d,"__await")?i.resolve(d.__await).then(function(e){n("next",e,s,l)},function(e){n("throw",e,s,l)}):i.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,l)})}l(u.arg)}var r;s(this,"_invoke",{value:function(e,t){function a(){return new i(function(i,r){n(e,t,i,r)})}return r=r?r.then(a,a):a()}})}function P(e,t,i){var r=p;return function(a,o){if(r===g)throw new Error("Generator is already running");if(r===y){if("throw"===a)throw o;return{value:n,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=_(s,i);if(l){if(l===m)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===p)throw r=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var u=v(e,t,i);if("normal"===u.type){if(r=i.done?y:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=y,i.method="throw",i.arg=u.arg)}}}function _(e,t){var i=t.method,r=e.iterator[i];if(r===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=n,_(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var a=v(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(e){if(e||""===e){var i=e[u];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return k.prototype=b,s(C,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:k,configurable:!0}),k.displayName=h(b,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,d,"GeneratorFunction")),e.prototype=Object.create(C),e},r.awrap=function(e){return{__await:e}},x(w.prototype),h(w.prototype,c,function(){return this}),r.AsyncIterator=w,r.async=function(e,t,i,n,a){void 0===a&&(a=Promise);var o=new w(f(e,t,i,n),a);return r.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(C),h(C,d,"Generator"),h(C,u,function(){return this}),h(C,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=M,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,r){return s.type="throw",s.arg=e,t.next=i,r&&(t.method="next",t.arg=n),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;L(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:M(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),m}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(o)),a)();n=e;try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return n}()),G=z((c||(c=1,function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(p)),v)),q=z((f||(f=1,function(e){var t=function(){return h||(h=1,e=A,t=u().default,d||(d=1,function(e){var t=u().default;e.exports=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(b)),i=k,e.exports=function(e){var n=i(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports),m;var e,t,i}();function i(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t(r.key),r)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(y)),g)),Y=z(C()),Q=z((P||(P=1,function(e){var t=(w||(w=1,function(e){var t=O();e.exports=function(e,i){for(;!Object.prototype.hasOwnProperty.call(e,i)&&null!==(e=t(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}(N)),L);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,i,n){var r=t(e,i);if(r){var a=Object.getOwnPropertyDescriptor(r,i);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(I)),_)),X=z((B||(B=1,function(e){var t=(D||(D=1,function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}($)),H);e.exports=function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),i&&t(e,i)},e.exports.__esModule=!0,e.exports.default=e.exports}(V)),F)),J=z((U||(U=1,function(e){var t=u().default,i=C();e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(K)),W)),Z=z(O()),ee=z(u());function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=(0,Z.default)(e);if(t){var r=(0,Z.default)(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return(0,J.default)(this,i)}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var ne=Object.defineProperty,re=Object.getOwnPropertyDescriptor,ae=Object.getOwnPropertyNames,oe=Object.prototype.hasOwnProperty,se=function(e,t,i){return new Promise(function(n,r){var a=function(e){try{s(i.next(e))}catch(e){r(e)}},o=function(e){try{s(i.throw(e))}catch(e){r(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(a,o)};s((i=i.apply(e,t)).next())})},le={};!function(e,t){for(var i in t)ne(e,i,{get:t[i],enumerable:!0})}(le,{HLSJS:function(){return de},ID:function(){return ye},createAdapter:function(){return me},createHlsjsAdapter:function(){return ve},createHlsjsPlugin:function(){return pe},createPlugin:function(){return Ae},hlsjs:function(){return ge},isHlsjsSupported:function(){return fe},isSupported:function(){return ke},plugin:function(){return be}});var ue,ce=(ue=le,function(e,t,i,n){if(t&&"object"===(0,ee.default)(t)||"function"==typeof t){var r,a=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ie(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ie(e,t):void 0}}(e))){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}(ae(t));try{var o=function(){var i=r.value;oe.call(e,i)||void 0===i||ne(e,i,{get:function(){return t[i]},enumerable:!(n=re(t,i))||n.enumerable})};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}}return e}(ne({},"__esModule",{value:!0}),ue)),de="hlsjs",he="avia-load-error";function fe(e){var t,i,n=e.avia,r=e.resource,a=e.system,o=n.Browser,s=n.MimeType,l=n.Os,u=n.PlaybackAdapterBase,c=n.Util,d=a.browser===o.SAFARI,h=c.getResourceMimeType(r),f=[s.HLS,s.HLS_ALT],v=f.includes(h),p=!c.isEmpty(null==(i=null==(t=r.location.drm)?void 0:t.fairplay)?void 0:i.appCertUrl);if(v&&p)return!1;var g=a.os===l.ANDROID,y=a.osVersionInfo;if(v&&!p&&g&&y.majorVersion<5)return!1;var m=a.os===l.IOS;return!(v&&m&&!d)&&u.canPlay(e,f)}function ve(e,t){return se(this,null,j.default.mark(function i(){var n,r,a,o,s,l,u,c,d,h,f,v,p,g,y,m,A,k,b,E,T,S;return j.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=e.avia,a=e.resource,o=e.system,s=e.playerOptions,l=r.AudioTrackType,u=r.ErrorCode,c=r.PlayerHookType,d=r.PlayerError,h=r.PlaybackAdapterBase,f=r.RequestObjectType,v=r.Util,o.global.Hls){i.next=11;break}return i.prev=3,i.next=6,v.loadScript({url:(null==(n=t.dependencies)?void 0:n.hlsjs)||"//cdnjs.cloudflare.com/ajax/libs/hls.js/1.4.10/hls.min.js"},e.playerOptions,function(){return o.global.Hls});case 6:i.next=11;break;case 8:throw i.prev=8,i.t0=i.catch(3),new d(u.HLS_SDK_MISSING,"Could not load hls.js SDK",i.t0);case 11:return p=o.global.Hls,g=r.Browser,y=r.ErrorMessage,m=r.Header,A=r.LogLevel,k=r.PerformanceMode,b=r.RequestCredentials,E=r.TextTrackMode,T=r.waitForEvent,S=function(e){(0,X.default)(i,e);var t=te(i);function i(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,G.default)(this,i),(n=t.call(this,e,r,!1)).isLiveStream=!1,n.totalDuration=0,n.framerate=NaN,n.bandwidth=NaN,n.qualityInterval=NaN,n.withCredentials=!1,n.minAutoLevel=NaN,n.maxAutoLevel=NaN,n.normalizeQuality=function(e,t){return{index:t,bitrate:e.bitrate,width:e.width,height:e.height,codec:e.attrs?e.attrs.CODECS:void 0,enabled:v.validateQuality(e,n.minBitrate,n.maxBitrate,n.maxHeight,n.player.capLevelToPlayerSize&&n.video)}},n.onLevelLoaded=function(e,t){var i=t.details;n.isLiveStream=i.live,n.segmentDuration=i.averagetargetduration,n.totalDuration=i.totalduration},n.onLevelSwitched=function(e,t){var i=t.level,r=Math.min(i,n.player.maxAutoLevel);n.quality=n.qualities.find(function(e){return e.index===r}),n.delegate.qualityChange(n.quality)},n.onFragLoaded=function(e,t){var i=t.frag.stats;n.bandwidth=i.bwEstimate},n.onSubtitleTracksUpdated=function(e,t){var i=t.subtitleTracks.filter(function(e){return!e.forced}).map(function(e,t){var i;return{id:(null==(i=e.id)?void 0:i.toString())||t.toString(),language:e.lang,kind:e.type.toLowerCase(),label:e.name||e.lang,default:e.default}});n.textTracks=i,i.find(function(e){return e.default})||n.selectSubtitles(v.findDefaultTrack(i,n.context.textTrackSettings.language)),n.delegate.textTracksChange(n.textTracks)},n.onSubtitleTrackSwitch=function(e,t){var i=t.id.toString(),r=n.textTracks.find(function(e){return e.id===i});-1!==t.id&&r&&n.textTrack!==r&&n.selectSubtitles(r)},n.onAudioTracksUpdated=function(e,t){if(n.audioTracks=n.player.audioTracks.map(function(e,t){var i;return{index:t,id:null==(i=e.id)?void 0:i.toString(),type:"public.accessibility.describes-video"===e.attrs.CHARACTERISTICS?l.DESCRIPTION:l.MAIN,language:e.lang,codec:e.audioCodec,label:e.name||e.lang,default:e.default}}),n.audioTrack=n.audioTracks[n.player.audioTrack],n.delegate.audioTracksChange(n.audioTracks),-1===n.player.audioTrack){var i=v.findDefaultTrack(n.audioTracks,s.audioLanguage);i&&(n.player.audioTrack=i.index)}},n.onAudioTrackSwitched=function(e,t){n.delegate.audioTrackChange(n.audioTracks[t.id])},n.onLoadError=function(e,t){var i=t.fatal,r=n.processError(t);i?n.player.emit(he,he,r):n.error(r)},n.onError=function(e,t){n.error(n.processError(t))},n.logger.log(A.INFO,"hls.js version: ".concat(p.version));var u=e.performanceSettings,c=e.textTrackSettings,d=a.playback,h=p.DefaultConfig,y=o.browser===g.PLAYSTATION_4_MSE?1/0:u.backBufferLength,m=v.merge({debug:r.debug,autoStartLoad:!1,liveSyncDurationCount:d.liveEdgeSyncFragmentCount,maxBufferLength:u.forwardBufferLength||h.maxBufferLength,backBufferLength:y,maxMaxBufferLength:u.topQualityForwardBufferLength||h.maxMaxBufferLength,manifestLoadingMaxRetry:2,manifestLoadingRetryDelay:1e3,levelLoadingRetryDelay:500,fragLoadingRetryDelay:500,cmcd:a.cmcd.enabled?a.cmcd:null,capLevelToPlayerSize:!Number.isFinite(n.maxHeight)&&d.abr.capQualityToScreenSize,pLoader:n.createLoader((0,Y.default)(n),f.MANIFEST),fLoader:n.createLoader((0,Y.default)(n),f.SEGMENT),loader:n.createLoader((0,Y.default)(n),f.OTHER),ignoreDevicePixelRatio:d.abr.ignoreDevicePixelRatio},r.config);u.mode===k.LOW&&(Object.assign(m,{maxBufferSize:2e7,liveSyncDurationCount:6,stretchShortVideoTrack:!0,maxBufferHole:2.5,maxStarvationDelay:10,highBufferWatchdogPeriod:5,maxFragLookUpTolerance:2.5,nudgeOffset:.25,nudgeMaxRetry:5}),d.liveEdgeSyncFragmentCount=m.liveSyncDurationCount);var b=m.xhrSetup;m.xhrSetup=function(e,t){e.withCredentials=n.withCredentials,null==b||b(e,t)};var E=n.player=new p(m);E.subtitleDisplay=c.native;var T=p.Events;return E.on(T.LEVEL_LOADED,n.onLevelLoaded),E.on(T.LEVEL_SWITCHED,n.onLevelSwitched),E.on(T.FRAG_LOADED,n.onFragLoaded),E.on(T.SUBTITLE_TRACKS_UPDATED,n.onSubtitleTracksUpdated),E.on(T.SUBTITLE_TRACK_SWITCH,n.onSubtitleTrackSwitch),E.on(T.AUDIO_TRACKS_UPDATED,n.onAudioTracksUpdated),E.on(T.AUDIO_TRACK_SWITCHED,n.onAudioTrackSwitched),n}return(0,q.default)(i,[{key:"getId",value:function(){return de}},{key:"destroy",value:function(){var e=this;o.global.clearInterval(this.qualityInterval);var t=T(this.player,p.Events.MEDIA_DETACHING);return this.player.destroy(),t.then(function(){return e.player=null,(0,Q.default)((0,Z.default)(i.prototype),"destroy",e).call(e)})}},{key:"createLoader",value:function(e,t){return function(i){(0,X.default)(r,i);var n=te(r);function r(){return(0,G.default)(this,r),n.apply(this,arguments)}return(0,q.default)(r,[{key:"load",value:function(i,n,a){var o=this,s=i.url,l=i.headers,u=void 0===l?{}:l,d=e.context.resource.location.drm.aes,h=!v.isEmpty(d)&&s.includes(d.provider)&&d.header;return Promise.resolve().then(function(){var e=s.includes("akamaihd")&&s.includes("csmil")?b.INCLUDE:b.SAME_ORIGIN,t=v.createRequest(s,u,e);return h&&Object.assign(u,d.header),t}).then(function(i){if(e.delegate.hasHook(c.REQUEST)){var n={objectType:h?f.KEY:t};return e.delegate.applyHook(c.REQUEST,i,n)}return i}).then(function(t){Object.assign(i,t),e.withCredentials=t.credentials===b.INCLUDE;var n=a.onSuccess;a.onSuccess=function(t,i,r,a){return se(o,null,j.default.mark(function o(){var s;return j.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e.delegate){o.next=2;break}return o.abrupt("return");case 2:if(!e.delegate.hasHook(c.RESPONSE)){o.next=6;break}return o.next=5,e.delegate.applyHook(c.RESPONSE,t);case 5:t=o.sent;case 6:t.url.includes(".ts")&&null!=(s=v.getHeader(m.MULTI_CDN,a.getAllResponseHeaders()))&&e.delegate.cdnChange(s),n(t,i,r,a);case 8:case"end":return o.stop()}},o)}))}}).then(function(){(0,Q.default)((0,Z.default)(r.prototype),"load",o).call(o,i,n,a)})}}]),r}(p.DefaultConfig.loader)}},{key:"load",value:function(){var e=this;return(0,Q.default)((0,Z.default)(i.prototype),"load",this).call(this).then(function(t){return se(e,null,j.default.mark(function e(){var i,n,r;return j.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.player.on(p.Events.ERROR,this.onLoadError),this.player.attachMedia(this.video),e.next=4,T(this.player,p.Events.MEDIA_ATTACHED,he);case 4:return this.player.loadSource(a.location.mediaUrl),e.next=7,T(this.player,p.Events.MANIFEST_LOADED,he);case 7:return i=e.sent,this.initQualityInfo(),this.initNativeTextTracks(i),n=a.playback.startTime,this.player.startLoad(v.isValidPlayheadTime(n)?n:-1),this.setBitrateRestrictionAtStartup(),e.next=15,T(this.player,p.Events.FRAG_LOADING,he);case 15:return r=e.sent,this.player.off(p.Events.ERROR,this.onLoadError),this.player.on(p.Events.ERROR,this.onError),this.suppressErrors=!1,t.fragment.mimeType=v.getMimeType(r.frag.url),e.abrupt("return",t);case 21:case"end":return e.stop()}},e,this)}))})}},{key:"suspend",value:function(){this.player.stopLoad()}},{key:"resume",value:function(){this.player.startLoad()}},{key:"setTextTrack",value:function(e){e&&(this.textTrackSurface?(0,Q.default)((0,Z.default)(i.prototype),"setTextTrack",this).call(this,e):this.player.subtitleTrack=parseInt(e.id))}},{key:"setTextTrackMode",value:function(e){this.textTrackSurface?(0,Q.default)((0,Z.default)(i.prototype),"setTextTrackMode",this).call(this,e):(this.enabledSubtitles(e),this.delegate.textTrackDisplayModeChange(e))}},{key:"setMinBitrate",value:function(e){(0,Q.default)((0,Z.default)(i.prototype),"setMinBitrate",this).call(this,e),this.player.config.minAutoBitrate=e-1,this.updateQualityInfo()}},{key:"setMaxBitrate",value:function(e){(0,Q.default)((0,Z.default)(i.prototype),"setMaxBitrate",this).call(this,e);var t=isNaN(e)||!Number.isFinite(e);this.player.capLevelToPlayerSize=!!t&&a.playback.abr.capQualityToScreenSize,this.player.autoLevelCapping=t?-1:v.getMaxBitrateIndex(this.player.levels,e),this.updateQualityInfo()}},{key:"setAutoQualitySwitching",value:function(e){this.player.loadLevel=e?-1:this.player.nextLoadLevel}},{key:"setQuality",value:function(e){this.player.loadLevel=e.index}},{key:"setAudioTrack",value:function(e){e?(this.player.audioTrack=e.index,this.enabledSubtitles()):this.logger.log(A.INFO,"hls.js: Audio track is null, will not set.")}},{key:"getIsLiveStream",value:function(){return this.isLiveStream}},{key:"getMetrics",value:function(){return{droppedVideoFrames:NaN,framerate:this.framerate,bandwidth:this.bandwidth}}},{key:"resize",value:function(){this.setBitrateRestrictionAtStartup()}},{key:"getSeekable",value:function(){var e=this.video.duration;return{start:this.getIsLiveStream()?e-this.totalDuration:0,end:e}}},{key:"onCueChange",value:function(e){(0,Q.default)((0,Z.default)(i.prototype),"onCueChange",this).call(this,e,this.player.subtitleTracks[this.player.subtitleTrack].forced)}},{key:"initQualityInfo",value:function(){var e=this;this.qualityInterval=o.global.setInterval(function(){var t=e.player,i=t.minAutoLevel,n=t.maxAutoLevel;i===e.minAutoLevel&&n===e.maxAutoLevel||(e.minAutoLevel=i,e.maxAutoLevel=n,e.updateQualityInfo())},250),this.updateQualityInfo()}},{key:"updateQualityInfo",value:function(){this.qualities=this.player.levels.map(this.normalizeQuality),this.updateQualities()}},{key:"initNativeTextTracks",value:function(e){var t,i=null==(t=e.subtitles)?void 0:t.length,n=this.context.resource.location.textTrackUrl;if(i)return n&&this.logger.warn("Detected subtitles in the manifest. Ignoring resource's textTrackUrl"),void(e.captions&&this.logger.warn("Detected subtitles in the manifest. Ignoring manifest captions"));this.textTrackSurface=this.createTextTrackSurface()}},{key:"selectSubtitles",value:function(e){this.textTrack=e,this.delegate.textTrackChange(e),this.enabledSubtitles()}},{key:"enabledSubtitles",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context.textTrackSettings.mode)!==E.DISABLED)this.listenToTextTracks(!0),this.setTextTrack(this.textTrack);else{var e=this.player.audioTracks[this.player.audioTrack],t=-1;if(e){var i=e.lang;t=this.player.subtitleTracks.findIndex(function(e){return e.forced&&e.lang===i})}this.listenToTextTracks(-1!==t),this.player.subtitleTrack=t}}},{key:"setBitrateRestrictionAtStartup",value:function(){Number.isFinite(this.minBitrate)&&this.setMinBitrate(Math.max(this.minBitrate-1,0)),Number.isFinite(this.maxBitrate)&&this.setMaxBitrate(this.maxBitrate);var e=a.playback.abr.startBitrate;if(Number.isFinite(e)&&(this.player.config.startLevel=v.getMaxBitrateIndex(this.player.levels,e)),Number.isFinite(this.maxHeight)){var t=v.getMaxIndexForHeight(this.player.levels,this.maxHeight);isNaN(t)||(this.player.capLevelToPlayerSize=!1,this.player.autoLevelCapping=t)}this.updateQualities()}},{key:"processError",value:function(e){var t=u.UNSPECIFIED_HLSJS_ERROR;switch(e.type){case p.ErrorTypes.NETWORK_ERROR:return this.processNetworkErrors(e);case p.ErrorTypes.MEDIA_ERROR:return this.processMediaErrors(e);case p.ErrorTypes.MUX_ERROR:t=u.HLSJS_MUX_ERROR;default:var i=this.getErrorMessage("".concat(e.details),e.fatal);return this.createError(t,i,e,e.fatal)}}},{key:"processNetworkErrors",value:function(e){var t=p.ErrorDetails,i=e.fatal?y.FATAL_PLAYBACK_NETWORK_ERROR:y.NONFATAL_PLAYBACK_NETWORK_ERROR;switch(e.details){case t.LEVEL_LOAD_ERROR:case t.FRAG_LOAD_ERROR:return this.createError(u.HLSJS_NETWORK_ERROR,i,e,e.fatal);case t.MANIFEST_PARSING_ERROR:return this.createError(u.HLSJS_PARSE_ERROR,"".concat(i," : ").concat(e.details),e,e.fatal);default:return this.createError(u.HLSJS_NETWORK_ERROR,"".concat(i," : ").concat(e.details),e,e.fatal)}}},{key:"processMediaErrors",value:function(e){var t=p.ErrorDetails,i=e.fatal?y.FATAL_PLAYBACK_MEDIA_ERROR:y.NONFATAL_PLAYBACK_MEDIA_ERROR;return e.details===t.MANIFEST_INCOMPATIBLE_CODECS_ERROR?this.createError(u.HLSJS_SRC_NOT_SUPPORTED,"".concat(i," : ").concat(e.details),e,e.fatal):this.createError(u.HLSJS_MEDIA_ERROR,"".concat(i," : ").concat(e.details),e,e.fatal)}}]),i}(h),i.abrupt("return",new S(e,t));case 15:case"end":return i.stop()}},i,null,[[3,8]])}))}function pe(e,t){var i=e.avia;return e.player.registerAdapter({id:de,role:[i.AdapterRole.PLAYBACK],options:t,factory:ve,isSupported:fe}),{getId:function(){return de},destroy:function(){}}}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:de,factory:pe,options:e}}var ye=de,me=ve,Ae=pe,ke=fe,be=ge;return ce}()},function(e,t,i){e.exports=function(){"use strict";var e={};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}({get exports(){return e},set exports(t){e=t}});var t,i,n,r,a={},o={get exports(){return a},set exports(e){a=e}},s={},l={get exports(){return s},set exports(e){s=e}};function u(){return t||(t=1,function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(l)),s}var c,d,h,f={},v={get exports(){return f},set exports(e){f=e}},p={},g={get exports(){return p},set exports(e){p=e}},y={},m={get exports(){return y},set exports(e){y=e}};function A(){return c||(c=1,function(e){function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(m)),y}var k,b,E,T,S,C,x,w,P={},_={get exports(){return P},set exports(e){P=e}},I={},L={get exports(){return I},set exports(e){I=e}},N={},M={get exports(){return N},set exports(e){N=e}},R={},O={get exports(){return R},set exports(e){R=e}},D={},B={get exports(){return D},set exports(e){D=e}},U={},F={get exports(){return U},set exports(e){U=e}},V={},H={get exports(){return V},set exports(e){V=e}},$={},W={get exports(){return $},set exports(e){$=e}};var K=e,z=K(function(){if(r)return n;r=1;var e=(i||(i=1,function(e){var t=u().default;function i(){e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var n,r={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,i){e[t]=i.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(n){h=function(e,t,i){return e[t]=i}}function f(e,t,i,n){var r=t&&t.prototype instanceof A?t:A,a=Object.create(r.prototype),o=new N(n||[]);return s(a,"_invoke",{value:P(e,i,o)}),a}function v(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var p="suspendedStart",g="executing",y="completed",m={};function A(){}function k(){}function b(){}var E={};h(E,u,function(){return this});var T=Object.getPrototypeOf,S=T&&T(T(M([])));S&&S!==a&&o.call(S,u)&&(E=S);var C=b.prototype=A.prototype=Object.create(E);function x(e){["next","throw","return"].forEach(function(t){h(e,t,function(e){return this._invoke(t,e)})})}function w(e,i){function n(r,a,s,l){var u=v(e[r],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==t(d)&&o.call(d,"__await")?i.resolve(d.__await).then(function(e){n("next",e,s,l)},function(e){n("throw",e,s,l)}):i.resolve(d).then(function(e){c.value=e,s(c)},function(e){return n("throw",e,s,l)})}l(u.arg)}var r;s(this,"_invoke",{value:function(e,t){function a(){return new i(function(i,r){n(e,t,i,r)})}return r=r?r.then(a,a):a()}})}function P(e,t,i){var r=p;return function(a,o){if(r===g)throw new Error("Generator is already running");if(r===y){if("throw"===a)throw o;return{value:n,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var l=_(s,i);if(l){if(l===m)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===p)throw r=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=g;var u=v(e,t,i);if("normal"===u.type){if(r=i.done?y:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=y,i.method="throw",i.arg=u.arg)}}}function _(e,t){var i=t.method,r=e.iterator[i];if(r===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=n,_(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var a=v(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,m;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(e){if(e||""===e){var i=e[u];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}throw new TypeError(t(e)+" is not iterable")}return k.prototype=b,s(C,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:k,configurable:!0}),k.displayName=h(b,d,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,h(e,d,"GeneratorFunction")),e.prototype=Object.create(C),e},r.awrap=function(e){return{__await:e}},x(w.prototype),h(w.prototype,c,function(){return this}),r.AsyncIterator=w,r.async=function(e,t,i,n,a){void 0===a&&(a=Promise);var o=new w(f(e,t,i,n),a);return r.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},x(C),h(C,d,"Generator"),h(C,u,function(){return this}),h(C,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=M,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,r){return s.type="throw",s.arg=e,t.next=i,r&&(t.method="next",t.arg=n),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;L(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:M(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),m}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(o)),a)();n=e;try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return n}()),j=K((h||(h=1,function(e){var t=(d||(d=1,function(e){var t=A();e.exports=function(e,i){for(;!Object.prototype.hasOwnProperty.call(e,i)&&null!==(e=t(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports}(g)),p);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,i,n){var r=t(e,i);if(r){var a=Object.getOwnPropertyDescriptor(r,i);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}(v)),f)),G=K((b||(b=1,function(e){var t=(k||(k=1,function(e){function t(i,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(L)),I);e.exports=function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),i&&t(e,i)},e.exports.__esModule=!0,e.exports.default=e.exports}(_)),P)),q=K((T||(T=1,function(e){var t=u().default,i=(E||(E=1,function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}(O)),R);e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(M)),N)),Y=K(A()),Q=K((S||(S=1,function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(B)),D)),X=K((w||(w=1,function(e){var t=function(){return x||(x=1,e=H,t=u().default,C||(C=1,function(e){var t=u().default;e.exports=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(W)),i=$,e.exports=function(e){var n=i(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports),V;var e,t,i}();function i(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t(r.key),r)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(F)),U)),J=K(u());function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=(0,Y.default)(e);if(t){var r=(0,Y.default)(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return(0,q.default)(this,i)}}function ee(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return te(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?te(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var ie=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,re=Object.getOwnPropertyNames,ae=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,le=function(e,t,i){return t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i},ue=function(e,t){for(var i in t||(t={}))oe.call(t,i)&&le(e,i,t[i]);if(ae){var n,r=ee(ae(t));try{for(r.s();!(n=r.n()).done;)i=n.value,se.call(t,i)&&le(e,i,t[i])}catch(e){r.e(e)}finally{r.f()}}return e},ce=function(e,t,i){return new Promise(function(n,r){var a=function(e){try{s(i.next(e))}catch(e){r(e)}},o=function(e){try{s(i.throw(e))}catch(e){r(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(a,o)};s((i=i.apply(e,t)).next())})},de={};!function(e,t){for(var i in t)ie(e,i,{get:t[i],enumerable:!0})}(de,{GAM:function(){return We},ID:function(){return je},createGamPlugin:function(){return ze},createPlugin:function(){return Ge},gam:function(){return Ke},plugin:function(){return qe}});var he,fe=(he=de,function(e,t,i,n){if(t&&"object"===(0,J.default)(t)||"function"==typeof t){var r,a=ee(re(t));try{var o=function(){var i=r.value;oe.call(e,i)||void 0===i||ie(e,i,{get:function(){return t[i]},enumerable:!(n=ne(t,i))||n.enumerable})};for(a.s();!(r=a.n()).done;)o()}catch(e){a.e(e)}finally{a.f()}}return e}(ie({},"__esModule",{value:!0}),he)),ve=function(){function e(t){(0,Q.default)(this,e),this.req=t}return(0,X.default)(e,[{key:"adTagParameters",get:function(){return this.req.adTagParameters},set:function(e){this.req.adTagParameters=e}},{key:"apiKey",get:function(){return this.req.apiKey},set:function(e){this.req.apiKey=e}},{key:"authToken",get:function(){return this.req.authToken},set:function(e){this.req.authToken=e}},{key:"format",get:function(){return this.req.format||"hls"},set:function(e){this.req.format=e}},{key:"assetKey",get:function(){return this.req.assetKey},set:function(e){this.req.assetKey=e}}]),e}(),pe=function(){function e(t,i,n,r){(0,Q.default)(this,e),this.ad=null,this.type=t,this.data=n,this.detail=this.data,this.target=i,r&&(this.ad=r)}return(0,X.default)(e,[{key:"Type",get:function(){return e.Type}},{key:"getAd",value:function(){return this.ad}},{key:"getStreamData",value:function(){return this.data}}]),e}();pe.Type={LOADED:"loaded",AD_BREAK_STARTED:"adBreakStarted",AD_BREAK_ENDED:"adBreakEnded",STARTED:"started",COMPLETE:"complete",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",AD_PERIOD_STARTED:"adPeriodStarted",AD_PERIOD_ENDED:"adPeriodEnded",CUEPOINTS_CHANGED:"cuePointsChanged",STREAM_INITIALIZED:"streamInitialized",SKIPPED:"adskipped",SKIPPABLE_STATE_CHANGED:"skippablestatechanged",ERROR:"error",AD_PROGRESS:"adProgress",CLICK:"click"};var ge=function(){function e(t,i){(0,Q.default)(this,e),this.data=t,this.podInfo=i}return(0,X.default)(e,[{key:"getAdId",value:function(){return this.data.ad_id}},{key:"getAdPodInfo",value:function(){return this.podInfo}},{key:"getAdSystem",value:function(){return this.data.advertiser||null}},{key:"getAdvertiserName",value:function(){return this.data.advertiser||null}},{key:"getApiFramework",value:function(){return null}},{key:"getCreativeAdId",value:function(){return this.data.creative_ad_id}},{key:"getCreativeId",value:function(){return this.data.creative_id}},{key:"getDealId",value:function(){return this.data.deal_id||null}},{key:"getDescription",value:function(){return this.data.description}},{key:"getDuration",value:function(){return this.data.duration}},{key:"getTitle",value:function(){return this.data.title}},{key:"getDaiWrapperData",value:function(){var e=null,t=null,i=null;if(this.data.wrappers&&this.data.wrappers[0]){var n=this.data.wrappers[0];e=n.ad_id,t=n.creative_id,i=n.creative_ad_id}return{adId:e,creativeId:t,creativeAdId:i}}},{key:"getWrapperAdIds",value:function(){return this.getWrapperPropArray("ad_id")}},{key:"getWrapperCreativeIds",value:function(){return this.getWrapperPropArray("creative_id")}},{key:"getWrapperCreativeAdIds",value:function(){return this.getWrapperPropArray("creative_ad_id")}},{key:"getWrapperAdSystems",value:function(){return this.getWrapperPropArray("system")}},{key:"getCompanionAds",value:function(){return null}},{key:"getWrapperPropArray",value:function(e){var t,i=[],n=this.data.wrappers||null;if(!n)return null;for(var r=0,a=n.length;r<a;r++)(t=n[r][e])&&""!==t&&i.push(t);return i}}]),e}(),ye=function(){function e(t,i,n){(0,Q.default)(this,e),this.data=t,this.podIdx=n,this.pos=i}return(0,X.default)(e,[{key:"getAdPosition",value:function(){return this.pos}},{key:"setAdPosition",value:function(e){this.pos=e}},{key:"getMaxDuration",value:function(){var e;return null==(e=this.data)?void 0:e.duration}},{key:"getPodIndex",value:function(){return this.podIdx}},{key:"setPodIndex",value:function(e){this.podIdx=e}},{key:"getTimeOffset",value:function(){return this.data.start}},{key:"getTotalAds",value:function(){return this.data.ads&&this.data.ads.length}}]),e}(),me=function(){function e(t,i,n,r){(0,Q.default)(this,e),this.eventStatusMap={start:e.event.STARTED,firstquartile:e.event.FIRST_QUARTILE,midpoint:e.event.MIDPOINT,thirdquartile:e.event.THIRD_QUARTILE,complete:e.event.COMPLETE},this.adBreaks=[],this.currBreak=null,this.liveBreakInProgress=!1,this.currBreakIndex=null,this.currAd=null,this.currAdTzero=null,this.breakStatus={},this.breakPoints=[],this.pollId=null,this.lastRecordedTime=-1,this.playedAds=[],this.liveMetadata={},this.idCache=[],this.aviaSdk=r,this.emitter=new this.aviaSdk.Emitter,this.currEventStatus=this.createEventStatus(),this.currBreakIndex=null,this.vidIface=t,this.logger=n,this.setClickElement(i)}return(0,X.default)(e,[{key:"skipCurrentAd",value:function(){var e=(this.currAd.start||0)+this.currAd.duration;return this.resetUponAdComplete(),e}},{key:"addEventListener",value:function(e,t){this.emitter.on(e,t)}},{key:"removeEventListener",value:function(e,t){this.emitter.off(e,t)}},{key:"requestStream",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.assetKey)return this.isLive=!0,void this.requestLiveStream(e,i);e.apiKey&&(e.adTagParameters["api-key"]=e.apiKey),e.authToken&&(e.adTagParameters["auth-token"]=e.authToken),this.aviaSdk.Util.request({method:this.aviaSdk.RequestMethod.POST,errorRecovery:i,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:this.getUrl(e),data:e.adTagParameters,responseType:this.aviaSdk.ResponseType.JSON}).then(function(e){t.gatherStreamInfo(e),t.emitCues(),t.beginPoll(),t.emitLoaded(e)}).catch(function(e){var i="Error. Status: ".concat(e.status||"Unknown","; Message: ").concat(e.message);t.logger.log(t.aviaSdk.LogLevel.ERROR,i),t.emitError(i,t.aviaSdk.ErrorCode.DAI_NETWORK_ERROR)})}},{key:"requestLiveStream",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.aviaSdk.request({method:this.aviaSdk.RequestMethod.POST,errorRecovery:i,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:this.getUrl(e),data:e.adTagParameters}).then(function(e){if(e.stream_manifest)if(t.mediaVerificationUrl=e.media_verification_url,t.streamId=e.stream_id,t.emitLoaded(e),e.metadata_url){var i=1e3*e.polling_frequency;!function n(){clearTimeout(t.liveMetadataPollTimeout),t.aviaSdk.request({url:e.metadata_url,responseType:t.aviaSdk.ResponseType.JSON}).then(function(e){t.aviaSdk.Util.isEmpty(e.tags)||(t.liveMetadata={tags:ue(ue({},t.liveMetadata.tags),e.tags),ads:ue(ue({},t.liveMetadata.ads),e.ads),ad_breaks:ue(ue({},t.liveMetadata.ad_breaks),e.ad_breaks)})}).catch(function(e){t.aviaSdk.Logger.warn("DAI API StreamManager: polling error: ".concat(e))}).then(function(){t.liveMetadataPollTimeout=setTimeout(n,i)})}()}else t.aviaSdk.Logger.warn("DAI API StreamManager: metadata_url not found in API response");else t.emitError("DAI API: Stream manifest not found in response",t.aviaSdk.ErrorCode.DAI_DATA_ERROR)}).catch(function(e){t.emitError("DAI API live stream request error",t.aviaSdk.ErrorCode.DAI_NETWORK_ERROR)})}},{key:"setClickElement",value:function(e){var t=this;e&&(this.clickEl=e||null,this.clickThruHandler=function(){t.hClickThru()},this.clickEl.addEventListener("click",this.clickThruHandler))}},{key:"contentTimeForStreamTime",value:function(e){var t,i=this.adBreaks,n=0;void 0===e&&(e=this.streamDur);for(var r=0,a=i.length;r<a;r++){if(!(e>(t=i[r]).start))return e-n;if(!(e>=t.end))return t.start-n;if(n+=t.duration,r===a-1)return e-n}return e}},{key:"streamTimeForContentTime",value:function(e){for(var t,i=this.adBreaks,n=0,r=0,a=i.length;r<a&&(t=i[r],e>=this.contentTimeForStreamTime(i[r].start));r++)n+=t.duration;return e+n}},{key:"previousCuePointForStreamTime",value:function(e){for(var t,i=this.adBreaks,n=i.length;n--;)if(e>=(t=i[n]).start)return t.played?null:this.cuePointFromBreak(t);return null}},{key:"onTimedMetadata",value:function(e){var t=this;if(this.isLive)this.processLiveMetadata(e);else{var i=e.TXXX;this.idCache.includes(i)||(this.idCache.push(i),this.aviaSdk.request({url:this.mediaVerificationUrl+i,responseType:this.aviaSdk.ResponseType.JSON}).catch(function(e){t.logger.warn("Dropped verification request for ".concat(i||"null"))}))}}},{key:"processMetadata",value:function(){}},{key:"reset",value:function(){clearTimeout(this.liveMetadataPollTimeout),clearInterval(this.pollId),this.clickEl&&this.clickEl.removeEventListener("click",this.clickThruHandler),this.clickEl=null,this.streamId=null,this.adBreaks=[],this.breakPoints=[],this.streamDur=NaN,this.currBreak=null,this.currBreakIndex=null,this.liveBreakInProgress=!1,this.currAd=null,this.mediaVerificationUrl=null,this.resetUponAdComplete(),this.lastRecordedTime=-1,this.pollId=null,this.liveMetadata=null}},{key:"processLiveMetadata",value:function(e){var t,i,n,r=this,a=e.TXXX,o=this.liveMetadata,s=o&&(null==(t=Object.keys(o.tags||{}))?void 0:t.find(function(e){return a.includes(e)}));if(s){var l=o.tags[s],u=l.type,c=l.ad_break_id,d=o.ad_breaks[c].ads,h=o.ads[l.ad],f={firstquartile:"first",midpoint:"mid",thirdquartile:"third",start:"start",complete:"complete"};if(this.hasPlayed(h.ad_id))"complete"===u&&d&&(null==h?void 0:h.position)===d&&(this.resetUponAdComplete(),this.endBreak());else{var v=this.currEventStatus,p=function(e,t){v[f[t]]=!0,r.aviaSdk.request({url:r.mediaVerificationUrl+e,responseType:r.aviaSdk.ResponseType.JSON}).catch(function(e){"Unable to parse response."!==e.message&&r.logger.warn("DAI media verification error: ".concat(e.message))})};if("start"!==u||v[f[u]])if("complete"!==u||v[f[u]]){if(this.currAd&&(u.includes("mid")||u.includes("quartile"))&&this.eventStatusMap[u]&&!v[f[u]])this.emit(this.eventStatusMap[u],this.createStreamData({})),p(a,u);else if("progress"===u&&(null==h?void 0:h.ad_id)&&!this.hasPlayed(null==h?void 0:h.ad_id)){var g=(null==(n=this.currAd)?void 0:n.duration)?.001*(Date.now()-this.currAdTzero):0;this.emitProgress(g)}}else(null==(i=this.currAd)?void 0:i.duration)&&this.emitProgress(null),this.currAd&&(this.markAsPlayed(h.ad_id),this.emitAdComplete(),p(a,u)),this.resetUponAdComplete(),h.position===d&&this.endBreak();else{if(!this.liveBreakInProgress){var y=o.ad_breaks[c],m={adsTotal:y.ads,type:y.type,duration:y.duration};this.beginBreak(m)}this.beginAd(h,h.ad_id),p(a,u)}}}else this.logger.warn("ID ".concat(a," not found in metadata.tags"))}},{key:"markAsPlayed",value:function(e){this.playedAds.push(e)}},{key:"hasPlayed",value:function(e){return e&&this.playedAds.indexOf(e)>=0}},{key:"beginPoll",value:function(){var e=this;clearInterval(this.pollId),this.pollId=setInterval(function(){e.checkState()},100)}},{key:"checkState",value:function(){var e=this.vidIface.currentTime;if(!isNaN(e)&&e>0&&e>this.lastRecordedTime){if(!this.currBreak){var t=this.getBreakForStreamTime(e).break;t&&t.played?this.emitAdPeriodStarted(t):t&&(this.currBreak=t,this.beginBreak(t))}if(this.currBreak){var i=this.currBreak;e>=i.end?(this.monitorAdStatus(e,i),this.endBreak()):this.monitorAdStatus(e,i)}}!isNaN(e)&&e>=0&&(this.lastRecordedTime=e)}},{key:"monitorAdStatus",value:function(e,t){var i=t.ads,n=t.start;if(this.currAd)this.monitorCurrentAd(e);else for(var r,a=i.length;a--;)if((e>=(r=i[a].start||0)||void 0===r)&&!this.breakStatus["t_".concat(n)]["t_".concat(r)]){var o=t.type.toLowerCase();this.currBreakIndex="pre"===o?0:"mid"===o?t.index:-1,this.beginAd(i[a],r);break}}},{key:"monitorCurrentAd",value:function(e){for(var t,i=this.currAd.events,n=this.currEventStatus,r=!0,a=i.length;a--;)if(e>=(t=i[a]).time&&!n[t.type]){if(n[t.type]=!0,"complete"===t.type||e>=this.currAd.start+this.currAd.duration){r=!1,this.emitAdComplete(),this.resetUponAdComplete();break}if("start"!==t.type){r=!1,this.emit(this.eventStatusMap[t.type],this.createStreamData({}));break}}r&&this.emitProgress(e)}},{key:"resetUponAdComplete",value:function(){this.currEventStatus=this.createEventStatus(),this.currAd=null,this.currAdTzero=null}},{key:"beginBreak",value:function(t){this.currBreak=t,this.currBreak.played=!0,this.liveBreakInProgress=this.isLive,this.isLive||this.emitCues(),this.emit(e.event.AD_BREAK_STARTED,this.createStreamData({}))}},{key:"endBreak",value:function(){this.emit(e.event.AD_BREAK_ENDED,this.createStreamData({})),this.currBreak=null}},{key:"beginAd",value:function(t,i){var n,r,a;this.currAd=t,this.currBreak=this.isLive?null==(r=null==(n=this.liveMetadata)?void 0:n.ad_breaks)?void 0:r[t.ad_break_id]:this.currBreak,this.currAdTzero=Date.now(),this.isLive||(this.breakStatus["t_".concat(null==(a=this.currBreak)?void 0:a.start)]["t_".concat(i)]=!0,this.currEventStatus.start=!0);var o=null!==this.currAd.seq?this.currAd.seq:this.currAd.position,s=new ye(this.currBreak,o,this.currBreakIndex),l=new ge(this.currAd,s),u=new pe(e.event.STARTED,this,this.createStreamData({}),l);this.emitter.dispatchEvt(u)}},{key:"hClickThru",value:function(){if(this.currAd){var t=this.currAd.clickthrough_url;t&&""!==t&&window.open(t),this.emit(e.event.CLICK)}}},{key:"emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=new pe(e,this,t);this.emitter.dispatchEvt(i)}},{key:"emitCues",value:function(){this.isLive||this.emit(e.event.CUEPOINTS_CHANGED,this.createStreamData({cuepoints:this.assembleCuePoints()}))}},{key:"emitProgress",value:function(t,i){var n,r=this.createAdProgressData(t,i||(null==(n=this.currAd)?void 0:n.duration));this.emit(e.event.AD_PROGRESS,this.createStreamData({adProgressData:r}))}},{key:"emitLoaded",value:function(t){this.emit(e.event.LOADED,this.createStreamData({subtitles:t.subtitles,manifestFormat:this.getFormat(t.stream_manifest),url:t.stream_manifest,streamId:t.stream_id}))}},{key:"emitAdComplete",value:function(){this.isLive||this.emitProgress(null),this.emit(e.event.COMPLETE,this.createStreamData({}))}},{key:"emitError",value:function(t,i){var n=this.createStreamData({errorMessage:t,code:i});this.emit(e.event.ERROR,n)}},{key:"emitAdPeriodStarted",value:function(t){this.emitter.emit(e.event.AD_PERIOD_STARTED,this.createStreamData({streamResumeTime:t?t.start+t.duration+.1:null}))}},{key:"createAdProgressData",value:function(e){var t,i,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{adBreakDuration:(null==(t=this.currBreak)?void 0:t.duration)||null,adPeriodDuration:null,adPosition:(null==(i=this.currAd)?void 0:i.seq)||null,currentTime:e?this.aviaSdk.Util.clampValue(e-((null==(n=this.currAd)?void 0:n.start)||0),0,o||0):o||0,duration:o||-1,totalAds:(null==(a=null==(r=this.currBreak)?void 0:r.ads)?void 0:a.length)||null}}},{key:"createEventStatus",value:function(){return{start:!1,first:!1,mid:!1,third:!1,complete:!1}}},{key:"assembleCuePoints",value:function(){for(var e=[],t=0,i=this.adBreaks.length;t<i;t++)e.push(this.cuePointFromBreak(this.adBreaks[t]));return e}},{key:"getBreakForStreamTime",value:function(e){for(var t,i=0,n=this.adBreaks.length;i<n;i++)if(e>=(t=this.adBreaks[i]).start&&e-t.start<=1.5&&!this.currBreak)return{break:t,index:i};return{break:null,index:null}}},{key:"getUrl",value:function(e){var t=!!e.assetKey,i=t?"https://dai.google.com/linear/v1/{FORMAT}/event/{ASSET_KEY}/stream":"https://dai.google.com/ondemand/v1/{FORMAT}/content/{CONTENT_SOURCE_ID}/vid/{VIDEO_ID}/stream";return t?i.replace("{FORMAT}",e.format||"hls").replace("{ASSET_KEY}",e.assetKey):i.replace("{FORMAT}",e.format).replace("{CONTENT_SOURCE_ID}",e.contentSourceId).replace("{VIDEO_ID}",e.videoId)}},{key:"cuePointFromBreak",value:function(e){return{start:e.start,end:e.end,played:e.played}}},{key:"createStreamData",value:function(e){return{adProgressData:(null==e?void 0:e.adProgressData)||null,cuepoints:(null==e?void 0:e.cuepoints)||null,errorMessage:(null==e?void 0:e.errorMessage)||null,streamId:this.streamId||null,manifestFormat:(null==e?void 0:e.manifestFormat)||null,subtitles:(null==e?void 0:e.subtitles)||null,url:(null==e?void 0:e.url)||null,streamResumeTime:(null==e?void 0:e.streamResumeTime)||null,code:(null==e?void 0:e.code)||null}}},{key:"getFormat",value:function(e){return e.indexOf(".m3u8")>=0?this.aviaSdk.VideoFormat.HLS:e.indexOf(".mpd")>=0?this.aviaSdk.VideoFormat.DASH:this.aviaSdk.VideoFormat.UNKNOWN}},{key:"gatherBreakInfo",value:function(e){for(var t,i,n,r,a=e&&e.length||0,o=1,s=0;s<a;s++)if(n=(i=(t=e[s]).start)+(r=t.duration),this.breakPoints.push(i),this.adBreaks.push({duration:r,start:i,end:n,played:!1,type:t.type,ads:t.ads,index:s,seq:"mid"===t.type?o++:0}),!this.isLive)for(var l=this.breakStatus["t_"+i]={},u=0,c=t.ads.length;u<c;u++)l["t_"+(t.ads[u].start||0)]=!1}},{key:"gatherStreamInfo",value:function(e){this.streamDur=e.total_duration,this.mediaVerificationUrl=e.media_verification_url,this.streamId=e.stream_id,this.gatherBreakInfo(e.ad_breaks)}}]),e}();me.event={LOADED:"loaded",STREAM_INITIALIZED:"streamInitialized",CUEPOINTS_CHANGED:"cuePointsChanged",AD_BREAK_STARTED:"adBreakStarted",AD_BREAK_ENDED:"adBreakEnded",STARTED:"started",COMPLETE:"complete",AD_PROGRESS:"adProgress",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",CLICK:"click",ERROR:"error",SKIPPED:"skipped",SKIPPABLE_STATE_CHANGED:"skippablestatechanged",AD_PERIOD_STARTED:"adPeriodStarted",AD_PERIOD_ENDED:"adPeriodEnded"};var Ae={StreamManager:me,StreamEvent:pe,VODStreamRequest:function(){function e(t){(0,Q.default)(this,e),this.req=t}return(0,X.default)(e,[{key:"adTagParameters",get:function(){return this.req.adTagParameters},set:function(e){this.req.adTagParameters=e}},{key:"videoId",get:function(){return this.req.videoId},set:function(e){this.req.videoId=e}},{key:"contentSourceId",get:function(){return this.req.contentSourceId},set:function(e){this.req.contentSourceId=e}},{key:"apiKey",get:function(){return this.req.apiKey},set:function(e){this.req.apiKey=e}},{key:"authToken",get:function(){return this.req.authToken},set:function(e){this.req.authToken=e}},{key:"format",get:function(){return this.req.format||"hls"},set:function(e){this.req.format=e}},{key:"assetKey",get:function(){return this.req.assetKey},set:function(e){this.req.assetKey=e}}]),e}(),LiveStreamRequest:ve},ke=function(){function e(t,i){(0,Q.default)(this,e),this.options=t,this.context=i}return(0,X.default)(e,[{key:"destroy",value:function(){this.options=null,this.context=null}},{key:"playClicked",value:function(){}},{key:"adService",get:function(){return this.options.adService}},{key:"player",get:function(){return this.context.player}},{key:"aviaSdk",get:function(){return this.context.avia}},{key:"csai",get:function(){return this.context.resource.ad.csai}},{key:"logger",get:function(){return this.context.logger}},{key:"log",value:function(e,t){if(this.logger.log(this.aviaSdk.LogLevel.DEBUG,"Ad Adapter (".concat(this.adService.getAdSystem(),"): ").concat(e)),t)for(var i in t)this.logger.log(this.aviaSdk.LogLevel.DEBUG,"".concat(i,": ").concat(t[i]))}}]),e}(),be=function(){function e(t,i,n,r,a){(0,Q.default)(this,e),this.breaks=[],this.streamDuration=i,this.appContext=t,r?this.createBreaksFromTimes(r):a&&this.createBreaksFromCuepoints(a,n)}return(0,X.default)(e,[{key:"destroy",value:function(){this.breaks=null,this.appContext=null}},{key:"getBreakById",value:function(e){return this.breaks.find(function(t){return t.breakId===e})}},{key:"adBreaks",get:function(){return this.breaks}},{key:"updateBreaks",value:function(e){for(var t=[],i=e.length;i--;)e[i].played&&t.push(e[i].start);this.breaks.forEach(function(e){!e.hasPlayed&&t.indexOf(e.streamStartTime)>=0&&(e.hasPlayed=!0)})}},{key:"getBreakForContentSeekTime",value:function(e){return this.processMid(function(t){return t.startTime<=e?t.hasPlayed?-1:t:null})}},{key:"hasPlayed",value:function(e){var t=this.getBreakById(e);return!0===(null==t?void 0:t.hasPlayed)}},{key:"markPlayed",value:function(e){e.hasPlayed=!0}},{key:"processMid",value:function(e){var t=this,i=this.breaks.filter(function(e){return e.type===t.appContext.avia.AdBreakType.MID});if(!i.length)return null;for(var n,r=i.length;r--;){if(-1===(n=e(i[r])))return null;if(n)return n}return null}},{key:"createBreaksFromCuepoints",value:function(e,t){var i,n,r,a,o,s,l=t(this.streamDuration),u=1;e.sort(function(e,t){return e.start-t.start});for(var c=0,d=0,h=e.length;d<h;d++)i=e[d].start,a=(n=e[d].end)-i,o=i,i-c>=l&&(i=-1),c+=a,r=this.makeBrkId(i,i>0?u++:null),(s=this.makeBreak(t(o),r,o,this.appContext.avia.AdTechnology.SSAI)).endTime=n,s.duration=a,this.addBreak(s)}},{key:"createBreaksFromTimes",value:function(e){var t,i,n=1;e.sort(function(e,t){return e-t});for(var r=0,a=e.length;r<a;r++)t=e[r],i=this.makeBrkId(t,t>0?n++:null),this.addBreak(this.makeBreak(t,i,null,this.appContext.avia.AdTechnology.CSAI))}},{key:"addBreak",value:function(e){this.breaks.push(e)}},{key:"makeBreak",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0,r=this.appContext.avia;return{adTechnology:n,startTime:e,hasPlayed:!1,streamStartTime:null!=i?i:null,breakId:t,type:0===e?r.AdBreakType.PRE:-1===e?r.AdBreakType.POST:r.AdBreakType.MID}}},{key:"makeBrkId",value:function(e,t){return(0===e?"pre":-1===e?"post":"mid")+(e>0?"_".concat(t):"_0")}}]),e}(),Ee="codec:ac-3,codec:ec-3",Te="[RANDOM]",Se="sz",Ce="640x480",xe="640x483",we="imafw__fw_h_referer",Pe="imafw_host";function _e(e,t){var i=t.muted,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=e.adParameters||{},o=i,s=!1,l=!1;for(var u in e.filterOutPremiumAudioCodecs&&(a["dai-excl"]=Ee),a)u===Se&&o&&a[u]===Ce&&(a[u]=xe),a[u]===Te&&(a[u]=Le()),u===Pe&&(s=!0),u===we&&(l=!0);for(var c in n||(s||(a[Pe]=Ne()),l||(a[we]=Me())),r)c.indexOf("imafw_")>=0&&(a[c]=r[c]);if(!0===e.useApi)for(var d in a)a[d]=encodeURIComponent(a[d]);var h={apiKey:e.apiKey,authToken:e.authToken||null,assetKey:e.assetKey||null,adTagParameters:a,videoId:e.videoId||null,contentSourceId:e.contentSourceId||null};return e.format&&"string"==typeof e.format&&(h.format=e.format),h}function Ie(e,t){var i;e.omidAccessModeRules={},e.omidAccessModeRules[null==(i=t.OmidAccessMode)?void 0:i.FULL]=[new RegExp(".*")]}function Le(){var e=String(Math.round(1e15+9e15*Math.random()));if(e.length<16)for(;e.length<16;)e+="0";return e.length>16&&(e=e.substr(0,17)),e}function Ne(){return new URL(window.location.href).host}function Me(){return null==document?void 0:document.referrer}var Re=function(e){(0,G.default)(i,e);var t=Z(i);function i(e,n){var r;return(0,Q.default)(this,i),(r=t.call(this,e,n)).streamInfo={mediaUrl:null,streamId:null},r.adBreakSchedule=null,r.streamDuration=NaN,r.contentDuration=NaN,r.breakMetadataPending=!1,r.breaksReleased=!1,r.adBreakInProgress=!1,r.breakCount=0,r.isIgnoringEvents=!1,r.pendingStartTime=null,r.breakPending=!1,r.omEnabled=!0,r.adSegmentStarted=!1,r.eventStallTimeoutHandle=null,r.eventStallTimeout=5e3,r.adPaused=!1,r.cachedAdTimes=[],r.breakReentered=!1,r.currentAdIsSkippable=!1,r.hStreamEvent=function(e){if(/cue/.test(e.type.toLowerCase())&&r.isIgnoringEvents&&r.processCuepoints(e),r.sdk&&r.adService&&!r.isIgnoringEvents){var t=e.type,i=r.sdk.StreamEvent.Type;r.breakPending=!1;var n=!1;switch(clearTimeout(r.eventStallTimeoutHandle),t){case i.CUEPOINTS_CHANGED:r.processCuepoints(e);break;case i.AD_BREAK_STARTED:n=!0,r.currentAdIsSkippable=!1,r.breakMetadataPending=!0;break;case i.STARTED:var a=e.getAd();r.handleAdStart(a,i.STARTED);break;case i.AD_PROGRESS:if(n=!0,r.adBreakInProgress){var o=e.getStreamData().adProgressData;r.delegate.adProgress(o.currentTime,o.duration)}break;case i.FIRST_QUARTILE:n=!0,r.adBreakInProgress&&(r.trackQuartile(i.FIRST_QUARTILE),r.delegate.adFirstQuartile());break;case i.MIDPOINT:n=!0,r.adBreakInProgress&&(r.trackQuartile(i.MIDPOINT),r.delegate.adMidpoint());break;case i.THIRD_QUARTILE:n=!0,r.adBreakInProgress&&(r.trackQuartile(i.THIRD_QUARTILE),r.delegate.adThirdQuartile());break;case i.COMPLETE:r.adBreakInProgress&&r.handleAdComplete(i.COMPLETE);break;case i.AD_BREAK_ENDED:case i.AD_PERIOD_ENDED:r.adBreakInProgress?(r.adBreakInProgress=!1,r.delegate.adBreakComplete(),r.endAdSegment(),r.pendingStartTime&&(r.delegate.seekToStreamTime(r.streamTimeForContentTime(r.pendingStartTime)),r.pendingStartTime=null)):r.endAdSegment();break;case i.CLICK:r.delegate.adClicked("");break;case i.SKIPPED:r.delegate.adSkipped();break;case i.SKIPPABLE_STATE_CHANGED:r.delegate.adSkippableStateChanged();break;case i.ERROR:r.adBreakInProgress=!1,r.log("Error event SDK: ".concat(e.getStreamData().errorMessage)),r.signalError(e.getStreamData().errorMessage,r.aviaSdk.ErrorCode.DAI_DATA_ERROR,!1)}n&&!r.adSegmentStarted&&(r.adSegmentStarted=!0,r.delegate.adSegmentStarted()),r.adBreakInProgress&&!r.adPaused&&r.signalAdSegmentEndAfterDelay()}},r.hPlayPause=function(e){e.type===r.aviaSdk.PlayerEvent.AD_PAUSED?(r.adPaused=!0,clearTimeout(r.eventStallTimeoutHandle)):r.adPaused=!1},r.omEnabled=e.enableOm,r.sdk=r.adService.sdk,r.streamManager=null,r.delegate=n.getDelegate(),r}return(0,X.default)(i,[{key:"destroy",value:function(){var e,t,n;clearTimeout(this.eventStallTimeoutHandle),null==(e=this.streamManager)||e.reset(),this.listenToStreamManager(!1),null==(t=this.player)||t.off(this.aviaSdk.PlayerEvent.AD_PAUSED,this.hPlayPause),null==(n=this.player)||n.off(this.aviaSdk.PlayerEvent.AD_PLAYING,this.hPlayPause),this.sdk=null,this.adBreakSchedule=null,this.streamManager=null,(0,j.default)((0,Y.default)(i.prototype),"destroy",this).call(this)}},{key:"skipAd",value:function(){if(this.adService.usesDaiApi&&!0===this.currentAdIsSkippable){this.currentAdIsSkippable=!1;var e=this.streamManager.skipCurrentAd();this.delegate.adSkipped(),this.delegate.seekToStreamTime(e)}}},{key:"getResource",value:function(){return ce(this,null,z.default.mark(function e(){var t,i,n,r,a=this;return z.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.context.resource,n=(null==(t=i.ad)?void 0:t.ssai)||{},r=n.assetKey,this.streamManager=this.adService.getStreamManager(),this.listenToStreamManager(!0),this.isIgnoringEvents=!0,this.pendingStartTime=i.playback.startTime||null,e.abrupt("return",new Promise(function(e,t){a.aviaSdk.Util.eventsToPromise([{target:a.streamManager,events:[a.sdk.StreamEvent.Type.LOADED]}],[{target:a.streamManager,events:[a.sdk.StreamEvent.Type.ERROR]}]).then(function(n){var r=n.getStreamData(),o=a.initializeWithStreamData(r);if(a.isIgnoringEvents=!1,!o)return a.log("Media url not found in DAI stream response"),void t(new a.context.avia.PlayerError(a.aviaSdk.ErrorCode.DAI_DATA_ERROR,"Missing media url"));a.log("Stream metadata loaded"),i.playback.startTime&&!i.ad.showPrerollOnNonZeroStart?i.playback.startTime=a.streamTimeForContentTime(i.playback.startTime):i.playback.startTime&&i.ad.showPrerollOnNonZeroStart&&(i.playback.startTime=NaN),i.location.mediaUrl=a.streamInfo.mediaUrl,e(i)}).catch(function(e){var i;a.log("Stream request error, e"),t(new a.context.avia.PlayerError(a.aviaSdk.ErrorCode.DAI_DATA_ERROR,(null==(i=e.getStreamData())?void 0:i.errorMessage)||"Unspecified DAI error"))});var n=_e(i.ad.ssai,{muted:a.context.muted,autoplay:a.context.autoplay},!a.context.system.isDesktop&&!a.context.system.isMobile,{playername_version:a.context.buildInfo.playerName,imafw_playername_version:a.context.buildInfo.playerVersion});r?a.requestLiveStream(new a.sdk.LiveStreamRequest(n)):a.requestVODStream(new a.sdk.VODStreamRequest(n))}));case 7:case"end":return e.stop()}},e,this)}))}},{key:"start",value:function(){return ce(this,null,z.default.mark(function e(){return z.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.delegate.streamIdAvailable(this.streamInfo.streamId),this.delegate.resumeContent();case 2:case"end":return e.stop()}},e,this)}))}},{key:"handleTimedMetadata",value:function(e){if(/google/.test(e.id)){this.cachedAdTimes.length&&this.shouldTrackReentry()&&this.isBreakReentry(e.startTime)&&(this.breakReentered=!0,this.delegate.adSegmentReentered());var t={TXXX:e.info};this.streamManager.onTimedMetadata(t)}}},{key:"contentTimeForStreamTime",value:function(e){return this.streamManager.contentTimeForStreamTime(e)}},{key:"streamTimeForContentTime",value:function(e){return this.streamManager.streamTimeForContentTime(e)}},{key:"getPermittedSeekTime",value:function(e){if(this.adBreakSchedule){var t=this.adBreakSchedule.getBreakForContentSeekTime(e);if(t&&!t.hasPlayed)return t.hasPlayed=!0,this.breakPending=!0,t.streamStartTime}return this.streamManager.streamTimeForContentTime(e)}},{key:"setStreamTime",value:function(e){this.adService.setCurrentTime(e),this.adBreakInProgress||this.breakPending||this.checkForAdSegment(e)}},{key:"setStreamDuration",value:function(e){this.streamDuration=e,this.contentDuration=this.streamManager.contentTimeForStreamTime(e),this.adService.setDuration(e),this.pendingCues&&this.updateBreakSchedule(this.pendingCues)}},{key:"contentComplete",value:function(){this.streamManager.reset()}},{key:"setVolume",value:function(){}},{key:"setMuteState",value:function(){}},{key:"setContentBitrate",value:function(){}},{key:"updateSize",value:function(){}},{key:"setFullscreenState",value:function(){}},{key:"shouldTrackReentry",value:function(){return this.isLiveStream&&!this.player.isPlayingLive&&!this.breakReentered}},{key:"isBreakReentry",value:function(e){return this.cachedAdTimes.some(function(t){return e>=t[0]-.4&&e<t[1]})}},{key:"signalAdSegmentEndAfterDelay",value:function(){var e=this;this.eventStallTimeoutHandle=setTimeout(function(){e.adPaused||(e.log("No ad events have occurred for ".concat(e.eventStallTimeout," sec.; ending ad segment.")),e.endAdSegment())},this.eventStallTimeout)}},{key:"signalError",value:function(e,t,i){this.delegate.adError({code:t||this.aviaSdk.ErrorCode.AD_ADAPTER_ERROR,message:e,cause:{streamId:this.streamInfo.streamId||null},fatal:i})}},{key:"checkForAdSegment",value:function(e){var t,i=null==(t=this.adBreakSchedule)?void 0:t.adBreaks,n=null==i?void 0:i.length;if(n)for(var r=0;r<n;r++){var a=i[r],o=a.streamStartTime-e,s=o<.3&&o>-.2,l=a.endTime-e>=3;if(a.hasPlayed&&s&&l){this.delegate.seekToStreamTime(a.endTime);break}}}},{key:"requestVODStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.omEnabled&&this.adService.omEnabled&&Ie(e,this.sdk),this.context.resource.ad.ssai.enableNonce&&(e.enableNonce=!0),this.isLiveStream=!1,this.streamManager.requestStream(e,t)}},{key:"requestLiveStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.omEnabled&&this.adService.omEnabled&&Ie(e,this.sdk),this.context.resource.ad.ssai.enableNonce&&(e.enableNonce=!0),this.isLiveStream=!0,this.streamManager.requestStream(e,t)}},{key:"processCuepoints",value:function(e){var t=e.getStreamData().cuepoints;this.contentDuration?this.updateBreakSchedule(t):this.pendingCues=t}},{key:"endAdSegment",value:function(){(this.adSegmentStarted||this.breakReentered)&&(this.adSegmentStarted=!1,this.breakReentered=!1,this.delegate.adSegmentEnded())}},{key:"handleAdComplete",value:function(e){this.currentAdIsSkippable=!1,this.isLiveStream&&null!==this.adStartTime&&(this.cachedAdTimes.push([this.adStartTime,this.player.video.currentTime]),this.adStartTime=null),this.adService.usesDaiApi||(this.adService.trackAdEvent({context:this.adService.getAdSystem(),eventName:e,volume:this.adService.videoInterface.volume}),this.adService.untrackAd()),this.delegate.adComplete()}},{key:"trackQuartile",value:function(e){!this.adService.usesDaiApi&&this.adService.trackAdEvent({context:this.adService.getAdSystem(),eventName:e,volume:this.adService.videoInterface.volume})}},{key:"handleAdStart",value:function(e,t){return ce(this,null,z.default.mark(function i(){var n,r,a,o,s,l;return z.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=null==(n=this.adService)?void 0:n.assembleAdBreakInfo(e,this.aviaSdk.AdTechnology.SSAI),o=null==(r=this.adService)?void 0:r.assembleAdInfo(e,{mediaUrl:this.streamInfo.mediaUrl}),!this.breakMetadataPending&&this.adBreakInProgress||(this.breakMetadataPending=!1,this.isLiveStream&&(a.adBreakPosition=++this.breakCount,a.adBreakType=this.aviaSdk.AdBreakType.MID),this.adSegmentStarted||(this.adSegmentStarted=!0,this.delegate.adSegmentStarted()),this.adBreakInProgress||this.delegate.adBreakStart(),a.adTechnology=this.aviaSdk.AdTechnology.SSAI,this.delegate.adBreakMetadata(a)),this.adStartTime=this.player.video.currentTime,this.breakReentered=!1,this.adBreakInProgress=!0,this.adService.usesDaiApi||(this.adService.trackAd(o),this.adService.trackAdEvent({context:this.adService.getAdSystem(),eventName:t,volume:this.adService.videoInterface.volume})),i.next=9,this.delegate.applyHook(this.aviaSdk.PlayerHookType.AD,ue({skippable:!1},o));case 9:s=i.sent,l=s.skippable,this.currentAdIsSkippable=l,o.skippable=l,this.delegate.adStart(o);case 14:case"end":return i.stop()}},i,this)}))}},{key:"initializeWithStreamData",value:function(e){var t=e.url;if(!this.aviaSdk.Util.isString(t)||""===t)return!1;var i=e.streamId;return this.streamInfo.mediaUrl=t,this.streamInfo.streamId=i,this.player.on(this.aviaSdk.PlayerEvent.AD_PAUSED,this.hPlayPause),this.player.on(this.aviaSdk.PlayerEvent.AD_PLAYING,this.hPlayPause),!0}},{key:"listenToStreamManager",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";this.getEventInterests().forEach(function(e){t.streamManager[i](e,t.hStreamEvent)})}},{key:"getEventInterests",value:function(){var e=this.sdk.StreamEvent.Type;return[e.CUEPOINTS_CHANGED,e.AD_BREAK_STARTED,e.AD_BREAK_ENDED,e.STARTED,e.COMPLETE,e.AD_PERIOD_STARTED,e.AD_PERIOD_ENDED,e.AD_PROGRESS,e.FIRST_QUARTILE,e.MIDPOINT,e.THIRD_QUARTILE,e.SKIPPED,e.SKIPPABLE_STATE_CHANGED,e.CLICK,e.ERROR]}},{key:"updateBreakSchedule",value:function(e){var t,i,n,r=this,a=e&&e.length;if(a&&!this.adBreakSchedule){this.adBreakSchedule=new be(this.context,this.streamDuration,function(e){return r.streamManager.contentTimeForStreamTime(e)},null,e);var o=this.context.resource,s=this.adBreakSchedule.adBreaks;if(this.pendingStartTime&&!o.ad.showPrerollOnNonZeroStart){var l=s[0];l.type===this.aviaSdk.AdBreakType.PRE&&(l.hasPlayed=!0)}for(var u=s.length;u--;){var c=s[u];if(c.startTime<this.pendingStartTime&&c.type!==this.aviaSdk.AdBreakType.POST){c.hasPlayed=!0;break}}}else a&&(null==(t=this.adBreakSchedule)||t.updateBreaks(e));!this.breaksReleased&&(null==(n=null==(i=this.adBreakSchedule)?void 0:i.adBreaks)?void 0:n.length)&&(this.delegate.adBreaksAvailable(this.adBreakSchedule.adBreaks),this.breaksReleased=!0),this.pendingCues=null,this.context.resource.ad.showPrerollOnNonZeroStart||(this.pendingStartTime=null)}}]),i}(ke),Oe=function(e){(0,G.default)(i,e);var t=Z(i);function i(e,n){var r;return(0,Q.default)(this,i),(r=t.call(this,e,n)).isFullscreen=!1,r.inProgressAd=null,r.inProgressBreakId=null,r.isPaused=!1,r.buffering=!1,r.breakMetadataReleased=!1,r.breakStartReleased=!1,r.pendingSeekedBreakId=null,r.markedAsPlayed=[],r.adProgressData={lastRecordedTime:0,addTzero:null,pollTzero:null,timeoutHandle:null,stallThreshold:5,adId:null,duration:null,pollInterval:2e3},r.hAdsManagerAdError=function(e){var t=r.adService.parseAdError(e);r.log("AdsManager ERROR",t),r.delegate.adError({code:r.aviaSdk.ErrorCode.IMA_AD_ERROR,message:null==t?void 0:t.message,cause:t,fatal:!1})},r.hAdEvent=function(e){var t=r.sdk.AdEvent.Type,i=e.getAd(),n=e.getAdData();clearTimeout(r.adProgressData.timeoutHandle);var a=!1!==r.csai.enableStalledAdCheck;switch(e.type){case t.CONTENT_PAUSE_REQUESTED:a=!1,r.pendingSeekedBreakId=null,r.delegate.pauseContent();break;case t.CONTENT_RESUME_REQUESTED:a=!1,r.inProgressBreakId?(r.pendingSeekedBreakId=null,r.processBreakComplete(r.breakStartReleased)):r.delegate.resumeContent();break;case t.LOADED:a=!1,r.processAdLoadOrStart(i,n,t.LOADED);break;case t.STARTED:a=!1,r.inProgressBreakId&&!r.breakStartReleased&&(r.breakStartReleased=!0,r.delegate.adBreakStart()),r.processAdLoadOrStart(i,n,t.STARTED),r.checkForCustomClickTracking(),r.beginPollForProgress(r.inProgressAd);break;case t.AD_PROGRESS:r.buffering&&(r.buffering=!1,r.delegate.adBuffering(!1)),r.processProgress();break;case t.FIRST_QUARTILE:r.processQuartile(t.FIRST_QUARTILE,"adFirstQuartile");break;case t.MIDPOINT:r.processQuartile(t.MIDPOINT,"adMidpoint");break;case t.THIRD_QUARTILE:r.processQuartile(t.THIRD_QUARTILE,"adThirdQuartile");break;case t.COMPLETE:a=!1,r.processAdComplete(t.COMPLETE);break;case t.ALL_ADS_COMPLETED:a=!1,r.processAllComplete();break;case t.AD_BUFFERING:r.buffering||(r.buffering=!0,r.delegate.adBuffering(!0));break;case t.CLICK:a=!1,r.adsManager.pause(),r.delegate.adClicked("");break;case t.PAUSED:a=!1,r.isPaused=!0,r.delegate.adPaused();break;case t.RESUMED:r.buffering&&(r.buffering=!1,r.delegate.adBuffering(!1)),r.isPaused=!1,r.delegate.adResumed();break;case t.SKIPPED:a=!1,r.processSkip(t.SKIPPED);break;case t.LOG:a=!1,r.processLogEvent(n);break;case t.USER_CLOSE:a=!1,r.killAd();break;case t.VOLUME_CHANGED:case t.VOLUME_MUTED:r.processVolumeChange(e.type)}!r.isPaused&&a&&(r.adProgressData.timeoutHandle=setTimeout(function(){return r.checkAdProgress()},r.adProgressData.pollInterval))},r.delegate=n.getDelegate(),r.presentationContainer=e.presentationContainer,r.sdk=r.adService.sdk,r.adsLoader=r.adService.adsLoader,r.adProgressData.stallThreshold=r.csai.stalledAdThreshold||r.adProgressData.stallThreshold,r.listenToAdsLoader(!0),r}return(0,X.default)(i,[{key:"destroy",value:function(){var e,t;clearTimeout(this.adProgressData.timeoutHandle),this.listenToAdsLoader(!1),this.listenToAdsManager(!1),null==(e=this.adsManager)||e.destroy(),null==(t=this.adsLoader)||t.contentComplete(),this.adBreakSchedule&&this.adBreakSchedule.destroy(),this.delegate=null,this.presentationContainer=null,this.adsManager=null,this.sdk=null,this.adsLoader=null,this.adBreakSchedule=null,this.renderingSettings=null,(0,j.default)((0,Y.default)(i.prototype),"destroy",this).call(this)}},{key:"skipAd",value:function(){}},{key:"playClicked",value:function(){this.adService.initializeAdsLoader()}},{key:"start",value:function(){return ce(this,null,z.default.mark(function e(){var t;return z.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.csai.adCallUrl)||this.csai.adsResponse){e.next=4;break}return this.delegate.resumeContent(),e.abrupt("return");case 4:this.adService.initializeAdsLoader(),this.initialize(t);case 6:case"end":return e.stop()}},e,this)}))}},{key:"resume",value:function(){return ce(this,null,z.default.mark(function e(){var t;return z.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(this.adProgressData.timeoutHandle),this.isPaused=!1,null==(t=this.adsManager)||t.resume();case 3:case"end":return e.stop()}},e,this)}))}},{key:"pause",value:function(){return ce(this,null,z.default.mark(function e(){var t;return z.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(this.adProgressData.timeoutHandle),this.isPaused=!0,null==(t=this.adsManager)||t.pause();case 3:case"end":return e.stop()}},e,this)}))}},{key:"handleTimedMetadata",value:function(){}},{key:"updateSize",value:function(e){if(this.adsManager){var t=this.isFullscreen?this.sdk.ViewMode.FULLSCREEN:this.sdk.ViewMode.NORMAL;this.adsManager.resize(e.width,e.height,t)}}},{key:"contentComplete",value:function(){var e;null==(e=this.adsLoader)||e.contentComplete()}},{key:"getPermittedSeekTime",value:function(e){var t,i=null==(t=this.adBreakSchedule)?void 0:t.getBreakForContentSeekTime(e);return i&&-1===this.markedAsPlayed.indexOf(i.breakId)?(this.pendingSeekedBreakId=i.breakId,i.startTime):e}},{key:"setFullscreenState",value:function(e){this.isFullscreen=e}},{key:"setStreamTime",value:function(){}},{key:"setStreamDuration",value:function(){}},{key:"setVolume",value:function(e){var t,i=this.player.muted?0:this.aviaSdk.Util.clampValue(e,0,1);null==(t=this.adsManager)||t.setVolume(i)}},{key:"setMuteState",value:function(e){var t;null==(t=this.adsManager)||t.setVolume(e?0:this.player.volume)}},{key:"setContentBitrate",value:function(e){var t;this.renderingSettings&&(this.renderingSettings.bitrate=e,null==(t=this.adsManager)||t.updateAdsRenderingSettings(this.renderingSettings))}},{key:"startAds",value:function(){var e,t=this.getRect(),i=this.isFullscreen?this.sdk.ViewMode.FULLSCREEN:this.sdk.ViewMode.NORMAL;try{this.adsManager.init(t.width,t.height,i),this.adsManager.start()}catch(t){this.log("AdsManager init failure."),this.delegate.adError({code:this.aviaSdk.ErrorCode.IMA_INIT_FAILURE,message:null==(e=t.getMessage)?void 0:e.call(t),cause:t,fatal:!1})}}},{key:"markAsPlayed",value:function(e){var t=this;e.forEach(function(e){t.markedAsPlayed.indexOf(e)<0&&t.markedAsPlayed.push(e)})}},{key:"cancelPendingBreak",value:function(e){this.pendingSeekedBreakId===e&&(this.pendingSeekedBreakId=null)}},{key:"isUsingContentVideoElement",value:function(){return this.adsManager&&this.adsManager.isCustomPlaybackUsed()}},{key:"isUsingCustomClickTracker",value:function(){return!(!this.adsManager||!this.adsManager.isCustomClickTrackingUsed())}},{key:"setContentComplete",value:function(){this.adsLoader&&this.adsLoader.contentComplete()}},{key:"checkForCustomClickTracking",value:function(){this.isUsingCustomClickTracker()&&this.delegate.displayAdClickElement(!0)}},{key:"beginPollForProgress",value:function(e){var t=this;if(!0===this.csai.enableStalledAdCheck){var i=this.adProgressData;clearTimeout(i.timeoutHandle),i.duration=e.adDuration,i.adId=e.adId,i.pollTzero=Date.now(),i.timeoutHandle=setTimeout(function(){return t.checkAdProgress()},i.pollInterval)}}},{key:"checkAdProgress",value:function(){var e=this,t=this.adProgressData,i=t.duration-this.adsManager.getRemainingTime(),n=Date.now();if(clearTimeout(t.timeoutHandle),!this.isPaused)if(null==t.pollTzero&&(t.pollTzero=Date.now()),i>t.lastRecordedTime)t.lastRecordedTime=i,t.pollTzero=n,t.timeoutHandle=setTimeout(function(){return e.checkAdProgress()},t.pollInterval);else if(.001*(n-t.pollTzero)>t.stallThreshold){var r=this.inProgressAd?Object.assign({},this.inProgressAd):null;this.log("Ad stalled; discarding break"),this.delegate.adStalled(r),this.killAd(),this.discardAdBreak(),this.processBreakComplete(this.breakStartReleased)}}},{key:"processAdLoadOrStart",value:function(e,t,i){var n,r=this.adService.assembleAdBreakInfo(e,this.aviaSdk.AdTechnology.CSAI),a=this.adService.assembleAdInfo(e,t),o=i===this.sdk.AdEvent.Type.STARTED,s=r.adBreakPosition,l=0===s?"pre_0":-1===s?"post_0":"mid_"+s,u=this.adBreakSchedule.getBreakById(l);if((null==(n=this.markedAsPlayed)?void 0:n.indexOf(l))>=0)return this.adBreakSchedule.markPlayed(u),void this.adsManager.discardAdBreak();o?(this.inProgressAd=a,this.adService.trackAd(a),this.adService.trackAdEvent({context:"ima",eventName:i,volume:this.adsManager.getVolume()}),r.adTechnology=this.aviaSdk.AdTechnology.CSAI,this.breakMetadataReleased||(this.breakMetadataReleased=!0,this.delegate.adBreakMetadata(r)),this.delegate.adStart(a)):this.adBreakSchedule.hasPlayed(l)||(this.adBreakSchedule.markPlayed(u),this.inProgressBreakId=l,this.delegate.adLoaded())}},{key:"processProgress",value:function(){if(this.inProgressAd){var e=this.inProgressAd.adDuration,t=this.adsManager&&this.adsManager.getRemainingTime();isNaN(e)||isNaN(t)||t<0||this.delegate.adProgress(Math.min(e,Math.max(0,e-t)),e)}}},{key:"processQuartile",value:function(e,t){var i;this.adService.trackAdEvent({context:"ima",eventName:e,volume:this.adsManager.getVolume()}),null==(i=this.delegate)||i[t]()}},{key:"processAdComplete",value:function(e){this.adService.trackAdEvent({context:"ima",eventName:e,volume:this.adsManager.getVolume()}),this.killAd()}},{key:"processSkip",value:function(e){this.adService.trackAdEvent({context:"ima",eventName:e,volume:this.adsManager.getVolume()}),this.killAd(),this.delegate.adSkipped()}},{key:"processBreakComplete",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.inProgressAd&&this.killAd(),this.inProgressBreakId&&(this.markAsPlayed([this.inProgressBreakId]),e&&this.delegate.adBreakComplete(),this.inProgressBreakId=null),this.breakStartReleased=!1,this.breakMetadataReleased=!1,this.delegate.resumeContent()}},{key:"processVolumeChange",value:function(e){this.adService.trackAdEvent({context:"ima",eventName:e,volume:this.adsManager.getVolume()})}},{key:"processAllComplete",value:function(){this.inProgressBreakId&&this.processBreakComplete(),this.delegate.allAdsComplete()}},{key:"processLogEvent",value:function(e){if(null==e?void 0:e.adError){this.log("LOG event; Ad data has error; Message: "+e.adError.getMessage()||!1);var t=null;if(this.pendingSeekedBreakId||this.inProgressBreakId)t=this.pendingSeekedBreakId||this.inProgressBreakId;else{var i=this.player.contentTime,n=this.findClosestForwardBreak(i);n&&(this.adBreakSchedule.markPlayed(n),t=n.breakId)}t&&this.markAsPlayed([t]),this.delegate.adError({code:this.aviaSdk.ErrorCode.IMA_AD_ERROR,message:e.adError.getMessage(),cause:e.adError,fatal:!1}),this.discardAdBreak(),this.delegate.resumeContent()}}},{key:"findClosestForwardBreak",value:function(e){for(var t=this.adBreakSchedule.adBreaks,i=0,n=t.length;i<n;i++)if(t[i].startTime>=e&&t[i].startTime-e<=10)return t[i];return null}},{key:"discardAdBreak",value:function(){var e;this.log("Discarding Ad break"),this.delegate.adBreakDiscarded(),null==(e=this.adsManager)||e.discardAdBreak()}},{key:"killAd",value:function(){this.adService.untrackAd(),this.delegate.adComplete(),this.delegate.displayAdClickElement(!1),this.inProgressAd=null;var e=this.adProgressData;clearTimeout(e.timeoutHandle),e.pollTzero=null,e.lastRecordedTime=null}},{key:"requestAds",value:function(e){var t=new this.sdk.AdsRequest,i=this.getRect(),n=this.options.autoplayState,r=!(this.context.system.isDesktop||this.context.system.isMobile),a=this.context.avia.Util.template;if("string"==typeof this.csai.adsResponse||this.csai.adsResponse instanceof XMLDocument)this.log("IMAAdAdapter using supplied adsResponse (i.e., not using adCallUrl)"),t.adsResponse=this.csai.adsResponse;else{var o=function(e,t){var i=t.muted,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return i&&(e=e.replace("".concat(Se,"=").concat(Ce),"".concat(Se,"=").concat(xe))),a(e,{get RANDOM(){return Le()},get HOST(){return Ne()},get REFERER(){return n?"":Me()},get PLAYERINFO(){return"".concat(r.playername_version)},get SDK(){return"".concat(r.ima_sdkv)}},"\\[","\\]")}(e,n,r,{ima_sdkv:this.adsLoader.getSdkVersion(),playername_version:"".concat(this.context.buildInfo.playerName,"_").concat(this.context.buildInfo.playerVersion)},a);t.adTagUrl=o}t.linearAdSlotWidth=i.width,t.linearAdSlotHeight=i.height,t.nonLinearAdSlotWidth=i.width,t.nonLinearAdSlotHeight=i.height,t.vastLoadTimeout=this.csai.vastLoadTimeout||5e3,t.setAdWillAutoPlay(n.autoplay),t.setAdWillPlayMuted(n.muted),this.adsLoader.requestAds(t)}},{key:"hAdsMgrLoaded",value:function(e){this.renderingSettings=this.getRenderingSettings(),this.adsManager=e.getAdsManager(this.options.playheadInterface,this.renderingSettings),this.createAdBreakSchedule(this.adsManager.getCuePoints()),this.listenToAdsManager(!0),this.startAds()}},{key:"getRenderingSettings",value:function(){var e=new this.sdk.AdsRenderingSettings,t=this.csai,i=this.adService.defaultRenderingSettings,n=t.loadVideoTimeoutMs,r=t.enableAdPreloading;return e.bitrate=i.bitrate,e.enablePreloading=this.aviaSdk.Util.isBoolean(r)?r:i.enablePreloading,e.loadVideoTimeout=isNaN(n)?i.loadVideoTimeout:n,e.restoreCustomPlaybackStateOnAdBreakComplete=i.restoreCustomPlaybackStateOnAdBreakComplete,e}},{key:"createAdBreakSchedule",value:function(e){this.aviaSdk.Util.isEmpty(e)&&(e=[0]),this.adBreakSchedule=new be(this.context,null,function(e){return e},e),this.checkNonZeroStart(),this.delegate.adBreaksAvailable(this.adBreakSchedule.adBreaks)}},{key:"checkNonZeroStart",value:function(){var e=this,t=this.context.resource,i=t.playback.startTime;if(!isNaN(i)&&i>0){for(var n=this.adBreakSchedule.adBreaks,r=n.length;r--;){var a=n[r];if(a.startTime<i&&a.type===this.aviaSdk.AdBreakType.MID){a.hasPlayed=!0,this.markedAsPlayed.push(a.breakId);break}}var o=t.ad.showPrerollOnNonZeroStart;n.forEach(function(t){t.type!==e.aviaSdk.AdBreakType.PRE||o||(e.markedAsPlayed.push(t.breakId),e.adBreakSchedule.markPlayed(t))})}}},{key:"hAdsLoaderError",value:function(e){this.log("AdsLoader ERROR",e),this.delegate.adError({code:this.aviaSdk.ErrorCode.IMA_AD_ERROR,message:e.message,cause:e,fatal:!1}),this.delegate.resumeContent()}},{key:"listenToAdsManager",value:function(e){if(this.adsManager){for(var t,i=e?"addEventListener":"removeEventListener",n=this.getEventInterests(),r=0,a=n.length;r<a;r++)t=this.sdk.AdEvent.Type[n[r]],this.adsManager[i](t,this.hAdEvent);this.adsManager[i](this.sdk.AdErrorEvent.Type.AD_ERROR,this.hAdsManagerAdError)}}},{key:"listenToAdsLoader",value:function(e){var t=this;this.adsLoader.onAdsLoaderError=e?function(e){return t.hAdsLoaderError(e)}:null,this.adsLoader.onAdsManagerLoaded=e?function(e){return t.hAdsMgrLoaded(e)}:null}},{key:"getEventInterests",value:function(){return["CONTENT_PAUSE_REQUESTED","CONTENT_RESUME_REQUESTED","LOADED","STARTED","AD_PROGRESS","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","COMPLETE","ALL_ADS_COMPLETED","AD_BUFFERING","CLICK","PAUSED","RESUMED","SKIPPED","LOG","USER_CLOSE"]}},{key:"getRect",value:function(){return this.presentationContainer.getBoundingClientRect()}},{key:"initialize",value:function(e){this.listenToAdsLoader(!0),this.requestAds(e)}}]),i}(ke),De=function(){function e(){(0,Q.default)(this,e),this.MOAT_PARTNER_CODE="cbsiimajsint708425247896",this.adContextToVpaidEventMap={ima:{start:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:"AdPlaying",skip:"AdSkipped",volumechange:"AdVolumeChange",mute:"AdVolumeChange"},dai_sdk:{started:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",controlpause:"AdPaused",controlplay:"AdPlaying",controlvolumeset:"AdVolumeChange",controlmute:"AdVolumeChange",controlunmute:"AdVolumeChange"}}}return(0,X.default)(e,[{key:"destroy",value:function(){this.adContextToVpaidEventMap=null,this.trackingObj=null}},{key:"track",value:function(e){var t=e.context,i=e.adInfo,n={level1:"",level2:"",level3:i.wrapperAdId,level4:i.wrapperCreativeId,slicer1:"vaw-can",slicer2:e.partner,slicer3:e.pageType,moatVASTSystem:t,moatVASTAdID:i.wrapperAdId};""!==e.viewGuid&&(n.zMoatVGUID=e.viewGuid),""!==e.pageType&&(n.zMoatPT=e.pageType),this.initMoat(e.adVideoContainer,n,i.adDuration,this.MOAT_PARTNER_CODE,null)}},{key:"untrack",value:function(){this.trackingObj=null}},{key:"trackEvent",value:function(e){var t=this.adContextToVpaidEventMap[e.context][e.eventName.toLowerCase()];t&&this.trackingObj&&this.trackingObj.dispatchEvent({type:t,adVolume:e.volume})}},{key:"initMoat",value:function(e,t,i,n){var r,a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=document.createElement("script"),l=[],u={adData:{ids:t,duration:i,url:o},dispatchEvent:function(e){this.sendEvent?(l&&(l.push(e),e=l,l=!1),this.sendEvent(e)):l.push(e)}},c="_moatApi"+Math.floor(1e8*Math.random());try{a=(r=e.ownerDocument).defaultView||r.parentWindow}catch(e){a=window}a[c]=u,s.type="text/javascript",e&&e.insertBefore(s,e.childNodes[0]||null),s.src="https://z.moatads.com/"+n+"/moatvideo.js#"+c,this.trackingObj=u}}]),e}(),Be=function(){function e(t){(0,Q.default)(this,e),this.context=t,this.trackingData=t.resource.ad.viewabilityTracking}return(0,X.default)(e,[{key:"adContainer",get:function(){return this.context.dom.adContainer}},{key:"avia",get:function(){return this.context.avia}},{key:"adSystem",get:function(){return this.adSys},set:function(e){this.adSys=e}},{key:"omEnabled",get:function(){var e;return!(null==(e=this.context.resource.ad.ssai)?void 0:e.useApi)&&this.context.playerOptions.enableOm}},{key:"moatEnabled",get:function(){return!0===this.context.playerOptions.enableMoat}},{key:"destroy",value:function(){var e;null==(e=this.moatTracker)||e.destroy(),this.moatTracker=null,this.trackingData=null,this.context=null}},{key:"trackAd",value:function(e){if(this.moatEnabled){var t=this.trackingData;this.moatTracker.track({viewGuid:t.viewGuid,pageType:t.pageType,adInfo:e,adVideoContainer:this.adContainer,context:this.adSystem,partner:t.partner})}}},{key:"trackAdEvent",value:function(e){this.moatEnabled&&this.moatTracker.trackEvent(e)}},{key:"untrackAd",value:function(){this.moatEnabled&&this.moatTracker.untrack()}},{key:"getGamPlatformString",value:function(){return this.context.system.isDesktop?"desktop":this.context.system.isMobile?"mobile_web":"other"}},{key:"getAdSystem",value:function(){return this.adSystem}},{key:"getAdBreakTypeFromPodIndex",value:function(e){return 0===e?this.avia.AdBreakType.PRE:-1===e?this.avia.AdBreakType.POST:this.avia.AdBreakType.MID}},{key:"assembleAdBreakInfo",value:function(e,t){var i=e.getAdPodInfo(),n=i.getPodIndex();return{adTechnology:t,adBreakDuration:i.getMaxDuration(),adBreakPosition:n,adTotal:i.getTotalAds(),adBreakType:this.getAdBreakTypeFromPodIndex(n),adServerName:this.adSystem}}},{key:"assembleAdInfo",value:function(e,t){var i=e.getAdPodInfo(),n=i&&i.getAdPosition()||-1,r=this.getIdInfo(e),a="ima"===this.adSystem,o=e;return{adObject:e,adServerName:this.adSystem,adDuration:e.getDuration(),adTitle:e.getTitle(),adId:r.adId,adPosition:n,adAssetUrl:a?o.getMediaUrl():t.mediaUrl||null,isVpaid:a?this.getIsVpaid(o):null,wrapperAdId:r.wrapperAdId,creativeId:r.creativeId,wrapperCreativeId:r.wrapperCreativeId,vastMediaHeight:a?o.getVastMediaHeight():null,vastMediaWidth:a?o.getVastMediaWidth():null,vastMediaBitrate:a?o.getVastMediaBitrate():null}}},{key:"createViewabilityTracker",value:function(){this.moatEnabled&&(this.moatTracker=new De)}},{key:"getIdInfo",value:function(e){var t=this.getWrapperId(e),i=this.getCreativeId(e);return{adId:t.adId,wrapperAdId:t.wrapperAdId,creativeId:i.creativeId,wrapperCreativeId:i.wrapperCreativeId,adServerName:"ima",adDuration:e.getDuration()}}},{key:"getWrapperId",value:function(e){var t=e.getWrapperAdIds(),i=Array.isArray(t)&&t.length,n=e.getAdId()||"",r=i?t[0]:n,a=i?t[t.length-1]:n;return a||(a=null),{adId:r,wrapperAdId:a}}},{key:"getCreativeId",value:function(e){var t=e.getWrapperCreativeIds(),i=Array.isArray(t)&&t.length,n=e.getCreativeId()||null,r=i?t[0]:n,a=i?t[t.length-1]:n;return a||(a=null),{creativeId:r,wrapperCreativeId:a}}},{key:"getIsVpaid",value:function(e){return"application/javascript"===e.getContentType()}}]),e}(),Ue=function(e){(0,G.default)(i,e);var t=Z(i);function i(e,n,r){var a;return(0,Q.default)(this,i),(a=t.call(this,e)).pSdk=null,a.usesApi=!1,a.videoIface=null,a.hVideoAddOrRemove=function(e){var t;null==(t=a.streamMgr)||t.reset(),a.streamMgr=null,e.type===a.avia.PlayerEvent.VIDEO_ELEMENT_ADDED?a.usesApi?a.videoIface=a.avia.Util.createSimpleVideoInterface():a.videoIface=e.detail.video:a.videoIface=null},a.pSdk=n,a.videoIface=r,a.usesApi=!0===e.resource.ad.ssai.useApi,a.adSystem=a.usesApi?"dai_api":"dai_sdk",a.listenToVideoChanges(!0),a.initViewabilityTracking(),a}return(0,X.default)(i,[{key:"destroy",value:function(){this.listenToVideoChanges(!1),this.streamMgr&&this.streamMgr.reset(),this.streamMgr=null,this.pSdk=null,this.videoIface=null,(0,j.default)((0,Y.default)(i.prototype),"destroy",this).call(this)}},{key:"initViewabilityTracking",value:function(){this.createViewabilityTracker()}},{key:"videoInterface",get:function(){return this.videoIface}},{key:"usesDaiApi",get:function(){return this.usesApi}},{key:"sdk",get:function(){return this.pSdk}},{key:"setDuration",value:function(e){this.usesApi&&(this.videoIface.duration=e)}},{key:"setCurrentTime",value:function(e){this.usesApi&&(this.videoIface.currentTime=e)}},{key:"reset",value:function(){this.streamMgr.reset(),this.usesApi&&(this.videoIface.duration=NaN,this.videoIface.currentTime=NaN)}},{key:"assembleAdInfo",value:function(e,t){if("dai_sdk"===this.adSystem)return(0,j.default)((0,Y.default)(i.prototype),"assembleAdInfo",this).call(this,e,t);var n=e.getAdPodInfo(),r=n&&n.getAdPosition()||-1,a=e.getDaiWrapperData(),o=a.adId,s=a.creativeId;return{adObject:e,adServerName:this.adSystem,adDuration:e.getDuration(),adTitle:e.getTitle(),adId:o,adPosition:r,adAssetUrl:t.mediaUrl||null,isVpaid:!1,wrapperAdId:o,creativeId:s,wrapperCreativeId:s,vastMediaHeight:null,vastMediaWidth:null,vastMediaBitrate:null}}},{key:"getStreamManager",value:function(){return!this.streamMgr&&this.sdk&&this.videoIface&&(this.usesApi?this.streamMgr=new this.sdk.StreamManager(this.videoIface,this.adContainer,this.context.logger,this.avia):this.streamMgr=new this.sdk.StreamManager(this.videoIface,this.adContainer)),this.streamMgr}},{key:"listenToVideoChanges",value:function(e){var t=this.context.player,i=e?"on":"off";null==t||t[i](this.avia.PlayerEvent.VIDEO_ELEMENT_ADDED,this.hVideoAddOrRemove),null==t||t[i](this.avia.PlayerEvent.VIDEO_ELEMENT_REMOVED,this.hVideoAddOrRemove)}}]),i}(Be),Fe=function(){function e(t){var i=this;(0,Q.default)(this,e),this.eMap={errorHandler:null,adsMgrLoadedHandler:null},this.omEnabled=!0,this.initialized=!1,this.callbacks={error:null,mgrLoaded:null},this.opts=t,this.adService=this.opts.adService,this.sdk=this.adService.sdk,this.omEnabled=t.enableOm,this.eMap.errorHandler=function(e){return i.hError(e)},this.eMap.adsMgrLoadedHandler=function(e){return i.hAdsMgrLoaded(e)}}return(0,X.default)(e,[{key:"destroy",value:function(){this.adsLoader&&(this.adsLoader.removeEventListener(this.sdk.AdErrorEvent.Type.AD_ERROR,this.eMap.errorHandler),this.adsLoader.removeEventListener(this.sdk.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.eMap.adsMgrLoadedHandler),this.adsLoader.destroy()),this.adsLoader=null,this.adService=null,this.sdk=null}},{key:"initialize",value:function(){var e=this.opts,t=this.sdk;if(!t||!t.AdsLoader)return!1;if(this.initialized)return!0;var i=new t.AdDisplayContainer(e.adContainer,e.video,e.adClickEl);i.initialize(),this.adsLoader=new t.AdsLoader(i);var n=this.adsLoader.getSettings();return this.populateSdkSettings(n),this.adsLoader.addEventListener(t.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.eMap.adsMgrLoadedHandler),this.adsLoader.addEventListener(t.AdErrorEvent.Type.AD_ERROR,this.eMap.errorHandler),this.initialized=!0,!0}},{key:"getSdkVersion",value:function(){var e;return null==(e=this.adsLoader)?void 0:e.getVersion()}},{key:"onAdsManagerLoaded",set:function(e){this.callbacks.mgrLoaded=e}},{key:"onAdsLoaderError",set:function(e){this.callbacks.error=e}},{key:"requestAds",value:function(e){this.omEnabled&&Ie(e,this.sdk),this.adsLoader&&this.adsLoader.requestAds(e)}},{key:"contentComplete",value:function(){this.adsLoader&&this.adsLoader.contentComplete()}},{key:"getSettings",value:function(){return this.adsLoader?this.adsLoader.getSettings():null}},{key:"hAdsMgrLoaded",value:function(e){this.callbacks.mgrLoaded(e)}},{key:"hError",value:function(e){var t=this.parseAdErrorEvent(e);this.callbacks.error(t)}},{key:"parseAdErrorEvent",value:function(e){return this.adService.parseAdError(e)}},{key:"populateSdkSettings",value:function(e){var t=this.opts.sdkSettings;e.setVpaidMode(t.vpaidMode),e.setDisableCustomPlaybackForIOS10Plus(t.disableCustomPlaybackForIOS10Plus),e.setPlayerType(t.playerType),e.setPlayerVersion(t.playerVersion)}}]),e}();Fe.event={ADS_MANAGER_LOADED:"adsManagerLoaded",ADS_LOADER_ERROR:"adsLoaderError"};var Ve=function(e){(0,G.default)(i,e);var t=Z(i);function i(e,n,r){var a;return(0,Q.default)(this,i),(a=t.call(this,e)).adsLoaderInitialized=!1,a.useOm=!1,a.hVideoAddOrRemove=function(e){e.type===a.avia.PlayerEvent.VIDEO_ELEMENT_ADDED&&(a.adsLoaderInitialized&&a.killAdsLoader(),a.createAdsLoader(a.useOm&&a.omEnabled,e.detail))},a.vpaidMode=n||a.sdk.ImaSdkSettings.VpaidMode.INSECURE,a.adSystem="ima",a.useOm=r,a.listenToVideoChanges(!0),a.createAdsLoader(a.useOm&&a.omEnabled),a}return(0,X.default)(i,[{key:"destroy",value:function(){this.killAdsLoader(),(0,j.default)((0,Y.default)(i.prototype),"destroy",this).call(this)}},{key:"sdk",get:function(){var e;return null==(e=this.context.system.global.google)?void 0:e.ima}},{key:"getSdkVersion",value:function(){var e;return null==(e=this.pAdsLoader)?void 0:e.getSdkVersion()}},{key:"sdkSettings",get:function(){var e=this.context.buildInfo;return{vpaidMode:this.vpaidMode,disableCustomPlaybackForIOS10Plus:!1,playerType:e.playerName,playerVersion:e.playerVersion}}},{key:"defaultRenderingSettings",get:function(){return{bitrate:900,enablePreloading:!1,loadVideoTimeout:-1,playAdsAfterTime:void 0,restoreCustomPlaybackStateOnAdBreakComplete:!1}}},{key:"adsLoader",get:function(){return this.pAdsLoader}},{key:"createAdsLoader",value:function(e,t){if(!this.pAdsLoader){var i=this.context.dom,n=i.adClickEl,r=i.video,a=i.adContainer,o=t||r;this.pAdsLoader=new Fe({enableOm:e,adContainer:a,adClickEl:n,video:o,sdkSettings:this.sdkSettings,adService:this})}}},{key:"initializeAdsLoader",value:function(){return!!this.adsLoaderInitialized||(this.adsLoaderInitialized=!0,this.createViewabilityTracker(),this.pAdsLoader.initialize())}},{key:"parseAdError",value:function(e){var t=e.getError(),i=e.getUserRequestContext(),n=t.getInnerError();return{type:this.getAdErrorType(t),errorCode:t.getErrorCode(),vastErrorCode:t.getVastErrorCode(),message:t.getMessage(),innerErrorMessage:this.context.avia.Util.isString(n)?n:null,sdkVersion:this.sdk.VERSION,requestContext:i||null}}},{key:"killAdsLoader",value:function(){var e,t;null==(e=this.pAdsLoader)||e.contentComplete(),null==(t=this.pAdsLoader)||t.destroy(),this.adsLoaderInitialized=!1,this.pAdsLoader=null}},{key:"getAdErrorType",value:function(e){return e.getType()===this.sdk.AdError.Type.AD_LOAD?"adLoad":"adPlay"}},{key:"listenToVideoChanges",value:function(e){var t=this.context.player,i=e?"on":"off";null==t||t[i](this.avia.PlayerEvent.VIDEO_ELEMENT_ADDED,this.hVideoAddOrRemove),null==t||t[i](this.avia.PlayerEvent.VIDEO_ELEMENT_REMOVED,this.hVideoAddOrRemove)}}]),i}(Be);function He(e){return!!((null==e?void 0:e.assetKey)||(null==e?void 0:e.videoId)&&e.contentSourceId)}function $e(e){return!!(null==e?void 0:e.adCallUrl)||!!(null==e?void 0:e.adsResponse)}var We="gam";function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:We,factory:ze,options:e}}function ze(e,t){return ce(this,null,z.default.mark(function i(){var n,r,a,o;return z.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.player,r=e.avia,n.registerAdapter({id:We,role:[r.AdapterRole.AD],options:t,factory:function(e,t){return ce(this,null,z.default.mark(function i(){var n,r,s,l,u,c,d,h,f,v,p,g,y,m,A,k,b,E,T,S,C,x,w,P,_,I,L,N,M,R,O,D,B;return z.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(k=e.avia,b=e.system,E=e.resource,T=e.dom,S=e.playerOptions,C=e.logger,x=E.ad,w=$e(x.csai),P=He(x.ssai),_=!0===S.enableOm,I=!0===S.enableMoat,L=!0===t.debug?"_debug":"",N=!0===(null==(n=x.ssai)?void 0:n.useApi),!P){i.next=22;break}if((R=null==(l=null==(s=null==(r=b.global.google)?void 0:r.ima)?void 0:s.dai)?void 0:l.api)||N){i.next=15;break}return O=(null==(u=t.dependencies)?void 0:u.dai)||"//imasdk.googleapis.com/js/sdkloader/ima3_dai".concat(L,".js"),i.next=14,k.Util.loadScript({url:O},S,function(){var e,t,i;return null==(i=null==(t=null==(e=b.global.google)?void 0:e.ima)?void 0:t.dai)?void 0:i.api});case 14:R=null==(h=null==(d=null==(c=b.global.google)?void 0:c.ima)?void 0:d.dai)?void 0:h.api;case 15:if(R||N){i.next=19;break}throw new Error("GAM Plugin: Unable to load SDK");case 19:N||(D={promoskip:!0},_&&(D.enableOmidBeta=!0),null==(f=null==R?void 0:R.DaiSdkSettings)||f.setFeatureFlags(D));case 20:o||(o=new Ue(e,N?Ae:R,N?k.Util.createSimpleVideoInterface():T.video)),M=new Re({enableOm:_&&!N,playheadInterface:T.video,presentationContainer:T.main,autoplayState:{muted:e.muted,autoplay:e.autoplay},adService:o},e);case 22:if(!w){i.next=30;break}if(null==(p=null==(v=b.global.google)?void 0:v.ima)?void 0:p.AdsRequest){i.next=27;break}return B=(null==(g=t.dependencies)?void 0:g.ima)||"//imasdk.googleapis.com/js/sdkloader/ima3".concat(L,".js"),i.next=27,k.Util.loadScript({url:B},S,function(){var e;return null==(e=b.global.google)?void 0:e.ima});case 27:_&&(null==(A=null==(m=null==(y=b.global.google)?void 0:y.ima)?void 0:m.settings)||A.setFeatureFlags({enableOmidBeta:!0})),a||(a=new Ve(e,t.imaVpaidMode,_)),M=new Oe({playheadInterface:T.video,presentationContainer:T.main,autoplayState:{muted:e.muted,autoplay:e.autoplay},adService:a},e);case 30:return _&&C.log(k.LogLevel.INFO,"GAM Plugin: OM is enabled"),!N&&I&&C.log(k.LogLevel.INFO,"GAM Plugin: Moat SDK is enabled"),i.abrupt("return",M);case 33:case"end":return i.stop()}},i)}))},isSupported:function(e){var t=e.resource,i=$e(t.ad.csai),n=He(t.ad.ssai);return i||n}}),i.abrupt("return",{getId:function(){return We},destroy:function(){null==a||a.destroy(),a=null}});case 3:case"end":return i.stop()}},i)}))}var je=We,Ge=ze,qe=Ke;return fe}()},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("metadata",'<span class="card__label card__label--type-short card__label--type-time-duration">{(opts.isplaying && playerState) ? nowPlayingLabel : label}</span><span class="card__label card__label--type-long card__label--type-time-duration">{(opts.isplaying && playerState) ? nowPlayingLabel : liveLabelLong}</span><span class="card__label card__label--type-relative">{riot.mixin(\'formatter\').getRelativeTime(item.timestamp)}</span><span if="{item.type == \'playlist\'}" class="card__label card__label--type-count">{label} video{label !== 1 ? \'s\' : \'\'}</span>',"","",function(e){this.item=e.item,this.label="",this.liveLabelLong="",this.nowPlayingLabel="now playing",this.playerState=!!window.istouch||null,this.parent.parent.root.classList.contains("carousel--slug-ott-live")&&(this.nowPlayingLabel="playing"),this.on("mount",()=>{this.getLabel(this.item)}),this.dispatch.on("player:video:state",e=>{this.playerState=!0,this.update()}),this.getLabel=function(e){if("live"==e.type){var t=new Date;this.label=this.formatTime(t)}else"vod"==e.type||"dvr"==e.type?this.label=e.durationLabel:"playlist"==e.type?this.label=e.meta.totalCount:"listing"!=e.type&&"channel"!=e.type||(this.liveLabelLong="live: "+e.title,this.label="live");this.update()}.bind(this),this.formatTime=function(e,t){if(t);else e=new Date(e);if(e.getHours()>12)var i=e.getHours()-12;else i=e.getHours();if(e.getHours()<12)var n="am";else n="pm";return i+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+" "+n}.bind(this)})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("thumbnail",'<span class="{opts.class}-img img"><img data-srcset="{thumbnail.sd} 1x, {thumbnail.hd} 2x" riot-src="{thumbnail.sd}" srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEAAAAALAAAAAABAAEAAAI=" alt="{opts.alt}" class="lazyload"></span><svg viewbox="0 0 32 32" class="{opts.class}--icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-video"></use></svg>',"","",function(e){this.type=e.type,this.slug=e.slug,this.thumbnail={sd:e.images.sd,hd:e.images.hd},this.isIframe=window.self!==window.top,"channel"===this.type&&!1===this.isIframe&&(this.thumbnail.sd="/assets/live_cards/video-door-"+this.slug.replace(/_/g,"-")+"@1x.png",this.thumbnail.hd="/assets/live_cards/video-door-"+this.slug.replace(/_/g,"-")+"@2x.png")})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";var e=i(1);e.tag2("card",'<a ref="anchor" if="{item.type.indexOf(\'html\') === -1}" class="card__container" href="{item.url}" target="_blank" rel="{relData}"><thumbnail if="{item.images.sd || item.images.hd}" class="card__thumb" images="{item.images}" alt="{title}" slug="{item.slug}" type="{item.type}"></thumbnail><div class="card__heading-wrapper"><h3 if="{title}" class="card__title">{title}</h3></div><span class="card__link" if="{item.linkText}" href="{item.linkUrl}" aria-label="{item.linkText}">{item.linkText}</span><metadata isplaying="{isPlaying}" class="label" component="card" item="{item}" type="{item.type}" relativetime="true"></metadata></a>',"","class=\"card card--type-{item.type} card--type-{imposter} card--type-{opts.classes} card--slug-{item.slug} {'card--is-playing': isPlaying} {'card--is-active': isActive}\"",function(t){this.item=t.item,this.title=t.item.title,this.dataIs=null,this.isActive=!1,this.isPlaying=!1,this.relData,1==this.item.isImposter&&(this.imposter="is-imposter"),1==this.item.isExternal&&(this.relData="noopener nofollow"),this.isSheAnAd=function(e){return e.type.indexOf("html")>-1}.bind(this),this.changeOttLiveTitle=function(){if(this.item.items){var e=this.item.items.find(e=>"live"===e.type);e&&this.update({title:e.title})}}.bind(this),"ott-live"===this.parent.playlist.slug&&this.item.items&&this.changeOttLiveTitle(),this.dispatch.on("video:video:changed:type-live:"+this.item.id,e=>{this.title!==e.video.title&&this.update({title:e.video.title})}),this.dispatch.on("url:load",e=>{this.update({isActive:e.video&&e.video.id===this.item.id||"live"===e.video.type&&e.video.mpxRefId===this.item.mpxRefId})}),this.dispatch.on("player:video:state",e=>{this.update({isPlaying:("live"===e.video.type&&e.video.mpxRefId===this.item.mpxRefId||"live"!==e.video.type&&e.video.id===this.item.id)&&"PLAYING"===e.playbackState})}),this.on("update",e=>{"current"==t.type&&(this.item=t.item),this.refs.anchor&&(this.refs.anchor.payload=this.item)}),this.on("mount",()=>{if(this.isSheAnAd(this.item)){var t="html"+Date.now(),i=e.tag(t,this.item.body.replace(/({|})/g,"\\$1"),null,'class="html-container"'),n=document.createElement(i);this.root.appendChild(n),e.mount(i)}else this.refs.anchor&&(this.refs.anchor.payload=this.item);"related"===this.parent.opts.component&&this.update({isActive:this.item.id===CBSNEWS.defaultPayload.items[0].id})})})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,r;n=[i(124)],void 0===(r=function(e){"use strict";var t;e=(t=e)&&t.__esModule?t:{default:t},i(1).tag2("carousel",'<h2 if="{playlistItems.length && playlist.title}" class="carousel__title" aria-label="{playlist.title}"> {playlist.title} </h2><ad display="{opts.type === \'playlist\' && opts.component === \'hero\'}" slot="sponsor-playlist-logo" categoryslug="{playlist.slug}"></ad><div class="show_{rowsVisible} card__wrapper" ref="list"><card if="{playlistItems.length}" each="{item, i in playlistItems}" item="{item}" index="{i}" ref="card"></card></div><button if="{playlistItems.length && playlist.id}" aria-role="button" class="carousel__button" ref="loadmore" aria-label="more {playlist.title}" onclick="{handleLoadMore}"> More + </button>',"","id=\"{playlist.slug}\" class=\"carousel carousel--slug-{playlist.slug} carousel--component-{opts.component} carousel--view-{playlist.meta.view} carousel--type-{playlist.type} {'carousel--empty ': isEmpty} {dupe ? 'carousel--is-playing' : ''}\" tabindex=\"0\"",function(t){window.addEventListener("resize",(0,e.default)(e=>this.dispatch.trigger("window:resize"),250)),this.playlist={id:null,type:t.type,title:null,items:[],meta:{view:null}},this.playlistItems=[],this.defaultRowsVisible=2,this.rowsVisible=parseInt(t.rowsvisible)||2,this.dupe=!1,this.isLoadMoreHidden=!0,this.registerComponent=function(){(t.plid||t.slug)&&t.type&&this.playlist.id!==t.plid&&this.dispatch.trigger("register:component",t.playlist)}.bind(this),this.scrollToShelf=function(){if(this.playlist.slug&&CBSNEWS.originalUrl&&CBSNEWS.originalUrl.hash&&window===window.top){var e=CBSNEWS.originalUrl.hash.replace(/^#/,""),t=document.querySelector('[id="'.concat(CBSNEWS.originalUrl.hash,'"]'));t&&e===this.playlist.slug&&t.scrollIntoView({behavior:"smooth"})}}.bind(this),this.showHideLoadMore=function(){if(this.playlist.id&&this.refs.list&&!(this.refs.list.childElementCount<=0)){var e=!1,t=this.refs.list.getElementsByClassName("card");if(t&&t.length>0)for(var i of t)if(0===i.offsetWidth&&0===i.offsetHeight){if(i.classList.contains("card--type-html-native-ad")||i.classList.contains("card--is-playing")||i.classList.contains("card--type-is-imposter"))continue;e=!0;break}this.refs.loadmore&&(e?this.refs.loadmore.classList.remove("carousel__button--hidden"):this.refs.loadmore.classList.add("carousel__button--hidden"))}}.bind(this),this.isDuplicate=function(e){var i,n;null!==(i=e.video)&&void 0!==i&&null!==(n=i.playlist)&&void 0!==n&&n.id&&e.video.playlist.id==t.plid!==this.dupe&&this.update({dupe:e.video.playlist.id==t.plid})}.bind(this),this.dispatch.on("player:ad:start",this.isDuplicate),this.dispatch.on("player:content:start",this.isDuplicate),this.dispatch.on("url:load",this.isDuplicate),this.dispatch.on("window:resize",this.showHideLoadMore),this.dispatch.on("video:data:changed",e=>{if(e.playlist.id===t.plid){var i={};this.playlist.id&&t.plid===this.playlist.id||(i=this.setDefaultRowsVisible(e.playlist.meta.view)),i.playlist=e.playlist,i.playlistItems=this.getItems(e.playlist),this.isEmpty=e.playlist.emptyPlaylist,this.update(i)}}),this.on("mount",this.registerComponent),this.on("update",this.registerComponent),this.on("updated",this.showHideLoadMore),this.on("updated",this.scrollToShelf),this.on("updated",()=>{this.dispatch.trigger("video:data:rendered",{playlist:this.playlist,playlistItems:this.playlistItems})}),this.handleLoadMore=function(e){e.preventUpdate=!0;var t=this.rowsVisible;this.rowsVisible<8&&"all"!=this.rowsVisible?t+=this.defaultRowsVisible:t="all",this.update({rowsVisible:t})}.bind(this),this.setDefaultRowsVisible=function(e){var i={};return"playlists"===e?(i.defaultRowsVisible=1,i.rowsVisible=1):"slider"==t.component?i.rowsVisible="all":(i.defaultRowsVisible=2,i.rowsVisible=2),i}.bind(this),this.getItems=function(e){return"slider"===t.component||"hero"===t.component?e.items.filter(e=>-1===e.type.indexOf("html")).filter(e=>!0!==e.isImposter):e.items.filter(e=>!0!==e.isImposter)}.bind(this)})}.apply(t,n))||(e.exports=r)},function(e,t){e.exports=function(e,t){var i=null;return function(){clearTimeout(i);var n=arguments,r=this;i=setTimeout(function(){e.apply(r,n)},t)}}},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("slider",'<button hide="{lessThanLimit}" class="slider__controls slider__controls--prev" onclick="{previous}" ref="prevBtn"><svg width="47" height="47" viewbox="0 0 47 47" xmlns="http://www.w3.org/2000/svg"><title>buttons/button-playertray-right</title><g fill="none" fill-rule="evenodd"><path d="M0 4.007C0 1.794 1.785 0 4.007 0H47v47H4.007C1.794 47 0 45.215 0 42.993V4.007z" fill="#F5F5F5"></path><path stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M22 17l7 6.776L22 30"></path></g></svg></button><button hide="{lessThanLimit}" class="slider__controls slider__controls--next" onclick="{next}" ref="nextBtn"><svg width="47" height="47" viewbox="0 0 47 47" xmlns="http://www.w3.org/2000/svg"><title>buttons/button-playertray-right</title><g fill="none" fill-rule="evenodd"><path d="M0 4.007C0 1.794 1.785 0 4.007 0H47v47H4.007C1.794 47 0 45.215 0 42.993V4.007z" fill="#F5F5F5"></path><path stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M22 17l7 6.776L22 30"></path></g></svg></button><carousel ref="slider" if="{playlist.id}" component="{opts.component}" plid="{playlist.id}" slug="{playlist.slug}" type="{playlist.type}" playlist="{playlist}"></carousel>',"",'class="slider slider--slug-{playlist.slug}"',function(e){this.playlist={id:null,slug:"live-channels",items:[]},this.limit=parseInt(e.limit),this.margin=parseInt(e.margin),this.lessThanLimit=!0,"related"===e.component&&this.update({playlist:CBSNEWS.defaultPayload}),window.isembed?(this.dispatch.trigger("register:component",{api:"/video/xhr/collection/component/live-channels/",slug:"live-channels",type:"component"}),this.dispatch.on("video:data:changed:live-channels",e=>this.playlist=e.playlist)):(this.dispatch.on("url:load",e=>{"channel"!==e.type&&"channel"!==e.video.type&&this.update({playlist:e.video.playlist})}),this.dispatch.on("url:change",e=>{if(this.playlist.id){var t=this.refs.slider.refs.list;this.scrollToCard(t,e.video.slug)}})),this.dispatch.on("player:player:fullscreen",()=>{if(this.playlist.id){var e=this.refs.slider.refs.list;this.scrollOver(e,id,this.playlist.items.length,this.isFullScreen())}}),this.dispatch.on("video:data:changed",e=>{if(!this.playlist||this.playlist.id===e.playlist.id){this.update({playlist:e.playlist,lessThanLimit:this.playlist.items.length<=this.limit});var t=this.playlist.id;if(t){var i=this.refs.slider.refs.list;this.scrollOver(i,t,e.playlist.items.length,this.isFullScreen())}}}),this.isFullScreen=function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}.bind(this),this._getTranslateValue=function(e){var t=getComputedStyle(e).transform;return"none"===t?"none":+t.split("(")[1].split(")")[0].split(",")[4]}.bind(this),this.on("updated",()=>{this.playlist&&this.refs.slider&&this.tags.carousel.on("updated",()=>{if(this.refs.slider.refs.list&&this.root.querySelector(".card")){var e=this.refs.slider.root.querySelectorAll(".card__wrapper .card");Math.round(this.root.querySelector(".card").offsetWidth),this.margin;e.length,this.limit,this.playlist.id;try{Math.round(this.root.querySelector(".card").offsetWidth),this.wrapper=this.refs.slider.root.querySelector(".card__wrapper")}catch(e){}}})}),this.scrollToCard=function(e,t){if(e&&t){var i=e.querySelector(".card--slug-"+t);if(i){this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden"),e.style.transform="translateX(-"+i.offsetLeft+"px)";var n=parseInt(i.getAttribute("index"))+1;this.playlist.items.length-n<=this.limit&&this.refs.nextBtn.classList.add("slider__controls--hidden"),1===n&&this.refs.prevBtn.classList.add("slider__controls--hidden")}}}.bind(this),this.scrollOver=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var r=this.root.querySelector(".card");if(r)var a=Math.round(r.offsetWidth)+this.margin;else a=335;var o=document.body.offsetWidth,s=a*i,l=s-a*this.limit;if(this._getTranslateValue(e),this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden"),this.update({lessThanLimit:n&&s<o}),0===t.indexOf("fusion-")){n&&(l=s-document.body.offsetWidth);try{e.style.transform="translateX(-"+l+"px)",this.refs.nextBtn.classList.add("slider__controls--hidden")}catch(e){}}else try{e.style.transform="translateX(0)",this.refs.prevBtn.classList.add("slider__controls--hidden")}catch(e){}}}.bind(this),this.scrollTo=function(e,t){var i=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,n=this.refs.slider.root.querySelectorAll(".card__wrapper .card"),r=Math.round(this.root.querySelector(".card").offsetWidth)+this.margin,a=r*n.length,o=this._getTranslateValue(e),s=0;this.refs.nextBtn.classList.remove("slider__controls--hidden"),this.refs.prevBtn.classList.remove("slider__controls--hidden");var l=a+o-r*this.limit;i&&(l=a+o-i.offsetWidth);var u=Math.abs(o);"previous"==t?(Math.abs(o)<450?(s=r-Math.abs(o),i&&u<=r&&(this.refs.prevBtn.classList.add("slider__controls--hidden"),s=0),u===r&&this.refs.prevBtn.classList.add("slider__controls--hidden")):Math.abs(o)<1005?(s=2*r-Math.abs(o),i&&u<=2*r&&(this.refs.prevBtn.classList.add("slider__controls--hidden"),s=0),u===2*r&&this.refs.prevBtn.classList.add("slider__controls--hidden")):(s=3*r-Math.abs(o),u===3*r&&this.refs.prevBtn.classList.add("slider__controls--hidden")),e.style.transform="translateX("+s+"px)"):(l<400?(s=r-o,i&&l<450&&(this.refs.nextBtn.classList.add("slider__controls--hidden"),s=u+l),l===r&&this.refs.nextBtn.classList.add("slider__controls--hidden")):l<1005?(s=2*r-o,i&&l<1005&&(this.refs.nextBtn.classList.add("slider__controls--hidden"),s=u+l),l===2*r&&this.refs.nextBtn.classList.add("slider__controls--hidden")):(s=3*r-o,l===3*r&&this.refs.nextBtn.classList.add("slider__controls--hidden")),e.style.transform="translateX(-"+s+"px)")}.bind(this),this.whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]}.bind(this),this.previous=function(){var e=this.whichTransitionEvent(),t=this;this.refs.prevBtn.classList.add("slider__controls--disable"),this.wrapper.addEventListener(e,function(){t.refs.prevBtn.classList.remove("slider__controls--disable")}),this.scrollTo(this.wrapper,"previous")}.bind(this),this.next=function(){var e=this.whichTransitionEvent(),t=this;this.refs.nextBtn.classList.add("slider__controls--disable"),this.wrapper.addEventListener(e,function(){t.refs.nextBtn.classList.remove("slider__controls--disable")}),this.scrollTo(this.wrapper,"next")}.bind(this)})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("overlay-headline","<virtual> {headline} </virtual>","","",function(e){this.headline=e.title,this.slug=e.slug,this.type=e.type,this.onLiveItemChange=function(e){this.update({headline:e.video.title})}.bind(this),this.on("mount",()=>{"live"==this.type&&this.dispatch.on("video:video:changed:type-live",this.onLiveItemChange)})})}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n;void 0===(n=function(){"use strict";i(1).tag2("raw","<span></span>","","",function(e){this.root.innerHTML=e.html||"",this.on("update",function(){this.root.innerHTML=e.html||""})})}.apply(t,[]))||(e.exports=n)},function(e,t,i){e.exports=i(129)},function(e,t,i){var n,r;n=[i(2),i(1),i(67),i(68),i(70),i(78),i(120),i(121),i(122),i(123),i(125),i(126),i(127)],void 0===(r=function(e,t,i,n,r,a,o,s,l,u,c,d,h){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}e=f(e),t=f(t);var v=CBSNEWS.defaultPayload,p=v.items[0],g=1==hashParams.autoplay,y=0==hashParams.autoplay,m=1==hashParams.isCollapsible,A=!(!v.meta||!v.meta.view),k=A&&/^video_shelf/.test(CBSNEWS.defaultPayload.meta.view),b=/^(60-minutes|48-hours)/.test(p.topic.slug),E="live"==p.type;new n.VideoStore,E||(new i.VideoFeedAdapter,b&&y||A&&!k||g&&m||e.default.trigger("feed:request:playlist",v)),(0,r.beforeInitialTagMount)(),t.default.mount("aviajs"),hashParams.tracking.articleType&&"content_article"===hashParams.tracking.articleType&&"lead"===hashParams.tracking.mediaPositionType&&t.default.mount("slider",{component:"related",limit:4,margin:20}),m&&document.body.classList.add("has-collapsible-header")}.apply(t,n))||(e.exports=r)}])}),CBSNEWS.tracking.admiralInit=!0,CBSNEWS.features.executeWithConsent(["admiral"],"targeting",function(){setTimeout(function(){try{require(["https://uninterestedquarter.com/v2dct7QSPycqlji17HhQJwi0MtrZ5V7i9ctT0h1hlUQXDRaBEpmYI3aE#"])}catch(e){console.error("failed to require admiral: ",e)}},parseInt(CBSNEWS.features.admiral)||100),function(e,t,i,n,r){function a(i,n){(function(){try{return 0<(localStorage.getItem("v4ac1eiZr0")||"").split(",")[4]}catch(e){}return!1})()&&(n=e[t].pubads())&&n.setTargeting("ae","t")}(r=e[t]=e[t]||{}).cmd=r.cmd||[],typeof r.pubads===i?a():typeof r.cmd.unshift===i?r.cmd.unshift(a):r.cmd.push(a)}(window,"googletag","function"),window.admiral=window.admiral||function(){(admiral.q=admiral.q||[]).push(arguments)},window.admiral("after","measure.detected",function(e){e.adblocking&&(CBSNEWS.tracking.admiralNovemberAlpha=e.adblocking),e.whitelisted&&(CBSNEWS.tracking.admiralNovemberAlphaWL=e.whitelisted)})}),define("third-party/admiral",function(){}),require(["version!fly/managers/debug"],function(e){var t=e.init("optimizelyExp");if(CBSNEWS.frameElement)return Object.defineProperty(CBSNEWS.tracking,"optimizelyExp",{get:function(){return window.parent.CBSNEWS.tracking.optimizelyExp},set:function(){},configurable:!0,enumerable:!0}),void t.log("from parent",CBSNEWS.tracking.optimizelyExp);function i(e){return e.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_")}function n(e){let n=CBSNEWS.features.weightedFeatures.filter((e,t,i)=>""!==e&&i.indexOf(e)===t).map(e=>e+"="+CBSNEWS.features.getFeatureValue(e)).sort();if(e){let e=window.optimizely.get("state").getExperimentStates();for(let t in e){let r=e[t];r.isActive&&!r.isInExperimentHoldback&&n.push(`${i(r.experimentName)}(${r.id}):${i(r.variation.name)}(${r.variation.id})`)}}CBSNEWS.tracking.optimizelyExp=n.join("|");let r={type:"trackingDataUpdate",data:{optimizelyExp:CBSNEWS.tracking.optimizelyExp,pageViewGuid:CBSNEWS.tracking.pageViewGuid}};t.log("message",r),window.webkit&&!navigator.userAgent.match("CriOS")?window.webkit.messageHandlers.jsHandler.postMessage(r):window.Android?Android.postMessage(JSON.stringify(r)):window!==window.parent&&window.parent.postMessage(r,"*")}window.optimizely=window.optimizely||[],window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"initialized"},handler:n}),n(!1)}),define("utils/optimizely-exp",function(){}),require(["fly/libs/uuid.v4"],function(){CBSNEWS.frameElement?CBSNEWS.tracking.pageViewGuid=window.parent.CBSNEWS.tracking.pageViewGuid:CBSNEWS.tracking.pageViewGuid=uuid.v4()}),require(["common/lazysizes"]),require(["video/common","video/main-embed"]),null==CBSNEWS.tracking.admiralInit&&require(["third-party/admiral"]),require(["utils/optimizely-exp"]),define("main.video-embed",function(){});