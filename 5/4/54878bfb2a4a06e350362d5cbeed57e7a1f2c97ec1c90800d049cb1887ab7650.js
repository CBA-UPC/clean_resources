//tealium universal tag - utag.185 ut4.0.202312211150, Copyright 2023 Tealium.com Inc. All Rights Reserved.
window.cnxDataLayer=[];try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;u.ev={"view":1,"link":1};u.initialized=false;u.scriptrequested=false;u.map={"tealium_event:addtocart":"addtocart","tealium_event:product_view":"pageview","tealium_event:product_list_view":"pageview","tealium_event:search":"search","tealium_event:purchase":"Conversion","product_full_sku":"pageview.product_ids,addtocart.product_ids","top_skus":"pageview.product_ids,search.product_ids","subcategory":"pageview.category_name","category":"pageview.category_name","search_term":"search.search_term","product_quantity":"product_quantity","order_id":"order_id","order_subtotal":"order_subtotal","order_currency":"order_currency","_sm_185_11":"pageview.category_name"};u.extend=[function(a,b){try{b['_sm_185_11']=b['subcategory']||b['category'];}catch(e){utag.DB(e);}}];u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){utag.DB("send:185");utag.DB(data_layer);var a,b,c,d;a=utag_event;b=data_layer;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"https://js.cnnx.link/roi/cnxtag-min.js?","mid":"23819","order_id":"","cust_type":"","order_subtotal":"","units_ordered":0,"order_currency":"","event_queue":[],"custom":{}};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:185:EXTENSIONS");utag.DB(data_layer);for(var mapping_key in utag.loader.GV(u.map)){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==""){var destinations=u.map[mapping_key].split(",");for(var i=0;i<destinations.length;i++){mapFunc(destinations[i].split("."),u.data,data_layer[mapping_key]);}}else{var event_destinations=mapping_key.split(":");if(event_destinations.length===2&&data_layer[event_destinations[0]]===event_destinations[1]){if(u.map[mapping_key]){u.data.event_queue=u.data.event_queue.concat(u.map[mapping_key].split(","));}}}}
utag.DB("send:185:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||data_layer._corder||"";u.data.order_subtotal=u.data.order_subtotal||data_layer._csubtotal||"";u.data.order_currency=u.data.order_currency||data_layer._ccurrency||"";if(u.data.product_quantity&&u.data.product_quantity.length===0&&data_layer._cquan!==undefined){u.data.product_quantity=data_layer._cquan.slice(0);}
if(!u.data.mid){utag.DB(u.id+": Tag not fired: Required attribute not populated");return;}
if(u.data.order_id){u.data.product_quantity.forEach(function(product){u.data.units_ordered+=parseInt(product);});u.data.event_queue.push("conversion");}
u.data.event_queue.forEach(function(eventName){var event_data={};utag.DB(eventName);if(eventName==="conversion"){utag.DB(u.data.mid);utag.DB(u.data.cust_type);utag.DB(u.data.order_subtotal);utag.DB(u.data.order_currency);utag.DB(u.data.order_id);utag.DB(u.data.units_ordered);event_data["mid"]=u.data.mid;event_data["cust_type"]=u.data.cust_type;event_data["order_value"]=u.data.order_subtotal;event_data["currency"]=u.data.order_currency;event_data["order_id"]=u.data.order_id;event_data["units_ordered"]=u.data.units_ordered;}
Object.keys(u.map).forEach(function(mapping_from){if(u.map[mapping_from].indexOf(eventName)===0&&typeof data_layer[mapping_from]!=="undefined"){var mapping_to=u.map[mapping_from].substring(eventName.length+1);event_data[mapping_to]=data_layer[mapping_from];}});utag.ut.merge(event_data,u.data[eventName],0);cnxtag("event",eventName,event_data);});if(!u.scriptrequested){u.scriptrequested=true;utag.ut.loader({"type":"script","src":u.data.base_url+"id"+u.data.kvp_delim+u.data.mid,"cb":null,"loc":"script","id":"utag_185","attrs":{"defer":"true"}});}
utag.DB("send:185:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("185","overstock.main"));}catch(error){utag.DB(error);}
