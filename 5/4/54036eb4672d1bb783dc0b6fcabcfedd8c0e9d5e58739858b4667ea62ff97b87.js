!window,function(){return function(e){ar i={},n={0:0};.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise(;t.push(i[2]=r);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=e),a=var l=setTimeout(12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(t)},s.m=e,s.c=i,s.d=s.r=s.t=s.n=s.o=s.p="https://components2.rcsobjects.it/rcs_gallery-manager/v1/",s.oe=var r=window.webpackJsonpRcsGalleryManager=window.webpackJsonpRcsGalleryManager||[],a=r.push.bind(r);r.push=t,r=r.slice();for(var o=0;o<r.length;o++)t(r[o]);var l=a;return s(s.s=2)}([function(e,t){e.exports={build:{entryPublicPath:"https://components2.rcsobjects.it"},message:"This message arrive from config/config.prod.js",url:{embeddedPartnerGallery:"https://%PARTNER%/gallery/%SLUG%/json/",embeddedGallery:"https://www.gazzetta.it/gallery-includes/%DATE%/is-an-gallery-embeed-%ID%_json.json"}}},function(e,t,i){var n=i(3);e.exports=function(e){var t,i="",s=e||{};return function(e,s,r){i=i+'<div class="bck-media-gallery siema-init"'+n.attr("data-config",s,!0,!0)+'><div class="gallery__content"><ul class="gallery-slider js-slider">',function(){var t=e;if("number"==typeof t.length)for(var s=0,r=t.length;s<r;s++){var a=t[s];i=0===s?i+'<li><figure class="has-media image is-3by2"><img width="" height="" rel="1"'+n.attr("alt",a.caption,!0,!0)+n.attr("title",a.caption,!0,!0)+n.attr("src",a.src,!0,!0)+"></figure></li>":i+'<li class="is-hidden"><figure class="has-media image is-3by2"><img class="lazy" width="" height="" rel="2"'+n.attr("alt",a.caption,!0,!0)+n.attr("title",a.caption,!0,!0)+n.attr("data-src",a.src,!0,!0)+"></figure></li>"}else for(var s in r=0,t)r++,a=t[s],i=0===s?i+'<li><figure class="has-media image is-3by2"><img width="" height="" rel="1"'+n.attr("alt",a.caption,!0,!0)+n.attr("title",a.caption,!0,!0)+n.attr("src",a.src,!0,!0)+"></figure></li>":i+'<li class="is-hidden"><figure class="has-media image is-3by2"><img class="lazy" width="" height="" rel="2"'+n.attr("alt",a.caption,!0,!0)+n.attr("title",a.caption,!0,!0)+n.attr("data-src",a.src,!0,!0)+"></figure></li>"}.call(this),i+="</ul></div>",r&&(i=i+'<div class="gallery__header"><h4 class="title">'+(null==(t=r)?"":t)+"</h4></div>"),i+="</div>"}.call(this,"body"in s?s.body:"undefined"!=typeof body?body:void 0,"dataConfig"in s?s.dataConfig:"undefined"!=typeof dataConfig?dataConfig:void 0,"title"in s?s.title:"undefined"!=typeof title?title:void 0),i}},function(e,t,i){const n=i(5);"IntersectionObserver"in window?e.exports=n:i.e(1).then(i.bind(null,6)).then(e.exports=n)},function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty;erge=t.classes=s,t.style=r,t.attr=a,t.attrs=var o=/["&<>]/;.escape=l,t.rethrow=,function(e,t,i){"use strict";i.r(t);var n=i(0),s=i.n(n),r=i(1),a=i.n(r);class o{sync render(){let e=Array.from(document.querySelectorAll(".rcs_gaz-embedgallery"));if(e.length)return Promise.all(await e.map()}async getGalleryTemplate(e){let t=null;const i=e.getAttribute("data-context");if("gazzanet"===i){const i=e.getAttribute("data-slug"),n=e.getAttribute("data-partner");i&&n&&(t=s.a.url.embeddedPartnerGallery.replaceAll("%PARTNER%",n).replace("%SLUG%",i))}else if("generic"===i){t=e.getAttribute("data-jsonurl")}else{const i=e.getAttribute("data-uuid"),n=this.formatUrlDate(e.getAttribute("data-pubdate"));n&&i&&(t=s.a.url.embeddedGallery.replace("%DATE%",n).replace("%ID%",i))}if(!t)return;const n=e.getAttribute("data-title"),r=await fetch(t),o=(await r.json()).contentBody,l={sliderSelector:".js-slider",arrowPrevSelector:"icon-gazzetta-g-arrow-left",arrowNextSelector:"icon-gazzetta-g-arrow-right",manageFirstInitialization:"siema-init",arrowSize:this.isMobile?"fa-1x":"fa-2x"};return e.innerHTML=a()({title:n,body:o,dataConfig:l}),e.querySelector(this.selector)}formatDate(e){if(!e)return;return new Date(e).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//gi,"-")}formatUrlDate(e){if(!e)return;let t=new Date(e),i=t.getDate();i<10&&(i="0"+i);var n=t.getMonth()+1;return n<10&&(n="0"+n),i+"-"+n+"-"+t.getFullYear()}}const l=e=>{let t="object"==typeof e?e[1]:e;return"object"==typeof e&&void 0!==e[`${window.innerWidth}`]?e[`${window.innerWidth}`]:t};var c=i.d(t,"default",;class d{constructor(e){this.selector=e,this.isMobile="mobile"===window.device,this.galleries=[...document.querySelectorAll(e)],this.isGazzetta=Boolean(document.querySelector('[data-newspaper="gazzetta"]')),this.sliders=[]}async render(){const e=await new o(this.selector,this.isMobile).render()||[];this.galleries=[...this.galleries,...e],this.galleries.forEach(e=>{this.gallery=e,this.config=this.getConfig(),this.notValidSlider()||this.init(e,this.config)}),this.listenXaloxGPlusAdminReInit()}listenXaloxGPlusAdminReInit(){let e=!1;const t=[],i=n=>{if(n.detail&&!n.detail.isNextInQueue&&(e||t.length>0))return void t.push(n);e=!0;let s="all",r="";if(n&&n.detail&&n.detail.templateName&&"string"==typeof n.detail.templateName&&(s=n.detail.templateName),"all"===s)this.sliders.forEach(,document.querySelectorAll(".carousel__slider").forEach(e=>{e.classList.add("js-slider")}),document.querySelectorAll(".photogallery-slider").forEach(e=>{e.classList.add("js-slider")}),document.querySelectorAll(".gallery__slider-hp").forEach(,this.galleries=[...document.querySelectorAll(`${this.selector}[data-config]`)],this.galleries.forEach(e=>{this.gallery=e,this.config=this.getConfig(),this.notValidSlider()||(this.init(e,this.config),this.manageLazyLoad())});else{const e=`[data-wf-page-template="${s}"]`;r=n&&n.detail&&n.detail.pageId?`[data-wf-page-id="${n.detail.pageId}"]${e}`:e;const t=this.sliders.findIndex(e=>{const t=e.selector;return Boolean(t.closest(r))});if(t>-1){const[e]=this.sliders.splice(t,1);e.destroy(!0)}const i=document.querySelector(`${r} ${this.selector}[data-config]`);i&&(this.gallery=i,this.config=this.getConfig(),this.notValidSlider()||(this.init(i,this.config),this.manageLazyLoad()))}if(t.length<1)e=!1;else{const[e]=t.splice(0,1);e.detail.isNextInQueue=!0,i(e)}};document.addEventListener("rcs_gallery-manager:xaloxGPlusAdminReInit",i),document.addEventListener("rcs_gallery-manager:refreshLazyLoad",}getConfig(){return JSON.parse(this.gallery.getAttribute("data-config").replace(/(['"])?([a-z0-9A-Z_]+)(['"])?:/g,'"$2": '))}notValidSlider(){if(!this.config.sliderSelector)return!0;const e=this.gallery.querySelector(this.config.sliderSelector);if(!e)return!0;const t=1===e.childElementCount,i=Boolean(this.config.custom);return t&&(this.manageGalleryLoaded(e),this.manageSingleItem()),t||i}manageSingleItem(){this.gallery.classList.remove("siema-init");const e=this.gallery.querySelector(this.config.stepperSelector);e&&e.parentElement&&(e.parentElement.style.visibility="hidden")}init(e,t){this.manageArrows();let i=this.config.perPage;this.config.disablePerPageDynamic||(this.isGazzetta&&(i=function(e,t,i=58,n=168){return e&&t>1?c()&&window.innerWidth<=1024?2:(window.innerWidth-i)/n:!e&&window.innerWidth<1440&&window.innerWidth>=1024&&5.5===t?4.5:t}(this.isMobile,this.config.perPage)),this.isGazzetta||(i=function(e,t,i=40,n=198){if(e&&t>1)return(window.innerWidth-i)/n}(this.isMobile,this.config.perPage)));const n=new Siema({selector:`${this.selector} ${this.config.sliderSelector}`,duration:this.config.duration||200,haveShadow:this.config.haveShadow||"",easing:this.config.easing||"ease-out",perPage:i||1,startIndex:this.config.startIndex||0,draggable:this.config.draggable||!0,multipleDrag:this.config.multipleDrag||!0,threshold:this.config.threshold||20,loop:this.config.loop||!1,rtl:this.config.rtl||!1,arrowSize:this.config.arrowSize||(this.isMobile?"fa-1x":"fa-2x"),galleryRef:e,configRef:t,onInit:onChange:);(this.config.arrowPrevSelector||this.config.arrowNextSelector)&&n.addArrows(),this.manageImageVisualization(n),this.manageDots(n),this.manageCounter(n),this.manageCustomText(n),this.manageRedirectTo(n),this.manageFullScreen(n),this.manageFirstLoad(n),this.manageStepper(n),this.manageGalleryLoaded(n),this.manageShadows(n),this.managePagination(n),this.manageThumbs(n),this.manageAutoplay(n),this.manageThumbNavigation(n),this.manageArrowsCustom(n),this.manageShadowsCustom(n),this.sliders.push(n)}managePagination(e){const t=this.config.pagination;if(t&&(!t.onlyOnDevice||t.onlyOnDevice&&("mobile"===t.onlyOnDevice&&this.isMobile||"desktop"===t.onlyOnDevice&&!this.isMobile))){const i=String(this.config.pagination.container),n=[...this.gallery.querySelectorAll(`${i} div > li`)]||!1,s=[...this.createPagination(n,t.container).children],r=t.activeClass;e.config.onInit=this.setPaginationActiveElement(e,s,r),e.selector.addEventListener("onSlideChange",()=>this.setPaginationActiveElement(e,s,r))}}createPagination(e,t){const i=document.createDocumentFragment(),n=document.createElement("div");return n.classList.add("pagination"),e.forEach((e,t)=>{const i=document.createElement("button");i.setAttribute("data-index",t),n.appendChild(i)}),i.appendChild(n),document.querySelector(t).appendChild(i),n}setPaginationActiveElement(e,t,i){t.forEach(t=>{t.dataset.index===e.currentSlide.toString()?t.classList.add(i):t.classList.remove(i)})}onSlideChange(e){const t=new CustomEvent("onSlideChange",{detail:{slider:e}});this.manageLazyLoad(),e.selector.dispatchEvent(t)}manageLazyLoad(){if(window.LazyLoad)new LazyLoad({elements_selector:".lazy"})}manageImageVisualization(e){[...e.selector.querySelectorAll("li")].forEach(}manageDots(e){if(this.config.dotsOnMobile&&this.isMobile&&this.config.dotsSelector&&this.config.dotActiveClass||!this.config.dotsOnMobile&&!this.isMobile&&this.config.dotsSelector){const i=[...this.gallery.querySelectorAll(this.config.dotsSelector)],n=this.config.dotActiveClass;e.config.onInit=t(e,i,n),e.selector.addEventListener("onSlideChange",}function t(e,t,i){t.forEach(t=>{t.dataset.index===e.currentSlide.toString()?t.classList.add(i):t.classList.remove(i)})}}manageArrowsCustom(e){let t=l(this.config.perPage);if(this.config.arrowPrevSelectorCustom&&this.config.arrowNextSelectorCustom){const i=e.config.galleryRef.closest(".js-custom-arrows-container");if(i){const n=i.querySelector(this.config.arrowPrevSelectorCustom),s=i.querySelector(this.config.arrowNextSelectorCustom);if(n&&s)if(e.innerElements.length<=t&&!this.config.loop?(n.classList.add("is-hidden"),s.classList.add("is-hidden")):(n.classList.remove("is-hidden"),s.classList.remove("is-hidden")),0!==this.config.startIndex||this.config.loop||n.classList.add("is--disabled"),0!==this.config.startIndex&&this.toggleArrowsCustom(e,n,s),e.selector.addEventListener("onSlideChange",!1),this.config.customSelectorSlidesToScroll){const t=this.config.customSelectorSlidesToScroll;n.addEventListener("click",()=>e.prev(t)),s.addEventListener("click",}else n.addEventListener("click",()=>e.prev()),s.addEventListener("click",()=>e.next())}}}toggleArrowsCustom(e,t,i){const n=e.currentSlide,s=t,r=i;let a=l(e.config.perPage);e.config.loop||(0===n&&s.classList.add("is--disabled"),n>0&&s.classList.remove("is--disabled"),n<e.innerElements.length-a&&(r.classList.remove("is--disabled"),e.config.haveShadow&&e.selector.offsetParent.classList.add(e.config.haveShadow)),n===e.innerElements.length-a&&(r.classList.add("is--disabled"),e.config.haveShadow&&e.selector.offsetParent.classList.remove(e.config.haveShadow)))}manageArrows(){if(!this.config.arrowPrevSelector||!this.config.arrowNextSelector)return;const e=this.config.arrowPrevSelector,t=this.config.arrowNextSelector;function i(e){const t=e.currentSlide,i=e.prevArrow,n=e.nextArrow;e.config.loop||(0===t&&i.classList.add("is-hidden"),t>0&&i.classList.remove("is-hidden"),t<e.innerElements.length-e.config.perPage&&(n.classList.remove("is-hidden"),e.config.haveShadow&&e.selector.offsetParent.classList.add(e.config.haveShadow)),t===e.innerElements.length-e.config.perPage&&(n.classList.add("is-hidden"),e.config.haveShadow&&e.selector.offsetParent.classList.remove(e.config.haveShadow)))}Siema.prototype.addArrows=function(){const n=document.createElement("div");n.classList.add("arrow");const s=this.selector.parentElement.appendChild(n);this.prevArrow=document.createElement("button"),this.nextArrow=document.createElement("button");const r=this.config.arrowSize?this.config.arrowSize:"fa-2x";this.prevArrow.classList.add(e),this.prevArrow.classList.add(r),0!==this.config.startIndex||this.config.loop||this.prevArrow.classList.add("is-hidden"),this.nextArrow.classList.add(t),this.nextArrow.classList.add(r),0!==this.config.startIndex&&i(this),s.appendChild(this.prevArrow),s.appendChild(this.nextArrow),this.selector.addEventListener("onSlideChange",!1),this.innerElements.length<=this.config.perPage&&!this.config.loop&&this.nextArrow.classList.add("is-hidden"),this.prevArrow.addEventListener("click",()=>this.prev()),this.nextArrow.addEventListener("click",}}manageShadows(e){if(!this.config.shadowStartClass||!this.config.shadowFinishClass||this.config.shadowCustomLogic)return;const t=this.config.shadowStartClass,i=this.config.shadowFinishClass,n=this.gallery;if(e.innerElements.length<=e.config.perPage)return n.classList.remove(t),void n.classList.remove(i);e.selector.addEventListener("onSlideChange",()=>(function(e,t,i,n){const s=e.currentSlide;0===s&&t.classList.remove(i);s>0&&t.classList.add(i);s<e.innerElements.length-e.config.perPage&&t.classList.add(n);s===e.innerElements.length-e.config.perPage&&t.classList.remove(n)})(e,n,t,i))}manageShadowsCustom(e){if(this.config.shadowCustomLogic){const t=this.config.shadowStartClass,i=this.config.shadowFinishClass,n=this.gallery;switch(this.config.shadowCustomLogic){case"shadowsGPlusRails":e.innerElements.length>e.config.perPage?(n.classList.add(i),e.selector.addEventListener("onSlideChange",()=>{0===e.currentSlide&&(n.classList.add(i),n.classList.remove(t)),e.currentSlide===e.innerElements.length-e.config.perPage&&(n.classList.remove(i),n.classList.add(t))})):(n.classList.remove(t),n.classList.remove(i));break;case"shadowsCustom":{let s="object"==typeof e.config.perPage?e.config.perPage[1]:e.config.perPage,r="object"==typeof e.config.perPage&&void 0!==e.config.perPage[`${window.innerWidth}`]?e.config.perPage[`${window.innerWidth}`]:s;e.innerElements.length>r?(n.classList.add(i),e.selector.addEventListener("onSlideChange",()=>{0===e.currentSlide&&(n.classList.add(i),n.classList.remove(t)),e.currentSlide===e.innerElements.length-r&&(n.classList.remove(i),n.classList.add(t))})):(n.classList.remove(t),n.classList.remove(i))}}}}manageCounter(e){if(!this.config.currentSlideSelector)return;const t=this.gallery.querySelector(this.config.currentSlideSelector);function i(e,t){t.innerText=e.currentSlide+1}e.config.onInit=i(e,t),e.selector.addEventListener("onSlideChange",()=>i(e,t),!1)}manageStepper(e){if(!this.config.stepperSelector)return;let t=this.config.stepperSelector;const i=this.gallery;function n(e,i){const n=e.currentSlide,s=i.querySelector(t);let r=100/e.innerElements.length,a=r*n;e.perPage>1&&(a=(r*=e.perPage)*n/e.perPage),s.style.width=`${r}%`,s.style.marginLeft=`${a}%`}e.selector.addEventListener("onSlideChange",!1),n(e,i)}manageFirstLoad(e){const t=this.gallery.closest(".siema-init");if(t){t.classList.add("siema-complete");const i=new CustomEvent("RCSGalleryManage:endLoaded",{detail:{slider:e}});document.dispatchEvent(i)}}manageGalleryLoaded(e){const t=this.config.sliderSelector.split(".").join("");e.selector?e.selector.classList.remove(t):e.classList.remove(t)}manageSliderElementLoaded({slider:e,config:t}){const i=t.sliderSelector.split(".").join("");e.selector?e.selector.classList.remove(i):e.classList.remove(i)}manageCustomText(e){if(!this.config.customTextElementSelector||!this.config.customTextDestSelector)return;const t=this.config.customTextElementSelector,i=this.config.customTextDestSelector,n=this.config.customTextReadMoreMaxLength,s=this.config.customTextReadMoreSelector;e.config.onInit=this.customTextActions(e,t,i,n,s),e.selector.addEventListener("onSlideChange",}customTextActions(e,t,i,n,s){this.setCustomText(e,t,i),n&&s&&this.manageReadMore(e,n,s,i)}setCustomText(e,t,i){const n=Array.from(e.selector.querySelectorAll(`div > div ${t}`))[e.currentSlide];if(!n)return;const s=n.getAttribute("alt"),r=document.querySelector(i);r&&(r.innerHTML=s)}manageReadMore(e,t,i,n){const s=document.querySelector(i),r=document.querySelector(n),a=r.innerText,o=s.getElementsByClassName("icon")[0],l=o.getElementsByTagName("i")[0];a.length<t?s.style.display="none":(function(){if(document.getElementsByClassName("long-text")[0])return;r.innerHTML=`<span class="short-text">${a.substr(0,t)}</span><span class="long-text" style="display: none">${a.substr(t)}</span><span class="text-dots">...</span>`,s.style.display="inherit",s.innerText="Leggi tutto",s.appendChild(o),l.classList.add("icon-gazzetta-g-indicator-down"),l.classList.remove("icon-gazzetta-g-indicator-up")}(),function(){const e=document.getElementsByClassName("long-text")[0],t=document.getElementsByClassName("text-dots")[0];s.addEventListener("click",i=>{i.preventDefault(),"none"===e.style.display?(e.style.display="inline",t.style.display="none",s.innerText="Leggi meno",s.appendChild(o),l.classList.add("icon-gazzetta-g-indicator-up"),l.classList.remove("icon-gazzetta-g-indicator-down")):(e.style.display="none",t.style.display="inline",s.innerText="Leggi tutto",s.appendChild(o),l.classList.add("icon-gazzetta-g-indicator-down"),l.classList.remove("icon-gazzetta-g-indicator-up"))})}())}manageRedirectTo(e){if(!this.config.redirectAt||!this.config.redirectTo)return;const t=this.config.redirectAt-1,i=this.config.redirectTo;e.selector.addEventListener("onSlideChange",()=>{e.currentSlide===t&&window.open(i,"_self")})}manageFullScreen(e){if(!this.config.fullScreenBtnSelector)return;const t=this.gallery;t.setAttribute("data-fullscreen","false");const i=t.querySelector(this.config.fullScreenBtnSelector);i&&i.addEventListener("click",i=>(function(t,i){t.preventDefault();const n="true"===i.getAttribute("data-fullscreen");i.setAttribute("data-fullscreen",!n);const s=new CustomEvent("RCSGalleryManage:fullScreen",{detail:{fullscreen:!n,slider:e}});document.dispatchEvent(s)})(i,t))}manageThumbs(e){if(!this.config.thumbClass)return;const t=e.config.galleryRef,i=e.config.configRef,n=e=>{const n=t.querySelectorAll(`.${i.thumbClass}`);Array.from(n).forEach((t,i)=>{t.classList.remove("is--active"),i===e.currentSlide&&t.classList.add("is--active")})};n(e),this.resetInterval(),e.selector.addEventListener("onSlideChange",()=>{n(e),this.resetInterval(),this.manageAutoplay(e)})}manageThumbNavigation(e){if(!this.config.thumbClass)return;const t=this.gallery.querySelectorAll(`.${this.config.thumbClass}`);Array.from(t).forEach(}manageAutoplay(e){e.config.configRef.autoplay&&this.initInterval(e,e.config.configRef.autoplay)}initInterval(e,t){this.interval=setInterval(t)}}]).default});