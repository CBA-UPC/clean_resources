"use strict";(window.webpackChunkNRBA=window.webpackChunkNRBA||[]).push([[569],{5569:(t,e,n)=>{n.d(e,{o:()=>l});var s=n(6103),r=n(1925),i=n(4284),a=n(1719),o=n(3585),u=n(8649),h=n(8438),d=n(584);if(h.v6){h.ZP.cleanupTasks=[];const t=h.ZP.close;h.ZP.close=()=>{for(let t of h.ZP.cleanupTasks)t();t()}}var c=n(745),f=n(5970);class l extends r.w{constructor(t,e,n){super(n),this.endpoint=t,this.opts=e||{},this.started=!1,this.timeoutHandle=null,this.harvest=new i.Mu(this.sharedContext),function(t,e){if(h.il)if(e)(0,d.N)(t,!0),(0,o.bP)("pagehide",t);else{var n=(0,u.Z)(t);!a.I||navigator.sendBeacon?(0,o.bP)("pagehide",n):(0,o.bP)("beforeunload",n),(0,o.bP)("unload",n)}else h.v6&&h.ZP.cleanupTasks.push(t)}((()=>{var t,e;this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}),t=this.sharedContext.agentIdentifier,e=(0,f.Mt)(t,"privacy.cookies_enabled"),c.s&&e&&h.il&&exports.setCookie()}),(0,f.Mt)(this.sharedContext.agentIdentifier,"allow_bfcache"))}startTimer(t,e){this.interval=t,this.started=!0,this.scheduleHarvest(null!=e?e:this.interval)}stopTimer(){this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}scheduleHarvest(t,e){if(!this.timeoutHandle){var n=this;null==t&&(t=this.interval),this.timeoutHandle=setTimeout((()=>{n.timeoutHandle=null,n.runHarvest(e)}),1e3*t)}}runHarvest(t){var e=this;if(this.opts.getPayload){var n=(0,i.qD)(this.endpoint,t);if(!n)return!1;var r=n.method===s.T.xhr,a=this.opts.getPayload({retry:r});if(a){a="[object Array]"===Object.prototype.toString.call(a)?a:[a];for(var o=0;o<a.length;o++)this.harvest.send(this.endpoint,a[o],t,n,u)}}else{const e=t?.unload?void 0:u;this.harvest.sendX(this.endpoint,t,e)}return void(this.started&&this.scheduleHarvest());function u(n){n.blocked?e.onHarvestBlocked(t,n):e.onHarvestFinished(t,n)}}onHarvestFinished(t,e){if(this.opts.onFinished&&this.opts.onFinished(e),e.sent&&e.retry){var n=e.delay||this.opts.retryDelay;this.started&&n?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(n,t)):!this.started&&n&&this.scheduleHarvest(n,t)}}}},4284:(t,e,n)=>{n.d(e,{Mu:()=>m,qD:()=>x,y0:()=>g});var s=n(9599),r=n(4794),i=n(5277),a=n(6103);function o(){return""+location}var u=n(5970),h=n(6621),d=n(9206),c=n(3585),f=n(3524),l=n(248);var v=n(1925),p=n(8873),y=n(8438);const b=!!navigator.sendBeacon;var g=f.H>9||0===f.H;class m extends v.w{constructor(t){super(t),this.tooManyRequestsDelay=(0,u.Mt)(this.sharedContext.agentIdentifier,"harvest.tooManyRequestsDelay")||60,this.obfuscator=new l.RR(this.sharedContext),this.getScheme=()=>!1===(0,u.Mt)(this.sharedContext.agentIdentifier,"ssl")?"http":"https",this._events={}}sendX(t,e,n){var s=x(t,e);if(!s)return!1;var r={retry:s.method===a.T.xhr};return this.obfuscator.shouldObfuscate()?this.obfuscateAndSend(t,this.createPayload(t,r),e,s,n):this._send(t,this.createPayload(t,r),e,s,n)}send(t,e,n,r,i){var a=this,o=P(),u=P();e.body&&(0,s.D)(e.body,o),e.qs&&(0,s.D)(e.qs,u);var h={body:o(),qs:u()},d=this.obfuscator.shouldObfuscate()?function(){return a.obfuscateAndSend(...arguments)}:function(){return a._send(...arguments)};return d(t,h,n,r,i)}obfuscateAndSend(t,e,n,s,r){var i=this;return function(t,e,n,s){return t&&"object"==typeof t?(n=n||"string",s=s||[],function t(s){for(var i in s)s.hasOwnProperty(i)&&("object"==typeof s[i]?t(s[i]):typeof s[i]!==n||r(i)||(s[i]=e(s[i])));return s}(t)):t;function r(t){for(var e=!1,n=0;n<s.length;n++)if(s[n]===t){e=!0;break}return e}}(e,(function(){return i.obfuscator.obfuscateString(...arguments)}),"string",["e"]),this._send(t,e,n,s,r)}_send(t,e,n,s,o){var h=(0,u.C5)(this.sharedContext.agentIdentifier);if(!h.errorBeacon)return!1;var d=(0,u.OP)(this.sharedContext.agentIdentifier);if(!e.body)return o&&o({sent:!1}),!1;n||(n={});var f=this.getScheme()+"://"+h.errorBeacon+"/"+t+"/1/"+h.licenseKey+this.baseQueryString();e.qs&&(f+=(0,r.j6)(e.qs,d.maxBytes)),s||(s=x(t,n));var l,v=s.method,p=s.useBody,b=f;p&&"events"===t?l=e.body.e:p?l=(0,i.P)(e.body):b=f+(0,r.j6)(e.body,d.maxBytes);var g=v(b,l,n.unload&&y.v6);o&&v===a.T.xhr&&g.addEventListener("load",(function(){var t={sent:!0};429===this.status?(t.retry=!0,t.delay=this.tooManyRequestsDelay):408!==this.status&&500!==this.status&&503!==this.status||(t.retry=!0),n.needResponse&&(t.responseText=this.responseText),o(t)}),(0,c.m$)(!1));return g||v!==a.T.beacon||(g=(v=a.T.img)(f+(0,r.j6)(e.body,d.maxBytes))),g}baseQueryString(){var t=(0,u.OP)(this.sharedContext.agentIdentifier),e=(0,u.C5)(this.sharedContext.agentIdentifier),n=(0,h.f)(o()),s=this.obfuscator.shouldObfuscate()?this.obfuscator.obfuscateString(n):n;return["?a="+e.applicationID,(0,r.wu)("sa",e.sa?""+e.sa:""),(0,r.wu)("v",p.q),w(e),(0,r.wu)("ct",t.customTransaction),"&rst="+(0,d.zO)(),"&ck=0","&s="+(t.sessionId||"0"),(0,r.wu)("ref",s),(0,r.wu)("ptid",t.ptid?""+t.ptid:"")].join("")}createPayload(t,e){for(var n=P(),r=P(),i=this._events[t]&&this._events[t]||[],a=0;a<i.length;a++){var o=i[a](e);o&&(o.body&&(0,s.D)(o.body,n),o.qs&&(0,s.D)(o.qs,r))}return{body:n(),qs:r()}}on(t,e){(this._events[t]||(this._events[t]=[])).push(e)}resetListeners(){(0,s.D)(this._events,(t=>{this._events[t]=[]}))}}function x(t,e){var n,s;if((e=e||{}).needResponse){if(!g)return!1;s=!0,n=a.T.xhr}else if(e.unload&&y.il)s=b,n=b?a.T.beacon:a.T.img;else if(g)s=!0,n=a.T.xhr;else{if("events"!==t&&"jserrors"!==t)return!1;n=a.T.img}return{method:n,useBody:s}}function w(t){return t.transactionName?(0,r.wu)("to",t.transactionName):(0,r.wu)("t",t.tNamePlain||"Unnamed Transaction")}function P(){var t={},e=!1;return function(n,s){if(s&&s.length&&(t[n]=s,e=!0),e)return t}}},6621:(t,e,n)=>{n.d(e,{f:()=>i});var s=/([^?#]*)[^#]*(#[^?]*|$).*/,r=/([^?#]*)().*/;function i(t,e){return t.replace(e?s:r,"$1$2")}},4794:(t,e,n)=>{n.d(e,{j6:()=>c,nI:()=>d,wu:()=>f});var s=n(9599),r=n(5277),i={"%2C":",","%3A":":","%2F":"/","%40":"@","%24":"$","%3B":";"},a=(0,s.D)(i,(function(t){return t})),o=new RegExp(a.join("|"),"g");function u(t){return i[t]}function h(t){return null==t?"null":encodeURIComponent(t).replace(o,u)}function d(t,e){for(var n=0,s=0;s<t.length;s++)if((n+=t[s].length)>e)return t.slice(0,s).join("");return t.join("")}function c(t,e){var n=0,i="";return(0,s.D)(t,(function(t,s){var a,o,u=[];if("string"==typeof s)a="&"+t+"="+h(s),n+=a.length,i+=a;else if(s.length){for(n+=9,o=0;o<s.length&&(a=h((0,r.P)(s[o])),n+=a.length,!(void 0!==e&&n>=e));o++)u.push(a);i+="&"+t+"=%5B"+u.join(",")+"%5D"}})),i}function f(t,e){return e&&"string"==typeof e?"&"+t+"="+h(e):""}},5277:(t,e,n)=>{n.d(e,{P:()=>u});var s=n(9599),r=n(2071),i=n(8438),a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function u(t){try{return d("",{"":t})}catch(t){try{r.ee.emit("internal-error",[t])}catch(t){}}}function h(t){return a.lastIndex=0,a.test(t)?'"'+t.replace(a,(function(t){var e=o[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function d(t,e){var n=e[t];switch(typeof n){case"string":return h(n);case"number":return isFinite(n)?String(n):"null";case"boolean":return String(n);case"object":if(!n)return"null";var r=[];if(n instanceof i.ZP.Array||"[object Array]"===Object.prototype.toString.apply(n)){for(var a=n.length,o=0;o<a;o+=1)r[o]=d(o,n)||"null";return 0===r.length?"[]":"["+r.join(",")+"]"}return(0,s.D)(n,(function(t){var e=d(t,n);e&&r.push(h(t)+":"+e)})),0===r.length?"{}":"{"+r.join(",")+"}"}}}}]);