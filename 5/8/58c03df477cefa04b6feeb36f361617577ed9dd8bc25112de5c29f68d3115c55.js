((function(k,t,g){var Q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?k.when("A","jQuery","ready").register("GraphEngine",function(b,a){function T(a){0==
a&&(a=1);return"#"+d3.format(".0f")(a)}function f(a){return"$"+d3.format(",.11r")(a).replace(/\.0+/,"")}unction F(a){var c=Math.max(1,(""+a).replace(/0+$/,"").length);return d3.format("."+c+"s")(a).replace(/\.0+/,"")}function z(a){return d3.format(".3p")(a).replace(/\.0+/,"")}if("d3"in t){t.$=a;Array.prototype.getUnique=function(){for(var a={},c=[],d=0,b=this.length;d<b;++d)a.hasOwnProperty(this[d])||(c.push(this[d]),a[this[d]]=1);return c};var Pa=[5,30],k=.024*Math.PI,
L=[],p={},S={},d={};a(".mojo-body-table th").map(function(c,b){c=a(b);b=c.data("mojo-id");L.push(b);var e=c.data("mojo-type");"dateInterval"==e?e="date":c.data("is-percent")&&(e="percent");p[b]=e;d[b]=c.children(":first").attr("title");S[b]=c.data("is-delta")});var h=(0<a(".scrolling-data-table").length?a(".scrolling-data-table tr"):a(".mojo-body-table tr")).not(":eq(0)").map(function(c,d){var b={_row:c+1};a("td",d).map(function(c,d){d=a(this);c=L[c];d=d.data("mojo-graph-value");var e=p[c];if(""!=
d){if("date"==e)d=new Date(parseInt(d));else if("percent"==e||"positiveInteger"==e||"money"==e||"duration"==e||"rank"==e)d=parseFloat(d);b[c]=d}});return b});if(!(2>h.length)){var c=d3.time.format("%H:%M");b=var m=function(a){return a},x=function(a){return a.charAt(0).toUpperCase()+a.substring(1,a.length)},N={money:"linear",number:"linear",percent:"linear",year:"linear",rank:"linear",date:"linear",duration:"linear"},xa={money:!1,number:!1,percent:!1,
rank:!0,date:!1,duration:!1},v={money:f,date:d3.time.format("%a %B %_d, %Y"),positiveInteger:d3.format(",.0"),percent:z,percentDelta:z,year:m,rank:T,duration:b,genre:m,release:m,releaseStudios:m,dow:m,boolean:x,namedInterval:m},D={money:e,date:function(a){a instanceof Date||(a=new Date(a));var c="%Y";a.getDay()&&1!=a.getDate()?c="%b %_d":1!=a.getDate()?c="%b %_d":a.getMonth()&&(c="%b");return d3.time.format(c)(a)},positiveInteger:F,percent:z,percentDelta:z,year:m,rank:T,duration:b,genre:m,release:m,
releaseStudios:m,dow:m,boolean:x,namedInterval:m},E={total:"Total",average:"Average",median:"Median",minimum:"Minimum",maximum:"Maximum",count:"Number of"},r=[];b=d3.scale.category20();for(m=0;20>m;m++)r.push(b(m));var y=a(".tip");a(document).delegate("graph","draw",function(){unction b(a,l){var d="date"==p[w];return d3.nest().key(function(a){return d?a[w].getTime():a[w]}).rollup(c).entries(a).reduce(function(a,c){var ya=d?parseInt(c.key):c.key;if("undefined"==ya)return a;
var b={};b[w]=ya;b[l]=c.values;a.push(b);return a},[])}function e(){za=[];V=G/sa-ia;1>V&&(V=1);for(var a=0;a<sa;a++)za.push((a+.5)*(V+ia/2))}function m(a,c){var l=ta.centroid(a);a=l[0];var l=l[1],aa=Math.sqrt(a*a+l*l);return[a/aa*c+G/2,l/aa*c+H/2]}function f(){if("line"==n)ba=function(a){return r[0]},Aa=function(a){return r[3]},na=else if("bar"==n)ba=S[q]?function(a,c){return 0<a[q]?"green":"red"}:else{ba=d3.scale.quantize().domain(d3.extent(h,function(a){return a[W]})).range(colorbrewer.RdYlGn[11]);
if("pie"==n){oa=v[p[I]];Ba=D[p[w]];Ca=v[p[w]];Da=b(h,I);return}oa=v[p[I]];na=d3.scale.sqrt().domain(d3.extent(h,function(a){return a[X]})).range(Pa)}var a,c;if("line"==n||"scatter"==n)a=h,c=u,O="date"==p[u]?d3.time.scale():d3.scale.linear(),O.domain(d3.extent(h,function(a){return a[u]})).range([0,G]).nice();else if("bar"==n){c=w;var d="date"==p[w];a=h.toArray().filter(function(a){return a[q]!=g});ja=a.map(function(a){return d?a[w].getTime():a[w]}).getUnique().filter(;sa=ja.length;
e();O=d3.scale.ordinal().domain(ja).rangeRoundBands([7,G],.1);V=O.rangeBand();a=Ea=b(a,q)}a=d3.extent(a,function(a){return a[q]});"bar"==n&&1<a[0]&&(a[0]=1);"date"==p[q]?J=d3.time.scale():"log"==N[p[q]]?(J=d3.scale.log(),0==a[0]&&(a[0]=1)):J=d3.scale.linear();var aa=[H,0];xa[p[q]]&&(aa=aa.reverse());J.domain(a).range(aa).nice();l!=g&&(ca="date"==p[l]?d3.time.scale():d3.scale.linear(),a=[H,0],xa[p[l]]&&(a=a.reverse()),ca.domain(d3.extent(h,).range(a).nice());ka=v[p[c]];pa=
v[p[q]];Fa=v[p[l]];Ga=v[p[W]];Ha=v[p[X]]}function T(){var a;if("pie"!=n){a="bar"==n?w:u;da=d3.svg.axis().scale(O).orient("bottom").tickFormat(D[p[a]]);if("bar"==n)da.tickSize(0),25<ja.length&&da.tickFormat(;else{a=G/75;var c=h.map(.toArray().getUnique().length;a>c&&(a=c-1);2>a&&(a=2);da.ticks(a)}a=Math.max(H/50,2);ua=d3.svg.axis().scale(J).orient("left").ticks(a).tickFormat(D[p[q]]);"line"==n&&l!=g&&(va=d3.svg.axis().scale(ca).orient("right").ticks(a).tickFormat(D[p[l]]))}}
function x(){"line"==n?(l!=g&&(Ia=d3.svg.line().defined(function(a){return a[l]!=g}).interpolate("monotone").x(function(a){return O(a[u])}).y(function(a){return ca(a[l])})),q!=g&&(Ja=d3.svg.line().defined(.interpolate("monotone").x(function(a){return O(a[u])}).y()):"pie"==n&&(Ka=d3.layout.pie().sort(.value(,ta=d3.svg.arc().outerRadius(ra).innerRadius(0))}function F(){var a=
Ra.selectAll(".gradient").data(r).enter().append("radialGradient").attr("id",.attr("gradientUnits","userSpaceOnUse").attr("cx","0").attr("cy","0").attr("r",2*ra).attr("spreadMethod","pad");a.append("stop").attr("offset","0%").attr("stop-color",function(a){return a});a.append("stop").attr("offset","30%").attr("stop-color",.attr("stop-opacity",1);a.append("stop").attr("offset","70%").attr("stop-color","#000000").attr("stop-opacity",1)}function z(){if("pie"!=
n){da!=g&&A.append("g").attr("class","x axis").attr("transform","translate(0,"+H+")").call(da);"bar"==n&&(25<ja.length?A.append("text").attr("x",G/2).attr("y",H+B.bottom/2).style("text-anchor","middle").text(d[w]):A.selectAll(".x.axis text").style("text-anchor","start").attr("transform","rotate(35)"));if(ua!=g){var a;a="bar"==n&&S[q]?"#555":r[0];A.append("g").attr("class","y axis").call(ua).append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".4em").attr("fill",
a).text(d[q])}va!=g&&A.append("g").attr("class","y axis").attr("transform","translate("+G+",0)").call(va).append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("y",6).attr("dy","-.8em").attr("fill",r[3]).text(d[l])}}function t(){if("line"==n)A.append("path").datum(h).attr("class","line").style("stroke",r[3]).attr("d",Ia);else if("bar"==n){var a=Math.min(4,V/20);A.selectAll(".bar").data(Ea).enter().append("svg:path").attr("class","bar").attr("d",function(c,l){l=O(c[w]);var d;
c=d=c[q];S[q]?(0>c&&(c=0),d=0<c?J(0)-J(d):J(d)-J(0)):d=H-J(d);c=Math.min(H-2,J(c));d=Math.max(2,d);return"M"+(l+a)+","+c+"h"+(V-2*a)+"a"+a+","+a+" 0 0 1 "+a+","+a+"v"+(d-2*a)+"v"+a+"h"+-a+"h"+(2*a-V)+"h"+-a+"v"+-a+"v"+(2*a-d)+"a"+a+","+a+" 0 0 1 "+a+","+-a+"z"}).style("fill",ba).on("mouseover",function(a){var c;c=a[w];"date"==p[w]&&(c=new Date(c));c=ka(c);y.filter(".tip1").html("\x3cspan\x3e"+d[w]+":\x3c/span\x3e "+c+"\x3cbr\x3e\x3cspan\x3e"+E[ha]+" "+d[q]+":\x3c/span\x3e "+pa(a[q])).css("background",
.show()}).on("mouseleave",}else if("pie"==n){var c=A.selectAll(".arc"),l=Ka(Da);c.data(l).enter().append("g").attr("class","arc").attr("transform","translate("+G/2+","+H/2+")").append("path").attr("d",ta).style("fill",function(a,c){return"url(#gradient"+c%20+")"}).on("mouseover",function(a,c){a=a.data;var l=a[w];"date"==p[w]&&(l=new Date(l));y.filter(".tip1").html("\x3cspan\x3e"+d[w]+":\x3c/span\x3e "+Ca(l)+"\x3cbr\x3e\x3cspan\x3e"+d[I]+":\x3c/span\x3e "+
oa(a[I])).css("background",r[c]).show()}).on("mouseout",;A.selectAll(".slice-label").data(l).enter().append("text").filter(function(a){return a.endAngle-a.startAngle>=k}).attr("class","slice-label").attr("dy",".35em").attr("transform",function(a){a=m(a,La);return"translate("+a[0]+","+a[1]+")"}).text(.attr("text-anchor",function(a){return(a.endAngle+a.startAngle)/2<Math.PI?"start":"end"});A.selectAll(".slice-line").data(l).enter().append("polyline").filter(.attr("class","slice-line").attr("points",function(a){return[m(a,ra),m(a,La-2)]}).style("stroke",function(a,c){return r[c]})}}function K(){var c="";"line"==n?(c=d[q],q!=l&&l!=g&&(c+=" and "+d[l]),c+=" by "+d[u]):"bar"==n?c=E[ha]+" "+d[q]+" For Each "+d[w]:"pie"==n?c=d[I]+" By "+d[w]:"scatter"==n&&(c=d[q]+" vs "+d[u]);a(".mojo-graph .title").text(c)}function L(){function a(){var e=O.invert(d3.mouse(this)[0]),m=Ta(h,e,1),f=h[m-1],m=h[m];m!=g&&(e=e-f.date>m.date-e?m:f,f=e[q],m=e[l],
f==g?(b.style("display","none"),y.filter(".tip1").hide()):(b.attr("transform","translate("+O(e[u])+","+J(f)+")").style("display",null),y.filter(".tip1").html("\x3cspan\x3e"+d[u]+":\x3c/span\x3e "+ka(e[u])+"\x3cbr\x3e\x3cspan\x3e"+d[q]+":\x3c/span\x3e "+pa(e[q])).css("background",r[0]).show()),m==g?(c.style("display","none"),y.filter(".tip2").hide()):(c.attr("transform","translate("+O(e[u])+","+ca(e[l])+")").style("display",null),y.filter(".tip2").html("\x3cspan\x3e"+d[u]+":\x3c/span\x3e "+ka(e[u])+
"\x3cbr\x3e\x3cspan\x3e"+d[l]+":\x3c/span\x3e "+Fa(e[l])).css("background",r[3]).show()))}A.selectAll(".point").remove();if("line"==n||"scatter"==n){100<h.length&&"scatter"!=n?R.addClass("hide-points"):R.removeClass("hide-points");A.select(".x.axis").style("display","initial");A.select(".y.axis").style("display","initial");A.select(".last").style("display","none");A.select(".first").style("display","none");A.selectAll(".point").style("display","initial");"line"==n&&A.selectAll(".point2").data(h).enter().append("svg:circle").filter(function(a){return a[u]!=
g&&a[l]!=g}).attr("class","point point2").attr("cx",function(a){return O(a[u])}).attr("cy",function(a){return ca(a[l])}).attr("r",function(a){return na(a[X])}).style("fill",function(a){return Aa(a[W])});A.selectAll(".point1").data(h).enter().append("svg:circle").filter(.attr("class","point point1").attr("cx",function(a){return O(a[u])}).attr("cy",function(a){return J(a[q])}).attr("r",function(a){return na(a[X])}).style("fill",function(a){return ba(a[W])}).on("mouseover",
function(a){"scatter"==n&&y.filter(".tip1").html("\x3cspan\x3e"+d[I]+":\x3c/span\x3e "+oa(a[I])+"\x3cbr\x3e\x3cspan\x3e"+d[u]+":\x3c/span\x3e "+ka(a[u])+"\x3cbr\x3e\x3cspan\x3e"+d[q]+":\x3c/span\x3e "+pa(a[q])+"\x3cbr\x3e\x3cspan\x3e"+d[X]+":\x3c/span\x3e "+Ha(a[X])+"\x3cbr\x3e\x3cspan\x3e"+d[W]+":\x3c/span\x3e "+Ga(a[W])).css("background",r[0]).show()}).on("mouseout",function(){y.hide()});var c=A.append("g").attr("class","focus").style("display","none");c.append("circle").attr("r",6).style("fill",
r[3]);var b=A.append("g").attr("class","focus").style("display","none");b.append("circle").attr("r",6).style("fill",r[0]);if("line"==n)A.append("rect").attr("class","overlay").attr("width",G).attr("height",H).on("mouseover",.on("mouseout",function(){b.style("display","none");c.style("display","none");y.hide()}).on("mousemove",a)}}var R=a(this);a("svg",R).remove();var u,q,l,X,W,w,ha,I,Ea,Da,wa,za,C=R.data("args");if("object"!=("undefined"===
typeof C?"undefined":Q(C)))console.log("Missing/invalid args");else{var fa=R.data("aspectratio");fa==g&&(fa=16/9);var n=C.graphType,C=C.state[n],Ma=R.closest(".mojo-graph");a(".graph-type",Ma).removeClass("type-line type-bar type-pie type-scatter").addClass("type-"+n);a(".metric-group",Ma).hide();a(".metric-group.type-"+n).show();if("line"==n)u=C.x,q=C.y,l=C.y2,l==q&&(l=g),h=h.sort(function(a,c){return d3.ascending(a[u],c[u])});else if("bar"==n){if(w=C.group,q=C.y,ha=C.stat="total",wa=q,"date"==p[w]||
"year"==p[w])h=h.sort(function(a,c){return d3.ascending(a[w],c[w])})}else"pie"==n?(w=C.group,I=C.value,ha=C.stat="total",wa=I):"scatter"==n&&(u=C.x,q=C.y,W=C.color,X=C.size,I=C.value);var Ta=d3.bisector(function(a){return a[u]}).left,B={top:30,bottom:30,left:50,right:50},G=680-B.left-B.right,H=G/fa,ia=G/200;5>ia&&(ia=5);var sa,V=G/h.length-ia,ra=H/2,La=ra+20,fa=d3.select(R[0]).append("svg").attr("class",n).attr("width",G-B.left-B.right).attr("height",H+B.top+B.bottom),A=fa.append("g").attr("width",
G+B.left+B.right).attr("height",H+B.top+B.bottom).attr("transform","translate("+B.left+","+B.top+")"),Ra=fa.append("defs"),la=function(a){return a[wa]},Qa={total:function(a){return d3.sum(a,la)},average:function(a){return d3.mean(a,la)},median:minimum:function(a){return parseInt(d3.min(a,la))},maximum:count:function(a){return a.length}};R.css({height:H+B.top+B.bottom});a("svg",R).css({width:G+B.left+B.right,height:H+B.top+
B.bottom});var O,ja,J,ca,ba,Aa,na,da,ua,va,ka,pa,Fa,Ga,Ha,oa,Ba,Ca,Ja,Ia,Ka,ta;F();f();T();x();t();L();"line"==n&&A.append("path").datum(h).attr("class","line").style("stroke",r[0]).attr("d",Ja);K();z()}}).delegate("graph","changeArg",function(c,d){c=""==d.value?g:d.value;var e=a(this).data("args");e.state[e.graphType][d.var]=c;a(this).trigger("draw")});a(t).resize(;a("graph.type-table").trigger("draw")}}});k.when("A","ready").execute(function(b){var a=b.$;b.on("a:dropdown:select",
function(b){a("graph",a(b.selectNode).closest(".mojo-graph")).trigger("changeArg",{var:b.name,value:b.value})});b.on("a:button-group:graphType:toggle",function(b){var f=a("graph",a(b.selectedButton.$button).closest(".mojo-graph"));f.data("args").graphType=b.selectedButton.buttonName;f.trigger("draw")})});k.when("A","ready").execute(function(b){b.on("a:switch:mojo-graph-switch:on",function(){b.$(".mojo-graph").slideDown()});b.on("a:switch:mojo-graph-switch:off",});
"use strict";k.when("A","jQuery","a-modal").register("LandingModal",function(b,a,g){return{showLandingModal:function(){var b=a(".mojo_landing_modal_trigger");g.create(b,{name:"landing_modal",hideHeader:"true",padding:"none",closeButton:!1}).show()}}});k.when("LandingModal","jQuery","ready").execute(function(b,a){a(".mojo_landing_modal_trigger").length&&b.showLandingModal()});"use strict";k.when("A","ready").execute(function(b){var a=b.$,g=a("#region").data("region");a(".releases-by-region.region-"+
g).show().removeClass("hidden");b.on("a:button-group:regionSelector:toggle",function(b){b=b.selectedButton.buttonName;a("table.releases-by-region").hide();a(".releases-by-region.region-"+b).show().removeClass("hidden")})});k.when("A","ready").execute(function(b){var a=b.$;a(".mojo-discloser").each(function(){var b=a(this).data("target"),f=a(b);f.length&&a(this).click(})});k.when("A","load").execute(function(b){var a=
b.$;a("#daily-date-picker-button").click(function(b){var f=location.pathname.split("/");a.each(f,function(b){var g=Date.parse(f[b]);if(!isNaN(g))return f[b]=a("#daily-date-picker").val(),!1});b=f.join("/");document.location.href=b});a(".mojo-tab-container").each(function(b,f){var e=f.scrollWidth-document.body.offsetWidth;a(f).scroll(function(){f.scrollLeft===e?f.parentNode.classList.add("mojo-scroll-end"):f.parentNode.classList.contains("mojo-scroll-end")&&f.parentNode.classList.remove("mojo-scroll-end")})});
a(".mojo-navigation-tab-active").each(function(a,b){b.parentNode.scrollLeft=Math.round(b.offsetLeft+b.offsetWidth/2-document.body.offsetWidth/2)})});k.when("A","a-calendar-framework","ready").execute(function(b,a){function g(a){var b=location.pathname.split("/");f.each(b,function(f){var g=Date.parse(b[f]);if(!isNaN(g))return b[f]=a.toISOString().substr(0,10),!1});var z=b.join("/"),k=f("#daily-detail-type");k&&(z+=k.data("type"));document.location.href=z}var f=b.$;b=f(".mojo-daily-calendar");0<b.length&&
(a.get(b).attributes.onSelectDate=g)});k.when("A","a-dropdown","ready").execute(function(b,a){function g(){var b=a.getSelect("scheduleMonthSelector"),b="/calendar/"+a.getSelect("scheduleYearSelector").val()+"-"+b.val()+"-01";location.href=b}var f=b.$;b.on("a:dropdown:selected:primaryTabSelector",function(){var b=a.getSelect("primaryTabSelector").val();location.href=b});b.on("a:dropdown:selected:secondaryTabSelector",function(){var b=a.getSelect("secondaryTabSelector").val();location.href=b});b.on("a:dropdown:selected:scheduleMonthSelector",
function(){g()});b.on("a:dropdown:selected:scheduleYearSelector",;b.on("a:dropdown:selected:recentDailiesSelector",function(){var b=a.getSelect("recentDailiesSelector").val(),b=f(".mojo-recent-dailies-widget-tab.mojo-date-"+b);f(".mojo-recent-dailies-widget-tab").addClass("hidden");b.removeClass("hidden")});b.on("a:dropdown:select",function(a){-1<a.name.indexOf("navSelector")&&!f("#company .boxoffice_raw_widget_container").length&&(document.location.href=a.value)});b.on("a:accordion:select",
function(a){a=a.selectedRow.$row.find("a").attr("href");document.location.href=a})});k.when("A","a-switch","ready").execute(function(b,a){var g=b.$;b.on("a:switch:include-descendants:flip",function(){var b=g("#include-descendants"),b=a.getSwitch(b),e=t.location.search.replace(/^\?/,"");var F={};if(""!==e)for(var e=e.split("\x26"),z=0;z<e.length;z++){var k=e[z].split("\x3d",2);F[decodeURIComponent(k[0])]=decodeURIComponent(k[1].replace(/\+/g," "))}b.isOn()?F.relationship="descendant":delete F.relationship;
t.location.search="?"+g.param(F)})});"use strict";t.addEventListener("load",function(){function b(a){var b=a.querySelector("table"),g=void 0,f=void 0,k=void 0,L=0,p=0,S=!1;this.isScrollable=this.scrollTop=function(){return parseInt(t.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,10)};this.calcOffset=function(){var b=a.getBoundingClientRect().top+this.scrollTop()+p;return{upperBoundary:b,lowerBoundary:b+a.offsetHeight-p}};
this.shouldRepositionHeader=function(){var a=this.calcOffset().upperBoundary,b=this.calcOffset().lowerBoundary,c=this.scrollTop();return a<c&&c<b};this.hideHeader=function(){this.shouldRepositionHeader()&&(g.style.top=0,f.style.top=0)};this.showHeader=function(){if(this.shouldRepositionHeader()){var a=this.calcOffset().upperBoundary,b=this.scrollTop();g.style.top=b-a+p+"px";f.style.top=b-a+p+"px"}};this.listen=function(){var a=this;document.addEventListener("scroll",function(){S||a.hideHeader();S=
!0;t.clearTimeout(k);k=t.setTimeout(100)})};this.createElements=function(){b.style.tableLayout="auto";for(var d=b.parentNode,h=b.cloneNode(!0),c=b.querySelectorAll("th, td"),m=h.querySelectorAll("th, td"),x=0;x<c.length;x++){var N=c[x],k=m[x];k.style.width=N.offsetWidth+"px";k.style.height=N.offsetHeight+"px";k.style.minWidth=N.offsetWidth+"px";k.style.minHeight=N.offsetHeight+"px"}d.replaceChild(h,b);b=h;h=b.querySelector("tr");c=b.querySelector("th");L=c.offsetWidth;
p=h.offsetHeight;g=b.cloneNode();g.classList.add("floating-header");g.appendChild(h.cloneNode(!0));d.insertBefore(g,b);f=b.cloneNode();f.classList.add("floating-cap-cell");d=h.cloneNode();d.appendChild(c.cloneNode(!0));f.appendChild(d);f.style.width=L+"px";a.appendChild(f);h.style.display="none";b.classList.add("scrolling-data-table");b.style.tableLayout="fixed"};this.init=for(var a=document.querySelectorAll(".imdb-scroll-table"),g=0;g<a.length;g++){var f=
a[g];f.querySelector("[colspan],[rowspan]")?console.warn("Warning: scrollable table cannot contain COLSPAN"):(f.classList.add("imdb-scroll-table-styles"),(new b(f)).init())}});"use strict";k.when("A","jQuery","ready").register("ShowdownGraphEngine",function(b,a){function k(a){return"$"+d3.format(",.4r")(a).replace(/\.0+/,"")}function f(a){return"$"+d3.format(".3s")(a).replace(/\.0+/,"")}function e(a){return d3.format(",.3p")(a).replace(/\.0+/,"").replace(/,000%/,"k%")}if("d3"in t){Array.prototype.getUnique=
function(){for(var a={},b=[],d=0,g=this.length;d<g;++d)a.hasOwnProperty(this[d])||(b.push(this[d]),a[this[d]]=1);return b};Object.size=var F={gross:0,dailyGrossDelta:1,grossLastWeekDelta:1,grossToDate:2},z={gross:"Daily Gross",grossToDate:"Cumulative Gross",dailyGrossDelta:"Daily Gross Change",grossLastWeekDelta:"Weekly Gross Change"},Q={gross:k,grossToDate:k,dailyGrossDelta:e,grossLastWeekDelta:e},ga={gross:f,grossToDate:f,dailyGrossDelta:e,
grossLastWeekDelta:e},L=[].concat(d3.scale.category20().range(),colorbrewer.Paired[11],d3.scale.category20b().range());a(document).delegate("showdowngraph","draw",function(){var b=a(this),e=b.closest(".mojo-graph"),d=a(".date-label span",e);d.data("text",d.text());var f={},c=b.data("metric");c==g&&(c="gross");var m=d3.bisector(function(a){return a.x}).left,x=a(".mojo-graph.showdown").hasClass("adjusted")?"Adjusted ":"";a(".mojo-graph .title").html(x+z[c]+" by Days In Release");a("svg",b).remove();
var N=[];a(".mojo-showdown .releaseName").each(function(c,b){f[c+1]=a(b).text()});for(var k=Object.size(f),v=a(".tips",e).html(""),D=1;D<=k;D++)e=a('\x3cdiv class\x3d"tip tip-'+D+'"\x3e\x3cspan\x3e'+f[D]+'\x3c/span\x3e\x3cspan class\x3d"value"\x3e\x3c/span\x3e\x3c/div\x3e'),e.css("background",L[D-1]),v.append(e);var E,r;a(".mojo-showdown tr").not(".spacer").each(function(b,d){if(0!=b){var m={x:b};a("td",a(d)).each(function(b,d){if(0!=b&&(d=a(".gv",a(d)).data("value"),0!=Object.size(d))){m[b]==g&&
(m[b]={});d=d[c];m[b]=d;if(E==g||d<E)E=d;if(r==g||d>r)r=d}});N.push(m)}});var y=d3.scale.linear().domain([1,N[N.length-1].x]).range([0,625]).nice(),e=d3.svg.axis().scale(y).orient("bottom").ticks(15),t,T,x=Math.max(9.25,2);switch(F[c]){case 0:0==E&&(E=1);t=d3.scale.log().domain([E,r]).range([370,0]).nice();T=d3.svg.axis().scale(t).orient("left").ticks(0,ga[c]);break;case 1:t=d3.scale.sqrt().domain([E,Math.min(r,1E3)]).range([370,0]).nice();T=d3.svg.axis().scale(t).orient("left").ticks(x).tickFormat(ga[c]);
break;case 2:t=d3.scale.linear().domain([E,r]).range([370,0]).nice(),T=d3.svg.axis().scale(t).orient("left").ticks(x).tickFormat(ga[c])}x=d3.select("showdowngraph").append("svg").attr("width",675).attr("height",400).append("g").attr("transform","translate(50,10)");for(D=1;D<=k;D++){var ma=d3.svg.line().defined(function(a){return a[D]!=g}).interpolate("monotone").x(function(a){return y(a.x)}).y(function(a){return t(a[D])});x.append("path").datum(N).attr("class","line").style("stroke",.attr("d",ma);x.append("circle").attr("class","focus focus-"+D).attr("r",4).style("fill",L[D-1])}x.append("rect").attr("class","overlay").attr("width",625).attr("height",370).on("mouseover",.on("mouseout",function(){a(".tip",v).hide();a(".focus",b).hide();d.text(d.data("text"))}).on("mousemove",function(){var e=y.invert(d3.mouse(this)[0]),e=m(N,e,1),e=N[e-1];d.html("\x3cb\x3eDays In Release:\x3c/b\x3e "+e.x);for(var f=1;f<=k;f++){var x=a(".tip-"+f,v),h=a(".focus-"+
f,b);if(e[f]==g)x.css("visibility","hidden"),h.hide();else{if(0==F[c]&&0==e[f])break;a(".value",x).html(Q[c](e[f]));x.css("visibility","visible");h.attr("cx",y(e.x)).attr("cy",t(e[f])).show()}}});x.append("g").attr("class","x axis").attr("transform","translate(0,370)").call(e);x.append("g").attr("class","y axis").call(T)});a("showdowngraph").trigger("draw")}});k.when("A","ready").execute(function(b){b.on("a:dropdown:showdowngraph-metric:select",function(a){b.$("showdowngraph").data("metric",a.value).trigger("draw")})});
"use strict";k.when("A","jQuery","ready").register("StreamGraphEngine",function(b,a){function k(a,b){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);b=b||0;var d="#",e,f;for(f=0;3>f;f++)e=parseInt(a.substr(2*f,2),16),e=Math.round(Math.min(Math.max(0,e+e*b),255)).toString(16),d+=("00"+e).substr(e.length);return d}if("d3"in t){Array.prototype.getUnique=function(){for(var a={},b=[],d=0,e=this.length;d<e;++d)a.hasOwnProperty(this[d])||(b.push(this[d]),a[this[d]]=1);
return b};var f=[];a(".mojo-data-table th").each(;var e=[],F={},z={},Q=d3.time.format("%_d %b %Y"),ga=d3.format("$,.4r"),L=[].concat(d3.scale.category20().range(),colorbrewer.Paired[11],d3.scale.category20b().range()),p={};a(".mojo-data-table tr").not(":eq(0)").each(function(b,d){var g={};a("td",d).each(function(b,c){c=a(c).text();if(0!=c.length){var d=f[b];"date"==d?(c=new Date(c),p[c]=1):"release"!=d&&"genre"!=d&&"studio"!=d&&"releaseId"!=d&&(c=parseInt(c));g[f[b]]=
c}});e.push(g);b=g.releaseId;null==F[b]&&(F[b]=g.date);null==z[b]&&(z[b]=g)});var S=Object.keys(p).length,d={};e.map(function(a){var b=a.date.getTime();null==d[b]&&(d[b]={});d[b][a.releaseId]=1});var h=e.map(function(a){return a.releaseId}).getUnique();Object.keys(d).map(function(a){h.map(function(b){if(null==d[a][b]){var f=new Date(parseInt(a)),g={};g.releaseId=b;g.date=f;g.gross=0;e.push(g)}})});e=e.sort(function(a,b){a=a.date.getTime();b=b.date.getTime();return a-b});a(document).delegate("streamgraph",
"draw",function(){var b=a(this),d=b.data("full-width");d==g&&(d=4E3,b.data("full-width",d));var f=d3.scale.linear().domain([950,1E4]).range([0,20])(d);a("svg",b).remove();var h=b.data("args").colorMetric,p=d3.scale.ordinal().domain(d3.extent(e,function(a){return a[h]})).range(L),b=function(a){return p(z[a.values[0].releaseId][h])},v=function(a){a=z[a.values[0].releaseId];return null==a[h]?"url(#diagonalHatch)":Sa(a[h])},t={release:b,date:b,genre:b,studio:b,runningtime:v,budget:v}[h],v=d*S/52-0-0,
E=d3.time.scale().range([0,v]),r=d3.scale.linear().range([480,0]),b=2E3<d?d3.time.weeks:d3.time.months,y=d3.svg.axis().scale(E).orient("bottom").ticks(b),Na=d3.svg.area().interpolate("monotone").defined(.x(function(a){return E(a.date)}).y0(function(a){var b=(qa[1]-a.totalGross)/2,c=r(a.cumulativeGross+b);a=r(a.gross+a.cumulativeGross+b);return 3>c-a?a:a+1}).y1(function(a){return r(a.cumulativeGross+(qa[1]-a.totalGross)/2)}),Oa=d3.svg.area().interpolate("monotone").x(function(a){return E(a.date)}).y0(function(a){return a.y0==
g||a.y==g?0:r(a.y0)}).y1(function(a){return a.y0==g||a.y==g?0:r(a.y0+a.y)}),b=d3.select("streamgraph"),ma=b.append("div").attr("class","tooltip"),v=d3.select("streamgraph").append("svg").attr("width",v+0+0).attr("height",500);v.append("defs").append("pattern").attr("id","diagonalHatch").attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).attr("patternTransform","rotate(45)").append("rect").attr("x",0).attr("y",0).attr("width",4).attr("height",8).attr("style","stroke:none; fill: #999;");
v.append("g").attr("transform","translate(0,0)");var U=d3.layout.stack().offset("silhouette").values(function(a){return a.values}).x(function(a){return a.date}).y(function(a){return a.gross}),Z=d3.nest().key(function(a){return a.releaseId}),U=U(Z.entries(e)),M=e.map(function(a){return a.date}).getUnique(),M=d3.extent(M);E.domain(M);var qa=[0,d3.max(e,+20];r.domain(qa);var M=d3.extent(e,function(a){return a[h]}),M=[M[0],d3.mean(M),M[1]],P=colorbrewer.YlOrRd[9],Sa=d3.scale.linear().domain(M).range([P[0],
P[4],P[8]]);v.append("g").attr("class","layer-group type-stream").selectAll(".layer").data(U).enter().append("path").attr("class","layer").attr("d",function(a){return Oa(a.values)}).attr("fill",t).attr("color",t);v.append("g").attr("class","x axis").attr("transform","translate(0,480)").call(y);d3.nest().key(.entries(e).map(function(a){parseInt(a.key);a=a.values.filter(.sort(;var b=0;a.map(function(a){a.cumulativeGross=
b;b+=a.gross});a.map(});for(var Z=Z.entries(e),ea=[],K=0;K<Z.length;K++){U=[];y=Z[K].values;for(M=0;M<y.length;M++){P=y[M];U.push(P);var Y=new Date(P.date);Y.setDate(P.date.getDate()+4);Y={title:P.release,date:Y,cumulativeGross:P.cumulativeGross,totalGross:P.totalGross,rank:P.rank};Y.gross=P.gross;null==Y[h]&&(Y[h]=P[h]);U.push(Y)}ea.push({key:Z[K].key,title:U[0].release,values:U})}v=v.append("g").attr("class","layer-group type-ranked");v.selectAll(".layer").data(ea).enter().append("path").attr("class",
"layer").attr("d",function(a){return Na(a.values)}).style("fill",t).attr("color",t);for(var R=r(0),K=0;K<ea.length;K++){var u=ea[K].key,q=z[u].release,y=ea[K].values;v.selectAll(".title .title-"+K).data(y.filter(function(a){return 0<a.gross&&0!=a.date.getDay()&&a.date==F[u]&&1E3<d})).enter().append("text").attr("class","title title-"+K).attr("pointer-events","none").attr("font-size",10).attr("fill",function(a){return k(t(ea[K]),-.5)}).attr("x",.attr("y",function(a){return r(a.cumulativeGross+
1+(qa[1]-a.totalGross)/2+a.gross)+10}).html(function(a){return 10<R-r(a.gross)?q.replace("The ","").substring(0,f):""})}b.selectAll(".layer").attr("opacity",1).on("mousemove",function(b,c){c=d3.mouse(this)[0];var d=E.invert(c);c=b.values[0];for(var e=0;e<b.values.length&&!(b.values[e].date>d);e++)c=b.values[e];b="\x3cspan\x3eMovie:\x3c/span\x3e "+z[b.key].release+"\x3cbr\x3e\x3cspan\x3eDate:\x3c/span\x3e "+Q(c.date);0<c.gross&&(b+="\x3cbr\x3e\x3cspan\x3eGross:\x3c/span\x3e "+ga(c.gross));c=a(this).attr("color");
/url\(/.test(c)&&(c="#999");ma.style("background",c).style("display","inline-block").html(b);d3.select(this).classed("hover",!0).attr("stroke",k(c,-.2)).attr("stroke-width","1px")}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1).attr("stroke-width","0px");ma.style("display","none")})}).delegate("streamgraph","changeArg",function(b,d){a(this).data("args")[d.var]=d.value;a(this).trigger("draw")}).delegate("streamgraph","zoom",function(b,d){b=a("streamgraph").data("full-width");b+=d;
1E4<b?b=1E4:950>b&&(b=950);a("streamgraph").data("full-width",b).trigger("draw")});a("streamgraph").trigger("draw");b.on("a:button-group:streamGraphType:toggle",function(b){b=b.selectedButton.buttonName;a("streamgraph").removeClass("type-stream type-ranked").addClass("type-"+b)});b.on("a:dropdown:select",function(b){a("streamgraph").trigger("changeArg",{var:b.name,value:b.value})});b.declarative("zoomIn","click",;b.declarative("zoomOut","click",function(b){a("streamgraph").trigger("zoom",
-400)})}})});