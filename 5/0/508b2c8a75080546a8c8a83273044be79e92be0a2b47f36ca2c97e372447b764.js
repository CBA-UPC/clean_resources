var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:
$jscomp.getGlobal=$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=
$jscomp.polyfill("Array.prototype.find","es6","es3");
(function(b){var e=function(d){var a=this;d=d||{};"string"==typeof d&&(d={elements:d});this.sel=null;this.htmlSelection=this.textSelection="";this.viaTwitterAccount="Filmibeat";this.appId=b('meta[property="fb:app_id"]').attr("content")||b('meta[property="fb:app_id"]').attr("value");this.url2share=b('meta[property="og:url"]').attr("content")||b('meta[property="og:url"]').attr("value")||window.location.href;this.getSelectionText=function(c){var f="",b="";c=c||window.getSelection();if(c.rangeCount){f=
document.createElement("div");b=0;for(var d=c.rangeCount;b<d;++b)f.appendChild(c.getRangeAt(b).cloneContents());b=f.textContent;f=f.innerHTML}a.textSelection=b;a.htmlSelection=f||b;return b};this.selectionDirection=function(a){var c=a||window.getSelection();a=document.createRange();if(!c.anchorNode)return 0;a.setStart(c.anchorNode,c.anchorOffset);a.setEnd(c.focusNode,c.focusOffset);c=a.collapsed?"backward":"forward";a.detach();return c};this.showPopunder=function(){a.popunder=a.popunder||document.getElementById("selectionSharerPopunder");
var c=window.getSelection(),b=a.getSelectionText(c);if(c.isCollapsed||10>b.length||!b.match(/ /))return a.hidePopunder();if(a.popunder.classList.contains("fixed"))return a.popunder.style.bottom=0,a.popunder.style.bottom;c=c.getRangeAt(0).endContainer.parentNode;if(a.popunder.classList.contains("show"))return Math.ceil(a.popunder.getBoundingClientRect().top)==Math.ceil(c.getBoundingClientRect().bottom)?void 0:a.hidePopunder(a.showPopunder);c.nextElementSibling?a.pushSiblings(c):(a.placeholder||(a.placeholder=
document.createElement("div"),a.placeholder.className="selectionSharerPlaceholder"),b=window.getComputedStyle(c).marginBottom,a.placeholder.style.height=b,a.placeholder.style.marginBottom=-2*parseInt(b,10)+"px",c.parentNode.insertBefore(a.placeholder));c=window.pageYOffset+c.getBoundingClientRect().bottom;a.popunder.style.top=Math.ceil(c)+"px";setTimeout(function(){a.placeholder&&a.placeholder.classList.add("show");a.popunder.classList.add("show")},0)};this.pushSiblings=this.hidePopunder=function(c){c=c||if("fixed"==a.popunder)return a.popunder.style.bottom="-50px",c();a.popunder.classList.remove("show");a.placeholder&&a.placeholder.classList.remove("show");for(var b=document.getElementsByClassName("moveDown");el=b[0];)el.classList.remove("moveDown");setTimeout(function(){a.placeholder&&document.body.insertBefore(a.placeholder);c()},600)};this.show=function(c){setTimeout(function(){var b=window.getSelection(),d=a.getSelectionText(b);
if(!b.isCollapsed&&d&&10<d.length&&d.match(/ /)){var e=b.getRangeAt(0).getBoundingClientRect().top-5+a.getPosition().y-a.$popover.height();d=0;if(c)d=c.pageX;else{var g=b.anchorNode.parentNode;d+=g.offsetWidth/2;do d+=g.offsetLeft;while(g=g.offsetParent)}switch(a.selectionDirection(b)){case "forward":d-=a.$popover.width();break;case "backward":d+=a.$popover.width();break;default:return}a.$popover.removeClass("anim").css("top",e+10).css("left",d).show();setTimeout(0)}},10)};this.hide=this.smart_truncate=function(a,b){if(!a||!a.length)return a;var c=a.length>b;a=c?a.substr(0,b-1):a;a=c?a.substr(0,a.lastIndexOf(" ")):a;return c?a+"...":a};this.getRelatedTwitterAccounts=function(){var a=[],d=b('meta[name="twitter:creator"]').attr("content")||b('meta[name="twitter:creator"]').attr("value");d&&a.push(d);d=document.getElementsByTagName("a");for(var e=0,h=d.length;e<h;e++)if(d[e].attributes.href&&"string"==typeof d[e].attributes.href.value){var g=
d[e].attributes.href.value.match(/^https?:\/\/twitter\.com\/([a-z0-9_]{1,20})/i);g&&1<g.length&&-1==["widgets","intent"].indexOf(g[1])&&a.push(g[1])}return 0<a.length?a.join(","):""};this.shareTwitter=function(c){c.preventDefault();c="\u201c"+a.smart_truncate(a.textSelection.trim(),100)+"\u201d";var b=encodeURIComponent(window.location.href+"?utm_source=slected-text&utm_medium=tweet-button&utm_campaign=article-tweetshare");b="http://twitter.com/intent/tweet?text="+encodeURIComponent(c)+"&related="+
a.relatedTwitterAccounts+"&url="+b;a.viaTwitterAccount&&c.length<114-a.viaTwitterAccount.length&&(b+="&via="+a.viaTwitterAccount);window.open(b,"share_twitter","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=640, height=440, top="+(screen.height/2-220-100)+", left="+(screen.width/2-320));a.hide();return!1};this.shareFacebook=function(c){c.preventDefault();c=a.textSelection.trim();var b=encodeURIComponent(a.url2share+"?utm_source=slected-text&utm_medium=fb-button&utm_campaign=article-fbshare");
c="https://www.facebook.com/dialog/feed?app_id="+a.appId+"&display=popup&caption="+encodeURIComponent(c)+"&link="+b;window.open(c,"share_facebook","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=640, height=440, top="+(screen.height/2-220-100)+", left="+(screen.width/2-320));a.hide();return!1};this.shareEmail=function(c){var d=a.textSelection.replace(/<p[^>]*>/ig,"\n").replace(/<\/p>|  /ig,"").trim();c=encodeURIComponent("Quote from "+
document.title);d=encodeURIComponent("\u201c"+d+"\u201d")+"%0D%0A%0D%0AFrom: "+document.title+"%0D%0A"+window.location.href;b(this).attr("href","mailto:?subject="+c+"&body="+d);a.hide();return!0};this.shareGplus=function(c){c.preventDefault();a.textSelection.replace(/<p[^>]*>/ig,"\n").replace(/<\/p>|  /ig,"").trim();c="https://plus.google.com/share?url="+encodeURIComponent(window.location.href+"?utm_source=slected-text&utm_medium=gplus-button&utm_campaign=article-gplusshare");window.open(c,"Share on gPlus",
"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=640, height=440, top="+(screen.height/2-220-100)+", left="+(screen.width/2-320));a.hide();return!0};this.render=function(){a.$popover=b('<div class="selectionSharer" id="selectionSharerPopover" style="position:absolute;">  <div id="selectionSharerPopover-inner">    <ul>      <li><a class="action tweet" href="" title="Share this selection on Twitter" target="_blank">Tweet</a></li>      <li><a class="action facebook" href="" title="Share this selection on Facebook" target="_blank">Facebook</a></li>      <li><a class="action email" href="" title="Share this selection by email" target="_blank"><svg width="20" height="20"><path stroke="%23FFF" stroke-width="6" d="m16,25h82v60H16zl37,37q4,3 8,0l37-37M16,85l30-30m22,0 30,30"/></svg></a></li>    </ul>  </div>  <div class="selectionSharerPopover-clip"><span class="selectionSharerPopover-arrow"></span></div></div>');
a.$popover.find("a.tweet").click(a.shareTwitter);a.$popover.find("a.facebook").click(a.shareFacebook);a.$popover.find("a.gplus").click(a.shareGplus);a.$popover.find("a.email").click(a.shareEmail);b("body").append(a.$popover);a.$popunder=b('<div id="selectionSharerPopunder" class="selectionSharer">  <div id="selectionSharerPopunder-inner">    <label>Share this selection</label>    <ul>      <li><a class="action tweet" href="" title="Share this selection on Twitter" target="_blank">Tweet</a></li>      <li><a class="action facebook" href="" title="Share this selection on Facebook" target="_blank">Facebook</a></li>      <li><a class="action email" href="" title="Share this selection by email" target="_blank"><svg width="20" height="20"><path stroke="%23FFF" stroke-width="6" d="m16,25h82v60H16zl37,37q4,3 8,0l37-37M16,85l30-30m22,0 30,30"/></svg></a></li>    </ul>  </div></div>');
a.$popunder.find("a.tweet").click(a.shareTwitter);a.$popunder.find("a.facebook").click(a.shareFacebook);a.$popover.find("a.gplus").click(a.shareGplus);a.$popunder.find("a.email").click(a.shareEmail);b("body").append(a.$popunder);a.appId&&a.url2share&&b(".selectionSharer a.facebook").css("display","inline-block")};this.setElements=function(c){"string"==typeof c&&(c=b(c));a.$elements=c instanceof b?c:b(c);a.$elements.mouseup(a.show).mousedown(a.hide).addClass("selectionShareable");a.$elements.bind("touchstart",
;document.onselectionchange=a.selectionChanged};this.selectionChanged=this.getPosition=function(){var a=void 0!==window.pageXOffset,b="CSS1Compat"===(document.compatMode||"");return{x:a?window.pageXOffset:b?document.documentElement.scrollLeft:document.body.scrollLeft,y:a?window.pageYOffset:b?document.documentElement.scrollTop:
document.body.scrollTop}};this.render();d.elements&&this.setElements(d.elements)};b.fn.selectionSharer=function(){(new e).setElements(this);return this};"function"==typeof define?define(function(){e.load=function(b,a,c,f){(new e).setElements("p");c()};return e}):window.SelectionSharer=e})(jQuery);
