"use strict";(self.webpackChunkWPS_Drive=self.webpackChunkWPS_Drive||[]).push([[9500],{6642:function(e,t,n){var r=n(32879);t.Z=(0,r.a1)("mistake_normal",!1,(function(e,t){return e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 16 16",fill:"none","stroke-width":t.strokeWidth}},[e("g",{attrs:{id:"group-0",stroke:t.colors&&"string"!=typeof t.colors&&t.colors[0]||"string"==typeof t.colors&&t.colors||"#DD3332",fill:t.colors&&"string"!=typeof t.colors&&t.colors[0]||"string"==typeof t.colors&&t.colors||"#DD3332"}},[e("path",{attrs:{d:"M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8Z",stroke:"none"}})]),e("g",{attrs:{id:"group-1",stroke:t.colors&&"string"!=typeof t.colors&&t.colors[1]||"string"==typeof t.colors&&t.colors||"white",fill:t.colors&&"string"!=typeof t.colors&&t.colors[1]||"string"==typeof t.colors&&t.colors||"white"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.76666 5.96862C4.43472 5.63668 4.43471 5.09849 4.76666 4.76654C5.0986 4.43459 5.63679 4.43459 5.96874 4.76653L7.99998 6.79775L10.0312 4.76653C10.3632 4.43459 10.9014 4.43459 11.2333 4.76654C11.5652 5.09849 11.5652 5.63668 11.2333 5.96862L9.20207 7.99983L11.2332 10.0309C11.5651 10.3629 11.5651 10.9011 11.2332 11.233C10.9013 11.565 10.3631 11.565 10.0311 11.233L7.99998 9.2019L5.96884 11.233C5.63689 11.565 5.0987 11.565 4.76676 11.233C4.43481 10.9011 4.43482 10.3629 4.76677 10.0309L6.79789 7.99983L4.76666 5.96862Z",stroke:"none"}})])])}))},39256:function(e,t,n){var r=n(32879);t.Z=(0,r.a1)("success_normal",!1,(function(e,t){return e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 16 16",fill:"none","stroke-width":t.strokeWidth}},[e("g",{attrs:{id:"group-0",stroke:t.colors&&"string"!=typeof t.colors&&t.colors[0]||"string"==typeof t.colors&&t.colors||"#418F1F",fill:t.colors&&"string"!=typeof t.colors&&t.colors[0]||"string"==typeof t.colors&&t.colors||"#418F1F"}},[e("path",{attrs:{d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",stroke:"none"}})]),e("g",{attrs:{id:"group-1",stroke:t.colors&&"string"!=typeof t.colors&&t.colors[1]||"string"==typeof t.colors&&t.colors||"white",fill:t.colors&&"string"!=typeof t.colors&&t.colors[1]||"string"==typeof t.colors&&t.colors||"white"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.6011 5.19891C12.933 5.53086 12.933 6.06905 12.6011 6.40099L7.78121 11.2208C7.44926 11.5528 6.91107 11.5528 6.57913 11.2208L3.89898 8.5407C3.56704 8.20876 3.56704 7.67057 3.89898 7.33862C4.23093 7.00668 4.76912 7.00668 5.10107 7.33862L7.18017 9.41772L11.399 5.19891C11.7309 4.86696 12.2691 4.86696 12.6011 5.19891Z",stroke:"none"}})])])}))},93698:function(e,t,n){var r=n(26743),i=n(7626),o=n.n(i),a=n(54223),s=n.n(a),c=n(40032),l=n.n(c),u=n(62414),d=n(45821),p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-create-customize-per"},[n("el-form",{ref:"createCustomizePermission",attrs:{model:e.createCustomizePermission,rules:e.rules,prop:"name"},nativeOn:{submit:},[n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:e.lang_txt0,autofocus:!0,maxlength:9},model:{value:e.createCustomizePermission.name,callback:expression:"createCustomizePermission.name"}})],1)],1),e._v(" "),n("footer",[n("KButton",{on:{click:e.handleClose}},[e._v(e._s(e.lang_txt1))]),e._v(" "),n("KButton",{attrs:{type:"primary"},on:{click:function(t){return e.submit("createCustomizePermission")}}},[e._v(e._s(e.lang_txt2))])],1)],1)},staticRenderFns:[],name:"KCreateCustomizePermission",directives:{focus:function(e){var t=e.getAttribute("focused");setTimeout((function(){t||(e.getElementsByClassName("el-input__inner")[0].select(),e.setAttribute("focused","1"))}),50)}},components:{KButton:u.Z,ElInput:o(),ElForm:s(),ElFormItem:l()},props:{tableData:{type:Array,default:function(){return[]}},isFromMyCloud:{type:Boolean,default:!1},onCreated:{type:Function,default:function(){return function(){}}}},data:function(){var e=this;return{tableRow:["view","copyContent","print","downloadCopySave","comment","createUploadRename","update","share","moveDelete","managePerm","history"],lang_txt0:(0,d.t)("logic.CreateCustomizePermission.txt0"),lang_txt1:(0,d.t)("logic.CreateCustomizePermission.txt1"),lang_txt2:(0,d.t)("logic.CreateCustomizePermission.txt2"),createCustomizePermission:{name:""},rules:{name:[{pattern:/^[^/\\:*?"<>|]+$/,message:(0,r.exception)("illegalFname"),trigger:"change"},{validator:function(t,n,r){""===n.trim()?r(new Error((0,d.t)("logic.CreateCustomizePermission.txt5"))):e.tableData.some(()?r(new Error((0,d.t)("logic.CreateCustomizePermission.txt3"))):e.isFromMyCloud&&"可管理"===n.trim()?r(new Error((0,d.t)("logic.CreateCustomizePermission.noManage"))):r()},trigger:"change"},{max:8,message:(0,d.t)("logic.CreateCustomizePermission.txt4"),trigger:"change"}]}}},methods:{handleClose:function(){this.$emit("close")},initData:function(){var e={},t=["managePerm","share","downloadCopySave","comment","createUploadRename","update","moveDelete"],n=["history"];return this.tableRow.forEach((function(r){e[r]={value:!t.includes(r),disabled:n.includes(r)}})),e},submit:function(e){var t=this,n=this;this.$refs[e].validate((function(r){if(r){var i={id:0,type:"custom",name:n[e].name,perms:t.initData()};t.onCreated(i),t.handleClose()}}))}},install:function(e){e.component(p.name,p)}};t.Z=p},28181:function(e,t,n){n.d(t,{Z:function(){return $}});var r=n(31240),i=n(37311),o=n(2406),a=n.n(o),s=n(95272),c=n(62414),l=n(63364),u=n.n(l),d=n(35034),p=n.n(d),m=n(82626),g=n.n(m),v=n(24650),h=n.n(v),_=n(80589),f=n(45821),y=n(18446),x=n.n(y),b=n(85476),C=n(19731),w=n(47189),P=n.p+"s1/static/images/b681f3bce3e1be6c1607.gif",k=n(423),S=n(55382),D=n.n(S),E=n(39256),O=n(6642),I=(n(81595),n(49200)),F=n(30553),A={data:function(){return{lang_txt0:(0,f.t)("logic.CustomizeFilePerSetting.txt0"),lang_txt1:(0,f.t)("logic.CustomizeFilePerSetting.txt1"),lang_txt2:(0,f.t)("logic.CustomizeFilePerSetting.txt2"),lang_txt3:(0,f.t)("logic.CustomizeFilePerSetting.txt3"),lang_txt4:(0,f.t)("logic.CustomizeFilePerSetting.txt4"),lang_txt5:(0,f.t)("logic.CustomizeFilePerSetting.txt5"),lang_txt6:(0,f.t)("logic.CustomizeFilePerSetting.txt6"),lang_txt7:(0,f.t)("logic.CustomizeFilePerSetting.txt7"),lang_txt8:(0,f.t)("logic.CustomizeFilePerSetting.txt8"),lang_txt9:(0,f.t)("logic.CustomizeFilePerSetting.txt9"),lang_txt10:(0,f.t)("logic.CustomizeFilePerSetting.txt10"),lang_txt11:(0,f.t)("logic.CustomizeFilePerSetting.txt11"),lang_txt12:(0,f.t)("logic.CustomizeFilePerSetting.txt12"),lang_txt13:(0,f.t)("logic.CustomizeFilePerSetting.txt13"),lang_txt14:(0,f.t)("logic.CustomizeFilePerSetting.txt14"),lang_txt15:(0,f.t)("logic.CustomizeFilePerSetting.txt15"),lang_txt16:(0,f.t)("logic.CustomizeFilePerSetting.txt16"),lang_txt17:(0,f.t)("logic.CustomizeFilePerSetting.txt17"),lang_txt18:(0,f.t)("logic.CustomizeFilePerSetting.txt18"),lang_txt19:(0,f.t)("logic.CustomizeFilePerSetting.txt19"),lang_txt20:(0,f.t)("logic.CustomizeFilePerSetting.txt20"),lang_txt21:(0,f.t)("logic.CustomizeFilePerSetting.txt21"),lang_txt22:(0,f.t)("logic.CustomizeFilePerSetting.txt22"),lang_txt23:(0,f.t)("logic.CustomizeFilePerSetting.txt23"),lang_txt24:(0,f.t)("logic.CustomizeFilePerSetting.txt24"),lang_txt25:(0,f.t)("logic.CustomizeFilePerSetting.txt25"),lang_txt26:(0,f.t)("logic.CustomizeFilePerSetting.txt26"),lang_txt27:(0,f.t)("logic.CustomizeFilePerSetting.txt27"),lang_txt28:(0,f.t)("logic.CustomizeFilePerSetting.txt28"),lang_txt29:(0,f.t)("logic.CustomizeFilePerSetting.txt29"),hasPerm:(0,f.t)("logic.CustomizeFilePerSetting.hasPerm"),shareGroupFile:(0,f.t)("logic.CustomizeFilePerSetting.shareGroupFile"),groupUser:(0,f.t)("logic.CustomizeFilePerSetting.groupUser"),outGroupUser:(0,f.t)("logic.CustomizeFilePerSetting.outGroupUser"),detail:(0,f.t)("logic.CustomizeFilePerSetting.detail"),presetPermsCount:3}},methods:{initTableData:function(e){var t=e.name,n=e.compound_type,r=e.permissions,i={view:{value:this.canView(r)},copyContent:{value:this.canCopyContent(r)},print:{value:this.canPrint(r)},downloadCopySave:{value:this.canDownloadCopySave(r)},comment:{value:this.canComment(r)},createUploadRename:{value:this.canCreateUploadRename(r)},update:{value:this.canUpdate(r)},share:{value:this.canShare(r)},moveDelete:{value:this.canMoveDelete(r)},managePerm:{value:this.canManagePerm(r)},history:{value:this.canHistory(r)}};if("preset"===n)switch(Object.keys(i).ford=!0})),t){case this.lang_txt16:i.copyContent.disabled=!1,i.print.disabled=!1;break;case this.lang_txt18:i.copyContent.disabled=!1,i.print.disabled=!1,i.downloadCopySave.disabled=!1,i.comment.disabled=!1,i.share.disabled=!1,i.moveDelete.disabled=!1,i.managePerm.disabled=!1;break;case this.lang_txt27:i.copyContent.disabled=!1,i.print.disabled=!1,i.downloadCopySave.disabled=!1}else Object.keys(i).forEach((function(e){i[e].disabled="history"===e}));return i},mappingToKey:function(e){var t={2:"view",3:"copyContent",4:"print",5:"downloadCopySave",6:"comment",7:"createUploadRename",8:"update",9:"share",10:"moveDelete",11:"managePerm"};return this.isFromMyCloud&&(t={2:"view",3:"copyContent",4:"print",5:"downloadCopySave",6:"comment",7:"update",8:"share"}),t[e]},isShowDtail},renderShareTable:function(){var e=this,t=this.$createElement;return[t("div",{class:"customize-file-per-setting-container"},[t("div",{class:"row row1"},[t("div",{class:"cell"},this.hasPerm),t("div",{class:"cell"},this.shareGroupFile)]),t("div",{class:"row row2"},[t("div",{class:"cell"},this.groupUser),t("div",{class:"cell center"},[t("SuccessShape")])]),t("div",{class:"row row3"},[t("div",{class:"cell"},this.outGroupUser),t("div",{class:"cell center"},[this.outPermission?t("SuccessShape"):t("MistakeShape"),t("a",{attrs:{target:"_blank"},style:{visibility:this.isShowDetail()?"visible":"hidden"},on:{Url)}}},this.detail)])])])]},renderTableHeader:function(e,t){var n=t.column,r=t.$index,i=this.$createElement,o=window.top.document.createElement("span");return o.innerText=this.lang_txt22,o.style.display="inline-block",o.style["font-weight"]="bold",o.style["font-size"]="14px",window.top.document.body.appendChild(o),n.minWidth=o.clientWidth+45,n.width=o.clientWidth+45,n.realWidth=o.clientWidth+45,window.top.document.body.removeChild(o),i("span",null,[this.isFromMyCloud||8===r?this.lang_txt6:this.lang_txt22,i("el-popover",{props:{placement:"top",trigger:"hover",popperClass:"shareManagePopover",visibleArrow:!0}},[i("div",{},10===r?this.lang_txt23:this.renderShareTable()),i("k-icon",{slot:"reference",props:{type:"remind"},style:{marginLeft:"4px"}})])])},renderHeader:function(e,t){var n=t.column,r=window.top.document.createElement("span");return r.innerText=n.label,r.style.display="inline-block",r.style["font-weight"]="bold",r.style["font-size"]="14px",window.top.document.body.appendChild(r),n.minWidth=r.clientWidth+40,n.width=r.clientWidth+40,n.realWidth=r.clientWidth+40,window.top.document.body.removeChild(r),e("span",n.label)},autoLinkCheck:function(e,t){var n=this,r={copyContent:["view","copyContent"],print:["view","print"],managePerm:["view","copyContent","print","downloadCopySave","comment","createUploadRename","update","share","moveDelete"],moveDelete:["view","copyContent","print","downloadCopySave","comment","createUploadRename","update"],share:["view","copyContent","print","downloadCopySave","comment","createUploadRename","update"],createUploadRename:["view","update"],update:["view","createUploadRename"],comment:["view"],downloadCopySave:["view","copyContent","print"]};Object.prototype.hasOwnProperty.call(r,t)&&r[t].forEach((function(t){n.$set(n.tableData[e].perms[t],"value",!0)}))},autoLinkCancelCheck:function(e,t){var n=this,r={view:["copyContent","print","downloadCopySave","comment","createUploadRename","update","share","moveDelete","managePerm"],copyContent:["downloadCopySave","share","moveDelete","managePerm"],print:["downloadCopySave","share","moveDelete","managePerm"],downloadCopySave:["share","moveDelete","managePerm"],createUploadRename:["update","share","moveDelete","managePerm"],update:["createUploadRename","share","moveDelete","managePerm"],share:["managePerm"],moveDelete:["managePerm"],comment:["share","moveDelete","managePerm"]};Object.prototype.hasOwnProperty.call(r,t)&&r[t].forEach((function(t){n.$set(n.tableData[e].perms[t],"value",!1)}))},handleEdit:function(e,t){var n=e.index,r=t.index+1,i=this.mappingToKey(r),o=e.perms[i].value;this.$set(this.tableData[n].perms[i],"value",!o),n>this.presetPermsCount-2&&(o?this.autoLinkCancelCheck(n,i):this.autoLinkCheck(n,i))},tableCellClassName:function(e){var t=e.row,n=e.column,r=e.rowIndex,i=e.columnIndex;t.index=r,n.index=i},checkSubmitData:function(){var e=this.transTableDate(),t=this.checkPerms(e),n=t.isExistEmpty,r=t.isExistSame;if(n.length){var i=n[0].name;return this.warningMessage="【".concat(i,"】").concat(this.lang_txt19),!1}if(r.length){var o=r[0],a=o.p1,s=o.p2;return this.warningMessage="【".concat(a.name,"】").concat(this.lang_txt20,"【").concat(s.name,"】").concat(this.lang_txt21),!1}return this.warningMessage="",!0},transTableDate:function(){var e=this,t=[];return this.tableData.forEach((function(n,r){t[r]={id:n.id,compound_type:n.type,name:n.name,permissions:e.getPermsArr(n)}})),t},getPermsArr:function(e){var t={view:["view"],copyContent:["copy_content"],print:["print"],downloadCopySave:["copy","download","saveas"],comment:["comment"],createUploadRename:["new_empty","upload","rename"],update:["update"],share:["share"],moveDelete:["move","delete"],history:["history"],managePerm:["manage_perm"],secret:["secret"]},n=Object.keys(e.perms).reduce((function(n,i){return e.perms[i].value&&n.push.apply(n,(0,r.Z)(t[i])),n}),[]);return n.includes("update")&&!n.includes("history")&&n.push("history"),!n.includes("update")&&n.includes("history")&&(n=n.filter((function(e){return"history"!==e}))),n.includes("manage_perm")&&!n.includes("secret")&&n.push("secret"),!n.includes("manage_perm")&&n.includes("secreturn"secret"!==e}))),n},checkPerms:function(e){for(var t=[],n=[],r=0;r<e.length;r++){e[r].permissions.length||t.push(e[r]);for(var i=r+1;i<e.length;i++)e[r].permissions.sort().toString()===e[i].permissions.sort().toString()&&n.push({p1:e[r],p2:e[i]})}return{isExistEmpty:t,isExistSame:n}},checkIsExistModifiedData:function(e){var t=[];return this.compoundPerms.forEach((function(n,r){if("Manageable"!==n.alias_name){var i=e[r].permissions;!x()(i.sort(),n.permissions.sort())&&t.push(e[r])}})),t},canView:function(e){return e.includes("view")},canCopyContent:function(e){return e.includes("copy_content")},canPrint:function(e){return e.includes("print")},canDownloadCopySave:function(e){return this.permsInclude(e,["copy","download","saveas"])},canCload","rename"])},canUpdate:function(e){return e.includes("update")},canShare:function(e){return e.includes("sharemove","delete"])},canComment:function(e){return e.includes("comment")},canHistory:function(e){return e.includes("history")},canManagePerm:function(e){return e.includes("manage_perm")},onCellMouseEnter:function(e,t,n){this.displayDelIcon(e,n,"mouseEnter")},n,"mouseLeave")},displayDelIcon:function(e,t,n){"preset"!==e.type&&(t.parentNode.querySelector(".del-icon").style.display="mouseEnter"===n?"inline-block":"none")},permsInclude:function(e,t){return t.every((function(t){return e.includes(ts.$emit("close")}}},T={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["k-file-customize-per-setting",{"is-pc-office":e.isPC},{"is-web-cloud":e.isCloud}]},[e.warningMessage?n("div",{staticClass:"warning-message"},["#awards-warning#"===e.warningMessage?[n("div",[n("KIcon",{attrs:{type:"pc-warning"}}),e._v(e._s(e.txt1)+e._s(e.awardsTerm)+e._s(e.txt2)),e.isMacOffice?e._e():n("span",[e._v(e._s(e.txt3)),n("a",{staticClass:"buy-btn",attrs:{href:e.buyUrl,target:"__blank"}},[e._v(e._s(e.txt5))])])],1),e._v(" "),n("i",{staticClass:"el-icon-close",on:{click:function(t){e.warningMessage=""}}})]:[n("div",[n("KIcon",{attrs:{type:"pc-warning"}}),e._v(e._s(e.warningMessage))],1),e._v(" "),n("i",{staticClass:"el-iconarningMessage=""}}})]],2):e._e(),e._v(" "),e.loading?n("KLoading"):e._e(),e._v(" "),e.loading?e._e():n("div",{staticClass:"setting-table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,cellClassName:e.tableCellClassName},on:{"cell-mouse-enter":e.onCellMouseEnter,"cell-mouse-leave":e.onCellMouseLeave}},[n("el-table-column",{attrs:{prop:"name",label:e.lang_txt0,width:"78",renderHeader:e.renderHeader,showOverflowTooltip:""}}),e._v(" "),n("el-table-column",{attrs:{label:e.lang_txt1,width:"68",renderHeader:e.renderHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.view.value,disabled:t.row.perms.view.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}})]}}],null,!1,1424285285)}),e._v(" "),n("el-table-column",{attrs:{label:e.lang_txt24,width:"78",renderHeader:e.renderHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.copyContent.value,disabled:t.row.perms.copyContent.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}})]}}],null,!1,1196744293)}),e._v(" "),n("el-table-column",{attrs:{label:e.lang_txt25,width:"68",renderHeader:e.renderHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.print.value,disabled:t.row.perms.print.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}})]}}],null,!1,1694678469)}),e._v(" "),n("el-table-column",{attrs:{label:e.lang_txt2,width:"90",renderHeader:e.renderHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.downloadCopySave.value,disabled:t.row.perms.downloadCopySave.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}})]}}],null,!1,2727118629)}),e._v(" "),n("el-table-column",{attrs:{label:e.lang_txt4,width:"68",renderHeader:e.renderHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.comment.value,disabled:t.row.perms.comment.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}})]}}],null,!1,1481790853)}),e._v(" "),e.isFromMyCloud?e._e():n("el-table-column",{attrs:{label:e.lang_txt5,width:"130",renderHeader:e.renderHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.createUploadRename.value,disabled:t.row.perms.createUploadRename.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}})]}}],null,!1,1128229733)}),e._v(" "),n("el-table-column",{attrs:{label:e.lang_txt26,width:"68",renderHeader:e.renderHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.update.value,disabled:t.row.perms.update.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}})]}}],null,!1,1146458085)}),e._v(" "),n("el-table-column",{attrs:{width:"68",renderHeader:e.renderTableHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.share.value,disabled:t.row.perms.share.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}}),e._v(" "),e.isFromMyCloud&&t.$index>2?n("i",{staticClass:"el-icon-error del-icon",on:{click:function(n){return e.deletePerm(t.$index)}}}):e._e()]}}],null,!1,45079876)}),e._v(" "),e.isFromMyCloud?e._e():n("el-table-column",{attrs:{label:e.lang_txt7,width:"90",renderHeader:e.renderHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.moveDelete.value,disabled:t.row.perms.moveDelete.disabled},on:{change:function(n){return e.handleEdit(t.row,t.column)}}})]}}],null,!1,4056646757)}),e._v(" "),e.isFromMyCloud?e._e():n("el-table-column",{attrs:{width:"100",renderHeader:e.renderTableHeader,showOverflowTooltip:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{attrs:{value:t.row.perms.managePerm.value,disabled:t.row.perms.managePerm.dis(t.row,t.column)}}}),e._v(" "),t.$index>2?n("i",{staticClass:"el-icon-error detePerm(t.$index)}}}):e._e()]}}],null,!1,1386565805)})],1)],1),e._v(" "),n("div",{staticClass:"setting-footer"},[n("div",{staticClass:"left-content",on:{click:e.createNewPermName}},[n("KIcon",{attrs:{type:"add_label"}}),e._v("\n      "+e._s(e.lang_txt8)+"\n      "),e.isFromMyCloud?e._e():n("div",{staticStyle:{display:"inline-flex","align-items":"center"}},[n("el-popover",{attrs:{placement:"top-start",content:e.lang_txt28,popperClass:"k-custom-right-guide-popover",trigger:"hover",effect:"dark"}},[n("div",{staticClass:"popover-containter"},[n("div",{staticClass:"popover-containter-title"},[e._v(e._s(e.txt4))]),e._v(" "),n("img",{staticClass:"popover-containter-img",attrs:{src:e.customRightGuideGif}})]),e._v(" "),n("KIcon",{staticStyle:{margin:"0 4px"},attrs:{slot:"reference",type:"remind"},slot:"reference"})],1)],1),e._v(" "),n("KIcon",{attrs:{type:"memberprivilege"}})],1),e._v(" "),n("div",{staticClass:"right-content"},[n("KButton",{on:{click:e.handleClose}},[e._v(e._s(e.lang_txt9))]),e._v(" "),n("KButton",{attrs:{type:"primary"},on:{click:e.confirmUpdatePerms}},[e._v(e._s(e.lang_txt10))])],1)])],1)},staticRenderFns:[],name:"KCustomizeFilePerSetting",components:{KLoading:s.Z,KButton:c.Z,ElTable:u(),ElTableColumn:p(),ElCheckbox:g(),KIcon:_.default,ElPopover:h(),"k-icon":_.default,SuccessShape:E.Z,MistakeShape:O.Z},mixins:[A],props:{isEntOnlineDialog:{type:Boolean,default:!1},currentTeam:{type:Object,default:function(){return{}},required:!0},isFromMyCloud:{type:Boolean,default:!1},onUpdatedCallback:{type:Function,default:function(){}},onDeleteCallback:{type:Function,default:function(){}}},data:function(){return{compoundPerms:[],tableData:[],committing:!1,loading:!0,warningMessage:"",awardsTerm:0,customRightGuideGif:P,txt1:(0,f.t)("logic.Privilege.customRight.txt2"),txt2:(0,f.t)("logic.Privilege.customRight.txt3"),txt3:(0,f.t)("logic.Privilege.customRight.txt4"),txt4:(0,f.t)("logic.Privilege.sample"),txt5:(0,f.t)("logic.Privilege.buyPkg"),outPermission:!1,detailUrl:"https://kdocs.cn/l/cpFGzBM2e44h"}},computed:{isPC:function(){var e;return null===(e=this.$root)||void 0===e?void void 0:e.isCloud},buyUrl:function(){return"".concat(k.UX,"/buy?utm_source=").concat((0,C.x_)(window),"&utm_medium=team_doc_auth_cust&utm_buysource=ad&privilegeName=team_doc_auth_cust&comp_id=").concat(this.currentTeam.corpid)}},created:function(){var e=this;return(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.queryPermissions();case 2:return!e.$__SHIELD_CONFIG__.forbidAward&&e.delayPrivilege(),t.next=5,e.getOutPermission();case 5:case"end":return t.stop()}}),t)})))()},mounted:function(){},methods:{handleErrorMsg:function(e){var t,n=null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.msg;n&&D().error(n)},queryPermissions:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,e.tableData=[],n=e.currentTeam.id,t.next=6,(0,w.CVS)(n);case 6:r=t.sent,i=r.compound_perms,e.compoundPerms=e.isFromMyCloud?i.filter((function(e){return"Manageable"!==e.alias_name})):i,e.compoundPerms.length&&e.compoundPerms.forEach((function(t){e.tableData.push({id:t.id,type:t.compound_type,name:t.name,perms:e.initTableData(t)})})),e.loading=!1,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),e.loading=!1,e.handleErrorMsg(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},deletePerm:function(e){var t=this;return(0,i.Z)(a().mark((function n(){var r,o,s,c,l;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.resetWarningMsg(),0!==t.tableData[e].id){n.next=5;break}t.tableData.splice(e,1),n.next=28;break;case 5:return n.prev=5,r=t.currentTeam.id,o=t.tableData[e].id,n.next=10,(0,w.gnm)({groupId:r,cpId:o});case 10:if(!((s=n.sent).ref_compounds_count>0)){n.next=15;break}t.$emit("change","KDeleteCustomizePermission",{isEntOnlineDialog:t.isEntOnlineDialog,currentTeam:t.currentTeam,selectedCompoundPerm:t.compoundPerms[e],compoundPerms:t.compoundPerms,relData:s,onSuccess:function(){var e=n e.stop()(this,arguments)}}()}),n.next=23;break;case 15:return t.$message.success(t.lang_txt11),n.next=18,(0,w.CVS)(r);case 18:c=n.sent,l=c.compound_perms,t.compoundPerms=t.isFrom"!==e.alias_name})):l,t.tableData.splice(e,1),t.onDeleteCallback();case 23:n.next=28;break;case 25:n.prev=25,n.t0=n.catch(5),t.handleErrorMsg(n.t0);case 28:case"end":return n.stop()}}),n,null,[[5,25]])})))()},createNewPermName:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkCanCreateNewPerm();case 2:if("error"!==(n=t.sent)){t.next=6;break}return e.$message.error("网络异常，请稍后再试。"),t.abrupt("return");case 6:if(n){t.next=9;break}return e.popPrivilegeDialog(),t.abruptr((function(e){return"custom"===e.type})),r.length<2?(e.resetWarningMsg(),e.$emit("change","KCreateCustomizePermission",{isFromMyCloud:e.isFromcess(e.lang_txt12),e.tableData.push(t)}})):e.warningMessage="".concat(e.lang_txt13).concat(2).concat(e.lang_txt14);case 12:case"end":return t.stop()}}),t)})))()},checkCanCreateNewPerm:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,w.OxC)("team_doc_auth_cust",e.currentTeam.corpid,e.currentTeam.id);case 3:return n=t.sent,r=n.status,t.abrupt("return",r);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return","error");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},delayPrivilege:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.OxC)("team_doc_auth_cust",e.currentTeam.corpid,e.currentTeam.id);case 2:n=t.sent,!n.status&&e.getAwards();case 5:case"end":return t.stop()}}),t)})))()},getAwards:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,w.L44)({cid:e.currentTeam.corpid,activityKey:"activity_auth_cust_reclaim",windowKey:"web_group_doc_auth",checkType:"team_doc_auth_cust",activitySubKey:""});case 3:if(n=t.sent,r=n.status,i=n.record,!r){t.next=10;break}return t.next=9,(0,w.HQc)({window_key:"web_group_doc_auth",activity_key:"activity_auth_cust_reclaim",company_id:e.currentTeam.corpid,check_type:"team_doc_auth_cust"});case 9:e.showPkgDetail(30);case 10:i&&i.award_key&&i.validTerm&&i.validTerm>0&&e.showPkgDetail(i.validTerm),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),e.handleErrorMsg(t.t0);case 16:case"end":return t.stop()}}this.warningMessage="#awards-warning#"},confirmUpdatePerms:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,i,o,s,c,l,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.committing){t.next=2;break}return t.abrupt("return");case 2:if(!e.checkSubmitData()){t.next=29;break}if(n=e.transTableDate(),i=n.slice(0,e.compoundPerms.length),o=n.length-i.length>0?n.slice(-(n.length-i.length)):[],s=e.checkIsExistModifiedData(i),!(c=[].concat((0,r.Z)(s),(0,r.Z)(o))).length){t.next=28;break}return t.prev=9,l=e.currentTeam.id,e.committing=!0,t.next=14,(0,w.kY9)(l,{compound_perms:c});case 14:return e.$message.success(e.lang_txt15),t.next=17,e.queryPermissions();case 17:e.onUpdatedCallback(e),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),40311007===(null===(u=t.t0.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.code)?e.popPrivilegeDialog():e.handleErrorMsg(t.t0);case 23:return t.prev=23,e.committing=!1,t.finish(23);case 26:t.next=29;break;case 28:e.handleClose();case 29:case"end":return t.stop()}}),t,null,[[9,20,23,26]])})))()},popPrivilegeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={headerTitle:(0,f.t)("logic.Privilege.title"),companyId:this.currentTeam.corpid,privilegePolicyKey:"safety_setting",activityPolicyKey:"pay_activity",width:"680px",privilegeName:"team_doc_auth_cust",utmSource:(0,C.x_)(window),utmMedium:"team_doc_auth_cust",utmBuySource:"open",position:"team_doc_auth_cust",isGroupPrivilege:!0,groupId:this.currentTeam.id,groupType:this.currentTeam.type,groupRole:this.currentTeam.user_role,privilegeDesc:(0,f.t)("logic.Privilege.customRight.txt1")},n={companyId:this.currentTeam.corpid},r=this.$__SHIELD_CONFIG__.UpgradePrivilegePolicyDialog?t:n,i=this.$__SHIELD_CONFIG__.UpgradePrivilegePolicyDialog?"DialogUpgradePrivilege":"KPrivateAlert";this.$emit("change"rningMessage&&(this.warningMessage="")},getOutPermission:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.currentTeam.corpid){t.next=7;break}return t.next=4,(0,w.dWD)(e.currentTeam.corpid);case 4:n=t.sent,(r=n.data)&&(e.outPermission=r.allow);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e._error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,I.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z="file_permission_custom";function K(e){var t={group_id:"0",company_id:"0",entrance:"",from:e};return{KCustomizeFilePerSetting:[{event:z,trigger:"mounted",listener:function(e){var n,r,i;if("KDialog"===(null==e||null===(n=e.$root)||void 0===n||null===(n=n.$options)||void 0===n?void 0:n.name)){var o,a=null===(o=e.$root.state)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.name;~["KEnterFilePermissionSetting"].indexOf(a)?t.entrance="file_permission_setting":~["KTeamSettings","KEntTeamFuncManage","KTeamAppSettings"].indexOf(a)?t.entrance="team_setting":t.entrance=""}return t.group_id=((null==e||null===(r=e.$props)||void 0===r||null===(r=r.currentTeam)||void 0===r?void 0:r.id)||"0")+"",t.company_id=((null==e||null===(i=e.$props)||void 0===i||null===(i=i.currentTeam)||void 0===i?void 0:i.corpid)||"0")+"",M(M({},t),{},{action:"view"})}},(0,F.Z)({createNewPermName:function(){return{event:z,params:M(M({},t),{},{action:"add_click"})}},confirmUpdatePerms:function(){return{event:z,params:M(M({},t),{},{action:"modify_confirm"})}},handleEdit:function(){return{event:z,params:M(M({},t),{},{action:"modify_click"})}},deletePerm:function(){return{event:z,params:M(M({},t),{},{action:"modify_click"})}}})],KCreateCustomizePermission:[(0,F.Z)({submit:function(){return{event:z,params:M(M({},t),{},{action:"add_confirm"})}}})]}}var U=K("PC"),N=K("kdocs");T.install=function(e){e.component(T.name,T)},T.kDocsDw=N,T.pcOfficeDw=U;var $=T},56923:function(e,t,n){var r=n(37311),i=n(2406),o=n.n(i),a=n(57099),s=n.n(a),c=n(43229),l=n.n(c),u=n(42173),d=n.n(u),p=n(62414),m=n(23071),g=n(80589),v=n(47189),h=n(16548),_=n(17578),f=n(45821),y=n(19731),x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-delete-customize-permission"},[n("div",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),n("div",{staticClass:"permission-content"},[n("div",{staticClass:"permission-members"},[n("KAvatarCombination",{attrs:{members:e.members,isNeedMoreSuffix:e.refCompoundsBrief.length>e.avatarShowCount,overlySize:-8,borderSize:2}}),e._v(" "),n("div",{staticClass:"member-count"},[e._v(e._s(e.refCompoundsCount)+e._s(e.lang_txt8))])],1),e._v(" "),n("div",{staticClass:"permission-dropdown"},[n("el-dropdown",{ref:"perDropdown",attrs:{trigger:"click"},on:{command:function(t){return e.handleDropdownClick(t)}}},[n("span",[e._v(e._s(e.defaultReplacePerm.name)),n("KIcon",{attrs:{type:"down"}})],1),e._v(" "),n("el-dropdown-menu",{staticClass:"k-customize-permission-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[n("div",{class:[{"custom-height":e.isEntOnlineDialog}]},e._l(e.validCompoundPerms,(function(t){return n("el-dropdown-item",{key:t.id,attrs:{command:t.name}},[n("div",{staticClass:"el-dropdown-menu__item-block"},[t.name===e.defaultReplacePerm.name?n("KIcon",{staticClass:"selected-icon",attrs:{type:"check"}}):e._e(),e._v(" "),n("div",{staticClass:"drop-text",class:{check:t.name===e.defaultReplacePerm.name}},[n("span",{staticClass:"drop-text__ellipsis"},[e._v(e._s(t.name))]),e._v(" "),"custom"===t.compound_type?n("KIcon",{staticClass:"memberprivilege-icon",attrs:{type:"memberprivilege"}}):e._e()],1),e._v(" "),n("div",{staticClass:"drop-subtext"},[e._v(e._s(t.subText))])],1)])})),1),e._v(" "),n("div",[n("el-dropdown-item",{attrs:{command:"delete",divided:""}},[n("div",{staticClass:"el-dropdown-menu__item-block"},[n("div",{staticClass:"drop-text delete"},[e._v(e._s(e.lang_txt9))])])])],1)])],1)],1)]),e._v(" "),n("footer",[n("k-button",{on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.lang_txt1))]),e._v(" "),n("k-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.onConfirm}},[e._v(e._s(e.lang_txt2))])],1)])},staticRenderFns:[],name:"KDeleteCustomizePermission",components:{ElDropdown:s(),ElDropdownMenu:l(),ElDropdownItem:d(),KButton:p.Z,KAvatarCombination:m.Z,KIcon:g.default},props:{isEntOnlineDialog:{type:Boolean,default:!1},currentTeam:{type:Object,default:function(){return{}},required:!0},selectedCompoundPerm:{type:Object,default:function(){return{}},requiretype:Array,default:function(){return[]},reype:Object,default:function(){return{}},requirdefault:function(){return function(){}}}},data:function(){return{lang_txt0:(0,f.t)("logic.DeleteCustomizePermission.txt0"),lang_txt1:(0,f.t)("logic.DeleteCustomizePermission.txt1"),lang_txt2:(0,f.t)("logic.DeleteCustomizePermission.txt2"),lang_txt3:(0,f.t)("logic.DeleteCustomizePermission.txt3"),lang_txt4:(0,f.t)("logic.DeleteCustomizePermission.txt4"),lang_txt5:(0,f.t)("logic.DeleteCustomizePermission.txt5"),lang_txt6:(0,f.t)("logic.DeleteCustomizePermission.txt6"),lang_txt7:(0,f.t)("logic.DeleteCustomizePermission.txt7"),lang_txt8:(0,f.t)("logic.DeleteCustomizePermission.txt8"),lang_txt9:(0,f.t)("logic.DeleteCustomizePermission.txt9"),lang_txt21:(0,f.t)("logic.DialogEnterFilePerSetting.txt21"),lang_txt22:(0,f.t)("logic.DialogEnterFilePerSetting.txt22"),lang_txt23:(0,f.t)("logic.DialogEnterFilePerSetting.txt23"),lang_txt24:(0,f.t)("logic.DialogEnterFilePerSetting.txt24"),lang_txt25:(0,f.t)("logic.DialogEnterFilePerSetting.txt25"),lang_txt26:(0,f.t)("logic.DialogEnterFilePerSetting.txt26"),lang_txt27:(0,f.t)("logic.DialogEnterFilePerSetting.txt27"),lang_txt47:(0,f.t)("logic.DialogEnterFilePerSetting.txt47"),lang_txt50:(0,f.t)("logic.DialogEnterFilePerSetting.txt50"),lang_txt51:(0,f.t)("logic.DialogEnterFilePerSetting.txt51"),lang_txt52:(0,f.t)("logic.DialogEnterFilePerSetting.txt52"),loading:!1,avatarShowCount:4,defaultReplacePerm:this.compoundPerms[0],refCompoundsBrief:this.relData.ref_compounds_brief||[],refCompoundsCount:this.relData.ref_compounds_count||0,defaultIcon:_}},computed:{title:function(){return"".concat(this.lang_txt0).concat(this.selectedCompoundPerm.name).concat(this.lang_txt6).concat(this.selectedCompoundPerm.name).concat(this.lang_txt7)},members:function(){var e=this,t=[],n={subject_avatar:"avatar"};return this.refCompoundsBrief.forEach((function(r){"user"!==r.subject_type&&(r.subject_avatar=e.defunction(e,t){return e[n[t]||t]=r[t],e}),{});t.push(i)})),t.length>this.avatarShowCount?t.slice(0,this.avatarShowCount):t},validCompoundPerms:function(){n t.name!==e.selectebText=e.generateSubText(t.permissions)})),t}},methods:{gene.reduce((function(e,t){return e[t]=t,e}),{});return[{match:!!t.view,i18nKey:"logic.DialogEnterFilePerSetting.txt21"},{match:!!t.copy_content,i18nKey:"logic.DialogEnterFilePerSetting.txt50"},{match:!!t.print,i18nKey:"logic.DialogEnterFilePerSetting.txt51"},{match:!!t.upload,i18nKey:"logic.DialogEnterFilePerSetting.txt23"},{match:!!t.download&&!!t.copy&&!!t.saveas,i18nKey:"logic.DialogEnterFilePerSetting.txt22"},{match:!!t.comment,i18nKey:"logic.DialogEnterFilePerSetting.txt26"},{match:!!t.new_empty&&!!t.rename&&!!t.update,i18nKey:"logic.DialogEnterFilePerSetting.txt24"},{match:!!t.share,i18nKey:"logic.DialogEnterFilePerSetting.txt25"},{match:!!t.move&&!!t.delete,i18nKey:"logic.DialogEnterFilePerSetting.txt27"},{match:!!t.manage_perm,i18nKey:"logic.Dia"}].fil((function(e){return(0,f.t)(e.i18nKey)})).join(", ")},onConfirm:function(){var e=this;return(0,r.Z)(o().mark((function t(){var n,r,i,a,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.loading){t.next=3;break}return t.abrupt("return");case 3:if("custom"!==e.defaultReplacePerm.compound_type){t.next=11;break}return t.next=6,(0,v.OxC)("team_doc_auth_cust",e.currentTeam.corpid,e.currentTeam.id);case 6:if(n=t.sent,n.status){t.next=11;break}return e.popPrivilegeDialog(),t.abrupt("return");case 11:return e.loading=!0,r=e.defaultReplacePerm.name===e.lang_txt9?"remove":"replace",i=e.currentTeam.id,a=e.selectedCompoundPerm.id,s={policy:r,replace_id:"remove"===r?null:e.defaultReplacePerm.id},t.next=18,(0,v.gnm)({groupId:i,cpId:a},s);case 18:h.Z.success((0,f.t)("logic.DeleteCustomizePermission.txt3")),e.$emit("close"),e.onSuccess(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),e._error(t.t0);case 26:return t.prev=26,e.loading=!1,t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[0,23,26,29]])})))()},handleDropdownClick:function(e){this.defaultReplacePerm="delete"===e?{name:tms.find((functioy((function(t){return e.includes(t)}))},popPrivilegeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={headerTitle:(0,f.t)("logic.Privilege.title"),companyId:this.currentTeam.corpid,privilegePolicyKey:"safety_setting",activityPolicyKey:"pay_activity",width:"680px",privilegeName:"team_doc_auth_cust",utmSource:(0,y.x_)(window),utmMedium:"team_doc_auth_cust",utmBuySource:"open",position:"team_doc_auth_cust",isGroupPrivilege:!0,groupId:this.currentTeam.id,groupType:this.currentTeam.type,groupRole:this.currentTeam.user_role,privilegeDesc:(0,f.t)("logic.Privilege.customRight.txt1")},n={companyId:this.currentTeam.corpid},r=this.$__SHIELD_CONFIG__.UpgradePrivilegePolicyDialog?t:n,i=this.$__SHIELD_CONFIG__.UpgradePrivilegePolicyDialog?"DialogUpgradePrivilege":"KPrivateAlert";this.$emit("change",i,Object.assign(r,e))}},install:function(e){e.component(x.name,x)}};t.Z=x},19346:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(37311),i=n(49200),o=n(2406),a=n.n(o),s=n(37242),c=n(16548),l=n(45821),u=n(47189),d=n(423),p=n(26426),m=n.n(p),g=n(26743),v=n(43800),h=n(23493),_=n.n(h),f=n.p+"s1/static/images/afa728b2cbd9c0babc42.png";function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.template,e._b({tag:"components"},"components",e.objProps,!1))},staticRenderFns:[],name:"OrderAdminApplyment",components:{KOrderApplySuccess:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-dialog-order-admin-applyment"},[[n("div",{staticClass:"k-dialog-order-admin-applyment-success-icon"},[n("img",{attrs:{src:e.IconSuccess}})]),e._v(" "),n("div",{staticClass:"k-dialog-order-admin-applyment-success-title"},[e._v(e._s(e.txt1))]),e._v(" "),n("div",{staticClass:"k-dialog-order-admin-applyment-success-subTitle"},[e._v("\n      "+e._s(e.txt2)),n("span",{staticClass:"k-dialog-order-admin-applyment-success-subTitle-spname"},[e._v("「"+e._s(e.spName)+"」")]),e._v(e._s(e.txt3)+"\n    ")]),e._v(" "),n("div",{staticClass:"k-dialog-order-admin-applyment-success-applymentLink"},[e._v("\n      "+e._s(e.approvalLink)+"\n    ")]),e._v(" "),n("Elbutton",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.approvalLink,expression:"approvalLink"}],staticClass:"k-dialog-order-admin-applyment-success-button",attrs:{type:"primary"},on:{success:function(t){return e.handleCopySuccess()},error:function(t){return e.handleCopyError()}}},[e._v("\n      "+e._s(e.txt4)+"\n    ")])],e._v(" "),void 0],2)},staticRenderFns:[],name:"KOrderApplySuccess",components:{Elbutton:m()},directives:{clipboard:v.B},props:{spName:{type:String},companyId:{type:[Number,String]},userId:{type:Number},utmSource:{type:String},utmMedium:{type:String},utmBuySource:{type:String}},data:function(){return{IconSuccess:s,applicationId:0,status:"",txt1:(0,l.t)("logic.OrderAdminApplyment.applySuccess.txt1"),txt2:(0,l.t)("logic.OrderAdminApplyment.applySuccess.txt2"),txt3:(0,l.t)("logic.OrderAdminApplyment.applySuccess.txt3"),txt4:(0,l.t)("logic.OrderAdminApplyment.applySuccess.txt4")}},computed:{approvalLink:function(){return"".concat(d.V1,"/web/admin/approve?comp_id=").concat(this.companyId,"&userid=").concat(this.userId,"&role_type=order_admin&utm_source=").concat(this.utmSource,"&utm_medium=").concat(this.utmMedium,"&utm_buysource=").concat(this.utmBuySource)}},methods:{handleCopySuccess:function(){this.isIE?window.clipboardData.setData("text",this.approvalLink)?c.Z.success((0,l.t)("logic.OrderAdminApplyment.copy_success")):c.Z.error((0,l.t)("logic.OrderAdminApplyment.copy_fail")):c.Z.success((0,l.t)("logic.OrderAdminApplyment.copy_success"))},handleCopyError:function(){var e=(0,g.getUA)(navigator.userAgent).isMac?"Command":"ctrl";prompt("".concat((0,l.t)("logic.ClinkCoopBox.txt9")," ").concat(e," + c ").concat((0,l.t)("logic.ClinkCoopBox.txt10")),this.approvalLink)}}},KOrderProcess:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-dialog-order-admin-applyment"},[[n("div",{staticClass:"k-dialog-order-admin-applyment-process-icon"},[n("img",{attrs:{src:e.ProcessingIcon}})]),e._v(" "),n("div",{staticClass:"k-dialog-order-admin-applyment-process-title"},[e._v(e._s(e.txt1))]),e._v(" "),n("div",{staticClass:"k-dialog-order-admin-applyment-process-subTitle"},[e._v("\n      "+e._s(e.txt2)),n("span",{staticClass:"k-dialog-order-admin-applyment-process-subTitle-spname"},[e._v("「"+e._s(e.spName)+"」")]),e._v(e._s(e.txt3)+"\n    ")]),e._v(" "),n("div",{staticClass:"k-dialog-order-admin-applyment-process-link"},[e._v("\n      "+e._s(e.approvalLink)+"\n    ")]),e._v(" "),n("Elbutton",{staticClass:"k-dialog-order-admin-applyment-process-msgButton",attrs:{type:"default"},on:{click:e.sendApproveEvent}},[e._v("\n      "+e._s(e.txt4)+"\n    ")]),e._v(" "),n("Elbutton",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.approvalLink,expression:"approvalLink"}],staticClass:"k-dialog-order-admin-applyment-process-button",attrs:{type:"primary"},on:{success:},error:function(t){return e.handleCopyError()}}},[e._v("\n      "+e._s(e.txt5)+"\n    ")])],e._v(" "),void 0],2)},staticRenderFns:[],name:"KOrderProcess",components:{Elbutton:m()},directives:{clipboard:v.B},props:{spName:{type:String},companyId:{type:[Number,String]},userId:{type:Number},adminRoleId:{type:Number},utmSource:{type:String},utmMedium:{type:String},utmBuySource:{type:String}},data:function(){return{txt1:(0,l.t)("logic.OrderAdminApplyment.process.txt1"),txt2:(0,l.t)("logic.OrderAdminApplyment.process.txt2"),txt3:(0,l.t)("logic.OrderAdminApplyment.process.txt3"),txt4:(0,l.t)("logic.OrderAdminApplyment.process.txt4"),txt5:(0,l.t)("logic.OrderAdminApplyment.process.txt5"),ProcessingIcon:f,applicationId:0,status:""}},computed:{approvalLink:function(){return"".concat(d.V1,"/web/admin/approve?comp_id=").concat(this.companyId,"&userid=").concat(this.userId,"&role_type=order_admin&utm_source=").concat(this.utmSource,"&utm_medium=").concat(this.utmMedium,"&utm_buysource=").concat(this.utmBuySource)}},methods:{handleCopySuccess:function(){this.isIE?window.clipboardData.setData("text",this.approvalLink)?c.Z.success((0,l.t)("logic.OrderAdminApplyment.copy_success")):c.Z.error((0,l.t)("logic.OrderAdminApplyment.copy_fail")):c.Z.success((0,l.t)("logic.OrderAdminApplyment.copy_success"))},handleCopyError:function(){var e=(0,g.getUA)(navigator.userAgent).isMac?"Command":"ctrl";prompt("".concat((0,l.t)("logic.ClinkCoopBox.txt9")," ").concat(e," + c ").concat((0,l.t)("logic.ClinkCoopBox.txt10")),this.approvalLink)},sendApproveEvent:_()((0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.ruW)({comp_id:this.companyId,user_id:this.userId,role_id:this.adminRoleId});case 3:c.Z.success((0,l.t)("logic.OrderAdminApplyment.process.txt6")),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),40012003===(null===(t=e.t0.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code)?c.Z.error((0,l.t)("logic.OrderAdminApplyment.process.txt7")):c.Z.error((0,l.t)("logic.OrderAdminApplyment.requestError"));case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),2e3)}}},props:{spName:{type:String},companyId:{type:[Number,String]},userId:{type:Number},roleId:{type:Number},utmSource:{type:String},utmMedium:{type:String},utmBuySource:{type:String}},data:function(){return{IconSuccess:s,template:"",adminRoleId:0,objProps:x(x({},this._props),{},{adminRoleId:0,applicationId:0})}},createtatus();case 4:case"end":return t.stop()}}),t)})))()},methods:{getSysRoles:function(){var e=this;return(0,r.Z)(a().mark((function t(){var n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.haO)({comp_id:e.companyId,sys_role_type:"order_admin"});case 3:i=t.sent,e.adminRoleId=parseInt(null===(n=i[0])||void 0===n?void 0:n.id),e.objProps.adminRoleId=parseInt(null===(r=i[0])||void 0===r?void 0:r.id),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),c.Z.error((0,l.t)("logic.OrderAdminApplyment.requestError")),e.$emit("close");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getApplymentStatus:function(){var e=this;return(0,r.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.viy)({comp_id:e.companyId,user_id:e.userId,role_id:e.adminRoleId});case 3:n=t.sent,n.application_id?e.template="KOrderProcess":e.createOrderApplyment(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),c.Z.error((0,l.t)("logic.OrderAdminApplyment.requestError")),e.$emit("close");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},createOrderApplyment:function(){var e=this;return(0,r.Z)(a().mark((function t(){var n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,u.pll)({comp_id:e.companyId,user_id:e.userId,role_id:e.adminRoleId});case 3:n=t.sent,r=n.application_id,i=n.approval_link,e.objProps.applicationId=r,e.objProps.approvalLink=i,e.template="KOrderApplySuccess",t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),c.Z.error((0,l.t)("logic.OrderAdminApplyment.requestError")),e.$emit("close");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},install:function(e){e.component(b.name,b)}},C=b},36812:function(e,t,n){var r=n(56451),i=n(37311),o=n(2406),a=n.n(o),s=n(45821),c=n(47189),l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"k-dialog-private-container"},[n("h3",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),n("div",{staticClass:"k-dialog-private-container-content"},[e.loading?e._e():n("p",{staticClass:"content"},[e._v(e._s(e._content))])]),e._v(" "),n("el-button",{staticClass:"k-dialog-private-containe,on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.confirm))])],1)},staticRenderFns:[],name:"KPrivateAlert",props:{headerTitle:{type:String},content:{type:[String,Function]},companyId:{type:Number}},data:function(){return{roleId:0,confirm:(0,s.t)("combine.upgradePrivilege.confirm"),spName:"",loading:!this.content}},computed:{_content:function(){var e=1===this.roleId?(0,s.t)("logic.Privilege.private.txt2"):"".concat((0,s.t)("logic.Privilege.private.txt3"),"(").concat(this.spName,")");return this.content||"".concat((0,s.t)("logic.Privilege.private.txt1")).concat(e).concat((0,s.t)("logic.Privilege.private.txt4"))},title:function(){return this.headerTitle||(0d:function(){!this.content&&this.initSpmData()},methods:{initSpmData:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,i,o,s,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([(0,c.F9w)(e.companyId),(0,c.Q8W)(e.companyId)]);case 3:n=t.sent,i=(0,r.Z)(n,2),o=i[0],s=i[1],o&&(e.roleId=null===(l=o.info[0])||void 0===l?void 0:l.role_id),s&&(e.spName=s.name),e.loading=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e._error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}},install:function(e){e.component(l.name,l)}};t.Z=l},27452:function(e,t,n){var r=n(49200),i=n(8004);n(2406),n(27361),n(69579),n(7562),n(52353),n(16548),n(73955),n(3ct.getOwnPro"div",{staticClass:"KDialogUpgradePrivilege"})},staticRenderFns:[],name:"DialogUpgradePrivilege",props:{companyId:{type:Number,required:!0},activityPolicyKey:{type:String,required:!0},utmSource:{type:String},utmMedium:{type:String},utmBuySource:{type:String},adUtmBuySource:{type:String},privilegeName:{type:String},subPrivilege:{type:String},position:{type:String,require:!0},reporter:{type:Object},isGroupPrivilege:{type:Boolean},groupId:{type:Number},groupType:{type:String},groupRole:{type:String},customBtn:{type:Array}},data:function(){return{epUpgradePrivilege:{},epWrap:document.querySelector(".k-dialog-upgrade-privilege .kdv-dialog")||document.querySelector(".k-dialog-upgrade-privilege .el-dialog"),spName:"",secondPkg:{spkg_name:"",spkg_desc:"",priv_name:"",priv_desc:"",value:0},topPkg:{spkg_name:"",spkg_desc:"",priv_name:"",priv_desc:"",value:0},currentPkg:{spkg_name:"",spkg_desc:"",priv_name:"",priv_desc:"",value:0},privilegeData:{task_id:0,policy_id:0,btn_for_spm:"",btnurl_for_spm:"",btn_for_admin:"",btnurl_for_admin:"",service_description:"",get_service_info:"",get_service_info_url:"",picture:""},activityData:{task_id:0,policy_id:0,tip_icon:"",titleContents:"",url:""},roleId:0,queueLen:0,queue:[],loadinisBasicPkg:!1}},mounted:function(){this.init()},methods:{init:function(){var e=this;(0,i.E)(i.$.RENDER_UPGRADE_PRIVILEGE,[this.epWrap,a(a({companyid:this.companyId},this.$props),{},{close:this.customDialogClose,g})]).then((function(pgradePrivilege.$destroy(),this.$emit("close")},renderNoticeMsgSentDialog:function(e){this.$emit("change","NoticeMessageSent",a({width:"360px",closeParent:this.customDialogClose},e))}}},c="service_popup";function l(e,t){var n,r={operate:"show",position:e.position,source:e.utmSource,company_id:e.companyId,group_id:e.groupId||"",group_type:e.groupType||"",group_role:e.groupRole||"",package:e.compPackage,com_role:(n=e.roleId,{1:"superadm",2:"admin",3:"member"}[n]||"member"),payment_authority:e.canBuy};return Object.assign(r,t)}var u={KUpgradePrivilegeContent:[{event:c,trigger:"mounted",listener:function(e){var t=this,n=e.clickKnowMore,r=e.clickAd,i=e.showReport,o=e.applyOrderAdmin;e.clickKnowMore=function(){t.track(c,l(e,{operate:"more_details_click",policy_id:e.privilegeData.policy_id,task_id:e.privilegeData.task_id})),n.apply(t,arguments)},e.clickAd=function(){t.track(c,l(e,{operate:"ad_click",policy_id:e.activityData.policy_id,task_id:e.activityData.task_id})),r.apply(t,arguments)},e.showReport=function(){t.track(c,l(e,{operate:"show",policy_id:"",task_id:""})),e.privilegeData.task_id&&t.track(c,l(e,{operate:"show",policy_id:e.privilegeData.policy_id,task_id:e.privilegeData.task_id})),e.activityData.task_id&&t.track(c,l(e,{operate:"show",policy_id:e.activityData.policy_id,task_id:e.activityData.task_id})),i.apply(t,arguments)},e.closeReport=function(){t.track(c,l(e,{operate:"close",policy_id:e.privilegeData.policy_id,task_id:e.privilegeData.task_id}))},e.applyOrderAdmin=function(){t.track(c,l(e,{operate:"applyorder_btn_click",policy_id:e.privilegeData.policy_id,task_id:e.privilegeData.task_id})),o.apply(t,arguments)}}},{event:c,trigger:"beforeDestroy",listener:function(e){if(e.$root.hasClickCloseBtn)return l(e,{operate:"close",policy_id:e.privilegeData.policy_id,task_id:e.privilegeData.task_id})}}],KUpgradePrivilegeAction:[{event:c,trigger:"click",el:".KPrivilege-action-container-left-button",listener:function(e){var t=e.$parent;return l(t,{operate:"left_btn_click",policy_id:t.privilegeData.policy_id,task_id:t.privilegeData.task_id})}},{event:c,trigger:"click",el:".KPrivilege-action-container-right-button",listener:function(e){var t=e.$parent;return l(t,{operate:"right_btn_click",policy_id:t.privilegeData.policy_id,]};s.install=function(e){e.component(s.name,s)},s.dw=u,t.Z=s},65260:futurn{groupShareRangeValue:["group","company"]}},computed:{isMemberWithinGroupEnt:function(){var e,t;return(null===(e=this.source)||void 0===e?void 0:e.corpid)===(null===(t=this.user)||void 0===t?voShareRangeValue.includes(this.groupShareRange)},currentGroupCompanyId:function(){var e,t,n;return(null===(e=this.selectorProps)||void 0===e||null===(e=e.sources[0])||void 0===e?void 0:e.companyId)||(null===(t=this.source)||void 0===t?void 0:t.corpid)||(null===(n=this.company)||void 0===n?void 0:n.id)||0},allUserIdInGroup:function(){var e=this.disableIds||[];return Array.frgroupShareRange&&this.coopContainAssociatedOrg}},methods:{getUserNodeCompanyId:function(e){var t=e._source||{},n=t.comp_id,r=t.corpid,i=t.company_id,o=t.companyId,a=t.companyid;return n||r||i||o||a},checkIsDisabledMethod:function(e){var t=this.getUserNodeCompanyId(e);return!("user"!==(null==e?void 0:e._type)||!t||t===this.currentGroupCompanyId)&&(!!(this.command&&"TRANSFER_TEAM"===this.command||this.isSecureGroup)||"anyone"!==this.groupShareRange&&!this.isEnableAddAssociation&&!(!this.groupShareRange||"anyone"===this.groupShareRange))},getDisabledTipsMethod:function(e){var t=this.getUserNodeCompanyId(e);return"user"!==(null==e?void 0:e._type)||!t||t===this.currentGroupCompanyId||this.allUserIdInGroup.includes(e.userid)?"":"TRANSFER_TEAM"===this.command?(0,i.t)("logic.TeamSettings.no_transfer_to_nonEntMember"):this.isSecureGroup?(0,i.t)("logic.InviteContact.txt14"):"anyone"===this.groupShareRange||this.isEnableAddAssociation?"":this.groupShareRange&&"anyone"!==this.groupShareRange?this.isShareRangeInGroupOrCompany&&"group_range"===this.groupShareReason?(0,i.t)("logic.InviteContact.txt11"):"company"===this.groupShareRange&&"company_range"===this.groupShareReason&&this.isMemberWithinGroupEnt?(0,i.t)("logic.InviteContact.txt12"):(0,i.t)("logic.InviteContact.txt13"):""}}};t.Z=o},8004:,{$:function(){return i},E:function(){return o}});var r=n(423),i={SHOW_SPACE_LIMIT:"showSpaceLimit",RENDER_UPGRADE_PRIVILEGE:"renderUpgradePrivilege",RENDER_MSG_SENT_POPUP:"renderMsgSentPopup",SHOW_PLUS_BUY:"showPlusBuy"},o=function(e,t,n){var r=Array.isArray(t)?t:[t];return a().then((function(){return window&&window.epPlatform&&window.epPow.epPlatform,r)})).catch((function(e){n&&n(e)}))},a=function(){return new Promise((function(e,t){if(window.epPlatform)return e();var n=new XMLHttpRequest;if(n.open("GET","".concat(r.UX,"/fab/sris/epplatform_sri.json"),!1),n.send(null),n.status>=200&&n.status<400){var i=JSON.parse(n.responseText),o=document.createElement("script");o.src="".concat(r.UX,"/fab/sdk/v1/epplatform"),o.integrity=i.epplatform,o.crossOrigin="anonymous",o.onload=e,o.onerror=t,document.head.appendChild(o)}}))}},37242:function(e,t,n){e.exports=n.p+"s1.p+"s1/static/images/caaad45441bf0573fce8.png"}}]);
