;
(self.AMP=self.AMP||[]).push({m:0,v:"2401191523000",n:"amp-experiment",ev:"0.1",l:!0,f:function(n,t){!function(){y.isArray;var u=Object.prototype,o=u.hasOwnProperty,c=u.toString;elf.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var a,l=self.__AMP_LOG; h=[\w-]+$/,P=function(){ar t=n.prototype;return t.init=t.getVariants=t.whenReady=n}();function S(n,t,r){R(t),function(n){var t,r=n.variants;p((t=r,"[object Object]"===c.call(t)&&Object.keys(r).length>0),"Missing experiment variants config."),n.group&&R(n.group);var e=0;for(var i in r)if(f(r,i)){R(i);var u=r[i];p("number"==typeof u&&u>0&&u<100,"Invalid percentage %s:%s. Has to be greater than 0 and less than 100",i,u),e+=u}p(e.toFixed(6)<=100,"Total percentage is bigger than 100: "+e)}(r);var e=n.getParam("amp-x-"+t);if(e&&f(r.variants,e))return Promise.resolve(e);var i,u=!1!==r.sticky,o=r.cidScope||"amp-experiment",l=Promise.resolve(!0);return u&&r.consentNotificationId&&(l=(i=n.getHeadNode(),function(n,t,r,e){return function(n,t,r,e){var i=d(n,t);if(i)return i;var u=y(n);return u.whenExtensionsKnown().then(().then(()}(n,t,r,e).then((function(n){return n,t,r)}))}(i,"userNotificationManager","amp-user-notification")).then(().then((function(n){return p(n,"Notification not found: ".concat(r.consentNotificationId)),n.isDismissed()}))),l.then((function(e){if(!e)return null;var i=r.group||t;return function(n,t,r){if(!r)return Promise.resolve(100*n.win.Math.random());var e,i,u=(e=n,b(e,"cid")).then((function(n){return n.get({scope:r,createCookieIfNotPresent:!0},a||(a=Promise.resolve(void 0)))}));return Promise.all([u,(i=n.win,m(i,"crypto"))]).then((function(n){return n[1].uniform(t+":"+n[0])})).then(()}(n,i,u?o:null).then((function(n){for(var t=0,e=Object.keys(r.variants).sort(),i=0;i<e.length;i++)if(n<(t+=r.variants[e[i]]))return e[i];return null}))}))}ar I=function(n){!c,n);var e,u,o=(e=c,u=),;.prerenderAllowed=function(){return!0};var f=c.prototype;return f.isLayoutSupported=f.isBuildRenderBlocking=f.buildCallback=function(){var n=this;return b(this.getAmpDoc(),"variant").then((function(t){try{var r=n.Iw(),e=Object.create(null),i=Object.keys(r).map((function(t){return S(n.getAmpDoc(),t,r[t]).then(()})),u=Promise.all(i).then(().then(n.pJ.bind(n));t.init(u)}catch(n){throw t.init({}),n}}))},f.Iw=function(){var n,t=this.element.children;return p(1==t.length&&"SCRIPT"==t[0].tagName&&"APPLICATION/JSON"==t[0].getAttribute("type").toUpperCase(),'<amp-experiment> should contain exactly one <script type="application/json"> child.'),v((n=t[0].textContent,JSON.parse(n)))},f.pJ=function(n){return this.getAmpDoc().waitForBodyOpen().then((function(t){for(var r in n)n[r]&&t.setAttribute("amp-x-"+r,n[r]);return n}))},c}(n.BaseElement);n.registerServiceForDoc("variant",P),n.registerElement("amp-experiment",I)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-experiment-0.1.js.map