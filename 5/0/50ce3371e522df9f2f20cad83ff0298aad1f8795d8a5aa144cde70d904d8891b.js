var JSBridge=function(){"use strict";var e=function(){try{var e=new URL(location.href);return!(!e||!e.searchParams)&&!!e.searchParams.get("bridge_log")}catch(e){return!1}}(),i=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e&&console&&console.warn.apply(console,i)},n=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e&&console&&console.error.apply(console,i)},r=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e&&console&&console.log.apply(console,i)},t=void 0,a=void 0,o=void 0,d=void 0,c=void 0,s=void 0,p=void 0,l=void 0,u=void 0;function w(){if(null==t){var e=window.navigator.userAgent.toLowerCase();t=e.indexOf("iphone")>=0||e.indexOf("ipad")>=0||e.indexOf("ipod")>=0}return t}function g(){if(null==a){var e=window.navigator.userAgent.toLowerCase();a=e.indexOf("android")>0}return a}function f(){return null==o&&(o=navigator.userAgent.indexOf("Shopee")>=0),o}function v(){if(null==s){var e=window.navigator.userAgent.toLowerCase();s=e.indexOf("driver")>=0||e.indexOf("app_type=4")>=0}return s}function h(){if(null==p){var e=window.navigator.userAgent.toLowerCase();p=e.indexOf("app_type=11")>=0}return p}function b(){if(!c){var e=window.navigator.userAgent.toLowerCase();c=e.indexOf("airpay")>=0||e.indexOf("shopeepay")>=0}return c}function m(){if(!l){var e=window.navigator.userAgent.toLowerCase();l=f()&&-1!==e.indexOf("app_type=2")}return l}function y(){if(!u){var e=window.navigator.userAgent.toLowerCase();u=-1!==e.indexOf("mitra")}return u}window.isIOS=w,window.isAndroid=g,window.isShopeeApp=f,window.isShopeeCompatApp=f,window.isRealShopeeApp=function(){if(null==d){var e=window.navigator.userAgent.toLowerCase();d=e.indexOf("shopee")>=0&&e.indexOf("app_type=1")>=0}return d},window.isShopeeFoodDriverApp=v,window.isShopeeFoodBuyerApp=h,window.isShopeePayApp=b,window.isPartnerApp=m,window.isMitraApp=y,window.isApp=var B,A={isIOS:w,isAndroid:g,isShopeeApp:f,isShopeeFoodDriverApp:v,isShopeeFoodBuyerApp:h,isShopeePayApp:b,isPartnerApp:m,isShopeeRootUrl:;function _(){var e="__WVJB_QUEUE_MESSAGE__";!function(){if(window.inBeeShop=-1!=window.navigator.userAgent.indexOf("Beeshop")&&!(window.WebViewJavascriptBridge&&window.WebViewJavascriptBridge._version>=2)){var n,t=[],a=[],o={},d={},c=1,s={};window.WebViewJavascriptBridge={init:function(e){if(window.WebViewJavascriptBridge._messageHandler)return i("WebViewJavascriptBridge.init called twice"),null;window.WebViewJavascriptBridge._messageHandler=[e];var n=a;a=null,setTimeout((,0)},send:function(e,i){w({data:e},i)},registerHandler:function(e,i){void 0===o[e]&&(o[e]=[]),o[e].push(i),v(e)},unregisterHandler:function(e,i){if(i){var n=o[e];if(n){var r=n.indexOf(i);r>=0&&n.splice(r,1),0===n.length&&(delete o[e],v(e))}}},callHandler:hasHandler:f,hasHandlerCB:v,addHook:delHook:appHasHandler:function(e){return window.WebViewJavascriptBridgeiOSNativeAppConfig?window.WebViewJavascriptBridgeiOSNativeAppConfig._appHandlers&&window.WebViewJavascriptBridgeiOSNativeAppConfig._appHandlers.indexOf(e)>=0:window.WebViewJavascriptBridge._appHandlers&&window.WebViewJavascriptBridge._appHandlers.indexOf(e)>=0},_fetchQueue:function(){var e=JSON.stringify(t);return t=[],e},_handleMessageFromObjC:function(e){a?a.push(e):g(e)},reset:_version:2};var p=document;!function(i){(n=i.createElement("iframe")).style.display="none",n.src="wvjbscheme://"+e,i.documentElement.appendChild(n)}(p);var l=p.createEvent("Events");l.initEvent("WebViewJavascriptBridgeReady"),l.bridge=window.WebViewJavascriptBridge,p.dispatchEvent(l);var u=null;A.isIOS()&&A.isShopeeApp()&&setTimeout((function(){window.__gawindow__||(u=setInterval((function(){(window.__gawindow__||function(i,n){try{if(!(i||A.isIOS()&&A.isShopeeApp()))return!0;if(!window.document||!window.document.documentElement)return!1;var t=window.document.documentElement,a=document.createElement("iframe");return a.style.display="none",a.src=n?"wvjbscheme://"+e:"javascript:void(0)",t.appendChild(a),setTimeout((,500),!0}catch(e){return r("triggerIOSAppPageReInit_ex",e),!0}}())&&(clearInterval(u),u=null)}),300))}),2e3)}function w(i,r){if(!window.__appHasPendingCacheUpdate__){if(r){var a="cb_"+c+++"_"+Date.now();d[a]=r,i.callbackId=a}-1==window.navigator.userAgent.toLowerCase().indexOf("android")?(t.push(i),n.src="wvjbscheme://"+e):window.gabridge.sendMsg(JSON.stringify(i))}}function g(e){if(!window.__appHasPendingCacheUpdate__){try{var n=JSON.parse(e)}catch(e){n={},i("Bridge dispatch failed. err = "+e)}if(n.responseId){if(!(t=d[n.responseId]))return;t(n.responseData),delete d[n.responseId]}else{var t;if(n.callbackId){var a=n.callbackId;t=function(e){w({responseId:a,responseData:e})}}var c=window.WebViewJavascriptBridge._messageHandler;if(n.handlerName&&(c=o[n.handlerName]),void 0===c)return;for(var s in c)if(c.hasOwnProperty(s))try{c[s](n.data,t)}catch(e){r("WebViewJavascriptBridge: WARNING: javascript handler threw.",n,e)}}}}unction v(e){window.gabridge&&window.gabridge.onHasHandler&&window.gabridge.onHasHandler(e,f(e))}}(),window.connectWebViewJavascriptBridge=function(e){const i=A.isShopeeApp();i&&(window.WebViewJavascriptBridge?e(window.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",(,!1))}}function S(){A.isShopeeApp()||(window.BJBridgeReceiver=function(){var e={};if(window.DEBUG_APPEAR&&document.addEventListener("visibilitychange",(),window.DEBUG_NAVBAR){var r=document.createElement("div");r.id="bridge-debug-navbar",r.setAttribute("style","position:absolute;top:0;width:100%;height:64px;");var t=document.createElement("span");t.innerText="back",t.setAttribute("style","color:red;font-size:20px;float:left;line-height:64px;padding-left:15px;"),t.addEventListener("touchend",(),r.appendChild(t),document.body.appendChild(r)}function a(i,n){var r=i.callbackId;r in e&&e[r](n)}var o={onEventCallback:[],didTapBack:[],tabShow:[],viewWillReappear:[],viewDidDisappear:[]};function d(e,i){try{return new URL(i,e).href}catch(e){}var n=e);if(i.startsWith("http://")||i.startsWith("https://"))return i;var r=i;return i.startsWith("/")||(r=n.pathname.substr(0,n.pathname.lastIndexOf("/"))+"/"+i),n.origin+r}function c(e,i){window.MALL_HOST_ROOT_URL&&0==e.indexOf("/")&&(e=window.MALL_HOST_ROOT_URL+e),i?window.open(e):location.href=e}ar p=0,l=1,u=[{regex:"^home$",type:p,path:"/"},{regex:"^me$",type:p,path:"/me/"},{regex:"^cart$",type:p,path:"/buyer/cart/"},{regex:"^checkout$",type:p,path:"/buyer/w/checkout/confirmation/"},{regex:"^paid$",type:p,path:"/me/?page=all"},{regex:"^unpaid$",type:p,path:"/me/"},{regex:"^cancelled$",type:p,path:"/me/"},{regex:"^purchases?tab=paid$",type:p,path:"/me/"},{regex:"^/user/groups/$",type:p,path:"/user/groups/"},{regex:"^/user/groups/\\d+$",type:l}],w=[{regex:"^home$",type:p,path:"/"},{regex:"^me$",type:p,path:"/me/"},{regex:"^cart$",type:p,path:"/cart/"},{regex:"^checkout$",type:p,path:"/checkout/"},{regex:"^paid$",type:p,path:"/user/purchase/list/?type=7"},{regex:"^unpaid$",type:p,path:"/user/purchase/list/?type=9"},{regex:"^cancelled$",type:p,path:"/user/purchase/list/?type=4"},{regex:"^mycard$",type:p,path:"/user/account/payment"},{regex:"^purchases?tab=paid$",type:p,path:"/me/"},{regex:"^/user/groups/$",type:p,path:"/user/groups/"},{regex:"^/user/groups/\\d+$",type:l}],g=[{regex:"^/order/success/\\d+$",type:l},{regex:"^paid$",type:p,path:"/user/purchase?type=7"},{regex:"^unpaid$",type:p,path:"/user/purchase"}];function f(e,i){for(var n=0;n<i.length;n++){var r=i[n],t=r.regex;if(e.match(t))switch(r.type){case p:return r.path;case l:return e;default:return null}}return null}var v={popWebView:function(){window.history.back(),setTimeout((function(){null!=window.opener&&window.opener!=window&&window.close()}),300)},navigate:function(e){var i=e.url;"_blank"==e.target?c(i,!0):c(i)},configureNavBarTitle:s,configurePage:function(e){e.navbar&&e.navbar.title&&s({title:e.navbar.title})},save:function(e){var i=e.key,r=e.data,t=e.persist;if(i&&r)try{return window.sessionStorage.setItem(i,r),t&&window.localStorage.setItem(i,r),void a(e,{status:1})}catch(e){n("bridge CMD save error: ",e)}a(e,{status:0})},load:function(e){var i,r=e.key;if(r)try{(i=window.sessionStorage.getItem(r))||(i=window.localStorage.getItem(r))}catch(e){n("bridge CMD load error: ",e)}a(e,{data:i})},jump:function(e){var i=e.path.indexOf("?"),r=e.path,t="";i>-1&&(r=e.path.slice(0,-1),t=pathArr[1]),(r=e.pcmallBaseUrl?d(e.pcmallBaseUrl,function(e){return f(e,w)}(r)||r):e.liteBaseUrl?d(e.liteBaseUrl,function(e){return f(e,g)}(r)||r):r))?c(r+t):n("Unsupported AppRoute on web - {0}. Refer to UrlByAppRoute in BJBridgeReceiver.js for supported routes.".f(e.path))},getAppInfo:function(e){var i,n,r={deviceID:null};r.deviceFingerprint=(i=new RegExp("(?:^|;+|\\s+)SPC_F=([^;]*)"),n="",document&&(n=document.cookie.match(i)),(n?n[1]:"")||null),r.BCAXOWidgetDeviceID="WEB",a(e,r)},login:function(e){var i;i=e&&1===e.redirectTab?"/buyer/login/":"/buyer/login/signup/",c(i)},share:copyTextToClipboard:function(e){var n=e.text;if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",n);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var r=document.createElement("textarea");r.textContent=n,r.style.position="fixed",document.body.appendChild(r),r.select();try{document.execCommand("copy")?a(e):a(e,"error")}catch(n){return i("Copy to clipboard failed.",n),a(e,"error"),!1}finally{document.body.removeChild(r)}}}};return{callHandler:function(n,r,t){if(v[n]){if(t)var a=function(i,n){var r=i+Date.now();return e[r]=r}(n,t);r.callbackId=a,v[n](r)}else i("web Unsupported CMD - "+n)},registerHandler:function(e,i){var n,r;"function"==typeof i&&(r=i,(n=e)in o&&o[n].push(r))},unRegisterHandler:function(e,i){if(e in o)if(i){var n=o[e].indexOf(i);n>-1&&o[e].splice(n,1)}else o[e]=[]},callCallback:a,triggerBridgeEvent:function(e,n){var r=o[e];r?r.forEach(():(i("Unsupported Bridge Event - "+e),i(n))}}}())}window.BJUtil={navigate:function(e,i,n,r,t){var a=r||{};i&&(a.inCurrentPage=!0),t&&(a.popHistory=!0),n&&(a.target="_blank"),e.startsWith("//")?a.url=location.protocol+e:e.startsWith("/")?a.url=location.origin+e:a.url=e,bridgeCallHandler("navigate",a,()}},window.bridgeInit=(B=!1,function(e){e&&"function"==typeof e&&"function"==typeof window.connectWebViewJavascriptBridge?connectWebViewJavascriptBridge((function(i){B||(i.init((function(){})),B=!0),e(i)})):e()}),window.bridgeCallHandler=function(e,i,n){var t,a=window.WebViewJavascriptBridge,o=window.BJBridgeReceiver;if(i=i||{},"navigate"==e){if(window.RNUtil&&window.RNUtil.jumpToReactNativeIfExists(i.url,i.popSelf||i.popHistory||i.inCurrentPage))return;if(A.isShopeeApp()&&A.isShopeeRootUrl(i.url))return void bridgeCallHandler("jump",{path:"home"},null);if(i.popHistory)return void window.location.replace(i.url);if(i.inCurrentPage)return void(window.location.href=i.url)}else if("load"==e){if(A.isShopeeApp()&&A.isAndroid()){var d=(t=!1,function(){t||(t=!0,bridgeUnRegisterHandler("viewWillReappear",c),n(void 0))}),c=return c(),void bridgeRegisterHandler("viewWillReappear",c)}}else"popWebView"===e?r("popWebView "+location.href+" with data:"+i.data):"navigateRawUrl"===e&&(e="navigate");r("bridge",a),a?a.callHandler(e,i,n):o&&o.callHandler(e,i,n)},window.bridgeRegisterHandler=function(e,i){var n=window.WebViewJavascriptBridge,r=window.BJBridgeReceiver;n&&"registerHandler"in n?n.registerHandler(e,i):r&&"registerHandler"in r&&r.registerHandler(e,i)},window.bridgeUnRegisterHandler=function(e,i){var n=window.WebViewJavascriptBridge,r=window.BJBridgeReceiver;n&&"unregisterHandler"in n?n.unregisterHandler(e,i):r&&"unRegisterHandler"in r&&r.unRegisterHandler(e)};const W=()=>{const e=A.isShopeePayApp()||A.isShopeeFoodDriverApp()||A.isShopeeFoodBuyerApp();var n,t,a;e?A.isIOS()?function(){if(!window.WebViewJavascriptBridge||!Object.prototype.hasOwnProperty.call(window.WebViewJavascriptBridge,"_handleMessageFromObjC")){var e,n,t=[],a=[],o={},d="__WVJB_QUEUE_MESSAGE__",c={},s=1;window.bridge={},window.bridge.call=function(e,i,n){i&&(i=i.replace(/\r\n|\r|\n|\t/g," "));try{i=JSON.parse(i)||{}}catch(e){}"pageBack"===e&&window.__pageBack&&window.__pageBack(i)},window.WebViewJavascriptBridge={init:function(e){if(window.WebViewJavascriptBridge._messageHandler)return i("WebViewJavascriptBridge.init called twice"),null;window.WebViewJavascriptBridge._messageHandler=[e];var n=a;a=null;for(var r=0;r<n.length;r++)l(n[r])},send:registerHandler:function(e,i){void 0===o[e]?o[e]=[i]:o[e].push(i)},callHandler:function(e,i,n){p({handlerName:e,data:i},n)},_fetchQueue:_handleMessageFromObjC:,n=document,(e=n.createElement("iframe")).style.display="none",e.src="wvjbscheme://"+d,n.documentElement.appendChild(e)}function p(i,n){if(n){var a="cb_"+s+++"_"+(new Date).getTime();c[a]=n,i.callbackId=a}r(`ios: callbackId=${a}|handlename=${i.handlerName}`),t.push(i),e.src="wvjbscheme://"+d}function l(e){setTimeout((function(){r(`ios: ${e}`);var i=JSON.parse(e);if(i.responseId){if(!(n=c[i.responseId]))return;n(i.responseData),delete c[i.responseId]}else{var n;if(i.callbackId){var t=i.callbackId;n=var a=window.WebViewJavascriptBridge._messageHandler;if(i.handlerName&&(a=o[i.handlerName]),void 0===a)return;for(var d=0;d<a.length;d++)try{a[d](i.data,n)}catch(e){r("WebViewJavascriptBridge: WARNING: javascript handler threw.",i,e)}}}),0)}}():(n=1,t={},a={},window.bridge||(window.bridge={}),window.bridge.onReceive=function(e,n){var o={};try{o=JSON.parse(n),r(`Android: result=${n}|callbackId=${e}|href=${location.href}`),r(`Android: callbacks=${JSON.stringify(t)}`)}catch(e){i("Android: JSON.parse data from client failed: ",e)}if(e)t[e](o),delete t[e];else if(o.handlerName){var d=a[o.handlerName];if(void 0===d)return;for(var c=0;c<d.length;c++)try{delete o.handlerName,d[c](o)}catch(e){r("WebViewJavascriptBridge: WARNING: javascript handler threw.",o,e)}}},window.bridge.call=function(e,i,n){i&&(i=i.replace(/\r\n|\r|\n|\t/g," "));try{i=JSON.parse(i)||{}}catch(e){}switch(e){case"openView":if(n){t[n](i),delete t[n];break}case"pageBack":window.__pageBack&&window.__pageBack(i);break;default:var o=a[e];if(void 0===o)return;for(var d=0;d<o.length;d++)try{o[d](i)}catch(e){r("WebViewJavascriptBridge: WARNING: javascript handler threw.",e)}}},window.WebViewJavascriptBridge={init:function(){},_handleMessageFromObjC:callHandler:function(e,i,a){var o="cb_"+n+++"_"+(new Date).getTime();if(t[o]=a,window.gabridge){const n=JSON.stringify({handlerName:e,data:i,callbackId:o});r(`Android gabridge.sendMsg: ${n}`),window.gabridge.sendMsg(n)}else{var d=JSON.stringify(i);r(`Android bridge.send: handleName=${e}, data=${d}`),window.bridge.send(e,d,o)}},hasHandler:registerHandler:function(e,i){void 0===a[e]?a[e]=[i]:a[e].push(i)},hasRegisteredHandler:function(e){var i=!1;try{i=null!=a[e]}catch(e){}return i}}):window.WebViewJavascriptBridge=null,window.connectWebViewJavascriptBridge=function(i){e&&(r("window.WebViewJavascriptBridge:",window.WebViewJavascriptBridge),window.WebViewJavascriptBridge&&Object.prototype.hasOwnProperty.call(window.WebViewJavascriptBridge,"_handleMessageFromObjC")?i(window.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",(,!1))};var o=document,d=o.createEvent("Events");d.initEvent("WebViewJavascriptBridgeReady"),d.bridge=window.WebViewJavascriptBridge,o.dispatchEvent(d)};var J,H,O=-999,x=-996,C=-993,V=((J={})[O]="bridge call timeout",J[x]="bridge call failed",J[C]="bridge no support",J),R=new(function(){eturn e.prototype.ready=function(){var e=this;return r("bridge.ready:",this.inited),this.inited?Promise.resolve(!0):new Promise((function(i,n){window.bridgeInit((function(t){r("window.bridgeInit callback:",t),e.inited=!!t,e.inited?i(!0):n(!1)}))}))},e.prototype.callBridge=function(e,i){this.innerCall(e,i).then((function(e){r("bridge.callBridge res:",e)})).catch(()},e.prototype.callBridgePromise=function(e,i,n){return n&&n>0?Promise.race([this.innerCall(e,i),new Promise((function(e,i){setTimeout((function(){i({code:O,data:{},msg:V[O]})}),n)}))]):this.innerCall(e,i)},e.prototype.on=function(e,i){var n=this;this.ready().then((function(){var r=function(e){i({code:0,data:e})};n.handlerMap.set(i,r),"bridgeRegisterHandler"in window&&window.bridgeRegisterHandler(e,r)})).catch((function(){}))},e.prototype.off=function(e,i){var n=this;this.ready().then((function(){var r=n.handlerMap.get(i);r&&"bridgeUnRegisterHandler"in window&&window.bridgeUnRegisterHandler(e,r)})).catch(()},e.prototype.innerCall=function(e,i){var t=this;return new Promise((function(a,o){t.ready().then((function(){try{r("bridge.innerCall before call bridgeCallHandler"),window.bridgeCallHandler(e,i,()}catch(e){n("bridge.innerCall call bridgeCallHandler failed"),o({code:x,data:e,msg:V[x]})}})).catch((function(e){r("bridge.innerCall catch:",e),o({code:x,data:e,msg:V[x]})}))}))},e}());!H||(H={}));var I=A.isShopeeFoodBuyerApp(),E=A.isShopeeFoodDriverApp(),N=A.isShopeePayApp(),k=A.isShopeeApp(),P={on:function(e,i){(k||N||E||I)&&R.on(e,i)},off:function(e,i){(k||N||E||I)&&R.off(e,i)},callBridge:function(e,i,n){if(void 0===n&&(n=!0),n&&!window.supportWebBridge())return Promise.reject({code:C,data:{},msg:V[C]});if(k||I)return R.callBridgePromise(e,i);if(N){var r=function(e,i){var n={configurePage:{name:"setPageTitle",data:function(){var e,n=null===(e=null==i?void 0:i.navbar)||void 0===e?void 0:e.title;return n?{title:n}:{}}},popWebView:{name:"exit",data:,navigate:{name:"openView",data:function(){var e=null==i?void 0:i.url;return{targetType:H.Url,target:{type:H.Url,dataString:e}}}},showToast:{name:"showToastOrHud",data:function(){var e,n;return{msg:null===(e=null==i?void 0:i.toast)||void 0===e?void 0:e.message,msg_nature:{success:0,failure:1}[null===(n=null==i?void 0:i.toast)||void 0===n?void 0:n.iconType],duration:2e3}}}},r=n[e];return r?{name:r.name,data:r.data()}:null}(e,i);if(r)return R.callBridgePromise(r.name,r.data)}return E&&(r=function(e,i){return["configurePage","openLivechat","navigate","openExternalLink","showToast"].includes(e)?{name:e,data:i}:null}(e,i),r)?R.callBridgePromise(r.name,r.data):Promise.reject({code:C,data:{},msg:V[C]})}};window.supportWebBridge=function(){if(A.isAndroid())return!!(window.gabridge&&"sendMsg"in window.gabridge||window.bridge&&"send"in window.bridge);if(A.isIOS()){if(A.isShopeeApp()||A.isShopeeFoodDriverApp()||A.isShopeeFoodBuyerApp())return r("window.WebViewJavascriptBridgeiOSNativeAppConfig:",window.WebViewJavascriptBridgeiOSNativeAppConfig),!!window.WebViewJavascriptBridgeiOSNativeAppConfig;if(A.isShopeePayApp()){var e=window.WebViewJavascriptBridge&&"function"==typeof window.WebViewJavascriptBridge.hasHandler&&window.WebViewJavascriptBridge.hasHandler("setPageTitle");return r("hasHandler(setPageTitle):",e),e}}return!1};try{A.isShopeePayApp()||A.isShopeeFoodDriverApp()||A.isShopeeFoodBuyerApp()?W():(_(),S())}catch(e){r("e:",e)}return P}();