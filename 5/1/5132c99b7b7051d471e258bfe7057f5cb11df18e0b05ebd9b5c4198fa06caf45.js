!function(a){var e,t,r,n,f=a.adm,o=a.location.pathname,i=Date.now?parseInt(Date.now()):(new Date).getTime(),s=new RegExp(/[-/\\^$*+?.()|[\]{}]/g),u={morethan:function(e,t){return e<t},lessthan:equalto:contains:function(e,t){if(e&&t&&"string"==typeof e&&"string"==typeof t)return new RegExp("\\b"+e.toUpperCase()+"\\b").test(t.toUpperCase())}},c=["url_contains","url_match","url_does_not_contain","url_does_not_match","frequency","anniversary","custom_data","time_spent"],l=(Array.indexOf||(Array.prototype.indexOf=,a.localStorage&&(e=a.localStorage),a.sessionStorage&&(n=a.sessionStorage),e.getItem("adm.usrmeta")),l=(l?t=JSON.parse(l):(t=[{p:"ALL",d:{fq:0,lv:[i]}}],e.setItem("adm.usrmeta",JSON.stringify(t))),_("ALL",t).d),p=_(o,t),o=(f.customData=a.admCustomData,p=(p||(t.push(o={p:o,d:{fq:0,lv:[i]}}),e.setItem("adm.usrmeta",JSON.stringify(t)),o)).d,n.getItem("adm.sesh")),d=(p.fq=p.fq+1,o||(n.setItem("adm.sesh",i),l.fq=l.fq+1),parseInt(p.fq)),m=parseInt(l.fq);function g(){f.id5.enabled?(f.id5.info=ID5.init({partnerId:503}),f.id5.info.onAvailable(function(e){f.id5.info=e,void 0===f.id5.info.getUserId()&&(f.id5.enabled=!1),h()},3e3)):h()}function h(){var e=new(a.XDomainRequest?XDomainRequest:XMLHttpRequest),t=f.json;e.overrideMimeType&&e.overrideMimeType("application/json"),e.open("GET",t,!0),a.XDomainRequest?(e.onload=function(){y(r=JSON.parse(e.responseText))},e.onerror=function(){console.log("ADM Pixel Error: Cannot get JSON")}):e.onreadystatechange=function(){4==e.readyState&&"200"==e.status&&y(r=JSON.parse(e.responseText))},setTimeout(0)}function y(e){for(var t,n=e.pixels,a=[{id:f.pixid,bid:e.bid}],r=n.length-1;0<=r;r--)f.processRules(n[r])&&(n[r].custom_data&&n[r].custom_data.length&&f.customData&&f.customData.length&&Object.keys(f.customData[0]).length?(t=b(n[r],f.customData[0]),v([n[r]],t)):a.push(n[r]));return v(a)}function v(e,t){null!=e.id&&(e=[e]);for(var n,a,r,o,i=[],s=[],u=0;u<e.length;u++)i[u]=e[u].id,s[u]=e[u].bid;!function(e,t){var n,a="pixel",r="id";f.id5.enabled&&(n=f.id5.info.getUserId(),a="pixel_id5",r="segment");var a=f.pixurl+"/"+a+"?",r=r+"="+e.toString(),o=document.getElementsByTagName("head")[0],i=document.createElement("script");t&&1===e.length&&"&"!=(e="&"+t)&&(r+=e);f.id5.enabled&&(r+="&uid="+n);{if(r+="&t=js",i.type="text/javascript",i.src=a+r,i.async=!0,!D(i.src))return o.appendChild(i);console.log("Pixel already fired")}}(i,t);for(var c=s,l=t,t="https://segment.prod.bidr.io",p=(t=null!=f.pixburl?f.pixburl:t)+"/associate-segment?buzz_key=moot&value=&",d=0;d<c.length;d++)null!=c[d]&&(n="segment_key=moot-"+c[d],a=document.getElementsByTagName("head")[0],r=document.createElement("script"),l&&1===c.length&&"&"!=(o="&"+l)&&(n+=o),r.type="text/javascript",r.src=p+n,r.async=!0,D(r.src)?console.log("Pixel already fired"):a.appendChild(r))}function b(e,t){var n,a=[];for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&-1<e.custom_data.indexOf(n))if("[object Array]"===Object.prototype.toString.call(t[n])){var r=t[n].join("+");if(e.rules)for(var o=0;o<e.rules.length;o++){var i=e.rules[o];-1<t[n].indexOf(i.values.value)&&(r=i.values.value)}a.push(n+"="+encodeURIComponent(r))}else a.push(n+"="+encodeURIComponent(t[n]));return a.join("&")}function D(e){for(var t=document.getElementsByTagName("script"),n=t.length;n--;)if(t[n].src==e)return 1}function _(e,t){for(var n=t.length-1;0<=n;n--)if(t[n].p===e)return t[n]}f.id5={enabled:!0===f.id5,info:null},f.id5.enabled&&(o=document.getElementsByTagName("head")[0],(n=document.createElement("script")).type="text/javascript",n.src="https://cdn.id5-sync.com/api/1.0/id5-api.js",n.async=!1,n.defer=!1,o.appendChild(n)),"complete"===document.readyState?g():document.onreadystatechange=f.getLocationHref=f.processRules=function(e){var t,n,a=d,r=[];if(!e||!e.rules||"[object Array]"!==Object.prototype.toString.call(e.rules))return!1;var o=e.rules;o.length<=2&&function(e){for(var t=e.length-1;0<=t;t--)if("frequency"!==e[t].type)return;return 1}(o)&&(a=m);for(var i=o.length-1;0<=i;i--)if(t=o[i].values,n=o[i].type,-1!==c.indexOf(n))switch(o[i].type){case"url_contains":r.push(f.urlContains(t));break;case"url_match":r.push(f.urlMatch(t));break;case"url_does_not_contain":r.push(!f.urlContains(t));break;case"url_does_not_match":r.push(!f.urlMatch(t));break;case"frequency":r.push(f.frequency(t,a));break;case"anniversary":r.push(f.anniversary(t));break;case"custom_data":r.push(f.customDataRule(t));break;case"time_spent":r.push(f.timeSpent(t,e))}return r.every(},f.urlContains=function(e){if(e&&"[object Array]"===Object.prototype.toString.call(e))for(var t=f.getLocationHref(),n=e.length-1;0<=n;n--)if(-1<t.search(new RegExp(e[n].replace(s,"\\$&"),"i")))return!0;return!1},f.urlMatch=function(e){if(e&&"[object Array]"===Object.prototype.toString.call(e))for(var t=f.getLocationHref(),n=e.length-1;0<=n;n--)if(new RegExp("^"+e[n].replace(s,"\\$&")+"$","i").test(t))return!0;return!1},f.frequency=function(e,t){var n;return!(!e||!Object.prototype.hasOwnProperty.call(e,"operator"))&&(n=e.operator,e=e.value,u[n](+e,+t))},f.anniversary=function(e){var t=(new Date).getMonth();return parseInt(e)===t},f.customDataRule=function(e){if(e&&Object.prototype.hasOwnProperty.call(e,"operator")&&f.customData&&f.customData.length&&Object.keys(f.customData[0]).length){var t=e.operator,n=e.key,e=e.value,n=f.customData[0][n];if("[object Array]"===Object.prototype.toString.call(n)&&-1!==n.indexOf(e)||!isNaN(e)&&!isNaN(n)&&u[t](+e,+n)||isNaN(e)&&u[t](e,n))return!0}return!1},f.timeSpent=function(e,t){var n,a;return e&&!isNaN(e.time_spent)&&(n=e.time_spent,"minutes"===e.timeUnit&&(n*=60),n*=1e3,a=[],t.custom_data&&t.customData&&t.customData.length&&f.customData&&f.customData.length&&Object.keys(f.customData[0]).length&&(a=b(t,f.customData[0])),setTimeout(n)),!1},f.track=function(e,t){var n;if(f.customData=a.admCustomData,e===r.id)return v([r]);f.customData&&f.customData[0]&&Object.keys(f.customData[0]).length&&(n=b(function(e){var t;if(e===r.id)return r;for(var n=0;n<r.pixels.length;n++)if(r.pixels[n].id===e){t=r.pixels[n];break}return t}(e),f.customData[0]));v([{id:e,bid:t}],n)},f.__pt__=y,l.lv=p.lv=[i],e.setItem("adm.usrmeta",JSON.stringify(t))}(window);