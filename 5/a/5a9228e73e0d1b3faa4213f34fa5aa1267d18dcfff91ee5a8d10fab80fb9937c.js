!this,function(){"use strict";var noop=function(){},undefinedType="undefined",isIE=typeof window!==undefinedType&&typeof window.navigator!==undefinedType&&/Trident\/|MSIE /.test(window.navigator.userAgent),logMethods=["trace","debug","info","warn","error"];ction defaultMethodFactory(methodName,level,loggerName){return methodName)||apply(this,arguments)}function Logger(name,defaultLevel,initialLevel){var currentLevel,self=this,storageKey="loglevel";ame&&(storageKey+=":"+name),self.name=name,self.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},self.methodFactory=initialLevel||defaultMethodFactory,self.getLevel=function(){return currentLevel},self.setLevel=function(level,persist){if("string"==typeof level&&void 0!==self.levels[level.toUpperCase()]&&(level=self.levels[level.toUpperCase()]),!("number"==typeof level&&0<=level&&level<=self.levels.SILENT))throw"log.setLevel() called with invalid level: "+level;if(currentLevel=level,!1!==persist&&function(levelNum){var levelName=(logMethods[levelNum]||"silent").toUpperCase();if(typeof window!==undefinedType){try{return window.localStorage[storageKey]=levelName}catch(ignore){}try{window.document.cookie=encodeURIComponent(storageKey)+"="+levelName+";"}catch(ignore){}}}(level),replaceLoggingMethods.call(self,level,name),typeof console===undefinedType&&level<self.levels.SILENT)return"No console available for logging"},self.setDefaultLevel=self.enableAll=function(persist){self.setLevel(self.levels.TRACE,persist)},self.disableAll=initialLevel=getPersistedLevel();null==initialLevel&&(initialLevel=null==defaultLevel?"WARN":defaultLevel),self.setLevel(initialLevel,!1)}var defaultLogger=new Logger,_loggersByName={};defaultLogger.getLogger=function(name){if("string"!=typeof name||""===name)throw new TypeError("You must supply a name when creating a logger.");return _loggersByName[name]||(_loggersByName[name]=new Logger(name,defaultLogger.getLevel(),defaultLogger.methodFactory))};var _log=typeof window!==undefinedType?window.log:void 0;return defaultLogger.noConflict=defaultLogger.getLoggers=function(){return _loggersByName},defaultLogger}),this,function(){var once="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,SymbolProto="undefined"!=typeof Symbol?Symbol.prototype:null,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,indexBy="undefined"!=typeof ArrayBuffer,reduce="undefined"!=typeof DataView,groupBy=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,nativeIsView=indexBy&&ArrayBuffer.isView,_isNaN=isNaN,_isFinite=isFinite,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1;sString=tagTester("String"),isNumber=tagTester("Number"),isDate=tagTester("Date"),isRegExp=tagTester("RegExp"),isError=tagTester("Error"),isSymbol=tagTester("Symbol"),isArrayBuffer=tagTester("ArrayBuffer"),lastIndexOf=tagTester("Function"),findLastIndex=once.document&&once.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof findLastIndex&&(lastIndexOf=;var isFunction$1=lastIndexOf,reduceRight=tagTester("Object"),hasStringTagBug=reduce&&reduceRight(new DataView(new ArrayBuffer(8))),without="undefined"!=typeof Map&&reduceRight(new Map),invoke=tagTester("DataView");var isDataView$1=hasStringTagBug?invoke,isArray=groupBy||tagTester("Array");ar isArguments=tagTester("Arguments");!);var isArguments$1=isArguments;getByteLength=shallowProperty("byteLength"),isBufferLike=createSizePropertyCheck(getByteLength),typedArrayPattern=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var isTypedArray$1=indexBy?constant(!1),getLength=shallowProperty("length");ERSION="1.13.3",_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value=function(){return this._wrapped},_$1.prototype.toString=var tagDataView="[object DataView]"; partition=["clear","delete"],countBy=["get","has","set"],omit=partition.concat("forEach",countBy),weakMapMethods=partition.concat(countBy),union=["add"].concat(partition,"forEach","has"),isMap=without?ie11fingerprint(omit):tagTester("Map"),isWeakMap=without?ie11fingerprint(weakMapMethods):tagTester("WeakMap"),isSet=without?ie11fingerprint(union):tagTester("Set"),isWeakSet=tagTester("WeakSet");extend=createAssigner(allKeys),extendOwn=createAssigner(keys),defaults=createAssigner(allKeys,!0);tion get(object,value,defaultValue){value=deepGet(object,toPath(value));return void 0===value?defaultValue:value}n noop(){}$1.toPath=toPath$1,_$1.iteratee=iteratee;var now=Date.now||ar _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},_escape=createEscaper(_),_unescape=createEscaper(invert(_)),templateSettings=_$1.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g;ar bareIdentifier=/^\s*(\w|\$)+\s*$/;var idCounter=0;ar partial=restArguments(;partial.placeholder=_$1;var bind=restArguments(,isArrayLike=createSizePropertyCheck(getLength);ar bindAll=restArguments(;var delay=restArguments(,defer=partial(delay,_$1,1);ce=partial(before,2);r findIndex=createPredicateIndexFinder(1),findLastIndex=createPredicateIndexFinder(-1);r indexOf=createIndexFinder(1,findIndex,sortedIndex),lastIndexOf=createIndexFinder(-1,findLastIndex);ce=createReduce(1),reduceRight=createReduce(-1);ke=restArguments(;r reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;upBy=group(,indexBy=group(,countBy=group(,partition=group(!0);ar pick=restArguments(,omit=restArguments(; difference=restArguments(,without=restArguments(function(array,otherArrays){return difference(array,otherArrays)});nion=restArguments(;=restArguments(unzip);ch(["pop","push","reverse","shift","sort","splice","unshift"],,each(["concat","join","slice"],;_=mixin({__proto__:null,VERSION:"1.13.3",restArguments:restArguments,isObject:isObject,isNull:isUndefined:isUndefined,isBoolean:isBoolean,isElement:isString:isString,isNumber:isNumber,isDate:isDate,isRegExp:isRegExp,isError:isError,isSymbol:isSymbol,isArrayBuffer:isArrayBuffer,isDataView:isDataView$1,isArray:isArray,isFunction:isFunction$1,isArguments:isArguments$1,isFinite:isNaN:isNaN$1,isTypedArray:isTypedArray$1,isEmpty:isMatch:isMatch,isEqual:function(a,b){return eq(a,b)},isMap:isMap,isWeakMap:isWeakMap,isSet:isSet,isWeakSet:isWeakSet,keys:keys,allKeys:allKeys,values:values,pairs:invert:invert,functions:functions,methods:functions,extend:extend,extendOwn:extendOwn,assign:extendOwn,defaults:defaults,create:clone:tap:get:get,has:mapObject:identity:identity,constant:constant,noop:noop,toPath:toPath$1,property:property,propertyOf:matcher:matcher,matches:matcher,times:random:random,now:now,escape:_escape,unescape:_unescape,templateSettings:templateSettings,template:function(text,template,matcher){!template&&matcher&&(template=matcher),template=defaults({},template,_$1.templateSettings);var matcher=RegExp([(template.escape||noMatch).source,(template.interpolate||noMatch).source,(template.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,,source+="';\n";var render,argument=template.variable;if(argument){if(!bareIdentifier.test(argument))throw new Error("variable is not a bare identifier: "+argument)}else source="with(obj||{}){\n"+source+"}\n",argument="obj";source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(argument,"_",source)}catch(e){throw e.source=source,e}return(template=.source="function("+argument+"){\n"+source+"}",template},result:uniqueId:chain:iteratee:iteratee,partial:partial,bind:bind,bindAll:bindAll,memoize:delay:delay,defer:defer,throttle:debounce:wrap:negate:negate,compose:after:before:before,once:once,findKey:findKey,findIndex:findIndex,findLastIndex:findLastIndex,sortedIndex:sortedIndex,indexOf:indexOf,lastIndexOf:lastIndexOf,find:find,detect:find,findWhere:function(obj,attrs){return find(obj,matcher(attrs))},each:each,forEach:each,map:map,collect:map,reduce:reduce,foldl:reduce,inject:reduce,reduceRight:reduceRight,foldr:reduceRight,filter:filter,select:filter,reject:every:every,all:every,some:some,any:some,contains:contains,includes:contains,include:contains,invoke:invoke,pluck:pluck,where:max:max,min:shuffle:sample:sample,sortBy:groupBy:groupBy,indexBy:indexBy,countBy:countBy,partition:partition,toArray:toArray,size:pick:pick,omit:omit,first:first,head:first,take:first,initial:initial,last:rest:rest,tail:rest,drop:rest,compact:flatten:without:without,uniq:uniq,unique:uniq,union:union,intersection:difference:difference,unzip:unzip,transpose:unzip,zip:_,object:range:chunk:mixin:mixin,default:_$1});return _._=_}),,function($){"use strict";r cX,cY,_cfg={interval:100,sensitivity:6,timeout:0},INSTANCE_COUNT=0,compare=$.fn.hoverIntent=function(handlerIn,handleHover,selector){var instanceId=INSTANCE_COUNT++,cfg=$.extend({},_cfg);$.isPlainObject(handlerIn)?(cfg=$.extend(cfg,handlerIn),isFunction(cfg.out)||(cfg.out=cfg.over)):cfg=isFunction(handleHover)?$.extend(cfg,{over:handlerIn,out:handleHover,selector:selector}):$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handleHover});handleHover=function(e){var ev=$.extend({},e),$el=$(this),mousemove=$el.data("hoverIntent");mousemove||$el.data("hoverIntent",mousemove={});var state=mousemove[instanceId];state||(mousemove[instanceId]=state={id:instanceId}),state.timeoutId&&(state.timeoutId=clearTimeout(state.timeoutId));mousemove=state.event="mousemove.hoverIntent.hoverIntent"+instanceId;"mouseenter"===e.type?state.isActive||(state.pX=ev.pageX,state.pY=ev.pageY,$el.off(mousemove,track).on(mousemove,track),state.timeoutId=setTimeout(cfg.interval)):state.isActive&&($el.off(mousemove,track),state.timeoutId=setTimeout(cfg.timeout))};return this.on({"mouseenter.hoverIntent":handleHover,"mouseleave.hoverIntent":handleHover},cfg.selector)}}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;ction"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=,"function"!=typeof JSON.parse&&(JSON.parse=}(),function($){"use strict";$.ui=$.ui||{};$.ui.version="1.13.1";var orig,widgetUuid=0,widgetHasOwnProperty=Array.prototype.hasOwnProperty,widgetSlice=Array.prototype.slice;$.cleanData=(orig=$.cleanData,,$.widget=$.widget.extend=$.widget.bridge=$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:_getCreateOptions:_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:_destroy:$.noop,widget:function(){return this.element},option:_setOptions:_setOption:_setOptionClasses:_setOptionDisabled:enable:function(){return this._setOptions({disabled:!1})},disable:_classes:_untrackClassesElement:_removeClass:function(element,keys,extra){return this._toggleClass(element,keys,extra,!1)},_addClass:_toggleClass:_on:_off:_delay:_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){this._addClass($(event.currentTarget),null,"ui-state-hover")},mouseleave:function(event){this._removeClass($(event.currentTarget),null,"ui-state-hover")}})},_focusable:_trigger:,$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){var hasOptions;"string"==typeof options&&(options={effect:options});var effectName=options?!0!==options&&"number"!=typeof options&&options.effect||defaultEffect:method;"number"==typeof(options=options||{})?options={duration:options}:!0===options&&(options={}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(}});var cachedScrollbarWidth,max,abs,rhorizontal,rvertical,roffset,rposition,rpercent,_position;$.widget;=Math.max,abs=Math.abs,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position,$.position={scrollbarWidth:getScrollInfo:getWithinInfo:,$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,raw,target="string"==typeof(options=$.extend({},options)).of?$(document).find(options.of):$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={},dimensions=9===(raw=(dimensions=target)[0]).nodeType?{width:dimensions.width(),height:dimensions.height(),offset:{top:0,left:0}}:isWindow(raw)?{width:dimensions.width(),height:dimensions.height(),offset:{top:dimensions.scrollTop(),left:dimensions.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:dimensions.outerWidth(),height:dimensions.outerHeight(),offset:dimensions.offset()};return target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],,1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(},$.ui.position={fit:{left:top:,flip:{left:function(position,data){var atOffset=data.within,newOverRight=atOffset.offset.left+atOffset.scrollLeft,outerWidth=atOffset.width,newOverLeft=atOffset.isWindow?atOffset.scrollLeft:atOffset.offset.left,offset=position.left-data.collisionPosition.marginLeft,overLeft=offset-newOverLeft,overRight=offset+data.collisionWidth-outerWidth-newOverLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];overLeft<0?((newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-newOverRight)<0||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset):0<overRight&&(0<(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-newOverLeft)||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset)},top:,flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:};$.ui.position,$.extend($.expr.pseudos,{data:$.expr.createPseudo?$.expr.createPseudo(:),$.fn.extend({disableSelection:(eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown",,enableSelection:);var eventType,colors,jQuery=$,class2type={},toString=class2type.toString,rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:,{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:,{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:,{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:,{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:],color=jQuery.Color=spaces={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},propTypes={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},support=color.support={},effect=jQuery("<p>")[0],each=jQuery.each;ct.style.cssText="background-color:rgba(1,1,1,.5)",support.rgba=-1<effect.style.backgroundColor.indexOf("rgba"),each(spaces,,jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),,color.fn=jQuery.extend(color.prototype,{parse:is:_space:transition:blend:toRgbaString:toHslaString:toHexString:toString:),color.fn.parse.prototype=color.fn,spaces.hsla.to=spaces.hsla.from=each(spaces,,color.hook=color.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),jQuery.cssHooks.borderColor={expand:,colors=jQuery.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};var baseEasings;$.effects={effect:{}},function(){var orig,classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],,$.fn.addBack||($.fn.addBack=,$.effects.animateClass=$.fn.extend({addClass:(orig=$.fn.addClass,,removeClass:$.fn.removeClass),toggleClass:$.fn.toggleClass),switchClass:)}(),function(){var orig;function _normalizeArguments(effect,options,speed,callback){return $.isPlainObject(effect)&&(effect=(options=effect).effect),effect={effect:effect},null==options&&(options={}),"function"==typeof options&&(callback=options,speed=null,options={}),"number"!=typeof options&&!$.fx.speeds[options]||(callback=speed,speed=options,options={}),"function"==typeof speed&&(callback=speed,speed=null),options&&$.extend(effect,options),speed=speed||options.duration,effect.duration=$.fx.off?0:"number"==typeof speed?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default,effect.complete=callback||options.complete,effect}expr&&$.expr.pseudos&&$.expr.pseudos.animated&&($.expr.pseudos.animated=(orig=$.expr.pseudos.animated,),!1!==$.uiBackCompat&&$.extend($.effects,{save:restore:setMode:createWrapper:removeWrapper:),$.extend($.effects,{version:"1.13.1",define:scaledDimensions:clipToBox:unshift:saveStyle:restoreStyle:mode:getBaseline:createPlaceholder:removePlaceholder:cleanUp:setTransition:),$.fn.extend({effect:function(){function prefilter(next){var el=$(this),normalizedMode=$.effects.mode(el,mode)||defaultMode;el.data("ui-effects-animated",!0),modes.push(normalizedMode),defaultMode&&("show"===normalizedMode||normalizedMode===defaultMode&&"hide"===normalizedMode)&&el.show(),defaultMode&&"none"===normalizedMode||$.effects.saveStyle(el),"function"==typeof next&&next()}var args=_normalizeArguments.apply(this,arguments),effectMethod=$.effects.effect[args.effect],defaultMode=effectMethod.mode,queue=args.queue,queueName=queue||"fx",complete=args.complete,mode=args.mode,modes=[];return $.fx.off||!effectMethod?mode?this[mode](args.duration,complete):this.each(:!1===queue?this.each(prefilter).each(run):this.queue(queueName,prefilter).queue(queueName,run);function run(next){var elem=$(this);rgs.mode=modes.shift(),!1===$.uiBackCompat||defaultMode?"none"===args.mode?(elem[mode](),done()):effectMethod.call(elem[0],args,:(elem.is(":hidden")?"hide"===mode:"show"===mode)?(elem[mode](),done()):effectMethod.call(elem[0],args,done)}},show:function(orig){return function(args){if(standardAnimationOption(args))return orig.apply(this,arguments);args=_normalizeArguments.apply(this,arguments);return args.mode="show",this.effect.call(this,args)}}($.fn.show),hide:function(orig){return ($.fn.hide),toggle:function(orig){return ($.fn.toggle),cssUnit:cssClip:transfer:),$.fx.step.clip=(),baseEasings={},$.each(["Quad","Cubic","Quart","Quint","Expo"],,$.extend(baseEasings,{Sine:Circ:Elastic:Back:Bounce:),$.each(baseEasings,;effect=$.effects,$.effects.define("blind","hide",,$.effects.define("bounce",,$.effects.define("clip","hide",,$.effects.define("drop","hide",,$.effects.define("explode","hide",,$.effects.define("fade","toggle",,$.effects.define("fold","hide",,$.effects.define("highlight","show",,$.effects.define("size",,$.effects.define("scale",,$.effects.define("puff","hide",,$.effects.define("pulsate","show",,$.effects.define("shake",,$.effects.define("slide","show",;!1!==$.uiBackCompat&&(effect=$.effects.define("transfer",);$.ui.focusable=$.extend($.expr.pseudos,{focusable:);var rcssescape,fcssescape;$.ui.focusable,$.fn._form=$.ui.formResetMixin={_formResetHandler:_bindFormResetHandler:_unbindFormResetHandler:;$.expr.pseudos||($.expr.pseudos=$.expr[":"]),$.uniqueSort||($.uniqueSort=$.unique),$.escapeSelector||(rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,fcssescape=},$.escapeSelecto}),$.fn.even&&$.fn.odd||$.fn.extend({even:function(){return this.filter(function(i){return i%2==0})},od}});var uuid;$.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},$.fn.label},$.fn.scrollParen},$.extend($.expr.pseudos,{tabbabl}}),$.fn.extend({uniqueId:(uuid=}),removeUniqueI}}),$.widget("ui.accordion",{version:"1.13.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",heade},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_creat},_getCreateEventDat},_createIcon},_destroyIcon},_destro},_setOptio},_setOptionDisable},_keydow},_panelKeyDow},refres},_processPanel},_refres},_activat},_findActiv},_setupEvent},_eventHandle},_toggl},_animat},_toggleComplet}}),$.ui.safeActiveElemen},$.widget("ui.menu",{version:"1.13.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_creat},_activateIte},_destro},_keydow},_activat},refres},_itemRol},_setOptio},_setOptionDisable},focu},_scrollIntoVie},blu},_startOpenin},_ope},collapseAl},_clos},_closeOnDocumentClic},_isDivide},collaps},expan},next:function(event){this._move("next","first",event)},previou},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastIte},_menuItem},_mov},nextPag},previousPag},_hasScrol},selec},_filterMenuItem}});$.widget("ui.autocomplete",{version:"1.13.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_creat},_destro},_setOptio},_isEventTargetInWidge},_closeOnClickOutsid},_appendT},_initSourc},_searchTimeou},searc},_searc},_respons},__respons},clos},_clos},_chang},_normaliz},_sugges},_resizeMen},_renderMen},_renderItemDat},_renderIte},_mov},widge},_valu},_keyEven},_isContentEditabl}}),$.extend($.ui.autocomplete,{escapeRege},filte}}),$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",result}}},__respons}});$.ui.autocomplete;var controlgroupCornerRegex=/ui-corner-([a-z]){2,6}/g;$.widget("ui.controlgroup",{version:"1.13.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhanc},_destro},_initWidget},_callChildMetho},_updateCornerClas},_buildSimpleOption},_spinnerOption},_buttonOptions:function(position){return this._buildSimpleOptions(position,"ui-button")},_checkboxradioOption},_selectmenuOption},_resolveClassesValue},_setOptio},refresh:function(){var children,that=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),children=this.childWidgets,this.options.onlyVisible&&(children=children.filter(":visible")),children.length&&($.each(["first","last"}),this._callChildMethod("refresh"))}});$.widget("ui.checkboxradio",[$.ui.formResetMixin,{version:"1.13.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOption},_creat},_readTyp},_enhanc},widget:function(){return this.label},_getRadioGrou},_toggleClasse},_destro},_setOptio},_updateIco},_updateLabe},refres}}]);$.ui.checkboxradio;$.widget("ui.button",{version:"1.13.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOption},_creat},_enhanc},_updateToolti},_updateIco},_destro},_attachIconSpace:function(iconPosition){this.icon[/^(?:end|bottom)/.test(iconPosition)?"before":"after"](this.iconSpace)},_attachIco},_setOption},_setOptio},refres}}),!1!==$.uiBackCompat&&($.widget("ui.button",$.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_creat},_setOptio}}),$.fn.button=function(orig){return function(options){var isMethodCall="string"==typeof options,args=Array.prototype.slice.call(arguments,1),returnValue=this;return isMethodCall?this.length||"instance"!==options?this.each(function(){var instance=$(this).attr("type"),methodValue="checkbox"!==instance&&"radio"!==instance?"button":"checkboxradio",instance=$.data(this,"ui-"+methodValue);return"instance"===options?(returnValue=instance,!1):instance?"function"!=typeof instance[options]||"_"===options.charAt(0)?$.error("no such method '"+options+"' for button widget instance"):(methodValue=instance[options].apply(instance,args))!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0:$.error("cannot call methods on button prior to initialization; attempted to call method '"+options+"'")}):returnValue=void 0:(args.length&&(options=$.widget.extend.apply(null,[options].concat(args))),this.eac})),returnValue}}($.fn.button),$.fn.buttonse});var datepicker_instActive;$.ui.buttoextend($.ui,{datepicker:{version:"1.13.1"}}),$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefault},_attachDatepicke},_newIns},_connectDatepicke},_attachment},_autoSiz},_inlineDatepicke},_dialogDatepicke},_destroyDatepicke},_enableDatepicke},_disableDatepicke},_isDisabledDatepicke},_getIns},_optionDatepicke},_changeDatepicke},_refreshDatepicke},_setDateDatepicke},_getDateDatepicke},_doKeyDow},_doKeyPres},_doKeyU},_showDatepicker:function(input){var isFixed,showAnim,duration,inst;"input"!==(input=input.target||input).nodeName.toLowerCase()&&(input=$("input",input.parentNode)[0]),$.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input||(inst=$.datepicker._getInst(input),$.datepicker._curInst&&$.datepicker._curInst!==inst&&($.datepicker._curInst.dpDiv.stop(!0,!0),inst&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0])),!1!==(showAnim=(duration=$.datepicker._get(inst,"beforeShow"))?duration.apply(input,[input,inst]):{})&&(datepicker_extendRemove(inst.settings,showAnim),inst.lastVal=null,$.datepicker._lastInput=input,$.datepicker._setDateFromField(inst),$.datepicker._inDialog&&(input.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(input),$.datepicker._pos[1]+=input.offsetHeight),isFixed=!1,$(input).parents().eac}),duration={left:$.datepicker._pos[0],top:$.datepicker._pos[1]},$.datepicker._pos=null,inst.dpDiv.empty(),inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(inst),duration=$.datepicker._checkOffset(inst,duration,isFixed),inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:duration.left+"px",top:duration.top+"px"}),inst.inline||(showAnim=$.datepicker._get(inst,"showAnim"),duration=$.datepicker._get(inst,"duration"),inst.dpDiv.css("z-index}($(input))+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects.effect[showAnim]?inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration):inst.dpDiv[showAnim||"show"](showAnim?duration:null),$.datepicker._shouldFocusInput(inst)&&inst.input.trigger("focus"),$.datepicker._curInst=inst)))},_updateDatepicke},_shouldFocusInpu},_checkOffse},_findPo},_hideDatepicke},_tidyDialo},_checkExternalClic},_adjustDat},_gotoToda},_selectMonthYea},_selectDa},_clearDat},_selectDat},_updateAlternat},noWeekend},iso8601Wee},parseDat},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDat},_possibleChar},_ge},_setDateFromFiel},_getDefaultDat},_determineDate:function(inst,newDate,defaultDate){newDate=null==newDate||""===newDate?defaultDate:"string"==typeof newDat}(newDate):"number"==typeof newDate?isNaN(newDate)?defaultDat}(newDate):new Date(newDate.getTime());return(newDate=newDate&&"Invalid Date"===newDate.toString()?defaultDate:newDate)&&(newDate.setHours(0),newDate.setMinutes(0),newDate.setSeconds(0),newDate.setMilliseconds(0)),this._daylightSavingAdjust(newDate)},_daylightSavingAdjus},_setDat},_getDat},_attachHandler},_generateHTML:function(inst){var maxDraw,prev,next,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,calender,thead,day,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,currentText=new Date,today=this._daylightSavingAdjust(new Date(currentText.getFullYear(),currentText.getMonth(),currentText.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),gotoDate=this._get(inst,"hideIfNoPrevNext"),buttonPanel=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),controls=this._get(inst,"showCurrentAtPos"),currentText=this._get(inst,"stepMonths"),isMultiMonth=1!==numMonths[0]||1!==numMonths[1],currentDate=this._daylightSavingAdjust(inst.currentDay?new Date(inst.currentYear,inst.currentMonth,inst.currentDay):new Date(9999,9,9)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-controls,drawYear=inst.drawYear;if(drawMonth<0&&(drawMonth+=12,drawYear--),maxDate)for(maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate())),maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw;)--drawMonth<0&&(drawMonth=11,drawYear--);for(inst.drawMonth=drawMonth,inst.drawYear=drawYear,controls=this._get(inst,"prevText"),controls=buttonPanel?this.formatDate(controls,this._daylightSavingAdjust(new Date(drawYear,drawMonth-currentText,1)),this._getFormatConfig(inst)):controls,prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?$("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:controls}).append($("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")).text(controls))[0].outerHTML:gotoDate?"":$("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:controls}).append($("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")).text(controls))[0].outerHTML,controls=this._get(inst,"nextText"),controls=buttonPanel?this.formatDate(controls,this._daylightSavingAdjust(new Date(drawYear,drawMonth+currentText,1)),this._getFormatConfig(inst)):controls,next=this._canAdjustMonth(inst,1,drawYear,drawMonth)?$("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:controls}).append($("<span>").addClass("ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")).text(controls))[0].outerHTML:gotoDate?"":$("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:controls}).append($("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")).text(controls))[0].outerHTML,currentText=this._get(inst,"currentText"),gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today,currentText=buttonPanel?this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)):currentText,controls="",inst.inline||(controls=$("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(inst,"closeText"))[0].outerHTML),buttonPanel="",showButtonPanel&&(buttonPanel=$("<div class='ui-datepicker-buttonpane ui-widget-content'>").append(isRTL?controls:"").append(this._isInRange(inst,gotoDate)?$("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(currentText):"").append(isRTL?"":controls)[0].outerHTML),firstDay=parseInt(this._get(inst,"firstDay"),10),firstDay=isNaN(firstDay)?0:firstDay,showWeek=this._get(inst,"showWeek"),dayNames=this._get(inst,"dayNames"),dayNamesMin=this._get(inst,"dayNamesMin"),monthNames=this._get(inst,"monthNames"),monthNamesShort=this._get(inst,"monthNamesShort"),beforeShowDay=this._get(inst,"beforeShowDay"),showOtherMonths=this._get(inst,"showOtherMonths"),selectOtherMonths=this._get(inst,"selectOtherMonths"),defaultDate=this._getDefaultDate(inst),html="",row=0;row<numMonths[0];row++){for(group="",this.maxRows=4,col=0;col<numMonths[1];col++){if(selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),leadDays=" ui-corner-all",calender="",isMultiMonth){if(calender+="<div class='ui-datepicker-group",1<numMonths[1])switch(col){case 0:calender+=" ui-datepicker-group-first",leadDays=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last",leadDays=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle",leadDays=""}calender+="'>"}for(calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+leadDays+"'>"+(/all|left/.test(leadDays)&&0===row?isRTL?next:prev:"")+(/all|right/.test(leadDays)&&0===row?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,0<row||0<col,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead><tr>",thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"",dow=0;dow<7;dow++)thead+="<th scope='col'"+(5<=(dow+firstDay+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+dayNames[day=(dow+firstDay)%7]+"'>"+dayNamesMin[day]+"</span></th>";for(calender+=thead+"</tr></thead><tbody>",curRows=this._getDaysInMonth(drawYear,drawMonth),drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth&&(inst.selectedDay=Math.min(inst.selectedDay,curRows)),leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,curRows=Math.ceil((leadDays+curRows)/7),numRows=isMultiMonth&&this.maxRows>curRows?this.maxRows:curRows,this.maxRows=numRows,printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays)),dRow=0;dRow<numRows;dRow++){for(calender+="<tr>",tbody=showWeek?"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>":"",dow=0;dow<7;dow++)daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[!0,""],unselectable=(otherMonth=printDate.getMonth()!==drawMonth)&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&maxDate<printDate,tbody+="<td class='"+(5<=(dow+firstDay+6)%7?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+(otherMonth&&!showOtherMonths||!daySettings[2]?"":" title='"+daySettings[2].replace(/'/g,"&#39;")+"'")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#' aria-current='"+(printDate.getTime()===currentDate.getTime()?"true":"false")+"' data-date='"+printDate.getDate()+"'>"+printDate.getDate()+"</a>")+"</td>",printDate.setDate(printDate.getDate()+1),printDate=this._daylightSavingAdjust(printDate);calender+=tbody+"</tr>"}11<++drawMonth&&(drawMonth=0,drawYear++),group+=calender+="</tbody></table>"+(isMultiMonth?"</div>"+(0<numMonths[0]&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}html+=group}return html+=buttonPanel,inst._keyEvent=!1,html},_generateMonthYearHeade},_adjustInstDat},_restrictMinMa},_notifyChang},_getNumberOfMonth},_getMinMaxDat},_getDaysInMont},_getFirstDayOfMont},_canAdjustMont},_isInRang},_getFormatConfi},_formatDat}}),$.fn.datepicke},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.13.1";$.datepicker,$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var mouseHandled=!1;$(document).on("mouseup",function(){mouseHandled=!1});$.widget("ui.mouse",{version:"1.13.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseIni},_mouseDestro},_mouseDow},_mouseMov},_mouseU},_mouseDistanceMe},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCaptur}}),$.ui.plugin={ad},cal}},$.ui.safeBlu};$.widget("ui.draggable",$.ui.mouse,{version:"1.13.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_creat},_setOptio},_destro},_mouseCaptur},_blockFrame},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElemen},_mouseStar},_refreshOffset},_mouseDra},_mouseSto},_mouseU},cance},_getHandl},_setHandleClassNam},_removeHandleClassNam},_createHelpe},_setPositionRelativ},_adjustOffsetFromHelpe},_isRootNod},_getParentOffse},_getRelativeOffse},_cacheMargin},_cacheHelperProportion},_setContainmen},_convertPositionT},_generatePositio},_clea},_trigge},plugins:{},_uiHas}}),$.ui.plugin.add("draggable","connectToSortable",{star},sto},dra}}),$.ui.plugin.add("draggable","cursor",{star},sto}}),$.ui.plugin.add("draggable","opacity",{start:function(event,t,o){t=$(t.helper),o=o.options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui,o){o=o.options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{star},dra}}),$.ui.plugin.add("draggable","snap",{star},dra}}),$.ui.plugin.add("draggable","stack",{star}}),$.ui.plugin.add("draggable","zIndex",{star},sto}});$.ui.draggable;$.widget("ui.resizable",$.ui.mouse,{version:"1.13.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_nu},_isNumbe},_hasScrol},_creat},_destro},_setOptio},_setupHandle},_removeHandle},_mouseCaptur},_mouseStar},_mouseDra},_mouseStop:function(event){this.resizing=!1;var s,left,top,o=this.options;return this._helper&&(top=(s=(left=this._proportionallyResizeElements).length&&/textarea/i.test(left[0].nodeName))&&this._hasScroll(left[0],"left")?0:this.sizeDiff.height,left=s?0:this.sizeDiff.width,s={width:this.helper.width()-left,height:this.helper.height()-top},left=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,top=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,o.animate||this.element.css($.extend(s,{top:top,left:left})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!o.animate&&this._proportionallyResize()),$("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updatePrevPropertie},_applyChange},_updateVirtualBoundarie},_updateCach},_updateRati},_respectSiz},_getPaddingPlusBorderDimension},_proportionallyResiz},_renderProx},_change:{},},},},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},n}},_propagat},plugins:{},u}}),$.ui.plugin.add("resizable","animate",{sto}}),$.ui.plugin.add("resizable","containment",{star},resiz},sto}}),$.ui.plugin.add("resizable","alsoResize",{star},resiz},stop:function(){$(this).removeData("ui-resizable-alsoresize")}}),$.ui.plugin.add("resizable","ghost",{star},resiz},sto}}),$.ui.plugin.add("resizable","grid",{resiz}});$.ui.resizable;$.widget("ui.dialog",{version:"1.13.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",usin}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_creat},_ini},_appendT},_destro},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,clos},isOpe},moveToTop:function(){this._moveToTop()},_moveToTo},ope},_focusTabbabl},_restoreTabbableFocu},_keepFocu},_createWrappe},_createTitleba},_titl},_createButtonPan},_createButtons:function(){var that=this,buttons=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),$.isEmptyObject(buttons)||Array.isArray(buttons)&&!buttons.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):($.each(buttons,function(buttonOptions,props){var click;props="function"==typeof props?{click:props,text:buttonOptions}:props,props=$.extend({type:"button"},props),click=props.click,buttonOptions={icon:props.icon,iconPosition:props.iconPosition,showLabel:props.showLabel,icons:props.icons,text:props.text},delete props.click,delete props.icon,delete props.iconPosition,delete props.showLabel,delete props.icons,"boolean"==typeof props.text&&delete props.text,$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet).on("click})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggabl},_makeResizabl},_trackFocu},_makeFocusTarge},_untrackInstanc},_trackingInstance},_minHeigh},_positio},_setOption},_setOptio},_siz},_blockFrame},_unblockFrame},_allowInteractio},_createOverla},_destroyOverla}}),!1!==$.uiBackCompat&&$.widget("ui.dialog",$.ui.dialog,{options:{dialogClass:""},_createWrappe},_setOptio}});$.ui.dialo}$.widget("ui.droppable",{version:"1.13.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_creat},_addToManage},_splic},_destro},_setOptio},_activate:function(event){var draggable=$.ui.ddmanager.current;this._addActiveClass(),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivat},_over:function(event){var draggable=$.ui.ddmanager.current;draggable&&(draggable.currentItem||draggable.element)[0]!==this.element[0]&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this._addHoverClass(),this._trigger("over",event,this.ui(draggable)))},_ou},_dro},u},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClas}}),$.ui.intersec},!($.ui.ddmanager={current:null,droppables:{default:[]},prepareOffset},dro},dragStar},dra},dragSto}})!==$.uiBackCompat&&$.widget("ui.droppable",$.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClas}});$.ui.droppable,$.widget("ui.progressbar",{version:"1.13.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_creat},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},valu},_constrainedValu},_setOption},_setOptio},_setOptionDisable},_percentag},_refreshValu}}),$.widget("ui.selectable",$.ui.mouse,{version:"1.13.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_creat},_destro},_mouseStar},_mouseDra},_mouseSto}}),$.widget("ui.selectmenu",[$.ui.formResetMixin,{version:"1.13.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_creat},_drawButto},_drawMen},refres},_refreshMen},ope},_positio},clos},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonIte},_renderMen},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item)},_renderIte},_setTex},_mov},_getSelectedIte},_toggl},_setSelectio},_documentClick:{mousedow}},_buttonEvents:{mousedow},clic},keydow}},_selectFocusedIte},_selec},_setAri},_setOptio},_setOptionDisable},_appendTo:function(){var element=this.options.appendTo;return(element=element&&(element.jquery||element.nodeType?$(element):this.document.find(element).eq(0)))&&element[0]||(element=this.element.closest(".ui-front, dialog")),element.length||(element=this.document[0].body),element},_toggleAtt},_resizeButto},_resizeMen},_getCreateOption},_parseOption},_parseOptio},_destro}}]),$.widget("ui.slider",$.ui.mouse,{version:"1.13.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_creat},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandle},_createRang},_setupEvent},_destro},_mouseCaptur},_mouseStart:function(){return!0},_mouseDra},_mouseSto},_detectOrientatio},_normValueFromMous},_uiHas},_hasMultipleValue},_star},_slid},_sto},_chang},valu},value},_setOptio},_setOptionDisable},_valu},_value},_trimAlignValu},_calculateNewMa},_precision:function(){var precision=this._precisionOf(this.options.step);return null!==this.options.min&&(precision=Math.max(precision,this._precisionOf(this.options.min))),precision},_precisionOf:function(decimal){var str=decimal.toString(),decimal=str.indexOf(".");return-1===decimal?0:str.length-decimal-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRang},_refreshValu},_handleEvents:{keydow},keyu}}}),$.widget("ui.sortable",$.ui.mouse,{version:"1.13.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxi},_isFloatin},_creat},_setOptio},_setHandleClassNam},_destro},_mouseCaptur},_mouseStar},_scrol},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options;for(this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),o.scroll&&!1!==this._scroll(event)&&(this._refreshItemPositions(!0),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},i=this.items.length-1;0<=i;i--)if(item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item),intersection&&item.instance===this.currentContainer&&!(itemElement===this.currentItem[0]||this.placeholder[1===intersection?"next":"prev"]()[0]===itemElement||$.contains(this.placeholder[0],itemElement)||"semi-dynamic"===this.options.type&&$.contains(this.element[0],itemElement))){if(this.direction=1===intersection?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseSto},cance},serializ},toArra},_intersectsWit},_intersectsWithPointe},_intersectsWithSide},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return 0!=delta&&(0<delta?"down":"up")},_getDragHorizontalDirectio},refres},_connectWit},_getItemsAsjQuer},_removeCurrentsFromItem},_refreshItem},_refreshItemPosition},refreshPosition},_createPlaceholde},_createTrPlaceholde},_contactContainer},_createHelpe},_adjustOffsetFromHelper:function(obj){"string"==typeof obj&&(obj=obj.split(" ")),Array.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffse},_getRelativeOffse},_cacheMargin},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainmen},_convertPositionT},_generatePositio},_rearrang},_clea},_trigge},_uiHas}}}$.widget("ui.spinner",{version:"1.13.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_creat},_getCreateOption},_events:{keydow},keyup:"_stop",focu},blu},mousewhee},"mousedown .ui-spinner-button},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button},"mouseleave .ui-spinner-button":"_stop"},_enhanc},_dra},_keydow},_star},_repea},_spi},_incremen},_precisio},_precisionO},_adjustValu},_sto},_setOptio},_setOptionDisable},_setOptions:spinnerModifier(function(options){this._super(options)}),_pars},_forma},_refres},isVali},_valu},_destro},stepUp:spinnerModifier(function(steps){this._stepUp(steps)}),_stepU},stepDown:spinnerModifier(function(steps){this._stepDown(steps)}),_stepDow},pageUp:spinnerModifier(function(pages){this._stepUp((pages||1)*this.options.page)}),pageDown:spinnerModifie}),valu},widget:function(){return this.uiSpinner}}),!1!==$.uiBackCompat&&$.widget("ui.spinner",$.ui.spinner,{_enhanc},_uiSpinnerHtml:function(){return"<span>"},_buttonHtm}});var rhash;$.ui.spinner;$.widget("ui.tabs",{version:"1.13.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(rhash=/#.*$}),_creat},_initialActiv},_getCreateEventDat},_tabKeydow},_panelKeydow},_handlePageNa},_findNextTa},_focusNextTa},_setOptio},_sanitizeSelecto},refres},_refres},_processTab},_getLis},_createPane},_setOptionDisable},_setupEvent},_setupHeightStyl},_eventHandle},_toggl},_activat},_findActiv},_getInde},_destro},enabl},disabl},loa},_ajaxSetting},_getPanelForTa}}),!1!==$.uiBackCompat&&$.widget("ui.tabs",$.ui.tabs,{_processTab}});$.ui.tabs;$.widget("ui.tooltip",{version:"1.13.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},conten},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedB},_removeDescribedB},_creat},_setOptio},_setOptionDisable},_disabl},_enabl},ope},_updateConten},_ope},_registerCloseHandler},clos},_toolti},_fin},_removeToolti},_appendT},_destro}}),!1!==$.uiBackCompat&&$.widget("ui.tooltip",$.ui.tooltip,{options:{tooltipClass:null},_toolti}});$.ui.tooltip}),function(global,mod){"function"==typeof define&&define.amd?define(["module","exports"],mod):"undefined"!=typeof exports?mod(module,exports):(mod(mod={exports:{}},mod.exports),global.autosize=mod.exports)}(this,function(module,exports){"use strict";var keys,values,map="function"==typeof Map?new Map:(keys=[],values=[],{ha},ge},se},delet}}),createEven};try{new Event("test")}catch(e){createEven}}function assign(ta){var heightOffset,clientWidth,cachedHeight,pageResize,destroy,styl}function resize(){var overflows,docTop;0!==ta.scrollHeight&&(overflow}(ta),docTop=document.documentElement&&document.documentElement.scrollTop,ta.style.height="",ta.style.height=ta.scrollHeight+heightOffset+"px",clientWidth=ta.clientWidth,overflows.forEach(function(el){el.node.scrollTop=el.scrollTop}),docTop&&(document.documentElement.scrollTop=docTop)}ta&&ta.nodeName&&"TEXTAREA"===ta.nodeName&&!map.has(ta)&&(cachedHeight=clientWidth=heightOffset=null,pageResiz},destro}.bind(ta,{height:ta.style.height,resize:ta.style.resize,overflowY:ta.style.overflowY,overflowX:ta.style.overflowX,wordWrap:ta.style.wordWrap}),ta.addEventListener("autosize:destroy",destroy,!1),"onpropertychange"in ta&&"oninput"in ta&&ta.addEventListener("keyup",update,!1),window.addEventListener("resize",pageResize,!1),ta.addEventListener("input",update,!1),ta.addEventListener("autosize:update",update,!1),ta.style.overflowX="hidden",ta.style.wordWrap="break-word",map.set(ta,{destroy:destroy,update:update}),"vertical"===(style=window.getComputedStyle(ta,null)).resize?ta.style.resize="none":"both"===style.resize&&(ta.style.resize="horizontal"),heightOffset="content-box"===style.boxSizing?-(parseFloat(style.paddingTop)+parseFloat(style.paddingBottom)):parseFloat(style.borderTopWidth)+parseFloat(style.borderBottomWidth),isNaN(heightOffset)&&(heightOffset=0),update())}function destroy(methods){methods=map.get(methods);methods&&methods.destroy(}var autosize=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((autosize=function(el){return el}).destroy=function(el){return el},autosize.updat}):((autosize=function(el){return el&&Array.prototype.forEach.call(el.length?el:[el],assign),el}).destroy=function(el){return el&&Array.prototype.forEach.call(el.length?el:[el],destroy),el},autosize.updat}),exports.default=autosize,module.exports=exports.default}),function($){var logging=log.noConflict(),basePath,cssFile;$.ui.jig={scanned:!1,version:"1.15.9",_time:1651094443461,isMin:null,_log:{global:[],elements:[]},log:function(level){if("object"!=typeof level)throw Error("You must pass an object to the log method. See docs...");var id=$.extend({level:"info"},level),msg=id.msg,level=id.level;logging[level](msg);id=id.id;if(void 0===id)this._log.global.push({msg:msg,level:level,time:(new Date).getTime()});else{if(!document.getElementById(id))throw Error("Can't call log with id: '"+id+"'. Element doesn't exist in DOM.");this._log.elements.push({id:id,msg:msg,level:level,time:(new Date).getTime()})}return this._log},getLo},getLogEntriesByWidge},_getJSONFromStr:function(id,jsonString){if(void 0!==jsonString)try{return eval("({"+jsonString+"})")}catch(e){var msg="Error parsing jig metatag, or jig-dataconfig. Problem with JSON string: '"+jsonString+"'. Error: "+e.message+".";this.log({id:id,msg:msg,level:"error"})}},_getConfig:function(id,instanceConfigFromJigConfig,configFromScan){var metaConfig={},copyData=$("meta[name='"+id+"']").attr("content"),id=instanceConfigFromJigConfig.attr("id");void 0!==copyData&&(metaConfig=this._getJSONFromStr(instanceConfigFromJigConfig.attr("id"),copyData));copyData=$.extend({},instanceConfigFromJigConfig.data());delete copyData.jigconfig,delete copyData.jigscanned;instanceConfigFromJigConfig=this._getJSONFromStr(id,instanceConfigFromJigConfig.data("jigconfig"))||{};return $.extend({},metaConfig,instanceConfigFromJigConfig,copyData,configFromScan)},_getBasePath:function(){var jigRe=/(.*\/)?js\/jig(?:\.nojquery)?(\.min)?\.js$/,isMin=!1,baseURL=null;return $("script").each(function(){var srcMatch=$.trim($(this).attr("src"));if(srcMatch){srcMatch=srcMatch.match(jigRe);if(srcMatch)return baseURL=srcMatch[1]||"",isMin=".min"===srcMatch[2],!1}}),$.ui.jig.isMin=isMin,baseURL},getBasePath:function(){var path;return $.ui.jig._baseURL||(path=this._getBasePath(),$.ui.jig._baseURL=path,$.ui.jig._basePath=path),$.ui.jig._basePath},_isConsole:function(method){var methodDefined,consoleDefined=void 0!==window.console||!1;return consoleDefined&&(methodDefined=void 0!==window.console[method]||!1),!(!consoleDefined||!methodDefined)},_foundWidgets:{},_foundWidgetInstances:{},widget:function(name,base,prototype){var that=this,constr=base,p=prototype;2===arguments.length&&(constr=$.Widget,p=base);var origCreate=p._create,p=$.extend({},p,{_create:function(){var instances=name.split("."),rawName=instances[instances.length-1];this.element.data(rawName,this);instances=this.element.data("jigWidgetNames")||"";instances+=" "+rawName,this.element.data("jigWidgetNames",instances);instances=that._foundWidgets[rawName]||0;that._foundWidgets[rawName]=instances+1;instances=that._foundWidgetInstances[rawName]||[];instances.push(this.element),that._foundWidgetInstances[rawName]=instances,origCreate?origCreate.apply(this,arguments):this._super()},log:function(msg,level){$.ui.jig.log({msg:msg,level:level,id:this.element.attr("id")})}});return $.widget(name,constr,p)},getUIWidgetNames:function(){var prop,ret=[];for(prop in $.ui)"function"==typeof $.ui[prop]&&ret.push(prop);return ret},getUIWidgetConst},getUIWidgetInstances:function(widgetName){return widgetName?this._foundWidgetInstances[widgetName]||[]:this._foundWidgetInstances},getUIWidgetCount:function(widgetName){return widgetName?this._foundWidgets[widgetName]||0:this._foundWidgets},_setID:function(el,widgetName){var genId,origId=el.attr("id");return origId&&""!==origId||(genId=$.ui.jig._generateId(widgetName),el.attr("id",genId)),origId||genId},_callWidgetOnEl:function(el,widgetName,scope,configFromScan){var log=$.ui.jig.log,config=this._getConfig(widgetName,el,configFromScan);try{$.fn[widgetName].call(el,config)}catch(e){log.apply(this,[{id:el.attr("id"),msg:'Error in jig widget: "'+widgetName+'" with error message: "'+e.message+'".',level:"error"}])}},_initLogLevel:function(){document.location.host.match(/^(?:www|blast)/)?this.setLogLevel("WARN"):this.setLogLevel("INFO")},setLogLeve},_warnIfJigClass:function(id,widgetName){var re=new RegExp("(?:s)?jig-"+widgetName+"(?:s)?"),className=id.attr("class");className&&-1!==className.search(re)&&(id=id.attr("id"),this.log({msg:"Element #"+id+" is initialized with deprecated class, '"+className+"'. Use data-jig=\""+widgetName+'" instead.',id:id,level:"warn"}))},_elIsInScope:function(scope,el){return el.is(scope)||0<scope.find(el).length},getWidgetSelector:function(widgSelector){var baseSelector=widgSelector.prototype.widgetName,widgSelector=widgSelector.prototype.selector;return"string"==typeof widgSelector?widgSelector:(baseSelector=".jig-"+baseSelector+", [data-jig~='"+baseSelector+"']","function"==typeof widgSelector?widgSelector.call(window,baseSelector):baseSelector)},scan:function(scope,config){this._initLogLevel(),this.widgetNames=this.getUIWidgetNames();var that=this;scope=$(void 0===scope?document.body:scope),$(document).trigger("beforejigscanned"),limitWidgets=void 0!==config&&void 0!==config.widgets,this.widgetNames.forEach(function(widgetName){var configFromScan={};if(limitWidgets){if(-1===jQuery.inArray(widgetName,config.widgets))return;config.configs&&(configFromScan=config.configs[widgetName])}var selector=that.getUIWidgetConstr(widgetName),selector=that.getWidgetSelector(selector);$(selector).filter(function(){return that._elIsInScope(scope,$(this))}).each(function(){var el=$(this);that._setID(el,widgetName),that._warnIfJigClass(el,widgetName),that._callWidgetOnEl(el,widgetName,scope,configFromScan)})}),this.scanned=!0,$(document).trigger("afterjigscan")}},0===$("link[href*='jig.css'], link[href*='jig.min.css']").length&&(basePath=$.ui.jig.getBasePath(),cssFile=$.ui.jig.isMin?"jig.min.css":"jig.css",$("head").prepend('<link rel="stylesheet" type="text/css" href="'+basePath+"css/"+cssFile+'">')),$(function(){$.ui.jig.scan()})}(jQuery),function($){var utils={_getFncFromStr:function(fnc){var newFunc=null,typeOfFnc=typeof fnc;if("function"==typeOfFnc)newFunc=fnc;else if("string"==typeOfFnc){var parts=fnc.replace(/^[^:]*:\s*/,"").replace(/\s*$/,"").split(".");if(newFunc=window[parts[0]]){for(var i=1;i<parts.length;i++)if(!(newFunc=newFunc[parts[i]])){newFunc=null;break}}else newFunc=null}return newFunc},generateI},_generateId:function(strWidgetName,strModifier){strModifier=void 0!==strModifier?"-"+strModifier:"",arguments.callee.i++;for(var strGeneratedId="ui-"+strWidgetName+strModifier+"-"+arguments.callee.i;document.getElementById(strGeneratedId);)arguments.callee.i++,strGeneratedId="ui-"+strWidgetName+strModifier+arguments.callee.i;return strGeneratedId},getElementWidgets:function(elem,widgetName){var prop,data=jQuery(elem).data(),widgets=[];for(prop in data)data[prop]instanceof jQuery.ui[widgetName]&&widgets.push(data[prop]);return widgets},registerPageHeightWatcher:function(){var body=jQuery(document.body);body.data("hasHeightWatcher")||(body.data("_lastHeight",null),body.data("hasHeightWatcher",!0),body.data("heightWatcher",window.setInterva},250)))},watchPageHeight:function(){var body=jQuery(document.body),currentHeight=body.height(),lastHeight=body.data("_lastHeight");lastHeight!==currentHeight&&(lastHeight&&body.trigger("ncbijigpageheightchanged"),body.data("_lastHeight",currentHeight))},getUserNameFromCookie:function(){var name=null,nameMatch=Cookies.get("WebCubbyUser");return nameMatch&&-1<nameMatch.indexOf("logged-in=true")&&((nameMatch=nameMatch.match(/my-name=([^;]+)/i))&&(name=nameMatch[1])),name},requiresLoginURL:"/account/signin/?inlinelogin=true",requiresLoginWidth:405,requiresLoginHeight:560,embeddedIframe:null,requiresLoginIframe:null,requiresLogin:function(fnc){var that=this;jQuery.ui.jig._requiresLoginIframe&&jQuery.ui.jig._requiresLoginIframe.hide().remove(),jQuery.ui.jig.checkIfLoggedIn(function(){fnc&&fnc(that.getUserNameFromCookie(),!1)},function(){var signinUrl,wid,hei,dialogCode;jQuery.ui.jig.embeddedIframe||(signinUrl=jQuery.ui.jig.requiresLoginURL,wid=jQuery.ui.jig.requiresLoginWidth,hei=jQuery.ui.jig.requiresLoginHeight,(dialogCode=jQuery('<div style="display:none"><a href="#jig-ncbi_requires_login">Inline Login Component</a></div><div id="jig-ncbi_requires_login" title="My NCBI Sign In"><iframe style="width:'+wid+"px;height:"+hei+'px;" src="'+signinUrl+'"></iframe></div>').css("display","none").appendTo(document.body,!0)).find("a").attr("href","#jig-ncbi_requires_login").ncbidialog({width:"auto",height:"auto"}).ncbidialog("open"),jQuery.ui.jig._requiresLoginIframe=dialogCode,jQuery.ui.jig.waitForLoginCookie(function(username){var myusername=username||that.getUserNameFromCookie()||" ";try{jQuery("#myncbiusername").show(),jQuery("#mnu").html(myusername),jQuery("#sign_in").hide(),jQuery("#sign_out, #myncbi").show(),dialogCode.find("a:eq(0)").ncbidialog("close"),document.body.removeChild(dialogCode.get(0))}catch(e){}fnc&&fnc(username,!0,window.location.href)}))})},_isLoggedIn:null,checkIfLoggedIn:function(loggedInCallBack,loggedOutCallBack){var lastLogInState=jQuery.ui.jig._isLoggedIn;null!==this.getUserNameFromCookie()?window.setTimeout(function(){var issignedInURl;null===lastLogInState?(issignedInURl=window.location.port?":"+window.location.port:"",issignedInURl="https://"+window.location.hostname+issignedInURl+"/account/ajax/issignedin/?callback=?",jQuery.ajax({url:issignedInURl,dataType:"jsonp",jsonpCallback:"issignedin",cache:!1,success:function(isLoggedIn){isLoggedIn=isLoggedIn&&isLoggedIn.is_signed_in;jQuery.ui.jig._isLoggedIn=isLoggedIn,jQuery.ui.jig._checkIfLoggedInNotify(isLoggedIn,loggedInCallBack,loggedOutCallBack)},error:function(data){jQuery.ui.jig._isLoggedIn=null,jQuery.ui.jig._checkIfLoggedInNotify(!1,loggedInCallBack,loggedOutCallBack)}})):jQuery.ui.jig._checkIfLoggedInNotify(lastLogInState,loggedInCallBack,loggedOutCallBack)},50):loggedOutCallBack()},_autoCheckState:function(){jQuery.ui.jig._autoCheckStateTimer&&window.clearTimeout(jQuery.ui.jig._autoCheckStateTimer),jQuery.ui.jig._isLoggedIn=null,jQuery.ui.jig._autoCheckStateTimer=window.setTimeou},6e5)},_checkIfLoggedInNotify:function(isLoggedIn,loggedInCallBack,loggedOutCallBack){isLoggedIn&&loggedInCallBack?loggedInCallBack():!isLoggedIn&&loggedOutCallBack&&loggedOutCallBack(),isLoggedIn||jQuery.ui.jig._removeLoggedInFlag()},waitForLoginCookie_logincheck:!1,waitForLoginCookie:function(finishLogin){var checkLogin=function(){var wcu=Cookies.get("WebCubbyUser");wcu&&-1<wcu.indexOf("logged-in=true")?window.setTimeout(finishLogin,30):window.setTimeout(checkLogin,10)};jQuery.ui.jig.waitForLoginCookie_logincheck&&null===jQuery.ui.jig._isLoggedIn?jQuery.ui.jig._isLoggedIn_wait(checkLogin):(jQuery.ui.jig.waitForLoginCookie_logincheck=!0,window.setTimeou},50))},_isLoggedIn_wait:function(callback){null!==jQuery.ui.jig._isLoggedIn?callback():window.setTimeou},10)},_removeLoggedInFlag:function(){var lout,new_wcu=Cookies.get("WebCubbyUser");new_wcu&&-1<new_wcu.indexOf("logged-in=true")&&((lout=Cookies.get("lout"))&&new Date-parseInt(lout,10)<1e4||(new_wcu=new_wcu.replace("logged-in=true","logged-in=false"),Cookies.set("WebCubbyUser",new_wcu,{path:"/",domain:".nih.gov"}),Cookies.set("lout",(new Date).getTime())))}};utils._generateId.i=0,$.extend($.ui.jig,utils)}(jQuery),jQuery(document).on("ncbiajaxcomplete",function(event,data){var calls=jQuery("html").data("ncbiajaxcompleteCalls");(calls=calls||[]).push(data.ncbiajaxname),jQuery("html").data("ncbiajaxcompleteCalls",calls)}),$.widget("ui.ncbidatepicker",{_creat}}),$.ui.jig.widget("ui.ncbiaccordion",jQuery.ui.accordion,{}),$.ui.jig.widget("ui.ncbiautofocus",{_create:function(){"use strict";var errorText;if(jQuery.ui.ncbiautofocus.registeredElement){if(errorText="More than one element is registered for ncbiautofocus\n\tAlready Registered: \t"+this._outerHTML(jQuery.ui.ncbiautofocus.registeredElement)+"\n\tTrying to Register: \t\t"+this._outerHTML(this.element),"undefined"==typeof console)throw errorText;console[console.error?"error":"log"](errorText)}else jQuery.ui.ncbiautofocus.registeredElement=this.element,this._addKeyDownEvent()},_outerHTML:function(elem){"use strict";return jQuery("<div>").append(elem.clone()).html()},destro},_doFocus:function(e){var text,autofocusElem=this.element,autofocusElemDOM=autofocusElem[0],valLen=autofocusElem.val().length;autofocusElemDOM.createTextRange?((text=autofocusElemDOM.createTextRange()).moveStart("character",valLen),text.collapse(),text.select()):autofocusElemDOM.setSelectionRange?(autofocusElem.focus(),autofocusElemDOM.setSelectionRange(valLen,valLen)):autofocusElem.focus()},_addKeyDownEvent:function(){"use strict";var that=this;this._interceptKeydown=function(e){var elem=e.srcElement||e.target,keyCode=e.keyCode||e.which,isModifier=e.ctrlKey||e.altKey||e.metaKey,isPaste=86==e.keyCode&&(e.ctrlKey||e.metaKey);isModifier&&!isPaste||!(48<=keyCode&&keyCode<=90||96<=keyCode&&keyCode<=111)||1!==jQuery(elem).not(":input,a").length||that._doFocus(e)},this._interceptPaste=function(e){var elem=e.srcElement||e.target;1===jQuery(elem).not(":input, a").length&&that._doFocus(e)},jQuery(document).on("keydown",this._interceptKeydown),jQuery(document).on("paste beforepaste",this._interceptPaste)},_removeKeyDownEvent:function(){"use strict";this._documentKeydown&&jQuery(document).off("keydown",this._interceptKeydown)}}),jQuery.ui.ncbiautofocus.registeredElement=null,$.ui.jig.widget("ui.ncbiclearbutton",{_create:function(){navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1===navigator.appVersion.indexOf("MSIE 10")&&(this._createButton(),this._attachInputEvents(),this._attachButtonEvents(),this._boxShadow(),this._showIfValue())},_wrapHTML:'<div class="jig-ncbiclearbutton-wrap ui-ncbiclearbutton-wrap" />',_buttonHTML:'<a class="reset" href="#"><img src="'+$.ui.jig.getBasePath()+'img/clear.png" alt="Clear input" /></a>',_createButton:function(){this.clearButton=jQuery(this._buttonHTML),this.wrapperElement=jQuery(this._wrapHTML),this.element.wrap(this.wrapperElement),this.element.after(this.clearButton)},clearTex},_showButton:function(){this.clearButton.css("visibility","visible")},_hideButto},_boxShadow:function(){var that=this;this.element.focus(function(){that.element.parent().addClass("box-shadow")}),this.element.blu})},_showIfValue:function(){""!=this.element.val()?this._showButton():this._hideButton()},_attachInputEvents:function(){var that=this;this.element.bind("keyup change",function(){that._showIfValue()}).bind("paste})},_pingData:function(){"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping({jsevent:"ncbiclearbutton",prevValue:this.element.val()})},_attachButtonEvents:function(){var that=this;this.clearButton.click(function(e){that.clearText(),that._hideButton(),that.element.focus(),e.preventDefault()})}}),function(){var orgCreate=jQuery.ui.button.prototype._create;jQuery.ui.button.prototype.options.color="ui-ncbibutton-gray",jQuery.ui.button.validColors=["ui-ncbibutton-gray","ui-ncbibutton-copper","ui-ncbibutton-blue"],jQuery.ui.button.classColors=["jig-ncbibutton-gray","jig-ncbibutton-copper","jig-ncbibutton-blue"];jQuery.ui.jig.widget("ui.ncbibutton",jQuery.ui.button,{selector:".jig-ncbibutton, .jig-ncbibutton-gray, .jig-ncbibutton-blue, .jig-ncbibutton-copper, [data-jig=ncbibutton]",_create:function()}).apply(this,arguments)},_getColor:function(){for(var color=this.options.color,classes=this.element[0].className,colorClasses=jQuery.ui.button.classColors,i=0;i<colorClasses.length;i++)if(-1!==classes.indexOf(colorClasses[i])){color=jQuery.ui.button.validColors[i];break}return 0!==color.indexOf("ui-ncbibutton-")&&(color="ui-ncbibutton-"+color),-1===jQuery.inArray(color,jQuery.ui.button.validColors)&&("undefined"!=typeof console&&console.warn&&console.warn("The color you picked: "+this.options.color+" is not a valid color choice.\n Valid colors: "+jQuery.ui.button.validColors.join(", ")),color=jQuery.ui.button.validColors[0]),color},_addClasses:function(){this.element.addClass("ui-ncbibutton").addClass(this._getColor()).removeClass("ui-button ui-widget")}})}(),jQuery.ui.jig.widget("ui.ncbisetswitch",{options:{webservice:null,destSelector:null,localJSON:null,manageCollectionsUrl:null,createCollectionUrl:null,defaultActive:!1},_creat},_wrapEle},_unwrapElem:function(){this.element.unwrap()},_createStar:function(){this.element.prepend("<span class='star'></span>"),this.element.addClass("ui-ncbisetswitch-hasStar"),!0===this.options.defaultActive&&this.element.find(".star").addClass("active")},_destroySta},_createArrow:function(){this.downButton=jQuery("<a class='ui-ncbisetswitch-button' title='View more options' href='#'><span class='ui-icon ui-icon-triangle-1-s ui-ncbisetswitch-down'>View more options</span></a>").insertAfter(this.element),this.downButton.prev().hasClass("ltd-hover")&&this.downButton.addClass("ltd-hover")},_destroyArrow:function(){this.downButton.remove()},_attachLinksMenu:function(){var destElem={webservice:this.options.webservice,openAnimationTime:150,destSelector:this.options.destSelector,localJSON:this.options.localJSON,triggerPosition:"bottom left",wrapElement:!0,ignoreDefaultTrigger:!0,closeOnSelect:!1};this.wrapper.ncbilinksmenu(destElem);destElem=this.wrapper.ncbilinksmenu("getDestElement");destElem.addClass("ui-ncbisetswitch-popper"),destElem.find(">ul:first-child").addClass("ui-ncbisetswitch-options")},_destroyLinksMenu:function(){var destElem=this.wrapper.ncbilinksmenu("getDestElement");destElem.removeClass("ui-ncbisetswitch-popper"),destElem.find(">ul:first-child").removeClass("ui-ncbisetswitch-options"),this.wrapper.ncbilinksmenu("destroy")},_hideList:function(){this.options.destSelector&&jQuery(this.options.destSelector).hide()},_hideAccessible:function(){var aAccessible=this.element.prev("a.ui-helper-hidden-accessible");aAccessible.prev("p.ui-helper-hidden-accessible").remove(),aAccessible.remove()},destroy:function(){this._destroyLinksMenu(),this._unwrapElem(),this._destroyStar(),this._destroyArrow(),this._destroyActionListItem(),this._detachLinkEvent(),this._removeToggleStarClick(),this._hideList(),this._hideAccessible()},_createActionListItem:function(){jQuery.ui.ncbisetswitch._globalActionsList={};var globalActionsList=this.wrapper.ncbilinksmenu("getDestElement").children(":first"),globalActionsList={actionList:jQuery("<ul class='ui-ncbisetswitch-actions'></ul>").appendTo(globalActionsList.parent())};globalActionsList.createCollection=jQuery("<li class='ui-ncbisetswitch-actions-create'><a class='ui-ncbisetswitch-create-collection'>Create collection...</a></li>").appendTo(globalActionsList.actionList),globalActionsList.managecollections=jQuery("<li class='ui-ncbisetswitch-actions-manage'><a class='ui-ncbisetswitch-manage-collections'>Manage collections...</a></li>").appendTo(globalActionsList.actionList),this._gol=globalActionsList},_destroyActionListIte},_positionActionListItem:function(){var manageDisplay,createDisplay,collectionActionsDisplay;this._gol.activeElement!==this.element?(manageDisplay=null!==this.options.manageCollectionsUrl?"block":"none",createDisplay=null!==this.options.createCollectionUrl?"block":"none",collectionActionsDisplay="block"==manageDisplay||"block"==createDisplay?"block":"none",jQuery(this._gol.createCollection).css("display",createDisplay).children("a:first").attr("href",this.options.createCollectionUrl),jQuery(this._gol.managecollections).css("display",manageDisplay).children("a:first").attr("href",this.options.manageCollectionsUrl),jQuery(this._gol.actionsItem).css("display",collectionActionsDisplay)):this._gol.activeElement=this.element},_addToggleStarClick:function(){var that=this;this._makingMainSelectionClickFunc=function(e){that._makingMainSelection()},this.element.on("mousedown keydown",this._makingMainSelectionClickFunc),this._downButtonKeydownFunc=function(e){40===(e||window.event).keyCode&&that.downButton.mousedown().click()},this._downButtonMousedownFunc=function(evt){that._arrowClickedSelection(evt,this)},this.downButton.keydown(this._keydownFunc).on("mousedown",this._mousedownFunc),this._toggleStarSubClickFunc=function(e){that._toggleStarSub(e,e.target)},this._setswitchOptionsMousedownFun};this.wrapper.ncbilinksmenu("getDestElement").find(".ui-ncbisetswitch-options a").on("mousedown keydown",this._setswitchOptionsMousedownFunc);"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.scanLinks([this.downButton[0],this.element[0]])},_removeToggleStarClick:function(){this.element.unbind("mousedown",this._makingMainSelectionClickFunc).unbind("keydown",this._makingMainSelectionClickFunc),this.downButton.unbind("keydown",this._keydownFunc).unbind("mousedown",this._mousedownFunc),this.wrapper.find(".ui-ncbisetswitch-options a").unbind("mousedown",this._setswitchOptionsMousedownFunc).unbind("keydown",this._setswitchOptionsMousedownFunc)},_arrowClickedSelection:function(evt,anchor){var openStatus=this.wrapper.ncbilinksmenu("getDestElement").is(":visible")?"closed":"opened";jQuery(anchor).prop("ref","jigwidget=ncbisetswitch&item=downarrowclicked&action="+openStatus)},_makingMainSelection:function(){var isSelected=this.element.find("span.star").hasClass("active")?"unselected":"selected";this.element.prop("ref","jigwidget=ncbisetswitch&item=mainlink&action="+isSelected)},_makingSubSelection:function(anchor,isSelected){isSelected=isSelected.hasClass("starred")?"unselected":"selected";anchor.prop("ref","jigwidget=ncbisetswitch&item=sublink&action="+isSelected)},_attachLinkEvent:function(){this._linkEventFunc=function(e){e.preventDefault(),e.stopPropagation()},this.element.click(this._linkEventFunc)},_detachLinkEvent:function(){this.element.unbind("click",this._linkEventFunc)}}),$.ui.jig.widget("ui.ncbiautocomplete",{options:{webserviceUrl:"/portal/utils/autocomp.fcgi",isUrlRelative:!1,dictionary:"",responseFormat:"old",disableUrl:null,prefUrl:null,zIndex:1001,isEnabled:!0,hasRelatedMatches:!1,minLength:2,expandPauseTime:400,maxListLimit:null,isCrossDomain:!1,disableCache:!1,requireValidation:!1,queryParameter:"q"},_create:function(){this.options.localData&&!this.options.dictionary&&(this.options.dictionary="local"),this._storeTitleAttribute(),this._createOptionsBox(),this._addAttributes(),this._setHandlers(),this._setWebServicePath(),this._lastEnteredTerm="",this._setSGData()},_storeTitleAttribut},destroy:function(){jQuery.Widget.prototype.destroy.apply(this,arguments),this.element.removeAttr("title"),this._destroyAria(),this._destroyHandlers();var originalTitle=this.element.data("ncbiautocompleteOriginalTitle");originalTitle&&this.element.attr("title",originalTitle)},_destroyOptionsBox:function(){null!=jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox&&jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox.remove()},_destroyHandlers:function(){this.element.off("keypress keydown keyup cut paste")},_destroyAri},_activeRequest:null,_keys:{up:38,down:40,enter:13,escape:27,tab:9,shift:16},_setSGData:function(){this.sgData={jsevent:"autocomplete",userTyped:"",hasScrolled:!1,usedArrows:!1,selectionAction:"",optionSelected:"",optionIndex:-1,optionsCount:-1}},_addAttributes:function(){this.element.attr({title:"Use up and down arrows to choose an item from the autocomplete.","aria-haspopup":!0,"aria-autocomplete":"list",role:"textbox"})},_setHandlers:function(){var that=this;jQuery(this.element).focus(function(){that._focused()}).keypress(function(e){that._keyPress(e,"press")}).keydow}).keyup(function(e){that._keyUp(e)}).bind("cut paste",function(){that._changeFired()}).attr("AUTOCOMPLETE","OFF");var domElem=jQuery(this.element)[0];domElem.autocomplete="off",domElem.AUTOCOMPLETE="OFF",jQuery(window).resiz}),jQuery(document).click(function(e){that._checkClickEvent(e)}),jQuery(this._gol.optionsBox).hover(function(){that._isActive&&(that._isOptionsBoxFocused=!0)})},_isOptionsBoxFocused:!1,_createOptionsBox:function(){var whereToAppend;null===jQuery.ui.ncbiautocomplete._globalOptionsList&&(jQuery.ui.ncbiautocomplete._globalOptionsList={},whereToAppend=1===(whereToAppend=jQuery("div.grid")).length?whereToAppend:jQuery(document.body),jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox=jQuery("<div class='ui-ncbiautocomplete-holder shadow' aria-live='assertive'></div>").appendTo(whereToAppend),jQuery.ui.ncbiautocomplete._globalOptionsList.optionsList=jQuery("<ul class='ui-ncbiautocomplete-options' role='listbox' aria-activedescendant=''></ul>").appendTo(jQuery(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox)),jQuery.ui.ncbiautocomplete._globalOptionsList.optionsActions=jQuery("<div class='ui-ncbiautocomplete-actions shadow'></div>").appendTo(jQuery(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox)),jQuery.ui.ncbiautocomplete._globalOptionsList.prefLink=jQuery("<a href='#' class='ui-ncbiautocomplete-link-pref'>Preferences</a>").appendTo(jQuery(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsActions)),jQuery.ui.ncbiautocomplete._globalOptionsList.turnOffLink=jQuery("<a href='#' class='ui-ncbiautocomplete-link-off'>Turn off</a>").appendTo(jQuery(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsActions)),jQuery.ui.ncbiautocomplete._globalOptionsList.isIE6=jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<7,jQuery.ui.ncbiautocomplete._globalOptionsList.isIE6&&(jQuery.ui.ncbiautocomplete._globalOptionsList.optionsBox.iframe=jQuery("<iframe src='javascript:\"\";' class='ui-ncbiautocomplete-iframe' marginwidth='0' marginheight='0' align='bottom' scrolling='no' frameborder='0'></iframe>").appendTo(document.body))),this._gol=jQuery.ui.ncbiautocomplete._globalOptionsList},_positionOptionsBox:function(){this._gol.activeElement&&(ifr=jQuery(this.element),zIndex=jQuery(this._gol.activeElement),(ifr.attr("id")||ifr[0])!==(zIndex.attr("id")||zIndex[0])&&this._hideOptions());var that=this;this._gol.activeElement!==this.element?(tbWidth=null!==this.options.prefUrl?"block":"none",tbHeight=null!==this.options.disableUrl?"block":"none",tbPosition="block"==tbWidth||"block"==tbHeight?"block":"none",jQuery(this._gol.prefLink).css("display",tbWidth).attr("href",this.options.prefUrl).unbind("click").click(function(e){that._prefLinkClick()}),jQuery(this._gol.turnOffLink).css("display",tbHeight).unbind("click").click(function(e){that.turnOff(),e.preventDefault()}),jQuery(this._gol.optionsActions).css("display",tbPosition),jQuery(this._gol.optionsActions).children(":nth-child(2)").addClass("ui-ncbiautocomplete-link-pref-right")):this._gol.activeElement=this.element;var adj=this.element,ifr=jQuery(this._gol.optionsBox),zIndex=!1;adj.parent().hasClass("ui-ncbiclearbutton-wrap")?(adj=adj.parent(),zIndex=!0,ifr.addClass("ui-ncbiautocomplete-holder-clearfix")):ifr.removeClass("ui-ncbiautocomplete-holder-clearfix");var bl,br,tbWidth=adj.outerWidth(),tbHeight=adj.outerHeight(),tbPosition=adj.offset(),adj=jQuery.browser.msie?br=bl=0:(bl=parseInt(ifr.css("borderLeftWidth"),10),br=parseInt(ifr.css("borderRightWidth"),10),zIndex?0:-1),zIndex=zIndex?-1:-2;ifr.css("top",tbPosition.top+tbHeight+zIndex+"px").css("left",tbPosition.left+"px").width(tbWidth-bl-br+adj+"px");zIndex=parseInt(this.options.zIndex,10);ifr.css("zIndex",zIndex);ifr=jQuery(this._gol.optionsList);ifr[0].onscroll=function(){},ifr.scrollTop(0),ifr[0].onscrol},this._gol.isIE6&&((ifr=jQuery(this._gol.optionsBox.iframe)).css("top",tbPosition.top+tbHeight+"px").css("left",tbPosition.left+"px").width(tbWidth-bl-br+adj+"px"),ifr.css("zIndex",zIndex-1))},_isActive:!1,_focused:function(){this._gol.activeElement!==this.element&&this._hideOptions(),this._setActivedescendant(),this._positionOptionsBox(),this.options.isEnabled&&(this._isActive=!0,this._hasBeenEscaped=!1),0===this.options.minLength&&this.options.localData&&this._keyUp({})},_lastEnteredTerm:null,_isCached:!1,_hasBeenEscaped:!1,_lastKeyPressDwnUpScroll:new Date,_lastFoundMatch:null,_findMatchInCache:function(txt){if(this._lastFoundMatch=null,void 0===this._localCache[this.options.dictionary])return!1;var limit="l"+(this.options.maxListLimit||"n");if(void 0===this._localCache[this.options.dictionary][limit])return!1;for(var cnt=0;1<txt.length||cnt<10;){txt=txt.substr(0,txt.length-1);var cacheObj=this._localCache[this.options.dictionary][limit][txt];if(cacheObj){if(cacheObj.isCompleteList)return this._lastFoundMatch=txt,!0;break}cnt++}return!1},_cloneMatchObject:function(orgData){var obj={};return obj.matchedText=orgData.matchedText.toString(),obj.matches=orgData.matches?orgData.matches.slice():[],obj.isCompleteList=!0===orgData.isCompleteList,obj},_timerTriggerEnterEvent:null,_clearTriggerEnterEven},_triggerEnterEvent:function(){var that=this;this._timerTriggerEnterEvent||(this._timerTriggerEnterEvent=window.setTimeout(function(){that._clearTriggerEnterEvent()},50),this.element.trigger("ncbiautocompleteenter",this.sgData),this.element.trigger("ncbiautocompletechange",this.sgData),this._sgSend())},_triggerTabEven},_keyPress:function(e,keyAction){var arrowKey=!1,that=this;if(e.keyCode===this._keys.enter||e.keyCode===this._keys.tab){var isEnter=e.keyCode===this._keys.enter,isEnterHandled=!1;if(this._isActive&&this.isOptionsBoxOpen())if(this._currIndex===this.options.maxListLimit&&jQuery("li:eq("+this._currIndex+")",this._gol.optionsList).hasClass("ui-ncbiautocomplete-show-more"))this._hideOptions(!0),this._gotoShowAll();else if(this.sgData.optionSelected===jQuery(this.element).val()){if(isEnterHandled=isEnter,this._timerTriggerEnterEvent||(this.sgData.selectionAction=isEnter?"enter":"tab",this.element.attr("valueId",this.element.attr("_optValue")||null),isEnter?this._triggerEnterEvent():(this._sentTab||this._triggerTabEvent(),this._sentTab=!0,window.setTimeout(function(){that._sentTab=!1},10))),this._hideOptions(!0),isEnter)return e.stopPropagation(),e.preventDefault(),!1}else e.keyCode===this._keys.tab&&this._hideOptions(!0);else e.keyCode===this._keys.tab&&(this._tabCalled||(this._hideOptions(!0),this._tabCalled=!0,window.setTimeout(function(){that._tabCalled=!1},10)));isEnter&&!isEnterHandled&&(this._hideOptions(!0),this._triggerEnterEvent())}else if(0!==jQuery(this.element).val().length||this.options.localData){if(e.keyCode===this._keys.up)arrowKey=!0,this._scrollUpDownRateLimiter(-1);else if(e.keyCode===this._keys.down&&!e.shiftKey){if(jQuery(this.element).val().length>=this.options.minLength&&!this.isOptionsBoxOpen())return void(arrowKey=!(this._reopenOptions=!0));arrowKey=!(this._reopenOptions=!1),this._scrollUpDownRateLimiter(1)}}else this._hideOptions(!0);this._lastKeyAction&&keyAction!==this._lastKeyAction||(this._lastKeyAction=keyAction,this._prevWasArrow=this._usedArrow,this._usedArrow=arrowKey)},_scrollUpDownRateLimiter:function(dir){new Date-this._lastKeyPressDwnUpScroll<90||(this._moveSelection(dir),this._lastKeyPressDwnUpScroll=new Date)},_checkArrowSelection:function(e){this._prevWasArrow&&e.keyCode!==this._keys.down&&e.keyCode!==this._keys.up&&e.keyCode!==this._keys.tab&&e.keyCode!==this._keys.enter&&this._isActive&&this.isOptionsBoxOpen()&&(this.sgData.selectionAction="arrows","undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping&&ncbi.sg.ping(this.sgData,!1),this._prevWasArrow=!1,this._usedArrow=!1)},_keyUp:function(newObj){var txt,limit;this.options.isEnabled&&!this._hasBeenEscaped&&(this._checkArrowSelection(newObj),txt=jQuery(this.element).val().toLowerCase().replace(/^\s+/,"").replace(/\s+$/," "),limit="l"+(this.options.maxListLimit||"n"),(newObj.keyCode!==this._keys.up&&newObj.keyCode!==this._keys.down&&newObj.keyCode!==this._keys.enter||this._reopenOptions)&&(newObj.keyCode===this._keys.tab&&this._isOptionsBoxFocused?(this._isOptionsBoxFocused=!1,this._isActive=!1,"keyup"!==newObj.type&&this._hideOptions(!0)):newObj.keyCode===this._keys.escape?(this._isOptionsBoxFocused=!1,this._isActive=!1,this._hasBeenEscaped=!0,this._hideOptions(!0)):this._lastEnteredTerm===txt||newObj.keyCode===this._keys.shift||(this._localCache[this.options.dictionary]&&this._localCache[this.options.dictionary][limit]&&this._localCache[this.options.dictionary][limit][txt]?(this._isActive=!0,this._resetValueId(txt),this._lastEnteredTerm=txt,this._displayOptions(this._localCache[this.options.dictionary][limit][txt])):this._isCached&&this._findMatchInCache(txt)?(this._isActive=!0,this._localCache[this.options.dictionary][limit][txt]=this._cloneMatchObject(this._localCache[this.options.dictionary][limit][this._lastFoundMatch]),this._resetValueId(txt),this._lastEnteredTerm=txt,this._filteredCache(txt)):txt.length>=this.options.minLength&&this.options.localData?(this._localCache&&this._localCache[this.options.dictionary]&&this._localCache[this.options.dictionary][limit]&&this._localCache[this.options.dictionary][limit]["*_*_local_*_*"]||(newObj={matchedText:"*_*_local_*_*",matches:this.options.localData.slice(),isCompleteList:!0},this._putInCache(newObj,"*_*_local_*_*")),this._isActive=!0,this._localCache[this.options.dictionary][limit][txt]=this._cloneMatchObject(this._localCache[this.options.dictionary][limit]["*_*_local_*_*"]),this._resetValueId(txt),this._lastEnteredTerm=txt,this._filteredCache(txt)):txt.length>=this.options.minLength&&this.options.webserviceUrl?(this._isActive||(this._isActive=!0,this._focused()),this._lastEnteredTerm!==txt&&(this._resetValueId(txt),this._lastEnteredTerm=txt,this._fecthOptions(txt))):(this._resetValueId(txt),this._hideOptions()))))},_resetValueId:function(txt){this._lastEnteredTerm&&this._lastEnteredTerm.toLowerCase()===txt||this._lastTextInTextbox&&this._lastTextInTextbox.toLowerCase()===txt||this.element.attr("valueId",null)},_changeFired:function(){this._lastEnteredTerm!==this.element.val()&&this._resetValueId()},_webSerivcePath:null,_setWebServicePath:function(){var wsUrl,userPath=this.options.webserviceUrl;userPath&&(wsUrl="",this.options.isCrossDomain?this._webSerivcePath="https://www.ncbi.nlm.nih.gov/portal/utils/autocomp.fcgi":(this.options.isUrlRelative||(wsUrl=window.location.protocol+"//"+window.location.host,"/"!==userPath.charAt(0)&&(userPath="/"+userPath)),this._webSerivcePath=wsUrl+userPath))},_fecthOptions:function(txt,callback){null!==this._activeRequest&&this._activeRequest.abort();var that=this,format="old"===this.options.responseFormat?"text":"json",data={dict:this.options.dictionary};data[this.options.queryParameter]=txt,this.options.isCrossDomain?(this._addGlobalListener("NSuggest_CreateData"),jQuery.ajax({url:this._webSerivcePath,dataType:"script",data:data,cache:!0})):this._activeRequest=jQuery.get(this._webSerivcePath,data,function(x,y){that._handleResponse(x,y)},format)},_validSeverCall:function(txt){var isValid=!1,data,format,data,xhr,callbackName,value;return this.options.isCrossDomain?("undefined"!=typeof console&&console.warn&&console.warn("Can not do this test with cross domain calls"),!1):(0<this.options.dictionary.length&&(format="old"===this.options.responseFormat?"text":"json",data={dict:this.options.dictionary},data[this.options.queryParameter]=txt,xhr=jQuery.ajax({url:this._webSerivcePath,data:data,async:!1,dataTypeString:format}),200===xhr.status&&(data=xhr.responseText,callbackName="NSuggest_CreateData_test"+(new Date).getTime(),this._addGlobalListener(callbackName,!0),value=eval(data.replace("NSuggest_CreateData",callbackName)),window[callbackName]=null,isValid=this._isValidCheck(txt,value.matches))),isValid)},_handleResponse:function(data,status){this._activeRequest=null,"success"===status?this.options.responseProcessor?this._customFormat(data):"old"===this.options.responseFormat?this._oldFormat(data):this._displayOptions(data):this.turnOff()},_addGlobalListener:function(methName,returnData){var that=this;window[methName]=function(txt,matches,dataObj){dataObj={matchedText:txt,matches:matches,isCompleteList:1===dataObj};if(returnData)return dataObj;that._displayOptions(dataObj)}},_oldFormat:function(data){-1!==data.indexOf("_dictionary_error")?this.turnOff(!0):-1!==jQuery.trim(data).indexOf("NSuggest_CreateData")?(this._addGlobalListener("NSuggest_CreateData_new"),eval(data.replace("NSuggest_CreateData","NSuggest_CreateData_new"))):this._hideOptions()},_localCache:{},_putInCache:function(dataObj,overrideLastTerm){var limit;this.options.disableCache||(limit="l"+(this.options.maxListLimit||"n"),this._localCache[this.options.dictionary]||(this._localCache[this.options.dictionary]={}),this._localCache[this.options.dictionary][limit]||(this._localCache[this.options.dictionary][limit]={}),this._localCache[this.options.dictionary][limit][overrideLastTerm||this._lastEnteredTerm]||(this._localCache[this.options.dictionary][limit][overrideLastTerm||this._lastEnteredTerm]=dataObj))},_setActivedescendant:function(){var tbId=this.element.attr("id");tbId||(tbId=jQuery.ui.jig._generateId("ncbiautocomplete"),this.element.attr("id",tbId)),jQuery(this._gol.optionsBox).find("ul:eq(0)").attr("aria-activedescendant",tbId)},_displayOptions:function(temp){this._setActivedescendant(),this._putInCache(temp);var boxWidth=temp.matchedText,matches=temp.matches||[];if(boxWidth!==this._lastEnteredTerm)return temp.isCompleteList=!0,void this._filteredCache(this._lastEnteredTerm,temp);this.sgData.userTyped=this._lastEnteredTerm,this.sgData.optionsCount=matches,this._positionOptionsBox();var that=this;if("_dictionary_error"!==boxWidth){this._isCached=temp.isCompleteList;boxWidth=temp.previousFormat;if(!boxWidth){var avgCharWidth=this.options.maxListLimit,fLi=0;null===avgCharWidth||matches.length<=avgCharWidth?list=matches.length:fLi=matches.length-(list=avgCharWidth);for(var avgCharWidth=(this._lastEnteredTerm||"").replace(/([\^\$\\\?\(\)\[\]\*\+\{\}\|\/\.\,])/g,"\\$1"),lastTextRegExp=new RegExp("("+avgCharWidth+")","i"),highMatches=new Array(matches.length),hasRelatedMatches=this.options.hasRelatedMatches,i=list-1;0<=i;i--){var optText=matches[i],optVal="",indLoc=optText.indexOf("@");-1!==indLoc&&(optVal='valueId="'+optText.substr(indLoc+1)+'"',optText=optText.substr(0,indLoc),hasRelatedMatches=!0),highMatches[i]="<li role='menuitem' "+optVal+">"+optText.replace(lastTextRegExp,"<span>$1</span>").replace(/\\"/g,'"')+"</li>"}if(0<fLi&&highMatches.push("<li class='ui-ncbiautocomplete-show-more' role='menuitem' moreOption='true'>See all results</li>"),boxWidth=highMatches.join(""),0===highMatches.length||!hasRelatedMatches&&-1===boxWidth.indexOf("<span>"))return void this._hideOptions();temp.previousFormat=boxWidth}var avgCharWidth=jQuery(this._gol.optionsBox),list=jQuery(this._gol.optionsList);list.scrollTop(0),list.html(boxWidth),"block"!==avgCharWidth.css("display")&&this._isActive?(avgCharWidth.css("display","block"),this._gol.isIE6&&(li=jQuery(this._gol.optionsBox.iframe).css("display","block")).height(li.height()+jQuery(this._gol.optionsActions).height())):this._isActive||this._hideOptions();fLi=jQuery(".ui-ncbiautocomplete-options li"),temp=(fLi.eq(0).outerHeight()||20)*fLi.length;fLi.closest(".ui-ncbiautocomplete-holder").height(temp).css("min-height",temp+"px"),fLi.closest(".ui-ncbiautocomplete-options").height(temp).css("overflow-y","hidden");boxWidth=avgCharWidth.width();jQuery("li",list).hover(function(){that._addHightlightMouse(this)},function(){that._removeHighlight("mouse")}).clic}),jQuery(list).mouseleav}),this._resetCurrentIndex();var li=jQuery("li",avgCharWidth),boxWidth=jQuery(this._gol.optionsBox).width(),supportsEllipse=jQuery.browser.msie&&!this._gol.isIE6||jQuery.browser.safari||jQuery.browser.opera,fLi=li.eq(0),temp=(parseFloat(fLi.css("padding-left")),fLi.html());fLi.html("<span>MMMMMMMMM.</span>");avgCharWidth=fLi.children("span:first").width()/10;fLi.html("<span>&hellip;<span>");fLi.children("span:first").width();fLi.html(temp);var listWidth=list.width(),maxChars=Math.floor(boxWidth/avgCharWidth);li.each(function(){var elem=jQuery(this);elem.css("white-space","nowrap");var spanOpen,spanClosed,fitText,orgHeight,newHeight,txt=elem.html();elem.attr("fullText",txt).attr("acValue",txt.replace(/<\/?span>/gi,"")),elem.width()/elem.attr("acValue").length<9&&(supportsEllipse?elem.attr("partialText",elem.html()).attr("isIEExpand",!0).css("width",listWidth-28+"px"):(spanOpen=txt.toLowerCase().indexOf("<span>"),spanClosed=txt.toLowerCase().indexOf("</span>"),txt.length,fitText=function(loc,min,max,x,lastGood){txt.indexOf("Journal of magnetic");var xDwn,loc=(displayText=!1,spanOpen<=(loc=loc)&&loc<spanOpen+6&&(loc=spanOpen+(loc-spanOpen),displayText=!0),spanClosed<=loc&&loc<spanClosed+7&&(loc=spanClosed+(loc-spanClosed)),{cutLoc:loc,addSpan:displayText}),displayText=txt.substr(0,loc.cutLoc)+(loc.addCloseSpan?"</span>":"")+"&hellip;";elem.html(displayText),displayText===x?(elem.height()!==newHeight&&void 0!==lastGood&&(displayText=lastGood),elem.attr("partialText",displayText).css("white-space","nowrap")):elem.height()===newHeight?(xDwn=displayText.toString()+"",x=Math.floor((loc.cutLoc+max)/2),fitText(x,loc.cutLoc,max,displayText,xDwn)):(xDwn=Math.floor((parseInt(loc.cutLoc,10)+parseInt(min,10))/2),fitText(xDwn,min,loc.cutLoc,displayText,lastGood))},elem.css("white-space","normal").css("width",listWidth-22+"px"),orgHeight=elem.height(),elem.html("."),newHeight=elem.height(),elem.html(txt),newHeight<orgHeight&&fitText(maxChars,0,txt.length)))}),list.scrollTop(0),this._removeHighlight("mouse"),this._hideOptionsIfOffPage()}else this.turnOff(!0)},_filteredCache:function(txt,regText){var matchObj,showOptions=!0,limit="l"+(this.options.maxListLimit||"n");if(null===txt)showOptions=!1;else{regText?(matchObj=regText,void 0===this._localCache[this.options.dictionary]?this._localCache[this.options.dictionary]={}:void 0===this._localCache[this.options.dictionary][limit]&&(this._localCache[this.options.dictionary][limit]={})):matchObj=this._localCache[this.options.dictionary][limit][txt],matchObj.matchedText=txt;var showALL=0===this.options.minLength&&0===txt.length;if(!this.options.hasRelatedMatches){for(var regText=txt.replace(/([\^\$\\\?\(\)\[\]\*\+\{\}\|\/\.\,])/g,"\\$1"),matchRE=new RegExp(regText,"ig"),orgMatches=matchObj.matches.join("!!!~~~!!!").split("!!!~~~!!!"),i=orgMatches.length-1;0<=i;i--)showALL||null!==orgMatches[i].match(matchRE)||orgMatches.splice(i,1);matchObj.matches=orgMatches,this._localCache[this.options.dictionary][limit][txt]=matchObj,matchObj=null,showOptions=0<orgMatches.length}}showOptions?this._displayOptions(this._localCache[this.options.dictionary][limit][txt]):this._hideOptions()},_removeHighlight:function(evtName){var that;"mouse"===evtName&&new Date-this._lastKeyPressDwnUpScroll<100||jQuery("li",(that=this)._gol.optionsList).removeClass("ui-ncbiautocomplete-options-high").each(function(){that._collapseOption(this)})},_addHightlightMouse:function(elem){100<new Date-this._lastKeyPressDwnUpScroll&&(this._resetCurrentIndex(),this._currIndex=jQuery(elem).prevAll("li").length,this._addHightlight(elem))},_addHightlight:function(elem){this._removeHighlight(),jQuery(elem).addClass("ui-ncbiautocomplete-options-high");var that=this;this._expandTimer&&window.clearTimeout(this._expandTimer),this._expandTimer=window.setTimeout(function(){that._expandOption(elem)},this.options.expandPauseTime)},_expandOption:function(elem){var fText;jQuery(elem).hasClass("ui-ncbiautocomplete-options-high")&&(fText=(elem=jQuery(elem).attr("isExpanded",!0)).attr("fullText"),elem.html()===fText&&!elem.attr("isIEExpand")||(elem.html(fText).css("text-overflow","").css("white-space","normal").css("-o-text-overflow",""),this._scrollIntoView()))},_collapseOption:function(elem){(elem=jQuery(elem)).attr("isIEExpand")?elem.css("text-overflow","ellipsis").css("white-space","nowrap").css("-o-text-overflow","ellipsis"):elem.css("white-space","nowrap").html(elem.attr("partialText"))},_optionClicked:function(valueId){var txtBox;(valueId=jQuery(valueId)).hasClass("ui-ncbiautocomplete-show-more")?this._gotoShowAll():(txtBox=this._cleanUpSelectionText(valueId),valueId=valueId.attr("valueId")||null,this.sgData.optionSelected=txtBox,this.sgData.optionIndex=this._currIndex,this.sgData.valueId=valueId,this.sgData.selectionAction="click",this._sgSend(),(txtBox=jQuery(this.element).val(txtBox)).attr("valueid",valueId),txtBox.trigger("ncbiautocompleteoptionclick",this.sgData),txtBox.trigger("ncbiautocompletechange",this.sgData)),this._isOptionsBoxFocused=!1,this._hideOptions()},isOptionsBoxOpen:function(){return"block"===jQuery(this._gol.optionsBox).css("display")},_hideOptions:function(isForceClose){var box,triggerAction;this._gol.activeElement=null,this._isOptionsBoxFocused&&!isForceClose||(box=jQuery(this._gol.optionsBox),isForceClose&&jQuery(this._gol.optionsBox).css("display","none"),box.attr("aria-activedescendant")===this.element.attr("id")&&box.attr("aria-activedescendant",""),this._gol.isIE6&&jQuery(this._gol.optionsBox.iframe).css("display","none"),this._resetCurrentIndex(),this._isActive=!1,this._lastEnteredTerm=null,box=jQuery(this._gol.optionsBox),triggerAction=jQuery(this._gol.optionsList),box.css("display","none"),triggerAction.html(""),triggerAction=this.element.val(),this._lastTextInTextbox=triggerAction,this.options.requireValidation&&0<triggerAction.length&&this.options.isEnabled&&(!this.element.is(":focus")||isForceClose)&&(triggerAction=!(triggerAction.length<this.options.minLength)&&this.isInDictionary(triggerAction)?"validselection":"invalidselection",this._trigger(triggerAction)))},_setTextCursorToEnd:function(text){var elem=this.element;jQuery(elem).val(text),elem.createTextRange&&((text=elem.createTextRange()).moveStart("character",elem.value.length),text.collapse(),text.select())},_resetCurrentInde},_cleanUpSelectionText:function(li){return jQuery.trim(li.attr("acValue")).replace(/&amp;/gi,"&").replace(/\\"/g,'"')},_currIndex:-1,_moveSelection:function(txt){var optValue,li;this._isActive&&(this.sgData.usedArrows=!0,li=jQuery("li",this._gol.optionsList).length,this._currIndex+=txt,this._removeHighlight(),optValue="",null===(txt=this._lastEnteredTerm)||txt.length<this.options.minLength||((this._currIndex<0||this._currIndex>=li)&&(-2===this._currIndex?this._currIndex=li-1:this._currIndex=-1),-1!==this._currIndex?(li=jQuery("li:eq("+this._currIndex+")",this._gol.optionsList),this._addHightlight(li),this._currIndex===this.options.maxListLimit?(this.sgData.optionSelected="",this.sgData.valueId=""):(txt=this._cleanUpSelectionText(li),optValue=li.attr("valueId")||null,this.sgData.optionSelected=txt,this.sgData.valueId=optValue)):(this.sgData.optionSelected="",this.sgData.valueId=""),this.element.attr("_optValue",optValue),this.element.attr("valueId",optValue),this._setTextCursorToEnd(txt),this._scrollIntoView(),this.sgData.optionIndex=this._currIndex))},_scrollIntoView:function(){var box,boxHeight,boxTop,offset,offsetNext,nextLi=jQuery("li:eq("+this._currIndex+")",this._gol.optionsList);0!==nextLi.length&&(boxHeight=(box=jQuery(this._gol.optionsList)).height(),(boxTop=box.scrollTop())<(offset=nextLi[0].offsetTop)-boxHeight+(offsetNext=nextLi.height())?(offsetNext=1===(nextLi=jQuery("li:eq("+(this._currIndex+1)+")",this._gol.optionsList)).length?nextLi[0].offsetTop:offset+offsetNext+10,box.scrollTop(offsetNext-boxHeight)):offset<boxTop&&box.scrollTop(offset))},enableAutocomnplet},disableAutocomnplete:function(){this.disableAutocomplete()},disableAutocomplete:function(){this.options.isEnabled=!1,this._isOptionsBoxFocused=!1,this._hideOptions()},turnOff:function(fnc){this.disableAutocomplete();var dUrl=this.element.data("ncbiautocompleteOriginalTitle");dUrl&&this.element.attr("title",dUrl),fnc||("undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping&&ncbi.sg.ping(this.element[0],"autocompleteoffclick","dictionary="+this.options.dictionary),this.element.trigger("ncbiautocompletedisableclicked"),null!==(dUrl=this.options.disableUrl)&&0<dUrl.length&&("function"==typeof(fnc=jQuery.ui.jig._getFncFromStr(dUrl))?fnc():jQuery.get(dUrl)))},_prefLinkClick:function(){"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping&&ncbi.sg.ping(this.element[0],"autocompleteprefclick","dictionary="+this.options.dictionary)},_checkClickEvent:function(e){this._isActive&&(jQuery(this.element)[0]==e.target||(this._isOptionsBoxFocused=!1,this._isActive=!1,this._hideOptions()))},_sgSend:function(){"undefined"!=typeof ncbi&&void 0!==ncbi.sg&&void 0!==ncbi.sg.ping&&ncbi.sg.ping(this.sgData)},getSgData:function(){return this.sgData},_gotoShowAll:function(){var txtBox=jQuery(this.element),term=txtBox.val(),dict=this.options.dictionary;txtBox.trigger("ncbiautocompleteshowall",{value:term,dictionary:dict})},_hideOptionsIfOffPage:function(){var that,lis,h,holder,winHeight,posTop,totlalH,lookupId,details,cnt,checkHeight,totalH,neededH;this.options.maxListLimit&&(that=this,lis=jQuery(".ui-ncbiautocomplete-options li"),h=lis.eq(0).outerHeight()||20,holder=jQuery(this._gol.optionsBox),winHeight=jQuery(window).height(),posTop=holder.position().top,totlalH=posTop+holder.outerHeight()-(document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0),lis.last().hasClass("ui-ncbiautocomplete-show-more")?(lookupId=posTop+"-"+winHeight+"-"+totlalH,this.choppedDetails||(this.choppedDetails={}),details=this.choppedDetails[lookupId],cnt=0,checkHeight=function(){var ind;totlalH=posTop+holder.outerHeight()-(document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0),winHeight<totlalH?0<=(ind=(lis=jQuery(".ui-ncbiautocomplete-options li")).length-2)&&(lis.eq(ind).remove(),sz=h*(lis.length-1),lis.closest(".ui-ncbiautocomplete-holder").height(sz).css("min-height",sz+"px"),lis.closest(".ui-ncbiautocomplete-options").height(sz).css("overflow-y","hidden"),cnt++,checkHeight()):that.choppedDetails[lookupId].count=cnt},details?(0<(neededH=details.count)&&(totalH=2*details.length-neededH-lis.length-2,lis.filter(":lt("+(lis.length-1)+")").filter(":gt("+totalH+")").remove(),lis=jQuery(".ui-ncbiautocomplete-options li"),sz=h*lis.length,lis.closest(".ui-ncbiautocomplete-holder").height(sz).css("min-height",sz+"px"),lis.closest(".ui-ncbiautocomplete-options").height(sz).css("overflow-y","hidden")),cnt=neededH):this.choppedDetails[lookupId]={count:0,length:lis.length},checkHeight()):(totalH=Math.floor((winHeight-posTop)/h)*h,(neededH=lis.length*h)<totalH&&(totalH=neededH),lis.closest(".ui-ncbiautocomplete-holder").height(totalH).css("min-height",totalH+"px"),lis.closest(".ui-ncbiautocomplete-options").height(totalH).css("overflow-y","auto")))},isVali},isInDictionary:function(txt){var isValid=!1;if(txt&&txt.length>=this.options.minLength&&this.options.dictionary&&0<this.options.dictionary.length&&this.options.isEnabled){var skipServerCheck=!1,limit="l"+(this.options.maxListLimit||"n"),lcTxt=txt.toLowerCase();if(this._localCache[this.options.dictionary]&&this._localCache[this.options.dictionary][limit]){var possibleValues=this._localCache[this.options.dictionary][limit],skipServerCheck=!0;if(possibleValues[lcTxt])isValid=this._isValidCheck(lcTxt,possibleValues[lcTxt].matches);else for(var key in possibleValues)if(isValid=this._isValidCheck(lcTxt,possibleValues[key].matches))break}isValid||skipServerCheck||(isValid=this._validSeverCall(txt))}return isValid},_isValidCheck:function(txt,matches){var re,isValid=!1;return matches&&((isValid=-1<jQuery.inArray(txt.toLowerCase(),matches))||(re=new RegExp("(^|@)("+txt.toLowerCase()+")(@|$)","i"),jQuery.each(matches,function(index,item){if(item.match(re))return!(isValid=!0)}))),isValid},_customFormat:function(dataObj){var fnc;"string"==typeof this.options.responseProcessor&&(fnc=jQuery.ui.jig._getFncFromStr(this.options.responseProcessor),this.options.responseProcessor=fnc);dataObj=this.options.responseProcessor.call(this,dataObj),dataObj={matchedText:this._lastEnteredTerm,matches:dataObj,isCompleteList:0};this._displayOptions(dataObj)}}),jQuery.ui.ncbiautocomplete._globalOptionsList=null,jQuery.ui.jig.widget("ui.ncbigrid",{selector:"div.jig-ncbigrid table,div.jig-ncbigrid-scroll table,table.jig-ncbigrid,table.jig-ncbigrid-scroll, table[data-jig=ncbigrid], [data-jig=ncbigrid] table",options:{isScrollable:!1,height:"10em",hortScrollbarEnabled:!1,width:null,isPageable:!1,currentPage:1,isPageToolbarHideable:!0,pageSize:10,isSortable:!1,columnTypes:[],sortFunctions:[],isPresorted:!1,sortColumn:-1,sortColumnDir:1,sortRowIndex:0,titleAscending:"sort ascending",titleDescending:"sort descending",ariaLabelAscending:"activate to sort column ascending",ariaLabelDescending:"activate to sort column descending",regExp:!1,checkboxToolbarEnabled:!1,filterToolbarEnabled:!1,filterToolbarIsCaseInsensitive:null,filterToolbarColumnIndex:null,filterToolbarIsInverse:null,isLoadingMessageShown:!0,loadingText:"Loading",collapseRowsEnabled:!1,addCommas:!1},_init:function(){},_create:function(){this._isStartPageOne=1===this.options.currentPage,this._wrapTable(),this._addBasicStyles(),this._checkIfCSSIsScrollable(),this._attachLoadingMessageListener(),(this.options.isScrollable||this.options.isSortable||this.options.isPageable||this.options.checkboxToolbarEnabled||this.options.filterToolbarEnabled)&&this._addAriaRolesAndStates(),this._addRowClickWatcher(),this.options.isScrollable&&this._createScrollable(),(this.options.isPageable||this.options.isPagable)&&(this.options.isPageable=!0,this._createPageGrid()),this.options.isSortable?(this._createSortGrid(),this.updateAriaTH()):this._enableCollapseTbodyRows(),this.options.checkboxToolbarEnabled&&this._createCheckboxSelectors(),this.options.filterToolbarEnabled&&this._createFilterBarControl(),this._addRowHoverEvent(),this._addContentsAdjustmentEvent(),this._adjustContents()},destroy:function(){jQuery.Widget.prototype.destroy.apply(this,arguments),this.options.isScrollable&&this._destroyScrollable(),(this.options.isPageable||this.options.isPagable)&&this._destroyPageGrid(),this._destroyRowHoverEvent()},_addBasicStyles:function(){this.element.addClass("ui-ncbigrid").attr("cellpadding","0").attr("cellspacing","0")},_checkIfCSSIsScrollable:function(){this.element.hasClass("jig-ncbigrid-scroll")&&(this.options.isScrollable=!0)},_wrapTable:function(){var wrapper=this.element.parent().parent();wrapper.hasClass("ui-ncbigrid-outer-div")||(this.element.wrap('<div class="ui-ncbigrid-outer-div"><div class="ui-ncbigrid-inner-div"></div></div>'),wrapper=this.element.parent().parent()),0<this.element.find("caption").length&&wrapper.addClass("caption-exists");var width=this.options.width;width&&wrapper.css("width",width)},_addRowHoverEvent:function(){jQuery(this.element).on("mouseenter","tbody > tr}).on("mouseleave","tbody > tr",function(){jQuery(this).removeClass("ui-ncbigrid-row-hover")})},_destroyRowHoverEven},_addContentsAdjustmentEven},_getNumCommaIndices:function(){var columnTypes=this.options.columnTypes;if(!columnTypes)return[];for(var indices=[],i=0;i<columnTypes.length;i++)"numComma"!=columnTypes[i]&&"numberComma"!=columnTypes[i]||indices.push(i);return indices},_getCommaSeparatedValue:function(beforeDec){var valParts=parseInt(beforeDec);if(isNaN(valParts))return beforeDec;valParts=beforeDec.split("."),beforeDec=valParts[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");return valParts[1]?beforeDec+"."+valParts[1]:beforeDec},_adjustContentsForCommas:function(){var that,numCommaIndices=this._getNumCommaIndices();numCommaIndices.length&&jQuery((that=this).element).find("tbody td").each(function(){var cell=jQuery(this),index=cell.parent().find("td").index(cell);-1!=jQuery.inArray(index,numCommaIndices)&&cell.html(that._getCommaSeparatedValue(cell.html()))})},_adjustContents:function(){this.options.addCommas&&this._adjustContentsForCommas()},_addAriaRolesAndStates:function(){var table=this.element;table.attr("id")||table.attr("id",jQuery.ui.jig._generateId(this.widgetName)),table.parent().parent().attr("role","grid").attr("tabindex","0"),table.children("thead").children("tr").attr("role","row").children("th").attr({"aria-controls":table.attr("id"),role:"columnheader",tabindex:"0"}),table.children("tbody").attr({role:"alert","aria-live":"polite","aria-relevant":"text"})},updateAriaTH:function(){var table,that;this.options.isSortable&&(table=this.element,that=this,table.parent().parent().find("div, table").attr("tabindex","0").end().find("thead").find("th").each(function(index,link){var currentSort="",nextSort=that.options.ariaLabelAscending;jQuery(link).is(".sortDsc")?(currentSort="descending",nextSort=that.options.ariaLabelAscending):jQuery(link).is(".sortAsc")&&(currentSort="ascending",nextSort=that.options.ariaLabelDescending);link=jQuery(link).children("a");jQuery(link).attr("aria-label",jQuery(link).text()+": "+nextSort),""==currentSort?jQuery(link).removeAttr("aria-sort"):jQuery(link).attr("aria-sort",currentSort)}))},_createScrollabl},_destroyScrollable:function(){if(this._removeScrollClasses(),this.parts){for(var part in this.parts.scrollWrapper.removeClass("ui-ncbigrid-scroll"),this.parts.headerWrapper.remove(),this.parts)this.parts[part]=null;this.parts=null}this._windowResize&&jQuery(window).unbind("resize",this._windowResize)},_storeRefs:function(){var table=this.element;this.parts={table:table,ths:table.find("> thead th")}},_addScrollClasses:function(){var userAgent,table=this.element,scrollWrapper=table.parent().addClass("ui-ncbigrid-scroll");this.parts.scrollWrapper=scrollWrapper,!jQuery.browser.webkit||0<(userAgent=navigator.userAgent).indexOf("AppleWebKit")&&-1==userAgent.indexOf("Chrome")&&table.addClass("safari"),this.options.hortScrollbarEnabled&&scrollWrapper.addClass("ui-ncbigrid-hort-scroll")},_removeScrollClasses:function(){this.element.removeClass("ui-ncbigrid").removeClass("safari").parent().removeClass("ui-ncbigrid-scroll")},_copyCaptionHeader:function(){var headerTable=this.element,newCapt=headerTable.parent(),clonedCaption=(newCapt.parent(),headerTable.find("caption").clone()),headerTable=headerTable.find("> thead").clone(),headerTable=jQuery("<div class='ui-ncbigrid-header-wrapper'></div>").append("<table cellpadding='0' cellspacing='0' class='ui-ncbigrid ui-ncbigrid-header'></table>").find("table").append(clonedCaption).append(headerTable).end();headerTable.insertBefore(newCapt);newCapt=headerTable.find("caption");newCapt.wrapInner("<div></div>"),this.parts.captionDiv=newCapt.find("div"),this.parts.headerWrapper=headerTable,this.parts.headerThs=headerTable.find("thead th")},_setWidthHeight:function(){null!==this.options.height&&this.parts.scrollWrapper.height(this.options.height)},_setWidths:function(){var tableWidth=this.parts,table=tableWidth.table,headerWidth=tableWidth.ths,scrollWrapper=tableWidth.scrollWrapper,headerWrapper=tableWidth.headerWrapper,headerThs=tableWidth.headerThs,adjHeaderWidthIE7under=jQuery.browser.msie;!this.options.hortScrollbarEnabled&&!0!==table.data("isMinSet")&&this.element.is(":visible")&&(tableWidth=table.outerWidth(),table.width()>scrollWrapper.width()&&(scrollWrapper.css("min-width",tableWidth+16),table.data("isMinSet",!0)));headerWidth.length;var widths=[];headerWidth.each(function(ind){var wid=0;jQuery(this).is(":visible")&&(wid=jQuery(this).width()+0),widths.push(wid)});headerWidth=table.height()>scrollWrapper.height()?16:0,adjHeaderWidthIE7under=this.options.isSortable&&adjHeaderWidthIE7under&&parseInt(jQuery.browser.version,10)<8?headerWidth:0;table.parent().parent().find("table.ui-ncbigrid-header").width(table.width()+2-adjHeaderWidthIE7under);headerWidth=scrollWrapper.width()-headerWidth;headerWrapper.width(headerWidth),this.parts.captionDiv&&this.parts.captionDiv.width(headerWidth),headerThs.eac})},_handleScroll:function(scollDiv,scrollHeader,isRepeat){var scrollLeft=scollDiv.scrollLeft;scrollHeader.scrollLeft=scrollLeft,this.parts.captionDiv&&this.parts.captionDiv.css("margin-left",scrollLeft+"px");var that=thi}isRepeat||(window.setTimeout(repeat,1),window.setTimeout(repeat,5))},_registerScrollableListeners:function(){var that=this;this._windowResize=function(){that._setWidths()},jQuery(window).resize(this._windowResize);var scrollHeader=this.element.parent().parent().find(".ui-ncbigrid-header-wrapper")[0];this.element.parent().scrol}),this.element.bind("ncbigridupdated",function(){that._setWidths()}),this.element.bind("resetScroll",function(){that._resetScrollToTop()})},_resetScrollToTo},_createPageGrid:function(){this._createPageBars(),this._addPagingEvents(),this._gotoPage(this.options.currentPage)},_destroyPageGri},_pagingControlsHTML:'                                         <div class="ui-ncbigrid-paged-toolbar">                                                <div class="ui-ncbigrid-paged-countItems">Items <span class="ui-ncbigrid-paged-startRow">1</span> - <span class="ui-ncbigrid-paged-endRow">10</span> of <span class="ui-ncbigrid-paged-totalRows">10</span></div>                                                <div class="ui-ncbigrid-paged-pageControl pagination">                        <a href="#" class="ui-ncbigrid-paged-pageControl-first page_link" title="Goto First Page">&lt;&lt; First</a>                        <span class="ui-ncbigrid-paged-pageControl-first page_link" title="Inactive Goto First Page">&lt;&lt; First</span>                        <a href="#" class="ui-ncbigrid-paged-pageControl-previous page_link prev" title="Goto Previous Page">&lt; Prev</a>                        <span class="ui-ncbigrid-paged-pageControl-previous page_link prev" title="Inactive Goto Previous Page">&lt; Prev</span>                        <label>Page</label> <input type="text" value="1" size="2" title="current page number"/> of <span class="ui-ncbigrid-paged-endPage">2</span>                        <a href="#" class="ui-ncbigrid-paged-pageControl-next next page_link" title="Goto Next Page">Next &gt;</a>                        <span class="ui-ncbigrid-paged-pageControl-next next page_link" title="Inactive Goto Next Page">Next &gt;</span>                        <a href="#" class="ui-ncbigrid-paged-pageControl-last page_link" title="Goto Last Page">Last &gt;&gt;</a>                        <span class="ui-ncbigrid-paged-pageControl-last page_link" title="Inactive Goto Last Page">Last &gt;&gt;</span>                        </div>                                            </div>',_createPageBars:function(){this._pageToolBar_top=jQuery(this._pagingControlsHTML).addClass("ui-ncbigrid-paged-toolbar-top"),this._pageToolBar_bottom=jQuery(this._pagingControlsHTML).addClass("ui-ncbigrid-paged-toolbar-bottom");var table=this.element,gridWrapper=table.parent().parent();gridWrapper.prepend(this._pageToolBar_top),gridWrapper.append(this._pageToolBar_bottom),gridWrapper.children(".ui-ncbigrid-paged-toolbar-top").children(".ui-ncbigrid-paged-countItems").attr("id",jQuery.ui.jig._generateId("ui-ncbigrid-paged-countItems")),table.attr("aria-describedby",this._pageToolBar_top.children(".ui-ncbigrid-paged-countItems").attr("id")),this._pageBars=this._pageToolBar_top.add(this._pageToolBar_bottom),this._pageBars.find(":input").each(function(index,item){jQuery(item).attr("id",jQuery.ui.jig._generateId("ui-ncbigrid-paged-current-page")).prev().attr("for",jQuery(item).attr("id"))})},_removePageBars:function(){this._pageToolBar_top.remove(),this._pageToolBar_top=null,this._pageToolBar_bottom.remove(),this._pageToolBar_bottom=null,this._pageBars=null,this.element.removeAttr("aria-describedby")},_addPagingEvents:function(){var that=this,buttonsFirst=this._pageBars.find("a.ui-ncbigrid-paged-pageControl-first"),buttonsPrev=this._pageBars.find("a.ui-ncbigrid-paged-pageControl-previous"),buttonsNext=this._pageBars.find("a.ui-ncbigrid-paged-pageControl-next"),buttonsLast=this._pageBars.find("a.ui-ncbigrid-paged-pageControl-last"),textInputs=this._pageBars.find("input");buttonsFirst.click(function(e){that.gotoFirstPage(),e.preventDefault()}),buttonsPrev.click(function(e){that.gotoPrevPage(),e.preventDefault()}),buttonsNext.click(function(e){that.gotoNextPage(),e.preventDefault()}),buttonsLast.click(function(e){that.gotoLastPage(),e.preventDefault()}),textInputs.keypress(function(e){13===e.keyCode&&(that.gotoPage(this.value.replace(/,/g,"")),e.preventDefault())})},_removePagingEvents:function(){this._pageBars.find("a").unbind("click").end().find("input").unbind("keypress")},_showHidePageToolbar:function(){this._pageBars&&this.options.isPageToolbarHideable&&(parseInt(this.getRowCount())<=parseInt(this.options.pageSize)?this._pageBars.hide():this._pageBars.show())},_setPage:function(){this.element.trigger("resetScroll"),this.element.trigger("pagechanged");var currentPage=this._getCurrentPage(),maxPage=this.getMaxPage();this._showHidePageToolbar(),this._updateRows(currentPage,maxPage),this._updateButtons(currentPage,maxPage),this._updatePagingText(currentPage,maxPage),this._updateGoto(currentPage,maxPage),this._updateItemRange(currentPage,maxPage),this._pageBars.find(".ui-ncbigrid-paged-pageControl").attr({"aria-valuemin":"1","aria-controls":this.element.attr("id"),"aria-valuemax":maxPage,"aria-valuenow":currentPage}),this._notifyGridUpdated()},_updateRows:function(filteredTrs){var filterSelector=this.options.pageSize,rowCount=this.getRowCount(),start=(filteredTrs-1)*filterSelector,end=start+filterSelector,trs=this.element.find("> tbody > tr:not(.ncbigrid-row-filtered)"),hasMultiTbody=1<this.element.find("> tbody").length,filteredTrs=0;hasMultiTbody&&0<start&&(filteredTrs=trs.filter(":lt("+start+")").filter(":has(th)").length);filterSelector="";end<rowCount&&(filterSelector+=":lt("+(end+filteredTrs)+")"),0<start&&(filterSelector+=":gt("+(start-1+filteredTrs)+")");filteredTrs=trs;if(0<filterSelector.length&&(trs.not(".ui-ncbigrid-rowHidden").addClass("ui-ncbigrid-rowHidden"),filteredTrs=trs.filter(filterSelector)),filteredTrs.removeClass("ui-ncbigrid-rowHidden"),hasMultiTbody){var thCount=filteredTrs.filter(":has(th)").length;if(0<thCount)for(var addCount=0,nextRow=filteredTrs.last().next();addCount<thCount&&1===nextRow.length;)nextRow.hasClass("ncbigrid-row-filtered")||(nextRow.has("th")||addCount++,nextRow.removeClass("ui-ncbigrid-rowHidden")),nextRow=nextRow.next()}this._notifyGridUpdated()},_updateButtons:function(lastSpan,lastLink){var isOnly2Pages=2===lastLink,firstSpan=1===lastSpan,firstLink=this._pageBars.find("a.ui-ncbigrid-paged-pageControl-previous,a.ui-ncbigrid-paged-pageControl-first").css("display",firstSpan?"none":"inline").filter("a.ui-ncbigrid-paged-pageControl-first"),firstSpan=this._pageBars.find("span.ui-ncbigrid-paged-pageControl-previous,span.ui-ncbigrid-paged-pageControl-first").css("display",firstSpan?"inline":"none").filter("span.ui-ncbigrid-paged-pageControl-first"),lastSpan=lastSpan===lastLink||0==lastLink,lastLink=this._pageBars.find("a.ui-ncbigrid-paged-pageControl-next,a.ui-ncbigrid-paged-pageControl-last").css("display",lastSpan?"none":"inline").filter("a.ui-ncbigrid-paged-pageControl-last"),lastSpan=this._pageBars.find("span.ui-ncbigrid-paged-pageControl-next,span.ui-ncbigrid-paged-pageControl-last").css("display",lastSpan?"inline":"none").filter("span.ui-ncbigrid-paged-pageControl-last");isOnly2Pages&&firstLink.add(firstSpan).add(lastLink).add(lastSpan).css("display","none")},_updatePagingText:function(currentPage,maxPage){maxPage<1&&(maxPage=1),this.options.addCommas&&(maxPage=this._getCommaSeparatedValue(""+maxPage)),this._pageBars.find("div.ui-ncbigrid-paged-pageControl").find("span.ui-ncbigrid-paged-endPage").html(maxPage)},_updateGoto:function(currentPage){this.options.addCommas&&(currentPage=this._getCommaSeparatedValue(""+currentPage)),this._pageBars.find("input").val(currentPage)},_updateItemRange:function(end,maxPage){var pageControl=parseInt(this.options.pageSize,10),rowCount=this.getRowCount(),start=(end-1)*pageControl+1,end=start+pageControl-1;rowCount<end&&(end=rowCount),0==rowCount&&(start=0),this.options.addCommas&&(rowCount=this._getCommaSeparatedValue(""+rowCount),start=this._getCommaSeparatedValue(""+start),end=this._getCommaSeparatedValue(""+end));pageControl=this._pageBars.find("div.ui-ncbigrid-paged-countItems");pageControl.find("span.ui-ncbigrid-paged-startRow").html(start),pageControl.find("span.ui-ncbigrid-paged-endRow").html(end),pageControl.find("span.ui-ncbigrid-paged-totalRows").html(rowCount)},_getCurrentPage:function(){return this.options.currentPage},getCurrentPage:function(){return this._getCurrentPage()},getMaxPage:function(){return Math.ceil(this.getRowCount()/this.options.pageSize)},getRowCount:function(){return jQuery(this.element).find("> tbody > tr:not(.ncbigrid-row-filtered):not(:has(> th))").length},getHeaderRowCoun},gotoFirstPage:function(){this._gotoPage(1)},gotoLastPag},gotoNextPag},gotoPrevPag},gotoPag},_gotoPage:function(pageNum){(isNaN(pageNum)||pageNum<1||pageNum>this.getMaxPage()&&(pageNum=this.getMaxPage())<1)&&(pageNum=1),this.options.currentPage=pageNum,this._pagingSelectAllQuestions&&this._pagingSelectAllQuestions.hide(),this._setPage()},_createSortGrid:function(){var col=this.options.sortColumn;-1!==this.options.sortColumn&&(col=col-1,this.options.sortColumn=-1!=col?col:0),this._indexGrid(),this._addSortEvents(),this._setSortHeaders(),this._checkInitialState(),this._notifyGridUpdated()},_destroySortGrid:function(){},reindex:function(){for(var i=0;i<this.element.find("tbody tr:eq(0) td").length;i++)this.element.data("sort_order_col_"+i,null);this.element.data("rows",null),this._indexGrid()},_indexGrid:function(){var that=this,tbody=this.element.find("> tbody");if(0!==tbody.length)for(var currentTbody,tbIndex,rows,header,rowsOrg,cntAdj,trs,cnt,rowCount,tb=0;tb<tbody.length;tb++)currentTbody=tbody[tb],tbIndex=tb,rowCount=cnt=trs=cntAdj=rowsOrg=header=rows=void 0,rows=[],header=[],rowsOrg=[],cntAdj=0,trs=jQuery(currentTbody).find("> tr"),(cnt=0)!==(rowCount=trs.length)?(that._isIndexed=!0,function loopDeLoop(){for(var i=0;i<50&&cnt<rowCount;i++){var row=trs[cnt],rowData=that.getRowValues_DOM(row);0==rowData.length?(that._enableCollapseTbodyRows(row),header.push(row),cntAdj++):(rowData.unshift(cnt-cntAdj,row),rows.push(rowData),rowsOrg.push(rowData)),cnt++}cnt<rowCount?window.setTimeout(loopDeLoop,0):(that.element.data("tbody"+tbIndex+"-rows",rowsOrg),that.element.data("tbody"+tbIndex+"-header",header),that._presort(rows,tbIndex))}()):that._isIndexed=!1;else this._isIndexed=!1},_presort:function(rows,tbodyIndex){var that=this;function mergeSortWrapper(data,column,onComplete){var custSort=function(column){var custSort=that.options.sortFunctions[column-2];if(custSort=custSort||that.element.find("> thead th:eq("+(column-2)+")").data("sortfunc")){if("function"==typeof custSort)return custSort;if(0===custSort.indexOf("fnc:")){for(var parts=custSort.substr(4,custSort.length).split("."),cType=window[parts[0]],i=1;i<parts.length;i++)cType=cType[parts[i]];return that.options.sortFunctions[column]=cType}}return null}(column);function mergeSort(right){if(right.length<2)return right;var middle=parseInt(right.length/2),left=right.slice(0,middle),right=right.slice(middle,right.length);return function(left,right){var result=[];for(;left.length&&right.length;)(custSort?-that.options.sortColumnDir==custSort.call(that,{data:left[0][column],row:jQuery(left[0][1])},{data:right[0][column],row:jQuery(right[0][1])}):left[0][column]<=right[0][column])?result.push(left.shift()):result.push(right.shift());for(;left.length;)result.push(left.shift());for(;right.length;)result.push(right.shift());return result}(mergeSort(left),mergeSort(right))}var loopSize=jQuery.browser.msie?100:1e3,curInd=0,array=[];!function(){for(var j=0;j<loopSize&&curInd<data.length;j++)array.push(data[curInd]),curInd++;curInd<data.length?setTimeout(arguments.callee,0):onComplete(mergeSort(array),column)}()}function cacheOrder(array,column){var curInd=0,ord=[];!function(){for(var j=0;j<50&&curInd<array.length;j++)ord.push(array[curInd][0]),curInd++;curInd<array.length?setTimeout(arguments.callee,0):that.element.data("tbody"+tbodyIndex+"-sort_order_col_"+(column-2),ord)}()}for(var numColumns=rows[0].length,numCol=2;numCol<numColumns;numCol++)"none"!==this._getColumnType(numCol-2)&&mergeSortWrapper(rows,numCol,cacheOrder)},_getColumnType:function(colIndex){return this.options.columnTypes[colIndex]||this.element.find("> thead th:eq("+colIndex+")").data("columntype")||"str"},getColumnTyp},getRowValues:function(row){"number"==typeof row&&(row=this.element.find("tbody tr:eq("+row+")"));for(var out=[],tds=row[0].getElementsByTagName("td"),tdsLength=tds.length,i=0;i<tdsLength;i++)out.push(this._getCellValueHelper(tds[i].innerHTML,i));return out},getRowValues_DOM:function(row){for(var out=[],tds=jQuery(row).children("td"),tdsLength=tds.length,i=0;i<tdsLength;i++)out.push(this._getCellValueHelper(tds[i].textContent||tds[i].innerText||"",i));return out},_getCellValue:function(stringText,columnIndex){stringText=stringText.html();return this._getCellValueHelper(stringText,columnIndex)},_getCellValueHelper:function(stringText,columnIndex){var cellType=this._getColumnType(columnIndex);switch(cellType){case"num":case"number":case"float":return void 0!==stringText&&0<stringText.length?parseFloat(stringText):Number.POSITIVE_INFINITY;case"int":return void 0!==stringText&&0<stringText.length?parseInt(stringText,10):Number.POSITIVE_INFINITY;case"numberComma":case"numComma":var str=(stringText||"").replace(/[, ]/g,"");return 0<str.length?parseFloat(str):Number.POSITIVE_INFINITY;case"date":return new Date(stringText);case"str-insensitive":return stringText.toLowerCase();case"str":default:if("function"==typeof cellType)return cellType(stringText);if(0!==cellType.indexOf("fnc:"))return stringText||"";for(var parts=cellType.substr(4,cellType.length).split("."),cType=window[parts[0]],i=1;i<parts.length;i++)cType=cType[parts[i]];return(this.options.columnTypes[columnIndex]=cType)(stringText)}},getCellValue:function(td,column){"number"==typeof td&&(td=this.element.find("tbody tr:eq("+td+")"));td=td.find("td:eq("+column+")");return this._getCellValue(td,column)},_addSortEvents:function(){var that=this,allThs=this.element.find("> thead tr:eq("+this.options.sortRowIndex+") th");this.element.bind("ncbigridcontentchanged",function(){that.reindex()});var linkStr="<a href='#' title='"+this.options.titleAscending+"'></a>";function addLinks(ind){"none"!==that._getColumnType(ind)&&jQuery(this).wrapInner(linkStr).find("a").data("index",ind)}allThs.each(addLinks);this.parts&&this.parts.headerThs&&(this.parts.headerThs.each(addLinks),allThs=allThs.add(this.parts.headerThs)),allThs.find("a").clic})},sort:function(index,direction){this._sort(index-1,direction)},_sort:function(index,sortDirection){this._isIndexed&&(this.options.isPageable&&this.element.trigger("resetCheckboxes"),void 0===(sortDirection=sortDirection)&&(sortDirection=this.options.sortColumn!==index?1:-1*this.options.sortColumnDir),this.options.sortColumn=index,this.options.sortColumnDir=sortDirection,this.element.trigger("ncbigridshowloadingbar"),this._setSortHeaders(),this._waitForCache())},_setSortHeaders:function(){var tableThs=this.element.find("> thead tr:eq("+this.options.sortRowIndex+") th"),scrollThs=null;this.parts&&this.parts.headerThs&&(scrollThs=this.parts.headerThs),tableThs.add(scrollThs).removeClass("sortAsc sortDsc").addClass("sortNone").find("a").attr("title",this.options.titleAscending);var sortClass,titleText,sortColumn=this.options.sortColumn;-1!==this.options.sortColumn&&(sortClass=1===this.options.sortColumnDir?"sortAsc":"sortDsc",titleText=1===this.options.sortColumnDir?this.options.titleDescending:this.options.titleAscending,tableThs.eq(sortColumn).addClass(sortClass).removeClass("sortNone").find("a").attr("title",titleText),scrollThs&&scrollThs.eq(sortColumn).addClass(sortClass).removeClass("sortNone").find("a").attr("title",titleText)),this.options.isSortable&&this.updateAriaTH()},_waitForCache:function(){for(var that=this,colIndex=this.options.sortColumn,tbodies=this.element.find("tbody"),i=0;i<tbodies.length;i++)!function(tbIndex){var fnc,rowOrder=that.element.data("tbody"+tbIndex+"-sort_order_col_"+colIndex);rowOrder?that._setTheRows(rowOrder,tbIndex):(fnc=arguments.callee,setTimeou},10))}(i)},_setTheRows:function(rowOrder,tbody){var header=this.element.data("tbody"+tbody+"-header"),rows=this.element.data("tbody"+tbody+"-rows"),tbody=this.element.find("tbody:eq("+tbody+")"),newTbody=jQuery("<tbody>"),headerLength=header.length;if(0<headerLength)for(var i=0;i<headerLength;i++){var newHeader=header[i];newTbody.append(newHeader)}if(1==this.options.sortColumnDir)for(i=0;i<rowOrder.length;i++){var newRow=rows[rowOrder[i]][1];newTbody.append(newRow)}else for(i=rowOrder.length-1;0<=i;i--){newRow=rows[rowOrder[i]][1];newTbody.append(newRow)}tbody.replaceWith(newTbody),this.element.trigger("ncbigridhideloadingbar"),this.options.isPageable&&(this._isStartPageOne?this.gotoFirstPage():(this._gotoPage(this.options.currentPage),this._isStartPageOne=!0)),this.element.trigger("ncbigridcolumnsorted",[this.options.sortColumn+1,this.options.sortColumnDir])},_checkInitialState:function(){this.options.isPresorted||-1===this.options.sortColumn||this._sort(this.options.sortColumn,this.options.sortColumnDir)},_checkboxControlsHTML:'                                         <div class="ui-ncbigrid-checkbox-toolbar">                        \t\t\t\t\t\t<label>Select:</label>\t\t\t\t\t\t<a href="#" class="ui-ncbigrid-select-all">All</a>\t\t\t\t\t\t<a href="#" class="ui-ncbigrid-select-none">None</a>\t\t\t\t\t\t<label>Selected:</label>\t\t\t\t\t\t<span class="ui-ncbigrid-selected-text">0</span>                                            </div>',_pagingSelectAllQuestionHTML:'<div class="ui-ncbigrid-select-question">All <span class="ui-ncbigrid-select-row-count">10</span> items on this page are <span class="selectText1">selected</span>. <a href="#" class="ui-ncbigrid-select-question-all"><span class="selectText2">Select</span> all rows in table</a> <a href="#" class="ui-ncbigrid-select-question-cancel">Cancel</a></div>',_createCheckboxSelectors:function(){this._createCheckboxBar(),this._addCheckboxEvents(),this._updateCount()},_createCheckboxBar:function(){this._checkboxToolBar_top=jQuery(this._checkboxControlsHTML).addClass("ui-ncbigrid-checkbox-toolbar-top"),this._checkboxToolBar_bottom=jQuery(this._checkboxControlsHTML).addClass("ui-ncbigrid-checkbox-toolbar-bottom");var gridWrapper=this.element.parent().parent();gridWrapper.prepend(this._checkboxToolBar_top),this.options.isPageable?(this._checkboxToolBar_bottom.insertBefore(this._pageToolBar_bottom),this._addSelectAllQuestionToolbar()):gridWrapper.append(this._checkboxToolBar_bottom),gridWrapper.find(".ui-ncbigrid-checkbox-toolbar").attr("aria-controls",this.element.attr("id")),this._chekboxBars=this._checkboxToolBar_top.add(this._checkboxToolBar_bottom)},_addCheckboxEvents:function(){var that=this;this._chekboxBars.find("a.ui-ncbigrid-select-all").clic}),this._chekboxBars.find("a.ui-ncbigrid-select-none").click(function(event){that.uncheckAll(),that._askSelectAllQuestion(!0),event.preventDefault()}),jQuery(this.element).on("click","tbody",function(event){that._rowClicked(event)}),this.element.bind("resetCheckboxes",function(){that.uncheckAll()}),this._addSelectAllQuestionToolbarEvents()},_addSelectAllQuestionToolbar:function(){this.options.checkboxToolbarEnabled&&(this._pagingSelectAllQuestion_top=jQuery(this._pagingSelectAllQuestionHTML).addClass("ui-ncbigrid-select-question-header"),this._pagingSelectAllQuestion_bottom=jQuery(this._pagingSelectAllQuestionHTML).addClass("ui-ncbigrid-select-question-footer"),this._pagingSelectAllQuestion_top.insertAfter(this._pageToolBar_top),this._pagingSelectAllQuestion_bottom.insertAfter(this._pageToolBar_bottom),this._pagingSelectAllQuestions=this._pagingSelectAllQuestion_top.add(this._pagingSelectAllQuestion_bottom),this._pagingSelectAllQuestions.find(".ui-ncbigrid-select-question-all").attr("aria-controls",this.element.attr("id")))},_addSelectAllQuestionToolbarEvents:function(){var that;this.options.checkboxToolbarEnabled&&((that=this)._pagingSelectAllQuestions.find("a.ui-ncbigrid-select-question-all").click(function(e){that[that._askAllSelectionMode](!0),that._pagingSelectAllQuestions.hide(),e.preventDefault()}),this._pagingSelectAllQuestions.find("a.ui-ncbigrid-select-question-cancel").clic}),this.element.bind("ncbigridpagechanged checkboxrowclicked}))},_askSelectAllQuestion:function(isNone){this._askAllSelectionMode=isNone?"uncheckAll":"checkAll",this.options.isPageable&&(parseInt(this.getRowCount())>=parseInt(this.options.pageSize)?(this._pagingSelectAllQuestions.show(),this._updateSelectPageCount(isNone)):this._pagingSelectAllQuestions.hide())},_updateSelectPageCount:function(isNone){var selectedCount=this.element.find("> tbody > tr > td > input[type=checkbox]:visible").length;this._pagingSelectAllQuestions.find(".ui-ncbigrid-select-row-count").html(selectedCount),this._pagingSelectAllQuestions.find(".selectText1").html(isNone?"deselected":"selected"),this._pagingSelectAllQuestions.find(".selectText2").html(isNone?"Deselect":"Select")},_updateCount:function(){var count=this.element.find("tbody input[type=checkbox]"),count=(0<count.length?count.filter(":checked"):this.element.find("tbody tr.ui-ncbigrid-row-selected")).length;this._chekboxBars.find("span.ui-ncbigrid-selected-text").html(count)},_checkHelper:function(state,acrossAllPages){var rows;acrossAllPages?(rows=jQuery(this.element).find("> tbody > tr:not(.ncbigrid-row-filtered) > td > input[type=checkbox]"),this._trigger(state?"checkall":"uncheckall",null,[state]),this._checkAllState=state):rows=state&&this.options.isPageable?this.element.find("> tbody > tr > td > input[type=checkbox]:visible"):this.element.find("> tbody > tr > td >  input[type=checkbox]"),rows.prop("checked",state),rows=0===rows.length?this.element.find("tbody tr").data("row-selected",state):rows.closest("tr"),state?rows.addClass("ui-ncbigrid-row-selected"):rows.removeClass("ui-ncbigrid-row-selected"),this._updateCount()},checkAll:function(acrossAllPages){this._checkHelper(!0,acrossAllPages),this._trigger("selectallclicked",null,[{acrossAllPages:acrossAllPages}])},uncheckAll:function(acrossAllPages){this._checkHelper(!1,acrossAllPages),this._trigger("selectnoneclicked",null,[{acrossAllPages:acrossAllPages}])},_rowClicked:function(cb){var checkboxState,parentRow=jQuery(cb.target||cb.srcElement),cb=null;parentRow.is("input[type=checkbox]")?checkboxState=(cb=parentRow).is(":checked"):parentRow.is("a")||(checkboxState=!(cb=parentRow.closest("tr").find("input[type=checkbox]")).is(":checked"),cb.prop("checked",checkboxState));parentRow=parentRow.closest("tr");cb&&0===cb.length&&(checkboxState=!parentRow.data("row-selected"),parentRow.data("row-selected",checkboxState)),checkboxState?parentRow.addClass("ui-ncbigrid-row-selected"):parentRow.removeClass("ui-ncbigrid-row-selected"),this.element.trigger("checkboxrowclicked"),this._updateCount()},_filterBarControlsHTML:'                                         <div class="ui-ncbigrid-filter-toolbar">                        \t\t\t\t\t\t\t<label>Filter:</label>\t\t\t\t\t\t\t<input type="text" name="gridFilter" />                                            </div>',_createFilterBarContro},_createFilterBar:function(){this._filterToolBar=jQuery(this._filterBarControlsHTML);var gridWrapper=this.element.parent().parent();gridWrapper.prepend(this._filterToolBar).children(".ui-ncbigrid-filter-toolbar").attr("aria-controls",this.element.attr("id")),gridWrapper.addClass("filterToolbar-exists");var gridFilterId=jQuery.ui.jig._generateId("gridFilter");gridWrapper.children(".ui-ncbigrid-filter-toolbar").children(":input").attr("id",gridFilterId).prev().attr("for",gridFilterId)},_addFilterEvents:function(){var that=this;this._filterToolBar.find("input[type=text]").keyu})},_filterGrid:function(event,skipFilter){this._lastRunFilter||(this._lastRunFilter="");var currentText=skipFilter.value,isCaseInsensitive=this.options.filterToolbarIsCaseInsensitive||null,col=this.options.filterToolbarColumnIndex||null,isInverse=this.options.filterToolbarIsInverse||null;if(0<this._lastRunFilter.length&&0!==currentText.indexOf(this._lastRunFilter)&&this.removeFilterRows(),this._lastRunFilter=currentText,0<this._lastRunFilter.length){skipFilter=!1;if(this.options.regExp)try{currentText=RegExp(currentText.replace(/(^\/)|(\/$)/g,""))}catch(e){skipFilter=!0}skipFilter||this.filterRows(currentText,isCaseInsensitive,col,isInverse)}},_custFilterCnt:0,filterRows:function(txt,isCaseInsensitive,col,rows){if(void 0!==txt&&0!==txt.length){this.element.trigger("ncbigridshowloadingbar"),jQuery.isArray(txt)||(txt=[[orgTxt=txt,isCaseInsensitive,col,rows]]);for(var filteredRows,remainingRows,rows=remainingRows=jQuery("tbody tr:not(.ncbigrid-row-filtered)",this.element),j=0;j<txt.length;j++){var cnt=txt[j],currTxt=cnt[0],_col=(cnt[1],cnt[2]),colMatch="";null!=_col&&(colMatch=":nth-child("+_col+")");var oppFilter=cnt[3]?"not-":"",sen="",filterFnc=null;"function"==typeof currTxt?(sen="-functionTest",cnt=this._custFilterCnt,this._custFilterCnt=cnt+1,filterFnc="filter_temp_"+cnt,jQuery.ui.jig[filterFnc]=currTxt,currTxt="jQuery.ui.jig."+filterFnc):currTxt.constructor&&0<currTxt.constructor.toString().indexOf("RegExp")?sen="-regexp":isCaseInsensitive&&(sen="-insensitive"),remainingRows=null!==_col?remainingRows.find("td"+colMatch+":"+oppFilter+"contains"+sen+"("+currTxt+")").parent():remainingRows.filter(":"+oppFilter+"contains"+sen+"("+currTxt+")"),filterFnc&&(jQuery.ui.jig[filterFnc]=null)}var filteredCount,cntRow,that=this;rows?(filteredCount=(filteredRows=rows.not(remainingRows)).length,cntRow=0,function(){for(;cntRow<filteredCount;)filteredRows.eq(cntRow).addClass("ncbigrid-row-filtered").attr("isfiltered","true"),cntRow++;completed()}()):completed()}function completed(){that.options.isPageable&&that._gotoPage(0),that.element.trigger("ncbigridfilterapplied",[txt,isCaseInsensitive,col,filteredRows,remainingRows]).trigger("ncbigridhideloadingbar"),that._notifyGridUpdated()}},removeFilterRows:function(txt,isCaseInsensitive,col,cnt,isInverse){var filterTypeStart,filterTypeEnd,sen,orgTxt,filterFnc,selText,whatToRemove=null;whatToRemove=void 0!==txt&&0<txt.length?(void 0===cnt&&(cnt=!0),filterTypeEnd=filterTypeStart="",(cnt||isInverse)&&(filterTypeStart=":not(",filterTypeEnd=")"),orgTxt=sen="",filterFnc=null,"function"==typeof txt?(sen="-functionTest",cnt=this._custFilterCnt,this._custFilterCnt=cnt+1,filterFnc="filter_temp_"+cnt,jQuery.ui.jig[filterFnc]=txt,orgTxt=txt,txt="jQuery.ui.jig."+filterFnc):txt.constructor&&0<txt.constructor.toString().indexOf("RegExp")?sen="-regexp":isCaseInsensitive&&(sen="-insensitive"),null!=col?(selText="tbody tr[isfiltered='true'] td:nth-child("+col+")"+filterTypeStart+":"+(isInverse?"not-":"")+"contains"+sen+"("+txt+")"+filterTypeEnd,this.element.find(selText).parent()):(selText="tbody tr[isfiltered='true']"+filterTypeStart+":contains"+sen+"("+txt+")"+filterTypeEnd,this.element.find(selText))):this.element.find("tr.ncbigrid-row-filtered");var whatToRemoveCount,cntRow,that=this;function completed(){filterFnc&&(jQuery.ui.jig[filterFnc]=null,txt=orgTxt),that.options.isPageable&&that._gotoPage(0),that.element.trigger("ncbigridfilterremoved",[txt,isCaseInsensitive,col]),that.options.isPageable?that._gotoPage(that.options.currentPage):that._notifyGridUpdated()}null!==whatToRemove?(whatToRemoveCount=whatToRemove.length,cntRow=0,function(){for(;cntRow<whatToRemoveCount;)whatToRemove.eq(cntRow).removeClass("ncbigrid-row-filtered").attr("isfiltered","false"),cntRow++;completed()}()):completed()},showColumn:function(col){var tables=this.element;this.options.isScrollable&&(tables=tables.add(this.parts.headerWrapper.find("table"))),tables.children().find(">tr>*:nth-child("+col+")").removeClass("ui-ncbigrid-column-hidden"),this._setColumnHiddenData(col,!1),this.element.trigger("showColumn",[col]),this._notifyGridUpdated()},hideColumn:function(col){var tables=this.element;this.options.isScrollable&&(tables=tables.add(this.parts.headerWrapper.find(">table"))),tables.children().find(">tr>*:nth-child("+col+")").addClass("ui-ncbigrid-column-hidden"),this._setColumnHiddenData(col,!0),this.element.trigger("hideColumn",[col]),this._notifyGridUpdated()},_setColumnHiddenData:function(col,isHidden){var dataHiddenCols=this.element.data("dataHiddenCols");(dataHiddenCols=dataHiddenCols||[])[col]=isHidden,this.element.data("dataHiddenCols",dataHiddenCols)},getHiddenShownColumns:function(){var colsHidden=[],colsShow=[],dataCols=this.element.data("dataHiddenCols");if(dataCols)for(var col in dataCols)(dataCols[col]?colsHidden:colsShow).push(col);return{hidden:colsHidden,shown:colsShow}},_attachLoadingMessageListener:function(){var that=this;this.element.bind("ncbigridshowloadingbar",function(){that._showLoadingMessage()}).bind("ncbigridhideloadingbar",function(){that._hideLoadingMessage()})},_showLoadingMessage:function(){this.options.isLoadingMessageShown&&(this.isPopperAttached||(this.element.parent().parent().ncbipopper({triggerPosition:"top center",destPosition:"top center",hasArrow:!1,closeEvent:"custom",openEvent:"custom",openAnimation:"none",closeAnimation:"none",destText:this.options.loadingText,isDestElementCloseClick:!1,isDocumentElementCloseClick:!1,isEscapeKeyClose:!1,isTriggerElementCloseClick:!1}),this.isPopperAttached=!0),this.element.parent().parent().ncbipopper("open"))},_hideLoadingMessage:function(){this.options.isLoadingMessageShown&&this.element.parent().parent().ncbipopper("close")},_addRowClickWatcher:function(){var that=this;jQuery(this.element).on("click","tbody",function(row){var clickData=jQuery(row.srcElement||row.target).closest("td");1===clickData.length&&(clickData={row:row=clickData.closest("tr"),cell:clickData,rowIndex:row[0].rowIndex,cellIndex:clickData[0].cellIndex},that.element.trigger("ncbigridrowclick",[clickData]))})},_notifyGridUpdated:function(){this.element.trigger("ncbigridupdated")},_notifyGridContentChange},addHTMLRowData:function(htmlStr,indx,loc,tbodyInd){var rowCount=this.getRowCount(),selector="",selector=void 0===indx?":last-child":(rowCount<indx?indx=rowCount:indx<0&&(indx=1,loc="before"),":nth-child("+indx+")"),tbodyInd=void 0!==tbodyInd?":eq("+tbodyInd+")":"";0===rowCount?jQuery("tbody"+tbodyInd+selector,this.element).append(htmlStr):loc&&"before"===loc.toLowerCase()?jQuery("tbody"+tbodyInd+" tr"+selector,this.element).before(htmlStr):jQuery("tbody"+tbodyInd+" tr"+selector,this.element).after(htmlStr),this.options.isPageable?this._gotoPage(this.options.currentPage):this._notifyGridUpdated(),this._notifyGridContentChanged()},_deleteRowHelper:function(selector,tbodyInd){tbodyInd=void 0!==tbodyInd?":eq("+tbodyInd+")":"";selector?this.element.find("tbody"+tbodyInd+" tr"+selector).remove():this.element.find("tbody"+tbodyInd).empty()},deleteAllRows:function(){this._deleteRowHelper(),this.options.isPageable&&this._gotoPage(0),this._notifyGridUpdated(),this._notifyGridContentChanged()},deleteRow:function(ind,tbodyIndex){if(void 0!==ind){for(var i=(ind=jQuery.isArray(ind)?ind.sort():[ind]).length-1;0<=i;i--)this._deleteRowHelper(":nth-child("+ind[i]+")",tbodyIndex);this.options.isPageable&&this._gotoPage(this.options.currentPage),this._notifyGridUpdated(),this._notifyGridContentChanged()}},getCellData:function(cell,columnIndex,tbodyIndex){if(void 0!==cell&&void 0!==columnIndex){cell=jQuery("tbody"+(void 0!==tbodyIndex?":eq("+tbodyIndex+")":"")+" tr:nth-child("+cell+") td:nth-child("+columnIndex+")",this.element);return 0==cell.length?null:this._getCellValue(cell,columnIndex)}},getColumnCount:function(cnt){cnt=!1===cnt?":visible":"",cnt=jQuery(this.element).find("tbody tr:not(.ui-ncbigrid-rowHidden):eq(0) td"+cnt).length;return 0===cnt&&(cnt=jQuery(this.element).find("> thead tr:last th").length),cnt},getColumnData:function(col,tbodyIndex){if(void 0===col)return null;if(jQuery.isArray(col)){for(var colData=[],i=0;i<col.length;i++)(col[i]<=0||col[i]>this.getColumnCount())&&colData.push(null),colData.push(this._getColumnDataHelper(col[i]),tbodyIndex);return colData}return col<=0||col>this.getColumnCount()?void 0:this._getColumnDataHelper(col,tbodyIndex)},_getColumnDataHelper:function(col,tbodyInd){var rows=[],ref=this,colType=this._getColumnType(col-1);"str"!==colType&&colType||(colType="str-sensitive");tbodyInd=void 0!==tbodyInd?":eq("+tbodyInd+")":"";if(jQuery("tbody"+tbodyInd+" tr td:nth-child("+col+")",this.element).each(function(ind,obj){rows.push(ref._csColumnTypeConversion(obj,colType,!0))}),0!==rows.length)return rows},getRowData:function(row,tbodyIndex){if(void 0!==row){if(jQuery.isArray(row)){for(var rowData=[],i=0;i<row.length;i++)rowData.push(this._getRowDataHelper(row[i]),tbodyIndex);return rowData}return this._getRowDataHelper(row,tbodyIndex)}},_getRowDataHelper:function(row,tbodyInd){var cols=[],that=this,tbodyInd=void 0!==tbodyInd?":eq("+tbodyInd+")":"";if(jQuery("tbody"+tbodyInd+" tr:nth-child("+row+") td",this.element).each(function(ind,obj){cols.push(that._getCellValue(jQuery(this),ind))}),0!==cols.length)return cols},highlightRows:function(txt,isCaseInsensitive,col,oppFilter){var isIE6=jQuery.browser.msie&&parseFloat(jQuery.browser.version)<7;if(void 0!==txt&&0!==txt.length){this.element.trigger("ncbigridshowloadingbar");var highlightedRows=[],sen=isCaseInsensitive?"-insensitive":"",oppFilter=oppFilter?"not-":"";return txt.constructor&&0<txt.constructor.toString().indexOf("RegExp")&&(sen="-regexp",oppFilter=""),void 0!==col?jQuery("tbody tr td"+(":nth-child("+col+")")+":"+oppFilter+"contains"+sen+"("+txt+")",this.element).each(function(ind,classToAdd){var tr=jQuery(classToAdd).parent(),classToAdd="ui-ncbigrid-high";isIE6&&(classToAdd=tr.hasClass("ui-ncbigrid-row-even")?"ui-ncbigrid-row-even-high-IE6":"ui-ncbigrid-row-odd-high-IE6"),tr.addClass(classToAdd),-1===jQuery.inArray(tr,highlightedRows)&&highlightedRows.push(tr)}):jQuery("tbody tr:"+oppFilter+"contains"+sen+"("+txt+")",this.element).each(function(ind,classToAdd){var tr=jQuery(classToAdd),classToAdd="ui-ncbigrid-high";isIE6&&(classToAdd=tr.hasClass("ui-ncbigrid-row-even")?"ui-ncbigrid-row-even-high-IE6":"ui-ncbigrid-row-odd-high-IE6"),tr.addClass(classToAdd),highlightedRows.push(tr)}),this.element.trigger("ncbigridhighlightapplied",[txt,isCaseInsensitive,col,highlightedRows]).trigger("ncbigridhideloadingbar"),{highlightedRows:highlightedRows}}},removeHighlightRows:function(txt,isCaseInsensitive,col,oppFilter){var highlightedRows,sen,isIE6=jQuery.browser.msie&&parseFloat(jQuery.browser.version)<7;void 0!==txt&&0<txt.length?(highlightedRows=[],sen=isCaseInsensitive?"-insensitive":"",oppFilter=oppFilter?"not-":"",txt.constructor&&0<txt.constructor.toString().indexOf("RegExp")&&(sen="-regexp",oppFilter=""),void 0!==col?jQuery("tbody tr td"+(":nth-child("+col+")")+":"+oppFilter+"contains"+sen+"("+txt+")",this.element).each(function(ind,tr){tr=jQuery(tr).parent().removeClass("ui-ncbigrid-high");isIE6&&tr.removeClass("ui-ncbigrid-row-odd-high-IE6").removeClass("ui-ncbigrid-row-even-high-IE6"),-1===jQuery.inArray(tr,highlightedRows)&&highlightedRows.push(tr)}):jQuery("tbody tr:"+oppFilter+"contains"+sen+"("+txt+")",this.element).each(function(ind,tr){tr=jQuery(tr).removeClass("ui-ncbigrid-high");isIE6&&tr.removeClass("ui-ncbigrid-row-odd-high-IE6").removeClass("ui-ncbigrid-row-even-high-IE6"),highlightedRows.push(tr)})):(jQuery(".ui-ncbigrid-high",this.element).removeClass("ui-ncbigrid-high"),isIE6&&jQuery(".ui-ncbigrid-row-odd-high-IE6, .ui-ncbigrid-row-even-high-IE6",this.element).removeClass("ui-ncbigrid-row-odd-high-IE6").removeClass("ui-ncbigrid-row-even-high-IE6")),this.element.trigger("ncbigridhighlightremoved",[txt,isCaseInsensitive,col])},setCellData:function(row,col,text,tbodyIndex){jQuery("tbody"+(void 0!==tbodyIndex?":eq("+tbodyIndex+")":"")+" tr:nth-child("+row+") td:nth-child("+col+")",this.element).text(text),this.element.trigger("ncbigridcellchange",[row,col,this.getCellData(row,col)]),this._notifyGridUpdated(),this._notifyGridContentChanged()},setRowData:function(row,data,tbodyIndex){jQuery("tbody"+(void 0!==tbodyIndex?":eq("+tbodyIndex+")":"")+" tr:nth-child("+row+") td",this.element).eac}),this.element.trigger("ncbigridrowchange",[row,this.getRowData(row,tbodyIndex)]),this._notifyGridUpdated(),this._notifyGridContentChanged()},_enableCollapseTbodyRows:function(row){var that;this.options.collapseRowsEnabled&&(row=row||jQuery(this.element).find("tbody tr:has(th)"),that=this,jQuery(row).each(function(){jQuery(this).addClass("ui-ncbigrid-collapsable").find("th").eq(0).prepend('<span class="collapsableTbodyIcon ui-icon ui-icon-plus-minus-big-open"></span>').find("span").click(function(e){e.stopPropagation(),that._collapseTbodyRows(this.parentNode.parentNode)}).end().end().not(".ignoreCollapse").clic})}))},_collapseTbodyRows:function(rowHeading){jQuery(rowHeading).find("th span.collapsableTbodyIcon").toggleClass("ui-icon-plus-minus-big").toggleClass("ui-icon-plus-minus-big-open").end().siblings().toggleClass("collapsed")}}),jQuery.extend(jQuery.expr[":"],{"contains-insensitive":function(elem,i,match,array){return 0<=(elem.textContent||elem.innerText||"").toLowerCase().indexOf((match[3]||"").toLowerCase())}}),jQuery.extend(jQuery.expr[":"],{"contains-regexp":function(rExp,i,re,array){var txt=jQuery.trim(rExp.textContent||rExp.innerText||""),rExp=re[3],re=rExp.match(/\/([gi]+)$/),re=null!==re?re[1]:"",rExp=rExp.replace(/\/[gi]?$/,"").replace(/^\//,""),re=new RegExp(rExp,re);return null!==txt.match(re)}}),jQuery.extend(jQuery.expr[":"],{"contains-functionTest":function(txt,i,match,array){txt=txt.textContent||txt.innerText||"";return jQuery.ui.jig._getFncFromStr(match[3])(txt)}}),jQuery.extend(jQuery.expr[":"],{"not-contains":function(elem,i,match,array){return-1===(elem.textContent||elem.innerText||"").indexOf(match[3]||"")}}),jQuery.extend(jQuery.expr[":"],{"not-contains-insensitive":function(elem,i,match,array){return-1===(elem.textContent||elem.innerText||"").toLowerCase().indexOf((match[3]||"").toLowerCase())}}),$.ui.jig.widget("ui.ncbihelpwindow",{options:{status:!1,toolbar:!1,location:!1,menubar:!1,personalbar:!1,resizable:!0,scrollbars:!0,height:700,width:600,windowName:null},_init:function(){},_create:function(){this._addClickEvent()},_addClickEvent:function(){var that=this;this.element.click(function(e){return!!that._openWindow()||(e.preventDefault(),!1)})},_openWindow:function(){var winName=this.options,url=this.element.prop("href"),isBlocked=jQuery(window).width(),locTop=jQuery(window).height(),locTop=Math.floor((locTop-winName.height)/2),isBlocked=Math.floor((isBlocked-winName.width)/2),isBlocked="status="+(winName.status?"yes":"no")+", toolbar="+(winName.toolbar?"yes":"no")+", location="+(winName.location?"yes":"no")+", menubar="+(winName.menubar?"yes":"no")+", personalbar="+(winName.personalbar?"yes":"no")+", resizable="+(winName.resizable?"yes":"no")+", scrollbars="+(winName.scrollbars?"yes":"no")+", height="+winName.height+", width="+winName.width+", top="+locTop+", left="+isBlocked+",screenX="+locTop+",screenY="+isBlocked,winName=(winName=winName.windowName||this.element.attr("target")||"_blank").replace(/\s/,"_");this.winPop&&!this.winPop.closed&&this.winPop.focus();isBlocked=window.open(url,winName,isBlocked),isBlocked=null==(this.winPop=isBlocked);return this._callStat(isBlocked),this._trigger("opened"),isBlocked},_callStat:function(isBlocked){"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping&&ncbi.sg.ping(this.element[0],"ncbihelpwindow","isBlocked="+isBlocked)}}),jQuery.ui.jig.widget("ui.ncbiplaceholder",{options:{},_label:null,_create:function(){var type;jQuery.ui.ncbiplaceholder.hasPlaceholderSupport()||"hidden"!=(type=this.element.attr("type"))&&"button"!=type&&"submit"!=type&&"radio"!=type&&"checkbox"!=type&&"image"!=type&&"reset"!=type&&this._doFakeLabel()},destroy:function(){this._removeFakeLabel()},_setLabelPosition:function(self){var position=self.element.offset(),width=self.element.outerWidth(),height=self.element.outerHeight(),indentTop=parseInt(self.element.css("borderTopWidth"),0),indentLeft=parseInt(self.element.css("borderLeftWidth"),0);self.element.offsetParent().position();self._label&&self._label.offset&&self._label.offset({top:position.top+indentTop,left:position.left+indentLeft}).css({width:width,height:height})},_doFakeLabel:function(){var that=this;0<this.element.closest(".ui-dialog:hidden, .ui-ncbipopper-basic:hidden, .ui-tabs-panel:hidden").length&&jQuery(document).on("ncbitabsshow tabsshow ncbidialogopen ncbipopperopencomplete}),this._fakeLabel(this)},_fakeLabel:function(self){var that=self,placeholder_text=self.element.attr("placeholder").replace(/<br\s?\/?>/,"");this._label=jQuery('<label class="ui-ncbiplaceholder-label" aria-hidden="true">'+placeholder_text+"</label>").insertAfter(self.element),this._setLabelPosition(self);jQuery(["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight"]).each(function(){that._label.css(self.toString(),that.element.css(self.toString()))}),0!==self.element.val().length&&self._label.hide(),self._label.on("click",function(){that.element.focus()}),self.element.on("focus.ncbiplaceholder",function(){that._label.hide()}),self.element.on("blur.ncbiplaceholder",function(){0===that.element.val().length&&that._label.show()})},_removeFakeLabel:function(){this._label&&this._label.remove(),this.element.off("blur.ncbiplaceholder"),this.element.off("focus.ncbiplaceholder")},valu},hasValu}}),jQuery.ui.ncbiplaceholder.hasPlaceholderSupport=function(){var hasSupport="placeholder"in document.createElement("input");return jQuery.ui.ncbiplaceholder.hasPlaceholderSuppor},hasSupport},$.widget("ui.ncbiprogressbar",$.ui.progressbar,{}),function(){var gridOpts=jQuery.ui.ncbigrid.prototype.options;gridOpts.webservice=null,gridOpts.webserviceParams=null,gridOpts.isServersideLoad=!1,gridOpts.isServersidePaging=!1,gridOpts.isServersidePagingCached=!1,gridOpts.isServersideSort=!1,gridOpts.maxRowCount=null,gridOpts.columnNames=null,gridOpts.webserviceReturnsJSON=!1,gridOpts.columns=null,gridOpts.record=null,gridOpts.groupField=null,gridOpts.localJSON=null;var orgCreate=jQuery.ui.ncbigrid.prototype._create,org_killActiveSort=jQuery.ui.ncbigrid.prototype._killActiveSort,org_sort=jQuery.ui.ncbigrid.prototype._sort,org_indexGrid=jQuery.ui.ncbigrid.prototype._indexGrid,org_waitForCache=jQuery.ui.ncbigrid.prototype._waitForCache,org_filterRows=jQuery.ui.ncbigrid.prototype.filterRows,org_removeFilterRows=jQuery.ui.ncbigrid.prototype.removeFilterRows,orgUpdateRows=jQuery.ui.ncbigrid.prototype._updateRows,orgGetMaxPage=(jQuery.ui.ncbigrid.prototype.getRowCount,jQuery.ui.ncbigrid.prototype.getMaxPage),orgUpdateCount=jQuery.ui.ncbigrid.prototype._updateCount,orgGotoPage=jQuery.ui.ncbigrid.prototype._gotoPage,orgCheckAll=jQuery.ui.ncbigrid.prototype.checkAll,orgUncheckAll=jQuery.ui.ncbigrid.prototype.uncheckAll;jQuery.ui.jig.widget("ui.ncbiservergrid",jQuery.ui.ncbigrid,{selector:"div.jig-ncbiservergrid table,div.jig-ncbiservergrid-scroll table,table.jig-ncbiservergrid,table.jig-ncbiservergrid-scroll, [data-jig=ncbiservergrid] table, table[data-jig=ncbiservergrid]",_loadCreateCallback:!1,_create:function(){this._checkForTemplating(),this.options.maxRowCount&&(this.options.maxRowCount=parseInt(this.options.maxRowCount)),this.options.isServersidePaging&&(this.options.isPageable=!0,this.options.isServersideLoad&&!this.options.maxRowCount&&1<this.options.currentPage&&(this.options.maxRowCount=this.options.currentPage*this.options.pageSize)),this.options.isServersideSort&&(this.options.isSortable=!0,this._isIndexed=!0),null!==this.options.localJSON?(this._loadCreateCallback=!0,this._processData(this.options.localJSON,"success",{})):this.options.isServersideLoad&&!this.options.isServersidePaging?(this._loadCreateCallback=!0,this._fetchData()):orgCreate.apply(this,arguments)},_checkForTemplatin},_createHeaders:function(){var thead=jQuery("<thead></thead>"),tr=jQuery("<tr></tr>"),cols=this.options.columns;this._numColHead=cols.length;for(var i=0;i<cols.length;i++){var curCol=cols[i],isHidden=curCol.isHidden?" class='ui-ncbigrid-column-hidden'":"",columnType=!1===curCol.isSortable?"none":curCol.columnType||"str";jQuery("<th"+isHidden+"></th>").html(curCol.header).data("columntype",columnType).appendTo(tr)}thead.append(tr),this.element.append(thead)},_processTemplating:function(records,dataType){var that=this,record=this.options.record,cols=this.options.columns,cnt=this._numColHead,isXML="xml"===dataType,isJSON="json"===dataType;if(isXML)var rows=records.getElementsByTagName(record);else if(isJSON)for(var parts=record.split(/\./),rows=records,i=0;i<parts.length;i++)rows=rows[parts[i]];var newRows={},grpField=this.options.groupField,groupNames=[],rowCnt=0,rowLen=rows.length,loopSize=jQuery.browser.msie?300:2e3,groupCount=0;!function loopDeLoopTemplate(){for(var i=0;i<loopSize&&rowCnt<rowLen;i++){for(var rowData=jQuery(rows[i]),currRow=["<tr>"],grpFieldName="__DEFAULT__",col=0;col<cnt;col++){var colData=cols[col],props=colData.dataIndex,isHidden=colData.isHidden?" class='ui-ncbigrid-column-hidden'":"";jQuery.isArray(props)||(props=[props]);for(var nodTxtValues=[],itm=0;itm<props.length;itm++){var prop=props[itm];if(isXML){var nodeTxt=rowData.find(prop).text();nodeTxt=(nodeTxt=(nodeTxt=nodeTxt||rowData.attr(prop))||rowData.find("["+prop+"]").attr("prop"))||" "}else if(isJSON){for(var thePath=prop.split("."),lookupNode=rowData[0],p=0;p<thePath.length&&void 0!==(lookupNode=lookupNode[thePath[p]]);p++);nodeTxt=lookupNode||""}nodTxtValues.push(nodeTxt)}if(colData.renderer)var displayText=colData.renderer.apply(that,nodTxtValues);else if(colData.template){displayText=colData.template;for(var iReplace=0;iReplace<props.length;iReplace++)displayText=displayText.replace(new RegExp("\\$\\{"+props[iReplace].replace(/\./g,"\\.")+"\\}","g"),nodTxtValues[iReplace])}else displayText=nodTxtValues.join("");currRow.push("<td"+isHidden+">"+displayText+"</td>"),null!==grpField&&grpField===prop&&(grpFieldName=displayText)}currRow.push("</tr>"),newRows[grpFieldName]||(newRows[grpFieldName]=[],groupCount++,groupNames.push(grpFieldName)),newRows[grpFieldName].push(currRow.join("")),rowCnt++}var grpNamesSorted=groupNames.sort();if(rowLen<=rowCnt)if(1==groupCount){var rowsOut="";for(sect in newRows)rowsOut=newRows[sect].join("");that._wrapUpProcessing("success",rowsOut)}else{for(i=0;i<grpNamesSorted.length;i++){var sect=grpNamesSorted[i],rowsOut="<tbody><tr><th colspan='"+that.options.columns.length+"'>"+sect+"</th></tr>";rowsOut+=newRows[sect].join("")+"</tbody>",that.element.append(rowsOut)}that._wrapUpProcessing("multipleTBodies",null)}else window.setTimeou},0)}()},getMaxPage:function(){var maxPage=this.options.isServersidePaging?Math.ceil(this.getRowCount()/this.options.pageSize):orgGetMaxPage.apply(this,arguments);return 0===maxPage?1:maxPage},getRowCount:function(){var orgRowCount=jQuery.ui.ncbigrid.prototype.getRowCount.apply(this,arguments);return orgRowCount?this.options.isServersidePaging?this.options.maxRowCount||0:orgRowCount:0},_updateRows:function(){if(!this.options.isServersidePaging&&!this.options.isServersideSort)return orgUpdateRows.apply(this,arguments);this._updateRowsServer(),this._wasSorted&&(this._wasSorted=!1,this.element.trigger("ncbigridcolumnsorted",[this.options.sortColumn+1,this.options.sortColumnDir]))},_updateRowsServer:function(){var rows=null;this.options.isServersidePagingCached&&(rows=this.isInCache()),rows?this._displayTheRows(rows):this._isInitialFetch&&!this.options.isServersideLoad?(this.addToCache(this.element.find("tbody").html()),this._isInitialFetch=!1):this._fetchData(this._isInitialFetch)},_isInitialFetch:!0,_fetchData:function(){var that=this;this.element.trigger("ncbigridshowloadingbar"),this._activeRequest&&this._activeRequest.readyState<4&&this._activeRequest.abort();var colNames,ajaxObj=this._handlewebserviceParams();this.options.isServersidePaging&&(ajaxObj.parameters.page=this.getCurrentPage(),ajaxObj.parameters.pageSize=this.options.pageSize),this.options.isServersideSort&&-1!==this.options.sortColumn&&(colNames=this.options.columnNames,ajaxObj.parameters.sortCol=colNames?colNames[this.options.sortColumn]:this.options.sortColumn+1,ajaxObj.parameters.sortDir=this.options.sortColumnDir);var initial=arguments[0],ajaxObj={url:ajaxObj.url,data:ajaxObj.parameters,succes},erro}};this.options.webserviceReturnsJSON&&(ajaxObj.dataType="json"),this._activeRequest=jQuery.ajax(ajaxObj)},_handlewebserviceParams:function(){var url=this.options.webservice,optParams=this.options.webserviceParams||this.options.webServiceParams,parameters={};if(optParams)if("string"==typeof optParams)var questionmark="?"!==optParams.charAt(0)||-1===url.indexof("?")?"?":"",url=url+questionmark+optParams;else for(var x in optParams)parameters[x]=optParams[x];var filterParams=this.options.webserviceFilterParams;if(filterParams)for(var x in filterParams)parameters[x]=filterParams[x];return{url:url,parameters:parameters}},_activeRequest:null,_processData:function(data,status,obj,initial){var htmlRows,totalCount=null;obj.responseXML?this._processTemplating(obj.responseXML,"xml"):"object"!=typeof data||data.htmlRows?(htmlRows=this.options.webserviceReturnsJSON?(data.pageNumber,data.pageSize,totalCount=data.totalRowCount,data.htmlRows):((htmlRows=data.match(/<!--\s*(\d+)\s+(\d+)\s+(\d+)/))&&(parseInt(htmlRows[1],10),parseInt(htmlRows[2],10),totalCount=parseInt(htmlRows[3],10)),data),this._wrapUpProcessing(status,htmlRows,initial),null!=totalCount&&(this.options.maxRowCount=parseInt(totalCount)),(initial&&this.options.isServersidePaging||null!=totalCount&&totalCount!==this.getRowCount())&&this._setPageInit()):this._processTemplating(data,"json")},_wrapUpProcessing:function(status,htmlRows,initial){"success"===status&&(this._displayTheRows(htmlRows,initial),this._checkAllState&&this.checkAll(!0),this.addToCache(htmlRows)),this._loadCreateCallback&&(orgCreate.apply(this),!this.options.isServersideSort&&this.options.isSortable&&(org_indexGrid.apply(this,arguments),this._showHidePageToolbar())),this._trigger("responseprocessed"),this._trigger("ncbigridresponseprocessed")},_processError:function(XMLHttpRequest,textStatus,errorThrown){"undefined"!=typeof console&&console.warn&&(console.group&&console.group("Failed Request"),console.warn("The request failed to retrieve the rows"),console.info&&(console.info(XMLHttpRequest),console.info(textStatus),console.info(errorThrown)),console.group&&console.groupEnd("Failed Request"))},_displayTheRows:function(hiddenShownCols,initial){this.element.trigger("ncbigridresetscroll"),this.element.trigger("ncbigridhideloadingbar");var tbody=this.element.find("tbody");0===tbody.length&&(tbody=jQuery("<tbody></tbody>").appendTo(this.element)),tbody.html(hiddenShownCols);for(var hiddenShownCols=this.getHiddenShownColumns(),hiddenCols=hiddenShownCols.hidden,shownCols=hiddenShownCols.shown,i=0;i<hiddenCols.length;i++)this.hideColumn(hiddenCols[i]);for(i=0;i<shownCols.length;i++)this.showColumn(shownCols[i]);this._showHidePageToolbar(),this.element.trigger("rowsAdded"),this.element.trigger("ncbiservergridrowsadded"),this._notifyGridUpdated()},_cachedRows:{},getCacheKey:function(){var knownKeys=this.getCurrentPage().toString()+"_"+this.options.pageSize.toString()+"_"+this.options.sortColumn.toString()+"_"+this.options.sortColumnDir.toString(),wsp=this.options.webserviceParams,unknownKeys="";if("string"==typeof wsp)unknownKeys+="_"+wsp;else for(var prop in wsp)unknownKeys+="_"+wsp[prop];var filterParams=this.options.webserviceFilterParams;if(filterParams)for(var x in filterParams)unknownKeys+="_"+filterParams[x];return knownKeys+unknownKeys},addToCache:function(rows,key){this.options.isServersidePagingCached&&(this._cachedRows[key||this.getCacheKey()]=rows)},isInCache:function(key){return this._cachedRows[key||this.getCacheKey()]||null},_sort:function(){this._wasSorted=!0,org_sort.apply(this,arguments)},_killActiveSor},_waitForCache:function(){this.options.isServersideSort?this._updateRows():org_waitForCache.apply(this,arguments)},_indexGrid:function(){},filterRows:function(txt,isCaseInsensitive,col,isInverse){this.options.isServersideLoad&&!this.options.isServersidePaging?org_filterRows.apply(this,arguments):(this.options.webserviceFilterParams={},this.options.webserviceFilterParams.filterText=txt||"",null!=isCaseInsensitive&&(this.options.webserviceFilterParams.filterCaseInsen=isCaseInsensitive),null!=col&&(this.options.webserviceFilterParams.filterCol=col),this.options.isServersidePaging?this.gotoPage(0):this._updateRows(),this.element.trigger("ncbigridfilterapplied",[txt,isCaseInsensitive,col,null,null]).trigger("ncbiservergridfilterapplied",[txt,isCaseInsensitive,col,null,null]))},removeFilterRows:function(){this.options.isServersideLoad&&!this.options.isServersidePaging?org_removeFilterRows.apply(this,arguments):(this.options.webserviceFilterParams={},this.options.isServersidePaging?this.gotoPage(0):this._updateRows()),this.element.trigger("ncbigridfilterremoved",[null,null,null]).trigger("ncbiservergridfilterremoved",[null,null,null])},refresh:function(stayOnCurrentPage,page){this._checkAllState=!!page,this.options.isServersidePagingCached&&(this._cachedRows={}),this.options.isServersidePaging?(page=this.options.currentPage,stayOnCurrentPage||(page=0,this.options.currentPage=-1,this.element.find("tbody").children().find("input[type='checkbox']").prop("checked",this._checkAllState)),this.gotoPage(page)):this._updateRows(),this.options.checkboxToolbarEnabled&&this._updateCount()},_cachedPageCheckHelper:function(state,acrossAllPages){if(acrossAllPages)for(var addRemoveClass=state?"addClass":"removeClass",currentCacheKey=this.getCacheKey()||"",partialCacheKey=currentCacheKey.replace(/^\d+/,""),maxPage=this.getMaxPage(),i=1;i<=maxPage;i++){var cKey=i+partialCacheKey,rows=this.isInCache(cKey);cKey===currentCacheKey&&(rows=this.element.find("tbody tr")),rows&&((rows=jQuery(rows)).find(":checkbox").prop("checked",state).closest("tr")[addRemoveClass]("ui-ncbigrid-row-selected"),this.addToCache(rows,cKey))}},checkAll:function(acrossAllPages){this._cachedPageCheckHelper(!0,acrossAllPages),orgCheckAll.apply(this,arguments)},uncheckAll:function(acrossAllPages){this._cachedPageCheckHelper(!1,acrossAllPages),orgUncheckAll.apply(this,arguments)},_updateCount:function(){if(this.options.isServersidePagingCached){var totalCount=0,countChecked="filter";this._checkAllState&&(totalCount=this.getRowCount(),countChecked="not");for(var cnt=0,currentCacheKey=this.getCacheKey()||"",partialCacheKey=currentCacheKey.replace(/^\d+/,""),maxPage=this.getMaxPage(),i=1;i<=maxPage;i++){var cKey=i+partialCacheKey,rows=this.isInCache(cKey);cKey===currentCacheKey&&(rows=this.element.find("tbody tr")),rows&&(cnt+=jQuery(rows).find(":checkbox")[countChecked](":checked").length||0)}totalCount=this._checkAllState?totalCount-cnt:cnt,this._chekboxBars.find("span.ui-ncbigrid-selected-text").html(totalCount)}else orgUpdateCount.apply(this,arguments)},_gotoPage:function(){var isServersidePagingCached=this.options.isServersidePagingCached;isServersidePagingCached&&this._prevCacheKey&&-1!==this.options.currentPage&&this.addToCache(this.element.find("tbody tr"),this._prevCacheKey),orgGotoPage.apply(this,arguments),isServersidePagingCached&&(this._prevCacheKey=this.getCacheKey())},_cbSerialize:function(cbs){var out=[];return cbs.each(function(i){out.push(this.name+"="+(this.checked?"on":"off"))}),out.join("&")},serializeCachedCheckboxes:function(state){var retVal=null;if(this.options.isServersidePagingCached){for(var temp=[],currentCacheKey=this.getCacheKey()||"",partialCacheKey=currentCacheKey.replace(/^\d+/,""),maxPage=this.getMaxPage(),i=1;i<=maxPage;i++){var cKey=i+partialCacheKey,vals=this.isInCache(cKey);cKey===currentCacheKey&&(vals=this.element.find("tbody tr")),!vals||(vals=void 0===state?this._cbSerialize(jQuery(vals).find(":checkbox")):state?jQuery(vals).find(":checkbox").serialize():this._cbSerialize(jQuery(vals).find(":checkbox").not(":checked")))&&0<vals.length&&temp.push(vals)}retVal=temp.join("&")}return retVal},_setPageInit:function(){this.element.trigger("resetScroll");var currentPage=this._getCurrentPage(),maxPage=this.getMaxPage();this._showHidePageToolbar(),this._updateButtons(currentPage,maxPage),this._updatePagingText(currentPage,maxPage),this._updateGoto(currentPage,maxPage),this._updateItemRange(currentPage,maxPage),this._pageBars.find(".ui-ncbigrid-paged-pageControl").attr({"aria-valuemin":"1","aria-controls":this.element.attr("id"),"aria-valuemax":maxPage,"aria-valuenow":currentPage})}})}(),function($){$.ui.jig.widget("ui.ncbitoggler",{selecto},styles:{ariaWrapper:"ui-ncbitoggler-live",groupMasterReplaceNode:"span.ui-ncbitoggler-group-replace-txt",groupMasterStateClose:"ui-ncbitoggler-group-master-to-close",groupMasterStateOpen:"ui-ncbitoggler-group-master-to-open",master:"ui-ncbitoggler",masterOpen:"ui-ncbitoggler-open",target:"ui-ncbitoggler-slave",targetOpen:"ui-ncbitoggler-slave-open",icon:"ui-icon-triangle-1-e",iconOpen:"ui-icon-triangle-1-s",iconPlusMinusBig:"ui-icon-plus-minus-big",iconPlusMinusBigOpen:"ui-icon-plus-minus-big-open",iconArrowStop:"ui-icon-arrowthickstop-1-s",iconArrowStopOpen:"ui-icon-arrowthickstop-1-n"},options:{animation:"slide",closedAppendText:"",cookieNamePrefix:"jig-tog-rem-",indicator:"small-arrow",initOpen:!1,isIcon:!0,liveRegions:!0,openedAppendText:"",remember:!1,speed:50,targets:""},_cachedTargetData:{},_create:function(){this._setOption("disabled",!1),this.addedHref=null,this.cookieName=null,this.remember=null,this.rememberCookie=null,this.startOpen=null,this.iconSpan=null,this.initTargetsClass=null,this.appendTextNode=null;var master=this.element,masterD=master[0],styles=this.styles,that=this,isIcon=this.options.isIcon;master.data("isOpen",!1),master.addClass("ui-widget ui-ncbitoggler"),isIcon||master.addClass("ui-ncbitoggler-no-icon");var masterId=master.attr("href");if(this.addedHref=!masterId,this._validate(masterId),0===master.children("span.ui-ncbitoggler-master-text").length&&master.contents().filte}).each(function(){var el=$(this);0<jQuery.trim(this.nodeValue).length&&el.wrap('<span class="ui-ncbitoggler-master-text"></span>')}),""===this.options.openedAppendText&&""===this.options.closedAppendText||(this.appendTextNode=master.children("span.ui-ncbitoggler-appended-text"),0===this.appendTextNode.length&&(this.initOpen||(this.appendTextNode=$('<span class="ui-ncbitoggler-appended-text">'+this.options.closedAppendText+"</span>"),master.find(".ui-ncbitoggler-master-text").after(this.appendTextNode)))),this.remember=this.options.remember||!1,this.remember){masterId=this.element.attr("id");if(!masterId)return void(window.console&&console.error&&console.error("ncbitoggler: master node "+masterD+" must have a unique id attribute when remembering state"));this.cookieName=this.options.cookieNamePrefix+masterId,this.rememberCookie=$.cookie(this.cookieName)}this.rememberCookie?this.startOpen="open"===this.rememberCookie:this.startOpen=!!(master.hasClass("jig-ncbitoggler-open")||master.hasClass(styles.masterOpen)||this.options.initOpen),this.startOpen?(this.element.data("isOpen",!0),master.removeClass(this.styles.master),master.addClass(styles.masterOpen),this._targetsOpen=!0):(this.element.data("isOpen",!1),master.removeClass(this.styles.masterOpen),master.addClass(styles.master)),isIcon&&this._initMasterIcon(),this.targets=this._getTargets(),this.targets.addClass("ui-ncbitoggler").removeClass("ui-ncbitoggler-disabled ui-state-disabled"),this.startOpen?(this.targets.removeClass(styles.target),this.targets.addClass(styles.targetOpen),this.initTargetsClass=styles.targetOpen):(this.targets.removeClass(styles.targetOpen),this.targets.addClass(styles.target),this.initTargetsClass=styles.target),this._initAria(),this._doGrouping(),master.click(function(e){that.toggle(e,that)}),this._saveReferences()},_getGroupMaster:function(){for(var styles=this.styles,classNames=this.element[0].className.split(/\s+/),i=0;i<classNames.length;i++){var groupMaster=classNames[i].match(/ui-ncbitoggler-group-(.+)$/);if(groupMaster){var groupName=groupMaster[1],groupMaster=$("a.ui-ncbitoggler-group-open-"+groupName+", a.ui-ncbitoggler-group-close-"+groupName,this.options.contextNode);if(1===groupMaster.length)return groupMaster.hasClass("ui-ncbitoggler-group-open-"+groupName)&&groupMaster.addClass(styles.groupMasterStateOpen),groupMaster.hasClass("ui-ncbitoggler-group-close-"+groupName)&&groupMaster.addClass(styles.groupMasterStateClose),groupMaster}}},_doGrouping:function(){var that,styles,togglers,replaceTxtNode,groupMaster=this._getGroupMaster();groupMaster&&(styles=(that=this).styles,togglers=groupMaster.data("togglers"),this.element.id||$.ui.jig._generateId(this.widgetName),this.element[0].id||(this.element[0].id=$.ui.jig._generateId(this.widgetName)),void 0===togglers?(groupMaster.data("togglers",[]),groupMaster.data("togglers").push(this.element)):togglers.push(this.element),replaceTxtNode=groupMaster.find(styles.groupMasterReplaceNode),groupMaster.click(function(lastToggler){lastToggler.preventDefault();lastToggler=groupMaster.data("togglers"),lastToggler=lastToggler[lastToggler.length-1][0];groupMaster.hasClass(styles.groupMasterStateOpen)?(that.open(),0<replaceTxtNode.length&&replaceTxtNode.text(that.options.groupMasterCloseReplaceText),that.element[0]===lastToggler&&groupMaster.removeClass(styles.groupMasterStateOpen).addClass(styles.groupMasterStateClose)):(that.close(),0<replaceTxtNode.length&&replaceTxtNode.text(that.options.groupMasterOpenReplaceText),that.element[0]===lastToggler&&groupMaster.removeClass(styles.groupMasterStateClose).addClass(styles.groupMasterStateOpen))}))},_initAria:function(){var master=this.element,open=this.startOpen;master.attr({role:"button","aria-expanded":open}),this.options.liveRegions&&this.targets.each(function(){var target=$(this);0!==target.find("table").length||target.parent("div").hasClass("ui-helper-reset")||target.wrap('<div class="ui-helper-reset" aria-live="assertive">'),target.attr("aria-hidden",open?"false":"true")})},_validate:function(href){var el=this.element,validTags=["a"],masterTagName=el[0].tagName.toLowerCase();if(-1===$.inArray(masterTagName,validTags))throw new Error("ncbitoggler: master node must be one of the following elements: "+validTags.toString());href||el.attr("href","#")},_initMasterIcon:function(){var el=this.element,styles=this.styles;"plus-minus-big"==this.options.indicator?(this.iconOpenClass=styles.iconPlusMinusBigOpen,this.iconCloseClass=styles.iconPlusMinusBig):"arrow-stop"==this.options.indicator?(this.iconOpenClass=styles.iconArrowStopOpen,this.iconCloseClass=styles.iconArrowStop):(this.iconOpenClass=styles.iconOpen,this.iconCloseClass=styles.icon),this.iconSpan=el.find("span.ui-icon"),0===this.iconSpan.length?(this.iconSpan=$('<span class="ui-icon"></span>'),this.startOpen?this.iconSpan.addClass(this.iconOpenClass):this.iconSpan.addClass(this.iconCloseClass),el.append(this.iconSpan)):this.startOpen&&(this.iconSpan.removeClass(this.iconCloseClass),this.iconSpan.addClass(this.iconOpenClass))},getSlaves:function(){return this._targets},getTarget},_getTargets:function(){var el=this.element,togglesAttr=el.attr("toggles")||el.attr("data-ncbitoggler-toggles");if(togglesAttr?jQuery.ui.jig._isConsole("warn")&&console.warn('The attributes "toggles" and "data-ncbitoggler-toggles" are deprecated. Please use the "targets" attribute instead (see documentation).'):togglesAttr=this.options.targets,togglesAttr&&"object"==typeof togglesAttr){var sel,targetsSelector="";for(sel in togglesAttr)targetsSelector+=sel+", ";targetsSelector=targetsSelector.replace(/,\s$/,"");var targets=$(targetsSelector)}else if(togglesAttr){if(0===(targets=$(togglesAttr)).length){this.isSibling=!1;for(var ids=togglesAttr.split(/ +/),selector="",i=0;i<ids.length;i++)i!==ids.length-1?selector+="#"+ids[i]+",":selector+="#"+ids[i];targets=$(selector)}}else targets=0<el.parent(":header").length?(el.parent(":header").parent().css("zoom","1"),this.isSibling=!0,el.parent(":header").css("zoom","1").next()):(this.isSibling=!0,el.next());return this._targets=this._normalizeTargets(targets),this._targets},_normalizeTargets:function(targets){var tmp=[];return targets.each(function(){var target=this,$target=$(this);$target.hasClass("ui-helper-reset")&&(target=$target.children().get(0)),tmp.push(target)}),ret=$(tmp),ret},_getCachedTargetDat},_cacheTargetDat},_openAjaxTarget:function(targetSel,ajaxUri){var that=this,data=this._getCachedTargetData(targetSel);data?$(targetSel).html(data):$.get(ajaxUri,function(data){that._cacheTargetData(targetSel,data),$(targetSel).html(data)})},_openTargets:function(){if(!(this._targetsOpening||this._targetsClosing||this._targetOpen)){this._targetsOpening=!0;var targets=this.targets,openAppend=(this.iconSpan,this.styles);targets.removeClass(openAppend.target).addClass(openAppend.targetOpen).attr("aria-hidden","false");var ajaxUris=this.options.targets;if("object"==typeof ajaxUris){var that=this;for(targetSel in ajaxUris}(targetSel)}openAppend=this.options.openedAppendText;""!==openAppend&&this.appendTextNode.html(openAppend),targets.css("display",""),this._targetsOpening=!1,this._targetsOpen=!0}},_closeTargets:function(){var targets,closeAppend;this._targetsOpening||this._targetsClosing||!this._targetsOpen||(this._targetsClosing=!0,targets=this.targets,this.iconSpan,closeAppend=this.styles,targets.removeClass(closeAppend.targetOpen).addClass(closeAppend.target).attr("aria-hidden","true"),""!==(closeAppend=this.options.closedAppendText)&&this.appendTextNode.html(closeAppend),targets.css("display",""),this._targetsClosing=!1,this._targetsOpen=!1)},_fixHasLayout:function(that){window.setTimeou},1)},open:function(callback){var master=this.element,that=this,styles=this.styles;return master.hasClass(styles.master)&&(this.updateState("open"),"slide"===this.options.animation?this.targets.slideToggle(this.options.speed,function(){that._openTargets(),$.browser.msie&&that._fixHasLayout(that),master.data("isOpen",!0),master.trigger("ncbitoggleropen"),callback&&callback()}):(this._openTargets(),$.browser.msie&&that._fixHasLayout(that),master.data("isOpen",!0),master.trigger("ncbitoggleropen"),callback&&callback()),this._updateReferences("open")),master},close:function(callback){var master=this.element,that=this,styles=this.styles;return master.hasClass(styles.masterOpen)&&(this.updateState("closed"),"slide"===this.options.animation?this.targets.slideToggle(this.options.speed,function(){that._closeTargets(),master.trigger("ncbitogglerclosed").trigger("ncbitogglerclose"),master.data("isOpen",!1),callback&&callback()}):(this._closeTargets(),master.data("isOpen",!1),master.trigger("ncbitogglerclosed"),callback&&callback()),this._updateReferences("closed")),master},toggle:function(e,that,callback){var master=arguments.length;0===master||1===master?(that=this,1===master&&(callback=e)):e.preventDefault();master=this.element,this.styles,this.iconSpan;master.hasClass(this.styles.master)?that.open(callback):that.close(callback)},updateState:function(state){var master=this.element;state=state||(master.hasClass(styles.master)?"open":"closed");var classOld=this.styles.master,classNew=this.styles.masterOpen,classIconOld=this.iconCloseClass,classIconNew=this.iconOpenClass;"closed"==state&&(classOld=this.styles.masterOpen,classNew=this.styles.master,classIconOld=this.iconOpenClass,classIconNew=this.iconCloseClass),master.removeClass(classOld).addClass(classNew).attr("aria-expanded","closed"==state?"false":"true"),this.options.isIcon&&this.iconSpan.removeClass(classIconOld).addClass(classIconNew),this.remember&&$.cookie(this.cookieName,state)},_removeHandlers:function(){this.element.unbind("click")},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments);var el=this.element,span=this.styles;el.removeClass(span.master+" "+span.masterOpen+" ui-state-disabled ui-widget ui-ncbitoggler-disabled").removeAttr("role").removeAttr("aria-expanded"),this.targets.removeClass("ui-ncbitoggler ui-ncbitoggler-slave ui-ncbitoggler-slave-open ui-state-disabled ui-ncbitoggler-disabled"),this.targets.removeAttr("aria-hidden"),this.options.isIcon&&(spanHTML=el.find("span.ui-icon")[0],el[0].removeChild(spanHTML)),this.targets.each(function(){var target=jQuery(this),wrappingDiv=target.parent("div.ui-helper-reset");0<wrappingDiv.length&&(target.insertBefore(wrappingDiv),wrappingDiv.remove())});var span=el.find("span.ui-ncbitoggler-master-text"),spanHTML=span.html();return span.remove(),el.html(spanHTML),this._removeHandlers(),this},disable:function(){return $.Widget.prototype.disable.apply(this,arguments),this._removeHandlers(),this.targets.addClass("ui-ncbitoggler-disabled ui-state-disabled"),this},enable:function(){$.Widget.prototype.enable.apply(this,arguments),this.targets.removeClass("ui-ncbitoggler-disabled ui-state-disabled");var that=this;return this.element.clic}),this},_saveReferences:function(){var that=this;this._targets.each(function(){void 0===$(this).data("ncbitoggler-masters")&&$(this).data("ncbitoggler-masters",new Array),$(this).data("ncbitoggler-masters").push(that.element)})},_updateReferences:function(state){var that=this;$.each(this._targets.data("ncbitoggler-masters"),function(){that.element!=this&&$(this).ncbitoggler("updateState",state)})}})}(jQuery),document.times=0,$.ui.jig.widget("ui.ncbipopper",{destTextCallbackCalledCount:0,options:{openMethod:"",openEvent:"mouseover",openAnimation:"slideDown",openAnimationTime:290,closeMethod:"",closeEvent:"mouseout",closeAnimation:"slideUp",closeAnimationTime:150,isEscapeKeyClose:!0,isSourceElementCloseClick:!1,isTriggerElementCloseClick:!0,isTargetElementCloseClick:!1,isDestElementCloseClick:!1,isDocumentCloseClick:!0,addCloseButton:!1,adjustFit:"autoAdjust",delayTimeout:300,sourcePosition:"",destPosition:"top left",sourceSelector:"",destSelector:"",targetPosition:"",triggerPosition:"bottom right",sourceText:null,destText:null,multipleHandlesSelector:"",openAtTarget:!1,hasArrow:!1,arrowDirection:"left",groupName:null,width:null,height:null,cssClass:null,excludeBasicCssStyles:!1,wrapElement:!1,loadingText:"loading...",showLoadingMessage:!0,isDestTextCacheable:!0,resizable:!1,openAtMousePosition:!1},_creat},updateTrigger},destroy:function(){jQuery.Widget.prototype.destroy.apply(this,arguments);var isPopperShared=this.isPopperShared();this._destroyPopperHover,this._destroyDestAria(),this._destroyTriggerAria(),this._removeSharingDetails(),this._destroyCloseButton(isPopperShared),this._destroyResizeListener(),this._destroyDocumentClickListener(),this._destroyEscapeListener(),this._removeEventHandlers(),this._destroyDestElem(isPopperShared)},getDestElement:function(isBeingRendered){var popper=this.destElem;if(this.origDestElem||(this.origDestElem=popper),popper)isBeingRendered&&this._isWaitingToBeAddedToDom&&(destText=1===(destSelector=jQuery("div.grid")).length?destSelector:jQuery(document.body),popper.appendTo(destText),this._isWaitingToBeAddedToDom=!0,this._getActualText(popper));else{var destSelector=this.options.destSelector||this.options.sourceSelector||this.element.prop("hash"),destText=this.options.destText||this.options.sourceText;if(destSelector)0===(popper=jQuery(destSelector)).length&&(popper=this._createTextHolder());else{if(!destText)throw"The popper can not find the popper element or text to display";popper=this._createTextHolder()}this.options.wrapElement&&(popper.parent().hasClass("ui-ncbipopper-wrapper")||(popper.wrap('<div style="display:none"></div>'),popper.show()),this.origDestElem||(this.origDestElem=popper),popper=popper.parent()),this.destElem=popper,this._addDestAria()}return this.origDestElem||(this.origDestElem=this.destElem),popper},_createTextHolder:function(){var elem=jQuery('<div><div class="ui-ncbipopper-content"></div></div>');return this._isWaitingToBeAddedToDom=!0,elem},_getActualText:function(elem){var theText,customFnc;this.isFunctionResultCached||(theText=this.options.destText||this.options.sourceText,"function"==typeof(customFnc=this._getFunction(theText))&&(theText=this._getText(customFnc)),elem.css("display","none").attr("generated","true").find(".ui-ncbipopper-content").html(theText))},_getFunction:function(theText){var fnc=null;return jQuery.ui.jig&&jQuery.ui.jig._getFncFromStr?fnc=jQuery.ui.jig._getFncFromStr(theText):"function"==typeof theText&&(fnc=theText),fnc},getDestTextCallbackCalledCount:function(){return this.destTextCallbackCalledCount},_getText:function(theText){if(!(this.options.isDestTextCacheable&&this.getTextCalled||this.callbackInProgress)){var fncString;this.getTextCalled=!0,theText||(fncString=this.options.destText||this.options.sourceText,theText=this._getFunction(fncString));var that=this;this.callbackInProgress=!0;theText=theText.call(this.element[0],function(html){that._setHTML(html),that.destTextCallbackCalledCount++,that.callbackInProgress=!1})||this.options.loadingText;return theText!==this.options.loadingText&&(this.isFunctionResultCached=this.options.isDestTextCacheable),theText}},reloadContent:function(){var theText=this._getText(),elm=this.getDestElement().find(".ui-ncbipopper-content");return elm&&elm.html(theText),this.element},_setHTML:function(html){var elm=this.getDestElement().find(".ui-ncbipopper-content");elm&&(elm.html(html),this.isFunctionResultCached=this.options.isDestTextCacheable,this.options.showLoadingMessage||this.isPopperDisplayed||this._openAnimation())},_setUpDestElem:function(){var popper=this.getDestElement().addClass("ui-ncbipopper-wrapper");this.options.excludeBasicCssStyles||popper.addClass("ui-ncbipopper-basic"),this.options.resizable&&popper.resizable();var custCSS=this.options.cssClass;custCSS&&popper.addClass(custCSS),null!==this.options.width&&popper.width(this.options.width),null!==this.options.height&&popper.height(this.options.height),this._resetElementPosition(popper),popper.removeClass("offscreen_noflow").hide(),popper.data("isOpen",!1)},_setArrowDirection:function(dir){var arrowDirection;this.options.hasArrow&&(arrowDirection=this.options.arrowDirection,this._arrow&&this._arrow.removeClass("ui-ncbipopper-arrow-top ui-ncbipopper-arrow-bottom  ui-ncbipopper-arrow-left  ui-ncbipopper-arrow-right").addClass("ui-ncbipopper-arrow-"+arrowDirection))},_setUpArrow:function(e,hide,posSettings){var arrowDirection;this.options.hasArrow&&(arrowDirection=this.options.arrowDirection,this._arrow?this._arrow.removeClass("ui-ncbipopper-arrow-top ui-ncbipopper-arrow-bottom  ui-ncbipopper-arrow-left  ui-ncbipopper-arrow-right").addClass("ui-ncbipopper-arrow-"+arrowDirection):this._arrow=jQuery('<div class="ui-ncbipopper-arrow-image ui-ncbipopper-arrow-'+arrowDirection+'">&nbsp;</div>').appendTo(document.body),posSettings=this._getPositionSettings(e,"arrow",posSettings),this._arrow.show().position({my:posSettings.dest,of:this._activeTrigger||posSettings.triggerElement||this.element,at:posSettings.trigger,collision:"none"}),(hide||this._arrowOverlapsPopper())&&this._arrow.hide())},_destroyDestElem:function(isPopperShared){isPopperShared||this.getDestElement().removeClass("ui-ncbipopper-wrapper ui-ncbipopper-basic ui-ncbipopper-wrapper-relative-parent").attr("style","").show(),this.options.wrapElement&&this.origDestElem.unwrap(),this.destElem=null},_addEventHandlers:function(){var that=this,trigger=this.element,config=this.options.multipleHandlesSelector;config&&0<config.length&&(trigger=trigger.add(config));var openEvent=this.options.openMethod||this.options.openEvent,closeEvent=this.options.closeMethod||this.options.closeEvent;openEvent===closeEvent&&"click"===closeEvent?(this._openFunctio},trigger.on("click",this._openFunction)):(config={timeout:this.options.delayTimeout},"mouseover"===openEvent?config.over=function(e){that._isOverTrigger=!0,that.open(e,this)}:(config.ove},this._openFunction=function(e){"click"===openEvent?that.option.isTriggerElementCloseClick?(that._toggle(e,this),e.preventDefault()):(that.isOpen(this)||e.preventDefault(),that.open(e,this)):that.open(e,this)},trigger.on(openEvent,this._openFunction)),"mouseout"===closeEvent?config.out=function(){that._isOverTrigger=!1,that.isOpen(this)&&!that._isOverPopper&&that.close()}:(config.out=function(){},this._closeFunctio},trigger.on(closeEvent,this._closeFunction)),"mouseover"!==openEvent&&"mouseout"!==closeEvent||trigger.hoverIntent(config),this.options.isTriggerElementCloseClick&&"click"!==closeEvent&&"click"!==openEvent&&(this._closeFunction2=function(e){that.isOpen(trigger)&&that.close(),e.preventDefault()},trigger.on("click",this._closeFunction2))),this.options.isDestElementCloseClick&&(this._closeFunctionPopper=function(e){that.isOpen(trigger)&&that.close(),e.preventDefault()},this.getDestElement().on("click",this._closeFunctionPopper))},_removeEventHandlers:function(){var closeEvent,trigger=this.element,popper=this.getDestElement(),multipleTriggers=this.options.multipleHandlesSelector;multipleTriggers&&0<multipleTriggers.length&&(trigger=trigger.add(multipleTriggers)),trigger.off("mouseover mouseout"),this._openFunction&&(closeEvent=this.options.openMethod||this.options.openEvent,trigger.off(closeEvent,this._openFunction),this._openFunction=null),this._closeFunction&&(closeEvent=this.options.closeMethod||this.options.closeEvent,trigger.off(closeEvent,this._closeFunction),this._closeFunction=null),this._closeFunction2&&(trigger.off("click",this._closeFunction2),this._closeFunction2=null),this._closeFunctionPopper&&(popper.off("click",this._closeFunctionPopper),this._closeFunctionPopper=null)},_toggle:function(e,currentTrigger){this.isOpen(currentTrigger)?this.close():this.open(e,currentTrigger);return e&&e.preventDefault&&e.preventDefault(),this.element},_arrowOverlapsPopper:function(){var arrowBottom=this.getDestElement(),popperTop=Math.floor(arrowBottom.position().top),popperLeft=Math.floor(arrowBottom.position().left),horizontalOverlap=Math.floor(popperLeft+arrowBottom.outerWidth()),verticalOverlap=Math.floor(popperTop+arrowBottom.height()),arrow=this._arrow,arrowTop=Math.floor(arrow.position().top),arrowLeft=Math.floor(arrow.position().left),arrowBottom=(Math.floor(arrowLeft+arrow.width()),Math.floor(arrowTop+arrow.height())),horizontalOverlap=popperLeft<arrowLeft&&arrowLeft<horizontalOverlap||arrowLeft+arrow.css("width")>popperLeft&&arrowLeft+arrow.css("width")<horizontalOverlap,verticalOverlap=popperTop<arrowTop&&arrowTop<verticalOverlap||arrowTop+arrow.css("height")>popperTop&&arrowBottom+arrow.css("height")<verticalOverlap;return horizontalOverlap&&verticalOverlap},_openAnimation:function(e){function finishedLoading(){that._trigger("opencomplete"),that.getDestElement().data("isOpening",null),jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<=7&&that._positionPopper(e,!1,!0),function(){var popperHeight=popper.outerHeight(),windowHeight=jQuery(window).height();windowHeight<popperHeight&&popper.css({"max-height":windowHeight-45+"px",overflow:"auto"});jQuery(window).trigger("documentresize")}()}var that=this,popper=this.getDestElement().data("isOpening",this.element).stop(!0,!0),arrow=this._arrow,openAnimation=this.options.openAnimation;function arrowDelay(delayMS){arrow.fadeTo(0,0),window.setTimeout(function(){arrow.stop(!0,!0).show(),that._arrowOverlapsPopper()||arrow.css("opacity",1)},delayMS)}var openAnimationTime,diff,delay;"none"===openAnimation||this.isOpen()?(popper.show(),arrow&&arrowDelay(0),finishedLoading()):(openAnimationTime=this.options.openAnimationTime,arrow&&(this.options.arrowDirection,delay=0,"top"===arrow?delay=0:("bottom"===arrow||openAnimationTime<(delay=(diff=parseInt(arrow.css("top"),10)-parseInt(popper.css("top"),10))/(popper.height()||diff)*openAnimationTime))&&(delay=openAnimationTime),arrowDelay(delay)),popper[openAnimation](openAnimationTime,finishedLoading))},open:function(e,prevOwner){prevOwner=prevOwner||this.element,this.options.openAtTarget?(this._activeTrigger!==prevOwner&&(this.getDestElement().hide(),this.getDestElement().data("isOpen",!1)),this._activeTrigger=prevOwner):this._activeTrigger=this.element;var popperElem=this.getDestElement(),prevOwner=popperElem.data("isOpening");return prevOwner&&prevOwner[0]!==this.element[0]&&(popperElem.data("closeFnc")||function(){})(!0),this._handleSharedPoppersOpen(),this._handleGroupsOpen(),popperElem.data("isOpening",this.element),this._setUpArrow(e,!0,!0),jQuery.browser.msie&&this._positionPopper(e,!0,!0),this._setParentsZIndex(11),this._positionPopper(e,!0,!0),this._trigger("open"),this.options.destText&&!this.options.showLoadingMessage&&!this.isFunctionResultCached||this._openAnimation(e),this._setAriaState(!0),this.getDestElement().data("isOpen",!0),this.element},_handleGroupsOpen:function(){var groupName=this.options.groupName;groupName&&(this.closeGroup(groupName),jQuery.ui.ncbipopper.openGroups[groupName]=this.element)},_closeAnimation:function(forceClose}var p,that=this,closeAnimation=this.getDestElement().data("isOpening");closeAnimation&&this.element[0]!=closeAnimation[0]?finishedClosing():(popper=this.getDestElement().stop(!0,!0),"none"===(closeAnimation=this.options.closeAnimation)||forceClose?(popper.hide(),this._resetElementPosition(popper),finishedClosing()):(p=popper)[closeAnimation](this.options.closeAnimationTim}));for(var triggers=this.getDestElement().data("popperTriggers"),i=0;i<triggers.length;i++){var popper,arrow=(popper=jQuery.ui.jig.getElementWidgets(triggers[i],"ncbipopper")[0])._arrow;arrow&&(arrow.stop(!0,!0).hide(),popper._resetElementPosition(arrow))}},close:function(forceClose){if(this.isOpen(this._activeTrigger))return this._handleGroupsClose(forceClose),this._trigger("close"),this._activeTrigger=null,this._closeAnimation(forceClose),this._setAriaState(!1),this.getDestElement().data("isOpen",!1),this.element},closeGroup:function(currentElemOpen){return!(currentElemOpen=currentElemOpen||this.options.groupName)||(currentElemOpen=jQuery.ui.ncbipopper.openGroups[currentElemOpen])&&jQuery.ui.jig.getElementWidgets(currentElemOpen,"ncbipopper")[0].close(!0),this.element},_handleGroupsClose:function(forceClose){var groupName=this.options.groupName;!forceClose&&groupName&&(jQuery.ui.ncbipopper.openGroups[groupName]=null)},_determineAutoPosition:function(scrollLeft){var posT,winWidth,popperWidth,triggerWidth,posP,arrow,triggerHeight=jQuery(this._activeTrigger||this.element),triggerPos=triggerHeight.offset(),popperHeight=this.getDestElement(!0),win=jQuery(window);return arrow=posP=scrollLeft?(winWidth=win.width(),popperWidth=popperHeight.outerWidth(),triggerWidth=triggerHeight.width(),scrollLeft=win.scrollLeft(),popperWidth+triggerWidth+triggerPos.left<winWidth+scrollLeft?(posT="right","left"):(posT="left","right")):(posP=win.height(),popperHeight=popperHeight.outerHeight(),triggerHeight=triggerHeight.height(),arrow=win.scrollTop(),popperHeight+triggerHeight+triggerPos.top<posP+arrow?(posT="bottom","top"):(posT="top","bottom")),{posT:posT,posP:posP,arrow:arrow}},_getPositionSettings:function(e,elementType,isOnOpen){var parts=this.options.sourcePosition||this.options.destPosition,trigPosition=this.options.targetPosition||this.options.triggerPosition,parts=parts.split(/\s/),trigPosition=trigPosition.split(/\s/);"middle"===parts[0]&&(parts[0]="center"),"middle"===parts[1]&&(parts[1]="center"),"middle"===trigPosition[0]&&(trigPosition[0]="center"),"middle"===trigPosition[1]&&(trigPosition[1]="center"),this.options.sourcePosition=null,this.options.destPosition=parts.join(" "),this.options.targetPosition=null,this.options.triggerPosition=trigPosition.join(" "),"auto"===parts[0]&&(posTrigStr=this._determineAutoPosition(!1),parts[0]=posTrigStr.posP,trigPosition[0]=posTrigStr.posT,this.options.arrowDirection=posTrigStr.arrow,this._setArrowDirection(posTrigStr.arrow)),"auto"===parts[1]&&(posTrigStr=this._determineAutoPosition(!0),parts[1]=posTrigStr.posP,trigPosition[1]=posTrigStr.posT,this.options.arrowDirection=posTrigStr.arrow,this._setArrowDirection(posTrigStr.arrow));var posTrigStr="0px 0px";this.options.hasArrow&&(posTrigStr="popper"===elementType?this._getPopperOffsets(parts[0],parts[1]):this._getArrowOffsets(parts[0],parts[1])),this.options.openAtMousePosition&&isOnOpen&&(posTrigStr.xOffset=e.pageX-jQuery(e.target).offset().left+ +posTrigStr.xOffset+1,posTrigStr.yOffset=e.pageY-jQuery(e.target).offset().top+ +posTrigStr.yOffset),void 0===this._isArea&&(this._isArea="AREA"===(!!this._activeTrigger&&this._activeTrigger[0]||this.element[0]).nodeName.toUpperCase()),this._isArea?(posDestStr=this._areaElementAdjustment(posTrigStr,trigPosition),triggerElement=posDestStr.positionElement,posTrigStr=posDestStr.offset):triggerElement=null;var xOffset,posDestStr=parts[1]+" "+parts[0];posTrigStr="string"==typeof posTrigStr?2==(parts=posTrigStr.replace(/px/g,"").split(" ")).length?(xOffset=parts[0].trim(),parts[1].trim()):xOffset=0:(xOffset=posTrigStr.xOffset.replace(/px/,""),posTrigStr.yOffset.replace(/px/,"")),xOffset=0<=parseInt(xOffset)?"+"+xOffset:xOffset,posTrigStr=0<=parseInt(posTrigStr)?"+"+posTrigStr:posTrigStr;posTrigStr=trigPosition[1]+xOffset+" "+trigPosition[0]+posTrigStr;return this._isArea&&(posTrigStr="left top"),this.options.openAtMousePosition&&isOnOpen&&(posTrigStr="left top"),{dest:posDestStr,trigger:posTrigStr,triggerElement:triggerElement}},_getArrowOffsets:function(yPosition,xPosition){var xOffset="0",yOffset="0";switch(this.options.arrowDirection){case"left":case"right":switch(yPosition){case"top":yOffset="-13";break;case"center":yOffset="0";break;case"bottom":yOffset="13";break;default:yOffset="0"}break;case"top":case"bottom":switch(xPosition){case"left":xOffset="-13";break;case"center":xOffset="0";break;case"right":xOffset="13";break;default:xOffset="0"}break;default:throw"Valid arrow directions are top, bottom, left, right"}return{xOffset:xOffset,yOffset:yOffset}},_getPopperOffsets:function(yPosition,xPosition){var xOffset="0",yOffset="0",arrowDirection=this.options.arrowDirection;switch(arrowDirection){case"left":case"right":switch(xOffset="left"===arrowDirection?"7":"-7",yPosition){case"top":yOffset="-13";break;case"center":yOffset="0";break;case"bottom":yOffset="13";break;default:yOffset="0"}break;case"top":case"bottom":switch(yOffset="top"===arrowDirection?"7":"-7",xPosition){case"left":xOffset="-13";break;case"center":xOffset="0";break;case"right":xOffset="13";break;default:xOffset="0"}break;default:throw"Valid arrow directions are top, bottom, left, right"}return{xOffset:xOffset,yOffset:yOffset}},_areaElementAdjustment:function(shape,trigPosition){shape="string"==typeof shape?shape.split(" "):[shape.xOffset,shape.yOffset];var offsetX=parseInt(shape[0],10),offsetY=parseInt(shape[1],10),positionElem=jQuery(this._activeTrigger||this.element).parent(),left=jQuery(this._activeTrigger||this.element[0])[0],coords=positionElem[0].name||positionElem[0].id,top=jQuery("img[usemap='#"+coords+"']"),shape=left.shape||"rect",coords=(left.coords||"").split(/\s?,\s?/g),positionElem=top,left=0,top=0;return"circle"===shape?("top"==trigPosition[0]?top=parseFloat(coords[1])-parseFloat(coords[2]):"bottom"==trigPosition[0]?top=coords[3]+parseFloat(coords[2]):"center"==trigPosition[0]&&(top=parseFloat(coords[1])),"left"===trigPosition[1]?left=coords[0]-parseFloat(coords[2]):"right"===trigPosition[1]?left=coords[2]+parseFloat(coords[2]):"center"===trigPosition[1]&&(left=parseFloat(coords[0]))):("top"==trigPosition[0]?top=parseFloat(coords[1]):"bottom"==trigPosition[0]?top=parseFloat(coords[3]):"center"==trigPosition[0]&&(top=(parseFloat(coords[1])+parseFloat(coords[3]))/2),"left"===trigPosition[1]?left=parseFloat(coords[0]):"right"===trigPosition[1]?left=parseFloat(coords[2]):"center"===trigPosition[1]&&(left=(parseFloat(coords[0])+parseFloat(coords[2]))/2)),{positionElement:positionElem,offset:(left+=offsetX)+"px "+(top+=offsetY)+"px"}},_getCollisionSetting:function(){var collision=this.options.adjustFit;return collision="autoAdjust"===collision||"slide"===collision?"fit":"none"},_resetElementPositio},_positionPopper:function(collision,hide,popper){var posSettings=this._getPositionSettings(collision,"popper",popper),collision=this._getCollisionSetting(),popper=posSettings.triggerElement||this.options.openAtTarget&&this._activeTrigger||this.element,popper=this.getDestElement(!0).stop().show().position({my:posSettings.dest,of:popper,at:posSettings.trigger,collision:collision}).data("attached-to",popper);hide&&popper.hide(),document.times++},_addEscapeListener:function(){var that;this.options.isEscapeKeyClose&&(this._registerGlobalEscapeListener(),(that=this)._ncbipopperescapepressedFunction=function(){that.close()},jQuery(document).bind("ncbipopperescapepressed",this._ncbipopperescapepressedFunction))},_destroyEscapeListener:function(){this._ncbipopperescapepressedFunction&&(jQuery(document).unbind("ncbipopperescapepressed",this._ncbipopperescapepressedFunction),this._ncbipopperescapepressedFunction=null)},_registerGlobalEscapeListener:function(){var obj,meth;jQuery.ui.ncbipopper.globalEvents.isGlobalEscapeRegistered||(jQuery.ui.ncbipopper.globalEvents.isGlobalEscapeRegistered=!0,obj=document,meth="keypress",jQuery.browser.msie||jQuery.browser.mozilla||(obj=window,meth="keydown"),jQuery(obj)[meth}))},_addDocumentClickListener:function(){var that;this.options.isDocumentCloseClick&&(this._registerGlobalClickListener(),(that=this)._ncbipopperdocumentclickFunctio},jQuery(document).bind("ncbipopperdocumentclick",this._ncbipopperdocumentclickFunction))},_destroyDocumentClickListener:function(){this._ncbipopperdocumentclickFunction&&jQuery(document).unbind("ncbipopperdocumentclick",this._ncbipopperdocumentclickFunction)},_registerGlobalClickListener:function(){jQuery.ui.ncbipopper.globalEvents.isGlobalClickRegistered||(jQuery.ui.ncbipopper.globalEvents.isGlobalClickRegistered=!0,jQuery(document).click(function(e){jQuery(document).trigger("ncbipopperdocumentclick",[e.srcElement||e.target])}))},_checkDocumentClick:function(obj,element){if(element&&this.isOpen()&&(element=jQuery(element),!(this._isSameElementOrChild(jQuery(this.element),element)||this._isSameElementOrChild(this.getDestElement(),element)||jQuery.ui.jig.getElementWidgets(jQuery(element),"ncbipopper")[0]&&this.getDestElement()[0]==jQuery.ui.jig.getElementWidgets(jQuery(element),"ncbipopper")[0].getDestElement()[0]))){var multipleHandles=this.options.multipleHandlesSelector;if(multipleHandles){var isHandle=!1,that=this;if(jQuery(multipleHandles).each(function(){that._isSameElementOrChild(jQuery(this),element)&&(isHandle=!0)}),isHandle)return}this.close()}},_isSameElementOrChild:function(parent,child){return parent[0]==child[0]||1===jQuery(parent).has(child).length},_addResizeListener:function(){this._registerGlobalResizeListener();var that=this;this.ncbipopperdocumentresizeFunctio},jQuery(window).bind("ncbipopperdocumentresize",this.ncbipopperdocumentresizeFunction)},_destroyResizeListener:function(){this.ncbipopperdocumentresizeFunction&&(jQuery(window).unbind("ncbipopperdocumentresize",this.ncbipopperdocumentresizeFunction),this.ncbipopperdocumentresizeFunction=null)},_registerGlobalResizeListener:function(){jQuery.ui.ncbipopper.globalEvents.isGlobalResizeRegistered||(jQuery.ui.ncbipopper.globalEvents.isGlobalResizeRegistered=!0,jQuery(window).on("resize scroll}))},_pageResized:function(e){this.isOpen()&&(this._positionPopper(e),this._setUpArrow(e))},_addCloseButton:function(){var popper,closeButton,that;this.options.addCloseButton&&(0===(closeButton=(popper=this.getDestElement()).find(".ui-ncbipopper-close-button, .ncbipopper-close-button")).length&&(closeButton=jQuery("<button class='ui-ncbipopper-close-button ui-ncbipopper-close-button-generated'><span class='ui-button-text'>x</span></button>").attr("generated","true").prependTo(popper)).ncbibutton({color:"blue"}),closeButton&&((that=this)._closeButtonFunctio},closeButton.on("click",this._closeButtonFunction)))},_destroyCloseButton:function(isPopperShared){this._closeButtonFunction&&this.getDestElement().find(".ui-ncbipopper-close-button, .ncbipopper-close-button").off("click",this._closeButtonFunction).filte}).filter(".ui-ncbipopper-close-button-generated").ncbibutton("destroy").remove()},isPopperShared:function(){return 1<(this.getDestElement().data("popperTriggers")||[]).length},_addSharingDetails:function(){var popper=this.getDestElement(),sharedPoppers=popper.data("popperTriggers")||[];sharedPoppers.push(this.element),popper.data("popperTriggers",sharedPoppers)},_removeSharingDetails:function(){for(var popper=this.getDestElement(),sharedPopper=popper.data("popperTriggers"),domTrigger=this.element[0],i=0;i<sharedPopper.length;i++)if(sharedPopper[i][0]==domTrigger){sharedPopper.splice(i,1);break}0===sharedPopper.length?popper.removeData("popperTriggers"):popper.data("popperTriggers",sharedPopper)},_handleSharedPoppersOpen:function(){if(this.isPopperShared())for(var sharedPopper=this.getDestElement().data("popperTriggers"),domTrigger=this.element[0],i=0;i<sharedPopper.length;i++)if(sharedPopper[i][0]!=domTrigger&&jQuery.ui.jig.getElementWidgets(sharedPopper[i],"ncbipopper")[0].isOpen()){jQuery.ui.jig.getElementWidgets(sharedPopper[i],"ncbipopper")[0].close(!0);break}},_addPopperHover:function(){var contentElement,that,config;"mouseout"===(this.options.closeMethod||this.options.closeEvent)&&(contentElement=this.getDestElement(),this._arrow&&(contentElement=contentElement.add(this._arrow)),config={timeout:(that=this).options.delayTimeout,over:function(){},out:function(){that._overPopper(!1)}},jQuery(contentElement).hoverIntent(config),jQuery(contentElement).mouseenter(function(){that._overPopper(!0),that._lastOver=new Date}),jQuery(contentElement).mouseleave(function(){new Date-that._lastOver<that.options.delayTimeout&&that._overPopper(!1)}).mouseout(function(e){var tar=jQuery(e.target||e.srcElement);(tar.hasClass("ui-ncbipopper-wrapper")||tar.hasClass("ui-ncbipopper-arrow-image"))&&0===tar.find(e.relatedTarget).length&&(that._isOverPopper=!1,that._outTimer=window.setTimeou},200))}))},_destroyPopperHover:function(){var jqContentElement=jQuery(this.getDestElement());jqContentElement.unbind("mouseenter").unbind("mouseleave"),jqContentElement.removeProp("hoverIntent_t"),jqContentElement.removeProp("hoverIntent_s")},_overPopper:function(isOver){var that;this._outTimer&&window.clearInterval(this._outTimer),isOver&&(this._pTimer=new Date),(this._isOverPopper=isOver)||(this._isOverTrigger?(that=this,window.setTimeout(function(){that._isOverPopper||that._isOverTrigger||that._overPopper(!1)},300)):this.close())},isOpen:function(isCurrentActive){isCurrentActive=isCurrentActive||this._activeTrigger,isCurrentActive=jQuery(isCurrentActive);var activeTrigger=jQuery(this._activeTrigger),triggers=this.getDestElement().data("popperTriggers"),isCurrentActive=!(this.options.openAtTarget||1<triggers.length)||isCurrentActive&&isCurrentActive.length&&activeTrigger&&activeTrigger.length&&activeTrigger[0]===isCurrentActive[0];return!(!this.getDestElement().data("isOpen")||!isCurrentActive)},_setParentsZIndex:function(index){var relInd,someElem,newPos;jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<=7&&(newPos=this.getDestElement().parents(),relInd=0,1<newPos.length&&(newPos.each(function(ind){if("relative"===jQuery(this).css("position"))return relInd=0===ind?0:ind+1,!1}),newPos=(someElem=newPos.eq(relInd)).css("position"),someElem.data("orgPosition")||someElem.data("orgPosition",newPos),"static"!==newPos&&"relative"!==newPos||(newPos=1===index?someElem.data("orgPosition"):"relative",someElem.css({position:newPos,"z-index":index}))))},addTriggerAria:function(multipleTriggers){var trigger=multipleTriggers;multipleTriggers||(trigger=this.element,(multipleTriggers=this.options.multipleHandlesSelector)&&0<multipleTriggers.length&&(trigger=trigger.add(multipleTriggers))),trigger.attr("role","button").attr("aria-expanded",!1).attr("aria-haspopup",!0)},_destroyTriggerAria:function(){var trigger=this.element,multipleTriggers=this.options.multipleHandlesSelector;multipleTriggers&&0<multipleTriggers.length&&(trigger=trigger.add(multipleTriggers)),trigger.removeAttr("role aria-expanded aria-haspopup")},_addDestAria:function(){this.getDestElement().attr("aria-live","assertive").attr("aria-hidden",!0).addClass("ui-helper-reset")},_destroyDestAri},_setAriaState:function(isOpen,t,p){t=t||this.element,p=p||this.getDestElement();t.attr("aria-expanded",isOpen),p.attr("aria-hidden",!isOpen)}}),jQuery.ui.ncbipopper.openGroups={},jQuery.ui.ncbipopper.globalEvents={isGlobalEscapeRegistered:!1,isGlobalClickRegistered:!1,isGlobalResizeRegistered:!1},$.ui.jig.widget("ui.ncbibasicmenu",{options:{defaultSelection:-1,allowMultipleSelections:!1,orientation:"vertical",preventDefaultCheck:!0,stopPropagationCheck:!0,normalizeSubsToOneLevel:!1,disableSelect:!1},styles:{itemNoHilite:"ui-ncbimenu-item-no-hlt",itemSkip:"ui-ncbimenu-item-skip"},_ini},_creat},rescan:function(){this._addClasses(),this._setTabIndex(),this._addAria(),this._destroyFocusEvents(),this._setUpFocusEvents()},destro},_setSelectorString:function(){var limitChar=">";this.options.normalizeSubsToOneLevel&&(limitChar="",this.element.addClass("oneLevel")),this._liSelector=limitChar+"li:not(.ui-ncbimenu-item-skip)"},_addClasses:function(){this.isVert="vertical"===this.options.orientation;var classesToAdd="ui-ncbibasicmenu";this.isVert||(classesToAdd+=" orientation_hort"),this.element.addClass(classesToAdd)},_destroyClasse},_setUpDefaults:function(){if(this.selectedOption=this.options.defaultSelection,-1!==this.selectedOption){var anchors=this.element.find(this._liSelector+">a");if(this.options.allowMultipleSelections)for(var i=0;i<this.selectedOption.length;i++)this._makeSelection(anchors.eq(this.selectedOption[i]),"load");else this._makeSelection(anchors.eq(this.selectedOption),"load")}},_formatList:function(){},_destroyFormatLis},_setTabIndex:function(){var anchors=this.element.find(this._liSelector+">a").attr("tabindex","-1"),selected=this.element.find(this._liSelector+".selected>a");if(0<selected.length)var firstTab=selected.eq(0);else for(var index=0,firstTab=anchors.eq(0);firstTab.is("."+this.styles.itemSkip+" a")&&index<anchors.length-1;)index+=1,firstTab=anchors.eq(index);this.options.nested||firstTab.removeAttr("tabindex")},_destroyTabIndex:function(){this.element.find(this._liSelector+">a").removeAttr("tabindex")},_addEvents:function(){this._setUpKeyListener(),this._setUpClickEvents(),this._setUpFocusEvents(),this._setUpHoverEvents()},_destroyEvent},_setUpKeyListener:function(){var that;this._menuKeyListener||((that=this)._menuKeyListener=function(e){that.element.is(":visible")&&that._keyPressDetected(e.keyCode)&&(e.preventDefault(),that.options.stopPropagationCheck&&e.stopPropagation())},jQuery(document).keydown(this._menuKeyListener))},_destroyKeyListene},_setUpClickEvents:function(){var that=this;this._ulClickEvent=function(e){var elem=e.srcElement||e.target;elem&&(that.options.disableSelect||that._makeSelection(jQuery(elem),"click"),that.options.stopPropagationCheck&&e.stopPropagation(),that.options.preventDefaultCheck&&1===jQuery(elem).siblings("ul").length&&e.preventDefault())},this.element.on("click.ncbibasicmenu",this._ulClickEvent)},_destroyClickEvent},_setUpFocusEvents:function(){var that=this;this._focusFnc=function(){that._menuFocused(this)},this._blurFn},this.element.find(this._liSelector+">a").on("blur",this._blurFnc).on("focus",this._focusFnc)},_destroyFocusEvents:function(){this.element.find(this._liSelector+">a").off("blur",this._blurFnc).off("focus",this._focusFnc)},focus:function(){this._menuFocused(null)},_menuFocuse},_menuBlure},removeFocu},_setUpHoverEvents:function(){var that=this;this._mouseEnterFnc=function(li){li=jQuery(li.target).closest("li");li.hasClass(that.styles.itemNoHilite)||li.hasClass(that.styles.itemSkip)||li.addClass("hover")},this.mouseLeaveFnc=function(){jQuery(this).removeClass("hover")},this.element.on("mouseenter","li",this._mouseEnterFnc).on("mouseleave","li",this.mouseLeaveFnc)},_destroyHoverEvents:function(){this.element.off("mouseenter",this._mouseEnterFnc).off("mouseleave",this.mouseLeaveFnc),this._mouseEnterFnc=null,this.mouseLeaveFnc=null},_makeSelection:function(anchor,action){var previouslySelected,triggerEvt,li=anchor.parent("li");1===li.length&&(previouslySelected=li.hasClass("selected"),this.options.allowMultipleSelections||this._removeAllSelections(),li.hasClass(this.styles.itemSkip)||(li.hasClass(this.styles.itemNoHilite)||li[previouslySelected?"removeClass":"addClass"]("selected"),triggerEvt=previouslySelected?"unselected":"selected","menunav"!==action&&this._trigger(triggerEvt,"x",[anchor,li,action]),"click"===action||"load"===action?this.selectedOption=this.element.find(this._liSelector+".selected").index():previouslySelected||li.find(">a").focus())),this._setTabIndex()},_keys:{up:38,down:40,left:37,right:39,enter:13,escape:27,tab:9},_keyPressDetected:function(keyCode){var k=this._keys,cancelAction=!1;if(this._isFocused&&this.element.has(this._liSelector+">a:focus"))switch(keyCode){case k.up:this._upDownPressed(-1),cancelAction=!0;break;case k.down:this._upDownPressed(1),cancelAction=!0;break;case k.left:this._leftRightPressed(-1),cancelAction=!0;break;case k.right:this._leftRightPressed(1),cancelAction=!0;break;case k.enter:this._enterSelected(),cancelAction=!1;break;case k.escape:this._escapeTyped(),cancelAction=!1;break;case k.tab:this._trigger("tab");default:cancelAction=!1}return cancelAction},_upDownPressed:function(evtStr){this.isVert?this._moveSelection(evtStr):(evtStr=1===evtStr?"actiondown":"actionup",this._trigger(evtStr,"x",this.focusedElement()))},_leftRightPressed:function(dir){var evtStr;this.isVert?(evtStr=1===dir?"actionright":"actionleft",this._trigger(evtStr,"x",this.focusedElement())):this._moveSelection(dir)},focusedElement:function(){return-1!==this.selectedOption?this.element.find(this._liSelector).eq(this.selectedOption):this.element.find(this._liSelector+":has(>a:focus)")},moveSelectio},_getNextIndex:function(current,nextIndex,listLength){nextIndex=current+nextIndex;return nextIndex<0?nextIndex=listLength-1:listLength-1<nextIndex&&(nextIndex=0),nextIndex},_moveSelection:function(dir){for(var anchors=this.element.find(this._liSelector+">a"),nextIndex=this._getNextIndex(this.selectedOption,dir,anchors.length);anchors.eq(nextIndex).closest("li").hasClass(this.styles.itemSkip);)nextIndex=this._getNextIndex(nextIndex,dir,anchors.length);this.selectedOption=nextIndex,this._makeSelection(anchors.eq(nextIndex),"keyboard")},removeAllSelections:function(){this.selectedOption=-1,this._removeAllSelections(),this._setTabIndex()},_removeAllSelection},_enterSelected:function(){this._trigger("enter")},_escapeTyped:function(){this._trigger("escape","x",this.focusedElement())},_addAria:function(){var parentMenu=this.element.parents('[role="menubar"]'),lis=this.element.find(this._liSelector),anchors=lis.find(">a");this.element.attr("role",0===parentMenu.length?"menubar":"menu"),lis.attr("role","presentation"),anchors.attr("role","menuitem")},_destroyAria:function(){var lis=this.element.find(this._liSelector),anchors=lis.find(">a");this.element.removeAttr("role"),lis.removeAttr("role"),anchors.removeAttr("role")},selectFirstIte}}),function($){$.ui.jig.widget("ui.ncbilinkedselects",{_selectEls:[],_localMap:null,options:{firstPopulatedFromDs:!0,localData:null,localDataCallback:null,initialSelected:null,selects:null,webservice:null,loadingSpinner:!0,loadingText:"Loading...",loadingImage:jQuery.ui.jig._baseURL+"/img/loading.gif"},_create:function(){this.options.localData?this._localMap=eval(this.options.localData):this._initResponseCache(),this._selectEls=this.getSelects(),this._prepareSelects(),this._setEvents(),this.options.firstPopulatedFromDs&&this._populateFirstSelect(),this.options.initialSelected&&this._selectInitialOptions()},_selectInitialOptions:function(){var initialSelectedIds=this.options.initialSelected.split(","),that=this,doSelection=function(e){for(var index,$select=$(this),i=0;i<that._selectEls.length;i++)if($select[0]===that._selectEls[i]){index=i;break}$select.find(initialSelectedIds[index]).attr("selected","selected"),$select.trigger("change"),$select[0]===that._selectEls[that._selectEls.length-1]&&$(document).unbind("ncbilinkedselectspopulated",doSelection)};$(this._selectEls).bind("ncbilinkedselectspopulated",doSelection)},_appendToSelec},_populateFirstSelect:function(){if(this.options.localData)for(var strOrObjects=this._getFirstOptionsFromLocalDs(),isString=this._isArrayOfStrings(strOrObjects),i=0;i<strOrObjects.length;i++){var strOrObj=strOrObjects[i];if(isString)this._appendToSelect(this.element,'<option value="'+strOrObj+'">'+strOrObj+"</option>");else for(var string in strOrObj)this._appendToSelect(this.element,'<option value="'+strOrObj[string]+'">'+string+"</option>")}else this._getAndAppendFromWebService(this.element,{})},_getFirstOptionsFromLocalDs:function(){var res=[];if(this.options.localDataCallback)res=this.options.localDataCallback.apply(this,[this._localMap]);else for(var i=0;i<this._localMap.length;i++){var opVal=this._localMap[i];("string"==typeof opVal||$.isPlainObject(opVal))&&res.push(opVal)}return res},getSelects:function(){if(!this.options.selects){var restSelects=this.element.closest("fieldset, form");0===restSelects.length&&$.ui.jig._isConsole("warn")&&console.warn("jig warning: ncbilinkedselects. Your select elements must be within either a fieldset or a form element");for(var selectsInCt=restSelects.find("select"),thisElSeen=!1,selects=[],i=0;i<selectsInCt.length;i++){var selectInCt=selectsInCt[i];selectInCt==this.element[0]&&(thisElSeen=!0),thisElSeen&&!$(selectInCt).hasClass("ui-ncbilinkedselects-ignore")&&selects.push(selectInCt)}return $(selects)}restSelects=$(this.options.selects);return this.element.add(restSelects)},_prepareSelects:function(){this._selectEls.eac})},_setEvents:function(){var self=this;this._selectEls.each(function(){var select=$(this),name=this.name;self._isLastSelect(name)||select.bind("change}),select.hasClass("jig-ncbiselect")&&select.bind("ncbilinkedselectspopulate})})},_resetNextSelects:function(name){for(var currSelectSeenYet=!1,i=0;i<this._selectEls.length;i++){var sel=$(this._selectEls[i]);sel.attr("name")!=name?currSelectSeenYet&&sel.children("option").eac}):currSelectSeenYet=!0}},_getSelectPath:function(select){for(var path=[],sels=this.getSelects(),i=0;i<sels.length;i++){var currentSelect=sels[i];if(path.push($(currentSelect).val()),select.get(0)==currentSelect)break}return path},_getParamString:function(){var sels=this.getSelects(),selsAr=[];return sels.each(function(){$(this).find("option:selected").hasClass("ui-ncbilinkedselects-perm")||selsAr.push(this)}),$(selsAr).serialize()},_populateNext:function(nextSelect){var currentSelect=$(nextSelect.target),optionClicked=currentSelect.children("option:selected");optionClicked.hasClass("ui-ncbilinkedselects-perm")||(currentSelect.attr("name"),currentSelect.val(),nextSelect=this._getNextSelect(currentSelect.attr("name")),this.options.webservice?this._getAndAppendFromWebService(nextSelect):this.options.localData&&this._populateSelectFromLocalMap(currentSelect,optionClicked,nextSelect))},_initResponseCach},_setCachedResponse:function(response){var key=this._getParamString(),key=JSON.stringify(key);this._responseCache[key]=response},_getCachedResponse:function(){var key=this._getParamString(),key=JSON.stringify(key);return key in this._responseCache?this._responseCache[key]:null},_getAndAppendFromWebService:function(select){var self=this;if(!this.options.webservice)return $.ui.jig._isConsole("warn")&&(console.warn("Unknown webservice for"),console.warn(this.element)),!1;var firstOpt,loading,cachedResponse=this._getCachedResponse();cachedResponse?this._appendToSelect(select,cachedResponse):(this.options.loadingSpinner&&((firstOpt=select.find("option")).remove(),loading=this._addLoadingIndicator(select)),$.get(this.options.webservice,this._getParamString(),function(a,status,xmlhttpObj){response=xmlhttpObj.responseText,self.options.loadingSpinner&&(self._removeLoadingIndicator(loading),select.prepend(firstOpt)),self._setCachedResponse(response),self._appendToSelect(select,response)},"HTML"))},_addLoadingIndicator:function(select){var elToAttachLoading=select.hasClass("jig-ncbiselect")?select.ncbiselect("getGeneratedElem"):select,position=elToAttachLoading.offset(),loading=elToAttachLoading.outerWidth(),height=elToAttachLoading.outerHeight(),loading=jQuery('<div class="ui-ncbilinkedselect-loading">').insertAfter(elToAttachLoading).css({left:position.left,top:position.top,width:loading,height:height});return loading.append('<div class="ui-ncbilinkedselect-loading-overlay">'),jQuery('<div class="ui-ncbilinkedselect-loading-text"><img src="'+this.options.loadingImage+'" />'+this.options.loadingText+"</div>").css("line-height",height+"px").appendTo(loading),1<select.attr("size")&&loading.css("text-align","center"),loading},_removeLoadingIndicato},queryLocalService:function(valuePath){var res=[];return this._localMap[0],function getIndex(arr){for(var i in arr){var p,value=arr[i];for(p in value)if(value[p]==valuePath[0]){if(1==valuePath.length){for(var arrObjs=arr[parseInt(i)+1],l=0;l<arrObjs.length;l++){var arrOb=arrObjs[l];$.isArray(arrOb)||res.push(arrObjs[l])}return}valuePath.shift()}jQuery.isArray(value)&&getIndex(value)}}(this._localMap),res},_getOptionId:function(selectId,optionValue){return selectId+"-"+optionValue.replace(/\s/,"-")},_populateSelectFromLocalMap:function(currentSelect,optionClicked,nextSelect){for(var cb=this.options.localDataCallback,options=cb?cb.apply(this,[this._localMap,currentSelect,optionClicked,this._selectEls]):this.queryLocalService(this._getSelectPath(currentSelect)),selectId=currentSelect.attr("id"),arrayOfStrings=this._isArrayOfStrings(options),i=0;i<options.length;i++){var string,value,p,op=options[i];if(arrayOfStrings){var idStr=selectId?' id ="'+this._getOptionId(selectId,op)+'"':"";this._appendToSelect(nextSelect,'<option value="'+op+'"'+idStr+">"+op+"</option>")}else{for(p in op)value=op[string=p];idStr=selectId?' id="'+this._getOptionId(selectId,value)+'"':"";this._appendToSelect(nextSelect,'<option value="'+value+'"'+idStr+">"+string+"</option>")}}},_isArrayOfString},_isLastSelect:function(name){return els=this._selectEls,name===els[els.length-1].name},_isFirstSelect:function(name){return els=this._selectEls,name===els[0].name},_getNextSelect:function(name){for(var i=0;i<this._selectEls.length;i++)if(this._selectEls[i].name==name)return $(this._selectEls[i+1])},change:function(selectIndex,value){$(this.getSelects()[selectIndex]).val(value).trigger("change")}})}(jQuery),function(){jQuery.ui.jig.widget("ui.ncbilinksmenu",jQuery.ui.ncbipopper,{options:{openEvent:"click",closeEvent:"click",closeOnSelect:!0,openAnimation:"none",cssClass:"ui-ncbilinksmenu",ignoreSettingOutterWidth:!0,excludeBasicCssStyles:!0,wrapElement:!0,preventDefault:""},_create:function(){this._checkHrefForWebService(),this._setPopperOptions(),jQuery.ui.ncbipopper.prototype._create.apply(this,arguments),this._addMenuAria(),this._addOpenEvents()},destroy:function(){this._destroyMenuAria(),this._destroyMenu(),this._destroyOpenEvents(),jQuery.ui.ncbipopper.prototype.destroy.apply(this,arguments)},_checkHrefForWebService:function(){this.options.webservice||this.options.destSelector||this.options.localJSON||(this.options.webservice=this.element.attr("href"))},_setPopperOptions:function(){var opts=this.options;opts.loadingMessage&&(opts.showLoadingMessage=!0),opts.width||(opts.width="200px"),(this.options.webservice||this.options.localJSON)&&(this.options.destText="<ul class='linksmenu-ul'><li class='ui-ncbilinksmenu-loadingMessage'><span>"+this.options.loadingText+"</span></li></ul>")},open:function(){var that,selector,json;this._setTriggerId(),this.isLoaded?this.getDestElement().find("ul").eq(0).ncbibasicmenu("removeAllSelections").ncbibasicmenu("focus"):(that=this).options.webservice?(json=this.options.webservice,(selector=this.options.webserviceMenuSelector)||-1!==json.indexOf("#")&&(selector=json.match(/#.+/)[0]),jQuery.get(json,function(data){var menu;"string"==typeof data?(menu=data,selector&&(menu=jQuery("<div/>").html(data).find(selector)),that.getDestElement().empty().html(menu),that._createMenu()):that._loadContentJSON(data)}).error(function(){that.getDestElement().find("ul.linksmenu-ul").replaceWith("<ul class='linksmenu-ul'><li class='ui-ncbilinksmenu-errorMessage'><span>Error Loading Data</span></li></ul>"),that._logError(),window.setTimeou},4e3)})):this.options.localJSON?("function"==typeof(json=this.options.localJSON)&&(json=json()),this._loadContentJSON(json)):this._createMenu(),jQuery.ui.ncbipopper.prototype.open.apply(this,arguments)},_addMenuAria:function(){this.element.wrap("<span></span>").attr("role","menuitem").parent().attr("role","menubar")},_destroyMenuAria:function(){this.element.unwrap().removeAttr("role")},_createMenu:function(){this.isLoaded=!0;var that,selectedFnc,ul=this.getDestElement().find("ul").eq(0);ul.hasClass("ui-ncbibasicmenu")||(ul.ncbibasicmenu({stopPropagationCheck:!1,normalizeSubsToOneLevel:!0,disableSelect:!0}),selectedFnc=function(event){var trigger=ul.closest(".ui-ncbilinksmenu").data("attachedTo"),linksmenuInstance=jQuery.ui.jig.getElementWidgets(trigger,"ncbilinksmenu")[0];(linksmenuInstance=linksmenuInstance||that).isOpen()&&("ncbibasicmenuescape"!=event.type&&linksmenuInstance.options.closeOnSelect&&linksmenuInstance.close(),ul.not(jQuery(event.target)).find("li.selected").not(jQuery(event.target).closest("li")).removeClass("selected"),"ncbibasicmenuescape"!=event.type&&linksmenuInstance.options.closeOnSelect&&trigger.focus())},(that=this)._selectedFnc=selectedFnc,ul.on("ncbibasicmenuescape",selectedFnc),ul.on("click","a",selectedFnc))},_destroyMenu:function(){var ul=this.getDestElement().find("ul").eq(0);ul.ncbibasicmenu("destroy"),ul.ncbibasicmenu("focus").off("ncbibasicmenuescape",this._selectedFnc).off("ncbibasicmenuenter",this._selectedFnc).off("click",this._selectedFnc),this._selectedFnc=null},_loadContentJSON:function(data){"function"==typeof data&&data.apply(this);var that=this,menuUl=jQuery("<ul></ul>");function buildLink(menuItem,attachTo){var text=menuItem.text,href=menuItem.href||"#",target=menuItem.target||"",click=menuItem.click||"";"string"==typeof click&&""!=click&&(eval("clicktmp = "+click),click=clicktmp);var rel=menuItem.rel||"",target=target&&' target="'+target+'"',rel=rel&&' rel="'+rel+'"',li=jQuery("<li></li>"),link=jQuery("<a href='"+href+"'"+target+rel+">"+text+"</a>");if(click)try{link.click(function(e){click.call(this,e,that),e.preventDefault&&jQuery(this).is(that.options.preventDefault)&&e.preventDefault()})}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}li.append(link),attachTo.append(li)}function buildMenu(linksList,parentNode){for(var i=0;i<linksList.length;i++){var li,currentNode=linksList[i],newUL=currentNode.heading;newUL?(li=jQuery("<li></li>").attr("role","heading"),newUL=jQuery("<span>"+newUL+"</span>"),li.append(newUL),(newUL=currentNode.links)&&(buildMenu(newUL,newUL=jQuery("<ul></ul>")),li.append(newUL)),parentNode.append(li)):buildLink(currentNode,parentNode)}}var menuLinks=data.links;menuLinks&&buildMenu(menuLinks,menuUl),this._contentFetched=!0,this.isFunctionResultCached=this.options.isDestTextCacheable;var popper=this.getDestElement();popper.empty().append(menuUl),this._createMenu(),this._trigger("jsonmenuloaded")},_logError:function(){var statData,id,href,text,webservice;"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping&&(statData={jsevent:"ncbilinksmenu_error"},id=(webservice=this.element).attr("id")||null,href=webservice.attr("href")||null,text=webservice.text()||null,webservice=this.options.webservice,id&&(statData.id=id),href&&(statData.href=href),text&&(statData.text=text),webservice&&(statData.webservice=webservice),ncbi.sg.ping(statData))},_setTriggerId:function(){var id=this.element.attr("id");id&&this.getDestElement().data("triggerId","#"+id).attr("data-jigtriggerid","#"+id).data("trigger",this.element)},_pingDetails:function(evt,elem,action){"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping&&ncbi.sg.ping(elem,evt.originalEvent,action,{})},_addOpenEvents:function(){var that=this;this._keyDownFnc=function(keyCode){keyCode=keyCode.keyCode;38!==keyCode&&40!==keyCode||that.open()},this.element.on("keydown",this._keyDownFnc)},_destroyOpenEvent}})}(),jQuery.ui.jig.widget("ui.ncbimenu",{options:{isSubMenuLimited:!1,delayTimeout:500,useHoverEvents:!0},_create:function(){this._addClasses(),this._addAria(),this._createMenus(),this._addListeners(),this._addEvents(),this._addAjaxEvents()},rescan:function(){this._destroyListeners(),this._destroyEvents(),this._addAria(),this._createMenus(),this._addListeners(),this._addEvents()},destroy:function(){this._destroyEvents(),this._destroyClasses(),this._destroyAria(),this._destroyListeners(),this._destroyMenus()},_addClasses:function(){this.element.addClass("ui-ncbimenu")},_destroyClasses:function(){this.element.removeClass("ui-ncbimenu")},_addAria:function(){this.element.attr("role","menubar").find("li").filter(":has(ul)").find("a").attr("aria-haspopup","true").end().find("ul").attr("aria-hidden","true")},_destroyAria:function(){this.element.removeAttr("role").find("li").removeAttr("role").filter(":has(ul)").find("a").removeAttr("aria-haspopup").removeAttr("role").end().find("ul").removeAttr("aria-hidden").removeAttr("role")},_createMenus:function(){this.element.ncbibasicmenu({orientation:"horizontal"});var level2=this.element.find(">li:has(>ul)");level2.find(">a").addClass("expandDown"),level2.find(">ul").ncbibasicmenu({nested:!0}),this.options.isSubMenuLimited||(level2.find(">ul ul").ncbibasicmenu({nested:!0}),level2.find(">ul ul").parent().find(">a").addClass("expandRight"))},_destroyMenus:function(){this.element.removeClass("jig-ncbimenu cf ui-ncbibasicmenu orientation_hort").find("ul").andSelf().show().ncbibasicmenu("destroy")},_addEvents:function(){var config,that=this;this._windowClickFnc=function(srcElem){srcElem=srcElem.target||srcElem.srcElement;that.element[0]===srcElem||1===that.element.find(srcElem).length||that.closeSub(that.element.find("ul"))},jQuery(window).on("click",this._windowClickFnc),this._unselectEverythingFnc=function(){that._unselectEverything()},this.element.find("li").not(":has(ul)").find("a").on("click",this._unselectEverythingFnc),this._blurFnc=function(){that._checkFocus()},this.element.on("blur","a",this._blurFnc),this.options.useHoverEvents&&(config={timeout:this.options.delayTimeout,over:function(){var anchor,li,selectedLi;that._isActive&&(0===(li=(anchor=jQuery(this)).parent()).has("ul").length?(selectedLi=li.siblings("li.selected").removeClass("selected"),that.closeSub(selectedLi),anchor.focus()):li.hasClass("selected")||anchor.focus().click())},out:function(){}},this.element.find(">li:not(:has(ul))>a,li:has(ul)>a").hoverIntent(config))},_destroyEvents:function(){jQuery(window).off("click",this._windowClickFnc),this._windowClickFnc=null,this.element.off("blur","a",this._blurFnc),this._blurFnc=null,this.element.find(">li:not(:has(ul))>a,li:has(ul)>a").unbind("mouseover mouseoff"),this.element.find("li").not(":has(ul)").find("a").off("click",this._unselectEverythingFnc)},_addAjaxEvents:function(){var that;0<this.element.find(">li:has(a.expandDown)").not(":has(ul)").length&&((that=this)._ajaxEnterFnc=function(){that._loadAjaxContent()},this.element.on("mouseenter",this._ajaxEnterFnc))},_loadAjaxContent:function(){var that=this;this.element.off("mouseenter",this._ajaxEnterFnc),this._ajaxEnterFnc=null;var links=this.element.find("a.expandDown"),pageURL=links.eq(0).prop("href").split("#");jQuery("<div/>").load(pageURL[0],function(){that._handleAjaxLoadCallback(this,links)})},_handleAjaxLoadCallback:function(externalPage,links){var wrapper=jQuery(externalPage);links.each(function(){var link=jQuery(this),menuBranch=link.prop("href").split("#")[1],menuBranch=wrapper.find("#"+menuBranch);"li"===menuBranch[0].tagName.toLowerCase()&&(menuBranch=menuBranch.find(">ul")),link.parent().append(menuBranch)}),this._createMenus(),this._addEvents()},_checkFocus:function(){var that=this;window.setTimeout(function(){0===that.element.find("a:focus").length&&that._unselectEverything()},10)},_addListeners:function(){var that=this;this.element.find(">ul").andSelf().on("ncbibasicmenuunselected",function(evtObj,anchor,li,action){"click"===action&&that.closeSub(li)}).on("ncbibasicmenuselected",function(evtObj,anchor,li,sibs){"click"===sibs?that.openSub(li):0<(sibs=li.siblings().find("ul:visible")).length&&(sibs.each(function(){that.closeSub(jQuery(this))}),li.parent("ul").hasClass("ui-ncbimenu")&&that.openSub(li))}).on("ncbibasicmenuactiondown ncbibasicmenuactionright",function(evtObj,li){var ul=(li=jQuery(li)).find(">ul");li.hasClass("selected")?1===ul.length&&ul.not(":visible")&&that.openSub(li):li.find(">a").click(),1===ul.length&&window.setTimeout(function(){ul.ncbibasicmenu("selectFirstItem")},10)}).on("ncbibasicmenuactionup ncbibasicmenuactionleft ncbibasicmenuescape",function(evtObj,parentLi){var ul=(parentLi=jQuery(parentLi)).find(">ul");0<ul.length&&ul.is(":visible")?that.closeSub(jQuery(parentLi)):((parentLi=parentLi.parent("ul").parent("li")).find(">a").focus(),that.closeSub(parentLi))})},_destroyListener},openSub:function(li){var at,collision,ul=li.find(">ul");1===ul.length&&(this._isActive=!0,0<(collision=li.parent().find("li:has(ul:visible)")).length&&this.closeSub(collision),collision=li.parent().hasClass("orientation_hort")?(at="left bottom","fit flip"):(at="right center","flip fit"),ul.show().position({of:li,my:"left top",at:at,collision:collision}).attr("aria-hidden","false"))},closeSub:function(ul){ul=ul.is("li")?ul.find("ul"):ul;ul.find("ul").andSelf().not(".ui-ncbimenu").hide().attr("aria-hidden","true").end().ncbibasicmenu("removeAllSelections").find("li.selected").removeClass("selected")},_unselectEverything:function(){var uls=this.element.find("ul:visible").andSelf();this.closeSub(uls),this._isActive=!1}}),jQuery.ui.jig.widget("ui.ncbiinpagenav",{selector:".jig-ncbiinpagenav, [data-jig-ncbiinpagenav]",options:{currentHeadingClass:"currentHeading",gotoLinkText:"Go to:",gotoLinkTitle:"Go to other sections in this page",gotoTopLink:!1,gotoTopLinkAttrs:{},gotoTopLinkHref:"#top",gotoTopLinkText:"Top&#9650;",headingLevel:null,allHeadingLevels:["h2","h3","h4","h5","h6"],headingExclude:".jig-ncbiinpagenav-heading-exclude",inHeadingExclude:".jig-ncbiinpagenav-inheading-exclude, .ui-helper-hidden-accessible",smoothScroll:!0,gotoPoppers:!0,topOfPageTOC:!1,tocTagName:"ul",addNumbers:!1,puncMark:"."},_create:function(){this._inPageNav(),this._scrollIntoView()},destroy:function(){jQuery.Widget.prototype.destroy.apply(this,arguments),this._removeGoto(),this._removeScrollListener(),this._removeTOC(),this.options.addNumbers&&this.element.find(".jig-ncbiinpagenav-number").remove()},_makeGotoDiv:function(headings,enableSmoothScroll,popMenuId){var gotoDiv='<div class="goto jig-ncbiinpagenav-goto-container">';if(this.options.gotoPoppers&&(gotoDiv+='<a class="tgt_dark page-toc-label jig-ncbiinpagenav-goto-heading" href="#"',gotoDiv+=' title="'+this.options.gotoLinkTitle+'">'+this.options.gotoLinkText+"</a>"),this.options.gotoTopLink){for(var prop in gotoDiv+='<ul class="links inline_list_right">',gotoDiv+="<li"+enableSmoothScroll+'><a href="'+this.options.gotoTopLinkHref+'"',this.options.gotoTopLinkAttrs)gotoDiv+=" "+prop+'="'+this.options.gotoTopLinkAttrs[prop]+'"';gotoDiv+=">"+this.options.gotoTopLinkText+"</a></li></ul>"}gotoDiv+="</div>",headings.not(this.options.headingExclude).addClass("ui-helper-clearfix").before(gotoDiv)},_makeTopOfPageTOC:function(tocTagName,widgetClassApplied,appendToElem){var lis=this._buildLis(tocTagName,this.options.tocTagName,!0),enableSmoothScrollClass=this.options.smoothScroll?" jig-ncbismoothscroll":"",enableSmoothScrollConfig=this.options.smoothScroll?" data-jigconfig=\"topHref: '"+this.options.gotoTopLinkHref+"'\"":"",tocTagName=this.options.tocTagName;jQuery("<"+tocTagName+' id="'+this.getTocId()+'" class="jig-ncbiinpagenav-toc-container'+enableSmoothScrollClass+'"'+enableSmoothScrollConfig+">"+lis+"</"+tocTagName+">").prependTo(appendToElem)},_makeGotoPoppers:function(linksMenuConfig,widgetClassApplied,firstAnchor,popMenu){var popMenuId=this.getPopMenuId(),linksMenuConfig=this._buildLis(linksMenuConfig,"ul",!1),popMenu=jQuery('<ul id="'+popMenuId+'"'+popMenu+">"+linksMenuConfig+"</ul>").appendTo(firstAnchor),linksMenuConfig=this.element.find(".jig-ncbiinpagenav-goto-heading"),firstAnchor=linksMenuConfig.eq(0),linksMenuConfig={destSelector:"#"+popMenuId,multipleHandlesSelector:linksMenuConfig.filter(":gt(0)"),openAtTarget:!0,triggerPosition:"bottom left"},that=this;firstAnchor.ncbilinksmenu(linksMenuConfig).bind("ncbilinksmenuopen",function(){that._inPageNavMenuOpen()}).bind("ncbilinksmenuclose",function(){that._inPageNavMenuClose()}),this._firstAnchor=firstAnchor,"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.scanLinks(popMenu[0].getElementsByTagName("a"))},_buildLis:function(headings,tagName,nested){var numberingIndex,allHeadingLevels=jQuery.map(this.options.allHeadingLevel}),headingLevel=this.options.headingLevel?this.options.headingLevel.toLowerCase():allHeadingLevels[0],headingExclude=this.options.headingExclude,lastTagLevel=allHeadingLevels.indexOf(headingLevel),str="",addNumbers=this.options.addNumbers;addNumbers&&(numberingIndex=[1]);for(var i=0;i<headings.length;i++){var number=headings[i],jqNode=jQuery(number),number=number.nodeName.toLowerCase();if((nested||number==headingLevel)&&(null==headingExclude||!jqNode.is(headingExclude))){var tagLevel=allHeadingLevels.indexOf(number);if(lastTagLevel<tagLevel&&0<i)for(;lastTagLevel<tagLevel;)str+="<"+tagName+"><li>",lastTagLevel+=1,addNumbers&&numberingIndex.push(1);else if(tagLevel==lastTagLevel&&0<i)str+="</li><li>",addNumbers&&(numberingIndex[numberingIndex.length-1]+=1);else if(tagLevel<lastTagLevel&&0<i){for(;tagLevel<lastTagLevel;)str+="</li></"+tagName+">",--lastTagLevel,addNumbers&&numberingIndex.pop();addNumbers&&(numberingIndex[numberingIndex.length-1]+=1),str+="</li><li>"}else str+=0==i?"<li>":"</li><li>";if(str+='<a href="#',""===jqNode.prop("id")&&jqNode.prop("id",jQuery.ui.jig._generateId("ncbiinpagenav-heading")),str+=jqNode.prop("id"),str+='">'+jqNode.clone().find(this.options.inHeadingExclude).remove().end().text()+"</a>",this.options.addNumbers&&!jqNode.is(this.options.headingExclude)&&(number=jQuery.map(numberingInde}).join("."),puncMark=this.options.puncMark,jqNode.html('<span class="jig-ncbiinpagenav-number">'+number+"</span>"+puncMark+" "+jqNode.html())),lastTagLevel=tagLevel,i==headings.length-1){for(;0<lastTagLevel;)str+="</li></"+tagName+">",--lastTagLevel;str+="</li>"}}}return str},_inPageNav:function(){var widgetClassApplied=this.options.allHeadingLevels,headings=this.options.headingLevel?this.options.headingLevel.toLowerCase():widgetClassApplied[0],appendToElem=widgetClassApplied.indexOf(headings),enableSmoothScroll=jQuery.map(widgetClassApplied.slice(appendToElem),function(s){return s+":visible"}).join(", "),headings=this.element.find(enableSmoothScroll),widgetClassApplied=this.element,appendToElem=widgetClassApplied.length?widgetClassApplied:jQuery(document.body),enableSmoothScroll=this.options.smoothScroll?' class="jig-ncbismoothscroll" data-jigconfig="topHref: \''+this.options.gotoTopLinkHref+"'\"":"";(this.options.gotoTopLink||this.options.gotoPoppers)&&this._makeGotoDiv(headings,enableSmoothScroll),this.options.gotoPoppers&&this._makeGotoPoppers(headings,widgetClassApplied,appendToElem,enableSmoothScroll),this.options.topOfPageTOC&&this._makeTopOfPageTOC(headings,widgetClassApplied,appendToElem)},getTocId:function(){return void 0===this.element.data("tocId")&&this.element.data("tocId",jQuery.ui.jig._generateId(this.widgetName)),this.element.data("tocId")},getPopMenuId:function(){return void 0===this.element.data("popMenuId")&&this.element.data("popMenuId",jQuery.ui.jig._generateId(this.widgetName)),this.element.data("popMenuId")},_removeGoto:function(){jQuery(".jig-ncbiinpagenav-goto-container").add("#"+this.getPopMenuId()).remove()},_removeTOC:function(){jQuery("jig-ncbiinpagenav-toc-container").add("#"+this.getTocId()).remove()},_inPageNavMenuResetCurrent:function(){jQuery(this._firstAnchor).ncbilinksmenu("getDestElement");var popperAttachedToWidgetParent=this.element;jQuery("#"+popperAttachedToWidgetParent.data("ncbiinpagenav").getPopMenuId()).find("a").show().end().find("."+popperAttachedToWidgetParent.ncbiinpagenav("option","currentHeadingClass")).remove()},_inPageNavMenuOpen:function(){var replacementText=jQuery(this._firstAnchor).ncbilinksmenu("getDestElement"),currentHeading=jQuery(replacementText.data("attached-to")),replacementText=this.element,triggerLinkHeadingText=currentHeading.parents(".jig-ncbiinpagenav-goto-container").next().text(),currentHeading=replacementText.data("ncbiinpagenav").getPopMenuId(),currentHeading=jQuery("#"+currentHeading).find("a").filte}),replacementText=replacementText.ncbiinpagenav("option","currentHeadingClass");this._inPageNavMenuResetCurrent();replacementText=jQuery("<span/>").addClass(replacementText).text(currentHeading.text());currentHeading.hide().before(replacementText),this._addScrollListener()},_inPageNavMenuClose:function(){this._removeScrollListener(),this._inPageNavMenuResetCurrent()},_scrollIntoView:function(){var elem,cnt=0,t=null,hashVal=window.location.hash.replace(".","\\.");hashVal&&(elem=jQuery(hashVal)).length&&function testPosition(){var topVal=elem.position().top;t!=topVal?(window.scrollTo(0,topVal),t=topVal):++cnt<this.element.find(this.options.allHeadingLevels.join(", ")).length&&window.setInterval(testPosition,1)}()},_addScrollListener:function(){var that=this;this._scrollYStart=jQuery(window).scrollTop(),this._windowScrollFnc=function(evt){200<Math.abs(that._scrollYStart-jQuery(window).scrollTop())&&that._firstAnchor.ncbilinksmenu("close")},jQuery(window).on("scroll",this._windowScrollFnc)},_removeScrollListener:function(){jQuery(window).off("scroll",this._windowScrollFnc),this._windowScrollFnc=null}}),jQuery.ui.jig.widget("ui.ncbilocalnav",jQuery.ui.ncbimenu,{_create:function(){this.options.isSubMenuLimited=!0,jQuery.ui.ncbimenu.prototype._create.apply(this,arguments)},_addClasses:function(){this.element.addClass("ui-ncbilocalnav"),jQuery.ui.ncbimenu.prototype._addClasses.apply(this,arguments)},_destroyClasses:function(){this.element.removeClass("ui-ncbilocalnav"),jQuery.ui.ncbimenu.prototype._destroyClasses.apply(this,arguments)}}),function($){$.ui.jig.widget("ui.ncbidialog",$.ui.dialog,{options:{autoOpen:!1,draggable:!1,isTitleVisible:!0,open:null,openEvent:"click",resizable:!1,destSelector:null,stdOKCancel:!1,stdOKText:"OK",stdCancelText:"Cancel"},_create:function(){"div"!==this.element[0].tagName.toLowerCase()?(this.isTrigger=!0,this._triggerNode=this.element):this.isTrigger=!1,this.isTrigger&&(this._ajaxable=this._ajaxable(this._triggerNode));var title,that,dialogNode=this.isTrigger?this.getDialogNode():this.element;this.element=dialogNode,this.isTrigger&&(that=this)._triggerNode[this.options.openEvent](function(e){e.preventDefault();$(e.target);that._ajaxable&&that._getContent(),that.element.dialog("open")}),dialogNode.data("jigncbidialogcreated")||((title=this.element.attr("title"))?this.element.data("title",title):title=this.element.data("title"),0!==dialogNode.length?(this._parseCallbacks(),this._overrideEvents(),dialogNode.dialog(this.options),this.options.isTitleVisible||dialogNode.prev(".ui-dialog-titlebar").addClass("ui-helper-hidden-accessible").css("position","absolute"),this._renderButtonMarkup(),this._doStdOKCancel(),title&&(that=this).element.bind("dialogopen}),dialogNode.data("jigncbidialogcreated",!0)):$.ui.jig._isConsole("error")&&console.error('ncbidialog: No matching dialog node found with selector "'+this.options.destSelector+'".'))},getStdOKButton:function(){var ret=null;return this.options.stdOKCancel&&(ret=this._dialogNode.find("div.ui-dialog-buttonpane button.ui-ncbibutton-submit")),ret},_doStdOKCancel:function(){var buttonPane,okBtn,cancelBtn,that;this.options.stdOKCancel&&(buttonPane=jQuery('<div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"></div>'),okBtn=jQuery('<button class="ui-ncbibutton-submit">'+this.options.stdOKText+"</button>"),cancelBtn=jQuery('<button class="ui-ncbibutton-cancel">'+this.options.stdCancelText+"</button>"),okBtn.ncbibutton({color:"blue"}),cancelBtn.ncbibutton(),that=this,cancelBtn.click(function(){that._triggerNode.ncbidialog("close"),jQuery(this).trigger("ncbidialogcancelclick")}),okBtn.click(function(){jQuery(this).trigger("ncbidialogokclick")}),buttonPane.append(okBtn),buttonPane.append(cancelBtn),this.element.append(buttonPane))},_overrideEvents:function(){for(var that=this,baseNode=this.isTrigger?this._triggerNode:this.element,dialogEventOptions=["dialogopen","dialogbeforeclose","dialogfocus","dialogdragstart","dialogdrag","dialogdragstop","dialogresizestart","dialogresize","dialogresizestop","dialogclose"],i=0;i<dialogEventOptions.length;i++)!function(eventOption){that.element.bind(eventOptio})}(dialogEventOptions[i])},_parseCallbacks:function(){for(var callbackOpts=["open","beforeClose","focus","dragStart","drag","dragStop","resizeStart","resize","resizeStop","close"],getFncFromStr=$.ui.jig._getFncFromStr,i=0;i<callbackOpts.length;i++){var callbackOpt=callbackOpts[i],fn=this.options[callbackOpt];fn&&(fn=getFncFromStr(fn),this.options[callbackOpt]=fn)}},getDialogNode:function(){var targetId;return void 0===this._dialogNode&&((targetId=this._triggerNode.attr("href"))&&""!==targetId&&!this._ajaxable?(targetId=this._triggerNode.prop("hash"),this._dialogNode=$(targetId)):this._dialogNode=$(this.options.destSelector)),this._dialogNode},_renderButtonMarkup:function(){this._jigButtons=this.element.parent().find("button,input[type=submit]").addClass("ui-state-default ui-corner-all"),0!==this._jigButtons.length&&this._doButtonHover()},_doButtonHover:function(){this._jigButtons.hover(function(){var b=$(this);b.hasClass("ui-state-active")?(b.removeClass("ui-state-active"),b.removeClass("ui-state-hover")):(b.addClass("ui-state-active"),b.addClass("ui-state-hover"))})},_ajaxable:function(_href){this._href=$.trim(_href.attr("href"));_href=this._href.replace(window.location.href,"");return-1===_href.search(/^#/)&&""!==_href},close:function(){return this.element.dialog.apply(this.element,["close"])},open:function(){return this.element.dialog.apply(this.element,["open"])},isOpen:function(){return this.element.dialog.apply(this.element,["isOpen"])},widget:function(){return this.element.dialog.apply(this.element,["widget"])},moveToTo},option:function(){for(var params=["option"],i=0;i<arguments.length;i++)params.push(arguments[i]);return this.element.dialog.apply(this.element,params)},enable:function(){return this.element.dialog.apply(this.element,["enable"])},disable:function(){return this.element.dialog.apply(this.element,["disable"])},destroy:function(){this.element.dialog.apply(this.element,["destroy"]).show().removeClass("ui-dialog ui-widget ui-widget-content ui-corner-all").unbind(),this._triggerNode.unbind(this.options.openEvent)},_getContent:function(){var hrefParam=this._href.split("#"),hrefParam=1===hrefParam.length?hrefParam[0]:hrefParam[0]+" #"+hrefParam[1];this.element.load(hrefParam,function(){jQuery.ui.jig.scan()})}})}(jQuery),jQuery.ui.jig.widget("ui.ncbiexternallink",{selector:"body",options:{pop:"fit",domains:["apple.com","facebook.com","google.com","twitter.com","youtube.com"]},_otherElems:null,_create:function(){this._createMessage(),this._setPopper(),this._addDynamicLinkHandler()},_getReALL:function(){var domains=jQuery.map(this.options.domains,function(domain){return domain.replace(/\./g,"\\.")});return void 0!==this._reALL&&this._reALL?this._reALL:new RegExp("^(.{3,5}:)?//(([^/]+).)?("+domains.join("|")+")","i")},_addDynamicLinkHandler:function(){var that=this;jQuery("body").on("mouseover","a[href]",function(reALL){var link=jQuery(reALL.currentTarget),reALL=that._getReALL();link.closest("#footer").length||!reALL.test(link[0].href)||link.is(that._otherElems)||link.data("ncbipopper")||(that._createPopper(link,"",that._popperContent),that._setTarget(link),link.trigger("mouseover"))})},_findLinks:function(elem){var reALL=this._getReALL();return elem.find("a[href]").filter(function(){return reALL.test(this.href)&&!jQuery(this).closest("#footer").length})},_disclaimerHTML:'<div style="display: none;">External link. Please review our <a href="https://www.nlm.nih.gov/privacy.html">privacy policy</a>.</div>',_createMessage:function(){var appendElem=jQuery("div.grid").eq(0);0===appendElem.length&&(appendElem=jQuery(document.body).eq(0)),this._popperContent=jQuery(this._disclaimerHTML).appendTo(appendElem)},_setTarget:function(elems){elems.eac})},_createPopper:function(trigger,otherElems,popperContent){var arrowDir="top",triggerPosition="bottom center",destPosition="top center";"top"===this.options.pop?(arrowDir="bottom",triggerPosition="top center",destPosition="bottom center"):"fit"===this.options.pop?(arrowDir="left",destPosition=triggerPosition="middle auto"):"fitTop"===this.options.pop&&(arrowDir="left",destPosition=triggerPosition="auto center"),trigger.ncbipopper({multipleHandlesSelector:otherElems,openAtTarget:!0,destSelector:popperContent,isDestElementCloseClick:!1,openAnimation:"none",closeAnimation:"none",isTriggerElementCloseClick:!1,triggerPosition:triggerPosition,destPosition:destPosition,hasArrow:!0,arrowDirection:arrowDir})},_setPopper:function(){var anc=this._findLinks(jQuery("body")),firstElem=this._firstElem=anc.eq(0),otherElems=anc.slice(1);this._otherElems=otherElems,this._createPopper(firstElem,otherElems,this._popperContent),this._setTarget(anc),"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.scanLinks&&(anc=this._popperContent.find("a")[0],ncbi.sg.scanLinks(anc))},destro}}),$.ui.jig.widget("ui.ncbiexpander",{options:{openDelay:200,delayTimeout:400,animationSpeed:200,minHeight:"55px",auto:!0},_create:function(){"use strict";this._wrapperInner(),this._setHeightAndClass(),this.isExpandable&&(this._addNavigator(),this._setArrowDirection("closed"),this._hookUpEvents())},destroy:function(){var el=this.element,div=el.find("div.ui-ncbiexpander"),html=div.html();div.remove(),el.html(html),(1==this.options.auto?el.find("ui-expander-arrow-bar"):el.find("ui-expander-controllink")).remove()},_wrapperInner:function(){"use strict";this._wrapper=this.element.wrapInner("<div class='expanderWrapper'></div>").find(".expanderWrapper")},_setHeightAndClass:function(){"use strict";this._wrapper.addClass("ui-ncbiexpander").height(this.options.minHeight),this.isExpandable=this._wrapper[0].scrollHeight>this._wrapper.height(),this.isExpandable||this._wrapper.addClass("ui-ncbiexpander-simple").height("auto")},_hookUpEvents:function(){"use strict";var config,contentHeight,that=this;this.isExpandable&&(contentHeight=that._wrapper[0].scrollHeight,1==this.options.auto?(config={interval:this.options.openDelay,timeout:this.options.delayTimeout,over:function(){that._isOpen=!0,that._wrapper.stop().animate({height:contentHeight},that.options.animationSpeed,function(){that._setArrowDirection("open")})},out:function(){that._isOpen=!1,that._wrapper.stop().animate({height:that.options.minHeight},that.options.animationSpeed,function(){that._setArrowDirection("closed")})}},this.element.hoverIntent(config),this.element.mouseenter(function(){that._setIconBarStyle(!0)}).mouseleav})):that._attachControlLinkEvents(that,contentHeight))},_attachControlLinkEvents:function(obj,contentHeight){var that=obj;this.link=jQuery(this.element).find(".ui-expander-moreless"),jQuery(this.link).on("click",function(e){e.preventDefault(),0==that._isOpen?(that._isOpen=!0,that._wrapper.stop().animate({height:contentHeight},that.options.animationSpeed),jQuery(this).text("...less").removeClass("ui-expander-more").addClass("ui-expander-less")):(that._isOpen=!1,that._wrapper.stop().animate({height:that.options.minHeight},that.options.animationSpeed),jQuery(this).text("...more").removeClass("ui-expander-less").addClass("ui-expander-more"))})},_addNavigator:function(){"use strict";0==this.options.auto&&this.isExpandable?this._addControlLink():this._addArrow()},_addControlLink:function(){"use strict";this._isOpen=!1,this._iconBar=jQuery('<span class="ui-expander-controllink ui-helper-clearfix"><a href="" class="controlanchor ui-expander-more ui-expander-moreless">...more</a></span>').appendTo(this.element)},_addArrow:function(){"use strict";this._iconBar=jQuery('<div class="ui-expander-arrow-bar"><div class="bar closed"><div class=""></div></div></div>').appendTo(this.element)},_setArrowDirection:function(dir){"use strict";var oppDir="open"===dir?"closed":"open";this._iconBar.find("div.bar").addClass(dir).removeClass(oppDir),this._setIconBarStyle("open"===dir)},_setIconBarStyle:function(cssAction){"use strict";cssAction=cssAction?"addClass":"removeClass";this._iconBar[cssAction]("ui-expander-arrow-bar-active")}}),$.ui.jig.widget("ui.ncbitabs",jQuery.ui.tabs,{selector:"div.jig-ncbitabs, div.jig-tabs, div[data-jig=tabs], div[data-jig=ncbitabs]",orgCreate:jQuery.ui.tabs.prototype._create,orgTabify:jQuery.ui.tabs.prototype._tabify,orgLoad:jQuery.ui.tabs.prototype.load,_create:function(){var that=this;this.allTab=this.getAllTab(),isAllTab=0<this.allTab.length,isAllTab&&jQuery(this.element.children("ul")[0]).find("a").eac}),this.orgCreate(),isAllTab&&(this.allTabPanel=jQuery("#"+this.allTab.attr("href").substr(1)),this._hideAllTabPanel()),isAllTab&&(jQuery(this.element.find(".ui-tabs-nav > li")[this.options.active]).find("a")[0]==this.allTab[0]&&this._doAllTab(),this.allTab.on({click:function(){that._doAllTab()},focus:function(){that._doAllTab()},keypress:function(){that._doAllTab()}})),this._addRolesAndInitTabIndex();that=this;jQuery(this.element.children("ul")[0]).find("a").not(that.allTab).bind("click.ncbitabs})},destroy:function(){jQuery(this.element.children("ul")[0]).find("a").removeData("ncbitab-origHref"),jQuery(this.element).find(".ui-tabs-panel").removeClass("ui-tabs-panel-internal"),jQuery(this.element).removeClass("ui-tabs-all-selected"),jQuery(this.element.children("ul")[0]).find("a").unbind("click.ncbitabs"),jQuery.ui.tabs.prototype.destroy.apply(this,arguments),this._removeRolesAndTabIndex()},_hideAllTabPanel:function(){this.allTabPanel.hide()},_doAllTab:function(){var that=this;that.element.addClass("ui-tabs-all-selected"),that.element.find(".ui-tabs-panel").each(function(){var origHref,panel=jQuery(this);!(""===jQuery.trim(panel.html()))&&that.options.cache||void 0!==(origHref=that.element.find(".ui-tabs-nav a[href=#"+panel.attr("id")+"]").data("ncbitab-origHref"))&&-1==origHref.search(/#.+$/)&&jQuery.get(origHref,function(data){panel.html(data)}),panel.not(":last-child").addClass("ui-tabs-panel-internal"),panel.removeClass("ui-tabs-hide"),that._hideAllTabPanel(),panel.is(that.allTabPanel)||panel.show()})},_orgToggle:jQuery.ui.tabs.prototype._toggle,_toggle:function(event,eventData){return this.element.find(".ui-tabs-panel").hide(),this._orgToggle(event,eventData)},getAllTab:function(){return ret=null,this.element.children("ul").find("a").each(function(){var $this=jQuery(this);"all"===$this.text().toLowerCase()&&(ret=$this)}),ret=ret||this.element.find("a.ui-ncbitabs-all"),ret},_tabify:function(param){this.orgTabify(param);var that=this;this.element.find("ul.ui-tabs-nav a").on("keydown click",function(activate){jQuery(activate.target).focus();var pressed=activate.keyCode,keyD=jQuery.ui.keyCode,activate=function(n,collection){n=jQuery(n),nDom=n[0],nDom.tabIndex=0,nDom.focus(),collection&&jQuery(collection).each(function(){this!==nDom&&(this.tabIndex=-1)})};pressed===keyD.RIGHT&&activate(that.load(that.getNextTabIndex())[0],that.anchors),pressed===keyD.LEFT&&activate(that.load(that.getPreviousTabIndex())[0],that.anchors)})},_addRolesAndInitTabIndex:function(){function setRole(element,role){var origRole=element.attr("role");origRole&&element.data("ncbitab-origRole",origRole),element.attr("role",role)}var list=this.element.children("ul").siblings("div").each(function(){setRole(jQuery(this),"tabpanel")}).end();setRole(list,"tablist"),list.children("li").eac}).find("a").each(function(i){setRole(jQuery(this),"tab"),this.tabIndex=0<i?-1:0})},_removeRolesAndTabIndex:function(){function unsetRole(element){var origRole=element.data("ncbitab-origRole");origRole?element.attr("role",origRole):element.removeAttr("role")}var list=this.element.children("ul").siblings("div").each(function(){unsetRole(jQuery(this))}).end();unsetRole(list),list.children("li").eac}).find("a").each(function(){unsetRole(jQuery(this)),jQuery(this).removeAttr("tabIndex")})},selec},getCurrentTabIndex:function(){var index=null;return this.element.find("ul.ui-tabs-nav").children("li").each(function(i){if(jQuery(this).hasClass("ui-tabs-selected"))return index=i,!1}),index},getNextTabIndex:function(){var anchors=this.anchors,curIndex=this.getCurrentTabIndex();return curIndex===anchors.length-1?0:curIndex+1},getPreviousTabIndex:function(){var anchors=this.anchors,curIndex=this.getCurrentTabIndex();return 0===curIndex?anchors.length-1:curIndex-1}}),$.ui.jig.widget("ui.ncbispinner",jQuery.ui.spinner,{}),jQuery.ui.jig.widget("ui.ncbishare",{options:{popup:!1,shareLabel:"Share",urlLabel:"Permalink",shareUrl:"",beforeAddShareParam:void 0},_getShareInLine:function(){return'<ul class="ui-ncbishare social-buttons inline_list"><li><button data-share="Facebook" title="Share on Facebook" class="share_facebook">Share on Facebook</button></li><li><button data-share="Twitter" title="Share on Twitter" class="share_twitter">Share on Twitter</button></li><li><button data-share="Google" title="Share on Google+" class="share_google">Share on Google+</button></li></ul>'},_getSharePopu},_shareFragment:$(),_create:function(){this.options.popup?(this._appendPopup(),this._attachPopper()):this._showWidget(),this._attachPinger(),this._createSocialButtonsObj(),this._attachEvents()},_showWidget:function(){this._shareFragment=jQuery(this._getShareInLine()),this.element.after(this._shareFragment).hide()},_appendPopup:function(){jQuery("#ncbi_share_box")[0]||(jQuery("body").children().last().after(this._getSharePopup()),this._shareFragment=jQuery("#ncbi_share_box"))},_attachPopper:function(){jQuery.ui.ncbipopper({destSelector:"#ncbi_share_box",closeEvent:"click",openEvent:"click",adjustFit:"autoAdjust",openAnimation:"none",addCloseButton:!0,hasArrow:!1,destPosition:"top left",triggerPosition:"bottom center",arrowDirection:"top"},this.element)},_attachPinger:function(){"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.scanLinks&&ncbi.sg.scanLinks(this.element.get())},_createSocialButtonsObj:function(){var socialButtons;void 0===this.__proto__._socialButtonsObj&&((socialButtons={}).shareServices={facebook:{postUrl:"https://www.facebook.com/sharer.php",shareParameters:{u:"shareURLPlaceholder"},width:655,height:430},twitter:{postUrl:"https://twitter.com/intent/tweet",shareParameters:{url:"shareURLPlaceholder",text:jQuery('meta[property="og:title"]').length?jQuery('meta[property="og:title"]').attr("content"):document.title,related:jQuery('meta[name="twitter:site"]').length?jQuery('meta[name="twitter:site"]').attr("content").substring(1):""},width:600,height:450},google:{postUrl:"https://plus.google.com/share",shareParameters:{url:"shareURLPlaceholder",hl:"en-US"},width:600,height:600},reddit:{postUrl:"https://reddit.com/submit",shareParameters:{url:"shareURLPlaceholder",hl:"en-US"},width:600,height:600}},socialButtons.socialShare=function(shareName,shareURL,postUrlTuple){var currOptions={},shareBox=postUrlTuple.closest("#ncbi_share_box"),currOptions=(shareBox[0]?shareBox.data("attachedTo"):postUrlTuple.closest(".social-buttons").prev()).ncbishare("option"),postUrlTuple=socialButtons.buildUrl(shareName,shareURL,postUrlTuple,currOptions);currOptions.shorten,socialButtons.openShareWindow(shareName,postUrlTuple)},socialButtons.shortenAndOpenShareWindow=function(shareName,postUrlTuple){for(var urlParamName,urlVal,paramsArr=postUrlTuple[1],len=paramsArr.length,urlInd=0,i=0;i<len;i++){var res=paramsArr[i].match(/^(u|url)=(.*)/);if(res){urlInd=i,urlParamName=res[1],urlVal=res[2];break}}var shortUrl,longUrl=decodeURIComponent(urlVal);$.ajax({url:"https://api.bit.ly/v3/shorten",dataType:"jsonp",timeout:5e3,async:!1,data:{longUrl:longUrl,apiKey:"?????",login:"????"}}).done(function(res){200==res.status_code&&(shortUrl=res.data.url,paramsArr[urlInd]=urlParamName+"="+encodeURIComponent(shortUrl))}).fai}).alway})},socialButtons.openShareWindow=function(shareName,postUrl){var height=socialButtons.shareServices[shareName],width=height.width||655,height=height.height||600,postUrl=postUrl[0]+socialButtons.paramChar(postUrl[0])+postUrl[1].join("&amp;");window.open(postUrl,shareName+"Share","toolbar=0,status=0,height="+height+",width="+width+",scrollbars=yes,resizable=yes")},socialButtons.buildUrl=function(shareName,postUrl,node,currOptions){var options=socialButtons.shareServices[shareName],urlToShare=postUrl&&""!==postUrl&&"#"!==postUrl?postUrl:window.location.href.replace(/#.*/,""),parameters=[],postUrl=options.postUrl;return jQuery.each(options.shareParameters,function(paramKey,paramValue){"function"==typeof currOptions.beforeAddShareParam&&(paramValue=currOptions.beforeAddShareParam.call(null,shareName,paramKey,paramValue,node)),"url"!=paramKey&&"shareURLPlaceholder"!=paramValue||(paramValue="shareURLPlaceholder"==paramValue?urlToShare:paramValue),""!==paramValue&&parameters.push(paramKey+"="+encodeURIComponent(paramValue))}),[postUrl,parameters]},socialButtons.paramCha},this.__proto__._socialButtonsObj=socialButtons),this._socialButtonsObj=this.__proto__._socialButtonsObj},_attachEvents:function(){var shareBox,that=this;this._shareFragment.find("button[data-share]").on("click",function(shareURL){shareURL.preventDefault();var self=jQuery(this),shareURL="",shareURL=!0===that.options.popup?self.closest("#ncbi_share_box").find("#ncbi_share_inp").val():""!==(shareURL=that.options.shareUrl||that.element.prop("href"))&&"#"!==shareURL?shareURL:window.location.href;that._socialButtonsObj.socialShare(self.data("share").toLowerCase(),shareURL,self)}),this.element.on("ncbipopperopen",function(e){var self=jQuery(this),shareURL=""!==(shareURL=that.options.shareUrl||self.attr("href"))&&"#"!==shareURL?shareURL:window.location.href;jQuery("#ncbi_share_label").text(that.options.shareLabel),jQuery("#ncbi_share_url_label").text(that.options.urlLabel),jQuery("#ncbi_share_box button").attr("ref",self.attr("ref")+"&link_href="+shareURL),jQuery("#ncbi_share_box").data("attachedTo",self);var txtInput=jQuery("#ncbi_share_inp").val(shareURL);that.__proto__._isTouchDevice||window.setTimeout(function(){txtInput.select()},0)}),jQuery._data(window,"events")&&jQuery._data(window,"events").touchstart||(shareBox=jQuery("#ncbi_share_box"),jQuery(window).on("touchstart",function(e){that.__proto__._isTouchDevice=!0,jQuery(e.target).closest("#ncbi_share_box")[0]||shareBox.is(":visible")&&shareBox.data("attachedTo").ncbipopper("close")}))}}),$.ui.jig.widget("ui.ncbiselectmenu",jQuery.ui.selectmenu,{}),$.ui.jig.widget("ui.ncbislider",jQuery.ui.slider,{}),$.ui.jig.widget("ui.ncbihistogram",{options:{data:null,barWidth:5,barSpacing:1,useLogScale:!1,selected:null,sortData:!0,isNumeric:!0,convertYYYYMMtoYYYY:!0,textDefault:"",textSelected:"Selected",textHover:"Click to Select",textTooltip:" {label} - {count} items",destSelector:null,enableZeroCountSelection:!1},_create:function(){this._addClasses(),this._setUpData(),this._createTooltip(),this._setupPositionScroll(),this._addEvents(),this._setBarWidths()},_addClasses:function(){this.element.addClass("ui-ncbihistogram")},_formatDataFromHTMLSource:function(destSelector){var dataHolder=jQuery(destSelector),lis=dataHolder.find("li");if(0===lis.length)return console.warn("Could not locate any lis for the ncbihistogram. destSelector: "+destSelector),[];var years={},isYYYYMM=(this.options.isNumeric,this.options.convertYYYYMMtoYYYY);lis.each(function(){var val=this.getAttribute("value"),year=isYYYYMM&&null!==val&&4<val.toString().length?val.toString().substr(0,4):val,prevVal=years[year],val=parseInt(this.innerHTML,10);void 0===prevVal?years[year]=val:years[year]+=val});var year,data=[];for(year in years)data.push({textlabel:parseInt(year,10),count:years[year]});return dataHolder.remove(),data},_makeLists:function(){var olClass=this.options.data,destSelector=this.options.destSelector;if(destSelector&&(olClass=this._formatDataFromHTMLSource(destSelector)),0===olClass.length&&"undefined"!=typeof console)return console.warn("There is no data set for ncbihistogram. Length is zero."),console.info(this.element),this.element.hide(),!1;var chartHeight=this.element.find(".ui-ncbihistogram-display-area").height(),useLog=this.options.useLogScale,selectedYear=this.options.selected,isNumeric=this.options.isNumeric,totalBarCount=0,textTooltip=this.options.textTooltip,data=null;data=this.options.sortData?jQuery.merge([],olClass).sor}):olClass;var openGroup=!1,addGrouping=function(decade){openGroup&&closeGrouping(),out.push("<li><h3>"+decade+"</h3><ol>"),openGroup=!0},closeGrouping=function(){out.push("</ol></li>")},createBar=function(year,dataCount){totalBarCount++;var style=null,style=useLog?0===dataCount?0:Math.ceil(chartHeight*Math.log(dataCount)/Math.log(maxCount)):Math.ceil(chartHeight*dataCount/maxCount);0<dataCount&&style<3&&(style=3);var selected=chartHeight-style,cntFormat=function(x2){for(var x2=(x2+="").split("."),x1=x2[0],x2=1<x2.length?"."+x2[1]:"",rgx=/(\d+)(\d{3})/;rgx.test(x1);)x1=x1.replace(rgx,"$1,$2");return x1+x2}(dataCount.toString()),title=' title="'+textTooltip.replace(/\{label\}/gi,year).replace(/\{count\}/gi,cntFormat)+'"',dataLabel=' data-label="'+year+'"',dataCount=' data-count="'+cntFormat+'"',style=' style="height:'+style+"px;margin-top:"+selected+'px"',selected=selectedYear===year?' class="selected"':"";out.push('<li><a href="#"'+title+style+dataLabel+dataCount+selected+">Year "+year+" - "+cntFormat+" items</a></li>")},out=[],maxCount=data[0].count;jQuery.map(data,function(val,ind){maxCount<val.count&&(maxCount=val.count)});var prevYear=null;jQuery.map(data,function(val,currentYear){var currentCount=data[currentYear],currentYear=currentCount.textlabel,currentCount=currentCount.count;isNumeric?(function(start,end,currentCount){null===start&&(start=end-1);for(var year=start+1;year<=end;year++)year%10!=0&&openGroup||addGrouping(10*Math.floor(year/10)),createBar(year,year===end?currentCount:0)}(prevYear,currentYear,currentCount),prevYear=currentYear):createBar(currentYear,currentCount)});olClass=' class="not-nested"';return isNumeric&&(closeGrouping(),olClass=""),'<ol style="width:'+totalBarCount*(this.options.barWidth+this.options.barSpacing)+'px" '+olClass+">"+out.join("")+"</ol>"},_makeArrows:function(){var that=this;this._controlBar=jQuery('<div class="ui-ncbihistogram-controls"></div>'),this._arrow_right=jQuery("<div></div>").addClass("ui-ncbihistogram-right").html("Scroll right...").appendTo(this._controlBar).click(function(){that.moveRight()}),this._arrow_left=jQuery("<div></div>").addClass("ui-ncbihistogram-left").html("Scroll left...").appendTo(this._controlBar).click(function(){that.moveLeft()}),this._text_hint=jQuery("<div></div>").addClass("ui-ncbihistogram-text").html(this.options.textDefault).appendTo(this._controlBar),this._controlBar.appendTo(this.element),this._setText()},_createElements:function(){jQuery('<div class="ui-ncbihistogram-display-area"></div>').appendTo(this.element).html(this._makeLists()),this._makeArrows()},_setUpData:function(){this.options.data||this.options.destSelector?this._createElements():"undefined"!=typeof console&&console.error&&(console.error("No data source set for ncbihistogram"),console.info(this.element))},_setupPositionScroll:function(){var that;jQuery.ui.jig.hasOnloadFired?this._positionScroll():(that=this,jQuery(window).load(function(){that._positionScroll()}))},_positionScroll:function(){var leftPos,wrapper=this.element.find(".ui-ncbihistogram-display-area"),selLeft=this.element.find("ol").eq(0),offset=selLeft.width()>wrapper.width()?selLeft.outerWidth():0,holderWidth=this._getSelectedYear();1===holderWidth.length&&(leftPos=wrapper.offset().left,selLeft=holderWidth.offset().left,wrapper.prop("scrollLeft"),holderWidth=wrapper.width(),offset=(leftPos=selLeft-leftPos)<0?holderWidth/2-leftPos:leftPos-holderWidth/2),wrapper.scrollLeft(offset),this._enableDisableArrows(wrapper.scrollLeft())},moveLef},moveRight:function(){this.moveScroll(1)},moveScroll:function(dir){var wrapper=this.element.find(".ui-ncbihistogram-display-area"),wrapWidth=wrapper.width(),spot=this.element.find("ol").width(),scrollDist=Math.ceil(spot/3);if(spot<=wrapWidth)return!1;scrollDist<100?scrollDist=100:wrapWidth<scrollDist&&(scrollDist=wrapWidth);spot=wrapper.scrollLeft()+dir*scrollDist;spot<0&&(spot=0),"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping({jsevent:"histogramScroll",direction:1===dir?"right":"left",startPosition:wrapper.scrollLeft(),endPosition:spot,scrollDist:scrollDist,wrapWidth:wrapWidth}),wrapper.animate({scrollLeft:spot+"px"},300),this._enableDisableArrows(spot)},_enableDisableArrows:function(scrollLeft){var addRemove_right=this.element.find(".ui-ncbihistogram-display-area").width(),addRemove_left=0===scrollLeft?"addClass":"removeClass",addRemove_right=this.element.find("ol").eq(0).width()-1<=scrollLeft+addRemove_right?"addClass":"removeClass";this._arrow_left[addRemove_left]("ui-ncbihistogram-left-disabled"),this._arrow_right[addRemove_right]("ui-ncbihistogram-right-disabled")},_addEvents:function(){var that=this;this.element.on("mouseleave",function(evt){that._hideTooltips()}).on("mouseover",function(evt){that._positionTooltip(evt)}).find(this.options.isNumeric?"ol ol li":"li").on("click",function(evt){that._makeSelection(evt,this)})},_makeSelection:function(selection,domLi){var triggerAction,link=jQuery(domLi).find("a");selection.preventDefault();var val=link.data("label")||link.attr("data-label"),count=link.data("count")||link.attr("data-count");0!==parseInt(count,10)?(link.toggleClass("selected"),triggerAction=link.hasClass("selected")?"selectionmade":"selectionremoved",val=link.data("label")||link.attr("data-label"),count=link.data("count")||link.attr("data-count"),domLi&&"LI"===domLi.tagName&&"undefined"!=typeof ncbi&&ncbi.sg&&ncbi.sg.ping(link[0],selection,"click",{histogramclick:!0,barLabel:val,barCount:count,triggerAction:triggerAction}),this._trigger(triggerAction,null,[{value:val,count:count}]),selection="selectionmade"===triggerAction?val:null,count="selectionmade"===triggerAction?count:null,this._trigger("change",null,[{value:selection,count:count}]),this._undoSelections(link[0]),this._setText()):this._zeroNotify(val)},_undoSelections:function(activeLink){this._getSelectedYear().not(activeLink).removeClass("selected")},_getSelectedYea},getSelectedValue:function(){var link=this._getSelectedYear();return 0===link.length?null:{value:link.data("label")||link.attr("data-label"),count:link.data("count")||link.attr("data-count")}},setSelectedValue:function(label){var foundItem=!1;this.element.find("li a").each(function(){var anchor=jQuery(this);if(anchor.data("label")==label)return foundItem=!0,anchor.click(),!1}),foundItem&&(this.element.find(".ui-ncbihistogram-display-area").scrollLeft(0),this._positionScroll())},_setText:function(lbl){var selectedLink=this._getSelectedYear(),text=this.options.textDefault;lbl?text=lbl:0<selectedLink.length&&(text=this.options.textSelected+" "+selectedLink.prop("title")),this._text_hint.html(text)},_setBarWidths:function(){var totalBarWidth,paddingLeft,width=this.element.find(".ui-ncbihistogram-display-area"),ol=this.element.find("div>ol"),wrapperWidth=width.width();wrapperWidth>ol.width()&&(paddingLeft=ol.find("a"),width=(totalBarWidth=Math.floor(width.width()/paddingLeft.length*2)/2)-1,paddingLeft.css({width:width+"px","margin-right":"1px"}).last().css("margin-right","0px"),paddingLeft=Math.ceil(wrapperWidth-totalBarWidth*paddingLeft.length-1)/2,ol.width(wrapperWidth-1).css("padding-left",paddingLeft+"px"))},_createTooltip:function(){var appendElem=jQuery(".grid").eq(0);0===appendElem.length&&(appendElem=jQuery(document.body)),this._tooltip_total=jQuery('<div class="ui-ncbihistogram-tooltip"></div>').appendTo(appendElem)},_positionTooltip:function(srcElement){var srcElement=jQuery(srcElement.target||srcElement.srcElement),anchor=1===srcElement.length&&"LI"===srcElement[0].nodeName?srcElement.find("a"):srcElement;if(1===anchor.length&&this._tooltip_total){var cnt=anchor.data("count"),lbl=anchor.data("label");if(void 0!==lbl)try{this._tooltip_total.show().html(lbl+": "+cnt).position({my:"right top",of:anchor.parent(),at:"left top",collision:"fit"})}catch(e){this._tooltip_total.hide()}else this._tooltip_total.hide()}},_hideTooltip},_zeroNotify:function(lbl){var that=this;this._setText("No items found for "+lbl.toString()),this._text_hint.stop().delay(1e3).fadeOut(300,function(){that._setText()}).fadeIn(300)}}),$.ui.jig.widget("ui.ncbiactivevalidation",{options:{destElement:null,delay:400,validationFunction:null,validatingMsg:null,errorBorder:!0},_create:function(){this._addEvents(),this._addClasses(),0<this.element.val().length&&this.runCheck(!0)},runCheck:function(force){var validatingMsg;this._removeTimer(),0!==this.element.val().length?this.lastValue!==this.element.val()&&((validatingMsg=this.options.validatingMsg)?this.displayMessage("checking",validatingMsg):this.displayMessage(null,""),force?this._callValidation():this._setTimer()):this.displayMessage(null,"")},_removeTime},_setTimer:function(){var that=this,delay=this.options.delay;this._validationTimer=window.setTimeout(function(){that._callValidation()},delay)},_callValidation:function(){if(this.lastValue=this.element.val(),0!==this.lastValue.length){var validationFunction=this.options.validationFunction;if(validationFunction){if("string"==typeof validationFunction){validationFunction=jQuery.ui.jig._getFncFromStr(validationFunction);var that=this;if(!validationFunction){var reloadCnt=(this.count||0)+1;if(!(100<(this.count=reloadCnt)))return void window.setTimeout(function(){that._callValidation()},100);console.warn("Validation Function not find "+this.options.validationFunction),validationFunctio}}this.options.validationFunction=validationFunction}validationFunction.call(this)}else console.error("Validation Function not set for ncbiactivevalidation")}else this.displayMessage(null,"")},_keyUp:function(){this.runCheck()},_paste:function(){this.runCheck()},_blu},_addEvents:function(){var that=this;this._keyupFnc=function(){that._keyUp()},this._pasteFnc=function(){that._paste()},this._blurFnc=function(){that._blur()},this.element.on("keyup",this._keyupFnc).on("paste",this._pasteFnc).on("blur",this._blurFnc)},_addClasses:function(){var destElement=this.options.destElement,outElem=jQuery(destElement);destElement||console.error("destElement is not set for ncbiactivevalidation"),outElem.addClass("ncbiactivevalidation_msg")},_removeClasses:function(){var outElem=this.options.destElement,outElem=jQuery(outElem);outElem.removeClass("ncbiactivevalidation_msg"),this._lastTypeClass&&outElem.removeClass(this._lastTypeClass)},_removeEvents:function(){this.element.off("keyup",this._keyupFnc).off("paste",this._pasteFnc).off("blur",this._blurFnc)},destroy:function(){this._removeTimer(),this._removeEvents(),this._removeClasses()},displayMessage:function(type,msgTxt){this._trigger("result","x",{type:type,message:msgTxt});var cssClass=this.options.destElement,outElem=jQuery(cssClass),cssClass=type&&0<type.length?"ncbiactivevalidation_msg_"+type:null;outElem.html(msgTxt),cssClass&&outElem.addClass(cssClass),this._lastTypeClass&&this._lastTypeClass!==cssClass&&outElem.removeClass(this._lastTypeClass),this._lastTypeClass=cssClass,this._last=type,this.options.errorBorder&&("valid"==type?this.element.removeClass("ncbiactivevalidation_el_error"):"error"==type&&this.element.addClass("ncbiactivevalidation_el_error"))},getValidationStatu}}),$.ui.jig.widget("ui.ncbitooltip",jQuery.ui.tooltip,{}),$.ui.jig.widget("ui.ncbielastictextarea",{_creat}});