"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6585],{89291:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(27641);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const o={getMedia:function(t){var e=this.getMediaNode(t);return e?JSON.parse(e.textContent):{}},getMediaNode:getOtherMediaDataOfSameParentNodes:function(t,e,n){var i=[],a=this.getMediaNode(t);if(a){var r=a.closest("[".concat(e,"]"));if(r){var o=r.querySelectorAll('[data-media-id]:not([data-media-id="'.concat(t,'"])'));n=n>0?n:o.length,o.forEach((function(t,e){e<n&&i.push(JSON.parse(t.textContent))}))}}return i},setMediaAddPreviousMediaToAutomaticPlaylist:function(t){var e={addPreviousMediaToAutomaticPlaylist:arguments.length>1&&void 0!==arguments[1]&&arguments[1]};this.setMediaContent(t,e)},setMediaContent:function(t,e){var n=document.querySelector('[data-media-id="'.concat(t,'"]')),i=r(r({},JSON.parse(n.textContent)),e);n.textContent=JSON.stringify(i)}}},76366:(t,e,n)=>{n.d(e,{Z:()=>y});var i=n(27641),a=n(62559),r=n(20771),o=n(58335),s=n(19565),l=n(75712),c=n(19327);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=const y=(0,r.Q_)("playlist",{state:function(){return{isOpen:!1,manualPlaylist:(0,s._aR)("manualPlaylist",[]),automaticPlaylist:(0,s._aR)("automaticPlaylist",[]),shouldPlayFirstElement:!1}},getters:{playlist:function(t){return[].concat((0,a.Z)(t.manualPlaylist),(0,a.Z)(t.automaticPlaylist))}},actions:d(d({},(0,r.nv)(o.Z,["showNotify"])),{},{togglePlaylist:openPlaylist:function(){this.isOpen=!0,window.addEventListener("click",this.maybeClose),c.Z.publish("player.playlist.show")},closePlaylist:maybeClose:function(t){var e=new Set(document.querySelectorAll("[data-open-playlist-area]"));!t.composedPath().some(()&&this.closePlaylist()},listToUse:addToPlaylist:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.isInPlaylist=!0,this.listToUse(t.isInAutomaticPlaylist).push(t),e&&this.showNotify({text:(0,l.Z)("playlist.added.confirmation").replace("%start_u%",'<span class="t-td-und">').replace("%end_u%","</span>"),onClick:this.openPlaylist,icon:"picto-check"})},removeFromPlaylist:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getMediaInPlaylist(t),i=this.listToUse(null==n?void 0:n.isInAutomaticPlaylist),a=i.findIndex((function(e){return p(e,t)}));i.splice(a,1),e&&this.showNotify({text:(0,l.Z)("playlist.removed.confirmation").replace("%start_u%",'<span class="t-td-und">').replace("%end_u%","</span>"),onClick:this.openPlaylist,icon:"picto-close-red"})},removeAllAutoFromPlaylist:function(){var t=this;(0,a.Z)(this.automaticPlaylist).forEach(()},rewritePlaylist:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.listToUse(i);a.length=0,t.forEach(()},getMediaInPlaylist:function(t){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.manualPlaylist:this.playlist).find(()},isMediaInPlaylist:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!this.getMediaInPlaylist(t,e)},shouldPlayFirstElementInPlaylist:)})},56585:(t,e,n)=>{n.r(e),n.d(e,{default:);var i=n(49458),a=["tabindex"],r=["tabindex","aria-label"],o=["innerHTML"];var s=n(50814),l=n(27641),c=n(59107),u=n.n(c),d=n(20771),p=n(56712),y=n(76366),f=n(89291);nst v={name:"PlayMedia",props:{mediaId:{type:String,required:!0},hasClickEvent:{type:Boolean,default:!0},isPlayerPlaying:{type:Boolean},isPlaylist:{type:Boolean,default:!1},isChapter:{type:Boolean,default:!1},initTime:{type:Number,default:0},currentMedia:{type:String,default:void 0},tabindex:{type:String,default:"0"},classes:{type:String,default:""},playClass:{type:String,default:""},pauseClass:{type:String,default:""},pageUrl:{type:String,default:""},dataLabel:{type:String,default:""},smallerIcons:{type:Boolean,default:!1},addEditionsAutomatically:{type:Boolean,default:!1},isLive:{type:Boolean,default:!1}},emits:["error","emitted-click"],data:computed:m(m({},(0,d.Kc)(p.Z,y.Z)),{},{isPlaying:function(){return window.store.player.isPlayerPlaying&&window.store.player.mediaId===this.mediaId},buttonClass:function(){return"".concat(this.classes," ").concat(this.isPlaying?this.pauseClass:this.playClass," ").concat(this.isCurrentMediaLoading?"u-loading-btn":"")},isCurrentMediaLoading:function(){return(this.mediaIdFromStore===this.mediaId||this.isLive)&&this.isLoadingFromStore},isLoadingFromStore:function(){return this.currentMediaStore.isLoading},mediaIdFromStore:getButtonAreaLabel:function(){var t=this.isPlaying?"Pause":"Play";if(this.dataLabel){var e="fr"===window.contextlayer.lang?" : ":": ";t=this.dataLabel+e+t}return t}}),mounted:function(){var t;this.loaderIcon=(null===(t=window.contextlayer.player_audio)||void 0===t?void 0:t.play_loader)||"";try{this.RFCorePlayer.addEventListener("STATE_ENDED",this.onStateEnded)}catch(t){this.$emit("error",{message:"Failed to addEventListener",error:t})}},unmounted:methods:m(m(m({},(0,d.nv)(p.Z,["updateInitTime","updateIsAuto"])),(0,d.nv)(y.Z,["isMediaInPlaylist","addToPlaylist"])),{},{onStateEnded:click:function(){var t=this;return(0,s.Z)(u().mark((function e(){var n,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.pageUrl||window.location.pathname===t.pageUrl){e.next=6;break}return e.next=3,t.changePage(t.pageUrl);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=!0;case 7:e.t0&&(t.updateIsAuto(!1),t.hasClickEvent&&(t.addEditionsAutomatically&&f.Z.setMediaAddPreviousMediaToAutomaticPlaylist(t.mediaId,!0),t.isChapter&&t.updateInitTime(t.initTime),t.$emit("emitted-click",{newMedia:t.mediaId,isChapter:t.isChapter,isLive:t.isLive}),(n=t.$refs["media-button"]).blur(),(i=n.closest(".o-site-nav-wrapper"))&&(null==i||i.classList.remove("o-site-nav-wrapper--active"))));case 9:case"end":return e.stop()}}),e)})))()},changePage:function(t){return(0,s.Z)(u().mark((function e(){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0===window.nav){e.next=9;break}return e.next=4,window.nav.bind();case 4:return e.next=6,window.nav.changePage({href:t},!1);case 6:return i=e.sent,a=null==i||null===(n=i.response)||void 0===n?void 0:n.statusCode,e.abrupt("return",a>=200&&a<300);case 9:return e.abrupt("return",!1);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()}})};const P=(0,n(83744).Z)(v,[["render",function(t,e,n,s,l,c){return n.isChapter?((0,i.openBlock)(),(0,i.createElementBlock)("button",{key:0,ref:"media-button",type:"button",class:(0,i.normalizeClass)(c.buttonClass),tabindex:n.tabindex,onClick:e[0]||(e[0]=function(){return c.click&&c.click.apply(c,arguments)})},[(0,i.renderSlot)(t.$slots,"play")],10,a)):((0,i.openBlock)(),(0,i.createElementBlock)("button",{key:1,ref:"media-button",type:"button",class:(0,i.normalizeClass)(c.buttonClass),tabindex:n.tabindex,"aria-label":c.getButtonAreaLabel,onClick:e[1]||(e[1]=(0,i.withModifiers)((,["prevent","stop"]))},[(0,i.renderSlot)(t.$slots,"label"),c.isPlaying&&!c.isCurrentMediaLoading?(0,i.renderSlot)(t.$slots,"pause",{key:0},(function(){return[(0,i.createElementVNode)("span",{class:(0,i.normalizeClass)(["a-svg",n.smallerIcons?"a-svg--picto-pause-circled-live":"a-svg--picto-pause-circle"])},null,2)]})):(0,i.renderSlot)(t.$slots,"play",{key:1},(function(){return[(0,i.createElementVNode)("span",{class:(0,i.normalizeClass)(["a-svg",n.smallerIcons?"a-svg--picto-play-circled-live":"a-svg--picto-play-circle"]),innerHTML:l.loaderIcon},null,10,o)]}))],10,r))}]])}}]);