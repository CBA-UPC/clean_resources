(()=>{"use strict";window.__adFormats=window.__adFormats||{},window.__formatsGetters=window.__formatsGetters||{};var t=window.__adFormats,n=window.__formatsGetters,e=function(){function t(t,n){this.config=t,this.env=n,this.url="".concat(this.getTDSUrl(),"&katds_rcc=2")}return t.prototype.doQuery=function(){return t=this,n=void 0,o=function(){var t=this;return function(t,n){var e,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=n.call(t,a)}catch(t){r=[6,t],o=0}finally{e=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}(this,(function(n){switch(n.label){case 0:return this.getTDSUrl(),[4,fetch(this.url).then(().then((function(n){n.length?t.env.data=n:t.env.data=t.defaultResponse()})).catch((function(n){console.warn(n),t.env.data=t.defaultResponse()}))];case 1:return n.sent(),[2]}}))},new((e=void 0)||(e=Promise))((function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function c(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}l((o=o.apply(t,n||[])).next())}));var t,n,e,o},t.prototype.defaultResponse=function(){var t,n;return[{ccid:1,href:this.config.options.url,icon:null===(n=null===(t=this.config.options)||void 0===t?void 0:t.icon)||void 0===n?void 0:n.src,id:this.config.options.icon_id,show_url:"",title:this.config.options.url_text}]},t.prototype.querystring=function(){var t=window.location.search.split("?");return t[t.length-1].split("&").reduce((,{})},t.prototype.transformLabelsToString=function(t,n){var e=[];return t&&(e=e.concat(t.split(","))),n&&(e=e.concat(n.split(","))),e.join(",")},t.prototype.getTDSUrl=function(){var t,n,e,o,i,r,a,c,l,s,u,d,f,h,p,v,g,m,w=new Date,b=["spot_id=".concat(this.config.spot_id),"screen_resolution="+"".concat(this.env.resolution[0],"x").concat(this.env.resolution[1]),"dt=".concat(w.getTime()),"ad_sub=".concat(null!==(t=this.env.sub)&&void 0!==t?t:""),"mo=".concat(null!==(e=null===(n=this.env.ua)||void 0===n?void 0:n.device.model)&&void 0!==e?e:""),"ve=".concat(null!==(i=null===(o=this.env.ua)||void 0===o?void 0:o.device.vendor)&&void 0!==i?i:"")],y=this.transformLabelsToString(this.querystring().labels,null!==(r=this.env.labels)&&void 0!==r?r:"");return b.push("katds_labels=".concat(y)),this.env.site_id&&b.push("site_id=".concat(this.env.site_id)),b.push("p=".concat(encodeURIComponent(window.location.href).replace(/%2F/g,"/"))),b=b.concat(["utm1=".concat(null!==(c=null===(a=this.env.holdableQSParams)||void 0===a?void 0:a.utm_source)&&void 0!==c?c:""),"utm2=".concat(null!==(s=null===(l=this.env.holdableQSParams)||void 0===l?void 0:l.utm_medium)&&void 0!==s?s:""),"utm3=".concat(null!==(d=null===(u=this.env.holdableQSParams)||void 0===u?void 0:u.utm_campaign)&&void 0!==d?d:""),"utm4=".concat(null!==(h=null===(f=this.env.holdableQSParams)||void 0===f?void 0:f.utm_content)&&void 0!==h?h:""),"ad_tags=".concat(encodeURIComponent(null!==(v=null===(p=this.env.keywords)||void 0===p?void 0:p.trim())&&void 0!==v?v:"")),"title=".concat(encodeURIComponent(null===(g=this.env.title)||void 0===g?void 0:g.trim()))]),"".concat((null===(m=this.config)||void 0===m?void 0:m.default_url)||"https://btds.zog.link/in/dl/","?").concat(b.join("&"))},t}(),o=function(t,n){var e=t.offsetWidth/100*n,o=t.offsetHeight/100*n,i=window.pageYOffset+t.getBoundingClientRect().top,r=window.pageXOffset+t.getBoundingClientRect().left,a=window.pageXOffset+t.getBoundingClientRect().right,c=window.pageYOffset+t.getBoundingClientRect().bottom,l=window.pageYOffset,s=window.pageXOffset,u=window.pageXOffset+document.documentElement.clientWidth,d=window.pageYOffset+document.documentElement.clientHeight;return c-o>l&&i+o<d&&a-e>s&&r+e<u},i=function(){function t(t,n){this.config=t,this.env=n,this.data=this.prepareHardlinkData(),t.options.on_links_recived&&t.options.on_links_recived(this.data),this.handler=null,this.observableHardlinks=[],this.init()}return t.prototype.init=function(){var t,n,e,i=this;if(0!==this.data.length){var r=document.querySelector(this.config.options.selector);r&&this.data.forEach((function(t){var n=i.createLink(t);null==r||r.appendChild(n)})),this.observableHardlinks=[],this.data,!0);var a=0,c=setInterval((function(){i.observableHardlinks.forEach((function(t){var n=document.getElementById(t.id);n&&o(n,100)&&(i.sendImpression(t),i.observableHardlinks=i.observableHardlinks.filter((function(n){return n!==t}))),n&&clearInterval(c)})),a+=1,(0===i.observableHardlinks.length||a>=10)&&clearInterval(c)}),400),l=function(){i.observableHardlinks.forEach((function(t){var n=document.getElementById(t.id);n&&o(n,30)&&(i.sendImpression(t),i.observableHardlinks=i.observableHardlinks.filter(())})),0===i.observableHardlinks.length&&document.removeEventListener("scroll",l)};this.observableHardlinks.length>0&&document.addEventListener("scroll",(t=l,n=400,e=!1,)}},t.prototype.createLink=function(t){var n=document.createElement("a");if(t.icon){var e=document.createElement("object");e.type="image/svg+xml",e.data=t.icon,e.width="18px",e.height="18px",n.append(e)}return n.id=t.id,n.style.color=this.config.options.color,n.append(t.title),n.href=t.href,n},t.prototype.prepareHardlinkData=function(){var t=this;return this.env.data.filter(().map((function(n){return n.id=t.genRandString(),n.icon&&t.config.options.color&&(n.icon.split("?fill")[0].length?n.icon="".concat(n.icon.split("?fill")[0],"?fill=").concat(encodeURIComponent(t.config.options.color)):n.icon="".concat(n.icon,"?fill=").concat(encodeURIComponent(t.config.options.color))),n}))},t.prototype.genRandString=t.prototype.sendImpression=function(t){var n=t.show_url.split("/?");(new Image).src="".concat(n[0],"/?spot_id=").concat(this.config.spot_id,"&").concat(n[1])},t}();function r(t,n){return o=this,r=void 0,c=function(){return this,(function(o){switch(o.label){case 0:return[4,new e(t,n).doQuery()];case 1:return o.sent(),[4,new i(t,n)];case 2:return o.sent(),[2]}}))},new((a=void 0)||(a=Promise))(();var o,r,a,c}var a,c;console.log("hardlink format."),window["__hardlink-format"]=r,c=r,t[a="__direct-link-event"]=c,n[a]&&(a),n[a]=null)})();