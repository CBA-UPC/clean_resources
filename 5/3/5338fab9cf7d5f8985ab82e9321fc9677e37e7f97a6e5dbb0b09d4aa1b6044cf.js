yolWPJsonp([60],{357:function(t,a,c){"use strict";var e=c(1),n=e);!function(t){var a=t(".article-content"),c=a.find('button[name="add_scrap"]'),e=a.find(".c-help-btn"),n=c.attr("data-article_id"),o=a.find(".p-article-member-memo"),s=t(".scrap-modal",a),i=t(".scrap-modal-screen",s),r=t(".scrap-modal-edit",s),l=t(".scrap-modal-comp",s),d=r.find('textarea[name="memo"]'),m=!1,p=function(t,a){!t||t.length<=0||t.find(".scrap-modal-message-detail__text-caution").text(a)},u=f=function(a,c,e){var n=JSON.stringify(c);t.ajax({url:a,type:"POST",data:n,dataType:"json",contentType:"application/json",timeout:3e4,success:error:function(t,a,c){e({result_code:3,error_message:"ÈÄö‰ø°„Ç®„É©„Éº„ÅåÁô∫Áîü„Åócomplete:function(){m=!1}})},_=function(t,a,c,e){f("/m_ajax/",{controller:"scrap",method:t,others:a},function(t){if(0!=t.result_code){var a="„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ";t.messages&&(a=t.messages[0]),p(c,a)}else e(t,c)})},x=function(t){s.find(".scrap-modal-common").css("display","none"),t.css("display","block"),s.find(".scrap-modal-comp").css("display","none"),t===l?t.css("display","flex"):t.cssblock")},b=function(t){s.css("display","none")};a.on("click",'button[name="add_scrap"]',function(t){u(r),d.text(o.text()),x(r)}),r.on("click",".scrap-modal-common-head__close",function(t){b()}),r.on("click",".scrap-modal-common-button__cansel",function(t){b()}),r.on("click",".scrap-modal-common-button__perform",function(t){if(!m){var a=d.val();if(a&&a.length>=scrap.max_scrap_memo_length)return void p(r,"„É°„É¢„ÅØ"+scrap.max_scrap_memo_length+"ÊñáÂ≠ó„Åæ„Åß„Åß„Åô„ÄÇ");var n=c.attr("data-article_id"),s={article_id:n,memo:a};m=!0,_("addScrap",s,r,function(t){c.removeClass("c-scrap-btn"),c.addClass("c-memo-btn"),e.hide(),t.data.memo?(c.text("„É°„É¢„ÇíÁ∑®ÈõÜ„Åô„Çã"),o.text(t.data.memo),o.show()):(c.text("„É°„Éxt(""),o.hide()),b(),x(l)})}}),l.on("click",function(t){b()}),i.on("click",function(t){b()});var h=t(".p-article-action-btn-2020__scrap-popup",a);a.on("click",'button[name="no_add_scrap"],h.on("click",".close",function(a){t(this).parent(".js-scrap-popup").removeClass("active")}),function(){if(n){_("getScrap",{article_id:n},a,function(t){if(t.data.scrap){var a=t.data.scrap;c.removeClass("c-scrap-btn"),c.addClass("c-memo-btn"),e.hide(),a.memo?(c.text("„É°„É¢„ÇíÁ∑®ÈõÜ„Åô„Çã"),o.text(a.memo),o.show()):(c.text("„É°„É¢„Çí„Åô„Çã"),o.text(""),o.hide())}else t.data.can_scrap||c.attr("disabled","disabled"),o.text(""),o.hide()})}}()}(n.default)}},[357]);