(()=>{var e={6227:e=>{function t(e){window.KatalReady&&window.KatalReady.katal?e():document.addEventListener("katal-ready",()}e.exports=t,e.exports.default=t},683:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAggregator=void 0;var n=function(){function e(e){var t=this;this.filterFunction=e,this.aggregatedMetrics={},window.addEventListener("katal.metrics.publish",(function(e){t.aggregateMetric(e)}))}return e.prototype.aggregateMetric=function(e){var t=e.detail,n=t.metric,r=t.context,o=r.serviceName,i=r.methodName;this.filterFunction&&!this.filterFunction(n,r)||(this.aggregatedMetrics[o]=this.aggregatedMetrics[o]||{},this.aggregatedMetrics[o][i]=this.aggregatedMetrics[o][i]||{},this.aggregatedMetrics[o][i][n.name]=this.aggregatedMetrics[o][i][n.name]||[],this.aggregatedMetrics[o][i][n.name].push(n.value))},e}();t.MetricsAggregator=n},2067:function(e,t,n){"use strict";var r=this&&this.__assign||o=this&&this.__spreadArrays||i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Level=void 0;var a,u=i(n(6595)),s=i(n(401)),c=n(7885),l=n(683);!a=t.Level||(t.Level={}));var f=[a.DEBUG,a.INFO,a.WARN,a.ERROR,a.FATAL],d={logThreshold:a.DEBUG,maxLogLineSize:1e4,batchTimeoutDuration:5e3,decodeStackTrace:!1,recordMetrics:!0,context:{},headers:{},logToConsole:!1,maxLogsPerBatch:25,useXMLHttpRequest:!1},h=["bubbles","cancelBubble","cancelable","composed","currentTarget","deepPath","defaultPrevented","eventPhase","explicitOriginalTarget","originalTarget","returnValue","srcElement","target","timeStamp","type","isTrusted"],p=o(h,["message"]),g=function(){function e(e){var t=this;this.resourceTimingLogged=!1,this.sendLogsToBackend=function(){var e=t.logLineQueue;if(0!==e.length){t.logLineQueue=[];var n={logs:e};t.sendLogToBackend(t.toJSON(n)),t.queueTimerId=void 0}};var n=r(r({},d),e);this.url=n.url,this.logThreshold=n.logThreshold,this.maxLogLineSize=n.maxLogLineSize,this.context=n.context,this.logToConsole=n.logToConsole,this.headers=n.headers,this.recordMetrics=n.recordMetrics,this.batchTimeoutDuration=n.batchTimeoutDuration,this.decodeStackTrace=n.decodeStackTrace,this.maxLogsPerBatch=n.maxLogsPerBatch,this.xhrWithCredentials=n.xhrWithCredentials,this.useXMLHttpRequest=n.useXMLHttpRequest,this.logLineQueue=[],this.unregisterFns=[],this.unloaded=!1,this.logThresholdIndex=Math.max(f.indexOf(a.DEBUG),f.indexOf(this.logThreshold)),n.sendToBackendOverride&&"function"==typeof n.sendToBackendOverride&&(this.sendLogToBackend=n.sendToBackendOverride),this.recordMetrics&&(this.metricsPublisher=c.createMetricsPublisher("KatalLogger:Loaded"),this.metricsPublisher.publishCounterMonitor("KatalLogger:construct",1)),this.registerUnloadAction((),this.registerBackToPageAction(()}return e.prototype.registerUnloadAction=function(e){this.registerEvent("pagehide",e),this.registerEvent("beforeunload",e),this.registerEvent("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},e.prototype.registerBackToPageAction=function(e){this.registerEvent("pageshow",e),this.registerEvent("visibilitychange",()},e.prototype.addMetricsListener=function(e){var t=this,n=new l.MetricsAggregator(e),r=!1;this.registerUnloadAction((function(){r||(r=!0,t.info("Katal Metrics",n.aggregatedMetrics))}))},e.prototype.addPerformanceListener=e.prototype.logResourceTiming=function(){if(!this.resourceTimingLogged){this.resourceTimingLogged=!0;var e=window.performance.getEntriesByType("resource").reduce((function(e,t){var n,r=t,o=r.name,i=r.initiatorType,a=r.duration,u=o.split("/").pop();return e[i]=null!==(n=e[i])&&void 0!==n?n:{},e[i][u]=Math.round(a),e}),{}),t=window.performance.getEntriesByType("paint").reduce((function(e,t){var n=t.name,r=t.startTime;return e[n]=Math.round(r),e}),{});this.info("Performance Timing",{resource:e,paint:t})}},e.prototype.addErrorListener=function(e){var t=this;["error","unhandledrejection"].map((function(n){t.registerEvent(n,(,!0)}))},e.prototype.removeErrorListener=e.prototype.registerEvent=function(e,t,n){window.addEventListener(e,t,n),this.unregisterFns.push(()},e.prototype.eventListener=function(e,t){var n,r;if(e.error?(n=e.error.message,r=e.error):e.reason?m(e.reason)?(n=e.reason.message,r=e.reason):n=e.reason:m(e)?(n=e.message,r=e):(n="An unknown error occurred: "+this.toStringObject(e),r=new Error("Unknown error")),"KatalLogger error"!==n&&(!t||t(r)))try{return this.error(n,r)}catch(o){}},e.prototype.createJsonStringifyReplacer=function(){var e=new Map;return function(t,n){if("object"==typeof n&&null!=n){if(e.has(n))return"reference-loop, also referenced from '"+e.get(n)+"'";e.set(n,t)}return n}},e.prototype.toStringObject=function(e){var t=e.constructor.name;if(e instanceof Event){var n=h,r={};e instanceof ErrorEvent&&(n=p);for(var o=0,i=n;o<i.length;o++){var a=i[o];e[a]!==window&&(r[a]=e[a])}e=r}return t+":"+this.toJSON(e)},e.prototype.toJSON=function(e){var t;try{t=JSON.stringify(e,this.createJsonStringifyReplacer())}catch(n){t='{ "KatalLogger": "Failed to serialize!", "data": "'+e+'", "error": "'+n+'" }'}return t},e.prototype.debug=function(e,t,n){var r=this;return this.extractArgs(a.DEBUG,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.info=function(e,t,n){var r=this;return this.extractArgs(a.INFO,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.warn=function(e,t,n){var r=this;return this.extractArgs(a.WARN,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.error=function(e,t,n){var r=this;return this.extractArgs(a.ERROR,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.fatal=function(e,t,n){var r=this;return this.extractArgs(a.FATAL,e,t,n).then((function(e){return r.sendRequest(e)}))},e.prototype.extractArgs=function(e,t,n,o){var i=m(n)?{errorMessage:n.message,errorName:n.name,errorStackTrace:""}:void 0,a={level:e,message:t,error:i,context:r(r(r({},this.context),i?o:n),{logTime:Date.now()})};return a.error?this.getStackTraceFromError(n).then(():u.default.resolve(a)},e.prototype.getStackTraceFromError=function(e){return this.decodeStackTrace?u.default.resolve(s.default.fromError(e).then(().catch(()):u.default.resolve(String(e.stack))},e.prototype.sendRequest=e.prototype.sendLogToConsole=function(e){var t=e.level;f.includes(e.level)&&e.level!==a.FATAL||(t=a.ERROR),console[t](e)},e.prototype.queueLogLine=function(e){this.payloadIsValid(e)&&(this.appendToQueue(e),this.unloaded||this.logLineQueue.length>=this.maxLogsPerBatch?this.sendLogsToBackend():this.queueTimerId||(this.queueTimerId=window.setTimeout(this.sendLogsToBackend,this.batchTimeoutDuration)))},e.prototype.appendToQueue=function(e){this.logLineQueue.push(e)},e.prototype.doCallBeacon=function(){return(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)&&!(Object.keys(this.headers).length||this.useXMLHttpRequest)},e.prototype.sendLogToBackend=function(e){if(this.url)if(this.doCallBeacon())navigator.sendBeacon(this.url,e);else{var t=new XMLHttpRequest;t.open("POST",this.url,!0),this.xhrWithCredentials&&(t.withCredentials=this.xhrWithCredentials),Object.entries(this.headers).forEach((),t.send(e)}},e.prototype.payloadIsValid=function(e){if(f.indexOf(e.level)>=this.logThresholdIndex&&this.toJSON(e).length<=this.maxLogLineSize)return!0;return!1},e}();function m(e){return(null==e?void 0:e.name)&&e.message&&(e.stack||!!e.constructor)}t.default=g},7885:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?,o=this&&this.__setModuleDefault||(Object.create?,i=this&&this.__importStar||a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createMetricsPublisher=void 0;var u=i(n(5989)),s=function(e){console.error(e)},c=(new(a(n(8277)).default.Builder)).withDomainRealm("prod","USAmazon").withErrorHandler(s).build(),l=/([^?]+)/.exec(window.location.href),f=new u.Metric.String("url",l?l[1]:window.location.href);f.truncate=!0;var d=(new u.Context.Builder).withSite("KatalLoggerInternalMetrics").withServiceName("KatalLogger").addRelatedMetrics(f).build(),h=new u.Publisher(c,s,d);t.createMetricsPublisher=function(e){return h.newChildActionPublisherForMethod(e)}},7609:8277:7700:(e,t,n)=>{"use strict";var r=n(4836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(6690)),i=r(n(9728)),a=r(n(8416)),u=r(n(1051)),s=r(n(5292)),c=r(n(2721)),l=n(8184),f=n(1582);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}ar p=["site","serviceName","methodName"],g=function(){eturn(0,i.default)(e,[{key:"merge",value:,{key:"withoutRelatedMetricsSingleAction",value:,{key:"driverContext",value:,{key:"getFields",value:,{key:"validationError",value:,{key:"validateField",value:]),e}();t.default=g,(0,a.default)(g,"Builder",))},8142:5274:4864:2721:469:8059:1051:1582:8184:5742:5292:5989:199:6673:21:8981:8116:124:2545:4053:1741:4392:2952:5607:1128:4873:9180:6595:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:);const r=var o=setTimeout;pe.catch=u.prototype.then=u.prototype.finally=r,u.all=u.resolve=u.reject=u.race=u._immediateFn="function"==typeof setImmediate&&|u._unhandledRejectionFn=const p=u},4595:9829:9817:647:8855:4274:1027:1956:5667:8902:5786:9479:7252:4358:401:5327:5217:1171:6470:3897:3405:6115:6690:9728:8416:1588:3808:1655:4836:9498:2281:4993:3788:6015:1753:861:5036:4062:8698:6116:,t={};.n=n.d=n.o=n.r=(()=>{"use strict";var e=n(6227),t=n.n(e);var r=n(2067),o=n.n(r),i=["isDateDisabled","getDateDecorationConfig","actionColumnRenderer","isRowEditable","isRowDisabled","isDateDisabled","getDateDecorationConfig","getDateDecorationConfig","selectionSummaryOverride"];function a(e){var t;return(null==e||null===(t=e.stack)||void 0===t?void 0:t.includes("https://d1uznvntk80v7s.cloudfront.net"))&&!i.some(()}r c=n(5989),l=n(8277),f="SellerCentral",d="katal_sellercentral",h={test:"com.amazon.eel.katal.metrics.core.nexus.sellercentral.gamma",prod:"com.amazon.eel.katal.metrics.core.nexus.sellercentral"};function p(e){var t=function(){var e=function(){var e=window.ue_surl;if(e){var t=e.match(/unagi[-]([a-z]{2})/);if(t)return g[t[1]]}}(),t=function(){var e=window.ue_surl;if(e){if(-1!==e.indexOf("nexusclient.prod"))return"prod";if(-1!==e.indexOf("nexusclient.gamma"))return"test"}}();return{domain:t,realm:e}}(),n=t.domain||"prod",r=t.realm||"USAmazon",o=(new l.default.Builder).withCustomProducer(d).withCustomSourceGroup(h[n]).withDomainRealm(n,r);return o.withErrorHandler(e),o}var g={na:"USAmazon",eu:"EUAmazon",fe:"FEAmazon",cn:"CNAmazon"};var m="KatalMetrics";function v(e){var t,n=function(e){console.warn(e)},r="",o="";null!==(t=window.uept)&&void 0!==t&&t.pageType&&(r=window.uept.pageType,o=window.uept.subPageType||"");var i=function(e){var t=new c.Context.Builder;return t.withSite(f),window.ue_id&&t.withRelatedMetrics(new c.Metric.String("http_request_id",window.ue_id)),t.withServiceName(e),t}(m),a=window.location.href);return i.addRelatedMetrics.apply(i,s([new c.Metric.String("url",a),new c.Metric.String("pageType",r),new c.Metric.String("subPageType",o),new c.Metric.String("katalBuildTime","2023-12-29T12:09:29.501Z"),new c.Metric.String("katalPackageVersion","1.3.48019.0")].map(())),e||(e=p(n).build()),{publisher:new c.Publisher(e,n,i.build()).newChildActionPublisherForMethod("Load"),sushiDriver:e}}var y="KatalComponent",w="totalConnectedOnPage",b=0,_={};function M(e,t){t.beforeUnload((function(){!function(e){var t=e.newChildPublisher({methodName:"".concat(y,":all")});t.publishCounterMonitor(w,b);var n=e.newChildPublisher({methodName:"".concat(y,":uniqueTags")});for(var r in n.publishCounterMonitor(w,Object.keys(_).length),_){e.newChildPublisher({methodName:"".concat(y,":").concat(r)}).publishCounterMonitor(w,_[r])}}(e)})),window.addEventListener("katal-component-connected",(function(e){!function(e){++b;var t=_[e]||0;_[e]=t+1}(e.detail.element.tagName.toLowerCase())}))}var S={KatalCSS:/.+katal\.flo\.components.+css$/,KatalAssetLoader:/.+katal\.assetloader.+js$/,KatalComponentJS:/.+katal\.flo.components.+js$/,KatalPolyfill:/webcomponents-.+\.js$/};function O(e){var t;if(null!==(t=e.name)&&void 0!==t&&t.startsWith("data:"))return null;for(var n in S)if(S[n].test(e.name))return n;return null}try{!function(){var e=v(),n=e.publisher,r=e.sushiDriver,i=new(o())({url:"https://j4a9kf71dd.execute-api.us-east-1.amazonaws.com/prod/v1/log",context:{katalComponentsPackageVersion:"1.3.48019.0",katalComponentsBuildTime:"2023-12-29T12:09:29.501Z",location:window.location},recordMetrics:!1,decodeStackTrace:!0});if(M(n,r),window.Katal.internalMetricsAssetLogger=function(e,t){n.publishCounterMonitor(e,t)},window.Katal.internalAssetCWErrorLogger=window.Katal.deferredAssetMetrics){for(var u in window.Katal.deferredAssetMetrics)window.Katal.internalMetricsAssetLogger(u,window.Katal.deferredAssetMetrics[u]);window.Katal.deferredAssetMetrics={}}window.Katal.deferredErrorLogs&&(window.Katal.deferredErrorLogs.forEach((),window.Katal.deferredErrorLogs=[]),function(e){window.addEventListener("error",(function(t){var n,r=t.filename,o=t.error;r.match(/katal.*components/)||null!=o&&null!==(n=o.stack)&&void 0!==n&&n.match(/katal.*components/)?e.publishCounterMonitor("KatalComponentsJSError:count",1):r.match("custom-elements_1_2_2.min.js")&&e.publishCounterMonitor("KatalCustomElementsJSError:count",1)}))}(n),function(e,t){window.performance&&window.performance.getEntriesByType&&t.beforeUnload((function(){var t=performance.getEntriesByType("resource");if(t){var n=[];t.forEach((),["KatalCSS","KatalComponentJS","KatalPolyfill"].forEach((function(t){e.publishCounterMonitor("Unload.".concat(t,".Loaded"),-1!==n.indexOf(t)?1:0)}))}}))}(n,r),i.addErrorListener(a),t()((function(){var e=null;performance.now&&(e=Math.round(performance.now()));var t,r=window.Katal.Performance,o=r.ComponentsStart,i=r.ComponentsEnd;o&&i&&(n.publishTimerMonitor("katalComponentsExecuteStart",o),n.publishTimerMonitor("katalComponentsExecuteEnd",i),n.publishTimerMonitor("katalComponentsExecute",i-o)),t=function(){e&&n.publishTimerMonitor("katalReady",e),function(e){if(window.WebComponents&&window.WebComponents.requiredPolyfills){var t=function(t,n){e.publishCounterMonitor(n,-1!==window.WebComponents.requiredPolyfills.indexOf(t)?1:0)};t("sd","shadyDom"),t("ce","customElements"),t("pf","platform")}}(n),function(e){window.performance&&window.performance.getEntriesByType?(e.publishCounterMonitor("PerformanceApiSupported",1),function(e){var t=performance.getEntriesByType("navigation");if(null!=t&&t.length>0){var n=t[0];null!==n.domInteractive&&void 0!==n.domInteractive&&e.publishTimerMonitor("tti",Math.round(n.domInteractive))}}(e),function(e){var t=performance.getEntriesByType("resource");t&&t.forEach((function(t){var n=O(t);n&&(t.transferSize>0&&e.publishCounterMonitor("".concat(n,".transferSize"),t.transferSize),t.encodedBodySize>0&&e.publishCounterMonitor("".concat(n,".encodedBodySize"),t.encodedBodySize),t.decodedBodySize>0&&e.publishCounterMonitor("".concat(n,".decodedBodySize"),t.decodedBodySize),e.publishTimerMonitor("".concat(n,".duration"),Math.round(t.duration)))}))}(e),function(e){if(performance.getEntriesByName){var t=performance.getEntriesByName("first-paint");t&&t.length>0&&e.publishTimerMonitor("FirstPaint",Math.round(t[0].startTime));var n=performance.getEntriesByName("first-contentful-paint");n&&n.length>0&&e.publishTimerMonitor("FirstContentfulPaint",Math.round(n[0].startTime))}}(e)):e.publishCounterMonitor("PerformanceApiSupported",0)}(n)},"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)}))}()}catch(E){}})()})();
//# sourceMappingURL=metrics.4e8bd7e17e3308f641f7.js.map