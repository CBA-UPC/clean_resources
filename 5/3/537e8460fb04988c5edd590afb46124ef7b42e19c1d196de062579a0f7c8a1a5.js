<="https://view.eaglecdn.com" crossorigin=""><link rel="preconnect" href="https://static.eaglecdn.com" crossorigin=""><link rel="preconnect" href="https://hlsvod.rambler.eaglecdn.com" crossorigin=""><link rel="preconnect" href="https://id.rambler.ru" crossorigin=""><link rel="preconnect" href="https://imasdk.googleapis.com" crossorigin=""><link rel="preconnect" href="https://ssp.rambler.ru" crossorigin=""><link rel="preconnect" href="https://ads.adfox.ru" crossorigin=""><link rel="preconnect" href="https://an.yandex.ru" crossorigin=""><link rel="preconnect" href="https://yandex.ru" crossorigin=""><link rel="preconnect" href="https://static.rambler.ru" crossorigin=""></head><body><script defer="defer">!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="29e4236f-0d8e-4c1d-99ba-6d31cac311ca",e._sentryDebugIdIdentifier="sentry-dbid-29e4236f-0d8e-4c1d-99ba-6d31cac311ca")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"667caea1f43d3a68e5db8270495074825d1554b2"},(()=>{var e,t,i={7060:(e,t,i)=>{"use strict";i.d(t,{MS:()=>o});var s,n,r=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");functionotype=null===(this)||this;return n.name="ApiError",n.message=i.message.toString().toLowerCase(),n.code=null!==(s=i.code)&&void 0!==s?s:"unknown",n.details=i.details,Object.setPrototypeOf(n,t.prototype),n}return r(t,e),t}(Error);n=Error,r((function e(t){var i=n.call(this)||this;return i.name="SubmissionError",i.message="failed: ".concat(Object.keys(t)),i.errors=t,Object.setPrototypeOf(i,e.prototype),i}),n),function(e){r((function t(i){var s=e.call(this)||this;return s.no=i,s.code="error",Object.setPrototypeOf(s,t.prototype),s}),e)}(Error)},7570:(e,t,i)=>{"use strict){void 0===t&&(t={});var i=t.retries,s=void 0===i?3:i,r=t.timeout,o=void 0===r?500:r,a=t.shouldRetry,l=void 0===a?function(){return!0}:a,c=t.signal,d=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.apply(void 0,t).catch((function(e){if(--s<1||!l(e))throw e;return n(o,c).then((function(){return d.apply(void 0,t)}))}))};return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.apply(void 0,e)}},n=function(e,t){return new Promise((function(i,s){var n=window.setTimeout(i,e);null==t||t.addEventListener("abort",(function(){n&&clearTimeout(n),s(new DOMException("The user aborted a timeout.","AbortError"))}))}))}},3436:(e,t,i)=>{"use strict";i.d(t,{CN:()=>r,DP:()=>o,MF:()=>a,hw:()=>l});var s=function(){return s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototypes,argumen(o&&"h((fu__}fu,o={nowSeconds:is.each((function(e){(o=i(this)).css(t,Y(this,n,eeout>0&&(b=setTimeout((funct);v&t[on(Pl(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,i){if(e===i)return this},contains:function(t,i,s){if(e(this).text().indexOf(s)>-1)return this},has:function(e,i,s){if(t.qsa(this,s).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),a=/^\s*>/,l="Zepto"+ +new Date;function c(e,t){e=e.replace(/=#\]/g,'="#"]');var i,s,n=o.exec(e);if(n&&n[2]in r&&(i=r[n[2]],s=n[3],e=n[1],s)){var a=Number(s);s=isNaN(a)?s.replace(/^["']|["']$/g,""):a}return t(e,i,s)}t.qsa=function(s,n){return c(n,(function(r,o,c){try{var d;!r&&o?r="*":a.test(r)&&(d=e(s).addClass(l),r="."+l+" "+r);var h=i(s,r)}catch(e){throw console.error("error performing selector: %o",n),e}finally{d&&d.removeClass(l)}return o?t.uniq(e.map(h,(function(e,t){return o.call(e,t,h,c)}))):h}))},t.matches=function(e,t){return c(t,(function(t,i,n){return(!t||s(e,t))&&(!i||i.call(e,null,n)===e)}))}}(t),e.exports=t},51:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(7537),n=i.n(s),r=i(3645),o=i.n(r)()(n());o.push([e.id,"[data-html5-video]{position:absolute;height:100%;width:100%;display:block}","",{version:3,sources:["webpack://./node_modules/@clappr/core/src/playbacks/html5_video/public/style.scss"],names:[],mappings:"AAAA,mBACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,aAAA",sourcesContent:["[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block;\n}\n"],sourceRoot:""}]),o.locals={};const a=o},8500:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(7537),n=i.n(s),r=i(3645),o=i.n(r)()(n());o.push([e.id,"[data-no-op]{position:absolute;height:100%;width:100%;text-align:center}[data-no-op] p[data-no-op-msg]{position:absolute;text-align:center;font-size:25px;left:0;right:0;color:#fff;padding:10px;top:50%;transform:translateY(-50%);max-height:100%;overflow:auto}[data-no-op] canvas[data-no-op-canvas]{background-color:#777;height:100%;width:100%}","",{version:3,sources:["webpack://./node_modules/@clappr/core/src/playbacks/no_op/public/style.scss"],names:[],mappings:"AAAA,aACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CAGF,+BACE,iBAAA,CACA,iBAAA,CACA,cAAA,CACA,MAAA,CACA,OAAA,CACA,UAAA,CACA,YAAA,CAEA,OAAA,CACA,0BAAA,CACA,eAAA,CACA,aAAA,CAGF,uCACE,qBAAA,CACA,WAAA,CACA,UAAA",sourcesContent:["[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center;\n}\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto;\n}\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%;\n}\n"],sourceRoot:""}]),o.locals={};const a=o},2663:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(7537),n=i.n(s),r=i(3645),o=i.n(r)()(n());o.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),o.locals={};const a=o},9133:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(7537),n=i.n(s),r=i(3645),o=i.n(r)()(n());o.push([e.id,".eagleplayer-container{width:100%;height:100%;position:relative;text-align:left}.eagleplayer-container *{box-sizing:initial}.eagleplayer-container.fade{animation:fadein 2s}@keyframes fadein{from{opacity:0}to{opacity:1}}.eplayer-poster{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.eplayer-skin{z-index:2}.eagleplayer-advertisement{z-index:3}.eagleplayer-info{color:#fff;z-index:3;position:absolute;width:100%;height:100%;left:0;display:table}video::-webkit-media-controls-enclosure{display:none !important}.container canvas{position:relative}.eagleplayer-fullscreen{width:100% !important;height:100% !important}.eplayer-ios-noskin *::-webkit-media-controls-panel{display:none !important;-webkit-appearance:none}.eplayer-ios-noskin *::-webkit-media-controls-start-playback-button{display:none !important;-webkit-appearance:none}","",{version:3,sources:["webpack://./src/common/components/player/styles.scss"],names:[],mappings:"AAAA,uBACE,UAAA,CACA,WAAA,CACA,iBAAA,CACA,eAAA,CAEA,yBACE,kBAAA,CAGF,4BACE,mBAAA,CAEA,kBACE,KACE,SAAA,CAGF,GACE,SAAA,CAAA,CAUR,gBACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CAGF,cACE,SAAA,CAGF,2BACE,SAAA,CAGF,kBACE,UAAA,CACA,SAAA,CACA,iBAAA,CACA,UAAA,CACA,WAAA,CACA,MAAA,CACA,aAAA,CAGF,wCACE,uBAAA,CAIA,kBACE,iBAAA,CAIJ,wBACE,qBAAA,CACA,sBAAA,CAIA,oDACE,uBAAA,CACA,uBAAA,CAGF,oEACE,uBAAA,CACA,uBAAA",sourcesContent:[".eagleplayer-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  text-align: left;\n\n  * {\n    box-sizing: initial;\n  }\n\n  &.fade {\n    animation: fadein 2s;\n\n    @keyframes fadein {\n      from {\n        opacity: 0;\n      }\n\n      to {\n        opacity: 1;\n      }\n    }\n  }\n}\n\n.eagleplayer-loader {\n  //background: black url(load.gif) no-repeat center center;\n}\n\n.eplayer-poster {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n.eplayer-skin {\n  z-index: 2;\n}\n\n.eagleplayer-advertisement {\n  z-index: 3;\n}\n\n.eagleplayer-info {\n  color: white;\n  z-index: 3;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  display: table;\n}\n\nvideo::-webkit-media-controls-enclosure {\n  display: none !important;\n}\n\n.container {\n  canvas {\n    position: relative;\n  }\n}\n\n.eagleplayer-fullscreen {\n  width: 100% !important;\n  height: 100% !important;\n}\n\n.eplayer-ios-noskin {\n  *::-webkit-media-controls-panel {\n    display: none !important;\n    -webkit-appearance: none;\n  }\n\n  *::-webkit-media-controls-start-playback-button {\n    display: none !important;\n    -webkit-appearance: none;\n  }\n}\n"],sourceRoot:""}]),o.locals={};const a=o},5095:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(7537),n=i.n(s),r=i(3645),o=i.n(r)()(n());o.push([e.id,".eagleplayer-advertisement,.eagleplayer-advertisement-container,.eagleplayer-advertisement-click-a\n  b-itemes:[]rn t[if(s)for(var a=0;a<this.length;a++){var l=t(d[5]):""," {").concat(d[1],"}")),d[5]=r),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),t.push(d))}},t}},7537:e=>{"use strict";e.exports=function(e){var t=e[1],i=e[3];if(!i)return t;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),r="/*# ".concat(n," */");return[t].concat([r]).join("\n")}return[t].join("\n")}},5093:e=>{var t,i,s,n,r,o;e.exports=(i=[],n=(s=document).documentElement.doScroll,r="DOMContentLoaded",(o=(n?/^loaded|^c/:/^loaded|^i|^c/).test(s.readyState))||s.addEventListener(r,t=function(){for(s.removeE this},r.prototype.off=r.prototyid 0==A)&&(on"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var i=r.test(e);return i||o.test(e)?a(e.slice(2),i?2:8):n.test(e)?NaN:+e}e.exports=function(e,t,i),_.cane)?n:+e}e.exports=function(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError(s);return A(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),function(e,t,i){var n,r,o,a,l,c,d=0,h=!1,u=!1,p=!0;if("function"!=typeof e)throw new TypeError(s);function f(t){var i=n,s=r;return n=r=void 0,d=t,a=e.apply(s,i)}function y(e){var i=e-c;return void 0===c||i>=t||i<0||u&&e-d>=o}function T(){var e=v();if(y(e))return _(e);l=setTimeout(T,function(e){var i=t-(e-c);return u?m(i,o-(e-d)):i}(e))}function _(e){return l=void 0,p&&n?f(e):(n=r=void 0,a)}function b(){var e=v(),i=y(e);if(n=arguments,r=this,c=e,i){if(void 0===l)return function(e){return d=e,l=setTimeout(T,t),h?f(e):a}(c);if(u)return l=setTimeout(T,t),f(c)}return void 0===l&&(l=setTimeout(T,t)),a}return t=E(t)||0,A(i)&&(h=!!i.leading,o=(u="maxWait"in i)?g(E(i.maxWait)||0,t):o,p="trailing"in i?!!i?e:{default:e}}var o=function(e){function t(e,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),o=new n.default;return o.setMaxListeners(0),r.connectedWindow=window.opener||window.parent,rResponse:!0}).then((function(e"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(s.default);t.default=o},3262:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=o(i(6099)),r=o(i(7187));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,i,s,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n||(n=s,s=null);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,s)),a=new r.default;retuider=o.facade=Object.assign(a,n),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurablei.push(o.value),!t||i.length!==t);s=!0);}catch(e){n=!0,r=e}finally{try{!s&&a.return&&a.return()}finally{if(n)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(n,1)[0];this.consumer=r,this.sendMessage({type:"response",response:{result:[this.provider]},responseToId:s,waitResponse:!0}).then((function(){i.emit("ready",r)}))}}]),t}(n.default);t.default=a},6099:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],s=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(s=(o=a.next()).done)&&(i.push(o.value),!t||i.length!==t);s=!0);}catch(e){n=!0,r=e}finally{try{!s&&a.return&&a.return()}finally{if(n)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),?e:{default:e}}var u=funcfunction(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)n't been called");return!t||"obje(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.expectedOrigin=i,n.connectedWindow=s,n.functions={},n.contexts={},n.unpackedFunctions={},n.i=0,n.onMessage=n.onMessage.bind(n),n.subscribeEvents(),n.transportId=n.prepareTransportId(e),n.setMaxListeners(1/0),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"destroy",value:function(){this.unsubscribeEvents(),this.functions={},this.contexts={},this.unpackedFunctions={}}},{key:"generateId",value:function(){return++this.i}},{key:"subscribeEvents",value:function(){window.addEventListener("message",this.onMessage,!0)}},{key:"unsubscribeEvents",value:function(){window.removeEventListener("message",this.onMessage,!0)}},{key:"prepareTransportId",value:function(e){return"MAGIC_TRANSPORT:"+e}},{key:"pack",value:function(eult)(e,(function(e,n,o,a,l){if(-1!==s.indexOf(e))return!1;if("function"==typeof e){var c=0===l?window:o,d="__"+t.transportId+":functionId",h=e[d];h||(h=t.generateId(),Object.defineProperty(e,d,{get:function(){return h}})),t.functions[h]||(t.functions[h]=function(t,i){return new Promise((function(s,n){try{Promise.resolve(e.apply(t,i)).then(s,n)}catch(e){n(e)}}))});var u="__"+t.transportId+":contextId",p=c[u];p||(p=t.generateId(),Object.defineProperty(c,u,{get:function(){return p}})),t.contexts[p]||(t.contexts[p]=c),i[a]=[h,p]}else"object"===(void 0===e?"undefined":r(e))&&s.push(e)})),i}},{key:"unpack",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(0,a.set)(e,i,this.unpackFunction(t[i]))}},{key:"unpackFunction",value:function(e){var t=this,i=n(e,2),s=i[0]+"|"+i[1];return this.unpackedFunctions[s]||(this.unpackedFunctions[s]=function(){for(var i=arguments.length,s=Array(i),n=0;n<i;n++)s[n]=arguments[n];return t.sendMessage({args:s,functionToInvoke:e,type:"invoke",waitResponse:!0}).then((function(e){return e.response.result}))}),this.unpackedFunctions[s]}},{key:"sendMessage",value:function(e){var t,i,n,r,o=e.type,a=e.args,l=void 0===a?[]:a,c=e.response,h=void 0===c?{}:c,u=e.responseToId,p=e.functionToInvoke,f=e.waitResponse,g=this.generateId(),m=(i={},n=this.transportId,r={id:g,type:o,args:l,responseToId:u,functionToInvoke:p,response:h,functions:s({},this.pack(l),this.pack(h)),ts:Date.now()},n in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i),v=[(0,d.stringify)(m)],A=this.expectedOrigin&&"*"!==this.expectedOrigin?this.expectedOrigin:"*";if(A&&v.push(A),(t=this.connectedWindow).postMessage.apply(t,v),f)return this.waitResponse(g)}},{key:"waitResponse",value:function(e){var t=this;return new Promise((function(i,s){t.once("response:esponse.error;t?s(t):i(e)}))}))}},{key:"checkOrigin",value:function(e){return!this.expectedOrigin||"*"===this.expectedOrigin||e===this.expectedOrigin}},{key:"onMessage",value:function(e){var t=e.data;if("string"==typeof t&&this.checkOrigin(e.origin)response":this.unpack(r,n),this.handleResponse(e);break;case"initialize":this.unpmit("response:"+t,e)}},{key:"handleInvoke",value:function(e){var t=this,i=e.functionToInvoke,s=e.args,r=e.id,o=n(i,2),a=o[0],l=o[1],c=this.functions[a],d=this.contexts[l];new Promise((function(e,t){try{Promise.resolve(c(d,s)sponseToId:r})}),(function(e){return t.sendMessage({type:"response",response:{error:e},responseToId:r})}))}}]),t}(l.default);t.default=u},2113:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(3262);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(s).default}});var n=i(7142);function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Consumer",{enumerable:!0,get:function(){return r(n).default}})},9153:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(t instanceof Error){var i={};return Object.getOwnPropertyNames(t).forEach((function(e){i[e]=t[e]})),i}return t};t.parse=JSON.parse.bind(JSON),t.stringify=function(e){return JSON.stringify(e,i)}},7385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,s,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n=n||"",Array.isArray(t)?function(t,i,s,n){var r="";t.forEach((function(t,o,a){r=s?s+"."+o:o.toString(),!1!==i.call(a,t,o,a,r,n)&&e(a[o],i,r,n+1)}))}(t,s,n,r):!t||"object"!==(void 0===t?"undefined":i(t))||t instanceof Error||function(t,i,s,n){for(var r in t){var o=s?s+"."+r:r;!1!==i.call(t,t[r],r,t,o,n)&&e(t[r],i,o,n+1)}}(t,s,n,r)}},3647:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0){function e(e){if(this.registry=s.defaultRegistry,this.labels=[],e.registry&&(this.registry=e.registry),!(0,n.isValidCollectorName)(e.name))throw new Error("Collector name is invalid, it MUST follow regex /[a-zA-Z_:][a-zA-Z0-9_:]*/");if(this.name=e.name,e.labels){if(!(0,n.isValidLabels)(e.labels))throw new Error("Labels may contain invalid name, it MUST follow regex /[a-zA-Z_][a-zA-Z0-9_]*/");this.labels=e.labels}this.help=e.help,e.registry&&(this.registry=e.registry),this.registry.register(this)}return e.prototype.collect=function(){return[]},e.prototype.reset=function(){},e}();t.Collector=r},3536:function(e,t,i){"use strict";var s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.pr,s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultRegistry=t.CollectorRegistry=void 0;var n=i(6436),r=function(){function e(){this.collectors={},this.defaultLabelMap={}}return e.prototype.register=function(e){if(this.collectors[e.name])throw new Error("Collector already registered: ".concat(e.name));this.collectors[e.name]=e},e.prototype.unregister=function(e){this.collectors[e]&&delete this.collectors[e]},e.prototype.setDefaultLabels=function(e){this.defaultLabelMap=e},e.prototype.expose=function(){for(var e=Object.values(this.collectors),t=Object.keys(this.defaultLabelMap),i=[],r=0,o=e;r<o.length;r++){var a=o[r],l=a.collect();if(l.length>0){var c="# HELP ".concat(a.name," ").concat(a.help,"\n"),d="# TYPE ".concat(a.name," ").concat(a.type,"\n");if(t.length>0)for(var h=0,u=l;h<u.length;h++){var p=u[h];p.labels=s(s({},this.defaultLabelMap),p.labels)}i.push(c,d),i.push.apply(i,(0,n.convertSamplesToText)(l))}}return i.join("")},e.prototype.reset=function(){this.collectors={},this.defaultLabelMap={}},e}();t.CollectorRegistry=r,t.defaultRegistry=new r},7476:function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=void 0;var r=i(3647),o=i(6436),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="counter",t.counterValueMap={},t}return n(t,e),t.prototype.inc=function(e,t){if(void 0===e&&(e=1),!Number.isFinite(e))throw new Error("Invalid Counter valuelMap:t},this.counterValueMap[i]=s)},t.prototype.reset=function(){this.counterValueMap={}},t.prototype.collect=function(){for(var e,t=[],i=0,s=Object.values(this.counterValueMap);i<s.length;i++){var n=s[i];t.push({value:n.value,labels:null!==(e=n.labelMap)&&void 0!==e?e:{},name:this.name})}return t},t}(r.Collector);t.Counter=a},9054:function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Gauge=void 0;var r=i(3647),o=i(6436),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="gauge",t.gaugeValueMap={},t}return n(t,e),t.prototype.set=function(e,t){if(!Number.isFinite(e))throw new Error("Invalid Counter value(e))throw new Error("Invalid Counter value: ".concat(e));var i=t?(0,o.hashLabelMap)(t):"",s=this.gaugeValueMap[i];s?s.value-=e:(s={value:-e,labelMap:t},this.gaugeValueMap[i]=s)},t.prototype.setToCurrentTime=function(e){this.set(Date.now()/1e3,e)},t.prototype.reset=function(){this.gaugeValueMap={}},t.prototype.collect=function(){for(var e,t=[],i=0,s=Object.values(this.gaugeValueMap);i<s.length;i++){var n=s[i];t.push({value:n.value,labels:null!==(e=n.labelMap)&&void 0!==e?e:{},name:this.name})}return t},t}(r.Collector);t.Gauge=a},8216:function(e,t,i){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Histogram=t.defaultBuckets=void 0;var o=i(3647),a=i(4614),l=i(6436);t.defaultBuckets=Object.freeze([.005,.01,.025,.05,.075,.1,.25,.5,.75,1,2.5,5,7.5,10]);var c=function(e){function i(i){var s=e.call(this,i)||this;if(s.type="histogram",s.buckets=t.defaultBuckets,s.bucketValueMap={},s.timers={},i.labels)for(var n=0,r=i.labels;n<r.length;n++)if("le"===r[n])throw new Error("Invalid label name: `le`");return i.buckets&&(s.buckets=i.buckets),s}return n(i,e),i.prototype.createInitialBucketMap=function(){for(var e={},t=0,i=this.buckets;t<i.length;t++){var s=i[t];e["".concat(s)]=0}return e},i.prototype.createInitialBucketValue=function(){return{labelMap:{},bucketMap:this.createInitialBucketMap(),sum:0,count:0}},i.prototype.getBucketByValue=function(e){for(var t=0,i=this.buckets;t<i.length;t++){var s=i[t];if(e<=s)return s}return-1},i.prototype.validateLabels=function(e){for(var t=0,i=e;t<i.length;t++){var s=i[t];if(!this.labels.includes(s))throw new Error("Invalid label: ".concat(s))}},i.prototype.reset=function(){this.bucketValueMap={}},i.prototype.observe=function(e,t){if(t&&this.validateLabels(Object.keys(t)),!Number.isFinite(e))throw new Error("Invalid Histogram value: ".concat(eNumber.isFinite(s.bucketr(var s=i[t],n=0,o=0,a=thi0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(o=0)),o;)try{if(i=1,s&&(n=2&a[0]?s.return:a[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,a[1])).done)return n;switch(s=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],s=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PushGateway=void 0;var o=i(3536),a={method:"POST"},l=function(){function e(e){this.registry=o.defaultRegistry,this.fetchOptions=a,e.registry&&(this.registry=e.registry),e.fetchOptions&&(this.fetchOptions=s(s({},this.fetchOptions),e.fetchOptions)),this.url=e.url}return e.prototype.push=function(e)2]}))}))},e}();t.PushGateway=l},4614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var i=function(){function e(e){this.start=Date.now(),this.laabelMap=e.labelMDate.now()-this.start;this.histogram.observe(e/1e3,this.labelMap)},e}();t.Timer=i},7964:functBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.protalue:!0}),t.convertSamplesToText=t.hashLabelMap=t.isValidLabels=t.isValidCollectorName=void 0,t.isValidCollectorName=function(e){return!!e&&/[a-zA-Z_:][a-zA-Z0-9_:]*/.tesor");v)).jMap:lefereon(t)inval(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.la"),i.media&&(s+="}"),i.supports&&(s+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},786:e=>{e.exports=""},2772:e=>{e.exports=""},130:e=>{e.exports=""},2596:e=>{e.exports=""},2881:e=>{e.exports=""},7307:e=>{e.exports=""},9007:e=>{e.exports=""},4194:e=>{e.exports=""},1146:e=>{e.exports=""},3725:e=>{e.exports=""},1251:(e,t,i)=>{"use strict";i.d(t,{JD:()=>n,Wf:()=>_,sC:()=>I,Il:()=>J});var s=i(6594);class n extends s.lY{get name(){return"click_to_pause"}get supportedVersion(){return{min:"0.5.0"}}get config(){return this.container.options.clickToPauseConfig||{}}constructor(e){super(e)}bindEvents(){this.listenTo(this.container,s.zW.CONTAINER_CLICK,this.click),this.listenTo(this.container,s.zW.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}click(){const e=this.config.onClickPayload;(this.container.getPlaybackType()!==s.BT.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause(e):this.container.play(e))}settingsUpdate(){const e=this.container.getPlaybackType()!==s.BT.LIVE||this.container.isDvrEnabled();if(e===this.pointerEnabled)return;const t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}}i(1146);var r=i(3379),o=i.n(r),a=i(7795),l=i.n(a),c=i(569),d=i.n(c),h=i(3565),u=i.n(h),p=i(9216),f=i.n(p),g=i(4589),m=i.n(g),v=i(2663),A={};A.styleTagTransform=m(),A.setAttributes=u(),A.insert=d().bind(null,"head"),A.domAPI=l(),A.insertStyleElement=f(),o()(v.Z,A),v.Z&&v.Z.locals&&v.Z.locals;class E extends s.nH{get name(){return"closed_captions"}get supportedVersion(){return{min:"0.5.0"}}get template(){return(0,s.XK)('<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>\n<ul>\n <% if (title) { %>\n  <li data-title><%= title %></li>\n <% }; %>\n  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>\n <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>\n <% ick [data-cc-buConfig;thiabelCallba,s.zW.CORE_ACTIVE_CONTAINER_CHANGED,this.containl,s.zW.MEDIACONTR,this.hideContextMenu),thishis.container,s.zW.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,s.zW.CONTAINER_STOP,this.onContainerStop))}onContainerStop(){this.ccAvailable(!1)}containerChanged(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()}onSubtitleAvailable(){this.renderCcButton(),this.ccAvailable(!0)}onSubtitleChanged(e){this.setCurrentContextMenuElement(e.id)}onTrackSelect(e){const t=parseInt(e.target.dataset.ccSelect,10);return this.container.clo)}contextMenuElement(e){return this.$el.find("ul a"+(isNaN(e)?"":'[data-cc-select="'+e+'"]')).parent()}setCurrentContextMenuElement(e){if(this._trackId!==e){this.contextMenuElement().removeClass("current"),this.contextMenuElement(e).addClass("current");const t=e>-1?"addClass":"removeClass";this.$ccButton[t]("enabled"),this._trackId=e}}renderCcButton(){let e=this.container?this.container.closedCaptionsTracks:[];for(let t=0;t<e.lenggetStyleFor(public_closed_captions,{baseUrl:this.options.baseUrl});this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:e})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append(_09_cc_default()),this.$el.append(t[0])}render(){this.renderCcButton();const e=this.core.mediaControl.$el.find("button[data-fullscreen]");return e[0]?this.$el.insertAfter(e):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this}}var y={};y.styleTagTransform=m(),y.setAttributes=u(),y.insert=d().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=f(),o()(v.Z,y),v.Z&&v.Z.locals&&v.Z.locals;class T extends s.nH{get template(){return(0,s.XK)('<div class="live-info"><%= live %></is.sttings?(this.listenTo(this.core.mediaControl,s.zW.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,s.zW.MEDIACONTROL_RENDERED,this.settingsUpdatethis.core.activeContainer&&(this.listenToOnce(this.core.activeContainer,s.zW.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.activeContainer,s.zW.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))}containerChanged(){this.stopListening(),this.bindEvents()}dvrChanged(e){this.core.getPlaybackType()===s.BT.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),e?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-contro)&&t.seek(t.getDuration())}settingsUpdate(){this.stopListeningnder(){return(void 0===this.core.options.useDvrControls||!!this.core.options.useDvrControls)&&this.core.getPlaybackType()===s.BT.LIVE}render(){const e=s.pE.getStyleFor(dvr_controls,{baseUrl:this.options.baseUrl});return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.$el.append(e[0]),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this}}class _ extends s.kX{get name(){return"end_video"}get supportedVersion(){return{min:"0.5.0"}}bindEvents(){this.listenTo(this.core,s.zW.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);const e=this.core.activeContainer;e&&(this.listenTo(e,s.zW.CONTAINER_ENDED,this.ended),this.listenTo(e,s.zW.CONTAINER_STOP,this.ended))}containerChanged(){this.stopListening(),this.bindEvents()}ended(){(void 0===this.core.options.exitFullscreenOnEnd||this.core.options.exitFullscreenOnEnd)&&this.core.isFullscreen()&&this.core.toggleFullsc,o()(v.Z,){return(0,s.XK)('<div class="player-error-screen__content" data-error-screen>\n <% if (icon) { %>\n  <div class="player-error-screen__icon" data-error-screen><-screen__message" data-error-screen><%= message %></div>\n  <div class="player-error-screen__code" data-error-screen>Error colayer-error-screen__reload" data-error-screen><%= reloadIcon %></div>\n</div>\n')}get container(){return this.core.getCurrentContainer()}get attributes(){return{class:"player-error-screen","data-error-screen":""}}constructor(e){if(super(e),this.options.disableErrorScreen)return this.disable()}bindEvents(){this.listenTo(this.core,s.zW.ERROR,this.onError),this.listenTo(this.core,s.zW.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}bindReload(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.re_READY,(dReload()nder(){if(!thisurn"favicon"}get supportedVersion(){returnctor(e){so(this.core,s.zW.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,s.zW.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()}containerChanged(){ttainer,this._container,s.zW.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,s.zW.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,s.zW.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,s.zW.CONTAINER_ERROR,this.resetIcon),this.resetIcon()}disable(){super.disable(),this.resetIcon()}destroy(){super.destroy(),this.resetIcon()}createIcon(e){const t=(0,s.$)("<canvas/>");t[0].width=16,t[0].height=16;const i=t[0].getContext("2d");i.fillStyle="#000";const n=(0,s.$)(e).find("path").attr("d"),r=new Path2D(n);i.fill(r);const o=(0,s.$)('<link rel="shortcut icon" type="image/png"/>');return o.attr("href",t[0].toDataURL("image/png")),o}setPlayIcon(){this.playIcon||(this.playIcon=this.createIcon(R())),this.changeIcon(this.playIcon)}setPauseIcon(){this.pauseIcon||(this.pauseIcon=this.createIcon(k())),this.changeIcon(this.pauseIcon)}resetIcon(){(0,s.$)('link[rel="shortcut icon"]').remove(),(0,s.$)("head").append(this.oldIcon)}changeIcon(e){e&&((0,s.$)('link[rel="shortcut icon"]').remove(),(0,s.$)("head").append(e))}}class O extends s.lY{get name(){return"google_analytics"}get supportedVersion(){return{min:"0.5.0"}}constructor(e){super(e),this.container.options.gaAccount&&(this.account=this.container.options.gaAccount,this.trackerName=this.container.options.gaTrackerName?this.container.options.gaTrackerName+".":"Clappr.",this.domainName=this.container.options.gaDomainName,this.currentHDState=void 0,this.embedScript())}embedScript(){if(window._gat)this.addEventListeners();else{const e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("async","async"),e.setAttribute("src","//www.google-analytics.com/ga.js"),e.onload=()=>this.addEventListeners(),document.body.appendChild(e)}}addEventListeners(){this.container&&(this.listenTo(this.container,s.zW.CONTAINER_READY,this.onReady),this.listenTo(this.container,s.zW.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,s.zW.CONTAINER_STOP,this.onStop),this.listenTo(this.container,s.zW.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,s.zW.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,s.zW.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,s.zW.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,s.zW.CONTAINER_ERROR,this.onError),this.listenTo(this.container,s.zW.CONTAINER_PLs.container,s.zWis.os.listenTo(this.container,s.zW.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])}onReady(){is.(["VidVideo","Ended",this.container.playback.src])}onBuffering(){this.push(["Video","Buffering",this.container.playback.src])}onBufferFull(){this.push(["Video","Bufferfull",this.container.playback.src])}onError(){this.push(["Video","Error",this.container.playback.src])}onHD(e){const t=e?"ON":"OFF";t!==this.currentHDState&&(this.currentHDState=t,this.push(["Video","HD - "+t,this.container.playback.src]))}onPlaybackChanged(e){null!==e.type&&this.push(["Video","Playback Type - "+e.type,this.container.playback.src])}onDVR(e){const t=e?"ON":"OFF";thio","Seek",this.container.playback.src])}onVolumeChanged(){this.push(["Interaction","Volume",this.container.playback.src])}onFullscreen(){this.push(["Interaction","Fullscreen",this.container.playback.src])}push(e){const t=[this.trackerName+nction(e){this.elemen.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18ht",40:"down""c",68:"d",p",81:"q",82:"r",83:"s",84:"t",85:"u",869",121:"f10",122:"fMES_BY_CODE,eListener?function(nt.detachEvoid 0,D.sdexOf(t)},D.neatString=n t},D.extractKey=fuastKeyCode=-1,this.lastMoer=this.handler("up"),D.regent(window,"unloeturn function(i){var[D.MODIFIERS[s]]=i[D.MODIFIERS[s]+"Key"];for(D.arrayIncludes(D.MODIFIERS,D.keyNa(t.lastKeyCode)]=!0)preventDefault&&i.preventDefaultlize(e)];for(D.isString(t)&&(t=[t]),s=0;s<t.length;s++)n=t[s],r[n=D.modifiersAndKey(n+"")]?r[n].push(i):r[n]=[i];return this},D.prototype.unregisterKeys=function(e,t,i){var s,n,r,o=this["keys"+D.capitalize(e)];for(D.isString(t)&&(t=[t]),s=0;s<t.length;s++)if(r=t[s],r=D.modifiersAndKey(r+""),null===i)delete o[r];else if(o[r])for(n=0;n<o[r].length;n++)if(String(o[r][n])===String(i)){o[r].splice(n,1);break}return this},D.prototype.off=function(e){return this.unregisterKeys("down",e,nullregisterKeys(e,t,i)},D.prototype.down=function(e,t){return urn this.delegate("up",e,t)},D.prototype.lastKey=function(e){return e?this.lastMis.core&&this.core.activePlayback}get attributes(){return{class:"media-control","data-media-control":""}}get events(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}get template(){return(0,s.XK)('<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n <%  }; %>\n <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n <% } %>\n    </div>\n <% }; %>\n <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n <% renderContent(name); %>\n      </div>\n <% }; %>\n <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n <% }; %>\n <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n <% }; %>\n <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        ting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n <% render(settings.default); %>\n  </div>\n <% } %>\n <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n <% render(settings.left); %>\n  </div>\n <% } %>\n <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n <% render(settings.right); %>\n  </div>\n <% } et volume(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}get muted(){return 0===this.volume}constructor(e){super(e),this.persistConfig=this.options.persistConfig,this.currentPositionValsible=!1,this.fullScreenOnVideoTagSupported=null,this.setInitialVolume(),this.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},this.kibo=new P(this.options.focusElement),this.bindTOP,this.toate),this.listenTo(this.container,s.zW.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,s.zW.CONTAINER_SETTINGSUPDATE,this.settinER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,s.zW.CONTAINER_ENDED,this.ended),this.listenTo(this.container,s.zW.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,s.zW.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),"video"===this.container.playback.el.nodeName.toLowerCase()&&this.listenToOnce(this.container,s.zW.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))}disable(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()}enable(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())}play(){this.container&&this.container.play()}pause(){this.container&&this.container.pause()}stop(){this.container&&this.container.stop()}setInitialVolume(){const e=this.persistConfig?W.restore("volume"):100,t=this.container&&this.container.options||this.options;this.setVolume(t.mute?0:e,!0)}onVolumeChanged(){this.updateVolumeUI()}onLoadedMetadataOnVideoTag(){let e=this.playback&&this.playback.el;!q.fullscreenEnabled()&&e.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())}updateVolumeUI(){if(!this.rendered)return;this.$volumeBarContainer.find(".bar-fill-2").css({});const e=this.$volumeBarContainer.widthbar-element").removeClass("fill");const n=Math.ceil(this.volume/10);this.$vClass("fill"),this.s.$volumeIcon.append(V()),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(U()),this.applyButtonStyle(this.$volumeIcon)}changeTogglePlay(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(k()),this.$playStopToggle.append(B()),t.show()),thOVE_SEEKBAR,e)meClickind(".medis.container.play()"),this.$-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),e&&e.preventDefault())}startVolumeDrag(e){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),e&&e.preventDeeekBar&&this.seek(e),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notrang"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1}updateDrag(e){if(this.draggingSeekBar){e.preventDefault();let t=(e.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;t=Math.min(100,Math.max(t,0)),this.setSeekPercentage(t)}else this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}getVolumeFromUIEvent(e){return(e.pageX-this.$volumeBarContainer.off){e=Math.min(100,Math.max(e,0)),this.intendedVolume=e,this.persistConfig&&!t&&W.persist("volume",e);const i=()=>{this.container&&this.container.isReady?this.container.setVolume(e):this.listenToOnce(this.containe))};this.container?i():this.listenToOnce(this,s.zW.MEDIACONTROL_CONTAINERCHANGED,(()=>i()))}toggleFullscreen(){this.trigger(s.zW.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()}onActiveContainerChanged(){this.fullScreenOnVideoTagSupported=null,this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(s.zW.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(s.zW.MEDIACONTROL_CONTAINERCHANGED)}showVolumeBar(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")}hideVolumeBar(e=400){this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout((()=>this.hideVolumeBar()),e):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((()=>this.$volumeBarContainer.addClass("volume-bar-hide")),e)))}ended(){this.changeTogglePlay()}updateProgressBar(e){const t=e.start/e.total*100,i=e.current/e.total*100;this.$seekBarLoaded.css({left:`${t}%`,width:i-t+"%"})}onTimeUpdate(e){if(this.draggingSeekBar)return;const t=e.current<0?e.total:e.current;this.currentPositionValue=t,this.curre{if(null===this.currentPositionValue||null===this.currentDurationValue)return;this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==s.BT.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);const e=X(this.currentPositionValue),t=X(this.currentDurationValue);e!==this.displayedPosition&&(this.$position.text(e),this.displayedPosition=e),t!==this.displayedDuration&&(this.$duration.text(t),this.displayedDuration=t)}seek(e){if(!this.settings.seekEnabled)return;let t=(e.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return t=Math.min(100,Math.max(t,0)),this.container&&this.container.seekPercentage(t),this.setSeekPercentage(t),!1}setKeepVisible(){this.keepVisible=!0}resetKeepVisible(){this.keepVisible=!1}setUserKeepVisible(){this.userKeepVisible=!0}resetUserKeepVisible(){this.userKeepVisible=!1}isVisible(){return!this.$el.hasClass("media-control-hide")}shoigator.userAg,2e3),e&&(orStyle(!0)}hide(e=abled&&!1===this.ophis.$playStopToggle=e.find("button.media-control-button[data-playstop]"),this.$position=e.find(".media-control-indicator[data-position]"),this.$seekBarContainer=e.find(".bar-container[data-seekbar]"),this.$seekBarHover=e.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=e.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=e.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=e.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=e.find(".bar-container[data-volume]"),this.$volumeContainer=e.find(".drawer-container[data-volume]"),this.$volumeIcon=e.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()}resetIndicators(){this.displayedPosition=this.$position.textion=this.$duration.text()}initializeIcons(){const e=this.$el.find(".media-control-layer");e.find("button.media-control-button[data-play]").append(R()),e.find("button.media-control-button[data-pause]").append(k()),e.find("button.media-control-button[data-stop]").append(B()),this.$playPauseToggle.append(R()),this.$playStopToggle.append(R()),this.$volumeIcon.append(U()),this.$fullscreenToggle.append(G()),this.$hdIndicator.append(H())}setSeekPercentage(e){e=Math.max(Math.min(e,100),0),this.displayedSeekBarayedSeekBarPercentage=e,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:`${e}%`}),this.$seekBarScrubber.css({left:`${e}%`}))}seekRelative(e){eyEvents()e(-10))),this.btrl left",(()=>this.seekRelative(-15))),this.bindKeyAndShow("shift ctrl right",(()=>this.seekRelative(15))),["1","2","3","4","5","6","7","8","9","0"].forEach((e=>{this.bindKeyAndShow(e,(()=>{this.space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))}parseColors(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;const e=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",e),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}}applyButtonStyle(e){this.buttonsColor&&e&&(0,s.$)(e).find("svg path").css("fill",this.buttonsColor)}destroy(){(0,s.$)(document).unbind("mouseup",this.stopDragHandler),(0,s.$)(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),super.destroy()}configure(e){this.options.chromeless||e.source||e.sources?this.disable():this.enable(),this.trigger(s.zW.MEDIACONTROL_OPTIONS_CHANGE)}render(){const e=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings}));const t=s.pE.getStyleFor(M,{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout((()=>this.hide()),e),this.disabled&&this.hide()),s.Browser.isSafari&&s.Browser.isMobile&&(s.Browser.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),ll,this.setSeekPercentage(i),setTimeout((()=>{!this.settings.seekEnabled&&this.$seekBarContainer.addClass("seek-disablthis.options.width,height:this.options.height}),this.hideVolumeBar(0)}),0),this.parseColors(),this.highDefinitionUpdate(this.isHDt shouayback.getPlaybackType()!==s.BT.NO_OP||e)}get ateturn{click:"cls.poster.showP,thi,this.listenTo(this.container,s.zW.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,s.zW.CONTAINER_ENDED,this.onStop)}onError(e)Play(){tayRequested=!1,this.update()}updatePlayButton(e){!e||this.options.chromeless&&!this.options.allowUserInteraction?this.hidePlayButton():this.showPlayButton()}showPlayButton(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))}hidePlayButton(){this.$playButton.hide(),this.$el.removeClass("clickable")}clicked(){if(!this.hasStartedPlaying)return this.options.chromeless&&!this.options.allowUserInteraction||(this.playRequested=!0,this.update(),this.container.playback&&(this.container.playback._consented=!0),this.container.play()),!1}shouldHideOnPlay(){return!this.container.playback.isAudioOnly}update(){if(!this.shouldRender)return;let e=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(e),this.updatePoster()}updatePoster(){this.hasStartedPlaying?this.hidePoster():this.showPoster()}showPoster(){this.container.disableMediaControl(),this.$el.show()}hidePoster(){this.container.enableMediaControl.append(e[0]),this.options.poster&&void 0===this.options.poster.custom){const e=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+e+")"}),this.removeVideoElementPoster()}else this.options.poster&&(this.$el.css({background:this.options.poster.custom}),this.removeVideoElementPoster());this.container.$el.append(this.el),this.$playWrapper=this.$el.fion=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");let t=this.options.mback&&this.container.playback.$el&&this.container.playback.$el[0]&&this.container.playback.$el[0].removeAttribute&&this.container.playback.$el[0].removeAttribute("poster")}}var ie={};ie.styleTagTransform=m(),ie.setAttributes=u(),ie.insert=d().bind(null,"head"),ie.domAPI=l(),ie.insertStyleElement=f(),o()(v.Z,ie),v.Z&&v.Z.locals&&v.Z.locals;const{formatTime:se}=s.Utils;class ne extends s.nH{get name(){return"seeiveTime}get useActualLiveTime(){return this.actualLiveTime&ull,this.mediaControl.optioverTimeDiff=0)}bindEvents(){this.listenTo(this.mediaControl,s.zW.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,s.zW.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,s.zW.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,s.zW.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,s.zW.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,s.zW.CONTAINER_TIMEUPDATE,this.updateDuration))}onContainerChanged(){this.stopListening(),this.bindEvents()}updateDuration(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()}showTime(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()}hideTime(){this.hoveringOverSeekBar=!1,this.update()}calculateHoverPosition(e){const t=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(t/this.mediaControl.$seekBarContainer.width(),0))}getSeekTime(){let e,t,i,s;return this.useActualL Date((new Date).getTime()-this.actualLiveServerTimeDiff),new Date(i),i.setHours(0,0,0,0)),this.duration,this.hoverPosition,this.duration):(this.hoverPosition,this.duration),{seekTime:e,secondsSinceMidnight:t}}update(){if(this.rendered)if(this.shouldBeVisible()){const e=this.getSeekTime(),t=se(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();const t=se(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);t!==this.displayedDuration&&(this.$durationEl.text(t),this.displayedDuration=t)}else this.$durationEl.hide();this.$el.show();constidth();let n=this.hoverPosition*i;Math.max(0,Math.min(n,i-s)),this.$el.css("left",n)}else this.$el.hide(),this.$el.css("left","-100%")}shouldBeVisible(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}render(){const e=s.pE.getStyleFor(public_seek_time,{baseUrl:this.options.baseUrl});this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=-duration]"insert=d().bind(null,"head"),re.domAPI=l(),re.insertStyleElement=f(),o()(v.Z,re),v.Z&&v.Z.locals&&v.Z.locals;class oe extends s.Gv{get name(){return"spinner"}get supportedVersion(){return{min:"0.5.0"}}get attributes(){return{"data-spinner":"",class:"spinner-three-bounce"}}constructor(e){super(e),this.template=(0,s.XK)("<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n"),this.showTimeout=null,this.listenTo(this.container,s.zW.CONTAINthis.options.b.contper(eE"}bindEveis.onStop),_ADD,this.onSalAtt}onBuffering(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++}onBufferFull(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,thiStatsAddebufferiibutes=u(),le.insert=d().bind(null,"head"),le.domAPI=l(),le.insertStyleElement=f(),o()(v.Z,le),v.Z&&v.Z.locals&&v.Z.locals;class ce extends s.Gv{get name(){return"watermark"}get supportedVersion(){return{min:"0.5.0"}}get template(){return(0,s.XK)('<div class="clappr-watermark" data-watermark data-watermark-<%=po>>\n<% if(typeof imageLink !== \'undefined\') { %>\n<a target=_blank href="<%= imageLink %>">\n<% } %>\n<img src="<%= imageUrl %>">\n<% if(typeof imageLink !== \'undefined\') { %>\n</a>\n<% } %>\n</div>\n')}constructor(e){super(e),this.configure()}bindEvents(){this.listenTo(this.container,s.zW.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,s.zW.CONTAINER_STOP,this.onStop),this.listenTo(this.container,s.zW.CONTAINER_OPTIONS_CHANGE,this.configure)}configure(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()}onPlay(){this.hidden||this.$el.show()}onStop(){this.$el.hide()}render(){this.$el.hide();const e=s.pE.getStyleFor(public_watermark,{baseUrl:this.options.baseUrl}),t={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(t)),this.$el.append(e[0]),this.container.$el.append(this.$el),this}}},6594:(e,t,i)=>{"use strict";i.d(t,{$:()=>r(),L6:()=>V,Browser:()=>u,MD:()=>Re,lY:()=>W,QY:()=>Oe,Ae:()=>De,kX:()=>q,PZ:()=>j,zW:()=>U,LY:()=>Ke,aN:()=>xe,Zb:()=>N,BT:()=>H,rG:()=>K,pE:()=>ce,Gv:()=>Z,nH:()=>X,Utils:()=>k,XK:()=>ae});const s={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="};var n=i(3284),r=i.n(n);const o=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],a=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*tor:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],l={},c=function(e,t){let i=e.split(".",2);t.fullVersion=e,i[0]&&(t.majorVersion=parseInt(i[0])),i[1]&&(t.minorVersion=parseInt(i[1]))},d=function(e,t,i){let s="["==t.substr(0,1)?new RegExp(t,"g"):t;const n=e.split(s,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),i.fullVersion=e,n&&n[0]&&(i.majorVersion=parseInt(n[0])),n&&n[1]&&(i.minorVersion=parseInt(n[1]))},h=function(e){let t,i=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===i[1]){if(t=e.match(/\bOPR\/(\d+)/),null!=t)return{name:"Opera",version:parseInt(t[1])};if(t=e.match(/\bEdge\/(\d+)/),null!=t)return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(i.splice(1,1,"Android WebView"),i.splice(2,1,gator.userAgeegacyIE=!!window.ActiveXObject,l.isIE=l.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),l.isIE11=/trident.*rv:11/i.test(navigator.userAgent),l.isChromecast=l.isChrome&&/CrKey/i.test(navigator.userAgent),l.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),l.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),l.isAndroid=/Android/i.test(navigator.userAgent),l.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),l.isWin8App=/MSAppHost/i.test(navigator.userAgent),l.isWiiU=/WiiU/i.test(navigator.userAgent),l.isPS4=/PlayStation 4/i.test(navigator.userAgent),l.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),l.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),l.name=h.name,l.version=h.version,l.uew RegExp(i.identifier.toLowerCase()).execl!=s&&s[1]&&c(s[1],e)}else c(s[1],e);break}}return e}(),l.os=function(){let e={},t=l.userAgent.toLowerCase();for(let i of a)e()).exec(t);if(null!=s){if(e.name=i.name,e.group=i.group,i.version)d(i.version,i.versionSeparator?i.versionSeparator:".",e);else if(s[1])d(s[1],i.l!=s&&s[1]&&d(s[1],i.versionSeparator?i.versionSeparator:".",e)}break}}return e}(),l.isWindows=/^Windows$/i.test(l.os.group),l.isMacOS=/^Mac OS$/i.test(l.os.g}(),l.device=functdow.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function v(e,t){if(t)for(const i in t){const s=Object.getOwnPropertyDescriptor(t,i);s?Object.defineProperty(e,i,s):e[i]=t[i]}return e}function A(e,t){class i extends e{constructor(..reenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFn()}else{if(e.mozRequestFullScreen)return e.mozRequestFullSc.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cllScreen?e.webkitCancelFullScreen():e.ction(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}};class y{static get params(){const e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}static get hashParams(){const e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}static parse(enst i=/\+]+)=?([^&]*)/g,n=e=>decodeURIComponent(e.replace(i," ")),r={};for(;t=s.exec(e);)r[n(t[1]).to=i.match(/[0-9]+[hms]+/g)||[];if(s.length>0){const e={h:3600,m:60,s:1};s.forEach((function(i){if(i){const s=i[i.length-1],n=parseInt(i.slice(0,ielse i&&(t=parseInt(i,10));return t}function _(e){urn e-parseFloat(e)+1>=0}function S(){return window.navigator&&window.navigator.language}function C(e,t){let i=(t=Object.assign({inline:!1,muted:!1,timeout:250,type:"vielement:document.creatlay(),r=setT=>o(!1,e))):ohis.options.recycleVideo&&"video"===e&&f.length>0?f.shift():document.createElement(e)}static garbage(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(r()(e).children().remove(),Object.values(e.attributes).forEach((t=>e.removeAttribute(t.name))),f.push(e))}}R.options={recycleVideo:!1};class w{constructor(e=500){this.delay=e,this.lastTime=0}handle(e,t,i=!0){let s=(new Date).getTime(),n=s-this.lastTime;n<this.delay&&n>0&&(t(),i&&e.preventDefault()),this.lastTime=s}}const k={Config:class{static _defaultConfig(){return{volume:{value:100,parse:parseInt}}}static _defaultValueForrn}}static _creatic restore(e){return u.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._[this._createKeyspace(e)]):this._defaultValueFor(e)}static persist(e,t){if(u.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}},Fullscreen:E,QueryString:y,DomRecycler:R,assign:v,extend:A,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;const i=(e=parseInt(e/1e3))%60,s=(e=parseInt(e/60))%60,n=(e=parseInt(e/60))%24,r=parseInt(e/24);let o="";return r&&r>0&&(o+=r+":",n<1&&(o+="00:")),(n&&n>0||t)&&(o+=("0"+n).slice(-2)+":"),o+=("0"+s).slice(-2)+":",o+=("0"+i).slice(-2),o.trim()},seekStringToSeconds:T,uniqueId:_,currentScriptUrl:function(){const e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""},isNumber:b,requestAnimationctiooid 0!==t.find((t=>e.toLowerCase()===t.toLowerCase()))},canAutoPlayMedia:C,Media:s,DoubleEventHandler:w},L="font-weight: bold; font-size: 13px;",I="color: #ff8000;"+L,O="color: #ff0000;"+L,D=["color: #0000ff;"+L,"color: #006600;"+L,I,O,O],P=["debug","info","warn","error","disabled"];class N{get level(){return pdate","plaontainer:hover","container:timeupdate","container:progress"],this.level=e,this.previousLevel=this.level,this.offLevel=t}debug(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}info(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}wa.log(e,3,Array.prototype.slice.call(arguments,1))}onOff(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+P[this.level],I)}log(e,t,i){if(this.EXCLUDE_LIST.indexOf(i[0])>=0)return;if(ton(){this.getce().warn.apply(this.getInstance(),arguments)},N.error=function(){thrror.appl=Array.prototype.slice,x=/\s+/,B=function(e,t,i,s){if(!i)return!0;if("object"==typeof i){for(const n in i)e[t].apply(e,[n,i[n]].concat(s));return!1}if(x.test(i)){const n=i.split(x);for(let i=0,r=n.length;i<r;i++)e[t].apply(e,[n[i]].concat(s));return!1}return!0},F=function(e,t,i,s){let n,r=-1;const o=e.length,a=t[0],l=t[1],c=t[2];!function d(){try{switch(t.length){case 0:for(;++r<o;)(n=e[r]).callback.call(n.ctx);return;case ),d()}}()};class U{on(e,t,i){return B(this,"on",e,[t,i])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:i,ctx:i||this}),this):this}once(e,t,i){let s;if(!B(this,"once",e,[t,i])||!t)return this;const n=()=>this.off(e,s);return s=function(){n(),t.apply(this,arguments)},this.on(e,s,i)}off(e,t,i){let s,n,r,o,a,l,c,d;if(!this._events||!B(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(o=e?[e]:Object.keys(this._events),a=0,l=o.length;a<l;a++)if(e=o[a],r=this._events[e],r){if(this._events[e]=s=[],t||i)for(c=0,d=r.length;c<d;c+=n.callback._callback||i&&i!==n.context)&&s.push(n);s.length||delete this._events[e]}return this}trigger(e){const t=this.name||this.constructor.name;if(N.debug.apply(N,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;const i=M.call(arguments,1);if(!B(this,"trigger",e,i))return this;const s=this._events[e],n=this._events.all;return s&&F(s,i,t,e),n&&F(n,arguments,t,e),this}stopListening(e,t,i){let s=this._listeningTo;if(!s)return this;const n=!t&&!i;i||"object"!=typeof t||(i=this),e&&((s={})[e._listenId]=e);for(const r in s)(e=s[r]).off(t,i,this),(n||0===Object.keys(e._events).length)&&delete this._listeningTo[r];return this}static register(e){U.Custom||(U.Custom={});let t="string"==typeof e&&e.toUpperCase().trim();t&&!U.Custom[t]?U.Custom[t]=t.toLowerCase().split("_").map(((e,t)=>0===t?e:e=e[0].toUpperCase()+e.slice(1))).join(""):N.error("Events","Error when register event: "+e)}static listAvailableCustomEvents(){return U.Custom||(U.Custom={}),Object.keys(U.Custom).filter((e=>"string"==typeof U.Custom[e]))}}const $={listenTo:"on",listenToOnce:"once"};Object.keys($).forEach((function(e){U.prototype[e]=function(t,i,s){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=_("l"))]=t,s||"object"!=typeof i||(s=this),t[$[e]](i,s,this),this}})),U.PLAYER_READY="ready",U.PLAYER_RESIZE="resize",U.PLAYER_FULLSCREEN="fullscreen",U.PLAYER_PLAY="play",U.PLAYER_PAUSE="pause",U.PLAYER_STOP="stop",U.PLAYER_ENDED="ended",U.PLAYER_SEEK="seek",U.PLAYER_ERROR="playererror",U.ERROR="error",U.PLAYER_TIMEUPDATE="timeupdate",U.PLAYER_VOLUMEUPDATE="volumeupdate",U.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",U.PLAYBACK_PROGRESS="playback:progress",U.PLAYBACK_TIMEUPDATE="playback:timeupdate",U.PLAYBACK_READY="playback:ready",U.PLAYBACK_BUFFERING="playback:buffering",U.PLAYBACK_BUFFERFULL="playback:bufferfull",U.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",U.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",U.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",U.PLAYBACK_BITRATE="playback:bitrate",U.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",U.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",U.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",U.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",U.PLAYBACK_DVR="playback:dvr",U.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",U.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",U.PLAYBACK_ENDED="playback:ended",U.PLAYBACK_PLAY_INTENT="playback:play:intent",U.PLAYBACK_PLAY="playback:play",U.PLAYBACK_PAUSE="playback:pause",U.PLAYBACK_SEEK="playback:seek",U.PLAYBACK_SEEKED="playback:seeked",U.PLAYBACK_STOP="playback:stop",U.PLAYBACK_ERROR="playback:error",U.PLAYBACK_STATS_ADD="playback:stats:add",U.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",U.PLAYBACK_LEVEL_SWITCH="playback:level:switch",U.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",U.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",U.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available",U.PLAYBACK_AUDIO_CHANGED="playback:audio:changed",U.CORE_CONTAINERS_CREATED="core:containers:created",U.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",U.CORE_OPTIONS_CHANGE="core:options:change",U.CORE_READY="core:ready",U.CORE_FULLSCREEN="core:fullscreen",U.CORE_RESIZE="core:resize",U.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",U.CORE_MOUSE_MOVE="core:mousemove",U.CORE_MOUSE_LEAVE="core:mouseleave",U.CONTAINER_PLAYBACKSTATE="container:playbackstate",U.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",U.CONTAINER_BITRATE="container:bitrate",U.CONTAINER_STATS_REPORT="container:stats:report",U.CONTAINER_DESTROYED="container:destroyed",U.CONTAINER_READY="container:ready",U.CONTAINER_RESIZE="container:resize",U.CONTAINER_ERROR="container:error",U.CONTAINER_LOADEDMETADATA="container:loadedmetadata",U.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",U.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",U.CONTAINER_AUDIO_AVAILABLE="container:audio:available",U.CONTAINER_AUDIO_CHANGED="container:audio:changed",U.CONTAINER_TIMEUPDATE="container:timeupdate",U.CONTAINER_PROGRESS="container:progress",U.CONTAINER_PLAY="container:play",U.CONTAINER_STOP="container:stop",U.CONTAINER_PAUSE="container:pause",U.CONTAINER_ENDED="container:ended",U.CONTAINER_CLICK="container:click",U.CONTAINER_DBLCLICK="container:dblclick",U.CONTAINER_CONTEXTMENU="container:contextmenu",U.CONTAINER_MOUSE_ENTER="container:mouseenter",U.CONTAINER_MOUSE_LEAVE="container:mouseleave",U.CONTAINER_MOUSE_UP="container:mouseup",U.CONTAINER_MOUSE_DOWN="container:mousedown",U.CONTAINER_SEEK="container:seek",U.CONTAINER_SEEKED="container:seeked",U.CONTAINER_VOLUME="container:volume",U.CONTAINER_FULLSCREEN="container:fullscreen",U.CONTAINER_STATE_BUFFERING="container:state:buffering",U.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",U.CONTAINER_SETTINGSUPDATE="container:settingsupdate",U.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",U.CONTAINER_MEDIACONTROL_SHOW="container:mediaEDIACONTROL_HIDE="container:mediacontrol:hide",U.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable"ROL_EN",U.CONTAINER_OPTIONS_CHANGE="container:options:change",U.MEDIACONTROL_RENDERED="mediacontrol:rendered",U.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",U.MEDIACONTROL_SHOW="mediacontrol:show",U.MEDIACONTROL_HIDE="mediacontrol:hide",U.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",U.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",U.MEDIACONTROL_PLAYING="mediacontrol:playing",U.MEDIACONTROL_NOTPLAYING="mediacontroll:containerchanged",U.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";class V extends U{get options(){return this._options}constructor(e={}){super(e),this._options=e,this.uniqueId=_("o")}}const z=/^(\S+)\s*(.*)$/;class G extends V{get tagName(){return"div"}get events(){retuc"),this._ensureElement(),this.delegateEvents()}$(eListening(),this.undelegateEvents(),this}setElement(e,t){return this.$el&&this.undelegateEvents(),this.$el=r().zepto.isZ(e)?e:r()(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}delegateEvents(e){e||(e=this.events),this.undelegateEvents();for(const t in e){let i=e[t];if(i&&i.constructor!==Function&&(i=this[e[t]]),!i)continue;const s=t.match(z);let n=s[1],r=s[2];n+=".delegateEvents"+this.cid,""===r?this.$el.on(n,i.bind(this)):this.$el.on(n,r,i.bind(this))}return this}undelegateEvents(){return this.$el.off(".delegateEvents"+this.cid),this}_ensureElement(){if(this.el)this.setElement(this.el,!1);else{const e=r().extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);const t=r()(R.create(this.tagName)).attr(e);this.setElement(t,!1)}}}const K=class extends V{get name(){(){return{FATAL:ARN:"WARN",INFO:"INFO"}}constructor(e={},t){super(e),this.core=t}createError(e){this.core?this.core.trigger(U.ERROR,e):N.warefix:!0}){const i=this.constructor&||i,n=this.i18n||this.core&&tt.assign({},o,e,{code:t.useCodePrefix?r:e.code});if(n&&a.level==K.Levels.FATAL&&!a.UI){const e={title:n.t("default_error_title"),message:n.t("default_error=e}return this.playerError?this.playerError.createError(a):N.warn(s,"Playerot defined. Error: ",a),a}},j=Y;class H extends G{get isAudioOnly(){return!1}get isAdaptive(){return!1}get ended(){return!1}get i18n(){return this._i18n}get buffering(){return!1}constructor(e,t,i){super(e),this.settings={},this._i18n=t,this.playerError=i,this._consented=!1}consent(e){"function"==typeof e&&e()}play(){}pause(){}stop(){}seek(e){}seekPercentage(e){}getStartTimeOffset(){return 0}getDuration(){return 0}isPlaying(){return!1}get isReady(){return!1}get hasClosedCaptionsTracks(){return this.closedCaptionsTracks.length>0}get closedCaptionsTracks(){return[]}get closedCaptionsTrackId(){return-1}set closedCaptionsTrackId(e)hDefinitionInUse(){return!1}mute(){}unmute(){}volume(e){}configure(e){this._options=r().extend(!0,this._options,e)}attemptAutoPlay(){this.canAutoPlay(((e,t)=>{e&&this.play()}))}canAutoPlay(e){e(!0,null)}}Object.assign(H.prototype,j),H.extend=function(e){return A(H,e)},H.canPlay=(e,t)=>!1,H.VOD="vod",H.AOD="aod",H.LIVE="live",H.NO_OP="no_op",H.type="playback";class W extends V{get playerError(){return this.container.playerError}constructor(e){super(e.options),this.container=e,this.enabled=!0,this.bindEvents()}enable(){this.enabled||(this.bindEvents(),this.enabled=!0)}disable(){this.enabled&&(this.stopListening(),this.enabled=!1)}bindEvents(){}destroy(){this.stopListening()}}Object.assign(W.prototype,j),W.extend=function(e){return A(Whis.enabled=!0,this.bindEvents()}bindEvents(){}enable(){this.enabled||(this.bindEvents(),this.enabled=!0)}disable(){this.enabled&&(this.stopListening(),this.enabled=!1)}getExternalInterface(){return{}}destroy(){this.stopListening()}}Object.assign(q.prototype,j),q.extend=function(e){return A(q,e)},q.type="core";class X extends G{get playerError(){return this.core.playerError}constructor(e){super(e.options),this.lInterfau2029":"u2029"},te=/\\|'|\r|\n|\t|\u2028|\u2029/g,ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},se=new RegExp("[&<>\"']","g"),ne=function(e){return null===e?"":(""+e).replace(se,(function(e){return ie[e]}))},re=0,oe=function(e,t){var i,s=new RegExp([(Q.escape||J).source,(Q.interpolate||J).source,(Q.evaluate||J).source].join("|")+"|$","g"),n=0,r="__p+='";e.replace(s,(function(t,i,s,o,a){return r+=e.slice(n,a).replace(te,(function(e){return"\\"+ee[e]})),i&&(r+="'+\n((__t=("+i+"))==null?'':escapeExpr(__t))+\n'"),s&&(r+="'+\n((__t=("+s+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\nceURL=/microtemplates/source["+re+++"]";try{i=new Function(Q.variable||"obj","escapeExpr",r)}catch(e){throw e.source=r,e}if(t)return i(t,ne);var o=function(e){return i.call(this,e,ne)};return o.source="function("+(Q.variable||"obj")+"){\n"+r+"}",o};oe.settings=Q;const ae=oe,le={getStyleFor:function(e,t={baseUrl:""}){return r()('<style class="clappr-style"></style>').html(ae(e.toString())(t))}},ce=le;var de=i(3379),he=i.n(de),ue=i(7795),pe=i.n(ue),fe=i(569),ge=i.n(fe),me=i(3565),ve=i.n(me),Ae=i(9216),Ee=i.n(Ae),ye=i(4589),Te=i.n(ye),_e=i(2663),be={};be.styleTagTransform=Te(),be.setAttributes=ve(),be.insert=ge().bind(null,"head"),be.domAPI=pe(),be.insertStyleElement=Ee(),he()(_e.Z,be);const Se=_e.Z&&_e.Z.locals?_e.Z.locals:void 0;class Ce extends G{get name(){return"Container"}get attributes(){return{class:"container","data-container":""}}get events(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}get ended(){return this.playback.ended}get buffering(){return this.playback.buffering}get i18n(){return this._i18n}get hasClosedCaptionsTracks(){return this.playback.hasClosedCaptionsTracks}get closedCaptionsTracks(){return this.playback.closedCaptionsTracks}get closedCaptionsTrackId(){return this.playback.closedCaptionsTrackId}set closedCaptionsTrackId(e){this.playback.closedCaptionsTrackId=e}get audioTracks(){return this.playback.audioTracks}get currentAudioTrack(){return this.playback.currentAudioTrack}constructor(e,t,i){super(e),this._i18n=t,this.currentTime=0,this.volume=100,this.playback=e.playback,this.playerError=i,this.settings=r().extend(!0,{},this.playback.settings),this.isReady=!1,this.mediaControlDisabled=!1,this.plugins=[this.playback],this.dblTapHandler=new w(500),this.clickTimer=null,this.clickDelay=200,this.actionsMetadata={},this.bindEvents()}bindEvents(){this.listenTo(this.playback,U.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,U.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,U.PLAYBACK_READY,this.ready),this.listenTo(this.playback,U.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,U.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,U.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,U.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,U.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,U.PLAYBACK_BITRATE,this.updateBplaybackStateChanged),this.listenTo(this.playback,U.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,U.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),theMediaControl),this.li,this.listenTo(this.playback,U.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,U.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,U.PLAYBACK_PAUSE,th_STOP,this.stopped),this.listenTo(this.playback,U.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,U.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,U.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),VAILCK_AUDIO_CHANGED,this.audioChanged)}subtitleAvailable(){this.trigger(U.CONTAINER_SUBTITLE_AVAILABLE)}subtitITLE_CHANGED,e)}audioAvailable(e){this.trigger(U.CONTGED,e)}playbackStateChanged(e){this.trigger(U.CONTAINER_PLAYBACKSTATE,e,this.trigger(U.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}updateBitrate(e){this.trigger(U.CONTAINER_BITRATE,e)}statsReport(e){this.trigger(U.CONTAINER_STATS_REPORT,e)}getPlaybackType(){return this.(){thilugins.forEach((e=>e.destroy())),this.$el.remove()}setStyle(e){this.$el.css(e)}animate(e,t){return this.$el.animate(e,t).promise()}ready(){this.isReady=!0,this.trigger(U.CONTAINER_READY,this.name)}isPlaying(){return this.playback.isPlaying()}getStartTimeOffset(){return this.playburation(){return this.playback.getDuration()}error(e){this.isReady||this.ready(),this.trigger(U.CONTAINER_ERROR,e,this.name)}loadedMetadata(e){this.trigger(U.CONTAINER_LOADEDMETADATA,e)}tiEUPDATE,eonsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}paused(){this.trigger(U.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}stopped(s.actionsMetadata.playEvent=e,this..stopEvent=e,this.playback.stop(e),this.currentTime=0}switchAudioTrent=e,thchromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((()=>{this.clickTimer&&this.trigger(U.CONTAINER_Cut(this.clickTimer),this.clickTimer=null}dblClicked(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(U.CONTAINER_DBLCLICK,this,this.name))}dblTap(e){this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(()=>{this.cancelClicked(),this.trigger(U.CONTAINER_DBLCLICK,this,this.name)}))}onContextMenu(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(U.CONTAINER_Came)}onSeekedration();if(e>=0&&e<=100){const i=t*(e/100);this.seek(i)}}setVolume(e){this.volume=parseFloat(e),this.trigger(U.CONTAINER_VOLUME,this.volume,.plugins.ns.chromeless&&!this.options.allowUserInteraction||this.trigger(U.CONTAINER_MOUSE_UP)}mouseDown(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(U.CONTAINER_MOUSE_DOWN)}settingsUpdate(){this.settings=this.playback.settings,this.trigger(U.CONTAINER_SETTINGSUPDATE)}highDefinitionUpdate(e){this.trigger(U.CONTAINER_HIGHDEFINITIONUPDATE,e)}isHighDefinitionInUse(){return this.playback.isHighDefinitionInUse()}disableMediaControl(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(U.CONTAINER_MEDIACONTROL_DISABLE))}enableMediaControl(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(U.CONTAINER_MEDIACONTROL_ENABLE))}updateStmoveClass("chromeless"):this.$el.addClass("chromeless")}enableResizeObserver(){this.disableResizeObserver(),this.resizeObserverInterval=setInterval((()=>this.checkResize()),500)}der(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}checkResize(){const e={width:this.el.clientWidth,height:this.el.clientHeight},{width:t,height:i}=this.currentSize||{};(i!==e.height||t!==e.width)&&(this.currentSize=e,this.trigger(U.CONTAINER_RESIZE,e))}configure(e){this._options=r().extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(U.CONTAINER_OPTIONS_CHANGE)}render(){const e=ce.getStyleFor(Se.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.layback.render().el),this.updateStyle(),this.checkResize(),this.e}Object.assign(Ce.prototype,j);class Re extends V{get options(){return this._options}set options(e){this._options=e}constructor(e,t,i,s){super(e),this._i18n=i,this.loader=t,this.playerError=s}createContainers(){return r().Deferred((e=>{e.resolve(this.options.sources.map((e=>this.createContainer(e))))}))}findPlaybackPlugin(e,t){return this.loader.playbackPlugins.filter((i=>i.canPlay(e,t)))[0]}createContainer(e){let t=null,i=this.options.mimeType;"object"==typeof e?(t=e.source.toString(),e.mimeType&&(i=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);let s=Object.assign(Object.assign({},this.options),{src:t,mimeType:i});const n=this.findPlaybackPlugin(nce(a,U.CONTAINER_READY,(()=>l.resolve(a))),a}addrm=Te(),we.setAttributes=ve(),we.insert=ge().bind(null,"head"),we.domAPI=pe(),we.insertStyleElement),Le.insert=ge().bind(null,"head"),Le.domAPI=pe(),Le.insertStyleElement=Ee(),he()(_e.Z,Le);const Ie=_e.Z&&_e.Z.locals?_e.Z.locals:void 0;class Oe extends G{get events(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}get attributes(){return{"data-player":"",tabindex:9999}}get isReady(){return!!this.ready}get i18n(){return this.getPlugin("strings")||{t:e=>e}}get mediaControl(){return this._mediaControl||(this._mediaControl=this.getPlugin("meControl=new X(this)),this._dummyMediaControl}get activeContainer(){return this._activeContainer}set activeContainer(e){this._activeContainer=e,this.trigger(U.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}get activePlayback(){return this.activeContainer&&this.activeContainer.playback}get activePlPlayback.$el.find("video")[0]:this.activePlayback.el}constructor(e){super(e),this.playerError=new K(e,this),this.configureDomRecycler(),this.firstResize=!0,this.plugins=[],this.containers=[],this._boundFullscreenHandler=()=>this.handleFullscreenChange(),r()(document).bind("fullscreenchange",this._boundFullscreenHandler),r()(document).bind("MSFullscreenChange",this._boundFullscreenHandler),r()(document).bind("mozfullscreenchange",this._boundFullscreenHandler),u.isMobile&&r()(window).bind("resize",(e=>{this.handleWindowResize(e)}))}configureDomRecycler(){let e=this.options&&this.options.playback&&this.options.playback.recycleVideo;R.configure({recycleVideo:e})}createContainers(e){this.defer=r().Deferred(),this.defer.promise(this),this.containerFactory=new Re(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}prepareContainers(){this.containerFactory.createContainers().then((e=>this.setupContainers(e))).then((e=>this.resolveOnContainersReady(e)))}updateS.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:r()(window).width(),height:r()(window).height()},this.resize(this.currentSiwidth}px`):(this.el.style.height=`${e.height}`,this.el.style.width=`${e.width}`),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}enableResizeObserver(){this.disableResizeObserver(),this.resizeObserverInterval=setInterval((()=>{this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight})}),500)}triggerResize(e){(this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width)&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(U.CORE_RESIZE,e))}disableResizeObserver(){this.resizeObserverInterval&&clearIugins.filter((t=>t.name===e))[0]}load(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.=r().extend(!0cument).unbind("fullscreenchange",this._boundFullscreenHandler),r()(document).unbind("MSFullscreenning()}handleFullscreenChange(){this.trigger(U.CORE_FULLSCREEN,this.isFullscreen()),this.updateSirtrait";thiTION_CHANGED,{event:e,orientation:this._screenOrientation}))}removeContainer(e){this.stopListening(e),this.containers=this.containers.filter((t=>t!==e))}setupContainer(e){this.listenTo(e,U.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}setupContainers(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(U.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}renderContainers(){this.containers.forEach((e=>this.el.appendChild(e.render().el)))}createContainer(e,t){const i=this.containerFactory.createContainer(e,t);return this.setupContainer(i),this.el.appendChild(i.render().el),i}getCurrentContainer(){return this.activeContainer}getCurrentPlayback(){tPlaybackType(){return this.activeContainer&&this.activeContainer.getPlaybackType()}isFullscreen(){const e=E.fullscreenElement();return e&&e===this.el||e&&e===this.activePlaybackEl||this.activePlaybackEl&&this.activePlaybackEl.webkitDisplayingFullscreen||!1}toggleFullscreen(){if(this.isFullscreen()){const e=u.isiOS?this.activeeferenceError(e)}),600))),!u.isiOS&&this.$el.addClass("fullscreen")}}onMouseMove(e){thishis.this.load(t,e.mimeType||this.options.mimeType),this.trigger(U.CORE_OPTIONS_CHANGE,e),this.containers.forEach((e=>e.configure(this.options)))}appendToParent(){const e=ce.getSty{baseUrl:this.options.baseUrl});this.$el.append(e[0]),this.options.includeResetStyle&&this.$el.append(t[0]),(!this.$el.parent()||!this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}render(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();const e={width:this.options.width,height:this.options.height};return this.previope,j);class De extends V{get loader(){return tonstructorhis.player=e}create(){return this.options.loader=this.loader,this.core=new Oe(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}addCorePlugins(){return this.loader.corePlugins.forEach((e=>{const t=new e(this.core);this.core.addPlugin(t),this.setupExternalInterface(t)})),this.core}setupExternalInterface(e){const t=e.getExternalInterface();for(const i in t)this.player[i]=t[i].bind(e)}}const Pe=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/;class Ne{static parse(e=""){const t=e.match(Pe)||[],[,i,s,n]=t;return void 0===i?null:new Ne(i,s,n)}constructor(e,t,i){this.major=parseInt(e||0,10),this.minor=parseInt(t||0,10),this.patch=parseInt(i||0,10)}compare(e){let t=this.major-e.major;return t=t||this.minor-e.minor,t=t||this.patch-e.patch,t}inc(e="patch"){return void 0!==this[e]&&(this[e]+=1),this}satisfies(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}toString(){return`${this.major}.${this.minor}.${this.patch}`}}const Me=(e,t)=>e&&t?Object.entries(e).filter((([,e])=>e.type===t)).reduce(((e,[t,i])=>(e[t]=i,e)),{}):{},xe},t="0.5.0";return class i{static get registeredPlaybacks(){return[...e.playbacks]}static get registeredPlugins(){const{plugins:t}=e;return{core:Me(t,"core"),container:Me(t,"container")}}static checkVersionSupport(e){const{supportedVersion:i,name:s}=e.prototype;if(!i||!i.min)return N.warn("Loader",`missing ${s}`),!1;const n=i.max?Ne.parse(i.max):Ne.parseN.warn("Loader",`unsupported plugin ${s}: Clappr version ${t} does not match required range [${r},${n})`),!1)}static registerPlugin(t){if(!t||!t.prototype.name)return N.warn("Loader",`missing information to register plugin: ${t}`),!1;i.checkVersionSupport(t);const s=e.plugins;if(!s)return!1;ype.name]=t,!0}static registerPlayback(t){if(!t||!t.prototype.name)return!1;i.checkVersionSupport(t);let{playbacks:s}=e;const n=s.findIndex((e=>e.prototype.name===t.prototype.name));if(n>=0){const e=s[n];s.splice(n,1),N.warn("Loader",`overriding playback entry: ${e.name} - ${e}`)}return e.playbacks=[t,...s],!0}static unregisterPlugin(t){if(!t)return!1;const{plugins:i}=e;return!!i[t]&&(delete i[t],!0)}static unregisterPlayback(t){if(!t)return!1;let{playbacks:i}=e;const s=i.findIndex((e=>e.prototype.name===t));return!(s<0||(i.splice(s,1),e.playbacks=i,0))}static clearPlugins(){e.plugins={}}static clearPlaybacks(){e.playbacks=[]}constructor(t=[],s=0){this.playerId=s,this.playbackPlugins=[...e.playbacks];const{core:n,container:r}=i.registeredPlugins;this.containerPlugins=Object.values(r),this.corePlugins=Object.values(n),Array.isArray(t)||this.validateExtnalPlugins(t)}groupPluginsByType(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}removeDups(e,t=!1){const i=e.reduceRight(((e,i)=>(e[i.prototype.name]&&t||(e[i.prototype.name]&&delete e[i.prototype.name],e[i.prototype.name]=i),e)),Object.create(null)),s=[];for(let e in i)s.unshift(i[e]);return s}addExternalPlugins(e){const t="boolean"!=typeof e.loadExternalPluginsFirst||e.loadExternalPluginsFirst,s="boolean"!=typeof e.loadExternalPlaybacksFirst||e.loadExternalPlaybacksFirst;if((e=this.groupPluginsByType(e)).playback){const t=e.playback.filter((e=>(i.checkns=s?this.removeDups(t.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(t),!0)}if(e.container){const s=e.container.filter((e=>(i.checkVersionSupport(e),!0)));this.containerPlugins=t?this.removeDups(s.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(s),!0)}if(e.core){const s=e.core.filter((e=>(i.checkVersionSupport(e),!0)));this.corePlugins=t?this.removeDups(s.concat(this.corePlugins)):this.removeDups(this.corePluginteExternalPluginsType(e){["playback","container","core"].forEach((t=>{(e[t]||[]).forEach((e=>{const i="external "+e.type+" plugin on "+t))}}})();var Be=i(51),Fe={};Fe.styleTagTransform=Te(),Fe.setAttributes=ve(),Fe.insert=ge().bind(null,"head"),Fe.domAPI=pe(),Fe.insertStyleElement=Ee(),he()(Be.Z,Fe);const Ue=Be.Z&&Be.Z.locals?Be.Z.locals:void 0,$e={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401Eogv=$e.ogg,$e["3gp"]=$e["3gpp"];const Ve={wav:["audio/wav"],mp3:["audio/m="mp4a.40.5"'_video"}get supportedVersion(y(){const e=this.options.src;let t=Ke._mimeTypesForUrl(e,Ve,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||ze.indexOf(t[0])>=0}get attributes(){return{"data-html5-video":""}}get events(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}get ended(){return this.el.ended}get buffering(){return this._isBuffering}get isLive(){return this.getPlaybackType()===H.LIVE}get dvrEnabled(){return this.getDuration()>=this._minDvrSize&&this.isLive}get minimumDVRSizeConfig(){return this.options.playback&&this.options.playback.minimumDvrSize}get isValidMinimumDVRSizeConfig(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}get sourceMedia(){return this._src}constructor(...e){super(...e),this._destroyed=!1,this._loadStarted=!1,this._isBuffering=!1,this._playheadMoving=!1,this._playheadMovingTimer=null,this._stopped=!1,this._ccTrackId=-1,this._setupSrc(this.options.src),this.options.playback||(this.options.playback=this.options||{}),this.options.playback.disableContextMenu=this.options.playback.disableContextMenu||this.options.disableVideoTagContextMenu,this._minDvrSize=this.isValidMinimumDVRSizeConfig?this.minimumDVRSizeConfig:60;const t=this.optioni?"auto":this.options.preload);let s;this.options.poster&&("string"==typeof this.options.poster?s=this.options.poster:"string"==typeof this.options.poster.url&&(s=this.options.poster.url)),r().extend(!0,this.el,{muted:this.options.mute,defaultMuted:this.options.mute,loop:this.options.loop,poster:s,preload:i||"metadata",crossOrigin:t.crossOrigin,"x-webkit-playsinline":t.playInline}),(tVideoTagysinline:"playsiacks),this.options.autoPlay&&this.attemptAutoPlay()}configure(e){super.configure(e),this.el.loop=e:this.option.el),C(e,t)}_setupExternalTracks(e){this._externalTracks=e.map((e=>({kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src})))}load(e){this._setupSrc(e)}_setupSrc(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}_onLoadedMetadata(e){this._handleBufferingEvents(),this.trigger(U.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();const t=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==H.LIVE&&t&&this._checkInitialSeek()}_onDurationChange(){this._updateSeettekEnakType(){const e="audio";retur(this.isPlaying()||this.el._consented)super.consent(e);else{let ddEventListener("error",();let e=this.el.play();ris._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(U.PLAYBACK_STOP)}volume(e){0===e?(thnmute()l.paused&._deteneIfPlayheadMoving.biMovingTimeOnCheck=t,this._handleBufferingEvents()}_onWaiting(){this._loadStarted=!0,this._handleBufferingEvents()}_onLoadedData(){this._loadStarted=!0,this._handleBufferingEvents()}_onCanPlay(){this._handleBufferingEvents()}_onPlaying(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(U.PLAYBACK_PLAY)}_onPause(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(U.PLAYBACK_PAUSE)}_onSeeking(){th}_o._stopped&&(e.HAVE_FUTURE_DATuffering=t,t?this.trigger(U.PLAYBACK_BUFFERING,this.nas.el.error,level:i?K.Levels.WARN:K.Levels.FATAL});i?N.warn(this.name,"HTML5 unknown error: ",s):this.trigger(U.Pange&&this.el.textTrbage(this.el)}_updateDvr(e){this.trigger(U.PLAYBACK_DVR,e),this.trigger(U.PLAYBACK_STATS_ADD,{dvr:e})}seek(e){e<0&&(N.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currecurre.end(0)-this.el.seekab(U.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},tthis.el.buffered.length)return;let e=[],t=0;for(let i=0;i<this.el.buffered.length;i++)e=[...e,{start:this.el.brrentTime>=e[i].start&&this.el.currentTime<=e[i].end&&(t=i);const i={start:e[t].start,current:e[t].end,CK_PROGRESS,i,e)}_typeFor(e){let t=Ke._mimeTypesForUrl(e,$e,this.options.mimeType);return 0===t.length&&(t=Ke._mimeTypesForUrl(e,Ve,this.options.mimeType)),(t[0]||"").split(";")[0]}_ready(){this._isReadyState||(this._isReadyState=!0,this.trigger(U.PLAYBACK_READY,this.name))}_checkForClosedCaptions(){if(tccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(U.PLAYBACK_SUBTITLE_AVAILABLE);const e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}_handleTextTrackChange(){let e=this.closedCaptionsTracks.find((e=>"showing"===e.track.mode))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(U.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}get isHTML5Video(){return this.name===Ke.prototype.name}get closedCaptionsTracks(){let e=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((e=>"subtitles"===e.kind||"captions"===e.kind)).map((t=>({id:e++,name:t.label,track:t})))}get closedCaptionsTrackId(){return this._ccTrackId}set closedCaptionsTrackId(e){if(!b(e))return;let t,i=this.closedCaptionsTracks;if(-1!==e){if(t=i.find((t=>t.id===e)),!t)return;if("showing"===t.track.mode)return}i.filter((e=>"hidden"!==ehis._ccTrackId=e,this.trigger(U.PLAYBACK_SUBTITLE_CHANGED,{id:e})}get template(){return ae('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracmenu",(()=>!1)),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();const e=ce.getStyleFor(Ue.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}}Ke._mimeTypesForUrl=function(e,t,i){const s=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1];let n=i||s&&t[s.toLowerCase()]||[];return n.constructor===Array?n:[n]},Ke._canPlay=function(e,t,i,s){let n=Ke._mimeTypesForUrl(i,t,s);const r=document.createElement(e);return!!n.filter((e=>!!r.canPlayType(e).replace(/no/,"")))[0]},Ke.canPlay=function(e,t){return Ke._canPlay("audio",Ve,e,t)||Ke._canPlay("video",$e,e,t)};var Ye=i(8500),je={};je.styleTagTransform=Te(),je.setAttributes=ve(),je.insert=ge().bind(null,"head"),je.domAPI=pe(),je.insertStyleElement=Ee(),he()(Ye.Z,je);const He=Ye.Z&&Ye.Z.locals?Ye.Z.locals:void 0;(class extends H{get name(){return"no_op"}get supportedVersion(){return{min:"0.5.0"}}get template(){return ae("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%><p>\n")}get attributes(){return{"data-no-op":""}}optionsons.baseUris.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(U.PLAYBACK_READY,this.name);const i=!(!this.options.poster||!this.options.poster.eNum=(threturn;const e=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);let t;try{t=new Uint32Array(e.data.buffer)}catch(i){t=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);const s=e.data;for(let e=0;e<s.length;e++)t[e]=s[e]}const i=t.length,s=6*Math.random()+4;let n=0,r=0;for(let e=0;e<i;)n<0&&(n=s*Math.random(),r=255*Math.pow(Math.random(),.4)<<24),n-=1,t[e++]=r;this.context.putImageData(e,0,0)}_loop(){this._stop||(this._noise(),this._animationHandle=g((()=>this._loop())))}destroy(){this._animationHandle&&(m(this._animationHandle),this._stop=!0)}_animate(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}).canPlay=e=>!0,xe.registerPlugin(class extends q{get name(){return"strings"}get supportedVersion(){return{min:"0.5.0"}}constructor(e){super(e),this._initializeMessages()}t(e){const t=this._language(),i=this._messages.en;return(t&&this._messages[t]||i)[e]||i[e]||e}_language(){return this.core.options.language||S()}_initializeMessages(){this._messages=r().extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurck zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser untersttzt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente.",default_error_title:"No foi possvel reproduzir o vdeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vdeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproduccin de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este vdeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el vdeo.",default_error_message:"Se ha producido un problema al cargar el vdeo."},ru:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"      . ,   ."},bg:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"       . ,    .",default_error_title:"     .",default_error_message:"     ."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Dsactiv",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vido. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vido.",default_error_message:"Un problme est survenu lors du chargement de la vido."},tr:{live:"canl",back_to_live:"canl yayna dn",disabled:"Engelli",playback_not_sul bir tarayc ile deneyin."},et:{live:"Otselekanne"ekande juurde",disabled:"Keelatud",playback_not_supported:"Teievideo taasesitust. Proovige kasutada muud brauserit."},ar:{live:"",back_to_live:"  ",disabled:"",playback_not_supported:"       .    .",default_error_title:"   .",default_error_message:"    ."},zh:{live:"",back_to_live:"",disabled:"",playback_not_supported:"",default_error_title:"",default_error_message:""}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar,this._messages["zh-CN"]=this._messages.zh}}),xe.registerPlugin(class extends q{get name(){return"sources"}get supportedVersion(){return{min:"0.5.0"}}bindEvents(){this.listenTo(this.core,U.CORE_CONTAINERS_CREATED,this.onContainersCreated)}onContainersCreated(){const e=this.core.containers.filter((e=>"no_op"!==e.playback.name))[0]||this.core.containers[0];e&&this.core.containers.forEach((t=>{t!==e&&t.destroy()}))}})},3874:(e,t,i)=>{"use strict";i.d(t,{D1:()=>d,VS:()=>f,X0:()=>p,hx:()=>a,i8:()=>h,v_:()=>u});var s=i(7060),n=i(2649),r=i(3202),o=i(6768);const a={ru:0,en:1,es:2,fr:3,de:4,ja:5,it:6,ko:7,zh:8,pt:9,other:10},l="https://api.vp.rambler.ru",c="/api/v3",d={UNKNOWN_ERROR:{code:"unknown_error",message:"unknown error"},RECORD_NOT_FOUND:{code:"video_not_found",message:"video not found"},RECORD_NOT_PUBLISHED:{code:"video_publish_finish",message:"publishing of video finished"},RECORD_NOT_PROCESSED:{code:"video_processing",message:"video is now processing"},RECORD_ACCESS_DENIED_SITE:{code:"access_denied",message:"access to this video is denied in your country or on this website"},RECORD_ACCESS_DENIED_COUNTRY:{code:"geo_access_denied",message:"video you requested cannot be played in your country"},TRANSLATION_NOT_FOUND:{code:"video_not_found",message:"video not found"},TRANSLATION_ACCESS_DENIED_SITE:{code:"access_denied",message:"access to this video is denied in your country or on this website"},TRANSLATION_ACCESS_DENIED_COUNTRY:{code:"geo_access_denied",message:"video you requested cannot be played in your country"},ACCESS_RESTRICTED:{code:"access_restricted",message:"you cannot watch this video"},NO_BROADCAST:{code:"no_broadcast",message:"no broadcast"},NO_SIGNAL:{code:"no_signal",message:"no signal"},NO_STREAM:{code:"no_stream",message:"no stream"},LIVE_FINISHED:{code:"live_finished",message:"live finished"},NO_CONNECTION:{code:"no_connection",message:"no connection"},ANNOUNCE:{code:"announce",message:""},TIMEOUT:{code:"timeout",message:"operation was aborted by timeout"},NOT_RESPOND:{code:"not_respond",message:"api does not respond"},INVALID_RESPONSE:{code:"invalid_response",message:"invalid response"},CACHE_NOT_READY:{code:"cache not ready",message:"cache not ready"}},h=async e=>{var t;const i={params:{referrer:e.referrer,accountCode:e.channel}},a=r.xq.startTimer({endpoint:"/settings/getPlayerSettingsByAccount"});let h;try{const e=`${l}${c}/settings/getPlayerSettingsByAccount`,t=await(0,o.W)(e,{method:"post",credentials:"same-origin",timeout:1e4,body:JSON.stringify(i)});h=await t.json()}catch(e){if((0,n.Tb)(e,i),"AbortError"===e.name)throw new s.MS(d.TIMEOUT);throw new s.MS(d.NOT_RESPOND)}finally{a.observeDuration()}if((!h.success||!h.result)&&h.error){const{type:e,subtype:r,extra:o}=h.error,a=[e,r,o].filter(Boolean).join("_"),l=new s.MS(null!==(t=d[a])&&void 0!==t?t:d.UNKNOWN_ERROR);throw d[a]||(0,n.Tb)(l,Object.assign({},i)),l}if(!h.result){const e=new s.MS(d.INVALID_RESPONSE);throw(0,n.Tb)(e,i),e}return h.result},u=async e=>{var t;const{id:i,adTemplateId:a,playerTemplateId:h,multiplayerFilterId:u,suggestFilterId:p,pauseSuggestFilterId:f,suggestMobileFilterId:g,pauseSuggestMobileFilterId:m,referrer:v,live:A,sessionId:E,channel:y,withCredentials:T,checkReferrerCount:_}=e,b=!!E&&!!y,S={params:{referrer:v}};"string"==typeof i?S.params.uuid=i:S.params.id=i,null!=a&&(S.params.adTemplateId=a),null!=h&&(S.params.playerTemplateId=h),null!=u&&(S.params.multiplayerFilterId=u),null!=p&&(S.params.suggestFilterId=p),null!=f&&(S.params.pauseSuggestFilterId=f),null!=g&&(S.params.suggestMobileFilterId=g),null!=m&&(S.params.pauseSuggestMobileFilterId=m),b&&(S.sessionId=E,S.params.account=y),_&&(S.params.checkReferrerCount=_);const C=A?"string"==typeof i?"livestreams":"translations":"records",R=b?"previewPlayerData":"getPlayerData",w=r.xq.startTimer({endpoint:`/${C}/${R}`});let k;try{let e=`${l}${c}/${C}/${R}`;b||(e+=`?params=${encodeSON.stringify(S.params))}`);const t=await(0,o.W)(e,Object.assign({method:b?"post":"get",credentials:T?"include":"same-origin",timeout:1e4},b&&{body:JSON.stringify(S)}));k=await t.json()}catch(e){if((0,n.Tb)(e,S),"AbortError"===e.name)throw new s.abort()),i)}returne strict";i.r(t),i.d(t,{Advertisement:()=>Mn,default:()=>Mn});var s={};i.r(s),i.d(s,{rambler:()=>un,universal:()=>pn});var n={};i.r(n),i.d(n,{rambler:()=>vn,universal:()=>An});var r,o=i(3436),a=i(6594);!function(e){e[e.VAST_XML_PARSING_ERROR=100]="VAST_XML_PARSING_ERROR",e[e.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",e[e.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",e[e.VAST_UNEXPECTED_AD_TYPE=200]="VAST_UNEXPECTED_AD_TYPE",e[e.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",e[e.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",e[e.VAST_UNEXPECTED_MEDIA_FILE=203]="VAST_UNEXPECTED_MEDIA_FILE",e[e.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",e[e.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",e[e.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",e[e.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_01]="VAST_MEDIA_FILE_NOT_FOUND",e[e.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",e[e.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",e[e.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",e[e.VAST_NONLINEAR_PLAYING_FAILED=500]="VAST_NONLINEAR_PLAYING_FAILED",e[e.VAST_NONLINEAR_DIMENSIONS_ERROR=501]="VAST_NONLINEAR_DIMENSIONS_ERROR",e[e.VAST_NONLINEAR_LOADING_FAILED=502]="VAST_NONLINEAR_LOADING_FAILED",e[e.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",e[e.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",e[e.VPAID_ERROR=901]="VPAID_ERROR"}(r||(r={}));const l=e=>Object.values(r).includes(e),c="complete",d="clickThrough",h="error",u="firstQuartile",p="impress",m="viewUndetermined",v="midpoint",A="mute",E="pause",y="playerCollapse",T="exitFullscreen",_="playerExpand",b="fullscreen",S="progress",C="resume",R="rewind",w="skip",k="start",L="thirdQuartile""creativeView",M={clickThrough:d,closeLinear:P,complete:c,creativeView:N,error:h,exitFullscreen:T,firstQuartile:u,fullscreen:b,iconClick:O,iconView:D,impression:p,midpoint:v,mute:A,nototherAdInteraction:"otherAdInteraction",paewart:k,thirdQuartile:L,timeSpentViewing:"timeSpentViewing",unmute:I,viewable:f,viewUndetermined:m},x="acceptInvitation",B="adCollapse",F="close",U={acceptInvitation:x,adCollapse:B,close:F};var V,z=i(5722);!function(e){e.CDATA="cdata",e.DOCUMENT="document",e.ELEMENT="element",e. G=e=>{const tdeType){case 1:return V.ELEMENT;case 3:case 4:return V.TEXT;case 9:return V.DOCUMENT;default:throw new Error("Unsupported element type")}})(e),i={type:t};if(e instanceof Element){const t=(e=>0===e.attributes.length?void 0:Object.fromEntries(Array.from(e.attributes).map((e=>{var t;return[e.nodeName,null!==(t=e.nodeValue)&&void 0!==t?t:void 0]}))))(e);t&&(i.attributes=t),i.name=e.nodeName.toLowerCase()}else(e instanceof Text||e instanceof CDATASection)&&(i.text=(e=>{var t;return null===(t=e.nodeValue)||void 0===t?void 0:t.replace("<![CDATA[","").replace("]]>","").trim()})(e));const s=(e=>{var t,i;if(!e.hasChildNodes())return;const s=Array.from(e.childNodes).filter((e=>[1,3,4].includes(e.nodeType))),n=[];for(const e of s){const s=G(e);e instanceof Text&&!((null!==(i=null===(t=s.text)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>0)||n.push(s)}return n})(e);return s&&(i.elements=s),i},K=G,Y=e=>{var t;return null!==(t=e.elements)&&void 0!==t?t:[]},j=(e,t)=>Y(e).find((({name:e=""})=>e.toUpperCase()===t.toUpperCase())),H=(e,t)=>"string"==typeof t?((e,t)=>Y(e).filter((({name:e=""})=>e.toUpperCase()===t.toUpperCase())))(e,t):Y(e),W=e=>Y(e)[0],q=e=>{const t=e&&W(e);return t&&t.text},X=e=>{var t;return null!==(t=e.attributes)&&void 0!==t?t:{}},Z=(e,t)=>X(e)[t],Q=new DOMParser,J=e=>{if("string"==typeof e){const n=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,r=e.match(n);if(r){const e=(s=r[1],60*parseInt(s,10)*60*1e3+(i=r[2],60*parseInt(i,10)*1e3)+(t=r[3],1e3*parseInt(t,10))+(r[5]?parseInt(r[5],10):0));if(!isNaN(e))return e}}var t,i,s},ee=e=>(e=>/^\d+(\.\d+)?%$/g.test(e))(e)?e:J(e),te=e=>j(e,"linear"),ie=e=>{const t=W(e),i=t&&j(t,"creatives");return i&&H(i).find(te)},se=e=>{const{event:t,offset:i}=X(e),s=q(e);return{event:t,offset:i&&ee(i),uri:s}},ne=(e,t)=>{const i=e&&ie(e),s=i&&j(i,"Linear"),n=s&&j(s,"TrackingEveacking");if(r&&r.length>0){const e=r.map(se);if(!t)return e;const i=e.filter((({event:e})=>e===t));if(i.length>0)return i}},re=e=>{const t=`${e}`.match(/\d+/g);return parseInt((null==t?void 0:t[0])||"",10)},oe=e=>/\d+/.test(e)?re(e):e,ae=e=>{const t=e&&ie(e),i=t&&j(t,"linear"),s=i&&j(i,"Icons"),n=s&&H(s,"Icon");if(n&&n.length>0)return n.map((e=>Object.assign(Object.assign(Object.assign(Object.assign({},(e=>{const{duration:t,height:i,offset:s,program:n,pxratio:r,width:o,xPosition:a="right",yPosition:l="top"}=X(e);return{duration:t&&J(t)||void 0,height:i&&re(i)||void 0,offset:s&&J(s)||void 0,program:n,pxratio:r&&parseInt(r,10)||void 0,width:o&&re(o)||void 0,xPosition:a&&oe(a),yPosition:l&&oe(l)}})(e)),(e=>{const t=j(e,"StaticResource"),i=j(e,"HTMLResource"),s=j(e,"IFrameResource");return t?{staticResource:q(t)}:i?{htmlResource:q(i)}:s?{iFrameResource:q(s)}:{staticResource:q(e)}})(e)),(e=>{const t=H(e,"IconViewTracking").map((e=>q(e))).filter(Boolean);return 0===t.length?{}:{iconViewTracking:t}})(e)),(e=>{const t=j(e,"IconClicks"),i=t&&j(t,"IconClickThrough"),s=t&&H(t,"IconClickTracking").map((e=>q(e))).filter(Boolean);return{iconClickThrough:i&&q(i),iconClickTracking:s&&s.length>0?s:void 0}})(e))st i=Z(e,"sequence"),s=Z(t,"sequence"),n=i&&parseInt(i,10),r=s&&parseInt(s,10);return"string"!=typeof n||"string"!=typeof r?0:n<r?-1:n>r?1:0},de=e=>{const t=e&&j(e,"VAST"),i=t&&H(t,"Ad");return i&&i.length>0?i:[]},he=e=>{const t=Z(e,"sequence"),i=t&&parseInt(t,10);if("number"==typeof i&&!isNaN(i))return i},ue=e=>Boolean(he(e)),pe=e=>{const t=de(e);return Array.isArray(t)&&t.filter(ue).length>1},fe=e=>Boolean(j(e||{},"Wrapper")),ge=e=>Boolean(j(e||{},"Inline")),me=e=>{const t=j(e,"Wrapper"),i=t&&j(t,"VastAdTagUri");return i&&q(i)},ve=e=>{const t=e&&W(e),i=t&&j(t,"ViewableImpression"),s=i&&H(i,"Viewable");if(s&&s.length>0)return s.map((e=>{var t;return null!==(t=q(e))&&void 0!==t?t:""})).filter(Boolean)},Ae=e=>{const t=e&&ie(e),i=t&&j(t,"UniversalAdId"),s=i&&q(i),n=t&&j(t,"Linear"),r=n&&j(n,"MediaFiles"),o=r&&H(r,"MediaFile");if(=>{const t=q(e),{apiFramework:i,bitrate:n,codec:r,delivery:o,height:a,id:l,maintainAspectRatio:c,maxBitrate:d,minBitrate:h,scalable:u,type:p,width:f}=X(e);return{apiFramework:i,bitrate:n,codec:r,delivery:o,height:a,id:l,maintainAspectRatio:c,maxBitrate:d,minBitrate:h,scalable:u,src:t,type:p,universalAdId:s,width:f}}))},Ee=e=>{let t=(e=>{const t=e&&ie(e),i=t&&j(t,"Linear"),s=i&&j(i,"MediaFiles"),n=s&&H(s,"InteractiveCreativeFile");if(n&&n.length>0)return n.map((e=>{const{apiFramework:t,type:i}=X(e);return{apiFramework:t,src:q(e),type:i}}))})(e);if(t)return t;const i=Ae(e);return i&&(t=i.filter((({apiFramework:e=""})=>"vpaid"===(null==e?void 0:e.toLowerCase()))).map((({apiFramework:e,src:t,type:i})=>({apiFramework:e,src:t,type:i}))),t.length>0)?t:void 0},ye=e=>{const t=e&&ie(e),i=t&&j(t,"Linear");return i&&j(i,"VideoClicks")},Te=e=>{const t=ye(e),i=t&&j(t,"ClickThrough");return i&&q(i)},_e=e=>{const t=e&&ie(e),i=t&&j(t,"Linear"),s=i&&Z(i,"skturn s&&ee(st t=(e=>{const t=/<Linear([\s\S]*)<\/Linear/gm.exec(e);return null==t?void 0:t[1]})(e),i=t&&(e=>{const t=/<AdParameters[\s\w="]*>([\s\S]*)<\/AdParameters>/gm.exec(e);return null==t?void 0:t[1].replace(/[\n\s]*<!\[CDATA\[[\n\s]*/,"").replace(/[\n\s]*\]\]>[\n\s]*$/,"").replace(/\]\]\]\]><!\[CDATA\[>/,"]]>").trim()})(t),s=!!t&&(e=>{const t=/<AdParameters[\s]*xmlEncoded="(.*?)">/gim.exec(e);return"true"===(null==t?void 0:t[1])})(t);return{AdParameters:i,xmlEncoded:s}},Se=(e,t)=>{const i=new Image;return i.src=((e,t={})=>{let i=e;const s=(e=>{const t={};return Object.keys(e).forEach((i=>{t[i.toUpperCase()]=e[i]})),t})(t);return s.CACHEBUSTING||(s.CACHEBUSTING=Math.round(1e10*Math.random())),s.TIMESTAMP||(s.TIMESTAMP=(new Date).toISOString()),Object.keys(s).forEach((e=>{const t=encodeURIComponent(s[e]);i=i.replace(new RegExp("\\["+e+"\\]","gm"),t)})),i})(e,t),i},Ce=(e,{errorCode:t,tracker:i=Se})=>{e.forEach((({ad:e,parsedXML:s})=>{const n=e&&(e=>{const t=e&&W(e),i=t&&H(t,"Error");if(i&&i.length>0)return i.map((e=>{var t;return null!==(t=q(e))&&void 0!==t?t:""})).filter(Boolean)})(e)||(e=>{const t=e&&j(e,"VAST"),i=t&&H(t,"Error");if(i&&i.length>0)return i.map((e=>{var t;return null!==(t=q(e))&&void 0!==t?t:""})).filter(Boolean)})(s);n&&n.map((e=>e&&i(e,{errorCode:t})))}))},Re=e=>(t,{data:i={},tracker:s=Se})=>{t.forEach((({ad:t})=>{const n=t&&e(t);n&&(n&&"string"==ty&&s(e,i))))}))},we=(...e)=>t=>{const i=[];return e.length>0&&e.forEach((e=>{const s=e(t);Array.isArray(s)&&s.length>0&&i.push(...s.map((e=>({uri:e}))))})),i},ke=e=>t=>ne(t,e),Le={[d]:Re(we((e=>{const t=e&&ye(e),i=t&&H(t,"ClickTracking");if(i&&i.lenge=>{var t;return null!==(t=q(e))&&void 0!==t?t:""})).filter(Boolean)}),(e=>{const t=ye(e),i=t&&H(t,"CustomClick");if(i&&i.length>0)return i.map((e=>{var t;return null!==(t=q(e))&&void 0!==t?t:""})).filter(Boolean)}))),[P]:Re(ke(P)),[c]:Re(ke(c)),[N]:Re(ke(N)),[h]:Ce,[T]:Re(ke(T)),[u]:Re(ke(u)),[b]:Re(ke(b)),[O]:(e,{data:t={},tracker:i=Se})=>{const{iconClickTracking:s}=t;if(Array.isArray(s))for(const e of s)i(e,Object.assign({},t))},[D]:(e,{data:t={},tracker:i=Se})=>{const{iconViewTracking:s}=t;if(Array.isArray(s))for(const e of s)i(=>{const t=e&&W(e),i=t&&j(t,"ViewableImpression"),s=i&&H(i,"NotViewable");if(s&&s.length>0)return s.map((e=>{var t;return null!==(t=q(e))&&void 0!==t?t:""})).filter(Boolean)}))),[E]:Re(ke(E)),[y]:Re(ke(y)),[_]:Re(ke(_)),[S]:(e,{data:t={},tracker:i=Se})=>{const{progressUri:s}=t;s&&i(s,Object.assign({},t))},[C]:Re(ke(C)),[R]:Re(ke(R)),[w]:Re(ke(w)),[k]:Re(ke(k)),[L]:Re(ke(L)),[I]:Re(ke(I)),[f]:Re(we(ve)),[m]:Re(we((e=>{const t=e&&W(e),i=t&&j(t,"ViewableImpression"),s=i&&H(i,"ViewUndetermined");if(s&&s.length>0)returl!==(t=q(e))&&void 0!==t?t:""})).filter(Boolean)})))},Ie=e=>t=>((e,t)=>{const i=e&&ie(e),s=i&&j(i,"NonLinearAds"),n=s&&j(s,"TrackingEvents"),r=n&&H(n,"Tracking");if(r&&r.length>0){const e=r.map((e=>{const{event:t}=X(e);return{event:t,uri:q(e)}}));if(!t)return e;const i=e.filter((({event:e})=>e===t));if(i.length>0)return i}})(t,e),Oe={[x]:Re(Ie(x)),[B]:Re(Ie(B)),[F]:Re(Ie(F))},De=e=>e.contentDocument||e.contentWindow&&e.contentWindow.document,Pe="srcdoc"in document.createElement("iframe"),Ne=()=>{const e=document.createElement("iframe");return e.setAttribute("sandbox","allow-forms allow-popups allow-scripts allow-same-origin"),e.setAttribute("loading","eager"),e.style.margin="0",e.style.padding="0",e.style.border="none",e.style.width="0",e.style.height="0",e.style.position="absolute",e},Me=(e,t)=>new Promise(((i,s)=>{const n=((e,t)=>`<!DOCTYPE html>\n<html>\n  <head><meta charset='UTF-8'></head>\n  <body style='margin:0;padding:0'>\n  <script type='text/javascript'>window.parent.postMessage('${e}_ready', '${t}');<\/script>\n  </body>\n</html>`)(t,(()=>{const e=window.location;return e.origin?e.origin:e.protocol+"//"+e.hostname+(e.port?":"+e.port:"";const t=De(r);if(!t)throw new TypeError("iframe content document is not a Document");t.write(n)}catch(t){e.removeChild(r),Pe?(r=Ne(),r.src="about:srcdoc",r.srcdoc=n,e.appendChild(r)):s(t)}const o=({data:e})=>{e===`${t}_ready`&&(window.removeEventListener("message",o),i(r))};window.addEventListener("message",o,!1)}));var xe;const Be=(e=>{let t=-1;return()=>"videoAdContainer_"+ ++t})(),Fe=Symbol("hidden");xe=Fe;const Ue=class{constructor(e,t){if(this[xe]={destroyed:!1,id:Be(),iframe:void 0,readyPromise:void 0},!(e instanceof Element))throw new TypeError("placeholder is not an Element");this.element=(()=>{const e=document.createElement("div");return e.classList.add("mol-video-ad-container"),e.style.width="100%",e.style.height="100%",e})(),this.isOriginalVideoElement=Boolean(t),t?this.videoElement=t:(this.videoElement=((e=document)=>{const t=e.createElement("video");return t.style.width="100%",t.style.height="100%",t})(),this.element.appendChild(this.videoElement)),e.appendChild(this.element)}async addScript(e,t={}){var i;if(this.isDestroyed())throw new Error("VideoAdContainer has been destroyed");let{iframe:s}=this[Fe];s||(s=await Me(this.element,this[Fe].id),this[Fe].iframe=s,this.executionContext=s.contentWindow);const n=null===(i=De(s))||void 0===i?void 0:i.body;return((e,{async:t=!1,defer:i=!1,type:s,placeholder:n}={})=>{if(!e)throw new TypeError('Missing required "src" parameter');return new Promise(((r,o)=>{const a=document.createElement("script");let l=n;a.type=null!=s?s:"text/javascript",a.async=t,a.defer=i,a.onerror=()=>o(new URIError(`The script ${e} is not accessible.`)),a.onload=()=>r(a),l||(l=document.currentScript?document.currentScript.parentNode:document.head),a.src=e,null==l||l.appendChild(a)}))})(e,Object.assign({placeholder:n},t))}addSlot(e,t){if(t("VideoAdContainer has been destroyed");this.slotElement||(this.slotElement=((e,t,i)=>{const s=document.createElement("DIV");return Object.assign(s.style,{border:"0px",cursor:"pointer",height:`${i}px`,left:"0px",margin:"0px",padding:"0px",position:"absolute",top:"0px",width:`${t}px`}),e.appendChild(s),s})(this.element,e,t))}destroy(){const e=new Promise((e=>{setTimeout((()=>{var t;null===(t=this.element.parentNode)||void 0===t||t.removeChild(this.element),e()}),1e3)}));return this.element.style.zIndex="-9999",this[Fe].destroyed=!0,ereturn this[Fe].destroyed}},$e={"3gp":"video/3g,flv:"video/x-flv",m3u8:"application/x-mpegURL",m4v:"video/mp4",mov:"video/quicktime",mp4:"video/mp4",mpd:"application/dash+xml",ogv:"video/ogg",ts:"video/MP2T",webm:"video/webm",wmv:"video/x-ms-wmv"},Ve=(e,t)=>{const{src:i,type:s}=t;return e.canPlayType(onst t=e.match(/\.([^./?]+)(\?[^/]+)?$/i),i=t&&t[1];return i&&$e[i]||"video/"+i})(i||""))},ze=e=>{const t=Number(e.width)||0,i=Number(e.height)||0;return{aspectRatio:i?Math.floor(t/i*10)/10:0,height:i,width:t}},Ge=(e,t)=>((e,t)=>{const i=ze(t);return e.slice(0).sort(((e,t)=>{const s=ze(e),n=ze(t),r=Math.abs(i.width-s.width),o=Math.abs(i.width-n.width);return Math.abs(i.aspectRatio-s.aspectRatio)-Math.abs(i.aspectRatio-n.aspectRatio)||r-o}))})(e,t)[0],Ke=(e,t,i,{getMediaFile:s=Ge})=>{const n=i.getBoundingClientRect(),r=Ae(e),o=null==r?void 0:r.filter((e=>Ve(t,e)));return o&&s(o,n)},Ye=(e,t,i)=>{const s=(...n)=>(e.removeEventListener(t,s),i(...n));return e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}},{progress:je}=M,He=(e,t)=>(...i)=>{try{e(...i)}catch(e){null==t||t.errtFullscreen:qe,playerCollapse:Xe,playerExpand:Ze}=M,{pause:Qe,resume:Je}=M,{rewind:et}=M,{skip:tt}=M,it=()=>{const e=document.createElement("button");return e.classList.add("mol-vast-skip-control"),e.type="button",e.innerHTML="skip",e.style.position="absolute",e.style.bottom="15px",e.style.right="15px",e},{error:st}=M,nt="volumeChanged",rt="finish",ot="adProgress",{complete:at,firstQuartile:lt,midpoint:ct,start:dt,thirdQuartile:ht}=M,ut=(e,t)=>100*e/t,pt=(e,t)=>ut(e,t)>=99,{mute:ft,unmute:gt}=M,mt=e=>e.muted||0===e.volume,{impression:vt,creativeView:At}=M,Et=(e,t)=>{let i=String(e);for(;i.length<t;)i="0"+i;return i},yt=e=>{floor(e/1e3%60),n=e%1e3;return Et(t,2)+":"+Et(i,2)+":"+Et(s,2)+"."+Et(n,3)},{progress:Tt}=M,_t=e=>1e3*e,bt=({offset:e,uri:t})=>{const i="number"==typeof e||Boolean(e&&(e=>/^\d+(\.\d+)?%$/g.test(e)&&!isNaN(parseFloat(e)))(e)),s="string"==typeof t&&t.length>0;return i&&s},St=(e,t)=>"number"==typeof e?e:parkThrough:Ct}=M,Rt=()=>{const e=document.createElement("a");return e.classList.add("mol-vast-clickthrough"),e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0",e.style.top="0",e},wt=[({videoElement:e,element:t},i,{clickThroughUrl:s,pauseOnAdClick:n=!0,createClickControl:r=Rt}={})=>{const o=t||e.parentNode,a=r(),l=!document.body.contains(a);return l&&o.appendChild(a),s&&a instanceof HTMLAnchorElement&&(a.href=s,a.target="_blank"),a.onclick=t=>{t.stopPropagation(),e.paused&&n?(t.preventDefault(),e.play()):(n&&e.pause(),i(Ct))},()=>{l&&o.removeChild(a)}},({videoElement:e},t)=>{const i=()=>{var i;const s=null!==(i=e.error)&&void 0!==i?i:void 0;s&&Object.defineProperty(s,"code",{get:()=>r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE}),t(st,s)};return e.addEventListener("error",i),()=>{e.removeEventListener("error",i)}},({videoElement:e},t)=>{const i=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];let s=!1;const n=()=>{(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null)===e?(s=!0,t(Ze),t(We)):s&&(s=!1,t(Xe),t(qe))};for(const e of i)document.addEventListener(e,n);return()=>{for(const e of i)document.removeEventListener(e,n)}},({videoElement:e},t)=>{let i=!1;const s=()=>{const n=e.currentTime;!i;return e.addEventListener("timeupdate",s),()=>{e.removeEventListener("timeupdate",s)}},({videoElement:e},t)=>{let i=!1,s=!0;const n=()=>{i?s&&(s=!1,t(Je)):(i=!0,s=!1)},r=()=>{s||(s=!0,t(Qe))};return e.addEventListener("play",n),e.addEventListener("pause",r),()=>{e.removeEventListener("play",n),e.removeEventListener("Element:e},t,{progressEvents:i=[]}={})=>{const{duration:s}=e,n=_t(s);let r=0,o=,a=i.filter(bt).map((({offset:e,uri:t})=>({offset:St(e,n),uri:t})));const l=()=>{const{currentTime:i}=e,s=Math.abs(i-o);r+=_t(s),o=i;const{stillPending:n,toCall:c}=a.reduce(((e,t)=>{const{offset:i}=t;return"number"==typeof i&&r>=i?e.toCall.push(t):e.stillPending.push(t),e}),{stillPending:[],toCall:[]});a=n,c.forEach((({uri:e})=>{t(Tt,{contentplayhead:yt(r),progressUri:e})})),0===a.length&&e.removeEventListener("timeupdate",l)};return a.length>0&&e.addEventListener("timeupdate",l),()=>{e.removeEventListener("timeupdate",l)}},({videoElemenst s=e.currentTime-i;s<0&&Math.abs(s)>=1&&t(et),i=e.currentTime};return e.addEventListener("timeupdate",s),()=>{e.removeEventListener("timeupdate",s)}},(e,t,{skipoffset:i,createSkipConet n;const{videoElement:r,element:o}=e,a=()=>{const e=1e3*r.currentTime;!n&&"number"==typeof i&&e>=i&&=e=>{varopPropagation)||void 0===i||i.call(e),t(tt),!1},o.appendChild(n),r.removeEventListener("timeupdate",a))};return r.addEventListener("timeupdate",a),()=>{r.removeEventListener("timeupdate",a),n&&o.removeChild(n)}},({videoElement:e},t)=>{let i=!1,s=!1,n=!1,r=!1,o=!1;const a={start:{isFired:e=>!i&&e>0,callback:()=>{i=!0,t(dt)}},firstQuartile:{isFired:(e,t)=>!s&&((e,t)=>ut(e,t)>=25)(e,t),callback:()=>{s=!0,t(lt)}},midpoint:{isFired:(e,t)=>!n&&((e,t)=>ut(e,t)>=50)(e,t),callback:()=>{n=!0,t(ct)}},thirdQuartile:{isFired:(e,t)=>!r&&((e,t)=>ut(e,t)>=75)(e,t),callback:()=>{r=!0,t(ht)}},complete:{isFired:(e,t)=>!o&&pt(e,t),callback:()=>{o=!0,t(at)}}},l=()=>{const i=e.duration,s=e.currentTime;for(const e in a)if(a[e].isFired(s,i)){a[e].callback();break}t(ot)},c=()=>{const i=e.duration,s=e.currentTime;!o&&pt(s,i)&&(o=!0,t(at)),e.removeEventListener("ended",c),e.removeEventListener("timeupdate",l)};return e.addEventListener("timeupdate",l),e.addEventListener("ended",c),()=>{e.removeEventListener("timeupdate",l),e.removeEventListener("ended",c)}},({videoElement:e},t)=>{let i=mt(e);const s=()=>{t(nt),i&&!mt(e)?t(gt):!i&&mt(e)&&t(ft),i=mt(e)};return e.addEventListener("volumechange",s),()=>{e.removeEventListener("volumechange",s)}}],kt=({vastChain:e,videoAdContainer:t,hooks:i,pauseOnAdClick:s},n)=>{const r=e[0].ad,o=r&&_e(r),a=r&&Te(r),l=(e=>e.map((({ad:e})=>e)).reduce(((e,t)=>[...e,...t&&ne(t,je)||[]]),[]).map((({offset:e,uri:t})=>({offset:e,uri:t}))))(e),c=Object.assign({clickThroughUrl:a,pauseOnAdClick:s,progressEvents:l,skipoffset:o},i),d=wt.map((e=>He(e(t,n,c))));return()=>d.forEach((e=>e()))};class Lt extends Error{constructor(e){super(e),this.name="AdUnitError",Object.setPrototypeOf(this,Lt.prototype)}}const It=Lt;var Ot=i(tionObserver||window.MozMutationObserver,Nt=()=>{},Mt=["style","clientWidth","clientHeight"],xt=Symbol("mutationHandlers"),Bt=Symbol("mutationObserver"),Ft=Symbol("resizeHandlers"),Ut=Symbol("resizeElement"),$t=(e,t,{threshold:i=20}={})=>{((e,t)=>{if(!(e instanceof Element))throw new TypeError("Target is not an Element node");if(!(t instanceof Function))throw new TypeError("Callback is not a function")})(e,t);const s=({style:e,clientHeight:t,clientWidth:i})=>[e.width,e.height,i,t].join(".");let n=s(e);const r=Dt()((()=>{const i=s(e);i!==n&&(n=i,t())}),i),o=Pt?((e,t)=>{var i;if(!e[xt]){e[xt]=[];const t=()=>{var t;null===(t=e[xt])||void 0===t||t.forEach((e=>e()))};e[Bt]=((e,t)=>{const i=new Pt((e=>{for(let i=0;i<e.length;i++){const{attributeName:s}=e[i];s&&Mt.includes(s)&&t()}}));return i.observe(e,{attributes:!0,characterData:!1,childList:!0}),i})(e,t)}return null===(i=e[xt])||void 0===i||i.push(t),()=>{var i,s,n;e[xt]=null===(i=e[xt])||void 0===i?void 0:i.filter((e=>e!==t)),0===(null===(s=e[xt])||void 0===s?void 0:s.length)&&(null===(n=e[Bt])||void 0===n||n.dislete e[xt],delete e[Bt])}})(e,r):Nt,a=((e,t)=>{var i;if(!e[Ft]){e[Ft]=[];const t=()=>{var t;null===(t=e[Ft])||void 0===t||t.forEach((e=>e()))};e[Ut]=(e=>{const t=document.createElement("iframe");return t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; border: 0; overflow: hidden; pointer-events: none; z-index: -1;"),t.setAttribute("type","text/html"),t.setAttribute("loading","eager"),t.onload=()=>{t.contentWindow&&t.contentWindow.addEventListener("resize",e)},t.src="about:blank",t})(t),"static"===getComputedStyle(e.style.position="relative"),e.appendChild(e[Ut])}return null===(t])||void 0===i?void 0:i.filter((e=>e!==t)),0===(null===(s=e[Ft])||void 0===s?void 0:s.length)&&(e.removindow.IntersectionObserver,zt=()=>{},Gt=Symbol("intersectionHandlers"),Kt=Symbol("intersectionObserver");let Yt=[],jt=[];const Ht=(e,t,{threshold:i=100,viewabilityOffset:s=.4}={})=>{if(((e,t)=>{if(!(e instanceof Element))throw new TypeError("Target is not an Element node");if(!(t instanceof Function))throw new TypeError("Callback is not a function")})(e,t),!Vt)return t(void 0),zt;let n=!1;const r=Dt()((i=>{i.forEach((i=>{if(i.target===e){const e=!document.hidden&&i.intersectionRatio>s;e!==n&&(n=e,t(e))}})),jt=i}),i),o=((e,t)=>{var i,s;if(!e[Gt]){e[Gt]=[];const t=(t,i)=>{var s;null===(s=e[Gt])||void 0===s||s.forEach((e=>e(t,i)))},s={root:null,rootMargin:"0px",threshold:[...new Array(11)].map(((e,t)=>t/10))};e[Kt]=new Vt(t,s),null===(i=e[Kt])||void 0===i||i.observe(e)}return null===(s=e[Gt])||void 0===s||s.push(t),()=>{var i,s,n;e[Gt]=null===(i=e[Gt])||void 0===i?void 0:i.filter((e=>e!==t)),0===(null===(s=e[Gt])||void 0===s?void 0:s.length)&&(null===(n=e[Kt])||void 0===n||n.disconnect(),delete e[Gt],delete e[Kt])}})(enst i=()=>{Yt&&Yt.forEach((e=>e()))};return Yt.push(t),1===Yt.length&&document.addEventListener("visibilitychange",i));return()=>{o(),a()}},Wt=class{constructor(e){this.events={},this.logger=e||console}on(e,t){const i=this.events;return(i[e]||(i[e]=[])).push(t),this}removeListener(e,t){const i=this.events,s=i[e]||(i[e]=[]);return i[e]=s.filter((e=>e!==t&&e._!==t)),this}removeAllListeners(e){return e?delete this.events[e]:this.events={},this}once(e,t){const i=(...s)=>{this.removeListener(e,i),t(...s)};return i._=t,this.on(e,i)}emit(e,...t){const i=this.events,s=i[e]||(i[e]=[]),n=s.length>0;return s.forEach((e=>{try{e(...t)}catch(e){e instanceof Error&&this.logger.error(e,rce:t,iFrameResource:i}={})=>e||t||i||void 0,Xt="UNKNOWN",Zt=e=>1===e.length?e[0]:(e=>{const t=window.devicePixelRatio||0;return e.slice(0).sort(((e,i)=>Math.abs(t-(e.pxratio||0))-Math.abs(t-(i.pxratio||0))))})(e)[0],Qt=e=>{const t=e.map((({ad:e})=>e)).filter(Boolean).reduce(((e,t)=>[...e,...ae(t)||[]]),[]);if(t.length>0){const e=(e=>((e,t)=>{const i={};return e.filter((e=>{const s=t(e);return!(!s||i.hasOwnProperty(s)||(i[s]=!0,0))}))})(e,qt))(t);return(e=>{const t=(e=>e.reduce(((e,t)=>{var i,s;const n=null!==(i=t.program)&&void 0!==i?i:Xt;return null!==(s=e[n])&&void 0!==s||(e[n]=[]),e[n].push(t),e}),{}))(e);return Object.keys(t).reduce(((e,i)=>i===Xt?[...e,...t[Xt]]:[...e,Zt(t[i])]),[])})(e)}},Jt=(e,t)=>{let i,s,n=!0;const r=new Promise(((e,t)=>{i=e,s=t})),o=Ye(e,t,((...e)=>{n=!1,i(e)}));return{cancel:()=>{n&&(n=!1,o(),s(new Error("waitFor was canceled")))},promise:r}};class ei extends Error{constructor(e){super(e),this.name="FetchError",Object.setPrototypeOf(this,ei.prototype)}ata:i})=>{const{height:s,width:n}=i,r=t.createE;re${n}px`),s&&(r.style.height=`${s}px`),(async e=>{const t=await fetch(e),i=t.headers.get("Content-Type");if(t.status>=400){const e=new ei(t.statusText);throw e.response=t,e}if(!i||!(e=>{const t=e.toLowerCase();return["text/plain","text/html"].some((e=>t.includes(e)))})(i)){const e=new ei(`fetchHtml error, invalid Content-Type ${i}`);throw e.response=t,e}return t.text()})(e).then((e=>{r.innerHTML=e,r.dispatchEvent(new CustomEvent("load"))})).catch((()=>{r.dispatchEvent(new CustomEvent("error"))})),r},ii=document.createElement("div"),si=()=>{},ni=(e,{document:t,placeholder:i})=>new Promise(((s,n)=>{try{const r=((e,t)=>{const{staticResource:i,htmlResource:s,iFrameResource:n}=t;return i?((e,{document:t,data:i})=>{const{height:s,width:n}=i,r=t.createElement("img");return n&&(r.width=n),s&&(r.height=s),r.src=e,r})(i,{data:t,document:e}):s?ti(s,{data:t,document:e}):n?((e,{document:t,data:i})=>{const{height:s,width:n}=i,r=t.createElement("iframe");return r.setAttribute("sandbox","allow-forms allow-popups allow-scripts"),r.setAttribute("loading","eager"),n&&(r.width=n.toString()),s&&(r.height=s.toString()),r.src=e,r.frameBorder="0",r.style.border="none",r})(n,{data:t,document:e}):ii})(t,e),o=Jt(r,"error"),a=Jt(r,"load"),l=()=>{i.contains(r)&&(i.removeChild(r),r.style.zIndex="0")};o.promise.then((()=>{a.cancel(),l(),n(new Error("Error loading resource"))}))ncel(),l(),s(r)})).catch(si),r.style.zIndex="-9999",i.appendChild(r)}catch(e){n(e)}})),ri=({height:e,width:t})=>e*t,oi=({left:e,width:t})=>e+t,ai=({left:e})=>e,li=({top:e})=>e,ci=({top:e,height:t})=>e+t,di=(e,t)=>{const i=((e,t)=>{const{drawnIcons:i,placeholder:s}=t,n=ri(s.getBoundingClientRect());return ri(e)+i.reduce(((e,t)=>{const{width:i,height:s}=t;return i&&s?e+ri({width:i,height:s}):e}),0)<=.35*n})(e,t),s=((e,{placeholder:t})=>{const i=t.getBoundingClientRect();return e.left>=0&&e.left+e.width<=i.width&&e.top>=0&&e.top+e.height<=i.height})(e,t),n=((e,{drawnIcons:t})=>!t.some((t=>((e,t)=>ai(e)<=oi(t)&&oi(e)>=ai(t)&&ci(e)>=li(t)&&li(e)<=ci(t))(e,t))))(e,t);return i&&s&&n},hi=()=>{},ui=async(e,t)=>{var i;const{placeholder:s}=t,n=await(async(e,t)=>{if(!e.element){const i=await ni(e,t);(i instanceof HTMLIFrameElement||i instanceof HTMLImageElement)&&(i.width="100%",i.height="100%"),i.style.height="100%",i.style.width="100%",e.element=((e,t,{onIconClick:i=hi}={})=>{const s=document.createElement("a");return t.iconClickThrough&&(s.href=t.iconClickThrough,s.target="_blank"),t.iFrameResource&&(e.style.pointerEvents="none"),s.onclick=e=>{void 0!==Event.prototype.stopPropagation&&e.stopPropagation(),i(t)},s.appendChild(e),s})(i,e,t)}reconst n=e.signature,r=t.getBoundingClientRect(),o=s.getBoundingClientRect(),a=e.width||r.width,l=e.height||r.height,c=e.xPosition||"right",d=e.yPosition||"top";let h,u;if((e=>!["left","right"].includes(String(e).toLowerCase()))(c))h=c;else{const e=i.filter((e=>e.xPosition===c&&e.yPosition===d));h=((e,t,i,s)=>{const n=i.reduce(((e,t)=>e+(t.width?t.width+1:0)),0);return"left"===e?n:s-n-t})(c,a,e,o.width)}var p,f,g;(e=>!["top","bottom"].includes(String(e).toLowerCase()))(d)?u=d:(p=d,f=l,g=o.height,u="top"===p?0:g-f);const m=`${h}-${u}_${a}x${l}`;return Object.assign(e,{height:l,left:h,signature:m,top:u,updated:n!==m,width:a})})(e,t))throw null===(i=n.parentNode)||void 0===i||i.removeChild(n),new Error("Icon can't be rendered");return n.parentNode&&!r.updated||s.appendChild(((e,t)=>{const{height:i,width:s,left:n,top:r,yPosition:o}=t;return e.style.position="absolute",e.style.left=`${n}px`,"bottom"==tyle.top=`${r}e.style.width=`${s}px`,e})(n,r)),r},pi=(e,{onIconClick:t,videoAdContament:r}=i,o"string"==typeof e.offset?parseInt(e.offset,10):e.offset||0,r=e.duration||s;return n<=i&&i-n<=r})(t,r)?e.iconsToShow.push(t):e.otherIcons.push(t),e)),{iconsToShow:[],otherIcons:[]});return l.forEach((({element:e})=>{var t;null===(t=null==e?void 0:e.parentNode)||void 0===t||t.removeChild(e)})),a.reduce(((e,i)=>e.then((()=>ui(i,{document,drawnIcons:o,onIconClick:t,placeholder:n}))).then((e=>{o.push(e)})).catch((e=>s.log(e)))),Promise.resolve()).then((()=>o))};const fi=Symbol("firstRenderPending"),gi=()=>{},mi=(e,t)=>{var{videoAdContainer:i,onIconView:s=gi,onIconClick:n=gi}=t,r=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(t,["videoAdContainer","onIconView","onIconClick"]);const{videoElement:o,element:a}=i;return e.forEach((e=>{e[fi]=!0})),{drawIcons:async()=>{const t=await pi(e,Object.assign({onIconClick:n,videoAdContainer:i},r));a.dispatchEvent(new CustomEvent("iconsDrawn")),t.forEach((e=>{e[fi]&&(s(e),e[fi]=!1)}))},hasPendingIconRedraws:()=>((e,t)=>{const i=1e3*t.currentTime,s=1e3*t.duration,n=e.filter((e=>!e.offset||e.offset<i)),r=e.filter((e=>e.duration&&e.duration<s));return n.length>0||r.length>0})(e,o),removeIcons:()=>(e=>e.filter((({element:e})=>Boolean(null==e?void 0:e.parentNode))).forEach((({element:e})=>{var t;return null===(t=null==e?void 0:e.parentNode)||void 0===t?void 0:t.removeChild(e)})))(e)}},vi=(e,t)=>{const i=window.screen;return e+100>i.width&&t+100>i.height?"fullscreen":e<400?"thumbnail":"normal"};var Ai,Ei;const{start:yi,viewable:Ti,notViewable:_i,viewUndetermined:bi,iconClick:Si,iconView:Ci}=M,Ri=Symbol("_private"),wi=Symbol("_protected");Ai=Ri,Ei=wi;const ki=class extends Wt{constructor(e,t,{viewability:i=!1,responsive:s=!1,logger:n=console,pauseOnAdClick:r=!0}={}){super(n),this[Ai]={addIcons:()=>{if(!this.iconn;const{drawIcons:e,hasPendingIconRedraws:t,removeIcon,data:e,type:Si}),onIconView:e=>this.emit(Ci,{adUnit:this,data:e,type:Ci}),videoAdContainer:this.videoAdContainer});this[wi].drawIcons=e,this[wi].removeIcons=i,this[wi].hasPendingIconRedraws=t,this[wi].onFinishCallbacks.push(i)},setupViewableImpression:()=>{let e;const t=Ht(this.videoAdContainer.element,(t=>{this.isFinished()||this[wi].viewable||("boolean"==typeof t?t?e=window.setTimeout(this[Ri].handleViewableImpression,2e3,Ti):clearTimeou].onFinishCallbacks.push((()=>{t(),clearTimeout(e),this[wi].viewabliewableImpression(_i)}))},handleViewableImpression:e=>{this[wi].viewable=Boolean(e),this.emit(e,{adUnit:this,type:e})},setupViewability:()=>{const e=Ht(this.videoAdContainer.element,(e=>{this.isFinished()||"boolean"==typeof e&&(e?this.resume():this.pause())}));this[wonsive:()=>{const{element:e}=this.videoAdContainer;this[wi].size={height:e.clientHeight,viewmode:vi(e.clientWidth,e.clientHeight),width:e.clientWidth};const t=$t(e,(()=>{if(this.isFinished())return;const t=this[wi].size,i=e.clientHeight,s=e.clientWidth;i===(null==t?void 0:t.height)&&s===(null==t?void 0:t.width)||this.resizebacks:[],finish:()=>{this.isFinished()||(this[wi].finished=!0,this[wi].onFinishCallbacks.forEach((e=>e())),this.emit(rt,{adUnit:this,type:rt}))},throwIfCalled:()=>{throw new Error("VideoAdUnit method must be implemented on child class")},throwIfFinished:()=>{if(this.isFinished())throw new Error("VideoAdUnit is finished")}},this.vastChain=e,this.videoAdContainer=t,this.icons=Qt(e),this.pauseOnAdClick=r,this[wi].onFinishCallbacks.push((e=>{let t=0,i=0;const s=()=>{e.duration-t>3&&(e.pause(),e.play(),e.currentTime=t)},n=()=>{const s=e.currentTime;Math.abs(s-t)>3?(i+=1,i>=2&&e.pause(),e.currentTime=t):t=s};return e.addEventListener("timeupdate",n),e.addEventListener("ended",s),()=>{e.removeEventListener("timeupdate",n),e.removeEventListener("ended",s)}})(this.videoAdContainer.videoElement)),this[Ri].addIcons(),e.some((({ad:e})=>e&&ve(e)))&&this.once(yi,this[Ri].setupViewableImpression),i&&this.once(yi,this[Ri].setupViewability),s&&this.once(yi,this[Ri].setupResponsive)}start(){this[wi].throwIfCalled()}resume(){this[wi].throwIfCalled()}pause(){this[wi].throwIfCalled()}skip(){this[wi].throwIfCalled()}setVolume(e){this[wi].throwIfCalled()}getVolume(){this[wi].throwIfCalled()}cancel(){this[wi].throwIfCalled()}duration(){this[wi].throwIfCalled()}paused(){this[wi].throwIfCalled()}currentTime(){this[wi].throwIfCalled()}onFinish(e){if("function"!=typeof e)throw new TypeError("Expected a callback function");this[wi].onFinishCallbacks.push(He(e,this.logger))}onError(e){if("function"!=typeof e)throw new TypeError("Expected a callback function");this[wi].onErrorCallbacks.push(He(e,this.logger))}isFinished(){return this[wi].finished}isStarted(){return this[wi].started}async resize(e,t,i){var s,n,r,o;this[wi].size={height:t,viewmode:i,width:e},this.isStarted()&&!this.isFinished()&&this.icons&&(await(null===(n=(s=this[wi]).removeIcons)||void 0===n?void 0:n.call(s)),await(null===(o=(r=this[wi]).drawIcons)||void 0===o?void 0:o.call(r)))}};var Li;const{complete:Ii,error:Oi,s extends ki{constructor(e,t,i={}){super(e,t,i),this[Li]={handleMetric:(e,t)=>{var i;switch(e){case Ii:this[wi].finish();break;case Oi:t instanceof Error&&(this.error=t,this.errorCods.error.code)?this.error.code:r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE)),this[wi].finish();break;case Di:this.cancel()}this.emit(e,{adUnit:this,data:t,type:e})},is[wi]).drawIcons)||void 0===t?void 0:t.call(e)),(null===(s=(i=this[wi]).hasPendingIconRedraws)||void 0===s?void 0:s.call(i))&&!this.isFinished())){const{videoElement:e}=this.videoAdContainer;Ye(e,"timeupdate",this[Pi].drawIcons)}}},this.type="VAST";const{onFinishCallbacks:s}=this[wi],{handleMetric:n}=this[Pi];this.hooks=i.hooks||{};const o=kt({hooks:this.hooks,pauseOnAdClick:this.pauseOnAdClick,vastChain:this.vastChain,videoAdContainer:this.videoAdContainer},n);s.push(o)}async start(){if(this[wi].throwIfFinished(),this.isStarted())throw new It("VastAdUnit already started");const e=this.vastChain[0].ad,{videoElement:t,element:i}=this.videoAdContainer,s=e&&Ke(e,t,i,this.hooks);if(s)this.icons&&await this[Pi].drawIcons(),(null==s?.assetUri=s.src),t.play();else{const e=new It("Can't find a suitable media to play");e.code=r.VAST_LINEAR_ASSET_MISMATCH,this[Pi].handleMetric(Oi,e)}this[wi].started=!0}resume(){this.videoAdContainer.videoElement.play()}pause(){this.videoAdContainer.videoElement.pause()}skip(){const e=this.vastChain[0].ad,t=e&&_e(e),i=1e3*this.currentTime();"number"==typeof t&&i>=t&&this[Pi].handleMetric(Di)}paused(){return this.videoAdContainer.videoElement.paused}setVolume(e){this.videoAdContainer.videoElement.volume=e}getVolume(){return this.videoAdContainer.videoElement.volume}cancel(){this[wi].throwIfFinished(),this.videoAdContainer.videoElement.pause(),this[wi].finish()}duration(){return this.isStarted()?this.videoAdContainer.videoElement.duration:0}currentTime(){return this.isStarted()?this.videoAdContainer.videoElement.currentTime:0}async resize(e,t,i){if(await super.resize(e,t,i),this.isStarted()&&!this.isFinished()){const e=this.vastChain[0].ad,{videoElement:t,element:i}=this.videoAdContainer,s=e&&Ke(e,t,i,this.hooks);s&&t.src!==s.src&&((e,t)=>{new Promise((i=>{const s={currentTime:e.currentTime,playing:!e.paused};s.playing&&e.pause(),t.src&&(e.src=t.src),e.load(),Ye(e,"loadeddata",(()=>{e.currentTime=s.currentTime,s.playing&&e.play(),i()}))}))})(t,s)}}},Mi=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],xi=({type:e})=>Mi.some((t=>t===e)),Bi="getAdIcons",Fi="AdLoaded",Ui="AdStarted",$i="AdStopped",Vi="AdSkipped",zi="AdSizeChange",Gi="AdDurationChange",Ki="AdRemainingTimeChange",Yi="AdVolumeChange",ji="AdImpression",Hi="AdVideoStart",Wi="AdVideoFirstQuartile",qi="AdVideoMidpoint",Xi="AdVideoThirdQuartile",Zi="AdVideoComplete",Qi="AdClickThru",Ji="AdUserAcceptInvitation",es="AdUserMinimize",ts="AdUserClose",is="AdPaused",ss="AdPlaying",ns="AdError",rs=[Fi,Ui,$i,Vi,"AdSkippableStateChange",zi,"AdLinearChange",Gi,"AdExpandedChange",Ki,Yi,ji,Hi,Wi,qi,Xi,Zi,Qi,"AdInteraction",Ji,es,ts,is,ss,"AdLog",ns],os=(e,t,i)=>new Promise(((s,n)=>{let r;const o=()=>{"number"==typeof i&&window.clearTimeout(r),e.unsubscribe(o,t),s()};"number"==typeof i&&(r=window.setTimeout((()=>{e.unsubscribe(o,t),n(new Error(`Timeout waiting for event '${t}'`))}),i)),e.subscribe(o,t)})),as=(e,t,i,...s)=>{const n=os(e,i,5e3),r=e[t];return null==r||r.apply(e,s),n},ls=e=>{const t=e.split(".");return parseInt(t[0],10)};var cs;const{complete:ds,mute:hs,unmute:us,skip:ps,start:fs,firstQuartile:gs,pause:ms,resume:vs,impression:As,midpoint:Es,thirdQuartile:ys,clickThrough:Ts,error:_s,closeLinear:bs,creativeView:Ss}=M,Cs=rs.filter((e=>e!==Fi)),Rs=Symbol("_private");cs=Rs;const ws=class extends ki{constructor(e,t,i={}){super(e,t,i),this[cs]={evtHandler:{[Qi]:(e,t,i)=>{i&&this[Rs].handleClickThrough(e),this.emit(Ts,{adUnit:this,type:Ts})},[Gi]:()=>{this.emit(ot,{adUnit:this,type:ot})},[ns]:e=>{this.error=(e=>{const t=e instanceof Error?e:new It("VPAID general error");return t.code&&l(t.code)||(t.code=r.VPAID_ERROR),t})(e),this.errorCode=this.error.code,this[wi].onErrorCallbacks.forEach((e=>e(this.error,{adUnit:this,vastChain:this.vastChain}))),this[wi].finish(),this.emit(_s,{adUnit:this,type:_s})},[ji]:()=>{this[Rs].videoStart||this[Rs].handleVpaidEvent(Hi),this.emit(As,{adUnit:this,type:As})},[is]:()=>{this[Rs].paused=!0,this.emit(ms,{adUnit:this,type:ms})},[ss]:()=>{this[Rs].paused=!1,this.emit(vs,{adUnit:this,type:vs})},[Ki]:()=>{this.emit(ot,{adUnit:this,type:ot})},[Vi]:()=>{this.cancel(),this.emit(ps,{adUnit:this,type:ps})},[Ui]:()=>{this.emit(Ss,{adUnit:this,type:Ss})},[$i]:()=>{this.emit($i,{adUnit:this,type:$i}),this[wi].finish()},[Ji]:()=>{this.emit(x,{adUnit:this,type:x})},[ts]:()=>{this.emit(bs,{adUnit:this,type:bs}),this[wi].finish()},[es]:()=>{this.emit(B,{adUnit:this,type:B})},[Zi]:()=>{this.emit(ds,{adUnit:this,type:ds})},[Wi]:()=>{this.emit(gs,{adUnit:this,type:gs})},[qi]:()=>{this.emit(Es,{adUnit:this,type:Es})},[Hi]:()=>{this[Rs].videoStart||(this[Rs].videoStart=!0,this[Rs].paused=!1,this.emit(fs,{adUnit:this,type:fs}))},[Xi]:()=>{this.emit(ys,{adUnit:this,type:ys})},[Yi]:()=>{const e=this.getVolume();this.emit(nt,{adUnit:this,type:nt}),0!==e||this[Rs].muted||(this[Rs].muted=!0,this.emit(hs,{adUnit:this,type:hs})),e>0&&this[Rs].muted&&(this[Rs].muted=!1,this.emit(us,{adUnit:this,type:us}))}},handleVpaidEvent:(e,...t)=>{const i=this[Rs].evtHandler[e];i&&i(...t),this.emit(e,{adUnit:this,type:e})},handleClickThrough:e=>{if(this.paused()&&this.pauseOnAdClick)return void this.resume();const t=this.vastChain[0].ad,i="string"==typeof e&&e.length>0?e:t&&Te(t);this.pauseOnAdClick&&this.pause(),i&&window.open(i,"_blank")},getIcons:()=>{var e;if(null===(e=this.creativeAd)||void 0===e?void 0:e[Bi])try{this.creativeAd[Bi]()||delete this.icons}catch(e){delete this.icons}},drawIcons:async()=>{var e,t,i,s;this.isFinished()||(await(null===(t=(e=this[wi]).drawIcons)||void 0===t?void 0:t.call(e)),(null===(s=(i=this[wi]).hasPendingIconRedraws)||void 0===s?void 0:s.call(i))&&!this.isFinished()&&setTimeout(this[Rs].drawIcons,500))},muted:!1,paused:!0},teative");const{src:s,type:n}=i;return await t.addScript(s,{type:n}),t.executionContext.getVPAIDAd()})(e,t)}async start(){if(this[wi].throwIfFinished(),this.isStarted())throw new Error("VpaidAdUnits.creativecons(),((e,t)=>{const i=e.handshakeVersion(t);if(!((e,t)=>{const i=ls(t);return!(i<1)&&i<=ls(e)})(t,i))throw new Error(`Creative Version '${i}' not supported`)})(this.creativeAd,"2.0"),((e,t,i)=>{const{width:s,height:n}=t.element.getBoundingClientRect(),r=vi(s,n),o=be(i[0].XML);t.addSlot(s,n);const a={slot:t.slotElement,videoSlot:t.videoElement,videoSlotCanAutoPlay:t.isOriginalVideoElement};e.initAd(s,n,r,-1,o,a)})(this.creativeAd,this.videoAdContainer,this.vastChain),await e,!this.videoAdContainer.isDestroyed())try{const{videoElement:e}=this.videoAdContainer;e.muted?(this[Rs].muted=!0,this.setVolume(0)):this.setVolume(e.volume),await as(this.creativeAd,"startAd",Ui),this.icons&&await this[Rs].drawIcons(),this[wi].started=!0}catch(e){this.cancel()}}catch(e){throw this[Rs].handleVpaidEvent(ns,e),e}}resume(){var e;null===(e=this.creativeAd)||void 0===e||e.resumeAd()}pause(){var e;null===(e=this.creativeAd)||void 0===e||e.pauseAd()}skip(){var e;null===(e=this.creativeAd)||void 0===e||e.skipAd()}paused(){return this.isFinished()||this[Rs].paused}setVolume(e){var t;null===(t=this.creativeAd)||void 0===t||t.setAdVolume(e)}getVolume(){return this.creativeAd?this.creativeAd.getAdVolume():0}async cancel(){var e;this[wi].throwIfFinished();try{const t=this.creativeAd&&os(this.creativeAd,$i,3e3);null===(e=this.creativeAd)||void 0===e||e.stopAd(),await t}catch(e){this[wi].finish()}}duration(){if(!this.creativeAd)return 0;const e=this.creativeAd.getAdDuration();return e<0?0:e}currentTime(){if(!this.creativeAd)return 0;const e=this.creativeAd.getAdRemainingTime();return e<0?0:this.duration()-e}async resize(e,t,i){if(await super.resize(e,t,i),this.creativeAd){if(this.isStarted()&&!this.isFinished()){const i=this.videoAdContainer.slotElement;i&&(i.style.height=`${t}px`,i.style.width=`${e}px`)}return as(this.creativeAd,"resizeAd",zi,e,t,i)}}},ks=function(e,t,i){const{tracker:s,type:n}=i,r="VPAID"===n?new ws(e,t,i):new Ni(e,t,i);return Object.values(M).forEach((t=>r.on(t,(t=>{const{type:i,data:n}=t,o={data:n,errorCode:r.errorCode,tracker:s};((e,t,{data:i,errorCode:s,tracker:n=Se,logger:r=console})=>{const o=Le[e];o?o(t,{data:Object.assign(Object.assign({},i),{errorCode:s}),errorCode:s,tracker:n}):r.error(`Event '${e}' cannot be tracked`)})(i,e,o)})))),Object.values(U).forEach((t=>r.on(t,(t=>{const i={data:t.data,tracker:s};((e,t,{data:i,tracker:s=Se,logger:n=console})=>{const r=Oe[e];r?r(t,{data:Ob}):n.error(`Event '${e}' cannot be tracked`)})(t.type,e,i)})))),r};class Ls extends Error{constructor(e){super(e),this.name="VastError",Object.setPrototypeOf(this,Ls.prototype)}}const Is=Ls,Os=(e,{onAdReady:t})=>new Promise(((i,s)=>{const n=e=>()=>s(new Error(`Ad unit start rejected due to event '${e}'`));e.onError(s),e.on(k,(()=>i(e))),e.on(ts,n(ts)),e.on(P,n(P)),e.on($i,n($i)),t(e),e.start()})),Ds=async(e,t,i)=>{((e,t)=>{if(!Array.isArray(e)||0===e.length)throw new TypeError("Invalid vastChain");if(!(t instanceof Ue))throw new TypeError("Invalid VideoAdContainer")})(e,t);try{return await((e,t,i)=>{const s=e[0].ad;if(!s||!Boolean(Ee(s))){const e=new Is("No valid creative found in the passed VAST chain");throw e.code=r.VAST_MEDIA_FILE_NOT_FOUND,e}const n=ks(e,t,Object.assign(Object.assign({},i),{type:"VPAID"}));return Os(n,i)})(e,t,i)}catch(s){const n=e[0].ad;if(n&&((e,t)=>{const i=Ae(e);return!!i&&i.some((e=>Ve(t,e)))})(n,t.videoElement))return((e,t,i)=>{const s=ks(e,t,Object.assign(Object.assign({},i),{type:"VAST"}));return Os(s,i)})(e,t,i);throw s}},Ps=async(e,t,i)=>{let s;try{const{timeout:n}=i;s=((e,t)=>{if(!e)throw new TypeError("placeholder is required");return new Ue(e,t)})(t,i.videoElement);let o=Ds(e,s,i);if("number"==typeof n){let t,s=!1;const n=new Promise(((n,o)=>{t=window.setTimeout((()=>{const{tracker:t}=i;Ce(e,{errorCode:r.VAST_MEDIA_LOAD_TIMEOUT,tracker:t}),s=!0,o(new Error("Timeout while starting the ad"))}),i.timeout)}));o=Promise.race([o.then((e=>(s?e.isStarted()&&e.cancel():clearTimeout(t),e))),n])}const a=await o;return a.onFinish((()=>{null==s||s.destroy()})),a}catch(e){throw null==s||s.destroy(),e}};class Ns extends Error{constructor(e){super(e),this.name="FetchError",Object.setPrototypeOf(this,Ns.prototype)}}const Ms=Symbol("requested"),xs=e=>{e[Ms]=!0},Bs=e=>{try{return((e,t)=>{const i=e.parseFromString(t,"application/xml");return z.failOnParseError(i),K(i)})(Q,e)}catch(e){throw e.code=r.VAST_XML_PARSING_ERROR,e}},Fs=async(e,t,i=[])=>{var s;const n={requestTag:e};let o,a;try{const s=((e,t)=>{const i=e[0],s=Boolean(i)&&i.ad&&fe(i.ad)&&i.ad?(e=>{const t=j(e,"Wrapper"),i={};if(t){const{allowMultipleAds:e,fallbackOnNoAd:s,followAdditionalWrappers:n}=X(t);e&&(i.allowMultipleAds=le(e)),s&&(i.fallbackOnNoAd=le(s)),n&&(i.followAdditionalWrappers=le(n))}return i})(i.ad):{};return Object.assign(Object.assign({},s),t)})(i,t);((e,{wrapperLimit:t=5})=>{if(e.length>t){const e=new Is("Wrapper Limit reached");throw e.code=r.VAST_TOO_MANY_REDIRECTS,e}})(i,s);let l=(async(e,t)=>{var i;let s;try{s=await(async(e,t={})=>{const i=Object.assign({},{credentials:"include"},t),s=await window.fetch(e,i);if(s.status>=400){const e=new Ns(s.statusText);throw e.response=s,e}return s})(e,t);const i=await s.text();return{response:s,XML:i}}catch(e){throw e.code=r.VAST_NONLING_FAILED,null!==(i=e.response)&&void 0!==i||(e.response=s),mber"==typeof s.timeout&&(a=s.timeout,o=Date.now(),l=Promise.race([l,new Promise(((e,t)=>{setTimeout((()=>{const e=new Is("RequestAd timeout");e.code=r.VAST_LOAD_TIMEOUT,t(e)}),a)}))]));const{response:c,XML:d}=await l;return n.response=c,n.XML=d,n.parsedXML=Bs(n.XML),n.ad=(e=>{try{const t=(e=>{const t=de(e);if(Array.isArray(t)&&t.length>0)return pe(e)?t.filter(ue).sort(ce)[0]:t[0]})(e);if(t)return xs(t),t;throw new Error("No Ad")}catch(e){throw e.code=r.VAST_NO_ADS_AFTER_WRAPPER,e}})(n.parsedXML),(({ad:e,parsedXML:t},{allowMultipleAds:i=!0,followAdditionalWrappers:s=!0})=>{if(!fe(e)&&!ge(e)){const e=new Is("Invalid VAST, ad contains neither Wrapper nor Inline");throw e.code=r.VAST_SCHEMA_VALIDATION_ERROR,e}if(pe(t)&&!i){const e=new Is("Multiple ads are not allowed");throw e.code=r.VAST_UNEXPECTED_MEDIA_FILE,e}if(fe(e)&&!s){const e=new Is("To follow additional wrappers is not allowed");throw e.code=r.VAST_UNEXPECTED_AD_TYPE,e}})(n,s),fe(n.ad)?(o&&a&&(a-=Date.now()-o),Fs(me(n.ad),Object.assign(Object.assign({},s),{timeout:a}),[n,...i])):[n,...i]}catch(e){return l(e.code)||(e.code=r.UNKNOWN_ERROR),n.errorCode=e.code,n.error=e,null!==(s=n.response)&&void 0!==s||(n.response=e.response),[n,...i]}},Us=Fs,$s=(e,t)=>{(e=>{if(!Array.isArray(e))throw new TypeError("Invalid VAST chain");if(0===e.length)throw new Error("No next ad to request")})(e);const i=e[0],s=(({ad:e,parsedXML:t},{fallbackOnNoAd:i=!0,useAdBuffet:s=!1})=>{const n=de(t).filter((e=>!(e=>Boolean(e[Ms]))(e)));let r;return pe(t)?(s&&(r=n.filter((e=>!ue(e)))[0]),e&&!r&&(r=((e,t)=>{const i=(he(e)||0)+1;return t.find((e=>he(e)===i))})(e,n))):n.length>0&&i&&(r=n[0]),r})(i,t);if(s){const n=[Object.assign({},i,{ad:s}),...e.slice(1)];return xs(s),fe(s)?Us(me(s),t,n):Promise.resolve(n)}return $s(e.slice(1),t)},Vs=$s;const zs=e=>(...t)=>{"function"==typeof e&&e(...t)},Gs=async(e,t,i,s)=>{var n=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s));if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(i,[]);let o,a,c;const{onAdStart:d,onError:h,onRunFinish:u}=n;try{if("number"==typeof n.timeout&&(a=Date.now()),o=await e(),s())return void u();if(n.timeout&&a){const e=Date.now();n.timeout-=e-a,a=e}if(((e,t)=>{var i;if(!e||0===e.length)throw new Error("Invalid VastChain");const s=e[0];if(!t.vpai[0].ad&&Ee(e[0].ad)))(e)){const e=new Is("VPAID ads are not supported by the current player");e.code=r.VAST_UNEXPECTED_AD_TYPE,s.errorCode=r.VAST_UNEXPECTED_AD_TYPE,s.error=e}if(s.error)throw s.error;"function"==typeof(null===(i=t.hooks)||void 0===i?void 0:i.validateVastResponse)&&t.hooks.validateVastResponse(e)})(o,n),c=await Ps(((e,{hooks:t})=>"function"==typeof(null==t?void 0:t.transformVastResponse)?t.transformVastResponse(e):e)(o,n),t,Object.assign({},n)),s())return c.cancel(),void u();c.onError(h),c.onFinish(u),d(c)}catch(e){if((r s;let n=(null===(s=null==t?void 0:t[0])||void 0===s?void 0:s.errorCode)||(null==e?void 0:e.code);t&&n&&(l(n)||(n=r.UNKNOWN_ERROR),Ce(t,{errorCode:n,tracker:i}))})(e,o,n.tracker),h(e,{adUnit:c,vastChain:o}),!o||s())return void u();if(n.timeout&&a&&(n.timeout-&n.timeout&&n.timeout<=0)return void u();Gs((()=>Vs(o,n)),t,Object.assign({},n),s)}},Ks=(e,t,i)=>{let s,n=!1;const r=zs(i.onAdStart),o=Object.assignd:!0},i),{onAdReady:zs(i.onAdReady),onAdStart:e=>{s=e,r(s)},onError:zs(i.onError),onRunFinish:zs(i.onRunFinish)});return i.videoElement&&i.videoElement.paused&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&i.videoElement.load(),Gs((()=>Us(e,o)),t,o,(()=>n)),()=>{n=!0,s&&!s.isFinished()&&s.cancel()}},Ys=(e,t)=>{const i=e&&j(e,t);return i&&q(i)},js=e=>{const{ad:t}=e[0],i=t&&(e=>{const t=W(e);return t&&j(t,"Pricing")})(t);return i?{pricing:q(i),pricingCurrency:Z(i,"currency"),pricingModel:Z(i,"model")}:e.length>1?js(e.slice(1)):{}},Hs=e=>{const t=(e=>e.map((({ad:e})=>e&&Z(e,"id"))).filter(Boolean))(e),i=(e=>e.map((({ad:e})=>e&&(e=>{const t=lean))(e),s=(e=>e.map((({ad:e})=>e&&ie(e))).filter(Boolean))(e),n=(e=>e.map((e=>e&&Z(e,"id"))).filter(Boolean))(s),r=(e=>e.map((e=>e&&Z(e,"adId"))).filter(Boolean))(s),{ad:o,parsedXML:a,XML:l}=e[0],{pricing:c,pricingCurrency:d,pricingModel:h}=js(e),{category:u,categoryAuthority:p}=(e=>{const t=e&&j(e,"InLine"),i=t&&j(t,"Category");return i?{category:q(i),categoryAuthority:Z(i,"authority")}:{}})(o),f=(e=>e&&W(e))(o),g=(e=>e&&ie(e))(o),m=(e=>e&&j(e,"Linear"))(g),v=(e=>e&&Ys(e,"AdServingId"))(f),A=(e=>{const t=e&&j(e,"VAST");return t?Z(t,"version"):"unknown"})(a),E=(e=>e&&Ys(e,"Advertiser"))(f),y=(e=>e&&Ys(e,"AdTitle"))(f),T=(e=>e&&Ys(e,"Description"))(f),_=(e=>e&&Ys(e,"Duration"))(m),b=(e=>e?J(e):void 0)(_);let S,C,R,w,k,L,I,O,D,P,N,M,x=[],B=[],F=[],U=[],$=[];if(ge(o)){[S,...x]=t,[C,...B]=i,[R,...F]=n,[w,...U]=r,k=o&&Te(o),L=l?be(l):void 0;const e=(e=>e&&j(e,"UniversalAdId"))(g);I=e&&q(e),O=e&&Z(e,"idRegistry"),$=o&&Ae(o)||[],D=Boolean(o&&Ee(o)),N=m&&Z(m,"skipoffset"),M=N?J(N):void 0,P=Boolean(N)}else fe(e[0].ad)&&(x=t,B=i,F=n,U=r);return{adId:S,adServingId:v,adSystem:C,adTitle:y,advertiser:E,adWrapperCreativeAdIds:U,adWrapperCreativeIds:F,adWrapperIds:x,adWrapperSystems:B,category:u,categoryAuthority:p,clickThroughUrl:k,creativeAdId:w,creativeData:L,creativeId:R,description:T,duration:_,durationInMs:b,mediaFiles:$,pricing:c,pricingCurrency:d,pricingModel:h,skipOffset:N,skipOffsetInMs:M,skippable:P,universalAdId:I,universalAdIdRegistry:O,vastVersion:A,vpaid:D}};var Ws=i(478),qs=i(5044),Xs=i(4729);class Zs{static getDeviceName(){return a.Browser.isAndroid?"1":a.Browser.isiOS?"0":""}static getDeviceType(){var e,t;const{isMobile:i,userAgent:s,os:n}=a.Browser;return"iPhone"===n.name||"iPod"===n.name?"1":"iPad"===n.name?"2":"Android"===n.name&&(null===(e=window.screen)||void 0===e?void 0:e.width)<=1280?"3":"Android"===n.name?"4":"Windows Phone"===n.name?"5":~s.indexOf("tizen")&&(null===(t=window.screen)||void 0===t?void 0:t.width)<=1280?"7":~s.indexOf("tizen")?"8":i?"15":~s.indexOf("SmartTV")?~s.indexOf("NetCast")||~s.indexOf("LG")?"9":~s.indexOf("Samsung")||~s.indexOf("X11")?"10":~s.indexOf("Philips")?"11":~s.indexOf("Sony")?"12":"14":"16"}static getBrowserName(){const{isMobile:e,userAgent:t,data:i,os:s}=a.Browser;if(~t.indexOf("YaBrowser")&&(i.name="YaBrowser"),~t.indexOf("OPR")&&(i.name="Opera"),~t.indexOf("Edg")&&(i.name="Edge"),e){if("YaBrowser"===i.name)return"6";if("Edge"===i.group||"Edge"===i.name)return"22";if("Opera"===i.group||"Opera"===i.name)return"24";if("Chrome Mobile"===i.name||"Chrome"===i.group)return"7";if("Android Browser"===i.name)return"20";if("Explorer"===i.group)return"21";if("Firefox"===i.group)return"23";if("Safari"===i.group&&"iPad"===s.name)return"25";if("Safari"===i.group&&"iPhone"===s.name)return"26"}else{if("Explorer"===i.group)return"1";if("YaBrowser"===i.name)return"6";if("Edge"===i.group||"Edge"===i.name)return"2";if("Opera"===i.group||"Opera"===i.name)return"9";if("Firefox"===i.group)return"3";if("Netscape"===i.group)return"4";if("Safari"===i.group)return"5";if("Chrome"===i.group)return"7";if("Mozilla"===i.group)return"8"}return"27"}static getScreenSize({width:e=640,minWidth:t=0}){return e<t&&(e=t),e<400?"5":e<640?"0":e<960?"1":e<1280?"2":e>=1280?"3":"4"}}class Qs{constructor(e){var t;this.clickElement="container",Object.assign(this,null!==(t=Qs.CHANNELS[e])&&void 0!==t?t:Qs.CHANNELS.unknown)}}Qs.CHANNELS={uchannelrussia:{allowBlock:!0,showBlockNumber:!1,maxBlockLength:1/0,reloadFailedAdTag:!0,getNextAdBlockSources:!1},rvtest:{clickElement:a.Browser.isMobile?"button":"container"},championat:{middleRollStartTime:2,clickElement:a.Browser.isMobile?"button":"container"},unknown:{reloadFailedAdTag:!1}};class Js extends a.L6{static async preload(e){}static destroy(){}static canPlay(...e){return!0}get playerError(){return this.core.playerError}constructor(e,t){super(e),this.createError=a.PZ.createError.bind(this),this.core=t}}var en=i(4968),tn=i(6448);class sn extends Js{constructor(){super(...arguments),this.currentTime=0,this.onAdStarted=e=>{this.trigger(qs.z.ADPLAYBACK_STARTED,this.sources)},this.onAdImpression=e=>{this.trigger(qs.z.ADPLAYBACK_IMPRESSION,this.sources)},this.onAdPaused=e=>{this.trigger(qs.z.ADPLAYBACK_PAUSED,this.sources)},this.onAdResumed=e=>{this.trigger(qs.z.ADPLAYBACK_RESUMED,this.sources)},this.onAdComplete=e=>{this.trigger(qs.z.ADPLAYBACK_COMPLETE,this.sources)},this.onAdUserClose=e=>{this.trigger(qs.z.ADPLAYBACK_USER_CLOSE,this.sources)},this.onAdVolumeChange=e=>{this.trigger(qs.z.ADPLAYBACK_VOLUME_CHANGE,this.sources)},this.onAdContentResumeRequested=e=>{this.trigger(qs.z.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.sources)},this.onAdError=e=>{const t=e.getError(),i=t.getErrorCode(),s=i===this.ima.AdError.ErrorCode.VIDEO_PLAY_ERROR||i===this.ima.AdError.ErrorCode.FAILED_TO_REQUEST_ADS||i===this.ima.AdError.ErrorCode.VAST_ASSET_MISMATCH||i===this.ima.AdError.ErrorCode.VAST_LINEAR_ASSET_MISMATCH||i===this.ima.AdError.ErrorCode.VAST_NONLINEAR_ASSET_MISMATCH||i===this.ima.AdError.ErrorCode.VAROR||i===this.ima.AdError.ErrorCode.COMPANION_REQUIRED_ERROR||i===this.ima.AdError.ErrorCode.UNKNOWN_ERROR||i===this.ima.AdError.ErrorCode.AUTOPLAY_DISALLOWED,n=this.createError({code:`${null!=i?i:"unknown"}`,description:t.getMessage(),level:a.rG.Levels.WARN,raw:Object.assign(Object.assign({},this.sources),{canRefetch:s,code:i})});this.trigger(qs.z.ADPLAYBACK_ERROR,n)}}static canPlay(e){var t;return!!(null===(t=window.google)||void 0===t?void 0:t.ima)&&"VAST"===e.provider&&!!e.url}static async preload(e){var t,i;if(!(null===(t=window.google)||void 0===t?void 0:t.ima))return null!==(i=sn.preloadPromise)&&void 0!==i||(sn.preloadPromise=new Promise((async e=>{var t,i,s,n;try{await(0,en.ve)(`//imasdk.googleapis.com/js/sdkloader/${(0,tn.L1)()?"ima3_debug":"ima3"}.js`),null===(t=window.google)||void 0===t||t.ima.settings.setPlayerType("@rambler-vp/player"),null===(i=window.google)||void 0===i||i.ima.settings.setPlayerVersion("1.129.0"),null===(s=window.google)||void 0===s||s.ima.settings.setLocale(a.Utils.getBrowserLanguage()),null===(n=window.google)||void 0===n||n.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE)}catch(e){delete sn.preloadPromise}finally{e(null)}}))),sn.preloadPromise}static destroy(){var e;null===(e=sn.adDisplayContainer)||void 0===e||e.destroy(),delete sn.adDisplayContainer}get adDisplayContainer(){return sn.adDisplayContainer}set adDisplayContainer(e){sn.adDisplayContainer=e}get allowBlock(){return!1}get reloadFailedAdTag(){return!1}get name(){return"imaPlayback"}get ima(){var e;return null===(e=window.google)||void 0===e?void 0:e.ima}async load(e){this.sources=e,this.sources.url=e.url.replace(/\[sessionid\]/g,a.Utils.uniqueId("")),await this.createAdDisplayContainer(),await this.createAdsRequest(),await this.loadAdsManager(),await this.initAdsManager()}async createAdDisplayContainer(){if(!this.adDisplayContainer){const{containerElement:e,videoElement:t,clickTrackingElement:i}=this.options;this.adDisplayContainer=new this.ima.AdDisplayContainer(e,t,i),this.adDisplayContainer.initialize()}}async createAdsRequest(){const{videoElement:e,muted:t}=this.options;this.adsRequest=new this.ima.AdsRequest,this.adsRequest.adTagUrl=this.sources.url,this.adsRequest.vastLoadTimeout=sn.VAST_LOAD_TIMEOUT,this.adsRequest.linearAdSlotWidth=e.offsetWidth,this.adsRequest.linearAdSlotHeight=e.offsetHeight,this.adsRequest.nonLinearAdSlotWidth=e.offsetWidth,this.adsRequest.nonLinearAdSlotHeight=e.offsetHeight,this.adsRequest.setAdWillAutoPlay(!0),this.adsRequest.setAdWillPlayMuted(t)}async loadAdsManager(){let e;try{this.adsLoader=new this.ima.AdsLoader(this.adDisplayContainer),e=await new Promise(((e,t)=>{this.adsLoader.addEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e),this.adsLoader.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,t),this.adsLoader.requestAds(this.adsRequest)}))}catch(e){return void this.onAdError(e)}const t=new this.ima.AdsRenderingSettings;t.loadVideoTimeout=sn.LOAD_VIDEO_TIMEOUT,t.restoreCustomPlaybackStateOnAdBreakComplete=!1,this.adsManager=e.getAdsManager(this.options.videoElement,t),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOADED,(e=>this.onAdLoaded(e))),this.adsManager.addEventListener(this.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested),this.adsManager.addEventLis),this.adsManager.addEventListener(this.ima.AdEvent.Type.STARTED,this.onAdStarted),this.adsManager.addEventListener(this.ima.AdEvent.Type.IMPRESSION,this.onAdImpression),this.adsManager.addEventListener(this.ima.AdEvent.Type.AD_PROGRESS,(e=>this.onAdProgress(e))),this.adsManager.addEventListener(this.ima.AdEvent.Type.VOLUME_CHANGED,this.onAdVolumeChange),this.adsManager.addEventListener(this.ima.AdEvent.Type.VOLUME_MUTED,this.onAdVolumeChange),this.adsManager.addEventListener(this.ima.AdEvent.Type.PAUSED,this.onAdPaused),this.adsManager.addEventListener(this.ima.AdEvent.Type.RESUMED,this.onAdResumed),this.adsManager.addEventListener(this.ima.AdEvent.Type.COMPLETED,this.onAdComplete),this.adsManager.addEventListener(this.ima.AdEvent.Type.USER_CLOSE,this.onAdUserClose),this.adsManager.addEventListener(this.ima.AdEvent.Type.CLICK,(e=>this.onAdClick(e))),this.adsManager.addEventListener(this.ima.AdEvent.Type.SKIPPED,(e=>this.onAdSkipped(e)))}async initAdsManager(){if(this.adsManager){const{videoElement:e}=this.options;this.adsManager.init(e.offsetWidth,e.offsetHeight,this.ima.ViewMode.NORMAL),this.trigger(qs.z.ADPLAYBACK_READY,this.sources)}}onAdLoaded(e){this.ad=e.getAd(),this.trigger(qs.z.ADPLAYBACK_LOADED,this.sources),this.isLinear()||this.options.videoElement.play()}onAdProgress(e){const{duration:t=0,currentTime:i=0}=e.getAdData();this.currentTime=i,this.trigger(qs.z.ADPLAYBACK_PROGRESS,Object.assign(Object.assign({},this.sources),{current:i,total:t}))}onAdClick(e){this.trigger(qs.z.ADPLAYBACK_CLICK,this.sources)}onAdSkipped(e){this.trigger(qs.z.ADPLAYBACK_SKIPPED,this.sources)}start(){var e;null===(e=this.adsManager)||void 0===e||e.start()}pause(){var e;null===(e=this.adsManager)||void 0===e||e.pause()}resume(){var e;null===(e=this.adsManager)||void 0===e||e.resume()}skip(){var e,t,i,s;(null===(e=this.adsManager)||void 0===e?void 0:e.getAdSkippableState())?null===(t=this.adsManager)||void 0===t||t.skip():(null===(i=this.adsManager)||void 0===i||i.addEventListener(this.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(e=>this.onAdSkipped(e))),null===(s=this.adsManager)||void 0===s||s.stop())}setVolume(e){var t;null===(t=this.adsManager)||void 0===t||t.setVolume(e/100)}getVolume(){var e,t;return 100*(null!==(t=null===(e=this.adsManager)||void 0===e?void 0:e.getVolume())&&void 0!==t?t:0)}resize(e){var t;null===(t=this.adsManager)||void 0===t||t.resize(e.width,e.height,this.ima.ViewMode.NORMAL)}getDuration(){var e,t;return null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getDuration())&&void 0!==t?t:0}getCurrentTime(){return this.currentTime}isLinear(){var e,t;return null===(t=null===(e=this.ad)||void 0===e?void 0:e.isLinear())||void 0===t||t}getAdSystem(){var e,t;return null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getAdSystem())&&void 0!==t?t:"unknown"}getAdType(){var e,t;const i=null===(t=null===(e=this.ad)||void 0===e?void 0:e.getApiFramework())||void 0===t?void 0:t.toLowerCase();return i?"vpaid"===i?"vpaid":"vast":"unknown"}destroy(){var e,t,i;null===(e=this.adsLoader)||void 0===e||e.contentComplete(),null===(t=this.adsLoader)||void 0===t||t.destroy(),null===(i=this.adsManager)||void 0===i||i.destroy()}}sn.VAST_LOAD_TIMEOUT=8e3,sn.LOAD_VIDEO_TIMEOUT=1e4,sn.adDisplayContainer=null;var nn=i(2792),rn=i(2649);const on=(e,t)=>{var i;return e.url=t?null===(i=e.url)||void 0===i?void 0:i.replace(/puid3=\d+/g,`puid3=${t}`):e.url,e};let an;const ln=async(e,t)=>{if(!t.sspJparams)return e;try{const i=(0,o.DP)(e),s=JSON.parse(i.jparams),n=t.sspJparams,{puid6:r}=n,a=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(n,["puid6"]),l=JSON.stringify(Object.assign(Object.assign(Object.assign({},s),a),r&&{section:r}));return(0,o.MF)(e,{jparams:l})}catch(t){return e}},cn=(e,t=0)=>a.Browser.isMobile||+e.width>=480||t>2?e:{width:480,height:480*+e.height/+e.width},dn=[{name:"ssp.rambler.ru",allowBlock:!1,reloadFailedAdTag:!0,showRemainingTimeToEnd:!0,addUrlParams:async(e,t)=>{var i;const s=await ln(e,t),{provider:n,sspUserId:r,sspUserIdScope:a}=t;an||(an=await(null===(i=null==n?void 0:n.getFingerPrintUserId)||void 0===i?void 0:i.call(n)));const l=Object.assign(Object.assign(Object.assign({videoplayer:"@rambler-vp/player",videoplayerver:"1.129.0",outstreamvideo:0},an?{fpruid:an}:{}),r?{publisher_uid:r}:{}),a?{publisher_uid_scope:a}:{});return(0,o.MF)(s,l)},getSize:cn},{name:"(ad.mail.ru|(adfox.ru|yandex.ru/ads/adfox)/378150)",allowBlock:void 0,showBlockNumber:!0,maxBlockLength:2,reloadFailedAdTag:!0,showRemainingTimeToEnd:!0,addUrlParams:ln,getSize:cn,getNextAdBlockSources:on},{name:"(adfox.ru|yandex.ru/ads/adfox).*(eid1=6806|puid30=6806)",allowBlock:!0,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e),getNextAdBlockSources(e,t){const i=on(e,t);return i.url=i.url.replace(/eid1=6806/g,"eid1=10620").replace(/puid6=1/g,"puid6=2").replace(/puid30=6806/g,"puid30=10620"),i}},{name:"(adfox.ru|yandex.ru/ads/adfox).*(eid1=11761|puid30=11761|puid6=2)",allowBlock:!0,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e),getNextAdBlockSources(e,t){const i=on(e,t);return i.url=i.url.replace(/eid1=6806/g,"eid1=10620").replace(/puid6=1/g,"puid6=2").replace(/puid30=6806/g,"puid30=10620"),i}},{name:"(adfox.ru|yandex.ru/ads/adfox).*(eid1=6798|puid30=6798)",allowBlock:!0,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e),getNextAdBlockSources(e,t){const i=on(e,t);return i.url=i.url.replace(/eid1=6806/g,"eid1=10620").replace(/puid6=1/g,"puid6=2").replace(/puid30=6806/g,"puid30=10620"),i}},{name:"(adfox.ru|yandex.ru/ads/adfox)",allowBlock:!1,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e)},{name:"muz-tv.ru",allowBlock:!1,showBlockNumber:!0,getSkipTime:e=>(e.skipTime2>=0&&(e.skipTime=e.skipTime2),e)}];var hn=i(7570);const un=(0,hn.X)((()=>i.e(3181).then(i.bind(i,3181)))),pn=(0,hn.X)((()=>i.e(3901).then(i.bind(i,3901))));class fn extends Js{constructor(){super(...arguments),this.currentTime=0,this.started=!1,this.destroyed=!1,this.isResizedAfter2s=!1,this.adSystem={},this.errors=[],this.extensions={startTime:0,skipTime:-1,skipTime2:-1,controls:!0,isClickable:!0,WOW:!1,Allowblock:!1,CustomTracking:{}},this.applyContainerClassNames=Dt()((()=>{var e,t;null===(t=null===(e=this.getContainerClassNames)||void 0===e?void 0:e.call(this,{height:this.core.el.offsetHeight}))||void 0===t||t.forEach((e=>{this.core.$el.toggleClass(...e)}))}),60),this.onAdLoaded=(e=[])=>(this.errors=[],this.vastChain=e,this.details=Hs(e),this.parseExtensions(),this.parseSkipTimeOffset(),this.trigger(qs.z.ADPLAYBACK_LOADED,Object.assign(Object.assign({},this.sources),{requestTags:e.map((e=>{var t;return null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.url}))})),this.trackURLs(this.customTracking.onVastLoad),this.hasMediaFiles||this.trackURLs(this.customTracking.onVastEmpty),this.subscribeOnSizeChanges(),e),this.onAdReady=e=>{var t;if(this.destroyed)return void(e.isFinished()||e.cancel());const{videoElement:i,muted:s}=this.options;null!=s&&(this.muted=i.muted,i.muted=s),this.muted&&(this.volume=i.volume,i.volume=0),this.ad=e,this.adSize&&this.adSize.width!==(null===(t=this.currentSize)||void 0===t?void 0:t.width)&&this.setAdElementsSize(this.adSize),this.ad.on("start",this.onAdStarted),this.ad.on("impression",this.onAdImpression),this.ad.on("volumeChanged",this.onAdVolumeChange),this.ad.on("pause",this.onAdPaused),this.ad.on("resume",this.onAdResumed),this.ad.on("closeLinear",this.onAdUserClose),this.ad.on("clickThrough",this.onAdClick),this.ad.on("skip",this.onAdSkipped),this.ad.on("complete",this.onAdComplete)},this.onAdStarted=()=>{this.adSize&&this.ad.resize(this.adSize.width,this.adSize.height,"normal"),this.started=!0,this.startAdProgressInterval(),this.trigger(qs.z.ADPLAYBACK_STARTED,this.sources);const{$el:e,advertisement:t,controls:i,isWOW:s,isClickable:n,linkTxt:r,showRemainingTimeToEnd:o,skipTime2:a,i18n:l}=this;if((i||s)&&this.$panel.show(),!i||!t||!e)return;this.bindControlsEvents(),this.changeVolumeUI(this.getVolume()),this.$panelText.show(),this.$seekBar.show(),this.$volumeButton.show();const c=this.getDuration();let d;a>=0&&a<Math.floor(c)?d=a:o&&(d=c),null!=d&&(this.$skipTime.find("span").html(String(Math.ceil(d))),this.showPreview()),n&&(this.$acceptButton.show(),r&&this.$acceptButton.find("span").html(decodeURIComponent(r))),"object"==typeof i&&Object.keys(i).forEach((e=>{const t="adlabel"===e?this.$acceptButton:"soundbtn"===e?this.$volumeButton:null;(null==t?void 0:t.length)&&t.toggle("0"!==i[e]&&"-1"!==i[e])}));const{allowBlock:h,blockCompleteCount:u,maxBlockLength:p,showBlockNumber:f}=t,g=h&&f&&u<p,m=u+1,v=isFinite(p)?p:1;let A;this.$blockCount.text([l.t("advertisement_block"),m,l.t("advertisement_block_of"),v].join(" ")),e.toggleClass(this.classNames.withSkip,null!=d).toggleClass(this.classNames.skipActive,0===a).toggleClass(this.classNames.withRemainTime,o).toggleClass(this.classNames.withBlockCount,g).toggleClass(this.classNames.withLabel,!g).toggleClass(this.classNames.hasMoreBlocks,m<v).toggleClass(this.classNames.timerDisabled,!1),A=g?`${l.t("advertisement_block_number")} ${u}`:this.$panelText.hasClass("eagleplayer-advertisement-old")?l.t("advertisement"):"",this.$panelText.html(A)},this.toggleMute=()=>{var e,t,i;const s=(null===(e=this.mediaControl)||void 0===e?void 0:e.muted)?10:0;this.setVolume(s),this.changeVolumeUI(s),null===(t=this.mediaControl)||void 0===t||t.toggleMute(),null===(i=this.notifier)||void 0===i||i.showMessage(this.i18n.t(s?"unmuted":"muted"),this.classNames.volumeMessage)},this.onAdImpression=()=>{this.trigger(qs.z.ADPLAYBACK_IMPRESSION,this.sources)},this.onAdProgress=()=>{var e,t,i,s,n;const r=null!==(e=this.ad.duration())&&void 0!==e?e:0,o=this.getDuration();let a=this.ad.currentTime();if(null==a||Number.isNaN(a)){const e=null===(i=null===(t=this.ad.videoAdContainer)||void 0===t?void 0:t.videoElement)||void 0===i?void 0:i.currentTime;"number"!=typeof e||Number.isNaN(e)||(a=e)}if(null===(s=this.$el)||void 0===s||s.toggleClass(this.classNames.timerDisabled,null==a||Number.isNaN(a)),null==a||Number.isNaN(a)||a===this.currentTime)return;a<0&&0===r&&o>0&&(a+=o,a<0&&(a=0)),this.currentTime=a,this.trigger(qs.z.ADPLAYBACK_PROGRESS,Object.assign(Object.assign({},this.sources),{current:a,total:o})),a>2&&this.adSystem.getSize&&this.adSize&&this.currentSize&&!this.isResizedAfter2s&&(this.adSize.width!==this.currentSize.width&&(this.restoreAdElementsSize(),this.resize(this.currentSize)),this.isResizedAfter2s=!0);const{advertisement:l,controls:c,isWOW:d,showRemainingTimeToEnd:h,skipTime2:u}=this;if(o<=0||!c||!l)return;const{blockCompleteCount:p,maxBlockLength:f}=l,g=Math.min(a,o),m=u>=0&&u<=o?u:null,v=null!=m&&m>g?Math.ceil(m-g):null,A=Math.ceil(o-g);let E;if(this.$seekBar.css("width",g/o*100+"%"),p<f){const e=this.core.activeContainer.el.offsetWidth<400;if(A>0)if(null!=m||e){if(h){const t=e?A:(0,Xs.pT)(1e3*A);this.$panelText.html(`${t} .`)}}else E=A}if(null!=v?E=v:d?this.$panel.hide():null!=m&&this.$skipButton.removeClass("eagleplayer-advertisement-skip-button-disabled").show(),null!=E&&this.$skipButton.addClass("eagleplayer-advertisement-skip-button-disabled").show().find(".eagleplayer-advertisement-skip-timer").html(String(E)),null!=m||h){const e=null!=m?null!=v?v:0:A;this.$skipTime.find("Names.skipActive,null!=m&&m<g)},this.onAdPaused=()=>{cressInterval),this.trigger(qs.z.ADPLAYBACK_PAUSED,this.sources)},this.onAdResumed=()=>{this.startAdProgressInterval(),this.trigger(qs.z.ADPLAYBACK_RESUMED,this.sources)},this.onAdUserClose=()=>{this.trigger(qs.z.ADPLAYBACK_USER_CLOSE,this.sources)},this.onAdVolumeChange=()=>{this.trigger(qs.z.ADPLAYBACK_VOLUME_CHANGE,this.sources)},this.onAdClick=()=>{this.trigger(qs.z.ADPLAYBACK_CLICK,this.sources),this.trackURLs(this.addClick)},this.onAdSkipped=()=>{this.trigger(qs.z.ADPLAYBACK_SKIPPED,this.sources)},this.onAdComplete=()=>{this.trigger(qs.z.ADPLAYBACK_COMPLETE,this.sources)},this.onAdError=(e,t)=>{var i,s,n;const r=null!==(s=null===(i=t.vastChain)||void 0===i?void 0:i.map((e=>{var t;return null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.url})))&&void 0!==s?s:[],o=fn.REFETCH_ERRORS.includes(e.code),l=this.createError({code:`${null!==(n=e.code)&&void 0!==n?n:"unknown"}`,description:e.message,level:a.rG.Levels.WARN,raw:Object.assign(Object.assign({},this.sources),{requestTags:r,canRefetch:o,code:e.code})});"No next ad to request"!==e.message&&this.errors.unshift(l),this.trigger(qs.z.ADPLAYBACK_WARNING,l)},this.onAdFinish=()=>{var e;if(this.destroyed)return;this.restoreDefaultVideoElement();const[t]=this.errors,i=!this.started&&fn.NOT_STARTED_ERRORS.includes(null===(e=null==t?void 0:t.raw)||void 0===e?void 0:e.code);if(this.vastChain&&i){const e=new Error("the vast ad was loaded but did not start"),i=this.vastChain.map((e=>{var t;return null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.url})),s={requestTags:i,XML:this.vastChain.slice(0,1).map((e=>null==e?void 0:e.XML))}for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(t,["raw"]);s.vastError=Object.assign(Object.assign({},i),{raw:{index:null==e?void 0:e.index,mute:null==e?void 0:e.mute,type:null==e?void 0:e.type}})}(0,rn.Tb)(e,Object.assign(Object.assign({},s),{errorCode:s.vastError?String(s.vastError.code):"unknown"}))}t?this.trigger(qs.z.ADPLAYBACK_ERROR,t):this.trigger(qs.z.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.sources)},this.getRectParams=e=>{const t=e.width||0,i=e.height||0;return{aspectRatio:i?Math.floor(t/i*10)/10:0,height:i,width:t}},this.getMediaFis.getRectParams({width:Number(this.embedSize.width),height:Number(this.embedSize.height)});return e.slice(0).sort(((e,i)=>{const s=this.getRectParams(e),n=this.getRectParams(i),r=Math.abs(t.widt-Math.abs(t.aspectRatio-n.aspectRatio)||r-o}))[0]},this.skip=()=>{var e,t;const{skipOffsetInMs:i}=this.details;this.trackURLs(this.skipAd),this.trackURLs(this.customTracking.onSkipAd),null!=i&&i>=0?null===(e=this.ad)||void 0===e||e.skip():null===(t=this.ad)||void 0===t||t.cancel()},this.setPreviewTimeout=()=>{this.clearPreviewTimeout(),this.previewTimeout=window.setTimeout(this.hidePreview.bind(this),3e3)},this.clearPreviewTimeout=()=>{window.clearTimeout(this..previewVisible,!0),this.setPreviewTimeout()},this.hidePreview=()=>{var e;null===(e=this.clearPreviewTimeout)||void 0===e||e.call(this),this.$preview.toggind((t=>{var i;return t.name&&(null===(i=e.url)||void 0===i?void 0:i.match(new Rconst i=[];if(fn.loaded||(fn.loaded=!0),!fn.template){const n=null===(t=e.mediaControl)||void 0===t?void 0:t.skinName,r=n&&s[n]||un;"function"==typeof r&&i.push(r().then((e=>{const{default:t,classNames:i,getContainerClassNames:s}=e;t&&(fn.template=t),i&&(fn.classNames=i),fn.getContainerClassNames=s})))}await Promise.all(i)}}get template(){return(0,a.XK)(fn.template)}get classNames(){return fn.classNames}get getContainerClassNames(){return fn.getContainerClassNames}get name(){return"vastPlayback"}get reloadFailedAdTag(){return this.adSystem.reloadFailedAdTag}get showRemainingTimeToEnd(){return Boolean(this.adSystem.showRemainingTimeToEnd)}get allowBlock(){var e;return null!==(e=this.adSystem.allowBlock)&&void 0!==e?e:!1===this.extensions.Allowblock&&this.extensions.Allowblock}get showBlockNumber(){return this.adSystem.showBlockNumber}get maxBlockLength(){return this.adSystem.maxBlockLength}get getNextAdBlockSources(){return this.adSystem.getNextAdBlockSources}get controls(){return this.extensions.controls}get isWOW(){return this.extensions.WOW}get isClickable(){return this.extensions.isClickable}get linkTxt(){var e;return null!==(e=this.extensions.linkTxt)&&void 0!==e?e:""}get skipTime(){return this.extensions.skipTime}get skipTime2(){return this.extensions.skipTime2}get customTracking(){return this.extensions.CustomTracking}get hasMediaFiles(){var e;return Boolean(null===(e=this.details.mediaFiles)||void 0===e?void 0:e.length)}get addClick(){var e;return null!==(e=this.extensions.addClick)&&void 0!==e?e:[]}get skipAd(){var e;return null!==(e=this.extensions.skipAd)&&void 0!==e?e:[]}get i18n(){return this.core.i18n}get mediaControl(){return this.core.getPlugin("mediaControl")}get notifier(){return this.core.getPlugin("notifier")}get advertisement(){return this.core.getPlugin("advertisement")}get docking(){return this.core.getP.sources.url=e.url.replace(/\[sessionid\]/g,a.Utils.uniqueId("")),this.sources.url=null!==(n=await(null===(s=(i=this.adSystem).addUrlParams)||void 0===s?void 0:s.call(i,this.sources.url,this.core.options)))&&void 0!==n?n:this.sources.url,this.currentSize={width:this.options.videoElement.offsetWidth,height:this.options.videoElement.offsetHeight},this.adSize=null!==(l=null===(o=(r=this.adSystem).getSize)||void 0===o?void 0:o.call(r,this.currentSize))&&void 0!==l?l:this.currentSize,this.embedSize=null!==(d=null===(c=this.docking)||void 0===c?void 0:c.getEmbedSize())&&void 0!==d?d:this.currentSize,this.trigger(qs.z.ADPLAYBACK_READY,this.sources)}bindControlsEvents(){var e,t,i,s,n;null===(e=this.$volumeButton)||void 0===e||e.on("click",this.toggleMute),null===(t=this.$skipButton)||void 0===t||t.on("click",this.skip),null===(i=this.$skip)||void 0===i||i.on("click",this.skip),null===(s=this.$showPreview)||void 0===s||s.on("click",this.showPreview),null===(n=this.$hidePreview)||void 0===n||n.on("click",this.hidePreview)}unbindControlsEvents(){var e,t,i,s,n;null===(e=this.$volumeButton)||void 0===e||e.off("click",this.toggleMute),null===(t=this.$skipButton)||void 0===t||t.off("click",this.skip),null===(i=this.$skip)||void 0===i||i.off("click",this.skip),null===(s=this.$showPreview)||void 0===s||s.off("click",this.showPreview),null===(n=this.$hidePreview)||void 0===n||n.off("click",this.hidePreview)}subscribeOnSizeChanges(){window.addEventListener("resize",this.applyContainerClassNames),window.addEventListener("orientationchange",this.applyContainerClassNames),this.applyContainerClassNames()}unsubscribeFromSizeChanges(){var e,t;window.removeEventListener("resize",this.applyContainerClassNames),window.removeEventListener("orientationchange",this.applyContainerClassNames),null===(t=null===(e=this.getContainerClassNames)||void 0===e?void 0:e.call(this,{height:this.core.el.offsetHeight}))||void 0===t||t.forEach((([e])=>{this.core.$el.toggleClass(e,!1)}))}changeVolumeUI(e){const{hasSound:t}=this.classNames;t?this.$v,e>0):(this.$volumeButton.find(".epvi-none").toggle(0===e),this.$volumeButton.find(".epvi-1").toggle(e>0),this.$volumeButton.find(".epvi-2").toggle(e>10),this.$volumeButton.find(".epvi-3").toggle(e>20))}startAdProgressInterval(){this.isLinear()&&(this.adProgressInterval=window.setInterval(this.onAdProgress,500))}setAdElementsSize(e){var t;this.options.videoElement.style.width=`${e.width}px`,this.options.videoElement.style.height=`${e.height}px`,(null===(t=this.ad)||void 0===t?void 0:t.videoAdContainer)&&(this.ad.videoAdContainer.element.style.width=`${e.width}px`,this.ad.videoAdContainer.element.style.height=`${e.height}px`)}restoreAdElementsSize(){var e;this.restoreDefaultVideoElement(),(null===(e=this.ad)||void 0===e?void 0:e.videoAdContainer)&&(this.ad.videoAdContainer.element.style.width="100%",this.ad.videoAdContainer.element.style.height="100%")}restoreDefaultVideoElement(){var e,t;(null===(e=this.adSize)||void 0===e?void 0:e.width)!==(null===(t=this.currentSize)||void 0===t?void 0:t.width)&&(this.options.videoElement.style.width="100%",this.options.videoElement.style.height="100%"),null!=this.muted&&(this.options.videoElement.muted=this.muted),null!=this.volume&&(this.options.videoElement.volume=this.volume)}parseExtensions(){var e,t,i,s,n,r,o,a,l,c,d,h,u,p;const f=[...null!==(e=this.vastChain)&&void 0!==e?e:[]].reduce(((e,t)=>{var i,s,n,r,o,a;return[...e,...null!==(a=null===(o=null===(r=null===(n=null===(s=null===(i=null==t?void 0:t.ad)||void 0===i?void 0:i.elements)||void 0===s?void 0:s[0])||void 0===n?void 0:n.elements)||void 0===r?void 0:r.filter((e=>"extensions"===e.name))[0])||void 0===o?void 0:o.elements)&&void 0!==a?a:[]]}),[]);if(null==f?void 0:f.length)for(let e=0;e<f.length;e++){const g=f[e],m=null===(t=g.attributes)||void 0===t?void 0:t.type,v=g.elements,A=null===(s=null===(i=null==v?void 0:v[0])||void 0===i?void 0:i.text)||void 0===s?void 0:s.trim();if("startTime"!==m&&"skipTime"!==m&&"skipTime2"!==m||A&&(this.extensions[m]=(0,Xs.MF)(A)),"controls"===m)if(A)"0"===A&&(this.extensions.controls=!1);else if(null==v?void 0:v.length){this.extensions.controls={};for(let e=0;e<v.length;e++){const t=v[e],i=null===(n=t.attributes)||void 0===n?void 0:n.id,s=null===(a=null===(o=null===(r=t.elements)||void 0===r?void 0:r[0])||void 0===o?void 0:o.text)||void 0===a?void 0:a.trim();i&&"layout"===t.name&&s&&(this.extensions.controls[i]=s)}}if("isClickable"===m&&(this.extensions.isClickable="0"!==A),"WOW"!==m&&"Allowblock"!==m||(this.extensions[m]="1"===A),"CustomTracking"===m&&(this.extensions.CustomTracking={},null==v?void 0:v.length))for(let e=0;e<v.len?void 0:d.text)||void 0===h?void 0:h.trim();if("Tracking"===t.name&&i&&s){if("progress"===i){const e=null===(u=t.attributes)||void 0===u?void 0:u.offset;if(!e)continue;i="%"===e.charAt(e.length-1)?`progress-${e}`:`progress-${Math.round((0,Xs.RA)(e))}`}Array.isArray(this.extensions.CustomTracking[i])||(this.extensions.CustomTracking[i]=[]),null===(p=this.extensions.CustomTracking[i])||void 0===p||p.push(s)}}"skipAd"!==m&&"addClick"!==m||A&&(this.extensions[m]=[A]),"linkTxt"===m&&A&&(this.extensions.linkTxt=A)}}parseSkipTimeOffset(){var e,t,i;const{durationInMs:s,skipOffsetInMs:n}=this.details;(this.extensions.skipTime>=0||this.extensions.skipTime2>=0)&&(this.extensions=null!==(i=null===(t=(e=this.adSystem).getSkipTime)||void 0===t?void 0:t.call(e,this.extensions,s/1e3))&&void 0!==i?i:this.extensions),this.extensions.skipTime2<0&&null!=n&&n>=0&&(this.extensions.skipTime2=n/1e3)}trackURLs(e){var t;if(!e||0===e.length)return;const i={};if(this.isLinear()){const{mediaFiles:e,durationInMs:s}=this.details;(null===(t=e[0])||void 0===t?void 0:t.src)&&(i.ASSETURI=(0,o.hw)(e[0].src)),s&&(i.CONTENTPLAYHEAD=(0,o.hw)((0,Xs.pT)(s,{hours:!0,ms:!0})))}i.CACHEBUSTING=(0,nn._)(Math.round(1e8*Math.random()).toString(),"0",8),i.TIMESTAMP=(0,o.hw)((new Date).toISOString()),i.RANDOM=i.random=i.CACHEBUSTING,e.forEach((e=>{if("string"==typeof e){for(const t in i){const s=i[t];e=e.replace(`[${t}]`,s).replace(`%%${t}%%`,s)}(new Image).src=e}}),{})}createInvisibleElement(){const e=document.createElement("div");return e.style.position="absolute",e.style.width="0px",e.style.height="0px",e.style.display="none",e}start(){var e;const{advertisement:t}=this;if(this.destroyed||!t)return;this.render();const{containerElement:i,videoElement:s,clickTrackingElement:n}=this.options,r="button"===(null===(e=t.channel)||void 0===e?void 0:e.clickElement)&&this.$acceptButton.get(0)||n;Ks(this.sources.url,i,{videoElement:s,responsive:!0,pauseOnAdClick:!1,timeout:fn.VAST_LOAD_TIMEOUT,onAdReady:this.onAdReady,onError:this.onAdError,onRunFinish:this.onAdFinish,hooks:{createSkipControl:this.createInvisibleElement,createClickControl:r&&(()=>r),getMediaFile:this.getMediaFile,transformVastResponse:this.onAdLoaded}})}pause(){var e,t;(null===(e=this.ad)||void 0===e?void 0:e.isStarted())&&(null===(t=this.ad)||void 0===t||t.pause())}resume(){var e,t;(null===(e=this.ad)||void 0===e?void 0:e.isStarted())&&(null===(t=this.ad)||void 0===t||t.resume())}setVolume(e){var t;null===(t=this.ad)||void 0===t||t.setVolume(e/100)}getVolume(){var e,t;return 100*(null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getVolume())&&void 0!==t?t:0)}resize(e){var t,i,s,n,r,o;if(!(null===(t=this.ad)||void 0===t?void 0:t.isFinished())){const t=null!==(n=null===(s=(i=this.adSystem).getSize)||void 0===s?void 0:s.call(i,e,this.currentTime))&&void 0!==n?n:e;this.currentTime<=2&&this.adSystem.getSize&&this.adSize&&this.currentSize&&(t.width!==e.width?this.setAdElementsSize(t):this.adSize.width!==this.currentSize.width&&this.restoreAdElementsSize()),this.currentSize=e,this.adSize=t,(null===(r=this.ad)||void 0===r?void 0:r.isStarted())&&(null===(o=this.ad)||void 0===o||o.resize(this.adSize.width,this.adSize.height,"normal"))}}getDuration(){var e,t;const i=this.isLinear()?(null===(e=this.ad)||void 0===e?void 0:e.duration())||this.details.durationInMs/1e3:null===(t=this.ad)||void 0===t?void 0:t.duration();return null!=i?i:0}getCurrentTime(){return this.currentTime}isLinear(){var e;return null!=(null===(e=this.details)||void 0===e?void 0:e.durationInMs)}getAdSystem(){var e,t;return null!==(t=null===(e=this.details)||void 0===e?void 0:e.adSystem)&&void 0!==t?t:"unknown"}getAdType(){var e;return this.details?(null===(e=this.details)||void 0===e?void 0:e.vpaid)?"vpaid":"vast":"unknown"}destroy(){var e,t,i;clearInterval(this.adProgressInterval),this.destroyed=!0,(null===(e=this.ad)||void 0===e?void 0:e.isFinished())||null===(t=this.ad)||void 0===t||t.cancel(),this.hideControls(),this.unbindControlsEvents(),this.unsubscribeFromSizeChanges(),null===(i=this.$el)||void 0===i||i.remove(),delete this.$el}hideControls(){const{advertisement:e,$el:t}=this;e&&t&&(this.$panel.hide(),this.$panelText.hide(),this.hidePreview(),t.toggleClass(this.classNames.withSkip,!1).toggleClass(this.classNames.withRemainTime,!1).toggleClass(this.classNames.withBlockCount,!1).toggleClass(this.classNames.withLabel,!1),this.$skipButton.hide(),this.$acceptButton.hide(),this.$volumeButton.hide(),this.$seekBar.hide())}render(){var e;const{advertisement:t}=this;if(!this.core.$el.parents().length||this.$el||!t)return this;const{playList:i}=this.core.options;return this.$el=$(this.template({preview:(null==i?void 0:i.snapshot)||"none",title:null!==(e=null==i?void 0:i.title)&&void 0!==e?e:"",duration:i?(0,Xs.pT)(i.duration):"",i18n:["advertisement","advertisement_link","advertisement_after","advertisement_skip","advertisement_skip_timer","advertisement_watch","advertisement_watch_timer","advertisement_block","advertisement_block_of","unmute"].reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:this.core.i18n.t(t)})),{})})),t.$el.append(this.$el),this.$panel=this.$el.find(".eagleplayer-advertisement-panel"),this.$panelText=this.$el.find(".eagleplayer-advertisement-panel-text"),this.$preview=this.$el.find("[data-ad-preview]"),this.$showPreview=this.$el.find("[data-ad-preview-show]"),this.$hidePreview=this.$el.find("[data-ad-preview-hide]"),this.$skip=this.$el.find("[data-ad-skip]"),this.$skipTime=this.$el.find("[data-ad-skip-time]"),this.$blockCount=this.$el.find("[data-ad-block-count]"),this.$skipButton=this.$el.find(".eagleplayer-advertisement-skip-button"),this.$acceptButton=this.$el.find("[data-ad-accept], .eagleplayer-advertisement-accept-button"),this.$volumeButton=this.$el.find("[data-ad-volume], .eagleplayer-advertisement-volume-button"),this.$seekBar=this.$el.find("[data-ad-seek], .eagleplayer-advertisement-seek-bar"),this.hideControls(),this}}fn.VAST_LOAD_TIMEOUT=3e4,fn.loaded=!1,fn.template="",fn.classNames={},fn.REFETCH_ERRORS=[r.VAST_LINEAR_ASSET_MISMATCH,r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE,r.UNKNOWN_ERROR,r.VPAID_ERROR],fn.NOT_STARTED_ERRORS=[void 0,r.VAST_UNEXPECTED_AD_TYPE,r.VAST_UNEXPECTED_LINEARITY,r.VAST_UNEXPECTED_DURATION_ERROR,r.VAST_UNEXPECTED_MEDIA_FILE,r.VAST_WRAPPER_ERROR,r.VIDEO_PLAY_ERROR,r.VAST_MEDIA_FILE_NOT_FOUND,r.VAST_MEDIA_LOAD_TIMEOUT,r.VAST_LINEAR_ASSET_MISMATCH,r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE,r.VAST_NONLINEAR_PLAYING_FAILED,r.VAST_NONLINEAR_DIMENSIONS_ERROR,r.VAST_NONLINEAR_LOADING_FAILED,r.VAST_NONLINEAR_ASSET_MISMATCH,r.UNKNOWN_ERROR,r.VPAID_ERROR];class gn extends Js{constructor(){super(...arguments),this.currentTime=0,this.allowBlock=!1,this.reloadFailedAdTag=!1,this.onAdStarted=()=>{this.trigger(qs.z.ADPLAYBACK_IMPRESSION,this.sources),this.trigger(qs.z.ADPLAYBACK_STARTED,this.sources),this.onAdProgress(),this.adProgressInterval=window.setInterval(this.onAdProgress,500)},this.onAdProgress=()=>{var e;if("play"!==this.adPlaybackController.getAdPlayingState())return void delete this.diffStartTime;const t=this.getDuration(),i=Date.now()/1e3,s=i-(null!==(e=this.diffStartTime)&&void 0!==e?e:i),n=this.currentTime<0?0:Math.min(this.currentTime+s,t);this.diffStartTime=i,n!==this.currentTime&&(this.currentTime=n,this.trigger(qs.z.ADPLAYBACK_PROGRESS,Object.assign(Object.assign({},this.sources),{current:n,total:t})))},this.onAdVolumeChange=()=>{this.trigger(qs.z.ADPLAYBACK_VOLUME_CHANGE,this.sources)},this.onAdClick=()=>{this.trigger(qs.z.ADPLAYBACK_CLICK,this.sources)},this.onAdSkipped=()=>{this.trigger(qs.z.ADPLAYBACK_SKIPPED,this.sources)},this.onAdPodError=e=>{this.adPodError=Object.assign({},e)},this.onAdStopped=()=>{var e,t;const i="VPAIDLoadingError"===(null===(e=this.adPodError)||void 0===e?void 0:e.code)||"NO_AD_SECTION"===(null===(t=this.adPodError)||void 0===t?void 0:t.code);this.adPodError&&i?this.onAdError(this.adPodError):this.onAdContentResumeRequested()},this.onAdContentResumeRequested=()=>{this.trigger(qs.z.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.sources)},this.onAdError=e=>{const t=e.code&&gn.ErrorCodes[e.code],i=this.createError({code:`${null!=t?t:"unknown"}`,description:e.message,level:a.rG.Levels.WARN,raw:Object.assign(Object.assign({},this.sources),{code:t})});this.trigger(qs.z.ADPLAYBACK_ERROR,i)}}static canPlay(e){var t;return!!(null===(t=window.ya)||void 0===t?void 0:t.videoAd)&&"YANDEX"===e.provider&&!!e.partnerId}static async preload(){var e,t;if(!(null===(e=window.ya)||void 0===e?void 0:e.videoAd))return null!==(t=gn.preloadPromise)&&void 0!==t||(gn.preloadPromise=new Promise((async e=>{try{await(0,en.ve)("//yandex.ru/ads/system/adsdk.js")}catch(e){delete gn.preloadPromise}finally{e(null)}}))),gn.preloadPromise}Module("AdLoader"),{partnerId:i,category:s,impId:n}=e;return await t.create({partnerId:i,category:s,impId:n})}async load(e){rElement:i,videoElement:s}=this.options;this.adPlaybackController=this.adViewer.createPlaybackController(s,i),this.adPlaybackController.subscribe("AdStarted",this.onAdStarted),this.adPlaybackController.subscribe("AdVolumeChange",this.onAdVolumeChange),this.adPlaybackController.subscribe("AdClickThru",this.onAdClick),this.adPlaybackController.subscribe("AdPodSkipped",this.onAdSkipped),this.adPlaybackController.subscribe("AdPodError",this.onAdPodError),this.adPlaybackController.subscribe("AdStopped",this.onAdStopped),this.trigger(qs.z.ADPLAYBACK_LOADED,this.sources),this.trigger(qs.z.ADPLAYBACK_READY,this.sources)}catch(e){this.onAdError(e)}}start(){var e;null===(e=this.adPlaybackController)||void 0===e||e.playAd()}pause(){var e;null===(e=this.adPlaybackController)||void 0===e||e.pauseAd(),this.trigger(qs.z.ADPLAYBACK_PAUSED,this.sources)}resume(){var e;null===(e=this.adPlaybackController)||void 0===e||e.resumeAd(),this.trigger(qs.z.ADPLAYBACK_RESUMED,this.sources)}skip(){var e;null===(e=this.adPlaybackController)||void 0===e||e.skipAd()}setVolume(e){var t;null===(t=this.adPlaybackController)||void 0===t||t.setAdVolume(e/100)}getVolume(){var e,t;return 100*(null!==(t=null===(e=this.adPlaybackController)||void 0===e?void 0:e.getAdVolume())&&void 0!==t?t:0)}resize(e){}getDuration(){var e;return null===(e=this.adPlaybackController)||void 0===e?void 0:e.getAdDuration()}getCurrentTime(){return this.currentTime}isLinear(){return!0}getAdSystem(){return"Yandex"}getAdType(){return"unknown"}destroy(){var e;clearInterval(this.adProgressInterval),null===(e=this.adViewer)||void 0===e||e.destroy()}}gn.ErrorCodes={NO_AD_SECTION:r.VAST_NO_ADS_AFTER_WRAPPER,VIDEO_PLAY_REJECTED:r.VIDEO_PLAY_ERROR,VPAID_METHOD_CALL_ERROR:r.VPAID_ERROR,YANDEX_VPAID_METHOD_CALL_ERROR:r.VPAID_ERROR,YANDEX_VPAID_FRIENDLY_IFRAME_SECURITMEDIA_LOAD_TIMEOUT,VPAIDPlayingError:r.VIDEO_PLAY_ERROR,VMAP_LOAD_TIMEOUT:r.VAST_LOAD_TIMEOUT,MEDIA_ERR_SRC_NOT_SUPPORTED:r.VAST_LINEAR_ASSET_MISMATCH,VPAIDLoadingError:r.VAST_MEDIA_LOAD_TIMEOUT,WRAPPER_LOAD_TIMEOUT:r.VAST_LOAD_TIMEOUT,MEDIA_ERR_DECODE_ON_START:r.VAST_PROBLEM_DISPLAYING_MEDIA_FILE,WRAPPER_LOAD_ERROR:r.VAST_WRAPPER_ERROR,YANDEX_VAST_LOAD_TIMEOUT:r.VAST_LOAD_TIMEOUT,YANDEX_WRAPPER_LOAD_ERROR:r.VAST_WRAPPER_ERROR,YANDEX_WRAPPER_LOAD_TIMEOUT:r.VAST_LOAD_TIMEOUT,VIDEO_TIMEOUT:r.VAST_MEDIA_LOAD_TIMEOUT,YANDEX_NO_GET_VPAID_AD_FUNC:r.VPAID_ERROR,YANDEX_WRAPPER_MAX_COUNT_LIMIT:r.VAST_TOO_MANY_REDIRECTS,YANDEX_VPAID_FRIENDLY_IFRAME_UNHANDLED_GLOBAL_ERROR:r.VPAID_ERROR,MSE_VIDEO_ATTACH_FAIL:r.VIDEO_PLAY_ERROR};class mn extends gn{static canPlay(e){var t;return!!(null===(t=window.ya)||void 0===t?void 0:t.videoAd)&&"ADFOX"===e.provider&&!!e.url}get name(){return"adfoxPlayback"}async createLoader(e){const{AdLoader:t}=await window.ya.videoAd.loadModule("AdLoader"),{pathname:i}=new URL(e.url),{p1:s,p2:n}=(0,o.DP)(e.url),r=null==i?void 0:i.split("/").find(Boolean);return await t.create({adFoxParameters:{ownerId:r,params:{p1:s,p2:n}}})}getAdSystem(){return"AdFox"}}const vn=(0,hn.X)((()=>i.e(6144).then(i.bind(i,6144)))),An=(0,hn.X)((()=>i.e(9068).then(i.bind(i,9068))));class En extends sn{static async preload(e){var t;if(En.loaded)return;En.loaded=!0;const i=null===(t=e.mediaControl)||void 0===t?void 0:t.skinName,s=i&&n[i]||vn;await Promise.all([super.preload(e),s()])}static destroy(){var e;null===(e=En.bannerDisplayContainer)||void 0===e||e.destroy(),delete En.bannerDisplayContainer}get adDisplayContainer(){return En.bannerDisplayContainer}set adDisplayContainer(e){En.bannerDisplayContainer=e}get name(){return"overlayPlayback"}async createAdDisplayContainer(){this.adDisplayContainer||(this.adDisplayContainer=new this.ima.AdDisplayContainer(this.options.containerElement),this.adDisplayContainer.initialize())}async createAdsRequest(){const e=this.getSize(this.sources.url);this.adsRequest=new this.ima.AdsRequest,this.adsRequest.adTagUrl=this.sources.url,this.adsRequest.vastLoadTimeout=En.VAST_LOAD_TIMEOUT,this.adsRequest.nonLinearAdSlotWidth=e.width,this.adsRequest.nonLinearAdSlotHeight=e.height,this.options.containerElement.style.height=`${e.height}px`,this.adsRequest.setAdWillAutoPlay(!0),thissLoader.addEventListener(this.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e),this.adsLoader.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,t),this.adsLoader.requestAds(this.adsRequest)}))}catch(e){return void this.onAdError(e)}const t=new this.ima.AdsRenderingSettings;t.useStyledNonLinearAds=!0,t.loadVideoTimeout=En.LOAD_VIDEO_TIMEOUT,t.restoreCustomPlaybackStateOnAdBreakComplete=!1,this.adsManager=e.getAdsManager(this.options.videoElement,t),this.adsManager.addEventListener(this.ima.AdEvent.Type.LOADED,(e=>this.onAdLoaded(e))),this.adsManager.addEventListener(this.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.addEventListener(this.ima.AdEvent.Type.USER_CLOSE,this.onAdUserClose)}async initAdsManager(){if(this.adsManager){const e=this.getSize(this.sources.uewMode.NORMAL),this.trigger(qs.z.ADPLAYBACK_READY,this.sources)}}getSize(e){const{offsetWidth:t}=this.optInt(i[1],10),n=parseInt(i[2],10),s>t&&(n=n*t/s,s=t)):(s=t,n=s<400?50:100,e.match("advarkads.com")&&(n=200),(e.match("ads.adfox.ru")||e.match("ssp.rambler.ru"))&&(n=s<400?55:105)),{width:s,height:n}}resize(){var e;const t=this.getSize(s.adsManager)||void 0===e||e.resize(t.width,t.height,this.ima.ViewMode.NORMAL)}destroy(){var e,t,i;null===(e=this.adsLoader)||void 0===e||e.contentComplete(),null===(t=this.adsLoader)||void 0===t||t.destroy(),null===(i=this.adsManager)||void 0===i||i.destroy()}}En.bannerDisplayContainer=null,En.loaded=!1;var yn=i(3379),Tn=i.n(yn),_n=i(7795),bn=i.n(_n),Sn=i(569),Cn=i.n(Sn),Rn=i(3565),wn=i.n(Rn),kn=i(9216),Ln=i.n(kn),In=i(4589),On=i.n(In),Dn=i(5095),Pn={};Pn.styleTagTransform=On(),Pn.setAttributes=wn(),Pn.insert=Cn().bind(null,"head"),Pn.domAPI=bn(),Pn.insertStyleElement=Ln(),Tn()(Dn.Z,Pn),Dn.Z&&Dn.Z.locals&&Dn.Z.locals;const Nn=Symbol("onVisibleAreaChanged");class Mn extends a.nH{constructor(){super(...arguments),this.viewability=!1,this.adSourcesLoadsCount=0,this._blockCompleteCount=0,this.lastRollStartTime=0,this.lastBannerStartTime=0,this.currentContainerTime=0,this.containerEnded=!1,this.playing=!1,this.rendered=!1,this.adSourcesIndex=0,this.bannerSourcesIndex=0,this.inStreamPlaybacks=[fn,gn,sn,mn],this.overlayPlaybacks=[En,gn],this.skip=()=>{var e;null===(e=this.ad)||void 0===e||e.skip()},this.togglePause=()=>{this.pause(),this.trigger(qs.z.ADVERTISEMENT_INTERACTION_PLAYING)},this.togglePlay=()=>{this.play(),this.trigger(qs.z.ADVERTISEMENT_INTERACTION_PLAYING)}}static async preload(e){e.advertisement&&!Mn.loaded&&(Mn.loaded=!0,await Promise.all([sn.preload(e),En.preload(e),gn.preload(),fn.preload(e)]))}get name(){return"advertisement"}get supportedVersion(){return{min:"0.5.0"}}get attributes(){return{class:"eagleplayer-advertisement",style:"width: 100%","data-advertisement":""}}get template(){return(0,a.XK)('<div class="eagleplayer-advertisement-container" data-ad-container></div>\n<a class="eagleplayer-advertisement-click-area" data-ad-click></a>\n')}get multiPlayer(){return this.core.getPlugin("multiplayer")}get mediaControl(){return this.core.getPlugin("mediaControl")}get viewport(){return this.core.getPlugin("viewport")}get params(){return this.core.options.advertisement}get getVisibleArea(){var e,t;const{provider:i}=this.core.options;return null!==(t=null===(e=null==i?void 0:i.params)||void 0===e?void 0:e.getVisibleArea)&&void 0!==t?t:null==i?void 0:i.getVisibleArea}get channel(){return this._channel}get allowBlock(){var e,t,i,s,n;return Boolean((null!==(s=null!==(t=null===(e=this.channel)||void 0===e?void 0:e.allowBlock)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.allowBlock)&&void 0!==s?s:this.params.allowBlock)&&this.currentBlockType&&(null===(n=this.params[this.currentBlockType])||void 0===n?void 0:n.enableBlock))}get showBlockNumber(){var e,t,i;return this.ad instanceof fn&&Boolean(null!==(t=null===(e=this.channel)||void 0===e?void 0:e.showBlockNumber)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.showBlockNumber)}get maxBlockLength(){var e,t,i,s;return this.ad instanceof fn?null!==(s=null!==(t=null===(e=this.channel)||void 0===e?void 0:e.maxBlockLength)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.maxBlockLength)&&void 0!==s?s:1/0:1}get blockCompleteCount(){return this._blockCompleteCount}get reloadFailedAdTag(){var e,t,i;return Boolean(null!==(t=null===(e=this.channel)||void 0===e?void 0:e.reloadFailedAdTag)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.reloadFailedAdTag)}get getNextAdBlockSources(){var e,t,i;return this.ad instanceof fn&&(null!==(t=null===(e=this.channel)||void 0===e?void 0:e.getNextAdBlockSources)&&void 0!==t?t:null===(i=this.ad)||void 0===i?void 0:i.getNextAdBlockSources)||void 0}get getCurrentTime(){var e,t;return null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getCurrentTime())&&void 0!==t?t:0}bindEvents(){const{activeContainer:e,activePlayback:t}=this.core;this.listenToOnce(this.core,qs.z.CORE_READY,this.onReady),this.listenTo(this.core,qs.z.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),this.listenTo(this.core,qs.z.CORE_RESIZE,this.onResize),this.listenTo(this,qs.z.ADVERTISEMENT_ENDED,this.onAdvertisementEnded),this.listenTo(this,qs.z.ADVERTISEMENT_LOADING,this.hideBanner),this.mediaControl&&(this.listenTo(this.mediaControl,qs.z.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,qs.z.MEDIACONTROL_SHARE,this.onMediaControlShare)),e&&(this.listenTo(e,qs.z.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(e,qs.z.CONTAINER_PLAY,this.onPlay),this.listenTo(e,qs.z.CONTAINER_PAUSE,this.onPause),this.listenToOnce(e,qs.z.CONTAINER_ENDED,this.onEnded)),t&&!this.core.isReady&&this.listenToOnce(t,qs.z.PLAYBACK_PLAY_INTENT,this.onInitialPlay),this.viewport&&this.listenTo(this.viewport,qs.z.VIEWPORT_VISIBLE_AREA_CHANGED,this[Nn])}onActiveContainerChange(){this.stopListening(),this.bindEvents()}async onReady(){var e,t;const{activePlayback:i,activeContainer:s}=this.core;s&&i.getPlaybackType()!==a.BT.NO_OP?(null!==(e=this._channel)&&void 0!==e||(this._channel=new Qs(null!==(t=this.core.options.channel)&&void 0!==t?t:"unknown")),this.prepareBlockTime(),this.prepareAdTemplate(),this.render(),this.trigger(qs.z.ADVERTISEMENT_READY)):this.disable()}onResize(){var e,t;const{offsetWidth:i,offsetHeight:s}=this.core.el;null===(e=this.ad)||void 0===e||e.resize({width:i,height:s}),this.$el.css("height",s),null===(t=this.banner)||void 0===t||t.resize()}isPreRollWithStartTime(e){const t=["preRoll","preRollMobile"].includes(e),i=this.params[e];return t&&!!(null==i?void 0:i.start)&&(null==i?void 0:i.start)>0}onInitialPlay(){var e;const t=a.Browser.isMobile?"preRollMobile":"preRoll";(null===(e=this.params[t])||void 0===e?void 0:e.sources)&&!this.isPreRollWithStartTime(t)&&(this.core.activePlayback.pause(),this.startRoll(a.Browser.isMobile?"preRollMobile":"preRoll"))}onPlayAfterPause(){const e=a.Browser.isMobile?this.params.pauseRollMobile:this.params.pauseRoll;(null==e?void 0:e.sources)&&(this.core.activePlayback.pause(),this.startRoll(a.Browser.isMobile?"pauseRollMobile":"pauseRoll"))}onMediaControlShare(){const e=this.core.getPlugin("share"),{activeContainer:t}=this.core;e&&t&&(this.stopListening(t,qs.z.CONTAINER_PAUSE,this.onPause),this.listenToOnce(e,qs.z.SHARE_CLOSE,(()=>{this.listenTo(t,qs.z.CONTAINER_PAUSE,this.onPause)})))}startPreRollWithStartTime(e){const{activePlayback:t}=this.core,i=a.Browser.isMobile?"preRollMobile":"preRoll",s=this.params[i];if((null==s?void 0:s.sources)&&(null==s?void 0:s.start)&&(null==s?void 0:s.start)>this.lastRollStartTime&&(null==s?void 0:s.start)){const n=s.start-e.current,r=n<0&&t.isPlaying();this.trigger(qs.z.ADVERTISEMENT_TIME_TO_PREROLL,n),r&&(this.lastRollStartTime=e.current,this.startRoll(i))}}startMiddleRoll(e){var t,i;const{activePlayback:s}=this.core,n=a.Browser.isMobile?this.params.middleRollMobile:this.params.middleRoll;if(null==n?void 0:n.sources){const r=s.getDuration();let o;if(s.getPlaybackType()===a.BT.LIVE){const t=((null==n?void 0:n.refreshTime)||0)/1e3,i=((null==n?void 0:n.startupTime)||0)/1e3;o=i&&t&&(e.current>i&&i>this.lastRollStartTime||e.current>this.lastRollStartTime+t)}const l=null!==(i=!this.lastRollStartTime&&(null===(t=this.channel)||void 0===t?void 0:t.middleRollStartTime))&&void 0!==i?i:r>600&&r<1620?540:r>=1620&&r<3600?900:r>=3600?1200:0,c=l&&e.current>this.lastRollStartTime+l;s.isPlaying()&&(o||c)&&(this.lastRollStartTime=e.current,this.startRoll(a.Browser.isMobile?"middleRollMobile":"middlanner;if(Array.isArray(null==s?void 0:s.sources)&&(null===(t=s.sources)||void 0===t?void 0:t[0])){const t=((null==s?void 0:s.startupTime)||0)/1e3;if("YANDEX"===s.sources[0].provider)return void(!a.Browser.isMobile&&e.current>t&&this.startBanner());const n=((null==s?void 0:s.showTime)||0)/1e3,r=((null==s?void 0:s.refreshTime)||0)/1e3;if(i.isPlaying()&&t&&n&&(e.current>t&&t>this.lastBannerStartTime||r&&e.current>this.lastBannerStartTime+n+r))return this.lastBannerStartTime=e.current,void(this.$bannerContainer?this.showBanner():this.startBanner());t&&n&&e.current>this.lastBannerStartTime+n&&(r?this.hideBanner():this.closeBanner())}}startPseudoStreaming(e){var t,i;const{activePlayback:s}=this.core,n=a.Browser.isMobile?this.params.pseudostreamingMobile:this.params.pseudostreaming;if(Array.isArray(null==n?void 0:n.sources)&&e.current>this.lastRollStartTime&&!(null===(t=this.mediaControl)||void 0===t?void 0:t.$el.hasClass("eplayer-time-to-ad-visible"))&&(null==n?void 0:n.urlCallTime)){const t=60*n.urlCallTime;let r,o;if(this.core.options.usePseudoStreaming){const s=null===(i=this.multiPlayer)||void 0===i?void 0:i.prevItemsDuration;null!=s&&(o=e.current+s/1e3,r=Math.ceil((Mn.lastPseudoStreamingStartTime||1)/t)*t)}else r=Math.ceil((this.lastRollStartTime||1)/t)*t;s.isPlaying()&&null!=r&&(null!=o?o:e.current)>r&&(this.lastRollStartTime=e.current,null!=o&&(Mn.lastPseudoStreamingStartTime=o),this.startRoll(a.Browser.isMobile?"pseudostreamingMobile":"pseudostreaming"))}}onTimeUpdate(e){this.startPreRollWithStartTime(e),this.startMiddleRoll(e),this.startBannerRoll(e),this.startPseudoStreaming(e)}onPause(){const{activeContainer:e,activePlayback:t}=this.core;e.ended||(this.startRoll(a.Browser.isMobile?"pauseBannerMobile":"pauseBanner"),this.listenToOnce(t,qs.z.PLAYBACK_PLAY_INTENT,this.onPlayAfterPause))}onPile":"postRoll"),(null==e?void 0:e.isLastRecord)&&(Mn.lastPseudoStreamingStartTime=0),this.lastRollStartTime=0}prepareBlockTime(){Object.entries(Mn.BLOCK_TIME).forEach((([e,t])=>{var i;const s=this.params[e];s&&(null!==(i=s.blockTime)&&void 0!==i||(s.blockTime=t))}))}prepareAdTemplate(){const e=new Date,{referrer:t=""}=this.core.options,i=t?(0,o.DP)(t):{},s=this.core.el.offsetWidth,n=encodeURIComponent(t.substring(0,250));Object.keys(this.params).forEach((t=>{const r=this.params[t];r&&Array.isArray(null==r?void 0:r.sources)&&(r.sources=r.sources.map((r=>{if("YANDEX"===r.provider)r.partnerId&&(r.partnerId=Number(r.partnerId)),r.category&&(r.category=Number(r.category)),r.impId=Number(r.impId)||Mn.IMPID[t];else if("VAST"===r.provider&&r.url){const t=r.url.match(/(ssp\.rambler\.ru|ad\.mail)/)?480:0;r.url=r.url.replace(/\[pr\]/g,a.Utils.uniqueId("")).replace(/\[random\]/g,a.Utils.uniqueId("")).replace(/\[date\]/g,e.getDate().toString()).replace(/\[day\]/g,e.getDay().toString()).replace(/\[hours\]/g,e.getHours().toString()).replace(/\[device\]/g,Zs.getDeviceName()).replace(/\[all_device\]/g,Zs.getDeviceType()).replace(/\[gpmd_browser\]/g,Zs.getBrowserName()).replace(/\[dimensions\]/g,Zs.getScreenSize({width:s,minWidth:t})).replace(/\[referer\]/g,n).replace(/\[fullscreen\]/g,"1").replace(/\[arg_(.*?)\]/gi,((e,t)=>i[t]?`${t}=${i[t]}`:"")).replace(/\[var_(.*?)\]/gi,((e,t)=>i[t]?`${i[t]}`:""))}return r})))}))}isPlaying(){return this.playing}hasAd(){return Boolean(this.currentBlockType)}getVolume(){var e,t;return null!==(t=null===(e=this.ad)||void 0===e?void 0:e.getVolume())&&void 0!==t?t:0}async trackViewability(){if(this.getVisibleArea){const{height:e}=await this.getVisibleArea(),{parentElement:t}=this.core.options,i=t?e/t.offsetHeight:0;this[Nn](i)}}triggerAdEvent(e,t){var i,s,n;const r=null===(i=this.ad)||void 0===i?void 0:i.getAdSystem(),o=null===(s=this.ad)||void 0===s?void 0:s.getAdType();this.trigger(e,Object.assign(Object.assign({},t),{adSystem:r,adType:o,adPlayback:null===(n=this.ad)||void 0===n?void 0:n.name,blockType:this.currentBlockType,index:this.adSourcesIndex,requestCount:this.adSourcesLoadsCount}))}triggerBannerEvent(e,t){var i,s,n;const r=null===(i=this.banner)||void 0===i?void 0:i.getAdSystem(),o=null===(s=this.banner)||void 0===s?void 0:s.getAdType(),l=a.Browser.isMobile?"bannerMobile":"banner";this.trigger(e,Object.assign(Object.assign({},t),{adSystem:r,adType:o,adPlayback:null===(n=this.ad)||void 0===n?void 0:n.name,blockType:l,index:this.bannerSourcesIndex,requestCount:1}))}[Nn](e){if(this.playing&&!this.viewability){const t=!document.hidden&&e>=Mn.MIN_VIEWABILITY_HEIGHT;!t&&this.viewabilityTimeout&&(clearTimeout(this.viewabilityTimeout),delete this.viewabilityTimeout),t&&!this.viewabilityTimeout&&(this.viewabilityTimeout=window.setTimeout((()=>this.onAdViewable()),Mn.VIEWABILITY_TIMEOUT))}const{activeContainer:t}=this.core,{autoPlay:i,[Ws.Nd]:s,minPlayingVisibleHeight:n=.5}=this.core.options;if(!this.playing&&t&&(i||s)){const i=!document.hidden&&(!s||e>=n);if(i===this.isVisible)return;i?this.listenTo(t,qs.z.CONTAINER_PAUSE,this.onPause):this.stopListening(t,qs.z.CONTAINER_PAUSE,this.onPause),this.isVisible=i}}startRoll(e){var t;if(!this.enabled||this.currentBlockType)return;const i=null===(t=this.params[e])||void 0===t?void 0:t.sources;Array.isArray(i)&&(null==i?void 0:i[0])&&(this.currentBlockType=e,this.requestAd(i[0]))}requestAd(e){var t,i,s;const{core:n}=this,{activeContainer:r}=n,o=this.inStreamPlaybacks.find((t=>t.canPlay(e)));if(this.currentContainerTime||(this.currentContainerTime=r.getCurrentTime()),this.currentContainerVolume=r.volume,this.adSourcesLoadsCount++,this.adSourcesIndex++,!o){const t=this.createError({code:Mn.ErrorCodes.VAST_UNEXPECTED_AD_SOURCE,description:"no ad playback found for such sources",level:a.rG.Levels.WARN,raw:Object.assign(Object.assign({},e),{code:Mn.ErrorCodes.VAST_UNEXPECTED_AD_SOURCE})});return void this.onAdError(t)}this.hideControls(),this.currentBlockType&&this.isPreRollWithStartTime(this.currentBlockType)||"middleRoll"===this.currentBlockType||"middleRollMobile"===this.currentBlockType||"pseudostreaming"===this.currentBlockType||"pseudostreamingMobile"===this.currentBlockType||null===(t=null==r?void 0:r.getPlugin("click_to_pause"))||void 0===t||t.disable(),this.destroyAd();const l={muted:(null==e?void 0:e.mute)||(null===(i=this.mediaControl)||void 0===i?void 0:i.muted),containerElement:this.$adContainer.get(0),get videoElement(){return n.activePlayback.el},clickTrackingElement:this.$clickArea.get(0)};this.ad=new o(l,n),this.ad&&(this.listenToOnce(this.ad,qs.z.ADPLAYBACK_READY,this.onAdReady),this.listenToOnce(this.ad,qs.z.ADPLAYBACK_LOADED,this.onAdLoaded),this.listenToOnce(this.ad,qs.z.ADPLAYBACK_STARTED,this.onAdStarted),this.listenToOnce(this.ad,qs.z.ADPLAYBACK_IMPRESSION,this.onAdImpression),this.listenTo(this.ad,qs.z.AD_PAUSED,this.onAdPaused),this.listenTo(this.ad,qs.z.ADPLAYBACK_COMPLETE,this.onAdComplete),this.listenTo(this.ad,qs.z.ADPLAYBACK_PROGRESS,this.onAdProgress),this.listenTo(this.ad,qs.z.ADPLAYBACK_CLICK,this.onAdClick),this.listenTo(this.ad,qs.z.ADPLAYBACK_WARNING,this.onAdWarning),this.listenToOnce(this.ad,qs.z.ADPLAYBACK_ERROR,this.onAdError),this.listenToOnce(this.ad,qs.z.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested)),this.triggerAdEvent(qs.z.ADVERTISEMENT_LOADING,e),null===(s=this.ad)||void 0===s||s.load(e)}onAdReady(){var e;null===(e=this.ad)||void 0===e||e.start()}onAdLoaded(e){var t,i;const{activePlayback:s,activeContainer:n}=this.core;n.isPlaying()&&n.pause(),a.Browser.isMobile&&s.consent();const r=s;null===(t=r._hls)||void 0===t||t.destroy(),delete r._hls,this.triggerAdEvent(qs.z.ADVERTISEMENT_LOADED,e),this.$el.css("height",n.el.offsetHeight).show(),this.addFadeIn(),null===(i=this.mediaControl)||void 0===i||i.disable(),n.stopListening()}onAdStarted(e){this.playing=!0,this.trackViewability(),this.setInitialVolume(),this.triggerAdEvent(qs.z.ADVERTISEMENT_STARTED,e),this.ad instanceof fn&&this.$clickArea.show()}onAdImpression(e){this.triggerAdEvent(qs.z.ADVERTISEMENT_IMPRESSION,e)}onAdResumed(e){this.playing=!0,this.triggerAdEvent(qs.z.ADVERTISEMENT_RESUMED,e)}onAdViewable(){var e;this.triggerAdEvent(qs.z.ADVERTISEMENT_VIEWABLE,null===(e=this.ad)||void 0===e?void 0:e.sources),this.viewability=!0}onAdPaused(e){this.playing=!1,this.triggerAdEvent(qs.z.ADVERTISEMENT_PAUSED,e)}onAdComplete(e){this.playing=!1,this.triggerAdEvent(qs.z.ADVERTISEMENT_COMPLETE,e)}onAdProgress(e){var t;const{total:i=0}=e;this.triggerAdEvent(qs.z.ADVERTISEMENT_PROGRESS,e),!(i<=0)&&this.ad instanceof fn&&(null===(t=this.ad)||void 0===t||t.controls)}setInitialVolume(){var e,t,i;const s=(null===(t=null===(e=this.ad)||void 0===e?void 0:e.options)||void 0===t?void 0:t.muted)?0:Mn.VOLUME;null===(i=this.ad)||void 0===i||i.setVolume(s)}onAdClick(e){if(this.triggerAdEvent(qs.z.ADVERTISEMENT_CLICK,e),!(this.ad instanceof fn))return;const{controls:t,isWOW:i,isClickable:s}=this.ad;if(!t&&!i||!s)return;const n=()=>{document.hidden||(this.playing||this.play(),document.removeEventListener("visibilitychange",n))};document.addEventListener("visibilitychange",n),this.pause()}onAdWarning(e){var t;null!==(t=e.raw)&&void 0!==t||(e.raw={}),e.raw.blockType=this.currentBlockType,e.raw.index=this.adSourcesIndex,e.raw.requestCount=this.adSourcesLoadsCount,this.trigger(qs.z.ADVERTISEMENT_WARNING,e)}onAdError(e){var t,i,s,n;if(null!==(t=e.raw)&&void 0!==t||(e.raw={}),e.raw.blockType=this.currentBlockType,e.raw.index=this.adSourcesIndex,e.raw.requestCount=this.adSourcesLoadsCount,e.raw.adPlayback=null===(i=this.ad)||void 0===i?void 0:i.name,e.raw.adType=null===(s=this.ad)||void 0===s?void 0:s.getAdType(),this.trigger(qs.z.ADVERTISEMENT_ERROR,e),this.adSourcesLoadsCount<2&&this.reloadFailedAdTag&&e.raw.canRefetch)return void this.requestAd(e.raw);this.adSourcesLoadsCount=0;const r=this.currentBlockType&&(null===(n=this.params[this.currentBlockType])||void 0===n?void 0:n.sources),o=Array.isArray(r)&&r.slice(this.adSourcesIndex);Array.isArray(o)&&(null==o?void 0:o[0])&&this._blockCompleteCount<this.maxBlockLength?this.requestAd(o[0]):window.setTimeout((()=>this.requestResumeContent()),100)}onAdContentResumeRequested(e){this.triggerAdEvent(qs.z.ADVERTISEMENT_ENDED,e),this.viewability||this.triggerAdEvent(qs.z.ADVERTISEMENT_NOTVIEWABLE,e),this.requestResumeContent()}requestResumeContent(){var e,t,i,s,n,r,o,l,c,d,h;if(!this.currentBlockType)return;this.playing=!1,this.viewability=!1,clearTimeout(this.viewabilityTimeout),delete this.viewabilityTimeout;const u=this.currentBlockType&&(null===(e=this.params[this.currentBlockType])||void 0===e?void 0:e.sources),p=this.currentBlockType&&Mn.PUID3[this.currentBlockType],f=this.ad instanceof fn&&(null===(t=this.ad)||void 0===t?void 0:t.sources)&&this.getNextAdBlockSources?this.getNextAdBlockSources(null===(i=this.ad)||void 0===i?void 0:i.sources,p):(null===(s=this.ad)||void 0===s?void 0:s.sources)&&Array.isArray(u)&&(null==u?void 0:u[this.adSourcesIndex]);if(this.allowBlock&&f&&++this._blockCompleteCount<this.maxBlockLength)return void this.requestAd(f);this.triggerAdEvent(qs.z.ADVERTISEMENT_CONTENT_RESUME_REQUESTED,null===(n=this.ad)||void 0===n?void 0:n.sources);const g="pauseBanner"===this.currentBlockType||"pauseBannerMobile"===this.currentBlockType,m=["preRoll","preRollMobile"].includes(this.currentBlockType)&&(!(null===(r=this.params[this.currentBlockType])||void 0===r?void 0:r.hasOwnProperty("start"))||0===(null===(o=this.params[this.currentBlockType])||void 0===o?void 0:o.start)),{containerEnded:v}=this;if(this.$el.is(":visible")){v&&(this.currentContainerTime=0,delete this.currentContainerVolume);const{playback:e={},sources:t,[Ws.Nd]:i,[Ws.f]:s}=this.core.options;e.recycleVideo=a.Browser.isMobile;const n=!g&&!v,r={playback:e,sources:t,autoPlay:n};if(i?r[Ws.Nd]=n:s&&(r[Ws.f]=n),this.core.configure(r),g){const e=this.core.activePlayback;null===(l=null==e?void 0:e._setup)||void 0===l||l.call(e),this.listenToOnce(e,qs.z.PLAYBACK_LOADEDMETADATA,this.restoreCurrentContainerTime),this.listenToOnce(e,qs.z.PLAYBACK_PLAY_INTENT,this.onPlayAfterPause)}else v||this.listenToOnce(this.core.activeContainer,qs.z.CONTAINER_PLAY,this.restoreCurrentContainerTime);this.$el.hide(),this.hideControls(),null===(c=this.mediaControl)||void 0===c||c.enable(),n&&a.Browser.isMobile&&this.core.activeContainer.play()}else this.currentContainerTime=0,delete this.currentContainerVolume,m&&this.core.activeContainer.settingsUpdate(),v||g||this.core.activeContainer.play();this.adSourcesIndex=0,this.adSourcesLoadsCount=0,this._blockCompleteCount=0,this.destroyAd(),null===(h=null===(d=this.core.activeContainer)||void 0===d?void 0:d.getPlugin("click_to_pause"))||void 0===h||h.enable(),(m||this.currentBlockType&&this.isPreRollWithStartTime(this.currentBlockType)||v)&&delete this.params[this.currentBlockType],delete this.currentBlockType}restoreCurrentContainerTime(){var e,t;this.currentContainerTime>0&&(null===(e=this.core.activeContainer)||void 0===e||e.seek(this.currentContainerTime),this.currentContainerTime=0),null!=this.currentContainerVolume&&(null===(t=this.mediaControl)||void 0===t||t.setVolume(this.currentContainerVolume,!0),delete this.currentContainerVolume)}createBannerContainer(e){const t="YANDEX"===e.provider&&"none";ss("eagleplayer-advertisement-banner eplayer-skin-component eplayer-skin-fullsize eplayer-skin-shiftable").attr("data-banner","").css({pointerEvents:t}).hide()}onAdvertisementEnded(e){["banner","bannerMobile"].includes(e.blockType)||this.showBanner()}showBanner(){var e;this.currentBlockType||null===(e=this.$bannerContainer)||void 0===e||e.show()}hideBanner(){var e;null===(e=this.$bannerContainer)||void 0===e||e.hide()}startBanner(){var e,t;if(!this.enabled||this.$erMobile)||void 0===e?void 0:e.sources:null===(t=this.params.banner)||void 0===t?void 0:t.sources;Array.isArray(i)&&(null==i?void 0:i[0])&&this.requestBanner(i[0])}requestBanner(e){var t,i,s;const n=this.overlayPlaybacks.find((t=>t.canPlay(e)));if(this.bannerSourcesIndex++,!n){const t=this.createError({code:Mn.ErrorCodes.VAST_UNEXPECTED_AD_SOURCE,description:"no ad playback found for such sources",level:a.rG.Levels.WARN,raw:Object.assign(Object.assign({},e),{code:Mn.ErrorCodes.VAST_UNEXPECTED_AD_SOURCE})});return void this.onBannerError(t)}this.destroyBanner();const{core:r}=this;this.$bannerContainer||(this.$bannerContainer=this.createBannerContainer(e),"universal"===(null===(t=this.options.mediaControl)||void 0===t?void 0:t.skinName)?null===(i=this.mediaControl)||void 0===i||i.$el.append(this.$bannerContainer.get(0)):r.$el.prepend(this.$bannerContainer.get(0)));const o={muted:(null==e?void 0:e.mute)||(null===(s=this.mediaControl)||void 0===s?void 0:s.muted),connt(){return r.activePlayback.el}};this.banner=new n(o,r),this.listenToOnce(this.banner,qs.z.ADPLAYBACK_READY,this.onBannerReady),this.listenToOnce(this.banner,qs.z.ADPLAYBACK_LOADED,this.onBannerLoaded),this.listenToOnce(this.banner,qs.z.ADPLAYBACK_ERROR,this.onBannerError),this.listenTo(this.banner,qs.z.ADPLAYBACK_USER_CLOSE,this.hideBanner),this.triggerBannerEvent(qs.z.ADVERTISEMENT_LOADING,e),this.banner.load(e)}onBannerReady(){var e;null===(e=this.banner)||void 0===e||e.start()}onBannerLoaded(e){this.triggerBannerEvent(qs.z.ADVERTISEMENT_LOADED,e),this.showBanner()}onBannerError(e){var t,i,s,n;const r=a.Browser.isMobile?"bannerMobile":"banner";null!==(t=e.raw)&&void 0!==t||(e.raw={}),e.raw.blockType=r,e.raw.index=this.bannerSourcesIndex,e.raw.requestCount=1,e.raw.adPlayback=null===(i=this.ad)||void 0===i?void 0:i.name,e.raw.adType=null===(s=this.banner)||void 0===s?void 0:s.getAdType(),this.trigger(qs.z.ADVERTISEMENT_ERROR,e);const o=null===(n=this.params[r])||void 0===n?void 0:n.sources,l=Array.isArray(o)&&o.slice(this.bannerSourcesIndex);Array.isArray(l)&&(null==l?void 0:l[0])?this.requestBanner(l[0]):this.closeBanner()}closeBanner(){var e,t;(null===(e=this.$bannerContainer)||void 0===e?void 0:e.is(":visible"))&&(this.hideBanner(),this.triggerBannerEvent(qs.z.ADVERTISEMENT_ENDED,null===(t=this.banner)||void 0===t?void 0:t.sources)),this.bannerSourcesIndex=0,this.lastBannerStartTime=0,this.destroyBanner(),delete this.params[a.Browser.isMobile?"bannerMobile":"banner"]}pause(){var e;null===(e=this.ad)||void 0===e||e.pause()}play(){var e;null===(e=this.ad)||void 0===e||e.resume()}hideControls(){this.$clickArea.hide().css("pointer-events",""),this.$el.find("iframe").css("opacity","")}addFadeIn(){var e,t;const i=null===(t=null===(e=this.ad)||void 0===e?void 0:e.sources)||void 0===t?void 0:t.provider;"YANDEX"!==i&&"ADFOX"!==i&&this.currentBlockType&&this.isPreRollWithStartTime(this.currentBlockType)&&(0,a.$)(".eagleplayer-advertisement").parent(".eagleplayer-container").addClass("fade")}render(){var e;if(!this.core.$el.parents().length||this.rendered)return this;const{playList:t}=this.core.options;return this.$el.html(this.template({preview:(null==t?void 0:t.snapshot)||"none",title:null!==(e=null==t?void 0:t.title)&&void 0!==e?e:"",duration:t?(0,Xs.pT)(t.duration):""})),this.$adContainer=this.$el.find("[data-ad-container]"),this.$clickArea=this.$el.find("[data-ad-click]"),this.$el.hide(),this.hideControls(),this.rendered=!0,this.core.$el.prepend(this.el),this}destroyAd(){this.ad&&(this.stopListening(this.ad,qs.z.ADPLAYBACK_READY,this.onAdReady),this.stopListening(this.ad,qs.z.ADPLAYBACK_LOADED,this.onAdLoaded),this.stopListening(this.ad,qs.z.ADPLAYBACK_STARTED,this.onAdStarted),this.stopListening(this.ad,qs.z.ADPLAYBACK_IMPRESSION,this.onAdImpression),this.stopListening(this.ad,qs.z.ADPLAYBACK_RESUMED,this.onAdResumed),this.stopListening(this.ad,qs.z.ADPLAYBACK_PAUSED,this.onAdPaused),this.stopListening(this.ad,qs.z.ADPLAYBACK_COMPLETE,this.onAdComplete),this.stopListening(this.ad,qs.z.ADPLAYBACK_PROGRESS,this.onAdProgress),this.stopListening(this.ad,qs.z.ADPLAYBACK_CLICK,this.onAdClick),this.stopListening(this.ad,qs.z.ADPLAYBACK_WARNING,this.onAdWarning),this.stopListening(this.ad,qs.z.ADPLAYBACK_ERROR,this.onAdError),this.stopListening(this.ad,qs.z.ADPLAYBACK_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested),this.ad.destroy()),delete this.ad}destroyBanner(){this.banner&&(this.stopListening(this.banner,qs.z.ADPLAYBACK_READY,this.onBannerReady),this.stopListening(this.banner,qs.z.ADPLAYBACK_LOADED,this.onBannerLoaded),this.stopListening(this.banner,qs.z.ADPLAYBACK_ERROR,this.onBannerError),this.stopListening(this.banner,qs.z.ADPLAYBACK_USER_CLOSE,this.hideBanner),this.banner.destroy()),delete this.banner}stopListening(e,t,i){return i||clearTimeout(this.viewabilityTimeout),super.stopListening(e,t,i)}destroy(){var e;this.destroyAd(),this.destroyBanner(),this.inStreamPlaybacks.forEach((e=>e.destroy())),this.overlayPlaybacks.forEach((e=>e.destroy())),null===(e=this.$bannerContainer)||void 0===e||e.remove(),delete this.$bannerContainer,super.destroy()}}Mn.VIEWABILITY_TIMEOUT=2e3,Mn.MIN_VIEWABILITY_HEIGHT=.5,Mn.ErrorCodes=Object.assign(Object.assign({},r),{VAST_UNEXPECTED_AD_SOURCE:299}),Mn.PUID3={preRoll:6,preRollMobile:6,middleRoll:7,middleRollMobile:7,pauseRoll:void 0,pauseRollMobile:void 0,postRoll:15,postRollMobile:15,banner:void 0,bannerMobile:void 0,pauseBanner:void 0,pauseBannerMobile:void 0,pseudostreaming:7,pseudostreamingMobile:7},Mn.IMPID={preRoll:1,preRollMobile:1,postRoll:2,postRollMobile:2,middleRoll:3,middpauseBanner:3,pauseBannerMobile:3,pseudostreaming:3,pseudostreamingMobile:3},Mn.BLOCK_TIME={preRoll:240,preRollMobile:240,middleRoll:900,middleRollMobile:900,postRoll:900,postRollMobile:900},Mn.VOLUME=10,Mn.loaded=!1,Mn.lastPseudoStreamingStartTime=0},1722:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EventsReport:()=>E,default:()=>E});var s=i(6594),n=i(8917),r=i.n(n),o=i(5044),a=i(478),l=i(2459),c=i(6448),d=i(6768);const h=async(...e)=>{if((0,c.L1)()&&l.Zb.debug("reportEvents",...e),(0,c.yG)())return;const t=encodeURIComponent(JSON.stringify(e));try{await(0,d.W)(`https://api.vp.rambler.ru/events/?data=${t}`,{keepalive:!0,method:"get",timeout:5e3,mode:"no-cors"})}catch(e){}};var u=i(3874),p=i(2649),f=i(2792),g=i(4391),m=i(2485);const v="unknown",A=Symbol("onVisibleAreaChanged");class E extends s.kX{constructor(){super(...arguments),this.percentViewSent=-1,this.adViewSent=-1,this.viewId=this.randomNumber,this.started=!1,this.ended=!1,this.socketErrorsCount=0,this.socketClosedWithError=!1,this.visibleHeight=-1,this.isAiAdInitialRenderSent=!1,this.isLiveWatched=!1,this.currentLiveDuration=0,this.currentGlobalLiveTime=0,this.onUnload=()=>{this.clearLivePingTimeout(),this.unsubscribeLivePing(),this.getCurrentLiveDuration()>0&&this.sendLiveEvent("watch")},this.onBufferfull=()=>{this.bufferingStartTime&&(Date.now()-this.bufferingStartTime>E.BUFFERING_TIMEOUT&&this.sendMeasureEvent("videoDelay",0),delete this.bufferingStartTime)},this.onSocketOpen=()=>{var e;null!==(e=E.pingInterval)&&void 0!==e||(E.pingIn?void 0:e.send("")}),E.PING_TIMEOUT))},this.onSocketError=()=>{this.socketErrorsCount+=1,this.socketClosedWithError=!0},this.onSocketClose=e=>{let t;if(1006===e.code||!1===e.wasClean){const{target:i}=e;t={code:e.code,timeStamp:e.timeStamp,type:e.type,wasClean:e.wasClean,closedWithError:this.socketClosedWithError},i instanceof WebSocket&&(t.readyState=i.readyState,t.url=i.url)}this.socketClosedWithError&&this.socketErrorsCount>2?t&&(0,p.Tb)(new Error("socket closed"),t):(clearTimeout(this.reconnectTimeout),clearInterval(E.pingInterval),delete E.socket,delete E.pingInterval,this.reconnectTimeout=window.setTimeout(this.createSocket,this.socketClosedWithError?E.ERROR_RECONNECT_TIMEOUT:E.RECONNECT_TIMEOUT*Math.random()),this.socketClosedWithError?this.socketClosedWithError=!1:this.socketErrorsCount=0)},this.createSocket=()=>{if(!E.socket){const e=this.getHostname("https://api.vp.rambler.ru");E.socket=new WebSocket(`wss://${e}/api/ws`)}E.socket&&!E.socket.onerror&&(E.socket.onopen=this.onSocketOpen,E.socket.onerror=this.onSocketError,E.socket.onclose=this.onSocketClose)},this.onPlayerEnterFullscreen=e=>{e&&this.sendTop100Event(o.z.PLAYER_FULLSCREEN)}}get name(){return"eventsReport"}get supportedVersion(){return{min:"0.5.0"}}get isLive(){var e;return this.core.options.live||(null===(e=this.core.activePlayback)||void 0===e?void 0:e.getPlaybackType())===s.BT.LIVE}get id(){var e,t;const{playList:i}=this.core.options;return null!==(t=null!==(e=null==i?void 0:i.id)&&void 0!==e?e:null==i?void 0:i.uuid)&&void 0!==t?t:null}get randomNumber(){return Math.ceil(Math.random()*Number.MAX_SAFE_INTEGER)}get provider(){return this.options.provider}get viewport(){return this.core.getPlugin("viewport")}get advertisement(){return this.core.getPlugin("advertisement")}get docking(){return this.core.getPlugin("docking")}get multiplayer(){return this.core.getPlugin("multiplayer")}get suggest(){return this.core.getPlugin("suggest")}get aiAd(){return this.core.getPlugin("aiAd")}get mediaControl(){return this.core.getPlugin("mediaControl")}get share(){return this.core.getPlugin("share")}get watchNext(){return this.core.getPlugin("watchNext")}get settingsMenu(){return this.core.getPlugin("settingsMenu")}getHostname(e){return e?new URL(e.replace(/^\/\//,"https://")).hostname:null}async setUserCookie(){var e,t,i,s;if(this.userCookie=null!==(e=(0,m.e)("vpuid"))&&void 0!==e?e:await(null===(t=this.provider)||void 0===t?void 0:t.getCookie("vpuid")),!this.userCookie){this.userCookie=(0,f.O)();const e={path:"/",expires:new Date(Date.now()+31536e6).toUTCString(),sameSite:"None",secure:!0};if(g.qL){const t=this.getHostname(null!==(i=this.options.referrer)&&void 0!==i?i:""),n=null==t?void 0:t.split(".").slice(-2).join(".");await(null===(s=this.provider)||void 0===s?void 0:s.setCookie("vpuid",this.userCookie,Object.assign(Object.assign({},e),{domain:n})))}else{const t=window.location.hostname.split(".").slice(-2).join(".");(0,m.d)("vpuid",this.userCookie,Object.assign(Object.assign({},e),{domain:t}))}}}sendTop100Event(e,t){var i;const s={[e]:t};if(!s[e]){const{channel:t,referrer:i}=this.core.options,n=this.getHostname(null!=i?i:"");s[e]=`${null!=t?t:v}::${n}`}null===(i=this.provider)||void 0===i||i.sendCustomVars(sync sendRender(){var e;if(!E.isRenderSent){const t=await(null===(e=this.provider)||void 0===e?void 0:e.getStartTime()),i=Date.now()-t;this.sendMeasureEvent("playerRender",i),this.sendTop100Event("playerRender"),E.isRenderSent=!0}}sendInitialAutoPlay(){const{autoPlayPolicy:e}=this.core.options;e&&!E.isInitialAutoPlaySent&&("muted"!==e&&"unmuted"!==e&&this.sendTop100Event(`initialAutoPlay::${e}`),E.isInitialAutoPlaySent=!0)}sendStartingPlay(e){if(!E.isStartingPlaySent){const{autoPlay:t,[a.pZ]:i,[a.Nd]:s,[a.f]:n}=this.core.options;null!=e||(e=s?"autoPlayScroll":n?"autoPlayScrollMute":t||i?"autoPlay":"clickToPlay"),this.sendTop100Event(e),E.isStartingPlaySent=!0}}sendBaseEvent(e){var t;const{channel:i,referrer:s}=this.core.options;this.id&&h({accountCode:null!=i?i:"",recordId:this.id,type:e,embedUrl:null!=s?s:"",userCookie:null!==(t=this.userCookie)&&void 0!==t?t:""})}sendPercentView(e){var t;const{channel:i,referrer:s}=this.core.options;this.id&&(h(Object.assign(Object.assign({accountCode:null!=i?i:"",recordId:this.id,type:`percentView${e}`},this.ended&&{param1:"replay"}),{embedUrl:null!=s?s:"",userCookie:null!==(t=this.userCookie)&&void 0!==t?t:""})),this.sendTop100Event(`pv${e}`))}sendLiveEvent(e){var t;const{referrer:i}=this.core.options;if(!this.id)return;const s={objectType:"live",type:e,objectId:String(this.id),embedUrl:null!=i?i:"",userCookie:null!==(t=this.userCookie)&&void 0!==t?t:"",viewId:this.viewId};if("watch"===e&&(s.duration=this.getCurrentLiveDuration()),"ping"===e){const[e,t]=(new Date).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"}).split(",").map((e=>e.split(".")));s.localDateTime=`${e.reverse().join("-")}T${t[0].trim()}+03:00`}h(s)}sendMeasureEvent(e,t){var i,s;const{playList:n,channel:r,referrer:o}=this.core.options;if(!n||!this.id)return;const{activePlayback:a}=this.core,l=a.el.offsetWidth<a.el.offsetHeight?"vert-":"",c=null!==(i=n.directSource)&&void 0!==i?i:"",d=this.getHostname(c),u=null===(s=this.currentLevel)||void 0===s?void 0:s.level.height;h({type:"measureEvent",accountCode:null!=r?r:"",objectType:this.isLive?"live":"record",objectId:String(this.id),resolution:null!=u?`${l}${u}p`:v,embedUrl:null!=o?o:"",eventType:e,rnd:this.randomNumber,split:"",sourceName:null!=d?d:"",measure:t})}sendAdEvent(e,t){var i,s,n;const{channel:r,referrer:o,playerTemplateId:a}=this.core.options;this.id&&h({type:"adEvent",eventType:e,account:null!=r?r:"",objectType:this.isLive?"live":"record",objectId:String(this.id),copyrightHolder:v,monetizer:null!==(i=t.adSystem)&&void 0!==i?i:v,format:t.blockType,embedUrl:null!=o?o:"",playerTmplId:null!=a?a:-1,adTmplId:-1,adType:null!==(s=t.adType)&&void 0!==s?s:v,rnd:this.randomNumber,viewId:this.viewId,userCookie:null!==(n=this.userCookie)&&void 0!==n?n:""})}bindEvents(){E.needConnectToSocket&&this.listenTo(this.core,o.z.CORE_READY,this.createSocket),this.core.isReady||(this.onReady=r()(this.onReady)),this.listenToOnce(this.core,o.z.CORE_READY,this.onReady),this.listenTo(this.core,o.z.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,o.z.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),this.listenTo(this.core,o.z.CORE_FULLSCREEN,this.onPlayerEnterFullscreen);const{activeContainer:e,activePlayback:t,optionsLoader:i}=this.core;t&&(this.listenTo(t,o.z.PLAYBACK_PLAY_INTENT,this.onPlayIntent),this.listenTo(t,o.z.PLAYBACK_LOADEDMETADATA,this.onLoadedMetadata),this.listenTo(t,o.z.PLAYBACK_LEVEL_SWITCH,this.onLevelSwitch),this.listenTo(t,o.z.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(t,o.z.PLAYBACK_BUFFERFULL,this.onBufferfull)),e&&(this.listenTo(e,o.z.CONTAINER_PLAY,this.onPlay),this.listenTo(e,o.z.CONTAINER_PAUSE,this.onPause),this.listenTo(e,o.z.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(e,o.z.CONTAINER_ENDED,this.onEnded),this.listenTo(e,o.z.CONTAINER_ERROR,this.onError),this.listenTo(e,o.z.CONTAINER_CLICK,this.onPlayPauseControlClick)),i&&this.listenTo(i,o.z.OPTIONS_LOADER_ERROR,this.onLoadingError),this.viewport&&this.listenTo(this.viewport,o.z.VIEWPORT_VISIBLE_AREA_CHANGED,this[A]),this.advertisement&&(this.listenTo(this.advertisement,o.z.ADVERTISEMENT_LOADING,this.onAdLoading),this.listenTo(this.advertisement,o.z.ADVERTISEMENT_STARTED,this.onAdStarted),this.listenTo(this.advertisement,o.z.ADVERTISEMENT_IMPRESSION,this.onAdImpression),this.listenTo(this.advertisement,o.z.ADVERTISEMENT_PROGRESS,this.onAdProgress),this.listenTo(this.advertisement,o.z.ADVERTISEMENT_CLICK,this.onAdClick),this.listenTo(this.advertisement,o.z.ADVERTISEMENT_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested)),this.isLive&&this.core.options.eventsReportLive&&window.addEventListener("beforeunload",this.onUnload),this.multiplayer&&(this.listenTo(this.multiplayer,o.z.MULTIPLAYER_SUGGEST_CLICK,this.onMultiplayerSuggestClick),this.listenTo(this.multiplayer,o.z.MULTIPLAYER_SUGGEST_ERROR,this.onSuggestError)),this.suggest&&(this.listenTo(this.suggest,o.z.SUGGEST_ERROR,this.onSuggestError),this.listenTo(this.suggest,o.z.SUGGEST_CLICK,this.onSuggestClick)),this.aiAd&&(this.listenTo(this.aiAd,o.z.AI_AD_ITEM_RENDER,this.onAiAdItemRendered),this.listenTo(this.aiAd,o.z.AI_AD_ITEM_OPEN,this.onAiAdItemOpened),this.listenTo(this.aiAd,o.z.AI_AD_ITEM_CLICK,this.onAiAdItemClicked)),this.mediaEDIACONTROL_PLAYPAUSE_CLICK,this.onPlayPauseControlClick),this.listenTo(this.mediaControl,o.z.MEDIACONTROL_VOLUME_MOUSEDOWN,this.onVolumeBarControlClick),this.listenTo(this.mediaControl,o.z.MEDIACONTick),this.listenTo(this.mediaControl,o.z.MEDIACONTROL_LEVEL_SELECTOR_CLICK,this.onLevelSelectorControlClick),this.listenTo(this.mediaControl,o.z.MEDIACONTROL_FULLSCREEN_CLICK,this.onFullscreenControlClick),this.listenTo(this.mediaControl,o.z.MEDIACONTROL_SHARE,this.onShareControlClick)),this.settingsMenu&&(this.listenTo(this.settingsMenu,o.z.SETTINGS_MENU_RATE_SELEC,this.onLevelSelectorControlClick),this.listenTo(this.settingsMenu,o.z.SETTINGS_MENU_SUBTITLE_SELECTOR_CLICK,this.onSubtitleSelectorControlClick)),this.share&&(this.listenTo(this.share,o.z.SHARE_SOCIALNETWORK,this.onShareSocialNetworkClick),this.listenTo(this.share,o.z.SHARE_EMBED,this.onShareEmbedClick),this.listenTo(this.share,o.z.SHARE_LINK,this.onShareLinkClick)),this.watchNext&&(this.listenTo(this.watchNext,o.z.WATCH_NEXT_CLICK,this.onWatchNextClick),this.listenTo(this.mediaControl,o.z.WATCH_NEXT_CLICK,this.onWatchNextClick))}stopListening(e,t,i){return i||(E.socket&&(E.socket.onerror=null,E.socket.onclose=null),delete this.bufferingStartTime,this.isLive&&this.core.options.eventsReportLive&&window.removeEventListener("beforeunload",this.onUnload)),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onPlayIntent(){this.playIntentTime=Date.now()}onLoadedMetadata(){null==this.firstChunkLoadingTime&&this.playIntentTime&&(this.firstChunkLoadingTime=Date.now()-this.playIntentTime)}onLevelSwitch(e){const[t]=this.core.activePlayback.levels.filter((t=>t.id==.currentLevel=t}async onReady(){var e;if(await this.setUserCookie(),!E.ready){const{channel:t}=this.core.options,i=(0,g.q_)();null===(e=this.provider)||void 0===e||e.activateTop100({project:E.TOP100_ID,splits:[`env_${i}`],pubId:thisait this.sendRender(),this.sendInitialAutoPlay(),this.sendPercentView(-1)}onMultiplayerSuggestClick(){this.sendStartingPlay("clickToPlay"),this.sendBaseEvent("click:multiplayer")}onSuggestError(e){this.sendBaseEvent((null==e?void 0:e.recommender)?"adtSuggestError":(null==e?void 0:e.random)?"randomSuggestError":"filterSuggestError")}onAiAdItemRendered({firstTime:e}){const{id:t,channel:i,referrer:s}=this.core.options;if([e&&"aiAdItemFirstTimeRender","aiAdItemRender"].filter(Boolean).forEach((e=>this.sendBaseEvent(e))),!this.isAiAdInitialRenderSent){const e=this.getHostname(null!=s?s:"");this.sendTop100Event("aiAdShown",`${null!=i?i:"unthis.sendBaseEvent("aiAdItemOpen")}onAiAdItemClicked(){this.sendBaseEvent("aiAdItemClick")}onPause(){this.isLive&&this.core.options.eventsReportLive&&(this.sendLiveEvent("watch"),this.clearLiveTime())}onPlay(){var e,t,i;if(null==this.playStartTime&&this.playIntentTime){this.playStartTime=Date.now()-this.playIntentTime;const s=null!==(t=null===(e=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===e?void 0:e.call(performance,"resource"))&&void 0!==t?t:[],n=null!==(i=this.firstChunkLoadingTime)&&void 0!==i?i:-1,r=s.length>0&&s.filter((({name:e})=>e.includes("seg-1"))).map((({duration:e,fetchStart:t,responseEnd:i})=>Math.round(e||i-t)));[{eventType:"firstChunkDownloadTime",measure:Array.isArray(r)&&r.length>0?r[r.length-1]:n},{eventType:"firstChunkWaitTime",measure:this.playStartTime}].forEach((({eventType:e,measure:t})=>{this.sendMeasureEvent(e,t)}))}this.sendStartingPlay()}onTimeUpdate(e){var t;const i=null===(t=this.core.activeContainer)||void 0===t?void 0:t.isPlaying();if(i&&(this.started=!0),i&&!this.isLive){const t=5*Math.floor(e.current/e.total*20);return-1===this.percentViewSent&&this.sendPercentView(-2),void(t>this.percentViewSent&&t<100&&(this.sendPercentView(t),this.percentViewSent=t))}if(this.core.options.eventsReportLive){if(i){const e=Date.now(),t=this.currentGlobalLiveTime||e;this.currentGlobalLiveTime=e,this.currentLiveDuration+=this.currentGlobalLiveTime-t}i&&!this.isLiveWatched&&(this.sendLiveEvent("livewatch0"),this.sendPingLiveEvent(),this.isLiveWatched=!0)}}getCurrentLiveDuration(){return Math.floor(this.currentLiveDuration/1e3)}subscribeLivePing(){var e;null!==(e=this.livePingInterval)&&void 0!==e||(this.livePingInterval=window.setInterval((()=>{this.sendPingLiveEvent()}),E.LIVE_PING_INTERVAL))}unsubscribeLivePing(){window.clearInterval(this.livePingInterval),delete this.livePingInterval}clearLivePingTimeout(){window.clearTimeout(this.livePingTimeout),delete this.livePingTimeout}sendPingLiveEvent(){if(!this.id)return;const e=Date.now(),t=e-(function(e,t){void 0===t&&(t={});var i,s=t.raw;try{var n=window.localStorage.getItem(e);i=s?n:JSON.parse(null!=n?n:"")}catch(e){}return null!=i?i:null}(`${this.id}_${E.LIVE_PING_TIMESTAMP_KEY}`)||0)>=E.LIVE_PING_INTERVAL;if(t)return this.sendLiveEvent("ping"),function(e,t,i){void 0===i&&(i={});var s=i.raw;try{var n=s?String(t):JSON.stringify(t);window.localStorage.setItem(e,n)}catch(e){}}(`${this.id}_${E.LIVE_PING_TIMESTAMP_KEY}`,e),void this.subscribeLivePing();this.unsubscribeLivePing(),this.livePingTimeout=window.setTimeout((()=>{this.sendPingLiveEvent()}),1e3)}onBuffering(){var e;(null===(e=this.core.activeContainer)||void 0===e?void 0:e.getCurrentTime())>0&&(this.bufferingStartTime=Date.now())}onError(e){this.sendMeasureEvent("videoError",0),this.started||e.level!==s.rG.Levels.FATAL||(this.isLive?this.sendLiveEvent("liveFatalError"):this.sendBaseEvent("vodFatalError")),e.level==.options.eventsReportLive&&this.isLiveWatched&&(this.getCurrentLiveDuration()>0&&this.sendLiveEvent("watch"),this.clearLivePingTimeout(),this.unsubscribeLivePing(),this.clearLiveTime())}onLoadingError(e){const t=(null==e?void 0:e.code)&&E.LOADING_ERRORS[e.code];t&&this.sendTop100Event(t)}async[A](e){this.visibleHeight=e}onOptionsChange(){this.sendInitialAutoPlay()}onAdLoading(e){var t;const{channel:i}=this.core.options;let s="";if("url"in e){const i=this.getHostname(null!==(t=e.url)&&void 0!==t?t:"");s=null!=i?i:v}else s=`yandex.${e.partnerId}`;this.sendTop100Event("adRequest",`${null!=i?i:v}::${e.blockType}::${s}`)}onAdStarted(e){var t,i;if(["preRoll","preRollMobile"].includes(e.blockType)){const e=1e3*(this.core.isFullscreen()||(null===(t=this.docking)||void 0===t?void 0:t.isDocked())?1:this.visibleHeight);e>=0&&e<=1e3&&this.sendMeasureEvent("viewability-preroll",Math.round(e));const s=0===(null===(i=this.advertisement)||void 0===i?void 0:i.getVolume())?"preRollMuted":"preRollUnmuted";this.sendTop100Event(s)}this.docking&&this.listenTo(this.docking,o.z.DOCKING_CHANGED,this.onDockingChange),this.getCurrentLiveDuration()>0&&this.core.options.eventsReportLive&&(this.sendLiveEvent("watch"),trLiveTime(){this.getCurrentLiveDuration()>0&&(this.currentGlobalLiveTime=0,this.currentLiveDuration=0)}onAdImpression(e){this.sendAdEvent("show",e)}onAdProgress(e){const t=Math.ceil(e.current/e.total);t>this.adViewSent&&e.current>Event("click",e)}onAdContentResumeRequested(){this.docking&&this.stopListening(this.docking,o.z.DOCKING_CHANGED,this.onDockingChange),this.adViewSent=-1}onDockingChange(e){var t,i;const s=null!==(i=null===(t=this.advertisement)||void 0===t?void 0:t.getVolume())&&void 0!==i?i:0;e&&s>0&&this.sendTop100Event("dockUnmutedAd")}onEnded(){-1!==this.percentViewSent&&this.sendPercentView(100),this.percentViewSent=-1,this.ended=!0}onTogglePlayPause(){this.sendBaseEvent("click:"+(this.core.activeContainer.isPlaying()?"play":"pause")),this.stopListening(this.core.activeContainer,o.z.CONTAINER_PLAY,this.onTogglePlayPause),this.stopListening(this.core.activeContainer,o.z.CONTAINER_PAUSE,this.onTogglePlayPause)}onPlayPauseControlClick(){const{activeContainer:e}=this.core;e&&(this.stopListening(e,o.z.CONTAINER_PLAY,this.onTogglePlayPause),this.stopListening(e,o.z.CONTAINER_PAUSE,this.onTogglePlayPause),this.listenTo(e,o.z.CONTAINER_PLAY,this.onTogglePlayPause),this.listenTo(e,o.z.CONTAINER_PAUSE,this.onTogglePlayPause))}onVolumeBarControlClick(){this.sendBaseEvent("click:volumebar")}onMuteControlClick(e){this.sendBaseEvent(`click:mute:${0===e}`)}onLevelSelectorControlClick(e){this.sendBaseEvent(`click:levelSelector:${e}`)}onSubtitleSelectorControlClick(e){this.sendBaseEvent(`click:subtitle:${e}`)}onFullscreenControlClick(e){this.sendBaseEvent("click:fullscreen"+(!0===e?":doubleclick":""))}onSuggestClick(){this.sendBaseEvent("click:suggest:"+(this.ended?"end":"pause"))}onShareControlClick(){this.sendBaseEvent("click:share")}onShareSocialNetworkClick(e){this.sendBaseEvent(`click:share:${e.network}`)}onShareEmbedClick(){this.sendBaseEvent("click:share:embed")}onShareLinkClick(){this.sendBaseEvent("click:share:link")}onWatchNextClick(){this.sendBaseEvent("click:watchNext")}onRateSelectorClick(e){this.sendBaseEvent(`click:rateSelector:${parseFloat(e)}`)}}E.PING_TIMEOUT=3e4,E.RECONNECT_TIMEOUT=1e3,E.ERROR_RECONNECT_TIMEOUT=3e3,E.BUFFERING_TIMEOUT=500,E.TOP100_ID="7356279",E.LIVE_PING_INTERVAL=6e4,E.LIVE_PING_TIMESTAMP_KEY="player_live_ping_timestamp",E.LOD_NOT_PUBLISHED.code]:"notPublished",[u.D1.RECORD_NOT_PROCESSED.code]:"notProcessed",[u.D1.RECORD_ACCESS_DENIED_SITE.code]:"accessDeniedSite",[u.D1.RECORD_ACCESS_DENIED_COUNTRY.code]:"accessDeniedCountry",[u.D1.ACCESS_RESTRICTED.code]:"accessRestricted",[u.D1.UNKNOWN_ERROR.code]:"unknownError",[u.D1.NOT_RESPOND.code]:"unknownError",[u.D1.TIMEOUT.code]:"unknownError",[u.D1.INVALID_RESPONSE.code]:"unknownError"},E.needConnectToSocket=Math.random()<.2,E.ready=!1,E.isRenderSent=!1,E.isInitialAutoPlaySent=!1,E.isStartingPlaySent=!1},7327:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Mediascope:()=>l,default:()=>l});var s=i(6594),n=i(5044),r=i(4391),o=i(8917),a=i.n(o);class l extends s.kX{constructor(){super(...arguments),this.started=!1,this.stopped=!1,this.seekStarted=!1,this.adStarted=!1,this.adPaused=!1,this.currentGlobalLiveTime=0,this.currentLiveTime=0,this.onPageLeave=()=>{const{activeContainer:e}=this.core;!this.stopped&&this.getFTS()>0&&(this.stopListening(e,n.z.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.onStop()),this.adStarted&&this.onAdStop()}}get name(){return"mediascope"}get supportedVersion(){return{min:"0.5.0"}}get isLive()re.options.live||(null==rn this.options.provider}get mediaControl(){return this.core.getPlugin("mediaControl")}get multiPlayer(){return this.core.getPlugin("multiplayer")}get suggest(){return this.core.getPlugin("suggest")}get watchNext(){return this.core.getPlugin("watchNext")}get advertisement(){return this.core.getPlugin("advertisement")}getFTS(){var e;ctCurrenrseInt((1e3*i).toFixed())}sendMediascopeEvent(e,t){var i,s;const{playList:n,channel:r,referrer:o}=this.core.o0!==i?i:null==n?void 0:n.id;if(!a)return;const c="string"==typeof a?"uuid":"id"?${c}=${a}`,channel:`${null!=r?r:"unknown"}`,referrer:null!=o?o:"",playerVersion:"1.129.0",cu_id:t?`adv_${a}`:a,live:this.isLive};null===(s=this.provider)||void 0===s||s.sendCustomVars(l.TOP100_ID,d)}setHeartbeatAdInterval(){var e;null!==(e=thisVAL))}cleanHeartbeatAdInterval(){window.clearInterval(this.heartbeatAdInterval),delete this.heartbeatAdInterval}setHeartbeatInterval(){var e;null!==(e=this.heartbeatInterval)&&void 0!==e||(this.heartbeatIntervaHEARTBEAT_INTERVAL))}cleanHeartbeatInterval(){window.clearInterval(this.heartbeatInterval),delete this.heartbeatInterval}onSeekInteractionEnd(){this.seekStarted=!1}onSeekInteractionStart(){var e;this.seekStarted=!0,(null===(e=this.core.activeContainer)||void 0===e?void 0:e.isPlaying())&&this.onStop()}getCurrentAdTime(){var e,t;return parseInt((1e3*(null!==(t=null===(e=this.advertisement)||void 0===e?void 0:e.getCurrentTime)&&void 0!==t?t:0)).toFixed())}onAdStarted(){this.adStarted=!0,this.onPause(),this.onAdStart()}onAdStop(){this.cleanHeartbeatAdInterval(),this.sendMediascopeEvent(0,!0)}onAdPaused(){this.adPaused||(this.cleanHeartbeatAdInterval(),this.sendMediascopeEvent(3,!0),this.adPaused=!0)}onAdHeartbeat(){this.sendMediascopeEvent(2,!0)}onAdProgress(e){e.current>0&&this.adPaused&&(this.onAdStart(),this.adPaused=!1)}onAdStart(){this.sendMediascopeEvent(1,!0),this.setHeartbeatAdInterval()}onAdError(){this.adStarted&&(this.cleanHeartbeatAdInterval(),this.onAdStop())}onError(){var e;this.isLive&&this.getFTS()>0&&(null===(e=this.core.activeContainer)||void 0===e?void 0:e.isPlaying())&&!this.stopped&&this.onStop()}onStop(){this.cleanHeartbeatInterval(),this.started=!1,this.stopped=!0,this.sendMediascopeEvent(0)}onStart(){this.stopped=!1,this.setHeartbeatInterval(),this.sendMediascopeEvent(1)}heartbeat(){this.sendMediascopeEvent(2)}onPause(){const{activeContainer:e}=this.core;if(0!==this.getFTS()&&this.started){if(this.stopped=!1,e.ended)return void(this.started=!1);this.cleanHeartbeatInterval(),this.started=!1,this.sendMediascopeEvent(3)}}onPlay(){this.adStarted&&(this.adStarted=!1)}onTimeUpdate(){var e;const t=null===(e=this.core.activeContainer)||void 0===e?void 0:e.isPlaying();if(t&&this.isLive){const e=Date.now(),t=this.currentGlobalLiveTime||e;this.currentGlobalLiveTime=e,this.currentLiveTime+=this.currentGlobalLiveTime-t}this.seekStarted||t&&this.adStarted||t&&!this.started&&0!==this.getFTS()&&(this.onStart(),this.started=!0)}bindEvents(){const{activeContainer:e}=thistenToOnce(this.core,n.z.CORE_READY,this.onReady),this.listenTo(this.core,n.z.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),window.addEventListener("beforeunload",this.onPageLeave),e&&(this.listenTo(e,n.z.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(e,n.z.CONTAINER_PAUSE,this.onPause),this.listenTo(e,n.z.CONTAINER_ENDED,this.onStop),this.listenTo(e,n.z.CONTAINER_PLAY,this.onPlay),this.listenTo(e,n.z.CONTAINER_ERROR,this.onError)),this.mediaControl&&(this.listenTo(this.mediaControl,n.z.MEDIACONTROL_SEEK_START,this.onSeekInteractionStart),this.listenTo(this.mediaControl,n.z.MEDIACONTROL_SEEK_END,this.onSeekInteractionEnd)),this.advertisement&&(this.listenTo(this.advertisement,n.z.ADVERTISEMENT_STARTED,this.onAdStarted),z.ADVERTISEMENT_ENDED,this.onAdStop),this.listenTo(this.advertisement,n.z.ADVERTISEMENT_PAUSED,this.onAdPaused),this.listenTo(this.advertisement,n.z.ADVERTISEMENT_PROGRESS,this.onAdProgress),this.listenTo(this.advertisement,n.z.ADVERTISEMENT_ERROR,this.onAdError)),this.multiPlayer&&this.listenTo(this.multiPlayer,n.z.MULTIPLAYER_SUGGEST_CLICK,this.onStop),this.suggest&&this.listenTo(this.suggest,n.z.SUGGEST_CLICK,this.onStop),this.watchNext&&(this.listenTo(this.watchNext,n.z.WATCHopListening(e,t,i){return i||(window.removeEventListener("beforeunload",this.onPageLeave),this.cleanHeartbeatInterval(),this.cleanHeartbeatAdInterval()),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.bindEvents()}async onReady(){var e;if(!l.ready){const t=(0,r.q_)();null===(e=this.provider)||void 0===e||e.activateTop100({project:l.TOP100_ID,splits:[`env_${t}`]}),l.ready=!0}}}l.HEARTBEAT_INTERVAL=3e4,l.TOP100_ID="7643964",l.ready=!1},6263:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Viewport:()=>c,default:()=>c});var s,n=i(6594),r=i(1296),o=i.n(r),a=i(5044);const l=Symbol("onVisibleAreaChanged");class c extends n.kX{constructor(){super(...arguments),this.isFullscreen=!1,this.documentHidden=document.hidden,this.onFullscreenChange=o()((e=>{e||(this.isFullscreen=!1)}),c.FULLSCREEN_THROTTLE_TIMOUT),this.onDockingDisabled=o()((async()=>{if(this.getVisibleArea){const e=await this.getVisibleArea();this[l](e,!0)}}),c.DOCKING_DEBOUNCE_TIMEOUT),this.onVisibilityChanged=()=>{this.checkVisibilityChange()},this.checkVisibilityChange=async(e=!1)=>{if(this.getVisibleArea){const t=await this.getVisibleArea();this[l](t,e)}},this[s]=async(e,t=!1)=>{const{parentElement:i}=tthis.isFullscreen&&(s!==this.visibleHeight||document.hidden!==this.documentHidden||t);this.documentHidden=document.hidden,n&&(this.trigger(a.z.VIEWPORT_VISIBLE_AREA_CHANGED,s),this.visibleHeight=s)}}get name(){return"viewport"}get supportedVersion(){return{min:"0.5.0"}}get provider(){return this.core.options.provider}get canPlay(){var e;return(null===(e=this.core.activePlayback)||void 0===e?void 0:e.getPlaybackType())!==n.BT.NO_OP}get genull===(t=null===(e=this.provider)||void 0===e?void 0:e.params)||void 0===t?void 0:t.getVisibleArea)&&void 0!==i?i:null===(s=this.provider)||void 0===s?void 0:s.getVisibleArea}get subscribeVisibleAreaChange(){var e,t,i,s;return null!==(i=null===(t=null===(e=this.provider)||void 0===e?void 0:e.parnge)&&void 0!==i?i:null===(s=this.provider)||void 0===s?void 0:s.subscribeVisibleAreaChange}bindEvents(){this.listenToOnce(this.core,a.z.CORE_READY,this.onReady),this.listenTo(this.core,a.z.CORE_FULLSCREEN,this.onFullscreenChange),this.listenTo(this.core,a.z.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange);const e=this.core.getPlugin("mediaControl"),t=this.core.getPlugin("docking");e&&this.listenTo(e,a.z.MEDIACONTROL_FULLSCREEN,this.onRequestFullscreen),t&&this.listenTo(t,a.z.DOCKING_CHANGED,this.onDockingChanged)}stopListening(){return document.removeEventListener("visibilitychange",this.onVisibilityChanged),this.unsubscribeVisibleAreaChange(),super.stopListening()}onActiveContainerChange(){this.stopListening(),this.bindEvents(),this.onVisibilityChanged()}async onReady(){var e;this.canPlay&&this.provider&&(null===(e=this.provider.mediator)||void 0===e||e.once("disableDocking",this.onDockingDisabled),c.ready?this.onVisibilityChanged():(this.provider.once("widgetShown",this.onVisibilityChanged),c.ready=!0),document.addEventListener("visibilitychange",this.onVisibilityChanged),this.subscribeVisibleAreaChange&&(this.unsubscribeVisibleAreaChange=await this.subscribeVisibleAreaChange(this[l])))}onRequestFullscreen(){this.isFullscreen=!0}onDockingChanged(e){e?(this.trigger(a.z.VIEWPORT_VISIBLE_AREA_CHANGED,1),this.visibleHeight=1):this.checkVisibilityChange(!0)}unsubscribeVisibleAreaChange(){}}s=l,c.FULLSCREEN_THROTTLE_TIMOUT=500,c.DOCKING_DEBOUNCE_TIMEOUT=200,c.ready=!1},5044:(e,t,i)=>{"use strict";i.d(t,{z:()=>n});var s=i(6594);class n extends s.zW{get name(){return"Events"}}n.PLAYER_DOCK="dock",n.PLAYBACK_LOADEDDATA="playback:loadeddata",n.MEDIACONTROL_MENU_CLICK="mediacontrol:menu:click",n.MEDIACONTROL_SHARE="mediacontrol:share",n.MEDIACONTROL_PLAYBACKRATE_CHANGED="mediacontrol:playbackrate:changed",n.MEDIACONTROL_SUBTITLE_CHANGED="mediacontrol:subtitle:changed",n.MEDIACONTROL_PLAYPAUSE_CLICK="mediacontrol:playpause:click",n.MEDIACONTROL_VOLUME_CLICK="mediacontrol:volume:click",n.MEDIACONTROL_VOLUME_MOUSEDOWN="mediacontrol:volume:mousedown",n.MEDIACONTROL_MUTE_CLICK="mediacontrol:mute:click",n.MEDIACONTROL_SEEK_START="mediacontrol:seek:start",n.MEDIACONTROL_SEEK="mediacontrol:seek",n.MEDIACONTROL_SEEK_END="mediacontrol:seek:end",n.MEDIACONTROL_LEVEL_SELECTOR_CLICK="mediacontrol:level:selector:click",n.MEDIACONTROL_FULLSCREEN_CLICK="mediacontrol:fullscreen:click",n.ADPLAYBACK_READY="adplayback:ready",n.ADPLAYBACK_LOADED="adplayback:loaded",n.ADPLAYBACK_STARTED="adplayback:started",n.ADPLAYBACK_IMPRESSION="adplayback:impression",n.ADPLAYBACK_PROGRESS="adplayback:progress",n.ADPLAYBACK_PAUSED="adplayback:paused",n.ADPLAYBACK_RESUMED="adplayback:resumed",n.ADPLAYBACK_COMPLETE="adplayback:complete",n.ADPLAYBACK_ENDED="adplayback:ended",n.ADPLAYBACK_CLICK="adplayback:click",n.ADPLAYBACK_VOLUME_CHANGE="adplayback:volume:change",n.ADPLAYBACK_SKIPPED="adplayback:skipped",n.ADPLAYBACK_USER_CLOSE="adplayback:user:close",n.ADPLAYBACK_CONTENT_RESUME_REQUESTED="adplayback:content:resume:requested",n.ADPLAYBACK_ERROR="adplayback:error",n.ADPLAYBACK_WARNING="adplayback:warning",n.ADVERTISEMENT_READY="advertisement:ready",n.ADVERTISEMENT_LOADING="advertisement:loading",n.ADVERTISEMENT_LOADED="advertisement:loaded",n.ADVERTISEMENT_STARTED="advertisement:started",n.ADVERTISEMENT_IMPRESSION="advertisement:impression",n.ADVERTISEMENT_PROGRESS="advertisement:progress",n.ADVERTISEMENT_VIEWABLE="advertisement:viewable",n.ADVERTISEMENT_NOTVIEWABLE="advertisement:notviewable",n.ADVERTISEMENT_PAUSED="advertisement:paused",n.ADVERTISEMENT_COMPLETE="advertisement:complete",n.ADVERTISEMENT_RESUMED="advertisement:resumed",n.ADVERTISEMENT_ENDED="advertisement:ended",n.ADVERTISEMENT_CLICK="advertisement:click",n.ADVERTISEMENT_ERROR="advertisement:error",n.ADVERTISEMENT_WARNING="advertisement:warning",n.ADVERTISEMENT_INTERACTION_PLAYING="advertisement:interaction:playing",n.ADVERTISEMENT_CONTENT_RESUME_REQUESTED="advertisement:content:resume:requested",n.ADVERTISEMENT_TIME_TO_PREROLL="advertisement:timeremaintimetopreroll",n.MULTIPLAYER_RENDERED="multiplayer:rendered",n.MULTIPLAYER_SUGGEST_LOADED="multiplayer:suggest:loaded",n.MULTIPLAYER_SUGGEST_IMPRESSION="multiplayer:suggest:impression",n.MULTIPLAYER_SUGGEST_CLICK="multiplayer:suggest:click",n.MULTIPLAYER_SUGGEST_TIMEOUT="multiplayer:suggest:timeout",n.MULTIPLAYER_SUGGEST_ERROR="multiplayer:suggest:error",n.LIKES_LIKE="likes:like",n.LIKES_DISLIKE="likes:dislike",n.SUGGEST_RENDERED="suggest:rendered",n.SUGGEST_LOADED="suggest:loaded",n.SUGGEST_SHOW="suggest:show",n.SUGGEST_CLICK="suggest:click",n.SUGGEST_CLOSE="suggest:close",n.SUGGEST_ERROR="suggest:error",n.LEVEL_SELECTOR_RENDERED="level-selector:rendered",n.SHARE_SOCIALNETWORK="share:socialnetwork",n.SHARE_CLOSE="share:close",n.SHARE_OPEN="share:open",n.SHARE_EMBED="share:embed",n.SHARE_LINK="share:link",n.SETTINGS_MENU_CLOSE="settingsmenu:close",n.SETTINGS_MENU_RATE_SELECTOR_CLICK="settingsmenu:rate:selector:click",n.SETTINGS_MENU_LEVEL_SELECTOR_CLICK="settingsmenu:level:selector:click",n.SETTINGS_MENU_SUBTITLE_SELECTOR_CLICK="settingsmenu:subtitle:selector:click",n.DOCKING_CHANGED="docking:changed",n.AI_AD_ITEM_RENDER=" aiad:item:render",n.AI_AD_ITEM_OPEN="aiad:item:open",n.AI_AD_ITEM_CLICK="aiad:item:click",n.WATCH_NEXT_CLICK="watchnext:click",n.VIEWPORT_VISIBLE_AREA_CHANGED="viewport:visible:area:changed",n.OPTIONS_LOADER_LOADING="options:loader:loading",n.OPTIONS_LOADER_LOADED="options:loader:loaded",n.OPTIONS_LOADER_ERROR="options:loader:error",n.OPTIONS_LOADER_SPEEDTEST="options:loader:speedtest",n.POSTER_SHOW="poster:show",n.POSTER_HIDE="poster:hide",Object.defineProperty(n,"VIEWPORT_VISIBLE_AREA_CHANGED",{writable:!1,configurable:!1})},478:(e,t,i)=>{"use strict";i.d(t,{Nd:()=>n,Qc:()=>l,f:()=>r,pZ:()=>o});var s=i(9870);const n=Symbol("playInVisibleArea"),r=Symbol("unmuteInVisibleArea"),o=Symbol("playInVisiblePage"),a=e=>{switch(e){case"left-down":case"left-up":case"right-down":case"right-up":return e;default:return}},l=e=>{const t={id:(0,s.k)(e.id),initialId:(0,s.k)(e.initialId)};e.adTemplateId&&(t.adTemplateId=Number(e.adTemplateId)),e.playerTemplateId&&(t.playerTemplateId=Number(e.playerTemplateId)),e.multiplayerFilterId&&(t.multiplayerFilterId=Number(e.multiplayerFilterId)),e.suggestFilterId&&(t.suggestFilterId=Number(e.suggestFilterId)),e.pauseSuggestFilterId&&(t.pauseSuggestFilterId=Number(e.pauseSuggestFilterId)),e.suggestMobileFilterId&&(t.suggestMobileFilterId=Number(e.suggestMobileFilterId)),e.pauseSuggestMobileFilterId&&(t.pauseSuggestMobileFilterId=Number(e.pauseSuggestMobileFilterId)),e.suggestFilterShuffle&&(t.suggestFilterShuffle="false"!==e.suggestFilterShuffle),e.pauseSuggestFilterShuffle&&(t.pauseSuggestFilterShuffle="false"!==e.pauseSuggestFilterShuffle),e.showSuggestNames&&(t.showSuggestNames="false"!==e.showSuggestNames),e.live&&(t.live="false"!==e.live),e.withCredentials&&(t.withCredentials="false"!==e.withCredentials),e.preload&&(t.preload="false"!==e.preload),e.autoPlay&&(t[n]="scroll"===e.autoPlay,t[r]="scroll_mute"===e.autoPlay,t.autoPlay="true"===e.autoPlay),e.mute&&(t.mute="false"!==e.mute),e.volume&&(t.volume=Number(e.volume)),e.startPosition&&(t.startPosition=Number(e.startPosition));const{docking:i}=e;if(null!=i){let e="boolean"==typeof i?i:(e=>{switch(e){case"middle-down":case"middle-up":return e;default:return a(e)}})(i);null==e&&("false"===i?e=!1:"true"===i&&(e=!0)),t.docking=e}return e.dockingWidth&&(t.dockingWidth=Number(e.dockingWidth)),e.dockingOffset&&(t.dockingOffset=Number(e.dockingOffset)),e.dockingOffsetX&&(t.dockingOffsetX=Number(e.dockingOffsetX)),e.dockingOffsetY&&(t.dockingOffsetY=Number(e.dockingOffsetY)),e.dockingParentId&&(t.dockingParentId=e.dockingParentId),e.dockingDirection&&(t.dockingDirection=e.dockingDirection),e.dockingCloseDelay&&(t.dockingCloseDelay=Number(e.dockingCloseDelay)),e.aspectRatio&&(t.aspectRatio=Number(e.aspectRatio)),e.replay&&(t.replay="false"!==e.replay),e.replayTimeout&&(t.replayTimeout=Number(e.replayTimeout)),e.mediaControlVisible&&(t.mediaControlVisible="false"!==e.mediaControlVisible),e.playbackRate&&(t.playbackRate="false"!==e.playbackRate),e.unmute&&(t.unmute="false"!==e.unmute),e.showTitle&&(t.showTitle="false"!==e.showTitle),e.clickOnTitle&&(t.clickOnTitle="false"!==e.clickOnTitle),e.volumeVisible&&(t.volumeVisible="false"!==e.volumeVisible),e.viewerVisible&&(t.viewerVisible="false"!==e.viewerVisible),e.qualityVisible&&(t.qualityVisible="false"!==e.qualityVisible),e.fullscreenVisible&&(t.fullscreenVisible="false"!==e.fullscreenVisible),e.seekBarVisible&&(t.seekBarVisible="false"!==e.seekBarVisible),e.debug&&(t.debug="false"!==e.debug),e.sspJparams&&(t.sspJparams="string"==typeof e.sspJparams?JSON.parse(e.sspJparams):e.sspJparams),e.sspUserId&&(t.sspUserId=e.sspUserId),e.sspUserIdScope&&(t.sspUserIdScope=e.sspUserIdScope),e.referrer&&(t.referrer=e.referrer),e.authToken&&(t.authToken=e.authToken),e.authTokenVerifyUrl&&(t.authTokenVerifyUrl=e.authTokenVerifyUrl),"watermark"in e&&(t.watermark=e.watermark),e.watermarkPosition&&(t.watermarkPosition=a(e.watermarkPosition)),"likes"in e&&(t.likes="false"!==e.likes),"promoButtonImage"in e&&(t.promoButtonImage=e.promoButtonImage),"promoButtonClickUrl"in e&&(t.promoButtonClickUrl=e.promoButtonClickUrl),e.promoButtonPosition&&(t.promoButtonPosition=a(e.promoButtonPosition)),e.poster&&(t.poster=e.poster),e.minPlayingVisibleHeight&&(t.minPlayingVisibleHeight=Number(e.minPlayingVisibleHeight)),e.enforceStartWhenPlayingInParent&&(t.enforceStartWhenPlayingInParent="false"!==e.enforceStartWhenPlayingInParent),e.userId&&(t.userId=e.userId),e.sessionId&&(t.sessionId="false"!==e.sessionId),e.channel&&(t.channel=e.channel),e.height&&(t.height=Number(e.height)),e.shareEmbedCodes&&(t.shareEmbedCodes="false"!==e.shareEmbedCodes),e.shareSocialNetworks&&(t.shareSocialNetworks="false"!==e.shareSocialNetworks),e.multiplayerHidden&&(t.multiplayerHidden="false"!==e.multiplayerHidden),e.watchNext&&(t.watchNext="false"!==e.watchNext),e.threeSixtyViewer&&(t.threeSixtyViewer="false"!==e.threeSixtyViewer),e.multiplayerShuffle&&(t.multiplayerShuffle="false"!==e.multiplayerShuffle),"multiplayerTextColor"in e&&(t.multiplayerTextColor=e.multiplayerTextColor),"multiplayerColor"in e&&(t.multiplayerColor=e.multiplayerColor),"multiplayerBackgroundColor"in e&&(t.multiplayerBackgroundColor=e.multiplayerBackgroundColor),"multiplayerFontUrl"in e&&(t.multiplayerFontUrl=e.multiplayerFontUrl),e.mediaControlSkinName&&(t.mediaControlSkinName=e.mediaControlSkinName),"mediaControlTextColor"in e&&(t.mediaControlTextColor=e.mediaControlTextColor),"mediaControlHoverColor"in e&&(t.mediaControlHoverColor=e.mediaControlHoverColor),"mediaControlForegroundColor"in e&&(t.mediaControlForegroundColor=e.mediaControlForegroundColor),"mediaControlBackgroundColor"in e&&(t.mediaControlBackgroundColor=e.mediaControlBackgroundColor),"mediaControlFontUrl"in e&&(t.mediaControlFontUrl=e.mediaControlFontUrl),"amp"in e&&(t.amp=!0),"widgetId"in e&&(t.widgetId=e.widgetId),e.redirectToSuggestOnClick&&(t.redirectToSuggestOnClick="false"!==e.redirectToSuggestOnClick),e.videoBackdropColor&&(t.videoBackdropColor=e.videoBackdropColor),e.aiAd&&(t.aiAd="false"!==e.aiAd),e.yandexMetrikaVideoType&&(t.yandexMetrikaVideoType=e.yandexMetrikaVideoType),"false"===e.multiplayer&&(t.multiplayer=!1),"false"===e.suggest&&(t.suggest=!1),e.saveUserVolume&&(t.saveUserVolume="false"!==e.saveUserVolume),"false"===e.eventsReportLive&&(t.eventsReportLive=!1),"minDurationToShowAd"in e&&(t.minDurationToShowAd=Number(e.minDurationToShowAd)),t}},4391:(e,t,i)=>{"use strict";i.d(t,{B8:()=>s,qL:()=>n,q_:()=>o});const s=Boolean(navigator.userAgent.match(new RegExp(`(${["googlebot/","Googlebot-Mobile","Googlebot-Image","Google favicon","Mediapartners-Google","bingbot","slurp","java","wget","curl","Commons-HttpClient","Python-urllib","libwww","httpunit","nutch","phpcrawl","msnbot","jyxobot","FAST-WebCrawler","FAST Enterprise Crawler","biglotron","teoma","convera","seekbot","gigablast","exabot","ngbot","ia_archiver","GingerCrawler","webmon","httrack","webcrawler","grub.org","UsineNouvelleCrawler","antibot","netresearchserver","speedy","fluffy","bibnum.bnf","findlink","msrbot","panscient","yacybot","AISearchBot","IOI","ips-agent","tagoobot","MJ12bot","dotbot","woriobot","yanga","buzzbot","mlbot","yandexbot","purebot","Linguee Bot","Voyager","CyberPatrol","voilabot","baiduspider","citeseerxbot","spbot","twengabot","postrank","turnitinbot","scribdbot","page2rss","sitebot","linkdex","Adidxbot","blekkobot","ezooms","dotbot","Mail.RU_Bot","discobot","heritrix","findthatfile","europarchive.org","NerdByNature.Bot","sistrix crawler","ahrefsbot","Aboundex","domaincrawle","wbsearchbot","summify","ccbot","edisterbot","seznambot","ec2linkfinder","gslfbot","aihitbot","intelium_bot","facebookexternalhit","yeti","RetrevoPageAnalyzer","lb-spider","sogou","lssbot","careerbot","wotbox","wocbot","ichiro","DuckDuckBot","lssrocketcrawler","drupact","webcompanycrawler","acoonbot","openindexspider","gnam gnam spider","web-archive-net.com.bot","backlinkcrawler","coccoc","integromedb","content crawler spider","toplistbot","seokicks-robot","it2media-domain-crawler","ip-web-crawler.com","siteexplorer.inroximic","changedetection","blexbot","arabot","WeSEE:Search","niki-bot","CrystalSemanticsBot","rogerbot","360Spider","psbot","InterfaxScanBot","Lipperhey SEO Service","CC Metadata Scaper","g00g1e.net","GrapeshotCrawler","urlappendbot","brainobot","fr-crawler","binlar","SimpleCrawler","Livelapbot","Twitterbot","cXensebot","smtbot","bnf.fr_bot","A6-Indexer","ADmantX","Facebot","Twitterbot","OrangeBot","memorybot","AdvBot","MegaIndex","SemanticScholarBot","ltx71","nerdybot","xovibot","BUbiNG","Qwantify","archive.org_bot","Applebot","TweetmemeBot","crawler4j","findxbot","SemrushBot","yoozBot","lipperhey","y!j-asr","Domain Re-Animator Bot","AddThis"].join("|")})`,"i"))),n="requestStorageAccess"in document&&"function"==typeof document.requestStorageAccess,r=["RVPCompat\\w+/[0-9.]+","Gazeta.Ru \\w+ Application"],o=()=>{const e=new RegExp(`(${r.join("|")})`,"i");return navigator.userAgent.match(e)?"webview":"browser"}},1881:(e,t,i)=>{"use strict";i.d(t,{U1:()=>o,_T:()=>l,uA:()=>a});var s=i(2792);const n=e=>{if(4===e.length){let t="#";for(let i=1;i<e.length;i++)t+=e.charAt(i)+e.charAt(i);e=t}return[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]},r=e=>{if("#"===e.charAt(0))return r((e=>{const[t,i,s]=n(e);return`rgb(${t}, ${i}, ${s})`})(e));const t=(e=e.replace(/\s/g,"")).indexOf("(");if(-1===t)throw new Error(`The ${e} color was not parsed correctly,\n      because it has an unsupported format (color name or RGB %). This may cause issues in component rendering.`);return{type:e.substring(0,t),values:e.substring(t+1,e.length-1).split(",").map((e=>parseFloat(e)))}},o=(e,t)=>{const i=r(e);return t=((e,t,i)=>e<0?0:e>1?1:e)(t),"rgb"!==i.type&&"hsl"!==i.type||(i.type+="a"),i.values[3]=t,(e=>{const{type:t}=e,i=e.values.map(((e,t)=>"number"==typeof e?e:t<3?parseInt(e,10):parseFloat(e)));let s;return s=t.indexOf("hsl")>-1?`${t}(${i[0]}, ${i[1]}%, ${i[2]}%`:`${t}(${i[0]}, ${i[1]}, ${i[2]}`,4===i.length?s+=`, ${i[3].toFixed(2)})`:s+=")",s})(i)},a=e=>{const t=e.toString(16);return"#"===t.charAt(0)?t:`#${(0,s._)(t,"0",6)}`},l=e=>{const t=n(e);return(2126*t[0]+7152*t[1]+722*t[2])/1e4<128}},2485:(e,t,i)=>{"use strict";i.d(t,{d:()=>n,e:()=>s});const s=e=>{try{rent.cookie.,...s]=i.trim().split("=");if(t===e)return s.join("=")}return t}),null)}catch(e){return null}},n=({})=>{try{let s=`${e}=${t}`;i.domain&&(s+=`; domain=${i.domain}`),i.path&&(s+=`; path=${i.path}`),i.expires&&(s+=`; expires=${i.expires}`),i.sameSite&&(s+=`; SameSite=${i.sameSite}`),i.secure&&(s+="; Secure"),document.cookie=s}catch(e){}}},4729:(e,t,i)=>{"use strict";i.d(t,{MF:()=>r,RA:()=>o,pT:()=>n});var s=i(2792);const n=(e,t={})=>{const i=e%1e3,n=(e-i)/1e3,r=(0,s._)(Math.floor(n/3600),"0",2),o=(0,s._)(Math.floor(n%3600/60),"0",2),a=(0,s._)(Math.floor(n%3600%60),"0",2);return(t.hours||"00"!==r?`${r}:`:"")+`${o}:${a}`+(t.ms?`.${(0,s._)(i,"0",3)}`:"")},r=e=>{const[t="0",i="0",s="0"]=e.split(":").reverse(),n=3600*parseFloat(s)+60*parseFloat(i)+parseFloat(t);return isNaN(n)?-1:n},o=e=>{if(null==e)return-1;if("number"==typeof e)return parseInt(e,10);const[t,i,s=""]=e.split(":");if(!s)return-1;const[n,r="0"]=s.split(/[.,]/),o=3600*parseFloat(t)+60*parseFloat(i)+parseFloat(n)+parseFloat(r)/1e3;return isNaN(o)?-1:o}},4968:(e,t,i)=>{"use strict";i.d(t,{DW:()=>s,Xr:()=>n,ve:()=>r}),i(4737),i(1708),(0,i(5972).setMutationParams)({childList:!0,subtree:!0,attributes:!0});const s=(e,t)=>{const i=document.createElement("style");return i.type="text/css",i.textContent=e,t&&i.setAttribute("data-scope",t),document.head.appendChild(i)},n=async e=>{try{const t=await fetch(e);return await t.text()}catch(e){return""}},r=e=>new Promise(((t,i)=>{const s=document.createElement("script");s.src=e,s.async=!0,s.type="text/javascript",s.onload=()=>{t(s)},s.onerror=()=>{i(new Error(`script not loaded: ${e}`))},document.body.appendChild(s)}))},6448:(e,t,i)=>{"use strict";i.d(t,{Jl:()=>o,L1:()=>a,ew:()=>n,yG:()=>r});let s=!1;const n=e=>{s=e},r=()=>!1,o=()=>Boolean(~"https://vp.rambler.ru".indexOf("vp-stage"))||Boolean(~"https://vp.rambler.ru".indexOf("vp-dev")),a=()=>s||r()||o()},b,dY:()=>a});var s=i(6594),n=i(6448),r=i(5044);const o=[r.z.CORE_MOUSE_MOVE,r.z.CORE_MOUSE_LEAVE,r.z.CONTAINER_MOUSE_ENTER,r.z.CONTAINER_MOUSE_LEAVE,r.z.CONTAINER_MEDIACONTROL_SHOW,r.z.MEDIACONTROL_SHOW,r.z.MEDIACONTROL_MOUSEMOVE_SEEKBAR,r.z.MEDIACONTROL_MOUSELEAVE_SEEKBAR,r.z.ADVERTISEMENT_PROGRESS],a=()=>{(0,n.L1)()&&(s.Zb.setLevel(-1),s.Zb.getInstance().EXCLUDE_LIST.push(...o),s.Zb.debug("RamblerPlayer","1.129.0"))}},1410:(e,t,i)=>{"use strict";i.d(t,{Gz:()=>o,NF:()=>a,NX:()=>h,PY:()=>d});var s=i(6448),n=i(4968);const r="color: #0000ff; font-weight: bold; font-size: 13px;",o=(e,t)=>{var i;if((0,s.L1)()&&console.log("%c[debug][init]",r,e,t),!(0,s.yG)()){if(!window.ym)try{n=window,o=document,a="script",n[l="ym"]=n[l]||function(){(n[l].a=n[l].a||[]).push(arguments)},n[l].l=1*new Date,c=o.createElement(a),d=o.getElementsByTagName(a)[0],c.async=1,c.src="https://mc.yandex.ru/metrika/tag.js",d.parentNode.insertBefore(c,d)}catch(e){}var n,o,a,l,c,d;null===(i=window.ym)||void 0===i||i.call(window,e,"init",t)}},a=(e,t,i)=>{var n;(0,s.L1)()&&console.log("%c[debug][reachGoal]",r,t,i),(0,s.yG)()||null===(n=window.ym)||void 0===n||n.call(window,e,"reachGoal",...[t,i].filter(Boolean))};let l=null;const c={},d=(e={})=>{if((0,s.L1)()&&console.log("%c[debug][top100]",r,e.project),(0,s.yG)())return;const{project:t}=e;c.hasOwnProperty(t)||(c[t]=new Promise((async(i,s)=>{try{l||(l=(0,n.ve)("//st.top100.ru/top100/top100.js"));try{await l}catch(e){throw l=null,e}const s=new window.top100(Object.assign(Object.assign({},e),{checkInit:!0})),r=`initKraken${t}`,o=()=>{document.removeEventListener(r,o),i(s)};document.addEventListener(r,o)}catch(e){delete c[t],s(e)}})))},h=async(e,t)=>{if((0,s.L1)()&&console.log("%c[debug][sendCustomVars]",r,t),!(0,s.yG)())try{const i=await c[e];null==i||i.sendCustomVars(t)}catch(e){}}},3202:(e,t,i)=>{"use strict";i.d(t,{Af:()=:()=>T,Ww:()=>m,aF:()=>f,c9:()=>d,kX:()=>l,xq:()=>h,zZ:()=>g});var s=i(7964),n=i(2459),r=i(6448);const o=["env","retention","service","app","deviceType","account"],a=["adPlayback","adType","adBlockType"],l=new s.Histogram({name:"player_loading_time",help:"   ",buckets:[.1,.2,.3,.4,.5,.6,.7,1,2,5,10],labels:o}),c=new s.Histogram({name:"player_first_chunk_loading_time",help:"   ",buckets:[.05,.1,.15,.2,.3,.4,.5,1,2,5,10],labels:[...o,"resolution"]}),d=new s.Histogram({name:"player_plugins_loading_time",help:"  ",bu (  ,   )",labels:[...o,"reason"]}),f=new s.Counter  ",labels:[...o,...a]}),m=new s.Counter({name:"player_ad_start_error",help:tem","visible"]}),ADOMError")}function p(e){return d(eCustomEvent)&&(t.detail=e.detail),t}return e}function O(e){try{return"undefined"!=typeof Element&&A(e,Element)?T(e):Object.prototype.toString.caof e&&null!==e){const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}return{}}functio=i)return i;const s={allowUrls:[...e.allowUrls||[],...t.allowUrlsh(e){}return!1}(e)?(("ry{const{type:e="",value:i=""}=t&&t[t.length-1]||{};returt)))}(e,t.Object.keys(this._extra).length&&(e.extra=n(e){c.getUser(),...o&&{userAgent:o},hod ${e} couldn't be fnsions:{},hub:void __SENTRY__.hub)&&!de(e).isOlderThan(ne)||he(e,new oe),de(e);var t}(t[t,i]=e;return{url:Oe(t),te&&!!be.history.replaceState;return!t&&i}())return;const e=Se.onpopstate;function t(e){returnf("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Ee(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const s=function(e){const t=Object.getProrride_normonst i=e[1];for(const e of i)if(t(e,e[0].type))return!0;return!1}function We(e,t){return(t||new TextEncoder).encode(e)}function qe(e,t){const[i,s]=e;let n=JSON.stringify(i);function r(e){"string"==typeof n?n="string"==typeof e?ning"==typeof e?We(e,t):e)}for(const e of s){const[t,i]=e;if(r(`\n${JSON.stringify(t)}\n`),"string"==typeof i||i instanceof Uint8Array)r(i);else{let e;try{e=JSON.stringify(i)}catch(t){e=JSON.stringify(ze(i))}rs.logLevel=t}}const tt="7";function it(e,t={}){const i="string"==typeof t?t:t.tunnel,s="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return i||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",i=e.port?`:${e.port}`:"";return`${t}//${e.hatch(/^\d+/);e&&(c=e[0])}return Ve({host:r,pass:n,path:l,projectId:c,port:o,protocol:i,publicKey:s})}(e):Ve(e);if(t&&function(e){if("undefinedk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,i&&i.sdk);const o=function(e,t,i,s){const n=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOStringssionng(),...n&&{sdk:n},...;for(const e of n){const t=e.mechanism;if(t&&!1===t.handled){i=!0;break}}}const r="ok"===e.status;(r&&0===e.errors||r&&i)&&(ee(e,{...i&&{status:"crashed"},errors:e.errors||Number(s||i)}),this.captureSession(e))}_isClientDoneProcessing(e){res.map((e=>e.g rate = ${n})`,"log"));cond event.`;if(v(e))return e.then((e=>mes(){const e=thising"==typeof t.error.message?t.error.message:t:"No error;r=mt(e,o,i,s),U(r,o)}return"coception.code":`${n.code}xception:{values:[{type:m(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:`Non-Error ${s?"promise rejection":"exception"} captured with keys: ${P(t)}`}]},extra:{__serialized__:Ge(t,r)}};if(i){const t=ut(e,i);t.length&&(o.exception.values[0].stacktrace={frames:t})}return o}(e,t,i,n),$(r,{synthetic:!0}),r):(r=mt(e,t,i,s),U(r,`${t}`,void 0),$(r,{synthetic:!0}),r)}function mt(e,t,i,s){const n={message:t};if(s&&i){const s=ut(e,i);s.length&&(n.exception={values:[{value:t,stacktrace:{frames:eturn ce().captureException(e,{captureContext:t})}function At(e){ce().configureScope(e)}const Et=s.n2;let yt=0;function Tt(){return yt>0}function _t(e,t={},i){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(L(e))return e}catch(t){return e}const s=function(){const s=Array.prototype.slice.callddBreadcrumb({category:`ui.${t.namhis._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const i in e){const s=this._installFunc[i];s&&e[i]&&(t=i,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&a.log(`Global Handler attached: ${t}`),s(),this._installFunc[i]=void 0)}var t}}function Pt(){ke("error",(e=>{const[t,i,s]=Bt();if(!t.getIntegration(Dt))return;const{msg:n,url:r,line:o,column:a,error:l}=e;if(Tt()||l&&l.__sentry_own_requestEventTargetnst i=t[0];returtrument"}},s=L(t)dt(e,i[s]);return Yt(e,t,ipContext"}__init(){this.name=jt.id}setupOnce(){se((e=>{if(ce().getIntegration(jt)){if(!Et.navigator&&!Et.location&&!Et.document)return e;const t=e.request&&e.request.url||Et.location&&Et.location.href,{referrer:i}=Et.document||{},{userAgent:s}=Et.navigator||{},n={...e.request&&e.request.headers,...i&&{Referer:i},...s&&{"User-Agent":s}},r={...e.request,...t&&{url:t},headers:n};return{...e,request:r}}return e}))}}jt.__initStatic();class Ht{constructor(){Ht.prototype.__inn(e,t))}(e&a.wat);if(!i&&!s)return!0;if(Of(e)200||e.staon(e,t=Date.now()){const i=parseInt(`${e}`,10);if(!isNaN(i))retut&&(n.all=s+6e4);return n}(s,e),e)),(e=>{throw l("netCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return hi=void 0,i-=r,s--,Q(e)}}))}const pi=4;function fi(e){return ci(e,(function(t){return new J(((i,s)=>{const n=new XMLHttpRequest;n.onerror=s,n.onreadystatechange=()=>{n.readyState===pi&&i({statusCode:n.status,headers:{"x-sentry-rate-limits":n.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":n.getResponseHeader("Retry-After")}})},n.open("POST",er(t,e.headers[t]);n.send(t.bodyew K,new H,new Ut,new Rt,new Dt,new Kt,new Ht,new jt];function mi(e){e.startSession({ignoreDuration:!0}),e.captureSession()}var vi=i(2459),Ai=i(6448);const Ei=()=>{(0,Ai.yG)()||(function(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=gi),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Et.SENTRY_RELEASE&&Et.SENTRY_RELEASE.id&&(e.release=Et.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(i=e.stackParser||ri,Array.isArray(i)?ve(...i):i),integrations:pe(e),transport:e.transport||(Te()?ui:fi)};var i;!function(e,t){!0===t.debug&&(}(Ot,t)on tracking in non-browser environment with @sentry/browser is not supported."));const e=ce();e.captups://558bae3cf10b7200a2fe24e5b94d3768@sentry-saas.rambler-co.ru/18",environment:"production",release:"1.129.0",sampleRate:.05,allowUrls:[new RegExp("https://vp.rambler.ru"),new RegExp("https://api.vp.rambler.ru")],ignoreErrors:[/AbortError/,/NetworkError/,/Failed to fetch/,/Rond/,/webkit.messageHandlers/,/ResizeObserver loop limit/,/Timeout waiting for event/,/execute code from a freed script/]}),At((e=>{e.setTag("logger","player"),e.setTag("git_commit","667caea1f43d3a68e5db8270495074825d1554b2")})))},yi=(e,t)=>{(0,Ai.yG)()||At((i=>{i.setTureException",e,t),(0,Ai.yG)()||vt(e,(i=>{"errorCode"in t&&i.setTag("errorCode",t.errorCode),"code"in e&&i.setExtra("code",e.code);for(const e in t)t.hasOwnProperty(e)&&i.setExtra(e,t[e]);return i}))}},2792:(e,t,i)=>{"use strict";i.d(t,{O:()=>n,_:()=>s});const s=(e,t,i)=>{const{length:s}=e.toString();return`${s<i?[...new Array(i-s)].map((()=>t)).join(""):""}${e}`},n=()=>(+new Date/1e3).toString()+"-"+Math.round(2147483647*Math.random()).toString()},5783:(e,t,i)=>{"use strict";var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},n=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();t.Ae=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++y(u,[null].concat(t)))};var r=i(2113),o=c(i(3096)),a=i(5972),l=c(i(2954));function c(e){return(e,t){ieError("Cannot call a class as a function")}(0,a.setMutationParams)({attributes:!0,childList:!0,subtree:!0,characterData:!0});var h=function(){function e(t){d(this,e),this.events=new l.default,this.transport=t,this.resize=(0,o.default)(this.resize.bind(this),60,{leading:!0,trailing:!0})}return e:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}}},{key:"resize",value:function(){var e=this.getSize();(!this.currentSize||e.width!==this.currentSize.width||e.height!==this.currentSize.height)&&(this.transport.provider.setSize(e),this.currentSize=e,this.events.emit("resize",this.curreresize)}}]),e}(),u=function(){function e(t){var i=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in d(this,e),this.id=this.parseId(),this.confiProperty(n)){var o=s[n];this.properties[n]="function"==typeof o?o.bind(this):o,void 0===this[n]&&(this[n]=this.properties[n])}this.transport=new r.Consumer(this.id,"*",this.externalizeAsConsumer()),this.resizer=new h(this.transport),this.consumer=this.transport.consumer,this.transport.once("ready",(function(){i.provider=i.transport.provider,i.parentUrl=i.provider.url;var e=new URL(i.parentUrl),t=e.protocol,s=e.host;i.parentOrigin=t+"//"+s}))}return n(e,[{key:"parseId",value:function(){return new URLSearchParams(window.location.hash.slice(1)).get("widgetId")}},{key:"externalizeAsConsumer",value:function(){var e=this;return s({},this.config.externalizeAsConsumer?this.config.externalizeAsConsumer.call(this):this.properties,{initialize:function(){return e.config.initialize.call(e,e.provider)},externalizedProps:this.externalize(),getSize:function(){return e.resizer.getSize()},watchSize:function(){return e.resizer.watchSize()},resize:function(t){e.resizer.resize(tineProperty(t,"__esModule",{value:!0}),t.globalViewportEvents=t.mutationObserver=t.mutationEvents=void 0,t.setMutationParams=function(e){c=e,d&&f()},t.initObservion(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s="function"==typeof i?i(t):(0,n.default)(t,i),r=void 0,o=void 0;return e&&(r=y(e,!0))&&r!==document.body&&r!==document.documentElement&&(r.addEventListener("scroll",s,!1),o=!0),g.on("change",s),{destroy:funt.onRemoveFromDOM=function(e,t){var i=v(e),s=(0,n.default)((function(){var n=v(e);!n&&i&&(u.removeListener("mutation",s),t()),i=n}));u.on("mutation",s)},t.removeFromDOM=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.isElementInDOM=v,t.inViewport=function(e,t){return e.getBoundingClientRect().top-t<window.innerHeight},t.setClass=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];e&&(e.className=i.filter(Boolean).join(" "))},t.addClass=A,t.removeClass=E,t.toggleClass=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var n,r=(n=i.reverse(),Array.isArray(n)?n:Array.from(n)),o=r[0],a=r.slice(1);o?A.apply(void 0,[e].concat(l(a))):E.apply(void 0,[e].concat(l(a)))},t.findById=function(e,t){return t?t.querySelector('[id="'+e+'"]'):document.getElementById(e)},t.scrollByElementTo=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,s=y(e);if(s&&s!==e){var n=e.getBoundingClientRect().top-s.getBoundingClientRect().top+t;return s!==document.body&&s!==document.documentElement&&(n+=(0,o.getScroll)(s)),(0,o.scrollToTop)(s,n(7187)),o=i(2946);function a(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var c={childList:!0,subtree:!0},d=!1,h=window.MutationObseationObserver||window.MozMutationObserver||function(e){var t=void 0;return{observe:function(){t=setInterval(e,2e3)},disconnect:function(){clearInterval(t)}}},u=t.mutationEvents=new r.default,p=t.mutationObserver=new h((function(e){u.emit("mutation",e)}));function f(){d&&p.disconnect();var e=document.body||document.documentElement;p.observe(e,c),d=!0}var g=t.globalViewportEvents=new r.default,m=function(e){g.emit("change",e)};function v(e){reion A(e){for(var tlength,s=emovment)returncument.body||e===document.documentElement){var i=getComputedStyle(e).overflowY;if("auto"===i||"scroll"===i)return e}return y(e,t)}window.addEventListener("scroll",m),window.addEventListener("resize",m),(0,s.default)(f)},2946:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setScroll=s,t.getScroll=n,t.scrollToTop=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return new Promise((function(o){var a=n(e),l=0;t=Math.max(t,0),function n(){var c=(l+=1/60)/(r/1e3),d=c;if(c<1){i(n);var h=Math.round(a+(t-a)*d);s(e,h)}else s(e,t),o()}()}))};var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)};function s(e,t){e===document.body||e===document.documentElement?window.scrollTo(0,t):e.scrollTop=t}function n(e){return e===document.body||e===document.documentElement?document.body.scrollTop||document.documentElement.scrollTop:e.scrollTop}},1708:(e,t)=>{"use strict"},2954:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s,n=(s=i(7187))&&s.__esModule?s:{default:s};function r(){n.default.call(this),this.setMaxListeners(1/0)}Object.assign(r.prototype,n.default.prototype,{externalizeEmitter:function(){var e=["on","once","removeListener"],t=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).withEmit&&e.push("emit"),e.reduce((function(e,i){return e[i]=function(){t[i].apply(t,arguments)},e}),{})}})}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={id:e,loaded:!1,exports:{}};return i[e].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=i,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>e+"-"+{54:"289d6aa84a563384e16a",73:"6b77fa6341a50737755b",354:"139ba3268b9e691c111e",647:"4ca6a312c9e95d09dfd8",1475:"9c91440a1e47f263a2a4",1526:"83b8432d2a4a0f5d52da",1782:"9a7d054dc71ff53061f2",1991:"2f3ce1ea3bd18e3a5f77",1993:"a518042aa21ad40e9a6b",2074:"d6f5d23c7347dc75bf03",2351:"2a3b1b715fd170870955a77feb",5e2cb",4320:"c9ff804dfd9f304de398:"c42:"144,8589:"162ed0ec56b0405564c9",8675:"73d77e6ceaay not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="@rambler-vp/player:",n.l=(i,s,r,o)=>{if(e[i])e[i].push(s);else{var a,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+r),a.src=i),e[i]=[s];var u=(t,s)=>{a.onerror=a.onload=null,clearTimeout(p);var n=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(s))),t)return t(s)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.t},n.nmd=e=>(e.pathsp=.br",a>{0}e={};n.r(e),n.d(e,{en:()=>ea,ru:()=>ta});var t={};n.r(t),n.d(t,{advertisement:()=>na,aiAd:()=>oa,clickToPause:()=>aa,comscore:()=>va,eventsReport:(,lybackRate:()=>fa,promoButton:()=>Ca,recommender:()=>Sa,replay:()=>ca,settingsMenu:()=>wa,share:()=>Aa,sei},.of( 0),s=p(e)&&e.ownerSVGElement&&e.getBBox(),n=!y&&"border-box"===i.boxSizing,r=E.test(i.writingMode||""),o=!s&&A.test(i.overflowY||""),a=!s&&A.test(i.overflowX||""),l=s?0:T(i.paddingTop),c=s?0:T(i.paddingRight),h=s?0:T(i.paddingBottom),g=s?T(i.borderRnctiopu;forgets.length>0}))en():mnction(e,t){this.activeTargets=[],this.skippedTargets=[],this.length;i+=1)if(e[i].target===t)return i;return-1},z=function(){function e(){}return e.connect=function(e,t){var i=new U(e,t);$.set(e,i)},e.observe=function(e,t,i){var s=$.get(e),n=0===s.observationTargets.length;V(s.observationTargets,t)<0&&(n&&a.push(s),s.observationTargets.push(new F(prototypebut only 0 pre,e)},e.prototype.dction ResizeObserveh){var l=r.path,c=l.surmalizeED="hlsR_FLUSHemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_Fe){return this[e]}bool(e){return"YES"=egments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStaragments=[],this.encryptedFragments=[],thr(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&le(this.fragments[this.f|10}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}get edge(){return this.partEngme}geParistr en L.clsof="u";fOe.nave=(e,t)n e.suba},je=(e,t)=>ze(e,t)&&Ye(e,t+6)+10<=e.length-t,He=e=>e&&"PRIV"===ee.subarray(12,16))),t[r]={timescale:n,type:i},t[i]={timescale:n,id:r,codec:o}}}}}}return pt(e,["moov","mvex","trex"]).forEach((e=>{const i=dt(e,4),s=t[i];s&&(s.default={duration:dt(e,12),flags:dt(e,20)})})),t}function mt(e){const t=pt(e,["schm"])[0];if(t){const i=lt(t.subarray(4,8));if("cbcs"===i||"cenc"===i)return pt(e,["schi","tenc"])[0]}return ge.error("[eme] missing 'schm' box"),null}function vt(e){const t=dt(e,0);let i=8;1&t&&(i+=4),4&t&&(i+=4);let s=0;const n=dt(e,4);for(let r=0;r<n;r++)256&t&&(s+=dt(e,i),i+=4),512&t&&(i+=4),1024&t&&(i+=4),2048&t&&(i+=4);return s}function At(e,t){const i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}function Et(e,t){const i=[],s=t.samples,n=t.timescale,r=t.id;let o=!1;return pt(s,["moof"]).map((a=>{const l=a.byteOffset-8;pt(a,["traf"]).map((a=>{const c=pt(a,["tfdt"]).map((0!=(2&h)&e).subarray(0,16),i=new Uint8Arrayr.getAttribute("VALUE");if(e){const t=Le(e).subarray(0,16);!function(e){const t=function(e,t,i){const s=e[t];e[t]=e[i],e[i]=s};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}(t),this.keyId=t}}break}default:{let e=t.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e=bt[this.uri];if(!e){const t=Object.keys(bt).length%Number.MAX_SAFE_INTEGER;e=new Uint8Array(16),new DataView(e.buffer,12,4).setUint32(0,t),bt[this.uri]=e}this.keyId=e}return this}}const Ct=/\{\$(s)for(let s=i.length;s--;){const n=i[s],r=t[n];r&&(t[n]=kt(e,r))}}function kt(e,t){if(null!==e.variableList||e.hasVariableRefs){const i=e.variableList;return t.replace(Ct,(t=>{const s=t.substring(2,t.length-1),n=null==i?void 0:i[s];return void 0===n?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),t):n}))}return t}function Lt(e,t,i){let s,n,r=e.variableList;if(r||(e.variableList=r={}),"QUERYPARAM"in t){s=t.QUERYPARAM;try{const e=new self.URL(i).searchParams;if(!e.has(s))throw new Error(`"${s}" does not match any query parameter in URI: "${i}"`);n=e.get(s)}catch(t){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${t.message}`))}}else s=t.NAME,n=t.VALUE;s in (o.fragmentHint=m)):o.partList&&(Yt(v,m),v.cc=g,o.fragmentHint=v,d&&Ht(v,d,o));const y=a.lef,parent:p,networkDetails:n,stats:i});else s|(e.ageHees:CHING,this.onMediaDetaching,this),this.minr){if(AD_TIMEOUT:case he.KEY_LOAD_TIMEOUT:case 0;const s=Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-s<=e?1:i.start-s>e&&i.start?-1:0}function Di(e,t,i){const s=1e3*Math.min(t,i.duration+(i.deltaPTS?i.deltaPTS:0));return(i.endProgramDateTime||0)-s>e}function Pi(e,t,i){if(performance.now()-e.lastErrorPerfMs>3e5)return!0;const s=e.details;if(t.details===he.FRAG.endPTS,s.endDTS=e.endDTS,s.minEndPTS=e.minEndPTS,s.duration=e.endPTS-e.startPTS,s.duration&&(n=s),t.PTSKnown=t.alignedSliding=!0),s.elementaryStreams=e.elementaryStreams,s.loader=e.loader,s.stats=e.stats,s.urlId=e.urlId,e.initSegment&&(s.initSegment=e.initSegment,i=e.initSegment)})),i&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((e=>{var t;e.initSegment&&e.initSegment.relurl!==(null==(t=i)?void 0:t.relurl)||(e.initSegment=i)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((e=>!e)),t.deltaUpdateFailed){ge.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,i){const s=ae({},e);return i&&i.forEach((e=>{delete s[e]})),Object.keys(t).forEach((e=>{const i=new ye(t[e].attr,s[e]);i.isValients;if(r){ge.warn("discontinuity sliding from playlist, take drift into account");for(let e=0;e<o.length;e++)o[e].cc+=r}t.skippedSegments&&(t.startCC=t.fragments[0].cc),function(e,t,i){if(e&&t){let s=0;for(let n=0,r=e.length;n<=r;n++){const r=e[n],o=t[n+s];r&&o&&r.index===o.index&&r.fragment.sn===o.fragment.sn?i(r,o):s--}}}(e.partList,t.partList,((e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),n?Ei(t,n,n.startPTS,n.endPTS,n.startDTS,h&&(t.totalduration=t.edge-tdurated(s,t,r.details)):null!=(i=t.deliveryDirectives)&&i.ListAppended(e){const:0,retryDelay:0,maxRetryDelay{Result=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){y||(this.key=t,this.fastAesKey=new as(s,t)),this.fasts.length-1].type;return this.fragmentTracker.isEndListApp(e,t).thethod){const r=self.performance.d 0,this._id3Track=void 0,this.frameIndex=f(t+i>=e.length)return!1;const s=Ls(e,t);if(s<=i)return!1;const n=t+s;return n===e.length||Is(e,n)}return!1}function Ds(e,t,i,s,n){if(!e.samplerate){const r=function(e,t,i,s){let n,r,o,a;const l=navigator.userAgent.toLowerCase(),c=s,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=1+((192&t[i+2])>>>6);const h=(60&t[i+2])>>>2;if(!(h>d.length-1))return o=(1&t[i+2])<<2,o|=(192&t[i+3])>>>6,g 9:y=[4*(254&t[11])+128*ec&&"mp3"===e.codec?rn.box(rn.types.stsd,rn.STSD,rn.mp3(e)):rn.box(rn.types.stsd,rn.STSD,rn.mp4a(e)):rn.box(rn.types.stsd,rn.STSD,rn.avc1(e))}static tkhd(e){const t=e.id,is.tkhd,new Uint8Arrayes=[];const R=E/r,w=g/r,k={data1:C,data2:A,startPTS:R,endPTS:w,startDTS:R,endDTS:w,type:"audio",hasAudio:!0,hasVideo:!1,nb:b};return this.isAudioContiguous=!0,k}remuxEmptyAudi r=thi,!i&&h&&(i=h*dt(p[e],4)),l.t=e)return!0;const,8),s-=i*o,.flushReesetInitSegment(e,type.listeners=function(e){var t=i?i+e:e,s=this._events[t];if(!s)ufferWatchdogPerioing from ${n} to ${r}`);i.trigger(ce.ERROR,{type:de.MEDIA_ERROR,details:he.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:t,reason:t.message,frag:e})}return r}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:i,nudgeRetry:s}=this;if(null===i)return;const n=i.currentTime;if(this.nudgeRetry++,s<e.nudgeMaxRetry){const r=n+(s+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${n} to ${r}`);ge.warn(o.message),i.currentTime=r,t.trigger(ce.ERROR,{type:de.MEDIA_ERROR,details:he.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const i=new Error(`Playhead still not moving while enough data buffered @${n} after ${e.nudgeMaxRetry} nudges`);ge.error(i.message),t.trigger(ce.ERROR,{type:de.MEDIA_ERROR,details:he.BUFFER_STALLED_ERROR,error:i,fatal:!0})}}}class Ln extends _s{constructor(e,t,i){super(e,t,i,"[stream-cBufferedFrag(e.n"===t.id){if(n=e,s=t,"videoaudio;const{audio:n,video:r,audiovideo:o}=t;if(n){let t=eodec to ${t}`)),e.audioCodec&&e.audioCodec!==t&&this.log(`Swap`Init audio buffer, container:${n.container}, codngth=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;return e.length?(i=1===e.length?e[0]:function(e,t){const i=new Uint8Array(t);let s=0;for(let t=0;t<e.length;t++){const n=e[t];i.set(n,s),s+=n.length}return i}(e,t),this.reset(),i):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function Pn(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Nn(e[i].attrs,t[i].attrs))return!1;return!0}function Nn(e,t){const i=e["STABLE-RENDITION-ID"];return i?i===t["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((i=>e[i]!==t[i]))}class Mn{constructor(e){this.buffered=void 0;const t=(t,i,s)=>{if((i>>>=0)>s-1)throw new DOMException(`Fail maximum bound (${s})`);return e[i][t]};this.buffered={get length(){return e.length},end:i=>t("end",i,e.length),start:i=>t("start",i,e.length)}}}function xn(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];"subtitles"!==s.kind&&"captions"!==s.kind||!s.label||t.push(e[i]).length&pecified.");A=t,this.hasBeenReset=!0}})),Object.definePropertlign||"left"===t.align?0:"en}(es.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function i(){let e=t.buffer,i=0;for(e=fr(e);i<e.length&&"\r"!==e[i]&&"\n"!==e[i];)+nMediaDee.licenseXhr=o,this.setupLiconst i=t.media;thclass{constructor(e){this.loatimeout.bind(this),n.loadPoli),self.fetch(this.reqle(t.highWaterMark)?this.loadProgressively(n,s,e,t.highWaterMark,r):o?n.arrayBuffer():"json"===e.responseType?n.json():n.text()})).then((n=>{const{response:o}=this;self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const l=n[a];l&&(s.loaded=s.total=l);const c={url:o.url,data:n,code:o.status};r&&!le(t.highWaterMark)&&r(s,e,n,o),i.onSuccess(c,s,e,o)})).catch((t=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const n=t&&t.code||0,r=t?t.message:null;i.onError({code:n,text:r},e,t?t.details:null,s)}))}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,s=0,n){const r=new Dn,o=e.body.getReader(),a=()=>o.read().then((o=adError)return e},error:e,mimeType:o})}}}_onSBUpdateStart(e){rce:n,operationQueue:r,sourceBuffer:o}=this,a=o[e];if(!s||!n||!a)return ge.warn(`[buffer-controller]: Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void r.shiftAndExecuteNext(e);const l=le(s=!1,ge.logourceBuffer:s}=this,n=s[t];if(!n)return ge.warn(`[buffer-controller]: Attempting to append to the ${t} SourceBuffer, but it does not exist`),void i.shiftAndExecuteNext(t);n.ended=!1,n.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length)return ge.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);const{operationQueue:i}=this,s=t.map((e=>i.appendBlocker(e)));Promise.all(s).then((()=>{e(),t.forEach((e=>{const t=this.sourceBuffer[e];null!=t&&t.updating||i.shiftAndExecuteNext(e)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,i){const s=this.sourceBuffer[e];if(!s)return;const n=i.bind(this,e);this.listeners[e].push({event:t,listener:n}),s.addEventListener(t,n)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach((e=>{t.removeEventListener(e.event,e.listener)}))}},capLevelController:Dr,errorController:class{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=ge.log.bind(ge,"[info]:"),this.warn=ge.warn.bind(ge,"[warning]:"),this.error=ge.error.bind(ge,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(ce.ERROR,this.onError,this),e.on(ce.MANIFEST_LOADING,this.onManifestLoading,this),e.on(ce.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(ce.ERROR,this.onError,this),e.off(ce.ERROR,this.onErrorOut,this),e.off(ce.MANIFEST_LOADING,this.onManifestLoading,this),e.off(ce.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return(null==e?void 0:e.type)===Qt?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i,s;if(t.fatal)return;const n=this.hls,r=t.context;switch(t.details){case he.FRAG_LOAD_ERROR:case he.FRAG_LOAD_TIMEOUT:case he.KEY_LOAD_ERRORf(e.deta,s.errors.push(t),s.details=e.details,i[e.urlId]=s}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(ce.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(ce.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,i){const s=performance.now();if(t){if(this.lastTime){const e=s-this.lastTime,n=i-this.lastDroppedFrames,r=t-this.lastDecodedFrames,o=1e3*n/e,a=this.hls;if(a.trigger(ce.FPS_DROP,{currentDropped:n,currentDecoded:r,totalDroppedFrames:i}),o>0&&n>a.config.fpsDroppedMonitoringThreshold*r){let e=a.currentLevel;ge.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===a.autoLevelCapping||a.autoLevelCapping>=e)&&(e-=1,a.trigger(ce.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:a.currentLevel}),a.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:$e,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRe",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionionsTextTrack4LanguageCode:"",renderTextTrackent&&this.medisubtitleTracks(){return te,t.lang),s&&(s.mode="disabled")}s&&(s.groupId=t.groupId,this.textTracks.push(s))}))}else if(this.tracks.length){const e=this.tracks.map((e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e})));this.hls.trigger(ce.NON}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISst e=t.frag.sn,l=|null==(a=o:-1;e===n+tle payload")})}_parseIMSC1(e,t){const i=this.hls;Sr(t,this.initPTS[e.cc],(t=>{this._appendCues(t,e.level),i.trigger(ce.SUBTITLE_FRAGUBonnull!=(t=i.initSegment)&&t.data?Atvel];i.textCodec||Sr(t,this.initPTS[e.cc],(()=>{i.textCodec=yr,this._parseIMSC1(e,t)}),(()=>{i.textCodec="wvtt"}))}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach((e=>ri(i,e)))}else{const s=this.tracks[t];if(!s)return;const n=s.default?"default":"subtitles"+t;i.trigger(ce.CUES_PARSED,{type:"subtitles",cues:e,track:n})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===ei&&this.onFragLoaded(ce.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){const{cea608Parser1:i,cea608Parser2:s}=this;if(!this.enabled||!i||!s)return;const{frag:n,samples:r}=t.context.id===this.trackId&&t.context.groupId===this.grouadmanualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let s;if(s=-1===t&&e&&e.length?e.length-1:t,i)for(let t=s;t--;){const s=e[t].attrs["HDCP-LEVEL"];if(s&&s<=i)return t}return s}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get subtitleTracks(){const e=this.subtitleTrleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Zr.defaultConfig=void 0;var Qr=n(6594),Jr=n(4737),eo=n.n(Jr),to=n(3096),io=n.n(to),so=n(3874),no=n(5044),ro=n(2792);const oo=async(e={})=>{var{muted:t}=e,i=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(e,["muted"]);const s=[!0];t||Qr.Browser.isiOS||s.push(!1);const[n,r]=await Promise.all(s.map((e=>new Promise((t=>Qr.Utils.canAutoPlayMedia(t,Object.assign({inline:!0,muted:e},i)))))));return r?"unmuted":n?"muted":"notAllowed"},ao=e=>null!=e.audioTracks?e.audioTracks.length>0:null!=e.mozHasAudio?!0===e.mozHasAudio:null!=e.webkitAudioDecodedByteCount?e.webkitAudioDecodedByteCount>0:void 0;class lo extends Qr.QY{get name(){return"Core"}get attributes(){return{class:"eagleplayer-container eagleplayer-loader",style:"widt mediaControl(){return this.getPlugin(s.getPlugin("strings")||{t:e=>e}}get activePlaybackEl(){if(this.activePlayback)return this.activePlayback.$el?this.activePlayback.$el.get(0):this.activePlayback.el}constructor(e,t){super(e),this.handleVolumeChange=e=>{const t=e.target.muted?0:100*e.target.volume;this.activeContainer.volume!==t&&this.activeContainer.setVolume(t)},this.handleBeginFullscreen=()=>{this.trigger(no.z.CORE_FULLSCREEN,!0),this.updateSize()},this.handleEndFullscreen=()=>{this.trigger(no.z.CORE_FULLSCREEN,!1),this.updateSize()},t&&(this.optionsLoader=t)}resize(e){this.el.style.width="100%",super.resize(e)}renderContainers(){this.containers.forEach((e=>this.el.prepend(e.render().el)))}setupContainers(e){var t;if(super.setupContainers(e),Qr.Browser.isiOS){const e=null===(t=this.activePlayback)||void 0===t?void 0:t.el;e&&(e.addEventListener("volumechange",this.handleVolumeChange),e.addEventListener("webkitbeginfullscreen",this.handleBeginFullscreen),e.addEventListener("webkitendfullscreen",this.handleEndFullscreen))}}removeContainer(e){if(Qr.Browser.isiOS){const e=this.activePlayback.el;e.removeEventListener("volumechange",this.handleVolumeChange),e.removeEventListener("webkitbeginfullscreen",this.handleBeginFullscreen),e.removeEventListener("webkitendfullscreen",this.handleEndFullscreen)}super.removeContainer(e)}async reload(e){var t,i;await(null===(i=(t=this.options).reload)||void 0===i?void 0:i.call(t,e))}createContainerFactory(e){if(e.loader){const t=Qr.$;this.defer=t.Deferred(),this.defer.promise(this),this.containerFactory=new Qr.MD(e,e.loader,this.i18n,this.playerError)}}stopContainersAndPlugins(){this.disableResizeObserver(),this.containers.forEach((e=>e.destroy())),this.plugins.forEach((e=>e.destroy())),this.stopListening(),this.plugins=[],this.containers=[],this.ready=!1}replace(e){this._options=Object.assign({},e)}}var co=n(1251);class ho extends Qr.nH{constructor(){super(...arguments),this.hasStartedPlaying=!1}get name(){return"poster"}get supportedVersion(){return{min:"0.5.0"}}get attributes(){==(e=this.core.activeContainer)||void 0===e?void 0:e.getPlaybackType())===Qr.BT.LIVE}get shouldRender(){var e,t;yback)||void 0===e?void 0:e.name)&&((null===(t=this.core.activePlayback)|.options.ement")}bindEvents(){this.listenTo(this.core,no.z.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange);const{advertisement:e}=this;e&&(this.listenTo(e,no.z.ADVERTISEMENT_LOADED,this.onAdLoaded),this.listenTo(e,no.z.ADVERTISEMENT_STARTED,this.onPlay),this.listenTo(e,no.z.ADVERTISEMENT_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested));const{activeContainer:t}=this.core;t&&(this.listenTo(t,no.z.CONTAINER_STOP,this.onStop),this.listenTo(t,no.z.CONTAINER_PLAY,this.onPlay),this.listenTo(t,no.z.CONTAINER_SEEK,this.onSeek),this.listenTo(t,no.z.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(t,no.z.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(t,no.z.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(t,no.z.CONTAINER_ERROR,this.o_ENDED,this.onEg(){return clearTimeout(this.adLoadingTimeout),super.sttartedPlayingupdate()}onEnded(){constnull===(e=this.core.actDE))}render(){var e;if(!this.om){const e="string"==typeof t?t:t.url;this.$el.css({backgroundImage:groundColor:"transparent"});return null===(e=this.core.activeContainer)||void 0===e||e.$el.append(this.el),this.update(),this}}ho.AD_LOADING_TIMEOUT=500;var uo=n(6263),po=n(1722);const{now:fo,listContainsIgnoreCase:go}=Qr.Utils;Qr.zW.register("PLAYBACK_FRAGMENT_CHANGED"),Qr.zW.register("PLAYBACK_FRAGMENT_PARSING_METADATA");class mo extends Qr.LY{get name(){return"hls"}get supportedVersion(){return{min:"0.5.0"}}get levels(){return this._levels||[]}get currentLevel(){return null===this._currentLevel||void 0===this._currentLevel?-1:this._currentLevel}get isReady(){return this._isReadyState}set currentLevel(e){this._currentLevel=e,this.trigger(Qr.zW.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}get _startTime(){return this._playbackType===Qr.BT.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}get _now(){return fo()}get _extrapolatedStartTime(){if(!this._localStartTimeCorrelation)return this._playableRegixtrapolatedWindowDuration)}get _extrapolatedEndTime(){let e=this._playableRegionStartTime+this._play;const t=this._localEndTimeCorrelation,i=this._now-t.local,s=(t.remote+i)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(s,e))}get _duration(){return this._extrapolatedEndTime-this._startTime}get _extrapolatedWindowDuration(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}get bandwidthEstimate(){return this._hls&&this._hls.bandwidthEstimate}get defaultOptions(){return{preload:!0}}get customListeners(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}get sourceMedia(){return this.options.src}static get HLSJS(){return Zr}constructor(...e){super(...e),this.options.hlsPlayback=Object.assign(Object.assign({},this.defaultOptions),this.options.hlsPlayback),this._setInitialState()}_setI 0===this.options.hlsMinimumDvrSize?60:this.optionrapolatedWindowNumSegments=this.options.playback&&void 0!==this.options.playback.extrapolatedWindowNumSegments?this.options.playback.extrapolatedWindowNumSegments:2,this._playbackType=Qr.BT.VOD,this._lastTimeUpdate={current:0,total:0},this._lastDuration=null,this._playableRegionStartTime=0,this._localSxcluptions.tachHLSMedia(){this._hls&&this._hls.attachMedia(this.el)}_listenHLSEvents(){this._hls&&(this._hllsPlaybParsed=!0)),this._hls.on(Zr.Events.LEVEL_LOADED,((e,t)=>this._updatePlaybackType(e,t))),this._hls.o)),this._hls.on(Zr.Events.LEVEL_SWITCHING,((e,t)=>this._o._o>this._oksUpdated=!0)).callback)}))}_onFragmentParsingMetadata(e,t){this.trigger(Qr.zW.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:e,data:t})}render(){return this._ready(),super.render()}_ready(){this._isReadyState||(!this._hls&&this._setup(),this._isReadyState=!0,this.trigger(Qr.zW.PLAYBACK_READY,this.name))}_recover(e,t,i){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){Qr.Zb.error("hlsjs: failed to recover",{evt:e,data:t}),i.level=Qr.rG.Levels.FATAL;const s=this.createError(i);this.trigger(Qr.zW.PLAYBACK_ERROR,s),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}_setupSrc(e){}_startTimeUpdateTimer(){this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((()=>{this._onDurationChange(),this._onTimeUpdate()}),100))}_stopTimeUpdateTimer(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}getProgramDateTime(){return this._programDateTime}getDuration(){return this._duration}getCurrentTime(){return Math.max(0,this.el.currentTime-this._startTime)}getStartTimeOffset(){return this._startTime}seekPercentage(e){const t=e>0?this._duration*(e/100):this._duration;this.seek(t)}seek(e){e<0&&(Qr.Zb.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this._startTime,this.el.currentTime=e}seekToLivePoint(){this.seek(this.getDuration())}_updateDvr(e){this.trigger(Qr.zW.PLAYBACK_DVR,e),this.trigger(Qr.zW.PLAYBACK_STATS_ADD,{dvr:e})}_updateSettings(aypause"]:thon+=`, response: ${JSON.stringify(t.response)}`),t.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,t.type){case Zr.ErrorTypes.NETWORK_ERROR:switch(t.details){case Zr.ErrorDetails.MANIFEST_LOAD_ERROR:case Zr.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case Zr.ErrorDetails.MANIFEST_PARSING_ERROR:case Zr.ErrorDetails.LEVEL_LOAD_ERROR:case Zr.ErrorDetails.LEVEL_LOAD_TIMEOUT:Qr.Zb.error("hlsjs: unrecoverable network fatal error.",{evt:e,data:t}),s=this.createError(i),this.trigger(Qr.zW.PLAYBACK_ERROR,s),this.stop();break;default:Qr.,i.level=Qr.rG.Levels.WARN,this._hls.startLoad()}break;case Zr.ErrorTypes.MEDIA_ERROR:Qr.Zb.warn("hlsjs: trying to recover from media error.",{evt:e,data:t}),i.level=Qr.rG.Leveot recover from error.",{evt:e,data:t}),s=this.createError(i),this.trigger(Qr.zW.PLAYter maximum numberb.error("hlsjs: could not load decrypt key.",{evt:e,data:t}),s=this.createError(i),this.trigger(Qr.zW.PLAYBACK_ERROR,s),void this.stop();i.level=Qr.rG.Levels.WARN,Qr.Zb.warn("hlsjs: non-fatal error occurred",{evt:e,data:t})}}_keyIsDenied(e){return e.type===Zr.ErrorTypes.NETWORK_ERROR&&e.details===Zr.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}_onTimeUpdate(){const e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=e,this.trigger(Qr.zW.PLAYBACK_TIMEUPDATE,e,this.name))}_onDurationChange(){const e=this.getDuration();this._lastDuration!==e&&(this._lastDuration=e,super._onDurationChange())}_onProgress(){if(!this.el.buffered.length)return;let e=[],t=0;for(let i=0;i<this.el.buffered.length;i++)e=[...e,{start:Math.max(0,this.el.buffered.start(i)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(i)-this._playableRegionStartTime)}],this.el.currentTime>=e[i].start&&this.el.currentTime<=e[i].end&&(t=i);const i={start:e[t].start,current:e[t].end,total:this.getDuration()};this.trigger(Qr.zW.PLAYBACK_PROGRESS,i,e)}load(e){this._stopTimeUpdateTimer(),this.options.src=e,this._setup()}play(){!this._hls&&this._setup(),!this._manifestParsed&&!this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src),super.play(),this._startTimeUpdateTimer()}pause(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}stop(){this._stopTimeUpdateTimer(),this._hls&&super.stop(),this._destroyHLSInstance()}destroy(){this._stopTimeUpdateTimer(),this._destroyHLSInstance(),super.destroy()}_updatePlaybackType(e,t){this._playbackType=t.details.live?Qr.BT.LIVE:Qr.BT.VOD,this._onLevelUpdated(e,t),this._ccTracksUpdated&&this._playbackType===Qr.BT.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}_fillLevels(){this._level1e3+"Kbps"}))),tls)}_onLevelUpdaDuration;if(0ation&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*(ails.totaldtionExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}a!==this._playableRegionDuration&&(s=!0,this._playableRegionDuration=a);let l=n[0].start+a,c=r+o;if(l!==c)if(this._localEndTimeCorrelation){let e=this._localEndTimeCorrelation,t=this._now-e.local,i=(e.remote+t)/1e3;i>l?this._localEndTimeCorrelation={local:this._now,remote:1e3*l}:i<l-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(l-this._extrapolatedWindowDuration)}:i>c&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*c})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*l};s&&this._onDurationChange(),i&&this._onProgress()}_onFragmentChanged(e,t){this.trigger(Qr.zW.Custom.PLAYBACK_FRAGMENT_CHANGED,t)}_onFragmentLoaded(e,t){this.trigger(Qr.zW.PLAYBACK_FRAGMENT_LOADED,t)}_onSubtitleLoaded(){if(!this._ccIsSetup){this.trigger(Qr.zW.PLAYBACK_SUBTITLE_AVAILABLE);const e=this._playbackType===Qr.BT.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this._ccIsSetup=!0}}_onLevelSwitch(e,t){this.levels.length||this._fillLevels(),this.trigger(Qr.zW.PLAYBACK_LEVEL_SWITCH_END),this.trigger(Qr.zW.PLAYBACK_LEVEL_SWITCH,t);let i=this._hls.levels[t.level];i&&(this.highDefinition=i.height>=720||i.bitrate/1e3>=2e3,this.trigger(Qr.zW.PLAYBACK_HIGHDEFINITIONUPDATE, this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===Qr.BT.LIVE}getPlaybackType(){return this._playbackType}isSeekEnabled(){return this._playbackType===Qr.BT.VOD||this.dvrEnabled}}mo.canPlay=function(e,t){const i=e.split("?")[0].match(/.*\.(.*)$/)||[],s=i.length>1&&"m3u8"===i[1].toLowerCase()||go(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!Zr.isSupported()||!s)};var vo=,Ao=n(3379),Eo=n.n(Ao),yo=n(7795),To=n.n(yo),_o=n(569),bo=n.n(_o),So=n(3565),Co=n.n(So),Ro=n(9216),wo=n.n(Ro),ko=n(4589),Lo=n.n(ko),Io=n(9235),Oo={};Oo.styleTagTransform=Lo(),Oo.setAttributes=Co(),Oo.insert=bo().bind(null,"head"),Oo.domAPI=To(),Oo.insertStyleElement=wo(),Eo()(Io.Z,Oo);const Do=Io.Z&&Io.Z.locals?Io.Z.locals:void 0,Po=`\n<div class="${Do.message}"><%- message %></div>\n<% if (canReload) { %>\n<div class="${Do.button}" data-noop-reload>\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">\n    <path\n      fill-rule="evenodd"\n      d="M20 0v20M0 0v20m12.5-6.6h1.8a5.48 5.48 0 0 1-4.3 2.1 5.5 5.5 0 0 1-5.48-5.04.5.5 0 0 0-.5-.46h-.5a.5.5 0 0 0-.5.54A7 7 0 0 0 10 17c2.3 0 4.33-1.12 5.6-2.84v2.34a.5.5 0 0 0 .5.5h.4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 0-.5.5v.4a.5.5 0 0 0 .5.5M7.5 8h-4a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h.4a.5.5 0 0 1 .5.5v2.34A6.96 6.96 0 0 1 10 3a7 7 0 0 1 6.98 6.46.5.5 0 0 1-.5.54h-.5a.5.5 0 0 1-.5-.46A5.5 5.5 0 0 0 10 4.5a5.48 5.48 0 0 0-4.3 2.1h1.8a.5.5 0 0 1 .5.5v.4a.5.5 0 0 1-.5.5"\n    />\n  </svg>\n  \n</div>\n<% } %>\n<% if (hasSuggest) { %>\n<div class="${Do.button}" data-noop-hide>\n   \n</div>\n<% } %>\n`;class No extends Qr.BT{get name(){return"no_op"}get supportedVersion(){return{min:"0.5.0"}}get template(){return(0,Qr.XK)(Po)}get attributes(){return{class:Do.noop}}get events(){return{"click [data-noop-reload]":"reload","click [data-noop-hide]":"hide"}}reload(){const{id:e,reload:t}=this.options;e&&t({id:e})}hide(){this.$el.hide()}render(){const{handledLiveErrorCode:e,playbackNotSupportedMessage:t,playbackNotSupportedCanReload:i,sources:s}=this.options;return e||this.$el.html(this.template({message:t||this.i18n.t("playback_not_supported"),hasSuggest:!!(null==s?void 0:s.includes("not_found_fallback")),canReload:i})),this.$el.toggle(!e),this.trigger(no.z.PLAYBACK_READY,this.name),this}}No.canPlay=()=>!0;class Mo extends Q}isSeekEnabled(){const e=this.getDuration();return isFinite(e)||this.dvrEnabled}_onLoadedData(e){var t;super._onLoadedData(e),null!==(t=this.hasAudio)&&void 0!==t||(this.hasAudio=ao(this.el)),this.trigger(no.z.PLAYBACK_LOADEDDATA)}clearPlayTimeout(){clearTimeout(this.playTimeout)}play(){this.playTimeout=window.setTimeout((()=>super.play()),0),this.trigger(no.z.PLAYBACK_PLAY_INTENT)}pause(){this.clearPlayTimeout(),super.pause()}stop(){this.clearPlayTimeout(),super.stop()}configure(e){this.clearPlayTimeout(),super.configure(e)}destroy(){this.clearPlayTimeout(),super.destroy()}}var xo=n(1296),Bo=n.n(xo),Fo=n(1881);class Uo extends Qr.kX{constructor(){super(...arguments),this.playbackStarted=!1,this.dockingRequested=!1,this.isFullscreen=!1,this.onFullscreenChange=Bo()((e=>{e||(this.isFullscreen=!1)}),Uo.FULLSCREEN_THROTTLE_TIMEOUT),this.onEnforceStart=e=>{const{playerId:t}=this.core.options;e!==t&&this.undock()},this.onShown=async()=>{if(this.provider){const e=await this.provider.getEmbedVisibleArea();this.onPageScroll(e)}},this.onPageScroll=e=>{const{dockingDirection:t,parentElement:i}=this.options,{minPlayingVisibleHeight:s=.5}=this.core.options;if(!Uo.parentOffsetHeight)return;const n=e.height/Uo.parentOffsetHeight;if(e.top>=0&&n+e.top/Uo.parentOffsetHeight>=s&&(Uo.inViewportOrBelow=!0),!Uo.inViewportOrBelow)return;const r=e.top<=0&&"down"===t;r&&!this.isDocked()||this.isFullscreen||(n<s&&Uo.parentOffsetHeight===(null==i?void 0:i.offsetHeight)&&(this.isStartWithAutoPlay()||this.isPlayingOrPaused())&&!this.isDocked()?this.dock():(n>=s||r)&&this.isDocked()&&this.undock())},this.undock=async()=>{var e,t,i;if(!this.isDocked()||this.dockingRequested||!this.provider)return;const{playerId:s,dockingParentId:n,[W.Nd]:r,[W.f]:o,enforceStartWhenPlayingInParent:a}=this.core.options;this.dockingRequested=!0,this.cancelWaitDocking(),await this.waitDockingChanged((()=>{var e;return null===(e=this.provider)||void 0===e?void 0:e.undock()})),!(null===(e=this.multiPlayer)||void 0===e?void 0:e.isNextRecordRequested())&&(!this.isPlaying()||!r&&!o)&&!a&&(null===(i=null===(t=this.provider)||void 0===t?void 0:t.mediator)||void 0===i||i.stopPlaying(s,n)),Uo.docked=!1,this.dockingRequested=!1,this.waitDocking=window.setTimeout((()=>{this.cancelWaitDocking(),this.trigger(no.z.DOCKING_CHANGED,!1)}),Uo.WAIT_DOCKING_TIMEOUT)},this.disable=async(e=!1)=>{var t,i;Uo.disabled||(e&&(Uo.disabled=!0,null===(i=null===(t=this.provider)||void 0===t?void 0:t.mediator)||void 0===i||i.disableDocking()),super.disable(),await this.undock())},this.enable=()=>{Uo.disabled||super.enable()}}get name(){return"docking"}get supportedVersion(){return{min:"0.5.0"}}get provider(){return this.core.options.provider}get advertisement(){return this.core.getPlugin("advertisement")}get multiPlayer(){return this.core.getPlugin("multiplayer")}get canPlay(){var e;return(null===(e=this.core.activePlayback)||void 0===e?void 0:e.getPlaybackType())!==Qr.BT.NO_OP}isDocked(){return Uo.docked}isDockingRequested(){return this.dockingRequested}isDockingAwaited(){return Boolean(this.waitDocking)}getEmbedSize(){return this.embedSize}configure(){var e,t;this.options.docking?this.enable():(this.disable(),this.stoNGE,this.configure),null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t||t.once("disableDocking",this.disable),this.listenTo(this.core,no.z.CORE_OPTIONS_CHANGE,this.configure))}bindEvents(){var e,t;if(Uo.disabled)return void this.disable();if(null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t||t.once("disableDocking",this.disable),!this.options.docking)return void this.configure();super.stopListening(this.core,no.z.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,no.z.CORE_OPTIONS_CHANGE,this.configure),this.core.isReady?this.onReady():this.listenToOnce(this.core,no.z.CORE_READY,this.onReady),this.listenTo(this.core,no.z.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),this.listenTo(this.core,no.z.CORE_RESIZE,this.onResize),this.listenTo(this.core,no.z.CORE_FULLSCREEN,this.onFullscreenChange);const{activeContainer:i,activePlayback:s}=this.core;i&&this.listenTo(i,no.z.CONTAINER_ERROR,this.onError),s&&this.listenToOnce(s,no.z.PLAYBACK_PLAY_INTENT,this.onInitialPlay);const n=this.core.getPlugin("mediaControl");n&&this.listenTo(n,no.z.MEDIACONTROL_FULLSCREEN,this.onRequestFullscreen)}stopListening(e,t,i){var s,n,r,o;return i||(this.cancelWaitDocking(),this.unsubscribePageScroll(),null===(n=null===(s=this.provider)||void 0===s?void 0:s.meddisable),this.onEnforceStart&&(null===(o=null===(r=this.provider)||void 0===r?void 0:r.mediator)||void 0===o||o.removeListener("enforceStart",this.onEnforceStart))),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onResize(e){var t,i;this.isDocked()||this.dockingRequested||this.isDockingAwaited()||(this.embedSize=e,Uo.parentOffsetHeight=null!==(i=null===(t=this.options.parentElement)||void 0===t?void 0:t.offsetHeight)&&void 0!==i?i:0)}onRequestFullscreen(){this.isFullscreen=!0}onError(){this.isDocked()&&this.undock()}onInitialPlay(){this.playbackStarted=!0}async onReady(){var e,t,i,s;this.isFullscreen=this.core.isFullscreen(),this.canPlay&&this.provider&&(this.provider.once("widgetShown",this.onShown),null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t||t.on("enforceStart",this.onEnforceStart),this.unsubscribePageScroll=await this.provider.subscribePageScroll(this.onPageScroll)),this.isDocked()||this.dockingRequested||(Uo.parentOffsetHeight=null!==(s=null===(i=this.options.parentElement)||void 0===i?void 0:i.offsetHeight)&&void 0!==s?s:0),this.embedSize={width:this.core.el.offsetWidth,height:thht}}unsubscribePageScroll(){}isPlaying(){var e;return this.core.activeContainer.isPlaying()||!!(null===(e=this.advertisement)||void 0===e?void 0:e.isPlaying())}isPlayingOrPaused(){var e;return!!this.playbackStarted&&(this.isPlaying()||(null===(e=this.core.activePlayback)||void 0===e?void 0:e.el).paused)}isStartWithAutoPlay(){const{autoPlay:e,[W.Nd]:t,[W.f]:i}=this.options;return!this.playbackStarted&&!!(e||t||i)}async waitDockingChanged(e){var t;const{parentElement:i}=this.core.options,s=(null==i?void 0:i.offsetWidth)===(null===(t=this.embedSize)||void 0===t?void 0:t.width);await new Promise((t=>{s?setTimeout(t,60):this.listenToOnce(this.core,no.z.CORE_RESIZE,t),e()}))}cancelWaitDocking(){clearTimeout(this.waitDocking),delete this.waitDocking}async dock(){var e,t,i;if(Uo.disabled||this.isDocked()||this.dockingRequested||!this.provider)return;const{docking:s,dockingWidth:n,dockingOffset:r,dockingOffsetX:o=r,dockingOffsetY:a=r,dockingCloseDelay:l,dockingParentId:c,playerId:d,mediaControl:h}=this.options;if(this.dockingRequested=!0,this.cancelWaitDocking(),!1!==await(null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t?void 0:t.canPlay(d,c))){const e=(0,Fo.U1)((0,Fo.uA)(null!==(i=null==h?void 0:h.foregroundColor)&&void 0!==i?i:0),1),t="universal"===(null==h?void 0:h.skinName)?{buttonSize:40,buttonGap:10,buttonHoverable:!Qr.Browser.isMobile,buttonStyle:{padding:"10px",fill:"#343b4c","box-shadow":"0 10px 10px -10px rgba(52, 59, 76, 0.4)",background:"#fff"}}:{buttonSize:36,buttonGap:10,buttonHoverable:!Qr.Browser.isMobile,buttonStyle:{padding:"8px",fill:"rgba(255, 255, 255, 1.00)"===e?"black":e,filter:"drop-shadow(-2px 2px 10px rgba(102, 116, 166, 0.2))",background:"#fff"}};await this.waitDockingChanged((()=>{var e;null===(e=this.provider)||void 0===e||e.dock(Object.assign({docking:s,dockingWidth:n,dockingOffsetX:o,dockingOffsetY:a,dockingCloseDelay:l,dockingParentId:c,onCloseClick:()=>this.disable(!0)},t))})),Uo.docked=!0,this.trigger(no.z.DOCKING_CHANGED,!0)}this.dockingRequested=!1}}Uo.WAIT_DOCKING_TIMEOUT=150,Uo.FULLSCREEN_THROTTLE_TIMEOUT=500,Uo.inViewportOrBelow=!1,Uo.docked=!1,Uo.disabled=!1,Uo.parentOffsetHeight=0;var $o=n(7327),Vo=n(3202),zo=n(1135);const Go="unknown";class Ko extends Qr.kX{constructor(){super(...arguments),this.started=!1,this.adStarted=!1,this.stopMetricsPush=()=>{clearInterval(Ko.pushInterval),delete Ko.pushInterval,(0,Vo.VF)()},this.onBufferfull=()=>{this.bufferingStartTime&&(Date.now(his.bufferingStartTime)}}get name(){return"prometheus"}get supportedVersion(){return{min:"0.5.0"}}get provider(){return this.options.provider}get advertisement(){return this.core.getPlugin("advertisement")}get resolution(){var e;const{activePlayback:t}=thid 0===e?void 0:e.level.height;return null!=s?`${i}${s}p`:Go}bindEvents(){this.listenToOnce(this.core,no.z.CORE_READY,this.onReady),this.listenTo(this.core,no.z.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,no.z.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),window.addEventListener("beforeunload",this.stopMetricsPush);const{optionsLoader:e,activeContainer:t,activePlayback:i}=this.core;e&&this.listenTo(e,no.z.OPTIONS_LOADER_ERROR,this.onLoadingError),t&&(this.listenTo(t,no.z.CONTAINER_PLAY,this.onPlay),this.listenTo(t,no.z.CONTAINER_ERROR,this.onError)),i&&(this.listenTo(i,no.z.PLAYBACK_PLAY_INTENT,this.onPlayIntent),this.listenTo(i,no.z.PLAYBACK_LOADEDMETADATA,this.onLoadedMetadata),this.listenTo(i,no.z.PLAYBACK_LEVEL_SWITCH,this.onLevelSwitch),this.listenTo(i,no.z.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(i,no.z.PLAYBACK_BUFFERFULL,this.onBufferfull)),this.advertisement&&(this.listenTo(this.advertisement,no.z.ADVERTISEMENT_LOADING,this.onAdLoading),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_STARTED,this.onAdStarted),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_VIEWABLE,this.onAdViewable),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_NOTVIEWABLE,this.onAdNotViewable),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_ERROR,this.onAdError))}stopListening(e,t,i){return i||window.removeEventListener("beforeunload",this.stopMetricsPush),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.bindEvents()}onReady(){this.setDefaultLabels(),this.onLoaded(),this.onOptionsChange(),this.startMetricsPush()}setDefaultLabels(){const{channel:e}=this.core.options;(0,Vo.Ti)({env:(0,K.yG)()?"dev":(0,K.Jl)()?"stage":"prod",retention:"annual",service:"videoplatform",app:"player",deviceType:Qr.Browser.isMobile?"mobile":"desktop",account:null!=e?e:Go})}startMetricsPush(){Ko.pushInterval||(Ko.pushInterval=window.setInterval(Vo.VF,Ko.METRICS_PUSH_INTERVAL))}async onLoaded(){var e;const{channel:t}=this.core.options;if(!Ko.readySent&&t){const t=await(null===(e=this.provider)||void 0===e?void 0:e.getStartTime());Vo.kX.observe((Date.now()-t)/1e3),Ko.readySent=!0}}onOptionsChange(){const{autoPlayPolicy:e}=this.core.options;e&&!Ko.autoPlaySent&&(Ko.AUTO_PLAY_ERRORS.includes(e)&&Vo.RN.inc(1,{reason:null!=e?e:Go}),Ko.autoPlaySent=!0)}onPlayIntent(){this.playStartTime=Date.now()}onLoadedMetadata(){var e,t;if(null==this.firstChunkLoadingTime&&this.playStartTime){this.firstChunkLoadingTime=Date.now()-this.playStartTime;const i=null!==(t=null===(e=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===e?void 0:e.call(performance,"resource"))&&void 0!==t?t:[],s=i.length>0&&i.filter((({name:e})=>e.includes("seg-1"))).map((({duration:e,fetchStart:t,responseEnd:i})=>Math.round(e||i-t))),n=Array.isArray(s)&&s.length>0?s[s.length-1]:this.firstChunkLoadingTime;Vo.Af.observe(n/1e3,{resolution:this.resolution})}}onLevelSwitch(e){const{activePlayback:t}=this.core,[i]=t.levels.filter((t=>t.id===(null==e?void 0:e.level)));this.currentLevel=i}onLoadingError(e){var t;e.level===Qr.rG.Levels.FATAL&&((null==e?void 0:e.code)&&Ko.LOADING_ERRORS.includes(e.code)&&Vo.aF.inc(1,{errorCode:null!==(t=e.code)&&void 0!==t?t:Go}),this.stopMetricsPush())}onPlay(){this.started=!0}onBuffering(){var e;(null===(e=this.core.activeContainer)||void 0===e?void 0:e.getCurrentTime())>0&&(this.bufferingStartTime=Date.now())}onError(e){var t;e.level===Qr.rG.Levels.FATAL&&(this.started||Vo.aF.inc(1,{errorCode:null!==(t=e.code)&&void 0!==t?t:Go}),this.stopMetricsPush())}onAdLoading(e){Vo.zZ.inc(1,{adPlayback:e.adPlayback,adType:e.adType,adBlockType:e.blockType}),this.adStarted=!1,delete this.playStartTime}onAdStarted(){this.adStarted=!0}onAdViewable(e){var t;Vo.CG.inc(1,{adPlayback:e.adPlayback,adType:e.adType,adBlockType:e.blockType,adSystem:null!==(t=e.adSystem)&&void 0!==t?t:Go,visible:"1"})}onAdNotViewable(e){var t;Vo.CG.inc(1,{adPlayback:e.adPlayback,adType:e.adType,adBlockType:e.blockType,adSystem:null!==(t=e.adSystem)&&void 0!==t?t:Go,visible:"0"})}onAdError(e){var t,i,s,n,r,o,a;!this.adStarted&&Ko.AD_NOT_STARTED_ERRORS.includes(null===(t=null==e?void 0:e.raw)||void 0===t?void 0:t.code)&&Vo.Ww.inc(1,{adPlayback:null===(i=null==e?void 0:e.raw)||void 0===i?void 0:i.adPlayback,adType:null===(s=null==e?void 0:e.raw)||void 0===s?void 0:s.adType,adBlockType:null===(n=null==e?void 0:e.raw)||void 0===n?void 0:n.blockType,adSystem:null!==(o=null===(r=null==d 0!==o?o:Go,errorCode:null!==(a=null==e?vid 0!==a?a:Go})}}Ko.BUFFERING_TIMEOUT=500,Ko.METRICS_PUSH_INTERVAL=3e4,Ko.LOADING_ERRORS=[so.D1.UNKNOWN_ERROR.code,so.D1.NOT_RESPOND.cTO_PLAY_ERRORS=["notAllowed","notAllowedForSearchBot"],Ko.AD_NOT_STARTED_ERRORS=[void 0,zo.Advertisement.ErrorCodes.VAST_UNEXPECTED_AD_TYPE,zo.Advertisement.ErrorCodes.VASTisement.ErrorCodes.VAST_UNEXPECTED_DURATION_ERROR,zo.Advertisement.ErrorCodes.VAST_UNEXPECTED_MEDIA_FILE,zo.Advertisement.ErrorCodes.VAST_UNEXPECTED_AD_SOURCE,zo.Advertisement.ErrorCodes.VAST_WRAPPER_ERROR,zo.Advertisement.ErrorCodes.VIDEO_PLAY_ERROR,zo.Advertisement.ErrorCodes.VAST_MEDIA_FILE_NOT_FOUND,zo.Advertisement.ErrorCodes.VAST_MEDIA_LOAD_TIMEOUT,zo.Advertisement.ErrorCodes.VAST_LINEAR_ASSET_MISMATCH,zo.Advertisement.ErrorCodes.VAST_PROBLEM_DISPLAYING_MEDIA_FILE,zo.Advertisement.ErrorCodes.YING_FAILED,zo.Advertisement.ErrorCodes.VAST_NONLINEAR_DIMENSIONS_ERROR,zo.Advedes.VAST_NONLINEAR_LOADING_FAILED,zo.Advertisement.ErrorCodes.VAST_NONLINEAR_ASSET_MISMATCH,zo.Advertisement.ErrorCodes.UNKNOWN_ERROR,zo.Advertisement.ErrorCodes.VPAID_ERROR],Ko.readySent=!1,Ko.autoPlaySent=!1;const Yo=[co.sC,co.Wf,ho,uo.Viewport,po.EventsReport,Uo,$o.Mediascope,Ko],jo=[Mo,class extends mo{get hasAudio(){return this._hasAudio}set hasAudio(e){this._hasAudio=e}static canPlay(e,t){const i=e.split("?")[0].match(/.*\.(.*)$/)||[],s=i.length>1&&"m3u8"===i[1].toLowerCase()||(r=["application/vnd.apple.mpegurl","application/x-mpegURL"],void 0!==(n=t)&&void 0!==r&&r.filter((e=>n.toLowerCase()===e.toLowerCase())).length>0);var n,r;return!(!Zr.isSupported()&&!vo.B8||!s)}_onLoadedData(e){var t;super._onLoadedData(e),null!==(t=this.hasAudio)&&void 0!==t||(this.hasAudio=ao(this.el)),this.trigger(no.z.PLAYBACK_LOADEDDATA)}clearPlayTimeout(){clearTimeout(this.playTimeout)}play(){this.playTimeout=window.setTimeout((()=>super.play()),0),this.trigger(no.z.PLAYBACK_PLAY_INTENT)}pause(){this.clearPlayTimeout(),super.pause()}stop(){this.clearPlayTimeout(),super.stop()}configure(e){this.clearPlayTimeout(),super.configure(e)}destroy(){this.clearPlayTimeout(),super.destroy()}}],Ho=[No,...Qr.Browser.isiOS||Qr.Browser.isSafari?jo.reverse():jo];Yo.forEach((e=>{Qr.aN.registerPlugin(e)})),Ho.forEach((e=>{Qr.aN.registerPlayback(e)}));class Wo extends Qr.Ae{constructor(){super(...arguments),this.configure=async e=>{var t,i,s,n,r,o;if(!this.core||this.optionsLoader.isLoading)return;const a=null===(t=this.core)||void 0===t?void 0:t.getPlugin("multiplayer");if(e.id){const{registeredPlugins:e,registeredPlaybacks:t}=Qr.aN;this.loader.corePlugins=this.loader.corePlugins.filter((t=>~Object.keys(e.core).map((t=>e.core[t])).indexOf(t))),this.loader.containerPlugins=this.loader.containerPlugins.filter((t=>~Object.keys(e.container).map((t=>e.container[t])).indexOf(t))),this.loader.playbackPlugins=this.loader.playbackPlugins.filter((e=>~t.indexOf(e))),null===(i=this.core)||void 0===i||i.stopContainersAndPlugins()}await this.optionsLoader.load(e),this._options=Object.assign({},this.optionsLoader.options),this.options.reload=this.configure,this.options.loader=this.loader,this.options.disableCanAutoPlay=!0;const l=this.options,{sources:c}=l,d=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(l,["sources"]);e.id?(this.options.plugins&&this.loader.addExternalPlugins(this.options.plugins),null===(s=this.core)||void 0===s||s.replace(d),this.addCorePlugins(),a&&(null===(n=this.core)||void 0===n||n.addPlugin(a))):null===(r=this.core)||void 0===r||r.configure(d),this.core.options.playbackNotSupportedMessage=(null==c?void 0:c.includes("not_found_fallback"))?this.core.i18n.t("not_found_fallback"):this.core.i18n.t("playback_not_supported"),this.core.options.playbackNotSupportedCanReload=!1,null===(o=this.core)||void 0===o||o.configure({sources:c})}}get loader(){return this.player.loader}get optionsLoader(){return this.player.optionsLoader}create(){var e;return this.options.reload=this.configure,this.options.loader=this.loader,this.core=new lo(this.options,this.optionsLoader),null===(e=this.core)||void 0===e||e.createContainerFactory(this.options),this.core}}var qo=n(3465),Xo=n.n(qo),Zo=n(8917),Qo=n.n(Zo),Jo=n(7060);const ea=JSON.parse('{"unknown_error":"Video cannot be played now","video_not_found":"Video not found","video_publish_finish":"Publishing of video finished","access_denied":"Access to this video is denied in your country or on this website","geo_access_denied":"The video you requested cannot be played in your country. Sorry for the inconvenience.","warning_proxy_anon":"If you use traffic boosters, proxy servers or anonymizers please consider turning them off before viewing this content","access_restricted":"You cannot watch this video","video_processing":"Video is now processing","announce":"Broadcasting will start on {0} at {1}({2}).","no_broadcast":"No broadcast","no_signal":"No signal","no_stream":"No stream","no_connection":"Server connection terminated. Please check network settings. If you are using firewall or antivirus software then disable it.","secure_link_fail":"The link is no longer valid. Try reload the page.","watch_next":"Watch next","share":"Share","share_copy":"Copy","share_copied":"Copied","share_link":"URL","share_copy_link":"Copy URL","share_link_copied":"URL copied","share_code":"Code","share_copy_code":"Copy code","share_code_copied":"Code copied","ai_ad_hide":"Hide products","ai_ad_show":"Show products","ai_ad_buy":"Buy","ai_ad_note":"Advertisement. Advertiser:  ","suggest":"You may also like","replay":"Play again","advertisement":"Advertisement","advertisement_link":"More details","advertisement_after":"After advertisement","advertisement_skip":"Skip","advertisement_skip_timer":"Skip:","advertisement_watch":"Watch","advertisement_watch_timer":"Watch:","advertisement_block":"Advertisement","advertisement_block_of":"of","advertisement_block_number":"Advertisement #","advertisement_starting_in":"Advertisement starting in:","live":"Live","live_no_signal":"No signal","live_finished":"Broadcast ended","live_back_to":"Back to live","complaint":"Report","settings":"Settings","quality":"Quality","quality_auto":"Auto","speed":"Speed","speed_normal":"Normal","subtitles":"Subtitles","subtitles_off":"Off","ru":"Russian","en":"English","es":"Spanish","fr":"French","de":"Deutsch","ja":"Japanese","it":"Italian","ko":"Korean","zh":"Chinese","pt":"Portuguese","other":"Other","unmute":"Unmute","unmuted":"Unmuted","muted":"Muted","no_sound":"This video doesn\'t have sound","not_found_fallback":"Video not found, but you can choose from recommendations"}'),ta=JSON.parse('{"unknown_error":"     ","video_not_found":"  ","video_publish_finish":"   ","access_denied":"          ","geo_access_denied":" ,       .","warning_proxy_anon":"    , -   - ,     .","access_restricted":"     ","video_processing":"   ","announce":"  {0}  {1} ({2}).","no_broadcast":" ","no_signal":" ","no_stream":" ","no_connection":"    . ,   .       -      .","secure_link_fail":"   ,   .","watch_next":" ","share":"","share_copy":"","share_copied":"","share_link":"","share_copy_link":" ","share_link_copied":" ","share_code":"","share_copy_code":" ","share_code_copied":" ","ai_ad_hide":" ","ai_ad_show":"   ","ai_ad_buy":"","ai_ad_note":". :  ","suggest":"  ","advertisement":"","advertisement_link":" ","advertisement_after":"skip":"","advertisement_skip_timer":":","advertisement_watch":"","advertisement_watch_timer":":","advertisement_block":"","advertisement_block_of":"","advertisement_block_number":"  ","advertisement_starting_in":" :","live":"","live_no_signal":"  ","live_finished":" ","live_back_to":"  ","complaint":"","settings":"","quality":"","quality_auto":"","speed":"","speed_normal":"","subtitles":"","subtitles_off":"","ru":"","en":"","es":"","fr":"","de":"","ja":"","it":"","ko":"","zh":"","pt":"","other":"","unmute":" ","unmuted":" ","muted":" ","no_sound":"      ","playback_not_supported":"      . ,    ","not_found_fallback":"  ,       "}');var ia=n(7570);const sa=(0,ia.X)((()=>n.e(9400).then(n.bind(n,9400)))),na=(0,ia.X)((()=>Promise.resolve().then(n.bind(n,1135)))),ra=(0,ia.X)((()=>n.e(8427).then(n.bind(n,8427)))),oa=(0,ia.X)((()=>n.e(7023).then(n.bind(n,7023)))),aa=(0,ia.X)((()=>n.e(9603).then(n.bind(n,9603)))),la=(0,ia.X)((()=>n.e(7535).then(n.bind(n,7535)))),ca=(0,ia.X)((()=>n.e(5188).then(n.bind(n,5188)))),da=(0,ia.X)((()=>n.e(9758).then(n.bind(n,9758)))),ha=(0,ia.X)((()=>n.e(5764).then(n.bind(n,5764)))),ua=(0,ia.X)((()=>n.e(1993).then(n.bind(n,1993)))),pa=(0,ia.X)((()=>n.e(3042).then(n.bind(n,3042)))),fa=(0,ia.X)((()=>n.e(9702).then(n.bind(n,9702)))),ga=(0,ia.X)((()=>n.e(4730).then(n.bind(n,4730)))),ma=(0,ia.X)((()=>n.e(2351).then(n.bind(n,2351)))),va=(0,ia.X)((()=>n.e(7222).then(n.bind(n,7222)))),Aa=(0,ia.X)((()=>n.e(6191).then(n.bind(n,6191)))),Ea=(0,ia.X)((()=>n.e(3043).then(n.bind(n,3043)))),ya=(0,ia.X)((()=>n.e(7032).then(n.bind(n,7032)))),Ta=(0,ia.X)((()=>Promise.resolve().then(n.bind(n,6263)))),_a=(0,ia.X)((()=>Promise.resolve().then(n.bind(n,1722)))),ba=(0,ia.X)((()=>n.e(4886).then(n.bind(n,4886)))),Sa=(0,ia.X)((()=>n.e(2431).then(n.bind(n,2431)))),Ca=(0,ia.X)((()=>n.e(7837).then(n.bind(n,7837)))),Ra=(0,ia.X)((()=>n.e(4912).then(n.bind(n,4912)))),wa=(0,ia.X)((()=>n.e(7983).then(n.bind(n,7983)))),ka=(0,ia.X)((()=>n.e(9825).then(n.bind(n,9825)))),La=(0,ia.X)((()=>n.e(8675).then(n.bind(n,8675)))),Ia=(0,ia.X)((()=>Promise.resolve().then(n.bind(n,7327)))),Oa=(0,ia.X)((()=>n.e(2074).then(n.bind(n,2074)))),Da=(0,ia.X)((()=>n.e(8986).then(n.bind(n,8986)))),Pa=(0,ia.X)((()=>n.e(3451).then(n.bind(n,3451)))),Na={["https://vp.rambler.ru".replace("https://","")]:"vp","mail.rambler.ru":"mail","finance.rambler.ru":"finance","autorambler.ru":"autorambler","travel.rambler.ru":"travel","horoscopes.rambler.ru":"horoscopes","soft.rambler.ru":"soft","weather.rambler.ru":"weather","top100.rambler.ru":"top100","weekove","kassa.rambler.ru":"kassa","news.rambler.ru":"news_media","www.rambler.ru":"head","kino.rambler.ru":"kino_media","auto.rambler.ru":"auto_media","doctor.rambler.ru":"doctor_media","woman.rambler.ru":"woman_media","sport.rambler.ru":"sport_media","help.rambler.ru":"help","class.rlass","games.rambler.ru":"games","r0.ru":"r0","quto.ru":"quto","afisha.ru":"afisha","daily.afisha.ru":"afishaDaily","lenta.ru":"lenta","championat.com":"champ","gazeta.ru":"gazeta","moslenta.ru":"moslenta","secretmag.ru":"secretmag","motor.ru":"motor","ferra.ru":"ferra","passion.ru":"passion","letidor.ru":"letidor","wmj.ru":"wmj","eda.ru":"eda","indicator.ru":"indicator","livejournal.com":"livejournal"},Ma=(e,t)=>{var i;if((0,K.L1)()&&console.log("%c[debug][loyalty]","color: #0000ff; font-weight: bold; font-size: 13px;",e,t),!(0,K.yG)()){if(!window.loyalty)try{s=window,n=document,r="script",s[o="loyalty"]=s[o]||function(){(s[o].q=s[o].q||[]).push(arguments)},s[o].l=1*new Date,a=n.getElementsByTagName(r)[0],(l=n.createElement(r)).async=!0,l.src="https://loyalty.rambler-co.ru/sdk/sdk.js",a.parentNode.insertBefore(l,a)}catch(e){}var s,n,r,o,a,l;null===(i=window.loyalty)||void 0===i||i.call(window,e,t)}},xa=n.p+"55c0750ac5225c3d6f96.png",Ba=n.p+"4e75069800b136c59203.gif";class Fa extends Qr.L6{get name(){return"OptionsLoader"}get provider(){return this.options.provider}get playerError(){return this.player.playerError}get isLoading(){return this.loading}constructor(e){super(e.options),this.loading=!1,this.multiPlayerLoaded=!1,this.createError=Qr.PZ.createError.bind(this),this.player=e}async load(t){var i,s,n,r;this.trigger(no.z.OPTIONS_LOADER_LOADING,t),this.loading=!0;const{strings:o,playerTemplateId:a,checkReferrerCount:l}=this.options,{playback:c,playList:d}=this.player.options;let h;if(null==l)try{h=null===(s=(i=JSON.parse('["vp.rambler.ru","vp.dev.rambler.ru","vp-stage01.rambler.ru","vp-stage02.rambler.ru","vp-dev01.rambler.ru","vp-dev02.rambler.ru"]')).every)||void 0===s?void 0:s.call(i,(e=>{var t,i;return!(null===(i=null===(t=this.options)||void 0===t?void 0:t.referrer)||void 0===i?void 0:i.match(e))}))}catch(e){}else h=!1;if(this._options=Object.assign(Object.assign(Object.assign({},this.player.options),t),{strings:o,checkReferrerCount:h}),a&&(this._options.playerTemplateId=a),t.playback&&(this.options.playback=Object.assign(Object.assign({},c),t.playback)),t.playList&&(this.options.playList=Object.assign(Object.assign({},d),t.playList)),this.options.plugins||(this.options.plugins={core:[],container:[]}),!this.options.strings){const{language:t}=this.options;t&&(this.options.strings={[t]:e[t]})}try{t.id?(Qo()(this.testDownloadSpeed),await this.loadPlayerData(),await Promise.all([this.verifyAuthToken(),this.loadSources().then((()=>this.loadPlugins()),(async e=>{var t;throw(null===(t=e.details)||void 0===t?void 0:t.shouldHandleLiveError)&&await this.loadPlugins(["mediaControl","liveStatus","videoBackdrop"]),e})),this.testAutoPlayOptions()])):t.playList&&await this.loadSources(),this.trigger(no.z.OPTIONS_LOADER_LOADED,this.options)}catch(e){const t=this.createError({code:e.code,description:null!==(r=null===(n=e.details)||void 0===n?void 0:n.message)&&void 0!==r?r:e.message,level:Qr.rG.Levels.FATAL},{useCodePrefix:!1});window.setTimeout((()=>{this.trigger(no.z.OPTIONS_LOADER_ERROR,t)}),0)}this.loading=!1}async testDownloadSpeed(){var e,t,i;try{if(!Qr.Browser.isSafari||!Qr.Browser.isiOS){let s,n;if(null===(e=window.navigator)||void 0===e?void 0:e.connection){const{downlink:e,effectiveType:t}=window.navigator.connection;n=Object.keys(Fa.START_LEVEL_DOWNLINK).sort(((e,t)=>+e-+t)).reduce(((i,s)=>"number"!=typeof i&&e<+s?Fa.START_LEVEL_DOWNLINK[+s][/2g/.test(t)?0:"3g"===t?1:2]:i),void 0),s=1e3*e}else{const e=new Image;await new Promise((t=>{e.addEventListener("load",t),e.addEventListener("error",t),window.setTimeout(t,Fa.TEST_DOWNLOAD_SPEED_TIMEOUT),e.src=`${Ba}?_=${this.options.playerId}`}));const i=null===performance||void 0===performance?void 0:performance.getEntriesByType("resource");if(i){const r=i.find((t=>~t.name.indexOf(e.src)));(null===(t=this.options.playback)||void 0===t?void 0:t.hlsjsConfig)&&(s=r?8*r.transferSize/1e3/((r.responseEnd-r.requestStart)/1e3):-1,n=Object.keys(Fa.START_LEVEL_SPEED).reduce(((e,t)=>"number"!=typeof e&&s<+t?Fa.START_LEVEL_SPEED[+t]:e),void 0))}}(null===(i=this.options.playback)||void 0===i?void 0:i.hlsjsConfig)&&(this.options.playback.hlsjsConfig.startLevel=n),this.trigger(no.z.OPTIONS_LOADER_SPEEDTEST,{download:s,startLevel:n})}}catch(e){}}async loadPlayerData(){var e,t,i,s,n,r,o,a,l,c,d,h,u,p,f,g,m,v,A,E,y,T,_,b,S,C,R,w,k,L,I,O,D,P,N,M,x,B,F,U,$,V,z,G,K,Y,j,H,q,X,Z,Q,J,ee,te,ie,se,ne,re,oe,ae,le,ce,de,he,ue,pe,fe,ge,me,ve,Ae,Ee,ye,Te,_e,be,Se,Ce,Re,we,ke,Le,Ie,Oe,De,Pe,Ne,Me,xe,Be,Fe,Ue,$e,Ve,ze;const Ge=!!this.options.sessionId&&!!this.options.channel;let Ke,Ye;this.provider&&Ge&&(Ke=(await this.provider.getSessionToken()).token);try{Ye=await(0,so.v_)(Object.assign(Object.assign({},this.options),{sessionId:Ke}))}catch(n){if(null!==(e=(pe=this.options).channel)&&void 0!==e||(pe.channel=null!==(s=await(null===(i=null===(t=this.provider)||void 0===t?void 0:t.mediator)||void 0===i?void 0:i.getOptionStorage("channel")))&&void 0!==s?s:void 0),!this.options.channel||!this.options.referrer||n.code!==so.D1.RECORD_NOT_FOUND.code)throw n;Ye=await(0,so.i8)(this.options),this.options.sources=["not_found_fallback"],this.options.playbackNotSupportedCanReload=!1}const{advertisement:je,autoPlay:He,autoPlayMobile:We,playList:qe,mediaControl:Xe,tns:Ze,comscore:Qe,yametrika:Je}=Ye,et=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(Ye,["advertisement","autoPlay","autoPlayMobile","playList","mediaControl","tns","comscore","yametrika"]),tt=Qr.Browser.isMobile?We:He,it=Object.assign(Object.assign({autoPlay:"true"===tt,[W.Nd]:"scroll"===tt,[W.f]:"scroll_mute"===tt},et),this.options);if(it.multiplayer&&"false"!==this.options.recommendationSystem){const{useRecommendations:e,recommendationsBlockId:t,recommendationsRcmId:i,recommendationsXuid:s}=(null===(n=et.allFrontSettings)||void 0===n?void 0:n.playerTemplate)||{};e&&t&&i&&s&&(it.recommender={blockId:t,rcmId:i,xuid:s})}if(null==Fa.usePseudoStreaming){const e=Boolean(it.multiplayer&&(null===(o=null===(r=et.allFrontSettings)||void 0===r?void 0:r.playerTemplate)||void 0===o?void 0:o.usePseudoStreaming));Fa.usePseudoStreaming=e,e&&(Fa.advertisement=je)}if(it.usePseudoStreaming=Fa.usePseudoStreaming,it.advertisement=Fa.usePseudoStreaming?Xo()(Fa.advertisement):je,this._options=Object.assign(Object.assign({},this.options),it),qe){const{startsAt:e}=qe;e?(qe.startsAtDate=new Date(e),qe.startsAtTimeZone=("-"===e.slice(-6,-5)?-1:1)*(Number(e.slice(-5,-3))+Number(e.slice(-2))/60)):(qe.startsAtDate=null,qe.startsAtTimeZone=null)}if(this.options.playList=qe,this.options.mediaControl=Xe,this.options.useDvrControls=null==qe?void 0:qe.dvr,this.options.hlsUseNextLevel=(null!==(a=null==qe?void 0:qe.chunkDuration)&&void 0!==a?a:Fa.DEFAULT_CHUNK_DURATION)<=Fa.NEXT_LEVEL_MAX_CHUNK_DURATION,this.options.channel&&(null===(c=null===(l=this.provider)||void 0===l?void 0:l.mediator)||void 0===c||c.setOptionStorage("channel",this.options.channel)),this.options.playback&&(this.options.playback.controls=!Xe),!this.options.loyalty){const e=this.options.referrer?new URL(this.options.referrer).hostname:null,t=null==e?void 0:e.split(".").slice(-3).join("."),i=null==e?void 0:e.split(".").slice(-2).join("."),s=null!==(h=null!==(d=e&&Na[e])&&void 0!==d?d:t&&Na[t])&&void 0!==h?h:i&&Na[i];s&&(this.options.loyalty={project:s})}it.recommender&&(this.options.recommender=it.recommender);const st=null===(u=it.allFrontSettings)||void 0===u?void 0:u.playerTemplate;if(null!==(p=(fe=this.options).pauseSuggestFilterShuffle)&&void 0!==p||(fe.pauseSuggestFilterShuffle=Qr.Browser.isMobile?null==st?void 0:st.pauseSuggestMobileFilterShuffle:null==st?void 0:st.pauseSuggestFilterShuffle),null!==(f=(ge=this.options).suggestFilterShuffle)&&void 0!==f||(ge.suggestFilterShuffle=Qr.Browser.isMobile?null==st?void 0:st.suggestMobileFilterShuffle:null==st?void 0:st.suggestFilterShuffle),(null===(g=this.options.sources)||void 0===g?void 0:g.includes("not_found_fallback"))&&(this.options.suggestFilterShuffle=Qr.Browser.isMobile?null==st?void 0:st.notFoundSuggestMobileFilterShuffle:null==st?void 0:st.notFoundSuggestFilterShuffle),null!==(m=(me=this.options).minPlayingVisibleHeight)&&void 0!==m||(me.minPlayingVisibleHeight=Qr.Browser.isMobile?null==st?void 0:st.minPlayingVisibleHeightMobile:null==st?void 0:st.minPlayingVisibleHeightDesktop),null!==(v=(ve=this.options).enforceStartWhenPlayingInParent)&&void 0!==v||(ve.enforceStartWhenPlayingInParent=Qr.Browser.isMobile?null==st?void 0:st.enforceStartWhenPlayingInParentMobile:null==st?void 0:st.enforceStartWhenPlayingInParentDesktop),null!==(A=(Ae=this.options).redirectToSuggestOnClick)&&void 0!==A||(Ae.redirectToSuggestOnClick=Qr.Browser.isMobile?null==st?void 0:st.redirectToSuggestOnClickMobile:null==st?void 0:st.redirectToSuggestOnClickDesktop),null!==(E=(Ee=this.options).showSuggestNames)&&void 0!==E||(Ee.showSuggestNames=Qr.Browser.isMobile||!0!==(null==st?void 0:st.hideSuggestNamesDesktop)),null!==(y=(ye=this.options).mediaControlVisible)&&void 0!==y||(ye.mediaControlVisible=null===(T=null==st?void 0:st.mediaControlVisible)||void 0===T||T),this.options.mediaControlVisible||(this.options.allowUserInteraction=!1,this.options.disableKeyboardShortcuts=!0),!1!==this.options.suggest&&this.options.mediaControlVisible&&(this.options.suggest=Qr.Browser.isMobile?et.suggestMobile:et.suggest),(null===(_=this.options.sources)||void 0===_?void 0:_.includes("not_found_fallback"))&&"universal"===(null===(S=null===(b=this.options.mediaControl)||void 0===b?void 0:b.skinName)||void 0===S?void 0:S.toLowerCase())){delete this.options.suggest;const e=Qr.Browser.isMobile?null==st?void 0:st.notFoundSuggestMobileFilterId:null==st?void 0:st.notFoundSuggestFilterId;if(!e)throw new Jo.MS(so.D1.RECORD_NOT_FOUND);this.options.suggest={filterId:e,url:`//${this.options.channel}.media.eagleplatform.com/api/filters/${e}/suggest.json`}}if(Qr.Browser.isMobile){const{docking:e}=this.options;null!=e&&!0!==e||(this.options.docking=!0===e||!0===(null==st?void 0:st.dockingMobile)?"middle-down":null==st?void 0:st.dockingMobile),null!==(C=(Te=this.options).dockingOffsetY)&&void 0!==C||(Te.dockingOffsetY=null==st?void 0:st.dockingMobileOffsetY),null!==(R=(_e=this.options).dockingCloseDelay)&&void 0!==R||(_e.dockingCloseDelay=null==st?void 0:st.dockingMobileCloseDelay)}else null!==(w=(be=this.options).docking)&&void 0!==w||(be.docking=null==st?void 0:st.docking),null!==(k=(Se=this.options).dockingOffsetX)&&void 0!==k||(Se.dockingOffsetX=null==st?void 0:st.dockingOffsetX),null!==(L=(Ce=this.options).dockingOffsetY)&&void 0!==L||(Ce.dockingOffsetY=null==st?void 0:st.dockingOffsetY),null!==(I=(Re=this.options).dockingCloseDelay)&&void 0!==I||(Re.dockingCloseDelay=null==st?void 0:st.dockingCloseDelay);null!==(O=(we=this.options).dockingDirection)&&void 0!==O||(we.dockingDirection=(null==st?void 0:st.dockingDirection)||"both");const{share:nt,shareEmbedCodes:rt,shareSocialNetworks:ot,multiplayer:at,multiplayerTextColor:lt,multiplayerColor:ct,multiplayerBackgroundColor:dt,multiplayerFontUrl:ht,mediaControlSkinName:ut,mediaControlTextColor:pt,mediaControlHoiaControlForegroundColor:gt,mediaControlBackgroundColor:mt,mediaControlFontUrl:vt,promoButtonImage:At=(null==st?void 0:st.promoButtonImage),promoButtonPosition:Et=(null==st?void 0:st.promoButtonPosition),promoButtonClickUrl:yt=(null==st?void 0:st.promoButtonClickUrl)}=this.options;if(null==rt&&null==ot||(this.options.share=Object.assign(Object.assign({},nt),{embedCodes:null!=rt?rt:null==nt?void 0:nt.embedCodes,socialNetworks:null!=ot?ot:null==nt?void 0:nt.socialNetworks})),(null===(D=this.options.share)||void 0===D?void 0:D.embedCodes)||(null===(P=this.options.share)||void 0===P?void 0:P.socialNetworks)||delete this.options.share,!at||null==lt&&null==ct&&null==dt&&null==ht||(this.options.multiplayer=Object.assign(Object.assign({},at),{textColor:null!=lt?lt:null==at?void 0:at.textColor,color:null!=ct?ct:null==at?void 0:at.color,backgroundColor:null!=dt?dt:null==at?void 0:at.backgroundColor,fontUrl:null!=ht?ht:null==at?void 0:at.fontUrl})),null!==(N=(ke=this.options).multiplayerHidden)&&void 0!==N||(ke.multiplayerHidden=null==st?void 0:st.hideMultiplayer),null!==(M=(Le=this.options).multiplayerShuffle)&&void 0!==M||(Le.multiplayerShuffle=null==st?void 0:st.shuffleRecommendedRecords),!Xe||null==ut&&null==pt&&null==ft&&null==gt&&null==mt&&null==vt||(this.options.mediaControl=Object.assign(Object.assign({},Xe),{skinName:null!=ut?ut:Xe.skinName,textColor:null!=pt?pt:null==Xe?void 0:Xe.textColor,hoverColor:null!=ft?ft:null==Xe?void 0:Xe.hoverColor,foregroundColor:null!=gt?gt:null==Xe?void 0:Xe.foregroundColor,backgroundColor:null!=mt?mt:null==Xe?void 0:Xe.backgroundColor,fontUrl:null!=vt?vt:null==Xe?void 0:Xe.fontUrl})),null!=ut){const e=ut.toLowerCase().replace(" ","_");this.options.share&&(this.options.share.skinName=e),this.options.suggest&&(this.options.suggest.skinName=e)}(null===(B=null===(x=this.options.mediaControl)||void 0===x?void 0:x.skinName)||void 0===B?void 0:B.match(/(^[A-Z]|[ _])/))&&(this.options.mediaControl.skinName=this.options.mediaControl.skinName.toLowerCase().replace(" ","_"));const Tt="universal"===(null===(F=this.options.mediaControl)||void 0===F?void 0:F.skinName);let _t;(null==qe?void 0:qe.snapshot)&&(_t=qe.snapshot),Tt&&(!_t||this.options.live&&_t.includes("/auto/"))&&(_t=xa),_t&&(null!==(U=(Ie=this.options).poster)&&void 0!==U||(Ie.poster={custom:`black url(${_t}) center / contain no-repeat;`})),Tt&&Qr.Browser.isMobile&&this.options.mediaControlVisible&&(this.options.unmute=!0);let bt,St=null==st?void 0:st.analyticsParams;Array.isArray(St)||(St=[{type:"tns",params:Ze},{type:"comscore",params:Qe},{type:"yametrika",params:Je&&Object.assign(Object.assign({},Je),null==st?void 0:st.yametrika)}].filter((e=>e.params))),St.forEach((({type:e,params:t})=>{var i;this.options[e]=(null!==(i=this.options[e])&&void 0!==i?i:[]).concat(t)})),At&&yt&&(this.options.promoButton={image:At,clickUrl:yt,position:Et}),null!==($=(Oe=this.options).likes)&&void 0!==$||(Oe.likes=null==st?void 0:st.likes),null!==(V=(De=this.options).videoBackdropColor)&&void 0!==V||(De.videoBackdropColor=null==st?void 0:st.videoBackdropColor),this.options.videoBackdrop="none"!==this.options.videoBackdropColor;const Ct=null===(G=null===(z=it.allFrontSettings)||void 0===z?void 0:z.record)||void 0===G?void 0:G.episodes;if(Tt&&qe&&Ct){const e=Ct.filter((([e])=>e<qe.duration/1e3)).sort((([e],[t])=>e-t)),t=Object.create(null);e.length<2||0!==e[0][0]||e.some((([e])=>{if(t[e])return!0;t[e]=!0}))||(bt=e.map((([e,t],i,s)=>{var n,r;return{start:e,end:null!==(r=null===(n=s[i+1])||void 0===n?void 0:n[0])&&void 0!==r?r:qe.duration/1e3,label:t}})))}this.options.episodes=bt,bt&&(null!==(K=(Pe=this.options).thumbnails)&&void 0!==K||(Pe.thumbnails={thumbs:[]})),null!==(Y=(Ne=this.options).aiAd)&&void 0!==Y||(Ne.aiAd=!0===(null===(H=null===(j=it.allFrontSettings)||void 0===j?void 0:j.record)||void 0===H?void 0:H.aiAd)),it.aiAdInfo||delete this.options.aiAd,Tt&&at&&this.options.multiplayerHidden?null!==(q=(Me=this.options).watchNext)&&void 0!==q||(Me.watchNext=null==st?void 0:st.watchNext):delete this.options.watchNext,null!==(X=(xe=this.options).preload)&&void 0!==X||(xe.preload=!0===it.preloadChunksEnabled),this.options.preload||(this.options.playback&&(this.options.playback.preload="none"),this.options.hlsPlayback&&(this.options.hlsPlayback.preload=!1)),null!=(null==st?void 0:st.replayTimeout)&&(null!==(Z=(Be=this.options).replayTimeout)&&void 0!==Z||(Be.replayTimeout=null==st?void 0:st.replayTimeout)),null!==(Q=(Fe=this.options).threeSixtyViewer)&&void 0!==Q||(Fe.threeSixtyViewer==(J=it.allFrontSettings)||void 0===J?void 0:J.record)||void 0===ee?void 0:ee.threeSixtyViewer),null!==(te=(Ue=this.options).saveUserVolume)&&void 0!==te||(Ue.saveUserVolume=null==st?void 0:st.saveUserVolume),null!==(ie=($e=this.options).volume)&&void 0!==ie||($e.volume=null!==(re=null===(ne=null===(se=it.allFrontSettings)||void 0===se?void 0:se.account)||void 0===ne?void 0:ne.initialVolume)&&void 0!==re?re:Fa.VOLUME),this.options.saveUserVolume&&(this.options.volume=null!==(le=await(null===(ae=null===(oe=this.provider)||void 0===oe?void 0:oe.mediator)||void 0===ae?void 0:ae.getOptionStorage("volume")))&&void 0!==le?le:this.options.volume),nulllaybackRate)&&void 0!==ce||(Ve.playbackRate=!0===(null==st?void 0:st.playbackRate)),null!==(de=(ze=this.options).minDurationToShowAd)&&void 0!==de||(ze.minDurationToShowAd=null===(ue=null===(he=it.allFrontSettings)||void 0===he?void 0:he.account)||void 0===ue?void 0:ue.minDurationToShowAd)}async verifyAuthToken(){var e;const{playList:t,authToken:i,allFrontSettings:s,authTokenVerifyUrl:n=(null===(e=null==s?void 0:s.account)||void 0===e?void 0:e.authTokenVerifyUrl)}=this.options;if(n){const e=Vo.xq.startTimer({endpoint:"authTokenVerifyUrl"});try{const e=(0,H.MF)(n,{recordId:null==t?void 0:t.id,token:i});await new Promise(((t,i)=>{const s=new XMLHttpRequest;s.open("get",e,!0),s.setRequestHeader("content-type","text/plain"),s.timeout=Fa.VERIFY_AUTH_TOKEN_TIMEOUT,s.onload=()=>200===s.status?t():i(),s.onerror=()=>i(),s.send(null)}))}catch(e){throw new Jo.MS(so.D1.ACCESS_RESTRICTED)}finally{e.observeDuration()}}}async loadSources(){var e;const{playList:t,sources:i,mediaControl:s}=this.options;if(null==i?void 0:i.includes("not_found_fallback"))return;const n="empty"===(null==t?void 0:t.type)||"online"===(null==t?void 0:t.type)&&!(null==t?void 0:t.source)&&!(null==t?void 0:t.directSource),r=this.options.live?{shouldHandleLiveError:"universal"===(null==s?void 0:s.skinName)}:void 0;if(n){const i=null===(e=null==t?void 0:t.startsAtDate)||void 0===e?void 0:e.getTime();if(i&&i>Date.now())throw new Jo.MS(Object.assign(Object.assign({},so.D1.ANNOUNCE),{details:r}));if(i&&i<Date.now()&&"finished"===(null==t?void 0:t.status))throw new Jo.MS(Object.assign(Object.assign({},so.D1.LIVE_FINISHED),{detailsew Jo.MS(Object.assign(Object.assign({},so.D1.NO_BROthrow new Jo.MS(Object.assign(Object.assign({},so.D1.NO_SIGNAL),{details:r}));this.options.sources=[t.directSource]}async loadPlugin(e){var i;const s=t[e];let n;if("function"==typeof s&&("multiplayer"!==e||!this.multiPlayerLoaded))try{const{default:t}=await s(),r=null===(i=this.options.plugins)||void 0===i?void 0:i[t.type];return"function"==typeof t.preload&&(n=await t.preload(this.options)),r&&r.push(t),"multiplayer"===e&&(this.multiPlayerLoaded=!0),n}catch(e){const t=this.createError({code:e.code,description:e.message,level:Qr.rG.Levels.WARN},{useCodePrefix:!1});this.trigger(no.z.OPTIONS_LOADER_ERROR,t)}}async loadPlugins(e){var t,i,s;if(!e){const{options:n}=this,r=null===(t=n.mediaControl)||void 0===t?void 0:t.skinName,{minDuratios(n).filter((e=>Boolean(n[e]))),n.qualityVisible&&e.push("levelSelector"),n.allowUserInteraction&&e.push("clickToPause"),"universal"===r&&((n.qualityVisible||n.playbackRate||(null===(i=n.subtitles)||void 0===i?void 0:i.length))&&e.push("settingsMenu"),(n.unmute||(null===(s=n.share)||void 0===s?void 0:s.embedCodes)||n.advertisement)&&e.push("notifier"),n.live&&e.push("liveStatus")),n.advertisement&&("universal"===r||"unity"===r||"rambler_2018"===r||"rambler_html5"===r||"lenta"===r||"championat_html5"===r)&&e.push("timeToAdvertisement")}const n=Vo.c9.startTimer(),r=await Promise.all(e.map((e=>this.loadPlugin(e))));n.observeDuration(),r.forEach((e=>{e&&Object.keys(e).forEach((t=>{this.options[t]=e[t]}))}))}async testAutoPlayOptions(){var e,t,i,s;const{mute:n,recordIsMute:r,autoPlayTimeout:o,autoPlay:a,[W.Nd]:l,[W.f]:c}=this.options;if(a||l||c||null!==(e=(i=this.options).autoPlayPolicy)&&void 0!==e||(i.autoPlayPolicy="off"),vo.B8&&(this.options.autoPlay=!1,this.options[W.Nd]=!1,this.options[W.f]=!1,null!==(t=(s=this.options).autoPlayPolicy)&&void 0!==t||(s.autoPlayPolicy="notAllowedForSearchBot")),this.options.autoPlay&&document.hidden&&(this.options.autoPlay=!1,this.options[W.pZ]=!0),this.options.autoPlay){const e=await oo({muted:n||r,timeout:o});"unmuted"!==e&&("muted"===e?this.options.mute=!0:this.options.autoPlay=!1),this.options.autoPlayPolicy=e}}}Fa.TEST_DOWNLOAD_SPEED_TIMEOUT=1e3,Fa.VERIFY_AUTH_TOKEN_TIMEOUT=5e3,Fa.DEFAULT_CHUNK_DURATION=1e4,Fa.NEXT_LEVEL_MAX_CHUNK_DURATION=2e3,Fa.VOLUME=10,Fa.START_LEVEL_SPEED={3:0,8:1,10:2,20:3,Infinity:void 0},Fa.START_LEVEL_DOWNLINK={2:[0,0,0],4.8:[0,0,1],8:[0,1,2],Infinity:[0,2,3]};var Ua=n(9133),$a={};$a.styleTagTransform=Lo(),$a.setAttributes=Co(),$a.insert=bo().bind(null,"head"),$a.domAPI=To(),$a.insertStyleElement=wo(),Eo()(Ua.Z,$a),Ua.Z&&Ua.Z.locals&&Ua.Z.locals;var Va;const za=Symbol("onVisibleAreaChanged"),Ga=[so.D1.UNKNOWN_ERROR.code,so.D1.RECORD_NOT_PROCESSED.code,so.D1.ANNOUNCE.code,so.D1.NO_BROADCAST.code,so.D1.NO_SIGNAL.code,so.D1.NO_STREAM.code,so.D1.NO_CONNECTION.code,"warning_proxy_anon","secure_link_fail"],Ka=[so.D1.ANNOUNCE.code,so.D1.LIVE_FINISHED.code,so.D1.NO_BROADCAST.code,so.D1.NO_SIGNAL.code,...[Zr.ErrorDetails.MANIFEST_LOAD_ERROR,Zr.ErrorDetails.MANIFEST_LOAD_TIMEOUT,Zr.ErrorDetails.MANIFEST_PARSING_ERROR].map((e=>`hls:${Zr.ErrorTypes.NETWORK_ERROR}_${e}`))];class Ya extends Qr.L6{get name(){return"Player"}get $parent(){return(0,Qr.$)(this.options.parentElement)}get provider(){return this.core.options.provider}get aspectRatio(){var e,t,i;return null!==(i=null!==(t=null===(e=this.core)||void 0===e?void 0:e.options.aspectRatio)&&void 0!==t?t:this.options.aspectRatio)&&void 0!==i?i:16/9}get ended(){var e;return!(null===(e=this.advertisement)||void 0===e?void 0:e.hasAd())&&(this.core.activeContainer.ended||this.recordEnded)}get isReady(){return this.core.isReady}get mediaControl(){return this.core.getPlugin("mediaControl")}get share(){return this.core.getPlugin("share")}get viewport(){return this.core.getPlugin("viewport")}get advertisement(){return this.core.getPlugin("advertisement")}get docking(){return this.core.getPlugin("docking")}get multiPlayer(){return this.core.getPlugin("multiplayer")}get clickToPause(){var e;return null===(e=this.core.activeContainer)||void 0===e?void 0:e.getPlugin("click_to_pause")}get suggest(){return this.core.getPlugin("suggest")}get playerError(){return this.core.playerError}constructor(e){var t,i,s,n,r;super(e),this.recordEnded=!1,this.loadingErrors=0,this.onMouseMove=({target:e})=>{const t=e&&(0,Qr.$)(e).closest("[data-active-state]").data("activeState");null!=t?t?this.setActiveState(!1):this.unsetActiveState():this.setActiveState()},this.setActiveState=io()(((e=!0)=>{this.stateTimeout&&this.clearStateTimeout(),this.stateTimeout&&e||(window.setTimeout((()=>{this.$parent.addClass("eplayer-active"),this.$parent.css("cursor",null)}),0),window.setTimeout(this.toggleClickToPause,Ya.ACTIVATE_TIMEOUT,!0)),e&&(this.stateTimeout=window.setTimeout(this.unsetActiveState,Ya.ACTIVE_STATE_TIMEOUT))}),Ya.ACTIVE_STATE_THROTTLE_TIMEOUT),this.unsetActiveState=()=>{var e;this.clearStateTimeout(),this.$parent.removeClass("eplayer-active"),this.$parent.css("cursor","none"),(null===(e=this.core.activeContainer)||void 0===e?void 0:e.isPlaying())&&this.toggleClickToPause(!1)},this.onInitialPlay=async()=>{var e,t;const{enforceStartWhenPlayingInParent:i,autoPlay:s,[W.pZ]:n,[W.Nd]:r,[W.f]:o,playerId:a,dockingParentId:l}=this.core.options;i&&!(o||r||s||n)&&await(null===(t=null===(e=this.provider)||void 0===e?void 0:e.mediator)||void 0===t?void 0te=e=>{var t,i,s;const n=null===(t=this.docking)||void 0===t?void 0:t.isDocked(),{playerId:r,dockingParentId:o,enforceStartWhenPlayingInParent:a}=this.core.options;n&&!e||a||null===(s=null===(i=this.provider)||void 0===i?void 0:i.mediator)||void 0===s||s.stopPlaying(r,o)},this.toggleClickToPause=e=>{var t,i;e?null===(t=this.clickToPause)||void 0===t||t.enable():null===(i=this.clickToPause)||void 0===i||i.disable()},this.onParentResize=eo()((()=>{var e,t;const i=this.fixedHeight?Number(this.core.options.height):Math.round(this.core.el.offsetWidth/this.aspectRatio);this.core.isFullscreen()||i===this.core.el.offsetHeight||(this.options.height=(null===(e=this.docking)||void 0===e?void 0:e.isDocked())||(null===(t=this.docking)||void 0===t?void 0:t.isDockingRequested())||this.multiPlayer?i:this.core.options.height,this.core.resize({width:"100%",height:i}))})),this[Va]=io()((async e=>{var t,i,s,n,r,o,a,l,c,d,h,u,p,f,g,m;const{mute:v,recordIsMute:A,autoPlay:E,autoPlayTimeout:y,minPlayingVisibleHeight:T=.5,playerId:_,dockingParentId:b,[W.pZ]:S,[W.Nd]:C,[W.f]:R,enforceStartWhenPlayingInParent:w}=this.core.options;document.hidden&&(this.recordEnded=!1);const k=R||C||E||S,L=this.ended&&!(null===(t=this.multiPlayer)||void 0===t?void 0:t.isNextRecordRequested())&&(null===(i=this.multiPlayer)||void 0===i?void 0:i.isLastRecord),I=null===(s=this.docking)||void 0===s?void 0:s.enabled;if(!w&&(!k||L))return;if(document.hidden||!(!C&&!R||e>=T||(null===(n=this.docking)||void 0===n?void 0:n.isDockingAwaited())||(null===(r=this.docking)||void 0===r?void 0:r.isDockingRequested()))){if((this.isPlaying()||(null===(o=this.advertisement)||void 0===o?void 0:o.hasAd()))&&!this.core.isFullscreen())if(R){if(this.mute(),I)return;this.cleanPlayingState()}else this.pause();return void((null===(a=this.multiPlayer)||void 0===a?void 0:a.isNextRecordRequested())&&(null===(l=this.multiPlayer)||void 0===l||l.waitNextRecord(),I||this.cleanPlayingState()))}if(null===(c=this.multiPlayer)||void 0===c?void 0:c.isNextRecordAwaited())return void(null===(d=this.multiPlayer)||void 0===d||d.autoPlayNextRecord());if(null===(h=this.multiPlayer)||void 0===h?void 0:h.isNextRecordRequested())return;if(null==this.core.options.autoPlayPolicy){const e=await oo({muted:v||A,timeout:y});this.core.configure({autoPlayPolicy:e})}const{autoPlayPolicy:O}=this.core.options;"muted"===O||"unmuted"===O?(!v&&R&&"unmuted"===O&&this.unmute(),this.isPlaying()||!1!==(E||S||(C||R)&&(w||await(null===(p=null===(u=this.provider)||void 0===u?void 0:u.mediator)||void 0===p?void 0:p.canPlay(_,b))))&&("muted"===O&&this.mute(),this.play(),S&&(this.core.options.autoPlay=!0,this.core.options[W.pZ]=!1)),w&&e>=T&&!(null===(f=this.docking)||void 0===f?void 0:f.isDocked())&&!await(null===(m=null===(g=this.provider)||void 0===g?void 0:g.mediator)||void 0===m?void 0:m.canPlay(_,b))&&(this.isPlaying()?await this.onEnforceStarted():this.listenAdOrContainerPlay())):this.$parent.addClass("eplayer-hold-skin")}),Ya.VIEWPORT_CHANGE_THROTTLE_TIMEOUT,{leading:!1}),this.onErrorWithPlayNext=e=>{var t;this.trigger(no.z.PLAYER_ERROR,e),null===(t=this.multiPlayer)||void 0===t||t.playNext()},this.hideSpinner=()=>{this.spinnerTimeout&&(clearTimeout(this.spinnerTimeout),delete this.spinnerTimeout),this.toggleSpinner(!1)},this.toggleSpinner=e=>{this.$parent.toggleClass("loading",e)};const o={recycleVideo:Qr.Browser.isMobile,disableContextMenu:!0,preload:"metadata",controls:!1,playInline:!0,crossOrigin:"anonymous",audioOnly:!1,hlsjsConfig:{capLevelToPlayerSize:!0,enableWorker:!0}};this._options=Object.assign(Object.assign({},{allowUserInteraction:!0,disableKeyboardShortcuts:!1,loop:!1,hideMediaControl:!1,hideVolumeBar:!1,disableVideoTagContextMenu:!0,exitFullscreenOnEnd:!1,disableErrorScreen:!0,autoPlayTimeout:2500,eventsReportLive:!0}),e),this.options.playback=Object.assign(Object.assign({},o),e.playback),this.options.hlsPlayback=Object.assign(Object.assign({},{preload:!0}),e.hlsPlayback),this.options.playerId=(0,ro.O)(),null!==(t=(n=this.options).referrer)&&void 0!==t||(n.referrer=document.referrer||window.location.href),this.options.referrer=null===(i=this.options.referrer)||void 0===i?void 0:i.replace(/#.+/m,""),null!==(s=(r=this.options).language)&&void 0!==s||(r.language=/^(ru|ru-RU)$/.test(Qr.Utils.getBrowserLanguage())?"ru":"en"),this.options.chromeless||(this.options.allowUserInteraction=!0),this.options.allowUserInteraction||(this.options.disableKeyboardShortcuts=!0),null!=this.options.height&&(this.fixedHeight=!0),this.loader=new Qr.aN([],this.options.playerId),this.optionsLoader=new Fa(this),this.coreFactory=new Wo(this),this.resizeObserver=new ResizeObserver(this.onParentResize),this.mutationObserver=new MutationObserver(this.onParentResize),this.options.parentId?this.setParentId(this.options.parentId):this.options.parent&&this.attachTo(this.options.parent)}setParentId(e){const t=document.querySelector(e);return t instanceof HTMLElement&&this.attachTo(t),this}attachTo(e){var t,i,s;return this.options.parentElement=e,this.options.width="100%",null!==(t=(s=this.options).height)&&void 0!==t||(s.height=Math.round(e.offsetWidth/this.aspectRatio)),this.core=this.coreFactory.create(),this.addEventListeners(),this.coreFactory.configure(this.options),null===(i=this.provider)||void 0===i||i.setPlayerId(this.options.playerId),this}configure(e){return e.id&&this.$parent.css("height",this.$parent.offset().height),this.coreFactory.configure(e),this}clearStateTimeout(){this.setActiveState.cancel(),clearTimeout(this.stateTimeout),delete this.stateTimeout}addEventListeners(){return this.core.isReady?this.onReady():this.listenToOnce(this.core,no.z.CORE_READY,this.onReady),this.listenTo(this.core,no.z.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChange),this.listenTo(this.core,no.z.CORE_FULLSCREEN,this.onFullscreenChange),this.listenTo(this.core,no.z.CORE_RESIZE,this.onResize),this.listenTo(this.optionsLoader,no.z.OPTIONS_LOADER_LOADING,this.onLoading),this.listenTo(this.optionsLoader,no.z.OPTIONS_LOADER_LOADED,this.onLoaded),this.listenTo(this.optionsLoader,no.z.OPTIONS_LOADER_ERROR,this.onLoadingError),this.viewport&&this.listenTo(this.viewport,no.z.VIEWPORT_VISIBLE_AREA_CHANGED,this[za]),this.docking&&this.listenTo(this.docking,no.z.DOCKING_CHANGED,this.onDockingChange),this.mediaControl&&(this.listenToOnce(this.mediaControl,no.z.MEDIACONTROL_RENDERED,this.restoreHeight),this.listenTo(this.mediaControl,no.z.MEDIACONTROL_SHARE,this.onMediaControlShare),this.listenToOnce(this.mediaControl,no.z.MEDIACONTROL_PLAYPAUSE_CLICK,this.stopPlayInVisibleArea),this.listenTo(this.mediaControl,no.z.MEDIACONTROL_VOLUME_CLICK,this.stopUnmuteInVisibleArea),this.listenTo(this.mediaControl,no.z.MEDIACONTROL_MUTE_CLICK,this.stopUnmuteInVisibleArea)),this.multiPlayer&&this.listenTo(this.multiPlayer,no.z.MULTIPLAYER_SUGGEST_TIMEOUT,this.onMultiPlayerSuggestTimeout),this.advertisement&&(this.listenTo(this.advertisement,no.z.ADVERTISEMENT_LOADING,this.onAdLoading),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_LOADED,this.hideSpinner),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_ERROR,this.onAdError),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_STARTED,this.onAdStarted),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_PAUSED,this.onAdPaused),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_COMPLETE,this.onAdPaused),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_RESUMED,this.onAdResumed),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_ENDED,this.onAdEnded),this.listenTo(this.advertisement,no.z.ADVERTISEMENT_CONTENT_RESUME_REQUESTED,this.onAdContentResumeRequested),this.listenToOnce(this.advertisement,no.z.ADVERTISEMENT_INTERACTION_PLAYING,this.stopPlayInVisibleArea)),this}addContainerEventListeners(){var e;const{activeContainer:t,activePlayback:i}=this.core;return t&&(this.listenToOnce(t,no.z.CONTAINER_PLAY,this.onStartPlay),this.listenToOnce(t,no.z.CONTAINER_CLICK,this.stopPlayInVisibleArea),this.listenTo(t,no.z.CONTAINER_PLAY,this.onPlay),this.listenTo(t,no.z.CONTAINER_PAUSE,this.onPause),this.listenTo(t,no.z.CONTAINER_STOP,this.onStop),this.listenTo(t,no.z.CONTAINER_ENDED,this.onEnded),this.listenTo(t,no.z.CONTAINER_SEEK,this.onSeek),this.listenTo(t,no.z.CONTAINER_ERROR,this.onError),this.suggest&&this.listenTo(this.suggest,no.z.SUGGEST_ERROR,this.onError),this.listenTo(t,no.z.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(t,no.z.CONTAINER_VOLUME,this.onVolumeUpdate),this.listenTo(t,no.z.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable)),i&&(this.listenTo(i,no.z.PLAYBACK_BUFFERING,this.onBuffering),(null===(e=this.docking)||void 0===e?void 0:e.enabled)&&this.listenTo(i,no.z.PLAYBACK_PLAY_INTENT,this.onInitialPlay),this.listenTo(i,no.z.PLAYBACK_BUFFERFULL,this.hideSpinner),i.buffering&&this.showSpinner()),this}stopListening(e,t,i){return i||(this.clearStateTimeout(),clearTimeout(this.spinnerTimeout),delete this.spinnerTimeout,this.resizeObserver.disconnect(),this.mutationObserver.disconnect(),document.removeEventListener("mousemove",this.onMouseMove)),super.stopListening(e,t,i)}onActiveContainerChange(){this.stopListening(),this.addEventListeners()}stopPlayInVisibleArea(){this.core.options.autoPlay=!1,this.core.options[W.Nd]=!1}stopUnmuteInVisibleArea(e){const{[W.f]:t}=this.core.options;if(0===e&&t)return this.autoPlayCache=t,void(this.core.options[W.f]=!1);const i=e>0;i&&this.core.configure({autoPlayPolicy:"unmuted"}),i&&this.isPlaying()&&this.autoPlayCache&&(this.core.options[W.f]=!0,this.autoPlayCache=null)}onReady(){var e,t,i;this.addContainerEventListeners(),this.trigger(no.z.PLAYER_READY);const{playList:s,useDvrControls:n,autoPlay:r,[W.pZ]:o,[W.Nd]:a,[W.f]:l,sources:c}=this.core.options;this.$parent.addClass("eagleplayer eagleplayer-instance eplayer eplayer-ios-noskin"),this.$parent.toggleClass("eplayer-mobile",Qr.Browser.isMobile).toggleClass("eplayer-not-mobile",!Qr.Browser.isMobile).toggleClass("eplayer-not-found",null==c?void 0:c.includes("not_found_fallback"));const d=l||a||r||o;this.$parent.toggleClass("eplayer-hold-skin",!d),this.$parent.toggleClass("eplayer-xs",(null===(e=this.core.activeContainer)||void 0===e?void 0:e.el.offsetWidth)<400);const h="online"===(null==s?void 0:s.type)||"empty"===(null==s?void 0:s.type);this.$parent.toggleClass("eplayer-live",h&&!0!==n).toggleClass("eplayer-live-dvr",h&&!0===n),this.$parent.css({color:"white",fontSize:16,fontFamily:"Helvetica, Helvetica Neue, Arial",overflow:"hidden",position:"relative"}),null===(t=this.core.activeContainer)||void 0===t||t.$el.css({width:"100%",height:"100%",position:"relative",top:0,background:"black"}),null===(i=this.core.activePlayback)||void 0===i||i.$el.css({width:"100%",height:"100%"});const u=document.body||document.documentEver.observe(u,{childList:!0,subtree:!0}),document.addEventListener("mousemove",this.onMouseMove),this.setActiveState()}listenAdOrContainerPlay(){this.listenToOnce(this.advertisement,no.z.ADVERTISEMENT_STARTED,this.onEnforceStarted),this.listenToOnce(this.core.activeContainer,no.z.CONTAINER_PLAY,this.onEnforceStarted)}async onEnforceStarted(){var e,t;const{playerId:i,dockingParentId:s}=this.core.options;this.stopListening(this.advertisement,no.z.ADVERTISEMENT_STARTED,this.onEnforceStarted),this.stopListening(this.core.activeContainer,no.z.CONTAINER_PLAY,thispeof this.fixedHeight&&(e?this.dockedHeight=this.core.options.height:this.core.options.height=this.dockedHeight,this.fixedHeight=!e),t<400&&this.$parent.toggleClass("eplayer-xs",e),this.$parent.toggleClass("eplayer-docked",e),this.trigger(no.z.PLAYER_DOCK,e)}onVolumeUpdate(e){var t;this.trigger(no.z.PLAYER_VOLUMEUPDATE,e),this.$parent.toggleClass("eplayer-mute",0===e),(null===(t=this.docking)||void 0===t?void 0:t.enabled)||this.isPlaying()&&0===e&&this.cleanPlayingState()}onSubtitoggleClass("eplayer-xs",Number(e.width)<400),this.$parent.toggleClass("eplayer-vertical",this.aspectRatio<1),this.trigger(no.z.PLAYER_RESIZE,e))}onStartPlay(){const{startPosition:e}=this.core.options;e&&this.seek(e)}onPlay(){var e,t;this.recordEnded=!1,this.trigger(no.z.PLAYER_PLAY),this.$parent.removeClass("eplayer-hold-skin"),this.$parent.addClass("eagleplayer-state-play"),null===(t=null===(e=this.core.options.playback)||void 0===e?void 0:e.hlsjsConfig)||void 0===t||delete t.startLevel,clearTimeout(this.cleanMediatorStateTimeout),delete this.cleanMediatorStateTimeout,this.getVolume()&&this.autoPlayCache&&(this.autoPlayCache=null,this.core.options[W.f]=!0)}onPause(){var e;const{[W.f]:t}=this.core.options;this.trigger(no.z.PLAYER_PAUSE),this.$parent.addClass("eplayer-hold-skin"),this.$parent.removeClass("eagleplayer-state-play"),this.toggleClickToPause(!0),null!==(e=this.cleanMedeout(this.cleanPlayingState,Ya.CLEAN_MEDIATOR_STATE_TIMEOUT)),t&&(this.autoPlayCache=t),this.core.options[W.f]=!1}onStop(){var e;this.trigger(no.z.PLAYER_STOP,this.getCurrentTime()),this.$parent.addClass("eplayer-hold-skin"),this.hideSpinner(),this.tateTimeout)&&void 0!==e||(this.cleanMediatorStateTimeout=window.setTimeout(this.cleanPlayingState,Ya.CLEAN_MEDIATOR_STATE_TIMEOUT))}onEnded(){var e;this.recordEnded=!0,this.trigger(no.z.PLAYER_ENDED),this.hideSpinner(),this.seek(0),this.$parent.addClass("eplayer-hold-skin"),this.toggleClickToPause(!0),null!==(e=this.cleanMediatorStateTimeout)&&void 0!==e||(this.cleanMediatorStateTimeout=window.setTimeout(this.cleanPlayingState,Ya.CLEAN_MEDIATOR_STATE_TIMEOUT))}onSeek(e){this.trigger(no.z.PLAYER_SEEK,e)}onTimeUpdate(e){this.trigger(no.z.PLAYER_TIMEUPDATE,e)}onError(e){var t:e.level)!==Qr.rG.Levels.FATAL)return;let o=e.code===so.D1.ANNOUNCE.code&&e.description||e.code&&(null===(t=this.core.code===o&&(o====i?void 0:i.name)){const t=new Error("playback failed"),i=this.getCurrentTime(),n=this.core.options.playList,r=null!==(s=null==n?void 0:n.directSource)&&void 0!==s?s:null==n?void 0:n.source,{UI:o}=e,a=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(e,["UI"]),l={source:r,currentTime:i,playbackError:a,errorCode:String(a.code)};(0,Y.Tb)(t,l)}const a=e.code&&Ka.inclu:void 0,l={autoPlay:!0,source:"error",handledLiveErroid 0:n.i18n.t("default_error_message")),playbackNotSupportedCanReload:!o||!!e.code&&Ga.indexOf(e.code)>-1};this.core.configure(l),a||null===(r=this.mediaControl)||void 0===r||r.disable()}onLoading(){clearTimeout(this.nextRecordTimeout),this.onBuffering()}onLoaded(){this.hideSpinner(),this.loadingErrors=0}onLoadingError(e){if(this.multiPlayer&&e.level===Qr.rG.Levels.FATAL)return this.loadingErrors<3?this.onErrorWithPlayNext(e):this.nextRecordTimeout=window.setTimeout(this.onErrorWithPlayNext,Ya.NEXT_RECORD_AFTER_ERROR_TIMEOUT,e),void(this.loadingErrors+=1);this.onError(e)}onMultiPlayerSuggestTimeout(){window.setTimeout((()=>{clearTimeout(this.cleanMediatorStateTimeout),delete thull===(t=this.advertisement)||void 0===t?void 0:t.isPreRollWithStartTime(e.blockType))&&"middleRoll"!==e.blockType&&"middleRollMobile"!==e.blmeout(this.cleanMediatorStateTimeout),delete this.cleanMediatorStateTimeout}onAdError(){this.hideAdSpinnerTimeout=window.setTimeout(this.hideSpinner,0)}onAdStarted(){this.trigger(no.z.ADVERTISEMENT_STARTED)}onAdPaused(){var e;this.trigger(no.z.ADVERTISEMENT_PAUning(this.viewport,no.z.VIEWPORT_VISIBLE_AREA_CHANGED,this[za]),this.listenToOnce(this.share,no.z.SHARE_CLOSE,(()=>{this.listenTo(this.viewport,no.z.VIEWPORT_VISIBLE_AREA_CHis.showSpinner(),this.$parent.removeClass("eplayer-hold-skin")}showSpinner(){this.spinnerTimeout||(this.spinnerTimeout=window.setTimeout(this.toggleSpinner,Ya.SPINNER_TIMEOUT,!0))}restoreHeight(){this.$pal)}toggleFullscreen(){var e;return null===(e=this.mediaControl)||void 0===e||e.toggleFullscreen(),this}resize(e.height)&&void 0!==t?t:Math.round(this.core.el.offsetWidth/ull!=e.height?this.fixedHeight=!0:delete this.fixedHeight,this.core.resize({width:"100%",height:i})}destroy(){return this.stopListening(),this.core.destroy(),this.cleanPlayingState(!0),this}play(){var e,t;return(null===(e=this.advertisement)||void 0===e?void 0:e.hasAd())?null===(t=this.advertisement)||void 0===t||t.play():this.core.activeContainer.play(),this}pause(){var e,t;return(null===(e=this.advertisement)||void 0===e?void 0:e.hasAd())?null===(t=this.advertisement)||void 0===t||t.pause():this.core.activeContainer.pause(),this}stop(){return this.core.activeContainer.stop(),this}seek(e){return this.core.activeContainer.seek(e),this}seekPercentage(e){return this.core.activeContainer.seekPercentage(e),this}mute(){var e,t,i;return(null===(e=this.mediaControl)||void 0===e?void 0:e.muted)||(this.muted==(t=this.mediaControl)||void 0===t?void 0:t.volume,null===(i=thtVolume(0)),this}unmute(){var e,t,i;const{volume:s}=this.core.options;return(null===(e=this.mediaControl)||void 0===e?void 0:e.muted)&&(null===(t=this.mediaControl)||ve(null!==(i=this.mutedVolume)&&void 0!==i?i:s),delete this.mutedVolume),this}setVolume(e){var t;return null===(t=this.mediaControl)||void 0===t||t.setVolume(e),this}isPlaying(){var e;return this.core.activeContainer.isPlaying()||!!(null===(e=this.advertisement)||void 0===e?void 0:e.isPlaying())}getVolume(){var e,t;return null!==(t=null===(e=this.mediaControl)||void 0===e?void 0:e.volume)&&void 0!==t?t:0}getCurrentTime(){return this.core.activeContainer.getCurrentTime()}getStartTimeOffset(){return this.core.activeContainer.getStarreturn this.core.activeContainer.getDuration()}getSourceLink(){var e,t;return null!==(t=null===(e=this.core.options.playList)||void 0===e?void 0:e.link)&&void 0!==t?t:""}}var ja;Va=za,Ya.SPINNER_TIMEOUT=300,Ya.ACTIVE_STATE_TIMEOUT=3e3,Ya.ACTIVE_STATE_THROTTLE_TIMEOUT=300,Ya.VIEWPORT_CHANGE_THROTTLE_TIMEOUT=200,Ya.ACTIVATE_TIMEOUT=Qr.Browser.isMobile?1e3:0,Ya.CLEAN_MEDIATOR_STATE_TIMEOUT=100,Ya.NEXT_RECORD_AFTER_ERROR_TIMEOUT=1e3,function(e){e.PLAYER_READY="ready",e.PLAYER_RESIZE="resize",,e.PLAYER_PLAY="play",e.PLAYER_PAUSE="pause",e.PLAYER_STOP="stop",e.PLAYER_ENDED="ended",e.PLAYER_SEEK="seek",e.PLAYER_ERROR="playererror",e.PLAYER_PLAYER_VOLUMEUPDATE="voEMENT_PAUSED="advertisement:paused",e.ADVERTISEMENT_RESUMED="a",e.ADVERTISEMENT_ENDED="advertisement:ended",e.ADVERTISEMENT_ERROR="advertisement:error"}(ja||(ja={}));var Ha=n(7187);let Wa,qa;const Xa=async()=>{if(!Wa){qa||(qa=new Promise(((e,t)=>{window.ramblerIdHelper=window.ramblerIdHelper||[],window.ramblerIdHelper.push((()=>{Wa=window.ramblerIdHelper,e()})),(0,q.ve)("https://id.rambler.ru/rambler-id-helpery{await qa}catch(e){}}return Wa},Za=async()=>{const e=await Xa();return new Promise(((t,i)=>{e.getSessionToken(((e,s)=>{s?i(s):t(e)}))}))},Qa=(()=>{let e;return()=>(e||(e=new Promise(((t,i)=>{window.userID=window.userID||[],window.userID.push((()=>{t(new window.userID)})),(0,q.ve)("https://ssp.rambler.ru/user-id-sdk.js").catch((t=>{e=void 0,i(t)}))}))),e)})(),Ja=async()=>{try{return(await Qa()).getFingerPrint()}catch(e){return""}};var el=n(2485),tl=n(1410);class il extends Ha.EventEmitter{constructor(){super(...arguments),this.startTime=Date.now(),this.getSessionToken=Za,this.getCookie=el.e,this.setCookie=el.d,this.loyalty=Ma,this.activateTop100=tl.PY,this.sendCustomVars=tl.NX,this.getFingerPrintUserId=Ja}getStartTime(){return this.startTime}setPlayerId(e){this.playerId=e}}class sl extends il{constructor(e){super(),this.docked=!1,this.getVisibleArea=()=>new Promise((e=>{this.ampIntegration.getIntersection((t=>{const{offsetWidth:i,offsetHeight:s}=document.documentElement,n=s*(this.docked?1:t.intersectionRatio);e({width:i,height:n,left:0,top:0,right:i,bottom:n})}))})),this.getEmbedVisibleArea=()=>this.getVisibleArea(),this.subscribePageScroll=e=>()=>null,this.subscribeVisibleAreaChange=e=>{const t=window.setInterval((()=>this.getVisibleArea().then(e)),2e3);return()=>{clearInterval(t)}},this.ampIntegration=e,this.ampIntegration.method("showcontrols",(()=>{this.docked=!1})),this.ampIntegration.method("hidecontrols",(()=>{this.docked=!0}))}}const nl=e=>Boolean(e.amp),rl=async e=>{const t=await new Promise((e=>{window.AmpVideoIframe=window.AmpVideoIframe||[],window.AmpVideoIframe.push(e),(0,q.ve)("https://cdn.ampproject.org/video-iframe-integration-v0.js")})),i=new sl(t),s=new Ya(Object.assign(Object.assign({},e),{provider:i,docking:!1}));let n=!1;t.method("play",(()=>s.play())),t.method("pause",(()=>s.pause())),t.method("mute",(()=>s.mute())),t.method("unmute",(()=>s.unmute())),t.method("fullscreenenter",(()=>!n&&s.toggleFullscreen())),t.method("fullscreenexit",(()=>n&&s.toggleFullscreen())),s.on(ja.PLAYER_READY,(()=>{t.postEvent("canplay"),0===s.getVolume()&&t.postEvent("muted")})),s.on(ja.PLAYER_PLAY,(()=>t.postEvent("playing"))),s.on(ja.PLAYER_PAUSE,(()=>t.postEvent("pause"))),s.on(ja.PLAYER_ENDED,(()=>t.postEvent("ended"))),s.on(ja.PLAYER_FULLSCREEN,(e=>{n=e})),s.on(ja.PLAYER_VOLUMEUPDATE,(e=>t.postEvent(0===e?"muted":"unmuted"))),s.on(ja.PLAYER_RESIZE,(e=>window.parent.postMessage({sentinel:"amp",type:"embed-size",height:e.height},"*"))),s.on(ja.ADVERTISEMENT_STARTED,(()=>{t.postEvent("playing"),t.postEvent("ad_start")})),s.on(ja.ADVERTISEMENT_PAUSED,(()=>t.postEvent("pause"))),s.on(ja.ADVERTISEMENT_RESUMED,(()=>t.postEvent("playing"))),s.on(ja.ADVERTISEMENT_ENDED,(()=>t.postEvent("ad_end")))};class ol extends il{getVisibleArea(){return Promise.resolve({})}getEmbedVisibleArea(){return this.getVisibleArea()}subscribePageScroll(e){return()=>null}subscribeVisibleAreaChange(e){return()=>null}}const al=e=>!0,ll=async e=>{const t=new ol;new Ya(Object.assign(Object.assign({},e),{provider:t,docking:!1,[W.Nd]:!1,[W.f]:!1}))};var cl=n(5783),dl=n(9870);const hl=e=>Boolean(e.widgetId&&window!==window.top),ul=async e=>{(0,cl.Ae)({async initialize(){this.player=new Ya(Object.assign(Object.assign({},e),{provider:this.provider})),await new Promise((e=>{this.player.once(ja.PLAYER_READY,e)})),Object.keys(ja).forEach((e=>{const t=ja[e];this.player.on(t,((...e)=>{this.provider.emit(t,...e)}))}))}},{toggleFullscreen(){this.player.toggleFullscreen()},resize(e){this.player.resize(e)},play(){this.player.play()},pause(){this.player.pause()},stop(){this.player.stop()},seek(e){this.player.seek(e)},seekPercentage(e){this.player.seekPercentage(e)},mute(){this.player.mute()},unmute(){this.player.unmute()},setVolume(e){this.player.setVolume(e)},configure(e){e.id=(0,dl.k)(e.id),this.player.configure(e)},isReady(){return this.player.isReady},isPlaying(){return this.player.isPlaying()},getVolume(){return this.player.getVolume()},getCurrentTime(){return this.player.getCurrentTime()},getStartTimeOffset(){return this.player.getStartTimeOffset()},getDuration(){return this.player.getDuration()},getSourceLink(){return this.player.getSourceLink()}})};var pl,fl=n(2645),gl={};gl.styleTagTransform=Lo(),gl.setAttributes=Co(),gl.insert=bo().bind(null,"head"),gl.domAPI=To(),gl.insertStyleElement=wo(),Eo()(fl.Z,gl),fl.Z&&fl.Z.locals&&fl.Z.locals;const ml=[i,r,s];(0,Y.$h)(),null!==(pl=n.g.ResizeObserver)&&void 0!==pl||(n.g.ResizeObserver=G);const{href:vl,hash:Al,protocol:El,hostname:yl}=window.location,Tl=(0,H.CN)({protocol:El,host:yl}),_l=(0,H.DP)(vl),bl=(0,H.DP)(`${Tl}${Al.replace(/^#/,"?")}`),Sl=Object.assign(Object.assign({},_l),bl),Cl=(0,W.Qc)(Sl);Cl.parent=document.createElement("div"),document.body.appendChild(Cl.parent);const Rl=ml.find((e=>e.isSupports(Cl)));if(!Rl)throw new Error("supported player integration not found");Cl.referrer&&(0,Y.YA)("referrer",Cl.referrer),(0,K.ew)(Boolean(Cl.debug)),(0,j.dY)(),Rl.registerIFrame(Cl)})()})();
//# sourceMappingURL=player-2176c8acaba5c39c6f6f.js.map</script></body></html>