/*! For license information please see tab_jssdk.min.js.LICENSE */
!window,(function(){return [function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e),n.d(e,"Logger",(function(){return o})),n.d(e,"DefaultLogger",(function(){return i}));var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.method=console.log,this.level=2}var e,n,o;return e=t,(n=[{key:"setMethod",value:function(t){this.method=t}},{key:"setLevel",value:function(t){this.level=t}},{key:"debug",value:function(t){this.level<=0&&this.method(t)}},{key:"info",value:function(t){this.level<=1&&this.method(t)}},{key:"error",value:function(t,e){this.level<=2&&(this.method(t),e&&this.method(e))}},{key:"table",value:function(t){this.level<=1&&this.method(t)}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}(),i=new o},function(t,e,n){"use strict";n.r(e);var r=n(5);n.d(e,"Logger",(function(){return r.Logger})),n.d(e,"DefaultLogger",(function(){return r.DefaultLogger}));var o=n(37);n.d(e,"SDKEventHandler",(function(){return o.a}));var i=n(0);n.d(e,"FETCH_URL_DEVELOP",(function(){return i.g})),n.d(e,"FETCH_URL_RELEASE",(function(){return i.i})),n.d(e,"FETCH_URL_PRE_RELEASE",(function(){return i.h})),n.d(e,"DefaultHttpTimeout",(function(){return i.d})),n.d(e,"DefaultGrayId",(function(){return i.c})),n.d(e,"ServerDefaultGrayId",(function(){return i.l})),n.d(e,"TABBeaconAppKey",(function(){return i.m})),n.d(e,"TabAttaAppId",(function(){return i.w})),n.d(e,"TabAttaAppToken",(function(){return i.x})),n.d(e,"EXP_DATA_KEY",(function(){return i.f})),n.d(e,"EXP_CONTROL_DATA_KEY",(function(){return i.e})),n.d(e,"TAB_PROFILE_KEY_PLATFORM",(function(){return i.q})),n.d(e,"TAB_PROFILE_KEY_RESO",(function(){return i.s})),n.d(e,"TAB_PROFILE_KEY_PBRAND",(function(){return i.p})),n.d(e,"TAB_PROFILE_KEY_MODEL",(function(){return i.n})),n.d(e,"TAB_PROFILE_KEY_PLATFORM_VER",(function(){return i.r})),n.d(e,"TAB_PROFILE_KEY_OSMODEL",(function(){return i.o})),n.d(e,"TAB_PROFILE_KEY_SDKVER",(function(){return i.t})),n.d(e,"TAB_SDK_EVENT_RATE",(function(){return i.v})),n.d(e,"TAB_SDK_EVENT_ERROR_INFO",(function(){return i.u})),n.d(e,"RESPONSE_SUCCESS_CODE",(function(){return i.k})),n.d(e,"MIN_REPORT_INTERVAL",(function(){return i.j})),n.d(e,"DEFAULT_ROLL_INTERVAL",(function(){return i.b})),n.d(e,"DEFAULT_ASSIGNMENT",(function(){return i.a}));var a=n(64);for(var s in a)["default","Logger","DefaultLogger","SDKEventHandler","FETCH_URL_DEVELOP","FETCH_URL_RELEASE","FETCH_URL_PRE_RELEASE","DefaultHttpTimeout","DefaultGrayId","ServerDefaultGrayId","TABBeaconAppKey","TabAttaAppId","TabAttaAppToken","EXP_DATA_KEY","EXP_CONTROL_DATA_KEY","TAB_PROFILE_KEY_PLATFORM","TAB_PROFILE_KEY_RESO","TAB_PROFILE_KEY_PBRAND","TAB_PROFILE_KEY_MODEL","TAB_PROFILE_KEY_PLATFORM_VER","TAB_PROFILE_KEY_OSMODEL","TAB_PROFILE_KEY_SDKVER","TAB_SDK_EVENT_RATE","TAB_SDK_EVENT_ERROR_INFO","RESPONSE_SUCCESS_CODE","MIN_REPORT_INTERVAL","DEFAULT_ROLL_INTERVAL","DEFAULT_ASSIGNMENT"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var u=n(65);for(var s in u)["default","Logger","DefaultLogger","SDKEventHandler","FETCH_URL_DEVELOP","FETCH_URL_RELEASE","FETCH_URL_PRE_RELEASE","DefaultHttpTimeout","DefaultGrayId","ServerDefaultGrayId","TABBeaconAppKey","TabAttaAppId","TabAttaAppToken","EXP_DATA_KEY","EXP_CONTROL_DATA_KEY","TAB_PROFILE_KEY_PLATFORM","TAB_PROFILE_KEY_RESO","TAB_PROFILE_KEY_PBRAND","TAB_PROFILE_KEY_MODEL","TAB_PROFILE_KEY_PLATFORM_VER","TAB_PROFILE_KEY_OSMODEL","TAB_PROFILE_KEY_SDKVER","TAB_SDK_EVENT_RATE","TAB_SDK_EVENT_ERROR_INFO","RESPONSE_SUCCESS_CODE","MIN_REPORT_INTERVAL","DEFAULT_ROLL_INTERVAL","DEFAULT_ASSIGNMENT"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return u[t]}))}(s);var c=n(66);for(var s in c)["default","Logger","DefaultLogger","SDKEventHandler","FETCH_URL_DEVELOP","FETCH_URL_RELEASE","FETCH_URL_PRE_RELEASE","DefaultHttpTimeout","DefaultGrayId","ServerDefaultGrayId","TABBeaconAppKey","TabAttaAppId","TabAttaAppToken","EXP_DATA_KEY","EXP_CONTROL_DATA_KEY","TAB_PROFILE_KEY_PLATFORM","TAB_PROFILE_KEY_RESO","TAB_PROFILE_KEY_PBRAND","TAB_PROFILE_KEY_MODEL","TAB_PROFILE_KEY_PLATFORM_VER","TAB_PROFILE_KEY_OSMODEL","TAB_PROFILE_KEY_SDKVER","TAB_SDK_EVENT_RATE","TAB_SDK_EVENT_ERROR_INFO","RESPONSE_SUCCESS_CODE","MIN_REPORT_INTERVAL","DEFAULT_ROLL_INTERVAL","DEFAULT_ASSIGNMENT"].indexOf(s)<0&&s);var l=n(67);n.d(e,"LocalLoader",(function(){return l.a}));var f=n(76);n.d(e,"RemoteLoader",(function(){return f.a}));var p=n(77);n.d(e,"EXP_EXPOSE_EVENT",(function(){return p.i})),n.d(e,"EXPOSE_EVENT_PARAM_KEY_EXPERIMENT_NAME",(function(){return p.e})),n.d(e,"EXPOSE_EVENT_PARAM_KEY_EXPERIMENT_ID",(function(){return p.d})),n.d(e,"EXPOSE_EVENT_PARAM_KEY_REPORT_METHOD",(function(){return p.f})),n.d(e,"COMMON_EVENT_PARAM_KEY_TAB_SDK_VERSION",(function(){return p.b})),n.d(e,"COMMON_EVENT_PARAM_KEY_USER_ID",(function(){return p.c})),n.d(e,"COMMON_EVENT_PARAM_KEY_APP_ID",(function(){return p.a})),n.d(e,"EXPOSE_EVENT_PARAM_VALUE_REPORT_METHOD_USER",(function(){return p.h})),n.d(e,"EXPOSE_EVENT_PARAM_VALUE_REPORT_METHOD_SDK",(function(){return p.g})),n.d(e,"TabReporter",(function(){return p.j}));var d=n(78);n.d(e,"TabSDK",(function(){return d.a}));var h=n(26);n.d(e,"encodeParams",(function(){return h.c})),n.d(e,"createGuid",(function(){return h.b})),n.d(e,"generateExpIds",(function(){return h.d})),n.d(e,"compareObject",(function(){return h.a}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.htmlTagMap=e.MatchMode=e.CircleState=e.MoveType=e.OpTypes=void 0,e.OpTypes||(e.OpTypes={})),function(t){t.Reorder="reorder",t.Anywhere="anywhere",t.Relative=""}(e.MoveType||(e.MoveType={})),e.CircleState||(e.CircleState={})),e.MatchMode||(e.MatchMode={})),e.htmlTagMap={A:{label:"é“¾æŽ¥"},B:{label:"ç²—ä½“"},BODY:{label:"æ­£æ–‡"},BUTTON:{replaced:!0,label:"æŒ‰é’®"},CAPTION:{permittedParents:["TABLE"],label:"æ ‡é¢˜"},DIV:{label:"å®¹å™¨"},FORM:{label:"è¡¨å•"},H1:{label:"æ ‡é¢˜ 1"},H2:{label:"æ ‡é¢˜ 2"},H3:{label:"æ ‡é¢˜ 3"},H4:{label:"æ ‡é¢˜ 4"},H5:{label:"æ ‡é¢˜ 5"},H6:{label:"æ ‡é¢˜ 6"},H7:{label:"æ ‡é¢˜ 7"},H8:{label:"æ ‡é¢˜ 8"},H9:{label:"æ ‡é¢˜ 9"},I:{label:"æ–œä½“"},IMG:{isEmptyElement:!0,replaced:!0,label:"å›¾ç‰‡"},IFRAME:{label:"å†…åµŒæ¡†æž¶"},INPUT:{isEmptyElement:!0,replaced:!0,label:"è¾“å…¥"},LABEL:{label:"æ ‡ç­¾"},LI:{permittedParents:["UL","OL","MENU"],autoSelect:!0,label:"åˆ—è¡¨é¡¹"},NAV:{label:"å¯¼èˆª"},OL:{label:"æœ‰åºåˆ—è¡¨"},OPTION:{permittedParents:["SELECT","OPTGROUP","DATALIST"],label:"é€‰é¡¹"},P:{label:"æ®µè½"},PRE:{label:"é¢„å…ˆè®¾å®šäº†æ ¼å¼"},SELECT:{replaced:!0,label:"é€‰æ‹©"},SPAN:{label:"å†…åµŒå®¹å™¨"},TABLE:{label:"è¡¨æ ¼"},TBODY:{permittedParents:["TABLE"],label:"è¡¨æ ¼ä¸»ä½“"},TD:{permittedParents:["TR"],autoSelect:!0,label:"è¡¨æ ¼å•å…ƒæ ¼"},TEXTAREA:{replaced:!0,label:"æ–‡æœ¬åŒºåŸŸ"},TFOOT:{permittedParents:["TABLE"],label:"è¡¨æ ¼å°¾"},TH:{permittedParents:["TR"],autoSelect:!0,label:"è¡¨æ ¼æ ‡é¢˜"},THEAD:{permittedParents:["TABLE"],label:"è¡¨æ ¼å¤´"},TR:{permittedParents:["TABLE","THEAD","TBODY","TFOOT"],label:"è¡¨æ ¼è¡Œ"},U:{label:"ä¸‹åˆ’çº¿"},UL:{label:"æ— åºåˆ—è¡¨"},SVG:{label:"svg"},PATH:{label:"PATH"},VIDEO:{label:"è§†éturn(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"fnction(n){""!==e&&(e+="&"),e+="".concat(n,"=")xxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function a(t){if(t){var e="";return t.forEach((function(t){e+="".concat(t.expGrayId,"#")})),e}return""}function s(t,e){if(t===e)return!0;if("object"===r(t,--a||r(n))}),o)})),--a||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=P(e),r=n.reject,o=E((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.openDatabase=e.isSupportIndexDB=e.getCurrentPageUrl=e.getSystemInfo=e.getLocalStorageAllKey=e.removeLocalStorageItem=e.getLocalStorageItem=e.putLocalStorageItem=e.saveCookie=e.loadCookie=e.postPbReq=e.postReq=e.ajax=e.enhandsAjaxConifg=e.createReqData=e.createRequest=e.urlEncode=void 0;var r=n(5).DefaultLogger;function o(t){var e="";return Object.keys(t).forEach((function(n){""!==e&&(e+="&");var r=n+"="+encodeURIComponent(t[n])0===r&&(r=!1),void 0===i&&(i="text");var a=new XMLHttpRequest;return a.open(e,t),a.timeout=n&&n>0?n:3e3,a.withCredentials=!!r,i&&(a.responseType=i),o&&Object.keys(o).forEach((function(t){a.setRequestHeader(t,o[t])})),a}function a(t,e,n){return n?n(t,e):(t&&"application/x-www-form-urlencoded"===e["Content-Type"]?r=o(t):t&&"application/json;charset=UTF-8"===e["Content-Type"]&&(r=JSON.stringify(t)),r);var r}function s(t){return Object.assign({},{headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:!1,responseType:"text"},t)}function u(t){var e=s(t),n=e.url,o=e.methods,u=e.data,c=e.headers,l=e.timeout,f=e.credentials,p=e.responseType,d=e.createReqDataFn,h=e.callback;return new Promise((function(t,e){var s=i(n,o,l,f,c,p),v=a(u,c,d);s.onerror=function(t){return e(t)},s.onabort=function(t){return e(t)},s.ontimeout=function(t){return e(t)},s.onload=function(){if(200===s.status){if(h)return h(s,t,e);t(s.responseText)}else e(Error(String(s.status)))},r.debug(s),r.debug("create reqData: "+v),"POST"===o&&v?s.send(v):s.send()}))}function c(t,e,n){var r=t.match(e);return r?{type:n,version:r[1]}:null}e.urlEncode=o,e.createRequest=i,e.createReqData=a,e.enhandsAjaxConifg=s,e.ajax=u,e.postReq=function(t,e,n){return u({url:t,methods:"POST",data:e,timeout:n,headers:{"Content-Type":"application/json;charset=UTF-8"}})},e.postPbReq=function(t,e,n,r,o){return u({url:t,methods:"POST",data:e,timeout:n,headers:{"Content-Type":"application/proto"},credentials:!1,responseType:"arraybuffer",createReqDataFn:r,callback:o})},e.loadCookie=function(t){try{var e=encodeURIComponent,n=decodeURIComponent,r=new RegExp("(?:^|; )"+e(t)+"=([^;]*)").exec(document.cookie);iIComponent;if("[object},e.putLocalStorageItem=fe.getLocalStorageItem=fuemoveLocalStorageItem=function(t){ion(){return new Promise((function(t){t(Object.keys(window.localStorage))}))};var l={type:"Unknown",version:""};function f(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB}e.getSystemInfo=function(){var t=new Map;if(!window)return t;var e=function(){if(!navigator)return l;var t=navigator.userAgent.toLowerCase();return c(t,/rv:([\d.]+)\) like gecko/,"IE")||c(t,/msie ([\d.]+)/,"IE")||c(t,/edge\/([\d.]+)/,"EDGE")||c(t,/firefox\/([\d.]+)/,"Firefox")||c(t,/(?:opera|opr).([\d.]+)/,"Opera")||c(t,/qqbrowser\/([\d.]+)/,"QQBrowser")||c(t,/chrome\/([\d.]+)/,"Chrome")||c(t,/version\/([\d.]+).*safari/,"Safari")||l}(),n=e.type,r=e.version;return t.set("browserTp",n),t.set("browserVer",r),t.set("resolution",window.screen.width+"*"+window.screen.height),t.set("language",navigator.language||""),t.set("system",function(){if(!navigator)return"Unknown";if(-1!==navigator.platform.indexOf("Win"))return"Windows";if(-1!==navigator.platform.indexOf("Mac"))return"MacOS";if(-1!==navigator.platform.indexOf("X11"))return"UNIX";if(-1!==navigator.platform.indexOf("Linux"))return"Linux";var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("iphone")?"iPhone":-1!==t.indexOf("ipod")?"iPod":-1!==t.indexOf("ipad")?"iPad":-1!==t.indexOf("android")?"Android":"Unknown"}()),t.set("platform",navigator.platform),t},e.getCurrentPageUrl=function(){return winsSupportIndexDB=f,DB.open(t,e);a.onerror=function(t){i(t)},a.onsuccess=function(t){o(t.target.result)},a.onupgradevar r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.assignIDs=e.getSelector=e.getSelectByXpath=e.getClassList=e.removeClass=e.addClass=e.getTagIndex=e.getXPath=e.getPathList=void 0;var o=["circle-hover","circle-highlight","circle-click","tabc","tabc-show","active","disable","last","first","target-shadow-left","target-shadow-right","target-shadow-top","target-shadow-bottom","target-shadow-inside","target-shadow-parent","current-shadow"];e.getPathList=function(t){var e=[];e.push(t);for(var n=t.parentElement;n;)e.push(n),n=n.parentElement;return e},e.getXPath=function(t,e){void 0===e&&(e=!1);for(var n=[],o=0,a=r(t);o<a.length;o++){var s=a[o];if(s.tagName){var u=s.tagName.toLowerCase();if(""!==s.tagName&&!["html","body"].includes(u)){var c="";if(c+=s.tagName.toLowerCase(),""!==s.id){if(c+="#"+s.id,s.setAttribute("auto_tagIndex","0"),n.push(c),e)break}else{var l=i(s);l&&(c+="."+l);for(var f=s.previousElementSibling,p=1;f;)p+=1,f=f.previousElementSibling;var d=r(n,[c]).reverse().join(" ").replace(/:(\d+)/g,":nth-child($1)").replace(/,/g,"."),h=document.querySelectorAll(d);if(h.length>1&&s.parentElement.childElementCount>1&&(c+=":"+p),s.setAttribute("auto_tagIndex",String(p)),n.push(c),e&&1===h.length)break}}}}return n.reverse().join("/")};var i=function(t){for(var e=t.classList,n=0,r=o;n<r.length;n++){var i=r[n];e.remove(i)}for(var a=0;a<e.length;a++)-1!==e[a].indexOf("tab")&&e.remove(e[a]);return e.value.replace(/\s/g,",")};e.getTagIndex=function(t){for(var e=t.previousSibling,n=e.tagName,r=1;e;)e.tagName===n&&(r+=1),e=e.previousElementSibling;return r},e.addClass=function(t,e){if(t)if(t.classList)t.classList.add(e);else if(t.getAttribute){var n=t.getAttribute("class");t.setAttribute("class",n+" "+e)}},e.removeClass=function(t,e){if(t)if(t.classList)t.classList.remove(e);else if(t.getAttribute){var n=SelectByXpath=function(t){return t.replace(/[\s,]*circle-click/g,"").replace(/[\s,]*circle-highlight/g,"").replace(/[\s,]*circle-hover/g,"").replace(/\//g," ").replace(/:(\d+)/g,":nth-child($1)").replace(/,/g,".")},e.getSelector=function(t){return e.getSelectByXpath(e.getXPath(e.getPathList(t),!0))},e.assignIDs=function(){for(var t=document.getElementsByTagName("*"),e={},n=t.length,r=0;r<n;r++)t[r].setAttribute("tab-id",a(t[r],e))};var a=function(t,n){var r,o,i="tab_"+s(e.getSelector(t));Object.assign(n,((r={})[i]=n[i]||0,r));var a=i+n[i];return Object.assign(n,((o={})[i]=n[i]+1,o)),a},s=function(t){var e,n=0;if(0===t.length=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n+2147483648}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.series=e.Series=void 0;var r=n(35),o=function(){function t(){}return t.prototype.handleClick=function(t){if(this.isReady){var e=t.target;this.target=e,this.openClickSeries()}},t.prototype.mouseover=function(t){if(this.isReady){var e=t.targewidth+"px",height:e.height+"px",left:e.x+"px",top:e.y+"px"}),r.addClass(this.hoverWrapper,"tab-series-wrapper-active")}},t.prototype.mouseout=function(){r.removeClass(this.hoverWrapper,"tab-series-wrapper-active")},t.prototype.insertSeries=function(){if(!this.isReady){var t=document.createElement("div");t.id="tab-visual-editor-series",document.body.append(t),this.createShadowDom(t),this.bindEvent(),this.isReady=!0}},t.prototype.stopSeries=function(){this.target=null,r.removeClass(this.wrapper,"tab-series-wrapper-active")},t.prototype.isValid=function(t){var e=t.target;return"tab-visual-editor-series"!==e.getAttribute("id")&&this.wrapper!==e},t.prototype.openClickSeries=function(){if(this.target){var t=this.target.getBoundingClientRect();this.wrapper.classList.add("tab-series-wrapper-active"),Object.assign(this.wrapper.stylde:"open"}),this.createSeft: -4px;\n    }\n    .tab-series-dot__righttop {\n      top: -4px;\n      right: -4px;\n    }\n    .tab-series-dot__rightbottom {\n      bottom: -4px;\n      right: -4px;\n    }\n    ",this.shadow.appendChild(t)},t.prototype.createDom=function(){var t=document.createElement("div");t.setAttribute("class","tab-series-wrapper"),t.setAttribute("id","tab-series-wrapper");var e=document.createElement("div");e.setAttribute("class","tab-series-wrapper__dots"),this.createDot(e,"lefttop"),this.createDot(e,"leftbottom"),this.createDot(e,"righttop"),this.createDot(e,"rightbottom"),t.appendChild(e),this.wrapper=t,this.shadow.append(this.wrapper),this.hoverWrapper=document.createElement("div"),this.hoverWrapper.setAttribute("class","tab-series-hover-wrapper"),this.shadow.append(this.hoverWrapper)},t.prototype.createDot=function(t,e){var n=document.createElement("div");return n.setAttribute("class","tab-series-dot tab-series-dot__"+e),t.appendChild(n),n},t}();e.Series=o,e.series=new o},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannon")}(this,t),this.initAll()}var e,n,o;return e=t,(n=[{key:"onEvent",value:function(t,e){var n=this.eventListeners.get(t);n&&n.length>0&&n.forEach((function(t){t(e)}))}},{key:"clear",value:function(){this.initAll()}},{key:"registerEventListener",value:function(t,e){if(!e)return!1;var n=this.eventListeners.get(t);return!!n&&(n.push(e),!0)}},{key:"initAll",value:function(){this.eventListeners=ne[r].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!i(t,r)&&l(t),t}}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(51),o=n(19);n(106)("keys",(function(){return function(t){return o(r(t))}}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.br r=n(6),o=function(){function t(t){this.mode="",this.browserCbList=[],this.cmsCbList=[],this.iframeDom=null,this.iframeId="",this.peerURL="",this.peerURL=t}return t.prototype.setPeerURL=function(t){this.peerURL=t},t.prototype.hasParentPage=function(){return window.parent!==window&&this.isCMSParent()},t.prototype.initMode=function(t){"browser"===t&&(this.mode=t,this.createConnectorForChild())},t.prototype.addListenerFn=function(t,e){void 0===t&&(t=""),"browser"===this.mode?this.addListenerFnForBrowser(t,e):"cms"===this.mode&&this.addListenerFnForCMS(t,e)},t.prototype.postMessage=function(t,e,n){var r;void 0===n&&(n={url:this.peerURL});var o={eventName:t,data:e};"browser"===this.mode?window.parent.postMessage(o,"*"):"cms"===this.modehis.iframeDom=document.getElementById(this.iframeId)),(null===(r=this.iframeDom)||void 0===r?void 0:r.contentWindow)&&this.iframeDom.contentWindow.postMessage(o,n.url))},t.prototype.isCMSParent=function(){return!0},t.prototype.createConnectorForChild=function(){var t=this;window.addEventListener("message",(function(e){r.DefaultLogger.debug("connect editor:"),r.DefaultLogger.debug(e),t.browserCbList.forEach((function(t){t.eventName===e.data.eventName&&t.callback(e.data.data)}))}),!1)},t.prototype.addListenerFnForBrowser=function(t,e){void 0===t&&(t="");var n=this.bn e.eventName===t}));n?n.callback=e:this.browserCbList.push({eventName:t,callback:e})},t.prototype.addLition(t,e,n){var r=n(53),o=n(29),s=n(11),u=n(56),c=Object.getOwnPropertyDescriptor;e.f=n(7)?c:function(t,e){if(t=i(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(38),n(31),n(18),n(24),n(32),n(33),n(54),n(107);var r=n(0),o=n(5),i=n(26);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=o.DefaultLogger,u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setting=e,this.identifier="".concat(e.appId,"_").concat(e.sceneId),this.expInfoMap=new Map,this.expKeyLayerMap=new Map,this.controlInfo=this.createDefaultControlInfo(),this.ditControlInfo]}var e,n,o;return e=t,(n=[{key:"initExpAndControlData",value:function(){var t=this;s.debug("start load local storage data");var e=[];this.defaultLoaders.forEach((function(n){var r=n.call(t);e.push(r)})),Promise.all(e).then((function(){s.debug("load all storage data success and put memory data"),s.debug(t.controlInfo),s.debug(t.expInfoMap),s.debug(t.expKeyLayerMap)}))}},{key:"initExpData",value:function(){var t=this;return new Promise((function(e,n){t.getStorageAllKey().then((function(o){o&&Object.keys(o).forEach((function(i){var a=o[i];a.startsWith("_".concat(t.identifier,"_").concat(r.f,"_"))&&t.getStorageString(a).then((function(r){if(r)try{var o=JSON.parse(r);t.putMemoryExpData(o.layerName,o),e()}catch(t){n(t)}}))}))})).catch((function(t){n(t)}))}))}},{key:"initControlInfo",value:function(){var t=this;return new Promise((function(e,n){t.getStorageString("_".concat(t.identifier,"_").concat(r.e,"_")).then((function(o){if(s.debug("init ControlInfo: _".concat(t.identifier,"_").concat(r.e,"_ : ").concat(o)),o)try{var i=JSON.parse(o);t.putMemoryControlInfo(i)}catch(t){n(t)}e()})).catch((function(t){return n(t)}))}))}},{key:"getMemoryExpDataByExpGroupKey",value:function(t){if(void 0!==this.expKeyLayerMap&&void 0!==this.expInfoMap){var e=this.expKeyLayerMap.get(t);return 0!==(null==e?void 0:e.length)?this.expInfoMap.get(e):void 0}}},{key:"getMemoryExpDataByLayerName",value:function(t){if(void 0!==this.expInfoMap)return this.expInfoMap.get(t)}},{key:"handleResponseControlInfo",value:function(t){t&&(Object(i.a)(this.controlInfo,t)||this.putControlInfo(t))}},{key:"handleResponseExpData",value:function(t){var e=t.size;s.debug("handleResponse,t&&this.expInfoMap&&this.expKeyLayerMap&&this.handleResponseAllData(t)}},{key:"getExpInfoMap",value:function(){return this.expInfoMap}},{key:"getRollInterval",value:function(){return this.controlIisEnableReport",value:function(){return this.controlInfo.enableReport}},{key:"handleResponseAllData",value:function(t){this.compareDiffForPutData(this.expInfoMap,t),this.compareDiffForRemoveData(this.expInfoMap,t)}},{key:"compareDiffForPutData",value:function(t,e){var n=this;t&&e&&e.forEach((function(e,r){if(e&&r){var o=t.get(r);o&&Object(i.a)(o,e)||n.putExpData(r,e)}}))}},{key:"compareDiffForRemoveData",value:function(t,e){var n=this;t&&e&&t.forEach((function(t,r){r&&!e.has(r)&&n.removeExpData(r)}))}},{key:"createDefaultControlInfo",value:function(){return{attaId:r.w,attaToken:r.x,enableReport:!1,reportInterval:60,reportType:"beacon",rollInterval:600}}},{key:"putControlInfo",value:function(t){t&&(this.putMemoryControlInfo(t),this.putStorageControlInfo(t).then())}},{key:"putExpData",value:function(t,e){t&&e&&(this.putMemoryExpData(t,e),this.putStorageExpData(t,e).then())}},{key:"removeExpData",value:function(t){t&&(this.removeMemoryExpData(t),this.removeStorageExpData(t).then())}},{key:"putStorageExpData",value:function(t,e){var n=this;return new Promise((function(o,i){var a=JSON.stringify(e);n.putStorageString("_".concat(n.identifier,"_").concat(r.f,"_").concat(t),a).then((function(){return o()})).catch((function(t){return i(t)}))}))}},{key:"removeStorageExpData",value:function(t){var e=this;return new Promise((function(n,o){t&&e.removeStorageString("_".concat(e.identifier,"_").concat(r.f,"_").concat(t)).then((function(){return n()})).catch((function(t){return o(t)}))}))}},{key:"lue:function(t){var e=this;return new Promise((function(n,o){var i=JSON.stringify(t);e.putStorageString("_".concat(e.identifier,"_").concat(r.e,"_"),i).then((function(){return n()})).catch((function(t){return o(t)}))}))}},{key:"putMemoryExpData",value:function(t,e){this.expInfoMap.set(t,e),e.expName&&this.expKeyLayerMap.set(e.expName,t)}},{key:"removeMemoryExpData",value:function(t){return!!t&&(this.expInfoMap?this.expInfoMap.delete(t):(s.info("removeMemoryExpData --- expInfoMap null"),!1))}},{key:"putMemoryControlInfo",value:function(t){this.controlInfo.enableReport=t.enableReport,this.controlInfo.rollInterval=t.rollInterval,this.controlInfo.reportInterval=t.reSON,"JSON",!0)},function(t,e,n){e.f=n(1)bject.getOwnPropertySymbols},funion(){return s}));n(18),n(33);var bject.defineProperty(t,r.key,r)}}var a=r.DefaultLogger,s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setting=e,this.store=n}var e,n,r;return e=t,(n=[{key:"fetchRemoteData",value:function(t,e){var n=this;return new Promise((function(e,r){a.debug("fetch Remote Data: expName: ".concat(t));var i="".concat(n.getRequestDomain(),"/wabt/get_gray_policy"),s={guid:n.setting.guid,appid:n.setting.appId,profiles:n.setting.profiles,expName:t,sceneId:n.setting.sceneId},u=n.setting.requestTimeout||o.d;n.sendStringR(function(t){try{var o=JSON.parse(t);n.isResponseSuccess(o)?e(o):r(new Error("error http code"))}catch(t){r(t)}})).catch((function(t){r(t)}))}))}},{key:"isResponseSuccess",value:function(t){return!!t&&t.code===o.k}},{key:"getRequestDomain",value:function(){var t,e=null===(t=this.setting)||void 0===t?void 0:t.environment;if(!e)return o.i;switch(e){case 1:return o.g;case 2:return o.h;default:return o.i}}}])&&i(e.prototype,n),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"i",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"j",(function(){return v}));n(18),n(33),n(70);var r=n(0);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(5).DefaultLogger,a="rqd_expimpression",s="A149",u="A148",c="report_method",l="tab_sdk_version",f="A70",p="A71",d="0",h="1",v=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setting=e,this.memStore=n}var e,n,v;return e=t,(n=[{key:"reportExposeFromSDK",value:function(t,e){return this.isNeedReportExpose(t,e)&&this.reportBeaconEvent(t,!0).then((function(t){return i.debug("reportExposeFromSDK: ".concat(t)),t})),!1}},{key:"reportExposeFromUser",value:function(t,e){return this.isNeedReportExpose(t,e)&&this.reportBeaconEvent(t,!1).then((function(t){return i.debug("reportExposeFromUser: ".concat(t)),t})),!1}},{key:"reportBeaconEvent",value:function(t,e){var n=this;return new Promise((function(r){var o={};return o[f]=n.setting.guid||"",o[p]=n.setting.appId||"",o[l]=n.memStore.version,o[u]=String(t.expGrayId),o[s]=t.expName,o[c]=e?h:d,n.reportEvent(a,o).then((function(){r(!0)})).catch((function(t){i.info("reportEvent error: ".concat(t.message)),r(!1)}))}))}},{key:"isNeedReportExpose",value:function(t,e){var n,o,a=null===(n=this.setting)||void 0===n?void 0:n.guid;return a&&0!==a.length&&t?0===(null===(o=t.expName)||void 0===o?void 0:o.length)||t.assignment===r.a?(i.debug("isNeedReportExpose false, expGroup empty or assignment default, ignore"),!1):!!this.isNeedToReportByReportInterval(t,e)||(i.debug("isNeedReportExpose false, report interval not match, ignore"),!1):(i.debug("isNeedReportExpose false, guid or expInfo null, ignore"),!1)}},{key:"isNeedToReportByReportInterval",value:function(t,e){return e<=0?(t.lastReportTime=Date.parse((new Date).toString()),!0):(e*=1e3,!(Date.parse((new Date).toString())-t.lastReportTime<e||(t.lastReportTime=Date.parse((new Date).toString()),0)))}}])&&o(e.prototype,n),v&&o(e,v),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(18),n(33),n(54),n(38),n(31),n(24),n(32),n(72);var r=n(5),o=n(0),i=n(37);function a(t){t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=r.DefaultLogger,l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";s(this,t),this.initial=!1,this.eventHandler=new i.a,this.memStore={name:e,version:n}}var e,n,r;return e=t,(n=[{key:"init",value:function(t){var e=this;return new Promise((function(n,r){return e.checkInitParams(t)?(e.initData(t),e.initLocalData(),e.initTimeOutTimer(),e.setting.isAutoPoll&&e.initRefreshTimer(),e.fetchRemoteData(!0).then((function(){n(!0)})).catch((function(t){c.error("loadRemoteData error process remote data: ".concat(t.message)),e.initSDKFail(t.message),n(!1)}))):n(!1)}))}},{key:"setProfiles",value:function(t){var e;if(t&&"object"===a(t)){var n=(null===(e=this.setting)||void 0===e?void 0:e.profiles)||{};Object.keys(t).forEach((function(e){n[e]=String(t[e])})),this.setting.profiles=n}else c.error("please set profiles using object")}},{key:"getExpInfoByName",value:function(t,e){var n=this.lLoader.getMemoryExpDataByExpGroupKey(t);return this.reportExposeFromSDK(n,e||this.setting.isAutoReport),n}},{key:"getExpInfoByLayerCode",value:function(t,e){var n=this.lLoader.getMemoryExpDataByLayerName(t);return this.reportExposeFromSDK(n,value:function(){var t=this;return new Promise((function(e){t.fetchRemoteData().then((function(){e(!0)})).catch((function(t){e(!1)}))}))}},{key:"reportExpose",value:function(t){return this.reportExposeFromUser(t)}},{key:"switchGuid",value:function(t,e){var n=this;return new Promise((function(r){if(n.setting.guid===t)return c.and ignor),r(!1);c.debug("switch to new user ".concat(t)),c.debug(e||""),c.debug(n.setting),n.setting.guid=t,e&&(n.setting.profiles=e,n.initProfiles()),n.fetchRemoteData().then((function(){r(!0)})).catch((function(t){r(!1)}))}))}},{key:"clear",value:functerval),this.timeInterval=null),this.timeOutTimer&&(clearTimeout(this.timeOutTimer),this.timeOutTimer=null)}},{key:"initLocalData",value:function(){this.lLoader.initExpAndControlData(),this.eventHandler.onEvent(2)}},{key:"fetchRemoteData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Promise((function(r,o){t.rLoader.fetchRemoteData(n).then((function(n){c.table(n),t.handleResponse(n),e&&t.initSDKSuccess(),t.eventHandler.onEvent(3),r()})).catch((function(t){c.error("load remote data error"),o(t)}))}))}},{key:"handleResponse",value:function(t){try{if(!this.isNeedToHandleResponse(t))return;this.handleResponseDataVersion(t),this.handleResponseExpData(t),this.handleResponseControlInfo(t)}catch(t){c.debug("handleResponse: ".concat(t))}}},{key:"handleResponseControlInfo",value:function(t){var e=t.strategy;if(e){var n={attaId:e.reportConfig.id,attaToken:e.reportConfig.token,enableReport:e.enableReport,reportInterval:e.reportTimeInterval,reportType:e.reportType,rollInterval:e.refreshDuration};this.lLoader.handleResponseControlInfo(n)}}},{key:"handleResponseExpData",value:function(t){var e=t.data;if(e){var n=new Map;c.debug("handleResponseExpData Before: size: ".concat(Object.keys(e).length)),Object.keys(e).forEach((function(t){var r=e[t];if(r&&o.l!==r.sGrayPolicyId){var i={expName:r.expName,assignment:r.GrayPolicyId,layerName:t,expParams:r.params};n.set(t,i)}})),this.lLoader.handleResponseExpData(n)}}},{key:"handleR{}},{key:"isNeedToHandleResponse",value:function(t,e){return t}},{key:"initRefreshTimer",value:function(){var t=this;c.info("start refresh timer"),this.timeInterval=setInterval((function(){t.fetchRemotar t=this,e=this.setting.requestTimeout||o.d;c.info("start set timeOut timerï¼š".concat(e/1e3,"s")),this.timeOutTimer=setTimeout((function(){c.info("request timeOut exec"),t.initial&&t.initSDKFail("request timout!")}),e)}},{key:"initData",value:function(t){this.setting=t,void 0===t.environment&&(this.setting.environment=0),void 0===t.isAutoReport&&(this.setting.isAutoReport=!1),void 0===t.isAutoPoll&&(this.setting.isAutoPoll=!0),this.registerInitCallback(),this.initLoaderAndReporters(),this.initSysAndProfiles()}},{key:"initSysAndProfiles",value:function(){var t=this.initSystemInfo();this.memStore.systemInfo=t,this.initProfiles()}},{key:"checkInitParams",value:function(t){var e=!0;return t||(c.error("no param config"),e=!1),t.appId||(c.error("appId not set"),e=!1),t.guid||(c.error("guid not set"),e=!1),this.initial&&(c.error("already initialized"),e=!1),e}},{key:"clearTimeOutTimer",value:function(){this.timenull)}},{key:"fetchRemoteDataTimer",value:function(){this.initial?(c.debug("refresh timer check"),this.fetchRemoteData().catch((function(t){c.info("loadRemoteDataTimer error process remote data: ".concat(t.message))}))):c.debug("isInit has not finished and ignore update this time")}},{key:"initSDKFail",value:function(t){this.initial||(this.clearTimeOutTimer(),this.initial=!0,c.error("init SDK failed"),this.eventHandler.onEvent(0,t))}},{key:"initSDKSuccess",value:function(){this.initial||(this.clearTimeOutTimer(),this.initial=!0,c.debug("init SDK Success"),this.eventHandler.onEvent(1))}},{key:"registerInitCallback",value:function(){this.setting.onSuccess&&this.eventHandler.registerEventListener(1,this.setting.onSuccess),this.setting.onFail&&this.eventHandler.registerEventListener(0,this.setting.onFail)}},{key:"reportExposeFromSDK",value:function(t,e){var n;return!(!e||!this.isEnableReport())&&(null===(n=this.reporter)||void 0===n?void 0:n.reportExposeFromSDK(t,this.getReportInterval()))}},{key:"reportExposeFromUser",value:function(t){var e;return!!this.isEnableReport()&&(null===(e=this.reporter)||void 0===e?void 0:e.reportExposeFromUser(t,this.getReportInterval()))}},{key:"isEnableReport",value:function(){var t=this.lLoader.isEnableReport();return c.debug("isEnableReport is ".concat(t)),t}},{key:"getReportInterval",value:function(){var t=this.lLoader.getReportInterval();return c.debug("getReportInterval: ".concat(t,"s")),Math.max(t,o.j)}},{key:"getRollInterval",value:function(){var t=this.lLoader.getRollInterval();return c.debug("getRollInterval: ".concat(t,"s")),Math.max(t,o.b)}}])&&u(e.prototype,n),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}()},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructn.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TabJSSDK=void 0;var i=n(6),a=n(80),s=n(81),u=n(34),c=n(82),l=n(117),f=ype.initData=function(e){t.prototype.initData.call(this,e),e.enableUI&&(this.uiExtension=new l.UiExtension(this))},e.prototype.clear=function(){t.prototype.clear.call(this),this.uiExtension&&this.uiExtension.clear()},e.prototype.initLoaderAndReporters=function(){this.lLoader=new a.JSLocalLoader(this.setting),this.rLoader=new sis.memStore);var t=new c.TabJSBeaconReporter(this.setting,this.memStore);this.reporter=t},e.prototype.initProfiles=function(){var t=this.setting,e=t.profiles||{};Object.keys(e).forEach((function(t){e[t]=String(e[t])})),e[i.TAB_PROFILE_KEY_PLATFORM]="jssdk";var n=this.memStore.systemInfo;e[i.TAB_PROFILE_KEY_RESO]=n.get("resolution")||"",e[i.TAB_PROFILE_KEY_MODEL]=n.get("platform")||"",e[i.TAB_PROFILE_KEY_OSMODEL]=n.get("system")||"",e.ROMA_BROWSER_MODEL=n.get("browserTp")||"",e.ROMA_BROWSER_VERSION=n.get("browserVer")||"",e[i.TAB_PROFILE_KEY_SDKVER]=this.memStore.version,t.profiles=e},e.prototype.initSystemInfo=function(){return u.getSystemInfo()},e.prototype.getEventHandler=function(){return this.eventHandler},e}(i.TabSDK);e.TabJSSDK=f},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.JSLocalLoader=void 0;var i=n(6),a=n(34),s=i.DefaultLogger,u=function(t){function e(e){var n=t.call(this,e)||this;return n.openDbPromise=a.openDatabase("tab_sdk_web",1,"tab_experiment"),n}return o(e,t),e.prototype.getStorageString=function(t){return this.openDbPromise?this.openDbPromise.then((function(e){return new Promise((function(n,r){var o=e.transaction(["tab_experiment"],"readonly").objectStore("tab_experiment");try{var i=o.get(t);i.onerror=function(t){r(t)},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:null)}}catch(t){r(t)}}))})):(s.debug("get Localstorage "+t),a.getLocalStorageItem(t))},e.prototype.putStorageString=function(t,e){return this.openDbPromise?this.openDbPromise.then((function(n){return new Promise((function(r,o){var i=n.transaction(["tab_experiment"],"readwrite").objectStore("tab_experiment");try{var a=i.put({compositeKey:t,value:e});a.onerror=function(t){o(t)},a.onsuccess=function(){r()}}catch(t){o(t)}}))})):(s.debug("save Localstorage "+t+" : "+e),a.putLocalStorageItem(t,e))},e.prototype.removeStorageString=function(t){return this.openDbPromismise.then((function(e){return new Promise((function(n,r){var o=e.transaction(["tab_experiment"],"readwrite").objectStore("tab_experiment");try{var i=o.delete(t);i.onerror=function(t){r(t)},i.onsuccess=function(){n()}}catch(t){r(t)}}))})):(s.debug("remove localstorage "+t),a.removeLocalStorageItem(t))},e.prototype.getStorageAllKey=function(){return this.openDbPromise?this.openDbPromise.then((function(t){return new Promise((function(e,n){var r=t.transaction(["tab_experiment"],"readonly").objectStore("tab_experiment");try{var o=r.getAllKeys();o.onerror=function(t){n(t)},o.onsuccess=function(t){var n=t.target.result;e(n||null)}}catch(t){n(t)}}))})):a.getLocalStorageAllKey()},e}(i.LocalLoader);e.JSLocalLoader=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){bject.create(e):(n.prototype=e.prototype,new n)});Object.defiSRemoteLoader=void 0;var i=n(6),a=n(34),s=function(t){function e(){return null!==t&&t.apply(this,argun(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TabJSBeaconReporter=void 0;var i=n(6),a=i.DefaultLogger,s=function(t){function e(e,r){var o=t.call(this,e,r)||this;try{var s=window.BeaconAction;a.info("load Beaconï¼š"+!!s),s||(a.info("load beacon from module"),s=n(116)),o.beaconSDK=new s({appkey:i.TABBeaconAppKey,onReportSuccess:function(){},onReportFail:function(){}})}catch(t){a.error("error init beacon sdk",t)}return o}return o(e,t),e.prototype.reportEvent=function(t,e){var n=this;return new Promise((function(r){var o;(null===(o=n.beaconSDK)||void 0===o?void 0:o.onDirectUserAction)&&n.beaconSDK.onDirectUserAction(t,e),r()}))},e}(i.TabReporter);e.TabJSBeaconReporter=s},function(t,e,n){"use strict";var r=this&&tect.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.clear=e.setLogLevel=e.switchGuid=e.reportExpose=e.refresh=e.getExpInfoByLayerCode=e.getExpInfoByName=e.setProfiles=e.init=e.getWabtInstance=void 0;var i=n(6),a=n(79);o(n(79),e),o(n(82),e),o(n(34),e),o(n(81),e),o(n(80),e);var s=i.DefaultLogger,u=new a.TabJSSDK,c=new Map;c.set("default",u),e.getWabtInstance=function(t){var e=c.get(t);return e||(e=new a.TabJSSDK(t),c.set(t,e)),e},e.init=function(t){return u.init(t)},e.setProfiles=functioame=function(etExpInfoByLayerCode=function(t,e){return u.getExpInfoByLayerCode(t,e)},e.refreypeof window&&window&&Object.getOwnPropertyNames?Object."use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function n(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function r(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0)}eplp(eId}ce.qt)},t.prototype.isEventUpOnOff=function.prototype.hasOwnProperty.call(this.realSample,t)&&this.realSample[t]<Math.floor(Math.random()*Math.floor(1e4))},t}(),m="session_storage_key",b=function(){function t(t,e,n){this.beacon=n,this.storage=t,this.duration=e,this.appkey=n.config.appkey}return t.prototype.getSession=function(){var t=this.storage.getItem(m);if(!t)return this.createSession();var e="",n=0;try{var r=JSON.parse(t)||{sessionId:void 0,sessionStart:void 0};if(!r.sessionId||!r.sessionStart)return this.createSession();var o=Number(this.storage.getItem(a));if(Date.now()-o>this.duration)return this.createSession();e=r.sessionId,n=r.sessionStart}catch(t){}return{sessionId:e,sessionStart:n}},t.prototype.createSession=function(){var t=Date.now(),e={sessionId:this.appkey+"_"+t.toString(),sessionStart:t};thtible")>-1&&t.indexOf("MSIE")>-1,n=t.indexOf("Edge")>-1&&!e,r=t.indexOf("Trident")>-1&&t.indexOf("rv:11.0")>-1;if(e){new RegExp("MSIE (\\d+\\.\\d+);").test(t);var o=parseFloat(RegExp.$1);return 7==o?7:8==o?8:9==o?9e(e,o);r.forEach((function(t){i.cre(){rct[t]},t.prototype.setItem=function(t,e){var n=JSON.stringify(e);this.storage.setItem(t,n),this.keyObject[t]=e},t.prototype.iterate=function(t){for(var e=Object.keys(this.keyObject),n=0;n<e.length;n++){var r=this.storage.getItem,L=function(){function t(t,e){var n=this;this.dbEventCCount=function(){return 2,Promise.reject()];n=,void 0,void 0,(functiontion(n){switch(n.label){case 0:e=d(t.mapValue),n.label=1;case 1:return n.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(e)];case 2:return[2,n.sent()];case 3:return n.sent(),this.dbEventCount++,[tion(){return i[0]ve(t);return(e?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,(function(t,e){if(e){var r=e.resolved,o=e.rejected;n=n.then(r,o)}return t}),""),n},t.prototype.eject=function(t){this.interceptors[t]&&(this.interceptors[t]=null)},t}(),B={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new j,response:new j}},F=/^([a-z][a-z\d+\-.]*:)?\/\//i,U=Object.prototype.toString;function K(t){return M(this,void 0,void 0,(function(){var e;return N(this,(function(n){switch(n.label){case 0:if(window.fetch)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,k({src:t})];case 2:return n.sent(),[3,4];case 3f Image){var e=new Image(1,1),n=C({attaid:"0f400053130",token:"6552374442",comps:"@tencent/ovb-request",version:"1.1.18",ua:navigator.userAgent,url:location.href,_dc:Math.random()},t),r=Object.keys(n).map((function(t){return t+"="+encodeURIComponent(n[t])})).join("&");e.src="https://h.trace.qq.com/kv?"+r}}({func:"loadPolyfill",result:0,params:t,error_msg:e.message}),new Error("åŠ è½½ polyfill "+t+" å¤±è´¥: "+e.message);case 4:return[2]}}))}))}functio(this,(function(m){switch(m.label){case 0:return e=B.baseUadn=e,void((r=t.headers)&&Object.keys(r).forEach((function(t){t!==n&&t.toUpperCase()===n.toUpperCase()&&(r[n]=r[t],delete r[t])})));var n,r})),function(t){if("[object Object]"!==U.call(t))return!1;var e=Objecringify(t.body),t.headers&&(t.headers["Content-Type"]="application/json;charset=utf-8"))}(o),[4,r.request.traverse(o,!0)];case 2:if((i=m.sent())instanceof Error)throw i;return i.urllace(/^\/+/,"")}(e,i.url),a=i.url,s=i.timeout,u=i.params,c=i.method,l=["GET","D"].includes(void 0===c?"GET":c)&&!!u,f=l?A({url:a,query:u}):a,p=[],s&&!i.signal&&(v=new Promise((function(t){d=setTimeout((function(){t(new Error("timeout"))}),s)})),p.push(v),h=new Abar n,a;return rabel){case 0:return[4,H(e({url:t,body:o,method:"POST"},i))];case 1:return[4,(n=r.sent()).json()];case 2:return a=r.sent(),[2,Promise.resolve(),V=function(){function t(t){this.appkey=t}return t.prototype.getItem=function(t){try{return window.localStorage.getItem(this.gealStorage.removeItem(this.ghis.getStoreKey(t),e)}caction(t,e){try{window.sessionStorage.setItem(this.getStoreKey(t),e)}catch(t){}},t.prototype.o+this.appkey+"_"+t},t.prototype.createDeviceId=function(){try{var t=window.eturn n}(),window.localStoy{for(var t=window.localStorage.length,e=0;e<t;e++){var n=window.localStorage.key(e);(null==n?void 0:n.substr(0,9))==o&&window.localStorage.removeItem(n)}}catch(t){}},t.prototype00",n.message),r&&r(t.data);var i=JSON.parse(e.storage.getItem(s));o.forEach((function(t){i&&-1!=i.indexOf(d(t))&&e.store.insertEvent(t,(function(t,n){t&&e.errorReport.reportError("604","insertEvent fail!")})),e.removeSendingId(d(t))})),e.monitorUploadFailed()}))};var r,o,i=E();return e.isUnderIE8=i>0&&i<8,e.isUnderIE8;(void 0==function(t,e){if(document.getElementById(n))t(void 0);else{var r=document.getElementsByTagName;o.onload=function(){return functiono.onerror=function(t){o.onerror=null,r.removeChild(o),e(t)},o.src="https://tun-cos-1258344701.file.myqcloud.com/fp.js",o.id=n,r.appendChild(o)}}))).then((function(){(new Fingerprint).getQimei36(t,e)})).catch((function(t){}))}(t.appkey,(function(t){e.qimei36=t.q36})),e.network=new q(t),e.storage=new V(t.appkey),e.initCommonInfo(t),e.store=new L(t.appkey,e.storage),e.errorReport=new g(e.config,e.commonInfo,"web",e.network),e.strategy=new y(null==t.needQueryConfig||t.needQueryConfig,e.config,e.commonInfo,e.storage,e.network),e.logidStartTime=e.storage.getItem(now().toString(),e.storage.setItem(Y,e.logidStartTime)),r=e.logidStartTime,o=DaDelayTime)),e}return function r(){this.constructor=e}t(eigator.userAgent,pixel:r.join("*"),channelID:t.channelID?String(t.channelID):"",openid:t.openid?String(t.openid):"",unid:t.unionid?String(t.unionid):"",sdkVersion:J},this.config.appVersion=t.versionCode?String(t.versionCode):"",this.config.strictMode=D=window.setInterval((function(){e.pauseSearching||e.store.getEvents().then((function(t){0==t.length&&(e.p!0);var n=[],r=JSON.parse(e.sis.delayTime&&!this.unders.isUnderIE)this.errorRepid"),a=Number(this.storag:this.commonInfo.language,A17:th104:document.referrer,A119:thiarInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},r.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},r}(v)}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UiExtension=void 0;var r=n(6),o=n(55),i=n(118),a=n(36),ype.clear=function(){window.removeEventListener("hashchange",this.historyHandler),window.removeEventListener("popstate",this.historyHandler),window.removeEventListener("replaceState",this.historyHandler),window.removeEventListener("pushState",this.historyHandler)},t.prototype.start=function(){r.DefaultLogger.debug("start ui extension"),this.lastUrl=d(),this.registerEventListener(),this.listenHistory(),this.initMutationObserver()},t.prototype.registerEventListener=function(){var t=this,e=this.instance.getEventHandler();e.registerEventListener(2,(function(){return t.handleApplyUI()})),e.registerEventListener(3,(function(){return t.handleApplyUI()}))},t.prototype.listenHistory=function(){this.hookHistory();var t=v(this.handleHistory.bind(this),100);this.historyHandler=t,window.addEventListener("hashchange",t),window.addEventListener("popstate",t),window.addEventListener("replaceState",t),window.addEventListener("pushState",t)},t.prototype.hookHistory=function(){if(!this.isHistoryHooked){var t=function(t){var e=history[t],n=new Event(t);return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.applarguments:t}),window.dispatchEvent(n),o}};history&&(history.pushState=t("pushState"),history.replaceState=t("replaceState"),this.isHistoryHooked=!0)}},t.prototype.initMutationObserver=function(){var t=this;new MutationObserver((function(){return t.handleApplyUI()})).observe(document,{childList:!0,subtree:!0})},t.prototype.handleApplyUI=function(){for(var t=[],e=0,n=this.getAllExp();e<n.length;e++){var o=n[e];try{var i=JSON.parse(o.expParams.config);t.push.apply(t,i)}catch(t){r.DefaultLogger.error("åºåˆ—åŒ–uiå®žéªŒä¿¡æ¯å¤±è´¥: ",t)}var a=o.exeportedExp.has(a)||(this.instance.reportExpose(o),this.reportedExp.add(a))}try{s.initElt(tunction(){var t=d(),e=this.instance.lLoader.getExpInfoMap(),n=[];return e.forEach((function(e){h(e,t)&&n.push(e)})),n},t}();e.UiExtension=l;var f=function(){o.bridgeCore.hasParentPage()&&(p(),setTimeout((function(){o.bridgeCore.postMessage("iframe-height",{iframeH:document.body.scrollHeight})}),1e3))},p=ncat",(function(t){r.DefaultLogger.debug("sdk: concat"),o.bridgeCore.postMessage("iframe-location",{href:window.location.href}),o.bridgeCore.postMessage("concat",{msg:"hello cms"})})),o.bridgeCore.addListenerFn("reload",(function(){r.DefaultLogger.debug("sdk: reload"),window.location.reload()ction(t){r.DefaultLogger.debug("sdk: start-circle"),a.series.insertSeries(),c.start()})),o.bridgeCore.addListenerFn("update-elements",(function(t){r.DefaultLogger.debug("sdk: update-elements"),r.DefaultLogger.debug(t),s.initElt(t,null,!0)}))},d=function(){return window?window.location.href:""},h=function(t,e){var n=t.expParams,r=n(){n?(clearTimeout(n),n=setTimeout(t,e)):n=setTim,e,n,r){void 0===r&&(r=n),Ob||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||funct!=t)for(var n in t)"defa;Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var a=n(6),s=n(55),u=n(119),c=i(n(35)),l=n(120),f=n(36),p=n(121),d=n(25),h=function(){function t(){this.circleState=d.CircleState.Empty}return t.prototype.start=function(){this.startInit(),this.startCircle(),this.startPreview()},t.prototype.startInit=function(){this.circleState!==d.CircleState.Circle&&(a.DefaultLogger.debug("start circle"),this.circleState=d.CircleState.Circle,c.addClass(document.getElementsByTagName("body")[0],"tabc"),this.listenHover(),this.listenHoverLeave(),this.listenClick(),this.listenStopCircle(),this.listenStartMove(),this.listenStopMove(),this.listenCapture(),this.listenRestore(),this.listenSetCurrentElt(),c.assignIDs(),this.domFootprint=new u.DOMFootprint(document.body))},t.prototype.startCircle=function(){this.circleState,d.CircleState.Circle},t.prototype.startPreview=function(){this.circleState===d.CircleState.Preview&&c.addClass(document.getElementsByTagName("body")[0],"tabc")},t.prototype.listenHover=function(){var t=this;l.startListenHover((function(e){e.stopPropagation(),t.circleState===d.CircleState.Circle&&f.series.mouseover(e)}))},t.prototype.listenHoverLeave=function(){var t=this;l.startListenHoverLeave((function(e){e.stopPropagation(),t.circleState===d.CircleState.Circletype.listenClick=function(){var t=this;l.startListenClick((function(t){var e=t.paths,n=e[0],r=c.getXPath(e,!0),o=c.getSelectByXpath(r),i=n.getAttribute("tab-id");s.bridgeCore.postMessage("circle-click",{id:i,selector:o,x:t.x,y:t.y,selectDatas:t.selectDatas})}),(function(){return t.circleState}))},t.prototype.listenStopCircle=function(){var t=this;s.bridgeCore.addListenerFn("stop-circle",(function(){a.DefaultLogger.debug("sdk: stop-circle"),t.circleState===d.CircleState.Circle&&(t.circleState=d.CircleState.Preview,f.series.stopSeries(),c.removeClass(document.getElementsByTagName("bodydgeCore.addListenerFn("start-move",(function(t){a.DefaultLogger.debug("sdk: start-move"),t),f.series.stopSeries()}))},t.prototype.listenStopMove=function(){s.bridgeCore.addListenerFn("end-move",(function(){a.DefaultLogger.debug("sdk: end-move"),p.endMove()}))},t.prototype.listenCapture=function(){var t=this;s.bridgeCore.addListenerFn("capture",(function(){t.domFootprint.capture()}))},t.prototype.listenRestore=function(){var t=this;s.bridgeCore.addListenerFn("restore",(function(){a.DefaultLogger.debug("sdk: restore"),t.domFootprint.restore(),document.body.classList.add("tabc")}))},t.prototype.listenSetCurre(function(t){var e=document.querySelector(t);e&&(e.click(),e.scrollIntoView({block:"center"}))}))},t}();e.Circle=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DOMFootprint=void 0;var r=function(){function t(t){this.children=[],this.element=t,this.capture()}return t.prototype.capture=function(){if(this.nodeType=this.element.nodeType,1===this.element.nodeType){this.children=[],this.attributes={};for(var e=0;e<this.element.childNodes.length;e++)this.children[e]=new t(this.element.childNodes[e]);for(var n=0;n<this.element.attributes.length;n++)this.attributes[n]=this.element.attributes[n].name,this.attributes[this.attributes[n]]=this.element.attributes[n].value,this.attributes.length=this.element.attributes.length}else 3!==this.element.nodeType&&8!==this.element.nodeType||(this.textContent=this.element.textContent);return this},t.prototype.restore=function(){if(1===this.nodeType){for(;this.element.childNodes.length;)this.element.removeChild(this.element.childNodes[0]);for(var t=[],e=this.element.attributes.length-1;e>=0;e--)if(this.attributes.hasOwnProperty(this.element.attributes[e].name)){if(this.element.attributes[e].value===this.attributes[this.attributes[e]])continue;this.element.setAttribute(this.attributes[e],this.attributes[this.attributes[e]])}else"tab-id"!==this.element.attributes[e].name&&t.push(this.element.attributes[e].name);for(var n=void 0;n=t.pop();)this.element.removeAttribute(n);for(var r=0;r<this.children.length;r++)this.element.appendChild(this.children[r].element),this.children[r].restore()}else 3!==this.element.nodeType&&8!==this.element.nodeType||(this.element.textContent=this.textContent);return this},t}();e.DOMFootprint=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.startListenClick=e.startListenHoverLeave=e.startListenHover=void 0;var r=n(6),o=n(35),i=n(36),a=n(25),s=function(t){return function(e){r.DefaultLogger.debug("click: start "+t),document.addEventListener(t,(function(t){var n=t.target||t.srcElement;n.tagName&&!a.htmlTagMap[n.tagName.toUpperCase()]||e&&e(t)}),!0)}};e.startListenHover=s("mouseover"),e.startListenHoverLeave=s("mouseout"),e.startListenClick=function(t,e){document.addEventListener("click",(function(n){if("circle"===e()&&i.series.isValid(n)){n.preventDefault(),n.stopPropagation(),i.series.handleClick(n);var r=u(n),s=n.target||n.srcElement;if(!s.tagName||a.htmlTagMap[s.tagName.toUpperCase()]){s.classList.remove("circle-click"),s.classList.remove("circle-hover"),s.classList.remove("circle-highlight");var c=window.getComputedStyle(s),l={tagName:s.tagName,autoTagIndex:Number(s.getAttribute("auto_tagIndex"))||0,classList:o.getClassList(s).join(" "),href:s.getAttribute("href"),value:s.getAttribute("value"),placeholder:s.getAttribute("placeholder"),textContent:s.textContent,color:c.color,backgroundColor:c.backgroundColor,src:s.getAttribute("src"),backgroundImage:c.backgroundImage,boxShadow:c.boxShadow,textShadow:c.textShadow,width:c.width,height:c.height,marginLeft:c.marginLeft,marginTop:c.marginTop,marginRight:c.marginRight,marginBottom:c.marginBottom,paddingLeft:c.paddingLeft,paddingTop:c.paddingTop,paddingRight:c.paddingRight,paddingBottom:c.paddingBottom,borderLeft:c.borderLeft,borderTop:c.borderTop,borderRight:c.borderRight,borderBottom:c.borderBottom,fontFamily:c.fontFamily,fontSize:c.fontSize,fontWeight:c.fontWeight,textAlign:c.textAlign,textDecoration:c.textDecoration,fontStyle:c.fontStyle,lineHeight:c.lineHeight,borderStyle:c.borderStyle,borderColor:c.borderColor,borderWidth:c.borderWidth,borderRadius:c.borderRadius};t&&t({x:n.x,y:n.y,paths:r,e:n,selectDatas:l})}}}),!0)};var u=function(t){if(t.path)return t.path;if(document&&document.elementsFromPoint)return[document.elementsFromPoint(t.x,t.y)];for(var e=[],n=t.target,r=n.tagName.toLowerCase();"body"!==r&&"html"!==r;)e.push(n),r=(n=n.parentElement).tagName.toLowerCase();return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mouseupHandler=e.endMove=e.startMove=void 0;var r,o=n(6),i=n(55),a=n(36),s=n(122),u=n(35),c=n(25),l=!1,f="before",p=c.MoveType.Relative,d=0,h=0,v=0,g=0;function y(t){if("anywhere"===p){var e=t.target;e.style.position="relative",d=t.clientX,h=t.clientY,e.style.left&&(v=parseInt(e.style.left,10)),e.style.top&&(g=parseInt(e.style.top,10))}i.bridgeCore.postMessage("moving",null),t.preventDefault(),t.target,r=t.target,l=!0,window.addEventListener("mousemove",m),s.writeStyleToHead("tabc-dragcursor-style","* {cursor: move; user-select: none;}"),a.series.handleClick(t)}e.startMove=function(t){p=t,window.addEventListener("mousedown",y),window.addEventListener("mouseup",e.mouseupHandler)},e.endMove=function(){window.removeEventListener("mousedown",y),window.removeEventListener("mouseup",e.mouseupHandler)};var m=function(t){if(l){if("anywhere"===p){var e=t.clientX-d,n=t.clientY-h;r.style.left=v+e+"px",r.style.top=g+n+"px"}else{E();var o=t.target;if(o===r)return;var i=o.getBoundingClientRect(),s=o.parentElement;s&&s.classList.add("target-shadow-parent"),"hor"===b(r,o)?t.clientX<i.left+.5*i.width?(o.classList.add("target-shadow-left"),f="before"):(o.classList.add("target-shadow-right"),f="after"):t.clientY<i.top+.5*i.height?(o.classList.add("target-shadow-top"),f="before"):(o.classList.add("target-shadow-bottom"),f="after")}a.series.handleClick(t)}};e.mouseupHandler=function(t){if(l){if(l=!1,"anywhere"===p){var e=u.getSelector(r);i.bridgeCore.postMessage("moved",{srcSelector:e,x:r.style.left,y:r.style.top})}else{var n=t.target,a=n.parentElement,c=(e=u.getSelector(r),u.getSelector(n));a&&"HTML"!==a.tagName||(a=document.body),"before"===f?"HTML"===n.tagName||"BODY"===n.tagName?(a=document.body).insertAdjacentElement("afterbegin",r):a.insertBefore(r,n):"HTML"===n.tagName||"BODY"===n.tagName?(a=document.body).insertAdjacentElement("beforeend",r):a.insertBefore(r,n.nextElementSibling);var d=u.getSelector(r);i.bridgeCore.postMessage("moved",{srcSelector:e,targetSelector:c,newSelector:d,insertOrder:f})}window.removeEventListener("mousemove",m),E(),s.removeStyle("tabc-dragcursor-style"),o.DefaultLogger.debug("sdk: moved")}};var b=function(t,e){var n,r,i=e.getBoundingClientRect(),a=null===(n=e.nextElementSibling)||void 0===n?void 0:n.getBoundingClientRect(),s=null===(r=e.previousElementSibling)||void 0===r?void 0:r.getBoundingClientRect();return a||s?(null==a?void 0:a.left)<i.right&&i.left<(null==s?void 0:s.right)||(null==a?void 0:a.left)<(null==i?void 0:i.right)||!a&&i.left<(null==s?void 0:s.right)?"ver":"hor":(o.DefaultLogger.debug("empty"),"ver")};var E=function(){for(var t=0,e=["target-shadow-left","target-shadow-right","target-shadow-top","target-shadow-bottom","target-shadow-parent"];t<e.length;t++)for(var n=e[t],r=document.querySelectorAll("."+n),o=0;o<r.length;o++)r[o].classList.remove(n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeStyle=e.writeStyleToHead=e.createHeadIfNotExist=void 0;e.createHeadIfNotExist=function(){if(!document.head){var t=document.createElement("head");document.documentElement.childElementCount>0&&document.documentElement.insertBefore(t,document.documentElement.firstElementChild)}},e.writeStyleToHead=function(t,n){e.createHeadIfNotExist();var r=document.createElement("style");r.id=t,r.type="text/css",r.innerHTML=n,document.head.append(r)},e.removeStyle=function(t){var e;void 0===t&&(t="tabc-editor-style");var n=document.getElementById(t);n&&(null===(e=n.parentElement)||void 0===e||e.removeChild(n))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initElt=void 0;var r=n(25);e.initElt=function(t,e,n){void 0===n&&(n=!1);for(var r=0,a=t;r<a.lenfor(var u=document.querySelectorAll(s.selector),c=function(t){var r=u[t];if(r.getAttribute("data-ab-init")&&!n)return"continue";r.setAttribute("data-ab-init","1"),o(r,s.op),i(r,s.attribute),r.setAttribute("data-ab-expcode",e&&e.grayId),setTimeout((function(){r.setAttribute("data-ab-init","2")}),0)},l=0;l<u.length;l++)c(l)}};var o=function(t,e){if(e)for(var n=0,r=e;n<r.length;n++){var o=r[n];p(t,o),d(t,o),h(t,o){var o=r[n];a(t,o),s(t,o),u(t,o),c(t,o),l(t,o),f(t,o)}},a=function(t,e){"style"===e.key&&(t.style.cssText+=e.value)},s=function(t,e){"classNames"===e.key&&(t.className=e.value)},u=function(t,e){"innerHTML"===e.key&&(t.innerHTML=e.value)},c=function(t,e){"text"===e.key&&(t.textContent=e.value)},l=function(t,e){"bgImg"===e.key&&(t.style.backgroundImage="url('"+e.value+"') !important",t.textContent=e.value)},f=function(t,e){["style","className","innerHTML","text","bgImg"].includes(e.key)||t.setAttribute(e.key,e.value)},p=function(t,e){if(e.type===r.OpTypes.ADD){var n=document.createElement("div");n.innerHTML=e.html||"",n.firstChild&&t.appendChild(n.firstChild)}},d=function(t,e){if(e.type===r.OpTypes.SWAP){var n=document.createElement("div"),o=document.querySelector(e.targetSelector);o&&(o.setAttribute("data-ab-init","1"),t.parentNode.insertBefore(n,t),o.replaceWith(t),n.replaceWith(o),o.setAttribute("data-ab-init","2"))}},h=function(t,e){if(e.type===r.OpTypes.MOVE&&e.targetSelector){var n=document.querySelector(e.targetSelector);n&&n.parentElement&&("before"===e.insertOrder?n.parentElement.insertBefore(t,n):n.parentElement.insertBefore(t,n.nextElementSibling))}}}])}));