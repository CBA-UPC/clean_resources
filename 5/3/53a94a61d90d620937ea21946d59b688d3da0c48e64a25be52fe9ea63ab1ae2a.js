"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[3854],{39837:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(90182),a=r(28297),o=r(46417);function i(e){return(0,o.jsxs)(n.Z,{children:[(0,o.jsx)("title",{children:"".concat(a.ZP.siteTitle," | ").concat(e.title)}),(0,o.jsx)("meta",{name:"description",content:e.description})]})}i.defaultProps={description:""}},47371:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(77406),a=r(91210),o=r(41727),i=r(47131),s=r(46417);function u(e){var t=e.showPassword,r=e.handleClickShowPassword;return(0,s.jsx)(o.Z,{position:"end",children:(0,s.jsx)(i.Z,{"aria-label":"toggle password visibility",onClick:r,children:t?(0,s.jsx)(n.Z,{}):(0,s.jsx)(a.Z,{})})})}},45328:function(e,t,r){var n=r(17592),a=r(15103);t.Z=(0,n.ZP)(a.Z)((function(e){return{color:e.theme.palette.secondary.main,textAlign:"left",fontWeight:"500",fontSize:"16px",lineHeight:"20px",marginTop:0}}))},79894:function(e,t,r){var n=r(16783),a=r(4906);t.Z=(0,a.Z)(n.Z)((function(){return{backgroundColor:"white",borderBottomColor:"none",borderColor:"#D0D5DD",borderRadius:"8px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)",marginTop:"6px",marginBottom:"25px",fontSize:"16px",fontWeight:400,lineHeight:"24px",fontFamily:"sans-serif","& .MuiInputBase-input":{padding:"8px"}}}))},93854:function(e,t,r){r.d(t,{Z:function(){return Z}});var n=r(1413),a=r(15861),o=r(64687),i=r.n(o),s=r(72668),u=r(94149),c=r(51767),l=r(19655),d=r(58467),p=r(41863),f=r(28297),h=r(28422),v=r(25258),g=r(11149),m=r(49594),x=r(91345),b=r(46417);function Z(e){var t=(0,d.bS)("/auth/"),r=(0,p.z$)(),o=r.user,Z=r.identify,w=(0,g.Z)(),k=w.settings,y=w.saveGallerySettings,I=(0,c.useUnleashContext)(),S=(0,s.a)(h.D9W,{skip:!(0,l.v0)().currentUser||Boolean(localStorage.getItem(m.REDIRECT_LOCAL_STORAGE_VAR))||!!t,onError:function(){var e=(0,a.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.Z.error(t),e.prev=1,r=(0,l.v0)(),e.next=5,(0,l.w7)(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),v.Z.error(e.t0);case 10:window.location.href="/?logout=true";case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),onCompleted:function(e){var t,r,a,i=e.getProfile;i&&(null===(t=window.dataLayer)||void 0===t||t.push({event:"start_pw",pw_user_email:i.email}),o(i.username),Z(i.username,(0,n.Z)({planId:null===(r=i.subscription)||void 0===r||null===(a=r.plan)||void 0===a?void 0:a.planId},f.ZP.app)),I({userId:i.username,properties:{planId:i.subscription.plan.planId}}),(0,x.at)({profile:(0,n.Z)({},i)}),y((0,n.Z)((0,n.Z)({},k),{},{sortBy:{field:i.albumsSettings.defaultSortRule.field,desc:!!i.albumsSettings.defaultSortRule.desc}})))}});return(0,l.v0)().currentUser&&S.loading?(0,b.jsx)(u.Z,{}):(0,b.jsx)(b.Fragment,{children:e.children})}},76391:function(e,t,r){var n,a,o,i,s,u;r.d(t,{Xr:function(){return u},sH:function(){return o},xd:function(){return s},yI:function(){return i}}),n||(n={})),a||(a={})),function(e){e.Grid="Grid",e.HorizontalScroll="HorizontalScroll",e.MasonryHorizontal="MasonryHorizontal",e.MasonryVertical="MasonryVertical"}(o||(o={})),i||(i={})),s||(s={})),u||(u={}))},73184:function(e,t,r){r.d(t,{n:function(){return s}});var n=r(36241),a=r(28422),o=r(76391),i=n.isTablet?4:2,s={sortBy:{field:a.hqH.DateTaken,desc:!0},groupedBy:o.yI.All_Photos,layout:o.sH.Grid,flatten:!1,zoom:n.isMobile?i:5,cropMode:!1}},11149:function(e,t,r){r.d(t,{Z:function(){return u},v:function(){return s}});var n=r(1413),a=r(99146),o=r(90297),i=r(73184),s=(0,a.QS)(i.n);function u(){return{saveGallerySettings:function(e){s((0,n.Z)({},e))},settings:(0,o.l)(s)}}},49594:function(e,t,r){r.r(t),r.d(t,{REDIRECT_LOCAL_STORAGE_VAR:function(){return oe},default:function(){return ie}});var n=r(1413),a=r(4942),o=r(15861),i=r(29439),s=r(64687),u=r.n(s),c=r(96420),l=r(44766),d=r(85281),p=r(90891),f=r(61113),h=r(51767),v=r(90421),g=r(19655),m=r(44270),x=r(16031),b=r(36241),Z=r(47313),w=r(58467),k=r(53104),y=r(39837),I=r(47371),S=r(45328),E=r(79894),C=r(92455),T=r(82638),j=r(51748),P=r(28422),A=r(25258),_=r(6007),R=r(51980),U=r(19860),L=r(66149),F=r(33604),D=r(96467),B=r(97762),W=r(48310),G=r(60194),O=r(32600),H=r(48119),z=r(83213),N=r(46417);function M(e){var t=(0,U.Z)(),r=e.handleClose,n=e.handleProvider,a=e.isOpen,o=void 0!==a&&a,i=e.userLoginProviderIds;return(0,N.jsxs)(L.Z,{onClose:r,open:o,children:[(0,N.jsx)(F.Z,{children:"Having trouble signing in?"}),(0,N.jsx)(D.Z,{children:(0,N.jsx)(B.Z,{children:"You've recently signed in using the following methods, press any below to sign in instantly."})}),(0,N.jsx)(W.Z,{sx:{pt:0},children:i.map((function(e){var r=(0,C.UU)(e),a=r.LogoSvg,o=r.name,i=(0,r.getProvider)();return(0,N.jsxs)(G.ZP,{button:!0,onClick:function(){return n(i)},children:[(0,N.jsx)(O.Z,{children:(0,N.jsx)(H.Z,{sx:{backgroundColor:t.palette.customGrey[100]},children:(0,N.jsx)(a,{width:32,height:32})})}),(0,N.jsx)(z.Z,{primary:(0,x.capitalize)(o)})]},"recent-login-".concat(e))}))})]})}var q=r(35587),Y=r(36504),V=r(69616),X=r(55337),Q=r(14640),$=r(26581),K=r(12661),J=r(47765),ee=r(83021),te=r(71992),re=r(43752);var ne=r(24828),ae=r(45866),oe="redirect_idp";function ie(){var e,t=(0,w.TH)(),r=(0,Z.useRef)(t.search),s=(0,Z.useState)({}),U=(0,i.Z)(s,2),L=U[0],F=U[1],D=(0,Z.useState)({}),B=(0,i.Z)(D,2),W=B[0],G=B[1],O=(0,Z.useState)(!1),H=(0,i.Z)(O,2),z=H[0],ie=H[1],se=(0,ne.Z)(),ue=se.attemptCustomTokenLogin,ce=se.attemptRedirect,le=se.mutation,de=se.results,pe=(0,Z.useRef)(le),fe=(0,Z.useRef)(ce),he=(0,c.t)(P.uRL),ve=(0,i.Z)(he,1)[0],ge=(0,Z.useRef)(localStorage.getItem(oe)||""),me=(0,Z.useRef)(!1),xe=(0,Z.useState)(!1),be=(0,i.Z)(xe,2),Ze=be[0],we=be[1],ke=(0,Z.useState)([]),ye=(0,i.Z)(ke,2),Ie=ye[0],Se=ye[1],Ee=(0,Z.useState)(!1),Ce=(0,i.Z)(Ee,2),Te=Ce[0],je=Ce[1],Pe=(0,Z.useState)(!1),Ae=(0,i.Z)(Pe,2),_e=Ae[0],Re=Ae[1],Ue=(0,Z.useRef)(""),Le=(0,Z.useRef)(""),Fe=(0,Z.useState)(!1),De=(0,i.Z)(Fe,2),Be=De[0],We=De[1],Ge=(0,Z.useState)(Boolean(localStorage.getItem(oe))),Oe=(0,i.Z)(Ge,2),He=Oe[0],ze=Oe[1],Ne=(0,m.$C)((0,v.Mq)()),Me=(0,te.Z)().init,qe=(0,Z.useRef)(Me),Ye=function(e){var t=(0,re.r)((0,v.Mq)()),r=(0,re.g4)(t,e),n=window.performance,a=(0,h.useFlag)("isFirebaseTracingEnabled");return{mark:startTracing:function(){a&&r.start()},stopTracing:}("LOGIN_TRACE"),Ve=Ye.mark,Xe=Ye.startTracing,Qe=Ye.stopTracing,$e={isFirebaseAppleIdpEnabled:(0,h.useFlag)("isFirebaseAppleIdpEnabled"),isFirebaseGoogleIdpEnabled:(0,h.useFlag)("isFirebaseGoogleIdpEnabled"),isFirebaseFacebookIdpEnabled:(0,h.useFlag)("isFirebaseFacebookIdpEnabled"),isFirebaseMicrosoftIdpEnabled:(0,h.useFlag)("isFirebaseMicrosoftIdpEnabled"),isFirebasePaypalIdpEnabled:(0,h.useFlag)("isFirebasePaypalIdpEnabled")},Ke=(0,x.filter)($e,(),Je=(0,h.useFlag)("isFirebaseSsoEnabled")&&Ke.length>0,et=tt=function(){var e=(0,o.Z)(u().mark((function e(t,r){var n,o,i,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>2&&void 0!==c[2]?c[2]:"general",o=(0,x.intersection)(t,C.Wj),i=o.filter((function(e){var t=(0,C.UU)(e).featureFlagName;return $e[t]})),s=(0,x.difference)(i,Ie).length>0,!(Je&&i.length>0)){e.next=9;break}if(s&&Se(i),me.current){e.next=9;break}return et(),e.abrupt("return",!0);case 9:return G((0,a.Z)({},n,r)),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return (),rt=function(){var e=(0,o.Z)(u().mark((function e(t){var r,n,a,o,i,s,c,l,d,p=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]&&p[1],n=t.code,a=t.message,o=(0,C.UU)(ge.current).getProvider(),i=(0,C.UU)(o.providerId).name,!a.toLowerCase().includes("user is not active, please contact support")){e.next=8;break}return G({general:"User is not active, please contact support."}),e.abrupt("return");case 8:if(!a.includes("account-exists-with-different-credential")){e.next=28;break}if(!(c=null===(s=t.customData)||void 0===s?void 0:s.email)){e.next=26;break}if(l=c?" (".concat(c,")"):"",a="An account exists with this email".concat(l,". You can enable single click sign on with ").concat(i," under your account settings."),!r){e.next=26;break}return d=[],e.prev=15,e.next=18,(0,g.Nr)((0,g.v0)(),String(c));case 18:d=e.sent,e.next=24;break;case 21:e.prev=21,e.t0=e.catch(15),A.Z.error(e.t0);case 24:return e.next=26,tt(d,a);case 26:e.next=33;break;case 28:if("The user with the provided uid already exists."===a&&(a="An account exists with the same email, but a different identity provider. If you are having trouble accessing your account, try resetting your password. You can link your          ".concat((0,x.capitalize)(i)," account in your settings.")),"auth/user-cancelled"===n&&(a="Please try again and grant the requested permissions to continue."),"auth/popup-closed-by-user"!==n&&"auth/cancelled-popup-request"!==n){e.next=32;break}return e.abrupt("return");case 32:G({general:a});case 33:A.Z.error({code:n,error:t,userFacingErrorMessage:a});case 34:case"end":return e.stop()}}),e,null,[[15,21]])})));return function(t){return e.apply(this,arguments)}}(),nt=(0,Z.useRef)(rt),at=function(){var e=(0,o.Z)(u().mark((function e(){var t,r,n,a,o,i,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,L.enterEmail){e.next=3;break}throw new l.ZR("auth/missing-email","You must enter your email to continue");case 3:return je(!0),t=(0,m.V1)(Ne,"firebaseAddEmail"),e.next=7,t({email:L.enterEmail,idToken:Le.current});case 7:if(r=e.sent,n=r.data,a=n.error,o=n.firebaseToken,!a){e.next=12;break}throw a;case 12:(0,g._p)((0,g.v0)(),o),e.next=28;break;case 15:e.prev=15,e.t0=e.catch(0),je(!1),i=e.t0,e.t1=i.code,e.next="auth/email-taken"===e.t1?22:"auth/email-format"===e.t1?24:26;break;case 22:return s="An account with this email address already exists.",e.abrupt("break",27);case 24:return s="Invalid email format.",e.abrupt("break",27);case 26:s="There was an error setting your email address. If this issue persists, please reload the page and try again.";case 27:G({enterEmail:s});case 28:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=(0,o.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xe(),Ve("handleProvider"),We(!0),ge.current=t.providerId,Ve("handleProvider#".concat(t.providerId)),t.providerId!==T.Z.PROVIDER_ID){e.next=12;break}return Ve("handleProvider#apple"),e.next=9,AppleID.auth.signIn().catch((function(){return We(!1)}));case 9:return(r=e.sent)&&r.authorization&&(n=(new T.Z).credential({idToken:r.authorization.id_token}),(0,g.sB)((0,g.v0)(),n)),e.abrupt("return");case 12:if(!b.isMobile){e.next=16;break}return window.localStorage.setItem(oe,t.providerId),(0,g.F6)((0,g.v0)(),t),e.abrupt("return");case 16:ge.current=t.providerId,(0,g.rh)((0,g.v0)(),t);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=(0,o.Z)(u().mark((function e(t){var r,n,o,i,s,c,l,d,p,f,h,v,x;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xe(),Ve("handleFirebaseLogin"),null===t||void 0===t||t.preventDefault(),r=L.username,n=L.password,e.prev=4,r){e.next=7;break}throw new j.Z("Username is required","username");case 7:if(n){e.next=9;break}throw new j.Z("Password is required","password");case 9:return Ve("handleFirebaseLogin#attempting"),We(!0),Ve("handleFirebaseLogin#addMessage"),o=(0,m.V1)(Ne,"firebaseAuth"),e.next=15,o({identifier:r,password:n});case 15:if(i=e.sent,s=i.data,c=s.error,l=s.firebaseToken,!c){e.next=20;break}throw c;case 20:Ve("handleFirebaseLogin#signInWithCustomToken"),(0,g._p)((0,g.v0)(),l),e.next=45;break;case 24:e.prev=24,e.t0=e.catch(4),Ve("handleFirebaseLogin#catch",e.t0),Qe(),We(!1),f=e.t0,h=e.t0,v=null!==(d=h.message)&&void 0!==d?d:"Login attempt failed",x=(null===(p=h.customData)||void 0===p?void 0:p.userProviderIds)||[],e.t1=f.code,e.next="auth/too-many-requests"===e.t1?36:"auth/login"===e.t1?38:"RequiredParameterException"===e.t1?41:43;break;case 36:return G({general:'Too many failed login attempts. Use "Forgot Password?" or try again later.'}),e.abrupt("break",44);case 38:return tt(x,v="Invalid email/username or password","general"),e.abrupt("break",44);case 41:return G((0,a.Z)({},f.parameterName,f.message)),e.abrupt("break",44);case 43:G({general:v||"There was an error signing in"});case 44:A.Z.error(e.t0);case 45:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t){return e.apply(this,arguments)}}();(0,k.Z)((function(){var e=(0,g.v0)().onAuthStateChanged(function(){var e=(0,o.Z)(u().mark((function e(t){var n,a,o,i,s,c,l,d,p,f,h,v,m,b,Z,w,k,y,I,S;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!de.loading&&!de.data){e.next=2;break}return e.abrupt("return");case 2:if(t){e.next=4;break}return e.abrupt("return");case 4:if(n=(0,C.UU)(t.providerId),e.prev=5,Ve("useEffect#userStatusCheck"),!n||!t.email){e.next=15;break}return e.next=10,ve();case 10:if(c=e.sent,null!==(l=null===(s=c.data)||void 0===s?void 0:s.userStateStatus)&&void 0!==l&&l.kafka||null===l||void 0===l||!l.firebase){e.next=15;break}return window.location.href="/auth/no-account-idp/",e.abrupt("return");case 15:return Ve("useEffect#getIdToken"),e.next=18,t.getIdToken();case 18:if(d=e.sent,p={token:d},t.email){e.next=25;break}return Ue.current=ge.current,Le.current=d,Re(!0),e.abrupt("return");case 25:return Ve("useEffect#mutation"),e.next=28,(0,g.ag)(t);case 28:if(f=e.sent,h=new URLSearchParams(r.current),v=Boolean(null===f||void 0===f||null===(a=f.claims)||void 0===a?void 0:a.isConverted),m=Boolean(null===f||void 0===f||null===(o=f.claims)||void 0===o?void 0:o.isGroupUser),b=null!==(i=h.get("invitationId"))&&void 0!==i?i:localStorage.getItem("_pb_invitationId"),!(Z=h.get("confirmationId"))){e.next=37;break}return window.location.href="/confirm/".concat(Z),e.abrupt("return");case 37:if(!v&&!b){e.next=41;break}return e.next=40,fe.current();case 40:return e.abrupt("return");case 41:if(!m){e.next=47;break}return e.next=44,fe.current();case 44:if(!e.sent){e.next=47;break}return e.abrupt("return");case 47:return e.next=49,pe.current({variables:p});case 49:if(w=e.sent,k=w.errors,(0,x.isEmpty)(k)){e.next=53;break}throw new Error("Login attempt failed");case 53:Ve("useEffect#success"),e.next=72;break;case 56:if(e.prev=56,e.t0=e.catch(5),Ve("useEffect#catch",e.t0),Qe(),A.Z.error(e.t0),localStorage.setItem(oe,""),ze(!1),!(0,x.has)(e.t0,"graphQLErrors")){e.next=69;break}return y=e.t0,A.Z.error(y),I=(0,x.merge)(y.clientErrors[0]||y.graphQLErrors[0],{code:"apollo-error"}),nt.current(I,!0),e.abrupt("return");case 69:S=e.t0,nt.current(S,!0),de.reset();case 72:case"end":return e.stop()}}),e,null,[[5,56]])})));return function(t){return e.apply(this,arguments)}}());return )),(0,k.Z)(ue),(0,k.Z)((function(){var e=new URLSearchParams(r.current),t="apple"===e.get("provider"),n=e.get("id_token");if(n&&t){Xe(),Ve("useEffect#appleAuthCredential");var a=(new T.Z).credential({idToken:n});Ve("useEffect#appleSignInWithCredential"),(0,g.sB)((0,g.v0)(),a).then(().catch((function(e){Ve("useEffect#appleError",e),A.Z.error(e)}))}})),(0,k.Z)((function(){if(b.isMobile){var e=window.navigator.userAgent.toLowerCase();b.isIOS&&!e.includes("safari")&&G({general:"You are not accessing Photobucket through a secure browser. Please copy the link you were sent and paste it into your Safari or Chrome browser."}),b.isAndroid&&e.includes("wv")&&G({general:"You are not accessing Photobucket through a secure browser. Please copy the link you were sent and paste it into your Safari or Chrome browser."})}})),(0,Z.useEffect)((,[]),(0,Z.useEffect)((function(){var e=localStorage.getItem(oe);e&&(0,g.cx)((0,g.v0)()).then(function(){var t=(0,o.Z)(u().mark((function t(r){var n,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A.Z.info({result:r}),r){t.next=5;break}throw n="No results from redirect login.",(0,l.G6)()&&(a=(0,x.capitalize)((0,C.UU)(e).name),n="Safari Detected: There are some known issues with Safari blocking social logins. You can try signing in using ".concat(a," again, or use your username and password.")),new Error(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){if(A.Z.error(e),localStorage.setItem(oe,""),ze(!1),(0,x.has)(e,"graphQLErrors")){var t=e;A.Z.error(t);var r=(0,x.merge)(t.clientErrors[0]||t.graphQLErrors[0],{code:"apollo-error"});nt.current(r,!0)}else{var n=e;nt.current(n,!0)}})).finally(()}),[]);var st=function(e){var t=(0,n.Z)({},L),r=e.target.name;t[r]=e.target.value,F(t);var a=(0,n.Z)({},W);delete a[r],delete a.general,G(a)};return He?(0,N.jsxs)(_.Z,{children:[(0,N.jsx)(ee.Z,{}),(0,N.jsx)(f.Z,{variant:"h4",sx:{mt:3},children:"Attempting to Login"}),(0,N.jsx)(d.Z,{sx:{mt:2}})]}):(0,N.jsxs)(_.Z,{onSubmit:it,children:[(0,N.jsx)(ae.Z,{}),(0,N.jsx)(M,{isOpen:Ze,handleProvider:ot,handleClose:function(){return we(!1)},userLoginProviderIds:Ie}),(0,N.jsx)(R.Z,{error:W.enterEmail||"",loading:Te,open:_e,email:L.enterEmail||"",attemptEmailChange:at,handleClose:handleChange:st,providerName:(null===(e=(0,C.UU)(Ue.current))||void 0===e?void 0:e.name)||""}),(0,N.jsx)(y.Z,{title:"Login"}),(0,N.jsx)(Q.Z,{style:{marginBottom:"12px"},children:"Sign in"}),Je&&(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(q.j,{children:C.Wj.map((function(e){var t=(0,C.UU)(e),r=t.featureFlagName,n=(0,t.getProvider)(),a="sso-login-".concat(n.providerId);return!1===$e[r]?null:(0,N.jsx)(q.Z,{action:"Sign in with",disabled:Be,providerId:e,handleProvider:,a)}))})}),(0,N.jsx)(Y.uI,{title:"Error logging in",body:W.general}),(0,N.jsx)(S.Z,{sx:{mt:"18px"},htmlFor:"username",children:"Email/Username"}),(0,N.jsx)(E.Z,{autoFocus:!0,id:"username","data-test":"username",disabled:Be,error:Boolean(W.username),fullWidth:!0,helperText:W.username,name:"username",margin:"dense",onChange:st,placeholder:"Enter a username",required:!0,type:"text",InputLabelProps:{shrink:!0}}),(0,N.jsx)(S.Z,{htmlFor:"password",children:"Password"}),(0,N.jsx)(E.Z,{id:"password","data-test":"password",disabled:Be,error:Boolean(W.password),fullWidth:!0,helperText:W.password,name:"password","data-sr-redact":!0,margin:"dense",onChange:st,required:!0,type:z?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:(0,N.jsx)(I.Z,{showPassword:z,handleClickShowPassword:)},placeholder:""}),(0,N.jsx)(V.Z,{type:"submit","data-test":"submit",color:"primary",fullWidth:!0,variant:"contained",disabled:Be||de.loading,children:"Sign In"}),(0,N.jsx)(X.Z,{variant:"fullWidth",orientation:"horizontal",flexItem:!0,style:{margin:"0px 0px 12px 0px"},children:"OR"}),(0,N.jsxs)($.Z,{sx:{fontSize:"18px"},children:["Don't have a sign in?"," ",(0,N.jsx)(J.Z,{"data-test":"create-account-button",to:"/auth/register".concat(t.search),children:"Sign Up"})]}),(0,N.jsx)($.Z,{children:(0,N.jsx)(J.Z,{style:{fontWeight:400},"data-test":"forgot-password-button",to:"/auth/forgot-password".concat(t.search),children:"Forgot Password?"})}),(0,N.jsxs)(K.Z,{sx:{fontSize:"16px"},children:["This site is protected by reCAPTCHA and the Google"," ",(0,N.jsx)(p.Z,{style:{color:"#1C47CB"},href:"https://policies.google.com/privacy",underline:"always","data-test":"google-privacy",children:"Privacy Policy"})," ","and"," ",(0,N.jsx)(p.Z,{style:{color:"#1C47CB"},href:"https://policies.google.com/terms",underline:"always","data-test":"google-terms-of-service",children:"Terms of Service"})," ","apply."]})]})}},6007:function(e,t,r){var n=r(4942),a=r(17592);t.Z=(0,a.ZP)("form")((function(e){var t=e.theme;return(0,n.Z)({fontFamily:'"Outfit", Arial, sans-serif',width:"100%",backgroundColor:"white",padding:"20px"},t.breakpoints.not("xs"),{border:"1px solid #DFE1E7",borderRadius:"6px",padding:"40px 75px",marginTop:"46px",width:"635px",right:2,top:0})}))},51980:function(e,t,r){r.d(t,{Z:function(){return v}});var n=r(66149),a=r(33604),o=r(96467),i=r(97762),s=r(61113),u=r(85281),c=r(16783),l=r(4117),d=r(24193),p=r(51767),f=r(16031),h=r(46417);function v(e){var t=e.attemptEmailChange,r=e.email,v=e.error,g=e.loading,m=e.open,x=e.handleChange,b=e.handleClose,Z=e.providerName;return(0,p.useFlag)("isFirebaseSsoEnabled")?null:(0,h.jsxs)(n.Z,{open:m,onClose:b,children:[(0,h.jsx)(a.Z,{children:"Enter your email"}),(0,h.jsxs)(o.Z,{children:[(0,h.jsxs)(i.Z,{children:["Enter your email to continue signing in with your ",(0,f.capitalize)(Z)," account."]}),g&&(0,h.jsx)(s.Z,{textAlign:"center",children:(0,h.jsx)(u.Z,{})}),!g&&(0,h.jsx)(c.Z,{id:"enterEmail",name:"enterEmail",autoFocus:!0,error:Boolean(v),helperText:v,margin:"dense",label:"Email Address",type:"email",fullWidth:!0,variant:"standard",value:r,onChange:x})]}),(0,h.jsx)(l.Z,{children:(0,h.jsx)(d.Z,{disabled:g,onClick:t,children:"Continue"})})]})}},45866:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(72668),a=r(17592),o=r(19860),i=r(24813),s=r(61113),u=r(19536),c=r(58467),l=r(28297),d=r(28422),p=r(14640),f=r(47765),h=r(46417),v=(0,a.ZP)("div")({paddingTop:"48px",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",fontFamily:'"Outfit", Arial, sans-serif'});function g(){var e,t,r=(0,o.Z)(),a=(0,i.Z)(r.breakpoints.down("sm")),g=(0,c.TH)(),m=new URLSearchParams(g.search).get("invitationId"),x=null===(e=(0,n.a)(d.QUC,{variables:{invitationId:m},skip:!m}).data)||void 0===e||null===(t=e.bucketInvitation)||void 0===t?void 0:t.bucketTitle;return m?(0,h.jsxs)(v,{children:[(0,h.jsx)("img",{style:{position:a?void 0:"absolute",top:a?void 0:"-80px",width:"120px",marginBottom:a?"20px":"40px",border:"1px solid #dfdfdf",borderRadius:"200px"},src:"".concat(l.ZP.assets.url,"/img/group-bucket/create-bucket.png"),alt:"Invitation Icon"}),(0,h.jsx)(s.Z,{sx:{textAlign:"center"},children:"Accept the invitation to join"}),(0,h.jsx)(p.Z,{sx:{textAlign:"center"},style:{marginTop:"12px",marginBottom:"12px"},children:x}),(0,h.jsxs)(s.Z,{sx:{textAlign:"center"},children:["by signing in with an existing login below. If you don't have an existing login,",(0,h.jsxs)(f.Z,{"data-test":"create-account-button",to:"/auth/register".concat(g.search),style:{fontWeight:"normal"},children:[" ","create a new one for free"]}),"."]}),(0,h.jsx)(u.Z,{sx:{width:"100%",my:2}})]}):null}},35587:function(e,t,r){r.d(t,{Z:function(){return d},j:function(){return c}});var n=r(17592),a=r(24193),o=r(61113),i=r(16031),s=r(92455),u=r(46417),c=(0,n.ZP)("div")({fontFamily:'"Outfit", Arial, sans-serif',display:"flex",flexDirection:"column",flex:0,flexWrap:"wrap",justifyContent:"center",alignItems:"center"}),l=(0,n.ZP)(a.Z)((function(e){return{marginTop:0,marginBottom:"10px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)",alignItems:"center",color:e.theme.palette.customGrey[700],border:"1px solid #D0D5DD",borderRadius:"8px",flexShrink:"0",flexGrow:"0",textTransform:"none"}}));function d(e){var t=e.action,r=e.disabled,n=e.providerId,a=e.handleProvider,c=(0,s.UU)(n),d=c.LogoSvg,p=c.name;return(0,u.jsx)(l,{disabled:r,fullWidth:!0,sx:{padding:0,textAlign:"center",display:"block"},onClick:a,children:(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,u.jsx)(d,{width:32,height:32}),(0,u.jsx)(o.Z,{sx:{ml:"6px",fontWeight:500},children:"".concat(t," ").concat((0,i.capitalize)(p))})]})})}},36504:function(e,t,r){r.d(t,{CX:function(){return p},kn:function(){return f},uI:function(){return d}});var n=r(99881),a=r(33249),o=r(4906),i=r(46417),s=(0,o.Z)(n.Z)((function(e){var t=e.theme;return{backgroundColor:t.palette.customError[50],borderColor:t.palette.customError[500],borderRadius:"5px",borderWidth:"2px",color:t.palette.customGrey[800],textAlign:"left"}})),u=(0,o.Z)(n.Z)((function(e){var t=e.theme;return{backgroundColor:t.palette.brand[50],borderColor:t.palette.brand[500],borderRadius:"5px",borderWidth:"2px",color:t.palette.customGrey[800],textAlign:"left"}})),c=(0,o.Z)(n.Z)((function(e){var t=e.theme;return{backgroundColor:t.palette.customSuccess[50],borderColor:t.palette.customSuccess[500],borderRadius:"5px",borderWidth:"2px",color:t.palette.customGrey[800],textAlign:"left"}})),l=(0,o.Z)(a.Z)((function(e){return{color:e.theme.palette.customGrey[700],fontSize:"14px",fontStyle:"normal",fontWeight:600,lineHeight:"20px",fontFamily:'"Outfit", Arial, sans-serif',width:"100%"}}));function d(e){var t=e.body,r=e.title;return t?(0,i.jsxs)(s,{variant:"outlined",severity:"error",sx:{my:2},children:[(0,i.jsx)(l,{children:r}),t]}):null}function p(e){var t=e.body,r=e.title;return t?(0,i.jsxs)(c,{variant:"outlined",severity:"success",sx:{my:2},children:[(0,i.jsx)(l,{children:r}),t]}):null}function f(e){var t=e.body,r=e.title;return t?(0,i.jsxs)(u,{variant:"outlined",severity:"info",sx:{my:2},children:[(0,i.jsx)(l,{children:r}),t]}):null}var h={body:""};d.defaultProps=h,p.defaultProps=h,f.defaultProps=h},69616:function(e,t,r){var n=r(24193),a=r(4906);t.Z=(0,a.Z)(n.Z)((function(e){var t=e.theme;return{boxShadow:"0px 1px 4px rgba(16, 24, 40, 0.25)",background:"linear-gradient(180deg, #202CD3 5.3%, #02E39F 102.34%)",color:t.palette.primary.contrastText,fontWeight:500,fontSize:"1.125rem",lineHeight:"20px",textTransform:"none",borderRadius:"40px",padding:"12px 16px",marginTop:0,marginBottom:"32px","&:hover":{background:"linear-gradient(180deg, #202CD3 5.3%, #02E39F 140.34%)",boxShadow:"none"},"&:focus, &:active":{color:t.palette.primary.contrastText},"&:disabled":{opacity:.4,color:t.palette.primary.contrastText}}}))},55337:function(e,t,r){var n=r(19536),a=r(4906);t.Z=(0,a.Z)(n.Z)((function(e){return{color:e.theme.palette.customGrey[500],fontFamily:'"Outfit", Arial, sans-serif',fontStyle:"normal",fontWeight:400,fontSize:"14px",lineHeight:"20px",margin:"24px 0px 32px 0px"}}))},14640:function(e,t,r){var n=r(61113),a=r(4906);t.Z=(0,a.Z)(n.Z)((function(e){return{color:e.theme.palette.customGrey[900],letterSpacing:"-.02em",fontSize:"36px",fontWeight:600,lineHeight:"44px",marginBottom:"32px"}}))},26581:function(e,t,r){var n=r(61113),a=r(4906);t.Z=(0,a.Z)(n.Z)((function(e){return{color:e.theme.palette.customGrey[700],fontStyle:"normal",fontWeight:400,fontSize:"18px",lineHeight:"20px"}}))},12661:function(e,t,r){var n=r(61113),a=r(4906);t.Z=(0,a.Z)(n.Z)((function(e){return{color:e.theme.palette.customGrey[700],marginTop:"20px",fontFamily:'"Outfit", Arial, sans-serif',fontStyle:"normal",fontWeight:400,fontSize:"16px",lineHeight:"20px"}}))},47765:function(e,t,r){var n=r(4906),a=r(2135);t.Z=(0,n.Z)(a.rU)(()},83021:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(24813),a=r(20201),o=r(2493),i=r(46417);function s(){var e=(0,a.Z)();return(0,n.Z)(e.breakpoints.only("xs"))?null:(0,i.jsx)(o.Z,{width:"200px"})}},71992:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(19655),a=r(92455),o=r(25258);function i(){return{init:function(e){var t,r;document.addEventListener("AppleIDSignInOnFailure",(function(e){o.Z.error({event:e})}));var i=null===(t=(0,n.v0)())||void 0===t||null===(r=t.currentUser)||void 0===r?void 0:r.uid,s=(0,a.$Y)({component:e,uid:i});window.AppleID.auth.init(s),window.AppleID.auth.renderButton()}}}},24828:function(e,t,r){r.d(t,{Z:);var n=r(1413),a=r(15861),o=r(29439),i=r(64687),s=r.n(i),u=r(90297),c=r(60790),l=r(96420),d=r(44766),p=r(51767),f=r(19655),h=r(47313),v=r(58467),g=r(20004),m=r(41863),x=r(28297),b=r(28422),Z=r(91345),w=r(25258),k="redirect_idp";function y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,m.z$)(),r=t.user,i=t.identify,y=(0,u.l)(Z.YR),I=(0,c.D)(b.Xmd),S=(0,o.Z)(I,1),E=S[0],C=(0,l.t)(b.QTU),T=(0,o.Z)(C,1),j=T[0],P=(0,l.t)(b.r0b,{nextFetchPolicy:"cache-and-network"}),A=(0,o.Z)(P,1),_=A[0],R=(0,v.TH)(),U=new URLSearchParams(R.search),L=U.get("client_id"),F=(0,p.useUnleashContext)(),D=(0,h.useRef)(F),B=U.get("custom_token"),W=U.get("returnUrl");function G(){!(0,f.v0)().currentUser&&B&&(0,f._p)((0,f.v0)(),B).catch(w.Z.error)}var O=function(){var e=(0,a.Z)(s().mark((function e(){var t,r,n,o,i,u,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null!==(t=(0,f.v0)().currentUser)&&void 0!==t?t:{},n=r.uid){e.next=3;break}throw new d.ZR("auth/unauthenticated","Failed to fetch buckets. Unauthenticated.");case 3:return o=i=function(){var e=(0,a.Z)(s().mark((function e(t){var r,n,a,o,i,u,c,l,p,h,v,g,m,x,Z,y,I,S,E,C,T,j;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==t&&void 0!==t&&t.bucketsByUserId){e.next=3;break}throw new d.ZR("auth/failed-to-fetch","Failed to fetch buckets for this user.");case 3:if(localStorage.removeItem(k),u=localStorage.getItem("_pb_invitationId"),c=localStorage.getItem("_pb_transferId"),!u){e.next=11;break}return localStorage.removeItem("_pb_bucketId"),localStorage.removeItem("_pb_invitationId"),window.location.href="/invite/".concat(u),e.abrupt("return",!0);case 11:if(!c){e.next=16;break}return localStorage.removeItem("_pb_bucketId"),localStorage.removeItem("_pb_transferId"),window.location.href="/transfer/".concat(c),e.abrupt("return",!0);case 16:return e.next=18,_();case 18:if(l=e.sent,(p=null===(r=l.data)||void 0===r||null===(n=r.userProfile)||void 0===n?void 0:n.currentBucketId)!==(null===(a=(0,f.v0)().currentUser)||void 0===a?void 0:a.uid)){e.next=22;break}return e.abrupt("return",!1);case 22:if((h=Boolean(null===(o=t.bucketsByUserId)||void 0===o?void 0:o.items.find(()))||(w.Z.info("User was removed from their last used bucket. id: ".concat(p)),p=void 0),p&&h||(y=null===(v=t.bucketsByUserId)||void 0===v||null===(g=v.items)||void 0===g?void 0:g.find((function(e){return(null===e||void 0===e?void 0:e.bucketType)===b.alV.Mybucket})),I=null===(m=t.bucketsByUserId)||void 0===m||null===(x=m.items)||void 0===x?void 0:x.find((),p=null!==(Z=null===y||void 0===y?void 0:y.id)&&void 0!==Z?Z:null===I||void 0===I?void 0:I.id),!p){e.next=28;break}return window.location.href="/bucket/".concat(p),e.abrupt("return",!0);case 28:return e.next=30,null===(i=(0,f.v0)().currentUser)||void 0===i?void 0:i.getIdTokenResult();case 30:if(S=e.sent,!Boolean(null===S||void 0===S?void 0:S.claims.isConverted)){e.next=36;break}return(null===(E=l.data)||void 0===E||null===(C=E.userProfile)||void 0===C||null===(T=C.subscription)||void 0===T||null===(j=T.subscription)||void 0===j?void 0:j.status)===b.yhH.Active?window.location.href="/bucket/create":window.location.href="/buckets",e.abrupt("return",!0);case 36:return e.abrupt("return",!1);case 39:return e.prev=39,e.t0=e.catch(0),w.Z.error({err:e.t0}),e.abrupt("return",!1);case 43:case"end":return e.stop()}}),e,null,[[0,39]])})));return (),u={userId:n},e.next=8,j({onError:o,variables:u});case 8:return c=e.sent,e.next=11,i(c.data);case 11:return l=e.sent,e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})));return ();unction z(){return(z=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E({onCompleted:O,variables:{data:{},isConverted:!0}}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}unction M(){return(M=(0,a.Z)(s().mark((function t(r){var a,o,i,u,c,l,d,p,h,v,m,Z,w,k,I,S,E,C,T,j,P,A,U;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!L){t.next=5;break}return(new g.Z).set("facebook_dtp",!0,(0,n.Z)((0,n.Z)({},x.ZP.cookieOptions),{},{maxAge:86400})),window.location.href="/auth/verify".concat(R.search),t.abrupt("return");case 5:return h=r.subscription,v=null===h||void 0===h||null===(a=h.plan)||void 0===a?void 0:a.planId,m=(null===h||void 0===h?void 0:h.totalUserUsedSpace)||0,Z=null!==(o=null===h||void 0===h||null===(i=h.plan)||void 0===i?void 0:i.maxSpace)&&void 0!==o?o:1/0,w=(null===h||void 0===h?void 0:h.totalImagesCount)||0,k=null!==(u=null===h||void 0===h||null===(c=h.plan)||void 0===c?void 0:c.maxImagesCount)&&void 0!==u?u:1/0,S=w>=k,E=(I=m>=Z)||S,C=new URLSearchParams({planId:v,login:"true"}).toString(),E&&(T={login:"true",overcount:S.toString(),overspace:I.toString(),overstorage:E.toString(),planId:v},C=new URLSearchParams(T).toString()),j="",P=localStorage.getItem("_pb_invitationId"),A=localStorage.getItem("_pb_transferId"),t.next=21,_();case 21:if(U=t.sent,(null===(l=U.data)||void 0===l||null===(d=l.userProfile)||void 0===d?void 0:d.currentBucketId)===(null===(p=(0,f.v0)().currentUser)||void 0===p?void 0:p.uid)){t.next=25;break}return t.next=25,O();case 25:if(localStorage.setItem("_pb_userData:username",r.username),!W){t.next=30;break}j=W,t.next=43;break;case 30:if(!A){t.next=36;break}return localStorage.removeItem("_pb_transferId"),window.location.href="/transfer/".concat(A),t.abrupt("return");case 36:if(!P){t.next=42;break}return localStorage.removeItem("_pb_invitationId"),window.location.href="/invite/".concat(P),t.abrupt("return");case 42:j=y?"/u/".concat(r.username,"?").concat(C):h.subscriptionStatus===b.NB9.Expired?"https://my.photobucket.com/expired":h.subscriptionStatus===b.NB9.Predeactivated?"https://my.photobucket.com/predeactivation":h.subscriptionStatus===b.NB9.Pending?"https://my.photobucket.com/complete-trial-signup":h.subscriptionStatus===b.NB9.Deactivated?"https://my.photobucket.com/lp/deactivation":e?"https://my.photobucket.com/trial-signup":("beginner"===v.split(/[\s-_]+/)[0].toLowerCase()||v.split(/[\s-_]+/)[0].toLowerCase(),"/u/".concat(r.username,"?").concat(C));case 43:window.location.href=j;case 44:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var q=(0,c.D)(b.lzh,{onError:w.Z.error,onCompleted:function(e){var t=e.userLogin,r=t.tokenType,n=t.token;r!==b.ivb.CustomAuthToken?(localStorage.setItem("redirect_idp",""),N(t)):(0,f.w7)((0,f.v0)()).then((function(){return(0,f._p)((0,f.v0)(),n)})).catch(()}}),Y=(0,o.Z)(q,2),V=Y[0],X=Y[1];return(0,h.useEffect)((function(){var e,t,o;if(null!==(e=X.data)&&void 0!==e&&e.userLogin){var u=X.data.userLogin;(new g.Z).set("app_auth",u.token,x.ZP.cookieOptions),r(u.username),i(u.username,(0,n.Z)({planId:null===(t=u.subscription)||void 0===t||null===(o=t.plan)||void 0===o?void 0:o.planId},x.ZP.app)),u.username)}function c(){return(c=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.current({userId:t,properties:{planId:u.subscription.plan.planId}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[L,R.search,X.data,r,i]),{attemptCustomTokenLogin:G,bucketRegister:H,attemptRedirect:O,mutation:V,results:X}}}}]);