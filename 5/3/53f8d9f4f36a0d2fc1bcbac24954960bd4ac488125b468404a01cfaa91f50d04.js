(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[2351],{10793:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});var n=r(76955),a=r(52377),o=r(5154),c=r.n(o),i=r(54285);class s extends n.PureComponent{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.handleInview=this.handleInview.bind(this),this.startListen=this.startListen.bind(this),this.stopListen=this.stopListen.bind(this),this.inviewTracked=!1,this.tapTracked=!1}static get defaultProps(){return{activate:["tap"],algorithmId:"",bloggerAmebaId:"",categories:[],categoryId:"",subCategoryId:"",children:null,contentId:"",disable:!1,displayPosition:"",entryId:"",orderId:"",pageId:"",sectionId:"",serviceId:"",tagName:"",tapLogger:c(),viewLogger:c()}}componentDidMount(){this.startListen()}componentDidUpdate(){this.startListen()}et params(){var{algorithmId:e,bloggerAmebaId:t,categoryId:r,subCategoryId:n,contentId:a,displayPosition:o,pageId:c,entryId:i,orderId:s,sectionId:l,serviceId:d,tagName:m}=this.props;return{algorithmId:e,bloggerAmebaId:t,categories:this.props.categories.filter((),categoryId:r,subCategoryId:n,contentId:a,displayPosition:o,pageId:c,entryId:i,orderId:s,sectionId:l,serviceId:d,tagName:m}}startListen(){-1===this.props.activate.indexOf("view")||this.inviewTracked||(s.intersectionListener||(s.intersectionListener=(0,i.T)({})),this.stopListen(),this.trigger=a.findDOMNode(this),this.trigger&&!this.unlisten&&(this.unlisten=s.intersectionListener.listen(this.trigger,(e=>{(e.isIntersecting||e.intersectionRatio>0)&&(this.stopListen(),this.handleInview())}))))}andleClick(e){var t=n.Children.only(this.props.children).props.onClick;t&&t(e),this.props.tapLogger(this.params)}ender(){if(this.props.disable)return this.props.children;var e=this.props.children;return-1!==this.props.activate.indexOf("tap")&&(e=n.cloneElement(e,{onClick:this.handleClick})),e}}s.displayName="Tracker"},40393:53162:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(40393),a=r(25524);,30279:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(66062),a=r(76955),o=r(66948),c=r(29466),i=r.n(c),s=r(55752),l=r.n(s),d=r(85819),m=r(51650),u=r(29842),p=r(70317),g=r(9263),y=r(78834),h=r(82123),f=r(72293);const b=function(e){var{limit:t,excludeReplies:r,useBloggerBlog:c=h.Z,useEntry:s=f.Z,useRouter:b=m.tv}=e,{match:v}=b(),{params:I}=v,{amebaId:_,entryId:O}=I,Z=(0,d.I)(),P=c(_),w=s(O),k=(0,o.v9)((e=>{var t=e.commentState,r=t.commentMap,n=t.commentPageMap||{};return{commentMap:r,commentPageMap:n,currentPageNum:n.currentPage,commentThreadMap:t.commentThreadMap}}),i()),M=(0,o.v9)((),{commentMap:T,commentPageMap:E,currentPageNum:j,commentThreadMap:S}=k,L=(0,a.useMemo)((()=>{if(!j)return[];for(var e=[],t=1;t<=j;t+=1){var r=l()(E,["".concat(O,"/").concat(t),"data"],[]);e.push(...r)}return e.map((e=>{var t=l()(S,[e,"commentIds"],[]).slice(0,2).map((e=>{var t=l()(T,[e,"comment_author"]);return{imageUrl:t?t.profile_image_url:void 0,nickname:t?t.nickname:void 0}}));return Object.assign(Object.assign({},T[e]),{reply_profiles:t})}))}),[T,E,S,j,O]),C=(()=>{if(!j)return{};var e=l()(E,["".concat(O,"/").concat(j)]),t=l()(e,["paging","max_page"]),r=j<t,n=!(0,u.R)(P,w),a="ameba_only"===l()(P,["deny_comment"],""),o=l()(e,["paging","total_count"]),c=a?M&&!n:!n,i=l()(E,["".concat(O,"/").concat(j+1)]);return{hasMore:r,denyComment:n,totalCount:o,showReplyLink:c,hasErrors:l()(i,["error"],!1),isLoading:l()(i,["loading"],!1)}})(),R=(0,a.useCallback)((0,n.Z)((function*(){if(C.hasMore){var e=j||0,n=yield Z((0,g.u1)({blogId:P.blog_id,entryId:O,excludeReplies:r,offset:e*t,limit:t,currentPage:e+1}));if(r){var a=l()(n,["payload","data","commentMap"],{});Z((0,y.G6)(P.blog_id,O,a))}}})),[P.blog_id,j,Z,O,r,t,C]);return{commentList:L,totalCount:C.totalCount,hasNoData:0===L.length,hasMore:C.hasMore||!1,hasErrors:C.hasErrors||!1,isLoading:C.isLoading||!1,denyComment:C.denyComment||!1,showReplyLink:C.showReplyLink||!1,fetchMore:R}}},85819:(e,t,r)=>{"use strict";r.d(t,{I:()=>a});var n=r(66948),a=,33811:(e,t,r)=>{"use strict";r.d(t,{uw:()=>Z,x0:()=>O});var n=r(41185),a=r(66062),o=r(18274),c=r(55752),i=r.n(c),s=r(5663),l=r.n(s),d=r(74890),m=r.n(d),u=r(62720),p=r(64123),g=r(11622),y=r(18966),h=r(41779);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}ar v=[u.Z.REBLOG,u.Z.HASH_TAG,u.Z.IMAGE,u.Z.VIDEO,u.Z.CLIPBLOG,u.Z.VOICE_BLOG,u.Z.PR,u.Z.AUTO_AD],I=_=(e,t,r)=>({type:y.V7,payload:{blogId:e,entryId:t,error:r},error:!0}),O=(0,o.H)((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return function(){var o=(0,a.Z)((function*(a,o,c){var{fetchr:s}=c,d=m()(v.concat(r)),u=i()(o(),["bloggerState","blogMap",e,"blog_name"],"");if(!u||!t)return null;var h=i()(o(),["entryState","entryMetaMap",t],null),f=i()(h,"pagingType",void 0),O=n===f,Z=i()(o(),["entryState","entryMap",t],null);if(h&&O&&Z&&(!l()(Z.entry_text)||404===Z.status_code))return null;try{a({type:y.Gh,payload:{blogId:e,entryId:t,fieldFilter:d,frm:n}});var P={amebaId:u,blogId:e,entryId:t,fieldFilter:d,frm:n},w=yield s.read(p.Z.BlogEntry).params(P).end(),k=w.data;if(!(!1!==o().deviceState.isEmojiSupported)&&k.entities&&k.entities.entryMap)try{k=b(b({},k),{},{entities:b(b({},k.entities),{},{entryMap:yield(0,g.R9)(k.entities.entryMap)})})}catch(M){console.warn(M),k=w.data}return a(I(e,t,k,n))}catch(T){return a(_(e,t,T))}}));return function(e,t,r){return o.apply(this,arguments)}}()})),Z=(0,o.H)(((e,t)=>function(){var r=(0,a.Z)((function*(r,n){var a=i()(n(),["bloggerState","blogMap",e,"blog_name"],"");if(!a||!t)return null;var o=i()(n(),["entryState","entryMap",t],null);if("amember"!==o.publish_flg||o&&(o.entry_text||404===o.statusCode))return null;try{r({type:y.tB,payload:{entryId:t}});var c={token:i()(n(),["amebloTokenState","amebloToken"],null),amebaId:a,entryId:parseInt(t,10)},s=yield(0,h.s)(c);return r(((t,s))}catch(l){return r(((e,t)=>({type:y.Ny,payload:{entryId:e,error:t},error:!0}))(t,l))}}));return ()))},78834:(e,t,r)=>{"use strict";r.d(t,{G6:()=>Z,Iv:()=>I,K1:()=>O,sE:()=>_,wW:()=>b});var n=r(41185),a=r(66062),o=r(18274),c=r(55752),i=r.n(c),s=r(5663),l=r.n(s),d=r(73614),m=r(2412),u=r(11622),p=r(64123),g=r(11312);nction f(e){return{type:g.GB,payload:{error:e},error:!0}}var b=(0,o.H)({ttl:200},((e,t,r)=>function(){var n=(0,a.Z)((function*(n,a,o){var{fetchr:c}=o,s=i()(a(),["commentState","commentMap",r]);if(s)return n(h(s));var g=i()(a(),["bloggerState","blogMap",e,"blog_name"]);try{var y=yield c.read(p.Z.BlogSingleComment).params({amebaId:g,blogId:e,entryId:t,commentId:r}).end(),{data:b}=y;if(l()(b))return n(f({message:"Not Found"}));if(!("comment_author"in b))if(b.comment_url){var[v]=(0,m.d)([b.comment_url]);yield n(d.Rs(v));var I=i()(a(),["bloggerState","bloggerMap",v,"profile"],{});b.comment_author=(0,m.E)(b,I)}else b.comment_author=(0,m.E)(b);if(b.image=i()(b,["comment_author","profile_image_url"],""),!(!1!==i()(a(),["deviceState","isEmojiSupported"])))try{var _={[r]:b},O=yield(0,u.t5)(_);Object.assign(b,O[r])}catch(Z){console.warn(Z)}return n(h(b))}catch(Z){return console.warn(Z),n(f(Z))}}));return function(e,t,r){return n.apply(this,arguments)}}()));function v(e,t){return{type:g.Xv,payload:{commentId:e,error:t},error:!0}}var I=(0,o.H)({ttl:200},((e,t,r,o,c)=>function(){var s=(0,a.Z)((function*(a,s,h){var{fetchr:f}=h,b=i()(s(),["bloggerState","blogMap",e,"blog_name"]);a({type:g.Q6,payload:{commentId:r}});try{var I=yield f.read(p.Z.BlogThreadComments).params({amebaId:b,blogId:e,entryId:t,commentId:r,offset:o,limit:c}).end(),{commentMap:_={}}=I.data;if(l()(_))return a(v({message:"Not Found"}));Object.values(_).filter((e=>!("comment_author"in e)&&!e.comment_url)).forEach((e=>{var{comment_id:t}=e;_[t].comment_author=(0,m.E)(e)}));var O=Object.values(_).filter((e=>!("comment_author"in e))).map((),Z=(0,m.d)(O);Z&&Z.length>0&&(yield Promise.all(Z.map(())),Object.values(_).filter(().forEach((e=>{var{comment_id:t,comment_url:r}=e,[n]=(0,m.d)([r]),a=i()(s(),["bloggerState","bloggerMap",n,"profile"],{});_[t].comment_author=(0,m.E)(e,a)})),Object.values(_).forEach((e=>{var{comment_id:t}=e;_[t].image=i()(_,[t,"comment_author","profile_image_url"])}));var P={},I.data);if(!(!1!==i()(s(),["deviceState","isEmojiSupported"]))&&_)try{P.commentMap=yield(0,u.t5)(_)}catch(w){console.warn(w),P.commentMap=I.data.commentMap}return a(r,P))}catch(w){return console.warn(w),a(v(r,w))}}));return function(e,t,r){return s.apply(this,arguments)}}())),_=(0,o.H)({ttl:200},((e,t,r)=>function(){var n=(0,a.Z)((function*(n,a,o){var{fetchr:c}=o,s=i()(a(),["commentState","commentMap",r]),d={type:g.HY,payload:{message:"Found"}};if(!l()(s))return d;var m=i()(a(),["bloggerState","blogMap",e,"blog_name"]);try{var u=yield c.read(p.Z.BlogSingleComment).params({amebaId:m,blogId:e,entryId:t,commentId:r}).end(),{data:y}=u;return l()(y)?{type:g.HY,payload:{message:"Not Found"}}:d}catch(h){return console.warn(h),{type:g.HY,payload:h,error:!0}}}));return function(e,t,r){return n.apply(this,arguments)}}())),O=(0,o.H)({ttl:200},((e,t,r)=>function(){var n=(0,a.Z)((function*(n,a,o){var{fetchr:c}=o,s=i()(a(),["bloggerState","blogMap",e,"blog_name"]);try{var d=yield c.read(p.Z.BlogThreadComments).params({amebaId:s,blogId:e,entryId:t,commentId:r}).end(),{commentMap:m={}}=d.data;return l()(m)?{type:g.G$,payload:{message:"Not Found"}}:{type:g.G$,payload:{message:"Found"}}}catch(u){return console.warn(u),{type:g.G$,payload:u,error:!0}}}));return ())),Z=(0,o.H)(((e,t,r)=>function(){var n=(0,a.Z)((function*(n){if(e&&t&&!l()(r)){var a=Object.keys(r).filter(();yield Promise.all(a.map(())}}));return ()))},57224:(e,t,r)=>{"use strict";r.d(t,{m:()=>p});var n,a,o,c=r(3e4),i=(r(91938),r(76955)),s=r(55382),l=r.n(s),d=r(45525),m=r(6362),u=r.n(m),p=(0,d.w1)(u())((o=a=class extends i.PureComponent{ender(){return(0,c.Z)("div",{className:this.props.className||u().Spinner},void 0,(0,c.Z)("div",{className:l()(u().Rect,u().Rect__Element1,this.props.barClass)}),(0,c.Z)("div",{className:l()(u().Rect,u().Rect__Element2,this.props.barClass)}),(0,c.Z)("div",{className:l()(u().Rect,u().Rect__Element3,this.props.barClass)}))}},a.displayName="ModuleLoader",n=o))||n},16884:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(75457),a=e=>{var{amebaId:t,entryId:r,vnm:n}=e;return t&&r?"/".concat(t,"/video-").concat(r,".html").concat(n?"?vnm=".concat(n):""):""};function o(e,t){var{amebaId:r,entryId:o,themeId:c,entryYm:i,imageId:s,vnm:l,day:d,page:m=1}=t,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.process.env.HTTP_PATH_AMEBLO;if(!r||!e)return"";var p="".concat(u,"/").concat(r),g="";switch(e){case n.Z.BlogTop:return g=m>1?"page-".concat(m,".html"):"","".concat(p,"/").concat(g);case n.Z.EntryList:return g=m>1?"-".concat(m):"","".concat(p,"/entrylist").concat(g,".html");case n.Z.AmemberEntryList:return g=m>1?"-".concat(m):"","".concat(p,"/amemberentrylist").concat(g,".html");case n.Z.ArchiveTop:return"".concat(p,"/archivetop.html");case n.Z.Archive:if(i)return g=m>1?"".concat(m):"","".concat(p,"/archive").concat(g,"-").concat(i,".html");console.error("PageType.Archive: entryYm is undefined.");break;case n.Z.Day:if(d)return g=m>1?"".concat(m):"","".concat(p,"/day").concat(g,"-").concat(d,".html");console.error("PageType.Day: day is undefined.");break;case n.Z.ThemeTop:return"".concat(p,"/themetop.html");case n.Z.Theme:if(c)return g=m>1?"".concat(m):"","".concat(p,"/theme").concat(g,"-").concat(c,".html");console.error("PageType.Theme: themeId is undefined.");break;case n.Z.PopularRecentList:return g=m>1?"-".concat(m):"","".concat(p,"/popularrecentlist").concat(g,".html");case n.Z.Entry:if(o)return g=m>1?"".concat(m):"","".concat(p,"/entry").concat(g,"-").concat(o,".html");console.error("PageType.Entry: entryId is undefined.");break;case n.Z.ImageList:return g=m>1?"-".concat(m):"",i?"".concat(p,"/imagelist-").concat(i).concat(g,".html"):"".concat(p,"/imagelist.html");case n.Z.Image:if(o&&s)return"".concat(p,"/image-").concat(o,"-").concat(s,".html");console.error("PageType.Image: entryId or imageId is undefined.");break;case n.Z.VideoList:return g=m>1?"-".concat(m):"","".concat(p,"/videolist").concat(g,".html");case n.Z.Video:if(o)return"".concat(u).concat(a({amebaId:r,entryId:o,vnm:l}));console.error("PageType.Video: entryId is undefined.");break;case n.Z.IineEntry:if(o)return"".concat(p,"/iine_entry-").concat(o,".html");console.error("PageType.IineEntry: entryId is undefined.");break;case n.Z.Comment:if(g=m>1?"page-".concat(m,".html"):"",o)return"".concat(p,"/comment-").concat(o,"/").concat(g);console.error("PageType.Comment: entryId is undefined.");break;case n.Z.Reblog:if(g=m>1?"page-".concat(m,".html"):"",o)return"".concat(p,"/reblog-").concat(o,"/").concat(g);console.error("PageType.Reblog: entryId is undefined.");break;case n.Z.MessageBoard:return"".concat(p,"/message-board.html");case n.Z.Reader:return g=m>1?"-".concat(m):"","".concat(p,"/reader").concat(g,".html");case n.Z.Favorite:return g=m>1?"-".concat(m):"","".concat(p,"/favorite").concat(g,".html");case n.Z.Bookmark:return g=m>1?"-".concat(m):"","".concat(p,"/bookmark").concat(g,".html");case n.Z.AmemberEntry:if(o)return"".concat(window.process.env.HTTP_PATH_AMEBLO,"/").concat(r,"/amemberentry-").concat(o,".html");console.error("PageType.AmemberEntry: entryId is undefined.");break;case n.Z.ImageEmbed:if(o&&s)return"".concat(window.process.env.HTTP_PATH_EMBED,"/p/embed/").concat(r,"/image-").concat(o,"-").concat(s,".html");console.error("PageType.ImageEmbed: entryId or imageId is undefined.");break;case n.Z.SkinPreview:return"";default:console.error("PageType is not match.")}return""}},82123:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(55752),a=r.n(n),o=r(29466),c=r.n(o),i=r(66948),s=r(7908);function l(e){var t=(0,s.Z)(e);return(0,i.v9)((e=>{if(t)return a()(e,["bloggerState","blogMap",t.blog])}),c())}},7908:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(55752),a=r.n(n),o=r(66948);function c(e){return(0,o.v9)((t=>a()(t,["bloggerState","bloggerMap",e])))}},25524:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(55752),a=r.n(n),o=r(66948),c=r(51650);function i(e){var{match:t}=(0,c.tv)()||{},r=e||a()(t,["params","amebaId"]);return(0,o.v9)((e=>{var{bloggerState:t}=e;return a()(t,["bloggerMap",r,"attribute","isOfficial"],!1)}))}},72293:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(55752),a=r.n(n),o=r(66948),c=r(29466),i=r.n(c);function s(e){return(0,o.v9)((t=>{var{entryState:r}=t;return a()(r,["entryMap",e],{})}),i())}},73724:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(76955),a=r(85819),o=r(5563);function c(){var e=(0,a.I)();return(0,n.useCallback)((t=>{e((0,o.XI)(t))}),[e])}},92700:(e,t,r)=>{"use strict";r.d(t,{Z:);var n=r(76955),a=r(85819),o=r(5563);function c(){var e=(0,a.I)();return(0,n.useCallback)((,[e])}},3296:(e,t,r)=>{var n=r(18300)(();n.push([e.id,"._2UHpSTOt{font-size:10px;margin:0 auto;padding:2rem 0;text-align:center;width:50px}._1BoYp5Ub{animation:_2Y9N-ajV .8s ease-in-out infinite;background-color:#efefef;border-radius:4px;display:inline-block;height:24px;margin:0 3px;width:6px}._Xjel4Y3u{animation-delay:-1.1s}._O2FTu59_{animation-delay:-1s}._GiX98iQc{animation-delay:-.9s}@keyframes _2Y9N-ajV{0%,40%,to{transform:scaleY(.6666)}20%{transform:scaleY(1)}}",""]),n.locals={Spinner:"_2UHpSTOt",Rect:"_1BoYp5Ub","sk-stretchdelay":"_2Y9N-ajV",Rect__Element1:"_Xjel4Y3u",Rect__Element2:"_O2FTu59_",Rect__Element3:"_GiX98iQc"},e.exports=n},6362:(e,t,r)=>{var n=r(3296),a=Object.assign||o=Object.defineProperty||"string"==typeof n&&(n=[[e.id,n,""]]),e.exports=function(e){var t=a({},e.locals||{});return o(t,"_",{value:),o(t,"toString",{value:function(){return"function"==typeof e.toString?e.toString():""}}),t}(n)}}]);