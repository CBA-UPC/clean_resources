var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=$jscomp.createTemplateTagFirstArgWithRaw=$jscomp.arrayIteratorImpl=$jscomp.arrayIterator=$jscomp.makeIterator=
$jscomp.arrayFromIterator=$jscomp.arrayFromIterable=$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:$jscomp.getGlobal=$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=
$jscomp.polyfill=$jscomp.polyfillUnisolated=
$jscomp.polyfillIsolated=$jscomp.underscoreProtoCanBeSet=
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=
$jscomp.generator.Context=$jscomp.generator.Context.prototype.start_=$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};$jscomp.generator.Context.prototype.throw_=$jscomp.generator.Context.prototype.return=function(b){this.abruptCompletion_={return:b};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=$jscomp.generator.Context.prototype.yield=$jscomp.generator.Context.prototype.yieldAll=
$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=$jscomp.generator.Context.prototype.setFinallyBlock=$jscomp.generator.Context.prototype.leaveTryBlock=
$jscomp.generator.Context.prototype.enterCatchBlock=$jscomp.generator.Context.prototype.enterFinallyBlock=
$jscomp.generator.Context.prototype.leaveFinallyBlock=$jscomp.generator.Context.prototype.forIn=
$jscomp.generator.Context.PropertyIterator=$jscomp.generator.Context.PropertyIterator.prototype.getNext=$jscomp.generator.Engine_=
$jscomp.generator.Engine_.prototype.next_=
$jscomp.generator.Engine_.prototype.return_=
$jscomp.generator.Engine_.prototype.throw_=
$jscomp.generator.Engine_.prototype.yieldAllStep_=
$jscomp.generator.Engine_.prototype.nextStep_=
$jscomp.generator.Generator_=$jscomp.generator.createGenerator=
$jscomp.asyncExecutePromiseGenerator=$jscomp.asyncExecutePromiseGeneratorFunction=$jscomp.asyncExecutePromiseGeneratorProgram=
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol","es6","es3");
$jscomp.polyfill("Symbol.iterator","es6",
"es3");$jscomp.iteratorPrototype=
$jscomp.polyfill("Promise","es6","es3");$jscomp.iteratorFromArray=
$jscomp.polyfill("Array.prototype.keys","es6","es3");$jscomp.findInternal=$jscomp.polyfill("Array.prototype.find","es6","es3");
$jscomp.checkStringArgs=
$jscomp.polyfill("String.prototype.startsWith","es6","es3");$jscomp.polyfill("Object.is","es6","es3");
$jscomp.polyfill("Array.prototype.includes","es7","es3");$jscomp.polyfill("String.prototype.includes","es6","es3");
$jscomp.polyfill("String.prototype.endsWith","es6","es3");
$jscomp.polyfill("Array.prototype.fill","es6","es3");$jscomp.typedArrayFill=$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Array.prototype.flat","es9","es5");
$jscomp.checkEs6ConformanceViaProxy=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=
$jscomp.polyfill("WeakMap","es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map","es6","es3");
var windowWidth=20,windowHeight,originTotalPageCount,totalPageCount,isTouch=!1,bookContainer,tmpContainer,slideBook,singleSlideBook,catalogBook,singleCatalogBook,flipBook,singlePageBook,flipShotButton,toolBar,printBody,helpBody,aboutBody,sharePanel,annotationPannel,videoGallery,photoGallery,languagePanel,frmSearch,frmShare,frmTableOfContent,bookmark,thumbnail,googleID,noteCookie,textRemark,signature,annotationShapes,QRcode,QRbutton,moreBar,pageIndexTextField,resizeBookAfterFlip=!1,flipAudio,auto_player,
hardPageEnable,uiBaseURL,phoneBaseURL,soundBaseURL,browserType,bookType=0,rightToLeft,isFlipPdf=!1,bookConfig,jQuery,Hammer,aliasLanguage,language,isPlaying,ClipboardJS,uc,netscape,Components,staticAd,AlbumCalendar,Directory,videoList,phoneNumber,wx,WeixinJSBridge,checkReportConfig,bmtConfig,aliasConfig,base64,fullScreenApi,skin,bookPlugin,FlipBookPlugins,SliderShowAd,DynamicBackground,StateSynchronous,settingBody,volumeControlBar,getSearchRealPageIndex,positionForPages,PageItem,toolbar_icons,form_icons,
realLocation,HTML5AdSlider,totalWidth,deg2rad,windows,rendering,alpha,size,fill,stroke,canvasContext,toBlendModeString,setFill,setStroke,restrictUrl,devicePixelRatio,fliphtml5_pages,configForPages,pdfjsLib,response,pdfLoadStack,htmlConfig,sliderJS,highlightSearchFun,clearHighlightFun,Annotation,AnnotationCookie,SearchTextHighlight,SearchHighlightDOM,phoneCopyForm,CopyForm,inverseEditor,PageEditor,PageEditorParser,pageEditor,onStageResize,templateArea,MiniStyle,BookmarkTab,fromPageIndex,PasswardPannel,
_tipsBox,downLoadBody,GuidToolbar,sendvisitinfo,dataLayer,gtag,jsLoadingBar,onBookLoad,editor_js_url,interface_js_url,xyz,property,bdor,ctx,text,blend,transform;window.phoneTemplateArea={getLeftWidth:function(){return 0},getRightWidth:function(){return 0},getTopHeight:function(){return window.toolBar?toolBar.getTopHeight():bookConfig.toolbarAlwaysShow?"both"==bookConfig.phoneToolbarType?60:40:0},getBottomHeight:function(){if(window.toolBar)return toolBar.getBottomHeight();if(!bookConfig.toolbarAlwaysShow)return 0;if("both"==bookConfig.phoneToolbarType)return isIphoneXor11()?80:60;if(!isIphoneXor11())return 40;if(isIphoneXor11())return 60},getHeight:function(){return this.getTopHeight()+
this.getBottomHeight()},getWidth:function(){return this.getLeftWidth()+this.getRightWidth()}};window.templeteName="handy";
window.templateArea={getLeftWidth:function(){return 0},getRightWidth:function(){return 0},getTopHeight:function(){return MiniStyle.isMini()||NeatStyle.isNeat()||!bookConfig.ToolBarVisible?0:isPC()?46:phoneTemplateArea.getTopHeight()},getBottomHeight:function(){return MiniStyle.isMini()?0:NeatStyle.isNeat()?40:bookConfig.ToolBarVisible?isPC()?window.thumbnail&&window.thumbnail.visible?thumbnail.getBottomHeight():0:phoneTemplateArea.getBottomHeight():0},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},
getWidth:;/*
 Hammer.JS - v2.0.8 - 2016-04-23
 http://hammerjs.github.io/

 Copyright (c) 2016 Jorik Tangelder;
 Licensed under the MIT license  http://mths.be/base64 v0.1.0 by @mathias | MIT license */
(this||(0,eval)("(this)")).bdor=[];var _agent_={};
(function(b){r e=navigator.userAgent.toLowerCase();b.browser={};b.browser.webkit=/webkit/.test(e);b.browser.mozilla=/firefox/.test(e);b.browser.firefox=b.browser.mozilla;b.browser.msie=/msie/.test(e)||
/trident/.test(e)||/edge/.test(e);b.browser.edge=/edge/.test(e);b.browser.opera=/opera/.test(e)||/opr/.test(e);b.browser.chrome=/chrome/.test(e)&&!b.browser.opera&&!b.browser.edge;b.browser.uc=/ucbrowser/.test(e);b.browser.safari=/safari/.test(e)&&!b.browser.chrome&&!b.browser.uc&&!b.browser.opera;b.browser.wechat=/micromessenger/.test(e);b.browser.dingding=/dingtalk/.test(e);b.browser.version=0;window.bdor[1]="p";b.browser.firefox&&(b.browser.version=c(/firefox\/\d+/));if(b.browser.msie){var f=e.match(/msie\s?\d+\.0/);
null==f?(f=e.match(/trident\/\d+\.0/),null!=f&&0<f.length?(f=f[0],f=parseInt(f.replace("trident/","")),b.browser.version=f+4):(f=e.match(/edge\/\d+\.0/),null!=f&&0<f.length&&(f=f[0],f=parseInt(f.replace("edge/","")),b.browser.version=f))):(f=parseInt(f[0].replace("msie","")),b.browser.version=f)}b.browser.opera&&(b.browser.version=c(/opera\/\d+/)||c(/opr\/\d+/));b.browser.chrome&&(b.browser.version=c(/chrome\/\d+/));b.browser.uc&&(b.browser.version=c(/ucbrowser\/\d+/));b.browser.safari&&(b.browser.version=
c(/safari\/\d+/));if(void 0==b.browser.device){b.browser.DEVICE_PC=0;b.browser.DEVICE_PAD=1;b.browser.DEVICE_PHONE=2;var g=/pad/.test(e)||/ipod/.test(e);f=/iphone/.test(e);var h=/wpdesktop/.test(e)||/windows phone/.test(e),k=/blackberry/.test(e),l=/mobile/.test(e)||/phone/.test(e),n=/heytapbrowser/.test(e);if(-1<e.indexOf("macintosh")){g=!0;try{document.createEvent("TouchEvent")}catch(q){g=!1}}b.browser.device=b.browser.DEVICE_PC;if(g)b.browser.device=b.browser.DEVICE_PAD;else if(f||h||k||l||n)b.browser.device=
b.browser.DEVICE_PHONE}void 0==b.browser.app&&(b.browser.app=/android-app/.test(e));void 0==b.browser.prefix&&(b.browser.prefix="",1==b.browser.webkit&&(b.browser.prefix="-webkit-"),1==b.browser.mozilla&&(b.browser.prefix="-moz-"),1==b.browser.opera&&(b.browser.prefix="-webkit-"),1==b.browser.uc&&(b.browser.prefix="-webkit-"),1==b.browser.msie&&(b.browser.prefix="-ms-"));if(void 0==b.system){b.system={name:"",version:0};b.system.WINDOWS="Windows";b.system.WP="WinPhone";b.system.WP_DESKTOP="WinPhoneDesktop";
b.system.MAC="Mac OS";b.system.IOS="iPhone OS";b.system.LINUX="Linux";b.system.ANDROID="Android";b.system.BLACKBERRY="BlackBerry";/windows/.test(e)&&(b.system.name=b.system.WINDOWS,b.system.version=d(/windows nt\s?\d+\.?\d?/));/windows phone/.test(e)&&(b.system.name=b.system.WP,b.system.version=d(/windows phone\s?\d+\.?\d?/));/wpdesktop/.test(e)&&(b.system.name=b.system.WP_DESKTOP,b.system.version=d(/wpdesktop\s?\d+\.?\d?/));if(b.system.name!=b.system.WP){if(/iphone/.test(e)||/ipad/.test(e))b.system.name=
b.system.IOS,b.system.version=d(/os\s?\d+_?\d?/);/macintosh/.test(e)&&g&&(b.system.name=b.system.IOS,b.system.version=d(/version\/\s?\d+_?\d?/));/android/.test(e)&&(b.system.name=b.system.ANDROID,b.system.version=d(/android\s?\d+\.?\d?/))}/mac/.test(e)&&b.browser.system!=b.browser.IOS&&(b.system.name=b.system.MAC,b.system.version=d(/os x\s?\d+\.?\d?/));/linux/.test(e)&&!/android/.test(e)&&(b.system.name=b.system.LINUX);/blackberry/.test(e)&&(b.system.name=b.system.BLACKBERRY,b.system.version=d(/blackberry\s?\d+/))}})(_agent_);
var $=window.jQuery,isFirefox=function(){return _agent_.browser.firefox},isIE=function(){return _agent_.browser.msie},isIE8=function(){return _agent_.browser.msie&&8==_agent_.browser.version},isIE9=function(){return _agent_.browser.msie&&9==_agent_.browser.version},isIE11=isBelowIE11=isPad=isIpad=function(){var b=navigator.userAgent.toLowerCase();return 0<b.indexOf("ipad")&&0<b.indexOf("safari")},isPC=function(){return isPhone()||isPad()?!1:_agent_.browser.device==_agent_.browser.DEVICE_PC?!0:!1},isIpod=function(){return 0<navigator.userAgent.toLowerCase().indexOf("ipod")},isIphone=function(){return 0<navigator.userAgent.toLowerCase().indexOf("iphone")},isIphoneXor11=function(){return isIphone()&&(812==screen.height&&
375==screen.width||896==screen.height&&414==screen.width||12<=_agent_.system.version)},isNokiaPhone=isAndroid=isPhone=isAndroidWeChat=isWeChat=function(){return _agent_.browser.wechat},isDingDing=isAndroidDefault=isPhoneBook=isHigherThanIOS8=isInTheFrame=function isBelowIE9(){return _agent_.browser.msie?9>_agent_.browser.version?!0:!1:!1}
function isBelowIE8(){return _agent_.browser.msie?8>_agent_.browser.version?!0:!1:!1}ar global=),virtual_function=function(){};function Class(b,c){if("string"===typeof b){var d=getPackageByName(c.Package);d[b]=Class(c);return d[b]}var e=e.prototype=b||{};var f;e.prototype.getClassName=e.prototype.getClass=function(){return e};b=e.prototype.statics;if(void 0!=b){for(d in b)void 0==e[d]&&(e[d]=b[d]);delete e.prototype.statics}return e}
Function.prototype.extend=
Function.prototype.expand=function(b,c){if("object"===typeof b){void 0==c&&(c=!1);var d=b.statics;if(d&&"object"==typeof d){for(var e in d)if(c||void 0==this[e])this[e]=d[e];delete b.statics}for(e in b)if(c||void 0==this.prototype[e])this.prototype[e]=b[e];return this}};
var Instance={copy:create:function(b,c){c||(c=[]);var d=b;"string"==typeof b&&(d=getClassByFullName(d));if(!d)return null;b=d.prototype.create;d.prototype.create=function(){};var e=new d;d.prototype.create=b;e.create&&e.create instanceof Function&&e.create.apply(e,c);return e},JSON:function(b){if(void 0===b)return"undefined";
if(null===b)return"null";if(b instanceof Array){var c=[];c.push("[");for(var d=0;d<b.length;d++)c.push(Instance.JSON(b[d])),c.push(", ");1<c.length&&c.pop();c.push("]");return c.join("")}if(b instanceof Function)return b;if("string"===typeof b)return b=b.toString(),b=b.replaceAll("\\","\\\\",!0),b=b.replaceAll('"','\\"',!0),'"'+b+'"';if("number"===typeof b)return Number(b).toString();if("boolean"===typeof b)return(!!b).toString();if("object"===typeof b){c=[];c.push("{");for(d in b){var e='"'+d+'":'+
Instance.JSON(b[d]);c.push(e);c.push(", ")}1<c.length&&c.pop();c.push("}");return c.join("")}},parse:;Object.create=Object.create||);
Object.keys=Object.keys||
Function.expand({bind:delay:interval:animation:once:);
String.expand({trim:replaceAll:function(b,c,d){void 0==d&&(d=!1);if(!b||!c)return this;if(RegExp&&!d)return this.replace(new RegExp(b,"g"),c);var e=this.indexOf(b);d=[];for(var f=this;-1!=e;){e+=b.length;var g=f.substring(0,e);f=f.substring(e);g=g.replace(b,c);d.push(g);e=f.indexOf(b)}""!==f&&d.push(f);return d.join("")},subBetween:isUrl:isEmail:toArray:
reverse:equals:equalsIgnoreCase:like:contains:startsWith:endsWith:isEnglish:overflow:remove:removeStartFrom:cycleToLength:firstUpperCase:function(){return 1>this.length?this:this.substring(0,1).toUpperCase()+this.substring(1)},firstLowerCase:extract:addUrlParameter:function(b){var c=this.toString();b=b.param;return"string"!=typeof c?c:c=0<=c.indexOf("?")?c+"&"+b:c+"?"+b},statics:{format:function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];for(var b=arguments[0],c=b.extract("%s","%d","%f","%b","%o"),d=1;d<arguments.length;d++){var e=arguments[d],f=c[d-1];"%s"==f&&("string"==typeof e?
b=b.replace("%s",e):b=b.replace("%s",""));if("%d"==f){isNaN(e)&&(e=0);var g="number"==typeof e?-1==Number(e).toString().indexOf("."):!1;g?b=b.replace("%d",e+""):b=b.replace("%d","")}"%f"==f&&(isNaN(e)&&(e=0),"number"==typeof e?b=b.replace("%f",e+""):b=b.replace("%f",""));"%b"==f&&(e=!!e,"boolean"==typeof e?b=b.replace("%b",e+""):b=b.replace("%b",""));"%o"==f&&("object"==typeof e?b=b.replace("%o",Instance.JSON(e)):b=b.replace("%o",""))}return b},toUtf8:function(b){if(!b)return"";var c,d=[],e=b.length;
for(c=0;c<e;c++){var f=b.charCodeAt(c);0<f&&127>=f?d.push(b.charAt(c)):128<=f&&2047>=f?d.push(String.fromCharCode(192|f>>6&31),String.fromCharCode(128|f&63)):2048<=f&&65535>=f&&d.push(String.fromCharCode(224|f>>12&15),String.fromCharCode(128|f>>6&63),String.fromCharCode(128|f&63))}return d.join("")},parseUtf8:function(b){if(!b)return"";var c,d=[],e=b.length;for(c=0;c<e;c++){var f=[];f.push(b.charCodeAt(c));if(0==(f[0]>>7&255))d.push(b.charAt(c));else if(6==(f[0]>>5&255)){f.push(b.charCodeAt(++c));
var g=[];g.push(f[0]&31);g.push(f[1]&63);d.push(String.fromCharCode(g[0]<<6|g[1]))}else 14==(f[0]>>4&255)&&(f.push(b.charCodeAt(++c)),f.push(b.charCodeAt(++c)),g=[],g.push(f[0]<<4|f[1]>>2&15),g.push((f[1]&3)<<6|f[2]&63),d.push(String.fromCharCode(g[0]<<8|g[1])))}return d.join("")}}});
Array.expand({remove:indexOf:removeElement:lastIndexOf:statics:{isArray:,clone:increasing:function(){return this.sort(function(b,
c){return b-c})},diminishing:);
Date.expand({format:function(b,c){c=c||!0;var d={"y+":this.getYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var e in d)(new RegExp("("+e+")")).test(b)&&(b=!0===c?b.replace(RegExp.$1,d[e]):b.replace(RegExp.$1,1==RegExp.$1.length?d[e]:("00"+d[e]).substr((""+d[e]).length)));
return b},statics:{now:});
Number.expand({statics:{between:isBetween:function(b,c,d){if(isNaN(c)||isNaN(d)||isNaN(b))return!1;var e=Math.max(c,d);return b>=Math.min(c,d)&&b<=e?!0:!1},fixed:function(b,c){if(isNaN(b))return b;isNaN(c)&&(c=0);c=Math.pow(10,c);return Math.round(b*c)/c},decimals:random:function(b,
c,d){if(isNaN(b)||isNaN(c))return 0;void 0==d&&Number.decimals(b)==Number.decimals(c)&&(d=Number.decimals(b));var e=Math.min(b,c);b=e+(Math.max(b,c)-e)*Math.random();return!d||0>d||isNaN(d)?Math.floor(b):Number.fixed(b,d)}}});
var Color=function(b){b&&"object"==typeof b&&b.toString&&(b=b.toString());return{value:ColorTable.value(b),toString:valueOf:this.toString,split:function(){var c={r:0,g:0,
b:0,a:255};if(!this.value)return c;var d=this.toString(),e="FF";switch(d.length){case 9:e=d.substr(1,2);c=d.substr(3,2);var f=d.substr(5,2);d=d.substr(7,2);break;case 7:c=d.substr(1,2);f=d.substr(3,2);d=d.substr(5,2);break;case 4:c=d.substr(1,1);f=d.substr(2,1);d=d.substr(3,1);c+=c;f+=f;d+=d;break;default:return c}return{r:parseInt(c,16),g:parseInt(f,16),b:parseInt(d,16),a:parseInt(e,16)}},add:function(c){var d="object"==typeof c?c:{r:c,g:c,b:c,a:1};var e=this.split();c=Number.between(e.r+d.r,0,255).toString(16).toUpperCase();
var f=Number.between(e.g+d.g,0,255).toString(16).toUpperCase();d=Number.between(e.b+d.b,0,255).toString(16).toUpperCase();e=Number(e.a).toString(16).toUpperCase();c=1>=c.length?"0"+c:c;f=1>=f.length?"0"+f:f;d=1>=d.length?"0"+d:d;e=1>=e.length?"0"+e:e;return"FF"==e?"#"+c+f+d:"#"+e+c+f+d},reduce:rgba:equals:difference:reverse:function(){var c=this.split(),d=Number.between(255-c.r,0,255).toString(16).toUpperCase(),e=Number.between(255-c.g,0,255).toString(16).toUpperCase(),f=Number.between(255-c.b,0,255).toString(16).toUpperCase();c=Number(c.a).toString(16).toUpperCase();d=1>=d.length?"0"+
d:d;e=1>=e.length?"0"+e:e;f=1>=f.length?"0"+f:f;c=1>=c.length?"0"+c:c;return"FF"==c?"#"+d+e+f:"#"+c+d+e+f}}};unction colorAdd(b,c){return Color(b).add(c)}ar Point=Point.NaP=
_agent_.browser.mozilla&&(HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent}),HTMLElement.prototype.__defineSetter__("innerText",function(b){this.textContent=b}));
function getImageConfig(b,c,d,e){if(!b||void 0==c||void 0==d)return null;b[0]&&(b=b[0]);if(b.complete){var f=b.naturalWidth;var g=b.naturalHeight;return e?getCoverSize(f,g,c,d):getContainSize(f,g,c,d)}$(b).on("load",function(){f=b.naturalWidth;g=b.naturalHeight;return e?getCoverSize(f,g,c,d):getContainSize(f,g,c,d)}.bind(this))}
function getContainSize(b,c,d,e){if(b/c>d/e)if(b<d){var f=b,g=c;c=(d-f)/2;e=(e-g)/2}else f=d,g=d/b*c,c=0,e=(e-g)/2;else c<e?(f=b,g=c,c=(d-f)/2,e=(e-g)/2):(g=e,f=e/c*b,c=(d-f)/2,e=0);return{scale:f/b,width:f,height:g,left:c,top:e}}function getContainSizeRate(b,c,d,e){b=getContainSize(b,c,d,e);return{scale:b.scale,width:b.width/d,height:b.height/e,left:b.left/d,top:b.left/e}}
function getCoverSize(b,c,d,e){if(b/c>d/e){var f=d,g=d/b*c;c=0;e=(e-g)/2}else g=e,f=e/c*b,c=(d-f)/2,e=0;return{scale:b/f,width:f,height:g,left:c,top:e}}
function getInverseItem(b,c,d){b=JSON.parse(JSON.stringify(b));var e=b.location;if(window.articleConfig&&window.articleConfig.hotArea){var f=window.articleConfig.hotArea;b.overColor=f.overColor;b.downColor=f.downColor;b.outColor=f.outColor;b.overAlpha=f.overAlpha;b.downAlpha=f.downAlpha;b.outAlpha=f.outAlpha}if(e.pageWidth>c||e.pageHeight>d)c=getContainSizeRate(e.pageWidth,e.pageHeight,c,d),d=(1-c.height)/2,b.location.x=b.location.x*c.width+(1-c.width)/2,b.location.y=b.location.y*c.height+d,b.location.width*=
c.width,b.location.height*=c.height;return b}function getOffset(b){for(var c=b.target,d=0,e=0;c;)d+=c.offsetLeft,e+=c.offsetTop,c=c.offsetParent;return{X:window.pageXOffset+b.clientX-d,Y:window.pageYOffset+b.clientY-e}}
function getPositionFromEvt(b){b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b];return{x:(b[0].pageX||b[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(b[0].pageY||b[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}}
function getDeString(b){"[object String]"!==Object.prototype.toString.call(b)||b.match(/^[\[\{]/)||(b=window.Module._DeString(window.allocateUTF8(b)),b=window.UTF8ToString(b));return b}
function DeString(b,c){if(""==b)return"";c&&""!=c||(c="fb5");c=escape(c);if(null==b||8>b.length)alert("A salt value could not be extracted from the encrypted message because it's length is too short. The message cannot be decrypted.");else if(null==c||0>=c.length)alert("Please enter a password with which to decrypt the message.");else{for(var d="",e=0;e<c.length;e++)d+=c.charCodeAt(e).toString();var f=Math.floor(d.length/5);f=parseInt(d.charAt(f)+d.charAt(2*f)+d.charAt(3*f)+d.charAt(4*f)+d.charAt(5*
f),10);c=Math.round(c.length/2);var g=Math.pow(2,31)-1;e=parseInt(b.substring(b.length-8,b.length),16);b=b.substring(0,b.length-8);for(d+=e;10<d.length;)d=(parseInt(d.substring(0,10),10)+parseInt(d.substring(10,d.length),10)).toString();d=(f*d+c)%g;var h="";for(e=0;e<b.length;e+=2){var k=parseInt(parseInt(b.substring(e,e+2),16)^Math.floor(d/g*255),10);h+=String.fromCharCode(k);d=(f*d+c)%g}return unescape(h)}}
function loadJavascript(b,c,d){var e=this,f=!1,g=document.createElement("script");g.type="text/javascript";g.async=!0;g.onload=g.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(g.onload=g.onreadystatechange=null,void 0!=c&&c(g))};g.onerror=function(){void 0!=d&&d(g)};var h=$("head");h.find("script").each(function(){this.src==b&&(f=!0)});f?void 0!=c&&c(g):(h[0].appendChild(g),g.src=b);return g}
function loadCss(b,c,d){var e=this,f=!1,g=document.createElement("link");g.rel="stylesheet";g.async=!0;g.onload=g.onreadystatechange=g.onerror=var h=$("head");h.find("link").each(function(){this.href==b&&(f=!0)});f?void 0!=c&&c(g):(h[0].appendChild(g),g.href=b);return g}
(();
function readAsFullscreen(){isIphone()||isIpad()?window.open(window.location.href):fullScreenApi&&fullScreenApi.supportsFullScreen?($(document).unbind(fullScreenApi.fullScreenEventName,onFullscreenEvent),$(document).bind(fullScreenApi.fullScreenEventName,onFullscreenEvent),fullscreenFun()):window.top!=window?window.open(window.location.href):alert("Press F11 to View FlipBook in Full Screen")}
function onFullscreenEvent(b){fullScreenApi.srcElement=b.srcElement||b.target;b=isPhone()||isPad()?"PhoneFullscreenButton":"FullscreenButton";StateSynchronous.instance().findButtons(b).each(;fullScreenApi.isFullScreen()?MiniStyle.hide():MiniStyle.show();(.delay(100)}
(function(b,c,d,e){n B(m,p,r){h(t(p),function(y){"undefined"!=typeof b.removeEventListener?m.removeEventListener(y,r,!1):m.detachEvent(y,r,!1)})}ion A(m,p){if(p&&p[0]){for(var r,y=p[0].toUpperCase()+p.slice(1),C=0;C<oa.length;){r=(r=oa[C])?r+y:p;if(r in m)return r;C++}return e}}(this,arguments)}function ca(){P.apply(this,
arguments);this.pY=this.pX=null}function ja(){P.apply(this,arguments)}unction la(){P.apply(this,arguments)}ction na(m,p){this.options=U({},T.defaults,p||{});this.options.inputTarget=
this.options.inputTarget||m;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=m;this.input=new ha(this,I);this.touchAction=new ia(this,this.options.touchAction);va(this,!0);h(this.options.recognizers,this)}r oa=" webkit Moz MS ms o".split(" "),Fa=c.createElement("div"),Z=Math.round,Y=Math.abs,fa=Date.now;var U="function"!==typeof Object.assign?
Object.assign;var wa=k("extend","Use `assign`."),Ga=k("merge","Use `assign`."),Da=1,Ha=/mobile|tablet|ip(ad|hone|od)|android/i,Ia="ontouchstart"in b;A(b,"PointerEvent");Ia&&Ha.test(navigator.userAgent);var pa=["x","y"],aa=["clientX","clientY"];H.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler);this.evTarget&&
x(this.target,this.evTarget,this.domHandler);this.evWin&&x(K(this.element),this.evWin,this.domHandler)},destroy:;var Ja={mousedown:1,mousemove:2,mouseup:4},za="mousedown",Aa="mousemove mouseup";l(O,H,{handler:);var Ka={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},La={2:"touch",3:"pen",4:"mouse",5:"kinect"},qa="pointerdown",ra="pointermove pointerup pointercancel";b.MSPointerEvent&&!b.PointerEvent&&(qa="MSPointerDown",ra="MSPointerMove MSPointerUp MSPointerCancel");l(Q,H,{handler:);var Ma={touchstart:1,touchmove:2,touchend:4,touchcancel:8};l(V,H,{handler:);var Na={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ba="touchstart touchmove touchend touchcancel";l(W,H,{handler:);l(ha,H,{handler:destroy:);var xa=A(Fa.style,"touchAction"),ya=xa!==e,ea=);ia.prototype={set:update:compute:preventDefaults:preventSrc:;S.prototype={defaults:{},set:recognizeWith:dropRecognizeWith:requireFailure:dropRequireFailure:hasRequireFailures:canRecognizeWith:emit:tryEmit:canEmit:recognize:process:function(m){},getTouchAction:function(){},reset:function(){}};
l(P,S,{defaults:{pointers:1},attrTest:process:);l(ca,P,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:directionTest:attrTest:emit:);l(ja,P,{defaults:{event:"pinch",
threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:emit:);l(ka,S,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:reset:function(){clearTimeout(this._timer)},emit:);l(la,P,{defaults:{event:"rotate",threshold:0,
pointers:2},getTouchAction:function(){return["none"]},attrTest:);l(ma,P,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:attrTest:emit:);l(da,S,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:process:
failTimeout:reset:emit:);T.VERSION="2.0.8";T.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[la,{enable:!1}],[ja,{enable:!1},["rotate"]],[ma,{direction:6}],[ca,{direction:6},["swipe"]],[da],[da,{event:"doubletap",
taps:2},["tap"]],[ka]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};na.prototype={set:stop:recognize:get:add:remove:on:off:emit:destroy:;U(T,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,
DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:na,Input:H,TouchAction:ia,TouchInput:W,MouseInput:O,PointerEventInput:Q,TouchMouseInput:ha,SingleTouchInput:V,Recognizer:S,AttrRecognizer:P,Tap:da,Pan:ca,Swipe:ma,Pinch:ja,Rotate:la,Press:ka,on:x,off:B,each:h,merge:Ga,extend:wa,assign:U,inherit:l,bindFn:n,prefixed:A});("undefined"!==typeof b?b:"undefined"!==typeof self?self:{}).Hammer=T;"function"===typeof define&&define.amd?define(function(){return T}):"undefined"!=typeof module&&module.exports?module.exports=
T:b[d]=T})(window,document,"Hammer");
jQuery.fn.IEZoom=
jQuery.fn.zoom=function(b,c){this.options=b;this.isBook=c;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:$(this).offset().left-0||0,top:$(this).offset().top-0||0,toScale:1,scale:1,rotate:0,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoomOut:!1,resize:!1,eventCancel:!1,zoomDelay:!1,onPan:!1,onSwipe:!1,onDoubleTap:!1,onPinch:!1,zoomArea:{left:0,top:0,right:0,bottom:0}};this.onPan=function(d){if(!this.parameters.resize&&
!this.parameters.eventCancel&&!this.parameters.zoomming&&d&&d.pointers&&1==d.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag)){"panstart"==d.type&&(this.parameters.onPan=!0);var e=this.getDelta(d);e=this.panForMove(this,e.deltaX,e.deltaY,!0);if(this.options&&this.options.onPan)this.options.onPan();if("panend"==d.type||"pancancel"==d.type)this.parameters.onPan=!1,this.setZoomParameters(this,e),this.restrictInBoundary(this)}};
this.onSwipe=this.getDirection=this.getVelocity=function(d){var e=0,f=0,g=bookConfig.upsideOnMobile();0==d.velocityX||g||(e=d.velocityX);0==d.velocityY||g||(f=d.velocityY);
0!=d.velocityX&&g&&(e=d.velocityY);0!=d.velocityY&&g&&(f=-d.velocityX);return{velocityX:e,velocityY:f}};this.getDelta=this.onDoubleTap=function(d){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&window.clearTimeout(global.windowTapInterval),
this.parameters.resize||this.parameters.zoomming)))if(BookInfo.getBook().unSelect(),this.status_zoom=!0,!this.parameters.zoomFlag)BookEvent.trigger("zoomIn",["double tap",BookInfo.getCurrentPages().join("-")]),this.zoomIn(this),this.parameters.origin=this.mathOrigin(this,d),this.originObj(this,this.parameters.origin),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,d);else if(this.parameters.zoomFlag){this.beforeZoomOut(this);BookEvent.trigger("zoomOut",["double tap",BookInfo.getCurrentPages().join("-")]);
var e=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,e,d)}};this.onPinch=function(d){"pinchstart"==d.type&&(this.pinchStart=!0);if(!(this.parameters.resize||this.parameters.zoomming||!this.parameters.zoomFlag&&1>=d.scale)&&d&&d.pointers){BookInfo.getBook().unSelect();this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var e=function(){this.pinchStart=!1;this.parameters.zoomFlag||(this.parameters.zoomOut=
!1,this.zoomIn(this));BookEvent.trigger("zoomIn",["pinch",BookInfo.getCurrentPages().join("-")]);this.scale=this.parameters.toScale;this.parameters.origin=this.mathOrigin(this,d);this.originObj(this,this.parameters.origin);this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(d.scale),d,this.parameters.origin)}.bind(this);"pinchstart"==d.type&&(this.parameters.onPinch=!0,e(d));"pinchend"==d.type&&(this.parameters.scale=this.parameters.toScale,this.parameters.onPinch=!1,this.exceedScale(this,d),
this.pinchStart=!1);"pinchmove"==d.type&&(this.pinchStart&&e(d),this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(d.scale),d,this.parameters.origin));"pinchcancel"==d.type&&(this.parameters.scale=this.parameters.toScale,this.parameters.onPinch=!1,this.exceedScale(this,d),this.pinchStart=!1)}};this.exceedScale=this.zoomIn=function(d){var e=this.getBookOffset($(d));d.parameters.tran=getTransform(d[0]);d.parameters.left=e.left-d.parameters.tran.x;d.parameters.top=e.top-d.parameters.tran.y;d.parameters.width=$(d).width();d.parameters.height=$(d).height();d.parameters.naturalWidth=$(d).width();d.parameters.naturalHeight=
$(d).height();d.setZoomSize();d.parameters.zoomFlag=!0;d.parameters.zoomOut=!1;d.options&&d.options.zoomIn&&d.options.zoomIn(d.parameters)};this.beforeZoomOut=this.zoomOut=this.tranLimit=
function(d,e,f){if(f){if(d.parameters.zoomOut){f={x:0,y:0};f.x=d.parameters.width*(e-1)*d.parameters.origin.x/100;f.y=d.parameters.height*(e-1)*d.parameters.origin.y/100;if((bookType==BookType.normal_book||bookType==BookType.catalog_book)&&bookConfig.retainBookCenter&&d.isBook){var g=BookInfo.getCurrentPages();1==g.length&&(!BookInfo.isLeftPage(g[0],!0)&&bookConfig.FlipDirection&&(f.y-=d.parameters.height*e/4),BookInfo.isLeftPage(g[0],!0)&&bookConfig.FlipDirection&&(f.y+=d.parameters.height*e/4),
BookInfo.isLeftPage(g[0],!0)||bookConfig.FlipDirection||(f.x-=d.parameters.width*e/4),BookInfo.isLeftPage(g[0],!0)&&!bookConfig.FlipDirection&&(f.x+=d.parameters.width*e/4))}return f}d.parameters.origin||(d.parameters.origin={x:0,y:0});g=f.x;f=f.y;var h=d.parameters.width;var k=d.parameters.height;var l=d.parameters.left-d.parameters.origin.x*(e-1)*h/100;var n=d.parameters.top-d.parameters.origin.y*(e-1)*k/100;var q=e*h,x=e*k;if(q>windowWidth){var B=windowWidth-q-l+h*e*d.parameters.zoomArea.right/
100;l=-l-h*e*d.parameters.zoomArea.left/100}else B=-l-h*e*d.parameters.zoomArea.left/100,l=windowWidth-q-l+h*e*d.parameters.zoomArea.right/100;x>windowHeight?(h=windowHeight-x-n+k*e*d.parameters.zoomArea.bottom/100,d=-n-k*e*d.parameters.zoomArea.top/100):(h=-n-k*e*d.parameters.zoomArea.top/100,d=windowHeight-x-n+k*e*d.parameters.zoomArea.bottom/100);g=Number.between(g,B,l);f=Number.between(f,h,d);return{x:parseInt(g),y:parseInt(f)}}};this.pinchMoveIn=this.mathTran=function(d,e,f){if(!e||!e.pointers||0>=e.pointers.length||!f)return{x:0,y:0};var g=this.getPageXY(e);e=g.pageX;g=g.pageY;var h=d.parameters.width;var k=d.parameters.height;var l=d.parameters.left;d=d.parameters.top;l=(f.x*h/100+l).toFixed(2);f=(f.y*k/100+d).toFixed(2);e-=parseFloat(l);f=g-parseFloat(f);return{x:parseFloat(e.toFixed(2)),
y:parseFloat(f.toFixed(2))}};this.mathOrigin=function(d,e){if(!e||!e.pointers||0>=e.pointers.length)return{x:50,y:50};var f=this.getPageXY(e);e=f.pageX;f=f.pageY;var g=d.parameters.width;var h=d.parameters.height;var k=this.getBookOffset(d);e=(e-parseInt(k.left))/(g*d.parameters.scale);d=(f-parseInt(k.top))/(h*d.parameters.scale);return{x:(100*e).toFixed(2),y:(100*d).toFixed(2)}};this.getPageXY=function(d){var e=bookConfig.upsideOnMobile();if(1==d.pointers.length){var f=d.pointers[0].pageX;var g=
d.pointers[0].pageY}1<d.pointers.length&&(f=(d.pointers[0].pageX+d.pointers[1].pageX)/2,g=(d.pointers[0].pageY+d.pointers[1].pageY)/2);return e?{pageX:g,pageY:windowHeight-f}:{pageX:f,pageY:g}};this.getBookOffset=this.restrictInBoundary=this.transformSetting=function(d,e){d.setZoomParameters(d,e);e=transformCSS(e);d.css(e)};this.panForMove=this.originObj=this.setZoomParameters=function(d,e){unction g(k){return f(e[k])&&!isNaN(e[k])?e[k]:d.parameters[k]}&&d.parameters&&e&&(d.parameters={width:g("width"),height:g("height"),naturalWidth:g("naturalWidth"),naturalHeight:g("naturalHeight"),left:g("left"),top:g("top"),scale:g("scale"),rotate:g("rotate"),toScale:g("toScale"),
tran:h("tran"),origin:h("origin"),zoomFlag:h("zoomFlag"),zoomming:h("zoomming"),zoomOut:h("zoomOut"),resize:h("resize"),eventCancel:h("eventCancel"),zoomArea:h("zoomArea"),zoomDelay:h("zoomDelay"),onPan:h("onPan"),onSwipe:h("onSwipe"),onDoubleTap:h("onDoubleTap"),onPinch:h("onPinch")})};this.animateToTransform=function(d,e,f){if(!this.parameters.eventCancel&&!this.parameters.zoomming){this.options&&this.options.zoomStart&&this.options.zoomStart();var g=this.getBookOffset($(this));this.parameters.tran=
getTransform(this[0]);if(parseInt(e.x)!=parseInt(this.parameters.tran.x)||parseInt(e.y)!=parseInt(this.parameters.tran.y)||d.toFixed(2)!=this.parameters.scale.toFixed(2)){this.parameters.zoomming=!0;this.parameters.left=g.left-this.parameters.tran.x;this.parameters.top=g.top-this.parameters.tran.y;this.parameters.width=$(this).width();this.parameters.height=$(this).height();this.parameters.naturalWidth=$(this).width();this.parameters.naturalHeight=$(this).height();this.setZoomSize();var h={};h.origin=
this.parameters.origin;h.scale=d;h.tran=e;h.origin=f;this.zoomTran=h;e=transformCSS(h);this.originObj(this,h.origin);animateOnce(this,e,300,bind(this),"%stransform","ease-out")}}};this.animateToScale=function(d,e,f,g){if(!d.parameters.eventCancel&&!d.parameters.zoomming){d.options&&d.options.zoomStart&&d.options.zoomStart();
d.parameters.zoomming=!0;var h={};h.origin=d.parameters.origin;h.scale=e;h.tran=this.mathTran(d,f,h.origin);h.tran=this.tranLimit(d,e,h.tran);this.zoomTran=h;this.animation(d,e,h,g)}};this.animation=function(d,e,f,g){var h=transformCSS(f);d.originObj(d,f.origin);animateOnce(d,h,void 0==g?600:g,function(){getTransform(d[0]);d.transformSetting(d,f);d.parameters.scale=e;d.parameters.toScale=e;d.parameters.zoomming=!1;var k=(d.parameters.width*d.parameters.toScale).toFixed(2),l=(d.parameters.height*d.parameters.toScale).toFixed(2),
n=d.parameters.naturalWidth,q=d.parameters.naturalHeight;if(Number.isBetween(k,n-1,n+1)||Number.isBetween(l,q-1,q+1)){d.timeout&&(d.timeout=void 0,window.clearTimeout(d.timeout));d.parameters.zoomDelay=!1;if(d.options.onZoomed)d.options.onZoomed(d.zoomTran);d.zoomOut(d)}else if(d.options.onZoomed)d.options.onZoomed(d.zoomTran)}.bind(d),"%stransform","cubic-bezier(0.2150, 0.610, 0.3550, 1)")};this.delayExecuteOnZoomed=this.registerParamers=
this.setZoomSize=function(){var d=$(this).width(),e=$(this).height(),f=bookConfig.largePageHeight/bookConfig.largePageWidth,g=bookConfig.middleZoomWidth,h=g*f,k=getPageSize(BookInfo.getCurrentPageIndex(),"normal",bookConfig.totalPageCount);if(k&&1<k.length)if(1<=f){var l=findCloseNum(k,1350),n=l/f;k=k[k.length-1];var q=k/f}else n=findCloseNum(k,1350),l=n*f,q=k[k.length-1],k=q*f;else l=1350,n=l/f,k=2050,q=k/f;bookConfig.FlipDirection?(f=g/d,this.middleScale=Math.max(n/d,f,2),isPhone()||isPad()?this.maxScale=
Math.max(q/d,f,4):this.maxScale=1E4/d):(f=h/e,this.middleScale=Math.max(l/e,f,2),isPhone()||isPad()?this.maxScale=Math.max(k/e,f,4):this.maxScale=1E4/e)};b=window.self!==window.top?"pan-y":"none";b=new Hammer.Manager($(this)[0],{touchAction:b});b.add(new Hammer.Pan);b.add((new Hammer.Swipe({velocity:.15})).recognizeWith(b.get("pan")));b.on("panstart panmove panend pancancel",this.onPan.bind(this));b.on("swipe swipeup",this.onSwipe.bind(this));if(bookConfig.SupportOperatePageZoom&&(b.add(new Hammer.Pinch),
isPhone()||isPad()?b.add(new Hammer.Tap({event:"doubletap",taps:2,interval:400,posThreshold:30})):b.add(new Hammer.Tap({event:"doubletap",taps:2})),b.on("pinchstart pinchmove pinchcancel pinchend",this.onPinch.bind(this)),!isAndroidWeChat()))b.on("doubletap",this.onDoubleTap.bind(this));this.setZoomSize()};jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:easeInQuad:easeOutQuad:easeInOutQuad:easeInCubic:easeOutCubic:easeInOutCubic:easeInQuart:easeOutQuart:easeInOutQuart:easeInQuint:easeOutQuint:easeInOutQuint:easeInSine:easeOutSine:easeInOutSine:easeInExpo:easeOutExpo:easeInOutExpo:easeInCirc:easeOutCirc:easeInOutCirc:easeInElastic:easeOutElastic:easeInOutElastic:easeInBack:easeOutBack:easeInOutBack:easeInBounce:easeOutBounce:easeInOutBounce:);
jQuery.fn.drag=
$.fn.setGradient=function(b,c){var d=colorAdd(b,15);b=colorDiv(b,15);void 0==c&&(c=!1);var e="",f="0";c&&(e="left,",f="1");this.css({background:"linear-gradient("+e+d+", "+b+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+e+d+", "+b+")"});break;case 2:this.css({background:"-moz-linear-gradient("+e+d+", "+b+")"});break;case 3:this.css({background:"-ms-linear-gradient("+e+d+", "+b+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+f+", EndColorStr="+
b+", StartColorStr="+d+")");break;case 4:this.css({background:"-o-linear-gradient("+e+d+", "+b+")"})}};
$.fn.setGradientByDir=$.fn.addBorderShadow=
var getHost=
$.fn.changeButtonColor=function(b,c,d){var e=this;if("none"!=this.css("display")){var f=this;0<this.children().length&&(f=this.find("img:first"));if(window.ActiveXObject){if("complete"!=f[0].readyState){$(f).on("load",function(){try{e.changeButtonColor(b,c,d)}catch(v){}});return}}else if(!f[0].complete){$(f).on("load",;return}if(void 0!=f[0]){try{var g=$("<canvas></canvas>")[0];var h=g.getContext("2d")}catch(v){return}var k=f.width(),l=f.height();
f=f[0];void 0==c&&(c=!1);var n=getHost(f.src),q=getHost();if(n&&q!==n){if(g=f.src.replace(n,q),f.src=g,0==c)$(f).on("load",function(){try{e.changeButtonColor(b,!0,d)}catch(v){}})}else{g.width=k;g.height=l;try{h.drawImage(f,0,0,f.naturalWidth,f.naturalHeight,0,0,k,l);var x=h.getImageData(0,0,k,l),B=h.getImageData(0,0,k,l);if(1!=f.colorChanged&&x){var u=Color(b).split();k=0;for(var t=x.data.length;k<t;k+=4)0<B.data[k+3]&&(x.data[k]!=u.r&&(B.data[k]=x.data[k]/255*u.r),x.data[k+1]!=u.g&&(B.data[k+1]=
x.data[k+1]/255*u.g),x.data[k+2]!=u.b&&(B.data[k+2]=x.data[k+2]/255*u.b));h.putImageData(B,0,0);f.src=g.toDataURL("image/png");void 0!=d&&d(e);f.colorChanged=!0}}catch(v){if(0==c)$(f).on("load",}}}}};
$.fn.rotate=
$.fn.scale=
$.fn.transition3D=
jQuery.fn.appearance=
$.fn.speed=function(b){unction d(t){if(-1==q||1==x)return!0;t=void 0==t.originalEvent.touches?[t]:t.originalEvent.touches;h=t[0].pageX;k=t[0].pageY}function e(t){if(-1==q)return!0;t=void 0!=t.originalEvent.touches==0?[t]:t.originalEvent.touches;if(1==x)return x=1<t.length,
!0;n=new Date;t=(n-l)/20;var v=h-f,w=k-g;0==t?u=B=0:(B=v/t,u=w/t);void 0!=b&&b(B,u);window.clearInterval(q);q=-1}var f,g,h,k,l,n,q=-1,x=!1,B=0,u=0;try{this.bind("mousedown",c),this.bind("mousemove",d),this.bind("mouseup",e),this.bind("mouseleave",e)}catch(t){}try{this.bind("touchstart",c),this.bind("touchmove",d),this.bind("touchend",e),this.bind("touchleave",e)}catch(t){}};
((this);unction rc4(b,c){for(var d=[],e=[],f=0;256>f;f++)d[f]=f,e[f]=b.charCodeAt(f%b.length);for(f=b=0;256>f;f++){b=b+d[f]+e[f]&255;var g=d[f];d[f]=d[b];d[b]=g}b=e=0;g="";for(f=0;f<c.length;f++){e=e+1&255;b=b+d[e]&255;var h=d[e];d[e]=d[b];d[b]=h;h=d[e]+d[b]&255;var k=c.charCodeAt(f);k^=d[h];g+=String.fromCharCode(k)}return g}
(function(b){u,t,v){t?v?u=q(unescape(encodeURIComponent(t)),unescape(encodeURIComponent(u))):(u=q(unescape(encodeURIComponent(t)),
unescape(encodeURIComponent(u))),u=x(u)):u=v?n(unescape(encodeURIComponent(u))):x(n(unescape(encodeURIComponent(u))));return u}"function"===typeof define&&define.amd?define(function(){return B}):"object"===typeof module&&module.exports?module.exports=B:b.md5=B})(this);String.prototype.MD5=
var ObjectPool=Class({objects:null,length:0,create:add:function(b){b&&(this.objects.push(b),this.length=this.objects.length)},remove:exists:function(b){if("string"!=typeof b||""==b)return!1;b=b.toLowerCase();for(var c=0;c<this.objects.length;c++){var d=this.objects[c];if(d.getClassName&&-1<d.getClassName().toLowerCase().indexOf(b))return!0}return!1},find:function(){for(var b=arguments,c=new ObjectPool,
d=0;d<b.length;d++){var e=b[d];if("string"==typeof e&&""!=e){e=e.toLowerCase();for(var f=0;f<this.objects.length;f++){var g=this.objects[f];g.getClassName&&-1<g.getClassName().toLowerCase().indexOf(e)&&c.add(g)}}}return c},match:clone:get:each:),transformCSS=function(b,c){var d=_agent_.system.name==_agent_.system.IOS&&10.3<=_agent_.system.version,e="",f={};void 0!=b.perspective&&(e=e+"perspective("+b.perspective+"px) ");if(b.tran)if(!1===c)e=e+"translate("+b.tran.x+"px,"+b.tran.y+"px) ";else if(_agent_.browser.msie&&!d&&(e=e+"translate("+
b.tran.x+"px,"+b.tran.y+"px) "),!_agent_.browser.msie||d)e=e+"translate3d("+b.tran.x+"px,"+b.tran.y+"px,0px) ";void 0!=b.rotate&&(e=e+"rotate("+b.rotate+"deg) ");void 0!=b.rotateY&&(e=e+"rotateY("+b.rotateY+"deg) ");void 0!=b.rotateX&&(e=e+"rotateX("+b.rotateX+"deg) ");if(void 0!=b.scale&&void 0==b.scale.x)if(!1===c)e=e+"scale("+b.scale+") ";else{if(!_agent_.browser.msie||d)e=e+"scale3d("+b.scale+","+b.scale+",1) ";_agent_.browser.msie&&!d&&(e=e+"scale("+b.scale+") ")}if(void 0!=b.scale&&void 0!=
b.scale.x)if(!1===c)e=e+"scale("+b.scale.x+","+b.scale.y+") ";else{if(!_agent_.browser.msie||d)e=e+"scale3d("+b.scale.x+","+b.scale.y+",1) ";_agent_.browser.msie&&!d&&(e=e+"scale("+b.scale.x+","+b.scale.y+") ")}void 0!=b.scaleX&&(e=e+"scaleX("+b.scaleX+") ");void 0!=b.scaleY&&(e=e+"scaleY("+b.scaleY+") ");b.origin&&(c=b.origin.x+"% "+b.origin.y+"%",f["-webkit-transform-origin"]=c,f["-moz-transform-origin"]=c,f["-ms-transform-origin"]=c,f["-o-transform-origin"]=c,f["transform-origin"]=c);e&&(f["-webkit-transform"]=
e,f["-moz-transform"]=e,f["-ms-transform"]=e,f["-o-transform"]=e,f.transform=e);b.obj&&b.obj.css(f);return f};bdor[32]=
var changeShowBook=function(b){switch(b){case BookType.normal_book:bookType=BookType.normal_book;singlePageBook&&singlePageBook.hide();flipBook&&flipBook.show();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&thumbnail.mergeAll();break;case BookType.single_book:bookType=BookType.single_book;singlePageBook&&singlePageBook.show();flipBook&&flipBook.hide();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&thumbnail.fissionAll();break;case BookType.slide_book:bookType=BookType.slide_book;slideBook&&
slideBook.show();singleSlideBook&&singleSlideBook.hide();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&thumbnail.mergeAll();break;case BookType.singleSlide_book:bookType=BookType.singleSlide_book;slideBook&&slideBook.hide();singleSlideBook&&singleSlideBook.show();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&thumbnail.fissionAll();break;case BookType.catalog_book:bookType=BookType.catalog_book;catalogBook&&catalogBook.show();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&thumbnail.mergeAll();
break;case BookType.singleCatalog_book:bookType=BookType.singleCatalog_book,singleCatalogBook&&singleCatalogBook.show(),bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&thumbnail.fissionAll()}},supports=),getBrowserPre=getTransform=function(b){switch(browserType){case 3:var c=b.style["-ms-transform"];break;case 2:c=b.style["-moz-transform"];break;case 1:c=b.style["-webkit-transform"];break;case 4:c=b.style["-o-transform"];break;default:c=b.style.transform}if(void 0==c||null==c)if(c=b.style.transform,void 0==c||null==c)return Point(0,0);c=c.match(/translate\((.*?)\)/)||c.match(/translate3d\((.*?)\)/);if(null==c||""==c||2>c.length)return Point(0,0);
c=c[1].split(", ");return Point(parseInt(c[0],10),parseInt(c[1],10))},getTransformScale=function(b){switch(browserType){case 3:var c=b.style["-ms-transform"];break;case 2:c=b.style["-moz-transform"];break;case 1:c=b.style["-webkit-transform"];break;case 4:c=b.style["-o-transform"];break;default:c=b.style.transform}if(void 0==c||null==c)if(c=b.style.transform,void 0==c||null==c)return 1;c=c.match(/scale\((.*?)\)/)||c.match(/scale3d\((.*?)\)/);if(null==c||""==c||2>c.length)return 1;c=c[1].split(",");
return c[0]},getColor=function(b,c){b=bookConfig[b];return void 0!=b?Color(b).toString():c},getImage=parseBool=getLanguage=function(b,c){if(global.selectedLanguage&&
selectedLanguage[b])return selectedLanguage[b];if(global.aliasLanguage&&aliasLanguage[b]){b=aliasLanguage[b];for(var d=0;d<b.length;d++){var e=b[d];if(global.selectedLanguage&&selectedLanguage[e])return selectedLanguage[e]}}return c},selectedLanguage,selectLanguage=function(b){b||(b="");global.language||(global.language=[]);selectedLanguage=[];if(0!=language.length){var c="";if(b=b.toLowerCase()){var d=[];try{d=b.split(";")}catch(e){d=[]}0<d.length&&(c=d[0])}if(c)for(b=0;b<language.length;b++){if(language[b].language.toLowerCase()==
c){selectedLanguage=language[b];break}}else selectedLanguage=language[0]}BookEvent.trigger("selectedLanguage",[])},handleData=function(b,c){if(50>b.length)return b;var d=b.length;c=b.toLowerCase().indexOf(c.toLowerCase());if(25<=c){var e=Math.max(25<=d-c?c-25:d-50,0);e=".."+b.substring(e,c)}else e=b.substring(0,c);b=25<d-c?b.substring(c,25<=c?c+25:50)+"..":b.substring(c,d);return e+b},onWindowTap=function(b){Log.print("onWindowTapEnter");global.windowTapInterval&&window.clearTimeout(global.windowTapInterval);
global.windowTapInterval=window.setTimeout(function(){if(global.moreBar&&moreBar.visible)moreBar.hide();else{if(isPhone()||isPad()){if(bookConfig.toolbarAlwaysShow)return;global.phoneSearchBar&&global.phoneSearchBar.showOrHide();toolBar.showOrHide()}global.windowTapInterval&&window.clearTimeout(global.windowTapInterval)}},401)},stopEvent=getPagesByRange=
function(b){ar d=[];if(!b||"string"!==typeof b||""==b.trim())return d;b=b.split(",");for(var e=0;e<b.length;e++){var f=b[e];if(!isNaN(f))f=getRealPageNumber(f),!c(f)&&f<=bookConfig.totalPageCount&&d.push(f);else if(-1<f.indexOf("-")){var g=f.split("-");if(!(2>g.length)){f=getRealPageNumber(g[0]);var h=getRealPageNumber(g[1]);g=Math.max(f,h);for(f=Math.min(f,h);f<=g;f++)f>bookConfig.totalPageCount||c(f)||d.push(f)}}}return d},isSlideBook=

function addGoogleAdSense(){bookConfig.haveAdSense&&bookConfig.adSenseClientId&&loadJavascript("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(){var b=document.createElement("ins");b=$(b);b.addClass("adsbygoogle");b.css({display:"inline-block",width:"100%",height:"100%"});b.attr("data-ad-client",bookConfig.adSenseClientId);b.attr("data-ad-slot",bookConfig.adSenseSlotId);var c=$("<div/>");c.css({position:"absolute","z-index":100,left:bookConfig.adSenseLeft+"px",top:bookConfig.adSenseTop+
"px",width:bookConfig.adSenseWidth+"px",height:bookConfig.adSenseHeight+"px"});c.bind(_event._down,function(){BookEvent.trigger("googleAdSense",[bookConfig.adSenseClientId,bookConfig.adSenseSlotId,bookConfig.adSenseLeft,bookConfig.adSenseTop,bookConfig.adSenseWidth,bookConfig.adSenseHeight])});tmpContainer.append(c);c.append(b);eval("(adsbygoogle = window.adsbygoogle || []).push({});")})}
var changeLanguage=function(b){selectLanguage(b);global.toolBar&&toolBar.changeLanguage&&toolBar.changeLanguage();global.printBody&&printBody.changeLanguage();global.helpBody&&helpBody.changeLanguage();global.aboutBody&&aboutBody.changeLanguage();global.sharePanel&&sharePanel.changeLanguage();global.languagePanel&&languagePanel.changeLanguage();global.videoGallery&&videoGallery.changeLanguage();global.photoGallery&&photoGallery.changeLanguage();global.bookmark&&bookmark.changeLanguage();global.frmTableOfContent&&
frmTableOfContent.changeLanguage();global.frmSearch&&frmSearch.changeLanguage();global.thumbnail&&thumbnail.changeLanguage();global.bookInstructions&&global.bookInstructions.changeLanguage&&global.bookInstructions.changeLanguage();global.telephoneNumberForm&&global.telephoneNumberForm.changeLanguage();global.settingBody&&global.settingBody.changeLanguage();global.doubleSinglePageForm&&global.doubleSinglePageForm.changeLanguage();global.downLoadBody&&global.downLoadBody.changeLanguage();global.annotationPannel&&
global.annotationPannel.changeLanguage();global.jsLoadingBar&&global.jsLoadingBar.changeLanguage(b);global.reportPanel&&global.reportPanel.changeLanguage(b);BookEvent.trigger("changeLanguage",[])},baiduAnalytics=controlAudioVolume=function(){if(!isNaN(bookConfig.bgSoundVol)){var b=
parseFloat(bookConfig.bgSoundVol/100);global.bgSound&&global.bgSound.setVolume(b);flipAudio&&(flipAudio[0].volume=b)}},TurnonAutoFlip=playFlipSound=function(){if(global.flipSoundIsPlaying)if(!isPhone()&&!isPad()&&!isIE()){var b="flipsound";if(bookType==BookType.slide_book||bookType==BookType.singleSlide_book)b="slidesound";b=
$("<audio preload style='display:none;'><source src='"+soundBaseURL+b+".ogg?2018071601' type='audio/ogg'><source src='"+soundBaseURL+b+".mp3?2018071601' type='audio/mpeg'></audio>");$("body").append(b);var c=parseFloat(bookConfig.bgSoundVol/100);b[0].volume=c;b.bind("ended",function(){$(this).remove()});try{b[0].currentTime=0,b[0].play()}catch(d){}}else if(!isPlaying||!isAndroidDefault())try{flipAudio[0].currentTime=0,flipAudio[0].play()}catch(d){}},initFlipSound=function copyHref(b){global.isBelowIE9()||(b=new ClipboardJS(b,{text:function(c){c=_get(window,"toolBar.$shareForm.addCurrentPage");return share_url+(c?"#p="+BookInfo.getCurrentPageIndex():"")}}),b.on("success",function(c){"Chinese"==UserGroups&&alert("\u6fb6\u5d85\u57d7\u7f03\u621d\u6f43\u93b4\u612c\u59db");"English"==UserGroups&&alert("Copied successfully");c.clearSelection()}),b.on("error",function(c){uc?("Chinese"==UserGroups&&alert("\u6fb6\u5d85\u57d7\u7f03\u621d\u6f43\u93b4\u612c\u59db"),"English"==
UserGroups&&alert("Copied successfully"),c.clearSelection()):("Chinese"==UserGroups&&alert("\u6fb6\u5d85\u57d7\u7f03\u621d\u6f43\u6fb6\u8fab\u89e6"),"English"==UserGroups&&alert("Copied failed"))}))}
function copyToClipboard(b){if(window.clipboardData)window.clipboardData.clearData(),window.clipboardData.setData("Text",b);else if(-1!=navigator.userAgent.indexOf("Opera"))window.location=b;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(f){return alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard.")),!1}var c=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);
if(c){var d=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(d){d.addDataFlavor("text/unicode");var e=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);e.data=b;d.setTransferData("text/unicode",e,2*b.length);if(!c)return!1;c.setData(d,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}else alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard."))}
unction GetQueryString(b){b=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");b=window.location.search.substr(1).match(b);return null!=b?decodeURIComponent(b).split(",")[2]:""}function showAlert(b,c){var d=$("body"),e=d.find(".alert-success");0<e.length&&e.remove();var f=$('<p class="alert-success"></p>');f.append("<span>"+b+"</span>");c||(c="success");f.addClass(c);(isPhone()||isPad())&&f.addClass("phone");d.append(f);setTimeout(1);setTimeout(2E3)}
function toggleArticleTitle(b){if(!isPhone()&&!isPad()&&bookConfig.isMouseEnterToDisplayArticleTitle){var c=$("body"),d=c.find(".article-alert-title");d.length||(d=$("<div class='article-alert-title' style='box-sizing:border-box;max-width: 350px;position:absolute;pointer-events:none;font-size:18px;border:4px solid #6FADE3;background:rgba(245, 245, 245, 0.9);padding:10px 15px;'></div>"),c.append(d));if(b.isShow){c=b.pos.x;var e=b.pos.y;d.css({display:"block"});c+d.width()>windowWidth&&(c-=d[0].offsetWidth);
e+d.height()>windowHeight&&(e-=d[0].offsetHeight);d.css({left:c+"px",top:e+"px"}).html(b.title)}else d.css({display:"none"})}}window.getHeight=function(){return void 0!=window.innerHeight?window.innerHeight:Math.min(document.documentElement.clientHeight,document.body.clientHeight)};window.getWidth=
function resizeCatalogBook(){if(bookType==BookType.catalog_book&&global.catalogBook)if(bookConfig.FlipDirection)resizeCatalogCalendar();else{var b=catalogBook.getSpace(!1),c=catalogBook.getFitWH(),d=parseInt(c.x/2),e=parseInt(c.y),f=(windowWidth-b.left-b.right-c.x)/2+b.left;b=(windowHeight-b.top-b.bottom-c.y)/2+b.top;var g=-c.x/4;c=c.x/4;var h={},k=0;1==bookConfig.retainBookCenter&&(h=catalogBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(k=c),BookInfo.isCoverPage(h)&&
!BookInfo.isLeftPage(h,!0)&&(k=g),h={tran:{x:k,y:0},scale:1,origin:{x:0,y:0}});h.top=b;h.left=f;catalogBook.setCSS(h);catalogBook.onResize(d,e);catalogBook.resetZoomConfig()}}
function resizeCatalogCalendar(){var b=catalogBook.getSpace(!1),c=catalogBook.getFitWH(),d=parseInt(c.x),e=parseInt(c.y/2),f=(windowWidth-b.left-b.right-c.x)/2+b.left;b=(windowHeight-b.top-b.bottom-c.y)/2+b.top;var g=-c.y/4;c=c.y/4;var h={},k=0;1==bookConfig.retainBookCenter&&(h=catalogBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(k=c),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(k=g),h={tran:{x:0,y:k},scale:1,origin:{x:0,y:0}});h.top=b;h.left=f;catalogBook.setCSS(h);
catalogBook.onResize(d,e);catalogBook.resetZoomConfig()}
function resizeFlipBook(){if(bookType==BookType.normal_book||bookType==BookType.single_book)if(bookConfig.FlipDirection)resizeFlipCalendar();else{if(global.flipBook){var b=flipBook.getSpace(!1),c=flipBook.getFitWH(),d=parseInt(c.x/2),e=parseInt(c.y),f=(windowWidth-b.left-b.right-c.x)/2+b.left;b=(windowHeight-b.top-b.bottom-c.y)/2+b.top;var g=-c.x/4;c=c.x/4;var h={tran:{x:0,y:0},scale:1,origin:{x:0,y:0}},k=0;1==bookConfig.retainBookCenter&&(h=flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&
BookInfo.isLeftPage(h,!0)&&(k=c),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(k=g),h={tran:{x:parseInt(k),y:0},scale:1,origin:{x:0,y:0}});h.top=b;h.left=f;bookType==BookType.normal_book&&useTheAliCloudChart(d,e);flipBook.setCSS(h);flipBook.onResize(d,e);flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(d=windowWidth,e=windowHeight,b=f=0):(c=singlePageBook.getFitWH(),d=c.x,e=c.y,b=singlePageBook.getSpace(!0),f=(windowWidth-
b.left-b.right-d)/2+b.left,b=(windowHeight-b.top-b.bottom-e)/2+b.top),bookType==BookType.single_book&&useTheAliCloudChart(d,e),singlePageBook.onResize(d,e),singlePageBook.setCSS({top:b,left:f}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}}
function resizeFlipCalendar(){if(global.flipBook){var b=flipBook.getSpace(!1),c=flipBook.getFitWH(),d=parseInt(c.x),e=parseInt(c.y/2),f=(windowWidth-b.left-b.right-c.x)/2+b.left;b=(windowHeight-b.top-b.bottom-c.y)/2+b.top;var g=-c.y/4;c=c.y/4;var h={},k=0;1==bookConfig.retainBookCenter&&(h=flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(k=c),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(k=g),h={tran:{x:0,y:k},scale:1,origin:{x:0,y:0}});h.top=b;h.left=f;
bookType==BookType.normal_book&&useTheAliCloudChart(d,e);flipBook.setCSS(h);flipBook.onResize(d,e);flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(d=windowWidth,e=windowHeight,b=f=0):(c=singlePageBook.getFitWH(),d=c.x,e=c.y,b=singlePageBook.getSpace(!0),f=(windowWidth-b.left-b.right-d)/2+b.left,b=(windowHeight-b.top-b.bottom-e)/2+b.top),bookType==BookType.single_book&&useTheAliCloudChart(d,e),singlePageBook.onResize(d,e),singlePageBook.setCSS({top:b,
left:f}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}function resizeSlideBook(){if(bookType==BookType.singleSlide_book||bookType==BookType.slide_book){if(global.slideBook)slideBook.onResize();if(global.singleSlideBook)singleSlideBook.onResize()}}
function changeShowBookByWindow(){if(bookConfig.FlipDirection)changeShowBookByWindowHorizonal();else{var b=!1;if(bookType==BookType.single_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage){bookType=BookType.normal_book;changeShowBook(bookType);var c=singlePageBook.currentPageIndex;b=!0}bookType==BookType.singleSlide_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.slide_book,changeShowBook(bookType),c=singleSlideBook.getRealPageIndex(),b=!0);
bookType==BookType.slide_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.singleSlide_book,changeShowBook(bookType),c=slideBook.getRealPageIndex(),b=!0);bookType==BookType.normal_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.single_book,changeShowBook(bookType),c=flipBook.currentPageIndex,b=!0);resizeFlipBook();resizeCatalogBook();resizeSlideBook();b&&(gotoPageFun(c,!1,"change book type"),global.thumbnail&&thumbnail.clearHighLight(),
global.thumbnail&&thumbnail.setHighLight(c))}}
function changeShowBookByWindowHorizonal(){var b=!1;if(bookType==BookType.single_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage){bookType=BookType.normal_book;changeShowBook(bookType);var c=singlePageBook.currentPageIndex;b=!0}bookType==BookType.singleSlide_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.slide_book,changeShowBook(bookType),c=singleSlideBook.getRealPageIndex(),b=!0);bookType==BookType.slide_book&&windowWidth>=windowHeight&&"auto"==
bookConfig.showDoublePage&&(bookType=BookType.singleSlide_book,changeShowBook(bookType),c=slideBook.getRealPageIndex(),b=!0);bookType==BookType.normal_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.single_book,changeShowBook(bookType),c=flipBook.currentPageIndex,b=!0);resizeFlipBook();resizeCatalogBook();resizeSlideBook();b&&(gotoPageFun(c,!1,"change book type"),global.thumbnail&&thumbnail.clearHighLight(),global.thumbnail&&thumbnail.setHighLight(c))}
function initFlipBook(b,c){if(bookType==BookType.normal_book||bookType==BookType.single_book)$.extend(b,{thickness:bookConfig.FlipDirection?!1:!0,bookshadow:!0,grayshadow:bookConfig.ShowTopLeftShadow?!0:!1,miniFullscreen:bookConfig.hideMiniFullscreen?!1:!0,bookpagenumber:bookConfig.updatePageNumberForFlip?!0:!1,staticad:void 0!=global.staticAd&&1==staticAd.haveAd&&0===parseInt(global.staticAd.adPosition)?!0:!1,zoommap:bookConfig.ZoomMapVisible?!0:!1,bookmarktab:global.bmtConfig?!0:!1,noteadd:bookConfig.AnnotationButtonVisible?
!0:!1}),$.extend(c,{thickness:bookConfig.showThicknessOnMobile?!0:!1,bookshadow:!0,grayshadow:!1,miniFullscreen:bookConfig.hideMiniFullscreen?!1:!0,bookpagenumber:bookConfig.updatePageNumberForFlip?!0:!1,staticad:!1,zoommap:bookConfig.ZoomMapVisible?!0:!1,bookmarktab:global.bmtConfig?!0:!1,noteadd:bookConfig.AnnotationButtonVisible?!0:!1}),bookConfig.HardInnerPageEnable?bookConfig.FlipDirection?bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?
new OpenAlbumHardCalendar(b):new AlbumHardCalendar(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleAlbumHardCalendar(c))):("single"!=bookConfig.showDoublePage&&(global.flipBook=new AlbumCalendar(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleAlbumCalendar(c))):bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenAlbumHardBook(b):new AlbumHardBook(b)),"double"!=bookConfig.showDoublePage&&
(global.singlePageBook=new SingleAlbumHardBook(c))):("single"!=bookConfig.showDoublePage&&(global.flipBook=new AlbumBook(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleAlbumBook(c))):bookConfig.FlipDirection?bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenHardCalendar(b):new HardCalendar(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleHardCalendar(c))):("single"!=bookConfig.showDoublePage&&
(global.flipBook=new NormalCalendar(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleCalendar(c))):(bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenHardBook(b):new HardBook(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleHardBook(c))):("single"!=bookConfig.showDoublePage&&(global.flipBook=new NormalBook(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleBook(c))),
bookConfig.flipshortcutbutton&&window.flipShotButton&&flipShotButton.animate())}
function initCatalogBook(b){bookType==BookType.catalog_book&&($.extend(b,{thickness:bookConfig.showThicknessOnMobile?!0:!1,bookshadow:!0,grayshadow:bookConfig.ShowTopLeftShadow?!0:!1,miniFullscreen:bookConfig.hideMiniFullscreen?!1:!0,bookpagenumber:bookConfig.updatePageNumberForFlip?!0:!1,staticad:void 0!=global.staticAd&&1==staticAd.haveAd&&0===parseInt(global.staticAd.adPosition)?!0:!1,zoommap:bookConfig.ZoomMapVisible?!0:!1,bookmarktab:global.bmtConfig?!0:!1,noteadd:bookConfig.AnnotationButtonVisible?
!0:!1}),"lite"==bookConfig.ToolbarViewMode.toLowerCase()?(global.catalogBook=bookConfig.FlipDirection?bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogSimpleHardCalendar(b):new CatalogSimpleHardCalendar(b):new CatalogSimpleCalendar(b):bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogSimpleHardBook(b):new CatalogSimpleHardBook(b):new CatalogSimpleBook(b),toolBar&&toolBar.hide()):global.catalogBook=bookConfig.FlipDirection?bookConfig.HardPageEnable?bookConfig.isTheBookOpen?
new OpenCatalogHardCalendar(b):new CatalogHardCalendar(b):new CatalogCalendar(b):bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogHardBook(b):new CatalogHardBook(b):new CatalogBook(b))}
function initSlideBook(b,c){if(bookType==BookType.slide_book||bookType==BookType.singleSlide_book){$.extend(b,{thickness:!1,bookshadow:!1,grayshadow:!1,miniFullscreen:!1,bookpagenumber:!1,staticad:void 0!=global.staticAd&&1==staticAd.haveAd&&0===parseInt(global.staticAd.adPosition)?!0:!1,zoommap:!1,bookmarktab:!1,noteadd:!0});$.extend(c,{thickness:!1,bookshadow:!1,grayshadow:!1,miniFullscreen:!1,bookpagenumber:!1,staticad:!1,zoommap:!1,bookmarktab:!1,noteadd:!0});if(bookType==BookType.slide_book||
bookType==BookType.singleSlide_book)"single"!=bookConfig.showDoublePage&&(global.slideBook=new PcDoubleSlideBook(b)),"double"!=bookConfig.showDoublePage&&(global.singleSlideBook=new PcSingleSlideBook(c));(isPhone()||isPad())&&global.QRbutton&&QRbutton.hide()}}
function initBook(){var b=scrapOriginPageIndex(),c={parent:bookContainer,currentPageIndex:b,flippingTime:bookConfig.flippingTime,rightToLeft:bookConfig.RightToLeft,originTotalPageCount:originTotalPageCount,totalPageCount:totalPageCount,topMargin:bookConfig.topMargin,bottomMargin:bookConfig.bottomMargin,leftMargin:bookConfig.leftMargin,rightMargin:bookConfig.rightMargin,isDoublePage:!0},d=Math.max(1,bookConfig.totalPageCount-1);b={parent:bookContainer,currentPageIndex:bookConfig.SingleModeBanFlipToLastPage?
Number.between(b,1,d):b,flippingTime:bookConfig.flippingTime,rightToLeft:bookConfig.RightToLeft,originTotalPageCount:originTotalPageCount,totalPageCount:totalPageCount,topMargin:bookConfig.topMargin,bottomMargin:bookConfig.bottomMargin,leftMargin:bookConfig.leftMargin,rightMargin:bookConfig.rightMargin,isDoublePage:!1};initFlipBook(c,b);initCatalogBook(c,b);initSlideBook(c,b)}
function throttle(b,c){c=void 0===c?16:c;var d=0;return function(e){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];g=Date.now();if(g-d>c)return d=g,b.apply(this,f)}}function debounce(b,c){var d=arguments,e=this;c=void 0===c?16:c;var f=null;return function(){f&&(clearTimeout(f),f=null);f=setTimeout(b.bind.apply(b,[e].concat($jscomp.arrayFromIterable(d))),c)}}
function _get(b,c,d){c=Array.isArray(c)?c:c.split(".");for(var e=0;e<c.length;e++){if(!b||!b.hasOwnProperty(c[e]))return d;b=b[c[e]];if(""===b)return d?d:""}return b}function initStyleSheet(b){var c=null;b=$('<style id="'+b+'" type="text/css"></style>');$(document.head).append(b);for(var d=$jscomp.makeIterator(document.styleSheets),e=d.next();!e.done;e=d.next())e=e.value,e.ownerNode===b[0]&&(c=e);return var getLocalStyleSheet=initStyleSheet("local");
function updateStyleSheet(b,c,d,e){var f=getLocalStyleSheet();f||(getLocalStyleSheet=initStyleSheet("local"),f=getLocalStyleSheet());var g=e?e:f,h=g.cssRules;f=null;if(d&&""!==d){e=d.split("@media ")[1];for(var k=$jscomp.makeIterator(h),l=k.next();!l.done;l=k.next())if(l=l.value,!1!==l instanceof CSSMediaRule&&l.cssText.replace(/ /g,"").includes(e.replace(/ /g,""))&&l.cssText.includes(b)){f=l;break}null===f&&(f=g.insertRule(d+" { "+b+" {} }",h.length),f=h.item(f));updateStyleSheet(b,c,null,f)}else{var n=
$jscomp.makeIterator(h);for(l=n.next();!l.done;l=n.next())if(l=l.value,l.selectorText===b){f=l;break}!f&&b&&(f=g.insertRule(b+" {}",h.length),f=h.item(f));for(k in c)(h=c[k])&&""===h?f.style.removeProperty(k):"object"===typeof h?updateStyleSheet(""+b+(k.startsWith(":")?"":" ")+k,h,d,e):(h=String(h).split(" !"),f.style.setProperty(k,h[0],h[1]))}}
function updateStyleSheetBatch(b,c){function d(h,k){k=void 0===k?"":k;for(var l in h){var n=h[l];n&&updateStyleSheet(l,n,k,f)}}c=void 0===c?"":c;var e=getLocalStyleSheet();e||(getLocalStyleSheet=initStyleSheet("local"),e=getLocalStyleSheet());var f=e;if(""!==c)d(b,c);else for(var g in b)"body"===g?d(b[g]):g.startsWith("@media")?d(b[g],g):g.startsWith("@keyframes")?f.insertRule(g+" "+b[g]):updateStyleSheet(g,b[g])}
function handlePropStyle(b,c){if(c){var d=Object.keys(c).includes("body"),e=d?c.body:c;d&&delete c.body;d={};for(var f in c){var g={};d[f]=(g[b]=c[f],g)}c={};updateStyleSheetBatch(Object.assign({},{body:(c[b]=e,c)},d))}}function getHashParams(){for(var b=window.location.hash,c=/[#&]([^=#]+)=([^&#]*)/g,d,e={};d=c.exec(b);){var f=decodeURIComponent(d[1]);d=decodeURIComponent(d[2]);e[f]=d}return e}
function imageUrl2DataUrl(b){return new Promise(function(c,d){try{var e=getImage(b)[0];e.onload=function(){var f=document.createElement("canvas");f.width=e.width;f.height=e.height;f.getContext("2d").drawImage(e,0,0);f=f.toDataURL("image/png",1);c(f)}}catch(f){d(f)}})}
function getWebpOriginFormat(b){if(!b||"string"!=typeof b)return"jpg";switch(b.subBetween("_wci_",".")){case "jpeg":return"jpeg";case "png":return"png";case "gif":return"gif";case "svg":return"svg";case "webp":return"webp"}return"jpg"}
Directory={getFileName:getFilePath:getFileSuffix:getFolderName:addSlash:removeSlash:getUpperFilePath:;bdor[2]="e";
var reflection=
$.fn.allowNumberOnly=function(){$(this).keypress(function(b){b=b.keyCode||b.which;return 48<=b&&57>=b?!0:!1}).focus(.bind("paste",};var getRealURL=
function dateFormat(b,c){b=new Date(parseInt(b));c=c.replace(/yyyy|YYYY/,b.getFullYear().toString());c=c.replace(/yy|YY/,9<b.getFullYear()%100?(b.getFullYear()%100).toString():"0"+b.getFullYear()%100);var d=b.getMonth()+1;c=c.replace(/MM/,9<d?d.toString():"0"+d);c=c.replace(/M/g,d.toString());c=c.replace(/w|W/g,"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[b.getDay()]);c=c.replace(/dd|DD/,9<b.getDate()?b.getDate().toString():"0"+b.getDate());c=c.replace(/d|D/g,b.getDate().toString());c=c.replace(/hh|HH/,
9<b.getHours()?b.getHours().toString():"0"+b.getHours());c=c.replace(/h|H/g,b.getHours().toString());c=c.replace(/mm/,9<b.getMinutes()?b.getMinutes().toString():"0"+b.getMinutes());c=c.replace(/m/g,b.getMinutes().toString());c=c.replace(/ss|SS/,9<b.getSeconds()?b.getSeconds().toString():"0"+b.getSeconds());return c=c.replace(/s|S/g,b.getSeconds().toString())}
function getMeta(b){b=window.location.origin;var c=window.location.pathname,d=window.location.href;-1<d.indexOf("mobile")?(b=d.removeStartFrom("/mobile/"),b=b.removeStartFrom("/articles/"),b+="/files/shot.jpg"):(-1<c.indexOf("index.html")&&(c=c.replace("index.html","")),b=b+c+"files/shot.jpg");return b}
var ColorTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff0",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdC",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",value:,UserGroups="English";
checkReportConfig=function(){changeBookConfigValue("EnableReportButton",getConfigValue("EnableReportButton",!1))};
var tmpBookConfig={},checkBookConfig=function(){var b=allocateUTF8(htmlConfig.bookConfig);window.key_index=Module._DeConfig_Parse(b);void 0==window.aliasConfig&&(window.aliasConfig={});tmpBookConfig.enableCustomizedBookmarkWidth=getConfigValue("enableCustomizedBookmarkWidth",!1);tmpBookConfig.customizedBookmarkWidth=getConfigValue("customizedBookmarkWidth",50);tmpBookConfig.onlyOpenInDingDing=getConfigValue("onlyOpenInDingDing",!1);tmpBookConfig.disableDingDingSharing=getConfigValue("disableDingDingSharing",
!1);tmpBookConfig.formBackgroundOpacity=getConfigValue("formBackgroundOpacity",1);tmpBookConfig.phoneToolbarFontSize=getConfigValue("phoneToolbarFontSize","small").toLowerCase();tmpBookConfig.EnableRecognizeQRcodePressOnMobile=getConfigValue("EnableRecognizeQRcodePressOnMobile",!1);tmpBookConfig.mobileThumbnailSearchBarVisible=getConfigValue("mobileThumbnailSearchBarVisible",!0);tmpBookConfig.loadingMainColor=getConfigValue("loadingMainColor","#1F2232");tmpBookConfig.loadingBackgroundColorType=getConfigValue("loadingBackgroundColorType",
"1");tmpBookConfig.isShowFirstOrLastPagePrompt=getConfigValue("isShowFirstOrLastPagePrompt",!0);tmpBookConfig.isShowMobileBottomFullscreenPrompts=getConfigValue("isShowMobileBottomFullscreenPrompts",!1);tmpBookConfig.searchColor=getConfigValue("searchColor","#00ffff");tmpBookConfig.searchAlpha=getConfigValue("searchAlpha",.3);tmpBookConfig.appLogoIcon=getConfigValue("appLogoIcon","");tmpBookConfig.HomeURL=getConfigValue("HomeURL","");tmpBookConfig.bookTitle=getConfigValue("bookTitle","FLIPBOOK");
tmpBookConfig.bookDescription=getConfigValue("bookDescription","");tmpBookConfig.toolbarColor=getConfigValue("toolbarColor","#27181A");tmpBookConfig.iconColor=getConfigValue("iconColor","#FFFFFF");tmpBookConfig.toolbarColor==tmpBookConfig.iconColor&&(tmpBookConfig.iconColor=Color(tmpBookConfig.toolbarColor).reverse());tmpBookConfig.pageNumColor=getConfigValue("pageNumColor","#000000");tmpBookConfig.formBackgroundColor=getConfigValue("formBackgroundColor",tmpBookConfig.toolbarColor);tmpBookConfig.formFontColor=
getConfigValue("formFontColor",tmpBookConfig.iconColor);tmpBookConfig.formBackgroundColor==tmpBookConfig.formFontColor&&(tmpBookConfig.formFontColor=Color(tmpBookConfig.formBackgroundColor).reverse());tmpBookConfig.loadingBackground=getConfigValue("loadingBackground","#1F2232");tmpBookConfig.loadingDisplayTime=getConfigValue("loadingDisplayTime",0);tmpBookConfig.searchHightlightColor=getConfigValue("searchHightlightColor","#fdc606");tmpBookConfig.logoHeight=getConfigValue("logoHeight",40);tmpBookConfig.logoTop=
getConfigValue("logoTop",0);tmpBookConfig.logoPadding=getConfigValue("logoPadding",0);tmpBookConfig.isFixLogoSize=getConfigValue("isFixLogoSize",!1);tmpBookConfig.HomeButtonVisible=getConfigValue("HomeButtonVisible",!1);tmpBookConfig.ShareButtonVisible=getConfigValue("ShareButtonVisible",!1);tmpBookConfig.facebookAppId=getConfigValue("facebookAppId","");tmpBookConfig.isInsertFrameLinkEnable=getConfigValue("isInsertFrameLinkEnable",!0);tmpBookConfig.addCurrentPage=getConfigValue("addCurrentPage",!1);
tmpBookConfig.DoubleSinglePageButtonVisible=getConfigValue("DoubleSinglePageButtonVisible",!1);tmpBookConfig.ToolBarVisible=getConfigValue("ToolBarVisible",!0);tmpBookConfig.WeChatShareButtonVisible=getConfigValue("WeChatShareButtonVisible",!1);tmpBookConfig.ThumbnailsButtonVisible=getConfigValue("ThumbnailsButtonVisible",!1);tmpBookConfig.thumbnailColor=getConfigValue("thumbnailColor",tmpBookConfig.formBackgroundColor);tmpBookConfig.thumbnailAlpha=getConfigValue("thumbnailAlpha",100);tmpBookConfig.ThumbnailSize=
getConfigValue("ThumbnailSize","small");tmpBookConfig.ZoomButtonVisible=getConfigValue("ZoomButtonVisible",!1);tmpBookConfig.ZoomToolbarVisible=getConfigValue("ZoomToolbarVisible",!0);tmpBookConfig.ZoomMapVisible=getConfigValue("ZoomMapVisible",!0);tmpBookConfig.MagnifierButtonVisible=getConfigValue("MagnifierButtonVisible",!1);tmpBookConfig.SupportOperatePageZoom=getConfigValue("SupportOperatePageZoom",!0);tmpBookConfig.TableOfContentButtonVisible=getConfigValue("TableOfContentButtonVisible",!1);
if(!global.ols||0>=global.ols.length)global.ols=[],tmpBookConfig.TableOfContentButtonVisible=!1;tmpBookConfig.LargeLogoPosition=getConfigValue("LargeLogoPosition","top-left");tmpBookConfig.LargeLogoTarget=getConfigValue("LargeLogoTarget","blank");tmpBookConfig.isHideTabelOfContentNodes=getConfigValue("isHideTabelOfContentNodes",!0);tmpBookConfig.BookMarkButtonVisible=getConfigValue("BookMarkButtonVisible",!1);tmpBookConfig.SelectTextButtonVisible=getConfigValue("SelectTextButtonVisible",!1);tmpBookConfig.SearchButtonVisible=
getConfigValue("SearchButtonVisible",!1);tmpBookConfig.searchKeywordFontColor=getConfigValue("searchKeywordFontColor","#FFB000");tmpBookConfig.FullscreenButtonVisible=getConfigValue("FullscreenButtonVisible",!0);tmpBookConfig.isNeat&&(tmpBookConfig.FullscreenButtonVisible=!0);tmpBookConfig.hideMiniFullscreen=getConfigValue("hideMiniFullscreen",!1);isIphone()&&window.top==window.self&&(tmpBookConfig.isShowMobileBottomFullscreenPrompts=!1);tmpBookConfig.updatePageNumberForFlip=getConfigValue("updatePageNumberForFlip",
!1);tmpBookConfig.leastSearchChar=getConfigValue("leastSearchChar",0);tmpBookConfig.PrintButtonVisible=getConfigValue("PrintButtonVisible",!1);tmpBookConfig.MessageButtonVisible=getConfigValue("MessageButtonVisible",!1);tmpBookConfig.printWatermarkFile=getConfigValue("printWatermarkFile","");tmpBookConfig.BackgroundSoundButtonVisible=getConfigValue("BackgroundSoundButtonVisible",!1);tmpBookConfig.BackgroundSoundURL=getConfigValue("BackgroundSoundURL","");tmpBookConfig.BackgroundSoundLoop=getConfigValue("BackgroundSoundLoop",
-1);tmpBookConfig.HelpButtonVisible=getConfigValue("HelpButtonVisible",!1);tmpBookConfig.helpContentFileURL=getConfigValue("helpContentFileURL","");tmpBookConfig.helpWidth=getConfigValue("helpWidth",400);tmpBookConfig.helpHeight=getConfigValue("helpHeight",450);tmpBookConfig.showHelpContentAtFirst=getConfigValue("showHelpContentAtFirst",!1);tmpBookConfig.aboutButtonVisible=getConfigValue("aboutButtonVisible",!1);tmpBookConfig.aboutContactInfoTxt=getConfigValue("aboutContactInfoTxt","");tmpBookConfig.AutoPlayButtonVisible=
getConfigValue("AutoPlayButtonVisible",!1);tmpBookConfig.autoPlayAutoStart=getConfigValue("autoPlayAutoStart",!1);tmpBookConfig.autoPlayDuration=getConfigValue("autoPlayDuration",3);tmpBookConfig.autoPlayLoopCount=getConfigValue("autoPlayLoopCount",1);tmpBookConfig.minZoomWidth=getConfigValue("minZoomWidth",0);tmpBookConfig.minZoomHeight=getConfigValue("minZoomHeight",0);tmpBookConfig.maxZoomWidth=getConfigValue("maxZoomWidth",0);tmpBookConfig.maxZoomHeight=getConfigValue("maxZoomHeight",0);tmpBookConfig.defaultZoomWidth=
getConfigValue("defaultZoomWidth",0);tmpBookConfig.defaultZoomHeight=getConfigValue("defaultZoomHeight",0);tmpBookConfig.middleZoomWidth=getConfigValue("middleZoomWidth",0);isNaN(tmpBookConfig.middleZoomWidth)&&(tmpBookConfig.middleZoomWidth=0);tmpBookConfig.mouseWheelFlip=getConfigValue("mouseWheelFlip",!0);tmpBookConfig.DownloadButtonVisible=getConfigValue("DownloadButtonVisible",!0);tmpBookConfig.DownloadURL=getConfigValue("DownloadURL","");fixDownloadURLValue();tmpBookConfig.bgBeginColor=getConfigValue("bgBeginColor",
"#E6E6E6");tmpBookConfig.bgEndColor=getConfigValue("bgEndColor","#E3E3E3");tmpBookConfig.bgMRotation=getConfigValue("bgMRotation",90);tmpBookConfig.backGroundImgURL=getConfigValue("backGroundImgURL","");tmpBookConfig.backgroundOpacity=getConfigValue("backgroundOpacity",100);tmpBookConfig.LeftShadowWidth=getConfigValue("LeftShadowWidth",40);tmpBookConfig.LeftShadowAlpha=getConfigValue("LeftShadowAlpha",1);tmpBookConfig.RightShadowWidth=getConfigValue("RightShadowWidth",40);tmpBookConfig.RightShadowAlpha=
getConfigValue("RightShadowAlpha",1);_agent_.system.name==_agent_.system.ANDROID&&_agent_.browser.wechat&&(tmpBookConfig.RightShadowAlpha=1,tmpBookConfig.LeftShadowAlpha=1);tmpBookConfig.ShowTopLeftShadow=getConfigValue("ShowTopLeftShadow",!0);tmpBookConfig.pageBackgroundColor=getConfigValue("pageBackgroundColor","#FFFFFF");tmpBookConfig.flipshortcutbutton=getConfigValue("flipshortcutbutton",!1);tmpBookConfig.OriginPageIndex=getConfigValue("OriginPageIndex",1);tmpBookConfig.HardPageEnable=getConfigValue("HardPageEnable",
!1);tmpBookConfig.HardInnerPageEnable=getConfigValue("HardInnerPageEnable",!1);tmpBookConfig.bookPageStretch=getConfigValue("bookPageStretch",!1);_agent_.browser.msie&&11>_agent_.browser.version&&(tmpBookConfig.HardPageEnable=!1,tmpBookConfig.HardInnerPageEnable=!1);tmpBookConfig.HardPageEnable||(tmpBookConfig.HardInnerPageEnable=!1);tmpBookConfig.thicknessWidthType=getConfigValue("thicknessWidthType","thick").toLowerCase();tmpBookConfig.showThicknessOnMobile=getConfigValue("showThicknessOnMobile",
!1);"Chinese"==UserGroups&&(tmpBookConfig.pageHighlightType=getConfigValue("pageHighlightType","book").toLowerCase());"English"==UserGroups&&(tmpBookConfig.pageHighlightType=getConfigValue("pageHighlightType","magazine").toLowerCase());tmpBookConfig.usePdfJs=getConfigValue("usePdfJs",!1);tmpBookConfig.highDefinitionConversion=getConfigValue("highDefinitionConversion",!1);tmpBookConfig.usePdfJs&&(tmpBookConfig.highDefinitionConversion=!1);tmpBookConfig.highDefinitionConversion=!1;tmpBookConfig.isStopMouseMenu=
getConfigValue("isStopMouseMenu",!1);tmpBookConfig.thicknessColor=getConfigValue("thicknessColor","#FFFFFF");tmpBookConfig.RightToLeft=getConfigValue("RightToLeft",!1);tmpBookConfig.flippingTime=getConfigValue("flippingTime",.3);void 0!=tmpBookConfig.flippingTime&&(tmpBookConfig.flippingTime=.2>tmpBookConfig.flippingTime?.2:tmpBookConfig.flippingTime);tmpBookConfig.supportSerialsFlip=getConfigValue("supportSerialsFlip",!0);tmpBookConfig.retainBookCenter=getConfigValue("retainBookCenter",!0);tmpBookConfig.totalPagesCaption=
getConfigValue("totalPagesCaption","");tmpBookConfig.pageNumberCaption=getConfigValue("pageNumberCaption","");tmpBookConfig.buttonsSortXML=getConfigValue("buttonsSortXML",[]);tmpBookConfig.toolbarAlwaysShow=getConfigValue("toolbarAlwaysShow",!1);tmpBookConfig.searchbarAlwaysShowOnMobile=getConfigValue("searchbarAlwaysShowOnMobile",!1);isPhone()||isPad()||(tmpBookConfig.toolbarAlwaysShow=!0);tmpBookConfig.leftRightPnlShowOption=getConfigValue("leftRightPnlShowOption","").toLowerCase();tmpBookConfig.mobileLeftRightPnlShowOption=
getConfigValue("mobileLeftRightPnlShowOption","").toLowerCase();tmpBookConfig.topMargin=getConfigValue("topMargin",10);tmpBookConfig.bottomMargin=getConfigValue("bottomMargin",10);tmpBookConfig.leftMargin=getConfigValue("leftMargin",10);tmpBookConfig.rightMargin=getConfigValue("rightMargin",10);tmpBookConfig.topMarginOnMobile=getConfigValue("topMarginOnMobile",10);tmpBookConfig.bottomMarginOnMobile=getConfigValue("bottomMarginOnMobile",10);tmpBookConfig.leftMarginOnMobile=getConfigValue("leftMarginOnMobile",
10);tmpBookConfig.rightMarginOnMobile=getConfigValue("rightMarginOnMobile",10);isPhone()||isPad()?(tmpBookConfig.topMargin=tmpBookConfig.topMarginOnMobile,tmpBookConfig.bottomMargin=tmpBookConfig.bottomMarginOnMobile,tmpBookConfig.leftMargin=tmpBookConfig.leftMarginOnMobile,tmpBookConfig.rightMargin=tmpBookConfig.rightMarginOnMobile,tmpBookConfig.phoneFlipShortcutSwitchButtonVisible=getConfigValue("phoneFlipShortcutSwitchButtonVisible",!1),tmpBookConfig.phoneFlipShortcutButton=getConfigValue("phoneFlipShortcutButton",
!1),tmpBookConfig.searchbarAlwaysShowOnMobile&&tmpBookConfig.toolbarAlwaysShow&&(tmpBookConfig.topMargin+=50)):tmpBookConfig.phoneFlipShortcutButton=!1;tmpBookConfig.visibleAreaLeft=parseFloat(getConfigValue("visibleAreaLeft","0%"));tmpBookConfig.visibleAreaTop=parseFloat(getConfigValue("visibleAreaTop","0%"));tmpBookConfig.visibleAreaRight=parseFloat(getConfigValue("visibleAreaRight","100%"));tmpBookConfig.visibleAreaBottom=parseFloat(getConfigValue("visibleAreaBottom","100%"));tmpBookConfig.visibleAreaLeft=
isNaN(tmpBookConfig.visibleAreaLeft)?"0%":tmpBookConfig.visibleAreaLeft;tmpBookConfig.visibleAreaTop=isNaN(tmpBookConfig.visibleAreaTop)?"0%":tmpBookConfig.visibleAreaTop;tmpBookConfig.visibleAreaRight=isNaN(tmpBookConfig.visibleAreaRight)?"100%":tmpBookConfig.visibleAreaRight;tmpBookConfig.visibleAreaBottom=isNaN(tmpBookConfig.visibleAreaBottom)?"100%":tmpBookConfig.visibleAreaBottom;tmpBookConfig.bleedAreaLeft=parseFloat(getConfigValue("bleedAreaLeft","0%"));tmpBookConfig.bleedAreaTop=parseFloat(getConfigValue("bleedAreaTop",
"0%"));tmpBookConfig.bleedAreaRight=parseFloat(getConfigValue("bleedAreaRight","0%"));tmpBookConfig.bleedAreaBottom=parseFloat(getConfigValue("bleedAreaBottom","0%"));tmpBookConfig.bleedAreaLeft=isNaN(tmpBookConfig.bleedAreaLeft)?"0%":tmpBookConfig.bleedAreaLeft;tmpBookConfig.bleedAreaTop=isNaN(tmpBookConfig.bleedAreaTop)?"0%":tmpBookConfig.bleedAreaTop;tmpBookConfig.bleedAreaRight=isNaN(tmpBookConfig.bleedAreaRight)?"0%":tmpBookConfig.bleedAreaRight;tmpBookConfig.bleedAreaBottom=isNaN(tmpBookConfig.bleedAreaBottom)?
"0%":tmpBookConfig.bleedAreaBottom;tmpBookConfig.visibleAreaLeft=tmpBookConfig.bleedAreaLeft?tmpBookConfig.bleedAreaLeft:tmpBookConfig.visibleAreaLeft;tmpBookConfig.visibleAreaTop=tmpBookConfig.bleedAreaTop?tmpBookConfig.bleedAreaTop:tmpBookConfig.visibleAreaTop;tmpBookConfig.visibleAreaRight=tmpBookConfig.bleedAreaRight?100-parseFloat(tmpBookConfig.bleedAreaRight):tmpBookConfig.visibleAreaRight;tmpBookConfig.visibleAreaBottom=tmpBookConfig.bleedAreaBottom?100-parseFloat(tmpBookConfig.bleedAreaBottom):
tmpBookConfig.visibleAreaBottom;tmpBookConfig.LinkDownColor=getConfigValue("LinkDownColor","#9C9C9C");tmpBookConfig.LinkAlpha=getConfigValue("LinkAlpha",.4);tmpBookConfig.googleAnalyticsID=getConfigValue("googleAnalyticsID","");tmpBookConfig.googleTagManagerID=getConfigValue("googleTagManagerID","");tmpBookConfig.language=getConfigValue("language","English");tmpBookConfig.AboutAddress=getConfigValue("AboutAddress","");tmpBookConfig.AboutEmail=getConfigValue("AboutEmail","");tmpBookConfig.AboutMobile=
getConfigValue("AboutMobile","");tmpBookConfig.AboutWebsite=getConfigValue("AboutWebsite","");tmpBookConfig.AboutDescription=getConfigValue("AboutDescription","");tmpBookConfig.AboutAuthor=getConfigValue("AboutAuthor","");tmpBookConfig.totalPageCount=getConfigValue("totalPageCount",1);tmpBookConfig.largePageWidth=getConfigValue("largePageWidth",1440);tmpBookConfig.largePageHeight=getConfigValue("largePageHeight",1728);tmpBookConfig.normalPath=getConfigValue("normalPath","files/page/");tmpBookConfig.largePath=
getConfigValue("largePath","files/large/");tmpBookConfig.thumbPath=getConfigValue("thumbPath","files/thumb/");tmpBookConfig.FlipStyle=getConfigValue("FlipStyle","flip");tmpBookConfig.FlipStyle=tmpBookConfig.FlipStyle.toLowerCase();tmpBookConfig.autoDoublePage=getConfigValue("autoDoublePage","auto");b=tmpBookConfig.autoDoublePage?tmpBookConfig.autoDoublePage.toLocaleLowerCase():"auto";"single"!=b&&"auto"!=b&&"double"!=b?getConfigValue("autoDoublePage",!0)?tmpBookConfig.showDoublePage="auto":tmpBookConfig.showDoublePage=
"single":tmpBookConfig.showDoublePage=b;tmpBookConfig.alwaysDoublePageOnMobile=getConfigValue("alwaysDoublePageOnMobile",!1);tmpBookConfig.upsideOnMobile=function(){return tmpBookConfig.alwaysDoublePageOnMobile&&window.innerHeight>window.innerWidth?!0:!1};tmpBookConfig.QRPath=getConfigValue("QRPath","files/extfile/QRURL.png");tmpBookConfig.QRCode=getConfigValue("QRCode",!1);tmpBookConfig.MiniStyle=getConfigValue("MiniStyle",!0);tmpBookConfig.AnnotationButtonVisible=getConfigValue("AnnotationButtonVisible",
!1);tmpBookConfig.InstructionsButtonVisible=getConfigValue("InstructionsButtonVisible",!1);tmpBookConfig.showInstructionOnStart=getConfigValue("showInstructionOnStart",!0);tmpBookConfig.showBookInstructionOnStart=getConfigValue("showBookInstructionOnStart",!1);tmpBookConfig.showSwitchTipsOnStart=getConfigValue("showSwitchTipsOnStart",!1);tmpBookConfig.EmailButtonVisible=getConfigValue("EmailButtonVisible",!1);tmpBookConfig.btnShareWithEmailSubject=getConfigValue("btnShareWithEmailSubject","");tmpBookConfig.btnShareWithEmailBody=
getConfigValue("btnShareWithEmailBody","");tmpBookConfig.socialShareLink=getConfigValue("socialShareLink","");tmpBookConfig.VideoButtonVisible=getConfigValue("VideoButtonVisible",!1);if(!global.videoList||0>=global.videoList.length)tmpBookConfig.VideoButtonVisible=!1;tmpBookConfig.SlideshowButtonVisible=getConfigValue("SlideshowButtonVisible",!1);if(!global.slideshow||0>=global.slideshow.length)tmpBookConfig.SlideshowButtonVisible=!1;tmpBookConfig.CompanyLogoFile=getConfigValue("CompanyLogoFile",
"");tmpBookConfig.UIBaseURL=getConfigValue("UIBaseURL","");tmpBookConfig.bookBaseURL=getConfigValue("bookBaseURL","");tmpBookConfig.haveAdSense=getConfigValue("haveAdSense",!1);tmpBookConfig.adSenseLeft=getConfigValue("adSenseLeft",0);tmpBookConfig.adSenseTop=getConfigValue("adSenseTop",0);tmpBookConfig.adSenseWidth=getConfigValue("adSenseWidth",0);tmpBookConfig.adSenseHeight=getConfigValue("adSenseHeight",0);tmpBookConfig.adSenseClientId=getConfigValue("adSenseClientId","");tmpBookConfig.adSenseSlotId=
getConfigValue("adSenseSlotId","");tmpBookConfig.productName=getConfigValue("productName","Flip HTML5");tmpBookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");tmpBookConfig.preloadNextPage=getConfigValue("preloadNextPage",!0);tmpBookConfig.showMirrorSide=getConfigValue("showMirrorSide",!0);tmpBookConfig.addPaperCoil=getConfigValue("addPaperCoil",!1);tmpBookConfig.addPaperCoil&&!tmpBookConfig.BindingType&&(tmpBookConfig.BindingType="loose");tmpBookConfig.BindingType||(tmpBookConfig.BindingType=
getConfigValue("BindingType","side"));tmpBookConfig.addPaperCoil="loose"==tmpBookConfig.BindingType||"loose2"==tmpBookConfig.BindingType;tmpBookConfig.ToolbarViewMode=getConfigValue("ToolbarViewMode","standard");tmpBookConfig.ToolbarViewMode=tmpBookConfig.ToolbarViewMode.toLocaleLowerCase();tmpBookConfig.isTheBookOpen=getConfigValue("isTheBookOpen",!1);tmpBookConfig.FlipDirection=getConfigValue("FlipDirection",0);tmpBookConfig.phoneFlipShortcutSwitchButtonIcon=getConfigValue("phoneFlipShortcutSwitchButtonIcon",
"");tmpBookConfig.HomeButtonIcon=getConfigValue("HomeButtonIcon","");tmpBookConfig.AnnotationButtonIcon=getConfigValue("AnnotationButtonIcon","");tmpBookConfig.VideoButtonIcon=getConfigValue("VideoButtonIcon","");tmpBookConfig.SlideshowButtonIcon=getConfigValue("SlideshowButtonIcon","");tmpBookConfig.ShareButtonIcon=getConfigValue("ShareButtonIcon","");tmpBookConfig.ThumbnailButtonIcon=getConfigValue("ThumbnailButtonIcon","");tmpBookConfig.ZoomInButtonIcon=getConfigValue("ZoomInButtonIcon","");tmpBookConfig.ZoomOutButtonIcon=
getConfigValue("ZoomOutButtonIcon","");tmpBookConfig.MagnifierButtonIcon=getConfigValue("MagnifierButtonIcon","");tmpBookConfig.FullscreenButtonIcon=getConfigValue("FullscreenButtonIcon","");tmpBookConfig.ExitFullscreenButtonIcon=getConfigValue("ExitFullscreenButtonIcon","");tmpBookConfig.BookmarkButtonIcon=getConfigValue("BookmarkButtonIcon","");tmpBookConfig.TableOfContentButtonIcon=getConfigValue("TableOfContentButtonIcon","");tmpBookConfig.SearchButtonIcon=getConfigValue("SearchButtonIcon","");
tmpBookConfig.PrintButtonIcon=getConfigValue("PrintButtonIcon","");tmpBookConfig.BackgroundSoundButtonOnIcon=getConfigValue("BackgroundSoundButtonOnIcon","");tmpBookConfig.BackgroundSoundButtonOffIcon=getConfigValue("BackgroundSoundButtonOffIcon","");tmpBookConfig.HelpButtonIcon=getConfigValue("HelpButtonIcon","");tmpBookConfig.AboutButtonIcon=getConfigValue("AboutButtonIcon","");tmpBookConfig.AutoPlayStartButtonIcon=getConfigValue("AutoPlayStartButtonIcon","");tmpBookConfig.AutoPlayStopButtonIcon=
getConfigValue("AutoPlayStopButtonIcon","");tmpBookConfig.DownloadButtonIcon=getConfigValue("DownloadButtonIcon","");tmpBookConfig.SelectTextButtonIcon=getConfigValue("SelectTextButtonIcon","");tmpBookConfig.facebookShotImageURL=getConfigValue("facebookShotImageURL","");tmpBookConfig.searchTextJS=getConfigValue("searchTextJS","files/search/book_config.js");tmpBookConfig.searchPositionJS=getConfigValue("searchPositionJS","files/search/text_position.js");tmpBookConfig.userSmallMode=getConfigValue("userSmallMode",
!0);tmpBookConfig.maxWidthToSmallMode=getConfigValue("maxWidthToSmallMode",300);tmpBookConfig.maxHeightToSmallMode=getConfigValue("maxHeightToSmallMode",300);tmpBookConfig.backgroundScene=getConfigValue("backgroundScene","None");tmpBookConfig.bgSoundVol=getConfigValue("bgSoundVol",50);tmpBookConfig.bgSoundVol=Number.between(tmpBookConfig.bgSoundVol,0,100);tmpBookConfig.enablePageBack=getConfigValue("enablePageBack",!1);tmpBookConfig.userListPath=getConfigValue("userListPath","files/extfiles/users.js");
tmpBookConfig.isFlipPdf=getConfigValue("isFlipPdf",!1);tmpBookConfig.SingleModeBanFlipToLastPage=getConfigValue("SingleModeBanFlipToLastPage",!1);tmpBookConfig.isSingleBookFullWindowOnMobile=getConfigValue("isSingleBookFullWindowOnMobile",!1);tmpBookConfig.showGotoButtonsAtFirst=getConfigValue("showGotoButtonsAtFirst",!1);0==tmpBookConfig.isFlipPdf&&void 0!=global.isFlipPdf&&(tmpBookConfig.isFlipPdf=isFlipPdf);tmpBookConfig.FlipSound=getConfigValue("FlipSound",!0);global.flipSoundIsPlaying=tmpBookConfig.FlipSound;
tmpBookConfig.CurlingPageCorner=getConfigValue("CurlingPageCorner",!0);tmpBookConfig.BanFlipFromDirection=getConfigValue("BanFlipFromDirection",!1);tmpBookConfig.iconFontColor=getConfigValue("iconFontColor","#ffffff");try{void 0!=global.staticAd&&1==staticAd.haveAd&&void 0==global.staticAd.adPosition&&("Chinese"==UserGroups&&(global.staticAd.adPosition=1),"English"==UserGroups&&(global.staticAd.adPosition=0)),void 0!=global.staticAd&&1==staticAd.haveAd&&0===parseInt(global.staticAd.adPosition)?tmpBookConfig.retainBookCenter=
!1:tmpBookConfig.retainBookCenter=getConfigValue("retainBookCenter",!0)}catch(d){}tmpBookConfig.updateURLForPage=getConfigValue("updateURLForPage",!0);tmpBookConfig.borderColor=getConfigValue("borderColor","#572f0d");tmpBookConfig.outerCoverBorder=getConfigValue("outerCoverBorder",!1);tmpBookConfig.hardCoverBorderWidth=getConfigValue("hardCoverBorderWidth",0);tmpBookConfig.cornerRound=getConfigValue("cornerRound",0);tmpBookConfig.hardCoverBorderWidth=tmpBookConfig.HardPageEnable?Number.between(0,
16,tmpBookConfig.hardCoverBorderWidth):0;tmpBookConfig.cornerRound=tmpBookConfig.HardPageEnable?Number.between(0,tmpBookConfig.hardCoverBorderWidth,tmpBookConfig.cornerRound):0;tmpBookConfig.coverTexture=getConfigValue("coverTexture","none");tmpBookConfig.passwardPrompt=getConfigValue("passwardPrompt","");tmpBookConfig.SlideshowAutoPlay=getConfigValue("SlideshowAutoPlay",!1);tmpBookConfig.SlideshowPlayInterval=getConfigValue("SlideshowPlayInterval",5);tmpBookConfig.productName=getConfigValue("productName",
"Flip HTML5");tmpBookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");global.productName=tmpBookConfig.productName||"Flip HTML5";global.homePage=tmpBookConfig.homePage||"http://www.fliphtml5.com";tmpBookConfig.backgroundPosition=getConfigValue("backgroundPosition","Stretch");tmpBookConfig.restorePageVisible=getConfigValue("restorePageVisible",!1);tmpBookConfig.restorePageDuration=getConfigValue("restorePageDuration",86400);tmpBookConfig.toobarClear=getConfigValue("toobarClear",
!1);tmpBookConfig.bottomToolBarAlpha=getConfigValue("bottomToolBarAlpha",1);tmpBookConfig.topToolBarAlpha=getConfigValue("topToolBarAlpha",1);tmpBookConfig.ToolBarAlpha=getConfigValue("ToolBarAlpha",1);tmpBookConfig.phoneSearchBarAlpha=getConfigValue("phoneSearchBarAlpha",.8);(isPhone()||isPad())&&"slide"!=tmpBookConfig.FlipStyle.toLowerCase()&&(tmpBookConfig.FlipStyle="flip");isBelowIE9()&&(tmpBookConfig.FlipStyle="slide");if(isPhone()||isPad()||"slide"==tmpBookConfig.FlipStyle.toLowerCase()&&"lite"==
tmpBookConfig.ToolbarViewMode.toLowerCase())tmpBookConfig.flipshortcutbutton=!1;if("slide"==tmpBookConfig.FlipStyle&&"lite"==tmpBookConfig.ToolbarViewMode.toLowerCase()||isPhone()||isPad())tmpBookConfig.flipshortcutbutton=!1;if(global.videoList&&1<=global.videoList.length)for(b=0;b<videoList.length;b++)videoList[b].id||(videoList[b].id=""),videoList[b].description||(videoList[b].description=""),videoList[b].thumbnail||(videoList[b].thumbnail=""),videoList[b].title||(videoList[b].title=""),videoList[b].type||
(videoList[b].type="");try{window.localStorage||(tmpBookConfig.BookMarkButtonVisible=!1,tmpBookConfig.AnnotationButtonVisible=!1,tmpBookConfig.restorePageVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1))}catch(d){tmpBookConfig.BookMarkButtonVisible=!1,tmpBookConfig.AnnotationButtonVisible=!1,tmpBookConfig.restorePageVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&
(global.pageEditor.setting.shoppingCartHTML=!1)}0<=global.templeteName.indexOf("article")&&(isPhone()||isPad())&&(tmpBookConfig.BookMarkButtonVisible=!1);tmpBookConfig.OpenWindow=(getConfigValue("OpenWindow","_blank")+"").toLowerCase();tmpBookConfig.appLogoOpenWindow=(getConfigValue("appLogoOpenWindow","_blank")+"").toLowerCase();tmpBookConfig.OpenWindow.startsWith("_")||(tmpBookConfig.OpenWindow="_"+tmpBookConfig.OpenWindow);tmpBookConfig.appLogoOpenWindow.startsWith("_")||(tmpBookConfig.appLogoOpenWindow=
"_"+tmpBookConfig.appLogoOpenWindow);tmpBookConfig.appLargeLogoIcon=getConfigValue("appLargeLogoIcon","");tmpBookConfig.appLogoLinkURL=getConfigValue("appLogoLinkURL","");tmpBookConfig.appLogoLinkURL&&(tmpBookConfig.appLogoLinkURL=getRealURL(tmpBookConfig.appLogoLinkURL));tmpBookConfig.appLargeLogoURL=getConfigValue("appLargeLogoURL","");tmpBookConfig.appLargeLogoURL&&(tmpBookConfig.appLargeLogoURL=getRealURL(tmpBookConfig.appLargeLogoURL));tmpBookConfig.isFixLogoSize=getConfigValue("isFixLogoSize",
!1);tmpBookConfig.logoFixWidth=getConfigValue("logoFixWidth",0);tmpBookConfig.logoFixHeight=getConfigValue("logoFixHeight",0);tmpBookConfig.PhoneButtonVisible=getConfigValue("PhoneButtonVisible",!1);window.phoneNumber&&0!=phoneNumber.length||(tmpBookConfig.PhoneButtonVisible=!1);tmpBookConfig.PhoneButtonIcon=getConfigValue("PhoneButtonIcon","");tmpBookConfig.phoneNumber=getConfigValue("phoneNumber","");tmpBookConfig.aboutContactInfoTxt=getConfigValue("aboutContactInfoTxt","");tmpBookConfig.isEncryptionBook=
getConfigValue("isEncryptionBook",!1);tmpBookConfig.useTheAliCloudChart=getConfigValue("useTheAliCloudChart",!1);tmpBookConfig.securityType=getConfigValue("securityType",0);1<=passwardType()&&(tmpBookConfig.useTheAliCloudChart=!1);tmpBookConfig.isEncryptionBook&&(tmpBookConfig.useTheAliCloudChart=!1);tmpBookConfig.useTheFliphtml5Service=getConfigValue("useTheFliphtml5Service",!1);"online.fliphtml5.com"==document.domain&&(tmpBookConfig.useTheAliCloudChart=!1,tmpBookConfig.useTheFliphtml5Service=!0);
tmpBookConfig.isEncryptionBook&&(tmpBookConfig.useTheFliphtml5Service=!1);tmpBookConfig.OnlyOpenInWechat=getConfigValue("OnlyOpenInWechat",!1);tmpBookConfig.NoWechatSharing=getConfigValue("NoWechatSharing",!1);tmpBookConfig.OnlyOpenInIframe=getConfigValue("OnlyOpenInIframe",!1);tmpBookConfig.OnlyOpenInIframeInfo=getConfigValue("OnlyOpenInIframeInfo","Only open in iframe.");tmpBookConfig.NoWechatSharing&&jQuery(document).ready(;tmpBookConfig.textClarityEnhancement=getConfigValue("textClarityEnhancement",0);tmpBookConfig.textSharpening=getConfigValue("textSharpening",!1);tmpBookConfig.AboutDescription=tmpBookConfig.AboutDescription.replace(/\n/g,"<br/>");
tmpBookConfig.AboutDescription=tmpBookConfig.AboutDescription.replace(/\r/g,"<br/>");checkBookmarkConfig();isBelowIE9()&&(tmpBookConfig.BookMarkButtonVisible=!1,tmpBookConfig.AnnotationButtonVisible=!1,tmpBookConfig.WeChatShareButtonVisible=!1);tmpBookConfig.useTheAliCloudChart&&tmpBookConfig.backGroundImgURL&&(0<=tmpBookConfig.backGroundImgURL.indexOf("?")?tmpBookConfig.backGroundImgURL+="&x-oss-process=image/resize,h_800":tmpBookConfig.backGroundImgURL+="?x-oss-process=image/resize,h_800",window.isSupportWebp&&
(tmpBookConfig.backGroundImgURL+="/format,webp"));tmpBookConfig.useTheFliphtml5Service&&tmpBookConfig.backGroundImgURL&&(tmpBookConfig.backGroundImgURL=resetFliphtml5URL(tmpBookConfig.backGroundImgURL));checkURLValue();global.checkReportConfig&&checkReportConfig();global.aboutReadTimesCaptions="Views";"Chinese"==UserGroups&&(global.aboutReadTimesCaptions="\u95c3\u5470\ue1f0\u5a06\u2103\u669f");tmpBookConfig.isNeat=getConfigValue("isNeat",!1);0<=window.location.hash.indexOf("isNeat")&&(tmpBookConfig.isNeat=
!0);tmpBookConfig.phoneToolbarType=getConfigValue("phoneToolbarType","image").toLowerCase();tmpBookConfig.phoneIconNumber=getConfigValue("phoneIconNumber",6);tmpBookConfig.phoneIconNumber=Math.max(1,tmpBookConfig.phoneIconNumber);tmpBookConfig.showAdOnTop=getConfigValue("showAdOnTop",!0);tmpBookConfig.bookPath=getConfigValue("bookPath",window.location.href);tmpBookConfig.loadPreviewImage=!1;tmpBookConfig.removeLoad=!0;tmpBookConfig.showArticleDescription=getConfigValue("showArticleDescription",!1);
tmpBookConfig.showArticlePageFlashes=getConfigValue("showArticlePageFlashes",!0);tmpBookConfig.articleListPath=getConfigValue("articleListPath","");tmpBookConfig.articleConfigPath=getConfigValue("articleConfigPath","");tmpBookConfig.bookArticleConfigPath=getConfigValue("bookArticleConfigPath","");tmpBookConfig.periodsConfigPath=getConfigValue("periodsConfigPath","");tmpBookConfig.userArticleConfigPath=getConfigValue("userArticleConfigPath","");tmpBookConfig.bookBaseURL=getConfigValue("bookBaseURL",
"");tmpBookConfig.pageEditorUrl=getConfigValue("pageEditorUrl","");tmpBookConfig.pageReaderUrl=getConfigValue("pageReaderUrl","");tmpBookConfig.pageSliderUrl=getConfigValue("pageSliderUrl","");tmpBookConfig.pageRestrictUrl=getConfigValue("pageRestrictUrl","");tmpBookConfig.restrictUrl=getConfigValue("restrictUrl","");tmpBookConfig.keyForPageTest=getConfigValue("keyForPageTest","");tmpBookConfig.bookOwnerInfo=getConfigValue("bookOwnerInfo","");tmpBookConfig.Copyright=getConfigValue("Copyright","");
tmpBookConfig.articleTitle=getConfigValue("articleTitle","");tmpBookConfig.articleTime=getConfigValue("articleTime","");tmpBookConfig.isMouseEnterToDisplayArticleTitle=getConfigValue("isMouseEnterToDisplayArticleTitle",!1);b=Module._getVerifyString();var c=UTF8ToString(b);Module._free(b);eval(c)};
function checkBookmarkConfig(){global.bmtConfig||(bmtConfig=[]);void 0==bmtConfig.onSideEdge&&(bmtConfig.onSideEdge=!0);void 0==bmtConfig.showPage&&(bmtConfig.showPage=!1);void 0==bmtConfig.hasTexture&&(bmtConfig.hasTexture=!1);bmtConfig.tabs&&0<bmtConfig.tabs.length&&0==bmtConfig.onSideEdge&&!isPhone()&&!isPad()&&"slide"!=tmpBookConfig.FlipStyle.toLowerCase()&&(75>tmpBookConfig.topMargin&&(tmpBookConfig.topMargin=75),"vertical"==tmpBookConfig.flipDrection&&75>tmpBookConfig.bottomMargin&&(tmpBookConfig.topMargin=
75))}
var isBool=getConfigValue=function(b,c){b=function(d,e){DeConfig_Parse(d);getEditConfig(d);void 0!=e&&"string"==typeof e&&""!=e.trim()&&isBool(e)&&(e=parseBool(e));d=void 0!=tmpBookConfig[d]?tmpBookConfig[d]:getValueFromAliasConfig(d);return void 0==d?e:void 0==e?d:"number"==typeof e?Number(d):"boolean"==typeof e?
parseBool(d):"string"==typeof e&&"#"==e[0]?Color(d).toString():d}(b,c);"string"==typeof b&&(b=b.replaceAll("\\/","/",!0),b=b.replaceAll('\\"','"'),b.startsWith("[")&&b.endsWith("]")&&(b=eval(b)));return b};function DeConfig_Parse(b){try{var c=Module._DeConfig_Get(window.key_index,allocateUTF8(b)),d=UTF8ToString(c);tmpBookConfig[b]="undefined"==d?void 0:d;return d}catch(e){}}function getEditConfig(b){try{var c=window.editConfig||window.htmlConfig.editConfig;c&&void 0!=c[b]&&(tmpBookConfig[b]=c[b])}catch(d){}}
var getValueFromAliasConfig=fixDownloadURLValue=checkURLValue=fixURLValue=function(b){if(_agent_.browser.app||!tmpBookConfig.CreatedTime||!b)return b;var c=function(e){return"string"!=typeof e?
e:e=0<=e.indexOf("?")?e+"&"+tmpBookConfig.CreatedTime:e+"?"+tmpBookConfig.CreatedTime};if("string"!=typeof b)for(var d=0;d<b.length;d++)b[d]=c(b[d]);else b=c(b);return b},decodeAboutInfo=function(){if(tmpBookConfig.aboutContactInfoTxt){try{var b=$(tmpBookConfig.aboutContactInfoTxt)}catch(q){return}var c,d,e,f,g;b.find("title").text();var h=b.find("desc").text();var k=b.find("logo").text();b=b.find("keys").children();for(var l=0;l<b.length;l++){var n=$(b[l]);"Phone"==n.attr("type")&&(c=n.text());"Link"==
n.attr("type")&&(d=n.text());"Email"==n.attr("type")&&(e=n.text());"Address"==n.attr("type")&&(f=n.text());"Author"==n.attr("type")&&(g=n.text())}b=f&&!tmpBookConfig.AboutAddress&&(tmpBookConfig.AboutAddress=b(f));e&&!tmpBookConfig.AboutEmail&&(tmpBookConfig.AboutEmail=b(e));c&&!tmpBookConfig.AboutMobile&&(tmpBookConfig.AboutMobile=b(c));d&&!tmpBookConfig.AboutWebsite&&(tmpBookConfig.AboutWebsite=b(d));h&&!tmpBookConfig.AboutDescription&&(tmpBookConfig.AboutDescription=
b(h));g&&!tmpBookConfig.AboutAuthor&&(tmpBookConfig.AboutAuthor=b(g));k&&!tmpBookConfig.CompanyLogoFile&&(tmpBookConfig.CompanyLogoFile=b(k));tmpBookConfig.CompanyLogoFile&&(tmpBookConfig.CompanyLogoFile=tmpBookConfig.CompanyLogoFile.replace(/\\/g,"/"));tmpBookConfig.isFlipPdf&&tmpBookConfig.CompanyLogoFile.startsWith("./")&&(tmpBookConfig.CompanyLogoFile="."+tmpBookConfig.CompanyLogoFile)}},checkHtmlConfig=function(){for(var b="aliasConfig aliasLanguage fliphtml5_pages bmtConfig videoList staticAd language ols slideshow pageEditor flipByAudio downloadconfig assistantConfig phoneNumber bookPlugin shareObj textForPages positionForPages search_pages pages_information bookConfig phoneTemplate".split(" "),
c=0;c<b.length;c++){var d=b[c];window.htmlConfig&&window.htmlConfig[d]&&"bookConfig"!=d&&(window[d]=window.htmlConfig[d])}!window.htmlConfig||!window.htmlConfig.downloadConfig||window.htmlConfig.downloadconfig&&void 0==window.htmlConfig.downloadconfig.length||(window.downloadconfig=window.htmlConfig.downloadConfig)};checkHtmlConfig();
function initEncryptPreviewPages(){if(!(!tmpBookConfig.previewPages||tmpBookConfig.previewPagesArray&&tmpBookConfig.previewPagesArray.length)){for(var b=tmpBookConfig.previewPages.split(","),c=[],d=0;d<b.length;d++)if(-1<b[d].indexOf("-"))for(var e=b[d].split("-"),f=parseFloat(e[0]);f<=parseFloat(e[1]);f++)c.push(parseFloat(f));else b[d]&&c.push(parseFloat(b[d]));tmpBookConfig.previewPagesArray=c}}initEncryptPreviewPages();
var getBookInfo=function(){if(window.htmlConfig&&window.htmlConfig.bookConfig&&window.htmlConfig.bookConfig.bookBaseURL){var b=tmpBookConfig.bookBaseURL;b.endsWith("/")||(b+="/");$.ajax({url:b+"bookinfo.js",type:"get",crossDomain:!0,success:function(c){},error:function(c){}})}},toAbsURL=changeHostName=function(b,c){var d=document.createElement("a");d.href=b;return b=d.href.replace(d.host,c)};
function resetFliphtml5URL(b){try{if(!b||0<=b.indexOf("none")||0<=b.indexOf(".zip")||0<=b.indexOf(".svg")||0<=b.indexOf(".js")||window.isSupportWebp&&0<=b.indexOf("webp")||0>b.indexOf("webp"))return b;b=b.removeStartFrom("?")+"";b=changeHostName(b,"online-a.wancaiinfo.com");var c="";c=window.isSupportWebp?"webp":getWebpOriginFormat(b);return b=b+"?image_process=format,"+c}catch(d){return b}}
function initImageBaseUrl(){global.uiBaseURL=tmpBookConfig.UIBaseURL;uiBaseURL&&"string"==typeof uiBaseURL&&(uiBaseURL.endsWith("/")||(uiBaseURL+="/"));global.phoneBaseURL=uiBaseURL+"style/phoneIcon/";global.soundBaseURL=uiBaseURL+"style/raw/";global.mbBaseURL=uiBaseURL+"style/mb_icon/";global.uiBaseURL=uiBaseURL+"style/icon/";tmpBookConfig.pageLoadingUrl=global.uiBaseURL+"loading.svg";isIE()&&(tmpBookConfig.pageLoadingUrl=global.uiBaseURL+"loading.gif")}
unction animateOnce(b,c,d,e,f,g){if(b&&c)if(void 0==d||0===d||isIE9())b.css(c),e&&e instanceof Function&&e();else{var h=!1;setAnimation(b,d,f,g);b.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){1!=h&&(h=!0,setAnimation(b,0),e&&e instanceof Function&&e())});b.css(c)}}
var Log=Class({statics:{level:1,isDebug:isPAD:logForPad:function(b,c){void 0==this.logDiv&&(this.logDiv=$("<div></div>"),this.logDiv.css({position:"absolute",width:"450px",height:"150px",top:"50px",overflow:"auto","z-index":"100000","background-color":"white"}),$("body")[0]&&$("body")[0].appendChild(this.logDiv[0]));b=$("<p>"+b+"</p>");b.css("color",c);this.logDiv.append(b);
c=this.logDiv[0];c.scrollTop=c.scrollHeight},info:debug:function(){if(this.isDebug()&&!(3>this.level)){_agent_.browser&&_agent_.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.debug&&console.debug.apply(console,
arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"blue")}},warn:function(){if(this.isDebug()&&!(2>this.level)){_agent_.browser&&_agent_.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.warn&&console.warn.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"#FFA042")}},error:function(){if(this.isDebug()&&!(4>this.level)){_agent_.browser&&_agent_.browser.msie&&(arguments=[String.format.apply(this,arguments)]);
try{console&&console.error&&console.error.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"red")}},print:}),VERSION_NAME="6.4.9",BUILD_DATE="2023122101",BookType={normal_book:0,single_book:1,slide_book:3,singleSlide_book:6,catalog_book:7,singleCatalog_book:8},normalBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},
singleBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},bookCorner={top_left:0,top_right:1,bottom_left:2,bottom_right:3},BrowserType={WEBKIT:1,OPERA:1,MOZ:2,MS:3},Direction={left:"left",right:"right",top:"top",bottom:"bottom"},bookEvent={onCurrentPageIndexChanged:"BE_PIC",onCurrentPageIndexWillChange:"BE_PIWC",onNoNextPage:"BE_NNP",onNoPreviousPage:"BE_NPP"},PLUGIN_MAGNETICS="AbPIMagneticSlider",PLUGIN_ROTATE3D="AbPIRotationPhotoFor3D",PLUGIN_VIDEO1=
"VideoPlayerExemple01",PLUGIN_VIDEO2="VideoPlayerExemple02",PLUGIN_CLASSAUDIO="",KEY_CODE_ENTER=13,KEY_CODE_LEFT=37,KEY_CODE_UP=38,KEY_CODE_RIGHT=39,KEY_CODE_DOWN=40,KEY_CODE_HOME=36,KEY_CODE_END=35,KEY_CODE_PAGEUP=33,KEY_CODE_PAGEDOWN=34,KEY_CODE_DELETE=46,KEY_CODE_F11=122,KEY_CODE_A=65,MOUSE_LEFT=1,MOUSE_MIDDLE=2,MOUSE_RIGHT=3,LOADING_WIDTH=30,LOADING_HEIGHT=30,COIL_PAGE_WIDTH=500,isTouchDevice=isTouch=isTouchDevice();var _event;_event=_agent_.browser.device==_agent_.browser.DEVICE_PHONE||isPad()?{_down:"touchstart",_move:"touchmove",_up:"touchend",_end:"touchend",_click:"touchend",_leave:"touchleave",_out:"touchleave",_enter:"touchstart",_mousewheel:"mousewheel",_over:"touchover"}:{_down:"mousedown",_move:"mousemove",_up:"mouseup",_end:"mouseup",_click:"click",_leave:"mouseleave",_out:"mouseout",_enter:"mouseenter",_mousewheel:"mousewheel",_over:"mouseover"};
_agent_.browser.mozilla&&(_event._mousewheel="DOMMouseScroll");
var WebScheme={HTTP:"http",HTTPS:"https",FTP:"ftp",MAILTO:"mailto",IDAP:"idap",FILE:"file",NEWS:"news",GOPHER:"gopher",TELNET:"telnet"},STR_XML_HEAD='<?xml version="1.0" encoding="utf-8"?>',SearchItemRelation={NEARBY:0,SPACE:1,DOUBLE_SPACE:2,RETURN:3},PageTextSelectMode={LINE:0,COLUMN:1},divHint=Class({create:setAnimate:function(b){this.animation=b;1==b&&this.instance.css({"-moz-transition":"all 0.2s ease-in-out","-webkit-transition":"all 0.2s ease-in-out","-o-transition":"all 0.2s ease-in-out","-ms-transition":"all 0.2s ease-in-out",transition:"all 0.2s ease-in-out"})},setStyle:setText:function(b){this.instance.html(b)},moveto:show:hide:function(){1==this.animation?this.instance.css({display:"none",opacity:0}):this.instance.css({display:"none",opacity:1})},destroy:width:function(){return this.instance.width()+3*this.padding()},height:padding:function(){var b=this.instance.css("padding");return void 0==b||null==b||""==b?0:parseInt(b.replace("px",
""))},addClass:function(b){this.instance.addClass(b)}});
MiniStyle=Class({statics:{isMini:function(){if((isPhone()||isPad())&&!isInTheFrame()||!bookConfig.MiniStyle||fullScreenApi.isFullScreen()||NeatStyle.isNeat())return!1;var b=this.getMaxMiniWidthHeight();if(windowWidth>b.w&&windowHeight>b.h)return!1;this.init();return!0},getMaxMiniWidthHeight:init:function(){if(!bookConfig.hideMiniFullscreen){if(isPhone()||isPad())if(window.self!==window.top){var b=window.innerHeight,c=window.screen.height,d=0;try{d=window.top.innerHeight}catch(e){d=0}if(70<=100*(d?b/d:b/c)||window.location.href.includes("bookcase"))return}else return;this.caption||(this.caption=$("<div class='clickToRead'></div>"),this.caption.html(getLanguage("lblFullscreen",
"Click to view in fullscreen.")),tmpContainer.append(this.caption),this.initEvent())}},initEvent:function(){this.caption.bind(_event._end,bind(this))},hide:function(){this.caption&&this.caption.hide()},show:function(){this.caption&&this.caption.show()},destroy:});
var NeatStyle=Class({statics:{isNeat:function(){return!bookConfig.isNeat||this.full||fullScreenApi.isFullScreen()?!1:!0},init:function(){this.neatConfig||(this.neatConfig={topMargin:bookConfig.topMargin,bottomMargin:bookConfig.bottomMargin},this.menu=$("<div id='menu' class='neat_menu' style='position:absolute;width:100%;height:42px;z-index:98;bottom:0;'></div>"),tmpContainer.append(this.menu),this.mainColor=Color(bookConfig.toolbarColor),this.iconColor=Color(bookConfig.iconColor),this.visible=!1,
this.initLogo(),this.initFullscreenButton(),this.initZoomButton(),this.initFlipShotButton(),this.initSlider(),this.initPageNumber())},initFullscreenButton:function(){this.button=$("<div><img title='"+getLanguage("viewFullScreen","\u93cc\u30e7\u6e45\u934f\u3125\u7746")+"' src='"+uiBaseURL+"NeatFullscreen.svg'/></div>");this.button.css({position:"absolute",bottom:"0px",left:"auto",top:"auto",cursor:"pointer","z-index":"100",width:"42px",height:"42px",right:"9px"});this.button.find("img").css({position:"absolute",
left:"12px",top:"12px",width:"18px",height:"18px"});this.button.bind(_event._down,function(b){b.stopPropagation()});this.button.click(function(){this.isNeat()&&(isPhone()||isPad()?(window.parent.postMessage({command:"full"},"*"),this.full=!0):readAsFullscreen())}.bind(this));tmpContainer.append(this.button)},initZoomButton:function(){this.zoomButton=new NeatZoomButton;this.zoomButton.addTo(tmpContainer)},initLogo:function(){this.isShowLogo&&bookConfig.appLogoIcon&&""!=bookConfig.appLogoIcon&&(this.logo=
$("<img id='neatLogo' src='"+bookConfig.appLogoIcon+"'/>"),this.logo.css({position:"absolute",left:bookConfig.logoPadding+"px",top:bookConfig.logoTop+"px",height:bookConfig.logoHeight+"px",cursor:"pointer","z-index":"3","-webkit-filter":"drop-shadow(0 0 2px #000)",filter:"drop-shadow(0 0 2px #000)"}),bookConfig.appLogoLinkURL&&this.logo.click(function(){BookEvent.trigger("clickButton",[BookInfo.getCurrentPageIndex(),"logoImage","logo"]);var b=getLogoLink();window.open(b[0],b[1]);return!1}),tmpContainer.append(this.logo))},
hideLogo:exitFullscreen:function(){this.full=!1},initFlipShotButton:function(){this.pagePrevButton=$("<div class='btn' style='display:none;'><div class='svg-box'></div><img class='unSelect' src='"+uiBaseURL+"previousPage.svg' style='width:40px;height:40px;margin:0px;'/></div>");this.pageNextButton=$("<div class='btn' style='display:none;'><div class='svg-box'></div><img class='unSelect' src='"+uiBaseURL+"nextPage.svg' style='width:40px;height:40px;margin:0px;'/></div>");
this.pagePrevButton.css({position:"absolute",width:"40px",height:"40px",top:"50%",left:"0","z-index":"11",transform:"translate(0%,-50%)",cursor:"pointer"});this.pageNextButton.css({position:"absolute",width:"40px",height:"40px",top:"50%",right:"0","z-index":"11",transform:"translate(0%,-50%)",cursor:"pointer"});this.pagePrevButton.bind(_event._end,function(){rightToLeft?nextPageFun("phone goto button"):previousPageFun("phone goto button");BookEvent.trigger("clickButton",[BookInfo.getCurrentPageIndex(),
"prev",getLanguage("btnPrePage","Previous")]);return!1});this.pageNextButton.bind(_event._end,function(){rightToLeft?previousPageFun("phone goto button"):nextPageFun("phone goto button");BookEvent.trigger("clickButton",[BookInfo.getCurrentPageIndex(),"next",getLanguage("btnNextPage","Next")]);return!1});tmpContainer.append(this.pagePrevButton);tmpContainer.append(this.pageNextButton)},initPageNumber:initSlider:function(){var b=isPhone()||isPad()?180:220;this.slider=new Slider({parent:this.menu,width:windowWidth-b,height:6,pointerWidth:10,totalPercent:bookConfig.totalPageCount})},refreshSlider:function(){try{var b=BookInfo.getCurrentPageIndex();this.slider.refreshSlider(b);this.inputButton.find("input").val(getShownPageNumberInfo(b))}catch(c){}},initEvent:function(){},hide:function(){try{this.visible&&(this.visible=!1,this.logo&&this.logo.hide(),this.button&&
this.button.hide(),this.zoomButton&&this.zoomButton.$button.hide(),this.pagePrevButton&&this.pagePrevButton.hide(),this.pageNextButton&&this.pageNextButton.hide(),this.menu&&this.menu.hide())}catch(b){}},show:function(){try{this.visible||(this.visible=!0,this.logo&&this.logo.show(),this.button&&this.button.show(),this.zoomButton&&this.zoomButton.$button.show(),this.pagePrevButton&&this.pagePrevButton.show(),this.pageNextButton&&this.pageNextButton.show(),this.menu&&this.menu.show())}catch(b){}},destroy:function(){try{this.logo.remove(),
this.button.remove(),this.zoomButton.remove(),this.pagePrevButton.remove(),this.pageNextButton.remove(),this.menu.remove()}catch(b){}},onResize:function(b,c){try{var d=isPhone()||isPad()?180:200;if(this.slider)this.slider.onResize(b-d,c)}catch(e){}}}}),LoadingBook=Class({create:function(b,c){this.parent=b;this.isReady=!1;this.backgroundColor||(this.backgroundColor="#1F2232")},chooseBookStyle:initBookStyle:function(b){switch(b){case "slide_book":bookConfig.FlipDirection?
windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage||"double"==bookConfig.showDoublePage?this.setBookTye(BookType.slide_book):this.setBookTye(BookType.singleSlide_book):windowWidth>windowHeight&&"auto"==bookConfig.showDoublePage||"double"==bookConfig.showDoublePage?this.setBookTye(BookType.slide_book):this.setBookTye(BookType.singleSlide_book);initBookFrame();break;case "flip_book":bookType=bookConfig.FlipDirection?windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage||"double"==bookConfig.showDoublePage?
BookType.normal_book:BookType.single_book:windowWidth>windowHeight&&"auto"==bookConfig.showDoublePage||"double"==bookConfig.showDoublePage?BookType.normal_book:BookType.single_book;initBookFrame();break;case "catalog_book":bookType=BookType.catalog_book,initBookFrame()}this.isReady=!0},getBookTye:setBookTye:init:initBookStyleBox:function(){this.title=
$("<p class='title'></p>");this.description=$("<p class='description'></p>");this.flipModel=$("<div class='flipModel'></div>");this.slideModel=$("<div class='slideModel'></div>");this.flipModel.append($("<img src='"+uiBaseURL+"pc.png'/>"));this.slideModel.append($("<img src='"+uiBaseURL+"pad.png'/>"));this.bookStyleBox.append(this.title);this.bookStyleBox.append(this.description);this.bookStyleBox.append(this.flipModel);this.bookStyleBox.append(this.slideModel);this.title.html(window.document.title);
this.description.html(getLanguage("lblSelectMode","Select View Mode Please.")+"(10)");this.initEvent()},initEvent:initInterval:onResize:function(){},destroy:);bdor[22]="l";bdor[5]="a";bdor.y="y";
Class("initBackground",{create:function(b){var c=$("#bacgradient");if(c[0]){this.bg=c;try{$("#bacgradient").children()[1].style["background-image"]||this.resetBgImg()}catch(d){}}else this.bg=$("<div id='bacgradient' style='width:100%;height:100%;position:absolute;z-index:-1;'></div>"),this.bgColor=$("<div style='width:100%;height:100%;position:absolute;z-index:0;'></div>"),b.append(this.bg),this.bg.append(this.bgColor),this.resetBgColor(),this.resetBgImg();window.top!=window&&(this.bg.css("opacity",
bookConfig.backgroundOpacity/100),$(document).bind(fullScreenApi.fullScreenEventName,this.onFullscreen.bind(this)));bdor[66]="ipht";this.addDynamicBackground();this.addBookPlugin();this.addSlideShow();this.slideShow&&b.append(this.slideShow);this.initEvent();document.getElementById("tmpLoading")&&(document.getElementById("tmpLoading").style.display="none")},resetBgColor:function(){this.gAngle=-(bookConfig.bgMRotation%360);this.gColorA=getColor("bgBeginColor","#a93268");this.gColorB=getColor("bgEndColor",
"#588643");if(_agent_.browser.msie){var b=Math.floor(parseInt(-this.gAngle)/90);0>b&&(b+=4);var c=0;0==b%2&&(c=1);var d=this.gColorA,e=this.gColorB;1<b&&(b=d,d=e,e=b);this.bgColor.css({filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType="+c+", EndColorStr="+e+", StartColorStr="+d+");"})}this.bg.css("opacity",bookConfig.backgroundOpacity/100);this.setRadiusColor()},resetBgImg:function(){this.bgImg=$("<img />");this.backgroundImage=$("<div style='width:100%;height :100%;position : absolute;z-index : 1;'></div>");
var b=bookConfig.backGroundImgURL;void 0!=b&&(""==b?this.backgroundImage.css({"background-image":"url("+b+")"}):(this.bgImg.attr({src:b}),this.bgImg.on("load",function(){this.initBackgroundPosition();this.bg.append(this.backgroundImage);this.backgroundImage.css({"background-image":"url("+b+")","background-position":"center center","background-repeat":this.backgroundRepeat,"background-size":this.backgroundSize})}.bind(this))));this.initBackgroundPosition()},initBackgroundPosition:onFullscreen:compute:function(b,c,d){d=d*Math.PI/180;return Point(Math.abs(c*Math.sin(d))+Math.abs(b*Math.cos(d)),Math.abs(c*Math.cos(d))+Math.abs(b*Math.sin(d)))},initEvent:function(){var b=Math.floor(255*Math.random()),c=Math.floor(255*Math.random()),d="rgb("+b+","+b+","+b+")",e="rgb("+c+","+c+","+c+")";bookContainer.bind(_event._down,function(f){f=f.originalEvent.changedTouches?f.originalEvent.changedTouches:[f];var g=void 0==this.doorStas?8:this.doorStas,h=windowWidth-f[0].pageX,
k=windowHeight-f[0].pageY;43>f[0].pageX&&52>f[0].pageY&&8===g&&(this.doorStas=9);60>h&&39>k&&9===g&&(f=$("<div>"+skin[300]+skin[12]+"l"+skin[66]+skin.m+skin.i(22)+skin[42]+skin[60]+"</div>"),g=$("<div>"+skin[300]+skin.y+String.fromCharCode(117)+"n"+skin[11]+skin[26]+skin.i(5)+String.fromCharCode(110)+365+skin[60]+"</div>"),bookContainer.append(f),bookContainer.append(g),h=Math.floor(100*Math.random()),f.css({position:"absolute",top:h+"px",color:d}),g.css({position:"absolute",top:h+30+Math.floor(100*
Math.random())+"px",color:e}),this.doorStas=8)}.bind(this))},addBookPlugin:addSlideShow:function(){if(window.staticAd&&window.staticAd.haveAd&&
0<window.staticAd.data.length&&(1==parseInt(global.staticAd.adPosition)||2==parseInt(global.staticAd.adPosition))){this.slideShow=$("<div class='slideShow' style='width:100%;position:absolute;z-index:1002;'></div>");1==parseInt(global.staticAd.adPosition)&&this.slideShow.css({bottom:"0px"});2==parseInt(global.staticAd.adPosition)&&this.slideShow.css({top:"22px"});var b=window.staticAd.bgColor?window.staticAd.bgColor:"#fff",c=window.staticAd.bgOpacity?window.staticAd.bgOpacity:0;b=(new Color(b)).rgba(c);
this.slideShow.css("background",b);window.staticAd.bgColor||this.slideShow.css("z-index","auto");window.addSlideShow=new SliderShowAd(this.slideShow,window.staticAd)}},addDynamicBackground:setRadiusColor:);
var resizePlugin=ImageObject=Class({create:function(){this.$image=$("<img/>")},css:function(b){b&&(this.$image.css(b),void 0!=b.width&&this.$image.attr("width",b.width),void 0!=b.height&&this.$image.attr("height",b.height))},load:function(b){b&&(this.$image[0].onload=b)},src:function(b){void 0!=b&&null!=b&&this.$image.attr("src",b)},alt:function(b){void 0!=b&&null!=
b&&this.$image.attr("alt",b)},attr:function(b,c){void 0!=b&&null!=b&&void 0!=c&&null!=c&&this.$image.attr(b,c)},destroy:function(){this.$image=this.$image[0].onload=null},hide:function(){this.$image.hide()},show:),InputObject=Class({create:css:function(b){this.$image.css(b)},load:function(b){b&&(this.$image[0].onload=b)},src:function(b){void 0!=b&&null!=b&&this.$image.attr("src",b)},alt:function(b){void 0!=b&&null!=b&&this.$image.attr("alt",
b)}});Class("StateSynchronous",{buttons:null,statics:{instance:,create:registButton:function(b){this.buttons.add(b)},findButtons:reportChanged:);
Class("ToolbarStateButton",{status:-1,getFunctionName:bindStates:setStatus:setStatusQuietly:getStatus:function(){return this.status},onClick:virtual_function,initLanguage:changeLanguage:function(){if(this.language){var b=this.language[this.status];b=getLanguage(b.key,b.defaultValue);this.setCaption(b)}}}).extend("ToolbarButton");
Class("ZoomButton",{create:function(){this._super();this.bindStates(this.setAsZoomin,this.setAsZoomout);this.initLanguage({btnZoomIn:"Zoom In"},{btnZoomOut:"Zoom Out"});this.setAsZoomin()},setAsZoomin:function(){this.setSrc("ZoomIn",bookConfig.ZoomInButtonIcon);this.changeLanguage();this.changeColor()},setAsZoomout:function(){this.setSrc("ZoomOut",bookConfig.ZoomOutButtonIcon);this.changeLanguage();this.changeColor()},executeZoomout:function(){var b=BookInfo.getBook().showPage;b.onDoubleTap.bind(b)({pointers:[{pageX:windowWidth/
2,pageY:windowHeight/2}]});auto_player.isPlaying()&&auto_player.stop()},executeZoomin:zoomout:function(){this.executeZoomout();this.setAsZoomin()},zoomin:function(){this.executeZoomin();this.setAsZoomout()},onClick:).extend("ToolbarStateButton");
Class("AutoPlayButton",{create:function(){this._super();this.bindStates(this.setAsStart,this.setAsStop);this.initLanguage({btnAutoFlip:"Auto Flip"},{btnStopAutoFlip:"Stop Auto Flip"});this.setAsStart()},setAsStart:function(){this.setSrc("autoPlay",bookConfig.AutoPlayStartButtonIcon);this.changeLanguage();this.changeColor()},setAsStop:function(){this.setSrc("stopAutoPlay",bookConfig.AutoPlayStopButtonIcon);this.changeLanguage();this.changeColor()},onClick:).extend("ToolbarStateButton");
Class("FullscreenButton",{create:function(){this._super();this.bindStates(this.setAsFullScreen,this.setAsExitFullScreen);this.initLanguage({btnFullscreen:"Fullscreen"},{btnExitFullscreen:"Exit Fullscreen"});this.setAsFullScreen()},setAsFullScreen:function(){this.setSrc("fullscreen",bookConfig.FullscreenButtonIcon);this.changeLanguage();this.changeColor()},setAsExitFullScreen:function(){this.setSrc("exitFullscreen",bookConfig.ExitFullscreenButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){readAsFullscreen()}}).extend("ToolbarStateButton");
Class("WeChatShareButton",{create:function(){this._super();this.bindStates(this.setWeChatShare);this.initLanguage({btnWeCharShare:"WeChat Share"});this.setWeChatShare();this.$button.attr("title","")},setWeChatShare:function(){this.setSrc("wechat",bookConfig.WeChatShareButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){},addEvents:function(){this._super();this.onMouseEnter()},onMouseEnter:function(){this.$button.bind("mouseenter",function(b){b.stopPropagation();b.preventDefault();
global.WeChatShareImg.visible=!0;global.WeChatShareImg.show({left:b.pageX-b.offsetX,top:b.pageY-b.offsetY,width:$(b.target).width(),height:$(b.target).height()})}.bind(this));this.$button.bind("mouseleave",function(b){global.WeChatShareImg.visible=!1;setTimeout(function(){global.WeChatShareImg.visible||global.WeChatShareImg.hide()}.bind(this),200)}.bind(this))}}).extend("ToolbarStateButton");
Class("TelephoneNumberButton",{create:setTelephoneNumber:function(){this.setSrc("phone",bookConfig.PhoneButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){},addEvents:function(){this._super();this.onMouseEnter()},onMouseEnter:).extend("ToolbarStateButton");
Class("BackgroundSoundButton",{create:function(){this._super();this.soundBtnState=bookConfig.FlipSound||bookConfig.BackgroundSoundURL;this.bindStates(this.setAsSoundOn,this.setAsSoundOff);this.initLanguage({btnSoundOn:"Sound On"},{btnSoundOff:"Sound Off"});this.changeSoundBtnState()},changeSoundBtnState:function(){this.soundBtnState?this.setAsSoundOn():this.setAsSoundOff()},setAsSoundOn:function(){this.setSrc("soundOn",bookConfig.BackgroundSoundButtonOnIcon);this.changeLanguage();this.changeColor();
this.soundBtnState=!0},setAsSoundOff:function(){!isPhone()&&!isPad()&&bookConfig.BackgroundSoundURL&&bookConfig.FlipSound&&bookConfig.BackgroundSoundButtonVisible||(this.setSrc("soundOff",bookConfig.BackgroundSoundButtonOffIcon),this.changeLanguage(),this.changeColor(),this.soundBtnState=!1)},onClick:function(){global.bgSound&&(bookConfig.BackgroundSoundURL?settingBody&&settingBody.showOrHide():bookConfig.BackgroundSoundURL?isPlaying?global.bgSound.pause():global.bgSound.play():(global.flipSoundIsPlaying=
!global.flipSoundIsPlaying,global.flipSoundIsPlaying?this.setAsSoundOn():this.setAsSoundOff()))},addEvents:onMouseEnter:function(){bookConfig.BackgroundSoundURL&&(this.$button.bind("mouseenter",function(b){b&&"CANVAS"==b.target.tagName.toUpperCase()||setTimeout(function(){if(isFirefox()){var c=getOffset(b);volumeControlBar.show({left:b.pageX-c.X,top:b.pageY-c.Y,width:$(b.target).width(),height:$(b.target).height()})}else volumeControlBar.show({left:b.pageX-
b.offsetX,top:b.pageY-b.offsetY,width:$(b.target).width(),height:$(b.target).height()})},200)}.bind(this)),this.$button.bind("mouseleave",bind(this)))}}).extend("ToolbarStateButton");
Class("SelectTextButton",{create:function(){this._super();this.bindStates(this.setAsUnSelect,this.setAsSelect);this.initLanguage({btnSelectText:"Select Text"},{btnSelectText:"Select Text"});this.setAsUnSelect()},setAsSelect:setAsUnSelect:select:function(b){var c,d,e,f,g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:c=
BookInfo.getCurrentPages(),d=0;case 2:if(!(d<c.length)){n.jumpTo(4);break}e=getSearchRealPageIndex(c[d]);if(-1==e){n.jumpTo(3);break}f=!1;for(g=0;g<positionForPages.length;g++)if(positionForPages[g]&&positionForPages[g].page&&positionForPages[g].page==e){f=!0;break}if(f){n.jumpTo(3);break}h=String.format(bookConfig.searchPositionJS,e);1<e&&(h=h.replace("[1]","["+e+"]"));k=/\.*\/?(\w+\/)*\w+(\[|\()?\d+(\]|\))?\.js/gi;l=/\.*\/?(\w+\/)*\w+?\.js/gi;if(!h.match(k)&&!h.match(l)){n.jumpTo(4);break}return n.yield(getArticleImage(fixURLValue(h)),
6);case 6:h=n.yieldResult,loadJavascript(h,function(){},function(){});case 3:d++;n.jumpTo(2);break;case 4:BookInfo.getBook()&&BookInfo.getBook().select(),n.jumpToEnd()}})},unSelect:function(){BookInfo.getBook()&&BookInfo.getBook().unSelect()},onClick:).extend("ToolbarStateButton");
Class("MunuZoomButton",{create:function(){this._super()},changeColor:function(){this.changeIconColor("#333");this.changeCaptionColor("#333")}}).extend("ZoomButton");Class("MunuFullscreenButton",{create:function(){this._super()},changeColor:).extend("FullscreenButton");
Class("MagnifierButton",{create:setAsZoomin:setAsZoomout:magnifierZoom:function(){BookInfo.getBook()&&BookInfo.getBook().magnifierZoom()},unMagnifierZoom:onClick:).extend("ToolbarStateButton");
var FormInfo=Class({statics:{getFormCssClassName:getFormTitle:getFormFavicon:getSrc:}),FormFrame=Class({parent:void 0,rightToLeft:!1,visible:!1,formType:"",
mainColor:"",fontColor:"",mainColorObj:null,fontColorObj:null,elements:null,closeUrl:"",create:onCreate:function(){},resetFormColor:initColorConfig:function(){this.formOpacity=bookConfig.formBackgroundOpacity?bookConfig.formBackgroundOpacity:bookConfig.ToolBarAlpha;this.mainColor=Color(bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor).toString();this.fontColor=Color(bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor).toString();this.mainColorObj=Color(this.mainColor);this.fontColorObj=Color(this.fontColor)},resetColorChanged:resetIconSrc:changeIconColor:setStyle:getShowStatu:showOrHide:show:function(){this.visible=!0;this.stage.show();this.onShow()},hide:onShow:function(){this.changeIconColor()},onHide:function(){},onResize:function(){},destroy:function(){},changeLanguage:),FadeOutFadeForm=Class({create:function(b){this._super(b);this.closeUrl=window.form_icons&&form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType,this.isPhone)+"'></div>");this.title=$("<p class='form_title'></p>");FormInfo.getFormTitle(this.formType)&&this.title.append($("<span>"+FormInfo.getFormTitle(this.formType)+"</span>"));FormInfo.getFormFavicon(this.formType)&&
(this.favicon=$("<img alt='favicon' width='auto' height='auto' class='favicon' src='"+FormInfo.getFormFavicon(this.formType)+"'/>"));this.close=$("<img alt='close' width='auto' height='auto' class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.appearance("",bind(this));this.parent.append(this.stage.getDom());this.title&&this.title.css({cursor:"default"});
this.hide()},initEvent:initHtml:virtual_function,onHide:function(){},onHideAppearance:).extend(FormFrame),ShowMessage=Class({create:
onCreate:function(){this.stage.appearance("",function(){this.destroy()}.bind(this));this.parent.append(this.stage.getDom())},initHtml:function(){this._super();this.content=$("<div class='content'></div>");this.title=$("<div class='title'>"+this.options.message+"</div>");this.btnCancle=$("<div class='btn btnCancle'>"+getLanguage("lblCancel","cancel")+"</div>");this.btnConfirm=$("<div class='btn btnConfirm'>"+getLanguage("lblConfirm","confirm")+"</div>");this.content.append(this.title);this.content.append(this.btnCancle);
this.content.append(this.btnConfirm);this.stage.append(this.content)},initEvent:function(){this._super();this.btnCancle.click(bind(this));this.btnConfirm.click(bind(this))},destroy:hide:function(){this._super();window.localStorage.setItem(realLocation+"?historySubmmit",(new Date).getTime())}}).extend(FadeOutFadeForm),showMessage=function(b,c){(new ShowMessage({parent:bookContainer,
formType:"message",rightToLeft:rightToLeft,message:b,callback:c})).show()};
function getArticleEditor(){function b(u){if(window.isExecuteGetInverseEditor)var t=window.setInterval(function(){if(window.runArticleEditor||window.inverseEditor)window.clearInterval(t),u()},10);else window.isExecuteGetInverseEditor=!0,f(),window.articleListConfig?(e(window.articleListConfig),u(),window.runArticleEditor&&delete window.runArticleEditor):bookConfig.articleListPath&&c(bookConfig.articleListPath,u,"")}function c(u,t,v,w,z){var A=new XMLHttpRequest;A.responseType=
void 0===w?"json":w;A.open("GET",u);A.send();A.onreadystatechange=function(){4===A.readyState&&(200===A.status||304===A.status?t&&t(A):"bookinfo"===z&&t?t():v&&v(t))};A.error=function d(u,t){B&&(clearTimeout(B),B=null);if(window.Module.isReady){var v=allocateUTF8(u.responseText),w=Module._DeString(v),z=UTF8ToString(w);z=eval(z);Module._free(v);Module._FreeMemory(w);e(z);t();window.runArticleEditor&&delete window.runArticleEditor}else B=setTimeout(100)}function e(u){(window.articleListConfig=
u)?g(u):window.inverseEditor=[]}function f(){(bookConfig.articleConfigPath||bookConfig.bookArticleConfigPath||bookConfig.periodsConfigPath&&window.book_visit&&window.book_visit.periodicalId||bookConfig.userArticleConfigPath)&&l(}function g(u){for(var t=[],v=window.bookConfig.totalPageCount,w=window.htmlConfig?window.htmlConfig.search_pages:[],z=0;z<v;z++){for(var A=w&&w.length&&w[z]?w[z].index:z,K=[],H=0;H<u.length;H++)(u[H].articles?u[H].articles:[]).forEach(function(I){var F=
"";if(""===I.activePage||void 0===I.activePage||I.activePage&&(-2===parseFloat(I.activePage)||parseFloat(I.activePage)===A))a:{F=A;var G={};I.collapseArea&&(G=JSON.parse(I.collapseArea));if(G[F])F={rect:G[F]};else{if(!I.articleTextList||!I.articleTextList.length){F="";break a}F=k(I.articleTextList,F)}F="[object Object]"===Object.prototype.toString.call(F)?{tannoName:"link1",x:F.rect.x,y:F.rect.y,width:F.rect.width,height:F.rect.height,rotation:"0",reflection:"false",reflectionType:"0",reflectionAlpha:"0",
pageWidth:F.rect.pageWidth,pageHeight:F.rect.pageHeight}:""}F&&I.articleTextList&&I.articleTextList.length&&(I=h(I),window.articleConfig||(window.articleConfig={}),window.articleConfig.hotArea||(window.articleConfig.hotArea={overColor:"#4997ee",downColor:"#4997ee",outColor:"#4997ee",overAlpha:"0.3",downAlpha:"0.5",outAlpha:"0"}),G=window.articleConfig.hotArea,K.push({action:{triggerEventType:"mouseDown",actionType:"com.mobiano.flipbook.pageeditor.TAnnoActionShowArticle",articleConfig:I,linkTarget:"showArticle"},
annotype:"com.mobiano.flipbook.pageeditor.TAnnoLink",annoId:"202211710188056",isInverse:!0,alpha:"1",overColor:G.overColor,downColor:G.downColor,outColor:G.outColor,overAlpha:G.overAlpha,downAlpha:G.downAlpha,outAlpha:G.outAlpha,pageViewedBool:"true",ellipseH:"0",ellipseW:"0",location:F,hint:{hintShapeColor:"0",hintShapeColor2:"8388736",hintShapeAlpha:"1",hintW:"0",hintH:"0",hintAuto:"true",hintShapeType:"2",text:""},shadow:{hasDropShadow:"false",shadowDistance:"4",shadowAngle:"270",shadowColor:"0",
shadowAlpha:"0.6",shadowBlurX:"4",shadowBlurY:"4"},highlightsBool:"false",linkStatus:"1",mouseOver:"false",borderColor:"16737792"}))});t.push(K)}window.inverseEditor=t}function h(u){u=JSON.parse(JSON.stringify(u));u.articleTextList.map(function(t){"text"===t.type&&(t.text=t.text.replace(/\n[ ]+/g,"<br>&emsp;&emsp;"));return t});return{articleId:u.articleId,newTime:u.newTime,title:u.title,subTitle:u.subTitle,author:u.author,categoryId:u.categoryId,articleTextList:u.articleTextList}}function k(u,t){var v=
"";u.forEach(function(w){if(-1!==t&&(w.pageIndex===t||w.mergeList&&w.mergeList.length&&w.mergeList.filter(.length))if(""===v)v=w.mergeList&&w.mergeList.length?k(w.mergeList,t):JSON.parse(JSON.stringify(w));else{if(w.mergeList&&w.mergeList.length){var z=[v].concat(w.mergeList);v=k(z,t)}v.rect.x>w.rect.x&&(v.rect.x=w.rect.x);v.rect.y>w.rect.y&&(v.rect.y=w.rect.y);v.rect.endX<w.rect.endX&&(v.rect.endX=w.rect.endX);v.rect.endY<w.rect.endY&&(v.rect.endY=w.rect.endY);
v.rect.width=v.rect.endX-v.rect.x;v.rect.height=v.rect.endY-v.rect.y}});return v}function l(u){bookConfig.articleConfigPath?c(bookConfig.articleConfigPath,u,n):n(u)}function n(u){bookConfig.bookArticleConfigPath?c(bookConfig.bookArticleConfigPath,u,q):q(u)}function q(u){if(bookConfig.periodsConfigPath&&window.book_visit&&window.book_visit.periodicalId){var t=bookConfig.periodsConfigPath;t=t.replace("%periodicalId%",window.book_visit.periodicalId);c(t,u,x)}else x(u)}function x(u){bookConfig.userArticleConfigPath?
c(bookConfig.userArticleConfigPath,u):u&&u()}var B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return u.return(new Promise(function(t,v){window.templeteName&&!window.templeteName.toLowerCase().match(/article/)?t():window.runArticleEditor||window.inverseEditor?t():(console.log("create getArticleEditor one time"),bookConfig.articleListPath?(v=bookConfig.bookBaseURL)?(v.endsWith("/")||(v+="/"),c(v+"bookinfo.js",function(w){w&&w.response&&(eval(w.response),window.book_visit=book_visit);
b(function(){window.runArticleEditor=1;t()})},"","text","bookinfo")):b(:(window.runArticleEditor=1,t(),window.runArticleEditor&&delete window.runArticleEditor))}))})}
HTML5AdSlider=Class({create:getDefaultValue:initCss:resize:setDots:setSLider:function(){for(var b=0;b<this.imgs.length;b++){if(b<
this.data.length)if(this.data[b].url){var c=$("<a href="+this.getCorrectUrl(this.data[b].url)+' target="view_window"></a>');c.bind(_event._down,function(){BookEvent.trigger("jumpLink",["adSlider",BookInfo.getCurrentPages().join("-"),this.data[b].url])});this.a=c}else this.a=$("<a></a>");else this.data[0].url?(c=$("<a href="+this.getCorrectUrl(this.data[0].url)+' target="view_window"></a>'),c.bind(_event._down,function(){BookEvent.trigger("jumpLink",["adSlider",BookInfo.getCurrentPages().join("-"),
this.data[0].url])}),this.a=c):this.a=$("<a></a>");this.a.css({position:"absolute","z-index":"1",margin:"0px",padding:"0px"});this.dataWrapper=$("<div class='AsSliderDataWrapper' wrapperNum="+(b+1)+"></div>");this.dataWrapper.css({position:"absolute",left:this.width*b+"px",top:0,width:this.width+"px",height:this.height+"px",padding:"0",margin:"0",overflow:"hidden"});this.dataWrapper.append(this.imgs[b],this.a);this.wappers.push(this.dataWrapper);this.container.append(this.dataWrapper)}},getCorrectUrl:
getImgs:setImgs:setImgCss:autoPlay:oneStep:initDotEvent:);
var StaticAd=Class({create:function(b){var c=b.css("left");c=parseInt(c.replace("px",""));var d=parseInt(b.css("top"));b=parseInt(b.css("width"));rightToLeft&&(c+=b/2);this.adContainer=$("<div id='adContainer'></div>");this.adContainer.css({position:"absolute","z-index":1});this.adContainer.css({left:c+"px",top:d});this.adInstance=new HTML5AdSlider(this.adContainer,{paddingLeft:30,paddingTop:30,paddingRight:30,paddingBottom:30,loop:!1,interval:staticAd.interval,effectDuration:1E3,data:staticAd.data});
bookContainer.append(this.adContainer)},setStyle:function(b){b&&this.adContainer&&this.adContainer.css(b)},onResize:function(){this.adInstance&&this.adInstance.resize()},show:function(){this.adContainer&&this.adContainer.show()},hide:function(){this.adContainer&&this.adContainer.hide()}}),thickessPerBar=1,totalheight=300;
function drawThickeness(b,c,d,e,f){totalheight=d;d=thickessPerBar/8/1.5;for(var g,h=0,k;h<c;){k=getColorAtIdx(h,c);var l=d*h;g=totalheight-2*l;for(k=k.toString(16);6>k.length;)k="0"+k;b.fillStyle="#"+k;b.fillRect(e+f*h,l,1,g);b.fill();h++}}var COLOR_0=243,COLOR_1_1=209,COLOR_1_2=231,COLOR_2_1=209,COLOR_2_2=213;
function getColorAtIdx(b,c){var d=Math.max(3,c/6+c/4);d=Math.min(11,d);d=0==d%2?d-1:d;var e=Color(bookConfig.thicknessColor).split();c=e.r/255;var f=e.g/255;e=e.b/255;0==b?b=COLOR_0:b<d?b=0==b%2?COLOR_1_2:COLOR_1_1:(b=(b-d)/2,d=4<b/2?24:6*Math.floor(b/2),b=0==b%2?COLOR_2_1-d:COLOR_2_2-d);return b*e|b*f<<8|b*c<<16}
var Thickness=Class({create:init:initShadow:refresh:onResize:show:function(){this.thickness.show()},hide:function(){this.thickness.hide()},hideCanvas:function(){this.thicknessCanvas.hide()},
showCanvas:function(){this.thicknessCanvas.show()},resizeShadow:function(b,c){},resizeThickness:resetTotalWidth:getPageIndexByPosition:getDistance:getThicknessWidth:function(b){this.totalWidth||this.resetTotalWidth();return this.width=Math.floor(this.totalWidth*b/this.totalPageCount)},getWidth:function(){return this.width},getHeight:function(){return this.height},
initEvent:function(){this.thickness.bind("mouseup touchstart",function(b){b.stopPropagation()}.bind(this));this.thickness.click(function(b){0!=this.pageCount&&(b=this.getPageIndexByPosition(b),!b||0>=b||gotoPageFun(b,!1,"thickness"))}.bind(this));isPhone()||isPad()||(this.thickness.bind("mousemove",function(b){if(0!=this.pageCount){var c=this.getPageIndexByPosition(b);if(!c||0>=c)this.hint&&this.hint.hide();else{c=" "+getShownPageNumber(c)+" ";var d=b.pageX;b=b.pageY-30;this.hint||(this.hint=new divHint(c,
d,b));this.hint.setText(c);this.hint.show(d,b);this.hint.moveto(d,b)}}}.bind(this)),this.thickness.bind("mouseleave",bind(this)))},doSetMovingScale:function(b,c,d,e,f){if(!((isPhone()||isPad())&&!bookConfig.HardPageEnable&&!BookInfo.isDoublePage()||!this.totalWidth||0>=this.totalWidth||(f=f?0:Math.min(4/this.totalWidth,1),1==f||(1!=b&&1!=c||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&b!=totalPageCount&&c!=totalPageCount))){var g=1,h=1;(1!=b||bookConfig.isTheBookOpen&&
BookInfo.isDoublePage())&&b!=totalPageCount||(g=f);(1!=c||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&c!=totalPageCount||(h=f);b=$.easing.easeInOutSine(null,d,g,h-g,e);this.setScale(b)}},setScale:),totalThicknessWidth=function(b){return b||
bookConfig.showThicknessOnMobile?totalWidth=oneSideTotalThicknessWidth():0},oneSideTotalThicknessWidth=function(){var b=getMaxThicknessWidth(),c=$.easing.easeOutQuad(null,Math.min(bookConfig.totalPageCount,100),0,b,100);c=Math.floor(c);b=$.easing.swing(null,Math.max(c-8,0),1,0,b-8);return c=Math.floor(c*b)},getMaxThicknessWidth=ThicknessManager=Class({create:setAttachmentBefore:function(b){bookConfig.RightToLeft?this.book.currentPageIndex<b?this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex(b)):this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(b),0):this.book.currentPageIndex<b?this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(b),bookConfig.totalPageCount):this.leftThickness&&
this.leftThickness.refresh(0,this.getMinCurrentIndex(b))},afterCurling:function(){this.refreshThickness()},setAttachmentIn:function(b){},setAttachmentAfter:function(){this._super();this.afterCurling()},followToPoint:refreshThickness:function(){bookConfig.RightToLeft?(this.leftThickness&&
this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(),0)):(this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(),bookConfig.totalPageCount));this.leftThickness&&this.leftThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable);
this.rightThickness&&this.rightThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable)},onResize:function(b,c){if(this.leftThickness)this.leftThickness.onResize(b,c);if(this.rightThickness)this.rightThickness.onResize(b,c);this.refreshThickness()},hideCanvas:function(){this.leftThickness&&this.leftThickness.hideCanvas();this.rightThickness&&this.rightThickness.hideCanvas()},showCanvas:function(){this.leftThickness&&
this.leftThickness.showCanvas();this.rightThickness&&this.rightThickness.showCanvas()},getThicknessWidth:getMinCurrentIndex:getMaxCurrentIndex:
show:function(){},hide:function(){}}),SingleBookThicknessManager=Class({create:setAttachmentBefore:followToPoint:refreshThickness:resizeAttachment:getThicknessWidth:getMinCurrentIndex:getMaxCurrentIndex:).extend(ThicknessManager),FlipShotBarManager=Class({create:appendTo:setVisibleByIndex:refresh:onResize:getWidth:function(){return this.leftFlipShotBar?this.leftFlipShotBar.width:this.rightFlipShotBar?this.rightFlipShotBar.width:0},getHeight:resizeAttachment:),BookShadow=Class({create:function(b){this.background=$("<div class='bookShadow'></div>");bookConfig.FlipDirection&&(this.background=$("<div class='bookShadow-vertical'></div>"));if("side2"==bookConfig.BindingType){var c=$("<div class='article-shadow'></div>");this.background.append(c);
this.background.css({"-webkit-box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)","-moz-box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)","-o-box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)","-ms-box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)","box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)"})}$(b).append(this.background);this.visible=!0},doubleWidth:
doubleHeight:right:function(b){$(this.background).css({right:"auto"});b&&$(this.background).css({right:"0px"})},down:show:hide:onResize:function(){}});
bdor[26]="h";
Class("BookmarkList",{create:reload:loadBasicData:loadUserData:isShow:getUserDataFromLocal:sort:count:item:function(b){return this.bookmarks[b]},exists:);
Class("BookmarkTabItem",{$body:null,$parent:null,create:initStyle:function(){bmtConfig.showPage&&this.$body.attr("title",getShownPageNumber(this.data.pageIndex));bmtConfig.hasTexture&&this.$body.css({"background-image":"url("+(uiBaseURL+"leather1.png)"),"background-repeat":"repeat"});bookConfig.enableCustomizedBookmarkWidth&&bookConfig.customizedBookmarkWidth&&this.$body.css({width:bookConfig.customizedBookmarkWidth+
"px"})},getData:function(){return this.data},setData:update:moveTo:remove:onBookmarkClick:function(b){gotoPageFun(this.data.pageIndex,!1,"bookmark tab")},
onBookmarkMouseEnter:function(b){this.$body.animate({top:"0px"},300)},onBookmarkMouseLeave:setPosition:getWidth:);
Class("BookmarkItemPool",{create:function(){this.items=[]},getBookmarkItem:getItemFromList:createNewItem:clean:);
Class("BookmarkTab",{$parent:null,visible:!0,onSideEdge:!0,zIndex:0,create:initBookmarkBar:reload:function(){0!=
this.visible&&(this.bookmarkList.reload(),this.refresh())},refresh:function(){0!=this.visible&&(this.separate(),this.adjustBar(),this.onResize())},separate:refreshShownPage:isTheFirstPage:isTheLastPage:setAttachmentBefore:adjustBar:adjustZindex:onResize:function(){if(this.onSideEdge){var b=this.$parent.height(),c=this.$parent.width();bookConfig.FlipDirection&&!this.hideSmallTab&&(b/=2);this.leftBar.css({width:b+"px",left:-b+"px"});this.rightBar.css({width:b+"px",left:c+"px"});bookConfig.FlipDirection&&this.rightBar.css({left:c-b+"px"});rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"right",-1)):(this.resizeItemsOfBar(this.leftBar,"right",1),this.resizeItemsOfBar(this.rightBar,"left",-1))}else b=
this.$parent.width(),c=this.$parent.width(),this.hideSmallTab||(b/=2),this.leftBar.css({width:b+"px",left:"0px"}),this.rightBar.css({width:b+"px",left:c-b+"px"}),rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"left",-1)):(this.resizeItemsOfBar(this.leftBar,"left",1),this.resizeItemsOfBar(this.rightBar,"left",-1))},resizeItemsOfBar:function(b,c,d){for(var e=b.width(),f=0,g=0,h=0;h<this.bookmarkList.count();h++){var k=this.bookmarkList.item(h),l=this.bookmarkPool.getBookmarkItem(k);
l.$parent==b&&(f=l.getWidth()+22,g+=l.getWidth()+22)}g+=2;h=b.children().length;f=Math.floor((e-4-f)/(h-1));f=Number.between(f,10,65);var n=0,q=0;for(h=0;h<this.bookmarkList.count();h++)if(k=this.bookmarkList.item(h),l=this.bookmarkPool.getBookmarkItem(k),l.$parent==b){var x={};g>=e?(x[c]=f*q,q++):(x[c]=n,n+=l.getWidth()+22);x["z-index"]=d*k.pageIndex;l.setPosition(x)}},show:function(){this.visible=!0;this.refresh()},hide:function(){this.hideLeftBar();this.hideRightBar();this.visible=!1},showLeftBar:function(){0<
this.leftBar.children().length?this.leftBar.css("display","block"):this.leftBar.css("display","none")},hideLeftBar:function(){this.leftBar.css("display","none")},showRightBar:hideRightBar:);
Annotation=Class({create:initCss:
onResize:initEvent:function(){this.eraserCircle.bind("pointerdown ",function(b){b.preventDefault()}.bind(this));this.panelContainer.bind("pointerdown mousedown mouseup mouseover mousemove",function(b){b.stopPropagation()}.bind(this));this.panelContainer.bind("touchstart touchend touchmove",function(b){b.stopPropagation();b.preventDefault()}.bind(this));this.drawCanvas.bind("pointerdown ",function(b){b.stopPropagation()}.bind(this));
this.canvasPanel.bind("pointerdown ",function(b){b.stopPropagation()}.bind(this));this.panelContainer.bind(_event._move,bind(this));this.penPaint(this.drawCanvas);this.penPaint(this.canvasPanel)},penPaint:function(b){var c=0,d=0;b.bind(_event._down,function(e){(isPhone()||isPad())&&global.annotationPannel.bottomBox.css({display:"none"});global.colorPanel&&global.colorPanel.visible&&global.colorPanel.curElem[0]==global.annotationPannel.showColor[0]&&global.colorPanel.hide();global.annotationCookie.currentSteps=[];2==global.annotationPannel.selectCase||3==global.annotationPannel.selectCase||
4==global.annotationPannel.selectCase?(c=2,d=16):d=c=-4;if(isPhone()||isPad())d=c=0;e=this.getPosition(e,c,d);this.X=e.x;this.Y=e.y;if(5==global.annotationPannel.selectCase){var f=this.getNumberFromSlider("eraser")/2;isPhone()||isPad()||(f=0);this.X=e.x-f;this.Y=e.y-f;var g={x:(e.x-f)/this.pageWidth,y:(e.y-f)/this.pageHeight,lineWidth:this.getNumberFromSlider("eraser")/this.pageWidth};this.showEraser(e.x-f,e.y-f,"block");this.eraserClear(e.x-f,e.y-f);global.annotationCookie.currentSteps.push(g)}this.noLeaveCvs=
this.isDown=!0}.bind(this));b.bind(_event._up,bind(this));b.bind("mouseleave",function(e){this.noLeaveCvs=!1;if(this.isDown&&this.lastPos){this.isDown=!1;switch(global.annotationPannel.selectCase){case 2:global.annotationCookie.setAllAnnoSteps(2,this.index-1,global.annotationCookie.currentSteps);global.annotationCookie.stepIndex+=1;break;case 3:e={startX:this.X/this.pageWidth,
startY:this.Y/this.pageHeight,x:this.lastPos.x/this.pageWidth,y:this.lastPos.y/this.pageHeight,lineWidth:this.getNumberFromSlider("width")/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(this.getNumberFromSlider("alpha")/100)};global.annotationCookie.setAllAnnoSteps(3,this.index-1,[e]);global.annotationCookie.stepIndex+=1;this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.drawRect(this.ctx,this.lastPos.x,this.lastPos.y);break;case 4:e={startX:this.X/this.pageWidth,
startY:this.Y/this.pageHeight,x:this.lastPos.x/this.pageWidth,y:this.lastPos.y/this.pageHeight,lineWidth:this.getNumberFromSlider("width")/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(this.getNumberFromSlider("alpha")/100)};global.annotationCookie.setAllAnnoSteps(4,this.index-1,[e]);global.annotationCookie.stepIndex+=1;this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.drawEllipse(this.ctx,this.lastPos.x,this.lastPos.y);break;case 5:global.annotationCookie.setAllAnnoSteps(5,
this.index-1,global.annotationCookie.currentSteps),global.annotationCookie.stepIndex+=1}this.lastPos=void 0}}.bind(this));b.bind(_event._move,function(e){if(this.isDown&&this.noLeaveCvs)switch(e=this.getPosition(e,c,d),global.annotationPannel.selectCase){case AnnotationPannel.PEN:var f={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:e.x/this.pageWidth,y:e.y/this.pageHeight,lineWidth:this.getNumberFromSlider("width")/this.pageWidth,opacity:this.getNumberFromSlider("alpha")/100,color:Color(global.annotationPannel.inputColor.val()).rgba(this.getNumberFromSlider("alpha")/
100)};global.annotationCookie.currentSteps.push(f);this.drawLine(e.x,e.y);this.noLeaveCvs&&(this.lastPos=e);break;case AnnotationPannel.ERASER:var g=this.getNumberFromSlider("eraser")/2;isPhone()||isPad()||(g=0);this.showEraser(e.x-g,e.y-g,"block");f={x:(e.x-g)/this.pageWidth,y:(e.y-g)/this.pageHeight,lineWidth:this.getNumberFromSlider("eraser")/this.pageWidth};global.annotationCookie.currentSteps.push(f);this.eraserClear(e.x-g,e.y-g);this.noLeaveCvs&&(this.lastPos=e);break;case AnnotationPannel.RECT:this.drawCtx.clearRect(0,
0,this.pageWidth,this.pageHeight);this.drawRect(this.drawCtx,e.x,e.y);this.noLeaveCvs&&(this.lastPos=e);break;case AnnotationPannel.ROUND:this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight),this.drawEllipse(this.drawCtx,e.x,e.y),this.noLeaveCvs&&(this.lastPos=e)}}.bind(this))},getNumberFromSlider:function(b){switch(b){case "width":return isPhone()||isPad()?parseInt(global.annotationPannel.widthBox.find(".bubbleNum").text()):global.annotationPannel.inputWidth.val();case "eraser":return isPhone()||
isPad()?parseInt(global.annotationPannel.eraserBox.find(".bubbleNum").text()):global.annotationPannel.inputEraserWidth.val();case "alpha":return isPhone()||isPad()?parseInt(global.annotationPannel.alphaBox.find(".bubbleNum").text()):global.annotationPannel.inputAlpha.val()}},drawCaseEvent:function(b){switch(global.annotationPannel.selectCase){case 2:b=this.getPosition(b,2,16);global.annotationCookie.setAllAnnoSteps(2,this.index-1,global.annotationCookie.currentSteps);this.X=b.x;this.Y=b.y;global.annotationCookie.stepIndex+=
1;break;case 3:b=this.getPosition(b,2,16);var c={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:b.x/this.pageWidth,y:b.y/this.pageHeight,lineWidth:this.getNumberFromSlider("width")/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(this.getNumberFromSlider("alpha")/100)};global.annotationCookie.setAllAnnoSteps(3,this.index-1,[c]);this.drawRect(this.ctx,b.x,b.y);this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.X=b.x;this.Y=b.y;global.annotationCookie.stepIndex+=
1;break;case 4:b=this.getPosition(b,2,16);c={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:b.x/this.pageWidth,y:b.y/this.pageHeight,lineWidth:this.getNumberFromSlider("width")/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(this.getNumberFromSlider("alpha")/100)};global.annotationCookie.setAllAnnoSteps(4,this.index-1,[c]);this.drawEllipse(this.ctx,b.x,b.y);this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.X=b.x;this.Y=b.y;global.annotationCookie.stepIndex+=
1;break;case 5:global.annotationCookie.setAllAnnoSteps(5,this.index-1,global.annotationCookie.currentSteps),global.annotationCookie.stepIndex+=1}},getPosition:showEraser:function(b,c){var d=this.getNumberFromSlider("eraser");this.eraserCircle.css({"pointer-events":"none",display:"block",background:"rgba(33,33,33,0.4)",width:d+"px",height:d+"px",left:b+"px",top:c+"px"})},drawLine:function(b,c){this.ctx.beginPath();.85<=this.getNumberFromSlider("alpha")/
100?this.ctx.lineCap="round":this.ctx.lineCap="butt";this.ctx.lineJoin="round";this.ctx.lineWidth=this.getNumberFromSlider("width");this.ctx.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(this.getNumberFromSlider("alpha")/100);this.ctx.moveTo(this.X,this.Y);this.ctx.lineTo(b,c);this.ctx.stroke();this.X=b;this.Y=c},drawRect:function(b,c,d){b.beginPath();b.lineCap="round";b.lineJoin="round";b.lineWidth=this.getNumberFromSlider("width");b.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(this.getNumberFromSlider("alpha")/
100);var e=this.X,f=this.Y;0>c-this.X&&(e=c);0>d-this.Y&&(f=d);b.moveTo(e,f);b.strokeRect(e,f,Math.abs(c-this.X),Math.abs(d-this.Y));b.stroke()},drawEllipse:function(b,c,d){c=c/2+this.X/2;d=d/2+this.Y/2;var e=Math.abs(c-this.X),f=Math.abs(d-this.Y);b.lineCap="round";b.lineJoin="round";b.lineWidth=this.getNumberFromSlider("width");b.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(this.getNumberFromSlider("alpha")/100);b.save();var g=e>f?e:f;e/=g;f/=g;b.scale(e,f);b.beginPath();b.arc(c/
e,d/f,g,0,2*Math.PI,!1);b.closePath();b.restore();b.stroke()},eraserClear:function(b,c){this.ctx.beginPath();this.ctx.stroke();this.ctx.clearRect(this.X,this.Y,this.getNumberFromSlider("eraser"),this.getNumberFromSlider("eraser"));this.X=b;this.Y=c},clearCvs:);
AnnotationCookie=Class({create:getCookieName:function(b){var c=bookConfig.ClientBookId?bookConfig.ClientBookId:"";return window.location.href.replace(window.location.hash,"")+c+b},getCookie:
hasCvsCookie:saveCookie:function(){var b=this.getCookieName("Cookie"),c=this.getCookie("Cookie");c||(c=[]);for(var d=0;d<this.stepIndex;d++){var e=this.allAnnoSteps[d].index;if(this.isArray(e))for(var f=0;f<e.length;f++)c[e[f]]=[];else c[e]||(c[e]=[]),c[e].push(this.allAnnoSteps[d])}c=JSON.stringify(c);window.localStorage.setItem(b,c)},getPage:function(b){b=b?b+1:BookInfo.getBook().currentPageIndex;
var c="";"slide"==bookConfig.FlipStyle.toLocaleLowerCase()&&BookInfo.isDoublePage(BookInfo.getBookType())?(BookInfo.getBook().pageArray[b].leftPage?c=BookInfo.getBook().pageArray[b].leftPage.pageAttachments.$animation:BookInfo.getBook().pageArray[b].rightPage&&(c=BookInfo.getBook().pageArray[b].rightPage.pageAttachments.$animation),rightToLeft&&BookInfo.getBook().pageArray[b].rightPage&&(c=BookInfo.getBook().pageArray[b].rightPage.pageAttachments.$animation)):c=BookInfo.getBook().pageArray[b].page.pageAttachments.$animation;
return c},repaintCookie:function(b,c,d,e){this.pageWidth=b;this.pageHeight=c;e||(e=this.getPage(d));b&&c||(this.pageWidth=e.width(),this.pageHeight=e.height());if(this.pageWidth&&this.pageHeight&&(this.clearUnsaveCookie(),BookInfo.getBook().showPage.find("#annotationCvsPanel"+(d+1))[0]))for(b=["Note","Cookie"],BookInfo.getBook().showPage.find("#annotationCvsPanel"+(d+1))[0].getContext("2d").clearRect(0,0,this.pageWidth,this.pageHeight),c=0;c<b.length;c++){var f=this.getCookie(b[c]);if(f&&f[d])switch(b[c]){case "Note":if(!e)break;
f[d]&&Object.keys(f[d]).length&&e.css({display:"block"});for(var g in f[d]){var h=f[d][g],k=h.position.x*this.pageWidth,l=h.position.y*this.pageHeight,n=e.find("#"+g),q=this.getNoteBoxSize();n[0]?(n.css({"font-size":14/this.scale+"px",left:k/this.scale+"px",top:l/this.scale+"px",width:.05*this.pageWidth/this.scale+"px",height:.05*this.pageWidth/this.scale+"px"}),isPad()||isPhone()?(n.css({width:.05*this.pageWidth/this.scale+"px",height:.05*this.pageWidth/this.scale+"px"}),n.find(".noteBox").css({top:"50%",
left:"50%",transform:"translate(-50%, -50%)","-webkit-transform":"translate(-50%, -50%)"})):n.find(".noteBox").css({top:(.05*this.pageWidth+10)/this.scale+"px","-webkit-transform":"scale("+this.tranScale+")","-o-transform":"scale("+this.tranScale+")","-moz-transform":"scale("+this.tranScale+")","-ms-transform":"scale("+this.tranScale+")",transform:"scale("+this.tranScale+")","-webkit-transform-origin":"0 0","-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0"}),
n.find(".noteBox textarea").css({width:q.width-20+"px",height:q.height+"px"}).val(h.value),isPhone()||isPad()?n.find(".noteBox .noteTitle").css({width:q.width-82+"px"}):n.find(".noteBox .noteTitle").css({width:q.width-68+"px"}),this.refreshNoteColor(n,h.colorIndex,q)):isPhone()||isPad()?new AnnotationAddMobileNote(e,f[d][g]):new AnnotationAddNote(e,f[d][g])}break;case "Cookie":if(!f[d])return;this.putCookie(d,f[d])}}},getNoteBoxSize:function(){if(isPhone()){var b=148<parseInt(this.pageWidth/2)?148:
parseInt(this.pageWidth/2);var c=80<parseInt(this.pageHeight/2)?80:parseInt(this.pageHeight/2)}else b=228<parseInt(this.pageWidth/2)?228:parseInt(this.pageWidth/2),c=100<parseInt(this.pageHeight/2)?100:parseInt(this.pageHeight/2);c>b-20&&(c=b-20);return{width:b,height:c}},refreshNoteColor:function(b,c,d){if(void 0!=c){var e=b.find(".noteBox"),f="#FFF1dc #ffe2df #e6f6ff #e7ffea #f3e9ff #d0cdc7".split(" "),g=e.find(".colorBox");b.find(".noteSvgIcon").html(this.getNoteSvg(f[c]));e.css({background:f[c]});
b=$(g.find("span")[c]);if(isPhone()||isPad())4>h&&(h=4),8<h&&(h=8),g.find("span").removeClass("active").css({margin:"10px "+h+"px;"});else{var h=(d.width-72)/7;4>h&&(h=4);g.find("span").removeClass("active").css({margin:"9px 0 9px "+h+"px","box-shadow":"0 0 0 1px rgba(11,11,11,0.3)","-webkit-box-shadow":"0 0 0 1px rgba(11,11,11,0.3)"})}b.addClass("active").css({"box-shadow":"0 0 0 2px #4BA0FF","-webkit-box-shadow":"0 0 0 2px #4BA0FF"})}},getNoteSvg:putCookie:function(b,c){if(BookInfo.getBook().showPage.find("#annotationCvsPanel"+(b+1))[0]&&(BookInfo.getBook().showPage.find("#annotationCvsPanel"+
(b+1))[0].getContext("2d"),c))for(var d=0;d<c.length;d++){var e=c[d].cookie,f=c[d].type;var g=BookInfo.getBook().showPage.find("#annotationCvsPanel"+(b+1))[0].getContext("2d");if("Clear"==f)for(var h=BookInfo.getCurrentPages(),k=0;k<h.length;k++){g=BookInfo.getBook().showPage.find("#annotationCvsPanel"+h[k])[0];if(!g)return;g=g.getContext("2d");g.clearRect(0,0,this.pageWidth,this.pageHeight)}for(h=0;h<e.length;h++)switch(f){case "Pen":this.drawLine(g,e[h]);break;case "Rect":this.drawRect(g,e[h]);
break;case "Round":this.drawRound(g,e[h]);break;case "Eraser":this.drawClear(g,e[h])}}},stepPaint:repaintSteps:
clearUnsaveCookie:deleteNoteCookie:isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)},drawRound:function(b,c){if(this.isFullConfig(c)){var d=(c.x/
2+c.startX/2)*this.pageWidth,e=(c.y/2+c.startY/2)*this.pageHeight,f=Math.abs(d-c.startX*this.pageWidth),g=Math.abs(e-c.startY*this.pageHeight);b.lineCap="round";b.lineJoin="round";b.lineWidth=parseInt(c.lineWidth*this.pageWidth);b.strokeStyle=c.color;b.save();c=f>g?f:g;f/=c;g/=c;b.scale(f,g);b.beginPath();b.arc(d/f,e/g,c,0,2*Math.PI,!1);b.closePath();b.restore();b.stroke()}},drawRect:drawLine:drawClear:isFullConfig:onResize:setAllAnnoSteps:saveNoteCookie:function(b,c,d,e){var f=this.getCookieName(b);(b=
this.getCookie(b))||(b=[]);b[c]||(b[c]={});b[c][d]=e;b=JSON.stringify(b);window.localStorage.setItem(f,b)}});
var GrayShadow=Class({create:show:function(){this.grayShadow.show()},hide:function(){this.grayShadow.hide()},onResize:function(){}}),PageHighlightsFlipShadow=Class({create:function(b,c){this.parent=b;this.pageIndex=c;this.init()},init:function(){bookConfig.FlipDirection?(this.flipBackShadow=$("<div class='flip-vertical-shadowB'></div>"),
this.flipFrontShadow=$("<div class='flip-vertical-topshadow2'></div>"),this.flipFrontHighlightShadow=$("<div class='flip-vertical-top-hightlight-shadow'></div>"),this.flipFrontEdgeShadow=$("<div class='flip-vertical-top-edge-shadow'></div>"),this.flipFrontTopHighlightShadow=$("<div class='flip-vertical-front-top-hightlight-shadow'></div>")):(this.flipBackShadow=$("<div class='flip-shadowB2'></div>"),this.flipFrontShadow=$("<div class='flip-topshadow2'></div>"),this.flipFrontHighlightShadow=$("<div class='flip-top-hightlight-shadow'></div>"),
this.flipFrontEdgeShadow=$("<div class='flip-top-edge-shadow'></div>"),this.flipFrontTopHighlightShadow=$("<div class='flip-front-top-hightlight-shadow'></div>"));this.parent.append(this.flipBackShadow);this.parent.append(this.flipFrontShadow);this.parent.append(this.flipFrontEdgeShadow);this.parent.append(this.flipFrontHighlightShadow);this.parent.append(this.flipFrontTopHighlightShadow)},flip:function(b,c,d){var e=b.shadowRate;d=b.rotate;var f=.9<e?1+2*(1-e)/.1:3*e/.9;e=.9<e?(1-e)/.1:.1>e?1*e/.1:
1;var g=1,h=(b.frontShadowDistance-(90<d?0:260*Math.min(1,b.frontShadowDistance/260)))/Math.cos(d*Math.PI/180),k=(b.frontShadowDistance-3-(90<d?0:18))/Math.cos(d*Math.PI/180),l=(b.frontShadowDistance-(90<d?0:3))/Math.cos(d*Math.PI/180),n=(b.frontShadowDistance-23*Math.min(1,b.frontShadowDistance/260)-(90<d?0:78*Math.min(1,b.frontShadowDistance/260)))/Math.cos(d*Math.PI/180);21>=b.frontShadowDistance&&(g=b.frontShadowDistance/21,l=(b.frontShadowDistance-(90<d?0:3*g))/Math.cos(d*Math.PI/180),k=(b.frontShadowDistance-
3*g-(90<d?0:18*g))/Math.cos(d*Math.PI/180));bookConfig.FlipDirection?(h=transformCSS({scaleY:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:0,y:h}}),k=transformCSS({scaleY:g,rotate:-d,tran:{x:0,y:k}}),g=transformCSS({scaleY:g,rotate:-d,tran:{x:0,y:l}}),n=transformCSS({scaleY:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:0,y:n}}),f=transformCSS({scaleY:f,rotate:d,tran:{x:-b.maskTranY,y:b.maskTranX}})):(h=transformCSS({scaleX:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:h,
y:0}}),k=transformCSS({scaleX:g,rotate:-d,tran:{x:k,y:0}}),g=transformCSS({scaleX:g,rotate:-d,tran:{x:l,y:0}}),n=transformCSS({scaleX:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:n,y:0}}),f=transformCSS({scaleX:f,rotate:d,tran:{x:b.maskTranX,y:b.maskTranY}}));this.flipBackShadow.css(f);this.flipFrontShadow.css(h);this.flipFrontHighlightShadow.css(k);this.flipFrontEdgeShadow.css(g);this.flipFrontTopHighlightShadow.css(n);this.beforeFlip(d,c);c=.34*b.frontShadowDistance/260;260<b.frontShadowDistance&&
(c=.34*e);this.flipFrontEdgeShadow.css({opacity:.5*e});this.flipFrontHighlightShadow.css({opacity:.34*e});this.flipFrontShadow.css({opacity:c});this.flipBackShadow.css({opacity:.3*e});this.flipFrontTopHighlightShadow.css({opacity:c})},beforeFlip:function(b,c){var d={};c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),d.visibility="visible"):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),d.visibility="hidden");bookConfig.FlipDirection?(90<b?(d.bottom="0px",
this.flipBackShadow.css({top:"100%"})):(d.bottom="auto",this.flipBackShadow.css({top:"0px"})),c=0<=b&&180>b?100/3:100*(this.width+this.maskWidth)/(3*this.maskWidth),b=90<b?100:0):(90<b?(d.right="0",this.flipBackShadow.css({left:"100%"})):(d.right="auto",this.flipBackShadow.css({left:"0px"})),c=90<b?100:0,b=0<=b&&180>b?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3);d["transform-origin"]=c+"% "+b+"%";d["-webkit-transform-origin"]=c+"% "+b+"%";d["-moz-transform-origin"]=c+"% "+b+"%";d["-ms-transform-origin"]=
c+"% "+b+"%";this.flipFrontShadow.css(d);this.flipFrontHighlightShadow.css(d);this.flipFrontEdgeShadow.css(d);this.flipFrontTopHighlightShadow.css(d)},clear:function(){this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"});this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"});this.flipFrontHighlightShadow&&this.flipFrontHighlightShadow.css({visibility:"hidden"});this.flipFrontEdgeShadow&&this.flipFrontEdgeShadow.css({visibility:"hidden"});this.flipFrontTopHighlightShadow&&
this.flipFrontTopHighlightShadow.css({visibility:"hidden"})},resize:function(b,c){this.width=b;this.height=c;this.maskWidth=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));bookConfig.FlipDirection?(this.flipFrontShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontTopHighlightShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontEdgeShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontHighlightShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),
this.flipBackShadow.css({width:this.maskWidth,left:(this.width-this.maskWidth)/2})):(this.flipFrontTopHighlightShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontEdgeShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontHighlightShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipBackShadow.css({height:this.maskWidth,top:(this.height-this.maskWidth)/2}))}}),PageFlipShadow=
Class({create:function(b,c){this.parent=b;this.pageIndex=c;this.init()},init:flip:function(b,c,d){var e=b.shadowRate;d=b.rotate;
var f=.9<e?1+2*(1-e)/.1:3*e/.9;if(isPhone()||isPad())f=1;e=.9<e?.2*(1-e)/.1:.1>e?.2*e/.1:.2;if(bookConfig.FlipDirection){var g=transformCSS({scaleY:f,rotate:-d,tran:{x:0,y:(b.frontShadowDistance-100*(90<d?0:f))/Math.cos(d*Math.PI/180)}});b=transformCSS({scaleY:f,rotate:d,tran:{x:-b.maskTranY,y:b.maskTranX}})}else g=transformCSS({scaleX:f,rotate:-d,tran:{x:(b.frontShadowDistance-100*(90<d?0:f))/Math.cos(d*Math.PI/180),y:0}}),b=transformCSS({scaleX:f,rotate:d,tran:{x:b.maskTranX,y:b.maskTranY}});this.flipFrontShadow.css(g);
this.flipBackShadow.css(b);this.beforeFlip(d,c);isPhone()||isPad()||(this.flipFrontShadow.css({opacity:e}),this.flipBackShadow.css({opacity:e}))},beforeFlip:function(b,c){c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));bookConfig.FlipDirection?(90<b?(this.flipFrontShadow.css({bottom:"0px"}),
this.flipBackShadow.css({top:"100%"})):(this.flipFrontShadow.css({bottom:"auto"}),this.flipBackShadow.css({top:"0px"})),c=0<=b&&180>b?100/3:100*(this.width+this.maskWidth)/(3*this.maskWidth),b=90<b?100:0):(90<b?(this.flipFrontShadow.css({right:"0px"}),this.flipBackShadow.css({left:"100%"})):(this.flipFrontShadow.css({right:"auto"}),this.flipBackShadow.css({left:"0px"})),c=90<b?100:0,b=0<=b&&180>b?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3);this.flipFrontShadow.css({"transform-origin":c+
"% "+b+"%","-webkit-transform-origin":c+"% "+b+"%","-moz-transform-origin":c+"% "+b+"%","-ms-transform-origin":c+"% "+b+"%"})},clear:resize:),HardPageFlipShadow=Class({init:flip:function(b,c){var d=b.shadowRate?b.shadowRate:0;d=.5>d?2*d:2*(1-d);var e={"background-image":"none","box-shadow":"rgba(0,0,0,0.3) 0 0 2000px 5000px inset",width:"100%",height:"100%",top:0,left:0};this.flipFrontShadow.css(e);this.flipFrontShadow.css({opacity:d});this.flipBackShadow.css(e);this.flipBackShadow.css({opacity:d});b=bookConfig.FlipDirection?transformCSS({perspective:5E3,rotateX:-b.rotate,scaleY:this.flipThickWidth/6*d}):transformCSS({perspective:5E3,
rotateY:-b.rotate,scaleX:this.flipThickWidth/6*d});this.flipThick.css(b);c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));this.flipThick&&this.flipThick.css({visibility:"visible"})}}).extend(PageFlipShadow),CoverShadow=Class({create:init:virtual_function,destroy:virtual_function,onResize:rotate:),HardCoverShadow=Class({init:onResize:destroy:function(){this.coverShadow.empty();this.coverShadow.remove()}}).extend(CoverShadow),OuterHardCoverShadow=Class({create:function(b,c,d){this.style=c;this.flip=!!d;this._super(b)},init:).extend(HardCoverShadow),InnerHardCoverShadow=Class({create:init:onResize:).extend(HardCoverShadow),NormalCoverShadow=Class({create:init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');this.coverShadow.addClass(this.style);isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$('<div class="normal_left_border"></div>');this.leftBody=$('<div class="normal_left_body"></div>');this.parent.append(this.coverShadow);
this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.leftBody);if("saddle"==this.style){var b=$("<div class='top_nail'></div>"),c=$("<div class='bottom_nail'></div>");"book"==bookConfig.pageHighlightType&&(this.leftBorder.css({"background-image":"url("+uiBaseURL+"left-shadow1.png)"}),this.leftBody.css({left:0}));this.leftBody.append(b);this.leftBody.append(c)}this.flip&&this.coverShadow.addClass("flip_x");this.onResize()},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()},
onResize:function(){this._super();if("saddle"==this.style){var b=Math.min(parseInt(87/450*this.parentWidth),87);this.leftBorder.css("width",b+"px");this.leftBody.find("div").css({width:Math.round(2/600*this.parentWidth)+"px",height:Math.round(.075*this.parentHeight)+"px"})}}}).extend(CoverShadow),PageShadow=Class({create:addShadow:isEmpty:addCoverShadow:createCoverShadow:virtual_function,addPageShadow:function(){this.midShadow=
this.findPageShadow();if(!this.midShadow&&(this.midShadow=$("<div name='midShadow'></div>"),_agent_.system.name==_agent_.system.IOS)){var b=transformCSS({tran:{x:0,y:0},rotate:0},!0);this.midShadow.css(b)}this.isLeftPage?(bookConfig.FlipDirection?this.midShadow.attr("class","upShadow"):this.midShadow.attr("class","leftShadow"),b=bookConfig.LeftShadowAlpha):(bookConfig.FlipDirection?this.midShadow.attr("class","downShadow"):this.midShadow.attr("class","rightShadow"),b=bookConfig.RightShadowAlpha);
"magazine"==bookConfig.pageHighlightType?this.midShadow.addClass("magazine"):this.midShadow.addClass("book");this.midShadow.css({opacity:b});this.parent.append(this.midShadow)},findPageShadow:hidePageShadow:resizePageShadow:onResize:destroy:),NormalPageShadow=Class({create:createCoverShadow:).extend("PageShadow"),SinglePageShadow=Class({create:createCoverShadow:).extend("PageShadow"),CatalogPageShadow=Class({create:createCoverShadow:).extend("PageShadow"),SlidePageShadow=Class({createCoverShadow:function(){},addShadow:function(){}}).extend("PageShadow"),PageTexture=Class({create:initResource:render:isEmpty:renderPage:function(){this.texture=null},renderCover:renderTexture:renderSewing:renderBorder:onResize:destroy:),NormalPageTexture=Class({create:function(b,c,d){this._super(b,c,d);this.isOutCover=1==c&&!bookConfig.isTheBookOpen||
c==totalPageCount;this.isInnerCover=2==c&&!bookConfig.isTheBookOpen||1==c&&bookConfig.isTheBookOpen||c==totalPageCount-1;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture"),SinglePageTexture=Class({create:).extend("PageTexture"),CatalogPageTexture=Class({create:).extend("PageTexture"),SlidePageTexture=Class({create:).extend("PageTexture"),BorderSewing={deep:{top:{url:"deep_top_sewing.png",width:28,height:42},left:{url:"deep_left_sewing.png",width:71,height:28},right:{url:"deep_right_sewing.png",width:71,height:28},bottom:{url:"deep_bottom_sewing.png",
width:28,height:42},renderBorder:!0},normal:{top:{url:"normal_top_sewing.png",width:28,height:10},left:{url:"normal_left_sewing.png",width:10,height:28},right:{url:"normal_right_sewing.png",width:10,height:28},bottom:{url:"normal_bottom_sewing.png",width:28,height:20},renderBorder:!0},flat:{top:{url:"flat_top_sewing.png",width:28,height:10},left:{url:"flat_left_sewing.png",width:10,height:28},right:{url:"flat_right_sewing.png",width:10,height:28},bottom:{url:"flat_bottom_sewing.png",width:28,height:10},
renderBorder:!1}},PageTextureResource={leather1:{texture:"leather1.png",sewing:BorderSewing.deep},leather2:{texture:"leather2.png",sewing:BorderSewing.normal},cloth1:{texture:"cloth1.png",sewing:BorderSewing.flat},cloth2:{texture:"cloth2.png",sewing:BorderSewing.flat},cloth3:{texture:"cloth3.png",sewing:BorderSewing.flat},cloth4:{texture:"cloth4.png",sewing:BorderSewing.normal},cardboard1:{texture:"cardboard1.png",sewing:null},cardboard2:{texture:"cardboard2.png",sewing:null},cardboard3:{texture:"cardboard3.png",
sewing:null},silk1:{texture:"silk1.png",sewing:BorderSewing.flat},silk2:{texture:"silk2.png",sewing:BorderSewing.flat},silk3:{texture:"silk3.png",sewing:BorderSewing.flat},silk4:{texture:"silk4.png",sewing:BorderSewing.flat},wood1:{texture:"wood1.png",sewing:null},wood2:{texture:"wood2.png",sewing:null}},PageRendering=Class({create:render:function(){this.addCoil();this.addPageShadow();this.addPageTexture()},addCoil:function(){if("loose2"==bookConfig.BindingType)this.addCoil2();else if(parseBool(bookConfig.addPaperCoil)){var b=$("<div class='coil'></div>");this.midCoil=$("<div style='z-index:6;'></div>");bookConfig.FlipDirection?this.isLeftPage?(b.attr("class","upPaperCoil"),this.midCoil.attr("class","upPaperCoil_bg")):(b.attr("class","downPaperCoil"),this.midCoil.attr("class","downPaperCoil_bg")):this.isLeftPage?
(b.attr("class","leftPaperCoil"),this.midCoil.attr("class","leftPaperCoil_bg")):(b.attr("class","rightPaperCoil"),this.midCoil.attr("class","rightPaperCoil_bg"));this.midCoil.append(b);!bookConfig.HardPageEnable||1!=this.pageIndex&&this.pageIndex!=totalPageCount||this.midCoil.css("background-image","none");this.parent.append(this.midCoil)}},addCoil2:function(){if(parseBool(bookConfig.addPaperCoil)){var b=$("<div class='coil'></div>");this.midCoil=$("<div style='z-index:6;'></div>");bookConfig.FlipDirection?
this.isLeftPage?(b.attr("class","upPaperCoil2"),this.midCoil.attr("class","upPaperCoil2_bg")):(b.attr("class","downPaperCoil2"),this.midCoil.attr("class","downPaperCoil2_bg")):this.isLeftPage?(b.attr("class","leftPaperCoil2"),this.midCoil.attr("class","leftPaperCoil2_bg")):(b.attr("class","rightPaperCoil2"),this.midCoil.attr("class","rightPaperCoil2_bg"));this.midCoil.append(b);this.midCoil.append(b.clone());!bookConfig.HardPageEnable||1!=this.pageIndex&&this.pageIndex!=totalPageCount||this.midCoil.css("background-image",
"none");this.parent.append(this.midCoil)}},addPageShadow:function(){this.pageShadow.addShadow()},addPageTexture:function(){this.pageTexture.render()},hideMiddleShadow:function(){this.pageShadow.hidePageShadow()},onResize:function(b,c){if(this.pageShadow)this.pageShadow.onResize(b,c);if(this.pageTexture)this.pageTexture.onResize(b,c);this.midCoil&&(bookConfig.FlipDirection?this.resizeCoilVertical(b,c):(!bookConfig.HardPageEnable||2!=this.pageIndex&&this.pageIndex!=totalPageCount-1||this.midCoil.css({height:c+
"px",top:0,bottom:0,margin:"auto"}),"loose2"==bookConfig.BindingType?(b=Math.min(60*parseInt(c/3/60),180),this.midCoil.find("div").css({height:b+"px"}),$(this.midCoil.find("div")[0]).css({top:"67%","margin-top":"-30px",bottom:"auto"}),$(this.midCoil.find("div")[1]).css({bottom:"67%","margin-bottom":"-30px",top:"auto"})):(b=50*parseInt(c/50),this.midCoil.find("div").css({height:b+"px"}))))},resizeCoilVertical:function(b,c){!bookConfig.HardPageEnable||2!=this.pageIndex&&this.pageIndex!=totalPageCount-
1||this.midCoil.css({width:b+"px",left:0,right:0,margin:"auto"});"loose2"==bookConfig.BindingType?(b=Math.min(60*parseInt(b/3/60),180),this.midCoil.find("div").css({width:b+"px"}),$(this.midCoil.find("div")[0]).css({left:"67%","margin-left":"-30px",right:"auto"}),$(this.midCoil.find("div")[1]).css({right:"67%","margin-right":"-30px",left:"auto"})):(b=50*parseInt(b/50),this.midCoil.find("div").css({width:b+"px"}))},destroy:);function getPageShadow(b,c,d,e){if(e==BookType.normal_book)return new NormalPageShadow(b,c,d);if(e==BookType.single_book)return new SinglePageShadow(b,c,d);if(e==BookType.catalog_book)return new CatalogPageShadow(b,c,d);if(e==BookType.slide_book||e==BookType.singleSlide_book)return new SlidePageShadow(b,c,d)}
function getPageDirection(b,c){switch(c){case BookType.single_book:if(bookConfig.RightToLeft)return!0;break;case BookType.singleSlide_book:if(bookConfig.RightToLeft)return!0;break;default:return BookInfo.isLeftPage(b,!0)}return!1}function getLineCapType(b){switch(b){case "round":return LineCap.ROUND;case "square":return LineCap.SQUARE}return LineCap.BUTT}function getLineCapString(b){switch(b){case LineCap.SQUARE:return"square";case LineCap.ROUND:return"round";default:return"butt"}}
function getLineJoinType(b){switch(b){case "miter":return LineJoin.MITER;case "round":return LineJoin.ROUND}return LineJoin.BEVEL}unction getRepetitionType(b){var c=PatternRepeatType.REPEAT;switch(b){case "repeat-x":c=PatternRepeatType.REPEAT_X;break;case "repeat-y":c=PatternRepeatType.REPEAT_Y;break;case "no-repeat":c=PatternRepeatType.NONE}return c}
 ZERO_TRANSFORM={x:0,y:0,scale:0,transform:[0,0,0,0,0,0]};
function getBlendMode(b){switch(b){case "multiply":return BlendMode.MULTIPLY;case "screen":return BlendMode.SCREEN;case "overlay":return BlendMode.OVERLAY;case "darken":return BlendMode.DARKEN;case "lighten":return BlendMode.LIGHTEN;case "color-dodge":return BlendMode.COLOR_DODGE;case "color-burn":return BlendMode.COLOR_BURN;case "hard-light":return BlendMode.HARD_LIGHT;case "soft-light":return BlendMode.SOFT_LIGHT;case "difference":return BlendMode.DIFFERENCE;case "exclusion":return BlendMode.EXCLUSION;
case "hue":return BlendMode.HUE;case "saturation":return BlendMode.SATURATION;case "color":return BlendMode.COLOR;case "luminosity":return BlendMode.LUMINOSITY}return BlendMode.SOURCE_OVER}
function getBlendModeString(b){switch(b){case BlendMode.MULTIPLY:return"multiply";case BlendMode.SCREEN:return"screen";case BlendMode.OVERLAY:return"overlay";case BlendMode.DARKEN:return"darken";case BlendMode.LIGHTEN:return"lighten";case BlendMode.COLOR_DODGE:return"color-dodge";case BlendMode.COLOR_BURN:return"color-burn";case BlendMode.HARD_LIGHT:return"hard-light";case BlendMode.SOFT_LIGHT:return"soft-light";case BlendMode.DIFFERENCE:return"difference";case BlendMode.EXCLUSION:return"exclusion";
case BlendMode.HUE:return"hue";case BlendMode.SATURATION:return"saturation";case BlendMode.COLOR:return"color";case BlendMode.LUMINOSITY:return"luminosity"}return"source-over"}function int2color(b){var c=(b>>24&255).toString(16).toUpperCase(),d=(b>>16&255).toString(16).toUpperCase(),e=(b>>8&255).toString(16).toUpperCase();b=(b&255).toString(16).toUpperCase();c=1>=c.length?"0"+c:c;d=1>=d.length?"0"+d:d;e=1>=e.length?"0"+e:e;b=1>=b.length?"0"+b:b;return"FF"==b?"#"+c+d+e:"#"+b+c+d+e}
function converArgbToRgb(b){var c=[];c[0]=(b&16711680)>>16;c[1]=(b&65280)>>8;c[2]=b&255;return"rgb("+c[0]+","+c[1]+","+c[2]+")"}function converRgbToArgb(b,c,d){return-16777216|b<<16|c<<8|d}
var FillStrokeType={COLOR:1,PATTERN:2},LineJoin={ROUND:1,MITER:2,BEVEL:3},LineCap={BUTT:1,ROUND:2,SQUARE:3},FillRule={EVEN_ODD:1,NON_ZERO:2},LineStyle={lineWidth:0,lineCap:LineCap,lineJoin:LineJoin,miterLimit:0,dashArray:[],dashOffset:0},FillStrokeColor={type:FillStrokeType.COLOR,color:0},FillStrokePattern={type:FillStrokeType.PATTERN,transform:[0,0,0,0,0,0],pattern:0},WithFillRule={fillRule:null};function getResource(b,c){return canvasData[b].resources[c].name}
function getPattern(b,c){return canvasData[b].patterns[c]}function getData(b,c){return canvasData[b].resources[c].data}nction setTransform(b,c,d){b.setTransform(c[0]*d,c[1]*d,c[2]*d,c[3]*d,c[4]*d,c[5]*d)}
function drawPath(b,c,d){var e=c.d,f=c.s;b.translate(c.x,c.y);b.scale(f,f);b.beginPath();c=0;for(d=getPath(d,e);c<d.length;)switch(d[c++]){case PathCommand.MOVE_TO:b.moveTo(d[c],d[c+1]);c+=2;break;case PathCommand.LINE_TO:b.lineTo(d[c],d[c+1]);c+=2;break;case PathCommand.CLOSE:b.closePath();break;case PathCommand.QUADRATIC_CURVE_TO:b.quadraticCurveTo(d[c],d[c+1],d[c+2],d[c+3]);c+=4;break;case PathCommand.BEZIER_CURVE_TO:b.bezierCurveTo(d[c],d[c+1],d[c+2],d[c+3],d[c+4],d[c+5]);c+=6;break;case PathCommand.ARC_TO:b.arcTo(d[c],
d[c+1],d[c+2],d[c+3],d[c+4]);c+=5;break;case PathCommand.RECT:b.rect(d[c],d[c+1],d[c+2],d[c+3]);c+=4;break;case PathCommand.ARC:b.arc(d[c],d[c+1],d[c+2],deg2rad(d[c+3]),deg2rad(d[c+4]),!!d[c+5]);c+=6;break;case PathCommand.ELLIPSE:b.ellipse(d[c],d[c+1],d[c+2],d[c+3],deg2rad(d[c+4]),deg2rad(d[c+5]),deg2rad(d[c+6]),!!d[c+6]),c+=7}}
var PatternType={IMAGE:1,LINEAR_GRADIENT:2,RADIAL_GRADIENT:3},PatternRepeatType={NONE:1,REPEAT:2,REPEAT_X:3,REPEAT_Y:4},LinearGradientPattern=Class({type:PatternType.LINEAR_GRADIENT,start:[0,0],end:[0,0],stops:[],create:function(b,c){this.initPath(c);this.render(b)},initPath:function(b){this.start=b.start;this.end=b.end;this.stops=b.stops},render:function(b){var c=b.createLinearGradient(this.start[0],this.start[1],this.start[2],this.start[3]);c.addColorStop(this.start[0],this.start[1]);b.fillStyle=
c}}),RadialGradientPattern=Class({type:PatternType.RADIAL_GRADIENT,start:[0,0],end:[0,0],stops:[],create:function(b,c){this.initPath(c);this.render(b)},initPath:render:function(b){var c=b.createRadialGradient(this.start[0],this.start[1],this.start[2],this.start[3],this.start[4],this.start[5]);c.addColorStop(this.stops[0],this.stops[1]);b.fillStyle=c}}),ImagePattern=Class({type:PatternType.IMAGE,image:"",repetition:"repeat",create:function(b,
c){this.initPath(c);this.render(b)},initPath:function(b){this.image=windows.resources[b.image];switch(b.repetition){case PatternRepeatType.NONE:this.repetition="no-repeat";break;case PatternRepeatType.REPEAT:this.repetition="repeat";break;case PatternRepeatType.REPEAT_X:this.repetition="repeat-x";break;case PatternRepeatType.REPEAT_Y:this.repetition="repeat-y"}},render:function(b){var c=new Image;c.src=this.image;c.onload=function(){var d=ctx.createPattern(c,this.repetition);b.fillStyle=d}}}),BlendMode=
{SOURCE_OVER:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},LayerType={PAGE:1,IMAGE:2,IMAGE_DATA:3,TEXT:4,GRAPHICS:5,MASK:6},CompositeLayer=Class({type:LayerType.PAGE,index:0,width:0,height:0,background:0,create:function(b,c){}}),PathCommand={MOVE_TO:1,LINE_TO:2,BEZIER_CURVE_TO:3,QUADRATIC_CURVE_TO:4,ARC_TO:5,ARC:6,RECT:7,ELLIPSE:8,CLOSE:9},GraphicsLayer=Class({type:LayerType.GRAPHICS,
alpha:1,paths:null,fill:null,stroke:null,transform:[0,0,0,0,0,0],create:function(b,c,d,e){this.scale=e;this.index=d;this.initPath(c);this.render(b)},initPath:function(b){this.alpha=b.alpha;this.paths=b.paths;this.fill=b.fill;this.stroke=b.stroke;this.transform=b.transform;this.blend=b.blend},render:function(b){if(0!==this.alpha&&0!==this.paths.length&&(null!=this.fill||null!=this.stroke)){this.patternMap=new Map;b.globalAlpha=this.alpha;b.globalCompositeOperation=getBlendModeString(this.blend);this.setFill(b,
this.fill);this.setStroke(b,this.stroke);for(var c=0;c<this.paths.length;c++){var d=this.paths[c];setTransform(b,this.transform,this.scale);drawPath(b,d,this.index);this.fill&&(this.setFillStrokeTransform(b,this.fill),b.fill(getFillRuleString(this.fill.fillRule)));this.stroke&&(this.setFillStrokeTransform(b,this.stroke),b.stroke())}this.callback&&this.callback();rendering=!1}},createLinearGradient:function(b,c){if(this.patternMap.has(c))return this.patternMap.get(c);b=b.createLinearGradient(c.start[0],
c.start[1],c.end[0],c.end[1]);for(var d=0;d<c.stops.length;d++){var e=c.stops[d];b.addColorStop(e[0],int2color(e[1]))}this.patternMap.set(c,b);return b},createRadialGradient:function(b,c){if(this.patternMap.has(c))return this.patternMap.get(c);b=b.createRadialGradient(c.start[0],c.start[1],c.start[2],c.end[0],c.end[1],c.end[2]);for(var d=0;d<c.stops.length;d++){var e=c.stops[d];b.addColorStop(e[0],int2color(e[1]))}this.patternMap.set(c,b);return b},createImagePattern:function(b,c){if(this.patternMap.has(c))return this.patternMap.get(c);
b=b.createPattern(globalImages[this.index][c.image],getRepetitionString(c.repetition));this.patternMap.set(c,b);return b},getFillStrokeStyle:function(b,c){if(c.type===FillStrokeType.PATTERN){var d=getPattern(this.index,c.pattern);switch(d.type){case PatternType.LINEAR_GRADIENT:return this.createLinearGradient(b,d);case PatternType.RADIAL_GRADIENT:return this.createRadialGradient(b,d);case PatternType.IMAGE:return this.createImagePattern(b,d)}}return int2color(c.color)},setFill:function(b,c){null!=
c&&(b.fillStyle=this.getFillStrokeStyle(b,c))},setStroke:function(b,c){null!=c&&(b.lineWidth=c.lineWidth,b.lineCap=getLineCapString(c.lineCap),b.lineJoin=getLineJoinString(c.lineJoin),b.miterLimit=c.miterLimit,b.setLineDash(c.dashArray),b.lineDashOffset=c.dashOffset,b.strokeStyle=this.getFillStrokeStyle(b,c))},setFillStrokeTransform:function(b,c){null!=c&&c.type!==FillStrokeType.COLOR&&setTransform(b,c.transform,this.scale)}}),ImageDataLayer=Class({type:LayerType.IMAGE_DATA,data:0,width:0,height:0,
x:0,y:0,create:function(b,c,d){this.index=d;this.data=c.data;this.x=c.x;this.y=c.y;b.putImageData(getData(this.index,this.data),this.x,this.y);rendering=!1}}),ImageLayer=Class({type:LayerType.IMAGE,alpha:1,image:"",sourceFrame:[0,0,0,0],destFrame:[0,0,0,0],transform:null,blend:null,create:function(b,c,d,e){this.scale=e;this.index=d;this.initPath(c);this.render(b)},initPath:render:function(b){b.globalAlpha=this.alpha;b.globalCompositeOperation=getBlendModeString(this.blend);setTransform(b,this.transform,this.scale);b.drawImage(globalImages[this.index][this.image],this.sourceFrame[0],this.sourceFrame[1],this.sourceFrame[2],this.sourceFrame[3],this.destFrame[0],this.destFrame[1],this.destFrame[2],this.destFrame[3])}}),MaskLayer=Class({type:LayerType.MASK,path:[],fillRule:null,transform:[0,0,0,0,0,0],layers:null,create:function(b,c,d,e){this.scale=e;
this.index=d;this.initPath(c);this.render(b)},initPath:render:function(b){b.save();setTransform(b,this.transform,this.scale);drawPath(b,this.path,this.index);b.clip(getFillRuleString(this.fillRule));renderList2(b,this.layers,this.index,this.scale);b.restore()}}),PageLayer=Class({type:LayerType.PAGE,index:0,width:0,height:0,background:0,create:),TextLayer=Class({type:LayerType.TEXT,
alpha:1,fonts:[],size:15,text:{char:"",x:0,y:0},fill:"#000000",create:initPath:render:function(b){b.alpha=this.alpha;b.font=this.size+" "+this.fonts;this.stroke?(b.strokeStyle="green",b.stroke(),b.strokeText(this.text.char,this.text.x,this.text.y)):b.fillText(this.text.char,this.text.x,this.text.y);
this.callback&&this.callback();rendering=!1}}),TransformLayer=Class({transform:[],create:initPath:render:),TaskPool=Class({create:start:function(){this.isPause=!1;var b=this;if(!(this.index>=b.tasks.length)){var c=function(){window.requestAnimationFrame(function(){b.tasks[b.index].start();
b.index<b.tasks.length-1&&(b.index++,b.isPause||c())})};c()}},end:pause:function(){this.isPause=!0},stop:function(){this.isPause=!0},push:function(b){this.tasks.push(b)}}),RenderPage=Class({create:function(b,c,d,e){this.scale=e;this.index=d;this.layers=c.page.layers;this.canvas=b;this.context=b.getContext("2d");this.data=c;this.taskPool=new TaskPool;this.render(this.context);this.taskPool.start()},render:
renderList:function(b,c){if(b&&c)for(var d=0;d<c.length;d++)this.taskPool.push(new Task(b,c[d],this.index,this.scale))}}),Task=Class({create:start:function(){var b=this.renderer,c=this.layer;switch(c.type){case LayerType.PAGE:new PageLayer(b,c,this.index,this.scale);break;case LayerType.IMAGE:new ImageLayer(b,c,this.index,this.scale);break;case LayerType.IMAGE_DATA:new ImageDataLayer(b,c,this.index,this.scale);break;case LayerType.TEXT:new TextLayer(b,
c,this.index,this.scale);break;case LayerType.GRAPHICS:new GraphicsLayer(b,c,this.index,this.scale);break;case LayerType.MASK:new MaskLayer(b,c,this.index,this.scale)}}}),renderList2=function(b,c,d,e){if(b&&c){var f=0,g=function(){var h=c[f];switch(h.type){case LayerType.IMAGE:new ImageLayer(b,h,d,e);break;case LayerType.GRAPHICS:new GraphicsLayer(b,h,d,e);break;case LayerType.MASK:new MaskLayer(b,h,d,e)}f<c.length-1&&(f++,g())};g()}},PageInfo=Class({create:function(b){this.getPageInfoArray(b)},getPageInfoArray:initPageInfo:getNextPageInfo:function(b,c){if(!c)return b=bookConfig.isTheBookOpen?0==b%2?b+
1:b-1:0==b%2?b-1:b+1,this.getPageInfo(b,c)},getPageInfo:function(b,c){if(!(0>=b||b>totalPageCount)){var d=c=1,e=1;window.fliphtml5_pages&&window.fliphtml5_pages[b-1]&&(e=window.fliphtml5_pages[b-1],c=e.w?Math.min(e.w,1):1,d=e.h?Math.min(e.h,1):1,e=e.o?Math.min(e.o,1):1);if(1==b||b==totalPageCount)d=c=1;return{pageWidth:c,pageHeight:d,opacity:e}}},statics:{getPageColor:function(b){return window.pages_information&&window.pages_information[b-1]&&window.pages_information[b-1].pageColor?window.pages_information[b-
1].pageColor:bookConfig.pageBackgroundColor},pageIsStrech:}),accessControlImagesPool={},accessControlPostImagesPool=[],PageLoadTask=Class({statics:{task:null,taskList:{normal:[],large:[],thumb:[],previewPage:[]},pageLength:20,addTask:function(b,c){b=parseInt(b/this.pageLength);this.taskList[c]&&this.taskList[c][b]&&
(this.taskList[c][b].running||this.taskList[c][b].completed&&this.taskList[c][b].completedAll)||this.createTask(b,c)},createTask:function(b,c){this.taskList[c][b]={completed:!1,completedAll:!1,running:!0};var d=this.getPostUrls(b,c);this.postYunzhanUrls(b,c,d)},getPostUrls:function(b,c){var d=(b+1)*this.pageLength,e=[];for(b=b*this.pageLength+1;b<=d;b++){var f=pageDirWidthPath(b,c);f=this.removeParamFromUrl(f);e=e.concat(f)}return e},postYunzhanUrls:function(b,c,d){var e=this,f=d;"string"==typeof d&&
(f=[d]);if(f&&0!=f.length){var g=[];for(d=0;d<f.length;d++){var h=toAbsURL(f[d]);g.push(h)}d=BookRestrict.getRestrictToken();$.ajax({type:"get",url:restrictUrl,dataType:"json",data:{urls:JSON.stringify(g),token:d},success:function(k){if("OK"==k.code){for(var l=!0,n=0;n<f.length;n++){var q=g[n];accessControlImagesPool[f[n]]=k.data[q];k.data[q]||(l=!1)}e.completedTask(b,c);l&&e.completedAllTask(b,c)}else window.encryptionPannel&&!window.encryptionPannel.visible&&window.encryptionPannel.show()},error:)}else this.completedTask(b,c)},isCompleted:function(b,c){b=parseInt(b/this.pageLength);return this.taskList[c]&&this.taskList[c][b]&&this.taskList[c][b].completed?!0:!1},completedTask:function(b,c){try{this.taskList[c][b].completed=!0,this.taskList[c][b].running=!1}catch(d){}},completedAllTask:function(b,c){try{this.taskList[c][b].completedAll=!0}catch(d){}},getUrls:function(b){if("object"==typeof b){for(var c=[],d=[],e=0;e<b.length;e++){var f=
b[e],g=f.removeStartFrom("?");f=f.remove(g);f=f.remove("?");d.push(f)}for(e=0;e<b.length;e++)f=b[e],g=f.removeStartFrom("?"),0<=f.indexOf("none")?c.push("none"):c.push(accessControlImagesPool[g]?this.mergeParamFromUrl(accessControlImagesPool[g],d[e]):f);return c}if(0<=b.indexOf("none"))return"none";g=b.removeStartFrom("?");f=b.remove(g);f=f.remove("?");return accessControlImagesPool[g]?this.mergeParamFromUrl(accessControlImagesPool[g],f):accessControlImagesPool[g]?this.mergeParamFromUrl(accessControlImagesPool[g],
f):b},mergeParamFromUrl:removeParamFromUrl:function(b){if("object"==typeof b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.removeStartFrom("?");0>e.indexOf("none")&&!accessControlImagesPool[f]&&c.push(f)}return c}if(0<=b.indexOf("none"))return[];c=[];f=b.removeStartFrom("?");c.push(f.toString());return accessControlImagesPool[f]?[]:c}}}),setPageURL=adjustPageURL=function(b,c,d){b=parseInt(b)-1;
global.fliphtml5_pages||(global.fliphtml5_pages=[]);global.fliphtml5_pages[b]||(global.fliphtml5_pages[b]={});switch(c){case 0:global.fliphtml5_pages[b].l=d;break;case 1:global.fliphtml5_pages[b].n=d;break;case 2:global.fliphtml5_pages[b].t=d;break;case 3:global.fliphtml5_pages[b].p=d}};window.isSupportWebp=!1;(();
var useTheFliphtml5Service=function(){if(bookConfig.useTheFliphtml5Service)for(var b=bookConfig.totalPageCount,c=1;c<=b;c++){var d=pageDirWidthPath(c,"normal",b),e=pageDirWidthPath(c,"large",b),f=pageDirWidthPath(c,"thumb",b),g=pageDirWidthPath(c,"previewPage",b);if("string"!=typeof d)for(var h=0;h<d.length;h++)d[h]=resetFliphtml5URL(d[h]);else d=resetFliphtml5URL(d);e=resetFliphtml5URL(e);f=resetFliphtml5URL(f);g=resetFliphtml5URL(g);adjustPageURL(c,0,e);adjustPageURL(c,1,d);adjustPageURL(c,2,f);
adjustPageURL(c,3,g)}},useTheAliCloudChart=function(b,c){if(bookConfig.useTheAliCloudChart){var d=window.screen.availHeight-bookConfig.topMargin-bookConfig.bottomMargin;c||(c=d-50,b=Math.round(c*bookConfig.largePageWidth/bookConfig.largePageHeight));if(isPad()||isPhone())try{b*=devicePixelRatio,c*=devicePixelRatio}catch(n){}d=bookConfig.totalPageCount;for(var e=1;e<=d;e++){var f=function(n){if(0<=n.indexOf(".zip"))return n;n=n.removeStartFrom("?")+"";n=0<=n.indexOf("?")?n+"&x-oss-process=image/resize,h_"+
parseInt(c)+",w_"+parseInt(b):n+"?x-oss-process=image/resize,h_"+parseInt(c)+",w_"+parseInt(b);window.isSupportWebp?0>n.indexOf("webp")&&(n+="/format,webp"):n=n+"/format,"+getWebpOriginFormat(n);switch(bookConfig.textClarityEnhancement){case 1:n+="/sharpen,100";break;case 2:n+="/sharpen,150";break;case 3:n+="/sharpen,200"}return n},g=realPageDir(e,"normal",d),h=realPageDir(e,"thumb",d),k=realPageDir(e,"previewPage",d);if("string"!=typeof g)for(var l=0;l<g.length;l++)g[l]=f(g[l]);else g=f(g);h=h.removeStartFrom("?")+
"";0>h.indexOf(".zip")&&(window.isSupportWebp?0>h.indexOf("webp")&&(h=0<=h.indexOf("?")?h+"&x-oss-process=image/format,webp":h+"?x-oss-process=image/format,webp"):h=0<=h.indexOf("?")?h+"&x-oss-process=image/format,"+getWebpOriginFormat(h):h+"?x-oss-process=image/format,"+getWebpOriginFormat(h));k=k.removeStartFrom("?")+"";0>k.indexOf(".zip")&&(window.isSupportWebp?0>k.indexOf("webp")&&(k=0<=k.indexOf("?")?k+"&x-oss-process=image/format,webp":k+"?x-oss-process=image/format,webp"):k=0<=k.indexOf("?")?
k+"&x-oss-process=image/format,"+getWebpOriginFormat(k):k+"?x-oss-process=image/format,"+getWebpOriginFormat(k));adjustPageURL(e,1,g);adjustPageURL(e,2,h);adjustPageURL(e,3,k)}}};
function getPageDir(b,c,d,e,f){var g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if("restrict"==BookRestrict.isRestrictPage(b))return g=1==b?getMeta("og:image"):bookConfig.pageRestrictUrl,k.return(g);h=pageDirWidthPath(b,c,d,e,f);return bookConfig.isEncryptionBook?k.yield(getYunzhanUrl(h,b,c),3):k.jumpTo(2)}2!=k.nextAddress&&(h=k.yieldResult);return k.return(h)})}
var pageDirWidthPath=function(b,c,d,e,f){var g=realPageDir(b,c,d,e,f);g||"previewPage"!=c||(g=realPageDir(b,"thumb",d,e,f));if(g)if("string"==typeof g)g=fixURLValue(g);else{b=[];d=getPagePathName(c);for(e=0;e<g.length;e++)f=window.fliphtml5_pages&&fliphtml5_pages[d]&&void 0!=fliphtml5_pages[d][e]?fliphtml5_pages[d][e]:bookConfig[d][e],0<=g[e].indexOf("files/")&&(f=""),0<=g[e].indexOf("http")&&(f=""),b.push(f+g[e]);g=1==g.length&&"normal"==c?fixURLValue(b[0]):fixURLValue(b.clone())}return g},realPageDir=
function(b,c,d,e,f){if(0>=b||void 0!=d&&b>d)return"";if(bookConfig.getPageURL){var g=0;"normal"==c&&(g=1);"thumb"==c&&(g=2);"previewPage"==c&&(g=3);return bookConfig.getPageURL(b,g,d,e,f)}d=getFileFormat(b,c);var h=global.fliphtml5_pages;if(void 0!=h&&0<h.length&&(h=h[b-1],void 0!=h&&null!=h))switch(c){case "normal":g=void 0==h.n?h.l:h.n;break;case "large":g=h.l;break;case "thumb":g=h.t;break;case "previewPage":g=h.p}return void 0==g?defaultRealPageDir(c,b,d,e,f):g},defaultRealPageDir=function(b,
c,d,e,f){var g="";switch(b){case "normal":g=getNormalPageDirByWidthHeight(b,c,d,e,f);break;case "large":g=bookConfig.largePath+c+d;break;case "thumb":g=bookConfig.thumbPath+c+d}return g},getPagePathName=function(b){switch(b){case "normal":return"normalPath";case "large":return"normalPath";case "thumb":return"thumbPath";case "previewPage":return"normalPath"}},getNormalPageDirByWidthHeight=function(b,c,d,e,f){b=getPageSize(c,b);if(!b)return bookConfig.normalPath+c+d;e||(e=0);f||(f=0);if(isPhone()||
isPad())f=e=1E4;e=findCloseNum(b,Math.max(e,f));return bookConfig.normalPath+c+"_"+e+d},globalImages=[],canvasData=[],fillImageAfterLoaded=function(b,c,d,e,f){var g=this,h,k,l,n,q,x,B,u,t,v,w,z,A,K,H,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){if(1==F.nextAddress)return b&&c?"normal"==c&&bookConfig.usePdfJs?(h=$("<canvas class='test'></canvas>"),k=function(){var G;return $jscomp.asyncExecutePromiseGeneratorProgram(function(L){if(1==L.nextAddress)return L.yield(getPageDir(b,c,
originTotalPageCount),2);G=L.yieldResult;d&&d(G,G,h,b);L.jumpToEnd()})},l=function(){var G=this,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){if(1==M.nextAddress)return M.yield(getPageDir(b,c,originTotalPageCount),2);L=M.yieldResult;$.ajax({url:L,type:"GET",dataType:"json",success:bind(G),error:function(){}});M.jumpToEnd()})},l(),F.return()):F.yield(getPageDir(b,c,originTotalPageCount),2):F.return();n=F.yieldResult;if("object"==typeof n){q=0;x=$("<div style='position:relative;'></div>");x.css({width:bookConfig.largePageWidth+"px",height:bookConfig.largePageHeight+"px"});B=function(G){bookConfig.largePageWidth/
bookConfig.largePageHeight>G[0].naturalWidth/G[0].naturalHeight?G.css({width:"auto",height:"100%"}):G.css({width:"100%",height:"auto"})};for(u=0;u<n.length;u++)t=n[u],t=t.removeStartFrom("?"),v=$("<img style='position:absolute;left:0;top:0;bottom:0;right:0;margin:auto;'></img>"),v.attr("src",t),x.append(v),v[0].onload=function(G){B($(this));q++;q==n.length&&d&&d(n,n,x,b)},v[0].onerror=function(G){q++;q==n.length&&d&&d(n,n,x,b)};return F.return()}if(n.match(/^none/))return w=$("<div style='width:100%;height:100%;background:"+
bookConfig.pageBackgroundColor+";'></div>"),d&&d(n,w,b),F.return();if(!fillImageOrNot(n,b))return!window.userList&&1<passwardType()&&loadJavascript(fixURLValue(bookConfig.userListPath),function(){}),F.return();if(-1<n.indexOf(".js")){if(z=global[decodeDatabasePrefix(c)+b]&&"string"==typeof global[decodeDatabasePrefix(c)+b])return A=dataBase64Str(b,c),w=$("<img src='"+A+"'/>"),w[0].onload=function(){d&&d(A,n,this,b)},F.return();loadJavascript(n,function(){});return F.return()}if(-1<n.indexOf(".zip")){if(!window.printLoadStack)return F.return();K=e?e:BookInfo.getBook().pageWidth;H=f?f:BookInfo.getBook().pageHeight;I=new PdfLoadingTask(b,c,K,H,function(G){var L=G.toDataURL("image/png"),M=$("<img src='"+L+"'/>");M[0].onload=.bind(g));window.printLoadStack.push(I);return F.return()}-1<n.indexOf(".svg")?(bookConfig.useTheAliCloudChart&&
BookInfo.getBook().status_zoom&&(n=n.removeStartFrom("?")),w=$("<img src='"+n+"'/>"),w[0].onload=:(bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(n=n.removeStartFrom("?")),w=$("<img src='"+n+"'/>"),w[0].onload=;F.jumpToEnd()})},fillImageOrNot=function(b,c){return!b||passwardType()&&bookConfig.excludeFrontPages&&c>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()?
!1:!0},fitPageWidthHeight=function(b,c,d,e){d||(d=bookConfig.largePageWidth);e||(e=bookConfig.largePageHeight);var f=Point(0,0);b/c>d/e?(f.x=Math.round(d*c/e),f.y=c):(f.x=b,f.y=Math.round(e*b/d));return f};function findCloseNum(b,c){for(var d=0,e=Number.MAX_VALUE,f=0;f<b.length;f++){var g=Math.abs(b[f]-c);g<=e&&!(g===e&&b[f]<b[d])&&(d=f,e=g)}return b[d]}
var getPageSize=function(b,c,d){if(0>=b||void 0!=d&&b>d)return null;d=global.fliphtml5_pages;if(void 0!=d&&0<d.length){b=d[b-1];if(void 0!=b&&null!=b)switch(c){case "normal":var e=b.normalSize}if(void 0==e)switch(c){case "normal":e=bookConfig.normalSize}return e?e.increasing():null}switch(c){case "normal":return(e=bookConfig.normalSize)?e.increasing():null}return null};
function getYunzhanUrl(b,c,d){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(!bookConfig.isEncryptionBook||"none"==BookRestrict.isRestrictPage(c))return e.return(b);PageLoadTask.addTask(c,d);return e.return(new Promise(function(f,g){var h=window.setInterval(function(){if(PageLoadTask.isCompleted(c,d)){window.clearInterval(h);var k=PageLoadTask.getUrls(b,c);f(k)}},50)}))})}
var getFileFormat=function(b,c){var d="";return!passwardType()||!bookConfig.excludeFrontPages||b<=parseInt(bookConfig.excludeFrontPages)?("normal"==c&&(global.fliphtml5_pages&&0<fliphtml5_pages.length&&(b=fliphtml5_pages[b-1])&&b.suffix&&(d=b.suffix),d||(d=bookConfig.normalSuffix?bookConfig.normalSuffix:".jpg")),"string"==typeof d&&d||(d=".jpg"),"."!=d[0]&&(d="."+d),d):".js"},decodeBase64=function(b,c){var d=encodeDatabasePrefix(c);if(global[d+b]&&"string"==typeof global[d+b]&&(c=getRealkey()))return b=
base64.decode(global[d+b]),b=rc4(c,b),base64.encode(b)},dataBase64Str=decodeDatabasePrefix=function(b){switch(b){case "normal":return"dataBase";case "large":return"dataBase";case "thum":return"dataBaseThum";case "thumb":return"dataBaseThum"}},
encodeDatabasePrefix=userList,getRealkey=getSingleRealKey=getListRealKey=verifyPassward=function(){if(!passwardType())return!0;var b=getPassward(),c=getUsername();if(1==passwardType())return b?b.MD5(32).toLowerCase()===bookConfig.singlePasswordMD5.toLowerCase():void 0;if(bookConfig.userListPath&&
(userList||loadJavascript(fixURLValue(bookConfig.userListPath),verifyPassward,function(){}),userList&&b&&c&&"string"==typeof userList[c]))return b=(c+String.fromCharCode(9)+b).MD5(32),b=parsHexToNormalString(b),b=base64.encode(b),userList[c].substring(0,24)===b},passwardType=
getPassward=function(){return document.getElementById("passward_input")?$("#passward_input").val():global.passward},getUsername=NoneLoad=Class({create:function(b,c,d,e,f,g){window.setTimeout(function(){d&&d("none","none",null,b)},1)}}),JsLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g){var h=this,k,l,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==
x.nextAddress)return h.index=b,h.type=c,h.pageWidth=e,h.pageHeight=f,h.isMirrorSide=g,x.yield(getPageDir(b,c,originTotalPageCount),2);k=x.yieldResult;h.imageURL=k;if(!h.fillImageOrNot(k,b))return!window.userList&&1<passwardType()&&loadJavascript(fixURLValue(bookConfig.userListPath),bind(h),function(){}),x.return();if(l=global[decodeDatabasePrefix(c)+b]&&"string"==typeof global[decodeDatabasePrefix(c)+b])return n=dataBase64Str(b,c),h.$image=$("<img src='"+n+"'/>"),h.$image[0].onload=
function(){d&&d(n,k,this.$image[0],b);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight)}.bind(h),x.return();q=h;loadJavascript(k,function(){});x.jumpToEnd()})},
fillImageOrNot:zoomIn:zoomOut:function(){},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;if(this.$image){if((isPhone()||isPad())&&!this.isMirrorSide){if(_agent_.system.name!=_agent_.system.ANDROID&&!bookConfig.highDefinitionConversion){this.resizeOnMobile();
return}if(bookConfig.highDefinitionConversion&&BookInfo.getBook().status_zoom){this.highDefinition();return}}b/=c;c=this.width/this.height;this.$image.css({width:"100%",height:"100%",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"});.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&this.$image.css({width:"auto"});-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&this.$image.css({height:"auto"});b=transformCSS({scale:1,origin:{x:0,y:0}});this.$image.css(b)}},resizeOnMobile:highDefinition:scale:function(b,c){var d=this.pageWidth/this.pageHeight>this.width/this.height?this.pageHeight/c:this.pageWidth/b;this.$image.css({width:b+"px",height:c+"px",position:"absolute",left:(this.pageWidth-b*d)/2+"px",bottom:"auto",top:(this.pageHeight-c*d)/2+"px",right:"auto"});b=transformCSS({scale:d,origin:{x:0,y:0}});this.$image.css(b)}}),CanvasLoad=Class({create:function(b,c,d,e,
f){var g=$("<canvas></canvas>");this.pageWidth=e;this.pageHeight=f;var h=function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(getPageDir(b,c,originTotalPageCount),2);l=n.yieldResult;d&&d(l,l,g,b);n.jumpToEnd()})},k=this.loadAllImage;(function(){var l=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress)return q.yield(getPageDir(b,c,originTotalPageCount),2);n=q.yieldResult;$.ajax({url:n,type:"get",async:!1,
success:function(x){canvasData[b]=configForPages.pages[b-1].data;globalImages[b]=[];k(b,h)}.bind(l),error:function(){}});q.jumpToEnd()})})()},loadAllImage:function(b,c){for(var d=0,e=0;e<canvasData[b].resources.length;e++)if(1!=canvasData[b].resources[e].type)d++,d>=canvasData[b].resources.length&&c();else{var f=new Image;f.src=getResource(b,e);globalImages[b][e]=f;f.onload=},zoomIn:function(){},zoomOut:function(){},onResize:function(){},renderCnvas:function(b,
c,d,e,f,g,h){if(bookConfig.usePdfJs&&d){this.renderInterval&&(window.clearInterval(this.renderInterval),this.renderInterval=void 0);this.render&&(this.render.taskPool.stop(),this.render=void 0);var k=canvasData[e],l=k.page,n=f,q=g,x=f/g,B=l.width/l.height;.01<=x-B&&!PageInfo.pageIsStrech(this.pageIndex)&&(n=l.width*g/l.height);-.01>=x-B&&!PageInfo.pageIsStrech(this.pageIndex)&&(q=f*l.height/l.width);if(!window.devicePixelRatio||isPC())window.devicePixelRatio=1;f=n*devicePixelRatio/l.width;d.attr("width",
n*devicePixelRatio);d.attr("height",q*devicePixelRatio);d.css("height",q+"px");d.css("width",n+"px");d.css({position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"});g=d[0].getContext("2d");g.save();g.imageSmoothingEnabled=!0;l.background&&(g.fillStyle=int2color(l.background),g.fillRect(0,0,n,q));this.render=new RenderPage(d[0],k,e,f);this.renderInterval=window.setInterval(function(){BookInfo.getBook().flipping||BookInfo.getBook().flipBook.parameters.zoomming?this.render.taskPool.pause():
this.render.taskPool.start();this.render.taskPool.end()&&(h&&h(b,c,d),window.clearInterval(this.renderInterval))}.bind(this),200)}}}),SvgLoad=Class({index:0,pageWidth:0,pageHeight:0,create:function(b,c,d,e,f){var g=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return g.index=b,g.type=c,g.pageWidth=e,g.pageHeight=f,k.yield(getPageDir(b,c,originTotalPageCount),2);h=k.yieldResult;g.sideImage=$("<img src='"+h+"'/>");g.sideImage[0].onload=function(){this.$svgDiv=
$("<div style='position:absolute;width:100%;height:100%;left:0;top:0;'></div>");this.$svgDiv.append(this.sideImage);this.$svg=$("<canvas></canvas>");this.$svgDiv.append(this.$svg);this.width=this.sideImage[0].naturalWidth;this.height=this.sideImage[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight);this.$svg.attr("width",this.width+"px");this.$svg.attr("height",this.height+"px");var l=this.$svg[0].getContext("2d");l.beginPath();l.drawImage(this.sideImage[0],0,0);l.closePath();BookInfo.getBook().status_zoom?
this.zoomIn():this.zoomOut();this.reDraw();d&&d(h,h,this.$svgDiv,b)}.bind(g);k.jumpToEnd()})},beginToFlip:function(){},afterFlip:function(){},reDraw:function(){if(!isPC()){var b=this.$svg[0].getContext("2d"),c=function(){b.beginPath();b.clearRect(0,0,this.width,this.height);b.drawImage(this.sideImage[0],0,0,this.width,this.height);b.closePath();console.log("reDraw:"+this.index)}.bind(this);this.interval=window.setTimeout(function(){c();this.interval=window.setTimeout(function(){c();this.interval=
window.setTimeout(function(){c()}.bind(this),2E3)}.bind(this),1E3)}.bind(this),500)}},zoomIn:function(){this.sideImage&&this.sideImage.show();this.$svg&&this.$svg.hide()},zoomOut:function(){this.sideImage&&this.sideImage.hide();this.$svg&&this.$svg.show()},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;b/=c;c=this.width/this.height;this.sideImage&&this.sideImage.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});this.$svg&&this.$svg.css({width:"100%",height:"100%",position:"absolute",
top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&(this.$svg&&this.$svg.css({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"}),this.sideImage&&this.sideImage.css({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"}));-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&(this.$svg&&this.$svg.css({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"}),this.sideImage&&this.sideImage.css({height:"auto",
top:Math.round((this.pageHeight-d.y)/2)+"px"}))},destroy:);function randomString(b){b=b||32;for(var c="",d=0;d<b;d++)c+="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678".charAt(Math.floor(48*Math.random()));return c}
function canvasReload(b,c,d,e){var f=b.width,g=b.height;c=Math.round(c);d=Math.round(d);var h=f/c,k=g/d,l=Math.ceil(h/2),n=Math.ceil(k/2),q=b.getContext("2d"),x=q.getImageData(0,0,f,g),B=q.createImageData(c,d);x=x.data;for(var u=B.data,t=0;t<d;t++)for(var v=0;v<c;v++){for(var w=4*(v+t*c),z,A=0,K=0,H=0,I=0,F=0,G=0,L=(t+.5)*k,M=Math.ceil((t+1)*k),N=Math.floor(t*k);N<M;N++){var O=Math.abs(L-(N+.5))/n,Q=(v+.5)*h;O*=O;for(var V=Math.ceil((v+1)*h),W=Math.floor(v*h);W<V;W++)if(z=Math.abs(Q-(W+.5))/l,z=Math.sqrt(O+
z*z),!(1<=z)){z=2*z*z*z-3*z*z+1;var X=4*(W+N*f);G+=z*x[X+3];K+=z;255>x[X+3]&&(z=z*x[X+3]/250);H+=z*x[X];I+=z*x[X+1];F+=z*x[X+2];A+=z}}u[w]=H/A;u[w+1]=I/A;u[w+2]=F/A;u[w+3]=G/K}!0===e?(b.width=c,b.height=d):q.clearRect(0,0,f,g);q.putImageData(B,0,0)}
var ImageLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",canvasDom:null,create:function(b,c,d,e,f,g,h){var k=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return k.index=b,k.type=c,k.pageWidth=e,k.pageHeight=f,k.isMirrorSide=g,k.parent=h,k.callback=d,n.yield(getPageDir(b,c,originTotalPageCount),2);l=n.yieldResult;k.imageURL=l;bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(l=l.removeStartFrom("?"));
k.realImageURL=l;k.id=randomString(10);k.imageObject=new ImageObject;k.imageObject.attr("id",k.id);k.imageObject.alt(k.id);k.imageObject.src(k.realImageURL);k.$image=k.imageObject.$image;k.$image[0].onload=k.onLoad.bind(k);k.enableRecognizeQRcode();k.setTextSharpening();n.jumpToEnd()})},onLoad:function(){this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;if(!(this.width>1.25*this.pageWidth&&this.height>1.25*this.pageHeight)||!0!==bookConfig.canvasRender&&"true"!==bookConfig.canvasRender||
isPhone()||isPad())this.width=this.$image[0].naturalWidth,this.height=this.$image[0].naturalHeight,this.callback&&this.callback(this.realImageURL,this.realImageURL,this.$image[0],this.index),this.onResize(this.pageWidth,this.pageHeight);else try{this.canvasDom=document.createElement("canvas");this.canvasDom.setAttribute("id","pageCanvas");this.canvasDom.setAttribute("width",this.width);this.canvasDom.setAttribute("height",this.height);var b=this.canvasDom.getContext("2d");b.width=this.width;b.height=
this.height;b.drawImage(this.$image[0],0,0);canvasReload(this.canvasDom,this.pageWidth,this.pageHeight,!0);this.callback&&this.callback(this.realImageURL,this.realImageURL,this.canvasDom,this.index)}catch(c){this.width=this.$image[0].naturalWidth,this.height=this.$image[0].naturalHeight,this.callback&&this.callback(this.realImageURL,this.realImageURL,this.$image[0],this.index),this.onResize(this.pageWidth,this.pageHeight)}},enableRecognizeQRcode:function(){bookConfig.EnableRecognizeQRcodePressOnMobile&&
this.setImageCss({"-webkit-touch-callout":"default"})},setTextSharpening:function(){if(bookConfig.textSharpening){var b="-webkit-optimize-contrast";_agent_.browser.firefox&&(b="-moz-crisp-edges");_agent_.browser.opera&&(b="-o-crisp-edges");this.setImageCss({"image-rendering":b,"-ms-interpolation-mode":"nearest-neighbor"})}},zoomIn:function(b){bookConfig.useTheAliCloudChart&&this.switchLargeImage(b);(isPhone()||isPad())&&this.highDefinition()},zoomOut:function(b,c){bookConfig.useTheAliCloudChart&&
this.switchNormalImage(b,c);(isPhone()||isPad())&&this.resize()},onResize:function(b,c){try{if(!(!0!==bookConfig.canvasRender&&"true"!==bookConfig.canvasRender||isPhone()||isPad())&&this.canvasDom){this.pageWidth=b;this.pageHeight=c;this.canvasDom.setAttribute("width",this.width);this.canvasDom.setAttribute("height",this.height);var d=this.canvasDom.getContext("2d");d.width=this.width;d.width=this.height;d.drawImage(this.$image[0],0,0);canvasReload(this.canvasDom,this.pageWidth,this.pageHeight,!0);
return}}catch(e){console.log("this function cross-domain !")}if((isPhone()||isPad())&&!this.isMirrorSide&&BookInfo.getBook().status_zoom)this.highDefinition();else{this.pageWidth=b;this.pageHeight=c;b/=c;c=this.width/this.height;this.setImageCss({width:"100%",height:"100%",position:"absolute",top:0,left:0});d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);PageInfo.pageIsStrech(this.index)||(.01<=b-c&&this.setImageCss({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+
"px"}),-.01>=b-c&&this.setImageCss({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"}),.01>Math.abs(b-c)&&isPC()&&bookConfig.useTheAliCloudChart&&(b>c?this.setImageCss({width:"auto",left:Math.round((this.pageWidth-this.pageHeight*this.width/this.height)/2)+"px"}):this.setImageCss({height:"auto",top:Math.round((this.pageHeight-this.pageWidth*this.height/this.width)/2)+"px"})));b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.setImageCss(b)}},resize:function(){var b=
this.pageWidth/this.pageHeight,c=this.width/this.height;this.setImageCss({width:"100%",height:"100%",position:"absolute",top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);PageInfo.pageIsStrech(this.index)||(.01<=b-c&&this.setImageCss({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"}),-.01>=b-c&&this.setImageCss({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"}));b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},
b);this.setImageCss(b)},highDefinition:function(){this.scale(this.width,this.height)},scale:function(b,c){var d=this.pageWidth/this.pageHeight,e=this.width/this.height;var f=this.pageHeight/c;var g=this.pageWidth/b;.01<=d-e&&!PageInfo.pageIsStrech(this.index)&&(g=f=this.pageHeight/c);-.01>=d-e&&!PageInfo.pageIsStrech(this.index)&&(f=g=this.pageWidth/b);this.setImageCss({width:b+"px",height:c+"px",position:"absolute",left:Math.round((this.pageWidth-b*g)/2)+"px",bottom:"auto",top:Math.round((this.pageHeight-
c*f)/2)+"px",right:"auto"});b=!1;if(isPhone()||isPad())b=!0;g=transformCSS({scale:{x:g,y:f},origin:{x:0,y:0}},b);this.setImageCss(g)},switchLargeImage:function(b){if(bookConfig.useTheAliCloudChart){var c=this.imageURL.removeStartFrom("?");window.isSupportWebp?0>c.indexOf("webp")?c+="?x-oss-process=image/format,webp":bookConfig.textClarityEnhancement&&(c+="?x-oss-process=image"):c+="?x-oss-process=image/format,"+getWebpOriginFormat(c);switch(bookConfig.textClarityEnhancement){case 1:c+="/sharpen,100";
break;case 2:c+="/sharpen,150";break;case 3:c+="/sharpen,200"}if(isPhone()||isPad())if(this.largeImageObject)this.largeImageObject&&this.largeImageObject.show();else{this.largeImageObject=new ImageObject;this.largeImageObject.attr("id",this.id);this.largeImageObject.alt(this.id);this.largeImageObject.src(c);var d=this.largeImageObject.$image;d[0].onload=function(){this.onResize(this.pageWidth,this.pageHeight);this.parent.append(d)}.bind(this)}else b&&(this.callback=b),this.imageObject.attr("src",
c)}},switchNormalImage:function(b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return bookConfig.useTheAliCloudChart?b?f.yield(getPageDir(d.index,"normal",originTotalPageCount),3):f.jumpTo(2):f.return();if(2!=f.nextAddress){e=f.yieldResult;if(e==d.imageURL)return f.return();d.imageURL=e}isPhone()||isPad()?d.largeImageObject&&d.largeImageObject.hide():(c&&(d.callback=c),d.imageObject.attr("src",d.imageURL));f.jumpToEnd()})},setImageCss:),PdfLoadArray=Class({create:function(b){this.stacks=[];this.limitCount=b;this.id=0;this.running=!1},push:function(b){if(b&&b.start){for(var c=0;c<this.stacks.length;c++)if(this.stacks[c]==b){console.log(b.isRepeat());if(b.isRepeat())return;this.stacks[c].pause();this.stacks.remove(c);c--;this.running=!1}try{this.stacks.push(b),this.start()}catch(d){}}},pop:function(b){if(this.running&&this.stacks[this.id]==b)this.stacks.remove(this.id),
this.running=!1,this.runFirstTask();else for(var c=0;c<this.stacks.length;c++)if(this.stacks[c]==b){this.stacks.remove(c);break}},start:function(){this.runFirstTask()},runFirstTask:function(){if(!this.running){for(var b=0;b<this.stacks.length;b++)if(this.stacks[b]&&this.stacks[b].start&&!this.stacks[b].rendered){this.id=b;this.running=!0;this.stacks[b].start().then(function(){this.stacks.remove(this.id);this.running=!1;this.runFirstTask()}.bind(this));return}this.running=!1}},next:function(){this.id++;
this.id==this.stacks.length?this.running=!1:this.stacks&&this.stacks[this.id]&&this.stacks[this.id].start&&!this.stacks[this.id].rendered?this.stacks[this.id].start().then(function(){this.stacks[this.id]&&this.next()}.bind(this)):this.next()},destroy:function(){this.stacks&&0<this.stacks.length&&(this.stacks.forEach(function(b){b.pause();b.destroy()}),this.stacks=[],this.id=0,this.running=!1)}}),PdfLoadingTask=Class({create:function(b,c,d,e,f){this.page=this.loadingTask=null;this.loaded=this.rendered=
!1;this.index=b;this.type=c;this.pageWidth=d;this.pageHeight=e;this.callback=f;this.renderHeight=this.renderWidth=0},start:function(){var b=this.index,c=this.type;return new Promise(function(d,e){var f=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(!b||0>b||b>bookConfig.totalPageCount)return e(),h.return();if(f.page)return f.loaded=!0,f.renderCanvas(f.pageWidth,f.pageHeight).then(function(k){this.callback&&this.callback(k);this.rendered=!0;d(k)}.bind(f)),
h.return();f.loadingTask&&(f.loadingTask.destroy(),f.loadingTask=null);return h.yield(getPageDir(b,c,originTotalPageCount),2)}g=h.yieldResult;"object"==typeof g&&(g=g[0]);getBlob(g).then(function(k){this.loadingTask=pdfjsLib.getDocument({url:k.url,password:k.password});this.loadingTask.promise.then(function(l){l.getPage(1).then(function(n){this.loaded=!0;this.page=n;this.renderCanvas(this.pageWidth,this.pageHeight).then(function(q){this.rendered=!0;this.callback&&this.callback(q);d(q)}.bind(this))}.bind(this))}.bind(this))}.bind(f));
h.jumpToEnd()})}.bind(this))},renderCanvas:function(b,c){this.rendered=!1;return new Promise(function(d,e){this.renderWidth=b;this.renderHeight=c;this.renderTask&&(this.renderTask.cancel(),this.renderTask=null);var f=$("<canvas><canvas/>")[0],g=f.getContext("2d"),h=window.devicePixelRatio||1,k=this.page,l=k.getViewport({scale:1});l=fitPageWidthHeight(b,c,l.width,l.height).x/l.width;l=k.getViewport({scale:l});var n=l.width,q=l.height;isPC()||(n>q?3E3<n*h&&(h=3E3/n):3E3<q*h&&(h=3E3/q));f.width=n*h;
f.height=q*h;1==h?(f.style.width=f.width+"px",f.style.height=f.height+"px"):(f.style.width=n+"px",f.style.height=q+"px");g={canvasContext:g,transform:1!==h?[h,0,0,h,0,0]:null,viewport:l};try{this.renderTask=k.render(g),this.renderTask.promise.then(function(){this.rendered=!0;d(f)}.bind(this))}catch(x){e(x)}}.bind(this))},remove:function(){},destroy:function(){this.loadingTask&&(this.loadingTask.destroy(),this.loadingTask=null);this.renderTask&&(this.renderTask.cancel(),this.renderTask=null);this.loaded=
this.rendered=!1},isRepeat:function(){return this.loaded?this.pageWidth==this.renderWidth&&this.pageHeight==this.renderHeight?!0:!1:!1},pause:function(){this.loaded&&this.renderTask&&(this.renderTask.cancel(),this.renderTask=null,this.rendered=!1)},enterSide:function(){},leaveSide:function(){},changeRenderWH:function(b,c){if(this.pageWidth!=b||this.pageHeight!=c)this.pageWidth=b,this.pageHeight=c,this.rendered=!1}});window.pdfPages={normal:[],thumb:[],large:[]};
function getBlob(b){return new Promise(function(c,d){d=new XMLHttpRequest;d.open("get",b,!0);d.responseType="blob";d.onload=function(){if(4==this.readyState&&200==this.status){(new Date).getTime();window.response=this.response;var e=new FileReader;e.onload=function(){window.arrayBuffer=new Uint8Array(this.result)};e.readAsArrayBuffer(response);var f=response.slice(1083,response.size-1003,"application/pdf"),g="",h=response.slice(1080,1083),k=response.slice(response.size-1003,response.size-1E3);e=new FileReader;
e.onload=function(){g=this.result+g;var l=new FileReader;l.onload=function(){g+=this.result;var n=f.slice(0,4E3),q=new FileReader;q.onload=function(){var x=new Uint8Array(this.result);for(i=0;i<this.result.byteLength;++i)x[i]=255-x[i];x=new Blob([new Blob([x.buffer]),f.slice(4E3,f.size)],{type:"application/pdf"});x=window.URL.createObjectURL(x);c({url:x,password:g})};q.readAsArrayBuffer(n)};l.readAsText(k)};e.readAsText(h)}};d.send()}.bind(this))}
function blobToUint8Array(b){var c=URL.createObjectURL(b);b=new XMLHttpRequest;b.open("GET",c,!1);b.send();URL.revokeObjectURL(c);var d=new Uint8Array(b.response.length);for(c=0;c<b.response.length;++c)d[c]=255-b.response.charCodeAt(c);return d}
var PdfLoad=Class({index:0,pageWidth:0,pageHeight:0,create:function(b,c,d,e,f,g,h){var k=this,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return k.index=b,k.type=c,k.pageWidth=e,k.pageHeight=f,k.renderWidth=e,k.renderHeight=f,k.callback=d,k.parent=h,l=k,n.yield(getPageDir(b,c,originTotalPageCount),2);l.imageURL=n.yieldResult;k.$content=$("<div style='position:absolute;left:0;top:0;width:100%;height:100%;'></div>");k.pdfLoadingTask=new PdfLoadingTask(k.index,
k.type,e,f,k.loaded.bind(k));window.pdfLoadStack||(window.pdfLoadStack=new PdfLoadArray(3));window.pdfLoadStack&&pdfLoadStack.push(k.pdfLoadingTask);n.jumpToEnd()})},loaded:enterSide:function(){this.enter=!0},leaveSide:zoomIn:function(){isPhone()||isPad()},zoomOut:resizeSvg:function(b,c){this.renderWidth=b;this.renderHeight=c;this.resizeImage(b,
c);window.pdfLoadStack&&(isPC()||isSlideBook()||0<=BookInfo.getCurrentPages().indexOf(this.index))&&(this.pdfLoadingTask.changeRenderWH(b,c),pdfLoadStack.push(this.pdfLoadingTask))},onResize:function(b,c){if(b!=this.pageWidth||c!=this.pageHeight)this.pageWidth=b,this.pageHeight=c,this.renderWidth=b,this.renderHeight=c,this.resizeImage(b,c),window.pdfLoadStack&&(isPC()||isSlideBook()||0<=BookInfo.getCurrentPages().indexOf(this.index))&&this.pdfLoadingTask&&(this.pdfLoadingTask.changeRenderWH(b,c),
pdfLoadStack.push(this.pdfLoadingTask))},resizeImage:function(b,c){if(this.width&&this.height){var d={width:"100%",height:"100%",position:"absolute",top:0,left:0},e=fitPageWidthHeight(b,c,this.width,this.height);.01<=(b-e.x)/c&&!PageInfo.pageIsStrech(this.index)&&(d.width=e.x+"px",d.left=Math.round((b-e.x)/2)+"px");.01<=(c-e.y)/b&&!PageInfo.pageIsStrech(this.index)&&(d.height=e.y+"px",d.top=Math.round((c-e.y)/2)+"px");e=transformCSS({scaleX:this.pageWidth/b,scaleY:this.pageHeight/c,origin:{x:0,y:0}},
!1);this.$content.css(e);this.$content.css({width:b+"px",height:c+"px"});this.$canvas.css(d)}},changeImageSrc:function(b){if(this.pdfLoaded){var c=this.renderWidth,d=this.renderHeight;this.width=parseFloat(b.style.width);this.height=parseFloat(b.style.height);this.$canvas=$(b);b={position:"absolute",top:0,left:0};fitPageWidthHeight(c,d,this.width,this.height);b.left=Math.round((c-this.width)/2)+"px";b.top=Math.round((d-this.height)/2)+"px";this.$canvas.css(b);this.$content.empty().append(this.$canvas);
this.callback&&this.callback(this.imageURL,this.imageURL,this.$content,this.index)}},destroy:function(){this.pdfLoadingTask&&(window.pdfLoadStack&&pdfLoadStack.pop(this.pdfLoadingTask),this.pdfLoadingTask.destroy(),this.pdfLoadingTask=null)}}),ImageArrayLoadImage=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g,h,k){var l=this,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){l.index=b;l.type=d;l.i=
i;l.callback=e;l.errorCallback=f;l.pageWidth=g;l.pageHeight=h;l.isMirrorSide=k;n=c;bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(n=n.removeStartFrom("?"));l.imageURL=n;l.imageObject=new ImageObject;l.imageObject.alt(l.index);l.imageObject.src(l.imageURL);l.imageObject.css({"z-index":0});l.$image=l.imageObject.$image;bookConfig.EnableRecognizeQRcodePressOnMobile&&l.imageObject.css({"-webkit-touch-callout":"default"});l.loaded=!1;l.$image[0].onload=function(){this.loaded=!0;this.callback&&
this.callback(this.$image);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight)}.bind(l);l.$image[0].onerror=function(){this.loaded=!0;this.errorCallback&&this.errorCallback(this.$image)}.bind(l);bookConfig.textSharpening&&(q="-webkit-optimize-contrast",_agent_.browser.firefox&&(q="-moz-crisp-edges"),_agent_.browser.opera&&(q="-o-crisp-edges"),l.$image.css({"image-rendering":q,"-ms-interpolation-mode":"nearest-neighbor"}));x.jumpToEnd()})},
zoomIn:function(b){bookConfig.useTheAliCloudChart&&isPC()?this.switchLargeImage(b):(isPhone()||isPad())&&this.highDefinition()},zoomOut:function(b,c){bookConfig.useTheAliCloudChart&&isPC()?this.switchNormalImage(b,c):(isPhone()||isPad())&&this.resize()},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;if((isPhone()||isPad())&&!this.isMirrorSide&&BookInfo.getBook().status_zoom)this.highDefinition();else{b/=c;c=this.width/this.height;this.imageObject.css({width:"100%",height:"100%",position:"absolute",
top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&this.imageObject.css({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"});-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&this.imageObject.css({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"});.01>Math.abs(b-c)&&isPC()&&(b>c?this.imageObject.css({width:"auto",left:Math.round((this.pageWidth-this.pageHeight*this.width/this.height)/2)+"px"}):
this.imageObject.css({height:"auto",top:Math.round((this.pageHeight-this.pageWidth*this.height/this.width)/2)+"px"}));b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.imageObject.css(b)}},resize:function(){var b=this.pageWidth/this.pageHeight,c=this.width/this.height;this.imageObject.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&
this.imageObject.css({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"});-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&this.imageObject.css({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"});b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.imageObject.css(b)},highDefinition:scale:function(b,c){var d=this.pageWidth/this.pageHeight,e=this.width/this.height;var f=this.pageHeight/c;var g=this.pageWidth/
b;.01<=d-e&&(g=f=this.pageHeight/c);-.01>=d-e&&(f=g=this.pageWidth/b);this.imageObject.css({width:b+"px",height:c+"px",position:"absolute",left:Math.round((this.pageWidth-b*g)/2)+"px",bottom:"auto",top:Math.round((this.pageHeight-c*f)/2)+"px",right:"auto"});b=!1;if(isPhone()||isPad())b=!0;g=transformCSS({scale:{x:g,y:f},origin:{x:0,y:0}},b);this.imageObject.css(g)},switchLargeImage:function(b){if(bookConfig.useTheAliCloudChart){b=this.imageURL.removeStartFrom("?");window.isSupportWebp?0>b.indexOf("webp")?
b+="?x-oss-process=image/format,webp":bookConfig.textClarityEnhancement&&(b+="?x-oss-process=image"):b+="?x-oss-process=image/format,"+getWebpOriginFormat(b);switch(bookConfig.textClarityEnhancement){case 1:b+="/sharpen,100";break;case 2:b+="/sharpen,150";break;case 3:b+="/sharpen,200"}this.loaded&&(this.callback=void 0);this.imageObject.attr("src",b)}},switchNormalImage:function(b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return bookConfig.useTheAliCloudChart?
b?f.yield(getPageDir(d.index,"normal",originTotalPageCount)[d.i],3):f.jumpTo(2):f.return();if(2!=f.nextAddress){e=f.yieldResult;if(e==d.imageURL)return f.return();d.imageURL=e}d.loaded&&(d.callback=void 0);d.imageObject.attr("src",d.imageURL);f.jumpToEnd()})},destroy:function(){this.imageObject.destroy()}}),ImageArrayLoadSvg=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g,h,k){var l=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){l.index=
b;l.type=d;l.i=i;l.callback=e;l.errorCallback=f;l.pageWidth=g;l.pageHeight=h;l.isMirrorSide=k;n=c;bookConfig.useTheAliCloudChart&&!bookConfig.isEncryptionBook&&(n=n.removeStartFrom("?"));l.imageURL=n;l.$image=$("<img src='"+l.imageURL+"' style='z-index:0;'/>");bookConfig.EnableRecognizeQRcodePressOnMobile&&l.$image.css({"-webkit-touch-callout":"default"});l.$image[0].onload=function(){this.callback&&this.callback(this.$image);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;
this.onResize(this.pageWidth,this.pageHeight)}.bind(l);l.$image[0].onerror=function(){this.errorCallback&&this.errorCallback(this.$image)}.bind(l);q.jumpToEnd()})},zoomIn:function(b){},zoomOut:function(b,c){},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;b/=c;c=this.width/this.height;this.$image.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&
this.$image.css({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"});-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&this.$image.css({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"});b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);_agent_.system.name!=_agent_.system.ANDROID&&this.$image.css(b)},scale:function(b,c){var d=this.pageWidth/this.pageHeight>b/c?this.pageHeight/c:this.pageWidth/b;this.$image.css({width:b+"px",height:c+"px",position:"absolute",
left:(this.pageWidth-b*d)/2+"px",bottom:"auto",top:(this.pageHeight-c*d)/2+"px",right:"auto"});b=!1;if(isPhone()||isPad())b=!0;d=transformCSS({scale:d,origin:{x:0,y:0}},b);this.$image.css(d)},destroy:function(){this.$image=this.$image[0].onload=null},resizeSvg:function(b,c){if(isPhone()||isPad())b=fitPageWidthHeight(b,c,this.width,this.height),this.scale(b.x,b.y)}}),ImageArrayLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,
c,d,e,f,g){var h=this,k,l,n,q,x,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress)return h.index=b,h.type=c,h.pageWidth=e,h.pageHeight=f,h.isMirrorSide=g,h.callback=d,u.yield(getPageDir(b,c,originTotalPageCount),2);k=u.yieldResult;h.imagesURL=k;l=0;h.$images=[];h.loadArray=[];n=function(){l++;this.callback&&l==k.length&&this.callback(k,k,this.$images,this.index)}.bind(h);q=function(t){l++;this.$images.removeElement(t);this.callback&&l==k.length&&this.callback(k,
k,this.$images,this.index)}.bind(h);for(x=0;x<k.length;x++)B=-1<k[x].indexOf(".svg")?new ImageArrayLoadSvg(b,k[x],c,n,q,e,f,g):new ImageArrayLoadImage(b,k[x],c,n,q,e,f,g),h.$images.push(B.$image),h.loadArray.push(B);u.jumpToEnd()})},zoomIn:function(b){for(var c=0;c<this.loadArray.length;c++)this.loadArray[c].zoomIn&&this.loadArray[c].zoomIn(b)},zoomOut:function(b,c){for(var d=0;d<this.loadArray.length;d++)this.loadArray[d].zoomOut&&this.loadArray[d].zoomOut(b,c)},onResize:function(b,c){this.pageWidth=
b;this.pageHeight=c;for(var d=0;d<this.loadArray.length;d++)if(this.loadArray[d].onResize)this.loadArray[d].onResize(b,c)},destroy:resizeSvg:function(b,c){for(var d=0;d<this.loadArray.length;d++)this.loadArray[d].resizeSvg&&this.loadArray[d].resizeSvg(b,c)}}),ImageStageLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:!1,create:function(b,
c,d,e,f){this.index=b;this.type=c;this.pageWidth=e;this.pageHeight=f;this.callback=d;this.$image=$("<img/>");bookConfig.EnableRecognizeQRcodePressOnMobile&&this.$image.css({"-webkit-touch-callout":"default"});bookConfig.textSharpening&&(c="-webkit-optimize-contrast",_agent_.browser.firefox&&(c="-moz-crisp-edges"),_agent_.browser.opera&&(c="-o-crisp-edges"),this.$image.css({"image-rendering":c,"-ms-interpolation-mode":"nearest-neighbor"}));this.added=!1;this.$image[0].onload=function(){this.callback&&
this.callback(this.imageURL,this.imageURL,this.$image[0],b);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.resizeImage();this.added=!0}.bind(this);this.onResize(e,f)},zoomIn:function(b){},zoomOut:function(b,c){},onResize:function(b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return d.pageWidth=b,d.pageHeight=c,d.resizeImage(),f.yield(d.getImageUrl(),2);e=f.yieldResult;e!=d.imageURL?d.changeImageSrc(e):d.resize();
f.jumpToEnd()})},changeImageSrc:function(b){this.imageURL=b;this.supportCanvas()?(this.$canvasImage||(this.$canvasImage=$("<img style=''/>")),this.$canvasImage[0].crossOrigin="Anonymous",this.$canvasImage.attr("src",b),this.$canvasImage[0].onload=function(){this.renderCanvas()}.bind(this)):this.$image.attr("src",b)},resize:supportCanvas:function(){return 0<=window.location.href.indexOf("file:///")?!1:!0},renderCanvas:function(){var b=$("<canvas><canvas/>")[0],
c=b.getContext("2d"),d=window.devicePixelRatio||1,e=this.$canvasImage,f=fitPageWidthHeight(this.pageWidth,this.pageHeight,e[0].naturalWidth,e[0].naturalHeight),g=f.x;f=f.y;b.width=g*d;b.height=f*d;b.style.width=g+"px";b.style.height=f+"px";c.drawImage(e[0],0,0,g*d,f*d);b=b.toDataURL("image/jpeg",1);$(this.$image[0]).attr("src",b)},resizeImage:function(){var b={width:"100%",height:"100%",position:"absolute",top:0,left:0},c=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=
(this.pageWidth-c.x)/this.pageHeight&&!PageInfo.pageIsStrech(this.index)&&(b.width="auto",b.left=Math.round((this.pageWidth-c.x)/2)+"px");.01<=(this.pageHeight-c.y)/this.pageWidth&&!PageInfo.pageIsStrech(this.index)&&(b.height="auto",b.top=Math.round((this.pageHeight-c.y)/2)+"px");c=transformCSS({scale:1,origin:{x:0,y:0}},!1);this.$image.css(c);this.$image.css(b)},getImageUrl:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(getPageDir(b.index,
b.type,originTotalPageCount,b.pageWidth,b.pageHeight),2):c.return(c.yieldResult)})}}),PageBackground=Class({create:function(b,c,d,e,f,g,h){var k=this,l,n,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){if(1==x.nextAddress){if(!b||!c)return x.return();k.type=c;return x.yield(getPageDir(b,c,originTotalPageCount),2)}l=x.yieldResult;n=getPageSize(b,c);k.imageURL=l;k.load=null;k.parent=h;q=k.getUrlType(l,n);switch(q){case 0:k.load=new CanvasLoad(b,c,d,e,f,g,h);break;case 1:k.load=new ImageLoad(b,
c,d,e,f,g,h);break;case 2:k.load=new JsLoad(b,c,d,e,f,g,h);break;case 3:k.load=new SvgLoad(b,c,d,e,f,g,h);break;case 4:k.load=new ImageArrayLoad(b,c,d,e,f,g,h);break;case 5:k.load=new PdfLoad(b,c,d,e,f,g,h);break;case 6:k.load=new ImageStageLoad(b,c,d,e,f,g,h);break;case 7:k.load=new NoneLoad(b,c,d,e,f,g,h)}x.jumpToEnd()})},getUrlType:function(b,c){return this.isPdf(b)?5:c&&isPC()?6:"object"==typeof b?4:"normal"==this.type&&bookConfig.usePdfJs?0:b.startsWith("none")?7:-1<b.indexOf(".js")?2:-1<b.indexOf(".svg")?
3:1},isPdf:function(b){return-1<b.indexOf(".pdf")||-1<b.indexOf(".zip")?!0:!1},onResize:function(b,c){if(this.load&&this.load.onResize)this.load.onResize(b,c)},zoomIn:function(b,c){this.load&&this.load.zoomIn&&this.load.zoomIn(b,c)},zoomOut:function(b,c){this.load&&this.load.zoomOut&&this.load.zoomOut(b,c)},destroy:function(){this.load&&this.load.destroy&&this.load.destroy()},resizeSvg:enterSide:function(){this.load&&this.load.enterSide&&
this.load.enterSide()},leaveSide:function(){this.load&&this.load.leaveSide&&this.load.leaveSide()}}),Side=Class({bookType:0,pageIndex:0,width:0,height:0,pageWidth:0,pageHeight:0,visible:!0,$annotation:null,sideImage:null,sideContent:null,side:null,create:setCSSByStyle:function(b){this.side.css(b)},setCSSByName:function(b){this.side.attr("class",b)},enterSide:virtual_function,leaveSide:virtual_function,remove:virtual_function,zoomInSideImage:virtual_function,zoomOutSideImage:virtual_function,
switchLargeImage:virtual_function,switchNormalImage:virtual_function,loading:virtual_function,unLoading:virtual_function,mirrorSide:virtual_function,setFlipShadow:virtual_function,addFlipShadow:virtual_function,resizeFlipShadow:virtual_function,clearFlipShadow:virtual_function,fillContent:virtual_function,fillPage:virtual_function,initSelectTextEvent:virtual_function,destroySelect:virtual_function,initMagnifierEvent:virtual_function,destroyMagnifier:virtual_function,pauseAnimation:virtual_function,
startAnimation:virtual_function,addHistoryTexts:virtual_function,highlightSearch:virtual_function,clearHighlight:virtual_function,resetSlider:virtual_function}),BookRestrict=Class({statics:{unLimitPages:[],open:!1,isRestrictPage:function(b){if(!bookConfig.isEncryptionBook)return"none";if(this.open)return"open";var c=this.unLimitPages;return c&&c[b]?c[b]:"restrict"},getRestrictToken:function(){try{if(!bookConfig.isEncryptionBook||!window.bookId)return"";var b=(new Date).format("yyyy-MM-dd",!0),c=window.localStorage.getItem("restrictToken"+
window.bookId+b);return c?c:""}catch(d){}},setRestrictToken:function(b){try{if(!bookConfig.isEncryptionBook||!window.bookId)return"";var c=(new Date).format("yyyy-MM-dd",!0);window.localStorage.setItem("restrictToken"+window.bookId+c,b)}catch(d){}},fillBookContent:function(){this.open=!0;this.fillBooks("flipBook");this.fillBooks("singlePageBook");this.fillBooks("catalogBook");this.fillBooks("slideBook");this.fillBooks("singleSlideBook")},fillBooks:function(b){if(b=global[b])b.loading(),b.fillBookContent()},
setRestrictPages:function(b){try{for(var c=1;c<=bookConfig.totalPageCount;c++){a:{var d=c;try{for(var e=b.split(";"),f=0;f<e.length;f++){var g=e[f];if(0<=g.indexOf("-")){var h=g.split("-");if(Number.isBetween(d,parseInt(h[0]),parseInt(h[1]))){var k=!1;break a}}else if(d==parseInt(g)){k=!1;break a}}}catch(l){}k=!0}k?BookRestrict.unLimitPages[c]="restrict":BookRestrict.unLimitPages[c]="open"}}catch(l){}}}}),Page=Class({create:
remove:function(){this.sideImage&&this.sideImage.remove();this.pageBackground&&this.pageBackground.destroy();this.side.remove();this.sideImage=this.side=void 0;this.render&&(this.render.taskPool.stop(),this.renderInterval&&(window.clearInterval(this.renderInterval),this.renderInterval=void 0));this.hasReader&&this.destroySlider()},hasReader:function(){return window.readerConfig&&0<window.readerConfig.pages.length&&window.readerConfig.pages.length>=this.pageIndex&&(this.hasReaderItems()||window.inverseEditor&&
window.inverseEditor.length&&window.inverseEditor[this.pageIndex-1]&&window.inverseEditor[this.pageIndex-1].length)?!0:!1},hasReaderItems:function(){return window.readerConfig.pages[this.pageIndex-1]&&(window.readerConfig.pages[this.pageIndex-1].insertPageLink&&window.readerConfig.pages[this.pageIndex-1].insertPageLink.length||window.readerConfig.pages[this.pageIndex-1].items&&window.readerConfig.pages[this.pageIndex-1].items.length||window.readerConfig.pages[this.pageIndex-1].hasSceneAnime||window.readerConfig.pages[this.pageIndex-
1].background&&window.readerConfig.pages[this.pageIndex-1].background.isEnable||window.readerConfig.pages[this.pageIndex-1].camera&&window.readerConfig.pages[this.pageIndex-1].camera.isEnable||window.readerConfig.pages[this.pageIndex-1].foreground&&window.readerConfig.pages[this.pageIndex-1].foreground.isEnable||window.readerConfig.pages[this.pageIndex-1].subtitle&&window.readerConfig.pages[this.pageIndex-1].subtitle.isEnable)},loading:function(){"restrict"==BookRestrict.isRestrictPage(this.pageIndex)||
this.originalImageLoaded||this.removeLoad||(this.loadingImage||(this.loadingImage=$("<div class='loadingOuter'><img alt='loadingOuter' width='auto' height='auto' class='loadingImage' src='"+bookConfig.pageLoadingUrl+"'/></div>")),this.sideContent.append(this.loadingImage))},unLoading:function(b){this.hasReader()&&!b||!this.loadingImage||(this.loadingImage.css({display:"none"}),this.loadingImage.remove(),this.loadingImage=null)},restrict:function(){if(!this.restrictImage){this.restrictImage=$("<div class='loadingOuter'></div>");
var b=1==this.pageIndex?getMeta("og:image"):bookConfig.pageRestrictUrl;this.restrictImage.css({"background-image":"url("+b+")"});1==this.pageIndex?this.restrictImage.css({"background-size":"contain"}):this.restrictImage.css({"background-size":"auto"});this.mirrorRestrict();this.sideContent.append(this.restrictImage)}},unRestrict:mirrorRestrict:function(){if(this.isMirrorSide&&this.restrictImage){var b="scaleX(-1)";
bookConfig.FlipDirection&&(b="scaleY(-1)");this.restrictImage.css({"-webkit-transform":b,"-moz-transform":b,"-o-transform":b,"-ms-transform":b,opacity:.2})}},mirrorSide:fillPreviewImage:function(){var b=this,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return bookConfig.loadPreviewImage?b.isMirrorSide||window.sliderJS&&window.sliderJS[b.pageIndex-1]&&sliderJS[b.pageIndex-1].elements&&sliderJS[b.pageIndex-1].elements.length?e.jumpTo(0):e.yield(getPageDir(b.pageIndex,"previewPage",originTotalPageCount),3):e.return();c=e.yieldResult;c.startsWith("none")||(b.sideImage.css({"background-image":"url("+c+")","background-size":"contain","background-repeat":"no-repeat","background-position":"center"}),bookConfig.removeLoad&&(d=$("<img src='"+
c+"'/>"),d[0].onload=bind(b)));e.jumpToEnd()})},setFlipShadow:function(b,c,d){this.pageFlipShadow&&this.pageFlipShadow.flip(b,c,d)},addFlipShadow:function(){bookConfig.HardInnerPageEnable?this.addHardFlipShadow():this.pageFlipShadow||(this.pageFlipShadow="magazine"==bookConfig.pageHighlightType?new PageHighlightsFlipShadow(this.side,this.pageIndex):new PageFlipShadow(this.side,this.pageIndex))},addHardFlipShadow:clearFlipShadow:resizeFlipShadow:function(b,c){this.pageFlipShadow&&this.pageFlipShadow.resize(b,c)},centerPage:setLeftOrRight:function(b){(this.isLeft=b)?this.side.attr("class","left-side"):this.side.attr("class","right-side")},setUpOrDown:renderPage:hideMiddleShadow:function(){this.rendering&&this.rendering.hideMiddleShadow()},fillContent:function(b){"restrict"==BookRestrict.isRestrictPage(this.pageIndex)?this.restrict():(this.restrictImage&&this.unRestrict(),this.fillPage(this.pageIndex,
b))},fillPage:function(b,c,d){this.isMirrorSide&&!bookConfig.showMirrorSide||b!=this.pageIndex||this.originalImageLoaded||(d||(d="normal",this.isMirrorSide&&(d="thumb")),"normal"==d&&(bookConfig.usePdfJs?(b=function(e,f,g){this.pageBackground.load.renderCnvas(e,f,g,this.pageIndex,this.pageWidth,this.pageHeight,this.initContents.bind(this))}.bind(this),this.initPageBackground(c,"normal",b)):this.initPageBackground(c,"normal",this.initContents.bind(this))),"thumb"==d&&(this.type="thumb",this.initPageBackground(c,
"thumb",this.onMirrorSideLoaded.bind(this))))},initPageBackground:function(b,c,d){if(!this.pageBackground||b)this.pageBackground=new PageBackground(this.pageIndex,c,d,this.pageWidth,this.pageHeight,this.isMirrorSide,this.sideImage),this.imageURL=this.pageBackground.imageURL},initContents:function(b,c,d){imageLoaded[this.pageIndex]=!0;this.isReaderConfigLoaded(function(){try{this.onOriginalImageLoaded(b,c,d)}catch(e){}}.bind(this))},onMirrorSideLoaded:function(b,c,d){b&&(this.originalImageLoaded=!1,
this.unLoading(),this.unRestrict(),isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage&&this.sideImage.empty().append(d))},onOriginalImageLoaded:function(b,c,d){var e=this,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(!b)return h.return();e.originalImageLoaded=!0;e.unLoading();e.unRestrict();if(e.sideImage&&("string"==typeof c&&!c.startsWith("none")||
"string"!=typeof c))if("string"==typeof c||"object"==typeof c&&0<=c[0].indexOf(".zip"))isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),e.sideImage.empty().append(d);else for(e.sideImage.empty(),f=0;f<d.length;f++)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),e.sideImage.append(d[f]),
e.imageWidth=d[f][0].naturalWidth,e.imageHeight=d[f][0].naturalHeight;g=fitPageWidthHeight(e.pageWidth,e.pageHeight,e.imageWidth,e.imageHeight);e.pageAttachments||(e.pageAttachments=new PageAttachmentsParser(e.sideContent,g.x,g.y,e.pageWidth,e.pageHeight,e.pageIndex,e.bookType,e,bind(e)));h.jumpToEnd()})},isReaderConfigLoaded:function(b){try{var c=(window.readerConfig||window.readerConfigLoaded)&&
c();var d=window.setInterval(100)}catch(e){}},onPageLoaded:function(){var b=this.pageIndex;BookInfo.getBook().getRealBookIndex&&(b=BookInfo.getBook().getRealBookIndex(this.pageIndex));BookInfo.getBook().onBookPageLoaded(b)},enterSide:function(){this.pageAttachments&&this.pageAttachments.enterSide();this.pageBackground&&this.pageBackground.enterSide();window.vuePopDom&&window.vuePopDom.enterPage&&window.vuePopDom.enterPage()},leaveSide:function(){this.pageAttachments&&
this.pageAttachments.leaveSide();this.pageBackground&&this.pageBackground.leaveSide();window.vuePopDom&&window.vuePopDom.leavePage&&window.vuePopDom.leavePage()},initSelectTextEvent:function(){this.pageAttachments&&this.pageAttachments.select()},destroySelect:function(){this.pageAttachments&&this.pageAttachments.destroySelect()},initMagnifierEvent:function(){this.pageAttachments&&this.pageAttachments.initMagnifierEvent()},destroyMagnifier:function(){this.pageAttachments&&this.pageAttachments.destroyMagnifier()},
pauseAnimation:function(){this.pageAttachments&&this.pageAttachments.pauseAnimation()},startAnimation:function(){this.pageAttachments&&this.pageAttachments.startAnimation()},resetSlider:function(){this.pageAttachments&&this.pageAttachments.resetSlider()},destroySlider:function(){this.pageAttachments&&this.pageAttachments.destroySlider()},addHistoryTexts:function(){this.pageAttachments&&this.pageAttachments.addHistoryTexts()},highlightSearch:function(){this.pageAttachments&&this.pageAttachments.highlightSearch()},
clearHighlight:function(){this.pageAttachments&&this.pageAttachments.clearHighlight()},initReaderOrSlider:function(){this.pageAttachments&&this.pageAttachments.initReaderOrSlider()},onResize:function(b,c){this.resizePage(b,c);this.resizeFlipShadow(b,c);if(this.rendering)this.rendering.onResize(b,c);this.pageAttachments&&(b=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.imageWidth,this.imageHeight),this.pageAttachments.onResize(b.x,b.y,this.pageWidth,this.pageHeight))},resizePage:zoomInSideImage:function(){this.pageBackground.zoomIn()},zoomOutSideImage:function(){this.pageBackground.zoomOut()},switchLargeImage:switchNormalImage:onSwitchImage:function(b,c,d){if(!this.originalImageLoaded)this.initContents(b,c,d);else if(b)if("string"==typeof c)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||
$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage.empty().append(d),this.imageWidth=d.naturalWidth,this.imageHeight=d.naturalHeight;else{this.sideImage.empty();for(b=0;b<d.length;b++)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage.append(d[b]);this.imageWidth=d[b][0].naturalWidth;this.imageHeight=d[b][0].naturalHeight}},
resizeSvg:).extend(Side),PageAttachment=Class({create:function(){},onResize:function(){},enterSide:function(){},leaveSide:function(){}}),PageMagnifier=Class({create:initMagnifierEvent:destroyMagnifier:onResize:function(){}}).extend(PageAttachment),PageHighlight=Class({create:function(b,c,d,e,f,g){this.$container=b;this.pageIndex=d;this.width=e;this.height=f;this.$parent=c;this.bookType=g;this.highlightSearch()},highlightSearch:function(){var b=this,c,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){global.slideHightLightList[b.pageIndex]&&b.searchTxtFromSlider();c=getSearchRealPageIndex(b.pageIndex);if(-1==
c)return h.return();d=!1;for(e=0;e<positionForPages.length;e++)if(positionForPages[e]&&positionForPages[e].page&&positionForPages[e].page==c){d=!0;break}if(d)return highlightSearchFun(b.$container,c),h.jumpTo(0);f=String.format(bookConfig.searchPositionJS,c);1<b.pageIndex&&(f=f.replace("[1]","["+c+"]"));g=/\.*\/?(\w+\/)*\w+(\[|\()?\d+(\]|\))?\.js/gi;return f.match(g)?h.yield(getArticleImage(fixURLValue(f)),3):h.return()}f=h.yieldResult;if(!f)return h.return();loadJavascript(f,bind(b),function(){});h.jumpToEnd()})},clearHighlight:function(){this.$container.css({"background-image":""});this.$container.remove();clearHighlightFun(this.$container);this.clearSliderHighLight()},searchTxtFromSlider:function(){if(BookInfo.getBook().pageArray[this.pageIndex]&&BookInfo.getBook().pageArray[this.pageIndex].page&&BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments&&BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments.pageAnimation){var b=BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments.pageAnimation;
b&&b.searchSliderHighLight()}},clearSliderHighLight:function(){if(BookInfo.getBook().pageArray[this.pageIndex]&&BookInfo.getBook().pageArray[this.pageIndex].page&&BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments&&BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments.pageAnimation){var b=BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments.pageAnimation;b&&b.clearSliderHighLight()}},onResize:function(){}}).extend(PageAttachment),PageAnnotation=Class({create:enterSide:function(){isBelowIE9()&&$(this.$container).css({"background-image":"url('aaaa.a')"});global.annotationCookie&&this.bookType==BookInfo.getBookType()&&global.annotationCookie.repaintCookie(this.width,
this.height,this.pageIndex-1,this.$container)},leaveSide:function(){},onResize:function(b,c){if(b!=this.width||c!=this.height)this.width=b,this.height=c,this.pageAnnotation.onResize(b,c,1,this.$container),global.annotationCookie&&this.bookType==BookInfo.getBookType()&&global.annotationCookie.repaintCookie(b,c,this.pageIndex-1,this.$container)}}).extend(PageAttachment),PageSelect=Class({create:initEvent:onTap:destroySelect:selectText:function(b){if(!BookInfo.getBook().flipping&&
global.positionForPages){var c;for(c=0;c<positionForPages.length;c++)if(positionForPages[c]&&positionForPages[c].page&&positionForPages[c].page==getSearchRealPageIndex(this.pageIndex)){var d=positionForPages[c].positions;break}this.$container.empty();if(d){this.searchTextHighlight||(this.searchTextHighlight=new SearchTextHighlight(this.width,this.height,rightToLeft),this.searchTextHighlight.loadFromPage(d),this.highlightDOM=new SearchHighlightDOM(this.$container));d=this.getArea(b);d=this.searchTextHighlight.selectText(d);
this.highlightText="";if(d){c=d.getRects();for(var e=0;e<c.length;){for(var f=[],g=0;4>g;g++)f[g]=c[e+g];this.highlightDOM.addHighlight(f);e+=4}this.highlightText=d.getText()}"panend"==b.type&&(isPhone()||isPad()?this.highlightText&&(global.phoneCopyForm||(phoneCopyForm=new CopyForm({parent:tmpContainer,formType:"copy",rightToLeft:rightToLeft})),phoneCopyForm.fillText(this.highlightText),phoneCopyForm.show()):(d=b.srcEvent.pageX,b=b.srcEvent.pageY,this.hint||(this.hint=new divHint(getLanguage("lblCopy",
"Copy"),d,b),this.hint.addClass("hint_active"),this.hint.instance.bind(_event._end,bind(this))),this.highlightText?(this.hint.show(d,b),this.hint.moveto(d,b)):this.hint.hide()))}}},copyToClipboard:getArea:getRealPoint:onResize:function(){}}).extend(PageAttachment),PageAnimation=Class({create:pauseAnimation:function(){},startAnimation:function(){},enterSide:function(){},leaveSide:function(){},
onResize:resetSlider:function(){},destroySlider:function(){},initReaderOrSlider:function(){}}),PageEditorLoad=Class({statics:{isLoading:!1,isCompleted:function(){try{if(window.PageItem&&window.PageItem.HtmlVideo)return!0}catch(b){}}}}),PageHisliderLoad=Class({statics:{isLoading:!1,isCompleted:function(){try{if(window.hiSliderFactory)return!0}catch(b){}}}}),PageEditorAnimation=Class({create:function(b){this.$container=b.$container;this.pageIndex=b.pageIndex;this.page=b.page;this.width=
b.width;this.height=b.height;this.$parent=b.$parent;this.bookType=b.bookType;this.callback=b.callback;this.Items=new ObjectPool;this.needLoadResource()?this.loadResource():this.initPageEditor()},needLoadResource:function(){if(PageEditorLoad.isCompleted())return!0;for(var b=this.getPageAnnos()[this.pageIndex-1],c=0;c<b.length;c++){var d=b[c];if(d)if(d.annotype==PageEditor.AnnoType.ANNO_LINK){if(d.action.actionType!=PageEditor.ActionType.GOTO_PAGE&&d.action.actionType!=PageEditor.ActionType.OPEN_URL&&
d.action.actionType!=PageEditor.ActionType.SHOW_ARTICLE)return!0;break}else return!0}return!1},getPageAnnos:function(){var b=global.pageEditor;b instanceof Array||(b=b.pageAnnos);if(this.hasInverseEditor()){var c=b;b.length<inverseEditor.length&&(c=inverseEditor);for(var d=0;d<c.length;d++){b[d]||(b[d]=[]);inverseEditor[d]||(inverseEditor[d]=[]);var e=inverseEditor[d];e&&e.length&&(e=e.map(bind(this)));b[d]=b[d].concat(e);inverseEditor[d]=
[]}}return b},hasInverseEditor:loadResource:function(){var b=this;this.loadInterval=window.setInterval(50)},initPageEditor:function(){this.initInterval=window.setInterval(function(){global.PageEditorParser&&window.clearInterval(this.initInterval);global.PageEditorParser&&(this.Items=(new PageEditorParser(this.$container,
this.width,this.height)).createItemsForPage(this.pageIndex),this.Items.find("Youtube").each(function(b){b.hide()}),this.preventMMBackEvent(),this.onResize(this.width,this.height),this.callback())}.bind(this),100)},preventMMBackEvent:function(){document.body.ondragstart=function(){return!1};var b="mousedown touchstart pointerdown mouseover mousemove";if(isPhone()||isPad())b="mousedown touchstart mouseover mousemove";$(this.$container).on(b,".hi-action",function(c){c.stopPropagation()});$(this.$container).on(b,
".slider-action",function(c){c.stopPropagation()});$(this.$container).on(b,".flip-action",function(c){c.stopPropagation()})},pauseAnimation:startAnimation:enterSide:function(){this.Items.each(},leaveSide:function(){this.Items.each(},onResize:function(b,c){this.width=b;this.height=c;this.Items.each(},destroySlider:).extend(PageAnimation),PageHislider=Class({create:function(b){this.$container=b.$container;this.pageIndex=b.pageIndex;this.page=b.page;this.width=b.width;this.height=b.height;this.$parent=b.$parent;this.bookType=b.bookType;this.callback=b.callback;this.initSlider()},initSlider:function(){window.hiSliderFactory&&(this.slider=window.hiSliderFactory({container:this.$container,slide:sliderJS[this.pageIndex-
1],initialWidth:this.width,initialHeight:this.height,focusOnFunc:this.focusOn.bind(this),resetFocusFunc:this.resetFocus.bind(this)}),this.slider.resize(this.width,this.height),this.preventMMBackEvent(),setTimeout(this.callback.bind(this),100))},preventMMBackEvent:function(){document.body.ondragstart=var b="mousedown touchstart pointerdown mouseover mousemove";if(isPhone()||isPad())b="mousedown touchstart mouseover mousemove";$(this.$container).on(b,".hi-action",function(c){c.stopPropagation()});
$(this.$container).on(b,".slider-action",function(c){c.stopPropagation()});$(this.$container).on(b,".flip-action",function(c){c.stopPropagation()})},playSlider:function(){this.slider&&this.slider.play()},replaySlider:function(){this.slider&&this.slider.replay()},resetSlider:destroySlider:function(){this.slider&&(this.slider.destoryed&&this.slider.destoryed(),this.slider=null,this.$container.find(".app").remove())},pauseAnimation:function(){this.slider&&
(this.pauseSlider(),this.slider&&this.slider.startFlip&&this.slider.startFlip())},startAnimation:function(){this.slider&&(this.playSlider(),this.slider&&this.slider.endFlip&&this.slider.endFlip())},pauseSlider:function(){this.slider&&this.slider.pause()},onResize:function(b,c){this.width=b;this.height=c;this.slider&&this.bookType===BookInfo.getBookType()&&this.slider.resize(b,c)},enterSide:function(){this.slider&&this.replaySlider();this.slider&&this.slider.endFlip&&this.slider.endFlip()},leaveSide:focusOn:function(b){this.option=b;this.focusIng=!0;var c=b.pageWidth,d=b.duration/1E3,e=this.width/(b.width*this.width/c);c=-b.left*e*this.width/c;b=-b.top*e*this.height/b.pageHeight;e=Math.max(1,e);c=Number.between(c,(1-e)*this.width,0);b=Number.between(b,(1-e)*this.height,0);e=transformCSS({origin:{x:0,y:0},tran:{x:c,y:b},scale:e});animateOnce(this.$parent,e,d,function(){},"%stransform")},resetFocus:).extend(PageAnimation),PageReader=Class({sliderPlayerArray:[],create:initReader:function(){this.slider||this.isAddReader||(this.isAddReader=!0,this.$container.addClass(this.getBookPageStr()+
"_animatePanel_"+(this.pageIndex-1)),this.$readerContainer=$("<div class='reader reader_"+(this.pageIndex-1)+"' style='width:100%;height:100%;position:absolute;left:0;top:0;'></div>"),this.$container.append(this.$readerContainer),this.$container.show(),this.createVueDom())},createVueDom:function(){var b=BookInfo.getCurrentPages();window.setVueDom({lazy:-1===b.indexOf(this.pageIndex),dom:"."+this.getBookPageStr()+"_animatePanel_"+(this.pageIndex-1)+" .reader_"+(this.pageIndex-1),pageStr:this.getBookPageStr(),
pageIndex:this.pageIndex-1,width:this.width,height:this.height}).then(function(c){this.slider=c;this.slider.resize(this.width,this.height);c.reset();this.page.unLoading(!0);this.slider.getAutoPlayArray&&(this.sliderPlayerArray=this.slider.getAutoPlayArray());this.callback()}.bind(this))},getBookPageStr:function(){var b="double";1===this.bookType&&(b="single");return b},playSlider:function(){this.clearSliderTimeout();this.slider?(this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null),
this.slider.play()):this.playTimeout=setTimeout(this.playSlider.bind(this),100)},replaySlider:function(){this.clearSliderTimeout();this.slider?(this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null),this.slider.replay()):this.playTimeout=setTimeout(this.replaySlider.bind(this),100)},destroySlider:function(){this.slider&&(this.slider.destoryed&&this.slider.destoryed(),this.slider=null,this.isAddReader=!1,this.$container.find(".app").remove())},pauseAnimation:function(){this.pauseSlider();
this.slider&&this.slider.startFlip&&this.slider.startFlip()},startAnimation:pauseSlider:function(){this.slider&&this.slider.pause()},onResize:function(b,c){this.width=b;this.height=c;this.slider&&this.bookType===BookInfo.getBookType()&&this.slider.resize(b,c)},sliderEnterPage:function(){window.vuePopDom&&window.vuePopDom.sliderEnterPage&&window.vuePopDom.sliderEnterPage()},sliderLeavePage:enterSide:function(){this.slider&&(this.replaySlider(),this.slider&&this.slider.endFlip&&this.slider.endFlip())},leaveSide:function(){this.slider&&(this.slider.startFlip&&this.slider.startFlip(),this.sliderLeavePage())},searchSliderHighLight:function(){this.slider&&global.search_Text&&this.slider.searchText(search_Text)},clearSliderHighLight:function(){this.slider&&this.slider.clearHighLight()},clearSliderTimeout:).extend(PageAnimation),hddr=[],a=hddr.soo2,i=0,PageAnimationFactory=Class({create:function(b){this.$container=b.$container;this.pageIndex=b.pageIndex;this.page=b.page;this.width=b.width;this.height=b.height;this.$parent=b.$parent;this.bookType=b.bookType;this.callback=b.callback;this.option=b;this.isHiddenEditor()||this.initAnimation()},initAnimation:function(){this.hasReader()?window.setVueDom?this.initReader():this.loadPageReader():this.hasPageEditor()&&
(this.pageEditor=new PageEditorAnimation(this.option));this.hasSlider()&&(window.hiSliderFactory?this.initSlider():this.loadPageSlider())},initReader:function(){this.pageReader||BookInfo.getBookType()!=this.bookType||this.pageReader||(this.pageReader=new PageReader(this.option))},initSlider:function(){this.hasSlider()&&!this.pageHislider&&(this.pageHislider=new PageHislider(this.option))},initReaderOrSlider:function(){this.hasReader()&&(window.setVueDom?this.initReader():this.loadPageReader());this.hasSlider()&&
(window.hiSliderFactory?this.initSlider():this.loadPageSlider())},loadPageReader:function(){var b=this;this.loadReaderInterval=window.setInterval(function(){window.setVueDom&&(b.destroyReaderInterval(),b.initReader())},100)},destroyReaderInterval:function(){this.loadReaderInterval&&(window.clearInterval(this.loadReaderInterval),this.loadReaderInterval=null)},loadPageSlider:function(){var b=this;this.loadSliderInterval=window.setInterval(100)},destroySliderInterval:hasPageEditor:function(){if(this.judgeHasPageEditor()||window.inverseEditor&&window.inverseEditor.length&&window.inverseEditor[this.pageIndex-1]&&window.inverseEditor[this.pageIndex-1].length)return!0},judgeHasPageEditor:function(){var b=this.pageIndex-1;return window.pageEditor&&(!pageEditor.pageAnnos&&pageEditor[b]&&0<pageEditor[b].length||
pageEditor.pageAnnos&&pageEditor.pageAnnos[b]&&0<pageEditor.pageAnnos[b].length)?!0:!1},isHiddenEditor:function(){return bookConfig.previewPagesArray&&Array.isArray(bookConfig.previewPagesArray)&&-1===bookConfig.previewPagesArray.indexOf(this.pageIndex)?!0:!1},hasReader:function(){return window.readerConfig&&0<window.readerConfig.pages.length&&window.readerConfig.pages.length>=this.pageIndex&&(this.hasReaderItems()||window.inverseEditor&&window.inverseEditor.length&&window.inverseEditor[this.pageIndex-
1]&&window.inverseEditor[this.pageIndex-1].length)?!0:!1},hasReaderItems:function(){var b=window.readerConfig.pages[this.pageIndex-1];return b&&(b.insertPageLink&&b.insertPageLink.length||b.items&&b.items.length||b.hasSceneAnime||b.background&&b.background.isEnable||b.camera&&b.camera.isEnable||b.foreground&&b.foreground.isEnable||b.subtitle&&b.subtitle.isEnable)},hasSlider:function(){return window.sliderJS&&window.sliderJS[this.pageIndex-1]&&window.sliderJS[this.pageIndex-1].elements&&0<sliderJS[this.pageIndex-
1].elements.length?!0:!1},onResize:function(b,c){this.width=b;this.height=c;if(this.pageEditor)this.pageEditor.onResize(b,c);if(this.pageHislider)this.pageHislider.onResize(b,c);if(this.pageReader)this.pageReader.onResize(b,c)},searchSliderHighLight:function(){this.pageReader&&this.pageReader.searchSliderHighLight()},clearSliderHighLight:function(){this.pageReader&&this.pageReader.clearSliderHighLight()},enterSide:function(){this.pageEditor&&this.pageEditor.enterSide();this.pageHislider&&this.pageHislider.enterSide();
this.pageReader&&this.pageReader.enterSide();global.frmSearch&&global.frmSearch.visible&&global.search_Text&&this.searchSliderHighLight()},leaveSide:function(){this.pageEditor&&this.pageEditor.leaveSide();this.pageHislider&&this.pageHislider.leaveSide();this.pageReader&&this.pageReader.leaveSide();global.frmSearch&&global.frmSearch.visible&&global.search_Text&&this.clearSliderHighLight()},pauseAnimation:function(){this.pageEditor&&this.pageEditor.pauseAnimation();this.pageHislider&&this.pageHislider.pauseAnimation();
this.pageReader&&this.pageReader.pauseAnimation()},startAnimation:function(){this.pageEditor&&this.pageEditor.startAnimation();this.pageHislider&&this.pageHislider.startAnimation();this.pageReader&&this.pageReader.startAnimation()},resetSlider:destroySlider:function(){this.pageEditor&&this.pageEditor.destroySlider();this.pageHislider&&this.pageHislider.destroySlider();
this.pageReader&&this.pageReader.destroySlider();this.pageHislider=this.pageReader=null;this.destroyReaderInterval();this.destroySliderInterval()}}),PageAttachmentsFactory=Class({createAttachment:function(b,c,d,e,f,g,h,k,l){k=this.initOptions(b,c,d,e,f,g,h,k,l);switch(b){case "animation":var n=new PageAnimationFactory(k);break;case "annotation":n=new PageAnnotation(c,g,f,d,e,h);break;case "highlight":n=new PageHighlight(c,g,f,d,e,h);break;case "magnifier":n=new PageMagnifier(c,g,f,d,e,h);break;case "select":n=
new PageSelect(c,g,f,d,e,h)}return n},initOptions:function(b,c,d,e,f,g,h,k,l){return{$container:c,pageIndex:f,page:k,width:d,height:e,$parent:g,bookType:h,callback:l}}}),PageAttachmentsParser=function(b,c,d,e,f,g,h,k,l){this.parent=b;this.width=c;this.page=k;this.height=d;this.pageWidth=e;this.pageHeight=f;this.pageIndex=g;this.bookType=h;this.callback=l;this.createAttachmentsForPage()};
PageAttachmentsParser.prototype.createAttachmentsForPage=function(){this.Items=new ObjectPool;this.factory=new PageAttachmentsFactory;this.isHiddenEditor()||getArticleEditor().then(this.createAnimation.bind(this));this.createAnnotation();this.highlightSearch()};PageAttachmentsParser.prototype.isHiddenEditor=function(){return!bookConfig.isPreview||bookConfig.previewPages&&-1!==(Array.isArray(bookConfig.previewPages)&&bookConfig.previewPages.indexOf(this.pageIndex))?!1:!0};
PageAttachmentsParser.prototype.createAnimation=function(){this.hasAnimation()&&(this.createAnimationDom(),this.pageAnimation=this.factory.createAttachment("animation",this.$animation,this.pageWidth,this.pageHeight,this.pageIndex,this.parent,this.bookType,this.page,function(){this.callback();this.onResizeAnimation(this.width,this.height,this.pageWidth,this.pageHeight)}.bind(this)),this.Items.add(this.pageAnimation))};
PageAttachmentsParser.prototype.createAnimationDom=function(){this.$animation||(this.$animation=$("<div id='animation"+this.bookType+"-"+this.pageIndex+"' style='width:100%;height:100%;position:absolute;left:0;top:0;z-index:4;'></div>"),this.$animation.css({width:this.pageWidth+"px",height:this.pageHeight+"px",margin:"auto"}),this.parent.append(this.$animation))};
PageAttachmentsParser.prototype.hasAnimation=function(){var b=this.pageIndex-1;return this.isHiddenEditor()?!1:global.pageEditor&&(!pageEditor.pageAnnos&&pageEditor[b]&&0<pageEditor[b].length||pageEditor.pageAnnos&&pageEditor.pageAnnos[b]&&0<pageEditor.pageAnnos[b].length)||global.sliderJS&&sliderJS[b]&&0<sliderJS[b].elements.length||global.inverseEditor&&global.inverseEditor.length&&global.inverseEditor[b]&&global.inverseEditor[b].length||window.assistantConfig||global.readerConfig&&global.readerConfig.pages&&
0<global.readerConfig.pages.length&&this.hasReaderItems()?!0:!1};
PageAttachmentsParser.prototype.hasReaderItems=function(){return window.readerConfig.pages[this.pageIndex-1]&&(window.readerConfig.pages[this.pageIndex-1].insertPageLink&&window.readerConfig.pages[this.pageIndex-1].insertPageLink.length||window.readerConfig.pages[this.pageIndex-1].items&&window.readerConfig.pages[this.pageIndex-1].items.length||window.readerConfig.pages[this.pageIndex-1].hasSceneAnime||window.readerConfig.pages[this.pageIndex-1].background&&window.readerConfig.pages[this.pageIndex-
1].background.isEnable||window.readerConfig.pages[this.pageIndex-1].camera&&window.readerConfig.pages[this.pageIndex-1].camera.isEnable||window.readerConfig.pages[this.pageIndex-1].foreground&&window.readerConfig.pages[this.pageIndex-1].foreground.isEnable||window.readerConfig.pages[this.pageIndex-1].subtitle&&window.readerConfig.pages[this.pageIndex-1].subtitle.isEnable)};
PageAttachmentsParser.prototype.isHiddenEditor=function(){return!bookConfig.isPreview||bookConfig.previewPages&&-1!==(Array.isArray(bookConfig.previewPages)&&bookConfig.previewPages.indexOf(this.pageIndex))?!1:!0};
PageAttachmentsParser.prototype.select=
PageAttachmentsParser.prototype.destroySelect=function(){this.Items.find("PageSelect").each(function(b){b.destroySelect()});this.Items.remove(this.pageSelect);this.$select=void 0;this.pageSelect=null};
PageAttachmentsParser.prototype.initMagnifierEvent=PageAttachmentsParser.prototype.destroyMagnifier=function(){this.Items.find("PageMagnifier").each(function(b){b.destroyMagnifier()});this.Items.remove(this.pageMagnifier);this.$magnifier=void 0;this.pageMagnifier=null};PageAttachmentsParser.prototype.addHistoryTexts=function(){this.Items.find("PageAnnotation").each(function(b){b.enterSide()})};
PageAttachmentsParser.prototype.highlightSearch=function(){if(bookConfig.SearchButtonVisible&&window.frmSearch&&!this.pageHighlight){var b=!0;window.frmSearch&&frmSearch.visible&&0<frmSearch.getList().length&&(b=!1);window.frmSearch&&(isPhone()||isPad())&&window.frmSearch.input.val()&&(b=!1);b||(this.$highlight=$("<div id='highlight"+this.bookType+"-"+this.pageIndex+"' style='pointer-events:none;width:100%;height:100%;position:absolute;left:0;top:0;z-index:4;' class='kong'></div>"),this.$highlight.css({width:this.width+
"px",height:this.height+"px",bottom:0,right:0,margin:"auto"}),this.pageHighlight=this.factory.createAttachment("highlight",this.$highlight,this.width,this.height,this.pageIndex,this.parent,this.bookType),this.Items.add(this.pageHighlight),this.parent.append(this.$highlight))}};PageAttachmentsParser.prototype.clearHighlight=
PageAttachmentsParser.prototype.createAnnotation=function(){if(bookConfig.AnnotationButtonVisible&&!this.pageAnnotation){this.createAnimationDom();var b=fitPageWidthHeight(this.pageWidth,this.pageHeight,bookConfig.largePageWidth,bookConfig.largePageHeight);this.$annotation=this.$animation;this.pageAnnotation=this.factory.createAttachment("annotation",this.$annotation,b.x,b.y,this.pageIndex,this.parent,this.bookType);this.Items.add(this.pageAnnotation);this.onResizeAnimation(this.width,this.height,
this.pageWidth,this.pageHeight)}};PageAttachmentsParser.prototype.enterSide=function(){this.Items.each(function(b){b.enterSide()});global.assistant&&global.assistant.refresh()};PageAttachmentsParser.prototype.leaveSide=function(){this.Items.each(function(b){b.leaveSide()});this.destroySelect();global.annotationPannel&&global.annotationPannel.resetAnnoConfig()};PageAttachmentsParser.prototype.pauseAnimation=function(){this.Items.find("PageAnimation").each(function(b){b.pauseAnimation()})};
PageAttachmentsParser.prototype.startAnimation=function(){this.Items.find("PageAnimation").each(function(b){b.startAnimation()})};PageAttachmentsParser.prototype.resetSlider=function(){this.Items.find("PageAnimation").each(function(b){b.resetSlider()})};PageAttachmentsParser.prototype.destroySlider=PageAttachmentsParser.prototype.initReaderOrSlider=
PageAttachmentsParser.prototype.removeAttachment=
PageAttachmentsParser.prototype.onResize=function(b,c,d,e){this.width=b;this.height=c;this.pageWidth=d;this.pageHeight=e;this.onResizeAnimation(b,c,d,e);this.onResizeAnnotation(b,c,d,e);this.$select&&this.$select.css({width:this.width+"px",height:this.height+"px"});this.$magnifier&&this.$magnifier.css({width:this.width+"px",height:this.height+"px"});this.$highlight&&this.$highlight.css({width:this.width+"px",height:this.height+"px"});this.Items.each(function(f){if(f!=this.pageAnimation&&f!=this.pageAnnotation)f.onResize(b,
c)}.bind(this))};PageAttachmentsParser.prototype.onResizeAnimation=function(b,c,d,e){this.pageAnimation&&(b=fitPageWidthHeight(d,e,bookConfig.largePageWidth,bookConfig.largePageHeight),this.$animation.css({width:d+"px",height:e+"px",left:(d-b.x)/2+"px",top:(e-b.y)/2+"px"}),this.pageAnimation.onResize(b.x,b.y))};
PageAttachmentsParser.prototype.onResizeAnnotation=function(b,c,d,e){this.pageAnnotation&&(b=fitPageWidthHeight(d,e,bookConfig.largePageWidth,bookConfig.largePageHeight),this.$annotation.css({width:b.x+"px",height:b.y+"px",left:(d-b.x)/2+"px",top:(e-b.y)/2+"px"}),this.pageAnnotation.onResize(b.x,b.y))};
PageAttachmentsParser.prototype.resizeOnMobile=
PageAttachmentsParser.prototype.highDefinition=
PageAttachmentsParser.prototype.scale=function(b,c){var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,bookConfig.largePageWidth,bookConfig.largePageHeight).y/c;this.$animation.css({width:b+"px",height:c+"px",left:(this.pageWidth-b*d)/2+"px",top:(this.pageHeight-c*d)/2+"px"});b=!1;if(isPhone()||isPad())b=!0;d=transformCSS({scale:d,origin:{x:0,y:0}},b);this.$animation.css(d)};var BookPage=Class({}).extend(Page),imageLoaded=[];bdor[33]=bdor[36]=36;
global.bdor[35]=);global.bdor[37]=80;
var PageInterface=Class({zIndex:0,pageIndex:0,visible:!1,pageWidth:0,pageHeight:0,maskWidth:0,maskHeight:0,pageMask:null,page:null,isSingleBook:!1,bookType:0,isHardPage:!1,$page:null,opacity:1,create:newPage:setCSSByStyle:function(b){this.$page.css(b)},setCSSByName:setLeftOrRight:virtual_function,
setUpOrDown:virtual_function,setVisible:function(b){this.$page&&(bookConfig.HardInnerPageEnable?b?this.$page.show():this.$page.hide():b?this.$page.css("visibility","visible"):this.$page.css("visibility","hidden"));this.visible=b},onResize:virtual_function,getWidth:function(){return this.width},setZIndex:getZIndex:function(){return this.zIndex},beginToFlip:virtual_function,enterSide:function(){this.page&&this.page.enterSide()},leaveSide:function(){this.page&&
this.page.leaveSide()},remove:zoomInSideImage:function(){this.page&&this.page.zoomInSideImage()},zoomOutSideImage:function(){this.page&&this.page.zoomOutSideImage()},switchLargeImage:function(){this.page&&this.page.switchLargeImage()},switchNormalImage:function(b){this.page&&this.page.switchNormalImage(b)},resizeSvg:function(b,c){this.page&&this.page.resizeSvg(b,c)},loading:function(){this.page&&this.page.loading()},
mirrorSide:function(){this.page&&this.page.mirrorSide()},fillPreviewImage:function(){this.page&&this.page.fillPreviewImage()},setFlipShadow:addFlipShadow:function(){},clearFlipShadow:function(){this.page&&this.page.clearFlipShadow()},addAttachment:function(){this.page&&this.page.addAttachment()},fillContent:function(){this.page&&this.page.fillContent()},fillPage:initSelectTextEvent:function(){this.page&&
this.page.initSelectTextEvent()},destroySelect:function(){this.page&&this.page.destroySelect()},initMagnifierEvent:function(){this.page&&this.page.initMagnifierEvent()},destroyMagnifier:function(){this.page&&this.page.destroyMagnifier()},pauseAnimation:function(){this.page&&this.page.pauseAnimation()},startAnimation:function(){this.page&&this.page.startAnimation()},addHistoryTexts:highlightSearch:function(){this.page&&this.page.highlightSearch()},
clearHighlight:function(){this.page&&this.page.clearHighlight()},resetSlider:function(){this.page&&this.page.resetSlider()},initReaderOrSlider:function(){this.page&&this.page.initReaderOrSlider()},destroySlider:);bdor[30]=bdor[38]=);
var NormalPage=Class({create:setMaskCss:onResize:setLeftOrRight:function(b){var c=this.isSingleBook?"left-single-mask-side":"left-mask-side";b||(c=this.isSingleBook?"right-single-mask-side":"right-mask-side");this.setCSSByName(c);this.page&&this.page.setLeftOrRight(b)},setUpOrDown:beginToFlip:function(){this.setMaskCss()}}).extend(PageInterface);bdor[39]=function(){return 8}();var bookMouseDown=!1,nBookStatu=0;global.bdor[200]=function(b){return bdor[b]};
var Book=Class({bookType:void 0,parent:null,width:0,height:0,flippingTime:600,currentPageIndex:1,rightToLeft:!1,pageArray:null,pageWidth:0,pageHeight:0,visible:!1,create:function(b){this.init(b)},init:function(b){this.options=b;this.parent=b.parent;this.currentPageIndex=b.currentPageIndex;this.flippingTime=1E3*b.flippingTime;this.rightToLeft=b.rightToLeft;this.pageArray=[]},getBookType:function(){return this.bookType},onBookPageLoaded:fillBookContent:function(){if(!this.flipping){var b=this.pageArray;if(b)for(var c=0;c<b.length;c++){var d=b[c];d&&d.fillContent(c)}if(b=this.pageBackArray)for(c=0;c<b.length;c++)(d=b[c])&&d.fillContent(c,!0)}},adjustBookPosition:function(){onStageResize()},getBook:virtual_function,getCurrentPages:initBook:virtual_function,gotoPage:virtual_function,
show:virtual_function,hide:virtual_function,onResize:virtual_function,destroy:virtual_function}),NoteAdd=Class({create:show:function(){this.noteAdd.css({display:"block"})},hide:function(){this.noteAdd.css({display:"none"})},getPageWidth:isFirstOrLastPage:isCurrentDoublePage:isLastPage:isFirstPage:onResize:function(b,c){var d=this.getPageWidth();if(d&&(b=d.width,c=d.height,bookConfig.AnnotationButtonVisible&&!isPhone()&&!isPad())){d=windowHeight-c-templateArea.getTopHeight()-templateArea.getBottomHeight();var e=BookInfo.isDoublePage(BookInfo.getBookType())?windowWidth-2*b-templateArea.getRightWidth()-templateArea.getLeftWidth():
windowWidth-b-templateArea.getRightWidth()-templateArea.getLeftWidth();if("slide"==bookConfig.FlipStyle.toLocaleLowerCase()&&BookInfo.isDoublePage(BookInfo.getBookType())&&this.isFirstOrLastPage()&&!this.isCurrentDoublePage()){var f=BookInfo.getBook().width,g=BookInfo.getBook().height;b=(f-b)/2;c=(g-c)/2;rightToLeft?24<b+e?this.noteAdd.css({display:"block",top:"0",right:"auto",left:b-24+"px"}):24<c+d?this.noteAdd.css({display:"block",top:c-24+"px",right:"auto",left:"0"}):this.noteAdd.css({display:"none"}):
24<b+e?this.noteAdd.css({display:"block",top:"0",right:b-24+"px",left:"auto"}):24<c+d?this.noteAdd.css({display:"block",top:c-24+"px",right:"0",left:"auto"}):this.noteAdd.css({display:"none"})}else 24>e/2&&24>d/2?this.noteAdd.css({display:"none"}):24<=e/2?rightToLeft?(this.noteAdd.css({display:"block",top:"0",right:"auto",left:"-22px"}),this.isLastPage()&&(this.isCurrentDoublePage()?this.noteAdd.css({left:"auto",right:"-22px"}):this.noteAdd.css({right:"-22px",left:"auto"}))):(this.noteAdd.css({display:"block",
top:"0",left:"auto",right:"-22px"}),this.isLastPage()&&(this.isCurrentDoublePage()?this.noteAdd.css({right:"-22px",left:"auto"}):this.noteAdd.css({left:"-22px",right:"auto"}))):rightToLeft?(this.noteAdd.css({display:"block",top:"-22px",right:"auto",left:"0"}),this.isLastPage()&&this.noteAdd.css({left:"auto",right:"0"})):(this.noteAdd.css({display:"block",top:"-22px",left:"auto",right:"0"}),this.isLastPage()&&this.noteAdd.css({right:"auto",left:"0"}))}}}),ZoomHint=Class({create:function(b){var c=this;
this.mouseInBook=new Point(-1,-1);this.oldMouseInBook=new Point(-1,-1);this.zoomHint=null;this.trackMousePoint=bookContainer.bind(_event._move,this.trackMousePoint);this.zoomHintTimer=window.setInterval(function(){if(bookType!=BookType.normal_book)c.clearZoomHintTimer();else if(null==c.zoomHint)if(-1==c.oldMouseInBook.x)c.oldMouseInBook.x=c.mouseInBook.x,c.oldMouseInBook.y=c.mouseInBook.y;
else if(c.oldMouseInBook.x==c.mouseInBook.x&&c.oldMouseInBook.y==c.mouseInBook.y){var d=c.globalToBook(!0,c.mouseInBook.x,c.mouseInBook.y);if(!(0>d.x||d.x>c.width||0>d.y||d.y>c.height)){d=c.mouseInBook.x+15;var e=c.mouseInBook.y;c.zoomHint=new divHint(getLanguage("lblDoubleClickToZoomIn","Double click to zoom in."),d,e,b);c.zoomHint.show();c.hideCount=0}}else c.oldMouseInBook.x=c.mouseInBook.x,c.oldMouseInBook.y=c.mouseInBook.y;else 2==++c.hideCount&&(bookContainer.unbind(_event._move,c.trackMousePoint),
c.zoomHint.destroy(),c.zoomHint=null,window.clearInterval(c.zoomHintTimer))},1500)},globalToBook:function(b,c,d){switch(bookType){case BookType.single_book:var e=Point(c-singlePageBook.getLeft(),d-singlePageBook.getTop());break;case BookType.normal_book:e=Point(c-((b?0:flipBook.getPageWidth())+flipBook.getLeft()),d-flipBook.getTop());break;case BookType.catalog_book:e=catalogBook.getTran(),b=c-((b?0:catalogBook.getPageWidth())+catalogBook.getCssLeft())-e.x,d=d-catalogBook.getCssTop()-e.y,e=Point(b,
d)}return e},clearZoomHintTimer:),TipsBox=Class({create:setTimer:resetTimer:setPosition:onResize:function(b,c){},getWidth:function(){return $(this.background).width()},getHeight:setCaption:function(b){this.background.html(b)},showTipsBox:function(){this.visible?this.resetTimer():(this.setTimer(),this.visible=!0,$(this.background).show(),
$(this.background).animate({opacity:this.option.opacity?this.option.opacity:.5},300))},hideTipsBox:),BookMiniFullscreen=Class({create:function(){},init:function(){if(!isIE()){if(isPhone()||isPad()){if(!bookConfig.isShowMobileBottomFullscreenPrompts)return}else if(MiniStyle.isMini()||bookConfig.hideMiniFullscreen)return;fullScreenApi.supportsFullScreen&&fullScreenApi.isFullScreen()||
this.miniFullScreen||(this.miniFullScreen=$("<div class='miniFullscreen' id='miniFullscreen'></div>"),this.miniFullScreen.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),this.onResize(),bookContainer.append(this.miniFullScreen),this.miniFullscreenEnter=!1,this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout),this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),3E3),this.initMiniFullScreenEvent())}},initMiniFullScreenEvent:removeMiniFullScreen:function(){if(this.miniFullScreen&&!this.miniFullscreenEnter){var b={alpha:.7};$(b).animate({alpha:0},{duration:300,easing:"easeOutSine",step:function(){this.miniFullScreen&&this.miniFullScreen.css({opacity:b.alpha})}.bind(this),complete:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen&&(this.miniFullScreen=void 0)}.bind(this)})}},
onResize:function(){if(this.miniFullScreen)if(!MiniStyle.isMini()||isPhone()||isPad()){var b=BookInfo.top();this.miniFullScreen.css({top:b+BookInfo.height()-80+"px"})}else this.miniFullScreen.remove(),this.miniFullScreen=void 0},show:function(){this.miniFullScreen&&this.miniFullScreen.show()},hide:function(){this.miniFullScreen&&this.miniFullScreen.hide()},remove:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen=void 0},setStyle:function(b){b&&this.miniFullScreen&&this.miniFullScreen.css(b)}}),
BookPageNumberForFlip=Class({create:function(){},init:initMiniFullScreenEvent:function(){},removeMiniFullScreen:onResize:show:function(){this.miniFullScreen&&this.miniFullScreen.show()},hide:function(){this.miniFullScreen&&this.miniFullScreen.hide()},remove:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen=void 0},setStyle:),BookAttachmentsFactory=Class({create:function(b,c,d,e){this.isDoublePage=e;this.container=b;this.book=d;this.pageIndex=c},createAttachment:function(b,c){switch(b){case "thickness":var d=c?new ThicknessManager(this.container,this.book):new SingleBookThicknessManager(this.container,this.book);d.refreshThickness();break;case "bookshadow":d=new BookShadow(this.container);break;case "grayshadow":d=new GrayShadow(this.container);break;case "zoomhint":d=
new ZoomHint(this.parent);break;case "minifullscreen":d=new BookMiniFullscreen;0<=BookInfo.getCurrentPages().indexOf(1)&&d.init();break;case "bookpagenumber":d=new BookPageNumberForFlip;break;case "staticad":d=new StaticAd(this.container);break;case "zoommap":d=new ZoomMap(this.book);d.fillContent(this.pageIndex);break;case "bookmarktab":d=new BookmarkTab(this.container,!this.isDoublePage);break;case "noteadd":d=new NoteAdd(this.container)}return d}}),BookAttachmentsBuilder=Class({Package:"BookAttachment",
create:createAttachmentsForBook:thickness:bookshadow:function(){this.bookShadow=this.factory.createAttachment("bookshadow");this.Items.add(this.bookShadow)},
grayshadow:miniFullscreen:bookpagenumber:
staticad:function(){void 0!=global.staticAd&&1==staticAd.haveAd&&(this.staticAd=this.factory.createAttachment("staticad"),this.Items.add(this.staticAd))},zoommap:function(){isPad()||isPhone()||!bookConfig.ZoomMapVisible||(this.zoomMap=this.factory.createAttachment("zoommap"),this.Items.add(this.zoomMap))},bookmarktab:noteadd:zoomhint:function(){isTouchDevice()},hide:show:onResize:afterCurling:
setAttachmentBeforeFlipTo:setAttachmentAfterFlipTo:afterZoomIn:function(b,c){isPhone()||isPad()||this.Items.find("ThicknessManager").each(bind(this));this.Items.find("BookmarkTab").each(function(d){d.onResize()}.bind(this));this.Items.find("ZoomMap").each(function(d){d.refreshArea()}.bind(this));this.Items.find("noteadd").length&&
this.Items.find("noteadd").get(0).hide()}}),FlipPage=Class({downMask:null,upMask:null,currentIndex:0,nextIndex:0,hardPage:!1,coverPage:!1,coordinate:null,startPoint:null,toPoint:null,fromPoint:null,AliceToLeft:!1,AliceToRight:!1,loosen:!0,flipping:!1,dragMoveToFlip:!1,fallback:!1,pageWidth:0,pageHeight:0,maskWidth:0,create:function(b){this.book=b},startToFlip:meetFlipCondition:flipToPoint:function(b,c,d){if(b&&c)if(1==this.hardPage)this.flipToHardPoint(b,c);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=
c;var e=this.pageWidth,f=computePoint(e,this.pageHeight,this.maskWidth,b,c);if(f){var g=transformCSS({rotate:f.rotate,tran:{x:f.maskTranX,y:f.maskTranY}}),h=transformCSS({rotate:f.rotate,tran:{x:f.maskTranX,y:f.maskTranY}}),k=transformCSS({rotate:-f.rotate,tran:{x:-f.pageTranX,y:0}}),l=transformCSS({rotate:f.rotate,tran:{x:f.pageTranX,y:0}});this.downMask&&this.downMask.setCSSByStyle(g);this.upMask&&this.upMask.setCSSByStyle(h);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(k);
this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(l);this.setFlipAlpha(e,b,c);this.setFlipShadow(f,d);this.book.followToPoint(this,b,c)}}},flipToHardPoint:setPagesVisible:function(b){},setHardFlipShadow:function(b){b&&(this.upMask&&this.upMask.setFlipShadow(b,!0),this.downMask&&this.downMask.setFlipShadow(b,!1))},setFlipAlpha:function(b,c,d){},setFlipShadow:isMiniPage:resetWidthHeight:getPageWidthHeight:setPageZIndex:function(){},setFlipOriginPoint:function(){},endFlipByIndex:function(){},isDragMoveToFlip:endFlip:function(){this.flipping=!1},destroy:function(){}}),SingleFlipPage=Class({flipToHardPoint:function(b,c){if(b&&c){this.coordinate=c;var d=this.pageWidth,
e=computePoint(d,this.pageHeight,this.maskWidth,b,c);if(e){var f=-90+90*Math.abs(c.x/b.x);0>c.x&&(f=90-90*Math.abs(c.x/b.x));var g=transformCSS({perspective:6E3,rotateY:f});f=transformCSS({perspective:6E3,rotateY:f});this.downMask&&this.downMask.setCSSByStyle(g);this.upMask&&this.upMask.setCSSByStyle(f);0>c.x/b.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.setHardFlipShadow(e);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,
b,c)}}},setHardFlipShadow:setPageZIndex:function(){var b=this.downMask.pageIndex,c=this.upMask.pageIndex,d=originTotalPageCount+5+c,e=originTotalPageCount+5-b;if(bookConfig.HardPageEnable){if(c==totalPageCount||1==c)d=2*(bookConfig.totalPageCount+5)+10;if(b==totalPageCount||1==b)e=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(d);this.downMask.setZIndex(e)},setFlipAlpha:function(b,
c,d){},setFlipOriginPoint:endFlipByIndex:function(b){b=transformCSS({rotate:0,
tran:{x:0,y:0}});this.upMask.setCSSByStyle(b);this.upMask.page&&this.upMask.page.setCSSByStyle(b);this.downMask.setCSSByStyle(b);this.downMask.page&&this.downMask.page.setCSSByStyle(b);this.upMask.setLeftOrRight(rightToLeft);this.downMask.setLeftOrRight(rightToLeft);this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(FlipPage),SingleCalendarPage=Class({flipToPoint:function(b,c,d){if(b&&c)if(1==
this.hardPage)this.flipToHardPoint(b,c);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=c;var e=this.pageWidth,f=computePoint(this.pageHeight,e,this.maskWidth,b,c);if(f){var g=transformCSS({rotate:f.rotate,tran:{x:-f.maskTranY,y:f.maskTranX}}),h=transformCSS({rotate:f.rotate,tran:{x:-f.maskTranY,y:f.maskTranX}}),k=transformCSS({rotate:-f.rotate,tran:{x:0,y:-f.pageTranX}}),l=transformCSS({rotate:f.rotate,tran:{x:0,y:f.pageTranX}});this.downMask&&this.downMask.setCSSByStyle(g);
this.upMask&&this.upMask.setCSSByStyle(h);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(k);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(l);this.setFlipAlpha(e,b,c);this.setFlipShadow(f,d);this.book.followToPoint(this,b,c)}}},flipToHardPoint:function(b,c){if(b&&c){this.coordinate=c;var d=this.pageWidth,e=computePoint(this.pageHeight,d,this.maskWidth,b,c);if(e){var f=-90+90*Math.abs(c.x/b.x);0>c.x&&(f=90-90*Math.abs(c.x/b.x));var g=transformCSS({perspective:6E3,
rotateX:-f});f=transformCSS({perspective:6E3,rotateX:-f});this.downMask&&this.downMask.setCSSByStyle(g);this.upMask&&this.upMask.setCSSByStyle(f);0>c.x/b.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.setHardFlipShadow(e);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setPageZIndex:setFlipAlpha:function(b,c,d){},setFlipOriginPoint:endFlipByIndex:).extend(SingleFlipPage),DoubleFlipPage=Class({setPagesVisible:setPageZIndex:setFlipOriginPoint:endFlipByIndex:function(b){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(c);this.upMask.page&&this.upMask.page.setCSSByStyle(c);this.downMask.setCSSByStyle(c);this.downMask.page&&this.downMask.page.setCSSByStyle(c);b?(this.downMask.setLeftOrRight(!0),this.upMask.setLeftOrRight(!0)):(this.downMask.setLeftOrRight(!1),this.upMask.setLeftOrRight(!1));this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();
this.downMask.clearFlipShadow()}}).extend(FlipPage),DoubleCalendarPage=Class({flipToPoint:function(b,c,d){if(b&&c)if(1==this.hardPage)this.flipToHardPoint(b,c);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=c;var e=this.pageWidth,f=computePoint(this.pageHeight,e,this.maskWidth,b,c);if(f){var g=transformCSS({rotate:f.rotate,tran:{x:-f.maskTranY,y:f.maskTranX}}),h=transformCSS({rotate:f.rotate,tran:{x:-f.maskTranY,y:f.maskTranX}}),k=transformCSS({rotate:-f.rotate,
tran:{x:0,y:-f.pageTranX}}),l=transformCSS({rotate:f.rotate,tran:{x:0,y:f.pageTranX}});this.downMask&&this.downMask.setCSSByStyle(g);this.upMask&&this.upMask.setCSSByStyle(h);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(k);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(l);this.setFlipAlpha(e,b,c);this.setFlipShadow(f,d);this.book.followToPoint(this,b,c)}}},flipToHardPoint:setFlipOriginPoint:endFlipByIndex:).extend(DoubleFlipPage),FlipPageManager=Class({create:initFlipPageByIndex:initHardFlipByIndex:initCoverFlipByIndex:checkFlipping:removeFlipArrayByIndex:endFlip:doNotMeetPageConditions:function(b){if(this.hasBeenMonitor()||this.hasUnLoosenPage()||this.fallbackArray&&0<this.fallbackArray.length||0<=this.book.getPagesByIndex(b).indexOf(this.book.currentPageIndex))return!0;var c=!1;!rightToLeft&&b>this.book.currentPageIndex&&(c=!0);rightToLeft&&b<this.book.currentPageIndex&&(c=!0);return this.isReverseSeriesFlip(c)||
this.isReversePinDownCurlingArray(c,b)?!0:this.existMutexPages(b)?(this.monitorMutexFlipSituation(b),!0):this.crossFlipMode(b)?(this.book.gotoNearPage(b),window.setTimeout(function(){gotoPageFun(b,!1,"cross page")},20),!0):this.crossPageMode(b)?(window.setTimeout(20),!0):!1},hasBeenMonitor:hasUnLoosenPage:isReverseSeriesFlip:isReversePinDownCurlingArray:function(b,c){if(!this.pinDownCurlingArray||0>=this.pinDownCurlingArray.length)return!1;c=this.book.getPagesByIndex(c);for(var d=this.pinDownCurlingArray.length,e=0;e<d;e++){var f=this[this.pinDownCurlingArray[e]];if(b&&f&&f.AliceToRight||!b&&f&&f.AliceToLeft||f&&0>c.indexOf(f.nextIndex))return!0}return!1},existMutexPages:monitorMutexFlipSituation:function(b){this.monitorMutexFlipInterval||(this.monitorMutexFlipInterval=window.setInterval(function(){this.existMutexPages(b)||(window.clearInterval(this.monitorMutexFlipInterval),this.monitorMutexFlipInterval=
void 0,gotoPageFun(b,!1,"cross page"))}.bind(this),20))},toSoftPage:function(b){return this.book.toSoftPage(b)},toHardPage:function(b){return this.book.toHardPage(b)},toCoverPage:crossFlipMode:crossPageMode:function(b){var c=this.book.getFlipTo(b),d=c.minIndex,e=c.maxIndex,f=c.toIndex;if("max"==c.flipTo){if(this.book.pageInfoArray[e].isMiniPage&&!(0<=this.book.getPagesByIndex(e+1).indexOf(b)))return nextPageFun("cross page"),
!0;if(this.book.pageInfoArray[f].isMiniPage&&!(0<=this.book.getPagesByIndex(e+1).indexOf(b)))return gotoPageFun(f-1,!1,"cross page"),!0}if("min"==c.flipTo){if(this.book.pageInfoArray[d].isMiniPage&&!(0<=this.book.getPagesByIndex(d-1).indexOf(b)))return previousPageFun("cross page"),!0;if(this.book.pageInfoArray[f].isMiniPage&&!(0<=this.book.getPagesByIndex(d-1).indexOf(b)))return gotoPageFun(f+1,!1,"cross page"),!0}},beyondPageRange:beforeFlip:function(b,
c){try{var d=this.book.beforeFlipTo(b,!0);this.isDragMoveToFlip(d);if(!d.dragMoveToFlip){var e=this.book.getFromStartPointByIndex(b,d);d.flipToPoint(e[0],e[1],!0)}var f=d.currentIndex+"-"+d.nextIndex;this.book.optionPage==f&&(this.book.optionPage=null);0<this.pinDownCurlingArray.indexOf(f)&&(d.dragMoveToFlip=!0);0>this.flipArray.indexOf(f)&&this.flipArray.push(f);this.fallbackArray.removeElement(f);this.pinDownCurlingArray.removeElement(f);d.startToFlip();this.book.flipping=!0;return d}catch(g){}},
isDragMoveToFlip:),FlipBookIntervalManager=Class({create:flipIntervalTmp:function(b,c,d,e){if(b){this.book.flipping=!0;b.flipping=!0;var f=.05;if(isIE()||isFirefox())f=0;b.setFlipOriginPoint(e);b.coordinate||(b.coordinate=b.startPoint);var g=b.coordinate.x,h=b.coordinate.y,k,l=this.flippingTime;l=l*Math.abs(b.toPoint.x-
g)/Math.abs(b.toPoint.x-b.startPoint.x);e=isAndroidWeChat()||isAndroidDefault()||isIE()||isFirefox()?bind(this):bind(this);var n=bind(this);e()}},setFlipInterval:function(){this.flipInterval=function(){if(!this.flipIntervalManager.flipInterval||!this.flipIntervalManager.flipInterval.stop){if(this.flipPageManager&&this.flipPageManager.array&&0!=this.flipPageManager.array.length)for(var b=0;b<this.flipPageManager.array.length;b++){var c=this.flipPageManager.array[b];
if(c){var d=this.flipPageManager[c];if(!this.flipPageManager[c])this.flipPageManager.array.removeElement(c),b--;else if(this.flipPageManager[c].fromPoint&&this.flipPageManager[c].startPoint&&this.flipPageManager[c].toPoint&&this.flipPageManager[c].downMask&&this.flipPageManager[c].upMask&&!this.flipPageManager[c].flipping){this.flipPageManager[c].Alice=!0;this.flipPageManager[c].coordinate||(this.flipPageManager[c].coordinate=this.flipPageManager[c].startPoint);var e=.22*(d.toPoint.x-d.coordinate.x),
f=e+this.flipPageManager[c].coordinate.x;d=e/((d.coordinate.x-d.toPoint.x)/(d.coordinate.y-d.toPoint.y))+this.flipPageManager[c].coordinate.y;e=this.flipPageManager[c].downMask.pageIndex;var g=this.flipPageManager[c].upMask.pageIndex;this.flipIntervalManager.flipToPoint(this.flipPageManager[c],e,g,this.flipPageManager[c].fromPoint,{x:f,y:d});!this.flipPageManager[c].flipping&&this.flipPageManager[c].loosen&&(1>Math.abs(f.toFixed(2)-this.flipPageManager[c].toPoint.x)&&1>Math.abs(d.toFixed(2)-this.flipPageManager[c].toPoint.y)||
isNaN(f)||isNaN(d))&&(this.flipPageManager[c].Alice=!1,f=this.flipPageManager[c].toPoint.x,d=this.flipPageManager[c].toPoint.y,this.flipIntervalManager.flipToPoint(this.flipPageManager[c],e,g,this.flipPageManager[c].fromPoint,{x:f,y:d}),this.flipPageManager[c].endFlipByIndex(0>this.flipPageManager[c].toPoint.x),this.flipPageManager.removeFlipArrayByIndex(this.flipPageManager[c]),this.afterCurling(),b--)}}}else this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0;
this.flipIntervalManager.flipInterval&&(isAndroidWeChat()||isAndroidDefault()||isIE()||isFirefox()?window.setTimeout(this.flipIntervalManager.flipInterval,30):window.requestAnimationFrame(this.flipIntervalManager.flipInterval))}}.bind(this.book);this.flipInterval()},flipToPoint:endFlip:function(){},destroy:function(){}}),computePoint=function(b,c,d,e,f){if(!e||!f)return{rotate:0,pageTranX:0,maskTranX:0,maskTranY:0};f.x>b&&(f.x=b);f.x<-b&&(f.x=-b);isAndroidDefault()&&(e.y=f.y);if(e.x==f.x){var g=0;0>e.x&&(g+=180);return{rotate:g,pageTranX:0,maskTranX:e.x,maskTranY:0}}g=Math.sqrt(Math.pow(e.y-c,2)+Math.pow(e.x-0,2));if(Math.sqrt(Math.pow(f.y-c,2)+Math.pow(f.x-0,2))>g){var h=Math.atan((f.y-c)/(f.x-0)),k=Math.abs(Math.cos(h)*g);f.y=c-Math.abs(Math.sin(h)*g);f.x=0<f.x?k:
-k}g=Math.sqrt(Math.pow(e.y-0,2)+Math.pow(e.x-0,2));Math.sqrt(Math.pow(f.y-0,2)+Math.pow(f.x-0,2))>g&&(h=Math.atan((f.y-0)/(f.x-0)),k=Math.abs(Math.cos(h)*g),f.y=Math.abs(Math.sin(h)*g),f.x=0<f.x?k:-k);var l=(f.y-e.y)/(f.x-e.x),n=Math.atan(l);g=180*n/Math.PI;var q=(f.x+e.x)/2,x=(f.y+e.y)/2;h=c/2;k=b/2;var B=c/2;0>e.x&&(g+=180,k=-b/2);e=Module._getTmpDistance(c,e.y-f.y,e.x-f.x,n,g,e.y);c=Module._getShadowRate(b,c,e,n,d,window.key_index,originTotalPageCount);1<c&&(window.bookConfig=null);d=((q-k)*l+
B+Math.pow(l,2)*x)/(1+Math.pow(l,2));f=l*(x-d)+q;k=Module._getPageNewCenterX(f,d,k,B);return{frontShadowDistance:e,shadowRate:c,rotate:g,pageTranX:k-b/2,maskTranX:f-0,maskTranY:d-h}},FlipBook=Class({coordinate_bottom_left:"bl",coordinate_top_left:"tl",coordinate_bottom_right:"br",coordinate_top_right:"tr",direction_left:"left",direction_right:"right",flipPageManager:null,maskWidth:0,create:initBook:function(){this.flipBook=$("<div class='book'></div>");this.parent.append(this.flipBook);this.initAttachments()},initAttachments:function(){this.showPage=this.flipBook;this.bookAttachments=new BookAttachmentsBuilder(this.flipBook,this.currentPageIndex,this,this.options.isDoublePage);this.options.thickness&&this.bookAttachments.thickness(!0);
this.options.bookshadow&&this.bookAttachments.bookshadow();this.options.grayshadow&&this.bookAttachments.grayshadow();this.options.miniFullscreen&&this.bookAttachments.miniFullscreen();this.options.bookpagenumber&&this.bookAttachments.bookpagenumber();this.options.staticad&&this.bookAttachments.staticad();this.options.zoommap&&this.bookAttachments.zoommap();this.options.bookmarktab&&this.bookAttachments.bookmarktab();this.options.noteadd&&this.bookAttachments.noteadd();this.resetBookShadow(this.currentPageIndex)},
resetPages:function(){},getBook:function(){return this.flipBook},addPageArray:function(b){if(b&&this.pageArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(this.pageArray[b[c]]&&this.fillContent(b[c]),this.pageArray[b[c]]))){var d=this.newPage(b[c]);d.fillPreviewImage();var e=this.pageInfoArray[b[c]];d.onResize(this.pageWidth*e.pageWidth,this.pageHeight*e.pageHeight,e.opacity);this.pageArray[b[c]]=d;this.fillContent(b[c]);this.flipBook.append(d.$page)}},onResize:resizeAttachments:function(b,c){},loading:fillContent:function(b,c){this.flipping||!bookConfig.preloadNextPage&&0>this.getCurrentPages().indexOf(b)||
(this.pageArray[b]&&!c&&this.pageArray[b].fillContent(),this.pageBackArray&&this.pageBackArray[b]&&c&&this.pageBackArray[b].fillContent())},fillPage:function(b,c){if(b)for(var d=this.pageArray.length,e=0;e<d;e++)this.pageArray[e]&&this.pageArray[e].fillPage(b,c),this.pageBackArray&&this.pageBackArray[e]&&this.pageBackArray[e].fillPage(b,c)},removePage:unWrapPageExcludeArray:function(b){if(b&&this.pageArray)for(var c=
this.pageArray.length,d=0;d<c;d++)!this.pageArray[d]||0<=b.indexOf(d)||(this.pageArray[d].remove(),this.pageArray[d]=void 0)},unWrapPageBackExcludeArray:resizePage:crossFlipMode:function(b,c){return!1},toSoftPage:function(b){return!0},toHardPage:function(b){return!1},toCoverPage:function(){return!1},isCoverPage:function(){return!1},isHardPage:function(){return!1},beforeFlipTo:function(b,c){b=this.getFlipTo(b);var d=b.minIndex,e=b.maxIndex,
f=b.toIndex,g;"max"==b.flipTo&&(g=this.flipToMax(e,f,c,rightToLeft));"min"==b.flipTo&&(g=this.flipToMin(d,f,c,!rightToLeft));this.setAttachmentBeforeFlipTo(f);this.hidePagesBeforeFlip&&this.hidePagesBeforeFlip(g);g.setPageZIndex(b);return g},afterFlipTo:function(b,c){b&&b.downMask&&b.upMask&&(b.endFlipByIndex(),this.flipPageManager.removeFlipArrayByIndex(b),this.checkFlipping(),b.downMask.pageIndex<c?this.afterFlipToMax(c,!rightToLeft):this.afterFlipToMin(c,rightToLeft),this.setAttachmentAfterFlipTo(c),
this.showPagesAfterFlip&&this.showPagesAfterFlip())},checkFlipping:followToPoint:endFlip:function(){this.flipPageManager&&this.flipPageManager.endFlip()},getCurrentPageIndex:function(){return this.currentPageIndex},getPageWidth:function(b){if(void 0==b)return this.pageWidth;this.pageWidth=b},getPageHeight:getWidth:function(){return this.width},getHeight:function(){return this.height},getScale:getLeft:function(){return this.flipBook.offset().left},getTop:getCssLeft:function(){return parseInt(this.flipBook.css("left"))},getCssTop:function(){return parseInt(this.flipBook.css("top"))},setCSS:setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);this.flipBook.css(d[0],b+"px");this.flipBook.css(d[1],c+"px")},translate:function(b,c){b=transformCSS({});this.flipBook.css(b)},
supportSerialsFlip:function(){return isPhone()||isPad()||!bookConfig.supportSerialsFlip?!1:!0},gotoPage:function(b,c){if(b&&(this.toPageIndex=b,!this.flipBook.parameters||!this.flipBook.parameters.zoomming))if(this.status_zoom&&(isPhone()||isPad()))c={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]},this.flipBook.onDoubleTap.bind(this.flipBook)(c);else if(!this.flipPageManager.beyondPageRange(b)&&!this.flipPageManager.doNotMeetPageConditions(b)&&(this.supportSerialsFlip()&&!this.status_zoom||
!this.flipping)){this.flipping=!0;this.stopMedia();this.flipIntervalManager&&this.flipIntervalManager.flipInterval&&(this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0);var d=this.flipPageManager.beforeFlip(b,!0);fromPageIndex=this.currentPageIndex;var e=this.flipToDirection;!c&&flipHistory&&flipHistory.addFromCurrentIndex(b);this.flippingTo(b,c);playFlipSound();bookConfig.restorePageVisible&&window.localStorage.setItem(realLocation+"?historyPageIndex",b);(.delay(this,50);0<=BookInfo.getPagesByIndex(b).indexOf(1)?this.bookAttachments.Items.find("BookMiniFullscreen").each(function(f){f.init()}):this.bookAttachments.Items.find("BookMiniFullscreen").each(function(f){f.remove()});this.bookAttachments.Items.find("BookPageNumberForFlip").each(function(f){f.init()})}},afterCurling:startAnimation:pauseAnimation:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].pauseAnimation()},openShownMedia:stopMedia:function(){for(var b=this.pageArray.length,
c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].leaveSide()},resetSlider:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].resetSlider()},destroySlider:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].destroySlider()},select:unSelect:magnifierZoom:unMagnifierZoom:switchLargeImage:function(){for(var b=
this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].switchLargeImage()},switchNormalImage:function(b){for(var c=this.pageArray.length,d=0;d<c;d++)this.pageArray[d]&&this.pageArray[d].switchNormalImage(b)},hide:show:enterPage:function(){this.afterChangeBookType();this.openShownMedia();this.addSearchHighlight()},afterChangeBookType:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].initReaderOrSlider()},addSearchHighlight:function(){var b=this.currentPageIndex;b=0==b%2?b+1:b-1;this.pageArray[b]&&this.pageArray[b].highlightSearch();this.pageArray[b+1]&&this.pageArray[b+
1].highlightSearch();this.pageArray[b-1]&&this.pageArray[b-1].highlightSearch();this.pageArray[b+2]&&this.pageArray[b+2].highlightSearch()},clearSearchHighlight:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].clearHighlight()},destroy:function(){this.flipBook.remove()},adjustBookPosition:function(){if(!this.status_zoom&&!this.flipping&&this.width&&this.height){this.pageWidthHeight=this.getFitWH();var b=this.getTranY(),c=this.pageWidthHeight.x/this.width,
d=this.getTranX(c);this.flipBook.animateToTransform.bind(this.flipBook)(c,{x:d,y:b},{x:50,y:0})}},getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;var c=0;b=this.width*b/4;1!=this.currentPageIndex||bookConfig.isTheBookOpen||(c=rightToLeft?b:-b);this.currentPageIndex==totalPageCount&&(c=rightToLeft?-b:b);b=this.getCssLeft();var d=this.getSpace(!0);return d.left+(windowWidth-d.left-d.right-this.width)/2-b+c},getTranY:function(){var b=this.getCssTop(),c=this.getSpace(!0);return c.top+(windowHeight-
c.top-c.bottom-this.pageWidthHeight.y)/2-b}}).extend(Book);bdor[32]=function(b,c){return b+c};bdor[41]=);
var ZoomMonitor=Class({options:void 0,target:void 0,beforeZoomIn:void 0,afterZoomIn:void 0,beforeZoomOut:void 0,afterZoomOut:void 0,beforePan:void 0,afterPan:void 0,create:function(){},register:function(b,c){this.options=b;this.target=b.target;this.beforeZoomIn=b.beforeZoomIn;this.afterZoomIn=b.afterZoomIn;this.beforeZoomOut=b.beforeZoomOut;this.afterZoomOut=b.afterZoomOut;this.beforePan=b.beforePan;this.afterPan=b.afterPan;this.target.zoom({zoomIn:this.beforeZoomIn,onPan:this.beforePan,beforeZoomOut:this.beforeZoomOut,
zoomOut:this.afterZoomOut,onZoomed:this.afterZoomIn},c)}});
FlipBook.expand({initEvent:hammerEventModular:function(){var b=new Hammer.Manager(this.flipBook[0],{touchAction:window.self!==window.top?"pan-y":"none"});b.add(new Hammer.Pan);b.add((new Hammer.Swipe({velocity:.03,threshold:.5})).recognizeWith(b.get("pan")));b.add(new Hammer.Press({time:"1000"}));b.add(new Hammer.Pinch);
b.add(new Hammer.Tap({event:"doubletap",taps:2}));b.add(new Hammer.Tap);b.on("panstart panmove panend",this.onPan.bind(this));b.on("press",this.onPress.bind(this));if(_agent_.browser.device!==_agent_.browser.DEVICE_PC)this.flipBook.bind("click",this.onTap.bind(this));else b.on("tap",this.onTap.bind(this));b.on("swipeleft swiperight swipedown swipeup",this.onSwipe.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind("mousedown touchstart",this.onDown.bind(this));
$("body").bind("mouseup touchend",this.onUp.bind(this));$("body").bind("mouseleave touchleave",this.onUp.bind(this));this.zoomMonitor=new ZoomMonitor;this.zoomMonitor.register({target:this.flipBook,beforeZoomIn:this.beforeZoomIn.bind(this),afterZoomIn:this.afterZoomIn.bind(this),beforePan:this.beforePan.bind(this),afterPan:this.afterPan.bind(this),beforeZoomOut:this.beforeZoomOut.bind(this),afterZoomOut:this.afterZoomOut.bind(this)},!0);$(this.flipBook).bind("mouseup touchstart",},
onDown:function(){this.fingleDown=!0},onUp:onPinch:onDoubleTap:onPan:onPress:onRotate:function(b){},onSwipe:function(b){if(!(this.selected||this.status_zoom||this.isZoomming||this.dragToFlip))if(bookConfig.FlipDirection||bookConfig.upsideOnMobile())switch(b.type){case "swipeup":this.flipFromDirection(this.coordinate_bottom_right,"swipe to flip");break;case "swipedown":this.flipFromDirection(this.coordinate_bottom_left,"swipe to flip")}else switch(b.type){case "swipeleft":this.flipFromDirection(this.coordinate_bottom_right,
"swipe to flip");break;case "swiperight":this.flipFromDirection(this.coordinate_bottom_left,"swipe to flip")}},onTap:function(b){var c=b;b.srcEvent&&(c=b.srcEvent);this.selected||this.status_zoom||this.isZoomming?onWindowTap(c):bookType!=this.bookType||this.status_zoom||this.status_resize||(b=this.realPoint(c)[0],b=this.aroundFlipCorner(b),!b||bookConfig.BanFlipFromDirection?onWindowTap(c):(this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null,
this.flipFromDirection(b,"direction")))},onOver:aroundFlipCorner:function(b){var c=this.aroundCorner(b);if(c)return c;if(!this.doublePage){var d=
this.getCurrentPageWidthHeight(b.x);bookConfig.FlipDirection?(c=d.pageHeight,d=d.pageWidth):(c=d.pageWidth,d=d.pageHeight);0>this.MiddleX&&(b.x=-b.x);if(!(b.x>c-1||1>b.x||b.y>d-1||1>b.y||b.x<.8*c&&b.x>.2*c||b.y>.2*d&&b.y<.8*d)){var e=Math.sqrt(Math.pow(.2*d,2)-Math.pow((c-Math.abs(b.x))*d/c,2));c=Math.sqrt(Math.pow(.2*d,2)-Math.pow(Math.abs(b.x)*d/c,2));if(b.y<c&&b.x<this.MiddleX&&0<this.MiddleX)return"tl";if(b.y<c&&b.x<-this.MiddleX&&0>this.MiddleX||b.y<e&&b.x>this.MiddleX&&0<this.MiddleX)return"tr";
if(b.y<e&&b.x>-this.MiddleX&&0>this.MiddleX)return"tl";if(b.y>d-c&&b.x<this.MiddleX&&0<this.MiddleX)return"bl";if(b.y>d-c&&b.x<-this.MiddleX&&0>this.MiddleX||b.y>d-e&&b.x>this.MiddleX&&0<this.MiddleX)return"br";if(b.y>d-e&&b.x>-this.MiddleX&&0>this.MiddleX)return"bl"}}},aroundCorner:function(b){this.edgeX();var c=this.getCurrentPageWidthHeight(b.x);if(bookConfig.FlipDirection){var d=c.pageHeight;c=c.pageWidth}else d=c.pageWidth,c=c.pageHeight;if(!(Math.abs(b.x)>d-1||b.y>c-1||1>b.y||Math.abs(b.x)<
.8*d||b.y>.2*c&&b.y<.8*c)){d=Math.sqrt(Math.pow(.2*c,2)-Math.pow((d-Math.abs(b.x))*c/d,2));if(b.y<d&&b.x<this.MiddleX)return"tl";if(b.y<d&&b.x>this.MiddleX)return"tr";if(b.y>c-d&&b.x<this.MiddleX)return"bl";if(b.y>c-d&&b.x>this.MiddleX)return"br"}},getCurrentPageWidthHeight:pageDragToFlip:function(){this.flipPageManager[this.optionPage].toPoint.y=this.flipPageManager[this.optionPage].startPoint.y;this.flipPageManager[this.optionPage].toPoint.x=-this.flipPageManager[this.optionPage].startPoint.x;this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.flipPageManager[this.optionPage].startToFlip();
this.flipPageManager[this.optionPage].dragMoveToFlip=!0;this.flipToDirection=0>this.flipPageManager[this.optionPage].startPoint.x?"right":"left";this.tmpDragToFlipTimeout&&window.clearTimeout(this.tmpDragToFlipTimeout);this.dragToFlip=!0;this.tmpDragToFlipTimeout=window.setTimeout(function(){this.dragToFlip=!1}.bind(this),500);this.getNextPage("drag to flip")},flipFromDirection:function(b,c){if(!(this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length))if(0<=b.indexOf("l")){if(!this.flipping||
this.flipToDirection!=this.direction_left){if(this.flipPageManager.pinDownCurlingArray&&0<this.flipPageManager.pinDownCurlingArray.length){b=this.flipPageManager.pinDownCurlingArray.length;for(var d=0;d<b;d++)if(this.flipPageManager.pinDownCurlingArray[d].AliceToLeft)return}this.flipToDirection=this.direction_right;this.getNextPage(c)}}else if(0<=b.indexOf("r")&&(!this.flipping||this.flipToDirection!=this.direction_right)){if(this.flipPageManager.pinDownCurlingArray&&0<this.flipPageManager.pinDownCurlingArray.length)for(b=
this.flipPageManager.pinDownCurlingArray.length,d=0;d<b;d++)if(this.flipPageManager.pinDownCurlingArray[d].AliceToRight)return;this.flipToDirection=this.direction_left;this.getNextPage(c)}},hidePages:function(){var b=this.pageArray.length,c=this.getCurrentPages();this.zoomPageArray=[];for(var d=0;d<b;d++)this.pageArray[d]&&0>c.indexOf(d)&&this.pageArray[d].visible&&(this.zoomPageArray.push(this.pageArray[d]),this.pageArray[d].setVisible(!1)),this.pageBackArray&&this.pageBackArray[d]&&(this.zoomPageArray.push(this.pageBackArray[d]),
this.pageBackArray[d].setVisible(!1))},showPages:function(){if(this.zoomPageArray){for(var b=this.zoomPageArray.length,c=0;c<b;c++){var d=this.zoomPageArray[c];d&&d.setVisible(!0)}this.zoomPageArray=[]}},beforeZoomIn:function(){if(!isPhone()&&!isPad()){bookConfig.ZoomToolbarVisible&&!this.controlBar&&(this.controlBar=bookType!=BookType.catalog_book?new ZoomControlBar(this.parent):new CatalogZoomControlBar(this.parent));if(this.controlBar){var b="lite"==bookConfig.ToolbarViewMode&&bookType==BookType.catalog_book?
50:0;this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+b+5);this.controlBar.setVisible(bookConfig.ZoomToolbarVisible)}this.bookAttachments&&this.bookAttachments.Items.find("ZoomMap").each(;bookConfig.AnnotationButtonVisible&&global.annotationCookie&&global.annotationCookie.saveCookie()}window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);this.status_zoom=!0;this.hidePages();
global.canMagnifierZoom&&this.unMagnifierZoom();StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(c){c.setAsZoomout();c.executeCallback()});this.bookAttachments&&this.bookAttachments.Items.find("StaticAd").each(function(c){c.setStyle({"z-index":1})});this.bookAttachments&&this.bookAttachments.Items.find("BookmarkTab").each(function(c){c.hide()})},beforeZoomOut:function(){bookConfig.AnnotationButtonVisible&&global.annotationCookie&&global.annotationCookie.saveCookie()},afterZoomOut:function(){this.resetZoomConfig();
if(isPhone()||isPad())this.showPages(),gotoPageFun(this.toPageIndex,!1,"change book type");isPhone()||isPad()||(this.bookAttachments.noteAdd&&(this.bookAttachments.noteAdd.show(),this.bookAttachments.noteAdd.onResize()),this.switchNormalImage())},resetZoomConfig:function(){this.flipping||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.bookAttachments&&this.bookAttachments.Items.find("StaticAd").each(bind(this));this.status_zoom=!1;this.controlBar&&this.controlBar.setVisible(!1);
this.bookAttachments&&this.bookAttachments.Items.find("ZoomMap").each(function(b){b.hide()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomin();b.executeCallback()});this.thicknessManager&&this.thicknessManager.showCanvas();this.bookAttachments&&this.bookAttachments.Items.find("BookmarkTab").each(function(b){b.show()});this.showPage&&this.showPage.parameters&&(this.showPage.parameters.zoomFlag=
!1,this.showPage.parameters.scale=1,this.showPage.parameters.toScale=1)},beforePan:function(){this.bookAttachments&&this.bookAttachments.Items.find("ZoomMap").each(function(b){b.refreshArea()})},afterPan:function(){},curling:curlingPage:function(b,c){if(!c&&b.x<this.MiddleX||c&&0<=c.indexOf("l")){if(this.flipping&&
"left"==this.flipToDirection)return;var d=this.realIndex(!1)[0];var e=this.realIndex(!1)[1];var f=d+"-"+e;var g=!1}if(!c&&b.x>this.MiddleX||c&&0<=c.indexOf("r")){if(this.flipping&&"right"==this.flipToDirection)return;d=this.realIndex(!0)[0];e=this.realIndex(!0)[1];f=d+"-"+e;g=!0}if(f&&d&&e){var h=originTotalPageCount;bookConfig.SingleModeBanFlipToLastPage&&this.bookType==BookType.single_book&&(h=Math.max(1,bookConfig.totalPageCount-1));if(!(0>=d||d>h||0>=e||e>h||this.flipPageManager[f]&&this.flipPageManager[f].fallback||
this.flipPageManager[f]&&this.flipPageManager[f].flipping||BookEvent.trigger("beforeFlipPage",[e])))if(h=e,BookInfo.isDoublePage()&&(h=BookInfo.getMinPageIndex(h)),passwardType()&&bookConfig.excludeFrontPages&&h>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward())global.passwardPannel||(global.passwardPannel=new PasswardPannel),global.passwardPannel.show();else return this.defineFlipPage(f,b,c,d,e,g),f}},defineFlipPage:unCurling:getFromStartPointByCoordinate:getRealToPoint:realIndex:getNextPage:function(b){"right"==this.flipToDirection&&
!rightToLeft||"left"==this.flipToDirection&&rightToLeft?previousPageFun(b):nextPageFun(b)},realBookPosition:realPoint:function(b){if((b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b])&&!(3<=b.length)){var c=this.realBookPosition()[0],d=this.realBookPosition()[1],
e=b[0].pageX,f=b[0].pageY;bookConfig.upsideOnMobile()&&(e=b[0].pageY,f=windowHeight-b[0].pageX);if(bookConfig.FlipDirection){f=f-d-this.pageHeight;var g=this.getCurrentPageWidthHeight(f),h=g.pageWidth;e=this.pageWidth-(e-c)-(this.pageWidth-h)/2;if(!b[1])return[{x:f,y:e}];g=b[1].pageX;b=b[1].pageY;g=this.pageWidth-(g-c)-(this.pageWidth-h)/2;b=b-d-this.pageHeight;return[{x:f,y:e},{x:b,y:g}]}e=e-c-this.pageWidth;g=this.getCurrentPageWidthHeight(e);h=g.pageHeight;f=f-d-(this.pageHeight-h)/2;if(!b[1])return[{x:e,
y:f}];g=b[1].pageX;b=b[1].pageY;g=g-c-this.pageWidth;b=b-d-(this.pageHeight-h)/2;return[{x:e,y:f},{x:g,y:b}]}},mouseWheelFlip:function(){var b;this.flipBook.bind(_event._mousewheel,function(c){if(void 0!=b&&150>new Date-b)var d=!1;else b=new Date,d=!0;if(!d)return!1;d=c.originalEvent;d=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));c=c.originalEvent?c.originalEvent:c;this.status_zoom&&(c={pointers:[{pageX:c.pageX,pageY:c.pageY},{pageX:c.pageX,pageY:c.pageY}]},0>d?this.controlBar&&this.controlBar.zoomDown(c):
this.controlBar&&this.controlBar.zoomUp(c));!this.status_zoom&&bookConfig.mouseWheelFlip&&(0>d?nextPageFun("mouse wheel flip"):previousPageFun("mouse wheel flip"));if(bookConfig.mouseWheelFlip)return stopEvent(c),!1}.bind(this))},mouseZoomEvent:function(){$(this.flipBook).bind(_event._move,function(b){var c=BookInfo.getBook();if(c.status_zoom&&!this.flipBook.parameters.zoomming&&c.controlBar&&c.controlBar.moveByMousePosition){c=this.flipBook;var d=c.width(),e=c.height(),f=b.pageX;b=b.pageY;d=f-f*
d/windowWidth;e=b-b*e/windowHeight;b={};b.origin=c.parameters.origin;b.scale=c.parameters.scale;d-=c.parameters.left;e-=c.parameters.top;b.tran={x:d,y:e};e=transformCSS(b);c.css(e);this.bookAttachments&&this.bookAttachments.zoomMap&&this.bookAttachments.zoomMap.refreshArea()}}.bind(this))}});
var DoubleFlipBook=Class({newFlipPage:function(){return new DoubleFlipPage(this)},resetPages:setPageCss:function(){var b=
transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(b));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(b));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(b));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(b));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),
this.nextPage.setCSSByStyle(b));this.nextPage2&&(this.setZIndexByPageIndex(this.nextPage2),this.nextPage2.setCSSByStyle(b));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0),this.nextPage2&&this.nextPage2.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!0),
this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1),this.nextPage2&&this.nextPage2.setLeftOrRight(!1))},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),
this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},getDownUpPage:function(b,c){this.addPageArray([b,c]);this.pageArray[b]&&this.pageArray[b].beginToFlip();this.pageArray[c]&&this.pageArray[c].beginToFlip();this.pageArray[b]&&(this.pageArray[b].page.setCSSByName("right-flip-side"),this.setZIndexByPageIndex(this.pageArray[b]));this.pageArray[c]&&(this.pageArray[c].page.setCSSByName("flip-side"),this.pageArray[c].page.side.addClass("boxShadow"),
this.setZIndexByPageIndex(this.pageArray[c]));return[this.pageArray[b],this.pageArray[c]]},flipToMax:function(b,c,d,e){e=this.flipPageManager.initFlipPageByIndex(b,c,e);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c+1]&&(this.pageArray[c+1].setLeftOrRight(rightToLeft),e.nextPage=this.pageArray[c+1]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);return e},addPagesBeforeFlipToMax:setPagesStyleBeforeFlipToMax:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setLeftOrRight(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3],b),this.pageArray[b+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:afterFlipToMax:function(b,c){b=this.getMinPageIndex(b);this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);this.deleteUnnecessaryPagesAfterFlipToMax(b)},addPagesAfterFlipToMax:setPagesStyleAfterFlipToMax:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setLeftOrRight(!rightToLeft));this.pageArray[b-1]&&(this.setZIndexByPageIndex(this.pageArray[b-1],b),this.pageArray[b-1].setLeftOrRight(!rightToLeft));this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],b),this.pageArray[b-2].setLeftOrRight(!rightToLeft));this.supportSerialsFlip()&&this.flipping||
(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2]),this.pageArray[b+2].setLeftOrRight(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3]),this.pageArray[b+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:flipToMin:function(b,c,d,e){e=this.flipPageManager.initFlipPageByIndex(b,
c,e);this.addPagesBeforeFlipToMin(c,d);this.pageArray[c-1]&&(this.pageArray[c-1].setLeftOrRight(!rightToLeft),e.nextPage=this.pageArray[c-1]);this.setPagesStyleBeforeFlipToMin(c,d);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return e},addPagesBeforeFlipToMin:setPagesStyleBeforeFlipToMin:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],
b),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],b),this.pageArray[b-2].setLeftOrRight(!rightToLeft)),this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3],b),this.pageArray[b-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMin:afterFlipToMin:function(b,
c){b=this.getMaxPageIndex(b);this.addPagesAfterFlipToMin(b);this.setPagesStyleAfterFlipToMin(b);this.deleteUnnecessaryPagesAfterFlipToMin(b)},addPagesAfterFlipToMin:setPagesStyleAfterFlipToMin:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],
b),this.pageArray[b].setLeftOrRight(rightToLeft));this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setLeftOrRight(rightToLeft));this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setLeftOrRight(rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1]),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2]),this.pageArray[b-2].setLeftOrRight(!rightToLeft)),
this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3]),this.pageArray[b-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMin:getFlipTo:getCurrentPages:
getPagesByIndex:movetoCenter:edgeX:function(){this.MiddleX=0},getFromStartPointByIndex:function(b,c){var d=this.getMinPageIndex(this.currentPageIndex),e=d+1;if(b!=e&&b!=d){var f={x:0,y:0},g={x:0,y:0},h=c.getPageWidthHeight().width;
c=c.getPageWidthHeight().height;var k=!1;if(b>e&&!rightToLeft||b<d&&rightToLeft)f={x:h,y:c},g.x=f.x-2,g.y=f.y-2,k=!0;if(b<d&&!rightToLeft||b>e&&rightToLeft)f={x:-h,y:c},g.x=f.x+2,g.y=f.y-2,k=!1;this.flipToDirection=k?"left":"right";return[f,g]}},afterZoomIn:function(b){if(!isPhone()&&!isPad()||bookConfig.usePdfJs){if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top,
d=this.flipBook.parameters.left,e=c-this.flipBook.parameters.top;f=this.flipBook.parameters.scale;d={tran:{x:parseInt(b-d),y:parseInt(e)},scale:1,origin:{x:0,y:0}};1!=f&&this.resizeBook(Math.round(this.width*f/2),Math.round(this.height*f));this.status_zoom||(f=0,1==this.currentPageIndex&&bookConfig.retainBookCenter&&!bookConfig.isTheBookOpen&&(f=rightToLeft?this.width/4:-this.width/4),this.currentPageIndex==totalPageCount&&bookConfig.retainBookCenter&&(f=rightToLeft?-this.width/4:this.width/4),d.tran=
{x:parseInt(f),y:0},d.left=b-f,d.top=c-0);this.setCSS(d);this.flipBook.parameters.tran=d.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;isPhone()||isPad()||this.switchLargeImage()}}else if(c=BookInfo.getCurrentPages(),void 0!=c&&null!=c)for(d=0;d<c.length;d++)if(e=c[d],this.pageArray[e]){var f=
this.flipBook.parameters.scale;this.pageArray[e].resizeSvg(Math.round(this.pageWidth*f),Math.round(this.pageHeight*f));bookConfig.highDefinitionConversion?this.pageArray[e].zoomInSideImage():(1<b.scale&&this.pageArray[e].zoomInSideImage(),1==b.scale&&this.pageArray[e].zoomOutSideImage())}},setZIndexByPageIndex:function(b,c){b&&(c=c?c:this.currentPageIndex,c=this.getMinPageIndex(c),b==this.pageArray[c+1]?b.setZIndex(2):b==this.pageArray[c+2]?b.setZIndex(1):b==this.pageArray[c+3]?b.setZIndex(0):b==
this.pageArray[c]?b.setZIndex(2):b==this.pageArray[c-1]?b.setZIndex(1):b==this.pageArray[c-2]&&b.setZIndex(0))},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right;b=windowHeight-b.top-b.bottom;var d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,e=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,b,2*d,e)},
getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+templateArea.getBottomHeight();b&&(c+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),d+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),e+=bookConfig.hardCoverBorderWidth,f+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:e,bottom:f}},getMinPageIndex:function(b){return b=
bookConfig.isTheBookOpen?2*Math.ceil(b/2)-1:2*Math.floor(b/2)},getMaxPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/2):2*Math.floor(b/2)+1}}).extend(FlipBook),DoubleCalendar=Class({bookType:BookType.normal_book,doublePage:!0,create:function(b){this._super(b);this.resetZoomArea()},initBook:newFlipPage:function(){return new DoubleCalendarPage(this)},newPage:function(b){return new NormalPage(b,"page",!1,this.bookType)},setPageCss:getDownUpHardPage:flipToMax:setPagesStyleBeforeFlipToMax:setPagesStyleAfterFlipToMax:
flipToMin:setPagesStyleBeforeFlipToMin:setPagesStyleAfterFlipToMin:movetoCenter:function(b,c,d){if(!this.status_zoom&&bookConfig.retainBookCenter&&!(1<BookInfo.getPagesByIndex(b).length&&
1<BookInfo.getPagesByIndex(c).length)){var e=this.pageHeight,f=-e/2;e/=2;var g=0,h=0;BookInfo.isLeftPage(b,!0)||1!=BookInfo.getPagesByIndex(b).length||(g=f);BookInfo.isLeftPage(b,!0)&&1==BookInfo.getPagesByIndex(b).length&&(g=e);BookInfo.isLeftPage(c,!0)||1!=BookInfo.getPagesByIndex(c).length||(h=f);BookInfo.isLeftPage(c,!0)&&1==BookInfo.getPagesByIndex(c).length&&(h=e);this.fromTrans=0>this.movedY*h&&this.toTrans!=h?this.movedY:g;this.toTrans=h;b=2*this.pageHeight;void 0==d&&(d=b);isNaN(d)||(this.movedLength=
d,this.movedY=$.easing.easeInOutSine(null,d,this.fromTrans,this.toTrans-this.fromTrans,b),this.setCSS({tran:{x:0,y:this.movedY}}))}},edgeX:function(){this.MiddleX=0},getFromStartPointByIndex:function(b,c){var d=this.getMinPageIndex(this.currentPageIndex),e=d+1;if(b!=e&&b!=d){var f={x:0,y:0},g={x:0,y:0},h=c.getPageWidthHeight().height;c.getPageWidthHeight();c=!1;if(b>e&&!rightToLeft||b<d&&rightToLeft)f={x:h,y:0},g.x=f.x-2,g.y=f.y+2,c=!0;if(b<d&&!rightToLeft||b>e&&rightToLeft)f={x:-h,y:0},g.x=f.x+2,
g.y=f.y+2,c=!1;this.flipToDirection=c?"left":"right";return[f,g]}},afterZoomIn:function(b){if(!isPhone()&&!isPad()||bookConfig.usePdfJs){if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top,d=this.flipBook.parameters.left,e=this.flipBook.parameters.top;f=this.flipBook.parameters.scale;d={tran:{x:b-d,y:c-e},scale:1,origin:{x:0,y:0}};1!=f&&this.resizeBook(Math.round(this.width*
f),Math.round(this.height*f/2));this.status_zoom||(f=0,1==this.currentPageIndex&&bookConfig.retainBookCenter&&!bookConfig.isTheBookOpen&&(f=rightToLeft?this.height/4:-this.height/4),this.currentPageIndex==totalPageCount&&bookConfig.retainBookCenter&&(f=rightToLeft?-this.height/4:this.height/4),d.tran={x:0,y:f},d.left=b-0,d.top=c-f);this.setCSS(d);this.flipBook.parameters.tran=d.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();
this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;isPhone()||isPad()||this.switchLargeImage()}}else if(c=BookInfo.getCurrentPages(),void 0!=c&&null!=c)for(d=0;d<c.length;d++)if(e=c[d],this.pageArray[e]){var f=this.flipBook.parameters.scale;this.pageArray[e].resizeSvg(Math.round(this.pageWidth*f),Math.round(this.pageHeight*f));bookConfig.highDefinitionConversion?this.pageArray[e].zoomInSideImage():(1<b.scale&&this.pageArray[e].zoomInSideImage(),
1==b.scale&&this.pageArray[e].zoomOutSideImage())}},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right;b=windowHeight-b.top-b.bottom;var d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,e=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,b,d,2*e)},getSpace:resizeBook:resetBookShadow:function(){},setAttachmentBeforeFlipTo:function(){},setAttachmentAfterFlipTo:function(){},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);
this.resetZoomArea()},resetZoomArea:function(){this.flipBook&&this.flipBook.parameters&&this.flipBook.parameters.zoomArea&&(1!=this.getCurrentPages().length||BookInfo.isLeftPage(this.currentPageIndex,!0)?1==this.getCurrentPages().length&&BookInfo.isLeftPage(this.currentPageIndex,!0)?this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:50}:this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:0}:this.flipBook.parameters.zoomArea={left:0,top:50,right:0,bottom:0})},getDownUpPage:).extend(DoubleFlipBook),SingleFlipBook=
Class({pageBackArray:null,create:function(b){this.pageBackArray=[];this._super(b)},newFlipPage:function(){return new SingleFlipPage(this)},resetPages:function(b){isNaN(b)||0>=b||(this.unWrapPageBackExcludeArray([b,b+1]),this.unWrapPageExcludeArray([b,b+1]),this.addPageArray([b,b+1]),this.addPageBackArray([b]),this.currentPage=this.pageArray[b],this.currentPage2=this.pageBackArray[b],this.nextPage=this.pageArray[b+1],this.previousPage=this.pageArray[b-1],this.previousPage2=this.pageBackArray[b-1],
this.setPageCss(),this.loading())},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(b));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(b));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(b));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(b));
this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(b));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&
this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1))},addPageBackArray:function(b){if(b&&this.pageBackArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(!this.pageBackArray[b[c]]||this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c],!0),this.pageBackArray[b[c]]))){var d=this.newPageBack(b[c]),e=this.pageInfoArray[b[c]];d.mirrorSide();d.onResize(this.pageWidth*e.pageWidth,this.pageHeight*
e.pageHeight,e.opacity);this.pageBackArray[b[c]]=d;this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c],!0);this.flipBook.append(d.$page)}},getDownUpPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);this.pageArray[d]&&this.pageArray[d].beginToFlip();this.pageBackArray[d]&&this.pageBackArray[d].beginToFlip();this.pageArray[d]&&this.pageArray[d].page.setCSSByName("right-flip-side");this.pageBackArray[d]&&(this.pageBackArray[d].page.setCSSByName("flip-side"),
this.pageBackArray[d].page.side.addClass("boxShadow"));return[this.pageArray[d],this.pageBackArray[d]]},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);rightToLeft?(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-right-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));
return[this.pageArray[d],this.pageBackArray[d]]},flipToMax:function(b,c,d){var e=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c]&&(this.pageArray[c].setLeftOrRight(rightToLeft),e.nextPage=this.pageArray[c]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);return e},hidePagesBeforeFlip:function(b){if(!this.supportSerialsFlip()){var c=this.pageArray.length;this.flipPageArray=[];var d=b.currentIndex;b=b.nextIndex;
for(var e=[d,b],f=0;f<c;f++)0>e.indexOf(f)&&(this.pageArray[f]&&this.pageArray[f].visible&&(this.flipPageArray.push(this.pageArray[f]),this.pageArray[f].setVisible(!1)),this.pageBackArray[f]&&this.pageBackArray[f].visible&&(this.flipPageArray.push(this.pageBackArray[f]),this.pageBackArray[f].setVisible(!1)));c=Math.max(d,b);this.pageBackArray[c]&&this.pageBackArray[c].visible&&(this.flipPageArray.push(this.pageBackArray[c]),this.pageBackArray[c].setVisible(!1))}},showPagesAfterFlip:function(){if(!this.supportSerialsFlip()&&
this.flipPageArray){for(var b=this.flipPageArray.length,c=0;c<b;c++){var d=this.flipPageArray[c];d&&d.setVisible(!0)}this.flipPageArray=[]}},addPagesBeforeFlipToMax:function(b,c){this.addPageArray([b]);c&&this.supportSerialsFlip()&&(this.addPageBackArray([b]),this.addPageArray([b+1]))},setPagesStyleBeforeFlipToMax:function(b,c){c&&(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b],
b),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(b,c){for(var d=c+1;d<=originTotalPageCount;d++)this.pageBackArray[d]&&(this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageBackArray[d]=void 0);for(d=c+2;d<=originTotalPageCount;d++)this.pageArray[d]&&(this.pageArray[d]&&this.pageArray[d].remove(),this.pageArray[d]=void 0);
for(d=b+1;d<c;d++)if(this.pageArray[d]||this.pageBackArray[d])this.pageArray[d]&&this.pageArray[d].remove(),this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageArray[d]=void 0,this.pageBackArray[d]=void 0},afterFlipToMax:function(b){this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);this.deleteUnnecessaryPagesAfterFlipToMax(b)},addPagesAfterFlipToMax:function(b){this.supportSerialsFlip()||(this.addPageArray([b]),this.addPageBackArray([b]),this.addPageArray([b+1]));this.pageArray[b]&&
this.fillContent(b);this.pageArray[b+1]&&this.fillContent(b+1)},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],b);this.pageBackArray[b-1]&&this.setZIndexByPageIndex(this.pageBackArray[b-1],b);this.supportSerialsFlip()||(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b]),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b]),this.pageBackArray[b].setLeftOrRight(rightToLeft)),
this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(b){for(b-=2;0<=b;b--)if(this.pageArray[b]||this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&this.pageBackArray[b].remove(),this.pageArray[b]=void 0,this.pageBackArray[b]=void 0},flipToMin:function(b,c,d){var e=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMin(c,d);this.pageArray[b]&&
(e.nextPage=this.pageArray[b]);this.setPagesStyleBeforeFlipToMin(c);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return e},addPagesBeforeFlipToMin:function(b,c){},setPagesStyleBeforeFlipToMin:function(b){},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(--b;b>c;b--)if(this.pageArray[b]||this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&this.pageBackArray[b].remove(),this.pageArray[b]=void 0,this.pageBackArray[b]=void 0},afterFlipToMin:function(b){this.addPagesAfterFlipToMin(b);
this.setPagesStyleAfterFlipToMin(b);this.deleteUnnecessaryPagesAfterFlipToMin(b)},addPagesAfterFlipToMin:function(b){this.supportSerialsFlip()||(this.addPageArray([b]),this.addPageBackArray([b]),this.addPageArray([b-1]));this.pageArray[b]&&this.fillContent(b);this.pageArray[b-1]&&this.fillContent(b-1)},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+1].setLeftOrRight(rightToLeft));this.supportSerialsFlip()||(this.pageArray[b]&&
(this.setZIndexByPageIndex(this.pageArray[b]),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b]),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b-1]&&(this.setZIndexByPageIndex(this.pageArray[b-1]),this.pageArray[b-1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMin:function(b){for(var c=b+2;c<=originTotalPageCount;c++)if(this.pageArray[c]||this.pageBackArray[c])this.pageArray[c]&&this.pageArray[c].remove(),
this.pageBackArray[c]&&this.pageBackArray[c].remove(),this.pageArray[c]=void 0,this.pageBackArray[c]=void 0;this.pageBackArray[b+1]&&(this.pageBackArray[b+1]&&this.pageBackArray[b+1].remove(),this.pageBackArray[b+1]=void 0)},getCurrentPages:function(){return[this.currentPageIndex]},getPagesByIndex:function(b){return[b]},movetoCenter:function(){},getFromStartPointByIndex:function(b,c){var d=this.currentPageIndex;if(b!=d&&b!=d){var e={x:0,y:0},f=c.getPageWidthHeight().width,g=c.getPageWidthHeight().height,
h=!1;c={x:f,y:g};rightToLeft&&(c={x:-f,y:g});if(b>d&&!rightToLeft||b<d&&rightToLeft)h=!0;if(b<d&&!rightToLeft||b>d&&rightToLeft)h=!1;b>d&&(e={x:c.x*(f-2)/f,y:g-2});b<d&&(e={x:-c.x*(f-2)/f,y:g-2});this.flipToDirection=h?"left":"right";return[c,e]}},realBookPosition:edgeX:function(){this.MiddleX=this.pageWidth/2;rightToLeft&&(this.MiddleX=-this.pageWidth/2)},realIndex:function(b){var c=
this.currentPageIndex;if(b&&!rightToLeft||!b&&rightToLeft)return[c,c+1];if(!b&&!rightToLeft||b&&rightToLeft)return[c,c-1]},getFromStartPointByCoordinate:function(b,c,d){if(b){var e={x:0,y:0},f={x:0,y:0},g=d.getPageWidthHeight().width;d=d.getPageWidthHeight().height;var h=b.y>d/2?b.y-5:b.y+5;b.x<this.MiddleX&&(e.y=h,f.x=-g);b.x>this.MiddleX&&(e.y=h,f.x=g);c&&0<=c.indexOf("r")&&(f.x=g);c&&0<=c.indexOf("l")&&(f.x=-g);"tl"==c&&(e.y=0);"bl"==c&&(e.y=d);"tr"==c&&(e.y=0);"br"==c&&(e.y=d);e.x=rightToLeft?
-g:g;f.y=e.y;return[e,f]}},getFlipTo:function(b){var c=this.currentPageIndex,d="";b>c&&(d="max");b<c&&(d="min");return{flipTo:d,minIndex:c,maxIndex:c,toIndex:b}},afterZoomIn:function(b){if(!isPhone()&&!isPad()||bookConfig.usePdfJs){if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top;b-=this.flipBook.parameters.left;var d=c-this.flipBook.parameters.top;
c=this.flipBook.parameters.scale;1!=c&&this.resizeBook(Math.round(this.width*c),Math.round(this.height*c));transformCSS({tran:{x:b,y:d},scale:1,origin:{x:0,y:0},obj:this.flipBook});this.flipBook.parameters.tran={x:b,y:d};this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;isPhone()||isPad()||this.switchLargeImage()}}else if(d=
BookInfo.getCurrentPages(),void 0!=d&&null!=d)for(var e=0;e<d.length;e++){var f=d[e];this.pageArray[f]&&this.pageArray[f]&&(c=this.flipBook.parameters.scale,this.pageArray[f].resizeSvg(Math.round(this.width*c),Math.round(this.height*c)),bookConfig.highDefinitionConversion?this.pageArray[f].zoomInSideImage():(1<b.scale&&this.pageArray[f].zoomInSideImage(),1==b.scale&&this.pageArray[f].zoomOutSideImage()))}},setZIndexByPageIndex:function(b,c){b&&(c=c?c:this.currentPageIndex,b==this.pageArray[c]?b.setZIndex(2):
b==this.pageBackArray[c]?b.setZIndex(1):b==this.pageArray[c+1]?b.setZIndex(0):b.setZIndex(-1))},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right;b=windowHeight-b.top-b.bottom;var d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,e=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,b,d,e)},getSpace:getTranX:getTranY:function(){var b=this.getCssTop(),c=this.getSpace(!0);return c.top+(windowHeight-c.top-c.bottom-this.pageWidthHeight.y)/2-b}}).extend(FlipBook),SingleFlipCalendar=Class({bookType:BookType.single_book,doublePage:!1,pageBackArray:null,create:newPage:function(b){return new NormalPage(b,"page",!0,this.bookType)},newPageBack:newFlipPage:resetPages:setPageCss:addPageBackArray:function(b){if(b&&this.pageBackArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(!this.pageBackArray[b[c]]||this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c]),this.pageBackArray[b[c]]))){var d=this.newPageBack(b[c]),e=this.pageInfoArray[b[c]];d.onResize(this.pageWidth*e.pageWidth,this.pageHeight*e.pageHeight,e.opacity);d.mirrorSide();this.pageBackArray[b[c]]=d;this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c]);
this.flipBook.append(d.$page)}},getDownUpPage:
getDownUpHardPage:flipToMax:addPagesBeforeFlipToMax:setPagesStyleBeforeFlipToMax:deleteUnnecessaryPagesBeforeFlipToMax:afterFlipToMax:function(b){this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);this.deleteUnnecessaryPagesAfterFlipToMax(b)},addPagesAfterFlipToMax:setPagesStyleAfterFlipToMax:deleteUnnecessaryPagesAfterFlipToMax:flipToMin:addPagesBeforeFlipToMin:function(b,c){},setPagesStyleBeforeFlipToMin:function(b){},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(--b;b>c;b--)if(this.pageArray[b]||this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&this.pageBackArray[b].remove(),
this.pageArray[b]=void 0,this.pageBackArray[b]=void 0},afterFlipToMin:addPagesAfterFlipToMin:function(b){this.supportSerialsFlip()||(this.addPageArray([b]),this.addPageBackArray([b]),this.addPageArray([b-1]));this.pageArray[b]&&this.fillContent(b);this.pageArray[b-1]&&this.fillContent(b-1)},setPagesStyleAfterFlipToMin:deleteUnnecessaryPagesAfterFlipToMin:getCurrentPages:function(){return[this.currentPageIndex]},
getPagesByIndex:movetoCenter:function(){},getFromStartPointByIndex:function(b,c){var d=this.currentPageIndex;if(b!=d&&b!=d){var e={x:0,y:0},f=c.getPageWidthHeight().height;c.getPageWidthHeight();var g=!1;c={x:f,y:0};rightToLeft&&(c={x:-f,y:0});if(b>d&&!rightToLeft||b<d&&rightToLeft)g=!0;if(b<d&&!rightToLeft||b>d&&rightToLeft)g=!1;b>d&&(e={x:c.x*(f-2)/f,y:2});b<d&&(e={x:-c.x*(f-2)/f,y:2});this.flipToDirection=g?"left":"right";return[c,e]}},realBookPosition:edgeX:realIndex:getFromStartPointByCoordinate:getFlipTo:afterZoomIn:function(b){if(!isPhone()&&!isPad()||bookConfig.usePdfJs){if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=
!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top;b-=this.flipBook.parameters.left;var d=c-this.flipBook.parameters.top;c=this.flipBook.parameters.scale;1!=c&&this.resizeBook(Math.round(this.width*c),Math.round(this.height*c));transformCSS({tran:{x:b,y:d},scale:1,origin:{x:0,y:0},obj:this.flipBook});this.flipBook.parameters.tran={x:b,y:d};this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=
$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;isPhone()||isPad()||this.switchLargeImage()}}else if(d=BookInfo.getCurrentPages(),void 0!=d&&null!=d)for(var e=0;e<d.length;e++){var f=d[e];this.pageArray[f]&&this.pageArray[f]&&(c=this.flipBook.parameters.scale,this.pageArray[f].resizeSvg(Math.round(this.width*c),Math.round(this.height*c)),bookConfig.highDefinitionConversion?this.pageArray[f].zoomInSideImage():(1<b.scale&&this.pageArray[f].zoomInSideImage(),
1==b.scale&&this.pageArray[f].zoomOutSideImage()))}},setZIndexByPageIndex:function(b,c){b&&(c=c?c:this.currentPageIndex,b==this.pageArray[c]?b.setZIndex(2):b==this.pageBackArray[c]?b.setZIndex(1):b==this.pageArray[c+1]?b.setZIndex(0):b.setZIndex(-1))},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right;b=windowHeight-b.top-b.bottom;var d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,e=bookConfig.largePageHeight*
(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,b,d,e)},getSpace:resizeBook:resetBookShadow:function(){},setAttachmentBeforeFlipTo:function(){},
setAttachmentAfterFlipTo:function(){},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex)}}).extend(SingleFlipBook),NormalBook=Class({bookType:BookType.normal_book,doublePage:!0,create:function(b){this._super(b);this.resetZoomArea()},initBook:function(){this._super()},resetBookShadow:function(b){b=this.flipPageManager.array.length;if(0==b){var c=2==BookInfo.getCurrentPages().length,
d=!BookInfo.isLeftPage(this.currentPageIndex,!0);this.bookAttachments.Items.find("BookShadow").each(function(l){l.doubleWidth(c);l.right(d);l.show()});this.bookAttachments.Items.find("GrayShadow").each(}else{for(var e=!0,f=!0,g=0;g<b;g++){var h=this.flipPageManager.array[g],k=this.flipPageManager[h].nextIndex;h=this.flipPageManager[h].currentIndex;1==BookInfo.getPagesByIndex(k).length&&BookInfo.isLeftPage(k,!0)&&(f=!1);1==BookInfo.getPagesByIndex(h).length&&BookInfo.isLeftPage(h,
!0)&&(f=!1);1!=BookInfo.getPagesByIndex(k).length||BookInfo.isLeftPage(k,!0)||(e=!1);1!=BookInfo.getPagesByIndex(h).length||BookInfo.isLeftPage(h,!0)||(e=!1)}e||f||this.bookAttachments.Items.find("BookShadow").each(function(l){l.hide()});(e&&!f||!e&&f)&&this.bookAttachments.Items.find("BookShadow").each(function(l){l.show();l.doubleWidth(!1);l.right(f)});this.bookAttachments.Items.find("GrayShadow").each(}},hasTwoSingleFlipPage:function(b){for(var c=this.flipPageManager.array.length,
d,e=0;e<c;e++){var f=this.flipPageManager.array[e],g=this.flipPageManager[f].nextIndex;f=this.flipPageManager[f].currentIndex;1==BookInfo.getPagesByIndex(g).length&&(d=g);1==BookInfo.getPagesByIndex(f).length&&(d=f)}return d&&(d!=b&&1==BookInfo.getPagesByIndex(b).length||d!=this.currentPageIndex&&1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?(this.bookAttachments.Items.find("BookShadow").each(function(h){h.hide()}),!0):!1},newPage:
flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);this.resetZoomArea()},resetZoomArea:afterCurling:function(){this._super();this.resetBookShadow(this.currentPageIndex);this.bookAttachments.afterCurling()},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.bookAttachments.setAttachmentBeforeFlipTo(b);this.resetBookShadow(b)},setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.bookAttachments.setAttachmentAfterFlipTo(b);
this.resetBookShadow(b);this.flipping||this.enterPage();bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));window.resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30)},resizeBook:resizeAttachments:function(b,c){this.bookAttachments.onResize(b,c)},movetoCenter:afterZoomIn:).extend(DoubleFlipBook),NormalCalendar=
Class({bookType:BookType.normal_book,doublePage:!0,create:resetBookShadow:function(b){b=this.flipPageManager.array.length;if(0==b){var c=2==BookInfo.getCurrentPages().length,d=!BookInfo.isLeftPage(this.currentPageIndex,!0);this.bookAttachments.Items.find("BookShadow").each(}else{for(var e=!0,f=!0,g=0;g<b;g++){var h=this.flipPageManager.array[g],k=this.flipPageManager[h].nextIndex;h=this.flipPageManager[h].currentIndex;
1==BookInfo.getPagesByIndex(k).length&&BookInfo.isLeftPage(k,!0)&&(f=!1);1==BookInfo.getPagesByIndex(h).length&&BookInfo.isLeftPage(h,!0)&&(f=!1);1!=BookInfo.getPagesByIndex(k).length||BookInfo.isLeftPage(k,!0)||(e=!1);1!=BookInfo.getPagesByIndex(h).length||BookInfo.isLeftPage(h,!0)||(e=!1)}e||f||this.bookAttachments.Items.find("BookShadow").each(function(l){l.hide()});(e&&!f||!e&&f)&&this.bookAttachments.Items.find("BookShadow").each(}},hasTwoSingleFlipPage:function(b){for(var c=
this.flipPageManager.array.length,d,e=0;e<c;e++){var f=this.flipPageManager.array[e],g=this.flipPageManager[f].nextIndex;f=this.flipPageManager[f].currentIndex;1==BookInfo.getPagesByIndex(g).length&&(d=g);1==BookInfo.getPagesByIndex(f).length&&(d=f)}return d&&(d!=b&&1==BookInfo.getPagesByIndex(b).length||d!=this.currentPageIndex&&1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?(this.bookAttachments.Items.find("BookShadow").each(function(h){h.hide()}),!0):!1},flippingTo:afterCurling:setAttachmentBeforeFlipTo:setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.bookAttachments.setAttachmentAfterFlipTo(b);
this.resetBookShadow(b);this.flipping||this.enterPage();bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));window.resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30)},resizeAttachments:afterZoomIn:function(b){b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(b),this.bookAttachments.afterZoomIn(this.width,this.height))}}).extend(DoubleCalendar),
SingleBook=Class({bookType:BookType.single_book,doublePage:!1,create:function(b){this._super(b)},newPage:function(b){return new NormalPage(b,"page",!0,BookType.single_book)},newPageBack:function(b){return new NormalPage(b,"pageBack",!0,BookType.single_book)},afterCurling:function(){this._super();this.bookAttachments.afterCurling()},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.bookAttachments.setAttachmentBeforeFlipTo(b)},setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();
this.flipping||this.enterPage();this.bookAttachments.setAttachmentAfterFlipTo(b);bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));window.resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30)},resizeBook:function(b,c){this.endFlip();this.width=b;this.height=c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=parseInt(Math.sqrt(b*b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.flipBook.css({width:this.width+
"px",height:this.height+"px"});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow()},resizeAttachments:function(b,c){this.bookAttachments.onResize(b,c)},resetBookShadow:function(){this.bookAttachments.Items.find("BookShadow").each(function(b){b.doubleWidth(!0);b.right(!1)})},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex)},movetoCenter:function(b,c,d){this._super(b,
c,d);this.bookAttachments.Items.find("ThicknessManager").each(function(e){e.followToPoint(b,c,d,!1)})},afterZoomIn:function(b){b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(b),this.bookAttachments.afterZoomIn(this.width,this.height))}}).extend(SingleFlipBook),SingleCalendar=Class({bookType:BookType.single_book,doublePage:!1,create:function(b){this._super(b)},newPage:function(b){return new NormalPage(b,"page",!0,BookType.single_book)},newPageBack:function(b){return new NormalPage(b,
"pageBack",!0,BookType.single_book)},afterCurling:function(){this._super();this.bookAttachments.afterCurling()},setAttachmentBeforeFlipTo:setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.flipping||this.enterPage();this.bookAttachments.setAttachmentAfterFlipTo(b);bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));window.resizeBookAfterFlip&&
!this.flipping&&window.setTimeout(function(){onStageResize()},30)},resizeAttachments:function(b,c){this.bookAttachments.onResize(b,c)},resetBookShadow:flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex)}}).extend(SingleFlipCalendar),HardPage=Class({create:newPage:function(b,c,d,e){this.page=new HardSide(b,c,d,e)},setLeftOrRight:function(b){(this.isLeft=b)?this.setCSSByName("left-side"):this.setCSSByName("right-side");
var c=b&&this.outerCoverBorder?this.borderWidth:0,d=bookConfig.cornerRound;b?(this.$page.css({"border-radius":d+"px 0px 0px "+d+"px"}),this.$page.css({"margin-top":-this.borderWidth+"px","margin-left":-this.borderWidth+"px"})):(this.$page.css({"border-radius":"0px "+d+"px "+d+"px 0px"}),this.$page.css({"margin-top":-this.borderWidth+"px","margin-right":-this.borderWidth+"px"}));this.page.side.css({left:c+"px"})},setUpOrDown:onResize:renderPage:function(){this.rendering&&(this.rendering.destroy(),this.rendering=null);this.rendering=new PageRendering(this.$page,this.pageIndex,this.bookType);this.rendering.onResize(this.width,this.height);this.rendering.render()},beginToFlip:function(){},setHardCover:).extend(PageInterface),HardSide=Class({create:function(b,c,d,e){this._super(b,c,d,e);this.isHard=!0},addFlipShadow:function(){},renderPage:function(){}}).extend(BookPage),
HardCover=Class({create:function(b){this.parent=b;this.borderWidth=bookConfig.hardCoverBorderWidth;this.rightToLeft=bookConfig.RightToLeft;this.cover=$("<div class='hardCover'></div>");this.initPage();this.initBookSpine();this.parent.append(this.cover)},initPage:function(){var b=BookInfo.getHardCoverPages(!0);this.leftPage=new HardPage(b[0],"coverPage",!1,BookType.normal_book);this.rightPage=new HardPage(b[1],"coverPage",!1,BookType.normal_book);this.cover.append(this.leftPage.$page);this.cover.append(this.rightPage.$page);
this.leftPage.rendering.midCoil&&this.leftPage.rendering.midCoil.hide();this.rightPage.rendering.midCoil&&this.rightPage.rendering.midCoil.hide();this.leftPage.setLeftOrRight(!0);this.rightPage.setLeftOrRight(!1);this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage.setCSSByStyle({top:"0",right:"0","margin-top":0,"margin-right":0})},initBookSpine:function(){this.topSpine=new BookSpine(this.cover);this.bottomSpine=new BookSpine(this.cover);this.topSpine.setCSSByName("top_spine");
this.bottomSpine.setCSSByName("botoom_spine")},onResize:function(b,c,d){if(this.leftPage)this.leftPage.onResize(b,c);if(this.rightPage)this.rightPage.onResize(b,c);this.topSpine.onResize(d);this.bottomSpine.onResize(d);this.pageWidth=b;this.pageHeight=c;this.resizeCover(b,c,d)},resizeCover:refresh:function(b,c,d){this.refreshBookSpine(c);this.refreshPage(b,d);this.resizeCover(this.pageWidth,this.pageHeight,c)},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!0)},refreshPage:function(b,c){var d=this.getSensitiveIndex().min,e=this.getSensitiveIndex().max;if(b<=d||b>=e){if(b<=d&&bookConfig.RightToLeft||!bookConfig.RightToLeft&&b>=e)this.rightPage&&this.rightPage.setVisible(!1),(c<e&&bookConfig.RightToLeft||c>d&&!bookConfig.RightToLeft)&&
this.leftPage&&this.leftPage.setVisible(!0);if(b<=d&&!bookConfig.RightToLeft||bookConfig.RightToLeft&&b>=e)this.leftPage&&this.leftPage.setVisible(!1),(c<e&&!bookConfig.RightToLeft||c>d&&bookConfig.RightToLeft)&&this.rightPage&&this.rightPage.setVisible(!0);this.hideBookSpine()}else this.showBookSpine(),this.leftPage&&this.leftPage.setVisible(!0),this.rightPage&&this.rightPage.setVisible(!0)},refreshBookSpine:function(b){this.topSpine.refresh(b);this.bottomSpine.refresh(b)},hideBookSpine:function(){this.topSpine.hide();
this.bottomSpine.hide()},showBookSpine:function(){this.topSpine.show();this.bottomSpine.show()},show:function(){this.cover.show()},hide:function(){this.cover.hide()}}),BookSpine=Class({create:function(b){this.parent=b;this.initSpine()},initSpine:addShadow:refresh:function(b){this.onResize(b)},show:function(){this.bookSpine.show()},hide:function(){},setCSSByStyle:function(b){this.bookSpine.css(b)},setCSSByName:onResize:),HardCalendarCover=Class({create:initPage:initBookSpine:function(){this.topSpine=new BookSpine(this.cover);this.bottomSpine=new BookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},onResize:resizeCover:refresh:getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!0)},refreshPage:refreshBookSpine:hideBookSpine:function(){this.topSpine.hide();this.bottomSpine.hide()},showBookSpine:function(){this.topSpine.show();this.bottomSpine.show()},show:function(){this.cover.show()},
hide:function(){this.cover.hide()}}),HardBook=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(c)&&0<=[1,totalPageCount].indexOf(b)||0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){var c=
this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){return!1},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&
0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return!1},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();
this.hardCover=new HardCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.normal_book):new NormalPage(b,"page",!1,BookType.normal_book)},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!0),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),
this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);
this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){var b=[0,0];this.bookAttachments.Items.find("ThicknessManager").each(function(c){b=
c.getThicknessWidth()});return b},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalBook),
HardCalendar=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(c)&&0<=[1,totalPageCount].indexOf(b)||0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){var c=this.currentPageIndex;
if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){return!1},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||
0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return!1},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();this.hardCover=
new HardCalendarCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.normal_book):new NormalPage(b,"page",!1,BookType.normal_book)},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!0),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!1),
this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-up-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-down-side")):(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!1),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-down-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-up-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&
this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());
this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalCalendar),OpenHardCalendar=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=
[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||
b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount&&gotoPageFun(totalPageCount-1,!1,"cross page")},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.normal_book):new NormalPage(b,"page",!1,BookType.normal_book)}}).extend(HardCalendar),OpenHardBook=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-
2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},
gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount&&gotoPageFun(totalPageCount-1,!1,"cross page")},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.normal_book):new NormalPage(b,"page",!1,BookType.normal_book)}}).extend(HardBook),SingleHardCover=Class({initPage:function(){var b=BookInfo.getHardCoverPages(!1);bookConfig.RightToLeft&&(this.leftPage=new HardPage(b[0],"coverPage",
!0,BookType.single_book));bookConfig.RightToLeft||(this.rightPage=new HardPage(b[0],"coverPage",!0,BookType.single_book));this.leftPage&&this.cover.append(this.leftPage.$page);this.rightPage&&this.cover.append(this.rightPage.$page);this.leftPage&&this.leftPage.setLeftOrRight(!0);this.rightPage&&this.rightPage.setLeftOrRight(!1);this.leftPage&&this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage&&this.rightPage.setCSSByStyle({top:"0",right:"0","margin-top":0,
"margin-right":0})},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!1)},initBookSpine:function(){this.topSpine=new SingleBookSpine(this.cover);this.bottomSpine=new SingleBookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},resizeCover:).extend(HardCover),SingleBookSpine=Class({onResize:).extend(BookSpine),SingleHardCalendarCover=Class({initPage:getSensitiveIndex:
initBookSpine:resizeCover:).extend(HardCover),
SingleHardBook=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 1==c&&2!=b||2!=c&&1==b?!0:!1},toSoftPage:function(b){return 2==b||1==b?!1:!0},toHardPage:function(b){return!1},toCoverPage:function(b){return 1!=b?!1:!0},isCoverPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!0:!1},isHardPage:function(b,c){return!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):
1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();this.hardCover=new SingleHardCover(this.flipBook)},newPage:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardPage(b,"page",!0,BookType.single_book),b.setLeftOrRight(bookConfig.RightToLeft)):b=new NormalPage(b,"page",!0,BookType.single_book);return b},newPageBack:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardPage(b,"pageBack",!0,BookType.single_book),b.setLeftOrRight(bookConfig.RightToLeft)):b=new NormalPage(b,
"pageBack",!0,BookType.single_book);return b},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getThicknessWidth:function(){var b=[0,0];this.bookAttachments.Items.find("ThicknessManager").each(function(c){b=c.getThicknessWidth()});return b},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!0),this.pageBackArray[d]&&
this.pageBackArray[d].setLeftOrRight(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!1),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!1),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-right-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));return[this.pageArray[d],this.pageBackArray[d]]},
setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,
c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleBook),SingleHardCalendar=Class({bookType:BookType.single_book,create:function(b){this._super(b)},
crossFlipMode:function(b){var c=this.currentPageIndex;return 1==c&&2!=b||2!=c&&1==b?!0:!1},toSoftPage:function(b){return 2==b||1==b?!1:!0},toHardPage:function(b){return!1},toCoverPage:function(b){return 1!=b?!1:!0},isCoverPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!0:!1},isHardPage:function(b,c){return!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();this.hardCover=
new SingleHardCalendarCover(this.flipBook)},newPage:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardPage(b,"page",!0,BookType.single_book),b.setUpOrDown(bookConfig.RightToLeft)):b=new NormalPage(b,"page",!0,BookType.single_book);return b},newPageBack:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardPage(b,"pageBack",!0,BookType.single_book),b.setUpOrDown(bookConfig.RightToLeft)):b=new NormalPage(b,"pageBack",!0,BookType.single_book);return b},followToPoint:function(b,c,d){this._super(b,
c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!0),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-up-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-down-side")):(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!1),
this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!1),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-down-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-up-side"));return[this.pageArray[d],this.pageBackArray[d]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();
this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleCalendar),AlbumSide=Class({create:renderPage:function(){},onResize:).extend(BookPage),AlbumPage=Class({isHardPage:!0,create:newPage:function(b,c,d,e){this.page=new BookPage(b,c,d,e)},setLeftOrRight:function(b){this.page&&this.page.setLeftOrRight(b)},setUpOrDown:function(b){this.page&&this.page.setUpOrDown(b)},onResize:addFlipShadow:function(){this.pageFlipShadow||(this.pageFlipShadow=new HardPageFlipShadow(this.side))},beginToFlip:function(){}}).extend(PageInterface),
AlbumBook=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){return!1},toSoftPage:function(b){return!1},toHardPage:function(b){return!0},isHardPage:function(b,c){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(b){},newPage:function(b){return new AlbumPage(b,"page",!1,BookType.normal_book)},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!0),
this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]}}).extend(NormalBook),
AlbumHardBook=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(c)&&0<=[1,totalPageCount].indexOf(b)||0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){return!1},toHardPage:function(b){var c=
this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||
0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!1:!0},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):1==b&&gotoPageFun(2,
!1,"cross page")},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.normal_book):new AlbumPage(b,"page",!1,BookType.normal_book)},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!0),
this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},
setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){var b=[0,0];this.bookAttachments.Items.find("ThicknessManager").each(function(c){b=
c.getThicknessWidth()});return b},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalBook),
OpenAlbumHardBook=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toHardPage:function(b){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&
totalPageCount!=b?!1:!0},isHardPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount&&gotoPageFun(totalPageCount-1,!1,"cross page")},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.normal_book):new AlbumPage(b,"page",!1,
BookType.normal_book)}}).extend(AlbumHardBook),SingleAlbumBook=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){return!1},toSoftPage:function(b){return!1},toHardPage:function(b){return!0},isHardPage:function(b,c){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(b){},newPage:function(b){return new AlbumPage(b,"page",!0,BookType.single_book)},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);
this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!0),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!1),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!1),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-right-side"),
this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));return[this.pageArray[d],this.pageBackArray[d]]}}).extend(SingleBook),SingleAlbumHardBook=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 1==c&&2!=b||2!=c&&1==b?!0:!1},toSoftPage:function(b){return!1},toHardPage:function(b){return 2==b||1==b?!1:!0},toCoverPage:function(b){return 1!=b?!1:!0},isCoverPage:function(b,c){var d=b;b>c&&(d=
c);return 1==d||d==bookConfig.totalPageCount?!0:!1},isHardPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!1:!0},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();this.hardCover=new SingleHardCover(this.flipBook)},newPage:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardPage(b,"page",!0,BookType.single_book),b.setLeftOrRight(bookConfig.RightToLeft)):b=new AlbumPage(b,
"page",!0,BookType.single_book);return b},newPageBack:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardPage(b,"pageBack",!0,BookType.single_book),b.setLeftOrRight(bookConfig.RightToLeft)):b=new AlbumPage(b,"pageBack",!0,BookType.single_book);return b},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?
(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!0),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!1),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!1),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-right-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));
return[this.pageArray[d],this.pageBackArray[d]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},
getThicknessWidth:function(){var b=[0,0];this.bookAttachments.Items.find("ThicknessManager").each(function(c){b=c.getThicknessWidth()});return b},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},
show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleBook),AlbumCanlendar=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){return!1},toSoftPage:function(b){return!1},toHardPage:function(b){return!0},isHardPage:function(b,c){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(b){},newPage:function(b){return new AlbumPage(b,"page",!1,BookType.normal_book)},
getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!0),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-up-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-down-side")):(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!1),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-down-side"),this.pageArray[c]&&
this.pageArray[c].setCSSByName("flip-hard-up-side"));return[this.pageArray[b],this.pageArray[c]]}}).extend(NormalCalendar),AlbumHardCalendar=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:toSoftPage:function(b){return!1},toHardPage:toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,
totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!1:!0},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):this.currentPageIndex==totalPageCount?
gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();this.hardCover=new HardCalendarCover(this.flipBook)},newPage:followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!0),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-up-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-down-side")):(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!1),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-down-side"),
this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-up-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},
hide:function(){this._super();this.hardCover.hide()}}).extend(NormalCalendar),OpenAlbumHardCalendar=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toHardPage:toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isHardPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount&&gotoPageFun(totalPageCount-1,!1,"cross page")},newPage:).extend(AlbumHardCalendar),SingleAlbumCalendar=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){return!1},toSoftPage:function(b){return!1},toHardPage:function(b){return!0},isHardPage:toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(b){},newPage:function(b){return new AlbumPage(b,"page",!0,
BookType.single_book)},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!0),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-up-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-down-side")):(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!1),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!1),
this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-down-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-up-side"));return[this.pageArray[d],this.pageBackArray[d]]}}).extend(SingleCalendar),SingleAlbumHardCalendar=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:toSoftPage:toHardPage:toCoverPage:isCoverPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!0:!1},isHardPage:gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();this.hardCover=new SingleHardCalendarCover(this.flipBook)},newPage:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardPage(b,"page",!0,BookType.single_book),
b.setUpOrDown(bookConfig.RightToLeft)):b=new AlbumPage(b,"page",!0,BookType.single_book);return b},newPageBack:followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){var b=[0,0];this.bookAttachments.Items.find("ThicknessManager").each(function(c){b=c.getThicknessWidth()});return b},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleCalendar),zoom_icons={moveByPos:"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",
moveByDrag:"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",
ZU:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAL0lEQVR42mL8z0AYMDEMDUX/Gf7TyjrG/6gWocmSbRLCPEZ6OHwIRTAAAAD//wMAHjoIG4Kx7iYAAAAASUVORK5CYII=",
PB:"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",
ZD:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAJklEQVR42mL8z0AYMDGMeEUsKDz0QGMkwSTG0RAnShEAAAD//wMAU6UDIxn1UhsAAAAASUVORK5CYII=",
ZO:"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",
PR:"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",
NE:"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",
"arrow-left":"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"};
bdor[500]=global.bdor[404];bdor[13]="p";
var ZoomControlBar=Class({create:initButtons:initBar:getImageUrl:setVisible:buttonChangeColor:setPosition:initEvent:function(){this.btnZoomUp.bind(_event._end,function(){BookEvent.trigger("zoomIn",["zoom bar",BookInfo.getCurrentPages().join("-")]);this.zoomUp()}.bind(this));this.btnZoomDown.bind(_event._end,function(){BookEvent.trigger("zoomOut",["zoom bar",BookInfo.getCurrentPages().join("-")]);
this.zoomDown()}.bind(this));this.btnZoomOut.bind(_event._end,function(){BookEvent.trigger("zoomOut",["zoom bar",BookInfo.getCurrentPages().join("-")]);this.zoomOut()}.bind(this));this.btnPre.bind(_event._end,function(){rightToLeft?nextPageFun("zoom bar"):previousPageFun("zoom bar")});this.btnNext.bind(_event._end,;this.btnMoveMode.bind(_event._end,function(){BookEvent.trigger("zoomMove",["zoom bar",BookInfo.getCurrentPages().join("-")]);
this.changeMoveMode()}.bind(this))},changeMoveMode:function(){1==this.moveByMousePosition?(this.moveByMousePosition=!1,this.btnMoveMode.empty().append(getImage(this.moveByPositionUrl)).attr("title",getLanguage("btnPositionToMove","Move by mouse position"))):(this.moveByMousePosition=!0,this.btnMoveMode.empty().append(getImage(this.moveByDragUrl)).attr("title",getLanguage("btnDragToMove","Move by mouse drag")));this.btnMoveMode.changeButtonColor(bookConfig.iconColor)},destroy:function(){this.bar.remove()},
zoomUp:function(b){var c=BookInfo.getBook().showPage;if(!c.parameters.eventCancel&&!c.parameters.zoomming){bookConfig.AnnotationButtonVisible&&global.annotationCookie&&global.annotationCookie.saveCookie();c.scale=c.parameters.toScale;var d=Math.min(c.parameters.naturalHeight*c.maxScale/c.parameters.height,1.2*parseFloat(c.scale));d!=c.scale&&(b||(b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]}),c.parameters.origin=c.mathOrigin(c,b),c.originObj(c,
c.parameters.origin),c.animateToScale(c,d,b,300))}},zoomDown:function(b){var c=BookInfo.getBook().showPage;if(!c.parameters.eventCancel&&!c.parameters.zoomming){bookConfig.AnnotationButtonVisible&&global.annotationCookie&&global.annotationCookie.saveCookie();b||(b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]});c.scale=c.parameters.toScale;c.parameters.origin=c.mathOrigin(c,b);c.originObj(c,c.parameters.origin);var d=c.parameters.naturalHeight/c.parameters.height,
e=.8*parseFloat(c.scale);e<=d&&(c.parameters.zoomOut=!0);c.animateToScale(c,Math.max(d,e),b,300)}},zoomOut:),CatalogZoomControlBar=Class({}).extend(ZoomControlBar),ZoomMap=Class({create:init:show:hide:onResize:
fillContent:fillImage:refreshArea:function(){if(this.book.showPage){var b=this.book.showPage,c=b.width(),d=b.height();b=getTransform(b[0]);var e=this.getBookPosition();if(1==this.book.doublePage&&0==this.doublePage)if(bookConfig.FlipDirection){d/=2;var f=BookInfo.getBook().getCurrentPageIndex();BookInfo.isLeftPage(f,!0)||(e.top+=d)}else c/=2,f=BookInfo.getBook().getCurrentPageIndex(),BookInfo.isLeftPage(f,
!0)||(e.left+=c);f=-(e.left+b.x);var g=-(e.top+b.y);b=(f+windowWidth)/c;e=(g+windowHeight)/d;c=Math.max(0,f/c);d=Math.max(0,g/d);b=Math.min(1,b);e=Math.min(1,e);f=this.width;this.mapCursor.css({left:c*f,top:d*this.height,width:(b-c)*f,height:(e-d)*this.height})}},getBookPosition:function(){var b=this.book.showPage.css("left");b=parseInt(b.replace("px",""));var c=this.book.showPage.css("top");c=parseInt(c.replace("px",""));return{left:b,top:c}},initEvent:onPan:function(b){if(b&&b.pointers&&1==b.pointers.length){var c=this.book.showPage.width()/this.width,d=this.book.showPage.height()/this.height;c=this.book.showPage.panForMove(this.book.showPage,-b.deltaX*c,-b.deltaY*d,!1);this.refreshArea();this.mapCursor.css({"background-color":"RGBA(245,225,135,0.8)",cursor:"move"});if("panend"==b.type||"pancancel"==b.type)this.mapCursor.css({"background-color":"RGBA(250,240,185,0.5)",
cursor:"default"}),this.book.showPage.setZoomParameters(this.book.showPage,c),this.book.showPage.restrictInBoundary(this.book.showPage,this.refreshArea.bind(this))}}}),FlipShotBar=Class({create:
init:onResize:setPosition:setScale:setVisible:getContainer:function(){return this.flipShotObj},initEvents:function(){this.isLeft?(this.prevDiv.bind(_event._end,function(b){rightToLeft?nextPageFun("flip shot bar"):previousPageFun("flip shot bar")}),this.firstDiv.bind(_event._end,function(b){rightToLeft?lastPageFun("flip shot bar"):firstPageFun("flip shot bar")})):(this.prevDiv.bind(_event._end,function(b){rightToLeft?previousPageFun("flip shot bar"):nextPageFun("flip shot bar")}),this.firstDiv.bind(_event._end,
);this.prevDiv.on("mousedown mouseup touchstart",function(b){b.stopPropagation()});this.firstDiv.on("mousedown mouseup touchstart",function(b){b.stopPropagation()})},setVisibleByIndex:refresh:function(){}}),setCurrentIndexTextField=function(b){b=getShownPageNumberInfo(b);$("#guidPageIndex").html("<b>"+b+"</b>");$("#currentPageIndexTextField")&&$("#currentPageIndexTextField")[0]&&
!$("#currentPageIndexTextField")[0].onFocus&&$("#currentPageIndexTextField").val(b);for(var c=$(".currentPageIndexTextField"),d=0;d<c.length;d++)c[d]&&!c[d].onFocus&&$(c[d]).val(b)},getShownPageNumberInfo=getShownPageArray=function(){var b=bookConfig.pageNumberCaption+"",c=originTotalPageCount;";"==b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1));b=b.split(";");for(var d=[],e=0;e<b.length;e++)if(""!=b[e]&&void 0!=b[e]){var f=b[e].split(":");if(f[0])if(f[1]||(f[1]=""),-1<f[1].indexOf("+")){var g=f[0];g.indexOf("-");g=g.split("-");var h=g[0];g=g[1];h=parseInt(h);var k=g?parseInt(g):c;f=getPageNumberFormat(f[1]);for(var l=h;l<=k;l++){var n=(l-h)*f.addition+f.startPage;g="";0==f.type&&
(g=n+"");1==f.type&&(g=parseRoman(n));2==f.type&&(g=parseRoman(n).toLowerCase());d[l]=String.format(f.page,g)}}else if(!isNaN(f[0]))h=parseInt(f[0]),d[h]=void 0==f[1]?"":f[1];else if(-1<f[0].indexOf("-"))for(g=f[0],g.indexOf("-"),g=g.split("-"),h=g[0],g=g[1],h=parseInt(h),k=g?parseInt(g):c,l=h;l<=k;l++)d[l]=void 0==f[1]?"":f[1]}return d};
function getPageNumberFormat(b){var c={page:"%s",startPage:1,type:0,addition:1};if(-1<b.indexOf("{")){var d=b.indexOf("{"),e=b.indexOf("}")+1;d=b.substring(d,e);c.page=b.replace(d,"%s");-1<d.indexOf("N+")&&(c.type=0);-1<d.indexOf("R+")&&(c.type=1);-1<d.indexOf("r+")&&(c.type=2);d=d.subBetween("+","}");c.startPage=""==d?1:parseInt(d)}else d=b.split("+")[0],b=b.split("+")[1],c.startPage=""==d?1:parseInt(d),b&&(c.addition=parseInt(b));return c}
function parseRoman(b){if(isNaN(b))return"";for(var c=[" I II III IV V VI VII VIII IX".split(" ")," X XX XXX XL L LX LXX LXXX XC".split(" ")," C CC CCC CD D DC DCC DCCC CM".split(" ")],d="",e,f=0,g=1E3;3>f;f++,g/=10)e=Math.floor(b%g/(g/10)),d+=c[2-f][e];return d}
var getShownPageNumber=getRealPageNumber=getRealPage=function(b){var c=bookConfig.pageNumberCaption;if(""==c||void 0==c)return parseInt(b);b+="";c=getShownPageArray();for(var d=-1,e=c.length,f=1;f<=e;f++)if(c[f]+""==b){d=f;break}return-1!=d?d:isNaN(parseInt(b))||void 0!==c[parseInt(b)]?"error":parseInt(b)},
setLocationHash=nextPageFun=function(b){switch(bookType){case BookType.normal_book:gotoPageFun(BookInfo.getMinPageIndex(flipBook.getCurrentPageIndex())+2,!1,b);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)+1,!1,b);break;case BookType.slide_book:gotoPageFun(BookInfo.getMinPageIndex(slideBook.getRealPageIndex())+2,!1,b);break;case BookType.singleSlide_book:gotoPageFun(parseInt(singleSlideBook.getRealPageIndex())+
1,!1,b);break;case BookType.catalog_book:gotoPageFun(BookInfo.getMinPageIndex(catalogBook.getCurrentPageIndex())+2,!1,b);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)+1,!1,b)}},previousPageFun=function(b){switch(bookType){case BookType.normal_book:gotoPageFun(BookInfo.getMaxPageIndex(flipBook.getCurrentPageIndex())-2,!1,b);break;case BookType.catalog_book:gotoPageFun(BookInfo.getMaxPageIndex(catalogBook.getCurrentPageIndex())-2,!1,b);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)-
1,!1,b);break;case BookType.slide_book:gotoPageFun(BookInfo.getMaxPageIndex(slideBook.getRealPageIndex())-2,!1,b);break;case BookType.singleSlide_book:gotoPageFun(singleSlideBook.getRealPageIndex()-1,!1,b);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)-1,!1,b)}},firstPageFun=lastPageFun=gotoPageFun=function(b,c,d){if(!(isNaN(b)||BookEvent.trigger("beforeFlipPage",[b])||
(gotoPageVisit(b,d),BookEvent.suspendFlipPage&&0<=BookInfo.getCurrentPagesByIndex(b).indexOf(parseInt(BookEvent.suspendFlipPage))))){b=parseInt(b);var e=bookConfig.totalPageCount;bookConfig.SingleModeBanFlipToLastPage&&bookType==BookType.single_book&&(e=Math.max(1,bookConfig.totalPageCount-1));if(1>b&&bookConfig.isShowFirstOrLastPagePrompt||b>e&&bookConfig.isShowFirstOrLastPagePrompt){if(0>BookInfo.getCurrentPages().indexOf(e)&&b>e){gotoPageFun(e,c,d);return}if(0>BookInfo.getCurrentPages().indexOf(1)&&
1>b){gotoPageFun(1,c,d);return}if(bookConfig.isShowFirstOrLastPagePrompt){b=1>b?getLanguage("lblFirst","This is the first page"):getLanguage("lblLast","This is the last page");global._tipsBox||(_tipsBox=new TipsBox(b,bookContainer));_tipsBox.setCaption(b);_tipsBox.showTipsBox();return}}d=b;BookInfo.isDoublePage()&&(d=BookInfo.getMinPageIndex(d));d=Math.max(1,d);if(passwardType()&&bookConfig.excludeFrontPages&&d>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward())global.passwardPannel||(global.passwardPannel=
new PasswardPannel),global.passwardPannel.show();else{switch(bookType){case BookType.normal_book:flipBook.gotoPage(b,c);break;case BookType.single_book:singlePageBook.gotoPage(b,c);break;case BookType.slide_book:slideBook.gotoPage(b,c);break;case BookType.singleSlide_book:singleSlideBook.gotoPage(b,c);break;case BookType.catalog_book:catalogBook.gotoPage(b,c);break;case BookType.singleCatalog_book:singleCatalogBook.gotoPage(b,c)}global.bookmark&&global.bookmark.elements.refreshElements();bookConfig.SelectTextButtonVisible&&
BookInfo.getBook().unSelect();bookConfig.MagnifierButtonVisible&&BookInfo.getBook().unMagnifierZoom();global.annotationPannel&&global.annotationPannel.clearBtnDownCase();bookConfig.addCurrentPage&&global.sharePanel&&global.sharePanel.elements&&global.sharePanel.elements.fillArea(!0,"link");global.downLoadBody&&downLoadBody.gotoPage(b);if(bookConfig.AnnotationButtonVisible&&!isPhone()&&!isPad()&&BookInfo.getBook().bookAttachments.noteAdd)BookInfo.getBook().bookAttachments.noteAdd.onResize();setCurrentIndexTextField(BookInfo.getCurrentPageIndex(),
BookInfo.isDoublePage());setLocationHash(BookInfo.getCurrentPageIndex());global.phoneGotoPagePanel&&global.phoneGotoPagePanel.visible&&global.phoneGotoPagePanel.refreshSlider();global.NeatStyle&&NeatStyle.refreshSlider();global.assistant&&global.assistant.refresh();global.pcArticlePages&&(global.pcArticlePages.clearHighLight(),global.pcArticlePages.setHighLight(b));global.phoneArticlePages&&(global.phoneArticlePages.clearHighLight(),global.phoneArticlePages.setHighLight(b));global.flipPageAudio&&
global.flipPageAudio.playByIndex(b);global.phoneGotoPagePanel&&global.phoneGotoPagePanel.showFirstOrLast();global.flipShotButton&&global.flipShotButton.showFirstOrLast();global.toolbar&&global.toolBar&&global.toolBar.showFirstOrLast&&global.toolBar.showFirstOrLast()}}},gotoPageVisit=function(b,c){var d=window.lastVisitTime?(new Date).getTime()-window.lastVisitTime:0;window.lastVisitTime=(new Date).getTime();BookEvent.trigger("flipPage",[c,BookInfo.getCurrentPages().join("-"),BookInfo.getCurrentPagesByIndex(b).join("-"),
d])},BookInfo=Class({statics:{getCurrentPages:function(){var b=[];if(this.isDoublePage()){var c=this.getCurrentPageIndex();b=this.getPagesByIndex(c)}else c=this.getCurrentPageIndex(),b.push(c);return b},getCurrentPagesByIndex:function(b){var c=[];this.isDoublePage()?c=this.getPagesByIndex(b):c.push(b);return c},getPageCount:function(){return bookConfig.totalPageCount},isRightToLeft:function(){return rightToLeft},getBookType:function(){return bookType},getBook:function(){switch(this.getBookType()){case BookType.normal_book:var b=
global.flipBook;break;case BookType.single_book:b=global.singlePageBook;break;case BookType.slide_book:b=global.slideBook;break;case BookType.singleSlide_book:b=global.singleSlideBook;break;case BookType.catalog_book:b=global.catalogBook;break;case BookType.singleCatalog_book:b=global.singleCatalogBook}return b},getCurrentPageIndex:isDoublePage:left:function(){var b=this.getBook();return b&&b.getLeft?b.getLeft():0},top:function(){var b=this.getBook();return b&&b.getTop?b.getTop():0},width:function(){var b=this.getBook();return b&&b.getWidth?b.getWidth():0},height:function(){var b=this.getBook();return b&&b.getHeight?b.getHeight():0},scale:isZoomming:zoomStatus:container:function(){return bookContainer},getThumbnailPages:getPagesByIndex:isLeftPage:
isInnerPage:isCoverPage:getHardCoverPages:getSensitiveIndex:getMinPageIndex:getMaxPageIndex:}),FlipHistory=Class({create:backward:function(){var b=this.currentIndex-1;void 0!=this.array[b]&&(this.currentIndex=b,gotoPageFun(this.array[b].index,!0,"history"))},forward:function(){var b=this.currentIndex+1;void 0!=this.array[b]&&(this.currentIndex=b,gotoPageFun(this.array[b].index,!0,"history"))},addFromCurrentIndex:push:),flipHistory=new FlipHistory,CatalogBook=Class({bookType:BookType.catalog_book,guidBarHeight:0,create:function(b){this._super(b)},initAttachments:function(){this._super();this.flipShotBarManager=new FlipShotBarManager(this.flipBook,this);bookConfig.flipshortcutbutton&&this.flipShotBarManager.appendTo(this.flipBook);this.flipShotBarManager.refresh()},
newPage:function(b){return 1!=b&&2!=b&&b!=totalPageCount&&b!=totalPageCount-1||!bookConfig.HardPageEnable?bookConfig.HardInnerPageEnable?new AlbumPage(b,"page",!1,BookType.catalog_book):new NormalPage(b,"page",!1,BookType.catalog_book):new HardPage(b,"page",!1,BookType.catalog_book)},setAttachmentBeforeFlipTo:setAttachmentAfterFlipTo:afterCurling:function(){this._super();
this.flipShotBarManager.refresh()},resizeAttachmentAfterZoomIn:getControlBarTop:function(){return"lite"==bookConfig.ToolbarViewMode.toLowerCase()?50:templateArea.getTopHeight()+5},beforeZoomIn:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.transparent&&thumbnail.transparent()},resetZoomConfig:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.noTransparent&&thumbnail.noTransparent()},
onResize:getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+templateArea.getBottomHeight();b&&(c+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),d+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),
e+=bookConfig.hardCoverBorderWidth,f+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:e,bottom:f}}}).extend(NormalBook),CatalogHardBook=Class({bookType:BookType.catalog_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?
!1:!0},toSoftPage:function(b){if(bookConfig.HardInnerPageEnable)return!1;var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){if(!bookConfig.HardInnerPageEnable)return!1;var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||
0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},isHardPage:function(b,c){return bookConfig.HardInnerPageEnable&&1!=b&&2!=b&&b!=totalPageCount&&b!=totalPageCount-1?!0:!1},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=
[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();
this.hardCover=new HardCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.catalog_book):bookConfig.HardInnerPageEnable?new AlbumPage(b,"page",!1,BookType.catalog_book):new NormalPage(b,"page",!1,BookType.catalog_book)},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&
this.pageArray[b].setLeftOrRight(!0),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));
return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){var b=
[0,0];this.bookAttachments.Items.find("ThicknessManager").each(function(c){b=c.getThicknessWidth()});return b},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();
this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(CatalogBook),OpenCatalogHardBook=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return bookConfig.HardInnerPageEnable||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&
0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toHardPage:function(b){return!bookConfig.HardInnerPageEnable||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isHardPage:function(b,c){return bookConfig.HardInnerPageEnable&&b!=totalPageCount&&b!=totalPageCount-1?!0:!1},isCoverPage:function(b,
c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount&&gotoPageFun(totalPageCount-1,!1,"cross page")},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.catalog_book):bookConfig.HardInnerPageEnable?new AlbumPage(b,"page",!1,BookType.catalog_book):new NormalPage(b,"page",!1,BookType.catalog_book)}}).extend(CatalogHardBook),
CatalogSimpleBook=Class({create:function(b){this._super(b)},initBook:function(){this._super()},showOrHideLiteThumbnail:function(){this.flipPageManager.array&&0<this.flipPageManager.array.length||this.status_zoom||1!=this.isFlipping&&1!=this.isZomming&&this.adjustBookPosition()},hideToolBarAndShowGuidBar:function(){this.status_zoom||1==this.isFlipping||1==this.isZomming||(this.guidBar&&this.guidBar.show(),toolBar&&toolBar.hide(),this.mode="simple",thumbnail&&thumbnail.visible&&thumbnail.show(),this.adjustBookPosition())},
hideGuidBarAndShowToolBar:function(){this.status_zoom||1==this.isFlipping||1==this.isZomming||(this.guidBar&&this.guidBar.hide(),toolBar&&toolBar.show(),this.mode="complex",thumbnail&&thumbnail.visible&&thumbnail.show(),this.adjustBookPosition())},adjustBookPosition:getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;var c=0;b=this.width*b/4;1!=this.currentPageIndex||bookConfig.isTheBookOpen||(c=rightToLeft?b:-b);this.currentPageIndex==totalPageCount&&(c=rightToLeft?-b:b);b=this.getCssLeft();var d=this.getSpace(!0);return d.left+(windowWidth-d.left-d.right-this.width)/2-b+c},getTranY:getSpace:).extend(CatalogBook),CatalogSimpleHardBook=Class({bookType:BookType.catalog_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){if(bookConfig.HardInnerPageEnable)return!1;
var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){if(!bookConfig.HardInnerPageEnable)return!1;var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=
[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},isHardPage:function(b,c){return bookConfig.HardInnerPageEnable&&1!=b&&2!=b&&b!=totalPageCount&&b!=totalPageCount-1?!0:!1},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&
0>[1,totalPageCount].indexOf(b)?!1:!0},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(b){return 1==
b||2==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.catalog_book):bookConfig.HardInnerPageEnable?new AlbumPage(b,"page",!1,BookType.catalog_book):new NormalPage(b,"page",!1,BookType.catalog_book)},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!0),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),
this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);
this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(CatalogSimpleBook),
OpenCatalogSimpleHardBook=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return bookConfig.HardInnerPageEnable||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toHardPage:function(b){return!bookConfig.HardInnerPageEnable||
0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isHardPage:function(b,c){return bookConfig.HardInnerPageEnable&&b!=totalPageCount&&b!=totalPageCount-1?!0:!1},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?
gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount&&gotoPageFun(totalPageCount-1,!1,"cross page")},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.catalog_book):bookConfig.HardInnerPageEnable?new AlbumPage(b,"page",!1,BookType.catalog_book):new NormalPage(b,"page",!1,BookType.catalog_book)}}).extend(CatalogSimpleHardBook),CatalogCalendar=Class({bookType:BookType.catalog_book,guidBarHeight:0,create:function(b){this._super(b)},newPage:getControlBarTop:function(){return"lite"==bookConfig.ToolbarViewMode.toLowerCase()?50:templateArea.getTopHeight()+5},beforeZoomIn:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.transparent&&thumbnail.transparent()},resetZoomConfig:getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+templateArea.getBottomHeight();b&&(c+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),0),d+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),0),e+=bookConfig.hardCoverBorderWidth,
f+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:e,bottom:f}}}).extend(NormalCalendar),CatalogHardCalendar=Class({bookType:BookType.catalog_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},
toSoftPage:function(b){if(bookConfig.HardInnerPageEnable)return!1;var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){if(!bookConfig.HardInnerPageEnable)return!1;var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=
[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,
c){return bookConfig.HardInnerPageEnable&&1!=b&&2!=b&&b!=totalPageCount&&b!=totalPageCount-1?!0:!1},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:function(){this._super();this.hardCover=
new HardCalendarCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.catalog_book):bookConfig.HardInnerPageEnable?new AlbumPage(b,"page",!1,BookType.catalog_book):new NormalPage(b,"page",!1,BookType.catalog_book)},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!0),
this.pageArray[c]&&this.pageArray[c].setUpOrDown(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-up-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-down-side")):(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!1),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-down-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-up-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);
this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,
c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(CatalogCalendar),OpenCatalogHardCalendar=Class({crossFlipMode:function(b){var c=
this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return bookConfig.HardInnerPageEnable||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toHardPage:function(b){return!bookConfig.HardInnerPageEnable||0<=[totalPageCount-
1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isHardPage:function(b,c){return bookConfig.HardInnerPageEnable&&b!=totalPageCount&&b!=totalPageCount-1?!0:!1},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-
1,!1,"cross page"):b==totalPageCount&&gotoPageFun(totalPageCount-1,!1,"cross page")},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardPage(b,"page",!1,BookType.catalog_book):bookConfig.HardInnerPageEnable?new AlbumPage(b,"page",!1,BookType.catalog_book):new NormalPage(b,"page",!1,BookType.catalog_book)}}).extend(CatalogHardCalendar),CatalogSimpleCalendar=Class({create:function(b){this._super(b)},initBook:function(){this._super()},showOrHideLiteThumbnail:function(){this.flipPageManager.array&&
0<this.flipPageManager.array.length||this.status_zoom||1!=this.isFlipping&&1!=this.isZomming&&this.adjustBookPosition()},hideToolBarAndShowGuidBar:function(){this.status_zoom||1==this.isFlipping||1==this.isZomming||(this.guidBar&&this.guidBar.show(),toolBar&&toolBar.hide(),this.mode="simple",thumbnail&&thumbnail.visible&&thumbnail.show(),this.adjustBookPosition())},hideGuidBarAndShowToolBar:function(){this.status_zoom||1==this.isFlipping||1==this.isZomming||(this.guidBar&&this.guidBar.hide(),toolBar&&
toolBar.show(),this.mode="complex",thumbnail&&thumbnail.visible&&thumbnail.show(),this.adjustBookPosition())},adjustBookPosition:getTranX:getTranY:function(b){if(!bookConfig.retainBookCenter)return 0;var c=0;b=this.height*b/4;1!=this.currentPageIndex||bookConfig.isTheBookOpen||(c=rightToLeft?b:-b);this.currentPageIndex==totalPageCount&&(c=rightToLeft?-b:b);b=this.getCssTop();var d=this.getSpace(!0);return d.top+(windowHeight-d.top-d.bottom-this.pageWidthHeight.y)/2-b+c},getSpace:).extend(CatalogCalendar),CatalogSimpleHardCalendar=Class({bookType:BookType.catalog_book,create:function(b){this._super(b)},crossFlipMode:toSoftPage:toHardPage:toCoverPage:isHardPage:isCoverPage:gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2,!1,"cross page"):
this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):1==b&&gotoPageFun(2,!1,"cross page")},initBook:newPage:followToPoint:getDownUpHardPage:setAttachmentBeforeFlipTo:afterCurling:setAttachmentAfterFlipTo:getThicknessWidth:onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:show:function(){this._super();this.hardCover.show()},hide:).extend(CatalogSimpleCalendar),OpenCatalogSimpleHardCalendar=Class({crossFlipMode:toSoftPage:toHardPage:toCoverPage:isHardPage:isCoverPage:gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1,!1,"cross page"):b==totalPageCount&&gotoPageFun(totalPageCount-1,!1,"cross page")},newPage:).extend(CatalogSimpleHardCalendar),SlideCalendarPage=Class({onPageLoaded:null,create:function(b,c,d,e){this.pageHeight=this.pageWidth=this.height=this.width=this.zIndex=0;this.pageIndex=b;this.pageArray=[];this.bookType=d;this.onPageLoaded=e;this.side=$("<div class='slide_side'></div>");this.side.attr("id",c+b);this.init(b)},init:function(b){isNaN(b)||(this.pages=$("<div class='slide_pages'></div>"),
this.initPages(b),this.setPageCss(),this.side.append(this.pages),this.initEvent())},initEvent:function(){this.adContainer&&this.adContainer.css({"z-index":1});isBelowIE9()?this.pages.IEZoom({side:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)}):this.pages.zoom({side:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)})},zoomIn:function(b){b=BookInfo.getBook();b.status_zoom=!0;b.adContainer&&b.adContainer.css({"z-index":1});
StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(d){d.setAsZoomout();d.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);if(!isPhone()&&!isPad()){this.switchLargeImage();bookConfig.ZoomToolbarVisible&&!this.controlBar&&(this.controlBar=new ZoomControlBar(tmpContainer),this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+c+5));if(this.controlBar){var c="lite"==bookConfig.ToolbarViewMode&&bookType==
BookType.catalog_book?50:0;this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+c+5);this.controlBar.setVisible(!0)}global.canMagnifierZoom&&BookInfo.getBook().unMagnifierZoom()}},zoomOut:function(){var b=BookInfo.getBook();b.status_zoom=!1;b.flipping||!b.adContainer||1!=b.currentPageIndex||bookConfig.isTheBookOpen||b.adContainer.css({"z-index":3});gotoPageFun(b.toPageIndex,!1,"change book type");StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(c){c.setAsZoomin();
c.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);this.switchNormalImage();this.controlBar&&this.controlBar.setVisible(!1)},onZoomed:function(b){if(isPhone()||isPad()){var c=BookInfo.getBook(),d=BookInfo.getCurrentPages();if(void 0!=d&&null!=d)for(var e=0;e<d.length;e++){var f=c.pageArray[d[e]];f&&(bookConfig.highDefinitionConversion?f.zoomInSideImage():(1<b.scale&&f.zoomInSideImage(),1==b.scale&&f.zoomOutSideImage()))}}else b&&!this.pages.parameters.resize&&
(this.pages.parameters.resize=!0,b=this.pages.offset().left,c=this.pages.offset().top,b-=this.pages.parameters.left,c-=this.pages.parameters.top,d=this.pages.parameters.scale,1!=d&&(this.resizePages(parseInt(this.pageWidth*d),parseInt(this.pageHeight*d)),d=1),d=transformCSS({tran:{x:b,y:c},scale:d,origin:{x:0,y:0}}),this.pages.css(d),this.pages.parameters&&(this.pages.parameters.tran={x:b,y:c},this.pages.parameters.scale=1,this.pages.parameters.toScale=1,this.pages.parameters.width=$(this.pages).width(),
this.pages.parameters.height=$(this.pages).height(),this.pages.parameters.origin={x:0,y:0},this.pages.parameters.resize=!1))},mouseWheelFlip:function(){var b;this.side.parent().bind(_event._mousewheel,function(c){if(void 0!=b&&150>new Date-b)var d=!1;else b=new Date,d=!0;if(!d)return!1;d=c.originalEvent;d=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));c=c.originalEvent?c.originalEvent:c;this.status_zoom&&(c={pointers:[{pageX:c.pageX,pageY:c.pageY},{pageX:c.pageX,pageY:c.pageY}]},0>d?this.controlBar&&
this.controlBar.zoomDown(c):this.controlBar&&this.controlBar.zoomUp(c));!this.status_zoom&&bookConfig.mouseWheelFlip&&(0>d?nextPageFun("mouse wheel flip"):previousPageFun("mouse wheel flip"));if(bookConfig.mouseWheelFlip)return stopEvent(c),!1}.bind(this))},initPages:function(b){b=bookConfig.isTheBookOpen?2*b:2*b-1;var c=b-1;var d=rightToLeft?b:c;b=rightToLeft?c:b;this.addPageArray([d,b]);this.leftPage=this.pageArray[d];this.rightPage=this.pageArray[b]},setPageCss:function(){var b=transformCSS({rotate:0,
tran:{x:0,y:0}});!this.rightPage&&this.leftPage&&bookConfig.retainBookCenter?(this.leftPage.centerPage(),this.leftPage.setCSSByStyle(b)):!this.leftPage&&this.rightPage&&bookConfig.retainBookCenter?(this.rightPage.centerPage(),this.rightPage.setCSSByStyle(b)):(this.leftPage&&(this.leftPage.setUpOrDown(!0),this.leftPage.setCSSByStyle(b)),this.rightPage&&(this.rightPage.setUpOrDown(!1),this.rightPage.setCSSByStyle(b)))},addPageArray:function(b){if(b&&this.pageArray)for(var c=0;c<b.length;c++)if(!(0>=
b[c]||b[c]>originTotalPageCount||this.pageArray[b[c]])){var d=new Page(b[c],"page",this.bookType,this.onPageLoaded);d.hideMiddleShadow();d.onResize(this.pageWidth,this.pageHeight);this.pageArray[b[c]]=d;this.pages.append(d.side)}},fillContent:function(b){this.pageArray[b]&&this.pageArray[b].fillContent()},fillImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].fillContent()},remove:function(){this.controlBar&&this.controlBar.destroy();this.side.remove();this.side=
void 0},setCSSByStyle:function(b){this.side.css(b)},setCSSByName:function(b){this.side.addClass(b)},onResize:function(b,c){this.width=b;this.height=c;this.resetPages()},resetPages:function(){if(this.pages){var b=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,c=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;c=fitPageWidthHeight(this.width,this.height,b,2*c);b=parseInt(c.x);
c=2*parseInt(c.y/2);this.resizePages(b,c);this.pages.css({left:(this.width-b)/2+"px",top:(this.height-c)/2+"px"});b=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(b);this.pages.parameters&&(this.pages.parameters.tran={x:0,y:0},this.pages.parameters.scale=1,this.pages.parameters.toScale=1,this.pages.parameters.width=$(this.pages).width(),this.pages.parameters.height=$(this.pages).height(),this.pages.parameters.origin={x:0,y:0},this.pages.parameters.resize=!1,this.pages.swipeInterval&&this.pages.swipeInterval.stop(),
this.pages.animateInterval&&this.pages.animateInterval.stop(),this.pages.parameters.zoomFlag=!1,this.pages.parameters.zoomOut=!0,this.pages.parameters.toScale=1,this.pages.parameters.scale=1);this.controlBar&&this.controlBar.setVisible(!1)}},resizePages:function(b,c){this.pageWidth=b;this.pageHeight=c;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});b=this.pageWidth;c=this.pageHeight/2;for(var d=0;d<this.pageArray.length;d++)if(this.pageArray[d])this.pageArray[d].onResize(b,
c)},loading:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].loading()},setLeftOrRight:function(b){this.isLeft=b},reset:function(){},getSide:function(){return this.side},setZIndex:function(b){this.zIndex=b;this.side.css({"z-index":b})},getZIndex:function(){return this.zIndex},enterSide:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].enterSide()},leaveSide:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&
this.pageArray[b].leaveSide()},initSelectTextEvent:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initSelectTextEvent()},destroySelect:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].destroySelect()},initMagnifierEvent:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initMagnifierEvent()},destroyMagnifier:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].destroyMagnifier()},
pauseAnimation:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].pauseAnimation()},startAnimation:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].startAnimation()},addHistoryTexts:function(b){for(var c=0;c<this.pageArray.length;c++)this.pageArray[c]&&this.pageArray[c].addHistoryTexts(b)},highlightSearch:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].highlightSearch()},clearHighlight:function(){for(var b=
0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].clearHighlight()},resetSlider:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].resetSlider()},initReaderOrSlider:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initReaderOrSlider&&this.pageArray[b].initReaderOrSlider()},fillPage:function(b,c){for(var d=0;d<this.pageArray.length;d++)this.pageArray[d]&&this.pageArray[d].fillPage(b,c)},zoomInSideImage:function(){for(var b=
0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].zoomInSideImage()},zoomOutSideImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].zoomOutSideImage()},switchLargeImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].switchLargeImage()},switchNormalImage:function(b){for(var c=0;c<this.pageArray.length;c++)this.pageArray[c]&&this.pageArray[c].switchNormalImage(b)},resizeSvg:function(b,c){for(var d=0;d<
this.pageArray.length;d++)this.pageArray[d]&&this.pageArray[d].resizeSvg(b,c)}}),SlideBookPage=Class({onPageLoaded:null,create:init:initEvent:zoomIn:function(b){b=BookInfo.getBook();b.status_zoom=!0;b.adContainer&&b.adContainer.css({"z-index":1});StateSynchronous.instance().findButtons("ZoomButton",
!0).each(function(d){d.setAsZoomout();d.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);if(!isPhone()&&!isPad()){this.switchLargeImage();bookConfig.ZoomToolbarVisible&&!this.controlBar&&(this.controlBar=new ZoomControlBar(tmpContainer),this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+c+5));if(this.controlBar){var c="lite"==bookConfig.ToolbarViewMode&&bookType==BookType.catalog_book?50:0;this.controlBar.setPosition((windowWidth-
this.controlBar.width)/2,templateArea.getTopHeight()+c+5);this.controlBar.setVisible(!0)}global.canMagnifierZoom&&BookInfo.getBook().unMagnifierZoom()}},zoomOut:function(){var b=BookInfo.getBook();b.status_zoom=!1;b.flipping||!b.adContainer||1!=b.currentPageIndex||bookConfig.isTheBookOpen||b.adContainer.css({"z-index":3});gotoPageFun(b.toPageIndex,!1,"change book type");StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(c){c.setAsZoomin();c.executeCallback()});window.toolBar&&
window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);this.switchNormalImage();this.controlBar&&this.controlBar.setVisible(!1)},onZoomed:function(b){if(isPhone()||isPad()){var c=BookInfo.getBook(),d=BookInfo.getCurrentPages();if(void 0!=d&&null!=d)for(var e=0;e<d.length;e++){var f=c.pageArray[d[e]];f&&(bookConfig.highDefinitionConversion?f.zoomInSideImage():(1<b.scale&&f.zoomInSideImage(),1==b.scale&&f.zoomOutSideImage()))}}else b&&!this.pages.parameters.resize&&(this.pages.parameters.resize=
!0,b=this.pages.offset().left,c=this.pages.offset().top,b-=this.pages.parameters.left,c-=this.pages.parameters.top,d=this.pages.parameters.scale,1!=d&&(this.resizePages(parseInt(this.pageWidth*d),parseInt(this.pageHeight*d)),d=1),d=transformCSS({tran:{x:b,y:c},scale:d,origin:{x:0,y:0}}),this.pages.css(d),this.pages.parameters&&(this.pages.parameters.tran={x:b,y:c},this.pages.parameters.scale=1,this.pages.parameters.toScale=1,this.pages.parameters.width=$(this.pages).width(),this.pages.parameters.height=
$(this.pages).height(),this.pages.parameters.origin={x:0,y:0},this.pages.parameters.resize=!1))},mouseWheelFlip:function(){var b;this.side.parent().bind(_event._mousewheel,function(c){if(void 0!=b&&150>new Date-b)var d=!1;else b=new Date,d=!0;if(!d)return!1;d=c.originalEvent;d=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));c=c.originalEvent?c.originalEvent:c;this.status_zoom&&(c={pointers:[{pageX:c.pageX,pageY:c.pageY},{pageX:c.pageX,pageY:c.pageY}]},0>d?this.controlBar&&this.controlBar.zoomDown(c):
this.controlBar&&this.controlBar.zoomUp(c));!this.status_zoom&&bookConfig.mouseWheelFlip&&(0>d?nextPageFun("mouse wheel flip"):previousPageFun("mouse wheel flip"));if(bookConfig.mouseWheelFlip)return stopEvent(c),!1}.bind(this))},initPages:function(b){b=bookConfig.isTheBookOpen?2*b:2*b-1;var c=b-1;var d=rightToLeft?b:c;b=rightToLeft?c:b;this.addPageArray([d,b]);this.leftPage=this.pageArray[d];this.rightPage=this.pageArray[b]},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});!this.rightPage&&
this.leftPage&&bookConfig.retainBookCenter?(this.leftPage.centerPage(),this.leftPage.setCSSByStyle(b)):!this.leftPage&&this.rightPage&&bookConfig.retainBookCenter?(this.rightPage.centerPage(),this.rightPage.setCSSByStyle(b)):(this.leftPage&&(this.leftPage.setLeftOrRight(!0),this.leftPage.setCSSByStyle(b)),this.rightPage&&(this.rightPage.setLeftOrRight(!1),this.rightPage.setCSSByStyle(b)))},addPageArray:function(b){if(b&&this.pageArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||
this.pageArray[b[c]])){var d=new Page(b[c],"page",this.bookType,this.onPageLoaded);d.hideMiddleShadow();d.onResize(this.pageWidth,this.pageHeight);this.pageArray[b[c]]=d;this.pages.append(d.side)}},fillContent:fillImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].fillContent()},remove:setCSSByStyle:function(b){this.side.css(b)},
setCSSByName:function(b){this.side.addClass(b)},onResize:resetPages:function(){if(this.pages){var b=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,c=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;c=fitPageWidthHeight(this.width,this.height,2*b,c);b=2*parseInt(c.x/2);c=parseInt(c.y);this.resizePages(b,c);this.pages.css({left:(this.width-
b)/2+"px",top:(this.height-c)/2+"px"});b=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(b);this.pages.parameters&&(this.pages.parameters.tran={x:0,y:0},this.pages.parameters.scale=1,this.pages.parameters.toScale=1,this.pages.parameters.width=$(this.pages).width(),this.pages.parameters.height=$(this.pages).height(),this.pages.parameters.origin={x:0,y:0},this.pages.parameters.resize=!1,this.pages.swipeInterval&&this.pages.swipeInterval.stop(),this.pages.animateInterval&&this.pages.animateInterval.stop(),
this.pages.parameters.zoomFlag=!1,this.pages.parameters.zoomOut=!0,this.pages.parameters.toScale=1,this.pages.parameters.scale=1);this.controlBar&&this.controlBar.setVisible(!1)}},resizePages:function(b,c){this.pageWidth=b;this.pageHeight=c;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});b=this.pageWidth/2;c=this.pageHeight;for(var d=0;d<this.pageArray.length;d++)if(this.pageArray[d])this.pageArray[d].onResize(b,c)},loading:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&
this.pageArray[b].loading()},setLeftOrRight:reset:function(){},getSide:function(){return this.side},setZIndex:function(b){this.zIndex=b;this.side.css({"z-index":b})},getZIndex:function(){return this.zIndex},enterSide:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].enterSide()},leaveSide:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].leaveSide()},initSelectTextEvent:function(){for(var b=0;b<
this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initSelectTextEvent()},destroySelect:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].destroySelect()},initMagnifierEvent:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initMagnifierEvent()},destroyMagnifier:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].destroyMagnifier()},pauseAnimation:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&
this.pageArray[b].pauseAnimation()},startAnimation:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].startAnimation()},addHistoryTexts:function(b){for(var c=0;c<this.pageArray.length;c++)this.pageArray[c]&&this.pageArray[c].addHistoryTexts(b)},highlightSearch:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].highlightSearch()},clearHighlight:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].clearHighlight()},
resetSlider:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].resetSlider()},initReaderOrSlider:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initReaderOrSlider&&this.pageArray[b].initReaderOrSlider()},fillPage:function(b,c){for(var d=0;d<this.pageArray.length;d++)this.pageArray[d]&&this.pageArray[d].fillPage(b,c)},zoomInSideImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].zoomInSideImage()},
zoomOutSideImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].zoomOutSideImage()},switchLargeImage:switchNormalImage:resizeSvg:),SingleSlideBookPage=
Class({initPages:resetPages:function(){if(this.pages){if(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad()))var b=windowWidth,c=windowHeight;else b=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,c=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100,c=fitPageWidthHeight(this.width,this.height,b,c),b=
parseInt(c.x),c=parseInt(c.y);this.resizePages(b,c);this.pages.css({left:(this.width-b)/2+"px",top:(this.height-c)/2+"px"});b=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(b);this.pages.parameters&&(this.pages.parameters.tran={x:0,y:0},this.pages.parameters.scale=1,this.pages.parameters.toScale=1,this.pages.parameters.width=$(this.pages).width(),this.pages.parameters.height=$(this.pages).height(),this.pages.parameters.origin={x:0,y:0},this.pages.parameters.resize=!1,this.pages.swipeInterval&&
this.pages.swipeInterval.stop(),this.pages.animateInterval&&this.pages.animateInterval.stop(),this.pages.parameters.zoomFlag=!1,this.pages.parameters.zoomOut=!0,this.pages.parameters.toScale=1,this.pages.parameters.scale=1)}},resizePages:function(b,c){if(this.pages){this.pageWidth=b;this.pageHeight=c;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});b=this.pageWidth;c=this.pageHeight;for(var d=0;d<this.pageArray.length;d++)if(this.pageArray[d])this.pageArray[d].onResize(b,c)}},
setPageCss:fillPage:function(b,c){this.page&&this.page.fillPage(b,c)}}).extend(SlideBookPage),SlideBook=Class({currentTran:0,create:initBook:function(){this.flipBook=$("<div class='SlideBook' id='SlideBook' ></div>");
this.parent.append(this.flipBook);this.initAttachments()},initAttachments:function(){this.showPage=this.flipBook;this.bookAttachments=new BookAttachmentsBuilder(this.flipBook,this.currentPageIndex,this,this.options.isDoublePage);this.options.thickness&&this.bookAttachments.thickness(!0);this.options.bookshadow&&this.bookAttachments.bookshadow();this.options.grayshadow&&this.bookAttachments.grayshadow();this.options.miniFullscreen&&this.bookAttachments.miniFullscreen();this.options.bookpagenumber&&
this.bookAttachments.bookpagenumber();this.options.staticad&&this.bookAttachments.staticad();this.options.zoommap&&this.bookAttachments.zoommap();this.options.bookmarktab&&this.bookAttachments.bookmarktab();this.options.noteadd&&this.bookAttachments.noteadd()},getBook:function(){return this.flipBook},fillPage:resetPages:addPageArray:setPagePosition:function(b,c){bookConfig.FlipDirection?(c*=windowHeight,c={top:c+"px"}):(c*=windowWidth,c={left:c+"px"});this.pageArray[b]&&this.pageArray[b].setCSSByStyle(c)},orderPages:setPageCss:fillContent:newPage:function(b){return new SlideBookPage(b,
"slidePage",this.bookType)},pageLength:function(){return bookConfig.totalPageCount},unWrapPageExcludeArray:mouseWheelFlip:function(){if(bookConfig.mouseWheelFlip){var b;this.flipBook.bind(_event._mousewheel,function(c){if(void 0!=b&&150>new Date-b)var d=!1;else b=new Date,d=!0;if(!d)return!1;d=c.originalEvent;d=
Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));this.status_zoom&&(c={pointers:[{pageX:c.pageX,pageY:c.pageY},{pageX:c.pageX,pageY:c.pageY}]},0>d?this.currentPage.controlBar&&this.currentPage.controlBar.zoomDown(c):this.currentPage.controlBar&&this.currentPage.controlBar.zoomUp(c));!this.status_zoom&&bookConfig.mouseWheelFlip&&(0>d?nextPageFun("mouse wheel flip"):previousPageFun("mouse wheel flip"));if(bookConfig.mouseWheelFlip)return stopEvent(c),!1}.bind(this))}},flippingTo:getRealPageIndex:function(){return this.currentPageIndex},getRealBookIndex:gotoPage:function(b,c){if(!isNaN(b)){this.toPageIndex=b;if(this.status_zoom)return b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]},c=this.pageArray[this.currentPageIndex].pages,c.onDoubleTap.bind(c)(b),!0;b=this.getRealBookIndex(b);0>=b||b>this.pageLength()||!this.flipEffect(b)||
(!c&&flipHistory&&flipHistory.addFromCurrentIndex(this.toPageIndex),this.flippingTo(b),playFlipSound(),bookConfig.restorePageVisible&&window.localStorage.setItem(realLocation+"?historyPageIndex",this.toPageIndex),this.flipInterval&&this.flipInterval.stop(),this.refreshPages(b),this.flipIntervalTmp(b))}},flipEffect:flipIntervalTmp:refreshPages:getCurrentViewPageIndex:function(){var b=Math.abs(this.currentTran);return this.sequenceList[(0>=this.currentTran?1:-1)*(bookConfig.FlipDirection?Math.floor(b/this.height)+1+(b%this.height>this.height/2)?0:1:Math.floor(b/this.width)+1+(b%this.width>this.width/2)?0:1)]},getFlipTo:getCurrentTran:function(){return this.currentTran},setBookTran:onResize:resize:getTop:function(){return this.bookTop},resizeBook:function(){var b=bookConfig.topMargin+templateArea.getTopHeight(),c=bookConfig.bottomMargin+templateArea.getBottomHeight(),d=bookConfig.leftMargin+templateArea.getLeftWidth(),e=bookConfig.rightMargin+templateArea.getRightWidth();e=windowWidth-d-e;c=windowHeight-b-c;var f=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+
parseFloat(bookConfig.visibleAreaRight))/100,g=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;bookConfig.FlipDirection?(f=fitPageWidthHeight(e,c,f,2*g),this.width=parseInt(f.x),this.height=2*parseInt(f.y/2)):(f=fitPageWidthHeight(e,c,2*f,g),this.width=2*parseInt(f.x/2),this.height=parseInt(f.y));this.bookTop=b+(c-this.height)/2;this.bookLeft=d+(e-this.width)/2;this.flipBook.css({width:this.width+"px",height:this.height+"px",left:this.bookLeft+
"px",top:this.bookTop+"px"})},resizeAdvertisement:function(){var b=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,c=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;bookConfig.FlipDirection?(b=fitPageWidthHeight(this.width,this.height,b,2*c),this.pageWidth=parseInt(b.x),this.pageHeight=2*parseInt(b.y/2)):(b=fitPageWidthHeight(this.width,this.height,2*b,c),this.pageWidth=
2*parseInt(b.x/2),this.pageHeight=parseInt(b.y))},resizePage:getHeight:function(){return this.height},getWidth:function(){return this.width},getScale:getCssLeft:function(){return parseInt(this.flipBook.css("left"))},getCssTop:
checkFlipping:afterFlipTo:setAttachmentBeforeFlipTo:function(){this.bookAttachments.setAttachmentBeforeFlipTo()},setAttachmentAfterFlipTo:function(){this.stopMedia();this.resetSlider();this.flipping||this.enterPage();bookConfig.ThumbnailsButtonVisible&&
thumbnail.clearHighLight();bookConfig.ThumbnailsButtonVisible&&thumbnail.setHighLight(this.getRealPageIndex());window.resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.bookAttachments.setAttachmentAfterFlipTo()},endFlip:function(){this.flipping=!1},loading:getCurrentPageIndex:getCurrentPages:
setCSSByStyle:function(b){this.flipBook.css(b)},setShow:function(b){},hide:show:enterPage:addSearchHighlight:
clearSearchHighlight:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].clearHighlight()},openShownMedia:stopMedia:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].leaveSide()},resetSlider:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].resetSlider()},
afterChangeBookType:function(){console.log("afterChangeBookType");for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].initReaderOrSlider()},select:unSelect:magnifierZoom:unMagnifierZoom:switchLargeImage:switchNormalImage:destroy:function(){}}).extend(Book);
SlideBook.expand({initEvent:hammerEventModular:function(){var b=new Hammer.Manager(this.flipBook[0]);b.add(new Hammer.Pan);b.add((new Hammer.Swipe).recognizeWith(b.get("pan")));b.add(new Hammer.Press({time:"1000"}));b.add(new Hammer.Pinch);b.add(new Hammer.Tap({event:"doubletap",taps:2}));b.on("panstart panmove",this.onPan.bind(this));
b.on("press",this.onPress.bind(this));this.flipBook.bind("click",this.onTap.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind(_event._down,this.onDown.bind(this));$("body").bind(_event._end+" "+_event._leave,this.onUp.bind(this));this.flipBook.speed(this.onSwipe.bind(this))},onPan:onPress:function(b){},onTap:onOver:onDown:onUp:function(b){!this.flipping&&this.fingleDown&&(30<=Math.abs(this.currentTran-this.startTran)&&(this.currentTran>this.startTran&&!rightToLeft||this.currentTran<
this.startTran&&rightToLeft?previousPageFun("window click"):this.currentTran!=this.startTran&&nextPageFun("window click")),this.startTran=this.currentTran,this.panstart=this.fingleDown=!1,this.onBack())},onBack:getNextPage:function(b){this.currentTran>this.startTran&&!rightToLeft||this.currentTran<this.startTran&&rightToLeft?previousPageFun(b):nextPageFun(b)},onSwipe:function(b,c){if(!(this.selected||this.status_zoom||this.isZomming||this.dragToFlip)){var d=30;bookConfig.FlipDirection?(d=d*this.height/1600,b=c):d=d*this.width/1600;Math.abs(b)<=d||(b<-d?rightToLeft?previousPageFun("swipe to flip"):nextPageFun("swipe to flip"):b>d&&(rightToLeft?
nextPageFun("swipe to flip"):previousPageFun("swipe to flip")))}}});
var DoubleSlideBook=Class({getRealPageIndex:getRealBookIndex:pageLength:newPage:function(b){return bookConfig.FlipDirection?new SlideCalendarPage(b,"slidePage",this.bookType):
new SlideBookPage(b,"slidePage",this.bookType)}}).extend(SlideBook),SingleSlideBook=Class({getRealPageIndex:getRealBookIndex:pageLength:newPage:resizeBook:function(){var b=bookConfig.topMargin+templateArea.getTopHeight(),
c=bookConfig.bottomMargin+templateArea.getBottomHeight(),d=bookConfig.leftMargin+templateArea.getLeftWidth(),e=bookConfig.rightMargin+templateArea.getRightWidth();e=windowWidth-d-e;c=windowHeight-b-c;var f=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,g=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;f=fitPageWidthHeight(e,c,f,g);this.width=parseInt(f.x);this.height=parseInt(f.y);
this.bookTop=b+(c-this.height)/2;this.bookLeft=d+(e-this.width)/2;this.flipBook.css({width:this.width+"px",height:this.height+"px",left:this.bookLeft+"px",top:this.bookTop+"px"})}}).extend(SlideBook),PcDoubleSlideBook=Class({bookType:BookType.slide_book,create:function(b){this._super(b)},onResize:function(){this._super();if(bookConfig.FlipDirection)this.bookAttachments.onResize(this.width,this.height/2);else this.bookAttachments.onResize(this.width/2,this.height)}}).extend(DoubleSlideBook),PcSingleSlideBook=
Class({bookType:BookType.singleSlide_book,create:function(b){this._super(b)},onResize:).extend(SingleSlideBook),BookEvent=Class({statics:{bindEvent:function(b,c){"string"==typeof b&&c&&"function"==typeof c&&(this[b]||(this[b]=[]),this[b].push(c))},removeEvent:function(b,c){"string"==typeof b&&c&&"function"==typeof c&&this[b].removeElement(c)},trigger:function(b,c){if((b=this[b])&&0!=b.length){for(var d=!1,e=0;e<b.length;e++)if("function"==
typeof b[e]){var f=b[e].apply(this,c);d=(f?f.paused:!1)||d}return d}}}});var googleAnalytics=function(){bookConfig.googleAnalyticsID&&window.setTimeout(function(){loadJavascript("https://www.googletagmanager.com/gtag/js?id="+bookConfig.googleAnalyticsID,function(){window.dataLayer=window.dataLayer||[];window.gtag=gtag("js",new Date);gtag("config",bookConfig.googleAnalyticsID)},function(){})},3E3)},googleTagManager=function(){bookConfig.googleTagManagerID&&window.setTimeout(function(){var b=window,c=bookConfig.googleTagManagerID;b.dataLayer=
b.dataLayer||[];b.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"});b=document.getElementsByTagName("script")[0];var d=document.createElement("script");d.async=!0;d.src="https://www.googletagmanager.com/gtm.js?id="+c;b.parentNode.insertBefore(d,b)},3E3)},PluginEvent=Class({statics:{bindEvent:removeEvent:
trigger:function(b,c){if((b=this[b])&&0!=b.length){for(var d=!1,e=0;e<b.length;e++)"function"==typeof b[e]&&(d=b[e].apply(this,c)||d);return d}}}}),logEvent=Class({statics:{printLog:!1,visit:function(b,c,d,e,f,g){logEvent.printLog&&console.log("visit",b,c,d,e,f,g)},beforeFlipPage:function(b){logEvent.printLog&&console.log("beforeFlipPage",b)},flipPage:function(b,c,d,e){statisticalData(1,c);bookConfig.googleAnalyticsID&&window.gtag&&gtag("event","click",{event_category:"flipPage",event_label:"goto page:"+
c});logEvent.printLog&&console.log("flipPage",b,c,d,e)},suspendFlipPage:4,zoomIn:function(b,c){logEvent.printLog&&console.log("zoomIn",b,c)},zoomOut:function(b,c){logEvent.printLog&&console.log("zoomOut",b,c)},zoomMove:function(b,c){logEvent.printLog&&console.log("zoomMove",b,c)},jumpLink:function(b,c,d){logEvent.printLog&&console.log("jumpLink",b,c,d)},clickButton:function(b,c,d){bookConfig.googleAnalyticsID&&window.gtag&&gtag("event","click",{event_category:c,event_label:bookConfig.DownloadURL});
logEvent.printLog&&console.log("clickButton",b,c,d)},search:function(b,c,d){statisticalData(6,b);logEvent.printLog&&console.log("search",b,c,d)},share:function(b,c,d){logEvent.printLog&&console.log("share",b,c,d)},print:function(b,c,d){logEvent.printLog&&console.log("print",b,c,d)},addBookmark:function(b,c,d){logEvent.printLog&&console.log("addBookmark",b,c,d)},deleteBookmark:function(b){logEvent.printLog&&console.log("deleteBookmark",b)},editBookmark:function(b,c,d){logEvent.printLog&&console.log("deleteBookmark",
b,c,d)},googleAdSense:function(b,c,d,e,f,g){logEvent.printLog&&console.log("googleAdSense",b,c,d,e,f,g)},playMedia:function(b,c,d,e,f){logEvent.printLog&&console.log("playMedia",b,c,d,e,f)},passward:clickPageItem:function(b,c,d,e,f,g){logEvent.printLog&&console.log("clickPageItem",b,c,d,e,f,g)},orientationchange:function(b,c,d){logEvent.printLog&&console.log("orientationchange",b,c,d)},windowClick:readArticle:});BookEvent.bindEvent("visit",logEvent.visit);BookEvent.bindEvent("flipPage",logEvent.flipPage);BookEvent.bindEvent("jumpLink",logEvent.jumpLink);BookEvent.bindEvent("zoomIn",logEvent.zoomIn);BookEvent.bindEvent("zoomOut",logEvent.zoomOut);BookEvent.bindEvent("zoomMove",logEvent.zoomMove);BookEvent.bindEvent("clickButton",logEvent.clickButton);BookEvent.bindEvent("search",logEvent.search);
BookEvent.bindEvent("share",logEvent.share);BookEvent.bindEvent("print",logEvent.print);BookEvent.bindEvent("addBookmark",logEvent.addBookmark);BookEvent.bindEvent("deleteBookmark",logEvent.deleteBookmark);BookEvent.bindEvent("editBookmark",logEvent.editBookmark);BookEvent.bindEvent("googleAdSense",logEvent.googleAdSense);BookEvent.bindEvent("playMedia",logEvent.playMedia);BookEvent.bindEvent("passward",logEvent.passward);BookEvent.bindEvent("clickPageItem",logEvent.clickPageItem);
BookEvent.bindEvent("orientationchange",logEvent.orientationchange);BookEvent.bindEvent("windowClick",logEvent.windowClick);BookEvent.bindEvent("suspendFlipPage",logEvent.suspendFlipPage);BookEvent.bindEvent("beforeFlipPage",logEvent.beforeFlipPage);
function scrapOriginPageIndex(){window.realLocation=window.location.href.removeStartFrom("?");window.realLocation=realLocation.removeStartFrom("#");var b=bookConfig.OriginPageIndex,c=window.location.hash;""!=c&&3<c.length&&"#p="==c.substr(0,3)&&(b=parseInt(getRealPageNumber(c.substr(3,c.length-3))));b=Number.between(b,1,originTotalPageCount);if(bookConfig.restorePageVisible&&window.localStorage[realLocation+"?historyPageIndex"]){c=parseInt(window.localStorage[realLocation+"?historyPageIndex"]);var d=
window.localStorage[realLocation+"?historySubmmit"];c!=b&&(!d||31<d&&(new Date).getTime()-parseInt(d)>=bookConfig.restorePageDuration||31>=d&&(new Date).getDate()!=parseInt(d))&&showMessage(getLanguage("restorePage","Would you like to restore previous session"),function(){window.localStorage.setItem(realLocation+"?historySubmmit",(new Date).getTime());gotoPageFun(window.localStorage[realLocation+"?historyPageIndex"])})}return b}
function initialization(){window.tmpContainer=$("<div id= 'tmpContainer' class='tmpContainer'></div>");isPC()&&_agent_.browser.safari&&_agent_.system.name==_agent_.system.WINDOWS&&tmpContainer.css({"z-index":0});$("body").append(tmpContainer);window.bookContainer=$("<div id= 'bookContainer' class='bookContainer'></div>");tmpContainer.append(bookContainer);window.soundBaseURL="style/raw/";var b=window.getWidth();windowHeight=window.getHeight();windowWidth=b;checkBookConfig();selectLanguage(bookConfig.language);
initImageBaseUrl();global.onBookLoad=new LoadingBook(tmpContainer,bookConfig.loadingBackground);delayLoading()}
function delayLoading(){var b=function(){window.jsLoadingBar&&(jsLoadingBar.destroy(),onBookLoad.chooseBookStyle(),window.hasOwnProperty("GuideLoadingJS")&&jsLoadingBar instanceof GuideLoadingJS||(jsLoadingBar=null))};window.setTimeout(function(){window.loadingConfig&&loadingConfig.loadingVideo&&jsLoadingBar&&jsLoadingBar.showVideo?(jsLoadingBar.showVideo(),$(jsLoadingBar.video).bind("pause",function(){b()}),$(jsLoadingBar.video).bind("ended",,jsLoadingBar.video.ontimeupdate=function(){60<=
jsLoadingBar.video.currentTime&&b()}):window.jsLoadingBar?b():onBookLoad.chooseBookStyle()},Math.max(1E3*parseInt(window.loadingConfig&&window.loadingConfig.loadingDisplayTime||.01),10))}var onWindowClick=function(){};window.isSupportWebp=!1;(function(){function b(d){window.isSupportWebp=d&&"load"===d.type?1==c.width:!1;var e=window.setInterval(function(){window.Module&&Module.isReady&&(window.clearInterval(e),initialization())},100)}var c=new Image;c.onerror=b;c.onload=b;c.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})();
function initBookFrame(){useTheAliCloudChart();useTheFliphtml5Service();window.rightToLeft=bookConfig.RightToLeft;initBrowserType();changeBookConfigValue("pageRestrictUrl",uiBaseURL+"articleEmpty.png");changeBookConfigValue("OriginPageIndex",bookConfig.OriginPageIndex?bookConfig.OriginPageIndex:1);changeBookConfigValue("upsideOnMobile",;global.originTotalPageCount=parseInt(bookConfig.totalPageCount);
global.totalPageCount=originTotalPageCount+(1==originTotalPageCount%2&&!bookConfig.isTheBookOpen||0==originTotalPageCount%2&&bookConfig.isTheBookOpen?1:0);initBook();changeShowBook(bookType);resizeFlipBook();resizeSlideBook();try{Module._monitorWH(window.key_index,bookConfig.largePageWidth/bookConfig.largePageHeight,originTotalPageCount)}catch(b){}};
