"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5780],{19742:function(e,n,t){t.d(n,{Z:function(){return p},O:function(){return v}});var r=t(73126),o=t(59056),i=(t(41539),t(88674),t(17727),t(73397)),a=t(54871),l=t(44586),u=t(92744),c=t(67294),s=t(94184),f=t.n(s),d=t(93073);function p(e){var n=e.followedText,t=e.onChange,s=e.source,p=e.groupId,v=e.defaultIsFollow,m=e.isFollow,h=e.className,y=e.buttonProps,g=c.useRef(null!=m).current,_=(0,c.useState)(m||v),E=(0,o.Z)(_,2),b=E[0],C=E[1],w=(0,a._n)(),Z=(0,c.useState)(!1),k=(0,o.Z)(Z,2),x=k[0],P=k[1];(0,c.useEffect)((,[m]);var S=!!w&&b,T=(0,c.useCallback)((0,u.Ye)((function(n){P(!0);var r=S;return i.x6({action:r?"unfollow":"follow",to_user_id:e.toUserID,Source:s,GroupId:p}).then((function(e){var n=e.data.data,o=(0,u.IT)(n);o||n.BaseResp&&0===n.BaseResp.StatusCode?(C(!r),t&&t(!r,o)):n.BaseResp&&6===n.BaseResp.StatusCode&&l.Z.error("æ ¹æ®å¯¹æ–¹è®¾ç½®ï¼Œä½ ä¸èƒ½è¿›è¡Œæ­¤æ“ä½œ")})).finally((function(){P(!1)}))}),"follow"),[e.toUserID,S,t]);return c.createElement(d.zx,(0,r.Z)({"arin(e){null==e||e.stopPropagation(),T(e)},type:S?"ghost-weak":"primary",loading:x,className:f()("component-follow",h)},y),c.createElement("span",null,S?n||"å·²å…³æ³¨":"å…³æ³¨"))}var v=function(e){var n=e.defaultValue,t=e.value,r=e.uid,a=e.source,s=e.source_id,f=e.onChange,d=c.useRef(null!=t).current,p=(0,c.useState)(!(!t&&!n)),v=(0,o.Z)(p,2),m=v[0],h=v[1];(0,c.useEffect)((function(){d&&void 0!==t&&h(t)}),[t]);var y=(0,c.useCallback)((0,u.Ye)((function(){return i.x6({action:m?"unfollow":"follow",to_user_id:r,Source:a,source_id:s}).then((function(e){var n=e.data.data,t=(0,u.IT)(n);t||n.BaseResp&&0===n.BaseResp.StatusCode?(h(!m),f(!m,t)):n.BaseResp&&6===n.BaseResp.StatusCode&&l.Z.error("æ ¹æ®å¯¹æ–¹è®¾ç½®ï¼Œä½ ä¸èƒ½è¿›è¡Œæ­¤æ“ä½œ")}))}),"follow"),[r,m,f]);return{isFollow:m,changeFollow:y}}},10994:function(e,n,t){var r,o,i;t.d(n,{Re:function(){return o},lx:function(){return i}}),function(e){e[e["cmn-Hans-CN"]=0]="cmn-Hans-CN",e[e["cmn-Hans-CN|eng-US"]=1]="cmn-Hans-CN|eng-US",e[e["eng-US"]=2]="eng-US",e[e["rus-Ron(e){e.NO_LOOP="noLoop",e.VIDEO_LOOP="videoLoop",e.PSERIES_LOOP="pSeriesLoop"}(o||(o={})),function(e){e.useTicket="useTicket",e.bigVip="bigVip"}(i||(i={}))},52733:function(e,n,t){t.d(n,{f:function(){return l}});var r=t(94473),o=t.n(r),i=t(67294),a=t(63274),l=function(){var e=(0,a.Z)().state,n=e.list,t=e.curren=-1;return{currentItem:o()(n).call(n,(function(n,r){return n.gid===t&&(e=r,!0)})),currentItemIndex:e}}),[n,t])}},15853:function(e,n,t){var r=t(59056),o=t(67294),i=t(14719),a=t(32580),l=t(10256),u=t(41453),c=t(44586),s=t(92744),f=t(72671),d=(0,i.Z)((function(){var e,n=null===(e=d._data)||void 0===e?void 0:e.product,t=(0,o.useState)(""),i=(0,r.Z)(t,2),c=i[0],f=i[1],p=(0,o.useRef)(!1),v=(0,o.useRef)(null),h=(0,o.useCallback)((function(){d.hide()}),[]);(0,o.useEffect)((functurl).then((function(e){return f(e)})).catch((function(e){return console.log(e)}))}),[n]),(0,o.useEffect)((function(){var e=d._data.player;return e&&!e.paused?(e.pause(),function(){e.play()}):function(){}}),[]),(0,o.useEffect)((function(){var e=function(e){p.current=!!e,h()},t=(0,u.Z)(n.order.id,e);return function(){var r;null==d._data.player||null!==(r=d._data.player)&&void 0!==r&&r.ended?(0,u.Z)(n.order.id,e):t()}}),[h,n]),(0,o.useEffect)((function(){var e;null===(e=v.current)||void 0===e||e.focus();var n=ntListener("("keyup",n,!0)}}),[]);var y=function(){h(),p.current&&window.location.reload()};return o.createElement(m,{ariaLabel:"æ‰«ç æ”¯ä»˜"},o.createElement("div",{className:"episodePay-dialog-head"},o.createElement("span",{tabIndex:0,ref:v},"æ‰«ç æ”¯ä»˜"),o.createElement("i",{className:"episodePay-dialog-close",tabIndex:0,onClick:y,onKeyDown:function(e){(0,s.vx)(e.keyCode)&&y()}})),o.createElement("div",{className:"episodePay-dialog-content"},o.createElement("div",{className:"episodePay-dialog-left",tabIndex:0},o.createElement(a.Z,{url:c}),o.createElement("p",{className:"payways"},"å¾®ä¿¡/æ”¯ä»˜å®æ‰«ç æ”¯ä»˜")),o.createElement("div",{className:"episodePay-dialog-right",tabIndex:0},o.createElement("p",{className:"reason"},"å› ç‰ˆæƒæ–¹è¦æ±‚"),o.createElement("p",{className:"reason"},"å®Œæ•´ç‰ˆéœ€ä»˜è´¹è§‚çœ‹"),o.createElement("div",{className:"episodePay-dialog-cost"},o.createElement("i",{className:"icon-rmb"}),o.createElement("span",{className:"cost"},null==n?void 0:n.price),(null==n?void 0:n.originPrice)&&o.createElement("span",{className:"episodePay-dialog-discount"},"ä¼šå‘˜ç‰¹æƒ ",o.createElement("del",null,"åŸä»·",null==n?void 0:n.originPrice,"å…ƒ"))),o.createElement("p",{className:"episodePay-dialog-tips"},null==n?void 0:n.tips))))}),void 0,!0,"episodePay-dialog");n.Z=d,d._data={player:nushow=function(e){var n,t=null===(n=d._data.product)||void 0===n?void 0:n.order;t&&!p&&(0!==t.code?(p=!0,c.Z.error(t.message,void 0,(function(){return p=!1}))):v(e))};var m=function(e){var n=e.ariaLabel,t=(0,o.useRef)(null),r=(0,f.Z)();return(0,o.useEffect)((function(){if(r)return r.maintain.tabFocus({context:t.current}).disengage}),[r]),o.createElement("section",{ref:t,role:"dialog","aria-label":n,"aria-modal":!0,tabIndex:0},e.children)}},41453:function(e,n,t){t.d(n,{Z:function(){return s}});var r,o=t(33938),i=t(63109),a=t.n(i),l=t(29985),u=t(45579),c=t(44586);function s(e,n){return e&&"0"!==e&&(clearTimeout(r),r=setTimeout((0,o.Z)(a().mark((function t(){var r;return a().wrap((function(t){for(n t.next=2,l.Z.pay.getOrderStatus({id:e});case 2:r=t.sent,r===u.iF.OrderStatusSuccess?(c.Z.success("æ”¯ä»˜æˆåŠŸ"),setTimeout((function(){window.location.reload()}),3e3),null==n||n(!0)):s(e,n);case 5:case"end":return t.stop()}}),t)}))),3e3)),function(){return clearTimeout(r)}}},89680:function(e,n,t){var r=t(73126),o=t(41266),i=t(67294),a=t(59314),l=t(94184),u=t.n(l),c=["className"];n.Z=function(e){var n=e.className,t=(0,o.Z)(e,c);return i.createElement(a.Z,(0,r.Z)({className:u()("component-switch",n)},t))}},72671:function(e,n,t){var r=t(59056),o=(t(66992),t(41539),t(88674),t(78783)nction(){var e=(0,o.useState)(),n=(0,r.Z)(e,2),i=n[0],a=n[1];return(0,o.useEffect)((function(){t.e(6778).then(t.t.bind(t,66462,23)).then((function(e){a(e.default)}))}),[]),i}},9795:function(e,n,t){t.d(eturn c}});var r=t(59056),o=t(67294),i=t(16289),a=function(e,n){var t=!1;return"undefined"!=typeof window&&(i.Z.on(e,(function(){t=!0})),i.Z.on(n,(function(){t=!1}))),function(){var a=(0,o.u1];return(0,o.useEffect)((function(){var t=function(){return c(!0)},r=function(){return c(!1)};return i.Z.on(e,t),i.Z.on(n,r),function(){i.Z.off(e,t),i.Z.off(n,r)}})),u}},l=a(i.o.searchFoucs,i.o.searchBlur),u=a(i.o.tipoffShow,i.o.tipoffHide),c=a(i.o.feedbackShow,i.o.feedbackHide),s=a(i.o.shareShow,i.o.shareHide),f=a(i.o.loginShow,i.o.loginHide),d=a(i.o.commentFocus,i.o.commentBlur),p=a(i.o.danmakuFocus,i.o.danmakuBlur),v=a(i.o.danmakuReplyFocus,i.o.danmakuReplyBlur);n.Z=function(){var e=l(),n=u(),t=c(),r=s(),o=f(),i=d(),a=p(),m=v();return e||n||t||r||o||i||a||m}},8447:function(e,n,t){var r=t(33938),o=t(59056),i=t(74),t(78783),t(33948),t(67294));n.Z=function(){var e=(0,l.useState)(),n=(0,o.Z)(e,2),t=n[0],r=n[1];return(0,l.useEffect)((function(){u().then((function(e){r(e)}))}),[]),t};var u=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(9456).then(t.t.bind(t,11248,23)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},6639:function(e,n,t){var r=t(12011),o=t(49970);n.Z=function(){var e;return(null===(e=r.Z.getMyABInfoV2().isFullScreenOptimize)||void 0===e?void 0:e.enable)||(0,o.Z)()}},49970:function(e,n,t){var r=t(12011);n.Z=function(){var e;return null===(e=r.Z.getMyABInfoV2().seriesFlow)||void 0===e?void 0:e.enable}},96912:function(e,n,t){var r=t(59056),o=t(59340),i=t.n(o),a=t(67294),l=t(73397),u=t(28216),c=t(75843),s=t(4461),f=t(68956);n.Z=function(){var e=(0,u.v9)((function(e){return e[c.VD.anyVideo]})),n=(0,a.useState)((null==e?void 0:e.h265TccConfig)||{}),t=(0,r.Z)(n,2),o=t[0],d=t[1];return(0,a.useEffect)((function(){null!=e&&e.h265TccConfig&&"EmptyAnyVideo"!==(null==e?void 0:e.pageType)||l.Xc().then((function(e){var n;d(null==e||null===(n=e.data)||void 0===n?void 0:n.data)})).catch((function(e){d(s.Sv),f.Z.player.reportH265TccFailed({error:i()(e||{})})}))}),[e]),{h265TccConfig:o}}},62470:function(e,n,t){t.d(n,{As:function(){return d},q6:function(){return p}});var r=t(59056),o=t(67294),i=t(14173),a=t(47561),l=t.n(a),u=t(91481),c=t(55494),s={exclusive:"åº”ç‰ˆæƒæ–¹è¦æ±‚ï¼Œè¯¥è§†é¢‘æ— æ³•åœ¨å¤–éƒ¨æ’­æ”¾",vl:"æŠ±æ­‰ï¼Œè¯¥è§†é¢‘æš‚ä¸æ”¯æŒå¤–éƒ¨æ’­æ”¾ï¼Œå»è¥¿ç“œè§†é¢‘è§‚çœ‹æ›´å¤šç²¾å½©è§†é¢‘",sandbox:"å¦‚éœ€ä½¿ç”¨è¯¥åŠŸèƒ½ï¼Œè¯·å‹¿è®¾ç½®æ²™ç›’æ¨¡å¼",default:"æŠ±æ­‰ï¼Œè§†é¢‘åŠ è½½å‡ºé”™ï¼Œå»è¥¿ç“œè§†é¢‘è§‚çœ‹æ›´å¤šç²¾å½©è§†é¢‘",host:"æŠ±æ­‰ï¼Œè¯¥è§†é¢‘æš‚ä¸æ”¯æŒåœ¨æ­¤ç½‘ç«™/Appæ’­æ”¾ï¼Œå»è¥¿ç“œè§†é¢‘è§‚çœ‹æ›´å¤šç²¾å½©è§†é¢‘",noReferrer:o.createElement(o.Fragment,null,"ä¸æ”¯æŒåœ¨æœªçŸ¥ç«™ç‚¹æ’­æ”¾ï¼Œç«™ç‚¹å¼€å‘è€…å¯å‚è€ƒ",o.createElement("a",{href:"https://developers.ixigua.com/iframe.html#%E4%B8%8D%E6%94%AF%E6%8C%81%E5%9C%A8%E6%9C%AA%E7%9F%A5%E7%AB%99%E7%82%B9%E6%92%AD%E6%94%BE",target:"_blank"},"ä½¿ç”¨æ–‡æ¡£"))},f=function(e){var n=e.mixId,t=e.reason,a=s[void 0===t?"default":t],u=(0,o.useState)("www.ixigua.com"),c=(0,r.Z)(u,2),f=c[0],d=c[1];return(0,o.useEffect)((function(){l().any?d(n?"https://m.ixigua.com/video/".concat(n):"https://m.ixigua.com"):d(n?"https://www.ixigua.com/".concat(n):"https://www.ixigua.com")}),[n]),o.createElement("div",{className:"DisallowedPlayer_container"},o.createElement("img",{className:"DisallowedPlayer_logo",src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(i,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),alt:"xigua_logo"}),o.createElement("div",{className:"DisallowedPlayer_text"},a),o.createElement("a",{className:"DisallowedPlayer_button",href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(f,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_blank"},"å»è¥¿ç“œè§†é¢‘è§‚çœ‹"))};n.ZP=f;var d=function(e){var n=e.ShareIFrameInfo,t=void 0===n?{}:n,i=e.IsExclusive,a=void 0!==i&&i,l=e.IsCopyright,s=e.mixId,d=(0,o.useState)(!1),v=(0,r.Z)(d,2),m=v[0],h=v[1];(0,o.useEffect)((function(){var e=(0,u.an)(),n=(0,c.Z)(e);h(n)}),[]);var y=!1,g=o.createElement(o.Fragment,null),_=p({ShareIFrameInfo:t,IsExclusive:a,IsCopyright:l}),E=_.shouldIframeShare,b=_.reason;return m||!1===E&&(y=!0,g=o.createElement(f,{mixId:s,reason:b})),{isDisallowed:y,renderDisallowedPlayer:g}},p=function(e){var n=e.ShareIFrameInfo,t=void 0===n?{}:n,r=e.IsExclusive,o=void 0!==r&&r,i=e.IsCopyright,a=void 0!==i&&i,l=t.InBanList,u=t.InAllowList,c=t.BanByVL;return l?{shouldIframeShare:!1,reason:"default"}:u?{shouldIframeShare:!0}:c||o||a?{shouldIframeShare:!1,reason:"vl"}:{shouldIframeShare:!0}}},16441:function(e,n,t){var r=t(67294).createContext({isInIframe:void 0});n.Z=r},85468:function(e,n,t){t.d(n,{Q:function(){return J},Z:function(){return ue}});var r=t(44845),o=t(59056),i=t(54903),a=t.n(i),l=t(77766),u=t.n(l),c=t(86902),s=t.n(c),f=t(14310),d=t.n(f),p=t(20116),v=t.n(p),m=t(34074),h=t.n(m),y=t(39649),g=t.n(y),_=(t(41539),t(54747),t(74916),t(23123),t(68309),t(67294)),E=t(47561),b=t.n(E),C=t(94184),w=t.n(C),Z=t(68956),k=t(33552),x=t(91899),P=t(92744),S=t(28169),T=i.logo_type!==S.nJ.LogoT|null===(o=i.logo_image)||void 0===o?void 0:o.uri)||"",n):r=t(14173);return{src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(r,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}},N=t(21141),O=t(45063),I=t(20640),R=t.n(I),L=t(44586),D=function(e){var n=function(n){var t;R()(e.shareUrl),L.Z.configContainer((function(){return document.querySelector(".share-cover")||document.body})),L.Z.success("å¤åˆ¶æˆåŠŸ",1,(function(){return L.Z.destroy()})),null==n||null===(t=n.target)||void 0===t||t.blur(),e.onCopy&&e.onCopy()};return _.createElement("div",{className:"share-cover"},_.createElement("i",{className:"icon-close",onClick:function(){e.onClose&&e.onClose()}}),_.createElement("section",{className:"share-content"},_.createElement("span",{className:"share-title"},"åˆ†äº«é“¾æ¥"),_.createElement("div",{className:"share-url",onDoubleClick:function(e){var t;e.preventDefault(),null==e||null===(t=e.target)||void 0===t||t.blur(),setTimeout(n,0)}},e.shareUrl),_.createElement("button",{className:"share-button",onClick:n,"tab-index":0},"å¤åˆ¶")))},A=t(44999),M=t(44786),F=t(2991),B=t.n(F),U=t(42816);function H(e,n){e.timeoutID&&window.clearTimeout(e.timeoutID),e.timeoutID=setTimeout(e,n)}var V,j=function(e){var n,t,i=e.data,a=e.onClose,l=e.onItemClick,u=e.onSlide,c=(0,_.useRef)(null),s=(0,_.useState)(4),f=(0,o.Z)(s,2),d=f[0],p=f[1],v=(0,_.useState)(0),m=(0,o.Z)(v,2),h=m[0],y=m[1],g=(0,_.useState)(!1),E=(0,o.Z)(g,2),b=E[0],C=E[1],Z=(0,_.useState)(!1),k=(0,o.Z)(Z,2),x=k[0],P=k[1],S=function(){var e,n,t,r,o=null!==(e=null==c||null===(n=c.current)||void 0===n?void 0:n.offsetWidth)&&void 0!==e?e:0,i=(null!==(t=null==c||null===(r=c.current)||void 0===r?void 0:r.scrollWidth)&&void 0!==t?t:0)-o;y(0),C(!1),P(0!==i),p(o<694?3:o>=694&&o<948?4:5)};(0,_.useLayoutEffect)(S,[i]),(0,_.useEffect)((function(){var e=function(){return H(S,100)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}));return _.createElement("div",{className:w()((n={recommend:!0},(0,r.Z)(n,"row-".concat(d),!0),(0,r.Z)(n,"show-prev-arrow",b),(0,r.Z)(n,"show-next-arrow",x),n))},_.createElement("div",{className:"header"},_.createElement("span",{className:"title"},"æ›´å¤šæ¨è"),_.createElement("i",{className:"icon-close",onClick:a})),_.createElement("div",{className:"list-container"},_.createElement("div",{className:"list",ref:c,style:{transform:"translateX(".concat(h,"px)")},onClick:l},Array.isArray(i)&&B()(i).call(i,(function(e){return _.createElement(U.Z,{key:e.gid,title:e.title,coverURL:e.image_url,duration:e.duration,anchorProps:e.anchorProps})})))),B()(t=["prev","next"]).call(t,(function(e){return _.createElement("div",{className:e,key:e,onClick:function(){return function(e){var n,t,r,o,i=null!==(n=null==c||null===(t=c.current)||void 0===t?void 0:t.offsetWidth)&&void 0!==n?n:0,a=(null!==(r=null==c||null===(o=c.current)||void 0===o?void 0:o.scrollWidth)&&void 0!==r?r:0)-i;C(0!==a),P(0!==a);var l=h+i*("next"===e?-1:1);l>=0?(l=0,C(!1)):Math.abs(l)>=a&&(l=-a,P(!1)),y(l),null==u||u(e)}(e)}},_.createElement("i",{className:"icon-enter"}))})))},z=t(16441),q=t(46112),G=t(91481),K=(t(24603),t(39714),["https://study.tanshuiyuan.cn","https://teamunity-boe._____________"]),W=function(e){return K.some((function(n){return new RegExp("^"+n).test(e)}))},$=t(4260),X=["https://www.feishu.cn"],Y=function(e){return X.some((function(n){return new RegExp("^"+n).test(e)}))},Q="xgpc-show-infobar";!function(e){e.Add="addEventListener",e.Remove="removeEventListener"}(V||(V={}));var J,ee=(0,_.forwardRef)((function(e,n){var t=e.videoId,r=e.title,i=e.authorInfo,a=e.playState,l=e.recommendData,u=e.showRecommend,c=e.player,s=e.onShareClick,f=e.onVideoTitlmeClick,v=e.onRecommendClose,m=e.onRecommendItemClick,h=e.onSlideRecommend,y=i.name,g=i.user_id,E=i.avatar_url,C=(0,A.$x)(g),Z=b().any,k=(0,_.useContext)(z.Z).isInIframe,x=(0,_.useRef)(null),P=function(e){var n,t,r,o=e?"add":"remove",i=x.current;null==i||null===(n=i.classList)||void 0===n||n[o](Q),null==c||null===(t=c.controls)||void 0===t||null===(r=t.classList)||void 0===r||r[o]("xgpc-showControls")};(0,_.useImperativeHandle)(n,(function(){return{showInfobarAndControls:P}}));var S=(0,_.useState)(!0),T=(0,o.Z)(S,2),N=T[0],O=T[1],I=(0,_.useState)(!1),R=(0,o.Z)(I,2),L=R[0],D=R[1];return(0,_.useEffect)((function(){var e=[],n=function(n,t,r){e.push({event:t,fn:r}),n.on(t,r)},t=function(){return P(!0)},r=function(){return P(!1)},o=function(e){var n,o,i,a;null==c||null===(n=c.controls)||void 0===n||null===(o=n[e])||void 0===o||o.call(n,"mouseover",t),null==c||null===(i=c.controls)||void 0===i||null===(a=i[e])||void 0===a||a.call==J.Ended&&O(!0)})),n(c,$.Z$,(function(){var e;if(a!==J.Ended){var n=x.current;null!=n&&null!==(e=n.classList)&&void 0!==e&&e.contains(Q)?setTimeout((function(){var e,t,r,o=null==c||null===(e=c.root)||void 0===e||null===(t=e.classList)||void 0===t?void 0:t.contains("xgplayer-inactive"),i=null==n||null===(r=n.classList)||void 0===r?void 0:r.contains(Q);o&&!i&&O(!1)}),80):O(!1)}})),o(V.Add)),function(){!function(n){e.forEach((function(e){var t=e.event,r=e.fn;return n.off(t,r)})),e.length=0}(c),o(V.Remove)}}),[c,a]),(0,_.useEffect)((function(){var e=(0,G.an)(),n=W(e)||Y(e);D(n)}),[]),_.createElement("div",{className:w()({"recommend-cover":!0,mobile:Z,inactive:a!==J.Ended&&!N,"show-recommend":u,"play-ended":a===J.Ended,isHide:L})},_.createElement("div",{className:"mask"}),_.createElement("header",{className:"cover-header",ref:x,onMouseEnter:function(){return P(!0)},onMouseOut:function(){return P(!1)}},_.createElement("div",{className:"info"},_.createElement("a",{className:"title",target:"_blank",href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(k?(0,q.e)("/".concat(t)):"/".concat(t),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),title:r,onClick:f},r),_.createElement("div",{className:"author"},_.createElement(M.Z,{className:"author-avatar",url:E,uid:g,size:24,onClick:d,homePageExplicitQuery:k?(0,q.h)():void 0}),_.createElement("a",{className:"author-name",target:"_blank",href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(k?(0,q.e)(C):C,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),title:y,onClick:p},y))),_.createElement("div",{className:"share",onClick:s},_.createElement("i",{className:"icon-share2"}),_.createElement("span",{className:"share-text"},"åˆ†äº«"))),u&&(null==l?void 0:l.length)>0&&_.createElement(j,{data:l,onClose:v,onItemClick:m,onSlide:h}))})),ne=ee;function te(e,n){var t=s()(e);if(d()){var r=d()(e);n&&(r=v()(r).call(r,(function(n){return h()(e,n).enumerable}))),t.push.apply(t,r)}return t}function re(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?te(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):g()?Object.defineProperties(e,g()(t)):te(Object(t)).forEach((function(n){Object.defineProperty(e,n,h()(t,n))}))}return e}!function(e){e[e.Unstart=0]="Unstart",e[e.Playing=1]="Playing",e[e.Pause=2]="Pause",e[e.Ended=3]="Ended"}(J||(J={}));var oe,ie,ae=[],le=function(e,n,t){ae.push({event:n,fn:t}),e.on(n,t)},ue=(oe=N.ZP,ie=b().any?N.j5:N.D_,function(e){var n,t,r,i,l=e.video,c=e.autoplay,s=e.startTime,f=e.endTime,d=e.isPreview,p=e.recommendData,v=e.isInIframe,m={page_type:d?k.GV.Inside:k.GV.Outside,author_id:null==l||null===(n=l.user_info)||void 0===n?void 0:n.user_id,group_id:null==l?void 0:l.group_id,group_source:null==l?void 0:l.group_source};!d&&document.referrer&&(m.parent_referrer=document.referrer,m.parent_referrer_host=null===(r=document.referrer)||void 0===r||null===(i=r.split("://")[1])||void 0===i?void 0:i.sst));var g=(0,_.use_.useState)(J.Unstart),S=(0,o.Z)(P,2),N=S[0],I=S[1],R=(0,_.useState)(!1),L=(0,o.Z)(R,2),A=L[0],M=L[1],F=(0,_.useState)(!1),B=(0,o.Z)(F,2),U=B[0],V=B[1],j=(0,_.useState)(!1),q=(0,o.Z)(j,2),G=q[0],K=q[1],W=(0,_.useState)(!1),$=(0,o.Z)(W,2),X=$[0],Y=$[1],Q=(0,_.useRef)(N);(0,_.useEffect)((function(){Q.current=N}),[N]);var ee=(0,_.useRef)(!0);(0,_.useEffect)((function(){return ee.current=!0,function(){ee.current=!1}})),(0,_.useEffect)((function(){setTimeout((function(){M(!0)}),100)}),[]);var te=b().any,ue=l.poster_url,ce=function(e){var n,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a()(n="".concat(e)).call(n,2,"0"var n,t,r=Math.floor(e/3600),o=Math.floor(e%3600/60),i=Math.floor(e%60);return u()(n=u()(t="".concat(0!==r?ce(r):"")).call(t,ce(o))).call(n,ce(i,!1))},fe=function(){switch(Q.current){case J.Unstart:Z.Z.iframePlayer.videoPlay(m);break;case J.Pause:Z.Z.iframePlayer.videoContinue(m);break;case J.Ended:Z.Z.iframePlayer.videoReplay(m)}I(J.Playing),K(!1)},de=function(){ee.current&&Q.current===J.Playing&&(I(J.Pause),K(!0),Z.Z.iframePlayer.videoPause(m))},pe=function(){I(J.Ended),K(!0)},ve=function(){Z.Z.iframePlayer.videoOver(m)},me=function(e,n){Z.Z.iframePlayer.playerSetting(re(re({},m),{},{setting:"video_clarity",definition:e,frames_per_second:n}))},he=function(e){Z.Z.iframePlayer.playerSetting(re(re({},m),{},{setting:"video_speed",definition:e}))},ye=function(e){Z.Z.iframePlayer.playerSetting(re(re({},m),{},{setting:"volume"}))},ge=ie({vid:l.vid,videoData:l,autoplay:c,poster:ue,loop:!1}).playerConfig;return _.createElement(z.Z.Provider,{value:{isInIframe:v}},_.createElement("div",{className:w()({"iframe-player":!0,"iframe-preview":d,iframe:!d,"is-fullscreen":X,"show-share-cover":U,"play-ended":N===J.Ended,"iframe-in-mobile":te})},_.createElement(oe,{config:ge,preset:te?"embed":"iframe",vid:l.vid,player1,LogInfo_Ref:g,fullscreenContainer:"undefined"==typeof window?void 0:document.documentElement,onPlayerInit:function(n,t){var r;if(E.current=n,C.current=t,function(e){ae.forEach((function(n){var t=n.event,r=n.fn;e.off(t,r)})),ae=[]}(t),null===(r=e.onPlayerInit)||void 0===r||r.call(e,t),t.once("canplay",(function(){setTimeout((function(){le(t,"pause",de),le(t,"play",fe),le(t,"ended",pe),le(t,"ended",(function(){return H(ve,1e3)})),le(t,"volumechange",(function(){return H(ye,300)})),le(t,"playbackrateChange",(function(e){return he(e)})),le(t,"definitionChangeStart",(function(e){me(e.definition.toUpperCase(),e.fps)}))}),0)})),t.once("playing",(function(){var e=s||0;if(0!==e){t.currentTime=e;var n={content:"å·²ä¸ºä½ è·³åˆ°æŒ‡å®šå¼€å§‹æ—¶é—´ ".concat(s!0;t.on("timeupdate",(function e(){if(t.currentTime>=f&&o){o=!1;var n={content:"æŒ‡å®šå†…å®¹æ’­æ”¾ç»“æŸ ".concat(se(f)),level:1};t.emit(O.kI.PUSH,n),t.pause(),t.off("timeupdate",e)}}))}},onFullscreenModeChange:function(n){var t;null===(t=e.onFullscreenModeChange)||void 0===t||t.call(e,n),Y(n),Z.Z.iframePlayer.playerSetting(re(re({},m),{},{setting:"fullscreen",definition:n?"on":"off"}))},autoDestroyPlayer:!0,poster:ue,isMobile:te,autoplay:c,compPlugins:{GoHome:{onClick:function(){Z.Z.iframePlayer.ixiguaLogoClick(m)}},Logo:y}}),!te&&!U&&A&&_.createElement(ne,{playState:N,videoId:null==l?void 0:l.item_id,title:null==l?void 0:l.title,authorInfo:null==l?void 0:l.user_info,recommendData:p,player:C.current,showRecommend:G&&(null==p?void 0:p.length)>0,onShareClick:function(){V(!0);var e=null==C?void 0:C.current;e&&(null==e||e.pause(),e.config.keyShortcut="off"),Z.Z.iframePlayer.shareButtonClick(m)},onVideoTitleClick:function(){return Z.Z.iframePlayer.videoTitleClick(re(re({},m),{},{video_title:null==l?void 0:l.title}))},onAuthorAvatarClick:function(){return Z.Z.iframePlayer.authorAvatarClick(m)},onAuthorNameClick:function(){var e;return Z.Z.iframePlayer.authorNameClick(re(re({},m),{},{author_name:null==l||nullcommendClose:function(){return K(!1)},onRecommendItemClick:function(){return Z.Z.iframePlayer.recommendCardClick(m)},onSlideRecommend:function(e){Z.Z.iframePlayer.recommendSideButtonClick(re(re({},m),{},{setting:"next"===e?k.shareUrl:u()(t="".concat(window.location.origin,"/")).call(t,null==l?void 0:l.item_id,"?utm_source=iframe_share"),onClose:function(){V(!1),(null==C?void 0:C.current).config.keyShortcut="on"},onCopy:function(){return Z.Z.iframePlayer.shareLinkCopy(m)}})))})},55494:function(e,n,t){t(41539),t(74916),t(24603),t(39714);var r=["https://bytedance.feishu.cn","https://i.snssdk.com","https://study.tanshuiyuan.cn","https://teamunity-boe._____________"];n.Z=function(e){return r.some((function(n){return new RegExp2:function(e,n,t){t.d(n,{e:function(){return a},h:function(){return l}});var r=t(91481),o=t(54998),i=t.n(o),a=function(e){return new(i())(e).addQuery(l()).href()},l=function(){var e=(0,r.an)();return{from_iframe_url:null!=e?e:void 0}}},57119:function(e,n,t){t.d(n,{Z:function(){return i},$:function(){return a}});var r=t(51206),o=t.n(r);function i(){var e,n=!1;"undefined"!=typeof window&&(n=null!==(e=o().getParser(window.navigator.userAgent).satisfies({safari:"<=12"}))&&void 0!==e&&e);return!n}function a(){return!i()}},23903:function(e,n,t){t.d(n,{U3:function(){return r},kI:function(){return o},OP:function(){return i},Z5:function(){return a}});var r={miniscreenChange:"miniscreenChange",miniscreenClose:"miniscreenClose",requestMiniscreenClose:"requestMiniscreenClose",miniscreenDisable:"miniscreenDisable",miniscreenAutoClose:"miniscreenAutoClose",httomTips_clear_any"},i={CLOSED:"leftBottomTips_close"},a={EXPIRED_RETRY_END:"expired_retry_end"}},36535:function(e,n,t){t.d(n,{U3:function(){return l.U3},_F:function(){return u},ST:function(){return c},Fq:function(){return s},Mh:function(){return f},ev:function(){return d}});var r,o,i=t(44845),a=t(10994),l=t(23903),u={"360p":"æ ‡æ¸…","480p":"æ ‡æ¸…","720p":"é«˜æ¸…","1080p":"é«˜æ¸…","2k":"è¶…æ¸…","4k":"è¶…æ¸…"};!function(e){e[e.player=0]="player",e[e.theater=1]="theater",e[e.web_fullscreen=2]="web_fullscreen",e[e.fullscreen=3]="fullscreen"}(o||(o={}));var c={height:760,width:1906},s="common-xgplayer",f="preview6min_login_from_ended",d=(r={},(0,i.Z)(r,a.Re.NO_LOOP,"ä¸å¾ªç¯"),(0,i.Z)(r,a.Re.VIDEO_LOOP,"å•é›†å¾ªç¯"),(0,i.Z)(r,a.Re.PSERIES_LOOP,"åˆ—è¡¨å¾ªç¯"),r)},2894:function(e,n,t){t.d(n,{Uf:function(){return c},id:function(){return s},$o:function(){return d},si:function(){return p},aZ:function(){return v}});var r=t(69301),o=t.n(r),i=t(81643),a=t.n(i),l={keys:["Enter"],keyCode:13},u=function(e){var n=e.keyCode,t=o()(e);return function(e){return e.keyCode?e.keyCode===n:-1!==a()(t).call(t,e.key)}},c=function(e){return u(l)(e)||f(e)},s=u({keys:["Tab"],keyCode:9}),f=u({keys:[" "],keyCode:32}),d=u({keys:["Escape","Esc"],keyCode:27}),p=(u({keys:["ArrowLeft"],keyCode:37}),u({keys:["ArrowRight"],keyCode:39}),u({keys:["ArrowUp"],keyCode:38})),v=u({keys:["ArrowDown"],keyCode:40})},22155:function(e,n,t){t.d(n,{uF:function(){return g},Io:function(){return _},fF:function(){return b},RZ:function(){return C},UO:function(){return w},ai:function(){return k},qT:function(){return x},mg:function(){return P},bp:function(){return S},bw:function(){return T}});var r=t(33938),o=(t(59056),t(63109)),i=t.n(o),a=t(81643),l=t.n(a),u=(t(86902),t(56977),t(74916),t(4723),t(9653),t(41539),t(82526),t(41817),t(54998)),c=t.n(u),s=1)),v=t.n(p),m=t(4461),h=t(38834),y=t(2894),g=function(e,n){var t;return e&&(t="56.25%",void 0!==n&&(isNaN(n)?n=void 0:t=(100*n).toFixed(2)+"%")),{backgroundColor:"rgba(0,0,0,0.87)",paddingTop:t}},_=function(){var e;return"undefined"!=typeof window&&l()(e=window.navigator.userAgent).call(e,"newPad")>-1},E=function(){return!!_()||!v().any},b=f()("player"),C="@byted/xgplayer-encrypt@3.5.21",w="@byted/xgplayer-encrypt-mp4@3.0.8",Z=function(){return"0"===c()().query(!0).dash},k=function(){return!Z()&&d.isSupported()},x=function(){return!Z()&&d.isEncryptSupported()},P=function(){var e=!0;if("undefined"!=typeof window){var n=E()&&(0,m.CZ)("skip");e=!(!E()||void 0!==n)||n}return e},S=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.Z.getServerTimestamp().then((function(e){if(200===e.data.code)return Math.floor(e.data.data/1e3);throw new Error("getServerTime failed")})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e,n){var t=e.nativeEvent,r=n.onConfirm,o=n.onEscape;(0,y.Uf)(e.nativeEvent)?(null==r||r(),e.stopPropagation(),e.preventDefault()):(0,y.$o)(t)&&(null==o||o())}},21141:function(e,n,t){t.d(n,{ZP:function(){return ma},j5:function(){return Ql},ne:function(){return Jl},D_:function(){return tu},uW:function(){return $l}});var r={};t.r(r),t.d(r,{CanPlayHandler:function(){return Oi},DashPreload:function(){return Qi},DashStateChangeHandler:function(){return Ii},DetectPlayback:function(){return fa},Feedback:function(){return Yo},FullscreenPlugin:function(){return ei},GoHome:function(){return Zi},H265Degrade:function(){return ra},Logo:function(){return $o},MediaExpired:function(){return Ei},MiniscreenHandler:function(){return vi},PlayEnd:function(){return Ni},PlayLoop:function(){return pi},PlayNext:function(){return ki},Preview:function(){return ii},StuckCheckHandler:function(){return Li},TeaPlugin:function(){return qi},VRToastHandler:function(){return Ri}});var o=t(73126),i=t(59056),a=t(2991),l=t.n(a),u=t(86902),c=t.n(u),s=t(67294),f=t(14310),d=t.n(f)(T),O=t(26295),I=t.n(O),R=t(20116),L=t.n(R),D=t(20455),A=t.n(D),M=(t(41539),t(54747),t(74916),t(68309),t(73935)),F=t(91481),B=t(87834),U=t(58581),H=t(68956),V=t(94184),j=t.n(V),z=t(36535),q=t(17082),G="leftBottomTips_push",K="leftBottomTips_clear",W="leftBottomTips_close",$=t(22155),X=t(4461),Y=t(96251),Q=t(65046),J=function(){var e=(0,y.Z)(E().mark((function e(){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.getDrmServerUrl("www.ixigua.com");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee={url:"",crossorigin:!0,enableContextmenu:!1,closeVideoStopPropagation:!0,closeFocusVideoFocus:!0,closePlayVideoFocus:!0,closeVideoDblClick:!0,closeVideoTouch:!0,closeMoveSeek:!0,lang:"zh-cn",danmu:{closeDefaultBtn:!0,defaultOff:!0,mouseControl:!0,mouseEnterControl:!0,channelSize:41,disableCopyDOM:!0,area:{start:.01,end:.75}},leavePlayerTime:0,controls:{autoHide:!0},retryConfig:{httpCodes:[404,-1,0]},seekedStatus:"auto"},ne=t(1068),te=t.n(ne),re=t(68420),oe=t(90306),ie=t(3020),ae=t(3362),le=(t(66992),t(88674),t(78783),t(33948),t(27344)),ue=t(63513),ce){vaeflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;tolean,[],(function(){}))),!uctor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,i);var n=fe(t);function t(){return(0,re.Z)(this,t),n.apply(this,arguments)}return(0,le.Z)(t,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:fun(){ue.ZP.removeCl",value:function(e){"string"==d",(function(){e.update(e.player.config.poster)})),this.on(ce.Ku,(function(){e.isEndedShow||ue.ZP.addClass(e.root,"hide")})),this.config.hideCanplay?(this.once(ce.MH,(function(){e.onTimeUpdate()})),this.on(ce.ij,(function(){ue.ZP.removeClass(e.root,"hide"),ue.ZP.addClass(e.root,"xg-showplay"),e.once(ce.MH,(function(){e.onTimeUpdate()}))}))):this.on(ce.NH,(function(){ue.ZP.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?ue.ZP.removeClass(this.root,"xg-showplay"):this.olue:function(e){if(!e)return this.config.poster="undefined",void(this.root.style.backgroundImage="unset");this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")")}},{key:"render",value:function(){var e,n=this.config,t=n.poster,r=n.hideCanplay,o=t?"background-image:url(".concat(t,");"):"";return C()(e='<xg-poster class="xgplayer-poster '.concat(r?"xg-showplay":"",'" style="')).call(e,o,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),t}(se.ZP),pe=de,ve=t(60247),me=(t(33291),t(66366)),he=t(5281),ye=(t(56977)ar t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function be(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}function Ce(e){e.preventDefault(),e.returnValue=!1}function we(e){var n=e.tagName;return!("INPUT"!==n&&"TEXTAREA"!==n&&!e.isContentEditable)}var Ze=function(e){(0,oe.Z)(t,e);var n=be(t);function t(){var e,r;(0,re.Z)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=n.call.apply(n,C()(e=[this]).call(e,i)),(0,g.Z)((0,he.Z)(r),"onBodyKeyDown",(function(e){var n=e||window.event;if((r.player.isUserActive||r.config.isIgnoreUserActive)&&!(r.config.disable||r.config.disableBodyTrigger||!r.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var t=n.keyCode;return!(n.target!==document.body&&(!r.config.isGlobalTrigger||we(n.target))||!r.checkCode(t,!0))&&(Ce(n),r.handleKeyCode(t,e),!1)}})),(0,g.Z)((0,he.Z)(r),"onKeydown",(function(e){var n,t=e||window.event;if(!&(r.player.isUserActive||r.config.isIgnoreUserActive)(this.player):this.config.see!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekByCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),n=e.height,t=e.top,r=e.bottom,o=window.innerHeight;return!(t<0&&t<0-.9*n||r>0&&r-o>.9*n)}},{key:"checkCode",value:function(e,n){var t,r=this,o=!1;return l()(t=c()(this.keyCodeMap)).call(t,(function(t){r.keyCodeMap[t]&&e===r.keyCodeMap[t].keyCode&&!r.keyCodeMap[t].disable&&(o=!n||n&&!r.keyCodeMap[t].noBodyTarget)})),o}},{key:"downVolume",value:function(e){var n=this.player,t=ge()((n.volume-.1).toFixed(1)),r={volume:{from:n.volume,to:t}};this.emitUserAction(e,"change_volume",{props:r}),n.volume=t>=0?t:0}},{key:"upVolume",value:function(e){var n=this.player,t=ge()((n.volume+.1).toFixed(1)),r={volume:{from:n.volume,to:t}};this.emitUserAction(e,"change_volume",{props:r}),n.volume=t<=1?t:1}},{key:"seek",value:function(e){var n=this.player,t=n.currentTime,r=n.duration,o=t;o=t+this.seekStep<=r?t+this.seekStep:r-1,this.emitUserAction(e,"seek",{prop:"currentTime",from:t,to:o}),this.player.currentTime=o}},{key:"seekBack",value:function(e){var n=this.player.currentTime,t=0;n-this.seekStep>=0&&(t=n-this.seekStep),this.emitUserAction(e,"seek",{prop:"currentTime",from:n,to:t}),this.player.currentTime=t}},{key:"playPause",value:function(e){var n=this.player;n&&(e.stopPropagation(),e.preventDefault(),this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:n.paused,to:!n.paused}),n.paused?n.play():n.pause())}},{key:"exitFullscreen",value:function(e){var n=this.player,t=n.isCssfullScreen,r=n.fullscreen;r&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:r,to:!r}),n.exitFullscreen()),t&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:t,to:!t}),n.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,n){var t,r=this;li?i(n,r.player):"string"==typeof i&&"function"==typeof r[i]&&r[i](n,r.player),1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}({key:t,target:n.target},r.keyCodeMap[t])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),t}(_e.ZP),ke=Ze,xe=t(96050);t(93270),t(88253);function Pe(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Se=function(e){(0,oe.Z)(t,e);var n=Pe(t);fu)i[a]=arguments[a];return r=n.call.apply(n,C()(e=[this]).call(e,i)),(0,g.Z)((0,he.Z)(r),"isReactPlugin",!0),(0,g.Z)((0,he.Z)(r),"Component",(function(){return s.createElement("div",{className:r.getClassName(),style:{display:"none"}},"Replace Component in your ReactPlugin")})),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return""}},{key:"pluginConfig",get:function(){var e;return null!==(e=this.player.config[this.pluginName])&&void 0!==e?e:{}}},{key:"render",value:function(){var e=document.createElement("div");return e.className=this.getClassName(),e}}]),t}(se.ZP),Te=t(79112);function Ne(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Oe=function(e){(0,oe.Z)(t,e);var n=Ne(t);function t(){var e,r;(0,re.Z)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=n.call.apply(n,C()(e=[this]).call(e,i)),(0,g.Z)((0,he.Z)(r),"Component",(function(){return s.createElement(s.FclassName:"xgplayer-loadingMask-tips"}),s.createElement(Re,{speed:0}))})),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return"xgplayer-loadingMask"}}],[{key:"pluginName",get:function(){return"loading_mask_plugin"}}]),t}(Se),Ie=function(e){(0,oe.Z)(t,e);var n=Ne(t);function t(){var e,r;(0,re.Z)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=n.call.apply(n,C()(e=[this]).call(e,i)),(0,g.Z)((0,he.Z)(r),"Component",(function(){return s.createElement("div",{className:"loadingWrapper"},s.createElement(Te.n$,null))})),r}return t}(Oe),Re=function(e){var n=e.speed;return n?s.createElement("div",{className:"xgplayer-loadingMask-speedTip"},function(e){if(e<=0)return"";var n="";return n=e>1024?"".concat((e/1024).toFixed(2),"MB/s"):"".concat(e.toFixed(2),"KB/s"),"åŠ è½306),t(24603),t(39714),t(94473)),Ae=t.n(De),Me=t(65420),Fe=t.n(Me),Be=t(2894),Ue=t(72671),He={},Ve=function(e){var n=e.popover,t=e.entry,r=e.tabIndex,o=void 0===r?0:r,a=e.ariaLabel,l=e.ariaHaspopup,u=e.className,c=e._forceActive,f=e.mouseLeaveDelayTime,d=void 0===f?300:f,p=e.showPopoverOnFocus,v=e.onConfirm,m=e.allowPropagationOnConfirm,h=void 0!==m&&m,y=e.onMouseEnter,g=(0,s.useRef)(Fe()("uniqSymbol")).current,_=(0,s.useRef)(),E=(0,s.useRef)(null),b=(0,s.useState)(!1),C=(0,i.Z)(b,2),w=C[0back)((function(){_.current&&window.clearTimeout(_.current)}),[]),x=(0,s.useCallback)((function(){Z(!1),He.uniqSymbol===g&&(He.hidePopover=void 0,He.uniqSymbol=void 0,He.className=void 0)}),[g]),P=(0,s.useCallback)((function(){var e;(k(),Z(!0),(null==He?void 0:He.uniqSymbol)!==g)&&(null===(e=He.hidePopover)||void 0===e||e.call(He));He.uniqSymbol=g,He.hidePopover=x,He.className=u}),[u,k,g,x]),S=(0,s.useCallback)((function(){k(),_.current=window.setTimeout((function(){x()}),d)}),[x,d,k]),T=(0,s.useCallback)((function(){S()}),[S]),N=(0,s.useCallback)((function(){P(),y&&y()}),[y,P]),O=(0,s.useCallback)((function(e){var n=e.nativeEvent;(0,Be.Uf)(n)?(n.preventDefault(),"function"==typeof v?(!1===h&&e.stopPropagation(),v(x)):P()):(0,Be.$o)(n)?x():(0,Be.id)(n)&&requestAnimationFrame((function(){var e;!E.current||null!==(e=E.current)&&void 0!==e&&e.contains(document.activeElement)||x()}))}),[xnction(){return k}),[]);var I=(0,Ue.Z)(),R=(0,s.useRef)(null);return(0,s.useEffect)((function(){if(w){var e,n=I.query.focusable({context:R.current,includeContext:!0,strategy:"quick"});null==n||null===(e=n[0])||void 0===e||e.focus()}}),[w,I]),s.createElement("div",{className:j()("xgplayer-control-item",u),onMouseEnter:N,onMouseLeave:T,onKeyDown:O,onClick:function(e){!1===h&&e.stopPropagation(),null==v||v(x)},ref:E},s.createElement("div",{className:"xgplayer-control-item__entry",tabIndex:o,"aria-label":a,"aria-haspopup":l,"aria-expanded":w,onFocus:function(){return p&&P()},onBlur:S},t()),s.createElement("div",{className:j()("xgplayer-control-item__popover",{isActive:c||w}),ref:R},n({hidePopover:x,isActive:w})))},je="playerControlsItemContainer",ze="xgpcPlayer_textEntry",qe="xgpcPlayer_iconEntry",Ge=function(e){var n,t=e.plugin,r=e.attrKey,o=e.defaultValue,a=t.pluginName,l=C()(n="".concat("XGPC_USEPLUGINATTR","_").concat(a,"_")).call(n,r),u=function(){var e;return null!==(e=t[r])&&void 0!==e?e:o},c=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t[r]=e,n&&t.emit(l,e)};return{usePluginAttr:function(){var e=(0,s.useState)(u),n=(0,i.Z)(e,2),r=n[0],o=n[1],a=(0,s.useCallback)((function(e){c(e,!1),o("function"==typeof e?function(){return e}:e)}),[]);return(0,s.useEffect)((function(){var e=function(e){o("function"==typeof e?function(){return e}:e)};return t.on(l,e),function(){t.off(l,e)}}),[]),[r,a]},updateAttr:c,getAttr:u}};function Ke(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var We=function(e){(0,oe.Z)(t,e);var n=Ke(t);function t(){var e,r;(0,re.Z)(this,t);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return r=n.call.apply(n,C()(e=[this]).call(e,l)),(0,g.Z)((0,he.Z)(r),"RPAttr_definitionList",void 0),(0,g.Z)((0,he.Z)(r),"Component",(function(){var e=(0,he.Z)(r),n=r.RPAttr_definitionList.usePluginAttr(),t=(0,i.Z)(n,2),a=t[0],l=t[1],u=null==a?void 0:Ae()(a).call(a,(function(e){return e.selected})),c=(0,s.useCallback)((function(n){if(a){var t=r.player,o=document.createElement("a");o.href=globalThis.xssNamespace.xigua_video_web_pc.filterUrl(n.url,null,{logType:"js.href/src",mode:"black",reportOnly:!1});var i,c=Je(n);a.forEach((function(e){e.selected=!1,e===n&&(e.selected=!0)}));var s=!1,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1200;clearTimeout(i),i=setTimeout((function(){c||(t.emit("definitionChangeSuccess",{from:u,to:n}),s=!0)}),e)};if(t.dash||t.mp4MseFlag){var d=document.createElement("a");if(["mp4","dash"].every((function(e){return!t[e]||(d.href=globalThis.xssNamespace.xigua_video_web_pc.filterUrl(t[e].url,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),!1)})),d.href!==o.href&&!t.ended){t.once("definitionSwitchTime",(function(n){if(t.paused)f();else{var r=window.navigator.userAgent;if(/Safari/.test(r)&&!/Chrome/.test(r))f();else{var o=function r(){t.currentTime>n&&(e.off("timeupdate",r),f(0))},i=function(){e.off("timeupdate",o),s||f()};o&&e.off("timeupdate",o),i&&e.off("seeking",i),e.on("timeupdate",o),e.once("seeking",i)}}})),t.changeDefinition(n),t.backUpUrl=n.backup_url,t.dash||t.mp4MseFlag||f()}}else if(o.href!==t.currentSrc&&!t.ended){t.changeDefinition(n),t.backUpUrl=n.backupUrl;e.once("canplay",(function(){f(),t.paused||t.play()}))}t.emit("definitionChangeStart",n),l((0,Le.Z)(a)),(0,X.wg)({defini/M/d")})}}),[a,u]);return a?s.createElement(Ve,{ariaHaspopup:!0,className:"control_definition common-control-item",popover:function(e){return s.createElement(Xe,(0,o.Z)({curDefinition:u,list:a,onClickItem:c},e,{pluginInstance:(0,he.Z)(r)}))},entry:function(){return s.createElement($e,{curDefinition:u})}}):null})),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}},{key:"afterCreate",value:function(){var e=this;this.RPAttr_definitionList=Ge({attrKey:"definitionList",defaultValue:[],plugin:this});var n=[],t=function(){e.RPAttr_definitionList.updateAttr(n)};this.on("resourceReady",(function(r){var o;(n=L()(r).call(r,(function(e){return!("hdr"===e.name||"hdr"===e.definition)})))&&n instanceof Array&&("__auto__"===(null===(o=n)||void 0===o?void 0:o[n.length-1].url)&&(n[n.length-1].definition="auto"),e.once("canplay",t))}))}}],[{key:"pluginName",get:function(){return"xgpc_definition"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_RIGHT,index:18}}}]),t}(Se),$e=function(e){var n,t=e.curDefinition,r=Je(t||{}),o=N()(n=["2k","4k"]).call(n,(null==t?void 0:t.definition)||"")>-1;return t?s.createElement("div",{className:ze},o?s.createElement("span",{className:"specialDefinition_".concat(t.definition," shorŠ¨":null==t?void 0:t.definition.toUpperCase()),(null==t?void 0:t.fps)&&s.createElement("span",{className:"fps"},null==t?void 0:t.fps,"å¸§")):null},Xe=function(einition,u=(0,s.useState)({definition:void 0,fps:void 0}),c=(0,i.Z)(u,2),f=c[0],d=c[1];(0,s.useEffect)((function(){if("è‡ªåŠ¨"===(null==a?void 0:a.name)){var e,n=null===(e=o.player.currentDefitionFromPlayer)||void 0===e?void 0:e.item;d(n?{definition:n.definition,fps:n.fps}:{definition:void 0,fps:void 0});var t=function(e,n,t){d({definition:n,fps:t})},r=function(e,n){var t=e.definition,r=e.fps;n&&(t=void 0,r=void 0),d({definition:t,fps:r})};return o.on("ABR_AUTO_DESC_CHANGE",t),o.on("MP4_AUTO_DESC_CHANGE",r),function(){o.off("ABR_AUTO_DESC_CHANGE",t),o.off("MP4_AUTO_DESC_CHANGE",r)}}}),[n,a,o]);var p=(0,s.useCallback)((function(e){t(e),r()}),[r,t]);return s.createElement("ul",null,null==n?void 0:l()(n).call(n,(function(e){var n=e.fps,t=Je(e),o=a===e,i=Ye(e.definition);return s.createElement("li",{key:e.definition+e.fps,tabIndex:0,role:"menuitemradio","aria-checked":o,className:j()({isActive:o,specialDefinition:i}),onClick:function(){p(e)},onKeyDown:function(n){var t=n.nativeEvent;(0,Be.Uf)(n.nativeEvent)?(p(e),n.stopPropagation(),n.preventDefault()):(0,Be.$o)(t)&&r()}},function(){if(t){var r=Ye(f.definition);return s.createElement(s.Fragment,null,e.name,f.definition&&s.createElement("div",{className:"autoDetails"},s.createElement("span",{style:{paddingRight:"2px"}},"("),r?s.createElement("span",{className:"specialDefinition_".concat(f.definition," short")}):null==f?void 0:f.definition.toUpperCase(),f.fps&&s.createElement("span",{className:"fps"},f.fps,"å¸§"),s.createElement("span",{style:{paddingLeft:"2px"}},")")))}return s.createElement(s.Fragment,null,i?s.createElement("span",{className:"specialDefinition_".concat(e.definition)}):null==e?void 0:e.definition.toUpperCase(),n&&s.createElement("span",{className:"fps"},n,"å¸§"))}())})))},Ye=function(e){var n;return!!e&&N()(n=["2k","4k"]).call(n,e.toLowerCase())>-1},Qe=function(e,n){var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,e.getFullYear()+"")),t)new RegExp("("+r+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return n},Je=function(e){return"è‡ªåŠ¨"===(e.text||e.name)},en=t(97657),nn=t.n(en);function tn(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var rn=function(e){(0,oe.Z)(t,e);var n=tn(t);function t(e){var r;return(0,re.Z)(this,t),r=n.call(this,e),(0,g.Z)((0,he.nt",(function(){var e=(0,s.useState)(r.player.playbackRate||1),n=(0,i.Z)(e,2),t=n[0],a=n[1],l=r.config.list,u=(0,s.useCallback)((function(e){e&&e!==t&&(r.player.emit("playbackrateChange",e),r.player.playbackRate=e,a(e))}),[t]);return s.createElement(Ve,{ariaHaspopup:!0,className:"control_playbackrate common-control-item",popover:function(e){return s.createElement(an,(0,o.Z)({list:l,playbackRate:t,onClickItem:u},e))},entry:function(){return s.createElement(on,{playbackRate:t})}})})),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}},{key:"beforeCreate",value:function(e){}}],[{key:"pluginName",get:function(){return"xgpc_playback"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_RIGHT,index:19,list:[2,1.5,1.25,1,.75]}}}]),t}(Se),on=function(e){var n=e.playbackRate;return s.createElement("div",{className:ze},nn()(n)?n.toFixed(1):n,"å€")},an=function(e){var n=e.list,t=e.onClickItem,r=e.playbackRate,o=e.hidePopover,i=(0,s.useCallback)((function(e){t(e),o()}),[o,t]);return s.createElement("ul",null,l()(n).call(n,(function(e){var n=e===r;return s.createElement("li",{key:e,tabIndex:0,role:"menuitemradio","aria-checked":n,onClick:function(){return i(e)},className:j()({isActive:n}),onKeyDown:function(n){var t=n.nativeEvent;(0,Be.Uf)(n.nativeEvent)?(i(e),n.stopPropagation(),n.preventDefault()):(0,Be.$o)(t)&&o()}},nn()(e)?e.toFixed(1):e,"å€")})))};function ln(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var un=function(e){(0,oe.Z)(t,e);var n=ln(t);function t(e){var r;return(0,re.Z)(this,t),r=n.call(this,e),(0,g.Z)((0,he.Z)(r),"context",void 0),r}return(0,le.Z)(t,[{key:"afterCreate",value:function(){this.player.xgpcInfo={player_status:"player"}}}],[{key:"pluginName",get:function(){return"xgpc_context"}}]),t}(_e.ZP),cn=(t(9653),t(85722)),sn=t(8447),fn=function(e){var n=e.style,t=e.lottiePath,r=e.onClick,o=(0,s.useRef)(null),i=(0,sn.Z)();return(0,s.useEffect)((function(){var e;function n(){e.play()}function r(){e.stop()}return o.current&&i&&(e=i.loadAnimation({container:o.current,autoplay:!1,path:t}),o.current.addEventListener("mouseenter",n),o.current.addEventListener("mouseleave",r)),function(){var t,i,a;null===(t=e)||void 0===t||t.destroy(),null===(i=o.current)||void 0===i||i.removeEventListener("mouseenter",n),null===(a=o.current)||void 0===a||a.removeEventListener("mouseleave",r)}}),[i,t]),s.createElement("div",{className:"xgpcPlayer_LottieEntry",style:n,ref:o,onClick:r})},dn=t(64138),pn=t(96453);function vn(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var mn=function(e){(0,oe.Z)(t,e);var n=vn(t);function t(){var e,r;(0,re.Z)(this,t);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=n.call.apply(n,C()(e=[this]).call(e,a)),(0,g.Z)((0,he.Z)(r),"Component",(function(){var e=hn(r.player);return(0,dn.Z)((function(){(0,X.fd)("volume",e.value)}),[e.value]),(0,dn.Z)((function(){(0,X.fd)("muted",e.muted)}),[e.muted]),s.createElement(Ve,{ariaHaspopup:!0,className:"control_volume",popover:function(n){return s.createElement(gn,(0,o.Z)({player:r.player,volumeModel:e},n))},entry:function(){return s.createElement(yn,{volumeModel:e})},ariaLabel:e.muted?"é™éŸ³":"å–æ¶ˆé™éŸ³"})})),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}},{key:"afterPlayerInit",value:function(){var e,n=this;(0,X.CZ)("muted")&&(layer.volume=null!==(e=(0,X.CZ)("volume"))&&void 0!==e?e:.6;var t,r=!0;this.on("volumechange",(function(){var e;n.player.volume!==t&&(t=n.player.volume,r?r=!1:(e=0===n.player.volume||n.player.muted,n.player.emit(G,{level:2,content:e?s.createElement(s.Fragment,null,"é™éŸ³"):s.createElement(s.Fragment,null,"éŸ³é‡: ",s.createElement("span",null,(100*n.player.volume).toFixed(0),"%"))})ion(){return"xgpc_volume"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_RIGHT,index:23}}}]),te){var n=(0,s.useState)((function(){return e.volume})),t=(0,i.Z)(n,2),r=t[0],o=t[1],a=(0,q.Z)(e.muted),l=(0,i.Z)(a,3),u=l[0],c=l[1],f=l[2];return(0,s.useEffect)((function(){var n=function(){o(e.volume),e.muted!==f.current&&c(e.muted)};return e.on("volumechange",n),function(){return e.off("volumechange",n)}}),[e]),(0,s.useEffect)((function(){r>1?o(1):r<0?o(0):e.volume!==r&&(e.volume>0&&e.muted&&c(!1),e.volume=r)}),[r]),(0,s.useEffect)((function(){e.muted!==u&&(e.muted=u)}),[u]),{value:r,setValue:o,muted:u,setMuted:c}},yn=function(e){var n=e.volumeModel,t=n.setMuted,r=n.muted,o=(0,s.useCallback)((function(){t(!r)}),[r]),i={display:"none"};return s.createElement(s.Fragment,null,s.createElement("div",{className:"xgpcPlayer_svgEntry",onClick:o,style:r?void 0:i},s.createElement(pn.vYj,null)),s.createElement(fn,{style:r?i:void 0,onClick:o,lottiePath:cn}))},gn=function(e){var n=e.player,t=e.volumeModel,r=e.isActive,o=t.value,i=t.setValue,a=t.muted,l=(0,s.useRef)(null),u=(0,s.useRef)(null),c=(0,s.useCallback)((function(e){var t=l.cect(),c=a.height;r.focus();var s=function(e){var n=c-e.clientY+a.top;n<0?n=0:n>c&&(n=c),i(n/c)};s(e.nativeEvent),window.addEventListener("mousemove",s),window.addEventListener("mouseup",(function e(t){var r;t.preventDefault(),t.stopPropagation(),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",e),null===(r=n.root)||void 0===r||r.focus()}))}}),[]),f=(0,s.useCallback)((function(e){var n=o;(0,Be.si)(e)?(e.preventDefault(),n+=.1):(0,Be.aZ)(e)&&(e.preventDefault(),n-=.1),i(Number(n.toPrecision(2)))}),[o]);(0,s.useEffect)((function(){var e;r&&(null===(e=u.current)||void 0===e||e.focus())}),[r]);var d=a?0:o;return s.createElement("div",{ref:u,className:"xgpcPlayer-slider",tabIndex:0,role:"slider","aria-label":"éŸ³é‡","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0,onKeyDown:f},s.createElement("div",{className:"xgpcPlayer-volume-val"},(100*d).toFixed(0)),s.createElement("div",{ref:l,className:"xgpcPlayer-bar",onMouseDown:c},s.createElement("div",{className:"xgpcPlayer-drag",style:{height:"calc(".concat((100*d).toFixed(2),"%)")}},s.createElement("div",{className:"xgpcPlayer-drag-dot"}))))},_n=t(6167),En=t.n(_n),bn=t(19623),Cn=t(88636),wn=[],Zn=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=wn;"symbol"===(0,bn.Z)(e)?(r.push({event:e,fn:n}),Cn.Z[t](e,n)):e.forEach((function(e){r.push({event:e,fn:n}),Cn.Z[t](e,n)}))};function kn(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerabler n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Pn=function(e){(0,oe.Z)(t,e);var n=xn(t);function t(e){var r;return(0,re.Z)(this,t),r=n.call(this,e),(0,g.Z)((0,he.Z)(r),"RPAttr_subtitleList",void 0),(0,g.Z)((0,he.Z)(r),"handlePlayerInitStart",(function(){r.RPAttr_subtitleList.updateAttr([])})),r.Component=Sn.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}},{key:"afterCreate",value:function(){var e=this;this.RPAttr_subtitleList=Ge({attrKey:"definitionList",defaultValue:[],plugin:this});Cn.Z.on(Cn.o.playerInitStart,this.handlePlayerInitStart),this.on("subtitleUpdate",(function(n){!n||n.length<1||e.RPAttr_subtitleList.updateAttr(n)}))}}],[{key:"pluginName",get:function(){return"xgpc_subtitle"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_RIGHT,index:17}}}]),t}(Se);function Sn(){var e=abel:"ä¸å±•ç¤º",language:"",language_id:""})}else{var r,o,i=n.id,a=n.source,l=n.language,s=n.language_id,f=n.label;null===(r=c.current)||void 0===r||null===(o=r.switch)||void 0===o||o.call(r,{id:i}).then((function(){e.player.emit("subtitleChanged",{sub_id:i,source:a,label:f,language:l,language_id:s})})).catch((function(n){e.player.emit("subtitleFailed",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?kn(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):kn(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}({sub_id:i,source:a},n))}))}u(n)(function(){if(void 0!==t&&t.length>0){var n=e.player,r=new(En())({subTitles:t,defaultOpen:!0,bottom:1,line:"three",baseSizeY:32,mode:"bg"});r.attachPlayer(e.player),c.current=r,u(Ae()(t).call(t,(function(e){return e.isDefault}))var t=e.v!function(e){var t,r=null===(t=n.root)||void 0===t?void 0:t.querySelector("xg-text-track");if(r&&.offsetHeight&&e>n.controls.offsetHeight+20)return void ue.ZP.removeClass(r,"isMoveWithCtrls");r&&ue.ZP.addClass(r,"isMoveWithCtrls")}(t+r)})),function(){r.destroy()}}}),[t]),void 0===t||0===t.length?null:s.createElement(Ve,{ariaHaspopuackrate common-control-item",popover:function(e){return s.createElement(Nn,(0,o.Z)({list:t,curSubtitle:l,onClickItem:f},e))},entry:function(){return s.createElement(Tn,null)}})}var Tn=function(){return s.createElement("div",{className:ze},"å­—å¹•")},Nn=function(e){var n=e.list,t=e.onClickItem,r=e.curSubtitle,o=e.hidePopover,i=(0,s.useCallback)((function(e){t(e),o()}),[]);return s.createElement("ul",null,s.createElement("li",{tabIndex:0,role:"menuitemradio","aria-checked":void 0===r,className:j()({isActive:void 0===r}),onClick:function(){return i(void 0)},onKeyDown:function(e){(0,$.bw)(e,{onConfirm:function(){return t(void 0)},onEscape:o})}},"ä¸å±•ç¤º"),l()(n).call(n,(function(e){var n=e===r;return s.createElement("li",{key:e.id,tabIndex:0,role:"menuitemradio",className:j()({isActive:n}),"aria-checked":n,onClick:function(){return i(e)},onKeyDown:function(n){(0,$.bw)(n,{onConfirm:function(){return t(e)},onEscape:o})}},e.label)})))},On=(t(3219),t(49441),t(74231)),In=t(29882),Rn=t(71394),Ln=t(40020);function Dn(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var An=function(e){(0,oe.Z)(t,e);var n=Dn(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=Mn.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return j()(je,"xgpc_playermode")}}],[{key:"pluginName",get:function(){return"xgpc_playermode"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_RIGHT,index:24}}}]),t}(Se);function Mn(){var e,n=this,t=(0,s.useState)(this.player.isCssfullScreen),r=(0,i.Z)(t,2),o=r[0],a=r[1],l=(0,s.useState)(this.player.fullscreen),u=(0,i.Z)(l,2),c=u[0],f=u[1],d=(0,s.useState)(null!==(e=this.player.isTheater||this.player.config.isTheater)&&void 0!==e&&e),p=(0,i.Z)(d,2),v=p[0],m=p[1];return(0,s.useEffect)((function(){var e=function(e){e?(ue.ZP.addClass(document.body.parentElement,"xgplayer-cssfullscreen-active"),a(!0)):(ue.ZP.removeClass(document.body.parentElement,"xgplayer-cssfullscreen-active"),a(!1))},t=function(e){e?(ue.ZP.addClass(document.body.parentElement,"xgplayer-cssfullscreen-active"),f(!0)):(ue.ZP.removeClass(document.body.parentElement,"xgplayer-cssfullscreen-active"),f(!1))},r=function(){m(!1)},o=function(){m(!0)};return n.on(ce.HW,e),n.on(ce.GS,t),n.on("disable_theaterMode",r),n.on("enable_theaterMode",o),function(){n.off(ce.HW,e),n.off(ce.GS,t),n.off("disable_theaterMode",r),n.off("enable_theaterMode",o)}}),[]),s.createElement(s.Fragment,null,c||o?null:s.createElement(Un,{isTheater:v,player:this.player}),s.createElement(Fn,{isFullscreen:c,player:this.player}))}var Fn=function(e){var n=e.isFullscreen,t=e.player,r=n?"é€€å‡ºå…¨å±":"å…¨å±",o=n?On:In,i=(0,s.useCallback)((function(e){e(),t.fullscreen?t.exitFullscreen():t.getFullscreen(t.config.fullscreenContainer);var n=document.activeElement;null==n||n.blur()}),[t]);return s.createElement(Ve,{ariaLabel:r,className:"tip-control-item",onConfirm:i,popover:function(){return s.createElement("div",null,r)},mouseLeaveDelayTime:0,entry:function(){return s.createElement(fn,{lottiePath:o})}})},Bn=function(e){var n=e.lottiePath,t=e.isShowTips;return s.createElement(s.Fragment,null,s.createElement(fn,{lottiePath:n}),t&&s.createElement("div",{className:"xgplayer-theaterMaterMode-directTips"},"å·²ä¸ºæ‚¨å¼€å¯",s.createElement("b",null,"å‰§åœºæ¨¡å¼"),"ï¼Œç‚¹å‡»æŒ‰é’®å¯å›åˆ°é»˜è®¤æ ·å¼"," "),s.createElement("div",{className:"triangle"})))},Un=function(e){va0],l=o[1],u=n?"é€€å‡ºå‰§åœºæ¨¡å¼":"å‰§åœºæ¨¡å¼",c=n?Rn:Ln,f=(0,s.useCallback)((function(e){e(),n?(t.isTheater=!1,t.emit("disable_theaterMode")):(t.isTheater=!0,t.emit("enable_theaterMode"));var r=document.activeElement;null==r||r.blur()}),[n,t]);return(0,s.useEffect)((function(){var e,n=function(){l(!0),e=setTimeout((function(){l(!1)}),3e3)};return t.on("showTheaterDirectTips",n),function(){e&&window.clearTimeout(e),t.off("showTheaterDirectTips",n)}}),[t]),s.createElement(Ve,{ariaLabel:u,className:"tip-control-item xgpc-theater-control-item",onConfirm:f,popover:function(){return s.createElement("div",null,u)},mouseLeaveDelayTime:0,entry:function(){return s.createElement(Bn,{lottiePath:c,isShowTips:a})}})},Hn=t(90164),Vn=(t(71446),t(7942)),jn=(t(45688),t(84505)),zn=(t(69600),t(54903)),qn=t.n(zn),Gn=function(e){var n,t,r;if(window.isNaN(e))return"";e=Math.floor(e);var o=Math.floor(e/3600),i=Math.floor((e-3600*o)/60),a=Math.floor(e-3600*o-60*i),l=qn()(n=o.toString()).call(n,2,"0"),u=qn()(t=i.toString()).call(t,2,"0"),c=qn()(r=a.toString()).call(r,2,"0");return("00"===l?[u,c]:[l,u,c]).join(":")},Kn=function(e){var n,t=Math.floor(e/3600),r=Math.floor(e/60%60),o=Math.floor(e%60);return(t?"".concat(t,"å°æ—¶"):"")+C()(n="".concat(r,"åˆ†é’Ÿ")).call(n,o,"ç§’")};function Wn(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var $n=function(){var e=this.player,n=e.config,t=(0,s.useState)("00:00"),r=(0,i.Z)(t,2),o=r[0],a=r[1],l=(0,s.useState)("00:00:00"),u=(0,i.Z)(l,2),c=u[0],f=u[1],d=(0,s.useCallback)((function(){var t;return(null===(t=n.official)||void 0===t?void 0:t.duration)||n.duration||e.duration}),[]),p=(0,s.useState)(d),v=(0,i.Z)(p,2),m=v[0],h=v[1];return(0,s.useEffect)((function(){var n=function(){var n=e.currentTime;a(Gn(n))};return e.on(ce.MH,n),function(){e.off(ce.MH,n)}}),[e,m]),(0,s.useEffect)((function(){var n=function(){var e=d();h(d),f(Gn(e))};return e.on(ce.aH,n),function(){e.off(ce.aH,n)}}),[d]),s.createElement("div",{className:"xgplayer-time"},s.createElement("span",{className:"time-current"},o),s.createElement("span",{className:"time-separator"},"/"),s.createElement("span",{className:"time-duration"},c))},Xn=function(e){(0,oe.Z)(t,e);var n=Wn(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=$n.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}}],[{key:"pluginName",get:function(){return"xgpc_time"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_LEFT,index:2}}}]),t}(Se),Yn=t(36384),Qn=t.n(Yn),Jn=function(e){var n=e.thumbnail,t=e.cursorNow,r=e.playNow,o=e.thumbnailWidth,a=,l=e.duration,u=e.containerRef,c=n.pic_num,f=n.row,d=n.col,p=n.width,v=n.height,m=n.urls,h=function(e){var n=Math.round(l/c),t=Math.ceil(e/n);return{index:t=t>c?c:t,urlIndex:t<f*d?0:Math.ceil(t/(f*d))-1}},y=functi=u.current)||void 0===e?void 0:e.getBoundingClientRect().width)||0,i=h(t),c=i.index,s=i.urlIndex,y=c-s*(d*f),g=y>0?Math.ceil(y/d)-1:0,_=y>0?y-g*d-1:0,E=o,b=a;return p/v>o/a?b=o*(v/p):E=a*(p/v),{offset:Math.min(Math.max(t/l*r-E/2,0),r-E),style:{backgroundImage:"url(".concat(m[s],")"),backgroundSize:"".concat(E*d,"px auto"),backgroundPosition:C()(n="-".concat(_*E,"px -")).call(n,g*b,"px"),width:E,height:b}}},g=(0,s.useState)(y),_=(0,i.Z)(g,2),E=_[0],b=_[1];(0,dn.i)((function(){b(y)}),[t]);var w=(0,s.useRef)(new(Qn()));return(0,s.useEffect)((function(){var e=h(r).urlIndex,n=m[e];n&&!w.current.has(n)&&(w.current.add(n),function(e,n,t){var r=new Image;r.onload=function(){null==n||n()},r.onerror=function(){null==t||t()},r.src=globalThis.xssNamespace.xigua_video_web_pc.filterUrl(e,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}(n))}),[r]),E},et="xgplayer-thumbnail",nt=function(e){var n=e.thumbnail,t=e.cursorNow,r=e.playNow,o=e.containerRef,i=e.show,a=e.displayDuration,l=e.realDuration,u=Jn({thumbnail:n,thumbnailWidth:160,thumbnailHeight:90,duration:a,cursorNow:t,playNow:r,containerRef:o}),c=u.offset,f=u.style;return i&&t<=l?s.createElement("div",{className:et,style:{width:160,height:90,transform:"translateX(".concat(c,"px)")}},s.createElement("div",{className:"".concat(et,"-content"),style:f},s.createElement("div",{className:"".concat(et,"-time")},Gn(t)))):null};function tt(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var rt,ot="xgplayer-progress",tion,a=e.duration,u=e.className,c=(0,s.useRef)(null),f=(0,s.useState)(0),d=(0,i.Z)(f,2),p=d[0],v=d[1],m=(0,s.useState)(0),h=(0,i.Z)(m,2),y=h[0],g=h[1],_=(0,s.useMemo)((function(){var e;return t?L()(e=[t.opening,t.ending]).call(e,Boolean):[]}),[]),E=(0,s.useCallback)((function(){return o||a||n.duration}),[o,a,n]),b=(0,s.useState)(n.duration),C=(0,i.Z)(b,2),w=C[0],Z=C[1],k=(0,s.useState)(E),x=(0,i.Z)(k,2),P=x[0],S=x[1],T=(0,s.useState)(0),N=(0,i.Z)(T,2),O=N[0],I=N[1];(0,s.useEffect)((function(){var e=function(){R.current||v(n.currentTime)},t=function(){var e=n.bufferedPoint;g(e.end)};return n.on(ce.MH,e),n.on(ce.kL,t),n.on(ce.ad,t),n.on(ce.Ku,t),function(){n.off(ce.MH,e),n.off(ce.kL,t),n.off(ce.ad,t),n.off(ce.Ku,t)}}),[]),(0,s.useEffect)((function(){var e=function(){Z(n.duration),S(E())};return e(),n.on(ce.aH,e),function(){n.off(ce.aH,e)}}),D=(0,s.useCallback)((function(e){var n=c.current.getBoundingClientRect(),t=n.width,r=e-n.left;return Math.max(Math.min(r/t*P,P-1),0)}),[P]);(0,s.useEffect)((function(){var e=c.current;if(e){var t=function(t){e.focus();var r=0,o=function(e){n.emit(ce.FU,{autoHide:!1});var t=D(e.clientX);r=t,v(t),R.current=!0};document.addEventListener("mousemove",o),document.addEventListener("mouseup",(function e(){if(R.current){var t=Math.min(r,w-1);v(t),n.seek(t),R.current=!1,n.emit(ce.FU)}document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)}))};return e.addEventListener("mousedown",t),function(){e.removeEventListener("mousedown",t)}}}),[w,D]);var A=(0,s.useCallback)((function(e){return e/P*100}),[P]),M=(0,s.useState)(!1),F=(0,i.Z)(M,2),B=F[0],U=F[1],H=(0,s.useCallback)((function(){U(!0)}),[]),V=(0,s.useCallback)((function(){U(!1)}),[]),z=(0,s.useCallback)((function(e){if(B){var n=D(e.clientX);I(n)}}),[B,D]),q=(0,s.useCallback)((function(e){var t=Math.min(D(e.clientX),w-1);v(t),n.seek(t)}),[w,D]),G=(0,s.useMemo)((function(){return{width:"".concat(A(p),"%")}}),[p,A]),K=(0,s.useMemo)((function(){return{left:"".concat(A(p),"%")}}),[p,A]),W=(0,s.useMemo)((function(){return{width:"".concat(A(y),"%")}}),[y,A]);return s.createElement("div",{className:j()(ot,B&&"".concat(ot,"-mouseEnter"),u),onMouseEnter:H,onMouseLeave:V,onMouseMove:z,onClick:q,ref:c,tabIndex:0,role:"slider","aria-label":"æ’­æ”¾è¿›åº¦æ¡","aria-valuemin":0,"aria-valuemax":Math.floor(P),"aria-valuenow":Math.floor(n.currentTime),"aria-valuetext":Kn(n.currentTime)+" / "+Kn(P)},s.createElement("div",{className:j()("".concat(ot,"-outer"))},s.createElement("div",{className:j()("".concat(ot,"-cache")),style:W}),s.createElement("div",{className:j()("".concat(ot,"-played")),style:G}),l()(_).call(_,(function(e,n){return s.createElement("div",{className:j()("".concat(ot,"-point")),key:n,style:{left:"".concat(A(e),"%")}})})),B&&s.createElement("div",{className:j()("".concat(ot,"-point")),style:{left:"".concat(A(O),"%")}}),s.createElement("div",{className:j()("".concat(ot,"-btn")),style:K}),r&&s.createElement(nt,{thumbnail:r,cursorNow:O,playNow:p,containerRef:c,show:B,realDuration:w,displayDuration:P})))},at=function(){var e=this.player,n=this.player.config,t=n.seek_ts,r=n.thumbnail,o=n.duration,i=n.official;return s.createElement(it,{player:e,seek_ts:t,thumbnail:r,duration:o,officialDuration:null==i?void 0:i.duration})},lt=function(e){(0,oe.Z)(t,e);var n=tt(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=at.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}}],[{key:"pluginName",get:function(){return"xgpc_progress"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_CENTER,index:0}}}]),t}(Se);function ut(){return ut=Object.assign||function(e){for(var n=1;n<arguments. 0 00-1 1v18a1 1 0 001 1h4a1 1 0 001-1V1a1 1 0 00-1-1H2zm12 0a1 1 0 00-1 1v18a1 1 0 001 1h4a1 1 0 001-1V1a1 1 0 00-1-1h-4z",fill:"#fff"})))};function ft(){return ft=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ft.apply(this,arguments)}var dt=function(e){return s.createElement("svg",ft({width:20,height:20,opacity:.8,viewBox:"-5 -5 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),ct||(ct=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.173 8.691c1.103.613 1.103 2.005 0 2.617L4.777 18.75C3.577 19.416 2 18.673 2 17.442V2.559C2 1.327 3.578.584 4.777 1.25l13.396 7.441z",fill:"#fff"})))},pt=t(23493),vt=t.n(pteflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te(ht,yt=function(e){(0,oe.Z)(t,e);var n=mt(t);function t(e){var r;return(0,re.Z)(this,t),r=n.call(this,e),(0,g.Z)((0,he.Z)(r),"RPAttr_isPaused",void 0),r.Component=gt.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"afterCreate",value:function(){var e=this;this.RPAttr_isPaused=Ge({attrKey:"definitionList",defaultValue:!0,plugin:this});var n=function(){e.RPAttr_isPaused.updateAttr(e.player.paused)};this.on(cvalue:function(){return je}}],[{key:"pluginName",get:function(){return"xgpc_playIcon"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_LEFT,index:0}}}]),t}(Se);!function(e){e[e.play=0]="play",e[e.pause=1]="pause",e[e.replay=2]="replay"}(ht||(ht={}));var gt=function(){var e=this,n=this.RPAttr_isPaused.usePluginAttr(),t=(0,i.Z)(n,1)[0]?this.player.ended?ht.replay:ht.play:ht.pause,r=(0,s.useCallback)(vt()((function(){e.player.paused?e.player.ended?e.player.replay():e.player.play():e.player.pause()}),200),[this]);return s.createElement(Ve,{ariaHaspopup:!0,showPopoverOnFocus:!0,onConfirm:r,className:"tip-control-item play-pause",popover:function(e){return s.createElement(Et,(0,o.Z)({},e,{state:t}))},mouseLeaveDelayTime:0,entry:function(){return s.createElement(_t,{state:t})}})},_t=function(e){var n=e.state;return s.createElement("div",{className:qe},function(){switch(n){case ht.play:return s.createElement(dt,null);case ht.pause:return s.createElement(st,null);case ht.replay:default:return s.createElement(dt,null)}}())},Et=function(e){var n=e.state;return s.createElement("span",null,function(){switch(n){case ht.play:return"æ’­æ”¾";case ht.pause:return"æš‚åœ";case ht.replay:return"é‡æ’­";default:return"æ’­æ”¾"}}())};function bt(e){var n=function(){if("unde(te().sham)return!1;if(xy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function()urn!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Ct=function(e){(0,oe.Z)(t,e);var n=bt(t);function t(){return(0,re.Z)(this,t),n.apply(this,arguments)}return(0,le.Z)(t,[{key:"afterPlayerInit",value:function(){}},{key:"afterCreate",value:function(){var e=this,n={"--player-icon-size":"32px","--player-controls-height":"48px"},t={"--pfunction(n){var t=e.player.root;t&&c()(n).forEach((function(e){t.style.setProperty(e,n[e])}))};r(n),this.on(ce.GS,(function(e){r(e?t:n)}))}}],[{key:"pluginName",get:function(){return"cssVar"}},{key:"defaultConfig",get:function(){return{}}}]),t}(_e.ined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Zt=function(e){(0,oe.Z)(t,e);var n=wt(t);function t(){return(0,re.Z)(this,t),n.apply(this,arguments)}return(0,le.Z)(t,[{key:"afterCreate",value:function(){var e,n,t=this.player.root;if(t){t.setAttribute("tabindex","-1");var ventListener("click",r),this.destroy=function(){t.removeEventListener("click",r)}}this.player.video&&(null===(e=this.player.video)||void 0===e||null===(n=e.removeAttribute)||void 0===n||n.call(e,"tabindex"))}}],[{key:"pluginName",get:function(){return"xgpc_aria"}}]),t}(_e.ZP),kt=t(27899),xt=(t(66532),t(54871)),Pt={AUTHOR_BTN_VISIBLE:"author_btn_visible",VIDEO_TITLE_VISIBLE:"video_title_visible",PIP_ENABLE:"pip_enable"},St=function(e){var n=e.player,t=(0,s.useState)(!1),r=(0,i.Z)(t,2),o=r[0],a=r[1];return(0,s.useEffect)((function(){var e=function(e){a(e)};return n.on(Pt.PIP_ENABLE,e),function(){n.off(Pt.PIP_ENABLE,e)}}),[]),{pipEnable:o}},Tt=t(12011),Nt=function(){var e;return null===(e=Tt.Z.getMyABInfoV2().pip)||void 0===e?void 0:e.enable},Ot=t(61281),It=t(34557);function Rt(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}function Lt(){var e=this,n=(0,s.useState)(this.player.plugins.pip.isPip),t=(0,i.,u=St({player:this.player}).pipEnable;return(0,s.useEffect)((function(){var n=e.player.plugins.pip.isPIPAvailable(),t=l&&n;e.emit(Pt.PIP_ENABLE,t)}),[l]),(0,s.useEffect)((function(){var n=function(n){o(n);var t=e.player;n?a.current=t.currentTime||0:H.Z.video.pipClose({log_pb:t.xgpcInfo.log_pb,player_status:t.xgpcInfo.player_status,duration:1ern e.on(ce.W5,n),function(){e.off(ce.W5,n)}}),[]),u?s.createElement(s.Fragment,null,s.createElement(At,{isPip:r,player:this.player})):null}var Dt=function(e){(0,oe.Z)(t,e);var n=Rt(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=Lt.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return j()(je,"xgpc_pip_setting")}}],[{key:"pluginName",get:function(){return"xgpc_pip_setting"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_RIGHT,index:24}}}]),t}(Se),At=function(e){var ip,r=t?I0,F.$o)("".concat(o,"_pip_sh(function(){return t?"é€€å‡ºç”»ä¸­ç”»":"å¼€å¯ç”»ä¸­ç”»"}),[t]),d=(0,s.useCallback)((function(){c(!1),t?n.plugins.pip.exitPIP():n.plugins.pip.requestPIP(),H.Z.video.pipToggle({log_pb:n.xgpcInfo.log_pb,player_status:n.xgpcInfo.player_status,status:t?"off":"on"})}),[t,n.plugins.pip]);return(0,s.useEffect)((function(){"1"!==(0,F.$o)("".concat(o,"_pip_showed"))&&((0,F.qQ)("".concat(o,"_pip_showed"),"1"),H.Z.video.pipShow({log_pb:n.xgpcInfo.log_pb,player_status:n.xgpcInfo.player_status}))}),[]),s.createElement(s.Fragment,null,s.createElement(Ve,{ariaLabel:f,className:"tip-control-item",onConfirm:d,onMouseEnter:function(){c(!1)},popover:function(){return s.createElement("div",null,f)},mouseLeaveDelayTime:0,entry:function(){return s.createElement(fn,{lottiePath:r})}}),u?s.createElement("div",{className:"pip-tips"},s.createElement("span",{className:"pip-tips__triangle"}),s.createElement("div",null,"ç‚¹å‡»æ­¤å¤„å¼€å¯ç”»ä¸­ç”»")):null)},Mt=t(5436),Ft=t(73468),Bt=function(){var e=(0,y.Z)(E().mark((function e(){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(t.bind(t,85363)).then((function(e){return e.default}));case 2:return n=e.sent,r=[Hn.Z,Vn.Z,un,jn.ZP,Ct,Oe,yt,We,rn,mn,Pn,An,n,pe,ve.Z,me.Z,ke,xe.Z,lt,yt,Xn,Zt,kt.Z,Dt,Mt.Z,Ft.Z],e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ut=Bt,Ht=function e(){(0,re.Z)(this,e),(0,g.Z)(this,"plugins",void 0),(0,g.Z)(this,"ignores",void 0),(0,g.Z)(this,"i18n",void 0)};function Vt(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var jt=function(){var e=(0,y.Z)(E().mark((function e(){var n,t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut();case 2:return n=e.sent,t=function(e){(0,oe.Z)(r,e);var t=Vt(r);function r(){var e;return(0,re.Z)(this,r),(e=t.call(this)).plugins=n,e}return r}(Ht),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zt=t(78580),qt=t.n(zt);function Gt(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){vor;t=te()(r,arguments;return(0,ie.Z)(this,t)}}var Kt,Wt=function(){var e=(0,y.Z)(E().mark((function e(){var n,t,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=L(),e.next=3,Ut();case 3:return e.t1=n=e.sent,t=(0,e.t0)(e.t1).call(n,(function(e){var n;return!qt()(n=["xgpc_extra_config"]).call(n,e.pluginName)})),r=function(e){(0,oe.Z)(r,e);var n=Gt(r);function r(){var e;return(0,re.Z)(this,r),(e=n.call(this)).plugins=t,e}return r}(Ht),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$t=(t(24840),t(92744)),Xt=function(e){var n=e.player,t=(0,s.useState)(0),r=(0,i.Z)(t,2),o=r[0],a=r[1];return(0,s.useEffect)((function(){var e=function(){a(n.currentTime)};return n.on(ce.MH,e),function(){return n.off(ce.MH,e)}}),[]),s.createElement("div",{className:"xgpc-player-time"},s.createElement("span",{className:"time-current"},(0,$t.LU)(o)),s.createElement("span",{className:"time-separator"}," / "),s.createElement("span",{className:"time-duration"},(0,$t.LU)(n.duration)))};function Yt(){return Yt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Yt.apply(this,arguments)}var Qt,Jt=function(e){return s.createElement("svg",Yt({width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Kt||(Kt=s.cr),Qt||ion rr(){return rr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},rr.apply(this,arguments)}var or=function(e){return s.createElement("svg",rr({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),nr||(nr=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.75 4.5a.25.25 0 00-.25.25v14.5c0 .138.112.25.25.25h14.5a.25.25 0 00.25-.25v-4.156a.75.75 0 111.5 0v4.156A1.75 1.75 0 0119.25 21H4.75A1.75 1.75 0 013 19.25V4.75C3 3.784 3.784 3 4.75 3h3.64a.75.75 0 110 1.5H4.75zM19.5 5.56l-7.06-1.06l7.97-7.97h-4.19a.75.75 0 010-1.5h5.5c.69 0 1.25.56 1.25 1.25v5.5a.75.75 0 01-1.5 0V5.56z",fill:"#0C0D0F"})))},ir=t(63274),ar=t(52733),lr=t(93073),ur=t(31360),cr=t(44999),sr=t(12547);function fr(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if((r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var dr=function(e){(0,oe.Z)(t,e);var n=fr(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=vr.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return pget:function(){return"toPlay_action"}}]),t}(Se),pr="ToPlayPlayerAction";function vr(){var e=this,n.updam,u=a.currentItemIndex,c=u>0,f=u<t.list.length-1,d=(0,s.useState)(!1),p=(0,i.Z)(d,2),v=p[0],m=p[1],h=(0,s.useState)(!0),y=(0,i.Z)(h,2),g=y[0],_=y[1];(0,s.useEffect)((function(){var n=function(){return _(!0)},t=function(){return _(!1)};return e.on(ce.NH,t),e.on(ce.E7,n),function(){e.off(ce.NH,t),e.off(ce.E7,n)}}),[]);var E,b,C=(0,s.useCallback)((function(){var n;null===(n=e.player.video)||void 0===n||n.focus(),e.player.paused?e.player.play():e.player.pause()}),[]),w=this.player,Z=w.config,k=Z.seek_ts,x=Z.thumbnail,P=Z.duration,S=Z.offction(){b.current=E}),[E]),b.current);return s.createElement(s.Fragment,null,s.createElement(lr.Vq,{visible:v,onCancel:function(){return m(!1)},onOk:function(){sr.Z.float_player_close_confirm(),o()},title:"ç¡®å®šè¦å…³é—­å¾…æ’­åˆ—è¡¨å—ï¼Ÿ",content:"å…³é—­åå°†ä¼šæ¸…ç©ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å¾…æ’­è§†é¢‘",okText:"å…³é—­å¹¶æ¸…ç©ºåˆ—è¡¨"}),s.createElement("div",{className:"".concat(pr,"__top")},s.createElement("div",{className:"goToDetails"},s.createElement(or,{onClick:function(){var n=l||T;if(n){var t=(0,cr.SM)({gid:null==n?void 0:n.gid,query:{logPb:null==n?void 0:n.log_pb}}),r=(0,ur.L4)(t);sr.Z.float_player_go_detail({group_id:n.gid,log_pb:n.log_pb,author_id:n.uid}),!e.player.paused&&e.player.pause(),window.open(r)}}}),s.createElement("div",{className:"tips"},"è¿›å…¥è¯¦æƒ…é¡µ")),s.createElement(pn.x8P,{onClick:function(){sr.Z.click_float_player_close(),m(!0)}})),s.createElement("div",{className:"".concat(pr,"__middle")},s.createElement(Jt,{className:j()({hide:!c}),onClick:function(){var e=t.list[u-1];r(e)}}),g?s.createElement(dt,{onClick:C}):s.createElement(st,{onClick:C}),s.createElement(tr,{className:j()({hide:!f}),onClick:function(){var e=t.list[u+1];r(e)}})),s.createElement("div",{className:"".concat(pr,"__bottom")},s.createElement(Xt,{player:w}),s.createElement(it,{player:w,seek_ts:k,thumbnail:x,duration:P,officialDuration:null==S?void 0:S.duration})))}var mr=function(){var e=(0,y.Z)(E().mark((function e(){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[Hn.Z,jn.ZP,Ie,pe,ke,xe.Z,mn,dr,Zt],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hr=mr;function yr(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var gr=function(){var e=(0,y.Z)(E().mark((function e(){var n,t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr();case 2:return n=e.sent,t=function(e){(0,oe.Z)(r,e);var t=yr(r);function r(){var e;return(0,re.Z)(this,r),(e=t.call(this)).plugins=n,e}return r}(Ht),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_r=t(63558),Er=t(83099),br=(t(64605),function(){var e=(0,y.Z)(E().mark((function e(){var n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[Hn.Z,jn.ZP,Xn,Er.Z,ke,Oe,_r.Z,pe,xe.Z,Ct],e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),Cr=br;function wr(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Zr=function(){varkr=t(84641),xr=function(){var e=(0,y.Z)(E().mark((function e(){var n,r;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(t.bind(t,85363)).then((function(e){return e.default}));case 2:return n=e.sent,r=[Hn.Z,Vn.Z,un,kr.Z,Ct,Oe,yt,We,rn,mn,Pn,An,n,pe,ve.Z,me.Z,ke,xe.Z,lt,yt,Xn,Zt,kt.Z,Dt,Mt.Z,Ft.Z],e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pr=xr;function Sr(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Tr=function(){var e=(0,y.Z)(E().mark((function e(){var n,t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pr();case 2:return n=e.sent,t=function(e){(0,oe.Z)(r,e);var t=Sr(r);function r(){var e;return(0,re.Z)(this,r),(e=t.call(this)).plugins=n,e}return r}(Ht),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Nr={default:jt,iframe:Wt,toPlay:gr,embed:Zr,mp4Mse:Tr},Or=function(){var e=(0,y.Z)(E().mark((function e(){var n,t=arguments;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.length>0&&void 0!==t[0]?t[0]:"default",!Nr[n]){e.next=5;break}return e.abrupt("return",Nr[n]());case 5:return e.abrupt("return",Nr.default());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ir=Or;function Rr(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function Lr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Rr(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Rr(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var Dr=function(){var e=(0,y.Z)(E().mark((function e(n){var t,r,o,i,a,l,u,c,s,f,d,p,v,m,h,y,g,_,b,C,w,Z,k,x,P,S,T,N,O,I,R;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.id,i=n.preset,a=n.isCSSFullscreen,l=n.isFullscreen,u=n.closeVideoDblclick,c=n.videoInfo,s=n.mp4VideoInfo,f=n.vid,d=n.duration,p=n.isMobile,v=void 0!==p&&p,m=n.fullscreenContainer,h=n.isDrm,y=n.dashPluginConfig,g=void 0===y?{}:y,_=n.mp4PluginConfig,b=void 0===_?{}:_,C=n.codecType,w=v||(0,$.Io)()?{whitelist:[""],playsinline:!0,enableEndedPlay:!0}:{},Z=(0,X.Oz)({videoInfo:c,mp4VideoInfo:s}),k=Z.mp4Opts,x=Z.dashOpts,P=(0,X.ZZ)({mp4Opts:k,dashOpts:x}),d=(null==c?void 0:c.video_duration)||d,S="mp4Mse"===i,e.next=8,(0,X.s6)({dashOpts:x,defaultDefinition:P,isMp4abr:S,codecType:C});case 8:if(T=e.sent,e.t0=Lr,e.t1=Lr({},g),e.t2={},e.t3=f,e.t4="auto"===P?"720p":P,e.t5=T,e.t6=z._F,e.t7=null!==(t=null===(r=Y._o.getMyABInfoV2().preload_list_video)||void 0===r?void 0:r.preloadBufferThreshold)&&void 0!==t?t:.5,e.t8=["v9-xg-web-s.ixigua","v3-xg-web.ixigua.com"],e.t9=$.bp,e.t10=d&&d>2400?180:50,!h){e.next=26;break}return e.next=23,J();case 23:e.t11=e.sent,e.next=27;break;case 26:e.t11=void 0;case 27:return e.t12=e.t11,e.t13=(E=void 0,L=void 0,(null===(E=window)||void 0===E||null===(L=E._globalConfig)||void 0===L?void 0:L.isBoe)?"http://boe-www.ixigua.com/video/drm/v1/play_licenses":"https://www.ixigua.com/video/drm/v1/play_licenses"),e.t14={vid:e.t3,defaultDefinition:e.t4,autoBitrateOpts:e.t5,progressTimer:700,definitionText:e.t6,bufferThreshold:5,preloadBufferThreshold:e.t7,url_range_domains:e.t8,getServerTime:e.t9,preloadTime:e.t10,useBackUrl:!0,useNewStartTime:!1,intertrustServerURL:e.t12,getLicenseUrl:e.t13,useProgressiveAppend:!0,disableCanplayCheck:!1,disableDashNoCanplayCheck:!1,disableBufferBreakCheck:!1},N=(0,e.t0)(e.t1,e.t2,e.t14),e.t15=Lr,e.t16=Lr,e.t17=Lr({},ee),e.t18={},e.next=37,Ir(i);case 37:if(e.t19=e.sent,e.t20=[e.t19],e.t21=o,e.t22=a,e.t23=l,e.t24=u,e.t25=function(e){B.ZP.playError({vid:f,url:window.location.pathname,reason:e})},e.t26=m,e.t27=z._F,e.t28={presets:e.t20,id:e.t21,isCSSFullscreen:e.t22,isFullscreen:e.t23,closeVideoDblclick:e.t24,defaultPlaybackRate:1,onPlayerError:e.t25,fullscreenContainer:e.t26,definitionText:e.t27},e.t29=w,e.t30=(0,e.t16)(e.t17,e.t18,e.t28,e.t29),e.t31={},e.t32={defaultDefinition:P,pip:{showIcon:!1},testspeed:{openSpeed:!0}},O=(0,e.t15)(e.t30,e.t31,e.t32),!S){e.next=77;break}if(O.definition=b.definition,O.H264DefinitionList=b.H264DefinitionList,e.t33=Lr,e.t34=Lr({},b),e.t35={},e.t36=f,e.t37=P,e.t38=T,e.t39=z._F,e.t40=null!==(I=null===(R=Y._o.getMyABInfoV2().preload_list_video)||void 0===R?void 0:R.preloadBufferThreshold)&&void 0!==I?I:.5,e.t41=["v9-xg-web-s.ixigua","v3-xg-web.ixigua.com"],e.t42=$.bp,!h){e.next=71;break}return e.next=68,J();case 68:e.t43=e.sent,e.next=72;break;case 71:e.t43=void 0;case 72:e.45={vid:e.t36,minBufferLength:10,maxBufferLength:60,defaultDefinition:e.t37,autoBitrateOpts:e.t38,tickInSeconds:.2,definitionText:e.t39,bufferThreshold:5,preloadCacheType:1,preloadTime:0,preloadBufferThreshold:e.t40,url_range_domains:e.t41,getServerTime:e.t42,useBackUrl:!0,useNewStartTime:!1,intertrustServerURL:e.t44,onProcessMinLen:0,segmentMinDuration:3,rangeMaxDuration:10,removeBufferLen:60},O.mp4encryptplayer=(0,e.t33)(e.t34,e.t35,e.t45),e.next=78;break;case 77:O.DASHPlugin=N;case 78:return e.abrupt("return",O);case 79:case"end":return e.stop()}var E,L}),e)})));return function(n){return e.apply(this,arguments)}}(),Ar=s.createContext({isUserAuthor:!1,player:null,playerElm:null,isTheater:!1,isReplay:!1,isCSSFullscreen:!1,canplay:!0,playerConfigTimestamp:0,logInfo:{},isInited:!1}),Mr=s.createContext({isShowPlaceHolder:fig:{}}),Fr=t(23903),Br=function(){var e=(0,s.useContext)(Ar).playerElm,n=Ur(),t=n.content,r=n.isHide,o=n.closeable,i=n.handleCloseClick,a=n.handleTransitionEnd,l=s.createElement("div",{className:j()("".concat(z.Fq,"__LBTips"),(0,g.Z)({},"".concat(z.Fq,"__slideUp"),!r)),onTransitionEnd:a},s.createElement("p",null,t),o&&s.createElement("i",{className:"icon-close",onClick:i}));return(0,s.useEffect)((function(){var n=null==e?void 0:e.querySelector(".xgplayer-controls"),t=null==n?void 0:n.querySelector(".injectContainer-ctrl");t||((t=document.createElement("div")).classLer-ctrl"),null==n||n.insertBefore(t,n.firstElementChild)),n&&M.render(l,t)})),(0,s.useEffect)((function(){var n=null==e?void 0:e.querySelector(".xgplayer-controls"),t=null==n?void 0:n.querySelector(".injectContainer-ctrl");return function(){t&&M.unmountComponentAtNode(t)}}),[]),null},Ur=function(){var e=(0,s.useContext)(Ar)(n,3),r=t[0],o=t[1],a=t[2],l=(0,q.Z)(!0),u=(0,i.Z)(l,3),c=u[0],f=u[1],d=u[2],p=(0,s.useCallback)((function(){var e;null==r||null===(e=r.onCloseStart)||void 0===e||e.call(r),f(!0)}),[]),v=(0,s.useCallback)((function(){var e;p(),null==r||null===(e=r.onCloseClick)||void 0===e||e.call(r)}),[]);return(0,s.useEffect)((function(){if(e){var n=function(e){var n=a.current;e&&(!n||e.level>=(null==n?void 0:n.level))&&o(e)},t=function(e){var n=a.current;(null==n?void 0:n.key)===e&&o(void 0)},r=function(){o(void 0)};e.on(Fr.kI.PUSH,n),e.on(Fr.kI.CLEAR,t),e.on(Fr.kI.CLEARANY,r);return function(){null==e||e.off(Fr.kI.PUSH,n),null==e||e.off(Fr.kI.CLEAR,t),null==e||e.off(Fr.kI.CLEARANY,r)}}}),[e]),(0,s.useEffect)((function(){if(r){if(f(!1),r.autoClose||void 0===r.autoClose){var e=window.setTimeout((function(){p()}),r.duration||3e3);return function(){return clearTimeout(e)}}}else f(!0)}),[r]),{content:null==r?void 0:r.content,isHide:c,closeable:null==r?void 0:r.closeable,handleCloseClick:v,handleTransitionEnd:function(){var n;d.current&&(o(void 0),null==r||null===(n=r.onClosed)||void 0===n||n.call(r),e&&e.emit(Fr.OP.CLOSED))}}};t(42057);function Hr(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function Vr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Hr(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Hr(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var jr="video-st-auto-defi-tip-count";function zr(){var e=(0,F.$o)(jr);if(e){var n=JSON.parse(e),t=(0,F.vc)(new Date,"y/M/d");if(t===n.date)return n.count;(0,F.qQ)(jr,Z()({date:t,count:0}))}return 0}var qr=t(83901),Gr="STATS",Kr="REPORT",Wr="CONTEXTMENU_SHOW",$r={MENU_REPORT:"MENU_REPORT",MENU_LOG:"MENU_LOG"},Xr=t(62360);function Yr(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function Qr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Yr(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Yr(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var Jr=function(e){var n=e.addGlobalEE,t=e.player;n(Cn.o.requesetPlayerSeek,(function(e,n){(0,$t.k3)();var r=t.duration;t.duration>=e&&(r=e);var o={key:"jump_click_tips",content:s.createElement(s.Fragment,null,"å·²è·³è½¬è‡³æŒ‡å®šä½ç½®",s.createElement("span",null,(0,$t.LU)(r))),level:1},i="0.0",a="0.0";t.duration&&(i=(t.currentTime/t.duration*100).toFixed(1),a=isNaN(e)?"0.0":(r/t.duration*100).toFixed(1));t.emit(G,o),Xr.ZP.adjust_progress(Qr(Qr({},t.xgpcInfo),{},{section:n,adjust_type:"seek",from_percent:i,percent:a})),t.currentTime===t.duration&&t.paused?(t.emit("replay"),t.replay(r)):t.currentTime=r}))};function eo(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function no(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eo(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):eo(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var to,ro,oo,io=function(e){var n=e.player;(0,e.addPlayerEvent)(n,"progressSeek",(function(e){var t=e.type,r=e.from_percent,o=e.percent;Xr.ZP.adjust_progress(no(no({},n.xgpcInfo),{},{section:"player_slidebar",adjust_type:t,from_percent:r,percent:o}))}))},ao=function(e){var n,t,r=e.player,o=e.addPlayerEvent,i="waittingTipval(n),r.emit:s.createElement(s.Fragment,null,"æ­£åœ¨ç¼“å†²",n>0?",":"...",n>0&&s.createElement("span",null,(0,$t.xS)(n)))};r.emit(G,t)}}),1e3)}),300),o(r,"timeupdate",l,"once")};o(r,"waiting",u),o(r,"PLAYER_WAITING",u),Cn.Z.once(Cn.o.playerInitStart,l)},lo=t(57119),uo=t(42004),co=function(e){var n=e.player;Cn.Z.once(Cn.o.playerInitStart,(function(){if((0,lo.$)()){var e,t;if((0,uo.uu)())return void(null==n||null===(e=n.xgExitFullscreen)||void 0===e||e.call(n));if((0,uo.uu)())return void(null==n||null===(t=n.xgExitCSSFullscreen)||void 0===t||t.call(n))}}))},so=t(47302),fo=t.n(so),po=t(62462),vo=t.n(po),mo=t(73397),ho=t(28616);!function(e){e.useTicket="useTicket",e.bigVip="bigVip"}(to||(to={})),function(e){e[e["cmn-Hans-CN"]=0]="cmn-Hans-CN",e[e["cmn-Hans-CN|eng-US"]=1]="cmn-Hans-CN|eng-US",e[e["eng-US"]=2]="eng-US",e[e["rus-RU"]=3]="rus-RU",e[e["jpn-JP"]=4]="jpn-JP",e[e["kor-KR"]=5]="kor-KR"}(ro||(ro={})),function(e){e[e["cmn-Hans-CN"]=1]="cmn-Hans-CN",e[e["eng-US"]=2]="eng-US",e[e["jpn-JP"]=3]="jpn-JP",e[e["kor-KR"]=4]="kor-KR",e[e["cmn-Hans-CN|eng-US"]=5]="cmn-Hans-CN|eng-US",e[e["rus-RU"]=6]="rus-RU",e[e["fra-FR"]=7]="fra-FR",e[e["por-PT"]=8]="por-PT",e[e["spa-ES"]=9]="spa-ES",e[e["vie-VN"]=10]="vie-VN",e[e["afr-ZA"]=11]="afr-ZA",e[e["ben-BD"]=12]="ben-BD",e[e["bul-BG"]=13]="bul-BG",e[e["mya-MM"]=14]="mya-MM",e[e["ces-CZ"]=15]="ces-CZ",e[e["dan-DK"]=16]="dan-DK",e[e["hrv-HR"]=17]="hrv-HR",e[e["nld-NL"]=18]="nld-NL",e[e["fin-FI"]=19]="fin-FI",e[e["deu-DE"]=20]="deu-DE",e[e["ell-GR"]=21]="ell-GR",e[e["hun-HU"]=22]="hun-HU",e[e["ind-ID"]=23]="ind-ID",e[e["gle-IE"]=24]="gle-IE",e[e["isl-IS"]=25]="isl-IS",e[e["ita-IT"]=26]="ita-IT",e[e["nor-NO"]=27]="nor-NO",e[e["pol-PL"]=28]="pol-PL",e[e["swe-SE"]=29]="swe-SE",e[e["tha-TH"]=30]="tha-TH",e[e["tur-TR"]=31]="tur-TR",e[e["ukr-UA"]=32]="ukr-UA"}(oo||(oo={}));var yo={"cmn-Hans-CN":"ä¸­æ–‡","cmn-Hans-CN|eng-US":"ä¸­è‹±åŒè¯­","eng-US":"è‹±è¯­","rus-RU":"ä¿„è¯­","kor-KR":"éŸ©è¯­","jpn-JP":"æ—¥è¯­"};function go(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function _o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?go(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):go(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var Eo=function(e){var n=e.player,t=e.config,r=e.addPlayerEvent,o=e.log_pb;if(!1!==window._globalConfig.playerConfig.enable_subtitle){var i=(0,X.WU)(t),a=Boolean(i),l="subtitle-language";if(a){r(n,"subtitleChanged",(function(e){var t=e.subtitle_id,r=(e.label,e.language),i=e.source;ho.Z.player.subtitle_setting_result({result:"success",log_pb:_o(_o({},n.xgpcInfo),o),subtitle_id:t,subtitle_version:i,display_source:"click"}),(0,F.qQ)(l,r||"hide"),r&&n.emit(G,{key:"subtitleChangeTips",level:2,content:s.createElement(s.Fragmdisplay_source:"click"})})),r(n,"subtitleClick",(function(e){var t=e.subtiubtitle_setting_click({subtitle_id:t,subtitle_version:r,log_pb:_o(_o({},n.xgpcInfo),o)})}));var u={key:"subtitleFailedTips",level:2,content:s.createElement(s.Fragment,null,"å­—å¹•åˆ‡æ¢å¤±è´¥ï¼Œè¯·é‡è¯•"),closeable:!0};r(n,"subtitleFailed",(function(e){var t=e.subtitle_id,r=e.source,i=e.code;n.emit(G,u),ho.Z.player.subtitle_setting_result({result:"fail",log_pb:_o(_o({},n.xgpcInfo),o),subtitle_id:t,subtitle_version:r,display_source:"click",error_code:i})}));r(n,"canp&e.subtitleInfos){var r=function(e){if(!e)return"";var n=[],t={};return e.forEach((function(e){"webvtt"===e.format&&(t[e.language_id]||(t[e.language_id]=[]),t[e.language_id].push(e))})),c()(t).forEach((function(e){var r,o;oo[e]in ro&&(t[e].length>1?n.push(null===(r=Ae()(o=t[e]).call(o,(function(e){return"ASR"!==e.version})))||void 0===r?void 0:r.sub_id):n.push(t[e][0].sub_id))})),L()(n).call(n,(function(e){return void 0!==e})).join()}(e.subtitleInfos);if(!r)return;mo.ZP.getAllSubtitle({video_id:t.vid,file_id:t.vid,sub_ids:r}).then((function(t){var r=t.data;if(0===r.code&&200===r.data.code){var o=r.data.data.list,i=[],a=(0,F.$o)(l);if(o.length>0){if(o.forEach((function(e){var n,t=e.language,r=e.language_id,o=e.url,a=e.source,l=e.sub_id;i.push({label:C()(n="".concat(yo[t])).call(n,"ASR"===a?"ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰":""),language:t,language_id:r,id:String(l),isDefault:!1,url:o,source:a})})),fo()(o).call(o,(function(e,n){return ro[e.language]-ro[n.language]})),"hide"!==a){var u=!1;(null!=e&&e.hasEmbeddedSubtitle?window._globalConfig.playerConfig.asr_default_with_on(e){e.isDefault=e.language===a&&!u,u=e.isDefault||u})),u||(i[0].isDefault=!0)):(i.forEach((function(e){e.isDefault=e.language===a&&"ASR"!==e.source&&!u,u=e.isDefault||u})),u||i.forEach((function(e){e.isDefault="ASR"!==e.source&&!u,u=e.isDefault||u})),u||(a="hide"))}if(n.emit("subtitleUpdate",i,"hide"===a),"hide"!==a){var c=window._globalConfig.playerConfig.subtitle_show_tips_interval,f="subtitle-tips-count",d=Number((0,F.$o)(f))||0;if(c<0)return;var p=vo()(i).call(i,(function(e){return e.isDefault}));d>=c?(n.emit(G,{key:"subtitleUsingTips",level:2,content:s.createElement(s.Fragment,null,"æ­£åœ¨ä½¿ç”¨",s.createElement("span",null,"ASR"===i[p].source?"å¹³å°è‡ªåŠ¨ç”Ÿæˆ":"ä½œè€…ä¸Šä¼ "),s.createElement("s",null),"çš„å­—å¹•"),display_source:"click"}),(0,F.dZ)(f)):(0,F.qQ)(f,String(d+1))}}}}))}}),"once")}}},bo=function(e){var n=e.player,t=e.config,r=e.addPlayerEvent,o=e.log_pb;[Eo,Jr,io,ao,co].forEach((function(e){return e({player:n,addGlobalEE:Zn,config:t,addPlayerEvent:r,log_pb:o})}))},Co=t(67516),wo=(t(40268),t(29e3),t(40865)),Zo={1:-499991,2:-499992,3:-499993,4:-499994,5:-499995};var ko=function(e,n){var t,r,o,i,a;return 4===n.code?(wo.Z.isSupportMP4&&!wo.Z.isSupportMP4()?n.code=n.errorCode=Zo[5]:n&&Zo[n.code]&&(n.code=n.errorCode=Zo[n.code]),e.emit("error",n),!0):(e.retryData||(e.retryData={retryCount:0,sCount:0,errfTimer:null,isFetchReturn:!1,curer:null}),!!e.replayRunning||4===(null===(t=e.video)||void 0===t||null===(r=t.error)||void 0===r?void 0:r.id 0:o.currentSrc)||N()(a=window.location.href).call(a,i)>-1))},xo=t(45601);function Po(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function So(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Po(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Po(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var To={},No={},Oo={},Io={},Ro={},Lo=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"on";if(e.config.id){var o;Io[e.config.id]||(Io[e.config.id]=[]);var i=Io[null==e||null===(o=e.config)||void 0===o?void 0:o.id];"string"==typeof n?(i.push({event:n,fn:t}),e[r](n,t)):n.forEach((function(n){i.push({event:n,fn:t}),e[r](n,t)}))}},Do=function(e){var n,t,r=Io[null==e||null===(n=e.config)||void 0===n?void 0:n.id];null==r||r.forEach((function(n){var t=n.event,r=n.fn;e.off||void 0===t?void 0:t.id]=[]},Ao=function(e){var n,t,r=e.isUserAuthor,o=e.fluid,a=void 0===o||o,u=e.defaultTheaterMode,f=e.showTheaterDirectTips,d=e.onTheaterModeChange,p=e.onFullscreenModeChange,v=e.fullscreenContainer,m=e.playerId,h=void 0===m?"player_default":m,g=e.className,_=e.onCanplayChange,b=e.vid,w=e.LogInfo_Ref,k=e.isDrm,P=e.preset,T=e.children,O=(0,s.useState)(!1),R=(0,i.Z)(O,2),D=R[0],V=R[1],q=(0,s.useState)(!1),K=(0,i.Z)(q,2),W=K[0],Y=K[1],Q=(0,s.useState)((function(){return!("undefined"==typeof document||!document.querySelector(".xgplayer-cssfullscreen-active"))})),J=(0,i.Z)(Q,2),ee=J[0],ne=J[1],te=(0,s.useState)(e.defaultFullscreenMode),re=(0,i.Z)(te,2),oe=re[0],ie=re[1],ae=(0,s.useRef)(!1),le=(0,s.useRef)(!1),ue=(0,s.useRef)(null),se=(0,s.useRef)(null),fe=(0,s.useRef)(null),de=(0,s.useRef)({height:900,width:1600}),pe=(0,s.useRef)(0),ve=(0,s.useRef)(null),me=(0,s.useRef)(0),he=(0,s.useRef)(!1),ye=null!=u&&u,ge=(0,s.useCallback)((function(e){return null==d?void 0:d(e)}),[]),_e=(0,s.useMemo)((function(){if("undefined"==typeof window)return!1;var e=window.navigator.userAgent;return/Safari/.test(e)&&!/Chrome/.test(e)}),[]),Ee=(0,s.useCallback)((function(e){Ce({setting:"theater",definition:e?"on":"off"}),d&&d(e)}),[d]),be=(0,s.useCallback)((function(e){Ce({setting:"fullscreen",definition:e?"on":"off"}),ie(e),e?Cn.Z.emit(Cn.o.playerFullScreenEnter):Cn.Z.emit(Cn.o.playerFullScreenOut),null==p||p(e)}),[p]);function Ce(e){var n,t;H.Z.player.videoPlayerSetting(So({log_pb:null===(n=w.current)||void 0===n?void 0:n.logPb,player_status:(null===(t=fe.current)||void 0===t?void 0:t.xgpcInfo.player_status)||""},e))}var we=9/16;de&&!ye&&(we=de.current.height/de.current.width),ye&&(we=z.ST.height/z.ST.width),(0,s.useEffect)((function(){var e=fe.current;if(D&&e){var n,t="player";ye&&(t="theater"),ee&&(t="web_fullscreen"),oe&&(t="fullscreen"),e.xgpcInfo=So(So({},e.xgpcInfo),{},{log_pb:null===(n=w.current)||void 0===n?void 0:n.logPb,player_status:t})}}),[D,ee,ye,oe]),(0,s.useEffect)((function(){var e=fe.current;D&&e&&e.usePluginHooks("pc","videoDbClick",(function(){return function(){var e=fe.current;null!=e&&e.isFullscreen?null==e||e.exitFullscreen(e.config.fullscreenContainer):null==e||e.getFullscreen(e.config.fullscreenContainer)}(),!1}))}),[D,fe.current]);var Ze=function(e){fe.current&&(fe.current.config.clarityChoose=e,fe.current.config.clarityActual=e)},ke=function(n,t){var r;if(n.vid){var o,i;bo({player:t,config:n,addPlayerEvent:Lo,log_pb:null===(r=w.current)||void 0===r?void 0:r.logPb}),Y(!1),o={vid:n.vid,vtype:n.defaultFormat,video_type:e.isLVideo?"longvideo":"shortvideo"},i=Date.now()-(window._routerNavigationStart||performance.timing.navige",Vr(Vr({time:iindow.location.href}));var a=function(){t.canplay||(!function(e){var n=Date.now()-(window._routerNavigationStart||performance.timing.navigationStart);window.Tea("canplay_consume",Vr(Vr({time:n},e),{},{page_type:(0,U.ZP)(),url:window.location.href}))}({vid:n.vid,vtype:n.defaultFormat,video_type:e.isLVideo?"longvideo":"shortvideo"}),null==_||_(!0),Y(!0),t.canplay=!0)};Lo(t,"canplay",a,"once"),Lo(t,"play",a,"once"),Lo(t,"definitionChangeSuccess",(function(e){var n=e.to;t.emit(Fr.kI.PUSH,{level:2,content:s.createElement(s.Fragment,null,"å·²åˆ‡æ¢æˆ",s.createElement("span",null,u(n))," ç”»è´¨")})}));var l=!1;Lo(t,"play",(function(){ve.current,t),l)&&H.Z.player.videoContinue({yer_status:t.xgpcInfo.player_status,section:nul?"pip":""});l=!0})),Lo(t,"replay",(function(){e.onPlay&&e.onPlay(ue.current,t)})),Lo(t,"ended",(function(){e.onEnded&&e.onEnded()})),Lo(t,"playbackrateChange",(function(e){t.emit(Fr.kI.PUSH,{level:2,content:s.createElement(s.Fragment,null,"æ­£åœ¨ç”¨",s.createElement("span",null,e,"å€")," é€Ÿç‡æ’­æ”¾")}),Ce({setting:"video_speed",definition:e,section:"player"})})),function(e){e.otion(n){var t=n.prev,r=n.cur,o=0,i=z._F[t],a=z._F[r],l=e.root.querySelector('.xgplayer-definition li[cname="'.concat(i,'"]')),u={key:"abr_tips",content:s.createElement(s.Fragment,null,"å½“å‰ç½‘ç»œæƒ…å†µä¸ä½³ï¼Œå³å°†ä¸ºä½ åˆ‡æ¢åˆ°",s.createElement("span",null,a),"ç”»è´¨",l&&s.createElement("div",{className:"".concat(z.Fq,"__abrCancel"),onClick:function(){e.emit("ABR_PRESTALL_END",!0),window.setTimeout((function(){return e.emit("definitionSwitchTime",i)}),200)}},"å–æ¶ˆåˆ‡æ¢")),closeable:!0,onCloseClick:function(){e.emit("ABR_PRESTALL_END",!1),clearTimeout(o)},duration:1e4};e.emit(G,u),o=window.setTimeout((function(){e.emit("ABR_PRESTALL_END",!1)}),1e4)}));var n=0;e.on("ABR_CHANGE_START",(function(t){var r={content:s.createElement(s.Fragment,null,"æ­£åœ¨è‡ªåŠ¨åˆ‡æ¢åˆ°",s.createElement("span",null,t)),closeable:!0};e.emit(G,r),n=Date.now()})),e.on("ABR_CHANGE_END",(function(t){if(0!==n){var r=Date.now()-n,o={content:s.createElement(s.Fragment,null,"å·²è‡ªåŠ¨åˆ‡æ¢åˆ°",s.createElement("span",null,t)),closeable:!0};r>3e3?(e.emit(G,o),n=0):setTimeout((function(){e.emit(G,o),n=0}),3e3-r)}}))}(t);var u=function(e){var n,t,r=e.name,o=e.definition,i=e.fps;return C()(n=C()(t="".concat(r)).call(t,null==o?void 0:o.toLocaleUpperCase())).call(n,i?" "+i+"å¸§":"")};Lo(t,"definitionChangeStart",(function(e){var n=e.name,r=e.definition,o=!1,i=u(e),a=s.createElement(s.Fragment,null,"æ­£åœ¨åˆ‡æ¢åˆ°",s.createElement("span",null,i)," ç”»è´¨ï¼Œè¯·ç¨å€™");"è‡ªåŠ¨"===n&&(a=s.createElement(s.Fragment,null,"å·²åˆ‡æ¢æˆ ",s.createElement("span",null,"è‡ªåŠ¨")),o=!0),_e&&(o=!0),Ze(r),t.emit(Fr.kI.PUSH,{content:a,autoClose:o,level:2}),Ce({setting:"video_clarity",definition:e.definition.toUpperCase(),frames_per_second:e.fps,section:"player"})})),Lo(t,"NO_MEDIALIST",(function(){B.ZP.dashNoMediaList({vid:e.vid,url:window.location.pathname})})),Lo(t,"DRM_ERROR",(function(){B.ZP.drmError({vid:e.vid,url:window.location.pathname})})),Lo(t,"PLAYER_LOAD_WARNING",(function(){B.ZP.playeTimeout({vid:e.vid,url:window.location.pathname})})),Lo(t,"loadeddata",(function(){e.onLoadedData&&e.onLoadedData(t),function(e){var n=Date.now()-(window._routerNavigationStart||performance.timing.navigationStart);window.Tea("loadeddata_consume",Vr(Vr({time:n},e),{},{page_type:(0,U.ZP)(),url:window.location.href}))}({vid:n.vid,vtype:n.defaultFormat,video_type:e.isLVideo?"longvideo":"shortvideo"})})),t.video&&t.video.addEventListener("stalled",(function(){B.ZP.playSourceStalled({vid:e.vid,url:window.location.pathname})}));var c=!1;Lo(t,"enable_theaterMode",(function(){t.config.height=z.ST.height,t.config.widthtion(){t.config.height=de.current.height,t.config.width=de.current.width,Ee(!1),ge(!1)})),Lo(t,ce.HW,(function(e){ne(e),Ce({setting:"web_fullscreen",definition:e?"on":"off"})})),Lo(t,ce.GS,(function(e){e?be(!0):(ne(!1),be(!1))})),Lo(t,"pause",(function(){var e,n;t.ended||H.Z.player.videoPause({log_pb:null===(e=w.current)||void 0===e?void 0:e.logPb,player_status:t.xgpcInfo.player_status,section:null!==(n=t.plugins.pip)&&void 0!==n&&n.isPip?"pip":""})})),Lo(t,"waiting",(function(){!document.querySelector(".xgplayer-definition [url='__auto__']")||!t.curDefinition||"__auto__"===t.curDefinition.url||pe.current>0||zr()>=3||(ve.current=window.setTimeout((function(){var e;t.emit(Fr.kI.PUSH,{content:s.createElement(s.Fragment,null,"å½“å‰ç½‘ç»œçŠ¶å†µä¸ä½³ï¼Œå»ºè®®è‡ªåŠ¨åˆ‡æ¢æ¸…æ™°åº¦",s.createElement("span",{className:"withLeftLine",onClick:function(){var e;(e=document.querySelector(".xgplayer-definition [url='__auto__']"))&&t.emit("switchDefinition",e)}},"ç«‹å³åˆ‡æ¢")),duration:4e3,level:1}),pe.current++,e=(0,F.vc)(new Date,"y/M/d"),(0,F.qQ)(jr,Z()({date:e,count:zr()+1}))}),3e3))})),Lo(t,"canplay",(function(){ve.current&&(clearInterval(ve.current),ve.current=null)})),Lo(t,"playCatch",(function(e){t.emit(Fr.kI.CLEARANY),H.Z.player.playcatch({duration_after_config:Date.now()-me.current,play_catch_tag:e})})),Lo(t,"error",(function(n){if(!ko(t,n)&&e.onError){var r=(0,X.kc)(t),o="MP4"===r?t.src:t.vodLogger&&t.vodLogger.initial_url,i=t.duration,a=t.currentTime,l="mp4Mse"===P&&t.config.mp4encryptplayer.pcdnConfig.openPCDN;e.onError(So(So({},n||{}),{},{sessionid:t&&t.vodLogger&&t.vodLogger._sessionId,vid:e.vid,vtype:r,cdnUrl:o,duration:i,currentTime:a,playerVersion:"mp4Mse"===P?$.UO:$.RZ,codecType:t.menuCodeType,error:Z()(n),supportPCDN:l}))}})),Lo(t,$r.MENU_REPORT,(function(n){qr.I.show({extraInfo:{debugData:n?Z()(n):void 0,vid:e.vid,codecType:t.menuCodeType}})})),Lo(t,$r.MENU_LOG,(function(e){switch(e.event){case Gr:H.Z.player.play_menu_click({click_position:"video_info"});break;case Kr:H.Z.player.play_menu_click({click_position:"video_feedback"});break;default:break;case Wr:H.Z.player.player_menu_show()}}))}},xe=function(){vunction n(t){var r,o,i,a,l,u;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!!To[h],me.current=Date.now(),Cn.Z.emit(Cn.o.playerInitStart),fe.current=r?To[h]:new Co.ZP(t),r||window.xgVodLogger||H.Z.player.loadPlayerLoggerFailed(),window.isElectron&&(window.playerInstance=fe.current),To[h]=fe.current,(o=fe.current).setUserActive(!0),r||(i=function(n,t){"string"==typeof n?window.Tea(n,So(So({},t),{},{video_total_duration:e.duration})):Array.isArray(n)&&n.forEach((function(n){return function(n,t){rtal_duration:e.duration}))}(n.eventName,n.params)}))},o.on("abLog",i)),!oe||null!===o||null===(a=o.config)||void 0===a?void 0:a.fullscreenContainer),r&&o.currentTime&&(o.currentTime=0,o.pause()),c()(To).length>1&&("default"===P?null===(l=To["mp4-player"])||void 0===l||l.pause():null===(u=To.player_default)||void 0===u||u.pause()),Ro[h]=x().resolve(r&&Ro[h]).then((function(){return new(x())((function(e,n){var t=No[h],r=0;t?(t.tryCancel(),(r=300-(Date.now()-t.initedTimestamp))<0&&(r=0)):No[h]=t={initedTimestamp:0,type:"null",tryCancel:function(){return null}};if("null"!==t.type&&r>0){var o=setTimeout(e,r),i=!1;t.tryCancel=function(){i||(n(),window.clearTimeout(o),i=!0)}}else e()}))})).then((function("null"===n.type&&!t.defaultFormat)return e();n.type=null!==(i=t.defaultFormat)){u||(u=!0,o.isSrcVoid||(Cn.Z.emit(Cn.o.playerInited),o.isInited=!0),null==o||o.off("nextEnded",t),null==o||o.off("complete",t),n&&(n.initedTimestamp=Date.now()),e())};if(o.once("nextEnded",(function(){c(),o.emit("updateController")})),o.once("complete",(function(){c()})),r){var s=t;o.isInited=!1,Do(o),wn.forEach((function(e){var n=e.event,t=e.fn;Cn.Z.off(n,t)})),wn=[],ke(s,o),null==_||_(!1);try{S()(o.config,s),o.resetState();var f=o.playbackRate;o.config.defaultPlaybackRate=f,"mp4Mse"===P?(s.defaultPlaybackRate=f,o.playNext(s),o.emit("nextEnded")):o.plugins.dashplugin.next(s.startTime,void 0,s.DASHPlugin)}catch(e){var d;console.error(e),"mp4Mse"===P&&N()(d=e.message).call(d,"Cannot set property isPlayiEXR_ERROR",tags:{page_type:(0,U.ZP)()}}),window.location.reload())}}else ke(t,o);o.xgpcInfo={player_status:null===(a=o.xgpcInfo)||void 0===a?void 0:a.player_status,log_pb:null===(l=w.current)||void 0===l?void 0:l.logPb}}}))})).catch((function(e){console.log("player_error",fe.current),console.error(e)})),n.abrupt("return",Ro[h]);case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Pe=function(){var n=(0,y.Z)(E().mark((function n(){var t,r,o,i,a,l;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.config,r=t.videoInfo,o=t.mp4VideoInfo,i=t.mp4PluginConfig,a=t.dashPluginConfig,V(!1),x().resolve({}),l=(0,X.w1)(r),de.current=(0,X.Lx)(l),Dr({id:h,preset:P,isCSSFullscreen:ee,isFullscreen:oe,closeVideoDblclick:!1,fullscreenContainer:v,vid:e.vid,duration:e.duration,isMobile:e.isMobile,isDrm:k,videoInfo:r,mp4VideoInfo:o,mp4PluginConfig:i,dashPluginConfig:a,codecType:e.config.codecType}).then((function(n){var t=So(So({},e.config),n);xe(t)})).then((function(){V(!0),e.onPlayerInit&&e.onPlayerInit(ue.current,fe.current)}));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,s.useLayoutEffect)((function(){ae.current=(0,$.ai)(),le.current=(0,$.qT)(),H.Z.player.check_video_supports({dashEncrypt:le.current?1:0,dash:ae.current?1:0})}),[]),(0,s.useLayoutEffect)((function(){var e,n=Oo["#".concat(h)oncat(h)]=n,n.id=h),null===(e=se.current)||void.current=n,function(){if(fe.current){var e,t,r=document.body.querySelector("#xgpc-players");if(null==r&&((r=document.createElement("div")).id="xgpc-players",document.body.appendChild(r)),null!=fe&&null!==(e=fe.current)&&void 0!==e&&e.isInited){var o,i,a,l,u;null==fe||null===(o=fe.current)||void 0===o||null===(i=o.pause)||void 0===i||i.call(o);var c=null==fe||null===(a=fe.current)||void 0===a?void 0:a.speedDom;c&&(c.innerText=""),fe.current.canplay=!1,fe.current.emit(Fr.U3.requestMiniscreenClose),null===(l=ue.current)||void 0===l||null===(u=l.classList)||void 0===u||u.remove("canplay")}nud(n)}}}),[b]),(0,s.useLayoutEffect)((function(){return function(){if(e.autoDestroyPlayer){if(Oo["#".concat(h)]){var n,t=Oo["#".conc[e.vid,e.preset]),(0,s.useEffect)((function(){var e=fe.current;!he.current&&f&&ye&&W&&e&&(fe.current.emit("showTheaterDirectTips"),(0,F.qQ)("hasShowTheaterDirectTips","1"),he.current=!0)}),[f,ye,W]),s.createElement("div",{className:j()("xgplayerContainer",g),ref:se},s.createElement(Ar.Provider,{value:{isReplay:!1,isUserAuthor:r,player:fe.current,playerElm:ue.current,isTheater:ye,isCSSFullscreen:ee,canplay:W,playerConfigTimestamp:me.current,logInfo:w.current,isInited:D}},fe.current&&ue.current&&s.createElement(Br,null),fe.current&&ue.current&&l()(n=L()(t=A()(fe.current.plugins)).call(t,(function(e){return e.isReactPlugin}))).call(n,(function(e){return e.root&&M.createPortal(s.createElement(e.Component,{key:e.pluginName}),e.root)})),T))},Mo=s.meFo(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function Bo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Fo(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Fo(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var Uo,Ho=function(e){var n=e.className,t=e.fluid,r=void 0===t||t,o=e.ratio;return s.createElement("div",{className:j()(n,"xgplayerPlaceholder"),style:Bo(Bo({},(0,$.uF)(r,o)),{},{backgroundColor:"rgba(0,0,0,1)"})})},Vo=t(44624),jo=function(e){var n=(0,s.useContext)(Ar),t=n.player,r=n.playerElm,o=e.component,i=e.className;(0,s.useEffect)((function(){var e=null==r?void 0:r.querySelector(".".concat(i));e||((e=document.createElement("div")).classList.add("xgplayer_injectContainer"),e.classList.add(i),null==r||r.appendChild(e)),r&&M.render(o,e)})),(0,s.useEffect)((function(){var e=null==r?void 0:r.querySelector(".".concat(i)),n=function n(){try{e&&M.unmountComponentAtNode(e),null==t||t.off("destroy",n)}catch(e){}};return null==t||t.once("destroy",n),function(){n()}}),[])},zo={max:40,min:30,pip:20},q,min:20,pip:12},Ko={max:30,min:15,pip:9},Wo=function(e){var n=e.value,t=e.max,r=e.min;return t&&n>t?t:r&&n<r?r=n.playerElm,o=n.isTheater,a=n.isCSSFullscr,c=e.authorName,f=e.hasEmbedLo0,s.useState)(void 0),m=(0,i.Z)(v,2),h=m[0],y=m[1],g=(0,Vo.Z)(r||void 0),_=(0,i.Z)(g,2),E=(_[0],_[1]),b=(0,s.useCallback)((function(){if(!p||0===p.clientHeight||0===p.clientWidth)return y(void 0);var e=null==r?void 0:r.classList.contains("xgplayer-pip-active"),n=p.clientWidth-p.videoWidth/p.videoHeight*p.clientHeight;n<0&&(n=0);var t=p.clientHeight-p.videoHeight/p.videoWidth*p.clientWidth;if(t<0&&(t=0),e)return y({top:Ko.pip+t/2,right:Go.pip+n/2,height:zo.pip,fontSize:qo.pip});var o=p.offsetWidth/1296,i=Wo({value:40*o,max:Go.max,min:Go.min}),a=Wo({value:40*o,max:Ko.max,min:Ko.min}),l=Wo({value:40*o,max:zo.max,min:zo.min}),u=Wo({value:28*oheight:l,lineHeight:l+"px",fontSize:u})}),[null==r?void 0:r.classList,p]);(0,s.useEffect)((function(){b();var e=setTimeout(b,1e3);return function(){window.clearTimeout(e)}}),[E,b,d,o,a]),(0,s.useEffect)((function(){if(void 0===h){var e=setTimeout(b,400),n=setTimeout(b,800);return function(){window.clearTimeout(e),window.clearTimeout(n)}}}),[h,b]),(0,s.useEffect)((function(){var e=function(){return b()};return t&&t.once("canplay",e),function(){return t&&t.off("canplay",e)}}),[t,b]);var C=c?c&&s.createElement("div",{className:"authorName"},c):u?s.createElement("img",{src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(u,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),alt:""}):null;return jo({component:s.createElement(s.Fragment,null,!l||f?null:s.createElement("div",{className:j()("common-xgplayer__Logo"),style:null!=h?h:{display:"none"}},C)),className:"common-xgplayer__LogoContainer"}),null},Xo=t(9795),Yo=function(){var e=(0,s.useContext)(Ar).player,n=(0,Xo.V)();return(0,s.useEffect)((function(){e&&e.isInited&&(n?e.pause():e.play())}),[n,e]),null},Qo=t(6639),Jo=function(e,n,t){(0,s.useEffect)((function(){if(e)return e.on(n,t),function(){e.off(n,t)}}),[n,t,e])},ei=function(e){var n=e.showCollectionBtn,t=e.onClickCollectionBtn,r=e.handleFullscreenListVisible,o=(0,s.useContext)(Ar).player,i=(0,Qo.Z)(),a=(0,s.useCallback)((function(e){e||r&&r(!1)}),[r]);return Jo(o,ce.GS,a),(0,s.useEffect)((function(){o&&(i&&(nu,null==o||o.emit(Pt.VIDEO_TITLE_VISIBLE,!0)),i&&(null}),[i,o]),(0,s.useEffect)((function(){o&&n&&(null==o||o.emit(z.U3.handleCollectionBtnVisible,(function(){return t}),n))}),[n,t,o]),null},ni=t(63952),ti=t(15853),ri=t(23647),oi=!0,ii=function(e){var n=e.preview6min,t=(0,s.useContext)(Ar).player,r=(0,s.useCallback)((function(){var e,r=function(){if((0,$t.Xx)())return a();ni.ZP.show({source:"trail_toast"})},o=(e={},(0,g.Z)(e,to.useTicket,{content:s.createElement(s.Fragment,null,"è¯•çœ‹6åˆ†é’Ÿï¼Œå› ç‰ˆæƒæ–¹è¦æ±‚ï¼Œå®Œæ•´ç‰ˆéœ€",s.createElement("span",{className:"LBTips__gold",onClick:r,tabIndex:0,"aria-haspopup":!0,"aria-expanded":!1},"ä»˜è´¹è§‚çœ‹")),action:function(){ti.Z.show()}}),(0,g.Z)(e,to.bigVip,{content:s.createElement(s.Fragment,null,"è¯•çœ‹6åˆ†é’Ÿ,",s.createElement("a",{className:"LBTips__gold",onClick:r,tabIndex:0,"aria-haspopup":!0,"aria-expanded":!1},"å¼€é€šå½±è§†ä¼šå‘˜è§‚çœ‹å®Œæ•´ç‰ˆ")),action:function(){ri.Z.show()}}),e)[n.type],i=o.content,a=o.action;if(oi&&!t.ended){var l={key:"pay_tips",level:-1,autoClose:!1,closeable:!0,content:i,onCloseClick:function(){oi=!1}};t.emit(G,l)}}),[t,n.type]);return(0,s.useEffect)((function(){if(t){var e=function(){t.emit(K),t.once("play",r)};return t.on(W,r),t.on("ended",e),t.once("canplay",r),function(){t.off(W,r),t.off("ended",e)}}}),[t,r]),null},ai=t(98926),li=t.n(ai),ui=(t(15218),t(54998)),ci=t.n(ui);!function(e){e[e.null=0]="null",e[e.continue=1]="continue",e[e.skipOpening=2]="skipOpening",e[e.anchor=3]="anchor"}(Uo||(Uo={}));var si=function(e){var n,t=e.isReplay,r=e.isPreview6min,o=e.lastCurrentTime,i=e.duration,a=e.seek_ts,l=Uo.null,u=0;return function(){if(r)Y.k_.globalConfig.isLogin&&"1"===window.sessionStorage.getItem(z.Mh)&&(l=Uo.continue,u=null!=i?i:0);else{var e=0,c=i||0,f=(0,$.mg)();if(f&&a&&(e=a.opening,c=a.ending),f&&e&&(u=e,l=Uo.skipOpening,n={content:"å·²ç»ä¸ºä½ è·³è¿‡ç‰‡å¤´",level:1,closeable:!1}),!t){var d=new(ci())("undefined"!=typeof window?window.location:"").query(!0),p=Number(d.start);if(p&&!isNaN(p)&&p>0&&i&&p<i)return l=Uo.anchor,u=p,void(n={content:s.createElement(s.Fragment,null,"å·²è·³è½¬è‡³æŒ‡å®šä½ç½®",s.createElement("span",null,(0,$t.LU)(p)),"ï¼Œæ­£åœ¨ä¸ºä½ è‡ªåŠ¨æ’­æ”¾"),level:1});!o||(!o||o<e+5)||!!o&&o>c-5||(l=Uo.continue,u=o,n={content:s.createElement(s.Fragment,null,"ä¸Šæ¬¡è§‚çœ‹è‡³",s.createElement("span",null,(0,$t.LU)(o)),"ï¼Œå·²ä¸ºä½ è‡ªåŠ¨artTime:u,leftBottomTip:n}};function fi(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function di(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fi(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):fi(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var pi=function(e){var n=e.setPlayLoopStatus,t=e.playLoopStatus,r=e.onClickNext,o=e.isSkipEnd,i=void 0===o||o,a=e.lastCurrentTime,l=e.preview6min,u=(0,s.useContext)(Ar),c=u.player,f=u.logInfo,d=(0,s.useRef)(!1),p=(0,s.useRef)(!1),v=(0,s.useR=(0,s.useCallback)((function(e){c.config.playLoop.playLoopStatus=e,n(e),c.emit(G,{level:2,content:"noLoop"===e?s.createElement(s.Fragment,null,"å·²å…³é—­å¾ªç¯"):s.createElement(s.Fragment,null,"å·²å¼€å¯ ",s.createElement("span",null,zr.videoPlayerSetting({log_pb:null==f?void 0:f.logPb,player_status:c.xgpcInfo.player_status,setting:"repeat",definition:z.ev[e]})}),[null==f?void 0:f.logPb,c,n]),y=function(){if(!p.current&&c.currentTime>v.current-3&&c.currentTime<v.current-3+5){p.currentå³å°†ä¸ºä½ è·³è¿‡ç‰‡å°¾",level:1,closeable:!1}),setTimeout((function(){c.currentTime=c.duration-1}),3e3)}},g=(0,s.useCallback)((function(){i&&(p.current=!1,(0,$.mg)()?v.current&&v.current<m.current&&(null==c||c.on("timeupdate",y)):c.off("timeupdate",y))}),[i,c]),_=(0,s.useCallback)((function(){"videoLoop"===t?(d.current=!0,p.current=!1,g(),c.emit("replay"),c.replay()):"pSeriesLoop"===t&&r&&r()}),[r,t,c,g]),E=(0,s.useCallback)((function(){var e=si({isReplay:d.current,isPreview6min:!!l,lastCurrentTime:a,duration:m.current,seek_ts:c.config.seek_ts}).leftBottomTip,n="0.0";if(m.current&&!isNaN(m.current)&&a){var t=a/c.duration*100;li()(t)||(n=t.toFixed(1))}c.xgpcInfo=di(di({},c.xgpcInfo),{},{from_percent:n}),e&&c.emit(G,e)}),[a,c,l]);return Jo(c,"playLoopChange",h),Jo(c,"replay",(function(){d.current=!0,p.current=!1})),Jo(c,"ended",_),Jo(c,"setStartTime",E),(0,s.useEffect)((function(){if(c){m.current=e.duration||c.config.duration||c.duration,v.current=m.current||0;var n=function(){(0,$.mg)()&&c.config.seek_ts&&(v.current=c.config.seek_ts.ending)},t=function(){n(),g()};return n(),g(),c.on("skipChange",t),function(){c.off("skipChange",t)}}}),[c,e.duration,g]),null},vi=function(e){var n=e.setIsPip,t=(0,s.useContext)(Ar),r=t.player,o=t.logInfo,i=(0,s.useContext)(Mr).setIsShowPlaceHolder;return Jo(r,z.U3.miniscreenChange,(function(e){n(e),i(e)})),Jo(r,z.U3.miniscreenDisable,(function(){H.Z.player.smallWindowSetting({log_pb:null==o?void 0:o.logPb,player_status:r.xgpcInfo.player_status,definition:"off",section:"small_window"}),r.emit("requestConfigPipChange",{value:!1,section:"small_window",type:"small_window_disabled"})})),null},mi=t(52628),hi=t.n(mi),yi=function(){var e=(0,y.Z)(E().mark((function e(n){var t,r,o,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.refreshToken,e.prev=1,e.next=4,mo.ZP.getVideoResourceByRefreshToken({refreshToken:t});case 4:o=e.sent,200===(i=o.data).code&&(r=(0,X.RT)(i.data)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:return(0,$.fF)("raw_resource",r),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}();function gi(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function _i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?gi(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):gi(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var Ei=function(e){var n=e.preset,t=e.vid,r=(0,s.useContext)(Ar),o=r.player,i=r.playerConfigTimestamp,a=(0,s.useRef)(0),u=function(e,n){var t=hi()(e.video_list),r=l()(t).call(t,(function(e,n){e.main_url=(0,F.Ph)(e.main_url),e.backup_url=(0,F.Ph)(e.backup_url_1);var t=z._F[e.definition];return _i(_i({},e),{},{name:t,url:e.main_url,backup_url:e.backup_url,definition:e.definition})})),i=_i(_i({},e),{},{mp4List:r});n?function(e){if(o){var n=o.config||{},t=n.mp4encryptplayer,r=void 0===t?{}:t,i=n.definition,a=void 0===i?{}:i;r.mp4Opts=e,a.list=e.mp4List,o.config.url="",o.playNext(o.config),o.emit("nextEnded")}}(i):function(e){var n;if(o){var t=o.config.DASHPlugin;t.mp4Opts=e,o.plugins.dashplugin.next(null!==(n=null==o?void 0:o.currentTime)&&void 0!==n?n:0,"MEDIA_EXPIRED",t)}}(i),null==o||o.resetState()},c=(0,s.useCallback)((function(){var e,t,r=function(e){H.Z.player.MEDIA_EXPIRED_RETRY({duration_after_config:Date.now()-i,vtype:e});var t=function(e){var n,t=(null==o?void 0:o.config)||{},r=t.DASHPlugin,i=void 0===r?{}:r,a=t.mp4encryptplayer,l=void 0===a?{}:a;if(null!=o&&o.dash&&null!=i&&i.dashOpts)n=null==i?void 0:i.dashOpts.refreshToken;else if(e){var u,c=(l||{}).mp4Opts;n=(null==c||null===(u=c.raw_videoInfo)||void 0===u?void 0:u.refreshTooid 0===s||null===(f=s.raken}return n}("mp4Mse"===n),r=function(e){return e?!(a.current>5&&(null==o||o.emit("error",{code:"-699992",msg:"MEDIA_EXPIRED_MAX_TIMES"}),1)):(null==o||o.emit("error",{code:"-699991",msg:"NO_REFRESHTOKEN"}),!1)}(t);if(r)return a.current++,yi({refreshToken:t}).then((function(t){var r=!1;null!=t&&t.dynamic_video?(!function(e){var n,t;if(o){var r=o.config.DASHPlugin;r.dashOpts=_i({},e),o.plugins.dashplugin.next(null!==(n=null==o?void 0:o.currentTime)&&void 0!==n?n:0,"MEDIA_EXPIRED",r),null===(t=o.root)||void 0===t||t.classList.remove("xgplayer-is-error"),o.resetState()}}(t),r=!0):null!=t&&t.video_list&&(u(t,"mp4Mse"===n),r=!0),null==o||o.emit(Fr.Z5.EXPIRED_RETRY_END,e),r?((0,xo.h)({name:"MEDIA_EXPIRED_RETRY_SUCCESS",tags:{page_type:(0,U.ZP)()}}),H.Z.player.MEDIA_EXPIRED_RETRY_SUCCESS({duration_after_config:Date.now()-i,vtype:e})):null==o||o.emit("error",{code:"-699993",msg:"FETCH_REFRESH_RES_EMPTY"})})).catch((function(e){null==o||o.emit("error",{code:"-699994",msg:"FETCH_REFRESH_RES_FAILED ".concat(e)})}))};null!=o&&o.dash&&null!==(e=o.config)&&void 0!==e&&null!==(t=e.DASHPlugin)&&void 0!==t&&t.dashOpts?r("dash"):null!=o&&o.mp4MseFlag?r("mp4Mse"):r("mp4")}),[o,i]);return(0,s.useEffect)((function(){if(o)return o.on("MEDIA_EXPIRED",c),function(){o.off("MEDIA_EXPIRED",c)}}),[c,o]),(0,s.useEffect)((function(){return function(){a.current=0}}),[t]),null},bi=t(40587),Ci=t(16441),wi=t(46112),Zi=function(e){var n=(0,s.useContext)(Ar),t=n.player,r=n.playerElm,o=e.onClick,i=(0,s.useContext)(Ci.Z).isInIframe;return null!=r&&null!=t?M.createPortal(s.createElement("a",{href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(i?(0,wi.e)("/"):"/",null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"ixigua",className:j()("common-xgplayer__goHome"),onClick:o},s.createElement("img",{className:j()("common-xgplayer__goHome"),src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(bi,null,{logType:"js.href/src",mode:"black",reportOnly:!1}),alt:""})),t.controls.right):null},ki=function(e){var n=e.onClickNext,t=e.nextVideoInfo,r=(0,s.useContext)(Ar),o=r.isInited,i=r.player,a=r.logInfo;return Jo(i,"playNextClick",(function(){H.Z.player.videoPlayerSetting({log_pb:a.logPb,player_status:i.xgpcInfo.player_status,setting:"play_next"})})),(0,s.useEffect)((function(){var e,r=function(){n(),i.emit("playNextClick")};return function n(){o&&i?i.emit("updateOnClickNext",r,t):e=window.setTimeout(n,600)}(),function(){window.clearTimeout(e)}}),[n,t,o,i]),null},xi=t(10994);function Pi(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Si="endingRenderChange",Ti=function(e){(0,oe.Z)(t,e);var n=Pi(t);function t(e){var r;return(0,re.Z)(this,t),r=n.call(this,e),(0,g.Z)((0,he.Z)(r),"RPAttr_endingRender",void 0),(0,gg.Z)((0,he.Z)(r),"Component",(function(){var e=(0,s.useState)(r.player.ended),n=(0,i.Z)(e,2),t=n[0],o=n[1],a=(0,s.useState)(r.player.fullscreen),l=(0,i.Z)(a,2),u=l[0],c=l[1],f=r.RPAttr_endingRender.usePluginAttr(),d=(0,i.Z)(f,1)[0],p=r.RPAttr_isPip.usePluginAttr(),v=(0,i.Z)(p,1)[0];return(0,function(){var e;(null===(e=r.player.config.playLoop)||void 0===e?void 0:e.playLoopStatus)===xi.Re.NO_LOOP&&o(!0)},n=function(){o(!1)},t=function(e){c(e)};return r.on(ce.Ku,e),r.on(ce.NH,n),r.on(ce.t6,n),r.on(ce.GS,t),function(){r.off(ce.Ku,e),r.off(ce.NH,n),r.off(ce.t6,n),r.on(ce.GS,t)}}),[]),(0,s.useEffect)((function(){var e=function(){o(!1)};return t&&r.once(ce.MH,e),function(){r.off(ce.MH,e)}}),[t]),s.createElement(s.Fragment,null,!v&&t&&d?d({diasbleAutoPlay:!1,isPip:r.player.plugins.pip.isPip,isHide:!1,afterGoNext:function(){},fullscreen:u?"fullscreen":"nofullscreen"}):null)})),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return"playEndingContainer"}},{key:"afterCreate",value:function(){var e,n=this;this.RPAttr_endingRender=Ge({attrKey:"definitionList",defaultValue:function(){return null},plugin:this}),this.RPAttr_isPip=Ge({attrKey:"isPip",defaultValue:!1,plugin:this}),this.on(Si,(function(e){n.RPAttr_endingRender.updateAttr(e)})),this.on(z.U3.miniscreenChange,(function(e){n.RPAttr_isPip.updateAttr(e)})),null===(e=this.player.root)||void 0===e||e.appendChild(ue.ZP.createDom("div",void 0,{class:"xgplayer-video-mask"}))}}],[{key:"pluginName",get:function(){return"play_ending"}}]),t}(Se),Ni,s.useContext)(Ar),r=t.isInited,o=t.player;return(0,s.useEffect)((function(){r&&o&&o.emit(Si,n)}),[r,n,o]),null},Oi=function(e){var n=(0,s.useContext)(Ar).player,t=function(){var t,r,o,i=(null==n?void 0:n.config)||{};r={vid:i.vid,vtype:i.defaultFormat,video_type:e.isLVideo?"longvideo":"shortvideo"},o=Date.now()-(window._routerNavigationStart||performance.timing.navigationStart),window.Tea("buffer_sufficient_consume",Vr(Vr({time:o},r),{},{page_type:(0,U.ZP)(),url:window.location.href})),null===(t=e.onBufferIsSufficient)||void 0===t||t.call(e)};return(0,s.useEffect)((function(){n&&(null==n||n.once("canplay",t),null==n||n.once("play",t))}),[n]),null},Ii=function(e){var n=(0,s.useContext)(Ar).player;return Jo(n,"dashStateChange",(function(t){var r,o,i,a;i={vid:null==n||null===(r=n.config)||void 0===r?void 0:r.vid,vtype:null==n||null===(o=n.config)||void 0===o?void 0:o.defaultFormat,video_type:e.isLVideo?"longvideo":"shortvideo",state:t},a=Date.now()-(window._routerNavigationStart||performance.timing.navigationStart),window.Tea("dashStateChange",Vr(Vr({time:a},i),{},{page_type:(0,U.ZP)(),url:window.location.href}))})),null},Ri=function(e){var n=e.isVr,t=e.lastCurrentTime,r=(0,s.useContext)(Ar).player,o=function(){n&&!t&&r.emit(Fr.kI.PUSH,{content:"æš‚ä¸æ”¯æŒåˆ‡æ¢è§†è§’",duration:5e3,level:3})};return(0,s.useEffect)((function(){r&&r.once("loadeddata",o)}),[r]),null},Li=function(e){var n=e.isLVideo,t=(0,s.useContext)(Ar).player,r=(0,s.useContext)(Mr).tccConfig;return Jo(t,ce.qz,(function(e){var o=(0,X.kc)(t);H.Z.player.playerStuck({stuck_info:Z()(e),is_lvideo:n?1:0,vid:t.config.vid,vtype:o,codec_type:t.menuCodeType}),null!=r&&r.enableStuckRetry&&t.retry()})),null};function Di(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ai(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Di(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Di(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var Mi=function(e){Jo(e,"source_error",(function(n){var t,r,o=e.config,i=o.mp4encryptplayer,a=o.id,l=o.DASHPlugin,u=o.vid,c=o.codecType,s="player_default"===a,f=s?null==l||null===(t=l.pcdnConfig)||void 0===t?void 0:t.openPCDN:null==i||null===(r=i.pcdnConfig)||void 0===r?void 0:r.openPCDN;H.Z.player.playerSourceError(Ai(Ai({},n||{}),{},{error:Z()(n),support_pcdn:f?"1":"0",sdk_version:s?$.RZ:$.UO,vid:u,vtype:e.vtype,menu_code_type:e.menuCodeType,config_codec_type:c}))}))},Fi=function(e){var n=(0,s.useContext)(Mr).tccConfig,t=function(n){var t=n||{},r=t.vid,o=t.task_type,i=t.cdn_size,a=t.pcdn_size,l=t.cdn_speed,u=t.pcdn_speed,c=t.mediaType,s="player_default"===e.config.id;H.Z.player.prfTaskDataSize({vid:r,task_type:o,cdn_size:i,pcdn_size:a,cdn_speed:l,pcdn_speed:u,vtype:e.vtype,sdk_version:s?$.RZ:$.UO,config_codec_type:e.config.codecType,menu_code_type:e.menuCodeType,media_type:c})};(0,s.useEffect)((function(){if(e&&null!=n&&n.enableOnPrfDataSize)return e.on("prf_data_size",t),function(){e.off("prf_data_size",t)}}),[e,null==n?void 0:n.enableOnPrfDataSize])},Bi=function(e){Jo(e,ce.Ku,(function(n){var t,r,o=n.vtype,i=e.pcdnReq||{},a=i.pcdn_tracker_request_cnt,l=i.pcdn_tracker_failed_cnt,u=i.pcdn_download_request_cnt,c=i.pcdn_download_failed_cnt,s=e.config,f=s.mp4encryptplayer,d=s.id,p=s.DASHPlugin,v=s.vid,m="player_default"===d;(m?null==p||null===(t=p.pcdnConfig)||void 0===t?void 0:t.openPCDN:null==f||null===(r=f.pcdnConfig)||void .player.reportPCDNData({vid:v,vtype:o,sdk_version:m?$.RZ:$.UO,pcdn_tracker_request_cnt:a,pcdn_tracker_failed_cnt:l,pcdn_download_request_cnt:u,pcdn_download_failed_cnt:c})}))},Ui=function(e){var n=(0,s.useRef)();Jo(e,"waiting",(function(t){var r,o,i,a,l,u=e.config,c=u.mp4encryptplayer,s=u.id,f=u.DASHPlugin,d=u.vid,p=u.codecType,v=u.vodLogOpts,m="player_default"===s,h=m?null==f||null===(r=f.pcdnConfig)||void 0===r?void 0:r.openPCDN:null==c||null===(o=c.pcdnConfig)||void 0===o?void 0:o.openPCDN;if(e.video.getVideoPlaybackQuality){var y=e.video.getVideoPlaybackQuality();i=y.droppedVideoFrames,l=(a=y.totalVideoFrames)?i/a:0}var g=function(e,n){if(!n)return!1;for(var t=1e3*e,r=0;r<n.length;r++){var o=1e3*n.start(r),i=1e3*n.end(r);if(t>o&&t<i-1500)return!0}return!1}(e.currentTime,e.buffered);H.Z.player.reportWaiting({support_pcdn:h?"1":"0",sdk_version:m?$.RZ:$.UO,vid:d,vtype:e.vtype,menu_code_type:e.menuCodeType,config_codec_type:p,buffer:Z()(e.buffered2.bufferedList),is_in_buffer:g?1:0,play_url:e.loadURL,domain:e.domain||e.CDNUrl,current_time:null==t?void 0:t.currentTime,dropped_video_frames:i,total_video_frames:a,dropped_frame_rate:l,ready_state:e.video.readyState,visibility:document.visibilityState,seeking:e.seeking?1:0,definition:e.curDefinition.definition,auto_definition:n.current,tag:v.tag})})),Jo(e,"ABR_AUTO_DESC_CHANGE",(function(e,t,r){n.current=t}))},Hi=t(33221);function Vi(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function ji(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Vi(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Vi(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var zi=function(e){var n=(0,s.useState)(),t=(0,i.Z)(n,2),r=t[0],o=t[1],a=(0,s.useState)(),l=(0,i.Z)(a,2),u=l[0],c=l[1];(0,s.useEffect)((function(){!function(){var e=navigator.hardwareConcurrency;if(!(e<X.Pd)){var n=(0,X.O8)();o(n);var t=(0,X.NJ)();new Hi.Z({}).getScore().then((function(r){var o,i,a;r&&(c(r),H.Z.player.cpuInfo(ji(ji({},n),{},{gpu_info:Z()(n),gpu_score:null==n?void 0:n.score,cpu_info:Z()(r),score:r.score,cpu_score:null===(o=r.cpu)||void 0===o?void 0:o.score,net_score:null===(i=r.net)||void 0===i?void 0:i.score,render_score:null===(a=r.render)||void 0===a?void 0:a.score,cpu_core:e,h265_supported:t?1:0})))}))}}()}),[]),(0,s.useEffect)((function(){e&&r&&u&&(e.plugins.xgVodLogger.envInfo={gpu:Z()(r),cpu:Z()(u)})}),[u,r,e])},qi=function(){var e=(0,s.useContext)(Ar).player;return Mi(e),Fi(e),Bi(e),Ui(e),zi(e),null},Gi=t(92027),Ki=t(2943);function Wi(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function $i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Wi(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Wi(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}function Xi(e){var n,t,r,o,i=(null!==(n=null===(t=window)||void 0===t||null===(r=t._fpsDetection)||void 0===r?void 0:r.maxFps)&&void 0!==n?n:0)>100&&null!==(o=e.dash_120fps)&&void 0!==o?o:e.dash,a=(null==e?void 0:e.normal)||(null==e?void 0:e.normal_6min);return{mp4VideoInfo:(0,X.RT)(a)||a,videoInfo:(0,X.RT)(i)||i}}function Yi(){return(Yi=(0,y.Z)(E().mark((function e(n){var t,r,o,i,a,l,u,c,s,f,d,p,v,m,h,y;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!1,a=!1,!window.isElectron){e.next=10;break}return e.next=5,(0,Ki.k)("h265",{});case 5:l=e.sent,i=(null==l?void 0:l.h265_hard_parse_enable)||!1,a=(nullak;case 10:return e.next=12,(0,Ki.k)("h265_hard_parse_enable",!1);case 12:i=e.sent;case 13:if(u=(0,X.vh)(null==n||null===(t=n.h265)||void 0===t||null===(r=t.dash)||void 0===r||null===(o=r.dynamic_video)||void 0===o?void 0:o.dynamic_video_list),c=X.jA.H265(u?X.d0.BYTEVC1:X.d0.H264,!!a||i,a?"soft":"hard"),s=c?null==n?void 0:n.h265:n){e.next=18;break}return e.abrupt("return");case 18:if(f=(0,X.Oz)(Xi(s)),d=f.dashOpts){e.next=21;break}return e.abrupt("return");case 21:return p=(0,X.ZZ)({dashOpts:d}),v=(0,X.cw)({isReplay:!1,isPreview6min:!1,lastCurrentTime:0,duration:null==d?void 0:d.video_duration,seek_ts:null==d?void 0:d.seek_ts}),m=v.time,h=document.documentElement.offsetWidth,e.next=26,(0,X.s6)({dashOpts:d,defaultDefinition:p,isMp4abr:!1});case 26:y=e.sent,new Gi.Z(void 0,{preloadBufferThreshold:.1,preloadMaxCacheCount:200,autoPreload:!0,preloadCacheType:1,cdnHost:"",preloadmethod:1,width:.6375*h,height:h*(9/16),autoBitrateOpts:$i($i({},y),{},{isOpenAutoDefi:!1})},void 0).addDashPreloader({order:0,data:{vid:s.dash.video_id,duration:null==d?void 0:d.video_duration,payload:null==d?void 0:d.dynamic_video,defaultDefinition:"auto"===p?"720p":p,time:m,useAbr:!1,vtype:"DASH"}});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qi=function(e){var n=e.videoResource;return(0,s.useEffect)((function(){!function(e){Yi.apply(this,arguments)}(n)}),[]),null},Ji=t(86176);function ea(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function na(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ea(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):ea(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var ta=function(e){if(e){var n=JSON.parse((0,F.$o)(Ji.$t)||"{}");n[e]&&(0,F.qQ)(Ji.$t,Z()(na(na({},n),{},(0,g.Z)({},e,"1"))))}},ra=function(e){var n=e.gid,t=e.h265VideoNum,r=(0,s.useContext)(Ar).player;return Jo(r,ce.qz,(function(){r.config.codecType!==Ji.d0.H264&&ta(n)})),Jo(r,ce.pn,(function(){r.config.codecType!==Ji.d0.H264&&ta(n)})),(0,s.useEffect)((function(){if((null==r?void 0:r.config.codecType)!==Ji.d0.H264&&n&&t){var e=JSON.parse((0,F.$o)(Ji.$t)||"{}");c()(e).length>=t||e[n]||(0,F.qQ)(Ji.$t,Z()(na(na({},e),{},(0,g.Z)({},n,"0"))))}}),[n,t,null==r?void 0:r.config.codecType]),null},oa=t(5808),ia=t(15005);function aa(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function la(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?aa(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Obje()(t)):aa(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var ua=function(e){var n=e.status,t=e.errCode,r=e.errMsg,o=e.droppedFrameRate,i=e.droppedVideoFrames,a=e.totalVideoFrames,l=(0,X.O8)();ho.Z.player.playDetectInfo(la(la(la({},e),l),{},{status:n?1:0,err_code:t,err_msg:r,dropped_frame_rate:o,dropped_video_frames:i,total_video_frames:a,cpu_core:navigator.hardwareConcurrency,is_client_soft_h265_supported:(0,X.vt)().isClientSoftH265Supported?1:0,is_client_hard_h265_supported:(0,X.vt)().isClientHardH265Supported?1:0}))},ca=function(){(0,Ki.k)("detect_play_config",{minDroppedFramesRate:.1,minTotalVideoFrames:20}).then((function(e){var n={url:"https://lf3-static.bytednsdoc.com/obj/eden-cn/hbnpe_lm_wpn/ljhwZthlaukjlkulzlp/xigua_pc/play/ploy_265.mp4",minDroppedFramesRate:e.minDroppedFramesRate,minTotalVideoFrames:e.minTotalVideoFrames};(0,oa.p)(n).then((function(e){e&&(0,F.qQ)(X.Lu,Z()(e)),ua(e)}))}))},sa=function(){var e=(0,F.$o)(X.Lu);if(!(0,ia.G)()){if(e)JSON.parse(e).status&&(0,F.qQ)(X.Lu,"");return!1}return!0},fa=function(){var e=(0,s.useContext)(Ar).player;return(0,s.useEffect)((function(){if(sa()){var e=(0,F.$o)(X.Lu);if(e){var n=JSON.parse(e),t=[X.rH.NOT_SUPPORT,X.rH.DROPPED_FRAME_RATE_EXCEED],r=n.status,o=n.errCode;if(r||N()(t).call(t,o)>-1)return void ua(n)}ca()}}),[]),Jo(e,"DECODER_FAILED",(function(){sa()&&ca()})),null},da=t(29985),pa=t(7823),va=function(e){var n=e.showEmptyPlayer,t=e.vid,r=e.has_config;(0,s.useEffect)((function(){(0,F.qQ)(pa.r,Z()({vid:t,has_config:r}))}),[n])},ma=function(e){var n,t=e.vid,a=e.config,u=e.isRenderFailure,f=e.playFailure,d=e.showEmptyPlayer,p=e.compPlugins,v=void 0===p?{}:p,m=e.defaultTheaterMode,h=(0,s.useState)(!0),y=(0,i.Z)(h,2),g=y[0],_=y[1],E=(0,s.useState)({}),b=(0,i.Z)(E,2),C=b[0],w=b[1],Z=(0,s.useMemo)((function(){return a?m?z.ST.height/z.ST.width:a.height/a.width:9/16}),[a,m]);return(0,s.useLayoutEffect)((function(){_(!1)}),[t]),(0,s.useEffect)((function(){da.Z.other.getTccConfig({key:"video"}).then((function(e){var n;w(null==e||null===(n=e.data)||void 0===n?void 0:n.data)}))}),[]),va({showEmptyPlayer:d,vid:t,has_config:a?1:0}),d?s.createElement(Ho,{fluid:!0,ratio:Z}):u?f:s.createElement(Mr.Provider,{value:{setIsShowPlaceHolder:_,isShowPlaceHolder:g,tccConfig:C}},g?s.createElement(Ho,{fluid:!0,ratio:Z}):null,s.createElement(Mo,(0,o.Z)({},e,{config:a,fullscreenContainer:"undefined"==typeof window?void 0:document.documentElement}),l()(n=c()(v)).call(n,(function(e){var n=v[e],t=r[e];return s.createElement(t,(0,o.Z)({key:e},n))}))))},ha=t(41609),ya=t.n(ha);function ga(e,n){var t=c()(e);if(d()){va(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function _a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ga(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):ga(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var Ea=function(e){var n,t,r,o=e.tag,i=e.duration,a=e.preset;return{vtype:"mp4Mse"===a?"MP4_MSE":"DASH",codec_type:e.codecType||X.d0.H264,drm_type:0,dynamic_type:"segment_base",enable_bash:1,line_user_id:"undefined"!=typeof window?null===(n=window)||void 0===n||null===(t=n._globalConfig)||void 0===t||null===(r=t.identity)||void 0===r?void 0:r.uniqueId:"",tag:o,line_app_id:1768,playerVersion:"mp4Mse"===a?$.UO:$.RZ,absdkVersion:Y._o.getAllVersionNames(),playerCoreVersion:"3.0.3-alpha.4",sendLocalCallback:function(e,n){window.Tea(e,_a(_a({},n),{},{video_total_duration:i}))},referrer:(0,F.an)(),isTask:!1,needXhrCheck:!0}};function ba(e){if(null!=e){var n=e.big_thumbs,t={pic_num:0,width:0,height:0,col:0,row:0,scale:1,urls:[]},r=(0,U.Vc)();if(n&&n.length>0){var o;if(n.forEach((function(e){var n,o;(t.pic_num+=e.img_num,t.width=e.img_x_size,t.height=e.img_y_size,x_len>t.col&&(t.col=e.img_x_len),e.img_urls)?(n=ion(e){return(0,F.Ph)(e)})))):t.urls.push((0,F.Ph)(e.img_url));e.img_x_len!==e.img_y_len&&(0,xo.G)({value:r,tags:{name:"big_thumbs_size"}})})),""===L()(o=t.urls).call(o,Boolean).toString())return;var i=t.width>t.height?t.width:t.height;i>160&&(t.scale=160/i)}return t.pic_num>0?t:void 0}}function Ca(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var wa=function(e){(0,oe.Z)(t,e);var n=Ca(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=Za.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}}],[{key:"pluginName",get:function(){return"xgpc_collection"}},{key:"defaultConfig",get:function(){return{positilayer.fullscreen,t=(0,s.useState)(!1),r=(0,i.Z)(t,2),o=r[0],a=r[1],l=(0,s.useState)(),u=(0,i.Z)(l,2),c=u[0],f=u[1];return(0,s.useEffect)((function(){var n=function(e,n){a(n),f(e)};return e.on(Fr.U3.handleCollectionBtnVisible,n),function(){return e.off(Fr.U3.handleCollectionBtnVisible,n)}}),[]),o&&n?s.createElement(Ve,{ariaHaspopup:!0,showPopoverOnFocus:!0,onConfirm:c,className:"control_collection common-control-item",popover:function(){return s.createElement(s.Fragment,null)},mouseLeaveDelayTime:0,entry:function(){return s.createElement(ka,null)}}):null},ka=function(){return s.createElement("span",{className:qe},"é€‰é›†")},xa=t(68899),Pa=t(89680);function Sa(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}function Ta(){var e,n=this,t=(null===(e=this.player.config.extraConfig)||void 0===e?void 0:e.extraConfigList)||[];return t.length>0?s.createElement(Ve,{ariaHaspopup:!0,ariaLabel:"è®¾ç½®",className:"control_extraConfig common-control-item",popover:function(e){return s.createElement(La,(0,o.Z)({pluginInstance:n,extraConfigList:t},e))},entry:function(){return s.createElement(Ra,null)}}):null}var Na,Oa,Ia=function(e){(0,oe.Z)(t,e);var n=Sa(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=Ta.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}:function(){return"xgpc_extra_config"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_RIGHT,index:22}}}]),t}(Se),Ra=function(){return s.createElement(fn,{lottiePath:xa}nfigList,t=e.pluginInstance,r=(0,s.useMemo)((function(){return N()(n).call(n,"skip")>-1}),[n]),o=(0,s.useMemo)((function(){return N()(n).call(n,"pip")>-1}),[n]),a=(0,s.useState)((function(){var e;return null===(e=(0,X.CZ)("pip"))||void 0===e||e})),l=(0,i.Z)(a,2),u=l[0],c=l[1],f=(0,s.useState)((function(){var e;return null===(e=(0,X.CZ)("skip"))||void 0===e||e})),d=(0,i.Z)(f,2),p=d[0],v=d[1],m=(0,s.useCallback)((function(e){var n;c(e.value),(0,X.fd)("pip",e.value),t.emit("pipChange",{value:e.value,section:null!==(n=e.section)&&void 0!==n?n:"player",type:e.type})}),[c]),h=(0,s.useCallback)((function(e){v(e),(0,X.fd)("skip",e),t.emit("skipChange",{value:e,section:"player"})}),[c]);return(0,s.useEffect)((function(){var e=function(e){m(e)};return t.on("requestConfigPipChange",e),function(){t.off("requestConfigPipChange",e)}}),[t]),s.createElement("div",{className:"xgplayer-extraConfig-popover"},s.createElement("div",{className:"xgplayer-extraConfig-wrap"},r?s.createElement("div",{className:"row skip"},s.createElement("div",{className:"text",id:"xg-switch-start"},"è·³è¿‡ç‰‡å¤´ç‰‡å°¾"),s.createElement(Pa.Z,{checked:p,onChange:function(e){return h(e)},"aria-labelledby":"xg-switch-pip"})):null,o?s.createElement("div",{className:"row pip"},s.createElement("div",{className:"text",id:"xg-switch-pip"},"å°çª—æ’­æ”¾åŠŸèƒ½"),s.createElement(Pa.Z,{checked:u,onChange:function(e){return m({value:e})},"aria-labelledby":"xg-switch-pip"})):null))},Da=t(19742),Aa=t(44786),Ma="full-screen-author",Fa=function(e){var n=e.isFollow,t=e.updateIsFollow,r=e.userInfo,o=e.isCoPublish,i=e.sendFollowEvent,a=e.player,l=String(r.user_id||""),u=(0,s.useContext)(Ar).isUserAuthor,c=(0,s.useRef)(null);(0,s.useEffect)((function(){var e=c.current;if(e){var n=function(){a.emit(ce.FU,{autoHide:!1})},t=function(){a.emit(ce.FU)};return e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",t),function(){e.removeEventListener("mouseenter",n),e.addEventListener("mouseleave",t)}}}),[]);var f=(0,Da.O)({value:n,uid:l,onChange:function(e,n){t(e),n||i({follow:e,toUserId:l})}}).changeFollow,d=(0,s.useMemo)((function(){return(0,cr.$x)(String(r.user_id),void 0,{source:"lv_author",player_status:"fullscreen",is_co_publish:o?"1":void 0,section:o?"button":void 0})}),[r.user_id]);return s.createElement(s.Fragment,null,r.user_id?s.createElement("div",{className:j()(Ma,{follow:n}),tabIndex:0,"aria-label":r.name,ref:c,onClick:f},s.createElement(Aa.Z,{url:(0,F.Ph)(r.avatar_url),uid:String(r.user_id),size:24,isVip:!!r.user_auth_info,authInfo:r.user_auth_info,onClick:function(){window.open(d)}}),!u&&s.createElement(s.Fragment,null,s.createElement("div",{className:j()("followButton",{follow:n}),tabIndex:0,"aria-label":n?"å–æ¶ˆå…³æ³¨":"å…³æ³¨"},s.createElement("span",{className:"font-h4-bold"},n?"å·²å…³æ³¨":"å…³æ³¨"))),s.createElement("div",{className:"".concat(Ma,"__popup")},s.createElement("span",null,r.name))):null)},Ba=t(3649),Ua=t.n(Ba);function Ha(){return Ha=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ha.apply(this,arguments)}var Va,ja=function(e){return s.createElement("svg",Ha({width:22,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Na||(Na=s.createElement("g",{filter.063 5.063 0 100 10.126 5.063 5.063 0 000-10.126z",fill:"#fff",fillOpacity:.9}))),Oa||(Oa=s.createElement("defs",null,s.createElement("filter",{id:"co_create_icon_svgr_svg__prefix__filter0_d_40218_328328",x:.338,y:1.930 0 0 0 0 0 0 0.5 0"}),s.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_40218_328328"}),s.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_40218_328328",result:"shape"})))))};function za(){return za=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&r qa,Ga=function(e){return s.createElement("svg",za({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Va||(Va=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.315 13.02a.5.5 0 010-.707L9.628 8 5.315 3.687a.5.5 0 0 .707L6.022 13.02a.5.5 0 01-.707 0z",fill:"#fff"})))};function Ka(){return Ka=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ka.apply(this,arguments)}var Wa=function(e){return s.createElement("svg",Ka({width:22,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),qa||(qa=s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.556 4.556a.687.687 0 01.972 0L11 10.028l5.472-5.472a.688.688 0 01.973.972L11.972 11l5.473 5.473a.688.688 0 01-.973.972L11 11.973l-5.472 5.472a.687.687 0 11-.972-.973L10.028 11 4.556 5.528a.688.688 0 010-.972z",fill:"#fff",fillOpacity:.9})))},$a="fullscreen-co-create-modal",Xa="with-fullscreen-co-create",Ya=function(e){var n=e.coCreatorList,t=e.show,r=e.onClose,o=e.player,a=e.updateFollowStatus,u=e.sendFollowEvent,c=(0,s.useState)(!1),f=(0,i.Z)(c,2),d=f[0],p=f[1];return(0,s.useLayoutEffect)((function(){t?(p(!1),o.root&&ue.ZP.addClass(o.root,Xa)):o.root&&ue.ZP.removeClass(o.root,Xa)}),[t]),(0,s.useEffect)((function(){return function(){o.root&&ue.ZP.removeClass(o.root,Xa)}}),[]),t?M.createPortal(s.createElement("div",{className:$a,onClick:function(){return p(!0)}},s.createElement("div",{className:j()("".concat($a,"__wrapper"),d&&"out"),onAnimationEnd:function(e){e.animationName==="".concat($a,"__slide-out")&&r()},onClick:function(e){e.stopPropagation()}},s.createElement("div",{className:"".concat($a,"__header")},s.createElement("div",{className:"".concat($a,"__title")},n.length,"äººå…±åŒåˆ›ä½œ"),s.createElement(Wa,{onClick:function(){return p(!0)}})),s.createntent")},l()(n).call(n,(function(e){var n=String(e.user_id),t=n===window._globalConfig.identity.id;return s.createElement("div",{key:n,className:"".concat($a,"__item")},s.createElement(Aa.Z,{url:e.user_info.avatar_url,size:48,className:"".concat($a,"__it:e.user_info.user_auth_info,isVip:Boolean(e.user_info.user_auth_info),homePageExplicitQuery:{is_co_publish:"1",from_section:"button"}}),s.createElement("div",{className:"".concat($a,"__item-info")},s.createElement("a",{href:globalThis.xssNamespace.xigua_video_web_pc.filterUrl((0,cr.$x)(n,void 0,{is_co_publish:"1",from_section:"button"}),null,{logType:"js.href/src",mode:"black",reportOnly:!1}),target:"_unique",className:"".concat($a,"__item-name")},e.user_info.name),s.createElement("div",{className:"".concat($a,"__item-role")},e.role_name)),!t&&s.createElement(Da.Z,{buttonProps:{size:"small",width:60,color:"#fff",borderColor:"#fff"},toUserID:n,className:"".concat($a,"__item-follow"),isFollow:e.user_info.follow,onChange:function(e,t){a(n,e),t||u({follow:e,toUserId:n})}}))}))))),o.root):null},Qa="fullscreen-co-create",Ja=function(e){var n=e.player,t=e.coCreatorList,r=e.updateCoCreatorFollowStatus,o=e.sendFollowEvent,a=(0,s.useState)(!1),u=(0,i.Z)(a,2),c=u[0],f=u[1],d=(0,xt.jY)().id,p=2===t.length,v=t[1],m=String(v.user_id),h=d===m,y=(0,s.useMemo)((function(){var e,n;return Ua()(e=L()(n=l()(t).call(t,(function(e){return e.user_info.avatar_url}))).call(n,Boolean)).call(e,0,3)}),[t]),g=(0,Da.O)({value:v.user_info.follow,uid:m,onChange:function(e,n){r(m,e),n||o({follow:e,toUserId:m})}}).changeFollow;(0,s.useEffect)((function(){var e=_.current;if(e){var t=function(){n.emit(ce.FU,{autoHide:!1})},r=function(){n.emit(ce.FU)};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),function(){e.removeEventListener("mouseenter",t),e.addEventListener("mouseleave",r)}}}),[]);var _=(0,s.useRef)(null);return s.createElement(s.Fragment,null,s.createElement("div",{className:Qa,onClick:function(){p?h||g():f(!0)},ref:_},s.createElement(ja,{className:"".concat(Qa,"__icon")}),s.createElement("span",null,"å…±åˆ›è€…ï¼š"),p?s.createElement(s.Fragment,null,s.createElement(Aa.Z,{url:v.user_info.avatar_url,uid:String(v.user_id),size:24,isVip:!!v.user_info.user_auth_info,authInfo:v.user_info.user_auth_info,homePageExplicitQuery:{is_co_publish:"1",from_section:"button"}}),!h&&s.createElement(s.Fragment,null,s.createElement("div",{className:j()("".concat(Qa,"__follow"),v.user_info.follow&&"follow"),tabIndex:0,"aria-label":v.user_info.follow?"å–æ¶ˆå…³æ³¨":"å…³æ³¨"},s.createElement("span",{className:"font-h4-bold"},v.user_info.follow?"å·²å…³æ³¨":"å…³æ³¨"))),s.createElement("div",{className:"".concat(Qa,"__popup")},s.createElement("span",null,v.user_info.name))):s.createElement(s.Fragment,null,s.createElement("div",{className:"".concat(Qa,"__avatars")},l()(y).call(y,(function(e,n){return s.createElement("div",{className:"".concat(Qa,"__avatar"),key:n,style:{backgroundImage:"url(".concat(e,")")}})}))),s.createElement("span",null,"ç­‰",t.length,"äºº"),s.createElement(Ga,{className:"".concat(Qa,"__arrow")}))),s.createElement(Ya,{coCreatorList:t,player:n,show:c,onClose:function(){return f(!1)},updateFollowStatus:r,sendFollowEvent:o}))},el=t(56118);function nl(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function tl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nl(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):nl(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}function rl(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var ol=function(e){(0,oe.Z)(t,e);var n=rl(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Comp:"getClassName",value:function(){return je}}],[{key:"pluginName",get:function(){return"xgpc_fullscreen_header"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.ROOT_TOP,index:2}}}]),t}(Se),il=function(){var e=this,n=this.player,t=n.fullscreen,r=n.config,o=(r.fullscreenAuthor||{}).albumInfo,a=(0,s.useState)(!1),u=(0,i.Z)(a,2),c=u[0],f=u[1],d=(0,s.useState)(r.isFollowGlobal),p=(0,i.Z)(d,2),v=p[0],m=p[1],h=(0,s.useState)(n.config.coCreatorList),y=(0,i.Z)(h,2),g=y[0],_=y[1],E=(0,s.useContext)(Ar).isUserAuthor,b=(0,s.useCallback)((function(e,n){var t;g&&(_(l()(g).call(g,(function(t){return String(t.user_id)===e?tl(tl({},t),{},{user_info:tl(tl({},t.user_info),{},{follow:n})}):t}))),e===String(null==o||null===(t=o.userInfo)||void 0===t?void 0:t.userId)&&m(n),r.updateCoCreatorFollowStatus(e,n))}),[g]),C=function(e){var t,r,i=e.follow,a=e.toUserId;el.Z[i?"rt_follow":"rt_unfollow"]({to_user_id:a,category_name:"pgc",log_pb:n.xgpcInfo.log_pb||"",section:"button",position:"detail",is_following:i?1:0,group_id:null==o||null===(t=o.logPb)||void 0===t?void 0:t.group_id,author_id:null==o||null===(r=o.logPb)||void 0===r?void 0:r.author_id,fullscreen:"fullscreen",is_author_self:E?1:0,digg_action:"one_click",digg_button_status:i?"nodigg":"like",video_pct:Number((n.currentTime/n.duration*100).toFixed(1)),video_time:Number((1e3*n.currentTime).toFixed(1)),player_status:"fullscreen"})};return(0,dn.Z)((function(){m(r.isFollowGlobal),_(r.coCreatorList)}),[t]),(0,s.useEffect)((function(){var n=function(e){f(e)};return e.on(Pt.AUTHOR_BTN_VISIBLE,n),function(){return e.off(Pt.AUTHOR_BTN_VISIBLE,n)}}),[]),c&&null!=o&&o.userInfo&&t?s.createElement("div",{className:"full-screen-header-author"},s.createElement(Fa,{userInfo:o.userInfo,isFolloull!==(n=o.userInfo)&&void 0!==n&&n.userId&&b(String(o.userInfo.userId),e)},isCoPublish:Boolean(null==g?void 0:g.length),sendFollowEvent:C,player:n}),g&&s.createElement(Ja,{coCreatorList:g,updateCoCreatorFollowStatus:b,player:n,sendFollowEvent:C})):null};function al(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var ll=function(e){(0,oe.Z)(t,e);var n=al(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=ul.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassNamn_title"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.ROOT_TOP,index:1}}}]),t}(Se),ul=function(){var e=this,n=this.player,t=n.fullscreen,r=n.config.title,o=(0,s.useState)(!1),a=(0,i.Z)(o,2),l=a[0],u=a[1];return(0,s.un(e){u(e)};return e.on(Pt.VIDEO_TITLE_VISIBLE,n),function(){return e.off(Pt.VIDEO_TITLE_VISIBLE,n)}}),[]),l&&t?s.createElement(Ve,{ariaHaspopup:!0,showPopoverOnFocus:!0,className:"full-screen-header-title common-control-item",popover:function(){return s.createElement(s.Fragment,null)},mouseLeaveDelayTime:0,entry:function(){return s.createElement(cl,{title:r})}}):null},cl=function(e){var n=e.title;return n?s.createElement("span",{className:qe},n):null},sl=t(13547);function fl(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var dl,pl=function(e){(0,oe.Z)(t,e);var n=fl(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=vl.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return"xgpc_miniscreen"}},{key:"pluginConfig",get:function(){var e;return null!==(e=this.playerConfig[this.pluginName])&&void 0!==e?e:{}}}],[{key:"pluginName",get:function(){return"xgpc_miniscreen"}}]),t}(Se),vl=function(){var e=this,n=(0,q.Z)(!1,l=(0,s.useCallback)((function(n){o(n),e.emit(z.U3.miniscreenChange,n)}),[o]),u=(0,s.useState)((function(){return e.player.paused})),c=(0,i.Z)(u,2),f=c[0],d=c[1],p=(0,s.useState)(!1),v=(0,i.Z)(p,2),m=v[0],h=v[1],y=(0,s.useRef)(),g=(0,s.useRef)(null),_=(0,s.useRef)(void 0),E=(0,s.useRef)(!1),b=(0,s.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"346px",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"196px",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"110px",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"40px";if(!a.current){y.current=new sl.Z(e.player.root,{handle:g.current});var i=e.player,u=i.config,c=i.root;c&&(_.current={width:c.style.width,height:c.style.height,left:c.style.left,top:c.style.top,position:c.style.position,paddingTop:c.style.paddingTop},ue.ZP.addClass(c,"xgpc-mini"),c.style.position="fixed",c.style.width=n,c.style.height=t,c.style.left=r,c.style.top=o,u.fluid&&(c.style["padding-top"]="")),l(!0),h(!1),H.Z.player.smallWindowSetting({log_pb:e.player.xgpcInfo.log_pb,player_status:i.xgpcInfo.player_status,definition:"on",section:"small_window"})}}),[]),C=(0,s.useCallback)((function(){if(!1!==a.current){var n,t;if(l(!1),y.current)null===(n=(t=y.current).destroy)||void 0===n||n.call(t);var r=e.player.root;if(r&&(ue.ZP.removeClass(r,"xgpc-mini"),void 0!==_.current)){["width","height","left","top","position","paddingTop"].forEach((function(e){r.style[e]=_.current[e]}))}}}),[]),w=(0,s.useCallback)((function(){var n;e.emit(z.U3.miniscreenClose),H.Z.player.smallWindowSetting({log_pb:null===(n=e.player.xgpcInfo)||void 0===n?void 0:n.log_pb,player_status:e.player.xgpcInfo.player_status,definition:"close",section:"small_window"}),C(),E.current=!0}),[C]),Z=(0,s.useCallback)((function(){h(!m),e.emit(z.U3.miniscreenDisable),H.Z.player.smallWindowSetting({log_pb:e.player.xgpcInfo.log_pb,player_status:e.player.xgpcInfo.player_status,definition:"off",section:"small_window"}),(0,X.fd)("pip",!1),C(),E.current=!0}),[C]);return(0,s.useEffect)((function(){var n=vt()((function(){var n,t=e.player,r=e.player.root;if(null!=(null==r?void 0:r.parentElement)&&!(0,uo.uu)()){var o=(0,X.q)(r.parentElement),i=null===(n=(0,X.CZ)("pip"))||void 0===n||n;if(t&&i)if(o&&(E.current=!1),o)e.emit(z.U3.miniscreenAutoClose),H.Z.player.smallWindowSetting({log_pb:t.xgpcInfo.log_pb,player_status:t.xgpcInfo.player_status,definition:"off",section:"small_window"}),C();else{var a;if(E.current)return;if(t.plugins.pip.isPip)return;var l=270;if(null!==(a=e.pluginConfig)&&void 0!==a&&a.aspect){var u=420*e.pluginConfig.aspect.height/e.pluginConfig.aspect.width;l=u>270?270:u}var c=e.pluginConfig.initPipRight||110,s=window.innerWidth-c-420,f=window.innerHeight-40-l;b("420px",l+,n),function(){window.removeEventListener("scroll",n)}}),[]),(0,s.useEffect)((function(){var n=function(){return d(!0)},t=function(){return d(!1)},r=function(){C()};return e.on(ce.NH,t),e.on(ce.E7,n),e.on(z.U3.requestMiniscreenClose,r),function(){e.off(ce.NH,t),e.off(ce.E7,n),e.off(z.U3.requestMiniscreenClose,r)}}),[]),s.createElement("div",{className:"xgpc-mini-layer",style:{display:r?void 0:"none"}},s.createElement("div",{className:"xgpc-mini-drag-layer",ref:g}),s.createElement("div",{className:"xgpc-mini-header"},s.createElement("div",null,"æŒ‰ä½ç”»é¢å¯ç§»åŠ¨å°çª—"),s.createElement("div",{className:"xgpc-mini-disable-btn"},s.createElement("input",{type:"checkbox",checked:m,id:"disabledMiniscreen"}),s.createElement("label",{htmlFor:"disabledMiniscreen",onClick:Z},s.createElement("span",null,"ä¸å†å‡ºç°")),s.createElement("div",{className:"xgpc-mini-disable-tips"},"å¯åœ¨æ’­æ”¾å™¨è®¾ç½®é‡Œé‡æ–°æ‰“å¼€å°çª—æ’­æ”¾"))),s.createElement("div",{className:"xgpc-mini-cancel-btn",onClick:w},s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},s.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"}))),s.createElement("div",{className:"xgpc-mini-play-icon",onClick:function(){return e.player.paused?e.player.play():e.player.pause()}},f?s.createElement(dt,null):s.createElement(st,null)),s.createElement(Xt,{player:this.player}))};function ml(){return ml=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.protot010-10zm-2.707 3.706a3 3 0 004.001 4.001l-4.001-4zM14 10c-.463 0-.902.105-1.294.293l4.001 4A3 3 0 0014 10z"})))};function gl(){return gl=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gl.apply(this,arguments)}var _l,El=function(e){return s.createElement("svg",gl({xmlns:"http://www.w3.org/2000/svg",opacity:.8,width:20,height:20,viewBox:"-5 -5 30 30"},e),hl||(hl=s.createElement("path",{d:"M14.5 1.383a.5.5 0 01.257.071l3.528 2.117a.5.5 0 010 .858l-3.528 2.117a.5.5 0 01-.757-.43V5H4a1 1 0 00-.993.883L3 6v9a1 1 0 00.883.993L4 16h12a1 1 0 00.993-.883L17 15v-3a1 1 0 011.993-.117L19 12v4a2 2 0 01-2 2H3a2 2 0 01-2-2V5a2 2 0 012-2h11V1.882a.5.5 0 01.5-.5zM10 7a1 1 0 011 1v5a1 1 0 01-2 0V8a1 1 0 011-1z"})))};function bl(){return bl=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return er Cl=function(e){return s.createElement("svg",bl({xmlns:"http://www.w3.org/2000/svg",opacity:.8,viewBox:"-5 -5 30 30",width:20,height:20},e),_l||(_l=s.createElement("path",{d:"M14.5 1.383a.5.5 0 01.257.071l3.528 2.117a.5.5 0 010 .858l-3.528 2.117a.5.5 0 01-.757-.43V5H4a1 1 0 00-.993.883L3 6v9a1 1 0 00.883.993L4 16h2a1 1 0 010 2H3a2 2 0 01-2-2V5a2 2 0 012-2h11V1.882a.5.5 0 01.5-.5zM18 16a1 1 0 010 2h-8a1 1 0 010-2h8zm-3-4a1 1 0 010 2h-5a1 1 0 010-2h5zm3fined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Zl,kl,xl=function(e){var n=e.type;return s.createElement("div",{className:j()(qe,"playLoop_entry",n)},function(){switch(n){case xi.Re.NO_LOOP:return s.createElement(yl,null);case xi.Re.VIDEO_LOOP:return s.createElement(El,null);case xi.Re.PSERIES_LOOP:return s.createElement(Cl,null);default:return null}}())},Pl=function(e){var n=e.list,t=e.activeType,r=e.onItemClick,o=e.hidePopover,i=(0,s.useCallback)((function(e){r(e),o()}),[r,o]);return s.createElement("ul",null,l()(n).call(n,(function(e){var n=e.type===t;return s.createElement("li",{key:e.type,tabIndex:0,role:"menuitemradio","aria-checked":n,onClick:function(){return i(e.type)},className:j()(e.type,{isActive:n}),onKeyDown:function(n){var t=n.nativeEvent;(0,Be.Uf)(n.nativeEvent)?(i(e.type),n.stopPropagation(),n.preventDefault()):(0,Be.$o)(t)&&o()}},e.name)})))},Sl=function(){var e,n,t=this.player,r=t.config,a=(0,s.useState)(xi.Re.NO_LOOP),l=(0,i.Z)(a,2),u=l[0],c=l[1],f=null===(e=r.playLoop)||void 0===e?void 0:e.playLoopList,d=(0,s.useCallback)((function(e){e!==u&&(t.emit("playLoopChange",e),c(e))}),[u]);return(0,s.useEffect)((function(){var e;c(null===(e=r.playLoop)||void 0===e?void 0:e.playLoopStatus)}),[null===(n=r.playLoop)||void 0===n?void 0:n.playLoopStatus]),f?s.createElement(Ve,{ariaHaspopup:!0,className:j()("control_play_loop","common-control-item"),popover:function(e){return s.createElement(Pl,(0,o.Z)({list:f,onItemClick:d,activeType:u},e))},entry:function(){return s.createElement(xl,{type:u})}}):null},Tl=function(e){(0,oe.Z)(t,e);var n=wl(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=Sl.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}}],[{key:"pluginName",get:function(){return"xgpc_play_loop"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_RIGHT,index:21}}}]),t}(Se);function Nl(){return Nl=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Nl.apply(this,arguments)}var Ol=function(e){return s.createElement("svg",Nl({width:32,height:32,viewBox:"0 0 32 32",opacity:.8,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Zl||(Zl=s.createElement("g",{filter:"url(#playNext_svg__filter0_d_29765_182083)"},s.createElement("path",{d:"M20.034 9.408C20 9.535 20 9.69 20 10v4.882c-.284-.2-.677-.427-1.2-.73l-7.6-4.387c-1.05-.606-1.575-.91-2.006-.864-.376.04-.717.236-.94.542C8 9.793 8 10.4 8 11.613v8.775c0 1.213 0 1.82.255 2.17.222.305.563.502.939.542.43.045.956-.258 2.006-.864l7.6-4.388c.523-.302.916-.529 1.2-.73V22c0 .31 0 .465.034.593a1 1 0 00.707.707c.127.034.282.034.592.034s.465 0 .593-.034a1 1 0 00.707-.707c.034-.128.034-.283.034-.593V10c0-.31 0-.465-.034-.592a1 1 0 00-.707-.707c-.128-.034-.283-.034-.593-.034s-.465 0-.592.034a1 1 0 00-.707.707z",fill:"#fff"}))),kl||(kl=s.createElement("defs",null,s.createElement("filter",{id:"playNext_svg__filter0_d_29765_182083",x:6,y:6.667,width:18.667,height:18.666,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},s.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),s.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),s.createElement("feOffset",null),s.createElement("feGaussianBlur",{stdDeviation:1}),s.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),s.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}),s.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_29765_182083"}),s.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_29765_182083",result:"shape"})))))};function Il(e,n){var t=c()(e);if(d()){var ))),t.push.apply(t,r)}return t}function Rl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Il(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Il(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}function Ll(e){var n=function(){if("undefined"==typeof Reflect||!te())return!1;if(te().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(te()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,ae.Z)(e);if(n){var o=(0,ae.Z)(this).constructor;t=te()(r,arguments,o)}else t=r.apply(this,arguments);return(0,ie.Z)(this,t)}}var Dl=function(e){(0,oe.Z)(t,e);var n=Ll(t);function t(e){var r;return(0,re.Z)(this,t),(r=n.call(this,e)).Component=Al.bind((0,he.Z)(r)),r}return(0,le.Z)(t,[{key:"getClassName",value:function(){return je}}],[{key:"pluginName",get:function(){return"xgpc_playnext"}},{key:"defaultConfig",get:function(){return{position:se.ZP.POSITIONS.CONTROLS_LEFT,index:1}}}]),t}(Se),Al=function(){var e=this,n=(0,s.useState)(),t=(0,i.Z)(n,2),r=t[0],a=t[1];return(0,s.useEffect)((function(){var n=function(e,n){a(n?Rl(Rl(e.on("updateOnClickNext",n),function(){return e.off("updateOnClickNext",n)}}),[]),r?s.createElement(Ve,{ariaHaspopup:!0,showPopoverOnFocus:!0,onConfirm:r.onClick,className:"control_playnext common-control-i},e))},mouseLeaveDelayTime:0,entry:function(){return s.createElement(Ml,null)}}):null},Ml=function(){return s.createElement("div",{className:qe},s.createElement(Ol,null))},Fl=function(e){var n=e.nextVideoInfo,t=n.playNextExplain,r=void 0===t?"æ¥ä¸‹æ¥æ’­æ”¾":t;return n?s.createElement("div",{className:j()("xgplayer-next-preview",{longVideo:!!n.albumId})},s.createElement("div",{className:"xgplayer-next-preview-left"},s.createElement("img",{className:"xgplayer-next-preview-cover",src:globalThis.xssNamespace.xigua_video_web_pc.filterUrl(n.cover,null,{logType:"js.href/src",mode:"black",reportOnly:!1})}),s.createElement("span",{className:"xgplayer-next-preview-duration"},(0,$t.LU)(n.duration))),s.createElement("div",{className:"xgplayer-next-preview-right"},s.createElement("p",{className:"xgplayer-next-preview-tips"},r),s.createElement("p",{className:"xgplayer-next-preview-title"},n.subTitle&&"string"==typeof n.subTitle?n.subTitle:n.title))):null},Bl=t(96912),Ul=function(){return Tt.Z.getMyABInfoV2().pcdnConfig||{mp4:{enterMinBuffer:10},dash:{enterMinBuffer:10}}},Hl=function(){return Tt.Z.getMyABInfoV2().adaptRangeConfig||{enableMp4:!1,enableDash:!1}},Vl=t(28216),jl=t(75843),zl=function(){var e=(0,Vl.v9)((function(e){return e[jl.VD.anyVideo]})),n=(0,s.useState)((null==e?void 0:e.pcdnTccConfig)||{}),t=(0,i.Z)(n,2),r=t[0],o=t[1];return(0,s.useEffect)((function(){null!=e&&e.pcdnTccConfig&&"EmptyAnyVideo"!==(null==e?void 0:e.pageType)||mo.R().then((function(e){var n;o(null==e||null===(n=e.data)||void 0===n?void 0:n.data)})).catch((function(e){o(X.c2),H.Z.player.reportPCDNTccFailed({error:Z()(e||{})})}))}),[e]),{pcdnTccConfig:r}},ql=t(51206),Gl=t.n(ql);function Kl(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function Wl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Kl(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Kl(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var $l=function(e){var n=e.albumInfo,t=e.lastCurrentTime,r=e.isTheater,o=e.nextVideoInfo,a=e.playLoopList,l=e.playLoopStatus,u=e.onClickNext,f=e.vid,d=e.title,p=e.extraConfigList,v=e.playerSourceInfo,m=e.isLVideo,h=e.isDrm,y=(0,s.useState)(void 0),g=(0,i.Z)(y,2),_=g[0],E=g[1],b=(0,s.useState)(void 0),C=(0,i.Z)(b,2),w=C[0],Z=C[1],k=(0,s.useState)(),P=(0,i.Z)(k,2),S=P[0],T=P[1],O=(0,s.useState)(),I=(0,i.Z)(O,2),R=I[0],L=I[1],D=v.dashVideoResource,A=v.mp4VideoResource,M=v.h265,B=v.showAspect,U=v.sourceAspect,V=v.isDash,j=v.isSupportDash,z=v.initPipRight,q=(0,s.useRef)({isAllH265:!0}),G=(0,Bl.Z)().h265TccConfig,K=zl().pcdnTccConfig,W=(0,s.useMemo)((function(){var e=V?D:A;return e&&!ya()(e.dynamic_video)}),[D,V,A]),Y=(0,s.useMemo)((function(){var e,n;if("undefined"==typeof window)return!1;var t,r,o,i=Gl().getParser(navigator.userAgent).getBrowserVersion(),a=navigator.hardwareConcurrency,l=(null==G?void 0:G.browserBlackList)||{},u=m?"lVideo":"mVideo",c=V?"dashNew":"mp4",s=a>=8?"highMachine":"midMachine",f=[];V?f=null==l||null===(t=l[s])||void 0===t||null===(r=t[c])||void 0===r?void 0:r[u]:f=null==l||null===(o=l[s])||void 0===o?void 0:o[c];return(null===(e=f)||void 0===e?void 0:N()(e).call(e,i))>-1||!!(null===(n=f)||void 0===n?void 0:Ae()(n).call(n,(function(e){var n;if("string"!=typeof e&&e.userAgent)return N()(n=navigator.userAgent).call(n,e.userAgent)>-1&&e.version===i})))}),[V,G]),Q=(0,s.useMemo)((function(){var e,n,t,r;if("undefined"==typeof window)return!1;var o,i,a,l,u,c,s,f=Gl().getParser(navigator.userAgent).getBrowserVersion(),d=navigator.hardwareConcurrency,p=(null==G?void 0:G.browserWhiteConfig)||{},v=null==G||null===(e=G.browserWhiteConfig)||void 0===e?void 0:e.midMachine,h=null==G?void 0:G.abConfig,y=d>=8?"highMachine":"midMachine",g=V?"dash":"mp4",_=m?"lVideo":"mVideo",E=[],b=[];V?(E=null==h||null===(o=h[y])||void 0===o||null===(i=o[g])||void 0===i?void 0:i[_],b=null===(a=p[y])||void 0===a||null===(l=a[g])||void 0===l?void 0:l[_]):(E=null==h||null===(u=h[y])||void 0===u?void 0:u[g],b=null==h||null===(c=h[y])||void 0===c?void 0:c[g]);return!((null===(n=E)||void 0===n?void 0:N()(n).call(n,f))>-1)&&(d>=8?(null===(s=b)||void 0===s?void 0:N()(s).call(s,"all"))>-1:(null==v||null===(t=v.cpuScoreLimit)||void 0===t||null===(r=t.mp4)||void 0===r?void 0:N()(r).call(r,f))>-1&&S>(null==v?void 0:v.supportCpuScore))}),[S,G,V,m]),J=(0,s.useMemo)((function(){var e;if((W||A)&&"undefined"!=typeof window){var i=j?D:A;if(void 0!==_&&void 0!==G.exceptionLimit&&K.trackerUrl){var c=V?i:A;(0,X.RT)(c),(0,X.RT)(A);var s=j?null==M?void 0:M.dashVideoResource:null==M?void 0:M.mp4VideoResource,v=V?s:null==M?void 0:M.mp4VideoResource;(0,X.RT)(v),(0,X.RT)(null==M?void 0:M.mp4VideoResource);var y=c||{},g=y.poster_url,E=y.has_embedded_subtitle,b=y.subtitle_infos,C=y.seek_ts,Z=y.video_duration,k=y.duration,x=B.height,P=B.width,S=W?c:null,T="mp4";!1===V?T="mp4Mse":S&&(T="dash");var N=si({isReplay:!1,isPreview6min:!1,lastCurrentTime:t,duration:Z||0,seek_ts:C}).startTime,O=(0,X.Oz)({videoInfo:c,mp4VideoInfo:A}),I=O.mp4Opts,L=O.dashOpts,F=(0,X.Oz)({videoInfo:v,mp4VideoInfo:M.mp4VideoResource}),H=F.mp4Opts,$=F.dashOpts,J=(0,X.ZZ)({mp4Opts:I,dashOpts:S}),ee=V?null==v||null===(e=v.dynamic_video)||void 0===e?void 0:e.dynamic_video_list:null==H?void 0:H.mp4List,ne=(0,X.vh)(ee);ne||(q.current={isAllH265:ne,h265Count:(0,X.zs)(ee)});var te=function(e,n,t,r){return window.isElectron?!!e&&(!!r||t):!!n||t}(G.isSupportElectron,Q,_,w),re=!Y&&X.jA.H265(ne&&!h?X.d0.BYTEVC1:X.d0.H264,te,w?"soft":"hard",G),oe=re?X.d0.H265:X.d0.H264,ie=re?v:c,ae=re?null==M?void 0:M.mp4VideoResource:A,le=Ea({tag:m?"é•¿è§†é¢‘":"çŸ­è§†é¢‘",duration:k||0,preset:V?"default":"mp4Mse",codecType:oe}),ue=(0,X.hk)(A,f),ce=(0,X.hk)(null==M?void 0:M.mp4VideoResource,f),se=(c||A).extraInfos,fe=X.jA.PCDN(null==se?void 0:se.PrivateURL),de=Ul(),pe=Hl();return{vid:f,codecType:oe,mp4PluginConfig:{definition:{defaultDefinition:"auto"===J?"720p":J,list:re?ce.mp4List:ue.mp4List},mp4Opts:I?Wl(Wl({},I),{},{isPlayAutoDefi:"auto"===J}):null,defaultFormat:T,H264DefinitionList:re?ue.mp4List:void 0,pcdnConfig:fe?Wl(Wl({},de.mp4),{},{openPCDN:!0,outMaxBuffer:5,minDuration:25,openPreloadPCDN:!1,app_id:1768,sid:8,trackerUrl:K.trackerUrl,withReferer:1}):{},notDegradeErrorList:[403,404],urlExpireDisableErrorEvent:!0,adaptRange:pe.enableMp4?Wl(Wl({},pe.mp4),{},{rangeCon,safeFactor:.1,cacheSafeFactor:3,minDangerThreshold:4,estPlayTime:12,minBandwidth:1e6,estPTcontrol:!0}):void 0,reqOptions:{referrerPolicy:"strict-origin-when-cross-origin"}},dashPluginConfig:{dashOpts:re?$:L,mp4Opts:I?Wl(Wl({},I),{},{isPlayAutoDefi:"auto"===J}):null,defaultFormat:T,pcdnConfig:fe?Wl(Wl({},de.dash),{},{outMaxBuffer:5,minDuration:25,openPreloadPCDN:!1,openPCDN:!0,app_id:1768,sid:8,trackerUrl:K.trackerUrl,withReferer:1}):{},useEME:R,adaptRange:pe.enableDash?Wl(Wl({},pe.dash[m?"lvideo":"mvideo"]),{},{rangeControl:!0,targetCacheControl:!0,rangeMinSize:4SafeFactor:3,minDangerThreshold:4,estPlayTime:12,minBandwidth:1e6,estPTcontrol:!0}):void 0,reqOptions:{referrerPolicy:"strict-origin-when-cross-origin"}},fullscreenAuthor:{albumInfo:n},title:d,playLoop:{playLoopList:a,playLoopStatus:l},isTheater:null!=r&&r,fluid:!0,height:x,width:P,poster:g,onClickNext:u,nextVideoInfo:o,thumbnail:ba(c),subtitle:{hasEmbeddedSubtitle:E,subtitleInfos:b},seek_ts:C,xgpc_miniscreen:{aspect:U,initPipRight:z},extraConfig:{extraConfigList:p},defaultFormat:T,duration:Z||k||0,autoplay:!0,onlyInit:!1,vodLogOpts:le,startTime:N,videoInfo:ie,mp4VideoInfo:ae,plugins:[wa,ll,ol,Dl,Ia,pl,Ti,Tl]}}}}),[W,A,_,G,V,j,D,null==M?void 0:M.dashVideoResource,M.mp4VideoResource,m,B,t,f,K.trackerUrl,n,d,a,l,r,u,o,U,z,p,h]);return(0,s.useEffect)((function(){x().race([(0,Ki.k)("h265",{support_cpu_score:0,h265_hard_parse_enable:!1,h265_soft_parse_enable:!1,long_video:{useEME:void 0}}),new(x())((function(e){setTimeout((function(){e({})}),5e3)}))]).then((function(e){var n;if(!e||!c()(e).length)return E(!1),void Z(!1);var t=e.support_cpu_score,r=e.h265_hard_parse_enable,o=e.h265_soft_parse_enable;L(null==e||null===(n=e.long_video)||void 0===n?void 0:n.useEME),new Hi.Z({}).getScore().then((function(e){var n,i,a;(T(null==e||null===(n=e.cpu)||void 0===n?void 0:n.score),t>0)?(Z((null===(i=e.cpu)||void 0===i?void 0:i.score)>t&&o),E((null===(a=e.cpu)||void 0===a?void 0:a.score)>t&&r)):window.isElectron?(Z(void 0!==o&&o),E(void 0!==r&&r)):(0,Ki.k)("h265_hard_parse_enable",!1).then((function(e){E(e)}))})).catch((function(e){E(!1),Z(!1)}))}))}),[]),(0,s.useEffect)((function(){void 0!==_&&(q.current.isAllH265||H.Z.player.reportH265Data({vid:f,sdk:V?"dash":"mp4",h265_ab_value:_?1:0,h265_definition_count:q.current.h265Count}))}),[_,q.current.isAllH265]),(0,s.useEffect)((function(){_&&void 0!==(null==G?void 0:G.exceptionLimit)&&f&&(0,X.ZH)(G.exceptionLimit)&&H.Z.player.reportH265Exception({vid:f,sdk_version:V?$.RZ:$.UO,exception_data:(0,F.$o)(X.$t)})}),[_,G,f]),{playerConfig:J,dashVideoResource:D,mp4VideoResource:A}};function Xl(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function Yl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xl(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):Xl(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var Ql=function(e){var n=e.videoData,t=e.vid,r=e.autoplay,o=e.loop,i=e.poster,a=(n||{}).videoResource||{},l=a.normal,u=a.normal_6min,c=(0,s.useMemo)((function(){return l||u}),[l,u]);return{playerConfig:(0,s.useMemo)((function(){if(!c)return{};var e=(0,$.ai)();(0,X.RT)(c);var a=c||{},l=a.poster_url,u=a.has_embedded_subtitle,s=a.subtitle_infos,f=a.seek_ts,d=a.video_duration,p=a.duration,v=(0,X.w1)(c),m=Ea({tag:"çŸ­è§†é¢‘",duration:p||0,preset:e?"default":"mp4Mse"}),h=si({isReplay:!1,isPreview6min:!1,lastCurrentTime:void 0,duration:d||0,seek_ts:f}).startTime,y=(0,X.Oz)({videoInfo:c,mp4VideoInfo:c}).mp4Opts,g=(0,X.ZZ)({mp4Opts:y});return{vid:t,dashPluginConfig:{mp4Opts:y?Yl(Yl({},y),{},{isPlayAutoDefi:"auto"===g}):null,defaultFormat:"mp4"},height:"100%",width:"100%",poster:i||n.poster||l,thumbnail:ba(c),subtitle:{hasEmbeddedSubtitle:u,subtitleInfos:s},seek_ts:f,xgpc_miniscreen:{aspect:v},defaultFormat:"mp4",duration:d||p||0,autoplay:r,onlyInit:!1,vodLogOpts:m,startTime:h,mp4VideoInfo:c,loop:o}}),[c,t,i,n.poster,r,o])}},Jl=function(e){var n,t,r=e.doResource,a=e.isDash,l=(0,su=(0,s.useMemo)((function(){var e=a?r:o;return e&&!ya()(e.dynamic_video)}),[r,a,o]),c=(0,s.useMemo)((function(){var e,n;return{dash:!!u&&!(null==r||null===(e=r.extraInfos)||void 0===e||!e.LogoType),mp4:!1!==a&&!(null==o||null===(n=o.extraInfos)||void 0===n||!n.LogoType)}}),[null==r||null===(n=r.extraInfos)||void 0===n?void 0:n.LogoType,u,a,null==o||null===(t=o.extraInfos)||void 0===t?void 0:t.LogoType]),f=(0,s.useState)(!1),d=(0,i.Z)(f,2),p=d[0],v=d[1];return Jo(l,"playCatch",(function(e){"dash2mp4"===e&&v(!!c.mp4)})),Jo(l,Fr.Z5.EXPIRED_RETRY_END,(function(e){v(!!c["mp4Mse"===e?"mp4":e])})),(0,s.useEffect)((function(){l&&v(!!c["dash"===l.config.defaultFormat?"dash":"mp4"])}),[c,l]),{hasEmbedLogo:p}};function eu(e,n){var t=c()(e);if(d()){var r=d()(e);n&&(r=L()(r).call(r,(function(n){return v()(e,n).enumerable}))),t.push.apply(t,r)}return t}function nu(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eu(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):h()?Object.defineProperties(e,h()(t)):eu(Object(t)).forEach((function(n){Object.defineProperty(e,n,v()(t,n))}))}return e}var tu=function(e){var n=e.videoData,t=e.vid,r=e.autoplay,o=(n||{}).videoResource||{},i=o.normal,a=o.normal_6min,l=o.dash_120fps,u=o.dash,c=(0,s.useMemo)((function(){var e,n,t;return"undefined"!=typeof window&&(null!==(e=null===(n=window)||void 0===n||null===(t=n._fpsDetection)||void 0===t?void 0:t.maxFps)&&void 0!==e?e:0)>100}),[]),f=(0,s.useMemo)((function(){return c&&l?l:u}),[u,l,c]),d=(0,s.useMemo)((function(){return i||a}),[i,a]);return{playerConfig:(0,s.useMemo)((function(){if(!f&&!d)return{};var e=(0,$.ai)(),o=e?f:d;(0,X.RT)(o),d&&(0,X.RT)(d);var i=o||{},a=i.poster_url,l=i.has_embedded_subtitle,u=i.subtitle_infos,c=i.seek_ts,s=i.video_duration,p=i.duration,v=(0,X.w1)(o),m=o&&!ya()(o.dynamic_video)?o:null,h=Ea({teplay:!1,isPreview6min:!1,lastCurrentTime:void 0,duration:s||0,seek_ts:c}).startTime,g=m?"dash":"mp4",_=(0,X.Oz)({videoInfo:o,mp4VideoInfo:d}).mp4Opts,E=(0,X.ZZ)({mp4Opts:_,dashOpts:m});return{vid:t,dashPluginConfig:{dashOpts:m,mp4Opts:_?nu(nu({},_),{},{isPlayAutoDefi:"auto"===E}):null,defaultFormat:g},height:"100%",width:"100%",poster:n.poster_url||a,thumbnail:ba(o),subtitle:{hasEmbeddedSubtitle:l,subtitleInfos:u},seek_ts:c,xgpc_miniscreen:{aspect:v},defaultFormat:m?"dash":"mp4",duration:s||p||0,autoplay:r,onlyInit:!1,vodLogOpts:h,startTime:y,videoInfo:o,mp4VideoInfo:e?d:void 0,plugins:[Ti]}}),[f,d,t,n.poster_url,r])}}},14173:function(e,n,t){e.exports=t.p+"static/media/default.c2cb4d9c.svg"},40587:function(e,n,t){e.exports=t.p+"static/media/logo_inverse.202ebf61.png"},49441:function(e,n,t){e.exports=t.p+"static/lottie/CSSfullScreen.f6c57a5a.json"},3219:function(e,n,t){e.exports=t.p+"static/lottie/CSSfullScreen_exit.2d6e7367.json"},68899:function(e,n,t){e.exports=t.p+"static/lottie/extraConfig.06e52433.json"},29882:function(e,n,t){e.exports=t.p+"static/lottie/fullScreen.f0a7e2c3.json"},74231:function(e,n,t){e.exports=t.p+"static/lottie/fullScreen_exit.c504effd.json"},34557:function(e,n,t){e.exports=t.p+"static/lottie/pip.off.8c702558.json"},61281:function(e,n,t){e.exports=t.p+"static/lottie/pip.on.7abcbce1.json"},40020:function(e,n,t){e.exports=t.p+"static/lottie/theater.20ab21cc.json"},71394:function(e,n,t){e.exports=t.p+"static/lottie/theater_exit.f4268854.json"},85722:function(e,n,t){e.exports=t.p+"static/lottie/volume.a07f48cc.json"}}]);