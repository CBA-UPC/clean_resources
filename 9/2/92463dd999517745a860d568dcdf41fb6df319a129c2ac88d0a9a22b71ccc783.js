var amplitude=function(){"use strict";,r,s,a,u,c;(e={}).SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preinsert",e.POSTINSERT="$postinsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll",(s=r=r||{})[s.None=0]="None",s[s.Error=1]="Error",s[s.Warn=2]="Warn",s[s.Verbose=3]="Verbose",(u=a=a||{}).Unknown="unknown",u.Skipped="skipped",u.Success="success",u.RateLimit="rate_limit",u.PayloadTooLarge="payload_too_large",u.Invalid="invalid",u.Failed="failed",(c=a=a||{}).fromHttpCode=function(e){return 200<=e&&e<300?c.Success:429===e?c.RateLimit:413===e?c.PayloadTooLarge:400<=e&&e<500?c.Invalid:500<=e?c.Failed:c.Unknown};a.Skipped;ar l,d={},h=((l=function(){return"object"==typeof process&&void 0!==(null===(e=null===process||void 0===process?void 0:process.versions)||void 0===e?void 0:e.node)?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:d;var e}()).__AMPLITUDE__=l.__AMPLITUDE__||{},l.__AMPLITUDE__),f="Amplitude Logger ",g=(y.prototype.disable=y.prototype.enable=y.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<r.Verbose||global.console.log(f+"[Log]: "+e.join(" "))},y.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<r.Warn||global.console.warn(f+"[Warn]: "+e.join(" "))},y.prototype.error=y);function y(){this._logLevel=0}h.logger||(h.logger=new g);var _={DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",GROUP_IDENTIFY_EVENT:"$groupidentify",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",DEVICE_ID_INDEX:0,USER_ID_INDEX:1,OPT_OUT_INDEX:2,SESSION_ID_INDEX:3,LAST_EVENT_TIME_INDEX:4,EVENT_ID_INDEX:5,IDENTIFY_ID_INDEX:6,SEQUENCE_NUMBER_INDEX:7,COOKIE_TEST_PREFIX:"amp_cookie_test",COOKIE_PREFIX:"amp",STORAGE_DEFAULT:"",STORAGE_COOKIES:"cookies",STORAGE_NONE:"none",STORAGE_LOCAL:"localStorage",STORAGE_SESSION:"sessionStorage",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id",REFERRER:"referrer",UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_TERM:"utm_term",UTM_CONTENT:"utm_content",ATTRIBUTION_EVENT:"[Amplitude] Attribution Captured"},m=w=E={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:_encode:decode:_decode:,I=Object.prototype.toString;unction S(e){var t=b(e);if("object"!==t)return j.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>_.MAX_PROPERTY_KEYS)return j.error("Error: too many properties (more than 1000), ignoring"),{};var n,i,o,r={};for(var s in e){Object.prototype.hasOwnProperty.call(e,s)&&("string"!==(i=b(n=s))&&(n=String(n),j.warn("WARNING: Non-string property key, received type "+i+', coercing to string "'+n+'"')),null!==(o=L(n,e[s]))&&(r[n]=o))}return r}unction O(e){try{for(var t=document.cookie.split(";"),n=null,i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e)){n=o.substring(e.length,o.length);break}}return n}catch(e){return null}}function T(e,t,n){var i,o=null!==t?n.expirationDays:-1;o&&((i=new Date).setTime(i.getTime()+24*o*60*60*1e3),o=i);var r=e+"="+t;o&&(r+="; expires="+o.toUTCString()),r+="; path=/",n.domain&&(r+="; domain="+n.domain),n.secure&&(r+="; Secure"),n.sameSite&&(r+="; SameSite="+n.sameSite),document.cookie=r}function A(e){var t,n=0<arguments.length&&void 0!==e?e:"",i=n.split(".")[_.LAST_EVENT_TIME_INDEX];return i&&(t=parseInt(i,32)),t||(K.warn("unable to parse malformed cookie: ".concat(n)),0)}r C,D,x,P={DISABLE:0,ERROR:1,WARN:2,INFO:3},U=P.WARN,j={error:function(e){P.ERROR<=U&&q(e)},warn:function(e){P.WARN<=U&&q(e)},info:,q=M=V=["nan","function","arguments","regexp","element"],L=G=F=K=j,z=B=X=W=function(e){var t=b(e);if("object"!==t)return j.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n,i,o,r={};for(var s in e){Object.prototype.hasOwnProperty.call(e,s)&&("string"!==(i=b(n=s))&&(n=String(n),j.warn("WARNING: Non-string groupType, received type "+i+', coercing to string "'+n+'"')),null!==(o=G(n,e[s]))&&(r[n]=o))}return r},$=Y=S,Q=function(){return window.location},J={set:T,get:O,getAll:getLastEventTime:A,sortByEventTime:areCookiesEnabled:,H=Z={expirationDays:void 0,domain:void 0},ee=te=ne=ie={reset:options:get:ee,set:te,remove:ne,setRaw:getRaw:;if())C=window.localStorage;else if(window.globalStorage)try{C=window.globalStorage[window.location.hostname]}catch(e){}else{"undefined"!=typeof document&&(D=document.createElement("div"),x="localStorage",D.style.display="none",document.getElementsByTagName("head")[0].appendChild(D),D.addBehavior&&(D.addBehavior("#default#userdata"),C={length:0,setItem:getItem:removeItem:clear:key:,D.load(x),C.length=D.XMLDocument.documentElement.attributes.length))}ar re,se=C=C||{length:0,setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){},key:function(){}};oe.prototype.getStorage=function(){return null!==this.storage||(J.areCookiesEnabled()?this.storage=ie:(n="amp_cookiestore_",this.storage={_options:{expirationDays:void 0,domain:void 0,secure:!1},reset:options:get:set:remove:)),this.storage;var n};function ae(e,t){r o=e?"?"+e.split(".").slice(-1)[0].replace(/\|/g,"&"):"",r=n(_.UTM_SOURCE,t,"utmcsr",o),s=n(_.UTM_MEDIUM,t,"utmcmd",o),a=n(_.UTM_CAMPAIGN,t,"utmccn",o),u=n(_.UTM_TERM,t,"utmctr",o),c=n(_.UTM_CONTENT,t,"utmcct",o),p={};return i(_.UTM_SOURCE,r),i(_.UTM_MEDIUM,s),i(_.UTM_CAMPAIGN,a),i(_.UTM_TERM,u),i(_.UTM_CONTENT,c),p}ar ce=(o(re={},_.STORAGE_COOKIES,!0),o(re,_.STORAGE_NONE,!0),o(re,_.STORAGE_LOCAL,!0),o(re,_.STORAGE_SESSION,!0),re),pe=function(){ar e,t,n;return e=p,(t=[{key:"getCookieStorageKey",value:,{key:"save",value:,{key:"saveCookie",value:,{key:"load",value:function(){var e,t,n,i,o=this;if(this.storage===_.STORAGE_COOKIES&&(e=this.getCookieStorageKey()+"=",i=0===(t=J.getAll(e)).length||1===t.length?t[0]:(n=J.sortByEventTime(t)[0],t.forEach(,this.saveCookie(n),J.get(e))),!(i=i||se.getItem(this.storageKey)))try{i=window.sessionStorage&&window.sessionStorage.getItem(this.storageKey)}catch(e){K.info('window.sessionStorage unavailable. Reason: "'.concat(e,'"'))}if(!i)return null;var r=i.split("."),s=null;if(r[_.USER_ID_INDEX])try{s=E.decode(r[_.USER_ID_INDEX])}catch(e){s=null}return{deviceId:r[_.DEVICE_ID_INDEX],userId:s,optOut:"1"===r[_.OPT_OUT_INDEX],sessionId:parseInt(r[_.SESSION_ID_INDEX],32),lastEventTime:parseInt(r[_.LAST_EVENT_TIME_INDEX],32),eventId:parseInt(r[_.EVENT_ID_INDEX],32),identifyId:parseInt(r[_.IDENTIFY_ID_INDEX],32),sequenceNumber:parseInt(r[_.SEQUENCE_NUMBER_INDEX],32)}}},{key:"clear",value:function(){var e;if(this.storage===_.STORAGE_COOKIES&&(e=J.get(this.getCookieStorageKey()+"="),J.set(this.getCookieStorageKey(),null,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:0})),e||(e=se.getItem(this.storageKey),se.clear()),!e)try{e=window.sessionStorage&&window.sessionStorage.getItem(this.storageKey),window.sessionStorage.clear()}catch(e){K.info('window.sessionStorage unavailable. Reason: "'.concat(e,'"'))}return!0}}])&&i(e.prototype,t),n&&i(e,n),p}(),le="$clearAll";ue.prototype.add=ue.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},ue.prototype.clearAll=function(){return 0<Object.keys(this.userPropertiesOperations).length?Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,le)||K.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"):this.userPropertiesOperations[le]="-",this},ue.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},ue.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},ue.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},ue.prototype.unset=ue.prototype.preInsert=function(e,t){return this._addOperation("$preInsert",e,t),this},ue.prototype.postInsert=function(e,t){return this._addOperation("$postInsert",e,t),this},ue.prototype.remove=ue.prototype._addOperation=var de="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ar fe=he(function(e){xports?e.exports=t:s.md5=t}),ge=ve=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var me=)?Object.assign:we="%[a-f0-9]{2}";new RegExp(we,"gi"),new RegExp("("+we+")+","gi");unction Ie(e,t,n){this.url=e,this.data=t||{},this.headers=n}var be=Ie.prototype.send=e.prototype.setProductId=Se.prototype.setQuantity=function(e){return"number"!==b(e)?K.error("Unsupported type for quantity: "+b(e)+", expecting number"):this._quantity=parseInt(e),this},Se.prototype.setPrice=function(e){return"number"!==b(e)?K.error("Unsupported type for price: "+b(e)+", expecting number"):this._price=e,this},Se.prototype.setRevenueType=Se.prototype.setEventProperties=Se.prototype._isValidRevenue=Se.prototype._toJSONObject=ar Oe=he(,Te=(Oe.UAParser,"8.3.0"),Ae={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:365,cookieName:"amplitude_id",sameSiteCookie:"Lax",cookieForceUpgrade:!1,deferInitialization:!1,disableCookies:!1,deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeFbclid:!1,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:),logLevel:"WARN",logAttributionCapturedEvent:!1,optOut:!1,onError:platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:18e5,storage:_.STORAGE_DEFAULT,trackingOptions:{city:!0,country:!0,carrier:!0,device_manufacturer:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};Ne.prototype.Identify=ue,Ne.prototype.Revenue=Se,Ne.prototype.init=function(e,i,o,t){var r=this;if("string"!==b(e)||z(e))K.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{Re(this.options,o),p()&&void 0!==window.Prototype&&Array.prototype.toJSON&&(function(){var e;if(p()){var t=window,n=Array;if(void 0!==t.Prototype&&void 0!==(null===(e=n.prototype)||void 0===e?void 0:e.toJSON))return delete n.prototype.toJSON}}(),K.warn("Prototype.js injected Array.prototype.toJSON. Deleting Array.prototype.toJSON to prevent double-stringify")),this.options.cookieName!==Ae.cookieName&&K.warn("The cookieName option is deprecated. We will be ignoring it for newer cookies"),this.options.apiKey=e,this._storageSuffix="_"+e+(this._instanceName===_.DEFAULT_INSTANCE?"":"_"+this._instanceName),this._storageSuffixV5=e.slice(0,6),this._oldCookiename=this.options.cookieName+this._storageSuffix,this._unsentKey=this.options.unsentKey+this._storageSuffix,this._unsentIdentifyKey=this.options.unsentIdentifyKey+this._storageSuffix,this._cookieName=_.COOKIE_PREFIX+"_"+this._storageSuffixV5,this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie}),this._metadataStorage=new pe({storageKey:this._cookieName,disableCookies:this.options.disableCookies,expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie,storage:this.options.storage});var n=!!this.cookieStorage.get(this._oldCookiename),s=!!this._metadataStorage.load();this._useOldCookie=!s&&n&&!this.options.cookieForceUpgrade;var a=s||n;if(this.options.domain=this.cookieStorage.options().domain,this.options.deferInitialization&&!a)return void this._deferInitialization(e,i,o,t);"string"===b(this.options.logLevel)&&F(this.options.logLevel);var u=Me(this);this._apiPropertiesTrackingOptions=0<Object.keys(u).length?{tracking_options:u}:{},this.options.cookieForceUpgrade&&n&&(s||De(this),this.cookieStorage.remove(this._oldCookiename)),Ce(this),this._pendingReadStorage=!0;this.options.saveEvents&&(this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey).map(function(e){return{event:e}}).concat(this._unsentEvents),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey).map(.concat(this._unsentIdentifys)),function(e){r.options.deviceId=r._getInitialDeviceId(o&&o.deviceId,e),r.options.userId="string"===b(i)&&!z(i)&&i||"number"===b(i)&&i.toString()||r.options.userId||null;var t=(new Date).getTime();r._sessionId&&r._lastEventTime&&!(t-r._lastEventTime>r.options.sessionTimeout)||(r.options.unsetParamsReferrerOnNewSession&&r._unsetUTMParams(),r._newSession=!0,r._sessionId=t,r.options.saveParamsReferrerOncePerSession&&r._trackParamsAndReferrer()),r.options.saveParamsReferrerOncePerSession||r._trackParamsAndReferrer(),r.options.saveEvents&&(ke(r._unsentEvents),ke(r._unsentIdentifys)),r._lastEventTime=t,Pe(r),r._pendingReadStorage=!1,r._sendEventsIfReady();for(var n=0;n<r._onInit.length;n++)r._onInit[n](r);r._onInit=[],r._isInitialized=!0}(),this.runQueuedFunctions(),"function"===b(t)&&t(this)}catch(e){K.error(e),"function"===b(o.onError)&&o.onError(e)}},Ne.prototype.deleteLowerLevelDomainCookies=Ne.prototype._getInitialDeviceId=var ke=Ne.prototype._trackParamsAndReferrer=function(){var e,t,n,i,o;this.options.includeUtm&&(e=this._initUtmData()),this.options.includeReferrer&&(t=this._saveReferrer(this._getReferrer())),this.options.includeGclid&&(n=this._saveGclid(this._getUrlParams())),this.options.includeFbclid&&(i=this._saveFbclid(this._getUrlParams())),this.options.logAttributionCapturedEvent&&(o=v({},e,t,n,i),0<Object.keys(o).length&&this.logEvent(_.ATTRIBUTION_EVENT,o))};var Re=function e(t,n){if("object"===b(n)){var i,o,r,s=new Set(["headers"]);for(var a in n)s.has(a)?t[a]=v({},t[a],n[a]):Object.prototype.hasOwnProperty.call(n,a)&&(i=a,r=o=void 0,Object.prototype.hasOwnProperty.call(t,i)&&(o=n[i],r=b(t[i]),$(o,i+" option",r)&&("boolean"===r?t[i]=!!o:"string"===r&&!z(o)||"number"===r&&0<o||"function"===r?t[i]=o:"object"===r&&e(t[i],o))))}};Ne.prototype.runQueuedFunctions=Ne.prototype._apiKeySet=Ne.prototype._loadSavedUnsentEvents=Ne.prototype._parseSavedUnsentEventsString=Ne.prototype.isNewSession=function(){return this._newSession},Ne.prototype.onInit=Ne.prototype.getSessionId=Ne.prototype.nextEventId=function(){return this._eventId++,this._eventId},Ne.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},Ne.prototype.nextSequenceNumber=Ne.prototype._unsentCount=Ne.prototype._sendEventsIfReady=Ne.prototype.clearStorage=Ne.prototype._getFromStorage=Ne.prototype._setInStorage=var Ce=function(e){var t,n;e._useOldCookie?"object"!==b(t=e.cookieStorage.get(e._oldCookiename))||xe(e,t):"object"===b(n=e._metadataStorage.load())&&xe(e,n)},De=xe=Pe=Ne.prototype._initUtmData=Ne.prototype._unsetUTMParams=var Ue=Ne.prototype._getReferrer=function(){return document.referrer},Ne.prototype._getUrlParams=Ne.prototype._saveGclid=function(e){var t=B("gclid",e);if(!z(t)){var n={gclid:t};return Ue(this,n),n}},Ne.prototype._saveFbclid=Ne.prototype._getDeviceIdFromUrlParam=Ne.prototype._getReferringDomain=Ne.prototype._saveReferrer=Ne.prototype.saveEvents=Ne.prototype.setDomain=Ne.prototype.setUserId=Ne.prototype.setGroup=function(e,t){if(this._shouldDeferCall())return this._q.push(["setGroup"].concat(Array.prototype.slice.call(arguments,0)));var n,i;this._apiKeySet("setGroup()")&&$(e,"groupType","string")&&!z(e)&&((n={})[e]=t,i=(new ue).set(e,t),this._logEvent(_.IDENTIFY_EVENT,null,null,i.userPropertiesOperations,n,null,null,null))},Ne.prototype.setOptOut=Ne.prototype.setSessionId=Ne.prototype.resetSessionId=Ne.prototype.regenerateDeviceId=Ne.prototype.setDeviceId=Ne.prototype.setUserProperties=Ne.prototype.clearUserProperties=function(){if(this._shouldDeferCall())return this._q.push(["clearUserProperties"].concat(Array.prototype.slice.call(arguments,0)));var e;this._apiKeySet("clearUserProperties()")&&((e=new ue).clearAll(),this.identify(e))};e.prototype.identify=function(e,t){if(this._shouldDeferCall())return this._q.push(["identify"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("identify()"))if("object"===b(e)&&Object.prototype.hasOwnProperty.call(e,"_q")&&(e=je(new ue,e)),e instanceof ue){if(0<Object.keys(e.userPropertiesOperations).length)return this._logEvent(_.IDENTIFY_EVENT,null,null,e.userPropertiesOperations,null,null,null,t);"function"===b(t)&&t(0,"No request sent",{reason:"No user property operations"})}else K.error("Invalid identify input type. Expected Identify object but saw "+b(e)),"function"===b(t)&&t(0,"No request sent",{reason:"Invalid identify input type"});else"function"===b(t)&&t(0,"No request sent",{reason:"API key is not set"})},Ne.prototype.groupIdentify=function(e,t,n,i){if(this._shouldDeferCall())return this._q.push(["groupIdentify"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("groupIdentify()"))if($(e,"group_type","string")&&!z(e))if(null!=t)if("object"===b(n)&&Object.prototype.hasOwnProperty.call(n,"_q")&&(n=je(new ue,n)),n instanceof ue){if(0<Object.keys(n.userPropertiesOperations).length)return this._logEvent(_.GROUP_IDENTIFY_EVENT,null,null,null,o({},e,t),n.userPropertiesOperations,null,i);"function"===b(i)&&i(0,"No request sent",{reason:"No group property operations"})}else K.error("Invalid identify input type. Expected Identify object but saw "+b(n)),"function"===b(i)&&i(0,"No request sent",{reason:"Invalid identify input type"});else"function"===b(i)&&i(0,"No request sent",{reason:"Invalid group name"});else"function"===b(i)&&i(0,"No request sent",{reason:"Invalid group type"});else"function"===b(i)&&i(0,"No request sent",{reason:"API key is not set"})},Ne.prototype.setVersionName=Ne.prototype._logEvent=function(e,t,n,i,o,r,s,a){if(Ce(this),e)if(this.options.optOut)"function"===b(a)&&a(0,"No request sent",{reason:"optOut is set to true"});else try{var u=e===_.IDENTIFY_EVENT||e===_.GROUP_IDENTIFY_EVENT?this.nextIdentifyId():this.nextEventId(),c=this.nextSequenceNumber(),p="number"===b(s)?s:(new Date).getTime();this._sessionId&&this._lastEventTime&&!(p-this._lastEventTime>this.options.sessionTimeout)||(this._sessionId=p),this._lastEventTime=p,Pe(this);var l=this._ua.browser.name,d=this._ua.browser.major,h=this._ua.os.name;i=i||{};var f=v({},this._apiPropertiesTrackingOptions);n=v({},n||{},f),t=t||{},o=o||{},r=r||{};var g={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:p,event_id:u,session_id:this._sessionId||-1,event_type:e,version_name:this.options.versionName||null,platform:qe(this,"platform")?this.options.platform:null,os_name:qe(this,"os_name")&&l||null,os_version:qe(this,"os_version")&&d||null,device_model:qe(this,"device_model")&&h||null,language:qe(this,"language")?this.options.language:null,api_properties:n,event_properties:X(Y(t)),user_properties:X(Y(i)),uuid:),library:{name:"amplitude-js",version:Te},sequence_number:c,groups:X(W(o)),group_properties:X(Y(r)),user_agent:this._userAgent};return e===_.IDENTIFY_EVENT||e===_.GROUP_IDENTIFY_EVENT?(this._unsentIdentifys.push({event:g,callback:a}),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push({event:g,callback:a}),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(),u}catch(e){K.error(e)}else"function"===b(a)&&a(0,"No request sent",{reason:"Missing eventType"})};var qe=Me=Ne.prototype._limitEventsQueued=Ne.prototype.logEvent=Ne.prototype.logEventWithTimestamp=Ne.prototype.logEventWithGroups=e.prototype.logRevenueV2=function(e){if(this._shouldDeferCall())return this._q.push(["logRevenueV2"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("logRevenueV2()"))if("object"===b(e)&&Object.prototype.hasOwnProperty.call(e,"_q")&&(e=je(new Se,e)),e instanceof Se){if(e&&e._isValidRevenue())return this.logEvent(_.REVENUE_EVENT,e._toJSONObject())}else K.error("Invalid revenue input type. Expected Revenue object but saw "+b(e))},Ne.prototype.logRevenue=Ne.prototype.removeEvents=var Le=Ne.prototype.sendEvents=function(){var e,n,t,i,o,r,s,a,u;this._apiKeySet("sendEvents()")?this.options.optOut?this.removeEvents(1/0,1/0,0,"No request sent",{reason:"Opt out is set to true"}):0!==this._unsentCount()&&(this._sending||(this._sending=!0,e=(this.options.forceHttps||"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint,n=Math.min(this._unsentCount(),this.options.uploadBatchSize),t=this._mergeEventsAndIdentifys(n),i=t.maxEventId,o=t.maxIdentifyId,r=JSON.stringify(t.eventsToSend.map(),s=(new Date).getTime(),a={client:this.options.apiKey,e:r,v:_.API_VERSION,upload_time:s,checksum:fe(_.API_VERSION+this.options.apiKey+r+s)},new Ie(e,a,(u=this).options.headers).send()):this.removeEvents(1/0,1/0,0,"No request sent",{reason:"API key not set"})},Ne.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,i=-1,o=0,r=-1;t.length<e;){var s=void 0,a=o>=this._unsentIdentifys.length,u=n>=this._unsentEvents.length;if(u&&a){K.error("Merging Events and Identifys, less events and identifys than expected");break}a||!u&&(!("sequence_number"in this._unsentEvents[n].event)||this._unsentEvents[n].event.sequence_number<this._unsentIdentifys[o].event.sequence_number)?i=(s=this._unsentEvents[n++]).event.event_id:r=(s=this._unsentIdentifys[o++]).event.event_id,t.push(s)}return{eventsToSend:t,maxEventId:i,maxIdentifyId:r}},Ne.prototype.setGlobalUserProperties=Ne.prototype.__VERSION__=Te,Ne.prototype._shouldDeferCall=Ne.prototype._deferInitialization=Ne.prototype.enableTracking=e.prototype.Identify=ue,Ge.prototype.Revenue=Se,Ge.prototype.getInstance=Ge.prototype.runQueuedFunctions=Ge.prototype.init=Ge.prototype.isNewSession=function(){return this.getInstance().isNewSession()},Ge.prototype.getSessionId=function(){return this.getInstance().getSessionId()},Ge.prototype.nextEventId=function(){return this.getInstance().nextEventId()},Ge.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},Ge.prototype.nextSequenceNumber=Ge.prototype.saveEvents=function(){this.getInstance().saveEvents()},Ge.prototype.setDomain=function(e){this.getInstance().setDomain(e)},Ge.prototype.setUserId=function(e){this.getInstance().setUserId(e)},Ge.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},Ge.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},Ge.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},Ge.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},Ge.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},Ge.prototype.clearUserProperties=Ge.prototype.identify=function(e,t){this.getInstance().identify(e,t)},Ge.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},Ge.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},Ge.prototype.logEventWithGroups=Ge.prototype.logRevenueV2=Ge.prototype.logRevenue=Ge.prototype.removeEvents=Ge.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},Ge.prototype.setGlobalUserProperties=Ge.prototype.__VERSION__=Te;var Fe=window.amplitude||{},Ke=new Ge;for(var ze in Ke._q=Fe._q||[],Fe._iq)Object.prototype.hasOwnProperty.call(Fe._iq,ze)&&(Ke.getInstance(ze)._q=Fe._iq[ze]._q||[]);return Ke.runQueuedFunctions(),Ke}();
