import{a as i}from"./chunk-23LEQWWL.js";import{a as r}from"./chunk-M2PJMRZH.js";import{a as o}from"./chunk-AM4E7Q7O.js";import{a as u}from"./chunk-PINVKRM7.js";import{a as d,b as c}from"./chunk-UG4QYOKJ.js";import{j as h}from"./chunk-WEZIIHAB.js";var n=class extends d{constructor(){super(...arguments);this.scrollTopChange=0;this.isStatic=u.disableAmbientAnimations();this.toggled=!1;this.isSpinning=!1;this.isPhone=!1;this.isChecked=!1;this.shouldFollowMouse=!1;this.showsHoldNearReader=!1;this.returnsChainableAnimation=!1;this.initMouseFollower=()=>{this.scrollTop=document.scrollingElement.scrollTop,this.oldScrollTop=this.scrollTop,this.updateWindowSize(),this.mouseX=this.windowWidthHalf,this.mouseY=this.scrollTop-this.windowHeightHalf,this.oldPageX=this.mouseX,this.oldPageY=this.mouseY};this.handleResize=this.handleScroll=this.handleMouseMove=t=>{this.oldScrollTop=this.scrollTop,this.updateMousePosition(t)};this.handleClick=this.animate=this.animateToPaying=()=>{this.removeFaceListeners(),this.spinCircles(),this.toggled=!0};this.animateToFace=()=>{this.isSpinning=!1,this.isPhone=!1,this.isChecked=!1,this.el.classList.add("is-resting"),this.el.classList.remove("is-phone"),this.el.classList.remove("is-checked"),this.showCorners(),this.shouldFollowMouse&&this.addFaceListeners(),this.toggled=!1};this.deactivate=()=>{this.animateToFace(),this.el.classList.remove("is-active"),this.removeFaceListeners()};this.addFaceListeners=()=>{window.addEventListener("resize",this.handleResize),window.addEventListener("scroll",this.handleScroll),window.addEventListener("mousemove",this.handleMouseMove)};this.removeFaceListeners=connect(){return h(this,null,function*(){this.shouldFollowMouse=this.el.dataset.jsFollowMouse==="",this.shouldFollowMouse&&this.initMouseFollower(),this.showsHoldNearReader=this.el.hasAttribute("data-js-shows-hold-near-reader"),this.returnsChainableAnimation=this.el.hasAttribute("data-js-returns-chainable-animation"),this.returnsChainableAnimation||this.el.addEventListener("click",this.handleClick)})}dateWindowSize(){this.winH=window.innerHeight,this.windowHeightHalf=this.winH*.5,this.windowWidthHalf=window.innerWidth*.5}updateMousePosition(t){let e,s;t?(e=t.pageX,s=t.pageY,this.oldPageX=e,this.oldPageY=s):(this.scrollTopChange=this.scrollTop-this.oldScrollTop,e=this.oldPageX,s=this.oldPageY+this.scrollTopChange);let l=Math.round((e-this.windowWidthHalf)/20)*20,a=Math.round((s-this.scrollTop-this.windowHeightHalf)/20)*20;l!==this.mouseX&&a!==this.mouseY&&(this.mouseX=l,this.mouseY=a,this.lookAtMouse())}lookAtMouse(){this.eyes.style.transform=`translate(${this.mouseX/150}px, ${this.mouseY/150}px`,this.nose.style.transform=`translate(${this.mouseX/80}px, ${this.mouseY/80}px`,this.mouth.style.transform=`translate(${this.mouseX/200}px, ${this.mouseY/300}px`}spinCircles(){let t=new r({el:this.el,steps:[new i({el:this.el,executionFunction:()=>{this.isSpinning=!0,this.tl.forEach(e=>{e.setAttribute("d","M10,50 L10,50 A40,40,0,0,1,50,10L50,10")}),this.tr.forEach(e=>{e.setAttribute("d","M50,10 L50,10 A40,40,0,0,1,90,50L90,50")}),this.br.forEach(e=>{e.setAttribute("d","M90,50 L90,50 A40,40,0,0,1,50,90L50,90")}),this.bl.forEach(e=>{e.setAttribute("d","M50,90 L50,90 A40,40,0,0,1,10,50L10,50")}),this.border.style.transform="perspective(500px) rotateX(1turn) rotateY(1turn)",this.border.style.transition="transform 800ms ease-in-out, opacity 300ms",this.border.style.opacity="0.4",this.borderCopy.style.transform="perspective(500px) rotateZ(150deg) rotateX(1turn) rotateY(1turn)",this.borderCopy.style.transition="transform 800ms ease-in-out, opacity 100ms",this.borderCopy.style.opacity="0.4",this.borderCopy.querySelectorAll("path").forEach(e=>{e.style.stroke="#02e8fc"}),this.el.classList.remove("is-resting"),this.el.classList.add("is-spinning"),this.features.classList.add("is-hidden")}}),new o({el:this.el,duration:this.isStatic?0:200}),new i({el:this.el,executionFunction:),new o({el:this.el,duration:this.isStatic?0:300}),new i({el:this.el,executionFunction:()=>{this.el.classList.remove("is-spinning"),this.border.style.opacity="1",this.borderCopy.style.opacity="0",this.borderCopy.querySelectorAll("path").forEach(e=>{e.style.stroke="#0278fc"})}}),new o({el:this.el,duration:this.isStatic?0:200}),new i({el:this.el,executionFunction:),this.createProcessAnimation()]});return this.returnsChainableAnimation||t.play(),t}createProcessAnimation(){return this.showsHoldNearReader?new r({el:this.el,steps:[new i({el:this.el,executionFunction:()=>{this.el.classList.add("is-phone"),this.isSpinning=!1,this.isPhone=!0}}),new o({el:this.el,duration:this.isStatic?0:3e3}),new i({el:this.el,executionFunction:()=>{!this.isPhone||(this.isChecked=!0,this.el.classList.add("is-checked"))}})]}):new r({el:this.el,steps:[new i({el:this.el,executionFunction:()=>{this.isSpinning=!1,this.isChecked=!0,this.el.classList.add("is-checked")}}),new o({el:this.el,duration:this.isStatic?0:1e4}),new i({el:this.el,executionFunction:()=>{!this.isChecked||!this.el.classList.contains("is-active")||this.animate()}})]})}ghostBorder(t){if(!this.isSpinning)return;let e=t.cloneNode(!0);e.style.transform=window.getComputedStyle(t).getPropertyValue("transform"),e.style.transition="200ms",e.style.opacity="0.15",e.querySelectorAll("path").forEach(,this.borders.appendChild(e),setTimeout(()=>{e.style.opacity="0",e.querySelectorAll("path").forEach(},10),setTimeout(400),requestAnimationFrame(}howCorners(){this.tl.forEach(t=>{t.setAttribute("d","M10,30 L10,22 A12,12,0,0,1,22,10L30,10")}),this.tr.forEach(t=>{t.setAttribute("d","M70,10 L78,10 A12,12,0,0,1,90,22L90,30")}),this.br.forEach(t=>{t.setAttribute("d","M90,70 L90,78 A12,12,0,0,1,78,90L70,90")}),this.bl.forEach(,setTimeout(10)}activate(t=0){this.el.classList.add("is-active"),this.el.classList.add("is-resting"),t&&setTimeout(this.animate,this.isStatic?0:t)}};c.register("FaceIdAnimation",n);export{n as a};
