!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[556],{58637:(e,o,t)=>{t.d(o,{Z:()=>l});var n=t(25190),s=t(2629);let l=function(e){var o=e.children;return(0,s.jsx)(n.ZP,{children:)}},8523:(e,o,t)=>{t.r(o),t.d(o,{BLOG_COUNT_PER_PAGE:()=>$,addBlogTransformFn:()=>W,default:);var n=t(33970),s=t.n(n),l=t(77865),a=t(5754),r=t.n(a),i=t(9156),u=t(95004),d=t(55673),g=t(75168),h=t(52980),c=t(29860),p=t(98724),f=t(48352),w=t(84665),m=t(2493),b=t(30337),x=t(43597),v=t(32468),y=t(63665),j=t(85795),k=t(78667),N=t(26963),F=t(27138),C=t(50209),T=t.n(C),B=t(76319),L=t(17287),Z=t(44009),P=t(93853),_=t(54382),S=t(58637),R=t(18551),E=t(68782);let U={form:"Il4T7",search:"dyc2r",followButtonWrapper:"BfS8g",followButton:"Tb7Ey",followButtonEnabled:"QhJUP",message:"u3Aoh",inputHelp:"yowhF"};var D=t(2629);class I extends u.Component{constructor(){super(...arguments),T()(this,"state",{inputContent:"",hasFocus:!1,message:void 0}),T()(this,"apiHelper",(0,j.ZP)(this.props.appContext.apiFetch)),T()(this,"onChange",,T()(this,"onFocus",()=>this.setState({hasFocus:!0})),T()(this,"onBlur",,T()(this,"followBlog",e=>{e.preventDefault();var o=this.state.inputContent;return this.apiHelper.followBlog(o).fetch().then(e=>{var o=e.response,t=o.blog,n=o.status;return this.setState({inputContent:"",message:this.getFollowMessage(t,n)})}).catch(()=>this.setState({message:this.getUnsuccessfulMessage()}))}),T()(this,"getFollowMessage",(e,o)=>{var t=this.props,n=t.appContext,s=n._t,l=n._c,a=t.onSuccessfulFollow,r=(0,D.jsx)(L.Z,{blog:e,href:e.url,children:e.name});switch(o){case R.$u.Own:return l("Message for when you attempt to follow your primary blog.","That's you!");case R.$u.Exists:return(0,B.Z)({mixedString:s("You already follow {{blogNameLink /}}."),components:{blogNameLink:r}});case R.$u.Followed:default:return a(e),(0,B.Z)({mixedString:(0,E.U)([s("Done. Now you're following {{blogNameLink /}}."),s("Great. Now you're following {{blogNameLink /}}."),s("You're now following {{blogNameLink /}}. It's going to be a great day."),s("You're now following {{blogNameLink /}}. That must feel good."),s("You're following {{blogNameLink /}}. What a great decision.")]),components:{blogNameLink:r}})}}),T()(this,"getUnsuccessfulMessage",()=>{var e=this.props.appContext,o=e._t,t=e.wwwBaseUrl,n=[o("Dunno anyone by that name."),o("Maybe you spelled it wrong?"),o("No idea who you're talking about."),o("Who is that? WHO IS THAT?"),o("Couldn't find that Tumblr. Don't be mad."),o("Ehhhh, that's not a Tumblr. Check your spelling?"),o("Not a soul by that name."),o("Wow! That's not a Tumblr!"),o("That was a cool thing to type but it's not a Tumblr."),o("No one here by that name."),o("Can't follow that, because it doesn't exist."),(0,D.jsx)(_.ZP,{comment:"Variables are <a> tags to make the text a link",components:{link:(0,D.jsx)("a",{href:`${t}/new/blog`})},children:"That isn't a Tumblr, but you could [link]make it one[/link]."},"new"),o("Neat! That's not a Tumblr!"),o("Yes! Nothing found!")];return(0,E.U)(n)})}render(){var e=this.props.appContext._t,o=this.state,t=o.hasFocus,n=o.message,s=o.inputContent;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("form",{className:U.form,action:"",onSubmit:this.followBlog,children:[(0,D.jsx)(P.ZP,{disable:t?P.z9:[]}),(0,D.jsx)("input",{className:U.search,type:"text",autoComplete:"off",placeholder:e("Enter a username or URL to follow"),onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,value:s}),(0,D.jsx)(Z.Z,{onClick:this.followBlog,wrapperClassName:U.followButtonWrapper,className:r()(U.followButton,{[U.followButtonEnabled]:s.length>1}),label:e("Follow"),disabled:s.length<=1,children:e("Follow")})]}),(0,D.jsx)(S.Z,{children:(0,D.jsx)("span",{className:U.inputHelp,children:e("Enter a username or URL to follow")})}),n&&(0,D.jsx)("span",{className:U.message,children:n})]})}}let H=(0,k.HJ)(I),M={content:"rmkqO",newDesktopLayout:"BSxQO",blogRows:"NedHV",title:"IiZ2z",paginatorButtons:"MPVRl"};var O=t(34277),$=20,W=e=>{var o=e.blog,t=e.blogRowIdMap;return e=>{var n=e.findIndex(;return n>-1?(t.current[e[n].name]=t.current[e[n].name]+1||0,e):[o,...e.length<$?e:e.slice(0,e.length-1)]}};let Y=()=>{var e=(0,k.bp)(),o=e._n,t=e._c,n=e._getLocaleNumberString,a=e.apiFetch,C=e.endlessScrollingDisabled,T=e.features.redpopDesktopVerticalNav,B=(0,l.NL)(),L=(0,d.lr)(),Z=s()(L,2),P=Z[0],_=Z[1],S=(0,u.useRef)((0,i.Z)({maxSize:1})),R=(0,u.useRef)({}),E=(0,u.useRef)(),U=P.get("offset")||"",I=(0,O.ug)(U),$=I.isPending,Y=I.data,A=I.isFetching,V=I.fetchNextPage,q=I.hasNextPage,z=I.isInitialLoading,G=!$&&Y?(0,O.EU)(Y):[],Q=null==Y?void 0:Y.pages[0].totalBlogs;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(f.Z,{page:F.H.analyticsPageName}),(0,D.jsxs)(h.Z,{activePage:v.vS.following,children:[(0,D.jsx)(c.Z,{title:t("Title of following page","Following | Tumblr")}),(0,D.jsx)(x.Z,{sidebar:(0,D.jsx)(b.Z,{showCrushes:!0,showRadar:!0,showRecommendedBlogs:!0}),children:(0,D.jsxs)("main",{className:r()(M.content,{[M.newDesktopLayout]:T}),children:[(0,D.jsx)("h1",{className:M.title,children:void 0===Q?t("The '—' is a loading placeholder for when we don't know how many blogs a user is following. The non-placeholder version of this string is '%2$s Following'/'%2$s Following'","— Following"):o("%2$s Following","%2$s Following",Q,[n(Q)])}),(0,D.jsx)(H,{onSuccessfulFollow:e=>{if(B.invalidateQueries({queryKey:O.yD}),C){var o,t=W({blog:e,blogRowIdMap:R});null===(o=E.current)||void 0===o||o.call(E,t)}}}),(0,D.jsx)("section",{className:M.blogRows,children:C?$?(0,D.jsx)(p.w,{}):(0,D.jsx)(w.ZP,{getPrevLink:e=>{var o;return null===(o=e.response.links)||void 0===o?void 0:o.prev},getNextLxt},endpointApiRequest:S.current(U),getInitialPage:()=>({objects:G,nextLink:null==Y?void 0:Y.pages[0].nextLink,prevLink:null==Y?void 0:Y.pages[0].prevLink}),loader:(0,D.jsx)(p.w,{}),getObjectsFromRespoogs,prevButtonIsRefresh:!1,updateUrlFromCurrentPageLink:e=>{var o=(0,N.b)(e).offset;Number(o)?P.set("offset",o||""):P.delete("offset"),_(P)},manualPaginatorButtonCss:{containerClassName:M.paginatorButtons},children:e=>{var o=e.objects,t=e.transformObjects;return void 0===E.current&&(E.current=t),o.map(e=>(0,D.jsx)(g.Z,{blog:e,following:!0,followingPage:!0,showUnfollowText:!0,showLastUpdated:!0},[e.name,R.current[e.name]].join("-")))}}):(0,D.jsxs)(m.Z,{direction:y.cU.Bottom,edgeDistance:400,onScrollToE()},children:[G.map(e=>(0,D.jsx)(g.Z,{blog:e,following:!0,followingPage:!0,showUnfollowText:!0,showLastUpdated:!0},[e.name,R.current[e.name]].join("-"))),A&&(0,D.jsx)(p.w,{condensed:!z})]})})]})})]})]})}}}]);