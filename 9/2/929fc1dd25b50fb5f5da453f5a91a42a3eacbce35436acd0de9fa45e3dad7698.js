(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5532],{24137:81291:,);
//# sourceMappingURL=embed-events-34d6733eb74fc6cd.js.map{className:"mb-1 font-medium",children:"Fields successfully created"}),(0,a.jsxs)("div",{children:["The Navattic engagement fields have been added to your ",t," instance."]})]}),(0,a.jsx)("div",{className:"mt-5 text-base font-medium",children:"Auto-map new fields"}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-gray-500",children:["Automatically connect these new ",t," fields to the corresponding Navattic engagement fields."]})]})}},13710:function(e,t,n){"use strict";var a=n(52322),s=n(2784),i=n(99219),o=n(61807),r=n(78066),l=n(73022),c=n(77512);t.Z=function(e){let{error:t,name:n,logo:d,handleNext:m,allowedFields:u,children:p,loading:h,...x}=e,[g,f]=(0,s.useState)(new Set);return(0,s.useEffect)(()=>{f(u.reduce((e,t)=>e.add(t.name),new Set))},[u]),(0,a.jsx)(r.Z,{containerClass:"mt-5",title:"Add engagement fields to ".concat(n),nextButton:h?(0,a.jsx)(o.Z,{}):(0,a.jsxs)("button",{className:"btn-white justify-center bg-white font-medium shadow",onClick:()=>m(Array.from(g)),children:[(0,a.jsx)(d,{className:"mr-2"}),"Create Fields"]}),...x,children:(0,a.jsxs)("div",{className:"-mt-2 space-y-4",children:[t&&(0,a.jsx)("div",{className:"space-x-2 rounded border bg-gray-50 px-4 py-3 text-sm text-rose-900",children:t}),(0,a.jsx)("div",{className:"space-y-1.5",children:u.map(e=>{let t=e.type===l.J.NUMBER?i.yEv:i.Rhe;return(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(c.XZ,{name:e.name,checked:g.has(e.name),onChange:t=>{var n,a;t?(n=e.name,f(e=>{let t=new Set(e);return t.add(n),t})):(a=e.name,f(e=>{let t=new Set(e);return t.delete(a),t}))}}),(0,a.jsxs)("div",{className:"flex w-full items-center rounded border px-3 py-2 text-[12px] text-gray-700 shadow-sm",children:[(0,a.jsx)("div",{className:"mr-3 rounded bg-gray-600",children:(0,a.jsx)(t,{className:"h-3.5 w-3.5 text-white"})}),e.name]})]},e.name)})}),p]})})}},40761:function(e,t,n){"use strict";n.d(t,{Z:function(){return QuickSetupCollapse}});var a=n(52322),s=n(37100);function QuickSetupCollapse(e){let{objectName:t,logo:n,integrationName:i,onClick:o}=e;return(0,a.jsxs)(s.Z,{title:(0,a.jsxs)("div",{className:"flex items-center",children:["Quick Setup",(0,a.jsx)("div",{className:"ml-3 rounded border bg-gray-50 px-1 text-[13px] leading-5 text-gray-600",children:t})]}),className:"mt-5 overflow-hidden rounded-md border border-gray-200",children:[(0,a.jsxs)("div",{className:"text-sm leading-relaxed text-gray-500",children:["Create Navattic engagement fields on your ",i," instance. You'll have an option to select which fields to create."]}),(0,a.jsxs)("button",{onClick:o,className:"btn-white mt-4 w-full justify-center bg-white font-medium shadow",children:[(0,a.jsx)(n,{className:"mr-2"}),"Auto-create engagement fields"]})]})}},78066:function(e,t,n){"use strict";n.d(t,{Z:function(){return Modal}});var a=n(52322),s=n(2784),i=n(68810),o=n(64529),r=n(83122),l=n(82002),c=n(89370);function Modal(e){let{title:t,open:n,handleClose:d,handleReset:m,children:u,hideFooter:p,cancelButton:h,cancelText:x="Cancel",nextButton:g,nextText:f="Continue",handleNext:b,nextDisabled:j,nextOnEnter:v=!1,isRaw:y,containerClass:N="",containerPadding:w="",opacityClass:S="bg-opacity-50",widthClass:C="max-w-lg",headerContainerClass:k="",titleContainerClass:F="",previewComponent:_,initialFocusRef:M}=e;return u?(0,a.jsx)(i.u,{appear:!0,show:n,as:s.Fragment,afterLeave:m,children:(0,a.jsx)(o.V,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",style:{zIndex:c.dw-1},onClose:d,initialFocus:M,...(0,l.uT)({handler:b,disable:!v||j}),children:(0,a.jsxs)("div",{className:"flex min-h-screen items-start justify-center px-4 pb-10 pb-20 pt-4 text-center sm:block sm:p-0",children:[(0,a.jsx)("span",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true",children:"â€‹"}),y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-75",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(o.V.Overlay,{className:"".concat(S," fixed inset-0 bg-gray-800")})}),(0,a.jsx)(i.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in",leaveFrom:"opacity-50",leaveTo:"opacity-0",children:u})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.V.Overlay,{className:"".concat(S," fixed inset-0 bg-gray-800")}),(0,a.jsxs)("div",{className:(0,r.AK)("relative inline-flex w-full transform rounded-lg bg-white text-left align-top shadow-xl transition transition-all duration-1000 ease-in-out",C,N||"mt-20"),children:[(0,a.jsxs)("div",{className:"flex-1 shrink-0",children:[(0,a.jsxs)("div",{className:k||"border-b border-gray-100 px-6 py-4",children:[(0,a.jsx)("button",{tabIndex:-1,className:"absolute right-5 top-5 rounded-md bg-white text-gray-300 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:d,children:(0,a.jsx)("span",{className:"sr-only",children:"Close panel"})}),(0,a.jsx)("div",{className:F||"text-base font-semibold",children:t})]}),(0,a.jsx)("div",{className:(0,r.AK)(w||"px-6 pb-8 pt-6"),children:u}),!p&&(0,a.jsxs)("div",{className:"z-10 flex justify-end rounded-b-lg border-t border-gray-100 px-4 py-3",children:[h||(0,a.jsx)("button",{id:"nv_modal_cancel_btn","aria-label":x,className:"btn-gray-border mr-3 bg-white px-3 py-2 text-sm",onClick:d,children:x}),g||(0,a.jsx)("button",{id:"nv_modal_next_btn","aria-label":"string"==typeof f?f:"",className:"btn-blue px-3 py-2 text-sm",onClick:b,disabled:j,children:f})]})]}),_&&(0,a.jsx)("div",{className:"bg-zinc-50 px-6 py-10",children:_})]})]})]})})}):(0,a.jsx)("div",{})}},51527:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return k},default:function(){return F}});var a=n(52322),s=n(99219),i=n(2784),o=n(56958),r=n(32517),l=n(52934),c=n(77815),d=n(47330),m=n(53954),u=n(81571),p=n(73022),h=n(21254),x=n(20851),g=n(47128),f=n(91077),b=n(27425),j=n(38445),v=n(13710),y=n(40761);function HubSpotQuickConnect(e){let{webhook:t,integrationName:n,objectName:s,logo:r,afterCreateFields:l,autoMapField:c}=e,[d,m]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[x,g]=(0,i.useState)(!1),[f,b]=(0,i.useState)([]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{objectName:s,logo:r,integrationName:n,onClick:()=>m(!0)}),(0,a.jsx)(v.Z,{name:n,logo:r,open:d,handleClose:()=>m(!1),handleNext:async e=>{h(!0);let n=p.VG.filter(t=>e.includes(t.name)),a=await fetch("/api/integration/hubspot/properties?id=".concat(t.id),{method:"POST",body:JSON.stringify(n)});h(!1),a.ok?(b(n),m(!1),g(!0)):o.A.error("Error creating fields! We're looking into it.")},loading:u,allowedFields:p.VG.filter(e=>![p.HY.FIRST_NAME,p.HY.LAST_NAME].includes(e.name))}),(0,a.jsx)(j.Z,{open:x,handleClose:()=>g(!1),name:n,logo:r,handleNext:()=>{f.forEach(c),g(!1),null==l||l()}})]})}var N=n(12659),w=n(64766),S=n(97185);let C={name:"HubSpot",screenshot:"https://www.navattic.com/img/integrations/hubspot.png",webhookFormat:d.M8.Hubspot,Logo:s.I5b,ConnectComponent:N.Z,ConfigurationComponent:function(e){let{webhook:t,integrationSettings:n}=e,{workspace:j}=(0,m.cF)(),v=(0,m.NK)(j,d.TT.Enrichment),[,y]=(0,l.I)(),[N,w]=(0,i.useState)([]),[S,C]=(0,i.useState)([]),[k,F]=(0,i.useState)([]),[_,M]=(0,i.useState)([]),[{data:E}]=(0,c.x)({variables:{workspaceId:t.workspaceId}}),O=(0,i.useMemo)(()=>(0,x.OA)(t.config||"")||u.Ul,[t.config]);(0,i.useEffect)(()=>{fetch("/api/integration/hubspot/properties?id=".concat(t.id)).then(e=>e.json()).then(e=>{e.contactProperties&&w(e.contactProperties),e.companyProperties&&C(e.companyProperties)})},[t.id]),(0,i.useEffect)(()=>{(function fetchHubSpotScopes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return fetch("/api/integration/hubspot/scopes?id=".concat(e)).then(e=>e.json()).then(n=>"scopes"in n?n.scopes:t>0?fetchHubSpotScopes(e,t-1):[])})(t.id,3).then(F)},[t.id]),(0,i.useEffect)(()=>{let e=(0,g.Ed)((null==E?void 0:E.formFieldMetadata)||[]),t=Object.keys(O.fieldMappings).map(e=>({name:e,id:e})),n=t.filter(t=>!e.find(e=>e.id===t.id));M([...e,...n])},[null==E?void 0:E.formFieldMetadata,O.fieldMappings]);let[A,H]=(0,i.useState)(Object.entries(O.fieldMappings).map((e,t)=>{let[n,a]=e;return{id:t.toString(),from:n,to:a}})),[Z,I]=(0,i.useState)(Object.entries(O.companyFieldMappings).map((e,t)=>{let[n,a]=e;return{id:t.toString(),from:n,to:a}})),T=(0,i.useMemo)(()=>!k.includes(u.yd.CompaniesRead)||!k.includes(u.yd.CompaniesWrite),[k]),L=(0,i.useCallback)(async()=>A.some(e=>!e.to||!e.from)?o.A.error("There are still unfilled mappings. Please fill or delete them."):o.A.promise(y({id:t.id,config:(0,h.au)({...O,fieldMappings:Object.fromEntries(A.map(e=>[e.from,e.to])),companyFieldMappings:Object.fromEntries(Z.map(e=>[e.from,e.to]))})}).then(e=>{if(null==e?void 0:e.error)throw Error("Error saving: ".concat(e.error.message))}),{success:"Saved HubSpot configuration!",loading:"Saving HubSpot configuration...",error:r.bW}),[Z,O,A,y,t.id]),P=(0,i.useMemo)(()=>v&&!T?{Companies:{fromOptions:p.jw.map(e=>({label:e.label,value:e.name})),toOptions:S.filter(e=>{var t;return!(null===(t=e.modificationMetadata)||void 0===t?void 0:t.readOnlyValue)}).map(e=>({label:e.label,value:e.name})),mappings:Z,onChange:I,fromIcon:()=>(0,a.jsx)(f.H,{className:"shrink-0",white:!1,height:15}),toIcon:n.Logo,preventDuplicates:!0}}:void 0,[Z,v,S,n.Logo,T]),V=(0,i.useMemo)(()=>({Contacts:{fromOptions:_.map(e=>({label:e.name,value:e.id})),toOptions:N.filter(e=>{var t;return!(null===(t=e.modificationMetadata)||void 0===t?void 0:t.readOnlyValue)}).map(e=>({label:e.label,value:e.name})),mappings:A,onChange:H,fromIcon:()=>(0,a.jsx)(f.H,{className:"shrink-0",white:!1,height:15}),toIcon:n.Logo,onCreateFromOption:e=>M(t=>[...t,{id:e,name:e}]),preventDuplicates:!0},...P}),[P,_,A,N,n.Logo]);return(0,a.jsxs)("div",{className:"mx-auto flex max-w-[440px] flex-col space-y-3",children:[(0,a.jsx)(HubSpotQuickConnect,{webhook:t,integrationName:n.name,objectName:"Contacts",logo:n.Logo,autoMapField:e=>{H(t=>[...t,{id:t.length.toString(),from:e.name,to:e.name}])}}),(null==E?void 0:E.formFieldMetadata)?(0,a.jsx)(b.Z,{tabs:V}):(0,a.jsxs)("div",{className:"mt-2 flex flex-row items-center justify-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(s.L4p,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:"Loading data..."})]}),v&&T&&(0,a.jsx)("div",{className:"rounded-md border bg-slate-50 p-2 text-sm",children:'Companies are unavailable until you re-authenticate with HubSpot. Click "Setup" and "Update" to re-authenticate.'}),(0,a.jsxs)("button",{onClick:L,className:"btn-white w-full justify-center bg-white font-medium shadow",children:[(0,a.jsx)(n.Logo,{className:"mr-2"}),"Save configuration"]})]})},allowTestConnection:!0,allowReAuth:!0};function HubSpotIntegrationPage(e){let{clientId:t}=e;return(0,a.jsx)(w.Z,{clientId:t,integrationSettings:C})}HubSpotIntegrationPage.getLayout=function(e){return(0,a.jsx)(S.Z,{navLeft:!0,children:e})};var k=!0,F=HubSpotIntegrationPage}},function(e){e.O(0,[8934,3211,8426,3265,1617,4637,5837,8834,9623,9790,4054,7330,9219,5306,6870,7156,6456,7185,4766,8765,9774,2888,179],function(){return e(e.s=84056)}),_N_E=e.O()}]);
//# sourceMappingURL=hubspot-efe58736771048b9.js.map