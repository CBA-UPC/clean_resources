pendo.guidesPayload({"guides":[{"createdByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"createdAt":1680646525828,"lastUpdatedByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"lastUpdatedAt":1704933158758,"appId":-323232,"id":"d5Gq58Vli0ohYo3u9uVbslVJgdg","name":"23_04_04_SelfServiceTeam_UpdatePayment","description":"Launching steps from the Zbot for how to \"update payment method\" in the admin center (permalink launch) ","state":"public","emailState":"","launchMethod":"api","isMultiStep":true,"isTraining":false,"attributes":{"capping":{"maxImpressions":1,"maxSessionImpressions":1},"dates":{"bg":"апр 5, 2023","ca":"abr. 5, 2023","cs":"dub 5, 2023","da":"apr 5, 2023","de":"Apr. 5, 2023","de-AT":"Apr. 5, 2023","de-CH":"Apr. 5, 2023","el":"Απρ 5, 2023","en":"Apr 5, 2023","en-AU":"Apr 5, 2023","en-CA":"Apr 5, 2023","en-GB":"Apr 5, 2023","en-IE":"Apr 5, 2023","en-NZ":"Apr 5, 2023","en-US":"Apr 5, 2023","es":"abr. 5, 2023","es-419":"abr. 5, 2023","es-CL":"abr. 5, 2023","es-ES":"abr. 5, 2023","es-MX":"abr. 5, 2023","et":"apr 5, 2023","fi":"huhti 5, 2023","fr":"avr. 5, 2023","fr-BE":"avr. 5, 2023","fr-CA":"avr. 5, 2023","fr-CH":"avr. 5, 2023","fr-FR":"avr. 5, 2023","hi":"अप्रै. ५, २०२३","hr":"tra. 5, 2023","hu":"ápr 5, 2023","id":"Apr 5, 2023","it":"apr 5, 2023","ja":"4月 5, 2023","ko":"4월 5, 2023","ms":"Apr 5, 2023","nl":"apr. 5, 2023","nl-BE":"apr. 5, 2023","no":"Apr 5, 2023","pl":"kwi 5, 2023","pt":"Abr 5, 2023","pt-BR":"Abr 5, 2023","pt-PT":"Abr 5, 2023","ro":"apr. 5, 2023","ru":"апр. 5, 2023","sk":"apr 5, 2023","sl":"apr. 5, 2023","sv":"apr 5, 2023","th":"เม.ย. 5, 2023","tr":"Nis 5, 2023","uk":"квіт 5, 2023","vi":"Th04 5, 2023","zh-CN":"4月 5, 2023","zh-HK":"4月 5, 2023","zh-TW":"4月 5, 2023"},"device":{"type":"desktop"},"priority":2889,"sharedServiceVersion":"4.3.10","type":"building-block"},"audience":[{"source":{"visitors":null}},{"eval":{"accountId":"metadata.auto.accountids"}},{"unwind":{"field":"accountId","keepEmpty":true}},{"select":{"visitorId":"visitorId"}}],"audienceUiHint":{"filters":[{"kind":"visitor","segmentId":"everyone"}]},"authoredLanguage":"en-US","recurrence":0,"recurrenceEligibilityWindow":0,"resetAt":1680729835132,"publishedAt":1680729839751,"publishedEver":true,"currentFirstEligibleToBeSeenAt":1680729626193,"isTopLevel":false,"isModule":false,"editorType":"visualDesignStudio","dependentMetadata":[],"language":"en-US","steps":[{"id":"Mz1rE1EFMyhg9Wo-Jfakq77iZUU","guideId":"d5Gq58Vli0ohYo3u9uVbslVJgdg","templateId":"building-block-guide","type":"building-block","pageId":"aUzOD75IwEhjEsqw4TN_ha0S-pk","regexUrlRule":"^https?://[^/]*/admin/account/billing/payment/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":"","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/Mz1rE1EFMyhg9Wo-Jfakq77iZUU/ihpZOw8pjkCWesizZEimgB8QmXc","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/Mz1rE1EFMyhg9Wo-Jfakq77iZUU/NeQHm_BNq4ab1R_cb5HV3W76Is4.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/Mz1rE1EFMyhg9Wo-Jfakq77iZUU/n6TUgHxA9oTfCz9-SiypLnvFhws.dom.json?sha256=-e9Yx-qkg1v40enZFTigeeCfIklyNpLpPOuMpK8OoCQ","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/Mz1rE1EFMyhg9Wo-Jfakq77iZUU/PHd2o_9OKqhknHZPYm4CholoKRI.dom.jsonp?sha256=QtsH_MIsZv1AQgabuYkvvuyIOeQXzsFPfrSQIoI4F6o","rank":15000000,"advanceMethod":"button","attributes":{"advanceActions":null,"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"right","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1684178413624,"resetAt":1680729835132,"hideCredits":true},{"id":"6m74BLToaJe_8M7-VMkw_DZ2L7M","guideId":"d5Gq58Vli0ohYo3u9uVbslVJgdg","templateId":"building-block-guide","type":"","elementPathRule":"[data-testid=\"manage-payment-submit-button\"]","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/6m74BLToaJe_8M7-VMkw_DZ2L7M/3jZ-5tKX8tPTOaixcXSgFmzATQE","contentUrlCss":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/6m74BLToaJe_8M7-VMkw_DZ2L7M/-S1WzVK4HUUSuLq84ZudZnoiFKU.guide.css?sha256=8Yr8Or-5vWcWXiy7R4N9WKH6LPhtKEyAqTSkwffgwqw","contentUrlJs":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/6m74BLToaJe_8M7-VMkw_DZ2L7M/h1B4C7F_rCKbncEFGoG_Uau-N8I.guide.js?sha256=xH4ZVU1nDKTnV9ft8StjhjA_JZCm0uaOS1RavL541sc","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/6m74BLToaJe_8M7-VMkw_DZ2L7M/1IDlne_haZylhUBdyZ8hxGgjwCI.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/6m74BLToaJe_8M7-VMkw_DZ2L7M/iSMzKwjvPjvr9dM_NEKMj-HBdAU.dom.json?sha256=RkrDiusgbbYHi7grP0h5W_FPhpc8tGJw2ryBZuv8N80","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/d5Gq58Vli0ohYo3u9uVbslVJgdg/6m74BLToaJe_8M7-VMkw_DZ2L7M/vqzEKCZKYA9eoDzIHpuagyIuv2Q.dom.jsonp?sha256=VWBHgDG0FAOSftexstCioaB_o3_QMTH5sqgtg2KKvUE","rank":20000000,"advanceMethod":"","attributes":{"advanceActions":null,"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"custom","isAutoFocus":true,"themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1680729519360,"resetAt":1680729835132,"hideCredits":true}],"guideDismissCount":0},{"createdByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"createdAt":1689779198479,"lastUpdatedByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"lastUpdatedAt":1704932834368,"appId":-323232,"id":"i6wLWKnJ4E84plp6NwHJjSsy9kE","name":"23_07_19_SelfServiceTeam_Upgrade end user to staff","description":"Launching steps from the Zbot for how to \"upgrade an end user to staff\" in the admin center (permalink launch) ","state":"public","emailState":"","launchMethod":"api","isMultiStep":true,"isTraining":false,"attributes":{"capping":{"maxImpressions":1,"maxSessionImpressions":1},"dates":{"bg":"юли 19, 2023","ca":"jul. 19, 2023","cs":"čvc 19, 2023","da":"jul 19, 2023","de":"Juli 19, 2023","de-AT":"Juli 19, 2023","de-CH":"Juli 19, 2023","el":"Ιουλ 19, 2023","en":"Jul 19, 2023","en-AU":"Jul 19, 2023","en-CA":"Jul 19, 2023","en-GB":"Jul 19, 2023","en-IE":"Jul 19, 2023","en-NZ":"Jul 19, 2023","en-US":"Jul 19, 2023","es":"jul. 19, 2023","es-419":"jul. 19, 2023","es-CL":"jul. 19, 2023","es-ES":"jul. 19, 2023","es-MX":"jul. 19, 2023","et":"juuli 19, 2023","fi":"heinä 19, 2023","fr":"juil. 19, 2023","fr-BE":"juil. 19, 2023","fr-CA":"juil. 19, 2023","fr-CH":"juil. 19, 2023","fr-FR":"juil. 19, 2023","hi":"जुल. १९, २०२३","hr":"srp. 19, 2023","hu":"júl 19, 2023","id":"Jul 19, 2023","it":"lug 19, 2023","ja":"7月 19, 2023","ko":"7월 19, 2023","ms":"Jul 19, 2023","nl":"jul. 19, 2023","nl-BE":"jul. 19, 2023","no":"Jul 19, 2023","pl":"lip 19, 2023","pt":"Jul 19, 2023","pt-BR":"Jul 19, 2023","pt-PT":"Jul 19, 2023","ro":"iul. 19, 2023","ru":"июль 19, 2023","sk":"júl 19, 2023","sl":"jul. 19, 2023","sv":"jul 19, 2023","th":"ก.ค. 19, 2023","tr":"Tem 19, 2023","uk":"лип 19, 2023","vi":"Th07 19, 2023","zh-CN":"7月 19, 2023","zh-HK":"7月 19, 2023","zh-TW":"7月 19, 2023"},"device":{"type":"desktop"},"priority":2889,"sharedServiceVersion":"4.8.0","type":"building-block"},"audience":[{"source":{"visitors":null}},{"eval":{"accountId":"metadata.auto.accountids"}},{"unwind":{"field":"accountId","keepEmpty":true}},{"select":{"visitorId":"visitorId"}}],"audienceUiHint":{"filters":[{"kind":"visitor","segmentId":"everyone"}]},"authoredLanguage":"en-US","recurrence":0,"recurrenceEligibilityWindow":0,"resetAt":1692304375186,"publishedAt":1692304654711,"publishedEver":true,"currentFirstEligibleToBeSeenAt":1689790271510,"isTopLevel":false,"isModule":false,"editorType":"visualDesignStudio","dependentMetadata":[],"language":"en-US","steps":[{"id":"hpOHQ9hE6LPYPFWQuREdn86exYo","guideId":"i6wLWKnJ4E84plp6NwHJjSsy9kE","templateId":"building-block-guide","type":"building-block","elementPathRule":"[data-garden-id=\"grid.row\"]:nth-child(4)","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/hpOHQ9hE6LPYPFWQuREdn86exYo/mUHziCVmW-UucHMvQIBrm2YfMuk.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/hpOHQ9hE6LPYPFWQuREdn86exYo/8kZgYRQsS5GuyY_ykeHOYdNdqo0.dom.json?sha256=qNDC0QkSB16QmRlmiBtx2ADWRGCE-BAGStPb5MFEFQE","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/hpOHQ9hE6LPYPFWQuREdn86exYo/M_jXugxI-Y1nep2WIuthLdslPuU.dom.jsonp?sha256=7TCifeM409Rdy2YCw7EFpOub5cKwhztKMQFtkvu9xNI","rank":0,"advanceMethod":"button","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"parent","isAutoFocus":true,"layoutDir":"top","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1692304739644,"resetAt":1692304375186,"hideCredits":true},{"id":"01pz2hYJ9zmSZWmUPXbnHLZam7k","guideId":"i6wLWKnJ4E84plp6NwHJjSsy9kE","templateId":"building-block-guide","type":"building-block","elementPathRule":".ember-view:nth-child(2) \u003e .property_box \u003e .delim:contains('User type')","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/01pz2hYJ9zmSZWmUPXbnHLZam7k/O48wu4Z8SEFqGCMerrOj3eyAXFw.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/01pz2hYJ9zmSZWmUPXbnHLZam7k/WNGCWFkeRFEslb2TgF1OdJTmSRA.dom.json?sha256=hYFq_kmt-sshKjuIsrDWQhyYzR4XajJbIGaJStTXjEc","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/01pz2hYJ9zmSZWmUPXbnHLZam7k/Vxkh7MWIwbKAKTb9GeYoY-aIYP0.dom.jsonp?sha256=t_6Ww_xKIGAMC1MRdXC71lo9z-NXlLEbYV6a8vyMCBw","rank":1,"advanceMethod":"button","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"right","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1692204795472,"resetAt":1692304375186,"hideCredits":true},{"id":"OuC5GTgfaCh3092RuIVLzMIwu4w","guideId":"i6wLWKnJ4E84plp6NwHJjSsy9kE","templateId":"building-block-guide","type":"building-block","pageId":"c4cXSwg6_82vubCzuduWxviQO84","regexUrlRule":"(?:^https?://[^/]*/agent/users/[^/#?;]+/[^/#?;]+/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$|^https?://[^/]*/agent/tickets/([^/#?;]+)/requester/requested_tickets/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$)","elementPathRule":".role-modal","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/OuC5GTgfaCh3092RuIVLzMIwu4w/ebBNo7mWcwFzVmxB93Y2UcRfffs","contentUrlCss":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/OuC5GTgfaCh3092RuIVLzMIwu4w/RLSzs8uyP7dgsKCa-WTMjPjTxCA.guide.css?sha256=JAKi7CG2pgDGPL5FH8TrHsvIyD4rvZxpTgDmxaQ9H3s","contentUrlJs":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/OuC5GTgfaCh3092RuIVLzMIwu4w/QcqxbORdNSUgMIvUGonI6w0MrJ0.guide.js?sha256=MPMOzsHOijh0Agsy6gxLjPUH9gbTORhEuMlNMe5vJFw","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/OuC5GTgfaCh3092RuIVLzMIwu4w/XbGR-T-Z9bpAe4wxRc5aAfgpus0.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/OuC5GTgfaCh3092RuIVLzMIwu4w/4_vay2x7Sky8vyAklHlnBAj0krM.dom.json?sha256=51BFI3ieiqoQp9B_w6j4nhl2bcPWxggObpRnqyIUqsw","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/OuC5GTgfaCh3092RuIVLzMIwu4w/_XewNvQ8UshcbhA-MCIWwFWGYOU.dom.jsonp?sha256=mQoMVXAoV0LhoSLALXAv4YToND1bKtwEVZLCMyZfmgQ","rank":2,"advanceMethod":"button","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"right","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1692205070955,"resetAt":1692304375186,"hideCredits":true},{"id":"5iP2skeyZuADt_EBBF8Wq3dJPd4","guideId":"i6wLWKnJ4E84plp6NwHJjSsy9kE","templateId":"building-block-guide","type":"building-block","pageId":"c4cXSwg6_82vubCzuduWxviQO84","regexUrlRule":"(?:^https?://[^/]*/agent/users/[^/#?;]+/[^/#?;]+/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$|^https?://[^/]*/agent/tickets/([^/#?;]+)/requester/requested_tickets/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$)","elementPathRule":"","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/5iP2skeyZuADt_EBBF8Wq3dJPd4/zWqDdonWhOSioxrswhxF4nqOmnI","contentUrlCss":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/5iP2skeyZuADt_EBBF8Wq3dJPd4/p77E-eCz_apJ6ux6DbbSQP7z41s.guide.css?sha256=jo89U7CGy_lGG6lm6yU7uuwlHFNGgNV06tlzfie0ULs","contentUrlJs":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/5iP2skeyZuADt_EBBF8Wq3dJPd4/tT_OyMJXXbnij18ZttorfKm8-xc.guide.js?sha256=dx0UQSCPln4ckVtqw_v80HIUfLmcNXA6kfIW-_g-Xo4","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/5iP2skeyZuADt_EBBF8Wq3dJPd4/ZpDyAZfPvyvp929pLB2lt_HLsFs.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/5iP2skeyZuADt_EBBF8Wq3dJPd4/YduDdAQkeFqh4qvSfkvCrpr7uiA.dom.json?sha256=IkredJLt58bsOaHsAMbSw6wLFs1UATeo1lWLK76wdP8","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/i6wLWKnJ4E84plp6NwHJjSsy9kE/5iP2skeyZuADt_EBBF8Wq3dJPd4/jdGHl5zfCHCZd2GQuEexQHpDCks.dom.jsonp?sha256=Zw9QitPuYyk8-r5Ci6UDgzgYdgvqinI0NmnBhNZJaR8","rank":3,"advanceMethod":"button","attributes":{"advanceActions":null,"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"right","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1692126392295,"resetAt":1692304375186,"hideCredits":true}],"guideDismissCount":0},{"createdByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"createdAt":1691693666706,"lastUpdatedByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"lastUpdatedAt":1695762967285,"appId":-323232,"id":"myEk_hRBZ8Rqpq71CEG3KQRitQI","name":"23_08_SelfServiceTeam_Support_EmailAlreadyExistsMessage","description":"Launching from a z bot intent","state":"public","emailState":"","launchMethod":"api","isMultiStep":true,"isTraining":false,"attributes":{"capping":{"maxImpressions":1,"maxSessionImpressions":1},"dates":{"bg":"сеп 26, 2023","ca":"set. 26, 2023","cs":"zář 26, 2023","da":"sep 26, 2023","de":"Sep. 26, 2023","de-AT":"Sep. 26, 2023","de-CH":"Sep. 26, 2023","el":"Σεπ 26, 2023","en":"Sep 26, 2023","en-AU":"Sep 26, 2023","en-CA":"Sep 26, 2023","en-GB":"Sep 26, 2023","en-IE":"Sep 26, 2023","en-NZ":"Sep 26, 2023","en-US":"Sep 26, 2023","es":"sep. 26, 2023","es-419":"sep. 26, 2023","es-CL":"sep. 26, 2023","es-ES":"sep. 26, 2023","es-MX":"sep. 26, 2023","et":"sept 26, 2023","fi":"syys 26, 2023","fr":"sept. 26, 2023","fr-BE":"sept. 26, 2023","fr-CA":"sept. 26, 2023","fr-CH":"sept. 26, 2023","fr-FR":"sept. 26, 2023","hi":"सित. २६, २०२३","hr":"ruj. 26, 2023","hu":"szept 26, 2023","id":"Sep 26, 2023","it":"set 26, 2023","ja":"9月 26, 2023","ko":"9월 26, 2023","ms":"Sep 26, 2023","nl":"sep. 26, 2023","nl-BE":"sep. 26, 2023","no":"Sep 26, 2023","pl":"wrz 26, 2023","pt":"Set 26, 2023","pt-BR":"Set 26, 2023","pt-PT":"Set 26, 2023","ro":"sept. 26, 2023","ru":"сент. 26, 2023","sk":"sep 26, 2023","sl":"sep. 26, 2023","sv":"sep 26, 2023","th":"ก.ย. 26, 2023","tr":"Eyl 26, 2023","uk":"вер 26, 2023","vi":"Th09 26, 2023","zh-CN":"9月 26, 2023","zh-HK":"9月 26, 2023","zh-TW":"9月 26, 2023"},"device":{"type":"desktop"},"priority":2982,"sharedServiceVersion":"4.8.7","type":"building-block"},"audienceUiHint":{"filters":[]},"authoredLanguage":"en-US","recurrence":0,"recurrenceEligibilityWindow":0,"resetAt":1695762957752,"publishedAt":1695762967285,"publishedEver":true,"currentFirstEligibleToBeSeenAt":1695762929618,"isTopLevel":false,"isModule":false,"editorType":"visualDesignStudio","dependentMetadata":[],"language":"en-US","steps":[{"id":"tTNSbOU3B50vm-9bLOGGeCZp5qg","guideId":"myEk_hRBZ8Rqpq71CEG3KQRitQI","templateId":"building-block-guide","type":"building-block","pageId":"qQAqJs9uNegeyIuzwl9Z-_9BqCo","regexUrlRule":"^https?://[^/]*/agent/search/[^/#?;]+/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":"[data-test-id=\"search_advanced-search-box_input-field_container\"] \u003e [data-garden-id=\"forms.field\"] \u003e [data-garden-id=\"forms.faux_input\"]","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/tTNSbOU3B50vm-9bLOGGeCZp5qg/4MxbglV8wbPbv_UQUDW3Wm-H5SE.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/tTNSbOU3B50vm-9bLOGGeCZp5qg/0F_QdHRxf-JFec0vZCEDug27INE.dom.json?sha256=7KQTzyL6rNd52uC9eVxoCXqLHnq9Tm_GL3deSe68DOY","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/tTNSbOU3B50vm-9bLOGGeCZp5qg/6KVSJ1kwdZrpUIDiHTkFMJe_yUs.dom.jsonp?sha256=RljMjT8iZnxGRnBfyDAdCI6VwV6YtsMdU6jBILk5uAk","rank":0,"advanceMethod":"button","attributes":{"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"auto","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1695754556174,"resetAt":1695762957752,"hideCredits":true},{"id":"AoaSEmomVigbhMGx8HFKT7YMSpg","guideId":"myEk_hRBZ8Rqpq71CEG3KQRitQI","templateId":"building-block-guide","type":"","pageId":"qQAqJs9uNegeyIuzwl9Z-_9BqCo","regexUrlRule":"^https?://[^/]*/agent/search/[^/#?;]+/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":"[data-test-id=\"search_tables_tab-users\"]","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/AoaSEmomVigbhMGx8HFKT7YMSpg/WHZk61gcccCtyjsntfnkAm6qN_0.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/AoaSEmomVigbhMGx8HFKT7YMSpg/MT7N1DVsgqfRVdhHjmYNBkixDrQ.dom.json?sha256=YCxvutX4VqD87p6l77X9dYG87UV9hJ0iXHDvMzpwpws","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/AoaSEmomVigbhMGx8HFKT7YMSpg/GVD-VJyd0G7rLYLJZm_dbWbRcZc.dom.jsonp?sha256=0c0Y31E-EkV5d_yogf3B8G4hHNtoTQqIUFstPY-9SmY","rank":1,"advanceMethod":"","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"bottom","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1695754685203,"resetAt":1695762957752,"hideCredits":true},{"id":"QmQW65Os2EW78D7sK18N8B52rZY","guideId":"myEk_hRBZ8Rqpq71CEG3KQRitQI","templateId":"building-block-guide","type":"","pageId":"qQAqJs9uNegeyIuzwl9Z-_9BqCo","regexUrlRule":"^https?://[^/]*/agent/search/[^/#?;]+/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":"[data-garden-id=\"tabs.tabs\"]","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/QmQW65Os2EW78D7sK18N8B52rZY/juLih1xY4PeI1gY7OKbBXHfQn3Y.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/QmQW65Os2EW78D7sK18N8B52rZY/ikLjNupM_yUAGfoRSKOzD_b1emg.dom.json?sha256=OVXTKUcUU8-56Sp_iiTKq8gHBxa07AX3eoZ5X7uMayM","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/QmQW65Os2EW78D7sK18N8B52rZY/pse2Mwm4ulKLI1xwO-N7zehYQC8.dom.jsonp?sha256=O3NDABNidbn4sFsfL4GKnjMrBuitUx29LEuMWQddxyA","rank":2,"advanceMethod":"","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"bottom","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1695754837914,"resetAt":1695762957752,"hideCredits":true},{"id":"tOSJhNoNc6szzAl8uwkcVA6Aqdo","guideId":"myEk_hRBZ8Rqpq71CEG3KQRitQI","templateId":"building-block-guide","type":"","elementPathRule":"[data-test-id=\"user-email-identity\"]","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/tOSJhNoNc6szzAl8uwkcVA6Aqdo/wBkFS8WYHYiPIFfhO_EKy4wt2Uk.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/tOSJhNoNc6szzAl8uwkcVA6Aqdo/E3MUPyngTvPTu2f7T9YqCg2Xjjs.dom.json?sha256=ZCaizysTI59606V3jserPBnAqxFjNJG5EVMoSNhUSS8","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/tOSJhNoNc6szzAl8uwkcVA6Aqdo/zlQre8NAM5UuVgamn1SiSc1OeVo.dom.jsonp?sha256=5huCjH-e3uhV9i97hyFCHgv1QxkebTtAHkGpggE1xdE","rank":3,"advanceMethod":"","attributes":{"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"parent","isAutoFocus":true,"layoutDir":"right","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1695762794345,"resetAt":1695762957752,"hideCredits":true},{"id":"Xw8IxUl56CoyzPNfbWWu8g0DwqE","guideId":"myEk_hRBZ8Rqpq71CEG3KQRitQI","templateId":"building-block-guide","type":"","elementPathRule":"","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/Xw8IxUl56CoyzPNfbWWu8g0DwqE/Svlnj4QTWEGBqlEv8ad2xP3vFWs","contentUrlCss":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/Xw8IxUl56CoyzPNfbWWu8g0DwqE/uc4SrOjmHbKsMwcRYBmtrYRDRlY.guide.css?sha256=bXJysRqtfk_2Oia-w-FYCOfNgTYjP4vHJEsSgXhp76E","contentUrlJs":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/Xw8IxUl56CoyzPNfbWWu8g0DwqE/QzL6I9hnwmRM986dj5pHkG7XD8c.guide.js?sha256=cRu1rjjaj2mD-weWFHpfJpCk6OayXbhu1SX2G6h1m4I","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/Xw8IxUl56CoyzPNfbWWu8g0DwqE/sAzaG0oR9fyLKF0xVRT9_zGFlHg.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/Xw8IxUl56CoyzPNfbWWu8g0DwqE/yXcAVZzF5G9rQidzOn6tP4Www3k.dom.json?sha256=ZLnliFP2PFbUmWiq89JhMLmEJn1bFJYvuh2HjmLNyY8","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/myEk_hRBZ8Rqpq71CEG3KQRitQI/Xw8IxUl56CoyzPNfbWWu8g0DwqE/QvThg1Aoe9ucouvobRQlfUJAMDg.dom.jsonp?sha256=Kn_Xpz9iu-luaVLAhfOvRS9r5w4QL1LjfKYl-QEnCgA","rank":5000003,"advanceMethod":"","attributes":{"advanceActions":null,"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1695327659818,"resetAt":1695762957752,"hideCredits":true}],"guideDismissCount":0},{"createdByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"createdAt":1689108510452,"lastUpdatedByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"lastUpdatedAt":1704998488589,"appId":-323232,"id":"vzAHCcxw4bqGC867-wmkSar9siY","name":"23_07_11_SelfServiceTeam_EnableAssumption","description":"Launching steps from the Zbot for how to \"enable account assumption\" in the admin center (permalink launch) ","state":"public","emailState":"","launchMethod":"api","isMultiStep":true,"isTraining":false,"attributes":{"capping":{"maxImpressions":1,"maxSessionImpressions":1},"dates":{"bg":"юли 14, 2023","ca":"jul. 14, 2023","cs":"čvc 14, 2023","da":"jul 14, 2023","de":"Juli 14, 2023","de-AT":"Juli 14, 2023","de-CH":"Juli 14, 2023","el":"Ιουλ 14, 2023","en":"Jul 14, 2023","en-AU":"Jul 14, 2023","en-CA":"Jul 14, 2023","en-GB":"Jul 14, 2023","en-IE":"Jul 14, 2023","en-NZ":"Jul 14, 2023","en-US":"Jul 14, 2023","es":"jul. 14, 2023","es-419":"jul. 14, 2023","es-CL":"jul. 14, 2023","es-ES":"jul. 14, 2023","es-MX":"jul. 14, 2023","et":"juuli 14, 2023","fi":"heinä 14, 2023","fr":"juil. 14, 2023","fr-BE":"juil. 14, 2023","fr-CA":"juil. 14, 2023","fr-CH":"juil. 14, 2023","fr-FR":"juil. 14, 2023","hi":"जुल. १४, २०२३","hr":"srp. 14, 2023","hu":"júl 14, 2023","id":"Jul 14, 2023","it":"lug 14, 2023","ja":"7月 14, 2023","ko":"7월 14, 2023","ms":"Jul 14, 2023","nl":"jul. 14, 2023","nl-BE":"jul. 14, 2023","no":"Jul 14, 2023","pl":"lip 14, 2023","pt":"Jul 14, 2023","pt-BR":"Jul 14, 2023","pt-PT":"Jul 14, 2023","ro":"iul. 14, 2023","ru":"июль 14, 2023","sk":"júl 14, 2023","sl":"jul. 14, 2023","sv":"jul 14, 2023","th":"ก.ค. 14, 2023","tr":"Tem 14, 2023","uk":"лип 14, 2023","vi":"Th07 14, 2023","zh-CN":"7月 14, 2023","zh-HK":"7月 14, 2023","zh-TW":"7月 14, 2023"},"device":{"type":"desktop"},"priority":2889,"sharedServiceVersion":"4.6.12","type":"building-block"},"audience":[{"source":{"visitors":null}},{"eval":{"accountId":"metadata.auto.accountids"}},{"unwind":{"field":"accountId","keepEmpty":true}},{"select":{"visitorId":"visitorId"}}],"audienceUiHint":{"filters":[{"kind":"visitor","segmentId":"everyone"}]},"authoredLanguage":"en-US","recurrence":0,"recurrenceEligibilityWindow":0,"resetAt":1691009057753,"publishedAt":1691009063931,"publishedEver":true,"currentFirstEligibleToBeSeenAt":1689361229249,"isTopLevel":false,"isModule":false,"editorType":"visualDesignStudio","dependentMetadata":[],"language":"en-US","steps":[{"id":"1tgZHsZWqUpjBnNP_ORtcAae8to","guideId":"vzAHCcxw4bqGC867-wmkSar9siY","templateId":"building-block-guide","type":"building-block","pageId":"w1CMtI-E-Mjacj0zzOAuKYqLeFc","regexUrlRule":"^https?://[^/]*/admin/account/security/advanced/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":"[data-garden-id=\"tabs.tabpanel\"]:nth-child(5) \u003e .packages-core-components-TabContent-TabContent-contentWrapper \u003e .packages-security-components-shared-Security-tabContent \u003e .packages-security-components-shared-Section-Section-content:nth-child(1)","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/1tgZHsZWqUpjBnNP_ORtcAae8to/AxuVOVarSDakplUrgHtmyjYCVrc.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/1tgZHsZWqUpjBnNP_ORtcAae8to/c0m1Gmf77Phr6lpt0pwWthC8Cz0.dom.json?sha256=bESeyEzGt3UiEsPEHoRTURCv_evT2FAOv9_ORu5BT2Y","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/1tgZHsZWqUpjBnNP_ORtcAae8to/gaOzI5ZM2hZqAjlqC0dKCSxi0JI.dom.jsonp?sha256=hiaU7uuXETehT32x-07IYRyqR00FwIwOd_D4V1fmucc","rank":1,"advanceMethod":"button","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"parent","isAutoFocus":true,"layoutDir":"right","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1691008985667,"resetAt":1691009057753,"hideCredits":true},{"id":"uzOtNLdhnuYUmaF5_PWm_EvP_2A","guideId":"vzAHCcxw4bqGC867-wmkSar9siY","templateId":"building-block-guide","type":"building-block","pageId":"w1CMtI-E-Mjacj0zzOAuKYqLeFc","regexUrlRule":"^https?://[^/]*/admin/account/security/advanced/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":"[data-test-id=\"security-accassump-expiry\"]","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/uzOtNLdhnuYUmaF5_PWm_EvP_2A/-J9R6AwMv7NjkqkniHX1ZPQiqCs.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/uzOtNLdhnuYUmaF5_PWm_EvP_2A/0Qs6PZsetyrR9LfPBdFvWUXICMw.dom.json?sha256=QsSuK9PzSEsukAdSIuJwE5Gv_GmzblIHQ_fy2iJbH6I","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/uzOtNLdhnuYUmaF5_PWm_EvP_2A/D_3ygHnai_ez87aXtbt2GaWZtD0.dom.jsonp?sha256=N-j47uKta1JAyS2OxnhF4f0zhETCJVSNJa6sTtRyMy8","rank":2,"advanceMethod":"button","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":false,"layoutDir":"auto","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1691008985692,"resetAt":1691009057753,"hideCredits":true},{"id":"VDATM4_maQx4d5b9VGFrgwO-sOM","guideId":"vzAHCcxw4bqGC867-wmkSar9siY","templateId":"building-block-guide","type":"building-block","pageId":"w1CMtI-E-Mjacj0zzOAuKYqLeFc","regexUrlRule":"^https?://[^/]*/admin/account/security/advanced/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":"[data-test-id=\"account-assumption-save-button\"]","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/VDATM4_maQx4d5b9VGFrgwO-sOM/2jmj7l5rSw0yVb_vlWAYkK_YBwk","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/VDATM4_maQx4d5b9VGFrgwO-sOM/bMFuviMoapRQOarreiZmjUreulI.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/VDATM4_maQx4d5b9VGFrgwO-sOM/8T4fqfbw-sjooM_1407tYoShSmQ.dom.json?sha256=1dLl4Afhqn_hRVG8SLwAhjRqgtjE_KZwK68Ugj5tlBM","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/VDATM4_maQx4d5b9VGFrgwO-sOM/eUVJMBnUlg9JyyZp6XpWEXjVCO8.dom.jsonp?sha256=iSSI0-UGfTfLAm7CpZZv0r0kiGLQvSbMcDtpZX-ee2w","rank":3,"advanceMethod":"button","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"auto","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1691009684849,"resetAt":1691009057753,"hideCredits":true},{"id":"6Guxpk0WXw2RflOvO2H9woksh08","guideId":"vzAHCcxw4bqGC867-wmkSar9siY","templateId":"building-block-guide","type":"","elementPathRule":"","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/6Guxpk0WXw2RflOvO2H9woksh08/mhGY6pDuNcOMLWzeX3-HU4_JnUA","contentUrlCss":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/6Guxpk0WXw2RflOvO2H9woksh08/W_WykPoeBpdtsDIdVRdKxpzlIwU.guide.css?sha256=VoUoBQ6r8um6QPe2UWSQwcD9dM6W-lIEJIja63btN_s","contentUrlJs":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/6Guxpk0WXw2RflOvO2H9woksh08/UE7xT8VT_zGldXGIbtHW6fwukWg.guide.js?sha256=TE7OlNZpsOA-OcuF9uW-NJGTJbTw4oX7igs-Vc_UXk4","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/6Guxpk0WXw2RflOvO2H9woksh08/mWxQmqSsCrWLbLVmoEbEVPviX4g.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/6Guxpk0WXw2RflOvO2H9woksh08/gJbB_k9vM8NO7JRDdjCnD8FiQyY.dom.json?sha256=luI1QKr8FOZkQLBym1Y8ViD624190LKksq5pasRlCkE","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/vzAHCcxw4bqGC867-wmkSar9siY/6Guxpk0WXw2RflOvO2H9woksh08/7ruqgAsyIfpWGgdS9ltml6uLqL8.dom.jsonp?sha256=OHZgNRdJZaX7skQhRQxojvzaDRdJd7A5rXO8a2yzSMg","rank":4,"advanceMethod":"","attributes":{"advanceActions":null,"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1691009757895,"resetAt":1691009057753,"hideCredits":true}],"guideDismissCount":0},{"createdByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"createdAt":1678737838968,"lastUpdatedByUser":{"id":"","username":"","first":"","last":"","role":0,"userType":"","hasLoggedIn":false},"lastUpdatedAt":1704999330760,"appId":-323232,"id":"wKyKYyy0cF47rE0xi_FQrmEitq4","name":"23_03_13_SelfServiceTeam_CreateAView","description":"Launching steps from the Zbot for how to \"create a view\" in the admin center (permalink launch) ","state":"public","emailState":"","launchMethod":"api","isMultiStep":true,"isTraining":false,"attributes":{"capping":{"maxImpressions":1,"maxSessionImpressions":1},"dates":{"bg":"мар 13, 2023","ca":"març 13, 2023","cs":"bře 13, 2023","da":"mar 13, 2023","de":"März 13, 2023","de-AT":"März 13, 2023","de-CH":"März 13, 2023","el":"Μαρ 13, 2023","en":"Mar 13, 2023","en-AU":"Mar 13, 2023","en-CA":"Mar 13, 2023","en-GB":"Mar 13, 2023","en-IE":"Mar 13, 2023","en-NZ":"Mar 13, 2023","en-US":"Mar 13, 2023","es":"mar. 13, 2023","es-419":"mar. 13, 2023","es-CL":"mar. 13, 2023","es-ES":"mar. 13, 2023","es-MX":"mar. 13, 2023","et":"märts 13, 2023","fi":"maalis 13, 2023","fr":"mars 13, 2023","fr-BE":"mars 13, 2023","fr-CA":"mars 13, 2023","fr-CH":"mars 13, 2023","fr-FR":"mars 13, 2023","hi":"मार्च १३, २०२३","hr":"ožu. 13, 2023","hu":"márc 13, 2023","id":"Mar 13, 2023","it":"mar 13, 2023","ja":"3月 13, 2023","ko":"3월 13, 2023","ms":"Mac 13, 2023","nl":"mrt. 13, 2023","nl-BE":"mrt. 13, 2023","no":"Mar 13, 2023","pl":"mar 13, 2023","pt":"Mar 13, 2023","pt-BR":"Mar 13, 2023","pt-PT":"Mar 13, 2023","ro":"mart. 13, 2023","ru":"март 13, 2023","sk":"mar 13, 2023","sl":"mar. 13, 2023","sv":"mar 13, 2023","th":"มี.ค. 13, 2023","tr":"Mar 13, 2023","uk":"бер 13, 2023","vi":"Th03 13, 2023","zh-CN":"3月 13, 2023","zh-HK":"3月 13, 2023","zh-TW":"3月 13, 2023"},"device":{"type":"desktop"},"priority":2889,"sharedServiceVersion":"4.3.10","type":"building-block"},"audience":[{"source":{"visitors":null}},{"eval":{"accountId":"metadata.auto.accountids"}},{"unwind":{"field":"accountId","keepEmpty":true}},{"select":{"visitorId":"visitorId"}}],"audienceUiHint":{"filters":[{"kind":"visitor","segmentId":"everyone"}]},"authoredLanguage":"en-US","recurrence":0,"recurrenceEligibilityWindow":0,"resetAt":1683743038003,"publishedAt":1683743047951,"publishedEver":true,"currentFirstEligibleToBeSeenAt":1678739065439,"conversion":{"itemType":"Page","itemId":"Lbp8XwH2xZH81KjuTxfxUk-bHpM","attributionWindow":10800000},"isTopLevel":false,"isModule":false,"editorType":"visualDesignStudio","dependentMetadata":[],"language":"en-US","steps":[{"id":"kX-wZzUwKjhfxjAZENwB2UP01Bs","guideId":"wKyKYyy0cF47rE0xi_FQrmEitq4","templateId":"building-block-guide","type":"building-block","pageId":"kalWBm5SaLgwM3vRbuFgSXhXY3Y","regexUrlRule":"^https?://[^/]*/support/admin/views/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":".section__cta","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/kX-wZzUwKjhfxjAZENwB2UP01Bs/JVZkLUwpzC0GEi4XIXsTF-sehMg.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/kX-wZzUwKjhfxjAZENwB2UP01Bs/r1n9k4V2Lg-KO6cdwPSXPsXEq84.dom.json?sha256=5QctX-Wm8bNl2V75amAxg5hcwIrGUCyRAKtl2_SM92g","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/kX-wZzUwKjhfxjAZENwB2UP01Bs/KU0g4kyBArt4DT_cEY6tIJBgb6g.dom.jsonp?sha256=06d_AxzCgsm9LgnKY20zWncb7C2FdQmzSyp80f9FO7M","rank":0,"advanceMethod":"button","attributes":{"advanceActions":{"elementClick":true,"elementHover":false},"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1684179554487,"resetAt":1683743038003,"hideCredits":true},{"id":"LzqJiUSoi2A6CSU5ibsf2T-ZYLg","guideId":"wKyKYyy0cF47rE0xi_FQrmEitq4","templateId":"building-block-guide","type":"building-block","pageId":"Lbp8XwH2xZH81KjuTxfxUk-bHpM","regexUrlRule":"^https?://[^/]*/admin/workspaces/agent-workspace/views/new/?(?:;[^#]*)?(?:\\?[^#]*)?(?:#.*)?$","elementPathRule":"","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/LzqJiUSoi2A6CSU5ibsf2T-ZYLg/OluEQJnsLW_DM3kbk4XHmjQAiWA","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/LzqJiUSoi2A6CSU5ibsf2T-ZYLg/A8iV4prfNNaPHSqa1eKoqWULM90.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/LzqJiUSoi2A6CSU5ibsf2T-ZYLg/er9337uifct5x4w7RlQmQOOT2Js.dom.json?sha256=QXAwv3hcHuRP0gXAIUfHzytsMSfZCB1KFyiaquiQPOI","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/LzqJiUSoi2A6CSU5ibsf2T-ZYLg/4FepYgolzdOUpd3hzHCHf-Xa65Y.dom.jsonp?sha256=mZ4QVXPm-j_FT7VDHTqz3Yzryp_Y5G4qG1TL0L6zsZM","rank":2,"advanceMethod":"button","attributes":{"advanceActions":null,"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"layoutDir":"auto","themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1684180061917,"resetAt":1683743038003,"hideCredits":true},{"id":"IACImM1P1Q0m2jLAtR6VtthNxEI","guideId":"wKyKYyy0cF47rE0xi_FQrmEitq4","templateId":"building-block-guide","type":"","elementPathRule":"[data-test-id=\"submit-button\"]","triggerElementPathRule":"","confirmationElementPathRule":"","contentType":"text/html; charset=utf-8","contentUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/IACImM1P1Q0m2jLAtR6VtthNxEI/BB8C6i7EvRSPWTV4K4dSeBVXxls","contentUrlCss":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/IACImM1P1Q0m2jLAtR6VtthNxEI/uW6plk4jslXb3g7ZNXJeU6XVoeo.guide.css?sha256=456PjM1uaQuqRSTiscBn5SoENR4Bo4DgM8Nd1nk3oIY","contentUrlJs":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/IACImM1P1Q0m2jLAtR6VtthNxEI/VwOUsxavgEE05yi-dtTcHTwL60U.guide.js?sha256=1gSg_RWJBKh0pBVmG1m3id1FKA_Oqb1yn91tWbrygRY","buildingBlocksUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/IACImM1P1Q0m2jLAtR6VtthNxEI/tkQFBfOBsJUI2XcF7YakfZq-uXc.buildingBlocks.json","domUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/IACImM1P1Q0m2jLAtR6VtthNxEI/8wrJh22RSj5hRw_rk58mnjpuFHo.dom.json?sha256=rltuklIcblKXjWh3Z8GR-Ytonu9drYk6NnXs3JUwBa4","domJsonpUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide-content/wKyKYyy0cF47rE0xi_FQrmEitq4/IACImM1P1Q0m2jLAtR6VtthNxEI/aTz7rPg0kp0L32ST1DMpeNiibBQ.dom.jsonp?sha256=l3uw2ZP_zgJwg8ZhNrVLacrNl3mr6RCaR56zPzRLSpo","rank":3,"advanceMethod":"","attributes":{"advanceActions":null,"blockOutUI":{"additionalElements":"","enabled":false,"padding":{"bottom":0,"left":0,"right":0,"top":0}},"elementSelectionType":"suggested","isAutoFocus":true,"themeId":"-EcfJzqRaP3Gk1OWKmDxlqJsoZ0"},"lastUpdatedAt":1680633453349,"resetAt":1683743038003,"hideCredits":true}],"guideDismissCount":0}],"normalizedUrl":"http://www.zendesk.es/company/agreements-and-terms/privacy-notice","lastGuideStepSeen":{"isMultiStep":false,"state":""},"guideWidget":{"enabled":false,"hidePoweredBy":true,"data":{"guideCssUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide.-323232.1602106151548.css","onboarding":false}},"guideCssUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/guide.-323232.1602106151548.css","throttling":{"count":1,"enabled":true,"interval":1,"unit":"Day"},"autoOrdering":[],"globalJsUrl":"https://pendo-static-5077612317114368.storage.googleapis.com/global-guide.js/2jmj7l5rSw0yVb_vlWAYkK_YBwk","segmentFlags":[],"designerEnabled":false,"features":null,"id":"5","preventCodeInjection":false});ynchronous requests */
      if (!this.options.asynchronous && this.transport.overrideMimeType)
        this.onStateChange();

    }
    catch (e) {
      this.dispatchException(e);
    }
  },

  onStateChange: function() {
    var readyState = this.transport.readyState;
    if (readyState > 1 && !((readyState == 4) && this._complete))
      this.respondToReadyState(this.transport.readyState);
  },

  setRequestHeaders: function() {
    var headers = {
      'X-Requested-With': 'XMLHttpRequest',
      'X-Prototype-Version': Prototype.Version,
      'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'
    };

    if (this.method == 'post') {
      headers['Content-type'] = this.options.contentType +
        (this.options.encoding ? '; charset=' + this.options.encoding : '');

      /* Force "Connection: close" for older Mozilla browsers to work
       * around a bug where XMLHttpRequest sends an incorrect
       * Content-length header. See Mozilla Bugzilla #246651.
       */
      if (this.transport.overrideMimeType &&
          (navigator.userAgent.match(/Gecko\/(\d{4})/) || [0,2005])[1] < 2005)
            headers['Connection'] = 'close';
    }

    if (typeof this.options.requestHeaders == 'object') {
      var extras = this.options.requestHeaders;

      if (Object.isFunction(extras.push))
        for (var i = 0, length = extras.length; i < length; i += 2)
          headers[extras[i]] = extras[i+1];
      else
        $H(extras).each(function(pair) { headers[pair.key] = pair.value });
    }

    for (var name in headers)
      this.transport.setRequestHeader(name, headers[name]);
  },

  success: function() {
    var status = this.getStatus();
    return !status || (status >= 200 && status < 300) || status == 304;
  },

  getStatus: function() {
    try {
      if (this.transport.status === 1223) return 204;
      return this.transport.status || 0;
    } catch (e) { return 0 }
  },

  respondToReadyState: function(readyState) {
    var state = Ajax.Request.Events[readyState], response = new Ajax.Response(this);

    if (state == 'Complete') {
      try {
        this._complete = true;
        (this.options['on' + response.status]
         || this.options['on' + (this.success() ? 'Success' : 'Failure')]
         || Prototype.emptyFunction)(response, response.headerJSON);
      } catch (e) {
        this.dispatchException(e);
      }

      var contentType = response.getHeader('Content-type');
      if (this.options.evalJS == 'force'
          || (this.options.evalJS && this.isSameOrigin() && contentType
          && contentType.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i)))
        this.evalResponse();
    }

    try {
      (this.options['on' + state] || Prototype.emptyFunction)(response, response.headerJSON);
      Ajax.Responders.dispatch('on' + state, this, response, response.headerJSON);
    } catch (e) {
      this.dispatchException(e);
    }

    if (state == 'Complete') {
      this.transport.onreadystatechange = Prototype.emptyFunction;
    }
  },

  isSameOrigin: function() {
    var m = this.url.match(/^\s*https?:\/\/[^\/]*/);
    return !m || (m[0] == '#{protocol}//#{domain}#{port}'.interpolate({
      protocol: location.protocol,
      domain: document.domain,
      port: location.port ? ':' + location.port : ''
    }));
  },

  getHeader: function(name) {
    try {
      return this.transport.getResponseHeader(name) || null;
    } catch (e) { return null; }
  },

  evalResponse: function() {
    try {
      return eval((this.transport.responseText || '').unfilterJSON());
    } catch (e) {
      this.dispatchException(e);
    }
  },

  dispatchException: function(exception) {
    (this.options.onException || Prototype.emptyFunction)(this, exception);
    Ajax.Responders.dispatch('onException', this, exception);
  }
});

Ajax.Request.Events =
  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete'];








Ajax.Response = Class.create({
  initialize: function(request){
    this.request = request;
    var transport  = this.transport  = request.transport,
        readyState = this.readyState = transport.readyState;

    if ((readyState > 2 && !Prototype.Browser.IE) || readyState == 4) {
      this.status       = this.getStatus();
      this.statusText   = this.getStatusText();
      this.responseText = String.interpret(transport.responseText);
      this.headerJSON   = this._getHeaderJSON();
    }

    if (readyState == 4) {
      var xml = transport.responseXML;
      this.responseXML  = Object.isUndefined(xml) ? null : xml;
      this.responseJSON = this._getResponseJSON();
    }
  },

  status:      0,

  statusText: '',

  getStatus: Ajax.Request.prototype.getStatus,

  getStatusText: function() {
    try {
      return this.transport.statusText || '';
    } catch (e) { return '' }
  },

  getHeader: Ajax.Request.prototype.getHeader,

  getAllHeaders: function() {
    try {
      return this.getAllResponseHeaders();
    } catch (e) { return null }
  },

  getResponseHeader: function(name) {
    return this.transport.getResponseHeader(name);
  },

  getAllResponseHeaders: function() {
    return this.transport.getAllResponseHeaders();
  },

  _getHeaderJSON: function() {
    var json = this.getHeader('X-JSON');
    if (!json) return null;

    try {
      json = decodeURIComponent(escape(json));
    } catch(e) {
    }

    try {
      return json.evalJSON(this.request.options.sanitizeJSON ||
        !this.request.isSameOrigin());
    } catch (e) {
      this.request.dispatchException(e);
    }
  },

  _getResponseJSON: function() {
    var options = this.request.options;
    if (!options.evalJSON || (options.evalJSON != 'force' &&
      !(this.getHeader('Content-type') || '').include('application/json')) ||
        this.responseText.blank())
          return null;
    try {
      return this.responseText.evalJSON(options.sanitizeJSON ||
        !this.request.isSameOrigin());
    } catch (e) {
      this.request.dispatchException(e);
    }
  }
});

Ajax.Updater = Class.create(Ajax.Request, {
  initialize: function($super, container, url, options) {
    this.container = {
      success: (container.success || container),
      failure: (container.failure || (container.success ? null : container))
    };

    options = Object.clone(options);
    var onComplete = options.onComplete;
    options.onComplete = (function(response, json) {
      this.updateContent(response.responseText);
      if (Object.isFunction(onComplete)) onComplete(response, json);
    }).bind(this);

    $super(url, options);
  },

  updateContent: function(responseText) {
    var receiver = this.container[this.success() ? 'success' : 'failure'],
        options = this.options;

    if (!options.evalScripts) responseText = responseText.stripScripts();

    if (receiver = $(receiver)) {
      if (options.insertion) {
        if (Object.isString(options.insertion)) {
          var insertion = { }; insertion[options.insertion] = responseText;
          receiver.insert(insertion);
        }
        else options.insertion(receiver, responseText);
      }
      else receiver.update(responseText);
    }
  }
});

Ajax.PeriodicalUpdater = Class.create(Ajax.Base, {
  initialize: function($super, container, url, options) {
    $super(options);
    this.onComplete = this.options.onComplete;

    this.frequency = (this.options.frequency || 2);
    this.decay = (this.options.decay || 1);

    this.updater = { };
    this.container = container;
    this.url = url;

    this.start();
  },

  start: function() {
    this.options.onComplete = this.updateComplete.bind(this);
    this.onTimerEvent();
  },

  stop: function() {
    this.updater.options.onComplete = undefined;
    clearTimeout(this.timer);
    (this.onComplete || Prototype.emptyFunction).apply(this, arguments);
  },

  updateComplete: function(response) {
    if (this.options.decay) {
      this.decay = (response.responseText == this.lastText ?
        this.decay * this.options.decay : 1);

      this.lastText = response.responseText;
    }
    this.timer = this.onTimerEvent.bind(this).delay(this.decay * this.frequency);
  },

  onTimerEvent: function() {
    this.updater = new Ajax.Updater(this.container, this.url, this.options);
  }
});

(function(GLOBAL) {

  var UNDEFINED;
  var SLICE = Array.prototype.slice;

  var DIV = document.createElement('div');


  function $(element) {
    if (arguments.length > 1) {
      for (var i = 0, elements = [], length = arguments.length; i < length; i++)
        elements.push($(arguments[i]));
      return elements;
    }

    if (Object.isString(element))
      element = document.getElementById(element);
    return Element.extend(element);
  }

  GLOBAL.$ = $;


  if (!GLOBAL.Node) GLOBAL.Node = {};

  if (!GLOBAL.Node.ELEMENT_NODE) {
    Object.extend(GLOBAL.Node, {
      ELEMENT_NODE:                1,
      ATTRIBUTE_NODE:              2,
      TEXT_NODE:                   3,
      CDATA_SECTION_NODE:          4,
      ENTITY_REFERENCE_NODE:       5,
      ENTITY_NODE:                 6,
      PROCESSING_INSTRUCTION_NODE: 7,
      COMMENT_NODE:                8,
      DOCUMENT_NODE:               9,
      DOCUMENT_TYPE_NODE:         10,
      DOCUMENT_FRAGMENT_NODE:     11,
      NOTATION_NODE:              12
    });
  }

  var ELEMENT_CACHE = {};

  function shouldUseCreationCache(tagName, attributes) {
    if (tagName === 'select') return false;
    if ('type' in attributes) return false;
    return true;
  }

  var HAS_EXTENDED_CREATE_ELEMENT_SYNTAX = (function(){
    try {
      var el = document.createElement('<input name="x">');
      return el.tagName.toLowerCase() === 'input' && el.name === 'x';
    }
    catch(err) {
      return false;
    }
  })();


  var oldElement = GLOBAL.Element;
  function Element(tagName, attributes) {
    attributes = attributes || {};
    tagName = tagName.toLowerCase();

    if (HAS_EXTENDED_CREATE_ELEMENT_SYNTAX && attributes.name) {
      tagName = '<' + tagName + ' name="' + attributes.name + '">';
      delete attributes.name;
      return Element.writeAttribute(document.createElement(tagName), attributes);
    }

    if (!ELEMENT_CACHE[tagName])
      ELEMENT_CACHE[tagName] = Element.extend(document.createElement(tagName));

    var node = shouldUseCreationCache(tagName, attributes) ?
     ELEMENT_CACHE[tagName].cloneNode(false) : document.createElement(tagName);

    return Element.writeAttribute(node, attributes);
  }

  GLOBAL.Element = Element;

  Object.extend(GLOBAL.Element, oldElement || {});
  if (oldElement) GLOBAL.Element.prototype = oldElement.prototype;

  Element.Methods = { ByTag: {}, Simulated: {} };

  var methods = {};

  var INSPECT_ATTRIBUTES = { id: 'id', className: 'class' };
  function inspect(element) {
    element = $(element);
    var result = '<' + element.tagName.toLowerCase();

    var attribute, value;
    for (var property in INSPECT_ATTRIBUTES) {
      attribute = INSPECT_ATTRIBUTES[property];
      value = (element[property] || '').toString();
      if (value) result += ' ' + attribute + '=' + value.inspect(true);
    }

    return result + '>';
  }

  methods.inspect = inspect;


  function visible(element) {
    return $(element).style.display !== 'none';
  }

  function toggle(element, bool) {
    element = $(element);
    if (Object.isUndefined(bool))
      bool = !Element.visible(element);
    Element[bool ? 'show' : 'hide'](element);

    return element;
  }

  function hide(element) {
    element = $(element);
    element.style.display = 'none';
    return element;
  }

  function show(element) {
    element = $(element);
    element.style.display = '';
    return element;
  }


  Object.extend(methods, {
    visible: visible,
    toggle:  toggle,
    hide:    hide,
    show:    show
  });


  function remove(element) {
    element = $(element);
    element.parentNode.removeChild(element);
    return element;
  }

  var SELECT_ELEMENT_INNERHTML_BUGGY = (function(){
    var el = document.createElement("select"),
        isBuggy = true;
    el.innerHTML = "<option value=\"test\">test</option>";
    if (el.options && el.options[0]) {
      isBuggy = el.options[0].nodeName.toUpperCase() !== "OPTION";
    }
    el = null;
    return isBuggy;
  })();

  var TABLE_ELEMENT_INNERHTML_BUGGY = (function(){
    try {
      var el = document.createElement("table");
      if (el && el.tBodies) {
        el.innerHTML = "<tbody><tr><td>test</td></tr></tbody>";
        var isBuggy = typeof el.tBodies[0] == "undefined";
        el = null;
        return isBuggy;
      }
    } catch (e) {
      return true;
    }
  })();

  var LINK_ELEMENT_INNERHTML_BUGGY = (function() {
    try {
      var el = document.createElement('div');
      el.innerHTML = "<link />";
      var isBuggy = (el.childNodes.length === 0);
      el = null;
      return isBuggy;
    } catch(e) {
      return true;
    }
  })();

  var ANY_INNERHTML_BUGGY = SELECT_ELEMENT_INNERHTML_BUGGY ||
   TABLE_ELEMENT_INNERHTML_BUGGY || LINK_ELEMENT_INNERHTML_BUGGY;

  var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING = (function () {
    var s = document.createElement("script"),
        isBuggy = false;
    try {
      s.appendChild(document.createTextNode(""));
      isBuggy = !s.firstChild ||
        s.firstChild && s.firstChild.nodeType !== 3;
    } catch (e) {
      isBuggy = true;
    }
    s = null;
    return isBuggy;
  })();

  function update(element, content) {
    element = $(element);

    var descendants = element.getElementsByTagName('*'),
     i = descendants.length;
    while (i--) purgeElement(descendants[i]);

    if (content && content.toElement)
      content = content.toElement();

    if (Object.isElement(content))
      return element.update().insert(content);


    content = Object.toHTML(content);
    var tagName = element.tagName.toUpperCase();

    if (tagName === 'SCRIPT' && SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING) {
      element.text = content;
      return element;
    }

    if (ANY_INNERHTML_BUGGY) {
      if (tagName in INSERTION_TRANSLATIONS.tags) {
        while (element.firstChild)
          element.removeChild(element.firstChild);

        var nodes = getContentFromAnonymousElement(tagName, content.stripScripts());
        for (var i = 0, node; node = nodes[i]; i++)
          element.appendChild(node);

      } else if (LINK_ELEMENT_INNERHTML_BUGGY && Object.isString(content) && content.indexOf('<link') > -1) {
        while (element.firstChild)
          element.removeChild(element.firstChild);

        var nodes = getContentFromAnonymousElement(tagName,
         content.stripScripts(), true);

        for (var i = 0, node; node = nodes[i]; i++)
          element.appendChild(node);
      } else {
        element.innerHTML = content.stripScripts();
      }
    } else {
      element.innerHTML = content.stripScripts();
    }

    content.evalScripts.bind(content).defer();
    return element;
  }

  function replace(element, content) {
    element = $(element);

    if (content && content.toElement) {
      content = content.toElement();
    } else if (!Object.isElement(content)) {
      content = Object.toHTML(content);
      var range = element.ownerDocument.createRange();
      range.selectNode(element);
      content.evalScripts.bind(content).defer();
      content = range.createContextualFragment(content.stripScripts());
    }

    element.parentNode.replaceChild(content, element);
    return element;
  }

  var INSERTION_TRANSLATIONS = {
    before: function(element, node) {
      element.parentNode.insertBefore(node, element);
    },
    top: function(element, node) {
      element.insertBefore(node, element.firstChild);
    },
    bottom: function(element, node) {
      element.appendChild(node);
    },
    after: function(element, node) {
      element.parentNode.insertBefore(node, element.nextSibling);
    },

    tags: {
      TABLE:  ['<table>',                '</table>',                   1],
      TBODY:  ['<table><tbody>',         '</tbody></table>',           2],
      TR:     ['<table><tbody><tr>',     '</tr></tbody></table>',      3],
      TD:     ['<table><tbody><tr><td>', '</td></tr></tbody></table>', 4],
      SELECT: ['<select>',               '</select>',                  1]
    }
  };

  var tags = INSERTION_TRANSLATIONS.tags;

  Object.extend(tags, {
    THEAD: tags.TBODY,
    TFOOT: tags.TBODY,
    TH:    tags.TD
  });

  function replace_IE(element, content) {
    element = $(element);
    if (content && content.toElement)
      content = content.toElement();
    if (Object.isElement(content)) {
      element.parentNode.replaceChild(content, element);
      return element;
    }

    content = Object.toHTML(content);
    var parent = element.parentNode, tagName = parent.tagName.toUpperCase();

    if (tagName in INSERTION_TRANSLATIONS.tags) {
      var nextSibling = Element.next(element);
      var fragments = getContentFromAnonymousElement(
       tagName, content.stripScripts());

      parent.removeChild(element);

      var iterator;
      if (nextSibling)
        iterator = function(node) { parent.insertBefore(node, nextSibling) };
      else
        iterator = function(node) { parent.appendChild(node); }

      fragments.each(iterator);
    } else {
      element.outerHTML = content.stripScripts();
    }

    content.evalScripts.bind(content).defer();
    return element;
  }

  if ('outerHTML' in document.documentElement)
    replace = replace_IE;

  function isContent(content) {
    if (Object.isUndefined(content) || content === null) return false;

    if (Object.isString(content) || Object.isNumber(content)) return true;
    if (Object.isElement(content)) return true;
    if (content.toElement || content.toHTML) return true;

    return false;
  }

  function insertContentAt(element, content, position) {
    position   = position.toLowerCase();
    var method = INSERTION_TRANSLATIONS[position];

    if (content && content.toElement) content = content.toElement();
    if (Object.isElement(content)) {
      method(element, content);
      return element;
    }

    content = Object.toHTML(content);
    var tagName = ((position === 'before' || position === 'after') ?
     element.parentNode : element).tagName.toUpperCase();

    var childNodes = getContentFromAnonymousElement(tagName, content.stripScripts());

    if (position === 'top' || position === 'after') childNodes.reverse();

    for (var i = 0, node; node = childNodes[i]; i++)
      method(element, node);

    content.evalScripts.bind(content).defer();
  }

  function insert(element, insertions) {
    element = $(element);

    if (isContent(insertions))
      insertions = { bottom: insertions };

    for (var position in insertions)
      insertContentAt(element, insertions[position], position);

    return element;
  }

  function wrap(element, wrapper, attributes) {
    element = $(element);

    if (Object.isElement(wrapper)) {
      $(wrapper).writeAttribute(attributes || {});
    } else if (Object.isString(wrapper)) {
      wrapper = new Element(wrapper, attributes);
    } else {
      wrapper = new Element('div', wrapper);
    }

    if (element.parentNode)
      element.parentNode.replaceChild(wrapper, element);

    wrapper.appendChild(element);

    return wrapper;
  }

  function cleanWhitespace(element) {
    element = $(element);
    var node = element.firstChild;

    while (node) {
      var nextNode = node.nextSibling;
      if (node.nodeType === Node.TEXT_NODE && !/\S/.test(node.nodeValue))
        element.removeChild(node);
      node = nextNode;
    }
    return element;
  }

  function empty(element) {
    return $(element).innerHTML.blank();
  }

  function getContentFromAnonymousElement(tagName, html, force) {
    var t = INSERTION_TRANSLATIONS.tags[tagName], div = DIV;

    var workaround = !!t;
    if (!workaround && force) {
      workaround = true;
      t = ['', '', 0];
    }

    if (workaround) {
      div.innerHTML = '&#160;' + t[0] + html + t[1];
      div.removeChild(div.firstChild);
      for (var i = t[2]; i--; )
        div = div.firstChild;
    } else {
      div.innerHTML = html;
    }

    return $A(div.childNodes);
  }

  function clone(element, deep) {
    if (!(element = $(element))) return;
    var clone = element.cloneNode(deep);
    if (!HAS_UNIQUE_ID_PROPERTY) {
      clone._prototypeUID = UNDEFINED;
      if (deep) {
        var descendants = Element.select(clone, '*'),
         i = descendants.length;
        while (i--)
          descendants[i]._prototypeUID = UNDEFINED;
      }
    }
    return Element.extend(clone);
  }

  function purgeElement(element) {
    var uid = getUniqueElementID(element);
    if (uid) {
      Element.stopObserving(element);
      if (!HAS_UNIQUE_ID_PROPERTY)
        element._prototypeUID = UNDEFINED;
      delete Element.Storage[uid];
    }
  }

  function purgeCollection(elements) {
    var i = elements.length;
    while (i--)
      purgeElement(elements[i]);
  }

  function purgeCollection_IE(elements) {
    var i = elements.length, element, uid;
    while (i--) {
      element = elements[i];
      uid = getUniqueElementID(element);
      delete Element.Storage[uid];
      delete Event.cache[uid];
    }
  }

  if (HAS_UNIQUE_ID_PROPERTY) {
    purgeCollection = purgeCollection_IE;
  }


  function purge(element) {
    if (!(element = $(element))) return;
    purgeElement(element);

    var descendants = element.getElementsByTagName('*'),
     i = descendants.length;

    while (i--) purgeElement(descendants[i]);

    return null;
  }

  Object.extend(methods, {
    remove:  remove,
    update:  update,
    replace: replace,
    insert:  insert,
    wrap:    wrap,
    cleanWhitespace: cleanWhitespace,
    empty:   empty,
    clone:   clone,
    purge:   purge
  });



  function recursivelyCollect(element, property, maximumLength) {
    element = $(element);
    maximumLength = maximumLength || -1;
    var elements = [];

    while (element = element[property]) {
      if (element.nodeType === Node.ELEMENT_NODE)
        elements.push(Element.extend(element));

      if (elements.length === maximumLength) break;
    }

    return elements;
  }


  function ancestors(element) {
    return recursivelyCollect(element, 'parentNode');
  }

  function descendants(element) {
    return Element.select(element, '*');
  }

  function firstDescendant(element) {
    element = $(element).firstChild;
    while (element && element.nodeType !== Node.ELEMENT_NODE)
      element = element.nextSibling;

    return $(element);
  }

  function immediateDescendants(element) {
    var results = [], child = $(element).firstChild;

    while (child) {
      if (child.nodeType === Node.ELEMENT_NODE)
        results.push(Element.extend(child));

      child = child.nextSibling;
    }

    return results;
  }

  function previousSiblings(element) {
    return recursivelyCollect(element, 'previousSibling');
  }

  function nextSiblings(element) {
    return recursivelyCollect(element, 'nextSibling');
  }

  function siblings(element) {
    element = $(element);
    var previous = previousSiblings(element),
     next = nextSiblings(element);
    return previous.reverse().concat(next);
  }

  function match(element, selector) {
    element = $(element);

    if (Object.isString(selector))
      return Prototype.Selector.match(element, selector);

    return selector.match(element);
  }


  function _recursivelyFind(element, property, expression, index) {
    element = $(element), expression = expression || 0, index = index || 0;
    if (Object.isNumber(expression)) {
      index = expression, expression = null;
    }

    while (element = element[property]) {
      if (element.nodeType !== 1) continue;
      if (expression && !Prototype.Selector.match(element, expression))
        continue;
      if (--index >= 0) continue;

      return Element.extend(element);
    }
  }


  function up(element, expression, index) {
    element = $(element);

    if (arguments.length === 1) return $(element.parentNode);
    return _recursivelyFind(element, 'parentNode', expression, index);
  }

  function down(element, expression, index) {
    element = $(element), expression = expression || 0, index = index || 0;

    if (Object.isNumber(expression))
      index = expression, expression = '*';

    var node = Prototype.Selector.select(expression, element)[index];
    return Element.extend(node);
  }

  function previous(element, expression, index) {
    return _recursivelyFind(element, 'previousSibling', expression, index);
  }

  function next(element, expression, index) {
    return _recursivelyFind(element, 'nextSibling', expression, index);
  }

  function select(element) {
    element = $(element);
    var expressions = SLICE.call(arguments, 1).join(', ');
    return Prototype.Selector.select(expressions, element);
  }

  function adjacent(element) {
    element = $(element);
    var expressions = SLICE.call(arguments, 1).join(', ');
    var siblings = Element.siblings(element), results = [];
    for (var i = 0, sibling; sibling = siblings[i]; i++) {
      if (Prototype.Selector.match(sibling, expressions))
        results.push(sibling);
    }

    return results;
  }

  function descendantOf_DOM(element, ancestor) {
    element = $(element), ancestor = $(ancestor);
    while (element = element.parentNode)
      if (element === ancestor) return true;
    return false;
  }

  function descendantOf_contains(element, ancestor) {
    element = $(element), ancestor = $(ancestor);
    if (!ancestor.contains) return descendantOf_DOM(element, ancestor);
    return ancestor.contains(element) && ancestor !== element;
  }

  function descendantOf_compareDocumentPosition(element, ancestor) {
    element = $(element), ancestor = $(ancestor);
    return (element.compareDocumentPosition(ancestor) & 8) === 8;
  }

  var descendantOf;
  if (DIV.compareDocumentPosition) {
    descendantOf = descendantOf_compareDocumentPosition;
  } else if (DIV.contains) {
    descendantOf = descendantOf_contains;
  } else {
    descendantOf = descendantOf_DOM;
  }


  Object.extend(methods, {
    recursivelyCollect:   recursivelyCollect,
    ancestors:            ancestors,
    descendants:          descendants,
    firstDescendant:      firstDescendant,
    immediateDescendants: immediateDescendants,
    previousSiblings:     previousSiblings,
    nextSiblings:         nextSiblings,
    siblings:             siblings,
    match:                match,
    up:                   up,
    down:                 down,
    previous:             previous,
    next:                 next,
    select:               select,
    adjacent:             adjacent,
    descendantOf:         descendantOf,

    getElementsBySelector: select,

    childElements:         immediateDescendants
  });


  var idCounter = 1;
  function identify(element) {
    element = $(element);
    var id = Element.readAttribute(element, 'id');
    if (id) return id;

    do { id = 'anonymous_element_' + idCounter++ } while ($(id));

    Element.writeAttribute(element, 'id', id);
    return id;
  }


  function readAttribute(element, name) {
    return $(element).getAttribute(name);
  }

  function readAttribute_IE(element, name) {
    element = $(element);

    var table = ATTRIBUTE_TRANSLATIONS.read;
    if (table.values[name])
      return table.values[name](element, name);

    if (table.names[name]) name = table.names[name];

    if (name.include(':')) {
      if (!element.attributes || !element.attributes[name]) return null;
      return element.attributes[name].value;
    }

    return element.getAttribute(name);
  }

  function readAttribute_Opera(element, name) {
    if (name === 'title') return element.title;
    return element.getAttribute(name);
  }

  var PROBLEMATIC_ATTRIBUTE_READING = (function() {
    DIV.setAttribute('onclick', Prototype.emptyFunction);
    var value = DIV.getAttribute('onclick');
    var isFunction = (typeof value === 'function');
    DIV.removeAttribute('onclick');
    return isFunction;
  })();

  if (PROBLEMATIC_ATTRIBUTE_READING) {
    readAttribute = readAttribute_IE;
  } else if (Prototype.Browser.Opera) {
    readAttribute = readAttribute_Opera;
  }


  function writeAttribute(element, name, value) {
    element = $(element);
    var attributes = {}, table = ATTRIBUTE_TRANSLATIONS.write;

    if (typeof name === 'object') {
      attributes = name;
    } else {
      attributes[name] = Object.isUndefined(value) ? true : value;
    }

    for (var attr in attributes) {
      name = table.names[attr] || attr;
      value = attributes[attr];
      if (table.values[attr])
        name = table.values[attr](element, value);
      if (value === false || value === null)
        element.removeAttribute(name);
      else if (value === true)
        element.setAttribute(name, name);
      else element.setAttribute(name, value);
    }

    return element;
  }

  function hasAttribute(element, attribute) {
    attribute = ATTRIBUTE_TRANSLATIONS.has[attribute] || attribute;
    var node = $(element).getAttributeNode(attribute);
    return !!(node && node.specified);
  }

  GLOBAL.Element.Methods.Simulated.hasAttribute = hasAttribute;

  function classNames(element) {
    return new Element.ClassNames(element);
  }

  var regExpCache = {};
  function getRegExpForClassName(className) {
    if (regExpCache[className]) return regExpCache[className];

    var re = new RegExp("(^|\\s+)" + className + "(\\s+|$)");
    regExpCache[className] = re;
    return re;
  }

  function hasClassName(element, className) {
    if (!(element = $(element))) return;

    var elementClassName = element.className;

    if (elementClassName.length === 0) return false;
    if (elementClassName === className) return true;

    return getRegExpForClassName(className).test(elementClassName);
  }

  function addClassName(element, className) {
    if (!(element = $(element))) return;

    if (!hasClassName(element, className))
      element.className += (element.className ? ' ' : '') + className;

    return element;
  }

  function removeClassName(element, className) {
    if (!(element = $(element))) return;

    element.className = element.className.replace(
     getRegExpForClassName(className), ' ').strip();

    return element;
  }

  function toggleClassName(element, className, bool) {
    if (!(element = $(element))) return;

    if (Object.isUndefined(bool))
      bool = !hasClassName(element, className);

    var method = Element[bool ? 'addClassName' : 'removeClassName'];
    return method(element, className);
  }

  var ATTRIBUTE_TRANSLATIONS = {};

  var classProp = 'className', forProp = 'for';

  DIV.setAttribute(classProp, 'x');
  if (DIV.className !== 'x') {
    DIV.setAttribute('class', 'x');
    if (DIV.className === 'x')
      classProp = 'class';
  }

  var LABEL = document.createElement('label');
  LABEL.setAttribute(forProp, 'x');
  if (LABEL.htmlFor !== 'x') {
    LABEL.setAttribute('htmlFor', 'x');
    if (LABEL.htmlFor === 'x')
      forProp = 'htmlFor';
  }
  LABEL = null;

  function _getAttr(element, attribute) {
    return element.getAttribute(attribute);
  }

  function _getAttr2(element, attribute) {
    return element.getAttribute(attribute, 2);
  }

  function _getAttrNode(element, attribute) {
    var node = element.getAttributeNode(attribute);
    return node ? node.value : '';
  }

  function _getFlag(element, attribute) {
    return $(element).hasAttribute(attribute) ? attribute : null;
  }

  DIV.onclick = Prototype.emptyFunction;
  var onclickValue = DIV.getAttribute('onclick');

  var _getEv;

  if (String(onclickValue).indexOf('{') > -1) {
    _getEv = function(element, attribute) {
      var value = element.getAttribute(attribute);
      if (!value) return null;
      value = value.toString();
      value = value.split('{')[1];
      value = value.split('}')[0];
      return value.strip();
    };
  }
  else if (onclickValue === '') {
    _getEv = function(element, attribute) {
      var value = element.getAttribute(attribute);
      if (!value) return null;
      return value.strip();
    };
  }

  ATTRIBUTE_TRANSLATIONS.read = {
    names: {
      'class':     classProp,
      'className': classProp,
      'for':       forProp,
      'htmlFor':   forProp
    },

    values: {
      style: function(element) {
        return element.style.cssText.toLowerCase();
      },
      title: function(element) {
        return element.title;
      }
    }
  };

  ATTRIBUTE_TRANSLATIONS.write = {
    names: {
      className:   'class',
      htmlFor:     'for',
      cellpadding: 'cellPadding',
      cellspacing: 'cellSpacing'
    },

    values: {
      checked: function(element, value) {
        element.checked = !!value;
      },

      style: function(element, value) {
        element.style.cssText = value ? value : '';
      }
    }
  };

  ATTRIBUTE_TRANSLATIONS.has = { names: {} };

  Object.extend(ATTRIBUTE_TRANSLATIONS.write.names,
   ATTRIBUTE_TRANSLATIONS.read.names);

  var CAMEL_CASED_ATTRIBUTE_NAMES = $w('colSpan rowSpan vAlign dateTime ' +
   'accessKey tabIndex encType maxLength readOnly longDesc frameBorder');

  for (var i = 0, attr; attr = CAMEL_CASED_ATTRIBUTE_NAMES[i]; i++) {
    ATTRIBUTE_TRANSLATIONS.write.names[attr.toLowerCase()] = attr;
    ATTRIBUTE_TRANSLATIONS.has.names[attr.toLowerCase()]   = attr;
  }

  Object.extend(ATTRIBUTE_TRANSLATIONS.read.values, {
    href:        _getAttr2,
    src:         _getAttr2,
    type:        _getAttr,
    action:      _getAttrNode,
    disabled:    _getFlag,
    checked:     _getFlag,
    readonly:    _getFlag,
    multiple:    _getFlag,
    onload:      _getEv,
    onunload:    _getEv,
    onclick:     _getEv,
    ondblclick:  _getEv,
    onmousedown: _getEv,
    onmouseup:   _getEv,
    onmouseover: _getEv,
    onmousemove: _getEv,
    onmouseout:  _getEv,
    onfocus:     _getEv,
    onblur:      _getEv,
    onkeypress:  _getEv,
    onkeydown:   _getEv,
    onkeyup:     _getEv,
    onsubmit:    _getEv,
    onreset:     _getEv,
    onselect:    _getEv,
    onchange:    _getEv
  });


  Object.extend(methods, {
    identify:        identify,
    readAttribute:   readAttribute,
    writeAttribute:  writeAttribute,
    classNames:      classNames,
    hasClassName:    hasClassName,
    addClassName:    addClassName,
    removeClassName: removeClassName,
    toggleClassName: toggleClassName
  });


  function normalizeStyleName(style) {
    if (style === 'float' || style === 'styleFloat')
      return 'cssFloat';
    return style.camelize();
  }

  function normalizeStyleName_IE(style) {
    if (style === 'float' || style === 'cssFloat')
      return 'styleFloat';
    return style.camelize();
  }

  function setStyle(element, styles) {
    element = $(element);
    var elementStyle = element.style, match;

    if (Object.isString(styles)) {
      elementStyle.cssText += ';' + styles;
      if (styles.include('opacity')) {
        var opacity = styles.match(/opacity:\s*(\d?\.?\d*)/)[1];
        Element.setOpacity(element, opacity);
      }
      return element;
    }

    for (var property in styles) {
      if (property === 'opacity') {
        Element.setOpacity(element, styles[property]);
      } else {
        var value = styles[property];
        if (property === 'float' || property === 'cssFloat') {
          property = Object.isUndefined(elementStyle.styleFloat) ?
           'cssFloat' : 'styleFloat';
        }
        elementStyle[property] = value;
      }
    }

    return element;
  }


  function getStyle(element, style) {
    element = $(element);
    style = normalizeStyleName(style);

    var value = element.style[style];
    if (!value || value === 'auto') {
      var css = document.defaultView.getComputedStyle(element, null);
      value = css ? css[style] : null;
    }

    if (style === 'opacity') return value ? parseFloat(value) : 1.0;
    return value === 'auto' ? null : value;
  }

  function getStyle_Opera(element, style) {
    switch (style) {
      case 'height': case 'width':
        if (!Element.visible(element)) return null;

        var dim = parseInt(getStyle(element, style), 10);

        if (dim !== element['offset' + style.capitalize()])
          return dim + 'px';

        return Element.measure(element, style);

      default: return getStyle(element, style);
    }
  }

  function getStyle_IE(element, style) {
    element = $(element);
    style = normalizeStyleName_IE(style);

    var value = element.style[style];
    if (!value && element.currentStyle) {
      value = element.currentStyle[style];
    }

    if (style === 'opacity' && !STANDARD_CSS_OPACITY_SUPPORTED)
      return getOpacity_IE(element);

    if (value === 'auto') {
      if ((style === 'width' || style === 'height') && Element.visible(element))
        return Element.measure(element, style) + 'px';
      return null;
    }

    return value;
  }

  function stripAlphaFromFilter_IE(filter) {
    return (filter || '').replace(/alpha\([^\)]*\)/gi, '');
  }

  function hasLayout_IE(element) {
    if (!element.currentStyle.hasLayout)
      element.style.zoom = 1;
    return element;
  }

  var STANDARD_CSS_OPACITY_SUPPORTED = (function() {
    DIV.style.cssText = "opacity:.55";
    return /^0.55/.test(DIV.style.opacity);
  })();

  function setOpacity(element, value) {
    element = $(element);
    if (value == 1 || value === '') value = '';
    else if (value < 0.00001) value = 0;
    element.style.opacity = value;
    return element;
  }

  function setOpacity_IE(element, value) {
    if (STANDARD_CSS_OPACITY_SUPPORTED)
      return setOpacity(element, value);

    element = hasLayout_IE($(element));
    var filter = Element.getStyle(element, 'filter'),
     style = element.style;

    if (value == 1 || value === '') {
      filter = stripAlphaFromFilter_IE(filter);
      if (filter) style.filter = filter;
      else style.removeAttribute('filter');
      return element;
    }

    if (value < 0.00001) value = 0;

    style.filter = stripAlphaFromFilter_IE(filter) +
     'alpha(opacity=' + (value * 100) + ')';

    return element;
  }


  function getOpacity(element) {
    return Element.getStyle(element, 'opacity');
  }

  function getOpacity_IE(element) {
    if (STANDARD_CSS_OPACITY_SUPPORTED)
      return getOpacity(element);

    var filter = Element.getStyle(element, 'filter');
    if (filter.length === 0) return 1.0;
    var match = (filter || '').match(/alpha\(opacity=(.*)\)/);
    if (match[1]) return parseFloat(match[1]) / 100;
    return 1.0;
  }


  Object.extend(methods, {
    setStyle:   setStyle,
    getStyle:   getStyle,
    setOpacity: setOpacity,
    getOpacity: getOpacity
  });

  if ('styleFloat' in DIV.style) {
    methods.getStyle = getStyle_IE;
    methods.setOpacity = setOpacity_IE;
    methods.getOpacity = getOpacity_IE;
  }

  var UID = 0;

  GLOBAL.Element.Storage = { UID: 1 };

  function getUniqueElementID(element) {
    if (element === window) return 0;

    if (typeof element._prototypeUID === 'undefined')
      element._prototypeUID = Element.Storage.UID++;
    return element._prototypeUID;
  }

  function getUniqueElementID_IE(element) {
    if (element === window) return 0;
    if (element == document) return 1;
    return element.uniqueID;
  }

  var HAS_UNIQUE_ID_PROPERTY = ('uniqueID' in DIV);
  if (HAS_UNIQUE_ID_PROPERTY)
    getUniqueElementID = getUniqueElementID_IE;

  function getStorage(element) {
    if (!(element = $(element))) return;

    var uid = getUniqueElementID(element);

    if (!Element.Storage[uid])
      Element.Storage[uid] = $H();

    return Element.Storage[uid];
  }

  function store(element, key, value) {
    if (!(element = $(element))) return;
    var storage = getStorage(element);
    if (arguments.length === 2) {
      storage.update(key);
    } else {
      storage.set(key, value);
    }
    return element;
  }

  function retrieve(element, key, defaultValue) {
    if (!(element = $(element))) return;
    var storage = getStorage(element), value = storage.get(key);

    if (Object.isUndefined(value)) {
      storage.set(key, defaultValue);
      value = defaultValue;
    }

    return value;
  }


  Object.extend(methods, {
    getStorage: getStorage,
    store:      store,
    retrieve:   retrieve
  });


  var Methods = {}, ByTag = Element.Methods.ByTag,
   F = Prototype.BrowserFeatures;

  if (!F.ElementExtensions && ('__proto__' in DIV)) {
    GLOBAL.HTMLElement = {};
    GLOBAL.HTMLElement.prototype = DIV['__proto__'];
    F.ElementExtensions = true;
  }

  function checkElementPrototypeDeficiency(tagName) {
    if (typeof window.Element === 'undefined') return false;
    var proto = window.Element.prototype;
    if (proto) {
      var id = '_' + (Math.random() + '').slice(2),
       el = document.createElement(tagName);
      proto[id] = 'x';
      var isBuggy = (el[id] !== 'x');
      delete proto[id];
      el = null;
      return isBuggy;
    }

    return false;
  }

  var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY =
   checkElementPrototypeDeficiency('object');

  function extendElementWith(element, methods) {
    for (var property in methods) {
      var value = methods[property];
      if (Object.isFunction(value) && !(property in element))
        element[property] = value.methodize();
    }
  }

  var EXTENDED = {};
  function elementIsExtended(element) {
    var uid = getUniqueElementID(element);
    return (uid in EXTENDED);
  }

  function extend(element) {
    if (!element || elementIsExtended(element)) return element;
    if (element.nodeType !== Node.ELEMENT_NODE || element == window)
      return element;

    var methods = Object.clone(Methods),
     tagName = element.tagName.toUpperCase();

    if (ByTag[tagName]) Object.extend(methods, ByTag[tagName]);

    extendElementWith(element, methods);
    EXTENDED[getUniqueElementID(element)] = true;
    return element;
  }

  function extend_IE8(element) {
    if (!element || elementIsExtended(element)) return element;

    var t = element.tagName;
    if (t && (/^(?:object|applet|embed)$/i.test(t))) {
      extendElementWith(element, Element.Methods);
      extendElementWith(element, Element.Methods.Simulated);
      extendElementWith(element, Element.Methods.ByTag[t.toUpperCase()]);
    }

    return element;
  }

  if (F.SpecificElementExtensions) {
    extend = HTMLOBJECTELEMENT_PROTOTYPE_BUGGY ? extend_IE8 : Prototype.K;
  }

  function addMethodsToTagName(tagName, methods) {
    tagName = tagName.toUpperCase();
    if (!ByTag[tagName]) ByTag[tagName] = {};
    Object.extend(ByTag[tagName], methods);
  }

  function mergeMethods(destination, methods, onlyIfAbsent) {
    if (Object.isUndefined(onlyIfAbsent)) onlyIfAbsent = false;
    for (var property in methods) {
      var value = methods[property];
      if (!Object.isFunction(value)) continue;
      if (!onlyIfAbsent || !(property in destination))
        destination[property] = value.methodize();
    }
  }

  function findDOMClass(tagName) {
    var klass;
    var trans = {
      "OPTGROUP": "OptGroup", "TEXTAREA": "TextArea", "P": "Paragraph",
      "FIELDSET": "FieldSet", "UL": "UList", "OL": "OList", "DL": "DList",
      "DIR": "Directory", "H1": "Heading", "H2": "Heading", "H3": "Heading",
      "H4": "Heading", "H5": "Heading", "H6": "Heading", "Q": "Quote",
      "INS": "Mod", "DEL": "Mod", "A": "Anchor", "IMG": "Image", "CAPTION":
      "TableCaption", "COL": "TableCol", "COLGROUP": "TableCol", "THEAD":
      "TableSection", "TFOOT": "TableSection", "TBODY": "TableSection", "TR":
      "TableRow", "TH": "TableCell", "TD": "TableCell", "FRAMESET":
      "FrameSet", "IFRAME": "IFrame"
    };
    if (trans[tagName]) klass = 'HTML' + trans[tagName] + 'Element';
    if (window[klass]) return window[klass];
    klass = 'HTML' + tagName + 'Element';
    if (window[klass]) return window[klass];
    klass = 'HTML' + tagName.capitalize() + 'Element';
    if (window[klass]) return window[klass];

    var element = document.createElement(tagName),
     proto = element['__proto__'] || element.constructor.prototype;

    element = null;
    return proto;
  }

  function addMethods(methods) {
    if (arguments.length === 0) addFormMethods();

    if (arguments.length === 2) {
      var tagName = methods;
      methods = arguments[1];
    }

    if (!tagName) {
      Object.extend(Element.Methods, methods || {});
    } else {
      if (Object.isArray(tagName)) {
        for (var i = 0, tag; tag = tagName[i]; i++)
          addMethodsToTagName(tag, methods);
      } else {
        addMethodsToTagName(tagName, methods);
      }
    }

    var ELEMENT_PROTOTYPE = window.HTMLElement ? HTMLElement.prototype :
     Element.prototype;

    if (F.ElementExtensions) {
      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods);
      mergeMethods(ELEMENT_PROTOTYPE, Element.Methods.Simulated, true);
    }

    if (F.SpecificElementExtensions) {
      for (var tag in Element.Methods.ByTag) {
        var klass = findDOMClass(tag);
        if (Object.isUndefined(klass)) continue;
        mergeMethods(klass.prototype, ByTag[tag]);
      }
    }

    Object.extend(Element, Element.Methods);
    Object.extend(Element, Element.Methods.Simulated);
    delete Element.ByTag;
    delete Element.Simulated;

    Element.extend.refresh();

    ELEMENT_CACHE = {};
  }

  Object.extend(GLOBAL.Element, {
    extend:     extend,
    addMethods: addMethods
  });

  if (extend === Prototype.K) {
    GLOBAL.Element.extend.refresh = Prototype.emptyFunction;
  } else {
    GLOBAL.Element.extend.refresh = function() {
      if (Prototype.BrowserFeatures.ElementExtensions) return;
      Object.extend(Methods, Element.Methods);
      Object.extend(Methods, Element.Methods.Simulated);

      EXTENDED = {};
    };
  }

  function addFormMethods() {
    Object.extend(Form, Form.Methods);
    Object.extend(Form.Element, Form.Element.Methods);
    Object.extend(Element.Methods.ByTag, {
      "FORM":     Object.clone(Form.Methods),
      "INPUT":    Object.clone(Form.Element.Methods),
      "SELECT":   Object.clone(Form.Element.Methods),
      "TEXTAREA": Object.clone(Form.Element.Methods),
      "BUTTON":   Object.clone(Form.Element.Methods)
    });
  }

  Element.addMethods(methods);

})(this);
(function() {

  function toDecimal(pctString) {
    var match = pctString.match(/^(\d+)%?$/i);
    if (!match) return null;
    return (Number(match[1]) / 100);
  }

  function getRawStyle(element, style) {
    element = $(element);

    var value = element.style[style];
    if (!value || value === 'auto') {
      var css = document.defaultView.getComputedStyle(element, null);
      value = css ? css[style] : null;
    }

    if (style === 'opacity') return value ? parseFloat(value) : 1.0;
    return value === 'auto' ? null : value;
  }

  function getRawStyle_IE(element, style) {
    var value = element.style[style];
    if (!value && element.currentStyle) {
      value = element.currentStyle[style];
    }
    return value;
  }

  function getContentWidth(element, context) {
    var boxWidth = element.offsetWidth;

    var bl = getPixelValue(element, 'borderLeftWidth',  context) || 0;
    var br = getPixelValue(element, 'borderRightWidth', context) || 0;
    var pl = getPixelValue(element, 'paddingLeft',      context) || 0;
    var pr = getPixelValue(element, 'paddingRight',     context) || 0;

    return boxWidth - bl - br - pl - pr;
  }

  if ('currentStyle' in document.documentElement) {
    getRawStyle = getRawStyle_IE;
  }


  function getPixelValue(value, property, context) {
    var element = null;
    if (Object.isElement(value)) {
      element = value;
      value = getRawStyle(element, property);
    }

    if (value === null || Object.isUndefined(value)) {
      return null;
    }

    if ((/^(?:-)?\d+(\.\d+)?(px)?$/i).test(value)) {
      return window.parseFloat(value);
    }

    var isPercentage = value.include('%'), isViewport = (context === document.viewport);

    if (/\d/.test(value) && element && element.runtimeStyle && !(isPercentage && isViewport)) {
      var style = element.style.left, rStyle = element.runtimeStyle.left;
      element.runtimeStyle.left = element.currentStyle.left;
      element.style.left = value || 0;
      value = element.style.pixelLeft;
      element.style.left = style;
      element.runtimeStyle.left = rStyle;

      return value;
    }

    if (element && isPercentage) {
      context = context || element.parentNode;
      var decimal = toDecimal(value), whole = null;

      var isHorizontal = property.include('left') || property.include('right') ||
       property.include('width');

      var isVertical   = property.include('top') || property.include('bottom') ||
        property.include('height');

      if (context === document.viewport) {
        if (isHorizontal) {
          whole = document.viewport.getWidth();
        } else if (isVertical) {
          whole = document.viewport.getHeight();
        }
      } else {
        if (isHorizontal) {
          whole = $(context).measure('width');
        } else if (isVertical) {
          whole = $(context).measure('height');
        }
      }

      return (whole === null) ? 0 : whole * decimal;
    }

    return 0;
  }

  function toCSSPixels(number) {
    if (Object.isString(number) && number.endsWith('px'))
      return number;
    return number + 'px';
  }

  function isDisplayed(element) {
    while (element && element.parentNode) {
      var display = element.getStyle('display');
      if (display === 'none') {
        return false;
      }
      element = $(element.parentNode);
    }
    return true;
  }

  var hasLayout = Prototype.K;
  if ('currentStyle' in document.documentElement) {
    hasLayout = function(element) {
      if (!element.currentStyle.hasLayout) {
        element.style.zoom = 1;
      }
      return element;
    };
  }

  function cssNameFor(key) {
    if (key.include('border')) key = key + '-width';
    return key.camelize();
  }

  Element.Layout = Class.create(Hash, {
    initialize: function($super, element, preCompute) {
      $super();
      this.element = $(element);

      Element.Layout.PROPERTIES.each( function(property) {
        this._set(property, null);
      }, this);

      if (preCompute) {
        this._preComputing = true;
        this._begin();
        Element.Layout.PROPERTIES.each( this._compute, this );
        this._end();
        this._preComputing = false;
      }
    },

    _set: function(property, value) {
      return Hash.prototype.set.call(this, property, value);
    },

    set: function(property, value) {
      throw "Properties of Element.Layout are read-only.";
    },

    get: function($super, property) {
      var value = $super(property);
      return value === null ? this._compute(property) : value;
    },

    _begin: function() {
      if (this._isPrepared()) return;

      var element = this.element;
      if (isDisplayed(element)) {
        this._setPrepared(true);
        return;
      }


      var originalStyles = {
        position:   element.style.position   || '',
        width:      element.style.width      || '',
        visibility: element.style.visibility || '',
        display:    element.style.display    || ''
      };

      element.store('prototype_original_styles', originalStyles);

      var position = getRawStyle(element, 'position'), width = element.offsetWidth;

      if (width === 0 || width === null) {
        element.style.display = 'block';
        width = element.offsetWidth;
      }

      var context = (position === 'fixed') ? document.viewport :
       element.parentNode;

      var tempStyles = {
        visibility: 'hidden',
        display:    'block'
      };

      if (position !== 'fixed') tempStyles.position = 'absolute';

      element.setStyle(tempStyles);

      var positionedWidth = element.offsetWidth, newWidth;
      if (width && (positionedWidth === width)) {
        newWidth = getContentWidth(element, context);
      } else if (position === 'absolute' || position === 'fixed') {
        newWidth = getContentWidth(element, context);
      } else {
        var parent = element.parentNode, pLayout = $(parent).getLayout();

        newWidth = pLayout.get('width') -
         this.get('margin-left') -
         this.get('border-left') -
         this.get('padding-left') -
         this.get('padding-right') -
         this.get('border-right') -
         this.get('margin-right');
      }

      element.setStyle({ width: newWidth + 'px' });

      this._setPrepared(true);
    },

    _end: function() {
      var element = this.element;
      var originalStyles = element.retrieve('prototype_original_styles');
      element.store('prototype_original_styles', null);
      element.setStyle(originalStyles);
      this._setPrepared(false);
    },

    _compute: function(property) {
      var COMPUTATIONS = Element.Layout.COMPUTATIONS;
      if (!(property in COMPUTATIONS)) {
        throw "Property not found.";
      }

      return this._set(property, COMPUTATIONS[property].call(this, this.element));
    },

    _isPrepared: function() {
      return this.element.retrieve('prototype_element_layout_prepared', false);
    },

    _setPrepared: function(bool) {
      return this.element.store('prototype_element_layout_prepared', bool);
    },

    toObject: function() {
      var args = $A(arguments);
      var keys = (args.length === 0) ? Element.Layout.PROPERTIES :
       args.join(' ').split(' ');
      var obj = {};
      keys.each( function(key) {
        if (!Element.Layout.PROPERTIES.include(key)) return;
        var value = this.get(key);
        if (value != null) obj[key] = value;
      }, this);
      return obj;
    },

    toHash: function() {
      var obj = this.toObject.apply(this, arguments);
      return new Hash(obj);
    },

    toCSS: function() {
      var args = $A(arguments);
      var keys = (args.length === 0) ? Element.Layout.PROPERTIES :
       args.join(' ').split(' ');
      var css = {};

      keys.each( function(key) {
        if (!Element.Layout.PROPERTIES.include(key)) return;
        if (Element.Layout.COMPOSITE_PROPERTIES.include(key)) return;

        var value = this.get(key);
        if (value != null) css[cssNameFor(key)] = value + 'px';
      }, this);
      return css;
    },

    inspect: function() {
      return "#<Element.Layout>";
    }
  });

  Object.extend(Element.Layout, {
    PROPERTIES: $w('height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height'),

    COMPOSITE_PROPERTIES: $w('padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height'),

    COMPUTATIONS: {
      'height': function(element) {
        if (!this._preComputing) this._begin();

        var bHeight = this.get('border-box-height');
        if (bHeight <= 0) {
          if (!this._preComputing) this._end();
          return 0;
        }

        var bTop = this.get('border-top'),
         bBottom = this.get('border-bottom');

        var pTop = this.get('padding-top'),
         pBottom = this.get('padding-bottom');

        if (!this._preComputing) this._end();

        return bHeight - bTop - bBottom - pTop - pBottom;
      },

      'width': function(element) {
        if (!this._preComputing) this._begin();

        var bWidth = this.get('border-box-width');
        if (bWidth <= 0) {
          if (!this._preComputing) this._end();
          return 0;
        }

        var bLeft = this.get('border-left'),
         bRight = this.get('border-right');

        var pLeft = this.get('padding-left'),
         pRight = this.get('padding-right');

        if (!this._preComputing) this._end();
        return bWidth - bLeft - bRight - pLeft - pRight;
      },

      'padding-box-height': function(element) {
        var height = this.get('height'),
         pTop = this.get('padding-top'),
         pBottom = this.get('padding-bottom');

        return height + pTop + pBottom;
      },

      'padding-box-width': function(element) {
        var width = this.get('width'),
         pLeft = this.get('padding-left'),
         pRight = this.get('padding-right');

        return width + pLeft + pRight;
      },

      'border-box-height': function(element) {
        if (!this._preComputing) this._begin();
        var height = element.offsetHeight;
        if (!this._preComputing) this._end();
        return height;
      },

      'border-box-width': function(element) {
        if (!this._preComputing) this._begin();
        var width = element.offsetWidth;
        if (!this._preComputing) this._end();
        return width;
      },

      'margin-box-height': function(element) {
        var bHeight = this.get('border-box-height'),
         mTop = this.get('margin-top'),
         mBottom = this.get('margin-bottom');

        if (bHeight <= 0) return 0;

        return bHeight + mTop + mBottom;
      },

      'margin-box-width': function(element) {
        var bWidth = this.get('border-box-width'),
         mLeft = this.get('margin-left'),
         mRight = this.get('margin-right');

        if (bWidth <= 0) return 0;

        return bWidth + mLeft + mRight;
      },

      'top': function(element) {
        var offset = element.positionedOffset();
        return offset.top;
      },

      'bottom': function(element) {
        var offset = element.positionedOffset(),
         parent = element.getOffsetParent(),
         pHeight = parent.measure('height');

        var mHeight = this.get('border-box-height');

        return pHeight - mHeight - offset.top;
      },

      'left': function(element) {
        var offset = element.positionedOffset();
        return offset.left;
      },

      'right': function(element) {
        var offset = element.positionedOffset(),
         parent = element.getOffsetParent(),
         pWidth = parent.measure('width');

        var mWidth = this.get('border-box-width');

        return pWidth - mWidth - offset.left;
      },

      'padding-top': function(element) {
        return getPixelValue(element, 'paddingTop');
      },

      'padding-bottom': function(element) {
        return getPixelValue(element, 'paddingBottom');
      },

      'padding-left': function(element) {
        return getPixelValue(element, 'paddingLeft');
      },

      'padding-right': function(element) {
        return getPixelValue(element, 'paddingRight');
      },

      'border-top': function(element) {
        return getPixelValue(element, 'borderTopWidth');
      },

      'border-bottom': function(element) {
        return getPixelValue(element, 'borderBottomWidth');
      },

      'border-left': function(element) {
        return getPixelValue(element, 'borderLeftWidth');
      },

      'border-right': function(element) {
        return getPixelValue(element, 'borderRightWidth');
      },

      'margin-top': function(element) {
        return getPixelValue(element, 'marginTop');
      },

      'margin-bottom': function(element) {
        return getPixelValue(element, 'marginBottom');
      },

      'margin-left': function(element) {
        return getPixelValue(element, 'marginLeft');
      },

      'margin-right': function(element) {
        return getPixelValue(element, 'marginRight');
      }
    }
  });

  if ('getBoundingClientRect' in document.documentElement) {
    Object.extend(Element.Layout.COMPUTATIONS, {
      'right': function(element) {
        var parent = hasLayout(element.getOffsetParent());
        var rect = element.getBoundingClientRect(),
         pRect = parent.getBoundingClientRect();

        return (pRect.right - rect.right).round();
      },

      'bottom': function(element) {
        var parent = hasLayout(element.getOffsetParent());
        var rect = element.getBoundingClientRect(),
         pRect = parent.getBoundingClientRect();

        return (pRect.bottom - rect.bottom).round();
      }
    });
  }

  Element.Offset = Class.create({
    initialize: function(left, top) {
      this.left = left.round();
      this.top  = top.round();

      this[0] = this.left;
      this[1] = this.top;
    },

    relativeTo: function(offset) {
      return new Element.Offset(
        this.left - offset.left,
        this.top  - offset.top
      );
    },

    inspect: function() {
      return "#<Element.Offset left: #{left} top: #{top}>".interpolate(this);
    },

    toString: function() {
      return "[#{left}, #{top}]".interpolate(this);
    },

    toArray: function() {
      return [this.left, this.top];
    }
  });

  function getLayout(element, preCompute) {
    return new Element.Layout(element, preCompute);
  }

  function measure(element, property) {
    return $(element).getLayout().get(property);
  }

  function getHeight(element) {
    return Element.getDimensions(element).height;
  }

  function getWidth(element) {
    return Element.getDimensions(element).width;
  }

  function getDimensions(element) {
    element = $(element);
    var display = Element.getStyle(element, 'display');

    if (display && display !== 'none') {
      return { width: element.offsetWidth, height: element.offsetHeight };
    }

    var style = element.style;
    var originalStyles = {
      visibility: style.visibility,
      position:   style.position,
      display:    style.display
    };

    var newStyles = {
      visibility: 'hidden',
      display:    'block'
    };

    if (originalStyles.position !== 'fixed')
      newStyles.position = 'absolute';

    Element.setStyle(element, newStyles);

    var dimensions = {
      width:  element.offsetWidth,
      height: element.offsetHeight
    };

    Element.setStyle(element, originalStyles);

    return dimensions;
  }

  function getOffsetParent(element) {
    element = $(element);

    if (isDocument(element) || isDetached(element) || isBody(element) || isHtml(element))
      return $(document.body);

    var isInline = (Element.getStyle(element, 'display') === 'inline');
    if (!isInline && element.offsetParent) return $(element.offsetParent);

    while ((element = element.parentNode) && element !== document.body) {
      if (Element.getStyle(element, 'position') !== 'static') {
        return isHtml(element) ? $(document.body) : $(element);
      }
    }

    return $(document.body);
  }


  function cumulativeOffset(element) {
    element = $(element);
    var valueT = 0, valueL = 0;
    if (element.parentNode) {
      do {
        valueT += element.offsetTop  || 0;
        valueL += element.offsetLeft || 0;
        element = element.offsetParent;
      } while (element);
    }
    return new Element.Offset(valueL, valueT);
  }

  function positionedOffset(element) {
    element = $(element);

    var layout = element.getLayout();

    var valueT = 0, valueL = 0;
    do {
      valueT += element.offsetTop  || 0;
      valueL += element.offsetLeft || 0;
      element = element.offsetParent;
      if (element) {
        if (isBody(element)) break;
        var p = Element.getStyle(element, 'position');
        if (p !== 'static') break;
      }
    } while (element);

    valueL -= layout.get('margin-top');
    valueT -= layout.get('margin-left');

    return new Element.Offset(valueL, valueT);
  }

  function cumulativeScrollOffset(element) {
    var valueT = 0, valueL = 0;
    do {
      valueT += element.scrollTop  || 0;
      valueL += element.scrollLeft || 0;
      element = element.parentNode;
    } while (element);
    return new Element.Offset(valueL, valueT);
  }

  function viewportOffset(forElement) {
    var valueT = 0, valueL = 0, docBody = document.body;

    var element = $(forElement);
    do {
      valueT += element.offsetTop  || 0;
      valueL += element.offsetLeft || 0;
      if (element.offsetParent == docBody &&
        Element.getStyle(element, 'position') == 'absolute') break;
    } while (element = element.offsetParent);

    element = forElement;
    do {
      if (element != docBody) {
        valueT -= element.scrollTop  || 0;
        valueL -= element.scrollLeft || 0;
      }
    } while (element = element.parentNode);
    return new Element.Offset(valueL, valueT);
  }

  function absolutize(element) {
    element = $(element);

    if (Element.getStyle(element, 'position') === 'absolute') {
      return element;
    }

    var offsetParent = getOffsetParent(element);
    var eOffset = element.viewportOffset(),
     pOffset = offsetParent.viewportOffset();

    var offset = eOffset.relativeTo(pOffset);
    var layout = element.getLayout();

    element.store('prototype_absolutize_original_styles', {
      left:   element.getStyle('left'),
      top:    element.getStyle('top'),
      width:  element.getStyle('width'),
      height: element.getStyle('height')
    });

    element.setStyle({
      position: 'absolute',
      top:    offset.top + 'px',
      left:   offset.left + 'px',
      width:  layout.get('width') + 'px',
      height: layout.get('height') + 'px'
    });

    return element;
  }

  function relativize(element) {
    element = $(element);
    if (Element.getStyle(element, 'position') === 'relative') {
      return element;
    }

    var originalStyles =
     element.retrieve('prototype_absolutize_original_styles');

    if (originalStyles) element.setStyle(originalStyles);
    return element;
  }


  function scrollTo(element) {
    element = $(element);
    var pos = Element.cumulativeOffset(element);
    window.scrollTo(pos.left, pos.top);
    return element;
  }


  function makePositioned(element) {
    element = $(element);
    var position = Element.getStyle(element, 'position'), styles = {};
    if (position === 'static' || !position) {
      styles.position = 'relative';
      if (Prototype.Browser.Opera) {
        styles.top  = 0;
        styles.left = 0;
      }
      Element.setStyle(element, styles);
      Element.store(element, 'prototype_made_positioned', true);
    }
    return element;
  }

  function undoPositioned(element) {
    element = $(element);
    var storage = Element.getStorage(element),
     madePositioned = storage.get('prototype_made_positioned');

    if (madePositioned) {
      storage.unset('prototype_made_positioned');
      Element.setStyle(element, {
        position: '',
        top:      '',
        bottom:   '',
        left:     '',
        right:    ''
      });
    }
    return element;
  }

  function makeClipping(element) {
    element = $(element);

    var storage = Element.getStorage(element),
     madeClipping = storage.get('prototype_made_clipping');

    if (Object.isUndefined(madeClipping)) {
      var overflow = Element.getStyle(element, 'overflow');
      storage.set('prototype_made_clipping', overflow);
      if (overflow !== 'hidden')
        element.style.overflow = 'hidden';
    }

    return element;
  }

  function undoClipping(element) {
    element = $(element);
    var storage = Element.getStorage(element),
     overflow = storage.get('prototype_made_clipping');

    if (!Object.isUndefined(overflow)) {
      storage.unset('prototype_made_clipping');
      element.style.overflow = overflow || '';
    }

    return element;
  }

  function clonePosition(element, source, options) {
    options = Object.extend({
      setLeft:    true,
      setTop:     true,
      setWidth:   true,
      setHeight:  true,
      offsetTop:  0,
      offsetLeft: 0
    }, options || {});

    source  = $(source);
    element = $(element);
    var p, delta, layout, styles = {};

    if (options.setLeft || options.setTop) {
      p = Element.viewportOffset(source);
      delta = [0, 0];
      if (Element.getStyle(element, 'position') === 'absolute') {
        var parent = Element.getOffsetParent(element);
        if (parent !== document.body) delta = Element.viewportOffset(parent);
      }
    }

    if (options.setWidth || options.setHeight) {
      layout = Element.getLayout(source);
    }

    if (options.setLeft)
      styles.left = (p[0] - delta[0] + options.offsetLeft) + 'px';
    if (options.setTop)
      styles.top  = (p[1] - delta[1] + options.offsetTop)  + 'px';

    if (options.setWidth)
      styles.width  = layout.get('border-box-width')  + 'px';
    if (options.setHeight)
      styles.height = layout.get('border-box-height') + 'px';

    return Element.setStyle(element, styles);
  }


  if (Prototype.Browser.IE) {
    getOffsetParent = getOffsetParent.wrap(
      function(proceed, element) {
        element = $(element);

        if (isDocument(element) || isDetached(element) || isBody(element) || isHtml(element))
          return $(document.body);

        var position = element.getStyle('position');
        if (position !== 'static') return proceed(element);

        element.setStyle({ position: 'relative' });
        var value = proceed(element);
        element.setStyle({ position: position });
        return value;
      }
    );

    positionedOffset = positionedOffset.wrap(function(proceed, element) {
      element = $(element);
      if (!element.parentNode) return new Element.Offset(0, 0);
      var position = element.getStyle('position');
      if (position !== 'static') return proceed(element);

      var offsetParent = element.getOffsetParent();
      if (offsetParent && offsetParent.getStyle('position') === 'fixed')
        hasLayout(offsetParent);

      element.setStyle({ position: 'relative' });
      var value = proceed(element);
      element.setStyle({ position: position });
      return value;
    });
  } else if (Prototype.Browser.Webkit) {
    cumulativeOffset = function(element) {
      element = $(element);
      var valueT = 0, valueL = 0;
      do {
        valueT += element.offsetTop  || 0;
        valueL += element.offsetLeft || 0;
        if (element.offsetParent == document.body) {
          if (Element.getStyle(element, 'position') == 'absolute') break;
        }

        element = element.offsetParent;
      } while (element);

      return new Element.Offset(valueL, valueT);
    };
  }


  Element.addMethods({
    getLayout:              getLayout,
    measure:                measure,
    getWidth:               getWidth,
    getHeight:              getHeight,
    getDimensions:          getDimensions,
    getOffsetParent:        getOffsetParent,
    cumulativeOffset:       cumulativeOffset,
    positionedOffset:       positionedOffset,
    cumulativeScrollOffset: cumulativeScrollOffset,
    viewportOffset:         viewportOffset,
    absolutize:             absolutize,
    relativize:             relativize,
    scrollTo:               scrollTo,
    makePositioned:         makePositioned,
    undoPositioned:         undoPositioned,
    makeClipping:           makeClipping,
    undoClipping:           undoClipping,
    clonePosition:          clonePosition
  });

  function isBody(element) {
    return element.nodeName.toUpperCase() === 'BODY';
  }

  function isHtml(element) {
    return element.nodeName.toUpperCase() === 'HTML';
  }

  function isDocument(element) {
    return element.nodeType === Node.DOCUMENT_NODE;
  }

  function isDetached(element) {
    return element !== document.body &&
     !Element.descendantOf(element, document.body);
  }

  if ('getBoundingClientRect' in document.documentElement) {
    Element.addMethods({
      viewportOffset: function(element) {
        element = $(element);
        if (isDetached(element)) return new Element.Offset(0, 0);

        var rect = element.getBoundingClientRect(),
         docEl = document.documentElement;
        return new Element.Offset(rect.left - docEl.clientLeft,
         rect.top - docEl.clientTop);
      }
    });
  }


})();

(function() {

  var IS_OLD_OPERA = Prototype.Browser.Opera &&
   (window.parseFloat(window.opera.version()) < 9.5);
  var ROOT = null;
  function getRootElement() {
    if (ROOT) return ROOT;
    ROOT = IS_OLD_OPERA ? document.body : document.documentElement;
    return ROOT;
  }

  function getDimensions() {
    return { width: this.getWidth(), height: this.getHeight() };
  }

  function getWidth() {
    return getRootElement().clientWidth;
  }

  function getHeight() {
    return getRootElement().clientHeight;
  }

  function getScrollOffsets() {
    var x = window.pageXOffset || document.documentElement.scrollLeft ||
     document.body.scrollLeft;
    var y = window.pageYOffset || document.documentElement.scrollTop ||
     document.body.scrollTop;

    return new Element.Offset(x, y);
  }

  document.viewport = {
    getDimensions:    getDimensions,
    getWidth:         getWidth,
    getHeight:        getHeight,
    getScrollOffsets: getScrollOffsets
  };

})();
window.$$ = function() {
  var expression = $A(arguments).join(', ');
  return Prototype.Selector.select(expression, document);
};

Prototype.Selector = (function() {

  function select() {
    throw new Error('Method "Prototype.Selector.select" must be defined.');
  }

  function match() {
    throw new Error('Method "Prototype.Selector.match" must be defined.');
  }

  function find(elements, expression, index) {
    index = index || 0;
    var match = Prototype.Selector.match, length = elements.length, matchIndex = 0, i;

    for (i = 0; i < length; i++) {
      if (match(elements[i], expression) && index == matchIndex++) {
        return Element.extend(elements[i]);
      }
    }
  }

  function extendElements(elements) {
    for (var i = 0, length = elements.length; i < length; i++) {
      Element.extend(elements[i]);
    }
    return elements;
  }


  var K = Prototype.K;

  return {
    select: select,
    match: match,
    find: find,
    extendElements: (Element.extend === K) ? K : extendElements,
    extendElement: Element.extend
  };
})();
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){

var chunker = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
	done = 0,
	toString = Object.prototype.toString,
	hasDuplicate = false,
	baseHasDuplicate = true,
	rBackslash = /\\/g,
	rNonWord = /\W/;

[0, 0].sort(function() {
	baseHasDuplicate = false;
	return 0;
});

var Sizzle = function( selector, context, results, seed ) {
	results = results || [];
	context = context || document;

	var origContext = context;

	if ( context.nodeType !== 1 && context.nodeType !== 9 ) {
		return [];
	}

	if ( !selector || typeof selector !== "string" ) {
		return results;
	}

	var m, set, checkSet, extra, ret, cur, pop, i,
		prune = true,
		contextXML = Sizzle.isXML( context ),
		parts = [],
		soFar = selector;

	do {
		chunker.exec( "" );
		m = chunker.exec( soFar );

		if ( m ) {
			soFar = m[3];

			parts.push( m[1] );

			if ( m[2] ) {
				extra = m[3];
				break;
			}
		}
	} while ( m );

	if ( parts.length > 1 && origPOS.exec( selector ) ) {

		if ( parts.length === 2 && Expr.relative[ parts[0] ] ) {
			set = posProcess( parts[0] + parts[1], context );

		} else {
			set = Expr.relative[ parts[0] ] ?
				[ context ] :
				Sizzle( parts.shift(), context );

			while ( parts.length ) {
				selector = parts.shift();

				if ( Expr.relative[ selector ] ) {
					selector += parts.shift();
				}

				set = posProcess( selector, set );
			}
		}

	} else {
		if ( !seed && parts.length > 1 && context.nodeType === 9 && !contextXML &&
				Expr.match.ID.test(parts[0]) && !Expr.match.ID.test(parts[parts.length - 1]) ) {

			ret = Sizzle.find( parts.shift(), context, contextXML );
			context = ret.expr ?
				Sizzle.filter( ret.expr, ret.set )[0] :
				ret.set[0];
		}

		if ( context ) {
			ret = seed ?
				{ expr: parts.pop(), set: makeArray(seed) } :
				Sizzle.find( parts.pop(), parts.length === 1 && (parts[0] === "~" || parts[0] === "+") && context.parentNode ? context.parentNode : context, contextXML );

			set = ret.expr ?
				Sizzle.filter( ret.expr, ret.set ) :
				ret.set;

			if ( parts.length > 0 ) {
				checkSet = makeArray( set );

			} else {
				prune = false;
			}

			while ( parts.length ) {
				cur = parts.pop();
				pop = cur;

				if ( !Expr.relative[ cur ] ) {
					cur = "";
				} else {
					pop = parts.pop();
				}

				if ( pop == null ) {
					pop = context;
				}

				Expr.relative[ cur ]( checkSet, pop, contextXML );
			}

		} else {
			checkSet = parts = [];
		}
	}

	if ( !checkSet ) {
		checkSet = set;
	}

	if ( !checkSet ) {
		Sizzle.error( cur || selector );
	}

	if ( toString.call(checkSet) === "[object Array]" ) {
		if ( !prune ) {
			results.push.apply( results, checkSet );

		} else if ( context && context.nodeType === 1 ) {
			for ( i = 0; checkSet[i] != null; i++ ) {
				if ( checkSet[i] && (checkSet[i] === true || checkSet[i].nodeType === 1 && Sizzle.contains(context, checkSet[i])) ) {
					results.push( set[i] );
				}
			}

		} else {
			for ( i = 0; checkSet[i] != null; i++ ) {
				if ( checkSet[i] && checkSet[i].nodeType === 1 ) {
					results.push( set[i] );
				}
			}
		}

	} else {
		makeArray( checkSet, results );
	}

	if ( extra ) {
		Sizzle( extra, origContext, results, seed );
		Sizzle.uniqueSort( results );
	}

	return results;
};

Sizzle.uniqueSort = function( results ) {
	if ( sortOrder ) {
		hasDuplicate = baseHasDuplicate;
		results.sort( sortOrder );

		if ( hasDuplicate ) {
			for ( var i = 1; i < results.length; i++ ) {
				if ( results[i] === results[ i - 1 ] ) {
					results.splice( i--, 1 );
				}
			}
		}
	}

	return results;
};

Sizzle.matches = function( expr, set ) {
	return Sizzle( expr, null, null, set );
};

Sizzle.matchesSelector = function( node, expr ) {
	return Sizzle( expr, null, null, [node] ).length > 0;
};

Sizzle.find = function( expr, context, isXML ) {
	var set;

	if ( !expr ) {
		return [];
	}

	for ( var i = 0, l = Expr.order.length; i < l; i++ ) {
		var match,
			type = Expr.order[i];

		if ( (match = Expr.leftMatch[ type ].exec( expr )) ) {
			var left = match[1];
			match.splice( 1, 1 );

			if ( left.substr( left.length - 1 ) !== "\\" ) {
				match[1] = (match[1] || "").replace( rBackslash, "" );
				set = Expr.find[ type ]( match, context, isXML );

				if ( set != null ) {
					expr = expr.replace( Expr.match[ type ], "" );
					break;
				}
			}
		}
	}

	if ( !set ) {
		set = typeof context.getElementsByTagName !== "undefined" ?
			context.getElementsByTagName( "*" ) :
			[];
	}

	return { set: set, expr: expr };
};

Sizzle.filter = function( expr, set, inplace, not ) {
	var match, anyFound,
		old = expr,
		result = [],
		curLoop = set,
		isXMLFilter = set && set[0] && Sizzle.isXML( set[0] );

	while ( expr && set.length ) {
		for ( var type in Expr.filter ) {
			if ( (match = Expr.leftMatch[ type ].exec( expr )) != null && match[2] ) {
				var found, item,
					filter = Expr.filter[ type ],
					left = match[1];

				anyFound = false;

				match.splice(1,1);

				if ( left.substr( left.length - 1 ) === "\\" ) {
					continue;
				}

				if ( curLoop === result ) {
					result = [];
				}

				if ( Expr.preFilter[ type ] ) {
					match = Expr.preFilter[ type ]( match, curLoop, inplace, result, not, isXMLFilter );

					if ( !match ) {
						anyFound = found = true;

					} else if ( match === true ) {
						continue;
					}
				}

				if ( match ) {
					for ( var i = 0; (item = curLoop[i]) != null; i++ ) {
						if ( item ) {
							found = filter( item, match, i, curLoop );
							var pass = not ^ !!found;

							if ( inplace && found != null ) {
								if ( pass ) {
									anyFound = true;

								} else {
									curLoop[i] = false;
								}

							} else if ( pass ) {
								result.push( item );
								anyFound = true;
							}
						}
					}
				}

				if ( found !== undefined ) {
					if ( !inplace ) {
						curLoop = result;
					}

					expr = expr.replace( Expr.match[ type ], "" );

					if ( !anyFound ) {
						return [];
					}

					break;
				}
			}
		}

		if ( expr === old ) {
			if ( anyFound == null ) {
				Sizzle.error( expr );

			} else {
				break;
			}
		}

		old = expr;
	}

	return curLoop;
};

Sizzle.error = function( msg ) {
	throw "Syntax error, unrecognized expression: " + msg;
};

var Expr = Sizzle.selectors = {
	order: [ "ID", "NAME", "TAG" ],

	match: {
		ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
		CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
		NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
		ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
		TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
		CHILD: /:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
		POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
		PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/
	},

	leftMatch: {},

	attrMap: {
		"class": "className",
		"for": "htmlFor"
	},

	attrHandle: {
		href: function( elem ) {
			return elem.getAttribute( "href" );
		},
		type: function( elem ) {
			return elem.getAttribute( "type" );
		}
	},

	relative: {
		"+": function(checkSet, part){
			var isPartStr = typeof part === "string",
				isTag = isPartStr && !rNonWord.test( part ),
				isPartStrNotTag = isPartStr && !isTag;

			if ( isTag ) {
				part = part.toLowerCase();
			}

			for ( var i = 0, l = checkSet.length, elem; i < l; i++ ) {
				if ( (elem = checkSet[i]) ) {
					while ( (elem = elem.previousSibling) && elem.nodeType !== 1 ) {}

					checkSet[i] = isPartStrNotTag || elem && elem.nodeName.toLowerCase() === part ?
						elem || false :
						elem === part;
				}
			}

			if ( isPartStrNotTag ) {
				Sizzle.filter( part, checkSet, true );
			}
		},

		">": function( checkSet, part ) {
			var elem,
				isPartStr = typeof part === "string",
				i = 0,
				l = checkSet.length;

			if ( isPartStr && !rNonWord.test( part ) ) {
				part = part.toLowerCase();

				for ( ; i < l; i++ ) {
					elem = checkSet[i];

					if ( elem ) {
						var parent = elem.parentNode;
						checkSet[i] = parent.nodeName.toLowerCase() === part ? parent : false;
					}
				}

			} else {
				for ( ; i < l; i++ ) {
					elem = checkSet[i];

					if ( elem ) {
						checkSet[i] = isPartStr ?
							elem.parentNode :
							elem.parentNode === part;
					}
				}

				if ( isPartStr ) {
					Sizzle.filter( part, checkSet, true );
				}
			}
		},

		"": function(checkSet, part, isXML){
			var nodeCheck,
				doneName = done++,
				checkFn = dirCheck;

			if ( typeof part === "string" && !rNonWord.test( part ) ) {
				part = part.toLowerCase();
				nodeCheck = part;
				checkFn = dirNodeCheck;
			}

			checkFn( "parentNode", part, doneName, checkSet, nodeCheck, isXML );
		},

		"~": function( checkSet, part, isXML ) {
			var nodeCheck,
				doneName = done++,
				checkFn = dirCheck;

			if ( typeof part === "string" && !rNonWord.test( part ) ) {
				part = part.toLowerCase();
				nodeCheck = part;
				checkFn = dirNodeCheck;
			}

			checkFn( "previousSibling", part, doneName, checkSet, nodeCheck, isXML );
		}
	},

	find: {
		ID: function( match, context, isXML ) {
			if ( typeof context.getElementById !== "undefined" && !isXML ) {
				var m = context.getElementById(match[1]);
				return m && m.parentNode ? [m] : [];
			}
		},

		NAME: function( match, context ) {
			if ( typeof context.getElementsByName !== "undefined" ) {
				var ret = [],
					results = context.getElementsByName( match[1] );

				for ( var i = 0, l = results.length; i < l; i++ ) {
					if ( results[i].getAttribute("name") === match[1] ) {
						ret.push( results[i] );
					}
				}

				return ret.length === 0 ? null : ret;
			}
		},

		TAG: function( match, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( match[1] );
			}
		}
	},
	preFilter: {
		CLASS: function( match, curLoop, inplace, result, not, isXML ) {
			match = " " + match[1].replace( rBackslash, "" ) + " ";

			if ( isXML ) {
				return match;
			}

			for ( var i = 0, elem; (elem = curLoop[i]) != null; i++ ) {
				if ( elem ) {
					if ( not ^ (elem.className && (" " + elem.className + " ").replace(/[\t\n\r]/g, " ").indexOf(match) >= 0) ) {
						if ( !inplace ) {
							result.push( elem );
						}

					} else if ( inplace ) {
						curLoop[i] = false;
					}
				}
			}

			return false;
		},

		ID: function( match ) {
			return match[1].replace( rBackslash, "" );
		},

		TAG: function( match, curLoop ) {
			return match[1].replace( rBackslash, "" ).toLowerCase();
		},

		CHILD: function( match ) {
			if ( match[1] === "nth" ) {
				if ( !match[2] ) {
					Sizzle.error( match[0] );
				}

				match[2] = match[2].replace(/^\+|\s*/g, '');

				var test = /(-?)(\d*)(?:n([+\-]?\d*))?/.exec(
					match[2] === "even" && "2n" || match[2] === "odd" && "2n+1" ||
					!/\D/.test( match[2] ) && "0n+" + match[2] || match[2]);

				match[2] = (test[1] + (test[2] || 1)) - 0;
				match[3] = test[3] - 0;
			}
			else if ( match[2] ) {
				Sizzle.error( match[0] );
			}

			match[0] = done++;

			return match;
		},

		ATTR: function( match, curLoop, inplace, result, not, isXML ) {
			var name = match[1] = match[1].replace( rBackslash, "" );

			if ( !isXML && Expr.attrMap[name] ) {
				match[1] = Expr.attrMap[name];
			}

			match[4] = ( match[4] || match[5] || "" ).replace( rBackslash, "" );

			if ( match[2] === "~=" ) {
				match[4] = " " + match[4] + " ";
			}

			return match;
		},

		PSEUDO: function( match, curLoop, inplace, result, not ) {
			if ( match[1] === "not" ) {
				if ( ( chunker.exec(match[3]) || "" ).length > 1 || /^\w/.test(match[3]) ) {
					match[3] = Sizzle(match[3], null, null, curLoop);

				} else {
					var ret = Sizzle.filter(match[3], curLoop, inplace, true ^ not);

					if ( !inplace ) {
						result.push.apply( result, ret );
					}

					return false;
				}

			} else if ( Expr.match.POS.test( match[0] ) || Expr.match.CHILD.test( match[0] ) ) {
				return true;
			}

			return match;
		},

		POS: function( match ) {
			match.unshift( true );

			return match;
		}
	},

	filters: {
		enabled: function( elem ) {
			return elem.disabled === false && elem.type !== "hidden";
		},

		disabled: function( elem ) {
			return elem.disabled === true;
		},

		checked: function( elem ) {
			return elem.checked === true;
		},

		selected: function( elem ) {
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		parent: function( elem ) {
			return !!elem.firstChild;
		},

		empty: function( elem ) {
			return !elem.firstChild;
		},

		has: function( elem, i, match ) {
			return !!Sizzle( match[3], elem ).length;
		},

		header: function( elem ) {
			return (/h\d/i).test( elem.nodeName );
		},

		text: function( elem ) {
			var attr = elem.getAttribute( "type" ), type = elem.type;
			return elem.nodeName.toLowerCase() === "input" && "text" === type && ( attr === type || attr === null );
		},

		radio: function( elem ) {
			return elem.nodeName.toLowerCase() === "input" && "radio" === elem.type;
		},

		checkbox: function( elem ) {
			return elem.nodeName.toLowerCase() === "input" && "checkbox" === elem.type;
		},

		file: function( elem ) {
			return elem.nodeName.toLowerCase() === "input" && "file" === elem.type;
		},

		password: function( elem ) {
			return elem.nodeName.toLowerCase() === "input" && "password" === elem.type;
		},

		submit: function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return (name === "input" || name === "button") && "submit" === elem.type;
		},

		image: function( elem ) {
			return elem.nodeName.toLowerCase() === "input" && "image" === elem.type;
		},

		reset: function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return (name === "input" || name === "button") && "reset" === elem.type;
		},

		button: function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && "button" === elem.type || name === "button";
		},

		input: function( elem ) {
			return (/input|select|textarea|button/i).test( elem.nodeName );
		},

		focus: function( elem ) {
			return elem === elem.ownerDocument.activeElement;
		}
	},
	setFilters: {
		first: function( elem, i ) {
			return i === 0;
		},

		last: function( elem, i, match, array ) {
			return i === array.length - 1;
		},

		even: function( elem, i ) {
			return i % 2 === 0;
		},

		odd: function( elem, i ) {
			return i % 2 === 1;
		},

		lt: function( elem, i, match ) {
			return i < match[3] - 0;
		},

		gt: function( elem, i, match ) {
			return i > match[3] - 0;
		},

		nth: function( elem, i, match ) {
			return match[3] - 0 === i;
		},

		eq: function( elem, i, match ) {
			return match[3] - 0 === i;
		}
	},
	filter: {
		PSEUDO: function( elem, match, i, array ) {
			var name = match[1],
				filter = Expr.filters[ name ];

			if ( filter ) {
				return filter( elem, i, match, array );

			} else if ( name === "contains" ) {
				return (elem.textContent || elem.innerText || Sizzle.getText([ elem ]) || "").indexOf(match[3]) >= 0;

			} else if ( name === "not" ) {
				var not = match[3];

				for ( var j = 0, l = not.length; j < l; j++ ) {
					if ( not[j] === elem ) {
						return false;
					}
				}

				return true;

			} else {
				Sizzle.error( name );
			}
		},

		CHILD: function( elem, match ) {
			var type = match[1],
				node = elem;

			switch ( type ) {
				case "only":
				case "first":
					while ( (node = node.previousSibling) )	 {
						if ( node.nodeType === 1 ) {
							return false;
						}
					}

					if ( type === "first" ) {
						return true;
					}

					node = elem;

				case "last":
					while ( (node = node.nextSibling) )	 {
						if ( node.nodeType === 1 ) {
							return false;
						}
					}

					return true;

				case "nth":
					var first = match[2],
						last = match[3];

					if ( first === 1 && last === 0 ) {
						return true;
					}

					var doneName = match[0],
						parent = elem.parentNode;

					if ( parent && (parent.sizcache !== doneName || !elem.nodeIndex) ) {
						var count = 0;

						for ( node = parent.firstChild; node; node = node.nextSibling ) {
							if ( node.nodeType === 1 ) {
								node.nodeIndex = ++count;
							}
						}

						parent.sizcache = doneName;
					}

					var diff = elem.nodeIndex - last;

					if ( first === 0 ) {
						return diff === 0;

					} else {
						return ( diff % first === 0 && diff / first >= 0 );
					}
			}
		},

		ID: function( elem, match ) {
			return elem.nodeType === 1 && elem.getAttribute("id") === match;
		},

		TAG: function( elem, match ) {
			return (match === "*" && elem.nodeType === 1) || elem.nodeName.toLowerCase() === match;
		},

		CLASS: function( elem, match ) {
			return (" " + (elem.className || elem.getAttribute("class")) + " ")
				.indexOf( match ) > -1;
		},

		ATTR: function( elem, match ) {
			var name = match[1],
				result = Expr.attrHandle[ name ] ?
					Expr.attrHandle[ name ]( elem ) :
					elem[ name ] != null ?
						elem[ name ] :
						elem.getAttribute( name ),
				value = result + "",
				type = match[2],
				check = match[4];

			return result == null ?
				type === "!=" :
				type === "=" ?
				value === check :
				type === "*=" ?
				value.indexOf(check) >= 0 :
				type === "~=" ?
				(" " + value + " ").indexOf(check) >= 0 :
				!check ?
				value && result !== false :
				type === "!=" ?
				value !== check :
				type === "^=" ?
				value.indexOf(check) === 0 :
				type === "$=" ?
				value.substr(value.length - check.length) === check :
				type === "|=" ?
				value === check || value.substr(0, check.length + 1) === check + "-" :
				false;
		},

		POS: function( elem, match, i, array ) {
			var name = match[2],
				filter = Expr.setFilters[ name ];

			if ( filter ) {
				return filter( elem, i, match, array );
			}
		}
	}
};

var origPOS = Expr.match.POS,
	fescape = function(all, num){
		return "\\" + (num - 0 + 1);
	};

for ( var type in Expr.match ) {
	Expr.match[ type ] = new RegExp( Expr.match[ type ].source + (/(?![^\[]*\])(?![^\(]*\))/.source) );
	Expr.leftMatch[ type ] = new RegExp( /(^(?:.|\r|\n)*?)/.source + Expr.match[ type ].source.replace(/\\(\d+)/g, fescape) );
}

var makeArray = function( array, results ) {
	array = Array.prototype.slice.call( array, 0 );

	if ( results ) {
		results.push.apply( results, array );
		return results;
	}

	return array;
};

try {
	Array.prototype.slice.call( document.documentElement.childNodes, 0 )[0].nodeType;

} catch( e ) {
	makeArray = function( array, results ) {
		var i = 0,
			ret = results || [];

		if ( toString.call(array) === "[object Array]" ) {
			Array.prototype.push.apply( ret, array );

		} else {
			if ( typeof array.length === "number" ) {
				for ( var l = array.length; i < l; i++ ) {
					ret.push( array[i] );
				}

			} else {
				for ( ; array[i]; i++ ) {
					ret.push( array[i] );
				}
			}
		}

		return ret;
	};
}

var sortOrder, siblingCheck;

if ( document.documentElement.compareDocumentPosition ) {
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		if ( !a.compareDocumentPosition || !b.compareDocumentPosition ) {
			return a.compareDocumentPosition ? -1 : 1;
		}

		return a.compareDocumentPosition(b) & 4 ? -1 : 1;
	};

} else {
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
			return 0;

		} else if ( a.sourceIndex && b.sourceIndex ) {
			return a.sourceIndex - b.sourceIndex;
		}

		var al, bl,
			ap = [],
			bp = [],
			aup = a.parentNode,
			bup = b.parentNode,
			cur = aup;

		if ( aup === bup ) {
			return siblingCheck( a, b );

		} else if ( !aup ) {
			return -1;

		} else if ( !bup ) {
			return 1;
		}

		while ( cur ) {
			ap.unshift( cur );
			cur = cur.parentNode;
		}

		cur = bup;

		while ( cur ) {
			bp.unshift( cur );
			cur = cur.parentNode;
		}

		al = ap.length;
		bl = bp.length;

		for ( var i = 0; i < al && i < bl; i++ ) {
			if ( ap[i] !== bp[i] ) {
				return siblingCheck( ap[i], bp[i] );
			}
		}

		return i === al ?
			siblingCheck( a, bp[i], -1 ) :
			siblingCheck( ap[i], b, 1 );
	};

	siblingCheck = function( a, b, ret ) {
		if ( a === b ) {
			return ret;
		}

		var cur = a.nextSibling;

		while ( cur ) {
			if ( cur === b ) {
				return -1;
			}

			cur = cur.nextSibling;
		}

		return 1;
	};
}

Sizzle.getText = function( elems ) {
	var ret = "", elem;

	for ( var i = 0; elems[i]; i++ ) {
		elem = elems[i];

		if ( elem.nodeType === 3 || elem.nodeType === 4 ) {
			ret += elem.nodeValue;

		} else if ( elem.nodeType !== 8 ) {
			ret += Sizzle.getText( elem.childNodes );
		}
	}

	return ret;
};

(function(){
	var form = document.createElement("div"),
		id = "script" + (new Date()).getTime(),
		root = document.documentElement;

	form.innerHTML = "<a name='" + id + "'/>";

	root.insertBefore( form, root.firstChild );

	if ( document.getElementById( id ) ) {
		Expr.find.ID = function( match, context, isXML ) {
			if ( typeof context.getElementById !== "undefined" && !isXML ) {
				var m = context.getElementById(match[1]);

				return m ?
					m.id === match[1] || typeof m.getAttributeNode !== "undefined" && m.getAttributeNode("id").nodeValue === match[1] ?
						[m] :
						undefined :
					[];
			}
		};

		Expr.filter.ID = function( elem, match ) {
			var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");

			return elem.nodeType === 1 && node && node.nodeValue === match;
		};
	}

	root.removeChild( form );

	root = form = null;
})();

(function(){

	var div = document.createElement("div");
	div.appendChild( document.createComment("") );

	if ( div.getElementsByTagName("*").length > 0 ) {
		Expr.find.TAG = function( match, context ) {
			var results = context.getElementsByTagName( match[1] );

			if ( match[1] === "*" ) {
				var tmp = [];

				for ( var i = 0; results[i]; i++ ) {
					if ( results[i].nodeType === 1 ) {
						tmp.push( results[i] );
					}
				}

				results = tmp;
			}

			return results;
		};
	}

	div.innerHTML = "<a href='#'></a>";

	if ( div.firstChild && typeof div.firstChild.getAttribute !== "undefined" &&
			div.firstChild.getAttribute("href") !== "#" ) {

		Expr.attrHandle.href = function( elem ) {
			return elem.getAttribute( "href", 2 );
		};
	}

	div = null;
})();

if ( document.querySelectorAll ) {
	(function(){
		var oldSizzle = Sizzle,
			div = document.createElement("div"),
			id = "__sizzle__";

		div.innerHTML = "<p class='TEST'></p>";

		if ( div.querySelectorAll && div.querySelectorAll(".TEST").length === 0 ) {
			return;
		}

		Sizzle = function( query, context, extra, seed ) {
			context = context || document;

			if ( !seed && !Sizzle.isXML(context) ) {
				var match = /^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec( query );

				if ( match && (context.nodeType === 1 || context.nodeType === 9) ) {
					if ( match[1] ) {
						return makeArray( context.getElementsByTagName( query ), extra );

					} else if ( match[2] && Expr.find.CLASS && context.getElementsByClassName ) {
						return makeArray( context.getElementsByClassName( match[2] ), extra );
					}
				}

				if ( context.nodeType === 9 ) {
					if ( query === "body" && context.body ) {
						return makeArray( [ context.body ], extra );

					} else if ( match && match[3] ) {
						var elem = context.getElementById( match[3] );

						if ( elem && elem.parentNode ) {
							if ( elem.id === match[3] ) {
								return makeArray( [ elem ], extra );
							}

						} else {
							return makeArray( [], extra );
						}
					}

					try {
						return makeArray( context.querySelectorAll(query), extra );
					} catch(qsaError) {}

				} else if ( context.nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
					var oldContext = context,
						old = context.getAttribute( "id" ),
						nid = old || id,
						hasParent = context.parentNode,
						relativeHierarchySelector = /^\s*[+~]/.test( query );

					if ( !old ) {
						context.setAttribute( "id", nid );
					} else {
						nid = nid.replace( /'/g, "\\$&" );
					}
					if ( relativeHierarchySelector && hasParent ) {
						context = context.parentNode;
					}

					try {
						if ( !relativeHierarchySelector || hasParent ) {
							return makeArray( context.querySelectorAll( "[id='" + nid + "'] " + query ), extra );
						}

					} catch(pseudoError) {
					} finally {
						if ( !old ) {
							oldContext.removeAttribute( "id" );
						}
					}
				}
			}

			return oldSizzle(query, context, extra, seed);
		};

		for ( var prop in oldSizzle ) {
			Sizzle[ prop ] = oldSizzle[ prop ];
		}

		div = null;
	})();
}

(function(){
	var html = document.documentElement,
		matches = html.matchesSelector || html.mozMatchesSelector || html.webkitMatchesSelector || html.msMatchesSelector;

	if ( matches ) {
		var disconnectedMatch = !matches.call( document.createElement( "div" ), "div" ),
			pseudoWorks = false;

		try {
			matches.call( document.documentElement, "[test!='']:sizzle" );

		} catch( pseudoError ) {
			pseudoWorks = true;
		}

		Sizzle.matchesSelector = function( node, expr ) {
			expr = expr.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");

			if ( !Sizzle.isXML( node ) ) {
				try {
					if ( pseudoWorks || !Expr.match.PSEUDO.test( expr ) && !/!=/.test( expr ) ) {
						var ret = matches.call( node, expr );

						if ( ret || !disconnectedMatch ||
								node.document && node.document.nodeType !== 11 ) {
							return ret;
						}
					}
				} catch(e) {}
			}

			return Sizzle(expr, null, null, [node]).length > 0;
		};
	}
})();

(function(){
	var div = document.createElement("div");

	div.innerHTML = "<div class='test e'></div><div class='test'></div>";

	if ( !div.getElementsByClassName || div.getElementsByClassName("e").length === 0 ) {
		return;
	}

	div.lastChild.className = "e";

	if ( div.getElementsByClassName("e").length === 1 ) {
		return;
	}

	Expr.order.splice(1, 0, "CLASS");
	Expr.find.CLASS = function( match, context, isXML ) {
		if ( typeof context.getElementsByClassName !== "undefined" && !isXML ) {
			return context.getElementsByClassName(match[1]);
		}
	};

	div = null;
})();

function dirNodeCheck( dir, cur, doneName, checkSet, nodeCheck, isXML ) {
	for ( var i = 0, l = checkSet.length; i < l; i++ ) {
		var elem = checkSet[i];

		if ( elem ) {
			var match = false;

			elem = elem[dir];

			while ( elem ) {
				if ( elem.sizcache === doneName ) {
					match = checkSet[elem.sizset];
					break;
				}

				if ( elem.nodeType === 1 && !isXML ){
					elem.sizcache = doneName;
					elem.sizset = i;
				}

				if ( elem.nodeName.toLowerCase() === cur ) {
					match = elem;
					break;
				}

				elem = elem[dir];
			}

			checkSet[i] = match;
		}
	}
}

function dirCheck( dir, cur, doneName, checkSet, nodeCheck, isXML ) {
	for ( var i = 0, l = checkSet.length; i < l; i++ ) {
		var elem = checkSet[i];

		if ( elem ) {
			var match = false;

			elem = elem[dir];

			while ( elem ) {
				if ( elem.sizcache === doneName ) {
					match = checkSet[elem.sizset];
					break;
				}

				if ( elem.nodeType === 1 ) {
					if ( !isXML ) {
						elem.sizcache = doneName;
						elem.sizset = i;
					}

					if ( typeof cur !== "string" ) {
						if ( elem === cur ) {
							match = true;
							break;
						}

					} else if ( Sizzle.filter( cur, [elem] ).length > 0 ) {
						match = elem;
						break;
					}
				}

				elem = elem[dir];
			}

			checkSet[i] = match;
		}
	}
}

if ( document.documentElement.contains ) {
	Sizzle.contains = function( a, b ) {
		return a !== b && (a.contains ? a.contains(b) : true);
	};

} else if ( document.documentElement.compareDocumentPosition ) {
	Sizzle.contains = function( a, b ) {
		return !!(a.compareDocumentPosition(b) & 16);
	};

} else {
	Sizzle.contains = function() {
		return false;
	};
}

Sizzle.isXML = function( elem ) {
	var documentElement = (elem ? elem.ownerDocument || elem : 0).documentElement;

	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

var posProcess = function( selector, context ) {
	var match,
		tmpSet = [],
		later = "",
		root = context.nodeType ? [context] : context;

	while ( (match = Expr.match.PSEUDO.exec( selector )) ) {
		later += match[0];
		selector = selector.replace( Expr.match.PSEUDO, "" );
	}

	selector = Expr.relative[selector] ? selector + "*" : selector;

	for ( var i = 0, l = root.length; i < l; i++ ) {
		Sizzle( selector, root[i], tmpSet );
	}

	return Sizzle.filter( later, tmpSet );
};


window.Sizzle = Sizzle;

})();

Prototype._original_property = window.Sizzle;

;(function(engine) {
  var extendElements = Prototype.Selector.extendElements;

  function select(selector, scope) {
    return extendElements(engine(selector, scope || document));
  }

  function match(element, selector) {
    return engine.matches(selector, [element]).length == 1;
  }

  Prototype.Selector.engine = engine;
  Prototype.Selector.select = select;
  Prototype.Selector.match = match;
})(Sizzle);

window.Sizzle = Prototype._original_property;
delete Prototype._original_property;

var Form = {
  reset: function(form) {
    form = $(form);
    form.reset();
    return form;
  },

  serializeElements: function(elements, options) {
    if (typeof options != 'object') options = { hash: !!options };
    else if (Object.isUndefined(options.hash)) options.hash = true;
    var key, value, submitted = false, submit = options.submit, accumulator, initial;

    if (options.hash) {
      initial = {};
      accumulator = function(result, key, value) {
        if (key in result) {
          if (!Object.isArray(result[key])) result[key] = [result[key]];
          result[key].push(value);
        } else result[key] = value;
        return result;
      };
    } else {
      initial = '';
      accumulator = function(result, key, value) {
        value = value.gsub(/(\r)?\n/, '\r\n');
        value = encodeURIComponent(value);
        value = value.gsub(/%20/, '+');
        return result + (result ? '&' : '') + encodeURIComponent(key) + '=' + value;
      }
    }

    return elements.inject(initial, function(result, element) {
      if (!element.disabled && element.name) {
        key = element.name; value = $(element).getValue();
        if (value != null && element.type != 'file' && (element.type != 'submit' || (!submitted &&
            submit !== false && (!submit || key == submit) && (submitted = true)))) {
          result = accumulator(result, key, value);
        }
      }
      return result;
    });
  }
};

Form.Methods = {
  serialize: function(form, options) {
    return Form.serializeElements(Form.getElements(form), options);
  },


  getElements: function(form) {
    var elements = $(form).getElementsByTagName('*');
    var element, results = [], serializers = Form.Element.Serializers;

    for (var i = 0; element = elements[i]; i++) {
      if (serializers[element.tagName.toLowerCase()])
        results.push(Element.extend(element));
    }
    return results;
  },

  getInputs: function(form, typeName, name) {
    form = $(form);
    var inputs = form.getElementsByTagName('input');

    if (!typeName && !name) return $A(inputs).map(Element.extend);

    for (var i = 0, matchingInputs = [], length = inputs.length; i < length; i++) {
      var input = inputs[i];
      if ((typeName && input.type != typeName) || (name && input.name != name))
        continue;
      matchingInputs.push(Element.extend(input));
    }

    return matchingInputs;
  },

  disable: function(form) {
    form = $(form);
    Form.getElements(form).invoke('disable');
    return form;
  },

  enable: function(form) {
    form = $(form);
    Form.getElements(form).invoke('enable');
    return form;
  },

  findFirstElement: function(form) {
    var elements = $(form).getElements().findAll(function(element) {
      return 'hidden' != element.type && !element.disabled;
    });
    var firstByIndex = elements.findAll(function(element) {
      return element.hasAttribute('tabIndex') && element.tabIndex >= 0;
    }).sortBy(function(element) { return element.tabIndex }).first();

    return firstByIndex ? firstByIndex : elements.find(function(element) {
      return /^(?:input|select|textarea)$/i.test(element.tagName);
    });
  },

  focusFirstElement: function(form) {
    form = $(form);
    var element = form.findFirstElement();
    if (element) element.activate();
    return form;
  },

  request: function(form, options) {
    form = $(form), options = Object.clone(options || { });

    var params = options.parameters, action = form.readAttribute('action') || '';
    if (action.blank()) action = window.location.href;
    options.parameters = form.serialize(true);

    if (params) {
      if (Object.isString(params)) params = params.toQueryParams();
      Object.extend(options.parameters, params);
    }

    if (form.hasAttribute('method') && !options.method)
      options.method = form.method;

    return new Ajax.Request(action, options);
  }
};

/*--------------------------------------------------------------------------*/


Form.Element = {
  focus: function(element) {
    $(element).focus();
    return element;
  },

  select: function(element) {
    $(element).select();
    return element;
  }
};

Form.Element.Methods = {

  serialize: function(element) {
    element = $(element);
    if (!element.disabled && element.name) {
      var value = element.getValue();
      if (value != undefined) {
        var pair = { };
        pair[element.name] = value;
        return Object.toQueryString(pair);
      }
    }
    return '';
  },

  getValue: function(element) {
    element = $(element);
    var method = element.tagName.toLowerCase();
    return Form.Element.Serializers[method](element);
  },

  setValue: function(element, value) {
    element = $(element);
    var method = element.tagName.toLowerCase();
    Form.Element.Serializers[method](element, value);
    return element;
  },

  clear: function(element) {
    $(element).value = '';
    return element;
  },

  present: function(element) {
    return $(element).value != '';
  },

  activate: function(element) {
    element = $(element);
    try {
      element.focus();
      if (element.select && (element.tagName.toLowerCase() != 'input' ||
          !(/^(?:button|reset|submit)$/i.test(element.type))))
        element.select();
    } catch (e) { }
    return element;
  },

  disable: function(element) {
    element = $(element);
    element.disabled = true;
    return element;
  },

  enable: function(element) {
    element = $(element);
    element.disabled = false;
    return element;
  }
};

/*--------------------------------------------------------------------------*/

var Field = Form.Element;

var $F = Form.Element.Methods.getValue;

/*--------------------------------------------------------------------------*/

Form.Element.Serializers = (function() {
  function input(element, value) {
    switch (element.type.toLowerCase()) {
      case 'checkbox':
      case 'radio':
        return inputSelector(element, value);
      default:
        return valueSelector(element, value);
    }
  }

  function inputSelector(element, value) {
    if (Object.isUndefined(value))
      return element.checked ? element.value : null;
    else element.checked = !!value;
  }

  function valueSelector(element, value) {
    if (Object.isUndefined(value)) return element.value;
    else element.value = value;
  }

  function select(element, value) {
    if (Object.isUndefined(value))
      return (element.type === 'select-one' ? selectOne : selectMany)(element);

    var opt, currentValue, single = !Object.isArray(value);
    for (var i = 0, length = element.length; i < length; i++) {
      opt = element.options[i];
      currentValue = this.optionValue(opt);
      if (single) {
        if (currentValue == value) {
          opt.selected = true;
          return;
        }
      }
      else opt.selected = value.include(currentValue);
    }
  }

  function selectOne(element) {
    var index = element.selectedIndex;
    return index >= 0 ? optionValue(element.options[index]) : null;
  }

  function selectMany(element) {
    var values, length = element.length;
    if (!length) return null;

    for (var i = 0, values = []; i < length; i++) {
      var opt = element.options[i];
      if (opt.selected) values.push(optionValue(opt));
    }
    return values;
  }

  function optionValue(opt) {
    return Element.hasAttribute(opt, 'value') ? opt.value : opt.text;
  }

  return {
    input:         input,
    inputSelector: inputSelector,
    textarea:      valueSelector,
    select:        select,
    selectOne:     selectOne,
    selectMany:    selectMany,
    optionValue:   optionValue,
    button:        valueSelector
  };
})();

/*--------------------------------------------------------------------------*/


Abstract.TimedObserver = Class.create(PeriodicalExecuter, {
  initialize: function($super, element, frequency, callback) {
    $super(callback, frequency);
    this.element   = $(element);
    this.lastValue = this.getValue();
  },

  execute: function() {
    var value = this.getValue();
    if (Object.isString(this.lastValue) && Object.isString(value) ?
        this.lastValue != value : String(this.lastValue) != String(value)) {
      this.callback(this.element, value);
      this.lastValue = value;
    }
  }
});

Form.Element.Observer = Class.create(Abstract.TimedObserver, {
  getValue: function() {
    return Form.Element.getValue(this.element);
  }
});

Form.Observer = Class.create(Abstract.TimedObserver, {
  getValue: function() {
    return Form.serialize(this.element);
  }
});

/*--------------------------------------------------------------------------*/

Abstract.EventObserver = Class.create({
  initialize: function(element, callback) {
    this.element  = $(element);
    this.callback = callback;

    this.lastValue = this.getValue();
    if (this.element.tagName.toLowerCase() == 'form')
      this.registerFormCallbacks();
    else
      this.registerCallback(this.element);
  },

  onElementEvent: function() {
    var value = this.getValue();
    if (this.lastValue != value) {
      this.callback(this.element, value);
      this.lastValue = value;
    }
  },

  registerFormCallbacks: function() {
    Form.getElements(this.element).each(this.registerCallback, this);
  },

  registerCallback: function(element) {
    if (element.type) {
      switch (element.type.toLowerCase()) {
        case 'checkbox':
        case 'radio':
          Event.observe(element, 'click', this.onElementEvent.bind(this));
          break;
        default:
          Event.observe(element, 'change', this.onElementEvent.bind(this));
          break;
      }
    }
  }
});

Form.Element.EventObserver = Class.create(Abstract.EventObserver, {
  getValue: function() {
    return Form.Element.getValue(this.element);
  }
});

Form.EventObserver = Class.create(Abstract.EventObserver, {
  getValue: function() {
    return Form.serialize(this.element);
  }
});
(function(GLOBAL) {
  var DIV = document.createElement('div');
  var docEl = document.documentElement;
  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl
   && 'onmouseleave' in docEl;

  var Event = {
    KEY_BACKSPACE: 8,
    KEY_TAB:       9,
    KEY_RETURN:   13,
    KEY_ESC:      27,
    KEY_LEFT:     37,
    KEY_UP:       38,
    KEY_RIGHT:    39,
    KEY_DOWN:     40,
    KEY_DELETE:   46,
    KEY_HOME:     36,
    KEY_END:      35,
    KEY_PAGEUP:   33,
    KEY_PAGEDOWN: 34,
    KEY_INSERT:   45
  };


  var isIELegacyEvent = function(event) { return false; };

  if (window.attachEvent) {
    if (window.addEventListener) {
      isIELegacyEvent = function(event) {
        return !(event instanceof window.Event);
      };
    } else {
      isIELegacyEvent = function(event) { return true; };
    }
  }

  var _isButton;

  function _isButtonForDOMEvents(event, code) {
    return event.which ? (event.which === code + 1) : (event.button === code);
  }

  var legacyButtonMap = { 0: 1, 1: 4, 2: 2 };
  function _isButtonForLegacyEvents(event, code) {
    return event.button === legacyButtonMap[code];
  }

  function _isButtonForWebKit(event, code) {
    switch (code) {
      case 0: return event.which == 1 && !event.metaKey;
      case 1: return event.which == 2 || (event.which == 1 && event.metaKey);
      case 2: return event.which == 3;
      default: return false;
    }
  }

  if (window.attachEvent) {
    if (!window.addEventListener) {
      _isButton = _isButtonForLegacyEvents;
    } else {
      _isButton = function(event, code) {
        return isIELegacyEvent(event) ? _isButtonForLegacyEvents(event, code) :
         _isButtonForDOMEvents(event, code);
      }
    }
  } else if (Prototype.Browser.WebKit) {
    _isButton = _isButtonForWebKit;
  } else {
    _isButton = _isButtonForDOMEvents;
  }

  function isLeftClick(event)   { return _isButton(event, 0) }

  function isMiddleClick(event) { return _isButton(event, 1) }

  function isRightClick(event)  { return _isButton(event, 2) }

  function element(event) {
    return Element.extend(_element(event));
  }

  function _element(event) {
    event = Event.extend(event);

    var node = event.target, type = event.type,
     currentTarget = event.currentTarget;

    if (currentTarget && currentTarget.tagName) {
      if (type === 'load' || type === 'error' ||
        (type === 'click' && currentTarget.tagName.toLowerCase() === 'input'
          && currentTarget.type === 'radio'))
            node = currentTarget;
    }

    if (node.nodeType == Node.TEXT_NODE)
      node = node.parentNode;

    return Element.extend(node);
  }

  function findElement(event, expression) {
    var element = _element(event), match = Prototype.Selector.match;
    if (!expression) return Element.extend(element);
    while (element) {
      if (Object.isElement(element) && match(element, expression))
        return Element.extend(element);
      element = element.parentNode;
    }
  }

  function pointer(event) {
    return { x: pointerX(event), y: pointerY(event) };
  }

  function pointerX(event) {
    var docElement = document.documentElement,
     body = document.body || { scrollLeft: 0 };

    return event.pageX || (event.clientX +
      (docElement.scrollLeft || body.scrollLeft) -
      (docElement.clientLeft || 0));
  }

  function pointerY(event) {
    var docElement = document.documentElement,
     body = document.body || { scrollTop: 0 };

    return  event.pageY || (event.clientY +
       (docElement.scrollTop || body.scrollTop) -
       (docElement.clientTop || 0));
  }


  function stop(event) {
    Event.extend(event);
    event.preventDefault();
    event.stopPropagation();

    event.stopped = true;
  }


  Event.Methods = {
    isLeftClick:   isLeftClick,
    isMiddleClick: isMiddleClick,
    isRightClick:  isRightClick,

    element:     element,
    findElement: findElement,

    pointer:  pointer,
    pointerX: pointerX,
    pointerY: pointerY,

    stop: stop
  };

  var methods = Object.keys(Event.Methods).inject({ }, function(m, name) {
    m[name] = Event.Methods[name].methodize();
    return m;
  });

  if (window.attachEvent) {
    function _relatedTarget(event) {
      var element;
      switch (event.type) {
        case 'mouseover':
        case 'mouseenter':
          element = event.fromElement;
          break;
        case 'mouseout':
        case 'mouseleave':
          element = event.toElement;
          break;
        default:
          return null;
      }
      return Element.extend(element);
    }

    var additionalMethods = {
      stopPropagation: function() { this.cancelBubble = true },
      preventDefault:  function() { this.returnValue = false },
      inspect: function() { return '[object Event]' }
    };

    Event.extend = function(event, element) {
      if (!event) return false;

      if (!isIELegacyEvent(event)) return event;

      if (event._extendedByPrototype) return event;
      event._extendedByPrototype = Prototype.emptyFunction;

      var pointer = Event.pointer(event);

      Object.extend(event, {
        target: event.srcElement || element,
        relatedTarget: _relatedTarget(event),
        pageX:  pointer.x,
        pageY:  pointer.y
      });

      Object.extend(event, methods);
      Object.extend(event, additionalMethods);

      return event;
    };
  } else {
    Event.extend = Prototype.K;
  }

  if (window.addEventListener) {
    Event.prototype = window.Event.prototype || document.createEvent('HTMLEvents').__proto__;
    Object.extend(Event.prototype, methods);
  }

  var EVENT_TRANSLATIONS = {
    mouseenter: 'mouseover',
    mouseleave: 'mouseout'
  };

  function getDOMEventName(eventName) {
    return EVENT_TRANSLATIONS[eventName] || eventName;
  }

  if (MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED)
    getDOMEventName = Prototype.K;

  function getUniqueElementID(element) {
    if (element === window) return 0;

    if (typeof element._prototypeUID === 'undefined')
      element._prototypeUID = Element.Storage.UID++;
    return element._prototypeUID;
  }

  function getUniqueElementID_IE(element) {
    if (element === window) return 0;
    if (element == document) return 1;
    return element.uniqueID;
  }

  if ('uniqueID' in DIV)
    getUniqueElementID = getUniqueElementID_IE;

  function isCustomEvent(eventName) {
    return eventName.include(':');
  }

  Event._isCustomEvent = isCustomEvent;

  function getRegistryForElement(element, uid) {
    var CACHE = GLOBAL.Event.cache;
    if (Object.isUndefined(uid))
      uid = getUniqueElementID(element);
    if (!CACHE[uid]) CACHE[uid] = { element: element };
    return CACHE[uid];
  }

  function destroyRegistryForElement(element, uid) {
    if (Object.isUndefined(uid))
      uid = getUniqueElementID(element);
    delete GLOBAL.Event.cache[uid];
  }


  function register(element, eventName, handler) {
    var registry = getRegistryForElement(element);
    if (!registry[eventName]) registry[eventName] = [];
    var entries = registry[eventName];

    var i = entries.length;
    while (i--)
      if (entries[i].handler === handler) return null;

    var uid = getUniqueElementID(element);
    var responder = GLOBAL.Event._createResponder(uid, eventName, handler);
    var entry = {
      responder: responder,
      handler:   handler
    };

    entries.push(entry);
    return entry;
  }

  function unregister(element, eventName, handler) {
    var registry = getRegistryForElement(element);
    var entries = registry[eventName];
    if (!entries) return;

    var i = entries.length, entry;
    while (i--) {
      if (entries[i].handler === handler) {
        entry = entries[i];
        break;
      }
    }

    if (!entry) return;

    var index = entries.indexOf(entry);
    entries.splice(index, 1);

    return entry;
  }


  function observe(element, eventName, handler) {
    element = $(element);
    var entry = register(element, eventName, handler);

    if (entry === null) return element;

    var responder = entry.responder;
    if (isCustomEvent(eventName))
      observeCustomEvent(element, eventName, responder);
    else
      observeStandardEvent(element, eventName, responder);

    return element;
  }

  function observeStandardEvent(element, eventName, responder) {
    var actualEventName = getDOMEventName(eventName);
    if (element.addEventListener) {
      element.addEventListener(actualEventName, responder, false);
    } else {
      element.attachEvent('on' + actualEventName, responder);
    }
  }

  function observeCustomEvent(element, eventName, responder) {
    if (element.addEventListener) {
      element.addEventListener('dataavailable', responder, false);
    } else {
      element.attachEvent('ondataavailable', responder);
      element.attachEvent('onlosecapture',   responder);
    }
  }

  function stopObserving(element, eventName, handler) {
    element = $(element);
    var handlerGiven = !Object.isUndefined(handler),
     eventNameGiven = !Object.isUndefined(eventName);

    if (!eventNameGiven && !handlerGiven) {
      stopObservingElement(element);
      return element;
    }

    if (!handlerGiven) {
      stopObservingEventName(element, eventName);
      return element;
    }

    var entry = unregister(element, eventName, handler);

    if (!entry) return element;
    removeEvent(element, eventName, entry.responder);
    return element;
  }

  function stopObservingStandardEvent(element, eventName, responder) {
    var actualEventName = getDOMEventName(eventName);
    if (element.removeEventListener) {
      element.removeEventListener(actualEventName, responder, false);
    } else {
      element.detachEvent('on' + actualEventName, responder);
    }
  }

  function stopObservingCustomEvent(element, eventName, responder) {
    if (element.removeEventListener) {
      element.removeEventListener('dataavailable', responder, false);
    } else {
      element.detachEvent('ondataavailable', responder);
      element.detachEvent('onlosecapture',   responder);
    }
  }



  function stopObservingElement(element) {
    var uid = getUniqueElementID(element),
     registry = getRegistryForElement(element, uid);

    destroyRegistryForElement(element, uid);

    var entries, i;
    for (var eventName in registry) {
      if (eventName === 'element') continue;

      entries = registry[eventName];
      i = entries.length;
      while (i--)
        removeEvent(element, eventName, entries[i].responder);
    }
  }

  function stopObservingEventName(element, eventName) {
    var registry = getRegistryForElement(element);
    var entries = registry[eventName];
    if (!entries) return;
    delete registry[eventName];

    var i = entries.length;
    while (i--)
      removeEvent(element, eventName, entries[i].responder);
  }


  function removeEvent(element, eventName, handler) {
    if (isCustomEvent(eventName))
      stopObservingCustomEvent(element, eventName, handler);
    else
      stopObservingStandardEvent(element, eventName, handler);
  }



  function getFireTarget(element) {
    if (element !== document) return element;
    if (document.createEvent && !element.dispatchEvent)
      return document.documentElement;
    return element;
  }

  function fire(element, eventName, memo, bubble) {
    element = getFireTarget($(element));
    if (Object.isUndefined(bubble)) bubble = true;
    memo = memo || {};

    var event = fireEvent(element, eventName, memo, bubble);
    return Event.extend(event);
  }

  function fireEvent_DOM(element, eventName, memo, bubble) {
    var event = document.createEvent('HTMLEvents');
    event.initEvent('dataavailable', bubble, true);

    event.eventName = eventName;
    event.memo = memo;

    element.dispatchEvent(event);
    return event;
  }

  function fireEvent_IE(element, eventName, memo, bubble) {
    var event = document.createEventObject();
    event.eventType = bubble ? 'ondataavailable' : 'onlosecapture';

    event.eventName = eventName;
    event.memo = memo;

    element.fireEvent(event.eventType, event);
    return event;
  }

  var fireEvent = document.createEvent ? fireEvent_DOM : fireEvent_IE;



  Event.Handler = Class.create({
    initialize: function(element, eventName, selector, callback) {
      this.element   = $(element);
      this.eventName = eventName;
      this.selector  = selector;
      this.callback  = callback;
      this.handler   = this.handleEvent.bind(this);
    },


    start: function() {
      Event.observe(this.element, this.eventName, this.handler);
      return this;
    },

    stop: function() {
      Event.stopObserving(this.element, this.eventName, this.handler);
      return this;
    },

    handleEvent: function(event) {
      var element = Event.findElement(event, this.selector);
      if (element) this.callback.call(this.element, event, element);
    }
  });

  function on(element, eventName, selector, callback) {
    element = $(element);
    if (Object.isFunction(selector) && Object.isUndefined(callback)) {
      callback = selector, selector = null;
    }

    return new Event.Handler(element, eventName, selector, callback).start();
  }

  Object.extend(Event, Event.Methods);

  Object.extend(Event, {
    fire:          fire,
    observe:       observe,
    stopObserving: stopObserving,
    on:            on
  });

  Element.addMethods({
    fire:          fire,

    observe:       observe,

    stopObserving: stopObserving,

    on:            on
  });

  Object.extend(document, {
    fire:          fire.methodize(),

    observe:       observe.methodize(),

    stopObserving: stopObserving.methodize(),

    on:            on.methodize(),

    loaded:        false
  });

  if (GLOBAL.Event) Object.extend(window.Event, Event);
  else GLOBAL.Event = Event;

  GLOBAL.Event.cache = {};

  function destroyCache_IE() {
    GLOBAL.Event.cache = null;
  }

  if (window.attachEvent)
    window.attachEvent('onunload', destroyCache_IE);

  DIV = null;
  docEl = null;
})(this);

(function(GLOBAL) {
  /* Code for creating leak-free event responders is based on work by
   John-David Dalton. */

  var docEl = document.documentElement;
  var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED = 'onmouseenter' in docEl
    && 'onmouseleave' in docEl;

  function isSimulatedMouseEnterLeaveEvent(eventName) {
    return !MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED &&
     (eventName === 'mouseenter' || eventName === 'mouseleave');
  }

  function createResponder(uid, eventName, handler) {
    if (Event._isCustomEvent(eventName))
      return createResponderForCustomEvent(uid, eventName, handler);
    if (isSimulatedMouseEnterLeaveEvent(eventName))
      return createMouseEnterLeaveResponder(uid, eventName, handler);

    return function(event) {
      var cacheEntry = Event.cache[uid];
      var element = cacheEntry.element;

      Event.extend(event, element);
      handler.call(element, event);
    };
  }

  function createResponderForCustomEvent(uid, eventName, handler) {
    return function(event) {
      var cacheEntry = Event.cache[uid], element = cacheEntry.element;

      if (Object.isUndefined(event.eventName))
        return false;

      if (event.eventName !== eventName)
        return false;

      Event.extend(event, element);
      handler.call(element, event);
    };
  }

  function createMouseEnterLeaveResponder(uid, eventName, handler) {
    return function(event) {
      var cacheEntry = Event.cache[uid], element = cacheEntry.element;

      Event.extend(event, element);
      var parent = event.relatedTarget;

      while (parent && parent !== element) {
        try { parent = parent.parentNode; }
        catch(e) { parent = element; }
      }

      if (parent === element) return;
      handler.call(element, event);
    }
  }

  GLOBAL.Event._createResponder = createResponder;
  docEl = null;
})(this);

(function(GLOBAL) {
  /* Support for the DOMContentLoaded event is based on work by Dan Webb,
     Matthias Miller, Dean Edwards, John Resig, and Diego Perini. */

  var TIMER;

  function fireContentLoadedEvent() {
    if (document.loaded) return;
    if (TIMER) window.clearTimeout(TIMER);
    document.loaded = true;
    document.fire('dom:loaded');
  }

  function checkReadyState() {
    if (document.readyState === 'complete') {
      document.detachEvent('onreadystatechange', checkReadyState);
      fireContentLoadedEvent();
    }
  }

  function pollDoScroll() {
    try {
      document.documentElement.doScroll('left');
    } catch (e) {
      TIMER = pollDoScroll.defer();
      return;
    }

    fireContentLoadedEvent();
  }

  if (document.addEventListener) {
    document.addEventListener('DOMContentLoaded', fireContentLoadedEvent, false);
  } else {
    document.attachEvent('onreadystatechange', checkReadyState);
    if (window == top) TIMER = pollDoScroll.defer();
  }

  Event.observe(window, 'load', fireContentLoadedEvent);
})(this);


Element.addMethods();
/*------------------------------- DEPRECATED -------------------------------*/

Hash.toQueryString = Object.toQueryString;

var Toggle = { display: Element.toggle };

Element.Methods.childOf = Element.Methods.descendantOf;

var Insertion = {
  Before: function(element, content) {
    return Element.insert(element, {before:content});
  },

  Top: function(element, content) {
    return Element.insert(element, {top:content});
  },

  Bottom: function(element, content) {
    return Element.insert(element, {bottom:content});
  },

  After: function(element, content) {
    return Element.insert(element, {after:content});
  }
};

var $continue = new Error('"throw $continue" is deprecated, use "return" instead');

var Position = {
  includeScrollOffsets: false,

  prepare: function() {
    this.deltaX =  window.pageXOffset
                || document.documentElement.scrollLeft
                || document.body.scrollLeft
                || 0;
    this.deltaY =  window.pageYOffset
                || document.documentElement.scrollTop
                || document.body.scrollTop
                || 0;
  },

  within: function(element, x, y) {
    if (this.includeScrollOffsets)
      return this.withinIncludingScrolloffsets(element, x, y);
    this.xcomp = x;
    this.ycomp = y;
    this.offset = Element.cumulativeOffset(element);

    return (y >= this.offset[1] &&
            y <  this.offset[1] + element.offsetHeight &&
            x >= this.offset[0] &&
            x <  this.offset[0] + element.offsetWidth);
  },

  withinIncludingScrolloffsets: function(element, x, y) {
    var offsetcache = Element.cumulativeScrollOffset(element);

    this.xcomp = x + offsetcache[0] - this.deltaX;
    this.ycomp = y + offsetcache[1] - this.deltaY;
    this.offset = Element.cumulativeOffset(element);

    return (this.ycomp >= this.offset[1] &&
            this.ycomp <  this.offset[1] + element.offsetHeight &&
            this.xcomp >= this.offset[0] &&
            this.xcomp <  this.offset[0] + element.offsetWidth);
  },

  overlap: function(mode, element) {
    if (!mode) return 0;
    if (mode == 'vertical')
      return ((this.offset[1] + element.offsetHeight) - this.ycomp) /
        element.offsetHeight;
    if (mode == 'horizontal')
      return ((this.offset[0] + element.offsetWidth) - this.xcomp) /
        element.offsetWidth;
  },


  cumulativeOffset: Element.Methods.cumulativeOffset,

  positionedOffset: Element.Methods.positionedOffset,

  absolutize: function(element) {
    Position.prepare();
    return Element.absolutize(element);
  },

  relativize: function(element) {
    Position.prepare();
    return Element.relativize(element);
  },

  realOffset: Element.Methods.cumulativeScrollOffset,

  offsetParent: Element.Methods.getOffsetParent,

  page: Element.Methods.viewportOffset,

  clone: function(source, target, options) {
    options = options || { };
    return Element.clonePosition(target, source, options);
  }
};

/*--------------------------------------------------------------------------*/

if (!document.getElementsByClassName) document.getElementsByClassName = function(instanceMethods){
  function iter(name) {
    return name.blank() ? null : "[contains(concat(' ', @class, ' '), ' " + name + " ')]";
  }

  instanceMethods.getElementsByClassName = Prototype.BrowserFeatures.XPath ?
  function(element, className) {
    className = className.toString().strip();
    var cond = /\s/.test(className) ? $w(className).map(iter).join('') : iter(className);
    return cond ? document._getElementsByXPath('.//*' + cond, element) : [];
  } : function(element, className) {
    className = className.toString().strip();
    var elements = [], classNames = (/\s/.test(className) ? $w(className) : null);
    if (!classNames && !className) return elements;

    var nodes = $(element).getElementsByTagName('*');
    className = ' ' + className + ' ';

    for (var i = 0, child, cn; child = nodes[i]; i++) {
      if (child.className && (cn = ' ' + child.className + ' ') && (cn.include(className) ||
          (classNames && classNames.all(function(name) {
            return !name.toString().blank() && cn.include(' ' + name + ' ');
          }))))
        elements.push(Element.extend(child));
    }
    return elements;
  };

  return function(className, parentElement) {
    return $(parentElement || document.body).getElementsByClassName(className);
  };
}(Element.Methods);

/*--------------------------------------------------------------------------*/

Element.ClassNames = Class.create();
Element.ClassNames.prototype = {
  initialize: function(element) {
    this.element = $(element);
  },

  _each: function(iterator, context) {
    this.element.className.split(/\s+/).select(function(name) {
      return name.length > 0;
    })._each(iterator, context);
  },

  set: function(className) {
    this.element.className = className;
  },

  add: function(classNameToAdd) {
    if (this.include(classNameToAdd)) return;
    this.set($A(this).concat(classNameToAdd).join(' '));
  },

  remove: function(classNameToRemove) {
    if (!this.include(classNameToRemove)) return;
    this.set($A(this).without(classNameToRemove).join(' '));
  },

  toString: function() {
    return $A(this).join(' ');
  }
};

Object.extend(Element.ClassNames.prototype, Enumerable);

/*--------------------------------------------------------------------------*/

(function() {
  window.Selector = Class.create({
    initialize: function(expression) {
      this.expression = expression.strip();
    },

    findElements: function(rootElement) {
      return Prototype.Selector.select(this.expression, rootElement);
    },

    match: function(element) {
      return Prototype.Selector.match(element, this.expression);
    },

    toString: function() {
      return this.expression;
    },

    inspect: function() {
      return "#<Selector: " + this.expression + ">";
    }
  });

  Object.extend(Selector, {
    matchElements: function(elements, expression) {
      var match = Prototype.Selector.match,
          results = [];

      for (var i = 0, length = elements.length; i < length; i++) {
        var element = elements[i];
        if (match(element, expression)) {
          results.push(Element.extend(element));
        }
      }
      return results;
    },

    findElement: function(elements, expression, index) {
      index = index || 0;
      var matchIndex = 0, element;
      for (var i = 0, length = elements.length; i < length; i++) {
        element = elements[i];
        if (Prototype.Selector.match(element, expression) && index === matchIndex++) {
          return Element.extend(element);
        }
      }
    },

    findChildElements: function(element, expressions) {
      var selector = expressions.toArray().join(', ');
      return Prototype.Selector.select(selector, element || document);
    }
  });
})();
