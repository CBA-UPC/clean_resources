function MezzoAD(){var m;var T="200";var L=2;var h=200;var d=408;var g=404;var q=405;var a=498;var v=499;var o=415;var r=501;var R=502;var s=503;var H=900;var G=999;var U=1;var B=2;var F=4;var J=8;var Y=32;var w=4096;var l=1;var n=2;var c=4;var _=16;var p=1;var V=2;var Q=4;var t="[mezzo] ";var i="####### ";var W="json";var X="xml";var Z="text";var K="https://advimg.ad-mapps.com/sdk/M_PLUS/Image/templete/logo.png";var ee=1;var te="https://advimg.ad-mapps.com/sdk/A_PLUS/Image/script/inter/close.png";var ie=3;var ae=50;var re=320;var b=1;var k=2;var y=3;var z=4;var de=5;var oe="https://advimg.ad-mapps.com/sdk/js/ver/200/viewability.js";var se={};var x={codes:{mCODE:"",mPublisher:"",mMedia:"",mSection:""},mobile:{adid:"-",parameter:"",sspparameter:"",apimodule:"",bridgetype:"",sdk_v:T},ext_param:{u_age_level:"",keyword:""},browser_policy:{},area:{auto_set:true,height_ratio:100},view:{target_id:"",option_for_ad:{logo_btn:{show:true,images:[K],location:ee},close_btn:{show:true,images:[te],location:ie,setting:false}}},ad_servers:{MAN_LEGACY:{base_url:"https://mtag.mman.kr/get_ad.mezzo",timeout:1500,format_request:W,format_response:Z,continue_if_exist:[l|_,n|_],continue_if_not_exist:[],break_if_exist:[c],break_if_not_exist:[_],next_server:"MAN_SSP"},MAN_SSP:{base_url:"https://ssp.meba.kr/ssp.mezzo",timeout:1500,format_request:W,format_response:Z,continue_if_exist:[0],continue_if_not_exist:[],break_if_exist:[],break_if_not_exist:[],next_server:""},entry:"MAN_LEGACY",ssl:true,async:false},ad:{product_attr:0,product:0,mobileweb_type:0,rotate_time:0,status:0,house:[],guarantee:[],selected:null,origindata:null,draw_sub_html:false,bg_click_yn:"Y"},debug:{mode:false},trace:{mode:false},status:{step:0,message:""},callbacks:{done:null,adclick:null,etc:null,noad:null,error:null,guarantee:null,house:null,close:null,start:null,imp:null,firstQ:null,midQ:null,thirdQ:null,skip:null,objhide:null,objshow:null,back:null,complete:null,success:null,fail:null,event:null,log:null,viewability:null,show:null,hide:null,sdkbridge:null}};function u(e){if(x.debug.mode){if(typeof e==="object"){console.log(t+"<---------------------");console.log(e);console.log(t+"---------------------\x3e")}else{console.log(t+e)}}P("log",null,z,{message:e})}function f(e){if(x.trace.mode){if(typeof e==="object"){console.log(i+"<---------------------");console.log(e);console.log(i+"---------------------\x3e")}else{console.log(i+e)}}P("log",null,z,{message:e})}function le(e){var t=for(var i in x.callbacks){if(!x.callbacks[i]){x.callbacks[i]=t}}if(typeof e=="function"){x.callbacks.skip=x.callbacks.done=e}else{for(var a in e){x.callbacks[a]=e[a]}}}nction ne(e){x.status&=~e}function ce(e){if((x.status&e)==e)return true;else return false}function _e(e){x.mobile.adid=e.adid;x.codes.mPublisher=e.mPublisher.trim();x.codes.mMedia=e.mMedia.trim();x.codes.mSection=e.mSection.trim();if(e.hasOwnProperty("uAgeLevel")){x.ext_param.u_age_level=e.uAgeLevel}if(e.hasOwnProperty("keyword")){x.ext_param.keyword=e.keyword}f("codes has been set. ↓↓↓");f("_codes : "+JSON.stringify(e))}function pe(e){x.mobile.adid=e.adid;x.mobile.parameter=e.mobile_param;x.mobile.sspparameter=e.mobile_ssp_param;x.mobile.apimodule=e.api_module;x.mobile.bridgetype=e.bridge_type;x.mobile.sdk_v=e.sdk_v;f("mobile codes has been set. ↓↓↓");f("_codes : "+JSON.stringify(e))}function ue(e){if(!e){x.ad_servers.MAN_LEGACY.base_url=x.ad_servers.MAN_LEGACY.base_url.replace("https://","http://");x.ad_servers.MAN_SSP.base_url=x.ad_servers.MAN_SSP.base_url.replace("https://","http://")}}function P(e,t,i,a){if(x.callbacks.hasOwnProperty(e)&&x.callbacks[e]){if(t=="undefined"||t==null){t=x.status}switch(i){case b:x.callbacks.success(e,t,a);break;case k:x.callbacks.fail(e,t,a);break;case y:x.callbacks.event(e,t,a);break;case z:x.callbacks.log(e,t,a);break;default:x.callbacks[e](t);break}}}function fe(e,t){var i=navigator.userAgent.match(/(?:(Android ))([^\\s;]+)/);if(i!==null&&i.length===3&&parseInt(i[2],10)<4){u("Not supported device. Current device is on Android below version 4.");t(e,s);return}var a=(navigator.userAgent.match("MSIE")||[]).length>0;if(a&&navigator.userAgent.match(/MSIE \d+\.\d+/)[0].match(/\d+.\d+/)<=8){u("Not supported browser. Current browser is IE below version 8.");_on_chekced(e,r);retursh:t[7]}}function ge(e){var t=document.createElement("a");if(window.location!=window.parent.location){t.href=document.referrer}else{t.href=document.location.href}t=he(t.href);if(e==1){return t.hostname}else if(e==3){return t.protocol}else{return t.host+t.pathname}}function ve(e,t){var i="";if(x.mobile.adid!=null&&x.mobile.adid!="undefined"&&x.mobile.adid!=""){i="&d_adid="+x.mobile.adid}return e+"/?"+"i_request_id="+D()+"&a_publisher="+x.codes.mPublisher+"&a_media="+x.codes.mMedia+"&a_section="+x.codes.mSection+"&e_version="+L+"&i_banner_w="+$("#"+x.view.target_id).outerWidth()+"&i_banner_h="+$("#"+x.view.target_id).outerHeight()+"&d_sdk_v="+T+"&rdn="+me()+"&d_app_id="+ge(1)+"&d_page_id="+ge(2)+i+"&i_response_format="+t+"&u_age_level="+x.ext_param.u_age_level+"&keyword="+x.ext_param.keyword+"&d_used_type=js_sdk"}function we(e,t,i){if(e=="MAN_SSP"){return t+"/?m_i="+x.mobile.sspparameter+"&e_version=2"}else{return t+"/?m_i="+x.mobile.parameter+"&e_version=2"}}function be(e,i){O(B);if(i.length<=0){u("Empty server name.");return false}else{u("Requesting AD to "+i+"...")}if(x.ad_servers.hasOwnProperty(i)){var t=x.ad_servers[i];var a=x.mobile.parameter===""||x.mobile.parameter===undefined?ve(t.base_url,t.format_request):we(i,t.base_url,t.format_request);$.support.cors=true;var r=(new Date).getTime();$.ajax({url:a,dataType:t.format_response,async:x.ad_servers.async,crossDomain:true,type:"GET",timeout:t.timeout,xhrFields:{withCredentials:true},error:function(e,t,i){alert("code:"+e.status+"\n"+"message:"+e.responseText+"\n"+"error:"+error);if(t=="timeout"){u("Requesting AD has been timed-out. "+i);this.dfd.reject(d)}else if(t=="parsererror"){u("Ajax parser Error. "+i);this.dfd.reject(o)}else{u("Ajax error occured. "+i);this.dfd.reject(v)}}.bind({current:t,dfd:e}),success:function(e){u("⛤⛥⛦⛧☆★✩✫✬ Received AD from "+i);var t=0;if(e.indexOf("document")==0){t|=_;t|=n;t&=~c;f("Received AD. (PASSBACK)");f("data : "+JSON.stringify(e));S(t,e)}else{try{e=JSON.parse(e);if(e.hasOwnProperty("adsinfo")){if(e.adsinfo.hasOwnProperty("error_code")&&e.adsinfo.error_code=="5"){if(e.adsinfo.hasOwnProperty("use_ssp")&&e.adsinfo.use_ssp=="1"){t|=l;t|=_}else{t|=l;t&=~n;t&=~c}}else{if(e.adsinfo.hasOwnProperty("ad_type")){if(e.adsinfo.ad_type=="4"){t|=n;t&=~c;if(e.adsinfo.hasOwnProperty("use_ssp")&&e.adsinfo.use_ssp=="1"){t|=_}}else{t&=~n;t|=c}}else{t|=l;t&=~n;t&=~c}if(e.adsinfo.ad===undefined){t|=l;t&=~n;t&=~c}}}else{if(i=="MAN_SSP"){if(e.hasOwnProperty("error_code")){if(e.error_code=="5"){t|=l}else{t&=~n;t|=c}}else{t|=l}}else{t|=l}}f("Received AD. (JSON)");f("data : "+JSON.stringify(e));if(i=="MAN_SSP"){S(t,e)}else{S(t,e.adsinfo)}}catch(e){u("Not supported response format "+this.format_request);this.dfd.reject(v);return}}if(this.current.next_server.length>0&&ye(t,this.current)){if(!be(this.dfd,this.current.next_server)){this.dfd.reject(v);return}}else{if(x.ad.status&p){this.dfd.reject(g)}else{this.dfd.resolve(x.ad)}}}.bind({current:t,dfd:e})});return true}u("AD server setting is invalid. Failed to find server name ("+i+")");return false}function ke(e){if(e.hasOwnProperty("product_attr")){x.ad.product_attr=e.product_attr}if(e.hasOwnProperty("product")){x.ad.product=e.product}if(e.hasOwnProperty("ad_pd_attr")){x.ad.product_attr=e.ad_pd_attr}if(e.hasOwnProperty("mobileweb_type")){x.ad.mobileweb_type=e.mobileweb_type}if(x.view.option_for_ad.close_btn.setting==false){if(e.hasOwnProperty("close_location")){x.view.option_for_ad.close_btn.location=e.close_location}}if(e.hasOwnProperty("rotatetime")){x.ad.rotate_time=e.rotatetime}else{x.ad.rotate_time=0}if(e.hasOwnProperty("bg_click_yn")){x.ad.bg_click_yn=e.bg_click_yn}if(e.hasOwnProperty("use_ex_callback")){x.ad.use_ex_callback=e.use_ex_callback}else{x.ad.use_ex_callback=0}}function S(e,t){ke(t);x.ad.origindata=t;if((x.ad.status&V)==0&&(x.ad.status&Q)==0&&e&l){x.ad.status|=p}else{x.ad.status&=~p;var i=null;if(e&n){x.ad.status|=V;i=x.ad.house}else{if(e&c){x.ad.status|=Q;i=x.ad.guarantee}}if(i){if(Array.isArray(t.ad)){for(var a=0;a<t.ad.length;a++){i.push(t.ad[a])}}else{i.push(t)}}}}function ye(e,t){var i=false;var a=t.continue_if_exist;for(var r=0;r<a.length;r++){if((e&a[r])==a[r]){i=true;break}}a=t.continue_if_not_exist;for(var r=0;r<a.length;r++){if((e&a[r])==0){i=true;break}}var d=t.break_if_exist;for(var r=0;r<d.length;r++){if((e&d[r])==d[r]){i=false;break}}d=t.break_if_not_exist;for(var r=0;r<d.length;r++){if((e&d[r])==0){i=false;break}}return i}function ze(e){var t;if(e.guarantee.length>0){t=e.guarantee}else{t=e.house}if(t.length==0){return""}var i=0;if(t.length>1){i=Math.floor(Math.random()*t.length)}e.selected=t[i]}function M(e,t){if(Array.isArray(e)){for(var i=0;i<e.length;i++){f("Call tracking api for ["+t+"]: "+e[i]);$.ajax({url:e[i],crossDomain:true,type:"GET",dataType:"jsonp",jsonp:"callback",xhrFields:{withCredentials:true},error:function(e,t,i){},success:function(e){}})}}else{f("Call tracking api for ["+t+"]: "+e);$.ajax({url:e,crossDomain:true,type:"GET",xhrFields:{withCredentials:true},error:function(e,t,i){},success:function(e){}})}}var N={key:"",click:{key:"",url:[]},impression:{key:"",url:[]}};var j=false;function xe(e){var t=D();N={key:t,click:{key:t,url:[]},impression:{key:t,url:[]}};j=false;if(x.ad.selected.hasOwnProperty("ssp_click")){if(x.ad.selected.ssp_click!=null&&(x.ad.selected.ssp_click.indexOf("http")!=-1||x.ad.selected.ssp_click.indexOf("https")!=-1)){N.click.url.push(x.ad.selected.ssp_click)}j=true}if(x.ad.selected.hasOwnProperty("dsp_click")){if(x.ad.selected.dsp_click!=null&&(x.ad.selected.dsp_click.indexOf("http")!=-1||x.ad.selected.dsp_click.indexOf("https")!=-1)){N.click.url.push(x.ad.selected.dsp_click)}j=true}if(x.ad.selected.hasOwnProperty("ssp_imp")){if(x.ad.selected.ssp_imp!=null&&(x.ad.selected.ssp_imp.indexOf("http")!=-1||x.ad.selected.ssp_imp.indexOf("https")!=-1)){N.impression.url.push(x.ad.selected.ssp_imp)}j=true}if(x.ad.selected.hasOwnProperty("dsp_imp")){if(x.ad.selected.dsp_imp!=null&&(x.ad.selected.dsp_imp.indexOf("http")!=-1||x.ad.selected.dsp_imp.indexOf("https")!=-1)){N.impression.url.push(x.ad.selected.dsp_imp)}j=true}if(N.key==N.impression.key){M(N.impression.url,"impression");N.impression.key=D();P("imp",h,y,null)}$("#"+x.view.target_id).find("#mezzo_ad_area").off("click");if(x.ad.product_attr=="10"&&$("#"+x.view.target_id).find("#mezzo_ad_area").find("#cta_btn").length>0){$("#"+x.view.target_id).find("#mezzo_ad_area").css("cursor","default");$("#"+x.view.target_id).find("#mezzo_ad_area").find("#cta_btn").on({click:function(e){if(N.key==N.click.key){M(N.click.url,"click");N.click.key=D()}if(j==false){e.stopPropagation();e.preventDefault();if(x.ad.selected.click_api!=null){window.open(x.ad.selected.click_api)}}P("adclick",h,y,null)}})}else{if(x.ad.bg_click_yn=="N"&&j==false&&(x.ad.product_attr=="1"||x.ad.product_attr=="10"&&(x.ad.product=="70"||x.ad.product=="71"))){$("#"+x.view.target_id).find("#mezzo_ad_area").css("cursor","default");$("#"+x.view.target_id).find("#mezzo_ad_area").find("a").each(function(){if($(this).attr("href").indexOf("e_request_type=click")!=-1){$(this).addClass("mezzo_ad_click")}});$("#"+x.view.target_id).find("#mezzo_ad_area").find(".mezzo_ad_click").on({click:function(e){if(j==false){e.stopPropagation();e.preventDefault();if(x.ad.selected.click_api!=null){if(x.ad.draw_sub_html==true){x.ad.selected.click_api=x.ad.selected.click_api+"&rich_type=1"}window.open(x.ad.selected.click_api)}}P("adclick",h,y,null)}})}else{if(x.ad.selected.click_api!=null&&x.ad.selected.click_api!=""||j==true){$("#"+x.view.target_id).find("#mezzo_ad_area").on({click:function(e){if(N.key==N.click.key){M(N.click.url,"click");N.click.key=D()}if(j==false){e.stopPropagation();e.preventDefault();if(x.ad.selected.click_api!=null){if(x.ad.draw_sub_html==true){x.ad.selected.click_api=x.ad.selected.click_api+"&rich_type=1"}window.open(x.ad.selected.click_api)}}P("adclick",h,y,null)}})}else{$("#"+x.view.target_id).find("#mezzo_ad_area").css("cursor","default");$("#"+x.view.target_id).on("click","#mezzo_ad_area",function(e){P("adclick",h,y,null)})}}}}function C(){if(x.ad.selected==null){P("noad",g,k,null);return}var e="";var t="";var i=ae;if(x.ad.selected.hasOwnProperty("height")){i=Number(je(x.ad.selected.height))}if(i==NaN)i=ae;var a=re;if(x.ad.selected.hasOwnProperty("width")){a=Number(je(x.ad.selected.width))}if(a==NaN){a=re}if(x.ad.product_attr!="1"&&x.ad.product_attr!="0"){x.area.auto_set=false}else{if(x.area.auto_set==true&&x.area.height_ratio==100){x.area.auto_set=false}}if(x.area.auto_set){var r=0;if(x.area.height_ratio>0&&x.area.height_ratio<=100){r=i*x.area.height_ratio/100}e=r.toString()+"px";var d=0;if(x.area.height_ratio>0&&x.area.height_ratio<=100){d=a*x.area.height_ratio/100}t=d.toString()+"px"}else{e="100%";t="100%";if(x.ad.product_attr=="1"||x.ad.product_attr=="0"){if($("#"+x.view.target_id).innerHeight()<i){e=i.toString()+"px"}}else{if(x.ad.product_attr=="10"&&(x.ad.product=="70"||x.ad.product=="71")){if($("#"+x.view.target_id).innerHeight()<i){e=i.toString()+"px"}}}}var o="";if(x.ad.selected.hasOwnProperty("bg_color")){if(x.ad.selected.bg_color!=null&&x.ad.selected.bg_color!=""){if(x.ad.product_attr=="1"||x.ad.product_attr=="10"&&(x.ad.product=="70"||x.ad.product=="71")){o="background-color: "+x.ad.selected.bg_color+";"}}}$("#"+x.view.target_id).html('<div style="width: '+t+"; height: "+e+'; position: relative; display: inline-block;">'+'<div id="mezzo_ad_area" style="cursor: pointer; position: absolute; top: 50%; left: 50%; -webkit-transform: translateX(-50%) translateY(-50%); transform: translateX(-50%) translateY(-50%); max-width: 100%; max-height:100%; width: 100%; height: 100%; '+o+'">'+"</div>"+"</div>");var s={width:"0",height:"0",used_mraid:"0",bg_color:"",mobileweb_type:"0",viewability_time:"0",click_url:"",click_tracking_api:""};if(x.ad.selected!=null){if(x.ad.selected.hasOwnProperty("bg_color")){s.bg_color=x.ad.selected.bg_color}if(x.ad.selected.hasOwnProperty("ssp_click")){s.click_url=x.ad.selected.ssp_click}if(x.ad.selected.hasOwnProperty("ssp_click")){s.click_tracking_api=x.ad.selected.ssp_click}if(x.ad.selected.hasOwnProperty("dsp_click")){s.click_url=x.ad.selected.dsp_click}if(x.ad.selected.hasOwnProperty("click_api")){s.click_url=x.ad.selected.click_api}if(x.ad.selected.hasOwnProperty("click_tracking")){s.click_tracking=x.ad.selected.click_tracking}if(x.ad.selected.hasOwnProperty("click_tracking_api")){s.click_tracking_api=x.ad.selected.click_tracking_api}if(x.ad.hasOwnProperty("mobileweb_type")){s.mobileweb_type=x.ad.mobileweb_type}if(x.ad.selected.hasOwnProperty("width")){s.width=x.ad.selected.width}if(x.ad.selected.hasOwnProperty("height")){s.height=x.ad.selected.height}if(x.ad.selected.hasOwnProperty("extensions")){if(x.ad.selected.extensions.hasOwnProperty("viewability")){if(x.ad.selected.extensions.viewability.hasOwnProperty("time")){s.viewability_time=x.ad.selected.extensions.viewability.time}}}}if(x.ad.product_attr=="4"){if(x.ad.selected.html.toLowerCase().indexOf("<script")!=-1&&x.ad.selected.html.toLowerCase().indexOf("/script>")!=-1){$("#"+x.view.target_id).find("#mezzo_ad_area").html(x.ad.selected.html)}else{$("#"+x.view.target_id).find("#mezzo_ad_area").html(x.ad.selected.html)}$(".mezzo_back > .outer > .inner").append('<div id="mezzo_video_area" style="position: absolute; z-index: 9999 !important; bottom: 0; left: 0; width: 100%; height: 37.5%; line-height: 0 !important;">'+'<video autoplay="true" muted playsinline="" id="video_area" style="position: absolute; left: 0; top: 0; height: 100% !important; max-width: 100%; max-height: 100%; z-index: 9999 !important;" poster: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">'+"</video>"+"</div>");$("#"+x.view.target_id).find("#mezzo_ad_area").find(".mezzo_back").off("click");$("#"+x.view.target_id).find("#mezzo_ad_area").find(".mezzo_back").on({click:function(e){e.stopPropagation();e.preventDefault();P("adclick",h,y,null);window.open(x.ad.selected.click_api)}});if($("#"+x.view.target_id).find(".mezzo_back").find("#close_btn").find("a").length==0){$("#"+x.view.target_id).find(".mezzo_back").find("#close_btn").wrap('<a id="mezzo_close_btn" href="javascript:void(0);"></a>');$("#"+x.view.target_id).find(".mezzo_back").find("#close_btn").hide()}$.getScript("https://advimg.ad-mapps.com/sdk/M_PLUS/manjs/sdk/ad_movie_script.js",function(){var t=new MezzoVideoAD;var e="INJECTION";var i="video_area";var a={};var r={auto_play:true,auto_replay:true,click_full_area:true,muted:true,viewability:true,post_click:"1",sound_btn:{show:true,images:["https://advimg.ad-mapps.com/sdk/M_PLUS/Image/script/movie/on.png","https://advimg.ad-mapps.com/sdk/M_PLUS/Image/script/movie/mute.png"]},logo_btn:{show:false},click_btn:{show:false},skip_btn:{show:false},close_btn:{show:false,images:["https://advimg.ad-mapps.com/sdk/M_PLUS/Image/script/movie/close.png"]},poster:{images:["https://advimg.ad-mapps.com/sdk/M_PLUS/Image/script/movie/poster_white.png"]}};t.setView(e,i,1024,r);t.request(a,{success:function(e,t,i){P(e,t,b,s)},fail:function(e,t,i){$(".mezzo_back > .outer > .inner").find("#mezzo_video_area").remove();P(e,t,k,i)},event:function(e,t,i){if(e=="imp"){$("#"+x.view.target_id).find(".mezzo_back").find("#closeg:function(e,t,i){P(e,t,z,i)}},data_mezzo);setTimeout(function(){if(!$("#"+x.view.target_id).find(".mezzo_back").find("#close_btn").is(":visible")){$("#"+x.view.target_id).find(".mezzo_back").find("#close_btn").show()}},1500);$("#"+x.view.target_id).find("#mezzo_ad_area").find("#close_btn").on({click:function(e){e.stopPropagation();e.preventDefault();if(!x.mobile.parameter){if(m!=null){m.destroy();m=null}}P("close",h,y,null);t.clear();$("#"+x.view.target_id).html("")}})})}else if(x.ad.product_attr=="0"){try{if(x.ad.selected.indexOf("document.write")!=-1){if(x.ad!=null){if(x.ad.guarantee.length>0){P("guarantee",h,b,s)}else{P("house",h,b,s)}}$('<iframe id="mezzo_ad_iframe">').attr("src","about:blank").attr("width","100%").attr("height","100%").attr("frameborder","0").attr("scrolling","no").attr("hspace","0").attr("vspace","0").attr("marginwidth","0").attr("marginheight","0").appendTo($("#"+x.view.target_id).find("#mezzo_ad_area"));if(x.ad.selected!=null&&x.ad.selected!="null"&&x.ad.selected!="undefined"){var l=document.getElementById("mezzo_ad_iframe").contentWindow.document;if(x.ad.selected.indexOf("ttx_pub_code")!=-1){l.open();l.write("<!doctype html>");l.write("<head></head>");l.write("<body>");l.write("<script>");l.write(x.ad.selected);l.write("<\/script>");l.write("</body>");l.close()}else{x.ad.selected=x.ad.selected.replace(/document.write\(\"\"/gi,"");x.ad.selected=x.ad.selected.replace(/\"\"\)\;/gi,"");x.ad.selected=x.ad.selected.replace(/document.write\(\'\'/gi,"");x.ad.selected=x.ad.selected.replace(/\'\'\)\;/gi,"");x.ad.selected=x.ad.selected.replace(/document.write\(\"/gi,"");x.ad.selected=x.ad.selected.replace(/\"\)\;/gi,"");x.ad.selected=x.ad.selected.replace(/document.write\(\'/gi,"");x.ad.selected=x.ad.selected.replace(/\'\)\;/gi,"");x.ad.selected=x.ad.selected.replace(/scr\+ipt/gi,"script");x.ad.selected=x.ad.selected.replace(/\"\"\+\"\"/gi,"");x.ad.selected=x.ad.selected.replace(/\'\'\+\'\'/gi,"");x.ad.selected=x.ad.selected.replace(/\"\+\"/gi,"");x.ad.selected=x.ad.selected.replace(/\'\+\'/gi,"");x.ad.selected=x.ad.selected.replace(/\"\"/gi,'"');l.open();l.write("<!doctype html>");l.write("<head></head>");l.write("<body>");l.write(x.ad.selected);l.write("</body>");l.close()}}}}catch(e){P("error",v,k,null);return}}else{var n="";if(x.ad.selected.sub_html!=null&&x.ad.selected.sub_html!=""&&x.ad.product_attr!="1"){$("#"+x.view.target_id).hide()}if(x.ad.selected.hasOwnProperty("adm")){n=x.ad.selected.adm;n=n.replace("<meta name='viewport' content='width=device-width; height=device-height;'><title></title>","");n=n.replace('<meta name="viewport" content="width=device-width; height=device-height;"><title></title>',"");n=n.replace("<meta name='viewport' content='width=device-width; height=device-height;'><title></title>","");n=n.replace('<meta name="viewport" content="width=device-width; height=device-height;"><title></title>',"");n=n.replace("<meta name='viewport' content='user-scalable=no; width=device-width; height=device-height;'><title></title>","");n=n.replace('<meta name="viewport" content="user-scalable=no; width=device-width; height=device-height;"><title></title>',"");n=n.replace("<meta name='viewport' content='user-scalable=no, width=device-width; height=device-height;'><title></title>","");n=n.replace('<meta name="viewport" content="user-scalable=no, width=device-width; height=device-height;"><title></title>',"");n=n.replace(/<(\/meta name='viewport'|meta name='viewport')([^>]*)>/gi,"");n=n.replace(/<(\/meta name="viewport"|meta name="viewport")([^>]*)>/gi,"");n=n.replace("<style>img {max-width: 100%; max-height: 100%;}</style>","<style>#mezzo_ad_area img {max-width: 100%; max-height: 100%;}</style>")}else if(x.ad.selected.hasOwnProperty("html")){n=x.ad.selected.html;n=n.replace("<meta name='viewport' content='width=device-width; height=device-height;'><title></title>","");n=n.replace('<meta name="viewport" content="width=device-width; height=device-height;"><title></title>',"");n=n.replace("<meta name='viewport' content='user-scalable=no; width=device-width; height=device-height;'><title></title>","");n=n.replace('<meta name="viewport" content="user-scalable=no; width=device-width; height=device-height;"><title></title>',"");n=n.replace("<meta name='viewport' content='user-scalable=no, width=device-width; height=device-height;'><title></title>","");n=n.replace('<meta name="viewport" content="user-scalable=no, width=device-width; height=device-height;"><title></title>',"")}else{$("#"+x.view.target_id).html("")}if(x.ad.selected.hasOwnProperty("use_ex_callback")&&x.ad.selected.use_ex_callback==1){var c="";try{c=n.split("mezzoCustomCallback")}catch(e){c=n}n="";if(Array.isArray(c)){for(var _=0;_<c.length;_++){if(_<c.length-1){n=n+c[_]+" window['"+x.view.target_id+"_mezzoCustomCallback']"}else{n=n+c[_]}}}else{n=c}window[x.view.target_id+"_mezzoCustomCallback"]=function(e){if(e==h){P("guarantee",h,b,s)}else if(e==g){$("#"+x.view.target_id).html("");if(x.ad.house.length>0){x.ad.use_ex_callback=0;x.ad.guarantee=[];x.ad.selected=x.ad.house;ze(x.ad);try{if(x.ad.selected.indexOf("document")==0){x.ad.product_attr="0"}}catch(e){}C();E();A(w);setTimeout(Se,500)}else{P("noad",g,k,null)}}else{$("#"+x.view.target_id).html("");P("error",v,k,null)}return}}if(n.toLowerCase().indexOf("<script")!=-1&&n.toLowerCase().indexOf("/script>")!=-1){$("#"+x.view.target_id).find("#mezzo_ad_area").html(n)}else{$("#"+x.view.target_id).find("#mezzo_ad_area").html(n)}if(x.ad.product_attr!="1"&&x.ad.product!="70"&&x.ad.product!="71"&&x.ad.product_attr!="8"){if(x.view.option_for_ad.close_btn.show){var p="";switch(x.view.option_for_ad.close_btn.location){case"1":p="left: 10px; top: 10px;";break;case"2":p="right: calc(50% - 3.5%); top: 10px;";break;case"3":p="right: 10px; top: 10px;";break;case"4":p="left: 10px; top: calc(50% - 3.5%);";break;case"5":p="right: 10px; top: calc(50% - 3.5%);";break;case"6":p="left: 10px; bottom: 10px;";break;case"7":p="right: calc(50% - 3.5%); bottom: 10px;";break;case"8":p="right: 10px; bottom: 10px;";break;default:p="right: 10px; top: 10px;";break}if(x.ad.selected.hasOwnProperty("sub_html")){if(x.ad.selected.sub_html!=null&&x.ad.selected.sub_html!=""){p="right: 10px; top: 10px;"}}$("#"+x.view.target_id).find("#mezzo_ad_area").append('<div class="mezzo_close" id="close_btn" style="position: absolute; z-index: 1111111; '+p+' display: block; width: 7%;">'+'<a id="mezzo_close_btn" href="javascript:void(0);"><img src="'+x.view.option_for_ad.close_btn.images[0]+'" alt="" style="width: 100%;"></a>'+"</div>")}else{$("#"+x.view.target_id).find("#mezzo_ad_area").find(".mezzo_close_btn").remove()}}}if(x.ad.product_attr=="1"){var u=$("#"+x.view.target_id).find("#mz_logo").height();var f=i-u-2;if($("#"+x.view.target_id).find("#mz_logo").length>0){if($("#"+x.view.target_id).find("#mz_logo").attr("style")!="undefined"){if($("#"+x.view.target_id).find("#mz_logo").attr("style").indexOf("top:1px")==0){$("#"+x.view.target_id).find("#mz_logo").css("top",f.toString()+"px")}if(i>50){$("#"+x.view.target_id).find("#mz_logo").css("top",f.toString()+"px")}}}}if(x.ad.product_attr=="8"&&x.ad.product=="52"){$("#"+x.view.target_id).find("#mz_logo").css({top:"1px",left:"1px",width:"20px",height:"20px",position:"absolute"})}if(x.ad.product_attr=="1"||x.ad.product_attr=="10"&&(x.ad.product=="70"||x.ad.product=="71")){if(x.mobile.parameter!=null&&x.mobile.parameter!=undefined&&x.mobile.parameter!="undefined"&&x.mobile.parameter!=""){$("#"+x.view.target_id).css("width","100%")}if(x.ad.mobileweb_type=="1"){$("#"+x.view.target_id).css("position","fixed");$("#"+x.view.target_id).css("top","0");$("#"+x.view.target_id).css("width","100%");$("#"+x.view.target_id).css("text-align","center");$("#"+x.view.target_id).css("z-index","9999");if($("#"+x.view.target_id).children().innerHeight()>0){$("#"+x.view.target_id).css("height",$("#"+x.view.target_id).children().innerHeight()+"px")}}else if(x.ad.mobileweb_type=="2"){$("#"+x.view.target_id).css("position","fixed");$("#"+x.view.target_id).css("bottom","0");$("#"+x.view.target_id).css("width","100%");$("#"+x.view.target_id).css("text-align","center");$("#"+x.view.target_id).css("z-index","9999");if($("#"+x.view.target_id).children().innerHeight()>0){$("#"+x.view.target_id).css("height",$("#"+x.view.target_id).children().innerHeight()+"px")}}else{}}if(x.view.option_for_ad.logo_btn.show){$("#"+x.view.target_id).find("#mz_logo").attr("src",x.view.option_for_ad.logo_btn.images[0]);$("#"+x.view.target_id).find("#mz_logo").show()}else{$("#"+x.view.target_id).find("#mz_logo").hide()}if(!x.ad.selected.hasOwnProperty("use_ex_callback")||x.ad.selected.use_ex_callback==0){if($("#"+x.view.target_id).find("#mezzo_ad_area").length){if(x.ad.product_attr!="4"&&x.ad.product_attr!="0"){if(x.ad!=null){if(x.ad.draw_sub_html==false){if(x.ad.guarantee.length>0){P("guarantee",h,b,s)}else{P("house",h,b,s)}}}$("#"+x.view.target_id).find(".mezzo_back").find(".outer").attr("href","javascript:void(0);").attr("target","").attr("onclick","");xe()}}}if(x.ad.product_attr!="4"){if(x.ad.selected.click_api!=null&&x.ad.selected.click_api!=""){$("#"+x.view.target_id).find("#mezzo_ad_area").find("#close_btn").off("click");$("#"+x.view.target_id).find("#mezzo_ad_area").find("#close_btn").on({click:function(e){e.stopPropagation();e.preventDefault();P("close",h,y,null);$("#"+x.view.target_id).html("")}})}else{$("#"+x.view.target_id).find("#mezzo_ad_area").find("#close_btn").off("click");$("#"+x.view.target_id).on("click","#close_btn",function(e){e.stopPropagation();e.preventDefault();P("close",h,y,null);$("#"+x.view.target_id).html("")})}}$("#"+x.view.target_id).find("#mz_logo").parent("a").attr("href","javascript:void(0);").attr("target","");if(x.ad.selected.click_api!=null&&x.ad.selected.click_api!=""){$("#"+x.view.target_id).find("#mz_logo").off("click");$("#"+x.view.target_id).find("#mz_logo").on({click:function(e){e.stopPropagation();e.preventDefault();if(x.mobile.adid!=null&&x.mobile.adid!="undefined"&&x.mobile.adid!=""){window.open("https://www.mman.kr/Service/opt/opt_bridge?aid="+x.mobile.adid)}else{window.open("https://www.mman.kr/Service/opt/opt_bridge?aid=")}}})}else{$("#"+x.view.target_id).find("#mz_logo").off("click");$("#"+x.view.target_id).on("click","#mz_logo",function(e){e.stopPropagation();e.preventDefault();if(x.mobile.adid!=null&&x.mobile.adid!="undefined"&&x.mobile.adid!=""){window.open("https://www.mman.kr/Service/opt/opt_bridge?aid="+x.mobile.adid)}else{window.open("https://www.mman.kr/Service/opt/opt_bridge?aid=")}})}$("#"+x.view.target_id).find("#mezzo_ad_area").css("-webkit-tap-highlight-color","rgba(0,0,0,0)");if(x.ad.selected.sub_html!=null&&x.ad.selected.sub_html!=""&&x.ad.product_attr!="1"){if($("#"+x.view.target_id).find("#mezzo_ad_area").find("#mezzo_ad_iframe").length>0){if(x.ad.selected.hasOwnProperty("width")&&x.ad.selected.hasOwnProperty("height")){if(x.ad.selected.width>0&&x.ad.selected.height>0){$e("RICH_MEDIA",x.ad.selected.width,x.ad.selected.height)}}}$("#"+x.view.target_id).find("#mezzo_ad_area").find(".inner").css("background",'url("https://advimg.ad-mapps.com/sdk/template/layer/110/loading.gif") center center no-repeat');$("#"+x.view.target_id).find("#mezzo_ad_area").find(".inner").css("background-size","200px 200px");setTimeout(function(){$("#"+x.view.target_id).find("#mezzo_ad_area").find(".inner").css("background","");$("#"+x.view.target_id).find("#mezzo_ad_area").find(".inner").css("background-size","")},2e3);$("#"+x.view.target_id).show()}}function $e(e,t,i){if(!e||!t||!i){return false}try{var a;switch(e){case"RICH_MEDIA":a=$("#"+x.view.target_id).find("#mezzo_ad_area");break;case"END_CARD":a=x.view.option_for_video.layer_ui_path.find(".__MEZZO_ENDCARD_AREA__");break}var r=$("#"+x.view.target_id).find("#mezzo_ad_area").find("#mezzo_ad_iframe");var d=t;var o=i;var s=a.outerWidth();r.css("transformOrigin","top left");r.css("left","0");r.css("top","0");r.css("position","absolute");r.css("width",d+"px");r.css("height",o+"px");var l=function(e){var t=e/d;r.css("transform","scale("+t+")")};l(s);var n=setInterval(function(){var e=a.outerWidth();if(s!==e){s=e;l(e)}},200);return n}catch(e){return false}}function Ae(){if(x.mobile.parameter){if(x.ad.selected.hasOwnProperty("extensions")&&x.ad.selected.extensions){var e=x.ad.selected.extensions;if(e.hasOwnProperty("viewability")&&e.viewability){var t=e.viewability;if(t.hasOwnProperty("time")&&t.time){var i=t.time;var a=t.impression;if(i>0&&a){$.ajax({url:a,crossDomain:true,type:"GET",xhrFieldstrue},error:function(e,t,i){},success:function(e){a="";x.ad.selected.extensions.viewability=null}})}}}}}}function E(){if(!x.mobile.parameter){if(x.ad.selected.hasOwnProperty("extensions")&&x.ad.selected.extensions){var e=x.ad.selected.extensions;if(e.hasOwnProperty("viewability")&&e.viewability){var t=e.viewability;if(t.hasOwnProperty("time")&&t.time){var i=t.time;var a=t.impression;if(i>0&&a){$.getScript(oe,function(){if(m!=null){m.destroy()}m=new Viewability;m.callBacction(e){},hide:function(e){},rising:function(e){var t={time:i,api:a};m.setAPI("");x.ad.selected.extensions.viewability=null},log:function(e){if(e==""){}else{f(e)}}});m.setID(x.view.target_id);m.setAPI(a);m.setValue(i,50);m.request()})}}}}}}function Oe(e){ne(B);O(F);f("Final result ↓↓↓");f("_data : "+JSON.stringify(e));ze(e);var t="0";if(x.mobile.parameter&&x.mobile.parameter!=""){t=x.mobile.apimodule}if(t=="0"){C();E();A(w);setTimeout(Se,500)}else{Pe();A(w);De()}}function Pe(){if(x.ad!=null){var e=x.ad.origindata;if(x.ad.guarantee.length>0){P("guarantee",h,b,e)}else{P("house",h,b,e)}}else{P("noad",g,k,e)}}function De(){O(J);if(x.ad.rotate_time>0){setTimeout(function(){$("#"+x.view.target_id).html("");x.ad={product_attr:0,mobileweb_type:0,rotate_time:0,status:0,house:[],guarantee:[],selected:null,draw_sub_html:false};x.status={step:0,message:""};I(x.codes,x.callbacks)},x.ad.rotate_time*1e3)}}function Se(){O(J);if($("#"+x.view.target_id).find("#mezzo_ad_area").length){if(x.ad.rotate_time>0){if(x.mobile.parameter){if(x.mobile.sdk_v>=200&&x.mobile.bridgetype=="and"){setTimeout(Me,x.ad.rotate_time*1e3)}else{setTimeout(e,x.ad.rotate_time*1e3)}}else{setTimeout(e,x.ad.rotate_time*1e3)}}}}function Me(){P("sdkbridge",H,de,null)}function e(){$("#"+x.view.target_id).html("");x.ad={product_attr:0,mobileweb_type:0,rotate_time:0,status:0,house:[],guarantee:[],selected:null,draw_sub_html:false};x.status={step:0,message:""};I(x.codes,x.callbacks)}function Ne(e){A(Y);var t="";if(e==r){t="Not supported browser.";P("error",r,k,null)}else if(e==R){t="iOS is not supported.";P("error",R,k,null)}else if(e==s){t="Android below version 4.0 is not supported.";P("error",s,k,null)}else if(e==v){t="Error occured while requesting AD.";P("error",v,k,null)}else if(e==d){t="Requesting AD has been timed-out.";P("error",d,k,null)}else if(e==a){t="Not allow AD request that is duplicated.";P("error",a,k,null)}else if(e==o){t="Error occured while parsing Ajax response.";P("error",o,k,null)}else if(e==g){t="There is no AD.";P("noad",g,k,null)}else{t="Unexpected error occured while requesting AD.";P("error",v,k,null)}u("Error occured. : "+t)}function je(e){if(e==null)return;var t=typeof e;if(t==="number"||t==="string"||t==="boolean"){return e}else if(t==="object"){if(e.hasOwnProperty("#cdata")){return e["#cdata"]}if(e.hasOwnProperty("#text")){return e["#text"]}return e}}function I(e,t){var i=$.Deferred();i.promise().done(Oe).fail(Ne);le(t);if(ce(U)){i.reject(a);return}A(U);if(e.mobile_param===""||e.mobile_param===undefined){_e(e)}else{pe(e)}fe(i,function(e,t){if(t!==null){e.reject(t);return}if(!be(e,x.ad_servers.entry)){u("Failed to request AD data.");e.reject(v);return}})}MezzoAD.prototype.setDebugMode=function(e){x.debug.mode=e};MezzoAD.prototype.onresume=function(){E()};MezzoAD.prototype.sdkForegroundCheck=function(){e()pe.viewabilityCall=function(){AaceMode=function(e){x.trace.mode=e};MezzoAD.prototype.setArea=function(e,t){if(e!="undefined"&&e!=null){x.area.auto_set=e}else x.area.auto_set=true;if(t!="undefined"&&t!=null)x.area.height_ratio=t;else x.area.height_ratio=100};MezzoAD.prototype.setView=function(e,t){if(e&&typeof e!=="undefined"){if(e.indexOf("#")==0){x.view.target_id=e.substr(1)}else{x.view.target_id=e}}if(t&&typeof t!=="undefined"){if(t.hasOwnProperty("logo_btn")&&t.logo_btn!==null&&typeof t.logo_btn!=="undefined"){x.view.option_for_ad.logo_btn=t.logo_btn}if(t.hasOwnProperty("close_btn")&&t.close_btn!==null&&typeof t.close_btn!=="undefined"){x.view.option_for_ad.close_btn=t.close_btn;x.view.option_for_ad.close_btn.setting=true}if(t.hasOwnProperty("ssl")&&t.ssl!==null&&typeof t.ssl!=="undefined"){x.ad_servers.ssl=t.ssl}if(t.hasOwnProperty("async")&&t.async!==null&&typeof t.async!=="undefined"){x.ad_servers.async=t.async}}x.view.option_for_ad.logo_btn={show:true,images:[K],location:ee};u("View parameters have been set.");f(x.view)};MezzoAD.prototype.setBaseURL=function(e,t){if(x.ad_servers.hasOwnProperty(e)){x.ad_servers[e].base_url=t;u("AD server's base url has been set.");f(e+": "+x.ad_servers[e].base_url)}};MezzoAD.prototype.setData=function(e){x.mobile.adid=e.adid;x.mobile.parameter=e.mobile_param;x.mobile.sspparameter=e.mobile_ssp_param;u("setData");u("_context.mobile.adid : "+x.mobile.adid);u("_context.mobile.parameter : "+x.mobile.parameter);u("_context.mobile.sspparameter : "+x.mobile.ssppaotype.request=function(e,t){I(e,t)};MezzoAD.prototype.mraid_unload=function(){if(x.ad.selected.sub_html!=null&&x.ad.selected.sub_html!=""){x.ad.draw_sub_html=true;x.ad.selected.html=x.ad.selected.sub_html;C();A(w);console.log("script mraid_unload")}};MezzoAD.prototype.mraidclickTracking=function(){if(j==false){if(x.ad.selected.click_tracking_api!=null){M(x.ad.selected.click_tracking_api,"click")}}else{if(N.key==N.click.key){M(N.click.url,"click");N.click.key=D()}}console.log("script mraidclickTracking")}}