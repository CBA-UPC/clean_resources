(self.webpackChunk=self.webpackChunk||[]).push([[359],{60458:44903:function(e,t,n){"use strict";n.d(t,{G:function(){return l},K:function(){return i}});var i=s=n(59312),o=n(24699),a=n(5294),r=function(e){function t(){var t=e.call(this)||this;return t._innerStatus=1,t.waitMaxFails=20,t.waitFailCounter=0,t.callbacks=[],t.waitLoading=function(){if(!t.checkStatusComplete(2,!0))throw new Error("Firebase not loaded but status do not equal ".concat(2," (initializing): ").concat(t.status));if("firebase"in window&&"messaging"in firebase)try{t.status=3,t.init()}catch(e){t.status=0}else t.waitFailCounter++,t.waitFailCounter>t.waitMaxFails?t.status=0:window.setTimeout(t.waitLoading,1e3)},t.handleMessage=function(e){(0,o.HQ)("PushAPI Firebase handleMessage").log(e),t.callbacks.map((function(t){t(e)}))},"Notification"in window&&"serviceWorker"in navigator&&"https:"===window.location.protocol||(t.status=0),t}return(0,s.ZT)(t,e),t.getInstance=t.prototype.subscribe=function(){return(0,s.mG)(this,void 0,void 0,(function(){var e,t;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,this.ready()];case 1:return n.sent(),[4,(e=firebase.messaging()).requestPermission()];case 2:return n.sent(),[4,e.getToken()];case 3:return[2,n.sent()];case 4:throw t=n.sent(),(0,o.HQ)("PushAPI Firebase subscribe failed").error(t.message||t),t;case 5:return[2]}}))}))},t.prototype.unsubscribe=function(e){return(0,s.mG)(this,void 0,void 0,(function(){var t;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.ready()];case 1:return n.sent(),[4,firebase.messaging().deleteToken(e)];case 2:return[2,n.sent()];case 3:throw t=n.sent(),(0,o.HQ)("PushAPI Firebase unsubscribe failed").error(t.message||t),t;case 4:return[2]}}))}))},t.prototype.onMessage=t.prototype.isAvailable=t.prototype.setup=function(){if(this.isAvailable()&&!("firebase"in window)&&!this.checkStatusComplete(3)){this.status=2;var e=function(n){if(t.libUris[n]){var i=t.libUris[n];if(!document.querySelector('script[src="'.concat(i,'"]'))){var s=document.createElement("script");s.async=!0,s.src=i,s.onload=function(){(0,o.HQ)("PushAPI Firebase loadLib success").log(n,i),e(n+1)},document.head.appendChild(s)}}};t.libUris.length&&e(0),this.waitLoading()}},t.prototype.init=function(){this.isAvailable()&&!this.checkStatusComplete(4)&&(this.status=4,firebase.initializeApp(t.config),firebase.messaging().onMessage(this.handleMessage))},t.prototype.ready=function(){return(0,s.mG)(this,void 0,void 0,(function(){var e,t=this;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return this.checkStatusComplete(4)?[2,!0]:this.checkStatusComplete(2)?(e=this,[4,new a((function(n,i){t.readyGenerator=function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return e.checkStatusComplete(4)?[3,2]:[4];case 1:return t.sent(),e.isAvailable()||i("Network error"),[3,0];case 2:return n(),[2,!0]}}))}(),t.readyGenerator.next(null)}))]):((0,o.HQ)("PushAPI Firebase ready").error("You must setup firebase before"),[2,!1]);case 1:return[2,n.sent()]}}))}))},t.prototype.onChangeStatus=function(e,t){(0,o.HQ)("PushAPI Firebase onChangeStatus").log(e,"->",t),this.readyGenerator&&this.readyGenerator.next(t)},t.prototype.checkStatusComplete=function(e,t){return void 0===t&&(t=!1),t?this.status===e:this.status>=e},Object.defineProperty(t.prototype,"status",{get:function(){return this._innerStatus},set:enumerable:!1,configurable:!0}),t.libVersion="7.21.0",t.libUris=["https://www.gstatic.com/firebasejs/".concat(t.libVersion,"/firebase-app.js"),"https://www.gstatic.com/firebasejs/".concat(t.libVersion,"/firebase-messaging.js")],t.config={apiKey:"AIzaSyBZPKKo_tInwfJZ0COBg0ZfmYyxacO6lsU",projectId:"bongacams-e8ad2",messagingSenderId:"918428164766",appId:"1:918428164766:web:c8b01dbfcdaf92e0c8918f"},t}(i),c=n(50754),u=n(80176),l=function(){function e(){var t,n=this;if(this.token=null,this.onMessage=this.removeMessageListener=function(t){if(n.isAvailable()){var i=[];e.callbacks.map((),e.callbacks=i}},"Notification"in window&&!c.o.isSafari()){var i=r.getInstance();i.isAvailable()&&(i.setup(),t=i)}t?(this.service=t,this.service.onMessage((function(t){(0,o.HQ)("PushAPI PushNotification onMessage").log(t),e.callbacks.map(()}))):(0,o.HQ)("PushAPI PushNotification init failed").error("not available")}return e.getInstance=function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return e.instance?[3,2]:(e.instance=new e,[4,e.instance.checkSubscription()]);case 1:t.sent(),t.label=2;case 2:return[2,e.instance]}}))}))},e.prototype.isAvailable=function(){return Boolean(this.service)},e.prototype.getToken=e.prototype.subscribe=function(){return(0,s.mG)(this,void 0,void 0,(function(){var e,t;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:if(!this.isAvailable())return[2,null];n.label=1;case 1:return n.trys.push([1,6,,7]),(0,o.HQ)("PushAPI PushNotification subscribe try").log(),[4,this.service.subscribe()];case 2:return(e=n.sent())?(this.token=e,[4,u.Fb.getInstance().saveToken(this.token)]):[3,5];case 3:return n.sent(),[4,u.Fb.getInstance().checkIsAuth()];case 4:n.sent(),(0,o.HQ)("PushAPI PushNotification subscribe success").log(e),n.label=5;case 5:return[2,e];case 6:switch((t=n.sent()).code){case"messaging/permission-blocked":case"messaging/permission-default":(0,o.HQ)("PushAPI PushNotification subscribe failed").log("show alert");break;case"messaging/unsupported-browser":(0,o.HQ)("PushAPI PushNotification subscribe failed").log("unsupported browser");break;default:(0,o.HQ)("PushAPI PushNotification subscribe failed").log(t)}return[2,null];case 7:return[2]}}))}))},e.prototype.unsubscribeAll=function(){return(0,s.mG)(this,void 0,void 0,(function(){var e,t;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:if(!this.isAvailable()||!this.isSubscribed())return[2,!1];n.label=1;case 1:return n.trys.push([1,5,,6]),(0,o.HQ)("PushAPI PushNotification unsubscribeAll try").log(),[4,this.service.unsubscribe(this.token)];case 2:return(e=n.sent())?[4,u.Fb.getInstance().removeToken()]:[3,4];case 3:n.sent(),this.token=null,(0,o.HQ)("PushAPI PushNotification unsubscribeAll success").log(),n.label=4;case 4:return[2,e];case 5:if("messaging/delete-token-not-found"===(t=n.sent()).code);else(0,o.HQ)("PushAPI PushNotification unsubscribeAll failed").error(t);return[3,6];case 6:return[2]}}))}))},e.prototype.isSubscribed=e.prototype.checkSubscription=function(){return(0,s.mG)(this,void 0,void 0,(function(){var e,t;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return window.Notification&&"granted"===Notification.permission&&u.Fb.getInstance().isAvailable()?[4,u.Fb.getInstance().checkIsAuth()]:[2];case 1:return n.sent(),this.isAvailable()?[4,u.Fb.getInstance().getToken()]:[2];case 2:return e=n.sent(),(0,o.HQ)("PushAPI PushNotification checkSubscription savedToken").log(e),e?[4,this.service.subscribe()]:[2];case 3:return t=n.sent(),(0,o.HQ)("PushAPI PushNotification checkSubscription serviceToken").log(t),t&&e===t?[3,7]:((0,o.HQ)("PushAPI PushNotification checkSubscription").log("remove all"),[4,u.Fb.getInstance().removeToken()]);case 4:return n.sent(),t?[4,this.service.unsubscribe(t)]:[3,6];case 5:n.sent(),n.label=6;case 6:return[2];case 7:return this.token=t,(0,o.HQ)("PushAPI PushNotification checkSubscription success").log(),[2]}}))}))},e.callbacks=[],e}()},27223:function(e,t,n){"use strict";n.d(t,{S:function(){return s},e:function(){return i}});var i=function(){return+(sv.c_storage.getItem("hover_ts")||"0")-+new Date},s=,68022:function(e,t,n){"use strict";n.d(t,{f:function(){return s},q:);var i=s=,97502:function(e,t,n){"use strict";n.r(t);var i=n(59312),s=n(24699),o=n(90761),a=n(27223),r=n(17206),c=n(4405),u=n(68022),l=n(55600),p=n(77028),d=function(){function e(){this.enabled=!0,this.left=0,this.top=0,this.right=0,this.bottom=0,this.custom=null,this.onHover=p.noop}return e.prototype.isHover=function(e,t){if(!this.enabled)return!1;if(this.custom)return this.custom(this,t,e);var n=e.pageX,i=e.pageY;return n>=this.left&&n<=this.right&&i>=this.top&&i<=this.bottom},e}(),h=function(){function e(){var e=this;this.areaList={},this.prevX=-1,this.prevY=-1,this.pageX=0,this.pageY=0,this.dirX=0,this.dirY=0,this.moveX=0,this.moveY=0,this.prev_dt=0,this._handleMouseMove=function(t){if((0,l.O)()){if(e._predict(t),null===t.pageX&&null!==t.clientX){var n=t.target&&t.target.ownerDocument||document,i=n.documentElement,s=n.body;e.pageX=t.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)}else e.pageX=t.pageX,e.pageY=t.pageY;for(var o in e.areaList){var a=e.areaList[o];a.isHover(e,t)&&a.onHover(t,e)}}},document.addEventListener("mousemove",this._handleMouseMove,!1)}return e.prototype._predict=function(e){var t=Math.floor(e.clientX),n=Math.floor(e.clientY);if(this.prevX!==t||this.prevY!==n){var i=Date.now();i-this.prev_dt>300&&(this.prevX=-1,this.prevY=-1),this.prev_dt=i,this.dirX=t-this.prevX,this.dirY=n-this.prevY,this.moveX=t+this.dirX,this.moveY=n+this.dirY,this.prevX=t,this.prevY=n}},e.prototype.newArea=function(e){var t=new d;return this.areaList[e]=t,t},e}(),f=n(61157),m=n(90685),v=n(51669),_=n(48586),b=n(65311),g=function(){var e,t=m.Z.getState().popupsConfig,n=[(null===(e=t[r.O.DISCOUNT_GOLD])||void 0===e?void 0:e.length)?r.O.DISCOUNT_GOLD:r.O.NP_DISCOUNT,r.O.EXIT].filter(();if(n.length){var i=(new h).newArea("default");i.custom=function(e,t){if(t.dirY>=0)return!1;var n=70+.08*b(window).height();if(t.clientY>n)return!1;var i=b(window).width(),s=170+.05*i,o=v.Go?s:i-s;return v.Go?t.clientX<o:t.clientX>o},i.onHover=function(){var e=f.A.instance,i=e.active,s=e.globalDelay;!i||s||(0,a.S)()||f.A.instance.isStopped||function(){var e=[];if(n.map((),e.length&&!e.some((function(e){var t=e.type;return b('[data-type="'.concat(t,'"]:visible')).length}))){var i=+sv.storage.getItem("rotation_order")%1e3||_.kk.rangeInt(0,e.length),s=e[i%e.length];sv.storage.setItem("rotation_order",++i),s&&(0,c.U)(s.type)}(0,u.q)()}()}}},P=(n(12677),n(23666)),I=n(63842),A=n(65311),O=function(){eturn e.attachHandlers=function(){var e=[".login_form input",".js-filter_wrap","#fl_quick_search",".remote_popup_form input",".remote_popup_form textarea",".remote_popup_form .cszb_select","#bChat .js-chat_msg_input",".gift_wrapper textarea",".js-tip_model input","#tip_model_popup_container label","#tip_model_popup_container textarea",".js-tip_panel_radio",".js-tip_panel_input",".js-new_message_form input",".js-new_message_form textarea",".js-im_form_reply textarea",".bc_popalert",".bcf-popup",".ui-icon-closethick",".ui-icon-close",".add_profile_comment .pm_close","#bongacams_popup .popup_close","#tip_model_popup_input_message","#tip_model_popup_input_amount"].join(", ");A(document).on("keyup focus mouseup wheel touchstart",e,(0,I.P)((function(){var e;null===(e=f.A.instance)||void 0===e||e.setUserInteractionLock()}),500)),A(document).on("mousemove",(0,I.P)((function(t){var n,i=A(t.target);(document.activeElement&&A(document.activeElement).is(e)||i.closest(".js-filter_wrap, #fl_quick_search").length)&&(null===(n=f.A.instance)||void 0===n||n.setUserInteractionLock())}),500))},e}(),w=n(49721),k=n(74891),y=n(65311),S=n(35840),E=n(24595),N=n(51670),T=n(13279),C=n(10473),L=n(13354),M=document.getElementById("popups_wrap")||document.body;function G(e){return(0,i.mG)(this,void 0,void 0,(function(){var t,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if("number"==typeof(s=e.title))switch(s){case 7301:s="BctalkInfo";break;case 7303:s="BctalkBikini";break;case 7305:s="BctalkBlueQr";break;default:return[2]}else s=s.replace(/[%-]/g,"").replace(/\(Purchase\)|\(StatusPage\)/g,"");i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n(60458)("./".concat(s))];case 2:return t=i.sent(),[3,4];case 3:return i.sent(),[3,4];case 4:return t&&M?[2,(0,L.render)((0,C.h)(T.zt,{store:m.Z},(0,C.h)(t.default,{popupConfig:e})),M).base]:[2,null]}}))}))}var x,D=n(65311),F=function(e,t){var n,i;void 0===t&&(t=!0),(0,s.HQ)("Popups Effects afterClose").warn(e),e.name===r.O.MEMBER_CONFIRM_EMAIL&&m.Z.setState({isShowConfirmEmailPopup:!1}),(null===(n=e.activeElement)||void 0===n?void 0:n.find("video").length)&&setTimeout((function(){D(".fancy_popup.__open").find("video").each((function(e,t){t.pause(),t.currentTime=0,D(t).show()}))}),1),[r.O.NP_DISCOUNT,r.O.DISCOUNT_GOLD].includes(e.name)&&(0,u.q)(),e.name===r.O.NEWS_IM?null===(i=f.A.instance.list.news_im)||void 0===i||i.refresh():t&&f.A.instance.open(r.O.NEWS_IM)},B=n(74331),U=n(35705),R=n(65311),H=n(4641),Q=n(60698),j=n(19848),Z=n(5294),Y=n(65311);!x||(x={}));var W=function(){var e=m.Z.getState(),t=e.isAuthenticated,n=e.popupsConfig,a={},c=null;f.A.instance.onShow=function(e,u){return(0,i.mG)(void 0,void 0,void 0,(function(){var l,p,d,h,_,b,g,P,I,A,O,w,k,y,T,C,L;return(0,i.Jh)(this,(function(M){switch(M.label){case 0:return l=u.customData,p=u.taskId,"function"!=typeof e.renderFn?[3,2]:((0,s.HQ)("Popups TM onShow external").warn({task:e}),[4,e.renderFn(e,l)]);case 1:return M.sent(),[2,!0];case 2:return Y(".fancybox-overlay .fancybox-type-iframe").length||Y(".fancy_popup.__open .video_ls_popup").length||!o.y.instance?((0,s.HQ)("Popups TM onShow skip").warn("container not found",{task:e}),[2,!1]):e.iframe?l.href?((0,s.HQ)("Popups TM onShow").warn("iframe",{task:e}),[2,o.y.instance.show(e,{taskId:p,customData:l})]):[2,!1]:[4,(0,i.mG)(void 0,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=[],n=f.A.instance.isDebug,(t||n)&&((0,S.Z)([x.LOGGED_POPUPS],!0)||e.push((0,E.K)(x.LOGGED_POPUPS,void 0,{"data-exclude":!0}))),t&&!n||(0,S.Z)([x.GUEST_POPUPS],!0)||e.push((0,E.K)(x.GUEST_POPUPS,void 0,{"data-exclude":!0})),v.Go&&!(0,S.Z)([x.ARABIC_POPUPS],!0)&&e.push((0,E.K)(x.ARABIC_POPUPS,void 0,{"data-exclude":!0})),e.length?[4,Z.all(e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))];case 3:return M.sent(),[r.O.JOIN_POPUP,r.O.JOIN_POPUP_MANUAL].includes(e.name)?((0,s.HQ)("Popups TM onShow").warn("signup",{task:e}),[2,o.y.instance.show(e,{taskId:p,customData:(0,i.pi)((0,i.pi)({},l),{isClick:"join_popup_manual"===e.name})})]):e.selector||n[e.name]?(d=m.Z.getState(),(h=(0,H.P9)(d))===Q.kf.ALL&&(h=Q.kf.FEMALE),_=(0,i.pi)((0,i.pi)({},n),n.gold&&{gold:n.gold.filter(()}),b=null,g=sv.storage.getItem("viewedPopups")||"",P=[],(null===(L=_[e.name])||void 0===L?void 0:L.length)?(I=_[e.name].filter((),I.map((function(e){e.title;var t=e.id;a[t]||(g.indexOf(t)>=0?a[t]=!0:P.push(t))})),c&&(D=c,N.C.unmount(D)),I.length>1?((k=P.length)||(I.map((function(e){e.title;var t=e.id;g=g.replace(t+" ",""),a[t]&&(a[t]=!1)})),k=I.length),y=p%k,A=I.filter((function(e){e.title;var t=e.id;return!a[t]})),[4,G(O=A[y])]):[3,5]):[3,7]):((0,s.HQ)("Popups TM onShow skip").warn("unknown popup",{task:e}),[2,!1]);case 4:return(c=M.sent())&&(b=Y(c),O.id&&(g+=O.id+" ",a[O.id]=!0,sv.storage.setItem("viewedPopups",g))),[3,7];case 5:return[4,G(I[0])];case 6:(c=M.sent())&&(b=Y(c)),M.label=7;case 7:if(!b&&e.selector){if(!(w=Y(e.selector).filter(()).length)return(0,s.HQ)("Popups TM onShow skip").warn("popup not found",{task:e}),[2,!1];P=[],Y.each(w,(function(){var e=Y(this).attr("id");a[e]||(g.indexOf(e)>=0?a[e]=!0:P.push(e))})),w.length>1?((k=P.length)||(Y.each(w,(function(){var e=Y(this).attr("id");g=g.replace(e+" ",""),a[e]&&(a[e]=!1)})),k=w.length),y=p%k,T=w.filter((function(){var e=Y(this).attr("id");return!a[e]})),b=T.eq(y),C=b.attr("id"),g+=C+" ",a[C]=!0,sv.storage.setItem("viewedPopups",g)):b=w}return b&&b.length?(e.activeElement=b,(0,s.HQ)("Popups TM onShow").warn({task:e}),[2,o.y.instance.show(e,{taskId:p,afterShow:function(){if((0,s.HQ)("Popups Dialog afterShow").log({taskId:p,task:e}),e.track&&function(e){if(e.activeElement.length&&(!f.A.instance.activeInfo||f.A.instance.activeInfo.taskId!==+sv.storage.getItem("tm_lastTrack"))){var t=f.A.instance.activeInfo?f.A.instance.activeInfo.taskId:0;sv.storage.setItem("tm_lastTrack",t);var n=e.activeElement.data("track_url");if(n){var s=(0,i.pi)({},e.trackParams);R.get(n,s)}}}(e),e.event&&function(e){if(e.activeElement.length&&(!f.A.instance.activeInfo||f.A.instance.activeInfo.taskId!==+sv.storage.getItem("tm_lastEvent"))){var t=f.A.instance.activeInfo?f.A.instance.activeInfo.taskId:0;sv.storage.setItem("tm_lastEvent",t);var n=e.activeElement.data("event_name");if(n){var i={},s=e.activeElement.data("popup_id");s&&(i.popup_id=s);var o=R.extend({},{type:n,params:i},e.trackParams);o=(0,U.N)(o),R.ajax({url:(0,B.QW)("@ajax_register_user_event"),data:o,type:"post"})}}}(e),e.name===r.O.BF_CM_AFTER_LOGIN&&Y(e.activeElement).attr("data-track_url_after_login")&&Y.get(Y(e.activeElement).attr("data-track_url_after_login")),e.activeElement.find("video").length){var t=function(e){Y(e.target).hide(),(0,j.Qx)()&&(0,j.kO)(!1)};setTimeout((function(){Y(".fancy_popup.__open").find("video").each((function(e,n){n.muted=!0,n.play(),setTimeout((,1)}))}),1)}},customData:l})]):((0,s.HQ)("Popups TM onShow skip").warn("popup not found",{task:e}),[2,!1])}var D}))}))},f.A.instance.onClose=F},J=m.Z.action((),X=n(80176),V=n(44903),K=n(9301),q=n(76139),z=n(7843),$=n(98030),ee=n(58237),te=n(77038),ne=(0,T.$j)(()((0,L.memo)((function(e){var t=e.skinName,n=e.onSubscribe,i=void 0===n?p.noop:n,s=e.onCancel,o=void 0===s?p.noop:s;return(0,C.h)("div",{className:"bc_scroll_compensation push_notification_alert"},(0,C.h)(ee.Z,{group:"pna_icon",icon:"#svg_icon_push_alert",url:te.fI}),(0,C.h)("p",{className:"pna_title"},__("Don't miss out the most important %skin% news!",{skin:t})),(0,C.h)("p",{className:"pna_desc"},__("Subscribe to push notifications and be among the first ones to learn about the biggest discounts and best offers.")),(0,C.h)("div",{className:"pna_active bc_flex bc_flex_justify_s_between"},(0,C.h)("button",{className:"pna_btn bt35 bt35_green",onClick:i},__("Subscribe")),(0,C.h)("button",{className:"pna_btn btn_silver",onClick:o},__("No, thanks"))))}))),ie=n(65311),se=function(){function e(){var e,t=this;this.idbKey="pnd",this.idbTrackUrlKey="pntu",this.deferDelay=7776e3,this.forceDisabled=!1,this.isModerator="moderator"===(null===(e=m.Z.getState().user)||void 0===e?void 0:e.role),this.handleSubscribe=function(){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return N.C.unmount(this.rootElement),this.rootElement=null,f.A.instance.disableTask(r.O.PUSH_NOTIFICATION_ALERT),[4,this.subscribe()];case 1:return e.sent(),this.attachNotificationListener(),[2]}}))}))},this.handleCancel=function(){var e;N.C.unmount(t.rootElement),t.rootElement=null,null===(e=f.A.instance)||void 0===e||e.disableTask(r.O.PUSH_NOTIFICATION_ALERT),(0,z.d8)("pnd","1",{expires:t.deferDelay})},this.attachNotificationListener()}return Object.defineProperty(e,"instance",{get:function(){return this._instance=this._instance||new this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAvailable",{get:function(){if(this.forceDisabled)return!1;var e=K.i.isNewVersion(74)?".header_box":".page_header";return!!document.querySelector(e)&&(!(0,z.ej)("pnd")&&(!(0,z.ej)("pnex")&&this.isPushAvailable))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPushAvailable",{get:function(){var e;return!this.isModerator&&(!(!window.Notification||"denied"===(null===(e=window.Notification)||void 0===e?void 0:e.permission))&&![(0,B.QW)("@member_buy_tokens"),(0,B.QW)("@member_buy_vip"),(0,B.QW)("@member_buy_invisibility")].includes(location.pathname))},enumerable:!1,configurable:!0}),e.prototype.mount=function(e){return void 0===e&&(e=!1),(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return e?[3,2]:this.isAvailable?[4,this.hasSubscription()]:((0,s.HQ)("PushNewsModule mount failed").log("unavailable"),[2,!1]);case 1:if(t.sent()[0])return(0,s.HQ)("PushNewsModule mount failed").log("not sub"),[2,!1];t.label=2;case 2:return(0,s.HQ)("PushNewsModule mount success").log(),this.renderComponent(),[2,!0]}}))}))},e.prototype.renderComponent=function(){this.rootElement||((0,s.HQ)("PushNewsModule renderComponent").log(),this.rootElement=N.C.append((0,C.h)(T.zt,{store:m.Z},(0,C.h)(ne,{onSubscribe:this.handleSubscribe,onCancel:this.handleCancel})),document.body))},e.prototype.hasSubscription=function(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=this.pushInstance.getToken(),[4,X.Fb.getInstance().getData(this.idbKey)];case 1:return t=i.sent(),n=Boolean(e&&t&&t===e),[2,[Boolean((0,z.ej)("pnex"))||n,n]]}}))}))},e.prototype.attachNotificationListener=function(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t,n,o,a,r,c,u=this;return(0,i.Jh)(this,(function(l){switch(l.label){case 0:return this.isPushAvailable?this.pushInstance?[3,2]:(e=this,[4,V.G.getInstance()]):((0,s.HQ)("PushNewsModule attachNotificationListener failed").log("unavailable"),[2]);case 1:if(e.pushInstance=l.sent(),!this.pushInstance.isAvailable())return this.forceDisabled=!0,(0,s.HQ)("PushNewsModule attachNotificationListener failed").log("push unavailable"),[2];l.label=2;case 2:return[4,this.hasSubscription()];case 3:if(t=l.sent(),n=t[0],o=t[1],!n)return(0,s.HQ)("PushNewsModule attachNotificationListener failed").log("not sub"),[2];if(!o)return(0,s.HQ)("PushNewsModule attachNotificationListener failed").log("same domain"),[2];a="".concat(location.origin,"/sw/pn-messaging-sw.js"),l.label=4;case 4:return l.trys.push([4,6,,7]),[4,navigator.serviceWorker.register(a)];case 5:return r=l.sent(),[3,7];case 6:return c=l.sent(),(0,s.HQ)("PushNewsModule attachNotificationListener failed").error("register",c),[2];case 7:return(0,s.HQ)("PushNewsModule attachNotificationListener success").log(),X.Fb.getInstance().setData(this.idbTrackUrlKey,(0,B.QW)("@track_site_push_notification")),this.pushInstance.onMessage((function(e){return(0,i.mG)(u,void 0,void 0,(function(){var t,n,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return"granted"!==(null===(n=null===window||void 0===window?void 0:window.Notification)||void 0===n?void 0:n.permission)||(null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.type)!==q.Z.SITE_NOTIFICATION?[2]:(e.data.data=JSON.parse(JSON.stringify(e.data)),(t=e.data.message_mongo_id)&&!e.data.is_preview&&this.track("delivery",t),[4,r.showNotification(e.data.title,e.data)]);case 1:return i.sent(),[2]}}))}))})),[2]}}))}))},e.prototype.subscribe=function(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t=this;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.pushInstance.subscribe()];case 1:return(e=n.sent())?[2,ie.ajax({url:(0,B.QW)("@subscribe_on_site_push_notifications"),dataType:"json",type:"post",data:{hash:e},success:function(){(0,z.d8)("pnex","1",{domain:(0,$.getRealDomain)(),expires:t.deferDelay}),X.Fb.getInstance().setData(t.idbKey,e)}})]:[2]}}))}))},e.prototype.track=function(e,t){ie.ajax({url:(0,B.QW)("@track_site_push_notification"),dataType:"json",type:"post",data:{type:e,id:t}})},e}(),oe=n(31198),ae=n(14344),re=function(e){var t,n=[e.DMCA,e.PRIVACY_POLICY,e.REVIEWS,e.SITEMAP,e.CONCIERGE_SERVICE,e.COMPLIANCE_NOTICE_2257,e.TERMS_AND_CONDITIONS,e.NOT_FOUND],s=[e.LOGIN,e.TFA_LOGIN,e.FORGOT_PASSWORD,e.RESET_PASSWORD,e.JOIN],o=[e.FREE_TOKENS_PAGES,e.CASHBACK_NFT,e.FOLLOWERS_PAGES,e.PINNED_MODELS,e.IM_PAGES,e.ACCOUNT_PAGES,e.MEMBER_ACCOUNT_VIP_OVERVIEW,e.MEMBER_ACCOUNT_INVISIBLE_MODE_OVERVIEW,e.MEMBER_ACCOUNT_MEMBERSHIP,e.MY_PROFILE_ALBUMS,e.PRICES,e.MY_PROFILE_PAGE,e.ANOTHER_PROFILE_INNER_PAGES];return(t={})[r.O.JOIN_POPUP]=(0,i.ev)((0,i.ev)((0,i.ev)([],n,!0),s,!0),[e.ANOTHER_PROFILE_INNER_PAGES],!1),t[r.O.BF_CM_AFTER_LOGOUT]=(0,i.ev)((0,i.ev)((0,i.ev)([],n,!0),s,!0),[e.ANOTHER_PROFILE_INNER_PAGES,e.CYBER_SALE],!1),t[r.O.GIVE_AWAY_BONUS]=(0,i.ev)([],s,!0),t[r.O.PUSH_NOTIFICATION_ALERT]=(0,i.ev)([],s,!0),t[r.O.SPOOF_IM]=(0,i.ev)((0,i.ev)([],s,!0),[e.CYBER_SALE],!1),t[r.O.GOLD]=(0,i.ev)((0,i.ev)([],n,!0),o,!0),t[r.O.EXIT]=(0,i.ev)((0,i.ev)([],n,!0),o,!0),t[r.O.DISCOUNT_GOLD]=(0,i.ev)((0,i.ev)([],n,!0),o,!0),t[r.O.STATUS]=(0,i.ev)((0,i.ev)([],n,!0),o,!0),t[r.O.BF_CM_AFTER_LOGIN]=(0,i.ev)((0,i.ev)((0,i.ev)([],n,!0),o,!0),[e.CYBER_SALE],!1),t[r.O.BF_CM]=(0,i.ev)((0,i.ev)((0,i.ev)([],n,!0),o,!0),[e.CYBER_SALE],!1),t},ce=n(65311),ue=function(){var e,t=m.Z.getState(),s=t.isAuthenticated,o=t.user,a=t.showRegistrationPopups,c=t.loyaltyDiscountEnabled,l=t.isAutoPurchaseTokensEnable,p=t.popup,d=t.alerts,h=t.isShowConfirmEmailPopup,v=t.isBFCMPopupAvailableAfterLogout,_=o.membership,b=d.giveAwayAlert||d.memberBonus,g=ce("#member_join_popup_trigger"),I=!s&&g.length&&a,A=I&&g.data("timer_enabled"),O=(0,z.Vj)("bcnotokenssince"),k=null!==O;k&&(O=Math.floor((Date.now()/1e3-parseFloat(O))/60));var y=s&&_===ae.Z.FREE,S=s&&_===ae.Z.GOLD,E=s&&ae.Z.isHigherThanGold(_),N=s&&[ae.Z.DIAMOND,ae.Z.EXCLUSIVE].includes(_),T=!!document.querySelector(".vip_overview_page"),C=document.body.classList.contains("chat_visible");f.A.instance.setExcludedRoutesMap(re),f.A.instance.setTasks(((e={})[r.O.JOIN_POPUP]={available:A,timeLine:[{time:2},{time:7,loop:!0}],order:49,sync:!1},e[r.O.GOLD]={timeLine:[{time:6.5,loop:!0,rand:3.9}],track:!0,order:12,sync:!0,selector:".gold_popup"},e[r.O.STATUS]={timeLine:[{time:p.statusPopupFirstTimeout||9.1},{time:720*(N?1.3:6.5),loop:!0}],order:11,track:!0,sync:!0,selector:".status_popup",condition:,e[r.O.BF_CM]={available:y,timeLine:[{time:13,loop:!0}],track:!0,sync:!0,selector:".bf_cm_popup"},e[r.O.BF_CM_AFTER_LOGIN]={available:s&&!y,timeLine:[{time:6.5}],order:5,track:!0,sync:!0,selector:".bf_cm_popup"},e[r.O.BF_CM_AFTER_LOGOUT]={available:A&&v,timeLine:[{time:4},{time:14,loop:!0}],order:5,track:!0,sync:!1,selector:".bf_cm_popup"},e[r.O.BITCOIN_PAYPAL]={timeLine:[{time:E?0:2.6}],order:40,event:!0,track:!0,sync:!0,selector:".bitcoin_paypal_popup"},e[r.O.INITIAL_BONUS]={timeLine:[{time:E?0:2.6}],order:40,event:!0,track:!0,sync:!0,selector:".initial_bonus_popup"},e[r.O.FPM]={available:!location.pathname.includes("/mobile-campaign"),timeLine:[{time:1,immediately:!0}],order:40,event:!0,track:!0,sync:!0,selector:".fpm_popup"},e[r.O.NEW_MEMBER]={available:y,timeLine:[{time:1,immediately:!0}],order:6,track:!0,event:!0,sync:!0,selector:".js-new_member_popup"},e[r.O.SBS_DISCOUNT]={timeLine:[{time:1,immediately:!0},{time:1152,loop:!0}],order:10,track:!0,sync:!0,selector:".sbs_discount_popup"},e[r.O.NPR_DISCOUNT]={timeLine:[{time:1,immediately:!0},{time:936,loop:!0}],order:10,track:!0,event:!0,sync:!0,selector:".js-npr_discount_popup"},e[r.O.NO_TOKENS]={available:!l&&k&&O>1440&&(E||S),condition:function(){return parseInt(ce(".js-tokens").first().text()||"0",10)<=0},timeLine:[{time:9.1,loop:!0}],order:10,track:!0,sync:!0,selector:".no_tokens_popup"},e[r.O.VIP]={available:S,enabled:!T,timeLine:k&&O<=1440?[{time:136.5,loop:!0}]:[{time:k&&O>=2880?45.5:65},{time:14040,loop:!0}],order:20,track:!0,sync:!0,selector:".vip_popup"},e[r.O.VIP_PREMIUM]={available:E,enabled:!T,timeLine:k&&O<=1440?[{time:136.5,loop:!0}]:[{time:k&&O>=2880?45.5:65},{time:14040,loop:!0}],order:20,track:!0,sync:!0,selector:".vip_popup"},e[r.O.GIFT_CARD_DEFAULT]={available:s,selector:".gc_default",sync:!0},e[r.O.GIFT_CARD_EXCLUSIVE]={available:s,sync:!1,selector:".gc_exclusive"},e[r.O.VIP_GIFT_CARD]={available:s,sync:!1,selector:".gc_popup_vip"},e[r.O.BT_POPUP]={timeLine:[{time:y?2.6:0}],order:40,event:!0,sync:!0,selector:".js-bt_popup"},e[r.O.MEMBER_CONFIRM_EMAIL]={available:h,sync:!0,condition:order:-1,timeLine:[{time:1,loop:!0,immediately:!0}],renderFn:function(){return n.e(356).then(n.bind(n,56311)).then(()}},e[r.O.NEWS_IM]={available:s,condition:function(){var e=m.Z.getState(),t=e.cyberSale,n=e.newsIm,i=n.disabled,s=n.newsIms,o=void 0===s?[]:s,a=n.showedNewsIms,r=void 0===a?[]:a;if(i)return!1;if(["free-tokens","initial-campaign","gift-cards"].some(())return!1;var c=o.filter((function(e){var t=e.newsImId;return!r.includes(t)}));if(t){var u=[402,403,405];c=c.filter(()}return c.length>0},timeLine:[{time:1,loop:!0,immediately:!0}],delay:60,order:7,sync:!1,renderFn:function(){document.dispatchEvent(new CustomEvent(w.m.NEWS_IM_OPEN,{detail:{force:!0}}))}},e[r.O.GIVE_AWAY_BONUS]={available:d.giveAwayAlert,condition:function(){var e=m.Z.getState().alerts;return(void 0===e?{}:e).giveAwayAlert&&!document.body.classList.contains("chat_visible")},timeLine:[{time:1,loop:!0,immediately:!0}],order:8,sync:!1,renderFn:function(e){P.Z.instance.showAlert("giveAwayAlert")||(f.A.instance.close(void 0,!1),f.A.instance.setTime(e.name,60),f.A.instance.setGlobalDelay(0))}},e[r.O.MEMBER_BONUS]={available:d.memberBonus,condition:function(){var e=m.Z.getState().alerts;return(void 0===e?{}:e).memberBonus},timeLine:[{time:1,loop:!0,immediately:!0}],order:8,sync:!1,renderFn:function(e){P.Z.instance.showAlert("memberBonus")||(f.A.instance.close(void 0,!1),f.A.instance.setTime(e.name,60),f.A.instance.setGlobalDelay(0))}},e[r.O.PUSH_NOTIFICATION_ALERT]={condition:timeLine:[{time:b?5:3,loop:!0}],order:9,sync:!1,renderFn:function(e,t){return void 0===t&&(t={}),(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return ce(".js-bc_popalert_wrp").is(".__give_away, .__member_bonus")?(f.A.instance.close(void 0,!1),f.A.instance.setTime(e.name,180),f.A.instance.setGlobalDelay(0),[2]):[4,se.instance.mount(t.debug)];case 1:return n.sent()||(f.A.instance.close(void 0,!1),f.A.instance.disableTask(e.name),f.A.instance.setGlobalDelay(0)),[2]}}))}))}},e[r.O.SPOOF_IM]={available:!s,condition:function(){var e=m.Z.getState().spoofIm,t=document.body.classList.contains("page_index"),n=document.body.classList.contains("chatPopupBody"),i=(window.chat||{}).visibility;return!n&&t&&"collapse"!==i&&!e.username},timeLine:[{time:10/60,loop:!0}],order:50,delay:C?10:(0,oe.KN)(),sync:!1,renderFn:,e[r.O.NO_TOKENS_MANUAL]={track:!0,selector:".no_tokens_popup",sync:!0},e[r.O.LOYALTY_DISCOUNT]={available:s,enabled:c,sync:!1,iframe:!0},e[r.O.JOIN_POPUP_MANUAL]={available:I,sync:!1},e[r.O.BUY_TOKENS_FRAME]={available:s,sync:!1,iframe:!0},e[r.O.BT_APP]={sync:!1,selector:".js-bt_app_popup"},e[r.O.EXIT]={track:!0,selector:".exit_popup",sync:!0},e[r.O.NP_DISCOUNT]={track:!0,selector:".discount_popup",sync:!0},e[r.O.DISCOUNT_GOLD]={track:!0,selector:".discount_gold_popup",sync:!0},e)),sv.c_storage.getItem("hover_ts")||(0,u.f)()},le=n(65311);le((function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){try{if(!le("#popups_wrap").length)return[2];le(document).on("cybersaleDiscount:page",(),le(document).on("onNoticeSocketMessage",(function(e,t){"mpur"===(null==t?void 0:t.type)&&fetch((0,B.QW)("@ajax_member_info"),{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(().then((function(e){0!==e.popupsConfig.length&&(J((0,i.pi)({},e.popupsConfig)),W(),ue())}))})),o.y.instance=new o.y,f.A.instance=new f.A,W(),ue(),function(){var e;y(document).on("click","a[data-click_track_url]",(function(e){var t=y(this),n=t.data("click_track_url");n&&(e.preventDefault(),y.get(n,())})),y(document).on("click",".js-bt_popup_show",(function(){return f.A.instance.open(r.O.BT_APP),!1})),y(document).on("chat:visibility",(function(e,t){f.A.instance.refreshList(),"visible"===t&&P.Z.instance.hideAlert("giveAwayAlert"),f.A.instance.close(!1)})),y(document).on("click","a[data-popup_close]",(function(){var e;y(this).data("popup_close")&&(null===(e=o.y.instance)||void 0===e||e.hide())})),document.addEventListener(w.m.NEWS_IM_CLOSE,(function(){var e;(0,s.HQ)("Popups Effects nimClose").warn(),(null===(e=f.A.instance.activeTask)||void 0===e?void 0:e.name)===r.O.NEWS_IM&&f.A.instance.close(!1,!1)})),y(document).on("click",".popup_hide",(function(e){e.preventDefault(),(0,s.HQ)("Popups Effects hideClick").log(),f.A.instance.close()})),y(document).on("click",".js-popup_hide, .js-popup_hide_manual",(function(e){var t=e.currentTarget.classList.contains("js-popup_hide_manual"),n=e.currentTarget.getAttribute("href"),i="A"===e.currentTarget.tagName.toUpperCase()&&n&&"#"!==n&&!n.startsWith("javascript");i||e.preventDefault(),(0,s.HQ)("Popups Effects hideClickJS").log({isManual:t,gotoLink:i}),f.A.instance.close(void 0,!t&&!i)})),null===(e=o.y.instance)||void 0===e||e.on("onClose",(function(e,t){var n=f.A.instance.activeInfo;(0,s.HQ)("Popups Dialog onClose").log([null==n?void 0:n.name,null==n?void 0:n.taskId],[e,t]),n&&n.taskId===t&&n.name===e&&f.A.instance.close()})),k.B.on("newsIm",(function(){var e;null===(e=f.A.instance.list.news_im)||void 0===e||e.refresh()})),k.B.on("isFullScreen",(function(){var e;null===(e=f.A.instance.list.status)||void 0===e||e.refresh()})),k.B.on("fancyPopup",(),k.B.on("alerts",(function(e,t){var n,i;if(null===(n=f.A.instance.list.member_bonus)||void 0===n||n.refresh(),null===(i=f.A.instance.list.give_away_bonus)||void 0===i||i.refresh(),e.alerts&&t.alerts)for(var s in e.alerts)if(["memberBonus","giveAwayAlert"].includes(s)&&!e.alerts[s]&&t.alerts[s]){f.A.instance.setTime(r.O.PUSH_NOTIFICATION_ALERT,180);break}})),document.addEventListener(w.m.NEWS_IM_CLOSE,(),O.attachHandlers()}(),le("body.page_profile").length||g(),f.A.instance.run()}catch(e){(0,s.HQ)("Popups TM run Failed").error(e)}return[2]}))}))}))},76139:function(e,t,n){"use strict";var i=n(59312),s=n(21660).Z);t.Z=s}}]);