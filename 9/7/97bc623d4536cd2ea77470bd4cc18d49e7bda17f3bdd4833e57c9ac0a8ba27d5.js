"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5835],{25847:(e,t,n)=>{n.d(t,{Z:()=>j});var a=n(50959),i=n(69736),o=n(60702),s=n(60046),l=n(56146),r=n(5863);const c="MUiWCNTfb6FcSwVPvQ1V",d="UAk3bMhekwJTV_wIyfsT",m="X9w6LPfKsZHMCs38sVIQ",v="NXn5KjeUOjLGlAfS1Gao",u="N0wgFMDDvCiby4QB5kLJ",g="nloNe2BLRHjz9dxlwfLU",h="FyD0hF1e2PKzRxQ6sYDQ",p="JzXND83mXvcEuntCNR34",x="GR08E4L_rOGljyQQX30R";var y=n(11527);const j=(0,a.memo)((e=>{const{uri:t,title:n,imageUrl:a,date:j,location:f,firstParty:N,onClick:k}=e,_=(0,r.CH)(j);return(0,y.jsxs)(s.Link,{to:t,className:c,"data-testid":"concert-card",onClick:k,children:[a&&(0,y.jsx)(l.Z,{children:(0,y.jsx)("div",{role:"img",className:x,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${a})`}})}),(0,y.jsx)("time",{className:d,dateTime:j,children:(0,y.jsx)(i.x,{as:"div",variant:"bodySmallBold",children:(0,r.jx)(_)})}),(0,y.jsxs)("div",{className:m,dir:"auto",children:[(0,y.jsx)(i.x,{as:"p",className:p,variant:"bodySmall",children:[(0,r.FO)(_),(0,r.hK)(_)].join(" • ")}),(0,y.jsx)(i.x,{as:"h2",variant:"bodyMediumBold",className:v,children:n}),(0,y.jsxs)("div",{className:u,children:[N&&(0,y.jsx)("span",{className:h,children:(0,y.jsx)(o.V,{size:"small"})}),(0,y.jsx)(i.x,{as:"span",className:g,variant:"bodySmall","data-testid":"location-name",children:f})]})]})]})}))},88993:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(50959),i=n(11317),o=n(85648),s=n(50554),l=n(43827),r=n(25847),c=n(11527);const d=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:d,location:m}=t,v=t.artists[0];return(0,c.jsx)(r.Z,{uri:(0,i.g3)(t.id).toURI(),title:(0,l.ij)(t),imageUrl:v.imageUri,date:t.startDate.localDate,location:n?d:[d,m].join(o.ag.getSeparator()),firstParty:(0,s.$R)(t),onClick:a})}))},50554:(e,t,n)=>{n.d(t,{$R:()=>r,DF:()=>v,Vv:()=>d,ie:()=>u,k9:()=>l,pm:()=>m,sk:()=>c,yI:()=>o});n(75930),n(92027),n(73792),n(46758),n(39301);var a=n(44242),i=n(16012);const o=(e,t)=>{if(!e)return"/concerts";const n=null==t?void 0:t.normalize().replaceAll(/\W+/g,"-");return n?`/concerts/location/${e}-${n}`:`/concerts/location/${e}`},s=10;function l(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let n={date:e[0].events[0].openingDate.slice(0,s),events:[]};for(const a of e)for(const e of a.events){const a=e.openingDate.slice(0,s);n.date!==a&&(t.push(n),n={date:a,events:[]}),n.events.push(e)}return t.push(n),t}const r=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),c=e=>e.concerts.some((e=>{let{concert:t}=e;return r(t)})),d=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const n=new Date(t);return n.setDate(t.getDate()+1),{from:t,to:n}},m=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const n=new Date(t);n.setDate(t.getDate()+7);const a=new Date(n);return a.setDate(n.getDate()+1),{from:n,to:a}},v=(e,t)=>!!(null!=e&&e.from&&null!=e&&e.to&&null!=t&&t.from&&null!=t&&t.to)&&((0,a.K)(e.from,t.from)&&(0,a.K)(e.to,t.to)),u=e=>(0,i.c)(e,{representation:"date"})},59242:(e,t,n)=>{n.r(t),n.d(t,{default:()=>cn});n(75930);var a=n(50959),i=n(29132),o=n(75802),s=n(36275),l=n(39505),r=n(44614),c=n(55004),d=n(40701),m=n(90779),v=n(41423),u=n(24936),g=n(18517),h=n(34410),p=n(85648),x=n(37335),y=n(97922),j=n(81639),f=n(16118),N=n(87350),k=n(80626),_=n(47895),b=(n(86277),n(65484),n(35174),n(96241),n(44242)),S=n(69736),C=n(52438),D=n(31848),I=n(75383),F=n(41038),L=n(38024),w=n(91643),U=n(70930),E=n(28105),M=n(90657),P=n(60702),O=n(7863),B=n(21705),W=n(40537),A=n(60046),G=n(50554),R=n(5863),T=n(43827);const H="cELOd04or4B6BbTbNWA7",z="CHJYbX33oDik9u4n4ohH",$="woQ0wEe6FL4lsGW05bsb",V="KTDREr8pDWjrmnzXzZ2z",K="UUTvdEOH2v_rejoXdl9Z",q="cBbTozR921ppaoNZP0Uh",Z="SNyyQ0t_VvlWzzB9li7v",J="lwO4iko6mhCUgZN1s9AW",X="akvZI06vqHOow1pOL29J",Q="WWZp3WM0maWJzl2qWEHE",Y="YdkAHxbDekz9SiAxHG6M",ee="AK37djOBJ2BuJOGuG1kQ",te="JfYURQbEA_ntMsMZV6tK",ne="du0mOGaZfHg3hsHwRMIu",ae="Rvzy4ltiiHIp9mvlxf0c",ie="uEXt8BtfJCONUNVYrAHn";var oe=n(11527);const se=(0,a.memo)((e=>{const{concert:t,position:n,modalSpec:i}=e,{id:o,venue:s,location:l}=t,r=t.startDate.localDate,c=(0,R.CH)(r),d="ONLINE"===t.category,m=(0,a.useMemo)((()=>null==i?void 0:i.eventRowFactory({position:n,uri:`spotify:concert:${t.id}`})),[i,n,t]),v=(0,k.$P)();return(0,oe.jsxs)(A.Link,{to:`/concert/${t.id}`,className:J,onClick:()=>{m&&v.logInteraction(m.hitUiNavigate({destination:`/concert/${o}`}))},children:[(0,oe.jsxs)("div",{className:X,"aria-hidden":!0,children:[(0,oe.jsx)(S.x,{as:"div",variant:"marginalBold",className:Q,children:(0,R.jw)(c)}),(0,oe.jsx)(S.x,{as:"div",variant:"bodyMediumBold",className:Y,children:(0,R.wf)(c)})]}),(0,oe.jsxs)("div",{className:ee,children:[(0,oe.jsx)(S.x,{as:"div",variant:"bodySmallBold",className:te,"data-testid":"event-title",children:(0,T.Yl)(t)}),(0,oe.jsx)(M.T,{children:(0,R.jx)(c)}),(0,oe.jsxs)(S.x,{as:"div",variant:"bodySmall",className:ne,children:[(0,R.FO)(c)," • ",(0,R.hK)(c)]}),(0,oe.jsx)("span",{className:ie,children:(0,G.$R)(t)&&(0,oe.jsx)(P.V,{size:"small"})}),(0,oe.jsx)(S.x,{as:"div",variant:"bodySmall",className:ae,"data-testid":"event-venue",children:d?s:[s,l].join(p.ag.getSeparator())})]})]},t.id)})),le=(0,a.memo)((e=>{var t;const{event:n,locationName:i,onClose:o,feedSpec:s}=e,l=null==n||null===(t=n.concerts[0])||void 0===t?void 0:t.concert,r=null==l?void 0:l.artists[0],c=(0,a.useMemo)((()=>null==s?void 0:s.groupedEventModalFactory({uri:(null==r?void 0:r.uri)||""})),[s,r]),d=(0,k.$P)(),m=(0,k.Wi)(c);if(!n||!l||!r)return null;const v=()=>{c&&d.logInteraction(c.closeButtonFactory().hitUiHide()),o()};return(0,oe.jsx)(W.Z,{contentLabel:p.ag.get("live_events.label"),isOpen:!0,className:H,onRequestClose:v,children:(0,oe.jsxs)("section",{className:z,ref:m,children:[(0,oe.jsx)("div",{className:$,children:(0,oe.jsx)(re,{"aria-label":p.ag.get("close"),iconOnly:O.k,size:"small",onClick:v})}),(0,oe.jsxs)("div",{className:V,children:[(0,oe.jsx)(B.E,{height:"48",width:"48",className:K,src:r.imageUri}),(0,oe.jsxs)("div",{className:q,children:[(0,oe.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",className:Z,"data-testid":"event-venue",children:r.name}),(0,oe.jsx)(S.x,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:`${p.ag.get("concerts.count_near_location",n.concerts.length,i)}`})]})]}),n.concerts.map(((e,t)=>(0,oe.jsx)(se,{concert:e.concert,position:t,modalSpec:c},e.concert.id)))]})})}));var re=(0,E.ZP)(m.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),ce=n(41194),de=n(43007),me=n(90371),ve=n(13188),ue=n(70867);const ge=async()=>(await(0,ue.rD)(ve.b.getInstance())).body,he=6e5,pe=e=>(0,ce.a)({queryKey:["concerts",e],queryFn:()=>(async e=>(await(0,ue.$0)(ve.b.getInstance(),e)).body)(e.geonameId),staleTime:he,placeholderData:de.Wk}),xe=e=>(0,me.N)({queryKey:["concerts","all",e],queryFn:t=>{let{pageParam:n}=t;return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;const{geonameId:n,startDate:a,endDate:i}=t;return(await(0,ue.ij)(ve.b.getInstance(),{page:e,geonameId:n,startDate:a,endDate:i})).body}(n,e)},staleTime:he,initialPageParam:1,placeholderData:de.Wk,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}),ye=e=>(0,ce.a)({queryKey:["concerts","popular",{geonameId:e}],queryFn:()=>(async e=>(await(0,ue.YA)(ve.b.getInstance(),void 0,e)).body)(e),staleTime:he,placeholderData:de.Wk}),je=/^(\d+)/,fe=e=>{const t=null==e?void 0:e.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,n,a,i]=t;return new Date(parseInt(n,10),parseInt(a,10)-1,parseInt(i,10))},Ne=e=>{var t;const n=(()=>{const{location:e}=(0,o.UO)(),[,t]=(null==e?void 0:e.match(je))||[];if(t)try{return parseInt(t,10)}catch(n){return}})(),[a]=(0,s.lr)(),i=null===(t=a.get("filter"))||void 0===t?void 0:t.trim();return e.isAnonymous&&!i||"all"===i?{type:"all",geonameId:n}:e.isInterestedEnabled&&"saved"===i?{type:"saved"}:{type:"foryou",geonameId:n}};var ke=n(92598),_e=n(13734),be=n(37001);const Se="MVPegsivznZB6gdkcnkH",Ce="MlK79hskRbFrN2OBjMkl",De="VxaXFH9Uq1NU0LtsVhIu",Ie="UDVDNa40iTSPS9uHCG7Q",Fe="vktIWsUczavLRrl4SkRt",Le="Y1JeRPqrmHKXI1KcstYN",we="ofURwIKv0qEXJGTraIis",Ue="fN_lJHkYih9H3j9YSEzS",Ee="LOJZO2MnGW5dCIawF767",Me="tyc7QRlEJigVFIAeLGOB",Pe="PoljWhTLU3MKqIx2gSPY",Oe="ajxCNAuBJSgYfKUUBWBT",Be="WR2h2Li5XTrBn_Rdme_k",We="WNhsvOyu4doInF525pLE",Ae="qSR4imCvzdznIQ4F2kBO",Ge="BCDMgFFqzEyzC1UqkW3t",Re="jFxUCv1gagc6erXmpgYw",Te="XOS1JS9iDK8dgeF3GeL5",He="LNAJMvRlTPqWsmZvV7Kg",ze="jP10ZUl0Jn2Ijue3fZux",$e="ncN9bwTgIRk6xruAt5T8",Ve="hKG8XDR5S00bjBAibgbI",Ke="XMhrCtHCVSPsNW67vM1m",qe="vT0t_YE1HgmbnHLLhJD9",Ze=(0,a.memo)((e=>{const{geonameId:t,locationName:n,spec:i}=e,[o,s]=(0,a.useState)(!1),l=(0,k.Wi)(i),r=`https://concerts.spotifycdn.com/feed_city_images_1/${t}.jpg`;return(0,a.useEffect)((()=>{const e=()=>{s(!0)},t=()=>{s(!1)},n=new Image;return n.addEventListener("load",e),n.addEventListener("error",t),n.src=r,()=>{n.removeEventListener("load",e),n.removeEventListener("error",t)}}),[r]),(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)("div",{className:Ve,ref:l,children:[o&&(0,oe.jsx)(B.E,{src:r,className:Ke,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.x,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:p.ag.get("live_events.city_info_find_tickets",n)}),(0,oe.jsx)(S.x,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:p.ag.get("live_events.city_info_view_details")})]})]})})}));var Je=n(77080),Xe=(n(4461),n(43286)),Qe=n(44246);const Ye="eFIu3aQJuKmf6H4Lb18K",et="LPNL3DZ89Iisp8TMArD3",tt="moVCbo9Ao5YJ5PsH4Qdz",nt="URXDMjhb8pQWIDaBrCPC",at="a3oYct1knu9af60A0v6g",it="qbIrubbolsixlgVkhO5r",ot="xHihsEV_0W6kpm0wHsXA",st="T8po_YH39Q9dhAsLAhec",lt={formatCaption:e=>p.ag.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>p.ag.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>p.ag.formatDate(e,{weekday:"short"})},rt=(0,a.memo)((e=>{var t;const{onDone:n,onClose:i,spec:o}=e,[s,l]=(0,a.useState)(e.dateRange),r=(0,Qe.S)(),c=(0,k.Wi)(o),d=(0,k.$P)(),v=new Date,u=(0,G.Vv)(v),g=(0,G.pm)(v),h=(0,G.DF)(s,u),x=(0,G.DF)(s,g);return(0,oe.jsx)("div",{ref:c,children:(0,oe.jsx)(W.Z,{isOpen:!0,children:(0,oe.jsxs)("section",{className:Ye,children:[(0,oe.jsx)(m.o,{className:et,iconOnly:O.k,size:"small",onClick:i,"aria-label":p.ag.get("close_button_action")}),(0,oe.jsxs)("div",{className:tt,children:[(0,oe.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",children:p.ag.get("live_events.date_picker_dialog_title")}),(0,oe.jsxs)("div",{className:nt,children:[(0,oe.jsx)(I.A,{className:at,size:"md",selectedColorSet:"brightAccent",selected:h,onClick:()=>{l(h?void 0:u),o&&d.logInteraction(o.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:p.ag.get("live_events.this_weekend_preset")}),(0,oe.jsx)(I.A,{className:at,size:"md",selectedColorSet:"brightAccent",selected:x,onClick:()=>{l(x?void 0:g),o&&d.logInteraction(o.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:p.ag.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(Je._W,{mode:"range",selected:s,onSelect:l,numberOfMonths:2,defaultMonth:null===(t=e.dateRange)||void 0===t?void 0:t.from,fromDate:new Date,formatters:lt,dir:r?"rtl":"ltr",modifiersClassNames:{today:it}}),(0,oe.jsxs)("div",{className:ot,children:[(0,oe.jsx)(m.o,{className:st,size:"small",onClick:()=>{l(void 0)},disabled:!(null!=s&&s.from),children:p.ag.get("live_events.date_picker_dialog_clear")}),(0,oe.jsx)(Xe.D,{size:"small",onClick:()=>{if(null!=s&&s.from){const{from:e,to:t}=s;n({from:e,to:t||e})}else n()},children:p.ag.get("live_events.date_picker_dialog_done")})]})]})})})}));var ct=n(11317),dt=n(88993),mt=n(56146);const vt="pU4WoqT8T6PmtjPbFtK0",ut="FC5Y_KFJ9rJyTpydqtOW",gt="AAYLcavkBdCuebn9AQxT",ht="lYHCmxpdReachiOORWGo",pt="JtKEdtTtcK7s6EpGecaC",xt="XuH9DoZCf0aVJ2BxQkTB",yt="myHDa69cI5CHC8fhIhkG",jt=(0,a.memo)((e=>{const{event:t,onClick:n}=e,i=(0,a.useCallback)((()=>n(t)),[t,n]),o=(0,R.CH)(t.openingDate),s=(0,R.CH)(t.closingDate),l=t.concerts[0].concert,r=l.artists[0];return(0,oe.jsxs)(m.o,{onClick:i,className:vt,component:"div","data-testid":"concert-card",role:"button",children:[r.imageUri&&(0,oe.jsx)(mt.Z,{children:(0,oe.jsx)("div",{role:"img",className:yt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${r.imageUri})`}})}),(0,oe.jsx)("time",{className:ut,dateTime:o.toISOString(),children:(0,oe.jsx)(S.x,{as:"p",variant:"bodySmallBold",children:(0,R.Bc)(o,s)})}),(0,oe.jsxs)("div",{className:gt,dir:"auto",children:[(0,oe.jsx)(S.x,{as:"h2",variant:"bodyMediumBold",className:ht,children:(0,T.ij)(l)}),(0,oe.jsxs)("div",{className:pt,children:[(0,G.sk)(t)&&(0,oe.jsx)("span",{className:xt,children:(0,oe.jsx)(P.V,{size:"small"})}),(0,oe.jsx)(S.x,{as:"span",variant:"bodySmall","data-testid":"concerts-count",children:p.ag.get("concerts.count",t.concerts.length)})]})]})]})})),ft=(0,a.memo)((e=>{var t;const{event:n,position:i,sectionSpec:o,onOpenGroupedEvent:s}=e,l=null===(t=n.concerts[0])||void 0===t?void 0:t.concert,r=null==l?void 0:l.id,c=l&&(0,ct.g3)(l.id).toURI(),d=(0,k.$P)(),m=(0,a.useMemo)((()=>null==o?void 0:o.eventCardFactory({identifier:r??"",position:i,uri:c??""})),[o,r,c,i]),v=(0,k.Wi)(m),u=e=>{s(e),m&&d.logInteraction(m.hitUiReveal())};if(n.concerts.length>1)return(0,oe.jsx)("div",{ref:v,children:(0,oe.jsx)(jt,{event:n,onClick:u})});return(0,oe.jsx)("div",{ref:v,children:(0,oe.jsx)(dt.Z,{concert:l,isVirtual:"online"===n.source,onClick:()=>{m&&d.logInteraction(m.hitUiNavigate({destination:c}))}})})})),Nt="yLIDHkmBrjsAVNMCcFM_",kt="qr_9NXyk7D0t6wclM5R0",_t="mDxkFuOd3TBAQI2gXatq",bt="AQ8ZFs5U45GPiyJnqEvt",St="E8DcbdVmmoGfC8R8S1Vw",Ct="wzS5PwxEhferQEdjumt0",Dt="E0zwnbwA3HzqNi2BV4eq",It=(0,a.memo)((e=>{const{event:t,onClick:n}=e,i=(0,a.useCallback)((()=>n(t)),[t,n]),o=(0,R.CH)(t.openingDate),s=(0,R.CH)(t.closingDate),l=t.concerts[0].concert,r=l.artists[0];return(0,oe.jsxs)("div",{className:Ct,onClick:i,onKeyPress:i,role:"link",tabIndex:0,children:[(0,oe.jsx)(B.E,{src:null==r?void 0:r.imageUri,alt:"",role:"presentation",className:Nt}),(0,oe.jsxs)("div",{className:kt,children:[(0,oe.jsx)(S.x,{as:"span",variant:"bodyMediumBold",className:_t,"data-testid":"event-title",children:(0,T.ij)(l)}),(0,oe.jsx)(S.x,{as:"span",variant:"bodyMedium",className:bt,children:(0,R.Bc)(o,s)}),(0,oe.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:St,"data-testid":"event-venue",children:[(0,G.sk)(t)&&(0,oe.jsx)(P.V,{size:"small",className:Dt}),p.ag.get("concerts.count",t.concerts.length)]})]})]})})),Ft=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:i,location:o}=t,s=t.artists[0],l=(0,R.CH)(t.startDate.localDate);return(0,oe.jsxs)(A.Link,{to:`/concert/${null==t?void 0:t.id}`,className:Ct,"data-testid":"concert-row",onClick:a,children:[(0,oe.jsx)(B.E,{src:null==s?void 0:s.imageUri,alt:"",role:"presentation",className:Nt}),(0,oe.jsxs)("div",{className:kt,children:[(0,oe.jsx)(S.x,{as:"span",variant:"bodyMediumBold",className:_t,"data-testid":"event-title",children:(0,T.ij)(t)}),(0,oe.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:bt,children:[(0,R.xE)(l)," • ",(0,R.hK)(l)]}),(0,oe.jsxs)(S.x,{as:"span",variant:"bodyMedium",className:St,"data-testid":"event-venue",children:[(0,G.$R)(t)&&(0,oe.jsx)(P.V,{size:"small",className:Dt}),n?i:[i,o].join(p.ag.getSeparator())]})]})]})})),Lt=(0,a.memo)((e=>{var t;const{event:n,position:i,sectionSpec:o,onOpenGroupedEvent:s}=e,l=null===(t=n.concerts[0])||void 0===t?void 0:t.concert,r=null==l?void 0:l.id,c=l&&(0,ct.g3)(l.id).toURI(),d=(0,k.$P)(),m=(0,a.useMemo)((()=>null==o?void 0:o.eventRowFactory({identifier:r??"",position:i,uri:c??""})),[o,r,c,i]),v=(0,k.Wi)(m),u=e=>{s(e)};if(n.concerts.length>1)return(0,oe.jsx)("div",{ref:v,children:(0,oe.jsx)(It,{event:n,onClick:u})});return(0,oe.jsx)("div",{ref:v,children:(0,oe.jsx)(Ft,{concert:l,isVirtual:"online"===n.source,onClick:()=>{m&&d.logInteraction(m.hitUiNavigate({destination:c??""}))}})})})),wt=(0,a.memo)((e=>{const{eventGroups:t,locationName:n,isLoading:i,feedSpec:o,onOpenGroupedEvent:s,layout:l}=e,r=(0,a.useMemo)((()=>null==o?void 0:o.eventSectionFactory({identifier:"all",position:1})),[o]),c=(0,k.Wi)(r);return i?(0,oe.jsx)(w.h,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,oe.jsx)(L.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",n),renderInline:!0}):(0,oe.jsx)("div",{ref:c,children:t.map((e=>(0,oe.jsxs)("div",{className:We,children:["grid"===l&&(0,oe.jsx)(U.P,{total:e.events.length,title:p.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),gridConfigOverride:be.jM.DEFAULT,showAll:!0,removeOffsetMargin:!0,children:e.events.map(((e,t)=>{var n;const a=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,oe.jsx)(ft,{event:e,position:t,sectionSpec:r,onOpenGroupedEvent:s},null==a?void 0:a.id)}))}),"list"===l&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Fe,children:p.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map(((e,t)=>{var n;const a=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,oe.jsx)(Lt,{event:e,position:t,sectionSpec:r,onOpenGroupedEvent:s},null==a?void 0:a.id)}))]})]},e.date)))}):null})),Ut={month:"short",day:"numeric"},Et=e=>{if((0,b.K)(e.from,e.to))return p.ag.formatDate(e.from,Ut);return`${p.ag.formatDate(e.from,Ut)} - ${p.ag.formatDate(e.to,Ut)}`},Mt=(0,a.memo)((e=>{var t;const{geonameId:n,spec:i,layout:l,onLocationNameChange:r}=e,c=(()=>{var e,t;const[n]=(0,s.lr)(),a=null===(e=n.get("startDate"))||void 0===e?void 0:e.trim(),i=null===(t=n.get("endDate"))||void 0===t?void 0:t.trim(),o=fe(a),l=fe(i);return o&&l&&{from:o,to:l}})(),d=(0,o.s0)(),[,m]=(0,s.lr)(),[v]=(0,s.lr)(),[u,g]=(0,a.useState)(),[h,x]=(0,a.useState)(!1),y=(0,_e.o)(),j=(0,a.useMemo)((()=>null==i?void 0:i.headerFactory()),[i]),f=(0,a.useMemo)((()=>null==i?void 0:i.datePickerModalFactory()),[i]),N=(0,a.useMemo)((()=>null==i?void 0:i.cityInfoFactory()),[i]),_=(0,k.$P)(),{data:b,isLoading:L,hasNextPage:w,isFetchingNextPage:U,fetchNextPage:E}=xe({geonameId:n,startDate:c&&(0,G.ie)(c.from),endDate:c&&(0,G.ie)(c.to)}),M=(0,a.useMemo)((()=>(0,G.k9)((null==b?void 0:b.pages)??[])),[null==b?void 0:b.pages]),P=null==b||null===(t=b.pages[0])||void 0===t?void 0:t.userLocation;(0,a.useEffect)((()=>{P&&(null==r||r(P))}),[P,r]);const O=P||p.ag.get("concerts.default_location"),B=(0,G.Vv)(new Date),W=(0,G.pm)(new Date),A=(0,a.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=(0,G.ie)(e.from),t.endDate=(0,G.ie)(e.to),f)){const e=new URLSearchParams(t).toString();_.logInteraction(f.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}x(!1),m(t),f&&_.logInteraction(f.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[m,f,_]),R=(0,a.useCallback)((e=>{const t={filter:"all"};(0,G.DF)(c,e)||(t.startDate=(0,G.ie)(e.from),t.endDate=(0,G.ie)(e.to)),m(t)}),[c,m]);return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${O}`}),(0,oe.jsxs)("div",{className:Re,children:[(0,oe.jsx)(ke.Z,{handleLocationChange:e=>{y({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId&&d({pathname:(0,G.yI)(e.geonameId,e.location),search:`?${v.toString()}`})},locationStr:O,headerSpec:j}),(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(C.P,{className:Ge,iconLeading:D.a,onClick:()=>{x(!0),j&&_.logInteraction(j.datePickerButtonFactory().hitUiReveal())},size:"small",children:c?Et(c):p.ag.get("live_events.date_picker_button_text")}),h&&(0,oe.jsx)(rt,{onClose:()=>{x(!1),f&&_.logInteraction(f.closeButtonFactory().hitUiHide())},onDone:A,dateRange:c,spec:f}),(0,oe.jsx)(I.A,{className:Te,size:"sm",selectedColorSet:"brightAccent",selected:(0,G.DF)(c,B),onClick:()=>{if(R(B),j){const e={startDate:(0,G.ie)(B.from),endDate:(0,G.ie)(B.to)},t=new URLSearchParams(e).toString();_.logInteraction(j.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},children:p.ag.get("live_events.this_weekend_preset")}),(0,oe.jsx)(I.A,{className:Te,size:"sm",selectedColorSet:"brightAccent",selected:(0,G.DF)(c,W),onClick:()=>{if(R(W),j){const e={startDate:(0,G.ie)(W.from),endDate:(0,G.ie)(W.to)},t=new URLSearchParams(e).toString();_.logInteraction(j.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},children:p.ag.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(wt,{isLoading:L,locationName:O,eventGroups:M,onOpenGroupedEvent:e=>{var t;g(e);const n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];y({type:"click",intent:"open-grouped-live-event",targetUri:n})},feedSpec:i,layout:l}),w&&(0,oe.jsx)("div",{className:Ae,children:(0,oe.jsx)(C.P,{disabled:U,onClick:()=>{E()},children:p.ag.get("concerts.load_more")})}),(0,oe.jsx)(le,{event:u,locationName:O,feedSpec:i,onClose:()=>g(void 0)}),(0,oe.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),b&&b.pages[0]&&b.pages[0].userLocationGeonameId&&(0,oe.jsx)(Ze,{geonameId:b.pages[0].userLocationGeonameId,locationName:O,spec:N})]})}));var Pt=n(22553),Ot=n(8509),Bt=n(82187),Wt=n.n(Bt),At=n(24422),Gt=n(17676),Rt=n(45438);const Tt=(0,a.memo)((e=>{const{title:t="",identifier:n,position:i,events:o,feedSpec:s,onOpenGroupedEvent:l,layout:r}=e,c=(0,a.useMemo)((()=>null==s?void 0:s.eventSectionFactory({identifier:n,position:i})),[s,n,i]),d=(0,k.Wi)(c),m=(0,g.W6)(Gt.WDb);return 0===o.length?null:(0,oe.jsxs)("div",{className:Se,ref:d,children:["grid"===r&&(0,oe.jsx)(Rt.JL,{value:"headered-grid",index:i,children:(0,oe.jsx)(U.P,{total:o.length,title:t,gridConfigOverride:be.jM.DEFAULT,showAll:!0,removeOffsetMargin:!0,className:Wt()({[At.Z.titleSpacing]:m}),children:o.map(((e,t)=>{var n;const a=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,oe.jsx)(ft,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:l},null==a?void 0:a.id)}))})}),"list"===r&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Fe,children:t}),o.map(((e,t)=>{var n;const a=null===(n=e.concerts[0])||void 0===n?void 0:n.concert;return(0,oe.jsx)(Lt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:l},null==a?void 0:a.id)}))]})]})})),Ht=(0,a.memo)((e=>{var t,n;const{spec:i,layout:l,onLocationNameChange:r}=e,[c,d]=(0,a.useState)(),[m]=(0,s.lr)(),v=ye(e.geonameId),u=(null===(t=v.data)||void 0===t?void 0:t.userLocation)||p.ag.get("concerts.default_location"),g=(0,a.useMemo)((()=>null==i?void 0:i.headerFactory()),[i]),h=(0,o.s0)();return(0,a.useEffect)((()=>{var e;null!==(e=v.data)&&void 0!==e&&e.userLocation&&(null==r||r(v.data.userLocation))}),[null===(n=v.data)||void 0===n?void 0:n.userLocation,r]),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${u}`}),(0,oe.jsx)("div",{className:Re,"data-testid":"location-selector",children:(0,oe.jsx)(ke.Z,{handleLocationChange:e=>{(0,Pt._)({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId&&h({pathname:(0,G.yI)(e.geonameId,e.location),search:`?${m.toString()}`})},locationStr:u,headerSpec:g})}),(0,oe.jsxs)("div",{className:He,children:[(0,oe.jsx)(S.x,{variant:"titleSmall",semanticColor:"textBase",children:p.ag.get("live_events.for_you_anonymous_heading")}),(0,oe.jsx)(S.x,{variant:"bodyMedium",className:ze,semanticColor:"textSubdued",children:p.ag.get("live_events.for_you_anonymous_subheading")}),(0,oe.jsx)(Xe.D,{colorSet:"invertedLight",className:$e,onClick:()=>(0,Ot.L6)(),children:p.ag.get("live_events.sign_up_free")})]}),v.data&&(0,oe.jsx)(Tt,{title:p.ag.get("concerts.popular_concerts_near",u),identifier:"popular",position:0,events:v.data.events,onOpenGroupedEvent:e=>{var t;d(e);const n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];(0,Pt._)({type:"click",intent:"open-grouped-live-event",targetUri:n})},feedSpec:i,layout:l}),(0,oe.jsx)(le,{event:c,locationName:u,feedSpec:i,onClose:()=>d(void 0)}),(0,oe.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),v.data&&v.data.userLocationGeonameId&&(0,oe.jsx)(Ze,{geonameId:v.data.userLocationGeonameId,locationName:u})]})}));n(46758),n(27082);const zt=(0,a.memo)((e=>{const{isLoading:t,events:n,locationName:a,spec:i,layout:o,onOpenGroupedEvent:s}=e;if(t)return(0,oe.jsx)(w.h,{hasError:!1,errorMessage:""});if(0===n.length)return(0,oe.jsx)(L.u,{title:p.ag.get("concerts.error.no_concerts_found_title"),message:p.ag.get("concerts.error.no_concerts_found_message",a),renderInline:!0});const l=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(n);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Tt,{title:p.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:l.online,onOpenGroupedEvent:s,feedSpec:i,layout:o}),(0,oe.jsx)(Tt,{title:p.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:l.recommended,onOpenGroupedEvent:s,feedSpec:i,layout:o}),(0,oe.jsx)(Tt,{title:p.ag.get("concerts.popular_concerts_near",a),identifier:"popular",position:2,events:l.popular,onOpenGroupedEvent:s,feedSpec:i,layout:o})]})}));var $t=n(50540),Vt=n(80515),Kt=n(1740),qt=n(58912),Zt=n(20069);const Jt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"promoCardPlaylist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"playlistInfo"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"playlistInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"images"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"description"}}]}}]},Xt="Cot6ZntaldMo77XCx1dt",Qt="vfWT92cAm89qtD3Lwfrc",Yt="XyJgy3JOLfeFBo2CiltA",en="UI2hGxMrqbScQtyg3FzT",tn="mnwdEtmP084CWa7aUEzN",nn=()=>{const e=(0,$t.g)(),t=(0,a.useContext)(Kt.ZF),{data:n}=(0,ce.a)({queryKey:["cny-resolve"],queryFn:()=>t.resolvePlaylistFormatURI("spotify:playlist-format:concerts-near-you"),enabled:!e,staleTime:1/0}),{data:i}=(o={uri:n},s={enabled:!!n},(0,Zt.a)(Jt,o,s));var o,s;if("Playlist"===(null==i?void 0:i.playlistV2.__typename))return i.playlistV2},an=(0,a.memo)((e=>{var t;const n=nn();if(!n)return null;const a=(0,qt.X)(null===(t=n.images.items[0])||void 0===t?void 0:t.sources,{desiredSize:88});return(0,oe.jsxs)(A.default,{to:n.uri,className:Xt,children:[(0,oe.jsx)(Vt.E,{src:null==a?void 0:a.url,loading:"lazy",alt:"",ariaHidden:!0,className:Qt}),(0,oe.jsxs)("div",{className:Yt,children:[(0,oe.jsx)(S.x,{as:"h3",variant:"bodyMediumBold",className:en,children:n.name}),(0,oe.jsx)(S.x,{as:"p",variant:"bodySmall",className:tn,children:n.description})]})]})})),on=(0,a.memo)((e=>{const{geonameId:t,spec:n,layout:i,onLocationNameChange:s}=e,l=(0,o.s0)(),[r,c]=(0,a.useState)(),d=(0,_e.o)(),m=(0,a.useMemo)((()=>n.headerFactory()),[n]),{data:v,isLoading:u}=pe({geonameId:t});(0,a.useEffect)((()=>{null!=v&&v.userLocation&&(null==s||s(v.userLocation))}),[null==v?void 0:v.userLocation,s]);const h=(0,g.W6)(Gt.yJ3,{loadingValue:!1}),x=(null==v?void 0:v.userLocation)||p.ag.get("concerts.default_location");return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(F.$,{children:`${p.ag.get("concerts_shows_in")} ${x}`}),(0,oe.jsx)("div",{className:Re,"data-testid":"location-selector",children:(0,oe.jsx)(ke.Z,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),null!=e&&e.geonameId&&l((0,G.yI)(e.geonameId,e.location))},locationStr:x,headerSpec:m})}),h&&(0,oe.jsx)("div",{className:qe,children:(0,oe.jsx)(an,{})}),(0,oe.jsx)(zt,{isLoading:u,events:(null==v?void 0:v.events)||[],locationName:x,spec:n,onOpenGroupedEvent:e=>{var t;c(e);const n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:n})},layout:i}),(0,oe.jsx)(le,{event:r,locationName:x,feedSpec:n,onClose:()=>c(void 0)}),(0,oe.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),v&&v.userLocationGeonameId&&(0,oe.jsx)(Ze,{geonameId:v.userLocationGeonameId,locationName:x})]})})),sn=(0,a.memo)((e=>{var t,n,i;const{spec:o,layout:s}=e,[l,r]=(0,a.useState)(),c=(0,ce.a)({queryKey:["savedConcerts"],queryFn:ge}),d=(0,_e.o)(),m=(null===(t=c.data)||void 0===t?void 0:t.userLocation)||p.ag.get("concerts.default_location");return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(F.$,{children:`${p.ag.get("live_events.label")}`}),null!==(n=c.data)&&void 0!==n&&n.events.length?(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(Tt,{title:p.ag.get("concerts_upcoming"),identifier:"saved",position:0,events:null===(i=c.data)||void 0===i?void 0:i.events,feedSpec:o,onOpenGroupedEvent:e=>{var t;r(e);const n=null===(t=e.concerts[0])||void 0===t?void 0:t.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:n})},layout:s})}):(0,oe.jsxs)("div",{className:Ee,children:[(0,oe.jsx)(S.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Oe,children:p.ag.get("concerts_interested_in_live_events")}),(0,oe.jsx)(S.x,{as:"p",className:Be,children:p.ag.get("concerts_no_events_description")}),(0,oe.jsx)(A.default,{to:"/concerts",className:Me,children:(0,oe.jsx)(C.P,{as:"span",className:Pe,children:p.ag.get("concerts_browse_more_events")})})]}),(0,oe.jsx)(S.x,{variant:"marginal",semanticColor:"textSubdued",children:p.ag.get("live_events.disclaimer")}),(0,oe.jsx)(le,{event:l,locationName:m,feedSpec:o,onClose:()=>r(void 0)})]})})),ln=l.vI0,rn={url:"https://tickets.spotifycdn.com/partner-assets/Hub%20header%20image/Desktop%20header%20IMG.png",width:2736,height:720},cn=()=>{const{isAnonymous:e}=(0,i.v9)(N.Gg),t=(0,o.TH)(),n=t.pathname+t.search,l=(0,k.$P)(),b=(0,g.W6)(_.tp),[S,C]=(0,a.useState)("grid"),{spec:D}=(0,k.fU)(h.y,{}),I=Ne({isAnonymous:e,isInterestedEnabled:b}),F=(0,a.useMemo)((()=>D.headerFactory().liveEventsNavbarFactory({uri:n,reason:I.type})),[D,I,n]),L=(0,k.Wi)(F),[w,U]=(0,a.useState)(),E=e=>{const n=`${t.pathname}?filter=${e}`,a=D.headerFactory().liveEventsNavbarFactory({uri:n,reason:e}).hitUiNavigate({destination:n});l.logInteraction(a)},M=()=>{const e=D.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:S,stateAfterToggle:"grid"===S?"list":"grid"});l.logInteraction(e),C("grid"===S?"list":"grid")},P=e&&w?p.ag.get("live_events.location_concert_tickets",w):p.ag.get("live_events.label");return(0,oe.jsxs)("section",{className:Ce,children:[(0,oe.jsxs)(y.gF,{size:y.fR.SMALL,backgroundColor:ln,backgroundImages:[rn],children:[(0,oe.jsx)(y.sP,{children:(0,oe.jsx)(y.xd,{children:P})}),(0,oe.jsx)(j.W,{children:(0,oe.jsx)(f.i,{text:P})})]}),(0,oe.jsxs)("div",{className:De,children:[(0,oe.jsx)(x.I,{backgroundColor:ln}),(0,oe.jsxs)("div",{className:we,ref:L,children:[(0,oe.jsx)(r.l,{list:(0,oe.jsx)("nav",{"aria-label":"live events navbar",children:(0,oe.jsxs)(c.F,{children:[(0,oe.jsx)(d.c,{id:"for_you_link",label:p.ag.get("live_events.for_you_tab"),active:"foryou"===I.type,className:Ue,component:s.rU,onClick:()=>E("foryou"),sentenceCase:!0,to:{search:"filter=foryou"}},"foryou"),(0,oe.jsx)(d.c,{id:"concerts_all_link",label:p.ag.get("live_events.all_events_tab"),active:"all"===I.type,className:Ue,component:s.rU,onClick:()=>E("all"),sentenceCase:!0,to:{search:"filter=all"}},"all"),!e&&b&&(0,oe.jsx)(d.c,{id:"concerts_interested_link",label:p.ag.get("concerts_interested"),active:"saved"===I.type,className:Ue,component:s.rU,onClick:()=>E("saved"),sentenceCase:!0,to:{search:"filter=saved"}},"saved")]})})}),"grid"===S&&(0,oe.jsx)(m.o,{"aria-label":p.ag.get("concerts.feed_list_layout"),iconOnly:v.d,className:Le,onClick:M,size:"small"}),"list"===S&&(0,oe.jsx)(m.o,{"aria-label":p.ag.get("concerts.feed_grid_layout"),iconOnly:u.z,className:Le,onClick:M,size:"small"})]}),(0,oe.jsxs)("div",{className:Ie,children:[e&&"foryou"===I.type&&(0,oe.jsx)(Ht,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),!e&&"foryou"===I.type&&(0,oe.jsx)(on,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),"all"===I.type&&(0,oe.jsx)(Mt,{geonameId:I.geonameId,spec:D,layout:S,onLocationNameChange:U}),"saved"===I.type&&(0,oe.jsx)(sn,{spec:D,layout:S})]})]})]})}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.6baa9da3.js.map