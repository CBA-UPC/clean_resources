(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[6],{748:function(e,t,s){"use strict";var n=s(2),r=s.n(n),a=s(3),i=s(13),o=s.n(i),h=s(0);class l extends a.PureComponent{constructor(){super(...arguments),r()(this,"errorMessages",{default:{default:"Please try again later.",Unauthorized:"Please try again later."},email:{Unauthorized:"Error! Please check your email and password."},phone:{default:"Please try again later.","not found":"Could not find that phone number.","phone has already been taken":"Phone number has already been taken.","Phone number not provisioned with any carrier":"Could not find that phone number."}})}generateMessageFromError(e){const t=this.errorMessages[this.props.errorSet],s=e&&e.data&&e.data.json||{},{errors:n={},user_status:r}=s,a=n&&n.reasons&&n.reasons[0],i=t[r]||r,o=t[a]||a,h=t[e.message]||t.default||e.message;return i||o||h}render(){const e=o()({atom:!0,errorMessage:!0});return!!this.props.errors.length&&Object(h.jsx)("ul",{className:e,children:this.props.errors.map(e=>{const t="string"==typeof e?e:this.generateMessageFromError(e);return(Object(h.jsx)("li",{children:t},`error-${t}`))})})}}l.defaultProps={errors:[],errorSet:"default"},t.a=l},797:function(e,t,s){"use strict";var n=s(3);class r extends n.PureComponent{constructor(e){super(e),this.stepCompleted=this.stepCompleted.bind(this),this.getFlowKeyIndex=this.getFlowKeyIndex.bind(this),this.next=this.next.bind(this),this.done=this.done.bind(this);const t=e.startAt&&this.getFlowKeyIndex(e.startAt)||0;this.startIndex=t,this.state={index:t}}getFlowKeyIndex(e){const t=n.Children.toArray(this.props.children);if("string"!=typeof e)return!!Number.isInteger(e)&&(e<t.length&&e);const s=t.findIndex(;return-1!==s&&s}next(e){let t=!1;const s=Number.isInteger(e)?e:this.state.index+1,r=!1===e?this.startIndex:"string"==typeof e?this.getFlowKeyIndex(e):s;if(this.props.onNext){const t=n.Children.toArray(this.props.children),s=t[this.state.index],a=s&&s.props?s.props.flowKey:null;let i=e;!e&&t[r]&&(i=t[r].props.flowKey),this.props.onNext({index:this.state.index,flowKey:a},{index:r,flowKey:i})}if("string"!=typeof e)if(r>=n.Children.count(this.props.children)&&(t=!0),t){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];this.done(...i)}else this.setState({index:r});else{const t=this.getFlowKeyIndex(e);!1!==t&&this.setState({index:t})}}done(){return this.props.onFlowFinished&&this.props.onFlowFinished(...arguments),this.props.stepCompleted&&this.props.stepCompleted(...arguments),this.setState({index:-1}),!0}stepCompleted(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];!0===e?this.done(...s):this.next(e,...s)}render(){const e=n.Children.toArray(this.props.children)[this.state.index];if(e){const t={stepCompleted:this.stepCompleted};return(Object(n.cloneElement)(e,t))}return!1}}t.a=r},824:function(e,t,s){"use strict";var n,r=s(3),a=s.n(r),i=s(13),o=s.n(i),h=s(21),l=s(748),c=s(0);const u=/^\d{10}$/;class d extends a.a.PureComponent{constructor(e){super(e),this.state={isValid:!0,errors:this.props.errors||[],value:this.props.value,loading:!1},this.onChange=this.onChange.bind(this),this.onSubmit=this.onSubmit.bind(this)}moveInput(e,t){const s="backwards"===t?e.previousElementSibling:e.nextElementSibling;s&&"INPUT"===s.nodeName&&(s.focus(),s.setSelectionRange(1,1))}onChange(e){const t=e.target.value.trim(),s=u.test(t);this.setState({isValid:s,value:t})}onSubmit(e){e.preventDefault(),this.setState({loading:!0},()=>{const t=/\D/,s=this.state.value;return this.props.onSubmit?t.test(s)?this.setState({errors:["Please enter a valid phone number"]}):this.props.onSubmit(e,s):null})}render(){const e=o()({molecule:!0,phoneInput:!0}),{loading:t,isValid:s,value:r}=this.state,{legalDisclaimer:a}=this.props;return Object(c.jsxs)("form",{className:e,onSubmit:this.onSubmit,children:[Object(c.jsx)("h2",{children:this.props.title}),n||(n=Object(c.jsx)("p",{className:"smsText",children:"We'll send you an SMS verification code."})),"+1",Object(c.jsx)("input",{ref:name:"telephone",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:r,onChange:this.onChange,required:!0,maxLength:10,title:"telephone number",autoFocus:!0}),Object(c.jsx)(l.a,{errors:this.props.errors,errorSet:"phone"}),a&&Object(c.jsx)("div",{className:"legalDisclaimer",children:a}),Object(c.jsx)(h.Button,{type:"submit",disabled:!s||t,loading:t,children:this.props.buttonText}),this.props.children]})}}d.defaultProps={buttonText:"Next",title:"Please Provide Your Phone Number",value:""},t.a=d},825:function(e,t,s){"use strict";(function(e){var n,r,a=s(3),i=s.n(a),o=s(13),h=s.n(o),l=s(21),c=s(4),u=s(748),d=s(0);class p extends i.a.PureComponent{constructor(e){super(e),this.state={errors:e.errors,isCodeValid:!0,resendCount:30,success:!1,loading:!1},this.onSubmit=this.onSubmit.bind(this),this.onChange=this.onChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onVerifyError=this.onVerifyError.bind(this),this.onVerifySuccess=this.onVerifySuccess.bind(this),this.getPhoneNumber=this.getPhoneNumber.bind(this),this.resetCountDown=this.resetCountDown.bind(this),this.onCountDown=this.onCountDown.bind(this),this.resendCode=this.resendCode.bind(this)}CountDown(){this.state.resendCount>0?this.setState({resendCount:this.state.resendCount-1}):e.clearInterval(this.resendCountDown)}moveInput(e,t){const s="backwards"===t?e.previousElementSibling:e.nextElementSibling;s&&"INPUT"===s.nodeName&&s.focus()}onChange(e){const t=e.target;t.value=t.value.trim(),""!==t.value&&this.moveInput(t)}onKeyDown(e){"Backspace"!==e.key||e.target.value||this.moveInput(e.target,"backwards")}async onVerifySuccess(){const{onboarding:e,screen:t}=this.props;this.props.onEditUser?this.props.stepCompleted(!0,"editProfile"):this.props.stepCompleted&&(this.setState({success:!0}),await this.props.mParticleLogin({email:""},{loggedIn:!0,signup_source:"phone",account_verified:!0}),this.props.stepCompleted(!0,!0,!0),this.props.trackEvent({tag_manager_event:"account_verified",accountType:"phone",screen:t,onboarding:e,legacyInstall:!1,legacyAccount:!1}),this.props.isSignup&&this.props.trackEvent({tag_manager_event:"account_created",accountType:"phone",success:!0,socialOnboarding:!1}),this.props.trackAction())}resetCountDown(){this.setState({resendCount:30}),this.resendCountDown=e.setInterval(this.onCountDown,1e3)}onVerifyError(e){let t;switch(e&&e.data&&e.data.json&&e.data.json.user_status){case null:t="Invalid code, please try again.";break;case!1:t="Account not found.";break;default:t="Please try again later."}this.setState({errors:[t]}),this.props.isSignup&&(this.props.trackEvent({tag_manager_event:"account_created",accountType:"phone",success:!1,socialOnboarding:!1}),this.props.trackEvent({tag_manager_event:"user_error",errorType:"account_management",errorMessage:e.output.payload.error||e.message,errorCode:e.data.errorCode,page:"phone"}))}getPhoneNumber(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.phone||c.a.get("br_phone");return!!t&&(e&&(t=String(t).split("").map((e,t,s)=>t<s.length-2?"*":e).join("")),t)}onSubmit(e){e.preventDefault();const t=this.getPhoneNumber(),{userID:s}=this.props;this.setState({loading:!0},()=>{const e=`${this._code1.value}${this._code2.value}${this._code3.value}${this._code4.value}`;this.props.verifyPhone&&this.props.verifyPhone({phone:t,code:e,userID:s}).then(this.onVerifySuccess).catch(this.onVerifyError)})}resendCode(){event.preventDefault();const e=c.a.get("br_phone"),{userID:t}=this.props;this.props.trackEvent({tag_manager_event:"resend_verification",accountType:"phone"}),this.props.authorizePhone(e,t).then(this.resetCountDown).catch(this.onVerifyError)}getOrdinalender(){const e=h()({molecule:!0,phoneVerify:!0,success:!!this.state.success}),{errors:t,loading:s,resendCount:a,success:i}=this.state,o=this.getPhoneNumber(!0);return Object(d.jsxs)("form",{className:e,onSubmit:this.onSubmit,children:[n||(n=Object(d.jsx)("h2",{children:"Enter Your Code"})),Object(d.jsxs)("p",{children:["A Verification Code was sent to ",o||"the entered phone number","."]}),Object(d.jsx)("div",{className:"verificationCode",children:[1,2,3,4].map(e=>Object(d.jsx)("input",{ref:t=>{this[`_code${e}`]=t},name:`verificationCode${e}`,type:"number",inputMode:"numeric",pattern:"^\\d$",onChange:this.onChange,onKeyDown:this.onKeyDown,required:!0,title:`${this.getOrdinal(e)} digit of the code sent to your phone`,autoFocus:1===e,maxLength:1},e))}),Object(d.jsx)(u.a,{errors:t,errorSet:"phone"}),!!i&&(r||(r=Object(d.jsx)("p",{className:"successMessage",children:"Success!"}))),Object(d.jsx)(l.Button,{type:"submit",disabled:s,loading:s,children:"Verify"}),a<1?Object(d.jsx)(l.Button,{onClick:this.resendCode,children:"Resend Code"}):Object(d.jsxs)("p",{children:["Resend code in ",a," seconds"]}),this.props.children]})}}p.defaultProps={authorizePhone:trackAction:()=>{},errors:[]},t.a=p}).call(this,s(16))},826:function(e,t,s){"use strict";(function(e){var n,r=s(3),a=s(21),i=s(0);class o extends r.PureComponent{nFbLogin(e){e.authResponse&&this.props.attemptFbLogin(e.authResponse),this.props.isSignup&&this.props.trackEvent({tag_manager_event:"account_created",accountType:"facebook",success:!!e.authResponse,socialOnboarding:!1})}onClick(){this.props.trackEvent(),e.FB.login(this.onFbLogin,{scope:"email"})}render(){return Object(i.jsxs)(a.Button,{classes:"fbLoginButton",onClick:this.onClick,children:[n||(n=Object(i.jsx)(a.SVG,{type:"icon",target:"facebookFilled"})),this.props.children]})}}o.defaultProps={attemptFbLogin:()=>{},loadScript:()=>{},trackEvent:()=>{}},t.a=o}).call(this,s(16))},902:function(e,t,s){"use strict";var n,r,a,i=s(3),o=s.n(i),h=s(13),l=s.n(h),c=s(92),u=s.n(c),d=s(21),p=s(748),m=s(0);const g=/\d/,b={firstName:{"invalid characters":"First name contains invalid characters.",unacceptable:"Unacceptable first name."},lastName:{"invalid characters":"Last name contains invalid characters.",unacceptable:"Unacceptable last name."}};class f extends o.a.PureComponent{constructor(e){super(e),this.state={firstName:this.props.firstName,lastName:this.props.lastName,errors:[],loading:!1},this.onFirstNameChange=this.onFirstNameChange.bind(this),this.onLastNameChange=this.onLastNameChange.bind(this),this.onSubmit=this.onSubmit.bind(this),this.validateName=u()(this.validateName.bind(this),300),this.refBind=onFirstNameChange(e){this.onChange("firstName",e)}nChange(e,t){const s="firstName"===e?"first_name":"last_name",n=t.target.value;n&&this.validateName({field:e,name:s,value:n}),this.setState({[e]:n})}onSubmit(e){e.preventDefault(),this.state.errors.length||this.setState({loading:!0},()=>{const e=this._form.elements,t=e.first_name,s=e.last_name,n=t.value.trim(),r=s.value.trim();n&&r?g.test(n)||g.test(r)?this.setState({errors:["Invalid name, must not contain numbers."]}):this.props.updateData({first_name:n,last_name:r}).then(()=>{this.props.onUserEdit?this.props.stepCompleted("editProfile"):this.props.stepCompleted()}).catch(e=>{this.setState({errors:[e]})}):this.setState({errors:["Please enter first and last names."]})})}validateName(e){let{field:t,name:s,value:n}=e;this.props.validateName({name:s,value:n}).then(e=>{let{payload:{status:s}}=e;"available"===s&&this.setState(e=>{const s=e.errors.filter(e=>!Object.values(b[t]).includes(e));return s.length!==e.errors.length?{errors:s}:{}})}).catch(e=>{const s=e&&e.data&&e.data.json&&e.data.json.status,n=s&&b[t][s]?b[t][s]:e;this.setState(e=>e.errors.includes(n)?{}:{errors:[...e.errors,n]})})}render(){const e=l()({molecule:!0,enterYourNames:!0}),{loading:t,firstName:s,lastName:i,errors:o}=this.state;return Object(m.jsxs)("form",{ref:className:e,onSubmit:this.onSubmit,children:[n||(n=Object(m.jsx)("h2",{children:"What is your name?"})),r||(r=Object(m.jsx)("p",{children:"Using your real name will help your friends to find you easily. You can change it later."})),!!this.state.error&&(a||(a=Object(m.jsx)("p",{className:"errorMessage",children:"Error! Problem saving name."}))),Object(m.jsx)("input",{name:"first_name",required:!0,placeholder:"First Name",value:s,onChange:this.onFirstNameChange}),Object(m.jsx)("input",{name:"last_name",required:!0,placeholder:"Last Name",value:i,onChange:this.onLastNameChange}),Object(m.jsx)(p.a,{errors:o}),Object(m.jsx)(d.Button,{loading:t,type:"submit",disabled:!(s&&i&&0===o.length)||t,children:this.props.btnText}),this.props.children]})}}f.defaultProps={updateData:()=>{},data:{},onUserEdit:!1,firstName:"",lastName:"",btnText:"Continue",status:"",field:"",validateName:,t.a=f},903:function(e,t,s){"use strict";var n,r,a=s(3),i=s.n(a),o=s(13),h=s.n(o),l=s(92),c=s.n(l),u=s(21),d=s(0);const p={"already taken":"Username is taken","too long":"Username is too long","invalid characters":"Username contains unsupported characters",unacceptable:"Unacceptable username"};class m extends i.a.PureComponent{constructor(e){super(e),this.state={isUsernameValid:!1,status:null,suggestion:null,value:this.props.value,loading:!1},this.existingValue=this.props.value,this.onChange=this.onChange.bind(this),this.onSubmit=this.onSubmit.bind(this),this.checkUsername=c()(this.checkUsername.bind(this),500)}checkUsername(e){this.props.checkUsername(e).then(e=>{const{available:t}=e;!0===t?this.setState({isUsernameValid:!0,status:null,suggestion:null}):this.setState({isUsernameValid:!1,status:e.data.status,suggestion:e.data.suggestion})}).catch(e=>{let{data:t}=e;return this.setState({isUsernameValid:!1}),t&&t.status&&p[t.status]?this._username.setCustomValidity(p[t.status]):this._username.setCustomValidity("Username unavailable"),!1})}onChange(){const e=this._username.value.trim();e.length>1?this.checkUsername(e):this.setState({isUsernameValid:!1}),this.setState({value:e})}onSubmit(e){e.preventDefault(),this.setState({loading:!0},()=>{if(this.state.isUsernameValid){const e=this._username.value.trim();this.props.saveUsername(e,this.props.trackAction).then(()=>{this.props.onUserEdit?this.props.stepCompleted("editProfile"):this.props.stepCompleted(this.props.authMethod),this.props.trackEvent({tag_manager_event:"username_updated",existingValue:this.existingValue,onboarding:!1,username:this.props.value})}).catch(e=>(this.props.trackEvent({tag_manager_event:"user_error",errorType:"account_management",errorMessage:e.output.payload.error||e.message,errorCode:e.data.errorCode,page:"username"}),this._username.setCustomValidity("Problem Saving Username")))}})}render(){const e=h()({molecule:!0,pickUserName:!0}),{value:t,status:s,suggestion:a,isUsernameValid:i,loading:o}=this.state;return Object(d.jsxs)("form",{className:e,onSubmit:this.onSubmit,children:[n||(n=Object(d.jsx)("h2",{children:"Choose a Username"})),r||(r=Object(d.jsx)("p",{children:"Your username will help your friends and other fans find you in the app."})),Object(d.jsx)("input",{name:"username",type:"",required:!0,value:t,placeholder:"Must be at least 2 characters",pattern:"^[A-Za-z0-9_]{2,16}$",ref:title:"Please choose a username, between 2 and 16 letters and numbers.",onChange:this.onChange,min:2,max:16}),!!s&&Object(d.jsxs)("p",{className:"errorMessage",children:["Uh oh, that username is ",s,"."]}),!!a&&Object(d.jsxs)("p",{className:"errorMessage",children:['How about "',a,'"?']}),Object(d.jsx)(u.Button,{type:"submit",disabled:!i||o,loading:o,children:this.props.btnText}),this.props.children]})}}m.defaultProps={data:{},onUserEdit:!1,value:"",btnText:"Continue"},t.a=m},904:function(e,t,s){"use strict";s(3);var n,r,a=s(0);t.a=e=>Object(a.jsxs)("div",{className:"emailVerifyNotice molecule",children:[n||(n=Object(a.jsx)("h2",{children:"Verification email sent."})),r||(r=Object(a.jsx)("p",{children:"Check your email to verify your account."})),e.children]})}}]);
//# sourceMappingURL=https://static-assets.bleacherreport.net/js/editAccountPage~signupPage-fc93e5f9.js.map