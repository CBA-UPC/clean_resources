'use strict';mix_d("ExportAlternativeWidgetCards__export-alternative-card-desktop:export-alternative-card-desktop__OD63ZHOz","exports tslib @c/remote-operations @c/tracking @p/jQuery @c/metrics @p/A".split(" "),function(C,D,u,H,I,k,J){ar K=A(u),d=A(I),v=A(J),w;((w||(w={}));var l;((l||(l={}));var y;(function(a){a.DISABLED_ATC="#exports-buybox-disabled-atc";a.SEE_ALL_BUYING_OPTIONS="#buybox-see-all-buying-choices"})(y||(y={}));var m;((m||(m={}));var z;((z||(z={}));var r;((r||(r={}));var E;((E||(E={}));var F;((F||(F={}));var h;((h||(h={}));u={};u[w.US]={showImportFeeDepositAndTotalLandingCost:!0};u[w.UK]={showEnergyEfficiency:!0};u[w.DE]={showEnergyEfficiency:!0};u[w.ES]={showEnergyEfficiency:!0};u[w.FR]={showEnergyEfficiency:!0};u[w.IT]={showEnergyEfficiency:!0};u;var L=
function(a){var f=d["default"](m.TRIGGER_BUTTON),e=d["default"](m.IMPORT_FEE_ROW),c=d["default"](m.ENERGY_EFFICIENCY_ROW),b=a?h.MOBILE_POSTFIX:"";f.length&&(k.count(h.TRIGGER_SHOW+b,1),f.click(function(){return k.count(h.TRIGGER_CLICK+b,1)}));e.length&&k.count(h.IMPORT_FEE_DEPOSIT_ROW_SHOW+b,1);c.length&&(k.count(h.ENERGY_EFFICIENCY_LABAL_SHOW+b,1),c.click(function(){return k.count(h.ENERGY_EFFICIENCY_LABAL_CLICK+b,1)}))},M=function(){var a=d["default"](l.GSOD_DESKTOP_OUT_OF_STOCK).length||d["default"](l.DETAIL_DESKTOP_OUT_OF_STOCK).length||
d["default"](l.DETAIL_MOBILE_OUT_OF_STOCK).length||d["default"](l.DETAIL_MOBILEAPP_OUT_OF_STOCK).length,f=d["default"](l.GSOD_DESKTOP_UNQUALIFIED).length||d["default"](l.GSOD_MOBILE_UNQUALIFIED).length||d["default"](l.DETAIL_DESKTOP_UNQUALIFIED).length||d["default"](l.DETAIL_MOBILE_UNQUALIFIED).length||d["default"](l.DETAIL_MOBILEAPP_UNQUALIFIED).length,e=d["default"](l.GSOD_DESKTOP_UNDELIVERABLE).length||d["default"](l.DETAIL_DESKTOP_UNDELIVERABLE).length||d["default"](l.DETAIL_MOBILE_UNDELIVERABLE).length||
d["default"](l.DETAIL_MOBILEAPP_UNDELIVERABLE).length;if(a)return k.count(h.VARIANT_DETAIL_OUT_OF_STOCK,1),r.DETAIL_OUT_OF_STOCK;if(f)return k.count(h.VARIANT_DETAIL_UNQUALIFIED,1),r.DETAIL_UNQUALIFIED;if(e)return k.count(h.VARIANT_DETAIL_UNDELIVERABLE,1),r.DETAIL_UNDELIVERABLE;if(d["default"](l.TEST).length)return r.TEST;k.count(h.VARIANT_NOT_FOUND,1)},N=function(a,f,e){switch(f){case r.DETAIL_UNQUALIFIED:a.outerHTML&&d["default"](y.SEE_ALL_BUYING_OPTIONS).removeClass("a-button-primary").addClass("a-button-base");
break;case r.DETAIL_UNDELIVERABLE:a.outerHTML||d["default"](y.DISABLED_ATC).removeClass("aok-hidden");break;case r.TEST:a.outerHTML||d["default"](e?m.SHEET_PRELOAD:m.MODAL_PRELOAD).html('<span class="export-alternative-test-content-success"/>')}a.outerHTML&&(d["default"](e?m.SHEET_PRELOAD:m.MODAL_PRELOAD).html(a.outerHTML),d["default"](m.TRIGGER_CONTENT).removeClass("aok-hidden"),L(e),e&&d["default"](m.SHEET_PRELOAD).find&&d["default"](m.SHEET_PRELOAD).find(z.ENERGY_EFFICIENCY_CONTAINER).each(function(c,
b){d["default"](b).find&&(c=d["default"](b).find(z.ENERGY_EFFICIENCY_FICHE_LABEL).first(),c.hasClass&&c.hasClass("a-size-small")&&c.removeClass("a-size-small").addClass("a-size-micro"))}))},O=function(a,f){var e,c,b,g,p=JSON.stringify(null!==(e=d["default"](m.ASINS_INFO).data("asinsinfo"))&&void 0!==e?e:{});e=null!==(c=d["default"](m.CONTENT_TITLE).text())&&void 0!==c?c:"";c=null!==(b=d["default"](m.COUNTRY_CODE).text())&&void 0!==b?b:"";b=null!==(g=d["default"](m.COUNTRY_NAME).text())&&void 0!==
g?g:"";var t=M();if(t){var x=f?h.MOBILE_POSTFIX:"";k.count(h.GET_CONTENT+x,1);a({asinsInfo:p,contentTitle:e,countryCode:c,countryName:b},function(q,n){k.count(h.CONTENT_SUCCESS+x,1);N(q,t,f);null===n||void 0===n?void 0:n()},function(q,n){k.count(h.CONTENT_FAILURE+x,1);switch(t){case r.DETAIL_UNDELIVERABLE:d["default"](y.DISABLED_ATC).removeClass("aok-hidden")}null===n||void 0===n?void 0:n()})}},P=function(a,f){var e=f?h.MOBILE_POSTFIX:"",c=0;d["default"](".export-alternative-cta").each(function(b,
g){c++;b=d["default"](g).children(":first");var p=b.data("asin"),t=b.data("offerlistingid");p&&t&&d["default"](g).click(function(){k.count(h.ATC_CLICK+e,1);a({asin:""+p,offerListingId:""+t},function(x,q){k.count(h.ATC_SUCCESS+e,1);null===q||void 0===q?void 0:q();"app"===x.context.deviceSubType?location.replace("/gp/cart/view.html"):location.reload()},function(x,q){k.count(h.ATC_FAILURE+e,1);null===q||void 0===q?void 0:q()})})});k.count(h.ITEM_COUNT+"_"+c,1);d["default"](".export-alternative-product-link").each(function(b,
g){return d["default"](g).click(function(){return k.count(h.ITEM_CLICK+e,1)})})},G={},B=Q=R=S=C._operationNames=["getContent","addToCart"];C.card=function(){return D.__awaiter(void 0,void 0,void 0,function(){var a,
f,e;return D.__generator(this,function(c){S();a=K["default"].setup();f=function(b,g,p){H.addTracking(a.addToCart,{},"ex_alt_wg_atc_d")(b).then(g).catch(p)};e=function(b,g,p){a.getContent(b).then(function(t){return g(t,}).catch(p)};O(e,!1);return[2]})})}});
