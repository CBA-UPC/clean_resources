"use strict";(self.webpackChunktag=self.webpackChunktag||[]).push([[142],{7725:(e,t,n)=>{n.r(t),n.d(t,{AT_HIT_LABEL:()=>me,HitType:()=>a.Re,aggregateActionTracking:()=>we,dispatchBatch:()=>S,dispatchHit:()=>be,getCurrentScrollPercent:()=>ve,notifyHit:()=>he,setGlobals:()=>Oe});var a=n(6125),r=n(1042),o=n(2109),i=n(4564),s=n(3190),c=n(8957);const l="https://ariane.abtasty.com",p={"chrome mobile":78,chrome:77,firefox:70,edge:77,opera:64,safari:12,"uc browser":12};let d,u,y=[];async function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;if((new c.yN).haveConsent([c.RX.collect])||function(e){const t=e.h;return!!Array.isArray(t)&&t.some((e=>e.t===a.Re.consent&&"no"===e.co))}(e))if(t){const[a,r]=await(0,i.K)(!0,["browser.name","browser.version"]);!function(e,t){return!!e&&!!t&&!!p[e.toLowerCase()]&&parseInt(t,10)<=p[e.toLowerCase()]}(a,r)?function(e,t){navigator.sendBeacon(e,JSON.stringify(t))}(n,e):m(e,!t,n)}else if(window.fetch){let t={};if(!u)try{u=new AbortController,t={signal:u.signal}}catch(e){r.vU("[Hit] Error creating AbortController",e)}d={args:e,endpoint:n},await fetch(n,{...t,mode:"no-cors",method:"POST",headers:{"Content-type":"text/plain"},cache:"no-store",body:JSON.stringify(e)}),d=null}else d={args:e,endpoint:n},m(e,!t,n);else{if(0===y.length){const e=()=>{y.forEach((e=>{g(e.args,e.sync,e.endpoint)})),y=[]};window.addEventListener(`abtasty_${o.A.Name.consentValid}`,(t=>{const{detail:n}=t;n&&n.consentFor.includes(c.RX.collect)&&e()}))}y.push({args:e,sync:t,endpoint:n})}}function m(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;try{const a=new XMLHttpRequest;a.open("POST",n,t),a.setRequestHeader("Content-type","text/plain"),a.send(JSON.stringify(e)),a.onload=function(){d=null},u||(u=a)}catch(e){console.error(`${e} - Raw UserAgent: ${navigator.userAgent} - Parsed UserAgent: ${JSON.stringify((0,i.r)())}`)}}function f(e,t,n){r.Kp(`AB Tasty warning: '${e}' hit cannot be sent, format is not correct.`,...t,n)}var h=n(3827),b=n(5528),w=n(4284),v=n(2247),O=n(6541);function D(e){const t=function(e){const t=(0,w.wy)().toleranceParams;if(!t||!t.length||!e)return e;try{const n=e,a=e.split("?")[0],r=(0,h.UO)(e);return 0===Object.keys(r).length?n:(t.forEach((e=>{delete r[e]})),`${a}?${Object.keys(r).map((e=>void 0===r[e]?"":`${e}=${r[e]}`)).join("&")}`)}catch(t){return(0,r.Kp)("[ABTasty]: Sensitive data restriction can't be applied",t),e}}(e);return function(e){const t=(0,w.wy)().toleranceRegex,n=e;if(!t)return n;try{const e=new RegExp(t).exec(n);if(e)return e.shift(),e.join("")}catch(e){(0,r.Kp)(`[ABTasty] The sensitive data regexp "${t}" can't be applied`,e)}return n}(t)}function T(e){const{campaignHistory:t,visitorId:n,currentSessionTimestamp:a,numberOfSessions:r}=e,o=new b.w;let i=o.getReferrer();!i&&o.isItNewSession()&&(i=document.referrer);const s={c:t?.()||{},cid:(0,w.Nn)(),vid:n,dr:encodeURIComponent(D(i)),pt:encodeURIComponent(document.title),de:encodeURIComponent(document.characterSet),dl:encodeURIComponent(D(document.location.href)),cst:a,sn:r,lv:(0,v.aO)()};return(0,O.GD)()&&(s.qa=!0),s}var E=n(2622);let q,A=[];const R=e=>{A.push(e),function(){q&&"number"==typeof q&&clearTimeout(q);q=setTimeout((()=>{S()}),500)}(),JSON.stringify(A).length>=40960&&S()};const S=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=E.j.getCommonDataRefresher();if(t){const n=t();if(!A||!A.length)return void(e&&u&&(u.abort(),(0,s.k)(d)||g(d.args,!0,d.endpoint)));A.map((e=>{e.qt=Date.now()-e.qt}));const o={...T(n),tv:"next",tch:`${"9483dabf".substring(0,5)}`,h:A,t:a.Re.batch};g(o,e),(0,r.c2)("A batch hit has been sent. Data:",o),A=[]}else(0,r.Kp)("[CollectFacade] common data refresher is not set")};var C=n(8390);const k={t:{label:"Hit Type",required:!0,types:[{type:a.OD.String}],allowedValues:Object.values(a.Re)},ib:{label:"Is a bot",required:!1,types:[{type:a.OD.Boolean}]}};function $(e,t){const{type:n,condition:r,model:o,allowEmpty:i=!0}=t,c=typeof e;switch(n){case a.OD.Boolean:return c===n||["number","string"].some((e=>e===c))&&[0,1,"true","false","0","1"].includes(e);case a.OD.IntegerArray:return Array.isArray(e)&&(!i&&e.length>0||i)&&e.every((e=>$(e,{type:a.OD.Integer,condition:r})));case a.OD.Integer:return"boolean"!==c&&!isNaN(e)&&Number(e)%1==0&&(!r||r&&r(Number(e)));case a.OD.FloatArray:return Array.isArray(e)&&(!i&&e.length>0||i)&&e.every((e=>$(e,{type:a.OD.Float,condition:r})));case a.OD.Float:return"boolean"!==c&&!isNaN(e)&&(!r||r&&r(Number(e)));case a.OD.ArrayArray:return Array.isArray(e)&&(!i&&e.length>0||i)&&e.every((e=>$(e,{type:a.OD.Array,condition:r})));case a.OD.Array:return Array.isArray(e)&&(!i&&e.length>0||i);case a.OD.ObjectArray:return Array.isArray(e)&&(!i&&e.length>0||i)&&e.every((e=>$(e,{type:a.OD.Object,model:o,condition:r,allowEmpty:i})));case a.OD.Object:return c===n&&!Array.isArray(e)&&(!(!i&&Object.keys(e).length<=0)&&(!o||Object.entries(e).every((e=>{let[t,n]=e;return $(t,o.key)&&$(n,o.value)}))));case a.OD.StringArray:return Array.isArray(e)&&(!i&&e.length>0||i)&&e.every((e=>$(e,{type:a.OD.String,condition:r})));case a.OD.String:return(c===n||["number","boolean"].some((e=>e===c))&&!isNaN(e))&&!(0,s.k)(e)&&(!i&&(""+e).length>0||i)&&(!r||r&&r(""+e));default:return c===n}}function I(e,t){const n={...k,...t};return Object.keys(n).reduce(((t,a)=>{const r=n[a];if(r){const{label:n,required:o,types:i,maxLength:c,allowedValues:l}=r,p=e[a];if(o&&((0,s.k)(p)||(0,C.x)(p)))t.push(`Argument '${a}' (${n}) is missing`);else if(void 0!==p&&i&&i.length>0){const r=i.map((t=>{const r=e[a],o=typeof r;if(!$(r,t))return`Argument '${a}' (${n}) is of wrong type ${o} (expected ${JSON.stringify(t)})`;switch(t.type.toLowerCase()){case"boolean":e[a]=!["0","false",0,!1].includes(r)&&!!r;break;case"integer":case"float":e[a]=Number(r);break;case"string":!["number","boolean"].some((e=>e===o))||isNaN(r)||void 0===r||(0,s.k)(r)||(e[a]=""+r)}}));r.every((e=>e&&e.length>0))&&r.forEach((e=>t.push(e)))}if(null!=p&&l&&-1===l.indexOf(p)){const e=l.map((e=>`"${e}"`)).join(", ");t.push(`Argument '${a}' (${n}) value is not allowed (expected one of ${e}, received ${p})`)}null!=p&&c&&p.length>c&&t.push(`Argument '${a}' (${n}) is too long (length of ${p.length}, expected ${c})`)}return t}),[])}var N=n(4692);const P=e=>{const t={};(0,N.FU)()&&!(0,s.k)((0,N.QX)().previousLogicalView)&&(t.pea="INVALIDATE",t.pev=(0,N.QX)().previousLogicalView);const n={...e,...t,t:a.Re.pageview},o=function(e){return I(e,{pea:{label:"PostEdit Action",required:!1,types:[{type:a.OD.String,allowEmpty:!1}]},pev:{label:"PostEdit LogicalView",required:!1,types:[{type:a.OD.String,allowEmpty:!1}]}})}(n);o.length?f(a.Re.pageview,o,n):(R(n),(0,r.c2)("Pageview hit has been aggregated. Data:",n))};const j=e=>{const t=window.ABTasty.results,n=e.caid&&t&&t[e.caid]&&Object.keys(t[e.caid].targetings.qaParameters).length>0||(0,O.GD)(),o={...e,t:a.Re.campaign};n&&(o.qa=!0);const i=function(e){return I(e,{caid:{label:"Campaign ID",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},vaid:{label:"Variation ID",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]}})}(o);i.length?f(a.Re.campaign,i,o):(R(o),(0,r.c2)("Campaign hit has been aggregated. Data:",o))};var x=n(763),L=n(4874),_=n(7787);const B=(e,t)=>e.map((e=>{for(const n in e){if("qt"===n)continue;const a=e[n];(0,s.k)(t[n])||t[n]!=a||delete e[n]}return e})).filter((e=>{const t=Object.keys(e);return!(1===t.length&&"qt"===t[0])}));const M=e=>{const t={...e,t:a.Re.segment},n=function(e){return I(e,{s:{label:"Segments",required:!0,types:[{type:a.OD.Object,model:{key:{type:a.OD.String},value:{type:a.OD.String}}}]},pa:{label:"Provider",required:!1,types:[{type:a.OD.String,required:!1}]}})}(t);n.length?f(a.Re.segment,n,t):(Array.isArray(t.s)?t.s.forEach((t=>{const n={...e,t:a.Re.segment};n.s=t,R(n)})):R(t),function(e){if(!e.s&&"object"!=typeof e.s)return;if(e.pa&&"string"!=typeof e.pa)return;const t=new x.T;let n=t.getSegments()||[];const a=e.pa?{...e.s,pa:e.pa}:e.s;n=B(n,a),t.setSegments([...n,{...a,qt:e.qt}])}(e),(e=>{if(!e.s&&"object"!=typeof e.s)return;if(e.pa&&"string"!=typeof e.pa)return;let t=JSON.parse(L.Jo.getItem(L.vR,_.I.CUSTOM_SEGMENTS))||[];const n=e.pa?{...e.s,pa:e.pa}:e.s;t=B(t,n),L.Jo.setItem(L.vR,_.I.CUSTOM_SEGMENTS,JSON.stringify([...t,{...n,qt:e.qt}]))})(e),(0,r.um)("Segment hit has been aggregated. Data:",t))};n(1155);const U=e=>{const t={...e,t:a.Re.event},n=function(e){return I(e,{ec:{label:"Event Category",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},ea:{label:"Event Action",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},el:{label:"Event Label",required:!1,types:[{type:a.OD.String,allowEmpty:!0}]},ev:{label:"Event Value",required:!1,types:[{type:a.OD.Integer,condition:e=>e>=0}]},caid:{label:"Campaign Id",required:!1,types:[{type:a.OD.String,allowEmpty:!1}]},vaid:{label:"Variation Id",required:!1,types:[{type:a.OD.String,allowEmpty:!1}]}})}(t);n.length?f(a.Re.event,n,t):(R(t),"csat"===t.ec&&t.caid&&t.vaid&&t.caid&&t.ev&&(new x.T).addVote({vaid:`${t.vaid}`,caid:`${t.caid}`,score:t.ev,maxScore:Number((t.cv&&t.cv[2]||"").replace(/\D/g,""))}),t.ec===me&&t.caid?(0,r.um)(`Event of category "${t.ec}" has been aggregated for campaign ${t.caid} and variation ${t.vaid}. Data:`,t):(0,r.um)(`Event of category "${t.ec}" has been aggregated. Data:`,t))};const V=e=>{const t={...e,t:a.Re.transaction},n=function(e){return I(e,{tid:{label:"Transaction ID",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},ta:{label:"Transaction Affiliation",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},tr:{label:"Transaction Revenue",required:!1,types:[{type:a.OD.Float,condition:e=>e>=0}]},ts:{label:"Transaction Shipping",required:!1,types:[{type:a.OD.Float,condition:e=>e>=0}]},tt:{label:"Transaction Tax",required:!1,types:[{type:a.OD.Float,condition:e=>e>=0}]},tc:{label:"Transaction Currency",required:!1,types:[{type:a.OD.String,allowEmpty:!0}],maxLength:10},tcc:{label:"Transaction Coupon Code",required:!1,types:[{type:a.OD.String,allowEmpty:!0}]},pm:{label:"Transaction Payment Method",required:!1,types:[{type:a.OD.String,allowEmpty:!0}]},sm:{label:"Transaction Shipping Method",required:!1,types:[{type:a.OD.String,allowEmpty:!0}]},icn:{label:"Transaction Number of Items",required:!1,types:[{type:a.OD.Integer,condition:e=>e>=0}]}})}(t);n.length?f(a.Re.transaction,n,t):(R(t),function(e){const t={id:e.tid||e.id,value:e.tr,shipping:e.sm,payment:e.pm,coupon:e.tcc,tax:e.tt,shipping_cost:e.ts,currency:e.tc,name:e.name,quantity:e.quantity,affiliation:e.ta,time:e.time||(new Date).getTime()};(new x.T).addTransaction(t)}(e),(0,r.um)(`Transaction "${t.ta}" has been aggregated. Data:`,t))};const H=e=>{const t={...e,t:a.Re.item},n=function(e){return I(e,{tid:{label:"Transaction ID",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},in:{label:"Item Name",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},ip:{label:"Item Price",required:!1,types:[{type:"float"}]},iq:{label:"Item Quantity",required:!1,types:[{type:"integer"}]},ic:{label:"Item Code",required:!1,types:[{type:a.OD.String,allowEmpty:!0}],maxLength:500},iv:{label:"Item Category",required:!1,types:[{type:a.OD.String,allowEmpty:!0}],maxLength:500}})}(t);n.length?f(a.Re.item,n,t):(R(t),function(e){const t={transactionId:e.tid,name:e.in,quantity:e.iq,revenue:e.iq&&e.ip?e.iq*e.ip:0,local_revenue:e.iq&&e.ip?e.iq*e.ip:0,sku:e.ic,category:e.iv,time:(new Date).getTime()};(new x.T).addItem(t)}(e),(0,r.um)("Item hit has been aggregated. Data:",t))};var F=n(7947),X=n(7649),J=n(1943);const K={[J.xz]:"==",[J.DC]:"=@",[J.o1]:"=~"};const Y=e=>t=>{let{qt:n,...o}=t;const{waitForConsent:i}=(0,w.wy)(),s=(e=>{let{mode:t,data:n}=e;switch(t){case F.n8.customJs:return"custom";case F.n8.didomi:return"string"==typeof n&&n?n:X.Y;case F.n8.specificCookie:if("object"==typeof n){const{name:e,value:t,condition:a}=n;return`${e}${a&&K[a]?K[a]:K[J.xz]}${t}`}default:return""}})(i),c=(e=>{let{campaignRestrictions:t}=e;return Object.keys(t).length>0&&0===Object.values(t).filter((e=>e)).length?a.YX.strict:a.YX.permissive})(i),l=(e=>{let{mode:t}=e;return Object.keys(a.aB).includes(t)?a.aB[t]:void 0})(i),p=(e=>{let{campaignRestrictions:t}=e;return Object.keys(t).filter((e=>t[e])).reduce(((e,t)=>e+F.s_[t]),0)})(i),d=Date.now(),u={...o,qt:d-n,me:s,om:c,sco:`${p}`,t:a.Re.consent,ts:d};l&&(u.op=l);const y=function(e){return I(e,{co:{label:"Consent",required:!0,types:[{type:a.OD.Boolean,allowEmpty:!1}]}})}(u),m={...T(e),tv:"next",tch:`${"9483dabf".substring(0,5)}`,h:[u],t:a.Re.batch};y.length?f(a.Re.consent,y,u):(g(m),(0,r.c2)("Consent hit has been sent. Data:",u))},G={ps:{label:"Product SKU",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},pn:{label:"Product name",required:!1,types:[{type:a.OD.String,allowEmpty:!1}]},pq:{label:"Product quantity",required:!0,types:[{type:a.OD.Integer,allowEmpty:!1}]},pp:{label:"Product price",required:!0,types:[{type:a.OD.Float,allowEmpty:!1}]},pcid:{label:"Product cart Id",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]}},Q={pq:{label:"Product quantity",required:!0,types:[{type:a.OD.Integer,allowEmpty:!1}]},pp:{label:"Product price",required:!0,types:[{type:a.OD.Float,allowEmpty:!1}]},pcid:{label:"Product cart Id",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]}},W={pp:{label:"Product price",required:!1,types:[{type:a.OD.Float,allowEmpty:!1}]},ps:{label:"Product SKU",required:!0,types:[{type:a.OD.String,allowEmpty:!1}]},pn:{label:"Product name",required:!1,types:[{type:a.OD.String,allowEmpty:!1}]}},z=[a.s_.CART_ITEM,a.s_.CART_TOTAL,a.s_.VIEW];const Z=e=>{const t={...e,t:a.Re.product},n=function(e){return I(e,{pit:{label:"Product interaction type",required:!0,types:[{type:"string",allowEmpty:!1,value:z,condition:e=>z.some((t=>t===e))}]},...e.pit===a.s_.CART_ITEM?G:{},...e.pit===a.s_.CART_TOTAL?Q:{},...e.pit===a.s_.VIEW?W:{}})}(t);n.length>0?f(a.Re.product,n,t):(R(t),(0,r.um)("Product hit has been aggregated. Data:",t))};function ee(e){if(!(e instanceof Element))return null;const t=[];let n=e;for(;n&&n.nodeType===Node.ELEMENT_NODE;){let e=n.nodeName.toLowerCase();if(n.id){e+="#"+n.id,t.unshift(e);break}{let t=n,a=1;for(;t=t.previousElementSibling;)t.nodeName.toLowerCase()===e&&a++;a>1&&(e+=":nth-of-type("+a+")")}t.unshift(e),n=n.parentNode}return t.join(" > ")}const te=Object.keys({click:"click",over:"over",scroll:"scroll"});function ne(e,t){const n={};if(e&&e!==document){const a=t.elementsMap.get(e);n.tecp=encodeURIComponent(ee(e)),e.id&&(n.teid=e.id),a&&a.enterTime&&(n.otbe=Date.now()-a.enterTime),n.tc=e.getAttribute("class")||"";const{left:r,top:o,width:i,height:s}=function(e){const t=e.getBoundingClientRect(),n=document.body,a=document.documentElement,r=window.pageYOffset||a.scrollTop||n.scrollTop,o=window.pageXOffset||a.scrollLeft||n.scrollLeft,i=a.clientTop||n.clientTop||0,s=a.clientLeft||n.clientLeft||0,c=t.top+r-i,l=t.left+o-s;return{top:Math.round(c),left:Math.round(l),width:Math.round(t.width),height:Math.round(t.height)}}(e);n.tes=`${i}x${s}`,n.tep=`${r}x${o}`,n.tcec=e.childElementCount||0,n.tet=e.tagName}return n}const ae=(e,t,n)=>{const{pageX:r,pageY:o}=t.mouse,i=void 0!==n.pageX?`${n.pageX}x${n.pageY}`:`${r}x${o}`,s={...ne(n.target,t),esp:ve(),cp:i,...e,t:a.Re.visitorevent},c=function(e){return I(e,{et:{label:"Event Type",required:!0,types:[{type:a.OD.String}],allowedValues:te}})}(s);c.length?f(a.Re.visitorevent,c,s):R(s)};const re=e=>{let{caid:t,vaid:n,...o}=e;const i={...o,t:a.Re.nps},s=function(e){return I(e,{ns:{label:"The NPS score ranging from -100 to 100",required:!0,types:[{type:a.OD.Integer}]},nf:{label:"The NPS feedbacks from visitors",required:!1,types:[{type:a.OD.String,allowEmpty:!0}]}})}(i);s.length?f(a.Re.nps,s,i):(n&&t&&o.ns&&(new x.T).addVote({vaid:`${n}`,caid:`${t}`,score:o.ns}),R(i),(0,r.c2)("NPS hit has been aggregated. Data:",i))};const oe=e=>t=>{const n={...T(e),...t,t:a.Re.datalayer},o=function(e){return I(e,{dlr:{label:"Datalayer content",required:!0,types:[{type:a.OD.Object},{type:a.OD.Array}]}})}(n);o.length?f(a.Re.datalayer,o,n):(g(n,null,"https://ariane.abtasty.com/datalayer"),(0,r.c2)("Datalayer hit has been send. Data:",n))},ie=e=>t=>{if(window.Cypress)return Promise.resolve();const n={...T(e),...t,t:a.Re.usage},r=I(n,{cv:{label:"Custom values",required:!0,types:[{type:a.OD.Object}]}});return r.length?(f(a.Re.usage,r,n),Promise.resolve()):g(n,!1,"https://ariane.abtasty.com/analytics")};var se=n(9572),ce=n(3492);const le=e=>{(0,ce.kG)({deprecate:"window._abtasty.push()",el:`push-${e}`,type:"function"})};const pe=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._abtasty).forEach((e=>{if(Array.isArray(e)&&Object.keys(e).length)switch(e[0].toString().toLowerCase()){case"transaction":(e=>{const t=e[1].toString(),n={tid:e[2],tr:(0,s.k)(e[3])?0:parseFloat(e[3].toString().replace(",",".")),icn:Number(e[4])||0,ta:t};be(a.Re.transaction,n)})(e),le("transaction");break;case"cv":(e=>{const t=e[1]||"",n=e[2]||"";if("string"!=typeof t||""===t||("string"!=typeof n||""===n)&&"number"!=typeof n)return void(0,r.Kp)("CV informations are not valid, please, check that your second and third argument are not empty strings");const o={category:se.d.CV,action:t,value:"string"==typeof n?n.substring(0,65):n,time:Date.now()};(new x.T).addCustomVariable(o);const i={[t]:"string"==typeof n?n.substring(0,65):n};be(a.Re.segment,{s:i})})(e),le("cv");break;case"eco":(e=>{const t=e[1]||"",n=e[2]||"";if("string"!=typeof t||""===t||("string"!=typeof n||""===n)&&"number"!=typeof n)return void(0,r.Kp)("ECO informations are not valid, please, check that your second and third argument are not empty strings");const o={action:t,category:se.d.ECO,value:"string"==typeof n?n.substring(0,65):n,time:Date.now()};(new x.T).addCustomVariable(o);const i={ec:"eco",ea:t,el:n};be(a.Re.event,i)})(e),le("eco");break;default:(0,r.vU)("Wrong format to push (nothing was sent)",e)}else(0,r.vU)("Please give at least one parameter for the/these arrays !",e)})),window._abtasty=[],window._abtasty.push=function(){return pe([arguments[0]]),Array.prototype.push.apply(this,arguments)}};var de=n(1438),ue=n(7352),ye=n(7196);const ge=e=>t=>{if(window.Cypress)return Promise.resolve();const n={cv:t.cv,t:a.Re.troubleshooting,cid:(0,w.Nn)(),vid:e.visitorId},r=I(n,{cv:{label:"Custom values",required:!0,types:[{type:a.OD.Object}]}});return r.length?(f(a.Re.troubleshooting,r,n),Promise.resolve()):g(n,!1,"https://ariane.abtasty.com/troubleshooting")},me="Action Tracking",fe={elementsMap:new Map,mouse:{pageX:0,pageY:0}},he=(e,t,a,r,o)=>{if(Promise.resolve().then(n.bind(n,1789)).then((n=>{let{recheckTargetingByHit:a}=n;a(e,t)})),window.frames.ABTastyQaAssistant){const n={...t,qt:a,event:r,path:o,name:"ABTasty_event",type:e.toUpperCase()};window.postMessage(n,document.location.origin),window.frames.ABTastyQaAssistant.postMessage(n,"*")}ye.d.getInstance().emit(e.toUpperCase(),t,a)},be=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const i=E.j.getCommonDataRefresher();if(i){const r=t.qt||Date.now();he(e,t,r,n,o),(e=>({[a.Re.consent]:Y(e),[a.Re.campaign]:j,[a.Re.event]:U,[a.Re.item]:H,[a.Re.pageview]:P,[a.Re.segment]:M,[a.Re.transaction]:V,[a.Re.visitorevent]:ae,[a.Re.nps]:re,[a.Re.datalayer]:oe(e),[a.Re.product]:Z,[a.Re.usage]:ie(e),[a.Re.troubleshooting]:ge(e)}))(i())[e.toUpperCase()]({...t,qt:r},{...fe},n)}else(0,r.Kp)("[CollectFacade] common data refresher is not set")};const we=(e,t,n,r,o)=>{const i={name:e,value:0,time:o||Date.now()};(new x.T).addActionTracking(i);const s=ee(r),c={ec:me,ea:e,qt:o};n&&(c.caid=n.toString()),be(a.Re.event,c,void 0,s)};function ve(){const e=100*(document.body.scrollTop||document.documentElement.scrollTop)/(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-window.innerHeight);return Math.round(e)}const Oe=e=>{E.j.setCommonDataRefresher(e),(()=>{if(window.abtasty){const e=window.abtasty.send;window.abtasty.send=(t,n)=>{be(t,n),e&&e(t,n)}}else window.abtasty={send:(e,t)=>{be(e,t)}};if("function"==typeof window.ABTastyClickTracking){const e=window.ABTastyClickTracking;window.ABTastyClickTracking=(t,n,a)=>{we(t,n,a,null),e(t,n,a)}}else window.ABTastyClickTracking=we;if("function"==typeof window.ABTastyEvent){const e=window.ABTastyEvent;window.ABTastyEvent=(t,n,a)=>{we(t,n,a,null),e(t,n,a)}}else window.ABTastyEvent=we})(),window._abtasty=window._abtasty||[],pe(window._abtasty),function(){const e=(0,de.s)()?"pagehide":"beforeunload";window.addEventListener(e,(()=>(S(!0),null)))}(),E.j.getCollectHit().forEach((e=>{be(e.type,{qt:e.time,...e.args},void 0,void 0)})),E.j.getEventTracking().forEach((e=>{we(e.name,e.data,e.campaignId,void 0,e.time)})),(new ue.C).dispatchCustomEvent(o.A.Name.analyticsLoaded)}}}]);