/***************************************
 * @preserve
 * Copyright (c) 2020 Verint Systems, Inc. All rights reserved.
 * ForeSee Web SDK: Utils Library
 * Version: 19.13.1
 * Built: October 05, 2020, 13:36:19 CDT
 ***************************************/
_fsDefine(["fs",_fsNormalizeUrl("$fs.compress.js"),"exports"],function(e,t,i){var s=["_4c_s_","_4c_mc_","_4c_es_"],n=r=r c=ar u=h=);h.initialize=function(e){e.call(h)};var d=window,f=d.document,g=!!d.sessionStorage,p=f.getElementsByTagName("head"),_=(d.localStorage,d.sessionStorage);p=p&&p.length>0?p[0]:f.body;try{g&&(_.setItem("_",""),_.removeItem("_"))}catch(me){g=!1}var v={},m={},b=[],y=S=v.Bind=S;var w=v.BindOnce=w;._runActualUnBind=v.Unbind=I;var k=!1,O=f.addEventListener?(d.addEventListener("beforeunload",O,!0),d.addEventListener("pagehide",O,!0),f.addEventListener("unload",O,!0)):f.attachEvent&&d.attachEvent("onunload",O);var E=C=["shift","meta","alt","escape","control","apps","capslock"],x=),B=new x;if(history&&history.pushState){d.addEventListener("popstate",;var T=history.pushState;history.pushState=var D=window,N={TRIGGER:"funcxm",FEEDBACK:"funfbk",REPLAY:"funrep",BEHAVIOR:"fs_behavioral_data"},L={StorageInstances:{}},P=j=P(),A={CK:"COOKIE",MC:"MICROCOOKIE",CL:"COOKIELESS",DS:"DOMSTORAGE",CK_Hybrid:"HYBRID",MC_Hybrid:"MICRO_HYBRID"},M=function(t){var i=new Date,s=new Date(i.getFullYear(),i.getMonth(),i.getDate()+7),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()+e.globalConfig.cookieExpiration),r=n;return t.browser&&t.browser.isITPEnabled&&n.getTime()>s.getTime()&&(r=s),{path:"/",domain:t.selectCookieDomain(e.globalConfig.cookieDomain,window.location.toString()),secure:!1,encode:!0,expires:r.toUTCString()}},R=function(){function t(t){var i=this;this.pers=(e.globalConfig.storage||"").toUpperCase(),e.ext(this,{isReady:!1,defaultExpire:7776e6,ready:new x,onCommit:new x,onSync:new x,_readyState:new x,maxExpire:-1,timeOffset:0,_keyEvents:{},_updateTimeout:6e4,_data:{when:0,keys:{}},isStale:!1,lock:null,lastMaint:P(),lastSave:P(),lastSync:P(),isSyncing:!1},!1),this.browser=t,S(window,"unload",}var i=t.prototype;return i.selectCookieDomain=i.upgradeOldStorage=i.setUpdateInterval=i.stopUpdateInterval=i._fireChangeEvents=function(t){var i,s=this;for(var n in t)(!(i=this._data.keys[n])||i.t<t[n].t||i.x!==t[n].x)&&(this._keyEvents[n]||(this._keyEvents[n]=new x),e.nextTick(n)))},i.save=i._maint=i.set=i.get=i.all=i.erase=i._delete=i.reset=function(t,i,s){if(t&&this.onCommit.subscribe(t,!0,!1),s||(this.ckie&&this.ckie.kill("_4c_"),this.pers==A.CK_Hybrid&&this.browser.supportsLocalStorage&&localStorage.removeItem("_4c_"),this.pers==A.MC_Hybrid&&this.browser.supportsLocalStorage&&localStorage.removeItem("_4c_mc_"),this.browser.supportsSessionStorage&&(sessionStorage.removeItem("_4c_mc_",this.uid),sessionStorage.removeItem("_4c_es_")),this.browser.supportsLocalStorage&&localStorage.removeItem("_4c_es_")),this.pers==A.CK||this.pers==A.CK_Hybrid){if(this._data.keys={},localStorage&&e.supportsDomStorage)for(var n in localStorage)/^(_fsr|__fsFr)/.test(n)&&localStorage.removeItem(n);this.onCommit.fire()}else this.pers==A.DS&&(this._data.keys={},localStorage.removeItem("_4c_"),this.onCommit.fire())},i.setMaxKeyExpiration=i.getMaxKeyExpiration=i.watchForChanges=i.dispose=t}(),U=function(){var t=(e.globalConfig.storage||"").toUpperCase();return t===A.CK||t===A.MC?"cookie":t===A.CK_Hybrid||t===A.MC_Hybrid||t===A.DS?"windowStorage":null},F=function(){if(!1===e.globalConfig.enableStorage){if("cookie"===U()){var t=L.StorageInstances.generalStorage||L.StorageInstances.brainStorage,i=t&&t.ckie&&t.ckie.getByNestedCookieName("_4c_es_");return!0===i||"true"===i}if("windowStorage"===U()){var s=localStorage.getItem("_4c_es_");return!0===s||"true"===s}return!1}return!0},K=);initialize=function(e){e.apply(K)},K.isSupported=var V=K);V.isSupported=var W=function(t){var i=this,s=t||navigator.userAgent,n=e.toLowerCase(s);e.ext(i,{agent:s,os:{name:"",version:0},browser:{name:"",version:0,actualVersion:0},isMobile:/iphone|ipad|ipod|android|kindle|silk|bntv|nook|blackberry|playbook|mini|windows\sce|windows\sphone|palm|bb10/i.test(s)||!!window.orientation,isTablet:/ipad|playbook|nook|bntv/i.test(s),isWinPhone:/Windows Phone/i.test(s),isITPEnabled:!1,supportsLocalStorage:!1,supportsPostMessage:!!window.postMessage,isIE:!1,isEdge:!1,isZoomable:!0,supportsSVG:document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),isReady:!1,ready:new x,_internalReady:new x,isIos:!1,servUrl:(e.globalConfig.deviceDetectionUrl||"https://device.4seeresults.com")+"/detect?accessToken="},!1);try{localStorage&&(K.prototype.setItem("a","b"),localStorage.removeItem("a"),i.supportsLocalStorage=!0)}catch(me){}try{sessionStorage&&(V.prototype.setItem("a","b"),sessionStorage.removeItem("a"),i.supportsSessionStorage=!0)}catch(me){}i._internalReady.subscribe(function(){i.ready.fire(i)}),i.isMobile&&/iphone|ipad|ipod/i.test(s)&&!i.isWinPhone&&(i.isIos=!0);var r,o,a,c,l=u=d=s),f=function(){var t,n,r,o,a,c,h,f,g;i.browser.name=d.name,i.browser.version=d.version,i.browser.actualVersion=(t=i.browser.name,n=i.browser.version,"IE"!==t||n<=6||n>=10?n:l("Trident")||7!=n?l("Trident/6.0")&&n<=10?10:l("Trident/5.0")&&n<=9?9:l("Trident/4.0")&&n<9?l("WOW64")?8:7==n?n:8:n:7),i.os.name=i.isMobile?l("Windows Phone")?"Winphone":l("iPod")?"iPod":l("iPad")?"iPad":l("iPhone")?"iPhone":(l("blackberry")||l("playbook")||l("BB10"))&&l("applewebkit")?"Blackberry":l("Kindle")||l("Silk")?"Kindle":l("BNTV")||l("Nook")?"Nook":l("Android")?"Android":e.isDefined(window.orientation)?"Mobile":"Other":l("Windows")?"Windows":l("OS X")?"Mac":l("Linux")||l("Googlebot")?"Linux":l("Mac")?"Mac":void 0,i.os.version=(r=s,i.isMobile,l("windows phone")||!l("ipad")&&!l("iphone")?l("googlebot")?1:l("mac os x")?(a=(o=/OS X ([0-9_]*)/gi.exec(r))[1].split("_"),c=parseInt(a[0],10),f=parseInt(a[1],10),g=parseInt(a[2],10),f+=u(g,1),c+u(f,1)):l("Windows NT")?(a=(o=/Windows NT ([0-9.]*)/gi.exec(r))[1].split("."),c=parseInt(a[0],10),f=parseInt(a[1],10),c+u(f,1)):(o=r.match(/Windows Phone OS[\/\s](\d+\.?\d+)/)||r.match(/Windows Phone[\/\s](\d+\.?\d+)/)||r.match(/Android[\/\s](\d+\.?\d+)/),c=e.isDefined(o)?o[1]:1,h=parseFloat(c),!isNaN(h)&&h>0?h:c):(a=(o=/OS ([0-9_]*) like/gi.exec(r))[1].split("_"),c=parseInt(a[0],10),f=parseInt(a[1],10),c+u(f,1))),i.isITPEnabled="Safari"===i.browser.name&&"number"==typeof i.browser.version&&i.browser.version>=12.1},g=p=function(){f()};if(i.isMobile)if(i.isIos||""===i.servUrl||i.isTablet||i.isWinPhone)p(),g();else{var _,v=m=this.supportsLocalStorage;if(m&&!t&&(_=sessionStorage.getItem("ACS_BROWSER")),_)v(_);else{var b={method:"GET",url:i.servUrl+(r=new Date,o=r.getFullYear().toString(),a=(r.getMonth()+1).toString(),c=r.getDate().toString(),o+(a[1]?a:"0"+a[0])+(c[1]?c:"0"+c[0])+"ForeSee"+(location.origin||"null")))+"&ua="+s,type:"*/*",contentType:"application/x-www-form-urlencoded",success:failure:;new h(b,!0).send()}}else f(),i.isReady=!0,i.isIE="IE"==i.browser.name,i._internalReady.fire()},z=);var G={},q=0,X=function(t,i){var s,n,r,o;for(e.isNodeList(t)||e.isArray(t)||(t=[t]),i=i.trim().split(" "),s=0,n=t.length;s<n;s++)if(o=t[s],e.isElement(o))for(r=0;r<i.length;r++)o.classList.add(i[r])},Y=$=Q={_id:"",has:intervals:{uid:"",mcid:""},sgi:uid:mcid:beacon:,Z={has:intervals:{uid:""},uid:,ee={GA:Z,OM:Q},te=);ar se=ne=function(e){var t=e.getByCookieName("_4c_");if(t)try{JSON.parse(t)}catch(me){e.kill("_4c_"),e.set("_4c_s_",t)}var i=e.getByCookieName("_4c_mc_");i&&(e.setBrainId(i),e.kill("_4c_mc_"))},re=function(){ar i=t.prototype;return i.set=function(e,t,i,s){var n=this.getNestedStorage();n[e]=t;var r=JSON.stringify(n);(s||F())&&this.__writeDataToCookie("_4c_",r,i)},i.setBrainId=i.__writeDataToCookie=function(t,i,s){var n,r=this.opts;for(var o in s&&(r=e.ext({},r,s)),i=e.isDefined(r.encode)?e.enc(i):i,t=e.enc(t),"localhost"==r.domain&&delete r.domain,e.globalConfig.cookieSecure&&"false"!==e.globalConfig.cookieSecure&&"false"!==e.hasSSL&&(i+=";SameSite=Strict;secure"),r)if(r[o])switch(n=r[o],i+=";"+("duration"==o?"expires":o),o){case"expires":i+="="+(e.isDate(n)?n.toUTCString():n)+";";break;case"duration":i+="="+new Date(P()+864e5*n).toUTCString()+";";break;default:i+="="+n}f.cookie=t+"="+i},i.getByNestedCookieName=i.getNestedStorage=function(){if(!f.cookie)return{};var e=f.cookie.match("(?:^|;)\\s*"+r("_4c_")+"=([^;]*)");if(!e)return{};var t=decodeURIComponent(e[1]);return JSON.parse(t)},i.getByCookieName=i.kill=t}(),oe=function(t){function i(i,s,n,r){var o;return(o=t.call(this,i,s)||this).brainUrl=r||e.globalConfig.brainUrl,o.siteKey=n||e.globalConfig.siteKey,s&&(o.uid=s),e.ext(J(o),{_serverFails:0,cThreshold:600},!1),i.ready.subscribe(function(){o._initialize()},!0,!0),o}H(i,t);var s=i.prototype;return s._initialize=s._initializeMicrostorage=function(){var t=A;this.ckie=new re(M(this)),ne(this.ckie),this.uid||(this.uid=this.ckie.getByNestedCookieName("_4c_mc_")),this.uid||(this.pers!==t.MC_Hybrid&&this.browser.supportsSessionStorage&&(this.uid=e.sessionStorage.getItem("_4c_mc_")),this.pers===t.MC_Hybrid&&this.browser.supportsLocalStorage&&(this.uid=e.localStorage.getItem("_4c_mc_"))),(!this.uid||this.uid&&(this.uid.length>64||this.uid.indexOf("{")>-1))&&(this.uid=ie()),this.browser.supportsSessionStorage&&this.pers===t.MC_Hybrid&&V.prototype.setItem("_4c_mc_",this.uid),this.browser.supportsLocalStorage&&this.pers===t.MC_Hybrid&&K.prototype.setItem("_4c_mc_",this.uid),this.ckie.setBrainId(this.uid)},s._initializeCookieless=s._initialSync=function(){this.get("rid")?this.uid=this.get("rid"):(this.uid=this.uid||ie(),this.set("rid",this.uid)),this.setUpdateInterval(this._updateTimeout),this._readyState.fire(this),this.ready.fire(this)},s._sync=s._commit=function(){var e=this;clearTimeout(this.lock),this.lock=null,this.lastSave=this._data.when=P(),this.browser.supportsLocalStorage&&this.pers===A.MC_Hybrid&&(K.prototype.setItem("_4c_mc_",this.uid),this.ckie&&this.ckie.setBrainId(this.uid)),this.ckie&&!this.ckie.getByNestedCookieName("_4c_mc_")&&this.ckie.setBrainId(this.uid),this._serverFails>5||(this.ajax.send({method:"POST",url:this.brainUrl+"/state/"+this.siteKey+"/"+this.uid,data:this._data,contentType:"application/json",success:failure:),this.isStale=!1)},s._delete=s.reset=function(t,i,s){var n=this,r=document.getElementById("acsOverrideSettings"),o=document.getElementById("acsClearStateWaitMessage"),a=!!r&&!!o;a&&(X(r,"acsNoDisplay"),Y(o,"acsNoDisplay")),t&&this.onCommit.subscribe(t,!0,!1),s||(this.uid=ie(),this.ckie.kill("_4c_"),this.browser.supportsSessionStorage&&e.sessionStorage.removeItem("_4c_mc_")),this._readyState.didFire&&(this._readyState=new x);var c=Object.keys(this._data.keys);this.erase(c,function(t){n._lastSync=P(),n.timeOffset=se(t._asof_)?P()-t._asof_:0,n._fireChangeEvents(t.keys),n.mergeBrainData(n._data,t),n.syncWithGeneralStorage(),a&&(Y(r,"acsNoDisplay"),X(o,"acsNoDisplay")),n.onCommit.fire(),n._readyState.fire(n),F()||(n.browser.supportsLocalStorage&&(e.localStorage.removeItem("_4c_"),e.localStorage.removeItem("_4c_mc_")),n.browser.supportsSessionStorage&&(e.sessionStorage.removeItem("_4c_"),e.sessionStorage.removeItem("_4c_mc_")))},!0)},s.syncWithGeneralStorage=s.mergeBrainData=i}(R);oe.prototype.constructor=R;var ae,ce=le={VISIT_EXPIRY_DESKTOP:18e5,VISIT_EXPIRY_MOBILE:3e5,POPUP_EXPIRY:72e5},ue=function(){function t(t){t=t||{},this.customerId=t.customerId,this.throttleDuration=t.throttleDuration||400,this.browser=t.browser,this.config=e.globalConfig,this.stg=t.stg,this.stg.get||(this.stg.get=function(){}),this.appId=t.appId,e.isString(this.appId)||(this.appId=""),this.useSessionId=!!t.useSessionId,this.usePopupId=!!t.usePopupId,this.ajax=new h,this.url=e.globalConfig.analyticsUrl,this.data={customerId:this.customerId||"NULL",appId:this.appId||"NULL",userId:this.stg.uid||this.stg.get("rid")||"00000000-0000-0000-0000-00000000000",deviceProfile:{fs_os:this.browser.os.name,fs_osVersion:this.browser.os.version,fs_sdkVersion:e.globalConfig.codeVer,fs_browserName:this.browser.browser.name,fs_browserVersion:this.browser.browser.version,fs_type:this.browser.isTablet?"Tablet":this.browser.isMobile?"Mobile":"Desktop",fs_productType:"web sdk"},events:[]},this.eventsDefault={properties:{fs_pageUrl:[location.href],fs_siteKey:[e.globalConfig.siteKey],fs_deployType:[e.isSelfHosted?"on-prem":"cloud"]}}}var i=t.prototype;return i.addEventsDefault=i.setKey=i.addEvent=i.addEventObj=i.addEventString=i._isEventAllowed=i._updateVisitId=i.initPopupId=function(){var t=ce(this.browser,this.stg.uid,e.globalConfig.siteKey),i=this.stg.get("pid")||t.get("pid")||ie();this.stg.set("pid",i,le.POPUP_EXPIRY),t.set("pid",i,le.POPUP_EXPIRY)},i._updatePopupId=i.send=t}();le.applyEventsDefault=le._send=le.validateEventObject=var he={};var de=),fe=function(){eturn t.prototype.get=function(t){var i=this,s=t.replace(".html","___html.js"),n=setTimeout(this.opts.timeout),r=[s],o=e.isSelfHosted||e.globalConfig.sanitizeHTML;o&&r.push(e.makeURI("$fs.sanitize.js")),window._fsRequire(r,},t}(),ge=function(){function t(t,i){this.gs=t,this.onSet=new x,this.exp=i||864e5,this.config=e.globalConfig}var i=t.prototype;return i._isCPPEnabled=i.set=i.get=i.all=i.toQueryString=i.erase=i.save=i.append=function(e,t,i){var s,n,r,o=this.gs.get("cp")||{};if(this._isCPPEnabled(e)){o[e]&&(t=","+t),o[e]=""+(o[e]||"")+t,i&&(n=(s=o[e].split(",")).length-1,r=s.length>i?s.length-i:0,o[e]=s.splice(r,n-r+1).join()),this.gs.set("cp",o)}},t}(),pe=function(i){(s,i);var n=s.prototype;return n._sync=function(i){var s,n,r=this;if(!this.isSyncing)if(this.isSyncing=!0,i=i||function(){},this.pers==A.CK||this.pers==A.CK_Hybrid){if(!(s=this.ckie.getByNestedCookieName("_4c_s_"))&&this.pers==A.CK_Hybrid&&this.browser.supportsLocalStorage){var o=localStorage.getItem("_4c_");o&&(this.ckie.set("_4c_s_",o),s=o)}if(s)return this.pers==A.CK_Hybrid&&this.browser.supportsLocalStorage&&K.prototype.setItem("_4c_",s),s=t.decompress(s),this._lastSync=P(),n=JSON.parse(s),this._fireChangeEvents(n.keys),n.keys=n.keys||{},this._data=n,this.onSync.fire(this),this.isSyncing=!1,void e.nextTick(i);this.isSyncing=!1,e.nextTick(i)}else if(this.pers==A.DS){if(s=localStorage.getItem("_4c_")){if(s=t.decompress(s),this.lastSync=P(),(n=JSON.parse(s)).keys=n.keys||{},this._fireChangeEvents(n.keys),this._data=n,e.nextTick(,P()-this._data.when<3e5)return this.isSyncing=!1,void e.nextTick(i);this.lastSync=P(),this._data={when:P(),keys:{}}}this.isSyncing=!1,e.nextTick(i)}},n._commit=function(){clearTimeout(this.lock),this.lock=null,this.lastSave=P(),this._data.when=this.lastSave;var i="";try{i=JSON.stringify(this._data)}catch(me){return}if(this.pers==A.CK||this.pers==A.CK_Hybrid){var s=e.ext({},this._data);for(var n in s.keys)delete s.keys[n].t;i=JSON.stringify(s);var r=t.compress(i);this.ckie.set("_4c_s_",r),this.pers==A.CK_Hybrid&&this.browser.supportsLocalStorage&&K.prototype.setItem("_4c_",r),this.onCommit.fire(this._data)}else this.pers==A.DS&&(K.prototype.setItem("_4c_",t.compress(i)),this.onCommit.fire(this._data));this.isStale=!1},s}(R);pe.prototype.constructor=R;var _e=window.name,ve=);return ve.initialize=ve.isSupported=i.APPID=N,i.AjaxTransport=h,i.Async=te,i.Bind=S,i.BindOnce=w,i.Browser=W,i.CPPS=ge,i.Cookie=re,i.DOMContains=i.DomStorage=K,i.FSEvent=x,i.INT=ee,i.ImageTransport=de,i.Journey=ue,i.SeshStorage=V,i.TemplateFetcher=fe,i.Unbind=I,i.WindowStorage=ve,i._preventUnloadFor=i.addClass=X,i.b64DecodeUnicode=i.checkIfStorageIsEnabled=F,i.checkRegexOption=function(t,i){if(null==t||"string"!=typeof i)return!1;if("*"===t)return!0;if(t instanceof RegExp)return t.test(i);if("string"!=typeof t)return!1;var s;if(0===(t=e.toLowerCase(t.replace(/^\s+|\s+$/g,""))).indexOf("re:"))s=t.substr(3);else if(0===t.indexOf("glob:"))s=o(t.substr(5));else{if(-1==t.indexOf("*")&&-1==t.indexOf("//")&&""!==t)return i.indexOf(t)>-1;s=a(t)}return new RegExp(s).test(i)},i.compile=i.debounce=i.decodeHTMLEntities=i.findMatchingDefFromList=i.generateGUID=i.getBrainStorage=ce,i.getBrowserInstance=z,i.getGeneralStorage=function(t,i){var s=e.globalConfig.storage.toUpperCase(),n=L.StorageInstances,r=A;return t.supportsLocalStorage||s!=r.DS?t.isMobile&&s==r.CL&&(s=r.MC):s=r.CK,s==A.CK||s==A.DS||s==A.CK_Hybrid?(n.generalStorage||(n.generalStorage=new pe(t,i)),n.generalStorage):(n.brainStorage||(n.brainStorage=new oe(t,i)),n.brainStorage)},i.getHashParm=i.getKeyCode=E,i.getRootDomain=u,i.getScreenResolution=i.getScroll=i.getSize=i.hasClass=$,i.hash=i.imgInfo=i.initBehavioralData=i.isControlKey=i.key4CEnableStorage="_4c_es_",i.loadCSS=i.now=P,i.pageNavEvent=B,i.preventDefault=i.products=he,i.registerProduct=i.removeClass=Y,i.retrieveNestedVariable=i.sendWithoutWaiting=i.setScroll=i.setStorageIsEnabled=function(e){if(!0===e){if("cookie"===U()){var t=L.StorageInstances.generalStorage||L.StorageInstances.brainStorage;t.ckie.set("_4c_es_",e,!0,!0),t._commit()}else if("windowStorage"===U()){var i=L.StorageInstances.generalStorage||L.StorageInstances.brainStorage;localStorage.setItem("_4c_es_",e,!0),i._commit()}}else window.FSR.clearState()},i.startTime=j,i.storageTypes=A,i.testAgainstSearch=c,i.testSameDomain=i.toggleClass=i});
