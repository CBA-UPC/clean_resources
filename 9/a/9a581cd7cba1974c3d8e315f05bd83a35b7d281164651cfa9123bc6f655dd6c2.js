(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[1e3],{52862:33811:(t,e,r)=>{"use strict";r.d(e,{uw:()=>P,x0:()=>E});var i=r(41185),a=r(66062),n=r(18274),s=r(55752),o=r.n(s),p=r(5663),l=r.n(p),c=r(74890),h=r.n(c),d=r(62720),u=r(64123),y=r(11622),m=r(18966),f=r(41779);r v=[d.Z.REBLOG,d.Z.HASH_TAG,d.Z.IMAGE,d.Z.VIDEO,d.Z.CLIPBLOG,d.Z.VOICE_BLOG,d.Z.PR,d.Z.AUTO_AD],I=C=(t,e,r)=>({type:m.V7,payload:{blogId:t,entryId:e,error:r},error:!0}),E=(0,n.H)((function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;return function(){var n=(0,a.Z)((function*(a,n,s){var{fetchr:p}=s,c=h()(v.concat(r)),d=o()(n(),["bloggerState","blogMap",t,"blog_name"],"");if(!d||!e)return null;var f=o()(n(),["entryState","entryMetaMap",e],null),b=o()(f,"pagingType",void 0),E=i===b,P=o()(n(),["entryState","entryMap",e],null);if(f&&E&&P&&(!l()(P.entry_text)||404===P.status_code))return null;try{a({type:m.Gh,payload:{blogId:t,entryId:e,fieldFilter:c,frm:i}});var S={amebaId:d,blogId:t,entryId:e,fieldFilter:c,frm:i},_=yield p.read(u.Z.BlogEntry).params(S).end(),T=_.data;if(!(!1!==n().deviceState.isEmojiSupported)&&T.entities&&T.entities.entryMap)try{T=g(g({},T),{},{entities:g(g({},T.entities),{},{entryMap:yield(0,y.R9)(T.entities.entryMap)})})}catch(O){console.warn(O),T=_.data}return a(I(t,e,T,i))}catch(D){return a(C(t,e,D))}}));return function(t,e,r){return n.apply(this,arguments)}}()})),P=(0,n.H)(((t,e)=>function(){var r=(0,a.Z)((function*(r,i){var a=o()(i(),["bloggerState","blogMap",t,"blog_name"],"");if(!a||!e)return null;var n=o()(i(),["entryState","entryMap",e],null);if("amember"!==n.publish_flg||n&&(n.entry_text||404===n.statusCode))return null;try{r({type:m.tB,payload:{entryId:e}});var s={token:o()(i(),["amebloTokenState","amebloToken"],null),amebaId:a,entryId:parseInt(e,10)},p=yield(0,f.s)(s);return r(((e,p))}catch(l){return r(((t,e)=>({type:m.Ny,payload:{entryId:t,error:e},error:!0}))(e,l))}}));return ()))},43192:(t,e,r)=>{"use strict";r.d(e,{ov:()=>c});var i=r(66062),a=r(18274),n=r(55752),s=r.n(n),o=r(5663),p=r.n(o),l=r(46088);var c=(0,a.H)({ttl:200},((t,e)=>function(){var r=(0,i.Z)((function*(r,i,a){var{fetchr:n}=a,o=i(),c=s()(o,["entryState","entryMap",e,"clip"],{});if(p()(c))return null;try{var h=s()(o,["bloggerState","blogMap",t,"blog_name"],""),d=yield n.read("clipblogPlayCount").params({amebaId:h,blogId:t,entryId:e}).end();return r(e,d.data))}catch(u){return r(function(t,e){return{type:l.u,payload:{entryId:t,error:e},error:!0}}(e,u))}}));return ()))},81151:(t,e,r)=>{"use strict";r.d(e,{E:()=>v});var i,a,n,s=r(3e4),o=(r(91938),r(76955)),p=r(43177),l=r.n(p),c=r(45525),h=r(73040),d=r.n(h),u=r(19008),y=r(52862),m=r(77948),f=r(54285),b=r(37285),g=r.n(b),v=(0,c.w1)(g())((n=a=class t extends o.Component{constructor(t){super(t),this.playStartDate=null,this.playStartDateCache=null,this.playTime=0,this.playTimeCache=0,this.currentTime=null,this.currentTimeCache=null,this.setEntryInformation=this.setEntryInformation.bind(this),this.onStart=this.onStart.bind(this),this.onPlay=this.onPlay.bind(this),this.onTimeup=this.onTimeup.bind(this),this.onPause=this.onPause.bind(this),this.onEnded=this.onEnded.bind(this)}componentDidMount(){this.initialize()}shouldComponentUpdate(t){return this.props.amebaId!==t.amebaId||this.props.entryId!==t.entryId||this.props.duration!==t.duration||this.props.pathname!==t.pathname||this.props.playCount!==t.playCount||this.props.id!==t.id||this.props.trackEndClip!==t.trackEndClip||this.props.trackProgressClip!==t.trackProgressClip||this.props.trackStartClip!==t.trackStartClip}componentDidUpdate(t){this.props.pathname!==t.pathname&&(this.reset(),this.initialize()),this.props.duration===t.duration&&this.props.playCount===t.playCount||this.setEntryInformation({duration:this.props.duration,playCount:this.props.playCount})}componentWillUnmount(){this.reset()}onStart(t){this.playStartDate=this.playStartDate||l()(Date.now(),m.Z.CLIP_PLAYER_LOG_DATE);var{amebaId:e,duration:r,entryId:i,id:a}=this.props,n={entryId:i,clipId:a,bloggerAmebaId:e,playheadTime:t.video.currentTime||"0",playMedia:"main-player",duration:r};this.props.trackStartClip(n)}nTimeup(t){if(this.playStartDate){if(this.playStartDateCache){var e=(Date.now()-this.playStartDateCache)/1e3;this.playTime=this.playTimeCache+e}var r=Math.floor(t.video.currentTime);if(r%5==0&&r!==this.currentTimeCache){this.currentTimeCache=r;var{amebaId:i,duration:a,entryId:n,id:s}=this.props,o={entryId:n,clipId:s,bloggerAmebaId:i,playheadTime:t.video.currentTime||"0",playMedia:"main-player",duration:a,playStartDate:this.playStartDate,playTime:this.playTime||"0"};this.props.trackProgressClip(o)}}}nEnded(){var{amebaId:t,duration:e,entryId:r,id:i}=this.props,a={entryId:r,clipId:i,bloggerAmebaId:t,playMedia:"main-player",duration:e,playStartDate:this.playStartDate,playTime:this.playTime||"0"};this.props.trackEndClip(a),this.clearLogCache()}ount(){var t=window.ClipDesktopPlayerApp;t&&(this.clearClip(),this.clip=new t(this.props.id),this.clip.on(t.Events.START,this.onStart),this.clip.on(t.Events.PLAY,this.onPlay),this.clip.on(t.Events.TIMEUP,this.onTimeup),this.clip.on(t.Events.PAUSED,this.onPause),this.clip.on(t.Events.ENDED,this.onEnded),this.clip.mount(this.target))}load(){return(0,u.v)("".concat(window.process.env.HTTP_PATH_CLIPBLOG,"/js/").concat(y.Z.PLAYER_FILE_VERSION,"/clipDesktopPlayerApp.js"))}initialize(){this.target&&this.load().then((()=>{this.mount(),this.setEntryInformation({duration:this.props.duration,playCount:this.props.playCount}),this.startListen()}))}handleEnter(){this.clip&&(this.clip.status.isEnded||this.clip.play())}handleLeave(){this.clip&&(this.clip.status.isFullscreen||this.clip.pause())}clearLogCache(){this.currentTimeCache=null,this.playStartDateCache=null,this.playTimeCache=this.playTime}tartListen(){t.intersectionListener||(t.intersectionListener=(0,f.T)({threshold:.5})),this.stopListen(),this.unlisten=t.intersectionListener.listen(this.target,(t=>{t.intersectionRatio>=.5?this.handleEnter():this.handleLeave()}))}der(){return this.props.id?o.createElement("div",{className:g().Block,ref:,(0,s.Z)("div",{className:g().Placeholder},void 0,(0,s.Z)(d(),{"aria-label":"\u52d5\u753b",className:g().Icon}))):null}},a.displayName="PcEntryClip",a.intersectionListener=void 0,i=n))||i},41e3:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:);var i,a,n,s=r(3e4),o=r(66062),p=(r(91938),r(76955)),l=r(55752),c=r.n(l),h=r(29466),d=r.n(h),u=r(5663),y=r.n(u),m=r(97175),f=r(66948),b=r(73614),g=r(33811),v=r(43192),I=r(5563),C=r(81151),E=r(51650),P=r(75457);function S(){return(S=(0,o.Z)((function*(t){var{dispatch:e,getState:r,match:i,location:a}=t,{params:n,route:s}=i,{pageType:o}=s,p=n.amebaId,l=yield e((0,b.Rs)(p));if(!l||!l.error){var h=c()(r(),["bloggerState"]),d=c()(h,["bloggerMap",p],{}).blog,u=c()(h,["blogMap",d],{});if(u&&u.blog_id){var y=n.entryId,{frm:m}=a.query;yield e((0,g.x0)(u.blog_id,y,[],m)),o===P.Z.AmemberEntry&&(yield e((0,g.uw)(d,y))),yield e((0,v.ov)(u.blog_id,y))}}}))).apply(this,arguments)}var _=(0,E.lB)(["match","location"])(i=(0,f.$j)((function(t,e){var{match:r,location:i}=e,{params:a}=r,n=a.amebaId,s=a.entryId,o=i.pathname;return{amebaId:n,entryId:s,clip:(t.entryState.entryMap[s]||{}).clip||{},pathname:o}}),{trackEndClip:I.ps,trackProgressClip:I.QJ,trackStartClip:I.F_})(i=(0,m.provideHooks)({done:)((n=a=class extends p.Component{shouldComponentUpdate(t){return this.props.amebaId!==t.amebaId||this.props.entryId!==t.entryId||this.props.pathname!==t.pathname||this.props.trackEndClip!==t.trackEndClip||this.props.trackProgressClip!==t.trackProgressClip||this.props.trackStartClip!==t.trackStartClip||!d()(this.props.clip,t.clip)}render(){return y()(this.props.clip)?null:(0,s.Z)(C.E,{amebaId:this.props.amebaId,duration:this.props.clip.duration||0,entryId:"".concat(this.props.entryId),id:this.props.clip.id||"",pathname:this.props.pathname,playCount:this.props.clip.play_count||0,trackEndClip:this.props.trackEndClip,trackProgressClip:this.props.trackProgressClip,trackStartClip:this.props.trackStartClip})}},a.displayName="PcEntryDetailClip",i=n))||i)||i)||i},73040:function(t,e,r){"use strict";var i=this&&this.__assign||a=this&&this.__createBinding||(Object.create?,n=this&&this.__setModuleDefault||(Object.create?,s=this&&this.__importStar||Object.defineProperty(e,"__esModule",{value:!0});var o=s(r(76955));e.default=,74890:46377:(t,e,r)=>{var i=r(18300)(();i.push([t.id,'._2MqvWNcH{font-size:0;margin:2rem 0 4rem;max-width:288px;position:relative;width:100%}._1aVDMx5q{background:#f8f8f8;border-radius:8px;font-size:0}._1aVDMx5q:before{content:"";display:block;padding-top:177.77%}._1PpRlZ-j{bottom:0;color:#ccc;font-size:120px;height:120px;left:0;margin:auto;position:absolute;right:0;top:0;width:120px}',""]),i.locals={Block:"_2MqvWNcH",Placeholder:"_1aVDMx5q",Icon:"_1PpRlZ-j"},t.exports=i},37285:(t,e,r)=>{var i=r(46377),a=Object.assign||n=Object.defineProperty||"string"==typeof i&&(i=[[t.id,i,""]]),t.exports=function(t){var e=a({},t.locals||{});return n(e,"_",{value:),n(e,"toString",{value:function(){return"function"==typeof t.toString?t.toString():""}}),e}(i)}}]);